# StackOverflow 问答 14513000-14513999

# c# - 将 SafeHandles 从非托管编组到托管

> ID：14513001
> 
> 赞同：1
> 
> 时间：2013-01-24T23:50:45.233
> 
> 标签：c#, interop, pinvoke, marshalling

在我正在编写的本机 dll 包装器中，我刚刚用 SafeHandles 替换了 IntPtr 的所有用法（用于编组句柄）。我的印象是正确编写的 SafeHandle 类型可以通过这种方式与 IntPtr 互换。

但是，我的 Marshal.GetFunctionPointerForDelegate 调用现在抛出异常：

```
Cannot marshal 'parameter #n': SafeHandles cannot be marshaled from unmanaged to managed. 
```

回调在参数列表中包含一个句柄，因此委托在其位置包含一个 SafeHandle（而不是之前的 IntPtr）。那么我可以不这样做吗？如果是这样，考虑到我需要编组回调，我有哪些使用 SafeHandles 的选项？

这是本机 dll 标头的编辑示例：

```
struct aType aType;
typedef void (*CallBackType)(aType*, int);
aType* create(); // Must be released
void   release(aType* instance);
int    doSomething(aType* instance, int argumnet);
void   setCallback(CallbackType func); 
```

给我带来麻烦的是回调。C# 端看起来像这样：

```
delegate void CallBackType(IntPtr instance, int argument); 
```

然后：

```
var funcPtr = Marshal.GetFunctionPointerForDelegate(del = new CallbackType(somefunc)):

NativeFunction.setCallback(funcPtr) 
```

这很好用，而且一直都是这样。但是，我想从用于管理句柄的 IntPtr 转移到安全句柄，并读到它是一个替代品。但是，在上述 C# 代码中将 IntPtr 替换为 SafeHandle 子类会导致报告的异常：

```
 delegate void CallBackType(MySafeHandle instance, int argument); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-01-28T17:07:37.923

错误消息具有误导性。将安全句柄从非托管编组到托管是*100% 可能*的，因为这就是*应该创建*安全句柄的方式。看看 CreateFile 是如何定义的，例如：

```
[DllImport("kernel32.dll", CharSet=CharSet.Auto, SetLastError=true)]
private static extern SafeFileHandle CreateFile(string lpFileName, int dwDesiredAccess, 
    FileShare dwShareMode, SECURITY_ATTRIBUTES securityAttrs,
    FileMode dwCreationDisposition, int dwFlagsAndAttributes, IntPtr hTemplateFile); 
```

编译器生成错误消息的原因实际上是您声明*委托*的方式。当我声明回调委托时，我犯了与您相同的错误并尝试使用 MySafeHandle 类型作为委托参数（此处，非托管代码将回调您的托管代码）：

```
delegate void TimerCallback(IntPtr pCallbackInstance, IntPtr context, MySafeHandle ptpTimer); 
```

为此，我收到了与您完全相同的错误消息。但是，一旦我将委托签名更改为 IntPtr，错误就会消失，因此我们可以看到我们天真的直觉是不正确的......

```
delegate void TimerCallback(IntPtr pCallbackInstance, IntPtr context, IntPtr ptpTimer); 
```

看，**瞧，错误消失了**！现在我们只需要弄清楚如何使用进入委托的 IntPtr 来查找正确的 MySafeHandle 对象......！

一旦我弄清楚是什么改变修复了错误，我也可以想出一个理论来*解释为什么*它修复了错误。

理论：（未验证）

您必须在委托签名中使用 IntPtr 的原因是 SafeHandles 是*特殊*的。每当您编组为 SafeHandle 时，CLR 编组器会自动将不透明的 IntPtr 句柄转换为拥有相关 HANDLE 的新*CLR* SafeHandle*对象。*（请注意，SafeHandles 是对象，而不是结构！）

 *如果您每次调用委托时都为 OS HANDLE 创建一个新的所有者对象，那么您很快就会遇到很大的麻烦，因为一旦您从委托返回，您的对象就会被垃圾回收！

所以我想也许编译器只是想把我们从这个错误中拯救出来——以它自己令人困惑的措辞方式？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-25T18:39:38.697

嗯......只是大声思考，但我认为你必须实现某种中间包装；`SafeHandle`在基本编组期间与 P/invoke 实现一起使用，但不是“手动编组”，就像你在这里做的那样......试试这样的事情，也许？

```
internal delegate void InnerCallbackType(IntPtr instance, int argument);
public delegate void MyCallBackType(MySafeHandle instance, int argument);

public void SetCallback(Action<MySafeHandle, int> someFunc) 
{
    InnerCallbackType innerFunc = (rawHandle, rawArg) => 
    {
        someFunc(new MySafeHandle(rawHandle, true), rawArg);
    };
    var funcPtr = Marshal.GetFunctionPointerForDelegate(innerFunc);
    NativeFunction.setCallback(funcPtr);
} 
```

这样，您仍然可以在`SafeHandle`使用时保留“类型安全”，同时让您以您想要的方式处理编组......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-11-17T10:26:39.603

可以**通过**一些额外的步骤来转向`IntPtr`，`MySafeHandle` **而无需****使用 ICustomMarshaler**代理将委托转换为另一个。

> 委托 void CallBackType（MySafeHandle 实例，int 参数）；

所以让我们用它做一些花哨的蠢事：

假设我们使用 __cdecl 调用约定将这样的委托传递给非托管环境（仅用于示例）：

```
[DllImport("some.dll", ExactSpelling = true, CallingConvention = CallingConvention.Cdecl)]
public static extern void setCallback([MarshalAs(UnmanagedType.FunctionPtr)] CallBackType callBackType); 
```

然后我们要装饰我们的代表：

```
[UnmanagedFunctionPointer(CallingConvention.Cdecl)] // depends on unmanaged implementation, but for the example sake
delegate void CallBackType([MarshalAs(UnmanagedType.CustomMarshaler, MarshalTypeRef = typeof(MyCustomMarshaler))] MySafeHandle instance, int argument); 
```

最后是**ICustomMarshaler**实现：

```
public sealed class MyCustomMarshaler : ICustomMarshaler
{
    private static MyCustomMarshaler _instance = new MyCustomMarshaler();

    public void CleanUpManagedData(object o)
    {
    }

    public void CleanUpNativeData(IntPtr ptr)
    {
    }

    public int GetNativeDataSize()
    {
        return IntPtr.Size;
    }

    public IntPtr MarshalManagedToNative(object o)
    {
        return IntPtr.Zero;
    }

    public object MarshalNativeToManaged(IntPtr ptr)
    {
        return new MySafeHandle()
        {
            handle = ptr
        };
    }

    public static ICustomMarshaler GetInstance(string s)
    {
        return _instance;
    }
} 
```

我发布了答案，因为我在互联网上找不到任何关于它的信息（无论它是否安全，或者为什么编组不自动将 IntPtr 转换为 SafeHandle）。*

# functional-programming - 如何在 SML 中实例化函子？

> ID：14513002
> 
> 赞同：3
> 
> 时间：2013-01-24T23:50:52.803
> 
> 标签：functional-programming, sml, ml

如果我有以下仿函数，我如何用 ? 实例化它`ListMapFn`？

```
functor G(M: ORD_MAP where type Key.ord_key = string) : 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-25T01:26:20.627

只是为了详细说明仿函数的语法，这里有一些例子。

首先是一些初步声明，以便我们可以处理一些事情。

```
signature FOO =
sig
  val foo : unit -> unit
end

structure FooUnit : FOO =
struct
  fun foo () = ()
end

structure FooPrint : FOO =
struct
  fun foo () = print "Foo\n"
end 
```

现在。当我们创建只接受一个结构作为参数的函子时，如果我们不想写`functor FooFn (f : FOO)`or是可选的`functor FooFn (structure f : FOO)`。实际上，这仅适用于函子将一个结构作为参数的情况：

```
(* Optionally to write "structure f : FOO" as there is only one argument *)
functor FooFn (f : FOO) = struct
  val foo = f.foo
end 
```

但是，当函子接受两个或更多参数时，必须使用关键字结构。请注意，仿函数也可以采用其他参数，例如整数值。

```
(* Note there is no delimiter, just a space and the structure keyword *)
functor FooFooFn (structure f1 : FOO
                  structure f2 : FOO) =
struct
  val foo1 = f1.foo
  val foo2 = f2.foo
end 
```

在应用函子并获取结果结构时，我们也有一些选择。第一个是直截了当的。

```
structure f1 = FooFn (FooUnit) 
```

然而，这有点“特例”，因为我们将其定义为“内联”，省略了`struct`and`end`部分

```
structure f2 = FooFn (fun foo () = print "Inlined\n") 
```

或者我们可以更详细一点，并包括`struct`and`end`部分。然而，这两个都只起作用，因为函子接受一个参数

```
structure f2_1 = FooFn (struct fun foo () = print "Inlined\n" end) 
```

当函子采用多个参数时，语法有些相同

```
(* Again note there is no delimiter, so we can have it on the same line *)
structure f3 = FooFooFn (structure f1 = FooUnit structure f2 = FooPrint) 
```

它有点像记录，因为顺序无关紧要

```
(* And we can even switch the order *)
structure f4 = FooFooFn (structure f2 = FooUnit
                         structure f1 = FooPrint) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-25T00:20:05.957

就像是

```
structure S = G(ListMapFn(type ord_key = string; val compare = String.compare)) 
```

或者，如果您更喜欢命名`ListMap`实例：

```
structure ListMap = ListMapFn(type ord_key = string; val compare = String.compare)
structure S = G(ListMap) 
```

# math - 如何在“Mathematica”中绘制方向场？

> ID：14513003
> 
> 赞同：0
> 
> 时间：2013-01-24T23:50:52.413
> 
> 标签：math, wolfram-mathematica, differential-equations

我是mathematica的新手，我正在尝试学习如何使用它，我试图绘制一个方向场但我做不到，这是我的微分方程：

```
y' = exp(-x) + y

y' = (1/6)y^3 - y - (1/3)t^2 
```

这是我尝试的一个例子：

`f[x_, y_] := e^x + y`

`sol = DSolve[y'[x] == f[x, y[x]], y, x]`

```
Table[StreamPlot[{1, f[x, y]}, {x, 0, 10}, {y, 0, 10}, Frame -> False, Axes -> True, VectorScale -> {Automatic, Automatic, f[x, y]}], {f[x, y], {None}}]` 
```

虽然我不知道这段代码是什么意思（用数学语言），但我设法从网上和这个网站上的一些例子和一些答案中收集了它。此代码似乎适用于某些功能，例如：

```
 f[x_, y_] := y 
```

或其他简单的，但不适用于包含指数或三角函数的函数（并非总是如此 - 不知道为什么！）我想绘制我提供的函数和其他函数的方向场，但我不能很好地理解文档中心中的示例。请帮我解决这个问题，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T00:37:34.407

下次您能否为您的程序的所有部分查找正确的语法。例如，指数不是“e”。你也不需要那里的表。已更正

```
f[x_, y_] := Exp[x] + y;
StreamPlot[{1, f[x, y]}, {x, 0, 10}, {y, 0, 10}] 
```

![在此处输入图像描述](../Images/77ba4fa7bd1b6a325d12f33d3ee7abb6.png)

# intellitrace - 在 Visual Studio 2012 Ultimate 中恢复 IntelliTrace 窗口

> ID：14513004
> 
> 赞同：5
> 
> 时间：2013-01-24T23:50:57.510
> 
> 标签：intellitrace

我错误地关闭了 IntellyTrace 窗口。在我这样做之前，我在调试时默认看到了 IntellyTrace 窗口和堆栈跟踪。但是最近我以某种方式关闭了这个窗口并且仍然无法恢复它。

我读到这个： http: [//msdn.microsoft.com/en-us/library/dd572114.aspx](http://msdn.microsoft.com/en-us/library/dd572114.aspx)但没有任何效果。我只想再次查看 IntelliTrace Windows，但无处可以找到有效的解决方案。

有人遇到过吗？或者如何恢复所有的 IntelliTrace 属性？似乎有同样的问题，也许那里描述得更好： [https ://twitter.com/KevinDockx/statuses/253502498806059009](https://twitter.com/KevinDockx/statuses/253502498806059009)

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-12-11T17:38:01.670

[http://blogs.msdn.com/b/jankrivanek/archive/2013/02/05/why-are-intellitrace-windows-and-menus-missing.aspx](http://blogs.msdn.com/b/jankrivanek/archive/2013/02/05/why-are-intellitrace-windows-and-menus-missing.aspx)

这篇 Microsoft 博客文章解释了一些项目调试选项将如何隐藏这些菜单项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T00:00:29.413

I found this post: [Intellitrace is not available for native or mixed-mode debugging](https://stackoverflow.com/questions/3799854/intellitrace-is-not-available-for-native-or-mixed-mode-debugging?rq=1). Seems like someway it set debugger type is "mixed" in project properties. I back it to "managed" and I see IntelliTrace Window.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-24T23:54:01.480

转至`Debug -> Intellitrace`并选择`Intellitrace Calls`或`Intellitrace Events`。您还必须确保您处于断点上，否则将不会显示这些选项。

希望这可以帮助。

# css - 将字母（a、b、c）附加到带有单选按钮的问题

> ID：14513005
> 
> 赞同：1
> 
> 时间：2013-01-24T23:51:14.023
> 
> 标签：css, layout, html-lists, multiple-choice

很抱歉不得不问这个问题，但我花了很多时间在这上面，我很难过。

我有一个多项选择题数据库，它们以 4-8 个问题的形式出现在文档中。我需要按照它们出现的顺序（a、b、c、d、e、f 等）对这些问题进行标注，并且我无法更改 html 或 html 的结构。

有没有一种纯 CSS 方法来实现这一点？如果不是，你会建议什么？我已经粘贴了以下一个问题的结构，但此处包含完整结构的示例：http: [//jsfiddle.net/Jaemaz/JrqMr/1/](http://jsfiddle.net/Jaemaz/JrqMr/1/)

```
<div class="simple-choice-inner">
<div class="choiceInput">
<span class="prompt"><input type="radio"></span>
</div>
<div class="choice-content">
<div class="item_options" id="block">
<span class="prompt">Here is the 2nd possible selection.</span>
</div>
</div>
</div> 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T00:07:01.933

使用`display: list-item;`，您可以使 div 表现为列表项，这意味着它们可以获取标记。如果你设置[`list-style-type`](https://developer.mozilla.org/en-US/docs/CSS/list-style-type)为`lower-alpha`你将收到你需要的东西，小写字母作为标记。

```
/* the important part */
.simple-choice-inner {
    display: list-item;
    list-style: lower-alpha inside;
    clear: left; /* clearing the radio floats */
}

/* make the child divs appear as inline content, in one line */
.simple-choice-inner div {
    display: inline-block;
}

/* this is only used to make the radios appear before the letters */
.simple-choice-inner .choiceInput {
    float: left;
    margin-right: 10px;
} 
```

[jsFiddle 演示](http://jsfiddle.net/JrqMr/6/)

我必须指出，正确的方法是修复 HTML。您应该使用一个`<ol>`用于有序列表的元素。但有一件事需要确定：`id="block"`在每个项目上。ID 在整个文档中必须是唯一的，因此您只能使用它们一次。不这样做会使您的 HTML 无效，并且将来可能会导致奇怪的问题。

# python - 如何用粗线绘制指定数据

> ID：14513006
> 
> 赞同：6
> 
> 时间：2013-01-24T23:51:14.827
> 
> 标签：python, matplotlib, pandas

我有一个包含几年温度记录的数据文件，我用 Pandas 读入了数据文件，现在它变成了下面的 DataFrame：

```
In [86]: tso
Out[86]: 
<class 'pandas.core.frame.DataFrame'>
DatetimeIndex: 28170 entries, 2005-05-20 13:28:42.239999+00:00 to 2012-12-05           13:26:49.919999+00:00
Data columns:
Day      28170  non-null values
Month    28170  non-null values
Year     28170  non-null values
Temp     28170  non-null values
dtypes: float64(1), int64(3) 
```

然后我根据“月”和“年”列绘制它们：

```
ax=tso.groupby(['Month','Year']).mean().unstack().plot(linewidth=3,legend=False)
patches,labels=ax.get_legend_handles_labels()
ax.legend(unique(tso['Year'].values),loc='best')
plt.show() 
```

![在此处输入图像描述](../Images/c140d57c1a39350373adb591ec2df904.png)

现在我想用粗线绘制去年的温度。我该怎么办？有什么简单的解决方案吗？谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-25T00:27:10.263

您可以执行以下操作：

```
ax.lines[-1].set_linewidth(8)
plt.show() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-06-29T18:42:04.533

对于情节中的每一行...

```
for line in ax.lines:
    line.set_linewidth(8)

plt.show() 
```

# c# - 如何在我的应用中添加“评分和评论”按钮？

> ID：14513011
> 
> 赞同：1
> 
> 时间：2013-01-24T23:51:35.520
> 
> 标签：c#, windows-phone-7, xna

我计划很快发布我的应用程序，我想要一个评分按钮，将它们发送到我的应用程序的评分页面。由于它尚未发布，我该怎么做？我还创建了一个共享按钮和电子邮件发件人。我只需要将电子邮件中的链接添加到应用程序的页面。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T00:06:52.743

在[MSDN](http://msdn.microsoft.com/en-us/library/windowsphone/develop/hh394030%28v=vs.105%29.aspx)上：

```
MarketplaceReviewTask review = new MarketplaceReviewTask();
review.Show(); 
```

如果您想建立一个链接，您可以在没有此功能的情况下发布应用程序，一旦获得批准并处于活动状态，发布更新并在几天内再次发布应用程序。

另一种可能的解决方案是发送一封带有固定链接的电子邮件，该链接指向重定向到费率页面的页面，但最初指向一个空页面，一旦应用程序发布，您就可以将重定向的目的地更新到正确的地址。

# debugging - 如何调试无法启动的 erlang 应用程序

> ID：14513012
> 
> 赞同：5
> 
> 时间：2013-01-24T23:51:39.383
> 
> 标签：debugging, erlang, erlang-otp, erlang-shell

如果我编写一些 erlang 代码来构建监督树，然后在启动时使用以下命令启动应用程序，可能很难找出它为什么不起作用：

```
erl -s myapp -pa ebin ... ... 
```

（myapp 示例模块）

```
-module(myapp).
-export([start/0]).
start() -> application:start(myapp). 
```

假设我的应用程序启动了一个主管 myapp_sup。myapp_sup 轮流启动多个主管（比如说 server_sup、database_sup、another_sup）。

这些主管将启动一些 gen_servers。

在某些时候，如果我的代码中有错误，我找不到它！

我在一些 gen_server 的 init 回调中写了一个对 somemodule:functionthatdoesntexists() 的调用。

vm 所说的只是“init terminating in do boot”，然后显示错误匹配的错误位置、精确的文件和我的顶级模块（myapp）的行。

（不匹配，因为 ok = application:start(...) 将不匹配）。

我查看了 erl_crash.dump 文件，没有关于这个未定义函数的信息（但我在原子列表中找到了它）。

所以，我写了一些日志来大致查看错误在哪里，但是我必须手动启动我的 gen_servers 以获取正确的错误信息。

我错过了什么，我怎么能更快地弄清楚？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T00:45:54.720

将 -init_debug 添加到您的 erl 命令:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-25T14:09:58.373

如果您的应用程序调用未知模块，您的`erl_crash.dump`文件将包含如下一行：

```
41DABB8:t4:A8:nonexistent_module,A7:unknown,N,N 
```

其中行中的“未知”表示`nonexistent_module`找不到该模块。在这些情况下，在文件中搜索`erl_crash.dump`字符串“unknown”会有所帮助。

如果您怀疑某个模块调用了一个不存在的函数，您可以使用交互式 erl shell 中[的外部参照工具找到它。](http://www.erlang.org/doc/apps/tools/xref_chapter.html)确保使用调试信息（通常通过`erlc +debug_info`）编译模块，然后：

```
1> xref:m(my_module).
[{deprecated,[]},
 {undefined,[{{my_module,init,1},{another_module,unknown,0}}]},
 {unused,[]}] 
```

在这里，`xref`向我们展示了该`my_module:init/1`函数调用该`another_module:unknown/0`函数，但该`unknown/0`函数未在`another_module`.

您还可以`xref`用来检查整个应用程序；有关详细信息，请参阅[文档](http://www.erlang.org/doc/apps/tools/xref_chapter.html)

# ios - 将 UINavigationController 功能添加到具有定义协议的容器控制器

> ID：14513017
> 
> 赞同：1
> 
> 时间：2013-01-24T23:52:17.363
> 
> 标签：ios, xcode, delegates, uinavigationcontroller, protocols

我设计了一个自定义容器视图控制器，它模仿路径或 facebook 之类的功能（滑动甲板效果）。为了与这些控制器通信，我定义了一个协议，允许向他们询问一些信息/提醒他们一些事件。

现在，我决定将这些子视图控制器之一嵌入到导航控制器中。不幸的是，导航控制器现在正在接收这些协议方法，我遇到了崩溃。

我的临时解决方案是创建一个中间方法，询问我要与之交谈的控制器是否实际上是导航控制器，如果是，则将消息发送到根。

有没有更优雅的方式来做到这一点？似乎代码有异味，必须编写一个“中间”方法来为我的基本控制器中的每个协议方法执行此检查。有什么想法吗？？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-16T21:01:28.903

您是否尝试过将父视图控制器嵌入 NavigationController 而不是特定的子控制器？通过这样做，您有效地允许所有子控制器参与导航。这将允许您正确使用您的协议。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T00:13:51.533

听起来您需要使用委托设置您的子视图控制器并将其消息发送给其委托而不是其父级。

如果您不了解代表：[可可基础指南](https://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/CocoaFundamentals/CommunicatingWithObjects/CommunicateWithObjects.html#//apple_ref/doc/uid/TP40002974-CH7-SW18)

# python - Python获取类名

> ID：14513019
> 
> 赞同：19
> 
> 时间：2013-01-24T23:52:22.877
> 
> 标签：python

所以我有这个问题，我想以这种方式获取python类的名称：

```
class TestClass():
    myName = (get class name here automatically)
    saveDirectory = os.path.join(saveDir, myName) # so i can save it in unique location
    def __init__(self):
        pass # do something 
```

但是，它似乎`__class__.__name__`在创建时实际上并不存在`myName`。所以我被迫将它放入`__init__()`函数中，如下所示：

```
class TestClass():
    def __init__(self):
        self.myName = self.__class__.__name__
        saveDirectory = os.path.join(saveDir, self.myName) # so i can save it in unique location
        pass # do something 
```

但这有一个很大的问题，因为我在实例化类之前无法获取类的名称，我打算为要保存在saveDirectory中的类的每个实例创建几千兆字节的数据，因此可以重新以后用。所以我实际上不想继续我目前的解决方案。

有没有按照我的意图获得类名？还是我只是在做梦？

编辑：

谢谢你们的好建议。我将花一点时间来看看元类。否则，我可能会在全局范围内创建一个字典，并引用这些实例化的类。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2017-11-03T22:53:07.067

从 python 3.3 开始，您可以使用该[`__qualname__`](https://docs.python.org/3/library/stdtypes.html#definition.__qualname__)变量：

```
class TestClass():
    myName = __qualname__ 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-24T23:59:41.697

只用一个方法？

```
class TestClass(object):
    @classmethod
    def get_save_directory(cls):
        return os.path.join(save_dir, cls.__name__) 
```

或者你可以只使用一个类属性来指示保存目录；减少魔法通常是一件好事。另外，您可以稍后更改课程的名称，而不会破坏您的存储空间。

还有，什么？千兆字节？！

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-01-25T00:10:08.990

在类定义期间实际执行您尝试的唯一方法是使用[元类](https://stackoverflow.com/a/6581949/505154)：

```
def saveDirMeta(name, bases, dct):
    dct['saveDirectory'] = os.path.join(saveDir, name)
    return type(name, bases, dct)

class TestClass(object):
    __metaclass__ = saveDirMeta  # this adds the 'saveDirectory' attribute
    def __init__(self):
        pass # do something 
```

或者在 Python 3.x 上：

```
class TestClass(metaclass=saveDirMeta):
    def __init__(self):
        pass # do something 
```

这肯定比仅使用以下内容更清楚：

```
class TestClass():
    saveDirectory = os.path.join(saveDir, 'TestClass')
    def __init__(self):
        pass # do something 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-25T00:06:22.817

我猜你正在做的事情是不可能的，因为当你这样做时，这个类甚至不存在：

`myName = (get class name here automatically)`

但是在类被解释后不久，您可以将类对象传递给其他函数来为您完成工作。

```
In [1]: def save_class(cl):
    myName = cl.__name__
    print myName        #or do whatever you wanna do here
   ...:     

In [2]: class A:pass

In [3]: save_class(A)
A 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-10-06T00:16:14.037

在课堂解释期间，那里还没有“那里”。所以，是的，您最初的示例显示的内容是不可能的。但是请解释为什么在课程甚至在技术上存在之前就需要知道这一点？

除非对这个悬而未决的问题有一个很好的答案，否则剩下的就是试图从以下位置获取类的名称：

```
1\. outside the interpreted class definition, uninstantiated

    class demo(object):
        pass

    print demo.__name__ # 'demo'

2\. from within the class definition, uninstantiated (or instantiated ;-)

    class demo2(object):
        @classmethod
        def myName(cls):
            return cls.__name__

    print demo2.myName() # 'demo2'
    print demo2().myName() # 'demo2'

or

3\. within an actual instance of the class

    class demo3(object):
        def myClassName(self):
            return self.__class__.__name__

    print demo3().myClassName() # 'demo3' 
```

除此之外，请编辑问题并添加一些细节来解释为什么您的初始尝试需要以您想要的方式工作，在实例化之前并且在类定义内部，而您的第二个示例有问题。另外， saveDir 是如何通过/来自的？（类之外的全局？）请显示一些代码，显示您打算如何使用您想要工作的内容。可能有一种重新设计的方法可以从这里到达那里，如果不是字面意思的话，实际上是这样。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-10-06T02:28:30.060

除了 F J's [answer](https://stackoverflow.com/a/14513189/65696)中的元类之外，我还可以想到另外*两种*方法。我将从看起来更好看的开始。您不需要使用元类；有时一个描述符就足够了。

```
class ClassNameDescriptor(object):
    def __get__(self, instance, owner):
        return owner.__name__

class BaseClass(object):
    name = ClassNameDescriptor()

class Foo(BaseClass):
    pass 
```

另一种方式，如果你真的*需要类**体内*的类名（不太可能），你可以窥探调用堆栈。出现在源代码中的类名位于类定义正在执行的代码对象上：

```
import sys

def get_class_name_from_inside_class():
    return sys._getframe().f_back.f_code.co_name

class Foo(object):
    name = get_class_name_from_inside_class()
    print name 
```

到目前为止介绍的那些，*只有*最后一个允许你在类体内使用名称作为字符串，不幸的是，这不适用于所有版本的 python，特别是 IronPython 没有实现调用堆栈内省因为它在 DLR 中不可用。

有一种方法可以在不自省堆栈的情况下轻松获得它。它类似于 FJ 提供的答案，使用元类，但使用`__prepare__`Python 3 中可用的功能：

```
class namedMeta(type):
    def __prepare__(mcls, name, bases, **kwargs):
        return {'name': name}

class Foo(metaclass=named):
    print name 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-06-03T12:41:30.150

试试这个。您可以参考您当前的课程`_class`。（我使用的是 python 2.7）

```
class Meta(type):
    def __init__(self, *args):
        super(Meta, self).__init__(*args)
        self._class = self
        self.saveDir = str(self._class)

class Wow(object):
     __metaclass__ = Meta

>>> Wow.saveDir
>>> Wow().saveDir 
```

# c# - 用对象替换部分字符串

> ID：14513028
> 
> 赞同：0
> 
> 时间：2013-01-24T23:53:41.160
> 
> 标签：c#, string, split

我正在尝试将字符串的一部分转换为不同的对象并将它们加入到列表或数组中，这并不重要。这是一个例子：

示例字符串“这是一个测试字符串。\n \t 这是一个带有制表符的新行”。

我想得到一个输出如下：

```
new List<OpenXmlElement>(){
                new Text("This is a test string."),
                new Break(),//this is for the \n char
                new TabChar(), //this is for the \t char
                new Text("This is a new line with a tab")
            }; 
```

我已经在字典中有一些字符和类类型，我计划使用反射来实例化它们。

```
public static Dictionary<string, Type> Tags = new Dictionary<string, Type>()
    {
              {"\n",   typeof(Break)},
              {"\t",   typeof(TabChar)}
    }; 
```

我想我可以使用子字符串或正则表达式，但我希望找到一个更清洁的解决方案。

对不起，如果问题不够清楚。我很乐意回答您的任何问题

这是我的全班

```
public class FormatConverter:IFormatConverter
{

    public static Dictionary<string, Type> Tags = new Dictionary<string, Type>()
    {
              {"\n",   typeof(Break)},
              {"\t",   typeof(TabChar)}
    };

    public IEnumerable<OpenXmlElement> Convert(string format)
    {
        foreach (KeyValuePair<string,Type> pair in Tags)
        {
            var items = format.Split(
                new []{pair.Key},StringSplitOptions.RemoveEmptyEntries
            );
            foreach (var item in items)
            {
                yield return new Text(item);
                yield return Activator.CreateInstance(pair.Value) as OpenXmlElement;
            }
            format = format.Replace(pair.Key,"");
        }
    }
} 
```

我知道它有什么问题，只是不知道如何解决它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T00:44:01.633

您可以使用 Split() 方法两次。第一次在 "\n" 上拆分时，您可以循环遍历结果，在每个项目之间插入 Break 对象。

然后，您将对 "\t" 的所有子字符串进行拆分，并再次循环在项目之间插入 Tab 对象。

由于您要循环多次，因此不是最有效的，但是递归应该使代码非常简单。

```
IEnumerable<OpenXmlElement> Convert(string testString) {

    IEnumerable<OpenXmlElement> tabOutput = ConvertString<TabChar>(testString, '\t');

    List<OpenXmlElement> finalOutput = new List<OpenXmlElement>();

    foreach(OpenXmlElement oxe in tabOutput){
        if (oxe is Text)
        {
            IEnumerable<OpenXmlElement> breakOutput = ConvertString<Break>(((Text)oxe).WrappedText, '\n');
            finalOutput.AddRange(breakOutput);
        }
        else
        {
            finalOutput.Add(oxe);
        }
    }
}

IEnumerable<OpenXmlElement> ConvertString<T>(string input, char pattern) 
where T: OpenXmlElement, new() {
    List<OpenXmlElement> output = new List<OpenXmlElement>();

    string[] parts = input.Split( pattern);

    if (parts.Length > 1)
    {
        for (int i = 0; i < parts.Length; i++)
        {
            string part = parts[i];
            if (!string.IsNullOrEmpty(part))
            {
                output.Add(new Text(part));
            }
            if (i < (parts.Length - 1))
            {
                output.Add(new T());
            }
        }
    }
    else
    {
        output.Add(new Text(input));
    }

    return output;
} 
```

您的另一种选择是自己手动遍历字符串并随时构建结果。它可能看起来不是很优雅，但你可以一次性完成。

```
List<OpenXmlElement> output = new List<OpenXmlElement>();
string testString = "This is a test string.\n \t This is a new line with a tab";

System.Text.StringBuilder currentLine = new System.Text.StringBuilder();
for (int i = 0; i < testString.Length; i++) {
 char curChar = testString[i];

 bool clearCurrLine = true;
 OpenXmlElement objToAdd = null;

 switch (curChar)
 {
    case '\n':
      objToAdd = new Break();
      break;

    case '\t':
      objToAdd = new TabChar();
      break;

    default:
      currentLine.Append(curChar);
      clearCurrLine = false;
      break;
  }

  if (clearCurrLine)
  {
    output.Add(new Text(currentLine.ToString()));
    currentLine.Clear();
    output.Add(objToAdd);
  }
}
if (currentLine.Length > 0)
{
  output.Add(new Text(currentLine.ToString()));
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T01:55:56.003

这是一个解析示例文本的解决方案。在实际情况下可能效果不佳：

```
private readonly static Dictionary<char, Type> Tokens = new Dictionary<char, Type> { 
        { '\n', typeof(Break) },
        { '\t', typeof(TabChar) }
    };

private static IEnumerable<OpenXmlElement> Tokenize(string text)
{
    var start = 0;
    var pos = 0;

    foreach (var c in text)
    {
        Type tokenType;
        if (Tokens.TryGetValue(c, out tokenType))
        {
            if (pos > 0)
            {
                yield return new Text(text.Substring(start, pos));
            }
            yield return (OpenXmlElement)Activator.CreateInstance(tokenType);
            start += pos + 1;
            pos = 0;
        }
        else
        {
            pos++;
        }
    }

    if (pos > 0)
    {
        yield return new Text(text.Substring(start));
    }
}

static void Main(string[] args)
{
    var tokens = Tokenize("This is a test string.\n \t This is a new line with a tab").ToArray();

} 
```

# javascript - 使用 node.js 的 Phonegap

> ID：14513029
> 
> 赞同：15
> 
> 时间：2013-01-24T23:53:54.463
> 
> 标签：javascript, ios, node.js, cordova

我正在使用电话间隙开发一个 IOS 应用程序，我想使用 node.js 作为其中的一部分。让 phonegap 与应用程序的其余部分一起运行 node.js 的实例是否可行？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-25T00:25:19.377

Phonegap 是一种客户端解决方案，仅在手机的浏览器应用程序上运行 JavaScript/CSS/HTML。JavaScript Phonegap API 与本机电话界面和浏览器界面对话，为您提供本地工作的选项，就像普通网页一样，具有增强的权限。Node.js 只会为您提供 JSON 的数据连接或您需要通过网络调用拉/推的任何其他内容。

* * *

**更新**：@Turion 的评论很棒，让我看起来更深入。这是堆栈和谷歌想出的：

[原生 IOS 应用和 node.js](https://stackoverflow.com/questions/10463121/native-ios-app-and-node-js)

并将 YouTube 链接直接链接到 neu.Node（在 iphone 上运行的节点！！！）[http://www.youtube.com/watch?v=xzFH80-HYTo](http://www.youtube.com/watch?v=xzFH80-HYTo)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-08-27T22:39:56.787

## 这可能会有所帮助：

[http://phonegap.com/blog/build/phonegap-build-api-for-node/](http://phonegap.com/blog/build/phonegap-build-api-for-node/)

phonegap-build-api-js 是一个已发布的 NPM 模块，用于使用 node.js 访问 PhoneGap Build API。它抽象 HTTP 通信，处理 API 怪癖，其余部分保持不变。换句话说，它简化了对 PhoneGap Build API 的访问，以便您可以专注于将其与您的产品集成。

# sql - SQL 更新不更新 Access 数据库中的字段

> ID：14513040
> 
> 赞同：0
> 
> 时间：2013-01-24T23:54:30.250
> 
> 标签：sql, sql-update

几天来我一直在努力解决这个问题，并且无法找出以下代码有什么问题。当我单击按钮进行更新时，没有任何更新。顺便说一句，我正在使用 html 表格来显示客户的信息，然后使用表格中的那些文本框来更新字段。但是 SQL 更新语句不起作用。这是代码：

```
Protected Sub btnUpdate_Click(sender As Object, e As System.EventArgs) Handles btnUpdate.Click

    Dim myConnection As OleDbConnection 

    Dim myCommand As OleDbCommand  

    Dim ID As Integer 

    Dim mySQLString As String, strFirstName As String, strLastName As String, strPhone As String, strEmail, strComment As String, Employee As String, DateCalled, TimeCalled, DateEdited As datetime 

    myConnection = New OleDbConnection("Provider=Microsoft.Jet.OLEDB.4.0;Data Source=\wfccdb\datagridview\app_data\t3corp.mdb;")  

    myConnection.Open()  

    ID = Request.QueryString.Item("r") 

    Employee = tbEMP.Text  

    strFirstName = tbFname.Text

    strLastName = tbLname.Text

    strPhone = tbPhone.Text 

    strEmail = tbEmail.Text 

    DateCalled = Convert.ToDateTime(tbDateCalled.Text)  
    TimeCalled = Convert.ToDateTime(tbTimeCalled.Text)  
    strComment = tbComment.Text  
    DateEdited = Now

    mySQLString = "UPDATE customers SET Employee='" + Employee + "', FirstName='" + strFirstName + "', LastName='" + strLastName + "', Phone='" + strPhone + "', Email='" + strEmail + "', DateCalled='" + DateCalled + "', " + _
    "TimeCalled='" + TimeCalled + "', Comment='" + strComment + "', DateEdited='" + DateEdited + "' WHERE ReferenceID=" & Val(ID) & "" 

    myCommand = New OleDbCommand  

    myCommand.Connection = myConnection

    myCommand.CommandText = mySQLString

    myCommand.ExecuteNonQuery()
    myConnection.Close()

    Response.Redirect("ViewEditRecords.aspx?r=" + Request.QueryString.Item("r"))

End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T00:06:31.090

首先，你真的应该使用参数化查询——这很容易受到 SQL 注入的影响。

话虽如此，我认为至少您的 DateTime 字段存在问题——插入 MS Access DateTime 字段的正确方法应该是使用#Date#——您的查询将这些字符串插入为不起作用的字符串使用权。

此外，如果您的任何字段中有撇号，这也会中断——使用参数化查询的另一个原因。

希望这有所帮助。

祝你好运。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T00:09:07.087

您的更新 SQL 字符串包含一些问题。让我们从头开始。

```
mySQLString = "UPDATE customers SET Employee='" + Employee + "', FirstName='" + strFirstName + "', LastName='" + strLastName + "', Phone='" + strPhone + "', Email='" + strEmail + "', DateCalled='" + DateCalled + "', " + _
"TimeCalled='" + TimeCalled + "', Comment='" + strComment + "', DateEdited='" + DateEdited + "' WHERE ReferenceID=" & Val(ID) & "" 
```

首先，请注意您尝试分配 DateCalled、TimeCalled、DateEdited 的三个日期/时间值。我假设它们是您的 Access 表中的真实日期值。在这种情况下，您需要为该列构造更新语句，如下所示：

```
".... DateCalled=#" + tbDateCalled.Text + "# ...." 
```

（您需要用# 将日期值括起来）。也为 TimeCalled 执行此操作。

现在，看看你的`"' WHERE ReferenceID=" & Val(ID) & ""`. 如果您检查[VAL](http://www.techonthenet.com/access/functions/numeric/val.php)函数的作用，它会做相反的事情：将字符串转换为数字。因此，在您的情况下，您需要使用 (drop `& ""`as well，因为不需要它)：

```
"' WHERE ReferenceID=" & CStr(ID) 
```

最后，为什么不在调用后检查错误字符串`myCommand.ExecuteNonQuery()`。我很确定 Access 会告诉你错误是什么

因此，要结合 sgeddes 的建议，您的最终 SQL 字符串应如下所示：

```
Employee = Replace(Employee, "''", "'")
Employee = Replace(Employee, "'", "''")
Do this for first name, last name, phone, comment and email to minimise the threat of SQL injections

mySQLString = "UPDATE customers SET Employee='" & Employee & "', FirstName='" & strFirstName & "', LastName='" & strLastName & "', Phone='" & strPhone & "', Email='" & strEmail & "', DateCalled=#" & tbDateCalled.Text & "#, " + _
"TimeCalled=#" & tbTimeCalled.Text & "#, Comment='" & strComment & "', DateEdited=Now() WHERE ReferenceID=" & CStr(ID) 
```

# c# - 修改路线以减少混乱

> ID：14513041
> 
> 赞同：3
> 
> 时间：2013-01-24T23:54:33.793
> 
> 标签：c#, asp.net-mvc

我正在开发一个管理面板，简而言之，它为许多类/模型（例如用户）提供 CRUD 功能。我现在实现这个的方式非常简单；使用脚手架模板生成控制器和视图，然后将它们全部组合在顶级`Admin`目录下。

该应用程序扩展了很多，管理控制器现在包含其他 5 个控制器的内容。管理视图文件夹有 20 多个视图。此外，管理页面的路径看起来很糟糕！

```
/Admin/UserCreate
/Admin/GroupCreate
... 
```

我想我可以使用路由来解决这个问题。我的想法是可以将每个控制器分开，但仍会反映为管理页面的一部分：

```
/Admin/User/Create
/Admin/Group/Create 
```

这将使路径更易于阅读，并使此应用程序的目录结构更易于接受。

1）是否可以利用自定义路由来制作“子控制器”？有没有更好的办法？我以前从未使用过路线。

2）在某个时候，我计划通过该控制器上的过滤器将管理控制器锁定在用户之外。如果我按上述方式更改路由，我的安全过滤器是否仍能正常工作？我是否需要对每个“子”控制器应用相同的过滤器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T00:10:54.837

这可以使用[MVC 区域](http://msdn.microsoft.com/en-us/library/ee671793%28v=vs.100%29.aspx)来实现。

使用上面的示例，您只需创建一个单独的管理区域并将该控制器/操作结构放在其中，同时仍然保持没有管理员前缀的默认区域。:)

至于您的其他问题，您可以使用该`Authorize`属性来处理安全性，或者实现您自己的（派生自`ActionFilterAttribute`）并用它装饰您的*安全*方法。

# android - 编译安卓框架

> ID：14513043
> 
> 赞同：1
> 
> 时间：2013-01-24T23:54:48.360
> 
> 标签：android, compilation, android-source

我正在尝试对 android 框架中的几个文件进行修改。编译新 frameworks.jar 的最快方法是什么 [mm base/frameworks 不起作用并且 make 太慢]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T00:33:21.360

加速编译的唯一方法`frameworks.jar`是执行以下操作，我使用这个 Bash 脚本并在调用`. build/envsetup.sh && lunch`ArchLinux之前调用它

```
#!/bin/sh
export USE_CCACHE=1
export CCACHE_DIR=/home/my_user_id/Android_Source/.ccache
/home/my_user_id/Android_Source/prebuilt/linux-x86/ccache/ccache -M 20G 
```

替换`my_user_id`为您的 linux id，并替换`Android_Source`为整个源代码所在的适当位置。

这分配了一个 20Gb 的缓存，其中隐藏了常见的编译对象以加快构建过程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-06-12T09:11:29.233

试试看`make java`，`make help`更多信息请参考。

# ios - 滑动 UITableViewCells 怎么实现？

> ID：14513045
> 
> 赞同：3
> 
> 时间：2013-01-24T23:55:04.163
> 
> 标签：ios, objective-c, uitableview, uigesturerecognizer

我有一个填充了好友列表的 UITableView，我了解如何选择一个单元格并将其转到一个全新的视图控制器，但是例如，我将如何创建仅更改所选单元格的效果。

我想选择一个单元格，（使用从左到右滑动的手势）。然后用用户可以与之交互的几个标签/按钮滑动一个新单元格。

非常感谢您的时间和帮助。我什至不知道从哪里开始，我用谷歌搜索了一些东西并得到了一些链接，因为[这个解释了重新加载、重新绘制和重新布局](http://mobiledevelopertips.com/cocoa/understanding-reload-repaint-and-re-layout-for-uitableview.html)，但我仍然不太理解。

# 编辑

在检查stackoverflow右侧的进一步研究后，我[在这里](https://github.com/spilliams/sparrowlike)[找到了一个非常有用的帖子](https://stackoverflow.com/questions/10389095/adding-a-sliding-view-to-a-table-cell-when-selected?rq=1)和源代码，我将尝试一下，看看这是否是我要找的，或者是否有人可以为我确认那会很棒. 如果这是我正在寻找的，请提前抱歉浪费 stackoverflows 空间。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-25T00:08:02.457

您可以将在 S/O 上找到的帖子与源代码一起使用，但您也可以查看提供您正在寻找的功能的各种开源项目。此外，这里有一个很棒的教程，关于如何实现这样的：http: [//idevrecipes.com/2011/04/14/how-does-the-twitter-iphone-app-implement-side-swiping-on-一张桌子/](http://idevrecipes.com/2011/04/14/how-does-the-twitter-iphone-app-implement-side-swiping-on-a-table/)

开源：

*   [https://github.com/lukeredpath/LRSlidingTableViewCell](https://github.com/lukeredpath/LRSlidingTableViewCell)
*   [https://github.com/malcommac/DMSlidingCell](https://github.com/malcommac/DMSlidingCell)
*   [https://github.com/jakeboxer/JBSlidingTableViewCell](https://github.com/jakeboxer/JBSlidingTableViewCell)

您可以在这里找到更多信息：[https ://github.com/search?q=sliding+uitableviewcell&type=Repositories&ref=advsearch&l=Objective-C](https://github.com/search?q=sliding+uitableviewcell&type=Repositories&ref=advsearch&l=Objective-C)

# uitableview - 传递核心数据对象——segue 在第一次尝试时不更新 UI

> ID：14513049
> 
> 赞同：1
> 
> 时间：2013-01-24T23:55:44.763
> 
> 标签：uitableview, ios5, core-data, uistoryboardsegue

在 segue 之后更新 UI 时我遇到了一个奇怪的问题。这是一个非常标准的设计：用户在 tableview 中选择一个单元格，这会触发一个 segue 到一个详细屏幕，该屏幕反映了所选单元格中对象的值——在这种情况下，是一个芦苇——并允许用户编辑.

我在详细信息屏幕中有一个选择器视图，其中包含两个组件，一个索引号和一个品牌。

当我单击一个单元格时，segue 会继续，但 UI 不会更新——选择器保持默认状态，索引 0。

如果我点击“取消”返回表格视图，然后再次单击同一单元格，详细视图将正确更新。

如果我然后点击取消并选择一个新单元格，详细视图仍会反映最后一次单击的单元格。如果我再次单击它，它会正确更新。你得到了图片：我必须点击任何给定的单元格两次才能更新它。

编辑：我意识到我在情节提要中和通过代码手动调用了 segue 两次。我删除了手动调用 performSegue 的代码行......现在该对象只被传递一次，但它在第一次尝试时仍然没有更新。

选择器在 ViewDidLoad 中分配（没有值），如果这有区别的话。然后它应该在 ViewDidAppear 中更新。

我的 fetchedResultsController 的缓存名称被初始化为“nil”。这意味着没有缓存，对吗？所以这不是问题吗？

这是表格视图中的相关代码。reedToEdit 是这个类的一个属性，它被传递给细节控制器（它有一个同名的属性）：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
self.reedToEdit = [fetchedResultsController objectAtIndexPath:indexPath];

}

-(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
UINavigationController *navigationController = segue.destinationViewController;
ReedDetailsViewController *controller = (ReedDetailsViewController *) [[navigationController viewControllers] objectAtIndex:0];

if ([segue.identifier isEqualToString:@"AddReed"]) {
    controller.reedToEdit = nil;
    controller.managedObjectContext = self.managedObjectContext;
    controller.delegate = self;
} else if ([segue.identifier isEqualToString:@"ShowReed"]) {
    controller.reedToEdit = self.reedToEdit;
    NSLog(@"*** prepareForSegue. reedToEdit = %@", controller.reedToEdit);
    NSLog(@"controller = %@", controller);

    controller.title = @"Edit Reed";
    controller.managedObjectContext = self.managedObjectContext;
    controller.delegate = self;
} else {
    NSLog(@"***Unrecognized segue");
    abort();
    }
} 
```

这是来自细节控制器的代码（带有选择器视图）。

```
-(void)viewDidAppear:(BOOL)animated
{
    [super viewDidAppear:animated];

    if (self.reedToEdit != nil) {
        isEditing = YES;
        [self updateInterface];
    }
}

-(void)updateInterface
{
    [picker selectRow:[self.reedToEdit.indexNumber intValue] -1
      inComponent:1
         animated:NO];

    [picker selectRow:[self rowForBrand: self.reedToEdit.brand]
      inComponent:0
         animated:NO];

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T00:53:34.887

我看到几个问题。

首先，根据选定的索引路径将参数传递给您的 segue 的正确方法是*不*设置 ivar in`didSelectRowAtIndexPath:`并使用此 ivar in `prepareForSegue:`。相反，您应该使用该`sender`对象。

```
UITableViewCell *cell = (UITableViewCell*) sender;
NSIndexPath *indexPath = [self.tableView indexPathForCell:cell];
Reed *reedToEdit = [self.fetchedResultsController objectAtIndexPath:indexPath]; 
```

顺便说一句，你可以避免像这样的行的冗余

```
controller.managedObjectContext = self.managedObjectContext;
controller.delegate = self; 
```

通过将它们放在区分 segues的子句*之外。*`if`

其次，主要是一个装饰性问题是您正在设置没有动画的选择器属性根据`viewDidAppear:`经验，如果控件不在屏幕上，则不应使用动画，否则动画是有序的。设置 UI 元素值的正确位置是 in`viewWillAppear:`或什至 in `viewDidLoad:`，即*在*它们出现之前。

# sitecore - 无法创建指向媒体库的项目链接，即使权限允许读取访问

> ID：14513057
> 
> 赞同：3
> 
> 时间：2013-01-24T23:56:46.050
> 
> 标签：sitecore, sitecore-media-library

在我的 Sitecore 站点中，我们有一个名为 Link 的模板，其中包含一个名为 Item 的字段，它是一个具有空源的 Droptree。理论上，使用链接模板的项目应该能够引用 Sitecore 中的任何其他项目。今天我发现一些（非管理员）用户无法引用媒体库中的项目的问题。为什么对媒体库具有完全读取权限的用户无法从 DropTree 中选择媒体库中的项目？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T20:41:30.317

经过一番调查，我发现这取决于用户使用哪个视图登录：桌面或内容编辑器。

问题是，具有空源的 Droptree 将与用户在内容树中的起始位置相关。当用户登录到内容编辑器视图时，他们的起始位置默认设置为 /sitecore/content/。通过将字段的源设置为“/”，我可以让他们通过 Droptree 访问媒体库，这使他们可以访问 /sitecore/ 下的所有内容

我希望这对其他人有帮助。

# php - 拥有更多是不是效率更低 我一直是一个编写干净易读的代码的人。话虽如此，我无法确定使用更多或更少 Hello world! 更短的代码： Hello world! 您在第二个代码中看到我只使用了两个 This is the end! 平均时间：0.00366528034210207 秒 更短的代码 平均时间：0.00243649482727052 秒 无空格代码 平均时间：0.00242624282836913 秒 不打印文本的测试 首选代码 平均时间：0.00143785476684571 秒 更短的代码 平均时间：0.000472831726074218 秒 无空格代码 平均时间：0.000457286834716797 秒 结论/总结 带打印文本 首选代码：0.00366528034210207 秒 更短代码：0.00243649482727052 秒（比以前快 33.5%） 无空格代码：0.00242624282836913 秒（比以前快 0.4%） 不打印文本 首选代码：0.00143785476684571 秒 更短代码：0.000472831726074218 秒（比以前快 66.1%） 无空格代码：0.000457286834716797 秒（比以前快 3.3%） 10 倍的平均值并不真正正确。它应该通过删除极端结果来完成 100 或 1000 次以获得很好的表示。但是通过这个简单的例子，我们可以看到前两个代码之间的显着差异，第三个代码是微不足道的。 于 2013-01-25T02:13:42.840 回答 This answer is useful 3 存在性能影响，但可能可以忽略不计。任何不在块内的空格或制表符都将作为 PHP 脚本输出的一部分发送。要理解这一点，请考虑以下简单示例： PHP代码： Hello world! 通过网络发送为 \n \t\n \t\tHello world!\n \t\n \n 虽然这个 PHP： Hello world! 返回这个： \n \t\tHello world!\n \n 不过，这不是您真正要担心的事情，我说要使用可读的代码。但是，我会说您的第一个示例涉及大量额外的输入，您确定它更好吗？ 于 2013-01-25T00:05:10.243 回答 This answer is useful 2 也许由于您缺少缩进 而无法阅读？我就是这样做的。 Hello world! 于 2013-01-25T00:03:47.947 回答 Related 1 ruby-on-rails - 表单提交后付款 1 java - RESTful Web服务中的xml输入验证 2 javascript - 单击子控件单击时如何停止父gridview事件？ 3 web - 网站介绍 4 java - 这里需要用到ThreadLocal吗？ 1 visual-studio-2010 - 将工具栏恢复到 Visual Studio 2010 Express 1 c# - 当代码从一台机器传输到另一台机器时，树视图控件出现错误 2 perl - 从另一个脚本调用 perl 脚本 1 asp.net-mvc-3 - ViewBag 和 Models 在尝试 Pluggable MVC 区域时不可用 1 c# - 查询 System.DirectoryServices.ActiveDirectory Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：14513061
> 
> 赞同：1
> 
> 时间：
> 
> 标签：php

我一直是一个编写干净易读的代码的人。话虽如此，我无法确定使用更多或更少`<?php`标签时处理速度是否有任何差异。下面是一些代码进行比较：

**首选代码：**

```
<?php while($condition): ?>
    <?php if($anotherCondition): ?>
        Hello world!
    <?php endif; ?>
<?php endwhile; ?> 
```

**更短的代码：**

```
<?php while($condition):
    if($anotherCondition): ?>
        Hello world!
    <?php endif;
endwhile; ?> 
```

您在第二个代码中看到我只使用了两个`<?php`标签，但我发现第一个代码块更容易理解。是否因为我使用了更多`<?php`标签而降低了效率？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T23:59:59.687

No syntax issue can affect performance, so write readable code :)

Your second example is readable too, there is no reason to use 4 instead of 2 php blocks

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-25T02:13:42.840

我测试了您的 2 种代码 + 1 个*无空格*版本，通过引入`$time_start = microtime(true);`代码之前和代码`echo $time = microtime(true) - $time_start;`之后来检查处理速度。

由于处理时间接近微秒，因此结果可能会因许多微小因素而异。所以我测试了每个代码 10 次，我做了一个平均时间。

## 带有打印文本的测试

**首选代码**

```
<?php $time_start = microtime(true); ?>

<?php $i = 0; ?>
<?php while($i <= 5000): ?>
<?php echo $i; ?>
<?php $i++; ?>
    <?php if($i == 5000): ?>
        This is the end! 
    <?php endif; ?>
<?php endwhile; ?>

<?php echo $time = microtime(true) - $time_start; ?> 
```

平均时间：0.00366528034210207 秒

**更短的代码**

```
<?php

    $time_start = microtime(true);

    $i = 0;
    while($i <= 5000):
        echo $i." ";
        $i++;
        if($i == 5000):
            echo "This is the end!";
        endif;
    endwhile;

    echo $time = microtime(true) - $time_start;

?> 
```

平均时间：0.00243649482727052 秒

**无空格代码**

```
<?php $time_start=microtime(true);$i=0;while($i<=5000):echo $i." ";$i++;if($i==5000):echo "This is the end!";endif;endwhile;echo$time=microtime(true)-$time_start;?> 
```

平均时间：0.00242624282836913 秒

## 不打印文本的测试

**首选代码**

```
<?php $time_start = microtime(true); ?>

<?php $i = 0; ?>
<?php while($i <= 5000): ?>
    <?php $i++; ?>
    <?php if($i == 5000): ?>
        <?php $a=$i; ?>
    <?php endif; ?>
<?php endwhile; ?>

<?php echo $time = microtime(true) - $time_start; ?> 
```

平均时间：0.00143785476684571 秒

**更短的代码**

```
<?php

    $time_start = microtime(true);

    $i = 0;
    while($i <= 5000):
        $i++;
        if($i == 5000):
            $a=$i;
        endif;
    endwhile;

    echo $time = microtime(true) - $time_start;

?> 
```

平均时间：0.000472831726074218 秒

**无空格代码**

```
<?php $time_start=microtime(true);$i=0;while($i<=5000):;$i++;if($i==5000):$a=$i;endif;endwhile;echo$time=microtime(true)-$time_start;?> 
```

平均时间：0.000457286834716797 秒

## 结论/总结

**带打印文本**
首选代码：0.00366528034210207 秒
更短代码：0.00243649482727052 秒*（比以前快 33.5%）*
无空格代码：0.00242624282836913 秒*（比以前快 0.4%）*

**不打印文本**
首选代码：0.00143785476684571 秒
更短代码：0.000472831726074218 秒*（比以前快 66.1%）*
无空格代码：0.000457286834716797 秒*（比以前快 3.3%）*

10 倍的平均值并不真正正确。它应该通过删除极端结果来完成 100 或 1000 次以获得很好的表示。但是通过这个简单的例子，我们可以看到前两个代码之间的显着差异，第三个代码是微不足道的。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-25T00:05:10.243

存在性能影响，但可能可以忽略不计。任何不在`<?php ?>`块内的空格或制表符都将作为 PHP 脚本输出的一部分发送。要理解这一点，请考虑以下简单示例：

PHP代码：

```
<?php while($condition): ?>
    <?php if($anotherCondition): ?>
        Hello world!
    <?php endif; ?>
<?php endwhile; ?> 
```

通过网络发送为

```
\n
\t\n
\t\tHello world!\n
\t\n
\n 
```

虽然这个 PHP：

```
<?php while($condition):
    if($anotherCondition): ?>
        Hello world!
    <?php endif;
endwhile; ?> 
```

返回这个：

```
\n
\t\tHello world!\n
\n 
```

不过，这不是您真正要担心的事情，我说要使用可读的代码。但是，我会说您的第一个示例涉及大量额外的输入，您确定它更好吗？

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-25T00:03:47.947

也许由于您缺少缩进​​而无法阅读？我就是这样做的。

```
<?php
  while($condition): //should be a colon not a semicolon
    if($anotherCondition): //should be a colon not a semicolon
?>
      Hello world!
<?php 
    endif;
  endwhile; 
?> 
```

# android - antcall target="release" 与 google-play-services_lib 中断

> ID：14513066
> 
> 赞同：1
> 
> 时间：2013-01-24T23:57:03.257
> 
> 标签：android, ant, google-play-services

我正在尝试从命令行构建我的 android 应用程序，我有一个脚本

`ant release`

失败于

```
BUILD FAILED
android-sdk-macosx/tools/ant/build.xml:473: Invalid file: myProject/google-play-services_lib/build.xml 
```

这对于 android google maps v2 api 是必需的

我试图将我的其他 build.xml 添加到，`google-play-services_lib`但后来它无法识别我的目录，尤其是变量`sdk.dir`

我该如何解决这个问题并将这个库添加到我的 ant 构建中？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-25T16:28:48.013

答案是

```
ant.properties
local.properties
build.xml 
```

所有内容都需要复制到 google-play-services_lib 文件夹中。

需要编辑 ant.properties 以查找`../`密钥库的另一个目录。

如果您有任何自定义规则，则需要编辑复制的 build.xml 以查找这些规则的另一个目录`../`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-05-24T01:07:34.310

做一个`android update project -p myProject/google-play-services_lib`

# c - C内核模块中数组初始化中的省略号

> ID：14513067
> 
> 赞同：21
> 
> 时间：2013-01-24T23:57:14.817
> 
> 标签：c, kernel

我正在检查 github [https://github.com/umlaeute/v4l2loopback/blob/master/v4l2loopback.c](https://github.com/umlaeute/v4l2loopback/blob/master/v4l2loopback.c)上的一些代码，遇到了这条线，这让我感到困惑。这是我不知道的一些非常酷的内核宏或 gcc 功能吗？做什么的`= -1`？

```
static int video_nr[MAX_DEVICES] = { [0 ... (MAX_DEVICES-1)] = -1 };
module_param_array(video_nr, int, NULL, 0444);
MODULE_PARM_DESC(video_nr, "video device numbers (-1=auto, 0=/dev/video0, etc.)"); 
```

有问题的行是第一行，接下来的两行是针对上下文给出的（这是使用内核宏[http://lxr.free-electrons.com/source/include/linux/moduleparam.h#L103](http://lxr.free-electrons.com/source/include/linux/moduleparam.h#L103)创建一个 cmdline-specifiable 参数)

无论如何，数组初始化发生了什么？该语法如何工作？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-01-24T23:59:46.840

You've found an example of [designated initializers](http://gcc.gnu.org/onlinedocs/gcc/Designated-Inits.html). C99 & C11 don't go quite as far as your example, but they have some pretty flexible support for this kind of behaviour. Your specific example (using the `...`) is a GCC extension. From the link:

> To initialize a range of elements to the same value, write `[first ... last] = value`. This is a GNU extension. For example,
> 
> ```
> int widths[] = { [0 ... 9] = 1, [10 ... 99] = 2, [100] = 3 }; 
> ```

So that means your example is creating an array of size `MAX_DEVICES` and initializing every element in that array to `-1`.

For reference, the only standard-supported behaviour is to assign specific indices, rather than ranges:

> [constant-expression] = initializer-value

There is a more complicated example in my copy of the spec:

```
int a[MAX] = {
            1, 3, 5, 7, 9, [MAX-5] = 8, 6, 4, 2, 0
}; 
```

Which initializes the first five and last five elements of the array to explicit values. The middle values (if any) would be `0`.

# c# - WPF中按下了哪个按钮？

> ID：14513068
> 
> 赞同：0
> 
> 时间：2013-01-24T23:57:17.610
> 
> 标签：c#, wpf, image, list, button

我得到了这些代码：

在 cs 中：

一类 get 和`ImgSmall`, `Name`, `ImgLarge`:

```
List<Img> sectionList = new List<Img> 
{ 
  new Img
  {
      ImgSmall="Img/NG.png", Name="New Game", ImgLarge="Img/NG.png"
  },

  new Img
  {
      ImgSmall="Img/HS.png", Name="High Score", ImgLarge="Img/HS.png"
  },
} 
```

在 XAML（适用于的样式模板`Images/Buttons`）中：

```
<Button BorderThickness="0" Click="Button_Click_1" Style="{StaticResource {x:Static ToolBar.ButtonStyleKey}}">
    <Image x:Name="image" Width="64" Height="64" Source="{Binding ImgSmall}" />
</Button> 
```

`Button`当我创建多个时，如何检查按下的是哪个`1 Button`？我的猜测是检查传递对象的名称，但我真的不知道。

点击方式：

```
private void Button_Click_1(object sender, RoutedEventArgs e)
{

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T00:02:29.980

You can use a very useful in this case: the property `Tag`. You set the `Tag` in XAML with a binding, then check its value.

```
private void Button_Click_1(object sender, RoutedEventArgs e)
{
    FrameworkElement frameworkElement = sender as FrameworkElement;
    if(sender != null)
    {
        Img tag = frameworkElement.Tag as Img;

        // You directly have the Img that correspond to the button you have clicked
    }
} 
```

In XAML:

```
<Button BorderThickness="0" Click="Button_Click_1" Tag="{Binding}" Style="{StaticResource {x:Static ToolBar.ButtonStyleKey}}" >
    <Image x:Name="image" Width="64" Height="64" Source="{Binding ImgSmall}"/>
</Button> 
```

# python-3.x - 我想使用 Python 3.2 urllib 从在线词典网页中检索历史单词

> ID：14513070
> 
> 赞同：1
> 
> 时间：2013-01-24T23:57:23.990
> 
> 标签：python-3.x, urllib

我正在使用[tureng](http://tureng.com)在线词典进行土耳其语-英语/英语-土耳其语翻译，这个网页记录了单词搜索历史，我想用这个代码检索这些单词

```
import urllib.request
f = urllib.request.urlopen("http://tureng.com/history/details")
text=f.read().decode('utf-8')
#print(text)

start = text.find("<span class=\"historyTerm\"><a href=\"/search/") 
```

我知道如何解析搜索到的词后缀，但是问题是在使用 urllib 检索页面源时，我看不到搜索到的词。它说“这一天没有历史记录”。那么我该如何解决这个问题呢？

如果你搜索几个词后查看页面源，你可以看到 [tureng 历史词](http://tureng.com/history/details)

在我的浏览器中，我可以看到搜索到的单词：

![图灵浏览器](../Images/d0576cdad728293dbeb6969ed407b6df.png)

在python中：

![图灵蟒](../Images/9c0955a6b2826898f9c1957fdd904954.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T13:36:49.103

当您查找单词和翻译时，我想您正在使用您的网络浏览器。您使用的网站应将查找历史记录存储在 cookie 中或浏览器的缓存中。当您使用 python 脚本调用 URL 时，它与打开一个带有干净会话的新 Web 浏览器相同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-21T19:31:31.597

问题实际上包含了答案。您可以简单地单击“导出到 Excel”按钮，它会将您需要的所有数据作为一个简单的 excel 文件提供:-)

# ruby-on-rails - Rails TDD：在另一个目录中测试

> ID：14513075
> 
> 赞同：0
> 
> 时间：2013-01-24T23:57:59.400
> 
> 标签：ruby-on-rails, directory, tdd

对于更大的 rails 应用程序，我实现了加载插件的能力。当然，我也想测试这些插件。

为了更清晰的目录结构，我创建了 test/plugins/ 并在这个文件中创建了几个测试用例文件。

是否有可能使用 rake test 和 rake test:plugins 运行类似于 test/unit 和 test/functional 的那些测试？

问候，CK

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T00:06:47.793

您可以创建自己的 Rake 任务来测试您选择的任何内容！在以下`.rake`文件中`lib/tasks`：

```
require 'rake/testtask'

namespace :test do
  Rake::TestTask.new :my_custom_tests do |t|
    t.libs << 'test' # if you need to `require 'test_helper'`
    t.pattern = 'test/custom_subdir/**/*_test.rb'
  end
end 
```

然后您可以使用`rake test:my_custom_tests`.

如果您希望在运行现有测试任务（即`rake test`）时也运行这些测试，您可以增强该任务。在 Rails 应用程序中，真正完成繁重工作的任务是`test:run`（`test`它本身首先会做一些其他事情，包括设置您的测试数据库）

```
Rake::Task['test:run'].enhance do
  Rake::Task['test:my_custom_tests'].invoke
end 
```

# forms - 提交后选择数量减少的表格

> ID：14513077
> 
> 赞同：0
> 
> 时间：2013-01-24T23:57:59.737
> 
> 标签：forms, input, field

我正在尝试让我的表单删除一个选项或减少可用选项的数量：

例子。落下。芝士汉堡（10 个） 汉堡（1 个） 巨无霸（3 个）

用户选择 Cheesburgers 并提交。我希望表单在提交后为下一个用户显示。芝士汉堡（9 个） 汉堡（1 个） 巨无霸（3 个）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T00:03:51.090

我会使用一个数据库，其中每个选项都有一个条目，以及一个表示每个选项剩余总数的计数器。然后就可以直接用php输出总数了，提交表单的时候对应的类别减一

# php - 订单查看页面打印 pdf 按钮 magento

> ID：14513085
> 
> 赞同：2
> 
> 时间：2013-01-24T23:59:19.133
> 
> 标签：php, magento, orders

我正在尝试在 magento 管理员的主订单详细信息页面上添加打印订单按钮。客户的旧 magento 有一个订单本身的打印按钮（已付款或未付款，不是发票）。看看它以前的样子：

![订单栏](../Images/66a0f55a46e3d479b3dad845b8672520.png)

我在后端启用了模板提示，并且模板文件不包含该按钮。我已经浏览了几个核心文件...... html 如下所示。我如何将它变成适用于当前查看订单的 php 按钮？

```
<button  id="id_d808fbd2d533d4e7b8e4a3fcd6274251" title="Back" type="button" class="scalable back" onclick="setLocation('http://test.animalnecessity.com/index.php/admin/sales_order/index/order_id/15852/key/28a65aa166da1664c65971decf3e472c/')" style=""> 
```

我可以实现这个吗？ [Magento - 将按钮添加到销售订单视图页面（观察者/事件）](https://stackoverflow.com/questions/10691895/magento-add-button-to-sales-order-view-page-observer-event)，如果是这样，我会将这段代码放在哪里？

我已经按照此处描述的典型模块结构对其进行了设置：http: [//alanstorm.com/magento_config](http://alanstorm.com/magento_config)。我在 etc 文件夹中的 config.xml 有以下内容

```
<config>    
    <modules>
        <CaitlinHavener_printOrder>
            <version>0.1.0</version>
        </CaitlinHavener_printOrder>
    </modules>
    <global>
        <events>
            <core_block_abstract_to_html_before>
                <observers>
                <CaitlinHavener_printOrder>
                    <class>CaitlinHavener_printOrder_Model_Observer</class>
                    <method>orderPageButton</method>
                    <type>model</type>
                </CaitlinHavener_printOrder>
                </observers>
            </core_block_abstract_to_html_before>
        </events>
    </global>
</config> 
```

我的 CaitlinHavener_printOrder.xml 以下

```
<config>    
    <modules>
        <CaitlinHavener_printOrder>
            <active>true</active>
            <codePool>local</codePool>
        </CaitlinHavener_printOrder>
    </modules>
</config> 
```

和 Observer.php

```
<?php
// Order View Page button    
class CaitlinHavener_printOrder_Model_Observer
{
    public function orderPageButton( Varien_Event_Observer $observer )
    {
        if(get_class($block) =='Mage_Adminhtml_Block_Sales_Order_View'
            && $block->getRequest()->getControllerName() == 'sales_order')
        {
            $block->addButton('test_print', array(
                'label'     => 'Test',
                'onclick'   => 'setLocation(\'' . $block->getUrl('html/sales_order/print') . '\')',
                'class'     => 'go'
            ));
        }
    }
}
?> 
```

这仍然行不通。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T00:25:52.060

这些按钮是在 Mage_Adminhtml_Block_Sales_Order_View::__construct 中使用 $this->addButton 函数调用创建的。

至于事件，您可以使用其中之一，但我不记得哪一个（如果有的话）适合调用。

要列出所有触发的事件，您可以使用 Mage::log( $name ); 将日志记录添加到 Mage::dispatchEvent 函数中。

使用该名称，您可以在 config.xml 中声明一个侦听器（在 config/global/events 标记路径下）：

```
 <name_that_was_printed_by_the_above_function>
    <observers>
      <YourModuleNamespace_YourModuleName>
        <class>moduleName/observer</class>
        <method>functionName</method>
        <type>model</type>
      </YourModuleNamespace_YourModuleName>
    </observers>
  </name_that_was_printed_by_the_above_function> 
```

然后创建一个模块类 Observer.php

```
class Namespace_ModuleName_Model_Observer
{
    public function functionName( Varien_Event_Observer $observer )
    {
        $block = $observer->getEvent()->getData( 'data_object' ); // this line may vary

        $block->addButton( ...stuff here... // take for reference the answer from the question you linked to
        return $this;
    }
} 
```

但是就像我说的那样，可能没有一个观察者会满足您的需求，您将不得不找到另一个更具侵入性的解决方案......

**编辑**

您可能必须使用 core_block_abstract_to_html_before 并有一个 if 语句来检查它是否是正确的块......缺点是它为每个块提供了调用开销和 if 语句开销，所以我不确定它是否是最好的解决方案，但它肯定是侵入性最小的，因此我可能会使用它（如果发生此事件，应将“data_object”更改为“block”-事件在 Mage_Core_Block_Abstract::toHtml dispatchEvent 行中触发）。

**编辑**

在您的问题更新后，我测试了您的模块，就像我在评论中警告的那样，问题是您的模块名称 - 小写。

应用程序/etc/modules/CaitlinHavener_PrintOrder.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<config>    
    <modules>
        <CaitlinHavener_PrintOrder>
            <active>true</active>
            <codePool>local</codePool>
        </CaitlinHavener_PrintOrder>
    </modules>
</config> 
```

应用程序/代码/本地/CaitlinHavener/PrintOrder/etc/config.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<config>    
    <modules>
        <CaitlinHavener_PrintOrder>
            <version>0.1.0</version>
        </CaitlinHavener_PrintOrder>
    </modules>
    <global>
        <events>
            <core_block_abstract_to_html_before>
                <observers>
                <CaitlinHavener_PrintOrder>
                    <class>CaitlinHavener_PrintOrder_Model_Observer</class>
                    <method>orderPageButton</method>
                    <type>model</type>
                </CaitlinHavener_PrintOrder>
                </observers>
            </core_block_abstract_to_html_before>
        </events>
    </global>
</config> 
```

本地/CaitlinHavener/PrintOrder/Model/Observer.php

```
<?php
// Order View Page button    
class CaitlinHavener_PrintOrder_Model_Observer
{
    public function orderPageButton( Varien_Event_Observer $observer )
    {
      $block = $observer->getEvent()->getData( 'block' );

        if(get_class($block) =='Mage_Adminhtml_Block_Sales_Order_View'
            && $block->getRequest()->getControllerName() == 'sales_order')
        {
            $block->addButton('test_print', array(
                'label'     => 'Test',
                'onclick'   => 'setLocation(\'' . $block->getUrl('html/sales_order/print') . '\')',
                'class'     => 'go'
            ));
        }
    }
}
?> 
```

请注意正确命名文件（注意大写字符）并复制代码，它应该可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-20T15:00:14.770

@Domen Vrankar 略有改进

`adminhtml_block_html_before`只会在管理区域`core_block_abstract_to_html_before`发送，同时在管理和前端发送

```
 <events>
        <adminhtml_block_html_before>
            <observers>
            <CaitlinHavener_PrintOrder>
                <class>CaitlinHavener_PrintOrder_Model_Observer</class>
                <method>orderPageButton</method>
                <type>model</type>
            </CaitlinHavener_PrintOrder>
            </observers>
        </adminhtml_block_html_before>
    </events> 
```

如果另一个模块重写`Mage_Adminhtml_Block_Sales_Order_View`，则将`get_class($block)`返回新的块类，例如 MagePal_Guest2Customer_Block_Adminhtml_Sales_Order_View 因此您的按钮将不再显示

```
<?php
// Order View Page button    
class CaitlinHavener_PrintOrder_Model_Observer
{
    public function orderPageButton( Varien_Event_Observer $observer )
    {
      $block = $observer->getEvent()->getData( 'block' );

        if($block->getId() == 'sales_order_view' && $block->getRequest()->getControllerName() == 'sales_order')
        { 
          .... 
```

# teamcity - 通过命令行从 FXCop 中排除规则

> ID：14513088
> 
> 赞同：2
> 
> 时间：2013-01-24T23:59:38.807
> 
> 标签：teamcity, fxcop, fxcopcmd

不久前正在使用 MSBuild 任务，并找到了一些关于能够排除特定规则的文档，例如 -Microsoft.Design#CA2210。MSBuild 任务将其转换为 /rule:-Microsoft.Design#CA2210。

我们现在在 TeamCity 中使用 FXCop 构建运行程序，并且将该参数添加到其他命令行参数中失败：

> 无法加载规则文件“-Microsoft.Design#CA2210;-Microsoft.Design#CA1020”：找不到指定的文件。

似乎这个论点是指定规则集，而不是个别规则。这可以做到吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-25T00:54:49.413

fxcopcmd /rid 中有一个未记录的开关：

您可以通过以下方式排除：/rid:-Microsoft.Design#CA2210 /rid: 等

# django - Django Logging: Change sender email address from root@localhost to something else

> ID：14513092
> 
> 赞同：6
> 
> 时间：2013-01-24T23:59:47.493
> 
> 标签：django, logging, django-settings, django-errors

In my settings.py i have the following logging config. If there's an error i get an email from root@localhost. My problem is that i have several projects and want all error messages sent to the same email adress. But now its very annoying to identify on which site the error occured so i want to replace the senders email address from root@localhost to something like error@project-site.tld. Is this possible or have i to create some virtual mailboxes?

```
LOGGING = {
    'version': 1,
    'disable_existing_loggers': False,
    'handlers': {
        'mail_admins': {
            'level': 'DEBUG',
            'class': 'django.utils.log.AdminEmailHandler'
        },
    'logfile': {
        'class': 'logging.handlers.WatchedFileHandler',
        'filename': '/var/log/django/proj_name.log'
        },
    },
'loggers': {
    'django.request': {
        'handlers': ['mail_admins'],
        'level': 'DEBUG',
        'propagate': True,
        },
    'django': {
        'handlers': ['logfile'],
        'level': 'DEBUG',
        'propagate': False,
        },
    }
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-25T00:02:58.470

mail_admins uses [SERVER_EMAIL setting](https://docs.djangoproject.com/en/dev/ref/settings/#server-email)

# ios - 我应该使用哪个框架在 iOS 中以低延迟播放音频文件（WAV、MP3、AIFF）？

> ID：14513095
> 
> 赞同：3
> 
> 时间：2013-01-25T00:00:10.710
> 
> 标签：ios, core-audio, openal

iOS 有各种音频框架，从允许您简单地播放指定文件的高级到允许您获取原始 PCM 数据的较低级别，以及介于两者之间的所有内容。对于我们的应用程序，我们只需要播放外部文件（WAV、AIFF、MP3），但我们需要这样做以响应按下按钮，并且我们需要尽可能小的延迟。（这是为了在现场制作中排队。）

现在 AVAudioPlayer 和此类工作可以播放简单的文件资产（通过它们的 URL），但它在实际启动声音时的延迟太长了。对于长度超过五分钟的较大文件，启动声音的延迟可能超过一秒，这使得它对于现场表演的计时毫无用处。

现在我知道诸如 openAL 之类的东西可以用于非常低延迟的播放，但是你已经深入到音频缓冲区、音频源、听众等。

也就是说，有没有人知道任何可以在更高级别（即播放“MyBeddingTrack.mp3”）以非常低的延迟工作的框架？预缓冲很好。只是触发器必须快。

如果我们可以做一些事情，比如在文件中设置播放的开始和结束点，或者改变音量，甚至执行闪避等，那么我们会得到奖励。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-03T21:08:31.817

尽管 Audio Queue 框架相对易于使用.. 它在幕后打包了许多 DSP 繁重的工作（即，如果您为其提供 VBR/压缩音频.. 它会在扬声器上播放之前自动将其转换为 PCM..还为最终用户不透明地处理了很多线程问题）.. 这是一个做轻量级非实时应用程序的人的好消息。

你提到你需要它在现场制作中排队。我不确定这是否意味着您的应用程序是实时的.. 因为如果是.. 那么音频队列将难以满足您的需求。一篇关于这方面的好文章是[Ross Bencina 的](http://www.rossbencina.com/code/real-time-audio-programming-101-time-waits-for-nothing)。要点是，您不能让第三方框架或库在幕后做任何可能代价高昂的事情，例如线程锁定或分配或解除分配等。这对于开发实时音频应用程序来说太昂贵且太冒险了.

这就是音频单元框架的用武之地。音频队列实际上是建立在音频单元框架之上的（它自动化了很多工作）。但音频单元让您与 iOS 一样接近金属。它可以随心所欲地响应，并且可以轻松地制作实时应用程序。音频单元有一个巨大的学习曲线。不过，有一些开源包装器可以简化它（参见[novocaine](https://github.com/alexbw/novocaine#readme)）。

如果我是你.. 我至少会略读[Learning Core Audio](https://rads.stackoverflow.com/amzn/click/com/0321636848) .. 这是任何 iOS 核心音频开发人员的首选书.. 它详细讨论了音频队列、音频单元等，并有出色的代码[示例](http://www.informit.com/store/learning-core-audio-a-hands-on-guide-to-audio-programming-9780321636843)..

根据我自己的经验..我开发了一个实时音频应用程序，它有一些密集的音频要求..我找到了音频队列框架，并认为它好得令人难以置信..我的应用程序在我对它进行了轻微限制的原型制作时工作正常..但它只是在压力测试时窒息..那时我不得不深入研究音频单元并更改架构等（它并不漂亮）。我的建议：至少使用音频队列作为音频单元的介绍。如果它满足您的需求，请坚持使用它，但如果很明显音频队列不再满足您的应用程序的需求，请不要害怕使用音频单元.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T03:24:24.167

您可以获得的最低延迟是使用 Audio Units、RemoteIO。

远程 I/O 单元

远程 I/O 单元（子类型 kAudioUnitSubType_RemoteIO）连接到设备硬件以进行输入、输出或同时输入和输出。将其用于不需要回声消除的回放、录制或低延迟同时输入和输出。

看看这个教程：

[http://atastypixel.com/blog/using-remoteio-audio-unit/](http://atastypixel.com/blog/using-remoteio-audio-unit/)

[http://atastypixel.com/blog/playing-audio-in-time-using-remote-io/](http://atastypixel.com/blog/playing-audio-in-time-using-remote-io/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-25T00:03:28.557

你需要系统健全的框架。系统声音框架是为使用界面声音或快速响应声音等而设计的。看看[这里](http://developer.apple.com/library/ios/ipad/#documentation/AudioToolbox/Reference/SystemSoundServicesReference/Reference/reference.html)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-25T00:08:45.730

`AVAudioPlayer`有一种`prepareToPlay`预加载其音频缓冲区的方法。这可能会显着加快响应时间。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-25T01:13:06.577

我遇到了和你一样的问题，但经过一段时间的研究，我发现了一个很棒的框架。我目前正在使用 kstenerud 的 ObjectAL 声音框架。它基于 OpenAL 并具有良好的文档。您可以播放多层背景音乐和音效。

这是 github 上的项目 [https://github.com/kstenerud/ObjectAL-for-iPhone](https://github.com/kstenerud/ObjectAL-for-iPhone) 这是网站[http://kstenerud.github.com/ObjectAL-for-iPhone/index.html](http://kstenerud.github.com/ObjectAL-for-iPhone/index.html)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-25T05:03:53.257

我会使用音频队列框架。[https://developer.apple.com/library/mac/ipad/#documentation/MusicAudio/Conceptual/AudioQueueProgrammingGuide/Introduction/Introduction.html](https://developer.apple.com/library/mac/ipad/#documentation/MusicAudio/Conceptual/AudioQueueProgrammingGuide/Introduction/Introduction.html)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-07-05T13:06:26.733

以下[SO 问题](https://stackoverflow.com/questions/10300965/how-do-i-connect-an-audiofileplayer-audiounit-to-a-3dmixer)包含使用音频单元播放文件的工作代码，特别是 AudioFilePlayer。尽管问题表明它不起作用，但它对我来说是开箱即用的——只`AUGraphStart(_graph)`在最后添加一个。

AudioFilePlayer 的“ScheduledFilePrime”属性说明在开始播放之前要加载多少文件。你可能想玩弄它。

但正如其他人所指出的，音频单元的学习曲线陡峭。

# backbone.js - success callback triggered, but document not saved

> ID：14513096
> 
> 赞同：0
> 
> 时间：2013-01-25T00:00:11.443
> 
> 标签：backbone.js

I'm playing around with this 'CloudEdit' Backbone tutorial [http://www.jamesyu.org/2011/01/27/cloudedit-a-backbone-js-tutorial-by-example/](http://www.jamesyu.org/2011/01/27/cloudedit-a-backbone-js-tutorial-by-example/), which allows you to create a "document" with "title" and "body" properties. It uses a Rails backend saving the data to the 'documents' url, and creates/edits thoughs documents through an EditView. To make a long story short, even though the success callback in the EditView on the this.model.save()is triggered on every save, and even though the console.log() messages in the view show that the 'title' and 'body' property are set with the values entered on the form, when I check the database, most of the records have 'null' for title and body, while only a few actually have the values that were entered. This pattern continues as I try to add more records, without about 4/5 showing null in the database. Based on the code below, can you see a reason why that might be, and how I might fix it?

Note, the database shows the title and body properties are null for most of the records i.e. this is not an issue of backbone not retrieving the data properly. It's not being saved properly. **Model**

```
window.Document = Backbone.Model.extend({
    url : function() {
      var base = 'documents';
      if (this.isNew()) return base;
      return base + (base.charAt(base.length - 1) == '/' ? '' : '/') + this.id;
    }
}); 
```

**View** var EditView = Backbone.View.extend({ events: { "submit form": "save" },

```
 initialize: function() {
        this.render();
    },

    save: function() {
        var self = this;
        var msg = this.model.isNew() ? 'Successfully created!' : "Saved!";
        var tit  = this.$('[name=title]').val(); 
        console.log(tit);
        var bod = this.$('[name=body]').val();
        console.log(bod);

        this.model.save({ title: this.$('[name=title]').val(), body: this.$('[name=body]').val() }, {
            success: function(model, resp) {
                // new App.Views.Notice({ message: msg });
                console.log("save");
                self.model = model;
                self.delegateEvents();

            },
            error: function(r) {
                console.log(r);
            }
        });

        return false;
    },

    render: function() {
        ...template rendering code...
    }
}); 
```

Update responding to comments of

This is the create action of the documents_controller.rb

```
respond_to :json

     ...code ommitted...

    def create
        puts params
        respond_with Document.create(:document => params[:document])
    end 
```

However, this is what the puts params reveals, there's a warning about mass assigning protected attributes. However, 'document' isn't even an attribute of the model.

```
Processing by DocumentsController#create as JSON
  Parameters: {"title"=>"hop", "body"=>"hot", "document"=>{"title"=>"hop", "body"=>"hot"}}
WARNING: Can't mass-assign protected attributes: document
   (0.1ms)  begin transaction
  SQL (80.4ms)  INSERT INTO "documents" ("body", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["body", nil], ["created_at", Fri, 25 Jan 2013 23:20:51 UTC +00:00], ["title", nil], ["updated_at", Fri, 25 Jan 2013 23:20:51 UTC +00:00]]
   (7.3ms)  commit transaction
Completed 201 Created in 127ms (Views: 31.9ms | ActiveRecord: 0.0ms) 
```

rewrote the create action like this based on the following form inputs

```
 def create

      respond_with Document.create(:title => params[:title], :body => params[:body])

    end

#form input names
<input name='title' type='text'/> 
<textarea name='body'> 
```

# ruby-on-rails - Rails：获取内部关注的外部类名

> ID：14513097
> 
> 赞同：23
> 
> 时间：2013-01-25T00:00:11.627
> 
> 标签：ruby-on-rails

如何获取我关注的模型的类名？

我正在为[https://stackoverflow.com/a/14483808/1715035](https://stackoverflow.com/a/14483808/1715035)中所述的范围创建一个关注点，但需要模型名称来进行多态搜索。

`self.table_name`工作正常，`self.table_name.singularize.titleize.gsub(/\s+/, "")`但也许有一种更简单的方法来获取类名。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-01-25T00:10:17.630

您可以`name`像在类本身中一样使用该方法。

```
module M
  extend ActiveSupport::Concern

  included do
    scope :my_fancy_scope, where(some_type: name)
  end
end 
```

# ruby-on-rails - bundler --deployment 如何处理原生扩展？

> ID：14513099
> 
> 赞同：0
> 
> 时间：2013-01-25T00:00:18.037
> 
> 标签：ruby-on-rails, ruby, deployment, bundler

我了解 的优点`bundler install --deployment`，宝石是从我的副本中获取的，而不是实时安装的。

但是需要按操作系统编译的本机扩展呢？`install --deployment`如果我在一个操作系统上开发并在另一个操作系统上部署，我该如何使用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T04:22:22.920

在生产服务器上运行时，它将构建本机扩展。只要依赖项可用（外部库或构建 gem 所需的任何内容），它就会按预期工作。

请注意，gem**已**安装；它们只是`vendor/bundle`默认安装在 中`--deployment`，而不是在系统范围内安装。所有正常的事情`gem install`都会发生，但默认安装路径在`vendor/bundle`. `--path`如果你真的需要，你也可以用 覆盖它。如果您希望它们在系统范围内安装，您可以`bundle install --local`读取它们并在`vendor/cache`系统范围内安装它们。

# c# - AForge VideoCapabilities error

> ID：14513100
> 
> 赞同：1
> 
> 时间：2013-01-25T00:00:21.863
> 
> 标签：c#, aforge

As I'm looking in the souce code of the AForge library, I was wondering what was wrong with this line:

```
ulong key = ((capabilities.FrameSize.Height << 0x20) | (capabilities.FrameSize.Width << 0x10)) | ((ulong)capabilities.FrameRate); 
```

Operator '|' cannot be applied to operands of type 'int' and 'ulong' this is the error given, the thing is I don't know how to fix this line.

kind regards

# android - android 10" xhdpi 平板电脑启动器图标大小

> ID：14513102
> 
> 赞同：0
> 
> 时间：2013-01-25T00:00:33.407
> 
> 标签：android, android-launcher, android-icons

我有一个创建快捷方式的应用程序。它动态生成快捷方式图标，所以我需要知道正确的启动器图标大小。

为了解决这个问题，我创建并将我`dimens.xml`的`values-ldpi/mdpi/hdpi/xhdpi/xxhdpi`图标大小分别定义为 36/48/72/96/144px。

此方案有效，但在 10 英寸 xhdpi 平板电脑（如 nexus 10）上除外。尽管有 xhdpi 屏幕，但这些平板电脑似乎使用大小为 144px (xxhdpi) 的启动器图标。

有没有一种方法可以正确检测考虑到 10 英寸 xhdpi 平板电脑的启动器图标大小？或者是否有更好的方案来正确调整我的图标大小？或者有没有办法将这种情况与简单的 xhdpi 情况区分开来？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T02:12:07.543

要获取启动器图标大小，只需`ActivityManager.getLauncherLargeIconSize()`按照上面 CommonsWare 的建议进行调用。一个小问题是这仅在 API 11+ 上可用。在这种情况下，回退到使用`DisplayMetrics`. 如果有一个运行 android 2 的 10" XHDPI 设备，这当然会失败，这是极不可能的（因为 X*HDPI 在 Android 2 时不存在）。这是我写的实用方法，

```
@SuppressLint("NewApi")
private int getLauncherIconSize() {
    int size = 48;

    if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB) {
        ActivityManager mgr = (ActivityManager) activity.getSystemService(Context.ACTIVITY_SERVICE);
        size = mgr.getLauncherLargeIconSize();
    } else {
        DisplayMetrics metrics = new DisplayMetrics();
        activity.getWindowManager().getDefaultDisplay().getMetrics(metrics);
        switch (metrics.densityDpi) {
        case DisplayMetrics.DENSITY_LOW:
            size = 36;
            break;
        case DisplayMetrics.DENSITY_MEDIUM:
            size = 48;
            break;
        case DisplayMetrics.DENSITY_HIGH:
            size = 72;
            break;
        case DisplayMetrics.DENSITY_XHIGH:
            size = 96;
            break;
        case DisplayMetrics.DENSITY_XXHIGH:
            size = 144;
            break;
        }
    }

    return size;
} 
```

# c# - Binding ObjectDataSource to service or repository?

> ID：14513103
> 
> 赞同：0
> 
> 时间：2013-01-25T00:00:35.217
> 
> 标签：c#, asp.net, repository, service-layer

Roughly following some designs I've seen, I'm building an ASP.NET application where each of my business objects has an associated Repository and Service. The repositories use nHibernate's ISession to perform CRUD operations, and the corresponding service accesses the repository members.

When using an ObjectDataSource in ASP.NET, is it considered bad practice to bind it directly to a repository instead of to a service (thus entirely skipping the service layer)? Or is the service layer not really necessary when just performing simple CRUD operations?

```
// Repository interface
public partial interface IRepository<T>
{
    void Add(T entity);
    void Update(T entity);
    void Remove(T entity);
    ICollection<T> GetAll();
    T GetByKey(int _ID);
}

// Service example
public class TestService : IService<Test>
{
    private static TestRepository _repository;
    ...

    public virtual ICollection<Test> FindAll()
    {
        return (_repository.GetAll());
    }

    public virtual Test FindBy(int Id)
    {
        return (_repository.GetByKey(Id));
    }

    public virtual void Save(Test entity)
    {
        _repository.Update(entity);
    }

    public virtual void Add(Test entity)
    {
        _repository.Add(entity);
    }

    public virtual void Remove(Test entity)
    {
        _repository.Remove(entity);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T00:03:50.327

绝对你的 UI 不应该知道数据访问。即使您没有处理来自数据库的数据，最好至少再多一层（服务或业务层）并让您的 UI 与服务交互。如果我是你，我会为 Asp.net 做一个穷人 MVC，这样我就可以进行单元测试

# glut - How to trigger event when mouse is clicked AND a key is held down?

> ID：14513104
> 
> 赞同：0
> 
> 时间：2013-01-25T00:00:50.533
> 
> 标签：glut, keyboard-events

Is there any way to detect if a key is being held down while inside of the glutMouseFunc?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T00:16:33.013

是的。存储当前按下的键的全局可访问列表。然后在 MouseFunc 中阅读该列表。

注意鼠标回调已经获得了控制键状态（shift/alt/ctrl），所以一般不需要这样做。

# sql - SQL select query merged with a computation statement

> ID：14513105
> 
> 赞同：0
> 
> 时间：2013-01-25T00:01:00.553
> 
> 标签：sql, vendor

My vendor sent over a piece of SQL code that I'm having a hell of a time getting to function with my existing query.

I have a webpage that is querying a database table for multiple values here's the code I have in the ASP page that queries SQL:

```
SELECT [Account],
[AccountName],
[ComputerName],
[EMail],
[Telephone],
[Status],
cast(cast([StartDate] as float) as datetime) as 'Start-Date',
cast(cast([LastBackupDate] as float) as datetime) as 'LastBackup-Date',
[TotalFileSize],
[TotalFileCount] 
FROM ExpandedView WHERE loginid = @0 
```

This query works great, but the "Account" field specified above apparently returns only part of the actual account number. Apparently my vendor uses a computation to create the final account number and they've sent it to me:

```
use <databasenamehere>
select left(
convert(nvarchar,E.Account)
,5)+'-'+convert(nvarchar,
( 50 +((E.Account)%10)
-((E.Account/10)%10)
+((E.Account/100)%10)
-((E.Account/1000)%10)
+((E.Account/10000)%10)
-((E.Account/100000)%10)
+((E.Account/1000000)%10)
-((E.Account/10000000)%10)
+((E.Account/100000000)%10))
%10 )
+right(convert(nvarchar,E.Account),4) 
as 'Account', AccountName from ExpandView E
Inner Join Customer C
on E.Account=C.Account 
```

Now I realize that that this query is selecting the first 5 numbers of the account number, appending the hyphen and then performing a mathematical procedure to the last 4 numbers, however I cannot figure out how to read this. Could I simply append these two statements together with an "AND" clause?

I really would like to understand what the "E.Account" refers to and why they use a "ExpandView E" and "Customer C" in the query. I'm also kind of lost how those relate to the actual tables.

Any assistance would be appreciated. Or if you prefer, post a link and I'll read up as best I can.

Thanks!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T00:07:35.797

这应该有效：

```
SELECT left(
convert(nvarchar,E.Account)
,5)+'-'+convert(nvarchar,
( 50 +((E.Account)%10)
-((E.Account/10)%10)
+((E.Account/100)%10)
-((E.Account/1000)%10)
+((E.Account/10000)%10)
-((E.Account/100000)%10)
+((E.Account/1000000)%10)
-((E.Account/10000000)%10)
+((E.Account/100000000)%10))
%10 )
+right(convert(nvarchar,E.Account),4) 
as 'Account',
[AccountName],
[ComputerName],
[EMail],
[Telephone],
[Status],
cast(cast([StartDate] as float) as datetime) as 'Start-Date',
cast(cast([LastBackupDate] as float) as datetime) as 'LastBackup-Date',
[TotalFileSize],
[TotalFileCount] 
FROM ExpandedView E WHERE loginid = @0 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T02:10:22.400

这是我发现似乎有效的查询：

```
select left
(convert(nvarchar,E.Account)
,5)+'-'+ convert(nvarchar,
( 50 +((E.Account)%10)
-((E.Account/10)%10)
+((E.Account/100)%10)
-((E.Account/1000)%10)
+((E.Account/10000)%10)
-((E.Account/100000)%10)
+((E.Account/1000000)%10)
-((E.Account/10000000)%10)
+((E.Account/100000000)%10))%10 )
+right(convert(nvarchar,E.Account),4)
as 'Account',
 E.AccountName,
 E.ComputerName,
 E.regloginid,
 E.EMail,
 E.Telephone,
 E.Community,
 E.Status,
 CAST(cast(e.startdate as float) as datetime) as 'Start-Date', 
 CAST(cast(e.lastbackupdate as float) as datetime) as 'LastBackup-Date',
 E.TotalFileSize,
 E.TotalFileCount
 from ExpandedCustomerView E Where E.Status = 'A' and E.regloginid = @0 
```

似乎他们使用的查询重命名了数据库表，以 E.xxxxx 开头我不确定这是如何工作的。我对 MSSQL 不是很熟悉，无法理解他们为什么在选择中调用参数的重命名。但是，此查询可以正常工作并提供我需要的数据。

也许如果有人可以回答为什么他们会在“FROM EXPANDEDVIEW E”部分使用参数？这似乎是重命名列的地方。

无论如何，我很想知道，但这绝对对我有用，所以我要关闭它。谢谢大家的回答/评论和帮助。

# php - Preg_replace 括号之间的空格

> ID：14513119
> 
> 赞同：3
> 
> 时间：2013-01-25T00:03:03.277
> 
> 标签：php, regex, preg-replace

我正试图了解正则表达式，但我失败了。

我有一个字符串，我想匹配并删除两个括号之间的每个空格。

例如：

```
This string (is an example). 
```

会成为：

```
This string (isanexample). 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T00:55:41.110

您可以使用[preg_replace_callback](http://php.net/preg_replace_callback)；

```
$str = "This string (is an example).";
$str = preg_replace_callback("~\(([^\)]*)\)~", function($s) {
    return str_replace(" ", "", "($s[1])");
}, $str);
echo $str; // This string (isanexample). 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T00:12:20.130

您需要递归地执行此操作。一个正则表达式不会这样做。

```
$line = preg_replace_callback(
        '/\(.*\)/',
        create_function(
            "\$matches",
            "return preg_replace('/\s+/g','',\$matches);"
        ),
        $line
    ); 
```

这样做是第一个模式找到括号内的所有文本。它将这个匹配传递给命名方法（或者在这种情况下是匿名方法）。该方法的返回用于替换匹配的内容。

# c# - restarting my computer through a win forms application

> ID：14513120
> 
> 赞同：-1
> 
> 时间：2013-01-25T00:03:18.563
> 
> 标签：c#, winforms, winapi

> **Possible Duplicate:**
> [How to shutdown the computer from C#](https://stackoverflow.com/questions/102567/how-to-shutdown-the-computer-from-c-sharp)

I want to bring up a restart computer message box after an event occurs in my Win Form application. What command can I use to restart the computer if the user chooses Yes?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T00:04:54.223

您可以[p/invoke`ExitWindowsEx`](http://pinvoke.net/default.aspx/user32/ExitWindowsEx.html)。

如前所述，您还需要调用`AdjustTokenPrivileges`，因为`SE_SHUTDOWN_NAME`默认情况下是不活动的。

[MSDN 上](http://msdn.microsoft.com/en-us/library/windows/desktop/aa376883.aspx)的一大堆信息在这里

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T00:13:06.220

你应该使用 WINAPI 。以下功能可以为您完成电源任务：

```
BOOL WINAPI ExitWindowsEx(
  _In_  UINT uFlags,
  _In_  DWORD dwReason
); 
```

请注意，此函数位于 user32.dll 中。只需重新启动：

```
ExitWindowsEx(2,4); 
```

这是标志的完整列表：[链接到 msdn](http://msdn.microsoft.com/en-us/library/aa376868%28VS.85%29.aspx)

现在这里是示例 C# 代码：

```
using System.Runtime.InteropServices;

[DllImport("user32.dll", SetLastError=true)]

public static extern bool  ExitWindowsEx(uint uFlags,uint dWReason);

public static void Main()
{
  ExitWindowsEx(2,4);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T00:07:11.490

```
Process.Start("shutdown","/r /t 0"); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-25T01:22:00.433

这个特殊的解决方案对我有用：[https ://stackoverflow.com/a/102583/1505128](https://stackoverflow.com/a/102583/1505128)

```
using System.Management;

void Shutdown()
{
    ManagementBaseObject mboShutdown = null;
    ManagementClass mcWin32 = new ManagementClass("Win32_OperatingSystem");
    mcWin32.Get();

    // You can't shutdown without security privileges
    mcWin32.Scope.Options.EnablePrivileges = true;
    ManagementBaseObject mboShutdownParams =
             mcWin32.GetMethodParameters("Win32Shutdown");

    // Flag 1 means we want to shut down the system. Use "2" to reboot.
    mboShutdownParams["Flags"] = "1";
    mboShutdownParams["Reserved"] = "0";
    foreach (ManagementObject manObj in mcWin32.GetInstances())
    {
        mboShutdown = manObj.InvokeMethod("Win32Shutdown", 
                                       mboShutdownParams, null);
    }
} 
```

# wordpress - 如何在复选框选项中列出 WordPress 页面

> ID：14513121
> 
> 赞同：0
> 
> 时间：2013-01-25T00:03:18.737
> 
> 标签：wordpress

您能否让我知道如何根据以下代码加载复选框：

```
<?php wp_list_pages('title_li='); ?> 
```

我知道这段代码将列出加载 wordpress 中的所有页面，但我希望它们采用复选框格式，让用户为新产品选择父级。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T06:39:44.270

此函数用于创建页面*列表*作为链接：[Function_Reference/wp_list_pages](http://codex.wordpress.org/Function_Reference/wp_list_pages)。

所以，你需要另一个：[`get_pages`](http://codex.wordpress.org/Function_Reference/get_pages).

```
$mypages = get_pages( array( 
    'sort_column' => 'post_date', 
    'sort_order' => 'desc' 
) );

foreach( $mypages as $page ) 
{       
    $title = $page->post_title;
    $slug = $page->post_name;
    echo "<label>
          <input type='radio' name='the_pages' id='$slug' value='$title'>
          $title
          </label>";
} 
```

# iphone - iOS AVAudioPlayer OSStatus error -43

> ID：14513122
> 
> 赞同：0
> 
> 时间：2013-01-25T00:03:24.303
> 
> 标签：iphone, ios, ipad, avaudioplayer

In my app, one can record and save songs. Upon updating my app, I get an error trying to initialize an AVAudioPlayer. The song is saved in the documents directory, and I simply create a URL to the documents directory with that song and get the error above. When reading other answers to similar questions, it says that -43 is a file not found error, so I outputted everything in my documents directory, and I can clearly see that the file I'm trying to access is in the documents directory. It cannot be an error in the path to the documents directory as I simply use

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0]; 
```

to get the documents directory.

How I initialize the audioplayer, the error and URL I'm trying to access:

```
[[AVAudioPlayer alloc]initWithContentsOfURL:urlOfSong error:&error]; 
if (error)
        {
            NSLog(@"Error in audioPlayer: %@", 
                  [error localizedDescription]);
            NSLog(@"error with this: %@",urlOfSong);
        }

2013-01-24 18:51:40.223 app[14104:907] Error in audioPlayer: The operation couldn’t be completed. (OSStatus error -43.)
2013-01-24 18:51:40.224 app[14104:907] error with this: file://localhost/var/mobile/Applications/C8F1FB54-CF7E-46EC-9B87-8BE3CE9B0A3D/Documents/k%20-%20Spongebob.m4a 
```

Which can be seen that the file I'm trying to play is called k - Spongebob.m4a

Here is the output of my documents directory:

```
2013-01-24 18:51:40.228 app[14104:907] (
    "Recording 11413, 10:28 PM - All I Need.m4a",
    "k - Spongebob.m4a" 
) 
```

Keep in mind that I mentioned that this was only AFTER I updated my app. When testing before sending out the update, everything worked perfectly. And if I record a new song and save it and then try to play it using the exact same methods, it works just fine. This is happening when I'm trying to play a song that I recorded before the update.

Any help guys???

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T00:56:28.007

我想到了。显然，当您更新应用程序时，路径中文档前面的字母和数字（即 0B6DDD37-792B-4C1A-98A3-1A96B64B4DB0）会发生变化。我用旧字母和数字保存旧路径并尝试使用该路径进行初始化，这就是错误发生的原因。我只需要使用文档目录的当前路径进行初始化。这解释了为什么在发送更新之前进行测试时没有发生此错误。

# java - 如何使用Apache POI实现excel的数组公式功能

> ID：14513123
> 
> 赞同：3
> 
> 时间：2013-01-25T00:03:28.030
> 
> 标签：java, apache-poi

我在 excel 表中有一个公式，格式如下

```
{=SUM(IF(C3:C65536=F11,B3:B65536))} 
```

它是一个公式数组。如何使用 Apache POI API 在 Java 中实现这一点？

# 我在java中做了这个

```
cell.setCellType(XSSFCell.CELL_TYPE_FORMULA);
cell.setCellFormula("SUM(IF(C3:C65536=F"+totalCtr+",B3:B65536))"); 
```

其中 totalCtr 是一个从 0...n 迭代的 int 变量，
并且是公式中“F”的一部分。所以我可以从一个牢房到另一个牢房。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-06-30T10:01:21.530

较新版本的 POI 支持数组公式

见[https://poi.apache.org/spreadsheet/formula.html](https://poi.apache.org/spreadsheet/formula.html)

```
 Array Formulas: via Sheet.setArrayFormula() and Sheet.removeArrayFormula() 
```

# java - Java 中的 Hello World 无法编译

> ID：14513125
> 
> 赞同：0
> 
> 时间：2013-01-25T00:03:35.367
> 
> 标签：java, eclipse, virtual-machine

在eclipse中，我突然收到以下错误： `<terminated> Adding more memory. [Java Application] /System/Library/Java/JavaVirtualMachines/1.6.0.jdk/Contents/Home/bin/java`

使用堆栈跟踪：

```
Exception in thread "main" java.lang.NoClassDefFoundError: 
Caused by: java.lang.ClassNotFoundException: 
    at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:247) 
```

我试过用谷歌搜索它，但我不知道为什么会这样......我试过关闭并重新打开 Eclipse，然后重新启动。当这种情况开始发生时，我正在愉快地编写一个 Android 项目（几分钟前正在编译）。

仅供参考，我要编译的代码是：

```
public class HelloWorld {

    public static void main(String[] args){
        System.out.println("Hello World");
    }
} 
```

它可以工作，但是在终端中（在愚蠢的深夜更正之后）

```
Jono@Lappy:/Users/Jono/Workspace/HelloWorld/src$ ls
HelloWorld.java

Jono@Lappy:/Users/Jono/Workspace/HelloWorld/src$ javac HelloWorld.java 

Jono@Lappy:/Users/Jono/Workspace/HelloWorld/src$ ls
HelloWorld.class    HelloWorld.java

Jono@Lappy:/Users/Jono/Workspace/HelloWorld/src$ java HelloWorld
Hello World 
```

我正在运行带有 OSX 10.7.5 的 Macbook Pro，完全是最新的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T00:15:09.107

省略 .class

```
java HelloWorld 
```

# google-maps - 如何在谷歌地图中获得两点之间的最短路径

> ID：14513138
> 
> 赞同：6
> 
> 时间：2013-01-25T00:04:56.827
> 
> 标签：google-maps, google-maps-api-3, shortest-path

我不知道这是谷歌的专有东西还是它的开源。我需要知道谷歌显示不同路线的方式，以及基于**可用道路**的最短路线。因为我创建了一个谷歌地图应用程序，用户可以在其中放置一个标记，因此可以通过可用的道路（不仅仅是这条 Q 显示的线（[谷歌地图 API：如何绘制最短两个地理点之间的平面路径？](https://stackoverflow.com/questions/10959473/google-map-api-how-to-draw-shortest-plane-path-between-two-geo-points)）

我知道这与 Dijkstra 的最短路径算法有关。但我想知道是否有一些我可以开箱即用的库。

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T16:02:48.173

听起来您只想找到从一个点到另一个点的路线？

这是在谷歌地图 API 中提供的。

[文档](https://developers.google.com/maps/documentation/javascript/reference#DirectionsService)

# android - android web服务axis2存根

> ID：14513146
> 
> 赞同：0
> 
> 时间：2013-01-25T00:05:52.520
> 
> 标签：android, web-services, axis2, stub

我正在尝试了解 Web 服务，并且我已经做了一个简单的 Web 服务（sayhello）并制作了一个显示控制台消息的客户端。为此...我制作了一个生成存根的 Web 服务客户端。

现在我需要从一个 android 应用程序中使用这个服务。没有读取任何内容，我剪切了这两个文件（存根）并粘贴到我的 android proyect 中......这告诉我，解析器 org.apache.axis2 是不可能的。

可能它不是那样工作的，但我不知道是否有可能以这种方式做，或者其他或其他方法是什么。

有人知道并可以帮助我吗？

非常感谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T03:01:46.750

这是一个关于如何根据您想要实现的目标来帮助您启动和运行的教程：

*   [如何将 Android 与 PHP、MySQL 连接起来](http://www.androidhive.info/2012/05/how-to-connect-android-with-php-mysql/)——这篇文章进一步向您展示了如何连接到生产数据库和使用 Web 服务。

您实际上可以从中获得一些见解。希望能帮助到你。

# c# - 编辑 XML 属性会导致创建一个新节点

> ID：14513150
> 
> 赞同：0
> 
> 时间：2013-01-25T00:06:29.257
> 
> 标签：c#, xml, linq-to-xml, xmldocument

当我尝试更新我的 XML 文档中的值时，它不会编辑现有值，而是不断插入一个带有我的新值的新节点。

如果尝试了这两种方法并获得相同的结果...

```
var doc = XDocument.Parse(xmlString);

XElement shippingElement = (from xml2 in doc
  .Elements("extradata").Elements("SharedCustomAppData")
  .Elements("clsNameValues").Elements("clsnamevalue")
where xml2.Element("name").Attribute("Value").Value == "SHOP_FLOOR_INSTR"
select xml2).FirstOrDefault();

shippingElement.Element("value").Attribute("Value").Value = "Changed!"; 
```

和

```
XmlDocument xmlDoc = new XmlDocument();
xmlDoc.LoadXml(oLine.ExtraData);
XmlNodeList nodes = xmlDoc.SelectNodes(
   "extradata/SharedCustomAppData/clsNameValues/clsnamevalue");

foreach (XmlNode node in nodes)
{
XmlNode nameNode = node.SelectSingleNode("name");

if (nameNode != null && nameNode.Attributes["Value"].Value == "SHOP_FLOOR_INSTR")
{
    XmlNode valueNode = node.SelectSingleNode("value");

    if (valueNode != null)
    {
        valueNode.Attributes["Value"].Value = line.SHOP_FLOOR_INSTR;
    }
}
} 
```

我尝试更新的 XML 部分如下所示：

```
 <SharedCustomAppData>
   <clsNameValues>
     <clsnamevalue>
       <name Value="SHOP_FLOOR_INSTR" />
       <value Value="Current value" />
     </clsnamevalue>
   </clsNameValues>
 </SharedCustomAppData> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T00:39:07.010

您可以对 Linq to Xml使用*System.Xml.XPath扩展（我相信代码会看起来更短）：*

```
var expression = "//extradata/SharedCustomAppData/clsNameValues/clsnamevalue[name/@Value='SHOP_FLOOR_INSTR']/value";
XElement valueElement = xdoc.XPathSelectElement(expression);
if (valueElement != null)
    valueElement.SetAttributeValue("Value", "Changed!"); 
```

还要小心命名空间（如果在父节点上声明了一些命名空间，则从您的示例 xml 中不清楚）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T00:14:31.007

赋值语句中的元素名称不应该是“名称”而不是“值”吗？

尝试这个：

```
var doc = XDocument.Parse(xmlString);

XElement shippingElement = (from xml2 in doc
   .Elements("extradata").Elements("SharedCustomAppData")
   .Elements("clsNameValues").Elements("clsnamevalue")
where xml2.Element("name").Attribute("Value").Value == "SHOP_FLOOR_INSTR"
select xml2).FirstOrDefault();

shippingElement.Element("name").Attribute("Value").Value = "Changed!"; 
```

# ocaml - ocaml 错误：此表达式的类型为 expr，但此处与类型 unit -> expr 一起使用

> ID：14513152
> 
> 赞同：0
> 
> 时间：2013-01-25T00:06:42.253
> 
> 标签：ocaml, ocamlbuild

我不知道这个错误是什么意思，我从来没有见过它抱怨的行之前是否包含 x -> let 我在此之前使用 match with 但它仍然给我同样的错误。

```
let rec build (rand,depth) = match depth with
 | 0 -> if rand(0,2) == 0 then buildX else buildY
 | x -> let r =  rand(0, 5) in
     if r == 0 then buildSine (build (rand, x -1))
     else if r == 1 then buildCosine (build (rand, x -1))
     else if r == 2 then buildAverage (build (rand,x -1), build (rand,x-1))
     else if r == 3 then buildTimes (build (rand, x -1), build (rand, x-1))
     else buildThresh (build(rand, x-1), build(rand, x-1),               
                   build(rand, x-1), build(rand, x-1));; 
```

我的每个构建都返回一个 expr，这应该构建一个大 expr 任何帮助将不胜感激。提前致谢！:D

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T00:13:08.523

也许`buildX`并且`buildY`应该争论？

```
# let f () = 14;;
val f : unit -> int = <fun>
# f ;;
- : unit -> int = <fun>
# f ();;
- : int = 14 
```

# audio - Arduino / 处理 Arduino 压电敲击时播放声音文件？

> ID：14513159
> 
> 赞同：1
> 
> 时间：2013-01-25T00:06:58.713
> 
> 标签：audio, serial-port, arduino, minim

实际上，我们正在开发一个基于 Arduino 和 Processing 的项目。基本上解释一下，我们有多个爆震传感器（或压电）。我们的目标是在每次“敲击”piezzo 时启动一个声音文件，但我们遇到了一些关于从piezzo 获取数据的问题。我们在 Arduino 草图和 Processing 草图上工作，但我们没有设法在这两个草图之间建立路径。所以我们的问题是：在处理草图中，如何获取arduino草图的压电值并使其每次敲击时都会启动声音文件？

Arduino草图：

```
// these constants won't change:
const int ledPin = 13; // led connected to digital pin 13
const int knockSensor0 = A0 ; // the piezo is connected to analog pin 0
const int knockSensor1 = A1 ;
const int knockSensor2 = A2 ;
const int knockSensor3 = A3 ;
const int knockSensor4 = A4 ;
const int knockSensor5 = A5 ;

const int threshold = 100; // threshold value to decide when the detected sound is a knock or not

// these variables will change:
int sensorReading = 0; // variable to store the value read from the sensor pin
int ledState = LOW; // variable used to store the last LED status, to toggle the light

void setup() 
{
    pinMode(ledPin, OUTPUT); // declare the ledPin as as OUTPUT
    Serial.begin(9600); // use the serial port
}

void loop() 
{
    Ampoule(A0);
    Ampoule(A1);
    Ampoule(A2);
    Ampoule(A3);
    Ampoule(A4);
    Ampoule(A5);
}

void Ampoule (int input) 
{
    // read the sensor and store it in the variable sensorReading:
    sensorReading = analogRead(input);

    // if the sensor reading is greater than the threshold:
    if (sensorReading > threshold) 
    {
        // toggle the status of the ledPin:
        ledState = !ledState;
        // update the LED pin itself:
        digitalWrite(ledPin, ledState);
        // send the string "Knock!" back to the computer, followed by newline
        Serial.println("PiezoKnock!");
        Serial.write(10);
    }
    else 
    {
        ledState = LOW;
        digitalWrite(ledPin, ledState);
    }
    delay(10); // delay to avoid overloading the serial port buffer
} 
```

Processing Sketch（我们发现的一个开源示例，理论上，它正是我们正在寻找的东西）

```
/**
* Arduino Sounds
*
* Play WAV or MP3 files when piezo knocks from an Arduino running the
* "PiezoKnock" sketch or when a computer keyboard key is pressed.
*
* Taken from the Minim "trigger" sketch:
*
* This sketch demonstrates how to use the <code>trigger</code> method of an <code>AudioSample</code>. <br />
* <code>AudioSample</code>s can only be triggered, not cue'd and looped
* or anything else you might do with an <code>Playable</code> object. The advantage, however, is that
* an <code>AudioSample</code> can be retriggered while it is still playing, which will cause the sample to
* overlap with itself .
*/

import ddf.minim.*;
import processing.serial.*;

String portname = "/dev/tty.usbserial-A4001qa8"; // or "COM8"
Serial port; // Create object from Serial class

AudioSample sounds[];
String sound_names[] =
{
    "cat.wav",
    "fx.mp3",
    "electric_wrench.wav",
    "wehoa.mp3",
    "oriental_gong_2.wav",
    "yipee.wav",
    "car_brake.wav"
    // find more wav or mp3 files and put them in the "data" directory
};

void setup()
{
    size(400, 400);
    background(0);
    stroke(255);
    // always start Minim before you do anything with it
    Minim.start(this);
    Minim.debugOn();
    sounds = new AudioSample[sound_names.length];
    for( int i=0; i< sound_names.length; i++ ) 
    {
        sounds[i] = Minim.loadSample(sound_names[i], 512);
    }

    // Open the port that the board is connected to and use the same speed (19200 bps)
    port = new Serial(this, portname, 19200);
}

void draw()
{
    // do the drawing on events
}

void soundball() 
{
    int r = int(random(sounds.length));
    println("picked sound #"+r);
    sounds[r].trigger(); // play a random sound

    int x = int(random(0,300));
    int y = int(random(0,300));
    fill(240,0,0);
    ellipse(x,y, 40,40);
    fill(30,0,0);
    ellipse(x,y, 8,8);
}

void serialEvent(Serial p) 
{
    char inByte = port.readChar();
    println("received char: "+ inByte);
    if( inByte == '!' ) // '!' is end of "knock!"
    { 
        soundball();
    }
}

void keyPressed() 
{
    if(key == 't') 
    {
        background(40,40,40); // erase screen
    }
    soundball();
}

void stop()
{
    // always close Minim audio classes when you are done with them
    for( int i=0; i<sounds.length; i++ ) 
    {
        sounds[i].close();
    }
    super.stop();
} 
```

请原谅我糟糕的英语！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T03:23:56.527

在您的 Arduino 草图中，串行端口的波特率设置为 9600 ( `Serial.begin(9600)`)，但在处理中波特率为 19200 ( `port = new Serial(this, portname, 19200)`)。您将需要更改这些以使波特率匹配。

# vb.net - ClickOnce 使用 VB6 dll 安装 VB.NET Windows Forms 项目

> ID：14513161
> 
> 赞同：0
> 
> 时间：2013-01-25T00:07:04.110
> 
> 标签：vb.net, installation, clickonce

我有一个包含第三方 VB6 DLL 的 VB.NET Windows 窗体（不要笑！！！） ClickOnce 安装。该项目安装没有任何问题，但是当我到达调用该 VB6 DLL 的代码时，我收到一条错误消息，指出 .DLL 未注册。DLL 包含在 SomeApp.exe.manifest 文件中。但是，它不在 SomeApp.manifest 文件中。两者都需要吗？还是我在其他地方搞砸了？我确实注意到第 3 方 VB6 DLL 没有签名，如果这很重要的话。我主要是从较早的 MSDN 杂志文章开始，但参考最新的 MSDN 文档。

[http://msdn.microsoft.com/en-us/magazine/cc188708.aspx](http://msdn.microsoft.com/en-us/magazine/cc188708.aspx) http://msdn.microsoft.com/en-us/library/ms165432.aspx

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T00:56:43.463

解决方案资源管理器 > 项目名称 > 我的项目 > 参考选项卡 > 选择 V​​B6 DLL > 属性窗口 > 复制本地 = TRUE 和隔离 = TRUE。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T23:28:29.330

原来我们试图添加的第 3 方 DLL 是一个 Excel 加载项。

[http://msdn.microsoft.com/en-us/library/ms165432(v=vs.90).aspx](http://msdn.microsoft.com/en-us/library/ms165432(v=vs.90).aspx)

在那篇文章中，MSFT 指出“并非每个组件都适合免注册 COM。如果满足以下任何一项，则该组件不适合：该组件旨在用作加载项或管理单元- “

虽然我们不将文件与 Excel 一起使用，但我认为这可能是它在运行时无法识别的原因。我们已要求供应商提供兼容的无注册 COM 文件。同时，我们需要将该文件添加到先决条件脚本中。不像我想要的那样封装。

在我选择这个作为答案之前，我想看看是否有其他人同意这可能是问题所在。

# javascript - 如果可能有重复，我可以使用什么来代替 id 属性？

> ID：14513166
> 
> 赞同：0
> 
> 时间：2013-01-25T00:07:46.917
> 
> 标签：javascript, html

我知道 DOM 中的几乎所有项目都可以具有“id”属性，并且我一直在使用它来跟踪客户端表中的每个客户端。我也知道，您不应该重复任何 id。在我的代码中，行的 id 设置为每个人的“clientId”，它来自数据库中的唯一键，因此不会有重复......但页面上的其他地方是一个“问题”表，其中我一直在将每一行的 id 设置为“issueId”（同样是一个唯一键），但我意识到 clientId 可能与 issueId 匹配，我不知道结果。

我正在寻找一种方法来识别每一行，以便稍后调用它们。是否有另一个我可以使用的属性更适合这个？分配ID时，我应该在数字前添加“客户”一词吗？我想使用标准做法并在这里拥有一个快速的网络应用程序。

如果客户和问题编号匹配，那没关系，因为我将始终知道我在寻找哪个，并且在查找时我可以先深入到表格中。我只是不想使用“id”，因为重复 id 是非法的。例如，如果我正在寻找一个问题，我可以使用类似的东西。`document.getElementById("issueTable").getElementBySOMETHING(issueId)`而不仅仅是`document.getElementBySOMETHING(issueId)`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T00:10:04.617

使用`class`而不是`id`.

```
getElementsByClassName(); // needs a shim for IE8 and lower 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T00:20:58.200

为了确保没有冲突，您可以为您的*id*值添加一个唯一前缀，例如，`client-X`或`issue-X`.
现在，即使它们共享相同的键，由于这个前缀，每个的*id属性也是不同的。*然后，您可以按如下方式修改您的查找代码

```
document.getElementById('issue-'+key); // get by issue
document.getElementById('client-'+key); // get by client 
```

这意味着您可以在一次查找中获取您的元素，并使用`getElementById`这是[最快的方法](http://jsperf.com/getelementbyid-vs-queryselector/28)之一。此外，这种方法意味着如果您想使用 CSS 规则来设置不同的元素样式，上一代浏览器将不会遇到以数字开头的键的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T00:22:39.630

**getElementById()** - 通过 ID 返回对元素的引用。

**getElementsByClassName()** - 返回一组具有所有给定类名的元素。在文档对象上调用时，将搜索完整的文档，包括根节点。您也可以在任何元素上调用 getElementsByClassName；它将仅返回具有给定类名的指定根元素的后代元素。

**getElementsByTagName()** - 返回具有给定标签名称的元素列表。搜索指定元素下的子树，不包括元素本身。返回的列表是实时的，这意味着它会自动使用 DOM 树进行自我更新。因此，无需使用相同的元素和参数多次调用 element.getElementsByTagName。

**querySelectorAll()** - 返回文档中匹配指定选择器组的元素列表（使用文档节点的深度优先前序遍历）。返回的对象是一个 NodeList。

*字体：*

[http://www.quirksmode.org/dom/w3c_core.html#gettingelements](http://www.quirksmode.org/dom/w3c_core.html#gettingelements)

[https://developer.mozilla.org/en-US/docs/DOM/](https://developer.mozilla.org/en-US/docs/DOM/)

# c# - 将参数传递给基类

> ID：14513168
> 
> 赞同：-3
> 
> 时间：2013-01-25T00:07:57.803
> 
> 标签：c#, inheritance, private

我目前正在做一个 C# 项目，我是 C# 的新手，所以我对类和所有东西都不太熟悉。无论如何，这是我的示例程序结构：

```
 class foo 
 { 
     public foo(String txt) : base(new MyInnerClass()) { }
     private class MyInnerClass
     { }
 } 
```

问题是我想将我的***String txt***访问到*MyInnerClass*，但我不知道如何。***String txt***的值来自将访问此类***foo***的其他类。知道怎么做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T00:17:04.667

只需将其传递给 base 的构造函数即可。

```
class foo { 
public foo(String txt):
           base(new MyInnerClass(txt)){
             } 
   private class MyInnerClass { //some code lines } } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T00:14:14.390

你可以在 上创建一个可设置的属性`MyInnerClass`，或者给它一个接受字符串的构造函数，就像你对`foo`.

```
class foo 
{ 
   public foo(String txt) : base(new MyInnerClass(txt)) { }

   private class MyInnerClass
   { 
       private string text;
       public MyInnerClass(string txt)
       { 
           this.text = txt;
       }
   }
} 
```

# uiscrollview - 使用自动布局“捏缩放”

> ID：14513170
> 
> 赞同：3
> 
> 时间：2013-01-25T00:08:12.633
> 
> 标签：uiscrollview, uiimageview, zooming, autolayout, pinch

我遵循了许多我在网上找到的“捏到缩放”教程，并且已经阅读了 AutoLayout，但我无法让它在我的项目中工作。

我的整个项目都使用 AutoLayout，所以我不想将其关闭。我正在将一个巨大的 UIImage（EG：长边 5000px）加载到 UIImageView 中，我希望能够通过捏合来缩放和移动放大的图像。

我尝试在 UISrollView 中使用 UIImageView，但我无法让它正常工作。我能得到的最接近的是一些随机的“故障”，即在捏合时图像移动不规律。

有没有人在 iOS 6 中使用 Autolayout 进行“捏到缩放”？我不在乎它是否使用 UIScrollView 或其他东西，我只是想让它工作。

谢谢，

艾萨克

# sql - 适当时不返回结果

> ID：14513174
> 
> 赞同：0
> 
> 时间：2013-01-25T00:08:24.700
> 
> 标签：sql, mysqli

我有一个查询返回自上次记录的“操作”以来的时间？

```
SELECT unix_timestamp(now()) - unix_timestamp(dateTime)
FROM action_table
WHERE action='$action'
ORDER BY dateTime DESC
LIMIT 1 
```

唯一的问题是`0`如果没有找到行，它会返回。

如果表中没有针对所请求的操作的行，关于如何让这个不返回任何结果的任何想法？

**编辑：这实际上是按我想要的方式工作，如果表中没有任何操作，则不返回任何结果。将结果转换为 int 时，我的 php 只是搞砸了。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T01:49:22.673

好吧，我会使用这样的 IF..ELSE 语句

```
SELECT CASE WHEN <br>
   (SELECT 
      unix_timestamp(now()) - unix_timestamp(dateTime)
    FROM action_table
    WHERE action='aaa'
    ORDER BY dateTime DESC
    LIMIT 1) > 0
THEN 
   (SELECT 
      unix_timestamp(now()) - unix_timestamp(dateTime)
      FROM action_table
      WHERE action='aaa'
      ORDER BY dateTime DESC
      LIMIT 1)
ELSE 
   'no result' 
END; 
```

这是一个关于[sqlfiddle](http://sqlfiddle.com/#!2/594a4/107)的工作示例。

# php - imagesx() 和 imagesy() 不工作

> ID：14513175
> 
> 赞同：3
> 
> 时间：2013-01-25T00:08:26.510
> 
> 标签：php, gd, thumbnails

我正在尝试制作缩略图。并且 php 函数有效。我已经用它制作了缩略图。但是，某些文件不起作用。我已经缩小了问题的范围，但现在卡住了。任何帮助，将不胜感激。

这些图像可以在[http://www.pspsigma.com/image_test.php](http://www.pspsigma.com/image_test.php)找到。左边的那个不起作用。右边那个会。两者都是.jpg。两者最初都是通过表单上传的，但已针对堆栈溢出进行了更改，因此该函数可以在没有表单的情况下工作。

html 是一个简单的脚本，带有文件输入设置操作到这个 .php 文件

php：

```
<?php
    $the_name= $_FILES['userfile']['name']; 
    $tmpname = $_FILES['userfile']['tmp_name'];  

    $size="1000";
      $save_dir="images/thumbs/";
      $save_name=$the_name;
      $maxisheight= "100";

function img_resize( $tmpname, $size, $save_dir, $save_name, $maxisheight)
{
$save_dir     .= ( substr($save_dir,-1) != "/") ? "/" : "";
$gis        = getimagesize($tmpname);
$type        = $gis[2];
switch($type)
    {
    case "1": $imorig = imagecreatefromgif($tmpname); break;
    case "2": $imorig = imagecreatefromjpeg($tmpname);break;
    case "3": $imorig = imagecreatefrompng($tmpname); break;
    default:  $imorig = imagecreatefromjpeg($tmpname);
    }

    //check if imorig is set
    if (!isset($imorig)) {
    echo " imorig is not set, ";    
    }

    //I tried setting $x and $y from the width and height of the original file. Still didn't work.
    //although the variables were set.
    //this makes me think the problem is with the imagecreatefromjpeg function.
    list($width, $height, $type, $attr) = getimagesize($tmpname);
    echo "getimagesize width= " . $width . ", ";
    echo "getimagesize height= " . $height . ", ";

    //possible solution, didn't work
    //$x = $width;
    //$y = $height;

    //This is the problem
    $x = imagesx($imorig);
    $y = imagesy($imorig);

    //check that x and y are set
    if (!isset($x) && !isset($y)) {
        echo" x and y are not set,";
    }
    elseif (!isset($x)) {
        echo" x is not set";
    }
    elseif (!isset($y)) {
        echo" y is not set";
    }
    else {
    echo "|x= " . $x . " |";
    echo "|y= " . $y . " |";            
    }

    $woh = (!$maxisheight)? $gis[0] : $gis[1] ;   

    if($woh <= $size)
    {
    $aw = $x;
    $ah = $y;
    }
        else
    {
        if(!$maxisheight){
            $aw = $size;
            $ah = $size * $y / $x;
        } else {
            $aw = $size * $x / $y;
            $ah = $size;
        }
    }   
    $im = imagecreatetruecolor($aw,$ah);
    if (!$im) {
        echo " failure: no im variable. ";
    }
    else {

if (imagecopyresampled($im,$imorig , 0,0,0,0,$aw,$ah,$x,$y)) {
    if (!imagejpeg($im, $save_dir.$save_name)) {
        echo "failure";}
        else {
        echo "success";}
}
else {
    echo" didn't copy resampled";
}
    }
}

img_resize( $tmpname, $size, $save_dir, $save_name, $maxisheight);
?> 
```

如果我选择 rush vader.jpg 文件并通过这个函数。它回显了 x 和 y 已设置，显示它们的值和成功。

如果我选择冷静.jpg，它将回显“失败：没有即时变量”。并且 $x 和 $y 变量将没有值。如果我为 x 和 y 变量分配 getimagesize($tmp_name) 中的值，它会回显“没有复制重新采样”。

这是实际图像的问题吗？或者有什么方法可以更改代码以便每个图像都能正常工作？

谢谢你！！！

**更新**

我回显了每个变量以查看是否有问题。问题似乎出在类型上。类型输出为 6，我从 php 手动注释中发现是 bmp。

我不明白如果扩展名是 .jpg 会怎样……如果是这样的话。是否可以更改类型以使其成为 .jpg、.png 或 .gif？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T02:06:26.093

图像冷静.jpg 的类型是 6，即 bmp。因此 imagecreatefrom... 将不起作用并且 $imorig 为 NULL。通过从 php 手册中添加一个名为 imagecreatefrombmp 的函数，标签为 6。该函数可以完美运行。

添加到文件中：

```
function imagecreatefrombmp($p_sFile)  { 
    //    Load the image into a string 
    $file    =    fopen($p_sFile,"rb"); 
    $read    =    fread($file,10); 
    while(!feof($file)&&($read<>"")) 
        $read    .=    fread($file,1024); 

    $temp    =    unpack("H*",$read); 
    $hex    =    $temp[1]; 
    $header    =    substr($hex,0,108); 

    //    Process the header 
    //    Structure: http://www.fastgraph.com/help/bmp_header_format.html 
    if (substr($header,0,4)=="424d") 
    { 
        //    Cut it in parts of 2 bytes 
        $header_parts    =    str_split($header,2); 

        //    Get the width        4 bytes 
        $width            =    hexdec($header_parts[19].$header_parts[18]); 

        //    Get the height        4 bytes 
        $height            =    hexdec($header_parts[23].$header_parts[22]); 

         //    Get the horz. resolution in pixel per meter, 4 bytes
        $dpix = hexdec($header_parts[39]. $header_parts[38]) * 0.0254;

        //    Get the vert. resolution in pixel per meter, 4 bytes
        $dpiy = hexdec($header_parts[43]. $header_parts[42]) * 0.0254;

        //    Unset the header params 
        unset($header_parts); 
    } 

    //    Define starting X and Y 
    $x                =    0; 
    $y                =    1; 

    //    Create newimage 
    $image            =    imagecreatetruecolor($width,$height); 

    //    Grab the body from the image 
    $body            =    substr($hex,108); 

    //    Calculate if padding at the end-line is needed 
    //    Divided by two to keep overview. 
    //    1 byte = 2 HEX-chars 
    $body_size        =    (strlen($body)/2); 
    $header_size    =    ($width*$height); 

    //    Use end-line padding? Only when needed 
    $usePadding        =    ($body_size>($header_size*3)+4); 

    //    Using a for-loop with index-calculation instaid of str_split to avoid large memory consumption
    //    Calculate the next DWORD-position in the body 
    for ($i=0;$i<$body_size;$i+=3) 
    { 
        //    Calculate line-ending and padding 
        if ($x>=$width) 
        { 
            //    If padding needed, ignore image-padding 
            //    Shift i to the ending of the current 32-bit-block 
            if ($usePadding) 
                $i    +=    $width%4; 

            //    Reset horizontal position 
            $x    =    0; 

            //    Raise the height-position (bottom-up) 
            $y++; 

            //    Reached the image-height? Break the for-loop 
            if ($y>$height) 
                break; 
        } 

        //    Calculation of the RGB-pixel (defined as BGR in image-data) 
        //    Define $i_pos as absolute position in the body 
        $i_pos    =    $i*2; 
        $r        =    hexdec($body[$i_pos+4].$body[$i_pos+5]); 
        $g        =    hexdec($body[$i_pos+2].$body[$i_pos+3]); 
        $b        =    hexdec($body[$i_pos].$body[$i_pos+1]); 

        //    Calculate and draw the pixel 
        $color    =    imagecolorallocate($image,$r,$g,$b); 
        imagesetpixel($image,$x,$height-$y,$color); 

        //    Raise the horizontal position 
        $x++; 
    } 

    //    Unset the body / free the memory 
    unset($body); 

    //    Return image-object 
    return ($image); 
    return ($dpix); 
    return ($dpiy); 
} 
```

添加：

```
case "6": $imorig = imagecreatefrombmp($tmpname); break;
case "15": $imorig = imagecreatefromwbmp($tmpname); break; 
```

后

```
case "3": $imorig = imagecreatefrompng($tmpname); break; 
```

经测试。一切正常。谢谢大家！

# c# - 尝试计算两个角度之间的差异 (atan2)

> ID：14513176
> 
> 赞同：4
> 
> 时间：2013-01-25T00:08:34.327
> 
> 标签：c#, distance, geometry, angle, atan2

Atan2(y,x) 将返回 -pi 和 pi 之间的浮点数。我想计算两个角度之间的距离，但不连续性让我失望。

[请参阅this以获得更好的理解。](http://i.stack.imgur.com/eruVr.png)

我希望能够计算角度 1 和角度 2 之间的距离。

这样做的重点是能够创建一个从中心到指定角度的圆锥。基本上我将评估：

```
if(DistanceFromAngle1 < pi/4 [45°])
{
  Angle2 is part of cone
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-25T01:52:53.617

如果距离是指连接两个截点的直线，则可以通过以下方式计算距离：

```
SQRT( ( ABS|cos(A) - cos(B)| )^2 + ( ABS|sin(A) - sin(B)| )^2 ) 
```

SQRT = 平方根

ABS = 绝对值

如果距离是角度，则通过执行（伪代码）来计算

```
var angle = ABS(A - B)
if(angle > pi) angle = 2*pi - angle
return angle 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-25T00:57:19.380

```
dAngle1 = //convert angle1 to degrees
dAngle2 = // convert to degrees

delta = Math.Max(dAngle1, dAngle2) - Math.Min(dAngle1, dAngle2)
if (180 < delta) {
  delta = 360 - delta;
}

// convert delta to radians if you want 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-25T00:12:17.720

π/2 是 90°，而不是 45°。我将假设您想知道角度 2 是否位于以角度 1 为中心的区间内，该区间在两个方向上都与它成 45°。

您可以取角度 2 和角度 1 之间的差，并以 2π 为模减少，直到差在 [-π, π) 中。这将给出角度 2 和角度 1 之间的有符号距离。然后，检查它是否在 (-π/4, π/4) 中。由于 atan2 返回的值始终介于 -π 和 π 之间，因此原始差异将始终介于 -2π 和 2π 之间，因此您可以将所有这些归为一个检查：

```
 if (angle2 - angle1 < -7π/4 || 
     (angle2 - angle1 > -π/4 && angle2 - angle1 < π/4) ||
     angle2 - angle1 > 7π/4)
 {
   angle2 is less than 45° away from angle1
 } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-03-29T10:22:09.457

角度差计算的两个变体：

```
procedure TForm1.sButton1Click(Sender: TObject);
Var a, b, dif : Extended;
begin
  a := sCalcEdit1.Value;
  b := sCalcEdit2.Value;
  If ((a < 180) and (b >= 180) or
      (a >= 180) and (b < 180)) and (abs(a - b) < 180)  then
  Begin
  End else
  If (a < 180) and (b >= 180) then
  Begin
    b := b - 360;
  End else
  If ((a >= 180) and (b < 180)) then
  Begin
    a := a - 360;
  End;
  dif := abs(a - b);
  sCalcEdit3.Value := dif;
end;

procedure TForm1.sButton2Click(Sender: TObject);
Var a, b, dif : Extended;
begin
  a := sCalcEdit1.Value * pi / 180;
  b := sCalcEdit2.Value * pi / 180;
  dif := arccos(cos(a - b));
  sCalcEdit3.Value := dif * 180 / pi;
end; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-25T00:22:53.970

我想提供一个替代解决方案：您可以使用向量数学。例如，如果您有两个向量作为起点（这似乎是您的情况），这可能很有用。

给定两个**归一化**向量`a`和`b`，它们之间的角度简单地变为`acos(dot(a, b)) = acos(ax*bx + ay*by)`。

例如，要从某个角度获取归一化向量`alpha`，您可以使用`a = vec2(cos(alpha), sin(alpha))`。

要归一化非正规向量，请使用`na = a / length(a) = a / sqrt(dot(a, a))`.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-25T00:26:31.833

编辑：我不确定这是否可行。我从一些 python 代码中翻译了它，但我不确定它是否`divmod(radians, math.pi*2)[1]`与`System.Math.IEEERemainder(radians, Math.PI*2.0)`. 需要测试...

EDIT2：我认为使用 % 是正确的

EDIT3：Blah，这是不正确的，因为它返回负数的负值。有谁知道如何在 C# 中获取 python divmod？

如何计算两个角度之间的角度：

```
public static double NormalizeAngle(double radians)
{
 return fmod(radians,Math.PI*2.0); # this method doesn't exist, see above
}

public static double ArcLength(double radians1, double radians2)
{
 radians1 = NormalizeAngle(radians1);
 radians2 = NormalizeAngle(radians2);
 return Math.Min(NormalizeAngle(radians1 - radians2, NormalizeAngle(radians2 - radians1));
} 
```

它的工作原理是双向尝试，所有计算都以 2pi 为模，然后选择距离更小的那个。

# visual-studio-2010 - 在 Visual Studio 2010 中运行 CUDA 程序（由于 32 位和 64 位编译导致的错误）

> ID：14513179
> 
> 赞同：1
> 
> 时间：2013-01-25T00:08:46.660
> 
> 标签：visual-studio-2010, visual-c++, cuda, 32bit-64bit, x86-64

这是一个问题，它是另一个已发布问题的衍生问题，可在以下链接中找到：

[CUDA - 将错误与卷积示例联系起来](https://stackoverflow.com/questions/5509796/cuda-linking-errors-with-convolution-example/5632011#5632011)

[VS2008不编译cuda](https://stackoverflow.com/questions/5150866/vs2008-not-compiling-cuda)

在上面的链接和关于同一主题的其他几篇文章中，他们指出如果您编译 32 位 cuda，这将解决您的构建/编译问题......

任何人都可以帮我看一篇文章，该文章将展示如何链接到 32 位 CUDA。这根本不符合逻辑。当您下载 CUDA 工具包时，您可以选择下载 64 位或 32 位。两个都不下载。那么这些人只是下载 32 位版本的 CUDA 吗？这看起来很荒谬，我知道这不是他们的意思。任何帮助将不胜感激。

当他们说“链接到 32 位 CUDA”时，对于他们所谈论的内容的任何帮助将不胜感激。

* * *

错误消息（与以前的帖子相同）

```
1>LINK : 警告 LNK4098: defaultlib 'MSVCRTD' 与其他库的使用冲突；使用 /NODEFAULTLIB:library
1>TestForCuda.cu.obj：错误 LNK2019：无法解析的外部符号 _cudaSetupArgument@12 在函数“void __cdecl __device_stub__Z10kernelTestPi(int *)”(?__device_stub__Z10kernelTestPi@@YAXPAH@Z) 中引用
1>TestForCuda.cu.obj : error LNK2019: unresolved external symbol ___cudaRegisterFunction@40 referenced in function "void __cdecl __sti____cudaRegisterAll_46_tmpxft_000022ac_00000000_3_TestForCuda_cpp1_ii_da17b9e9(void)" (?__sti____cudaRegisterAll_46_tmpxft_000022ac_00000000_3_TestForCuda_cpp1_ii_da17b9e9@@YAXXZ)
1>TestForCuda.cu.obj : error LNK2019: unresolved external symbol ___cudaRegisterFatBinary@4 referenced in function "void __cdecl __sti____cudaRegisterAll_46_tmpxft_000022ac_00000000_3_TestForCuda_cpp1_ii_da17b9e9(void)" (?__sti____cudaRegisterAll_46_tmpxft_000022ac_00000000_3_TestForCuda_cpp1_ii_da17b9e9@@YAXXZ)
1>TestForCuda.cu.obj：错误LNK2019：函数“void __cdecl __cudaUnregisterBinaryUtil(void)”(?__cudaUnregisterBinaryUtil@@YAXXZ)中引用的未解析外部符号___cudaUnregisterFatBinary@4
1>TestForCuda.cu.obj : error LNK2019: unresolved external symbol _cudaLaunch@4 referenced in function "enum cudaError __cdecl cudaLaunch(char *)" (??$cudaLaunch@D@@YA?AW4cudaError@@PAD@Z)
1>C:\Users\misc\Documents\Visual Studio 2010\Projects\TestForCuda\Test_Configuration\TestForCuda.exe : 致命错误 LNK1120: 5 unresolved externals
1>
1>构建失败。

```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T05:03:17.573

# javascript - 用户是否已登录 Google？

> ID：14513181
> 
> 赞同：0
> 
> 时间：2013-01-25T00:09:00.450
> 
> 标签：javascript, html

> **可能重复：**
> [如何检查用户是否通过 API 登录到他的谷歌帐户？](https://stackoverflow.com/questions/10459720/how-to-check-whether-a-user-is-logged-into-his-google-account-through-api)

我正在开发一个显示 Google 日历的网页。

我的问题是：是否可以检测用户当前是否登录了 Google 帐户？如果有可能（我很确定是这样），最简单的检测方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T00:12:20.753

用户应该允许你这样做。您应该使用 Google API，这里是： [http ://code.google.com/apis/accounts/](http://code.google.com/apis/accounts/)

检查 API，注册 API 密钥，用户应该让您检查他们在 Google 中的状态。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T00:13:26.110

你看过谷歌开发者指南吗？[https://developers.google.com/google-apps/calendar/auth](https://developers.google.com/google-apps/calendar/auth)推荐 OAuth 2.0。

# objective-c - 如何避免在 NSArray 中插入重复的对象？

> ID：14513184
> 
> 赞同：1
> 
> 时间：2013-01-25T00:09:23.837
> 
> 标签：objective-c, nsarray, duplicates

好吧，我遇到了一个 nsarray 问题，它正在从 nsdictionary 添加重复的对象。

情况是这样的：我有一个带有字典数组的 plist 文件。每个字典的键是“codigo”和“var”。

我所做的是检查每个 'var' 值是否 < 0，如果它是 'codigo' 和 'var' 将使用 NSAttributedStrings 获得颜色。

当我遍历数组并将评估的“var”添加到新数组中时，问题就来了。我在最终数组中得到重复的对象。

编辑：解决方案源自 xlc0212 的回答和聊天帮助：

```
_timer = [NSTimer scheduledTimerWithTimeInterval:0.020 target:self
                                        selector:@selector(time:) userInfo:nil repeats:YES];

NSDictionary *redAttrs    = @{NSForegroundColorAttributeName:[UIColor redColor]};
NSDictionary *greenAttrs  = @{NSForegroundColorAttributeName:[UIColor colorWithRed:0.118 green:0.506 blue:0.000 alpha:1.000]};
NSDictionary *orangeAttrs = @{NSForegroundColorAttributeName:[UIColor orangeColor]};

NSString *stringUm = @"";
NSString *stringDois = @"";
NSString *stringTres = @"";

arrayAtivos = [[NSMutableOrderedSet alloc] init];
NSDictionary *item = [[NSDictionary alloc]init];

for (item in array){

    NSString *alfa = [item objectForKey:@"var"];

    float fltNumber = [alfa floatValue];

    if (fltNumber < 0) {
        stringUm = [NSString stringWithFormat:@"%@ %.2f  ",[item objectForKey:@"codigo"], fltNumber];
        int strLength = [stringUm length];
        attStr = [[NSMutableAttributedString alloc] initWithString:stringUm];
        [attStr setAttributes:redAttrs range:NSMakeRange(0,strLength)];

    } else if (fltNumber > 0 ) {
        stringDois = [NSString stringWithFormat:@"%@ %.2f  ",[item objectForKey:@"codigo"], fltNumber];
        int strLength = [stringDois length];
        attStr = [[NSMutableAttributedString alloc] initWithString:stringDois];
        [attStr setAttributes:greenAttrs range:NSMakeRange(0,strLength)];

    } else if (fltNumber == 0) {
        stringTres = [NSString stringWithFormat:@"%@ %.2f  ",[item objectForKey:@"codigo"], fltNumber];
        int strLength = [stringTres length];
        attStr = [[NSMutableAttributedString alloc] initWithString:stringTres];
        [attStr setAttributes:orangeAttrs range:NSMakeRange(0,strLength)];
    }

    [arrayAtivos addObject:attStr];

} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-25T00:20:44.973

[NSMutableOrderedSet](http://developer.apple.com/library/mac/documentation/Foundation/Reference/NSMutableOrderedSet_Class/Reference/Reference.html)是你想要的。只需替换`NSMutableArray`并`NSMutableOrderedSet`完成。

如果要过滤数组，请使用此

```
NSArray *array = // your array
NSMutableArray *filteredArray = [[[NSOrderedSet alloc] initWithArray: array] mutableCopy]; 
```

* * *

代替

```
arrayAtivos = [NSMutableArray new]; 
```

有了这个

```
arrayAtivos = [[NSMutableOrderedSet alloc] init]; 
```

并将类型更改`arrayAtivos`为`NSMutableOrderedSet`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-25T00:14:50.070

如果我理解正确，您可以在将对象添加到数组之前做一个简单的检查：

```
if (![arrayAtivos containsObject:attStr]) {
     [arrayAtivos addObject:attStr];
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-25T00:18:54.300

您可以将它们全部添加到不允许重复的 NSSet 中。

您可以从中获得一个数组，但如果这很重要，您将负责对它们进行排序。

# mongodb - Mongo聚合框架，排序然后分组不起作用

> ID：14513185
> 
> 赞同：20
> 
> 时间：2013-01-25T00:09:37.537
> 
> 标签：mongodb, sorting, aggregation-framework

我正在尝试先按日期对数据进行排序，然后在另一个字段上分组。这对我不起作用。

***我要回答的问题是：选择最近的不同 cid？***

鉴于此数据：

```
db.summary.save({"lid" : 5, "date" : 5, "cid" : 2, "circles" : [ 2 ] })
db.summary.save({"lid" : 2, "date" : 2, "cid" : 1, "circles" : [ 2 ] })
db.summary.save({"lid" : 4, "date" : 0, "cid" : 3, "circles" : [ 2 ] })
db.summary.save({"lid" : 3, "date" : 3, "cid" : 2, "circles" : [ 2 ] })
db.summary.save({"lid" : 1, "date" : 1, "cid" : 1, "circles" : [ 2 ] })

db.summary.aggregate( {$match :{circles: 2}, $sort: {date: -1}, $group: {_id: '$cid'}} ) 
```

我首先在圆圈上进行匹配，然后在日期上进行排序，然后在 cid 上进行分组

我得到的结果：

```
{
    "result" : [
        {
            "_id" : 3
        },
        {
            "_id" : 1
        },
        {
            "_id" : 2
        }
    ],
    "ok" : 1
} 
```

**以下是我的分析：**

在按日期匹配或排序之前，数据为：

```
"lid" : 5, "date" : 5, "cid" : 2
"lid" : 2, "date" : 2, "cid" : 1
"lid" : 4, "date" : 0, "cid" : 3
"lid" : 3, "date" : 3, "cid" : 2
"lid" : 1, "date" : 1, "cid" : 1 
```

按日期排序后，数据集将是：

```
"lid" : 5, "date" : 5, "cid" : 2
"lid" : 3, "date" : 3, "cid" : 2
"lid" : 2, "date" : 2, "cid" : 1 
"lid" : 1, "date" : 1, "cid" : 1
"lid" : 4, "date" : 0, "cid" : 3 
```

所以分组后，我期望的结果是：

```
{
    "result" : [
        {
            "_id" : 2
        },
        {
            "_id" : 1
        },
        {
            "_id" : 3
        }
    ],
    "ok" : 1
} 
```

什么查询可以解决我的问题？

为什么当前查询对我不起作用？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-01-25T02:50:42.000

当您`$group`在`$sort`管道中之后，先前的排序将丢失。您必须这样做，以便在分组后可以使用您想要排序的日期：

```
db.summary.aggregate(
    {$match: {circles: 2}},
    {$group: {_id: '$cid', date: {$max: '$date'}}},
    {$sort: {date: -1}}); 
```

结果：

```
[ { _id: 2, date: 5 }, 
  { _id: 1, date: 2 }, 
  { _id: 3, date: 0 } ] 
```

`$project`如果要重塑输出，请将a 添加到管道的末尾。

# android - AsyncTask 上的触发事件已完成

> ID：14513196
> 
> 赞同：5
> 
> 时间：2013-01-25T00:10:49.123
> 
> 标签：android, interface, android-asynctask, listener, android-event

我的应用程序有一个登录活动，它通过互联网网站检查凭据。为此，我（必须）使用 AsyncTask 类。登录成功时，全局变量设置为 true。

因为这是异步的，所以活动不会等待结果，所以我想添加一个由 AsyncTask 类的 post-execute 方法触发的事件。然后`listener`登录活动上的 a 将自行关闭，并且主要活动可见。

我想知道这是否以及如何实现。我已经尝试了其他帖子中的一些示例，但无法从中弄清楚。

我想我必须做以下事情： -`interface`在`AsyncTask`类中创建一个 - 从该类的`post_execute`方法中，我引发事件，但是如何？-`listener`在登录活动中添加一个，但是如何？

任何帮助表示赞赏。

问候， 埃里克

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-25T00:35:04.927

> 我想添加一个由 AsyncTask 类的 post-execute 方法触发的事件。然后登录活动的侦听器将自行关闭并且主要活动可见。

`onPostExecute()`已经是一个回调，您可以像您描述的那样创建另一个回调，但这是不必要的。只需将登录 Activity 的引用传递给 AsyncTask，然后使用它来`finish()`调用`startActivity()`.`onPostExecute()`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-25T00:51:41.477

首先，使用 Asynctask 或 IntentService 创建您的帖子类，如下所示...

```
public class PostIntentService extends IntentService implements PostTask.Observer {
    private int counter = 0;
    private int retry = 2;
    private Data mData;

    public PostIntentService() {
        super("PostIntentService");
    }

    @Override
    protected void onHandleIntent(Intent intent) {
        mData = (Data) intent.getSerializableExtra("data");
        // send updating status
        Intent i = new Intent();
        i.setAction(PostResponseReceiver.ACTION_RESPONSE);
        i.addCategory(Intent.CATEGORY_DEFAULT);
        i.putExtra("status", "updating");
        sendBroadcast(i);
        execute();
        counter++;
    }

    @Override
    public void onSuccessPost(String result) {
        // send success status
        Intent i = new Intent();
        i.setAction(PostResponseReceiver.ACTION_RESPONSE);
        i.addCategory(Intent.CATEGORY_DEFAULT);
        i.putExtra("status", "success");
        sendBroadcast(i);
    }

    @Override
    public void onFailedPost(String result) {
        if (counter < retry) {
            execute();
            counter++;
        }
        else {
            // send failed status
            Intent i = new Intent();
            i.setAction(PostResponseReceiver.ACTION_RESPONSE);
            i.addCategory(Intent.CATEGORY_DEFAULT);
            i.putExtra("status", "failed");
            i.putExtra("data", mData);// for reproduct
            sendBroadcast(i);
        }
    }
    private void execute() {
        PostTask task = new PostTask(this);
        task.execute();
    }
} 
```

其次，创建您的类（扩展的 BroadcastReceiver），它在帖子完成时接收意图。

```
public class PostBroadcastReceiver extends BroadcastReceiver {
    public static final String ACTION_RESPONSE = "com.example.android.intent.action.POST_PROCESSED";
    private static final int POST_REQUEST = 100;
    private Observer mObserver;

    public PostBroadcastReceiver(Observer observer) {
        mObserver = observer;
    }

    @Override
    public void onReceive(Context context, Intent intent) {
        if (intent.getStringExtra("status").equals("updating")) {
        }
        else if (intent.getStringExtra("status").equals("success")) {
            if (mObserver != null) {
                mObserver.onPostFinished();
            }
        }
        else if (intent.getStringExtra("status").equals("failed")) {
            if (mObserver != null) {
                mObserver.onPostFailed();
            }
        }
    }

    public interface Observer {
        public void onPostFinished();
        public void onPostFailed();
    }
} 
```

在您的清单文件中注册此服务。

```
<service android:name=".PostIntentService" /> 
```

在主活动的 onCreate 中注册此接收器。

```
IntentFilter filter = new IntentFilter(PostBroadcastReceiver.ACTION_RESPONSE);
filter.addCategory(Intent.CATEGORY_DEFAULT);
receiver = new PostResponseReceiver(this);
registerReceiver(receiver, filter); 
```

并在您的主要活动中实施以下方法。

```
public void onPostFinished() {
    Log.d("onPostFinished", "onPostFinished");
}
public void onPostFailed() {
    Log.d("onPostFailed", "onPostFailed");
} 
```

不要忘记在主活动的 onDestroy 中取消注册此接收器。

```
unregisterReceiver(receiver); 
```

最后，在您的登录 Activity 中执行传输。

```
Intent intent = new Intent(this, PostIntentService.class);
intent.putExtra("data", mData);
startService(intent); 
```

# xml - 在 XML 文件中查找所有 prefix:url 命名空间 - 快速

> ID：14513197
> 
> 赞同：0
> 
> 时间：2013-01-25T00:10:53.970
> 
> 标签：xml, xpath, xml-namespaces

我们需要在 XML 文件中找到所有 prefix:namespace 对。我们允许用户提供任何 XML 文件和任何 XPath 以对其进行查询。在评估 XPath 时，我们需要找到 prefix:uri 映射来设置它们。

我们目前使用：

```
selectNodes("//namespace::*[name() != 'xml'][not(../../namespace::*=.)]"); 
```

这确实会返回所有对。问题是它很慢。我看了[这个答案](https://stackoverflow.com/questions/11437606/parse-xml-file-to-get-all-namespace-information)，但它也很慢。有没有快速的方法来做到这一点？我只需要它来针对 XML 执行 XPath 查询。

我在 Java（使用 dom4j）和 .NET 中都这样做。

谢谢 - 戴夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T00:55:26.323

您将无法对[Michael Kay](https://stackoverflow.com/a/11441838/695343)和[Dimitre Novatchev](https://stackoverflow.com/a/11444940/695343)提供的链接问题的答案中提供的代码进行大量更改。

这段代码（也是他们的）只触及每个节点（元素和属性）一次，因此内部所有内容的运行时间都`distinct-values()`取决于`O(n)`节点的数量。在最坏的情况下，每个节点都附加了一些命名空间，因此您必须对这 n 个节点进行排序，这适用`O(n*log n)`于任何合理的排序算法。

```
(: each namespace:uri-combination only once :)
distinct-values(
  (: analyze all nodes with namespace set, both attributes and elements :)
  /descendant-or-self::*/(.|@*)[namespace-uri(.)]
  (: build result string :)
  /concat(
    substring-before(name(), ':'), ': ', namespace-uri(.), '&#xA;'
  )
) 
```

# html - 嵌套表不起作用

> ID：14513199
> 
> 赞同：2
> 
> 时间：2013-01-25T00:10:55.700
> 
> 标签：html, css, html-table, nested

我正在尝试“嵌套”（不确定这是否是正确的词）一些表。我不希望每个单元格中都有一个表格，而是希望能够用适当的标题组织表格。我的工程师告诉我，我不能简单地将表格样式设置为“看起来”嵌套，而是如果每个标题都包含子行和单元格会更好。

这是它应该是什么样子的屏幕截图：

![在此处输入图像描述](../Images/5c9f00c7ccf65ecef3475b6c6daf1cfd.png)

这是我的 HTML：

```
<section class="container">
    <table class="zebra">
        <thead>
            <tr>
                <th>Code</th>
                <th>Procedure</th>
                <th>Units</th>
                <th>Charge</th>
                <th>Avg. Charge</th>
                <th>As %</th>
            </tr>
        </thead>
        <tbody class="level1">
            <tr>
                <td colspan="6">
                    <i class="doctor"></i>John Dorian
                </td>
            </tr>
            <tbody class="level2">
                <tr>
                    <td colspan="6">
                        <i class="address"></i>Southern Hills Hospital
                    </td>
                </tr>
                <tbody class="level3">
                    <tr>
                        <td>99234</td>
                        <td>Chest XRay</td>
                        <td>1</td>
                        <td>20.00</td>
                        <td>40.00</td>
                        <td>10.00</td>
                    </tr>
                    <tr>
                        <td>99234</td>
                        <td>Chest XRay</td>
                        <td>1</td>
                        <td>20.00</td>
                        <td>40.00</td>
                        <td>10.00</td>
                    </tr>
                    <tr>
                        <td>99234</td>
                        <td>Chest XRay</td>
                        <td>1</td>
                        <td>20.00</td>
                        <td>40.00</td>
                        <td>10.00</td>
                    </tr>
                </tbody>
            </tbody>
        </tbody>
        <tbody class="level1">
            <tr>
                <td colspan="6">
                    <i class="doctor"></i>John Dorian
                </td>
            </tr>
            <tbody class="level2">
                <tr>
                    <td colspan="6">
                        <i class="address"></i>Southern Hills Hospital
                    </td>
                </tr>
                <tbody class="level3">
                    <tr>
                        <td>99234</td>
                        <td>Chest XRay</td>
                        <td>1</td>
                        <td>20.00</td>
                        <td>40.00</td>
                        <td>10.00</td>
                    </tr>
                    <tr>
                        <td>99234</td>
                        <td>Chest XRay</td>
                        <td>1</td>
                        <td>20.00</td>
                        <td>40.00</td>
                        <td>10.00</td>
                    </tr>
                    <tr>
                        <td>99234</td>
                        <td>Chest XRay</td>
                        <td>1</td>
                        <td>20.00</td>
                        <td>40.00</td>
                        <td>10.00</td>
                    </tr>
                </tbody>
            </tbody>
            <tbody class="level2">
                <tr>
                    <td colspan="6">
                        <i class="address"></i>Southern Hills Hospital
                    </td>
                </tr>
                <tbody class="level3">
                    <tr>
                        <td>99234</td>
                        <td>Chest XRay</td>
                        <td>1</td>
                        <td>20.00</td>
                        <td>40.00</td>
                        <td>10.00</td>
                    </tr>
                    <tr>
                        <td>99234</td>
                        <td>Chest XRay</td>
                        <td>1</td>
                        <td>20.00</td>
                        <td>40.00</td>
                        <td>10.00</td>
                    </tr>
                    <tr>
                        <td>99234</td>
                        <td>Chest XRay</td>
                        <td>1</td>
                        <td>20.00</td>
                        <td>40.00</td>
                        <td>10.00</td>
                    </tr>
                </tbody>
            </tbody>
            <tbody class="level2">
                <tr>
                    <td colspan="6">
                        <i class="address"></i>Southern Hills Hospital
                    </td>
                </tr>
                <tbody class="level3">
                    <tr>
                        <td>99234</td>
                        <td>Chest XRay</td>
                        <td>1</td>
                        <td>20.00</td>
                        <td>40.00</td>
                        <td>10.00</td>
                    </tr>
                    <tr>
                        <td>99234</td>
                        <td>Chest XRay</td>
                        <td>1</td>
                        <td>20.00</td>
                        <td>40.00</td>
                        <td>10.00</td>
                    </tr>
                    <tr>
                        <td>99234</td>
                        <td>Chest XRay</td>
                        <td>1</td>
                        <td>20.00</td>
                        <td>40.00</td>
                        <td>10.00</td>
                    </tr>
                </tbody>
            </tbody>
        </tbody>
    </table> 
```

所以你可以看到我嵌套`tbody`在其他`tbody`s 中。这在 Chrome 中渲染得很好。事实上，这就是我想要的样子。

但

当我检查元素时，我看到 Chrome（以及 Safari 和 Firefox）基本上会说“nuh uh”并打破嵌套`tbody`的 s 。看这里：

有什么想法可以完成我想要达到的目标吗？

![在此处输入图像描述](../Images/b40c774a616a1fade8705e0f2503f30f.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T00:28:02.700

我认为您使解决方案过于复杂。鉴于您提供的屏幕截图，实际上不需要嵌套。您的工程师错了，您可以将表格样式设置为嵌套。

1.  删除嵌套的 tbody，并`tr`与与其级别关联的类一起使用。
2.  根据其深度设计每个级别。我针对`td`每个`td`中的第一个应用一个`padding-left`值以使其看起来嵌套。

这是 Jsfiddle：http: [//jsfiddle.net/msV2U/](http://jsfiddle.net/msV2U/)

CSS：

```
body { font-family: arial; }

table { width: 100%; }

thead th { background-color: #f6f6f6; padding: 5px; }
table td { border: 1px solid #DDD; padding: 5px; }

tr.level1 td { font-weight: bold ;}
tr.level2 td:first-child,
tr.level3 td:first-child { padding-left: 25px; } 
```

和 HTML：

```
<table class="zebra">
    <thead>
        <tr>
            <th>Code</th>
            <th>Procedure</th>
            <th>Units</th>
            <th>Charge</th>
            <th>Avg. Charge</th>
            <th>As %</th>
        </tr>
    </thead>
    <tbody>
        <tr class="level1">
            <td colspan="6">
                <i class="doctor"></i>John Dorian
            </td>
        </tr>
        <tr class="level2">
            <td colspan="6">
                <i class="address"></i>Southern Hills Hospital
            </td>
        </tr>
        <tr class="level3">
            <td>99234</td>
            <td>Chest XRay</td>
            <td>1</td>
            <td>20.00</td>
            <td>40.00</td>
            <td>10.00</td>
        </tr>
        <tr class="level3">
            <td>99234</td>
            <td>Chest XRay</td>
            <td>1</td>
            <td>20.00</td>
            <td>40.00</td>
            <td>10.00</td>
        </tr>
        <tr class="level3">
            <td>99234</td>
            <td>Chest XRay</td>
            <td>1</td>
            <td>20.00</td>
            <td>40.00</td>
            <td>10.00</td>
        </tr>
        <tr class="level1">
            <td colspan="6">
                <i class="doctor"></i>John Dorian
            </td>
        </tr>
        <tr class="level2">
            <td colspan="6">
                <i class="address"></i>Southern Hills Hospital
            </td>
        </tr>
        <tr class="level3">
            <td>99234</td>
            <td>Chest XRay</td>
            <td>1</td>
            <td>20.00</td>
            <td>40.00</td>
            <td>10.00</td>
        </tr>
        <tr class="level3">
            <td>99234</td>
            <td>Chest XRay</td>
            <td>1</td>
            <td>20.00</td>
            <td>40.00</td>
            <td>10.00</td>
        </tr>
        <tr class="level3">
            <td>99234</td>
            <td>Chest XRay</td>
            <td>1</td>
            <td>20.00</td>
            <td>40.00</td>
            <td>10.00</td>
        </tr>
        <tr class="level1">
            <td colspan="6">
                <i class="doctor"></i>John Dorian
            </td>
        </tr>
        <tr class="level2">
            <td colspan="6">
                <i class="address"></i>Southern Hills Hospital
            </td>
        </tr>
        <tr class="level3">
            <td>99234</td>
            <td>Chest XRay</td>
            <td>1</td>
            <td>20.00</td>
            <td>40.00</td>
            <td>10.00</td>
        </tr>
        <tr class="level3">
            <td>99234</td>
            <td>Chest XRay</td>
            <td>1</td>
            <td>20.00</td>
            <td>40.00</td>
            <td>10.00</td>
        </tr>
        <tr class="level3">
            <td>99234</td>
            <td>Chest XRay</td>
            <td>1</td>
            <td>20.00</td>
            <td>40.00</td>
            <td>10.00</td>
        </tr>
    </tbody>
</table> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-25T00:37:44.570

新信息曝光，这个问题不再适用。谢谢。

# linux - 什么时候在linux中打开一个端口？

> ID：14513202
> 
> 赞同：1
> 
> 时间：2013-01-25T00:11:28.650
> 
> 标签：linux, process, port, bind

我正在使用 netstat 来显示打开的端口，但我想知道何时打开端口是仅在进程中调用 bind() 时，还是它已经可用并且绑定只是更改其状态以进行侦听。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T00:15:39.753

系统中有最大端口数（取决于操作系统，但通常为 65535 或 (2^16)-1），有`privileged`端口 (<1024) 和`non-privileged`端口 (>1024)。特权端口需要root权限才能使用它们，非特权允许用户进程绑定。但是当您调用时，端口被认为是打开的或使用的`bind()`。[您可以在此位置](http://www.gnu.org/software/libc/manual/html_node/Sockets.html)阅读有关套接字的一般信息。

# php - 正则表达式模式返回一个空数组

> ID：14513211
> 
> 赞同：0
> 
> 时间：2013-01-25T00:12:33.607
> 
> 标签：php, wordpress, preg-match, jwplayer, preg-match-all

我想要完成的是一个相当简单的正则表达式模式，它最终会抓取页面/自定义帖子类型的内容。暂时我只是检查一个单行字符串。

以下 RegEx 模式有效（复制并粘贴到 RegExr - [http://regexr.com](http://regexr.com)）。

```
$pattern = "/\[jwplayer(.+?)?\]?]/g"; 
$videoTest = "[jwplayer config=\"top_10_videos\" mediaid=\"107\"]";
preg_match($videoTest, $pattern, $matches);
print_r($matches);` 
```

但是输出如下：

```
Array
(
    [0] => Array
        (
        )
) 
```

我已经测试了其他正则表达式模式（简单的模式），并且我已经搜索了网络（包括堆栈溢出）来寻找这个特定问题的答案，但没有成功解决这个问题。上面的 php 代码已放置在 WordPress v 3.5 的 functions.php 中，如果该信息有帮助并使用“wp_ajax”钩子调用。ajax 挂钩按预期工作。

任何人都可以提供的任何帮助都会很棒！

谢谢，尼克

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T00:23:55.887

[PHP 中不](http://php.net/manual/en/reference.pcre.pattern.modifiers.php)使用`g`修饰符。改为使用。[`preg_match_all()`](http://php.net/preg_match_all)

此外，参数[`preg_match`](http://php.net/preg_match)的顺序错误。参数需要按以下顺序：

```
preg_match($pattern, $videoTest, $matches); 
```

阅读[正则表达式文档](http://php.net/manual/en/book.pcre.php)。

一种使用正则表达式从字符串中检索内容的更强大的方法，它尽可能具体。这可以防止畸形的东西通过。例如：

```
function getJQPlayer($string) {
    $pattern = '/\[jwplayer(?:\s+[\w\d]+=(["\'])[\w\d]+\\1)*\]/';
    preg_match_all($pattern, $string, $matches, PREG_SET_ORDER);
    foreach ($matches as & $match) {
        $match = array_shift($match);
    }
    return $matches ?: FALSE;
}
$videoTest  = "[jwplayer config=\"top_10_videos\" mediaid=\"107\"]";
$videoTest .= ",[jwplayer config=\"bottom_10_videos\" mediaid=\"108\"]";
echo '<pre>', print_r(getJQPlayer($videoTest), true); 
```

# ios - 第一次尝试时 NSURLConnection 超时后续尝试工作

> ID：14513212
> 
> 赞同：1
> 
> 时间：2013-01-25T00:12:36.290
> 
> 标签：ios, nsurlconnection

我在调用 REST 服务时遇到 NSURL 连接问题。

问题是它可以通过浏览器正常工作或使用 RESTClient 来检查它，但在设备（iOS5、iOS6、模拟器）上，有时它第一次无法正常工作。超时后，它会在随后的时间工作。

它真的开始让我发疯了。

调用 this 的 main 函数通过 GCD 调用，然后在主线程上处理结果代码。200 = 验证成功，!200 = 当然失败（超时等，通过返回的整数处理）。

如前所述，问题是第一次调用它只是超时，没有返回任何内容。如果完成得足够快，后续调用往往会起作用，但如果让它等待一两分钟，则连接会在尝试访问它时超时。

我无法通过浏览器或 RESTClient 复制此行为。似乎只是iOS。我要和它一起吃香蕉。

这是进行调用的主要功能

```
-(int)AuthUser:(ApiUser*)user{

// Authenticates the Users
// Build the URL
NSString *accessAppendix = @"/api/user/authenticate";
NSString *accessURL = [NSString stringWithFormat:@"%@%@",self.apiParameters.rootServer, accessAppendix];
NSURL *accessJSONURL= [[NSURL alloc] initWithString:accessURL];

// Setup HTTP Request Headers
NSMutableURLRequest *urlRequest = [self BuildApiUrlRequest:accessJSONURL];

// Setup dictionaries
// For posting login data

NSDictionary *Application = [[NSDictionary alloc]
                             initWithObjectsAndKeys:@"XXXXXXXXX",
                             @"Application", nil];

NSDictionary *User = [[NSDictionary alloc]
                      initWithObjectsAndKeys:
                      user.UserId,@"UserId",
                      user.Password,@"Password",
                      user.Type,@"Type",nil];

NSDictionary *Office = [[NSDictionary alloc]
                        initWithObjectsAndKeys:
                        user.office,@"Number", nil];

NSDictionary *dictionary = [[NSDictionary alloc] initWithObjectsAndKeys:
                            User,@"User",
                            Application,@"Application",
                            Office,@"Office",nil];

// Setup Error handler
NSError *jError;

// Serialise JSON String
NSData* jsonData = [NSJSONSerialization dataWithJSONObject:dictionary options:NSJSONReadingMutableContainers error:&jError];

// attach to HTTP Body
[urlRequest setHTTPBody:jsonData];

// Log URL Body
NSLog(@"Data %@",[[NSString alloc] initWithData:jsonData encoding:NSUTF8StringEncoding]);
NSLog(@"Data length: %u",[jsonData length]);    

// set Content Length
// This doesn't seem to be required really
NSString *msgLength = [NSString stringWithFormat:@"%d", [jsonData length]];
[urlRequest addValue: msgLength forHTTPHeaderField:@"Content-Length"];

NSURLResponse* response;
NSError* error = nil;

// fire Request        
NSData* result = [NSURLConnection sendSynchronousRequest:urlRequest returningResponse:&response error:&error];

NSString *responseBody = [[NSString alloc] initWithData:result encoding:NSUTF8StringEncoding];
NSLog(@"URL Response: %@",responseBody);
NSHTTPURLResponse *httpResponse = (NSHTTPURLResponse *)response;
NSLog(@"HttpResponse: %d",[httpResponse statusCode]);

return [httpResponse statusCode];
} 
```

这是构建 API URL 请求函数。

```
// Builds API URL Request
-(NSMutableURLRequest*) BuildApiUrlRequest:(NSURL*)jURL
{
NSMutableURLRequest *urlRequest = [NSMutableURLRequest requestWithURL:jURL];
[urlRequest setHTTPMethod:@"POST"];
NSString *authHeader = [@"Basic " stringByAppendingFormat:@"%@", self.apiParameters.rootCredentials];
[urlRequest addValue:authHeader forHTTPHeaderField:@"Authorization"];
[urlRequest setValue:@"application/json" forHTTPHeaderField:@"Accept"];
[urlRequest setValue:@"application/json" forHTTPHeaderField:@"Content-Type"];
[urlRequest setTimeoutInterval:10];
urlRequest.cachePolicy = NSURLRequestReloadIgnoringLocalCacheData;

return urlRequest;
} 
```

想法？它只返回响应代码 0 并在失败时超时。当它工作时，它工作得很好，并返回 200。

**更新**：这是从视图控制器调用它的方式（在按钮按下时）：

```
dispatch_async( dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{

        int returnNumber = [app.pApi AuthUser:newUser];

        dispatch_async( dispatch_get_main_queue(), ^{
            [self loginResultHandler:returnNumber];
        });
    }); 
```

这样做是因为我想将 API 类与控制类分开。

# vim - 如何在 Vim 中关闭 Omni Complete？

> ID：14513218
> 
> 赞同：4
> 
> 时间：2013-01-25T00:13:25.847
> 
> 标签：vim

添加`filetype plugin on`到我的 .vimrc 中打开了 vim 的自动完成功能。在您可以使用移动而不调用自动完成之前，这会增加一点延迟。如何在不删除 pyflakes 集成所需的那行代码的情况下关闭它。

2016 年编辑：尽管在这个帖子中提出了所有无用的建议，但问题最终在一年后的 StackOverflow 上得到了回答（由 Ingo Karkat 提供）。

[在vim中禁用omnicomplete或ftplugin或其他东西](https://stackoverflow.com/questions/24931088/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-25T07:42:59.743

Vim 没有自动完成功能；任何完成都必须使用`<C-n>`或`<C-x>`组合显式触发。

您所体验的可能是一个插件，可能与 Python 有关。检查您已安装的内容，阅读其文档，并按照那里的说明将其关闭。它可能是用一些自动命令实现的，可以通过 关闭`:autocmd! AutoCmdGroupNameHere`，但应该有一个配置变量。

# php - 数据库更新和重定向 (CakePHP)

> ID：14513220
> 
> 赞同：1
> 
> 时间：2013-01-25T00:13:29.963
> 
> 标签：php, cakephp

我在 CakePHP 的控制器中向我的 MySQL 表中添加了一个新列。然后我重定向到一个页面，该页面显示表中每一列中包含的信息。但是，重定向时，我在新列上收到未定义的索引错误。刷新后，页面会正确识别该列。

我正在使用以下代码从表中检索列名： SHOW COLUMNS IN entries

我的“索引”控制器执行此查询，将列名发送到视图，然后正常绘制数据。

# python - 将 Numpy 3D 数组乘以 1D 数组

> ID：14513222
> 
> 赞同：6
> 
> 时间：2013-01-25T00:13:33.143
> 
> 标签：python, arrays, numpy, multidimensional-array, array-broadcasting

我正在尝试将 3D 数组乘以 1D 数组，这样沿第 3（深度：d）维度的每个 2D 数组的计算方式如下：

`1D_array[d]*2D_array`

我最终得到一个看起来像的数组，比如：

```
[[
[1,1]
[1,1]]
[
[2,2]
[2,2]]
[
[3,3]
[3,3]]] 
```

这将是正确地将 np.ones((3,2,2)) 与 [1,2,3] 相乘的结果。

我已经尝试了一段时间，无论我做什么我都不能得到这个结果，只是主题的变化。我该如何正确地做到这一点？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2021-08-03T16:06:47.630

让我们假设`b=np.ones((3,2,2))`和`a=np.array([1,2,3])`。我真的很喜欢@Alok 的答案，它使用了`a[:, None, None] * b`肯定可以解决您的问题的简单方法。我不喜欢这个公式的地方是它非常特定于维度。我的意思是它只能与 3 维数组一起使用，这在我的问题中并非如此，其中 b 可以是 1D 或具有完全相同长度的 3D 数组`axis 0`。因此，我找到了一种方法来解决我的问题：

```
broad_a = np.broadcast_to(a, b.T.shape).T
result = broad_a * b
print(result)
[[
[1,1]
[1,1]]
[
[2,2]
[2,2]]
[
[3,3]
[3,3]]] 
```

还为您的案例提供预期的结果。

# ruby-on-rails - 连接模型的路径助手

> ID：14513223
> 
> 赞同：0
> 
> 时间：2013-01-25T00:13:36.390
> 
> 标签：ruby-on-rails, routing

我已经在这里阅读了相关问题：http://stackoverflow.com/questions/7013658/rails-3-resource-routing-for-join-models

我想知道我怎样才能有一个很好的助手，它接受一个连接模型的实例并返回一个“嵌套”路径。

前任。许多人`users`有许多人`projects`，所以有一个`projects_users`加入。

我希望能够做类似的事情：

`projects_users_path(ProjectUser.first)`

并得到：

`/projects/2/users/3`

代替：

`/projectsusers/1`

我可以用这个做一些路由魔法，还是我应该制作自己的辅助方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T00:22:36.093

检查 Rails 路由指南[http://guides.rubyonrails.org/routing.html#nested-resources上的嵌套资源部分](http://guides.rubyonrails.org/routing.html#nested-resources)

有一些你想要的例子

# r - 在 Mac/Linux 上从 R 连接到 MS SQL Server

> ID：14513224
> 
> 赞同：13
> 
> 时间：2013-01-25T00:13:45.143
> 
> 标签：r, rjdbc

我正在尝试从 Mac/Linux 上的 R 连接到 Microsoft SQL Server，但我遇到了 RJDBC 问题。当我下载了 Microsoft 的驱动程序和 JTDS 时，以下行均不起作用：

```
library(RJDBC)

drv <- JDBC("com.microsoft.sqlserver.jdbc.SQLServerDriver",
            "/Users/victor/Downloads/sqljdbc_3.0/enu/sqljdbc4.jar") 

drv1 <- JDBC('net.sourceforge.jtds.jdbc.Driver',
           "/Users/victor/Downloads/jtds-1/jtds-1.3.0.jar") 
```

每个都返回以下错误消息：

```
Error in .jfindClass(as.character(driverClass)[1]) : class not found 
```

我怀疑问题可能与错误的 Java 版本有关：我的默认 java 是

```
$ java -version
java version "1.7.0_11"
Java(TM) SE Runtime Environment (build 1.7.0_11-b21)
Java HotSpot(TM) 64-Bit Server VM (build 23.6-b04, mixed mode) 
```

但我的机器上也安装了 Java 1.6。我安装了 SquirrelSQL，它使用 JTDS 驱动程序连接到 MS SQL Server 没有任何问题；SquirrelSQL 运行的 Java 版本是 1.7.0.11。

我运行`R CMD javareconf`了以下结果：

```
$ R CMD javareconf
Java interpreter : /usr/bin/java
Java version     : 1.7.0_11
Java home path   : /Library/Java/JavaVirtualMachines/jdk1.7.0_11.jdk/Contents/Home/jre
Java compiler    : /usr/bin/javac
Java headers gen.: /usr/bin/javah
Java archive tool: /usr/bin/jar
Java library path: 
JNI linker flags : -framework JavaVM
JNI cpp flags    : -I$(JAVA_HOME)/include

Updating Java configuration in /Library/Frameworks/R.framework/Resources
Done. 
```

并再次删除/安装了 RJDBC 和 rJava 包，但仍然没有任何效果。

我想我现在被困住了，因为我对 Java/RJDBC 及其交互不是很熟悉。搜索google发现有几个人有类似的问题但没有解决方案。

任何关于如何使 JDBC 行为的提示，或任何其他从 R 连接到 MS SQL Server 的方式，将不胜感激！

**更新 1**。好吧，第一条语句现在似乎可以工作了——我正在建立一个连接，并且可以毫无问题地查询数据库。不确定是什么解决了问题 - 可能我需要重新启动我的 mac/R 会话。第二条语句仍然不起作用，并显示相同的错误消息。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-19T15:01:06.897

我一直在这方面挣扎了一段时间。这是我发现的。

1.  从[这里](http://www.microsoft.com/en-us/download/details.aspx?displaylang=en&id=11774)下载——用于 SQL 服务器的 Microsoft JDBC 驱动程序
2.  解压缩文件，您将在其中找到`sqljdbc4.jar`.
3.  利用：

    ```
    drv <- JDBC("com.microsoft.sqlserver.jdbc.SQLServerDriver", "<wherever sqljdbc4.jar is>") 
    ```

这应该有效。

如果我是对的，想法是对于函数中的`PATH`变量，`drv`需要指定 JDBC 驱动程序所在的 PATH（所以如果没有，则首先下载它）。否则，将收到常见`class not find`错误。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-02-26T04:36:21.073

以下代码实现了从 Mac OS x 连接到 R 的目标。[在此处](http://www.microsoft.com/en-us/download/details.aspx?displaylang=en&id=11774)从 Microsoft 下载 Microsoft JDBC 驱动程序

[链接到 Github 中的 Gist/代码](https://gist.github.com/johndacosta/9223384)

```
# install.packages("RJDBC",dep=TRUE)
library(RJDBC)
drv <- JDBC("com.microsoft.sqlserver.jdbc.SQLServerDriver" , "/Users/johndacosta/Downloads/sqljdbc_4.0/enu/sqljdbc4.jar" ,identifier.quote="`")
conn <- dbConnect(drv, "jdbc:sqlserver://192.172.1.210:55158;databaseName=master", "sa", "password")
d <- dbGetQuery(conn, "select * from sys.databases where database_id <= 4 ")
summary(d) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-08-09T19:42:15.590

我在 Linux 上使用 jtds-1.3.1 时遇到了这个问题。当我尝试切换到 jtds-1.2.7 时问题消失了。jtds-1.3.* 中似乎有些东西使它与 RJDBC 不兼容。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-06-15T19:02:56.077

我有同样的问题。这是一个`jTDS`解决方案：

1.  下载[jTDS 1.2.8](http://sourceforge.net/projects/jtds/files/jtds/1.2.8/jtds-1.2.8-dist.zip/download)并解压。说它保存在`~/Downloads/jtds-1.2.8-dist/jtds-1.2.8.jar`. **注意：其他版本可能无法使用！**
2.  从`R`，设置驱动程序：`drv <- JDBC("net.sourceforge.jtds.jdbc.Driver", "~/Downloads/jtds-1.2.8-dist/jtds-1.2.8.jar")`。
3.  设置连接对象：`conn <- dbConnect(drv, "jdbc:jtds:sqlserver://servername:port;DatabaseName=databasename", domain="windows domain", user="user", password="pwd")`。

在这里，这个领域`domain`把事情搞砸了。你不能把`domain\username`作为你的`user`. 您必须根据[jTDS 驱动程序实现](http://jtds.sourceforge.net/faq.html#driverImplementation)分别定义它们。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-31T19:18:07.493

```
 library(RJDBC) 
 cp <- c
 ( 
      "<usr path>/jdbc/mdb/log4j.jar", 
      "<usr path>/jdbc/mdb/commons_lang.jar", 
      "<usr path>/jdbc/mdb/commons_logging.jar" 
  ) 

 .jinit(classpath=cp) 

 drv <- JDBC("com.microsoft.sqlserver.jdbc.SQLServerDriver",
        "/Users/victor/Downloads/sqljdbc_3.0/enu/sqljdbc4.jar") 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-02-02T07:23:10.953

我之前尝试使用 RJDBC 连接到 Cassandra 时发生了同样的错误，通过将 Cassandra JDBC 依赖项放入您的 JAVA ClassPath 中解决了这个错误。

看到这个[答案](https://stackoverflow.com/a/28272577/935940)：

# ruby-on-rails - ruby rails 教程 css

> ID：14513225
> 
> 赞同：0
> 
> 时间：2013-01-25T00:13:48.107
> 
> 标签：ruby-on-rails

伙计们，我一直在关注 ruby​​ 教程，在这一步中，我正在尝试向页面添加一些 CSS。

```
ActionController::RoutingError (No route matches [GET] "/assets/blueprint/print.css"): 
```

我相信我的 routes.rb 文件搞砸了：

```
FirstApp::Application.routes.draw do
  get "pages/home"
  get "pages/contact"
  get "pages/about"
  root :to => "home#index" 
```

application.html.erb 文件：

```
<!DOCTYPE html>
<html>
<head>
    <title><%= title %></title>

    <%= csrf_meta_tags %>
    <%= stylesheet_link_tag 'blueprint/screen', :media => 'screen' %>
    <%= stylesheet_link_tag 'blueprint/print', :media => 'print' %>
</head>
<body>

<%= yield %>

</body>
</html> 
```

服务器上的目录结构：

```
first_app% ls public 
404.html  422.html  500.html  downloads  favicon.ico  index.html.backup  master.zip  robots.txt  stylesheets

[vasiliy@vbweb]~/ruby/first_app% ls public/stylesheets 
blueprint

[vasiliy@vbweb]~/ruby/first_app% ls public/stylesheets/blueprint 
ie.css  plugins  print.css  screen.css  src 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T00:29:26.417

您应该检查您正在遵循的教程，但似乎您遵循的是稍旧的教程（在 Rails 3.1 中添加资产管道之前）

所以事情有点不同。

现在预计样式表将存在于`app/assets/stylesheets`

如果您只是移动`blueprint/screen.css`并`blueprint/print.css`进入该目录，它应该开始工作。

* * *

但是......您可能想看看资产管道是如何工作的，因为它非常酷。

看看，`application.css`你会看到几行像

```
/*
*= require_tree .
*= require_self
*/ 
```

这将需要样式表目录中的所有文件，因此您只需一行`stylesheet_link_tag :application`即可完成所有文件。

但是，这不会执行您尝试使用的打印/屏幕媒体设置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T00:29:20.083

我认为您的路线文件很好。

stylesheet_link_tag 引用是 Rails 的“视图助手”，它为您提供位于 assets/ 目录下的资产的有效路径。这允许您利用 Rails“资产管道”（值得谷歌搜索），它将连接、缩小和压缩生产中的所有 JS 和 CSS 资产。另一方面，在开发中，它会将它们保留为单独的资产，以便您可以调试事物。

public/ 文件夹不包含 Asset Pipeline 资产 - 相反，这些只是被推到 webroot 下的文件。这些可以照常引用：

```
<link rel="stylesheet" href="/blueprint/print"> 
```

但是，您几乎肯定希望将它们放入 app/assets 目录，以便在生产中正确处理它们。我猜 stylesheet_link_tag 用来引用 href='application'，对吧？因此，将您的 css 放在 assets/stylesheets 下，并仔细检查 assets/stylesheets/application.css 是否为“require_tree”或类似内容。然后，如果您摆脱这些 stylesheet_link_tag 引用并将它们替换为原始引用，则应该没问题。

# c - C 编译器如何计算如何编译 f(enum)？

> ID：14513229
> 
> 赞同：0
> 
> 时间：2013-01-25T00:14:11.723
> 
> 标签：c, enums

假设我有一个 C 头文件（对于某些库），它定义了一个枚举和一个将此类枚举作为参数的函数。我可以编写自己的代码，其中包含该头文件并链接库，但编译器如何知道函数实际期望的 int 类型？如果我理解得很好，该标准不需要特定的方法来确定枚举的基础是什么类型，所以......？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T00:16:30.783

调用该函数的代码和实现该函数的代码大概都与该枚举的声明共享一个公共标头。由于它们相同，因此编译器会生成匹配的代码。

如果你混合和匹配编译器，在这种情况下你很可能会遇到互操作性问题。

# c# - Process.StandardOutput 流是如何存储的？

> ID：14513231
> 
> 赞同：0
> 
> 时间：2013-01-25T00:14:17.983
> 
> 标签：c#, process, stream

我是 Streams 的新手，我正在尝试编写一个函数来重定向进程的 StandardOutput 并返回 StandardOutput Stream，以便它可以在其他地方使用。当我在方法中返回 Process.StandardOutput Stream 时，该 Stream 是如何存储的？它是否只存在于某个地方的内存中，直到被消耗掉？它有最大尺寸吗？

这是我到目前为止的一些示例代码：

```
 public Stream GetStdOut(string file)
    {
        _process = new Process(file);
        _process.StartInfo.UseShellExecute = false;
        _process.StartInfo.RedirectStandardOutput = true;
        _process.Start();
        return _process.StandardOutput;
    }

    public bool CompareStreams()
    {
        Stream s1 = GetStdOut("somefile.exe");
        Stream s2 = GetStdOut("anotherfile.exe");

        using (StreamReader sr1 = new StreamReader(s1))
        using (StreamReader sr2 = new StreamReader(s2))
        {
            string line_a, line_b;
            while ((line_a = sr1.ReadLine()) != null &&
                   (line_b = sr2.ReadLine()) != null)
            {
                if (line_a != line_b)
                    return false;
            }
            return true;
        }
    } 
```

那么在 CompareStreams() 中，当我为 Stream s2 生成数据时，我是否需要担心有多少数据与 Stream s1 相关联？或者这真的不重要吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T00:24:10.957

Stream 对象不会立即填充所有标准输出数据。

当进程运行时，它们写入缓冲区，当缓冲区已满时，它们将冻结，直到您从缓冲区读取。

当您从缓冲区读取数据时，这会为进程清除空间以写入更多数据。

# javascript - jQuery var 返回对象

> ID：14513239
> 
> 赞同：2
> 
> 时间：2013-01-25T00:15:24.067
> 
> 标签：javascript, jquery, variables, object

我有一个名为的变量`loopNum`，它作为控制台中的对象返回。其他变量按预期返回。谁能解释为什么会这样？谢谢

**脚本**

```
 // stores how many carousels there are
    var carouselNum = $('.carousella').length;

    // stores the product of number of carousels times the increment value
    var loopNum = $((carouselNum - 2) * -183);

    console.log('loopNum = ' + loopNum);
    console.log('carouselNum = ' + carouselNum); 
```

**安慰**

```
loopNum = [object Object] 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-25T00:16:43.437

不要在分配变量后将其`carouselNum`包装到 jQuery 包装器中。`$()`试试这个：

```
var carouselNum = $('.carousella').length;

// stores the product of number of carousels times the increment value
var loopNum = (carouselNum - 2) * -183; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-25T00:17:39.100

您在这里不需要选择器：

```
 var loopNum = $((carouselNum - 2) * -183); 
```

它应该只是

```
var loopNum = ((carousel - 2) * -183) 
```

# c++ - 一次显示多个菜单，工作流程

> ID：14513242
> 
> 赞同：0
> 
> 时间：2013-01-25T00:15:34.063
> 
> 标签：c++, ncurses

我正在做一个玩具项目，实现流行的纸牌游戏 Dominion 的桌面客户端。我认为使用 ncurses 库在终端中显示 UI 会很有趣。

我需要显示玩家的手牌、他们玩过的牌以及他们可以购买的牌等内容。我设想将这些显示为 ncurses 菜单，内嵌在屏幕上。

我想不通的是如何将焦点传达给用户。例如，

```
|          |  |               |
|  Copper  |  |  >Adventurer< |
|  Copper  |  |   Chapel      |
|  Copper  |  |   Moat        |
| >Copper< |  |   Thief       |
|  Copper  |  |               |
|          |  |               |
|          |  |               | 
```

当菜单可见时，已填充的菜单会激活光标（由 > < 条目表示）。我希望能够一次激活一个菜单，方法是使用一个可见的或其他特殊的光标，我可以围绕该光标构建工作流程。

我怎样才能做到这一点？在最高级别，我想要在屏幕上显示项目列表，用户可以根据我设置的逻辑进行选择。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T01:11:31.377

ncurses 允许您使用`set_menu_fore`,`set_menu_back`和`set_menu_grey`. 这是我走的路线。我的另一个想法（但后来因为记账太多而决定反对）是使用`wattron`和重新着色菜单窗口`wattroff`。

# java - 从代码访问 XML 枚举值

> ID：14513246
> 
> 赞同：4
> 
> 时间：2013-01-25T00:15:53.907
> 
> 标签：java, android, enums, declare-styleable

我已经声明了一个带有枚举值的可样式属性，如下所示：

```
<declare-styleable name="TileLayout">
    <attr name="rotation" format="integer">
        <enum name="top" value="0"/>
        <enum name="left" value="1"/>
        <enum name="right" value="2"/>
        <enum name="bottom" value="3"/>
    </attr>
</declare-styleable> 
```

现在我想在我的代码中引用那些，最好是在一个`switch`语句中。

除了将枚举中的值硬编码到我的代码中之外，我找不到任何方法来做到这一点（首先破坏了枚举的一半目的）。

有谁知道如何做到这一点？

### 编辑

根据@CommonsWare 的回答，尝试了这个：

资源.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <integer name="rotation_top">0</integer>
</resources> 
```

attrs.xml：

```
<resources>
    <declare-styleable name="TileLayout">
        <attr name="rotation" format="integer">
            <enum name="top" value="@integer/rotation_top"/>
            <enum name="left" value="1"/>
            <enum name="right" value="2"/>
            <enum name="bottom" value="3"/>
        </attr>
    </declare-styleable>
</resources> 
```

这导致`top`不再是`rotation`.

# xaml - 如何进行数据绑定？

> ID：14513248
> 
> 赞同：0
> 
> 时间：2013-01-25T00:16:26.337
> 
> 标签：xaml, windows-8, winrt-xaml

我正在尝试在 XAML 中进行一些简单的数据绑定，但它对我不起作用，我不知道为什么。

我有这个网格视图

```
 <GridView Name="test2">
            <GridView.ItemTemplate>
                <DataTemplate>
                    <StackPanel>
                        <TextBlock Text="{Binding Header}" FontWeight="Bold" Style="{StaticResource ItemTextStyle}"/>
                        <TextBlock Text="{Binding Item}" FontWeight="Bold" Style="{StaticResource ItemTextStyle}"/>
                    </StackPanel>
                </DataTemplate>
            </GridView.ItemTemplate>
            <GridView.ItemsPanel>
                <ItemsPanelTemplate>
                    <StackPanel Orientation="Horizontal"/>
                </ItemsPanelTemplate>
            </GridView.ItemsPanel>
        </GridView> 
```

我现在正在尝试绑定。我试图在 XMAL 中（它崩溃）和通过 C# 代码（什么都没有发生）

在构造函数后面的代码中，我尝试这样做

```
 public MyPage()
        {
            this.InitializeComponent();

            Test t = new Test
            {
                Header = "Header 1",
                Item = "Item 1",

            };

            List<Test> ts = new List<Test>();
            ts.Add(t);
            test2.DataContext = t;

        } 
```

我也尝试将它传递给一个集合。

正如我所说，我根本无法使用 XMAL 方式来完成它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T00:29:39.740

我相信您需要将`ItemsSource`GridView 绑定到集合。

尝试按照以下步骤操作：

1.  在 上创建属性`MyPage`：`public List<Test> Tests { get; set; }`

2.  替换`test2.DataContext = t;`为`Tests = ts;`

3.  在您的 XAML 中，添加一个`ItemsSource`属性，如下所示：

    ```
    <GridView Name="test2" ItemsSource="{Binding Tests}"> 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T04:22:06.850

使其工作的最低要求是添加以下行：

```
test2.ItemsSource = ts; 
```

但是你有一些事情可能会在以后给你带来问题。

1.  该`DataContext`设置在这里没有多大意义，您是说您要将**单个**项目作为您绑定到网格的元素的上下文。通常，我会说 DataContext 将是一个包含您的测试集合的类 - 例如，这将是您页面的 DataContext，那么您将拥有

    <GridView Name="test2" ItemsSource="{Binding Tests}">

    where`Tests`是您用作`DataContext`. 您想让 DataContext 成为您在代码中设置的唯一内容，然后其他所有内容都来自绑定。

2.  `List`您可能希望使用代替`ObservableCollection`，以便在从集合中添加和删除项目时自动通知数据绑定引擎。

# javascript - 如果链接到 PDF，JavaScript 解析 href 并添加 onclick

> ID：14513249
> 
> 赞同：0
> 
> 时间：2013-01-25T00:16:26.823
> 
> 标签：javascript

我想解析文档中的所有 HTML，如果有指向 PDF 的链接，请添加一个 onClick 事件。

例子：

```
<a href="/files/report.pdf">Report</a> 
```

变成：

```
<a href="/files/report.pdf" onclick="javascript: _gaq.push(['_trackPageview', '/files/report.pdf']);">Report</a> 
```

以下代码适用于 Chrome/Firefox，但不适用于 IE9：

```
function AddGaqPush()
    {
        var links = document.getElementsByTagName("a");

        for (var i=0; i < links.length; i++)
        {
            if (links[i].href.indexOf(".pdf") !== -1)
            {
                links[i].setAttribute("onclick", "javascript: _gaq.push(['_trackPageview', '" + links[i].href + "']);");
            }
        }
    } 
```

编辑添加：IE设置：浏览器模式：IE9；文档模式：IE9标准

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T00:26:58.307

使用jQuery，你不会被浏览器限制（尤其是IE）

```
$('a[href~=.pdf]').click(function(e) {
    // your click action
    // e is a jQuery event
    // your <a> element is the variable this
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-25T00:24:18.007

不添加属性，而是附加事件处理程序

```
if (links[i].attachEvent){
    links[i].attachEvent('onclick', tpv);
}
else{
    links[i].addEventListener('click', tpv);
}
function tpv(){
    _gaq.push(['_trackPageview', '" + this.href + "']);
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-11-11T01:08:20.997

完成此操作的 jQuery 语句如下所示：

```
$('a[href*=".pdf"]').click(function(e) {
    _gaq.push(['_trackPageview', $(this).attr('href')]);
}); 
```

我喜欢 Nannuo Lei 对这个问题的回答，但解决方案不是很准确/完整，我还没有足够的声誉来评论那个帖子。

您需要在要搜索的字符串周围加上引号，并且 *= 选择器允许您识别较大字符串的子字符串，而不仅仅是 ~= 选择器将完成的由空格分隔的单词。可以在此处找到有关 jQuery 选择器的更多详细信息：[https ://api.jquery.com/category/selectors/](https://api.jquery.com/category/selectors/)

# google-maps-api-3 - 谷歌地图 v3——为什么这些地图方法未定义？

> ID：14513253
> 
> 赞同：0
> 
> 时间：2013-01-25T00:16:39.800
> 
> 标签：google-maps-api-3

我是地图 API 的 V3 版本的新手，过去曾使用过 V2。因此，我在尝试将我们的应用程序从 V2 移植到 V3 时遇到了一些地图创建问题。

我现在正在创建这样的地图，它似乎可以工作——我在变量中返回了一个地图对象`m_oGoogleMap`：

```
 m_oGoogleMap = new google.maps.Map(
    $('Map'), {
        scaleControl: true,
        scaleControlOptions: {
            position: google.maps.ControlPosition.LEFT_TOP
        },          
        panControl: true,
        panControlOptions: {
            position: google.maps.ControlPosition.TOP_LEFT
        },
        mapTypeId: google.maps.MapTypeId.ROADMAP,
        zoom: 8, 
        center: new google.maps.LatLng(LAT, LNG)
    }); 
```

...但是，在这样做之后，我无法在没有收到未定义错误的情况下调用诸如 getBounds() 或 getProjection() 之类的方法——在调试时，我可以在 Chrome 监视表达式区域中*看到*这些方法的存根，但在那里调用它们（或页面本身）产生未定义的错误。我是否错过了如何在 V3 中创建和初始化地图？

地图对象上的其他方法，例如`getDiv()`，工作得很好。所以我不确定我是否有一个半初始化的对象或可能发生什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T00:55:10.783

地图的创建是一个异步过程，在此过程完成之前无法访问某些方法/属性。在访问这些方法之前等待类似事件`idle`或事件。`tilesloaded`

# php - yii 框架中的 500 内部服务器错误

> ID：14513261
> 
> 赞同：0
> 
> 时间：2013-01-25T00:17:37.753
> 
> 标签：php, yii

![在此处输入图像描述](../Images/a704d71418045a1acdff5f2263035f94.png)我的 Yii 框架有问题，一切都在本地运行良好，但是当我尝试将我的应用程序移动到另一个系统时，一些视图显示诸如“未定义变量”之类的错误。任何人都知道这个问题。

我发现了一些与 yii 类似的问题，但没有一个为我提供了正确的答案。

## 编辑

实际上我有 2 个下拉框，第一个从模型中获取值，如果我们从第一个下拉列表中选择 1，它将过滤结果并显示在第二个下拉列表（ajax 调用）中，两个下拉框都使用不同的控制器操作

在 firezilla 中，我收到请求的 500 内部服务器错误，下图包含日志作为响应。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T00:22:15.433

有关未定义变量的错误可能总是存在，但由于[`error_reporting`](http://php.net/manual/en/errorfunc.configuration.php#ini.error-reporting)和[`display_errors`](http://php.net/manual/en/errorfunc.configuration.php#ini.display-errors)配置指令的值不太严格而未显示。

未定义的变量通常不会导致 500 内部服务器错误。有关这些错误的详细信息，请查阅 Web 服务器的日志文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T10:27:22.660

如果您在本地开发机器上使用 PHP 5.2 而其他系统使用 5.3，则可能会发生这种情况。在 5.3 中，如果有一些未定义的变量（在您的情况下为 $result），PHP 会**默认**向您发出通知。

几年前，当我将 Yii 项目从 5.2 迁移到 5.3 时，我得到了很多这样的东西。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-04-22T03:35:22.563

我有完全相同的问题。我的 ajax 网站在 localhost 中完美运行。但是当我将它上传到服务器时，我意识到无法返回 500 内部错误的 ajax 请求。当我单击 url 时，它会显示未定义的变量。解决方法：查看ajax请求的url：之前：

```
echo CHtml::textField('idsearch', '', array(
    'onKeyUp' => CHtml::ajax(
            array(
                'type' => 'POST',
                'dataType' => 'html',
                'data' => array(
                    'id' => 'js:idsearch.value'),
                'update' => '#dvfeeform',
                'url' => CController::createUrl('student/searchajax'),
    ))
)); 
```

将网址编辑为：

```
'url' => Yii::app()->createUrl('student/searchajax'), 
```

它工作得很好。希望有一天它可以帮助某人

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-25T02:45:07.537

我已经将一个空数组 $result 从控制器传递到视图，现在它工作正常。

但到现在为止，我无法弄清楚为什么它在我的本地主机上运行良好，而不是在其他系统中运行良好。

# asp.net-mvc - Razor MVC 3，ViewBag 中的 Dropdownlist - 帮助理解这段代码

> ID：14513264
> 
> 赞同：1
> 
> 时间：2013-01-25T00:18:03.927
> 
> 标签：asp.net-mvc, razor, viewbag, html-select

我是 MVC 的新手，我无法理解一段代码。我创建了一个新控制器以及所有 CRUD 方法和视图 - 由 Visual Studio 自动生成 - 我无法理解代码的一部分。

看，在控制器中，它从数据库中设置了一个 SelectList 并将其放入 ViewBag 中，如下所示： Controller

```
public ActionResult Create()
{    
    ViewBag.TypeID = new SelectList(db.PlacementTypes, "TypeID", "Description");
    return View();
} 
```

在视图中是这样的：

```
<div class="editor-label">
    @Html.LabelFor(model => model.TypeID, "PlacementType")
</div>
<div class="editor-field">
    @Html.DropDownList("TypeID", String.Empty)
    @Html.ValidationMessageFor(model => model.TypeID)
</div> 
```

我不明白的是。SelectList 到底是从哪里来的？因为我没有看到对 ViewBag 的调用。

我希望是这样的：

```
@Html.DropDownListFor("TypeID", (SelectList)ViewBag.TypeID) 
```

这是我的疑问。MVC 如何知道在哪里可以找到正确的列表而不指定 ViewBag？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T00:33:15.913

由于您已将 DropDownList 命名为“TypeID”，因为没有提供 SelectList，代码将在模型中搜索名为“TypeID”的项目。

因此，调用 ViewBag.TypeID 以获取 SelectList 是在幕后进行的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T06:42:50.547

事实：

*   **ViewBag**是Scott Guthrie 早些时候宣布的[ASP.NET MVC 3 - Release Candidate 2](http://weblogs.asp.net/scottgu/archive/2010/12/10/announcing-asp-net-mvc-3-release-candidate-2.aspx)中包含的很酷的功能之一 。它用于将数据从控制器传递到视图，就像使用 ViewData[] 字典一样。

*   ViewBag（除了它的名字）的优点和优点在于它是一种**动态**类型，这意味着您可以动态获取/设置值并添加任意数量的附加字段，而无需强类型类。
    （参考：[http://weblogs.asp.net/hajan/archive/2010/12/11/viewbag-dynamic-in-asp-net-mvc-3-rc-2.aspx）](http://weblogs.asp.net/hajan/archive/2010/12/11/viewbag-dynamic-in-asp-net-mvc-3-rc-2.aspx)

在您的示例中，您不必强制转换 SelectList ViewBag，因为 ViewBag 是**动态**类型。

TypeID 的 SelectList 部分功能已经在您的**Controller**部分完成。
因此，在您的创建中单独调用 TypeID 将触发它下面的所有内容。

# c# - 检查 XML 元素的最佳方法

> ID：14513267
> 
> 赞同：-1
> 
> 时间：2013-01-25T00:18:37.050
> 
> 标签：c#, xml, linq-to-xml

我有将 XML 发布到 WebResponse 并获取 Xml 数据的输出/响应的代码。如果它们在发布时出错，则会导致 XML 输出响应如下：

```
<OUTPUT version="1.0">
   <ERROR type="Incomplete">Invalid data</ERROR>
</OUTPUT> 
```

如果遇到错误，第一个元素将为“ERROR”，如果没有遇到错误，则第一个元素将为“INFO”。他们是否可以检查 webResponse XML 的第一个元素是否为“错误”，如果是，则获取标签内的类型属性和文本“无效数据”。如果不是错误，则什么也不做。不确定如何在解析 xml 数据时执行 if。

```
XDocument doc = XDocument.Parse(XmlResponse)
errorMsg =  doc.Parse(XMLResponse).Descendants("ERROR").Select(e => (string)e.Attribute("type")).First().ToString(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T00:21:58.663

您可以使用 Descendants("ERROR").FirstOrDefault() 并检查它是否为空。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T00:21:14.717

要获取错误类型：

```
XDocument doc = XDocument.Parse(XmlResponse)
XElement firstElement = doc.Root.Elements().First();
if(firstElement.Name == "ERROR")
{
    string errorType = firstElement.Attribute("type").Value;
    string message = firstElement.Value;
    // Process error
}
else
{
    // It is an info
} 
```

# symfony - 在更新时将唯一性插入链接表

> ID：14513272
> 
> 赞同：0
> 
> 时间：2013-01-25T00:19:05.067
> 
> 标签：symfony, doctrine-orm

我有一个场景，我正在更新一篇博文，该博文通过多对多关系（在名为 的链接表中`blog_link_tags`）分配了多个标签，如下所示：

```
...

$em = $this->getDoctrine()->getManager();
$blogPost = $em->getRepository('MyBlogBundle:Blog')->find($postId);

$blogPost
    ->setTitle( $request->request->get('post_title', '') )
    ->setBody( $request->request->get('post_body', '') )
    ->setLive(true);

$postTags = json_decode( $request->request->get('post_tags', '') );
$tagRepository = $em->getRepository('MyBlogBundle:BlogTag');

foreach($postTags as $postTag) {
    $tag = $tagRepository->find( $postTag->id );
    if (!$tag) {
        throw $this->createNotFoundException('Tag not found: ' . $tag->title);
    }
    $blogPost->addTag($tag);
}

$em->flush();

.... 
```

正如您可能知道的那样，如果我编辑博客文章并添加新标签，那么它将创建重复记录。

截断`blog_link_tag`当前博客文章 ID 的记录表或仅插入那些唯一的标签 ID 的最佳方法是什么？是否会在 foreach 循环中的以下行中执行此操作：

```
$tag = $tagRepository->find( $postTag->id ); 
```

而是检查标签是否存在以及它是否还没有出现在链接表中？或者 Doctrine 2 是否提供了更好的方法来实现这样的行动？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T08:45:47.260

假设`$blogPost`拥有方，您有 2 个解决方案：

第一个解决方案，`$blogPost->getTags()->clear()`在`foreach`. 小心这个，它将删除`blog_link_tags`. 但是，如果您在 foreach 中再次添加它们就可以了。视内容而定`$postTags`

第二个是测试`if(!$blogPost->getTags()->contains($tag))`前`$blogPost->addTag($tag);`

请记住，您正在处理关系中的[ArrayCollection](http://api.nellafw.org/class-Doctrine.Common.Collections.ArrayCollection.html)`many-to-many`

**注意：** 我认为你这里有一个错字：

```
 if (!$tag) {
        throw $this->createNotFoundException('Tag not found: ' . $tag->title);
    } 
```

如果`$tag`不退出，则不能使用`$tag->title`. 我想你想用`$postTag->title`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T14:06:39.317

就我而言，我首先会为 Post 实体创建一个**FormType**，这样我就不必在控制器中编写任何**杂乱**的代码，并且一切都是自动化的、干净的和安全的。

接下来，我将管理 Post 实体中的标签，如下所示：

```
class Post
{

    private $tags;

    public function __construct()
    {
        $this->tags = new ArrayCollection();
    }

    public function setTags($tags)
    {
        $this->tags->clear();

        foreach ($tags as $tag) {
            $this->addTag($tag);
        }

        return $this;
    }

    public function addTag(Tag $tag)
    {
         if (!$this->tags->contains($tag)) {
             $this->tags[] = $tag;
         }
    }
} 
```

# jquery - 以精确文本匹配为目标 (jQuery)

> ID：14513273
> 
> 赞同：2
> 
> 时间：2013-01-25T00:19:26.677
> 
> 标签：jquery, filter, match, target

我需要通过精确的文本匹配来定位多个类。我的一半代码似乎有效（未选中复选框时文本具有紫色背景），但是在选中复选框以定位文本时，似乎没有发生任何事情...

```
if ($("input:checkbox:checked#checkbox-id").length > 0) {
        $('#main-content-panel .entry').filter(function(index) { 
        return $(this).text() == "Text"; }).css
        ('backgroundColor', 'orange'); 
        }

if ($("input:checkbox:not(:checked)#checkbox-id").length > 0) {
        $('#main-content-panel .entry').filter(function(index) { 
        return $(this).text() == "Text"; }).css
        ('backgroundColor', 'purple'); 
        } 
```

jsfiddle：http: [//jsfiddle.net/KKfEF/](http://jsfiddle.net/KKfEF/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T00:23:28.590

您应该收听该`change`事件：

```
var $elem = $('#main-content-panel .entry').filter(function (index) {
    return $(this).text() == "Text";
});
$('#checkbox-id').change(function () {
    var color = this.checked ? 'orange' : 'purple';
    $elem.css('backgroundColor', color);
}).change(); 
```

[http://jsfiddle.net/drcpY/](http://jsfiddle.net/drcpY/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T00:27:59.980

您忘记添加 onchange 事件处理程序。

```
onchange="run()"> 
```

也将您的代码包装在一个函数中，就像这样

```
run = function () {
if ($("input:checkbox:checked#checkbox-id").length > 0) {
            $('#main-content-panel .entry').filter(function(index) { 
            return $(this).text() == "Text"; }).css
            ('backgroundColor', 'orange'); 
            }

if ($("input:checkbox:not(:checked)#checkbox-id").length > 0) {
            $('#main-content-panel .entry').filter(function(index) { 
            return $(this).text() == "Text"; }).css
            ('backgroundColor', 'purple'); 
            }
}
run(); 
```

# css - IE中的样式问题

> ID：14513275
> 
> 赞同：0
> 
> 时间：2013-01-24T16:34:03.230
> 
> 标签：css, internet-explorer

我正在创建一份问卷（我几乎没有编码专业知识）并且完全被 IE 的风格所困扰。

Firefox 和 Chrome 都可以完美运行，但 Internet Explorer 不会将内容居中，输入字段也与文本区域重叠。

我知道这是一个提问的地方，没有太多的编码帮助，但我认为有人可能会注意到一些明显的错误并让我非常头疼！

```
<body>
<style type="text/css">
#wrap {
   width:800px;
   margin:0 auto;
   background-color:white;
   height:auto;
   margin-top:-16px;
}
#left_col {
   float:left;
   width:400px;
}
#right_col {
   float:right;
   width:400px;
}
body {
   background-image:url(questionnaire-background.png);
   font-family: calibri, verdana;}

</style>

<div id="wrap">
<center>
<br>
<h1>HR Newsletter Questionnaire</h1>
    <div>
    <p style="margin-top:20px">What is your name?</p><br>
    <p><input type="text" name="name" style="margin-bottom: 43px; margin-top:-46px; width: 50%"></p>
    </div>

    <div>
    <p>Is the HR Newsletter something you would like to receive?<p><br>
    <p><input type="text" name="like_to_receive" style="margin-bottom: 43px; margin-top:-46px; width: 50%"></p>
    </div>

    <div>
    <p>Comments:</p><br>
    <p><input type="textarea" name="comments" style="margin-bottom: 43px; margin-top:-46px; width: 50%"></textarea></p>
    </div>

    <div>
    <p>What do you like from the current HR Newsletters?</p><br>
    <p><input type="text" name="what_do_you_like" style="margin-bottom: 43px; margin-top:-46px; width: 50%"></p>
    </div>

    <div>
    <p>What do you do like or would like to be seen removed from the HR Newsletter?</p><br>
    <p><input type="text" name="not_like" style="margin-bottom: 43px; margin-top:-46px; width: 50%"></p>
    </div>

    <div> 
    <p>What would you like to be seen added to the HR Newsletter?</p><br>
    <p><input type="text" name="added" style="margin-bottom: 43px; margin-top:-46px; width: 50%"></p>
    </div>

    <div>
    <p style="margin-bottom:-22px">How often would you like to see the HR Newsletter?</p><br>
    <p>      
            <input type="radio" name="how_often" value="weekly">Weekly
            <input type="radio" name="how_often" value="fortnightly">Fortnightly
            <input type="radio" name="how_often" value="monthly">Monthly
            <input type="radio" name="how_often" value="quartely">Quarterly
            <input type="radio" name="how_often" value="yearly">Yearly<br></p>
    </div>

    <div>
    <p style="margin-top: 40px; margin-bottom:-22px">Would you prefer the HR Newsletter to see more of less of the following:</p><br>
    <p>
            <input type="radio" name="would_you_prefer" value="more_pictures">More pictures with less text
            <input type="radio" name="would_you_prefer" value="more_text">More text with less pictures
            <input type="radio" name="would_you_prefer" value="both">A balanced mixture of both<br></p>
    </div>

    <div>
    <p style="margin-top: 40px; margin-bottom:-22px">How long would you like the HR Newsletter to be?</p><br>
    <p>
            <input type="radio" name="how_long" value="9">Less than 9 pages 
            <input type="radio" name="how_long" value="10_15">10 – 15 Pages
            <input type="radio" name="how_long" value="15">15 + Pages<br></p>
    </div>
            <br><br><br><br>
    <div>
    <p><input type="submit" value="Send" style="margin-bottom: 43px; margin-top:-46px; width: 50%">
       <input type="reset" value="Clear" style="margin-bottom: 43px; margin-top:-46px; width: 50%"><br></p>
    </div>
</center>
    </div>
<body> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T18:32:43.410

最简单的解决方案（这实际上并不是最好的解决方法，为了记录）是在你的 CSS 中添加以下行：

```
body { text-align:center; margin:0px auto; } 
```

我在 IE 9.0.8 中检查了这一点。

# git - 获取后的 Git 合并 - 究竟如何？

> ID：14513278
> 
> 赞同：51
> 
> 时间：2013-01-25T00:19:51.557
> 
> 标签：git, git-merge, git-fetch

我从各种来源中了解到，获取*然后*合并而不是简单地拉取通常是一个更好的主意，因为它可以进行更好的控制。也就是说，我还没有找到真正的方法。一个例子：

在我的 GitHub 存储库的一个主分支中，对一些代码进行了一些小的更改。我能够获取它，但我不知道如何将差异与*我的*本地主分支实际合并。 `git branch`列出了我拥有的所有本地分支，但没有任何迹象表明要合并到任何地方。

那么，它只是类似于`git merge master`or`git merge origin/master`吗？我错过了什么？

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2013-01-25T00:24:28.443

`git merge origin/master`应该管用。由于`master`通常是一个跟踪分支，您也可以`git pull`从该分支执行，它会为您执行提取和合并。

如果您的本地更改`master`未反映在 上`origin`，您可能需要`git rebase origin/master`确保您的提交是“在顶部”。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-01-25T02:04:21.113

我通常这样做：

```
git merge --ff-only @{u} 
```

其中说，“只从上游跟踪分支进行快进合并。” 这很好，因为如果它失败了，那么我知道我介绍了一些`master`不是上游的东西。我将其别名为`ff`，只是为了更容易输入。

如果有更改，而您只是想合并它们，您可以执行以下操作：

```
git merge @{u} 
```

它将在上游分支中合并。但是，如果您想要更清晰的历史记录（并避免“将 'origin/master' 合并到 'master'”提交，那么您可能需要考虑改用变基：

```
git rebase @{u} 
```

当然，您可以`origin/master`代替`@{u}`这些示例中的任何一个。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2016-09-16T21:00:41.980

命令

```
git pull $some_url 
```

相当于

```
git fetch $some_url
git merge FETCH_HEAD 
```

另请参阅[git-pull(1)](https://www.kernel.org/pub/software/scm/git/docs/git-pull.html)手册页了解详细信息，尤其是描述的前两段。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-07-11T06:35:12.527

要获取特定分支：
`1\. git fetch <branch URL><branch name>`

```
2\. git pull = git fetch + git merge 
```

`3(a). git merge origin/master` origin/master 和 master 分支现在指向同一个提交，并且您与上游开发同步。

**（或者）**

`3(b). git merge FETCH_HEAD`

# css - 如何在 Retina 中使用 background:url(data:image/png;base64？

> ID：14513279
> 
> 赞同：5
> 
> 时间：2013-01-24T22:57:07.350
> 
> 标签：css

我注意到使用 Data URI 方案嵌入到 css 中的图像以“常规”分辨率显示在 Retina 屏幕上。如何以 Retina 显示器所需的分辨率进行嵌入和图像处理？

我没有尝试将双分辨率 (@2) PNG 嵌入到 CSS 中，但我怀疑它会以双倍大小显示，类似于未定义图像大小时的常规图像。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-25T14:14:22.270

两个图像可以具有相同的分辨率但不同的 dpi。这是视网膜显示器中的重要部分，因此，您需要具有不同 dpi 的图像的两个版本（如果您想为那些没有视网膜的人节省一些带宽）。

有关如何在 css 中添加规则以及一些 dpi 值的更多信息，请查看：[Retina Display Media Query](http://css-tricks.com/snippets/css/retina-display-media-query/)。

**编辑** 正如@carlos-r-balebona 的评论所指出的，如果将图像嵌入到 CSS 中，将不会保存带宽，因为将始终发送两个版本。仅当您使用图像 URL 时才会保存它，因为只会下载正确的 URL。

**编辑示例**

好的，这是一个例子：

假设您有 2 张图片 (data:image/png;base64,{192_dpi_encoded_image}) 和 (data:image/png;base64,{96_dpi_encoded_image})。

现在假设您有一个 div 要将背景图像设置为：

```
<div id="a" style="width: 100px; height:100px;">
</div> 
```

在你的 CSS 中：

```
@media only screen
{
     #a
    {
        background:url(data:image/png;base64,{96_dpi_encoded_image});
    }
}

@media
only screen and (-webkit-min-device-pixel-ratio: 2),
only screen and (   min--moz-device-pixel-ratio: 2),
only screen and (     -o-min-device-pixel-ratio: 2/1),
only screen and (        min-device-pixel-ratio: 2),
only screen and (                min-resolution: 192dpi),
only screen and (                min-resolution: 2dppx){
    #a
    {
        background:url(data:image/png;base64,{192_dpi_encoded_image});
    }
} 
```

仅当存在视网膜屏幕时，最后一个带有条件的 @media 才会覆盖之前设置的背景图像，因此，在需要时设置大 dpi 图像。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-11-23T09:38:56.133

您可以仅以像素为单位设置背景大小（如果您的图像具有 2 倍分辨率，则值应该是原始尺寸除以 2）：

```
.element {
  background-image: url(data:image/png;asdkfasdkf);
  background-size: 25px 50px;
} 
```

# php - 单击已包含文件上的链接时如何包含第二个文件？

> ID：14513281
> 
> 赞同：0
> 
> 时间：2013-01-25T00:20:06.850
> 
> 标签：php

我已将 index_login.php（带有登录表单的文件）包含到我的 index.php 中，当我单击 [登录] 时，它会转到 login.php（检查用户是否存在且是否存在的文件表示欢迎等），但我想让所有与登录相关的文件都包含在我的 index.php 中，以便于编辑模板。我已经尝试了几件事，但到目前为止无法实现，任何帮助将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T00:26:48.877

为什么不直接到同一页面？然后在顶部做这样的事情。

```
if(isset($_POST['whatever'])) {
  //process login stuff
  //redirect home and die if you want
}

//or continue execution normally 
```

# javascript - 如何提取由 javascript 生成的 DOM 对象的 html 代码？

> ID：14513282
> 
> 赞同：1
> 
> 时间：2013-01-25T00:20:09.710
> 
> 标签：javascript, html, dom

我正在使用 java 脚本在 html 文档中生成一个 svg 对象。像这样的东西：

```
mySvg = document.createElementNS("http://www.w3.org/2000/svg", "svg");
myPath = document.createElementNS("http://www.w3.org/2000/svg", "path");
mySvg.appendChild(myPath); 
```

是否有一个 javascript 命令来提取生成的 html 代码？

IE

```
"<svg>...<path>...</path>...</svg>" 
```

然后我想将此部分保存为字符串变量。

谢谢，温迪

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T00:34:25.257

是的...将您的 svg 标签放入 div 中，然后获取该 div 的 Html。

```
<div id="container"></div>
$('#container').append('mySvg'); 
```

对于作为 html 的整个 svg，您可以这样做：

```
var svgHtml = $('#container').html(); 
```

对于字符串：

```
var svgHtml = document.getElementById('container').innerText; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T00:39:47.817

您可以使用 innerHTML 来获取元素的 html 文本

```
mySvg = document.createElementNS("http://www.w3.org/2000/svg", "svg");
myPath = document.createElementNS("http://www.w3.org/2000/svg", "path");
mySvg.appendChild(myPath);

document.getElementById('x').appendChild(mySvg);

console.log(document.getElementById('x').innerHTML) 
```

[小提琴](http://jsfiddle.net/arunpjohny/q84Bp/)

# javascript - .getJSON 有效，.get 无效

> ID：14513283
> 
> 赞同：1
> 
> 时间：2013-01-25T00:20:13.337
> 
> 标签：javascript, json, xmlhttprequest, getjson, cross-domain-policy

我有一个函数，它使用 .getJSON 从服务器获取 JSON 文件，从中获取一些数据（url 是数据的一部分），然后调用另一个需要从解析的 url 中获取信息的函数（普通 Jane HTML 页面）。

```
var jsonurl = "http://server.company.com/file.json"    
$.getJSON(jsonurl, function(data){
  //do some stuff, then call the below function 
```

.

```
$.get("http://server.company.com/sub/dir/file.html", function(data){
    alert(data);  //this never fires
}); 
```

JSON 部分运行良好。HTML 部分没有做任何事情。根据 Firebug 的说法，页面似乎正确返回（200），但我没有得到任何数据。

JSON 文件和其他纯 HTML 页面位于同一台服务器上，只是不同的目录，所以我认为这不是与域相关的问题。我最初尝试使用获取数据；

```
var req = new XMLHttpRequest();  
req.open("GET", "http://server.company.com/sub/dir/file.html", false);  
req.send(); 
```

但出于某种原因，Firefox 和 Chrome 都对 req.send() 大喊大叫。我的研究使我认为这是一个（跨）域相关问题 - 浏览器认为该页面正在请求其域之外的数据（所有各方都在以“company.com”结尾的同一域上）。

为什么我的 $.get 不起作用和/或如何摆脱 XMLHttpRequest.send() 错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T19:55:15.127

跨域 ajax 仅适用于[JSONP](http://en.wikipedia.org/wiki/JSONP)，由 getJSON 函数使用。

# wpf - 是否可以在 WPF 中使用 WinForm 图标资源？

> ID：14513285
> 
> 赞同：0
> 
> 时间：2013-01-25T00:20:18.123
> 
> 标签：wpf, winforms, icons, embedded-resource

> **可能重复：**
> [将 System.Drawing.Icon 转换为 System.Media.ImageSource](https://stackoverflow.com/questions/1127647/convert-system-drawing-icon-to-system-media-imagesource)

我有一个 WPF 应用程序。为了显示托盘图标，我引用了 WinForm 程序集并在资源中添加了一些图标，它们可以像`Properties.Resources.MyIcon`使用 type一样访问`System.Drawing.Icon`。我也想在我的主窗口中显示这些图标。我的问题是是否可以在 WPF Image 控件中直接使用这些 WinForm 图标？

# networking - 如何从ip地址计算mac地址

> ID：14513286
> 
> 赞同：0
> 
> 时间：2013-01-25T00:20:23.880
> 
> 标签：networking, ip, mac-address

嗨，我想知道如何手动从 IP 地址计算 Mac 地址。

例如，如果我有这个 ip：

192.168.0.1/24

mac地址是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T00:24:05.743

您无法根据 IP 地址计算 Mac 地址。它们来自不同的来源。

*   通常是硬件决定了它的 MAC 地址
*   网络的配置决定了它的 IP 地址。

# mahout - 找到推荐系统所需的最小评分数？

> ID：14513288
> 
> 赞同：0
> 
> 时间：2013-01-25T00:20:37.013
> 
> 标签：mahout, recommendation-engine

是否有一种智能方法可以找出您需要从用户那里获得的最低评分数才能开始推荐项目（准确）。

比如，在我开始向你推荐任何东西之前，先给“x”个项目打分。您如何根据数据集找出“x”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T06:06:17.773

一般的想法是保留来自 N 个用户的所有数据，每个用户至少有一些中等数量的评分 M。然后为每个用户添加 1 个评分，并为每个用户进行推荐。评估建议的质量；您可以手动完成，或评估一些指标，如平均精度/nDCG/AUC。

然后从每个用户添加另一个评分并重复。您应该会发现质量会随着时间的推移而提高，但每次评分都会降低。然后你就选择你的权衡——你什么时候判断等待另一个评级值得预期的质量提升？

没有一个正确的答案。但是，如果您的用例和算法使得答案超过 4，我会感到惊讶。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T15:44:47.870

在了解用户配置文件中实际应该有多少项目以获得“令人满意的”推荐性能方面已经完成了一些工作。发现一般10是个好数字

[http://wanlab.poly.edu/recsys12/recsys/p27.pdf](http://wanlab.poly.edu/recsys12/recsys/p27.pdf)

您可以查看该论文以回答您将遇到的任何具体问题，但水平较高。用户个人资料中有 8 - 20 个（首选 10 个）项目来推荐电影风格的推荐。他们进行了典型的离线（模拟）和在线（基于用户）研究以确定该数字。

# mysql - MySQL Where 子句仅当数据存在于第二个表中时

> ID：14513292
> 
> 赞同：0
> 
> 时间：2013-01-25T00:20:54.580
> 
> 标签：mysql, codeigniter

好的，我很难用好话来解释这一点，但我正在从我的数据库中的一个表中选择所有默认头像，该表包含所有头像，无论是否隐藏..

forum_title 中的隐藏字段默认为 0（每个用户都可用），有些值为 1（用户必须解锁它，它不会自动可用）。无论如何，当他们找到一个头像时，它会被插入到 user_title 中。

所以 user_title 会跟踪 user_is 和 title_id ...

但是我想向用户显示所有默认头像以及他们解锁的隐藏头像。SQL 工作正常，直到我添加 WHERE 子句，因为第一个表没有 user_id 列...我只想说 WHERE user_title .user_id = $_SESSION['userid'] 如果他们之前解锁了头像（显然，或者第二个表中没有数据，因此我离开的原因加入了它）

这是使用 CodeIgniter，但我将发布 MySQL 和 CodeIgniter 版本，以便人们可以帮助我！

```
$this->db->select('id, phrase');
$this->db->from('forum_title');
$this->db->join('user_title', 'title_id = id', 'left');
$this->db->where('user_title.user_id', $this->session->userdata('user_id'));
$this->db->order_by('hidden'); 
```

然后这里是 MySQL：

```
SELECT id, phrase
FROM forum_title
LEFT JOIN user_title ON title_id = id
WHERE user_title.user_id = $_SESSION['user_id']
ORDER BY hidden; 
```

谢谢！

forum_title 表的 SQL：

```
CREATE TABLE IF NOT EXISTS `forum_title` (
  `id` tinyint(3) NOT NULL AUTO_INCREMENT,
  `phrase` varchar(50) NOT NULL,
  `hidden` tinyint(1) NOT NULL DEFAULT '0',
  PRIMARY KEY (`id`)
) ENGINE=InnoDB  DEFAULT CHARSET=latin1 AUTO_INCREMENT=6 ;

INSERT INTO `forum_title` (`id`, `phrase`, `hidden`) VALUES
(1, 'OMGITSATITLE', 0),
(2, 'DStable Addict', 0),
(3, 'Randomnezz', 0),
(4, 'I Eat Hair...', 0),
(5, 'IMMA STAFFY', 1); 
```

user_title 表的 SQL：

```
CREATE TABLE IF NOT EXISTS `user_title` (
  `user_id` bigint(20) NOT NULL,
  `title_id` tinyint(3) NOT NULL,
  PRIMARY KEY (`user_id`,`title_id`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1; 
```

现在我想要的结果：

总是显示默认的标题（隐藏 = 0），但如果他们解锁了它，也会显示隐藏的 = 1，如果他们解锁了它，它将在 user_title 表中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T00:27:33.500

```
SELECT id
     , phrase
  FROM forum_title
  LEFT 
  JOIN user_title 
    ON title_id = id
   AND user_title.user_id = $_SESSION['user_id']
 ORDER 
    BY hidden; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T04:30:43.157

您在 where 语句将您的结果限制为与用户 ID 匹配的结果，您还需要指定您想要的其他结果。将以下内容添加到您的查询中，如果我理解正确，应该可以解决问题。

```
$this->db->or_where('hidden', 0); 
```

# apache - MAMP Pro 目录列表

> ID：14513295
> 
> 赞同：0
> 
> 时间：2013-01-25T00:21:09.847
> 
> 标签：apache, .htaccess, mamp

在我的本地开发环境中，我想允许目录中没有索引文件的目录列表。

这工作正常，直到我添加我的 .htaccess（用于删除我的 CMS 上的 index.php）文件，看起来像这样

```
RewriteEngine On

RewriteRule ^(_app) - [F,L]
RewriteRule ^(_config) - [F,L]
RewriteRule ^(_content) - [F,L]
RewriteRule ^(.*).yml$ - [F,L]
RewriteRule ^(.*).yaml$ - [F,L]
RewriteRule ^(.*).html$ - [F,L]
RewriteRule ^(.*/)?\.git+ - [F,L]

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ /index.php [QSA,L] 
```

我收到 403 禁止错误。

关于如何覆盖的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-06-24T10:09:54.060

嗨，只需打开扩展选项卡上的索引，指令选项，它就可以工作。

![MAMP PRO 主机面板](../Images/695125d527fbe42df26e402bb1c1e040.png)

# android - Android - 从我的应用接收通知并启动 POP3 电子邮件客户端

> ID：14513298
> 
> 赞同：0
> 
> 时间：2013-01-25T00:21:38.863
> 
> 标签：android, android-intent, android-widget, pop3

我正在创建一个简单的 Android 应用程序，我希望有一个关联的小部件来显示来自我的 POP3 电子邮件客户端（在我的设备上配置）的新消息通知。然后，当用户点击小部件时，应用程序就会启动（即使只是到收件箱也可以）。

1.  这可能吗？
2.  这样做的目的是什么？

我在其他帖子上读过它可能与 gmail 应用程序有关，但没有发现任何直接声明 POP3 可以工作的帖子。

***更新*** 如评论中所述，我想知道是否可以创建我自己的“邮件服务器”来给我通知，然后当用户点击我的应用程序中的按钮时，它只会启动设置的“默认”邮件客户端。

任何人都可以预见这种设置的问题吗？

# java - 如果我使用小程序，如何使用 Eclipse 创建 .jar 文件？

> ID：14513300
> 
> 赞同：0
> 
> 时间：2013-01-25T00:22:09.860
> 
> 标签：java, jar, applet, executable-jar, manifest.mf

我目前正在创建一个人工世界，我关注​​了以下网站 [http://www.ethics.ubc.ca/eame/eameweb/Simulators/JavaProject/TofC.html](http://www.ethics.ubc.ca/eame/eameweb/Simulators/JavaProject/TofC.html)

他用一个小程序来创建它，总共有 9 个类。

我已经完成了编码的编辑，它在 Eclipse 中运行良好，但是当我尝试导出 .jar 文件时它就无法正常工作。

我尝试将其导出为“Jar 文件”并生成一个 Bug.jar，然后提取该文件并在 MANIFEST.MF 文件中添加：

```
Main-Class: Bugs.World 
```

然后当我双击 Bug.jar 文件时，什么也没有发生。

当我尝试使用“Runnable Jar File”导出时，在启动配置下找不到我的程序。

有人可以帮我吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T00:31:26.463

> 然后当我双击 Bug.jar 文件时，什么也没有发生。

这对小程序不起作用。有关更多信息，请从 CLI 运行它：

```
java -jar Bug.jar 
```

* * *

要启动一个小程序，它需要嵌入到 HTML 中或使用 JNLP 使用[Java Web Start](https://stackoverflow.com/tags/java-web-start/info)（嵌入或自由浮动）启动。

# algorithm - 将皇后放在 NxM 棋盘上

> ID：14513301
> 
> 赞同：0
> 
> 时间：2013-01-25T00:22:11.580
> 
> 标签：algorithm

为了练习，我已经开始解决街头面试问题。我发现了这个皇后在船上的问题。

船上皇后区（50 分）

你有一个 N * M 棋盘，上面有一些方格被挡住了。你有多少种方法可以在棋盘上放置一个或多个皇后，使得没有两个皇后相互攻击？如果一个皇后可以通过水平、垂直或对角线移动而不经过任何被阻挡的方格而到达另一个皇后，则两个皇后会互相攻击。最多一个皇后可以放在一个正方形上。皇后不能放在被阻挡的方格上。

输入：第一行包含测试用例 T 的数量。接下来是 T 测试用例。每个测试用例的第一行包含整数 N 和 M。接下来的 N 行包含 M 个字符，每个字符代表棋盘。'#' 代表一个被阻挡的正方形和一个 '.' 表示一个未阻塞的正方形。

输出：输出包含每个测试用例所需答案的 T 行。由于答案可能非常大，因此以 1000000007 为模输出它们。

[https://www.interviewstreet.com/challenges/dashboard/#problem/4e904d63c5069](https://www.interviewstreet.com/challenges/dashboard/#problem/4e904d63c5069)

**我想知道解决这个问题的最佳算法是什么？**

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T00:45:29.337

[此页面提供了一个易于遵循的 N-Queens 问题的实现](http://www.geekviewpoint.com/java/numbers/n_queens_problem)。如果你想找到所有排列，在`nQueenProblem`方法中，而不是使用 simple `addQueen(0, queens, n);`，只需使用 for 循环迭代不同的值。而不是返回正确的板，只计算板。

# css - 在顶部添加边距并且不影响容器的高度

> ID：14513302
> 
> 赞同：0
> 
> 时间：2013-01-25T00:22:13.283
> 
> 标签：css, layout, margin

由于我的导航栏，我必须添加高度与导航栏高度相同的边距。但是，当我添加边距时，我得到一个滚动条，因为 body、html 和容器的高度设置为 100%。如何为导航栏添加边距，而不是获得不必要的滚动条？为什么不起作用`margin-bottom: -42px;`？

```
body, html {
    height: 100%;
}

.navbar {
    z-index: 10;
}

.container-fluid {
    height: 100%;
    margin-top: 42px;
    // add margin from the nav bar
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T00:38:17.427

试试这个`.container-fluid { height: 100%; position:absolute; top:42px; }` Absolute 元素从 dom 中删除并准确放置在您指定的位置

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T08:32:16.610

```
.container-fluid { overflow: hidden; } 
```

这应该隐藏滚动条

# shell - 如何编写带有选项的 Unix shell 脚本？

> ID：14513305
> 
> 赞同：28
> 
> 时间：2013-01-25T00:22:17.403
> 
> 标签：shell

我不知道这是否可能，但我想编写类似于带有选项的常规可执行文件的 shell 脚本。作为一个非常简单的示例，考虑一个配置为可执行的 shell 脚本 foo.sh：

```
 ./foo.sh
    ./foo.sh -o 
```

并且代码的`foo.sh`工作方式类似于

```
 #!/bin/sh
    if  ## option -o is turned on
        ## do something
    else
        ## do something different
    endif 
```

是否有可能以及如何做到这一点？谢谢。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-01-25T00:33:47.157

```
$ cat stack.sh 
#!/bin/sh
if  [[ $1 = "-o" ]]; then
    echo "Option -o turned on"
else
    echo "You did not use option -o"
fi

$ bash stack.sh -o
Option -o turned on

$ bash stack.sh
You did not use option -o 
```

**供参考：**

```
$1 = First positional parameter
$2 = Second positional parameter
.. = ..
$n = n th positional parameter 
```

有关更简洁/灵活的选项，请阅读其他线程：[使用 getopts 处理长短命令行选项](https://stackoverflow.com/questions/402377/using-getopts-in-bash-shell-script-to-get-long-and-short-command-line-options)

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2015-05-11T20:09:18.947

这是如何在一个脚本中执行此操作的方法：

```
#!/usr/bin/sh
#
# Examlple of using options in scripts
#

if [ $# -eq 0 ]
then
        echo "Missing options!"
        echo "(run $0 -h for help)"
        echo ""
        exit 0
fi

ECHO="false"

while getopts "he" OPTION; do
        case $OPTION in

                e)
                        ECHO="true"
                        ;;

                h)
                        echo "Usage:"
                        echo "args.sh -h "
                        echo "args.sh -e "
                        echo ""
                        echo "   -e     to execute echo \"hello world\""
                        echo "   -h     help (this output)"
                        exit 0
                        ;;

        esac
done

if [ $ECHO = "true" ]
then
        echo "Hello world";
fi 
```

点击[这里](http://unixhacking.com/shell-script-with-options/)查看来源

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-25T00:38:06.123

是的，您可以为此目的使用内置的 shell[`getopts`](http://wiki.bash-hackers.org/howto/getopts_tutorial)或独立的 shell。[`getopt`](http://linux.die.net/man/1/getopt)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-12-01T13:36:05.453

您可以遍历参数并以任何顺序读取选项。这是一个例子。有关使用此代码的脚本，请参阅 -[脚本示例](https://github.com/gauravat16/Bash-Scripts/blob/master/Fsync.sh)

```
#Example
OPTION_1=""
option_array[0]="1"
option_array[1]="2"

options="$@"

set_options(){
    prev_option=""

    for option in $options;
    do
        case $prev_option in
            "-t" )
                OPTION_1=$option
            ;;
            "-d" )
                option_array+=("$option")
            ;;
            "-g" )

                option_array_2+=("$option")
            ;;

        esac

        prev_option="$option"

    done

}

function test()
{
    set_options

    echo $OPTION_1
    echo ${option_array[*]}
    echo ${option_array_2[*]}

}

test 
```

# java - java - 如何使用java从第一个字符打印字符串到确定的字符？

> ID：14513307
> 
> 赞同：0
> 
> 时间：2013-01-25T00:22:35.213
> 
> 标签：java, string, character

我有字符串

```
Intel Corporate|Lot 8, Jalan Hi-tech 2/3|Kulim Hi-tech Park|Kulim Kedah 09000|Malaysia
Samsung Electronics||#94-1, Imsoo-dong|Gumi Gyeongbuk 730-350|Korea, Republic Of 
```

如何打印供应商名称，例如 Intel Corporate、Samsung Electronics？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T00:24:31.843

看看[`String#split`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#split%28java.lang.String%29)...

我想你会找到类似...

```
String value = "Intel Corporate|Lot 8, Jalan Hi-tech 2/3|Kulim Hi-tech Park|Kulim Kedah 09000|Malaysia";
System.out.println(value.split("\\|")[0]);
value = "Samsung Electronics||#94-1, Imsoo-dong|Gumi Gyeongbuk 730-350|Korea, Republic Of";
System.out.println(value.split("\\|")[0]); 
```

应该够...

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-25T00:25:06.540

您可以使用拆分，如下所示：

```
String[] tokens = phrase.split("\\|"); 
```

然后像这样打印它们：

```
for (int i = 0; i < tokens.length; i++)
    System.out.println(tokens[i]); 
```

# html - 在特定的最小宽度处停止浮动 div 而不是重叠

> ID：14513312
> 
> 赞同：0
> 
> 时间：2013-01-25T00:22:55.203
> 
> 标签：html, css

[jsfiddle 示例](http://jsfiddle.net/test12/QrQ2L/)

简而言之..整个页面是动态的。编码以减小尺寸直到最小宽度。自定义代码在#contentLIVE 之后开始。

我要求的解决方案是允许蓝色 div 与容器右侧齐平，并在设置最小宽度后停止。如果您将窗口大小增加到超过最小宽度。蓝色 div 齐平，但一旦你达到最小宽度，它就会继续移动。

蓝色 div

```
#black {width:20px;height:59px;background-color:blue;z-index:2;
position:relative;float:right;margin-right:80px;} 
```

# sql - 在 sql 中使用查询的 if 语句

> ID：14513314
> 
> 赞同：2
> 
> 时间：2013-01-25T00:23:20.813
> 
> 标签：sql, sql-server, stored-procedures, if-statement, sql-server-2000

我想问一下如何使用`IF statement`in执行条件检查`SQL`，例如下面的示例..

```
if (select* from table where id = @id) = 1 --if this returns a value

insert statement

else

update statement

go 
```

或类似使用存储过程的东西......

```
if (exec SP_something 2012, 1) = 0 

insert statement

else

update stement 
```

或者也许通过在 sql 语句中使用 UDF，比如......

```
if (select dbo.udfSomething(1,1,2012)) = 0 

insert statement

else

update statement

go 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-25T01:23:44.627

**(1) 使用语句块**

```
IF 
(SELECT COUNT(*) FROM Production.Product WHERE Name LIKE 'Touring-3000%' ) > 5
BEGIN
   PRINT 'There are 5 Touring-3000 bikes.'
END
ELSE 
BEGIN
   PRINT 'There are Less than 5 Touring-3000 bikes.'
END ; 
```

**(2) 调用存储过程。**

```
DECLARE @compareprice money, @cost money 
EXECUTE Production.uspGetList '%Bikes%', 700, 
    @compareprice OUT, 
    @cost OUTPUT
IF @cost <= @compareprice 
BEGIN
    PRINT 'These products can be purchased for less than 
    $'+RTRIM(CAST(@compareprice AS varchar(20)))+'.'
END
ELSE
    PRINT 'The prices for all products in this category exceed 
    $'+ RTRIM(CAST(@compareprice AS varchar(20)))+'.' 
```

更多示例：

[MSDN 1](http://msdn.microsoft.com/en-us/library/ms182717.aspx) [MSDN 2](http://msdn.microsoft.com/en-us/library/ms182587.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T00:31:46.697

你会想做这样的事情：

```
IF (SELECT COUNT(*) FROM Table WHERE ID = @id) = 1
BEGIN
    UPDATE Table SET Name = 'Name' WHERE ID = @id
END
ELSE
BEGIN
    INSERT INTO Table (Name) VALUES ('Name');
END 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-25T07:09:27.067

以下示例将帮助您使用`IF-ELSE`

```
CREATE PROCEDURE SetEngineerStock

    @EngineerId INT,
    @PartNumber CHAR(8),
    @NewUnitsHeld DECIMAL(6,2)
AS

BEGIN

    SET NOCOUNT ON;

    -- Does stock entry exist?
    IF EXISTS(SELECT * FROM EngineerStock
              WHERE EngineerId = @EngineerId AND PartNumber = @PartNumber)

        -- Yes, update existing row
        UPDATE EngineerStock
        SET UnitsHeld = @NewUnitsHeld
        WHERE EngineerId = @EngineerId AND PartNumber = @PartNumber

    ELSE

        -- No, insert new row
        INSERT INTO EngineerStock
        VALUES(@EngineerId, @PartNumber, @NewUnitsHeld)

END 
```

# java - Java：我如何知道一个字符串是否存在 ENUM 之一？

> ID：14513319
> 
> 赞同：0
> 
> 时间：2013-01-25T00:23:56.820
> 
> 标签：java

```
public enum OPERATORS {
  MUL("*"), ADD("+"), SUB("-"), DIV("/")
} 
```

和一个字符串

```
s = A2 B4 * C5 / 
```

我如何检查是否`s`有其中之一`OPERATORS`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T00:29:37.370

假设 getOperatorSymbol() 在您的枚举中实现

```
for (OPERATORS op: OPERATORS.values()) {
  if(s.contains(op.getOperatorSymbol())
  {
      //your code
  }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T00:33:09.270

> 如何检查 s 是否有操作员之一？

你必须以某种方式对其进行编码。您正在搜索的字符串不是`enum`值的名称。它们存储在自定义属性中。因此，您必须手动提取字符串，然后在目标字符串中搜索每个字符串。

有多种方法可以做到这一点；例如

*   您可以简单地遍历 OPERATOR 枚举值，提取每个操作符字符串并针对您的输入字符串进行测试；请参阅@pangea 的答案。

*   您可以使用循环构建一个匹配任何运算符字符串的正则表达式，然后使用该正则表达式匹配该字符串。如果性能是一个真正的问题并且您可以分摊创建正则表达式的成本，这将是一个好方法；即只做一次，并多次重复使用正则表达式。（但如果性能不是问题，那么这种方法的额外复杂性是没有保证的。）

# web-services - SFDC 批准过程是否可以公开给 Web 服务？

> ID：14513328
> 
> 赞同：0
> 
> 时间：2013-01-25T00:24:40.080
> 
> 标签：web-services, configuration, workflow, salesforce

[销售队伍](http://salesforce.com/)审批流程经过各个步骤。对于每个步骤，用户可以“批准”/“拒绝”它。有没有什么方法可以让 Web 服务在进入步骤时公开它，并且外部人员可以在不进入 SalesForce 的情况下批准或拒绝它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T08:08:05.457

是和不是。

公开有关当前未决批准的信息很容易（如果有点乏味）。最简单的方法是运行存储在“管理报告”下的报告，您还可以检查和查询`ProcessInstance*`表格。

很容易挽救`Approval`类的使用来创建可用于批准/拒绝示例单元测试的 Apex 代码：http: [//www.salesforce.com/us/developer/docs/apexcode/Content/apex_process_example.htm](http://www.salesforce.com/us/developer/docs/apexcode/Content/apex_process_example.htm)

因此，您应该拥有所有工具来构建显示它们并让您批准的 Web 服务。问题是，如果您使用“集成用户”的硬编码凭据，它将在任何地方显示为实际批准者，而不是指定用户。如果他们必须向您的其他网站提供他们的凭据 - 这几乎与登录 SF 一样乏味，您可能只需为他们构建一个 Visualforce 页面；）

阅读有关批准流程的文档，还可以选择通过在正文中回复带有“是”的通知电子邮件来批准，这个一次性邮箱将发挥所有作用。

# php - PHP 错误 mysql_fetch_array(): 提供的参数不是有效的 MySQL 结果资源

> ID：14513331
> 
> 赞同：-1
> 
> 时间：2013-01-25T00:25:13.207
> 
> 标签：php, mysql

我被困在一个非常基本的 sql 查询脚本中。Mybe有人可以注意到我看不到的东西。我检查了从 mysqladmin 执行的 sql 查询是否正常：

```
 <?
 include ('gps_db_connect.php'); 
 $query = "SELECT * from gps WHERE server_time > '20130124'";
 echo $query;
 $result = mysqli_query($connection, $query) or die(' Error getting data'); 
 echo '    After query';
 while ($row = mysql_fetch_array($result, MYSQL_ASSOC))
  {   
   echo $row['server_time'];
  }

 ?> 
```

这是屏幕显示/输出：

```
SELECT * from gps WHERE server_time > '20130124' After                      
query
PHP Error Message 

Warning: mysql_fetch_array(): supplied argument is not a valid MySQL result resource in /home/a9440109/public_html/test.php on line 7 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T00:26:42.223

试试这个

```
 $result = mysql_query($query, $connection) or die('Error'); 
```

# ios - reloadRowsAtIndexPaths 导致更改背景图像出现问题

> ID：14513333
> 
> 赞同：1
> 
> 时间：2013-01-25T00:25:18.007
> 
> 标签：ios, objective-c, xcode, uitableview

我在右侧滑动时切换 UITableViewCell 上的背景图像。问题是如果我添加`[taskManager reloadRowsAtIndexPaths:@[indexPath] withRowAnimation:UITableViewRowAnimationRight];`它只会切换一次但不会切换回来。那么这是为什么呢？什么会让这不会发生？这是整个方法代码。

```
- (void)handleSwipeRight:(UISwipeGestureRecognizer *)gestureRecognizer {
CGPoint location = [gestureRecognizer locationInView:self.taskManager];

NSIndexPath *indexPath = [self.taskManager indexPathForRowAtPoint:location];

[taskManager reloadRowsAtIndexPaths:@[indexPath] withRowAnimation:UITableViewRowAnimationRight];

UIImage *notCkDone = [UIImage imageNamed:@"UITableViewCellCheckmark"];
UIImage *isCkDone = [UIImage imageNamed:@"UITableViewCellCheckmarkDone"];

UIImage *notBgDone = [UIImage imageNamed:@"UITableViewCell"];
UIImage *isBgDone = [UIImage imageNamed:@"UITableViewCellDone"];

UITableViewCell *cell = [taskManager cellForRowAtIndexPath:indexPath];

if (indexPath) {
    if (cell.imageView.image == notCkDone) {
        cell.imageView.image = isCkDone;
        cell.backgroundView = [[UIImageView alloc] initWithImage:isBgDone];
    } else {
        cell.imageView.image = notCkDone;
        cell.backgroundView = [[UIImageView alloc] initWithImage:notBgDone];
    }
    cell.textLabel.textColor = [UIColor colorWithRed:0.0/0.0 green:0.0/0.0 blue:0.0/0.0 alpha:1.0];
} 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T00:35:10.433

对单元格的视觉效果的所有更改都应该发生在您的`tableView:cellForRowAtIndexPath:`. 您不应该在手势识别器的事件处理程序中执行此操作（或在 之外的任何其他地方`tableView:cellForRowAtIndexPath`，就此而言）。

手势识别器需要更改表格视图后面的*模型*，以便您的 tableView:cellForRowAtIndexPath 可以决定将图像设置为`notCkDone`或`isCkDone`下次重新加载数据时，并处理背景更改。然后你的手势识别器应该告诉表格视图重新加载数据。

您当前的解决方案对`tableView:cellForRowAtIndexPath`. 当您从外部更改视觉效果时，表格视图会在单元格位于屏幕上时显示更改。但是，当单元格滚动到屏幕外时，它会被*回收*，这意味着下次您将具有单元格标识符的单元格出列时，您可能会得到一个用于显示为不同单元格的对象。

# php - SimplePie 对多个提要进行排序 - 没有时间/日期戳，没有排序？

> ID：14513338
> 
> 赞同：1
> 
> 时间：2013-01-25T00:26:14.010
> 
> 标签：php, simplepie

有没有办法强制一组提要按日期排序，即使一个提要缺少时间/日期戳？

如果我理解正确，列表中的一个错误提要会扰乱排序。从 SimplePieWP 插件的描述来看，但大概是一个普遍的问题：

> '...该插件还支持我们亲切地称为“Multifeeds”的功能。这使您可以 > 将多个提要合并在一起并按时间和日期对项目进行排序……请注意我说过 >“按时间和日期对项目进行排序”。那么，如果提要缺少时间/日期-> 戳记会怎样？他们不会排序。（Duh。）按日期排序需要所有合并的>提要中的所有单个项目都具有与之关联的时间/日期戳。

我想我经常在我的网站上看到这个结果；提要未按日期排序，来自数组顶部提要的帖子始终位于顶部等。

在我的设置中，无法手动检查每个提要的时间/日期戳；提要列表太长和/或不断变化并自动生成。

有没有我可以在某处添加的代码来过滤掉没有时间/日期戳的提要？

或者在 1970 年代给不良的提要一个默认的时间/日期，所以它们在底部排序？

还是这个问题已经解决了？我错过了什么吗？

这些年来，我对此进行了很多搜索，但从未弄清楚。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T02:54:25.830

SimplePie 对 SimplePie::merge_items() 中的每个项目进行显式检查，以确定是否有任何项目缺少日期。

您必须重写此方法才能更改多页进纸的排序行为。以下是对多页进纸进行排序的替代方法，即使项目缺少日期也是如此。如果项目缺少日期，则将其排序到底部。（使用 SimplePie 1.3）。

```
class SimplePieAlwaysSort extends SimplePie
{
  public function get_items($start = 0, $end = 0)
  {
    if (!isset($this->data['items']))
    {
      if (!empty($this->multifeed_objects))
      {
        $this->data['items'] = self::merge_items($this->multifeed_objects, $start, $end, $this->item_limit);
      }
    }

    return parent::get_items($start, $end);
  }

  public static function merge_items($urls, $start = 0, $end = 0, $limit = 0)
  {
    if (is_array($urls) && sizeof($urls) > 0)
    {
      $items = array();
      foreach ($urls as $arg)
      {
        if ($arg instanceof SimplePie)
        {
          $items = array_merge($items, $arg->get_items(0, $limit));
        }
        else
        {
          trigger_error('Arguments must be SimplePie objects', E_USER_WARNING);
        }
      }

      usort($items, array(get_class($urls[0]), 'sort_items'));

      if ($end === 0)
      {
        return array_slice($items, $start);
      }
      else
      {
        return array_slice($items, $start, $end);
      }
    }
    else
    {
      trigger_error('Cannot merge zero SimplePie objects', E_USER_WARNING);
      return array();
    }
  }
}

$pie = new SimplePieAlwaysSort();
$pie->set_feed_url(array('http://stackoverflow.com/feeds'));
$pie->init();

foreach ($pie->get_items() as $item)
{
  // do stuff
} 
```

# matplotlib - 绘制熊猫数据框时日期显示不正确

> ID：14513339
> 
> 赞同：1
> 
> 时间：2013-01-25T00:26:24.023
> 
> 标签：matplotlib, dataframe, pandas

首先，如果我使用 DataReader 读取数据，然后绘图，一切都很好

```
In [55]: t = DataReader('SPY','yahoo', start=datetime.datetime(1990,1,1))

In [56]: t
Out[56]: 
<class 'pandas.core.frame.DataFrame'>
Index: 5033 entries, 1993-01-29 00:00:00 to 2013-01-23 00:00:00
Data columns:
Open         5033  non-null values
High         5033  non-null values
Low          5033  non-null values
Close        5033  non-null values
Volume       5033  non-null values
Adj Close    5033  non-null values
dtypes: float64(5), int64(1)

In [58]: t.plot()
Out[58]: <matplotlib.axes.AxesSubplot at 0x8cca790> 
```

但是，如果我将其保存为 csv 文件并再次重新加载，则会收到错误消息，并且情节也不完全正确，

```
In [62]: t.to_csv('spy.csv')

In [63]: s = pd.read_csv('spy.csv', na_values=[" "])

In [64]: s.set_index('Date')
Out[64]: 
<class 'pandas.core.frame.DataFrame'>
Index: 5033 entries, 1993-01-29 00:00:00 to 2013-01-23 00:00:00
Data columns:
Open         5033  non-null values
High         5033  non-null values
Low          5033  non-null values
Close        5033  non-null values
Volume       5033  non-null values
Adj Close    5033  non-null values
dtypes: float64(5), int64(1)

In [66]: s.plot()                                                            
--------------------------------------------------------------------------- 
AttributeError                            Traceback (most recent call last) 
/home/dli/pythonTest/pandas/<ipython-input-66-d3eb09d34df4> in <module>()   
----> 1 s.plot()                                                            

/usr/lib/pymodules/python2.7/pandas/core/frame.pyc in plot(self, subplots, sharex, sharey, use_index, figsize, grid, legend, rot, ax, kind, **kwds)
3748                     ax.legend(loc='best')                              
3749                 else:                                                  
-> 3750                     ax.plot(x, y, label=str(col), **kwds)           
3751                                                                        
3752                 ax.grid(grid)                                          

/usr/lib/pymodules/python2.7/matplotlib/axes.pyc in plot(self, *args, **kwargs)
3891         lines = []                                                     
3892                                                                        
-> 3893         for line in self._get_lines(*args, **kwargs):               
3894             self.add_line(line)                                        
3895             lines.append(line)                                         

/usr/lib/pymodules/python2.7/matplotlib/axes.pyc in _grab_next_args(self, *args, **kwargs)
    320                 return                                              
    321             if len(remaining) <= 3:                                 
--> 322                 for seg in self._plot_args(remaining, kwargs):      
    323                     yield seg                                       
    324                 return                                              

/usr/lib/pymodules/python2.7/matplotlib/axes.pyc in _plot_args(self, tup, kwargs)
    279         ret = []                                                    
    280         if len(tup) > 1 and is_string_like(tup[-1]):                
--> 281             linestyle, marker, color = _process_plot_format(tup[-1])
    282             tup = tup[:-1]                                          
    283         elif len(tup) == 3:                                         

/usr/lib/pymodules/python2.7/matplotlib/axes.pyc in _process_plot_format(fmt)
    93     # handle the multi char special cases and strip them from the    

    94     # string                                                         

---> 95     if fmt.find('--')>=0:                                           
    96         linestyle = '--'                                             
    97         fmt = fmt.replace('--', '')                                  

AttributeError: 'numpy.ndarray' object has no attribute 'find' 
```

知道如何解决吗？

谢谢。担

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T00:41:33.360

该[`set_index`](http://pandas.pydata.org/pandas-docs/dev/generated/pandas.DataFrame.set_index.html)方法默认*返回*一个新的DataFrame，而不是就地应用这个（实际上大多数pandas函数都是类似的）。它有一个`inplace`论点：

```
s.set_index('Date', inplace=True)
s.plot() 
```

*如您所愿！*

注意：要将索引转换为 DatetimeIndex，您可以使用`to_datetime`：

```
s.index = s.index.to_datetime() 
```

.

也就是说，`s`你保持不变`.set_index('Date')`：

```
In [63]: s = pd.read_csv('spy.csv', na_values=[" "])

In [64]: s.set_index('Date')
Out[64]: 
<class 'pandas.core.frame.DataFrame'>
Index: 5033 entries, 1993-01-29 00:00:00 to 2013-01-23 00:00:00
Data columns:
Open         5033  non-null values
High         5033  non-null values
Low          5033  non-null values
Close        5033  non-null values
Volume       5033  non-null values
Adj Close    5033  non-null values
dtypes: float64(5), int64(1)

In [65]: s
Out[65]: 
<class 'pandas.core.frame.DataFrame'>
Int64Index: 5033 entries, 0 to 5032
Data columns:
Date         5033  non-null values
Open         5033  non-null values
High         5033  non-null values
Low          5033  non-null values
Close        5033  non-null values
Volume       5033  non-null values
Adj Close    5033  non-null values
dtypes: float64(5), int64(1), object(1) 
```

# c# - 使用自定义函数对asp进行排序：GridView

> ID：14513340
> 
> 赞同：0
> 
> 时间：2013-01-25T00:26:23.840
> 
> 标签：c#, asp.net, sorting, gridview

这是网格视图：

```
<asp:GridView ID="MyGridView" runat="server" AllowPaging="true" AllowSorting="true"
    OnPageIndexChanging="MyGridView_PageIndexChanging"
    OnSorting="MyGridView_Sorting">
    <Columns>
        <asp:TemplateField HeaderText="ID" SortExpression="Id">
            <ItemTemplate>
                <asp:Label ID="idLabel" runat="server" Text='<%# Bind("Id") %>' />
            </ItemTemplate>
       </asp:TemplateField>
    </Columns>
</asp:GridView> 
```

这里，Id 列是一个字符串，总是由字母“T”后跟一个数字组成，即“T1”或“T597”。其他列是相当普通的名称和描述字符串字段。

我需要这个 Id 列进行排序，就好像 Id 是数字一样，忽略前面的字母。但因为它在那里，它被视为一个字符串并按如下方式排序：T1、T10、T100、T2、T231、T34、...

所以我认为可能的是：

```
protected void MyGridView_Sorting(object sender, GridViewSortEventArgs e)
{
    if (e.SortExpression.Equals("Id")
    {
         // Special sorting code
    }
    else
    {
        // Normal sorting code
    }
} 
```

其中“正常”排序代码遵循转换`DataSource`为`DataView`和设置`DataView.Sort = e.SortExpression`等的常见模式，例如：[允许按列 gridview 排序](https://stackoverflow.com/questions/10776372/allow-sorting-by-column-gridview)

那么对于“特殊”排序代码我该怎么办？

更新：为了清楚起见，我可以根据需要滚动自己的函数来比较两个字符串。但是，我不知道如何*将该*功能应用于我的数据网格/数据源。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T01:43:38.457

您可以为 DataGridView.Sort 实现 IComparer 类：

[http://msdn.microsoft.com/en-us/library/wstxtkxs%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/wstxtkxs%28v=vs.85%29.aspx)

您可以在比较方法中将“T”和以下数字分开。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T20:13:52.013

`GridView`允许`DataKeyNames`，这就是这里的解决方案。在设置数据源时（在我的例子中，一个 SQL 查询）包括“FullId”和一个“PlainId”，它已经剥离了前导字符并将其余部分解析为 int。使用“FullId”作为列的文本值，但将“PlainId”设为其中之一`DataKeyNames`并将其用作`SortExpression`列的。

# delphi - 对多个 Windows 版本和 32/64 使用 GetUserName

> ID：14513345
> 
> 赞同：-1
> 
> 时间：2013-01-25T00:26:51.510
> 
> 标签：delphi, winapi

`GetUserName`是否可以通过 Windows 8使用 Windows XP 的 Win API 功能？对于 32 位和 64 位？

```
function getUserName: String;
var
  BufSize: DWord;
  Buffer: PWideChar;
begin
 BufSize:= 1024;
 Buffer:= AllocMem(BufSize);
 try
  if GetUserName(Buffer, BufSize) then
      SetString(result, Buffer, BufSize)
 else
  RaiseLastOSError;
 finally
  FreeMem(Buffer);
 end;
end; 
```

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T01:55:34.433

答案是肯定的。 `GetUserName()`适用于所有 Windows 版本。

但是，您显示的代码只能在 Delphi 2009 及更高版本上编译，因为您正在传递一个`PWideChar`to`GetUserName()`和`SetString()`，它仅在`GetUserName()`映射到`GetUserNameW()`和`String`映射到时才有效`UnicodeString`。如果您需要在早期的 Delphi 版本上编译代码，请使用`PChar`而不是`PWideChar`, 来匹配任何映射`GetUserName()`并`String`实际使用，例如：

```
function getUserName: String;
const
  UNLEN = 256;
var
  BufSize: DWord;
  Buffer: PChar;
begin
  BufSize := UNLEN + 1;
  Buffer := StrAlloc(BufSize);
  try
    if Windows.GetUserName(Buffer, BufSize) then
      SetString(Result, Buffer, BufSize-1)
    else
      RaiseLastOSError;
  finally
    StrDispose(Buffer);
  end;
end; 
```

然后可以简化为：

```
function getUserName: String;
const
  UNLEN = 256;
var
  BufSize: DWord;
  Buffer: array[0..UNLEN] of Char;
begin
  BufSize := Length(Buffer);
  if Windows.GetUserName(Buffer, BufSize) then
    SetString(Result, Buffer, BufSize-1)
  else
    RaiseLastOSError;
end; 
```

或这个：

```
function getUserName: String;
const
  UNLEN = 256;
var
  BufSize: DWord;
begin
  BufSize := UNLEN + 1;
  SetLength(Result, BufSize);
  if Windows.GetUserName(PChar(Result), BufSize) then
    SetLength(Result, BufSize-1)
  else
    RaiseLastOSError;
end; 
```

# c++ - 枚举的命名空间问题

> ID：14513347
> 
> 赞同：0
> 
> 时间：2013-01-25T00:26:59.537
> 
> 标签：c++

使用带有命名空间的枚举时遇到问题。

下面是函数调用：

```
object->writeMessage(tmpZone->getLineOne(), tmpZone->getLine(), tmpZone->getPosition()); 
```

编译器的问题来自

```
tmpZone->getLine() 
```

Zone 类（在洞察命名空间中）的 getLine() 原型是：

```
Line getLine(); 
```

它返回洞察命名空间中的枚举类型。此函数调用位于 using 命名空间洞察下的 cpp 文件中；线。

编译器错误是

> C:/WindRiver/workspace/SimpleTemplate/InsightLT.cpp: 在静态成员函数`static int insight::InsightLT::taskFunction(insight::InsightLT*)': C:/WindRiver/workspace/SimpleTemplate/InsightLT.cpp:161: error: no matching function for call to` insight::InsightLT::writeMessage(std::string, Line, int)' C:/WindRiver/workspace/SimpleTemplate/InsightLT.cpp:82:注意：候选人是：void insight::InsightLT::writeMessage(std::string, insight::Line, int)

我想不出为什么会这样。Zone 类也在洞察命名空间中定义。有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T00:40:37.087

编译器无法解析`Line`from `insight namespace`，您可以在函数定义中提供完整的命名空间，也可以将 cpp 包装在`namespace insight`.

尝试：

```
namespace insight {
  void InsightLT::writeMessage(std::string, insight::Line, int)
  {    
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T21:05:22.687

我能够编译它，但我不知道为什么我所做的工作。为了完整和结束，我想把它放在这里。

我在命名空间范围内声明 Line 枚举和另一个枚举以及另一个类。我删除了枚举并将它们放在与以前相同的命名空间中的自己的头文件中，现在它可以编译了。

我不确定我错过了什么，这解决了这个问题。如果有人有任何考虑，请评论这可能已解决的问题。

感谢那些试图提供帮助的人，对不起，我无法整理一个显示错误的示例。

# angularjs - 使用 QueryString 参数导航到 AngularJS 的 SPA

> ID：14513348
> 
> 赞同：2
> 
> 时间：2013-01-25T00:26:59.577
> 
> 标签：angularjs, single-page-application, angular-routing

我的 SPA 的链接由绝对 URL + Query-String 参数构成，如下所示：

```
http://127.0.0.1/Pepole/Index?personId=[some_ID] 
```

我的路线配置是：

```
tmc.config(['$routeProvider', function ($routeProvider) {
        $routeProvider.when('/', { templateUrl: '/People/Person', controller: peopleController });
        $routeProvider.otherwise({ redirectTo: '/' });
}]); 
```

给定我的配置，当路由到 时`/`，我如何保留`personId`参数以便它在相应的控制器 ( `peopleController`) 中可用并且我将能够访问它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T07:23:11.283

[http://docs.angularjs.org/api/ng.$location#search](http://docs.angularjs.org/api/ng.%24location#search)

> ## 搜索（搜索，参数值）
> 
> 这个方法是getter/setter。
> 
> 不带任何参数调用时返回当前 url 的搜索部分（作为对象）。
> 
> 使用参数调用时更改搜索部分并返回`$location`。
> 
> *参数*
> `search(optional)`– `{string|object<string,string>=}`– 新搜索参数 – 字符串或散列对象
> `paramValue(optional)`– `{string=}`– 如果`search`是字符串，`paramValue`则将仅覆盖单个搜索参数。如果值为`null`，则删除该参数。
> *退货*
> `{string} – search`

```
function SomeCtrl($scope, $location) {
    $scope.personId = $location.search().personId;
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-25T22:59:41.760

在控制器中注入 $routeParams，然后只需调用 $routeParams.yourQueryParameter。

例如：

```
function SomeCtrl($scope, $routeParams) {
    $scope.personId = $routeParams.personId;
} 
```

# git - E325：注意找到名为“.git/.COMMIT_EDITMSG.swp”的交换文件

> ID：14513349
> 
> 赞同：42
> 
> 时间：2013-01-25T00:27:03.367
> 
> 标签：git, github

我已经和一个团队一起工作了将近一年。使用 github/git 来拉取和推送更改总是很容易的：

```
git pull
git add .
git commit -a -m "my work desc"
git push 
```

直到最近，这一直很好。现在无论如何，如果其他人推了，每当我尝试拉时，我都会收到以下消息：

```
E325: ATTENTION
Found a swap file by the name ".git/.COMMIT_EDITMSG.swp"
          owned by: X   dated: Wed Jan 23 16:01:06 2013
         file name: ~X/Sites/mysite/.git/COMMIT_EDITMSG
          modified: no
         user name: X   host name: X-2.local
        process ID: 77109
While opening file ".git/COMMIT_EDITMSG"
             dated: Thu Jan 24 16:22:48 2013
      NEWER than swap file!

(1) Another program may be editing the same file.
    If this is the case, be careful not to end up with two
    different instances of the same file when making changes.
    Quit, or continue with caution.

(2) An edit session for this file crashed.
    If this is the case, use ":recover" or "vim -r .git/COMMIT_EDITMSG"
    to recover the changes (see ":help recovery").
    If you did this already, delete the swap file ".git/.COMMIT_EDITMSG.swp"
    to avoid this message.

Swap file ".git/.COMMIT_EDITMSG.swp" already exists!
[O]pen Read-Only, (E)dit anyway, (R)ecover, (D)elete it, (Q)uit, (A)bort: 
```

每次没有失败时都会发生这种情况。我最终可以通过插入一条消息、保存并重新提交来解决这个问题，但这很痛苦。知道为什么这种情况不断发生以及可以做些什么吗？

谢谢

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-01-25T19:37:44.857

除非您需要**.git/.COMMIT_EDITMSG.swp**用于其他目的，否则您可以使用：

```
git rm .git/.COMMIT_EDITMSG.swp 
```

从存储库中删除文件。

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2016-02-24T19:48:24.327

我遇到了同样的问题，由于某种原因，使用`git rm`对我不起作用。

为了解决这个问题，我只是删除了文件：`$ rm .git/.COMMIT_EDITMSG.swp`这就解决了问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-12T06:12:42.127

如果在从另一个分支合并后出现此交换错误消息，您只需提交更改。我 git 添加了 - 绿色文件未提交。我提交了文件 - 然后完成了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-06-27T14:35:27.057

我尝试删除该消息，但它失败并抱怨我没有这样的文件。`-m`因此，我在执行时添加了一条提交消息，`git commit -m`并且警告不再显示。

# eclipse - RAD/Eclipse 配置 JPA 实体失败

> ID：14513350
> 
> 赞同：0
> 
> 时间：2013-01-25T00:27:03.313
> 
> 标签：eclipse, jsf, jpa, portlet, rad

以前在“配置 JPA 实体...”时运行 portlet 会引发错误（昨天已成功使用此功能）。留言如下

```
org.eclipse.core.runtime.CoreException: org/eclipse/jpt/ui/internal/utility/SynchronousUiCommandExecutor
    at org.eclipse.wst.common.frameworks.internal.datamodel.ui.DataModelWizard.performFinish(Unknown Source)
    at org.eclipse.jface.wizard.WizardDialog.finishPressed(Unknown Source)
    at org.eclipse.jface.wizard.WizardDialog.buttonPressed(Unknown Source)
    at org.eclipse.jface.dialogs.Dialog$2.widgetSelected(Unknown Source)
    at org.eclipse.swt.widgets.TypedListener.handleEvent(Unknown Source)
    at org.eclipse.swt.widgets.EventTable.sendEvent(Unknown Source)
    at org.eclipse.swt.widgets.Widget.sendEvent(Unknown Source)
    at org.eclipse.swt.widgets.Display.runDeferredEvents(Unknown Source)
    at org.eclipse.swt.widgets.Display.readAndDispatch(Unknown Source)
    at org.eclipse.jface.window.Window.runEventLoop(Unknown Source)
    at org.eclipse.jface.window.Window.open(Unknown Source)
    at com.ibm.jee.jpa.entity.config.internal.launcher.AbstractDialogLauncher.launch(Unknown Source)
    at com.ibm.jee.jpa.entity.config.internal.launcher.AbstractEntityConfigWizardLauncher.launch(Unknown Source)
    at com.ibm.jee.jpa.entity.config.internal.action.EntityConfigAction.run(Unknown Source)
    at org.eclipse.ui.internal.PluginAction.runWithEvent(Unknown Source)
    at org.eclipse.jface.action.ActionContributionItem.handleWidgetSelection(Unknown Source)
    at org.eclipse.jface.action.ActionContributionItem.access$2(Unknown Source)
    at org.eclipse.jface.action.ActionContributionItem$5.handleEvent(Unknown Source)
    at org.eclipse.swt.widgets.EventTable.sendEvent(Unknown Source)
    at org.eclipse.swt.widgets.Widget.sendEvent(Unknown Source)
    at org.eclipse.swt.widgets.Display.runDeferredEvents(Unknown Source)
    at org.eclipse.swt.widgets.Display.readAndDispatch(Unknown Source)
    at org.eclipse.ui.internal.Workbench.runEventLoop(Unknown Source)
    at org.eclipse.ui.internal.Workbench.runUI(Unknown Source)
    at org.eclipse.ui.internal.Workbench.access$4(Unknown Source)
    at org.eclipse.ui.internal.Workbench$7.run(Unknown Source)
    at org.eclipse.core.databinding.observable.Realm.runWithDefault(Unknown Source)
    at org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Unknown Source)
    at org.eclipse.ui.PlatformUI.createAndRunWorkbench(Unknown Source)
    at org.eclipse.ui.internal.ide.application.IDEApplication.start(Unknown Source)
    at org.eclipse.equinox.internal.app.EclipseAppHandle.run(Unknown Source)
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(Unknown Source)
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(Unknown Source)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(Unknown Source)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(Unknown Source)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.eclipse.equinox.launcher.Main.invokeFramework(Unknown Source)
    at org.eclipse.equinox.launcher.Main.basicRun(Unknown Source)
    at org.eclipse.equinox.launcher.Main.run(Unknown Source)
    at org.eclipse.equinox.launcher.Main.main(Unknown Source)
Contains: org/eclipse/jpt/ui/internal/utility/SynchronousUiCommandExecutor
Contains: org/eclipse/jpt/ui/internal/utility/SynchronousUiCommandExecutor
Contains: org/eclipse/jpt/ui/internal/utility/SynchronousUiCommandExecutor
java.lang.NoClassDefFoundError: org/eclipse/jpt/ui/internal/utility/SynchronousUiCommandExecutor
    at com.ibm.jee.jpa.entity.config.internal.codegen.EntityConfigCodeGenOperation.run(Unknown Source)
    at com.ibm.jee.jpa.entity.config.internal.wizard.entityconfig.operation.JpaEntityConfigWizardDelegateOperation.execute(Unknown Source)
    at com.ibm.jee.jpa.entity.config.internal.wizard.entityconfig.operation.JpaBaseWizardOperation$WizardWorkspaceBatchOperation.run(Unknown Source)
    at org.eclipse.jdt.internal.core.BatchOperation.executeOperation(Unknown Source)
    at org.eclipse.jdt.internal.core.JavaModelOperation.run(Unknown Source)
    at org.eclipse.core.internal.resources.Workspace.run(Unknown Source)
    at org.eclipse.jdt.core.JavaCore.run(Unknown Source)
    at org.eclipse.jdt.core.JavaCore.run(Unknown Source)
    at com.ibm.jee.jpa.entity.config.internal.wizard.entityconfig.operation.JpaBaseWizardOperation$WizardWorkspaceBatchJob.run(Unknown Source)
    at com.ibm.jee.jpa.entity.config.internal.wizard.entityconfig.operation.JpaBaseWizardOperation.execute(Unknown Source)
    at org.eclipse.wst.common.frameworks.internal.datamodel.DataModelPausibleOperationImpl$1.run(Unknown Source)
    at org.eclipse.core.internal.resources.Workspace.run(Unknown Source)
    at org.eclipse.wst.common.frameworks.internal.datamodel.DataModelPausibleOperationImpl.runOperation(Unknown Source)
    at org.eclipse.wst.common.frameworks.internal.datamodel.DataModelPausibleOperationImpl.runOperation(Unknown Source)
    at org.eclipse.wst.common.frameworks.internal.datamodel.DataModelPausibleOperationImpl.doExecute(Unknown Source)
    at org.eclipse.wst.common.frameworks.internal.datamodel.DataModelPausibleOperationImpl.executeImpl(Unknown Source)
    at org.eclipse.wst.common.frameworks.internal.datamodel.DataModelPausibleOperationImpl.cacheThreadAndContinue(Unknown Source)
    at org.eclipse.wst.common.frameworks.internal.datamodel.DataModelPausibleOperationImpl.execute(Unknown Source)
    at org.eclipse.wst.common.frameworks.internal.datamodel.ui.DataModelWizard$1CatchThrowableRunnableWithProgress.run(Unknown Source)
    at org.eclipse.jface.operation.ModalContext$ModalContextThread.run(Unknown Source) 
```

一些上下文 - 在 RAD 中开发的 portlet 应用程序作为 JPA 的学习演示，基本的 JSF 功能。使用 RAD 8.5、JSF 2.0 和 primefaces。最近的更改是为 jsf 组件导入 primefaces 功能并链接到此功能。JPA 连接应该仍在工作，因为网页仍在获取数据（重新启动后，因此不应缓存）。

有任何想法吗..

# php - 无论如何要通过 PHP FORM 缩短 URL？

> ID：14513352
> 
> 赞同：0
> 
> 时间：2013-01-25T00:27:10.767
> 
> 标签：php, forms, tinyurl

我目前有人用以下信息填写表格：

1.  你的名字
2.  收件人姓名
3.  信息
4.  数量

我想知道当他们填写这些信息时我怎么能得到它，它将它输入到一个链接中。例如，这是我现在使用的代码，它可以工作：

```
http://mywebsite.com/picture.php?to=" . $rname . "&from=" . $sname . "&message=" . $message . "&amount=" . $amount . 
```

我现在想知道如何使该链接更短？也许使用 TINY URL API 之类的？但是我该怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T00:33:56.380

正如您已经强调的那样，最好的方法是通过 API。如果您安装了 CURL，那么使用 Tiny URL API 实际上非常容易：

```
function get_tiny_url($url)  {  
    $ch = curl_init();  
    $timeout = 5;  
    curl_setopt($ch,CURLOPT_URL,'http://tinyurl.com/api-create.php?url='.$url);  
    curl_setopt($ch,CURLOPT_RETURNTRANSFER,1);  
    curl_setopt($ch,CURLOPT_CONNECTTIMEOUT,$timeout);  
    $data = curl_exec($ch);  
    curl_close($ch);  

    return $data;  
}

//test it out!
$your_url = 'http://mywebsite.com/picture.php?to=' . $rname . '&from=' . $sname . '&message=' . $message . '&amount=' . $amount;
$short_url = get_tiny_url($your_url);

//returns your tiny url
echo $short_url; 
```

[来源](http://davidwalsh.name/create-tiny-url-php)

# php - PHPDoc：用可变数量的参数记录函数

> ID：14513356
> 
> 赞同：32
> 
> 时间：2013-01-25T00:27:41.697
> 
> 标签：php, phpdoc

记录接受可变数量参数的类方法的推荐方法是什么？

也许是这样的？

```
<?php

class Foo {
    /**
     * Calculates the sum of all the arguments.
     *
     * @param mixed [$arg1, $arg2, ...]
     *
     * @return float the calculated sum
     */
    public static function sum() {
        return array_sum(func_get_args());
    }
} 
```

注意：作为一般规则，我想应该尽可能避免这种类型的事情。话虽如此，最好仍然记录其余一些无法避免的情况。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2016-07-08T22:03:27.167

如果您使用可变数量的参数并且还使用，`PHP >= 5.6`那么您可以使用仍然符合`,...`已经提到的 PHPDoc 语法的可变参数函数（允许可变数量的参数），并且 PHPStorm 也将正确解释文档。使用可变参数函数无需`func_get_args()`将参数捕获到数组中。

```
/**
 * @param mixed $args,... Explainatorium!
 */
function variadiculous(...$args) {
    // NOTE: $args === func_get_args()
    foreach ( $args as $arg ) {
        /* do work */
    }
} 
```

PHPStorm 将自动生成文档，`@param array $args`因为从技术上讲，当函数内部`variadiculous` `is_array($args)`为真时。我将其更改`@param mixed $args,...`为如上所示，当我使用热键在我的代码 PHPStorm 显示的其他位置显示函数签名时`variadiculous($args : ...array|mixed)`——如果您使用 PHP >= 5.6，我建议使用此方法

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-01-25T00:48:16.040

```
/**
 * @param mixed $numbers,... Description
 */
Public function sum ($numbers) 
```

在该方法中，不会使用 $numbers。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2017-04-25T23:31:02.097

在[`...`语法](http://php.net/manual/en/functions.arguments.php#functions.variable-arg-list)的情况下，PHPStorm 2017.1 使用：

```
/**
 * @param Type[] ...$values One or more values.
 */
public function func(Type ...$values) {
    // ...
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-12-16T17:38:10.383

值得注意的是，使用 doc 块，例如：

```
/**
 * @param Type[] ...$values One or more values.
 */
public function func(Type ...$values) {
    // ...
} 
```

...看起来你可以传递一个数组`Type`，例如

```
Foo()->func([Type, Type, Type]) 
```

...这会引发致命错误，显然是现在。

在哪里：

```
Foo()->func(...[Type, Type, Type]) 
```

...不会因为您在方法调用中对其进行了解构。

无论如何，这里的重点是我正在试验 PHPStorm 如何处理 doc 块，并且取决于您`$args`在 doc 块中定位变量的方式，`...$args`或者`$args,...`确定您在 IDE 中返回的提示类型。

如果您有一个可选长度的函数/方法参数，我真的想要一种方法来建议您应该按名称将值传递到下面示例图像中的方法中，并具有它们应该传递的特定顺序。

您可能会想，“只需设置默认参数`$arg1 = 'default', $arg2 = true`”，这通常是有道理的，但在某些情况下

伪示例：

```
/**
 * @param int ...$args Hour, Minute, Second, Timezone, $arg [, ...$args]
 */
public static function createA(int ...$args) {}

/**
 * @param int $args,... Hour, Minute, Second, Timezone, $arg [, ...$args]
 */
public static function createB(int ...$args) {}

/**
 * @param int[]|int $args,... Hour, Minute, Second, Timezone, $arg [, ...$args]
 */

public static function createC(int ...$args) {} 
```

[![在此处输入图像描述](../Images/b68c90ec006f95bdd9ca33725c7ba745.png)](https://i.stack.imgur.com/aXGbO.png)

...所以：

*   [https://stackoverflow.com/a/38275992/1290575](https://stackoverflow.com/a/38275992/1290575)
*   [https://stackoverflow.com/a/43622600/1290575](https://stackoverflow.com/a/43622600/1290575)

...是正确的答案（请记住 orientaton: `...$args`or `$args,...`）

# php - 为什么 jquery 找不到并返回所有 html 标签，即正文/标题

> ID：14513357
> 
> 赞同：2
> 
> 时间：2013-01-25T00:27:41.947
> 
> 标签：php, jquery

我在这方面花了很长时间，不明白为什么它不起作用。我正在使用 ajax 向 php curl 发送一个帖子，其中包含一个 url，然后返回到 ajax。当我发送警报时，该页面的所有 html 都会显示在警报中。现在我想使用 jquery 来查找每个元素，即 body、h1、title 并输出内容，但是当我这样做时，它不适用于 body 或 title。这是为什么？

这是我的jQuery

```
 $.ajax({
      type: "POST",
      url: "senddom.php",
      data: {"dataString" : dataString },
      success: function(response) {   
  $('body').append("<p> contents of title:" + $(this).find('title').html() + "</p>");       
  $('body').append("<p> contents of all: " + $(this).find('body').html() + "</p>");

 $(response).find('h1').each(function() {
  $('body').append("<p> contents of H1: " + $(this).text() + "</p>");
}); 
```

这是我的 php

```
<?php 

    $site= $_POST['dataString'];             // get data
function curl_get($site){
    $useragent = 'Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 5.1; .NET CLR 1.0.3705; .NET CLR 1.1.4322; Media Center PC 4.0)';
    $ch = curl_init();
    curl_setopt($ch, CURLOPT_URL,$site);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
    curl_setopt($ch,CURLOPT_CONNECTTIMEOUT,5);
    curl_setopt($ch, CURLOPT_USERAGENT, $useragent);

    $data=curl_exec($ch);
    curl_close($ch);
    return $data;

}

function getdom($site){
    $html = curl_get($site);
    $xml = new DOMDocument();
    @$xml->loadHTML($html);
    echo($html);

}

echo getdom($site);

?> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-25T00:30:45.707

在你的成功块内：`$(this)`->`$(response)`

**跟进：全文 HTML 与片段**

虽然这似乎可以解决眼前的问题，但这取决于您的响应是否是完整的 HTML 正文。

在这种情况下，看起来好像`response` *是*全文 HTML。

jQuery parseHTML 方法不处理全文 HTML，很遗憾`response`无法正确解析。更多信息请参见：[https ://github.com/jquery/jquery/blob/master/src/core.js](https://github.com/jquery/jquery/blob/master/src/core.js)

在您希望解析全文 HTML 的情况下，一种方法是使用[DOMParser API](https://developer.mozilla.org/en-US/docs/DOM/DOMParser)。值得注意的是，`"text/html"`目前缺乏对解析的支持；仅在 Firefox 中可用。另一种方法是`document.implementation`支持除 IE<9 之外的所有版本。

也就是说，在您想要使用的情况下的一个示例`DOMParser`-

```
parser = new DOMParser();
doc = parser.parseFromString(response, "text/html");
$response = $(doc)
$response.find('title').text() 
```

您要使用的示例`documentation.implementation`-

```
var doc = document.implementation.createHTMLDocument("");
var doc_el = doc.documentElement;
doc_el.innerHTML = response;
$response = $(doc_el); // 
$response.find('title').text() 
```

有关更多信息，我将参考我在 github 上找到的一个不错的 jQuery 插件（处理 x 浏览器支持）：[jquery.parsehtml.js](https://github.com/panzi/jQuery-Parse-HTML/blob/master/jquery.parsehtml.js)。

# sql - SQL Server 存储过程 - 转换错误

> ID：14513360
> 
> 赞同：1
> 
> 时间：2013-01-25T00:27:47.293
> 
> 标签：sql, sql-server, stored-procedures

我的存储过程有一点问题。它给了我这个错误：

> *将 varchar 值“Cluj-Napoca”转换为数据类型 int 时转换失败。*

这是我的代码：

```
CREATE PROCEDURE UjVasarlas
@JID int,
@SZID int,
@Nev varchar(30),
@Cim varchar(30),
@Darab int,
@Datum varchar(30)
AS
SET NOCOUNT ON;
DECLARE @maxId int;
        SET @maxId = (SELECT MAX(VevoID) FROM Vevo);
iF EXISTS (SELECT * FROM Vevo WHERE Vevo.VevoNev = @Nev)
    begin
        INSERT INTO Vasarlas VALUES (@maxId+1, @JID, @SZID, @Darab, @Datum)
    end
    else
        INSERT INTO Vevo VALUES (@maxId+1, @Nev, @Cim, 1)
        INSERT INTO Vasarlas VALUES (@maxId+1, @JID, @SZID, @Darab, @Datum)

 GO     

 EXEC UjVasarlas 2, 2, 'Your Name', 'Your City', 2, '2013-01-22' 
```

如果它有帮助，我可以告诉你它的用途，但我不想浪费时间......有人可以帮忙吗？... thx 预期 ;)

PS：

现在它有另一个问题：

> *INSERT 语句与 FOREIGN KEY 约束“FK__Vasarlas__VevoID__47E69B3D”冲突。冲突发生在数据库“master”、表“dbo.Vevo”、列“VevoID”中。*

这两个表如下所示：

*   `Vasarlas`( `VevoID, JatekID, SzallitoID, Darab, Datum`)
*   `Vevo`( `VevoID, VevoNev, OrszagID, Cim`)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T00:33:20.470

我的猜测是您的表架构与您插入的列不匹配，请尝试明确指定您的列

```
INSERT INTO Vasarlas(col1, col2, col3, col4, col5) 
VALUES (@maxId+1, @JID, @SZID, @Darab, @Datum) 
```

获取列列表的最简单方法是从 SQL Server Management Studio 的资源管理器中拖放它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T00:38:01.583

您有三个 varchar 参数，@Nev、@Cim 和 @Datum。

似乎您尝试将其中一个插入整数列。检查 Vasarlas 和 Vevo 表或更好地捕获开始结束块以确定哪个插入语句导致错误...

顺便一提; EXEC UjVasarlas 2, 2, 'Your Name', 'Your City', 2, '2013-01-22' 无法返回未包含在您发送的参数中的“Cluj-Napoca”字符串的错误。

如果“Cluj-Napoca”在“您的城市”空间中，则意味着您的问题是 @Cim 参数。你只在一个地方使用它，在其他博客中；插入 Vevo 值（@maxId+1、@Nev、@Cim、1）

检查表**Vevo**，可能该表的第 3 列（您尝试插入 @Cim 参数）是 INT 而不是 VARCHAR

# php - PHP 从数组创建新类型的数组

> ID：14513361
> 
> 赞同：0
> 
> 时间：2013-01-25T00:27:47.937
> 
> 标签：php, arrays, multidimensional-array

我有以下数据数组：

```
$data = array(
 0 => array(
   'firstname' => 'John',
   'lastname' => 'Doe'
 ),
 1 => array(
   'firstname' => 'Foo',
   'lastname' => 'Bar'
 )
) 
```

我想操纵它以得到这个数组：

```
$finalData = array(
 'firstname' => array('John','Foo'),
 'lastname' => array('Doe','Bar')
) 
```

如何使用 PHP 完成此任务？如果可以在这种情况下使用，我很想了解 PHP 数组方法。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T00:42:49.903

这给了你想要的；

```
$new_data = array();
foreach ($data as $d) {
    $keys = array_keys($d);
    foreach ($keys as $k) {
        $new_data[$k][] = $d[$k];
    }
}
print_r($new_data); 
```

结果;

```
大批
(
    [名字] => 数组
        (
            [0] => 约翰
            [1] => 富
        )

    [姓氏] => 数组
        (
            [0] => 母鹿
            [1] => 酒吧
        )

)

```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T00:34:24.900

`array_map`这对于诸如不射中自己的脚之类的功能来说太专业了。但是你可以很容易地用一个`foreach`循环来做到这一点：

```
$finalData = array();
foreach ($data as $person) {
    $finalData['firstname'][] = $person['firstname'];
    $finalData['lastname'][] = $person['lastname'];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T00:34:49.937

您将不得不遍历 $data 以分别收集名字和姓氏。不幸的是，没有标准的 php 函数可以执行“array pluck”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-25T00:35:09.677

好吧，我认为不存在类似的东西，但我认为您应该阅读[有关数组函数的文档](http://php.net/manual/en/ref.array.php)

如果您没有找到任何东西，请自己制作一些东西（可能使用 array_map），然后回答您自己的问题。

# r - grep 以连续数字作为后缀的 var 名称

> ID：14513365
> 
> 赞同：0
> 
> 时间：2013-01-25T00:28:05.430
> 
> 标签：r, regex, data-manipulation

我想要数据框中某些变量的索引，但我的`grep()`技能不足。

假设我有这个数据框，

```
( dfn <- data.frame(
a1   = c(3,  3, 0,  3, 0,   0),
a2   = c(1, NA, 0, NA, 1,   4),
a11  = c(0,  3, NA, 1, 3,   1),
a12  = c(0,  3, NA, 1, 3,   3),
a_12 = c(0,  3, NA, 1, NA, NA),
a_1  = c(12, 3, NA, 1, 4,  NA)) )
  a1 a2 a11 a12 a_12 a_1
1  3  1   0   0    0  12
2  3 NA   3   3    3   3
3  0  0  NA  NA   NA  NA
4  3 NA   1   1    1   1
5  0  1   3   3   NA   4
6  0  4   1   3   NA  NA 
```

现在，我想要的是*grep* a1、a2、a11 和 a12（在现实生活中，`a`' 后面的 # 是从 1 到 12 的连续列表），我该怎么做？我已经尝试了下面的两个*grep*，但没有运气。

```
foo <- grep('a[1:12]$', names(dfn) )
names(dfn[,foo])
[1] "a1" "a2" 
```

这个我也试过

```
bar <- grep('a[c(1:12)]$', names(dfn) )
names(dfn[,bar])
[1] "a1" "a2" 
```

我想要的是

```
[1] "a1" "a2" "a11" "a12" 
```

其次，谁能指导我一个好的`grep()`教程？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T00:34:41.857

你需要`grep('a[1:12]+', names(dfn))`

实际上，正确的做法是`grep('a[1-9]+', names(dfn))`在 [1-9] 之后加上 +，这意味着 1-9 中的值可以在 a 之后重复任意次数，但必须至少出现一次。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T00:58:53.647

你可以这样做：

```
names(dfn)[names(dfn) %in% paste0("a",1:12)]
[1] "a1"  "a2"  "a11" "a12" 
```

如果您想要索引，这将为您提供：

```
which(names(dfn) %in% paste0("a",1:12))
[1] 1 2 3 4 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-25T01:05:06.380

```
regmatches(names(dfn),regexpr('a[1-9]{1,2}',names(dfn)))
[1] "a1"  "a2"  "a11" "a12" 
```

我的正则表达式是：a 后跟 min =1 和 max =2 集合中的数字 [1-9]

# java - 如何使用 ormlite 4.42 持久化 ForeignCollection？

> ID：14513366
> 
> 赞同：1
> 
> 时间：2013-01-25T00:28:07.837
> 
> 标签：java, sqlite, ormlite, foreign-collection

我正在尝试在桌面应用程序上使用 ormlite 4.42 和 sqlite持久化一个惰性[ForeignCollection 。](http://ormlite.com/javadoc/ormlite-core/doc-files/ormlite_2.html#SEC30)

我有一个`Event`包含以下集合的类`EventDate`：

```
@DatabaseTable(tableName = "event")
public class Event extends BaseDaoEnabled<Event, Integer> implements Scrap {

     @DatabaseField(generatedId = true, columnName = "_id")
     private int id;

     @ForeignCollectionField(eager = true)
     private ForeignCollection<EventDate> dates;

} 
```

`EventDate`课程是：

```
@DatabaseTable(tableName = "eventdate")
public class EventDate extends BaseDaoEnabled<EventDate, Integer> {

    @DatabaseField(generatedId = true, columnName = "_id")
    int id;

    @DatabaseField(canBeNull = true, foreign = true)
    Event event;

} 
```

这是我用来添加`EventDates`和持久化它们的代码：

```
 Event e2 = eventDao.queryForId(id));

    e2.getDates().clear();
    for (final EventDate date : dates) {
        e2.getDates().add(date);
        e2.getDates().update(date);
    }
    e2.update(); 
```

已`EvenDates`正确添加到 sqlite 表中，但该字段`event_id`为 null ：`EventDates`未链接到`Event`.

我没有错误信息。我究竟做错了什么 ？

注意：我尝试了急切的收集（添加`e2.getDates().updateAll()`），但它也不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T16:28:58.517

也许这里缺少一个功能。现在，您需要在将事件添加到日期集合之前手动分配日期上的事件：

```
e2.getDates().clear();
for (final EventDate date : dates) {
    // this is necessary unfortunately
    date.setEvent(e2);
    e2.getDates().add(date);
} 
```

我已添加以下票证以供审核：

> [https://sourceforge.net/p/ormlite/feature-requests/31/](https://sourceforge.net/p/ormlite/feature-requests/31/)

# php - 当我的数据库权限受到限制时，如何测试我的 Zend Framework 模型？

> ID：14513368
> 
> 赞同：1
> 
> 时间：2013-01-25T00:28:12.867
> 
> 标签：php, oracle, zend-framework, phpunit, zend-test

我正在开发一个 PHP（Zend Framework 1.12.1）应用程序，该应用程序以某种独特的方式连接到数据库。

基本上，我们有一个对我来说是一个“黑匣子”的 Oracle 数据库。我没有权限直接选择、更新、插入或删除任何行或表。我只能访问数据库视图（仅限选择），当我想插入/更新/删除数据时，我必须调用一个或多个存储过程。我不知道实际的表结构是什么，而且我认为任何时候都不会有人给我访问权限。

所有这一切都使得对我的模型进行单元测试非常困难（更不用说编写它们了），因为 ZF 似乎假设您的应用程序在数据库中拥有完全权限。（这就是为什么我到目前为止只对我的模型进行了手动测试，而且我的模型有些不寻常。）

我的应用程序有效，但我厌倦了手动测试。

以前有没有其他人遇到过这种情况？您能否推荐在数据库权限有限的环境中实现自动化 PHPUnit 测试的具体步骤？我已经要求 db 管理员给我一个`resetTestData()`名为/ 或拆除。显然，在每次测试之前`Zend_Test_PHPUnit_DatabaseTestCase`尝试`truncate`数据集，然后调用`getDataSet()`以获取数据并重新填充数据库。解决问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-03T12:22:59.900

3 种不同类型的测试： - 单元测试（使用模拟等的低级测试） - 集成测试（使用真实数据源的低级测试） - 端到端测试（通过浏览器）

[要么在不需要数据库的地方使用模拟，要么使用selenium](http://docs.seleniumhq.org/)进行端到端测试，这将驱动浏览器作为用户

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T14:34:21.340

创建一个可测试的应用程序并不是那么容易。

你有不同类型的测试，如果你使用单元测试，你永远不应该调用 db、webservices，甚至是文件系统资源。所有这些东西都必须被嘲笑。我知道这很难，但如果你不能，你就会有代码气味。

但是，如果您仍然需要访问数据库，您可以创建自己的测试环境，当您放置本地 Oracle 数据库时，您可以根据需要处理权限。

您可以为您的系统创建一个 APPLICATION_ENV，因为您可以在运行测试时读取特定配置，仅用于使用本地连接而不是 QA（例如）连接。

# php - 函数声明中的类型杂耍

> ID：14513369
> 
> 赞同：1
> 
> 时间：2013-01-25T00:28:15.200
> 
> 标签：php

我只是在这里玩，我的代码：

```
<?php

function test(string $str, array $arr = array()) {
    echo $str;
}
test('something'); 
```

结果是：

可捕获的致命错误：传递给 test() 的参数 1 必须是字符串的实例，给定的字符串

我很好奇为什么我可以毫无问题地先于，但我不能`$arr`先于?`array``$str``string`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T00:30:25.410

到目前为止，字符串还不是受支持的类型提示

编辑：见[http://php.net/manual/en/language.types.type-juggling.php](http://php.net/manual/en/language.types.type-juggling.php)

和

[http://php.net/manual/en/language.oop5.typehinting.php](http://php.net/manual/en/language.oop5.typehinting.php)

# ios - iOS NSKeyedArchiver -- NSMutableDictionary 作为 NSPlaceholderDictionary 回归？

> ID：14513370
> 
> 赞同：0
> 
> 时间：2013-01-25T00:28:16.863
> 
> 标签：ios, encoding, nsmutabledictionary, nskeyedarchiver, archiving

我有一个大而复杂的对象图。我已经实现了 NSCoding 来归档和取消归档对象图。通常，一切正常。但是在某些高度可重现的情况下，我归档的 NSMutableDictionary 会被取消归档为 NSPlaceholderDictionary。这是 NSMutableDictionary 的私有子类，表示未初始化的字典。它不响应任何常用的 NSDictionary 方法。

我想知道是否有人遇到过类似的问题。如果是这样，你能解决它吗？如何？

编辑：关于这种情况，我可以说的一件事是字典本身嵌套很深，包含很多字典和数组。在它的深处是一个指向另一个正在创建的对象的指针。对象图是一棵树。树中的大多数对象都包含对其父对象的弱引用。问题发生在树的 n 层深处。在崩溃时，堆栈看起来像这样 [我已经简化了它]：

```
0\. crash because dictionary is a placeholder
1\. depth n initWithCoder -- decode a deep and large dictionary which, prior to encoding contained reference to object at depth n+4\.  Said object has not yet been decoded.
2\. Apple methods 
3\. depth n+1 initWithCoder -- decode reference to parent
4\. 38 frames of apple methods for very deeply nested dictionary
5\. depth n-1 initWithCoder -- decode a deeply nested dictionary.  Among other things, the dictionary contains a reference to the level n+1 object [inside a lot of nested dictionaries and arrays]
6\. Apple methods
7\. depth n-2 object initWithCoder -- decode reference to array containing its children 
```

# json - 将 Chrome 网络请求正文预览转换为有效的 json

> ID：14513373
> 
> 赞同：0
> 
> 时间：2013-01-25T00:28:33.687
> 
> 标签：json, network-programming, request, google-chrome-devtools

**我的问题：**我想要一种从 Chrome 开发人员工具中获取预览内容（见下图）并将其复制为有效 JSON 的方法，而不必将其转换为有效 JSON。

![例子](../Images/c38a495f52ed7a4b806decd905bab190.png)

**我的情况：**我将检查网站上的大量请求，并将请求正文作为 JSON 并在我正在处理的项目的另一部分中使用它。我不想重建 JSON。我知道还有其他方法可以执行请求，但我宁愿正常使用网站，然后在我去的时候找到所有请求，而不是自己执行请求。所以我真的很想能够做到这一点。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T00:46:56.690

我刚刚意识到预览选项卡是响应的预览，而不是请求正文。要将其作为 json 文本获取，您只需单击响应选项卡，它将显示响应正文。如果您想要请求正文，请查看标题选项卡。在某些情况下，它只是表单数据。

# python - 如何在python中获取函数的当前名称

> ID：14513374
> 
> 赞同：2
> 
> 时间：2013-01-25T00:28:40.880
> 
> 标签：python

一小段代码将解释我为什么要问以及为什么这不是重复的。（我希望）

```
>>> def foo():
...    return 1
... 
>>> bar=foo
>>> bar.__name__
'foo' 
```

我如何获得“酒吧”？

我试过检查和框架，但到目前为止我发现的所有东西都没有通过这个测试。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T01:02:57.333

`bar`只是对已创建对象的引用（`foo`），这样做`bar=foo`意味着您创建了对同一对象的另一个引用。

```
In [62]: def foo():pass

In [63]: bar=foo

In [64]: spam=bar     #another reference to foo function object

In [65]: spam.__name__,bar.__name__
Out[65]: ('foo', 'foo')

In [66]: spam is foo,bar is foo
Out[66]: (True, True)

In [67]: import sys

In [68]: sys.getrefcount(foo)  # no of variable pointing to that object

Out[68]: 4           #3+1, 1 added by default by getrefcount() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T00:42:56.347

分配后`bar = foo`，您有两个名称都引用完全相同的值。Python 没有办法区分它们。Python 中的赋值从不复制数据，它只是让名称引用一个值，而函数就像其他任何值一样是一个值。只有一个功能，它只有一个`__name__`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T01:09:06.577

如果您知道`foo`，那么您可以检查`globals()`是否将其他功能分配给该功能，请注意，这将获取*所有*其他引用：

```
>>> function_reference_names  = [k for k, v in globals().iteritems() if hasattr(globals()[k], "func_name") and globals()[k].func_name == bar.__name__ and k != bar.__name__]
>>> function_reference_names
['bar'] 
```

但正如其他人指出的那样，如果你想这样做，你可能会问错问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-25T10:41:54.563

嗯，这是一个有趣的问题，一个函数能知道它的名字是什么吗？据我所知，这条信息不存储在堆栈或其他任何地方，所以要获取它，我们必须进入*更高的维度*，或者*进入 meta*来操作源本身的信息。

结果可能没有用，但很有趣:)

下面是笨拙的代码：

```
import inspect
import io
import re

def get_my_name(func_obj):
    caller_frame = inspect.currentframe().f_back.f_back
    caller_mod = inspect.getmodule(caller_frame)
    mod_src = inspect.getsource(caller_mod)
    call_lineno = caller_frame.f_lineno

    stream = io.StringIO(mod_src)
    for i in range(0, call_lineno):
        line = stream.readline()
    m = re.findall('[_a-zA-Z0-9]+(?=\()', line)
    m = [fname for fname in m if caller_frame.f_locals[fname] == func_obj]
    return m

def some_func(n):
    print(get_my_name(some_func))
    return n*n

def caller():
    f = some_func
    return f(2)

caller() 
```

# ruby - 升级到 Capybara 2.0 后如何点击项目列表中的第一个链接？

> ID：14513377
> 
> 赞同：137
> 
> 时间：2013-01-25T00:29:29.813
> 
> 标签：ruby, rspec, capybara

在这种情况下如何点击第一个链接：

```
<div class="item">
  <a href="/agree/">Agree</a>
</div>
<div class="item">
  <a href="/agree/">Agree</a>
</div> 
```

```
within ".item" do
  first(:link, "Agree").click
end 
```

我得到这个错误：

```
Capybara::Ambiguous:
  Ambiguous match, found 2 elements matching css ".item" 
```

没有`within`我得到这个错误：

```
Failure/Error: first(:link, "Agree").click
NoMethodError:
  undefined method `click' for nil:NilClass 
```

* * *

## 回答 #1

> 赞同：187
> 
> 时间：2013-01-25T07:12:51.497

您可以使用：

```
first('.item').click_link('Agree') 
```

或者

```
first('.item > a').click 
```

（如果您的默认选择器是 :css）

* * *

您问题中的代码不起作用：

```
within ".item" do
  first(:link, "Agree").click
end 
```

相当于：

```
find('.item').first(:link, "Agree").click 
```

Capybara 发现了几个`.item`'s，因此它引发了异常。我认为 Capybara 2 的这种行为非常好。

* * *

## 回答 #2

> 赞同：132
> 
> 时间：2013-06-25T21:43:48.673

尝试以下操作：

```
within ".item" do
  click_link("Agree", :match => :first)
end 
```

资料来源：

*   [http://rubydoc.info/github/jnicklas/capybara/master/Capybara/Node/Actions#click_link-instance_method](http://rubydoc.info/github/jnicklas/capybara/master/Capybara/Node/Actions#click_link-instance_method)
*   [https://github.com/jnicklas/capybara#strategy](https://github.com/jnicklas/capybara#strategy)

* * *

## 回答 #3

> 赞同：25
> 
> 时间：2014-08-12T18:41:37.167

这个措辞也有效：

```
within first(".item") do
  click_link "Agree"
end 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2019-06-18T09:30:49.580

这些解决方案中的大多数都不会使用 Capybara 出色的等待功能

最好按照这个链接的建议做：
[https ://thoughtbot.com/blog/write-reliable-asynchronous-integration-tests-with-capybara#find-the-first-matching-element](https://thoughtbot.com/blog/write-reliable-asynchronous-integration-tests-with-capybara#find-the-first-matching-element)

# 坏的：

`first(".active").click`
如果页面上还没有 .active 元素，first 将返回 nil 并且单击将失败。

# 好的：

如果你想确保确实有一个
`find(".active").click`

如果您只想要第一个元素
`find(".active", match: :first).click`
，Capybara 将等待该元素出现，然后再尝试单击。

请注意，`match: :first`它更脆弱，因为如果您引入匹配的新元素，它会默默地点击不同的元素。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-01-25T02:33:03.410

Xpath 可以寻址元素。我还不是很好，但是像`//div[@class='active'][1]/a`

这可能有效，也可能无效，但关键是 xpath 可以处理一组匹配项并提取一个特定的匹配项。你应该能够匹配这个。

我的一个项目中的一个工作示例：

```
在 page.find("div.panel", text: /Proposals/) 内做
  在 page.find('tr', text: /Foo/) 内做
    page.should have_xpath('td[3]', text: @today)
  结尾
结尾

```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-09-03T23:50:30.590

由于 first() 并不总是等待，也许这很有用：

```
expect(page).to have_css("selector")                               
first("selector").click 
```

* * *

## 回答 #7

> 赞同：-4
> 
> 时间：2016-06-20T11:57:24.283

很简单，您可以使用：

```
$('.item').find('a').first().click(); 
```

# javascript - 向页面添加一段代码：Chrome 扩展

> ID：14513380
> 
> 赞同：-1
> 
> 时间：2013-01-25T00:29:40.493
> 
> 标签：javascript, google-chrome, google-chrome-extension

好的，这就是我希望我的 Chrome 扩展程序执行的操作：

它只是角落里的一个按钮，当你点击它时：O它会在body标签之后添加一个标签（不想泄露这个想法）。我不希望它像用户编辑 html 一样，我只想要它，所以当您单击按钮时它会添加一个标签，我想知道如何实现这一点。JavaScript，或者我可以使用其他东西来完成这项工作。或者这是否可能。有人知道吗？

所以基本上，如果这是 html：

```
<DOCTYPE! html>
<html>
<head>
    <title>Some title</title>
</head>
<body>
    <p>Some content</p>
</body>
</html> 
```

当您单击按钮时，会发生这种情况：

```
<DOCTYPE! html>
<html>
<head>
    <title>Some title</title>
</head>
<body>
    <center> //or some other tag
    <p>Some content</p>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T12:16:46.517

我，你应该做一个内容脚本扩展。内容脚本代码将在页面中运行，并且可以在页面中的任意位置添加按钮。您使用 .addEventListener （所有 DOM 内容，没有特定于 Chrome 扩展的内容）等为它挂起一个点击侦听器，等等。在此处阅读有关 Chrome 扩展[内容脚本的信息](http://developer.chrome.com/extensions/content_scripts.html)。

你的[manifest.json](http://developer.chrome.com/extensions/manifest.html)应该是这样的：

```
{
  "name": "My Extension",
  "version": "0.1",
  "manifest_version": 2,
  "description": "A plain text description",
  "default_locale": "en",
  "content_scripts": [{
    "matches": ["http://*/*", "https://*/*"],
    "js": ["yourScript.js"]
  }],
} 
```

它将在每个页面中注入 yourScript.js。取决于您要做什么，知道 yourScript.js 有一些您可以更改的[内容安全策略限制。](http://developer.chrome.com/extensions/contentSecurityPolicy.html)

# mysql - 如何获得每组的最大行数？

> ID：14513383
> 
> 赞同：5
> 
> 时间：2013-01-25T00:30:05.467
> 
> 标签：mysql, sql, greatest-n-per-group

我有一个数据库，人们在其中为不同地方的人提交选票。在给定的时间，我想找出每个地方谁的票数最多。（一个人可以在两个不同的地方投票）

这是我到目前为止的 SQL：

```
SELECT placeId, userVotedId, cnt 
FROM 
    (SELECT uvo.userVotedId, p.placeId, count(*) as cnt 
     FROM users as u, users_votes as uvo, places as p 
     WHERE u.userId = uvo.userVotedId 
       AND p.placeId = uvo.placeId 
     GROUP BY userVotedId, placeId) 
AS RESULT 
```

这给了我这个结果：

![在此处输入图像描述](../Images/c09e96ca0d4d4cac028d6b83904b6e3f.png)

现在，这些是我真正想要的行：

![在此处输入图像描述](../Images/1b9fa6fe9e0d606b2d38a701a9b8ad0b.png)

我的查询中缺少什么，所以我可以得到这个？

*   我想要每个地方一个结果。所以我应该只看到不同的 placeId，其中 userVotedId 获得了最多的选票。

*   在平局的情况下，随机获胜者将做！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T00:36:00.940

~~似乎您还需要一个聚合体。在您的价值上使用`MAX()`聚合和：`cnt``GROUP BY placeId, userVotedId`~~

 ~~```
SELECT placeId, userVotedId, max(cnt)
FROM 
(
  SELECT uvo.userVotedId, p.placeId, count(*) as cnt 
  FROM users as u
  INNER JOIN users_votes as uvo
    ON u.userId = uvo.userVotedId 
  INNER JOIN places as p 
    ON p.placeId = uvo.placeId 
  GROUP BY userVotedId, placeId
) AS RESULT
GROUP BY placeId, userVotedId 
```~~ 

~~*注意：*我将您的查询更改为使用`JOIN`语法而不是表之间的逗号。~~

编辑，根据您的评论，以下应该有效：

```
select total.uservotedid,
  total.placeid,
  total.cnt
from
(
  SELECT uvo.userVotedId, p.placeId, count(*) as cnt 
  FROM users as u
  INNER JOIN users_votes as uvo
    ON u.userId = uvo.userVotedId 
  INNER JOIN places as p 
    ON p.placeId = uvo.placeId 
  GROUP BY userVotedId, placeId
) total
inner join
(
  select max(cnt) Mx, placeid
  from
  (
    SELECT uvo.userVotedId, p.placeId, count(*) as cnt 
    FROM users as u
    INNER JOIN users_votes as uvo
      ON u.userId = uvo.userVotedId 
    INNER JOIN places as p 
      ON p.placeId = uvo.placeId 
    GROUP BY userVotedId, placeId
  ) mx
  group by placeid
) src
  on total.placeid = src.placeid
  and total.cnt = src.mx 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!2/346e1/21)

结果是：

```
| USERVOTEDID | PLACEID | CNT |
-------------------------------
|          65 |      11 |   1 |
|          67 |      13 |   1 |
|          67 |      25 |   1 |
|          67 |      51 |   2 | 
```

编辑#2，如果你想在平局时返回一个随机数，那么你可以使用用户变量：

```
select uservotedid,
  placeid, 
  cnt
from
(
  select total.uservotedid,
    total.placeid,
    total.cnt,
    @rownum := case when @prev = total.placeid then @rownum+1 else 1 end rownum,
    @prev := total.placeid pplaceid
  from
  (
    SELECT uvo.userVotedId, p.placeId, count(*) as cnt 
    FROM users as u
    INNER JOIN users_votes as uvo
      ON u.userId = uvo.userVotedId 
    INNER JOIN places as p 
      ON p.placeId = uvo.placeId 
    GROUP BY userVotedId, placeId
  ) total
  inner join
  (
    select max(cnt) Mx, placeid
    from
    (
      SELECT uvo.userVotedId, p.placeId, count(*) as cnt 
      FROM users as u
      INNER JOIN users_votes as uvo
        ON u.userId = uvo.userVotedId 
      INNER JOIN places as p 
        ON p.placeId = uvo.placeId 
      GROUP BY userVotedId, placeId
    ) mx
    group by placeid
  ) src
    on total.placeid = src.placeid
    and total.cnt = src.mx
  order by total.placeid, total.uservotedid
) src
where rownum = 1
order by placeid, uservotedid 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!2/fd0b3/18)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T00:35:14.037

```
SELECT placeId, userVotedId, MAX(cnt)
    FROM (SELECT uvo.userVotedId, p.placeId, count(*) AS cnt 
          FROM users as u, users_votes as uvo, places as p 
          WHERE u.userId = uvo.userVotedId AND p.placeId = uvo.placeId 
          GROUP BY userVotedId, placeId) AS RESULT
    GROUP BY  placeId 
```

*   类似问题 - [SQL 查询 max(), count()](https://stackoverflow.com/questions/7832768/sql-query-max-count)

*   [演示](http://sqlfiddle.com/#!2/23bd7/4)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-25T00:57:35.027

为简单起见，我将您的查询称为测试：

```
SELECT * 
FROM Test T JOIN (
SELECT t.placeId, Max(t.cnt) maxcnt
FROM Test t
GROUP BY t.placeId) T2 ON T.placeId = T2.placeId and T.cnt = T2.maxcnt 
```

这是[小提琴](http://sqlfiddle.com/#!2/9ff1c/12)。

顺便说一句——测试=：

```
SELECT uvo.userVotedId, p.placeId, count(*) as cnt 
  FROM users as u
  INNER JOIN users_votes as uvo
    ON u.userId = uvo.userVotedId 
  INNER JOIN places as p 
    ON p.placeId = uvo.placeId 
  GROUP BY userVotedId, placeId 
```

祝你好运。

--EDIT -- 根据要求，这是最终代码：

```
SELECT * 
FROM (SELECT uvo.userVotedId, p.placeId, count(*) AS cnt 
          FROM users as u, users_votes as uvo, places as p 
          WHERE u.userId = uvo.userVotedId AND p.placeId = uvo.placeId 
          GROUP BY userVotedId, placeId) T JOIN (
SELECT t.placeId, Max(t.cnt) maxcnt
FROM (SELECT uvo.userVotedId, p.placeId, count(*) AS cnt 
          FROM users as u, users_votes as uvo, places as p 
          WHERE u.userId = uvo.userVotedId AND p.placeId = uvo.placeId 
          GROUP BY userVotedId, placeId) t
GROUP BY t.placeId) T2 ON T.placeId = T2.placeId and T.cnt = T2.maxcnt 
```

# upload - 是否可以直接保存到“云端”而不是保存到硬盘然后上传？

> ID：14513387
> 
> 赞同：0
> 
> 时间：2013-01-25T00:31:05.933
> 
> 标签：upload, cloud

我希望能够直接保存到远程位置（云存储。）

示例：您正在您的 IDE 中编程并希望将其上传到“云”，因此您单击*文件*>*另存为*> 选择 DropBox、SkyDrive 等 > 命名文件。当您单击*Save*时，它​​会上传文件。

这突然出现在我的脑海中，似乎比目前的方式要容易得多。这种方法可行吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T00:38:31.033

有些程序可以做到这一点。例如，MS Office 可以直接保存到 Sharepoint 位置，以及完整的树浏览。

某些网络文件交换协议在 Windows（Linux、MacOS）中可用作重定向器。这意味着它们将自己作为普通文件系统呈现给用户级程序。SMB/CIFS 是最好的例子，尽管可能没有人按原样在 Internet 上使用 SMB。FTP，即使在资源管理器中支持文件夹浏览以及常规文件夹，它也不是文件系统。有时，您可以通过加密通道（如 VPN 或 SSH）在 Internet 上引导 SMB - 这需要同时控制客户端和服务器。

一些云存储公开了一个 API，程序可以使用该 API 浏览并直接保存到云中。Dropbox 和 Google Drive 就是这样工作的。任何人都可以编写程序来保存/加载到 Dropbox，或浏览 Dropbox 上的文件。但这必须明确地完成——您的目标是 Dropbox，而不仅仅是任何云存储。

Dropbox 还提供存储和转发解决方案 - 您保存到指定的本地文件夹，该文件夹最终与 Dropbox 同步。

但是，使用*通用*程序（不是为云感知而编写的）和*通用*云存储（无法模拟文件系统），您就不走运了。

对于通过“网络”共享特定*资源*，首选方法是使用在线源控制系统。那里有公共的 Subversion 存储库；大多数 IDE 可以与这些对话。但是提交到 SVN 步骤通常是手动的。仍然涉及本地文件夹；这是一个保存然后上传的其他名称。

顺便说一句，将源位置放在云中将是相当大的性能损失。这些天互联网速度很快，但仍然无法与硬盘相媲美。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T00:38:49.163

您可以使用存储提供商提供的应用程序来执行此操作。例如，Dropbox 提供了一个应用程序，可以在您的硬盘驱动器上创建一个受监控的文件夹。保存在此文件夹中的所有内容都会同步到 Dropbox。

服务可以为您提供“驱动器”URL，您必须将其映射到计算机上的虚拟驱动器。我不知道有任何提供此服务的存储提供商。

# android - Android：创建日历以选择特定日期，或一年中的特定月份，或特定年份

> ID：14513388
> 
> 赞同：0
> 
> 时间：2013-01-25T00:31:10.223
> 
> 标签：android, calendar, datepicker

我希望`Calendar views`在我的应用程序中创建 3 个不同的，每个都由不同的按钮触发。

第一个是标准日历，允许您选择特定日期。第二个类似，只是您只选择整个月份而不是一天。最后一个您只需选择整个年份。

我意识到有一个[`CalendarView`](https://developer.android.com/reference/android/widget/CalendarView.html)小部件，但它不适用于低于 11 的 API 级别。

我见过一些自定义的，但它们涉及相当多的类，由其他人创建，我真的不想依赖它们。我也研究过`DatePicker`，因为它不一定需要看起来像`Calendar`. 如果每个日期选择器只有一个相关字段的微调器，那也可以。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T12:55:45.053

我设法找到了解决方案，而无需使用其他项目或从头开始。这可能不是最好的解决方案，但对我来说似乎工作得很好。

我使用了`DatePicker`小部件而不是日历，因为它更简单并且完全符合我的需要。我基本上删除 ( `View.GONE`) 日期选择器，直到选择其中一个按钮（例如“选择完整日期”、“选择年份中的月份”、“选择年份”）。

在“选择完整日期”的第一种情况下，我只是将日期选择器设置为`VISIBLE`. 这就是所有需要的。

在“一年中选择月份”的第二种情况下，我设置了日期选择器`VISIBLE`，但我也调用了一个方法，该方法使用反射来隐藏日期选择器的 DAY 部分。

最后一种情况和上面一样，只是我隐藏了日期选择器的`DAY`and`MONTH`部分。

在所有情况下，日期选择器“设置日期”或“设置月份”或“设置年份”下方都会出现一个新按钮（取决于选择了哪个初始按钮）。每个按钮都会从日期选择器中提取相关的字段信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T02:42:29.410

据我所知，您将不得不在这里自己动手。[android.util 中有一个名为MonthDisplayHelper](http://developer.android.com/reference/android/util/MonthDisplayHelper.html)的小助手，它对于显示 6 行日历网格的一些基本计算很有用。除此之外，尽管日历的使用相对频繁，但实际上并没有日历小部件或任何类似的内置类。

# excel - Excel：查找由第二列确定的范围内的第一个最小值

> ID：14513391
> 
> 赞同：1
> 
> 时间：2013-01-25T00:31:32.300
> 
> 标签：excel, excel-formula

我有两列，一列用于日期，另一列用于在该日期无法参加活动的人数。日期格式为 Excel 日期。我想找到在当前日期之后最少人数无法到达的第一个日期。理想情况下，我想在不求助于 VBA 宏的情况下解决问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T00:42:01.167

假设日期在 A2:A100 和 B2:B100 中的数字试试这个“数组公式”

`=MIN(IF(A2:A100>TODAY(),IF(B2:B100=MIN(IF(A2:A100>TODAY(),B2:B100)),A2:A100))`

需要使用 CTRL+SHIFT+ENTER 确认公式，以便在公式栏中的公式周围出现 { 和 } 等花括号

这会找到最小的日期（最早的），它既在今天之后，又在今天之后的日期中具有最低的数字

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-25T00:47:24.513

给定列 A=日期，B=人数 添加第三列：

```
=IF(A1>TODAY(),B1,"") 
```

然后使用 Lookup 查找最小条目的日期：

```
=INDEX(A:A,MATCH(MIN(C:C),C:C,0)) 
```

*更新了 Barrys 修复（谢谢！）*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-25T00:41:45.333

*好的，这很有趣：）*

不幸的是，这种方法没有考虑到当前日期，您可以通过按升序对数据进行排序来解决这个问题，然后将 MAX 和 MATCH 函数限制在您正在搜索的日期范围内（我还不够Excel 大师想办法在没有某种形式的预先组织数据的情况下做到这一点）。

让我们使用以下数据：

```
 A       | B
1  1/05/2012 | 1
2  2/14/2012 | 4
3  3/17/2012 | 2
4  4/01/2012 | 3
5  5/12/2012 | 1 
```

使用 B 列中的值作为与会者，使用 A 作为日期，您可以看到最早/最高的日期（实施 Berry 的建议（使函数更具可读性））：

```
=INDEX(A1:A5, MATCH(MAX(B1:B5),B1:B5,0), 1) 
```

万一其他人可以弄清楚我错过了什么，这里是正在发生的事情的细分：

```
=MAX(B1:B5) -> 4
Looks for the largest attendees count

=MATCH(MAX(B1:B5),B1:B5,0) -> 2
find the first row where this number occurs.

=INDEX(A1:A5, MATCH(MAX(B1:B5),B1:B5,0), 1) -> 2/14/2012
which is the value found at that row in the first column 
```

# javascript - removeClass 不起作用

> ID：14513394
> 
> 赞同：1
> 
> 时间：2013-01-25T00:31:48.833
> 
> 标签：javascript, jquery

我一生都在努力弄清楚如何在单击另一个链接时让它删除一个类。我想要它，所以它只突出显示选定的特定区域，但删除类不会删除该类。因此，它按照类中的指定保持突出显示`underNavselected`。有人可以帮忙吗？

这都在一页上，没有链接到其他文档。每次点击我都会隐藏和取消隐藏内容。

```
jQuery(document).ready(function() {
    jQuery(".toTop").hide();
    jQuery(".aboutHeader").hide();
    jQuery(".LAM").hide();
    jQuery(".WID").hide();
    jQuery(".MyG").hide();
    jQuery("#LAMlink").live("click", function()
    {
        jQuery(this).addClass("underNavselected");
        jQuery(".LAM").slideToggle(500);
        jQuery(".WID").hide();
        jQuery(".MyG").hide();
        jQuery("#MyGlink", "#WIDlink").removeClass("underNavselected");
    });
    jQuery("#WIDlink").live("click", function()
    {
        jQuery(this).addClass("underNavselected");
        jQuery(".WID").slideToggle(500);
        jQuery(".LAM").hide();
        jQuery(".MyG").hide();
        jQuery("#LAMlink", "#MyGlink").removeClass("underNavselected");
    });
    jQuery("#MyGlink").live("click", function()
    {
        jQuery(this).addClass("underNavselected");
        jQuery(".MyG").slideToggle(500);
        jQuery(".LAM").hide();
        jQuery(".WID").hide();
        jQuery("#LAMlink", "#WIDlink").removeClass("underNavselected");
    });
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T00:35:25.643

您偶然使用了[后代选择器](http://api.jquery.com/descendant-selector/)，您的代码等同于“#LAMlink #WIDlink”，这意味着您正在寻找具有 LAMlink 祖先的 WIDlink

所以正确的解决方案是改变：

```
jQuery("#LAMlink", "#WIDlink") 
```

至

```
jQuery("#LAMlink, #WIDlink") 
```

注意我的都是一样的`string.`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T00:36:17.193

像这样做：

```
jQuery("#MyGlink, #WIDlink").removeClass("underNavselected"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-25T00:36:35.230

改变这个：

```
 jQuery("#MyGlink", "#WIDlink").removeClass("underNavselected"); 
```

对此：

```
 jQuery("#MyGlink, #WIDlink").removeClass("underNavselected"); 
```

在你这样做的每个地方都类似。

选择器应该是一个带有逗号的字符串。你拥有它的方式 jQuery 将查找匹配第一个选择器的元素，这些元素是匹配第二个选择器的元素的后代。

# c# - 如何在验证摘要中显示错误

> ID：14513395
> 
> 赞同：0
> 
> 时间：2013-01-25T00:31:51.390
> 
> 标签：c#, asp.net, .net, asp.net-mvc, validation

我对 MVC 完全陌生，我试图弄清楚为什么没有显示验证摘要。这是代码：

看法：

```
<% using(var form = Html.BeginForm("Create", "User"))
{%>
    <table>
        <thead>
            <th>Create User</th>
            <th><%= Html.ValidationSummary(false) %></th>
        </thead>
        <tbody>
            <tr>
                <td><%= Html.LabelFor(model => model.Creating.Username) %>:</td>
                <td><%= Html.TextBoxFor(model => model.Creating.Username) %></td>
            </tr>
            <tr>
                <td><%= Html.LabelFor(model => model.Creating.Firstname) %>:</td>
                <td><%= Html.TextBoxFor(model => model.Creating.Firstname)%></td>
            </tr>
            <tr>
                <td><%= Html.LabelFor(model => model.Creating.Lastname) %></td>
                <td><%= Html.TextBoxFor(model => model.Creating.Lastname) %></td>
            </tr>
            <tr>
                <td colspan="2">
                    <input type="submit" value="Create" />
                </td>
            </tr>
        </tbody>
    </table>

<%}%> 
```

相关控制器方法：

```
[HttpPost]
public ActionResult Create(User creating)
{
    var response = _service.Save(creating);
    if (response.Success)
        return RedirectToAction("Index");
    response.Errors.CopyToModelState(this.ModelState);
    return RedirectToAction("Index");
} 
```

业务逻辑方法：

```
public Response Save(User user)
{
    //Place Validation logic here
    //Check username is between 3-30 characters and make sure the username is unique
    //return response if username fails business rules

    bool isDataInvalid = false;
    List<ValidationError> errorList = new List<ValidationError>();
    if ((user.Username.Length < 3) || user.Username.Length > 30)
    {
        ValidationError invalidUsernameLengthError = new ValidationError();
        invalidUsernameLengthError.Property = "Creating.Username";
        invalidUsernameLengthError.ErrorMessage = "must be between 3 and 30 characters long";
        errorList.Add(invalidUsernameLengthError);
        isDataInvalid = true;
    }

    if (isDataInvalid)
    {
        return new Response()
        {
            Success = false,
            Errors = errorList
        };   
    }

    _repository.Save(user);

    return new Response()
    {
        Success = true
    };
} 
```

辅助方法：

```
public static void CopyToModelState(this List<ValidationError> errors,  ModelStateDictionary modelState)
{
    foreach (var error in errors)
    {
        modelState.AddModelError(error.Property, error.ErrorMessage);
    }
} 
```

逻辑做了它应该做的事情，但什么也没显示。我检查了获取输出的 HTML，只是没有编写验证。我尝试将模型的属性分配给 modelState 并直接在相关字段上显示验证，但这也不起作用。有任何想法吗？

* * *

啊! 执行 RedirectToAction 会导致新的请求，因此错误数据会丢失。另外我正在使用不同的控制器，因此我需要显式调用原始视图（Index.aspx）。此外，我的 index.aspx 期望的模型实际上并不是一个用户对象，它是一个不同的列表对象，所以我需要这样做：

```
 var users = _service.FindAll();
        return View("Index", new UserListModel() { Users = users }); 
```

而不是 RedirectToAction。这显然是验证错误的标准模式 - 对于成功（没有错误），您使用 RedirectToAction，但对于错误，您需要返回正确的视图。

* * *

好的，谢谢 mattytommo - 这真的很有用。我仍然遇到问题。我现在有这个控制器 - 类似于你的建议，但仍然没有显示错误消息。我尝试了数据注释但无法使其工作（我正在使用 MVC2），并且一直在尝试我能想到的一切来修复现有代码。

```
 [HttpPost]
    public ActionResult Create(User creating)
    {
        var response = _service.Save(creating);
        if (response.Success)
            return RedirectToAction("Index");

        foreach (var error in response.Errors)
        {
            ModelState.AddModelError(error.Property, error.ErrorMessage);
        }

        return RedirectToAction("Index");
    } 
```

还有什么想法吗？我很感激这个建议！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T00:43:40.540

我认为您是`ModelState`按值传递变量，因此您在该函数中所做的更改**实际上并没有被保留**。尝试复制您的函数的功能，但复制到**实际的`ModelState`object**，如下所示：

```
[HttpPost]
public ActionResult Create(User creating)
{
    var response = _service.Save(creating);
    if (response.Success)
        return RedirectToAction("Index");

    foreach (var error in response.Errors)
    {
        ModelState.AddModelError(error.Property, error.ErrorMessage);
    }

    return View(creating);
} 
```

**您还应该查看 MVC 数据注释，可以通过将这两个属性放在`Username`属性上来简单地替换像您这样的验证：**

```
[MinLength(3), MaxLength(30)]
public string UserName { get; set; } 
```

或者只使用一个属性`StringLength`（感谢@SimonWhitehead）：

```
[StringLength(30, MinimumLength = 3)] 
```

数据注释：[这里](http://www.asp.net/mvc/tutorials/mvc-music-store/mvc-music-store-part-6)

# shell - Shell if 语句未按预期工作

> ID：14513397
> 
> 赞同：0
> 
> 时间：2013-01-25T00:31:56.313
> 
> 标签：shell, unix, if-statement

我正在尝试在 shell 中创建一个搜索程序作为练习，但是当我尝试使用 if 语句处理空行时，我收到一条消息，指出 shell 遇到了意外的运算符。

```
 #!/bin/sh

file=$1
token=$2

while read line
do
    if [ ! -z $line ]
    then
      set $line
      if [ $1 = $token ] 
      then 
        echo $line
      fi
    fi
done < $file 
```

`match_token animals_blanks dog`当我使用我运行程序时

```
./match_token: 8: [: cat: unexpected operator
./match_token: 8: [: dog: unexpected operator
./match_token: 8: [: dog: unexpected operator
./match_token: 8: [: cow: unexpected operator
./match_token: 8: [: lion: unexpected operator
./match_token: 8: [: bear: unexpected operator
./match_token: 8: [: wolf: unexpected operator 
```

Animals_blanks 文件包含：

```
cat meow kitten

dog ruff pup
dog bark

cow moo calf

lion roar cub

bear roar cub
wolf howl pup 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T00:35:15.207

引用变量：

```
 if [ ! -z "$line" ] 
```

但通常，人们会写：

```
 if [ -n "$line" ] 
```

当您将变量不加引号时，该`[`命令会看到类似的内容：`[ -n cat dog ]`，这是一个错误，因为它只需要 . 之后的一个参数`-n`。通过引用变量，表达式变成`[ -n "cat dog" ]`只有一个参数，正如预期的那样`[`。请注意，实际上没有理由进行该测试或使用`set`; read 可以在读取时为您拆分行：

```
while read animal sound offspring; do
    test "$animal" = "$token" && echo $animal $sound $offspring
done < $file 
```

# javascript - jshint 不识别开发

> ID：14513398
> 
> 赞同：0
> 
> 时间：2013-01-25T00:31:57.710
> 
> 标签：javascript, jshint

我正在使用 jshint 并定义了以下选项：

```
/*global $, _*/
/*jshint devel:true*/ 
```

我的理解是，拥有`/*jshint devel:true*/`它应该允许控制台和警报，但我继续收到错误。如果我还有其他事情需要做，有什么想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T00:49:57.893

在 e 和 * 之间添加一个空格

```
/*jshint devel:true */ 
```

# java - JavaMail下了解未读邮件的不同方法

> ID：14513404
> 
> 赞同：1
> 
> 时间：2013-01-25T00:32:59.627
> 
> 标签：java, message, jakarta-mail

我只是想知道，应该怎么做：

```
FlagTerm ft = new FlagTerm(new Flags(Flags.Flag.SEEN), false);
Message messages[] = imap.folder_.search(ft);
int nbTotalUnreadMessages = messages.length;
// make a loop over the messsages to make some procedure 
```

对比：

```
Message[] messages = imap.folder_.getMessages();
for (int i = 0; i < messages.length; i++) {
    Message msg = messages[i];
    Flags flags = msg.getFlags();
    if ( flags.contains(Flags.Flag.SEEN) )
        continue;
    // proceed on the unseen message
} 
```

第一个版本快速点亮并且可以正常工作。第二个版本是1/慢2/不起作用。它很慢，因为它解析整个文件夹并且它不起作用，因为正如文档所说，自动获取消息的唯一事实假设它已被看到。

那么该死的，第一个版本应该在内部做什么？我只是出于好奇......可以在不获取消息本身的情况下获取消息的标志吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T01:04:12.590

第一个版本很快，因为服务器会为您搜索所有消息并在一次操作中返回答案。

第二个版本很慢，因为您必须向服务器询问每条消息。第二个版本应该给出与第一个相同的结果。如果不是，我需要更多详细信息，例如协议跟踪显示第一种情况下返回的内容与第二种情况下返回的内容之间的差异。

# php - 如何使用 php 获取 xml 数组？

> ID：14513411
> 
> 赞同：0
> 
> 时间：2013-01-25T00:33:36.890
> 
> 标签：php, xml, arrays

如何以这种格式使用php获取外部文件的xml数组

```
$locations = array(
  (Bondi Beach, -33.890542, 151.274856, 4),
  (Coogee Beach, -33.923036, 151.259052, 5),
  (Cronulla Beach', -34.028249, 151.157507, 3)
);
//this is my file php
         $dom = new DOMDocument();
            $dom->load('school.xml');
            $students = $dom->getElementsByTagName('student');
            $i = 0; 
            foreach ($students as $student) {
                $locations = $students->item(0)->nodeValue;
                echo $locations;
                $i++;
            } 
```

当我运行此代码时，返回以下结果：
Bondi Beach -33.890542 151.274856 4 Coogee Beach -33.923036 151.259052 5 Cronulla Beach -34.028249 151.157507 3
我必须进行哪些更改才能返回具有以下格式的数组？：

这是我的数组 school.xml

```
<school>
<student>
<name>Bondi Beanch</name>
<latitude>-33.890542</latitude>
<longitude>151.274856</longitude>
<id>4</id>
</student>
<student>
<name>Coogee Beach</name>
<latitude>-33.923036</latitude>
<longitude>151.259052</longitude>
<id>5</id>
</student>
<student>
<name>Cronulla Beach</name>
<latitude>-34.028249</latitude>
<longitude>151.157507</longitude>
<id>3</id>
</student>
</school> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T00:37:57.420

好吧，我看错了问题。试试这个。

```
foreach ($students as $key => $student) {
  $locations[] = array($student->childNodes->item(0)->nodeValue, $student->childNodes->item(1)->nodeValue, $student->childNodes->item(2)->nodeValue, $student->childNodes->item(3)->nodeValue);
  $i++;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T00:57:15.037

```
<?php
$dom = new DOMDocument();
$dom->load('school.xml');
$students = $dom->getElementsByTagName('student');
foreach ($students as $student){
    foreach($student->childNodes as $node){
        switch($node->nodeName){
            case 'name':
                $name = $node->nodeValue;
                break;
            case 'longitude':
                $long = $node->nodeValue;
                break;
            case 'latitude':
                $lat = $node->nodeValue;
                break;
            case 'id':
                $id = $node->nodeValue;
                break;
        }
    }       
    $locations[] = array($name,$lat,$long,$id);
}
echo '<pre>';
print_r($locations);
echo '</pre>';
?> 
```

如果你希望数组是关联的，你可以替换这一行：

```
$locations[] = array('name'=>$name,'latitude'=>$lat,'longitude'=>$long,'id'=>$id); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-25T00:59:13.317

您是否尝试过 simplexml - 我正在使用它从外部 xml 源调用数据，它很有效！

```
$xml= simplexml_load_file('school.xml')
or Die ('ERROR: Could Not connect to File!');

foreach($xml->student as $student) {

$name = $student->name;
$latitude =  $student>latitude;
$longitude = $student->longitude;
$id = $student->id;

echo "<b>" .  "Name: " . "</b>" . $name . " <br />";
echo "<b>" .  "Latitude: " . "</b>" . $latitude . " <br />";
echo "<b>" .  "Longitude: " . "</b>" . $longitude . " <br />";
echo "<b>" .  "id: " . "</b>" . $id . " <br />";

} 
```

如果您已经尝试过，请道歉......但如果您还没有尝试过，值得一试！

# c# - setParent 后子窗口的奇怪行为

> ID：14513415
> 
> 赞同：0
> 
> 时间：2013-01-25T00:33:54.323
> 
> 标签：c#, .net, winforms, pinvoke, setparent

我尝试使用以下代码在我的 Winform 应用程序中嵌入“Windows Journal”应用程序。它有效，一切看起来都很好。但是，当我开始使用 Windows Journal 应用程序（它已经是我的应用程序的子窗口）时，我发现鼠标的行为不一致。更具体一点，例如，我试图画一条从 (x, y) 到 (x+100, y) 的线，但这条线在 (x-50, y-50) 到 (x, y-50)。我使用“鼠标同步/不一致”、“setparent 后应用程序异常行为”、“子窗口的奇怪行为”等关键字进行谷歌搜索，但尚未找到任何相关解决方案。我也尝试在setParent之前清除WS_POPUP样式，但是没有用。谁能给我一些想法？谢谢。

```
//IntPtr appWin is the MainWindowHandle of Windows Journal process 
ShowWindowAsync(appWin, SW_SHOWNORMAL);

// Put it into this form
SetParent(appWin, this.Handle);

// Remove border and whatnot
SetWindowLong(appWin, GWL_STYLE, WS_VISIBLE);

// Move the window to overlay it on this window
MoveWindow(appWin, 0, 0, this.Width, this.Height, true); 
```

代码位于名为 JournalControl.cs 的控制器中，而 JournalControl 位于应用程序主窗体中的 splitContainer.Panel 中。因此，当单击主窗体的按钮时，首先打开用户在 Journal 应用程序中指示的 jnt 文件

```
public void OpenJournal(string JNTPath)
{
    try
    {
        if (File.Exists(JNTPath))
        {
            proc.StartInfo.FileName = @"C:\Program Files\Windows Journal\Journal.exe";
            proc = Process.Start(JNTPath); 

            this.timCheckJournal = new System.Windows.Forms.Timer();
            this.timCheckJournal.Tick += new System.EventHandler(this.timCheckJournal_Tick);          
        }
        else
        {
            MessageBox.Show("Couldn't find  JNTPath: " + JNTPath);
        }
    }
    catch (Exception ex)
    {
        ExceptionPublisher.PublishEx(ex);
    }
} 
```

然后在 timCheckJournal_Tick() 中，将应用程序放入 Panel

```
private void timCheckJournal_Tick(object sender, EventArgs e)
{
    timCheckJournal.Enabled = false;
    IntPtr appWin = GetJournalTopWindowHandle();
    if (appWin != IntPtr.Zero)
    {
        ShowWindowAsync(appWin, SW_SHOWNORMAL);

        // Put it into this form
        SetParent(appWin, this.Handle);

        // Remove border and whatnot
        SetWindowLong(appWin, GWL_STYLE, WS_VISIBLE);

        // Move the window to overlay it on this window
        MoveWindow(appWin, 0, 0, this.Width, this.Height, true);
    }
    else
    {
        timCheckJournal.Enabled = true;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T18:59:19.233

听起来您需要在两个客户区之间执行翻译...

这是首先阅读的链接：http: [//support.microsoft.com/kb/11570](http://support.microsoft.com/kb/11570)

你如何实现它在很大程度上取决于鼠标绘图从哪里开始以及它应该在哪里绘图，但是假设你的“托管应用程序”是鼠标监听器，而 Journal 是你想要绘制的东西- 序列可能看起来像（伪代码）：

```
screenCoords = ClientToScreen(mouse coords)
journalCoords = ScreenToClient(screenCoords) 
```

然后无论你在做什么来绘制日记 -`WM_MOUSE`消息等。

# c++ - reinterpret_cast 的正确使用方法

> ID：14513417
> 
> 赞同：2
> 
> 时间：2013-01-25T00:34:00.263
> 
> 标签：c++

我想知道使用 reinterpret_cast 的正确方法。我有一个场景，我必须使用 void ** 指针保存 uint64_t 类型的地址（比如 0x1122）（请参见下面的示例代码）。这样做的所有三种方式似乎都有效。它们之间有什么区别？其中一个真的是错的吗？另外，这样做的最佳方法是什么？谢谢！

```
#include <iostream>
#include <cstdint>

using std::cout;
using std::endl;

int main()
{
    void **localAddr;
    void *mem;
    localAddr = &mem;
    // The above three lines is the setup that I have to work with.
    // I can't change that. Given this setup, I need to assign an
    // address 0x1122 to mem using localAddr.

    // Method 1
    *localAddr = reinterpret_cast<uint64_t*>(0x1122);
    cout << mem << endl; // Prints 0x1122

    // Method 2
    *(reinterpret_cast<uint64_t*>(localAddr)) = 0x1122;
    cout << mem << endl; // Prints 0x1122

    // Method 3
    *localAddr = reinterpret_cast<void*>(0x1122);
    cout << mem << endl; // Prints 0x1122

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T00:46:06.727

**方法3**是正确的。

虽然其他人可能会给出类似的结果（至少在某些时候），但它们或多或少是不正确的。

**如果指针是 32 位而不是 64 位，方法 2**将出错，因为您将指针的类型强制为`uint64_t`.

**方法 1**可以工作 - 但它是不必要的，但你不需要`uint64_t`- 两者都是 void 指针类型。`mem``localaddr`

希望你能得到这份工作...

# python - 使用管理器修改多进程进程之间的变量

> ID：14513418
> 
> 赞同：1
> 
> 时间：2013-01-25T00:34:17.503
> 
> 标签：python, multiprocessing, python-multithreading

尝试在多进程进程中完成的方法中设置一个值，该值在完成后被“主”进程使用。

它目前给了我

```
TypeError: 'str' object does not support item assignment
DID WE? [''] 
```

给定以下代码，这并不是我真正想要的：

```
def load_dat_site(d):
global seek_site
browser.execute_script("window.location = '"+seek_site+"';")
print "SITE LOADED"
d[0] = 'YEAH!'

manager = Manager()
d = manager.list([''])
site_load_process = multiprocessing.Process(target=load_dat_site, args=(d))
site_load_process.start()
site_load_process.join(15)
print "DID WE?", d 
```

为什么示例脚本似乎能够设置其列表的值但不能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T00:56:47.130

从[文档](http://docs.python.org/2/library/multiprocessing.html#multiprocessing.Process)[（`multiprocessing.Process`](http://docs.python.org/2/library/multiprocessing.html#multiprocessing.Process)强调添加）：

> "是目标调用`args`的参数**元组。"**

将您的实例化更改`multiprocessing.Process`为如下所示，一切都会按预期工作。

```
site_load_process = multiprocessing.Process(target=load_dat_site, 
                                            args=(d,)) # the comma is essential! 
```

这里有一个独立的工作示例：http: [//ideone.com/VeTFYk](http://ideone.com/VeTFYk)

* * *

请记住，构成元组的**不是**括号/括号，而是**逗号**。

```
>>> not_a_tuple = (0)
>>> type(not_a_tuple)
<type 'int'>

>>> t = 0,
>>> type(t)
<type 'tuple'> 
```

# javascript - Node.js：TypeError：对象 socket.io 没有“听”方法

> ID：14513419
> 
> 赞同：1
> 
> 时间：2013-01-25T00:34:22.827
> 
> 标签：javascript, node.js, express, socket.io

我正在`socket.io`使用 Express 3.0.6 使用 0.9.13 制作一个小节点应用程序。我什至无法开始运行，因为它说`socket.io`has no method `listen()`。这是我的代码（编译的coffeescript，所以有点难看）：

```
(function() {
  var app, express, io, port, usernames;

  express = require('express');

  app = express();

  io = require('socket.io'.listen(3000));

  port = 3000;

  app.listen(port);

  console.log("Listening on port " + port);

  console.log('CNTRL-C to quit.');

  app.engine('hamlc', require('haml-coffee'.__express));

  app.get('/', function(request, response) {
    return response.render('index.hamlc');
  });

  usernames = {};

  io.sockets.on('connection', function(socket) {
    socket.on('send-chat', function(msg) {
      return io.sockets.emit('update-chat', socket.username, msg);
    });
    socket.on('add-user', function(username) {
      socket.username = username;
      usernames[username] = username;
      socket.emit('update-chat', 'SERVER', "You have connected as " + username + ".");
      socket.broadcast.emit('update-users', 'SERVER', "" + username + " has joined the chat.");
      return io.sockets.emit('update-users', usernames);
    });
    return socket.on('disconnect', function() {
      delete usernames[socket.username];
      io.sockets.emit('update-users', usernames);
      return socket.broadcast.emit('update-chat', 'SERVER', "" + socket.username + " has disconnected from chat");
    });
  });

}).call(this); 
```

这会引发以下错误：

```
node.js:201
        throw e; // process.nextTick error, or 'error' event on first tick
              ^
TypeError: Object socket.io has no method 'listen'
    at Object.<anonymous> (/Users/chris/src/web/kouv/app.js:8:28)
    at Object.<anonymous> (/Users/chris/src/web/kouv/app.js:44:4)
    at Module._compile (module.js:432:26)
    at Object..js (module.js:450:10)
    at Module.load (module.js:351:31)
    at Function._load (module.js:310:12)
    at Array.0 (module.js:470:10)
    at EventEmitter._tickCallback (node.js:192:40) 
```

非常感谢您的回答。:-)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T00:38:36.900

试试这个：

```
var express = require('express'),
    http = require('http');

var app = express();
var server = http.createServer(app);

var io = require('socket.io').listen(server);
server.listen(3000); 
```

Socket.io 本质上是在运行时劫持了 http 对象；express 3.xx 不再在 http.server 上运行，因此有必要创建自己的实例供 socket.io 使用。

# javascript - 是否可以从 xpath 节点更改 css？

> ID：14513422
> 
> 赞同：2
> 
> 时间：2013-01-25T00:34:30.810
> 
> 标签：javascript, xpath

例如在 javascript 中使用 getelementbyid：

```
document.getElementById("theID").style.width="100%"; 
```

我可以像 getelementbyid 一样从 xpath 检索到的节点更改 css 吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2017-08-09T13:40:51.923

是的，我是这样做的：

```
var xpath = 'your xpath';

var matchingElement = document.evaluate(xpath, document, null, XPathResult.FIRST_ORDERED_NODE_TYPE, null).singleNodeValue;

matchingElement.style.color = "blue"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-04-03T05:06:34.687

`xpath= $x('//body'); // this will return an array usually containing 1 element`

`xpath[0].classList.value=""; // edit class name`

`xpath[0].style.display="none"; // edit style attributes`

我发现的有用链接： [https ://devhints.io/xpath#class-check](https://devhints.io/xpath#class-check)

[如何使用 JavaScript 更改元素的类？](https://stackoverflow.com/questions/195951/how-can-i-change-an-elements-class-with-javascript)

# php - MySQL - 使用 mysql_fetch_assoc 移动到下一个结果

> ID：14513423
> 
> 赞同：0
> 
> 时间：2013-01-25T00:34:31.017
> 
> 标签：php, mysql

> **可能重复：**
> [mysql_fetch_array 只返回一行](https://stackoverflow.com/questions/7001320/mysql-fetch-array-return-only-one-row)

假设我使用 mysql_fetch_assoc 来过滤以下内容：

```
mysql_fetch_assoc(mysql_query("SELECT * from tickets WHERE issuer = '" . $name . "'")); 
```

我通常只使用 for 循环通过使用 ticketid 列（自动递增）在票证之间循环，但是，当我使用这个时，我可能有票证 1，然后票证 4，因为我是由发行人过滤它。有什么方法可以获取下一个结果的ticketid 或者只是获取它的获取值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T00:53:14.940

mysql_query 返回一个资源，你应该使用 mysql_fetch_assoc 每个它，所以试试这个：

```
$result = mysql_query("SELECT * from tickets WHERE issuer = '" . $name . "'");
while($row = mysql_fetch_assoc($result)) {
    print_r($row);
} 
```

还有更多[mysql_query](http://php.net/manual/en/function.mysql-query.php)

也许您可以尝试[PHP 数据对象 (PDO)](http://php.net/manual/en/intro.pdo.php)

# memory - 关于解码从 ARM 内存转储的数据的问题

> ID：14513429
> 
> 赞同：2
> 
> 时间：2013-01-25T00:34:49.920
> 
> 标签：memory, arm, decode, objdump

现在我从 ARM 机器的内存中转储了一些内容。问题实际上是它们是 ARM 指令，但我不知道如何将这些十六进制数字转换为 ARM 指令。我现在拥有的是“arm-elf-objdump”可以读取.bin文件并反汇编.bin文件中的内容。但我只有与二进制文件不同的十六进制数字文本。我该怎么做这个解码？

例如

```
 800104:       e3a00000        mov     r0, #0  ; 0x0
  800108:       e59f104c        ldr     r1, [pc, #76]   ; 80015c <_jump_main+0x4>
  80010c:       e59f204c        ldr     r2, [pc, #76]   ; 800160 <_jump_main+0x8> 
```

实际上“e3a00000”的意思是“mov r0,#0”。应该有一个工具来做到这一点。任何人都可以给我一些建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T00:37:21.897

您正在寻找的工具称为“反汇编程序”。如您所见，一个常见的是 GNU objdump。我不确定它是否可以处理文本输入，但如果需要，您可以编写一个简单的程序将其转换回二进制文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T08:16:59.953

将您的文本文件转换为二进制文件，即使您必须自己编写脚本/应用程序然后使用 objdump 进行反汇编，这也应该是微不足道的。

```
objdump -D -b binary -marm <binary_file> 
```

`arm`但是也要注意指令编码，如果你选择编码，你会得到截然不同的结果`thumb`。请参阅[objdump 手册](http://sourceware.org/binutils/docs/binutils/objdump.html)部分关于`--disassembler-options=force-thumb`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T00:14:02.390

好的，因为我已经完成了这项任务，我会回答我自己的问题，所以也许有人可以从我的回答中得到帮助。

我的问题由两部分组成：第一部分是我不清楚“arm-elf-objdump”是如何工作的。就我而言，我使用

```
arm-elf-objdump -D -b binary -marm binaryfile.dat 
```

如果 binaryfile.dat 正确，这将有助于反汇编 ARM 代码。

第二个问题是如何使 binaryfile.dat 正确。例如，

```
800104:       e3a00000        mov     r0, #0  ; 0x0 
```

当我从 RAM 中转储十六进制数 e3a00000 时，实际上我几乎得到了指令。然后我用

```
const uint8_t num=0xe3a00000;
fp = fopen("binaryfile.dat", "wb+");
fwrite(&num, sizeof(const uint8_t), 1, fp); 
```

这将在 binaryfile.dat 中写入“e3a00000”，这是一个二进制文件（在 Linux 中）。然后我用

```
hexer binaryfile.dat 
```

检查并发现它是正确的，然后使用

```
arm-elf-objdump -D -b binary -marm binaryfile.dat 
```

我得到的是

```
> arm-elf-objdump -D -b binary -marm binaryfile.dat
binaryfile.dat:     file format binary

Disassembly of section .data:

0000000000000000 <.data>:
0:  e3a00000    mov r0, #0  ; 0x0 
```

就是这样，我是这个领域的初学者，感谢所有帮助过我的人。如果您发现一些问题，请告诉我:)

# php - 是否可能返回倍数？

> ID：14513430
> 
> 赞同：-3
> 
> 时间：2013-01-25T00:34:54.053
> 
> 标签：php, html, return

我得到了这个代码，我想要 2 个回报，正确的方法是什么？(PHP)

```
function two_tables($atts, $content = null) {

        return '<div id="table1"><table class="table table-bordered">'.$content.'</table></div>';

        return '<div id="table2"><table class="table table-bordered">'.$content.'</table></div>';
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T00:37:29.137

简而言之，不，你不能返回两次，函数[在第一次之后退出](http://php.net/manual/en/function.return.php)。

但是，这可能会满足您的要求：

```
function two_tables($atts, $content = null) {
    return '<div id="table1"><table class="table table-bordered">'.$content.'</table></div>
    <div id="table2"><table class="table table-bordered">'.$content.'</table></div>';
} 
```

这是组合在一起的两个输出。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T00:40:59.617

如果您希望能够分别使用它们，您总是可以返回一个包含这两个项目的数组。

```
function two_tables($atts, $content = null) {

    $one = '<div id="table1"><table class="table table-bordered">'.$content.'</table></div>';

    $two = '<div id="table2"><table class="table table-bordered">'.$content.'</table></div>';
    return array($one, $two);
} 
```

这样，当您收到功能时，您就可以这样做。

```
$result = two_tables($blah, $blah);
echo $result[0]; //the first return..
echo $result[1]; //the second return 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-25T00:41:43.690

除了亚历克斯的回答，如果你想把它们分开，你可以把它们放在一个数组中。

```
return array(
    '<div id="table1"><table class="table table-bordered">'.$content.'</table></div>', 
    '<div id="table2"><table class="table table-bordered">'.$content.'</table></div>'
); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-25T00:38:04.870

此函数将始终返回 HTML 的第一行。

返回两个 s ：

```
function two_tables($atts, $content = null) {
        return '<div id="table1"><table class="table table-bordered">'.$content.'</table></div><div id="table2"><table class="table table-bordered">'.$content.'</table></div>';
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-25T03:05:27.963

为了返回多个元素，您只需要返回一个数组，如下所示：

```
return array(
    '<div id="table1"><table class="table table-bordered">'.$content.'</table></div>', 
    '<div id="table2"><table class="table table-bordered">'.$content.'</table></div>'
); 
```

如果您希望元素在返回时被专门引用，而不是在一个简单的数组中，您可以在调用函数时请求它们，如下所示；

```
list($table1, $table2) = two_tables($atts, $content = null); 
```

然后要使用它们，您只需调用：

```
echo $table1;

// some other code here

echo $table2; 
```

# jquery - $('.item_name:containes("text")') 导致 IE8 在页面加载时冻结

> ID：14513431
> 
> 赞同：0
> 
> 时间：2013-01-25T00:34:54.630
> 
> 标签：jquery, internet-explorer, loops, jquery-selectors, internet-explorer-8

我在 $(document).ready 上有一个循环来检查一个文本数组，该数组调用一个函数来搜索元素中的每个文本片段并将其用作选择器。

此代码在 FF、Chrome、IE9+ 等中 100% 工作。但在 IE8 中冻结了浏览器。

```
var setText = function(value)
{
    if(typeof $('.item_name:contains("'+value+'")') != 'undefined'){
      // Do something, it still freezes with nothing set here.
    }
}

// In the real script there maybe upwards of 20 items in this array.
var item_list = new Array('a','b','c');

$(document).ready(function() 
{
    $.each(item_list, function(index, value) {
       setText(value); 
    });
}); 
```

我已经禁用了 setText 函数并且它工作正常，所以它不是循环，它似乎是 :contains 选择器。

为什么会这样？我还能怎么做？我无法编辑 HTML 代码本身。

我的想法是我必须使用 jQuery 更改部分 HTML 标记，添加一些 HTML 并更改一些 CSS 值，但我拥有的唯一唯一标识符是“.item_name”中的文本。

冻结运行此程序的相关页面最多包含 3 个单独的“.item_name”实例。根据搜索字符串，其中任何一个都可能成为目标。

我使用的是 jQuery 1.7.1，无法更新。

```
if($('.item_name:contains("'+value+'")').length > 0){ // Also causes it to freeze. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T03:18:41.330

这看起来是一个选择器性能问题。

我建议执行以下步骤
1\. 添加一个 id，例如`id="crazy-products"`包含所有`item_name`元素的容器
2\. 更改`$('.item_name:contains("'+value+'")')`为 $('.item_name:contains("'+value+'")', $('#crazy-products') )

IE8 或更低版本没有`document.getElementsByClassName`实现，因此它正在查看文档中的所有元素，以查看是否应用了给定的过滤条件。如果我们可以将上下文传递给过滤条件，我们可以缩小文档查找的范围，从而提高页面的性能。

为了更好地理解问题，您可以查看 jquery.js 行号 4215 ( `found = filter( item, match, i, curLoop )`) 并查看数组的大小，`curLoop`在您的情况下它看起来非常大，通过将基于 id 的上下文传递给过滤器可以减少它.

# api - 获取半径内的附近街道地址

> ID：14513443
> 
> 赞同：5
> 
> 时间：2013-01-25T00:35:39.123
> 
> 标签：api, location, reverse-geocoding, street-address

我想检索地理点上小范围内所有街道地址的列表。

使用场景是用户从当前位置的地址列表（例如 50 米内）中选择他/她的当前地址，因为位置检索不够准确。

我想知道这是否可以使用谷歌地图 API？否则有没有人知道我可以用于此目的的替代 API？

从我所见，虽然谷歌地图反向地理编码服务返回了一些地理点的“地址”，但它们通常只是地址的不同表示，而不是位置附近的地址。

我在 SO 上看到了一些类似的问题，但没有一个有我正在寻找的答案。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-19T12:18:46.280

我能够使用 API 组合获得我正在寻找的那种结果。

首先，我使用[Geonames 的“查找附近街道”获取附近街道的名称](http://www.geonames.org/maps/osm-reverse-geocoder.html#findNearbyStreetsOSM)

[然后对于每条街道，我得到一个地理点并通过他们的Map Toolkit API](http://developer.tomtom.com/io-docs)的 TomTom 的反向地理编码方法运行它，这给了我每条街道的最小和最大街道编号值。

# javascript - RequireJS 文本插件优化抛出错误

> ID：14513446
> 
> 赞同：2
> 
> 时间：2013-01-25T00:36:11.397
> 
> 标签：javascript, module, requirejs, optimization, r.js

我的项目使用了requirejs的文本插件，虽然插件可以正常工作，但优化器却不行。这是对我的应用程序文件的测试：

```
define([
    'jquery', 
    'underscore',
    //'ui/js/form/LoginForm'
    'text!core/ui/text/form/LoginForm.txt'
], function($, _, template) {
    var initialize = function() {

    }

    return {
        initialize : initialize
    };
}); 
```

这是配置：

```
require.config({
    paths : {
        jquery      : 'lib/jquery/jquery',
        underscore  : 'lib/underscore/underscore',
        text        : 'lib/require/text'
    },
    shim: {
        underscore: {
            exports: '_'
        }
    }
});

require([
    'app', 
], function(App) {
    App.initialize();
}); 
```

这是构建配置：

```
({
    baseUrl: '../scripts',
    mainConfigFile: '../scripts/main.js',
    name: '../scripts/main',
    out: '../scripts/concatenated-modules.js',
    optimize: 'none',
    optimizeAllPluginResources: true
}) 
```

毫无疑问，我知道项目中的路径是正确的，因为应用程序本身可以工作。但是，在构建时我得到了这个：

```
C:\wamp\www\build>java -classpath js.jar org.mozilla.javascript.too
ls.shell.Main r.js -o build.js

Tracing dependencies for: ../scripts/main
InternalError: The choice of Java constructor append matching JavaScript argumen
t types (null) is ambiguous; candidate constructors are:
    class java.lang.AbstractStringBuilder append(java.lang.StringBuffer)
    class java.lang.AbstractStringBuilder append(java.lang.String)
    class java.lang.AbstractStringBuilder append(java.lang.Object)
    class java.lang.AbstractStringBuilder append(java.lang.CharSequence)
    class java.lang.AbstractStringBuilder append(char[]) (r.js#21883(eval)#307)
In module tree:
    ../scripts/main
      app
        text

InternalError: The choice of Java constructor append matching JavaScript argumen
t types (null) is ambiguous; candidate constructors are:
    class java.lang.AbstractStringBuilder append(java.lang.StringBuffer)
    class java.lang.AbstractStringBuilder append(java.lang.String)
    class java.lang.AbstractStringBuilder append(java.lang.Object)
    class java.lang.AbstractStringBuilder append(java.lang.CharSequence)
    class java.lang.AbstractStringBuilder append(char[]) (r.js#21883(eval)#307)
In module tree:
    ../scripts/main
      app
        text 
```

我的猜测是优化器无法意识到`'text!core/ui/text/form/LoginForm.txt'`文本依赖使用了插件。

我想要的是内联资源，我一直在按照教程进行操作，并且我拥有所有库的所有最新版本。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T10:42:13.333

Rhino 工具似乎无法理解文本！使用 r.js 编译时的插件

我切换到 Node 并且一切正常。

对于可能遇到相同问题的其他人，只需访问 nodejs 网站并下载 windows 安装程序（我使用的是 windows）。安装后重新启动计算机，您可以`node r.js -o app.build.js`按照 requirejs 网站上的说明使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-21T16:40:02.367

Rihno 中的文本插件存在问题。您的文件 'core/ui/text/form/LoginForm.txt' 不应为空。在该文本文件中添加任何字符串，它将运行。在 Rhino 中，使用文本插件时，空白文本被视为“null”

# c - 使用 fgets() 和 echo 用 C system() 调用封装单行 AppleScript

> ID：14513447
> 
> 赞同：0
> 
> 时间：2013-01-25T00:36:13.223
> 
> 标签：c, macos, scripting, terminal, applescript

如果我将 AppleScript 压缩为一行，如何将其封装在`echo` `system`C 程序的调用中运行？我尝试过的所有格式都会导致错误：（单引号、双引号、各种括号等...）

如果不清楚，我有一个`fgets()`用于捕获输入的 C 程序。当我尝试在系统命令中回显时，`echo ' && foo bar && $? '`它通常可以正常工作。但是，如果我想`echo`直接使用 AppleScript，我似乎无法降低格式。有任何想法吗？

FWIW 这是我正在尝试的：

`echo ' && "osascript -e 'tell application "Terminal"' -e 'do script "foo bar"' -e 'end tell'" && $?'`

上面的示例回显单引号中包含的所有内容并“打印”它，但不执行它。我尝试了许多关于报价的变体等，但无济于事。此外，`osascript ... 'end tell'`直接在终端中运行时的工作之间。

任何帮助表示赞赏！

**编辑**

下面是一段 C 代码：

```
 char comment[80];
    char cmd[120];
    fgets(comment, 80, stdin);
    sprintf(cmd, "echo '%s %s' >> reports.log", comment, now());
    system(cmd); 
```

**编辑二...更改标题更准确**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T03:10:13.757

好的！根据您的评论，我将您的问题改写如下：

> ### 如何欺骗`system("echo %s")`运行 AppleScript？
> 
> 我试图突破极限`system()`以理解为什么在 C 中小心使用它很重要。这个示例程序在一本关于 C 的书中介绍：
> 
> ```
> #include <stdio.h>
> #include <stdlib.h>
> 
> char* now() {
>     return "yyyy-mm-dd";
> }
> 
> int main() {
>     char comment[80];
>     char cmd[120];
>     fgets(comment, 80, stdin);
>     sprintf(cmd, "echo '%s %s' >> reports.log", comment, now());
>     return system(cmd);
> } 
> ```
> 
> 我可以“回显”程序并通过键入`' && pwd && '`. 现在我想弄清楚如何做类似的事情，但使用 AppleScript 而不是 bash。我正在尝试这个：
> 
> ```
> ' && "osascript -e 'tell application "Terminal"' -e 'do script "foo bar"' -e 'end tell'" && ' 
> ```
> 
> 该`osascript ... 'end tell'`命令直接在终端中运行时有效，但无法正常执行。我尝试了许多关于报价的变体等，但无济于事。

那么，我的回答如下：

* * *

为了更容易准确地调试正在运行的命令，让我们将命令回显到终端：

```
#include <stdio.h>
#include <stdlib.h>

char* now() {
    return "yyyy-mm-dd";
}

int main() {
    char comment[80];
    char cmd[120];
    fgets(comment, 80, stdin);
    sprintf(cmd, "echo '%s %s' >> reports.log", comment, now());

    /* for debugging */
    printf("executing %s\n", cmd);

    return system(cmd);
} 
```

现在让我们尝试一下：

```
$ gcc -c prog.c -o prog
$ ./prog
' && osascript -e 'tell application "Terminal"' -e 'do script "date"' -e 'end tell'" && '
executing echo '' && osascript -e 'tell application "Terminal"' -e 'do script "date"' -e 'end t yyyy-mm-dd' >> reports.log 
```

哼！它以某种方式被切断，`end t`而不是`end tell'" && '`. 等等，输入缓冲区有多大？*80个*字？那就是问题所在！您尝试的 AppleScript 命令在语法上是正确的，但对于输入缓冲区来说太长并且被截断了。

消除所有空格并使用[鲜为人知的 bash 功能](http://wiki.bash-hackers.org/syntax/quoting#ansi_c_like_strings)嵌入换行符，我几乎可以将 AppleScript 压缩为 77 个字符：

```
'&&osascript -e$'tell application "Terminal"\ndo script "date"\nend tell'&& ' 
```

由于 80 个字符的缓冲区最后需要一个空终止符，它实际上只有 79 个字符的空间。因此，使用这个特殊的 AppleScript 命令，您可以在终端中运行最长 6 个字符的 shell 命令……</p>

* * *

我对我认为是您最初的问题的回答——如何从 C 调用多行 AppleScript——仍然是：

* * *

命令行参数中可以包含换行符。您可以像这样从 bash 运行整个 AppleScript：

```
$ osascript -e '
tell application "Terminal"
    do script "date"
end tell' 
```

bash 暂停等待关闭`'`，然后将整个脚本作为单个参数传递。

你可以在 C 中做类似的事情，只是多引用一点：

```
#include <stdio.h>

int main() {
    system("osascript -e '\n"
            "tell application \"Terminal\"\n"
            "   do script \"date\"\n"
            "end tell'\n");
    return 0;
} 
```

# javascript - window.location 无法在 IE (IE9) 中工作

> ID：14513449
> 
> 赞同：1
> 
> 时间：2013-01-25T00:36:25.953
> 
> 标签：javascript, redirect, window.location

**我在做什么：**重定向到主页和带有 id 的上一页。

**出了什么问题：**无法在 IE 中运行（9）在 Firefox 上运行。

**我试过的：**

点击事件：

```
<input type="hidden" id="product_id" value="<?php echo $_GET['product_id']; ?>" />
        <td><input type="submit" value="Update" onClick="update(); return false;" /></td>     
        <td><input type="submit" value="Go Back" onClick="redirect('go back'); return false;" /></td>
        <td><input type="submit" value="Done" onClick="redirect('home'); return false;" /></td> 
```

重定向功能：

```
function redirect(redirect){

    var id = $('#product_id').val();    

    if (redirect == "go back"){
        window.location.href = 'displayProduct.php?product_id='+id;
    }
    else if (redirect == "home"){
        window.location.href = 'index.php';
    }

} 
```

我还尝试`alert('1');`在重定向函数中添加一个似乎在 IE 中没有触发的函数。

我错过了什么..？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T17:41:18.047

IE 可能会在此行引发错误：

```
var id = $('#product_id').val(); 
```

这可能会阻止进一步的执行。如果您还没有，请确保在 IE 中未禁用脚本调试以及打开显示错误：

![截屏](../Images/000fe97a1c5b2dfdd05d5911a0a4964f.png)

# ios - 块/方法可以互换吗？

> ID：14513451
> 
> 赞同：2
> 
> 时间：2013-01-25T00:36:41.570
> 
> 标签：ios, objective-c, objective-c-blocks

我是从 C#/Java/JS 到 ObjectiveC 的，而且我只有几天的时间，所以放轻松。

...所以我有一个将块作为参数的方法：

```
-(void)subToPub: (NSString*)publisherName 
      channelId: (NSString*)channelId 
       callback: (void(^)(NSDictionary*))cb 
```

我通常会使用如下：

```
[myObj  subToPub:@"someId" 
       channelId:@"someOtherId" 
        callback:[(^(NSDictionary* msg){
                    NSLog(@"cb2: %@",msg);
                 }) copy]
]; 
```

现在，假设我有另一种具有兼容签名的方法，例如：

```
-(void)subscribeHandler:(NSDictionary*)msg{
    NSLog(@"cb2: %@",msg);
} 
```

是否可以将其作为回调传递给上面的 subToPub 方法，或者我是否需要将此方法调用包装在一个块中？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-25T01:14:42.940

从逻辑上讲，您需要三个信息来调用所描述的选择器。对象实例、选择器的名称和字典参数。

你传递的块在被调用时只接受一条信息——字典。其他所有内容都需要在块内捕获。

因此，从逻辑上讲，选择器不能直接替换块。除此之外，调用哪个实例的知识从何而来？

生成“此特定对象上的此方法”的记录并将其压缩为单个对象的唯一方法是将其放入块中。

如果你有一个你想要调用的方法的定义格式（在这种情况下，一个带有单个参数的方法）并且隐式地知道对象，那么你可以考虑传入一个选择器（`SEL`）。所以例如

```
[myObj  subToPub:@"someId" 
       channelId:@"someOtherId" 
        callback:@selector(subscribeHandler:)
]; 
```

...随后，假设您知道要与之交谈的对象并将您收到的对象`obj`存储为：`SEL``selector`

```
[obj performSelector:selector withObject:msg]; 
```

如果你想传递多个参数，那么你需要开始使用`NSInvocation`s；它非常难看，您很快就会开始理解为什么将闭包添加到语言中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-25T00:40:43.903

你可以这样做

```
[myObj  subToPub:@"someId" 
       channelId:@"someOtherId" 
        callback:[(^(NSDictionary* msg){
                    [object subscribeHandler:msg];
                 }) copy]
]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-25T00:40:01.173

你需要把它包起来。显然你知道怎么做，例如^(void)subscribeHandler:@[@"key":@"value"]。

# java - JAX-RPC WebService 不在 WSDL 中生成 java 数组

> ID：14513454
> 
> 赞同：1
> 
> 时间：2013-01-25T00:36:59.660
> 
> 标签：java, arrays, web-services, websphere, jax-rpc

我目前正在尝试使用 Websphere 中提供的 Emitter 类（与 Java2WSDL 工具相同）从 java 源代码生成 JAX-RPC Web 服务。我目前正在使用 WAS6.1 和 WAS7.0 进行测试。问题是当我尝试为“FooRequest”生成 WSDL 时，ComplexType“Foo”在 wsdl 中的定义中缺少 Bar[]。当我将 'FooRequest' 更改为返回 Bar[] 时，wsdl 会正确生成并且一切都很好。

为什么在 wsdl 中没有正确生成数组？
有什么我做错了吗？
使用数组生成 wsdl 的正确方法是什么？

* * *

Foo.Java

```
package test;

import com.ibm.ws.webservices.wsdl.fromJava.Emitter;

public class Foo {

    private Bar[] bars;

    private Bar bar;

    private String[] data;

    public Bar[] getBars() {
        return bars;
    }

    public void setBars(Bar[] bars) {
        this.bars = bars;
    }

    public Bar getBar() {
        return bar;
    }

    public void setBar(Bar bar) {
        this.bar = bar;
    }

    public String[] getData() {
        return data;
    }

    public void setData(String[] data) {
        this.data = data;
    }

    public static void main(String[] args) {
        Emitter parser = new Emitter();

        parser.setCls("test.FooRequest");
        parser.setLocationUrl("http://localhost:8080/services/doFooService");

        // Set style/use
        parser.setStyle("document");
        parser.setUse("literal");

        parser.setIntfNamespace("urn:doFooService");
        parser.setClasspath("C:\\temp\\foo");

        parser.setWrapped(true);

        // Generate WSDL
        try {
            parser.emit("C:\\temp\\foo\\Foo.wsdl");
        } catch (Exception e) {
            e.printStackTrace();
        }
    }
} 
```

* * *

酒吧.java

```
package test;

public class Bar {

    private String baz;

    public String getBaz() {
        return baz;
    }

    public void setBaz(String baz) {
        this.baz = baz;
    }
} 
```

* * *

FooRequest.java

```
package test;

public class FooRequest {

    public Foo getFoo(String input) {
        Foo foo = new Foo();
        Bar[] bars = new Bar[5];
        Bar bar;
        for (int i = 0; i < bars.length; i++) {
            bar = new Bar();
            bar.setBaz("baz:" + (i + 1));
            bars[i] = bar;
        }
        foo.setBars(bars);
        bar = new Bar();
        bar.setBaz("Power Bar");
        foo.setBar(bar);

        String[] data = new String[5];
        for (int i = 0; i < data.length; i++) {
            data[i] = "baz:" + (i + 1);
        }
        return foo;
    }
} 
```

* * *

Foo.wsdl

```
<?xml version="1.0" encoding="UTF-8"?>
<wsdl:definitions xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/" xmlns:impl="urn:doFooService" xmlns:intf="urn:doFooService" xmlns:tns1="http://test" xmlns:wsdlsoap="http://schemas.xmlsoap.org/wsdl/soap/" xmlns:wsi="http://ws-i.org/profiles/basic/1.1/xsd" xmlns:xsd="http://www.w3.org/2001/XMLSchema" targetNamespace="urn:doFooService">
    <wsdl:types>
        <schema xmlns="http://www.w3.org/2001/XMLSchema" targetNamespace="urn:doFooService">
            <import namespace="http://test" />
            <element name="getFooResponse">
                <complexType>
                    <sequence>
                        <element name="getFooReturn" nillable="true" type="tns1:Foo" />
                    </sequence>
                </complexType>
            </element>
            <element name="getFoo">
                <complexType>
                    <sequence>
                        <element name="input" nillable="true" type="xsd:string" />
                    </sequence>
                </complexType>
            </element>
        </schema>
        <schema xmlns="http://www.w3.org/2001/XMLSchema" targetNamespace="http://test">
            <complexType name="Foo">
                <sequence>
                    <element name="bar" nillable="true" type="tns1:Bar" />
                </sequence>
            </complexType>
            <complexType name="Bar">
                <sequence>
                    <element name="baz" nillable="true" type="xsd:string" />
                </sequence>
            </complexType>
        </schema>
    </wsdl:types>
    <wsdl:message name="getFooResponse">
        <wsdl:part element="impl:getFooResponse" name="parameters" />
    </wsdl:message>
    <wsdl:message name="getFooRequest">
        <wsdl:part element="impl:getFoo" name="parameters" />
    </wsdl:message>
    <wsdl:portType name="FooRequest">
        <wsdl:operation name="getFoo">
            <wsdl:input message="impl:getFooRequest" name="getFooRequest" />
            <wsdl:output message="impl:getFooResponse" name="getFooResponse" />
        </wsdl:operation>
    </wsdl:portType>
    <wsdl:binding name="doFooServiceSoapBinding" type="impl:FooRequest">
        <wsdlsoap:binding style="document" transport="http://schemas.xmlsoap.org/soap/http" />
        <wsdl:operation name="getFoo">
            <wsdlsoap:operation soapAction="" />
            <wsdl:input name="getFooRequest">
                <wsdlsoap:body use="literal" />
            </wsdl:input>
            <wsdl:output name="getFooResponse">
                <wsdlsoap:body use="literal" />
            </wsdl:output>
        </wsdl:operation>
    </wsdl:binding>
    <wsdl:service name="FooRequestService">
        <wsdl:port binding="impl:doFooServiceSoapBinding" name="doFooService">
            <wsdlsoap:address location="http://localhost:8080/services/doFooService" />
        </wsdl:port>
    </wsdl:service>
</wsdl:definitions> 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-04T01:00:15.813

我找到了一个解决方案，以防将来有人发现这个问题。

问题是我之前从旧的 websphere 6.1 安装中获得了 jars：

*   引导程序.jar
*   类加载器.jar
*   emf.jar
*   ffdc.jar
*   j2ee.jar
*   ras.jar
*   wccm_base.jar
*   webserverices.jar
*   wsdl4j.jar
*   wsexception.jar

这些罐子是通过未知的其他人传递给我的，没有任何版本号或任何形式的元数据。我不知道它们是否是完整的真实版本，但它们可以工作。最初我将它们与提供的 websphere 6.1 JRE (java 1.5) 一起使用，但是当我现在部署到 websphere 7.0 时，我将我的软件更改为使用 websphere 7.0 (java 1.6)。我不知道的是 jar 和 java 1.5 版本是彼此特定的，所以当使用 java 1.6 JRE 时，Emitter 类不会失败，只是生成一个不正确的 wsdl。

为了解决这个问题，我只是将软件改回使用 java 1.5 JRE，直到我有时间更正 jar。

# java - 重新创建时，Android listview 数据不会持续存在

> ID：14513467
> 
> 赞同：0
> 
> 时间：2013-01-25T00:38:09.800
> 
> 标签：java, android

我有一个使用自定义数组适配器的列表视图，它加载带有文本+单选按钮的布局。用户一次只能选择列表中的一个项目 - 所以基本上任何时候都应该“选中”一个单选按钮。除非重新创建活动（例如旋转屏幕），否则此方法非常有效。我不明白它为什么会这样，所以也许你们都可以想到一些东西？

这是具有列表视图的活动的代码：

```
import android.os.Bundle;
import android.annotation.SuppressLint;
import android.app.Activity;
import android.view.Menu;
import android.view.MenuItem;
import android.view.View;
import android.widget.ArrayAdapter;
import android.widget.EditText;
import android.widget.ListView;
import android.widget.RadioButton;
import android.widget.TextView;
import android.support.v4.app.NavUtils;
import android.widget.AdapterView;

public class TimeForm extends Activity implements AdapterView.OnItemClickListener {

    private MyArrayAdapter maa;

    @SuppressLint("NewApi")
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_time_form);
        // Show the Up button in the action bar.
        getActionBar().setDisplayHomeAsUpEnabled(true);

        ListView lv = (ListView) findViewById(R.id.listView1);
        lv.setItemsCanFocus(false);

        String listitems[] = new String[16];

        listitems[0] = "Other";

        for(int i = 1; i < 16; i++)
        {
            listitems[i] = "Job " + i;
        }

        maa = new MyArrayAdapter(this, R.layout.layout_list, listitems);

        if(savedInstanceState != null)
            maa.selIndex = savedInstanceState.getInt("selIndex");

        lv.setAdapter(maa);
        lv.setOnItemClickListener(this);

    }

    @Override
    public void onItemClick(AdapterView<?> parent, View view, int position, long id)
    {
        EditText et = (EditText) this.findViewById(R.id.editText1);

        if(position == 0)
        {
            et.setVisibility(View.VISIBLE);
        } else {
            et.setVisibility(View.GONE);
        }

        if(maa.selItem != null)
        {
            RadioButton rOld = (RadioButton) maa.selItem.findViewById(R.id.radioButton1);
            rOld.setChecked(false);
        }

        RadioButton r = (RadioButton) view.findViewById(R.id.radioButton1);
        r.setChecked(true);

        maa.selIndex = position;
        maa.selItem = view;
    }

    public void onSaveInstanceState(Bundle b)
    {
        b.putInt("selIndex", maa.selIndex);

        super.onSaveInstanceState(b);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_time_form, menu);
        return true;
    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        switch (item.getItemId()) {
        case android.R.id.home:
            // This ID represents the Home or Up button. In the case of this
            // activity, the Up button is shown. Use NavUtils to allow users
            // to navigate up one level in the application structure. For
            // more details, see the Navigation pattern on Android Design:
            //
            // http://developer.android.com/design/patterns/navigation.html#up-vs-back
            //
            NavUtils.navigateUpFromSameTask(this);
            return true;
        }
        return super.onOptionsItemSelected(item);
    }

} 
```

MyArrayAdapter 类的代码：

```
import android.content.Context;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.ArrayAdapter;
import android.widget.RadioButton;
import android.widget.TextView;

public class MyArrayAdapter extends ArrayAdapter<String> {

    private Context context;
    private String[] strings;
    private int layoutID;

    public int selIndex;
    public View selItem;

    public MyArrayAdapter(Context c, int id, String[] values)
    {
        super(c, id, values);

        selIndex = -1;
        selItem = null;

        this.strings = values;
        this.context = c;
        layoutID = id;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent)
    {
        LayoutInflater inflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);

        View rView = inflater.inflate(layoutID, parent, false);

        TextView tv = (TextView) rView.findViewById(R.id.textView1);
        tv.setText(strings[position]);

        if(position == selIndex)
        {
            RadioButton r = (RadioButton) rView.findViewById(R.id.radioButton1);
            r.setChecked(true);
            selItem = rView;
        }

        return rView;
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T00:42:31.350

嗯，首先，关于“重新创建”视图。查看[http://developer.android.com/guide/topics/resources/runtime-changes.html](http://developer.android.com/guide/topics/resources/runtime-changes.html)。

例如，您可以定义`public void onConfigurationChanged(Configuration newConfig)`以确保您的活动不会在轮换时重新创建。

也就是说，如果您想保留这些值，则必须实际执行此操作，然后将任何选择应用于传递给 ArrayAdapter 的集合。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T18:24:15.267

我想到了。我不确定它是否是最好的解决方案，但它可以工作并且不会导致任何明显的性能损失。^_^

在 TimeForm 活动的 onItemClick() 方法中，我在底部添加了这个：

```
ListView lv = (ListView) findViewById(R.id.listView1);
lv.invalidateViews(); 
```

这会强制列表视图重绘所有子视图。感谢所有花时间帮助我解决这个问题的人。

# c# - 检测小数分隔符

> ID：14513468
> 
> 赞同：58
> 
> 时间：2013-01-25T00:38:16.697
> 
> 标签：c#, globalization

我必须在当前的 Windows 设置中检测小数点分隔符。我使用的是 Visual Studio 2010，Windows 窗体。特别是，如果 DecimalSeparator 是逗号，如果用户在 textbox1 中输入点，我需要在 textbox2 中显示零。

我尝试使用此代码，但不起作用：

```
private void tbxDaConvertire_KeyPress(object sender, KeyPressEventArgs e)
    {
        string uiSep = CultureInfo.CurrentUICulture.NumberFormat.NumberDecimalSeparator;
        if (uiSep.Equals(","))
        {
            while (e.KeyChar == (char)46)
            {
                tbxConvertito.Text = "0";
            }
        } 
    } 
```

我也尝试过这段代码，但不起作用：

```
private void tbxDaConvertire_KeyPress(object sender, KeyPressEventArgs e)
    {
        string uiSep = CultureInfo.CurrentCulture.NumberFormat.NumberDecimalSeparator;
        if (uiSep.Equals(","))
        {
            if (e.KeyChar == (char)46)
            {
                tbxConvertito.Text = "0";
            }
        } 
    } 
```

* * *

## 回答 #1

> 赞同：84
> 
> 时间：2013-01-25T01:15:26.810

解决方案：

```
private void textBox1_KeyPress(object sender, KeyPressEventArgs e)
{
    char a = Convert.ToChar(Thread.CurrentThread.CurrentCulture.NumberFormat.NumberDecimalSeparator);
    if (e.KeyChar == a)
    {
        e.Handled = true;
        textBox1.Text = "0";
    }
} 
```

这样，当您点击`.`或`,`您的文本框中将有一个`0`。

编辑：

如果您想在`0`每次点击小数点分隔符时插入一个，代码如下：

```
char a = Convert.ToChar(CultureInfo.CurrentCulture.NumberFormat.NumberDecimalSeparator);
if (e.KeyChar == a)
{
    e.KeyChar = '0';
} 
```

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2016-02-11T10:33:53.207

实际上你应该使用

```
CultureInfo.CurrentCulture.NumberFormat.NumberDecimalSeparator 
```

代替

```
CultureInfo.CurrentUICulture.NumberFormat.NumberDecimalSeparator 
```

使用第二个为您提供操作系统默认设置，这可能与登录到此 PC 的特定用户帐户的用户区域区域设置不同。

感谢[berhir](https://stackoverflow.com/users/2929675/berhir)和[Grimm](https://stackoverflow.com/users/9071626/grimm)指出[[docs]](https://docs.microsoft.com/en-us/dotnet/api/system.globalization.cultureinfo.currentculture?view=netcore-3.1)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-25T00:46:08.257

你不应该使用`while`循环，我认为它会冻结应用程序，`if`而是使用，问题可能就在这里

# java - 如何在 Java 中并行迭代多个列表？

> ID：14513475
> 
> 赞同：4
> 
> 时间：2013-01-25T00:39:18.223
> 
> 标签：java, iterator, guava

我想创建一个函数来迭代多个列表。现在我知道这些列表的大小完全相同（它们也可以有不同的类型），例如：

```
List<Integer> list1 = getList1();
List<String> list2 = getList2();
List<Long> list3 = getList3();
list1.size() == list2.size(); // returns true
list2.size() == list3.size(); // returns true 
```

而且我希望能够调用一个函数，该函数在每个列表的同一切片中获取 3 个元素，例如：

```
int calculate(int elemList1, String elemList2, long elemList3) {...}

// iterator over the lists in parallel {
    int ret = calculate(elemList1, elemList2, elemList3);
// } 
```

我想做与我在 guava 中讨论的内容等效的操作，但看起来尚未实现：[http ://code.google.com/p/guava-libraries/issues/detail?id=677](http://code.google.com/p/guava-libraries/issues/detail?id=677)

他们谈论做 Iterators.interleave 或 Iterators.zip ，我想做类似的事情，但我做不到，所以有人可以帮我一下吗？谢谢！

我宁愿不必获取一个列表的大小并按索引对其进行迭代，因为将来我可以拥有不同大小的列表，所以我只想使用一种方法来做到这一点。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-25T01:02:52.157

复合迭代器可能是一个很酷的主意，例如：

```
Iterator<Array<?>> compoundIterator = createIterator(List1, List2, List3); 
```

然后在实现内部，您将为每个列表创建迭代器，然后循环遍历这些项目并将它们放入一个数组中，然后您对这些东西的消费将如下所示：

```
while (compoundIterator.hasElements()){
    Array[] elements = compountIterator.nextElement();
    calculate(elements[0], elements[1], elements[2]);
} 
```

这个解决方案的好处是你隐藏了所有关于一个列表是否用完的细节（当然你必须决定如果一个列表用完了，你想做什么，但这也可以包含在里面）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T00:43:30.380

您可以创建一个新线程并在那里迭代您的列表。产生多个这个 therad，你可以并行迭代你的列表。

如果要传递任何模板类型的 List，只需将方法参数指定为 List，尽管这可能会导致编译器警告。您可以尝试的另一件事是将列表作为 List<T extends Object> 传递，并对 T 类型进行运行时检查并相应地执行操作

但是，如果通过“并行”你不是指多线程/并发——而是只想能够在一个循环中迭代你的 3 个列表，那么这样的事情就可以了（警告代码只是粗略的例子——未经测试/符合编码标准）：

```
List list1 = ...
List list2 = ...
List list3 = ...

for(int i=0,j=0,k=0; i<list1.size() && j<list2.size() && k<list3.size(); ++i,++j,++k)
{
   Object elemOfList1 = list1.get(i);
   Object elemOfList2 = list2.get(j);
   Object elemOfList3 = list3.get(k);
   // do something here
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-25T00:48:42.913

我不认为你真的在说并行，因为这些值被用来调用一个方法。如果您想要每个列表中的相同元素，同时跳过不同线程上的不同列表对您没有好处。

您只需要执行一个 for 循环，然后调用 list1.get(i)、list2.get(i)、list3.get(i)。

# perl - Perl 隐式关闭重置 $. 多变的

> ID：14513477
> 
> 赞同：6
> 
> 时间：2013-01-25T00:39:30.783
> 
> 标签：perl, file-handling, special-variables

如果您使用隐式关闭完成，则Perl状态的[文档](http://perldoc.perl.org/functions/close.html)不会重置。我试图确切地了解这意味着什么，但无法实现。这是我的脚本：`close``$.``open`

```
use strict;
use warnings;
use autodie;
my @files = qw(test1.txt test2.txt test3.txt);

#try with implicit close
for my $file (@files){
    open my $fh, '<', $file;
    while(<$fh>){
        chomp;
        print "line $. is $_\n";
    }
    #implicit close here
} 
```

以下是读入的所有三个文件的内容：

```
line 1
line 2
line 3
line 4
line 5
line 6
line 7
line 8
line 9
line 10 
```

由于我没有明确调用，因此应该使用`close`隐式（我认为）并且不应该重置。但是，当我运行脚本时，我得到这个输出，显示 $. 被重置：`close``$.`

```
line 1 is line 1
line 2 is line 2
line 3 is line 3
line 4 is line 4
line 5 is line 5
line 6 is line 6
line 7 is line 7
line 8 is line 8
line 9 is line 9
line 10 is line 10
line 1 is line 1
line 2 is line 2
line 3 is line 3
line 4 is line 4
line 5 is line 5
line 6 is line 6
line 7 is line 7
line 8 is line 8
line 9 is line 9
line 10 is line 10
line 1 is line 1
line 2 is line 2
line 3 is line 3
line 4 is line 4
line 5 is line 5
line 6 is line 6
line 7 is line 7
line 8 is line 8
line 9 is line 9
line 10 is line 10 
```

它确实看起来像是被我重置了。我对文档的理解是错误的吗？有人可以告诉我在什么情况下隐式`close`不会重置`$.`？

顺便说一句，我使用的是草莓 5.16.1。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-25T00:42:05.013

`$.`实际上不是全局变量，它是最近读取的文件句柄的属性。并且您在循环的每次迭代中都使用了一个新的文件句柄。

像这样修改代码“修复”它：

```
my $fh;
for my $file (@files){
    open $fh, '<', $file; 
```

# php - PHP format('H:m') 加一分钟

> ID：14513478
> 
> 赞同：1
> 
> 时间：2013-01-25T00:39:37.867
> 
> 标签：php

在我的数据库中，有一个带有“00:00:00”的字段和一个带有“15:00:00”的字段。

当我在我的 php 页面中回显它时，`format('H:m')`它们显示为“00:01”和“15:01”。如果没有这种格式，它们会显示为“00:00:00”和“15:00:00”。

有谁知道可能导致这种情况的原因？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T00:40:43.013

m 不是分钟，它是月份。我是分钟。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T00:40:58.163

那是因为现在是一月。试试`H:i`吧。

# r - 在R中将矩阵转换为栅格

> ID：14513480
> 
> 赞同：11
> 
> 时间：2013-01-25T00:39:40.783
> 
> 标签：r, matrix, spatial, raster

我有一个带有空间坐标和一个变量的矩阵数据。空间分辨率为1000米。

```
> str(dat1)
> List of 3
> $ x: num [1:710] 302340 303340 304340 305340 306340 ...
> $ y: num [1:1241] 5431470 5432470 5433470 5434470 5435470 ...
> $ z: num [1:710, 1:1241] 225 225 225 225 225 ... 
```

我想将其转换为光栅格式。

```
> dat1$x[1:10]
> [1] 302339.6 303339.6 304339.6 305339.6 306339.6 307339.6 308339.6 309339.6 310339.6 311339.6
> dat1$y[1:10]
>  [1] 5431470 5432470 5433470 5434470 5435470 5436470 5437470 5438470 5439470 5440470 
```

我使用下面的代码来做到这一点。但是我得到的分辨率和我的不一样。有什么更好的方法可以让我的真实数据获得相同的分辨率？

```
> r <-raster(
             dat1$z,
             xmn=range(dat1$x)[1], xmx=range(dat1$x)[2],
             ymn=range(dat1$y)[1], ymx=range(dat1$y)[2], 
             crs=CRS("+proj=utm +zone=11 +datum=NAD83")
            )
> r

class       : RasterLayer 
dimensions  : 710, 1241, 881110  (nrow, ncol, ncell)
resolution  : 571.3135, 1746.479  (x, y)
extent      : 302339.6, 1011340, 5431470, 6671470  (xmin, xmax, ymin, ymax)
coord. ref. : +proj=utm +zone=11 +datum=NAD83 
data source : in memory
names       : layer 
values      : 13.65059, 248.6229  (min, max) 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-01-25T09:23:36.133

尝试阅读光栅的帮助。从矩阵创建栅格时，行和列的感觉并不是您想象的那样。您给它提供了一个 1241x710 矩阵，但从错误的向量中获取了最大值和最小值。

尝试以下操作：

```
> # small version of your test set
> dat1=list()
> dat1$x=seq(302339.6,by=1000,len=71)
> dat1$y=seq(5431470,by=1000,len=124)
> dat1$z=matrix(runif(71*124),71,124)
> str(dat1)
List of 3
 $ x: num [1:71] 302340 303340 304340 305340 306340 ...
 $ y: num [1:124] 5431470 5432470 5433470 5434470 5435470 ...
 $ z: num [1:71, 1:124] 0.765 0.79 0.185 0.461 0.421 ...
> image(dat1,asp=1) 
```

漂亮的方形像素。现在创建您的栅格：

```
r <-raster(
             dat1$z,
             xmn=range(dat1$x)[1], xmx=range(dat1$x)[2],
             ymn=range(dat1$y)[1], ymx=range(dat1$y)[2], 
             crs=CRS("+proj=utm +zone=11 +datum=NAD83")
            )
plot(r) 
```

完全非方形像素。如果你仔细看，矩阵会从图像图旋转 90 度。或者转置什么的。

解决方案：只需从 x,y,z 列表中创建栅格：

```
 > r=raster(dat1);plot(r) 
```

方形像素，与图像绘图相同，分辨率现在是您所期望的：

```
> r
class       : RasterLayer 
dimensions  : 124, 71, 8804  (nrow, ncol, ncell)
resolution  : 1000, 1000  (x, y)
extent      : 301839.6, 372839.6, 5430970, 5554970  (xmin, xmax, ymin, ymax)
coord. ref. : NA 
data source : in memory
names       : layer 
values      : 7.738103e-05, 0.9995497  (min, max) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T01:14:41.850

我认为您可能会误解在这种情况下解决方案的含义。它只是范围除以行和列中的单元格数。例如，在您的情况下，分辨率计算如下：

```
(1011340 - 302339.6) /1241
# 571.3138

(6671470  - 5431470) / 710
# 1746.479 
```

所以，它真正的意思是每行有 1241 个正方形，并且由于每行从`1011340`到`302339.6`单位（在这种情况下我认为是米），那么每个矩形的宽度都是 571。同样，每个矩形从上到下都是 1746。

如果您希望每个栅格点是一个边长等于 1000 米的正方形，那么范围不应该是`1241*1000`（而不是`(1011340 - 302339.6)`）吗？

# json - 将用户信息存储在 json 中还是数据库中的表中？

> ID：14513483
> 
> 赞同：0
> 
> 时间：2013-01-25T00:39:58.943
> 
> 标签：json, storage, messages

我正在开发一个必须存储用户联系人列表的网站。因此它将包含人们的电话号码、地址以及发送给该联系人的消息。我显然想保证这些信息的安全，但是给每个用户一个包含一系列详细信息的 json 文件似乎很容易有效。
我不太确定这是否是一个非常危险和不安全的想法，以及我是否应该使用数据库中的表或其他东西。不过，使用表格来存储用户之间发送的消息似乎不太直观。所以我只是想知道我存储的最明智的方式是什么
i) 包含敏感信息的用户特定联系人列表
ii) 在两个联系人之间发送的消息
如果这是一个广为人知甚至没有谈论过的话题，我很抱歉。我只是无法在任何地方找到明确的答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T00:46:55.103

您绝对应该为此使用数据库。如果您将这些值存储在文件中，那么每次您需要访问像单个电话号码一样小的内容时，您都必须加载每个用户的所有信息。

# python - 一个句子的Python正则表达式不想匹配

> ID：14513488
> 
> 赞同：0
> 
> 时间：2013-01-25T00:40:16.553
> 
> 标签：python, regex

任何人都可以解释为什么这是（在 Python 中）：

```
pattern = re.compile(r"""
^
([[a-zA-Zàáâãäåæçèéêëìíîïðñòóôõöøùúûüýþÿ]+\s{1}]+)
([a-zA-Zàáâãäåæçèéêëìíîïðñòóôõöøùúûüýþÿ]+)   # Last word.
\.{1}                                                                                 
$
""", re.VERBOSE + re.UNICODE)

if re.match(pattern, line): 
```

不匹配“一个句子”。

我实际上想将整个句子（包括句号）作为返回组（）返回，但一直失败得很惨。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T00:48:21.050

我认为也许您打算这样做：

```
(([a-zA-Zàáâãäåæçèéêëìíîïðñòóôõöøùúûüýþÿ]+\s{1})+)
 ^                                             ^ 
```

我认为您拥有的嵌套方括号不会像您认为的那样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T11:35:59.367

此正则表达式有效：

```
pattern = re.compile(r"""
^
([a-zA-Zàáâãäåæçèéêëìíîïðñòóôõöøùúûüýþÿ]+\s{1})+
([a-zA-Zàáâãäåæçèéêëìíîïðñòóôõöøùúûüýþÿ]+)   # Last word.
\.{1}
$
""", re.VERBOSE + re.UNICODE)

line = "A sentence."

match = re.match(pattern, line)

>>> print "'%s'" % match.group(0)
'A sentence.'
>>> print "'%s'" % match.group(1)
'A '
>>> print "'%s'" % match.group(2)
'sentence' 
```

要返回整个匹配项（`line`在这种情况下），请使用`match.group(0)`.

因为第一个匹配组可以匹配多次（除了最后一个之外的每个单词一次），您只能使用 访问倒数第二个单词`match.group(1)`。

顺便说一句，`{1}`在这种情况下，符号不是必需的，匹配一次且仅一次是默认行为，因此可以删除该位。

额外的方括号绝对没有帮助你:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T19:19:29.893

事实证明，以下内容确实有效，包括我想要的所有扩展 ascii 字符

```
^
([\w+\s{1}]+\w{1}\.{1})
$ 
```

# json - 如何通过 wcf 跟踪查看 https REST Web 服务的参数和 json 对象？

> ID：14513490
> 
> 赞同：0
> 
> 时间：2013-01-25T00:40:34.760
> 
> 标签：json, wcf, https, trace

任何人都知道我如何查看人们如何使用我的网络服务？我打开了 wcf 跟踪，可以看到方法调用，但没有参数或 json 对象。我在 iis v6 上通过 https 使用 .net 4 wcf json Web 服务。这将极大地帮助我调试我的应用程序，任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T23:21:47.617

抱歉，想通了。我启用了消息记录，但我没有将消息记录源添加到共享侦听器

# android - Android：TabListener、Swipe 和 Tab 片段

> ID：14513491
> 
> 赞同：2
> 
> 时间：2013-01-25T00:40:36.450
> 
> 标签：android, eclipse, android-activity, android-actionbar, swipe

我被这个问题困住了。我正在尝试在我`swipe`的各种`fragments`应用程序之间插入。滑动本身可以完美运行，但问题是，我不明白为什么，我在各种片段中定义的动作不被各种`toggle / buttons`等识别。换句话说，它只是在各种`layouts`. 这是我的代码（删除了不必要的部分）

```
public class MainActivity extends FragmentActivity implements
    ActionBar.TabListener {

    CollectionPagerAdapter mCollectionPagerAdapter;
    ViewPager mViewPager;

    public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    {
        Runtime runtime = Runtime.getRuntime();
        try {
            runtime.exec("su");
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        }

    mCollectionPagerAdapter = new CollectionPagerAdapter(
        getSupportFragmentManager());

    final ActionBar actionBar = getActionBar();
    actionBar.setHomeButtonEnabled(false);

    actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);

    mViewPager = (ViewPager) findViewById(R.id.pager);
    mViewPager.setAdapter(mCollectionPagerAdapter);
    mViewPager
        .setOnPageChangeListener(new ViewPager.SimpleOnPageChangeListener() {
            @Override
            public void onPageSelected(int position) {
            actionBar.setSelectedNavigationItem(position);
            }
        });

    for (int i = 0; i < mCollectionPagerAdapter.getCount(); i++) {
        actionBar.addTab(actionBar.newTab()
            .setText(mCollectionPagerAdapter.getPageTitle(i))
            .setTabListener(this));
    }
    }

    public void onTabUnselected(ActionBar.Tab tab,
        FragmentTransaction fragmentTransaction) {
    }

    public void onTabSelected(ActionBar.Tab tab,
        FragmentTransaction fragmentTransaction) {
    mViewPager.setCurrentItem(tab.getPosition());
    }

    public void onTabReselected(ActionBar.Tab tab,
        FragmentTransaction fragmentTransaction) {
    }

    public class CollectionPagerAdapter extends FragmentPagerAdapter {

    final int NUM_ITEMS = 10; // number of tabs

    public CollectionPagerAdapter(FragmentManager fm) {
        super(fm);
    }

    @Override
    public Fragment getItem(int i) {
        Fragment fragment = new TabFragment();
        Bundle args = new Bundle();
        args.putInt(TabFragment.ARG_OBJECT, i);
        fragment.setArguments(args);
        return fragment;
    }

    @Override
    public int getCount() {
        return NUM_ITEMS;
    }

    @Override
    public CharSequence getPageTitle(int position) {
        String tabLabel = null;
        switch (position) {
        case 0:
        tabLabel = getString(R.string.tabWelcome);
        break;
        case 1:
        tabLabel = getString(R.string.tabPerformance);
        break;
        case 2:
        tabLabel = getString(R.string.tabBattery);
        break;
        case 3:
        tabLabel = getString(R.string.tabNetwork);
        break;
        case 4:
        tabLabel = getString(R.string.tabImages);
        break;
        case 5:
        tabLabel = getString(R.string.tabAudio);
        break;
        case 6:
        tabLabel = getString(R.string.tabGps);
        break;
        case 7:
        tabLabel = getString(R.string.tabKernel);
        break;
        case 8:
        tabLabel = getString(R.string.tabMisc);
        break;
        case 9:
        tabLabel = getString(R.string.tabTools);
        break;
        }

        return tabLabel;
    }
    }

    public static class TabFragment extends Fragment {

    public static final String ARG_OBJECT = "object";

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {

        Bundle args = getArguments();
        int position = args.getInt(ARG_OBJECT);

        int tabLayout = 0;
        switch (position) {
        case 0:
        tabLayout = R.layout.welcome;
        break;
        case 1:
        tabLayout = R.layout.performance;
        break;
        case 2:
        tabLayout = R.layout.battery;
        break;
        case 3:
        tabLayout = R.layout.network;
        break;
        case 4:
        tabLayout = R.layout.images;
        break;
        case 5:
        tabLayout = R.layout.audio;
        break;
        case 6:
        tabLayout = R.layout.gps;
        break;
        case 7:
        tabLayout = R.layout.kernel;
        break;
        case 8:
        tabLayout = R.layout.misc;
        break;
        case 9:
        tabLayout = R.layout.tools;
        break;
        }

        View rootView = inflater.inflate(tabLayout, container, false);

        return rootView;
    }
    }

} 
```

这是我的主要活动，如您所见，选项卡设置正确。举个例子`Performance.java`！目前，所有各种切换和按钮都有一个无法识别的定义功能

```
public class PerformanceActivity extends ListFragment {

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
        View v = inflater.inflate(R.layout.performance, container, false);
                //blablabla all my buttons and toggles (THAT WORKS BEFORE THE IMPLEMENTATION OF THE SWIPE)

return v;
    } 
```

谢谢您的帮助 ：）

# php - 使用数组作为值的codeigniter中的下拉菜单

> ID：14513493
> 
> 赞同：0
> 
> 时间：2013-01-25T00:40:37.723
> 
> 标签：php, html, codeigniter

我在 $categories 变量中返回了一个 result_array()，现在我想创建一个下拉菜单。但是如果我直接使用变量，数组的所有元素都会被显示出来。但是我只想显示名称并将其 id 作为值。我该怎么做？

```
$options = $categories;
echo form_dropdown('category', $options); 
```

我想要类似的东西

```
<select name="category">
<option value="1"> ABC </option>
..... 
<option value="10"> NNNC </option>
</select> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-25T00:49:13.007

$options 数组中的键不是数据库行的实际 ID。

所以你的 $options 数组看起来像这样：

```
Array(
'0' => array('id'=>'10', 'value'=>'someval1'),
'1' => array('id'=>'22', 'value'=>'someval2'),
'2' => array('id'=>'36', 'value'=>'someval3')) 
```

要看到这一点，请放在`print_r($options);`回声呼叫之前。

要制作真正的下拉菜单，您应该制作如下所示的辅助函数：

```
function my_form_dropdown($name, $result_array){
    $options = array();
    foreach ($result_array as $key => $value){
        $options[$value['id']] = $value['value'];
    }
    return form_dropdown($name, $options);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T15:04:25.303

好吧，因为我将所有返回的行作为 $categories 中的数组

因此 $categories 上的 print_r() 给了我输出

```
Array
(
    [0] => Array
        (
            [id] => 24
            [name] => First
        )

    [1] => Array
        (
            [id] => 25
            [name] => Second
        )

    [2] => Array
        (
            [id] => 26
            [name] => third
        )

) 
```

但我需要类似下面的代码来使下拉菜单工作

```
Array
(
    [24] => First
    [25] => Second
    [26] => third
) 
```

所以我确实修改了我的代码，如下所示

```
$options = array();
                    foreach ($categories as $category) {
                        $options[$category['id']] =  $category['name'];
                    }

                    echo form_dropdown('cat_id', $options); 
```

因此生成的 HTML 如下，这是我想要的标记。

```
<select name="category">
<option value="24"> First </option>
<option value="25"> Second </option>
<option value="26"> Third </option>
</select> 
```

它确实奏效了。感谢您的回答，但是经过两天的挠头，我终于做到了。当你是初学者时，有时它是如此困难。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T00:44:37.383

你可以做

```
$options = array(

    '1' => 'ABC',
    '2' => 'NNC'
);

echo form_dropdown('category', $options); 
```

其中键将是下拉列表的值

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-08-24T12:37:23.743

```
$options = array_combine(
    array_column($categories, 'id'),
    array_column($categories, 'value')
);
echo form_dropdown('category', $options, '', array('class' => 'form-control')); 
```

# java - JOptionPane 的 showInputDialog 是如何工作的？

> ID：14513494
> 
> 赞同：0
> 
> 时间：2013-01-25T00:40:40.297
> 
> 标签：java, swing, joptionpane

我想知道 inputdialog 如何返回值，尤其是当还有 ok 和 cancel 按钮时。有人可以解释它是如何返回值的吗？

更新：

让我这样说吧。我想创建一个包含 6 个按钮的对话框，每个按钮返回不同的值。我希望它得到这样的值： String value = MyDialog.getValue(); // 像 showInputDialog

问题是我如何在按钮按下时返回值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T00:44:29.417

来自[Java 教程](http://docs.oracle.com/javase/tutorial/uiswing/components/dialog.html#features)

```
Object[] possibilities = {"ham", "spam", "yam"};
String s = (String)JOptionPane.showInputDialog(
    frame,
    "Complete the sentence:\n"
    + "\"Green eggs and...\"",
    "Customized Dialog",
    JOptionPane.PLAIN_MESSAGE,
    icon,
    possibilities,
    "ham");

//If a string was returned, say so.
if ((s != null) && (s.length() > 0)) {
    setLabel("Green eggs and... " + s + "!");
    return;
} 
```

您可能想熟悉“从对话框中获取用户输入”部分

您还应该熟悉有关同一主题的[Java 文档](http://docs.oracle.com/javase/7/docs/api/javax/swing/JOptionPane.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-25T12:37:07.027

现在我对您的目标有了更清晰的了解，我认为与其尝试模拟 JOptionPane，不如为每个按钮提供不同的 actionCommand：

```
private JDialog dialog;

private String inputValue;

String showPromptDialog(Frame parent) {
    dialog = new JDialog(parent, true);
    dialog.setDefaultCloseOperation(JDialog.DISPOSE_ON_CLOSE);

    // [add components to dialog here]

    firstButton.setAction(new ButtonAction("Button 1",  "first"));
    secondButton.setAction(new ButtonAction("Button 2", "second"));
    thirdButton.setAction(new ButtonAction("Button 3",  "third"));
    fourthButton.setAction(new ButtonAction("Button 4", "fourth"));
    fifthButton.setAction(new ButtonAction("Button 5",  "fifth"));
    sixthButton.setAction(new ButtonAction("Button 6",  "sixth"));

    dialog.pack();
    dialog.setLocationRelativeTo(parent);

    inputValue = null;
    dialog.setVisible(true);

    return inputValue;
}

private class ButtonAction
extends AbstractAction {
    private static final long serialVersionUID = 1;

    ButtonAction(String text,
                 String actionCommand) {
        super(text);
        putValue(ACTION_COMMAND_KEY, actionCommand);
    }

    public void actionPerformed(ActionEvent event) {
        inputValue = event.getActionCommand();
        dialog.dispose();
    }
} 
```

# c++ - list::remove_if 等效

> ID：14513500
> 
> 赞同：1
> 
> 时间：2013-01-25T00:41:09.673
> 
> 标签：c++, list, remove-if

我想知道是否可以使用 remove_if 和 lambda 表达式来表示这个表达式。

```
 std::list< gh::Actor* >::iterator astit = actors.begin();
        while (astit != actors.end())
        {           
            if( (*astit)->state == DELETE_STATE )
            {           
                Actor* reference = *astit;
                actors.erase(astit++);

                delete reference;
            }
            else
            {
                ++astit;
            }
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T00:47:12.483

更好地`smart pointers`与`lambda`.

尝试：

```
std::list<std::shared_ptr<gh::Actor>> actors;
actors.remove_if([](std::shared_ptr<Actor>& a){ return a->state == DELETE_STATE; }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-25T00:58:37.923

```
actors.erase(
  std::remove_if( actors.begin(), actors.end(), []( gh::Actor*a )->bool {
    if (!a || a->state == DELETE_STATE) {
      delete a;
      return true;
    } else {
      return false;
    }
  }),
  actors.end()
); 
```

顺便说一句，您几乎可以肯定不想使用`std::list`. 使用`std::vector`——`std::list`表现优异的情况`std::vector`非常狭窄。

# php - preg_replace_callback：正则表达式搜索和替换

> ID：14513502
> 
> 赞同：0
> 
> 时间：2013-01-25T00:41:24.527
> 
> 标签：php, preg-replace, replace, preg-replace-callback

```
$details = "text...[book=123]...text...";

$details = preg_replace_callback(
  "/\[book=(.+?)\]/smi",
  function ($m) {
      global $skip_books;
      $book = $m[1];  // 123
      $feed = $m[2];  // 456       
  return "<div id=\"view_book_".$book."_".$feed."\"></div>";
  },
  $details
); 
```

使用这种模式，我只能得到 $book ($m[1])：

```
"/\[book=(.+?)\]/smi"` 
```

但我也想获得 $feed ($m[2])，所以我替换为这个 [book=123_456]。

如何在下划线后得到“456”（$m[2]）？

```
"/\[book=(.+?)_(.+?)\]/smi" ??? 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T00:48:53.073

不要`global`在这里使用；您已经在使用闭包，因此请使用`use`：

```
function ($m) use ($skip_books) {
    // ...
} 
```

*顺便说一句，您实际上并没有`$skip_books`在到目前为止显示的代码中使用，但我假设那是因为您已经简化了它*

如果您的论点始终是数字，请不要使用通用`(.+?)`的东西，例如但要具体（越多越好）：

```
/\[book=(\d+)_(\d+)\]/i 
```

我还删除了`/s`and`/m`修饰符，它们在这里没用。

# javascript - CoffeeScript 类和 nosuchmethod

> ID：14513509
> 
> 赞同：4
> 
> 时间：2013-01-25T00:42:19.420
> 
> 标签：javascript, coffeescript, metaprogramming, ecmascript-harmony

假设在底层 Javascript 引擎中存在[Harmony 代理](http://soft.vub.ac.be/~tvcutsem/proxies/)，如何构造一个 CoffeeScript 超类，以便扩展它允许一个类定义一个 noSuchMethod 方法（或 methodMessing）？

如果类（或其超类）没有请求的方法，则将使用名称和参数列表调用该方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T04:04:03.233

好问题！=D

（注意：我只在 Firefox 中测试过，因为它似乎是唯一支持 Harmony 代理的浏览器。）

这似乎适用于**缺少的属性**：

```
class DynamicObject

  propertyMissingHandler =
    get: (target, name) ->
      if name of target
        target[name] 
      else
        target.propertyMissing name

  constructor: ->
    return new Proxy @, propertyMissingHandler

  # By default return undefined like a normal JS object.
  propertyMissing: -> undefined

class Repeater extends DynamicObject
  exited: no
  propertyMissing: (name) ->
    if @exited then "#{name.toUpperCase()}!" else name

r = new Repeater
console.log r.hi     # -> hi
console.log r.exited # -> false. Doesn't print "exited" ;)
r.exited = yes
console.log r.omg    # -> OMG! 
```

现在，它可以工作了，但它有一个小小的**警告**：它依赖于“其他类型”的构造函数。也就是说，DynamicObject 的构造函数*返回*的不是 DynamicObject 实例（它返回包装实例的代理）。其他类型的构造函数有一些微妙和不那么微妙的问题，[它们在 CoffeeScript 社区中并不是一个非常受欢迎的特性](https://github.com/jashkenas/coffee-script/issues/2359)。

例如，上面的工作（在 CoffeeScript 1.4 中），但只是因为生成的 Repeater 构造函数返回调用超级构造函数的结果（因此返回代理对象）。如果 Repeater 有不同的构造函数，它将无法工作：

```
class Repeater extends DynamicObject
  # Innocent looking constructor.
  constructor: (exited = no) ->
    @exited = exited
  propertyMissing: (name) ->
    if @exited then "#{name.toUpperCase()}!" else name

console.log (new Repeater yes).hello # -> undefined :( 
```

您必须显式返回调用超级构造函数的结果才能使其工作：

```
 constructor: (exited = no) ->
    @exited = exited
    return super 
```

因此，由于其他类型的构造函数有点令人困惑/损坏，我建议避免使用它们并使用类方法来实例化这些对象，而不是`new`：

```
class DynamicObject

  propertyMissingHandler =
    get: (target, name) ->
      if name of target
        target[name] 
      else
        target.propertyMissing name

  # Use create instead of 'new'.
  @create = (args...) ->
    instance = new @ args...
    new Proxy instance, propertyMissingHandler

  # By default return undefined like a normal JS object.
  propertyMissing: -> undefined

class Repeater extends DynamicObject
  constructor: (exited = no) ->
    @exited = exited
    # No need to worry about 'return'
  propertyMissing: (name) ->
    if @exited then "#{name.toUpperCase()}!" else name

console.log (Repeater.create yes).hello # -> HELLO! 
```

* * *

现在，对于**缺少的方法**，为了获得与问题中要求的接口相同的接口，我们可以在代理处理程序中做类似的事情，但是当目标没有属性时，而不是直接调用目标上的特殊方法（propertyMissing）名称，它返回一个函数，该函数又调用特殊方法（methodMissing）：

```
class DynamicObject2

  methodMissingHandler =
    get: (target, name) ->
      return target[name] if name of target
      (args...) ->
        target.methodMissing name, args

  # Use this instead of 'new'.
  @create = (args...) ->
    instance = new @ args...
    new Proxy instance, methodMissingHandler 

  # By default behave somewhat similar to normal missing method calls.
  methodMissing: (name) -> throw new TypeError "#{name} is not a function"

class CommandLine extends DynamicObject2
  cd: (path) ->
    # Usually 'cd' is not a program on its own.
    console.log "Changing path to #{path}" # TODO implement me
  methodMissing: (name, args) ->
    command = "#{name} #{args.join ' '}"
    console.log "Executing command '#{command}'" 

cl = CommandLine.create()
cl.cd '/home/bob/coffee-example'  # -> Changing path to /home/bob/coffee-example
cl.coffee '-wc', 'example.coffee' # -> Executing command 'coffee -wc example.coffee'
cl.rm '-rf', '*.js'               # -> Executing command 'rm -rf *.js' 
```

* * *

不幸的是，我找不到一种方法来区分代理处理程序中的属性访问和方法调用，以便 DynamicObject 可以更智能并相应地调用 propertyMissing 或 methodMissing （这很有意义，因为方法调用只是一个属性访问，然后是函数调用）。

如果我必须选择并使 DynamicObject 尽可能灵活，我会选择 propertyMissing 实现，因为子类可以选择他们希望如何实现 propertyMissing 并将丢失的属性视为方法或不。上面根据 propertyMissing 实现的 CommandLine 示例将是：

```
class CommandLine extends DynamicObject
  cd: (path) ->
    # Usually 'cd' is not a program on its own.
    console.log "Changing path to #{path}" # TODO implement me
  propertyMissing: (name) ->
    (args...) ->
      command = "#{name} #{args.join ' '}"
      console.log "Executing command '#{command}'" 
```

有了这个，我们现在可以混合继承自同一个基类的中继器和命令行（多么有用！=P）：

```
cl = CommandLine.create()
r = Repeater.create yes
cl.echo r['hello proxies'] # -> Executing command 'echo HELLO PROXIES!' 
```

# session - 会话变量定义如何在 Coldfusion 页面中“蒸发”？

> ID：14513511
> 
> 赞同：2
> 
> 时间：2013-01-25T00:42:32.540
> 
> 标签：session, variables, coldfusion

我收到一条错误消息：“ **auth.USR_xID is undefined in Session** ”不是完全可重复的，但到处都是。但是该变量是在第 25 行定义的，然后在第 77 行和第 265 行中使用，但在这里它会引发错误 - 我会说该页面的每 1,000 个请求。

```
Line 25: <cfparam name="session.auth.USR_xID" default="#SESSION.auth.USR_ID#">
some more code
Line 77: <cfset USR_Pointer = "#SESSION.auth.USR_xID#">
some more code
Line 265: <cfif session.auth.usr_id IS session.auth.usr_xid>
... 
```

我们试图找到类似的案例，但找不到。我们加载页面，终止会话，然后点击提交。一切正常。我们无法重现该错误，但它确实发生了。我们有超过 100 万用户使用它，并且在任何给定的时间内都有 10 多笔交易。有人有想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T01:49:50.850

@Derrick 给出了一个很好的答案。另一种可能性是当用户打开您的应用程序的两个实例时。可能在两个选项卡或两个浏览器窗口中。这可能会导致两个会话相互干扰。会话甚至可能在一个选项卡中超时，从而弄乱另一个选项卡。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T16:07:23.563

我同意 Dan 的观点，将应用程序放在多个选项卡中是破坏会话状态的一种非常简单的方法。

在我的上一份工作中，我们编写了一个患者管理系统。用户会；

*   登录 转到患者 A，在当前选项卡中做一些“事情”。
*   打开一个新选项卡 - 在患者 B 的记录中做某事。
*   返回患者 A 的原始选项卡并在那里进行进一步编辑。

但是在患者 A 选项卡上所做的更改 - 现在归因于患者 B 而不是患者 A。（我们将患者 ID 存储在会话范围内 - 并且正在使用； `where patientid = "#session.patientid#"`- 在我们所有的查询中。

我们还必须实现一些 JS 技巧和额外的 CFML 代码，以尝试通过将时间戳附加到会话标识符来解决此问题，以确保它们在选项卡中是唯一的。

然后，您需要编写代码以保持用户的身份验证/授权 - 因为您现在有一个新会话，而不是同一个旧会话 - 这对我们来说是一个大问题。

我们也花了很长时间才弄清楚原因和解决方法。

简单地告诉用户不要使用多个选项卡——对我们来说也不是一个可行的解决方案——所以我们一直在寻找技术解决方案。

尽管不再在那里工作 - 如果您想查看它，我可能可以获得我们用于这项工作的代码部分？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-25T01:16:06.047

IF - IF - 如果这是一个面向公众的网站/页面，很可能是由于机器人。我发现机器人可能/可能不会挂在两者之间的代码上 - 特别是在第 25 行和第 77 行（或 265）之间，机器人可能会被某些东西抓住，并且由于机器人通常不会举行会话，它会生成一个错误。我筛选机器人并为机器人“用户”分配一个变量。如果用户是机器人（每个变量），那么我会做其他事情。说得通？如果这不是一个面向公众的网站，那么我无法为您提供答案。但我自己的经验是，导致这些类型错误的始终是机器人，除非您的用户可以“坐在”页面上 X 时间，然后重新加载，而不会被迫重新启动会话。

# postgresql - 备份 postgres 数据库并在另一台计算机上恢复

> ID：14513512
> 
> 赞同：1
> 
> 时间：2013-01-25T00:42:40.623
> 
> 标签：postgresql, backup, development-environment, restore

我刚刚购买了一台新计算机 (mac OSX)，我想继续使用旧计算机上的相同数据库进行开发。我不希望它远程完成，因为我不想让另一台计算机保持开启状态。我只是想复制数据库并将其放在这台计算机上进行开发。我有一个可以使用的 USB 记忆棒，但我不知道如何继续。brew、rails、ruby、rvm、pg 都已安装和配置。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T00:54:30.807

pg_dumpall ？转储所有数据库：

```
$ pg_dumpall > db.out

To reload this database use, for example:

$ psql -f db.out postgres 
```

我不得不为 oid 使用 -o 选项

# mobile - 开发期间的移动模拟器

> ID：14513514
> 
> 赞同：1
> 
> 时间：2013-01-25T00:42:54.707
> 
> 标签：mobile, asp.net-mvc-4, visual-studio-2012, emulation

目前正在开发需要针对移动设备等进行优化的 mvc4 应用程序。

当我在 Visual Studio 中开发时，我希望能够测试如何在 iphone/android 上查看该网站，就像我可以在桌面浏览器上查看它一样。

有没有为此推荐的模拟器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T00:46:06.243

您可以使用 google 的 Android Emulator，它带有 Android SDK。存在一些模拟 iPhone 的示例/简单站点，如下所示：http: [//iphone4simulator.com/](http://iphone4simulator.com/)

有关其他网站，请参见此处：http: [//www.practicalecommerce.com/articles/2495-Mobile-Compatibility-How-to-Test-a-Website-for-Mobile-Browsers](http://www.practicalecommerce.com/articles/2495-Mobile-Compatibility-How-to-Test-a-Website-for-Mobile-Browsers)

# jquery - Jqgrid - window.bind 事件不允许在 IE8 中调整列大小

> ID：14513518
> 
> 赞同：0
> 
> 时间：2013-01-25T00:43:25.323
> 
> 标签：jquery, jqgrid

对于 IE8 中的 Jqgrid，当我将调整大小事件绑定到窗口时，列调整大小不起作用。当我单击要调整大小的列时，它会显示调整大小的符号，但不执行任何操作。我目前使用的是 jqgrid 4.4.1 版本，当我使用 4.1.2 处理相同的代码时没有这个问题。我必须使用 4.4.1 版本才能拥有子网格，将支持分组在一起，因此现在无法恢复到 4.1.2 版本。有没有办法解决这个问题？任何帮助是极大的赞赏。提前致谢..

此外，我在 FF/chrome 中没有看到这个问题，而只在 IE8 中看到了这个问题。

基本上，以下代码片段会导致问题，如果我注释掉此代码列调整大小没有任何问题，但在调整浏览器大小时我无法调整网格宽度:(

```
$(window).bind('resize', function() {
     grid.setGridWidth($(window).width() - 20);
}).trigger('resize'); 
```

以下是重现此问题的完整代码..

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>Window Resize Event - Grid Not Resizeable</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

    <link rel="stylesheet" type="text/css" href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.16/themes/redmond/jquery-ui.css" />
    <link rel="stylesheet" type="text/css" href="http://www.ok-soft-gmbh.com/jqGrid/jquery.jqGrid-4.4.1/css/ui.jqgrid.css" />
    <link rel="stylesheet" type="text/css" href="http://www.ok-soft-gmbh.com/jqGrid/jquery.jqGrid-4.4.1/src/css/ui.multiselect.css" />
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.16/jquery-ui.min.js"></script>
    <script type="text/javascript" src="http://www.ok-soft-gmbh.com/jqGrid/jquery.jqGrid-4.4.1/src/ui.multiselect.js"></script>
    <script type="text/javascript" src="http://www.ok-soft-gmbh.com/jqGrid/jquery.jqGrid-4.4.1/js/i18n/grid.locale-en.js"></script>
    <script type="text/javascript" src="http://www.ok-soft-gmbh.com/jqGrid/jquery.jqGrid-4.4.1/js/jquery.jqGrid.min.js"></script>

    <script type="text/javascript">
    //<![CDATA[
        $(document).ready(function () {

            var grid = $("#list");

            $(window).bind('resize', function() {
                grid.setGridWidth($(window).width() - 20);
            }).trigger('resize');

            var mydata = [
                    {id:"1", invdate:"2007-10-01 13:03:12",name:"test",  note:"note",  amount:"200.00",tax:"10.00",closed:true, ship_via:"TN",total:"210.00"},
                    {id:"2", invdate:"2007-10-02 13:03:12",name:"test2", note:"note2", amount:"300.00",tax:"20.00",closed:false,ship_via:"FE",total:"320.00"},
                    {id:"3", invdate:"2007-09-01 13:03:12",name:"test3", note:"note3", amount:"400.00",tax:"30.00",closed:false,ship_via:"FE",total:"430.00"},
                    {id:"4", invdate:"2007-10-04 13:03:12",name:"test4", note:"note4", amount:"200.00",tax:"10.00",closed:true ,ship_via:"TN",total:"210.00"},
                    {id:"5", invdate:"2007-10-31 13:03:12",name:"test5", note:"note5", amount:"300.00",tax:"20.00",closed:false,ship_via:"FE",total:"320.00"},
                    {id:"6", invdate:"2007-09-06 13:03:12",name:"test6", note:"note6", amount:"400.00",tax:"30.00",closed:false,ship_via:"FE",total:"430.00"},
                    {id:"7", invdate:"2007-10-04 13:03:12",name:"test7", note:"note7", amount:"200.00",tax:"10.00",closed:true ,ship_via:"TN",total:"210.00"},
                    {id:"8", invdate:"2007-10-03 13:03:12",name:"test8", note:"note8", amount:"300.00",tax:"20.00",closed:false,ship_via:"FE",total:"320.00"},
                    {id:"9", invdate:"2007-09-01 13:03:12",name:"test9", note:"note9", amount:"400.00",tax:"30.00",closed:false,ship_via:"TN",total:"430.00"},
                    {id:"10",invdate:"2007-09-08 13:03:12",name:"test10",note:"note10",amount:"500.00",tax:"30.00",closed:true ,ship_via:"TN",total:"530.00"},
                    {id:"11",invdate:"2007-09-08 13:03:12",name:"test11",note:"note11",amount:"500.00",tax:"30.00",closed:false,ship_via:"FE",total:"530.00"},
                    {id:"12",invdate:"2007-09-10 13:03:12",name:"test12",note:"note12",amount:"500.00",tax:"30.00",closed:false,ship_via:"FE",total:"530.00"}
                ];

            grid.jqGrid({
                datatype:'local',
                data: mydata,
                colNames:['Inv No','Date','Client','Amount','Tax','Total','Closed','Shipped via','Notes'],
                colModel:[
                    {name:'id',index:'id',width:70,align:'center',sorttype: 'int'},
                    {name:'invdate',index:'invdate',width:80, align:'center', sorttype:'date',
                     formatter:'date', formatoptions: {newformat:'d-M-Y'}, datefmt: 'd-M-Y'},
                    {name:'name',index:'name', width:70},
                    {name:'amount',index:'amount',width:100, formatter:'number', align:'right'},
                    {name:'tax',index:'tax',width:70, formatter:'number', align:'right'},
                    {name:'total',index:'total',width:120, formatter:'number', align:'right'},
                    {name:'closed',index:'closed',width:110,align:'center', formatter: 'checkbox',
                     edittype:'checkbox',editoptions:{value:'Yes:No',defaultValue:'Yes'}},
                    {name:'ship_via',index:'ship_via',width:120,align:'center',formatter:'select',
                     edittype:'select',editoptions:{value:'FE:FedEx;TN:TNT;IN:Intim',defaultValue:'Intime'}},
                    {name:'note',index:'note',width:100,sortable:false}
                ],
                rowNum:10,
                rowList:[5,10,20],
                pager: '#pager',
                gridview:true,
                autowidth: true,
                sortname: 'invdate',
                viewrecords: true,
                sortorder: 'desc',
                caption:'Just simple local grid',
                height: '100%',
                loadComplete: function(data) {
                   grid.setGridWidth($(window).width() - 20);
                }
            });
            grid.jqGrid ('navGrid', '#pager',
                         {edit:false, add:false, del:false, refresh:true, view:false},
                         {},{},{},{multipleSearch:true,overlay:false});
            grid.jqGrid ('navButtonAdd', '#pager',
                         {
                             caption: "", buttonicon: "ui-icon-calculator", title: "choose columns",
                             onClickButton: function() {
                                 grid.jqGrid('columnChooser');
                            }
                         });
        });
    //]]>
    </script>
</head>
<body>
    <table id="list"><tr><td/></tr></table>
    <div id="pager"></div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T08:10:58.873

您描述的问题的原因是 Internet Explorer 的兼容模式。顺便说一句，我以前使用 XHTML 1.0 而不是 HTML5，只是为了方便关闭 IE 的兼容模式。插入线

```
<meta http-equiv="X-UA-Compatible" content="IE=edge" /> 
```

将解决调整大小的问题。将您的[原始演示](http://www.ok-soft-gmbh.com/jqGrid/varaprakash0.htm)与[固定](http://www.ok-soft-gmbh.com/jqGrid/varaprakash1.htm)演示进行比较。

我建议您另外修复您发布的演示中的一些其他小问题（在您用作原型的原始演示中可能存在相同的问题）。例如，应该修复多选的 URL 等等。[您可以在此处](http://www.ok-soft-gmbh.com/jqGrid/varaprakash.htm)找到修改后的演示版本。

**更新**：你是对的，IE8（不是我之前测试过的 IE9）在添加`<meta>`到`<head>`. 首先，您描述的问题在 jqGrid 4.4.3 中得到修复（参见[演示](http://www.ok-soft-gmbh.com/jqGrid/varaprakash_.htm)）。要解决 jqGrid 4.4.1 中的问题，您必须将调整大小的代码修改为以下

```
$(window).bind("resize", function () {
    var oldWidth = grid.jqGrid("getGridParam", "width"),
        newWidth = $(window).width() - 20;

    if (oldWidth !== newWidth) {
        grid.jqGrid("setGridWidth", newWidth);
    }
}).trigger("resize"); 
```

请参阅[相应的演示](http://www.ok-soft-gmbh.com/jqGrid/varaprakash2.htm)。

# c# - 无法输出到文本块，但消息框有效

> ID：14513522
> 
> 赞同：0
> 
> 时间：2013-01-25T00:43:52.380
> 
> 标签：c#, visual-studio-2010

我在输出到文本块时遇到问题。基本上我做的是这样的：

```
private void ReadData()
    {
        double dHeading = 0;
        int iHeading = 0;
        String sString = "";
        while (!stop)
        {
            //Get Heading
            result = fsuipc.FSUIPC_Read(0x0580, 4, ref token, ref dwResult);
            result = fsuipc.FSUIPC_Process(ref dwResult);
            result = fsuipc.FSUIPC_Get(ref token, ref dwResult);
            dHeading = dwResult;

            if (dHeading != 0)
            {
                dHeading = dHeading * 360 / (65536.0 * 65536.0);
                iHeading = Convert.ToInt32(dHeading);
            }
            if (iHeading < 0)
            {
                iHeading = 360 + Convert.ToInt32(dHeading);
            }
            if (iHeading == 0)
            {
                iHeading = 360;
            }
            if (result == true && iHeading < 10)
            {
                sString =  "00" + Convert.ToString(iHeading);
            }
            if (result == true && iHeading >= 10 && iHeading < 100)
            {
                sString = "0" + Convert.ToString(iHeading);
            }
            if (result == true && iHeading >= 100)
            {
                sString = Convert.ToString(iHeading);
            }

            txbHeading.Text = sString;
            // But if I change this line to MessageBox.Show(sString);
            // it works fine.
        }
    } 
```

程序冻结了，我对此无能为力。我必须在 VS 中停止它。如果我将 txbHeading.Text = sString 更改为 MessageBox.Show(sString)，它工作正常。

请注意，我刚开始使用 C#。提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T00:54:18.227

代码中的 while 循环会导致 UI 线程阻塞，因此在调用该方法时程序应该停止响应。[后台工作者](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.aspx)允许您的代码在单独的线程中执行而不会阻塞 GUI。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T00:53:57.800

尝试

`this.Invoke(new Action(() => txbHeading.Text = sString))`

反而。我假设您在 UI 线程之外运行。

更多内容：[多线程实用指南 - 第 1 部分](http://www.codeproject.com/Articles/43994/The-Practical-Guide-to-Multithreading-Part-1)

# objective-c - 使用 AppDelegate 作为最低级别的 WindowController？

> ID：14513532
> 
> 赞同：1
> 
> 时间：2013-01-25T00:45:23.267
> 
> 标签：objective-c, cocoa, xcode4

当您第一次在 XCode 中创建应用程序时，它会在最低级别创建**AppDelegate.h/.m** 和**MainWindow.xib**

一旦您开始修改 Xib 以最适合您的设计需求 - 最好的做法是从 AppDelegate 作为初始控制器移开，还是创建一个新的 WindowController 与 MainWindow.xib 一起使用总是更好？

可炸食品

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T03:32:20.550

好问题。对我来说，应用程序委托一直是定义我创建的项目的第一步。代表有很多用途，但这是另一个主题。如果您在以下链接中查看与此主题相关的苹果文档（概览部分），则可以很好地解释应用程序委托的功能。要回答您提出的问题，最好离开应用程序委托并创建一个新控制器并在其中执行您想要的任何功能。这是apple do's的链接，我希望它为你清除一切，我的朋友。快乐编码。

[http://developer.apple.com/library/ios/ipad/#documentation/uikit/reference/UIApplicationDelegate_Protocol/Reference/Reference.html](http://developer.apple.com/library/ios/ipad/#documentation/uikit/reference/UIApplicationDelegate_Protocol/Reference/Reference.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T00:54:50.160

AppDelegate 类不能用作视图控制器，如果那是您所要求的。您的 AppDelegate 类应该创建您的主视图控制器的一个实例，它会加载您的主 .xib 文件。除非您指的是在目标配置中定义主要 Xib，但那是相当老派的。

您是否受到需要支持的 iOS 版本的限制？因为如果您可以使用 iOS 5.0 及更高版本，则可以通过使用情节提要完全避免使用 .xib 文件。

# c++ - 初始化列表的好处 - 避免调用默认构造函数

> ID：14513534
> 
> 赞同：-1
> 
> 时间：2013-01-25T00:45:30.773
> 
> 标签：c++

我正在阅读有效的 C++，但我无法真正理解初始化列表的上述好处之一。据我了解，初始化列表还有助于避免调用不必要的默认构造函数，尤其是在不需要它们时。所以为了测试我创建了一个简单的代码示例

```
class base
{
public:

    base()
    {
        std::cout << "Default Constructor called \n";
    }
    base (int i)
    {
        std::cout << "Int constructor called \n";
    }
};

class der : public base
{
private:
    base b;
public:
    der(int i):b(i)
    {
        std::cout << "Derived constructor called \n";
    }
};

void main()
{
    der d(12);
} 
```

没有，我假设只调用 int 构造函数，而不是调用基类的两个构造函数。任何人都可以澄清这个概念。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T00:53:40.380

问题是您实际上有 2 个实例`base`，一个作为成员，一个作为基础。更改为`der(int i):base(i),b(i)`或删除该成员。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T00:56:35.400

请记住，您正在向类添加类型的成员`base`，`der`这也需要构造。该成员正在使用不带参数的构造函数进行初始化。你的意思可能是：

```
class base
{
private:
    int num;
public:

    base()
    {
        std::cout << "Default Constructor called \n";
    }
    base (int i) : num(i)
    {
        std::cout << "Int constructor called \n";
    }
};

class der : public base
{
private:
    //base b;
public:
    der(int i):base(i)
    {
        std::cout << "Derived constructor called \n";
    }
};

void main()
{
    der d(12);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-25T01:04:50.290

`der`有两个`base instances`，正如 Ylisar 所解释的那样。**由于 base 有默认构造函数，它将在 der 构造函数中被隐式调用。**

另外C++只支持以下两种形式的main函数，`void main()`C++中没有

**§3.6.1 主要功能**

> 实现不应预定义主要功能。该功能不得重载。它应该有一个 int 类型的返回类型，否则它的类型是实现定义的。所有实现都应允许以下两种 main 定义：
> 
> int main() { /* ... */ }
> 
> 和
> 
> int main(int argc, char* argv[]) { /* ... */ }

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-25T01:49:40.277

在你的der中，有两个基类，一个用于继承，另一个是b（der的成员）。

# c++ - 警告删除数组，在加载文件功能

> ID：14513535
> 
> 赞同：7
> 
> 时间：2013-01-25T00:45:44.823
> 
> 标签：c++, crash, warnings

我在将文件加载到内存时遇到了麻烦，我的编译器会警告我一些我没有掌握的东西。怎么了？

```
C:\Users\Caroline\Desktop\Prog\literature.cpp:236:15: warning: deleting array 'char chbuffer [(((sizetype)((ssizetype)fsize)) + 1)]' [enabled by default] 
```

**功能 ：**

```
bool loadfile(string & buffer, const char fpath[])
{
    ifstream file(fpath, ios::binary);
    if(!file) return false;
    file.seekg(0, ios::end);
    long fsize = file.tellg();
    file.clear();
    file.seekg(0);
    char chbuffer[fsize + 1];
    file.read(chbuffer, fsize);
    buffer = chbuffer;
    delete [] chbuffer;
    return true;
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-25T00:47:46.010

您不能`delete`自动分配数组。删除`delete [] chbuffer;`声明。

通常，`delete`仅在与 配对时使用`new`。你可以这样分配`chbuffer`：

```
char *chbuffer = new char[fsize + 1]; 
```

在这种情况下，您*会*想要使用`delete [] chbuffer`.

# php - 以 char 开头的正则表达式单词

> ID：14513537
> 
> 赞同：2
> 
> 时间：2013-01-25T00:46:00.563
> 
> 标签：php, regex, string

仅当某个单词后跟一个`=`符号时，我才想获取一个特定的字符串。

另外，我想获取该`=`符号之后的所有信息，直到`/`达到 a 或字符串结束。

让我们举个例子：

> somestring.bla/test=123/ohboy/item/item=capture

我想得到`item=capture`但不是单独的项目。

我正在考虑使用前瞻，但我不确定这是要走的路。我很感激任何帮助，因为我正试图越来越多地掌握正则表达式。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T00:51:57.657

```
[^/=]*=[^/]* 
```

将为您提供符合您要求的所有配对。

所以从你的例子中它应该返回：

> 测试=123
> 
> 项目=捕获

[重做演示](http://refiddle.com/gkg)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-25T00:48:11.547

如果要捕获`item=capture`，很简单：

```
/item=[^\/]*/ 
```

如果您还想提取值，

```
/item=([^\/]*)/ 
```

如果*只想*匹配值，则需要使用*后*视。

```
/(?<=item=)[^\/]*/ 
```

编辑：由于失眠导致的错误太多。此外，拧紧 PHP 及其未能将字符组中的分隔符视为分隔符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T01:17:18.370

这是我前段时间写的一个函数。我对其进行了一些修改，并添加了`$keys` 参数，以便您可以指定有效的键：

```
function getKeyValue($string, Array $keys = null) {
    $keys = (empty($keys) ? '[\w\d]+' : implode('|', $keys));
    $pattern = "/(?<=\/|$)(?P<key>{$keys})\s*=\s*(?P<value>.+?)(?=\/|$)/";
    preg_match_all($pattern, $string, $matches, PREG_SET_ORDER);
    foreach ($matches as & $match) {
        foreach ($match as $key => $value) {
            if (is_int($key)) {
                unset($match[$key]);
            }
        }
    }
    return $matches ?: FALSE;
} 
```

只需输入字符串和有效键：

```
$string = 'somestring.bla/test=123/ohboy/item/item=capture';
$keys = array('test', 'item');
$keyValuePairs = getKeyValue($string, $keys);
var_dump($keyValuePairs); 
```

# c# - 使用 Mono 制作交互式和可缩放的径向树

> ID：14513541
> 
> 赞同：2
> 
> 时间：2013-01-25T00:46:12.940
> 
> 标签：c#, user-interface, tree, mono, zooming

# 背景信息/布局

我正在尝试将径向树显示为 UI 的一部分。树的数据是静态的，通常有几千个节点。就其本身而言，仅仅绘制它并不是什么大不了的事——我已经可以根据我对 GTK 和 Cairo 的了解来处理它。

我的问题是我想要一个面板，在背景图像顶部显示树，并允许用户放大和缩小并进行交互（单击节点以获取信息）。

这是一张非常粗略的图片，显示了我的应用程序的布局。黄色区域是我想要树的地方。[![布局样机](../Images/4af3835b6dbc9415247109d082617a8b.png)](https://i.stack.imgur.com/tiolf.png) .

这是树形显示，共四层。整个事情需要是可缩放的（包括背景图像）。[![树显示层](../Images/f1db75d24ef3d08a7e84635dbdfa1287.png)](https://i.stack.imgur.com/qtvVz.png) .

1.  突出显示感兴趣的节点（选定的节点，或与用户查询匹配的节点）和它们之间的路径。
2.  树中的节点。我打算让这些是可点击的。
3.  放射状树的年轮。
4.  背景图像。

# 我可以做什么：

*   渲染背景图像。
*   画出树的年轮。
*   绘制树的节点。
*   围绕节点和它们之间的路径绘制高光。

# 我想做的事：

*   使整个事物可缩放。
*   使节点（当前或图像）可点击。

我尝试过使用像素缓冲区来重新缩放背景图像。只要它只是背景图像，它就很实用（但不是很优雅），尽管我对结果并不十分自豪。然而，当谈到使节点可点击和整个事物可缩放时，我有点迷失了。尤其是后半部分。

我一直在使用 Mono 和 Linux 上 GTK 的 C# 绑定。如果这会使它变得更容易，我愿意更改 GUI 工具包，但前提是它确实使它变得更容易。考虑到树的大小（1000 < N < 10000，其中 N 是树中的节点数），缩放时的性能可能是一个问题，但这不像我要处理数百万个节点或任何东西。

# java - 如何使用Java将图像转换为黑白

> ID：14513542
> 
> 赞同：8
> 
> 时间：2013-01-25T00:46:13.223
> 
> 标签：java, image, image-processing, imagemagick

我使用如下命令在 imagemagick 中将图像转换为黑白：

```
convert myimg.png -monochrome  out3.png 
```

我想知道它是否有可能在 Java 中实现相同的结果？不使用 Im4Java 或 JMagick？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-01-25T01:04:15.487

我想这取决于你所说的“单色”/“黑白”是什么意思......

![在此处输入图像描述](../Images/b7e5d60190b189d196598c43c2bde60d.png)

```
public class TestBlackAndWhite {

    public static void main(String[] args) {
        new TestBlackAndWhite();
    }

    public TestBlackAndWhite() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (Exception ex) {
                }

                JFrame frame = new JFrame("Test");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.add(new TestPane());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);

            }
        });
    }

    public class TestPane extends JPanel {

        private BufferedImage master;
        private BufferedImage grayScale;
        private BufferedImage blackWhite;

        public TestPane() {
            try {
                master = ImageIO.read(new File("C:/Users/shane/Dropbox/pictures/439px-Join!_It's_your_duty!.jpg"));
                grayScale = ImageIO.read(new File("C:/Users/shane/Dropbox/pictures/439px-Join!_It's_your_duty!.jpg"));
                ColorConvertOp op = new ColorConvertOp(ColorSpace.getInstance(ColorSpace.CS_GRAY), null);
                op.filter(grayScale, grayScale);

                blackWhite = new BufferedImage(master.getWidth(), master.getHeight(), BufferedImage.TYPE_BYTE_BINARY);
                Graphics2D g2d = blackWhite.createGraphics();
                g2d.drawImage(master, 0, 0, this);
                g2d.dispose();

            } catch (IOException ex) {
                ex.printStackTrace();
            }
        }

        @Override
        public Dimension getPreferredSize() {
            Dimension size = super.getPreferredSize();
            if (master != null) {
                size = new Dimension(master.getWidth() * 3, master.getHeight());
            }
            return size;
        }

        @Override
        protected void paintComponent(Graphics g) {
            super.paintComponent(g);
            if (master != null) {

                int x = (getWidth() - (master.getWidth() * 3)) / 2;
                int y = (getHeight() - master.getHeight()) / 2;

                g.drawImage(master, x, y, this);
                x += master.getWidth();
                g.drawImage(grayScale, x, y, this);
                x += master.getWidth();
                g.drawImage(blackWhite, x, y, this);

            }
        }

    }
} 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-01-25T02:16:19.140

试试这个粗略的例子。我们首先使用 使图像变亮或变暗`RescaleOp`。

![缩放后图像变为黑白](../Images/2ba20ff546bc1729ab0faec6180eb23d.png)

```
import java.awt.*;
import java.awt.image.BufferedImage;
import java.awt.image.RescaleOp;
import java.net.URL;
import javax.imageio.ImageIO;
import javax.swing.*;
import javax.swing.event.ChangeEvent;
import javax.swing.event.ChangeListener;

class ColorToBlackAndWhite {

    /**
     * Returns the supplied src image brightened by a float value from 0 to 10.
     * Float values below 1.0f actually darken the source image.
     */
    public static BufferedImage brighten(BufferedImage src, float level) {
        BufferedImage dst = new BufferedImage(
                src.getWidth(), src.getHeight(), BufferedImage.TYPE_INT_RGB);
        float[] scales = {level, level, level};
        float[] offsets = new float[4];
        RescaleOp rop = new RescaleOp(scales, offsets, null);

        Graphics2D g = dst.createGraphics();
        g.drawImage(src, rop, 0, 0);
        g.dispose();

        return dst;
    }

    public static void main(String[] args) throws Exception {
        URL colorURL = new URL("http://i.stack.imgur.com/AuY9o.png");
        final BufferedImage colorImage = ImageIO.read(colorURL);

        float[] scales = {2f, 2f, 2f};
        float[] offsets = new float[4];
        RescaleOp rop = new RescaleOp(scales, offsets, null);

        final BufferedImage scaledImage = new BufferedImage(
                colorImage.getWidth(),
                colorImage.getHeight(),
                BufferedImage.TYPE_INT_RGB);
        Graphics2D g = scaledImage.createGraphics();
        g.drawImage(colorImage, rop, 0, 0);

        final BufferedImage grayImage = new BufferedImage(
                colorImage.getWidth(),
                colorImage.getHeight(),
                BufferedImage.TYPE_BYTE_GRAY);
        g = grayImage.createGraphics();
        g.drawImage(colorImage, 0, 0, null);

        final BufferedImage blackAndWhiteImage = new BufferedImage(
                colorImage.getWidth(),
                colorImage.getHeight(),
                BufferedImage.TYPE_BYTE_BINARY);
        g = blackAndWhiteImage.createGraphics();
        g.drawImage(colorImage, 0, 0, null);

        g.dispose();

        Runnable r = new Runnable() {

            @Override
            public void run() {
                JPanel gui = new JPanel(new BorderLayout(2, 2));
                JPanel images = new JPanel(new GridLayout(0, 2, 2, 2));
                gui.add(images, BorderLayout.CENTER);

                final JLabel scaled = new JLabel(new ImageIcon(scaledImage));
                final JSlider brighten = new JSlider(0, 1000, 100);
                gui.add(brighten, BorderLayout.PAGE_START);
                ChangeListener cl = new ChangeListener() {

                    @Override
                    public void stateChanged(ChangeEvent e) {
                        int val = brighten.getValue();
                        float valFloat = val / 1000f;
                        BufferedImage bi = brighten(colorImage, valFloat);
                        BufferedImage bw = new BufferedImage(
                                colorImage.getWidth(),
                                colorImage.getHeight(),
                                BufferedImage.TYPE_BYTE_BINARY);
                        Graphics g = bw.createGraphics();
                        g.drawImage(bi, 0, 0, null);
                        g.dispose();

                        scaled.setIcon(new ImageIcon(bw));
                    }
                };
                brighten.addChangeListener(cl);

                images.add(new JLabel(new ImageIcon(colorImage)));
                images.add(scaled);
                images.add(new JLabel(new ImageIcon(grayImage)));
                images.add(new JLabel(new ImageIcon(blackAndWhiteImage)));

                JOptionPane.showMessageDialog(null, gui);
            }
        };
        // Swing GUIs should be created and updated on the EDT
        // http://docs.oracle.com/javase/tutorial/uiswing/concurrency/initial.html
        SwingUtilities.invokeLater(r);
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-25T02:42:05.470

您实现的效果不是通过预定义阈值的二值化，而是通过一种称为抖动的技术完成的。许多抖动方法通过传播误差（当前图像中的强度 - 给定点的二进制输出）来工作，从而调整下一个输出。这样做是为了创建一种视觉效果，如果您不仔细看的话，结果图像可能看起来不是黑白的。

Floyd-Steinberg 采用了一种这样简单且众所周知的方法，它的伪代码是：

```
for y := 1 to image height
    for x := 1 to image width
        v := im(y, x)
        if v < 128 then
            result(y, x) := 0
        else
            result(y, x) := 255
        error := v - result(y, x)
        propagate_error(im, y, x, error) 
```

在哪里`propagate_error`可以给出这种方法（不考虑边界情况）：

```
 im(y,   x+1) := im(y,   x+1) + (7/16) * error
    im(y+1, x+1) := im(y+1, x+1) + (1/16) * error
    im(y+1, x  ) := im(y+1, x  ) + (5/16) * error
    im(y+1, x-1) := im(y+1, x-1) + (3/16) * error 
```

考虑到给出的伪代码的直接实现，右下图是左图的二进制版本。事实上，右图只有黑白两种颜色，这对于知道这种方法的人来说是小事，但对于那些不知道的人来说，这似乎是不可能的。创建的图案给人的印象是有几种灰色调，这取决于您从远处看图像。

![在此处输入图像描述](../Images/541c45e62dd00d7be91e813dd3c797c9.png) ![在此处输入图像描述](../Images/3ac32ed1a5f47c7db4a936368409a9e8.png)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-01-07T10:25:48.537

- 试试下面的简单代码，

```
 package com.bethecoder.tutorials.imageio;

import java.awt.Graphics2D;
import java.awt.image.BufferedImage;
import java.io.File;
import java.io.IOException;

import javax.imageio.ImageIO;

public class BlackAndWhiteTest {

  /**
   * @param args
   * @throws IOException 
   */
  public static void main(String[] args) throws IOException {

    File file = new File("C:/Temp/stpatricks_08.gif");
    BufferedImage orginalImage = ImageIO.read(file);

    BufferedImage blackAndWhiteImg = new BufferedImage(
        orginalImage.getWidth(), orginalImage.getHeight(),
        BufferedImage.TYPE_BYTE_BINARY);

    Graphics2D graphics = blackAndWhiteImg.createGraphics();
    graphics.drawImage(orginalImage, 0, 0, null);

    ImageIO.write(blackAndWhiteImg, "png", new File("c:/Temp/stpatricks_08_bw.png")); 
  }

} 
```

# java - JDBC 选择列

> ID：14513544
> 
> 赞同：0
> 
> 时间：2013-01-25T00:46:23.180
> 
> 标签：java, sql, jdbc

这是我的代码：

```
import java.sql.*;

public class clazz{
  public static void main(String[] args) {

    try{
      Connection con = DriverManager.getConnection("jdbc:mysql://localhost/database","root","password");
      Statement stmt = (Statement) con.createStatement();

      String insert = "INSERT INTO table VALUES ('value')";
      stmt.executeUpdate(insert);

    }catch(Exception e){        
    }       
  }  
} 
```

如果只有一列，这很好用。我将如何指定列？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T00:47:29.303

> 如果只有一列，这很好用。我将如何指定列？

只需在查询的列列表中指定列名。

```
String insert = "INSERT INTO table (colname1, colname2) VALUES ('value1','value2')"; 
```

顺便说一句，我建议您在使用 JDBC 执行 SQL 查询时使用`PreparedStatement`而不是`Statement`使用，以防止 SQL 注入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T01:47:27.457

这是一个演示。

```
 create table t_customer (
  id number(19, 0) not null,
  first_name varchar2(50) not null,
  last_name varchar2(50) not null,
  last_login timestamp null,
  comments clob null,
  constraint pk_customer primary key(id)
)   

public class InsertDemo {
    private static final String CONNECTION_STRING =
        "jdbc:oracle:thin:@oracle.devcake.co.uk:1521:INTL";
    public static void main(String[] args) {
    try {
        Class.forName("oracle.jdbc.OracleDriver");
    } catch (ClassNotFoundException e) {
        return;
    }
    Connection connection;
    try {
        connection = DriverManager.getConnection(CONNECTION_STRING,
            "PROSPRING", "x******6");
    } catch (SQLException e) {
        return;
    }
    PreparedStatement preparedStatement;
    try {
        preparedStatement = connection.prepareStatement(
            "insert into t_customer (id, first_name, last_name, last_login, " +
                "comments) values (?, ?, ?, ?, ?)");
    } catch (SQLException e) {
        return;
    }
    try {
        preparedStatement.setLong(1, 1L);
        preparedStatement.setString(2, "Jan");
        preparedStatement.setString(3, "Machacek");
        preparedStatement.setNull(4, Types.TIMESTAMP);
        preparedStatement.setNull(5, Types.CLOB);
        preparedStatement.executeUpdate();
    } catch (SQLException e) {
        return; // 1
    }
    try {
        connection.commit();
    } catch (SQLException e) {
        return;
    }
    try {
        connection.close();
    } catch (SQLException e) {
        // noop
    }
    }
} 
```

# java - Android：无法获取要在 ListView 中显示的数据

> ID：14513545
> 
> 赞同：0
> 
> 时间：2013-01-25T00:46:25.620
> 
> 标签：java, android, listview

我无法让我的数据显示在 ListView 中。我已经删除了所有不必要的代码以保持简单。该程序运行良好，但显示的唯一数据是“Model.Locations @ 421ec04eo” 为什么会发生这种情况？

针点类

```
 @Override
        protected void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.locations);

        ListView listView1 = (ListView) findViewById(R.id.listView1);

        ArrayList<Locations> items = new ArrayList<Locations>();
        Locations sr1 = new Locations();
        for (int i = 0; i < 15; i++) 
        {
            sr1.setAdress("Blablabla");
            sr1.setTitle("Home");
            sr1.setDistance("200m");
            items.add(sr1);
        }

        ArrayAdapter<Locations> adapter = new ArrayAdapter<Locations>(this,
                android.R.layout.simple_list_item_multiple_choice, items);

        listView1.setAdapter(adapter);
    }
}

Location class

    package Model;

    public class Locations 
    {
    int midlat;
    int midlong;
    String title;
    String adress;
    String distance;

    public int getMidlat() {
        return midlat;
    }

    public String getDistance() {
        return distance;
    }

    public void setDistance(String distance) {
        this.distance = distance;
    }

    public void setMidlat(int i) {
        this.midlat = i;
    }

    public int getMidlong() {
        return midlong;
    }

    public void setMidlong(int midlong) {
        this.midlong = midlong;
    }

    public String getTitle() {
        return title;
    }

    public void setTitle(String title) {
        this.title = title;
    }

    public String getAdress() {
        return adress;
    }

    public void setAdress(String adress) {
        this.adress = adress;
    }

    @Override
    public String toString() {
        // TODO Auto-generated method stub
        return super.toString();
    }
}

locations XML.FILE

<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <Button
        android:id="@+id/button1"
        style="?android:attr/buttonBarStyle"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_alignParentLeft="true"
        android:layout_alignParentRight="true"
        android:text="Button" />

    <ListView
        android:id="@+id/listView1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_above="@+id/button1"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true" >
    </ListView>

    <TextView
        android:id="@+id/toptext"
        android:layout_width="fill_parent"
        android:layout_height="0dip"
        android:layout_weight="1"
        android:gravity="center_vertical" />

    <TextView
        android:id="@+id/bottomtext"
        android:layout_width="fill_parent"
        android:layout_height="0dip"
        android:layout_weight="1"
        android:ellipsize="marquee"
        android:singleLine="true" />

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T01:02:14.123

您需要覆盖`toString()`您开始执行的自定义类型的方法，但随后只是调用了 super ，这否定了首先覆盖它的目的。

使`toString()`返回您希望 arrayadapter 在`ListView`ie中显示的内容

```
@Override
public String toString(){
  return title + address + distance;
} 
```

当然，这只是一个示例，您可以实现它以满足您的需求。

另外，原因是因为`ArrayAdapter<T>`默认调用`toString()`自定义类型的方法来`TextView`填充`ListView`. 如果您需要列表在覆盖的 toString 方法中显示的内容之上显示一些特殊的内容，则必须创建一个自定义适配器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T00:57:33.523

您正在将一组内存地址传递给适配器，因此这是预期的。

```
ArrayAdapter<Locations> adapter = new ArrayAdapter<Locations>(this,
                android.R.layout.simple_list_item_multiple_choice, items); 
```

如果您想在视图中显示地址、标题和距离，请考虑自定义列表视图。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-25T00:57:43.173

基本的 ArrayAdapter 只使用 Map.Location.toString() 来填充 ListView 的项目视图。使用基本的 ArrayAdapter，默认项目视图是 TextView。为了正确显示您的位置，您可以将 toString() 函数覆盖为您希望它为 Map.Location 实例显示的内容：

```
@Override
public String toString(){
*"String that you want"*
} 
```

或者另一种方法是创建自定义 BaseAdapter 并覆盖自定义 BaseAdapter 的 getView() 方法以显示专门的 layout.xml。[在这里](http://www.ezzylearning.com/tutorial.aspx?tid=1763429)查看说明。

# jquery - jQuery：尝试创建“slug”，目标锚点

> ID：14513546
> 
> 赞同：0
> 
> 时间：2013-01-25T00:46:26.540
> 
> 标签：jquery, jquery-selectors

创建一个蛞蝓

包含文章名称“Article X”的标题变量。

```
$("div.article h2").each(function(){
  var title = $(this).text(); 
```

尝试使用修剪、小写和替换方法创建 slug

```
var slug = title.trim().toLowerCase().replace(" ", "_"); 
```

尝试插入目标锚点

```
var target_anchor = "<a name='" + slug + "'/>"; 
```

这是我在说明中感到困惑的地方：

然后，您自己，使用 append 方法将其粘贴到 h2 中。请记住，self 是一个纯 Javascript 对象，它没有 append 方法。链接到目标

我们需要在 list_item 中添加链接。自行使用 var list_item= 行来包含一个链接标签，其中 href 指向 #article_x，其中 article_x 是当前的 slug。

我怎么写这个？

我的尝试没有奏效：

```
 var list_item = "<li>" + "<a href='#article_x'</a> " + slug + "</li>" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T00:50:15.807

你应该做

```
$("div.article h2").each(function(){
  var title = $(this).text();
  var slug = title.trim().toLowerCase().replace(" ", "_");
  var list_item = "<li><a href='#"+slug+"'> " + title + "</a></li>";
  $(this).prop('id', slug);
  $(WHERE_YOU_WANT_TO_APPEND_IT).append(list_item);
} 
```

`WHERE_YOU_WANT_TO_APPEND_IT`由您的选择器更改

# php - CSqlDataProvider 复杂查询和 totalItemCount

> ID：14513549
> 
> 赞同：1
> 
> 时间：2013-01-25T00:47:01.393
> 
> 标签：php, mysql, yii

我有一个非常复杂的查询`CSqlDataProvider`，我试图让分页`totalItemCount`工作，但它返回错误的计数。我试图为 COUNT 个项目创建第二个 SQL，但这真的很难，有人可以帮助我吗？

CSqlDataProvider 文档：[http ://www.yiiframework.com/doc/api/1.1/CSqlDataProvider](http://www.yiiframework.com/doc/api/1.1/CSqlDataProvider)

控制器代码：

```
 $dayofweek = date('w');     

    $sql = "( SELECT `profile`.`id` as profile_id, `profile`.`name` as profile_name, `events_reminder`.`id`,
                CASE WHEN weekday >= $dayofweek
                    THEN 
                        DATE_FORMAT( CONCAT( DATE_ADD(CURDATE(), INTERVAL weekday - $dayofweek DAY), ' ', event_time ), '%d/%m/%Y %H:%i')
                    ELSE
                        DATE_FORMAT( CONCAT( DATE_ADD(CURDATE(), INTERVAL 7 - $dayofweek + weekday DAY), ' ', event_time ), '%d/%m/%Y %H:%i')
                    END as revent_datetime,
                CASE WHEN weekday >= $dayofweek
                    THEN 
                        DATE_FORMAT( CONCAT( DATE_ADD(CURDATE(), INTERVAL weekday - $dayofweek DAY), ' ', list_time ), '%d/%m/%Y %H:%i')
                    ELSE
                        DATE_FORMAT( CONCAT( DATE_ADD(CURDATE(), INTERVAL 7 - $dayofweek + weekday DAY), ' ', list_time ), '%d/%m/%Y %H:%i')
                    END as rlist_datetime
                FROM events_reminder
                LEFT OUTER JOIN `profiles` `profile` ON (`events_reminder`.`profile_id`=`profile`.`id`)
                HAVING revent_datetime NOT IN (SELECT DATE_FORMAT(event_datetime, '%d/%m/%Y %H:%i') FROM events WHERE `events`.`profile_id`=`events_reminder`.`profile_id`) )
            UNION ALL
            ( SELECT `profile`.`id` as profile_id, `profile`.`name` as profile_name, `events_reminder`.`id`,
                CASE WHEN weekday >= $dayofweek
                    THEN 
                        DATE_FORMAT( CONCAT( DATE_ADD(CURDATE(), INTERVAL weekday - $dayofweek + 7 DAY), ' ', event_time ), '%d/%m/%Y %H:%i')
                    ELSE
                        DATE_FORMAT( CONCAT( DATE_ADD(CURDATE(), INTERVAL 7 - $dayofweek + weekday + 7 DAY), ' ', event_time ), '%d/%m/%Y %H:%i')
                    END as revent_datetime,
                CASE WHEN weekday >= $dayofweek
                    THEN 
                        DATE_FORMAT( CONCAT( DATE_ADD(CURDATE(), INTERVAL weekday - $dayofweek + 7 DAY), ' ', list_time ), '%d/%m/%Y %H:%i')
                    ELSE
                        DATE_FORMAT( CONCAT( DATE_ADD(CURDATE(), INTERVAL 7 - $dayofweek + weekday + 7 DAY), ' ', list_time ), '%d/%m/%Y %H:%i')
                    END as rlist_datetime
                FROM events_reminder
                LEFT OUTER JOIN `profiles` `profile` ON (`events_reminder`.`profile_id`=`profile`.`id`)
                HAVING revent_datetime NOT IN (SELECT DATE_FORMAT(event_datetime, '%d/%m/%Y %H:%i') FROM events WHERE `events`.`profile_id`=`events_reminder`.`profile_id`) )
                ORDER BY revent_datetime";

    $count=Yii::app()->db->createCommand($sql)->queryScalar();

    $dataProvider=new CSqlDataProvider($sql, array(
        'totalItemCount'=>$count,
    ));

    $this->render('index',array(
        'dataProvider'=>$dataProvider,
    )); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-25T02:49:49.787

什么[`queryScalar`](http://www.yiiframework.com/doc/api/1.1/CDbCommand#queryScalar-detail "http://www.yiiframework.com/doc/api/1.1/CDbCommand#queryScalar-detail")是：

> 执行 SQL 语句并返回**第一行数据中第一列**的值。

因此，要使用它来获取`count`您必须在`count(*)`您的 sql 查询中添加一个，这也是在查询的开头，如下所示：

```
SELECT count(*), `profile`.`id` as profile_id, `profile`.`name` ... 
```

**更新：**

由于您正在使用`UNION`您必须移动`count(*)`外部，还要给一个别名：

```
SELECT count(*) from (((select ...) UNION ALL (select ...)) as alias) 
```

对于您的确切情况，您可以执行以下操作：

```
$count_sql='SELECT count(*) from (('. $sql .') as alias)';
$count=Yii::app()->db->createCommand($count_sql)->queryScalar(); 
```

# ios - 条码阅读器的 iOS 库

> ID：14513553
> 
> 赞同：5
> 
> 时间：2013-01-25T00:47:18.157
> 
> 标签：ios, objective-c, iphone, ipad

> **可能重复：**
> [是否有适用于 iOS 的条码识别框架？](https://stackoverflow.com/questions/838724/is-there-a-barcode-recognition-framework-for-ios)

哪个是 iOS 条码阅读器最好的免费 sdk 或库？我目前正在为我的公司实施一个应用程序，我们希望支持条形码和二维码扫描，有人可以建议我在 iOS4,5 上运行的最佳 sdk 吗？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-01-25T03:47:06.687

我建议你，看看下面一些很好的条码扫描 API

**2019 年 5 月更新**

*   [ZXing](http://code.google.com/p/zxing/)（*现在仅适用于Android*）
*   [ZBar条码阅读器](http://zbar.sourceforge.net/)
*   [精通商店](http://shopsavvy.mobi/developers/)
*   [Softek 条码阅读器 SDK](http://www.bardecode.com/en1/app/mobilesdk/)
*   [Scandit 条码扫描仪](http://docs.scandit.com/stable/ios/)（不是免费的）

如果您使用 ZBar API，这是代码片段

```
ZBarReaderController *reader = [ZBarReaderController new];
reader.readerDelegate = self;

    //... code to get image

CGImageRef imgCG = image.CGImage;

id<NSFastEnumeration> results = [reader scanImage:imgCG];
ZBarSymbol *symbol = nil;

for(symbol in results)
    // EXAMPLE: just grab the first barcode
    break;
resultText.text = symbol.data; 
```

还要确保 PL 不要忘记为 AVFoundation、CoreVideo 和 CoreMedia 框架使用弱链接

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-25T03:34:37.910

ZBAR iPhone sdk 对读取条码和二维码非常有效。[您可以在此处](http://zbar.sourceforge.net/iphone/sdkdoc/)找到 sdk 文件以及如何使用 sdk 教程

# javascript - 谷歌地图标记中的未知语法

> ID：14513561
> 
> 赞同：1
> 
> 时间：2013-01-25T00:48:06.150
> 
> 标签：javascript, google-maps

我正在尝试获取谷歌地图标记的地址或位置。然而，当我查看网站的源代码时，我收到了一个奇怪的 javascript 调用。有什么办法可以解决这个问题到可用的 Long/Lat 吗？

这就是我所看到的。

```
 <script type="text/javascript">
    $(window).load(function(){
        //Get spu from unit id's        
        var spuMap = new Array();
        // initialization for property page is done in seperate function
        if ($("#pdp-container").length == 0){
            ha.map.property.init({location: [{a:'%32%30%2E

%35%34%35%35%32%35%39%35%34%32%31%34%37%30%37', b:'%2D%31%30%35%2E

%32%37%39%34%30%37%35%30%31%32%32%30%37', cLat:'%32%30%2E

%35%34%35%35%32%35%39%35%34%32%31%34%37%30%37', cLong:'%2D%31%30%35%2E

%32%37%39%34%30%37%35%30%31%32%32%30%37', id:'268534', exact:true, zoom:16, maxZoom:20, type:'u'}], 

mType: 'property'}, spuMap);
        }
    });
    </script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T02:27:17.350

由于某些奇怪的原因，这些参数是 URI 编码的，因此只需在 cLat 和 cLong 上调用 decodeURI，例如。

```
decodeURI(cLat); 
```

当您使用它时，请确保将其转换为数字，因为 google api 将坐标作为数字。

# javascript - 使用 Google Infobox 和 API v3 显示多个标签但不显示标记

> ID：14513565
> 
> 赞同：1
> 
> 时间：2013-01-25T00:48:23.113
> 
> 标签：javascript, google-maps, google-maps-api-3

我想使用谷歌地图 API v3 和信息框来显示多个标签，但在谷歌地图上没有标记。我搜索了 stackoverflow 和网络，但只找到了显示标记和标签的示例。

基本代码来自谷歌地图实用程序库[1](http://google-maps-utility-library-v3.googlecode.com/svn/trunk/infobox/examples/infobox-label.html)

代码是：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<!-- saved from url=(0098)http://google-maps-utility-library-v3.googlecode.com/svn/trunk/infobox/examples/infobox-label.html  -->
<HTML><HEAD><TITLE>Creating a Map Label with InfoBox</TITLE>
<META content="text/html; charset=windows-1252" http-equiv=Content-Type>
<SCRIPT type=text/javascript 
src="Creating%20a%20Map%20Label%20with%20InfoBox_files/js"></SCRIPT>

<SCRIPT type=text/javascript 
src="Creating%20a%20Map%20Label%20with%20InfoBox_files/infobox.js"></SCRIPT>

<SCRIPT type=text/javascript>

    function initialize() {

        var secheltLoc = new google.maps.LatLng(49.47216, -123.76307);

        var myMapOptions = {
            zoom: 15,
            center: secheltLoc,
            mapTypeId: google.maps.MapTypeId.ROADMAP
        };
        var map = new google.maps.Map(document.getElementById("map_canvas"), myMapOptions);

        var labelText = "City Hall";
        var labelText2 = "where";

        var myOptions = {
             content: labelText
            ,boxStyle: {
               border: "1px solid #0080FF"
              ,textAlign: "center"
        ,color: "#0080FF"
        ,background: "white"
              ,fontSize: "11pt"
              ,width: "90px"

             }
            ,disableAutoPan: true
            ,pixelOffset: new google.maps.Size(-25, 0)
            ,position: secheltLoc
            ,closeBoxURL: ""
            ,isHidden: false
            ,pane: "mapPane"
            ,enableEventPropagation: true
        };

        var ibLabel = new InfoBox(myOptions);
        ibLabel.open(map);
    }
</SCRIPT>

<META name=GENERATOR content="MSHTML 8.00.7601.17514"></HEAD>
<BODY onload=initialize()>
  <DIV style="WIDTH: 100%; HEIGHT: 400px" id=map_canvas></DIV>
 </BODY>
</HTML> 
```

请问如何更改代码以显示多个标签？我是 Javascript 和 Google API 的新手

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T01:44:38.453

只需创建另一个信息框。

例子：

```
//use the options of the first infoBox to create another infobox
var ibLabel2 = new InfoBox(myOptions);

//apply different content and position
    ibLabel2.setPosition(new google.maps.LatLng(49.47116, -123.75307));
    ibLabel2.setContent('another label');
ibLabel2.open(map); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T02:18:16.547

您可以创建一个 javascript 函数来添加 InfoBox：

```
function createInfoBox(map, text, location) {
    var iOptions = {
        content: text,
        boxStyle: {
            border: "1px solid #0080FF",
            textAlign: "center",
            color: "#0080FF",
            background: "white",
            fontSize: "11pt",
            width: "90px"
        },
        disableAutoPan: true,
        pixelOffset: new google.maps.Size(0, 0),
        position: location,
        closeBoxURL: "",
        isHidden: false,
        pane: "mapPane",
        enableEventPropagation: true
    };
    var box = new InfoBox(iOptions);
    box.open(map);
} 
```

然后，您将为要在地图上显示的每个标签调用一次此函数，每个标签具有不同的 for`text`和 for值`location`。

```
function initialize() {

    var secheltLoc = new google.maps.LatLng(49.47216, -123.76307);
    var secheltLoc2 = new google.maps.LatLng(49.47218, -123.76307);

    var myMapOptions = {
        zoom: 15,
        center: secheltLoc,
        mapTypeId: google.maps.MapTypeId.ROADMAP
    };
    var map = new google.maps.Map(document.getElementById("map_canvas"), myMapOptions);

    var labelText = "City Hall";
    var labelText2 = "where";

    createInfoBox(map, labelText, secheltLoc); //create first label
    createInfoBox(map, labelText2, secheltLoc); //create second label
} 
```

# bash - 如何在 bash 中启用默认文件完成

> ID：14513571
> 
> 赞同：12
> 
> 时间：2013-01-25T00:49:18.673
> 
> 标签：bash

假设我有一个名为“foo”的命令，它接受一个参数（“加密”或“解密”），然后是一个文件列表。我想编写一个 bash 完成脚本来帮助处理第一个参数，然后为其他参数启用标准文件完成。我能来的最接近的是：

```
complete -F _foo foo

function _foo()
{
    local cmds cur
    if [ $COMP_CWORD -eq 1 ]
    then
        cur="${COMP_WORDS[1]}"
        cmds=("encrypt decrypt")
        COMPREPLY=($(compgen -W "${cmds}" -- ${cur}) )
    else
        COMPREPLY=($(compgen -f ${COMP_WORDS[${COMP_CWORD}]} ) )
    fi
} 
```

这会正确执行第一个参数，并将从当前目录中为后续的文件选择一个文件名。但是假设当前目录包含一个子目录栏，其中包含一个文件 baz.txt。输入 ba-TAB-TAB 后，补全结果为“bar”（“r”后面的空格），并准备好选择下一个参数。我想要的是标准的 bash 补全，结果是“bar/”（斜杠后没有空格），准备在子目录中选择一个文件。有没有办法得到它？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2014-04-03T03:31:20.007

我知道这有点晚了，但我在这里找到了解决方案：[https ://stackoverflow.com/a/19062943/108105](https://stackoverflow.com/a/19062943/108105)

基本上，您使用`complete -o bashdefault -o default`, 并且当您想要恢复到您设置的默认 bash 完成时`COMPREPLY=()`. 这是一个例子：

```
complete -o bashdefault -o default -F _foo foo
_foo() {
    local cur=${COMP_WORDS[COMP_CWORD]}
    if (( $COMP_CWORD == 1 )); then
        COMPREPLY=( $(compgen -W 'encrypt decrypt' -- "$cur") )
    else
        COMPREPLY=()
    fi
} 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-01-25T14:55:07.947

bash 文档可能有点神秘。最简单的解决方案是更改完成函数绑定：

```
complete -o filenames -F _foo foo 
```

这意味着该函数返回文件名（包括目录），并且启用了对结果的特殊处理。

（恕我直言，文档没有明确说明这可以有效地`COMPREPLY[]`按照您的完成功能设置进行后处理；并且`-o`其中包含的一些选项在应用时`compgen`似乎没有效果。）

您可以使用以下方法更接近正常的 bash 行为：

```
 complete -o filenames -o bashdefault -F _foo foo 
```

这会让你“~”完成回来。

然而，上面有两个问题：

*   如果您有一个名为“encrypt”或“decrypt”的目录，那么关键字的扩展将增长一个尾随“/”
*   `$VARIABLE`扩展将不起作用，`$`将成为`\$`更好地匹配文件名与`$`. 同样 `@host`，扩展将不起作用。

我发现处理这个问题的唯一方法是处理`compgen`输出，而不是依赖于“文件名”后处理：

```
_foo()
{
    local cmds cur ff
    if (($COMP_CWORD == 1))
    then
        cur="${COMP_WORDS[1]}"
        cmds="encrypt decrypt"
        COMPREPLY=($(compgen -W "$cmds" -- "$cur"))
        COMPREPLY=( "${COMPREPLY[@]/%/ }" )   # add trailing space to each
    else
        # get all matching files and directories
        COMPREPLY=($(compgen -f  -- "${COMP_WORDS[$COMP_CWORD]}"))

        for ((ff=0; ff<${#COMPREPLY[@]}; ff++)); do
            [[ -d ${COMPREPLY[$ff]} ]] && COMPREPLY[$ff]+='/'
            [[ -f ${COMPREPLY[$ff]} ]] && COMPREPLY[$ff]+=' '
        done
    fi
}

complete -o bashdefault -o default -o nospace -F _foo foo 
```

（我还删除了`cmd`上面多余的数组，并使其`compgen`更加健壮并处理文件名中的空格或前导破折号。）

现在的缺点是，当您获得中间完成列表时（即，当您点击`tab`两次以显示多个匹配项时）您不会在目录上看到尾随 /，并且由于`nospace`启用，`~ $ @`扩展不会增加空间以导致它们被接受。

简而言之，我不相信你可以简单地混合搭配你自己的完成和完整的 bash 完成行为。

# android - 启动 AVD 时出错 - “无法打开文件：(null)/system/build.prop: 没有这样的文件或目录”

> ID：14513572
> 
> 赞同：20
> 
> 时间：2013-01-25T00:49:29.973
> 
> 标签：android, android-emulator

当我使用 CMD 窗口打开 AVD 时

```
C:\Android\adt-bundle-windows-x86\sdk\tools>emulator.exe -avd Nexus-7-001 -verbose 
```

一切似乎都很好，直到下面的行“无法打开文件：（null）/system/build.prop：没有这样的文件或目录”

虽然模拟器打开，但尝试选择应用程序会产生错误，*“不幸的是，启动器已停止。”*

我已经卸载并重新下载了 ADT => 同样的问题。你能告诉我是否有办法确保删除所有的 ADT 吗？这个问题也可能是由旧 ADT（早期版本的 Eclipse）的残余引起的，还是完全是其他问题？

我在 Windows 7 和 Windows Vista OS 系统上遇到了同样的问题。

```
C:\Android\adt-bundle-windows-x86\sdk\tools>emulator.exe -avd Nexus-7-001 -verbose
.
.
.
emulator: Trace file name is not set

emulator: autoconfig: -scale 0.569531
emulator: Could not open file: (null)/system/build.prop: No such file or directory
emulator: control console listening on port 5554, ADB on port 5555
emulator: can't connect to ADB server: connection refused
emulator: ping program: C:\Android\adt-bundle-windows-x86\sdk\tools\ddms.bat
emulator: ping command: C:\Windows\system32\cmd.exe /C "C:\Android\adt-bundle-windows-x86\sdk\tools\ddms.bat" ping emulator 21.0.1.0 "NVIDIA Corporati
on" "GeForce G210M/PCI/SSE2" "3.0.0"
goldfish_fb_get_pixel_format:167: display surface,pixel format:
  bits/pixel:  16
  bytes/pixel: 2
  depth:       16
  red:         bits=5 mask=0xf800 shift=11 max=0x1f
  green:       bits=6 mask=0x7e0 shift=5 max=0x3f
  blue:        bits=5 mask=0x1f shift=0 max=0x1f
  alpha:       bits=0 mask=0x0 shift=0 max=0x0 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-12-20T10:57:29.860

我以前遇到过这个问题。要解决这个问题，只需以管理权限启动 Eclipse。它适用于 Windows 7 和 Windows 8.1。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-16T17:59:05.023

1) 检查系统镜像是否正确安装。

2）检查您所使用的显卡的驱动程序。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-01-18T19:53:47.180

这可能是与您的 Android SDK 和/或 Java 的环境变量路径相关的问题，未正确设置或过时。仔细检查它们是否指向正确的资源。您还可以尝试使用提升的命令提示符运行命令并首先重新加载 ADB。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-03-19T18:58:31.790

build.prop 文件包含 Android 系统的基本信息。因此，如果找不到该文件，系统（或启动器）将崩溃。如果系统映像损坏（下载时可能出现问题或 Android 系统搞砸了），您应该使用 SDK 管理器删除平台。或者您可以删除安装 SDK 的文件`platform-<api level you are using>`夹`system-images`中的文件夹。`platforms`完成后重新下载平台，AVD 应该会再次工作！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-08-06T21:13:34.733

我遇到了几乎相同的问题，解决方案是：

1.  检查内核的 API 级别
2.  使用相同的 API 运行 AVD。

## 我的错误是：

```
D:\programs\adt-bundle-windows-x86_64-20130522\sdk\tools>emulator-arm -kernel D
\programs\adt-bundle-windows-x86_64-20130522\sdk\emulator-root\Kernel\zImage -s
ow-kernel -verbose -avd NexusS
emulator: found SDK root at D:\programs\adt-bundle-windows-x86_64-20130522\sdk
emulator: Android virtual device file at: C:\Users\Laci\.android\avd\NexusS.ini
emulator: virtual device content at C:\Users\Laci\.android\avd\NexusS.avd
emulator: virtual device config file: C:\Users\Laci\.android\avd\NexusS.avd/con
ig.ini
emulator: using core hw config path: C:\Users\Laci\.android\avd\NexusS.avd/hard
are-qemu.ini
emulator: Found AVD target API level: 8
emulator: 'magic' skin format detected: 480x800
emulator: autoconfig: -skin 480x800
emulator: autoconfig: -skindir (null)
emulator: keyset loaded from: C:\Users\Laci\.android\default.keyset
emulator: found SDK root at D:\programs\adt-bundle-windows-x86_64-20130522\sdk
emulator: trying to load skin file 'D:\programs\adt-bundle-windows-x86_64-20130
22\sdk/tools/lib/emulator/skins/dynamic//layout'
emulator: loaded dynamic skin width=480 height=800 bpp=16

emulator: autoconfig: -ramdisk D:\programs\adt-bundle-windows-x86_64-20130522\s
k/platforms\android-8\images\/ramdisk.img
emulator: Using initial system image: D:\programs\adt-bundle-windows-x86_64-201
0522\sdk/platforms\android-8\images\/system.img
emulator: autoconfig: -data C:\Users\Laci\.android\avd\NexusS.avd/userdata-qemu
img
emulator: autoconfig: -initdata C:\Users\Laci\.android\avd\NexusS.avd/userdata.
mg
emulator: autoconfig: -cache C:\Users\Laci\.android\avd\NexusS.avd/cache.img
emulator: Physical RAM size: 256MB

Content of hardware configuration file:
  hw.cpu.arch = arm
  hw.ramSize = 256
  hw.screen = touch
  hw.mainKeys = yes
  hw.trackBall = no
  hw.keyboard = no
  hw.keyboard.lid = yes
  hw.keyboard.charmap = qwerty2
  hw.dPad = no
  hw.gsmModem = yes
  hw.gps = yes
  hw.battery = no
  hw.accelerometer = yes
  hw.audioInput = yes
  hw.audioOutput = yes
  hw.sdCard = yes
  disk.cachePartition = yes
  disk.cachePartition.path = C:\Users\Laci\.android\avd\NexusS.avd/cache.img
  disk.cachePartition.size = 66m
  hw.lcd.width = 480
  hw.lcd.height = 800
  hw.lcd.depth = 16
  hw.lcd.density = 240
  hw.lcd.backlight = yes
  hw.gpu.enabled = no
  hw.camera.back = none
  hw.camera.front = none
  vm.heapSize = 32
  hw.sensors.proximity = yes
  hw.sensors.magnetic_field = yes
  hw.sensors.orientation = yes
  hw.sensors.temperature = yes
  kernel.path = D:\programs\adt-bundle-windows-x86_64-20130522\sdk\emulator-roo
\Kernel\zImage
  kernel.parameters =  android.checkjni=1
  disk.ramdisk.path = D:\programs\adt-bundle-windows-x86_64-20130522\sdk/platfo
ms\android-8\images\/ramdisk.img
  disk.systemPartition.initPath = D:\programs\adt-bundle-windows-x86_64-2013052
\sdk/platforms\android-8\images\/system.img
  disk.systemPartition.size = 200m
  disk.dataPartition.path = C:\Users\Laci\.android\avd\NexusS.avd/userdata-qemu
img
  disk.dataPartition.size = 2g
  avd.name = NexusS
.
QEMU options list:
emulator: argv[00] = "emulator-arm"
emulator: argv[01] = "-show-kernel"
emulator: argv[02] = "-android-hw"
emulator: argv[03] = "C:\Users\Laci\.android\avd\NexusS.avd/hardware-qemu.ini"
Concatenated QEMU options:
 emulator-arm -show-kernel -android-hw C:\Users\Laci\.android\avd\NexusS.avd/ha
dware-qemu.ini
emulator: registered 'boot-properties' qemud service
emulator: nand_add_dev: system,size=0xc800000,initfile=D:\programs\adt-bundle-w
ndows-x86_64-20130522\sdk/platforms\android-8\images\/system.img
emulator: mapping 'system' NAND image to C:\Users\Laci\AppData\Local\Temp\\Andr
idEmulator\TMPE31B.tmp
emulator: rounding devsize up to a full eraseunit, now c810000

emulator: nand_add_dev: userdata,size=0x80000000,file=C:\Users\Laci\.android\av
\NexusS.avd/userdata-qemu.img
emulator: rounding devsize up to a full eraseunit, now 80010000

emulator: registered 'boot-properties' qemud service
emulator: Adding boot property: 'dalvik.vm.heapsize' = '32m'
emulator: Adding boot property: 'qemu.sf.lcd_density' = '240'
emulator: Adding boot property: 'qemu.hw.mainkeys' = '1'
emulator: Adding boot property: 'qemu.sf.fake_camera' = 'none'
emulator: nand_add_dev: cache,size=0x4200000,file=C:\Users\Laci\.android\avd\Ne
usS.avd/cache.img
emulator: Initializing hardware OpenGLES emulation support
emulator: ERROR: Could not load OpenGLES emulation library: Could not load DLL!
emulator: WARNING: Could not initialize OpenglES emulation, using software rend
rer.
emulator: Kernel parameters: qemu.gles=0 qemu=1 console=ttyS0 android.qemud=tty
1 android.checkjni=1 ndns=2
emulator: Trace file name is not set

emulator: autoconfig: -scale 1
serial0 console
emulator: Could not open file: (null)/system/build.prop: No such file or direct
ry
emulator: control console listening on port 5554, ADB on port 5555
emulator: sent '0012host:emulator:5555' to ADB server
emulator: ping program: D:\programs\adt-bundle-windows-x86_64-20130522\sdk\tool
\ddms.bat
emulator: ping command: C:\Windows\system32\cmd.exe /C "D:\programs\adt-bundle-
indows-x86_64-20130522\sdk\tools\ddms.bat" ping emulator 22.0.1.0 "" "" ""
Uncompressing Linux...Uncompressing Linux...Uncompressing Linux...Uncompressing
Linux...Uncompressing Linux...Uncompressing Linux...Uncompressing Linux...Uncom
ressing Linux...Uncompressing Linux...Uncompressing Linux...Uncompressing Linux
..Uncompressing Linux...Uncompressing Linux...Uncompressing Linux...Uncompressi
g Linux...Uncompressing Linux...Uncompressing Linux...Uncompressing Linux...Unc
mpressing Linux...Uncompressing Linux...Uncompressing Linux...Uncompressing Lin
x...Uncompressing Linux...Uncompressing Linux...Uncompressing Linux...Uncompres
ing Linux...Uncompressing Linux...Uncompressing Linux...Uncompressing Linux...U
compressing Linux...Uncompressing Linux...Uncompressing Linux...Uncompressing L
nux...Uncompressing Linux...Uncompressing Linux...Uncompressing Linux...Uncompr
ssing Linux...Uncompressing Linux...Uncompressing Linux...Uncompressing Linux..
Uncompressing Linux...Uncompressing Linux...Uncompressing Linux...Uncompressing
Linux...Uncompressing Linux...Uncompressing Linux...Uncompressing Linux...Uncom
ressing Linux...Uncompressing Linux...Uncompressing Linux...Uncompressing Linux
..Uncompressing Linux...Uncompressing Linux...Uncompressing Linux...Uncompressi
g Linux...Uncompressing Linux...Uncompressing Linux...Uncompressing Linux...Unc
mpressing Linux...Uncompressing Linux...Uncompressing Linux...Uncompressing Lin
x...Uncompressing Linux...Uncompressing Linux...Uncompressing Linux...Uncompres
ing Linux...Uncompressing Linux...Uncompressing Linux...Uncompressing Linux...U
compressing Linux...Uncompressing Linux...Uncompressing Linux...Uncompressing L
nux...Uncompressing Linux...Uncompressing Linux...Uncompressing Linux...Uncompr
ssing Linux...Uncompressing Linux...Uncompressing Linux...Uncompressing Linux..
Uncompressing Linux...Uncompressing Linux...Uncompressing Linux...Uncompressing
Linux...Uncompressing Linux...Uncompressing Linux...Uncompressing Linux...Uncom
ressing Linux...Uncompressing Linux...Uncompressing Linux...Uncompressing Linux
..Uncompressing Linux...Uncompressing Linux...Uncompressing Linux...Uncompressi
g Linux...Uncompressing Linux...Uncompressing Linux...Uncompressing Linux...Unc
mpressing Linux...Uncompressing Linux...Uncompressing Linux...

ran out of input data

 -- System haltedemulator: User-config was not changed. 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-05-15T18:41:48.947

它可能与那条线无关。

初始化 OpenGL 时似乎存在一个常见问题（Google 地球工作正常吗？）。在这些情况下，请在命令行中尝试使用“emulator-arm”而不是“emulator”。如果可以，则可能是驱动程序问题（尝试重新安装图形驱动程序）。

如果它不起作用，请尝试发布整个日志（emulator -verbose -avd mydevice）。

# java - 构建一个用于部署的 Maven 项目

> ID：14513573
> 
> 赞同：0
> 
> 时间：2013-01-25T00:49:36.380
> 
> 标签：java, maven, m2e

大家好，我对使用 maven 构建 Java 项目还是很陌生，所以我相信我的问题的解决方案会很容易。我已经安装了 Eclipse Maven 插件并创建了一个 Maven 项目。我现在希望打包这个项目并将其作为可运行的 jar 文件分发。但是，当我跑步时

```
mvn package 
```

然后尝试运行jar文件我得到以下错误：

```
 Exception in thread "main" java.lang.NoClassDefFoundError: main/Formatter 
```

这个特定文件的 pom 如下所示：

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
<modelVersion>4.0.0</modelVersion>
<groupId>GROUP</groupId>
<artifactId>pcap.csv.xml</artifactId>
<version>0.0.1-SNAPSHOT</version>
<dependencies>
     <dependency>
        <groupId>net.sf.opencsv</groupId>
        <artifactId>opencsv</artifactId>
        <version>2.0</version>
    </dependency>
  </dependencies>
</project> 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T00:52:24.040

需要在jar插件中指定主类：

```
<build>
<plugins>
    <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-jar-plugin</artifactId>
        <configuration>
            <archive>
                <manifest>
                    <addClasspath>true</addClasspath>
                    <mainClass>main.Formatter</mainClass>
                </manifest>
            </archive>
        </configuration>
    </plugin>
</plugins>
</build> 
```

如果要分发单个 jar，则需要使用单个 jarifier（fatjar、jarjar、onejar 等）

# javascript - 如何在选定的 li 元素上添加一个类并使 li 全尺寸可点击

> ID：14513574
> 
> 赞同：2
> 
> 时间：2013-01-25T00:49:52.530
> 
> 标签：javascript, jquery

我想向选定的“li”添加一个类，同时从先前选择的 li 元素中删除 class:selected。

我已经工作了几个小时，但仍然没有任何运气。我还检查了其他问题，但他们的解决方案对我不起作用。

请帮忙....

```
<ul id='mainView' class='menu' style='float: left; clear: both;'>      
    <a href="/Link1"><li>Patient</li></a>
    <a href="/Link2"><li>Recommendations</li></a>

</ul>

<script type="text/javascript">
    $(document).ready(function () {
        $('.menu ul a').on('click', function (event) {
            $('.menu ul a.selected').className = '';
            alert($(this).attr('id'));
            $(this).attr('class') = 'selected';
        });
    });

//    $('.menu li').on('click', function () {
//        $('.menu li.selected').className = '';
//        this.className = 'selected';
//    });
</script> 
```

**更新：**

我确实放了一个里面的li，但是如果我点击li而不是li里面的a，网页不会重定向。这就是为什么我以相反的方式这样做的原因。

**更新 2** 选定的 li 没有获得“选定”类的原因是因为整个网页被重定向到具有相同导航栏的新页面。所以现在的问题是如何在新网页上突出显示选定的 li（它是在上一页上选择的）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T00:55:59.063

在`UL`每个人（甚至是浏览器）内部都期望看到一个`LI`

所以你的HTML：

```
<ul>
    <li><a href="/Link1">Patient</a></li>
    <li><a href="/Link2">Recommendations</a></li>   
</ul> 
```

还有你的 jQ：

```
$('ul li').click(function(){
  $(this).addClass('selected').siblings().removeClass('selected');
}); 
```

构建网页你应该知道如何处理`LI`元素。简单，例如具有最少样式的虚拟容器。
这意味着您宁愿在元素中添加`display:block`...`float:left`和其他很酷的东西，而不是在您的**全尺寸可点击**`<A>`元素中设置 a 。`padding` **`A`**

 *** * *

此外（如果您没有时间玩 CSS）来`LI` **完全可点击**使用：

```
$('ul li').click(function(){
  var goTo = $(this).find('a').attr('href');
  window.location = goTo ;
  // $(this).addClass('selected').siblings().removeClass('selected'); // than you don't need this :D
}); 
```

## 在 OP 后期编辑之后 - 并回答问题

页面刷新**后获取哪个是活动的**使用：

```
// ABSOLUTE PATH
var currentPage = window.location;

// RELATIVE PATH
//  var currentPage = window.location.pathname;

$('li a[href="'+ currentPage +'"]').addClass('selected'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-25T00:52:01.087

```
<script type="text/javascript">
    $(document).ready(function () {
        $('.menu ul a').on('click', function (event) {
            $('.menu ul a.selected').removeClass('selected');
            alert($(this).attr('id'));
            $(this).addClass('selected')
        });
    });
</script> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-25T00:52:21.973

试试[`addClass`](http://api.jquery.com/addClass/)and [`removeClass`](http://api.jquery.com/removeClass/)，它们是 jQuery 函数：

```
$(document).ready(function () {
    $('.menu ul a').on('click', function (event) {
        $('.menu ul a.selected').removeClass("selected");
        $(this).addClass('selected');
    });
}); 
```**

# javascript - 如果元素正在接触，将它们的宽度分成两半？

> ID：14513576
> 
> 赞同：1
> 
> 时间：2013-01-25T00:49:59.063
> 
> 标签：javascript, jquery, css

我正在开发一个包含月视图和日视图的 Javascript/jQuery 日历。单击日期将更改日期，这将更新日视图中的日期变量。

日视图分为从午夜到晚上 11:00 的半小时部分。单击任何半小时`<tr>`（日视图是一个表格）将在单击的时间和未来一个小时之间创建一个事件，并`div`在日历顶部附加一个跨越时间范围并定位在正确起点的事件点（每个像素是一分钟...）

*但是*，有一个问题。如果您在已经存在的某个时间跨度之间创建一个“事件”，它们就会重叠。显然，这是默认行为，但我希望发生的是，如果在已被事件占用的日期范围之间创建事件，则它们并排对齐，以免重叠。

这类似于在 Mac 的 iCal 应用程序中看到的行为： ![在此处输入图像描述](../Images/e0cadab599f81cdf46344504a36d2306.png)

现在我实现这样一个目标的第一个想法是使用碰撞检测，但是所有用于此目标的 jQuery 插件都很臃肿或要求元素可拖动。

然后我认为CSS中可能有一种方法可以做到这一点，如果两个元素重叠，它们会均匀地分割宽度。

然后我认为这太荒谬了，所以我想知道如何尽可能轻松地实现这一目标。

我将在 jsFiddle 中发布完整的代码，但最重要的函数`insertEvent`如下所示：

```
 function insertEvent(start, end){

        var end_minutes = new Date(end).getMinutes();
        var end_border = new Date(new Date(end).setMinutes(end_minutes + 2));

        //$(".day_date").html(start + "<br />" + end);
        var diff = Math.abs(end_border - new Date(start));
        var minutes = Math.floor((diff/1000)/60);

        var start_element = $("td").find("[data-date='" + start + "']");
        var offset = start_element.offset().top - $(".second").offset().top;

        var this_element = $("<div class='event' style='height:" + minutes + "px;margin-top:" + offset + "px;'></div>");

        $(".right").prepend(this_element);

    } 
```

这需要 javascript`new Date()`格式的两个参数，一个用于开始日期，一个用于结束日期。

小提琴：http: [//jsfiddle.net/charlescarver/HwdwL/](http://jsfiddle.net/charlescarver/HwdwL/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T22:55:47.837

我在您的方法中看到的问题之一是没有存储数据的结构。我以前用 Javascript 构建了一个日历，这并不容易。首先，确保您对日历事件有某种抽象。就像是：

```
function CalendarEvent(startDateTime, endDateTime) {
  this.startDateTime = startDateTime;
  this.endDateTime = endDateTime;
}

CalendarEvent.prototype.start = function() {
  return this.startDateTime.getTime();
};

CalendarEvent.prototype.end = function() {
  return this.endDateTime.getTime();
};

CalendarEvent.new = function(startDateTime, endDateTime) {
  // This is a little factory method. It prevents calendar events 
  // from having end times that fall before the start time.
  // USE THIS TO INSTANTIATE A NEW CALENDAR EVENT
  if(endDateTime.getTime() < startDateTime.getTime()) {
    throw new Error("End time falls before start time");
  }
  return new CalendarEvent(startDateTime, endDateTime);
};

CalendarEvent.compare = function(eventOne, eventTwo) {
  // this is a class method to compare two events
  // If used with sort it will sort by startDateTime
  return eventOne.start() - eventTwo.start();
};

// ... add any other methods you need 
```

接下来，您将要对日历事件进行排序。我会按开始时间排序。然后，一旦对它进行排序，您实际上可以在进行更改时重新渲染所有内容。只要您正确排序，确定日历事件是否发生冲突就这么简单：

```
CalendarEvent.prototype.intersects = function(otherEvent) {
  // If the other event starts after this one ends 
  // then they don't intersect
  if(otherEvent.start() > this.end()) {
    return false;
  }
  // If the other event ends before this one starts
  // then they don't intersect
  if(otherEvent.end() < this.start()) {
    return false;
  }
  // Everything else is true
  return true;
}; 
```

因为数据已排序，所以您知道如果两个或更多日历事件相交，它们将不得不共享空间。当然，在划分空间时，您必须考虑一些事情。您是否想要一个简单的实现，您只需从左到右平均共享空间（左侧具有最早的开始时间）。如果是这样，如果它有 4 个共享空间的事件（每个块都是一个事件），您的视觉表示可能看起来像这样：

![幼稚的渲染](../Images/f9d4d9b435777be513e839ea55e0780d.png)

但是，如果您的事件具有奇怪的形状，它们可能会导致您的日历看起来很奇怪。考虑以下：

![可能的情况](../Images/69a7c67f2f779fe394ad5845f0810e31.png)

在这种情况下，事件 2 占用了大量垂直空间，并且事件 1 下方的所有空间都未使用。也许为了更好的用户体验，你不希望这种事情发生。如果是这样，您应该相应地设计您的渲染算法。请记住，在您遇到的每个更改上重新渲染可能是最容易的，但这完全取决于您如何存储数据。如果您不将数据存储在某种易于遍历的结构中，那么您将无法做这种事情。

但是要完成对您问题的回答，这是一个相当幼稚的示例。我还没有测试过它，所以这是一个很大的假设。它并不完全完整，您必须自己编辑渲染。这只是为了让您了解如何使其工作。它肯定看起来更漂亮：

```
function renderCalendarEvents(calendarEvents) {
  // Sort the calendar events (assuming calendarEvents is an array)
  var sortedEvents = calendarEvents.sort(CalendarEvent.compare);
  var index = 0;
  // renderEvents is an anonymous function that will be called every time 
  // you need to render an event
  // it returns it's columnDivisor.
  var renderEvent = function(position) {
    var currentEvent = sortedEvents[index];
    var nextEvent = sortedEvents[index + 1];
    // The default column divisor is determined by
    // the current x-position + 1
    var columnDivisor = position + 1;
    // Increment before any recursion
    index += 1;
    // Check if nextEvent even exists
    if(nextEvent) {
      // If the nextEvent intersects with the current event
      // then recurse
      if(currentEvent.intersects(nextEvent)) {
        // We need to tell the next event that it starts at the
        // column position that is immediately +1 to the current event
        columnDivisor = renderEvent(position + 1);
      }
    }
    // placeEvent() is some function you can call to actually place 
    // the calendar event element on the page
    // The position is the x-position of the current event
    // The columnDivisor is a count of the amount of events sharing this column
    placeEvent(currentEvent, position, columnDivisor);
    return columnDivisor;
  };
  while(true) {
    // render events until we're done
    renderEvent(0);
    if(index >= sortedEvents.length) {
      break;
    }
  }
} 
```

本质上，这个特定算法的想法是，如果列表中的 nextEvent 存在并且该事件与 currentEvent 相交，那么我们需要拆分 currentEvent 的宽度。它继续递归，直到它找不到更多的交叉点，然后它会返回递归调用链。我跳过了实际的 DOM 操作逻辑，因为真正困难的部分是确定需要拆分多少实际列才能使这些事件适合。所以希望这一切都有意义。

编辑：

更清楚地说，为了将其添加到您现有的代码中，我将`insertEvent`用类似的东西替换您的函数。我不会为你写下所有的逻辑，所以你必须自己写一些。但这只是乐趣的一半:-)。

```
function insertEvent(start, end) {
  var newEvent = Calendar.new(start, end);
  // you'll have to store the array somewhere.
  // i'm just assuming some kind of global right now
  eventsArray.push(newEvent);
  // You'll want to destroy any event elements
  destroyCurrentEventElements();
  // Now run the rendering function
  renderCalendarEvents(eventsArray);
} 
```

# c# - 无法投射对象...键入

> ID：14513578
> 
> 赞同：3
> 
> 时间：2013-01-25T00:50:25.193
> 
> 标签：c#, com, activex

Visual Studio 2008 (C#) 为我的 COM 对象创建了互操作。我使用的主要对象是：`OPCHDAServerClass`、、`IOPCHDAItems`和`OPCHDAItem`。代码是：

```
OPCHDAServerClass server = new OPCHDAServerClass();
server.Connect("OPC.PHDServerHDA.1");
OPCHDAItem item = server.OPCHDAItems.AddItem("MyItem",1); 
```

在第三行，该`AddItem`方法应该返回一个`OPCHDAItem`. 互操作定义为`AddItem`：

```
[DispId(1610743813)]
OPCHDAItem AddItem(string ItemID, int ClientHandle); 
```

我得到的例外是：

> 无法将“OPCHDAServerClass”类型的对象转换为“IOPCHDAItems”类型。

我不明白为什么我会收到此错误消息。 `server.OPCHDAItems`实现`IOPCHDAItems`。我不知道为什么 server( `OPCHDAServerClass`) 被强制转换为`IOPCHDAItems`？

我在 python 中进行了初始原型设计，效果很好，所以我知道 COM 组件是正常的。这是python代码：

```
server = win32com.client.dynamic.Dispatch("Uniformance.OPCHDA.Automation.1")
server.Connect("OPC.PHDServerHDA.1")
item = server.OPCHDAItems.AddItem("MyItem", 1) 
```

有没有人见过类似的问题并知道解决方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T01:01:09.443

看起来*声明*的属性类型`OPCHDAItems`不是`IOPCHDAItems`- 它是`OPCHDAServerClass`. C# 是一种静态类型语言——除非明确告知，否则它不会对 COM 接口进行类型转换，除非告知，否则它不会使用 IDispatch。改写如下：

```
server.Connect("MyServerName");
OPCHDAItem item = (server.OPCHDAItems as IOPCHDAItems).AddItem("MyItem",1); 
```

编辑：先试试这个：

```
IOPCHDAItems Items = server.OPCHDAItems; 
```

还是同样的错误？怎么样

```
IOPCHDAItems Items = server.OPCHDAItems as IOPCHDAItems; 
```

# php - 提交变量为空白的 Codeigniter 问题

> ID：14513586
> 
> 赞同：0
> 
> 时间：2013-01-25T00:51:58.153
> 
> 标签：php, forms, codeigniter, post, http-post

我有一个表格：

```
 <?php
        $attr = array('id'=>'urlSubmit');
        $urlInputAttr = array('name'=>'urlInput','value'=>'yourdomain.com','maxlength'=>'50','size'=>'25');
        echo form_open('urlSubmission',$attr);
        echo form_input($urlInputAttr);
        #echo form_submit('urlInput', '');
        echo form_close();
    ?> 
```

一个名为**urlsubmission的控制器**

```
 $this->load->model('domaincheckmodel');

            $this->domaincheckmodel->verifyduplicates($this->input->post('urlInput')); 
```

和一个模型（domaincheckmodel）中的函数，它基本上检查重复记录并插入一个新域：

```
 function verifyduplicates($tldEntered){
    # $_POSTed value of urlInput
    ## Gather if the domain exists in db
    $DupDomains = $this->db->get_where('ClientDomain', array('tld'=>$tldEntered));

        if($DupDomains->num_rows() > 0 ){
            $this->load->view('err/domainexists'); ##domain already used
        }

        # else, no domain present, insert.
        else{
            #array of insert values:
            $insertNewDomain = array('tld'=>$this->input->post('urlInput',TRUE));
            $this->db->insert('ClientDomain', $insertNewDomain); 
            $this->load->view('success/domainfree'); ##domain is free and has been entered.
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T04:21:16.360

```
$this->domaincheckmodel->verifyduplicates($this->input->post('urlInput')); 

function verifyduplicates($tldEntered){
    # $_POSTed value of urlInput
    ## Gather if the domain exists in db
    $DupDomains = $this->db->get_where('ClientDomain', array('tld'=>$tldEntered)); 
```

您正在从表单传递到控制器再到模型，您确定 post 变量保持填充状态吗？试试上面的方法，在控制器中捕获 post 变量并将其传递给模型，而不是尝试在模型本身中读取它？

关于将参数传递给函数的一点说明。您可以通过括号内的任何内容执行此操作，如下所示。

控制器：

```
$myVariable = $this->someModel->someFunction($someParameter) 
```

模型：

```
function someFunction($variableIWantToPopulateWithSomeParameter) 
```

因此 someParameter 从控制器传递到模型中的函数名称。不过有一点需要注意，那就是模型函数现在期望一个参数，如果你不给它一个参数，即你调用 someFunction() 你会得到一个错误。这可以通过给它一个默认值来避免，如下所示：

```
function someFunction($myVariable = 1) 
```

要做的就是说，如果我没有得到传递给我的值，我将使 $myVariable 等于 1，如果这样做，我将用新值覆盖 1。因此，如果您向该函数发送两个调用，这就是您所期望的：

```
//$myVariable is going to be 1, the default. 
```

$this->someModel->someFunction();

```
//$myVariable is going to be 5, the value passed to it 
```

$this->someModel->someFunction(5);

# css - Sublime Text 2 引用外部 css

> ID：14513592
> 
> 赞同：1
> 
> 时间：2013-01-25T00:52:14.550
> 
> 标签：css, intellisense, sublimetext2

使用 Sublime Text2 时，我想从类名中获得“IntelliSense”。

CSS 文件位于运行时传递的包含文件中。

但是，在开发过程中，我希望在添加 class="xxx" 时可以使用我的样式。

是否可以添加一个设置来指向当前页面或项目以始终查看/引用我的 css 文件？

# ruby - 如何编写一个以任何顺序匹配字符的正则表达式？

> ID：14513595
> 
> 赞同：4
> 
> 时间：2013-01-25T00:52:32.583
> 
> 标签：ruby, regex

我正在尝试编写一个正则表达式，它将匹配一组字符而不考虑顺序。例如：

```
str = "act" 
str.scan(/Insert expression here/) 
```

将匹配：

```
cat
act
tca
atc
tac
cta 
```

但不匹配`ca`,`ac`或`cata`.

我在 StackOverflow 上阅读了很多类似的问题和答案，但没有找到与我的目标完全匹配的问题。

为了澄清一点，我正在使用 ruby​​ 并且不想允许重复字符。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-25T06:53:03.607

这是您的解决方案

```
^(?:([act])(?!.*\1)){3}$ 
```

[在 Regexr 上](http://regexr.com?33hh9)查看

```
^                  # matches the start of the string
    (?:            # open a non capturing group 
        ([act])    # The characters that are allowed and a capturing group
        (?!.*\1)   # That character is matched only if it does not occur once more, Lookahead assertion
    ){3}           # Defines the amount of characters
$ 
```

唯一特别的想法是[前瞻断言](http://www.regular-expressions.info/lookaround.html)，以确保字符不重复。

`^`并且`$`是匹配字符串开头和结尾的锚点。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-25T00:53:52.830

`[act]{3}`或者`^[act]{3}$`会在大多数正则表达式方言中这样做。如果您可以缩小您正在使用的系统，这将帮助您获得更具体的答案。

编辑：正如@georgydyer 在下面的评论中提到的，您的问题不清楚是否允许重复字符。如果没有，您可以调整[此问题](https://stackoverflow.com/questions/3101366/regex-to-match-1234-1324-2341-all-permutations-of-1-2-3-4)的答案并获得：

```
^(?=[act]{3}$)(?!.*(.).*\1).*$ 
```

也就是说，一个正向前瞻来检查匹配，然后一个负前瞻与反向引用来排除重复的字符。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-25T05:20:37.240

以下是我的做法：

```
regex = /\b(?:#{ Regexp.union(str.split('').permutation.map{ |a| a.join }).source })\b/
# => /(?:act|atc|cat|cta|tac|tca)/

%w[
  cat act tca atc tac cta
  ca ac cata
].each do |w|
  puts '"%s" %s' % [w, w[regex] ? 'matches' : "doesn't match"]
end 
```

输出：

```
"cat" matches
"act" matches
"tca" matches
"atc" matches
"tac" matches
"cta" matches
"ca" doesn't match
"ac" doesn't match
"cata" doesn't match 
```

我使用将数组传递`Regexp.union`给很多东西的技术；我使用散列的键特别好，并将散列传递到[`gsub`](http://www.ruby-doc.org/core-1.9.3/String.html#method-i-gsub)文本模板上以进行快速搜索/替换。这是`gsub`文档中的示例：

```
'hello'.gsub(/[eo]/, 'e' => 3, 'o' => '*') #=> "h3ll*" 
```

[Regexp.union](http://www.ruby-doc.org/core-1.9.3/Regexp.html#method-c-union)创建一个正则表达式，在提取生成的实际模式时使用它[`source`](http://www.ruby-doc.org/core-1.9.3/Regexp.html#method-i-source)而不是使用它很重要：[`to_s`](http://www.ruby-doc.org/core-1.9.3/Regexp.html#method-i-to_s)

```
puts regex.to_s
=> (?-mix:\b(?:act|atc|cat|cta|tac|tca)\b)

puts regex.source
=> \b(?:act|atc|cat|cta|tac|tca)\b 
```

请注意如何`to_s`将模式的标志嵌入到字符串中。如果您不期望它们，您可能会不小心将该模式嵌入到另一个模式中，这不会像您预期的那样运行。去过那里，做到了，并有凹陷的头盔作为证据。

如果您真的想玩得开心，请查看CPAN 上可用的 Perl [Regexp::Assemble模块。](http://search.cpan.org/~dland/Regexp-Assemble-0.35/Assemble.pm)使用它，加上[List::Permutor](https://metacpan.org/module/List::Permutor)，我们可以生成更复杂的模式。在像这样的简单字符串上，它不会节省太多空间，但在长字符串或所需命中的大型数组上，它可以产生巨大的差异。不幸的是，Ruby 没有这样的东西，但是可以使用单词或单词数组编写一个简单的 Perl 脚本，并让它生成正则表达式并将其传回：

```
use List::Permutor;
use Regexp::Assemble;

my $regex_assembler = Regexp::Assemble->new;
my $perm = new List::Permutor split('', 'act');
while (my @set = $perm->next) {
    $regex_assembler->add(join('', @set));
}
print $regex_assembler->re, "\n";
(?-xism:(?:a(?:ct|tc)|c(?:at|ta)|t(?:ac|ca))) 
```

有关在 Ruby中使用 Regexp::Assemble 的更多信息，请参阅“[在 Ruby 中执行数百个文本替换的有效方法吗？ ”。](https://stackoverflow.com/questions/5395236/is-there-an-efficient-way-to-perform-hundreds-of-text-substitutions-in-ruby/5395777#5395777)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-25T05:18:34.053

毫无疑问 - 使用正/负前瞻和反向引用的正则表达式很巧妙，但如果你只处理三个字符，我会通过像@scones 建议的那样显式枚举字符排列来避免冗长。

```
"act".split('').permutation.map(&:join)
=> ["act", "atc", "cat", "cta", "tac", "tca"] 
```

如果你真的需要一个正则表达式来扫描一个更大的字符串，你总是可以：

```
Regexp.union "act".split('').permutation.map(&:join)
=> /\b(act|atc|cat|cta|tac|tca)\b/ 
```

显然，如果您的搜索字符串增长，此策略不会扩展，但在我看来，这样更容易观察代码的意图。

**编辑**`cata`：根据@theTinMan 的反馈为误报添加了单词边界。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-25T01:07:47.653

我将在这里假设几件事：-您正在寻找给定字符的排列-您正在使用 ruby

```
str = "act"
permutations = str.split(//).permutation.map{|p| p.join("")}

# and for the actual test
permutations.include?("cat") 
```

虽然它不是正则表达式。

# android - 无法从 double 转换为 float

> ID：14513597
> 
> 赞同：14
> 
> 时间：2013-01-25T00:52:43.433
> 
> 标签：android, integer, division

在我的数据库中，我有几个“真实”字段。

继承人的结构：

```
 database.execSQL("create table " + TABLE_LOGS + " (" 
            + COLUMN_ID + " integer primary key autoincrement," 
            + COLUMN_ID_DAY_EXERCISE + " integer not null,"
            + COLUMN_REPS + " integer not null"
            + COLUMN_WEIGHT + " real not null"
            + COLUMN_1RM + " real not null"
            + COLUMN_DATE + " integer not null"
            + ")"); 
```

现在我要做的是计算 1RM 以便我可以将其插入数据库。

到目前为止，这是我的功能：

```
public void createLog(long id_day_exercise, float reps, long weight) {

    // create 1rm
    // create date timestamp

    float onerm = weight/(1.0278-(.0278*reps));
    long unixTime = System.currentTimeMillis() / 1000L;
} 
```

我被困在这里。它给了我错误“无法从双精度转换为浮点数” `onerm`。我尝试通过在它前面使用 (Float) 将重量转换为浮点数，我尝试使用 weight.floatValue() 并且似乎没有任何效果。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-01-25T00:57:00.170

你试过这个吗？

```
float onerm = (float) (weigth/(1.0278-(.0278*reps))); 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2014-11-02T00:19:35.673

这种方法怎么样？

```
Float.valueOf(String.valueOf(your_double_variable)); 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2017-01-31T08:40:00.240

从 double 转换为 float 可以这样完成：

```
double d = 1.2;
float f = (float) d; 
```

或者，如果您只需要以`1.2`浮点数开头，则使用`1.2f`.

**笔记**

*   `float`是单精度 32 位和`double`双精度 64 位，因此在转换中可能会丢失精度。请参阅[原始数据类型文档](https://docs.oracle.com/javase/tutorial/java/nutsandbolts/datatypes.html)。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-08-12T20:01:54.660

在我的情况下，你有一个`Double`变量，你可以`Double.floatValue()`这样调用：

```
Double deg = 45.0d;
float floatDeg = deg.floatValue(); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-01-25T01:03:52.013

问题是该`double`类型的精度高于`float`. 进行该分配时，您将丢失信息。这就是编译器不允许你这样做的原因。这类似于当你想做`char b = a`where a is an时发生的事情`int`。

使用显式转换可能允许您进行编译，但可能会发生数据/精度损失。

编辑：

由于在您的原始问题中，计算的所有输入都是`floats`，因此请使用浮点文字。例如，`1.0278`是一个双字面量。即附加`f`到常量，以便所有计算都是浮点数并且不提升为双精度数：

```
float onerm = weight/(1.0278f-(.0278f*reps)); 
```

# xml - 查找子节点的值

> ID：14513601
> 
> 赞同：3
> 
> 时间：2013-01-25T00:53:12.177
> 
> 标签：xml, perl, xml-parsing, xml-libxml

好的，这是一个非常初级的问题，但我是 Perl 的新手，老实说，我似乎无法在任何地方找到答案，即使我确信它会非常简单。

假设我有以下 XML 模式：

```
<root>
    <parentNode status="Good">
        <A>
            <B>
                <value><![CDATA[This is my value]]</value>
            </B>
        </A>
    </parentNode>
</root> 
```

假设将有多个具有不同状态的父节点。

我正在尝试编写一个脚本，该脚本将为我提供状态不是“好”的父节点的每个值节点的内容

使用以下代码，我已经能够成功获得正确的父节点：

```
my $parser = XML::LibXML->new();
my $tree = $parser->parse_file($xml_file);
my $root = $tree->getDocumentElement;
my @records = $root->findnodes("//parentNode");
foreach my $node (@records) {
    my $resultAtt = $node->getAttribute('status');
    next if $resultAtt ne "Good"; 
```

但是当我尝试时：

```
my $val = $node->findvalue("value"); 
```

我什么都得不到。

此外，我真的只对“这是我的价值”部分感兴趣。当您读取该值时，CDATA 是否会影响它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T01:45:30.987

您的 XPath 需要是隐式的。

而不是使用 :`my $val = $node->findvalue("value");` 你应该使用：`$val = $node->findvalue('./A/B/value');`

你应该成功了:D

复制您的代码（并将 CDATA 修复为具有右尖括号）并改用上面的代码片段：

```
$ ./test2.pl 
Found the value: This is my value
$ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T03:13:39.767

XPath

```
value 
```

简称

```
child::value 
```

这意味着寻找一个名为的节点`value`，它是上下文节点的子节点。如果你想搜索一个后代，你想要

```
descendant::value 
```

这意味着人们写成

```
.//value 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-02T16:38:26.323

通过制作适当的 XPath 表达式来查找`value`您想要的元素，这变得非常简单

```
use strict;
use warnings;

use XML::LibXML;

my $xml = XML::LibXML->load_xml(IO => \*DATA);

for my $value ($xml->findnodes('/root/parentNode[@status != "Good"]//value') ) {

  print $value->textContent, "\n";
}

__DATA__
<root>
    <parentNode status="Good">
        <A>
            <B>
                <value><![CDATA[This is my value]]></value>
            </B>
        </A>
    </parentNode>
    <parentNode status="Not Good">
        <A>
            <B>
                <value><![CDATA[This is another value]]></value>
            </B>
        </A>
    </parentNode>
</root> 
```

### 输出

```
This is another value 
```

# c# - 在单个解决方案中处理多个项目中的公共类

> ID：14513602
> 
> 赞同：2
> 
> 时间：2013-01-25T00:53:12.800
> 
> 标签：c#, visual-studio-2010

我目前在我的解决方案中有两个项目，分别是项目 A 和项目 B。现在项目 A 和 B 都使用相似的类，并且在每个项目中都可以找到每个类的副本。我想知道是否有更好的方法来完成这项任务。我想在某个地方有一个类，并让两个项目都从那里访问公共类。推荐的方法是什么。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-25T00:55:24.883

1.  在同一解决方案中创建第三个项目 C。
2.  将您的共享课程添加到 C.
3.  在项目 A 和 B 中引用 C。（为此：在*解决方案资源管理器*中，右键单击项目 A 和 B 中的引用，单击*Add Reference* *，*单击选项卡*Projects*，然后选择 Project C，单击*OK*）
****   不要忘记添加正确的`using`命名空间以使用项目 A 和 B 中的类。***

 ***或者只是让您在项目 A 或 B 中共享类，并在另一个项目中添加对该项目的引用（这取决于内容，但这样做会在项目 A 和 B 之间创建一种不对称）。***

# django - 有没有办法自定义模型字段的默认模板输出？

> ID：14513604
> 
> 赞同：2
> 
> 时间：2013-01-25T00:53:33.797
> 
> 标签：django

我的模型：

```
class StackOverflowQuestion(models.Model):
     published_date = models.DateTimeField(...) 
```

模板1.html：

```
{% load mytagsandfilters %}

{{ question.published_date|show_date_the_way_management_wants_it:"D d M Y" }} 
```

template2.html (...与 template1.html 基本相同)

```
{% load mytagsandfilters %}

{{ another_question.published_date|show_date_the_way_management_wants_it:"D d M Y" }} 
```

**我的目标：我想删除模板过滤器的使用，因为它在两个地方重复。**

这会给我留下更清洁的东西：

模板1.html

```
{% load mytagsandfilters %}

{{ question.published_date }} 
```

模板2.html

```
{% load mytagsandfilters %}   

{{ another_question.published_date }} 
```

所以...

问：有没有办法覆盖 StackOverflowQuestion 模型类中的方法来做到这一点？或者可能是子类 models.DateTimeField 的一种方式来做到这一点？还是其他方式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T02:29:34.213

由于您不想在 settings.py 中自定义[DATE_FORMAT](https://docs.djangoproject.com/en/dev/ref/settings/#std:setting-DATE_FORMAT)，因此您仍然可以在表单级别执行操作。正如[这篇文章](https://stackoverflow.com/questions/1513502/django-how-to-format-a-datefields-date-representation)中提到的，[DateInput](https://docs.djangoproject.com/en/dev/ref/forms/widgets/#django.forms.DateInput)小部件应该可以解决问题。

# excel - Excel VBA On Error Resume Next，选项正确但仍未恢复

> ID：14513612
> 
> 赞同：0
> 
> 时间：2013-01-25T00:54:06.523
> 
> 标签：excel, error-handling, next, resume, vba

    我已经检查了 VBE 中的工具 > 选项 > 常规 > 错误捕获 - 我已将其设置为“类模块中断”和“未处理错误中断”，无论哪种方式它仍然会引发错误。在线抛出错误：

```
Set xlContacts = Workbooks(LocalContactsFilename) 
```

    它抛出一个错误，说下标超出范围，我知道这意味着在 Workbooks 集合中找不到索引，这个语句在这里是因为通常文件已经作为插件打开，所以我可以得到一个参考它通过这个声明。它应该在此错误上恢复，因为如果文件未打开，我会打开它。

    我注意到了一件奇怪的事情——即使这行代码没有访问任何远程文件或网络，它只会在我与网络断开连接时抛出这个错误。如果我在连接到网络时打开工作簿，则不会引发此错误。

    有谁之前经历过这个吗？当您的选项设置为仅在未处理的异常上停止但它仍然停止时？

```
Public Sub openContactsFile()
    On Error Resume Next
    Dim fso As New FileSystemObject
    Dim LocalContactsPath As String
    Dim LocalContactsFilename As String
    Dim LocalContactsShortFilename As String

    LocalContactsPath = wbMyCompanyWorkbook.Names("localContactsPath").RefersToRange.Value
    LocalContactsFilename = Mid(LocalContactsPath, (InStrRev(LocalContactsPath, "\") + 1))
    LocalContactsShortFilename = Mid(LocalContactsFilename, 1, (InStrRev(LocalContactsFilename, ".") - 1))

    'On Error Resume Next
    Application.ScreenUpdating = False

    If Not fso.FileExists(LocalContactsPath) Then
        If MsgBox("The contacts file is not available.  Click Yes to update the contacts now, or No to use the workbook without contact auto-fill capability.", vbYesNo, ThisWorkbook.NAME) = vbYes Then
            SyncContacts
        Else
            GoTo cancelParse
        End If
    End If
    If fso.FileExists(LocalContactsPath) Then
        On Error GoTo catch_no_remote_connection
        If fso.GetFile(LocalContactsPath).DateLastModified < fso.GetFile(wbMyCompanyWorkbook.Names("remoteContactsPath").RefersToRange.Value).DateLastModified Then
            If MsgBox("Your local contacts file appears to be out of date, would you like to download the latest contacts file?", vbYesNo Or vbQuestion, ThisWorkbook.NAME) = vbYes Then
                SyncContacts
            End If
        End If
catch_no_remote_connection:
        If Err.Number = 53 Then Err.CLEAR
        On Error Resume Next
        Set xlContacts = Workbooks(LocalContactsFilename)

        If xlContacts Is Nothing Then
            Set xlContacts = Workbooks.Open(LocalContactsPath, False, True)
        End If
        xlContacts.Sheets(1).Range("A1:CN2000").Sort Key1:=xlContacts.Sheets(1).Range("F2"), Order1:=xlAscending, Key2:=xlContacts.Sheets(1).Range("B2"), Order2:=xlAscending, Header:=xlYes, OrderCustom:=1, MatchCase:=False, Orientation:=xlTopToBottom, DataOption1:=xlSortNormal, DataOption2:=xlSortNormal
    End If

    'hide the contacts from view or editing
    On Error Resume Next
    If Not Workbooks(LocalContactsFilename) Is Nothing Then xlContacts.IsAddin = True
    Err.CLEAR
    On Error GoTo 0
cancelParse:
    Application.ScreenUpdating = True
    Exit Sub
End Sub 
```

提前感谢您对此的任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T01:48:12.223

我遇到了和你一样的问题（令人难以置信的令人沮丧，据我所知是莫名其妙的），但在不同的背景下。我发现最好的办法是找到解决方法。不要像你一样使用错误处理，而是使用它：

```
Dim wb As Workbook, _
    xlContacts As Workbook

For Each wb In Application.Workbooks
    If wb.Name = LocalContactsFilename Then
        Set xlContacts = wb
        Exit For
    End If
Next wb

If xlContacts Is Nothing Then
    Set xlContacts = Workbooks.Open(LocalContactsPath, False, True
End If 
```

我更愿意按照您的方式对其进行编码，但似乎别无选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T16:32:05.833

@TimWilliams
    感谢您的回答-我认为 Err.CLEAR 会重置错误处理，但事实并非如此。下面的代码无论是否连接到网络都能正常运行（我现在意识到这是问题的根源），问题是当它抛出文件未找到错误并转到catch_no_remote_connection时，没有恢复清除错误，所以我添加了这个来关闭错误处理块并重置处理程序：

```
 Resume post_err
post_err: 
```

 功能代码：

```
Public Sub openContactsFile()
    On Error Resume Next
    Dim fso As New FileSystemObject
    Dim LocalContactsPath As String
    Dim LocalContactsFilename As String
    Dim LocalContactsShortFilename As String

    LocalContactsPath = wbMyCompanyWorkbook.Names("localContactsPath").RefersToRange.Value
    LocalContactsFilename = Mid(LocalContactsPath, (InStrRev(LocalContactsPath, "\") + 1))
    LocalContactsShortFilename = Mid(LocalContactsFilename, 1, (InStrRev(LocalContactsFilename, ".") - 1))

    Application.ScreenUpdating = False

    If Not fso.FileExists(LocalContactsPath) Then
        If MsgBox("The contacts file is not available.  Click Yes to update the contacts now, or No to use the workbook without contact auto-fill capability.", vbYesNo, ThisWorkbook.NAME) = vbYes Then
            SyncContacts
        Else
            GoTo cancelParse
        End If
    End If
    If fso.FileExists(LocalContactsPath) Then
        On Error GoTo catch_no_remote_connection
        If fso.GetFile(LocalContactsPath).DateLastModified < fso.GetFile(wbMyCompanyWorkbook.Names("remoteContactsPath").RefersToRange.Value).DateLastModified Then
            If MsgBox("Your local contacts file appears to be out of date, would you like to download the latest contacts file?", vbYesNo Or vbQuestion, ThisWorkbook.NAME) = vbYes Then
                SyncContacts
            End If
        End If
catch_no_remote_connection:
        'there is no network connection, clear the error and resume from here
        Err.CLEAR
        Resume post_err
post_err:
        On Error Resume Next
        'get reference to the workbook if it is already open
        Set xlContacts = Workbooks(LocalContactsFilename)

        If xlContacts Is Nothing Then
            'the workbook was not open, open it
            Set xlContacts = Workbooks.Open(LocalContactsPath, False, True)
        End If
        'sort contacts by company, name
        xlContacts.Sheets(1).Range("A1:CN2000").Sort Key1:=xlContacts.Sheets(1).Range("F2"), Order1:=xlAscending, Key2:=xlContacts.Sheets(1).Range("B2"), Order2:=xlAscending, Header:=xlYes, OrderCustom:=1, MatchCase:=False, Orientation:=xlTopToBottom, DataOption1:=xlSortNormal, DataOption2:=xlSortNormal
    End If

    'hide the contacts from view or editing by setting the workbook as an Addin
    On Error Resume Next
    If Not Workbooks(LocalContactsFilename) Is Nothing Then xlContacts.IsAddin = True
    Err.CLEAR
    On Error GoTo 0
cancelParse:
    Application.ScreenUpdating = True
    Exit Sub
End Sub 
```

谢谢大家花时间看这个！

# java - 编写用于计算算术表达式的 Java 类

> ID：14513614
> 
> 赞同：0
> 
> 时间：2013-01-25T00:54:12.153
> 
> 标签：java

我必须用 Java 编写一个类，该类支持用 2 种方法表示算术表达式 - eval 和 toString 并使用以下黑盒：

```
Expression e = 
new Multiplication( 
    new Addition( 
        new Double(2.5), 
        new Double(3.5)), 
    new UnaryMinus( 
        new Integer(5))); 
System.out.println(e.eval());   // should print out -30.0 
System.out.println(e.toString());   // should print out ((2.5 + 3.5) * (-(5))) 
```

我该如何设计这样的课程？哪些工具？哪种设计模式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T01:02:57.150

您只需要适当地实施每个运营`toString`商`eval`。然后，在应用他们自己的部分之前，根据需要进行每个调用`toString`或对每个组件进行调用。`eval`

所以`Addition.eval()`会执行`return left.eval() + right.eval();`

同样，`Addition.toString()`将执行`return "(" + left.toString() + " + " + right.toString() + ")";`

为了实现这一点，您将使用 Rob 建议的[复合](http://en.wikipedia.org/wiki/Composite_pattern)模式接口来构建覆盖这些方法的适当类。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-28T15:21:20.520

希望这可以帮助

设置1：

```
public abstract class Expression
{
    public abstract decimal Evaluate();
    public abstract string toString();
} 
```

第2步：

```
public abstract class ValueNode:Expression
{
    public int intvalue;
    public decimal decvalue;
    public abstract decimal TEvaluate();
    public abstract string TtoString();

    public override decimal Evaluate()
    {
        return TEvaluate();
    }

    public override string toString()
    {
        return TtoString();
    }
} 
```

步骤 2.1：

```
public abstract class OperationNode:Expression
{
   public Expression left;
   public Expression right;
   public override decimal Evaluate()
    {
        return this.EEvaluate();
    }
    public override string toString()
    {
        return this.EtoString();
    }
    public abstract decimal EEvaluate();
    public abstract string EtoString(); 
```

}

第 3 步：

```
public class UnaryMinus:OperationNode
{
    public UnaryMinus(Expression Left)
     {
        this.left = Left;

    }
    public override decimal EEvaluate()
    {
        return -(this.left.Evaluate());
    }

    public override string EtoString()
    {
        return string.Format("(-({0}))",left.toString()); ;
    }

} 
```

第4步：

```
public class DecimalClass:ValueNode
{
    public DecimalClass(decimal decimalValue)
    {
        this.decvalue = decimalValue;
    }

    public override decimal TEvaluate()
    {
        return this.decvalue;
    }

    public override string TtoString()
    {
        return this.decvalue.ToString();
    }
} 
```

第 5 步：

```
public class Integer : ValueNode
{
    public Integer(int decimalValue)

    {
        this.intvalue = decimalValue;
    }

 public override decimal TEvaluate()

    {
        return this.intvalue;
    }

    public override string TtoString()

    {
        return this.intvalue.ToString();
    }
} 
```

第 6 步：

```
public  class Addition:OperationNode
 {

   public Addition(Expression Left, Expression Right)

    {
        this.left = Left;
        this.right = Right;
    }
    public override decimal EEvaluate()
    {
        return left.Evaluate()+ right.Evaluate();
    }
    public override string EtoString()
    {
        return string.Format("({0}+{1})",left.toString(),right.toString()); ;
    }
} 
```

第 7 步：

```
public class Multiplication : OperationNode

{
    public Multiplication(Expression Left, Expression Right)
    {
        this.left = Left;
        this.right = Right;
    }
    public override decimal EEvaluate()
    {
        return left.Evaluate()* right.Evaluate();
    }

    public override string EtoString()
    {
        return string.Format("({0}*{1})",left.toString(),right.toString()); ;
    }
} 
```

第 8 步：

```
public class Substraction:OperationNode
{
   public Substraction(Expression Left, Expression Right)
    {
        this.left = Left;
        this.right = Right;
    }
    public override decimal EEvaluate()
    {
        return left.Evaluate()- right.Evaluate();
    }

    public override string EtoString()
    {
        return string.Format("({0}-{1})",left.toString(),right.toString()); ;
    }
} 
```

第 9 步：

```
public  class Division: OperationNode
{
   public Division(Expression Left, Expression Right)
    {
        this.left = Left;
        this.right = Right;
    }
    public override decimal EEvaluate()
    {
        return left.Evaluate()/ right.Evaluate();
    }

    public override string EtoString()
    {
        return string.Format("({0}/{1})",left.toString(),right.toString()); ;
    }
} 
```

第 10 步：

```
class Program
{
    static void Main(string[] args)
    {

        callComposit();
        Console.ReadKey();
    }

    private static void callComposit()
    {
        //Expression ((2.5+3.5)*(-(5)))
        Multiplication multiplication = new Multiplication(new Addition(new DecimalClass(2.5m), new DecimalClass(3.5m)), new UnaryMinus(new Integer(5)));
        Console.WriteLine(string.Format("\r\n Expression {0} resulted in {1}", multiplication.toString(), multiplication.Evaluate()));

        //Expression (5/6)
        Division division = new Division(new Integer(5), new Integer(6));
        Console.WriteLine(string.Format("\r\n Expression {0} resulted in {1}", division.toString(), division.Evaluate()));
        //Expression ((2.5-3.5)*(-(5)))
        Multiplication multiplication2 = new Multiplication(new Substraction(new DecimalClass(2.5m), new DecimalClass(3.5m)), new UnaryMinus(new Integer(5)));
        Console.WriteLine(string.Format("\r\n Expression {0} resulted in {1}", multiplication2.toString(), multiplication2.Evaluate()));
        //Expression ((2.5/3.5)*(-(5)))
        Multiplication multiplication3 = new Multiplication(new Division(new DecimalClass(2.5m), new DecimalClass(3.5m)), new UnaryMinus(new Integer(5)));
        Console.WriteLine(string.Format("\r\n Expression {0} resulted in {1}", multiplication3.toString(), multiplication3.Evaluate()));

        //Expression ((2.5/3.5)*(-(5))* 3.5)
        Multiplication multiplication4 = new Multiplication(new Multiplication(new Division(new DecimalClass(2.5m), new DecimalClass(3.5m)), new UnaryMinus(new Integer(5))), new DecimalClass(3.5m));
        Console.WriteLine(string.Format("\r\n Expression {0} resulted in {1}", multiplication4.toString(), multiplication4.Evaluate()));

        //Expression ( 3.5*(2.5/3.5)*(-(5)))
        Multiplication multiplication5 = new Multiplication(new Multiplication(new DecimalClass(3.5m), new Division(new DecimalClass(2.5m), new DecimalClass(3.5m))), new UnaryMinus(new Integer(5)));
        Console.WriteLine(string.Format("\r\n Expression {0} resulted in {1}", multiplication5.toString(), multiplication5.Evaluate()));

        //Expression ( 3.5*(2.5/3.5)+ 3.5 *(-(5)))
        Multiplication multiplication6 = new Multiplication(new Addition(new Multiplication(new DecimalClass(3.5m), new Division(new DecimalClass(2.5m), new DecimalClass(3.5m))), new DecimalClass(3.5m)), new UnaryMinus(new Integer(5)));
        Console.WriteLine(string.Format("\r\n Expression {0} resulted in {1}", multiplication6.toString(), multiplication6.Evaluate()));
    }
} 
```

请评论是否需要做任何事情来比这种方式做得更好快乐编码

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-25T01:40:59.617

> 我该如何设计这样的课程？

好吧，在您获得的黑盒示例代码中有很多线索。

*   你需要一个`interface`（或者可能是一个`abstract class`）被调用`Expression`的有一个`eval`方法的。该`eval`方法需要返回某种数字类型——`Double`这是一个不错的选择，但还有其他选择。

*   您需要一些表达式类（实现或扩展表达式），例如`Multiplication`,`Addition`和`UnaryMinus`. 这些需要提供`eval`方法的实现。他们还需要*覆盖*默认`toString()`方法来打印表达式。

*   *表达式类还需要具有示例所暗示的*参数类型的构造函数。

要弄清楚如何处理这两个问题，需要一些思考

```
new Multiplication( 
    new Addition( 
        new Double(2.5), 
        new Double(3.5)), 
    new UnaryMinus( 
        new Integer(5))); 
```

和

```
new Multiplication( 
    new Double(2.5), 
    new Double(3.5)); 
```

...但那是你的工作。并通过自己解决来学习。（或者也许不打扰，因为严格来说，实现您向我们展示的示例并不是必需的。）

> 哪些工具？

不需要...除了 Java JDK 安装（显然）。使用您最喜欢/推荐的 Java IDE，或简单的文本编辑器和 JDK 命令行工具。

> 哪种设计模式？

不需要。只是一点“普通或花园品种”多态性。常规的 OO 类和接口。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-25T00:57:32.640

你需要一个`Expression`类，然后是 a`CompoundExpression`和 a `TerminalExpression`。这听起来像什么模式？[复合](http://en.wikipedia.org/wiki/Composite_pattern)。然后，您可以根据需要使用 Visitor 进行解析。

当您提供一种小语言时，无论是算术还是其他解释的命令集，都会有复合命令，例如表达式 4 + (5 * 2) 将被解析为多个命令并添加到 CompoundExpression，其中，当您调用 eval 时，它将遍历其表达式树以计算答案。（顺便说一句，设计模式对你有好处，学习它们会让你成为一个更好的程序员。）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-25T01:11:09.753

如果允许您稍微修改一下黑盒的使用，那么构建器模式可能是一个不错的方法。它可能看起来更像：

Builder builder = new MathBuilder(); 表达式 e = builder.add(new Double(2.5)).add(new Double(3.5).multiply(-5);

您必须弄清楚操作顺序的细节，但总的来说，这似乎是对模式的很好利用。快速搜索会找到很多例子。

# cassandra - 一致性级别对性能的影响

> ID：14513623
> 
> 赞同：2
> 
> 时间：2013-01-25T00:55:07.737
> 
> 标签：cassandra

当一致性级别为 ONE 与 LOCAL_QUORUM 时，是否有一个基准可以显示写入吞吐量的差异？在这两种情况下，RF 应该相同（例如 RF=3）？

PS 我对延迟不感兴趣，已经找到了很多关于延迟的文章，包括最终一致系统的可能性的度量。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T14:37:03.107

这样做的结果将是特定于案例的，因为这里有许多变量。这将是一个使用您的特定应用程序和环境进行设置的简单测试，因此我的建议是运行您自己的基准测试。

# javascript - jQuery 将数据发布到 servlet

> ID：14513624
> 
> 赞同：2
> 
> 时间：2013-01-25T00:55:10.583
> 
> 标签：javascript, jquery, xml, ajax, servlets

我在使用 jQuery 将数据从网页发布到 servlet 时遇到一些问题。虽然我是一位经验丰富的 Java 开发人员，但我对 javascript/jQuery/servlets 还是很陌生。我正在使用 Eclipse、Apache Tomcat 和 Chrome。

我有一个 XML 文件（大小从 6KB 到 30MB），我希望将其加载到浏览器中，进行修改，然后发布到 servlet。

我的 HTML 有：

```
<input id="filechooser" type="file" onchange="readFile()"> 
```

我的 JS 有：

```
var file = document.getElementById('filechooser').files[0];
var reader;
reader = new FileReader();
reader.readAsText(file, "UTF-8");
reader.onload = loaded;
function loaded(evt){
   var result = evt.target.result;
   var xml = $(result);
   ...
   [make modifications to xml]
} 
```

我在修改 xml 时使用的一些 jQuery 代码是`$(xml).find("NODE").val()`和`$(xml).find("OTHER_NODE").attr("attribute-name","newValue")`

我现在需要将该 xml 发布到一个 URL，它将用于处理一些信息。在 Chrome 控制台中，我可以查看 xml 对象的内容：

```
> xml
  [<!--?xml version="1.0" encoding="ISO-8859-1"?-->,#text,
   <root_element>...</root_element>]

> $(xml)
  [<!--?xml version="1.0" encoding="ISO-8859-1"?-->,#text,
   <root_element>...</root_element>]

> console.dir(xml)
  jQuery.fn.jQuery.init[3]
     0: #comment
     1: #text
     2: root_element
     length: 3
     __proto__: Object[0] 
```

到目前为止，我的 servlet 是空的：

```
protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
   System.out.println("Post");
} 
```

我创建了一个执行一些 javascript 的按钮。以下两个代码片段都发布到服务器：

```
$.post("http://localhost:8080/MyWebApp/MyWebAppUrl", xml); 
```

和：

```
$.ajax({
   type: "POST",
   url: "http://localhost:8080/MyWebApp/MyWebAppUrl",
   data: xml
}); 
```

我的问题是，我不知道我是否正确发送了我的 XML，或者如何正确使用它。我需要对我的 jQuery 代码做些什么才能正确发布它？如何从我的 HttpServletRequest 中获取它？如果我可以将 xml 文本作为字符串获取，我就确切地知道如何在 Java 中操作它，并让它做任何我想做的事情。

在网上搜索了 10 多个小时后，我仍然找不到答案。我确定它就在那里，但我似乎无法将这些点联系起来。

更新：

epascarello 因发布 XML 文档而脱颖而出。但是，我错误地解析了文档。

请注意，我读取了文件，然后存储了结果`var xml = $(result)`。该文件被读取为文本字符串，我将其转换为 HTML 文档。

我需要做的是`var xml = jQuery.parseXML(result)`。这样，我不必将其转换回文本字符串，并且标记大写保持不变。

请注意，保持大小写非常重要。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T01:01:52.127

设置内容类型

```
$.ajax({
   type: "POST",
   contentType: "application/xml",  //or text/xml?
   url: "http://localhost:8080/MyWebApp/MyWebAppUrl",
   data: xml
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T23:51:56.093

添加`processData: false`到您的通话中，它应该不理会字符串...

```
$.ajax({
   type: "POST",
   contentType: "application/xml",  //or text/xml?
   url: "http://localhost:8080/MyWebApp/MyWebAppUrl",
   data: xml,
   processData: false
}); 
```

# python - Python Image.crop 保存黑色图像

> ID：14513628
> 
> 赞同：1
> 
> 时间：2013-01-25T00:55:26.697
> 
> 标签：python, python-imaging-library

我正在尝试使用更大的背景图像为游戏制作图块并对其进行裁剪，但在保存前 17 张图像后，我开始遇到问题。第 18 张图像底部变黑，其余图像全黑。有什么想法吗？

这是我的代码。图像大小=(512, 512), 瓦片大小=(32, 32)

```
def __init__(self, path, imagesize, tilesize):
    self.tiles = dict()
    self.backimage = Image.open(path)
    self.backimage.resize(imagesize)
    self.x = imagesize[0]/tilesize[0]
    self.y = imagesize[1]/tilesize[1]
    currx = 0
    curry = 0
    for i in range(self.x):
        for j in range(self.y):
            tmp = path + str(i) + "_" + str(j) + ".png"
            self.tiles[(i, j)] = tmp
            image = self.backimage.crop((currx, curry, currx+tilesize[0], curry+tilesize[1]))
            image.save(tmp, "PNG")

            curry += tilesize[1]
        currx += tilesize[0] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T01:00:15.640

您不会在循环`curry`结束时重置。`j`它只是不断增加，直到超出范围。

# ruby - Ruby - 使用雾在现有 s3 文件的末尾附加内容

> ID：14513629
> 
> 赞同：6
> 
> 时间：2013-01-25T00:55:30.687
> 
> 标签：ruby, amazon-s3, fog

如何在 S3 中的现有或新创建的文件中附加文本。我正在使用`fog`，我有以下代码

```
require 'fog'
file    = "abc.csv"
bucket  = 'my_bucket'
storage = Fog::Storage.new(:provider => 'AWS', :aws_access_key_id => 'XXXXXXXX', :aws_secret_access_key => 'YYYYYYYY')
dir     = connection.directories.new(:key => bucket) # no harm, if this bucket already exists, if not create one
buffer  = ["big_chunk1", "big_chunk2", "big_chunk3", "big_chunk4", "big_chunk5"]

# I need help after this line. No changes above.
buffer.each do |chunk|
  # this will not work as it will not append text below the existing file or 
  # newly created one. I am not looking for solution suggesting, buffer.join('') 
  # and then write whole chunk at once. I have to write in chuck for some specific reason.
  # Also I dont want to first read existing data and then take in to memory
  # and then append and finally write back.
  dir.files.create(:key => file, :body => chunk, :public => false) 
end 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-25T10:08:01.700

上传到 S3 后，文件是不可变的 - 无法更改或附加。

如果您只是想以块的形式上传文件，则可以使用分段上传 api，（假设您的块少于 10000 个，并且除最后一个之外的所有块至少为 5MB），但是您可能需要降到雾请求级别（而不是像现在一样使用雾模型）。

# python - 熊猫：在时间戳上合并行

> ID：14513638
> 
> 赞同：0
> 
> 时间：2013-01-25T00:56:37.487
> 
> 标签：python, merge, pandas, rows

我的数据如下所示：

```
 date, cola, colb, colc
 1,10,,
 2,11,,
 3,12,,
 4,13,,
 1,,14,
 2,,15,
 3,,16,
 4,,17,
 1,,,17
 2,,,18
 3,,,19
 4,13,,20 
```

我想根据第一列合并行，并让输出如下所示：

```
 date, cola, colb, colc
 1,10,14,17
 2,11,15,18
 3,12,16,19
 4,13,17,20 
```

我不能保证不会有任何冲突，所以我希望能够选择最大值或平均值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T01:03:18.857

您可以使用`groupby`. 从`csv`带有重复项的 a 开始：

```
>>> !cat tomerge.csv
date, cola, colb, colc
1,10,,
2,11,,
1,,14,
2,,15,
1,,24,
2,,40,
1,,,17
2,,,18 
```

阅读它：

```
>>> df = pd.read_csv("tomerge.csv")
>>> df
   date   cola   colb   colc
0     1     10    NaN    NaN
1     2     11    NaN    NaN
2     1    NaN     14    NaN
3     2    NaN     15    NaN
4     1    NaN     24    NaN
5     2    NaN     40    NaN
6     1    NaN    NaN     17
7     2    NaN    NaN     18 
```

然后神奇的事情发生了：

```
>>> df.groupby("date").mean()
       cola   colb   colc
date                     
1        10   19.0     17
2        11   27.5     18
>>> df.groupby("date").max()
       cola   colb   colc
date                     
1        10     24     17
2        11     40     18 
```

# php - PHP CSV 导入问题

> ID：14513639
> 
> 赞同：1
> 
> 时间：2013-01-25T00:56:38.707
> 
> 标签：php, mysql, sql, csv

我正在将 CSV 文件导入数据库，这是一个多步骤的过程。

以下是步骤：

*   第 1 步：用户上传 CSV 文件。
*   第 2 步：用户将数据与数据类型相关联。例如，如果 CSV 中的记录包含以下数据：`John,Doe,jondoe@gmailcom`，用户将从下拉框中选择 firstname 以与数据值 John 关联，从下拉框中选择 lastname 与数据值 Doe 关联，并从下拉列表中选择 emailaddress与数据值 johndoe@gmail.com 关联的框
*   第三步：将数据插入数据库

我的问题如下：

1./ 在第 3 步，我将拥有用户选择的列和原始数据。

以下是原始数据的样子：

```
$data = array(
 0 => array('John','Doe','johndoe@gmail.com'),
 1 => array('Foo','Bar','foobar@gmail.com')
); 
```

这是我从第 2 步中选择的列的样子：

```
$columns = array('firstname','lastname','emailaddress') 
```

如何创建如下所示的 sql 查询：

`INSERT into contacts (id,firstname,lastname,emailaddress) values (null,'John','Doe','johndoe@gmailcom')`

如您所见，sql 查询按照它们在数组中的顺序选择列，然后是值。我在想，由于列是按数据的顺序选择的，我可以假设数据的顺序正确并且与该位置的特定列相关联（例如，我可以假设数据值' John' 与 columns 数组的第一个位置相关联，反之亦然）。

2./我在考虑一种可能的情况，当用户首次上传文件时，他们可能会发送一个 csv 文件，其中第一条记录有一个空白字段。问题是，我根据 csv 记录中的列数确定让用户与数据关联的列数。在这种情况下，我们有 2 列，每个后续记录都有 3 列。好吧，我不打算遍历整个记录集来确定正确的列数。我该如何解决这个问题？有任何想法吗？

编辑

我想我找到了问题 2 的答案。在解析 csv 文件时，我可以获得每条记录的计数，解析结束时的最高计数是我的计数。看起来对吗？有什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T01:08:33.830

要解析 CSV 文件中的数据，请查看 fgetcsv。[http://php.net/manual/en/function.fgetcsv.php](http://php.net/manual/en/function.fgetcsv.php)

它将从文件中加载一行并返回一个 CSV 字段数组。

```
$data = array();
while (($lineFields = fgetcsv($handle)) !== false) {
    $data[] = $lineFields;
} 
```

这假设您正在使用 PHP5 并使用 $handle 打开文件。在 PHP4 fgetcsv 需要第二个参数来读取最大行长度。

对于查询：

```
$sql = "INSERT into contacts (id," + implode(',', $columns) + ") values"; 
```

我没有在值之后包含任何内容。您应该创建准备好的语句以防止 sql 注入。此外，如果您使用的是 MySQL，id 应该是一个自动增量字段，并且在插入时省略（让 MySQL 生成它）。如果您使用 Postgres，则需要为 id 字段创建一个序列。无论如何，让数据库为您生成 id。

# c - 切换到c后陷入循环

> ID：14513643
> 
> 赞同：1
> 
> 时间：2013-01-25T00:56:48.360
> 
> 标签：c

```
while (1)
{
    c = getchar();

    switch(state)
    {
      case 0:
          if((GPIO_ReadInputDataBit(GPIOA,GPIO_Pin_0) == Bit_SET))
          {
              state=1;
          }

          if ( c=='p')
          {
              state = 2;
          }
          break;

      case 1 :
          if((GPIO_ReadInputDataBit(GPIOA,GPIO_Pin_0) != Bit_SET))
          {
              state = 0;
          }
          break;

      case 2:
          iprintf("%s",led_name_arr[i]);
          if (c=='r')
          {
              state=0;
          }
          break;

    }
} 
```

我想打印 printf 然后达到 state2 .. 这怎么能实现。下面是我尝试过的以及我被卡住的地方。

伪代码：

```
if ( c==P)
{
  printf(" hi");
  state 2;
} 
```

** 在这种情况下 printf 语句不会被执行 ** 或

```
case 2:
  iprintf("%s",led_name_arr[i]);
  if (c=='r')
  {
    state=0;
  }
  break; 
```

** 在这种情况下，printf 语句会循环打印 **

我不希望 while 循环停止，在连续循环中我希望 case 0 继续工作，但是当它获得输入 p .. 它暂停并执行 printf ... 并等到它得到 ar 以恢复 case 0 .. ..因此程序永远不会停止，而是等待“P”或“R”来执行每个案例......我希望我有意义

任何帮助将不胜感激 。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T01:10:46.937

你`break`的 s 打破了`switch ... case`not the `while`。您需要使用某种布尔标志来打破外循环，例如：

```
bool someflag = true;
while(someflag){

   switch(something){
      case a:
         someflag = false; // set the flag so we break out of the loop
         break;            // break out of the switch-case so we don't enter case b
      case b:
         // do something else
         break;
   }
} 
```

`-------- EDIT, because I misunderstood the question ------------`

我认为您的逻辑中需要一个额外的状态，现在（忽略状态 1），您有两种状态：

1.  等待 a `p`，当你得到一个时，转到 2。

2.  `printf`对于每个字符，直到你得到一个`r`，然后转到 1

你想要的是：

1.  等待 a `p`，当你得到一个时，转到 2。

2.  执行 a `printf`，然后转到 3。

3.  等待一个`r`，当你得到一个时，转到 1。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T03:17:32.713

我不确定你在问什么，但我很确定你想要的情况2是这样的：

```
case 2:
  iprintf("%s",led_name_arr[i]);
  while(c!='r')
  {
      c = getchar();
  }
  state=0;
  break; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-25T01:11:05.383

您已经使用无法退出的 while (1) 语句创建了一个无限循环。switch 中的 break 语句适用于 switch 语句，*而不是*while 循环。您需要在 switch 之外使用另一个 break 语句。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-25T05:15:27.847

因为你没有打破 while(1) 循环。对 while 循环再使用一个 break。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-25T01:11:42.747

好吧，将状态初始化为0

编译并运行程序

第一次进入 p // 这里 state =2

然后输入 r // 这里 state = 0

....由于 while(1) 继续循环

# c# - 在 ASP.NET MVC 3 中初始化一个空白 dbSet

> ID：14513653
> 
> 赞同：2
> 
> 时间：2013-01-25T00:57:59.010
> 
> 标签：c#, .net, asp.net-mvc-3, linq

我在语句中定义一个变量`if`，然后尝试在该语句的上下文之外使用该变量。如何`dbSet`在 if 语句之外初始化一个空的，以便`viewModel`可以看到/填充它？

这就是我想要完成的事情：

```
if (order.type.ToString() == "Rush")
{
    var filteredOrders = db.Orders.Where(a => a.rushID == order.rushID).ToList(); 
}
else if (order.type.ToString() == "Standard")
{
    var filteredOrders = db.Orders.Where(a => a.standardID == order.standardID).ToList();
}
else
{
    return HttpNotFound();
}

var viewModel = new OrderDetailsViewModel
{
    PastOrders = filteredOrders,  // filteredOrders doesn't exist here
    Order = order;
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T01:00:53.393

```
IEnumerable<Order> filteredOrders; // or IList<Order>, etc., as your prefer

switch (order.type.ToString())
{
    case "Rush":
        filteredOrders = db.Orders.Where(a => a.rushID == order.rushID).ToList();
    case "Standard":
        filteredOrders = db.Orders.Where(a => a.standardID == order.standardID).ToList();
    default::
        return HttpNotFound();
}

var viewModel = new OrderDetailsViewModel
{
    PastOrders = filteredOrders,
    Order = order;
}; 
```

* * *

或更好：

```
Func<Order, bool> filter;

switch (order.type.ToString())
{
    case "Rush":
        filter = a => a.rushID == order.rushID;
    case "Standard":
        filter = a => a.standardID == order.standardID;
    default::
        return HttpNotFound();
}

var viewModel = new OrderDetailsViewModel
{
    PastOrders = db.Orders.Where(filter).ToList(),
    Order = order;
}; 
```

# r - R for 循环中的 is.na() 不太了解

> ID：14513654
> 
> 赞同：-2
> 
> 时间：2013-01-25T00:57:58.637
> 
> 标签：r

我`is.na()`对 R 中 for 循环中的行为感到困惑。

我正在尝试创建一个函数来创建一个数字序列，对矩阵做一些事情，根据数字序列总结生成的矩阵，然后根据总结修改数字序列并重复。我制作了一个简单版本的函数，因为我认为它仍然解决了我的问题。

```
library(plyr)

test <- function(desired.iterations, max.iterations)
{
    rich.seq <- 4:34 ##make a sequence of numbers
    details.table <- matrix(nrow=length(rich.seq), ncol=1, dimnames=list(rich.seq)) 
    ##generate a table where the row names are those numbers
    print(details.table) ##that's what it looks like
    temp.results <- matrix(nrow=10, ncol=2, dimnames=list(1:10)) 
     ##generate some sample data to summarize and fill into details.table
    temp.results[,1] <- rep(5:6, 5)
    temp.results[,2] <- rnorm(10)
    print(temp.results) ##that's what it looks like
    details.table[,1][row.names(details.table) %in% count(temp.results[,1])$x] <- 
                                                       count(temp.results[,1])$freq  
    ##summarize, subset to the appropriate rows in details.table, and fill in the summary
    print(details.table)
    for (i in 1:max.iterations)
    {
       rich.seq <- rich.seq[details.table < desired.iterations | is.na(details.table)] 
        ## the idea would be to keep cutting this sequence of numbers down with 
        ##   successive iterations until the desired number of iterations per row in 
        ## details.table was reached. in other words, in the real code i'd do 
        ## something to details.table in the next line
        print(rich.seq)
    }
}

##call the function
test(desired.iterations=4, max.iterations=2) 
```

在第一次运行 for 循环时，rich.seq 看起来就像我期望的那样，其中 5 和 6 不再在序列中，因为两者都以超过 4 次迭代结束。然而，在第二次运行时，它吐出了一些意想不到的东西。

更新

感谢您的帮助，也很抱歉。在重新阅读了我的原始帖子之后，它不仅不太清楚，而且我还没有意识到 count 是 plyr 包的一部分，我在我的完整功能中调用了它，但没有在这里调用。我会尝试更好地解释。

我现在工作的是一个函数，它接受一个矩阵，随机化它（以多种不同的方式），然后计算一些统计数据。这些统计信息临时存储在一个表中——temp.results——其中 temp.results[,1] 是每列中非零元素的总和，而 temp.results[,2] 是不同的汇总统计信息柱子。我将这些结果保存到一个 csv 文件中（并在后续迭代中将它们附加到同一个文件中），因为循环遍历它和 rbinding 会占用大量内存。

问题是某些列总和 (temp.results[,1]) 的采样频率非常低。为了对这些进行充分采样，需要多次迭代，而生成的 .csv 文件将延伸到数百 GB。

我想要做的是在每次迭代时创建并更新一个表（details.table），以跟踪每列总和实际被采样的次数。当表中的给定元素达到desired.iterations 时，我希望将其从向量rich.seq 中排除，以便只有尚未收到desired.iterations 的列实际保存到csv 文件中。max.iterations 参数将在 break() 语句中使用，以防事情花费太长时间。

因此，我在示例案例中所期望的是对于两次迭代的 rich.seq 完全相同的行，因为我实际上并没有做任何改变它。我相信 flodel 绝对正确，因为我的问题在于比较长度比rich.seq 长的矩阵（details.table），导致意想不到的结果。但是，我不希望 details.table 的尺寸发生变化。当我在 for 循环中重新定义 rich.seq 时，也许我可以以某种方式解决实现 %in% 的问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T01:15:08.443

感谢弗洛德尔让我走上正轨。它与 is.na 无关，而是与我正在比较的向量的长度有关。

也就是说，我将 details.table 的初始值设置为零，以避免增加 is.na 语句的复杂性。

此代码有效，并且可以修改以执行我上面描述的操作。

图书馆（plyr）

```
test <- function(desired.iterations, max.iterations)
{
    rich.seq <- 4:34 ##make a sequence of numbers
    details.table <- matrix(nrow=length(rich.seq), ncol=1, dimnames=list(rich.seq)) ##generate a table where the row names are those numbers
    details.table[,1] <- 0
    print(details.table) ##that's what it looks like
    temp.results <- matrix(nrow=10, ncol=2, dimnames=list(1:10)) ##generate some sample data to summarize and fill into details.table
    temp.results[,1] <- rep(5:6, 5)
    temp.results[,2] <- rnorm(10)
    print(temp.results) ##that's what it looks like
    details.table[,1][row.names(details.table) %in% count(temp.results[,1])$x] <- count(temp.results[,1])$freq ##summarize, subset to the appropriate rows in details.table, and fill in the summary
    print(details.table)
    for (i in 1:max.iterations)
    {
        rich.seq <- row.names(details.table)[details.table[,1] < desired.iterations]
        print(rich.seq)
    }
} 
```

我没有尝试减少rich.seq，而是根据上一次迭代期间details.table 发生的任何情况重新定义它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T01:50:49.653

我同意你应该改进你的问题。但是，我想我可以发现出了什么问题。

你在循环`details.table`之前计算。它是一个与第一次初始化时`for`长度相同的矩阵（ ，即）。`rich.seq``length(4:34)``31`

在`for`循环内部，`details.table < desired.iterations | is.na(details.table)`是一个长度为的逻辑向量`31`。在第一次循环迭代中，

```
rich.seq <- rich.seq[details.table < desired.iterations | is.na(details.table)] 
```

将导致 的长度减少`rich.seq`。但是在第二次循环迭代中，除非`details.table`重新定义（不是这种情况），否则您试图`rich.seq`通过长度大于 的逻辑向量进行子集化`rich.seq`。这肯定会导致意想不到的结果。

您可能打算重新定义`details.table`为`for`循环的一部分。

（我也很惊讶你从未使用过`temp.results[,2]`。）

# javascript - Javascript拆分html内容

> ID：14513656
> 
> 赞同：1
> 
> 时间：2013-01-25T00:58:19.873
> 
> 标签：javascript, html, uiwebview, split, epub

我正在 IOS 上创建一个 ePub 阅读器。基本上，我使用 uiwebview 来加载 xhtml 文件。每次翻页，我需要用uiwebview加载文件然后调用javascript滚动到右边的偏移量。这是一个问题，一些 xhtml 文件很大（例如 > 2MB），加载时间太长。因此翻页动画不是那么流畅。所以我想我可以用 uiwebviewA 加载一次 xhtml，每次翻页时，我都会创建另一个 uiwebviewB 并从 uiwebviewA 获取所需的 html 内容（如第二页）。这样，我可以将 html 限制为小尺寸，并且翻页动画应该是流畅的。我的问题是是否有任何开源 javascript 库可以完成这项工作？任何意见表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T02:38:33.500

没有任何有意义的、定义明确的方法可以按照您描述的方式拆分 HTML 文档。您混淆了两件非常不同的事情：（1）将渲染拆分为页面大小的块，以及（2）拆分 HTML 源代码。换句话说，我可以想象没有一种算法可以将 HTML 文件拆分为多个片段，从而使渲染片段的顺序组合与原始 HTML 文件的渲染相同。换句话说，为了弄清楚如何拆分 HTML，假设它甚至是可能的，您必须完成渲染页面所涉及的大部分或全部工作，这将破坏整个目的。

您应该放弃拆分 HTML 的想法。电子书阅读器基本上都是通过一次渲染整个 HTML 文档来进行分页的，然后“加窗”、“剪辑”和“偏移”，或者在某些情况下，使用 CSS 区域。

如果我了解您要做什么，我可以想到几种选择。

1.  通过在工作流程的早期预拆分它们来减小输入 HTML 文件的大小。例如，在我知道的一个项目中，源 (X)HTML 文件有一些额外的标记，可以告诉预处理器在需要时将它们拆分为单独的文件，在这种情况下，这对于不使用的电子书阅读器来说是一种解决方法'不正确地尊重 CSS`page-break-*`属性。

2.  将下一页的渲染预计算为图形并将其用于翻页。

3.  如前所述，重新考虑为书中的每一页重新加载整个 HTML 文档的架构。如果仅仅是翻页效果导致您想要这样做，那么就放弃它们。

4.  考虑到许多电子书阅读器提供不需要分页的滚动模式，而有些（例如 Himawari Reader）**仅**提供 滚动模式，这实际上是一些读者喜欢的东西。您可以推出滚动版本，然后在版本 2 中进行分页。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-03T07:53:17.087

你真的应该检查一下：

[http://cubiq.org/swipeview](http://cubiq.org/swipeview)

这个演示完全符合您的要求：

[http://cubiq.org/dropbox/SwipeView/demo/ereader/](http://cubiq.org/dropbox/SwipeView/demo/ereader/)

它需要一个文本（书）并将文本分页以适合屏幕大小。

我在 Android 和 iOS 中测试了演示，效果很好！！

# checkbox - 选中/取消选中动态填充/取消填充 Textarea

> ID：14513658
> 
> 赞同：0
> 
> 时间：2013-01-25T00:58:47.270
> 
> 标签：checkbox, textarea

我正在尝试使用复选框用某些文本填充文本区域；但是，当未选中该复选框时，我希望删除填充的文本。我试过这个：

```
$('input:checkbox').click(function(){
var tb = "#"+$(this).attr('rel');
if($(this).is(":checked"))
$(tb).append(this.name + "\n"); 
else($(this).not(":checked"))
$(tb).remove(this.name + "\n");
}); 
```

无济于事。哈普？

编辑
**向前**迈出一大步...我已经想出如何重新设计脚本以**几乎**完全满足我的需要。我将上面的内容更改为：

```
$('input:checkbox').click(function(){
var tb = "#"+$(this).attr('rel');
if($(this).is(":checked"))
$(tb).append(this.name + "\n")
else($(tb).empty(this.name + "\n"))
}); 
```

我现在唯一的问题是，当我取消选中一个复选框时，它会清除文本框中的**所有**文本，而我只希望它清除与未选中复选框相对应的**特定文本。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T01:26:50.033

试试下面的代码，它会帮助你....

```
<html xmlns="http://www.w3.org/1999/xhtml" >
    <head>
        <title></title>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js"></script>                     

<script type="text/javascript">
    $(document).ready(function() {
$("input[type=checkbox]").click(function() {
    if ($(this).is(':checked'))
    $('#purchased').html($('#purchased').val() + $(this).attr('name') + "\n");
else
{
    var text = $('#purchased').val();
    text = text.replace($(this).attr('name') + "\n" ,"");
    $('#purchased').html(text);
}
  });
});
</script>
</head>
<body>
<textarea id="purchased" cols="25" rows="10"></textarea>
        <p>Pennsylvania State Standards, Subject 1: Reading, Writing, Speaking, and Listening</p>
        <ul>
            <li><input type="checkbox" rel="textbox" name="1.1\. Reading Independently">1.1\. Reading Independently</input></li>
            <li><input type="checkbox" rel="textbox" name="1.2\. Reading, Analyzing, and Interpreting Text">1.2\. Reading, Analyzing, and Interpreting Text</input></li>
            <li><input type="checkbox" rel="textbox" name="1.3\. Reading, Analyzing, and Interpreting Literature: Fiction and Non-Fiction">1.3\. Reading, Analyzing, and Interpreting Literature: Fiction and Non-Fiction</input></li>
            <li><input type="checkbox" rel="textbox" name="1.4\. Types of Writing">1.4\. Types of Writing</input></li>
            <li><input type="checkbox" rel="textbox" name="1.5\. Quality of Writing">1.5\. Quality of Writing</input></li>
            <li><input type="checkbox" rel="textbox" name="1.6\. Speaking and Listening">1.6\. Speaking and Listening</input></li>
            <li><input type="checkbox" rel="textbox" name="1.7\. Characteristics and Functions of the English Language">1.7\. Characteristics and Functions of the English Language</input></li>
            <li><input type="checkbox" rel="textbox" name="1.8\. Research">1.8\. Research</input></li>
            <li><input type="checkbox" rel="textbox" name="1.9\. Information, Communication, and Technology Literacy">1.9\. Information, Communication, and Technology Literacy</input></li>
        </ul>
</body>
</html> 
```

# xcode - NSLevelIndicator 在未突出显示时淡出

> ID：14513660
> 
> 赞同：1
> 
> 时间：2013-01-25T00:59:06.437
> 
> 标签：xcode, cocoa, nslevelindicator

当`NSLevelIndicator`（在星级评分模式下）与之交互时，它会在没有星星的地方显示占位符点。然而，一旦与 的相互作用`NSLevelIndicator`被抓住，这些点就会消失。这带来了明显的 UI 问题，因为用户不再意识到有一个`NSLevelIndicator`要与之交互。有什么办法可以强制指标持续高亮，让点不褪色？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-08T01:12:20.360

我在这里找到了答案：http: [//www.cocoabuilder.com/archive/cocoa/202167-rating-style-levelindicator-not-showing-dots.html](http://www.cocoabuilder.com/archive/cocoa/202167-rating-style-levelindicator-not-showing-dots.html)

基本上，控件的单元格需要将其“突出显示”属性设置为 YES 才能显示点。他们的解决方案包括继承 NSLevelIndicatorCell；我发现了一种似乎可以正常工作的更简单的方法，即在最初创建控件时将其单元格的突出显示设置为 YES，然后单击它并发送其操作消息。（您必须继续突出显示它，因为它在每次单击后由于某种原因失去了突出显示。）

# java - Thymeleaf：如何获取 URL 属性值

> ID：14513662
> 
> 赞同：27
> 
> 时间：2013-01-25T00:59:29.123
> 
> 标签：java, spring, templates, thymeleaf

我找不到使用 Thymeleaf 从 URL 获取属性的任何解决方案。例如，对于 URL：

```
somesite.com/login?error=true 
```

我需要获取“错误”属性值。我也在使用 SpringMVC，如果它有帮助的话。

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2013-01-25T01:43:08.997

经过一番调查，我发现这实际上是 Spring EL 问题。因此，空值检查的完整答案是：

```
<div id="errors" th:if="${(param.error != null) and (param.error[0] == 'true')}">
    Input is incorrect
</div> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-05-11T13:20:46.557

在 thymeleaf 中访问请求参数的另一种方法是使用实​​用`#httpServletRequest`程序对象，它可以直接访问`javax.servlet.http.HttpServletRequest`对象。

使用空值检查的示例用法如下所示，

```
<div th:text="${#httpServletRequest.getParameter('error')}" 
     th:unless="${#httpServletRequest.getParameter('error') == null}">
    Show some error msg
</div> 
```

`request.getParameter("error");`这与在 java 中的操作相同。

资料来源：[Thymeleaf 文档](http://www.thymeleaf.org/doc/articles/springmvcaccessdata.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-04-11T08:36:17.680

```
<a th:href="@{somesite.com/login(error = ${#httpServletRequest.getParameter('error')}"><a> 
```

这可能有效。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-08-05T09:57:20.100

我试过了，它对我有用：

```
<div th:if="${param.error !=null}" class="col-xs-12 form-group">

</div> 
```

# android - 无法安装 ActionBarSherlock：我跟随视频的前 5 分钟：http://youtu.be/4GJ6yY1lNNY

> ID：14513664
> 
> 赞同：2
> 
> 时间：2013-01-25T00:59:50.647
> 
> 标签：android, eclipse, actionbarsherlock

在我什至可以尝试使用 ActionBarSherlock 之前，我在 com.actionbarsherlock.widget 包中的每个项目中都有错误。

所有错误似乎都是类型 `"Context cannot be resolved to a type"`或 `"The method setOnClickListener(View.OnClickListener) in the type View is not applicable for the arguments (SuggestionsAdapter)"`

我花了几个小时在项目上尝试这个，阅读 stackoverflow 问题，阅读常见问题解答，我现在讨厌 Eclipse 和 ABS。

我敢肯定这是一件简单而愚蠢的事情。

任何人都可以帮忙吗？

注意：我可以通过导入来修复很多错误`android.util.[TheNameOfWhateverTypeCan'tBeResolved]`，这是我第一次做的，但它并没有解决所有问题，而且我尝试使用 ABS 的项目也不起作用。但是，我还没有读到其他人需要这样做，因此我猜我还缺少其他一些基本问题。

# javascript - jQuery 动画 scrollTop 与 requestAnimationFrame - 性能

> ID：14513666
> 
> 赞同：2
> 
> 时间：2013-01-25T01:00:18.347
> 
> 标签：javascript, jquery, performance, css, requestanimationframe

如果我有一个包含大量图像的页面，其中应用了很多 CSS 效果和 CSS 动画，我是否会通过循环使用与使用 jQuery 以编程方式将页面滚动到某个点“x”来获得`window.scrollTo`性能`requestAnimationFrame`提升`$("html").animate({ scrollTop: "x" })`？

Tl;DR — rAF +`window.scrollto()`与`.animate({scrollTop: "x"})`性能

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T03:05:40.177

`window.scrollTo()`更快，因为它是原生 JavaScript。对 jQuery 的任何调用都比较慢，因为两者都`$()`将`.animate()`（可能）比单个`window.scrollTo()`调用花费更多时间。没有时间使用也很浪费，`.animate({scrollTop ...`因为你可以只使用`$("html").scrollTop()`. 无论如何，`window.scrollTo()`应该比这更快，并且具有跨浏览器兼容的优势。如果您不打算为滚动设置动画，我会说使用它。

*免责声明：*您可能不会看到太大的性能差异。

# iphone - UIImagePickerControllerDidCancel 后 UINavigationBar 上移？

> ID：14513674
> 
> 赞同：3
> 
> 时间：2013-01-25T01:01:05.513
> 
> 标签：iphone, ios, ipad, uinavigationcontroller, uiimagepickercontroller

我有一个问题，我模态地从 UINavigationController 呈现 UIImagePickerController 并且用户按下取消而不是拍照。我从 UIImagePickerControllerDidCancel 回调中关闭视图，但是当我返回上一个视图时，整个视图（包括导航栏）向上移动了几个像素。另一件非常奇怪的事情是，当我在该视图上选择一个文本字段时，键盘部分显示在屏幕外。这只发生在我的 iPhone 上（我将它展示在 iPad 的弹出式控制器中，这没有问题）。

这是我的 didCancel 回调代码：

```
-(void)imagePickerControllerDidCancel:(UIImagePickerController *)picker
{
    if(UI_USER_INTERFACE_IDIOM()==UIUserInterfaceIdiomPad)
    {
        [popoverController dismissPopoverAnimated:YES];  
    }
    else//for iPhone
    {   
        [picker dismissViewControllerAnimated:YES completion:nil];    
    }
} 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T03:05:34.637

使用这一行：

```
[self dismissViewControllerAnimated:YES completion:nil]; 
```

代替这一行：

```
[picker dismissViewControllerAnimated:YES completion:nil]; 
```

# php - 如何将此 HTTP POST 数据包发送到网站？

> ID：14513676
> 
> 赞同：-1
> 
> 时间：2013-01-25T01:01:40.893
> 
> 标签：php

基本上，标题说明了这一点。我需要弄清楚如何将此 HTTP POST 请求发送到另一个网站。（这是我的朋友，所以我不拥有它）

```
 <html>
    <body>
            <form method="post">
                    <input type="hidden"
                    <?php
                            echo " value='";
                            for($i=0;$i<2147483648;$i++)
                                    {
                                            echo "a";
                                    }
                            echo "'";
                    ?>
                    >
                    <input type="submit">
            </form>
<?php if(isset($_POST['test'])){
    echo $_POST['test'];
}
?>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T01:23:28.947

目前，您的代码会创建一个小型网页。该网页使用 HTML`form`将数据发送到网站。

`<form>`您可以通过编辑标签来更改此数据的位置和方法。目前，它使用`post`（而不是`get`）并且没有目标网址。如果没有目的地，则它将数据发送给自己。`action`您可以使用该属性设置目的地，如下所示：

```
<form method="post" action="http://example.com/pagename"> 
```

完成后，在浏览器中查看此页面。您应该看到一个按钮。单击它后，它将将数据发布到`action`设置的任何位置。

**编辑**

看起来您正试图向该服务器发送大量数据。仅使用 HTML 表单可能无法按预期工作。

另一种方法是使用`cURL`. 允许您在 PHP 页面的代码中`cURL`创建数据。将一个大文件（如电影或其他东西）带到您朋友的服务器`POST`可能更实用，如下所示：`POST`

```
<?php 
//  Code from http://forums.devshed.com/php-development-5/php-curl-send-a-file-533233.html

//  write the path to your file here:
$filename = 'C:/myenormousfile.avi';

//  write the url to your friend's site here:
$url = 'http://example.com/filename';

$file_to_upload = array('file_contents'=>'@' . $filename); 
$ch = curl_init(); 
curl_setopt($ch, CURLOPT_URL,$url); 
curl_setopt($ch, CURLOPT_POST,1); 
curl_setopt($ch, CURLOPT_POSTFIELDS, $file_to_upload); 
$result=curl_exec ($ch); 
curl_close ($ch); 
echo $result; 
?> 
```

将其保存到`.php`文件中，并通过本地主机查看文件。如果它工作正常，那么它会尝试`POST`将文件发送到您朋友的站点。然后它将显示指示上传是否成功的文本。

**编辑#2**

这可能是一种更简单的方法。它是一个 HTML 网页，因此您唯一需要做的就是将此代码保存到一个`.html`文件中，然后在任何浏览器中查看它：您不需要对`PHP`Web 服务器做任何事情。该页面将让您选择一个文件（同样，您应该使用它来选择一个大文件），并将其发布到您朋友的网站。该文件的大小最大可达 ~4 GB。您可以更改元素的`action`属性以将文件发送到不同的位置。`<form>`

```
<!doctype html>
<html>
<head><title>Pick a File and POST it to your Friend&apos;s Server</title></head>
<body>
<form action="http://www.example.com/pagename" method="post" enctype="multipart/form-data">
<input type="hidden" name="MAX_FILE_SIZE" value="5000000" />
<input type="file" name="uploadField" />
<input type="submit" value="Go" />
</form>
</body>
</html> 
```

将其粘贴到文件中，另存为`post.html`，然后在 Windows 资源管理器中查看该文件。然后右键单击该文件并使用浏览器打开它。您应该会看到一个“浏览...”按钮和一个显示“开始”的按钮。使用“浏览...”选择一个巨大的文件，然后单击“开始”看看会发生什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T01:51:12.963

正如@Chris所提到的

如果无法重定向到此 URL，则可以使用完整路径并使用目标

```
<form method="post" action="http://example.com/pagename" target="myIframe">

<iframe name="myIframe" style="display:none"></iframe> 
```

**已编辑**

![在此处输入图像描述](../Images/93265fb55a3386017fe3c06e7926b27b.png)

此图像说明了两种解决方案

# javascript - jQuery：幻灯片动画走得很远，然后“跳”到正确的高度

> ID：14513681
> 
> 赞同：0
> 
> 时间：2013-01-25T01:02:12.443
> 
> 标签：javascript, html, css

我已经看到了一些关于类似问题的问题，但我还没有找到对我有意义的解决方案。问题出在 JSFiddle 上：http: [//jsfiddle.net/twchapman/EEXjR/2/](http://jsfiddle.net/twchapman/EEXjR/2/)

单击投资组合以查看行为。

我写的函数：

```
function changeTab(tab) {
    active = tab;
    $("#" + tab).slideDown(animspeed);
}

function change(tab) {
    if (tab == active) return;
    $("#" + active).slideUp(animspeed, function () {
        changeTab(tab);
    });
} 
```

我只使用 Chrome，但我很确定您会在任何浏览器上收到此错误：当页面加载时，它会将内容 div 向下滑动，然后单击链接（目前只有 Portfolio 实际有效）会滑动当前的 div 向上，然后正确的向下。

它几乎完全按预期工作，但有一个小问题：当动画开始时，div 的高度“跳跃”，并且在动画发生时它会瞬间变高，然后在完成时“跳跃”到正确的大小。

我发现的两种常见解决方案都建议了：1.为已经存在的div的样式添加宽度，以及2.在调用slide函数时更改它的height/margin参数。对我来说，第二种解决方案似乎没有必要，因为除了动画长度之外我没有提供任何选项。

我希望这只是我错过了一些东西并且很傻，而不是我做事方式的大问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T01:25:54.577

更新你的 js。

```
function change(tab) {
    if(tab == active) return false;
    console.log(tab);
    console.log(active);
    if($("#" + active).length){   //check element is exists.
       $("#" + active).slideUp(animspeed, function() {changeTab(tab)})
    }else{
    changeTab(tab);
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T03:14:48.933

问题来自填充，它有时会使 jQuery 动画抖动。一个快速解决您问题的方法是让您的 Js 保持不变，并为您的布局使用自然的盒子模型。

在你的CSS中只包括：

```
* { -webkit-box-sizing: border-box;
       -moz-box-sizing: border-box; 
            box-sizing: border-box; } 
```

我真的建议阅读[此](http://paulirish.com/2012/box-sizing-border-box-ftw/)Paul Irish 博客文章并将此代码包含在您的所有项目中。

这是一个工作演示：http: [//jsfiddle.net/gleezer/EEXjR/3/](http://jsfiddle.net/gleezer/EEXjR/3/)

# cocoa - 比较位于不同时区的两个 NSDate

> ID：14513685
> 
> 赞同：0
> 
> 时间：2013-01-25T01:02:26.197
> 
> 标签：cocoa, timezone, nsdate

我有两个日期，一个在 UTC 时区，另一个在新西兰。我需要比较一个日期是否大于另一个日期。

我该怎么做呢？我需要先将它们转换为相同的时区吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T01:04:03.430

不，您可以将它们与 NSDate 比较函数进行比较，该函数返回升序/降序（有点疯狂的语义，但有效）。

[如何比较两个 NSDate：哪个是最近的？](https://stackoverflow.com/questions/5965044/how-to-compare-two-nsdates-which-is-more-recent)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-25T01:49:39.783

`NSDate`s 没有时区。它们代表时间的绝对时刻。只要你`NSDate`正确地制作了 s —— 即，如果你通过 s 创建它们`NSDateFormatter`，*它*就有一个需要设置的时区——你可以直接比较它们。

# python - matplotlib 底图强制北向上

> ID：14513691
> 
> 赞同：1
> 
> 时间：2013-01-25T01:03:18.193
> 
> 标签：python, matplotlib, matplotlib-basemap

我正在使用方位角等距投影绘制火星北极附近一段的高程数据，这就是它的外观，如果北方向上，我会更喜欢它！ ![随着北下](../Images/e753c56b187f7f490d9b8f8d0da36048.png)

[这就是我的做法，我在 matplotlib.basemap 网站（ http://matplotlib.org/basemap/users/index.html](http://matplotlib.org/basemap/users/index.html) ）上找不到任何建议解决方案的东西，所以任何想法都将不胜感激. 谢谢。

```
# FYI, 'array' is a 200x1000 numpy array containing the elevation values
# Latitude and Longitude are 200x1 and 1000x1 arrays respectively, 
#          containing the Latitude and Longitude
# minlat, minlon, maxlat, maxlon, midlat, midlon are the minimum,
#          middle and maximum values in Latitude and Longitude.
# C_Earth is 678.1e3m, Basemap doesn't know I'm looking at Mars.    

# Set up size of map
scope = maxlon-minlon
Circ = C_Earth*np.cos((180./np.pi)*minlat)
width = 1.8*Circ*(scope/360.)

# Prepare Map
m = Basemap(width=width, height=width, projection='aeqd', lat_0=midlat, lon_0=midlon)

# Automated thing to choose appropriate parallels & meridians
division_lon = [30, 10, 5, 2, 1, 0.5, 0.1]
parallels, i = [], 0
while len(parallels) < 4:
    minlatline = 80
    while minlatline > np.floor(minlat):
        minlatline -= division_lon[i]
    parallels = np.arange(minlatline, maxlat, division_lon[i])
    i += 1
meridians, i = [], 0
while len(meridians) < 4:
    minlonline = 360
    while minlonline > np.floor(minlon):
        minlonline -= division_lon[i]
    meridians = np.arange(minlonline, maxlon+division_lon[i], division_lon[i])
    i += 1
m.drawparallels(parallels, labels=[True,False,False,False])
m.drawmeridians(meridians, labels=[False,False,False,True])

# make up a regular lat/lon grid.
lons, lats = np.meshgrid(Longitude, Latitude)
# compute native map projection coordinates of lat/lon grid.
x, y = m(lons, lats)
# contour data over the map.
masked_array = np.ma.array(array, mask=np.isnan(array))
cs = m.pcolormesh(x,y,masked_array)
cb = plt.colorbar(orientation='horizontal', aspect=40)
cb.set_label('Elevation [m]') 
```

# jquery - jQuery移动与当前目标锚位置相邻的框

> ID：14513694
> 
> 赞同：3
> 
> 时间：2013-01-25T01:03:29.070
> 
> 标签：jquery, anchor, dom-traversal

在此页面上 > [http://canvas.clickbump.com/example/](http://canvas.clickbump.com/example/)

我有一个浮动的“目录”框，其中包含针对页面上几个隐藏锚元素的超链接：

```
<a id="anchor1">This is anchor 1</a> 
```

和

```
<a id="anchor2">This is anchor 2</a> 
```

盒子的标记：

```
<details class="cb-toc" open="open">
    <summary>Table of Contents</summary>
    <ol>
        <li><a href="#top">GoTo Top</a></li>
        <li><a href="#anchor1">GoTo Anchor 1</a></li>
        <li><a href="#anchor2">GoTo Anchor 2</a></li>
    </ol>
</details> 
```

我正在尝试使用下面的 jQuery 脚本来绑定对 TOC 链接的点击，以便它将浮动框移动到与目标锚点相邻的位置。然而，它的成功或失败。在锚点上单击两次以将框移动到正确的位置。

这是我正在使用的 jQuery：

```
jQuery('.cb-toc a').on('click',foo);
function foo(){
    jQuery('a:target').after(jQuery('.cb-toc'));
} 
```

有什么想法可以让它在每次第一次点击时将框移动到正确的位置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T01:19:16.177

当您的点击处理程序运行时，新目标尚未设置，之后会发生。这就是为什么 TOC 总是将自己定位在前一个目标旁边（两次单击同一链接后工作正常）。

您可以使用`setTimeout()`延迟执行 TOC 放置，或者监听`onhashchange`浏览器设置新目标时触发的事件。或者您可以简单地放弃该`:target`方法并自己找到正确的锚点，例如：

```
function foo() {
     //hash will be something like #top
     var hash = this.hash;

     //wait, it looks like an ID selector :)
     jQuery(hash).after(jQuery('.cb-toc'));
} 
```

[jsFiddle 演示](http://jsfiddle.net/7e662/)

可能需要完成一些工作，因此该`hash`变量在每个浏览器 ( `#whatever`) 中始终保持正确的值，因此此示例不是生产就绪代码，只是一个说明。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-25T01:28:10.577

手动选择正确的锚点：

```
jQuery('.cb-toc a').click(function(e){
    var str = jQuery(this).attr('href');
    jQuery(str).after(jQuery('.cb-toc'));
} 
```

# java - 在java中创建一个url字符串来获取一个favicon

> ID：14513695
> 
> 赞同：5
> 
> 时间：2013-01-25T01:03:37.163
> 
> 标签：java, android, favicon

我正在尝试使用以下方法从网站获取网站图标。我试图避免 // 问题并决定使用 URL 对象。

```
 public static Bitmap getBitmapFromURL(URL src) {
        try {
            URL url = src;
            HttpURLConnection connection = (HttpURLConnection) url.openConnection();
            connection.setDoInput(true);
            connection.connect();
            InputStream input = connection.getInputStream();
            Bitmap myBitmap = BitmapFactory.decodeStream(input);
            return myBitmap;
        } catch (IOException e) {
            e.printStackTrace();
            return null;
        }
    } 
```

我在跑步

```
Bitmap faviconBitmap = getBitmapFromURL(new URL("http", "www"+url, "/favicon.ico")); 
```

我的网址设置为：`url = imdb.com`

但我失败并收到以下错误：

```
01-24 20:01:33.702: W/System.err(8678): java.io.IOException: Illegal character in authority at index 22: http://www.nytimes.com
01-24 20:01:33.702: W/System.err(8678): /favicon.ico 
```

对于如何解决这个问题，有任何的建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T01:11:10.673

看起来您`url`在“nytimes.com”之后的末尾有换行符或其他字符。

# sony - Small Apps API - 应用程序可以在小应用程序和主应用程序之间传输数据吗？

> ID：14513696
> 
> 赞同：1
> 
> 时间：2013-01-25T01:03:38.387
> 
> 标签：sony

我试图了解修改为小应用程序（Sony SDK API）的主应用程序与作为普通 android 应用程序运行的应用程序之间的数据传输。那可能吗。他们会使用相同的进程 ID，还是我们需要使用一些两者都可以访问的公共存储？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T18:18:19.167

如果您要为现有应用程序添加小应用程序支持，则基本上就像添加小部件一样。小应用程序和“主应用程序”之间的数据传输是完全可能的，因为它们实际上来自同一个服务/进程。

# c# - 从 HttpContext 获取自定义 IPrincipal 时强制转换无效

> ID：14513700
> 
> 赞同：0
> 
> 时间：2013-01-25T01:04:07.053
> 
> 标签：c#, forms-authentication, .net, iprincipal

在研究 FormsAuthentication 几天后，我决定在 FormsAuth cookie 的 UserData 属性中存储一个序列化对象，并为 HttpContext.Current.User 使用自定义 IPrincipal 对象。

我发现的大多数指南都说将 IPrincipal 对象转换为您的对象。不过，我每次都会得到一个无效的演员表异常。我究竟做错了什么？

**我的用户数据**

```
public class MyUserData
{
    public long UserId { get; set; }
    public string Username { get; set; }
    public bool IsSuperUser { get; set; }
    public string UnitCode { get; set; }
    public string EmailAddress { get; set; }
    public List<string> Roles { get; set; }

    // Serialize    
    public override string ToString()
    {
        JavaScriptSerializer serializer = new JavaScriptSerializer();
        string result = serializer.Serialize(this);
        return result;
    }

    // Deserialize
    public static MyUserData FromString(string text)
    {
        JavaScriptSerializer serializer = new JavaScriptSerializer();
        return serializer.Deserialize<MyUserData>(text);
    }
} 
```

**CustomPlatformPrincipal**

```
public class MyCustomPrincipal : IPrincipal
{
    public MyUserData MyUserData { get; set; }
    public IIdentity Identity { get; private set; }

    public MyCustomPrincipal(MyUserData myUserData)
    {
        MyUserData = myUserData;
        Identity = new GenericIdentity(myUserData.Username);
    }

    public bool IsInRole(string role)
    {
        return MyUserData.Roles.Contains(role);
    }
} 
```

**全球.asax.cs**

```
protected void Application_AuthenticateRequest(Object sender, EventArgs e)
    {
        HttpCookie authCookie = Context.Request.Cookies[FormsAuthentication.FormsCookieName];
        if (authCookie == null || authCookie.Value == "")
        {
            return;
        }

        FormsAuthenticationTicket authTicket;
        try
        {
            authTicket = FormsAuthentication.Decrypt(authCookie.Value);
        }
        catch
        {
            return;
        }

        if (Context.User != null)
        {
            // the from string deserializes the data
            MyUserData myUserData = MyUserData.FromString(authTicket.UserData);
            Context.User = new MyCustomPrincipal(myUserData);
        }
    } 
```

**我的页面**

```
var myUserData = ((MyCustomPrincipal)(HttpContext.Current.User)).MyUserData;
// invalid cast exception (can't cast IPrincipal to MyCustomPrincipal) 
```

第一篇文章如下： http: [//primaryobjects.com/CMS/Article147.aspx](http://primaryobjects.com/CMS/Article147.aspx)

所以似乎我可以获得数据的唯一方法是解密 auth cookie，然后反序列化 authCookie 的 userData 字符串。

有什么建议么？

**更新**

尝试遵循关于这个 SO 问题的建议：[在 MVC 中实现自定义身份和 IPrincipal](https://stackoverflow.com/questions/1884030/implementing-a-custom-identity-and-iprincipal-in-mvc?rq=1)

代码如下，但它不起作用。

```
[Serializable]
public class MyCustomPrincipal : IPrincipal, ISerializable
{
    public CustomUserData CustomUserData { get; set; }
    public IIdentity Identity { get; private set; }

    //public MyCustomPrincipal (IIdentity identity) { Identity = identity; }

    public MyCustomPrincipal(CustomUserData customUserData)
    {
        CustomUserData = customUserData;
        Identity = new GenericIdentity(customUserData.Username);
    }

    public bool IsInRole(string role)
    {
        return PlatformUserData.Roles.Contains(role);
    }

    public void GetObjectData(SerializationInfo info, StreamingContext context)
    {
        if (context.State == StreamingContextStates.CrossAppDomain)
        {
            MyCustomPrincipal principal = new MyCustomPrincipal (this.CustomUserData );
            info.SetType(principal.GetType());

            System.Reflection.MemberInfo[] serializableMembers;
            object[] serializableValues;

            serializableMembers = FormatterServices.GetSerializableMembers(principal.GetType());
            serializableValues = FormatterServices.GetObjectData(principal, serializableMembers);

            for (int i = 0; i < serializableMembers.Length; i++)
            {
                info.AddValue(serializableMembers[i].Name, serializableValues[i]);
            }
        }
        else
        {
            throw new InvalidOperationException("Serialization not supported");
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T02:12:43.397

你是在调试模式下运行的吗？您可以在 HttpContext.Current.User 上设置断点，您将看到当时用户的类型。而且从您的 Application_AuthenticateRequest 方法中，不能保证 User 将是您的预期类型。在达到您的自定义类型设置之前，有许多退出点。甚至这段代码：Context.User != null。你的期望是错误的。我没有详细介绍 Context.User，但是，就您的上下文而言，您期望 Context.User 是您的自定义用户。所以有效的检查应该是：

```
var custom = Context.Current as MyCustomPrinciple;
if(custom == null)
{
// Your construct code here.
} 
```

我强烈的建议是：你需要进入调试模式，看看到底发生了什么。

# c# - 以编程方式更改 Excel 中的宏文本

> ID：14513710
> 
> 赞同：3
> 
> 时间：2013-01-25T01:05:23.437
> 
> 标签：c#, excel, npoi, vba

我有大约数千个 Excel（xls，旧格式）文件分布在硬盘驱动器上的许多文件夹中。这些文件具有连接到数据库的相同宏。并且宏包含连接字符串。宏受密码保护，但幸运的是我知道密码。

**问题：在所有文件中的宏中更改连接字符串的最佳方法是什么？**

我有使用[NPOI](http://npoi.codeplex.com/)创建/修改 xls 文件的经验。我见过互操作库解锁受密码保护的 Word 文件并进行一些编辑。但我从未见过以编程方式更改 Excel 文件中的宏文本的示例。这甚至可能吗？

ps 我写代码没有问题。问题在于选择正确的工具。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T02:19:10.707

您可能希望使用以下代码作为起点。此代码使用 COM 互操作来提取 VBA 脚本并执行查找替换。我用一个非常基本的脚本在一个受密码保护的电子表格上进行了尝试，它运行良好。诚然，它是基本的，但您可能能够提取您需要的东西。

```
string filename = "Test.xls";
string password = "password";

Excel._Application app = new Excel.Application();
Excel._Workbook workbook = app.Workbooks.Open(Filename: filename, Password: password);

if (workbook.HasVBProject)
{
    VBProject project = workbook.VBProject;

    foreach (VBComponent component in project.VBComponents)
    {
        if (component.Type == vbext_ComponentType.vbext_ct_StdModule ||
            component.Type == vbext_ComponentType.vbext_ct_ClassModule)
        {
            CodeModule module = component.CodeModule;

            string[] lines =
                module.get_Lines(1, module.CountOfLines).Split(
                    new string[] { "\r\n" },
                    StringSplitOptions.RemoveEmptyEntries);

            for (int i = 0; i < lines.Length; i++)
            {
                if (lines[i].Contains("A1"))
                {
                    lines[i] = lines[i].Replace("A1", "D1");
                    module.ReplaceLine(i + 1, lines[i]);
                }
            }
        }
    }
}

workbook.Save();
workbook.Close();
app.Quit(); 
```

# python - 奇怪的 Python 3 错误

> ID：14513711
> 
> 赞同：-2
> 
> 时间：2013-01-25T01:05:32.433
> 
> 标签：python, debugging, python-3.x

所以我正在用 Python 写一个 shell，文件名是`jsh.py`. 当我运行代码时，由于某种原因它不起作用。弹出一个窗口，但立即关闭。我的代码有什么问题？

```
import os
import random
import time
import path
import string
import sys

commandAvail = 'ls where chdir mk mkdir cp mv rm rmdir view ext shutdown edit unix dos man-all man-unix man-dos'
commandAvailUnix = 'exec permission group'
commandAvailDos = ' '
print('Welcome to jsh alpha 1!')
commandPlatform = input('System: (UNIX/DOS):')
commandLine()

def commandLine():
        while 1 == 1:
                command = input('$ ')
                if command in commandAvail:
                        if command.startswith('ls'):
                                commandKeyword = 'ls'
                                commandOptions = command - commandKeyword
                                ls(commandOptions)
                        elif command.startswith('where'):
                                commandKeyword = 'where'
                                commandOptions = command - commandKeyword
                                where()
                        elif command.startswith('chdir'):
                                commandKeyword = 'chdir'
                                commandOptions = command - commandKeyword
                                chdir()
                        elif command.startswith('mk'):
                                commandKeyword = 'mk'
                                commandOptions = command - commandKeyword
                                mk()
                        elif command.startswith('mkdir'):
                                commandKeyword = 'mkdir'
                                commandOptions = command - commandKeyword
                                mkdir()
                        elif command.startswith('cp'):
                                commandKeyword = 'cp'
                                commandOptions = command - commandKeyword
                                cp()
                        elif command.startswith('mv'):
                                commandKeyword = 'mv'
                                commandOptions = command - commandKeyword
                                mv()
                        elif command.startswith('rm'):
                                commandKeyword = 'rm'
                                commandOptions = command - commandKeyword
                                rm()
                        elif command.startswith('rmdir'):
                                commandKeyword = 'rmdir'
                                commandOptions = command - commandKeyword
                                rm()
                        elif command.startswith('view'):
                                commandKeyword = 'view'
                                commandOptions = command - commandKeyword
                                rm()
                        elif command.startswith('edit'):
                                commandKeyword = 'edit'
                                commandOptions = command - commandKeyword
                                edit()
                        elif command == 'man-all':
                                print('Commands that work for all underlying platforms:')
                                print(commandAvail)
                        elif command == 'man-unix':
                                print('Commands that only work on Unix systems:')
                                print(commandAvailUnix)
                        elif command == 'man-dos'
                                print('Commands that only work on DOS systems:')
                                print(commandAvailDos)
                        elif command.startswith('unix'):
                                commandType = 'unix'
                                unix()
                        elif command.startswith('dos'):
                                commandType = 'dos'
                                dos()
                        elif command.startswith('ext'):
                                commandKeyword = 'ext'
                                commandOptions = command - commandKeyword
                                ext()
                        elif command == 'shutdown':
                                sys.quit(0)
                        else:
                                print('jsh has experienced an internal error and has to shutdown.')
                                sys.quit(10)
                else:
                        print('Command \'' + command + '\' not recognized as internal or external.')

def ls(options):
        if commandPlatform == 'UNIX':
                os.system('ls' + options)
        else:
                os.system('dir' + options)
        commandLine() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T05:49:45.670

你忘了在 elif command == 'man-dos' 之后加上 ':'

只需运行：python3 yourscript 即可进行调试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T05:50:00.563

您当前的代码中有几个错误：

1.  首先，您有一些混乱的缩进，包括用于缩进的制表符和空格的混合。这在 Python 中非常糟糕，因为不正确的缩进是语法错误。我已修复问题中的代码以正确显示（每个选项卡使用 8 个空格），但您也需要在文件中修复它。另外，请注意 Python 约定是每个块缩进四个空格，因此您可能希望将编辑器设置为默认执行此操作。

2.  其次，您的顶级检查的逻辑不正确。您正在测试整个命令字符串是否包含在`commandAvail`变量中的命令字符串中。如果命令除了命令名之外还有参数，这将做错事。我建议您`split`使用命令字符串来获取术语列表，然后仅针对可用命令测试第一个术语。我建议不要进行子字符串搜索，而是拆分`commandAvail`为一组字符串：

    ```
    # make a set of commands that we recognize
    commandAvail = set('ls where chdir mk mkdir cp'.split()) # trimmed for space

    # then later, test against it
    command = input().split()
    if command[0] in commandAvail: # this is much more efficient!
        # do stuff 
    ```

3.  最后，您尝试从命令字符串中删除命令本身的方式是错误的。你不能从另一个字符串中减去一个字符串（`TypeError`如果你尝试，你会得到一个）。幸运的是，我为上一期建议的解决方案在这里会有所帮助。由于`split`调用，您将获得一个术语列表，而不是进行字符串操作。现在，您只需针对第一项（命令）进行测试，并将其余的作为参数传递。

    实际上，这表明实现比您当前拥有的`if`/块的大链要简单得多。`elif`使用字典在命令字符串和实现它们的函数之间进行映射：

    ```
    # map command names to the functions that implement them
    command_dict = {"ls":ls, "where":where, "chdir":chdir} # snipped

    # the main loop
    while True:
        # command is first term, the rest go into args
        command, *args = input().split()

        try: # use "easier to ask forgiveness than permission" idiom
            command_dict[command](*args) # call function from command_dict
        except KeyError:
            print("Unknown command: {}".format(command)) 
    ```

# visual-studio-2008 - 如何将 Visual Studio 2008 连接到 Team Foundation Service 和 Visual Studio Online？

> ID：14513713
> 
> 赞同：20
> 
> 时间：2013-01-25T01:05:38.970
> 
> 标签：visual-studio-2008, tfs, azure-devops, visual-studio-2008-sp1

我已确保我已涵盖所有先决条件，然后尝试从此处安装补丁：

*   [Visual Studio 2008 SP1 兼容性 GDR for Visual Studio 2012 Team Foundation Server 和 Team Foundation Service Preview](http://www.microsoft.com/en-us/download/details.aspx?id=29983)

当我这样做时，我最终会收到以下消息：

![在此处输入图像描述](../Images/641be369e5cdcdf03588e676f5a4a38c.png)

好的 - 所以，相信也许我已经安装了涵盖更新的软件，我尝试将我的 TFS 预览服务器添加到 Visual Studio 2008 Team Explorer（设置与我在 VS 2012 中的设置相匹配）：

![在此处输入图像描述](../Images/a39a44f48fa879a2ba97ac3d4e9dbb04.png)

这会尝试连接 30 - 60 秒，然后退出并显示以下错误消息：

![在此处输入图像描述](../Images/9fcecaa176d812e6c0c0190340b16c4a.png)

我究竟做错了什么？从阅读其他博客文章看来，VS 2010 和 VS 2008 都支持 Team Foundation Service。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-01-25T02:18:55.483

Visual Studio 2010 引入了项目集合的概念，因此层次结构如下所示：

```
Server - Project Collection A - Project A
                              - Project B
       - Project Collection B - Project C
                              - Project D
                              - Project E 
```

在 TFS 2005 和 2008 中，项目集合不存在，因此层次结构如下所示：

```
Server - Project A
       - Project B
       - Project C 
```

由于此更改，您需要将 Visual Studio 2008 和 2005 指向项目集合而不是服务器。他们认为每个 ProjectCollection 都是它自己的服务器。

因此，当从旧版本的 Visual Studio 连接到 2010 或更新版本的 TFS 时，您需要在连接到服务器窗口中使用 projectcollection uri，如下所示：

> `https://yourtfsname.visualstudio.com/DefaultCollection/` `http://yourtfsname.yourdomain.com:8080/tfs/DefaultCollection/`

为了连接 Visual Studio 2005 或 2008，您还需要确保安装了正确的前向兼容性补丁。[这篇博文涵盖了 Visual Studio 和 Team Foundation 服务器的所有版本，并准确列出了您需要安装哪些补丁以及安装它们的](http://blog.jessehouwing.nl/2013/10/connecting-to-tfs-from-any-version-of.html)顺序（顺序很重要！）。

Visual Studio、TFS 和 Windows 的版本会影响要安装的确切文件集，它们都列在提到的博文中。

# python - 在 Python 中不使用全局变量跟踪递归调用的次数

> ID：14513717
> 
> 赞同：7
> 
> 时间：2013-01-25T01:06:25.690
> 
> 标签：python, recursion

如何在不使用 Python 中的全局变量的情况下跟踪递归调用的数量。例如，如何修改以下函数来跟踪调用次数？

```
def f(n):
    if n == 1:
        return 1
    else:
        return n * f(n-1)

print f(5) 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-25T01:14:24.407

这是一个不使用全局的巧妙技巧：您可以将计数器隐藏在函数本身中。

```
def f(n):
    f.count += 1
    if n == 1:
        return 1
    else:
        return n * f(n-1) 
```

之后：

```
>>> f.count = 0 # initialize the counter
>>> f(5)
120
>>> f.count
5
>>> f(30)
265252859812191058636308480000000L
>>> f.count
35 
```

无论如何，这将处理“所有呼叫”的情况。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-25T01:12:51.593

正如 delnan 所说，如果你想要所有调用，那么*没有*全局是不可能的，所以我假设你只想要调用*depth*，你只需要添加一个返回值

```
def f(n):
    if n == 1:
        return 1,0
    else:
        x, call_depth= f(n-1)
        return n * x, call_depth+1 
```

如果您正在处理几个递归调用，您可以做一个`max(call_depth1, call_depth2)`（最长调用树的深度）或只是将两者相加（实际调用的总数）

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-01-25T01:33:15.137

此方法将为您提供函数运行的*总*次数：

```
def f(n):
    if hasattr(f,"count"):
        f.count += 1
    else:
        f.count = 1
    if n == 1:
        return 1
    else:
        return n * f(n-1) 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-01-25T03:06:17.773

这是一种使用堆栈而不是全局变量的方法。如图所示，它记录了对函数的调用次数，包括最初的调用次数，而不仅仅是函数对自身进行的递归调用次数。要做到这一点，只需将 移动到语句`ncalls += 1`的开头。`else`

```
def f(n, ncalls=0):
    ncalls += 1
    if n == 1:
        return 1, ncalls
    else:
        res, ncalls = f(n-1, ncalls)
        return n * res, ncalls

for n in xrange(1, 6):
    print 'f({}): {:4d} ({} calls)'.format(n, *f(n)) 
```

输出：

```
f(1):    1 (1 calls)
f(2):    2 (2 calls)
f(3):    6 (3 calls)
f(4):   24 (4 calls)
f(5):  120 (5 calls) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-25T01:11:13.137

您可以添加一个参数来保持调用计数（需要是可变的），它在函数开始时递增。

# php - php嵌套数组foreach或类似遍历二维数组

> ID：14513718
> 
> 赞同：-1
> 
> 时间：2013-01-25T01:06:37.830
> 
> 标签：php

我想如何遍历这个数组以在 html 列表中打印类似的内容（一个 foreach 或任何其他循环应该可以完成工作......）。我完全卡住了..！

```
Caballos  Soledad'
    'Paseo a caballo' 
...........
...........
...........
Rancho Valle
     'Camping'
    'Paseo a caballo' 

array (size=10)
  40 => 
    array (size=2)
      'proveedor' => string 'Caballos Soledad' (length=26)
      'servicio' => 
        array (size=1)
          0 => string 'Paseo a caballo' (length=15)
  41 => 
    array (size=2)
      'proveedor' => string 'Caballos Segundo' (length=25)
      'servicio' => 
        array (size=1)
          0 => string 'Paseo a caballo' (length=15)
  64 => 
    array (size=2)
      'proveedor' => string 'Cerro' (length=10)
      'servicio' => 
        array (size=1)
          0 => string 'Camping' (length=7)
  39 => 
    array (size=2)
      'proveedor' => string 'Caballos Nieto' (length=19)
      'servicio' => 
        array (size=1)
          0 => string 'Paseo a caballo' (length=15)
  174 => 
    array (size=2)
      'proveedor' => string 'Hacienda' (length=21)
      'servicio' => 
        array (size=2)
          0 => string 'Paseo a caballo' (length=15)
          1 => string 'Camping' (length=7)
  49 => 
    array (size=2)
      'proveedor' => string 'Campo ' (length=10)
      'servicio' => 
        array (size=1)
          0 => string 'Camping' (length=7)
  241 => 
    array (size=2)
      'proveedor' => string 'Lodge' (length=12)
      'servicio' => 
        array (size=1)
          0 => string 'Paseo a caballo' (length=15)
  258 => 
    array (size=2)
      'proveedor' => string 'Modesto' (length=14)
      'servicio' => 
        array (size=1)
          0 => string 'Paseo a caballo' (length=15)
  294 => 
    array (size=2)
      'proveedor' => string 'Rancho Valle ' (length=18)
      'servicio' => 
        array (size=2)
          0 => string 'Camping' (length=7)
          1 => string 'Paseo a caballo' (length=15)
  38 => 
    array (size=2)
      'proveedor' => string 'Caballos Jose ' (length=22)
      'servicio' => 
        array (size=1)
          0 => string 'Paseo a caballo' (length=15) 
```

我一直在寻找太久......但没有找到合适的方法来做到这一点。提前谢谢了

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T20:00:34.503

所以，我改变了我喜欢的格式

```
function my_print_r($array){

    foreach ($array as $key => $value){

        if (is_array($value)){
            echo '<ul>';
            my_print_r($value);
            echo '</ul>';
        }
        else echo '<li> ' . $value;

    }
      echo '</li>';
   // echo '</ul>';
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T01:14:17.270

```
function my_print_r($array){
    echo '<ul>';
    foreach ($array as $key => $value){
        echo '<li>' . $key;
        if (is_array($value)){
            my_print_r($value);
        }
        else echo ' : ' . $value;
        echo '</li>';
    }
    echo '</ul>';
} 
```

希望这会奏效，只需根据需要更改格式:)

# php - 将 IF 语句的内容放入下一个 IF 语句？

> ID：14513719
> 
> 赞同：0
> 
> 时间：2013-01-25T01:06:47.003
> 
> 标签：php, tcpdf

我试图将下面的第一个 IF 语句（一个[TCPDF 条形码](http://www.tcpdf.org/doc/code/classTCPDF.html#a4816d61822a4bad6e35bb441c1699aab)）放入下一个 IF 语句的内容中。这应该将条形码放在中断之前（标题键上方）。

每当`$content`在 内部调用时`$rset_html`，它都会在 IF 语句中显示指定的键。

```
if($key == 'field_cinfo_zip_1') {
    $rset_html .= $view->pdf->write1DBarcode('01234567094987654321-'.str_replace("-","",$content), 'IMB', '', '', '', 0.1, 0.01, $barstyle, '');
} 
```

如何将上面的这个 IF 语句放到`<CONTENTS OF IF STATEMENT ABOVE HERE>`下面？

```
if ($key == 'title'){
    $rset_html .= <CONTENTS OF IF STATEMENT ABOVE HERE>."<br>$content";
} 
```

虽然这看起来很基本，但我不知道这真的很容易。我可能必须弄清楚如何在不使用 IF 语句和 $rset_html 变量的情况下调用字段，但不知道如何做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T01:20:12.943

这会满足你的需要吗？

```
 if($key == 'field_cinfo_zip_1') {
        $rset_html .= $view->pdf->write1DBarcode('01234567094987654321-'.str_replace("-","",$content), 'IMB', '', '', '', 0.1, 0.01, $barstyle, '');
    } 

    if ($key == 'title'){
        $rset_html .= $rset_html."<br>$content";
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T09:12:56.487

更新：看起来图书馆必须更新。查看 PDF Drupal 模块带有旧版本的库。自从我更新了库后，就没有更多的 Adob​​e Reader 错误了。

# pdf - 在现有 PDF 中嵌入 TrueType 字体

> ID：14513720
> 
> 赞同：0
> 
> 时间：2013-01-25T01:06:50.917
> 
> 标签：pdf, printing, fonts

我知道由于许可限制等原因，Acrobat 不会这样做。

有谁知道任何程序只会在现有 PDF 中嵌入 True Type 字体（或使用嵌入字体打印到新 PDF 等）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T08:37:25.100

解释马克的答案：

[iText in Action — 第 2 版](http://itextpdf.com/book/)第 16 章中的示例[EmbedFontPostFacto.java](http://itextpdf.com/examples/iia.php?id=288) ( [EmbedFontPostFacto.cs](http://kuujinbo.info/iTextInAction2Ed/index.aspx?ch=Chapter16&ex=EmbedFontPostFacto) )展示了如何在现有 PDF 中嵌入给定的 True Type 字体。

但是请注意，这里做了某些假设，毕竟这只是一个例子。在概括通用 PDF 和字体的代码时，应更彻底地检查字体字典，嵌入字体文件可能需要更改稍有不同的条目。在这种情况下，让[规范 ISO 32000-1:2008](http://www.adobe.com/content/dam/Adobe/en/devnet/acrobat/pdfs/PDF32000_2008.pdf)（尤其是第 9 章*文本*）成为您的指南。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-01-25T08:18:15.817

我相信 Itext 允许您操作 PDF 文件中的字体

# git - 是否可以将 SVN 分支转换为新的 GIT 存储库？

> ID：14513723
> 
> 赞同：3
> 
> 时间：2013-01-25T01:07:12.120
> 
> 标签：git, svn, svn2git

我们的组织从未使用过 Trunk，只是为每个版本创建了新的 SVN 分支。是否可以简单地选择最近的分支，并为该分支创建一个新的 Git 存储库（带有历史记录）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T12:07:48.573

是的，您可以简单地选择从 SVN 存储库中仅克隆一个分支：

```
git svn clone http://svn.example.com/project/mostRecentBranch 
```

这将创建一个带有单个分支的 git 存储库，该分支代表 SVN 存储库中“mostRecentBranch”的历史记录。

`git svn`还将尝试包含分支创建之前的历史记录（即“mostRecentBranch”从中复制/创建的分支的历史记录）。但是，如果分支没有在 SVN 中正确创建（即，如果它不是使用“svn copy”创建的），这可能不起作用。

# ruby-on-rails - 乘客未显示某些图像 Rails 3.2.11

> ID：14513726
> 
> 赞同：0
> 
> 时间：2013-01-25T01:07:27.560
> 
> 标签：ruby-on-rails, apache, ubuntu, paperclip, passenger

好的，所以我在 CentOS 服务器上运行了 Ruby on Rails，它运行良好。目前正在尝试将相同的应用程序迁移到正在运行的 Ubuntu 服务器，除了一个特定的图像文件夹，我似乎无法弄清楚发生了什么。

我正在通过 Capistrano 进行部署，所以我正在部署到当前文件夹。这是我的 apache .conf 文件设置：

```
<Virtualhost *:80>
    ServerName myserver
   DocumentRoot  /var/www/folder/current/public
   <Directory /var/www/folder/current/public>
      Allow from all
      Options -Multiviews
   </Directory>
</VirtualHost> 
```

这些文件存在于我的应用程序中（在资产/供应商下）。在构建或预编译或部署期间，我没有收到任何错误。尝试在新服务器上提供文件时，我收到以下消息：

```
Started GET "/system/vendors/logos/000/000/002/original/filename.png?1354897276" for 68.188.46.74 at 2013-01-25 00:51:37 +0000

ActionController::RoutingError (No route matches [GET] "/system/vendors/logos/000/000/002/original/filename.png"):
  actionpack (3.2.11) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (3.2.11) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call' 
```

我已经尝试过权限更改，包括 777 tmp 文件夹（我通常不会这样做），只是想看看这是否会有所不同。

看起来系统资产管道文件夹在我的共享目录中，但我没有看到指向它的符号链接，就像我看到日志目录一样。所以我尝试创建一个指向它的符号链接，但没有做任何事情。

我不知所措。有什么建议么？

**编辑 1/25**

当我发布这个时，我没有注意到这是一个回形针上传的图像，这就是这些图像在系统路径中的原因。所以我通过模型中定义的 logo 属性中的视图调用它们，如下所示：

```
 has_attached_file :logo 
```

在我看来，我通过以下方式调用它：

```
 <%= image_tag(vendor.logo.url, :class => 'rounded'); %> 
```

同样，这适用于其他两台服务器，因此迁移正在清除影响它，我认为它可能与权限有关？

ImageMagick 安装在服务器上。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T01:53:23.147

这些文件没有被提供，因为 Rails 在环境中运行时不会提供来自`app/assets`,`lib/assets`或目录的文件。`vendor/assets``production`

该文件实际上应该位于`public`目录中，位于请求指定的路径中。通过将其放置在那里，您可以获得额外的好处，即文件将由运行Passenger (Apache/Nginx) 的Web 服务器提供服务，而不是Rails。这意味着请求将比 Rails 提供的请求快得多。

请确保您希望提供的所有静态文件都位于该`public`目录及其子目录中，以获得*最大速度*。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T21:32:28.513

所以[瑞安的回答](https://stackoverflow.com/a/14514104/1208166)是正确的，但我想我会填写整个细节，因为这可能对其他人有帮助。

我正在使用[Paperclip](https://github.com/thoughtbot)进行 Rails 上传，我不确定导致此问题的全部原因，但可能是 Rails 更新，但无论如何，我最终更改了以下设置以将它们移动到正确的文件夹中：

```
has_attached_file :logo, 
:path => ':rails_root/public/uploads/:attachment/:basename..:extension', 
:url => '/uploads/:basename.:extension' 
```

您可以遵循更多选项，但这符合我的需求。

所以现在我的文件最终在我的 /public/uploads 目录中，该目录正在运行。您必须手动移动已上传的所有文件。当您部署时，它们会在本地自动移动。

# javascript - JavaScript 无法在 Heroku Cedar 堆栈 Rails 应用程序上正确加载

> ID：14513731
> 
> 赞同：2
> 
> 时间：2013-01-25T01:07:47.807
> 
> 标签：javascript, ruby-on-rails, heroku, asset-pipeline

我遇到了与 SO post 概述的基本相同的问题：

[jQuery 脚本未在生产中加载（Heroku - 雪松堆栈）](https://stackoverflow.com/questions/12571026/jquery-script-not-loading-on-production-heroku-cedar-stack)

在开发环境中，我的 javascript 已正确内置到页面中：

```
<link type="text/css" rel="stylesheet" media="all" href="/assets/rails_admin/imports.css?body=1">
<link type="text/css" rel="stylesheet" media="all" href="/assets/rails_admin/rails_admin.css?body=1">
<script type="text/javascript" src="/assets/jquery.js?body=1">
<script type="text/javascript" src="/assets/jquery_ujs.js?body=1">
<script type="text/javascript" src="/assets/jquery.iframe-transport.js?body=1">
<script type="text/javascript" src="/assets/jquery.remotipart.js?body=1">
<script type="text/javascript" src="/assets/jquery.ui.effect.js?body=1">
<script type="text/javascript" src="/assets/jquery.ui.core.js?body=1">
<script type="text/javascript" src="/assets/jquery.ui.widget.js?body=1">
<script type="text/javascript" src="/assets/jquery.ui.mouse.js?body=1">
<script type="text/javascript" src="/assets/jquery.ui.sortable.js?body=1">
<script type="text/javascript" src="/assets/jquery.ui.position.js?body=1">
<script type="text/javascript" src="/assets/jquery.ui.menu.js?body=1">
<script type="text/javascript" src="/assets/jquery.ui.autocomplete.js?body=1">
<script type="text/javascript" src="/assets/jquery.ui.datepicker.js?body=1">
<script type="text/javascript" src="/assets/rails_admin/jquery.ui.timepicker.js?body=1">
<script type="text/javascript" src="/assets/rails_admin/ra.datetimepicker.js?body=1">
<script type="text/javascript" src="/assets/rails_admin/jquery.colorpicker.js?body=1">
<script type="text/javascript" src="/assets/rails_admin/ra.filter-box.js?body=1">
<script type="text/javascript" src="/assets/rails_admin/ra.filtering-multiselect.js?body=1">
<script type="text/javascript" src="/assets/rails_admin/ra.filtering-select.js?body=1">
<script type="text/javascript" src="/assets/rails_admin/ra.remote-form.js?body=1">
<script type="text/javascript" src="/assets/rails_admin/jquery.pjax.js?body=1">
<script type="text/javascript" src="/assets/jquery_nested_form.js?body=1">
<script type="text/javascript" src="/assets/rails_admin/ra.nested-form-hooks.js?body=1">
<script type="text/javascript" src="/assets/bootstrap-transition.js?body=1">
<script type="text/javascript" src="/assets/bootstrap-affix.js?body=1">
<script type="text/javascript" src="/assets/bootstrap-alert.js?body=1">
<script type="text/javascript" src="/assets/bootstrap-button.js?body=1">
<script type="text/javascript" src="/assets/bootstrap-carousel.js?body=1">
<script type="text/javascript" src="/assets/bootstrap-collapse.js?body=1">
<script type="text/javascript" src="/assets/bootstrap-dropdown.js?body=1">
<script type="text/javascript" src="/assets/bootstrap-modal.js?body=1">
<script type="text/javascript" src="/assets/bootstrap-scrollspy.js?body=1">
<script type="text/javascript" src="/assets/bootstrap-tab.js?body=1">
<script type="text/javascript" src="/assets/bootstrap-tooltip.js?body=1">
<script type="text/javascript" src="/assets/bootstrap-popover.js?body=1">
<script type="text/javascript" src="/assets/bootstrap-typeahead.js?body=1">
<script type="text/javascript" src="/assets/bootstrap.js?body=1">
<script type="text/javascript" src="/assets/rails_admin/ra.widgets.js?body=1">
<script type="text/javascript" src="/assets/rails_admin/ui.js?body=1">
<script type="text/javascript" src="/assets/rails_admin/themes/default/ui.js?body=1">
<script type="text/javascript" src="/assets/rails_admin/custom/ui.js?body=1">
<script type="text/javascript" src="/assets/rails_admin/rails_admin.js?body=1"> 
```

但是在 Heroku（Cedar 堆栈）上的生产中，它看起来像：

```
<html>
<head>
<meta content='text/html; charset=utf-8' http-equiv='Content-Type'>
<meta content='NONE,NOARCHIVE' name='robots'>
<meta content="authenticity_token" name="csrf-param" />
<meta content="mJAzj+IxBGxFd4vVR9EZKX9a0CL9zSugp5a13vcCOGY=" name="csrf-token" />
<link href="/assets/rails_admin/rails_admin-babb206bf505b710a7e6ec10b27d3190.css" media="all" rel="stylesheet" type="text/css" />
<script src="/assets/rails_admin/rails_admin-315877c5aae48e12a1abd274be846d08.js" type="text/javascript"></script>
</head> 
```

根据我的研究，似乎每个人都将预编译资产作为解决方案，但我尝试了数十种解决方案，但都没有解决问题。

在使用以下命令推送到 Heroku 之前，我尝试过预编译资产：

```
RAILS_ENV=production bundle exec rake assets:precompile 
```

但问题仍然出现

以下是一些相关文件：

宝石文件：

```
source 'https://rubygems.org'

gem 'rails', '3.2.11'

# Bundle edge Rails instead:
# gem 'rails', :git => 'git://github.com/rails/rails.git'

gem 'pg'
gem 'rails_admin'
gem 'cancan'
gem 'bootstrap-sass'
gem 'jquery-rails'
gem "devise"

group :development, :test do
   gem 'rspec-rails'
end

# Gems used only for assets and not required
# in production environments by default.
group :assets do
   gem 'sass-rails',   '~> 3.2.3'
   gem 'coffee-rails', '~> 3.2.1'
   gem 'uglifier', '>= 1.0.3'
   gem 'bootstrap-rails'
end 
```

应用程序.js

```
// This is a manifest file that'll be compiled into application.js, which will include all the files
// listed below.
//
// Any JavaScript/Coffee file within this directory, lib/assets/javascripts, vendor/assets/javascripts,
// or vendor/assets/javascripts of plugins, if any, can be referenced here using a relative path.
//
// It's not advisable to add code directly here, but if you do, it'll appear at the bottom of the
// the compiled file.
//
// WARNING: THE FIRST BLANK LINE MARKS THE END OF WHAT'S TO BE PROCESSED, ANY BLANK LINE SHOULD
// GO AFTER THE REQUIRES BELOW.
//
//= require jquery
//= require jquery_ujs
//= require_tree . 
```

应用程序.rb

```
require File.expand_path('../boot', __FILE__)

require 'rails/all'

if defined?(Bundler)
  # If you precompile assets before deploying to production, use this line
  Bundler.require(*Rails.groups(:assets => %w(development test)))
  # If you want your assets lazily compiled in production, use this line
  # Bundler.require(:default, :assets, Rails.env)
end

module MaterialsCalculatorApp
  class Application < Rails::Application
    # Settings in config/environments/* take precedence over those specified here.
    # Application configuration should go into files in config/initializers
    # -- all .rb files in that directory are automatically loaded.

    # Custom directories with classes and modules you want to be autoloadable.
    # config.autoload_paths += %W(#{config.root}/extras)

    # Only load the plugins named here, in the order given (default is alphabetical).
    # :all can be used as a placeholder for all plugins not explicitly named.
    # config.plugins = [ :exception_notification, :ssl_requirement, :all ]

    # Activate observers that should always be running.
    # config.active_record.observers = :cacher, :garbage_collector, :forum_observer

    # Set Time.zone default to the specified zone and make Active Record auto-convert to this zone.
    # Run "rake -D time" for a list of tasks for finding time zone names. Default is UTC.
    # config.time_zone = 'Central Time (US & Canada)'

    # The default locale is :en and all translations from config/locales/*.rb,yml are auto loaded.
    # config.i18n.load_path += Dir[Rails.root.join('my', 'locales', '*.{rb,yml}').to_s]
    # config.i18n.default_locale = :de

    # Configure the default encoding used in templates for Ruby 1.9.
    config.encoding = "utf-8"

    # Configure sensitive parameters which will be filtered from the log file.
    config.filter_parameters += [:password]

    # Enable escaping HTML in JSON.
    config.active_support.escape_html_entities_in_json = true

    # Use SQL instead of Active Record's schema dumper when creating the database.
    # This is necessary if your schema can't be completely dumped by the schema dumper,
    # like if you have constraints or database-specific column types
    # config.active_record.schema_format = :sql

    # Enforce whitelist mode for mass assignment.
    # This will create an empty whitelist of attributes available for mass-assignment for all models
    # in your app. As such, your models will need to explicitly whitelist or blacklist accessible
    # parameters by using an attr_accessible or attr_protected declaration.
    config.active_record.whitelist_attributes = true

    # Enable the asset pipeline
    config.assets.enabled = true

    # Version of your assets, change this if you want to expire all your assets
    config.assets.version = '1.0'

    config.assets.initialize_on_precompile = false
  end
end 
```

在开发中一切正常，它只是部署到我看到问题的 Heroku。如果有任何其他文件可能有助于调试此问题，请告诉我，我会提供。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T23:20:28.170

我最初认为这是 Heroku 专门发生的事情。但是，看来我发现了问题。Twitter Bootstrap 似乎不能很好地与 rails_admin 一起使用，我能够将以下文件添加到`app/assets/javascripts/rails_admin`

rails_admin.js

```
//=  require 'jquery'
//=  require 'jquery_ujs'
//=  require 'jquery.ui.effect'
//=  require 'jquery.ui.sortable'
//=  require 'jquery.ui.autocomplete'
//=  require 'jquery.ui.datepicker'
//=  require 'rails_admin/jquery.ui.timepicker'
//=  require 'rails_admin/ra.datetimepicker'
//=  require 'rails_admin/jquery.colorpicker'
//=  require 'rails_admin/ra.filter-box'
//=  require 'rails_admin/ra.filtering-multiselect'
//=  require 'rails_admin/ra.filtering-select'
//=  require 'rails_admin/ra.remote-form'
//=  require 'rails_admin/jquery.pjax'
//=  require 'jquery_nested_form'
//=  require 'rails_admin/ra.nested-form-hooks' 
//=  require 'twitter/bootstrap'
//=  require 'rails_admin/ra.widgets'
//=  require 'rails_admin/ui'
//=  require 'rails_admin/custom/ui' 
```

我还将这一行添加到 application.rb

```
config.assets.precompile += ['rails_admin/rails_admin.css', 'rails_admin/rails_admin.js'] 
```

我所有的 js 下拉菜单现在似乎都在工作。

# python - Django db搜索关键字，而不是确切的文本

> ID：14513732
> 
> 赞同：0
> 
> 时间：2013-01-25T01:08:17.107
> 
> 标签：python, django

给定搜索词“大文件大办公桌”，我将如何搜索 1) 任何结果；2）所有的结果。

我目前正在做的搜索是：

```
results = Path.objects.filter(path__icontains=search) 
```

我需要做的是类似的事情：

```
results = Path.objects.filter(path__icontains=search.split()) 
```

我将如何做到这两点？（或或与）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T02:23:01.787

```
from django.db.models import Q
from operator import or_

# AND - use argument unpacking
Path.objects.filter(*(Q(path__icontains=s)
                      for s in search.split()))

# OR - use reduce
Path.objects.filter(reduce(or_, (Q(path__icontains=s)
                                 for s in search.split()))) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T01:23:04.860

您需要知道的第一件事是您在过滤时实际上并没有访问数据库，因此您可以多次进行过滤而不会损失太多性能，第一种方法可以是：

```
results = Path.objects.all()
for s in search.split():
    results = results.filter(path__icontains = s) 
```

那是 AND 你可以使用类似的方法来处理 or。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T01:19:53.860

构建一个列表推导并使用 reduce 函数：

```
keywords = search.strip().split()
list_path_qs = [Q(path__icontains=x) for x in keywords]
final_q = reduce(operator.and_, list_path_qs)
results = Path.objects.filter(final_q)[:100] 
```

# php - 在 PHP 中，如何包装我自己的 is_empty 函数？

> ID：14513734
> 
> 赞同：0
> 
> 时间：2013-01-25T01:08:26.700
> 
> 标签：php

我尝试使用`empty()`. 命名的函数`is_empty`是检查一个值是否为空，如果为空，则返回一个指定的值。代码如下。

```
static public function is_empty($val,$IfEmptyThenReturnValue)
    {
        if(empty($val))
        {
            return $IfEmptyThenReturnValue;
        }
        else
        {
            return $val;
        }
    } 
```

我这样称呼这个函数：

```
$d="it's a value";
echo  Common::is_empty($d, "null"); 
```

没关系。它打印了“这是一个价值”。

但如果我没有定义`$d`. 如下所示：

```
echo  Common::is_empty($d, "null"); 
```

是的，它会打印“null”。但它也会打印一个`waring:Notice`：

```
 Undefined variable: d in D:\phpwwwroot\test1.php on line 25. 
```

那么如何修复这个功能呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T01:12:12.037

一个简单`&`的拯救你的生命：

```
class Common{
    static public function is_empty(&$val,$IfEmptyThenReturnValue){
        if(empty($val)){
            return $IfEmptyThenReturnValue;
        }else{
            return $val;
        }
    }
}

echo Common::is_empty($d,"null"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T01:11:13.967

您可以通过传入变量的名称而不是变量本身来解决此问题，然后在函数中使用变量变量：

```
static public function is_empty($var, $IfEmptyThenReturnValue)
{
    if(empty($$var))
    {
        return $IfEmptyThenReturnValue;
    }
    else
    {
        return $$var;
    }
} 

echo Common::is_empty('d', 'null'); 
```

但是，首先我会为此提供一个功能：

```
echo empty($d) ? 'null' : $d; 
```

# ios - 当 URL 引用子目录时 NSURLRequest 的奇怪行为

> ID：14513738
> 
> 赞同：3
> 
> 时间：2013-01-25T01:09:03.690
> 
> 标签：ios, objective-c, afnetworking

今天遇到了一些奇怪的事情，也许有一个简单的解释。

如果我使用最初相对于作为子目录的基本 URL 构造的 NSURL 创建 NSURLRequest，则 NSURLRequest 会删除子目录。

这更容易用代码解释：

```
// create a base URL to work with
NSURL *baseUrl = [NSURL URLWithString:@"http://www.google.com/sub"];

// create a URL relative to the base URL
NSURL *url1 = [NSURL URLWithString:@"/foo/bar" relativeToURL:baseUrl];

// create a NSURLRequest using this first URL
NSURLRequest *mangled_req = [[NSURLRequest alloc] initWithURL:url1];
NSLog(@"url1: %@", url1);
NSLog(@"mangled_req: %@", mangled_req);

// now create another URL that puts the base URL together with the relative path
NSURL *url2 = [NSURL URLWithString:@"http://www.google.com/sub/foo/bar"];

// and create a NSURLRequest, which should be the same as above
NSURLRequest *correct_req = [[NSURLRequest alloc] initWithURL:url2];
NSLog(@"url2: %@", url2);
NSLog(@"correct_req: %@", correct_req); 
```

输出证明了这一点：

```
2013-01-25 11:55:37.386 url1: /foo/bar -- http://www.google.com/sub
2013-01-25 11:55:37.408 mangled_req: <NSURLRequest http://www.google.com/foo/bar>
2013-01-25 11:55:37.409 url2: http://www.google.com/sub/foo/bar
2013-01-25 11:55:37.409 correct_req: <NSURLRequest http://www.google.com/sub/foo/bar> 
```

请注意，“mangled_req”省略了 /sub。

这让我现在很烦，因为我正在使用 AFNetworking 并且想要在 localhost 之间切换以进行测试（它自然将我的 Web 应用程序放在一个子目录中）和远程服务器（它没有）。

当然有解决方法，但这对我来说似乎很奇怪，我一定做错了什么。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-25T01:15:46.707

`NSURL`行为正确，而您对 URL 工作方式的假设是错误的。以斜杠开头的“相对” URL`/foo/bar`始终表示*相对于 host*，而不是相对于现有路径。因此，如果我将`/foo/bar`相对 URL 添加到*任何*url `scheme://host/path/1/2/3/whatever`，我将始终返回`scheme://host/foo/bar`。路径上的前缀`/`意味着路径是绝对的。

当然，如果您将其修复为相对 URL 为`foo/bar`，您会发现仍然有问题，因为您的原始 URL 没有尾部斜杠。就像我在访问时单击指向的链接一样，如果`somefile.html`最后一个路径组件没有尾部斜杠，它将删除最后一个路径组件。`http://host.com/foo/index.html``http://host.com/foo/somefile.html``http://host.com/foo/index.html/somefile.html``NSURL`

# python - 仅打印 Python 中特定键的字典项的值

> ID：14513740
> 
> 赞同：4
> 
> 时间：2013-01-25T01:09:07.740
> 
> 标签：python, dictionary, python-3.x

我想知道如果我有一本字典并且只想打印出特定键的值，我在 Python 中会做什么。

它将在一个变量中以及：

```
dict = {'Lemonade':["1", "45", "87"], 'Coke:["23", "9", "23"] 'Water':["98", "2", "127"}
inp = input("Select key to print value for!" + "/r>>> ")
if inp in dict:
    #Here is where I would like it to print the Value list for the key that is entered. 
```

我正在运行 Python 3.3

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-25T01:11:29.160

我冒昧地重命名了您的`dict`变量，以避免隐藏内置名称。

```
dict_ = {
    'Lemonade': ["1", "45", "87"], 
    'Coke': ["23", "9", "23"], 
    'Water': ["98", "2", "127"],
}
inp = input("Select key to print value for!" + "/r>>> ")
if inp in dict_:
    print(dict_[inp]) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-25T01:12:11.290

正如 Ashwini 指出的，你的字典应该是`{'Lemonade':["1", "45", "87"], 'Coke':["23", "9", "23"], 'Water':["98", "2", "127"]}`

要打印值：

```
if inp in dict:
    print(dict[inp]) 
```

作为旁注，不要`dict`用作变量，因为它会覆盖内置类型并可能在以后导致问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-11-15T01:35:14.990

在 Python 3 中：

```
# A simple dictionary
x = {'X':"yes", 'Y':"no", 'Z':"ok"}

# To print a specific value
print([value for value in x.values()][1]) 
```

输出：

```
no 
```

# objective-c - 覆盖一个方法，但将超类对该方法的调用留给该方法的超类版本

> ID：14513741
> 
> 赞同：0
> 
> 时间：2013-01-25T01:09:09.210
> 
> 标签：objective-c, overriding, subclass, superclass

是否有可能以这样一种方式覆盖子类中的方法，即当超类调用该方法时，这些调用仍然转到原始方法，但对该方法的所有其他（外部）调用转到被覆盖的版本？

*背景*：如果我继承 a`UITextField`并覆盖 getter `delegate`，则依赖于委托的内置行为`UITextField`似乎正在使用支持 ivar 来访问委托（而不是触及被覆盖的 getter）；但是，如果我尝试与 相同的事情`UITextView`，它的内部行为似乎`UITextView`依赖于委托使用重写的 getter 来访问委托。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T02:22:19.267

我相信你第二次做错了什么。
你是说继承 UITextView 并覆盖一个方法....影响超类？
听起来根本不对。
我建议确保您使用的视图是被覆盖类的对象，而不是默认 UITextView 类的对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T01:17:15.733

您可以使用 objc 运行时函数

```
#import <objc/message.h>

objc_super superstruct = {self, [UITextField class]};
objc_msgSendSuper(&superstruct, _cmd, args...); 
```

# css - 使用注释和结构编译的 SCSS

> ID：14513744
> 
> 赞同：1
> 
> 时间：2013-01-25T01:09:27.867
> 
> 标签：css, sass

我正在使用 CODA2 创建我的 SCSS 文件，然后编译成 CSS，也使用 SCOUT。

我刚刚开始使用 SCSS 并认为它很棒，真的应该早点研究一下。无论如何，当我在 CODA 中编译每组 SCSS 时，它会进入我的 style.css 并带有一堆注释，显示原始 SCSS 的创建位置

例如

```
/* line 111, ../sass/_block-elements.scss */ 
```

另外，当我做一些嵌套时，我不知道这是否是正确的做法，但我认为它可能有点啰嗦。

我再次安排的代码如下。

```
section.callouts{
.wrapper{
    text-align: center;
    margin: $center;
    width:95%;
        .about, .menu, .contact, .timetable, .social{
            float: left;
            width: 230px;
            margin: 0 $callout-padding 0 $callout-padding;
                .callout-info{
                    background-color: $white;
                    @include rounded-bottom-left;
                    @include rounded-bottom-right;
                    padding: $small-padding;
                } 
```

由于我刚刚掌握了 SCSS 的绳索，它看起来确实有点“原始”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T01:14:42.957

所有生产中的 CSS 都应该被缩小。这意味着在您提供给用户的编译代码中没有空格和（理想情况下）没有注释。

随心所欲地构建`.scss`文件，然后`Production`在准备发布时在 Scout 应用程序中设置环境。Sass 将为您缩小输出的 CSS，并且不会包含行号注释，以及删除您的任何`//`注释。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T15:11:50.857

以下是 SCSS 的一些规则。

嵌套：嵌套的作用本质上是创建与嵌套深度一样多的选择器。当混合@extends 和嵌套时，这些选择器可以轻松达到 30kb。不夸张。我的公司面临这样一个问题，当所有的新手都会疯狂嵌套时，嵌套的东西只是因为这是他们在 HTML 中看到的结构。

将您的嵌套保持在 3 层，中断，如果它变得更深，则开始一个新的嵌套链，或者有一个新的块要处理。您应该首先定义全局变量。就像普通的 CSS 一样，你不想重写相同的代码只是为了让一个带有阴影的盒子变成红色。尝试混合！

PS你从来没有问过一个问题......你的帖子中没有一个问号：P

# java - 如果使用 Programmatic Java API，如何停止 RobotFramework 测试？

> ID：14513747
> 
> 赞同：0
> 
> 时间：2013-01-25T01:10:22.177
> 
> 标签：java, jsf-2, robotframework

我正在考虑将 RobotFramework 集成到 JSF 应用程序中，以便使用 RobotFramework 的 programmatinc Java API 从前端运行测试。我知道它目前只支持运行测试，但你认为有可能允许用户取消运行测试的执行吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T04:58:31.230

Java API 本身不允许停止测试执行。事实上，命令行运行器也没有这种能力。使用信号是最好的方法，因为当被信号停止时，仍然会生成报告和日志：[http ://robotframework.googlecode.com/hg/doc/userguide/RobotFrameworkUserGuide.html?r=2.7.6#stopping-test-优雅地执行](http://robotframework.googlecode.com/hg/doc/userguide/RobotFrameworkUserGuide.html?r=2.7.6#stopping-test-execution-gracefully)。

另一种选择是使用监听器接口（[http://robotframework.googlecode.com/hg/doc/userguide/RobotFrameworkUserGuide.html?r=2.7.6#using-listener-interface](http://robotframework.googlecode.com/hg/doc/userguide/RobotFrameworkUserGuide.html?r=2.7.6#using-listener-interface)），并调用 sys.exit()一个听众。在这种情况下，无法获取测试运行的报告或日志。

# couchbase - 如何使用 Python 客户端创建 Couchbase 存储桶？

> ID：14513750
> 
> 赞同：0
> 
> 时间：2013-01-25T01:10:35.003
> 
> 标签：couchbase

查看 Couchbase Python 客户端，我看不到如何指定存储桶类型以创建`couchbase`存储桶类型。

[客户端](https://github.com/couchbase/couchbase-python-client/blob/master/couchbase/client.py#L107)不允许您指定存储桶类型。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T04:40:08.567

实际上，包装器中似乎缺少它，但是您应该能够使用以下代码实现此目的：

```
couchbase = Couchbase("127.0.0.1:8091", "Administrator", "password")
#get the rest interface
rest = couchbase._rest()
rest.create_bucket(bucket='myBucket',
                   ramQuotaMB=160,
                   authType='sasl',
                   saslPassword='password',
                   replicaNumber=0,
                   bucketType='couchbase') 
```

您可以发送 couchbase 或 memcached

我将在高级 API 中记录一个错误。

# sql - 如果不匹配任何 when_expressions，则返回原始值

> ID：14513751
> 
> 赞同：1
> 
> 时间：2013-01-25T01:10:36.530
> 
> 标签：sql, sql-server, tsql, case-when

我的 SQL 导出字段上有一行，如果它与姓氏中的“AMA”完全匹配，我正在尝试删除字段中的返回空白值。但是，当我使用当前代码导出文件时，没有“AMA”作为姓氏的名称将被完全清除。

```
,Max(
    Orders.ShipFirstName
    + ' ' +  
        CASE Orders.ShipLastName
            WHEN 'AMA' THEN ''
        END
) As ShipFullName 
```

现在，如果某人是“Ray Miller”，`ShipFullName`将返回为空白。但如果他们的名字是“Ray AMA”，那么他们的名字将返回为“Ray”。我想要它，以便在姓氏字段中找不到 AMA 时返回“Ray Miller”。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T01:12:28.637

```
CASE Orders.ShipLastName
    WHEN 'AMA' THEN ''
    ELSE Orders.ShipLastName
END 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-25T01:16:23.410

为避免出现尾随空白，我会这样做：

```
max(
    case 
        when Orders.ShipLastName = 'AMA' then Orders.ShipFirstName
        else Orders.ShipFirstName + ' ' + Orders.ShipLastName
    end
) as ShipFullName 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T01:15:23.690

```
,Max(
    Orders.ShipFirstName
    + ' ' +  IF(Orders.ShipLastName = 'AMA', '', Orders.ShipLastName)
) As ShipFullName 
```

# backbone.js - 交换/切换/交换backbone.js视图到位？

> ID：14513754
> 
> 赞同：6
> 
> 时间：2013-01-25T01:10:42.827
> 
> 标签：backbone.js, view, switch-statement, exchange-server, swap

我正在为联系人管理器在骨干网中实现视图/编辑视图。网络建议创建一个带有子视图的 Contact 类，称为 ContactView 和 ContactEdit。问题是，这些需要在 DOM 中占用相同的 el，所以我不能将子项嵌套在父项中。那是因为从外部看，我希望父视图只引用联系人，就好像孩子是私有的一样。我试过这个，它在我第一次渲染（）时工作：

```
initialize: function() {
    this.view[0] = new CL.Views.ContactView({model: this.model, el: this.el});
    this.view[1] = new CL.Views.ContactEdit({model: this.model, el: this.el});
},
render: function() {
    this.view[0].render();
    return this;
} 
```

但是我不能交换意见。我尝试了 this.view[0].remove() 和我能想到的一切，但就是无法让浏览和编辑视图使用相同的 el 相互交换。

我认为这意味着在一个视图中包含两个模板并交换它们会更好，这已经大部分工作了。我认为它的backbone.js 不能很好地处理DOM 中同一级别的视图的继承。

我宁愿避免使用backbone.js 扩展，但愿意遵循它们实现的任何模式。我正在尝试以“正确”的方式执行此操作，因为查看/编辑是我们应用程序中表单的常见模式。

PS 陈述这个问题的另一种方式是，如果没有父视图包围它们，如何隐藏视图并将其替换为骨干.js 中的另一个视图？

提前感谢您提供的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T00:20:34.627

我不太明白您是想查看 a `Collection`of`Models`还是要查看处理 single `Model`？

### 如果是单个模型的视图，

那么你可以坚持一种观点。只需让一些事件监听您启用或禁用编辑功能的操作。（您甚至可以通过在 dom 元素上设置 contenteditable="true" 来做到这一点）

我强烈建议使用一些工具，如[backbone.marionette](https://github.com/marionettejs/backbone.marionette/)或chaplinjs。他们将为您节省大量时间。

*以下示例适用于 Backbone.Marionette*

*示例模板*

```
<script type="text/template" id="contact-view-template">
  <span data-bind="firstName"></span>
  <span data-bind="lastName"></span>
  <span data-bind="email"></span>
  <a href="#" data-action="edit">
  <a href="#" data-action="save" style="display:none">
</script> 
```

*视图代码：*

```
ContactView = Marionette.ItemView.extend({
  template:"#contact-view-template",
  events:{
    "click [data-action=edit]":"edit",
    "click [data-action=save]":"save"
  },
  edit:function(){
    this.$("[data-action=edit]").hide();
    this.$("[data-action=save]").show();
    this.$("[data-bind]").attr("contenteditable",true);
  },
  save:function(){
    var value = {};
    _.each(this.$("[data-bind]",function(el){
      value[el.dataset['bind']]= $(el).val() || $(el).text();
    }));
    this.model.set(value);
    // add your validation here
    this.model.save();
  }
}); 
```

### 如果你想拥有多个编辑视图，不仅仅是：

```
ContactListEditView = Marionette.CompositeView.extend({
  itemView:ContactView.extend({
    tagName:"li"
  }),
  itemViewContainer:"ul",
  template:_.template("<h1>ContactList</h1><p>feel free to edit</p><ul></ul>")
}); 
```

### 如果您需要 1 个编辑视图和多个不可编辑视图

（我希望我没有犯任何严重的错误）：

```
ContactEditView = Marionette.ItemView.extend({
  template:"#contact-edit-view", // your template & bindings
  events:{
    "click [data-action=save]":"save"
  },
  save:function(){
    var value = {};
    _.each(this.$("[data-bind]",function(el){
      value[el.dataset['bind']]= $(el).val() || $(el).text();
    }));
    this.model.set(value);
    this.model.save();
  }
});

ContactListView = Marionette.CompositeView.extend({
  itemView:Marionette.ItemView.extend({
    template:"#contact-view-template",
    events:{
      "click [data-action=edit]":"edit"
    },
    edit:function(){
      this.trigger("edit",this);
    }
  }),
  regions:{
    "edit":"[data-region=edit]"
  },
  initialize:function(){
    this.on("itemview:edit",function(view){
      this.edit.show(new ContactEditView({model:view.model}));
    }.bind(this));
  }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T23:23:39.160

如果我正确理解您的问题，您需要一个从基础继承的视图，`View`以便它们可以自由地使用相同的`Model`.

```
/** Declare base View with specific Model. */
var baseView = Backbone.View.extend({
    model: someModel
});

var contactView = baseView.extend({
   initialize: function() {
        /** Do work specific to contact view. */
   }
});

var editContactView = baseView.extend({
   initialize: function() {
       /** Do work specific to contact edit. */
   }
});

var mainView = Backbone.View.extend({
   initialize: function() {
       /** Initialize two contact views */
       new contactView({ });
       new editContactView({ });
   }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T10:22:31.340

我认为您的问题源于您的父视图与子视图共享相同的元素。当您渲染`ContactView`or`ContactEdit`视图时，它会替换 DOM 元素，而当您`remove`是子视图时，它（根据定义）也会删除父视图元素，因为它们是相同的元素。

相反，您应该组合父视图，以便将子视图呈现**到**容器元素中。就像是

```
<!-- .contact-container is the parent view el -->
<section class="contact-container">

</section> 
```

然后将子视图渲染到容器中：

```
initialize: function() {
  //don't give the views an element, let them render into the detached
  //element generated by Backbone
  this.view[0] = new CL.Views.ContactView({model: this.model});
  this.view[1] = new CL.Views.ContactEdit({model: this.model});
  this.currentViewIndex = 0;
},
render: function() {
  //replace the contents with the new view
  this.view[this.currentViewIndex].render();
  this.$el.html(this.view.el);

  return this;
},

swap: function() {
  var i = this.currentViewIndex;
  this.view[i].remove();
  //toggle current view between 0 and 1
  this.currentViewIndex = i === 0 ? 1: 0;
  this.render();
} 
```

然后你得到

```
<!-- .contact-container is the parent view el -->
<section class="contact-container">
  <div><!-- your child element --></div>
</section> 
```

# iphone - 使用 UICollectionView 和 NSFetchedResultsController

> ID：14513756
> 
> 赞同：0
> 
> 时间：2013-01-25T01:10:50.347
> 
> 标签：iphone, ios, nsfetchedresultscontroller, uicollectionview

我正在使用 github 上的一个项目，它可以让我使用`NSFetchedResultsController`and `UICollectionView`，该项目就是[这个](https://github.com/AshFurrow/UICollectionView-NSFetchedResultsController)

但是当我以这种方式保存一个新对象时：

```
NSManagedObject *doc = [NSEntityDescription insertNewObjectForEntityForName:@"Document" inManagedObjectContext:self.managedObjectContext];
                    [doc setValue:[title contents] forKey:@"docName"];
[doc setValue:element valueforKey:@"Element"]

[self saveContext]; 
```

我收到此错误：

```
 CoreData: error: Serious application error.  Exception was caught during Core Data change  processing.  This is usually a bug within an observer of NSManagedObjectContextObjectsDidChangeNotification.  Can't perform collection evaluate with non-collection object. with userInfo (null) 
```

我试图删除该项目，并且保存工作，所以我认为该项目中的问题，有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T01:45:02.167

我建议您导出 NSManagedObject 子类并按如下方式声明您的对象：

```
// At top of the file:
#import "Document.h"

// In your Method:
Document *doc = (Document *)[NSEntityDescription insertNewObjectForEntityForName:@"Document" inManagedObjectContext:self.managedObjectContext];
doc.docName = title.contents;

NSError *error = nil;
[self.managedObjectContext save:&error];

if (error != nil) {
    NSLog(@"Oh no! Something terrible happened! Error: %@", error);
}
else {
    NSLog(@"Saved! Yay!");
} 
```

# php - 从 PHP API GET 请求缓存 Google 日历事件

> ID：14513767
> 
> 赞同：1
> 
> 时间：2013-01-25T01:11:21.983
> 
> 标签：php, google-api, google-calendar-api, google-api-php-client

我正在使用 google-api-php-client (API v3) 在页面上显示来自我的 Google 日历的事件列表。它正在工作，但是我想在磁盘上本地缓存结果，这样我就不必在每次加载页面时都进行 API 调用（日历变化不大）。是否可以缓存结果？

有一个名为 Google_FileCache.php 的文件，它有一个 Google_FileCache() 类，看起来它可以做我想要的，但我根本找不到任何文档，有人用过吗？

到目前为止，这是我的代码：

```
require_once 'google-api-php-client/src/Google_Client.php';
require_once 'google-api-php-client/src/contrib/Google_CalendarService.php';
session_start();
$CLIENT_ID = '{my client ID}';
$SERVICE_ACCOUNT_NAME = '{my service account name}';
$KEY_FILE = '{my p12 key file}';
$client = new Google_Client();
$client->setApplicationName("Public Calendar");
$client->setUseObjects(true);
if (isset($_SESSION['token'])) {
    $client->setAccessToken($_SESSION['token']);
}
$key = file_get_contents($KEY_FILE);
$client->setAssertionCredentials(new Google_AssertionCredentials(
    $SERVICE_ACCOUNT_NAME,
    array('https://www.googleapis.com/auth/calendar', "https://www.googleapis.com/auth/calendar.readonly"),
    $key)
);
$client->setClientId($CLIENT_ID);
$service = new Google_CalendarService($client);
if ($client->getAccessToken()) {
    $_SESSION['token'] = $client->getAccessToken();
}
$rightNow = date('c');
$params = array('singleEvents' => 'true', 'orderBy' => 'startTime', 'timeMin' => $rightNow);
$events = $service->events->listEvents('primary', $params);
foreach ($events->getItems() as $event) {
    echo '<p>'.$event->getSummary().'</p>';
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T18:19:40.160

仅供参考，供其他寻找如何做到这一点的人参考。我想出了如何使用 Google_FileCache 类来缓存返回的 GET 请求。以下是我的解决方案：

```
// Files to make API Call
require_once 'google-api-php-client/src/Google_Client.php';
require_once 'google-api-php-client/src/contrib/Google_CalendarService.php';
// Files to cache the API Call
require_once 'google-api-php-client/src/cache/Google_Cache.php';
require_once 'google-api-php-client/src/cache/Google_FileCache.php';
// Google Developer info for gmail.com Service API account
$CLIENT_ID = '{My Client ID}';
$SERVICE_ACCOUNT_NAME = '{My Service Account Name}';
// Make sure you keep your key.p12 file in a secure location, and isn't readable by others.
$KEY_FILE = '{My .p12 Key File}';
$client = new Google_Client(); // Start API call
$client->setApplicationName("Public Calendar");
$client->setUseObjects(true); // Need this to return it as an object array
// Checking to see that we are authenticated (OAuth2) to make API to calendar
if (isset($_SESSION['token'])) {
 $client->setAccessToken($_SESSION['token']);
}
// Load the key in PKCS 12 format (you need to download this from the Google API Console when the service account was created.)
$key = file_get_contents($KEY_FILE);
$client->setAssertionCredentials(new Google_AssertionCredentials(
    $SERVICE_ACCOUNT_NAME,
    array('https://www.googleapis.com/auth/calendar', "https://www.googleapis.com/auth/calendar.readonly"),
    $key)
);
$client->setClientId($CLIENT_ID); // Set client ID for my API call
$service = new Google_CalendarService($client); // Start API call to Calendar
//Save authentication token in session
if ($client->getAccessToken()) {
  $_SESSION['token'] = $client->getAccessToken();
}
// Start Caching service
$cache = new Google_FileCache();
$cache_time = 43200; // 12 hours
// If cache is there & younger than 12 hours then load cached data
if($cache->get('events_cache', $cache_time)) {
    $events = $cache->get('events_cache');
    $file_status = "cached";
}
else {
    //If it is not then make Calendar API request to Google and get the results
    $rightNow = date('c');
    $params = array('singleEvents' => 'true', 'orderBy' => 'startTime', 'timeMin' => $rightNow, 'maxResults' => 5);
    $events = $service->events->listEvents('primary', $params);
    $cache->set('events_cache', $events); // Save results into cache
    $file_status = "live";
}
// Start collecting info to be returned
echo '<!-- '.$file_status.' -->'; // So I can tell if the results are cached or not
echo '<ul class="events">';
foreach ($events->getItems() as $event) {
    // Make link to event and list event name
    echo '<li><a href="'.$event->getHtmlLink().'">'.$event->getSummary().'</a></li>';
}
echo '</ul>'; 
```

# visual-studio-2012 - 为什么我不能更改我的 Visual Studio 2010 默认项目目录？

> ID：14513773
> 
> 赞同：1
> 
> 时间：2013-01-25T01:11:52.497
> 
> 标签：visual-studio-2012

当我尝试创建一个新项目时，通过单击

`File`→ `New`→ `Project`,

对话框的默认项目位置不**默认**为显示的目录

`Tools`→ `Options`→[项目和解决方案]→[常规]→“项目位置：”。

但它指向的是我的一个旧项目。

这个值是否存储在另一个地方？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T01:11:52.497

对我来说，这是通过将以下注册表项更改为所需的默认项目位置来解决的：

```
HKEY_CURRENT_USER\Software\Microsoft\VisualStudio\10.0\NewProjectDialog\MRUSettingsLocalProjectLocationEntries\Value0 
```

# python - 从签名的PCM_FORMAT_S16_LE到python中的浮点数

> ID：14513775
> 
> 赞同：1
> 
> 时间：2013-01-25T01:12:05.027
> 
> 标签：python, numpy

我有一个正在尝试编程的 beagleboard。我`PyAlsaAudio`用来捕获音频并绘制它（并对其进行 sokme 处理）。

然而，这实际上是我第一次尝试 Python 和计算机音频。通常我使用 daq 系统和 matlab，所以我从来不用处理二进制（我假设）数字。

pyalsa 允许我获得多种格式的输出，但示例都使用`PCM_FORMAT_S16_LE`，所以我坚持使用它，除非有人另有说明。

如果如何从`PCM_FORMAT_S16_LE`一个数字数组中去，我需要学习什么。应该很简单，但我还没有找到一个简单的解决方案。

感谢您的阅读和帮助。穆斯塔法

编辑：1只是想添加我试过

```
In [113]: aaa = numpy.fromstring(data)
In [112]: numpy.size(aaa)
Out[112]: 250 
```

但大小是错误的，因为我已指定 1000 作为周期大小。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T06:57:57.893

据此，*每个通道（Little Endian 字节顺序）是有符号的 16*[位](http://pyalsaaudio.sourceforge.net/libalsaaudio.html#pcm-objects)`PCM_FORMAT_S16_LE`样本。当您不使用参数时，它默认为，映射到。因此，您的 1000 个 16 位样本仅转换为 250 个 64 位样本。*`numpy.fromstring``dtype``float``float64`*

 *我认为你应该做的是：

```
aaa = numpy.fromstring(data, dtype='<i2') 
```

在数据类型中，`<`说明小端序、`i`有符号整数类型和`2`16 位或 2 字节长度。*

# javascript - 在javascript中突出显示匹配的文本

> ID：14513776
> 
> 赞同：7
> 
> 时间：2013-01-25T01:12:07.540
> 
> 标签：javascript

> **可能重复：**
> [使用 JavaScript 突出显示文本范围](https://stackoverflow.com/questions/6240139/highlight-text-range-using-javascript)
> [在 jQuery 中查找文本字符串并使其变为粗体](https://stackoverflow.com/questions/9794851/find-text-string-in-jquery-and-make-it-bold)

假设我有一堆文件路径，类似于：

*   /Volumes/A//Array/05_SCRIPTS/staging/tree/04_OUTPUTS/MPEG_FF_PS_wCropping/01_NBC_Youtube/Backlog/Archive/LawAndOrder_S20

*   /Volumes/A//AArray/05_SCRIPTS/staging/tree/04_OUTPUTS/MPEG_FF_PS_wCropping/01_NBC_Youtube/Backlog/Archive/LawAndOrder_S20/nbcnetwork-pds-E8818-US-insert-20121020

我将如何突出显示页面上特定文本的所有匹配项。例如，如果`"04"`是我正在寻找的东西，它会执行以下操作：

```
$(source).find('04').addClass('highlight'); 
```

这是可能偏离标准的伪代码，但这是我想要做的。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-25T01:20:18.647

[http://jsfiddle.net/Aku4y/](http://jsfiddle.net/Aku4y/)

```
var t = $(source).html();
t = t.replace(/04/g, "<span class='highlight'>04</span>");
$(source).html(t); 
```

# windows-phone-7 - 我可以使用 PhotoChooserTask 在 windows phone 7 中选择保存在自己项目中的图像吗？

> ID：14513783
> 
> 赞同：0
> 
> 时间：2013-01-25T01:13:21.747
> 
> 标签：windows-phone-7

我的 WP7 项目的“/Images”文件夹中有 20 张图像。那么问题来了：我可以使用 PhotoChooserTask 从文件夹中选择一个图像并显示它吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T02:01:25.387

你的问题的答案是否定的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T13:31:39.420

PhotoChooserTask 允许访问存储在设备上的相机或图像。如果您想显示项目文件夹中的照片，请在 LisBox 中显示它们，但我建议用户 WrapPanel，以便您可以像在图片中心中一样查看它们。

# python - pygame导入错误osx 10.7.5 python 2.7.3

> ID：14513784
> 
> 赞同：0
> 
> 时间：2013-01-25T01:13:34.380
> 
> 标签：python, python-2.7, terminal, osx-lion, pygame

我的问题类似于

[为 Mac OS X 10.6.8 安装 Pygame](https://stackoverflow.com/questions/8275808/installing-pygame-for-mac-os-x-10-6-8)，

[无法导入 pygame](https://stackoverflow.com/questions/9088051/unable-to-import-pygame)，并且

[Mac 上 Python 3.2 的 Pygame - 导入错误](https://stackoverflow.com/questions/8769624/pygame-for-python-3-2-on-mac-import-error)。

当我尝试导入 pygame * 时，我得到`ImportError: dlopen(/Library/Python/2.7/site-packages/pygame/base.so, 2): Library not loaded: @executable_path/../Frameworks/SDL.framework/Versions/A/SDL Referenced from: /Library/Python/2.7/site-packages/pygame/base.so`

我试图弄清楚它是否适用于我的系统。我不记得我是如何安装 pygame 的，但如果我这样做了`port search pygame`，我会得到

> ```
> py-game @1.9.1 (python, devel, multimedia, graphics)
> py24-game @1.9.1 (python, devel, multimedia, graphics)
> py25-game @1.9.1 (python, devel, multimedia, graphics)
> py26-game @1.9.1 (python, devel, multimedia, graphics)
> py27-game @1.9.1 (python, devel, multimedia, graphics)
> py31-game @1.9.1 (python, devel, multimedia, graphics)
> py32-game @1.9.1 (python, devel, multimedia, graphics) 
> ```

我的预感是这 `port install py32-game`会解决问题，但它不会改变任何东西（也许 python 需要以某种方式指向不同版本的 pygame？）。有人对我的特定配置有经验吗？我不清楚如何确定我需要运行哪个版本的 pygame。

OSX 10.7.5 Python 2.7.3

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T04:16:41.587

AFAICT，原来是两个问题：

1.  将python版本从OSX本机版本切换到2.7的ports版本后需要再次安装pygame（我卸载了macports版本）

2.  我的 .bash_profile 路径搞砸了，我需要将正确的位置导出到新安装的版本，以便 python 可以找到它需要的

# javascript - Kendo-ui DataSource.create 发送空 POST 请求

> ID：14513785
> 
> 赞同：3
> 
> 时间：2013-01-25T01:13:34.533
> 
> 标签：javascript, jquery, kendo-ui, kendo-datasource

我试图让我的 kendo-dataSource 在用户提交到数据库后上传帖子，并且所有帖子都使用 kendoListView 显示。

当我提交传输创建方法的发布请求时，我只在页面刷新后在我的数据库和 listView 中收到空值。

代码：

```
<article class="box">   
<h4><center><dt>Feedback & Suggestions</center></h4></dt>
<div id="feedback_zone">
    <dd>
        <input data-bind="value: name" type="text" class="k-textbox" placeholder='Your Name' />
        <textarea data-bind="value: text" class="k-textbox" placeholder='Your Comment...' /></textarea>
        <center><button data-bind="click: dbInsert" class="k-button">Add Feedback</button>  
    </dd>
    <div data-role="listview" data-bind="source: comments" data-template="template"></div>
    <div class="k-pager-wrap">
        <div id="pager" class="k-pager"></div>
    </div>   
</div>
<script type="text/x-kendo-tmpl" id="template">
    <div class="fb k-widget">
        <img width="48" height="48" src="images/goose.gif" />
        <p class="k-text">${text}</p>
        <div class="metadata">
            |
            Posted by: ${name}
            |
        </div>
    </div>
</script> 
```

```
$(document).ready(function() {
var dataSource = new kendo.data.DataSource({
    transport: {
        read: {
            url: "includes/readFB.php",
            contentType: "application/json; charset=utf-8",
            dataType: "json"
        },
        create: {
            url: "includes/insertFB.php",
            type: "POST",
            contentType: "application/json; charset=utf-8",
            dataType: "json",
        }
    },
    schema: {
        data: function(response) {
            return response.data;
        },
        total: function(response) {
            return response.data.length;
        },
        model: commentModel
    },
    pageSize: 5
});

$("#pager").kendoPager({
        dataSource: dataSource
});

var commentModel = kendo.observable({

    comments: dataSource,

name: null,
text: null,

    dbAdd: function() {
        $("#add_fb").toggle();
        $("#add_bt").toggle();
    },
    dbInsert: function(e) { {

        dataSource.add(this);
    }

    this.set("name", "");
    this.set("text", "");   
}
});
kendo.bind(document.body.children, commentModel);
}); 
```

# wordpress - Wordpress get_posts 未显示所有帖子

> ID：14513786
> 
> 赞同：0
> 
> 时间：2013-01-25T01:13:40.057
> 
> 标签：wordpress

我正在使用以下代码：

```
global $post;
$tmp_post = $post;

$staff = get_posts(array('numberposts' => -1, 'post_type'=> 'staff'));
$i = 0;
echo 'Staff number: '.count($staff); 
```

它回显“员工编号：6”，但如果我运行以下查询

```
SELECT *
FROM `wp_posts`
WHERE `post_type` = 'staff'
LIMIT 0 , 30 
```

它向我展示了 7 名员工...关于如何通过 get_posts() 检索 7 名员工的任何想法？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T19:04:06.140

这是我使用的 Wordpress 主题的限制。

# c# - 如何修复 Mono 3.0.3、Entity Framework 6 Beta2 和 Npgsql 上的 MVC3 项目的 DbProviderServices 继承错误？

> ID：14513788
> 
> 赞同：1
> 
> 时间：2013-01-25T01:13:47.267
> 
> 标签：c#, entity-framework, postgresql, mono, npgsql

我有一个针对在 Mono 上运行的 .net 4.5 的 MVC3 项目，唯一失败的是从实体框架到 PostgreSQL 的连接。

我有一个在 VS 2012 中使用 MVC4、EF6、Postgres 的几乎相同的项目。

我收到以下错误：

> System.InvalidOperationException 实体框架提供程序类型“Npgsql.NpgsqlFactory，Npgsql”的“Instance”成员未返回从“System.Data.Entity.Core.Common.DbProviderServices”继承的对象。实体框架提供者必须从此类扩展，并且“实例”成员必须返回提供者的单例实例。

我是否缺少配置中的某些内容或者这不起作用？

```
<!--For more information on Entity Framework configuration, visit http://go.microsoft.com/fwlink/?LinkID=237468-->
<section name="entityFramework" type="System.Data.Entity.Internal.ConfigFile.EntityFrameworkSection, EntityFramework, Version=6.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" requirePermission="false" />
<!-- For more information on Entity Framework configuration, visit http://go.microsoft.com/fwlink/?LinkID=237468 --> 
```

和 ...

```
 <entityFramework>
    <providers>
      <provider invariantName="Npgsql" type="Npgsql.NpgsqlFactory, Npgsql">
      </provider>
    </providers>
  </entityFramework>
  <system.data>
    <DbProviderFactories>
      <remove invariant="Npgsql" />
      <add name="Npgsql Data Provider" invariant="Npgsql" support="FF" description=".Net Framework Data Provider for Postgresql" type="Npgsql.NpgsqlFactory, Npgsql" />
    </DbProviderFactories>
  </system.data> 
```

Mono ASP.net 版本字符串...

```
Version Information: 3.0.3 (master/39c48d5); ASP.NET Version: 4.0.30319.17020 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T19:07:47.453

由于更改，您需要 EF6 的 PostgreSQL 连接器。您可以在此处阅读有关情况的更多信息：

[http://entityframework.codeplex.com/wikipage?title=Rebuilding%20EF%20providers%20for%20EF6](http://entityframework.codeplex.com/wikipage?title=Rebuilding%20EF%20providers%20for%20EF6)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-05T19:35:03.667

我修复了这个错误。

改变

```
<entityFramework>
  <providers>
    <provider invariantName="Npgsql" type="Npgsql.NpgsqlFactory, Npgsql"></provider>
  </providers>
</entityFramework> 
```

到

```
 <entityFramework>
    <providers>
      <provider invariantName="Npgsql" type="Npgsql.NpgsqlServices, Npgsql"></provider>
    </providers>
  </entityFramework> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-17T06:33:53.333

将您的 entityFramework 部分配置更改为：

```
<entityFramework>
  <providers>
    <provider invariantName="Npgsql" type="Npgsql.NpgsqlServices, Npgsql.EntityFramework" />
  </providers>
</entityFramework> 
```

PS：我使用 Npgsql 版本 2.1.0.0

# php - 在 MySQL 中加入“博客”表和“评论”表

> ID：14513790
> 
> 赞同：1
> 
> 时间：2013-01-25T01:14:14.690
> 
> 标签：php, mysql, join, mysqli, union

我有两个单独的表，第一个是“博客”，它显然包含已发布的博客。第二个表是“b_comments”，其中包含发布在博客上的所有评论。每个博客都有一个唯一的 ID，该 ID 与每个评论相应地存储。

截至目前，我正在使用 2 个单独的查询来获取完整的博客文章和与之相关的所有评论。有没有办法可以`JOIN`将这两个表放在一起以在一个查询中获取整个博客文章和所有评论？

我从来没有使用过 MySQL 的`JOIN`or`UNION`函数，所以我不确定这是否可能。

如果有帮助，这是我的两个查询：

```
$getBlog = $link->query("SELECT * FROM blogs WHERE blog_id = '" .$blogID. "'");

$getComments = $link->query("SELECT * FROM b_comments WHERE blog_id = '".$blogID."' ORDER BY date DESC") 
```

**编辑：这里有更多代码可以帮助您更好地理解我想要做的事情：**

```
//get blog posts
$blogID = intval($_GET['id']);

$sql = $link->query("SELECT * FROM blogs WHERE blog_id = '" .$blogID. "'");

$row = mysqli_fetch_assoc($sql);

$blogTitle = $link->real_escape_string($row['blog_title']);
$pubDate = $link->real_escape_string($row['pub_date']);
$blogCat = $link->real_escape_string($row['category']);
$blogAuthor = $link->real_escape_string($row['author']);
$blogImage = $link->real_escape_string($row['image']);
$blogContent = $link->real_escape_string($row['content']);

//get comments
$getComments = $link->query("SELECT * FROM b_comments WHERE blog_id = '".$blogID."' ORDER BY date DESC");

if(!($getComments->num_rows > 0)) {

    echo "<div id='commentArea' style='display: none;'>";

    echo "</div>";
} else {                    
    echo "<div id='commentArea'>";  

    while($comRow = mysqli_fetch_assoc($getComments)) {
        $commentID = $link->real_escape_string($comRow['id']);
        $comAuthor = $link->real_escape_string($comRow['user_name']);
        $comDate = $link->real_escape_string($comRow['date']);
            $comContent = $link->real_escape_string($comRow['content']);
        $comDate = date("F jS, Y H:ia", strtotime($comDate)); 
```

使用这些变量，我将数据回显到 HTML 页面中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T01:16:04.003

在不知道表结构的情况下，您可以尝试以下操作：

```
SELECT *
FROM blogs
JOIN b_comments ON blogs.blog_id = b_comments.blog_id 
```

`LEFT JOIN`如果您想返回没有评论的博客，您可能需要使用 a 。

**更新**

```
//get blog posts
$blogID = intval($_GET['id']);

$blogTitle = null;
$pubDate = null
$blogCat = null;
$blogAuthor = null;
$blogImage = null;
$blogContent = null;

//get comments
$getComments = $link->query("SELECT a.blog_title, a.pub_date, a.category, a.author, a.image, a.content AS blog_content, b.id, b.user_name, b.date, b.content FROM blogs a JOIN b_comments b ON a.blog_id = b.blog_id WHERE a.blog_id = " . $blogID . " ORDER BY b.date DESC");

if(!($getComments->num_rows > 0)) {
    echo "<div id='commentArea' style='display: none;'>";

    echo "</div>";
} else {
    while($comRow = mysqli_fetch_assoc($getComments)) {
    if(empty($blogTitle)) $blogTitle = $link->real_escape_string($row['blog_title']);
    if(empty($pubDate)) $pubDate = $link->real_escape_string($row['pub_date']);
    if(empty($blogCat)) $blogCat = $link->real_escape_string($row['category']);
    if(empty($blogAuthor)) $blogAuthor = $link->real_escape_string($row['author']);
    if(empty($blogImage)) $blogImage = $link->real_escape_string($row['image']);
    if(empty($blogContent)) $blogContent = $link->real_escape_string($row['blog_content']);

    $commentID = $link->real_escape_string($comRow['id']);
    $comAuthor = $link->real_escape_string($comRow['user_name']);
    $comDate = $link->real_escape_string($comRow['date']);
    $comContent = $link->real_escape_string($comRow['content']);
    $comDate = date("F jS, Y H:ia", strtotime($comDate));
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T01:16:57.893

您可以执行 a`LEFT JOIN`来获取博客文章和评论（如果没有评论，则只获取博客文章）：

```
$getBlogAndComments = $link->query("SELECT * FROM blogs b 
                              LEFT JOIN b_comments ON b.blog_id = c.blog_id 
                              WHERE b.blog_id = '" .$blogID. "'"); 
```

尽管在这种情况下，两个查询可能更有效，因为您将获取博客文章以及每个评论行。

# objective-c - UITableView 的 setFrame 每次都不起作用

> ID：14513799
> 
> 赞同：1
> 
> 时间：2013-01-25T01:14:52.850
> 
> 标签：objective-c, uitableview, resize, uianimation

我想通过按下 iPad 应用程序上的按钮来调整`UITableView`包含的大小。目标是在背景`UIViewController`中看到另一个。`UITableView`该按钮在类中设置一个标志并调用一个函数来根据标志调整表的大小。

我必须在按钮上单击三次才能启动表格的大小调整。调整大小是一次两次。

有人可以帮助我吗？

这是我的代码：

```
- (void)displayTableView:(BOOL)animated
{
    CGFloat filterWidth = self.tableViewFilter.frame.size.width;
    CGFloat viewWidth = self.view.frame.size.width;

    CGFloat originx = self.showFilters == YES ? filterWidth : 0;
    CGFloat originy = 0;
    CGFloat width = self.showFilters == YES ? viewWidth - filterWidth : viewWidth;
    CGFloat height = self.view.frame.size.height;

    if (animated == YES) {
        [UIView beginAnimations:nil context:nil];
        [UIView setAnimationDuration:0.5];
    }

    [self.tableView setFrame:CGRectMake(originx, originy, width, height)];

    if (animated == YES) {
        [UIView commitAnimations];
    }
} 
```

谢谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T12:59:41.767

试试这样的 UIView 动画.....

```
- (void)displayTableView:(BOOL)animated
{
    CGFloat filterWidth = self.tableViewFilter.frame.size.width;
    CGFloat viewWidth = self.view.frame.size.width;

    CGFloat originx = self.showFilters == YES ? filterWidth : 0;
    CGFloat originy = 0;
    CGFloat width = self.showFilters == YES ? viewWidth - filterWidth : viewWidth;
    CGFloat height = self.view.frame.size.height;

    if (animated == YES)
    {
         [UIView animateWithDuration:0.5 animations:^{
              [self.tableView setFrame:CGRectMake(originx, originy, width, height)];
         }];

    }
} 
```

# sas - 如何将 put 与数字一起使用？

> ID：14513800
> 
> 赞同：0
> 
> 时间：2013-01-25T01:14:56.070
> 
> 标签：sas

```
data _null_;
    put "hello world"; 
 run; 
```

将打印`hello world`到控制台。

但

```
data _null_;
put 1; 
run; 
```

给我

```
Encountered " "put" "put "" at line 2, column 1.
Was expecting one of:
<EOF> 
";" ...
"*" ...
"data" ...
"proc" ...
(and 41 more)" 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T02:02:01.327

```
data _null_;
put "1";
run; 
```

你把文本放到控制台。因此，“1”和1实际上是相同的。您不能输入未格式化的数字，只能输入已格式化的数字（即文本）。即使放置一个数字变量也可以这样工作：

```
data _null_;
x=1;
put x;
run; 
```

这实际上将数字 1 格式化为`BEST1.`格式（如果您选择，您可以覆盖格式）。

# apache - 在 Ubuntu 下在 Apache 后面运行 CherryPy 的说明

> ID：14513802
> 
> 赞同：1
> 
> 时间：2013-01-25T01:15:24.517
> 
> 标签：apache, mod-rewrite, cherrypy, mod-proxy, static-files

我计划在 Apache 后面使用 CherryPy 运行我的网络服务器。这个想法是让 Apache 处理静态文件，而 CherryPy 处理 Web 应用程序。在到处搜索之后，我觉得使用 mod_rewrite 或 mod_proxy 作为 Apache 和 CherryPy 之间的接口。我不知道这两者的优点和/或缺点。我可以使用 mod_rewrite 或 mod_proxy，具体取决于哪个更易于配置或使用。我相信当用于此目的时，两个接口之间没有主要的功能差异。但是，当然，我可能是错的。

为此，我需要有关如何在 Ubuntu 下配置 Apache 的明确说明。我完全控制了这台计算机，服务器只托管一个域。这里有一些细节。

在计算机中，静态文件位于`/var/www/`
计算机中，Web 应用程序将位于 Web 应用程序`/var/app/`
的 URL 应该是`http://www.example.com/app/`
CherryPy 可以使用我想要的任何端口。

提前感谢您的帮助。

# c++ - 反向链表

> ID：14513811
> 
> 赞同：0
> 
> 时间：2013-01-25T01:16:40.523
> 
> 标签：c++

我正在用指针实现一个链表。
我需要反转链表，所以我写了 rotate(List &l)
但我没有得到我期望的结果。
由于输入是
0 1 2 3 4 5 6 7 8 9
我会期望
9 8 7 6 5 4 3 2 1 0
结果，但我得到
0 9 8 7 6 5 4 3 2 1

既然我找不到我做错了什么，你能指出我做错了什么吗？问题似乎从这里开始：（旋转）

```
while(end->next !=0){
       end = end->next;
    } 
```

我到那里第一个节点是最后一个节点（因为 cout << end->d; 给我0而不是9）

```
#include<iostream>

using namespace std;

typedef class Node *List;
struct Node{ 
    int d;
    List next;
};
//update : renamed
void reverse(List &l){
/*
start :
a b c d e

b c d e **a**
c d e **b** a
d e **c** b a
Result:
e **d** c b a
    */

    // get last node
    List end = l;
    while(end->next !=0){
       end = end->next;
    }
    //insert first node directly after the original last node
    while(l!=end){
        List hulp = l;
        l = hulp->next;
        hulp->next = end->next;
        end->next=hulp;
    }
}
int main(){
    List l = new Node();
    int i = 0;
    List k = l;
    while (i < 10)
    {
        k->d = i;
        k->next = new Node();
        k = k->next; 
        i++;
    }
    List m = l;
    while ( m->next !=0 )
    {
        cout << m->d << endl;
        m = m->next;
    }
    reverse(l);
     m = l;
    while ( m->next !=0 )
    {
        cout << m->d << endl;
        m = m->next;
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T01:41:48.970

这不是迭代链表的典型方式：

```
while (m->next != 0) {
    cout << m->d << endl;
    m = m->next;
} 
```

相反，您应该这样做：

```
while (m != 0) {
    cout << m->d << endl;
    m = m->next;
} 
```

如果你这样做，你会看到你最初创建的链表实际上是：

```
0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 0 
```

然后您的打印逻辑将其打印为：

```
0, 1, 2, 3, 4, 5, 6, 7, 8, 9 
```

然后您的反向可能会正常运行，生成以下列表：

```
0, 9, 8, 7, 6, 5, 4, 3, 2, 1, 0 
```

您打印为：

```
0, 9, 8, 7, 6, 5, 4, 3, 2, 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T01:44:35.690

您错误地初始化了列表。d=9 的最后一个节点，它应该有一个 null `next`，但它实际上有一个`new Node`. 要解决此问题，请将列表初始化更改为：

```
for (int i = 0; ; ++i)
{
    k->d = i;
    if (i >= 9) {
        break;
    }
    k->next = new Node();
    k = k->next; 
} 
```

更改后，您还需要更改初始和最终打印（否则您将不会打印最后一个节点）。打印代码应该是（你最好把它放到一个打印函数中以避免重复代码）：

```
for ( ; m; m = m->next)
{
    cout << m->d << endl;
} 
```

# c - 为什么 C 函数不能返回数组？语言设计的基本原理是什么？

> ID：14513813
> 
> 赞同：19
> 
> 时间：2013-01-25T01:16:53.407
> 
> 标签：c, arrays, function

我是一个初级程序员，对 C 知之甚少。我知道但没有向我解释过的一件事是为什么函数不能返回数组。这很容易通过使用指针或将数组包装在 a 中来规避（[从函数返回二维数组](https://stackoverflow.com/a/8779787/1103747)`struct`） ，但我的问题是“为什么？”。

## *为什么*函数不能返回数组？

我知道有一些简单的解决方法，但是自从我发现这个问题以来，这个问题一直困扰着我。这是 C 内部设计的缺陷，还是故意放在那里的？存在此限制是否有特殊原因？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T01:26:41.467

猜测...

*   预计数组很大（或至少不小），因此复制数组以允许“值类型”行为将花费大量时间。人们会期望`=`复制数组，从而在代码中引入隐藏的缓慢，这从来不是 C 的明确目标。
*   C 中的数组在任何地方都不包含大小 - 没有简单的技术方法来实现复制作为当前“数组”概念的值，因为它存在于语言中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T01:29:17.907

我不确定，但我认为。

1.  C是在内存受限时开发的。
2.  有人可能会告诉替代方案，我们可以返回指针，而不是传递完整的数组，那么为什么要提供其他不太好的替代方案。

# functional-programming - 如何从 SML 中读取文件？

> ID：14513817
> 
> 赞同：4
> 
> 时间：2013-01-25T01:17:25.543
> 
> 标签：functional-programming, sml, ml

我正在尝试从 SML 文件中读取文本，但无法正常工作。这就是我正在尝试的

```
fun read file =
let val inStream = TextIO.openIn file

in
        TextIO.StreamIO.input1 inStream
end 
```

实际的函数调用`input1`并不重要，我想要的只是能够从文件中读取。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-25T02:00:21.967

你的错误在于`TextIO.StreamIO.input1`，你的意思很可能是`TextIO.input1`。

如果您确实需要/不想使用 StreamIO 处理文件，则必须将 ,`instream`返回的类型转换`openIN`为`StreamIO.instream`带有`TextIO.getInstream`函数的类型。

[您可以在 SML 基础库TEXT_IO 签名](http://www.standardml.org/Basis/text-io.html)中阅读有关这一切的更多信息。

请记住，在完成读取文件后关闭文件是一种很好的做法。

**更新**

正如评论中所建议的，您可以阅读整个文件（如果您知道它很小），也可以逐行阅读。
如果您不想逐字获取内容，最简单的方法是按空格分割内容。这样，您最终将得到一个字符串列表，这些字符串代表文件中的每个单独的“单词”。

# haskell - 如何查找 Haskell 命令和关键字？

> ID：14513820
> 
> 赞同：4
> 
> 时间：2013-01-25T01:18:18.120
> 
> 标签：haskell, ghci

我正在自学 Haskell，但我在使用 Haskell 时遇到的一个问题是很难找到 Haskell 关键字、语法和命令的定义。我已经阅读了一些 Haskell 教程，这些教程为我消除了很多，通常在 ghci 中使用 ":t" 命令有助于查看函数的类型。

但总的来说，我怎么知道这些是做什么的：(.), (>>=), (=<<), ! 或者 \\

我知道他们现在在做什么，但是将来如果我遇到一些我以前从未见过的符号，我应该怎么知道它的作用或如何使用它？谷歌搜索这些东西显然是行不通的！

现在，我正试图弄清楚 'it' 命令在 ghci 中应该做什么。同样，我在 Google 上找不到这个，我所知道的就是通过 ghci 中的 ":t it" 获取类型信息。对于刚接触这门语言的人来说，这非常令人沮丧……

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-25T01:26:51.483

您可以使用 Hoogle 获得一些里程数：

*   [http://www.haskell.org/hoogle/](http://www.haskell.org/hoogle/)

或通过搜索 Prelude 源代码：

*   [http://www.haskell.org/onlinereport/standard-prelude.html](http://www.haskell.org/onlinereport/standard-prelude.html)

*   [https://stackoverflow.com/questions/11776269/where-can-i-find-the-source-code-for-haskell-prelude-functions](https://stackoverflow.com/questions/11776269/where-can-i-find-the-source-code-for-haskell-prelude-functions)

这些资源将有助于函数名称和运算符，但不一定有助于学习语法。要学习语法，您将需要其他资源或一本书。不过幸运的是，大多数表面上的“语法”实际上只是 Prelude 中定义的一个函数。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-25T06:36:26.453

对于 GHCi 命令，输入`:help`GHCi。这将为您提供所有可用命令的列表。其中一些可能会派上用场，比如调试的。

我不知道在哪里`it`记录。在 GHCi 中，`it`它只是一个绑定到您评估的最后一个表达式的结果的变量。例如：

```
λ>1 + 2 * 3
7
λ>it
7
λ>:t it
it :: Integer
λ>"foo"
"foo"
λ>it
"foo" 
```

# c# - 提取具有复杂类结构的接口

> ID：14513823
> 
> 赞同：1
> 
> 时间：2013-01-25T01:18:55.327
> 
> 标签：c#

当我有多层类和接口时，我对使用接口提取的最佳方法有点困惑。假设我有以下层次结构：

```
Foo : WidgetBase, IWidget 
WidgetBase: BusinessObject, IThingy
IThingy : IGenericObject 
```

现在我知道我必须将 IFoo 接口提取到一个单独的项目中；但是该接口结构是否必须复制真实结构 - 这意味着我也必须为 BusinessObject 和 WidgetBase 提取接口？或者这是否意味着我应该在创建提取的接口时展平结构，创建 1 个接口 IFoo，包含与 Foo 的属性及其所有父类和接口相对应的属性，一直到层次结构？

我的接口中还有一些枚举类型属性 - 我怎样才能最好地解决这些问题？

```
public interface IWidget
{
    public WidgetType Type { get; set; }
}

public enum WidgetType
{
    Big, Small
} 
```

请阐明一些观点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T01:27:02.937

**最低要求`IFoo`**

`IFoo`应该继承`IWidget`和`IThingy`。它还需要包括 和 的所有公共`Foo`成员`WidgetBase`。

```
public interface IFoo : IWidget, IThingy
{
    // public member of Foo and WidgetBase...
} 
```

**潜在的重构 1：**

为这样定义一个接口可能会更好`WidgetBase`：

```
public interface IWidgetBase : IThingy
{
    // public members of WidgetBase...
} 
```

那么`IFoo`可以继承它：

```
public interface IFoo : IWidget, IWidgetBase
{
    // public member of Foo.
} 
```

**潜在的重构 2：**

这同样适用于`BusonessObject`：为它定义一个接口，并`IWidgetBase`继承它。

**总校长：**

您的接口应该指定对象的行为，并且应该在行为自然扩展的地方使用继承。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T02:21:01.410

我会根据您对新界面的用途建议。您希望 IFoo 具有哪些行为？换句话说，它在新项目中是做什么用的。为新项目提取足够的数据。不要将您的 IFoo 与从其他接口或 Foo 类的当前状态的继承混淆。

# file-io - 打开权限被拒绝

> ID：14513827
> 
> 赞同：0
> 
> 时间：2013-01-25T01:19:32.667
> 
> 标签：file-io, system, file-permissions

在 C 中：

```
if( (opfd= open(fpath, O_CREAT | O_RDWR, 777))<0) 
    {perror("open sys call");
    exit(1);} 
```

然后我将一个数组写入该文件（工作正常）然后`close(opfd);` 当我再次迭代并尝试输入相同的文件名时，它给了我这个错误“权限被拒绝”，而我将权限设置为 777

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T01:23:37.453

也许您应该尝试`0777`（它是八进制 - 与 不同`777`）。C 中的前导`0`表示八进制值。

顺便说一句，`777`（十进制）是`1411`（八进制），这似乎可以解释为什么您无法覆盖。

# json - 如何使用 cURL 在网页上列出 Parse.com 中的数据

> ID：14513832
> 
> 赞同：1
> 
> 时间：2013-01-25T01:19:51.280
> 
> 标签：json, parsing, curl, get

我正在尝试从我的 Parse.com 帐户中获取包含数据的 JSON 数组。我查看了使用 REST API，但我不明白如何在网页上实现它。我必须使用 PHP 吗？还是Javascript？

我一直在使用 Parse.com[支持页面](https://www.parse.com/docs/rest#queries)来帮助我。

我需要这个页面来显示我存储在 Parse 上的所有数据，以便我可以从 Google Maps API 调用它来覆盖地图上的点。

> 卷曲-X GET \
> 
> -H "X-Parse-Application-Id: myid" \
> 
> -H "X-Parse-REST-API-Key: myrestid" \
> 
> [https://api.parse.com/1/classes/GameScore/](https://api.parse.com/1/classes/GameScore/)

# firebird - 编写返回 OCTETS 的 Firebird UDF

> ID：14513837
> 
> 赞同：3
> 
> 时间：2013-01-25T01:20:05.510
> 
> 标签：firebird, user-defined-functions, firebird2.5

我们使用存储在表中的二进制值作为 CHAR(18) CHARACTER SET OCTETS。

在 Firebird 2.0.4 中，我们使用 ASCII 作为默认数据库字符集和连接字符集。我们有一个可以生成所需数据的 UDF，其定义为：

```
DECLARE EXTERNAL FUNCTION CREATEBINARY
RETURNS CSTRING(76) 
ENTRY_POINT 'CREATEBINARY'
MODULE_NAME 'CustomUDF'; 
```

检索值

```
SELECT CREATEBINARY() FROM RDB$DATABASE 
```

返回期望值。

在 Firebird 2.5.2 中，我们使用 UTF8 作为默认数据库字符集和连接字符集。尝试使用上述 select 语句调用我们的 UDF 现在会导致错误：

```
Context: Statement::Fetch
Message: idx_dsql_fetch failed.

SQL Message: -104
Invalid Token

Engine Code: 335544849
Engine Message:
Malformed string 
```

我尝试修改函数声明以将结果的字符集指定为 OCTETS 和 NONE：

```
DECLARE EXTERNAL FUNCTION CREATEBINARY
RETURNS CSTRING(76) CHARACTER SET OCTETS
ENTRY_POINT 'CREATEBINARY'
MODULE_NAME 'CustomUDF'; 
```

但我仍然收到相同的错误结果。

我已经在 FlameRobin 0.9.3.1870 和我们使用 Delphi XE2 Update 4 和 IBObjects 4.9 Release 14 的应用程序中对此进行了测试。两者都以相同的方式失败。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T01:31:10.617

问题似乎是为返回结果指定的大小不正确。将声明更改为

```
DECLARE EXTERNAL FUNCTION CREATEBINARY
RETURNS CSTRING(18) CHARACTER SET OCTETS
ENTRY_POINT 'CREATEBINARY'
MODULE_NAME 'CustomUDF'; 
```

使功能正常工作。

# java - setOnClickListener 上的错误

> ID：14513838
> 
> 赞同：1
> 
> 时间：2013-01-25T01:20:10.130
> 
> 标签：java, android, android-layout, android-widget, onclicklistener

我在 btn.setOnClickListener(this) 上不断收到此错误。我有与以前相同的代码，但是直到几分钟前我打开我的 Eclipse，我才得到这个错误。很快的帮助会很好，谢谢。

```
package com.example.bmisummative;

import android.app.Activity;
import android.content.DialogInterface;
import android.view.View.OnClickListener;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;

public class weightloss extends Activity {
    Button btn;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.weightloss);
        btn = (Button) findViewById(R.id.homeButton);
        btn.setOnClickListener(this);
    }

        public void onClick(View v) {
        if (v.getId() == R.id.homeButton) {
            startActivity(new Intent(this, MainActivity.class));
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T01:23:18.280

您没有实施`OnClickListener`. 你需要这样做才能设置你`onClickListener`这样的：

```
 btn.setOnClickListener(this); 
```

你需要这样做：

```
public class weightloss extends Activity implements OnClickListener {...} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-25T01:25:06.923

你应该实施`OnClickListener`

```
public class weightloss extends Activity
implements OnClickListener
{
   @Override
   public void onCreate(Bundle savedInstanceState) {
      super.onCreate(savedInstanceState);
      setContentView(R.layout.weightloss);
      btn = (Button) findViewById(R.id.homeButton);
      btn.setOnClickListener(this);
   }

   public void onClick (View v)
   {
      // Button tap detected! Do stuffs!
   }

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-25T01:31:51.910

你不见了`implements OnClickListener`

```
public class weightloss extends Activity implements OnClickListener {} 
```

还有另一种干净的方法可以在不添加的情况下做到这一点`implements OnClickListener`：

```
btn = (Button) findViewById(R.id.homeButton);
btn.setOnClickListener(new OnClickListener() {

    @Override
    public void onClick(View v) {
           startActivity(new Intent(this, MainActivity.class));

     }
}); 
```

我更喜欢后者，因为在处理大量按钮时更容易阅读。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-07-19T18:50:20.367

写吧

```
public class weightloss extends Activity implements OnclickListner 
```

# wordpress - 我如何显示正确的形象信用？

> ID：14513840
> 
> 赞同：-1
> 
> 时间：2013-01-25T01:20:15.193
> 
> 标签：wordpress

所以我只是对 WordPress 没有显示带有将在我的帖子中显示的 url 的图像源的功能感到困惑。我知道您可以通过在其中包含 html 来使用标题，但是如果我每天要发布很多帖子，这将非常乏味。有没有更简单的选择？我尝试将自定义元字段添加到附件，但无法将其显示在帖子中的图片下方。

我不明白为什么这不是wordpress内置的。这对网络至关重要。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T04:42:50.410

如果您想要一种简单的方法来添加信用链接，您必须开发一个自定义 WordPress 主题，并为每个图像添加一个额外的输入字段以输入信用 url。为此目的聘请 WordPress 开发人员

# ruby-on-rails - Rails 开源图形库

> ID：14513842
> 
> 赞同：0
> 
> 时间：2013-01-25T01:20:33.573
> 
> 标签：ruby-on-rails, graphics

我正在寻找与 rails 3.2.11 应用程序兼容的图形开源库。我想基本上安装一些进度条......也许rails中已经有一些东西可以做到这一点？也许这是一个初学者的问题。会喜欢任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T01:29:07.113

[Twitter bootstrap](https://github.com/twitter/bootstrap)和[bootstrap sass](https://github.com/thomas-mcdonald/bootstrap-sass) gem

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T01:23:00.153

Jquery UI 是这里的自然选择。它有按钮、进度条和大量其他图标/效果。您可以在[此处](https://github.com/joliss/jquery-ui-rails)找到 UI 的 Rails gem 。

# sql - 如何获取最后一个条件=注册的数据？

> ID：14513843
> 
> 赞同：2
> 
> 时间：2013-01-25T01:20:33.480
> 
> 标签：sql, postgresql, select, where-clause

仅供参考，这是我的第一篇文章，所以我不太了解这里的规则，

我只是坚持从我的数据库中选择数据，这是我的一些数据。

```
Table (Monster_card)
mons_card_id | Level
    1           1
    2           1
    3           1
    4           1
Table (Monster_registration)
mons_reg_id |mons_card_id | status      | time(timestamp)
    1            1         "REGISTER"    "2012-07-09 12:00:00"
    2            1         "UNREGISTER"  "2012-11-01 12:49:01"
    3            2         "REGISTER"    "2012-11-03 12:49:01"
    4            3         "REGISTER"    "2012-11-04 12:49:01" 
```

我当前的查询是 =

```
select a.mons_card_id from monster_card a, monster_registration b
where b.status = "REGISTER" 
```

;

我想要的结果 = 根据上面的数据，结果应该只有 mons_card_id 2 和 3。但在我当前的结果中，mons_card 1 也出现了。

抱歉之前的帖子不完整。

有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T01:47:43.627

您可以`NOT EXISTS`用来确保对于给定的 mons_card_id，没有其他状态为“REGISTER”的最新记录

```
SELECT mons_card_id
FROM monster_registration M
WHERE M.status = 'REGISTER' AND NOT EXISTS (
    SELECT 1 FROM monster_registration R
    WHERE R.mons_card_id = M.mons_card_id
        AND R.time > M.time 
        AND R.status <> 'REGISTER'
) 
```

工作[SqlFiddle](http://sqlfiddle.com/#!1/efa4b/2)

# google-reseller-api - 谷歌转销商权限

> ID：14513845
> 
> 赞同：2
> 
> 时间：2013-01-25T01:20:40.333
> 
> 标签：google-reseller-api

如果我想在我的经销商帐户下建立一个经销商门户......我该怎么做？我尝试使用服务帐户为 Oauth 构建 jwt，并且可以检索访问 api 的身份验证令牌。当我提出如下请求时：

```
{ uri: 'https://www.googleapis.com/apps/reseller/v1sandbox/subscriptions',
  method: 'GET',
  headers: { Authorization: 'Bearer ya29.AHES6ZTCYDJH41adclj5AR8....JBQa3lM_ZXpLvdsm2J8' } } 
```

我总是得到回报：

```
{
 "error": {
  "errors": [
   {
    "domain": "global",
    "reason": "authError",
    "message": "Please make sure you are using a valid Google Apps account",
    "locationType": "header",
    "location": "Authorization"
   }
  ],
  "code": 401,
  "message": "Please make sure you are using a valid Google Apps account"
 }
} 
```

它喜欢说我的服务帐户无权访问应用程序经销商 api...（因为它不是谷歌应用程序帐户，但是...它由应用程序管理员创建...）但我的管理员帐户已经是允许的用户，我使用管理员创建项目并创建服务帐户来构建jwt ...

我不知道如何设置服务帐户的权限。求助@@~

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T19:24:00.727

更新答案：

服务帐户确实适用于 OAuth 2.0 的经销商 API。您收到此错误的原因是您可能没有在控制面板中授权客户端 ID。

[https://developers.google.com/drive/delegation#delegate_domain-wide_authority_to_your_service_account](https://developers.google.com/drive/delegation#delegate_domain-wide_authority_to_your_service_account)

按照这些步骤并再次运行呼叫。你不应该得到这个错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T05:56:44.240

谷歌的最终回应是...... Reseller API 仍然不支持“服务帐户”（从 API 控制台应用）。目前只支持真实用户帐号，我需要尝试其他方式访问该服务...希望近功能能够实现服务帐号的相关权限！感谢帮助！

# c++ - VS2012 MSTest 无法捕获断言，本机 C++

> ID：14513846
> 
> 赞同：1
> 
> 时间：2013-01-25T01:20:43.307
> 
> 标签：c++, visual-studio-2012, mstest, native, assert

我刚从 VS2012 中的 MSTest 开始。我正在测试本机 C++。

我在我的应用程序中犯了一个错误，读取了一个 STL 字符串的“结尾”......例如

wchar_t c = p_filename[p];

..在我的情况下 p 是 20000 而 p_filename 是一个空字符串。显然是一个错误。在调试器中运行，这会触发：

“调试断言失败！！..字符串下标超出范围...（按重试调试应用程序）”。

但是 - 在 MSTest 中运行此代码可以通过测试。没有报告错误。为什么 MSTest 没有发现这个运行时错误？（或者 MSTest 没有检测到原生 c++ 中的断言语句）？？MSTest 不应该报告这个严重的错误吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T03:02:43.573

当 STL 在调试模式下检测到问题时，它会调用 _CrtDbgBreak()，通常会显示一个对话框，允许您调试问题。但是在 MSTest 下运行，什么也没有发生。没有对话框，MSTest 可能会报告成功。我通过连接到 _CrtDbgBreak() 并触发 assert() 来解决这个问题，它使用不同的机制，__debugbreak 内在。在这些情况下，这会触发熟悉的“Press 'retry' to debug”对话框。

```
 int MyReportHook(int nRptType, char *szMsg, int *retVal)
{
    if( _CRT_ASSERT == nRptType )
    {
        assert(false);
    }
    return 0;
}

TEST_CLASS(UnitTest1)
{
public:
    TEST_METHOD_INITIALIZE(methodName) 
    {
        _CrtSetReportHook(MyReportHook); // hook STL asserts.
    }

    TEST_METHOD(TestMethod1)
    {
        Assert::IsTrue( StripExtension( L"" ) == L"" ); // test for handling empty strings.
        Assert::IsTrue( StripExtension( L"test.txt" ) == L"test" );
    }

}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T04:45:21.690

这是由于在 CppUnitTest.h 文件中完成的断言重定向。

```
 _CrtSetReportMode(_CRT_ASSERT, _CRTDBG_MODE_FILE); 
```

这里的目的是您不希望您的自动化阻止对话框。显然不是你想要的。但是您可以根据需要编辑此标头并将其重新启用。

# javascript - 使用 Three.js 将纹理 (x,y) 映射到 3D 对象 (x,y)

> ID：14513848
> 
> 赞同：0
> 
> 时间：2013-01-25T01:20:48.350
> 
> 标签：javascript, three.js, webgl, textures

我有几个带有关联 mipmap 纹理文件的 OBJ 文件。我将 mipmap 作为纹理加载，并将其映射到加载每个 OBJ 文件产生的 3D 对象。3D 对象一起渲染时，形成更大的 3D 对象的各个部分。

我不想使用 mipmap，而是想使用 2D 图像作为纹理并将其“拖放”到 3D 对象的顶部，以便 3D 对象中每个 (x,y) 的颜色对应于 ( x,y) 纹理的位置（z 并不重要——拉伸/扭曲纹理是可以的）。

基本上，我不需要将纹理映射到对象中的 (x,y,z) 顶点，而是将其映射到具有相同 (x,y) 的任何顶点。有没有办法用 Three.js 做到这一点而不必读取画布中的图像数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T06:22:40.023

当然，您只需要更改网格的每个顶点的 UV，如下所示：

```
uv.x = C * ( vertex.x + A )
uv.y = C * ( vertex.y + A ) 
```

然后将纹理分配给你的网格，你应该得到你想要的。

您必须如上所述适当地应用比例/平移因子，因此 UV 最终会在 [0, 1] 范围内。

# jquery - jQuery：显示隐藏文本

> ID：14513849
> 
> 赞同：0
> 
> 时间：2013-01-25T01:20:53.540
> 
> 标签：jquery, jquery-selectors

当我单击链接以隐藏或显示段落文本时，我无法将链接设置为“（显示）”或“（隐藏）”。

这是我得到的不起作用的代码：

```
var old_text = $(this).text();
var new_text = (old_text === '(hide)') ? '(show)' : '(hide)';
var toggle_link = $("<a href='#'> "+ new_text + "</a>");
$(this).after(toggle_link);
toggle_link.on('click', function (event){
  $(this).siblings('p').toggle();
});
$(this).after(toggle_link); 
```

在上面的代码中。我正在打开和关闭显示和隐藏链接，但是文本没有改变。它只是保留（“隐藏”）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T01:39:57.847

试试这个方法：

```
var toggle_link = $("<a href='#'>(hide)</a>");
        $(this).after(toggle_link);
        toggle_link.on('click', function (event){
          $(this).siblings('p').toggle();
            var old_text = $(this).text();
            var new_text = (old_text === '(hide)') ? '(show)' : '(hide)';
            $(this).text(new_text);
        }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T01:44:03.807

如果您想在显示和隐藏文本或链接之间切换。假设您想通过单击此处的某个链接来切换段落，这是您的操作方式。

```
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
</head>

<body>
<a id="toggle" href="#" style="font-size:20px;">Click Me to show the Paragraph</a>
<p id="toggle1">This is the Paragraph for the sake of this demo. Click the above link to Hide me.</p>

<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3/jquery.min.js"></script>
<script>

        $("#toggle").click(function(){
        $("#toggle1").toggle('slow');
        });
</script>
</body>
</html> 
```

我希望这是你想要的，因为你的问题不清楚..

# c++ - 为什么有些语句在“Release”中会生成警告，但在“Debug”模式下使用 GCC 编译时不会？

> ID：14513850
> 
> 赞同：3
> 
> 时间：2013-01-25T01:20:55.787
> 
> 标签：c++, gcc, gcc-warning

我正在使用 gcc 编译一些 C++ 代码，虽然代码在使用“调试”配置时编译得很好，但它在“发布”配置中发出警告。编译选项的唯一区别是：

“调试”：`g++ -O0 -g3 ...`

“释放”：`g++ -O3 ...`

我在“发布”版本中看到的消息：

```
../src/xml.cpp: In static member function ‘static Z<char>* XML::ReadToZ(const char*, XMLTransform*, XMLTransformData*)’:
../src/xml.cpp:5034: warning: ignoring return value of ‘size_t fread(void*, size_t, size_t, FILE*)’, declared with attribute warn_unused_result
../src/xml.cpp:5041: warning: ignoring return value of ‘size_t fread(void*, size_t, size_t, FILE*)’, declared with attribute warn_unused_result 
```

相关的两个语句是：

```
/* 5034 */ fread((*y).operator char *(),1,S,fp);
/* 5041 */ fread(yy.operator char *(),1,S,fp); 
```

**为什么警告有区别？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T01:27:17.797

一些警告是基于“流分析”生成的，这是编译器在某些优化步骤中所做的事情。

您可能应该修复这些警告！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T01:31:42.353

[GCC bugzilla](http://gcc.gnu.org/bugzilla/show_bug.cgi?id=25509)上有一个关于此行为的错误报告。尝试将 --no-warn-unused-result 添加到您的“发布”配置文件中。

# jquery - JQuery 中的 MathJax

> ID：14513851
> 
> 赞同：3
> 
> 时间：2013-01-25T01:21:25.120
> 
> 标签：jquery, mathjax

我有许多不同的 MathJax 公式，它们将在网页上的不同列表中动态移动。我正在尝试使用 JQuery 和 append 属性来控制它。

在我的脚本文件中，我有各种公式数组，然后是一个函数，它使用 .append 列出指定 div 内的数组中的公式。这是代码：

```
function listArray(array,div){
  for(var i=0; i<array.length; i++){
    $('#'+div).append('<li>'+array[i]); 
  }
}; 
```

我遇到的问题是 MathJax 在此脚本运行之前对数学进行排版，因此附加的公式不会在 TeX 中显示。这是一个示例小提琴：

[http://jsfiddle.net/T8m64/92/](http://jsfiddle.net/T8m64/92/)

有谁知道一个很好的解决方法？我已经尝试阅读一些关于重新排版 MathJax 的文档，但我并没有真正遵循它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T20:42:48.650

您的小提琴示例有两个问题。首先，数学表达式数组丢失了反斜杠，因为它们在 javascript 字符串中用作转义字符。您需要将它们加倍：

```
var jax = ['\\(\\mathbb{Q}\\)','\\(\\mathbb{Z}\\)']; 
```

其次，您需要告诉 MathJax 在将数学添加到页面后对其进行处理。采用

```
MathJax.Hub.Queue(["Typeset",MathJax.Hub,div]); 
```

在附加数学以做到这一点之后。

[你的小提琴版本 120](http://jsfiddle.net/T8m64/120/)显示了一个工作版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T04:16:34.023

我运行了一些测试作为你的小提琴的更新/93、/94、/95，发现渲染的公式可以移动，但整个东西很脆弱。有时一个简单的更改或只是页面刷新会导致显示未渲染的公式，每个公式都加倍，我无法解释。

正如您将看到的，我认为 a`setTimeout`可以解决问题，但现在我认为情况并非如此。

我认为该错误只是在 jsFiddle 中运行代码的一个功能。在我自己的计算机上以 file:// 协议在本地提供的测试页面中运行代码并在 Opera 中查看时，我无法引发该错误。

这是我的测试页面：

```
<!DOCTYPE html>
<html>
<head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<title>Test kineticJS lib - jsFiddle demo</title>

<script type='text/javascript' src='http://code.jquery.com/jquery-1.7.1.js'></script>

<style type='text/css'>
    body {
    margin: 10px;
}
.jax {
    display: none;
}
#list1, #list2 {
    margin: 10px 0;
    padding: 5px;
    border: 1px solid #000;
}
</style>

<script type='text/javascript'>
$(window).load(function(){
function listArray($ul) {
    $(".jax").each(function(i, j){
        var li = $("<li/>").append($(j).text());
        $ul.append(li);
    });
};

//move formulas from original spans into list1
listArray($("#list1") );

//on click move formulas between list1 and list2
$("#moveUp").on('click', function() {
    $("#list2 li").eq(0).appendTo($("#list1"));
});
$("#moveDown").on('click', function() {
    $("#list1 li").eq(0).appendTo($("#list2"));
});

});
</script>

</head>
<body>
  <head>
<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
</head>
<body>
    <span class="jax">\(\mathbb{Q}\)</span>
    <span class="jax">\(\mathbb{Z}\)</span>
    <ul id="list1"></ul>
    <button id="moveDown">Move Down</button>
    <button id="moveUp">Move Up</button>
    <ul id="list2"></ul>
</body>

</body>
</html> 
```

# android - 封闭数据库；自动同步导致“尝试重新打开已经关闭的对象：SQLiteDatabase”异常

> ID：14513852
> 
> 赞同：1
> 
> 时间：2013-01-25T01:21:26.113
> 
> 标签：android, database, greendao

我正在使用 GreenDAO ORM 创建一个 Android 应用程序，在此之上具有一个通用的 crud 服务层。我有一个包含对我的 DaoMaster 以及我的 SQLiteDatabase 的静态引用的单个文件：

```
public class DATABASE {
    private static final String TAG = "DATABASE";
    private static SQLiteDatabase db;
    private static DaoMaster.DevOpenHelper helper;
    private static DaoMaster master;

    public static void Initialize(Context context){
        GetHelper(context);
        GetDatabase();
        GetMaster();
    }

    private static DaoMaster.DevOpenHelper GetHelper(Context context){
        if(helper == null){
            Log.d(TAG, "Helper = null");
            helper =  new DaoMaster.DevOpenHelper(context, Constants.DATABASE_NAME, null);
        }
        return helper;
    }

    private static SQLiteDatabase GetDatabase(){
        if(db == null){
            Log.d(TAG, "Database = null");
            db = helper.getWritableDatabase();
        }
        return db;
    }

    private static DaoMaster GetMaster(){
        GetDatabase();
        if(master == null){
            Log.d(TAG, "Master = null");
            master = new DaoMaster(db);
        }
        return master;
    }

    public static DaoSession GetSession(){
        GetMaster();
        return master.newSession();
    }

    public static void CloseDatabase(){
        try{
            helper.close();
            db = null;
            master = null;
        } catch(Exception e){
            Log.d(TAG, "Failed to close database");
        }
    }
} 
```

启动应用程序时，我调用 DATABASE.Initialize()，当我的主 Activity 被销毁时，我调用 DATABASE.CloseDatabase()。当应用程序首次启动时，它会执行初始同步，并且检索到的实体通过它们各自的 crud 服务实例发送，该实例处理各自的 DAO 以将实体持久保存到该数据库中，如下所示。

```
public class CrudService<T> {
    private Class<?> _dtoType;
    private Class<T> _entityType;
    private AbstractDao<T, ?> dao;
    private Method _updateMethod;
    private DaoSession session;

    public CrudService(Class<T> entityType){
        _entityType = entityType;
        _dtoType = DtoMapping.getDtoType(entityType); //This gets a dto for the specified entityType via a HashMap - ie: blah -> blahDto

        if(_dtoType != null){
            try {
                _updateMethod = _entityType.getMethod("update", _dtoType); //This finds blah.java's update method that takes in a blahDto as a param - it must be there or you catch
            } catch (NoSuchMethodException e) {
                e.printStackTrace();
            }
        }

        session = DATABASE.GetSession();
        dao = (AbstractDao<T,?>) session.getDao(entityType);
    }

    public void Insert(T t){
        dao.insertInTx(t);
    }

    public void InsertOrReplace(T t){
        dao.insertOrReplaceInTx(t);
    }

    public void Update(T t){
        dao.update(t);
    }

    public void Delete(T t){
        dao.deleteInTx(t);
    }
    (etc)
} 
```

但是，即使应用程序未运行，我的定期同步也需要访问此数据库。几个同步将经常运行。当同步运行时，在从同步调用的类中，我调用 DATABASE.Initialize()，但是当它到达我的第一个 crud 服务查询时，它给了我这个错误：

```
01-24 18:10:55.304: WARN/System.err(7068): java.lang.IllegalStateException: attempt to re-open an already-closed object: SQLiteDatabase: /data/data/com.example.app/databases/database
01-24 18:10:55.304: WARN/System.err(7068): at android.database.sqlite.SQLiteClosable.acquireReference(SQLiteClosable.java:55)
01-24 18:10:55.304: WARN/System.err(7068): at android.database.sqlite.SQLiteDatabase.rawQueryWithFactory(SQLiteDatabase.java:1310)
01-24 18:10:55.304: WARN/System.err(7068): at android.database.sqlite.SQLiteDatabase.rawQuery(SQLiteDatabase.java:1253)
01-24 18:10:55.304: WARN/System.err(7068): at de.greenrobot.dao.Query.unique(Query.java:131)
(the rest is where the crud service attempts to query the database and originates in the sync service - omitted for certain reasons) 
```

如果有人可以帮助我找出我做错了什么，将不胜感激。我基本上只需要知道两件事：

1）由于我在 DATABASE.java 中的变量是静态的，它们将被缓存直到 GC 运行。我可以/应该调用 GC 或 finalize()，还是只需要在 CloseDatabase() 中将它们设置为 null？

2）我什至可以关闭我的数据库，因为我的同步依赖于它，如果我不关闭它，我不会遇到泄漏吗？

提前致谢。

编辑：我环顾四周，了解到静态变量实际上确实会持续到 GC 运行。所以，我改写了#1。

编辑 2：我已经更新了我的 DATABASE.java 和对其 Initialize 方法的调用以使用应用程序上下文，它似乎已经清除了一切。当同步重新运行时，我现在在第一个 crud 服务查询中收到 NullPointerException。

编辑 3：空指针异常现已修复。我不小心导致它打开了一个新数据库并且其中不存在实体。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T20:30:51.117

您应该考虑在 Application 范围内持有 DaoSession 对象。它简化了事情。

[将正确的上下文传递给 greendao 的 OpenHelper 构造函数](https://stackoverflow.com/questions/14424099/passing-correct-context-to-greendaos-openhelper-constructor)

[https://stackoverflow.com/a/14430803/551269](https://stackoverflow.com/a/14430803/551269)

PS.：你的 CrudService 看起来有点像 DaoSession。

# java - @ModelAttribute 具有 Collection 属性 - 值被添加到集合中，而不是被替换？

> ID：14513853
> 
> 赞同：0
> 
> 时间：2013-01-25T01:21:52.590
> 
> 标签：java, spring, session, spring-mvc

我有这堂课：

PreApprovalRequest 类具有`headings`在控制器中自动填充的属性（请参阅页面下方的控制器代码）。

```
public class PreApprovalRequest {
    private Long id;
    private String Description;
    private Collection<Headings> headings; //this property!
} 
```

和控制器：

```
@Controller
@SessionAttributes({"preApprovalRequest", "productRecommendations"})
public class RequestController {

    @RequestMapping(value = "/submit",  method = RequestMethod.POST)
    public String submitResults(@ModelAttribute(value = "preApprovalRequest") @Valid PreApprovalRequest preApprovalRequest, BindingResult errors) {
        //HERE: It looks like if I have some headings in the preApprovalRequest object already, the call of this method will not delete those, but will append to the existing list.
        //save object in DB.
        return "dashboard";
    }
} 
```

知道如何让 Spring 替换集合对象而不是添加到它吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T05:01:34.663

我如何理解你的问题是，你不能替换你的`headings`收藏来拥有一个新的`Headings`. 你不能通过以下方式做到这一点吗？

```
preApprovalRequest.setHeadings(new ArrayList<Headings>());
preApprovalRequest.getHeadings().add(heading1); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T10:21:53.387

即使这是您第一次提交表单，也会发生这种情况吗？如果没有，请在您完成控制器中的所有操作后尝试清理缓存。

在您的方法中添加 SessionStatus 并调用“setComplete()”来清理属性。因此，第二次启动流程时，您的缓存将为空，您将不得不使用新的 preApprovalRequest

```
@RequestMapping(value = "/submit",  method = RequestMethod.POST)
public String submitResults(@ModelAttribute(value = "preApprovalRequest") @Valid PreApprovalRequest preApprovalRequest, BindingResult errors, SessionStatus status) {
    /HERE: It looks like if I have some headings in the preApprovalRequest object already, the call of this method will not delete those, but will append to the existing list.
    //save object in DB.

    status.setComplete();
    return "dashboard";
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T11:19:09.543

如果您正在寻找的是动态收缩/扩展类型的列表，那么集合必须是惰性的。Apache commons 集合提供了一个惰性列表类来执行此操作。您可以从以下位置获取 apache commons 集合：[http://commons.apache .org/collections/](http://commons.apache.org/collections/)

所以你的控制器模型可以重写为：

```
public class PreApprovalRequest {
    private Long id;
    private String Description;
    private List headings;

    public PreApprovalRequest()
    {
        headings=LazyList.decorate(
           new ArrayList(),
           FactoryUtils.instantiateFactory(Header.class));
    }

} 
```

将数据绑定到列表背后的想法是，在 html 元素名称属性中跟踪列表项索引：

```
<c:forEach item="${modelAttr.list}" varStatus="listItem">

<form:input type="text" path="list[${listItem.index}]" />

</c:forEach> 
```

# git - .gitignore 不会停止在文件中跟踪更改

> ID：14513854
> 
> 赞同：17
> 
> 时间：2013-01-25T01:21:58.967
> 
> 标签：git, command-line, github, terminal

`.gitignore`git 正在跟踪我对我的文件所做的更改。

文件结构：

```
.gitignore
wp-config.php 
```

内容`.gitignore`：

```
wp-config.php 
```

当我更改`wp-config.php`，然后运行时，`git status`我看到它已被修改：

```
alex$ git status
# On branch master
# Changes not staged for commit:
#   (use "git add <file>..." to update what will be committed)
#   (use "git checkout -- <file>..." to discard changes in working directory)
#
#   modified:   wp-config.php
# 
```

如何停止跟踪此文件？我以为放进去`.gitignore`就够了。

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2013-01-25T01:29:19.760

使用`.gitignore`，只会忽略未跟踪的文件。

添加文件后，不会忽略对该文件的更改。

在这种情况下，您应该使用`assume-unchanged`or`skip-worktree`代替。

```
git update-index --assume-unchanged -- wp-config.php 
```

或者

```
git update-index --skip-worktree -- wp-config.php 
```

# objective-c - 如何判断 NSData 是否真的是 NSImage？

> ID：14513856
> 
> 赞同：2
> 
> 时间：2013-01-25T01:22:09.420
> 
> 标签：objective-c, cocoa, nsdata, nsimage

我通过 Bonjour 协议来回发送数据。所有数据包都以字符串形式发送，`NSData`并且通常转换为字符串；但是如果我需要接收图像怎么办？这是将要进行的过程。

1.  客户要求`NSImage`
2.  服务器将请求`NSImage`作为`NSData`数据包发送
3.  客户收到`NSData`
4.  客户端检查数据是否为图像
5.  ？？？
6.  利润？

我可以尝试将数据转换为图像并捕获错误（这意味着它不是图像）吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-25T01:25:38.473

采用：

```
NSImage *image = [[NSImage alloc] initWithData:data]; 
```

如果`data`不是有效的图像数据，那么`image`将是`nil`.

# php - 使用 mod_rewrite 将不存在的文件夹路由到 PHP 脚本

> ID：14513857
> 
> 赞同：0
> 
> 时间：2013-01-25T01:22:09.827
> 
> 标签：php, mod-rewrite

我正在尝试使用 mod_rewrite 将所有不存在的文件夹路由到特定的 PHP 脚本，但我无法处理它。

这是场景，我有一些文件夹，如 /images、/gallery、/js 等。其中一些在目录下有自己的 .htaccess 文件和 php 脚本......

我要做的是，在不阻止这些文件夹和它们自己的规则的情况下将所有其他请求重定向到 /subject/content.php 文件。

我尝试过这样的事情，但不幸的是不起作用

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^([a-zA-Z0-9]+)/(.*)-(.*).html /subject/content.php?ID=$2 
```

最后，URL 应该像 /sports/123-how-to-lose-weight.html

我也在为类别页面尝试相同的方法。他们应该像 www.blabla.com/sports --> /subject/category.php?cat=sports

（ps：当根据上层规则请求页面时，我在 RewriteLog 上也看不到任何级别 9 的日志记录）

非常感谢您的帮助 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T01:26:36.273

你能试试这些吗？

```
// stop greedy search by "?" while using .*
RewriteRule ^([a-zA-Z0-9]+)/(.*?)-(.*?)\.html /subject/content.php?ID=$2
// or more better regexp, afak \w & \d will wolk too
RewriteRule ^([\w\d-]+)/(\d+)-([\w\d-]+)\.html /subject/content.php?ID=$2
// if not set as RewriteBase /
RewriteRule ^([\w\d-]+)/(\d+)-([\w\d-]+)\.html subject/content.php?ID=$2 
```

但首先：`RewriteEngine On`。:)

# c# - 共享单个类实例

> ID：14513860
> 
> 赞同：0
> 
> 时间：2013-01-25T01:22:20.003
> 
> 标签：c#, class

我正在使用一个类库，其中每个类都必须共享一个记录器类的单个实例。记录器不是我的，即它是我引用的 dll。共享是必要的，因为所有消息都必须附加到在实例化记录器时创建的单个日志消息文件的末尾。

我想过在实例化后通过引用传递记录器类，但这会导致一些非常丑陋的依赖关系。

我在枪下，没有太多时间进行实验。关于实现这一目标的最佳方法的任何建议？我在想一个静态类可能是答案，但我承担的任何实施都需要一些时间，我不想走上死胡同。

======================= 更新 ===================

我认为这是处理这个问题的最快和最干净的方法：

```
 public class Logger
{
    private static LoggerTool _loggerTool;

    public static void WriteLogMessage(string message)
    {

        if (_loggerTool == null)
        {
            // Create a new log file
            string logFileName = "LogFile-" + DateTime.Now.ToString("HHmmss");

            _loggerTool = new LoggerTool(logFileName);
        }

        _loggerTool.LogMessage(message);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T01:26:24.730

创建一个静态类并实现单例模式肯定对您有用，尽管它不是最简洁的方法。由于耦合，它使得单元测试等变得更加困难。

另一种方法是使用依赖注入容器，例如 autofac。

这是一个快速教程，他们使用 DI 创建使用简单的记录器类：http: [//stevescodingblog.co.uk/dependency-injection-beginners-guide/](http://stevescodingblog.co.uk/dependency-injection-beginners-guide/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-25T01:31:04.783

就像是：

```
public static class LogManager
{
    private static Lazy<MyLog> logLazy = new Lazy<MyLog>(() => new MyLog());
    public static MyLog Log
    {
        get{
            return logLazy.Value;
        }
    }
} 
```

然后

```
LogManager.Log.Warning("blah") 
```

从代码中的任何地方。

# programming-languages - Stackoverflow 使用什么网络服务器和编程语言/数据库

> ID：14513861
> 
> 赞同：0
> 
> 时间：2013-01-25T01:22:23.240
> 
> 标签：programming-languages

想知道创建这个网站使用了哪些技术？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T01:25:36.807

[见这里](https://blog.stackoverflow.com/2008/09/what-was-stack-overflow-built-with/)。它是在 C# 中使用 ASP.NET MVC 和 SQL Server 2008 数据库构建的

# android - 如何使用按钮打开/关闭加速度计？

> ID：14513864
> 
> 赞同：1
> 
> 时间：2013-01-25T01:22:52.743
> 
> 标签：android, android-sensors

我一直在努力记录加速度计的数据。尽管如此，我发现很难控制加速度传感器的开/关。我试过有两个按钮，一个叫开始，另一个叫停止。我在 Activity 类的 onCreate() 回调中初始化了我的传感器对象。然后在按钮的 onClick() 回调中，我检查了视图的 id，如果它是开始按钮，我为传感器注册监听，如果它停止，我取消注册它。这不能按预期工作。而 onSensorChanged()，我只显示 x、y、z 加速度。无论我点击什么按钮，甚至不点击任何按钮，传感器都会做它需要做的事情。似乎是一旦传感器初始化，它就一直在读取，没有办法阻止它。是否可以使用两个按钮控制传感器的开/关？

谢谢

**更新：**

```
package com.example.firstapp;

import android.app.Activity;
import android.content.Context;
import android.hardware.Sensor;
import android.hardware.SensorEvent;
import android.hardware.SensorEventListener;
import android.hardware.SensorManager;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.ImageView;
import android.widget.TextView;
public class MainActivity extends Activity implements SensorEventListener,OnClickListener {
private float mLastX, mLastY, mLastZ;
private boolean mInitialized;

private SensorManager mSensorManager;

private Sensor mAccelerometer;

private final float NOISE = (float) 2.0;

/** Called when the activity is first created. */

@Override

public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.activity_main);
Button startButton = (Button) findViewById(R.id.start);
Button stopButton = (Button) findViewById(R.id.start);
startButton.setOnClickListener(this);
stopButton.setOnClickListener(this);
mInitialized = false;
mSensorManager = (SensorManager) getSystemService(Context.SENSOR_SERVICE);
mAccelerometer = mSensorManager.getDefaultSensor(Sensor.TYPE_ACCELEROMETER);
//mSensorManager.registerListener(this, mAccelerometer, SensorManager.SENSOR_DELAY_NORMAL);
}
protected void onResume() {
super.onResume();
mSensorManager.registerListener(this, mAccelerometer, SensorManager.SENSOR_DELAY_NORMAL);
}
protected void onPause() {
super.onPause();
mSensorManager.unregisterListener(this);
}
@Override
public void onAccuracyChanged(Sensor sensor, int accuracy) {
// can be safely ignored for this demo
}
@Override
public void onSensorChanged(SensorEvent event) {
TextView tvX= (TextView)findViewById(R.id.x_axis);
TextView tvY= (TextView)findViewById(R.id.y_axis);
TextView tvZ= (TextView)findViewById(R.id.z_axis);
ImageView iv = (ImageView)findViewById(R.id.image);
float x = event.values[0];
float y = event.values[1];
float z = event.values[2];
if (!mInitialized) {
mLastX = x;
mLastY = y;
mLastZ = z;
tvX.setText("0.0");
tvY.setText("0.0");
tvZ.setText("0.0");
mInitialized = true;
} else {
float deltaX = Math.abs(mLastX - x);
float deltaY = Math.abs(mLastY - y);
float deltaZ = Math.abs(mLastZ - z);
if (deltaX < NOISE) deltaX = (float)0.0;
if (deltaY < NOISE) deltaY = (float)0.0;
if (deltaZ < NOISE) deltaZ = (float)0.0;
mLastX = x;
mLastY = y;
mLastZ = z;
tvX.setText(Float.toString(deltaX));
tvY.setText(Float.toString(deltaY));
tvZ.setText(Float.toString(deltaZ));
iv.setVisibility(View.VISIBLE);
//if (deltaX > deltaY) {
//iv.setImageResource(R.drawable.horizontal);
//} else if (deltaY > deltaX) {
//iv.setImageResource(R.drawable.vertical);
//} else {
//iv.setVisibility(View.INVISIBLE);
//}
}
}
@Override
public void onClick(View v) {
    // TODO Auto-generated method stub
    switch (v.getId()){
        case R.id.start:
            mSensorManager.registerListener(this, mAccelerometer, SensorManager.SENSOR_DELAY_NORMAL);
            break;
        case R.id.stop:
            mSensorManager.unregisterListener(this,mAccelerometer);
            break;
    }

}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T12:40:04.033

只需更新 unregisterListener。

```
 case R.id.stop:
    //          mSensorManager.unregisterListener(this,mAccelerometer);
                mSensorManager.unregisterListener(this);
                break; 
```

# javascript - JS 作为 RequireJS 中的单个 JavaScript 文件

> ID：14513875
> 
> 赞同：1
> 
> 时间：2013-01-25T01:24:00.960
> 
> 标签：javascript, requirejs

我正在使用 RequireJS，但我们的项目已经变得相当大。

```
requirejs([
    'util/utils',
    'util/image_store',
    'models/user_model',
    'util/analytics'
    ],function() { /* do start here */ }); 
```

我已经采用了初始组并将这些文件连接在一起，所以现在我想这样做： requirejs([ 'initial_download.js' ],function() { /* do start here */ });

现在我如何让其他文件知道，比如使用模型/用户模型，他们不需要自己下载需要已经定义的文件？

像这样在假设的 UserView.js 中：

```
define(['models/user_model'],function(UserModel) {
   function UserView() { /* */ }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T04:04:29.897

当您连接文件时，您需要将每个文件的内容包装到一个命名`define`调用中。这样，当它加载时，模块会自行复活，就好像它们是从单个文件中加载的一样：

```
;(function() {

    define('util/utils',function(){
        return utilsObject
    })

    define('util/image_store',function(){
        return imageStoreObject
    })

    define('models/user_model',function(){
        return userModelObject
    })

    define('util/analytics',function(){
        return analyticsObject
    })

    // you need this to make this an AMD module.
    // it does not matter what it returns, as your
    // main payload is above.
    define(function(){})

})(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T01:27:23.450

我相信您可以使用 Require.js 优化器为您执行此操作：[http ://requirejs.org/docs/optimization.html](http://requirejs.org/docs/optimization.html)

# php - JS调用外部运行一个php脚本

> ID：14513878
> 
> 赞同：0
> 
> 时间：2013-01-25T01:24:55.863
> 
> 标签：php, javascript

我有一个 PHP 脚本来更新数据库，我已经确定了 PHP 端，但是我遇到了一些麻烦的 JS。下面是我的代码：

```
$JSON = json_decode($Arg);
$Username = $JSON['Username'];
$Page = $JSON['Location'];

$Query = $MySQLi->prepare("INSERT INTO Requests (username, page) VALUES (?, ?)");
$Query-> bind_param("ss", $DUsername, $Page);
$Query->execute();

$Query_2 = $MySQLi->query("UPDATE RequestStats SET Count = Count+1, LastRequest='NOW()'"); 
```

而在用户方面，

```
if (isset($_POST['Request']))
{
 $EmptyArray = array();
 $EmptyArray[] = $Username;
 $EmptyArray[] = $_SERVER['REQUEST_URI'];
 json_encode($EmptyArray);
} 
```

我需要做的是调用 Javascript/AJAX 块将请求转发到我的外部页面，并在不刷新的情况下动态更新数据库。请求发出后，回显一个框，说“您的请求已经发出，你是数字：`number`内联”

我不知道如何做到这一点，有人可以提供一些帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T01:54:55.533

这可以通过使用 JQuery 来完成...查看我使用过的手册：http: [//api.jquery.com/click/](http://api.jquery.com/click/)

用户端：

```
<body>
<div id="test">
<input type="button" value="Make A Request">
</div>

<script>
$("#test").click(function () {
    $.ajax({
        url: 'page.php',
        success: function(){
             alert('Created');
        }
    });
    return false;
});
</script>
</body> 
```

# php - 格式化数组输出

> ID：14513879
> 
> 赞同：0
> 
> 时间：2013-01-25T01:24:57.563
> 
> 标签：php, arrays, json

我怎样才能得到这样的数组：

```
$array = array(
    "test1" => "blah1",
    "test2" => "blah2",
); 
```

转换成这样的字符串：

```
$string = {"test1":"blah1","test2":"blah"} 
```

数组的大小可能会有所不同，因此它必须是动态的。

提前谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-25T01:25:42.580

这是 JSON。使用[`json_encode()`](http://us3.php.net/manual/en/function.json-encode.php).

# amazon-s3 - 设置默认 HTTP 标头“缓存控制”不适用于 S3 浏览器

> ID：14513881
> 
> 赞同：0
> 
> 时间：2013-01-25T01:25:16.177
> 
> 标签：amazon-s3

我正在尝试使用**S3 Browser** Windows 客户端（[http://s3browser.com/](http://s3browser.com/)）将“Cache-Control”标头默认为“max-age=0”。

它不工作。我知道这一点，因为一旦我上传了一个文件（从我的 Web 服务器到 AWS S3），标题就不存在了。

这是我的默认 HTTP 标头设置的样子：

![在此处输入图像描述](../Images/8fdededbd1fca2fa41e445c81ace2d3b.png)

**有谁知道为什么没有为新上传的文件设置此标头？**

我正在运行 S3 浏览器版本 3-7-5。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T04:35:46.410

事实证明，我误解了 Default HTTP Header 的作用。我认为如果我设置默认标头，即使我将文件从 Web 服务器上传到 S3，也会设置标头。这不是真的; 默认 HTTP 标头仅影响从 S3 浏览器程序上传的文件。

# powershell - 比较具有相似内容的两个数组

> ID：14513883
> 
> 赞同：1
> 
> 时间：2013-01-25T01:25:24.303
> 
> 标签：powershell, compare, switch-statement

由于 Compare-Object 不能采用通配符，我将如何比较两个数组的内容，这些数组的长度或内容不完全相同，但足够相似，可以让通配符集或正则表达式捕获它们。

例子：

```
$form = "First Name","Last Name","Address","Phone","Nickname","Fax Number"
$data = "First Name ","Last  Name","Street Address","Phone number","",Fax" 
```

我可以在不执行一堆 if 语句和运算符的情况下比较数组吗？开关可能会更优雅，但我只是希望能够在与此类似的一行上执行此操作：

```
Compare-Object ("*$form*) ("*$data*") 
```

而不是这样：

```
for($x=0;$x -lt $form.Count;$x++)
{
    [string]$xx = $x   
    if($form[$x] -like "*$data[$x]*" -or $data[$x] -like "*form[$x]*" -and $data[$x] -ne $null -and $form[$x] -ne $null)
   {
      $form[$x]
      $data[$x]
   }
   elseif($form[$x] -eq $null -and $data[$x] -eq $null)
   {
       "Form index $xx and Data index $xx are null"
   }
   elseif($form[$x] -eq $null)
   {
      "Form index $xx is null"
   }
   elseif($data[$x] -eq $null)
   {
       "Data index $xx is null"
   }
   else
   {
       "Data index $xx and Form index $xx are not even close to the same"
   }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T13:13:05.283

我怀疑您是否能够找到已经具有您在示例代码中概述的“智能”的内置内容。

您始终可以使自己的函数或 cmdlet 具有“单行”功能，从而允许您重复调用它。或者作为替代方案，您可以编写自己的[自定义比较器](http://huddledmasses.org/custom-icomparers-in-powershell-and-add-type-for-v1/)。

# ruby-on-rails - 使用 Rails 添加的引导页脚时，jqPlot 根本不显示

> ID：14513884
> 
> 赞同：3
> 
> 时间：2013-01-25T01:25:32.860
> 
> 标签：ruby-on-rails, twitter-bootstrap, jqplot

我有一个静态页面，它使用 jqplot 显示一个简单的条形图，当我将该代码放入 Rails 视图时，它不显示任何内容。

1.  javascript 确实被调用了，因为如果我将警报扔到 showGraph() 函数中，它会在页面加载时显示。
2.  服务器不会抱怨找不到 javascript 或 CSS。
3.  如果我将 Rails 生成的代码放入公用文件夹中以使其静态显示，则图表不会显示。
4.  但是，如果我在页脚中取出包含 "script src="/assets/jquery.js?body=1" type="text/javascript"" 的行，那么图表就会显示
5.  如果我改为删除 jqplot 包含之前对 jquery.min.js 的调用，则行为没有区别。

编辑： 6\. 更多的胡闹表明，如果我在包含 jquery.jqplot.min.js 之后的任何时间包含 jquery.js，则该图表不会出现。

是否可以在不弄乱页脚的情况下显示此图表？有没有一种我应该知道的行之有效的方法来正确地做到这一点？

这是 Rails 生成的 HTML，减去了一些不影响我正在谈论的行为的内容：

```
<!DOCTYPE html>
<html>
<head>

  <link href="/assets/application.css?body=1" media="all" rel="stylesheet" type="text/css" />
<link href="/assets/custom.css?body=1" media="all" rel="stylesheet" type="text/css" />
<link href="/assets/users.css?body=1" media="all" rel="stylesheet" type="text/css" />
  <script src="/assets/jquery.js?body=1" type="text/javascript"></script>
<script src="/assets/jquery_ujs.js?body=1" type="text/javascript"></script>
<script src="/assets/users.js?body=1" type="text/javascript"></script>
<script src="/assets/application.js?body=1" type="text/javascript"></script>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>

  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="author" content="">

  <!-- Le styles -->
    <link href="/assets/bootstrap.css?body=1" media="screen" rel="stylesheet" type="text/css" />
    <style type="text/css">
    body {
    padding-top: 60px;
    padding-bottom: 40px;
    }
    </style>
    <!--<link href="bootstrap/css/bootstrap-responsive.css" rel="stylesheet">-->

<!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
    <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

<!-- Le fav and touch icons -->
    <link rel="shortcut icon" href="/images/favicon.ico" />

    <style type="text/css">
      .navbar .brand {
        //float: right;
        padding-bottom: 6px;
        padding-top: 6px;
        //font-weight: 400;
      }
      .hero-unit h1 {
      //font-size:48px;
      }
      .hero-unit p {
      //font-size:24px;
        padding-top:12px;
      }
      .navbar .nav > li > a {
      line-height: 72px;
      padding-left: 15px;
      padding-right: 15px;
      font-size: 18px;
      }
    </style>
    <style type="text/css">
      body {
      padding-top: 120px;
      padding-bottom: 40px;
      font-size: 14px;
      }
      footer {
      font-size:12px;
      }
      legend {margin-bottom: 10px;}
    </style>
    <style>
      table.cleanlink td a {text-decoration:none; color:inherit; display:block; padding:0px; height:100%;}
      table.cleanlink td a:hover {text-decoration:none; color:inherit;}
      div.data-scroller {width:910px; max-height:400px; overflow:scroll;}
    </style>
    <style>
      ul.nav li.dropdown:hover ul.dropdown-menu {display: block;}
      ul.nav li.dropdown ul.dropdown-menu {margin-top: 0px;}
      //a.menu:after, .dropdown-toggle:after {content: none;}
    </style>

</head>
<body>

    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <a class="brand" href="/home"><img src="/images/B4-l-s-m-h-i-2-273x80.png" /></a>

          <ul class="nav">
</ul>          <ul class="nav pull-right">
              <li class="dropdown">
                <a href="/account" class="dropdown-toggle" data-toggle="dropdown">My Account</a>
                <ul class="dropdown-menu pull-right">
                  <!--<li class="divider"></li>-->
                  <li><a href="/signout" data-method="delete" rel="nofollow">Sign out</a></li>
                </ul>
</li></ul>        </div>
      </div>
    </div>

    <div class="container">

      <html>
<script language="javascript" type="text/javascript" src="/assets/jquery.min.js"></script>
<script language="javascript" type="text/javascript" src="/assets/jquery.jqplot.min.js"></script>
  <script class="include" language="javascript" type="text/javascript" src="/assets/src/plugins/jqplot.barRenderer.min.js"></script>
  <script class="include" language="javascript" type="text/javascript" src="/assets/src/plugins/jqplot.categoryAxisRenderer.min.js"></script>
  <script class="include" language="javascript" type="text/javascript" src="/assets/src/plugins/jqplot.pointLabels.min.js"></script>

<script>

function showGraph() {
    var s1 = [20, 3, 2, 1];
    // Can specify a custom tick Array.
    // Ticks should match up one for each y value (category) in the series.
    var xticks = ['A', 'B', 'C', 'D'];

    var plot1 = $.jqplot('chart1', [s1], {
        // The "seriesDefaults" option is an options object that will
        // be applied to all series in the chart.
        seriesDefaults:{
            renderer:$.jqplot.BarRenderer,
            pointLabels: { show: true, location: 'n', edgeTolerance: -15 },
            rendererOptions: {fillToZero: true}
        },
        axes: {
            // Use a category axis on the x axis and use our custom ticks.
            xaxis: {
                renderer: $.jqplot.CategoryAxisRenderer,
                ticks: xticks
            },
            // Pad the y axis just a little so bars can get close to, but
            // not touch, the grid boundaries.  1.2 is the default padding.
            yaxis: {
                pad: 1.05,
                tickOptions: {formatString: '%d'}
            }
        }
    });
};
$(document).ready(showGraph);

  </script>
<div id="chart1" style="height:400px;width:600px; "></div>
</html>
    </div> <!-- /container -->

    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="/assets/jquery.js?body=1" type="text/javascript"></script>
    <script src="/assets/bootstrap-transition.js?body=1" type="text/javascript"></script>
    <script src="/assets/bootstrap-alert.js?body=1" type="text/javascript"></script>
    <script src="/assets/bootstrap-modal.js?body=1" type="text/javascript"></script>
    <script src="/assets/bootstrap-dropdown.js?body=1" type="text/javascript"></script>
    <script src="/assets/bootstrap-scrollspy.js?body=1" type="text/javascript"></script>
    <script src="/assets/bootstrap-tab.js?body=1" type="text/javascript"></script>
    <script src="/assets/bootstrap-tooltip.js?body=1" type="text/javascript"></script>
    <script src="/assets/bootstrap-popover.js?body=1" type="text/javascript"></script>
    <script src="/assets/bootstrap-button.js?body=1" type="text/javascript"></script>
    <script src="/assets/bootstrap-collapse.js?body=1" type="text/javascript"></script>
    <script src="/assets/bootstrap-carousel.js?body=1" type="text/javascript"></script>
    <script src="/assets/bootstrap-typeahead.js?body=1" type="text/javascript"></script>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T14:11:00.587

看起来您正在文档中的三个位置加载 jquery 库？

为什么不将其添加到资产管道中？

在 app/assets/javascripts/application.js 中：

`//= require jquery`

这应该会加快页面加载速度，并且您不必在每个页面上都包含脚本标签。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T00:48:58.060

好的，这是我为使其正常工作所做的：删除了该行：

```
<%= javascript_include_tag "jquery" %> 
```

从 [appdir]/app/views/shared/_bootstrap2.html.erb 生成违规行（在页脚中生成行）

并将其放入 [appdir]/app/views/shared/_bootstrap.html.erb （生成标题中的行）。

这并不理想，因为这意味着我们在加载页面的其余部分之前加载 jquery，所以我仍然对更流畅的解决方案感兴趣。

# f# - 如何解决这个关于 out 和 tuple 形式的互操作问题？

> ID：14513891
> 
> 赞同：1
> 
> 时间：2013-01-25T01:26:06.600
> 
> 标签：f#

我在 F# 中做了一个函数

```
let tryParseArray tryParse (separator:char) (line: string) =
    // inside the function I use the tuple form of tryParse 
```

如果我以这种方式调用它，它工作正常：`tryParseArray Int32.TryParse ',' "2,3,2,3,2"`

现在我希望这个函数也可以在 C# 中使用，所以我这样做了：

```
static member TryParseArray (line, tryParse, separator) =
    line |> tryParseArray tryParse separator 
```

然后我意识到`TryParseArray`实际上需要`tryParse`参数 as `FSharpFunc`，这对 C# 一点也不友好，所以我尝试了这个：

```
static member TryParseArray (line, [<Out>] tryParse: (string * byref<'a> -> bool), separator) =
    line |> tryParseArray tryParse separator 
```

但现在`tryParseArray`不接受`tryParse`作为有效参数（类型错误）

我应该怎么办？

我希望在 C# 中我也可以`TryParseArray("2,3,2,3,2", Int32.TryParse, ',')`调用

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-25T01:37:37.673

您可以使用自定义委托类型将此函数公开给 C#：

**已编辑**

```
// F#
module Lib

let tryParseArray parser (line : string) (sep : char) = 
    // don't know your exact implementation so again just guessing...
    line.Split sep
    |> Array.choose (fun el ->
        match parser el with
        | true, el -> Some el
        | false, _ -> None
        )

open System.Runtime.InteropServices
type TryParse<'R>  = delegate of str : string * [<Out>] res : byref<'R> -> bool

type T = 
    static member TryParse(line : string, tryParse : TryParse<'R>, separator : char) : 'R[] = 
        tryParseArray tryParse.Invoke line separator

 //C# 
 var r = Lib.T.TryParse<int>("1,2,3", int.TryParse, ','); 
```

注意：在 C# 方面，您需要明确指定 TryParse 的类型参数（[为什么匿名委托/lambdas 不推断 out/ref 参数的类型？](https://stackoverflow.com/questions/1990592/why-dont-anonymous-delegates-lambdas-infer-types-on-out-ref-parameters)）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T16:15:04.843

desco 的解决方案很好，但如果你想避免`byref`，你可以这样做：

```
type TryParse<'R>  = delegate of string -> bool * 'R

module Util =
  [<CompiledName("TryParseArray")>]
  let tryParseArray (tryParse: TryParse<_>) (separator:char) (line: string) = ... 
```

可以像这样从 F# 调用：

```
let res = Util.tryParseArray (TryParse(Int32.TryParse)) ',' "1,2,3" 
```

并且，使用以下包装方法：

```
static class TryParse {
    public static Tuple<bool, int> Int32(string s) {
        int i;
        var b = System.Int32.TryParse(s, out i);
        return Tuple.Create(b, i);
    }
} 
```

像这样，来自 C#：

```
var res = Util.TryParseArray(TryParse.Int32, ',', "1,2,3"); 
```

# python - python中的dir函数

> ID：14513892
> 
> 赞同：1
> 
> 时间：2013-01-25T01:26:10.447
> 
> 标签：python

```
help(dir): 
```

> ```
> dir([object]) -> list of strings        
> If called without an argument, return the names in the current scope.  
> Else, return an alphabetized list of names comprising (some of) the attributes  
> of the given object, and of attributes reachable from it.  
> If the object supplies a method named __dir__, it will be used; otherwise  
> the default dir() logic is used and returns:  
>   for a module object: the module's attributes.  
>   for a class object:  its attributes, and recursively the attributes  
>     of its bases.  
>   for any other object: its attributes, its class's attributes, and  
>     recursively the attributes of its class's base classes. 
> ```

我发现 dir 内置函数的帮助文件中可能存在问题。例如：

```
class  AddrBookEntry(object):
   'address book entry class'
   def __init__(self,nm,ph):
     self.name=nm
     self.phone=ph
   def updatePhone(self,newph):
     self.phone=newph
     print 'Updated phone # for :' ,self.name

dir(AddrBookEntry('tom','123'))
['__class__', '__delattr__', '__dict__', '__doc__', '__format__', '__getattribute__', '__hash__', '__init__', '__module__', '__new__', '__reduce__', '__reduce_ex__', '__repr__', '__setattr__', '__sizeof__', '__str__', '__subclasshook__', '__weakref__', 'name', 'phone', 'updatePhone'] 
```

1.`dir()`可以列出对象的方法，不仅是属性
是`updatePhone`方法，不是属性。

2.我怎么知道哪个是属性，哪个是dir（）输出中的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T02:01:44.300

您会感觉到区别，但方法*是*属性，因此唯一确定的方法是检查。

这是一个可以为您分解的函数：

```
def dirf(obj=None):
    """Get the output of dir() as a tuple of lists of callables and non-callables."""
    d = ([],[])
    for name in dir(obj):
        if callable(getattr(obj, name, locals().get(name))):
            d[0].append(name)
        else:
            d[1].append(name)
    return d 
```

`inspect.getmembers`有一个很好的快捷方式来获取可调用的成员：

```
from inspect import getmembers
getmembers(obj, callable) 
```

但要注意它自己的谓词！`inspect.ismethod`仅适用*于在 Python 中实现*`True`的方法。许多核心对象的方法（例如 ）不符合该标准。*`[].sort`*

 ** * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-25T01:28:46.233

1.  方法*是*Python 中的属性。

2.  检查它们的各种属性。方法具有`im_*`属性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-25T01:38:43.027

帮助文件是正确的。在 Python 中，方法以与任何其他属性完全相同的方式附加到类（以及这些类的实例）。为了区分简单属性和可调用属性，您必须取消引用它：

```
>>> type(AddrBookEntry('tom','123').phone)
<type 'str'>
>>> type(AddrBookEntry('tom','123').updatePhone)
<type 'instancemethod'> 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-25T02:01:14.677

如果您想知道对象的属性，请使用`__dict__`属性。例如：

```
>>> entry = AddrBookEntry('tom','123')
>>> entry.__dict__
{'name': 'tom', 'phone': '123'} 
```

`dir()`用于调试。在生产代码中使用它可能是个坏主意。它返回的确切内容不是很明确。*

# vb.net - 数据绑定 datagridview 的未提交行上的编程条目不会导致出现新行。选择后，条目消失

> ID：14513893
> 
> 赞同：1
> 
> 时间：2013-01-25T01:26:14.990
> 
> 标签：vb.net, datagridview, databound

在我的新工作中，我有一个培训项目，并且遇到了一个非常小的但至关重要的挫折。

我有一个 datagridview 控件绑定到从 xml 文件读取的数据集。它有 3 列：项目、价格、卡路里。我应该计算价格和卡路里的平均值，并将它们放在从 xml 读取的条目下方的行中。这很好用，除了当我用平均值填充底行时，该行保持未提交状态，当用户选择该行时，值消失。如果您手动在该行中键入一个条目，它会按预期提交并出现一个新的未提交行。如何从以编程方式放置在底行的计算条目中获得相同的行为？由于 dgview 是数据绑定的，我不能做 dgview.rows.add 或类似的事情。我的基本上是这样的：

```
Private Sub PopulateDGView(ByVal sFilePath As String)
Dim dgview As New DataGridView
Dim ds As New dataset
Dim dPriceAvg As Double = 0
Dim dCaloriesAvg As Double = 0
ds.readxml(sFilePath)

dgview.datasource = ds
dgview.DataMember = "food"

'[Here I loop through the rows, sum the values and divide by the number of rows to get
 'the average values for the columns then write the following]

dgview.Rows(dgview.Rows.GetLastRow(DataGridViewElementStates.Displayed)). _
Cells("Item").Value = "Average"
dgview.Rows(dgview.Rows.GetLastRow(DataGridViewElementStates.Displayed)). _
Cells("Price").Value = dPriceAvg.ToString
dgview.Rows(dgview.Rows.GetLastRow(DataGridViewElementStates.Displayed)). _
Cells("Calories").Value = dCaloriesAvg.ToString
End Sub 
```

这会将平均值放在未提交的行上，这是唯一可用的未填充行。我认为这会导致出现新行，但事实并非如此。当我提到的行选择行时，平均行仍然不承诺，并且当我提到该行上的所有数据都消失了。如何强制该行提交并在其下方显示一个新的未提交行？正如一些附加信息一样，我不能使用 microsoft.visualbasic 库。任何帮助表示赞赏。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T09:21:35.290

是的，您对某些内容进行数据绑定的原因是因为您希望对该项目的更改出现在设计视图中和/或能够手动将数据添加到源中。

因此，不是以编程方式将内容添加到显示数据集的项目中，而是将数据添加到数据集，然后显示它。

```
ds.tables(0).Rows.Add() 
```

# google-maps - Bing 中的 Google 地图 GLatLng 等效项

> ID：14513894
> 
> 赞同：2
> 
> 时间：2013-01-25T01:26:17.110
> 
> 标签：google-maps, bing-maps

我有这个谷歌地图代码行，我需要在必应地图中找到对应的代码

```
sb.Append("map.addOverlay(createMarker(new GLatLng(" + dataRow[7].ToString() + "," + dataRow[8].ToString() + "),"); 
```

我猜**新的 GLatLng**采用这两个值（数据行 7 和数据行 8）并将它们转换为 xy 值，如下所示：

```
 Ba: -78.624148
    x: -78.624148
    Xd: 35.727867
    y: 35.727867 
```

我如何获取两个两个值并将它们转换为 XY 值以与 Bing 图钉一起使用，因为我不能使用 GLatLng 和 Bing。

注意：我正在将我们的地图从 google 转换为 Bing。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-08T16:27:42.700

必应地图使用 Microsoft.Maps.Location 来表示坐标。这是一个如何添加图钉的简单示例：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
   <head>
      <title>Add default pushpin</title>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
      <script type="text/javascript" src="http://ecn.dev.virtualearth.net/mapcontrol/mapcontrol.ashx?v=7.0"></script>
      <script type="text/javascript">
      var map = null;

      function getMap()
      {
        map = new Microsoft.Maps.Map(document.getElementById('myMap'), {credentials: 'Your Bing Maps Key'});
      }

      function addDefaultPushpin()
      {
        var pushpin= new Microsoft.Maps.Pushpin(map.getCenter(), null); 
        map.entities.push(pushpin);
      }
      </script>
   </head>
   <body onload="getMap();">
      <div id='myMap' style="position:relative; width:400px; height:400px;"></div>
      <div>
         <input type="button" value="AddDefaultPushpin" onclick="addDefaultPushpin();" />
      </div>
   </body>
</html> 
```

您可以在此处找到有关 Bing 地图的完整文档：http: [//msdn.microsoft.com/en-us/library/dd877180.aspx](http://msdn.microsoft.com/en-us/library/dd877180.aspx)

# wordpress - .htaccess 404 重定向无法正常工作

> ID：14513906
> 
> 赞同：1
> 
> 时间：2013-01-25T01:27:19.017
> 
> 标签：wordpress, .htaccess, redirect, http-status-code-404

我最近将我的网站转移到另一个域。我有旧域将旧链接重定向到启动页面。虽然因为我使用了 wordpress 之前的链接，例如 - [http://scottramsay.co/services/multi-track-mixing-mastering/](http://scottramsay.co/services/multi-track-mixing-mastering/)我得到了一个 css 错误。

重定向在没有第二个反斜杠时起作用，尽管当重定向不读取 css 文件时。

例子：

工作正常 - scottramsay.co/services

不起作用 - scottramsay.co/services/multi-track-mixing-mastering/

我将如何解决这个问题？我猜这与 .htaccess 文件有关。

**.htaccess 代码当前：** ErrorDocument 404 /

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T01:32:30.017

我认为你在编码中有一个更基本的问题。并排查看页面，他们都试图从“./”加载 CSS 和 JavaScript，这基本上意味着“这个目录”。但它只能在一个地方。

```
<link rel="stylesheet" href="./enter.css" type="text/css">
<meta http-equiv="imagetoolbar" content="no"> 

<script type="text/javascript" src="./jquery.js"></script>
<script type="text/javascript" src="./enter.js"></script> 
```

如果没有看到完整的`.htaccess`内容，我建议您为这些项目创建完整的 URL，如下所示。特别是如果这是一个可以轻松设置基本/根 URL 的 WordPress 站点。：

```
<link rel="stylesheet" href="http://scottramsay.co/enter.css" type="text/css">
<meta http-equiv="imagetoolbar" content="no"> 

<script type="text/javascript" src="http://scottramsay.co/jquery.js"></script>
<script type="text/javascript" src="http://scottramsay.co/enter.js"></script> 
```

# java - 如何在不打开 Web 浏览器的情况下使用 Java 程序执行 JSP 程序？

> ID：14513910
> 
> 赞同：-1
> 
> 时间：2013-01-25T01:27:51.227
> 
> 标签：java, jsp, servlets, printing, header

我要执行的 JSP 脚本用于打印目的。执行时会弹出一个打印对话框。这就是我想在我的 java 程序中做的事情。当单击 Java GUI 上的按钮时，JSP 页面的打印对话框将在不打开浏览器的情况下弹出，这就是我想要发生的事情。

另一个选项我只需要知道使用 java 程序打印的其他方式，我只是如何打印整个面板，但是现在我在打印超过 1 页时遇到了问题。如何在每个打印页面中放置标题？类似的东西，我可以在 JPanel 中放置另一个 JPanel，如何？顺便说一句，我是该网站的新手，也是 Java 编程的新手。

希望你能帮助我，在此先感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T02:17:00.277

*.jsp 是用于服务器端处理 http 请求的模板。处理的结果是作为http响应返回给客户端的html网页。

某些 IDE，例如 Eclipse，允许您预览 *.jsp 页面。但这是页面的基本预览，实际页面可能看起来很不一样。

预览网页以实际查看它的最佳方式。

有免费的轻量级 Web 服务器可供下载，它们可以轻松集成到大多数现代 IDE 中。在其中一台服务器上安装您的战争并查看实际页面应该没有问题。

# xml - XPath - 基于相同条件从不同路径检索多个值

> ID：14513923
> 
> 赞同：2
> 
> 时间：2013-01-25T01:29:55.393
> 
> 标签：xml, xpath, xml-parsing

这是我的 XML

```
<root>
   <entry id="1">
      <value name="ID">11</value>
      <value name="ENABLE">0</value>
      <value name="NAME">USER1</value>
   </entry>
   <entry id="2">
      <value name="ID">11</value>
      <value name="ENABLE">0</value>
      <value name="NAME">USER2</value>
   </entry>
   <entry id="3">
      <value name="ID">12</value>
      <value name="ENABLE">0</value>
      <value name="NAME">USER1</value>
   </entry>
</root> 
```

**我需要一个 XPath 查询来检索所有11**`id`的名称。

 **我试过：

```
String xpath = "/root/entry/value[@name=ID/text()='11']/value[@name='NAME']";
String xpath = "/root/entry/value[@name=ID/text()='11']/NAME"; 
```

有人能告诉我我的查询有什么问题吗？

**编辑：**

预期输出：

```
USER1
USER2 
```

这两个都有 ID = 11

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T02:07:20.297

```
/root/entry[value[@name="ID" and .=11]]/value[@name="NAME"] 
```

或者

```
/root/entry/value[@name="ID" and .=11]/../value[@name="NAME"] 
```

或者

```
/descendant::entry[value=11 and value/@name="ID"]/value[@name="NAME"] 
```

或者

```
//value[.=11]/@name[.="ID"]/ancestor::entry/value[@name="NAME"] 
```

或许多其他变体

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-25T02:41:09.237

这将是正确的路径：

```
/root/entry[value[@name = 'ID'] = 11]/value[@name = 'NAME'] 
```

要检索节点列表，您需要使用带有 returnType 参数的 xPath.evaluate() 版本：

```
InputSource document = new InputSource(new FileInputStream("user1.xml"));
String xpath = "/root/entry[value[@name = 'ID'] = 11]/value[@name = 'NAME']";
NodeSet result = (NodeSet)xPath.evaluate(xpath, document, XPathConstants.NODESET); 
for(int index = 0; index < result.getLength(); index ++) {      
    Node node = result.item(index);
    String name = node.getNodeValue();
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-25T04:36:49.847

**使用**：

```
/*/*[*[@name='ID'] = 11]/*[@name='NAME'] 
```

**基于 XSLT 的验证**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>

 <xsl:template match="/">
  <xsl:copy-of select="/*/*[*[@name='ID'] = 11]/*[@name='NAME']"/>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时**：

```
<root>
    <entry id="1">
        <value name="ID">11</value>
        <value name="ENABLE">0</value>
        <value name="NAME">USER1</value>
    </entry>
    <entry id="2">
        <value name="ID">11</value>
        <value name="ENABLE">0</value>
        <value name="NAME">USER2</value>
    </entry>
    <entry id="3">
        <value name="ID">12</value>
        <value name="ENABLE">0</value>
        <value name="NAME">USER1</value>
    </entry>
</root> 
```

**对 XPath 表达式求值，并将该求值的结果（所有选定节点）复制到输出**：

```
<value name="NAME">USER1</value>
<value name="NAME">USER2</value> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-25T01:54:13.177

试试这个，

String xpath = "/root/entry[value[@name='ID' and text()='11']]/value[@name="NAME"]";

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-25T05:30:32.467

采用：

```
//entry[value[@name = 'ID'] = 11]/value[@name = 'NAME'] 
```**

# r - lapply，指定和绘制数据框中的多个变量

> ID：14513927
> 
> 赞同：1
> 
> 时间：2013-01-25T01:30:49.343
> 
> 标签：r, list, dataframe, lapply, substitution

我在函数语句中结合 lapply、substitute、print、plot 和 list 没有任何成功。有人可以指导我修改此代码的方法吗？我想：

1.  自动绘制数据框中的一些但不是所有字段与 df 中的第一个字段
2.  指定要绘制的字段
3.  将结果写入文件

这些字段是数字的。谢谢。

```
brg<-as.data.frame(sqlFetch(channel,"Bearing"))               
is.data.frame(brg)                                            

varlist<-names(brg)[c(6,8,10,12)]                             
varlist                                                       
pdf(file="brg%d.pdf")                                         
figures<-lapply(varlist,function(x) {                         
print(plot(substitute(brg[c(1,i)], (list(i = as.name(x))))))
}) 
```

更新：感谢您的评论。这是此代码的两个工作版本，带有轴标签（df 从 SQL Server 中读取）：

```
 #vers. 1
     brg<-as.data.frame(sqlFetch(channel,"Bearing"))
     is.data.frame(brg)
     dim(brg)
     head(brg)
     names(brg)<-tolower(names(brg))
     names(brg)
     varlist<-names(brg)[c(6,8,10,12)]
     varlist
     pdf(file="brgd.pdf")
     for (x in varlist) plot(brg[,1],brg[,x], xlab=names(brg[1]),ylab=as.name             (x))           
     dev.off()

     #vers. 2
     brg<-as.data.frame(sqlFetch(channel,"Bearing"))
     is.data.frame(brg) 
     dim(brg)
     head(brg)
     names(brg)<-tolower(names(brg))
     names(brg)
     varlist<-names(brg)[c(6,8,10,12)]
     varlist
     pdf(file="brg1.pdf")
     figures<-lapply(varlist,function(x) {

     (plot(brg[,1],brg[,x], ylab=as.name(x)))
     })
     dev.off() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T02:00:54.120

真的不清楚你想做什么，但我仍然对你的代码有一些评论。我认为您在这里尝试使一个简单的任务复杂化，即绘制一些变量并将图保存在文件中。

1.  无需使用`substitute`（它会给出符号），您可以使用列名对 data.frame 进行子集化。
2.  无需在 `lapply`此处使用，因为您不保存结果，只是想重复绘图。
3.  为什么在文件名中使用 %。
4.  您必须在绘图后关闭设备才能将其解锁。

    ```
    brg<- data.frame(a=rnorm(10),b= rnorm(10),   ## a reproducible data frame
                     c=rnorm(10))
    varlist<-names(brg)[c(1,2)] 
    pdf(file="brgd.pdf")                                                   
    for (x in varlist)   plot(brg[,1],brg[x])           ## the substitue would give brg[c(1,a)] !!
    dev.off() 
    ```

# java - BindingResult 出现错误时不显示任何错误

> ID：14513930
> 
> 赞同：1
> 
> 时间：2013-01-25T01:31:05.560
> 
> 标签：java, spring, model-view-controller, spring-mvc, spring-annotations

我正在对我的一个表单使用基于注释的验证，但我无法使用我在 JSP 文件中使用的**form:errors 标记显示任何错误。**当我尝试调试它时，我发现 BindingResult 也没有显示任何错误，但我将文本框留空以测试验证。非常感谢任何指针，为什么我无法验证它。

下面是我的控制器类

```
@Controller
public class RequestController {
@RequestMapping(value = "/requestform", method = RequestMethod.GET)
public ModelAndView request() {
return new ModelAndView("requestform", "command", new RequestForm());
}

@RequestMapping(value = "/showResponse", method = RequestMethod.POST)
public String showResponse(@ModelAttribute("berequest") @Valid RequestForm berequest, BindingResult errors,
    ModelMap model) {

if (errors.hasErrors()) {
    return "requestform";
} else {

StringBuilder url = new StringBuilder()
            .append("http://" + berequest.getMachineName() + ":" + berequest.getPortNumber()
                + "/service/Service/v1/get/").append("USERID=" + berequest.getUserId())
            .append(",")
            .append("debugflag=" + berequest.isDebugFlag()).append("/")
            .append(berequest.getAttributeNames());

    RestTemplate restTemplate = new RestTemplate();

    String result = restTemplate.getForObject(url.toString(), String.class);

    ObjectMapper mapper = new ObjectMapper();
    Object json = mapper.readValue(result, Object.class);
    String indented = mapper.defaultPrettyPrintingWriter().writeValueAsString(json);

    model.addAttribute("response", (indented));

    return "resultform";
    }
} 
```

下面是我的模型课-

```
import javax.validation.constraints.NotNull;

import org.hibernate.validator.constraints.NotBlank;
import org.hibernate.validator.constraints.NotEmpty;

public class RequestForm {

@NotNull
@NotBlank
@NotEmpty
private String userId;

.....
} 
```

下面是我的 requestform.jsp 文件

```
 <fieldset>
        <legend>User Details:</legend>
            <form:label path="userId" for="input-one" class="float"><strong>User Id:</strong></form:label><br />
            <form:input path="userId" class="inp-text" name="input-one-name" id="input-one" type="text" size="100" />
            <form:errors path="userId" cssClass="error"/><br />

    </fieldset> 
```

下面是我的 context.xml 文件

```
 <!-- DispatcherServlet Context: defines this servlet's request-processing infrastructure -->

    <!--  Allow proxys -->
    <aop:aspectj-autoproxy />

    <!-- Enables the Spring MVC @Controller programming model -->
    <mvc:annotation-driven>
            <mvc:message-converters>
              <!--  Support AJAX processing with progressive rendering. Overrides HttpOutputMessage with RaptorResponseWriter -->
            <beans:bean class="com.host.kernel.filter.RaptorJacksonHttpMessageConverter"/>                  
            </mvc:message-converters>

    <context:component-scan base-package="com.host.config" />
    <context:component-scan base-package="com.host.app.raptor.controller" />        

    <!-- Handles HTTP GET requests by efficiently serving up static resources 
         in the corresponding directory -->
    <resources mapping="/js/**" location="/js/" />
    <resources mapping="/css/**" location="/css/" />

    <!-- Resolves views selected for rendering by @Controllers to .jsp resources in the /WEB-INF/views directory -->
    <beans:bean class="org.springframework.web.servlet.view.InternalResourceViewResolver">
        <beans:property name="prefix" value="/WEB-INF/views/" />
        <beans:property name="suffix" value=".jsp" />
    </beans:bean>
</beans:beans> 
```

谁能告诉我我在这里做错了什么？

# python - sklearn.feature_selection 中除 Chi-2 之外的特征选择指标

> ID：14513932
> 
> 赞同：1
> 
> 时间：2013-01-25T01:31:19.237
> 
> 标签：python, machine-learning, scikit-learn, document-classification

我在一些文本分类任务上尝试使用 sklearn.svm.SVC。我知道在使用 SVM 建模之前执行特征选择是一个有点可疑的努力，因为当使用完整的特征集时性能通常会达到峰值。从学术的角度来看，这仍然很有趣，可以看到不同的特征选择方法如何对特征进行不同的排序。

经过一番挖掘，我发现在 sklearn 中可用的特征选择指标的选择非常有限，即 Chi-2。我只是想知道其他常用的指标，例如 IG 和 BNS 是否已在 sklearn（或其他地方）中实现，我可以直接用作 sklearn.feature_selection.SelectKBest() 中的得分函数？

提前感谢您的友好建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T08:49:34.923

InfoGain 尚未实施，但我认为@larsmans 希望在未来的某个时候将其包含在内。我不知道BNS。

如果您愿意，请随时贡献。这是贡献指南：

[http://scikit-learn.org/dev/developers/index.html](http://scikit-learn.org/dev/developers/index.html)

# android - 塔斯克和安全设置“未找到”错误

> ID：14513933
> 
> 赞同：-1
> 
> 时间：2013-01-25T01:31:26.700
> 
> 标签：android

在 Tasker for Android 中，%EFROM 变量设置为最后一封电子邮件的 FROM 字段。我想写一个命令来只从中获取名称，而不是地址。

所以我尝试使用`Run Command`in`Secure Settings`插件，写：

```
echo "%EFROM" | sed "s/ *<.*//" 
```

我得到一个错误：

```
<stdin>[1]: sed: not found 
```

我尝试使用`grep`and`cut`而不是`sed`，但没有运气。如果我简单地写

```
echo "%EFROM" 
```

我没有收到错误，但我得到了 的通常内容`%EFROM`，当然。

然后我尝试`sed`在它前面添加完整路径。现在我没有收到错误，但它只是不过滤任何东西，返回原始字符串。

我究竟做错了什么？？

谢谢！！

L.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T13:36:54.470

我找到了一个解决方案，`busybox`在`sed`. 不过，不确定为什么需要它。我在网上找了几个不需要busybox的地方。也许你应该告诉Taskerbusybox在哪里或什么的......

# bash - 计算字符串中模式的出现次数（仅使用 bash 内置函数）

> ID：14513934
> 
> 赞同：2
> 
> 时间：2013-01-25T01:31:26.610
> 
> 标签：bash, built-in

我有一个看起来像这样的字符串：

```
STRING="$PATTERN_some-stuff_$PATTERN_some-other_stuff" 
```

我想`$PATTERN`仅使用 Bash 内置命令来计算其中的出现次数。

到目前为止，我发现的更直接的方法是从字符串中仅提取匹配的字符串，`$PATTERN`然后计算`$PATTERN`新创建的字符串中出现的次数，以这种方式进行：

```
expr length "${STRING//[^$PATTERN]}" / ${#PATTERN} 
```

但它只适用`$PATTERN`于单个字符。我尝试使用语法`${STRING//!(PATTERN)}"`，如果我理解 Bash 手册，它只会`$PATTERN`在排除其余部分时匹配`$STRING`，但它实际上什么也不输出。那么，我哪里错了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T18:43:20.617

如果您仅对内置函数有点灵活，那么这是一个完美的情况`grep -o`：

```
$ STRING='$PATTERN_some-stuff_$PATTERN_some-other_stuff'
$ grep -o '$PATTERN' <<< "$STRING" | wc -l
2 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-25T01:55:02.503

一种选择是替换 STRING 中的所有 PATTERN 实例，从 STRING 的长度中减去这个缩短的字符串的长度，然后将其除以 PATTERN 的长度。顺便说一句，您使用`expr`. `expr`是一个命令（至少在我的 Ubuntu 服务器上）

```
$ declare -- PATTERN="abracadabra"
$ declare -- STRING="${PATTERN}_some-stuff_${PATTERN}_some-other_stuff"
$ echo $STRING
abracadabra_some-stuff_abracadabra_some-other_stuff
$ temp=${STRING//$PATTERN}
$ string_length_without_patterns=${#temp}
$ total_pattern_length=$((${#STRING} - $string_length_without_patterns))
$ number_of_patterns=$(($total_pattern_length/${#PATTERN}))
$ echo $number_of_patterns
2 
```

# python - NoneType 错误，使用 ply 中的 lex.lex

> ID：14513936
> 
> 赞同：-2
> 
> 时间：2013-01-25T01:31:50.047
> 
> 标签：python, python-2.7, ply

我正在尝试使用 ply 并使用该库中的 lex.lex 解析单词/短语列表。

我之前在单词列表中使用过 lex.lex，它工作得很好，只是使用 for 循环输入到词法分析器中。

但我不断收到以下错误

```
Traceback (most recent call last):
File "<pyshell#56>", line 2, in <module>
mylexer.input(a)
File "ply\lex.py", line 253, in input
c = s[:1]
TypeError: 'NoneType' object has no attribute '__getitem__' 
```

我这次尝试使用 lex 的列表是解析为 json 的，据我所知，唯一的区别是，与之前确实有效的 lexing 不同？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T14:13:53.647

好的

谢谢，在手动阅读列表后，似乎其中一个 json 键没有值，它变成了 None。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T04:06:10.500

*ply.lex*的相关代码是：

```
def input(self,s):
    # Pull off the first character to see if s looks like a string
    c = s[:1]
    if not isinstance(c,StringTypes):
        raise ValueError("Expected a string")
    self.lexdata = s
    self.lexpos = 0
    self.lexlen = len(s) 
```

看来您的问题出在您的电话`mylexer.input(a)`中。*a*变量是*None*而不是单词列表。

有时这是由您生成单词列表的方式引起的。例如，这将导致与您看到的相同的错误：

```
words = 'the quick brown fox'.split()
a = words.sort()                   # Note, this returns None
mylexer.input(a)                   # The lexer won't be happy with None 
```

# xml - xbrl 我们 gaap contextRef 标准？

> ID：14513938
> 
> 赞同：11
> 
> 时间：2013-01-25T01:32:04.933
> 
> 标签：xml, parsing, standards, accounting, xbrl

请告诉我这是标准化的，或者至少有某种方法可以破译它。

我正在查看 2012 年第四季度的这 3 个随机 10-Q 和 K。

1.  [ftp://ftp.sec.gov/edgar/data/1001288/0001001288-12-000041.txt](ftp://ftp.sec.gov/edgar/data/1001288/0001001288-12-000041.txt)
2.  [ftp://ftp.sec.gov/edgar/data/1002037/0001193125-12-506687.txt](ftp://ftp.sec.gov/edgar/data/1002037/0001193125-12-506687.txt)
3.  [ftp://ftp.sec.gov/edgar/data/1002360/0001000096-12-000199.txt](ftp://ftp.sec.gov/edgar/data/1002360/0001000096-12-000199.txt)

行项目标准化；但是，每个文档有很多。例如，一个文档将有几个`us-gaap:OperatingIncomeLoss`es，而我可以告诉他们表示他们正在报告的时期的唯一方法是`contextRef`。这就是事情变得复杂的地方。

我看不到明显的模式。有时他们先升后降。它们都有自己的日期格式。有些做多期分组。有些没有。

我试图找到一个标准。不去。

有没有人有任何想法？

非常感谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-25T04:57:32.423

它在`xbrl 2.1 specification`
[http://www.xbrl.org/Specification/XBRL-RECOMMENDATION-2003-12-31+Corrected-Errata-2005-04-25.htm#_4.6.1](http://www.xbrl.org/Specification/XBRL-RECOMMENDATION-2003-12-31+Corrected-Errata-2005-04-25.htm#_4.6.1)

```
 <context id="BalanceAsOf_20120531">
        <entity>
          <identifier scheme="http://www.sec.gov/CIK">0000866729</identifier>
        </entity>
        <period>
          <instant>2012-05-31</instant>
        </period>
      </context>
      <context id="BalanceAsOf_20120531_AccumulatedOtherComprehensiveIncomeMember">
        <entity>
          <identifier scheme="http://www.sec.gov/CIK">0000866729</identifier>
          <segment>
            <xbrldi:explicitMember dimension="us-gaap:StatementEquityComponentsAxis">us-gaap:AccumulatedOtherComprehensiveIncomeMember</xbrldi:explicitMember>
          </segment>
        </entity>
        <period>
          <instant>2012-05-31</instant>
        </period>
      </context>
      <unit id="USD">
        <measure>iso4217:USD</measure>
      </unit>
    <us-gaap:AssetsCurrent contextRef="BalanceAsOf_20120531" unitRef="USD" decimals="-5">929900000.0</us-gaap:AssetsCurrent>
    <us-gaap:Assets contextRef="BalanceAsOf_20120531" unitRef="USD" decimals="-5">1670300000.0</us-gaap:Assets>
    <us-gaap:StockholdersEquity contextRef="BalanceAsOf_20120531_AccumulatedOtherComprehensiveIncomeMember" unitRef="USD" decimals="-5">-74200000.0</us-gaap:StockholdersEquity> 
```

例如; 考虑这两种情况；`ids`需要在其内容方面是唯一的（相对于`period` `entity`;及其`entity`子元素；如果存在） 我们将使用它来映射财务事实。这里的例子是指unit-->谁是和上下文信息-->谁的id是；此上下文 ID 的详细信息可以在 element.xml 中找到。在这里一切都应该是唯一的，否则它将创建重复的事实/上下文。你可以在这里看到；两个上下文都有相同的时期，但为什么他们不能呢？因为一个上下文具有附加的详细信息。`identifier``segment`
`id``AssetsCurrent``id``USD``BalanceAsOf_20120531``context``ids``segment`
（我在这里不详细介绍；如果您想知道；它是如何检测重复/错误的，请考虑链接中的第 25 和 26 号示例。）
以其他方式，您还可以查看具有三个轴的事实/值`CIK` `period`和`xmlname`；和这种独特性使他们用这些轴与其他公司的事实进行比较。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-10-08T14:44:51.620

不要依赖`contextRef`属性的值。EDGAR 文件管理器手册向文件管理人员提供了有关创建助记符值的建议，但所有用于创建文件的软件都使用自己的方式来创建这些值。

所有的`contextRef`好处是找到`context`一个特定的事实。它是`context`组织数据的部分。

# facebook - JSON 数据包含特殊字符，因此公共类中的变量无效

> ID：14513941
> 
> 赞同：0
> 
> 时间：2013-01-25T01:32:13.680
> 
> 标签：facebook, json, facebook-c#-sdk

我试图反序列化我从 facebook 检索到的 JSON 数据，但 c# 不允许它，因为当我尝试在公共类中声明它时，“F.18-24”是一个无效变量。我设法反序列化“公制”字段，但对于“F.18-24”字段，我不知道该怎么做。任何帮助，将不胜感激。为了让 c# 读取 F.18-24，它与[Ext.data.Record有关吗？](http://docs.sencha.com/ext-js/3-4/#!/api/Ext.data.Record-create)

我从 facebook 检索到的 JSON 数据：

```
{"data":[
{
    "metric":"page_fans_gender_age", 
    "value":
        {"F.18-24":19,
        "M.18-24":14,
        "M.25-34":4,
        "F.13-17":1,
        "M.13-17":1
}}]} 
```

我的反序列化代码：

```
//geting isights data age & gender
    private void kryptonButton1_Click_2(object sender, EventArgs e)
    {
        try
        {

          var client = new FacebookClient(myToken.Default.token);
          var query = string.Format("SELECT metric, value FROM insights WHERE object_id=132414626916208 AND metric='page_fans_gender_age' AND period = period('lifetime') AND end_time = end_time_date('2013-01-18')");

            dynamic parameters = new ExpandoObject();
            parameters.q = query;
            dynamic results = client.Get("/fql", parameters);

            JavaScriptSerializer sr = new JavaScriptSerializer();
            String jsondata = String.Empty;
            jsondata = results.ToString();

            genderAgeDataII converted = sr.Deserialize<genderAgeDataII>(jsondata);
            Console.WriteLine(converted);
        }

        catch (Exception ex) {
            MessageBox.Show(ex.Message);
        }

    }

}

//class for JSON Deserialize
public class genderAgeDataII
{
    public genderAgeData[] data { get; set; }
}

public class genderAgeData
{
    public string metric { get; set; }
    public genderAge value { get; set; }
}

public class genderAge
{
    //public string numbers { get; set; }
    /*string f1824 = "F.18-24";
    string m1824 = "M.18-24";
    string m2534 = "M.25-34";
    string f1317 = "F.13-17";
    string m1317 = "M.13-17"; */

    public int f1824 { get; set; }
    public int m1824 { get; set; }
    public int m2534 { get; set; }
    public int f1317 { get; set; }
    public int m1317 { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T04:33:30.917

FB C# SDK 支持泛型。您可以将其用作

```
var data = fb.Get<genderAgeDataII>("fql", parameters); 
```

[https://github.com/facebook-csharp-sdk/facebook-csharp-sdk/pull/203](https://github.com/facebook-csharp-sdk/facebook-csharp-sdk/pull/203)

然后使用数据契约和数据成员

```
[DataContract]
public class genderAge
{
    //public string numbers { get; set; }
    /*string f1824 = "F.18-24";
    string m1824 = "M.18-24";
    string m2534 = "M.25-34";
    string f1317 = "F.13-17";
    string m1317 = "M.13-17"; */

    [DataMember(Name="F.18-24")]
    public int f1824 { get; set; }
    .....
} 
```

# opengl - DirectX 有 SetTechnique 你能在 OpenGL 中做类似的事情吗

> ID：14513948
> 
> 赞同：0
> 
> 时间：2013-01-25T01:32:34.517
> 
> 标签：opengl, glsl

DirectX 具有 SetTechnique 功能，您可以使用该功能来设置将使用着色器中的哪种技术。

OpenGL有这样的东西吗？

我知道我在 glsl 周围的方式相当不错。但我只是希望我能像在 HLSL 中那样做技术。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T01:56:14.130

没有等效于 OpenGL 的 D3DX 库。没有 GLSL“技术”、“通行证”等。

# excel - Python：正在向 Excel 提供实时股票价格。如何每 10 分钟将价格附加到 csv？

> ID：14513949
> 
> 赞同：1
> 
> 时间：2013-01-25T01:33:00.563
> 
> 标签：excel, python-2.7, stocks, stockquotes, algorithmic-trading

这是我的python脚本：

```
from xlrd import open_workbook
from xlrd import xldate_as_tuple

book = open_workbook('C:/Users/.......Constantquotes.xlsx')

sheet0 = book.sheet_by_index(0)  #Initializes the first row
print sheet0.row(0)              #Prints the first row
date_value = xldate_as_tuple(sheet0.cell(0,1).value,book.datemode)
print date_value                 #Prints the date cell

#  Next step: make the a list for the stock price
#  Next step: append the list to a csv 
```

所以我将价格输入到excel中，它们每秒都会更新自己。我想做的是让 python 脚本每十分钟读取一次 excel 表（我将使用 cronjob 来激活 python 脚本），然后将最新价格附加到仅包含该股票价格的 csv 文件中。问题是当我运行 python 脚本时，它给了我上次保存 excel 文件的价格和日期，而不是当前价格。我尝试设置选项-->保存-->保存-->保存自动恢复信息--> 1 分钟，但这对我没有帮助。因此，换个说法，我该如何做到，以便每次 xlrd 读入 .xls 文件（以便 python 脚本可以提取当前价格和日期）我得到当前价格和日期，而不是价格和日期我上次保存 .xlxs 文件是什么时候？

理想情况下，我希望能够离开计算机几天，然后回到填充的 .csv

或者也许有更好的解决方案来填充 .csv？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T08:23:05.937

好吧，这应该在 Excel 中而不是 Python 中实现。在您的 VBA 中，您可以使用以下内容：

1.  在 VBA 代码的开头。

    `Application.DisplayAlerts = False`

2.  当您想要保存工作簿时。

    `ThisWorkbook.Save`

使用步骤 1 的原因是确保它在保存工作簿之前不要求手动确认，以防您离开计算机。我建议不要在每次价格更新时保存工作簿。也许您可以使用计时器定期保存它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T01:56:16.900

我认为这是使用 VBA 可以更好地处理的任务之一。Python 无法访问数据，因为它尚未保存 - 它在内存中，但您告诉 python 从磁盘读取。在我看来，你有两个合理的选择之一。

1.  让 VBA 宏填充 csv。
2.  让 VBA 宏定期保存 xls。

# ruby-on-rails - 如何编写rails路由以在/api/v1.2/users/1234等路径中映射具有主要和次要版本的版本化API

> ID：14513950
> 
> 赞同：7
> 
> 时间：2013-01-25T01:33:01.743
> 
> 标签：ruby-on-rails, rest, routes

我已经阅读[了 API 版本控制的最佳实践？](https://stackoverflow.com/questions/389169/best-practices-for-api-versioning). 我同意将版本放在 url 路径而不是 HTTP 标头中。

为了实现这一点，我有一个这样的命名空间控制器：

```
class Api::V1::UsersController < Api::BaseController
  def show
    ...
  end
end 
```

路线是：

```
current_api_routes = lambda do
  resource :users
end

namespace :api do
  namespace :v1, &current_api_routes
end 
```

然后`rake routes`我可以得到这样的路线：

```
api_v1_user GET    /api/v1/users/:id(.:format)                       api/v1/users#show
... 
```

我希望该版本`v1.2`转到`v1`. 然后我可以像这样在控制器中获取次要版本号：

```
class Api::V1::UsersController < Api::BaseController
  def show
    minor_version = params[:minor_version] # minor_version = 2
    ...
  end
end 
```

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-05-11T10:25:18.813

我们正在使用较小的 API 版本控制进行小的但可能是重大更改（例如允许`null`以前不允许的属性值）。

```
# config/routes.rb
My::Application.routes.draw do
  namespace :api do
    scope "v:api_version", module: "v1", as: "v1", constraints: { api_version: /1(\.[0123]?)/ } do
      resources :users
    end
  end
end

# app/controllers/api/application_controller.rb
class API::ApplicationController < ActionController::Base
  private
  def api_version
    @api_version ||= begin
      major, minor = params[:api_version].split('.', 2).map(&:to_i)
      OpenStruct.new(major: major, minor: minor || 0)
    end
  end
end

# app/controllers/api/v1/users_controller.rb
class API::V1::UsersController < API::ApplicationController
  def show
    # ...
    something_more if api_version.minor >= 2
  end
end 
```

# syntax - 如何在 phantomJs 中使用 void 函数

> ID：14513953
> 
> 赞同：0
> 
> 时间：2013-01-25T01:33:22.170
> 
> 标签：syntax, phantomjs

编写一些辅助函数来使用 phantomJs 作为我们的测试框架，有没有办法制作“void”函数......或者让 phantomJs 以某种方式忽略返回值？

```
var mod = require('./mymod.js');
mod.doStuff();

>> TypeError: 'undefined' is not a function 
```

为方便起见，有没有办法做到这一点？还是我不应该这样做的充分理由？

该方法存在良好。它只是一种触发某些东西的方法。因此，设计中没有任何值得为其返回值的东西。

如果我`var ignore = mod.doStuff();`一切都好。但正如我所说，为了方便...

我认为它试图评估所有陈述。也许我只是习惯了在执行级别忽略数据类型的惰性解析器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T16:01:25.370

如果没有，就不可能`mod.doStuff()`产生错误`var ignore=mod.doStuff();`。还有一些其他问题，如果您发布整个代码，也许可以追踪到这些问题。从基础开始：在有问题的行放置一个断点，当它停在那里时，检查 mod.doStuff 的值并确保它是一个函数等。为了使用 phantomJS 执行此操作，谷歌搜索“phantomJS”远程调试”，它将告诉您有关该`--remote-debugger-port`选项的信息，因此您可以打开 Web 浏览器`http://localhost:port`并使用标准方法进行调试。

# c - C程序：整数数组指针作为参数传递时改变值

> ID：14513956
> 
> 赞同：1
> 
> 时间：2013-01-25T01:33:28.303
> 
> 标签：c, arrays, function, pointers, parameters

我的问题是我的整数数组的值在传递给函数时会发生变化**calculate**。索引 0 和 2->5 的值是正确的。

出于某种原因，索引 1 和 6+ 不是正确的值。

下面是我的代码。

```
#include <stdio.h>
#include <time.h>
#include <stdlib.h>

int* generate_rand (int length, int MAX_ARRAY);
void calculate (int *array_ptr, int length, int *mean, int *sd);

main() {
    srand(time(NULL));
    int a;
    printf("\nArray length?: ");
    scanf("%d", &a);
    int* array_ptr2;
    array_ptr2 = generate_rand(a, 100);
    //int mean, sd;
    int* *mean;
    int* *sd;
    int i = 0;
    for (i = 0; i < 10; i++) {
        printf("Array2: %d\n", *(array_ptr2 + i));
    }
    calculate(array_ptr2, a, *mean, *sd);
    //printf("Mean: %d\n", (int)*mean);
}

int* generate_rand (int length, int MAX_ARRAY) {
    int arr[length];
    int i;
    for (i = 0; i < 10; i++) {
        int r = rand()%MAX_ARRAY;
        arr[i] = r;
        printf("Rand: %d\n", arr[i]);
    }
    int *arrPtr;
    arrPtr = &arr[0];
    return arrPtr;
}

void calculate (int *array_ptr, int length, int *mean, int *sd) {
    int sum;
    int i;
    for (i = 0; i < length; i++) {
        printf("Array: %d\n", *(array_ptr + i));
        sum += *(array_ptr + i);
        //array_ptr++;
        printf("Sum: %d, i:%d\n", sum, i);
    }
    //*mean = sum / length;
} 
```

你知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T01:39:26.333

`generate_rand(`) 正在返回一个指向`arr[0]`where`arr`是局部变量的指针。一旦函数`generate_rand()`, 返回，局部变量就会超出范围。一旦变量超出范围，就无法保证它的值，事实上，访问超出范围的变量是未定义的。

一种可能的解决方案：可以在堆上`generate_rand()`分配数组，即使用. 不用说，一旦不再需要内存，就必须立即对其进行编辑。`arr``malloc()``free()`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-25T01:43:21.303

问题是您正在返回函数的局部变量的地址。函数退出后，函数的局部变量不再存在，因此返回的指针突然变得悬空（例如，没有指向任何有用的东西）。

您需要使用 为您的数组分配内存`malloc`，因为从中返回的内存`malloc`将一直存在，直到它被释放`free`（之后您可以随时调用）。

```
int* generate_rand (int length, int MAX_ARRAY) {
    int *arr = malloc(sizeof(int) * length);

    int i;

    for (i = 0; i < 10; i++) {
        int r = rand()%MAX_ARRAY;
        arr[i] = r;
        printf("Rand: %d\n", arr[i]);
    }

    return arr;
} 
```

当您不再需要从此函数返回的数组时，将其传递给以`free`释放内存，例如：

```
int *arr = generate_rand(10, 100);
// do something with arr here...
free(arr); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-25T01:43:44.733

正如您在评论中所说，`generate_rand()`需要返回一个指向填充随机值的数组的指针。目前，您正在返回一个指向本地数组第一个元素的指针。正如其他人所说，这个数组的内存只保证对函数内部的程序可用`generate_rand()`。为了创建一个可以在程序中任何地方使用的数组，您需要使用`malloc()`. 我建议您进一步研究内存管理。您需要了解`malloc()`和`free()`功能。

# jquery - jquery对话框根本不会弹出

> ID：14513957
> 
> 赞同：0
> 
> 时间：2013-01-25T01:33:53.170
> 
> 标签：jquery, dialog, click

所以这里是代码（我已经尝试了很多变体（使用 div，没有 div）并且 jquery 本身正在工作，但不是对话框）我可以做一个警告框，但如果我放一个对话框，它从不工作。没有弹出窗口，什么都没有。基本对话框不起作用。

```
$('#link).click(function(){
  $('#dialog).dialog();
  }

 <div id="dialog" title="Dialog Title" style="display:none"> Some text</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T01:34:34.277

您在`#dialog`选择器**和**选择器之后错过了引用`#link`，试试这个：

```
$('#link').click(function(){
    $('#dialog').dialog();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T19:13:59.507

好的。所以我发现为了使用对话框，我必须在页面顶部包含 jquery-ui 声明，而不仅仅是 jquery 声明。

```
<script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jqueryui/1.10.0/jquery-ui.min.js" ></script> 
```

# json - 在 Play 框架的控制器类中使用 Json

> ID：14513958
> 
> 赞同：0
> 
> 时间：2013-01-25T01:34:04.393
> 
> 标签：json, jquery, playframework-2.0

当我在 Play 的控制器类中使用 json 时！框架，我经历了一些我不知道为什么的事情。

我有两个 ajax 调用，所以我的控制器类有两个对应的方法，如下所示：

```
@BodyParser.Of(BodyParser.Json.class)
public static Result categoryAdder() {
    ....(using json)....
} 
```

然后，

```
@BodyParser.Of(BodyParser.Json.class)
public static Result pathCalculator() {
    MultipartFormData body = request().body().asMultipartFormData();
    FilePart filePart = body.getFile("imageFile");
    ObjectNode jsonResult = Json.newObject();
    ....
} 
```

我使用了 ajaxForm，它是 jquery 的一个插件，将文件作为 multipartFormData 传递。当我把`@BodyParser.Of(BodyParser.Json.class)`方法放在前面的时候`pathCalculator()`，这个方法就抛出了一个空指针异常`FilePart filePart = body.getFile("imageFile");`。这意味着请求里面没有任何文件。但是，当我`@BodyParser.Of(BodyParser.Json.class)`从方法中删除时`pathCalculator()`，它运行良好。`@BodyParser.Of(BodyParser.Json.class)`需要吗？我不知道为什么。奇怪的是，该方法`categoryAdder()`在`@BodyParser.Of(BodyParser.Json.class)`放置之前运行良好。

有没有人知道为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T11:22:30.077

当您使用时，`@BodyParser.Of(BodyParser.Json.class)`您是在告诉 play 来验证 HTTP 请求正文中的`Content-Type`as `application/json`。

如果您在请求正文中传递 JSON 并使用此类正文解析器，它将验证内容并在无效时抛出适当的 HTTP 错误。在第一种情况下`categoryAdder`，因为您在方法中使用/解析 JSON，所以它是有道理的并且完全正确（添加了验证）。

在第二种情况下（pathCalculator），`Content-Type`不需要`multipart/form-data`JSON 正文解析器，因为请求正文中没有 JSON。

只需删除正文解析器即可，这就是您应该做的。

`Content-Type`在 jQuery ajax 请求中设置。

参考：[http ://www.playframework.org/documentation/2.0.4/JavaBodyParsers](http://www.playframework.org/documentation/2.0.4/JavaBodyParsers)

# python - 使用 web.py 基于 .{Type} 以 JSON、XML 或其他方式响应

> ID：14513960
> 
> 赞同：1
> 
> 时间：2013-01-25T01:34:27.210
> 
> 标签：python, url, rest, web.py

我正在尝试使用 web.py 为 RESTful API 的 URL 末尾的 .{Type} 设置响应类型。

如何将 .JSON、.XML、.HTML、.(whatever) 传递给“Assignments”类或将其设置为某处的值，以便 ServerResponse 可以接收它并以正确的格式响应？

我试过了：

```
'/assignments(\.[:upper:]+)', 'Assignments' 
```

我正在为我的网址使用以下代码：

```
urls = (
    '/(.*)/', 'redirect',
    '/', 'Homepage',
    '/assignments', 'Assignments'
) 
```

我有一个班级“作业”：

```
class Assignments:
    def GET(self,responseType):
        sentData = web.data()
        query = JSON.decode(sentData,'unicode')
        # \/ Replace With Code \/
        data = query 
        # /\ Replace with Code /\
        return ServerResponse.Send(data,responseType)

    def POST(self,responseType):
        sentData = web.data()
        query = JSON.decode(sentData,'unicode')
        # \/ Replace With Code \/
        data = query 
        # /\ Replace with Code /\
        return ServerResponse.Send(data,responseType) 
```

还有我的 ServerResponse 类：

```
class ServerResponse:
    @staticmethod
    def Send(data, method):
        return getattr(ServerResponse, method)(data)

    @staticmethod
    def JSON(data):
        web.header('Content-Type', 'application/json')
        response = JSON.encode(data)
        return response

    @staticmethod
    def XML(data):
        pass

    @staticmethod
    def HTML(data):
        web.header('Content-Type', 'text/html')
        response  = "<html>"
        response += "<head></head>"
        response += "<body>"
        response += "{"
        for key in data:
            response += "%s:%s,\n" % (str(key), str(data[key]))
        response += "}"
        response += "</body>"
        response += "</html>"
        return response 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T10:03:23.580

我尝试为 web.py 实现简单的 restful 控制器，目前在一个项目中使用它的派生来与骨干网进行通信，您可以在这里查看：[https ://gist.github.com/3907294](https://gist.github.com/3907294)

此外，您可能会发现[https://github.com/martinblech/mimerender](https://github.com/martinblech/mimerender)很有用，但它会检查 http 接受标头以确定渲染格式。

# c# - 您可以在 StorageItemAccessList 中存储文件多长时间？

> ID：14513966
> 
> 赞同：0
> 
> 时间：2013-01-25T01:35:14.917
> 
> 标签：c#, windows-runtime, windows-store-apps

显然我不能在我的 C# Winstore 应用程序中使用文档库功能。所以我正在考虑使用文件选择器和 StorageItemAccessList 来缓存对有问题的文件的访问。

这个访问列表是如何维护的？我需要知道应用程序可以访问存储在此列表中的文件**多长时间？****这个列表有过期时间吗？**

**如果重新安装应用程序（安装**新版本或刚刚卸载并重新安装相同的应用程序）会发生什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T05:50:16.743

有两种口味`StorageItemAccessList`可供选择：[`FutureAccessList`](http://msdn.microsoft.com/en-us/library/windows/apps/windows.storage.accesscache.storageapplicationpermissions.futureaccesslist.aspx)和[`MostRecentlyUsedList`](http://msdn.microsoft.com/en-us/library/windows/apps/windows.storage.accesscache.storageapplicationpermissions.mostrecentlyusedlist.aspx)。

`FutureAccessList`最多可存储 1000 个项目（文件或文件夹）。填满后，您需要先删除现有项目，然后再添加新项目。我找不到任何关于过期时间的文档。基于此和报价，[`your app maintains access to the item even if the user does not return to it frequently`](http://msdn.microsoft.com/en-us/library/windows/apps/hh972603.aspx#Preserving_access_to_files_and_folders_beyond_the_25-item_limit)我认为项目永久保留在列表中。

`MostRecentlyUsedList`只能容纳 25 个项目（文件或文件夹）。一旦填满，当您添加新的时，最旧的将从列表中删除。同样不应该有过期时间。

安装新版本不会影响任何列表。它们保持不变。另一方面，当应用程序被卸载时，这两个列表都会丢失，就像任何其他本地存储的数据一样（例外是`RoamingSettings`和`RoamingFolder`）。

另请记住，您需要一个令牌才能访问两个列表中的文件，这些文件需要存储在其他地方。

# jquery - jquery 代码导致不需要的空间

> ID：14513967
> 
> 赞同：3
> 
> 时间：2013-01-25T01:35:17.550
> 
> 标签：jquery, html, jsfiddle

我的选项和答案功能有问题。如果我选择一个包含许多按钮输出的选项，例如如果我选择选项 20，它将显示 20 个按钮，我遇到的问题是在表格列的底部，空间下降了一点。它仅在更改选项时才会这样做，然后空间始终保持不变。My question is simply how can I stop the space at the bottom of the table column to increase when an option changes?

我发现导致此问题的代码是这样的：

```
 //THE ISSUE IS HERE

var _x = $(e.currentTarget);
var _y = _x.closest('td.extratd');
var _z = _y.prev();

$('textarea', _z).css('height', '').height(_z.innerHeight());

//ISSUE ABOVE 
```

现在，上面的代码所做的是允许`Question`列中的 textarea 在附加 textarea 或选项更改时填充整个表格单元格。所以我需要上面的代码，但上面的代码也是在表格行的底部创建一个不必要的空间，所以我需要帮助来整理不需要的空间。

我在这里有一个 jsfiddle，您可以使用它来查看正在发生的事情，它还包括上面的代码：http: [//jsfiddle.net/aND4g/61/](http://jsfiddle.net/aND4g/61/)

请按照以下步骤使用小提琴：

1.  当您打开小提琴时，在问题文本区域的顶部键入内容，然后单击`Open Grid`并选择按钮`3`或`4`。

2.  完成第 1 步后，单击`Add Question`按钮将上述详细信息附加到下表中

3.  现在在附加的行中，单击`Open Grid`并从您第一次选择的选项中选择另一个选项。您会看到它在表格行的底部创建了一个不需要的空间

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T01:45:30.273

这是因为您正在使用`innerHeight()`，其中包括`padding-top`和`padding-bottom`。

> 获取匹配元素集中第一个元素的当前计算高度，包括填充但不包括边框。
> 
>   -- [`innerHeight()`API 文档](http://api.jquery.com/innerHeight/)

因为这两个都等于`1em`，所以你得到`2em`的高度比你想要的要高。所以，我实施了一个快速而简单的修复：

```
// Get the padding of the cell
var ignoreHeight = parseInt(_z.css("padding-top")) + parseInt(_z.css("padding-bottom"));
// Set the height without that padding
$('textarea', _z).css('height', '').height(_z.innerHeight() - ignoreHeight); 
```

**[jsFiddle](http://jsfiddle.net/aND4g/66/)**

基本上，我只是将填充添加到一个变量中，然后从您设置的实际高度中减去它。可能有更好的方法可以用更好的方法“忽略”这个填充，但在我看来这对你的情况有用。

# jquery - 如何加快 ASP 页面正文中 jquery 的执行速度

> ID：14513969
> 
> 赞同：1
> 
> 时间：2013-01-25T01:36:02.900
> 
> 标签：jquery, html, asp-classic

我在 asp 文件的正文中运行一些 jquery。紧随其后的是它影响的下拉菜单。该脚本工作正常，问题是在 Firefox 中加载脚本需要一段时间。

如何在不将其在正文或标题中向上移动的情况下加快速度。

请注意：提供的链接是实时网站，我知道它正在触发对象错误，因为我有旧版本的 jQuery。（在我们的内部网站上，jquery 是最新版本）

链接：http://www.casa.gov.au/scripts/nc.dll?WCMS:PWA::pc=PC_91330

代码如下：

```
<script>
    $(document).ready(function() {

              $(document).on("change","select#state",function(e){
                             $("form#state").submit();
                               });

     });
</script>

  <form id="state" action="avsafety.asp" method="get">

     <p>State:<br/>
      <select id="state" name="state">
        <option label="ACT" value="ACT" <%if request.querystring("state") = "ACT" then response.write("selected") %>>ACT</option>
        <option label="NSW" value="NSW" <%if request.querystring("state") = "NSW" then response.write("selected") %>>NSW</option>
        <option label="NT" value="NT"   <%if request.querystring("state") = "NT" then response.write("selected") %>>NT</option>
        <option label="QLD" value="QLD" <%if request.querystring("state") = "QLD" then response.write("selected") %>>QLD</option>
        <option label="VIC" value="VIC" <%if request.querystring("state") = "VIC" then response.write("selected") %>>VIC</option>
        <option label="SA" value="SA"   <%if request.querystring("state") = "SA" then response.write("selected") %>>SA</option>
        <option label="TAS" value="TAS" <%if request.querystring("state") = "TAS" then response.write("selected") %>>TAS</option>
        <option label="WA" value="WA"   <%if request.querystring("state") = "WA" then response.write("selected") %>>WA</option>
      </select>
      <noscript><input type="submit" value="Search" /></noscript>
    </p>

  </form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T01:41:30.500

您正在使用`on`整个文档。基本上是在等待事件一直冒泡到最高级别。直接监控元素。

```
$("select#state").on("change",function(e){
    $("form#state").submit();
}); 
```

就更大的性能提升而言，我会更少关注这个单独的 javascript，而更多地关注您的网站作为一个整体。为什么加载缓慢？您可以启用压缩，利用 CDN。

另外，FF会很慢似乎很奇怪。通常（总是？）IE 最终会变慢。您可能想尝试另一台计算机，看看它有多快。FF 中可能存在导致问题的扩展。

您还可以利用 Chrome 开发人员工具。检查以查看哪些部分或您的网站对性能造成的影响最大。因为`$(document).ready()`正在等待 DOM 加载，所以单个元素可能是导致性能问题的原因。

# iphone - 解析复杂的 JSON 数据

> ID：14513970
> 
> 赞同：-2
> 
> 时间：2013-01-25T01:36:10.743
> 
> 标签：iphone, ios, objective-c, sbjson

我想以以下形式解析来自服务器的复杂 json 数据：

```
 {

    "Data 1":{
        "2012-12-01":[
            {
                "field 1":"field 2",
                "summary":"summary 1"
            },
            {
                "field":"field 2",
                "summary":"summary 2"
            },
            {
                "service":"service 3",
                "summary":"summary 3"
            }
        ],
        "2012-12-10":[
            {
                "field":"field 1",
                "summary":"summary 1"
            },
            {
                "field":"field 2",
                "summary":"summary 2"
            }
        ],
        "2012-12-31":[
            {
                "field":"field 1",
                "summary":"summary 1"
            }
        ]
    },
    "Data 2":{
        "2013-01-4":[
            {
                "field":"field 1",
                "summary":"summary 1"
            },
            {
                "field":"field 2",
                "summary":"summary 2"
            },
            {
                "field":"field 3",
                "summary":"summary 3"
            }
        ],
        "2013-01-8":[
            {
                "field":"field 1",
                "summary":"summary 1"
            },
            {
                "field":"field 2",
                "summary":"summary 2"
            }
        ],
        "2013-01-25":[
            {
                "field":"field 1",
                "summary":"summary 1"
            }
        ]
    },
    "Data 3":{
        "2013-02-09":[
            {
                "field":"field 1",
                "summary":"summary 1"
            },
            {
                "field":"field 2",
                "summary":"summary 2"
            },
            {
                "field":"field 3",
                "summary":"summary 3"
            }
        ]
    }

} 
```

如何使用 SBJSON 解析它？

请帮忙

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T03:00:58.317

解析 JSON 是一个单行命令。如果您想使用内置于 iOS 5 及更高版本的 JSON 解析器，[`NSJSONSerialization`](http://developer.apple.com/library/ios/#documentation/Foundation/Reference/NSJSONSerialization_Class/Reference/Reference.html)只需：

```
NSError *error;
NSDictionary *dictionary = [NSJSONSerialization JSONObjectWithData:data
                                                           options:0
                                                             error:&error]; 
```

如果你想使用[SBJSON](https://github.com/stig/json-framework)，它是：

```
SBJsonParser *parser = [[SBJsonParser alloc] init];
NSDictionary *dictionary = [parser objectWithData:data]; 
```

无论如何，既然您已经在 a 中获得了 JSON `NSDictionary`，您可以继续并适当地导航它，例如：

```
NSDictionary *data1 = [dictionary objectForKey:@"Data 1"];
NSArray *arrayDecFirst2012 = [data1 objectForKey:@"2012-12-01"];
NSDictionary *firstDictionaryInDecFirst2012 = [arrayDecFirst2012 objectAtIndex:0];
NSString *fieldOne = [firstDictionaryInDecFirst2012 objectForKey:@"field 1"]; 
```

或者，如果你想使用新的下标符号，那就是：

```
NSDictionary *data1 = dictionary[@"Data 1"];
NSArray *arrayDecFirst2012 = data1[@"2012-12-01"];
NSDictionary *firstDictionaryInDecFirst2012 = arrayDecFirst2012[0];
NSString *fieldOne = firstDictionaryInDecFirst2012[@"field 1"]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T03:33:19.740

请逐步阅读本教程

[**在 iOS 中使用 JSON**](http://www.raywenderlich.com/5492/working-with-json-in-ios-5)

请让我知道你还有什么麻烦

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-25T02:56:53.667

我从未专门使用过 SBJSON，但从外观上看，您应该能够做到：

（这是假设您的 JSON 当前是 NSString）

```
NSDictionary *arrayOfJSONString = [SBJsonObject objectWithString:jsonString]; 
```

或类似的东西。

我个人有时会使用[JSONKit](https://github.com/johnezang/JSONKit)。它很小，只需一个 .h/.m 即可包含在您的项目中。（它也包含在 RestKit 中）。在这种情况下，您只需执行以下操作：

```
NSDictionary *jsonDict = [jsonString objectFromJSONString]; 
```

然后你可以像这样使用它：

```
NSDictionary *dataOne = [jsonDict objectForKey:@"Data 1"]; 
```

如果您想创建 Objc-C 类，我会看看[RestKit](https://github.com/RestKit/RestKit)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-25T01:47:31.553

当“漂亮打印”时，您的 JSON 的第一部分看起来像这样——

```
{
    "Data 1":{
        "2012-12-01":[
            {
                "field 1":"field 2",
                "summary":"summary 1"
            },
            {
                "field":"field 2",
                "summary":"summary 2"
            },
            {
                "service":"service 3",
                "summary":"summary 3"
            }
        ],
        "2012-12-10":[
            {
                "field":"field 1",
                "summary":"summary 1"
            },
            {
                "field":"field 2",
                "summary":"summary 2"
            }
        ],
        "2012-12-31":[
            {
                "field":"field 1",
                "summary":"summary 1"
            }
        ]
    },
    "Data 2":{
        "2013-01-4":[ 
```

JSON 的最外层是一个字典（JSON 称它为“对象”）——你可以从`{`. 在该字典中有一个名为“Data 1”的键/对象对。该对象是一个字典（另一个`{`），其第一个键/对象对称为“2012-12-01”。第二对的对象是一个`[`包含三个字典的数组 (the )。等等。

# javascript - Wijmo 覆盖方法

> ID：14513975
> 
> 赞同：0
> 
> 时间：2013-01-25T01:37:25.520
> 
> 标签：javascript, jquery, oop, overriding, wijmo

这是一段 **jquery.wijmo.wijgrid.js**

```
(function ($) {
    "use strict";
    $.extend($.wijmo.wijgrid, {
        cellEditorHelper: function () {
            this.currentCellEditStart = function (grid, e) {
                var result = false,
                    currentCell = grid.currentCell(),
                    view = grid._view(),
                    rowObj, args, $innerDiv, rowType;

                if (currentCell._isValid() && !currentCell._isEdit() && (currentCell.column().dataIndex >= 0)) {
                    rowObj = currentCell._row();

                    if (rowObj && rowObj.length) {
                        rowType = view._getRowInfo(rowObj).type;

                        if (rowType & $.wijmo.wijgrid.rowType.data) {

                            args = {
                                cell: currentCell,
                                event: e,
                                handled: false
                            };

                            if (result = grid._trigger("beforeCellEdit", null, args)) { // todo
                                if (!args.handled) {
                                    result = defaultBeforeCellEdit(grid, args);
                                }
                            }

                            if (result) {
                                currentCell._isEdit(true);

                                if (grid.options.showRowHeader) {
                                    $innerDiv = $(rowObj[0].cells[0]).children("div.wijmo-wijgrid-innercell");
                                    if ($innerDiv.length) {
                                        $innerDiv.empty();
                                        $innerDiv.append($("<div>&nbsp;</div>").addClass("ui-icon ui-icon-pencil"));
                                    }
                                }
                            }
                        }
                    }
                }

                return result;
            };

            this.currentCellEditEnd = function (grid, e) {
                var currentCell = grid.currentCell(),
                    result = false,
                    view = grid._view(),
                    rowObj, rowType, escPressed, args, a, b,
                    domCell;

                if (!currentCell._isValid() || !currentCell._isEdit()) {
                    return;
                }

                rowObj = currentCell._row();
                if (rowObj && rowObj.length) {
                    rowType = view._getRowInfo(rowObj).type;

                    if (!(rowType & $.wijmo.wijgrid.rowType.data)) {
                        return result;
                    }

                    escPressed = (e && e.which === $.ui.keyCode.ESCAPE);

                    if (!e || (!escPressed)) {
                        args = {
                            cell: currentCell,
                            value: undefined
                        };

                        if (result = grid._trigger("beforeCellUpdate", null, args)) {
                            if (args.value === undefined) {
                                args.value = getCellValue(grid, currentCell); // get raw value from editor using the default implementation.
                            }

                            a = args.value; // new value
                            try {
                                args.value = grid._parse(currentCell.column(), args.value); // try to parse raw value
                                a = args.value;
                            } catch (ex) {
                                args.value = a; // restore raw value
                            }

                            b = currentCell.value(); // old value

                            if (args.cell.column().dataType === "datetime") {
                                if (a instanceof Date) {
                                    a = a.getTime();
                                }

                                if (b instanceof Date) {
                                    b = b.getTime();
                                }
                            }

                            if (a !== b) { // value is changed
                                // update datasource
                                try {
                                    currentCell.value(args.value);
                                } catch (ex) {
                                    result = false;
                                    grid._trigger("invalidCellValue", null, { cell: currentCell, value: args.value });
                                }

                                if (result) {
                                    grid._trigger("afterCellUpdate", null, { cell: currentCell });
                                }
                            }
                        }
                    } else {
                        // ESC key
                        result = true;
                    }

                    if (result) {
                        args = {
                            cell: currentCell,
                            event: e,
                            handled: false
                        };

                        grid._trigger("afterCellEdit", null, args);

                        $(grid._view().focusableElement()).focus(); // move focus from editor to wijgrid before editor element will be deleted.

                        if (!args.handled) {
                            result = defaultAfterCellEdit(grid, args);
                        }

                        if (result) {
                            currentCell._isEdit(false);
                        }

                        if (grid.options.showRowHeader) {
                            $(rowObj[0].cells[0]).children("div.wijmo-wijgrid-innercell").html("&nbsp;"); // remove ui-icon-pencil
                        }

                        window.setTimeout(function () {
                            if (!grid.destroyed) {
                                //grid.element.focus();
                                currentCell = grid.currentCell();

                                if (args.cell.isEqual(currentCell) && (domCell = currentCell.tableCell())) { // same cell?
                                    $(domCell).focus(); // restore focus
                                }
                            }
                        }, 50);
                    }
                }

                return result;
            };

            // private

            function defaultBeforeCellEdit(grid, args) {
                var leafOpt = args.cell.column(),
                    result = false,
                    value, $container, $input, len, kbEvent;

                if (leafOpt.dataIndex >= 0) {
                    value = args.cell.value();
                    result = true;

                    try {
                        $container = args.cell.container();

                        if (leafOpt.dataType === "boolean") {
                            $input = $container.children("input");
                            $input.focus();
                            if (args.event && args.event.type === "keypress") {
                                $input.one("keyup", function (e) {
                                    if (e.which === $.ui.keyCode.SPACE) {
                                        e.preventDefault();
                                        $input[0].checked = !value;
                                    }
                                });
                            }
                        } else {
                            $input = $("<input />")
                                .attr("type", "text")
                                .addClass("wijgridinput wijmo-wijinput ui-state-focus")
                                .bind("keydown", grid, checkBoxOrInputKeyDown);

                            //the problem of inputing
                            $input.bind(($.support.selectstart ? "selectstart" : "mousedown"), function (event) {
                                event.stopPropagation();
                            });

                            if (args.event && args.event.type === "keypress" && args.event.which) {
                                $input.val(String.fromCharCode(args.event.which));
                            } else {
                                switch (args.cell.column().dataType) {
                                    case "currency":
                                    case "number":
                                        if (value !== null) {
                                            $input.val(value); // ignore formatting
                                            break;
                                        }
                                        // fall through
                                    default:
                                        $input.val(grid._toStr(args.cell.column(), value));
                                        break;
                                }
                            }

                            $container
                                .empty()
                                .append($input);

                            // move caret to the end of the text
                            len = $input.val().length;
                            new $.wijmo.wijgrid.domSelection($input[0]).setSelection({ start: len, end: len });

                            $input.focus();

                            if ($.browser.msie) {
                                setTimeout(function () {
                                    $input.focus();
                                }, 0);
                            }

                            // FF issue: text does not track to the new position of the caret
                            if ($.browser.mozilla && document.createEvent && $input[0].dispatchEvent) {
                                kbEvent = document.createEvent("KeyboardEvent");
                                kbEvent.initKeyEvent("keypress", false, true, null, false, false, false, false, 0, $.ui.keyCode.SPACE);
                                $input[0].dispatchEvent(kbEvent);
                                kbEvent = document.createEvent("KeyboardEvent");
                                kbEvent.initKeyEvent("keypress", false, true, null, false, false, false, false, $.ui.keyCode.BACKSPACE, 0);
                                $input[0].dispatchEvent(kbEvent);
                            }
                        }
                    }
                    catch (ex) {
                        alert(ex.message);
                        result = false;
                    }
                }

                return result;
            }

            function defaultAfterCellEdit(grid, args) {
                var leafOpt = args.cell.column(),
                    result = false,
                    $container, cellValue, input,
                    rowInfo, view;

                if (leafOpt.dataIndex >= 0) {
                    result = true;
                    view = grid._view();

                    try {
                        $container = args.cell.container();
                        cellValue = grid._toStr(leafOpt, args.cell.value());

                        rowInfo = view._getRowInfo(grid._rows().item(args.cell.rowIndex()));

                        if (leafOpt.dataType === "boolean") {
                            input = $container.children("input");

                            if (cellValue === "true") {
                                input.attr("checked", "checked");
                            }
                            else {
                                input.removeAttr("checked");
                            }
                        }
                        else {
                            grid.cellFormatter.format($container, leafOpt, cellValue, rowInfo);
                        }
                    }
                    catch (ex) {
                        console.warn("defaultAfterCellEdit: " + ex.message);
                        result = false;
                    }
                }

                return result;
            }

            function checkBoxOrInputKeyDown(args) {
                if (args.which === $.ui.keyCode.ENTER) { // stop editing when Enter key is pressed
                    var grid = args.data;

                    if (grid) {
                        grid._endEditInternal(args);
                        return false; // prevent submit behaviour.
                    }
                }
            }

            function getCellValue(gridView, currentCell) {
                var $input = currentCell.container().find(":input:first"),
                    result = null;

                if ($input.length) {
                    result = ($input.attr("type") === "checkbox")
                        ? $input[0].checked
                        : $input.val();
                }

                return result;
            }

            // private *
        }
    });
})(jQuery); 
```

我怎样才能覆盖这个私有函数`function defaultAfterCellEdit(grid, args)`？那是因为它嵌套在 cellEditorHelper.currentCellEditStart

如何在不复制几乎整个原始文件的情况下覆盖该唯一功能？

# php - 自定义 Wordpress 插件，它们都只是琐碎的吗？

> ID：14513976
> 
> 赞同：0
> 
> 时间：2013-01-25T01:37:29.373
> 
> 标签：php, wordpress

我正在尝试 Wordpress 插件开发。从我看到的所有入门示例和教程来看，插件似乎只能做一些事情，比如在帖子末尾添加一个“书签”，在外部链接旁边添加一个图标，或者其他相对对现有功能的小幅增强。

我想开发一个扩展（这可能是更好的词？），用户可以在其中`my-wordpress-site.com/the-extension`访问并访问 Web 应用程序的功能。但是，由于所有扩展都必须放在 内`wp-includes/plugins/the-extension`，这是否意味着这是访问插件的唯一方式？

我如何设计扩展程序并包含要使用这样的 URL 访问的页面：`my-wordpress-site.com/the-extension`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T01:51:35.137

我没有研究过这种规模的 Wordpress 插件，但这里是一般的想法。

您的插件需要执行以下操作：

1.  [生成简码](http://codex.wordpress.org/Shortcode_API)。
2.  [使用简码生成页面](http://wordpress.org/support/topic/how-do-i-create-a-new-page-with-the-plugin-im-building)。

使用简码允许用户将插件的页面移动到任何地方。

此外，您可以考虑为插件[设置管理页面](http://codex.wordpress.org/Administration_Menus)作为选项..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T02:11:39.863

这是一个例子：

```
// register your rewrite rule
add_action('init', function(){
  add_rewrite_rule('the-extension$', 'index.php?my_plugin_action=do_stuff', 'top');
});

// register your query variable
add_filter('query_vars', function($vars){
  $vars[] = 'my_plugin_action';
  return $vars;
});

// process request
add_action('parse_request', function($wp){

  // check if this is your request; do nothing if not
  if(!isset($wp->query_vars['my_plugin_action']))
    return;

  // otherwise do your stuff
  printf('Hello Pony. You requested "%s"', $wp->query_vars['my_plugin_action']);
  exit;
}); 
```

这仅在您转到仪表板 > 设置 > 永久链接并单击保存按钮以刷新重写规则后才有效，因为 WP 显然保留了所有重写规则的某种缓存。

然后访问`yourwordpresssite.com/the-extension`应该显示 hello 消息

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T01:53:20.233

以下是一些漂浮在 wp-content 目录之外的插件示例（请参阅安装说明）：

*   [W3 总缓存](http://wordpress.org/extend/plugins/w3-total-cache/)
*   [WordPress MU 域映射](http://wordpress.org/extend/plugins/wordpress-mu-domain-mapping/)

# javascript - _.template 不工作-backbone.js

> ID：14513978
> 
> 赞同：1
> 
> 时间：2013-01-25T01:37:39.500
> 
> 标签：javascript, jquery, backbone.js

尝试使用 Backbone.js 通过模板从视图中输出一些值，但列表项未显示在网页上，请查看并告知缺少的内容。谢谢

```
<script type="text/template" id="myid">
    <li>  <%= value %> </li>
</script>
<script type="text/javascript">
(function($){
    ListView = Backbone.View.extend({
        tagName:'ul',
        initialize:function(){
            this.template = _.template($('#myid').html());
        },
        render:function(){
        this.$el.append(this.template({value:"Joe Blogg"}));
        return this;    
        }
    });
    $(document).ready(function(e) {
        myListView = new ListView();
    });
  })(jQuery); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T02:10:07.263

请试试这个。

```
(function($){
    var ListView = Backbone.View.extend({
        tagName:'ul',
        $el: $(this.tagName),
        initialize:function(){
            this.template = _.template($('#myid').html());
        },
        render:function(){
            this.$el.append(this.template({value:"Joe Blogg"}));
            $('body').append(this.$el);
        }
    });
    $(document).ready(function(e) {
        var myListView = new ListView(); // call initialize()
        myListView.render(); // call render()
    });
})(jQuery); 
```

我使用 jQuery.js 和 Underscore.js 和 Backbone.js。

并且始终使用“var”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T01:43:50.280

试试这个

```
 this.$el.empty();
   this.$el.html(this.template(this.model.attributes)); 
```

在您的**DOM 就绪**事件中调用该`.render()`方法

```
$(document).ready(function(e) {
     myListView = new ListView();
     myListView.render(); 
 }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T01:43:24.477

您需要调用`render`然后实际将您的视图添加`el`到页面的某处。

```
$(document).ready(function(e) {
   var myListView = new ListView();
   $("body").append(myListView.render().el); 
 }); 
```

# css - 如何在典型布局中设置多个 div

> ID：14513979
> 
> 赞同：0
> 
> 时间：2013-01-25T01:37:39.627
> 
> 标签：css, html

对于我的项目网站首页，我一直在尝试设置 div，如下图所示。但我无法得到所需的结果。请帮忙。

[示例图像](http://i49.tinypic.com/1pbfup.jpg)

主 div（黑色边框）的宽度为 910 像素。Div-1、2 和 5 的宽度相同，均为 900 像素。但是 Div-3 和 Div-4 是不同的，因为它们是内容页和侧边栏。Div-3 的宽度为 635 像素，而 Div-4 的宽度为 255 像素。div-3 进一步划分为 sub-div，如上图所示。所有 div 的高度都应该是 Auto。

如何设置 CSS 和 HTML？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T01:41:40.650

当您有多个水平相邻的 div 时，您需要使用浮点数（在您的情况下，div 3 和 4 以及所有 div 3 细分）。[这](http://www.barelyfitz.com/screencast/html-training/css/positioning/)是一个很好的小教程，它将对您有很大帮助。

> 对于可变高度的列，绝对定位不起作用，所以让我们想出另一种解决方案。
> 
> 我们可以“浮动”一个元素，使其尽可能地向右或向左推，并允许文本环绕它。这通常用于图像，但我们会将其用于更复杂的布局任务（因为它是我们拥有的唯一工具）。

编辑

更多教程：[http](http://www.html.net/tutorials/css/lesson13.php) ://www.html.net/tutorials/css/lesson13.php和[http://www.tizag.com/cssT/float.php](http://www.tizag.com/cssT/float.php)。

您也可以尝试尝试`display: inline-block;`类似的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T01:45:59.327

您已经很好地解释了代码，并且布局清晰。所以这很好。但什么是失败？是DIV-3吗？因为这似乎是个问题。我处理这个问题的方法是`<div>`在 DIV-3.2、DIV-3.3 和 DIV-3.4 以及 DIV-3.6 和 DIV-3.7 的多 DIV 行周围添加包装器元素。这样，那些较小的元素就存在于它们自己包含的行中，您可以轻松地将它们堆叠在一起。

如果还有其他问题，请编辑帖子或评论。

# tridion - 我应该如何使用关键字元数据？

> ID：14513986
> 
> 赞同：7
> 
> 时间：2013-01-25T01:39:27.217
> 
> 标签：tridion, tridion-content-delivery

除了名称、键、值和与其他关键字的关系之外，关键字本身还可以具有元数据。这允许作者通过选择元数据模式来添加其他信息，然后添加任何内容：

*   文本
*   选择（带有选项或类别的文本）
*   链接
*   ETC

![SDL Tridion 关键字元数据](../Images/c7aafcc0e52a8643c89b2f32d3ce87c1.png)

SDL Live Content 描述了如何[检索关键字属性](http://sdllivecontent.sdl.com/LiveContent/content/en-US/SDL_Tridion_2011_SPONE/concept_CCFE82BCE5444E5B8C49DFCD438BD94E)。给定一个关键字，`myKeyword`我们可以得到`myKeyword.KeywordMeta.NameValues`名称-值对（字典）。

我可以看到用例是在演示服务器端代码中，.NET 或 Java 开发人员可以获得给定关键字的附加信息。

我将关键字理解为对组件进行分类并为作者提供其他领域选择的选项。在我想要字段的大多数情况下，我会建议一个组件，但要确保我了解我们应该如何使用关键字元数据和任何编程限制。

*   对于 SDL Translation Manager，关键字元数据是否可以翻译？看起来[关键字本身可以作为类别的一部分进行翻译](http://sdllivecontent.sdl.com/LiveContent/content/en-US/SDL_TranslationManager_20_SP2/id07BUHA0504Y)（以及单个关键字，具体取决于您的版本*）。我们当然可以在没有翻译管理器的情况下本地化关键字。
*   关键字元数据是否适用于内容管理器？例如，您会在 C# TBB 中使用它吗？

其他想知道的更新：请务必检查您的 SDL Tridion 和 SDL Translation Manager 版本——Lars 指出 SDL Translation Manager 3.0 版确实具有单关键字翻译功能。Chris 注意到 GA 中的行为。如有疑问，请查看文档或在您的设置中确认。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T03:05:06.573

在构建分类驱动导航时，您可能会考虑使用关键字元数据。过去，我为 SEO 目的添加了要添加到站点的路径和其他数据的值，甚至尝试添加到 MM 组件的链接以用作渲染网页上的背景图像和按钮。但是在 Tridion 2011 中，GA 二进制数据没有发布到 Broker，所以我需要一个不同的解决方案。这可能已在以后的版本中修复，但我最近没有尝试过。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-25T10:01:38.927

如果您使用 Tridion 2011 SP1（包括翻译管理器 3.0），您可以翻译单个关键字 - 而不仅仅是整个类别。

您还可以翻译关键字元数据 - 这在以前版本的翻译管理器中也可能是可能的（如果您使用的是 Tridion 2011 GA），但我无法确定。它没有被列为 3.0 的新功能，这表明它以前是可能的……但它当然也可能被错误地排除在新功能列表之外。:)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-25T09:38:31.690

我正在做一个我们广泛使用关键字元数据的项目。对于内容管理器来说，这有点习惯，因为您正在将内容移动到小块中，这在 Tridion 的早期阶段对于对某些内容进行分类只是微不足道的。

但是，我们使用它来显示整个网站显示的不同部门和组的动态联系方式。对于其他一些在站点范围内使用文本、图像和指向这些关键字分类的内容的链接。

重新发布该类别和整个网站已更新、更正（编辑）和文本相同的内容。

我为此使用了关键字而不是动态组件，因为它似乎是用于动态内容的最佳方式，无论如何都必须对其进行分类。这样，即使在一年前发布时，有关此动态项目的其他分类的所有参考信息也将始终保持最新。

顺便说一句，这个解决方案是使用 Tridion 2009 SP1 和 Java。

*我一直很喜欢经纪人和分类法;-)*

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-01-25T10:22:01.350

关于元数据，我始终将其视为“关于数据的数据”，因此我不会将其直接用于内容目的，对我来说唯一的例外是多媒体组件上的元数据（因为您没有常规的内容字段那里）。但是再看看关键字，我认为这在某些时候可能是我规则的另一个例外。

如果您根据关键字构建导航，则可以使用附加数据，包括（可翻译的）内容。关键字的元数据可以通过翻译管理器翻译，但如果我没记错的话，它不会转发给经纪人。因此，要使用它，您必须将其存储为例如站点地图页面（通过页面中的模板/C# TBB 编写关键字元数据）。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-01-25T07:27:34.500

是的，我使用 C# TBB 来访问关键字元数据字段中的值。

首先，您必须使用参数模式将类别名称传递给 C# TBB，然后

其次，您必须通过以下代码访问该类别

```
 Publication publication = GetPublication();

            TcmUri uri = new TcmUri(int.Parse(_itemId), ItemType.Category, publication.Id.ItemId);
            _session = engine.GetSession();
            Category cat = new Category(uri, _session);

            Log.Debug("the uri is " + uri);
            Log.Debug("the cat is " + cat);

            Filter filter = new Filter();
            //filter.Conditions["IsRoot"] = true; // This works with Tridion 2011 only!

            List<Keyword> keys = cat.GetKeywords(filter) as List<Keyword>; 
```

最后，在访问 Keys 后，您必须在 Keys 上循环并获取 Metadata 字段，如下所示

```
ItemFields fields = new ItemFields(key.Metadata, key.MetadataSchema); 
```

# javascript - 我什么时候需要在 Backbone.js 中使用 _.bindAll()？

> ID：14513991
> 
> 赞同：22
> 
> 时间：2013-01-25T01:40:06.260
> 
> 标签：javascript, backbone.js

我正在学习backbone.js，对此感到困惑：我正在关注教程： [http ://arturadib.com/hello-backbonejs/](http://arturadib.com/hello-backbonejs/)

正如您在第一个示例（1.js）中看到的那样：

```
(function($){
  var ListView = Backbone.View.extend({    
    el: $('body'), // attaches `this.el` to an existing element.

    initialize: function(){
      _.bindAll(this, 'render'); // fixes loss of context for 'this' within methods

       this.render(); // not all views are self-rendering. This one is.
    },

    render: function(){
      $(this.el).append("<ul> <li>hello world</li> </ul>");
    }
  });

  var listView = new ListView();      
})(jQuery); 
```

但是，如果我注释掉这句话：`_.bindAll(this, 'render');`，这仍然有效。我在谷歌搜索过，有人说该方法`bindAll()`是必要的，因为如果我切换上下文，调用`this.render`可能不可用。我对“上下文”感到困惑。`this.render`当调用 ( ) 将不可用时，也有人可以解释我吗？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-01-25T07:27:56.293

对于您给出的示例`_.bindAll(this, 'render');`不是必需的，但如果您有回调函数`this`可以更改为其他内容的上下文，那么`_bindAll()`可以很方便。

例如：

```
initialize: function(){
  _.bindAll(this, 'render', 'clickFunc');
},
events: {
   'click .someElement': 'clickFunc'
},
clickFunc: function(e) {
   /** If you remove the clickFunc from the list of events in bindAll, 
          'this' will refer to the element that invoked the event.

       Adding the clickFunc event in the _.bindAll, ensures that 'this' stays
          as the view.
   */
  this /** <-- our focal point */
} 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-01-25T02:21:53.137

*   在视图的事件哈希中列为属性值的任何方法都会由主干自动为您绑定
*   您在视图中手动用作模型或集合中的事件处理程序的任何方法都应通过手动绑定`bindAll`
    *   或者您可以在注册绑定时提供上下文
    *   或者您可以使用 EMCA 5 的[function.bind](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/bind)来获得相同的结果

片段：

```
events: {
    'click .win': 'win',
    'click .lose': 'lose'
},
initialize: function () {
    //win and lose are automatically bound for you
    //because they are in the events property

    //refresh must be manually bound
    this.model.on('change', this.refresh);

    //which you can do ECMA5 style if you like
    this.model.on('change', this.refresh.bind(this));

    //OR you can provide a context backbone style
    this.model.on('change:foo', this.fooChange, this);

    //However, since you pretty much never want an unbound function
    //in a view, you can just stick this in all your initialize methods
    //and call it done
    //Note this will bind all functions in your view class if you don't
    //pass specific method names. I recommend this form.
    _.bindAll(this);
},
win: function () {...},
lose: function () {...},
refresh: function () {...},
fooChange: function() {...} 
```

... **OOOOORRRR**只需使用 CoffeeScript 和粗箭头并在语言级别上干净地解决这个问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-25T01:59:07.550

在这种情况下，您不需要`_.bindAll`，但假设您的视图有一个导致重新渲染的方法，并且您执行以下操作：

```
..,
myMethod: function() {
    this.$('.someselector').change(this.render);
}, 
```

如果您没有`_.bindAll`for `render`，则您的上下文将关闭。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-07-14T06:52:18.007

让我们仔细看看[underscore.js 官方文档](http://underscorejs.org/docs/underscore.html)`_.bindAll`的作用。

```
 _.bindAll = function(obj) {
    var i, length = arguments.length, key;
    if (length <= 1) throw new Error('bindAll must be passed function names');
    for (i = 1; i < length; i++) {
      key = arguments[i];
      obj[key] = _.bind(obj[key], obj);
    }
    return obj;
  }; 
```

它所做的是自动将其所有功能绑定到其正确的上下文。（它的函数被声明而不是被调用。

我个人认为这是旧版本 Backbone.js 绑定其`events`DOM 动作侦听器的约定。由于新版本 Backbone`View`在`events`. [在这里](http://backbonejs.org/)通过搜索找到更多`Binding "this"`

我希望它有所帮助。

# c++ - 如何在 Qt 中取消转义 XML？

> ID：14513992
> 
> 赞同：3
> 
> 时间：2013-01-25T01:40:38.910
> 
> 标签：c++, xml, qt

我`QString`喜欢`"&lt; foo &amp; blah &gt;"`（没有标签，只有字符数据）并且我想取消它。命名空间中有`Qt::escape`功能`Qt`，但没有与之相反的对应物。

那么，如何在 Qt 中取消转义 XML 字符串？

具体要求：Qt 4.7.3 必须可以。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T01:56:02.173

看起来有人[在对旧帖子的回答中制作了 html 实体解码器](https://stackoverflow.com/a/1082191/1084754)。如果您不介意引入新的依赖项，那可能是一个很好的解决方案。

# python - （Python 3.3）无法弄清楚为什么当值达到 5 时函数会创建无限循环

> ID：14513997
> 
> 赞同：2
> 
> 时间：2013-01-25T01:41:26.920
> 
> 标签：python, python-3.x, infinite-loop

我正在开发一个模拟自动售货机的程序。对于我的代码的这一部分创建了一个无限循环，我不太明白为什么。我通过 python 导师运行它以查看我的问题出在哪里，似乎当我的变量 price_remaining = 5 时，它有时不会通过 elif 语句。我不完全确定什么会以某种方式触发它。我将把我输入的内容复制并粘贴到python导师中，希望有人可以据此解释。编辑：我刚刚通过python导师检查了一些，它似乎只发生在我有一个以5结尾的price_remaining值时。例如2.05、0.05、1.15等。

```
price_remaining = 2.55
price_remaining = price_remaining * 100
q_stock = 25
q_returned = -0
d_stock = 25
d_returned = 0
n_stock = 25
n_returned = 0
while price_remaining > 0:
    if price_remaining >=25 and q_stock > 0:
        price_remaining = price_remaining - 25
        q_stock = q_stock - 1
        q_returned = q_returned + 1
    elif price_remaining >=10 and d_stock > 0:
        price_remaining = price_remaining - 10
        d_stock = d_stock - 1
        d_returned = d_returned + 1
    elif price_remaining >=5 and n_stock > 0:
        price_remaining = price_remaining -5
        n_stock = n_stock - 1
        n_returned = n_returned + 1

print( q_returned)
print( d_returned)
print( n_returned 
```

)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-25T01:51:16.730

当我添加行

```
print(repr(price_remaining), repr(n_stock)) 
```

在`while`循环开始时，代码产生

```
254.99999999999997 25
229.99999999999997 25
204.99999999999997 25
179.99999999999997 25
154.99999999999997 25
129.99999999999997 25
104.99999999999997 25
79.99999999999997 25
54.99999999999997 25
29.99999999999997 25
4.999999999999972 25
4.999999999999972 25
4.999999999999972 25
[.. forever ..] 
```

由于浮点数的工作方式（请参阅[此处](http://docs.python.org/2/tutorial/floatingpoint.html)以获取提醒），您不能总是完美地表示每个可能的数字，因此所有的 9。

在任何情况下，一旦`price_remaining < 5`，即使它只是少了一点点，你的代码也没有任何`if`触发的分支。