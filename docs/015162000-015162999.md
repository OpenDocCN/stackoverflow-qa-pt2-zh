# StackOverflow 问答 15162000-15162999

# android - 为什么单击listview item会触发CAB？

> ID：15162008
> 
> 赞同：0
> 
> 时间：2013-03-01T16:11:37.377
> 
> 标签：android, android-listview, android-contextmenu

我是android应用程序开发的新手，现在我被一个问题困住了。我的应用程序使用 SimpleAdapter 作为适配器来填充列表视图，我实现了 AdapterView.OnItemClickListener 接口并将其注册到列表视图，还实现了 AbsListView.MultiChoiceModeListener 接口来处理长点击事件。但是当我单击列表视图中的项目时，`onItemClicked()`将触发该方法并显示 CAB，为什么？

下面是我的代码：

```
package com.XXX.listviewdemo;

import java.util.ArrayList;
import java.util.HashMap;
import java.util.List;
import java.util.Map;

import android.annotation.SuppressLint;
import android.app.Activity;
import android.graphics.Color;
import android.os.Bundle;
import android.view.ActionMode;
import android.view.Menu;
import android.view.MenuInflater;
import android.view.MenuItem;
import android.view.MotionEvent;
import android.view.View;
import android.view.View.OnClickListener;
import android.view.Window;
import android.widget.AbsListView;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.Button;
import android.widget.CheckBox;
import android.widget.CompoundButton;
import android.widget.CompoundButton.OnCheckedChangeListener;
import android.widget.ListView;
import android.widget.SimpleAdapter;
import android.widget.TextView;
import android.widget.Toast;

public class MainActivity extends Activity {

    private Button like = null;
    private ListView list = null;
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        requestWindowFeature(Window.FEATURE_NO_TITLE);
        setContentView(R.layout.activity_main);
        List<Map<String,String>> data = new ArrayList<Map<String,String>>();
        String ITEM1 = "Name", ITEM2 = "Age", ITEM3 = "Gender", ITEM4 = "Country";
        String[] names = {"Jim","Tim","Tom","Jack","James","Jason","Anna","Lucy","Lily","Venus"};
        String[] ages = {"21","22","23","23","21","37","34","26","28","29"};
        String[] genders = {"Male","Male","Male","Male","Male","Male","Female","Female","Female","Female"};
        String[] countries = {"UK","US","US","CN","AU","CA","CA","CA","US","UK"};
        for(int i=0;i<10;i++){
            Map<String,String> mapItem = new HashMap<String,String>();
            mapItem.put(ITEM1, names[i]);
            mapItem.put(ITEM2, ages[i]);
            mapItem.put(ITEM3, genders[i]);
            mapItem.put(ITEM4, countries[i]);
            data.add(mapItem);
        }
        list = (ListView)findViewById(R.id.listView);
        list.setClickable(true);
        list.setAdapter(new SimpleAdapter(MainActivity.this,data,R.layout.list,
                new String[]{ITEM1,ITEM2,ITEM3,ITEM4},new int[]{R.id.listName,R.id.listAge,R.id.listGender,R.id.listCountry}));
        list.setOnItemClickListener(new listItemClickListener());
        list.setChoiceMode(ListView.CHOICE_MODE_MULTIPLE_MODAL);
        list.setMultiChoiceModeListener(new AbsListView.MultiChoiceModeListener(){
            public boolean onActionItemClicked(ActionMode mode, MenuItem item) {
                switch(item.getItemId()){
                case R.id.menu_delete:
                    System.out.println("trying to remove a list view item");
                    mode.finish();
                    return true;
                default:
                    return false;
                }
            }

            public boolean onCreateActionMode(ActionMode mode, Menu menu) {
                MenuInflater inflater = mode.getMenuInflater();
                inflater.inflate(R.menu.activity_main, menu);
                return true;
            }

            public void onDestroyActionMode(ActionMode arg0) {}
            public boolean onPrepareActionMode(ActionMode arg0, Menu arg1) {return false;}
            public void onItemCheckedStateChanged(ActionMode arg0, int arg1,long arg2, boolean arg3) {}
        });
        list.setOnHoverListener(new View.OnHoverListener() {
            public boolean onHover(View arg0, MotionEvent arg1) {
                arg0.setBackgroundColor(Color.CYAN);
                return false;
            }
        });
    }

    class listItemClickListener implements OnItemClickListener{
        public void onItemClick(AdapterView<?> arg0, View arg1, int arg2,
                long arg3) {
            System.out.println("The adapter view ID is====> "+arg0.getId());
            System.out.println("The clicked item ID is====> "+arg1.getId());;
            System.out.println("The clicked item Pos is====> "+arg2);
            System.out.println("The clicked Row is====> "+arg3);
            ((ListView)arg0).setItemChecked(arg2, true);
            Toast.makeText(MainActivity.this, "You selected "+((TextView)arg1.findViewById(R.id.listName)).getText(), Toast.LENGTH_SHORT).show();
        }
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }
} 
```

另外，我想知道`onActionItemClicked()`当用户长按并单击`delete`CAB 中的菜单时，如何在方法中删除一行列表视图。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T16:14:42.647

```
 @Override
 protected void onListItemClick(ListView l, View v, int position, long id) {
if (adapter.getItem(position).getResult() != null) 
{
    Intent intent = new Intent(HistoryActivity.this, CaptureActivity.class);
    intent.putExtra(Intents.History.ITEM_NUMBER, position);
    setResult(Activity.RESULT_OK, intent);
    Toast.makeText(getApplicationContext(), "Long press on item to get Contextmenu", Toast.LENGTH_LONG).show();
  //finish();
} 
```

您好，请检查您的 onListItemClick 并使用适配器获取项目位置，并在下面的代码中实现长点击事件

```
 listView.setOnItemLongClickListener (new OnItemLongClickListener() {
   public boolean onItemLongClick(AdapterView parent, View view, int position, long id)         
   {

   //do your stuff here
   }
   }); 
```

# javascript - 从字符串中获取 css 属性

> ID：15162009
> 
> 赞同：2
> 
> 时间：2013-03-01T16:11:39.023
> 
> 标签：javascript, jquery

我正在创建一个插件，允许用户通过键入这样的内容来定义通知。

```
growl-top-left-300px; 
```

我正在使用拆分来消除宽度，但这仍然需要我有很多 if 语句，因为我的用户有以下选择

例如我有

```
if (position == "growl-top-left" || position == "growl-left-top") {
    container.css ({
        top: '0px',
        left: '0px'
    });
}else if (position == "growl-top-right" || position == "growl-right-top") {
    container.css ({
        top: '0px',
        right: '0px'
    });
}else if (position == "growl-top-center" || position == "growl-center-top") {
    // apply css // Not done yet
}else if (position == "growl-bottom-left" || position == "growl-left-bottom") {
    container.css ({
        bottom: '0px',
        left: '0px'
    });
}else if (position == "growl-bottom-right" || position == "growl-right-bottom") {
    container.css ({
        bottom: '0px',
        right: '0px'
    });
}else if (position == "growl-bottom-center" || position == "growl-center-bottom") {
    // apply css // not done yet
} 
```

但正如您可以想象的那样，这似乎有很多冗余代码，我只想知道是否有人有更好的方法来清理它？

我认为如果我能获得顶部和左侧的 css 值会很好，这样我就可以编写以下代码：

```
container.css ({
    retrivedCSS[0]: '0px',
    retrivedCSS[1]: '0px'
}) 
```

其中 retrivedCSS[0] 将是第一个位置，而 [1] 将是第二个位置

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T16:19:23.503

这个怎么样：

```
// map string to one key
var key = position.split("-").sort().join("-");

var map = {

    "growl-bottom-center": "your CSS",
    // ...
    "growl-right-top": "your CSS"

}

applyCSS(map[key]); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T16:26:50.297

如何拆分位置字符串并使用这些标记。见下文，

```
var tokens = position.split('-');

var updateCSS = {};
updateCSS[tokens[1]] = updateCSS[tokens[2]] = '0px';    

container.css (updateCSS); 
```

如果您使用更复杂的字符串`growl-top-center-padding`等，请使用迭代。

```
var updateCSS = {};
var tokens = position.split('-');

for (var i = 0; i < tokens.length; i++) {
   if(tokens[i] == 'growl') continue;

   updateCSS[tokens[i]] = '0px';
}

container.css (updateCSS); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-01T16:18:46.580

使用可以使用fallthrough switch 语句，尽管它们仍然很丑陋。

```
switch(position.split("-").sort().join("-")) {
    case 'growl-top-left': //apply css
        break;
    case 'growl-center-top': // apply css
        break;
} 
```

感谢@Amberlamps 关于使用 position.split("-").sort().join("-") 的绝妙建议，他的完整解决方案也绝对比这更好。

# php - SQL 语法错误整数

> ID：15162017
> 
> 赞同：0
> 
> 时间：2013-03-01T16:12:16.993
> 
> 标签：php, mysql, sql

我正在尝试使用 php 和 html 写入 mysql 数据库的表单。提交表单后，我收到错误

> MySQL 错误：您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 2 行的 ''、'1'、'1362154007'、'127.0.0.1'' 附近使用正确的语法

提交php文件的代码是

```
<?php
require 'connection.php';
$ip = $_SERVER['REMOTE_ADDR'];
$sql="INSERT INTO entries (summoner, role, level, time, ip)
VALUES ('" . mysql_real_escape_string($_POST['summoner']) . "', " . mysql_real_escape_string($_POST['role']) . "', '" . intval($_POST['level']) . "', '" . time() . "', '" . $ip . "'"; 
if (!mysql_query($sql)) die("MySQL error: " . mysql_error());
echo "1 record added";
?> 
```

第二行的代码是

```
<?php
$con = mysql_connect("localhost", "ratchet132", "password", "lookingforq") or die(mysql_error());
mysql_select_db("lookingforq", $con) or die(mysql_error());
header("Content-Type: text/html; charset=utf-8");
mysql_set_charset("utf8");
mb_internal_encoding("UTF-8");
?> 
```

该错误仅发生在html表单未提交的整数上（虽然级别是由它提交的，但似乎与其他原因相同，而不是表单）。我认为这可能是我如何设置 MYSQL 表的错误，但我无法弄清楚我做错了什么。任何帮助都是极好的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T16:15:11.633

您的整数值中有一个额外的单引号，

```
VALUES ('" . mysql_real_escape_string($_POST['summoner']) . "', " . mysql_real_escape_string($_POST['role']) . "', '" . intval($_POST['level']) . "', '" . time() . "', '" . $ip . "'"; 
                                                                                                                ^ HERE 
```

我的建议是首先将值存储在变量中，以便调试代码，例如

```
$summoner = mysql_real_escape_string($_POST['summoner']);
$role = mysql_real_escape_string($_POST['role']);
$intV = intval($_POST['level']);
$sTime = time();
$ip = $_SERVER['REMOTE_ADDR'];
$sql="INSERT INTO entries (summoner, role, level, time, ip) 
      VALUES ('$summoner', $role, $intV, $sTime,'$ip' )')"; 
```

使用`PDO`或`MySQLi`扩展，以便您可以参数化查询。下面的链接讨论`SQL Injection`但它也显示了`PDO`和`MySQLi`扩展的用法。

*   [如何防止 PHP 中的 SQL 注入？](https://stackoverflow.com/questions/60174/how-to-prevent-sql-injection-in-php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T16:15:13.930

为什么将 int 值用引号括起来？

```
'" . intval($_POST['level']) . "' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T16:15:21.300

你缺少一个`'`. 尝试：

```
$sql="INSERT INTO entries (summoner, role, level, time, ip)
VALUES ('" . mysql_real_escape_string($_POST['summoner']) . "', '" . mysql_real_escape_string($_POST['role']) . "', '" . intval($_POST['level']) . "', " . time() . ", '" . $ip . "'"; 
```

# transitions - 错误 1034：将 TLF 文本转换为 MovieClip 以进行淡入淡出

> ID：15162020
> 
> 赞同：0
> 
> 时间：2013-03-01T16:12:29.857
> 
> 标签：transitions, tlf

当按下测试按钮时，我试图让我的项目中的文本淡入/淡出。我已经编写了基础知识（至少我是这么认为的），但是每次我尝试单击测试按钮时，都会收到以下错误消息：

> 错误信息：
> 
> > TypeError：错误 #1034：类型强制失败：无法将 fl.text::TLFTextField@2de22479 转换为 flash.display.MovieClip。在 Products_fla::Products_1/fader()

按钮的代码如下：

> 代码：

```
test.addEventListener(MouseEvent.CLICK, fader);

//Function: fade text
function fader(apple) :void{
clear();
TransitionManager.start(Text.Rubens, {type:Fade, direction:Transition.IN, duration:9,easing:Strong.easeOut});
} 
```

我已经搜索了几个小时，但我只从 Adob​​e 网站的复制/粘贴中找到了该代码：http: [//help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/fl/transitions/Fade .html](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/fl/transitions/Fade.html)

PS这是我第一次使用stackoverflow（因为我是新手:)，任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T16:13:29.020

我相信最后，我在运行时将 TLF 文本缓存为位图，然后应用 alpha 过渡。这似乎奏效了。说实话有点傻...

# ios - iOS5、iOS6、旋转、事件任意触发

> ID：15162021
> 
> 赞同：2
> 
> 时间：2013-03-01T16:12:30.503
> 
> 标签：ios, objective-c, cocoa, uiinterfaceorientation

我有一个支持方向更改并相应旋转的应用程序。我听事件 UIApplicationWillChangeStatusBarOrientationNotification。现在，在加载此应用程序期间，我添加了一些视图并根据当前方向在我的应用程序中设置它们。

在 iOS 6 中，这可以正常工作，并且应用程序可以正确响应和旋转，因此用户可以在横向和纵向模式下加载，并且代码可以正常工作。

在 iOS 5 中，如果我以纵向模式加载应用程序，则应用程序工作正常，并且一旦以纵向模式完成加载，并且 UI 对齐和调整大小，它将响应横向或纵向的其他方向更改。我遇到的问题是：在横向模式下加载 iOS 5 时，在将带有 iOS 5 的设备物理放置在平面上以确保其横向时，我得到一个从横向移动到纵向的 OrientationNotification（尽管设备没有改变 ）。

因此，同一实验中的另一台设备 iOS 6 可以正常加载，并且我没有收到任何奇怪的旋转更改事件，但在 iOS 5 中我确实得到了它们！

有任何想法吗？

我支持两个 iOS 的方向

```
- (BOOL)shouldAutorotate {
    return YES;
}

- (BOOL)shouldAutorotateToInterfaceOrientation:
                                   (UIInterfaceOrientation)interfaceOrientation {
    return (interfaceOrientation == UIInterfaceOrientationPortrait ||
            interfaceOrientation == UIInterfaceOrientationLandscapeLeft ||
            interfaceOrientation == UIInterfaceOrientationPortraitUpsideDown ||
            interfaceOrientation == UIInterfaceOrientationLandscapeRight);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T17:37:25.507

听起来 iOS 5 认为事物应该是纵向的，如果实际上没有物理方向（即平向上或向下）而 iOS 6 没有。为了确定在重要时显示内容的方向可能值得，我在可用时使用实际设备方向，在设备平坦时使用状态栏方向。例如：

```
// Get a useful screen orientation.
// If the device is physically in portrait or landscape then
// that is the orientation.
// If it is not, then it is probably flat on a table and use
// the orientation of the status bar which should be set to
// the last physical orientation.
//
// screen Orientation
//------------------------------------------------------------
+ (UIDeviceOrientation) screenOrientation {
   UIDeviceOrientation orientation = [[UIDevice currentDevice] orientation];
   if (orientation!=UIInterfaceOrientationPortrait
       && orientation!=UIInterfaceOrientationPortraitUpsideDown
       && orientation!=UIInterfaceOrientationLandscapeLeft
       && orientation != UIInterfaceOrientationLandscapeRight) {
       // Not known at this time.  Use the status bar orientation
       orientation = [[UIApplication sharedApplication] statusBarOrientation];
   }
    return orientation;
} 
```

我不确定这是否会直接帮助您，但也许在您的通知处理程序中，您可以查看实际的状态栏方向是什么。或者，通知的时间和状态栏方向的变化可能无法实现。

# c# - 每次单击 Gridview 选择按钮时，下拉列表项都会成倍增加

> ID：15162034
> 
> 赞同：0
> 
> 时间：2013-03-01T16:13:13.437
> 
> 标签：c#, asp.net, drop-down-menu

这是我的页面加载代码

```
protected void Page_Load(object sender, EventArgs e)
    {
        string str = "SELECT BOOK.book_name,BOOK.price,BOOK.author,BOOK.publisher,BOOK.isbn,BOOK_APPROVAL.status,BOOK_APPROVAL.cat_id FROM BOOK INNER JOIN BOOK_APPROVAL ON BOOK.book_id = BOOK_APPROVAL.book_id";

        SqlDataAdapter da = new SqlDataAdapter(str, obj.connect());

        da.Fill(ds);
        GridView1.DataSource = ds;
        GridView1.DataBind();

        ds1.Clear();
        DropDownList1.Items.Clear();

        string str1 = "SELECT cat_id,cat_name from CATEGORY";
        SqlDataAdapter da1 = new SqlDataAdapter(str1, obj.connect());
        da1.Fill(ds1);

        DropDownList1.DataSource = ds1;
        DropDownList1.DataTextField = "cat_name";
        DropDownList1.DataValueField = "cat_id";
        DropDownList1.DataBind();
    } 
```

我在同一页面上有一个下拉列表、带有选择按钮的网格视图和一个批准按钮。当我单击选择按钮时，它的值显示在一系列文本框中，然后我从下拉列表中选择一个项目。使用以下代码将其数据值字段分配给变量：

```
 SqlCommand ddl = new SqlCommand("select cat_id from CATEGORY where cat_name='" + DropDownList1.SelectedItem + "' ", obj.connect());

catID = Convert.ToInt32(ddl.ExecuteScalar()); 
```

最后，当我单击批准按钮时，所有文本框的值都被插入到 ID = dropdownlist.datavaluefield 的表中。

我的问题是，当我每次单击 gridviews 选择按钮时，我的下拉列表值会显示多次。

因此，尝试`ds1.Clear()`并`DropDownList1.Items.Clear();`在页面加载中，它解决了这个问题，但它将我的 Datavaluefield 重置为“1”。所以我不能使用选定的数据值字段插入表中。

那么我该如何解决呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T16:17:18.643

您只需将代码包装在`Page_Load`-check 中`!Page.IsPostBack`：

```
protected void Page_Load(object sender, EventArgs e)
{
    if(!IsPostBack)
    {
        // code here that should be executed only at the first time 
        // and not on consecutive postbacks
    }
} 
```

这些项目`ViewState`默认存储在 ASP.NET 中。

# python - 使用openCV for python的反投影

> ID：15162039
> 
> 赞同：2
> 
> 时间：2013-03-01T16:13:22.780
> 
> 标签：python, opencv, histogram

我正在为 Python 使用 openCV，即 cv2 库。我使用以下函数来计算图像 im_converted 的直方图

```
hist = cv2.calcHist([im_converted], channels, None, histSize, ranges,hist, 1) 
```

其中 im_converted 作为 uint8 类型的 numpy 数组加载。

hist 似乎被迫成为 float32 类型的 numpy 数组。当我使用反投影功能时会出现问题。（注意：我标准化直方图 st np.sum(hist)=1）

```
backProj = cv2.calcBackProject([im_converted], channels, hist, ranges,scale); 
```

文档在[这里](http://docs.opencv.org/2.4.2/modules/imgproc/doc/histograms.html?highlight=calcbackproject#cv2.calcBackProject)。backProj 被迫成为一个 uint8 numpy 数组。

*   如果 scale=1，则 backProj = 0
*   如果 scale=255 则 backProj 不为零，但值非常小。

我的问题是：考虑到类型之间的差异，应该应用什么比例因子？没有办法改变类型吗？（注意：我试图做 hist=zeros(histSize, dtype=uint8) 但这不成功，我最后还是得到了一个 float32 直方图。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T18:16:51.270

这取决于您的图像大小。如果您的图像有超过 255 个像素，那么直方图的 uint8 数据类型是不够的，因为 bin 可能会溢出。

似乎 OpenCV 行强制返回图像的数据类型与`calcBackProject`传入的图像相同。如果传入`uint8`图像但`float32`直方图的值大于 255，则可能会剪切反投影图像。

这样做的最明智的方法似乎是保持比例 = 1.0，但将`float32`图像传递给`calcBackProject`：

`backProj = cv2.calcBackProject([im_converted.astype('float32')], channels, hist, ranges,scale)`

另一种选择是传入`uint8`图像，但将比例设置为`255\. / hist.max()`. 因此，反投影图像中的 255 对应于最常见的颜色。

# excel - ElementHost 变得可见后，上下文菜单上的 CommandBarButton 不起作用

> ID：15162040
> 
> 赞同：0
> 
> 时间：2013-03-01T16:13:32.853
> 
> 标签：excel, wpf-controls, vsto, excel-2010, excel-addins

我在 excel 的上下文菜单上有一个 CommandBarPopup，其中包含三个 CommandBarButtons，其中一个按钮打开一个网页，另外两个打开一个自定义任务窗格。

如果我使包含托管 WPF 用户控件的元素主机的自定义任务窗格可见，那么我添加的任何 CommandBarButtons 都将停止工作。即使我关闭了自定义任务窗格，它仍然无法工作。

如果我对自定义任务窗格容器和 Web 浏览器执行相同操作，它似乎工作正常。

这是我们正在使用的代码

```
private void InitializeComponent()
    {
        this.elementHost1 = new System.Windows.Forms.Integration.ElementHost();
        this.myView = new MyView();
        this.SuspendLayout();
        // 
        // elementHost1
        // 
        this.elementHost1.Dock = System.Windows.Forms.DockStyle.Fill;
        this.elementHost1.Location = new System.Drawing.Point(0, 0);
        this.elementHost1.Name = "elementHost1";
        this.elementHost1.Size = new System.Drawing.Size(780, 560);
        this.elementHost1.TabIndex = 0;
        this.elementHost1.Text = "elementHost1";
        this.elementHost1.Child = this.myView;
        // 
        // MyTaskPane
        // 
        this.AutoScaleDimensions = new System.Drawing.SizeF(6F, 13F);
        this.AutoScaleMode = System.Windows.Forms.AutoScaleMode.Font;
        this.Controls.Add(this.elementHost1);
        this.Name = "MyTaskPane";
        this.Size = new System.Drawing.Size(780, 560);
        this.ResumeLayout(false);

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T15:02:41.727

所以答案是，一旦变量范围结束，CommandBarButtons 就会被释放，这很令人惊讶，因为我认为它们会附加到 excel 应用程序对象上。还查看了 excel 命令栏，我可以看到那里的按钮，但是单击它们会导致单击事件未触发。无论如何，我将它们存储在一个类变量中并且它再次工作。

# c# - EF 添加已定义的 FK

> ID：15162046
> 
> 赞同：1
> 
> 时间：2013-03-01T16:13:47.463
> 
> 标签：c#, sql, entity-framework, ef-code-first, code-first

我首先遇到了 Code 和生成的 sql 数据库的问题。

是关于公牛和奶牛的应用程序

这是我的课程：

```
public class Animal : BaseEntity
{
    public virtual int? DeathId { get; set; }
    public virtual Death Death { get; set; }

    public virtual int? SellId { get; set; }
    public virtual Sell Sell { get; set; }
}

public class Death : Event
{
    public virtual int AnimalId { get; set; }
    public virtual Animal Animal { get; set; }
}

public class Sell : Event
{
    public virtual int AnimalId { get; set; }
    public virtual Animal Animal { get; set; }
} 
```

生成这个 sql 脚本：

```
create table [dbo].[Animal] (
    [Id] [int] not null identity,
    [DeathId] [int] null,
    [SellId] [int] null,
    primary key ([Id])
);
create table [dbo].[Death] (
    [Id] [int] not null,
    [AnimalId] [int] not null,
    primary key ([Id])
);
create table [dbo].[Sell] (
    [Id] [int] not null,
    [AnimalId] [int] not null,
    primary key ([Id])
); 
```

一切正常，但问题在于这些类：

```
public class Servicie : Event
{
    public virtual int MaleId { get; set; }
    public virtual Male Male { get; set; }

    public virtual int FemaleId { get; set; }
    public virtual Female Female { get; set; }

    public virtual int? ChildbirthId { get; set; }
    public virtual Childbirth Childbirth { get; set; }
}

public class Childbirth : Event
{
    public virtual int ServicieId { get; set; }
    public virtual Servicie Servicie { get; set; }

    public virtual int FemaleId { get; set; }
    public virtual Female Female { get; set; }
} 
```

这些类生成这个 Sql 脚本：

```
create table [dbo].[Service] (
    [Id] [int] not null,
    [MaleId] [int] not null,
    [FemaleId] [int] not null,
    [ChildbirthId] [int] null,
    primary key ([Id])
);
create table [dbo].[Parto] (
    [Id] [int] not null,
    [Servicie_Id] [int] not null,
    [ServicieId] [int] not null,
    [FemaleId] [int] not null,
    primary key ([Id])
); 
```

如您所见，自动添加了最后一个“ServicieId”和“Servicie_Id”。

所有都是 1 到 0..1 的关系，我看不出有什么区别，有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T16:28:03.557

编辑 - 添加了整个测试应用程序：

当我使用这个模型（你的简化版）。我必须添加一个必需的注释，以便 EF 知道哪个是主体，哪个是依赖端，它很困惑。

```
using System;
using System.Collections.Generic;
using System.ComponentModel.DataAnnotations;
using System.Data;
using System.Data.Entity;
using System.Linq;
using System.Text;

namespace CFExamples2
{
    public class Servicio 
    {
        public int Id { get; set; }

        public int? PartoId { get; set; }
        public virtual Parto Parto { get; set; }
    }

    public class Parto
    {
        public int Id { get; set; }
        public virtual int ServicioId { get; set; }
        [Required]
        public virtual Servicio Servicio { get; set; }
    }

    public class Model : DbContext
    {
        public DbSet<Servicio> Servicios { get; set; }
        public DbSet<Parto> Partos { get; set; }

        protected override void OnModelCreating(DbModelBuilder modelBuilder)
        {

        }
    }
    class Program
    {
        static void Main(string[] args)
        {

        }
    }
} 
```

它产生了这个：

![在此处输入图像描述](../Images/f9c737180bd8e2384275aed45b018b5d.png)

# c# - 非常奇怪 - 当我使用断点时，代码（随机）的工作方式不同

> ID：15162048
> 
> 赞同：5
> 
> 时间：2013-03-01T16:14:01.687
> 
> 标签：c#, debugging

我正在做一个神经网络项目，我有两个这样的课程：

```
public class Net
{
    // Net object is made of neurons
    public List<Neuron> Neurons = new List<Neuron>();

    // neurons are created in Net class constructor
    public Net(int neuronCount, int neuronInputs)
    {
        for (int n = 0; n < neuronCount; n++)
        {
            Neurons.Add(new Neuron(n, neuronInputs));
        }
    }
}

public class Neuron
{
    public int index; // neuron has index

    public List<double> weights = new List<double>(); // and list of weights

    // Neuron constructor is supposed to add random weights to new neuron
    public Neuron(int neuronIndex, int neuronInputs)
    {
        Random rnd = new Random();

        for (int i = 0; i < neuronInputs; i++)
        {
            this.index = neuronIndex;
            this.weights.Add(rnd.NextDouble());
        }
    } 
```

当我尝试创建网络并显示它的“内容”时：

```
Neuro.Net Network = new Neuro.Net(4, 4); // creating network with 4 neurons with 4 weights each

// dgv is a DataGridView for weights preview
dgv.Rows.Clear();
dgv.Columns.Clear();

// creating columns
foreach (Neuro.Neuron neuron in Network.Neurons)
{
    dgv.Columns.Add("colN" + neuron.index, "N" + neuron.index);
}

dgv.Rows.Add(Network.Neurons[0].weights.Count());

for (int n = 0; n < Network.Neurons.Count(); n++)
{
   for (int w = 0; w < Network.Neurons[n].weights.Count(); w++)
   {
       dgv.Rows[w].Cells[n].Value = Network.Neurons[n].weights[w];
   }
} 
```

当我运行该代码时 -**我得到这样的东西**（所有权重都是相同的）：

![在此处输入图像描述](../Images/1695cc4b1200c2917115cb69ac7dab81.png)

当我看到它时 - 我试图调试并找到我的错误。但是，**当我在神经元构造函数中放置断点时**- 我的网络会根据需要进行初始化（权重不同）：

![在此处输入图像描述](../Images/46ae509fdd7946c11cfd1aa45a0bd66b.png)

我尝试使用调试和发布配置 - 结果相同。

**有人可以解释这里发生了什么吗？**

**魔法？**

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-01T16:17:01.510

> 但是，当我在神经元构造函数中放置断点时 - 我的网络会根据需要进行初始化（神经元是不同的）：

据推测，断点引入了足够的延迟，`Random()`以便用不同的数字播种。延迟可能是由于您暂停代码（显然）甚至是条件断点的不匹配评估（这会稍微减慢执行速度）造成的。

最好有：

```
private static readonly Random _random = new Random(); 
```

并`_random.Next()`在不创建新实例的情况下调用，例如：

```
public Neuron(int neuronIndex, int neuronInputs)
{
    for (int i = 0; i < neuronInputs; i++)
    {
        this.index = neuronIndex;
        this.weights.Add(_random.NextDouble());
    }
} 
```

Random 的无参数构造函数使用`Environment.TickCount`（因此引入延迟时的差异）。如果您必须每次都创建一个新实例，您也可以提供自己的种子。

[此处](http://msdn.microsoft.com/en-us/library/system.random.aspx)记录了此行为，特别是：

> ...因为时钟的分辨率是有限的，所以使用无参数构造函数来创建不同的 Random 对象，从而创建产生相同随机数序列的随机数生成器。[...] 这个问题可以通过创建单个 Random 对象而不是多个对象来避免。

或者，您可以使用`System.Security.Cryptography.RNGCryptoServiceProvider`.

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-01T16:16:36.720

使用当前系统时间生成随机数。

在调试时，您允许在每一代之间的某个时间。当你运行代码时，它运行得如此之快以至于种子是相同的，因此生成的随机数是相等的。

解决方案：声明一个类成员以包含随机实例，并为每个新的随机调用`.Next()`方法。

```
private static rnd = new Random(); 
```

删除这一行：

```
Random rnd = new Random(); 
```

你完成了

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-01T16:19:53.710

创建`Random`类的静态实例。

因为在构造函数中，Random 每次都会被初始化，因此可能会有相似的数字！

```
private static readonly Random rnd = new Random();
public Neuron(int neuronIndex, int neuronInputs)
{
    private static readonly rnd = new Random();     

    for (int i = 0; i < neuronInputs; i++)
    {
        this.index = neuronIndex;
        this.weights.Add(rnd.NextDouble());
    }
} 
```

# javascript - (JavaScript) 将 forEach 循环与内部回调同步

> ID：15162049
> 
> 赞同：31
> 
> 时间：2013-03-01T16:14:03.413
> 
> 标签：javascript, node.js

我在双`forEach`循环中进行一些计算，如下所示：

```
array.forEach(function(element){
    Object.keys(element).forEach(function(key){

        /* some complex computations with asynchronous callbacks  */        

    });
});

someFunctionHere(); 
```

有没有办法让循环在执行功能之前先完成`someFunctionHere( )`？或者程序在继续之前知道循环是否完成的任何方式`someFunctionHere( )`......

我可能错过了一些论坛，但我发现的那些并没有帮助我实现我想要实现的目标，顺便说一下我在 NodeJS 中这样做的方式，我也在问是否有现有的库可以实现这一点。

**我忘了把这个加起来还是应该是另一个问题？**

有没有办法同步进行迭代，只有在当前迭代完成后才会进行下一次迭代？（非常遗憾）

谢谢你的帮助...

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2013-03-01T16:17:06.487

看看 async.js，尤其是它的[控制流](https://github.com/caolan/async#control-flow)语句，例如`each` `whilst`和`until`。

使用 async.js 你可以得到你想要的。

在您的实际情况下，您想要的是`each`函数（以前称为`forEach`），分别是`eachSeries`不并行运行单个迭代而是串行运行的函数（有关详细信息，请参阅[eachSeries 的文档](https://github.com/caolan/async#eachseriesarr-iterator-callback)）。

举个例子：

```
async.eachSeries([ 2, 3, 5, 7, 11 ], function (prime, callback) {
  console.log(prime);
  callback(); // Alternatively: callback(new Error());
}, function (err) {
  if (err) { throw err; }
  console.log('Well done :-)!');
}); 
```

这将遍历素数数组并以正确的顺序打印它们，一个接一个，最后打印出来`Well done :-)!`。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-01T16:22:32.827

您可以将回调包装在倒计时闭包中：

```
var len = array.length;

function countdownWrapper(callback, callbackArgs) {
    callback(callbackArgs);
    if (--len == 0) {
        someFunctionHere();
    }
}

array.forEach(function(element){
    Object.keys(element).forEach(function(key){

        var wrappedCallback = countdownWrapper.bind(callback);
        /* some complex computations with asynchronous WRAPPED callbacks  */

    });
}); 
```

如果回调有不同数量的参数，你可以做一些小手术`arguments`而不是使用显式`callbackArgs`参数。

**编辑**您的编辑阐明了您希望在前一个计算完成回调后开始每个复杂计算。这也可以通过闭包轻松安排：

```
function complexOp(key, callback) { /* . . . */ }

function originalCallback(...) { /* . . . */ }

function doSomethingElse() { /* . . . */ }

var iteratorCallback = (function (body, callback, completion) {
    var i = 0, len = array.length;
    return function iterator() {
        callback.apply(null, arguments);
        if (++i < len) {
            body(array[i], iterator);
        } else {
            completion();
        }
    };
}(complexOp, originalCallback, doSomethingElse)); 

// kick everything off:
complexOp(array[0], iteratorCallback); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-03-11T10:02:52.737

高性能解决方案：

在某些情况下，您可能希望/允许异步/并行处理数组，但希望在处理完 forEach 的所有成员后调用函数。例子：

```
var async = require('async');

async.forEach(array,function(elementOfArray, callback){
    //process each element of array in parallel 
    // ..
    // ..
    // .. 
    callback(); //notify that this iteration is complete
}, function(err){
 if(err){throw err;}
 console.log("processing all elements completed");
}); 
```

因此，您可以通过这种方式执行非阻塞 CPU 密集型操作。

注意：当您将**eachSeries**用于大型数组时，如此多的迭代回调可能会溢出堆栈。

在这里阅读： [https ://github.com/caolan/async#control-flow](https://github.com/caolan/async#control-flow)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-06-19T08:52:28.300

对于支持 Promise（或使用 polyfill）/nodejs 的浏览器，我自己实现了一个带有回调的 forEach 的同步版本，所以我将在这里分享。

回调必须返回一个承诺..

```
function forEachSync(array, callback) {
    let lastIndex = array.length - 1;
    let startIndex = 0;

    return new Promise((resolve, reject) => { // Finish all
        let functionToIterateWith = (currIndex) => {
            if (currIndex > lastIndex) {
                return resolve();
            } else {
                callback(array[currIndex]).then(() => {
                    functionToIterateWith(currIndex + 1);
                }).catch(err => reject(err));
            }
        }

        functionToIterateWith(startIndex);
    });
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-09-05T20:55:38.703

```
let dataObject = {};
Promise.all(objectArray.map(object => {
        return new Promise(resolve => {
            yourFunction(object, anotherParameter).then(returnValue => {
                dataObject[object] = returnValue;
                resolve();
            });
        });
    })).then(() => {
        return dataObject;
    }); 
```

# android - 广播接收器上的 BluetoothDevice.ACTION_NAME_CHANGED

> ID：15162054
> 
> 赞同：0
> 
> 时间：2013-03-01T16:14:23.170
> 
> 标签：android, bluetooth, broadcastreceiver

如何管理*BroadcastReceiver*上的**BluetoothDevice.ACTION_NAME_CHANGED**。我熟悉*BluetoothChat*示例。

 **- -编辑 - -

```
private final BroadcastReceiver mReceiver = new BroadcastReceiver() {
    @Override
    public void onReceive(Context context, Intent intent) {
        String action = intent.getAction();

        // When discovery finds a device
        if (BluetoothDevice.ACTION_FOUND.equals(action)) {
            // Get the BluetoothDevice object from the Intent
            BluetoothDevice device = intent.getParcelableExtra(BluetoothDevice.EXTRA_DEVICE);
            // If it's already paired, skip it, because it's been listed already
            if (device.getBondState() != BluetoothDevice.BOND_BONDED) {
                mNewDevicesArrayAdapter.add(device.getName() + "\n" + device.getAddress());
            }
        // When discovery is finished, change the Activity title
        } else if (BluetoothAdapter.ACTION_DISCOVERY_FINISHED.equals(action)) {
            setProgressBarIndeterminateVisibility(false);
            setTitle(R.string.select_device);
            if (mNewDevicesArrayAdapter.getCount() == 0) {
                String noDevices = getResources().getText(R.string.none_found).toString();
                mNewDevicesArrayAdapter.add(noDevices);
            }
        }
    }
}; 
```

我想实现 BluetoothDevice.ACTION_NAME_CHANGED 但我不知道如何

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-11-07T16:49:37.663

嗨，我有同样的问题。我修好了它。

在 onCreate 中，添加以下内容：

```
filter = new IntentFilter(BluetoothDevice.ACTION_NAME_CHANGED);
this.registerReceiver(mReceiver, filter); 
```

接下来，编辑下面的 BroadcastReceiver：

```
private final BroadcastReceiver mReceiver = new BroadcastReceiver() {
    @Override
    public void onReceive(Context context, Intent intent) {
        String action = intent.getAction();

        // When discovery finds a device
        if (BluetoothDevice.ACTION_FOUND.equals(action)) {
            // Get the BluetoothDevice object from the Intent
            BluetoothDevice device = intent.getParcelableExtra(BluetoothDevice.EXTRA_DEVICE);
            Log.d("mReceiver","ACTION_FOUND:"+device.getAddress()+" :"+device.getName());
            // If it's already paired, skip it, because it's been listed already

            if(device.getName()==null)
            { //when name is null, skip
              //But if you want to make lists asap, comment out this block.
            }
            else
            {
                if (device.getBondState() != BluetoothDevice.BOND_BONDED) {
                    //mNewDevicesArrayAdapter.add(device.getName() + "\n" + device.getAddress());
                    boolean listed = false;
                    for (int i = 0; i < mNewDevicesArrayAdapter.getCount(); i++) {
                        String info = mNewDevicesArrayAdapter.getItem(i);
                        String address = info.substring(info.length() - 17);
                        if (device.getAddress().equals(address)) {
                            Log.d("mReceiver", "ACTION_FOUND: replace the item of lists");
                            mNewDevicesArrayAdapter.remove(info);
                            info = device.getName() + "\n" + device.getAddress();
                            mNewDevicesArrayAdapter.insert(info, i);
                            listed = true;
                            break;
                        }
                    }
                    if(listed==false)
                    {//if it is new device( not in lists), add it.
                        mNewDevicesArrayAdapter.add(device.getName() + "\n" + device.getAddress());
                    }
                }
            }

        }else if(BluetoothDevice.ACTION_NAME_CHANGED.equals(action)) {
            BluetoothDevice device = intent.getParcelableExtra(BluetoothDevice.EXTRA_DEVICE);
            Log.d("mReceiver", "NAME_CHANGED:" + device.getAddress() + " :" + device.getName());
            if (device.getBondState() != BluetoothDevice.BOND_BONDED) {
                boolean listed = false;
                for (int i = 0; i < mNewDevicesArrayAdapter.getCount(); i++) {
                    String info = mNewDevicesArrayAdapter.getItem(i);
                    String address = info.substring(info.length() - 17);
                    if (device.getAddress().equals(address)) {
                        Log.d("mReceiver", "NAME_CHANGED: replace the item of lists");
                        mNewDevicesArrayAdapter.remove(info);
                        info = device.getName() + "\n" + device.getAddress();
                        mNewDevicesArrayAdapter.insert(info, i);
                        listed = true;
                        break;
                    }
                }
                if(listed==false)
                {//if it is new device( not in lists), add it.
                    mNewDevicesArrayAdapter.add(device.getName() + "\n" + device.getAddress());
                }
            }
        } else if (BluetoothAdapter.ACTION_DISCOVERY_FINISHED.equals(action)) {
            setProgressBarIndeterminateVisibility(false);
            setTitle(R.string.select_device);
            if (mNewDevicesArrayAdapter.getCount() == 0) {
                String noDevices = getResources().getText(R.string.none_found).toString();
                mNewDevicesArrayAdapter.add(noDevices);
            }
        }
    }
}; 
```**

# ruby-on-rails-3.1 - Rails 生成迁移

> ID：15162055
> 
> 赞同：57
> 
> 时间：2013-03-01T16:14:31.527
> 
> 标签：ruby-on-rails-3.1

我目前有一个名为 Products 的迁移，我只想在此迁移中添加更多字符串，例如描述和产品类型。做这个的最好方式是什么？

```
class CreateProducts < ActiveRecord::Migration
  def change
    create_table :products do |t|
      t.string  :name
      t.decimal :price
      t.text    :description
      t.timestamps
    end
   end
 end 
```

* * *

## 回答 #1

> 赞同：84
> 
> 时间：2013-11-15T18:47:10.803

赶紧跑

```
rails g migration add_description_to_products description:string
rails g migration add_product_type_to_products product_type:string 
```

然后运行

```
rake db:migrate 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2013-03-01T20:19:43.463

在任何实际应用程序的开发中，您将进行相当多的迁移，这些迁移基本上是 DDL（数据定义语言）语句。在现实生活中，您将拥有多个环境（开发、测试、生产等），并且您很有可能在拥有生产版本的同时更改开发数据库。出于这个原因，Rails 的方式是为数据库的任何更改生成一个新的迁移，而不是直接更改现有的迁移文件。

因此，请熟悉迁移。

对于具体问题，您可以执行以下操作：

```
rails g migration add_attributes_to_products attr1 attr2 attr3 
```

这将生成一个新的迁移文件，用于将 3 个新属性添加到产品表（到产品模型）。属性的默认类型是`string`。对于其他人，您已将其指定为：

```
rails g migration add_attributes_to_products attr1:integer attr2:text attr3:enum 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-07-14T07:51:41.457

如果你的`rollback`最后一个动作是`migration`

```
rake db:rollback 
```

然后在迁移文件中添加属性

```
class CreateProducts < ActiveRecord::Migration
  def change
    create_table :products do |t|
      t.string  :name
      t.decimal :price
      t.text    :description
      t.string  :product_type  #adding product_type attribute to the products table
      t.timestamps
    end
   end
 end 
```

之后使用迁移

```
rake db:migrate 
```

如果迁移不是您的最后一个操作，请在上述答案中生成一个新的迁移文件

```
rails g migration add_attributes_to_products product_type:string 
```

上面的代码只生成了迁移文件，但是你想用它`rake db:migrate`来迁移文件。

如果您想对该迁移文件进行更多更改，例如添加更多属性，请在迁移之前执行，否则如果您的最后一个操作是迁移，则必须使用我在开头提到的方法，否则您需要生成另一个迁移文件。检查此链接以了解有关迁移的更多信息 [http://guides.rubyonrails.org/v3.2.8/migrations.html](http://guides.rubyonrails.org/v3.2.8/migrations.html)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-01T16:41:26.037

Assuming you created the table with the migration above, then to add product_type (you already had description) you would do:

```
# db/migrate/20130201121110_add_product_type_to_product.rb

class AddProductTypeToProduct < ActiveRecord::Migration
  def change
    add_column :products, :product_type, :string
    Product.all.each do |product|
      product.update_attributes!(:product_type => 'unknown')
    end
  end
end 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-11-22T09:42:55.187

rails 生成迁移 add_description_to_products

```
AddDescriptionToProducts < ActiveRecords:: Migration[v]
  def change
    add_column :products :description :string
    add_column :name_of_table :name_of_column :data_type
  end 
```

运行 rake db:migrate 并且您的**schema.rb**将自动更新

# vb.net - RDLC 报告在部署到 IIS 后没有发布到？

> ID：15162056
> 
> 赞同：5
> 
> 时间：2013-03-01T16:14:32.883
> 
> 标签：vb.net, report, rdlc, web-deployment

我有一个用 VB.NET 编写的 Web 应用程序。在我的应用程序中，我有一些将动态生成的 RDLC 报告。在开发过程中一切正常。但是在我将 Web 应用程序部署到 IIS 后，这些报告不起作用。这是我的问题。

（1）我的RDLC文件夹下的所有报表都没有部署，我想这就是我得到错误“本地报表处理过程中发生错误”的原因我的问题是为什么这个文件夹没有发布，我应该设置什么发布这个文件夹？

(2) 如果我手动将那些 RDLC 报告复制到目标文件夹，我会收到另一个错误“失败：未知用户名或密码错误” 我的身份验证模式设置为 Windows。我还需要在 web.config 中设置什么吗？

我正在使用 IIS 5.1，并且我的 Web 应用程序已从 VS2005 升级到 VS2010。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-07-12T06:36:31.193

您的 RDLC 文件可能被标记为“嵌入式资源”。右键单击 rdlc 文件并将其更改为“内容”并重新发布。这次它会起作用。

# facebook-apps - 经过验证的开发者资料中缺少“创建应用”按钮

> ID：15162058
> 
> 赞同：0
> 
> 时间：2013-03-01T16:14:44.507
> 
> 标签：facebook-apps

几个月前，我曾经能够使用我的个人资料创建 Facebook 应用程序。现在我再次回到开发，但无法创建任何应用程序，原因很简单，页面[https://developers.facebook.com/apps](https://developers.facebook.com/apps)不再有创建应用程序按钮。

我的帐户已经过验证，我之前已经激活了 facebook 开发者应用程序（即使我现在由于某种原因在我的应用程序列表中没有看到），我以个人身份登录，而不是作为页面管理员登录，并且我在使用之前创建了应用程序完全相同的帐户。

有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T16:58:27.147

这是一个关于开发人员数据一致性的已知问题。

我在[Facebook 上发布的解决方案 - 无法创建应用](http://facebook.stackoverflow.com/questions/15152732/facebook-unable-to-create-an-app)

去[https://developers.facebook.com/setup](https://developers.facebook.com/setup)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T17:28:18.423

我已经与这个问题斗争了几个小时！我认为这是因为自从 facebook 过渡到应用程序中心后我还没有创建应用程序。直接访问[https://developers.facebook.com/setup](https://developers.facebook.com/setup)解决了我的问题！

# powershell - 如何在 V2 中模拟 PowerShell V3 属性

> ID：15162062
> 
> 赞同：25
> 
> 时间：2013-03-01T16:15:09.330
> 
> 标签：powershell, attributes, compatibility

作为一个喜欢彻底记录文档的人，我很高兴发现`SupportsWildcards`PowerShell V3 中添加的属性等。我在我的库中使用该属性适当地修饰了参数。从长远来看没有问题，但在短期内仍然有很多人出于各种原因使用 V2（包括我在一个环境中）。

仅仅因为一个属性，我的一些函数就不能在 PowerShell V2 中运行，这似乎很愚蠢。因此，我正在寻找一种方法来模拟 V2 中的属性，以将其本质上变成“无操作”。

在我看来，解决方案需要两个部分：

1.  创建一个本质上为空的自定义属性。
2.  使其在 V2 中生效，但在 V3 中被忽略（因此允许真正的 V3 属性正常工作）。

我正在寻找这两个部分的指导，以前没有玩过自定义属性。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T14:22:47.700

也许你可以试试这个。

```
 Add-Type @"    
        public class CustomAttribute : System.Attribute
        {
           public bool SupportSomething { get; set; } 
        }
    "@

    function Do-Something {
        param(
            [CustomAttribute(SupportSomething=$true)]
            $Command
        )
    }

    $parameters = Get-Command -Name Do-Something | Select-Object -ExpandProperty Parameters
    $parameters["Command"].Attributes 
```

然后输出：

```
 SupportSomething : True
    TypeId           : CustomAttribute 
```

我们首先在 C# 中定义属性，您也可以在 PowerShell 中这样做。将属性添加到参数。然后获取属性列表。有关更多属性示例，请参见[此处](http://msdn.microsoft.com/en-us/library/84c42s56.aspx)

# php - 防止直接访问类似于 codeigniter 的 php 配置和类

> ID：15162069
> 
> 赞同：1
> 
> 时间：2013-03-01T16:15:37.310
> 
> 标签：php, security, codeigniter

我已经大量使用 Codeigniter 框架来依赖我的 php web 开发。我喜欢类和模型有这条线的事实

```
<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed'); 
```

以防止直接访问该文件。

我想在我的非 codeigniter 站点（主要是类）中做同样的事情，并且想知道我是否可以做同样的事情？是否有最佳实践来做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T16:21:16.203

你可以用 .htacces

我从 codeingiter 论坛获取了这段代码，它会从 url 中删除 index.php 并阻止直接访问您的文件，除非它是您在评论中看到的图像或 css。

归功于 ElliotHaughin

```
Options -Indexes
Options +FollowSymLinks
RewriteEngine On
RewriteBase /(base domain goes here)/

#Removes access to the system folder by users.
#Additionally this will allow you to create a System.php controller,

RewriteCond %{REQUEST_URI} ^system.*
RewriteRule ^(.*)$ index.php?/$1 [L]

#When your application folder isn't in the system folder

RewriteCond %{REQUEST_URI} ^application.*
RewriteRule ^(.*)$ /index.php?/$1 [L]

#Checks to see if the user is attempting to access a valid file,
#such as an image or css document, if this isn't true it sends the
#request to index.php

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php?/$1 [L]

# If we don't have mod_rewrite installed, all 404's
# can be sent to index.php, and everything works as normal.
# Submitted by: ElliotHaughin   

ErrorDocument 404 /index.php 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T16:22:11.510

Codeigniter 在 index.php 文件中设置 BASEPATH 常量。因此，您当然只想在非 Codeigniter 项目的索引文件中执行相同的操作，然后将以下行添加到您也不想直接访问脚本的任何文件中。

```
<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed'); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-01T16:24:52.020

最佳做法是将文件移到公用文件夹之外，这样您的文件就根本无法访问。只有应该在公共文件夹中公开的文件，如 css、js 文件，并将应用程序上移一个文件夹。

因此，如果您的公用文件夹是： `/home/pcken/pubic_html`

将您的文件夹与您的应用程序一起移动到 `/home/pcken/`

并使用 index.php 作为路由器来包含该文件夹中的文件。

否则`!defined("BASEPATH")`工作正常。

# asp.net - 找不到asp.net页面

> ID：15162072
> 
> 赞同：0
> 
> 时间：2013-03-01T16:15:41.307
> 
> 标签：asp.net

asp.net 使用超链接

```
<asp:HyperLink ID="HyperLink4" NavigateUrl="~/Diary_Documents/Details.aspx" runat="server" Text="Images"></asp:HyperLink> 
```

将用户带到 Diary_Documents 文件夹内的详细信息页面。

Iv 复制了整个 Diary_Documents 文件夹以包括列表、插入、编辑和详细信息，包括 aspx 和 cs。

将其粘贴到 customPages 文件夹中，将其重命名为“Diary_Documents2”，然后将超链接更改为

```
<asp:HyperLink ID="HyperLink4" NavigateUrl="~/Diary_Documents2/Details.aspx" runat="server" Text="Images"></asp:HyperLink> 
```

但是找不到该页面...我在做什么错？![在此处输入图像描述](../Images/1ee91b8a1fb3e90d9a97adad8b03e434.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T21:16:45.600

查看目录结构，除非我错了，否则链接应该是-

```
<asp:HyperLink NavigateUrl="~/DynamicData/CustomPages/Diary_Documents/Details.aspx" runat="server" Text="Images"></asp:HyperLink> 
```

或者

```
<asp:HyperLink NavigateUrl="~/DynamicData/CustomPages/Diary_Documents2/Details.aspx" runat="server" Text="Images"></asp:HyperLink> 
```

波浪号 (~) 使其成为**应用程序根目录的**相对路径。因此，您需要添加“DynamicData/CustomPages”来完成路径。

由于您没有提供包含链接的页面的位置，因此我无法向您展示纯 HTML 相对链接是什么，但如果页面在“CustomPages”中作为示例，它将是这样的 -

```
<asp:HyperLink NavigateUrl="Diary_Documents/Details.aspx" runat="server" Text="Images"></asp:HyperLink> 
```

# c++ - 无法制作简单的 WCF + gSOAP 堆栈

> ID：15162074
> 
> 赞同：0
> 
> 时间：2013-03-01T16:15:46.487
> 
> 标签：c++, wcf, gsoap

我正在尝试进行简单的 WCF-C++ 通信。WCF 应用程序是一个简单的计算器实现（add、sub、div、mul）。项目中没有任何额外的依赖项或文件。然后我制作了一个 gSOAP 应用程序并添加了带有此类选项的生成代理：

```
wsdl2h.exe -o %FILE%.h %WSDL%
soapcpp2 -C -L -w -i -j %FILE%.h -I ../../import/ -d"%OUTPUT_PATH%" 
```

我编译了我的项目，现在遇到了这样的问题：

WCF 响应：

```
Bad Request - Invalid Verb
------------------------------------
HTTP Error 400\. The request verb is invalid. 
```

gSOAP 错误：

```
Error 3 fault: SOAP-ENV:Client[no subcode]
"Validation constraint violation: tag name or namespace mismatch in element 'HTML'"
Detail: [no detail] 
```

# git - 将删除移动到 git 中的分支

> ID：15162078
> 
> 赞同：2
> 
> 时间：2013-03-01T16:15:57.843
> 
> 标签：git

在过去的几个月里，我多次为某个功能开发代码，将该功能提交到 git 存储库，然后在以后决定删除其中一些功能。为了保持代码库干净，我最终必须做的是删除提交给 git 的文件或部分文件并提交这些更改。

但是，为了以后可以轻松恢复已删除的代码，我执行了一个额外的步骤，即在其他地方克隆存储库，在删除之前检查提交，复制已更改的文件（使用同上，甚至有时手动），然后将更改提交到新分支。这个额外的步骤使我能够在分支中抽象出已删除的特性，并在稍后阶段通过合并分支很容易地将特性恢复到代码库中。

这是一种常见的做法吗？更重要的是，我是否缺少一个允许我开箱即用的 git 功能。如果是这样，实现此目的的命令是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T16:21:09.567

`git checkout <sha1> filepath/filename`将修订版 sha1 中的文件放入您的工作副本。

`git revert`是恢复提交所做的更改，包括合并提交。您还可以还原还原。

请不要克隆，因为它的过程太繁重，结帐工作得更快。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-01T17:48:41.213

假设您在 Git 的 git 存储库中工作，并且您有一个好主意。

```
$ git rm -rf 文档
$ git commit -m '文档是为弱者准备的'
```

这导致了以下历史。（注意：[`git lol`](http://blog.kfish.org/2010/04/git-lola.html)是一个非标准但非常有用的别名。）

```
$混帐哈哈
* d55a922 (HEAD, master) 文档是为弱者准备的
* 443d803 (origin/master, origin/HEAD) 合并分支'maint'
|\
| * 8d44277 (origin/maint) 更新草稿发行说明到 1.8.1.5
| * 6f0c336 将分支 'ef/non-ascii-parse-options-error-diag' 合并到 maint
| |\
...
```

为了给自己一个 mulligan，在你新提交的提交中签出一个分支并在那里恢复。

```
$ git checkout -b mulligan/delete-all-documentation
$ git revert --no-edit HEAD
```

现在有了

```
$ git结账大师
```

你可以回去工作了。

假设您向 master 添加了一个新提交，那么您的历史记录变为

```
$ 混帐萝拉
* b4d76d9 (HEAD, master) 添加新功能 X
| * 84b0e21 (mulligan/delete-all-documentation) 恢复“文档是为弱者准备的”
|/
* d55a922 文档适用于弱者
| * 46b564f (origin/pu) 合并分支 'pc/subtree-add-before-fetch' 到 pu
...
```

这不是常见的做法。`git merge`只有在或`git cherry-pick`干净利落的情况下，恢复该功能将非常容易，也就是说，如果没有对删除旧功能的代码应用其他更改。往下看，看看这将如何扩展。要恢复旧功能，开发人员将不得不筛选一堆分支以找到合适的恢复。Git 对搜索历史有*很好*的支持，我们可以从缺乏这些长期存在的 mulligan 分支中看到这一点。

# ruby-on-rails - 运行mongod时出错

> ID：15162080
> 
> 赞同：-1
> 
> 时间：2013-03-01T16:16:07.813
> 
> 标签：ruby-on-rails, mongodb

我使用这个安装了 mongodb：http: [//docs.mongodb.org/manual/tutorial/install-mongodb-on-ubuntu/](http://docs.mongodb.org/manual/tutorial/install-mongodb-on-ubuntu/)

当我运行 mongod 时，我得到了这个：

```
mongod --help for help and startup options
Fri Mar  1 18:11:06 
Fri Mar  1 18:11:06 warning: 32-bit servers don't have journaling enabled by default. Please use --journal if you want durability.
Fri Mar  1 18:11:06 
Fri Mar  1 18:11:06 [initandlisten] MongoDB starting : pid=6265 port=27017 dbpath=/data/db/ 32-bit host=aboelseoud
Fri Mar  1 18:11:06 [initandlisten] 
Fri Mar  1 18:11:06 [initandlisten] ** NOTE: when using MongoDB 32 bit, you are limited to about 2 gigabytes of data
Fri Mar  1 18:11:06 [initandlisten] **       see http://blog.mongodb.org/post/137788967/32-bit-limitations
Fri Mar  1 18:11:06 [initandlisten] **       with --journal, the limit is lower
Fri Mar  1 18:11:06 [initandlisten] 
Fri Mar  1 18:11:06 [initandlisten] db version v2.2.3, pdfile version 4.5
Fri Mar  1 18:11:06 [initandlisten] git version: f570771a5d8a3846eb7586eaffcf4c2f4a96bf08
Fri Mar  1 18:11:06 [initandlisten] build info: Linux bs-linux32.10gen.cc 2.6.21.7-2.fc8xen #1 SMP Fri Feb 15 12:39:36 EST 2008 i686 BOOST_LIB_VERSION=1_49
Fri Mar  1 18:11:06 [initandlisten] options: {}
Fri Mar  1 18:11:06 [initandlisten] exception in initAndListen: 10296 
*********************************************************************
 ERROR: dbpath (/data/db/) does not exist.
 Create this directory or give existing directory in --dbpath.
 See http://dochub.mongodb.org/core/startingandstoppingmongo
*********************************************************************
, terminating
Fri Mar  1 18:11:06 dbexit: 
Fri Mar  1 18:11:06 [initandlisten] shutdown: going to close listening sockets...
Fri Mar  1 18:11:06 [initandlisten] shutdown: going to flush diaglog...
Fri Mar  1 18:11:06 [initandlisten] shutdown: going to close sockets...
Fri Mar  1 18:11:06 [initandlisten] shutdown: waiting for fs preallocator...
Fri Mar  1 18:11:06 [initandlisten] shutdown: closing all files...
Fri Mar  1 18:11:06 [initandlisten] closeAllFiles() finished
Fri Mar  1 18:11:06 dbexit: really exiting now 
```

当我输入 mongo 时，我得到了这个：

```
MongoDB shell version: 2.2.3
connecting to: test
Fri Mar  1 18:13:00 Error: couldn't connect to server 127.0.0.1:27017 src/mongo/shell/mongo.js:91
exception: connect failed 
```

当我浏览到 localhost:3000 时，我得到了这个：

```
Moped::Errors::ConnectionFailure in MembersController#lawlab

Could not connect to any secondary or primary nodes for replica set <Moped::Cluster nodes=[<Moped::Node resolved_address="127.0.0.1:27017">]> 
```

我在这里想念什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T16:22:32.583

应该创建 data/db/ 文件夹并让您的用户访问该文件夹。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-27T01:39:21.517

为清楚起见：创建 data/db 文件夹与创建 /data/db 之间存在差异。一个安装在根目录下，一个没有。因此，您应该创建 /data/db/ 文件夹，然后使用 sudo chown -R /data/db/ 授予对该文件夹的访问权限

# c# - 如何填充 BrightIdeasSoftware.TreeListView ？

> ID：15162082
> 
> 赞同：3
> 
> 时间：2013-03-01T16:16:17.653
> 
> 标签：c#, .net, listview, treeview, objectlistview

我刚刚下载了[ObjectListView](http://objectlistview.sourceforge.net/cs/index.html)，并且在填充它时遇到了问题。

我得到了清单`MyObject`：

```
public class MyObject
{
  public int Id { get; set; }
  public int ParentId { get; set; }
  public string Name { get; set; }

  public int Data { get; set; }

  public MyObject(int id, int parentId, string name, int data)
  {
     Id = id;
     ParentId = parentId;
     Name = name;
     Data = data;
  } 
}

List<MyObject> list = List<MyObject>(); 
```

我需要`TreeListView`用`MyObject`元素填充一个（[使用 TreeListView](http://objectlistview.sourceforge.net/cs/recipes.html#how-do-i-use-a-treelistview)）。我还需要一列填充`.Data`属性。我什至无法将其填充为`list`（同一级别的所有项目）并且没有任何列，我已经尝试过：

```
this.myTreeListView.SetObjects(list); 
```

还有这个：

```
this.myTreeListView.Roots = list; 
```

但是树仍然是空的，什么都没有填充，我做错了什么？请帮忙。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-04T08:06:41.393

[您可以在此处](http://objectlistview.sourceforge.net/cs/recipes.html#recipe-treelistview)找到有关 TreeListView 的一些有用的“入门”信息。确保您理解并使用该概念。

但是，没有提到您还必须添加**至少一列**（您可以在设计器中执行此操作）。所以这可能是你的问题。TreeListView 教程假定您已经知道如何使用 ObjectListView。

我建议您也阅读一般[入门](http://objectlistview.sourceforge.net/cs/gettingStarted.html)指南，尤其是“心理换档”部分。

> 使用 ObjectListView 的关键部分是配置它。通过在 ObjectListView 本身或列表中使用的列上设置属性，可以在 IDE 中完成大部分配置。一些配置不能通过属性完成：这些更复杂的配置是通过安装委托来完成的（稍后会详细介绍）。**配置好列和控件**后，将其付诸实施很简单。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-01-10T07:06:25.183

这样我就做到了。在这里，我给出了我的完整代码。看看，问我是否有任何困惑。谢谢

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Data.SqlClient;
using System.Drawing;
using System.Text;
using System.Windows.Forms;

namespace WindowsApplication1
{
    public partial class Form3 : Form
    {
        private List<Node> data;

        public Form3()
        {
            InitializeComponent();
        }

        private void button1_Click(object sender, EventArgs e)
        {
            InitializeData();
            FillTree();
        }

        private void InitializeData()
        {
             string connString = "Data Source=xxx.xx.xx.xx\\test;Initial Catalog=Test;User id=sa;Password=test;";
            string sql = "USP_RefundRequested";

            SqlConnection conn = new SqlConnection(connString);
            data = new List<Node>();

            try
            {
                SqlDataAdapter da = new SqlDataAdapter();
                da.SelectCommand = new SqlCommand(sql, conn);
                da.SelectCommand.CommandType = CommandType.StoredProcedure;

                DataSet ds = new DataSet();
                da.Fill(ds);

                DataTable dt = ds.Tables[0];
                if (ds != null)
                {
                    if (ds.Tables.Count > 0)
                    {
                        ds.Relations.Add("ParentChild",ds.Tables[0].Columns["JID"],
                        ds.Tables[1].Columns["CID"]);

                        DataRelation orderRelation = ds.Relations["ParentChild"];
                        foreach (DataRow order in ds.Tables[0].Rows)
                        {
                            //Console.WriteLine("Subtotals for Order {0}:", order["OrderNumber"]);
                            Node parent1 = new Node( order["JID"].ToString(), "", "","","");

                            foreach (DataRow oChild in order.GetChildRows(orderRelation))
                            {
                                //Console.WriteLine("Order Line {0}: {1}", orderDetail["OrderLineNumber"], string.Format("{0:C}", orderDetail["Price"]));
                                parent1.Children.Add(new Node("", oChild["EntryDate"].ToString(),
                                    oChild["RefundDate"].ToString(),
                                    oChild["ActionBy"].ToString(),
                                    oChild["Comments"].ToString()
                                    ));
                            }
                            data.Add(parent1);

                        }
                    }
                }

            }
            catch (Exception ex)
            {
                Console.WriteLine("Error: " + ex);
            }
            finally
            {
                conn.Close();
            }
        }

        private void FillTree()
        {

            this.treeListView1.CanExpandGetter = delegate(object x) { return ((Node)x).Children.Count > 0; };
            this.treeListView1.ChildrenGetter = delegate(object x) { return ((Node)x).Children; };

            // create the tree columns and set the delegates to print the desired object proerty
            BrightIdeasSoftware.OLVColumn JIDCol = new BrightIdeasSoftware.OLVColumn("Job ID", "JID");
            JIDCol.AspectGetter = delegate(object x) { return ((Node)x).JID; };

            BrightIdeasSoftware.OLVColumn EntryDatecol = new BrightIdeasSoftware.OLVColumn("Entry Date", "EntryDate");
            EntryDatecol.AspectGetter = delegate(object x) { return ((Node)x).EntryDate; };

            BrightIdeasSoftware.OLVColumn RefundDatecol = new BrightIdeasSoftware.OLVColumn("Refund Date", "RefundDate");
            RefundDatecol.AspectGetter = delegate(object x) { return ((Node)x).RefundDate; };

            BrightIdeasSoftware.OLVColumn ActionBycol2 = new BrightIdeasSoftware.OLVColumn("Action By", "ActionBy");
            ActionBycol2.AspectGetter = delegate(object x) { return ((Node)x).ActionBy; };

            BrightIdeasSoftware.OLVColumn Commentscol3 = new BrightIdeasSoftware.OLVColumn("Comments", "Comments");
            Commentscol3.AspectGetter = delegate(object x) { return ((Node)x).Comments; };

            // add the columns to the tree
            this.treeListView1.Columns.Add(JIDCol);
            this.treeListView1.Columns.Add(EntryDatecol);
            this.treeListView1.Columns.Add(RefundDatecol);
            this.treeListView1.Columns.Add(ActionBycol2);
            this.treeListView1.Columns.Add(Commentscol3);
            // set the tree roots
            this.treeListView1.Roots = data;

            treeListView1.Columns[1].Width = 142;
            treeListView1.Columns[2].Width = 142;
            treeListView1.Columns[3].Width = 179;
            treeListView1.Columns[4].Width = 667;
            treeListView1.Columns[treeListView1.Columns.Count - 1].Width = -2;

            treeListView1.ExpandAll();
        }

    }

    public class Node
    {
        public string _jid = "";
        public string JID
        {
            get { return _jid; }
            set { _jid = value; }
        }

        //public int _cid = 0;
        //public int CID
        //{
        //    get { return _cid; }
        //    set { _cid = value; }
        //}

        public string _entrydate;
        public string EntryDate
        {
            get { return _entrydate; }
            set { _entrydate = value; }
        }

        public string _refunddate;
        public string RefundDate
        {
            get { return _refunddate; }
            set { _refunddate = value; }
        }

        public string _actionby = "";
        public string ActionBy
        {
            get { return _actionby; }
            set { _actionby = value; }
        }

        public string _comments = "";
        public string Comments
        {
            get { return _comments; }
            set { _comments = value; }
        }

        public List<Node> _Children = null;
        public List<Node> Children
        {
            get { return _Children; }
            set { _Children = value; }
        }

        public Node(string JID, string EntryDate, string RefundDate, string ActionBy, string Comments)
        {
            this.JID = JID;
            //this.CID = CID;
            this.EntryDate = EntryDate;
            this.RefundDate = RefundDate;
            this.ActionBy = ActionBy;
            this.Comments = Comments;
            this.Children = new List<Node>();
        }
    }
}

ALTER PROC  USP_RefundRequested  
AS  

BEGIN  
;WITH  Hierarchy AS  
(  
    SELECT DISTINCT  JID  
            ,CAST(NULL AS DATETIME) EntryDate  
            ,CAST(NULL AS DATETIME) RefundDate  
            ,CAST(NULL AS VARCHAR(MAX)) Comments  
            ,CAST(NULL AS BIT) Refund  
            ,CAST(NULL AS VARCHAR(30)) ActionBy  
            ,nLevel = 1  
   ,0 AS CID  
    FROM refundrequested  
    UNION ALL  
    SELECT   CAST(NULL AS INT) JID  
            ,E.EntryDate  
            ,E.RefundDate  
            ,E.Comments  
            ,E.Refund  
            ,E.ActionBy  
            ,H.nLevel+1  
   ,H.JID  AS CID  

    FROM refundrequested   E  
    JOIN Hierarchy  H ON E.JID = H.JID  

)  

--SELECT *  
--FROM Hierarchy  WHERE CID=0
--ORDER BY COALESCE(JID, CID) DESC, nLevel  

SELECT * into #tmpHierarchy FROM Hierarchy

SELECT JID,EntryDate,RefundDate,ActionBy,Comments,CID  
FROM tmpHierarchy  WHERE CID=0
ORDER BY COALESCE(JID, CID) DESC, nLevel  

SELECT JID,EntryDate,RefundDate,ActionBy,Comments,CID  
FROM tmpHierarchy  WHERE CID>0
ORDER BY COALESCE(JID, CID) DESC, nLevel  

drop table #tmpHierarchy
END  
go 
```

# objective-c - Objective-C 消息被发送到超类

> ID：15162083
> 
> 赞同：0
> 
> 时间：2013-03-01T16:16:21.747
> 
> 标签：objective-c

我从 UIView 派生了一个 SignalView 类，但是当我向 SignalView 类型的对象发送消息时，它被发送到 UIView 并且出现错误：

```
-[UIView Initialise]: unrecognized selector sent to instance 0x1b3900 
```

我的对象在调试监视窗口中也显示为 UIView 对象：

```
m_signalview    UIView *    0x001b3900 
```

相关代码是：

```
// signalview.h

#import <UIKit/UIKit.h>

@interface SignalView : UIView
{   

}

-(void)Initialise;

@end

//signalview.m

#import "SignalView.h"

@interface SignalView ()

@end

@implementation SignalView

-(void)Initialise
{

}

// viewcontroller.h
#import <UIKit/UIKit.h>
#import "SignalView.h"

@interface ViewController : UIViewController

@property (weak, nonatomic) IBOutlet SignalView *m_signalview;

@end

// viewcontroller.m
#import "ViewController.h"

@interface ViewController ()

@end

@implementation ViewController

@synthesize m_signalview;

- (void)viewDidLoad
{
    [super viewDidLoad];

    NSLog(@"%@", m_signalview);
    [m_signalview Initialise];
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T16:22:41.660

H2C03 是对的。它可能不是 SignalView。我会在界面构建器检查器的视图的 nib 文件中检查您的插座，确保它仍然没有显示 UIView。如果它确实将其更改为 SignalView：

![前](../Images/9185fbd9d00ebbf28a8f1f9af69bfd58.png)

应该是这样的：

![后](../Images/675fd7e61bfcbc0c540af7a5296e3ecd.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T16:19:17.590

那么它只是一个实例`UIView`而不是`SignalView`. `UIView`当您需要一个`SignalView`实例时，您正在分配和初始化。当你的代码中有这样的东西时：

```
m_signalView = [[UIView alloc] init]; 
```

将其更改为

```
m_signalView = [[SignalView alloc] init]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-01T16:22:09.763

我看到那`m_signalview`是一个`IBOutlet`.
您是否将其连接到`UIView`您在 Interface Builder 中添加的内容？
如果是这样，您可能需要在其属性中设置正确的类，以便加载器可以创建正确类的对象。

# php - symfony 2.0.22 请求头空

> ID：15162084
> 
> 赞同：0
> 
> 时间：2013-03-01T16:16:30.430
> 
> 标签：php, symfony, symfony-2.0

我正在使用 symfony 2.0.12 但我遇到了这个问题：页面没有更新，总是返回 null。

```
public function cambiarlocaleAction($idioma)
{
    $this->get('session')->setLocale($idioma);
    $request = $this->get('request');
    return new Response ($request->headers->get('referer'));
    return $this->redirect($request->headers->get('referer'));
} 
```

`$request->headers->get('referer')`总是为空，为什么？在 symfony 2.0.14 中工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T22:01:08.430

不保证标头`referer`随请求一起发送。通常，如果用户直接输入 URL，则它不存在（因此，如果您尝试检索它，则结果为`null`）。即使用户正在关注链接，浏览器也没有义务发送该标题。

# aggregate-functions - 如何汇总/汇总百分位度量

> ID：15162090
> 
> 赞同：2
> 
> 时间：2013-03-01T16:16:51.213
> 
> 标签：aggregate-functions, mdx, aggregation, mondrian

有一个包含聚合数据的数据集 - 聚合到各个维度，一直到每小时级别。主要衡量标准是速度，即文件大小除以持续时间。

要求是查看百分位数、中位数和平均值/平均值摘要。

平均值很简单，因为我们只需在 MDX 中创建一个计算度量，然后它就可以在所有聚合级别上工作，即每天/每月等。

但是百分位数和中位数很难。有没有什么方法可以计算这些函数并正确汇总？当我们读取原始数据时，我们可以将百分位速度作为一列添加到 ETL 中，但是我们仍然需要找到一种方法来进一步汇总它？

汇总这些类型的措施的正确方法是什么？询问百分位数的情况并不少见，所以当我环顾四周时，我很惊讶没有看到太多这方面的信息。

也许唯一的方法是让各种聚合表处于正确的级别，进行正确的计算，然后让 mondrian 将它们用作聚合表？或更糟糕的情况是有多个立方体（！）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T15:57:27.680

好的，所以事实证明你不能汇总百分位数（因此中位数只是第 50 个百分位数）我知道其他人遇到了这个问题，请在此处查看来自 Kasper 的这条推文：[https ://twitter.com/kaspersor/status/308189242788560896](https://twitter.com/kaspersor/status/308189242788560896)

所以我们的解决方案是使用几个不同的聚合表来存储相关统计数据，并在主（已经聚合的）事实表上存储预先计算的百分位数和中位数统计数据。

# javascript - 在其他键仍被按下时触发 keyup

> ID：15162099
> 
> 赞同：2
> 
> 时间：2013-03-01T16:17:07.600
> 
> 标签：javascript, jquery

我想检查输入值的长度，并在达到 3 时自动跳到下一个。我有跳过的代码，但是 keyup 事件的排队方式让我头疼..

输入字段的示例处理程序：

```
 $('input').on('keyup', function (e) {

    var $this = $(this);
    var code = e.keyCode || e.which;

    alert(String.fromCharCode(code)+' '+$this.val());

    // Handling of $this.val()==3

}); 
```

[http://jsfiddle.net/tPyTq/1/](http://jsfiddle.net/tPyTq/1/)

在松开按键之前键入三个字母。所有事件都已经知道输入的最终值，因此我对长度的检查会过早触发，并且会针对所有三个字母。

我怎样才能让 keyup-event 触发，而其他键仍然被按下？请询问，如果需要澄清。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T16:21:48.610

我明白你的意思。这可能需要一些黑客攻击。

试试这个，虽然它可能不起作用：

1.  将事件侦听器更改为开启`change`

    ```
    $('input').on('change', function(e) {
       //use console rather than alert
       console.log(String.fromCharCode(code)+' '+$this.val());
    }); 
    ```

2.  然后添加一个单独的监听器`keyup`，它会触发一个更改事件

    ```
    $('input').on('keyup', function (e) {
        $(this).trigger('change');
    }); 
    ```

# mysql - Mysql 函数总是返回 Null

> ID：15162102
> 
> 赞同：1
> 
> 时间：2013-03-01T16:17:18.370
> 
> 标签：mysql, function

我在mysql中有一个函数，如下所示：

```
DELIMITER $$ 

CREATE DEFINER=root@localhost FUNCTION fnGetDropDownValue(
    itemValue varchar(300), 
    DropDownId int, 
    CId int
) RETURNS int(11)
BEGIN
    DECLARE listId int;
    SELECT ListID into listId FROM DropDownListValues WHERE LOWER(ListValue) = LOWER(itemValue) AND DropDownListID = DropDownId AND (ClientId = 0 OR ClientId = CId);
    RETURN listId;
END$$ 
```

但是当我使用它时它总是返回 Null 值
`SELECT fnGetDropDownValue('General', 24, 18);` 我不知道我做错了什么:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2019-05-06T13:34:09.250

在 mysql 列有区分大小写的问题后，我曾经有变量名以 _ 开头，以避免它与列名混淆。现在存储过程如下所示：

```
DELIMITER $$ 

CREATE DEFINER=root@localhost FUNCTION fnGetDropDownValue(
    itemValue varchar(300), 
    DropDownId int, 
    CId int
) RETURNS int(11)
BEGIN
    DECLARE _listId int;
    SELECT ListID into _listId FROM DropDownListValues WHERE LOWER(ListValue) = LOWER(itemValue) 
        AND DropDownListID = DropDownId AND (ClientId = 0 OR ClientId = CId);
    RETURN _listId;
END$$ 
```

这样它就可以在任何平台上运行，并且可能对其他人有用。

# security - 如何保护 riak 桶？

> ID：15162104
> 
> 赞同：2
> 
> 时间：2013-03-01T16:17:21.007
> 
> 标签：security, riak

我想用 5 个节点实现 riak 集群。但我想确保一个团队永远不会达到其他团队的桶。有没有办法实现一个安全层（反向代理等），它允许 protobuf 和 http 客户端请求以及基本规则？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-15T19:23:56.907

有点像警察，但[等待 Riak 2.0](https://github.com/basho/riak_core/pull/386)。它应该具有您正在寻找的内置安全设置。

如果您现在需要这个，您可能需要在 Riak 之上编写一个基于存储桶/用户进行授权的应用程序层。您*可能*可以像您想的那样使用反向代理来处理 http 客户端请求，但 pb 会更难。

# javascript - JavaScript 将数组推入数组

> ID：15162115
> 
> 赞同：6
> 
> 时间：2013-03-01T16:17:59.127
> 
> 标签：javascript, arrays, multidimensional-array, google-geocoder

我目前正在使用 Google 地图的地理编码，需要创建一个包含数组作为元素的数组。

基本上我需要创建这个：

```
 var locations = [
      ['Bondi Beach', -33.890542, 151.274856, 4],
      ['Coogee Beach', -33.923036, 151.259052, 5],
      ['Cronulla Beach', -34.028249, 151.157507, 3],
      ['Manly Beach', -33.80010128657071, 151.28747820854187, 2],
      ['Maroubra Beach', -33.950198, 151.259302, 1]
    ]; 
```

但是动态的！我需要这个数组稍后在地图上放置图钉。

我在做什么：

```
 var locations = []; // The initial array
        for (var i = 0; i < addresses.length; ++i){

            var address=addresses[i]; // the address e.g. 15 Main St, Hyannis, MA
            geocoder.geocode({ 'address': address}, function(results){
                var obj = {
                    0: address,
                    1: results[0].geometry.location.hb,
                    2: results[0].geometry.location.ib,
                    3: i
                };
                console.log(obj);
                locations.push(new Array());
                locations[i].push(obj);

            });
        };

        console.log(locations.length); 
```

**问题，问题：**

我没有看到任何错误，但最后位置 [] 数组为空。

如果需要，这是一个控制台屏幕：

[![](../Images/334e6d7799667f73ff27e282e8a3cde3.png)](http://screencast.com/t/KRS87SVZH1M)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T16:19:54.017

这应该是您所需要的：

```
geocoder.geocode({ 'address': address}, function(results){
            locations.push([
              address,
              results[0].geometry.location.hb,
              results[0].geometry.location.ib,
              i //this is actually going to always be 
                //addresses.length because the callback won't fire
                //until well after the loop has completed. 
                //Is this really a necessary field to have 
                //in your array? if so, you'll need to refactor a bit
            ]);
        }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T16:41:22.603

我没有时间测试代码，但它应该这样工作：

```
 function requestLocations( addresses, callback ) {
        var remainingLocations = addresses.length;
        var locations = [];

        for (var i = 0; i < addresses.length; ++i){

            var address=addresses[i]; // the address e.g. 15 Main St, Hyannis, MA

            locations[i] = [];

            geocoder.geocode({ 'address': address}, (
                function(idx) {
                    return function(result) {
                        locations[idx] = [  addresses[idx], 
                                            results[0].geometry.location.hb,
                                            results[0].geometry.location.ib,
                                            idx
                                        ];

                        //decrement the number of remaining addresses
                        --remainingLocations;

                        //if there are no more remaining addresses and a callback is provided then call this calback with the locations
                        if( remainingLocations === 0 && callback ) {
                            callback(locations);
                        }               
                    }; // returns the real callback function for your geocoding

                })(i) //direct invocation of function with paramter i for scoping
            );

        }
    }

    requestLocations(addresses, function( locations ) {
        console.dir(locations);
        console.log(locations.length);
    }); 
```

您的代码的问题如下。首先执行这部分代码：

```
 var locations = []; // The initial array
        for (var i = 0; i < addresses.length; ++i) {

            var address = addresses[i]; // the address e.g. 15 Main St, Hyannis, MA
            geocoder.geocode({
                'address': address
            }, function(results) {
                //this part is called later when that data is ready (it is an asynchronous callback)

            });
        };

        //because of the async request this is still 0
        console.log(locations.length); 
```

之后，一旦浏览器从服务器接收到数据，就会调用回调本身：

```
 function(results) {
        var obj = {
            0: address,
            1: results[0].geometry.location.hb,
            2: results[0].geometry.location.ib,
            3: i
        };
        console.log(obj);
        locations.push(new Array());
        locations[i].push(obj);

      } 
```

# android - Android 内存不足异常和暂停活动

> ID：15162120
> 
> 赞同：2
> 
> 时间：2013-03-01T16:18:16.003
> 
> 标签：android, exception, android-activity, out-of-memory, heap-memory

我目前正在开发一个具有多项活动的 android 应用程序。大多数情况下，该应用程序运行良好，但有时`Out of Memory Exception`会发生。（通常在尝试为下一个活动加载大背景图像时）

我找不到任何明显的内存泄漏，所以我在发生异常时创建了一个堆转储（如此[处](https://stackoverflow.com/questions/6131769/is-there-a-way-to-have-an-android-process-produce-a-heap-dump-on-an-outofmemorye)所述）并尝试使用 MAT 对其进行分析。我以前没有做过这样的事情，所以我不确定我到底应该寻找什么。我开始点击较大的字节对象，第二个似乎是属于的位图`ImageButton`：

![在此处输入图像描述](../Images/77ce8bc72ddc080204d5c55551a38dd1.png)

GC 根路径向我展示了一个 com.android.internal.policy.impl.PhoneWindow 实例：

![在此处输入图像描述](../Images/b416545c65bfdbecb741e00cdf0fed5f.png)

问题是，`ImageButton`我的整个应用程序中唯一的一个是在我的启动活动中，并且在该启动活动和崩溃活动之间至少还有 2 个活动。

那么为什么这个图像仍然在堆中？使用`ImageButton`android:src 属性在布局 xml 文件中简单地定义，没有通过代码完成。堆中还有许多来自早期活动的其他较小对象。

我还编写了一个小 HelloWorld 应用程序，并查看了它的堆转储，看来，android 将以前活动的对象保存在堆中。如果是这种情况，那么`Out of Memory Exception`有一天必须抛出一个，所以我想我的分析一定有问题：/

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T17:15:12.213

您可能想查看[开发人员文档](http://developer.android.com/training/displaying-bitmaps/load-bitmap.html#load-bitmap)中的位图管理。

特别是：只要存在对位图的引用，位图就会保存在内存中。因此，如果您绝对必须为您的按钮使用大位图（如您所描述的），您可能会通过手动加载它并在您的 Activity 从视线中消失时立即使用[回收来做得更好。](http://developer.android.com/reference/android/graphics/Bitmap.html#recycle%28%29)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T22:54:36.120

好的，我刚刚发现[并](https://stackoverflow.com/questions/7536988/android-app-out-of-memory-issues-tried-everything-and-still-at-a-loss)意识到，只要停止的活动（及其对象）在后堆栈上，它们就不会被破坏。即使活跃的人需要更多的内存也不会。有了这些知识，就很明显为什么像 ImageButton 这样的对象仍然在堆中。

我仍然需要找出释放这些资源的最佳方式，但我想这在很大程度上取决于应用程序本身，通常很难回答。

# php - PHP - 如何在重定向后从最终 URL 获取查询字符串？

> ID：15162121
> 
> 赞同：0
> 
> 时间：2013-03-01T16:18:16.747
> 
> 标签：php, redirect, curl, https

我试图在重定向后在最终 URL 中获取查询字符串。

```
https://example.com/oauth/auth?user=foo&password=bar 
```

在我的浏览器中重定向到：

```
https://example.com/?secret=8273761838346 
```

我需要**secret={some number}**部分。

我在 PHP 中使用[file_get_contents尝试过（但失败了）](https://stackoverflow.com/questions/4323985/how-to-get-the-real-url-after-file-get-contents-if-redirection-happens)、 [cURL](https://stackoverflow.com/questions/2812621/how-get-the-url-of-the-returned-page?rq=1)甚至是 socket 方法尝试过（但失败了）。cURL 返回带有原始 URL 的 CURLINFO，而不是最终 URL。file_get_contents $http_response_header 不包含最终 URL。

我已经尝试了可以​​在 cURL 调用上设置的选项的变体，遵循 SO 和 Google 搜索上提供的大量示例，但这些都不起作用。返回的 URL 始终是原始 URL，而不是最终 URL。

有没有人遇到过这种情况，您是如何解决的？这可能是一个愚蠢的问题，但 https 可能是问题吗？

@str，这是使用 cURL**的许多**版本之一，它在重定向后没有产生最终 URL：

```
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, $url);
curl_setopt($ch, CURLOPT_HEADER, TRUE);
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, FALSE);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, TRUE);
$response = curl_exec($ch);
$header = curl_getinfo($ch);
var_dump($response);
var_dump($header); 
```

我还尝试切换 HEADER、FOLLOWLOCATION、RETURNTRANSFER、AUTOREFERER 和其他选项而没有进展。

# git - 使用 git 在生产服务器上使用预先存在的未跟踪代码进行部署

> ID：15162123
> 
> 赞同：1
> 
> 时间：2013-03-01T16:18:23.673
> 
> 标签：git, deployment

所以我有一个代码过时的生产服务器，我有一个带有最新代码的远程 git 存储库。

我想要做的是将所有最新代码放到我的生产服务器上，而不会删除仅存在于服务器上的上传等内容。

最好的方法是什么？我在我的生产服务器上进行了 git 初始化，添加了远程并完成了 git fetch --all。我只需要知道下一步该做什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T16:32:20.510

我想我已经找到了解决方案。如果我在我的生产服务器上初始化一个存储库，然后从我的远程存储库中获取，我可以调用`git reset --hard origin/branch`它，它会检查分支，留下所有新的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T16:25:03.837

进行完整备份后，您应该可以安全地简单地`cp -r git-DIR/* production-DIR/`将最新内容与`.git`. 然后，您可能希望将所有包含上传数据的 DIR 添加到您的[.gitignore](https://www.kernel.org/pub/software/scm/git/docs/gitignore.html)中。

# c# - 如何在画布中找到某个子图像？

> ID：15162125
> 
> 赞同：0
> 
> 时间：2013-03-01T16:18:32.273
> 
> 标签：c#, wpf, canvas

我有一个有 400 个孩子的 Canvas。每个孩子都是一个矩形，并用图像填充。如果我想找到某个图像，我会怎么做？

```
//My code to fill a rectangle
Image img = new Image();
img.Source = new BitmapImage(new Uri(@"hero.png", UriKind.Relative));
img.Margin = rec.Margin;
ImageBrush imgbrush = new ImageBrush();
imgbrush.ImageSource = img.Source;
rec.Fill = imgbrush;

//My attempt at finding that certain rectangle
 foreach (Rectangle rec in canvas1.Children)
        {
            if (rec.Fill = ImageBrush.ImageSourceProperty) // I tried to compare the rectangle with the image's source
            {

            }                
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T16:29:48.810

您可以使用每个特定的名称，`Image`然后使用[FindName](http://msdn.microsoft.com/en-us/library/system.windows.frameworkelement.findname.aspx)方法

```
object wantedNode = stackPanel.FindName("dog"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T01:58:36.710

为什么不将对象存储在以后可以迭代的数组（键/对）中？

# c - 从C中的堆栈中删除字符串

> ID：15162127
> 
> 赞同：2
> 
> 时间：2013-03-01T16:18:40.090
> 
> 标签：c, string, opengl, stack, glsl

为了简洁起见，我想将我的 GLSL 着色器存储在我的可执行文件中，如果函数内部定义的字符串会将它们加载到着色器对象中，那么当函数返回时，字符串是否会从堆栈中删除？我应该以其他方式代替吗？（我记得读过一些关于资源文件的东西，但我以前从未使用过那些）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T16:50:38.810

> 为了整洁，我想将我的 GLSL 着色器存储在我的可执行文件中，

这没什么用，但我能理解动机。

> 当函数返回时，将在函数内部定义将它们加载到着色器对象中的字符串会从堆栈中删除字符串吗？

这取决于你如何声明它。如果你写这样的东西：

```
void foo(…)
{
    char const string[] = "....";
} 
```

字符串内存在堆栈上分配，并使用初始化字符串文字的内容进行初始化。字符串文字本身是指向可执行文件常量数据段中特定位置的指针。数据段根据需要映射到进程地址（与可执行文件的其余部分一样^1.

当函数返回时，内存被“释放”；从技术上讲，它只是回滚的堆栈指针。

如果你把它写成

```
void bar(...)
{
    char const * string = "....";
} 
```

该变量`string`使用指向常量数据段本身部分的指针进行初始化，字符串文字所在的部分。没有分配内存，并且只有在实际访问文字所在的页面时才从磁盘读取内容。

从技术角度来看，访问字符串文字增加的内存和 I/O 开销与为数据访问映射文件所增加的内存和 I/O 开销完全相同。事实上，可执行文件本身是 mmap-ed，所以这已经是对 mmap-ed 文件的访问。

* * *

[1] 在阻塞系统调用处等待很长时间的可执行文件最终将被换出系统内存，如果当系统调用返回时，它们会被换回。事实上，在现代操作系统中，所有系统内存都被视为块 I/O 缓存，进程内存分配被视为块设备的内容（这使得实现交换空间变得微不足道）；如果没有后备块设备，作为进程内存的“缓存”将变得不可交换。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T16:23:31.230

> 当函数返回时，在函数内部定义将它们加载到着色器对象中的字符串是否会从堆栈中删除字符串？

是的。一旦函数将控制权返回给调用者，堆栈总是“弹出”。

> 我应该以其他方式代替吗？

最好从文件中加载它。这样，您只是暂时占用资源（即将文件映射到虚拟内存，将其传输到设备，然后取消映射文件）。

如果这不是一个选项，那么最好在静态全局内存中定义数据，以便最终将其放入程序的[“数据”段](http://en.wikipedia.org/wiki/Data_segment#Data)中。这样它就不会同时占用静态内存和堆栈（因为否则它必须从某个地方加载到堆栈的内存中，无论如何这可能是一个“数据”段）。例如：

```
void load_data()
{
    static const unsigned char mydata[] = { 0x01, 0x02, ... };
    /* Do something with "mydata" */
} 
```

# iis - 如何调试 IIS 7 模块？

> ID：15162129
> 
> 赞同：3
> 
> 时间：2013-03-01T16:19:00.493
> 
> 标签：iis, logging, iis-modules

我们有一个 IIS 7 模块以一种相当奇怪的方式失败（至少对我们而言）——该模块的 32 位版本显然有一些奇怪的行为，它会查找 DLL 的 64 位版本并使用它，如果它在 64 位机器上，而不是 32 位版本，因为我们故意安装了 32 位版本。

在我们弄清楚这一点之前（阅读：终于猜对了），模块表现出的行为是“根本不工作” - 没有错误消息，模块没有像往常一样写入日志文件（因为它根本不工作)，事件日志中没有任何内容，IIS 日志中没有任何内容，除了确认我们已向显示非工作行为的页面发出 POST 请求。

我的问题是：为了防止像我们在这方面使用大量时间，**是否有任何日志文件或文件可以看到“某某模块失败”或“XYZ 模块引发了 BadImageFormatException”甚至给了我们一点关于发生了什么的线索？**

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T11:07:35.233

您可以使用 Global.asax Application_Error 通过 Server.Transfer 重定向到自定义技术错误页面，该页面将使用 GetLastError() 显示 HttpServerUtility 服务器错误。

# vb.net - 使用 VB.Net 将数据添加到 Access

> ID：15162132
> 
> 赞同：1
> 
> 时间：2013-03-01T16:19:15.903
> 
> 标签：vb.net, ms-access, ado.net

我是 .NET 新手……我正在尝试重写我用 VB6 编写的程序。问题是我有 41 个值可用于在 Access 中创建新记录。我读过的几乎所有东西都在使用`INSERT INTO`（但 41 个字段构成了一个 LONG SQL 语句）。

**笔记：**

源数据和目标数据存在于 Access 中。

我创建了一个结构调用`TargetXStudentRec`，其中包含我正在填充的所有字段。

Access DB`Student ID`中`Last Name`的字段名称是数据要进入的系统的导入字段名称。

**在 Visual Basic 6 中我用过**

```
TargetXStudentRec.AddNew
TargetXStudentRec("Student ID") = .Student_ID
TargetXStudentRec("Last Name") = .LastName
TargetXStudentRec("First Name") = .FirstName
..........................
TargetXStudentRec.Update 
```

有没有办法在 ADO.net 中做到这一点？
或者什么是最好的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T21:53:26.523

也许这个例子对你有用：[http](http://www.java2s.com/Code/VB/Database-ADO.net/UseOleDbDataAdaptertoinsertarowintoAccessdatabase.htm) ://www.java2s.com/Code/VB/Database-ADO.net/UseOleDbDataAdaptertoinsertarowintoAccessdatabase.htm 您可以定义数据适配器和行以使您的插入更容易。

# php - 用于肿瘤学评估工具的 phpmysql 查询

> ID：15162134
> 
> 赞同：0
> 
> 时间：2013-03-01T16:19:23.040
> 
> 标签：php, mysql, phpmyadmin

我的 mysql 数据库中有以下表格。我正在尝试创建一个应用程序，它可以虚拟地评估某人是否可能患上食道癌。这个应用程序的目的是帮助人们早期发现癌症筛查，因为我在肯尼亚所有医院接受过的患者中有 99% 都处于癌症晚期，而我们无能为力仅仅因为他们缺乏关于癌症的信息。我在这个问题中包含的症状是为了帮助我理解关系数据库，以便我可以将它应用到实际应用程序中。我想要包含的癌症的风险因素和症状已经由我的同事研究过医务人员

```
#tblsymptoms - holds all symptoms
######################################
symptomID  | symptom    
-------------------------------------
1            Mass in the throat        
2            Difficulty in swallowing   
3            Lost weight lately
4            Heartburn
5            Hoarse-sounding cough
6            Vomit blood

#tblresponse - holds all responses
######################################
responseID  | response   
-----------------------------------------------------
1            Your symptoms suggest you have a problem       
2            You may be having Oesophageal carcinoma  
3            You dont have a throat carcinoma

#tblrelation - holds relation between response and symptoms
######################################
relationID  | responseID | symptomID
-----------------------------
       1         1          3
       2         1          4
       3         1          5
       4         2          1
       5         2          2
       6         2          3
       7         2          2
       8         2          5
       9         2          6
       10        3          3
       11        3          4 
```

我想使用 html 表单中的复选框来查询数据库，这是表单的代码：

```
<form method="post" action="process.php">
<INPUT TYPE=CHECKBOX NAME="option[]" VALUE="Difficulty in swallowing" id="">Difficulty in swallowing<br>
<INPUT TYPE=CHECKBOX NAME="option[]" VALUE="Difficulty in swallowing" id="">Difficulty in swallowing<br>
<INPUT TYPE=CHECKBOX NAME="option[]" VALUE="Lost weight lately" id="">Lost weight lately<br>
<INPUT TYPE=CHECKBOX NAME="option[]" VALUE="Heartburn" id="">Heartburn<br>
<INPUT TYPE=CHECKBOX NAME="option[]" VALUE="Hoarse-sounding cough" id="">Hoarse-sounding cough<br>
<INPUT TYPE=CHECKBOX NAME="option[]" VALUE="Vomit blood" id="">Vomit blood<br>
<input type="submit" name="formSubmit" value="Diagnose me" />
</form> 
```

现在，以防万一有人选择：`Lost weight lately and Heartburn`脚本应该从 tblResponse>>>responseID=1 获取数据并显示给用户：

```
Your symptoms suggest you have a problem. 
```

有人对我应该添加到带有复选框以查询数据库的 html 表单的代码有想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T16:39:15.200

这是一个非常广泛的问题。答案的基本要素很简单。您用于查询数据库的代码进入`process.php`. 您要做的是连接到数据库，`$_POST`从表单中获取变量，然后使用 SQL 查询查询数据库。但是，根据您的问题，有许多问题似乎不正常。对于初学者，您需要让每个复选框 INPUTS 中的 name 属性等于一个唯一值。这就是您从`$_POST`php 脚本中获取它们的方式。其次，您根本没有提供任何代码`process.php`，所以很难知道你尝试了什么。第三，您的表格似乎并不完全有意义。不清楚关系表应该如何工作，更不用说，“响应 ID”列中有一个“4”，但响应表中没有 ID 为 4 的实际响应。如果您尝试缩小查询范围，在这里提问可能会获得更好的结果。

# magento - 如何编辑此导航栏？MAGENTO

> ID：15162139
> 
> 赞同：0
> 
> 时间：2013-03-01T16:19:28.930
> 
> 标签：magento, menu, navigation

所以我是 magento 和 web 开发的新手，我正在整理我自己的网站，这里是[theshirt.org](http://www.theshirt.org)我正在尝试改变这个垂直导航菜单的外观，我按照这个 wiki 上的说明制作

[创建垂直导航](http://www.magentocommerce.com/wiki/4_-_themes_and_template_customization/navigation/how_to_create_a_vertical_left_hand_menu)

我正在尝试更改此导航上的一些内容，但我不知道从哪里开始。

1.  由于我更改了主边栏和左侧边栏的大小，导航菜单太大，所以我需要将导航菜单的大小更改为 150px

2.  导航菜单仅出现在主页上。我需要它出现在每一页

3.  当我将鼠标悬停在导航类别上时，我希望菜单项改变颜色。

现在我该怎么做呢？

再次感谢你们的帮助。如果没有这个网站的帮助，我将无法做任何我的商店！

乔恩

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T16:54:11.180

1°）查看[http://theshirt.org/skin/frontend/default/footprint/css/widgets.css](http://theshirt.org/skin/frontend/default/footprint/css/widgets.css)并在第 155 行周围编辑 width:200px 到 width:130px

```
#nav_vert li {
background-color: #F6F6F6;
border-bottom: thin solid #CCCCCC;
list-style: none outside none;
position: relative;
text-align: left;
width: 130px;
} 
```

2°）您一定错过了教程的第一步：

```
<reference name="left">
        <block type="catalog/navigation" name="catalog.leftnav" after="currency" template="catalog/navigation/left.phtml"/>
    </reference> 
```

将其移动到该`<default>`部分中，它将在所有页面中显示带有左栏的菜单。

3°) 在这里做一些 CSS 来查看 :hover 伪元素

基本上在与 1° 相同的 css 中）（widget.css）查看第 202 行并将 #nav_vert a:hover 替换为 #nav_vert span:hover 以使您的文本在鼠标悬停时变为灰色。然后你可以玩颜色，或背景颜色或任何你想要的;）

编辑：要将页面转换为带有左栏的 2 列，请编辑您的 xml 布局文件以更改所需`<reference name="head">`页面的模板。

对于 CMS 页面，您可以在创建页面时直接通过菜单进行设置。

# javascript - Javascript变量变得未定义

> ID：15162141
> 
> 赞同：0
> 
> 时间：2013-03-01T16:19:30.933
> 
> 标签：javascript, html

我无法让我的代码正常工作。我使用 XMLHttpRequest 加载和解析 JSON 文件，它工作正常，但是在我的 setup() 函数之后，我无法对我定义的任何变量（例如 spriteDictionary）调用任何其他函数 - 即使在各种设置函数中我可以读取这些变量，一切看起来都不错。

有什么想法吗？在下面的示例中，当我调用 console.log(parsedJSON); 它出现 undefined 这很奇怪，因为我可以在我的设置代码中读取它的内容。谢谢！

```
<!DOCTYPE html>

<html>
<head>
<title>Page Title</title>
</head>
<body id="body">
</body>

<script type="application/x-javascript">
var parsedJSON;   
var ctx;
var canvas;
var atlas;
var sprites = [];
var spriteDictionary = {};

var sprite = function(name, atl, x, y, w, h) {
    this.name = name;
    this.atlas = atl;
    this.x = x;
    this.y = y;
    this.w = w;
    this.h = h;
    this.cx =  -w/2.0;
    this.cy = -h/2.0;

}

function setup() {
    var body = document.getElementById("body");

    canvas = document.createElement("canvas");
    canvas.width = 1200;
    canvas.height =720;
    body.appendChild(canvas);

    var ctx = canvas.getContext('2d');

    ctx.fillStyle="#000000";
    ctx.fillRect(0,0,1200,720);

    var xhr = new XMLHttpRequest();
    xhr.open("GET","game_gfx.json",true);
    xhr.onload = function (){
        parsedJSON = JSON.parse(this.responseText);
        load_assets(parsedJSON);
    }
    xhr.send();
    ctx = canvas.getContext('2d');

}

function load_assets(pJSON) {
    atlas = new Image();
    atlas.onload = function() {
        console.log("atlas loaded");
    }
    atlas.src= pJSON['meta']['image'];
    var frame;
    for (var i in pJSON['frames']){
        frame = pJSON['frames'][i];
        spriteDictionary[frame['filename']] =  new sprite(frame['filename'],atlas,frame['frame']['x'],frame['frame']['y'],frame['frame']['w'],frame['frame']['h']);
        i++;
    }
}

setup();

console.log(parsedJSON);

</script>

</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T16:23:18.577

您不能将异步调用视为同步。

您在 Ajax 调用返回之前调用了 console.log 行。

onload 监听器中的一个简单的 console.log 语句会告诉你。

```
xhr.onload = function (){
    console.log("I AM HERE!");
    ... 
```

日志看起来像

```
undefined
"I AM HERE"
"atlas loaded" 
```

# php - Symfony2 FOSUserBundle - 摆脱用户电子邮件字段的简单方法

> ID：15162142
> 
> 赞同：2
> 
> 时间：2013-03-01T16:19:33.317
> 
> 标签：php, symfony, fosuserbundle

当我正在创建一个将用于研究健康领域患者的 Web 应用程序时，我希望我的所有用户都是完全匿名的。我能否以一种简单的方式摆脱 email 和 email_canonical 字段而不重写捆绑包本身的内容，例如通过在我自己的捆绑包中对我的用户类做一些事情？

编辑：我这样做了：

```
/**

*   @ORM\Column(nullable=true)

**/

protected $email;

/**

*   @ORM\Column(nullable=true)

**/

protected $emailCanonical; 
```

在我的用户实体类中。但是当我做 php app/console 学说:schema:update --force 我得到

> [Doctrine\ORM\Mapping\MappingException] 在字段或鉴别器列映射中
> 实体 'Pan100\MoodLogBundle\Enti ty\User' 上的列 'email' 的重复定义。

编辑2：忘了说这是在将FOUserBundle的模型类User扩展为BaseUser的类中完成的......

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-01T18:12:00.080

好的！

我做了：

```
...
/**
* @ORM\Entity
* @ORM\Table(name="fos_user")
* @ORM\AttributeOverrides({
*              @ORM\AttributeOverride(name="email", column=@ORM\Column(nullable=true)),
*              @ORM\AttributeOverride(name="emailCanonical", column=@ORM\Column(nullable=true, unique=false))
*  
* })  
*/

class User extends BaseUser
{

    /**
     * @ORM\Id
     * @ORM\Column(type="integer")
     * @ORM\GeneratedValue(strategy="AUTO")
     */

    protected $id;
...(code emitted) 
```

稍后我会发现是否需要更多 - 我可能必须重写一些 FOSUserBundle 方法来创建用户。至少“php app/console fos:user:create testuser”命令需要一个电子邮件......但它不再必须是唯一的，所以如果我以后受到阻碍，我可以添加字符串“none”或其他东西。 ..

# actionscript-3 - away3d 和八哥调整大小问题

> ID：15162143
> 
> 赞同：0
> 
> 时间：2013-03-01T16:19:39.637
> 
> 标签：actionscript-3, stage3d, away3d, starling-framework, robotlegs

我在尝试在 stage3d 中正确调整 away3d Gold 和 Starling 的大小时遇到​​问题，两者都在一个游戏中工作。

我有 4 个八哥实例和 1 个由 stage3dProxys 处理的 Away3d 实例。

这一切都适用于初始大小。在浏览器中调整游戏大小时会出现问题。

游戏 .swf 最终将由另一个父 .swf 加载，但是当游戏直接加载到它自己的 HTML 模板上时，同样的事情会发生。

我现在拥有的是：

```
stage.addEventListener( Event.RESIZE, onResize, false, 0, true );

    private function onResize(event:Event):void {
            _stage3DProxy.width = stage.stageWidth;
            _stage3DProxy.height = stage.stageHeight;

        } 
```

它适用于八哥实例，但不适用于远 3d 实例。并且它没有显示应该在舞台之外的剪切图像。

我也试过不成功：

```
starling.stage.stageWidth = this.stage.stageWidth;
             starling.stage.stageHeight = this.stage.stageHeight;

             var viewPort:Rectangle = RectangleUtil.fit(
                new Rectangle(0, 0, stage.stageWidth, stage.stageHeight),
                new Rectangle(0, 0, stage.fullScreenWidth, stage.fullScreenHeight),
            ScaleMode.NO_BORDER);

         Starling.current.viewPort = viewPort; 
```

我想要实现的是您在传统 Flash 中将大小设置为“百分比”缩放到：`"NO_BORDER"`并且对齐到：`"Top Center"`具有最小高度和宽度时实现的目标。

如何做到这一点？

谢谢

马泰

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T08:01:34.850

## 离开3D

好吧，我发现重新调整大小的方法是更新视图。您可以居中或重新定位`flash.display.Sprite`添加 Away 场景的容器或视图本身。

这是一个棘手的想法，因为您必须发现视图的`scaleX`&方法`scaleY`是“ **DEAD END** ”，这意味着它们是空的方法，永远不会改变。所以你真的**必须**& 只能改变`width`&`height`属性。

这里是所有**DEAD END**方法的列表，`View3D`就像它们出现在源代码中一样：

```
// dead ends:
    override public function set z(value : Number) : void {}
    override public function set scaleZ(value : Number) : void {}
    override public function set rotation(value : Number) : void {}
    override public function set rotationX(value : Number) : void {}
    override public function set rotationY(value : Number) : void {}
    override public function set rotationZ(value : Number) : void {}
    override public function set transform(value : Transform) : void {}
    override public function set scaleX(value : Number) : void {}
    override public function set scaleY(value : Number) : void {} 
```

## 八哥

经过团队实验后，我们项目中的工作如下：

**目标**：重新调整背景的大小，就像将 Size 设置为`percentage` scale to:`NO_BORDER`和 align to: 时一样`Top Center`。

```
//Necessary variables
public var backgroundContainerStage:Starling;
public var anyOtherContainerStage:Starling;
public var stage3dProxy:Stage3DProxy;
public var scaleRatio:Number;
public var originalHeight:Number = 900;

// ... {HACK} ... {HACK}
// Add your Listeners in the constructor for Event.AddedToStage 
// and set the handler to init... Or any other method you prefer to add the 
// listener on the `Event.RESIZE`. 
//
// Also populate the stage3DProxy how ever you wish. 
// We did it this way: 
//_stage3DProxy = Stage3DManager.getInstance(stage).getFreeStage3DProxy();
//
// ... {HACK} ... {HACK}

public function init(event:Event=null):void{
  stage.addEventListener( Event.RESIZE, onResize, false, 0, true );
}

// The IMPORTANT PART !!!!!!!!
public function onResize():void  {
  scaleRatio = stage.stageHeight/originalHeight;
  backgroundContainerStage.stage.stageWidth =
      anyOtherContainerStage.stage.stageWidth =
          stage3dProxy.width = stage.stageWidth;

  // Need to get the Starling Sprite cause the the Starling instances don't allow to
  // set values for their `x` and `y` properties.
  var background: Sprite = backgroundContainerStage.getChildByName('background') as Sprite;
  var uiContainer: Sprite = anyOtherContainerStage.getChildByName('uiContainer') as Sprite;
  //First, RE-SIZE
  background.scaleX = background.scaleY =
     uiContainer.scaleX = uiContainer.scaleY = scaleRatio;

  //Then, RE-POSITION top-Center
  background.x =
     uiContainer.x = stage.stageWidth - background.width >>1;

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T08:58:01.730

我认为您不能通过简单地在 stage3DProxy 上设置宽度/高度属性来调整 away3d 实例的大小。我通过在 view3D 上设置宽度/高度来实现这一点：

```
 view = new View3D();

    //...later

    private function stageResizeHandler(evt:Event):void
    {
        view.width = stage.stageWidth;
        view.height = stage.stageHeight;
    } 
```

# css - 100% 宽度和高度背景图像不起作用

> ID：15162148
> 
> 赞同：3
> 
> 时间：2013-03-01T16:19:48.933
> 
> 标签：css, background-image

我希望背景图像覆盖整个可用空间而不会被压扁。
实际上我认为这`background-size`就是目的，但我想我做错了什么，因为它不起作用，请帮助我。

**HTML**

```
<div class="myDiv">
    <p class="paragraph">Lorem Ipsum</div>
</div> 
```

**CSS**

```
body {
    background-color: black;
}

.myDiv {
    color: white;
    background: url('http://upload.wikimedia.org/wikipedia/commons/4/47/PNG_transparency_demonstration_1.png') no-repeat center center fixed; 
    background-size: cover;
} 
```

**小提琴**
[http://jsfiddle.net/V7KSb/](http://jsfiddle.net/V7KSb/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-01T16:22:58.713

只需将 body 和 html 设为 100% 高度，对于 div 也是如此

```
body, html{
    height:100%;
    padding:0;
    margin:0;
}
.myDiv {
    color: white;
    background: url('http://upload.wikimedia.org/wikipedia/commons/4/47/PNG_transparency_demonstration_1.png') no-repeat center center fixed; 
    height:100%;
    padding: 20px;
    box-sizing: border-box;
} 
```

见小提琴：http: [//jsfiddle.net/V7KSb/5/](http://jsfiddle.net/V7KSb/5/)

更新：给定`myDiv`一些填充并用于[`box-sizing: border-box;`](http://css-tricks.com/box-sizing/)确保它不大于 100%。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T16:24:22.857

问题是背景在 div 上，而 div 不够大。如果您必须在 div 上有背景，请尝试以下操作：

```
.myDiv, body, html {
    width:100%;
    height:100%;
    padding:0;
    margin:0;
} 
```

jsFiddle：http: [//jsfiddle.net/jdwire/V7KSb/3/](http://jsfiddle.net/jdwire/V7KSb/3/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T16:29:38.107

要在所有浏览器中实现 100% 的 div 高度，您需要同时设置:`html`和`body`100% 高度，但还要将以下样式应用于应该采用所有可用高度的 div：

```
min-height: 100%;
height: auto !important;
height: 100%; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-06-21T09:34:29.337

试试这个：

```
.myDiv:before {
                position: absolute;
                background: url(../images/ig.png);
                background-size: cover;
                width: 100%;
                height: 100%;
              } 
```

# c# - 窗口失去焦点后更新 ToolstripDropdownButton 的问题

> ID：15162152
> 
> 赞同：2
> 
> 时间：2013-03-01T16:20:06.243
> 
> 标签：c#, winforms, focus, toolstrip, toolstripdropdown

让我从一个简单的例子开始重现我的问题：

1.  创建 WinForms 项目。
2.  在上面放一个 ToolStrip。
3.  在其中制作一个 ToolstripDropdownButton（没有子级）。
4.  向按钮添加一个单击事件处理程序，如下所示：

    ```
    MessageBox.Show("text", "Caption"); 
    ```

    （重点是使主要形式松散它的焦点）。

为了让问题更明显，让我们做一些不必要的补充：

1.  将 ToolStip 的 RenderMode 设置为 ManagerRenderMode。
2.  将它的 Autosize 设置为 false 并使其变大。

这应该足以重现它。运行应用程序并单击按钮。你会得到弹出窗口。关闭弹出窗口，瞧……按钮现在看起来像是有人按住它。

关于如何将其重置为默认状态的任何想法？

我尝试将 Buttons ResetBackColor、Refresh ... 也称为 ToolStrips。似乎不起作用。也许我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T16:26:33.203

MessageBox 或模态表单会干扰它。下拉菜单需要子菜单项。

示例解决方法：

```
private void toolStripDropDownButton1_Click(object sender, EventArgs e) {
  this.BeginInvoke(new Action(() => MessageBox.Show("Help")));
} 
```

# haskell - 用仿函数和非仿函数定义一个类

> ID：15162154
> 
> 赞同：3
> 
> 时间：2013-03-01T16:20:14.320
> 
> 标签：haskell, typeclass, functor

我想定义一个类，该类`m`提供具有如下类型签名的仿函数操作：

映射 :: (a -> b) -> ma -> mb

不过，我还需要一些其他非仿函数操作。我本来想写一些类似的东西：

```
class MyMap m where
  type Key m
  type Value m
  keys :: m -> [Key m]
  elems :: m -> [Value m]
  mapify :: (a -> b) -> m a -> m b -- WON'T WORK!!! 
```

我明白为什么那行不通。我想出的解决方案是将它分成两个类，一个以 Functor 为模型的“普通”一加一。

```
{-# LANGUAGE TypeFamilies #-}

import qualified Data.Map.Lazy as M

class MyMap m where
  type Key m
  type Value m
  keys :: m -> [Key m]
  elems :: m -> [Value m]

class MyMapF m where
  mapify :: (a -> b) -> m a -> m b

instance MyMap (M.Map k v) where
  type Key (M.Map k v) = k
  type Value (M.Map k v) = v
  keys = M.keys
  elems = M.elems

instance MyMapF (M.Map k) where
  mapify = M.map 
```

这很好用，但有更好的方法吗？

* * *

编辑：我真的很喜欢 sabauma 提出的解决方案。但是，当我尝试创建一个使用此类的函数时，我无法得到类型签名。

```
doSomething
  :: (MyMap m1, MyMap m2, Container m1 ~ Container m2) => -- line 22
    (Value m1 -> Value m2) -> m1 -> m2                    -- line 23
doSomething f m = mapify f m                              -- line 24 
```

我得到的错误是：

```
../Amy3.hs:22:6:
    Couldn't match type `b0' with `Value (Container m0 b0)'
      `b0' is untouchable
           inside the constraints (MyMap m1,
                                   MyMap m2,
                                   Container m1 ~ Container m2)
           bound at the type signature for
                      doSomething :: (MyMap m1, MyMap m2, Container m1 ~ Container m2) =>
                                     (Value m1 -> Value m2) -> m1 -> m2
    Expected type: a0 -> b0
      Actual type: Value m1 -> Value m2

../Amy3.hs:24:19:
    Could not deduce (m2 ~ Container m0 b0)
    from the context (MyMap m1, MyMap m2, Container m1 ~ Container m2)
      bound by the type signature for
                 doSomething :: (MyMap m1, MyMap m2, Container m1 ~ Container m2) =>
                                (Value m1 -> Value m2) -> m1 -> m2
      at ../Amy3.hs:(22,6)-(23,38)
      `m2' is a rigid type variable bound by
           the type signature for
             doSomething :: (MyMap m1, MyMap m2, Container m1 ~ Container m2) =>
                            (Value m1 -> Value m2) -> m1 -> m2
           at ../Amy3.hs:22:6
    In the return type of a call of `mapify'
    In the expression: mapify f m
    In an equation for `doSomething': doSomething f m = mapify f m

../Amy3.hs:24:28:
    Could not deduce (m1 ~ Container m0 a0)
    from the context (MyMap m1, MyMap m2, Container m1 ~ Container m2)
      bound by the type signature for
                 doSomething :: (MyMap m1, MyMap m2, Container m1 ~ Container m2) =>
                                (Value m1 -> Value m2) -> m1 -> m2
      at ../Amy3.hs:(22,6)-(23,38)
      `m1' is a rigid type variable bound by
           the type signature for
             doSomething :: (MyMap m1, MyMap m2, Container m1 ~ Container m2) =>
                            (Value m1 -> Value m2) -> m1 -> m2
           at ../Amy3.hs:22:6
    In the second argument of `mapify', namely `m'
    In the expression: mapify f m
    In an equation for `doSomething': doSomething f m = mapify f m
Failed, modules loaded: none. 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-01T16:31:15.380

一种可能性是使用另一种关联类型对“容器”类型进行编码。

```
import qualified Data.Map.Lazy as M

class MyMap m where
  type Key m
  type Value m
  type Container m :: * -> *
  keys :: m -> [Key m]
  elems :: m -> [Value m]
  mapify :: (a -> b) -> Container m a -> Container m b

instance MyMap (M.Map k v) where
  type Key (M.Map k v) = k
  type Value (M.Map k v) = v
  type Container (M.Map k v) = M.Map k
  keys = M.keys
  elems = M.elems
  mapify = M.map 
```

这个想法是`Container`for a`Map`是，因此您将 the与其关联的键类型`Map k`捆绑 在一起。`Map`这样，您的功能将您的`mapify`功能提升到容器中。我猜是否“更好”取决于你，但它确实减少了类型类的数量。您的示例不需要`MyMapF`该类，因为`MyMapF`它与标准类型类相同`Functor`。

好吧，这个错误可以通过`mapify` 稍微修改定义来修复。

```
class MyMap m where
  type Key m
  type Value m
  type Container m :: * -> *
  keys :: m -> [Key m]
  elems :: m -> [Value m]
  -- mapify :: (a -> b) -> Container m a -> Container m b

  -- Make sure the type-checker knows that m2 is just the container of m with
  -- a different value
  mapify :: (MyMap m2, m2 ~ Container m (Value m2)) => (Value m -> Value m2) -> m -> m2

instance MyMap (M.Map k v) where
  type Key (M.Map k v) = k
  type Value (M.Map k v) = v
  type Container (M.Map k v) = M.Map k
  keys = M.keys
  elems = M.elems
  mapify = M.map

doSomething
  :: (MyMap m1, MyMap m2, m2 ~ Container m1 (Value m2)) =>
     (Value m1 -> Value m2) -> m1 -> m2
doSomething f m = mapify f m 
```

这将进行类型检查。我认为问题只是类型检查器需要一个更强的提示，即您所做的只是更改实例`Value`的`MyMap` ，而不更改底层容器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-05-06T01:09:33.517

我意识到这个问题有点老了，但我偶然发现了一些不相关的东西，并且有一个你可能喜欢的想法，特别是因为它看起来比 sabauma 提出的问题要简单一些。

```
import qualified Data.Map.Lazy as M

class MyMap m where
  type Key m
  keys :: m a -> [Key m]
  elems :: m a -> [a]
  mapify :: (a -> b) -> m a -> m b

instance MyMap (M.Map k) where
  type Key (M.Map k) = k
  keys = M.keys
  elems = M.elems
  mapify = M.map 
```

另请参阅[密钥](http://hackage.haskell.org/package/keys)包。

# c++ - 为什么我没有正确解析？

> ID：15162156
> 
> 赞同：1
> 
> 时间：2013-03-01T16:20:20.943
> 
> 标签：c++

对于我的一项 C++ 作业，我必须解析如下语句：

```
设置 a = 10
设置 b = a
打印 b

```

为了解析这些语句，我使用了以下代码：

```
vector<string> stringSplitter(istringstream& tmp) {
vector<string> tokens;  
string str;
while(tmp.good()) {
    tmp >> str;
    tokens.push_back(str);              
}
return tokens;
} 
```

对于错误检查，我想确保 SET 命令只有 4 个标记，而 PRINT 语句只有 2 个标记。因此，当我检查 SET 命令和 PRINT 命令时，我有相应的条件：

```
if (tokens.size() != 4) {
cerr << "Error in Line "<< lineNumber <<":Invalid format\n";
return -1;
} 
```

和

```
if (tokens.size() != 2) {
cerr << "Error in Line "<< lineNumber <<":Invalid format\n";
return -1;
} 
```

我遇到的问题是它适用于“SET a = 10”和“PRINT a”，因为如果在句子末尾有空格，如“SET a = 10”和“PRINT”，它就不起作用一个 ”

有人能帮忙吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T16:37:25.867

利用

```
while ( tmp >> str ) 
```

`tmp.good()`只说是否还有任何东西。您想知道从中获取另一个字符串是否有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T16:25:08.723

运算符使用`>>`空格进行标记，因此如果在`=`.

而是使用更高级的功能进行拆分。

# zend-framework2 - 使用 StandardAutoloader 自动加载 Zend Framework 2 包

> ID：15162157
> 
> 赞同：0
> 
> 时间：2013-03-01T16:20:22.640
> 
> 标签：zend-framework2

我之前使用的是 Zend Framework 2 的下载版本，基本上可以执行以下操作：

```
// Set include paths (add Zend to the path)
set_include_path(get_include_path() . PATH_SEPARATOR . $__CONFIG['zendPath']);

// Setup the Zend Autoloader
require_once('library\Zend\Loader\StandardAutoloader.php');

$autoLoader = new StandardAutoloader(array(
    'namespaces' => array(
        'Zend' => $__CONFIG['zendPath'] . '/library/Zend'
    )
)); 
```

这是因为所有 Zend 包都在 library 文件夹中。我现在想使用 composer 只加载我需要的 Zend 包。我遇到的问题是包按以下方式排列：

```
zendframework/zend-cache/Zend/...
zendframework/zend-loader/Zend/...
zendframework/zend-validator/Zend/...
etc. 
```

我尝试在 StandardAutoloader 中使用单独的命名空间声明，如下所示：

```
$autoLoader = new StandardAutoloader(array(
    'namespaces' => array(
        'Zend\Cache' => $__CONFIG['zendPath'] . '/library/zend-cache/Zend/Cache',
        'Zend\Loader' => $__CONFIG['zendPath'] . '/library/zend-loader/Zend/Loader',
        'Zend\Validator' => $__CONFIG['zendPath'] . '/library/zend-validator/Zend/Validator'
    )
)); 
```

那是行不通的。假设命名空间中可能没有反斜杠吗？有什么办法可以使这项工作？最好不必定义每个单独的包。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T18:17:37.107

您只需要修复路径：

```
$libs = $__CONFIG['zendPath'];
$autoLoader = new StandardAutoloader(array(
    'namespaces' => array(
        'Zend\Cache' => $libs . '/library/zend-cache/Zend',
        'Zend\Loader' => $libs . '/library/zend-loader/Zend',
        'Zend\Validator' => $libs . '/library/zend-validator/Zend',
    )
)); 
```

那应该可以解决问题（它未经测试，所以我不确定尾随`Zend`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T17:12:39.353

让它为你自动加载 Zend：

```
$autoLoader = new StandardAutoloader(array(
    'autoregister_zf' => true, // Auto load Zend Namespace..
    'namespaces' => array(
         // extra namespaces
    )
)); 
```

# sql-server - GROUP BY 与 CASE - tsql

> ID：15162162
> 
> 赞同：4
> 
> 时间：2013-03-01T16:20:46.317
> 
> 标签：sql-server, tsql, group-by, case, common-table-expression

我有一个如下所示的选择：

```
SELECT 
        ReportingDate
    ,   PortfolioID
    ,   PortfolioNme

    ,   CASE
            WHEN @ReportType = 'GeoCountry' THEN Infoportal.dbo.fn_Generic_ProperCase(Country)
            WHEN @ReportType = 'GeoEquity'  THEN Region
        END                 AS Country

    ,   RANK() OVER (PARTITION BY PortfolioID ORDER BY SUM(Percentage) DESC, CASE WHEN @ReportType = 'GeoCountry' THEN Country WHEN @ReportType = 'GeoEquity' THEN Region END) AS [Rank]
    ,   SUM(Percentage)     AS [Weight]

FROM @Worktable as WT

WHERE WT.IssueType1 <> '010' AND WT.IssueType2 <> '055'

GROUP BY    WT.ReportingDate
        ,   WT.PortfolioID
        ,   WT.PortfolioNme
        ,   CASE
                WHEN @ReportType = 'GeoCountry' THEN WT.Country
                WHEN @ReportType = 'GeoEquity'  THEN WT.Region
            END 
```

我要做的是根据@ReportType 按国家或地区分组，并显示百分比和排名的总和。

但是我不断收到错误消息：

> *消息 8120，级别 16，状态 1，第 349
> 行列“@Worktable.Country”在选择列表中无效，因为它不包含在聚合函数或 GROUP BY 子句中。
> 消息 8120，级别 16，状态 1，行 350
> 列“@Worktable.Region”在选择列表中无效，因为它既不包含在聚合函数或 GROUP BY 子句中。*

这太容易了，真的让我很烦。帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-01T16:28:06.460

我相信 CTE 会简化你想要做的事情：

```
;WITH WT AS (
    SELECT 
        ReportingDate
    ,   PortfolioID
    ,   PortfolioNme

    ,   CASE
            WHEN @ReportType = 'GeoCountry' 
              THEN Infoportal.dbo.fn_Generic_ProperCase(Country)
            WHEN @ReportType = 'GeoEquity'  
              THEN Region
        END AS Country
    ,   Percentage
FROM @Worktable
WHERE IssueType1 <> '010' AND IssueType2 <> '055'
)
SELECT 
        ReportingDate
    ,   PortfolioID
    ,   PortfolioNme
    ,   Country
    ,   RANK() OVER (
          PARTITION BY PortfolioID 
          ORDER BY SUM(Percentage) DESC, Country) AS [Rank]
    ,   SUM(Percentage) AS [Weight]
FROM WT
GROUP BY
        ReportingDate
    ,   PortfolioID
    ,   PortfolioNme
    ,   Country 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T16:29:35.703

```
select ReportingDate, PortfolioID, PortfolioNme, Country, RANK() OVER (PARTITION BY PortfolioID ORDER BY SUM(Percentage) DESC, CountryOrRegion) AS [Rank],   SUM(Percentage)     AS [Weight]
from (
    SELECT 
            ReportingDate
        ,   PortfolioID
        ,   PortfolioNme
        , CASE WHEN @ReportType = 'GeoCountry' THEN Country WHEN @ReportType = 'GeoEquity' THEN Region END as CountryOrRegion
        ,   CASE
                WHEN @ReportType = 'GeoCountry' THEN Infoportal.dbo.fn_Generic_ProperCase(Country)
                WHEN @ReportType = 'GeoEquity'  THEN Region
            END                 AS Country
    FROM @Worktable as WT
    WHERE WT.IssueType1 <> '010' AND WT.IssueType2 <> '055'
) t
GROUP BY    WT.ReportingDate
        ,   WT.PortfolioID
        ,   WT.PortfolioNme
        ,   CountryOrRegion 
```

# ios - iOS - 将证书添加到应用程序

> ID：15162164
> 
> 赞同：2
> 
> 时间：2013-03-01T16:21:05.883
> 
> 标签：ios, objective-c, certificate

我有一个私有应用程序，它将与 Web 服务通信并使用客户端证书身份验证。

要求我为每个用户使用不同的证书，因此无法将其添加到应用程序资源中。我使用 ipad 模拟器测试了该应用程序，并使用了位于我的计算机上的证书并且它有效。

如何在没有任何证书的情况下安装应用程序，然后在 iPad 上安装应用程序后添加证书并在我的应用程序上读取此证书？

我想为每个客户发送一封带有证书的电子邮件，但是客户如何添加证书以及我将如何在我的应用程序中阅读它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T17:30:39.327

您只需要将证书放在服务器文件夹中并在代码中调用 URL，如下所示：

```
NSURL *url = [NSURL URLWithString:@"http://www.yoururl.com/cert.pem"];
[[UIApplication sharedApplication] openURL:url]; 
```

使用此代码，应用程序识别它是一个证书并要求用户安装它（这真的很简单！）。

**编辑**

当我的设备没有安装证书时，我的 url 请求不起作用，我收到一个错误，我用这种方法处理它：

```
+ (void)treatConnectionErrors:(NSError *)error withAlert:(BOOL)withAlert
{
    if (error)
    {
        /* If it's a certificate error, shows alert with link to install certificate */
        if ([error code] == -1202)
        {
            // do something, such as show alertview warning about the certificate 
        } else {
            // treat other errors if you want to
        }
     }
} 
```

# jquery - jquery.exif.js - 从 canvas.toDataURL() 解析 exif 数据 - 访问控制错误

> ID：15162167
> 
> 赞同：1
> 
> 时间：2013-03-01T16:21:10.383
> 
> 标签：jquery, asp.net, xmlhttprequest, exif, accesscontrolexception

好的，这是独家新闻：

ASP.NET 应用程序。

我正在使用插件 - [jquery.exif.js](http://www.nihilogic.dk/labs/exifjquery/jquery.exif.js)

以及插件 - [jQuery-File-Upload](https://github.com/blueimp/jQuery-File-Upload)

当我将文件加载到 jQueryFileUploader 中时，我*需要*在发送此文件进行上传之前获取其 exif 数据。

jQueryFileUpload 将图像渲染到画布中，然后我将其转换为图像，以便通过插件获取它的 exif 数据：

```
$('.my-img').live('click', function () {
    var canvas = document.getElementById($(this).attr('id'));
    var img = new Image();
    img.src = canvas.toDataURL();

    $(img).exifLoad(function () {
        alert($(img).exifPretty());
    });
}); 
```

图片网址如下所示：

'数据：图像/png；base64，iVBORw0KGgoAAAANSUhEUgAAAFAAAAA7CAYAAADsIg00AAAgAElEQVR....'

当插件运行此方法时：

```
function sendRequest(strURL, fncCallback, fncError, aRange, bAcceptRanges, iFileSize) {
        var oHTTP = createRequest();
        if (oHTTP) {

            var iDataOffset = 0;
            if (aRange && !bAcceptRanges) {
                iDataOffset = aRange[0];
            }
            var iDataLen = 0;
            if (aRange) {
                iDataLen = aRange[1] - aRange[0] + 1;
            }

            if (fncCallback) {
                if (typeof (oHTTP.onload) != "undefined") {
                    oHTTP.onload = function () {

                        if (oHTTP.status == "200" || oHTTP.status == "206" || oHTTP.status == "0") {
                            this.binaryResponse = new BinaryFile(this.responseText, iDataOffset, iDataLen);
                            this.fileSize = iFileSize || this.getResponseHeader("Content-Length");
                            fncCallback(this);
                        } else {
                            if (fncError) fncError();
                        }
                        oHTTP = null;
                    };
                } else {
                    oHTTP.onreadystatechange = function () {
                        if (oHTTP.readyState == 4) {
                            if (oHTTP.status == "200" || oHTTP.status == "206" || oHTTP.status == "0") {
                                this.binaryResponse = new BinaryFile(oHTTP.responseBody, iDataOffset, iDataLen);
                                this.fileSize = iFileSize || this.getResponseHeader("Content-Length");
                                fncCallback(this);
                            } else {
                                if (fncError) fncError();
                            }
                            oHTTP = null;
                        }
                    };
                }
            }
            oHTTP.open("GET", strURL, true);

            if (oHTTP.overrideMimeType) oHTTP.overrideMimeType('text/plain; charset=x-user-defined');

            if (aRange && bAcceptRanges) {
                oHTTP.setRequestHeader("Range", "bytes=" + aRange[0] + "-" + aRange[1]);
            }

            oHTTP.setRequestHeader("If-Modified-Since", "Sat, 1 Jan 1970 00:00:00 GMT");

            oHTTP.send(null);
        } else {
            if (fncError) fncError();
        }
    } 
```

GET 在我的控制台中失败并出现以下错误：

'XMLHttpRequest 无法加载数据：image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAAA7CAYAAADsIg00AAAgAElEQ…OqEqrkq7RcS3YLfHz3I+/BUMHzeC0Ir2HtuqJC4jFO9/8Bv2hF1W9nFmYAAAAAASUVORK5CYII=。Access-Control-Allow-Origin 不允许来源[http://mysite.com 。](http://mysite.com)

Chrome 开发工具的网络选项卡显示了[这一点](http://sdrv.ms/Wwh38N)。

我的 Global.asax 中也有这个：

```
private void EnableCrossDomainAjaxCall()
    {
        HttpContext.Current.Response.AddHeader("Access-Control-Allow-Origin", "*");

        if (HttpContext.Current.Request.HttpMethod == "OPTIONS")
        {
            HttpContext.Current.Response.AddHeader("_CACHE-Control", "no-_CACHE");
            HttpContext.Current.Response.AddHeader("Access-Control-Allow-Methods", "GET, POST");
            HttpContext.Current.Response.AddHeader("Access-Control-Allow-Headers", "Content-Type, Accept");
            HttpContext.Current.Response.AddHeader("Access-Control-Max-Age", "1728000");
            HttpContext.Current.Response.End();
        }
    } 
```

一般来说，Global.asax 中的代码一直为我解决了访问控制来源问题。但这一次有些不同。

总是有这样的情况，我把它弄得太复杂了。

项目步骤：

1.  用户选择图像 - 获取 exif 数据
2.  通过表单提交将图像发送到处理程序，以上传到服务器，并带有一些与 exif 相关的所需参数

我感谢任何和所有的帮助！非常感谢！:)

戴夫

# jsf - JSF Primefaces：编辑后如何保持所选行的页面焦点？（分页器，过滤）

> ID：15162172
> 
> 赞同：0
> 
> 时间：2013-03-01T16:21:37.907
> 
> 标签：jsf, filter, primefaces, datatable, pagination

我正在使用 Primefaces 的数据表，用户可以在其中选择一行并进行编辑。数据表包含大约 10 页，此外它还包括一个*分页器*和*过滤器功能*。

因此，如果用户使用过滤选择一行（例如从第 3 页）并对其进行操作，则数据表会更新该值并返回到第 1 页。但我需要显示第 3 页，即选择该行的页面。

这就是我的数据表的样子：

```
 <p:dataTable id="dataTable" var="row"
                widgetVar="dataTableWidget" style="overflow:hidden;"
                value="#{bean.tableData}"
                filterEvent="enter"
                filteredValue="#{bean.filteredTableData}"
                paginator="true" rows="20" paginatorPosition="bottom"
                rowKey="${row.id}"
                selection="#{bean.selectedRow}"
                paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink}"
                editable="true"> 
```

感谢帮助！

# php - 限制通过 cron 作业运行的文件无法直接访问

> ID：15162173
> 
> 赞同：4
> 
> 时间：2013-03-01T16:21:39.690
> 
> 标签：php, html, cron

我需要有关保护我创建的通过 cronjobs 运行的文件的建议。

目前，我正在使用 HTTP_referrer 来防止未经授权的人直接访问。但这也会阻止我的 cron 作业执行它。

我在脚本顶部插入了以下代码：

```
 if(empty($_SERVER['HTTP_REFERER'])){
        echo 'Restricted Access';
        exit;
    } 
```

这安全吗？它会阻止我的 cron 访问吗？任何帮助表示赞赏。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T16:25:25.900

**使用 Cron + PHP CLI 执行脚本：**

不要将该文件放在 webroot 下。

**使用 Cron + Wget 请求脚本：**

通过 post 将密钥传递给您的脚本；检查脚本中的那个键。例子：

位于 wwwroot 之外的服务器上的 key.txt 的内容：

```
key=hello 
```

wget命令行

```
wget --post-file=key.txt http://example.com/cron.php 
```

PHP 脚本

```
parse_str(file_get_contents("key.txt"), $array);
if($array != $_POST)
    die("does not match"); 
```

# c - 如何在minix操作系统中执行c文件

> ID：15162176
> 
> 赞同：-5
> 
> 时间：2013-03-01T16:21:45.453
> 
> 标签：c, unix, compilation, minix

有人可以向我解释什么是 `a.out`它以及它是如何工作的吗？这是我第一次使用 Unix (minix)。我有一个文件夹，其中包含两个文件`filename.c`和`test.sh`（包含以 ./a.out 和一些 f=values 开头的三行）。`filename.c`如果不是，我只想编译和执行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T17:01:07.027

我使用 ubuntu 并使用 gcc 编译。首先我编写代码并说我将其命名为 testing.c。然后我将它保存在一个文件夹中，比如 c。然后我去命令行，如果目前我不在文件夹 c 中，我通过写入将其更改为文件夹 c

```
cd /c 
```

然后我使用 gcc 编译它

```
gcc testing.c -o testing 
```

然后接下来我通过键入来敲响它

```
./testing 
```

注意：-这是我在使用 gcc 编译时在 ubuntu 上所做的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T16:52:21.937

我不使用 minux，所以用一粒盐，但似乎你应该使用`mcc`编译*：

```
mcc filename.c -o myprogram
chmod +x myprogram
./myprogram 
```

该`-o`选项允许您选择可执行文件名称，因此它不默认为`a.out`，这`chmod +x`是为了确保您有一个有效的可执行文件（可能不需要它，但它不会受到伤害）

[*参考](http://diuf.unifr.ch/pai/education/2002_2003/courses/OS/Minixlab.pdf)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T16:31:47.687

-> 在命令提示符下保存并退出程序（ESC :wq）后编译，命令为 CC（您的文件名需要有扩展名 .C）

-> 要在命令提示符下运行程序，您需要输入 ./a.out。

->要在不关闭程序的情况下编译和运行，它是 (ESC) :!CC % 和 (ESC) :!./a.out

你可以看看 [这里](http://www.unix.com/programming/6382-how-compile-run-c-programs-unix-environment.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-01T17:04:03.520

Unix 的习惯是，如果您调用编译器来生成可执行文件，并且没有明确给出可执行文件的名称，则会调用可执行文件`a.out`（可能是为了汇编程序输出）。所以：

*   `cc -c program.c`：只需编译，给出`program.o`
*   `cc program.c`: 编译和链接，没有给出可执行文件名，可执行文件是`a.out`
*   `cc -o name program.c`：编译和链接，明确要求提供可执行文件`name`

编译器通常足够聪明，可以从扩展中判断内容（以及如何处理文件）。

# python - 仅获取与 Django 查询集相关的模型

> ID：15162177
> 
> 赞同：1
> 
> 时间：2013-03-01T16:21:45.887
> 
> 标签：python, django, django-queryset

我对 Django 没有太多经验（我使用的是 1.3），所以我觉得这是一个愚蠢的问题......但无论如何：

我有这样的模型：

```
class User(models.Model):
    name = models.CharField()

class Product(models.Model):
    name = models.CharField()
    public = models.BooleanField()

class Order(models.Model):
    user = models.ForeignKey(User)
    product = models.ManyToManyField(Product, through='OrderProduct')

class OrderProduct(models.Model):
    product = models.ForeignKey(Product)
    order = models.ForeignKey(Order)
    expiration = models.DateField() 
```

假设我做了一些这样的查询

```
Product.objects.filter(order__status='completed', order__user____id=2) 
```

所以我会得到所有`User2`购买的产品（假设它只是`Product1`）。凉爽的。但是现在我想要那个产品的过期时间，但是如果我打电话`Product1.orderproduct_set.all()`，我会得到`OrderProduct`with的每一个条目`Product1`，但我只想要从我的查询集中返回的那个。我知道我可以在 OrderProducts 上运行一个不同的查询，但这将是对数据库的另一个打击，只是为了带回我之前运行的查询已经可以获取的数据。`.query`它给了我：

```
SELECT "shop_product"."id", "shop_product"."name"
FROM "shop_product"
INNER JOIN "shop_orderproducts" ON ("shop_product"."id" = "shop_orderproducts"."product_id")
INNER JOIN "shop_order" ON ("shop_orderproducts"."order_id" = "shop_order"."id")
WHERE ("shop_order"."user_id" = 2  AND "shop_order"."status" = completed )
ORDER BY "shop_product"."ordering" ASC 
```

如果我可以`SELECT *`代替特定字段，我将在一个查询中获得我需要的所有数据。无论如何构建该查询并仅获取与其相关的数据？

**编辑** 我觉得我需要澄清一些观点，很抱歉我没有更清楚：

1.  我不是在查询，`OrderProduct`因为有些产品是公开的，不必购买，但我仍然必须列出它们，并且查询不会返回它们`OrderProduct`

2.  我期望的结果是一个产品列表，以及他们的订单数据（如果他们有的话）。在 JSON 中，它看起来有点像这样

    [{id: 1, order: 1, expiration: 2013-03-03, public: false}, {id: 1, order: , expiration: , public: true

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T19:02:01.787

> 我将使用 Product1 获取 OrderProduct 的每个条目，但我只想要从我的查询集中返回的那个。

你只想要哪个“一个”？您的查询正在模型上进行过滤，因此与返回的查询集中的每个相关联的`Product`所有`Users`、`Orders`和都将是可访问的。`OrderProducts``Products`

如果你想要一个特定`OrderProduct`的，那么你应该过滤为`op = OrderProduct.objects.filter(xxxxx)`然后访问链上的模型，如下所示：

`op.product`,`op.order`等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T19:16:12.727

我会建议方法[prefetch_related](https://docs.djangoproject.com/en/dev/ref/models/querysets/#prefetch-related)，但这在 Django 1.3 中不可用。

Dan Hoerst 关于选择 from 是正确的`OrderProduct`，但这仍然对数据库造成了不必要的影响。我们可以通过使用[select_related](https://docs.djangoproject.com/en/dev/ref/models/querysets/#select-related)方法来阻止它。

```
>>> from django.db import connection
>>> len(connection.queries)
0
>>> first_result = OrderProduct.objects.select_related("order__user", "product")
...               .filter( order__status="completed",
...                        order__user__pk=2 )[0]
>>> len(connection.queries)
1
>>> name = first_result.order.user.name
>>> len(connection.queries)
1
>>> product_name = first_result.product.name
>>> len(connection.queries)
1 
```

# deployment - 从 TFS 构建调用自定义工具

> ID：15162180
> 
> 赞同：0
> 
> 时间：2013-03-01T16:21:59.767
> 
> 标签：deployment, msbuild, continuous-integration, workflow

我们正在为我们的网站构建使用 TFS2010，并且我们正在创建完全自动化的构建。目前，这些站点是在远程服务器中构建和部署的。

这些站点包含几个配置文件，我们希望将它们转换为构建的一部分。由于有一些规则可以创建正确的配置文件，我们希望为此目的使用自定义工具 (.exe)，而不是使用 xml 转换。

从我们在构建模板中可以看到，MSBuild 将文件复制到一个放置文件夹，然后将它们推送到远程 IIS 站点。我们希望将我们的自定义工具与此过程挂钩，并在网站发布之前在构建服务器中进行转换。问题是 MSBuild 任务是构建模板中的单个节点，我们找不到调用工具的地方。在 MSBuild 步骤之前，没有代码部署到放置文件夹，在 MSBuild 步骤之后，代码已经部署到远程服务器。

关于如何将自定义工具插入正确的工作流程步骤的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T16:45:29.780

您使用的 msbuild 目标是什么？我认为您可以在 csproj 文件中定义自己的目标来执行以下操作：

1.  针对所需文件执行您的自定义工具
2.  运行通常的构建目标（或您通常使用的任何目标）

**在 .csproj 文件中编辑** 例如，您可以定义以下内容：

```
<Target Name="buildWithCustomTool">

    <!-- Exec your custom tool -->
   <Exec Command="your command" />   
    <!-- Call the build target which will run as normally -->        
   <CallTarget Targets="Build" />

</Target> 
```

希望能帮助到你，

伊万

# .htaccess - 带有 .htaccess (Codeigniter) 的通配符子域

> ID：15162184
> 
> 赞同：0
> 
> 时间：2013-03-01T16:22:09.977
> 
> 标签：.htaccess, codeigniter, mod-rewrite, subdomain, wildcard-subdomain

在我目前的项目中，我被要求为每个注册用户提供博客功能，这意味着当你注册时，你可以自动在网站上写博客。这很容易完成，但是，我被指示使用格式的 URL，例如`http://username.site.com`将用户名引用到特定用户博客。

我正在尝试使用 .htaccess 文件来实现这一点，但似乎我的条件得到了满足，但我收到了 500 内部服务器错误，这是由无限循环的重写引起的。我想避免这种情况，但我找不到合适的解决方案。到目前为止，这是我的 .htaccess：

```
<IfModule mod_rewrite.c>

   Options +FollowSymLinks
   Options +Indexes
   RewriteEngine On
   RewriteBase /

   RewriteCond $1 !^(index\.php|images|tinymce|files|css|js|robots\.txt)
   RewriteRule ^(.*)$ /index.php/$1 [L]

   RewriteCond %{HTTP_HOST} !^www. [NC]
   RewriteCond %{HTTP_HOST} ^(www.)?([a-z0-9-_]+).dev.example.com [NC]
   RewriteRule ^(.*)$ /index.php/blog/%2/$1 [L]

</IfModule> 
```

附加信息：该站点是服务器托管的，但被隐藏，`dev.example.com`因此博客 URL 应该看起来像`username.dev.example.com`，当站点启动时，这当然是`username.example.com`。它是用 Codeigniter 构建的。

任何有关改进 .htaccess 的建议都会很棒，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T16:45:21.447

最好的方法是不使用 .htaccess。

这就是我要做的：

1.  创建通配符 DNS 记录 *.example.com
2.  创建一个博客模式，选择 $_SERVER['HTTP_HOST']，将其分解并删除您的域。在您的数据库表中进行查找。

编辑：

1.  创建一个通配符 DNS 记录，假设创建一个 CNAME *.example.com > www.example.com 这样，当我转到 kyle.example.com 时，它真正加载了 www.example.com。

2.  创建博客模型：

row_count() > 0) { $blogInfo = [ 'blog_id'=>123, // 来自 db 'blog_name'=>'Kyles Test Blog', ... ]; $this->session->set_userdata($blogInfo); 返回 $blogInfo; } 否则 { 返回假；} } } ?>

// 控制器

session->userdata('blog_id')) { // blog id 没有保存 session $this->load->model('blog_model'); // 加载博客模型 $url = str_replace('.example.com', '', strtolower($_SERVER['HTTP_HOST'])); // 获取当前主机名，例如 kyle.example.com if($url !== 'www') { if($blog_info = $this->blog_model->checkForValidBlog()) { // 加载你的博客 redirect(' /blog/' . $blog_info['blog_id'] . '/'); } else { show_error('错误 - 找不到博客', 404); } } } else { // 加载你的博客 redirect('/blog/' . $blog_info['blog_id'] . '/'); } } } ?>

# c++ - 为什么使用 while(!input.eof()) 循环两次不起作用？

> ID：15162189
> 
> 赞同：1
> 
> 时间：2013-03-01T16:22:25.100
> 
> 标签：c++, iostream

下面这几行代码的目的是将输入文本文件中的每个单词（单词用换行符分隔）放到一个字符串向量中，然后将每个单词翻过来，看看这个翻出来的单词是否包含在输入文件中的单词列表。

我相信我的二进制搜索功能和 wordTurn 功能工作正常。我对我的代码做了几个简单的测试，我发现使用 while(!myFile.eof()) 循环两次可能是我的代码不起作用的原因。通过不工作，我的意思是我将输出文件（“pairs.txt”）作为一个空文档（它应该是成对的单词列表）。

也就是说，当我在第二个 while(!myFile.eof()) 循环体中放入一些简单的打印代码时，它没有被打印出来，我由此得出结论，这个循环没有到达。这更有可能，因为它是在我注释掉第一个 while(!myFile.eof()) 循环时打印的。我最初将第一个 while 循环放在 else 主体上，但这没有任何区别。

你认为是什么问题？我尝试将这两个循环体组合到第二个循环中，它在输出文件中产生了一些东西，但这不是这段代码应该做的，这在逻辑上是不正确的。

任何建议将不胜感激。

```
int main(int argc, char* argv[]) {

    vector<string> words;
    ifstream myFile(argv[1]);
    ofstream outputFile("pairs.txt");
    string vocab;
    string s;
    int count;

    while(!myFile.eof()) {                //first while(!myFile.eof()) loop
        getline(myFile, s);
        words.push_back(s);
    }

    if(argc != 2) {
        cout << "Usage: provide the name of one input file after the dictlookupHN executable file." << endl;
        return (1);
    }
    else {
        if(!myFile.is_open()) {
            cerr << "Error: unable to open file " << argv[1] << endl;
            return (1);
        }
        else {
            while(!myFile.eof()) {      //second while(!myFile.eof()) loop
                getline(myFile, vocab);
                string turnedWord = wordTurn(vocab);
                if(binsearch(words, turnedWord) != "") {
                    outputFile << vocab << ":" << turnedWord << endl;
                    count++;
                }
            }
        }

    }
    myFile.close();
    outputFile.close();

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T16:26:59.443

ifstream 类维护流数据的内部偏移量，跟踪它必须从哪里读取，以进行下一个操作。

当此偏移量到达末尾时，它会停止第一个循环，（`eof()`返回 false）。在再次读取之前，您需要将此内部位置重置回文件的开头。

你可以这样说：

```
myFile.clear(); // clear stream flags and error state
myFile.seekg(0, ios::beg); // reset read position 
```

在第二个循环之前。

编辑：添加了对`clear()`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T16:29:46.430

发生的情况是，当您完成文件的第一次运行时，文件的查找指针位于文件末尾。如果要再次查找文件，则需要在第二次循环`myFile.seekg(0, ios::beg);`之前重置文件指针。`while`像这样的东西：

```
 ...
        else {
                myFile.seekg(0, ios::beg);
                while(!myFile.eof()) {      //second while(!myFile.eof()) loop
        ... 
```

那应该可以解决问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-01T16:30:02.943

如果您想再次读取文件 [一旦您将整个文件读取到最后]，您将需要重置错误/失败位，并从头开始。文件结束是一种永久状态，除非采取措施将其重置。

所以，你需要`myFile.clear();`并且`myFile.seekg(0, ios_base::beg);`

虽然我感觉你实际上想在这种特殊情况下打开一个不同的文件，但在这种情况下，我建议关闭当前的文件，并使用不同的变量——它们不是很贵，而且它使代码更清晰 [特别是如果您将其称为合理的东西，例如，`vocabFile`而不是`myFile`]

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-01T16:31:44.430

要再次从文件的开头读取，请使用：

```
myFile.seekg(0, ios::beg); 
```

但请注意，这不是从文件中读取的好方法：

```
string vocab;
while(!myFile.eof()) {
    getline(myFile, vocab);
    ...
} 
```

它应该是这样的：

```
string vocab;
while(getline(myFile, vocab)) {
    if (vocab.empty())
        continue;               // empty line might be read
    ...
} 
```

看一下：[为什么我的输入似乎处理超过文件末尾？](http://www.parashift.com/c++-faq-lite/istream-and-eof.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-01T16:26:28.860

第一个循环到达 EOF，即“读取标记”的位置，因此第二个 EOF 在第二个循环中被读取为第一个。

很简单，尝试在循环之间关闭和打开文件。

更好的主意是使用[seekg](http://www.cplusplus.com/reference/istream/istream/seekg/)再次从顶部读取。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-01T16:28:20.593

第一个循环到达文件末尾，并且在第二次读取之前您不会重置。您需要在第一个循环之后寻找文件的开头：`myFile.seekg (0, ios::beg);`将为您执行此操作。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-01T21:59:19.493

谢谢大家所有这些好的建议。他们真的帮助我理解了 ifstream 和 eof 是如何工作的。

我的 TA 的建议是使用 for 循环而不是第二个 while(!myFile.eof()) 循环。我可能正在使用此选项，但是当我必须使用 eof 两次时，您的回答会很有帮助。

谢谢！

```
 while(!myFile.eof()) { 
                            string s;
                            getline(myFile, s);
                            words.push_back(s);
                    }

                    for(int i=0; i<words.size(); i++) {
                            //LOOP INV: 
                            string vocab = words.at(i);
                            string turnedWord = wordTurn(vocab);
                            if(binsearch(words, turnedWord) == 1 && turnedWord.length() > 3) {
                                    outputFile << vocab << ":" << turnedWord << endl;
                                    count++;
                            } 
```

# mysql - OpenCart：如何准确填充 oc_category_path

> ID：15162193
> 
> 赞同：8
> 
> 时间：2013-03-01T16:22:41.447
> 
> 标签：mysql, e-commerce, opencart

我已经使用在线服务将数据从我的其他电子商务网站传输到[OpenCart](http://opencart.com)，并且一切似乎都已正确传输。

然而，产品类别存在一个问题。类别已转移到`oc_category`表格中；`oc_category_path`但是，如果我希望能够在管理员中编辑我的类别，似乎还需要填充另一个名为的表。

你知道这张表是什么以及我如何正确填充它（我想手动填充）。确切地说和是什么，是什么决定了一个类别的`path_id`级别？`level`

相关表格：

```
CREATE TABLE `oc_category` (
  `category_id` int(11) NOT NULL AUTO_INCREMENT,
  `image` varchar(255) DEFAULT NULL,
  `parent_id` int(11) NOT NULL DEFAULT '0',
  `top` tinyint(1) NOT NULL,
  `column` int(3) NOT NULL,
  `sort_order` int(3) NOT NULL DEFAULT '0',
  `status` tinyint(1) NOT NULL,
  `date_added` datetime NOT NULL DEFAULT '0000-00-00 00:00:00',
  `date_modified` datetime NOT NULL DEFAULT '0000-00-00 00:00:00',
  PRIMARY KEY (`category_id`)
) ENGINE=MyISAM AUTO_INCREMENT=12 DEFAULT CHARSET=utf8

CREATE TABLE `oc_category_description` (
  `category_id` int(11) NOT NULL,
  `language_id` int(11) NOT NULL,
  `name` varchar(255) NOT NULL,
  `description` text NOT NULL,
  `meta_description` varchar(255) NOT NULL,
  `meta_keyword` varchar(255) NOT NULL,
  `u_title` varchar(255) NOT NULL,
  `u_h1` varchar(255) NOT NULL,
  `u_h2` varchar(255) NOT NULL,
  PRIMARY KEY (`category_id`,`language_id`),
  KEY `name` (`name`)
) ENGINE=MyISAM DEFAULT CHARSET=utf8

CREATE TABLE `oc_category_path` (
  `category_id` int(11) NOT NULL,
  `path_id` int(11) NOT NULL,
  `level` int(11) NOT NULL,
  PRIMARY KEY (`category_id`,`path_id`)
) ENGINE=MyISAM DEFAULT CHARSET=utf8 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-02T20:19:32.323

如果 oc 存储中的类别是根类别，它会在路径表中获得一个条目，例如“category_id,category_id,0”。如果该类别有一个孩子，它将在表中获得两个条目，即：-“category_id,category_id,1”以及“category_id,parent_id,0”。

如果那个孩子有一个它自己的孩子，那么这个新孩子将有三个这样的条目：-
“category_id,category_id,2”
“category_id,parent_id,1”
“category_id,parents parent category_id,0”

为了说明这一点，假设一个类别的 category_id 为“14”。它是 category_id 为“11”的类别的第一个子项。该类别的 category_id 为“11”是类别 ID 为“1”的类别中的子类别。（1>11>14 显示在管理面板中，除了使用名称而不是 category_id）

以上将有3个条目：
“14”，“14”，“2”
“14”，“11”，“1”
“14”，“1”，“0”

所以它的根类别将得到 0，下一个得到 1，然后是 2，依此类推，这一切都取决于它向下的类别级别。

我希望能很好地解释事情。

至于填充它，最简单的方法，但不是一个完整的方法，就是创建带有“category_id,category_id,0”的表。这将使他们出现在管理面板中。如果您然后单击“修复”，它将正确生成此表。

或者，您必须逐步浏览您的类别表，使用它的 parent_id 创建一个数组，查找该 parent_id 的 parent_id 并将其添加到数组中，等等。当数组完成时，即不再有父级，将它们添加到具有正确“级别”的表中将是一项简单的任务。

仅供参考，还有另一个表也需要填充，category_to_store，非常简单的“category_id,store_id”。如果没有此表，您将不会在商店中看到您的类别。

# r - 合并（rbind）数据框并使用原始数据框的名称创建列

> ID：15162197
> 
> 赞同：37
> 
> 时间：2013-03-01T16:22:43.400
> 
> 标签：r

我有几个要按行组合的数据框。在生成的单个数据框中，我想创建一个新变量来标识观察来自哪个数据集。

```
# original data frames
df1 <- data.frame(x = c(1, 3), y = c(2, 4))
df2 <- data.frame(x = c(5, 7), y = c(6, 8))

# desired, combined data frame
df3  <- data.frame(x = c(1, 3, 5, 7), y = c(2, 4, 6, 8),
                   source = c("df1", "df1", "df2", "df2")
# x y source
# 1 2    df1
# 3 4    df1
# 5 6    df2
# 7 8    df2 
```

我怎样才能做到这一点？提前致谢！

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2013-03-01T16:32:45.900

这不完全是你要求的，但它非常接近。将您的对象放在命名列表中并使用`do.call(rbind...)`

```
> do.call(rbind, list(df1 = df1, df2 = df2))
      x y
df1.1 1 2
df1.2 3 4
df2.1 5 6
df2.2 7 8 
```

请注意，行名称现在反映了源`data.frame`s。

### 更新：使用`cbind`和`rbind`

另一种选择是制作如下基本功能：

```
AppendMe <- function(dfNames) {
  do.call(rbind, lapply(dfNames, function(x) {
    cbind(get(x), source = x)
  }))
} 
```

然后，此函数采用`data.frame`您要“堆叠”的名称的字符向量，如下所示：

```
> AppendMe(c("df1", "df2"))
  x y source
1 1 2    df1
2 3 4    df1
3 5 6    df2
4 7 8    df2 
```

### 更新 2：`combine`从“gdata”包中使用

```
> library(gdata)
> combine(df1, df2)
  x y source
1 1 2    df1
2 3 4    df1
3 5 6    df2
4 7 8    df2 
```

### 更新 3：使用`rbindlist`“data.table”

现在可以使用的另一种方法是使用`rbindlist`“data.table”及其`idcol`参数。有了这个，方法可能是：

```
> rbindlist(mget(ls(pattern = "df\\d+")), idcol = TRUE)
   .id x y
1: df1 1 2
2: df1 3 4
3: df2 5 6
4: df2 7 8 
```

### 更新 4：使用`map_df`“purrr”

与 类似`rbindlist`，您也可以使用`map_df`from "purrr" with `I`or`c`作为函数来应用到每个列表元素。

```
> mget(ls(pattern = "df\\d+")) %>% map_df(I, .id = "src")
Source: local data frame [4 x 3]

    src     x     y
  (chr) (int) (int)
1   df1     1     2
2   df1     3     4
3   df2     5     6
4   df2     7     8 
```

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2016-04-17T10:55:31.403

另一种方法使用`dplyr`：

```
df1 <- data.frame(x = c(1,3), y = c(2,4))
df2 <- data.frame(x = c(5,7), y = c(6,8))

df3 <- dplyr::bind_rows(list(df1=df1, df2=df2), .id = 'source')

df3
Source: local data frame [4 x 3]

  source     x     y
   (chr) (dbl) (dbl)
1    df1     1     2
2    df1     3     4
3    df2     5     6
4    df2     7     8 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-03-01T16:28:39.617

我不确定这样的功能是否已经存在，但这似乎可以解决问题：

```
bindAndSource <-  function(df1, df2) { 
  df1$source <- as.character(match.call())[[2]]
  df2$source <- as.character(match.call())[[3]]
  rbind(df1, df2)
} 
```

## 结果：

```
bindAndSource(df1, df2)

1 1 2    df1
2 3 4    df1
3 5 6    df2
4 7 8    df2 
```

* * *

`*aply`警告：这在-like 调用中不起作用

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-03-01T16:33:33.163

其他两个答案的混合：

```
df1 <- data.frame(x = 1:3,y = 1:3)
df2 <- data.frame(x = 4:6,y = 4:6)

> foo <- function(...){
    args <- list(...)
    result <- do.call(rbind,args)
    result$source <- rep(as.character(match.call()[-1]),times = sapply(args,nrow))
    result
 }

> foo(df1,df2,df1)
  x y source
1 1 1    df1
2 2 2    df1
3 3 3    df1
4 4 4    df2
5 5 5    df2
6 6 6    df2
7 1 1    df1
8 2 2    df1
9 3 3    df1 
```

如果您想避免这项`match.call`业务，您总是可以限制自己命名函数参数（即`df1 = df1, df2 = df2`）并使用`names(args)`来访问名称。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-03-06T14:36:28.133

另一种解决方法是在 plyr 包中使用 ldply ......

```
df1 <- data.frame(x = c(1,3), y = c(2,4))
df2 <- data.frame(x = c(5,7), y = c(6,8))
list = list(df1 = df1, df2 = df2)
df3 <- ldply(list)

df3
  .id x y
  df1 1 2
  df1 3 4
  df2 5 6
  df2 7 8 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-01-12T18:35:48.837

尽管这里已经有一些很好的答案，但我只想添加我一直在使用的答案。它是基础的`R`，因此如果您想在一个包中使用它，它的限制可能会更少，而且它比其他一些基础`R`解决方案要快一点。

```
dfs <- list(df1 = data.frame("x"=c(1,2), "y"=2),
            df2 = data.frame("x"=c(2,4), "y"=4),
            df3 = data.frame("x"=2, "y"=c(4,5,7)))

> microbenchmark(cbind(do.call(rbind,dfs), 
                       rep(names(dfs), vapply(dfs, nrow, numeric(1)))), times = 1001)
Unit: microseconds
     min      lq     mean  median      uq      max neval
 393.541 409.083 454.9913 433.422 453.657 6157.649  1001 
```

第一部分，`do.call(rbind, dfs)`将数据帧的行绑定到单个数据帧中。`vapply(dfs, nrow, numeric(1))`查找每个数据框有多少行，这些行被传递给以`rep`对`rep(names(dfs), vapply(dfs, nrow, numeric(1)))`数据框的每一行重复数据框的名称一次。 `cbind`把它们放在一起。

这类似于之前发布的解决方案，但速度提高了约 2 倍。

```
> microbenchmark(do.call(rbind, 
                         lapply(names(dfs), function(x) cbind(dfs[[x]], source = x))), 
                 times = 1001)
Unit: microseconds
      min      lq     mean  median       uq      max neval
  844.558 870.071 1034.182 896.464 1210.533 8867.858  1001 
```

我不是 100% 确定，但我相信加速是由于对`cbind`每个数据帧进行一次调用而不是一次调用。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2022-03-04T08:24:53.213

这是使用`Map`. 首先，我创建了一个命名的数据框列表。然后，我可以`cbind`为每个数据框命名。然后，使用`unname`删除行名。最后，`rbind`将所有数据帧放在一起。

```
# original data frames
df1 <- data.frame(x = c(1, 3), y = c(2, 4))
df2 <- data.frame(x = c(5, 7), y = c(6, 8))

df.list <- Hmisc::llist(df1, df2)

do.call(rbind, unname(Map(cbind, source = names(df.list), df.list))) 
```

**输出**

```
 source x y
1    df1 1 2
2    df1 3 4
3    df2 5 6
4    df2 7 8 
```

# javascript - 创建嵌套表

> ID：15162204
> 
> 赞同：1
> 
> 时间：2013-03-01T16:23:01.653
> 
> 标签：javascript, html, dom, html-table

再会。我正在尝试创建嵌套表一百次。但是，我的代码创建了一个主表，然后在其中有 100 个单独的表。（感谢 Sachin 爵士的帮助）我需要的是表中的表。请帮我修复代码。

```
<html>
<head> <title> Hello! </title> 

<script type="text/javascript">
function add() { 
    var ni = document.getElementById('myDiv');
    var numi = document.getElementById('theValue');
    var num = (document.getElementById('theValue').value -1)+ 2;
    numi.value = num;
    var newdiv = document.createElement('div');
    var divIdName = 'my'+num+'Div';
    newdiv.setAttribute('id',divIdName);
    newdiv.innerHTML = "<table border=1><tr><td> Hello! <input type='hidden' value=1 id='theValue' /><div id='" + divIdName + "'></td></tr></table>";
    ni.appendChild(newdiv);
    for(var i=1;i<100;i++) {
        var ni = document.getElementById(divIdName);
        var numi = document.getElementById('theValue');
        var num = (document.getElementById('theValue').value -1)+ 2;
        numi.value = num;
        var newdiv = document.createElement('div');
        var divIdName = 'my'+num+'Div';
        newdiv.setAttribute('id',divIdName);
        var j=i++;
        newdiv.innerHTML = "<table border=1><tr><td> Hello! <input type='hidden' value='" + j + "' id='theValue' /><div id='" + divIdName + "'></td></tr></table>";
        ni.appendChild(newdiv);
    }
}
</script>

</head>
<body onload="add()">
<table border="1">
    <tr>
        <td> Hello! <input type='hidden' value='0' id='theValue' />

        <div id='myDiv'> </div> </td>
    </tr>
</table>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T16:37:38.723

这应该这样做（我已经删除了隐藏的输入，因为它不需要）：http: [//jsfiddle.net/rPR9w/1/](http://jsfiddle.net/rPR9w/1/)

```
function add() {
    for (i=1; i<=100; i++) {
        addAnother(i);
    }
}

function addAnother(counter) { 
    var container = document.getElementById('myDiv' + counter);
    container.innerHTML = makeTable(counter + 1);
}

function makeTable(counter) {

    return "<table border=1><tr><td> Hello! <div id='myDiv" + counter + "'></td></tr></table>";

} 
```

# java - Java不打印小数位

> ID：15162206
> 
> 赞同：2
> 
> 时间：2013-03-01T16:23:06.637
> 
> 标签：java

我正在尝试做一个非常基本的操作，如下所示：

```
double a=21/5;
System.out.println(a); 
```

但是，每次我得到`4.0`作为输出而不是`4.2`. 我是第一次遇到这种情况。我已经使用 Java 多年，但从未遇到过这种晦涩难懂的问题。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-01T16:24:11.630

您正在使用整数除法，其结果将始终为整数您应该使用这样的东西。

```
double a=(double)21/5; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-01T16:25:03.157

你正在做整数除法......

尝试：

```
double a = 21.0/5; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T16:24:34.690

强制除法或将参数之一指定为小数以强制返回为双精度：

```
double a = (double)21/5; 
```

-或者-

```
double a = 21.0/5; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-01T16:24:48.340

只需将其中一个数字加倍：

```
double a = 21/5.0; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-01T16:25:30.253

强制演员加倍。 `double a = 21.0/5`

这称为算术提升。这意味着方程中的所有项都等于精度最高的变量类型。在这种情况下双倍。

# arrays - 字符串替换变量

> ID：15162207
> 
> 赞同：0
> 
> 时间：2013-03-01T16:23:09.070
> 
> 标签：arrays, parsing, powershell, powershell-2.0

我有以下有效的脚本，我正在尝试以更有效的方式重写。下面的代码行工作并完成我想要的：

```
Get-Content "C:\Documents and Settings\a411882\My Documents\Scripts\printserveroutput.txt" | Select-String -SimpleMatch -AllMatches -Pattern "/GPR" | % {
    $_.Line -replace '(?:.*)(/GPR)(?:.*)(?<=on\s)(\w+)(?:.*)', '$1,$2'
}

Get-Content "C:\Documents and Settings\a411882\My Documents\Scripts\printserveroutput.txt" | Select-String -SimpleMatch -AllMatches -Pattern "DV6" | % {
    $_.Line -replace '(?:.*)(DV6)(?:.*)(?<=on\s)(\w+)(?:.*)', '$1,$2'
} 
```

我重复相同的代码行七次，稍微改变了我正在寻找的内容。我得到的输出如下，这是我想要的（注意：这只是一个小输出）：

```
/GPR,R3556
/GPR,R3556 
```

虽然这可行，但我真的不喜欢代码有多么混乱，我决定尝试以更有效的方法重新编写它。我已经重新编写了这样的代码：

```
$My_Arr = "/GPR", "DV6", "DV7", "RT3", "DEV", "TST", "PRE"
$low = $My_Arr.getlowerbound(0)
$upper = $My_Arr.getupperbound(0)
for ($temp=$low; $temp -le $upper; $temp++){
    $Test = $My_Arr[$Temp]
    Get-Content "C:\Documents and Settings\a411882\My Documents\Scripts\printserveroutput.txt" | Select-String -SimpleMatch -AllMatches -Pattern $My_Arr[$temp] | % {
    $_.Line -replace '(?:.*)($Test)(?:.*)(?<=on\s)(\w+)(?:.*)', '$1,$2'
    }
} 
```

这给我的输出如下：

```
10         Document 81, A361058/GPR0000151814_1: owned by A361058 was printed on R3556 via port IP_***.***.***.***.  Size in bytes: 53704; pages printed: 2                                                                  20130219123105.000000-300  
10         Document 80, A361058/GPR0000151802_1: owned by A361058 was printed on R3556 via port IP_***.***.***.***.  Size in bytes: 53700; pages printed: 2                                                                  20130219123037.000000-300 
```

这几乎是正确的，但是 -replace 行是我的错误发生的地方，因为代码在到达 ($Test) 时需要一个字符串而不是变量。它会发布我每次在此示例中找到 /GPR 时解析的文本文件的整行，而不是上面显示的所需输出。有人知道修复这条线并获得与我使用的原始代码相同的输出的方法吗？

编辑：我现在使用更新的代码得到的输出也是我试图解析的 .txt 文件中的确切文本。.txt 中的行数比 .txt 中的要多，但在大多数情况下，它与 .txt 中的行数相同。我只关心在数组中获取 /GPR 或任何其他可能的字符串，然后是每次在单词“on”之后的服务器名称。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T18:20:44.150

我会说这是由简单的引号引起的，它可以防止变量扩展。PS 正在尝试替换确切的字符串`'(?:.*)($Test)(?:.*)(?<=on\s)(\w+)(?:.*)'`，而不用 $test 变量的值替换它。尝试用引号替换它们，但在第二个字符串上保留简单的引号，如下所示：

```
Get-Content "C:\Documents and Settings\a411882\My Documents\Scripts\printserveroutput.txt" | Select-String -SimpleMatch -AllMatches -Pattern $My_Arr[$temp] | % {
    $_.Line -replace "(?:.*)($Test)(?:.*)(?<=on\s)(\w+)(?:.*)", '$1,$2' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T17:02:35.347

这对您的数据有效吗？

```
$file = 'C:\Documents and Settings\a411882\My Documents\Scripts\printserveroutput.txt'
$regex = '(?:.*)(/GPR|DV6|DV7|RT3|DEV|TST|PRE)(?:.*)(?<=on\s)(\w+)(?:.*)'
(Get-Content $file) -match $regex -replace $regex,'$1,$2' 
```

# jsf-2 - 提交命令按钮后出现 NullPointerException 异常（JSF 2.1）

> ID：15162208
> 
> 赞同：1
> 
> 时间：2013-03-01T16:23:16.753
> 
> 标签：jsf-2, facelets

当我单击 commonButton 提交页面时，我收到 NullPointerException：

```
SEVERE: javax.servlet.ServletException
at javax.faces.webapp.FacesServlet.service(FacesServlet.java:606)
at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1550)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:343)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:217)
at ca.bc.gov.hlth.template.filter.ProcessFilter.doFilter(ProcessFilter.java:125)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:256)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:217)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:279)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655)
at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:161)
at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:331)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:231)
at com.sun.enterprise.v3.services.impl.ContainerMapper$AdapterCallable.call(ContainerMapper.java:317)
at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:860)
at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:757)
at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1056)
at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:229)
at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
at java.lang.Thread.run(Thread.java:662)
Caused by: java.lang.NullPointerException
at javax.faces.component.UIComponentBase.getRenderer(UIComponentBase.java:1402)
at javax.faces.component.UIComponentBase.decode(UIComponentBase.java:785)
at javax.faces.component.UIComponentBase.processDecodes(UIComponentBase.java:1181)
at javax.faces.component.UIComponentBase.processDecodes(UIComponentBase.java:1176)
at javax.faces.component.UIComponentBase.processDecodes(UIComponentBase.java:1176)
at javax.faces.component.UIViewRoot.processDecodes(UIViewRoot.java:933)
at com.sun.faces.extensions.avatar.components.PartialTraversalViewRootImpl.processDecodes(PartialTraversalViewRootImpl.java:147)
at com.sun.faces.lifecycle.ApplyRequestValuesPhase.execute(ApplyRequestValuesPhase.java:78)
at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:118)
at javax.faces.webapp.FacesServlet.service(FacesServlet.java:593)
... 29 more 
```

网页.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app version="3.0" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd">
    <display-name>SSD</display-name>
    <context-param>
        <param-name>org.richfaces.skin</param-name>
        <param-value>CUSTOM</param-value>
    </context-param>
    <context-param>
    <param-name>org.richfaces.enableControlSkinning</param-name>
    <param-value>true</param-value>
    </context-param>
    <context-param>
        <param-name>org.richfaces.push.jms.enabled</param-name>
        <param-value>true</param-value>
    </context-param>
    <context-param>
        <param-name>javax.faces.STATE_SAVING_METHOD</param-name>
        <param-value>client</param-value>
    </context-param>
    <context-param>
        <param-name>com.sun.faces.validateXml</param-name>
        <param-value>false</param-value>
    </context-param>
    <context-param>
        <param-name>com.sun.faces.verifyObjects</param-name>
        <param-value>false</param-value>
    </context-param>
    <context-param>
        <param-name>com.sun.faces.expressionFactory</param-name>
        <param-value>com.sun.el.ExpressionFactoryImpl</param-value>
    </context-param>
    <servlet>
        <servlet-name>ExceptionHandlerServlet</servlet-name>
        <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
        <init-param>
            <param-name>errorHost</param-name>
            <param-value>localhost</param-value>
        </init-param>
        <init-param>
            <param-name>errorPort</param-name>
            <param-value>24444</param-value>
        </init-param>
    </servlet>
    <servlet>
        <servlet-name>JsonSearch</servlet-name>
        <servlet-class>ca.bc.gov.hlth.swt.map.JsonSearchServlet</servlet-class>
    </servlet>
    <servlet-mapping>
        <servlet-name>JsonSearch</servlet-name>
        <url-pattern>*.json</url-pattern>
    </servlet-mapping>
    <servlet>
        <servlet-name>Faces Servlet</servlet-name>
        <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>
    <servlet-mapping>
        <servlet-name>Faces Servlet</servlet-name>
        <url-pattern>/faces/*</url-pattern>
    </servlet-mapping>
    <filter>
        <filter-name>ProcessFilter</filter-name>
        <filter-class>ca.bc.gov.hlth.template.filter.ProcessFilter</filter-class>
        <init-param>
            <param-name>error-page</param-name>
            <param-value>/faces/Error.xhtml</param-value>
        </init-param>
    </filter>
    <filter-mapping>
        <filter-name>ProcessFilter</filter-name>
        <servlet-name>Faces Servlet</servlet-name>
        <dispatcher>REQUEST</dispatcher>
    </filter-mapping>
    <listener>
        <listener-class>com.sun.faces.config.ConfigureListener</listener-class>
    </listener>
    <listener>
        <listener-class>ca.bc.gov.hlth.swt.util.StartupListener</listener-class>
    </listener>
    <session-config>
        <session-timeout>
            30
        </session-timeout>
    </session-config>
    <welcome-file-list>
        <welcome-file>faces/Home.xhtml</welcome-file>
    </welcome-file-list>
    <error-page>
        <error-code>403</error-code>
        <location>/faces/AccessDenied.xhtml</location>
    </error-page>
    <error-page>
        <error-code>500</error-code>
        <location>/faces/Error.xhtml</location>
    </error-page>
    <jsp-config>
        <jsp-property-group>
            <url-pattern>*.jspf</url-pattern>
        </jsp-property-group>
    </jsp-config>
</web-app> 
```

这是我的 faces-config.xml：

```
<?xml version='1.0' encoding='UTF-8'?>

<!-- =========== FULL CONFIGURATION FILE ================================== -->

<faces-config version="2.1" 
    xmlns="http://java.sun.com/xml/ns/javaee" 
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-facesconfig_2_1.xsd">
  <faces-config-extension>
    <facelets-processing>
      <file-extension>.jspx</file-extension>
      <process-as>jspx</process-as>
    </facelets-processing>
  </faces-config-extension>

   <managed-bean>
        <managed-bean-name>Map</managed-bean-name>
        <managed-bean-class>swtwar.Map</managed-bean-class>
        <managed-bean-scope>session</managed-bean-scope>
    </managed-bean>
    <managed-bean>
        <managed-bean-name>Search</managed-bean-name>
        <managed-bean-class>swtwar.Search</managed-bean-class>
        <managed-bean-scope>session</managed-bean-scope>
    </managed-bean>
    <managed-bean>
        <managed-bean-name>Home</managed-bean-name>
        <managed-bean-class>swtwar.Home</managed-bean-class>
        <managed-bean-scope>session</managed-bean-scope>
    </managed-bean>
    <managed-bean>
        <managed-bean-name>LayoutWide</managed-bean-name>
        <managed-bean-class>swtwar.LayoutWide</managed-bean-class>
        <managed-bean-scope>session</managed-bean-scope>
    </managed-bean>
    <managed-bean>
        <managed-bean-name>Tester</managed-bean-name>
        <managed-bean-class>swtwar.Tester</managed-bean-class>
        <managed-bean-scope>session</managed-bean-scope>
    </managed-bean>
    <navigation-rule> 
```

这是我用于 CommondButton 的代码；#{Home.search} 返回“搜索”：查看纯副本到剪贴板打印？注意：代码块中的文本内容会自动换行

```
<h:commandButton onclick="document.getElementById('form1:procedureFilter').value='';" action="#{Home.search}" value="Select Search Criteria" /> 
```

Home.xhtml 和 Search.xhtml(home.xhtml --> Search.xhtml) 都在同一个文件夹中。我还发现 glassfish 3.1 出现以下错误：view plaincopy to clipboardprint? 注意：代码块中的文本内容会自动换行

```
SEVERE: Application was not properly initialized at startup, could not find Factory: javax.faces.application.ApplicationFactory. Attempting to find backup. 
```

有什么帮助吗？

谢谢

预兆

更新：经过一些工作后，我发现我实际上是从 ManagedBean 获得 NullPointerException ：

```
WARNING: #{Home.search}: java.lang.NullPointerException
javax.faces.FacesException: #{Home.search}: java.lang.NullPointerException
    at com.sun.faces.application.ActionListenerImpl.processAction(ActionListenerImpl.java:118)
    at javax.faces.component.UICommand.broadcast(UICommand.java:315)
    at javax.faces.component.UIViewRoot.broadcastEvents(UIViewRoot.java:794)
    at javax.faces.component.UIViewRoot.processApplication(UIViewRoot.java:1259)
    at com.sun.faces.lifecycle.InvokeApplicationPhase.execute(InvokeApplicationPhase.java:81)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
    at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:118)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:593)
    at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1550)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:343)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:217)
    at ca.bc.gov.hlth.template.filter.ProcessFilter.doFilter(ProcessFilter.java:125)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:256)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:217)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:279)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
    at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655)
    at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:161)
    at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:331)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:231)
    at com.sun.enterprise.v3.services.impl.ContainerMapper$AdapterCallable.call(ContainerMapper.java:317)
    at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
    at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:860)
    at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:757)
    at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1056)
    at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:229)
    at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
    at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
    at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
    at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
    at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
    at java.lang.Thread.run(Thread.java:662)
Caused by: javax.faces.el.EvaluationException: java.lang.NullPointerException
    at javax.faces.component.MethodBindingMethodExpressionAdapter.invoke(MethodBindingMethodExpressionAdapter.java:102)
    at com.sun.faces.application.ActionListenerImpl.processAction(ActionListenerImpl.java:102)
    ... 36 more
Caused by: java.lang.NullPointerException
    at swtwar.Home.search(Home.java:87)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at com.sun.el.parser.AstValue.invoke(AstValue.java:254)
    at com.sun.el.MethodExpressionImpl.invoke(MethodExpressionImpl.java:302)
    at com.sun.faces.facelets.el.TagMethodExpression.invoke(TagMethodExpression.java:105)
    at javax.faces.component.MethodBindingMethodExpressionAdapter.invoke(MethodBindingMethodExpressionAdapter.java:88)
    ... 37 more

INFO: HP_excptn:javax.servlet.ServletException: java.lang.NullPointerException: java.lang.NullPointerException
SEVERE: javax.servlet.ServletException: java.lang.NullPointerException
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:606)
    at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1550)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:343)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:217)
    at ca.bc.gov.hlth.template.filter.ProcessFilter.doFilter(ProcessFilter.java:125)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:256)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:217)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:279)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
    at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655)
    at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:161)
    at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:331)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:231)
    at com.sun.enterprise.v3.services.impl.ContainerMapper$AdapterCallable.call(ContainerMapper.java:317)
    at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
    at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:860)
    at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:757)
    at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1056)
    at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:229)
    at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
    at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
    at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
    at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
    at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
    at java.lang.Thread.run(Thread.java:662)
Caused by: javax.faces.el.EvaluationException: java.lang.NullPointerException
    at javax.faces.component.MethodBindingMethodExpressionAdapter.invoke(MethodBindingMethodExpressionAdapter.java:102)
    at com.sun.faces.application.ActionListenerImpl.processAction(ActionListenerImpl.java:102)
    at javax.faces.component.UICommand.broadcast(UICommand.java:315)
    at javax.faces.component.UIViewRoot.broadcastEvents(UIViewRoot.java:794)
    at javax.faces.component.UIViewRoot.processApplication(UIViewRoot.java:1259)
    at com.sun.faces.lifecycle.InvokeApplicationPhase.execute(InvokeApplicationPhase.java:81)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
    at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:118)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:593)
    ... 29 more
Caused by: java.lang.NullPointerException
    at swtwar.Home.search(Home.java:87)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at com.sun.el.parser.AstValue.invoke(AstValue.java:254)
    at com.sun.el.MethodExpressionImpl.invoke(MethodExpressionImpl.java:302)
    at com.sun.faces.facelets.el.TagMethodExpression.invoke(TagMethodExpression.java:105)
    at javax.faces.component.MethodBindingMethodExpressionAdapter.invoke(MethodBindingMethodExpressionAdapter.java:88)
    ... 37 more 
```

这里 Home.Search 指向：

```
@ManagedProperty(value = "#{Search}")
private Search search;
@ManagedProperty(value = "#{Tester}")
private Tester tester;

public Home() {
}

public Search getSearch(){
    return this.search;
}

public void setSearch(Search search){
    this.search = search;
}
public String search() {
    if (siteId == null) {
        init();
    }

    tester.testing();
    return "tester";
} 
```

并且 tester 指向 Tester.xhtml 并且 testing() 是它的 bean 类的测试过程：

```
 @ManagedBean
    public class Tester implements Serializable
   {
    public Tester(){
    }

    @PostConstruct
    public void testing(){
    System.out.println("HP_Tester_Testing.....");
    }
   } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-08-24T10:23:34.857

对于我的案例（TomEE plus 1.7.2、JSF 2.2、MyFaces 2.1.17 和 Eclipse Luna）f:ajax 需要一个渲染工具包来完成相关组件的刷新。

我的 stackTrace 中有这个错误：

```
java.lang.NullPointerException
javax.faces.component.UIComponentBase.getRenderer(UIComponentBase.java:1304)
... 
```

和你的类似

```
Caused by: java.lang.NullPointerException
at javax.faces.component.UIComponentBase.getRenderer(UIComponentBase.java:1402)
... 
```

我通过在 faces config 中添加渲染套件声明并将相关库添加到项目中解决了这个问题。当然，对于其他实现，库可能会有所不同。

```
<application>
 <default-render-kit-id>org.apache.myfaces.trinidad.core</default-render-kit-id>
</application> 
```

**特立尼达图书馆：**

特立尼达-api-2.0.1.jar

特立尼达-impl-2.0.1.jar

# javascript - Highcharts堆积条形图：将类别和数据添加到系列

> ID：15162214
> 
> 赞同：0
> 
> 时间：2013-03-01T16:23:36.027
> 
> 标签：javascript

我有以下堆积条形图： http: [//jsfiddle.net/bvuWR/1/](http://jsfiddle.net/bvuWR/1/) 我有问题，我可以通过哪种方式添加一个类别，我可以为该附加类别添加系列数据？我试图在 Highstock 文档中找到添加类别的功能，但除了 addPoint 之外没有找到任何合适的功能。

```
[1]: http://jsfiddle.net/bvuWR/1/ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T16:47:54.903

您必须做两件事来更新类别：

1：使用 setCategories() 方法将下一个类别附加到列表中 - 在示例中，我将 Lemon 类别添加到原始列表中。不幸的是，我似乎不能只添加一个类别，而只能一次设置整个列表。

2：使用 addPoint() 将每个系列对象更新为 Lemon 类别值的一个点

```
chart.xAxis[0].setCategories(['Apples', 'Oranges', 'Pears', 'Grapes', 'Bananas', 'Lemon']);

for (var i = 0; i < chart.series.length; i++)
{
   chart.series[i].addPoint(Math.random() * 5, true, true);
} 
```

在 jsfiddle 上查看这个示例。

[http://jsfiddle.net/bvuWR/106/](http://jsfiddle.net/bvuWR/106/)

这是上述的官方highcharts参考：

[http://api.highcharts.com/highcharts#Axis.setCategories()](http://api.highcharts.com/highcharts#Axis.setCategories())

[http://api.highcharts.com/highcharts#Series.addPoint()](http://api.highcharts.com/highcharts#Series.addPoint())

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T16:31:26.130

这个问题似乎已经在之前的帖子中得到了回答：

[使用 HighCharts 股票图表动态添加系列](https://stackoverflow.com/questions/7675496/adding-a-series-dynamically-with-highcharts-stock-charts)

另外：我通过在响应式设计中添加/删除系列数据来演示高图表。查看 chart.js javascript 以查看它是如何组合在一起的。

[http://www.informed-design.com/responsive/chart/](http://www.informed-design.com/responsive/chart/)

# c++ - Boost.Python - 如何重新进入模块范围？

> ID：15162215
> 
> 赞同：1
> 
> 时间：2013-03-01T16:23:40.847
> 
> 标签：c++, python, scope, boost-python

我将一些 C++ 类暴露给嵌套了`enum`'s 的 Python。[查看boost.org](http://www.boost.org/doc/libs/1_48_0/libs/python/doc/tutorial/doc/html/python/object.html)和[wiki.python.org](http://wiki.python.org/moin/boost.python/module)上的示例文档，我看不到如何在输入范围后离开范围，以便返回到全局/模块范围。相反，每个后续范围都嵌套在前一个范围内。

举个例子：

```
#include <boost/python.hpp>

class Foo
{
public:
    enum Choose { eFoo, eBar };

    /* Default constructor with enum as required argument */
    Foo(Choose choice): m_choice(choice) {}
    ~Foo() {}

    Choose get() const { return m_choice; }

private:
    const Choose m_choice;

};

class Bar
{
};

BOOST_PYTHON_MODULE(foo)
{
    using namespace boost::python;
    scope global;

    /* Define Foo class, and a scope to go with it. */
    scope in_Foo = class_<Foo>
        ("Foo", init<Foo::Choose>())
        .def("rovalue", &Foo::get)
        ;

    /* Expose 'Choose' enum as Foo.Choose */
    enum_<Foo::Choose>("Choose")
        .value("Foo", Foo::eFoo)
        .value("Bar", Foo::eBar)
        ;

    /* How to get back to module scope??  */
    global;
    scope();

    /* This currently is exposed as Foo.Bar, but should just be Bar */
    class_<Bar>("Bar", init<>())
        ;
} 
```

我已经尝试将该`global;`行更改为各种内容，但结果都相同：

```
$ g++ -fPIC -shared scope.cpp -o foo.so -lpython2.7 -I/usr/include/python2.7 -lboost_python
$ python -c 'import foo; print "Bar" in dir(foo)'
False
$ python -c 'import foo; print "Bar" in dir(foo.Foo)'
True 
```

**编辑：**

再次查看 wiki.python.org，似乎在上面的示例中，正确的答案是使用`scope within(global)`恢复到模块级范围。实际上，这适用于上述示例。然而不幸的是，当我在实际应用程序中使用它时出现编译错误。

```
#include <boost/python.hpp>
using namespace boost;
BOOST_PYTHON_MODULE(foo)
{
    python::scope module_level;
    /* .... */
    python::scope python::within(module_level);
    /* ... */
} 
```

编译错误：

```
error: invalid use of qualified-name 'boost::python::within' 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-01T23:36:31.287

具有讽刺意味的是，这可能太聪明了，这可以使用 C++ 范围来完成。该[`boost::python::scope`](http://www.boost.org/doc/libs/1_53_0/libs/python/doc/v2/scope.html#scope-spec)文档指出，当`scope`对象的生命周期结束时，当前范围会恢复到构造对象之前的`scope`状态。

```
BOOST_PYTHON_MODULE(foo)              // set scope to foo
{
  using namespace boost::python;
  {
    scope in_Foo = class_<Foo>        // define foo.Foo and set scope to foo.Foo
        ("Foo", init<Foo::Choose>())
        .def("rovalue", &Foo::get)
        ;

    enum_<Foo::Choose>("Choose")     // define foo.Foo.Choose
        .value("Foo", Foo::eFoo)
        .value("Bar", Foo::eBar)
        ;
  }                                  // revert scope, setting scope to foo

  class_<Bar>("Bar", init<>())       // define foo.Bar
      ;
} 
```

虽然`scope`可以通过其他方式管理对象的生命周期，但我发现`scope`在 C++ 范围内使用对象作为自动变量为 C++ 命名空间提供了一些并行性。

# silverlight - 防止 Silverlight 插件挂起浏览器

> ID：15162216
> 
> 赞同：0
> 
> 时间：2013-03-01T16:23:46.177
> 
> 标签：silverlight, loops

在 Silverlight 中，无限递归可能会挂起整个浏览器。

```
public void SomeMethod()
{
    RecursingMethod1();
}

public void RecursingMethod1()
{
    ...
    RecursingMethod2();
    ...
}

public void RecursingMethod2()
{
    ...
    RecursingMethod1();
    ...
} 
```

调用`SomeMethod()`会导致无限递归循环。在 .net 框架中，您将获得`System.StackOverflowException`. 在 Silverlight 中，它只是挂起浏览器（例如，带有 silverlight 插件的选项卡无法关闭，您无法切换到另一个选项卡，剩下的唯一选项就是杀死浏览器）。谷歌浏览器中的沙盒在这种情况下没有帮助。

典型的情况是从事件处理程序调用事件。

有什么方法可以让 Silverlight throw`System.StackOverflowException`吗？

## 编辑 1

对于简单的 resursion 插件/浏览器将崩溃。

如果从事件处理程序调用事件，浏览器会挂起。在这种情况下似乎没有*真正的*递归，只是吞噬插件/浏览器资源的无限循环。它永远不会抛出异常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T19:51:01.717

Silverlight 插件会抛出 StackOverflowException，耐心等待它最终会出现。

# c# - Linq 查询返回 1 项而不是全部

> ID：15162226
> 
> 赞同：0
> 
> 时间：2013-03-01T16:24:33.677
> 
> 标签：c#, asp.net, linq

我正在使用下面的查询来获取所有具有 a 的记录，`SubCategoryName == subCatName`并且我想将所有的记录`ProductID`作为`ints`. 问题是当我的代码运行时它只返回 1 个 int(record) 而不是全部。我怎样才能让它返回所有具有该 subCatName 的记录？它返回一个计数 = 1，容量为 4。所以它是一个`int[4]`但只有第一个 [0] 是 = 实际产品 ID 其余返回零？

```
 public List<int> GetPRodSubCats(string subCatName)
    {
        var _db = new ProductContext();

        if (subCatName != null)
        {
            var  query = _db.ProductSubCat
                            .Where(x => x.SubCategory.SubCategoryName == subCatName)
                            .Select(p => p.ProductID);

            return query.ToList<int>();
        }
        return null;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T16:28:53.110

这似乎更像是这里的预期行为。你怎么知道你不仅有 1 条满足`Where`谓词的记录。

您的代码是正确的，但是您可能希望标准化您的比较。

`x => x.SubCategory.SubCategoryName == subCatName`

使用特定案例，例如：

`x => x.SubCategory.SubCategoryName.ToLower() == subCatName.ToLower()`

你也可以考虑修剪。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T16:31:42.733

正如丹尼尔已经提到的那样，代码应该可以工作。但也许您期望它不区分大小写或忽略空格。所以这更宽容：

```
subCatName = subCatName.Trim();
List<int> productIDs = _db.ProductSubCat
     .Where(x => String.Equals(x.SubCategory.SubCategoryName.Trim(), subCatName, StringComparison.OrdinalIgnoreCase))
     .Select(p => p.ProductID)
     .ToList(); 
```

# mobile - PhoneGap 或 Appcelerator 实现

> ID：15162228
> 
> 赞同：1
> 
> 时间：2013-03-01T16:24:38.113
> 
> 标签：mobile, titanium, appcelerator

这更像是一个建议问题，而不是一个具体问题。我正在为移动设备开发应用程序。它的基本功能是打开 PDF 文件、视频文件和打开某些网页。这最好在 PhoneGap 或 Appcelerator 中实现吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-01T16:35:50.990

PhoneGap 和 Appcelerator Titanium 都是非常流行的开源 JavaScript 框架，用于打包和部署移动应用程序。在 Universal Mind，我们的客户同时利用了这两种框架，显然这两种框架在众多平台上都有无数成功的实现。但是，这两种产品之间存在足够显着的差异，因此直接比较它们并没有太大意义。根本区别在于，PhoneGap 是一个基于 Web 的解决方案，而 Appcelerator Titanium 是一个创建本机代码的纯 JavaScript API。在核心，它们为组织提供不同的功能。

**电话间隙：**

*   提供对本机函数的访问的 JavaScript API

*   支持 HTML5/CSS3

*   支持 Web 标准和跨企业应用程序重用

*   支持基于 DOM 的 JavaScript 库/框架

*   支持大多数平台

**加速器钛：**

*   提供对本机函数的访问的 JavaScript API

*   编译为本机代码

*   可以提供更好的性能。

所以根据我的观点，我更喜欢**Phonegap**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T17:12:24.750

我认为一个关键的区别在于 PhoneGap 使用 HTML 和 CSS 来呈现用户界面，而 Appcelerator 呈现特定于平台的本机用户界面组件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-25T09:22:56.157

Phonegap 有非常小的 api 列表，使其能够适应所有（部分）平台，而 appcelerator 有更大的 api。这就是为什么仅在两个平台上（完全）强调它们的原因。我认为有了这种理解，我更喜欢复杂应用程序的 appcelerator 和多平台的 phonegap。

# html - 如何让 div 瓷砖正确浮动而没有间隙

> ID：15162244
> 
> 赞同：2
> 
> 时间：2013-03-01T16:25:31.303
> 
> 标签：html, css, css-float

在我的网页中，我有一些瓷砖。我想在两列中显示瓷砖。在前两个瓷砖之后，接下来的两个瓷砖应该在它的正下方。由于高度是可变的，我无法让它正常工作。

这是我到目前为止得到的。

HTML：

```
<div class = "content" style="color:Red"> 
    <p> hi</p>
    <p> hi</p>
    <p> hi</p>
    <p> hi</p>
    <p> hi</p>
    <p> hi</p>
</div>
<div class = "content" style="color:green"> 
    <p> hi</p>
    <p> hi</p>
    <p> hi</p>
</div>
<div class = "content" style="color:black"> 
    <p> hi</p>
    <p> hi</p>
    <p> hi</p>
    <p> hi</p>
</div>
<div class = "content" style="color:blue"> 
    <p> hi</p>
    <p> hi</p>
    <p> hi</p>
    <p> hi</p>
    <p> hi</p>
    <p> hi</p>
</div> 
```

CSS：

```
.content {
    border: solid 1px #C8C8C8;
    -moz-border-radius: 25px; 
    width :45%;
    height : auto;
    float:left;
    margin-left: 10px;
    margin-top:20px;
    box-shadow: 3px 3px 3px 0px #C8C8C8;
    cursor:pointer;
 } 
```

[http://jsfiddle.net/yKuBr/](http://jsfiddle.net/yKuBr/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T16:33:48.980

您可以添加一个clearfix。`div`清除所有浮动并重新开始流程的元素。

[http://jsfiddle.net/yKuBr/2/](http://jsfiddle.net/yKuBr/2/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T16:31:09.050

不确定我是否理解您的问题，但您可能想在奇数瓷砖和`clear:left`. 我更新了你的[**小提琴**](http://jsfiddle.net/yKuBr/1/)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-01T16:35:23.890

如果您要使用可变大小的容器创建某种平铺，我强烈建议您使用一个名为[Isotope的出色 jQuery 插件](http://isotope.metafizzy.co/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-01T16:39:53.323

删除**float:left**并添加**display:inline-block**

希望能帮助到你！！

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-01T16:47:25.020

我认为您正在寻找的是`inline-block`：

HTML

```
<div class = "content ib" style="color:Red"> 
    <p> hi</p>
    <p> hi</p>
    <p> hi</p>
    <p> hi</p>
    <p> hi</p>
    <p> hi</p>
</div>
<div class = "content ib" style="color:green"> 
    <p> hi</p>
    <p> hi</p>
    <p> hi</p>
</div> 
```

等等等等然后在你的CSS中：

```
.ib {
    float:none;
    display:-moz-inline-stack;
    display:inline-block;
    vertical-align:top;
} 
```

你可以[在这里](http://jsfiddle.net/ultranaut/Us6vE/)看到你的小提琴的修改版本。

如果需要支持 IE6 或 7，可以`hasLayout`通过设置`zoom`. 如果您想了解更多有关它的信息，请[参阅 Robert Nyman](http://robertnyman.com/2010/02/24/css-display-inline-block-why-it-rocks-and-why-it-sucks/)的一篇很好的文章。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-01T16:47:55.123

这可以通过[CSS](https://developer.mozilla.org/en-US/docs/CSS/columns)列实现，尽管[浏览器支持](http://caniuse.com/#feat=multicolumn)有限（即 IE 直到 IE10 才支持 IE）。请参阅下面的[**演示**](http://jsfiddle.net/JDCD4/)或代码。

CSS

```
.content {
    border: solid 1px #C8C8C8;
    -moz-border-radius: 25px; 
    margin-left: 10px;
    margin-bottom:20px;
    box-shadow: 3px 3px 3px 0px #C8C8C8;
    cursor:pointer;
    display:block;
    width:95%
}

.cols {
    -webkit-column-count:2;
    -webkit-column-gap:10px;
    -moz-column-count: 2;
    -moz-column-gap: 10px;
} 
```

HTML

```
<div class="cols">
    <div class="content" style="color:Red"></div>
    <div class="content" style="color:green"></div>
    <div class="content" style="color:black"></div>
    <div class="content" style="color:blue"></div>
</div> 
```

# c# - 在 Mono Droid 中创建数组并将其作为参数传递给 JNI

> ID：15162245
> 
> 赞同：0
> 
> 时间：2013-03-01T16:25:37.583
> 
> 标签：c#, android, arrays, mono, java-native-interface

在一个单声道机器人项目中，我有一个 .java 文件，其中定义了以下类：

```
class A
{
    String str;
    String[] arr;

    public A(string str, string[] arr) 
    {
        this.str = str;
        this.arr = arr;
    }
} 
```

以及`foo(A[])`需要使用 JNI 环境从 C# 调用的方法。

在 C# 文件中，我有一个 C# 类的相应镜像定义

```
class B
{
    string str;
    string[] arr;
    ...
} 
```

在一段 C# 代码中，我准备了`B[]`数组，现在想要将所有对象复制到一个新数组中，然后将其传递给该方法。为此，我编写了一个`B.ConvertArrayToJValue`返回`JValue`.

```
public class B
{
    string str;
    string[] arr;

    public B(string str, string[] arr) 
    {
        this.str = str;
        this.arr = arr;
    }

    public JValue ToJavaObject()
    {
        IntPtr classA = JNIEnv.FindClass("com/packagename/A");
        IntPtr method_ctor = JNIEnv.GetMethodID(classA, "<init>", "(Ljava/lang/String;[Ljava/lang/String;)V");
        Java.Lang.String.[] tempValues = new Java.Lang.String[this.arr.Length];
        for (int i = 0; i < this.arr.Length; ++i)
        {
            tempValues[i] = new Java.Lang.String(this.arr[i]);
        }

        JValue strArray = new JValue(Java.Lang.Object.FromArray<Java.Lang.String>(tempValues));
        IntPtr result = JNIEnv.NewObject(classA, method_ctor, new JValue[]{new JValue(new Java.Lang.String(this.str)), strArray});
        return new JValue(new Java.Lang.Object(result, JniHandleOwnership.DoNotTransfer));
    }

    public static JValue ConvertArrayToJValue(B[] arr)
    {
        JValue[] tempCopy = new JValue[arr.Length];
        for (int i = 0; i < arr.Length; ++i)
        {
            tempCopy[i] = arr[i].ToJavaObject();
        }
        //FIXME: doesn't properly convert arrays! 
        // Compiles but throws an exception in runtime: "Can't convert JValue to IJavaObject"
        return new JValue(Java.Lang.Object.FromArray<JValue>(tempCopy));
    }

} 
```

以及 C# 代码中的其他地方：

```
b[] = new B[]{ ... };

IntPtr method_foo = JNIEnv.GetStaticMethodID(classC, "foo", "([Lcom/packagename/A;)V");
JNIEnv.CallStaticVoidMethod(classC, method_foo, new JValue[] { B.ConvertArrayToJValue(b) }); 
```

这行不通。字符串数组似乎已正确生成（至少看起来 C# 字符串已转换为 Java Strings (?) ）但是当我尝试创建自定义对象类型的数组时`B`出现错误：

```
Can't convert JValue to IJavaObject 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T23:32:07.767

为什么将返回值包装在`JValue`结构中？

我相信简单地`IJavaObject`从方法返回`ToJavaObject`应该可行。

那是：

```
public IJavaObject ToJavaObject()
{
    // Snip
    return new Java.Lang.Object(result, JniHandleOwnership.DoNotTransfer);
}

public static IJavaObject ConvertArrayToJavaObject(B[] arr)
{
    // Snip
    return Java.Lang.Object.FromArray<IJavaObject>(tempCopy);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T13:29:39.987

我从一位 Xamarin 开发人员那里得到了以下工作解决方案。它实际上有助于理解 JNI 的工作原理：

[http://forums.xamarin.com/discussion/1930/creating-arrays-of-custom-java-objects-in-jni](http://forums.xamarin.com/discussion/1930/creating-arrays-of-custom-java-objects-in-jni)

# c# - 字典：已添加具有相同键的项目

> ID：15162247
> 
> 赞同：2
> 
> 时间：2013-03-01T16:25:41.263
> 
> 标签：c#, asp.net-mvc, dictionary

在我的 MVC 应用程序中，我使用 2 个字典为 DropDownList 填充 SelectList。这些字典将提供日期作为字符串和日期时间值。

我有第一本可以正常工作的字典的这段代码：

```
if (m_DictDateOrder.Count == 0)
{
     m_DictDateOrder = new Dictionary<string, DateTime>();
     m_DictDateOrder =
          m_OrderManager.ListOrders()
                        .OrderBy(x => x.m_OrderDate)
                        .Distinct()
                        .ToDictionary(x => x.m_OrderDate.ToString(), x => x.m_OrderDate);
} 
```

但是当我读到第二本词典时：

```
if (m_DictDateShipped.Count == 0)
{
     m_DictDateShipped = new Dictionary<string, DateTime>();
     m_DictDateShipped = 
          m_OrderManager.ListOrders()
                        .OrderBy(x => x.m_ShippedDate)
                        .Distinct()
                        .ToDictionary(x => x.m_ShippedDate.ToString(), x => x.m_ShippedDate);
} 
```

我对第二个字典的 LINQ 请求出现运行时错误：

```
An item with the same key has already been added. 
```

我首先添加以实例化一个新字典（这就是“新”存在的原因），但不是。我做错什么了？

非常感谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-01T16:30:56.523

您区分的是行，而不是日期。

改为这样做：

```
if (m_DictDateShipped.Count == 0)
{
     m_DictDateShipped = m_OrderManager.ListOrders()
        //make the subject of the query into the thing we want Distinct'd.
        .Select(x => x.m_ShippedDate) 
        .Distinct()
        .ToDictionary(d => d.ToString(), d => d);
} 
```

不要打扰排序。字典是无序的。

* * *

我对此的标准模式（因为我不屑于 Distinct）是：

```
dictionary = source
  .GroupBy(row => row.KeyProperty)
  .ToDictionary(g => g.Key, g => g.First()); //choose an element of the group as the value. 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-01T16:28:22.107

您将 Distinct 应用于订单，而不是日期。尝试

```
m_OrderManager.ListOrders()
                        .OrderBy(x => x.m_ShippedDate)
                        .Select(x =>x.m_ShippedDate)
                        .Distinct()
                        .ToDictionary(x => x.ToString(), x => x); 
```

# html - 在 IE7 上包含 TABLE 的 LI 底部的额外空间

> ID：15162253
> 
> 赞同：0
> 
> 时间：2013-03-01T16:26:01.023
> 
> 标签：html, css, internet-explorer, internet-explorer-7

在 IE7（或更高版本的 IE7 模式下的 Internet Explorer）上查看以下代码：

```
<!DOCTYPE html>
<html>
<head>
    <style>
        ol, li
        {
            margin: 0;
            padding: 0;
            list-style: none;
        }
        li
        {
            background: yellow;
        }
        li table
        {
            background: red;
            margin: 0;
            padding: 0;
            border: none;
        }
    </style>
</head>
<body>
    <ol>
        <li>
            <table cellpadding="0" cellspacing="0" border="0"><tr><td>test</td></tr></table>
        </li>
        <li>
            <table cellpadding="0" cellspacing="0" border="0"><tr><td>test</td></tr></table>
        </li>
    </ol>
</body>
</html> 
```

在每个 LI 的底部添加一个空格。知道为什么吗？你怎么能去掉那个多余的空间？

注意：我尝试使用 DIV`display:list-item`而不是 LI，我也可以通过这种方式重现问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T16:28:27.077

IE 习惯于在不应该的情况下呈现空白。更改此实例：

```
 </table>
</li> 
```

对此：

```
 </table></li> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T11:06:31.917

根据 Adrift 的回答，设置`vertical-align: bottom`LI即可解决问题`zoom: 1`，而不会出现 Adrift 解决方案可能产生的副作用。

事实上，我相信`zoom: 1`可以用任何赋予 LI 布局的属性替换，请参阅[MSDN](http://msdn.microsoft.com/en-us/library/ms533776.aspx)。

# jquery - 从 jquery 将参数发送到 MVC4 操作

> ID：15162254
> 
> 赞同：0
> 
> 时间：2013-03-01T16:26:07.167
> 
> 标签：jquery, asp.net-mvc-4, parameters, action

当我尝试将我的网站与 Firefox 和 chrome 一起使用时，我遇到了一个我没想到的异常......

```
The parameters dictionary contains a null entry for parameter 'page' of non-nullable type 'System.Int32' for method 'System.Web.Mvc.ActionResult EditEncounterReturnPage(Int32, Int32, Int32, Int32)' 
```

现在，同样的调用在 IE 9 中也可以正常工作……我实际上将把价值归结为我的行动，一点儿障碍都没有。

这是我用来发送参数的 jquery...

```
 ondblClickRow: function (id) {
                var pageInfo = $(this).jqGrid('getGridParam', 'page');
                var rowSZ = $(this).jqGrid('getGridParam', 'rowNum');
                debugger;
                var dummyURL = '@Url.Action("EditEncounterReturnPage", "EditEncounter", new { encounterId = "-2", popId = (int)TempData["POPULATIONID"], page = "-3", rowSize = "-4" })';
                dummyURL = dummyURL.replace("-2&amp;", id + "&");
                dummyURL = dummyURL.replace("-3&amp", pageInfo + "&");
                dummyURL = dummyURL.replace("-4&amp", rowSZ + "&");
                var path = dummyURL;
                window.location = path;                    
            } 
```

现在我在调用的操作中没有可为空的参数......

```
 public ActionResult EditEncounterReturnPage(int encounterId, int popId, int page, int rowSize) { ... 
```

我必须错过一些东西。我的参数设置不正确？

```
/EditEncounter/EditEncounterReturnPage?encounterId=1900&popId=2&amp;page=2&;rowSize=-4 
```

我想我可能知道它是什么......我在网址中有 2& 我也需要替换它......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T17:03:31.527

您的数据类型 int 的 page in 参数，并且您在双引号中传递 page = "-3" ，这告诉 jqgrid 它是字符串。您需要删除双引号并像下面一样传递-3，这应该可以

```
 ondblClickRow: function (id) {
            var pageInfo = $(this).jqGrid('getGridParam', 'page');
            var rowSZ = $(this).jqGrid('getGridParam', 'rowNum');
            debugger;
            var dummyURL = '@Url.Action("EditEncounterReturnPage", "EditEncounter", new { encounterId = "-2", popId = (int)TempData["POPULATIONID"], page = -3, rowSize = "-4" })';
            dummyURL = dummyURL.replace("-2&amp;", id + "&");
            dummyURL = dummyURL.replace("-3&amp", pageInfo + "&");
            dummyURL = dummyURL.replace("-4&amp", rowSZ + "&");
            var path = dummyURL;
            window.location = path;                    
        } 
```

# c++ - C++ - 使用类名作为函数参数

> ID：15162256
> 
> 赞同：0
> 
> 时间：2013-03-01T16:26:12.060
> 
> 标签：c++, class, function

假设我有一个名为 ItemOne、ItemTwo、ItemThree 和 ItemFour 的类的列表，它们都是 ItemBase 的子类。

我想在另一个名为 ItemGenerator 的类中有一个构造函数，它接受任何这些类的名称。我该怎么做？

```
ItemGenerator *someItem = new ItemGenerator(ItemThree); 
```

另一种选择是在其中一个类上传递一个静态函数，但同样，我不知道该怎么做。

```
ItemGenerator *someItem = new ItemGenerator(ItemOne::start()); 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T16:38:27.590

您可以使用模板：

```
struct ItemBase {virtual ~ItemBase();};
struct ItemOne : ItemBase {};
struct ItemTwo : ItemBase {};
struct ItemThree : ItemBase {};
struct ItemFour : ItemBase {};

struct ItemGeneratorBase {
    virtual unique_ptr<ItemBase> generate() {}
    virtual ~ItemGeneratorBase() {}
};
template<typename Item>
struct ItemGenerator : ItemGeneratorBase {
    virtual unique_ptr<ItemBase> generate() {
        return unique_ptr<ItemBase>(new Item());
    }
};

std::unique_ptr<ItemGeneratorBase> someItem(new ItemGenerator<ItemThree>()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T16:45:12.427

您真的要传递*名称*，即字符串吗？然后您必须为 Item*-classes 提供相应的功能，例如

```
class ItemOne {
  static std::string name();
};

ItemGenerator *someItem = new ItemGenerator(ItemThree::name()); 
```

或者您正在寻找模板？你有不同的可能性：制作一个类模板，可能从 ItemGenerator 基类派生：

```
class AbstractItemGenerator { /* ... */ };

template <class Item>
class ItemGenerator {
  ItemGenerator();
};

ItemGeneratorBase *someItem = new ItemGenerator<ItemTwo>(); 
```

或仅将构造函数模板化 - 您不能显式指定参数，因此使用参数推导：

```
//take 1: use pointers
class ItemGenerator {
  template <class Item>
  ItemGenerator(Item* dummy);
};

ItemGenerator *someItem = new ItemGenerator((ItemFour*)NULL);

//take 2: use a tag struct
template <class I>
struct ItemTag{};

class ItemGenerator {
  template <class Item>
  ItemGenerator(ItemTag<Item> tag);
};

ItemGenerator *someItem = new ItemGenerator(ItemTag<ItemOne>()); 
```

我不确定其中之一是否适合您的需求。也许详细说明你想用它做什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T16:42:59.137

As the other answers indicate, you can achieve using templates.

Just to offer another idea, you can pass a function pointer that creates an instance of whatever you want (or whatever it is you want to do with that class)

```
ItemGenerator(ItemClassPtr itemClassFn)
{
    void * myObject = itemClassFn();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-01T16:35:57.910

函数不能接受类名作为参数，因为类不是 C++ 中的对象。但是模板函数可以通过类名参数化。

像这样的东西：

```
template<class T> 
ItemGenerator* ItemGeneratorFactory() { T::start(); ...}

ItemGenerator *someItem = ItemGeneratorFactory<ItemThree>(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-01T18:53:53.557

在不知道`ItemGenerator`.

正如 Mankarse 所说，一种解决方案是使用模板将您的类传递给生成器。

然而，如果`ItemGenerator`不能被模板化或者你不想在这里使用模板，你仍然可以按照你的建议通过使用 std::function 或 boost::function 来传递一个函数。

还有一些库可以帮助您向 c++ 添加反射。我记得[CAMP](https://github.com/tegesoft/camp)，但我不知道它是否仍然有效。您可能会在那里找到解决问题的方法。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-01T16:44:33.683

我有点生疏，但我很确定你可以只放入`ItemBase`构造函数，它会接受所有子类。

```
ItemGenerator::ItemGenerator(ItemBase base){\\do something with base
} 
```

或者，如果使用模板不起作用，您可以创建多个构造函数：

```
ItemGenerator::ItemGenerator(ItemOne one){}
ItemGenerator::ItemGenerator(ItemTwo two){}
... 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-01T16:45:20.303

这正是[工厂设计模式](http://en.wikipedia.org/wiki/Factory_method_pattern)所做的。基本上在 ItemGenerator 类中有一个静态方法可以返回指向 ItemBase 对象的指针，但可以根据静态方法的参数返回指向 Item1、Item2 等的指针。

例如，在 ItemGenerator 类中，

```
static ItemBase *Generate( <any parameter> )
{
    switch (parameter)
    {
        case Value1: return new Item1();
        ...
        ...
     }
 } 
```

# css - 透明菜单/导航栏

> ID：15162259
> 
> 赞同：5
> 
> 时间：2013-03-01T16:26:26.943
> 
> 标签：css

我无法解决 CSS 问题。

我有一个应该是透明的导航栏。但是由于 opacity 属性以及它们是透明导航栏的子元素，其上的链接也变得透明。

你能帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-01T17:19:39.230

如果您不希望链接文本受到影响，您应该修改**.container**选择器的规则，使其看起来像这样

```
 .container {
        width: 100%;
        height: 90px;
        margin: 0 auto;
        background-color: rgba(255,255,255,0.5);
} 
```

它将保持您的背景颜色设计而不影响您的文本不透明度，正如这里多次所说，影响元素及其子元素

使用不透明度。文字受到影响

![在此处输入图像描述](../Images/fa47dda35cdd69a60c5b11f53660ad83.png)

使用 rgba(255,255,255,0.5)，儿童不受影响

![在此处输入图像描述](../Images/01531289416a704818cbb16eab8fb6b3.png)

注意由于您的 javascript 和悬停情况而可以采取行动的其他规则[在这里](http://jsfiddle.net/Fico/qBnHE/) 提琴 Bis spater

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-01T16:29:08.237

解决方案很简单。只需将`background-color`CSS 属性设置为`transparent`.

```
.nav {
    background-color: transparent;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-01T16:30:27.240

在 css3 中，您可以使用透明背景而不是使整个面板透明。

要添加透明颜色，您可以执行以下操作：`rgba(255,255,255,.5)`其中 0.5 是不透明度。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-08-27T11:47:27.060

您应该只尝试一个简单的 CSS 背景属性。

```
.navbar
{
   background-color: transparent;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-11-09T15:22:09.867

我使用具有所需不透明度的透明 png 图像（bg.png），并这样称呼它：

```
.menu
{
  background: url('bg.png') repeat;
} 
```

png 图像可以很小，甚至是 1x1 像素。`repeat`就是完全填满`background`空间。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-06-30T08:30:06.453

它就像这个背景一样简单：无；

# ruby - 如何匹配重复的字符？

> ID：15162260
> 
> 赞同：4
> 
> 时间：2013-03-01T16:26:28.713
> 
> 标签：ruby

如何使用正则表达式查找重复字符？

如果我有`aaabbab`，我只想匹配具有三个重复的字符：

```
aaa 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-01T16:47:53.600

试试看`string.scan(/((.)\2{2,})/).map(&:first)`，`string`你的字符串在哪里。

它的工作方式是它查找任何字符并捕获它（点），然后匹配该字符的重复（`\2`反向引用）2 次或更多次（`{2,}`范围表示“2 到无限次之间的任何地方”）。Scan 将返回一个数组数组，因此我们将第一个匹配项映射出来以获得所需的结果。

# java - Web服务Java中的不兼容类型

> ID：15162261
> 
> 赞同：0
> 
> 时间：2013-03-01T16:26:28.800
> 
> 标签：java

我有这个代码：

```
@WebMethod(operationName = "operation")
public boolean operation(@WebParam(name = "id") int id,
        @WebParam(name = "nombre") String nombre,
        @WebParam(name = "apellido") String apellido,
        @WebParam(name = "edad") int edad,
        @WebParam(name = "ciclo") int ciclo,
        @WebParam(name = "carrera") String carrera,
        @WebParam(name = "especializacion") String especializacion) {

    WebServiceapp object = new WebServiceapp();
    boolean estado;
    estado = object.getWebServiceappSoap().insertar(id, nombre, carrera,
            edad, ciclo, carrera, nombre);
    return estado;
} 
```

`incompatible types required boolean found void`但我在这一行得到一个错误：

```
estado = object.getWebServiceappSoap().insertar(id, nombre, carrera,
        edad, ciclo, carrera, nombre); 
```

为什么我会收到此错误？

# java - 呈现组件特定错误消息的最佳方式是什么？

> ID：15162266
> 
> 赞同：2
> 
> 时间：2013-03-01T16:26:36.637
> 
> 标签：java, wicket, wicket-1.5

我需要一种在导致它的组件旁边呈现组件特定错误消息的通用方法。到目前为止，我使用了一个反馈面板，如果页面包含多个组件，这并不理想，需要用户向下滚动页面。此外，如果您在页面上放置多个反馈面板，它们都会显示相同的消息。是否有在特定组件附近呈现本地化错误消息的通用方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T22:00:14.413

您可以将多个反馈面板放置在具有不同消息集的页面上。该类`FeedbackPanel`有一个采用[IFeedbackMessageFilter](http://wicket.apache.org/apidocs/1.5/org/apache/wicket/feedback/IFeedbackMessageFilter.html)的构造函数，您可以创建自己的此过滤器实现来限制将显示的消息。

要更完整地本地化您的消息以显示在相关表单组件旁边，您可以使用[FormComponentFeedbackBorder](http://wicket.apache.org/apidocs/1.5/org/apache/wicket/markup/html/form/validation/FormComponentFeedbackBorder.html)。将这些组合在一起以使表单在常规反馈面板中显示消息但同时突出显示错误字段的一个很好的示例显示在此[博客文章](http://m3g4h4rd.blogspot.com/2010/10/customized-feedback-container-for.html)中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T19:26:10.067

几年前有一篇关于这个主题的优秀博客文章。
这详细说明了如何在报告错误的组件旁边显示错误消息。

[http://stuq.nl/weblog/2008-09-03/user-friendly-form-validation-with-wicket](http://stuq.nl/weblog/2008-09-03/user-friendly-form-validation-with-wicket)

# ios - iOS UTF7 编码/解码

> ID：15162269
> 
> 赞同：2
> 
> 时间：2013-03-01T16:26:40.267
> 
> 标签：ios, encoding, utf-7

我对 UTF7 解码有疑问。我能够隔离问题，创建以下示例代码：

```
NSStringEncoding stringEncoding = myFunctionForTranslateCodepageToEncoding(codePage);
// see the end of the string, it's important
const char * testBuffer ="aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa+ADw-";

NSString * testString = [[NSString alloc] initWithBytes:testBuffer length:strlen(testBuffer) encoding:stringEncoding]; 
```

在哪里：

strlen(testBuffer) 是 508，

'codePage' 是 65000,

'stringEncoding' 是 2214592768（可能是 UTF-7，正如预期的那样，但我找不到明确的确认……）。

'+ADw-' 是 '<' 的 UTF7 序列。

在此示例中，testString 始终为 nil，因此转换失败。但这里有一些奇怪的事情：

1.  当我从 testBuffer 中删除一个“a”时，转换工作，testString 被正确创建。当我添加一个或多个“a”时，它不起作用。
2.  当我“损坏”结尾的 utf7 编码符号（本例中唯一的一个，“+ADw-”）时，它可以正常工作。我可以将其更改为“.ADw-”或“+ADw”。并且缓冲区被正确转换。当然，“损坏”符号没有被解码，它只是按字面书写，但转换有效。它在 NSString 中生成“…aaaaa.ADw-”。我也可以将缓冲区减 1，所以我会得到“…aaaaa+ADw”，它也会被正确转换（因为 UTF7 符号不完整）。
3.  当我在缓冲区末尾添加任何 ASCII 字符时，在 UTF7 符号之后，它可以工作。所以 Ie "...aaaaa+Adw-a" 被转换成 NSString "...aaa>a"。
4.  当缓冲区包含更多 UTF7 符号时，它开始失败时的长度会发生变化。所以它并不总是 508 个或更多字符。
5.  我可以在最后使用任何其他 UTF7 符号。没关系。

我也尝试用 initWithCString 替换 initWithBytes: 方法。我没有检查所有可能的情况，但在所有测试的情况下，它的行为与 initWithBytes: 相同。我已经在 iOS 6.0 上进行了测试。

您对如何正确处理 UTF7 编码的字符串有任何想法吗？

# ruby - 使用 webcrawler 下载 pdf 文件

> ID：15162271
> 
> 赞同：0
> 
> 时间：2013-03-01T16:26:46.737
> 
> 标签：ruby, gem

我开始使用 ruby​​ 编程语言。我有一个 ruby​​ 脚本可以用海葵在页面上抓取 pdf 文件：

```
Anemone.crawl("http://example.com") do |anemone|
  anemone.on_pages_like(/\b.+.pdf/) do |page|
    puts page.url
  end
end 
```

我想使用 gem ruby​​ 下载 page.url。我可以使用什么 gem 来下载 page.url？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T17:47:18.607

不需要额外的宝石，试试这个

```
require 'anemone'

Anemone.crawl("http://www.rubyinside.com/media/",:depth_limit => 1, :obey_robots_txt => true, :skip_query_strings => true) do |anemone|
  anemone.on_pages_like(/\b.+.pdf/) do |page|
    begin
      filename = File.basename(page.url.request_uri.to_s)
      File.open(filename,"wb") {|f| f.write(page.body)}
      puts "downloaded #{page.url}"
    rescue
      puts "error while downloading #{page.url}"
    end
  end
end 
```

给

```
downloaded http://www.rubyinside.com/media/poignant-guide.pdf 
```

而且pdf很好。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-01T17:37:34.933

如果您在 UNIX 系统上，可能[`UnixUtils`](https://github.com/seamusabshere/unix_utils)：

```
Anemone.crawl("http://example.com") do |anemone|
  anemone.on_pages_like(/\b.+.pdf/) do |page|
    puts page.url            # => http://example.com/foo.bar
    puts UnixUtils.curl(url) # => /tmp/foo.bar.1239u98sd
  end
end 
```

# wpf - WPF 从单个视图模型打印多个页面

> ID：15162274
> 
> 赞同：1
> 
> 时间：2013-03-01T16:26:51.707
> 
> 标签：wpf, mvvm, printing

我目前对以下问题有点困扰。我有一个用户界面，它基本上显示了一个图形（由线条、圆圈组成的画布......这些都是 WPF 对象）。根据用户在菜单中所做的选择，一些项目会被删除，一些项目会被添加。所以基本图像看起来是一样的，但做了一些修改。

用户可以通过单击下一个/上一个按钮来选择——比如说——10 个不同的“页面”。

我正在使用 MVVM Light 并且我的 ViewModel 包含图形的所有项目（所有线条，...）。

现在我想将该图形打印到多个页面。第一页应包含从第 1 页更改的图形，第二页包含从第 2 页更改的图形，依此类推。实际页数是动态的。我使用属性 CurrentPage 和属性 PagesTotal 来跟踪它。每当我按下“下一步”按钮时，都会执行一个命令，该命令将更改变量 CurrentPage 并确保显示正确的项目。

现在我想打印这个，但这是我卡住的地方。我不介意离开 MVVM 区域并在代码隐藏中做一些肮脏的工作，但我会拒绝像过去的 GDI 时代那样再次绘制所有内容。

任何想法都非常受欢迎。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T17:19:46.707

创建一个包含您的显示逻辑的 UserControl（例如，您的图形）。在 UserControls 中获取 ViewModel 列表和项目，将每个 ViewModel 设置为每个 UserControl 的 DataContext。强制每个人使用无限值​​渲染调用 Measure，然后使用生成的 DesiredHeight 和 Width 进行排列。然后按照程序打印 WPF 视觉效果（[链接](https://stackoverflow.com/questions/8894770/how-to-print-a-wpf-window-without-showing-it-on-the-screen) [链接](http://code.msdn.microsoft.com/windowsdesktop/WPF-Printing-Overview-f28c541a) [链接](https://stackoverflow.com/questions/13605998/printing-few-wpf-canvas-in-one-document-with-header-and-footer/13607450#13607450)）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T19:24:54.183

本质上，当且仅当您的视图独立工作时，这应该非常简单；即您的 ViewModel 不包含放置在您的视图中的 UiElements。

简单的解决方案是基本上打印您的视觉根。如果需要首先将您的视图封装在用户控件中。

```
PrintDialog printDlg = new PrintDialog();
UserControl1 uc = new UserControl1();
printDlg.PrintVisual(uc, "User Control Printing."); 
```

[参考](http://www.c-sharpcorner.com/uploadfile/mahesh/printing-a-control-in-wpf-using-C-Sharp/)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-05T15:00:24.173

好吧，我必须管理我现在切换回仅通过代码进行打印。我真的很喜欢“WPF 风格”，但处理多页问题实在是太麻烦了。

无论如何，关于打印输出还有一个问题，但这将是另一个问题。

# android - Android：在 adb shell 上执行程序

> ID：15162276
> 
> 赞同：1
> 
> 时间：2013-03-01T16:26:54.373
> 
> 标签：android, android-ndk, adb, porting

我在 Android.mk 中使用**“include $(BUILD_EXECUTABLE)”**命令创建了一个可执行文件。我的要求是通过 abd shell 执行上面生成的可执行文件。

**我试过了：**

下面是我使用 ndk-build 命令编译的 C 代码：

```
#include <stdio.h>
int main()
{
    printf("\n\nHello World\n\n");
    return 0;
} 
```

以下是我的**Android.mk**文件内容：

```
LOCAL_PATH := $(call my-dir)

include $(CLEAR_VARS)

LOCAL_MODULE    := HelloExecutable
LOCAL_SRC_FILES := hello.c
include $(BUILD_EXECUTABLE) 
```

当我执行命令**ndk-build**时，会生成以下文件：

projectRoot->libs-> **HelloExecutable**

我的工作是在 adb shell 上执行上面生成的文件。所以我首先使用以下命令将文件推送到 sdcard 上：

**adb push ~/projectRoot->libs->HelloExecutable /sdcard/**

现在我使用以下命令切换到 adb shell：**$adb shell**命令（这里我使用的是模拟器）。

然后我将权限更改为：**chmod 777 /sdcard/HelloExecutable**

执行上述命令后，我将获得**HelloExecutable**文件的执行权限。

然后将当前工作目录更改为 sdcard。即**cd /sdcard/**

现在，当我尝试执行上述文件时，出现以下错误：

```
# ./HelloExecutable
./HelloExecutable: permission denied 
```

要执行上述操作，我正在使用模拟器。那么有人可以告诉上述错误的原因吗？

我恳请观众解决上述问题。等待您的答复。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T20:53:11.380

检查您的 SD 卡是否安装有`noexec`选项。尝试将您的文件复制到另一个分区，例如 /data 并从那里执行它。

# r - 什么包在R中加载和保存图像

> ID：15162281
> 
> 赞同：4
> 
> 时间：2013-03-01T16:27:10.787
> 
> 标签：r, image-processing

我知道之前有人问过这个问题，但现有的答案似乎已经过时了，因为我无法使用 install.packages 安装 Bio7 或 rimage，并且在 cran 存储库中搜索 Bio7 会给出 404 链接（我是否遗漏了什么？）。

所以到目前为止，在 R 中加载/保存图像的正确包是什么，以便可以从 R 中处理像素？

我不需要它来提供处理例程。只要它可以可靠地将 jpeg 转换为像素值网格，反之亦然（最好对 png 执行相同操作），我就可以编写处理代码。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-01T19:12:41.283

我认为`raster`是你需要的。

```
library(png)
img <- readPNG(system.file("img", "Rlogo.png", package="png"))
## convert it to a raster, interpolate =F to select only sample of pixels of img
img.r <- as.raster(img,interpolate=F) 
```

现在你有一个颜色向量：

```
 str(img.r)
 'raster' chr [1:76, 1:100] "#00000000" "#0 
```

# java - 如何在 javafx 中检索媒体文件的 RGB 数据？

> ID：15162283
> 
> 赞同：0
> 
> 时间：2013-03-01T16:27:13.730
> 
> 标签：java, video, media, rgb

我正在为我的项目开发一个视频检索管理系统，想知道是否有任何工具可以在 java/javafx 中检索媒体文件（最好是视频）的 RGB 数据？

# hibernate - 如何在没有 JPA 的情况下从代码中指定 Hibernate 映射

> ID：15162284
> 
> 赞同：0
> 
> 时间：2013-03-01T16:27:14.627
> 
> 标签：hibernate, jpa, orm, annotations

我正在使用将结果映射到 POJO 的 Hibernate 本机 SQL 查询。但是，我需要一个将列名绑定到属性名的映射 XML 文件。是否可以直接从**没有 JPA 注释**的代码中指定映射？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T14:25:08.673

代码中的 OR/Mapping 意味着您必须在实体类中使用注释。没有注解，只能在代码中完成映射。但是您可以使用 Hibernate 注释而不是 JPA 注释。

例如，下面是 hibernate 支持的表映射的所有注解：

*   ***javax.persistence.Table***是 JPA 注释
*   ***org.hibernate.annotations.Table***是 Hibernate 注解

# mysql - 在同一查询中从借方列减去贷方？

> ID：15162286
> 
> 赞同：1
> 
> 时间：2013-03-01T16:27:29.210
> 
> 标签：mysql, sql

我有以下查询：

SELECT user_id, SUM( credit ) AS cred, SUM( debit ) AS deb FROM account WHERE user_id = '35'

我想从贷方中减去借方并将其显示在一列中或作为变量中的值

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T16:28:56.610

这应该可以工作，并且可能比其他两个`SUM`s稍微快一点

```
SELECT a.user_id, 
       a.cred, 
       a.deb, 
       a.deb - a.cred AS value 
FROM   (SELECT user_id, 
               Sum(credit) AS cred, 
               Sum(debit)  AS deb 
        FROM   account 
        WHERE  user_id = '35') a 
```

如果您有多个用户，您可以执行以下操作：

```
SELECT a.user_id, 
       a.cred, 
       a.deb, 
       a.deb - a.cred AS value 
FROM   (SELECT user_id, 
               Sum(credit) AS cred, 
               Sum(debit)  AS deb 
        FROM   account 
        WHERE  user_id IN (35, 36, 39)
        GROUP BY user_id) a 
```

[查看演示](http://sqlfiddle.com/#!2/84da7/1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T16:28:40.280

您可以计算同一行中的差异

```
SELECT  user_id, 
        SUM(credit) AS cred, 
        SUM(debit) AS deb,
        SUM(credit) -  SUM(debit) total
FROM account 
WHERE user_id = 35 
```

**更新 1**

```
SELECT  user_id, 
        SUM(credit) AS cred, 
        SUM(debit) AS deb,
        SUM(credit) -  SUM(debit) total
FROM account 
WHERE user_id IN (30,31,32,33,34,35)
GROUP BY user_ID 
```

**更新 2**

```
SELECT  user_id, 
        SUM(credit) AS cred, 
        SUM(debit) AS deb,
        SUM(credit) -  SUM(debit) total
FROM account 
WHERE user_id IN (30,31,32,33,34,35)
GROUP BY user_ID
HAVING (SUM(credit) -  SUM(debit)) < 10 
```

# node.js - 为什么一个空的 node.js 脚本会消耗越来越多的 RAM？

> ID：15162289
> 
> 赞同：2
> 
> 时间：2013-03-01T16:27:40.040
> 
> 标签：node.js, memory-leaks

运行这个：

```
setInterval(function() {
    console.log(process.memoryUsage());
}, 1000); 
```

显示内存使用量不断增长：

```
{ rss: 9076736, heapTotal: 6131200, heapUsed: 2052352 }
... some time later
{ rss: 10960896, heapTotal: 6131200, heapUsed: 2939096 }
... some time later
{ rss: 11177984, heapTotal: 6131200, heapUsed: 3141576 } 
```

为什么会这样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T16:45:31.280

该程序不是*空*的，它正在运行一个计时器，检查内存使用情况，并每秒写入一次控制台。这会导致在堆中创建对象，并且在垃圾收集运行之前，您的堆使用量将不断增加。

如果您放手，您最终应该会`heapUsed`在每次触发垃圾收集时看到返回。

# django - d3js 返回“[object%20Object]”和“未捕获的类型错误：无法读取属性：未定义的节点”

> ID：15162290
> 
> 赞同：3
> 
> 时间：2013-03-01T16:27:41.793
> 
> 标签：django, d3.js, tinymce, django-compressor

我是 Javascript 和 Django 的新手。我必须用 D3js 为 svg 文件制作动画，所以为了练习和理解它是如何工作的，我决定将[miserables 小部件](http://bl.ocks.org/mbostock/4062045)添加到我当地的 Django 网站。我有一个简单的看法：

```
def miserable(request):
    return render_to_response('index.html') 
```

网址是： `url(r'^moremiser/$','more_miserable')`我将 index.html 和 miserable.json 都复制到了我的模板文件夹中。当我转到应该显示小部件的 url 时，我得到的只是一个空白屏幕。我究竟做错了什么？建立本地网站的人安装了tinymce和压缩器，他们会导致问题吗？这是 index.html 和 miserables.json 的代码。它们都在我的模板文件夹中：

```
#index.html       
<!DOCTYPE html>
    <meta charset="utf-8">
    <style>

    .node {
      stroke: #fff;
      stroke-width: 1.5px;
    }

    .link {
      stroke: #999;
      stroke-opacity: .6;
    }

    </style>
    <body>
    <script src="http://d3js.org/d3.v3.min.js"></script>
    <script>

    var width = 960,
        height = 500;

    var color = d3.scale.category20();

    var force = d3.layout.force()
        .charge(-120)
        .linkDistance(30)
        .size([width, height]);

    var svg = d3.select("body").append("svg")
        .attr("width", width)
        .attr("height", height);

    d3.json("miserables.json", function(error, graph) {
      force
          .nodes(graph.nodes)
          .links(graph.links)
          .start();

      var link = svg.selectAll(".link")
          .data(graph.links)
        .enter().append("line")
          .attr("class", "link")
          .style("stroke-width", function(d) { return Math.sqrt(d.value); });

      var node = svg.selectAll(".node")
          .data(graph.nodes)
        .enter().append("circle")
          .attr("class", "node")
          .attr("r", 5)
          .style("fill", function(d) { return color(d.group); })
          .call(force.drag);

      node.append("title")
          .text(function(d) { return d.name; });

      force.on("tick", function() {
        link.attr("x1", function(d) { return d.source.x; })
            .attr("y1", function(d) { return d.source.y; })
            .attr("x2", function(d) { return d.target.x; })
            .attr("y2", function(d) { return d.target.y; });

        node.attr("cx", function(d) { return d.x; })
            .attr("cy", function(d) { return d.y; });
      });
    });

</script>

#miserables.json
{
  "nodes":[
    {"name":"Myriel","group":1},
    {"name":"Napoleon","group":1},
    {"name":"Mlle.Baptistine","group":1},
    {"name":"Mme.Magloire","group":1},
    {"name":"CountessdeLo","group":1},
    {"name":"Geborand","group":1},
    {"name":"Champtercier","group":1},
    {"name":"Cravatte","group":1},
    {"name":"Count","group":1},
    {"name":"OldMan","group":1},
    {"name":"Labarre","group":2},
    {"name":"Valjean","group":2},
    {"name":"Marguerite","group":3},
    {"name":"Mme.deR","group":2},
    {"name":"Isabeau","group":2},
    {"name":"Gervais","group":2},
    {"name":"Tholomyes","group":3},
    {"name":"Listolier","group":3},
    {"name":"Fameuil","group":3},
    {"name":"Blacheville","group":3},
    {"name":"Favourite","group":3},
    {"name":"Dahlia","group":3},
    {"name":"Zephine","group":3},
    {"name":"Fantine","group":3},
    {"name":"Mme.Thenardier","group":4},
    {"name":"Thenardier","group":4},
    {"name":"Cosette","group":5},
    {"name":"Javert","group":4},
    {"name":"Fauchelevent","group":0},
    {"name":"Bamatabois","group":2},
    {"name":"Perpetue","group":3},
    {"name":"Simplice","group":2},
    {"name":"Scaufflaire","group":2},
    {"name":"Woman1","group":2},
    {"name":"Judge","group":2},
    {"name":"Champmathieu","group":2},
    {"name":"Brevet","group":2},
    {"name":"Chenildieu","group":2},
    {"name":"Cochepaille","group":2},
    {"name":"Pontmercy","group":4},
    {"name":"Boulatruelle","group":6},
    {"name":"Eponine","group":4},
    {"name":"Anzelma","group":4},
    {"name":"Woman2","group":5},
    {"name":"MotherInnocent","group":0},
    {"name":"Gribier","group":0},
    {"name":"Jondrette","group":7},
    {"name":"Mme.Burgon","group":7},
    {"name":"Gavroche","group":8},
    {"name":"Gillenormand","group":5},
    {"name":"Magnon","group":5},
    {"name":"Mlle.Gillenormand","group":5},
    {"name":"Mme.Pontmercy","group":5},
    {"name":"Mlle.Vaubois","group":5},
    {"name":"Lt.Gillenormand","group":5},
    {"name":"Marius","group":8},
    {"name":"BaronessT","group":5},
    {"name":"Mabeuf","group":8},
    {"name":"Enjolras","group":8},
    {"name":"Combeferre","group":8},
    {"name":"Prouvaire","group":8},
    {"name":"Feuilly","group":8},
    {"name":"Courfeyrac","group":8},
    {"name":"Bahorel","group":8},
    {"name":"Bossuet","group":8},
    {"name":"Joly","group":8},
    {"name":"Grantaire","group":8},
    {"name":"MotherPlutarch","group":9},
    {"name":"Gueulemer","group":4},
    {"name":"Babet","group":4},
    {"name":"Claquesous","group":4},
    {"name":"Montparnasse","group":4},
    {"name":"Toussaint","group":5},
    {"name":"Child1","group":10},
    {"name":"Child2","group":10},
    {"name":"Brujon","group":4},
    {"name":"Mme.Hucheloup","group":8}
  ],
  "links":[
    {"source":1,"target":0,"value":1},
    {"source":2,"target":0,"value":8},
    {"source":3,"target":0,"value":10},
    {"source":3,"target":2,"value":6},
    {"source":4,"target":0,"value":1},
    {"source":5,"target":0,"value":1},
    {"source":6,"target":0,"value":1},
    {"source":7,"target":0,"value":1},
    {"source":8,"target":0,"value":2},
    {"source":9,"target":0,"value":1},
    {"source":11,"target":10,"value":1},
    {"source":11,"target":3,"value":3},
    {"source":11,"target":2,"value":3},
    {"source":11,"target":0,"value":5},
    {"source":12,"target":11,"value":1},
    {"source":13,"target":11,"value":1},
    {"source":14,"target":11,"value":1},
    {"source":15,"target":11,"value":1},
    {"source":17,"target":16,"value":4},
    {"source":18,"target":16,"value":4},
    {"source":18,"target":17,"value":4},
    {"source":19,"target":16,"value":4},
    {"source":19,"target":17,"value":4},
    {"source":19,"target":18,"value":4},
    {"source":20,"target":16,"value":3},
    {"source":20,"target":17,"value":3},
    {"source":20,"target":18,"value":3},
    {"source":20,"target":19,"value":4},
    {"source":21,"target":16,"value":3},
    {"source":21,"target":17,"value":3},
    {"source":21,"target":18,"value":3},
    {"source":21,"target":19,"value":3},
    {"source":21,"target":20,"value":5},
    {"source":22,"target":16,"value":3},
    {"source":22,"target":17,"value":3},
    {"source":22,"target":18,"value":3},
    {"source":22,"target":19,"value":3},
    {"source":22,"target":20,"value":4},
    {"source":22,"target":21,"value":4},
    {"source":23,"target":16,"value":3},
    {"source":23,"target":17,"value":3},
    {"source":23,"target":18,"value":3},
    {"source":23,"target":19,"value":3},
    {"source":23,"target":20,"value":4},
    {"source":23,"target":21,"value":4},
    {"source":23,"target":22,"value":4},
    {"source":23,"target":12,"value":2},
    {"source":23,"target":11,"value":9},
    {"source":24,"target":23,"value":2},
    {"source":24,"target":11,"value":7},
    {"source":25,"target":24,"value":13},
    {"source":25,"target":23,"value":1},
    {"source":25,"target":11,"value":12},
    {"source":26,"target":24,"value":4},
    {"source":26,"target":11,"value":31},
    {"source":26,"target":16,"value":1},
    {"source":26,"target":25,"value":1},
    {"source":27,"target":11,"value":17},
    {"source":27,"target":23,"value":5},
    {"source":27,"target":25,"value":5},
    {"source":27,"target":24,"value":1},
    {"source":27,"target":26,"value":1},
    {"source":28,"target":11,"value":8},
    {"source":28,"target":27,"value":1},
    {"source":29,"target":23,"value":1},
    {"source":29,"target":27,"value":1},
    {"source":29,"target":11,"value":2},
    {"source":30,"target":23,"value":1},
    {"source":31,"target":30,"value":2},
    {"source":31,"target":11,"value":3},
    {"source":31,"target":23,"value":2},
    {"source":31,"target":27,"value":1},
    {"source":32,"target":11,"value":1},
    {"source":33,"target":11,"value":2},
    {"source":33,"target":27,"value":1},
    {"source":34,"target":11,"value":3},
    {"source":34,"target":29,"value":2},
    {"source":35,"target":11,"value":3},
    {"source":35,"target":34,"value":3},
    {"source":35,"target":29,"value":2},
    {"source":36,"target":34,"value":2},
    {"source":36,"target":35,"value":2},
    {"source":36,"target":11,"value":2},
    {"source":36,"target":29,"value":1},
    {"source":37,"target":34,"value":2},
    {"source":37,"target":35,"value":2},
    {"source":37,"target":36,"value":2},
    {"source":37,"target":11,"value":2},
    {"source":37,"target":29,"value":1},
    {"source":38,"target":34,"value":2},
    {"source":38,"target":35,"value":2},
    {"source":38,"target":36,"value":2},
    {"source":38,"target":37,"value":2},
    {"source":38,"target":11,"value":2},
    {"source":38,"target":29,"value":1},
    {"source":39,"target":25,"value":1},
    {"source":40,"target":25,"value":1},
    {"source":41,"target":24,"value":2},
    {"source":41,"target":25,"value":3},
    {"source":42,"target":41,"value":2},
    {"source":42,"target":25,"value":2},
    {"source":42,"target":24,"value":1},
    {"source":43,"target":11,"value":3},
    {"source":43,"target":26,"value":1},
    {"source":43,"target":27,"value":1},
    {"source":44,"target":28,"value":3},
    {"source":44,"target":11,"value":1},
    {"source":45,"target":28,"value":2},
    {"source":47,"target":46,"value":1},
    {"source":48,"target":47,"value":2},
    {"source":48,"target":25,"value":1},
    {"source":48,"target":27,"value":1},
    {"source":48,"target":11,"value":1},
    {"source":49,"target":26,"value":3},
    {"source":49,"target":11,"value":2},
    {"source":50,"target":49,"value":1},
    {"source":50,"target":24,"value":1},
    {"source":51,"target":49,"value":9},
    {"source":51,"target":26,"value":2},
    {"source":51,"target":11,"value":2},
    {"source":52,"target":51,"value":1},
    {"source":52,"target":39,"value":1},
    {"source":53,"target":51,"value":1},
    {"source":54,"target":51,"value":2},
    {"source":54,"target":49,"value":1},
    {"source":54,"target":26,"value":1},
    {"source":55,"target":51,"value":6},
    {"source":55,"target":49,"value":12},
    {"source":55,"target":39,"value":1},
    {"source":55,"target":54,"value":1},
    {"source":55,"target":26,"value":21},
    {"source":55,"target":11,"value":19},
    {"source":55,"target":16,"value":1},
    {"source":55,"target":25,"value":2},
    {"source":55,"target":41,"value":5},
    {"source":55,"target":48,"value":4},
    {"source":56,"target":49,"value":1},
    {"source":56,"target":55,"value":1},
    {"source":57,"target":55,"value":1},
    {"source":57,"target":41,"value":1},
    {"source":57,"target":48,"value":1},
    {"source":58,"target":55,"value":7},
    {"source":58,"target":48,"value":7},
    {"source":58,"target":27,"value":6},
    {"source":58,"target":57,"value":1},
    {"source":58,"target":11,"value":4},
    {"source":59,"target":58,"value":15},
    {"source":59,"target":55,"value":5},
    {"source":59,"target":48,"value":6},
    {"source":59,"target":57,"value":2},
    {"source":60,"target":48,"value":1},
    {"source":60,"target":58,"value":4},
    {"source":60,"target":59,"value":2},
    {"source":61,"target":48,"value":2},
    {"source":61,"target":58,"value":6},
    {"source":61,"target":60,"value":2},
    {"source":61,"target":59,"value":5},
    {"source":61,"target":57,"value":1},
    {"source":61,"target":55,"value":1},
    {"source":62,"target":55,"value":9},
    {"source":62,"target":58,"value":17},
    {"source":62,"target":59,"value":13},
    {"source":62,"target":48,"value":7},
    {"source":62,"target":57,"value":2},
    {"source":62,"target":41,"value":1},
    {"source":62,"target":61,"value":6},
    {"source":62,"target":60,"value":3},
    {"source":63,"target":59,"value":5},
    {"source":63,"target":48,"value":5},
    {"source":63,"target":62,"value":6},
    {"source":63,"target":57,"value":2},
    {"source":63,"target":58,"value":4},
    {"source":63,"target":61,"value":3},
    {"source":63,"target":60,"value":2},
    {"source":63,"target":55,"value":1},
    {"source":64,"target":55,"value":5},
    {"source":64,"target":62,"value":12},
    {"source":64,"target":48,"value":5},
    {"source":64,"target":63,"value":4},
    {"source":64,"target":58,"value":10},
    {"source":64,"target":61,"value":6},
    {"source":64,"target":60,"value":2},
    {"source":64,"target":59,"value":9},
    {"source":64,"target":57,"value":1},
    {"source":64,"target":11,"value":1},
    {"source":65,"target":63,"value":5},
    {"source":65,"target":64,"value":7},
    {"source":65,"target":48,"value":3},
    {"source":65,"target":62,"value":5},
    {"source":65,"target":58,"value":5},
    {"source":65,"target":61,"value":5},
    {"source":65,"target":60,"value":2},
    {"source":65,"target":59,"value":5},
    {"source":65,"target":57,"value":1},
    {"source":65,"target":55,"value":2},
    {"source":66,"target":64,"value":3},
    {"source":66,"target":58,"value":3},
    {"source":66,"target":59,"value":1},
    {"source":66,"target":62,"value":2},
    {"source":66,"target":65,"value":2},
    {"source":66,"target":48,"value":1},
    {"source":66,"target":63,"value":1},
    {"source":66,"target":61,"value":1},
    {"source":66,"target":60,"value":1},
    {"source":67,"target":57,"value":3},
    {"source":68,"target":25,"value":5},
    {"source":68,"target":11,"value":1},
    {"source":68,"target":24,"value":1},
    {"source":68,"target":27,"value":1},
    {"source":68,"target":48,"value":1},
    {"source":68,"target":41,"value":1},
    {"source":69,"target":25,"value":6},
    {"source":69,"target":68,"value":6},
    {"source":69,"target":11,"value":1},
    {"source":69,"target":24,"value":1},
    {"source":69,"target":27,"value":2},
    {"source":69,"target":48,"value":1},
    {"source":69,"target":41,"value":1},
    {"source":70,"target":25,"value":4},
    {"source":70,"target":69,"value":4},
    {"source":70,"target":68,"value":4},
    {"source":70,"target":11,"value":1},
    {"source":70,"target":24,"value":1},
    {"source":70,"target":27,"value":1},
    {"source":70,"target":41,"value":1},
    {"source":70,"target":58,"value":1},
    {"source":71,"target":27,"value":1},
    {"source":71,"target":69,"value":2},
    {"source":71,"target":68,"value":2},
    {"source":71,"target":70,"value":2},
    {"source":71,"target":11,"value":1},
    {"source":71,"target":48,"value":1},
    {"source":71,"target":41,"value":1},
    {"source":71,"target":25,"value":1},
    {"source":72,"target":26,"value":2},
    {"source":72,"target":27,"value":1},
    {"source":72,"target":11,"value":1},
    {"source":73,"target":48,"value":2},
    {"source":74,"target":48,"value":2},
    {"source":74,"target":73,"value":3},
    {"source":75,"target":69,"value":3},
    {"source":75,"target":68,"value":3},
    {"source":75,"target":25,"value":3},
    {"source":75,"target":48,"value":1},
    {"source":75,"target":41,"value":1},
    {"source":75,"target":70,"value":1},
    {"source":75,"target":71,"value":1},
    {"source":76,"target":64,"value":1},
    {"source":76,"target":65,"value":1},
    {"source":76,"target":66,"value":1},
    {"source":76,"target":63,"value":1},
    {"source":76,"target":62,"value":1},
    {"source":76,"target":48,"value":1},
    {"source":76,"target":58,"value":1}
  ]
} 
```

当我在 Google Chrome 中打开 Javascript 调试器时，我看到服务器没有转到 URL“moremiser”，而是尝试转到“moremiser/[object%20Object]，然后出现其他错误消息：”“Uncaught TypeError: Cannot读取属性：未定义的节点”。我应该修改什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-02T04:22:15.070

是的，我做到了。我认为 Javascript 无法找到“miserable.json”，也无法访问其中的节点。我这样说是因为我已将“miserables.json”的内容分配给定义为“index.html”的对象但没有成功。然后，我创建了一个节点数组（没有将它们标识为节点），将数组的代码粘贴到“index.html”文件中，并编写了一个 for 循环打印尽可能多的“hello wolrd”大批; 起初，浏览器说 d3 没有定义，然后当我引用在线 d3 库的 url 而不是我计算机上的 d3 文件夹时，它起作用了。

```
 <!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title>D3 Test</title>
        <script type="text/javascript" src="http://d3js.org/d3.v3.min.js"></script>
    </head>
    <body>
        <script type="text/javascript">
var dataset = [{"name":"Myriel","group":1},
    {"name":"Napoleon","group":1},
    {"name":"Mlle.Baptistine","group":1},
    {"name":"Mme.Magloire","group":1},
    {"name":"CountessdeLo","group":1},
    {"name":"Geborand","group":1},
    {"name":"Champtercier","group":1},
    {"name":"Cravatte","group":1},
    {"name":"Count","group":1},
    {"name":"OldMan","group":1},
    {"name":"Labarre","group":2},
    {"name":"Valjean","group":2},
    {"name":"Marguerite","group":3},
    {"name":"Mme.deR","group":2},
    {"name":"Isabeau","group":2},
    {"name":"Gervais","group":2},
    {"name":"Tholomyes","group":3},
    {"name":"Listolier","group":3},
    {"name":"Fameuil","group":3},
    {"name":"Blacheville","group":3},
    {"name":"Favourite","group":3},
    {"name":"Dahlia","group":3},
    {"name":"Zephine","group":3},
    {"name":"Fantine","group":3},
    {"name":"Mme.Thenardier","group":4},
    {"name":"Thenardier","group":4},
    {"name":"Cosette","group":5},
    {"name":"Javert","group":4},
    {"name":"Fauchelevent","group":0},
    {"name":"Bamatabois","group":2},
    {"name":"Perpetue","group":3},
    {"name":"Simplice","group":2},
    {"name":"Scaufflaire","group":2},
    {"name":"Woman1","group":2},
    {"name":"Judge","group":2},
    {"name":"Champmathieu","group":2},
    {"name":"Brevet","group":2},
    {"name":"Chenildieu","group":2},
    {"name":"Cochepaille","group":2},
    {"name":"Pontmercy","group":4},
    {"name":"Boulatruelle","group":6},
    {"name":"Eponine","group":4},
    {"name":"Anzelma","group":4},
    {"name":"Woman2","group":5},
    {"name":"MotherInnocent","group":0},
    {"name":"Gribier","group":0},
    {"name":"Jondrette","group":7},
    {"name":"Mme.Burgon","group":7},
    {"name":"Gavroche","group":8},
    {"name":"Gillenormand","group":5},
    {"name":"Magnon","group":5},
    {"name":"Mlle.Gillenormand","group":5},
    {"name":"Mme.Pontmercy","group":5},
    {"name":"Mlle.Vaubois","group":5},
    {"name":"Lt.Gillenormand","group":5},
    {"name":"Marius","group":8},
    {"name":"BaronessT","group":5},
    {"name":"Mabeuf","group":8},
    {"name":"Enjolras","group":8},
    {"name":"Combeferre","group":8},
    {"name":"Prouvaire","group":8},
    {"name":"Feuilly","group":8},
    {"name":"Courfeyrac","group":8},
    {"name":"Bahorel","group":8},
    {"name":"Bossuet","group":8},
    {"name":"Joly","group":8},
    {"name":"Grantaire","group":8},
    {"name":"MotherPlutarch","group":9},
    {"name":"Gueulemer","group":4},
    {"name":"Babet","group":4},
    {"name":"Claquesous","group":4},
    {"name":"Montparnasse","group":4},
    {"name":"Toussaint","group":5},
    {"name":"Child1","group":10},
    {"name":"Child2","group":10},
    {"name":"Brujon","group":4},
    {"name":"Mme.Hucheloup","group":8}];

d3.select("body").selectAll("p")
    .data(dataset)
    .enter()
    .append("p")
    .text("New paragraph!")
        </script>
    </body>
</html> 
```

# android - 在android中循环显示对话框

> ID：15162291
> 
> 赞同：0
> 
> 时间：2013-03-01T16:27:44.353
> 
> 标签：android, android-dialog

我正在尝试显示包含数据库内容的对话框。从数据库中获取的数据可能包含多个数据。所以我必须在 for 循环中显示对话框。但对话框仅显示数据库中的第一行。这里是代码

```
cursor = sqldb.query(Database_Handler.dbdectab, null,"((" + Database_Handler.gendtime + "<='" + after_1hr + "' and " + Database_Handler.gendtime + ">='" + before_1hr + "') and (" 
            + Database_Handler.calused + "='Gregorian' or " + Database_Handler.calused + "='both')) ", null, null, null, null);
    notif_count = cursor.getCount();
    //dec_name_ctr_builder = new StringBuilder("");
    if(notif_count>0)
    {
        dialog1 = new Dialog(this);
        cursor.moveToFirst();
        do
        {
            dec_name =cursor.getString(cursor.getColumnIndex(Database_Handler.decname));

            dialog1.requestWindowFeature(Window.FEATURE_NO_TITLE);
            dialog1.setContentView(R.layout.custom_dialog_alert);

            TextView tv_alert = (TextView)dialog1.findViewById(R.id.txt_alert);
            tv_alert.setText( dec_name );
            Button yes = (Button) dialog1.findViewById(R.id.btn_yes);
            Button no = (Button) dialog1.findViewById(R.id.btn_no);

            yes.setOnClickListener(new OnClickListener()
            {
                public void onClick(View v) 
                {
                    Intent intent = new Intent(Intent.ACTION_VIEW);
                    intent.setData(Uri.parse(donateurl));
                    startActivity(intent);
                    dialog1.dismiss();
                    cursor.close();
                    sqldb.close();
                    finish();
                }
            });
            no.setOnClickListener(new OnClickListener()
            {
                public void onClick(View v)
                {
                    dialog1.dismiss();
                    cursor.close();
                    sqldb.close();
                    finish();
                }
            });
            dialog1.show();
        }while(cursor.moveToNext()); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T16:38:22.953

Android 对话框不是模态的（也就是说，它们不会阻止后台进程）。因此您的工作是异步完成的，并且根据：

**罗曼人**

```
We've designed Android to prevent developers from writing synchronous dialogs so you don't really have much of a choice. 
```

因此，您不能在使用 Dialog 之间阻止 while 循环执行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T16:57:22.690

Karan_Rana 是对的。对于您的答案，最简单的解决方案是将结果存储在其他地方，并在每次留下一些数据并且用户单击上一个对话框按钮时显示一个新对话框。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-08-28T05:48:17.337

我知道这有点晚了，但我曾经遇到过类似的问题。我使用递归来循环一个对话框。我的情况很独特，因为我需要在应用程序启动期间检测互联网连接。因此，这种方法可能不适合您。但是我能够在没有 for 循环和阻塞主 UI 线程的情况下实现该解决方案。因为我在启动屏幕上，所以我不需要其他 UI，所以我会简单地再次调用对话框，直到用户选择“退出”。

我有一个启动画面，如果检测到网络连接，它只会继续应用程序的登陆活动。

下面的示例代码演示了这个概念。请注意，有自定义方法，但您应该知道从 onClick 方法中再次调用提示。

```
protected void onCreate(Bundle savedInstanceState) {
    if (isNetworkAvailable()) {
       launchApp();
    } else {
        retryPrompt();
    }

}

private void retryPrompt() {
        if (isNetworkAvailable()) {
            launchApp();
        } else {
            final ConfirmDialog dialog = new ConfirmDialog.CustomAlertBuilder(this,
                    "Internet Connection",
                    "Internet Connection not detected. Please check your connection.",
                    "Retry").
                    setNegBtnLabel("Quit").
                    setCustomCallback(new CustomDialogCallback() {
                        @Override
                        public void onClickPositiveBtn(DialogInterface dialogInterface, int which) {
                            // go around again.
                            retryPrompt(); // <<== Call method recursively
                        }

                        @Override
                        public void onClickNegativeBtn(DialogInterface dialogInterface, int which) {
                            // abort app.
                            finish();
                        }
                    }).build();
            dialog.show();
        }
    } 
```

# c# - AESManaged File Encryption and Decryption 和 prepend 初始化向量

> ID：15162293
> 
> 赞同：3
> 
> 时间：2013-03-01T16:27:45.547
> 
> 标签：c#, byte, aes, encryption-symmetric

我正在尝试加密/解密字节 - 我已经使用 System.Security.Cryptography 中的 AESManaged 类对 AES 算法的密钥和 IV 进行了大量阅读。我读了詹姆斯约翰逊对以下问题的回答[http://www.techques.com/question/1-7025135/My-Length-of-the-data-to-decrypt-is-invalid-error](http://www.techques.com/question/1-7025135/My-Length-of-the-data-to-decrypt-is-invalid-error)他建议您在加密例程中使用随机 IV 并将 IV 添加到加密消息中。解密函数从加密消息的开头剥离随机 IV 以初始化解密类，然后解密其余字节。我试图在下面的代码中做到这一点。但我不断收到“要解密的数据长度无效”。加密后尝试解密时出现错误消息。有人可能会阐明可能出了什么问题。

```
 USAGE: (streamToEncrypt/streamToDecrypt are System.IO.Stream) 
```

* * *

```
 using (var cryptoHelper = new AESHelper())
        {
            var encryptedBytes = cryptoHelper.Encrypt(AESHelper.StreamToByteArray(streamToEncrypt));

        }

using (var cryptoHelper = new AESHelper())
        {
            var decryptedBytes = cryptoHelper.Decrypt(AESHelper.StreamToByteArray(streamToDecrypt));                             
        }

 public class AESHelper : IDisposable
 {       
    public AesManaged AESManaged;
    internal ICryptoTransform Encryptor { get; set; }
    internal ICryptoTransform Decryptor { get; set; }
    private const string KEY = "2428GD19569F9B2C2341839416C8E87G";
    private static readonly byte[] Salt = Encoding.ASCII.GetBytes("?pt1$8f]l4g80");
    private const Int32 ITERATIONS = 1042;

    internal AESHelper()
    {
        AESManaged = new AesManaged();
        AESManaged.BlockSize = AESManaged.LegalBlockSizes[0].MaxSize;
        AESManaged.KeySize = AESManaged.LegalKeySizes[0].MaxSize;                    
        AESManaged.Mode= CipherMode.CBC;
    }
   public void KeyGenerator()
    {
        var key = new Rfc2898DeriveBytes(KEY, Salt, ITERATIONS);
        AESManaged.Key = key.GetBytes(AESManaged.KeySize / 8);           
    }
    public byte[] Encrypt(byte[] input)
    {
        KeyGenerator();
        var ms = new MemoryStream();
        //Random IV 
        Encryptor = AESManaged.CreateEncryptor(AESManaged.Key, AESManaged.IV);
        //Add the IV to the beginning of the memory stream
        ms.Write(BitConverter.GetBytes(AESManaged.IV.Length), 0, sizeof(int));
        ms.Write(AESManaged.IV, 0, AESManaged.IV.Length);
        var cs = new CryptoStream(ms,
          Encryptor, CryptoStreamMode.Write);
        cs.Write(input, 0, input.Length);
        cs.Close();
        return ms.ToArray();
    }
    public byte[] Decrypt(byte[] input)
    {
        KeyGenerator();

        // Get the initialization vector from the encrypted stream
        var ms = new MemoryStream(input);
        AESManaged.IV = ReadByteArray(ms);
        Decryptor = AESManaged.CreateDecryptor(AESManaged.Key, AESManaged.IV);
        var cs = new CryptoStream(ms,
         Decryptor, CryptoStreamMode.Write);
        cs.Write(input, 0, input.Length);
        cs.Close();//Error occurs here
        return ms.ToArray();
    }

    internal static byte[] ReadByteArray(Stream s)
    {
        var rawLength = new byte[sizeof(int)];
        if (s.Read(rawLength, 0, rawLength.Length) != rawLength.Length)
        {
            throw new SystemException("Stream did not contain properly formatted byte array");
        }
        var buffer = new byte[16];
        if (s.Read(buffer, 0, buffer.Length) != buffer.Length)
        {
            throw new SystemException("Did not read byte array properly");
        }

        return buffer;
    }
     internal static byte[] StreamToByteArray(Stream inputStream)
    {
        if (!inputStream.CanRead)
        {
            throw new ArgumentException();
        }

        // This is optional
        if (inputStream.CanSeek)
        {
            inputStream.Seek(0, SeekOrigin.Begin);
        }

        var output = new byte[inputStream.Length];
        var bytesRead = inputStream.Read(output, 0, output.Length);
        Debug.Assert(bytesRead == output.Length, "Bytes read from stream matches stream length");
        return output;
    }
  public void Dispose()
    {
        if (AESManaged != null)
            ((IDisposable) AESManaged).Dispose();

    }} 
```

提前谢谢了

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-29T14:51:12.487

可能您已经解决了这个问题，但我只会为面临类似问题的其他人提供我的答案。

由于`input`阵列中存在附加信息而发生错误。在`public byte[] Encrypt(byte[] input)`方法中，您在写入加密数据之前写入 IV 长度和 IV。线路：

```
ms.Write(BitConverter.GetBytes(AESManaged.IV.Length), 0, sizeof(int));
ms.Write(AESManaged.IV, 0, AESManaged.IV.Length); 
```

在`public byte[] Decrypt(byte[] input)`方法中，您正在阅读此信息并使用 read IV 作为 AES 算法的初始化向量。一切都好。然后，您正在构建`CryptoStream`并`CryptoStreamMode.Write`传递获取解密数据的`MemoryStream`对象。`ms`但是，传递的`input`数组不仅包含加密的消息，还包含您在加密过程中编写的 IV。这就是它无法解密的原因。

要克服这个问题，您需要做的是仅从`input`数组中提取密码数据并将其传递给：`cs.Write(cipherData, 0, cipherData.Length);`或​​将模式更改为`CryptoStreamMode.Read`并使用`cs.Read(outputBuff, 0, outputBuff.Length);`.

也不要使用同一个`MemoryStream`对象来读写，因为在`CryptoStream`写入之后你会有一些垃圾。

# c# - WinRT 如何保存 ContactPicker IRandomAccessStreamWithContentType 的图像

> ID：15162296
> 
> 赞同：2
> 
> 时间：2013-03-01T16:27:55.710
> 
> 标签：c#, windows-runtime, winrt-xaml

使用以下代码，我可以获得`IRandomAccessStreamWithContentType`代表联系人的拇指

```
var contactPicker = new ContactPicker();
contactPicker.SelectionMode = ContactSelectionMode.Contacts;

var contact = await contactPicker.PickSingleContactAsync();
var thumb = await contact.GetThumbnailAsync(); 
```

但是处理`IRandomAccessStreamWithContentType` 获取图像实例和图像文件的最佳方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T06:48:00.067

您应该将其作为`IRandomAccessStream`包含图像的普通处理：

```
using (var stream = await contact.GetThumbnailAsync())
{
    BitmapDecoder decoder = await BitmapDecoder.CreateAsync(stream);
    BitmapFrame frame = await decoder.GetFrameAsync(0);

    var bitmap = new WriteableBitmap((int)frame.PixelWidth, (int)frame.PixelHeight);
    stream.Seek(0);
    await bitmap.SetSourceAsync(stream);
} 
```

从这里开始，您可以将其设置`WriteableBitmap`为源以`Image`控制或以任何其他方式使用它。

该`Seek`调用是必需的，因为已读取流以获取图像大小，因此需要在读取图像本身之前重置位置。

# java - Java Swing：使用文档侦听器处理返回键

> ID：15162297
> 
> 赞同：0
> 
> 时间：2013-03-01T16:27:55.710
> 
> 标签：java, swing, jtextcomponent, documentlistener

我有一个运行良好的文档侦听器。但是，我想为其添加一些功能，以便当用户按下 Enter 键时，焦点会转移到另一个对象。我不知道如何捕获这个。这是我的代码：

```
txtNum1.getDocument().addDocumentListener(new DocumentListener() {

            @Override
            public void insertUpdate(DocumentEvent e) {
                setAnswer(e);
            }

            @Override
            public void removeUpdate(DocumentEvent e) {
                setAnswer(e);
            }

            @Override
            public void changedUpdate(DocumentEvent e) {
                setAnswer(e);
            }

            private void setAnswer(DocumentEvent e) {
                if (txtNum1.getText().equals("")) {
                    num1 = 0;
                } else {
                    num1 = Integer.parseInt(txtNum1.getText());
                }
                calcAnswer();
                System.out.println(e); //trying to output the event 'Enter'
            } 
```

我可以通过一个关键的听众来做到这一点，但在使用这种方法之前，我在这个网站上被骂过，所以我试图以正确的方式学习这一点。

谢谢！

编辑：根据下面的建议，我添加了以下代码，但似乎没有效果。谁能看到我错过了什么？谢谢！

```
/* If the user hits the Enter key, we want the focus to shift to
 * the next text field */
txtNum1.addActionListener(new ActionListener() {
    @Override
    public void actionPerformed(ActionEvent e) {
        txtNum2.requestFocus();
    }
}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-01T16:32:04.650

在 JTextfield 上，您可以`Enter`简单地通过添加一个`ActionListener`. 当用户输入时它会被触发`enter`

# asp.net - 存储过程返回唯一标识符

> ID：15162303
> 
> 赞同：-1
> 
> 时间：2013-03-01T16:28:19.873
> 
> 标签：asp.net, sql, sql-server, vb.net

我有一个让我感到沮丧的问题，我用谷歌搜索和搜索，但找不到我想要的。

我有这个 SQL Server 存储过程，它运行良好并返回唯一标识符：

```
ALTER PROCEDURE [dbo].[mcd_AddLogin]
   @UserName         nvarchar(256),
   @Password         nvarchar(256),
   @UID              uniqueidentifier OUTPUT
AS
BEGIN
   IF( @UID IS NULL )
        SELECT @UID = NEWID()
   ELSE
   BEGIN
       IF( EXISTS( SELECT [USERNAME] FROM dbo.LoginPassing_Active) )
          RETURN -1
   END

Declare @Active bit
Declare @Exp_Date datetime
Set @Active = 1
Set @Exp_Date =  DATEADD(mi, 1, GETDATE())

INSERT dbo.LoginPassing ([USERNAME], [PASSWORD], [ACTIVE], [EXP_DATE], [UID])
VALUES (@UserName, @Password, @Active, @Exp_Date, @Uid)

RETURN 0
END 
```

我正在尝试在 ASP.NET 应用程序中使用它，并收到以下错误：

> *过程或函数“mcd_AddLogin”需要参数“@UID”，但未提供该参数。*

下面是我的 ASP.Net 应用程序中的代码，任何人都可以帮我解决问题所在，我相信它真的很简单，我只是错过了一个技巧：

```
 Dim conSQL As New SqlConnection
    conSQL.ConnectionString = My.Settings.conSQL
    conSQL.Open()

    Dim comSQL As New SqlCommand

    comSQL.Connection = conSQL
    comSQL.CommandText = "mcd_AddLogin"
    comSQL.CommandType = CommandType.StoredProcedure
    comSQL.Parameters.Add("@Username", SqlDbType.NVarChar).Value = "username"
    comSQL.Parameters.Add("@Password", SqlDbType.NVarChar).Value = "password"

    comSQL.ExecuteNonQuery()
    litAD.Text = comSQL.Parameters("@UID").Value 
```

提前感谢您的帮助。

谢谢，史蒂夫

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-01T16:34:40.020

在*存储过程*中，您有**输出**参数，那么您必须提供该参数，并且在 SP 执行后您可以从参数中获取输出值。

试试这个：

```
comSQL.Parameters.Add("@Password", SqlDbType.NVarChar).Value = "password"
comSQL.Parameters.Add("@UID", SqlDbType.Int)
comSQL.Parameters("@UID").Direction = ParameterDirection.Output
comSQL.ExecuteNonQuery()
litAD.Text = comSQL.Parameters("@UID").Value 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T16:34:05.987

您需要 `Parameter Direction`在调用之前先进行空格键并通过它`ExecuteNonQuery()`

例如

```
myParm.Direction = ParameterDirection.Output 
```

请阅读有关[输入和输出参数的更多信息](http://msdn.microsoft.com/en-us/library/59x02y99%28v=vs.71%29.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T16:38:43.747

原来我在谷歌搜索错误的东西 - 我想要输出参数，我用下面的代码解决了这个问题：

```
 comSQL.Connection = conSQL
    comSQL.CommandText = "mcd_AddLogin"
    comSQL.CommandType = CommandType.StoredProcedure
    comSQL.Parameters.Add("@Username", SqlDbType.NVarChar).Value = "spearce"
    comSQL.Parameters.Add("@Password", SqlDbType.NVarChar).Value = "kintikai"
    comSQL.Parameters.Add("@UID", SqlDbType.UniqueIdentifier)
    comSQL.Parameters("@UID").Direction = ParameterDirection.Output
    comSQL.ExecuteNonQuery()
    litAD.Text = comSQL.Parameters("@UID").Value 
```

无论如何感谢您的帮助。

# javascript - jquery DOM函数返回未定义但javascript版本有效

> ID：15162309
> 
> 赞同：0
> 
> 时间：2013-03-01T16:28:27.753
> 
> 标签：javascript, jquery, dom

这是javascript中当前有效的函数：

```
var iframe = document.getElementsByTagName('iframe')[0];
var doc = iframe.contentWindow.document;
var originPrice = iframe.contentWindow.document.getElementsByClassName('price type2')[0].innerHTML; 
```

这是我仍在学习的 jquery 版本，但它不起作用

```
var originPrice = $('iframe').contents().find('.price type2')[0].html(); 
```

Firefox 返回的错误是它是“未定义”。这里可能是什么错误？

感谢您的任何提示，我仍在学习 jquery

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T16:29:50.183

因为当您选择 时`[0]`，您返回的是 DOM 元素而不是 jQuery 对象。而 DOM 元素没有这个`html()`功能。

```
var originPrice = $('iframe').contents().find('.price.type2').eq(0).html(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T16:30:55.303

当您`[0]`对 jQuery 对象执行操作时，您会得到一个没有`.html()`方法的 DOM 对象，因为这是一个 jQuery 方法。

要么用于`.eq(0).html()`获取 jQuery 对象，要么`[0].innerHTML`在您有 DOM 对象时使用。

此外，将您的选择器更改`find('.price.type2')`为查找具有两个类 "price" 和 "type2" 的单个对象。

# c# - tcpclient 未连接到本地计算机

> ID：15162312
> 
> 赞同：1
> 
> 时间：2013-03-01T16:28:35.823
> 
> 标签：c#, tcpclient

我有三个应用程序：

**PPSGPS** - 这是传输 tcp 的 gps 坐标

**PPS** - 当前连接到 PPSGPS 并且没有问题的 vb6 应用程序

**TestProj** - 我在下面提到的程序。我无法让它连接到 PPSGPS

我正在编写一个需要连接到 PPSGPS 并获取纬度/经度的 C# 应用程序。

这是我作为测试编写的代码：

```
private void button1_Click(object sender, EventArgs e)
{
          if (client == null)
          {
            client = new TcpClient("localhost", 5106);
          }

          // Get the stream
          NetworkStream stream = client.GetStream();
          Byte[] data = new Byte[256];

          // String to store the response ASCII representation.
          String responseData = String.Empty;

          // Read the first batch of the TcpServer response bytes.
          int bytes = stream.Read(data, 0, data.Length);
          responseData = System.Text.Encoding.ASCII.GetString(data, 0, bytes);
          Console.WriteLine("Received: {0}", responseData);

          // Close everything.
          stream.Close();
          client.Close();    
} 
```

这一切都发生在同一台机器上。

我看到端口是从 netstat 打开的：

```
C:\>netstat

Active Connections

  Proto  Local Address          Foreign Address        State
  TCP    SSSVR1:4320            localhost:5106         ESTABLISHED 
```

当我在笔记本电脑上运行测试程序时，我得到了这个：

```
************** Exception Text **************
System.Net.Sockets.SocketException (0x80004005): No connection could be made because the target machine actively refused it 127.0.0.1:5106 
```

有人看到我在测试中做错了什么吗？

**==== 编辑 ====**

我将 client.connect 添加到下面的代码中，但仍然收到相同的消息：

```
private void button1_Click(object sender, EventArgs e)
{
  IPAddress hostIPAddress1 = IPAddress.Parse("127.0.0.1");
  var port = 5106;

  if (client == null)
  {
    client = new TcpClient(hostIPAddress1.ToString(), port);
  }

  var endp = new IPEndPoint(hostIPAddress1, port);
  client.Connect(endp);
  // Get the stream
  NetworkStream stream = client.GetStream();
  Byte[] data = new Byte[256];

  // String to store the response ASCII representation.
  String responseData = String.Empty;

  // Read the first batch of the TcpServer response bytes.
  int bytes = stream.Read(data, 0, data.Length);
  responseData = System.Text.Encoding.ASCII.GetString(data, 0, bytes);
  Console.WriteLine("Received: {0}", responseData);

  // Close everything.
  stream.Close();
  client.Close();
} 
```

**==== 编辑#2 ====**

这是 PPSGPS 中“传输”我要检索的数据的代码：

Private Sub SendToPPS(ByVal GPS_Message As String) If mbDebug_PPSGS Then LogToFile("Starting Sub SendToPPS") End If Dim CloseSocket As Boolean

```
If PPSIsRunning() Then
  CloseSocket = False
  If mbDebug_PPSGS Then
    LogToFile("SendToPPS() PPS is Running.  Sending: " & GPS_Message)
  End If
  ' Don't try to send to PPS if PPS is not running

  Try
    ' Create a TcpClient.
    ' Note, for this client to work you need to have a TcpServer 
    ' connected to the same address as specified by the server, port
    ' combination.
    If SocketClient Is Nothing Then
      ' The socket is not open yet.  Open it now. 
      Dim port As Int32 = 5106
      SocketClient = New TcpClient("localhost", port)
    End If

    ' Translate the passed message into ASCII and store it as a Byte array.
    Dim data As [Byte]() = System.Text.Encoding.ASCII.GetBytes(GPS_Message)

    ' Get a client stream for reading and writing.
    Dim stream As NetworkStream = SocketClient.GetStream()

    ' Send the message to the connected TcpServer. 
    stream.Write(data, 0, data.Length)

  Catch err As ArgumentNullException
    LogToFile("SendToPPS() ArgumentNullException: " & err.ToString)
    CloseSocket = True
  Catch err As SocketException
    LogToFile("SendToPPS() SocketException: " & err.ToString)
    CloseSocket = True
  End Try
Else
  CloseSocket = True
  LogToFile("SendToPPS() PPS is Not Running.")
  ' PPS is not running
  ' Make sure Socket is closed
End If

If CloseSocket Then
  If Not SocketClient Is Nothing Then
    Try
      SocketClient.Close()
    Catch ex As Exception
      LogToFile("SendToPPS() Closing Socket Exception: " & ex.ToString)
    End Try

    SocketClient = Nothing
  End If

End If

If mbDebug_PPSGS Then
  LogToFile("SendToPPS() Ending Sub SendToPPS")
End If 
```

结束子

# json - 由于致命异常，应用程序在模拟器中意外停止

> ID：15162314
> 
> 赞同：0
> 
> 时间：2013-03-01T16:28:39.943
> 
> 标签：json, android-emulator, nullpointerexception

当单击注册或登录按钮时，我已经获得了 android 应用程序的登录和注册屏幕以及与之相关的活动。保存时我没有收到任何错误。但是当我运行它时，屏幕会在模拟器中加载，允许我输入数据，但是一旦我单击注册按钮或登录按钮，我就会收到错误“应用程序意外停止，请重试”。

以下是我在 LogCat 中遇到的错误：

```
03-01 13:01:49.649: W/dalvikvm(583): threadid=1: thread exiting with uncaught exception (group=0x40015560)
03-01 13:01:49.669: E/AndroidRuntime(583): FATAL EXCEPTION: main
03-01 13:01:49.669: E/AndroidRuntime(583): java.lang.NullPointerException
03-01 13:01:49.669: E/AndroidRuntime(583): at com.example.attendance2.RegisterActivity$1.onClick(RegisterActivity.java:59)
03-01 13:01:49.669: E/AndroidRuntime(583):     at android.view.View.performClick(View.java:2485)
03-01 13:01:49.669: E/AndroidRuntime(583):     at android.view.View$PerformClick.run(View.java:9080)
03-01 13:01:49.669: E/AndroidRuntime(583):     at android.os.Handler.handleCallback(Handler.java:587)
03-01 13:01:49.669: E/AndroidRuntime(583):     at android.os.Handler.dispatchMessage(Handler.java:92)
03-01 13:01:49.669: E/AndroidRuntime(583):     at android.os.Looper.loop(Looper.java:123)
03-01 13:01:49.669: E/AndroidRuntime(583):     at android.app.ActivityThread.main(ActivityThread.java:3683)
03-01 13:01:49.669: E/AndroidRuntime(583):     at java.lang.reflect.Method.invokeNative(Native Method)
03-01 13:01:49.669: E/AndroidRuntime(583):     at java.lang.reflect.Method.invoke(Method.java:507)
03-01 13:01:49.669: E/AndroidRuntime(583):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
03-01 13:01:49.669: E/AndroidRuntime(583):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
03-01 13:01:49.669: E/AndroidRuntime(583):     at dalvik.system.NativeStart.main(Native Method)
03-01 13:01:56.080: I/Process(583): Sending signal. PID: 583 SIG: 9 
```

我已经检查了 RegisterActivity.java，看起来一切都很好......我还添加了 RegisterActivity.java 和 UserFunctions.java 如果您发现问题所在以及是否需要更多编码，请告诉我！当我尝试 LoginActivity.java 登录时，也会发生同样的错误。

注册活动.java

```
package com.example.attendance2;

import org.json.JSONException;
import org.json.JSONObject;

import library.DatabaseHandler;
import library.UserFunctions;

import android.app.Activity;
import android.content.Intent;
import android.util.Log;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;

public class RegisterActivity extends Activity {
Button btnRegister;
Button btnLinkToLogin;
EditText inputFullName;
EditText inputEmail;
EditText inputPassword;
TextView registerErrorMsg;

// JSON Response node names
private static String KEY_SUCCESS = "success";
private static String KEY_ERROR = "error";
private static String KEY_ERROR_MSG = "error_msg";
private static String KEY_UID = "uid";
private static String KEY_NAME = "name";
private static String KEY_EMAIL = "email";
private static String KEY_CREATED_AT = "created_at";

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.register);

    // Importing all assets like buttons, text fields
    inputFullName = (EditText) findViewById(R.id.registerName);
    inputEmail = (EditText) findViewById(R.id.registerEmail);
    inputPassword = (EditText) findViewById(R.id.registerPassword);
    btnRegister = (Button) findViewById(R.id.btnRegister);
    btnLinkToLogin = (Button) findViewById(R.id.btnLinkToLoginScreen);
    registerErrorMsg = (TextView) findViewById(R.id.register_error);

    // Register Button Click event
    btnRegister.setOnClickListener(new View.OnClickListener() {
        public void onClick(View view) {
            String name = inputFullName.getText().toString();
            String email = inputEmail.getText().toString();
            String password = inputPassword.getText().toString();
            UserFunctions userFunction = new UserFunctions();
            JSONObject json = userFunction.registerUser(name, email, password);

            // check for login response
            try {
                if (json.getString(KEY_SUCCESS) != null) {
                    registerErrorMsg.setText("");
                    String res = json.getString(KEY_SUCCESS);
                    if(Integer.parseInt(res) == 1){
                        // user successfully registered
                        // Store user details in SQLite Database
                        DatabaseHandler db = new DatabaseHandler(getApplicationContext());
                        JSONObject json_user = json.getJSONObject("user");

                        // Clear all previous data in database
                        userFunction.logoutUser(getApplicationContext());
                        db.addUser(json_user.getString(KEY_NAME), json_user.getString(KEY_EMAIL), json.getString(KEY_UID), json_user.getString(KEY_CREATED_AT));
                        // Launch Dashboard Screen
                        Intent dashboard = new Intent(getApplicationContext(),   DashboardActivity.class);
                        // Close all views before launching Dashboard
                        dashboard.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                        startActivity(dashboard);
                        // Close Registration Screen
                        finish();
                    }else{
                        // Error in registration
                        registerErrorMsg.setText("Error occured in registration");
                    }
                }
            } catch (JSONException e) {
                e.printStackTrace();
            }
        }
    });

    // Link to Login Screen
    btnLinkToLogin.setOnClickListener(new View.OnClickListener() {

        public void onClick(View view) {
            Intent i = new Intent(getApplicationContext(),
                    LoginActivity.class);
            startActivity(i);
            // Close Registration View
            finish();
        }
    });
}
} 
```

* * *

用户函数.java

```
package library;

import java.util.ArrayList;
import java.util.List;

import org.apache.http.NameValuePair;
import org.apache.http.message.BasicNameValuePair;
import org.jsn.JSONObject;

import android.content.Context;

public class UserFunctions {

private JSONParser jsonParser;

// Testing in localhost using wamp or xampp
// use http://10.0.2.2/ to connect to your localhost ie http://localhost/
private static String loginURL = "http://10.0.2.2:82/android_api/";
private static String registerURL = "http://10.0.2.2:82/android_api/";

private static String login_tag = "login";
private static String register_tag = "register";

// constructor
public UserFunctions(){
    jsonParser = new JSONParser();
}

/**
 * function make Login Request
 * @param email
 * @param password
 * */
public JSONObject loginUser(String email, String password){
    // Building Parameters
    List<NameValuePair> params = new ArrayList<NameValuePair>();
    params.add(new BasicNameValuePair("tag", login_tag));
    params.add(new BasicNameValuePair("email", email));
    params.add(new BasicNameValuePair("password", password));
    JSONObject json = jsonParser.getJSONFromUrl(loginURL, params);
    // return json
    // Log.e("JSON", json.toString());
    return json;
}

/**
 * function make Login Request
 * @param name
 * @param email
 * @param password
 * */
public JSONObject registerUser(String name, String email, String password){
    // Building Parameters
    List<NameValuePair> params = new ArrayList<NameValuePair>();
    params.add(new BasicNameValuePair("tag", register_tag));
    params.add(new BasicNameValuePair("name", name));
    params.add(new BasicNameValuePair("email", email));
    params.add(new BasicNameValuePair("password", password));

    // getting JSON Object
    JSONObject json = jsonParser.getJSONFromUrl(registerURL, params);
    // return json
    return json;
}

/**
 * Function get Login status
 * */
public boolean isUserLoggedIn(Context context){
    DatabaseHandler db = new DatabaseHandler(context);
    int count = db.getRowCount();
    if(count > 0){
        // user logged in
        return true;
    }
    return false;
}

/**
 * Function to logout user
 * Reset Database
 * */
public boolean logoutUser(Context context){
    DatabaseHandler db = new DatabaseHandler(context);
    db.resetTables();
    return true;
}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T18:26:29.963

在我看来，就像 registerErrorMsg 为 null - 例如，在布局中找不到您的文本视图。您使用的 id (R.id.register_error) 有可能在另一个元素中声明。

# html - HTML 页面中的浮动元素

> ID：15162324
> 
> 赞同：0
> 
> 时间：2013-03-01T16:28:58.867
> 
> 标签：html, css, css-position

我在 html 页面的正文中有这个 div 元素：

```
<div id="alerts">
{% block alerts %}
  {% try %}
    {% if alerts is not None %}
      {% for alert in alerts %} 
        <div class="{{alert.get('level', 'alert') }}">
          {{ alert.get('content') }}
        </div>
      {% end %}
    {% end %}
  {% except NameError %}
  {% end %}
{% end %}   
</div> 
```

在某些情况下显示警报或错误。

但是当我向下滚动页面时，这是不可见的。如何在页面顶部显示与页面本身滚动相关的此元素？

CSS是这样的：

```
#alerts { 
display:none; 
top: 0;
left: 0;
width: 100%;
position: absolute;
z-index: 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T16:36:41.753

尝试`position:fixed`而不是`absolute`这里的更多关于定位的信息以防万一：[https ://developer.mozilla.org/en-US/docs/CSS/position](https://developer.mozilla.org/en-US/docs/CSS/position)

# php - 具有相同表的多个连接的 SQL

> ID：15162326
> 
> 赞同：2
> 
> 时间：2013-03-01T16:28:59.960
> 
> 标签：php, mysql, sql

我正在建立一个论坛，但我遇到了一个带有许多连接的 SQL 选择问题。我想在同一行显示两个不同用户的图像。

用户的第一张图片是撰写主题的人，第二张图片是最后回复的用户。

我建立的查询：

```
SELECT 
posts.*, users.photo, users.displayname FROM posts 
JOIN users ON(posts.useraid = users.id)
JOIN users ON(posts.lastreply = user.id)
WHERE forumid='$forumid' and type='post' ORDER BY `timee` DESC 
```

*   posts.lastreply = 最后回复用户的 ID。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T16:31:04.823

`AS`您必须使用关键字为每个表指定一个别名：

```
SELECT posts.*, 
    u1.photo AS creatorPhoto, u1.displayname AS creatorName, 
    u2.photo AS replierPhoto, u2.displayname AS replierName
FROM posts 
JOIN users AS u1 ON(posts.useraid = u1.id)
JOIN users AS u2 ON(posts.lastreply = u2.id)
WHERE forumid= @forumid and type='post' 
ORDER BY `timee` DESC 
```

`users`请注意我如何用不同的名称调用表的每个实例-`u1`和`u2`. 还要注意我是如何指定一个列别名来区分两个同名的列（例如`creatorPhoto`和`replierPhoto`）。这样，您可以使用名称作为 PHP 关联数组的索引*la* `$post['creatorPhoto']`。

*是的，我已经默默地将您的内联变量更改为参数。把它当作一个提示。:-D*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T16:31:23.823

除了子句中缺少别名之外，and子句`from`也可能存在问题。您需要为那里的列使用别名。`where``order by`

我不知道它们来自哪里，但类似：

```
WHERE posts.forumid='$forumid' and posts.type='post'
ORDER BY posts.`timee` DESC 
```

假设所有来自`posts`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-01T16:31:49.500

你需要一个别名才能工作

```
SELECT 
posts.*, u1.photo, u1.displayname, u2.photo, u2.displayname FROM posts 
JOIN users u1 ON posts.useraid = u1.id
JOIN users u2 ON posts.lastreply = u2.id
WHERE forumid='$forumid' and type='post' ORDER BY `timee` DESC 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-01T16:33:06.907

```
SELECT posts.*, author.photo as author_photo, author.displayname as author+name,
       replier.photo as replier_photo, replier.displayname as replier_name
FROM posts 
  JOIN users author ON(posts.useraid = users.id)
  JOIN users replier ON(posts.lastreply = user.id)
WHERE forumid='$forumid' and type='post' ORDER BY `timee` DESC 
```

# objective-c - 如何将 ivar 传递给函数并设置它而不丢失对原始对象的引用

> ID：15162328
> 
> 赞同：0
> 
> 时间：2013-03-01T16:29:19.093
> 
> 标签：objective-c, scope, ivar

我将 ivar (NSMutableArray) 传递给某个方法。我期待如果我在函数内部修改对象，它会反映在函数外部，但是在这种情况下我需要设置对象；类似于以下内容：

```
- (void) someMethod:(SMResponseObject *)response onData:(NSMutableArray *)imAnIvar {
    imAnIvar = [response objects];
    //Some other stuff
} 
```

但是我注意到，当我设置它时，函数内部*imAnIvar的内存引用会***发生变化**，并且鉴于此，实际的 ivar 不会改变。我知道问题在于我正在更改方法内对象的引用，因此它停止指向 ivar，然后指向其他一些随机内存方向。

我想到了一个解决这个问题的方法，它可以是在调用函数之前确保 ivar 不是 nil 并执行以下操作：

```
- (void) someMethod:(SMResponseObject *)response onData:(NSMutableArray *)imAnIvar {

    NSMutableArray *data = [response objects];
    [arrayForTableView removeAllObjects];
    for(id element in data){
        [imAnIvar addObject:element];
    }
    //Some other stuff
} 
```

所以我使用原始对象而不是直接设置它。问题是，为了使它工作，我需要确保 ivar 不是 nil，我认为它不干净，因为我需要在每次调用该方法时执行类似的操作：

```
if(!_ivar){
  //alloc it
} 
```

所以我的问题是：有没有办法强制局部范围变量指向原始变量，即使我正在设置它？如果没有，有没有更清洁的方法来完成这项工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T16:35:09.200

你是这个意思吗？

```
- (void)setFoo:(SomeClass **)objPtr
{
    *objPtr = someOtherObject;
}

// call it as:

SomeClass *foo = someObject;
NSLog(@"Before: %@", foo);
[self setFoo:&foo];
NSLog(@"After: %@", foo); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T16:38:16.553

为什么不对数组使用 getter，这样您在使用时就不需要检查数组是否为 nil？

```
-(NSMutableArray *)iAmAnIvar {
   if(_iAmAnIvar == nil) {
     _iAmAnIvar = [NSMutableArray array];
   }
   return _iAmAnIvar;
 } 
```

当您必须为数组设置一个值时，正如您在问题中提到的，您可以使用

```
[self.iAmAnIvar removeAllObjects];
[self.iAmAnIvar addObject:someObj]; 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-03-01T16:36:22.310

我相信你可以使用的`- (id)copy;`功能`NSObject`

所以您的代码可能如下所示：

```
 - (void)someFunction:(NSString *)someArg
 {
     NSString *str = [someArg copy];
 } 
```

# java - Eclipse java Debugger 动态生成类的类结构

> ID：15162329
> 
> 赞同：1
> 
> 时间：2013-03-01T16:29:23.203
> 
> 标签：java, eclipse, spring

新手问题——

我有在加载时由 spring 容器（支持 aop 的代理）生成的类，我想知道是否有一种方法可以使用 eclipse 调试器（或者不编写代码）来检查类结构。现在，堆栈显示方法调用和文本`"line: not available [local variables unavailable]"`，编辑器显示`"Source not found."`我想了解有关类结构的信息：例如，该类是否是最终的，其方法的可见性是什么等。

提前致谢！

# xml - 比较两个模式以发现变化

> ID：15162334
> 
> 赞同：2
> 
> 时间：2013-03-01T16:29:34.623
> 
> 标签：xml, xsd

我正在查看 20000 行模式，并且我想检查自上一个版本以来此模式中发生了什么变化。我需要弄清楚相同架构的 2 个版本有什么不同。

有什么好的工具吗？90% 的模式仍然相同，但我想要某种更改列表。任何帮助表示赞赏。

编辑 => 相比之下，挑战在于模式的版本 1 被拆分为 4 个模式（一个包括另一个模式），而版本 2 是一个单一的合并模式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T19:13:15.177

[QTAssistant](http://www.paschidev.com)（我与它相关联）在 XML Schema Refactoring (XSR) 模块中内置了一个 XML Schema 比较。您需要做的就是：

*   创建一个新的 XML 模式重构文件
*   创建一个新的 XML 模式集合。您会自动获得与此集合关联的 1.0.0 版本。
*   添加您的第一组 XSD 文件（一个或多个，无论您认为哪个版本）。
*   添加新版本（它会自动增加到 1.1.0）
*   将您的其他版本的文件添加到此。
*   右键单击其中一个版本并调用 Compare with Version... 命令
*   根据提示选择要与之比较**的其他版本。**

![QTAssistant XSR 选择架构版本](../Images/9c92c57763cfffa577bf4a0507ba6681.png)

*   探索报告。您可以将其导出到 Excel 等中。

这显示了比较[ACORD](http://www.acord.org/)的两个不同版本，2.21.0 与 2.26.0；我选择了它们，因为一个是 1 个文件，另一个是 4 个文件。

![QTAssistant XML 模式差异](../Images/7472d09c73087654842ea469dd7194f8.png)

这就是报告的样子。

![在此处输入图像描述](../Images/837d5e13cc9ad00d40aa3ce36c337ada.png)

单击源时，您可以并排看到图形表示（如果适用）。

![在此处输入图像描述](../Images/6e6fd4eecb10af0ae311bdcdf4045ba0.png)

可能需要一些时间来适应状态和扩展状态，根据我们的经验，不同的人可能会有不同的解释，因为 XSD 比较中的细微差别可能是多重的。尽管如此，支持是一封电子邮件。

# java - EasyMock 异常处理

> ID：15162337
> 
> 赞同：4
> 
> 时间：2013-03-01T16:29:45.370
> 
> 标签：java, junit, easymock

我正在使用 EasyMock 创建一些 junit 测试用例。到目前为止，我期望返回 POJO 的类是有意义的，但是我应该如何处理本身可能引发异常的 DAO 对象。我的测试用例是检查 DAO 遇到问题时抛出的预期异常。使用 EasyMock 我尝试模拟 DAO 对象（从`foo`类测试），处理较低级别 DAO 异常的正确方法是什么。

下面是类/简单调用的示例：（假设所有 getter/setter/constructor 都有效且存在）

```
public class foo{
    private daoClass dao = daoClass.getInstance();
    public String getValueFromDB(String key) throws DBException{
        return dao.lookup(key);
    }
}

public class daoClass{ //singleton DAO 
    public daoClass getInstance(){
       //singleton access here
    }
    public String lookup(String key) throws DBException{
        try{
            //DB LOGIC
        }
        catch(Exception e){
            throw new DBException(e.getMessage());
        }
    }
} 
```

当我尝试测试这个`foo`类时，我希望能够测试这个 DBException。我该如何处理这个问题，我应该在 try/catch 中（在测试中）包围 DAO 调用，还是在测试中添加 throws？我知道`expected=DBException`如果抛出它会通过测试，但是你应该如何在语法上处理任意数量的内部异常？

测试代码示例：

```
@Test(expected=DBException.class)
public void testFooError(){
    String key = "test";
    String value = "expected";
    daoClass daoMock = createMock(daoClass.class);
    try{
        expect(daoMock.lookup(key)).andReturn(value);
    } catch (DBException e){
        // ???
    }
} 
```

当`expect`可能引发错误时，正确的处理方法是什么？测试方法`throw`应该例外，还是应该`try/catch`使用？`expected=EXCEPTION`在测试中使用标签仍然正确吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-01T16:51:58.977

以下是我在单元测试中处理异常的方式：

如果您*没有*显式测试异常，那么您应该在方法中添加一个 throws 子句 - 如果抛出异常并且您不希望它被抛出，那么这是一个测试失败。例如，

```
@Test
public void testFooNormal() throws DBException{
    String key = "test";
    String value = "expected";
    daoClass daoMock = createMock(daoClass.class);
    expect(daoMock.lookup(key)).andReturn(value);
    // do an assert on returned value
    ...
} 
```

如果您*正在*显式测试异常，则在您期望它被抛出的行周围放置一个 try-catch（捕获您期望的最窄版本的异常），然后在 catch 子句中设置一个布尔值，并且断言应该打开布尔值。例如，

```
@Test
public void testFooError(){
    String key = "test";
    String value = "expected";
    boolean exceptionThrown = false;
    daoClass daoMock = createMock(daoClass.class);
    try{
      expect(daoMock.lookup(key)).andReturn(value);
    }catch (DBException e) {
      exceptionThrown = true;
    }
    // assert exceptionThrown is true
    ...
} 
```

这是测试异常的好方法，因为这意味着您不仅要测试是否抛出了正确的异常，还要测试它是否完全从您期望的行中抛出。如果您使用 @test(expected=...) 则测试中的不同行可能会引发该异常并且测试可能会错误地通过。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-01T16:41:10.050

您的 DAO 逻辑不应根据您的测试而改变。如果您希望您的 DAO 抛出异常，请保持这种状态并以您正在测试的方式测试异常。

如果您在 DAO 本身中捕获异常以进行回滚或日志记录等，那么测试用例不应期望出现异常，因为它不是测试用例场景。在这种情况下，您可以检查 NULL ，因为我希望您的 DAO 将返回 NULL 。

# drupal - 如何在视图中添加自定义字段？

> ID：15162343
> 
> 赞同：2
> 
> 时间：2013-03-01T16:29:56.797
> 
> 标签：drupal, drupal-7, drupal-views

我在 Drupal 7 中创建了一个视图，并使用“表格”作为格式。如何将自己的字段添加到该表中？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-01T17:16:29.917

一种方法是，在您的视图中，单击“添加”字段，然后按“全局”过滤，您将获得 4 种类型的自定义字段要添加。

1.  全局：上下文链接
2.  全局：自定义文本
3.  全局：数学表达式
4.  全局：查看结果计数器

另一种方法是使用[Views Custom Field](http://drupal.org/project/views_customfield)模块。

# sql - 将可变长度 DB 行展平为单列

> ID：15162348
> 
> 赞同：1
> 
> 时间：2013-03-01T16:30:21.963
> 
> 标签：sql, sql-server, sql-server-2005, pivot

我已经搜索并找不到完全符合我需求的解决方案，也找不到我可以修改的解决方案。我有一个数据库表，为简单起见，我们会说它有三列（`packageID`、`carrier`和`sequence`）。对于任何包裹，都可能有一个或多个承运人处理该包裹。我可以做一个查询

```
SELECT packageID, carrier 
FROM packageFlow 
ORDER BY sequence 
```

获取所有处理过包裹的人的列表，如下所示：

```
packageID, carrier
1, Bob
1, Jim
1, Sally
1, Ron
2, Reggie
2, Mary
2, Bruce 
```

我需要的是将结果放入如下所示的行中：

```
packageID|carrier1|carrier2|carrier3|carrier4
   1     |Bob     |Jim     |Sally   |Ron
   2     |Reggie  |Mary    |Bruce 
```

Pivot 似乎没有做我需要的事情，因为我没有聚合任何东西，我也无法让 CTE 正常工作。我会很感激任何朝着正确方向的推动。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T17:06:25.350

此数据转换是一个[`PIVOT`](http://msdn.microsoft.com/en-us/library/ms177410%28v=sql.105%29.aspx). 从 SQL Server 2005 开始，有一个函数可以将行转换为列。

如果您有已知数量的值，则可以对查询进行硬编码：

```
select *
from 
(
  select packageid, carrier,
    'Carrier_'+cast(row_number() over(partition by packageid order by packageid) as varchar(10)) col
  from packageflow
) src
pivot
(
  max(carrier)
  for col in (Carrier_1, Carrier_2, Carrier_3, Carrier_4)
) piv 
```

请参阅[SQL Fiddle with Demo](http://www.sqlfiddle.com/#!3/d3d84/1)。

如果您想将未知数量的`Carrier`值转换为列，则可以使用动态 sql：

```
DECLARE @cols AS NVARCHAR(MAX),
    @query  AS NVARCHAR(MAX)

select @cols = STUFF((SELECT distinct ',' + QUOTENAME(t.col) 
                    from 
                    (
                      select 'Carrier_'+cast(row_number() over(partition by packageid order by packageid) as varchar(10)) col
                      from packageFlow
                    ) t                    
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

set @query = 'SELECT packageid,' + @cols + ' from 
             (
                select packageid, carrier,
                  ''Carrier_''+cast(row_number() over(partition by packageid order by packageid) as varchar(10)) col
                from packageflow
            ) x
            pivot 
            (
                max(carrier)
                for col in (' + @cols + ')
            ) p '

execute(@query) 
```

请参阅[SQL Fiddle with Demo](http://www.sqlfiddle.com/#!3/d3d84/4)。

*注意：您将替换`order by packageid`为`order by sequence`*

两个查询的结果是：

```
| PACKAGEID | CARRIER_1 | CARRIER_2 | CARRIER_3 | CARRIER_4 |
-------------------------------------------------------------
|         1 |       Bob |       Jim |     Sally |       Ron |
|         2 |    Reggie |      Mary |     Bruce |    (null) | 
```

# sql - 具有唯一值的 SQL Server COUNT 查询

> ID：15162352
> 
> 赞同：3
> 
> 时间：2013-03-01T16:30:29.717
> 
> 标签：sql, join, count, sql-server-2008-r2

这是在 Microsoft SQL Server 2008 R2 中完成的。

我将从一个示例表开始。

```
Organization | MoneyAmount | MoneyAmountAvg

ISD          | 500         | 
ISD          | 500         | 
ISD          | 500         | 
QWE          | 250         | 
ISD          | 500         | 
QWE          | 250         | 
OLP          | 800         | 
ISD          | 500         | 
```

我需要**MoneyAmountAvg**列的值为`MoneyAmount/(# of times that organization shows up`

例如，**ISD行的****MoneyAmountAvg**列的值为**100**。

 ******对于MoneyAmountAvg**列中的每一行，**QWE**的值为**125** ，而**OLP**的值为**800**，因为它只存在一次。

 ******这只是一个示例表。实际的表要大得多，并且有更多的组织，但它具有相同的标准。一些组织有多个行，而其他组织只有一次。

当我为该组织的 MoneyAmountAvg 列使用更新语句时，我只需要一种方法来计算每个组织被列出的次数。为每个组织硬编码绝对不是一种选择，因为它们可以随时更改。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T16:35:43.403

尝试这样的事情：

```
;WITH CTE AS
(
    SELECT
        Org, Moneyamount,
        MoneyAvg = AVG(MoneyAmount) OVER(PARTITION BY Org),
        OrgCount = COUNT(*) OVER (PARTITION BY Org)
    FROM 
        dbo.YourTableHere
)
SELECT DISTINCT Org, MoneyAmount, OrgCount, MoneyAvg / OrgCount
FROM CTE 
```

这似乎返回了你正在寻找的东西：

![在此处输入图像描述](../Images/fa9eb0637c4570b121ad235dd0938bde.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T16:37:35.880

这是我的答案：

```
select organization, moneyamount,
       moneyamount / count(*) over (partition by organization)
from t 
```

这是一个窗口函数的简单应用。我认为大多数其他答案都在产生总体平均值。

对于更新语句，只需执行以下操作：

```
 with toupdate as (
    select organization, moneyamount,
           moneyamount / count(*) over (partition by organization) as newval
    from t
 )
 update toupdate
       set MoneyAmountAvg = newval 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T16:35:39.477

您可以使用分析函数执行此操作：

```
SELECT  Organization,
        MoneyAmount,
        MoneyAmountAvg = MoneyAmount / COUNT(*) OVER(PARTITION BY Organization)
FROM    T 
```

**[SQL Fiddle 示例](http://www.sqlfiddle.com/#!3/ce80f/2)**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-01T16:35:47.460

```
SELECT (MIN(MoneyAmount) / COUNT(*)) AS AvgMoneyAmount
FROM your_table
GROUP BY Organization 
```

如果单个组织的 MoneyAmout 始终相等，则此方法有效。

* * *

但我会说：重构表：

```
Organization | MoneyAmount | count
----------------------------------
ISD          | 500         | 5
QWE          | 250         | 2
... 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-01T16:37:48.237

```
select example.Organization, example.MoneyAmount,
       example.MoneyAmount / count(group_table.Organization) as  MoneyAmountAvg
from example
  inner join example group_table
     on example.Organization = group_table.Organization 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-01T16:39:18.320

```
select
    organization
    ,avg(MoneyAmount) / count(1) 
  from tab
  group by organization 
```

**avg(Moneyamount)**的目的是为同一组织处理可能的不同金额值。**********

# javascript - 根据来自 ajax 的响应启用 div

> ID：15162353
> 
> 赞同：0
> 
> 时间：2013-03-01T16:30:36.337
> 
> 标签：javascript, html, ajax

我有一个 ajax 调用，我需要根据来自 ajax 调用的响应显示一个特定的 div。这是我的ajax调用

```
 var cmnumber = document.forms['myform']['cm'].value;
        alert(cmnumber)
    $.ajax({
    type:'get',
    url: "/validatecm/"+cmnumber,
    cache:false,
    async:true,
    data:cmnumber,
    success: function(data) {

    },
    error: function(data) {
    }
    })

    }); 
```

如果响应成功，我需要在 div 上显示。默认 div 是隐藏的。

```
 <div class="downtime" id="downtime" style="display: none" >
                          --------------
                    </div> 
```

任何帮助将不胜感激..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T16:32:17.530

尝试这个

```
var cmnumber = document.forms['myform']['cm'].value;
    alert(cmnumber)
    $.ajax({
      type:'get',
      url: "/validatecm/"+cmnumber,
      cache:false,
      async:true,
      data:cmnumber,
     success: function(data) {

       if(data == "success")
        $('#downtime').show();
       else
        $('#downtime').hide();

   },
  error: function(data) {
   }
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T16:33:35.510

我认为你可以使用

```
$.ajax({
    type:'get',
    url: "/validatecm/"+cmnumber,
    cache:false,
    async:true,
    data:cmnumber
}).done(function(data){
    $('#downtime').show();
}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T16:35:22.987

添加`data`到`div`并显示它。

```
success: function(data) {
  $('#downtime').html(data).show();
},
error: function(data) {
  $('#downtime').html().hide();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-01T16:35:55.403

```
document.getElementById("downtime").style.display = "block"; 
```

请参阅[https://developer.mozilla.org/en-US/docs/CSS/display](https://developer.mozilla.org/en-US/docs/CSS/display)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-01T17:40:22.213

获取文本框的值并将其保存在 cmnumber 中。确保在 html 文件中包含 jquery

```
function makeAjaxCall(){

    var cmnumber=$("#cm").val();

    var url="/validatecm/"+cmnumber;

    $.ajax({url:url,success:function(result){

        handleResult(result);

    }});

}

function handleResult(result){
// if result is what you expect it is then enable the div

    if(result=="ok"){

        $("#downtime").css('display','block');

    }

} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-05-02T00:09:50.470

我是 AJAX 新手，但您必须更改一件事以隐藏/显示 div：

```
var cmnumber = document.forms['myform']['cm'].value;
    alert(cmnumber)
    $.ajax({
      type:'get',
      url: "/validatecm/"+cmnumber,
      cache:false,
      async:true,
      data:cmnumber,
     success: function(data) {

       if(data.**MESSAGE** == "success")
        $('#downtime').show();
       else
        $('#downtime').hide();

   },   error: function(data) {    } }) 
```

# javascript - Safari 中奇怪的浮点数行为

> ID：15162354
> 
> 赞同：2
> 
> 时间：2013-03-01T16:30:36.427
> 
> 标签：javascript, safari, numbers

以下代码有什么问题？

```
$(function() {
    var ok = true;
    for (var i = 0; i < 1000; i++) {
        var x = 100; // if we use new Number(100) here, the test will pass
        $.each([1,2], function(k) {
            x -= 5.5; // if we use integer (or declare a variable with value 5.5 outside this scope), the test will pass
            return false;
        });
        if (x + 5.5 != 100) {
            fail();
        }
    }
}); 
```

此测试在所有浏览器中成功通过，但在 Safari 6 (6.0.2 (8536.26.17)) 中失败。代码有错误吗？还是浏览器的bug？[这](http://jsfiddle.net/Antelle/2zMA6/)是 jsFiddle 上的示例。它输出：

```
OK: 94.5 + 5.5 = 100
FAIL: 95 + 5.5 = 100 
```

# c# - 返回渲染视图而不是返回视图

> ID：15162355
> 
> 赞同：2
> 
> 时间：2013-03-01T16:30:37.500
> 
> 标签：c#, asp.net, asp.net-mvc

我习惯于：

```
public ActionResult CreateSomething()
{
    return View("ViewName", new CreateSomeDto());
} 
```

我刚刚在一些遗留代码中遇到了这个问题：

```
 public ActionResult CreateSomething()
    {
        return RenderView("ViewName", new CreateSomeDto());
    } 
```

有人可以解释一下区别吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T16:36:20.143

`RenderView()`是 MVC 1.0 中的一种过时方法

ViewEngine 没有那么复杂。控制器方法没有返回`ActionResults`。事实上，他们回来了`void`。调用不会返回字符串`RenderView`，而是“渲染”或将视图写入到位。

`Html.RenderPartial()`它的功能与渲染到视图中的方式非常相似。

# android - 无法消除android中的错误

> ID：15162356
> 
> 赞同：1
> 
> 时间：2013-03-01T16:30:37.993
> 
> 标签：android

对于所有我正在使用 android 并希望`RadioGroup`在`CheckBox`简单的应用程序中同时使用的人，我想同时使用`setOnCheckedChangeListener()`这两种方法，但我遇到错误说导入冲突。我的代码是：

```
public class MainActivity extends Activity {

RadioGroup radioGroup;
CheckBox checkBox;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    radioGroup = (RadioGroup) findViewById(R.id.radioGroup1);
    checkBox = (CheckBox) findViewById(R.id.checkBox1);
    radioGroup.setOnCheckedChangeListener(new OnCheckedChangeListener() {

        @Override
        public void onCheckedChanged(RadioGroup group, int checkedId) {
            // TODO Auto-generated method stub
            int option = radioGroup.getCheckedRadioButtonId();
            if(option == R.id.radio0){
                Toast.makeText(MainActivity.this, "You Selected Java is Best", Toast.LENGTH_LONG).show();
            }
            else if(option == R.id.radio1){
                Toast.makeText(MainActivity.this, "You Selected C++ is Best", Toast.LENGTH_LONG).show();
            }
            else{
                Toast.makeText(MainActivity.this, "You Selected C# is Best", Toast.LENGTH_LONG).show();
            }
        }
    });

    checkBox.setOnCheckedChangeListener(new OnCheckedChangeListener() {

        @Override
        public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
            // TODO Auto-generated method stub
            if(isChecked){
                Toast.makeText(MainActivity.this, "You Selected Yes", Toast.LENGTH_LONG).show();
            }else{
                Toast.makeText(MainActivity.this, "You Un-selected Yes", Toast.LENGTH_LONG).show();
            }
        }
    });

} 
```

`Edit`

我的进口是：

`import android.app.Activity;`

`import android.os.Bundle;`

`import android.view.Menu;`

`import android.widget.CheckBox;`

`import android.widget.CompoundButton;`

`import android.widget.CompoundButton.OnCheckedChangeListener;// this one collides with`

`import android.widget.RadioGroup;`

`import android.widget.Toast;`

`import android.widget.RadioGroup.OnCheckedChangeListener;// this one`

现在我无法解决这个问题，请告诉我该怎么做。提前致谢...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T16:36:06.443

有两种不同的 OnCheckedChangeListener，让编译器知道你要使用哪个版本：

RadioGroup 使用[`RadioGroup.OnCheckedChangeListener`](https://developer.android.com/reference/android/widget/RadioGroup.OnCheckedChangeListener.html)：

```
radioGroup.setOnCheckedChangeListener(new RadioGroup.OnCheckedChangeListener() {
//                                        ^^^^^^^^^^^ 
```

复选框使用[`CompoundButton.OnCheckedChangeListener`](https://developer.android.com/reference/android/widget/CompoundButton.OnCheckedChangeListener.html)：

```
checkBox.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {
//                                      ^^^^^^^^^^^^^^^ 
```

# c# - 清除 Windows Phone 上的隔离存储

> ID：15162357
> 
> 赞同：0
> 
> 时间：2013-03-01T16:30:50.277
> 
> 标签：c#, visual-studio, windows-phone-7, windows-phone-8

我已经在 Windows Phone 市场上发布了一个应用程序。现在，我正在进行更新（实际上是第一次更新），并且我已经更改了数据在独立存储上的保存方式。我担心当我发布更新时人们会因为隔离存储的混乱而崩溃。有什么方法可以删除已存储在隔离存储和隔离存储设置中的所有数据？我不能通过删除每个文件来手动执行此操作，因为存储了数百个文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T16:55:52.260

假设您将文件放在一个目录中，为什么不调用`DeleteDirectory()`？您需要在那里检查以确保您只删除旧的东西（并确保它只发生一次）。

[http://msdn.microsoft.com/en-us/library/windowsphone/develop/system.io.isolatedstorage.isolatedstoragefile.deletedirectory(v=vs.105).aspx](http://msdn.microsoft.com/en-us/library/windowsphone/develop/system.io.isolatedstorage.isolatedstoragefile.deletedirectory(v=vs.105).aspx)

**更新：**

为了消除任何混淆，这里是一个使用的例子`DeleteDirectory`：

```
// Delete a specific directory.
string dirDelete = Path.Combine("MyApp1", "SubDir3");
try
{
   if (store.DirectoryExists(dirDelete))
   {
      store.DeleteDirectory(dirDelete);
   }
}
catch (IsolatedStorageException ex)
{
   sb.AppendLine(ex.Message);
} 
```

# batch-file - 批处理脚本失败并显示“系统找不到指定的路径”

> ID：15162358
> 
> 赞同：3
> 
> 时间：2013-03-01T16:30:50.713
> 
> 标签：batch-file, chdir

我编写了以下批处理脚本，它在一个目录上运行另一个批处理脚本，或者，添加一个标志，在目录树上，然后在不同驱动器 (Z:) 上的等效目录或目录树上运行。无论我选择哪个选项，它都会输出错误“系统找不到指定的路径”。如果我只在一个目录上执行它，它会做它应该做的事情，即使它给出了错误。它不能在目录树上成功运行。我已经在不关闭@echo 的情况下运行它，以尝试了解它失败的地方，但没有成功。它试图更改的目录确实存在。

```
@echo off
set origdir=%CD%
if X%~f1==X (
echo Please input a directory.
goto done
)

chdir /d %~f1
for %%X in (myotherscript.bat) do (set FOUND=%%~$PATH:X)
if not defined FOUND (
    echo myotherscript is not in your PATH
    )
if X%2==X/R (
goto recursive
) else ( goto single )

 :recursive     
for /d /r %%G in (.) do call myotherscript
echo Z:%~p1
chdir /d "Z:%~p1"
for /d /r %%G in (.) do call myotherscript
goto ended

:single
call myotherscript
echo Z:%~p1
chdir /d "Z:%~p1"
call myotherscript
goto ended

:ended
chdir /d origdir
goto done

:done
pause 
```

这里是“myotherscript” 是的，purge 确实存在。

```
@echo off
if exist "D:\path\to\purge.bat" (
    call purge
    for %%f in (*.log.*) do call :renameit "%%f"
    for %%f in (*.drw.*) do call :renameit "%%f"
    for %%f in (*.asm.*) do call :renameit "%%f"
    for %%f in (*.prt.*) do call :renameit "%%f"
    goto done ) else (
    echo Purge does not exist.
    goto done )

:renameit
ren %1 *.1

:done 
```

任何帮助，将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-03T18:15:21.997

对我来说，我得到了“系统找不到指定的路径”，因为在脚本后面似乎缺少了一个 exe。似乎DOS中的管道并不总是按执行顺序输出数据。我习惯了 UNIX，其中脚本中每个“echo”命令的输出都是按顺序排列的，所以我在 .bat 文件中添加了调试输出，试图告诉我执行了哪些行。

问题是，关于未找到文件的错误在输出日志（和屏幕）中发生的方式早于 echo 命令所指示的方式。所以我不知道WinXP cmd shell是否提前了几步，或者它正在解析exe在被调用的bat文件启动期间调用或什么。

事实证明，这实际上是我从调用的 bat 脚本运行的 .exe 的错误路径，但 echo debug 语句让我觉得我在某种程度上是脚本的早期部分。一旦我在exe之前添加了正确的路径，它就一切正常了

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-04-06T05:37:22.073

我不确定为什么这个（非常老的）问题会被重新激活。但是既然有，让我们看看我们是否可以关闭它。

这里似乎有两个问题。第一的：

> 它输出错误“系统找不到指定的路径”。

这看起来像是这一行的一个简单错字：

```
chdir /d origdir 
```

如果没有 '%' 标记，这将尝试更改为字面上名为 的目录`origdir`，而不是运行脚本的原始目录，即：

```
chdir /d %origdir% 
```

第二个问题是：

> 如果我只在一个目录上执行它，它会做它应该做的事情，即使它给出了错误。它不能在目录树上成功运行。

猜测，这是由于这条线：

```
if X%2==X/R 
```

"IF" 区分大小写。如果您尝试使用 运行它`/r`，它不会看到递归请求并且总是会执行`single`。

# json - 无法将 JSONObject 从 Grails 控制器传递到 Grails 服务

> ID：15162359
> 
> 赞同：0
> 
> 时间：2013-03-01T16:30:52.843
> 
> 标签：json, grails, groovy

我在这里做错了什么，我无法将**JSON 对象**从**Grails Controller**传递给**Grails 服务**。

 **```
class SampleController {

  def sampleService

  def updateProduct() {
    def jq = request.JSON
    sampleService(jq)
  }    
}

class SampleService { 

  def updateProduct (JSONObject requestJSON) {
    if (!requestJSON) {
        return null;
    }
  }
} 
```

没有方法签名：`com.SampleService.call()`适用于参数类型：`(org.codehaus.groovy.grails.web.json.JSONObject)`值：

可能的解决方案：

`wait()`, `any()`, `wait(long)`, `any(groovy.lang.Closure)`, `each(groovy.lang.Closure`), `find()`.

堆栈跟踪如下：

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T16:41:59.143

您正在尝试将服务对象作为方法调用。

`sampleService(jq)`应该`sampleService.updateProduct(jq)`**

# android - Android：支持库中的片段可以工作，但常规库不能

> ID：15162368
> 
> 赞同：0
> 
> 时间：2013-03-01T16:31:18.047
> 
> 标签：android, android-support-library

我有以下代码...

```
import android.support.v4.app.FragmentPagerAdapter;
import android.support.v4.app.Fragment;
import android.support.v4.app.FragmentActivity;
...
public class LevelSelectorFragmentActivity extends FragmentActivity {
  ...
  @Override
  public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_level);
    this.mAdapter = new LevelFragmentPagerAdapter(this);
  }
  private static class LevelFragmentPagerAdapter extends FragmentPagerAdapter {

    public LevelFragmentPagerAdapter(FragmentActivity a) {
        super(a.getSupportFragmentManager());
    }

    @Override
    public Fragment getItem(int position) {
        return Level1Fragment.newInstance();
    }

    @Override
    public int getCount() {
        return NUMBER_OF_PAGES;
    }

  }
} 
```

这工作正常，但是当我将表单 FragmentActivity 更改为 Activity 并将导入更改如下...

导入 org.gleason.superhockey.fragment.Level1Fragment；

```
import android.app.Activity;
import android.app.Fragment;
import android.os.Bundle;
import android.support.v13.app.FragmentPagerAdapter;
public class LevelSelectorFragmentActivity extends Activity {

private static final int NUMBER_OF_PAGES = 2;
private LevelFragmentPagerAdapter mAdapter;

@Override
public void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_level);
    this.mAdapter = new LevelFragmentPagerAdapter(this);
}

private static class LevelFragmentPagerAdapter extends FragmentPagerAdapter {

    public LevelFragmentPagerAdapter(Activity a) {
        super(a.getFragmentManager());
    }

    @Override
    public Fragment getItem(int position) {
        return Level1Fragment.newInstance();
    }

    @Override
    public int getCount() {
        return NUMBER_OF_PAGES;
    }

}

} 
```

我得到以下 ClassNotFound ...

> java.lang.NoClassDefFoundError: org.gleason.superhockey.LevelSelectorFragmentActivity$LevelFragmentPagerAdapter

例如，我正在使用[这个](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android-apps/4.0.1_r1/com/example/android/supportv13/app/FragmentPagerSupport.java)

谁能看到我错过了什么？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-01T16:43:48.127

It's possible that your library .jar is in the wrong directory or is added twice to the project. Make sure your support library .jar is in /libs folder. Then check Build Path and remove the support library from it (if it's there). Clean project.

# java - AbstractMapBasedMultimap 的 GWT Guava 类加载器问题

> ID：15162370
> 
> 赞同：0
> 
> 时间：2013-03-01T16:31:23.903
> 
> 标签：java, gwt, guava

我已将两个番石榴库 (guava*-14.0.jar) 添加到我的 GWT 2.5.0 项目中 + 在模块定义中继承。之后我在部署到服务器后收到以下错误

```
[#|2013-03-01T16:56:02.041+0100|SEVERE|glassfish3.1.2|javax.enterprise.system.container.web.com.sun.enterprise.web|_ThreadID=96;_ThreadName=Thread-2;|WebModule[/GlnToolNight]Exception while dispatching incoming RPC call
java.lang.VerifyError: class com.google.common.collect.AbstractMapBasedMultimap overrides final method setMap.(Ljava/util/Map;)V
        at java.lang.ClassLoader.defineClass1(Native Method)
        at java.lang.ClassLoader.defineClass(ClassLoader.java:791) 
```

java.runtime.version = 1.7.0_09-b05

番石榴不支持Java 7？我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T16:33:29.067

听起来 Glassfish 正在错误地捆绑 Guava。我在[Guava bug 线程](http://code.google.com/p/guava-libraries/issues/detail?id=1318)上发布了更多信息。

# javascript - 每个类别的 highstocks 中的网格线

> ID：15162382
> 
> 赞同：0
> 
> 时间：2013-03-01T16:31:47.227
> 
> 标签：javascript, formatting, highcharts, highstock, gridlines

我正在尝试为每个类别获取网格线，但在我的代码中我设置了类别而不是使用 x 日期时间坐标。

我将如何处理高库存？

我试过这个没有运气

```
 xAxis: {
        type: 'datetime',
        dateTimeLabelFormats: {
            day: '%b of %Y'   
        },
        labels: {
            overflow: 'justify'
        },
        minorGridLineColor: '#E0E0E0'
    }, 
```

这是jsfiddle

[http://jsfiddle.net/pradeepbhat92/VuDJ7/](http://jsfiddle.net/pradeepbhat92/VuDJ7/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T09:37:14.617

您想获得 gridLines 位置或添加您的自定义线？在问题的第二部分，您可以使用 plotLines。

[http://api.highcharts.com/highstock#yAxis.plotLines](http://api.highcharts.com/highstock#yAxis.plotLines)

# android - ScrollView 内的 FrameLayout

> ID：15162386
> 
> 赞同：11
> 
> 时间：2013-03-01T16:31:59.890
> 
> 标签：android, layout

我是 android 开发的新手，我有以下问题。我需要使用`FrameLayout`inside of`ScrollView`使其可滚动。我写了这个

```
 <ScrollView
    android:id="@+id/scrollView1"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true" 
    android:background="#00ff00">

    <FrameLayout
        android:id="@+id/frameLayout"
        android:layout_width="match_parent"
        android:layout_height="500dp"
        android:background="#ff0000">
    </FrameLayout>
   </ScrollView> 
```

但这不起作用。我试过了`RelativeLayout`，它有效，但我需要使用 for `FrameLayout`。有任何想法吗？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2016-03-18T09:53:39.733

**android:fillViewport="true"**解决了这个问题。

android:fillViewport, 定义滚动视图是否应该拉伸其内容以填充视口。

```
 <ScrollView
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:fillViewport="true">

    <FrameLayout
        android:id="@+id/frameLayout"
        android:layout_width="match_parent"
        android:layout_height="wrap_content">
    </FrameLayout>
   </ScrollView> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-23T13:05:41.017

我尝试了许多变体来解决这个问题，包括这里的答案，但没有一个有用。`ScrollView`总是换行`FrameLayout`，但一切正常`RelativeLayout`，`LinearLayout`...

我为此找到了一种解决方案 - 将最小高度设置为`FrameLayout`. 您可以通过`setMinimumHeight()`方法动态设置最小高度。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-08-26T05:03:34.433

要在 ScrollView 中获取 FrameLayout，请执行以下操作：

```
<ScrollView
    android:id="@+id/scrollView1"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_below="@+id/linearLayoutHeader1"
    android:layout_centerHorizontal="true" >

    <LinearLayout
        android:id="@+id/LinearLayout1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical" >
        <FrameLayout
            android:id="@+id/FrameLayout1"
            android:layout_width="match_parent"
            android:layout_height="1440dp"
             >
        </FrameLayout>

    </LinearLayout>
</ScrollView> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-01T17:40:53.127

您的 xml 示例非常好，我唯一能看到的是：如果 ScrollLayout 父级大于 500dp，它将不会滚动。

实际上，仅当内容大于滚动视图时才使用滚动。

在这里，您将内容高度设置为 500dip，如果此 scrollView 的父级在 800dip 高度屏幕上占据整个屏幕，则将滚动视图设置为“match_parent”（例如）

=> 根本不需要滚动。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-03-01T17:53:52.860

尝试在 FrameLayout 中将 layout_height 设置为“wrap_content”

```
<FrameLayout
        android:id="@+id/frameLayout"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:background="#ff0000"> 
```

当 FrameLayout 高于屏幕边框时，它将滚动。或者，如果您想要可滚动区域的固定高度，请在 ScrollView 上将高度设置为 500dp。这取决于您想要什么，但永远不要在 ScrollView 子项上设置固定高度。ScrollView 子项的高度应始终为 wrap_content。

```
<ScrollView
    android:id="@+id/scrollView1"
    android:layout_width="match_parent"
    android:layout_height="500dp"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true" 
    android:background="#00ff00">

    <FrameLayout
        android:id="@+id/frameLayout"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:background="#ff0000">
    </FrameLayout>
</ScrollView> 
```

# c# - XNA 我的 menuscreen 类将不接受通过以前的 spritebatch.begin 进行的绘图

> ID：15162387
> 
> 赞同：1
> 
> 时间：2013-03-01T16:32:00.467
> 
> 标签：c#, xna, spritebatch

在我的游戏状态管理系统中，我有一个屏幕管理器和一个菜单屏幕，它们都添加到我当前的游戏中。屏幕管理器打开一个 spritebatch，然后调用所有订阅屏幕的绘制方法，但是当我在我的第一个订阅屏幕中进行第一个 SpriteBatch.Draw 调用时，我收到一条错误消息，指出之前必须调用 SpriteBatch.Begin，这它是。

ScreenManager 绘制代码：

```
 public override void Draw(GameTime gameTime)
    {
        SpriteBatch.Begin(SpriteSortMode.Deferred, BlendState.AlphaBlend);

        for (int i = 0; i < ScreenList.Count; i++)
        {
            if (ScreenList[i].Visible)
                ScreenList[i].Draw(gameTime);
        }

        SpriteBatch.End();

        base.Draw(gameTime);
    } 
```

和我的 MenuScreen 绘制代码：

```
 public override void Draw(GameTime gameTime)
    {
        SpriteBatch.Draw(Background, new Rectangle(0, 0, ScreenManager.Game.Window.ClientBounds.Width, ScreenManager.Game.Window.ClientBounds.Height),
                                                   null, Color.White, 0f, new Vector2(Background.Width / 2, Background.Height / 2), SpriteEffects.None, 1f);

        SpriteBatch.DrawString(Font, Text, Position, Color, 0f, Origin, Scale, SpriteEffects.None, 0f);

        foreach (MenuEntry entry in EntryList)
        {
            entry.Draw(gameTime);
        }
    } 
```

最后是我的基础游戏初始化代码，在其中创建所有这些组件：

```
 protected override void Initialize()
    {
        screenManager = new ScreenManager(this, Content.Load<SpriteFont>("Fonts/DefaultFont"), Content.Load<Texture2D>("Images/Background"));
        Components.Add(screenManager);

        screenManager.AddScreen(new MainMenuScreen(screenManager, "Tanks", new Vector2(screenManager.Game.Window.ClientBounds.Width / 2, 100)));

        base.Initialize();
    } 
```

注意： MainMenuScreen 继承自作为抽象类的 MenuScreen。我的 MenuScreen 类也从 ScreenManager 类中传递了一个 spritebatch，因此它们应该是相同的 spriteBatch。

# sql-server - 为没有游标的每个 XML 元素调用存储过程

> ID：15162388
> 
> 赞同：1
> 
> 时间：2013-03-01T16:32:03.443
> 
> 标签：sql-server, stored-procedures, sql-server-openxml

我在 SQL Server 中有这个存储过程：

```
alter PROCEDURE [dbo].[spSendLogLinesAsXML]
(
    @device_id varchar(128),
    @application_name VARCHAR(64),
    @application_user_name VARCHAR(6),
    @log_lines_xml XML
)
AS
BEGIN

DECLARE
    @ixml INT,
    @log_line_dt DATETIME,
    @log_line_message varchar(max)

EXEC sp_xml_preparedocument @ixml OUTPUT,
    @log_lines_xml

SELECT @log_line_dt = dt,
    @log_line_message = data
FROM OPENXML(@ixml, '/lines/line', 3) WITH (
        dt DATETIME,
        data varchar(max)
        )   

--I want to do the following for each line element      
EXEC spSendLogLine
    @device_id = @device_id,
    @application_name = @application_name,
    @application_user_name = @application_user_name,
    @log_line_dt = @log_line_dt,
    @log_line_message = @log_line_message   

EXEC sp_xml_removedocument @ixml

return -100

END 
```

我这样调用存储过程：

```
EXEC @return_value = [dbo].[spSendLogLinesAsXML]
     @device_id = N'devid123',
     @application_name = N'CJA App 1',
     @application_user_name = N'anatoli',
     @log_lines_xml = '<lines><line><dt>2013-03-01T13:00:00</dt><data>Something happened and it was logged</data></line><line><dt>2013-03-01T13:01:00</dt><data>Oh my god the building is burning and people are dying</data></line></lines>' 
```

如何修改我的存储过程以为每个行元素调用 spSendLogLine？

编辑：根据[SQL - 每个记录](https://stackoverflow.com/questions/2077948/sql-call-stored-procedure-for-each-record)游标的调用存储过程都是坏的。所以我想知道一个更好的方法。我不介意我的存储过程为了实现这一点而改变了多少，只要它最终能正常工作并且很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T16:41:23.853

```
alter PROCEDURE [dbo].[spSendLogLinesAsXML]
(
    @device_id varchar(128),
    @application_name VARCHAR(64),
    @application_user_name VARCHAR(6),
    @log_lines_xml XML
)
AS
BEGIN

declare @log_line_dt datetime,
        @log_line_message varchar(1024)

declare @curse cursor 
set @curse = cursor fast_forward for 
select n.d.value('dt[1]', 'datetime') as log_line_dt, n.d.value('data[1]', 'varchar(1024)') as log_line_message
from @log_lines_xml.nodes('/lines/line') n(d)

open @curse

fetch next from @curse into @log_line_dt, @log_line_message

while (@@fetch_status = 0)
begin
    EXEC spSendLogLine
        @device_id = @device_id,
        @application_name = @application_name,
        @application_user_name = @application_user_name,
        @log_line_dt = @log_line_dt,
        @log_line_message = @log_line_message   

    fetch next from @curse into @log_line_dt, @log_line_message
end

close @curse;

return -100
END
GO 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T17:07:59.217

这就是我按照 muhmud 的回答而得到的结果。仍然希望有人能告诉我如何在没有光标的情况下做到这一点。

```
ALTER PROCEDURE [dbo].[spSendLogLinesAsXML] 
(
    @device_id VARCHAR(128),
    @application_name VARCHAR(64),
    @application_user_name VARCHAR(6),
    @log_lines_xml XML
)
AS
BEGIN
DECLARE @ixml INT,
    @log_line_dt DATETIME,
    @log_line_message VARCHAR(max),
    @cursor CURSOR

SET @cursor = CURSOR FAST_FORWARD
FOR

SELECT n.d.value('dt[1]', 'datetime') AS log_line_dt,
    n.d.value('data[1]', 'varchar(max)') AS log_line_message
FROM @log_lines_xml.nodes('/lines/line') n(d)

OPEN @cursor

FETCH NEXT
FROM @cursor
INTO @log_line_dt,
    @log_line_message

WHILE (@@fetch_status = 0)
BEGIN
    EXEC spSendLogLine @device_id = @device_id,
        @application_name = @application_name,
        @application_user_name = @application_user_name,
        @log_line_dt = @log_line_dt,
        @log_line_message = @log_line_message

    FETCH NEXT
    FROM @cursor
    INTO @log_line_dt,
        @log_line_message
END

RETURN - 100
END 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T17:17:26.787

如果您使用的是 SQL Server **2008**或更高版本，则可以执行以下操作：

1.  定义一个**用户定义的表类型**，其中包含与您的过程相关的所有列：

    ```
    CREATE TYPE dbo.SendLogLineType 
         AS TABLE (LineDate DATETIME2(3), LineData VARCHAR(200), DeviceID VARCHAR(128), 
                   ApplicationName VARCHAR(64), AppUserName VARCHAR(6) ) 
    ```

2.  然后，将您的行提取到该表中，并添加其他“固定”参数（这发生在您的`[spSendLogLinesAsXML]`过程中）：

    ```
    DECLARE @InputTable dbo.SendLogLineType

    INSERT INTO @InputTable(LineDate, LineData, DeviceID, ApplicationName, AppUserName)
       SELECT
          XLine.value('(dt)[1]', 'DATETIME2'),
          XLine.value('(data)[1]', 'varchar(200)'), 
          @device_id,
          @application_name,
          @application_user_name
       FROM     
          @log_lines_xml.nodes('/lines/line') AS XTbl(XLine) 
    ```

3.  最后，更改您的`spSendLogLine`过程以接受该已定义表类型的**表值参数**并更改其逻辑，以便它将遍历传递给它的所有行：

    ```
    CREATE PROCEDURE spSendLogLine
        (@SendLogLineData dbo.SendLogLineType READONLY)
    AS
    BEGIN
        -- iterate over all rows in @SendLogLineData and send out those e-mails!
    END 
    ```

[在相关的 MSDN SQL Server 联机丛书文档页面](http://msdn.microsoft.com/en-us/library/bb675163.aspx)上阅读有关表值参数的更多信息

# c# - ldobj 和 ldind 有什么区别。 ，为什么 ldobj 更快？

> ID：15162390
> 
> 赞同：7
> 
> 时间：2013-03-01T16:32:12.793
> 
> 标签：c#, clr, bytecode, il

使用 64 位大小的结构时，以下代码片段

```
[StructLayout(LayoutKind.Explicit, Pack = 1, Size = 8)]
  unsafe struct BUF
  {
  }

((BUF*)dst) = *((BUF*)src); 
```

生产

```
 IL_0046: nop          
    IL_0047: ldloc.s dst                              
    IL_0049: ldloc.2                                       
    IL_004a: ldobj MyClass/BUF           
    IL_004f: stobj MyClass/BUF 
```

但是，当仅使用 long 时，以下代码会产生

```
*((long*)dst) = *((long*)src); 
```

产生：

```
IL_0046: nop
IL_0047: ldloc.s dst
IL_0049: ldloc.2
IL_004a: ldind.i8                       
IL_004b: stind.i8 
```

有谁知道 ldobj/stobj 和 ldind.i8/stind.i8 对于这个例子有什么不同（如果有的话）？

ldobj/stobj 似乎提高了 20% 的性能，但我不知道为什么会这样。这两条线不是在做完全相同的事情吗？

谢谢！

编辑：[64 位发布模式] 在发布模式下编译时，字节码看起来相同。性能测量是不久前在发布模式下完成的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-01T17:23:17.137

我已经复制了您正在使用的两种不同方法，并且看到生成了相同的 IL，但是在发布模式下运行时，两者的 jitted 代码绝对相同：

这是我使用的测试方法：

```
using System;
using System.Runtime.CompilerServices;
using System.Runtime.InteropServices;

namespace Test
{
    [StructLayout(LayoutKind.Explicit, Pack = 1, Size = 8)]
    unsafe struct BUF
    {
    }

    static class Program
    {
        static void Main()
        {
            BUF x, y, z;
            unsafe
            {
                Do1(&x, &y);
                Do2(&y, &z);
            }
            // Readline here to allow attaching debugger and dumping jitted code
            Console.ReadLine();
        }

        // Disable inlining to permit easier identification of the code
        [MethodImpl(MethodImplOptions.NoInlining)]
        unsafe static void Do1(BUF* src, BUF* dst)
        {
            *((BUF*)dst) = *((BUF*)src);
        }

        // Disable inlining to permit easier identification of the code
        [MethodImpl(MethodImplOptions.NoInlining)]
        unsafe static void Do2(BUF* src, BUF* dst)
        {
            *((long*)dst) = *((long*)src);
        }
    }
} 
```

这两种方法的 IL 与您的匹配：

`Do1`：

```
IL_0000：ldarg.1
IL_0001：ldarg.0
IL_0002：ldobj 测试.BUF
IL_0007: stobj Test.BUF
IL_000c: 重新

```

`Do2`：

```
IL_0000：ldarg.1
IL_0001：ldarg.0
IL_0002：ldind.i8
IL_0003：stind.i8
IL_0004: 恢复

```

并转储 jitted 代码：

`Do1`：

```
Test.Program.Do1(Test.BUF*, Test.BUF*)
从 000007ff00170190 开始，尺寸 7
000007ff`00170190 488b01 mov rax,qword ptr [rcx]
000007ff`00170193 488902 mov qword ptr [rdx],rax
000007ff`00170196 c3 ret

```

`Do2`：

```
Test.Program.Do2(Test.BUF*, Test.BUF*)
从 000007ff001701b0 开始，尺寸 7
000007ff`001701b0 488b01 mov rax,qword ptr [rcx]
000007ff`001701b3 488902 mov qword ptr [rdx],rax
000007ff`001701b6 c3 ret

```

他们看起来和我一模一样。

# c++ - Directx8 错误 LNK2019：无法解析的外部符号

> ID：15162391
> 
> 赞同：-1
> 
> 时间：2013-03-01T16:32:15.090
> 
> 标签：c++, directx, lnk2019, lnk

我正在为我的毕业设计制作 RPG 游戏（暗黑破坏神）。我尝试使用 Directx 8 示例编译 Jim Adams 编程 RPG。

忽略他们用其他语言的评论。

```
/*--------------------------------------------------------------------------
------------------===========================-------------------------------
   IIIIIIII    IIIII     IIII      III       III   IIIII    II      IIIII 
     III  III   III     III III     III     III   III III   II     III III
     III    II  III    III   III     III   III   III  III   II    III  III
     III    II  III   IIIIIIIIIII     III III    III  III   II    III  III 
   IIIIIIII    IIIII III       III     IIII       IIIIII    IIIIII IIIIII
=================||||||||||||||||||||||||||||===============================

(c) Braniselj Klemen 2013 

                    =========================
;;;;;;;;;;;;;;;;;;;/CLASS ZA LEVEL 1 /;;;;;;;;;;;;;;;;;;;;;;
                    **************************
*/

#ifndef _ACT1_H_
#define _ACT1_H_

//DVA TIPA STRUKTURA ALI QUADTREE(ZA LEVELE Z KONSTANTNO VIŠINO ALI OCTREE ZA LEVELE Z SPREMENLJIVO DOLŽINO
enum TreeTypes { QUADTREE = 0, OCTREE };

class cNodeTreeMesh
{
private:
    //Struktura pobere koordinate iz vertex bufferja modela
    typedef struct sVertex { float x, y, z; } sVertex;

    //Textura je izrisana samo enkrat ne 60 na sekuno
    typedef struct sPolygon {
        unsigned long Group; //Skupina teksture
        unsigned long Time;  //kdaj je bila nazadnje izrisana
        unsigned short Vertex[3]; //x, y ,z

        sPolygon() { Group = Time = 0; } //Počisti podatke
        } sPolygon;

    //Struktura ohranja ševilo polygonov v 3D prostoru
    typedef struct sNode {
        unsigned long NumPolygons;
        sPolygon **PolygonList;
        float XPos, YPos, ZPos;
        float Size;
        sNode *Nodes[8];

        //Konstruktor ki počisti spremenljivko
        sNode()
        { 
            NumPolygons = 0;
            PolygonList = NULL;
            XPos = YPos = ZPos = Size = 0.0f;
            for(short i=0; i< 8; i++)
                Nodes[i] = NULL;
        }

        ~sNode()
        {
             delete [] PolygonList;
             for (short i=0; i<8; i++)
                 delete Nodes[i];
        }
    }sNode;

    //Struktura ki grupira polygone ki morajo biti izrisani v vsakem framu
    typedef struct sGroup {
        cVertexBuffer VertexBuffer;
        char *VertexPtr;
        unsigned long NumPolygons;
        unsigned long NumPolygonsToDraw;

        sGroup() { NumPolygons = 0; }
        ~sGroup() { VertexBuffer.Free(); }
    } sGroup;

    int m_TreeType;   //QUAD ALI OCTA

    cGraphics *m_Graphics; 
    cFrustum *m_Frustum;

    unsigned long m_Time;

    float m_Size;
    float m_MaxSize;

    sNode *m_ParentNode;

    unsigned long m_NumGroups;
    sGroup *m_Groups;

    unsigned long  m_NumPolygons;
    unsigned long m_MaxPolygons;
    sPolygon *m_PolygonList;

    sMesh *m_Mesh;
    char *m_VertexPtr;
    unsigned long m_VertexFVF;
    unsigned long m_VertexSize;

    void SortNode(sNode *Node, float XPos, float YPos, float ZPos, float Size);

    void AddNode(sNode *Node);

    BOOL IsPolygonContained(sPolygon *Polygon, float XPos, float YPos, float ZPos, float Size);

    unsigned long CountPolygons( float XPos, float YPos, float ZPos, float Size);

public:
    cNodeTreeMesh(); //konstruktor za model
    ~cNodeTreeMesh(); //dekonstruktor za model

    BOOL Create(cGraphics *Graphics, cMesh *Mesh, int TreeType = OCTREE, float Maxsize = 256.0f, long MaxPolygons = 32);
    BOOL Free();

    BOOL Render(cFrustum *Frustum = NULL, float  ZDistance = 0.0f);

    float GetClosestHeight(float XPos, float YPos, float ZPos);

    float GetHeightBelow(float XPos, float YPos, float ZPos);
    float GetHeightAbove(float XPos, float YPos, float ZPos);

    BOOL CheckIntersect(float XStart, float YStart, float ZStart, float XEnd, float YEnd, float ZEnd, float *Length);

};

#endif // _ACT1_H_ 
```

ACT1.cpp

```
/*-------------------------------------------------------------------
------------------===========================-------------------------------
   IIIIIIII    IIIII     IIII      III       III   IIIII    II      IIIII 
     III  III   III     III III     III     III   III III   II     III III
     III    II  III    III   III     III   III   III  III   II    III  III
     III    II  III   IIIIIIIIIII     III III    III  III   II    III  III 
   IIIIIIII    IIIII III       III     IIII       IIIIII    IIIIII IIIIII
=================||||||||||||||||||||||||||||===============================

Povzeto po Jim Adams Programing role playing games with directx
(c) Braniselj Klemen 2013 

Node = Del levela     

                    =========================
;;;;;;;;;;;;;;;;;;;;;/FUNKCIJE ZA LEVEL 1/;;;;;;;;;;;;;;;;;;;;;;
                    **************************
*/

#include "Core_Global.h"
#include "Frustum.h"
#include "ACT1.h"

#pragma comment(lib, "User32.lib") 
#pragma comment(lib, "gdi32.lib")
#pragma comment(lib,"d3d8.lib")
#pragma comment(lib,"d3dx8.lib")
#pragma comment(lib, "winmm.lib")

#include <Windows.h>
#include <iostream>
#include <stdio.h>
#include "d3d8.h"
#include "d3dx8.h"

using namespace std;

cNodeTreeMesh::cNodeTreeMesh()
{
    m_TreeType = OCTREE;
    m_Graphics = NULL;
    m_ParentNode = NULL;
    m_NumPolygons = 0;
    m_PolygonList = NULL;
    m_NumGroups = 0;
    m_Groups = NULL;
    m_Time = 0;
}

cNodeTreeMesh::~cNodeTreeMesh()
{
    Free();
}

BOOL cNodeTreeMesh::Create(cGraphics *Graphics, cMesh *Mesh, int TreeType, float MaxSize, long MaxPolygons)
{
    ID3DXMesh *LoadMesh;
    unsigned short *IndexPtr;
    DWORD *Attributes;
    unsigned long i;
    float MaxX, MaxY, MaxZ;

    Free();

    if((m_Graphics = Graphics ) == NULL)
        return FALSE;
    if(Mesh == NULL)
        return FALSE;
    if(!Mesh->GetParentMesh()->m_NumMaterials)
        return FALSE;

    //lastnosti modela
    m_Mesh = Mesh->GetParentMesh();
    LoadMesh = m_Mesh->m_Mesh;
    m_VertexFVF = LoadMesh->GetFVF();
    m_VertexSize = D3DXGetFVFVertexSize(m_VertexFVF);
    m_NumPolygons = LoadMesh->GetNumFaces();
    m_MaxPolygons = MaxPolygons;

    //Ustvarimo seznam poljgonov(drevo)
    m_PolygonList = new sPolygon[m_NumPolygons]();
    m_NumGroups = m_Mesh->m_NumMaterials;
    m_Groups = new sGroup[m_NumGroups]();

    //zaklenemo vertex bufferje
    LoadMesh->LockIndexBuffer(D3DLOCK_READONLY, (BYTE**)&IndexPtr);
    LoadMesh->LockAttributeBuffer(D3DLOCK_READONLY, &Attributes);

    //Informacije polygona v strukturo
    for(i = 0; i  <m_NumPolygons; i++)
    {
        m_PolygonList[i].Vertex[0] = *IndexPtr++;
        m_PolygonList[i].Vertex[1] = *IndexPtr++;
        m_PolygonList[i].Vertex[2] = *IndexPtr++;

        //Shranimo texture group in stevec
        m_PolygonList[i].Group = Attributes[i];
        m_Groups[Attributes[i]].NumPolygons++;
    }

    LoadMesh->UnlockIndexBuffer();
    LoadMesh->UnlockAttributeBuffer();

    for(i = 0; i < m_NumGroups; i++)
    {
        if(m_Groups[i].NumPolygons != 0)
            m_Groups[i].VertexBuffer.Create(m_Graphics, m_Groups[i].NumPolygons * 3, m_VertexFVF, m_VertexSize);
    }

    //Velikost kocke
    MaxX = (float)max(fabs(Mesh->GetParentMesh()->m_Min.x), fabs(Mesh->GetParentMesh()->m_Max.x));
    MaxY = (float)max(fabs(Mesh->GetParentMesh()->m_Min.y), fabs(Mesh->GetParentMesh()->m_Max.y));
    MaxZ = (float)max(fabs(Mesh->GetParentMesh()->m_Min.z), fabs(Mesh->GetParentMesh()->m_Max.z));
    m_Size = max(MaxX, max(MaxY, MaxZ)) * 2.0f;
    m_MaxSize = MaxSize;

    //ustvarimo starševsko vozlišče
    m_ParentNode = new sNode();

    LoadMesh->LockVertexBuffer(D3DLOCK_READONLY, (BYTE**)&m_VertexPtr);
    SortNode(m_ParentNode, 0.0f, 0.0f, 0.0f, m_Size);
    LoadMesh->UnlockVertexBuffer();

    return TRUE;
}

//"SPROSTIMO" MODEL
BOOL cNodeTreeMesh::Free()
{
    delete m_ParentNode;
    m_ParentNode = NULL;

    m_Graphics = NULL;
    m_NumPolygons = 0;
    delete [] m_PolygonList;
    m_PolygonList = NULL;

    m_NumGroups = 0;
    delete [] m_Groups;
    m_Groups = NULL;

    return TRUE;
}

void cNodeTreeMesh::SortNode(sNode *Node, float XPos, float YPos, float ZPos, float Size)
{
    unsigned long i, Num;
    float XOff, YOff, ZOff;
    //Kakšna napaka
    if(Node == NULL || m_PolygonList == NULL)
        return;

    //Koordinate node-ov
    Node->XPos = XPos;
    Node->YPos = (m_TreeType == QUADTREE)?0.0f:YPos;
    Node->ZPos = ZPos;
    Node->Size = Size;

    //ali so plyigoni v nodu
    if(!(Num = CountPolygons(XPos, YPos, ZPos, Size)))
        return;

    //Če je preveč polygoonov v nodu razdeli
    if(Size > m_MaxSize && Num > m_MaxPolygons)
    {
        for(i=0; i<(unsigned long)((m_TreeType == QUADTREE)?4:8);i++)
        {
            XOff = ((( i % 2 ) < 1) ? -1.0f : 1.0f ) * (Size * 4.0f);
            YOff = ((( i % 4 ) < 1) ? -1.0f : 1.0f ) * (Size * 4.0f);
            ZOff = ((( i % 8 ) < 1) ? -1.0f : 1.0f ) * (Size * 4.0f);

            //ali so polygoni v zajemu noda
            if(CountPolygons(XPos+XOff, YPos+YOff, ZPos+ZOff, Size/2.0f))
            {
                Node->Nodes[i] = new sNode();

                SortNode(Node->Nodes[i], XPos+XOff, YPos+YOff, ZPos+ZOff, Size/2.0f);
            }
        }
        return;
    }

    //Allokacija prostora za kazalce na Polygon
    Node->NumPolygons = Num;
    Node->PolygonList = new sPolygon*[Num];

    //shranjuje kazalce
    Num = 0;
    for ( i=0; i<m_NumPolygons; i++)
    {
        //dodaj polygon če je zajet v 3D prostoru
        if(IsPolygonContained(&m_PolygonList[i], XPos, YPos, ZPos, Size) == TRUE)

    Node->PolygonList[Num++] = &m_PolygonList[i];
    }
}

BOOL cNodeTreeMesh::IsPolygonContained(sPolygon *Polygon, float XPos, float YPos, float ZPos, float Size)
{
    float XMin, XMax, YMin, YMax, ZMin, ZMax;
    sVertex *Vertex[3];

    //vertices(točke) polygona
    Vertex[0] =(sVertex*)&m_VertexPtr[m_VertexSize * Polygon->Vertex[0]];
    Vertex[1] =(sVertex*)&m_VertexPtr[m_VertexSize * Polygon->Vertex[1]];
    Vertex[2] =(sVertex*)&m_VertexPtr[m_VertexSize * Polygon->Vertex[2]];

    // preveri po x osi
  XMin = min(Vertex[0]->x, min(Vertex[1]->x, Vertex[2]->x));
  XMax = max(Vertex[0]->x, max(Vertex[1]->x, Vertex[2]->x));
  if(XMax < (XPos - Size / 2.0f))
  return FALSE;
  if(XMin > (XPos + Size / 2.0f))
  return FALSE;

  // preveri po y osi
  if(m_TreeType == OCTREE) {
    YMin = min(Vertex[0]->y, min(Vertex[1]->y, Vertex[2]->y));
    YMax = max(Vertex[0]->y, max(Vertex[1]->y, Vertex[2]->y));
    if(YMax < (YPos - Size / 2.0f))
    return FALSE;
    if(YMin > (YPos + Size / 2.0f))
    return FALSE;
  }

  // preveri po z osi
  ZMin = min(Vertex[0]->z, min(Vertex[1]->z, Vertex[2]->z));
  ZMax = max(Vertex[0]->z, max(Vertex[1]->z, Vertex[2]->z));
  if(ZMax < (ZPos - Size / 2.0f))
  return FALSE;
  if(ZMin > (ZPos + Size / 2.0f))
  return FALSE;

  return TRUE;
}

unsigned long cNodeTreeMesh::CountPolygons(float XPos, float YPos, float ZPos, float Size)
{
    unsigned long i, Num;

   // Ali je kakšen polygon za procesirati
  if(!m_NumPolygons)
    return 0;

  // preglej kateri polygoni so zajeti v 3D prostoru
  Num = 0;
  for( i=0; i<m_NumPolygons; i++ ) {
    if(IsPolygonContained(&m_PolygonList[i],XPos,YPos,ZPos,Size) == TRUE)
     Num++;
  }

  return Num;
}

BOOL cNodeTreeMesh::Render(cFrustum *Frustum, float ZDistance)
{
  D3DXMATRIX Matrix;  
  cFrustum ViewFrustum;  

  // ali je kje kakšna napaka
  if(m_Graphics == NULL || m_ParentNode == NULL || !m_NumPolygons)
    return FALSE;

  // ustvari pogled
  if((m_Frustum = Frustum) == NULL) {
    ViewFrustum.Construct(m_Graphics, ZDistance);
    m_Frustum = &ViewFrustum;
  }

  D3DXMatrixIdentity(&Matrix);
  m_Graphics->GetDeviceCOM()->SetTransform(D3DTS_WORLD, &Matrix);

  // zakleni vertex buffer
  for(unsigned long i=0; i<m_NumGroups; i++) {
    m_Groups[i].VertexBuffer.Lock(0,0);
    m_Groups[i].VertexPtr = (char*)m_Groups[i].VertexBuffer.GetPtr();
    m_Groups[i].NumPolygonsToDraw = 0;
  }
  m_Mesh->m_Mesh->LockVertexBuffer(D3DLOCK_READONLY, (BYTE**)&m_VertexPtr);

  // shrani trenutni čas  v render
  m_Time = timeGetTime();

  // Dodaj polygone v vertex buffer
  AddNode(m_ParentNode);

  // odkleni vertex bufferje in izriši
  m_Mesh->m_Mesh->UnlockVertexBuffer();
  for(unsigned long i=0; i<m_NumGroups; i++) {
    m_Groups[i].VertexBuffer.Unlock();

    if(m_Groups[i].NumPolygonsToDraw) {
      m_Graphics->GetDeviceCOM()->SetMaterial(&m_Mesh->m_Materials[i]);
      m_Graphics->GetDeviceCOM()->SetTexture(0, m_Mesh->m_Textures[i]);

      m_Groups[i].VertexBuffer.Render(0, m_Groups[i].NumPolygonsToDraw, D3DPT_TRIANGLELIST);
    }
  }

  return TRUE;
}

void cNodeTreeMesh::AddNode(sNode *Node)
{
  unsigned long i, Group;
  short         Num;

  // Preveri pogled glede 
  if(m_TreeType == QUADTREE) {
    if(m_Frustum->CheckRectangle(
           Node->XPos,        0.0f,          Node->ZPos, 
           Node->Size / 2.0f, m_Size / 2.0f, Node->Size / 2.0f) == FALSE)
      return;
  } else {
    if(m_Frustum->CheckRectangle(
           Node->XPos,        Node->YPos,        Node->ZPos, 
           Node->Size / 2.0f, Node->Size / 2.0f, Node->Size / 2.0f) == FALSE)
      return;
  }

  Num = 0;
  for(i=0;i<(unsigned long)((m_TreeType==QUADTREE)?4:8);i++) {
    if(Node->Nodes[i] != NULL) {
      Num++;
      AddNode(Node->Nodes[i]);
    }
  }

  if(Num)
    return;

  if(Node->NumPolygons != 0) {
    for(i=0;i<Node->NumPolygons;i++) {

      // če polygon še ni buil izrisan
      if(Node->PolygonList[i]->Time != m_Time && (Group = Node->PolygonList[i]->Group) < m_NumGroups) {

        // izriši polygone ki so vidni

        if(m_Mesh->m_Materials[Node->PolygonList[i]->Group].Diffuse.a != 0.0f) {

          memcpy(m_Groups[Group].VertexPtr, &m_VertexPtr[m_VertexSize * Node->PolygonList[i]->Vertex[0]], m_VertexSize);
          m_Groups[Group].VertexPtr += m_VertexSize;
          memcpy(m_Groups[Group].VertexPtr, &m_VertexPtr[m_VertexSize * Node->PolygonList[i]->Vertex[1]], m_VertexSize);
          m_Groups[Group].VertexPtr += m_VertexSize;
          memcpy(m_Groups[Group].VertexPtr, &m_VertexPtr[m_VertexSize * Node->PolygonList[i]->Vertex[2]], m_VertexSize);
          m_Groups[Group].VertexPtr += m_VertexSize;

          m_Groups[Group].NumPolygonsToDraw++;
        }

        // Označi polygon ki je bil sprocesiran v določenem časovnem segmentu
        Node->PolygonList[i]->Time = m_Time;
      }
    }
  }
}

float cNodeTreeMesh::GetClosestHeight(float XPos, float YPos, float ZPos)
{
  float YAbove, YBelow;

  YAbove = GetHeightAbove(XPos, YPos, ZPos);
  YBelow = GetHeightBelow(XPos, YPos, ZPos);
  if(fabs(YAbove-YPos) < fabs(YBelow-YPos))
    return YAbove;
  return YBelow;
}

float cNodeTreeMesh::GetHeightBelow(float XPos, float YPos, float ZPos)
{
  BOOL  Hit;
  float u, v, Dist;
  DWORD FaceIndex;

  D3DXIntersect(m_Mesh->m_Mesh,
&D3DXVECTOR3(XPos,YPos,ZPos), &D3DXVECTOR3(0.0f, -1.0f, 0.0f),&Hit, &FaceIndex, &u, &v, &Dist, NULL, NULL);
  if(Hit == TRUE)
    return YPos-Dist;
  return YPos;
}

float cNodeTreeMesh::GetHeightAbove(float XPos, float YPos, float ZPos)
{ 
  BOOL  Hit;
  float u, v, Dist;
  DWORD FaceIndex;

  D3DXIntersect(m_Mesh->m_Mesh,
                &D3DXVECTOR3(XPos,YPos,ZPos),
                &D3DXVECTOR3(0.0f, 1.0f, 0.0f),
                &Hit, &FaceIndex, &u, &v, &Dist , NULL, NULL);
  if(Hit == TRUE)
    return YPos+Dist;
  return YPos;
}

BOOL cNodeTreeMesh::CheckIntersect(float XStart, float YStart, float ZStart,
                                   float XEnd,   float YEnd,   float ZEnd,
                                   float *Length)
{
  BOOL  Hit;
  float u, v, Dist;
  float XDiff, YDiff, ZDiff, Size;
  DWORD FaceIndex;
  D3DXVECTOR3 vecDir;

  XDiff = XEnd - XStart;
  YDiff = YEnd - YStart;
  ZDiff = ZEnd - ZStart;

  D3DXVec3Normalize(&vecDir, &D3DXVECTOR3(XDiff, YDiff, ZDiff));
  D3DXIntersect(m_Mesh->m_Mesh, &D3DXVECTOR3(XStart,YStart,ZStart), &vecDir,&Hit, &FaceIndex, &u, &v, &Dist, NULL, NULL);

  if(Hit == TRUE) {
    Size = (float)sqrt(XDiff*XDiff+YDiff*YDiff+ZDiff*ZDiff);
    if(Dist > Size)
      Hit = FALSE;
    else {
      if(Length != NULL)
        *Length = Dist;
    }
  }

  return Hit;
} 
```

是的，我已经在附加依赖项中链接了 lib 文件

```
d3d8.lib;
d3dx8d.lib;
d3dx8.lib;
winmm.lib;
odbc32.lib;
odbccp32.lib;
libcmtd.lib;
user32.lib;
gdi32.lib;
kernel32.lib;
winspool.lib;
comdlg32.lib;
advapi32.lib;
shell32.lib;
ole32.lib;
oleaut32.lib;
uuid.lib;
wsock32.lib;
d3dxof.lib;
dxguid.lib;
d3dx.lib;
dsound.lib;
dinput8.lib;
dplayx.lib;
%(AdditionalDependencies) 
```

我得到了这些错误：

```
1>Build started 1.3.2013 17:45:31.
1>InitializeBuildStatus:
1>  Touching "Debug\Diavolo.unsuccessfulbuild".
1>ClCompile:
1>  ACT1.cpp
1>  c:\program files (x86)\microsoft sdks\windows\v7.0a\include\dinput.h: DIRECTINPUT_VERSION undefined. Defaulting to version 0x0800
1>ManifestResourceCompile:
1>  All outputs are up-to-date.
1>libcmtd.lib(crt0.obj) : error LNK2001: unresolved external symbol _main
1>ACT1.obj : error LNK2019: unresolved external symbol "public: int __thiscall cVertexBuffer::Create(class cGraphics *,unsigned long,unsigned long,long)" (?Create@cVertexBuffer@@QAEHPAVcGraphics@@KKJ@Z) referenced in function "public: int __thiscall cNodeTreeMesh::Create(class cGraphics *,class cMesh *,int,float,long)" (?Create@cNodeTreeMesh@@QAEHPAVcGraphics@@PAVcMesh@@HMJ@Z)
1>ACT1.obj : error LNK2019: unresolved external symbol "public: struct sMesh * __thiscall cMesh::GetParentMesh(void)" (?GetParentMesh@cMesh@@QAEPAUsMesh@@XZ) referenced in function "public: int __thiscall cNodeTreeMesh::Create(class cGraphics *,class cMesh *,int,float,long)" (?Create@cNodeTreeMesh@@QAEHPAVcGraphics@@PAVcMesh@@HMJ@Z)
1>ACT1.obj : error LNK2019: unresolved external symbol "public: __thiscall cVertexBuffer::cVertexBuffer(void)" (??0cVertexBuffer@@QAE@XZ) referenced in function "public: __thiscall cNodeTreeMesh::sGroup::sGroup(void)" (??0sGroup@cNodeTreeMesh@@QAE@XZ)
1>ACT1.obj : error LNK2019: unresolved external symbol "public: __thiscall cVertexBuffer::~cVertexBuffer(void)" (??1cVertexBuffer@@QAE@XZ) referenced in function "public: __thiscall cNodeTreeMesh::sGroup::~sGroup(void)" (??1sGroup@cNodeTreeMesh@@QAE@XZ)
1>ACT1.obj : error LNK2019: unresolved external symbol "public: int __thiscall cVertexBuffer::Free(void)" (?Free@cVertexBuffer@@QAEHXZ) referenced in function "public: __thiscall cNodeTreeMesh::sGroup::~sGroup(void)" (??1sGroup@cNodeTreeMesh@@QAE@XZ)
1>ACT1.obj : error LNK2019: unresolved external symbol "public: int __thiscall cVertexBuffer::Render(unsigned long,unsigned long,unsigned long)" (?Render@cVertexBuffer@@QAEHKKK@Z) referenced in function "public: int __thiscall cNodeTreeMesh::Render(class cFrustum *,float)" (?Render@cNodeTreeMesh@@QAEHPAVcFrustum@@M@Z)
1>ACT1.obj : error LNK2019: unresolved external symbol "public: int __thiscall cVertexBuffer::Unlock(void)" (?Unlock@cVertexBuffer@@QAEHXZ) referenced in function "public: int __thiscall cNodeTreeMesh::Render(class cFrustum *,float)" (?Render@cNodeTreeMesh@@QAEHPAVcFrustum@@M@Z)
1>ACT1.obj : error LNK2019: unresolved external symbol "public: void * __thiscall cVertexBuffer::GetPtr(void)" (?GetPtr@cVertexBuffer@@QAEPAXXZ) referenced in function "public: int __thiscall cNodeTreeMesh::Render(class cFrustum *,float)" (?Render@cNodeTreeMesh@@QAEHPAVcFrustum@@M@Z)
1>ACT1.obj : error LNK2019: unresolved external symbol "public: int __thiscall cVertexBuffer::Lock(unsigned long,unsigned long)" (?Lock@cVertexBuffer@@QAEHKK@Z) referenced in function "public: int __thiscall cNodeTreeMesh::Render(class cFrustum *,float)" (?Render@cNodeTreeMesh@@QAEHPAVcFrustum@@M@Z)
1>ACT1.obj : error LNK2019: unresolved external symbol "public: struct IDirect3DDevice8 * __thiscall cGraphics::GetDeviceCOM(void)" (?GetDeviceCOM@cGraphics@@QAEPAUIDirect3DDevice8@@XZ) referenced in function "public: int __thiscall cNodeTreeMesh::Render(class cFrustum *,float)" (?Render@cNodeTreeMesh@@QAEHPAVcFrustum@@M@Z)
1>Frustum.obj : error LNK2001: unresolved external symbol "public: struct IDirect3DDevice8 * __thiscall cGraphics::GetDeviceCOM(void)" (?GetDeviceCOM@cGraphics@@QAEPAUIDirect3DDevice8@@XZ)
1>.\Debug\Diavolo.exe : fatal error LNK1120: 11 unresolved externals
1>
1>Build FAILED.
1>
1>Time Elapsed 00:00:01.57
========== Build: 0 succeeded, 1 failed, 0 up-to-date, 0 skipped ========== 
```

抱歉英语不好。任何帮助都会非常感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T17:54:36.243

您收到链接器错误，因为您没有链接到 d3dx9.lib、d3dx9d.lib 和 d3d9.lib。

# c# - VB.NET 中线程委托的等价物是什么？

> ID：15162396
> 
> 赞同：0
> 
> 时间：2013-03-01T16:32:24.847
> 
> 标签：c#, vb.net, .net-4.0

我正在尝试将这个 Stack Overflow 问题中的 C# 代码转换为在 VB.NET 中使用。我正在使用 .NET Framework 4.0。 [WPF 等待窗口](https://stackoverflow.com/questions/7369853/wpf-wait-window)

这是代码：

```
Thread thread = new Thread(() =>
    {
      Window1 w = new Window1();
      w.Show();

      w.Closed += (sender2, e2) =>
      w.Dispatcher.InvokeShutdown();

      System.Windows.Threading.Dispatcher.Run();
    });

thread.SetApartmentState(ApartmentState.STA);
thread.Start(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T16:35:35.570

您可以在 VB 中创建一个 lambda 表达式，如下所示：

```
Dim thread As New Thread(Sub()
                             ' ...
                         End Sub) 
```

VB.NET 并没有像 C# 那样真正为匿名方法提供单独的语法，但 VB.NET 中 lambda 表达式的语法看起来更像 C# 匿名方法，而不是 C# lambda 表达式。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-01T16:38:05.793

您可能想阅读[VB.NET 中的 Lambda 表达式](http://msdn.microsoft.com/en-us/library/bb531253.aspx)

```
Dim threadSub = Sub()
                  ...
                End Sub
Dim thread As New Thread(threadSub) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-01T17:13:20.577

```
Dim thread As New Thread(Sub()
    Dim w As New Window1()
    w.Show()
    AddHandler w.Closed, Sub(sender2, e2) w.Dispatcher.InvokeShutdown()
    System.Windows.Threading.Dispatcher.Run()
End Sub)

thread.SetApartmentState(ApartmentState.STA)
thread.Start() 
```

# python - 在 Python(x,y) 中打印一个阿拉伯 unicode 字符串

> ID：15162398
> 
> 赞同：0
> 
> 时间：2013-03-01T16:32:32.870
> 
> 标签：python, unicode, pythonxy

我有一个阿拉伯语 unicode 字符串，我想在 Python 中打印（在 Windows 7 上使用 Python(x,y)），但我无法打印它，只打印出 unicode 表示。

字符串定义为：

```
ss = u'\u0647\u0630\u0627 \u0647\u0648 \u0627\u0644\u062d\u0644 \u0627\u0644\u0648\u062d\u064a\u062f \u0644\u0644\u0645\u0634\u0643\u0644\u0629 \u0627\u0644\u062a\u064a \u0646\u0648\u0627\u062c\u0647\u0647\u0627' 
```

应该是这样的：“هذا هو الحل الوحيد للمشكلة التي نواجهها”

当我尝试`print`时，它给出了以下错误

```
print ss
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "C:\Python27\lib\encodings\cp1252.py", line 12, in encode
    return codecs.charmap_encode(input,errors,encoding_table)
UnicodeEncodeError: 'charmap' codec can't encode characters in position 0-2: character maps to <undefined> 
```

当我对字符串进行编码时，例如使用 cp1256（Windows 阿拉伯语），它给出了错误的表示：

```
print ss.encode('cp1256')
åÐÇ åæ ÇáÍá ÇáæÍíÏ ááãÔßáÉ ÇáÊí äæÇÌååÇ 
```

我在这里查看了几个与在 Windows 上从 Python 打印 unicode 相关的问题，但似乎没有任何效果。

有任何想法吗？

谢谢。

**更新：** 我正在使用 Spyder IDE（在 Windows 7 上与 Python(x,y) 捆绑在一起）。

**UPDATE2：** 我已经尝试了“重复”问题中的所有解决方案，但没有一个有效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T16:36:12.640

您的控制台配置为显示代码页 1252（拉丁语 1），它确实无法处理您的代码点。将您的控制台切换到*可以*显示字符的不同代码页。

您可以切换到 1256：

```
chcp 1256 
```

或切换到 65001（UTF-8 代码页），它应该能够处理*任何*unicode 代码点。不过，您可能必须切换控制台使用的字体；据报道，Lucida Sans 显示大部分 Unicode。

# mysql - If else on WHERE 子句

> ID：15162404
> 
> 赞同：46
> 
> 时间：2013-03-01T16:32:59.243
> 
> 标签：mysql, sql, if-statement

我有这个查询：

```
SELECT  `id` ,  `naam` 
FROM  `klanten` 
WHERE (
`email` LIKE  '%@domain.nl%'
OR  `email2` LIKE  '%@domain.nl%'
) 
```

但我想做这样的事情：

```
SELECT  `id` ,  `naam` 
FROM  `klanten` 
WHERE IF(`email` > 0,
`email` LIKE  '%@domain.nl%'
,  `email2` LIKE  '%@domain.nl%'
) 
```

如何检查电子邮件是否存在？我想使用电子邮件，如果此字段为空，我想使用 email2。我该如何做到这一点？

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2013-03-01T16:42:15.300

`IF`用于选择字段，然后在其后`LIKE`放置子句：

```
SELECT  `id` ,  `naam` 
FROM  `klanten` 
WHERE IF(`email` != '', `email`, `email2`) LIKE  '%@domain.nl%' 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-03-01T16:34:33.433

你想使用`coalesce()`：

```
where coalesce(email, email2) like '%anja@fiskkoer.nl%' 
```

如果您想处理*空*字符串 ('') 与 NULL，一个案例有效：

```
where (case when email is NULL or email = '' then email2 else email end) like '%anja@fiskkoer.nl%' 
```

而且，如果您担心字符串实际上只是空格：

```
where (case when email is NULL or ltrim(email) = '' then email2 else email end) like '%anja@fiskkoer.nl%' 
```

顺便说一句，示例`if`语句实际上是在说“如果电子邮件以大于 0 的数字开头”。这是因为比较的是 0，一个数字。MySQL 隐式尝试将字符串转换为数字。因此，'abcd@de.com' 会失败，因为字符串会转换为 0。'0abc@de.com' 也会如此。但是，“1abc@de.com”和“01abc@de.com”会成功。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-01T16:35:15.997

请注意，以下内容在功能上与 Gordon Linoff 的回答不同。他的回答假设您想使用`email2`if `email`is NULL。我的假设你想使用`email2`if`email`是一个空字符串。正确答案将取决于您的数据库（或者您可以执行 NULL 检查*和*空字符串检查 - 这完全取决于适合您的数据库设计的内容）。

```
SELECT  `id` ,  `naam` 
FROM  `klanten` 
WHERE `email` LIKE  '%anja@fiskkoer.nl%'
OR (LENGTH(email) = 0 AND `email2` LIKE  '%anja@fiskkoer.nl%') 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-10-28T08:18:07.167

试试这个，希望有帮助

```
select user_display_image as user_image,
user_display_name as user_name,
invitee_phone,
(
 CASE 
    WHEN invitee_status=1 THEN "attending" 
    WHEN invitee_status=2 THEN "unsure" 
    WHEN invitee_status=3 THEN "declined" 
    WHEN invitee_status=0 THEN "notreviwed" END
) AS  invitee_status
 FROM your_tbl 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2020-03-15T06:41:06.920

下面是一个表的示例查询，该表与具有查询参数的同一个表具有外键关系。

[![在此处输入图像描述](../Images/30676fe86064d7c4e7b53496dfc9263a.png)](https://i.stack.imgur.com/3GYXs.png)

```
SET @x = -1;
SELECT id, categoryName 
FROM Catergory WHERE IF(@x > 0,category_ParentId = @x,category_ParentId IS NOT NULL); 
```

`@x`可以更改。

# c# - RadioButton.Checked 问题

> ID：15162405
> 
> 赞同：0
> 
> 时间：2013-03-01T16:33:00.907
> 
> 标签：c#, .net, winforms, radio-button

所以我对我的一类的这段代码有一些问题。我知道这似乎相当初级，但对于我的生活，我不确定为什么我不能让它工作。

本质上，我有 6 个单选按钮，根据选择的单选按钮，我想为 int 变量分配一个值。我想将该值返回到另一个 winForm 它将做其他事情。

但由于某种原因，它总是返回 0。

一些帮助将不胜感激。

先感谢您..

```
 int x = 0;

    public int selectionDie1()
    {
        if (die1_1.Checked)
            x = 1;
        if (die1_2.Checked)
            x = 2;
        if (die1_3.Checked)
            x = 3;
        if (die1_4.Checked)
            x = 4;
        if (die1_5.Checked)
            x = 5;
        if (die1_6.Checked)
            x = 6;
        return x;
    } 
```

我还想补充一点，即使我将其更改为没有返回值的 void 并放置一个在 buttonclick 上显示 x 值的标签，它仍然返回 0。

我什至尝试过只使用一个单选按钮，看看是否可行，什么都没有。

当我设置 x = 1000; 并返回它工作正常，所以它与单选按钮有关

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T19:15:04.927

如果我理解正确，您正在尝试以`x`其他形式使用该变量。您需要使用该`selectionDie1`函数的直接结果。

```
public int selectionDie1()
{
    if (die1_1.Checked)
        return 1;
    else if (die1_2.Checked)
        return 2;
    ...

    else
        throw new exception("there was no item checked");
} 
```

这样就没有变量可以跟踪，也可以从外部位置访问。

另一个问题是您正在创建一个表单，然后立即检查所选项目（如果您的评论是正确的）。您需要首先创建并显示表单，让用户有时间选择一个选项，然后执行此函数调用（这可能发生在用户选择、表单关闭、按钮按下等时）。

# jquery - 如何在任何地方使用 $.ajax()

> ID：15162414
> 
> 赞同：0
> 
> 时间：2013-03-01T16:33:24.183
> 
> 标签：jquery, ajax, json, cross-domain

我的文件在D盘

D:/item/1.js

我不使用 xampp 或 wamp

这没用

```
function request($i){
$url = "item/"+$i+".js";
$.ajax({
crossDomain: true,
  cache: false,
  type: 'post', 
  url: $url,
  dataType: 'json',
  success: function(datax){
   //return data;
   data = datax;
  },
  error: function(){
   //return error();
   data = error();
  }
});

} 
```

我想在任何地方工作

例如 ：

file:///c:/document/item/1.js 、闪存和 ....

我不能使用 .load() 因为我到了 Json

谢谢

# javascript - jQuery Validation 在输入每个字符时都会出错

> ID：15162415
> 
> 赞同：2
> 
> 时间：2013-03-01T16:33:24.270
> 
> 标签：javascript, jquery, jquery-validate

我在我网站上的表单上使用 jQuery Validator。它运行正常，但每次击键都会导致错误：

```
Uncaught TypeError: Object #<error> has no method 'call' 
```

我正在通过每个字段上的类和所有正常工作的类来实现验证 - 必填字段、电子邮件字段、数字等。这是我的验证代码：

```
 if(jQuery().validate) {
      //assign to global var for manual validation
      validator = $(".validated").validate({
           errorClass: "help-inline text-error",
           errorElement: "span",
           invalidHandler: function(e, validator) {
                var errors = validator.numberOfInvalids();
                if (errors) {
                     var message = errors == 1
                          ? 'Please fix the indicated field before saving this form.'
                          : 'Please fix the errors on the indicated fields before saving this form.';
                      $(".validation-message").text(message);
                      $(".validation-message").addClass('alert alert-error');
                } else {
                      $(".validation-message").removeClass('alert alert-error').text("");
                }
             },
           onkeyup: true,
           submitHandler: function(form) {
                $(".validation-message").removeClass('alert alert-error').text("");
                form.submit();
             },
           errorPlacement: function(error, element) {
                if(element.parent().hasClass('input-append')){
                     error.insertAfter( element.parent() );
                }else{
                     error.insertAfter(element);
                }
             }
      });
 } 
```

谁能看到什么会在不影响功能的情况下触发该错误？

干杯!

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-01T16:48:54.743

选项没有任何`true`价值。`onkeyup`

默认情况下，在`keyup`事件期间启用字段验证。您只需要在两种情况下使用此选项

1.  要在事件期间禁用验证`keyup`，在这种情况下设置`onkeyup: false`
2.  在期间自定义字段验证`keyup`

在您的情况下，您可以删除该选项`onkeyup`。

# c++ - 在 C++ 中编码这个对象数组时我做错了什么？

> ID：15162417
> 
> 赞同：4
> 
> 时间：2013-03-01T16:33:31.283
> 
> 标签：c++, arrays, object, nullpointerexception, initialization

我有两个类，PersonnelLists 和 Employee。我在 main 中创建了 PersonnelLists 的一个实例，如下所示：

```
int main() {
    PersonnelLists example; //Make a personnel list
...
} 
```

PersonnelLists 使用具有员工列表成员初始化、员工数量和数组大小的构造函数：

```
PersonnelLists::PersonnelLists(): List(new Employee[SIZE]), numEmployees(0), arraySize(SIZE){
} 
```

这导致创建了一些空的空员工（我认为？）：

```
Employee::Employee(): employeeNumber(0), name(NULL), department(NULL) {
} 
```

正是在这一行，我得到了一个无效的空指针错误。

我是 C++ 新手，刚从 Java 编程中走出来。我仍然是一个新手，所以我不太确定我在这里做错了什么。

更新：根据要求，这是 Employee 的类定义：

```
#include <iostream>

class Employee {
    public:
        Employee(); //constructor
        Employee(std::string name, std::string deparment);
        void Print() const; //Print this employee's details
        void setEmployeeNo(int employeeNum);

    private:
        int employeeNumber;
        std::string name;
        std::string department;
}; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T16:36:01.877

在 Java 中，创建一个*引用*`new Employee[SIZE]`数组。`null`

 *在 C++ 中，*创建*`new Employee[SIZE]`一个由. 您的默认构造函数尝试设置和to 。尝试初始化 a会给出您描述的错误。*`Employee``name``department``NULL``std::string``NULL`*

 *C++ 中没有“null”字符串，但您可以默认构造`name`and `department`，这会将它们设置为空字符串：

```
Employee::Employee(): employeeNumber(0), name(), department() { 
```

最后，如果`List`可以包含可变数量的元素，我建议您使用`std::vector<Employee>`（类似于`ArrayList<Employee>`Java 中的）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T16:43:45.283

如果`name`and`department`是`std::string`s（或类似的字符串类型），那么用`NULL`（空字符指针）初始化它们是无效的。

如果我猜对了，您应该改为默认初始化它们，如下所示：

```
Employee::Employee(): employeeNumber(0), name(), department() {
} 
```

但是如果没有看到`Employee`.

正如其他人指出的那样，您应该使用 a`std::vector`而不是数组。这允许您`Employee`在“列表”中仅包含有效对象。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-01T16:43:57.523

我不知道你的类的实际定义是什么，所以很难确定你的问题。

但是现代 C++ 中的一个选项是`std::vector<Employee>`在类中使用数据成员`PersonnelList`。`std::vector`可以在运行时动态增长，使用它的`push_back()`方法，例如

```
#include <vector> // for std::vector

class Employee
{
  ....
};

class PersonnelList
{
public:
    PersonnelList()
    {
        // Nothing to do - vector is initialized empty
    }

    // Get current employee count
    size_t Count() const
    {
        return m_employees.size();
    }

    // Add a new employee to the personnel
    void AddEmployee(const Employee& newEmployee)
    {
        m_employees.push_back(newEmployee);
    }

private:
    std::vector<Employee> m_employees;
}; 
```

无需使用原始指针或类似的东西：健壮的 RAII STL 容器类使您的代码更简单。**

# c# - 部分垂直滚动

> ID：15162421
> 
> 赞同：2
> 
> 时间：2013-03-01T16:33:48.213
> 
> 标签：c#, xaml, listbox

我有一个`ListBox`包含两列的列 - 第一列包含一个切换按钮，第二列包含一个`Expander`包含多个控件的列。如果`expander`折叠起来，则作品的整体滚动`ListBox`效果很好。但是，如果`Expander`打开并且扩展器包含大量项目，`ListBox`则会滚动整个行大小，通常不会显示`expander`列表的一部分。

这类似于在列表框中放置一个大于列表框可视区域的图像。在这种情况下，如果您单击滚动条，您可能希望“逐步”向下移动图像，而不是一键将其滚动到屏幕之外。

`ListBox`正如我所描述的那样，是否有允许部分滚动的设置？My`listBox`是在 a 中定义的`xaml`，控件是通过 C# 代码添加的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-01T16:43:52.607

Have you tried turning on smooth scrolling by setting `ScrollViewer.CanContentScroll` to false? This is what controls whether the `ScrollViewer` will scroll an item at a time, or smoothly with partial items available.

> "ScrollViewer currently allows two scrolling modes: smooth pixel-by-pixel scrolling (CanContentScroll = false) or discrete item-by-item scrolling (CanContentScroll = true). Currently WPF supports UI virtualization only when scrolling by item. Pixel-based scrolling is also called 'physical scrolling' and item-based scrolling is also called 'logical scrolling'." (From [this answer](https://stackoverflow.com/questions/3724593/why-setting-scrollviewer-cancontentscroll-to-false-disable-virtualization)).

If you have a lot of items in your `ListBox`, this may not be an ideal solution, however, because it turns off Virtualization, and therefore may have a performance impact. Take a look at [this answer](https://stackoverflow.com/questions/1924089/listbox-virtualizingstackpanel-and-smooth-scrolling-in-wpf) to see more about smooth scrolling and virtualization. (One answer suggests a hack that allows for smooth scrolling and virtualization).

# ruby-on-rails - 与“rails new”相反的操作？

> ID：15162423
> 
> 赞同：0
> 
> 时间：2013-03-01T16:33:53.723
> 
> 标签：ruby-on-rails, ruby-on-rails-3

`rails new`创建一个新的 Rails 应用程序，整个 Rails 目录结构。但是有相反的操作`rails new`吗？该命令将删除`rails new`创建的内容。或者我可以手动删除`rails new`生成的目录吗？

`rails destroy`不是这里的选择。它与 的相反`rails generate`，它只破坏 MyApp 的单独组件，而不是整个 MyApp/。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T16:35:51.737

您可以简单地删除该文件夹。

如果您使用的是基于 unix 的系统，请使用`rm`

```
rm -r your_rails_app 
```

Rails 不会在目录之外创建文件，因此您只需删除该文件夹。

# javascript - Javascript - 字符串拆分效果不佳

> ID：15162424
> 
> 赞同：0
> 
> 时间：2013-03-01T16:33:54.393
> 
> 标签：javascript, string, string-split

我正在制作一个脚本，它接收一个字符串并将其分隔在较小的字符串上。

例如：“这句话很长，我把它分成更小的部分。拉拉拉”

它将返回“This is a long sentence”、“我会将它分成更小的部分”、“Lalala”

这样做的目的是使用谷歌翻译器将文本转换为语音，但这个功能有大约 70-80 个字符的限制，所以如果字符串太大，我需要将其截断。

首先，我用点（“.”）分隔句子，然后如果句子仍然太长，我用逗号（“，”）分隔它们，如果字符串仍然太长，我将它们分隔成唯一的单词。

一切都很好，直到我尝试加入一些单词以使音频变得更加连续。由于某种原因，用逗号分隔的字符串再次连接起来。我不知道为什么。

这是代码：

### 编辑：相关部分拆分并格式化

```
function talk(text){
    var audios = document.createElement('audio');
audios.setAttribute('id','audio_speech');
var playlist = new Array()
if(text.length >= 75) {
    playlist = text.split(".");     
    for (var i = 0;i<playlist.length;i++) {
        if (playlist[i].length >= 75) {
        auxarr = playlist[i].split(",");
        //alert(auxarr.length);

        for(var j=0;j<auxarr.length;j++) {
            auxarr2 = auxarr[j].split(" ");
            document.write(auxarr2+"<br>"); 
            if (auxarr[j].length >= 75) {
            auxarr2 = auxarr[j].split(" ");     
            for(var x=0; x < auxarr2.length; x++){
            if(auxarr2[x].length < 50) {
                aux = auxarr2[x];
                while (aux.length < 50 && auxarr2[x+1]) {
                    aux = aux + " " + auxarr2[x+1];
                auxarr2.splice(x,1);
                auxarr2[x]=aux;     
               }        
        }
//... 
```

### 编辑：完整的原始代码

```
function talk(text)
{
    var audios = document.createElement('audio');
    audios.setAttribute('id','audio_speech');
    var playlist = new Array()
    if(text.length >= 75) {
        playlist = text.split(".");

        for (var i = 0;i<playlist.length;i++) {
            if (playlist[i].length >= 75) {

                auxarr = playlist[i].split(",");
                //alert(auxarr.length);

                for(var j=0;j<auxarr.length;j++) {
                    auxarr2 = auxarr[j].split(" ");
                    document.write(auxarr2+"<br>");

                    if (auxarr[j].length >= 75) {
                        auxarr2 = auxarr[j].split(" ");

                        for(var x=0; x < auxarr2.length; x++){

                            if(auxarr2[x].length < 50) {

                                aux = auxarr2[x];

                                while (aux.length < 50 && auxarr2[x+1]) {
                                        aux = aux + " " + auxarr2[x+1];
                                        auxarr2.splice(x,1);
                                    }
                                auxarr2[x]=aux;

                            }

                        }

                        auxarr_end = auxarr.slice(j+1,auxarr.length);

                        auxarr_begin = auxarr.slice(0,j);
                        document.write("<br>"+auxarr+"<br> aca");                       
                        document.write("<br>"+auxarr_end+"<br> aca1");
                        document.write("<br>"+auxarr_begin+"<br> aca2");                        
                        auxarr.splice(j,1);

                        auxarr_begin = auxarr_begin.concat(auxarr2);
                        j = auxarr.length;
                        auxarr = auxarr_begin.concat(auxarr_end);
                        alert(auxarr);

                    }

                }

                //alert("current: "+playlist[i]);
                //alert("current length:"+playlist[i].length);
                //alert("auxarr: "+auxarr);
                playlist_end = playlist.slice(i+1,playlist.length);
                playlist_begin = playlist.slice(0, i);

                playlist.splice(i,1);

                playlist_begin = playlist_begin.concat(auxarr);
                i = playlist.length;
                playlist = playlist_begin.concat(playlist_end);
                //alert("new "+playlist[i]);    

            }

        }
        /*do {
            textAux = text.substring(0, 74);
            text = text.substring(textAux.length, text.length);
            playlist.push(textAux);
        }while(text.length >= 75);*/
    } else {
        playlist.push(text);
    }
    //

    //playlist.push(text);

    /*for(var a=0; a<playlist.length;a++){
    document.write(playlist[a]+"<br>");}*/
    audios.setAttribute('src', 'http://translate.google.com/translate_tts?tl=es&q=' + encodeURIComponent(playlist[0]));
    playlist.splice(0,1);
    audios.load();
    audios.play();
/*

    */
    audios.addEventListener('ended', function(){
        if (playlist[0]){
        audios.setAttribute('src', 'http://translate.google.com/translate_tts?tl=es&q=' + encodeURIComponent(playlist[0]));
        playlist.splice(0,1);
        audios.play();
        }
    }, false);

}
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T16:52:20.040

试试这个，修改它以使用您的常量和参数。

```
var LIMIT = 20;

var res = new Array()

//strats with spliting by dot
var dotArr = "This is a long sentence. and I will separate it into smaller parts. Lalala".split(/[.]/);

for (var i = 0; i < dotArr.length; i++) {
  if (dotArr[i].length > LIMIT){

    //only when have to, split by comma
    var comArr = dotArr[i].split(/[,]/);
    for (var j = 0; j < comArr.length; j++) {
       //only when have to and that a space exists, split by space
       if (comArr[j].length > LIMIT && comArr[j].indexOf(" ") != -1 ){
         var spaceArr = comArr[j].split(/[ ]/);
         //accomulate words until we reach the limit and then push the value to res
         for (var k = 0; k < spaceArr.length;){
            var sMerge = spaceArr[k++];
            while (k < spaceArr.length && sMerge.length + spaceArr[k].length + 1 < LIMIT){
               sMerge = sMerge + " " + spaceArr[k];
               k++;
            }
            res.push(sMerge)
         }
       }else{
         res.push(comArr[j]);
       }
    }
  }else{
    res.push(dotArr[i]);
  }
}

//res contain all optimized sentences. 
```

# mysql - 如何使用 20,000 条记录改进交叉连接？

> ID：15162427
> 
> 赞同：0
> 
> 时间：2013-03-01T16:34:07.630
> 
> 标签：mysql

我有两张桌子：`users (userid,student_no,name)`和`regd (semester,student_no)`。 `users`包含大约 7,000 条记录和`regd`大约 20,000 条记录。有时 in 中的条目`regd`不在`users`.

如何**快速**选择所有条目`users`中`regd`包含学期 = '2012-2' 的条目？我试过这个：

```
 SELECT * FROM  `regd` , users WHERE
      semester =  '2012-2' AND users.student_no = regd.student_no 
```

但是如果我有一个很小的数据库，加载查询需要很长时间。每六个月添加约 10,000 个条目，每年添加`regd`约 2,500 个条目`users`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T16:53:17.980

在连接列上添加索引：

```
CREATE INDEX idx_regd_student_no ON regd(student_no); 
```

和

```
CREATE INDEX idx_users_student_no ON users(student_no); 
```

此外，如果您的表没有 PK，请添加一个。在 regd 的情况下，您可以使用 PK = `(semester, student_no)`。

正如其他评论所说，22k 记录并不大，所以我只能假设你没有任何像样的索引。

希望这可以帮助。

# java - oauth-20090825.jar。为授权 url 返回 null

> ID：15162434
> 
> 赞同：1
> 
> 时间：2013-03-01T16:35:00.870
> 
> 标签：java, android, oauth

我不断`null?oauth_callback=x-opensocial-demo-app://callback`从`getAuthorizationUrl`. `oauth3leggedscheme`当我追踪到图书馆时，`getAuth(providerName)`正在返回`null`. 但是，我已经在我的主要活动中设置了我的提供者凭据，例如：

```
public void onCreate(Bundle savedInstanceState) {

    setScheme("x-opensocial-demo-app");

    Provider provider = new Provider();
    provider.setName("MyContainer");
    provider.setRestEndpoint("http://mycontainer.com/social/rest");
    provider.setRequestTokenUrl("http://mycontainer.com/oauth/request_token");
    provider.setAuthorizeUrl("http://mycontainer.com/oauth/authorize");
    provider.setAccessTokenUrl("http://mycontainer.com/oauth/access_token");        

    String consumer_key = "frttt-c3f1-cff4-qwee-e8deffc5d2de";
    String consumer_secret = "33b9e920d185c93a430a1d565e1c7621";        

    addProvider(provider, new String[] {consumer_key, consumer_secret});

    super.onCreate(savedInstanceState);

    setupClient ();

} 
```

这里有什么问题？

# html - 如何在 html div 中创建垂直居中的 html 链接按钮

> ID：15162440
> 
> 赞同：1
> 
> 时间：2013-03-01T16:35:22.700
> 
> 标签：html, css

我经历了很多关于这个的事情。但仍然找不到任何解决方案。在每个解决方案中都有一些限制。任何人都可以为我的问题提供一个通用且简单的 css 代码以将 html 链接按钮垂直居中放置在 div 内吗？

如下图所示，**创建帐户**按钮位于 div google header-bar 的中间 :) ![在此处输入图像描述](../Images/fcd5262bddccde3470deb6108c9d90da.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-09-30T15:44:22.770

您需要设置`line-height`相同的 like `height`，并且`display: inline-block`

这是一个[小提琴](http://jsfiddle.net/bslipek/j5yhuzoj/1/)。

如果您使用的是 sass，那么很容易编写一个 mixin（以 sass 格式）：

```
=button($height: 40px)
  height: $height
  line-height: $height 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T16:43:32.693

You can combine display:table-cell and vertical-align:middle

```
<div style="display:table-cell; vertical-align:middle; height:50px; width:200px; background-color:silver;" >
  <a href="#link">
    <img src="" />
  </a>
</div> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-01T16:42:10.157

Just set the heights and margins appropriately.

[sample fiddle](http://jsfiddle.net/Vx7h2/)

```
<div id="a">
    <div id="b">bbb</div>
    <div id="c">ccc</div>
</div>

#a {
    overflow: auto;
    background-color: yellow;
    height: 100px;
}
#b {
    height: 80px;
    background-color:red;
    width: 50px;
    float: left;
    margin-top: 10px;
}
#c {
    height: 50px;
    background-color: blue;
    width: 80px;
    float: right;
    margin-top: 25px;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-01T16:45:48.783

我经常使用这个技巧：

```
.valign-content:before {
   content : ''; 
   display : inline-block; 
   width : 0; height : 100%; 
   vertical-align : middle; 
}

.valign-content>* { 
   vertical-align : middle; 
   display : inline-block; 
} 
```

这是演示：http: [//jsfiddle.net/pavloschris/5g3Cz/](http://jsfiddle.net/pavloschris/5g3Cz/)

对我有用吗...

# entity-framework - EF多对多加入 - 延迟加载已禁用

> ID：15162462
> 
> 赞同：1
> 
> 时间：2013-03-01T16:36:19.243
> 
> 标签：entity-framework, linq-to-entities, entity-framework-5, code-first, entity-relationship

这是我的场景：

```
public class Contact 
{
    public Guid ContactId { get; set; }
    ........
    public Guid WorkspaceId { get; set; }
    public Workspace Workspace { get; set; }
}

public class Workspace
{
    public Guid WorkspaceId { get; set; }
    ........
    public ICollection<Contact> ReferencedContacts { get; set; }
    public ICollection<Contact> OwnedContacts { get; set; }
} 
```

逻辑如下：联系人不能存在于工作区之外（意味着工作区拥有该联系人）。用户有一个工作区，它将“拥有的联系人”放置在其中（拥有的联系人 = 联系人信息描述了用户，例如职业、姓名、地址等）。用户工作区也可以保存对其他用户拥有的联系人的引用（这里是存储工作区和引用的联系人之间关系的连接表）。

```
public WorkspaceMap()
{
    ....
    HasMany(w => w.ReferencedContacts).WithMany().Map(mp =>
    {
        mp.ToTable("WorkspaceReferencedContacts");
        mp.MapLeftKey("WorkspaceId");
        mp.MapRightKey("ContactId");
        });
}

public ContactMap()
{
    ......
    HasRequired(c => c.Workspace).WithMany(w => w.OwnedContacts).HasForeignKey(c =>   c.WorkspaceId).WillCascadeOnDelete(false);
    Property(c => c.WorkspaceId).HasColumnName("WorkpaceId");
} 
```

我要做的是使用查询方法获取特定工作区的所有引用联系人。查询的 SQL 版本如下：

SELECT * FROM dbo.Contacts c INNER JOIN dbo.WorkspaceReferencedContacts wc ON wc.ContactId = c.ContactId WHERE wc.WorkspaceId = '57F685C0-428C-44C3-8708-F30B5AF34CAE';

我已经尝试了很多方法，但都没有成功。**请注意延迟加载被禁用（没有必要讨论为什么......）**。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T16:57:45.927

> ...获取特定工作区的所有引用联系人...

我认为：

```
var contacts = context.Workspaces
    .Where(w => w.WorkspaceId == "57F685C0-428C-44C3-8708-F30B5AF34CAE")
    .Select(w => w.ReferencedContacts)
    .SingleOrDefault(); 
```

# crystal-reports-xi - Crystal Reports XI-空白最后一页

> ID：15162470
> 
> 赞同：0
> 
> 时间：2013-03-01T16:36:50.477
> 
> 标签：crystal-reports-xi

我有一份带有 2 个子报告的报告。当第一个子报表很长（但仍然在页面上留下好几厘米）并且第二个是空的时，我经常会得到一个仅打印页眉和页脚的额外页面。子报表和部分被设置为在空白时被抑制并且它似乎工作：我通过为它们设置不同的颜色来测试它并且它们没有出现。奇怪的是，当我将带有第二个子报告的部分设置为永久禁止时，空白页不会打印。

我已经为所有部分切换了 New Page After，向其中添加了 Not OnLastRecord 公式，并抑制或删除了子报表中及其周围的所有空白部分，但仍然没有运气。

我将不胜感激任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-30T13:17:32.610

您可以检查以下几件事，但您的问题未解决：

1.  右键单击您的子报表并选择“格式化子报表”

2.  在常用选项卡上，取消选中“保持对象在一起”框

3.  在“子报表”选项卡上，如果您以另一种方式抑制它，请选中“抑制空白子报表”框。

我希望这有帮助。

# c# - 项目特定套接字异常：发现死网络

> ID：15162471
> 
> 赞同：2
> 
> 时间：2013-03-01T16:36:51.683
> 
> 标签：c#, sockets

所以今天我尝试通过[SSHNet](http://sshnet.codeplex.com) API 创建到远程主机的 SFtp 连接。快速而肮脏的控制台应用程序中的测试工作得很好，但是当在应该添加功能的项目中引用构建的 DLL 时，DLL 会引发异常。

调试项目，发现异常是在socket connect（或begin connect函数）上：

> 套接字操作遇到死网络。

如前所述，另一个项目中与具有相同参数的完全相同的服务器的连接工作得很好。

我检查了项目/解决方案配置。仔细检查服务器名称和其他参数，并制作了一个在特定项目中总是失败（无论是什么服务器）但在（新）项目中工作的测试用例：

```
var ep = new IPEndPoint(IPAddress.Parse(IPAdres),Port);
var sock = new Socket(ep.AddressFamily, SocketType.Stream, ProtocolType.Tcp);

sock.SetSocketOption(SocketOptionLevel.Tcp, SocketOptionName.NoDelay, true);

//  Connect socket with specified timeout
var connectResult = sock.BeginConnect(ep, null, null);

if (!connectResult.AsyncWaitHandle.WaitOne(180, false))
{
    throw new Exception("Timeout");
}

sock.EndConnect(connectResult); 
```

但这似乎不是一个奇怪的例子。有没有人以项目特定的方式处理过这种错误？有什么我想念的吗？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-11-24T12:49:48.027

也许图书馆使用了错误的网卡？

我在带有 .net CF 2.0 的 Windows CE 设备上遇到了这个异常。就我而言，我正在为 GPRS 接口创建一个套接字，但该设备是通过以太网连接的。

# mysql - 比较数据时在mySql中更改日期格式时的不同结果

> ID：15162477
> 
> 赞同：0
> 
> 时间：2013-03-01T16:37:09.403
> 
> 标签：mysql, date, view

这是一个与mysql相关的查询。我使用两个表创建了一个视图...表中的一个字段是“日期”，没有任何默认值（即 null 或 dd-mm-yyyy 或其他任何值）。现在，当我使用 [ date between '2012-01-01' and '2012-03-31' ] 运行条件查询时，我得到的行数与使用 [ date between '2012-1-1 ] 的行数不同'和'2012-3-31']。

使用“desc viewName”后我看到的另一件重要的事情是，它将该日期的默认值显示为“0000-00-00”。

如果查询如下，我将得到 120 行：

```
select * from billing_master where date(pay_date) between '2012-1-1' and'2013-1-1'; 
```

如果查询如下，我将得到 45 行：

```
select * from billing_master where date(pay_date) between '2012-01-01' and'2013-01-01'; 
```

有人知道吗？

问候， Sohil S.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T19:21:34.573

假设您的 pay_date 字段的数据类型为 DATE，

```
DATE_FORMAT(pay_date,'%Y-%m-%d') 
```

如果它是 VARCHAR 类型等，而您只是将其转换为 DATE 本身

```
DATE_FORMAT(DATE(pay_date),'%Y-%m-%d') 
```

您的查询应如下所示：

```
SELECT * FROM billing_master  
WHERE DATE_FORMAT(DATE(pay_date),'%Y-%m-%d')  
BETWEEN '2012-01-01' AND '2013-01-01'; 
```

# mysql - 按月分组并添加多个列

> ID：15162479
> 
> 赞同：1
> 
> 时间：2013-03-01T16:37:11.657
> 
> 标签：mysql, sql

嗨，我有一个存储反馈和评级的表格（1 到 5 之间）

我什至不知道这是否可以用 SQL 完成。

想要我做什么是按月分组并将所有 Q1、Q2、Q3 和 Q4 加到一列中。在另一列中具有该分组月份中的记录数量。

然后我可以使用 PHP 计算出那几个月的平均费率。

```
 unixStamp      |  Q1   |   Q2   |   Q3    |   Q4
-----------------------------------------------------
  1362149504     |  5    |    4   |    3    |   5
  1362136774     |  5    |    5   |    2    |   5
  ..........     |  ...  |  ....  |  ....   |  .... 
```

这是我想要实现的。

```
 Mnth           |  score  |   count  | 
---------------------------------------
  1              |  192    |    20    | 
  2              |  365    |    40    | 
  ..........     |  ...    |  ....    | 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T16:47:32.143

您可以使用 a`CROSS JOIN`取消*透视*数据以获取结果：

```
SELECT Mnth,
  sum(data) score,
  count(data) `count`
FROM 
(
  SELECT MONTH(FROM_UNIXTIME(unixStamp)) Mnth, 
    CASE q.col
      WHEN 'Q1' THEN Q1
      WHEN 'Q2' THEN Q2
      WHEN 'Q3' THEN Q3
      WHEN 'Q4' THEN Q4
    END AS DATA
  FROM yourtable t
  CROSS JOIN 
  (
    SELECT 'Q1' AS col
    UNION ALL SELECT 'Q2'
    UNION ALL SELECT 'Q3'
    UNION ALL SELECT 'Q4'
  ) q
) s
group by Mnth 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!2/fb4c3/1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T16:41:45.293

`GROUP BY`可以包含任意表达式（或表达式的别名）`SELECT`，并且您可以`SUM()`将 4 个季度列一起作为聚合。

```
SELECT
  /* Retrieve only the month from unixStamp */
  MONTH(FROM_UNIXTIME(unixStamp)) AS Mnth,
  /* SUM() as an aggregate the 4 quarterly cols */
  SUM(Q1+Q2+Q3+Q4) AS score,
  /* COUNT(*) aggregate will list number of records for group */
  COUNT(*) AS `count`
FROM yourtable
GROUP BY Mnth 
```

请注意，以上将*仅*按月份分组，而不是似乎更合适的月份/年份组合。如果你需要，使用类似的东西

```
/* Supplies month like 2013-02 */
SELECT
  DATE_FORMAT(FROM_UNIXTIME(unixtimestamp), '%Y-%m') AS Mnth,
  ... 
```

# java - 将列比较器设置为 JTable 时遇到问题

> ID：15162480
> 
> 赞同：2
> 
> 时间：2013-03-01T16:37:16.437
> 
> 标签：java, swing, jtable, comparator, tablerowsorter

在另一个线程中，我发现了这个比较器（帖子底部），用于对可能由整数、字符串或两者组成的 JTable 列进行排序。我不知道如何将它应用到我的 JTable。我的表之前使用的是自动创建的行排序器。我将其设置为 false，我现在正在使用：

```
TableRowSorter<MyTableModel> rowSorter = new TableRowSorter<MyTableModel>();
jtable.setRowSorter(rowSorter);
rowSorter.setComparator(0, c1); 
```

我得到一个索引越界异常，说我提供的范围无效。我的表有多个列。这是应用比较器的正确方法吗？我觉得这不是这样做的方法。

```
Comparator c1 = new java.util.Comparator() {
    /**
     * Custom compare to sort numbers as numbers.
     * Strings as strings, with numbers ordered before strings.
     * 
     * @param o1
     * @param o2
     * @return
     */
@Override
            public int compare(Object oo1, Object oo2) {
                boolean isFirstNumeric, isSecondNumeric;
                String o1 = oo1.toString(), o2 = oo2.toString();

        isFirstNumeric = o1.matches("\\d+");
        isSecondNumeric = o2.matches("\\d+");

        if (isFirstNumeric) {
            if (isSecondNumeric) {
                return Integer.valueOf(o1).compareTo(Integer.valueOf(o2));
            } else {
                return -1; // numbers always smaller than letters
            }
        } else {
            if (isSecondNumeric) {
                return 1; // numbers always smaller than letters
            } else {
                isFirstNumeric = o1.split("[^0-9]")[0].matches("\\d+");
                isSecondNumeric = o2.split("[^0-9]")[0].matches("\\d+");

                if (isFirstNumeric) {
                    if (isSecondNumeric) {
                        int intCompare = Integer.valueOf(o1.split("[^0-9]")[0]).compareTo(Integer.valueOf(o2.split("[^0-9]")[0]));
                        if (intCompare == 0) {
                            return o1.compareToIgnoreCase(o2);
                        }
                        return intCompare;
                    } else {
                        return -1; // numbers always smaller than letters
                    }
                } else {
                    if (isSecondNumeric) {
                        return 1; // numbers always smaller than letters
                    } else {
                        return o1.compareToIgnoreCase(o2);
                    }
                }
            }
        }
    }
}; 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-01T16:41:04.007

手动设置 RowSorter 时，您必须自己注意使其与模型同步：

```
 TableRowSorter sorter = new TableRowSorter();
 table.setRowSorter(sorter);
 sorter.setModel(table.getModel());
 sorter.setComparator(myComparator); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-04T21:00:09.650

@kleopatra，当您从原始文本文件（例如 .csv）获取数据时，您可能没有模型。因此，所有列都是字符串，而其中有合法数字，因此您希望将这些列排序为数字，而不是字符串（因此避免著名的 1<11<10000<2<200...）。

感谢 user1202394 找到这个其他线程，你能给我们提供链接吗？

我设法通过三个新的代码部分使其按预期工作：

```
Comparator myComparator = new java.util.Comparator() {
    /**
     * Custom compare to sort numbers as numbers.
     * Strings as strings, with numbers ordered before strings.
     * 
     * @param o1
     * @param o2
     * @return
     */
    @Override
    public int compare(Object oo1, Object oo2) {
        boolean isFirstNumeric, isSecondNumeric;
        String o1 = oo1.toString(), o2 = oo2.toString();

        isFirstNumeric = o1.matches("\\d+");
        isSecondNumeric = o2.matches("\\d+");

        if (isFirstNumeric) {
            if (isSecondNumeric) {
                return Integer.valueOf(o1).compareTo(Integer.valueOf(o2));
            } else {
                return -1; // numbers always smaller than letters
            }
        } else {
            if (isSecondNumeric) {
                return 1; // numbers always smaller than letters
            } else {
                // Those lines throw ArrayIndexOutOfBoundsException
                //                        isFirstNumeric = o1.split("[^0-9]")[0].matches("\\d+");
                //                        isSecondNumeric = o2.split("[^0-9]")[0].matches("\\d+");

                // Trying to parse String to Integer.
                // If there is no Exception then Object is numeric, else it's not.
                try{
                    Integer.parseInt(o1);
                    isFirstNumeric = true;
                }catch(NumberFormatException e){
                    isFirstNumeric = false;
                }
                try{
                    Integer.parseInt(o2);
                    isSecondNumeric = true;
                }catch(NumberFormatException e){
                    isSecondNumeric = false;
                }

                if (isFirstNumeric) {
                    if (isSecondNumeric) {
                        int intCompare = Integer.valueOf(o1.split("[^0-9]")[0]).compareTo(Integer.valueOf(o2.split("[^0-9]")[0]));
                        if (intCompare == 0) {
                            return o1.compareToIgnoreCase(o2);
                        }
                        return intCompare;
                    } else {
                        return -1; // numbers always smaller than letters
                    }
                } else {
                    if (isSecondNumeric) {
                        return 1; // numbers always smaller than letters
                    } else {
                        return o1.compareToIgnoreCase(o2);
                    }
                }
            }
        }
    }
};

TableRowSorter sorter = new TableRowSorter();
table.setRowSorter(sorter);
sorter.setModel(table.getModel());
sorter.setComparator(myComparator);

// Apply Comparator to all columns
for(int i = 0 ; i < table.getColumnCount() ; i++)
    rowSorter.setComparator(i, c1); 
```

# c# - ASP.NET MVC 3：在 Web 前端更改资源文件文本

> ID：15162485
> 
> 赞同：1
> 
> 时间：2013-03-01T16:37:30.223
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, localization, resources

我面临以下情况：

*   具有多个项目的复杂 MVC 应用程序
*   应该能够处理多种语言（并非每种语言都已定义）
*   资源键将始终可用，只是每种语言的值不同
*   服务层和web层需要资源
*   资源在其自己的项目中资源是公共的，具有构建操作嵌入式资源和自定义工具 PublicResXFileCodeGenerator

游戏规则改变者：

*   每种语言的资源文本应在 Web 前端可编辑，并且应即时可用

这就是问题所在。在前端读取和显示每个资源的内容是没有问题的。

代表集合 CultureInfo 读取本地化资源文件：

```
var resourceSet = ResourceFile.ResourceManager.GetResourceSet(CultureInfo.CurrentUICulture, true, false); 
```

无论如何都可以更改资源文件吗？另一种方法是什么？数据库方式？

我找到[了这种](http://geeksship.com/LocalTopic/15630ace-5197-45cb-b925-9de9010d4b8f/en-US/A-simple-mvc-example-to-view-and-edit-NET-resource-resx-files.aspx)方法。但它可能不会在我们的环境中工作，因为我们有一个单独的资源项目并且在多个项目中需要它们。

我对数据库方式的（简单）想法：

*   每个 ViewModel 所需的每个字符串都将在 ViewModelBase >:/ 中定义
*   Controller 获取每个 View 所需的字符串并从存储库中设置区域设置并将它们设置到 ViewModel
*   View 将访问每个 ViewModel.Key 的资源

有什么想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T16:55:40.840

> 无论如何都可以更改资源文件吗？

不，不是资源文件。您可以编写一个[`custom resource provider`](http://msdn.microsoft.com/en-us/library/aa905797.aspx)并将它们存储在另一个存储中，例如数据库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-26T10:50:50.637

迟到的答案：我们将所有资源存储在数据库中并编写了自定义资源提供程序。

# python - 如何通知用户python应用程序无法连接

> ID：15162488
> 
> 赞同：0
> 
> 时间：2013-03-01T16:37:39.957
> 
> 标签：python, tkinter

这个 python Tkinter GUI 应用程序通过串行端口与嵌入式 Linux 目标通信。如果应用程序无法使用串行端口连接到目标，是否可以通过 tkMessageBox 通知用户？主机上的 Linux 启动器图标当前用于启动此应用程序，因此如果无法建立连接，则根本不会向用户提供任何反馈。

```
def initialize(self):
    self.ser = serial.Serial('/dev/ttyACM0', 115200, timeout=1)
    ... 
```

> 编辑：这是解决方案

```
def initialize(self):
    try:
        self.ser = serial.Serial('/dev/ttyACM0', 115200, timeout=1)
    except:
        tkMessageBox.showerror(title="Error", message="No Connection")
        sys.exit() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T14:44:55.970

你用`pyserial`图书馆了吗？它可以解决你的问题。

您可以`serial.SerialTimeoutException`在写入超时引发异常的地方使用异常。

我希望它有用。

# azure - 测试 Windows Azure Web 应用程序以获得最大用户负载

> ID：15162491
> 
> 赞同：9
> 
> 时间：2013-03-01T16:37:49.413
> 
> 标签：azure, visual-studio-2012, load-testing

我正在对新兴的 Web 技术进行一些研究，并创建了一个非常简单的 Azure 网站，它使用 Web 套接字和 mongo db 作为数据库。我已经设法让所有组件一起工作，现在必须对应用程序执行负载测试。

主要标准是应用程序可以支持的最大用户负载，目前有 1 个 Web 角色实例，所以我可能需要测试该实例的最大用户负载，然后尝试使用 2 个实例，依此类推。

我在网上找到了一些解决方案，例如 Loadstorm，但是我付不起使用这些服务的费用，所以我需要能够从我自己的开发机器或其他云服务中执行此操作。

我遇到过 Visual Studio 负载测试，它们看起来非常有用，但似乎它们需要 VS Ultimate 和活动的 msdn 订阅——[这里](https://web.archive.org/web/20120818100009/http://msdn.microsoft.com/en-us/library/windowsazure/hh674494.aspx)列出了先决条件。另外，从[这个展示负载测试基础的视频](http://channel9.msdn.com/Series/Visual-Studio-2012-Premium-and-Ultimate-Overview/Visual-Studio-Ultimate-2012-Load-testing-applications-in-Visual-Studio)来看，这些负载测试似乎是完全独立于实际 Web 项目创建的，这是否意味着我只能看到与用户相关的指标？即我看不到正在使用的 RAM 量、处理器等。

有什么建议么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-01T17:03:09.427

您可以在 Azure 本身或其他托管服务提供商中创建 Linux 虚拟机，并使用[ApacheBench](http://en.wikipedia.org/wiki/ApacheBench) (ab) 或[JMeter](http://jmeter.apache.org/)对您的应用程序进行简单的负载测试。请注意，在这样的设置中，您的基准服务器本身可能是一个瓶颈。

另一种方法是使用允许一些免费使用的在线负载测试服务，例如：

*   [loader.io](http://loader.io/)，由 SendGrid 实验室提供
*   [负载风暴](http://loadstorm.com/)
*   [火焰计](http://blazemeter.com)
*   [闪电战](http://blitz.io)
*   [新人](http://www.neotys.com/)
*   [负载冲击](http://loadimpact.com/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-01T18:37:55.830

对于负载测试，LoadStorm 的价格非常合理，尤其是与本地软件相比（并且具有最多 25 个虚拟客户端的免费层）。您可以安装 jmeter 之类的代码，但您仍然需要机器（或 vm）来托管和运行它，并且您需要确保负载生成器机器不是测试中的瓶颈。

运行测试时，您可能需要考虑将 Web 层与 MongoDB 分开。MongoDB 将消耗尽可能多的内存（因为这就是 MongoDB 速度的原因）。在真实场景中，您可能会在自己的环境中使用 MongoDB。因此，对于您的测试，我会考虑将 MongoDB 卸载到它自己的实例上，并且 10gen 有一个[Worker Role 设置](http://docs.mongodb.org/ecosystem/tutorial/deploy-mongodb-worker-roles-in-azure/)，安装起来相当简单。

另请记住，NIC 带宽是每个内核 100Mbps，这可能是您测试的限制因素，具体取决于您驱动的负载量。

自托管 MongoDB 的一种替代方法：将 MongoDB 卸载到诸如 MongoLab 之类的托管商。这将允许您测试 Web 应用程序的容量，而无需担心有关 MongoDB 设置、配置、优化等的详细信息。目前 MongoLab 提供托管在 Azure、美国西部和美国东部数据中心的免费层。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-01T17:08:29.643

编辑我的回复，没有仔细阅读问题。

查看此线程以获取各种工具和链接： [用于压力、负载和性能测试的开源工具](https://stackoverflow.com/questions/507683/open-source-tool-for-stress-testing-load-testing-and-performance-testing)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-10T15:25:07.697

如果您有兴趣查找被测应用程序的性能计数器，您可以重新访问 Visual Load Cloud 基本负载测试中添加的一些最新功能。 [http://blogs.msdn.com/b/visualstudioalm/archive/2014/04/07/get-application-performance-data-during-load-runs-with-visual-studio-online.aspx](http://blogs.msdn.com/b/visualstudioalm/archive/2014/04/07/get-application-performance-data-during-load-runs-with-visual-studio-online.aspx)

要获取有关 Visual Studio 云负载测试解决方案的更多信息 - [https://www.visualstudio.com/features/vso-cloud-load-testing-vs](https://www.visualstudio.com/features/vso-cloud-load-testing-vs)

# ruby-on-rails - rmagick 阻止 Rails 服务器工作

> ID：15162496
> 
> 赞同：7
> 
> 时间：2013-03-01T16:38:06.930
> 
> 标签：ruby-on-rails, rmagick

我必须使用 rmagick，它不允许我启动 rails 服务器。我在这里和谷歌上读过，到目前为止，没有一个解决方案有帮助。图书馆出了点问题，我不知道如何解决它。

如果有人有解决这个确切问题的建议，将不胜感激。

```
/Users/lexi87/.rvm/gems/ruby-2.0.0-p0/gems/rmagick-2.13.2/lib/rmagick.rb:11:in `require': dlopen(/Users/lexi87/.rvm/gems/ruby-2.0.0-p0/gems/rmagick-2.13.2/lib/RMagick2.bundle, 9): Library not loaded: /usr/local/lib/libltdl.7.dylib (LoadError)
  Referenced from: /usr/local/lib/libMagickCore-Q16.7.dylib
  Reason: image not found - /Users/lexi87/.rvm/gems/ruby-2.0.0-p0/gems/rmagick-2.13.2/lib/RMagick2.bundle
    from /Users/lexi87/.rvm/gems/ruby-2.0.0-p0/gems/rmagick-2.13.2/lib/rmagick.rb:11:in `<top (required)>'
    from /Users/lexi87/.rvm/gems/ruby-2.0.0-p0@global/gems/bundler-1.3.0/lib/bundler/runtime.rb:72:in `require'
    from /Users/lexi87/.rvm/gems/ruby-2.0.0-p0@global/gems/bundler-1.3.0/lib/bundler/runtime.rb:72:in `block (2 levels) in require'
    from /Users/lexi87/.rvm/gems/ruby-2.0.0-p0@global/gems/bundler-1.3.0/lib/bundler/runtime.rb:70:in `each'
    from /Users/lexi87/.rvm/gems/ruby-2.0.0-p0@global/gems/bundler-1.3.0/lib/bundler/runtime.rb:70:in `block in require'
    from /Users/lexi87/.rvm/gems/ruby-2.0.0-p0@global/gems/bundler-1.3.0/lib/bundler/runtime.rb:59:in `each'
    from /Users/lexi87/.rvm/gems/ruby-2.0.0-p0@global/gems/bundler-1.3.0/lib/bundler/runtime.rb:59:in `require'
    from /Users/lexi87/.rvm/gems/ruby-2.0.0-p0@global/gems/bundler-1.3.0/lib/bundler.rb:132:in `require'
    from /Users/lexi87/dating/config/application.rb:7:in `<top (required)>'
    from /Users/lexi87/.rvm/gems/ruby-2.0.0-p0/gems/railties-3.2.12/lib/rails/commands.rb:53:in `require'
    from /Users/lexi87/.rvm/gems/ruby-2.0.0-p0/gems/railties-3.2.12/lib/rails/commands.rb:53:in `block in <top (required)>'
    from /Users/lexi87/.rvm/gems/ruby-2.0.0-p0/gems/railties-3.2.12/lib/rails/commands.rb:50:in `tap'
    from /Users/lexi87/.rvm/gems/ruby-2.0.0-p0/gems/railties-3.2.12/lib/rails/commands.rb:50:in `<top (required)>'
    from script/rails:6:in `require'
    from script/rails:6:in `<main>' 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-01T19:31:35.553

我能够修复这个错误，所以如果他们遇到同样的问题，这应该适用于其他任何人。

以下是修复的步骤：

```
brew uninstall imagemagick
gem uninstall rmagick
sudo gem install json # (not sure this step is needed)
sudo apt-get install libmagick9-dev
bundle install 
```

然后它完美地工作。现在我可以启动 rails 服务器并且不再收到错误消息。希望这对某人有帮助！

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-01T16:39:41.667

你只需要用你当前的 imagemagick 重新安装 rmagick

```
gem install rmagick 
```

在其他一些问题中，我发现以下通过使用解决了该问题，

```
gem pristine rmagick 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-11-20T14:33:00.833

我的安装有几个问题，对我有用的是

```
brew uninstall imagemagick
gem uninstall rmagick
brew install imagemagick
bundle install
brew unlink libtool 
brew link libtool 
```

没有第一个我在尝试安装 rmagick 时遇到错误，如果没有最后两个，则在启动 rails 服务器时出现错误

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-09-14T03:24:51.073

我也有这个问题。我尝试了很多不同的技巧，奇怪的是，这种奇怪的东西奏效了。前两个命令似乎没用，但考虑到我不知道它是如何工作的，我也将它们留在里面。

**不要问问题，只要运行它们并拥抱 rmagick**

```
brew install libtool --universal
brew link libtool
brew unlink libtool && brew link libtool
gem uninstall rmagick
gem install rmagick 
```

# vb.net - 无法使用 WP7 在文本文件中写入短信

> ID：15162500
> 
> 赞同：0
> 
> 时间：2013-03-01T16:38:15.103
> 
> 标签：vb.net, windows-phone-7, text-files, isolatedstorage, isolatedstoragefile

我无法在我的 wp7 应用程序的文本文件中写入文件，我该怎么办？

这是我的代码

```
 Dim isolatedStorage As IsolatedStorageFile = IsolatedStorageFile.GetUserStoreForApplication
 Dim isoStream As IsolatedStorageFileStream = New IsolatedStorageFileStream("TextFile1.txt", FileMode.Append, isolatedStorage)
 Dim streamwriter As StreamWriter = New StreamWriter(isoStream)

 streamwriter.WriteLine("sample")
 streamwriter.Close() 
```

我也尝试将它放在 Using 语句中，但它现在仍在文本文件中写入

```
Dim isolatedStorage As IsolatedStorageFile = IsolatedStorageFile.GetUserStoreForApplication
        Using isoStream As IsolatedStorageFileStream = New IsolatedStorageFileStream("/TextFile1.txt", FileMode.Append, isolatedStorage)

            Using streamwriter As StreamWriter = New StreamWriter(isoStream)
                streamwriter.WriteLine("PreMenu.xaml")

                streamwriter.Close()
            End Using
        End Using 
```

没有错误，但它没有在文本文件中写入文本，我该怎么办？

# sql-server - 将长文本文件附加到sql数据库

> ID：15162501
> 
> 赞同：-1
> 
> 时间：2013-03-01T16:38:15.040
> 
> 标签：sql-server, c#-4.0

在我的网站上有作者的名字和他们的图片。如何将他们的传记添加到数据库中？传记是长文本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T16:41:26.603

您可以使用`biography`字段数据类型`VARCHAR(MAX)`来存储大型文本数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T17:02:29.910

Varchar(max) 非常适合存储大型数据文件，但如果您使用的是 SQL Server 2008 及更高版本，那么我将探索一个名为“文件流”的选项，它允许您在 SQL Server 之外存储实际文件，但仍然可以轻松维护和使用 SQL Server 访问。这篇[MSDN 文章](http://msdn.microsoft.com/en-us/magazine/dd695918.aspx)应该让您抢先了解这个强大的功能。

# html - 根据值动态更改表格背景颜色

> ID：15162502
> 
> 赞同：0
> 
> 时间：2013-03-01T16:38:15.567
> 
> 标签：html, jsp, jstl

我有从数据库中填充的表，我需要为也来自数据库的每一行应用背景颜色。我的代码在下面我不确定我做错了什么，但它不起作用。帮助！

![在此处输入图像描述](../Images/dc57c990fcc28ea165c7e1b651a5b561.png)

```
 <tbody> 
  <tr> 
  <c:forEach items="${summary}" var="summary" 
  style='background-color:<c:out value="${summary.color}"></c:out>;'>

 <tr>
 <td><c:out value="${summary.eventDesc}"  /></td>
  <td><c:out value="${summary.labelNbr}" /></td>
 <td><c:out value="${summary.origin}" /></td>
 <td><c:out value="${summary.senderName}" /></td>
 <td><c:out value="${summary.receiverName}" /></td>
 <td><c:out value="${summary.receiptDate}" /></td>
 <td><c:out value="${summary.loadDate}" /></td>
 <td><c:out value="${summary.forecastIsc}" /></td>
 <td><c:out value="${summary.actualIsc}" /></td>
 <td><c:out value="${summary.country}" /></td>
 <td><c:out value="${summary.source}" /></td>
 <td><input type="checkbox" value=""></td>
 </tr>
 </c:forEach> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T20:18:04.683

好的，所以我终于想通了。由于我从数据库表中提取颜色，因此以下代码可以正常工作：

```
<td bgcolor='<c:out value="${summary.color}"></c:out>'>
    <c:out value="${summary.eventDesc}" />
</td> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T17:02:28.413

如果您真的不得不求助于使用数据库中的颜色，那么您必须为每个颜色添加一个内联样式，`<tr>`或者`<td>`

* * *

我建议`<tr>`为每种颜色的元素添加一个 css 类，然后像这样编写你的 css 规则

`tr.class-1 > td { background-color: yellow }`

`tr.class-2 > td { background-color: red }`

`tr.class-3 > td { background-color: green }`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-03T22:31:14.537

试试这个（它会减少代码中的行数）：

```
<c:forEach items="${summary}" var="summary">
<tr style='background-color: ${summary.color}'>
<td></td>
<td></td>
<td></td>
</tr>
</c:forEach> 
```

# java - 将文本文件读入 jtable

> ID：15162506
> 
> 赞同：-1
> 
> 时间：2013-03-01T16:38:24.320
> 
> 标签：java, swing, file-io, jtable, defaulttablemodel

我想制作一个 JTable，其中使用 2d 数组逐行读取文本文件，仅用于行循环。如何在`DefaultTableModel`.

**这是我的代码：**

```
try{
    BufferedReader br = new BufferedReader(new InputStreamReader(new FileInputStream(new File("Database.txt"))));
    String line = "";
    int width = 0, height = 0;

    while((line = br.readLine())!=null){

    if(width == 0){

    String data[] = line.split("-");
    width = data.length;

        }
    height++;

    String matrix[][] = new String[height][width];
    model = new DefaultTableModel(matrix, col);
    table = new JTable(model){
    public boolean isCellEditable(int row, int column){
    return false;
    }};
    }
}catch (IOException ex){
         ex.printStackTrace();
} 
```

**这是整个代码：**

```
import javax.swing.*;
import java.awt.event.*;
import java.awt.*;
import javax.swing.table.*;
import java.io.*;
import java.util.*;

public class Administrator extends JFrame {

        private String col []= {"Account No.","PinCode","First Name",
        "Last Name", "MI","BirthDate","Sex","E-mail","Address"};
        private JScrollPane scroll;
        private JTable table;
        private DefaultTableModel model;

     public Administrator(){
        //ImageIcon bcr = new ImageIcon(getClass().getResource("/images/bcr.jpg"));
        final JButton back = new JButton("back");
        back.setLocation(20,480);
        back.setSize(70,30);
        back.setPreferredSize(new Dimension(90,30));
        back.addActionListener(new ActionListener(){
        public void actionPerformed(ActionEvent e){
            dispose();
            }
        }
        );
        try{

            BufferedReader br = new BufferedReader(new InputStreamReader(new FileInputStream(new File("Database.txt"))));

            String line = "";

            int width = 0, height = 0;

            while((line = br.readLine())!=null){

            if(width == 0){

            String data[] = line.split("-");
            width = data.length;

            }
            height++;

            String matrix[][] = new String[height][width];
            model = new DefaultTableModel(matrix, col);
            table = new JTable(model){
            public boolean isCellEditable(int row, int column){
            return false;
                }
            };
        }
        }
        catch (IOException ex){
        ex.printStackTrace();
        }

        DefaultTableCellRenderer cent = new DefaultTableCellRenderer();
        cent.setHorizontalAlignment( JLabel.CENTER );
        table.getColumnModel().getColumn(0).setCellRenderer(cent);
        table.getColumnModel().getColumn(1).setCellRenderer(cent);
        table.getColumnModel().getColumn(2).setCellRenderer(cent);
        table.getColumnModel().getColumn(3).setCellRenderer(cent);
        table.getColumnModel().getColumn(4).setCellRenderer(cent);
        table.getColumnModel().getColumn(5).setCellRenderer(cent);
        table.getColumnModel().getColumn(6).setCellRenderer(cent);
        table.getColumnModel().getColumn(7).setCellRenderer(cent);
        table.getColumnModel().getColumn(0).setPreferredWidth(100);
        table.getColumnModel().getColumn(1).setPreferredWidth(100);
        table.getColumnModel().getColumn(2).setPreferredWidth(100);
        table.getColumnModel().getColumn(3).setPreferredWidth(100);
        table.getColumnModel().getColumn(4).setPreferredWidth(50);
        table.getColumnModel().getColumn(5).setPreferredWidth(100);
        table.getColumnModel().getColumn(6).setPreferredWidth(50);
        table.getColumnModel().getColumn(7).setPreferredWidth(120);

        scroll = new JScrollPane(table);
        scroll.setLocation(20, 320);
        scroll.setSize(750,150);

        Container pane = getContentPane();
        pane.setLayout(null);
        pane.add(back);
        pane.add(scroll);

        /*setIconImage(new ImageIcon("/images/icon.jpg").getImage());
        setLayout(new BorderLayout());
        JLabel www = new JLabel(new ImageIcon(getClass().getResource("/images/admin.jpg")));
        add(www);*/
        setDefaultCloseOperation(DISPOSE_ON_CLOSE);
        setTitle("Account Profile");
        setSize(800,550);
        setResizable(false);
        setVisible(true);
        setLocation(110, 30);
     }
     public static void main(String[]args){
        new Administrator();
     }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T16:53:30.103

1) 创建一个没有数据且只有列名的 DefaultTableModel：

```
DefaultTableModel model = new DefaultTableModel(columnName, 0); 
```

2）在循环中，当您从文件中读取每一行文本时，您会执行以下操作：

```
String[] data = line.split("-");
model.addRow( data ); 
```

3）当您阅读完所有文本后，您将创建表格：

```
JTable table = new JTable( model ); 
```

# javascript - 以角度访问全局变量

> ID：15162508
> 
> 赞同：2
> 
> 时间：2013-03-01T16:38:29.597
> 
> 标签：javascript, express, angularjs

我正在使用节点快递和角度。在我的 express app.js 中，我声明了一个路由并将一个变量传递给呈现的页面，就像这样......

```
app.get('/test' function(req, res){
  res.render('test', { user: 12345 });
}); 
```

在我的“测试”视图中，我使用 ng-controller 将容器链接到角度，就像这样......

```
<div ng-controller='testCtrl'> <!--some markup here--> </div> 
```

在我的 angular controllers.js 中，我为我的视图声明了一个函数，就像这样......

```
function testCtrl($scope) {
    /*...some code here...*/
} 
```

如何在控制器函数内部访问从 express 传递给视图的“用户”变量？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-01T17:53:53.710

因为您使用模板来呈现视图，所以有两种不同的执行方式：(1) 您的服务器正在呈现页面（使用`user`var），然后 (2) 浏览器运行 AngularJS。因此，您不能将变量从 (1) 传递到 (2)。

但是，有一个名为的指令[`ngInit`](http://docs.angularjs.org/api/ng.directive:ngInit)将在引导期间解析表达式。如果你在 ExpressJS 中使用 Jade 模板，你可以这样做：

```
div(ng-init='user = "'+user+'"') 
```

它将像这样呈现 HTML：

```
<div ng-init="user = 'whatever-server-sent'"></div> 
```

因此，当 AngularJS 引导页面的这一部分（或这个部分或模板）时，`user`它将成为一个范围变量，其中包含来自服务器的值。

我没有测试 Jade 代码，也不是 Jade 专家，但这应该会让你走上正轨。如果您使用不同的模板引擎，请告诉我，我会修改答案。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-02-18T11:58:20.893

Jade 变量可以在 Angular 中通过将插值分配给一个变量来访问`ng-init`

首先，您必须对用户进行字符串化，然后使用插值`#{value} div(ng-init = 'angularUser = #{JSON.stringify(user)}')`

在这种情况下，`user`变量是 Jade 变量

# javascript - 如何逐像素移动DIV

> ID：15162513
> 
> 赞同：3
> 
> 时间：2013-03-01T16:38:36.207
> 
> 标签：javascript, css

我有这样的 DIV 设置。

```
 <div id="parent" class="parent">
            <div id="child" class="child">
            </div>
   </div> 
```

风格

```
 <style>
    .parent{
    float:left; height:300; width:300px; background-color:#00ff00;
    }
    .child{
    float:left; height:60; width:60px; background-color:#00ff00;
    }
    </style>

<script>
            function move(){
                while(m < 100){
                document.getElementByid('child').style.marginTop = m;
                m = m+1;
                }
            }
            move();
 </script> 
```

我想将内部 DIV（命名子）从上到下逐个像素移动 100 像素。我认为可以使用 style.marginTop = '' 和 settimeout() 函数来完成

但仍然无法让这个工作。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-01T16:44:54.457

以下是如何使用 vanilla JavaScript 为 div 设置动画：http: [//jsfiddle.net/z6F7m/1/](http://jsfiddle.net/z6F7m/1/)

**JavaScript**

```
var elem = document.getElementById('animated'),
    top = parseInt(elem.style.marginTop, 10) || 0,
    step = 1;

function animate() {
    if (top < 100) {
        requestAnimationFrame(animate);
        elem.style.marginTop = top + 'px';
        top += step;
    }
}

animate(); 
```

我强烈建议您使用`requestAnimationFrame`而不是`setTimeout`，如果浏览器不支持`requestAnimationFrame`您可以回退到`setTimeout`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T16:44:40.333

试试这个

```
var element = document.getElementById('child');
for (var i=0; i != 100; i++){
    element.style.marginTop += 1;
} 
```

这将循环 100 次，并在每个循环的 marginTop 上加 1。

我建议使用 jQuery 思想，因为使用 jQuery 你可以简单地做

```
$("#child").animate({ marginTop: 100 }); 
```

**编辑**

顶级示例没有意义，试试这个。

```
var element = document.getElementById('animated');
    for (var i = 0; i != 100; i++) {
    currentTop = parseInt(element.style.marginTop) || 0;
    newTop = parseInt(currentTop + 1);
    element.style.marginTop = newTop + "px";
} 
```

这也是愚蠢的，因为它循环的方式很快，当浏览器呈现框时，它已经距离顶部 100px。[看这里](http://jsfiddle.net/k53Jm/)

再次，使用[jQuery 解决方案](http://jsfiddle.net/k53Jm/1/)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-01T16:46:53.413

一种方法是使用 jQuery 的[`animate`](http://api.jquery.com/animate/)函数，它只需要编写：

```
$(element).animate({ 'top': '100px' }); 
```

[例子](http://jsfiddle.net/GFWW6/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-01T16:50:23.347

检查以下小提琴。我在没有 jquery 的情况下做到了。

```
 var step = 0;
 window.setInterval(function(){
    var value = (++step)*100;
    if (value<300)
        document.getElementById("child").style.marginTop=value+"px";
    else
       step = -1;
 },1000); 
```

[http://jsfiddle.net/pasindur/EbHt5/](http://jsfiddle.net/pasindur/EbHt5/)

# xslt - 当源包含平面标记时，转换为在一个列表中嵌套项目

> ID：15162514
> 
> 赞同：2
> 
> 时间：2013-03-01T16:38:38.593
> 
> 标签：xslt, xslt-2.0

我有以下 XML 文件：

```
<li id="s9781452281988.n39.i34"><i>See also</i>
<a class="term-ref" id="s9781452281988.n39.i6525" href="#s9781452281988.n39.i1899">Emotion</a>;
    <a class="term-ref" id="s9781452281988.n39.i6526" href="#s9781452281988.n39.i3312">Interpersonal conflict</a></li> 
```

我希望输出如下：

```
<item>See also
 <list rend="runon">
     <item><term>Emotion</term></item>
     <item><term>Interpersonal conflict</term></item>
 </list>
</item> 
```

基本上，如果我有多个 a[@class='term-ref']，第一个实例应该启动**列表rend="runon"**，随后的 a[@class='term-ref'] 应该作为**item/term**包含在名单。

以下是我的尝试，但它没有像我希望的那样工作，并且在第二个**项目/术语之前关闭****列表**（也没有输出的元素）：

 **```
<xsl:stylesheet 
xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
xmlns:xs="http://www.w3.org/2001/XMLSchema"
version="2.0">

<xsl:template match="li">
    <xsl:element name="item">
        <xsl:apply-templates/>
    </xsl:element>
</xsl:template>

<xsl:template match="a[@class='term-ref'][1]">
    <xsl:element name="list">
        <xsl:attribute name="rend" select="'runon'"/>
        <xsl:element name="item">
            <xsl:element name="term">
                <xsl:apply-templates/>
            </xsl:element>
        </xsl:element>
        <xsl:if test="a[@class='term-ref'][position() >1]">
            <xsl:element name="item">
                <xsl:element name="term">
                    <xsl:apply-templates/>
                </xsl:element>
            </xsl:element>
        </xsl:if>
    </xsl:element>
</xsl:template>

<xsl:template match="li//text()">
    <xsl:value-of select="translate(., '.,;', '')"/>
</xsl:template>

</xsl:stylesheet> 
```

在源 XML 上，上述样式表会产生以下输出：

```
<item>See also
<list rend="runon">
    <item><term>Emotion</term></item>
</list>
    Interpersonal conflict</item> 
```

这是不正确的。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T03:40:41.060

**这个简短的转换（几乎完全是“推式”，没有条件指令，没有`xsl:element`也没有不必要的函数调用，如`translate()`or `replace()`）：**

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>

 <xsl:template match="li">
  <item><xsl:apply-templates/></item>
 </xsl:template>

 <xsl:template match="a[@class='term-ref'][1]">
     <list rend="runon">
         <xsl:apply-templates mode="group"
              select="../a[@class='term-ref']"/>
     </list>
 </xsl:template>

 <xsl:template match="a[@class='term-ref']" mode="group">
    <item><term><xsl:apply-templates/></term></item>
 </xsl:template>
 <xsl:template match="a[@class='term-ref']|li/text()" priority="-1"/>
</xsl:stylesheet> 
```

**当应用于提供的 XML 文档时——格式*正确*：**

```
<li id="s9781452281988.n39.i34"><i>See also</i>
  <a class="term-ref" id="s9781452281988.n39.i6525"
     href="#s9781452281988.n39.i1899">Emotion</a>;
  <a class="term-ref" id="s9781452281988.n39.i6526"
     href="#s9781452281988.n39.i3312">Interpersonal conflict.</a>.
</li> 
```

**产生想要的正确结果：**

```
<item>See also<list rend="runon">
      <item>
         <term>Emotion</term>
      </item>
      <item>
         <term>Interpersonal conflict.</term>
      </item>
   </list>
</item> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T17:28:27.293

这应该工作...

**XML 输入**（格式正确）

```
<doc>
    <li id="s9781452281988.n39.i34"><i>See also</i>
        <a class="term-ref" id="s9781452281988.n39.i6525" href="#s9781452281988.n39.i1899">Emotion</a>;
        <a class="term-ref" id="s9781452281988.n39.i6526" href="#s9781452281988.n39.i3312">Interpersonal conflict.</a>.
    </li>
</doc> 
```

**XSLT 2.0**

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output indent="yes"/>
    <xsl:strip-space elements="*"/>

    <xsl:template match="@*|node()">
        <xsl:copy>
            <xsl:apply-templates select="@*|node()"/>
        </xsl:copy>
    </xsl:template>

    <xsl:template match="li">
        <item>
            <xsl:apply-templates select="i/text()"/>
            <xsl:if test="a">
                <list rend="runon">
                    <xsl:apply-templates select="a"/>                   
                </list>
            </xsl:if>
        </item>
    </xsl:template>

    <xsl:template match="a">
        <item><term><xsl:apply-templates select="node()"/></term></item>
    </xsl:template>

    <xsl:template match="li//text()">
        <xsl:value-of select="replace(.,'[.,;]','')"/>
    </xsl:template>

</xsl:stylesheet> 
```

**输出**

```
<doc>
   <item>See also<list rend="runon">
         <item>
            <term>Emotion</term>
         </item>
         <item>
            <term>Interpersonal conflict</term>
         </item>
      </list>
   </item>
</doc> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T17:36:20.287

这应该做你想做的事情：

```
<xsl:stylesheet
xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
xmlns:xs="http://www.w3.org/2001/XMLSchema"
 exclude-result-prefixes="xs"
version="2.0">

  <xsl:template match="li">
    <xsl:element name="item">
      <xsl:apply-templates select="node()" />
      <xsl:apply-templates select="." mode="items" />
    </xsl:element>
  </xsl:template>

  <xsl:template match="li//text()">
    <xsl:value-of select="normalize-space(translate(., '.,;', ''))"/>
  </xsl:template>
  <xsl:template match="a[@class = 'term-ref']" />

  <xsl:template match="node()" mode="items" />
  <xsl:template match="li" mode="items">
    <xsl:apply-templates mode="items" />
  </xsl:template>
  <xsl:template match="li[count(a[@class = 'term-ref']) > 1]" mode="items">
    <list rend="runon">
      <xsl:apply-templates select="a[@class = 'term-ref']" mode="items" />
    </list>
  </xsl:template>

  <xsl:template match="a[@class = 'term-ref']" mode="items">
    <item>
      <term>
        <xsl:value-of select="."/>
      </term>
    </item>
  </xsl:template>
</xsl:stylesheet> 
```

在您的示例输入上运行时，这会产生：

```
<item>
  See also<list rend="runon">
    <item>
      <term>Emotion</term>
    </item>
    <item>
      <term>Interpersonal conflict</term>
    </item>
  </list>
</item> 
```

当在只有一个的输入文件上运行时`a.term-ref`，这会产生：

```
<item>
  See also<item>
    <term>Interpersonal conflict</term>
  </item>
</item> 
```**

# android - Android 制作 ToggleButton 以将铃声设置为振动

> ID：15162520
> 
> 赞同：0
> 
> 时间：2013-03-01T16:39:28.953
> 
> 标签：android, volume, seek, vibration

我目前正在制作一个带有 SeekBar 的应用程序，其中 SeekBar 控制音乐音量、铃声音量和闹钟音量。它工作正常，但每当我尝试在按钮中编写代码以将手机设置为振动时，它要么使应用程序崩溃，要么只是破坏代码，因此 SeekBar 永远不会改变音量。任何有关如何实现将手机设置为振动的按钮的帮助将不胜感激。谢谢。

```
 import android.app.*;
import android.os.*;
import android.widget.SeekBar;
import android.widget.TextView;
import android.widget.Toast;
import android.widget.ToggleButton;
import android.content.Context;
import android.content.DialogInterface;
import android.media.AudioManager;
import android.widget.SeekBar.OnSeekBarChangeListener;

public class MainActivity extends Activity
{

    /** Called when the activity is first created. */

    private SeekBar Volume = null;
    private AudioManager audioManager = null;
    private TextView volumeValue;
    private Vibrator sVibrate;
    private ToggleButton vibrateButton;
    final private String volumeIs = "Current Volume: ";

    @Override
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        setVolumeControlStream(AudioManager.STREAM_MUSIC);
        setContentView(R.layout.main);

        allVolumes();
    }

    private void allVolumes()
    {
        try
        {
            Volume = (SeekBar) findViewById(R.id.Volume);
            audioManager = (AudioManager) getSystemService(Context.AUDIO_SERVICE);
            Volume.setMax(audioManager
                    .getStreamMaxVolume(AudioManager.STREAM_MUSIC));
            Volume.setProgress(audioManager
                    .getStreamVolume(AudioManager.STREAM_MUSIC));

            sVibrate = (Vibrator) getSystemService(Context.VIBRATOR_SERVICE);
            vibrateButton = (ToggleButton) findViewById(R.id.vibrateButton);

            volumeValue = (TextView) findViewById(R.id.volumeValue);
            volumeValue.setText(volumeIs
                    + Integer.toString(audioManager
                            .getStreamVolume(AudioManager.STREAM_MUSIC)));

            Volume.setOnSeekBarChangeListener(new OnSeekBarChangeListener()
            {
                @Override
                public void onStopTrackingTouch(SeekBar arg0)
                {

                }

                @Override
                public void onStartTrackingTouch(SeekBar arg0)
                {

                }

                @Override
                public void onProgressChanged(SeekBar arg0, int progress,
                        boolean arg2)
                {
                    audioManager.setStreamVolume(AudioManager.STREAM_MUSIC,
                            progress, 0);
                    audioManager.setStreamVolume(AudioManager.STREAM_RING,
                            progress, 0);
                    audioManager.setStreamVolume(AudioManager.STREAM_ALARM,
                            progress, 0);

                    volumeValue.setText(volumeIs
                            + Integer.toString(audioManager
                                    .getStreamVolume(AudioManager.STREAM_MUSIC)));
                }
            });
        }
        catch (Exception e)
        {
            e.printStackTrace();

            AlertDialog.Builder builder = new AlertDialog.Builder(this);
            builder.setCancelable(true);
            builder.setTitle(R.string.catch_error);
            builder.setInverseBackgroundForced(true);
            builder.setPositiveButton("Quit",
                    new DialogInterface.OnClickListener()
                    {
                        @Override
                        public void onClick(DialogInterface dialog, int which)
                        {
                            dialog.dismiss();
                            finish();
                        }
                    });
            builder.setNegativeButton("Ignore",
                    new DialogInterface.OnClickListener()
                    {
                        @Override
                        public void onClick(DialogInterface dialog, int which)
                        {
                            dialog.dismiss();
                            Toast.makeText(
                                    MainActivity.this,
                                    "This app will not work right unless you restart.",
                                    Toast.LENGTH_LONG).show();
                        }
                    });
            AlertDialog alert = builder.create();
            alert.show();

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T17:21:41.803

> 任何有关如何实现将手机设置为振动的按钮的帮助将不胜感激。

你的意思是，将手机切换到振动模式？试试这个：

```
(AudioManager) getSystemService(AUDIO_SERVICE)).setRingerMode(AudioManager.RINGER_MODE_VIBRATE); 
```

# markdown - how does pygments guess lexer?

> ID：15162521
> 
> 赞同：2
> 
> 时间：2013-03-01T16:39:29.723
> 
> 标签：markdown, pygments

I'm using middleman-syntax to highlight code in my blog

I'm writing my templates in markdown... and was wondering, how does pygments guess lexer?

```
 if I write

  ´´´ruby
  ruby code here
  ```

  it doesnt work

  if I write

  ```      
  #!ruby
  ruby here
  ```

  it does

  If I write

  ```
  <?php
  php code here
  ```

  It does 
```

Is there a list of how pygments guess it?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T04:22:14.583

据我所知，Pygments 没有猜到。

[**语言学家会**](http://github.com/github/linguist)。

# eclipse - Deployment Error Weld-001408 with WLS12c and OEPE

> ID：15162522
> 
> 赞同：2
> 
> 时间：2013-03-01T16:39:30.780
> 
> 标签：eclipse, weblogic12c, weld

I created the following projects in OEPE:

*   weld001408 (Java EE - Enterprise Application Project)
*   weld001408utility (Java EE - Uitility Project), belongs to the ear weld001408
*   weld001408web (Web - Dynamic Web Project), belongs to the ear weld001408

When I created the project, I didn't change the defaults (onley ear-membership) and the target-runtime is Oracle WebLogic Server 12.1.1\. And the clean domain, created with the wizard, is added to the workspace.

The Code is the following:

## utility-project

**class 'weld001408utility/ValueProducer.java'**

```
package weld001408utility;

import javax.enterprise.inject.Produces;

public class ValueProducer {

    @Produces
    public String stringValue() {
        return "someStringValue";
    }

} 
```

**META-INF/beans.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="
      http://java.sun.com/xml/ns/javaee 
      http://java.sun.com/xml/ns/javaee/beans_1_0.xsd">
</beans> 
```

## web-project

**weld001408web/ValueConsumerServlet.java**

```
package weld001408web;

import java.io.IOException;
import java.io.PrintWriter;

import javax.inject.Inject;
import javax.servlet.ServletException;
import javax.servlet.annotation.WebServlet;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

/**
 * Servlet implementation class ValueConsumerServlet
 */
@WebServlet("/ValueConsumerServlet")
public class ValueConsumerServlet extends HttpServlet {
    private static final long serialVersionUID = 1L;

    @Inject
    private String injectedValue;

    /**
     * @see HttpServlet#doGet(HttpServletRequest request, HttpServletResponse response)
     */
    protected void doGet(HttpServletRequest request, HttpServletResponse response)
            throws ServletException, IOException {

        PrintWriter pw = response.getWriter();
        pw.write("injectedValue: " + injectedValue);
        pw.flush();

    }

} 
```

**WEB-INF/beans.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="
      http://java.sun.com/xml/ns/javaee 
      http://java.sun.com/xml/ns/javaee/beans_1_0.xsd">
</beans> 
```

## The issue

Now when I try to deploy the application in Eclipse, I get always a WELD-001408 error:

```
<01.03.2013 10:07 Uhr MEZ> <Warning> <Deployer> <BEA-149078> <Stack trace for message 149004
weblogic.management.DeploymentException: 
    at weblogic.application.internal.BaseDeployment.throwAppException(BaseDeployment.java:123)
    at weblogic.application.internal.BaseDeployment.prepare(BaseDeployment.java:239)
    at weblogic.application.internal.EarDeployment.prepare(EarDeployment.java:61)
    at weblogic.application.internal.DeploymentStateChecker.prepare(DeploymentStateChecker.java:158)
    at weblogic.deploy.internal.targetserver.AppContainerInvoker.prepare(AppContainerInvoker.java:60)
    Truncated. see log file for complete stacktrace
Caused By: org.jboss.weld.exceptions.DeploymentException: WELD-001408 Unsatisfied dependencies for type [String] with qualifiers [@Default] at injection point [[field] @Inject private weld001408web.ValueConsumerServlet.injectedValue]
    at org.jboss.weld.bootstrap.Validator.validateInjectionPoint(Validator.java:258)
    at org.jboss.weld.bootstrap.Validator.validateBean(Validator.java:105)
    at org.jboss.weld.bootstrap.Validator.validateRIBean(Validator.java:125)
    at org.jboss.weld.bootstrap.Validator.validateBeans(Validator.java:324)
    at org.jboss.weld.bootstrap.Validator.validateDeployment(Validator.java:309)
    Truncated. see log file for complete stacktrace
> 
```

But when I export the ear from eclipse and deploy that file over the weblogic administration console, then everything's working fine and the value is correctly injected to the servlet. No problems on deployment, nothing.

There are some patches for weblogic around and I have the latest installed (I checked a lot bugs which could belongs to my problem, and they should all included with 12.1.1.0.2):

```
WebLogic Server 12.1.1.0.2 PSU Patch for BUG14331523 Thu Oct 11 15:08:09 IST 2012
WebLogic Server 12.1.1.0  Wed Dec 7 08:40:57 PST 2011 1445491 > 
```

I tried the same application on Windows Vista and on a Linux based System with the latest OEPE Versions (all-in-one package), no success...

## The question

Has somone the exact same issue? Is it possible for someone to reproduce the problem? And when not, on which configuration with what patches is it working?

I don't know if it's a Oracle Enterprise Pack for Eclipse or an WebLogic-Issue.

Thanks for helping!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-09-21T14:22:39.137

我解决了如下所述的问题。添加图片以使其更容易。

转到 Eclipse Servers (View)，右键单击 weblogic server 12.1.3 并单击属性。

[![在此处输入图像描述](../Images/5959c28cf66f07d17fde5c792d4f643a.png)](https://i.stack.imgur.com/BmqOV.png)

在 Weblogic --> Publishing 中，选择“Publish as an exploded archive”

[![在此处输入图像描述](../Images/2fbfa54d3dd088f7d4cbfffe05441d25.png)](https://i.stack.imgur.com/R3CIK.png)

# mysql - Select 1 row multiple time if has more then 1 value in other column

> ID：15162523
> 
> 赞同：1
> 
> 时间：2013-03-01T16:39:31.810
> 
> 标签：mysql, sql, select

I have a database structure. The issue is that the table is really complex (typo3).

I will simplify to this:

```
|     ID   |CAT  | 
|==========|=====|
|1         |44,15|
|2         |16   |
|3         |29,30| 
```

What I want to have as a result is 1 row for each CATEGORY (CAT), it mean

```
1 44
1 15
2 16
3 29
3 30 
```

I tried to use simple select but of course it does not work.

I also tried to use a left join with the table CATEGORY using `CATEGORY.id IN (TABLE1.cat)`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T16:51:53.493

如果 cat 中只有两个值：

```
select id, left(cat, locate(',', cat) - 1)
from t
where cat like '%,%'
union all
select id, substr(cat, locate(',', cat) + 1, length(cat))
from t
where cat like '%,%'
union all
select id, cat
from t
where cat not like '%,%' 
```

如果您有类别列表，则可以执行以下操作：

```
select t.id, c.cat
from t join
     categories c
     on concat(',', c.cat, ',') like concat('%,', t.cat, ',%') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T16:50:55.030

**1.：**你的数据库结构不好！它甚至不是第一范式（1NF），因为您在一列中有一个数组作为字符串表示。

**2.：**这不是那么棘手。

一些灵感：[http](http://blog.fedecarg.com/2009/02/22/mysql-split-string-function/) ://blog.fedecarg.com/2009/02/22/mysql-split-string-function/或在这里：[http ://dev.mysql.com/doc/refman/5.5/en/string- functions.html#function_substring-index](http://dev.mysql.com/doc/refman/5.5/en/string-functions.html#function_substring-index)

# sql-server - 使用 SQL 将 XML 结构转置/展平到列

> ID：15162525
> 
> 赞同：7
> 
> 时间：2013-03-01T16:39:43.523
> 
> 标签：sql-server, xml, tsql, pivot, xquery-sql

我正在使用 SQL Server (2008/2012)，并且我知道从大量搜索中得到了类似的答案，但是我似乎找不到适合我的案例的示例/指针。

我在 SQL Server 表中有一个 XML 列，其中包含以下数据：

```
<Items>
 <Item>
  <FormItem>
    <Text>FirstName</Text>
    <Value>My First Name</Value>
  </FormItem>
  <FormItem>
    <Text>LastName</Text>
    <Value>My Last Name</Value>
  </FormItem>
  <FormItem>
    <Text>Age</Text>
    <Value>39</Value>
  </FormItem>
 </Item>
 <Item>
  <FormItem>
    <Text>FirstName</Text>
    <Value>My First Name 2</Value>
  </FormItem>
  <FormItem>
    <Text>LastName</Text>
    <Value>My Last Name 2</Value>
  </FormItem>
  <FormItem>
    <Text>Age</Text>
    <Value>40</Value>
  </FormItem>
 </Item>
</Items> 
```

因此，即使结构`<FormItem>`相同，我也可以拥有多组（通常不超过 20-30 组）表单项。

我实际上是在尝试以以下格式从 SQL 返回查询，即基于 /FormItem/Text 的动态列：

```
FirstName         LastName         Age    ---> More columns as new `<FormItem>` are returned
My First Name     My Last Name     39          Whatever value etc..
My First Name 2   My Last Name 2   40 
```

所以，此刻我有以下几点：

```
select 
    Tab.Col.value('Text[1]','nvarchar(100)') as Question,
    Tab.Col.value('Value[1]','nvarchar(100)') as Answer
from
    @Questions.nodes('/Items/Item/FormItem') Tab(Col) 
```

当然，这并没有将我的 XML 行转换为列，并且显然是用字段固定的。我一直在尝试各种“动态 SQL”方法，其中 SQL 执行（在我的情况下）`<Text>`节点的不同选择，然后使用某种枢轴？但我似乎找不到神奇的组合来返回我需要的结果作为每行的一组动态列（`<Item>`在 的集合中`<Items>`）。

我确信看到这么多非常相似的例子是可以做到的，但是解决方案再次让我望而却步！

任何帮助都感激不尽！！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-01T17:52:09.573

解析 XML 相当昂贵，因此您可以使用名称-值列表创建一个临时表，然后将其用作动态数据透视查询的源，而不是解析一次来构建动态查询和一次获取数据。
`dense_rank`是否可以创建 ID 以进行旋转。
为了在动态查询中构建列列表，它使用了`for xml path('')`技巧。

此解决方案要求您的表具有主键 (ID)。如果您在变量中包含 XML，则可以稍微简化它。

```
select dense_rank() over(order by ID, I.N) as ID,
       F.N.value('(Text/text())[1]', 'varchar(max)') as Name,
       F.N.value('(Value/text())[1]', 'varchar(max)') as Value
into #T
from YourTable as T
  cross apply T.XMLCol.nodes('/Items/Item') as I(N)
  cross apply I.N.nodes('FormItem') as F(N)

declare @SQL nvarchar(max)
declare @Col nvarchar(max)

select @Col = 
  (
  select distinct ','+quotename(Name)
  from #T
  for xml path(''), type
  ).value('substring(text()[1], 2)', 'nvarchar(max)')

set @SQL = 'select '+@Col+'
            from #T
            pivot (max(Value) for Name in ('+@Col+')) as P'

exec (@SQL)

drop table #T 
```

[SQL小提琴](http://sqlfiddle.com/#!3/b2a88/2)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-01T17:10:11.703

```
select Tab.Col.value('(FormItem[Text = "FirstName"]/Value)[1]', 'varchar(32)') as FirstName, 
        Tab.Col.value('(FormItem[Text = "LastName"]/Value)[1]', 'varchar(32)') as LastName, 
        Tab.Col.value('(FormItem[Text = "Age"]/Value)[1]', 'int') as Age
from @Questions.nodes('/Items/Item') Tab(Col) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-07T11:23:04.027

我想添加我的“自己的答案”真的只是为了完整性以可能帮助其他人..但是它绝对是基于上面@Mikael的巨大帮助！再说一次，这真的只是为了完整性-@Mikael 的所有荣誉。

基本上我最终得到了以下过程。我需要选择一些数据/过滤器，并获取一些连接数据，并允许对一些输入参数进行一些布尔过滤。然后进入下一部分，通过交叉应用创建我的关系数据和所需 xml 节点的临时表。最后一步是旋转结果/从选定的 XML 节点动态创建列。

```
CREATE PROCEDURE [dbo].[usp_RPT_ExtractFlattenentries]
    @CompanyID          int,
    @MainSelector       nvarchar(50) = null,
    @SecondarySelector      nvarchar(255) = null,
    @DateFrom           datetime = '01-jan-2012',
    @DateTo             datetime = '31-dec-2100',
    @SysReference       nvarchar(20) = null
AS
BEGIN
    SET NOCOUNT ON;

    --  Create the table var to hold the XML form data from the entries
    declare @FeedbackXml table (
        ID int identity primary key,
        XMLCol xml,
        CompanyName nvarchar(20),
        SysReference nvarchar(20),
        RecordDate datetime,
        EntryName  nvarchar(255),
        MainSelector nvarchar(50)
    )

    --  STEP 1: Get the raw submission data based on the params passed in
    --  *Note: The double casting is necessary as the "form" field is nvarchar (not varchar) and we need xml in UTF-8 format
    begin
        insert into @FeedbackXml
            (XMLCol, CompanyName, SysReference, RecordDate, EntryName, MainSelector)
        select cast(cast(e.form as nvarchar(max)) as xml), c.name, e.SysReference, e.RecordDate, e.name, e.wizard
        from 
            entries s
        left join
            companies o on e.companies = c.ID
        where 
            (@CompanyID = -1 or @CompanyID = e.companies)
        and
            (@MainSelector is null or @MainSelector = e.wizard)
        and
            (@SecondarySelector is null or @SecondarySelector = e.name)
        and
            (@SysReference is null or @SysReference = e.SysReference)
        and
            (e.RecordDate >= @DateFrom and e.RecordDate <= @DateTo)
    end

    --  STEP 2: Flatten the required XML structure to provide a base for the pivot, and include other fields we wish to output
    select dense_rank() over(order by ID) as ID,
            T.RecordDate, T.CompanyName, T.SysReference, T.EntryName, T.MainSelector,
            F.N.value('(FieldNameNode/text())[1]', 'nvarchar(max)') as FieldName,
            F.N.value('(FieldNameValue/text())[1]', 'nvarchar(max)') as FieldValue
    into #TempData
    from @FeedbackXml as T
        cross apply T.XMLCol.nodes('/root/companies/') as I(N) -- Xpath to the desired node start point
        cross apply I.N.nodes('company') as F(N) -- The actual node collection that forms the "field name" and "field value" data

    --  STEP 3: Pivot the #TempData table creating a dynamic column structure based on the selected XML nodes in step 2
    declare @SQL nvarchar(max)
    declare @Col nvarchar(max)

    select @Col = 
      (
      select distinct ','+quotename(FieldName)
      from #TempData
      for xml path(''), type
      ).value('substring(text()[1], 2)', 'nvarchar(max)')

    set @SQL = 'select CompanyName, SysReference, EntryName, MainSelector, RecordDate, '+@Col+'
                from #TempData
                pivot (max(FieldValue) for FieldName in ('+@Col+')) as P'

    exec (@SQL)
    drop table #TempData

END 
```

同样，实际上只是添加了此答案以从我的角度提供完整的图片，并可能对其他人有所帮助。

# ruby-on-rails - Rails：为什么这个marked_for_destruction 没有被销毁？

> ID：15162530
> 
> 赞同：0
> 
> 时间：2013-03-01T16:40:04.817
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rails-activerecord

**更新**这一切似乎都与自定义验证器有关：如果我删除它，它会按预期工作。见最后代码**

我有一个模型`budget`有很多`multi_year_impacts`

在控制台中，如果我运行：

```
b = Budget.find(4)
b.multi_year_impacts.size #=> 2
b.update_attributes({multi_year_impacts_attributes: {id: 20, _destroy: true} } ) #=> true
b.multi_year_impacts.size #=> 1 (so far so good)
b.reload
b.multi_year_impacts.size #=> 2 What??? 
```

如果在`b.reload`我这样做之前`b.save`（无论如何都不应该需要），那也是一样的。

**知道为什么我的孩子记录没有被销毁吗？**

一些额外的信息，以防万一：

导轨 3.2.12

在`budget.rb`

```
attr_accessible :multi_year_impacts_attributes
has_many :multi_year_impacts, as: :impactable, :dependent => :destroy
accepts_nested_attributes_for :multi_year_impacts, :allow_destroy => true
validates_with MultiYearImpactValidator # problem seems to com from here 
```

在`multi_year_impact.rb`

```
belongs_to :impactable, polymorphic: true 
```

在`multi_year_impact_validator.rb`

```
class MultiYearImpactValidator < ActiveModel::Validator
  def validate(record)
    return false unless record.amount_before && record.amount_after && record.savings        
    lines = record.multi_year_impacts.delete_if{|x| x.marked_for_destruction?}

    %w[amount_before amount_after savings].each do |val|
      if lines.inject(0){|s,e| s + e.send(val).to_f} != record.send(val)
        record.errors.add(val.to_sym, " please check \"Repartition per year\" below: the sum of all lines must be equal of total amounts")
      end
    end

  end
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T17:17:41.683

它可能取决于您的 rails 版本，但是，将您的代码与当前[文档](http://api.rubyonrails.org/classes/ActiveRecord/NestedAttributes/ClassMethods.html)进行比较：

> 现在，当您将 _destroy 键添加到属性散列时，其值为 true，您将销毁关联的模型：
> 
> ```
> member.avatar_attributes = { :id => '2', :_destroy => '1' }
> member.avatar.marked_for_destruction? # => true 
> member.save
> member.reload.avatar # => nil 
> ```
> 
> 请注意，在保存父级之前，模型不会被销毁。

你可以尝试：

```
b.multi_year_impacts_attributes =  {id: 20, _destroy: true}
b.save 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T17:23:23.503

所以看起来罪魁祸首在这里

```
if lines.inject(0){|s,e| s + e.send(val).to_f} != record.send(val)
    record.errors.add(val.to_sym, " please check \"Repartition per year\" below: the sum of all lines must be equal of total amounts")
end 
```

将其更改为稍微复杂一些

```
 total = 0
  lines.each do |l|
    total += l.send(val).to_f unless l.marked_for_destruction?
  end
  if total != record.send(val)
    record.errors[:amount_before] << " please check \"Repartition per year\" below: the sum of all lines must be equal of total amounts"
  end 
```

解决了这个问题。

# javascript - 谷歌地图样式器

> ID：15162531
> 
> 赞同：-1
> 
> 时间：2013-03-01T16:40:17.273
> 
> 标签：javascript, json, google-maps, google-maps-api-3, styles

由于某种原因，当我尝试添加样式器以自定义 Google 地图的颜色时，这段代码会中断，有人能指出我正确的方向吗？我究竟做错了什么？

```
function initialize() {

var centerMap = new google.maps.LatLng(52.204872,0.120163);

var myOptions = {
    zoom: 12,
    center: centerMap,
    scrollwheel: false,
    mapTypeId: google.maps.MapTypeId.ROADMAP,
    var style= [
      {
        "stylers": [
          { "saturation": 100 },
          { "lightness": 31 },
          { "hue": "#ff6600" },
          { "gamma": 0.9 }
        ]
      },{
      },{
      }
    ]
}

var map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);

setMarkers(map, sites);
infowindow = new google.maps.InfoWindow({
        content: "loading..."
    });

var bikeLayer = new google.maps.BicyclingLayer();
bikeLayer.setMap(map);
}

var sites = [
 ['The Frontroom', 52.202977,0.138938, 1, 'The Frontroom.'],
['Fitzwilliam Museum',52.199678,0.119931, 2, 'Fitzwilliam Museum'],
['Wysing Arts centre', 52.182077,-0.06977, 3, 'Wysing Arts Centre'],
['Cambridge School of Art', 52.203825,0.134808, 4, 'Cambridge School of Art'],
['Kettles yard', 52.210851,0.114637, 5, 'Kettles Yard'],
['Changing Spaces',52.199678,0.119931, 6, 'Changing Spaces'],
 ['Aid & Abet', 52.195218,0.136578, 7, 'Aid & Abet'],
['The Junction', 52.190756,0.136522, 8, 'The Junction']
];

function setMarkers(map, markers) {

for (var i = 0; i < markers.length; i++) {
    var sites = markers[i];
    var siteLatLng = new google.maps.LatLng(sites[1], sites[2]);
    var marker = new google.maps.Marker({
        position: siteLatLng,
        map: map,
        title: sites[0],
        zIndex: sites[3],
        html: sites[4]
    });

    var contentString = "Some content";

    google.maps.event.addListener(marker, "click", function () {
        infowindow.setContent(this.html);
        infowindow.open(map, this);
    });
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T17:08:07.453

您的 myOptions 格式应如下所示（请参阅原始单词“style”之后的部分：

```
var myOptions = {
    zoom: 12,
    center: centerMap,
    scrollwheel: false,
    mapTypeId: google.maps.MapTypeId.ROADMAP,
    styles: [
      {
        "stylers": [
          { "saturation": 100 },
          { "lightness": 31 },
          { "hue": "#ff6600" },
          { "gamma": 0.9 }
        ]
      },{
      },{
      }
    ]
} 
```

我也搬了几件东西。这是一个有效的 JSFiddle：http: [//jsfiddle.net/VX8TJ/](http://jsfiddle.net/VX8TJ/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T17:04:49.753

您在 myOptions 数组（`var`之前的样式）中有问题，这是您需要的：

```
var myOptions = {
    zoom: 12,
    center: centerMap,
    scrollwheel: false,
    mapTypeId: google.maps.MapTypeId.ROADMAP,
    [
      {
        "stylers": [
          { "saturation": 100 },
          { "lightness": 31 },
          { "hue": "#ff6600" },
          { "gamma": 0.9 }
        ]
      },{
      },{
      }
    ]
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T17:07:16.377

我最终设法修复了自己，我的正确代码与样式：

```
function initialize() {
var styles =   [
  {
    stylers: [
      { hue: '#F2846A' },
      { saturation: 80 }
    ]
  },{
    featureType: 'road',
    elementType: 'geometry',
    stylers: [
      { lightness: 100 },
      { visibility: 'simplified' }
    ]
  },{
    featureType: 'road',
    elementType: 'labels',
    stylers: [
      { visibility: 'off' }
    ]
  }
];

var mapOptions = {
  zoom: 12,
  center: new google.maps.LatLng(52.204872,0.120163),
  mapTypeId: google.maps.MapTypeId.ROADMAP,
  styles: styles,
  scrollwheel: false
};

var map = new google.maps.Map(document.getElementById('map_canvas'),mapOptions);

setMarkers(map, sites);
infowindow = new google.maps.InfoWindow({
        content: "loading..."
    });

var bikeLayer = new google.maps.BicyclingLayer();
bikeLayer.setMap(map);

}

var sites = [
['The Frontroom', 52.202977,0.138938, 1, 'The Frontroom.'],
];

function setMarkers(map, markers) {

for (var i = 0; i < markers.length; i++) {
    var sites = markers[i];
    var siteLatLng = new google.maps.LatLng(sites[1], sites[2]);
    var marker = new google.maps.Marker({
        position: siteLatLng,
        map: map,
        title: sites[0],
        zIndex: sites[3],
        html: sites[4]
    });

    var contentString = "Some content";

    google.maps.event.addListener(marker, "click", function () {
        infowindow.setContent(this.html);
        infowindow.open(map, this);
    });
}
}

google.maps.event.addDomListener(window, 'load', initialize); 
```

# c# - 将数据从 DataTable 导出到 Excel 2007

> ID：15162537
> 
> 赞同：1
> 
> 时间：2013-03-01T16:40:48.767
> 
> 标签：c#, asp.net, export-to-excel

数据表的值是

斯大林——001 和迈克尔——002。但是生成excel我得到输出为

![在此处输入图像描述](../Images/60d45d34dcc8c1e3a26112624327e833.png)

在生成excel时，“0”不会出现。如何解决这种类型的场景。

代码：

```
if (dt.Rows.Count > 0)
{
    string filename = " ExportedData.xls";
    System.IO.StringWriter tw = new System.IO.StringWriter();
    System.Web.UI.HtmlTextWriter hw = new System.Web.UI.HtmlTextWriter(tw);
    DataGrid dgGrid = new DataGrid();
    dgGrid.DataSource = dt;
    dgGrid.DataBind();

    dgGrid.RenderControl(hw);       
    Response.ContentType = "application/vnd.ms-excel";
    Response.AppendHeader("Content-Disposition", "attachment; filename=" + filename + "");
    this.EnableViewState = false;
    Response.Write(tw.ToString());
    Response.End();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T16:44:12.387

那不是您的代码的问题。这是您的 excel 配置隐藏前缀零的问题。

1\. 在工具菜单上，单击选项，然后单击查看选项卡。

2.执行以下操作之一：

要在单元格中显示零 (0) 值，请选中零值复选框。

要将零值显示为空白单元格，请清除该复选框。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T17:40:47.360

在将数据表链接到数据网格之前，您可以手动设置数据表中列的内容类型。

```
DataTable dt = new DataTable();
dt.Columns.Add();
dt.Columns[0].DataType = typeof(string); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T18:19:48.283

您可以将 DataTable 中的数据存储/更新为以下格式：**="001"**

例子：

```
 DataTable dt = new DataTable();
        dt.Columns.Add("A");
        dt.Columns.Add("B");

        dt.Rows.Add(new object[] { "Name", "No" });
        dt.Rows.Add(new object[] { "Stalin", "=\"001\""});
        dt.Rows.Add(new object[] { "Micheal", "=\"002\"" }); 
```

# android - Saving a file to your own android application

> ID：15162538
> 
> 赞同：0
> 
> 时间：2013-03-01T16:41:02.480
> 
> 标签：android, android-file, apk

When My application is running I want to capture some information and save this to a folder in my application rather than to the device. I have read online that it is not possible to save a file to your assets or res directory. However would it be possible to save it to another file in your application?I had a look at Shared Preferences but that seems to be only for Key Value pairs.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T16:44:01.357

[http://developer.android.com/guide/topics/data/data-storage.html](http://developer.android.com/guide/topics/data/data-storage.html)

使用 MODE_PRIVATE 写入内部存储应该可以处理我认为您想要的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T16:44:02.357

您不能在运行时将文件存储在 Assets 或 Raw 文件夹中。相反，如果您有图像/视频/音频/文本文件，则可以将文件存储在 SD 卡中，并将这些文件的路径存储在数据库或共享首选项中的文件中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T16:45:18.687

安装后，每个应用程序都会在“/data/data/com.your.app.package.name”中创建一个存储。在那个地方保存你想要的任何东西。

# java - Java heap space with LinkedLists and Nodes

> ID：15162551
> 
> 赞同：0
> 
> 时间：2013-03-01T16:41:49.657
> 
> 标签：java, linked-list, space, out

For computer Science I'm coding a program that keeps the "tails" end of head, a Node so that I can add and remove from the Node/LinkedList. This isn't entirely difficult, but I've run into an issue that makes me cry. I am running into java heap space ( Out of Memory ).

Here is my code:

```
import java.util.NoSuchElementException;

/**
A linked list is a sequence of nodes with efficient
element insertion and removal. This class 
contains a subset of the methods of the standard
java.util.LinkedList class.
 */
public class LinkedList
{  
    private Node head;
    private int currentSize;
    private Node tails;
    /** 
    Constructs an empty linked list.
     */
    public LinkedList()
    {  
        head = null;
        tails = null;
        currentSize = 0;
    }

    /**
    Adds an element to the front of the linked list.
    @param element the element to add
     */
    public void addFirst(Object element)
    {  
        Node newNode = new Node();
        if(head == null){
            tails = newNode;
        }
        newNode.data = element;
        currentSize++;
        newNode.next = head;
        head = newNode;
    }

    /**
    Removes the head element in the linked list.
    @return the removed element
     */
    public Object removeFirst(){  
        if (head == null) 
            throw new NoSuchElementException();
        Object temp = head.data;
        head = head.next;
        if(tails.next == null)
            tails.next = head;

        currentSize--;
        return temp;
    }

    /**
    Returns the head element in the linked list.
    @return the head element in the linked list
     */
    public Object getFirst()
    {  
        if (head == null) 
            throw new NoSuchElementException();
        return head.data;
    }

    /**
    Returns the element at a given position in the linked list.
    @param index the element position
    @return the element at the given position
     */
    Object get(int index)
    {
        if (index < 0)
            throw new NoSuchElementException();

        Node current = head;
        int i = 0;

        while (current != null && i < index)
        {
            current = current.next;
            i++;
        }

        if (current == null)
            throw new NoSuchElementException();
        return current.data;
    }

    /**
    Computes the size of the linked list
    @return the number of elements in the list
     */
    public int size()
    { 
        //to be completed for lab 7.1 #2
        return currentSize;  // rewrite this, just makes it compile
    }

    /**
    Reverses all elements in a linked list.
     */
    public void reverse(){ 
       Node currentNode, nextNode, loopNode;
        if(head==null)
             return;
        currentNode=head;
        nextNode= head.next;
        loopNode = null;
       while(nextNode != null){
            currentNode.next = loopNode;
            loopNode= currentNode;
            currentNode=nextNode;
            nextNode =nextNode.next;
       }
       head = currentNode;
       head.next = loopNode;

}

    /**
    Adds an element to the end of the linked list.
    @param element the element to add
     */
    public void add(Object element){
        Node current = new Node();
        current.data = element;
        if(tails.next == null)
           tails.next = current;

       tails = head;
       currentSize ++;
    }    

    /**
    Returns an iterator for iterating through this list.
    Allows the use of the iterator outside of this class.
    @return an iterator for iterating through this list
     */
    public ListIterator listIterator()
    {  
        return new LinkedListIterator();
    }

    /**
    Returns a string representation of this list in brackets 
    separated by commas.
    @return a string of list elements.
     */
    public String toString()
    {  
        StringBuilder temp = new StringBuilder();
        ListIterator it = listIterator();
        while(it.hasNext()){
            temp.append(it.next());
            if(it.hasNext())
                temp.append(", ");
        }
        return temp.toString();    
    }

    private static class Node
    {  
        private Object data;
        private Node next;

    }

    private class LinkedListIterator implements ListIterator
    {              
        private Node position;
        private Node previous;

        /**
        Constructs an iterator that points to the front
        of the linked list.
         */
        public LinkedListIterator()
        {  
            position = null;
            previous = null;

        }

        /**
        Moves the iterator past the next element.
        @return the traversed element
         */
        public Object next()
        {  
            if (!hasNext())
                throw new NoSuchElementException();
            previous = position; // Remember for remove

            if (position == null)
                position = head;
            else
                position = position.next;

            return position.data;
        }

        /**
        Tests if there is an element after the iterator 
        position.
        @return true if there is an element after the iterator 
        position
         */
        public boolean hasNext()
        {  
            if (position == null)
                return head != null;
            else
                return position.next != null;
        }

        /**
        Adds an element before the iterator position
        and moves the iterator past the inserted element.
        @param element the element to add
         */
        public void add(Object element)
        {  
            if (position == null)
            {
                addFirst(element);
                position = head;
                tails = head;
            }
            else{  
                Node newNode = new Node();
                newNode.data = element;
                newNode.next = position.next;
                position.next = newNode;
                position = newNode;
                previous = position;
                tails = newNode;
            }
                currentSize ++;
        }

        /**
        Removes the last traversed element. This method may
        only be called after a call to the next() method.
         */
        public void remove()
        {  
            if (previous == position)
                throw new IllegalStateException();

            if (position == head)
            {
                removeFirst();
                currentSize --;
                tails = previous;
            }
            else 
            {  
                previous.next = position.next;
                currentSize --;
                tails = previous;
            }

            position = previous;

        }

        /**
        Sets the last traversed element to a different 
        data. 
        @param element the element to set
         */
        public void set(Object element)
        {
            if (position == null)
                throw new NoSuchElementException();
            position.data = element;
        }

    }
} 
```

The error is at `removeFirst()`.

Any help?

Edits: I'm attempting to store the last referenced node so I can play with it else where.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T22:50:20.583

你的代码很臃肿。看看这个：

[如何在 Java 中创建链表数据结构？](https://stackoverflow.com/questions/10042/how-do-i-implement-a-linked-list-in-java)

如果您不想要额外的分数，请尝试添加泛型：

[http://docs.oracle.com/javase/tutorial/java/generics/](http://docs.oracle.com/javase/tutorial/java/generics/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T16:51:05.500

通常，该错误意味着无限递归。我建议您查看以下代码部分。

```
 while(it.hasNext()){
            temp.append(it.next());
            if(it.hasNext())
                temp.append(", ");
        } 
```

# twitter-bootstrap - Bootstrap Radiobutton int jquery 验证

> ID：15162555
> 
> 赞同：0
> 
> 时间：2013-03-01T16:42:15.013
> 
> 标签：twitter-bootstrap, asp.net-mvc-4, jquery-validate, radio-button

在尝试避免设置默认选定值的同时，我尝试了几个不同的选项。

选项1

```
<div class="control-group">
    <h4>Text</h4>
    <div class="controls">
        <div hidden="hidden" >@Html.EditorFor(m => m.pc.PS1)</div>                            
        <div class="btn-group" data-toggle-name="pc.PS1" data-toggle="buttons-radio">
        <button type="button" value="11" class="btn@((Model.pc.PS1 == 11) ? " active" : string.Empty )" data-toggle="button">Yes</button>
        <button type="button" value="12" class="btn@((Model.pc.PS1 == 12) ? " active" : string.Empty )" data-toggle="button">No</button>
        <button type="button" value="13" class="btn@((Model.pc.PS1 == 13) ? " active" : string.Empty )" data-toggle="button">N/A</button>
    </div>
    @Html.ValidationMessageFor(model => model.pc.PS1)
</div> 
```

选项 2

```
<div class="control-group">
     <h4>Text</h4>
     <div class="controls">
         @Html.HiddenFor(m => m.pc.F1FallsRiskAssessmentFRASE)
         <div class="btn-group" data-toggle-name="pc.PS2" data-toggle="buttons-radio">
         <button type="button" value="11" class="btn@((Model.pc.PS2== 11) ? " active" : string.Empty )" data-toggle="button">Yes</button>
         <button type="button" value="12" class="btn@((Model.pc.PS2== 12) ? " active" : string.Empty )" data-toggle="button">No</button>
         <button type="button" value="13" class="btn@((Model.pc.PS2== 13) ? " active" : string.Empty )" data-toggle="button">N/A</button>
         </div>
         @Html.ValidationMessageFor(model => model.pc.PS2)
      </div>
</div>

$('#ctFRM').validate({
            rules: {
                "pc.PS1": { required: true, minlength: 2 },
                "pc_PS2": { required: true, minlength: 2 }, 
```

页面上隐藏的 ID 是 pc_PS2 但名称是 pc.PS2 使用 firebug 脚本选项卡并在其上放置一个断点显示默认值为 0 当验证为 pc_PS2 但没有验证消息时不管“。” 或者 ”_”。

它们确实适用于使用“。”的文本框输入。在验证规则和“_”中设置掩码。

我曾尝试在单选按钮上使用所需的验证，每个按钮的值都为 1/2/3，但由于页面默认隐藏的值为 0，因此它不会触发所需的真实验证。

接下来，我尝试将选项值设置为 11/12/13，因此它们的长度为 2，因此我可以使用 minlength 2 来防止提交，但这在更改之前不会生效。

因此，我留下了不显眼的验证的备份选项，或者为每个问题的每个按钮设置一个 onclick，以期获得正常的字符串需要验证以处理另一组隐藏值。

有什么想法或解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T15:22:28.470

为了验证任何隐藏字段，您必须`ignore`按如下方式设置选项。

```
$('#ctFRM').validate({
    // options and rules,
    ignore: []
}); 
```

有关更多信息，请参见： [https ://stackoverflow.com/a/8565769/594235](https://stackoverflow.com/a/8565769/594235)

# javascript - 使用Javascript在HTML的动态表中使文本框内容可编辑为假？

> ID：15162557
> 
> 赞同：0
> 
> 时间：2013-03-01T16:42:17.130
> 
> 标签：javascript, html, input, contenteditable

我正在尝试使动态表中的第一个单元格不可编辑，但我没有运气。据我所知，这应该是正确的，但由于某种原因它不能正常工作。

```
var n = 1;
function addRow(tableID,column) {
    var table = document.getElementById(tableID);
    var rowCount = table.rows.length;
    var row = table.insertRow(rowCount);

    for(i=0;i<column;i++){

        var cell = row.insertCell(i);
        var element = document.createElement("input");
        element.type = "text";
        element.name = n+"0"+i;
        element.size = "12";
        element.id = n+"0"+i;
        element.value = element.id;
        if(element.id == n+"00"){
            element.contenteditable = "false";
            element.value = "false";
            //alert("false");
        }
        cell.appendChild(element);
    }
    n++;
} 
```

关于如何做到这一点的任何想法？

n 是行数

对于第一个单元格的值，我得到“假”，这意味着正在输入 if 语句，但它没有读取`contenteditable="false"`.

像往常一样，非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T16:44:19.767

输入元素不需要`contenteditable`. 只需使用

```
element.disabled = true; 
```

禁用它。

# javascript - 将数组动态加载到 jQuery 函数中

> ID：15162558
> 
> 赞同：1
> 
> 时间：2013-03-01T16:42:21.890
> 
> 标签：javascript, jquery

好吧，伙计们，

我需要一些帮助来解决这个 jQuery 困境：

我在网站的标题中全局声明了 3 个数组：

```
var array1 = [];
var array2 = [];
var array3 = []; 
```

我有这样的功能：

```
function setDropDownList(raw_id){
    jQuery.each(mytest, function(key, value) {
      var mytest = value.split('|');
    }
} 
```

我需要动态加载上面全局声明的 3 个数组中的每一个，而不是“mytest”。

我该怎么做？

我在想一些事情：

```
function setDropDownList(raw_id, "??? how can I generate which array I need: array1 or 2 or 3?"){
    jQuery.each(the_needed_array, function(key, value) {
      var the_needed_array = value.split('|');
    }
} 
```

在 PHP 中，有一种叫做**variable variables**的东西，我可以有这样的东西。

```
var array_name = 'array1'; 
```

在函数中：

```
$$array_name; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T16:45:52.457

假设这些是全局变量，您需要对窗口对象进行操作， 如果您有，请使用*数组表示法*

```
var arrname = 'array1'
window[arrname] = [1,2,3]; // window.arrname won't work but this will 
```

然后

```
console.log(window.array1) 
```

将产生

```
[1,2,3] 
```

如果它们不是全局变量，则可以使用*this*而不是 window 来定位容器对象（如果您在全局范围内，*这*实际上将引用*window ）。*

```
var myobj = {
  myfunc : function() {
    var an = 'iamanarray';
    this[an] = [1,2,3];
    console.log(this[an]);            // [1,2,3]
    console.log(this.an);             // undefined
    console.log(this['iamanarray']);  // [1,2,3]
    console.log(myobj.iamanarray);    // [1,2,3]
    console.log(iamanarray);          // reference error
    console.log(window.iamanarray);   // reference error
  }
} 
```

# sqlalchemy - SQLAlchemy：如何根据其后端有条件地选择列的类型

> ID：15162559
> 
> 赞同：11
> 
> 时间：2013-03-01T16:42:26.760
> 
> 标签：sqlalchemy, relational-database, portability, sqldatatypes

[`HSTORE`](http://docs.sqlalchemy.org/en/rel_0_8/dialects/postgresql.html#sqlalchemy.dialects.postgresql.HSTORE)如果它使用 PostgreSQL 作为其后端，我想为列使用类型，[`PickleType`](http://docs.sqlalchemy.org/en/rel_0_8/core/types.html#sqlalchemy.types.PickleType)否则。问题是我们无法确定在定义模式时将使用哪个后端（在 Python 中）。当实际在后端数据库上创建表时，如何确定这一点并有条件地选择数据类型？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-02T01:34:20.667

您可以使用以下方法完成类似的操作[`TypeEngine.with_variant`](https://docs.sqlalchemy.org/core/type_api.html#sqlalchemy.types.TypeEngine.with_variant)：

```
from sqlalchemy.types import PickleType
from sqlalchemy.dialects import postgresql

HybridType = PickleType()

HybridType = HybridType.with_variant(postgresql.HSTORE(), 'postgresql') 
```

这将创建一个新类型 ，`HybridType`您可以像使用任何其他类型一样使用它，但需要注意的是它将在 Postgres 和其他任何地方生成一个`HSTORE`列。`PickleType`

# jquery - submiting dynamic form that has multiple rows

> ID：15162560
> 
> 赞同：0
> 
> 时间：2013-03-01T16:42:36.577
> 
> 标签：jquery, asp.net, razor

Having problem writing form data to database.a form that creates multiple rows on the fly
by cloning form controls and incrementing textboxes name and id properties.but when i post form only the first line get written to database.

```
 var ind = Request.Form.Count;

foreach(int i = 0; i < ind; i++){ 
   if (IsPost)
 {
       Item_No = Request.Form.Item_No[i];
       Item_Desc = Request.Form.Item_Desc[i];
       Qty = Request.Form.Qty[i];
       var db = Database.Open("s2k");
       var insertQuery = "INSERT INTO OrderItems" +
      "(Item_No, Item_Desc, Qty)" +
      "Values (@0, @1, @2)";
       db.Execute(insertQuery, Item_No, Item_Desc, Qty);
       Response.Redirect("~");
   }
  } 
```

adds new form elements

```
function addTableRow(table)
            {
            var $tr = $(table).find("tbody tr:last").clone();               
            $tr.find("input,select").val('').attr("name", function()
    {      
      var parts = this.id.match(/(\D+)(\d+)$/);

      return parts[1] + ++parts[2];   
    }).attr("id", function(){
            var parts = this.id.match(/(\D+)(\d+)$/);
            return parts[1] + ++parts[2];
                });             
                $(table).find("tbody tr:last").after($tr);
            }; 
```

form

```
<form method="post" id = "form" title= "form">
            <table>             
                  <thead>
           <tr>
            <th class="product">Item_No</th>
            <th class="size">Item_Desc</th>
            <th class="price">Qty</th>
           </tr>

                </thead>
                <tbody>
                        <td><input type="text" name="Item_No" id="Item_No1"></td>
                        <td><input type="text" name="Item_Desc" id="Item_Desc1"></td>
                        <td><input type="number" name="Qty" id="Qty1"></td>
                    </tr>
                </tbody>
            </table>

            <p><input type="submit" name="buttonSubmit" value="Create Order" /></p>
    </form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T19:25:23.937

在我看来，这条线是你的问题：

```
 Response.Redirect("~"); 
```

你已经在你的循环中得到了它，所以在第一次循环结束时，它会执行，另一个页面将开始加载。你的循环永远不会结束。

# php - PHP 使用 isset 和 SESSION 在屏幕上显示内容

> ID：15162561
> 
> 赞同：1
> 
> 时间：2013-03-01T16:42:38.597
> 
> 标签：php, html

您好，这一切都是对上一个问题的跟进，正如我所解释的，我已经使用 PHP 和单选按钮创建了一个考试。我已经成功地传递了变量，因此使用 GET 方法和回显提示计算并显示在屏幕上。

我的问题是当新用户查看该页面时，我收到一条错误消息，提示变量 totalscore 未定义。我知道发生这种情况是因为此变量当前不存在，因为 GET 方法没有变量。我试图在有结果时达到“总分：20%”，但在没有结果时为空白。

我研究过我应该使用 isset 和 SESSION 命令来创建一个 if 语句：

```
<? $totalScore=$_GET['totalscore']; ?>

<? if (isset($_SESSION['totalscore']))

{
echo "Total Score";
echo $totalScore;
echo "&#37;";
}
else
{}
?> 
```

如果这段代码完全错误，请原谅我，我的理解是，如果会话中有一个变量“totalscore”，页面会回显信息，如果没有，则不会显示任何内容。

亲切的问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T16:45:52.427

您可以禁用通知，或者：

```
<?php $totalScore = isset($_GET['totalscore']) ? $_GET['totalscore'] : false; ?> 
```

你也应该做类似 if($totalScore) { 做任何事情 }

:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T16:46:20.927

第一页

```
if (isset($_GET['totalscore'])) {
    // grab data
    $totalScore = $_GET['totalscore'];
    // store in session
    $_SESSION['totalscore'] = $totalScore;
} 
```

第二页或同一页

```
// check the session and use
if (isset($_SESSION['totalscore'])) {
    echo "Total Score";
    echo $_SESSION['totalscore'];
    echo "&#37;";
} else {
    // session not exists
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T16:46:26.007

为[防止会话劫持](http://www.thecodertips.com/2012/09/session-security-tutorial-protection.html)，您必须 `<? session_start(); ?>` 在开头添加：

还学会保护会话

# android - Application lifecycle

> ID：15162562
> 
> 赞同：0
> 
> 时间：2013-03-01T16:42:39.713
> 
> 标签：android

I have seen nice diagrams showing the lifecycle of an ***activity***, but I can not find a diagram showing the lifecycle of an ***application*** - is there one?

In an activity onCreate is kind-of paired with onStop, I say paired in as much as you know for sure that if onStop() is called then you know for sure that the activity won't run again without calling onCreate(), you can see this at a glance from the diagram.

The particular thing I'm looking for is what method is paired with onCreate in the lifecycle of an application? is it onTerminate?

**EDIT:** I have something like the following:

```
public class myapp extends Application
{
    @Override
    public void onCreate()
    {
             special_function_startup();
    }
} 
```

I want to have a special_function_shutdown() somewhere and I don't want special_function_startup() to be called if it is already started up. So the perfect place to put the special_function_shutdown() is in the method that "corresponds to" onCreate(), like onStop() does in an activity.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T16:47:00.027

有四种不同类型的应用程序组件。每种类型都有不同的用途，并有不同的生命周期来定义组件的创建和销毁方式。

以下是四种类型的应用程序组件： 活动 服务 广播接收器 内容提供者

因此，应用程序的生命周期取决于其组件的生命周期。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T16:52:14.710

> 我找不到显示应用程序生命周期的图表 - 有吗？

并不真地。

> 我正在寻找的特别是在应用程序的生命周期中与 onCreate 配对的方法是什么？

如果您所说的“应用程序”是指`Application`，那么没有任何东西与`onCreate()`. An`Application`永远不会被显式销毁；它在整个过程生命周期中都存在。

> 是onTerminate吗？

`onTerminate()`永远不会被调用。

# android - android ignore non existing keywords in search function

> ID：15162564
> 
> 赞同：0
> 
> 时间：2013-03-01T16:42:50.113
> 
> 标签：android, database, keyword

Hye..I managed to create search function to search using multiple keywords. The problem is the keywords must be exist inside my database column that i had set. If i search using 3 keywords which is 2 keywords match inside database but 1 more keyword is not exist. The result was displayed nothing.

How could I ignore the non existing keywords?? just take the keywords that exists inside my database only. Means, if the user enter many keywords, system will read only keywords that match inside my database only and it will ignore the keywords that doesn't match. Below is my code.

```
String s = txtLelaki.getText().toString();
                String s = txtLelaki.getText().toString();
                String[] words = s.split(" ");
                String sql = null;

                String where = helper.KEY_LELAKI + " = ?";
                String relation = " or ";
                String wildcard1 = "'%";
                String wildcard2 = "%'";

                StringBuilder build = null;
                for(int i=0;i<words.length; i++)
                {
                    words[i] = new StringBuilder(wildcard1).append(words[i]).append(wildcard2).toString();
                    if(i==0)
                        build = new StringBuilder(where);
                    else
                        build.append(relation).append(where);                       
                }

                Cursor c = database.query(helper.DB_TABLE_LELAKI, null, build.toString(), words, null, null, null);

                if(c!= null)
                {
                    c.moveToFirst();
                    int soalanColumn = c.getColumnIndex(helper.MASALAH_LELAKI);
                    int getId = c.getColumnIndex(helper.ID_LELAKI);
                    if(c.isFirst())
                    {
                        do
                        {
                            idList.add(c.getLong(getId));
                            results.add(c.getString(soalanColumn));

                        }while(c.moveToNext());
                    }

                }

                adapter.updateList(results);
                listView.setTextFilterEnabled(true);

            }//end try

                catch(SQLException e)
                {
                    Log.v("caer", e.toString());    
                } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T17:13:26.893

**重写**
我仍然不明白你想要做什么，但是看看你之前的问题：[android search with multiple keywords](https://stackoverflow.com/q/15141681/1267661)，我假设你想要一个这样的查询：`SELECT * FROM Table WHERE foo like ? OR foo like ? ...`对于每个可能的关键字。您需要自己构建此`WHERE`子句：

```
String where = helper.KEY_LELAKI + " = ?";
String relation = " OR ";
String wildcard = "%";

StringBuilder builder;
for(int i = 0; i < words.length; i++) {
    // Surround the keyword with "%", i.e. "%cat%"
    words[i] = new StringBuilder(wildcard).append(words[i]).append(wildcard).toString();

    // Build the WHERE clause
    if(i == 0)
        builder = new StringBuilder(where);
    else
        builder.append(relation).append(where);
}

Cursor c = myDataBase.query(helper.DB_TABLE_LELAKI, null, 
        builder.toString(), words, null, null, null); 
```

如果`s`在您的示例中，`"cat mustache pull"`您的查询将包含包含关键字短语“cat”、“mustache”或“pull”的每一行。

# java - 字符串结构数组

> ID：15162567
> 
> 赞同：0
> 
> 时间：2013-03-01T16:42:55.473
> 
> 标签：java, arraylist

如何在java中的单个数组元素中存储多个字符串？可以动态添加或删除字符串。所以，数组必须是灵活的。我的意思是，如果有一个数组 a[]，那么：

```
 a[1] should be able to accommodate "String1", "String2", ....  
 a[2] should be able to accommodate "String3", "String4", .... 
```

这些字符串可以随时删除，并且可以随时添加其他字符串。什么 java 组件支持这种功能？我是java新手，基础薄弱。希望你能帮忙。谢谢 ！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T16:45:10.557

你可能需要类似的东西 `List<List<String>> yourList ;`

从您的列表中删除“String2”：

```
yourList.get(0).remove("String2"); 
```

在索引 0 处将“StringX”添加到您的列表中。

```
 yourList.get(0).add("Stringx"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T16:48:47.947

我的建议是尝试学习 Java 集合！

[官方教程](http://docs.oracle.com/javase/tutorial/collections/index.html)

[教程 1](http://javamex.com/tutorials/collections/how_to_choose.shtml) [教程 2](http://www.javapractices.com/topic/TopicAction.do?Id=65)

这样，您将有一个适合您发现自己的任何情况的集合

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T16:47:57.007

您可以使用一些字符作为分隔符将这些字符串添加到同一字符串中，然后使用拆分方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-01T17:33:48.623

使用锯齿状数组。我可以给你一个程序来了解锯齿状数组的基础知识：锯齿状[数组 - 可变列大小数组](http://way2java.com/arrays/jagged-arrays-varying-column-size-arrays/)

# javascript - 从特定位置开始时将正则表达式与输入开始匹配

> ID：15162573
> 
> 赞同：0
> 
> 时间：2013-03-01T16:43:08.083
> 
> 标签：javascript, regex

在 Javascript 中使用 RegExp 时，如果您想将正则表达式匹配到输入的开头，您可以像这样使用 ^

```
var regEx = /^Zorg/g;  
regExp.exec( "Zorg was here" );  // This is a match
regExp.exec( "What is Zorg" );  // This is not a match 
```

在字符串中的不同位置开始匹配时，这不起作用。

```
var regEx = /^Zorg/g;
regExp.lastIndex = 5;
regExp.exec( "What Zorg?" );  // This is not a match but i want it to 
```

根据 mozilla 文档，您应该能够通过使用 regExp 上的粘性标志 y 来使其匹配。

```
var regEx = /^Zorg/gy;
regExp.lastIndex = 5;
regExp.exec( "What Zorg?" );  // This should match in firefox 
```

现在问题来了。当从不同于 0 的索引开始时，是否可以编写一个在搜索开始时匹配的正则表达式。（现在使用 Node，但也希望在 webkit 中使用它）

```
var regEx = ????;
regExp.lastIndex = 5;
regExp.exec( "What Zorg?" );  // This this should match 
regExp.exec( "Who is Zorg?" );  // This this should not match 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T16:45:21.137

只是偏移它，所以`/^.{5}Zorg/` 这意味着'从行首开始的任何 5 个字符，然后是 Zorg'。

# jquery - 基本的 jQuery 绑定

> ID：15162574
> 
> 赞同：0
> 
> 时间：2013-03-01T16:43:26.663
> 
> 标签：jquery

我在我的项目中发现了一个点，我正在检测箭头键按下并正在使用：

```
$(document).bind('keypress', function(event) {
    alert("Handler for .keypress() called.");
}); 
```

并且正在研究并发现我可以使用它来代替：

```
$(document).keypress(function() {
    alert("Handler for .keypress() called.");
}); 
```

我最喜欢第二个，它看起来更干净。他们***似乎***在做同样的事情。所以...

*   我为什么要使用`.bind()`？
*   这些不做同样的事情吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T16:46:41.700

你给出的两个例子*确实*做了同样的事情——从 jQuery 1.7 开始，这两个例子都被弃用了

来自[http://api.jquery.com/bind/](http://api.jquery.com/bind/)

> 从 jQuery 1.7 开始，.on() 方法是将事件处理程序附加到文档的首选方法。

这些附加事件处理程序的旧方法要求在附加事件处理程序时元素存在于 DOM 中。有更智能（更不用说更有效）的方法可以对更新的版本执行相同的操作 - 这通常称为委托。你应该看看[`.on()`](http://api.jquery.com/on/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T16:49:55.267

`.keypress()`或任何其他类似命名的函数`.click()`等`.hover()`只是该函数`.on()`的简写

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-01T16:50:42.880

jQuery 文档是你的朋友！

*   [`.bind()`](http://api.jquery.com/bind/)已被弃用，因此按照此处的建议，如果您使用的是 jQuery 1.7+，则不应使用它。
*   [`.on()`](http://api.jquery.com/on/)是在 jQuery 1.7+ 中附加事件处理程序的首选方式。
*   [`.keypress()`](http://api.jquery.com/keypress/)是许多“特殊”的特定事件附加器之一（大多数通常调用`.on()`或`.bind()`无论如何），并且根据文档，可能在浏览器、浏览器版本和平台之间具有不同的行为。

鉴于这三个功能的信息，您最好的选择应该是使用`.on()`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-01T16:48:19.190

这主要是个人喜好。你是对的，它们都做同样的事情......但是，它们在最新版本的 jQuery 中已被弃用

正如安德鲁在您的评论中提到的那样，使用`on`，而不是`bind`。

`on`为您提供了额外的好处，即能够使用相同的函数为绑定初始化时可能存在或不存在的元素绑定委托处理程序：

```
$('#someExistingElement').on('keypress', handler); //normal binding

$('#someExistingElement').on('keypress', '.some-child-element-that-doesnt-exist', handler); //delegate binding 
```

请原谅可怕的类名和 id 的......仅用于演示目的：D

# google-places-api - 使用 Google 地方信息自动推荐

> ID：15162577
> 
> 赞同：0
> 
> 时间：2013-03-01T16:43:32.557
> 
> 标签：google-places-api

我正在使用以下代码使 Google Places Autosuggest 正常工作，但我无法正常工作（Autosuggest 不起作用）。请指出可能出错的地方：

**HTML**

```
<script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?libraries=places&sensor=false"></script>
<form action="">
  <input type="text" id="city"></form>
</form> 
```

**Javascript：**

```
$(document).ready(function(){  
   var input = $("#city"); 
   var options = {
           types: ['(cities)'],
           componentRestrictions: {country: 'fr'}
};    
  var autocomplete = new google.maps.places.Autocomplete(input, options);  
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T07:15:08.080

Autocomplete 期望第一个参数是一个输入元素，目前（我猜）它是一个 jQuery 对象。

使用任一：

```
var autocomplete = new google.maps.places.Autocomplete(input[0], options); 
```

或者

```
var autocomplete = 
  new google.maps.places.Autocomplete(document.getElementById('city'), options); 
```

# c# - 在 OnApplicationStarted 期间发生错误时如何重定向用户？

> ID：15162582
> 
> 赞同：1
> 
> 时间：2013-03-01T16:43:51.827
> 
> 标签：c#, asp.net, asp.net-mvc

我正在`OnApplicationStarted`Global.asax 中的方法期间进行系统版本比较，如果数据库版本和系统版本不匹配，则不允许系统启动。

所以它看起来像这样：

```
protected override void OnApplicationStarted()
{
  try{
     if(systemVersion != dbVersion)
        throw new Exception("They are not same!");
  }
  catch{
    //do some other things
    //Response.Redirect("~/VersionError.html");
  }
} 
```

但它说**“在这种情况下没有响应。”** 我试图抓住错误，`Application_Error`但我得到了同样的错误。

我的问题是如何从这些方法中将用户重定向到错误页面？

**编辑：**

我知道此时没有回应，**但我在问如何解决这个问题。**而且我可以在 OnApplicationStarted 之后点击方法的原因之一是，如果发生此异常，我们不想加载很多东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T16:46:30.260

此时您正在应用程序启动中没有任何响应！这是在应用程序启动时而不是在做出响应时。

如果通过设置将捕获所有请求的默认路由满足此条件，您可以在此处设置一些内容以将每个 url 定向到错误页面。这会给你你想要的功能，因为未来的请求会得到一个错误页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T16:52:02.147

你能抛出一个 HTTP 错误吗：

```
throw new HttpException(403, "Forbidden"); 
```

然后在你的 web.config 中：

```
 <customErrors mode="On">
    <error statusCode="403" redirect="~/VersionError.html"/>
  </customErrors> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T17:17:04.120

由于您在应用程序启动时无权访问响应，但希望在满足条件时所有传入请求都转到错误页面，因此您需要在管道的更远处设置一些东西。想想 IIS 模块。通过以下方式安装模块：

```
<system.webServer>
  <modules>
    <add name="VersionsNotSameHandler" 
         type="Company.Exceptions.VersionsNotSameHandler, Company.Exceptions" 
         preCondition="managedHandler" />
  </modules>
</system.webServer> 
```

现在对于模块代码：

```
namespace Company.Exceptions
{
  public class VersionsNotSameHandler: IHttpModule
  {
    public void Dispose() { }

    public void Init(HttpApplication application)
    {
        context.PreRequestHandlerExecute += newEventHandler(OnPreRequestHandlerExecute) 
    }

    public void OnPreRequestHandlerExecute(Object source, EventArgs e){

        HttpApplication app = (HttpApplication)source; 
        HttpRequest request = app.Context.Request;
    // Check for invalid versioning
        app.Response.Redirect('.html page displaying error', true);
    }
  }
} 
```

OnPreRequest 发生在每个请求之前，确保始终检查版本......如果您发现速度变慢，您可能需要缓存。

# jquery - jQuery改变div内容

> ID：15162585
> 
> 赞同：0
> 
> 时间：2013-03-01T16:43:55.240
> 
> 标签：jquery, html, jquery-plugins

我需要帮助更改我的代码，以便在单击链接 id 示例时更改 div 内容：我单击第一个链接，它打印出 1 等等。它还将有一个独特的链接#first。默认情况下，它显示“默认”

```
<script src="jquery.js"></script>
<script src="jquery.bbq.js"></script>
<script>
$(function () {
  var tabContainers = $('div.tabs > div');
  tabContainers.hide().filter(':first').show();

  $(window).bind('hashchange', function () {
    var hash = window.location.hash || '#first';

    tabContainers.hide();
    tabContainers.filter(hash).show();
    $('div.tabs ul.tabNavigation a').removeClass('selected');
    $('a[hash=' + hash + ']').addClass('selected');
  });

  $(window).trigger( "hashchange" );
});
</script>
<ul class="tabNavigation">
    <li><a href="#first" id="1">First</a></li>
    <li><a href="#second" id="2">Second</a></li>
    <li><a href="#third" id="3">Third</a></li>
</ul>
<div class="tabs">
    Change content here
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T16:49:50.317

试试这个：

`$('#1').click(function(){ $('.tabs').html('Your Text'); })`

您可以将其包含在一个函数中，该函数接受`id`并在 dom 树中的适当位置设置值

由于您的`a`代码不应执行默认操作，因此您应该防止`a`同样的操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T17:01:48.617

`window.location.hash`通常在没有哈希时返回一个空字符串，并且您需要检查 anchors `href`，而不是`hash`. 看起来锚也不在`.tabs`元素内部吗？

```
$(function () {
    $(window).on('hashchange', function () {
        var tabContainers = $('.tabs > div'),
            hash = window.location.hash != '' ? window.location.hash : '#first';

        tabContainers.hide();
        tabContainers.filter(hash).show();
        $('.tabNavigation li a').removeClass('selected');
        $('a[href="' + hash + '"]', '.tabNavigation').addClass('selected');
    }).trigger('hashchange');
}); 
```

我猜你实际上有 ID 与内部的锚点 href 匹配的元素`.tabs`，这不是像示例中那样为空吗？

[**示范**](http://jsfiddle.net/adeneo/RHFUr/)

# regex - 正则表达式验证公司名称

> ID：15162590
> 
> 赞同：0
> 
> 时间：2013-03-01T16:44:05.283
> 
> 标签：regex

我有这个正则表达式来验证一些事情，不幸的是它不会只验证 PC - 我尝试将 {0,1} 添加到每个时期，但它仍然无法验证。有任何想法吗？

（为了便于阅读，换行符）

```
/(^|\s)Corporation\.{0,1}(^|$)|
 (^|\s)Corp\.{0,1}(^|$)|
 (^|\s)Inc\.{0,1}(^|$)|
 (^|\s)Incorporated\.{0,1}(^|$)|
 (^|\s)Company\.{0,1}(^|$)|
 (^|\s)(^|$)|
 (^|\s)LTD\.{0,1}(^|$)|
 (^|\s)PLLC\.{0,1}(^|$)|
 (^|\s)P\.{0,1}C\.{0,1}(^|$)/ig; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-01T17:03:04.300

这是您的正则表达式的简化版本：

```
/(?:^|\s)(?:Corporation|Corp|Inc|Incorporated|Company|LTD|PLLC|P\.C)\.?$/ig; 
```

*   `{0,1}`可以替换为`?`
*   重复可以通过一些分组来消除。
*   这没有多大意义：`(^|$)`. 您需要在匹配后立即出现行首或行尾。这在功能上与要求匹配位于行尾相同，因此我只是将其替换为`$`.
*   当您需要对事物进行分组时，请使用非捕获组`(?:...)`，除非您需要抓住比赛的那部分。他们更有效率。

话虽如此，您的原始模式应该`P.C.`在行尾匹配。问题可能与您的输入数据或您使用正则表达式的方式有关。

# sql - PostgreSQL：ORDER BY 和 LIMIT/OFFSET 的奇怪冲突

> ID：15162593
> 
> 赞同：6
> 
> 时间：2013-03-01T16:44:16.803
> 
> 标签：sql, postgresql, sql-order-by, case-insensitive, slice

我正在尝试在 PostgreSQL 9.1 中执行此操作：

```
SELECT m.id, vm.id, vm.value
FROM m
LEFT JOIN vm ON vm.m_id = m.id and vm.variation_id = 1
ORDER BY lower(trim(vm.value)) COLLATE "C" ASC LIMIT 10 OFFSET 120 
```

结果是：

```
 id |  id | value
----+-----+---------------
504 | 511 | "andr-223322"
506 | 513 | "andr-322223"
824 | 831 | "angHybrid"
866 | 873 | "Another thing"
493 | 500 | "App update required!"
837 | 844 | "App update required!"
471 | 478 | "April"
905 | 912 | "Are you sure you want to delete this thing?"
 25 |  29 | "Assignment"
196 | 201 | "AT ADDRESS" 
```

好的，让我们执行相同的查询`OFFSET 130`：

```
 id |  id | value
----+-----+---------------
196 | 201 | "AT ADDRESS"
256 | 261 | "Att Angle"
190 | 195 | "Att Angle"
273 | 278 | "Att Angle:"
830 | 837 | "attAngle"
475 | 482 | "August"
710 | 717 | "Averages"
411 | 416 | "AVG"
692 | 699 | "AVG SHAPE"
410 | 415 | "AVGs" 
```

我们再次看到我们的`AT ADDRESS`项目，但在开始！

事实上，该`vm`表包含以下两项：

```
 id | m_id | value
----+------+---------------
201 |  196 | "AT ADDRESS"
599 |  592 | "At Address" 
```

我用一种解决方法解决了这种情况：

```
(lower(trim(vm.value)) || vm.id) 
```

但到底是什么？？？！！！为什么我必须使用解决方法？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-01T16:59:34.813

咒骂不会改变定义这种行为的 SQL 标准。
除非在 中指定，否则行的顺序是**未定义的`ORDER BY`**。[根据文档](http://www.postgresql.org/docs/current/interactive/queries-order.html)：

> 如果未选择排序，则将按未指定的顺序返回行。这种情况下的实际顺序将取决于扫描和连接计划类型以及磁盘上的顺序，但不能依赖它。只有明确选择了排序步骤，才能保证特定的输出排序。

由于您没有为这两个对等点定义顺序（按您的排序顺序）：

```
 id | m_id | value
----+------+---------------
201 |  196 | "AT ADDRESS"
599 |  592 | "At Address" 
```

.. 你可以任意排序——对 Postgres 来说是方便的。一个查询`LIMIT`经常使用不同的查询计划，它可以解释不同的结果。

**使固定：**

```
ORDER BY lower(trim(vm.value)) COLLATE "C"**, vm.id**;
```

或者（也许更有意义 - 也可能调整到现有索引）：

```
ORDER BY lower(trim(vm.value)) COLLATE "C"**, vm.value, vm.id**;
```

`COLLATE "C"`（顺便说一句，这与此处的使用无关。）
**不要**为此目的进行连接，这要昂贵得多，并且可能无法使用**索引**（除非您在该精确表达式上有索引）。添加另一个表达式，当列表中的先前表达式存在`ORDER BY`歧义时，该表达式会启动。

此外，由于您有一个**`LEFT JOIN`**存在，因此`m`没有匹配的行对于所有当前表达式`vm`都具有空值。`ORDER BY`它们排在最后，否则会被任意排序。如果你想要一个整体上稳定的排序顺序，你也需要处理这个问题。喜欢：

```
ORDER BY lower(trim(vm.value)) COLLATE "C"**, vm.id, m.id**;
```

### 旁白

为什么要存储双引号？似乎是代价高昂的噪音。没有他们你可能会过得更好。如果需要，您可以随时在输出中添加引号。

许多客户端无法在一个结果中多次处理相同的列名。您至少需要一个列别名`id`：`SELECT m.id AS m_id, vm.id AS vm_id ...`. 将说明为什么列的“id”是一种反模式。

# excel - Excel CurrentProject.Path，运行时错误 424

> ID：15162598
> 
> 赞同：3
> 
> 时间：2013-03-01T16:44:27.587
> 
> 标签：excel, vba

我以前从未在 VBA 中为 excel 做过任何事情。当 .accdb 在 C 驱动器中时，我的整个仪表板都在工作，但现在我希望它与 excel 工作簿位于同一文件夹中。

我得到以下底线的“运行时错误'424：需要对象”

```
Dim DatabasePath As String
DatabasePath = CurrentProject.Path & "\SpreadSheetData.accdb" 
```

为什么是这样？谢谢你的帮助

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-01T16:46:16.427

Excel中没有[`CurrentProject`](http://office.microsoft.com/en-us/access-help/HV080201360.aspx)。如果要引用执行代码所在的工作簿，请[`ThisWorkbook`](http://office.microsoft.com/en-us/excel-help/HV080550372.aspx)改用。

# java - Java - ArrayList 默认初始值

> ID：15162600
> 
> 赞同：2
> 
> 时间：2013-03-01T16:44:36.153
> 
> 标签：java, arraylist, integer, default

在 Java 中创建整数类型的数组列表时，默认值是什么？我需要检查一个数组列表是否已满，我要获取数组的大小，然后在最后一个索引处获取值并检查它是否是默认值。

有没有更好的办法？默认值是多少？

希望这是有道理的。干杯

```
int size = a.size();
int last = a.get(size);
if( last == null )
{
    return true;
}else{
    return false;
} 
```

编辑;

是否可以创建一个最大大小的 ArrayList，而您无法阻止它动态扩展？当您创建一个 ArrayList 并使用 size() 时，它会返回实际大小或数组列表中的元素数量吗？这样做以创建最大大小时，默认值是否为空？

```
public boolean isFull()
{
    int size = a.size();
    int last = 0;
    try{
        last = a.get(size-1);
    }catch (Exception e){
    }
    if( last == null )
    {
        return true;
    }else{
        return false;
    }
} 
```

我现在有这个，它看起来怎么样？现在这有意义吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T16:51:01.333

当您声明一个 ArrayList 时，它是空的。它也是一个动态容器，这意味着它会增长，因此您询问它是否“已满”更像是您需要添加到代码中的约束。

所以，如果你想实现你描述的目标。

```
List<Integer> list = new ArrayList<Integer>();
int MAX_ELEMENTS = 5; //Set this to however you want to constrain the datatype

public boolean addElement(Integer value) {
   if (list.size() < MAX_ELEMENTS) {
     list.add(value);
     return true;
   } else {
     return false;
   }
}

public boolean isFull() {
  return (list.size() == MAX_ELEMENTS);
}

public Integer getLast() {
  if (!list.isEmpty())
    return list.get(list.size()-1);
  else
    return null;
} 
```

正如其他人所说，如果您生成具有预设大小的列表，如下所示：

```
List<Integer> list = new ArrayList<Integer>(10); 
```

您将有一个包含 10 个大元素的列表，它们都具有`null`价值。如果你添加额外的元素，列表仍然会超过 10 个元素，除非你像我上面那样限制它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-01T16:48:03.367

如果您实际上没有将`Integer`s 添加到 ArrayList，那么`get()`列表中的任何一个都将返回一个`IndexOutOfBoundsException`.

该`size()`方法返回列表中元素的数量（即您添加了多少），而不是当前容量。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-01T16:46:57.873

当您创建一个 ArrayList 时，在 ArrayList 类中，有一个元素数组。这些元素设置为 null，因为它们不引用 Integer 对象的任何实例。请记住，这与 int 不同。

此外，一个 ArrayList 没有填满。它是动态的，并且会在需要时增加大小。

编辑：响应您关于设置最大大小的编辑，如果您想要一个最大大小，那么我不确定您为什么想要一个数组列表。但是如果你想坚持使用 ArrayList 类，我会创建自己的类，它是 arraylist 的子类，并通过检查覆盖 add 方法以确保 size() 的值不超过固定数量。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-05-28T13:14:40.743

默认情况下，ArrayList 容量为 10。默认情况下，它们都为 null，直到您将元素添加到其中。但是调用 size() 会给你添加的元素数量。它不会给出 10 作为结果（不考虑默认的空值）。这里的扭曲是，如果您将空值添加到列表中，那么它们会在计算 size() 时包含在内。例如，如果您将 3 个有效整数和 2 个空值添加到列表中，则 size() 将返回 5。Eclipse 调试将帮助您发现其容量的动态增加。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-01T17:11:44.143

您是想简单地将列表限制为给定大小，还是要检查它是否大于给定大小？

检查列表是否大于：

```
if (list.size() > limit)
    System.out.println("List too large"); 
```

不可能限制 ArrayList 的大小 - 但是，您可以创建自己的 ArrayList 子类来做到这一点：

```
public class LimitedList<E> extends ArrayList<E> {

     private int limit;

     public LimitedList(int limit) {
         this.limit = limit;
     }

     public boolean add(E e) {
         // only add if the limit is not exceeded
         if (size() < limit)
             super.add(e);
     }

     // overwriting the addAll()-methods is left as an excercise to the reader
} 
```

您只需要决定当尝试添加超出限制允许的更多元素时列表应该做什么。要么忽略元素，要么抛出异常。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-01T16:46:19.260

没有像“满”这样的东西`ArrayList`。该`size()`方法将返回它当前拥有的元素数量。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-01T16:48:40.007

ArrayLists 没有默认值。如果您`initialCapacity`在初始化时为 ArrayList 提供 a，那么您只是在提示底层数组的大小 - 但您实际上无法访问 ArrayList 中的值，直到您自己添加项目。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-03-01T16:49:17.827

任何 List 实现都有一个可以使用的[isEmpty()方法。](http://docs.oracle.com/javase/7/docs/api/java/util/List.html#isEmpty%28%29)

# python - 获取熊猫日期时间索引的先前值

> ID：15162605
> 
> 赞同：26
> 
> 时间：2013-03-01T16:44:48.230
> 
> 标签：python, pandas

我有一个带有日期时间索引的熊猫数据框

```
Date
2013-02-22 00:00:00+00:00    0.280001
2013-02-25 00:00:00+00:00    0.109999
2013-02-26 00:00:00+00:00   -0.150000
2013-02-27 00:00:00+00:00    0.130001
2013-02-28 00:00:00+00:00    0.139999
Name: MOM12 
```

并且想要评估给定日期时间索引的前三个值。

```
date = "2013-02-27 00:00:00+00:00"
df.ix[date] 
```

我搜索了这个，但由于我的索引是我不能做的日期

```
df.ix[int-1] 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-03-01T20:02:24.580

这是一种方法，首先通过以下方式获取索引键的整数位置`get_loc`：

```
In [15]: t = pd.Timestamp("2013-02-27 00:00:00+00:00")

In [16]: df1.index.get_loc(t)
Out[16]: 3 
```

然后您可以使用`iloc`（获取整数位置，或按整数位置切片）：

```
In [17]: loc = df1.index.get_loc(t)

In [18]: df.iloc[loc - 1]
Out[18]: 
Date    2013-02-26 00:00:00
                      -0.15
Name: 2, Dtype: object

In [19]: df1.iloc[slice(max(0, loc-3), min(loc, len(df)))]
        # the min and max feel slightly hacky (!) but needed incase it's within top or bottom 3
Out[19]:                         
Date                    
2013-02-22  0.280001
2013-02-25  0.109999
2013-02-26 -0.150000 
```

请参阅[文档的索引部分](https://pandas.pydata.org/pandas-docs/stable/indexing.html#selection-by-position)。

* * *

*我不太确定你是如何设置 DataFrame 的，但这对我来说不像是日期时间索引。*这是我获得 DataFrame 的方式（带有时间戳索引）：

```
In [11]: df = pd.read_clipboard(sep='\s\s+', header=None, parse_dates=[0], names=['Date', None])

In [12]: df
Out[12]: 
                 Date          
0 2013-02-22 00:00:00  0.280001
1 2013-02-25 00:00:00  0.109999
2 2013-02-26 00:00:00 -0.150000
3 2013-02-27 00:00:00  0.130001
4 2013-02-28 00:00:00  0.139999

In [13]: df1 = df.set_index('Date')

In [14]: df1
Out[14]:                
Date                
2013-02-22  0.280001
2013-02-25  0.109999
2013-02-26 -0.150000
2013-02-27  0.130001
2013-02-28  0.139999 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-05-18T07:51:02.267

你能做到`df.shift().loc[date]`吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-04-02T22:02:33.667

使用 shift 获取上一行的值

```
data=[('2013-02-22 00:00:00+00:00',    0.280001)
,('2013-02-25 00:00:00+00:00',    0.109999)
,('2013-02-26 00:00:00+00:00',   -0.150000)
,('2013-02-27 00:00:00+00:00',    0.130001)
,('2013-02-28 00:00:00+00:00',    0.139999)]
df=pd.DataFrame(data=data,columns=['date','value'])
df['date']=pd.to_datetime(df['date'])

df['p_value']=df.value.shift(1)
df['pp_value']=df.value.shift(2)
df['ppp_value']=df.value.shift(3)
print(df) 
```

输出

```
 date                    value   p_value  pp_value  ppp_value
 0 2013-02-22 00:00:00+00:00  0.280001       NaN       NaN        NaN
 1 2013-02-25 00:00:00+00:00  0.109999  0.280001       NaN        NaN
 2 2013-02-26 00:00:00+00:00 -0.150000  0.109999  0.280001        NaN
 3 2013-02-27 00:00:00+00:00  0.130001 -0.150000  0.109999   0.280001
 4 2013-02-28 00:00:00+00:00  0.139999  0.130001 -0.150000   0.109999 
```

# magento - 如何以按钮形式显示magento中的属性？

> ID：15162608
> 
> 赞同：0
> 
> 时间：2013-03-01T16:44:55.767
> 
> 标签：magento

我想更改 Magento 中属性的样式，例如颜色和大小，以按钮的形式显示在产品页面上。用户可以单击这些按钮，而不是选择下拉菜单之类的选项。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T03:59:05.863

您指的是色板。有几个可用的扩展可以为您完成此任务。

我个人多次成功使用的一款名为 Belvg Color Swatch Pro，售价 59 美元 - [http://store.belvg.com/colors-sizes-and-materials-swatch-pro.html](http://store.belvg.com/colors-sizes-and-materials-swatch-pro.html)

那里有几个免费选项，例如 Gala Color Swatch [。](http://www.magentocommerce.com/magento-connect/gala-color-swatches-free-9787.html)

[在Magento Connect](http://www.magentocommerce.com/magento-connect/)上搜索“色板”会让您找到正确的方向。

# less - 在不安装插件的情况下使用 Gradle 将 LESS 编译成 CSS

> ID：15162611
> 
> 赞同：3
> 
> 时间：2013-03-01T16:45:01.203
> 
> 标签：less, gradle

这似乎是一个奇怪的问题。我想将 LESS 编译成 CSS 而不在我的本地 gradle 中安装插件。有几个 gradle 插件可以将 LESS 编译成 CSS，这很棒，但我想在运行时编译和使用这些插件，而不是事先安装它们。

这可能吗？如果有一个像 CoffeeScript 这样的标准插件，那也没什么大不了的，而且很简单，但对于 LESS 却没有。我对 Gradle 很陌生，所以我不确定如何前进。显而易见的解决方案是血腥安装插件，但考虑到我不能这样做的约束，是否可以在运行时编译/使用它？

*   [https://github.com/koenongena/lesscss-gradle-plugin](https://github.com/koenongena/lesscss-gradle-plugin)
*   [https://github.com/skhome/gradle-less-plugin](https://github.com/skhome/gradle-less-plugin)
*   [https://github.com/msgilligan/gradle-lesscss-plugin](https://github.com/msgilligan/gradle-lesscss-plugin)

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-03-02T03:51:12.853

在大多数情况下，您不会将插件安装到 Gradle 安装中。相反，您将插件的使用声明为`build.gradle`. 在构建运行时，它会解析构建脚本所需的任何插件，加载它们，然后运行构建。您列出的特定插件有点不寻常，因为（据我所知）它们尚未在可公开访问的 Maven 存储库（例如[Maven Central](http://search.maven.org/)或[Bintray](https://bintray.com/)）中发布。快速搜索后，我发现一个似乎在 Maven Central 中：

[https://github.com/obecker/gradle-lesscss-plugin](https://github.com/obecker/gradle-lesscss-plugin)

要使用它，您无需提前安装任何东西。相反，您可以像这样在 build.gradle 中声明它：

```
buildscript {
    repositories {
        mavenCentral()
    }
    dependencies {
        classpath 'de.obqo.gradle:gradle-lesscss-plugin:1.0-1.3.3'
    }
}
apply plugin: 'lesscss' 
```

如果你不想使用插件，你可以很容易地在 Gradle 中编译 LESS 文件，而无需使用任何插件。这是因为[Gradle 插件架构](http://www.gradle.org/docs/current/userguide/custom_plugins.html)构建在与您在构建脚本中使用的完全相同的 DSL 和深度 API 之上。主要区别在于意图之一；插件已以旨在在其他项目中重复使用的方式打包。

最低要求是访问执行 LESS 编译的库，以及使用它的任务声明。[这是一个使用lesscss-java](https://github.com/marceloverdijk/lesscss-java)的快速示例。它只编译一个 LESS 文件，但它应该很容易根据您的要求进行扩展。

构建.gradle：

```
buildscript {
    repositories {
        mavenCentral()
    }
    dependencies {
        classpath "org.lesscss:lesscss:1.3.0"
    }
}

task lessCompile << {
    def compiler = new org.lesscss.LessCompiler()
    compiler.compile(file("some.less"), file("some.css"))
} 
```

少一些：

```
@mainColor: black;
body {
    background-color: @mainColor;
} 
```

运行后`gradle lessCompile`，结果为some.css：

```
body {
  background-color: #000000;
} 
```

# arrays - 如何在匹配数组中的值后删除一行？

> ID：15162615
> 
> 赞同：0
> 
> 时间：2013-03-01T16:45:18.190
> 
> 标签：arrays, google-apps-script, google-sheets

我正在使用一个数组来处理电子表格数据，并对其进行操作。在这种情况下，我在列中查找 true 的值，然后想要删除该行。这是我所拥有的：

```
 for ( r = 1 ; r < Array1.length; r++) { 
    if(Array1[r][33]== true) { 
      calcSheet.deleteRow(Array1[r])};
  } 
```

我看到了问题，但不知道解决方案： firstArray[r] 将整行作为数组返回，而不是行号。我怎样才能得到行号？它在躲避我。

更新：这是完整的代码。再次感谢谢尔盖。
您会注意到 Serge 指出了可能发生的电子表格和数组匹配问题。下面的代码也解决了这个问题；这就是所有那些 r 正在做的事情。

```
 var rr = 0

 for ( r = 1 ; r < firstArray.length; r++) { // iterate the first col of masterSheet
  if(firstArray[r][33]== true) { 
    var  rrr= rr + r
    calcSheet.deleteRow(rrr +1);
    rr--
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T17:11:11.230

与该数组行对应的工作表行是`r+1`您的数组是否真的完整，即从第 1 行开始（我想第一行包含一些标题，这就是您从数组中的 1 进行迭代的原因）。

但是，如果您删除该行，则会产生另一个副作用：该数组将不再是工作表的确切镜像（每次删除一行时，它都会大 1 行）。

有很多方法可以解决此问题，如果您需要一些提示，请告诉我们。

# asp.net - WebScriptServiceHostFactory 与 WebServiceHostFactory

> ID：15162621
> 
> 赞同：3
> 
> 时间：2013-03-01T16:45:23.880
> 
> 标签：asp.net, wcf

有人可以解释两者之间的区别，何时使用 WebScriptServiceHostFactory 与 WebServiceHostFactory？我知道他们在使用时会在端点上设置某些默认行为，所以我不必这样做。否则差异，是否只是 WebScriptServiceHostFactory 默认为 JSON 消息，而 WebServiceHostFactory 默认为 XML（soap 消息）？使用 WebGet 和 WebInvoke，两者都可以工作，还是不允许？我也可以使用 UriTemplates 来构建 REST 服务吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T18:56:49.980

`WebScriptServiceHostFactory`几乎专门用于定义将由 ASP.NET AJAX 框架使用的服务（它为 JS 客户端提供了一个可用于调用服务的“代理”）。如果您正在执行通用 WCF Web (REST) 编程，则应坚持使用`WebServiceHostFactory`.

一些区别：

*   如您所述，默认响应格式不同（WScriptSHF 中的 JSON，WSHF 中的 XML）
*   WSHF 完全支持 UriTemplates，而不是 WScriptSHF
*   WebGet 和 WebInvoke 都适用，但在 WScriptSHF 上，唯一支持的正文样式是`WrappedRequest`
*   对由 WScriptSHF 创建的端点的调用的响应*包装*在 JSON 对象中；如果对操作的响应（以 JSON 格式）为`[1,2,3]`，则端点将其返回为`{"d":[1,2,3]}`.

可能还有其他的，但基本上，指导是仅当您使用 ASP.NET AJAX 框架（带有`<asp:ScriptManager>`）和 WSHF 时才使用 WScriptSHF。

# php - PHP 块中的大块 HTML

> ID：15162622
> 
> 赞同：0
> 
> 时间：2013-03-01T16:45:27.833
> 
> 标签：php, html

我正在使用 PHP 通过查询传递使我的页面更加动态，但是我有一大块 HTML 代码需要在内部包含动态内容，但我不知道如何在不打印每个语句的情况下执行此操作：

HTML中的一部分：

```
<div class="review">
<p>
<img src="http://www.cs.aub.edu.lb/hsafa/cmps278/hw2/rotten.gif" alt="Rotten" />
<q>Expect no intelligence or subtlety here, but if you're willing to put up with the        sheer ridiculousness of it all, you might enjoy wallowing in Bekmambetov's shameless   exhibition of narrative lunacy and technical fireworks in this movie.</q>
</p>
</div>
<div class="personal">
<p>
<img src="http://www.cs.aub.edu.lb/hsafa/cmps278/hw2/critic.gif" alt="Critic" />
Frank Swietek <br />
<span class="italic">One Guy's Opinion</span>
</p>
</div> 
```

上面的代码是针对单个评论的，但是我可能已经计算了任意数量的评论，但我也在更改所有评论的图像、引号和文本。有没有办法在不打印所有标签的情况下包含所有标签？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-16T23:39:31.617

常规方法是“关闭 php 标签”，然后在 HTML 之后重新打开它：

```
// php code here 
?><html code goes here><?php
// php code here 
```

但是，还有其他几种方法。一种是使用包含。

```
// php code here
include('template.file.php');
// php code here 
```

在你的 html 代码中，你使用的是这样的：

```
<htmltag><?= $php_value ?></htmltag> 
```

您甚至可以在函数中使用 include。

或者，您可以使用像 Handlebars、Mustache 或 Twig 这样的模板系统。或者你可以继续构建大字符串，这就是我所做的。我设置模板，将它们与数据合并以生成字符串，然后发出字符串。我从使用模板系统中获得的主要好处是，我可以保存字符串以在最后发出它们，因此，能够在发送输出之前更改 HTTP 标头。如果我使用了 include() 或代码块，代码会立即发出，并且我无法修改 HTTP 标头值。

此外，通过构建字符串，我可以将它们保存到文件中并使用这些预先计算的块来提高站点的速度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T16:47:38.830

```
<?php
//PHP code section
$wolrd = 'world';
?>
We are back in HTML
Hello <?= $world /* and some PHP echoing with a 'short tag' on same line with HTML*/ ?> 
```

推荐阅读：

*   [http://www.smarty.net/](http://www.smarty.net/)（我不是粉丝，但你应该知道）
*   [MVC - 模型 - 视图 - 控制器](http://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T16:47:47.907

您应该只使用 PHP 来打印您的动态内容

`<img src="<?php echo $image_url; ?>" alt="<?php echo $image_alt; ?>" />`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-01T16:47:51.683

您可以随时关闭 PHP 并重新启动它

```
<?php
$string = "hi";
?>
<p>Lot's of HTML</p>
<?php
echo $string;
?> 
```

# sql - 根据日期时间将列更新为整数

> ID：15162623
> 
> 赞同：1
> 
> 时间：2013-03-01T16:45:28.387
> 
> 标签：sql, sql-server-2008

我正在尝试对 sql 表进行大规模更新，但我不理解逻辑等价物。我想要用伪代码做的是：

```
UPDATE mytable
SET mycolumn = (pull down the datetime from mycolumn2\. if the year of that datetime is not equal to 2013, then mycolumn = 24\. if the year is 2013, then mycolumn = 24 - number of months in that datetime) 
```

我只是真的不确定从哪里开始在 SQL 中实现这种逻辑。有人对我有任何提示或方向吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T16:47:09.263

```
UPDATE myTable
SET mycolumn = CASE WHEN DATEPART(year, mycolumn2) = 2013 
                        THEN 24 - DATEPART(month, mycolumn2) 
                    ELSE 24 
               END 
```

根据需要调整 RDBMS 的日期语法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T16:47:35.223

```
UPDATE mytable
SET mycolumn = CASE WHEN YEAR(mycolumn2) <> 2013 
                    THEN 24
                    WHEN YEAR(mycolumn2) = 2013 
                    THEN 24 - mycolumn
                END 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T16:58:57.367

使用*`Simple Case`*语句：

```
update mytable
set mycolumn = 24 - case year(mycolumn2) 
                        when 2013 then  month(mycolumn2)
                        else 0 
                    end 
```

# c# - 使用 WCF net.tcp 绑定时出现随机超时错误

> ID：15162626
> 
> 赞同：1
> 
> 时间：2013-03-01T16:45:46.463
> 
> 标签：c#, wcf, nettcpbinding, basichttpbinding

给出一个总体概述 - 我有一个具有多个绑定的 WCF 服务。一个是 HTTPS 绑定，另一个是 net.tcp。该服务托管在 IIS 上。HTTPS 绑定似乎工作正常，但 TCP 绑定出现随机超时错误。

发送给 XXX 的此请求操作在配置的超时 (00:05:00) 内未收到回复。分配给此操作的时间可能是较长超时的一部分。这可能是因为服务仍在处理操作，或者因为服务无法发送回复消息。请考虑增加操作超时（通过将通道/代理转换为 IContextChannel 并设置 OperationTimeout 属性）并确保服务能够连接到客户端

我可以清楚地看到问题是超时问题，但它并不总是发生。唯一让我感到困惑的是，我的任何操作都不需要长达 5:00 分钟才能完成。我实际上可以在屏幕上看到我想看到的结果，这让我假设我的过程已经结束。但是当我开始下一个进程时，我得到了这个超时，也就是当我意识到我的“服务处于完全状态”并返回时我发现了这个错误。

有人可以告诉我发生了什么吗？我认为该错误与 TCP 协议的工作方式有关，因为我在 HTTPS 中没有找到它。Nither 对服务的相同调用总是会产生此错误。这是非常随机的。

我使用 TCP 通过二进制编码的 XML 格式来提高性能，但是我质疑所有这些随机问题是否真的获得了任何优势。在我的所有调用中，HTTPS 似乎平均慢了近一秒，这在 TCP 的性能方面被认为是一个很好的收益，但是有这样的问题，真的值得走 TCP 路由吗？对这两种协议进行一些比较对我来说也是一个很好的见解。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T17:41:17.520

关于比较。TCP 是提供可靠数据传输的传输层协议。HTTPS 基于 tcp 并且有一些数据开销。我认为没有理由因为协议而导致操作完全不同。您尝试发送什么类型的数据？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T15:33:16.277

在对网络进行了一些测试和监控后，我发现问题更多是网络问题，连接波动导致 TCP 通道中断。我还不能 100% 确定这个问题，但这是我能得出的最有希望的结论。如果有人有任何其他意见，请随时分享，以便我提高服务可靠性。

# java - 将数字移动到数组的末尾

> ID：15162627
> 
> 赞同：-4
> 
> 时间：2013-03-01T16:45:46.617
> 
> 标签：java, arrays

下面的代码我已将数组的中点设置为 5，但现在我想将中点移动到最后，当它移动到最后时，其他数字将向左移动以填补空白。没有阵列列表大声。

```
 int mid = length/2;

    for (int i = array.length-1 ; i> mid; i--) { 
        array[i] = array[i-1]; 
    } 
    array[mid] = 5; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T16:57:50.653

像这样的东西？

```
int mid = array.length/2;

for (int i = mid; i < array.length-1; i++)
{
    int temp = array[i];
    array[i] = array[i+1];
    array[i+1] = temp;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T17:01:53.610

```
public static void main(String[] args) {
    int array[] = new int[] { 1, 2, 3, 4, 5, 6, 7, 8, 9 };
    int mid = array.length / 2;
    array[mid] = 5;

    // my code starts here...

    int aux = mid; // aux isn't necessary if you can lost mid value
    int backup = array[mid]; // save the middle value

    for (; aux < array.length - 1; aux++) { //starting at middle until the end of array
        // current pos receives the next value;
        array[aux] = array[aux + 1];
    }

    array[array.length - 1] = backup; // restore the middle value at the end;
} 
```

该代码将 [1, 2, 3, 4, 5, 6, 7, 8, 9] 转换为 [1, 2, 3, 4, 6, 7, 8, 9, 5]。是你想要的吗？

# android - 正确的带有片段的android向上导航

> ID：15162638
> 
> 赞同：0
> 
> 时间：2013-03-01T16:46:11.200
> 
> 标签：android, android-fragments

我正在开发一个具有经典列表内容模式的应用程序，在左侧显示菜单选项列表，在中心显示内容。不同的菜单选项会将内容与显示新信息的相应片段交换。

我正在努力实施正确的向上导航：

```
|---------------------------------------|
|< Frag. B |                B1  B2  B3  |
|----------|----------------------------|
|Fragment A|                            |
[Fragment B]                            |
|Fragment C|        Fragment B.2        |
|Fragment D|                            |
|Fragment E|                            |
|----------|----------------------------| 
```

在上图中，用户已导航到片段 B.2。他首先从菜单中选择了 Fragment B，然后他按下了一个按钮，将他“进一步”带入 Fragment B，到 Fragment B.2。

如果用户现在按下 HOME（在 home 中）按钮，他将返回到 Fragment B。这是按预期工作的。

但是，在 Fragment B.2 内部，ActionBar 中有一个按钮，可将用户带到 Fragment E.2：

```
|---------------------------------------|
|< Frag. E |                E1  E2  E3  |
|----------|----------------------------|
|Fragment A|                            |
|Fragment B|                            |
|Fragment C|        Fragment E.2        |
|Fragment D|                            |
[Fragment E]                            |
|----------|----------------------------| 
```

当用户在 Fragment E.2 中到达这里时，后堆栈中的前一个 Fragment 是 Fragment B.2。我当前的实现只是`getActivity().onBackPressed()`在按下 HOME 按钮时调用，用户将简单地返回 Fragment B.2。这对用户来说没有意义，所以我想实现一个系统，现在将用户带到片段 E（即使片段 B.2 是后堆栈中的前一个片段）。

我的直接想法是在每个片段中引用应该作为后堆栈中的前一个片段的片段的引用。片段 B.2 将引用片段 B，片段 E.2 将引用片段 E，等等。当按下 HOME 按钮时，我将启动作为前一个片段引用的片段。我对这个解决方案进行了辩论，但很快意识到这在后台堆栈方面可能会变得相当复杂，更不用说它听起来很笨拙。

有没有一种聪明的方法来实现这种行为？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T06:36:38.610

简短的回答：你的设计是错误的 模拟主页键上的后按是疯狂的，将用户带到他从未去过的屏幕只是疯狂！

长答案：如果你想实现这样的疯狂：因为你不能在后面的堆栈中插入一个片段，我会在选择的 ActionBar 项目上打开片段 E，然后自动启动片段 E.2？

其他解决方案：如果片段 E.2 从 ActionBar 打开，您也可以从片段 E.2 的 onPause() 启动片段 E。

# mysql - Mysql更新值通配符

> ID：15162640
> 
> 赞同：2
> 
> 时间：2013-03-01T16:46:16.800
> 
> 标签：mysql

我想要做的是搜索整个数据库（小）并用另一个替换一个 url。

IE：在 %url1% 的任何地方找到 url1 并用 url2 更新它。url 两边的数据必须保持完整。

（更新 * WHERE wildcard_value = %url1% with url2）

我已经尝试了我所知道的一切来尝试更新它，它需要通过 phpmyadmin 运行。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T17:08:41.483

如果你不知道你的数据在哪一列，那么现在就跑吧。

如果您确实知道数据在哪里，那么这很简单：

```
UPDATE yourtable
SET url = REPLACE(url, 'www.oldsite.com', 'www.newsite.com')
WHERE url LIKE '%www.oldsite.com%'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T17:11:45.093

mysqldump，在文本文件上搜索和替换并重新导入怎么样？

*   `mysqldump -u username -ppassword database_name > dump.sql`
*   在您选择的文本编辑器中搜索和替换
*   `mysql -u username -ppassword database_name < dump.sql`

这可以通过 phpmyadmin 完成。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T17:12:00.710

这个怎么样：

```
UPDATE [table]
SET [column] = REPLACE([column], '/foo/', '/bar/') 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-01T17:04:47.147

尝试这样的事情

```
update mytable set url=(select replace(url, 'someurl', 'another url') from mytable) 
```

# html - css html 鼠标悬停

> ID：15162645
> 
> 赞同：4
> 
> 时间：2013-03-01T16:46:21.800
> 
> 标签：html, css

下面是我的代码，目前当我将鼠标悬停在“关于我们”上时，下拉菜单下方的所有内容都会打开；如何更改 css 使其仅在鼠标悬停时悬停，这意味着，当我将鼠标悬停在“团队”上时，我应该看到它下方的菜单。

还有我如何调整宽度，使其向左移动更多。

同样，当下拉菜单的长度较长时，它会隐藏在我的内容下方，我希望下拉菜单位于页面主体上方，而不是隐藏。

提前谢谢大家。

```
<style>
ul {
  font-family: Arial, Verdana;
font-size: 14px;
  margin: 0;
  padding: 0;
  list-style: none;
}
ul li {
  display: block;
  position: relative;
  float: left;
}
li ul { display: none; }
ul li a {
  display: block;
  text-decoration: none;
  color: #ffffff;
  border-top: 1px solid #ffffff;
  padding: 5px 15px 5px 15px;
  background: #000061;
  margin-left: 1px;
  white-space: nowrap;
}
ul li a:hover { background: #617F8A; }
li:hover ul {
  display: block;
  position: absolute;
}
ul li:hover li {
  float: none;
  font-size: 11px;
}
li:hover a { background: #617F8A; }
li:hover li a:hover { background: #95A9B1; }
</style>

<body>
<ul id="menu">
  <li><a href=""><b>Home</b></a></li>
  <li><a href=""><b>About Us</b></a>
    <ul>
    <li><a href="">Team</a>
    <ul>
        <li><a href="">Profile</a></li>
        <li><a href="">Board</a></li>
    </ul>
    </li>
    </ul>
  </li>
<ul>
</body> 
```

JSFiddle：http: [//jsfiddle.net/LWEry/](http://jsfiddle.net/LWEry/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T16:52:35.243

像这样：

```
ul {
  font-family: Arial, Verdana;
font-size: 14px;
  margin: 0;
  padding: 0;
  list-style: none;
}
ul li {
  display: block;
  position: relative;
  float: left;
}
li ul { display: none; }
ul li a {
  display: block;
  text-decoration: none;
  color: #ffffff;
  border-top: 1px solid #ffffff;
  padding: 5px 15px 5px 15px;
  background: #000061;
  margin-left: 1px;
  white-space: nowrap;
}
ul li a:hover { background: #617F8A; }
li:hover > ul {
  display: block;
  position: absolute;
  width: 100%;
}
ul li:hover li {
  float: none;
  font-size: 11px;
}
li:hover a { background: #617F8A; }
li:hover li a:hover { background: #95A9B1; }

.sub-menu
 {
    position: absolute;
    top: 0;
    left: 100%;
 } 
```

[http://jsfiddle.net/3xWc​​u/2/](http://jsfiddle.net/3xWcu/2/)

我改变了一个选择器。

从

```
li:hover ul 
```

到

```
li:hover > ul 
```

在上面编辑了我的小提琴。在 ul 中添加了一个子菜单类，其中包含 Profile 和 Board li 标签：

```
 <ul class="sub-menu">
    <li><a href="">Profile</a></li>
    <li><a href="">Board</a></li>
 </ul> 
```

并在上面添加了一些 CSS。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T16:49:39.117

你的意思是这样吗？[http://jsfiddle.net/3xWc​​u/](http://jsfiddle.net/3xWcu/)

```
<style>
ul {
  font-family: Arial, Verdana;
font-size: 14px;
  margin: 0;
  padding: 0;
  list-style: none;
}
ul li {
  display: block;
  position: relative;
  float: left;
}
li ul { display: none; }
ul li a {
  display: block;
  text-decoration: none;
  color: #ffffff;
  border-top: 1px solid #ffffff;
  padding: 5px 15px 5px 15px;
  background: #000061;
  margin-left: 1px;
  white-space: nowrap;
}
ul li a:hover { background: #617F8A; }
li:hover ul {
  display: block;
  position: absolute;
  width: 100%;
}
ul li:hover li {
  float: none;
  font-size: 11px;
}
li:hover a { background: #617F8A; }
li:hover li a:hover { background: #95A9B1; }
</style>

<body>
<ul id="menu">
  <li><a href=""><b>Home</b></a></li>
  <li><a href=""><b>About Us</b></a>
    <ul>
    <li><a href="">Team</a>
    <ul>
        <li><a href="">Profile</a></li>
        <li><a href="">Board</a></li>
    </ul>
    </li>
    </ul>
  </li>
<ul>
</body> 
```

# regex - 正则表达式：懒惰，但不够懒惰

> ID：15162650
> 
> 赞同：1
> 
> 时间：2013-03-01T16:46:37.747
> 
> 标签：regex

我希望有一些正则表达式专家可以提供帮助。我一直在寻找几个小时，但找不到答案。

这是输入字符串：

```
parameters:x,y,123,z;parameters:a,b,456,c; 
```

难题是检索最后一个参数部分（a，b，456，c），我知道它以“parameters：”开头并以“，c”结尾；

所以我尝试了以下正则表达式：

```
parameters:(.+?,c); 
```

这不匹配预期的最后一部分，而是从第一个参数开始。这是比赛组：

```
x,y,123,z;parameters:a,b,456,c 
```

所以 ？因为做一个懒惰的比赛还不够懒惰，因为它比我想要的更多。

有什么建议么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T16:50:16.267

正则表达式完全按照您的定义进行：它匹配“参数”，然后延迟到它找到的第一个“c”。

试试这个：

```
parameters:([^;]+,c); 
```

`[^;]`是一个否定字符类，它匹配除“;”之外的每个字符。看起来 ; 不可能发生在这样一个群体内。

[在 Regexr 上](http://regexr.com?33vea)查看

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-01T16:49:42.510

最简单的方法是禁止`:`和`;`匹配：

```
parameters:([^:;]+,c); 
```

或者您可以更明确并禁止`parameters`匹配两次：

```
parameters:((?:(?!parameters).)+,c); 
```

您的正则表达式不够懒惰的原因是正则表达式匹配从最早可能的位置开始，并 `.+?`尽可能多地匹配（从`parameters:`字符串中的第一个开始，正是您找到它匹配的字符串）。

# ruby-on-rails-3 - 格式数字格式十进制

> ID：15162652
> 
> 赞同：0
> 
> 时间：2013-03-01T16:46:40.117
> 
> 标签：ruby-on-rails-3, formtastic

我正在努力

```
<%= f.input :provvigioni, :as => :number, :input_html => {:value =>      number_with_precision(f.object.provvigioni, precision: 2)} %> 
```

为什么编辑有滚动条？？？？？？我使用 formstatic 和 formtastic 引导程序，谢谢。埃西斯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-07T06:30:14.963

利用

```
:as => :string 
```

它仍将接受十进制值

# ruby-on-rails-3 - 视图包含数据库中的所有数据

> ID：15162659
> 
> 赞同：0
> 
> 时间：2013-03-01T16:46:56.297
> 
> 标签：ruby-on-rails-3

我正在学习 Rails 3，我正在生成一个用户，一个用户有很多帖子。但是当我创建一些帖子时，数据库中的所有数据在 user/view/show.html.erb 中显示如下：

> Post id：2，title：“hello post”，description：“hello post”，user_id：2，created_at：“2013-03-01 16:18:07”，updated_at：“2013-03-01 16:18： 07"

我在 show.html.erb 中的代码如下： `<%= @user.posts.each do |post| %> <p> <%= post.title %> </p> <p> <%= post.description%> </p> <% end %>`

如何隐藏数据库中的所有帖子数据？谢谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T18:28:34.300

问题是您使用的是`<%= %>`嵌入而不是`<% %>`循环（`<%= @user.posts.each do |post| %>`）。循环返回 Post 对象的数组，然后您的使用`<%=`告诉 erb 将该值粘贴到页面中。

您想`<% @user.posts.each do |post| %>`改用（不带`=`）。这意味着执行代码，但不显示它的结果。

# javascript - 如何将输入名称转换为 JavaScript 数组

> ID：15162663
> 
> 赞同：1
> 
> 时间：2013-03-01T16:47:03.163
> 
> 标签：javascript, html

我有一个与将 html 输入名称转换为 javascript 对象有关的问题。例如我有一个输入：

```
<input type="checkbox" name="product[1]">
<input type="checkbox" name="product[2]"> 
```

我有javascript代码：

```
var data = {};
$('input').each(function(){
    // need to do something like 
    data[$(this).attr('name')] = $(this).attr('checked');
}) 
```

我希望得到这样的数据对象；

```
data = {
    product: {
        1: 'checked',
        2: 'checked'
    }
} 
```

这可能不使用正则表达式吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T16:51:53.230

用文字值替换你的变量，你得到这个：

```
data["product[1]"] = true; 
```

方括号没有任何意义，因为它们在字符串中，所以你不会得到任何结果。

有办法解决这个问题。你*可以*使用评估：`eval("data."+this.name+" = "+(this.checked?"true":"false"));`

但是，由于`eval`最好避免，请尝试以下操作：

```
var m = this.name.match(/(.*)\[(\d+)\]/);
data[m[0]][m[1]] = this.checked; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T16:55:17.060

是的，一般来说这是可能的。您可以执行以下操作：

```
var noregexp = $(this).attr('name').split("[");
if (noregexp.length==2) {
    //should be
    var the_name = noregexp[0];
    var the_index = noregexp[1].substr(0,noregexp[1].length-1); //this will get the index with removed ]
} 
```

这是我从心里想出来的。这不是一个漂亮的解决方案，而是一个没有正则表达式的解决方案，如您所愿。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T16:57:44.510

您可以使用以下方式获得所需的数据结构：

```
var data = {product: []};
$('input').each(function(){
    data.product[$(this).attr('name').match(/product\[([\d]*)\]/)[1]] = $(this).prop('checked');
})
console.log(data); 
```

检查这个**[演示](http://jsfiddle.net/AFMbX/)**

# c - 传递参数使指针从整数

> ID：15162665
> 
> 赞同：7
> 
> 时间：2013-03-01T16:47:04.947
> 
> 标签：c, arrays, pointers, casting, integer

我找不到我的问题。不断给我这些错误：

```
"c:2:5: note: expected 'int *' but argument is of type 'int'"
"c:28:1: warning: passing argument 1 of 'CountEvenNumbers' makes pointer from
   integer without a cast [enabled by default]" 
```

这是代码：

```
1 #include <stdio.h>
2 int CountEvenNumbers(int numbers[], int length);
3 int main(void)
4 {
5 int length;
6 int X;int Z; int Y; int W;
7 X=0;Y=0;Z=0;W=0;
8 printf("Enter list length\n");
9 scanf("%d",&length);
10 int numbers[length];
11 
12 if (length<=0)
13 .   {printf("sorry too low of a value\n");
14 .   .   return 0;}
15 else
16 .   {
17 .   printf("Now, enter %d integers\n",length);
18 .   for (X=0;X<length;X++)
19 .   .   {scanf("%d",&Y);//X is position in array, Y is value.
20 .   .   numbers[X]=Y;
21 .   .   }
22 .   printf("The list reads in as follows:\n");
23 .   for (W=0;W<length;W++)
24 .   .   {Z=numbers[W];
25 .   .   printf("%d ",Z);}
26 .   printf("\n");
27 .   }
28 CountEvenNumbers( numbers[length] , length );
29 return 0;
30 }
31 
32 int CountEvenNumbers(int numbers[], int length)
33 {
34 .   int odd_count;int even_count;int P;int Q;
35 .   Q=0; odd_count=0;even_count=0;
36 .   for (P=0;P<length;P++)
37 .   .   if (numbers[Q]==0)
38 .   .   .   {even_count++;
39 .   .   .   Q++;}
40 .   .   else if ((numbers[Q]%2)!=0)
41 .   .   .   {odd_count++;
42 .   .   .   Q++;}
43 .   .   else
44 .   .   .   {even_count++;
45 .   .   .   Q++;}
46 .   printf("There are %d even numbers in the series\n",even_count);
47 .   return 0;
48 } 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-01T17:09:27.953

你的问题的答案是交换这个：

```
CountEvenNumbers(numbers[length], length); 
```

为了这

```
CountEvenNumbers(numbers, length); 
```

但是，如果您继续编码，您可能会发现一项非常宝贵的技能是破译警告/错误消息：

> “c:2:5: 注意：预期的 'int *' 但参数是 'int' 类型”
> “c:28:1: 警告：传递 'CountEvenNumbers' 的参数 1 使指针从整数不进行强制转换 [默认启用]"

那是什么意思？它声明在第 28 行 ( `CountEvenNumbers( numbers[length] , length );` ) 它希望您对参数 1 进行强制转换，这意味着您向它传递了一些它没有预料到的东西。所以你知道第一个论点有问题。

这里的诀窍是另一行：`expected 'int *' but argument is of type 'int'`它说“我想要一个指向整数的指针，但你只给了我一个整数”。这就是你如何知道你传递了错误的类型。

所以你应该问自己的是，参数 1 是什么类型？你知道如果你想访问数组中的一个元素，你需要使用`[]`'s，（你在代码的第 20 和 25 行这样做了），所以通过传递`numbers[length]`给你的函数，你试图传递一个元素¹而不是像它期望的那样一个完整的数组。

另一半是`expected 'int *'`，为什么你的函数会期望得到一个指向 int 的指针？那是因为在 C 语言中，当您传递一个 (type) 数组时，它[会衰减](https://stackoverflow.com/questions/1461432/what-is-array-decaying)为指向 (type) 的指针。

^(1 当然 numbers[length] 并不是你数组***中的真正元素，它会溢出它。***)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-01T16:50:05.170

在第 28 行，您尝试在数字的索引“长度”处传递整数。你应该只传递数字本身，所以像`CountEvenNumbers(numbers, length);`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-01T17:18:41.083

尝试这个。

```
#include <stdio.h>
#include <stdlib.h>

int CountEvenNumbers(int numbers[], int length);
int main(void)
{
    int length;
    int X;int Z; int Y; int W;
    X=0;Y=0;Z=0;W=0;
    printf("Enter list length\n");
    scanf("%d",&length);

    int *numbers = (int*) calloc(length, sizeof(int)); //***************

    if (length<=0)
    {printf("sorry too low of a value\n");
    return 0;}
    else
    {
        printf("Now, enter %d integers\n",length);
        for (X=0;X<length;X++)
        {scanf("%d",&Y);//X is position in array, Y is value.
        numbers[X]=Y;
        }
        printf("The list reads in as follows:\n");
        for (W=0;W<length;W++)
        {Z=numbers[W];
        printf("%d ",Z);}
        printf("\n");
    }
    CountEvenNumbers( numbers , length ); //**************
    free (numbers);
    return 0;
}

int CountEvenNumbers(int numbers[], int length)
{
    int odd_count;int even_count;int P;int Q;
    Q=0; odd_count=0;even_count=0;
    for (P=0;P<length;P++)
        if (numbers[Q]==0)
        {even_count++;
    Q++;}
        else if ((numbers[Q]%2)!=0)
        {odd_count++;
    Q++;}
        else
        {even_count++;
        Q++;}
        printf("There are %d even numbers in the series\n",even_count);
        return 0;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-01T16:49:46.163

阅读 C 教程，真的。`array[index]`下标/索引数组，因此它产生`index`数组中的第 th 个元素。如果要传递要对其自身进行操作的数组（嗯，而不是指向其第一个元素的指针），则只需写下其名称：

```
CountEvenNumbers(numbers, length); 
```

# mysql - 管理 MySQL 数据库表开发/生产周期

> ID：15162668
> 
> 赞同：0
> 
> 时间：2013-03-01T16:47:21.597
> 
> 标签：mysql, merge, development-environment

我想知道管理网站 MySQL 表数据的最佳实践是什么，因为数据被添加到表中，无论是在实时网站上还是在开发阶段并行，此外，在开发过程中的结构表也​​发生变化。

一个场景可能如下，让我们有一个带有字段的 MySQL InnoDB 表：

```
id, INT()
name, VARCHAR(255)
votes, INT() 
```

该网站上线，表格中不断填满来自该网站的数据。同时，开发团队正在开发网站的下一个版本，并改变表格的结构并添加一些数据。假设新的表结构现在是：

```
id, INT()
name, VARCHAR(255)
quality, DOUBLE() 
```

此外，请记住，我们还必须合并来自现场网站和开发版本的两个数据集。

你怎么做这些事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T17:08:23.693

您可以使用 mysql workbench sync 同步两个数据库。

您也可以选择更新的方向

[http://dev.mysql.com/doc/workbench/en/wb-database-synchronization.html](http://dev.mysql.com/doc/workbench/en/wb-database-synchronization.html)

# sql - 优化Union All SQL

> ID：15162670
> 
> 赞同：1
> 
> 时间：2013-03-01T16:47:26.597
> 
> 标签：sql, oracle, optimization

您能帮我优化以下 Union All Query 吗？知道从哪里开始吗？详细信息：SQL 计划显示

| 7 | 表访问完全 | DELAY_DATE | 17533 | 171K| 25 (0)| 00:00:01 |
| 8 | 表访问完全 | 空缺 | 25879 | 454K| 298 (1)| 00:00:04 |

| 16 | 合并加入笛卡尔| | 17533 | 273K| 28 (4)| 00:00:01 |

这些是潜在的问题吗？

```
 SELECT    delay_reason_desc, delay_start_date, delay_end_date, delay_reason_code
    FROM        delay_date dd
    LEFT JOIN   delay_reason dr
    ON          dr.delay_reason_id=dd.delay_reason_id
    LEFT JOIN   delay_interval di
    ON          di.delay_interval_id=dr.delay_interval_id
    LEFT JOIN   vacancy v
    ON          v.vacancy_id=dd.vacancy_id
    WHERE       dr.delay_reason_active_ind='Y'
    --AND         dd.vacancy_id=p_vacancy_id
    AND         delay_start_date >= vacancy_fpps_received_date
    AND         delay_end_date <= vacancy_open_date
    AND         delay_interval_code=1

UNION ALL
    SELECT    delay_reason_desc, delay_start_date, delay_end_date, delay_reason_code
    FROM        delay_date dd
    LEFT JOIN   delay_reason dr
    ON          dr.delay_reason_id=dd.delay_reason_id
    LEFT JOIN   delay_interval di
    ON          di.delay_interval_id=dr.delay_interval_id
    LEFT JOIN   vacancy v
    ON          v.vacancy_id=dd.vacancy_id
    WHERE       dr.delay_reason_active_ind='Y'
    --AND         dd.vacancy_id=p_vacancy_id
    AND         delay_start_date >= vacancy_open_date
    AND         delay_end_date <= vacancy_closed_date
    AND         delay_interval_code=2 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-01T16:50:36.010

这个怎么样 - 可能快两倍：

```
SELECT    delay_reason_desc, delay_start_date, delay_end_date, delay_reason_code
    FROM        delay_date dd
    LEFT JOIN   delay_reason dr
    ON          dr.delay_reason_id=dd.delay_reason_id
    LEFT JOIN   delay_interval di
    ON          di.delay_interval_id=dr.delay_interval_id
    LEFT JOIN   vacancy v
    ON          v.vacancy_id=dd.vacancy_id
    WHERE       dr.delay_reason_active_ind='Y'

    AND ((delay_start_date >= vacancy_fpps_received_date
         AND delay_end_date <= vacancy_open_date
         AND delay_interval_code=1)
    OR  (delay_start_date >= vacancy_open_date
          AND delay_end_date <= vacancy_closed_date
          AND delay_interval_code=2)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T16:54:30.277

```
create index delay_reason on delay_reason_id
create index delay_interval on delay_interval_id
create index vacancy on vacancy_id

create index delay_date on delay_reason_active_ind, delay_interval_code 
```

然后调用@Hogan 建议的 SQL。

# python - 需要一个字符缓冲区对象

> ID：15162673
> 
> 赞同：4
> 
> 时间：2013-03-01T16:47:30.557
> 
> 标签：python, django

这篇[文章](https://stackoverflow.com/questions/15137356/for-loop-in-views)中的模型。在 admin.py 中：

```
class GroupsAdmin(admin.ModelAdmin):

    fieldsets = [
        (None,               {'fields': ['first_year', 'many other']}),

    ] 
```

所以，在这个管理部分，我可以添加`first_year`特殊系列的汽车。我按“+”，然后打开一个新窗口 - 我可以在其中添加年份。我添加“2011”，按“保存”并查看错误：

```
TypeError: expected a character buffer object. 
```

这很奇怪，因为它在上周有效。它是如何修复的？如果我去`first_yearAdmin`，并添加年份，它可以正常工作。

谢谢。

编辑。追溯：

```
Environment:

Request Method: POST
Request URL: http://127.0.0.1:8000/admin/cars/first_year/add/?_popup=1

Django Version: 1.5
Python Version: 2.7.3
Installed Applications:
('django.contrib.auth',
 'django.contrib.contenttypes',
 'django.contrib.sessions',
 'django.contrib.sites',
 'django.contrib.messages',
 'django.contrib.staticfiles',
 'django.contrib.sitemaps',
 'cars',
 'django_evolution',
 'django.contrib.admin')
Installed Middleware:
('django.middleware.common.CommonMiddleware',
 'django.contrib.sessions.middleware.SessionMiddleware',
 'django.middleware.csrf.CsrfViewMiddleware',
 'django.contrib.auth.middleware.AuthenticationMiddleware',
 'django.contrib.messages.middleware.MessageMiddleware')

Traceback:
File "/usr/local/lib/python2.7/dist-packages/django/core/handlers/base.py" in get_response
  115\.                         response = callback(request, *callback_args, **callback_kwargs)
File "/usr/local/lib/python2.7/dist-packages/django/contrib/admin/options.py" in wrapper
  372\.                 return self.admin_site.admin_view(view)(*args, **kwargs)
File "/usr/local/lib/python2.7/dist-packages/django/utils/decorators.py" in _wrapped_view
  91\.                     response = view_func(request, *args, **kwargs)
File "/usr/local/lib/python2.7/dist-packages/django/views/decorators/cache.py" in _wrapped_view_func
  89\.         response = view_func(request, *args, **kwargs)
File "/usr/local/lib/python2.7/dist-packages/django/contrib/admin/sites.py" in inner
  202\.             return view(request, *args, **kwargs)
File "/usr/local/lib/python2.7/dist-packages/django/utils/decorators.py" in _wrapper
  25\.             return bound_func(*args, **kwargs)
File "/usr/local/lib/python2.7/dist-packages/django/utils/decorators.py" in _wrapped_view
  91\.                     response = view_func(request, *args, **kwargs)
File "/usr/local/lib/python2.7/dist-packages/django/utils/decorators.py" in bound_func
  21\.                 return func(self, *args2, **kwargs2)
File "/usr/local/lib/python2.7/dist-packages/django/db/transaction.py" in inner
  223\.                 return func(*args, **kwargs)
File "/usr/local/lib/python2.7/dist-packages/django/contrib/admin/options.py" in add_view
  1010\.                 return self.response_add(request, new_object)
File "/usr/local/lib/python2.7/dist-packages/django/contrib/admin/options.py" in response_add
  833\.                 (escape(pk_value), escapejs(obj)))
File "/usr/local/lib/python2.7/dist-packages/django/utils/functional.py" in wrapper
  194\.             return func(*args, **kwargs)
File "/usr/local/lib/python2.7/dist-packages/django/utils/html.py" in escapejs
  65\.     return mark_safe(force_text(value).translate(_js_escapes))

Exception Type: TypeError at /admin/cars/first_year/add/
Exception Value: expected a character buffer object 
```

**楷模**

```
class Mark(models.Model):
    many_many_char_fields
    def __unicode__(self):
        return self.name

class First_Year(models.Model):
    year = models.IntegerField()
    def __unicode__(self):
        return str(self.year)

class Groups(models.Model):
        many_other_fields
    mark = models.ForeignKey(Mark, related_name='groups')
    last_update = models.DateTimeField()
    first_year = models.ForeignKey(First_Year, related_name='first_year')
    def __unicode__(self):
        return self.name
    def altered_date(self, year):
        altered_year = int(year)-int(self.first_year.year)
        return altered_year 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-09-10T12:50:17.047

实际上，如果您想将其保留为整数，则无需将`year`字段转换为 Charfield，因为在许多您确实需要数字的情况下这是不可能的。这个 1.5 错误的解决方法是让`__unicode__`函数返回 unicode 字符串：

```
class First_Year(models.Model):
    year = models.IntegerField()

    def __unicode__(self):
        return unicode(self.year) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-02T07:12:59.653

```
class First_Year(models.Model):
    year = models.CharField(max_length=4)
    def __unicode__(self):
        return self.year 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T16:54:27.310

你忘了这个

```
class GroupsAdmin(admin.ModelAdmin):
    model = Groups 
```

# css - IE8 上的 @font-face datauri 是否支持 .eot 字体？

> ID：15162675
> 
> 赞同：3
> 
> 时间：2013-03-01T16:47:33.433
> 
> 标签：css, fonts, internet-explorer-8, webfonts, eot

IE8 上是否通过 datauri 支持 .eot 字体`@font-face`？
IE8 上的 datauris 是否仅支持图像？

我知道 32KB 的限制。我的 .eot 字体的 base64 表示不超过此限制。

我的 CSS 声明是这样的：

```
@font-face {
    font-family: 'MyFont';
    src: url(data:font/opentype;base64,B1QAAB9TAAACAAI.....);
    font-weight: normal;
    font-style: normal;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T20:26:27.613

数据 URI 对此不应该有任何问题...

...它应该可以工作，我有我的 .eot 网络字体，可以在所有浏览器（甚至 IE7）中使用它...但我也使用 WOFF/TTF/SVG 来支持其余的浏览器

```
@font-face {font-family: 'AllyourBase';
    src: url('/fonts/allyourbase.eot');
    src: url('/fonts/allyourbase.eot?#iefix') format('embedded-opentype'),
     url('/fonts/allyourbase.woff') format('woff'),
     url('/fonts/allyourbase.ttf') format('truetype'),
     url('/fonts/allyourbase.svg?#allyourbase') format('svg');
    font-weight: normal;
    font-style: normal;
} 
```

确保 IIS 在您的本地/Web 服务器上具有正确的 mime 类型（例如：用于***.eot文件******的 application/vnd.ms-fontobject***）。

 *最后....我怀疑 Datauri 是原因，但为了安全起见，请尝试不使用 data/base64，看看它是否有任何作用*

# python - LookupError：嵌入python下的未知编码'big5'

> ID：15162685
> 
> 赞同：2
> 
> 时间：2013-03-01T16:47:54.787
> 
> 标签：python, c, r

我正在构建一个 R 扩展，其中包含一个嵌入式 python。

现在一切顺利，除了python找不到我需要的编码。当我做一些涉及“big5”的事情时，它会不断抛出 LookupError。但是，如果我构建一个独立的 c++ 应用程序，python 解释器会找到编码并停止抛出错误。

`test.cpp`对于 c 中的普通独立示例：

```
#include <Python.h>

int main(int argc, char* argv[]) {
  Py_SetProgramName("test");  /* optional but recommended */
    Py_Initialize();
    PyRun_SimpleString(
            "import codecs\n"
            "f = codecs.open('big5_encoded_file', encoding='big5', mode='r')"
            );
    Py_Finalize();
    return 0;
} 
```

`testr.cpp`对于 R 扩展：

```
#include <R.h>
#include <Rdefines.h>
#include <Python.h>

extern "C" SEXP testpy();

SEXP testpy() {
  Py_SetProgramName("test");  /* optional but recommended */
    Py_Initialize();
    PyRun_SimpleString(
            "import codecs\n"
            "f = codecs.open('big5_encoded_file', encoding='big5', mode='r')"
            );
    Py_Finalize();
    return R_NilValue;
} 
```

`Makefile`Ubuntu 12.10 上的一个：

```
all: test testr.so

test: test.cpp
  g++ test.cpp -o test -I/usr/include/python2.7 -lpython2.7

testr.so: testr.cpp
    R CMD SHLIB testr.cpp 
```

`./test`运行正常，但`Rscript -e "dyn.load('testr.so');.Call('testpy')"`产生“LookupError：未知编码：big5 ”

谢谢

- 编辑 -

要构建`testr.so`，请设置：

```
export PKG_CXXFLAGS=-I/usr/include/python2.7
export PKG_LIBS=-lpython2.7 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T16:33:09.587

我注意到这是一个链接问题。

我试图`import encodings.big5`在嵌入式python中，但发生了错误`undefined reference`。[http://bugs.python.org/issue4434](http://bugs.python.org/issue4434)中的解决方案对我有用：

> 在`PyInitialize()`我打电话之前`dlopen("libpython2.7.so", RTLD_LAZY | RTLD_GLOBAL);`

# kerberos - Greenplum 是否支持其节点之间的 Kerberos 身份验证？

> ID：15162693
> 
> 赞同：0
> 
> 时间：2013-03-01T16:48:06.223
> 
> 标签：kerberos, greenplum

我需要“kerberize”我们的 Greenplum 集群。其中一个方面是我应该对 GP 主机和它的分段主机之间的接口进行 kerberize 处理。我无法确定这是否受支持。

我已经看到了 posgresql.conf 文件中的参数（krb_server_keyfile 和 krb_srvname）并尝试设置这些参数，但它似乎不起作用（Greenplum 仍然有效，它只是没有显示连接是 kerberized）。

我用 hadoop 做到了这一点，它非常简单，但是，再一次，无法弄清楚如何在 GP 中做到这一点，或者是否有可能。有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T19:24:06.040

有关如何部署 Kerberos 的说明，请参阅[Greenplum HD Manager 1.2 安装和用户指南。](http://www.greenplum.com/sites/default/files/gp_gphd_1_2_0_3_gphdmanager_iug_ga.pdf)该文档与 Hadoop 相关，但应该用于一般的 Greenplum 安装。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T10:51:28.277

所以......答案，据我所知是这样的：

首先，为了澄清，有两个地方我需要“kerberize”GP。主/从连接中的第一个。在我了解到这种通信是基于 ssh 的之后，事实证明这很容易。我刚刚用 Kerberos SSH 切换了 rsa/dsa 生成的无密码授权。我不确定这是否真的或多或少安全，但仍然是一个要求。第二个是锁定管理/jdbc 访问。这应该很容易，毕竟 GP 是基于 Postgres 的，我过去已经用 Kerberos 保护了 Postgres。不幸的是，GP 基于 Postgres 8.2。这是在将 Kerberos 的 GSS 支持添加到 Postgres 之前，我无法让它工作。我不肯定它可以。也许 GP 会很快升级到 8.4（至少），我可以试试。

# dotfuscator - Dotfuscator 命令行

> ID：15162696
> 
> 赞同：0
> 
> 时间：2013-03-01T16:48:19.217
> 
> 标签：dotfuscator

我尝试使用这个命令来混淆：

```
dotfuscator -in:"C:\path_to_assembly\*.dll" 
```

但它只启动 Dotfuscator GUI 并通过掩码加载 dll。并且不要建造它们。如何通过命令行运行构建？

PS 我使用[这个文档](http://www.preemptive.com/images/stories/dotfuscator_documentation/Dotfuscator/Command_Line_Option_Summary.html "本文档")。也许它已经过时了。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T14:38:28.190

处理这个问题的最好方法是提供一个配置文件，如下所示：

```
dotfuscator [options] [config_file] 
```

根据您的示例，您正在传递 DLL 列表，但没有向 Dotfuscator 提供有关如何处理它们的任何指令。使用 Dotfuscator 的 UI 为您的应用程序创建配置文件，然后在命令行中传递该文件。

# php - Linux 上的奇怪行为 (php/mysql)

> ID：15162698
> 
> 赞同：0
> 
> 时间：2013-03-01T16:48:26.170
> 
> 标签：php, apache, session, joomla2.5

我们的 linux 服务器出现了奇怪的行为。以下是一些症状：

1) PHP 在处理脚本时使用旧信息：例如：我今天加载了网站，它运行的是我们的 Joomla 2.5.9 模板的移动版本，而不是普通模板。我查看了访问日志，在我加载网站前两分钟，一部 iPhone 访问了该网站。因此，出于某种原因，PHP 代码“认为”我的访问权限仍然是 iPhone。这是访问日志中的一个片段。 `74.45.141.88 - - [01/Mar/2013:07:39:24 -0800] "GET / HTTP/1.1" 200 9771 "https://m.facebook.com" "Mozilla/5.0 (iPhone; CPU iPhone OS 6_1 like Mac OS X) AppleWebKit/536.26 (KHTML, like Gecko) Mobile/10B141 [FBAN/FBIOS;FBAV/5.5;FBBV/123337;FBDV/iPhone2,1;FBMD/iPhone;FBSN/iPhone OS;FBSV/6.1;FBSS/1; FBCR/AT&T;FBID/phone;FBLC/en_US;FBOP/0]"`

```
... 
```

`63.224.42.234 - - [01/Mar/2013:07:43:45 -0800] "GET / HTTP/1.1" 200 9771 "-" "Mozilla/5.0 (Windows NT 6.1; WOW64; rv:19.0) Gecko/20100101 Firefox/19.0"`

2) 网站上的链接有时会在 Joomla 中以不同的方式生成：有时是“ww.sitename.com”或只是“sitename.com”，而应该是“www.sitename.com”。

3) 当我对站点进行配置更改时（在 Joomla 管理中），它并不总是立即发生，尽管它应该。例如，当使用用户界面单击发布某些内容时，在我取消发布之后它仍然会发布很长一段时间。在这样的问题中，我尝试重新启动 Apache 和 MySQL，但没有帮助。我不得不等到一些更新。最终它会更新。

4) php 会话不能始终如一地工作。我们有从会话变量生成验证码的代码。代码有时会失败，导致验证码无法操作。

以上都是完全不一致的。有时它会假发，有时则不会。另外，请注意该网站在我们的 dev.sitename.com 上运行良好。我们甚至尝试将 Apache 网络服务器配置从我们的 dev.sitename.com 切换到我们的 sitename.com。问题仍然存在。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T16:53:56.800

在我的情况下，我在 magento CMS 上遇到了类似的问题，问题是 magento 使用的缓存。禁用缓存功能已经解决了这个问题。

# java - 计算异常并以相同的方法记录它

> ID：15162706
> 
> 赞同：0
> 
> 时间：2013-03-01T16:48:51.350
> 
> 标签：java, exception, try-catch

我正在关注发生`count`的数量，`exceptions`并记录这些`exceptions`。所以我所做的是，我创建了一种方法`addException`来计算所有异常。

`addException`方法将接受两个参数，`one is the String`和 other`boolean flag`表示我们是否要因为任何异常而终止程序。意思是，如果该标志为真，那么只要有任何异常，我都需要终止程序。

因此，如果您查看我的下面的`catch`块，我有`addException`用于计算异常的方法调用，并且在该方法调用下面我也在记录异常。

```
catch (ClassNotFoundException e) {
    addException(e.getCause() != null ? e.getCause().toString() : e.toString(), Read.flagTerminate);
    LOG.error("Threw a ClassNotFoundException in " + getClass().getSimpleName(), e);
} catch (SQLException e) {
    addException(e.getCause() != null ? e.getCause().toString() : e.toString(), Read.flagTerminate);
    //DAMN! I'm not....
    LOG.error("Threw a SQLException while making connection to database in " + getClass().getSimpleName(), e);
}

/**
 * A simple method that will add the count of exceptions and name of
 * exception to a map
 * 
 * @param cause
 * @param flagTerminate 
 */
private static void addException(String cause, boolean flagTerminate) {
    AtomicInteger count = exceptionMap.get(cause);
    if (count == null) {
        count = new AtomicInteger();
        AtomicInteger curCount = exceptionMap.putIfAbsent(cause, count);
        if (curCount != null) {
            count = curCount;
        }
    }
    count.incrementAndGet();

    if(flagTerminate) {
        System.exit(1);
    }
} 
```

**问题陈述：-**

现在我正在寻找的是-

有没有更清洁的方法来做同样的事情？意思是现在我正在计算方法中的异常，然后在 catch 块内的下一行打印出异常。

是否可以用同一种方法来做这两件事`addException`？如果标志为真以终止程序，则也使用适当的日志记录终止程序。

重写`addException method`来做到这一点的最佳方法是什么？谢谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T17:10:04.550

> 有没有更清洁的方法来做同样的事情？意思是现在我正在计算方法中的异常，然后在 catch 块内的下一行打印出异常。
> 
> 是否可以在同一个 addException 方法中完成这两件事？如果标志为真以终止程序，则也使用适当的日志记录终止程序。

`addException`是的，如果需要，您可以传递异常本身和标志，而不是将 String 原因传递给方法。甚至可以在`addException`方法内部进行完整的捕获，例如：

```
catch (ClassNotFoundException|SQLException e) {
    addException(e, Read.flagTerminate);
} 
```

或者

```
catch (Exception e) {
    addException(e, Read.flagTerminate);
} 
```

甚至：

```
catch (ClassNotFoundException e) {
    addException(e, Read.flagTerminate, "Threw a ClassNotFoundException in "); //An the addException method logs the message passed.    
} catch (SQLException e) {
    addException(e, Read.flagTerminate, "Threw a SQLException while making connection to database in ");
} 
```

您可以在类中有一个映射，其中存储了哪些异常应该停止执行，哪些不应该停止执行，这样您只需要一个`addException(Exception e)`方法。

您甚至可以创建一个属性文件，其中包含每种异常类型的本地化消息并默认记录该消息。

您还可以查看@perception 建议的链接：

[计算 catch 块中发生的异常数量](https://stackoverflow.com/questions/14783266/counting-the-number-of-exceptions-happening-in-catch-block)

# java - 边框布局循环。JPanel/摇摆

> ID：15162708
> 
> 赞同：0
> 
> 时间：2013-03-01T16:48:54.270
> 
> 标签：java, swing, loops, jpanel, border-layout

我的循环和“BorderLayout”有问题。当我使用驱动程序编译和运行它时，似乎 add.west(etc) 被正在进行的 add.west 覆盖。我只剩下“南”面板中的第 9 个组件，“东”和“西”完全是空的。如果我将“for (int i=0;i<8;i++){”更改为：“for (int i=0;i<2;i++){”我只得到所需 9 中的第二个元素“西”面板。谁能告诉我为什么。原谅我的无知。我是初学者。

谢谢你。乔

这大概是它的样子：

```
(WEST)                                           (EAST)

btn0, label0, label0                            btn4, label4, label4
btn1, label1, label1                            btn5, label5, label5
btn2, label2, label2                            btn6, label6, label6
btn3, label3, label3                            btn7, label7, label7

                           (SOUTH)
                    btn8, label8, label8 
```

//代码从这里开始：

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;
import java.text.NumberFormat;

public class CoinPanel extends JPanel{
  private JButton buttons[] = new JButton[9];
  private JLabel multiplySign[] = new JLabel[9];
  private JLabel coinCount[] = new JLabel[9];
  String [] names= {"1c", "2c", "5c", "10c", "20c", "50c", "€1", "€2", "Reset"};
  int [] values= {1, 2, 5, 10, 20, 50, 100, 200, 0};

  public CoinPanel(){
    for (int i=0; i<8; i++){
      buttons[i] = new JButton(names[i]);
      buttons[i].addActionListener(new BtnListener());
      coinCount[i] = new JLabel("0", JLabel.CENTER);
      coinCount[i].setBorder(BorderFactory.createLineBorder(Color.black));
      multiplySign[i] = new JLabel ("x", JLabel.CENTER); 
```

//从这里布局的东西：

```
 setLayout (new BorderLayout());
      JPanel west= new JPanel();
      west.setBackground(Color.BLACK);
      JPanel east= new JPanel();
      east.setBackground(Color.RED);
      JPanel south= new JPanel();
      south.setBackground(Color.BLUE);

      if(i<4){
        west.add (buttons[i]);
        west.add (multiplySign[i]);
        west.add (coinCount[i]);
      }
      else if(i<8){
        east.add (buttons[i]);
        east.add (multiplySign[i]);
        east.add (coinCount[i]);
      } 
      else{
        multiplySign[i].setText("TOTAL");
        south.add (multiplySign[i]);
        south.add (coinCount[i]);
        south.add (buttons[i]);
      }
      add(west, BorderLayout.WEST);     
      add(east, BorderLayout.EAST);
      add(south, BorderLayout.SOUTH);
     }

    setPreferredSize (new Dimension(450,300));
  } 
```

//到这里^^^

```
private class BtnListener implements ActionListener{
    public void actionPerformed (ActionEvent event){
      String [] text = new String[9];
      int [] intArray = new int [9];
      double sum =0;
      for (int i=0; i<(intArray.length-1); i++){
        if(event.getSource() == buttons[i]){
          text[i] = coinCount[i].getText();
          intArray[i]=Integer.parseInt(text[i]);
          intArray[i] = ((intArray[i]) +1);
          coinCount[i].setText(intArray[i] + "");
       }    
       if(event.getSource() == buttons[8]){
         coinCount[i].setText("0");
       }
       sum += (Integer.parseInt(coinCount[i].getText())*values[i]);
       NumberFormat nf = NumberFormat.getCurrencyInstance();
       coinCount[8].setText(nf.format(sum/100)+"");
      }
    }
  }
} 
```

//这是驱动程序：

```
import javax.swing.*;

public class CoinSorter{
   public static void main(String[] args){ 
      JFrame frame = new JFrame ("Coin Counter Example");
      frame.setDefaultCloseOperation (JFrame.EXIT_ON_CLOSE);
      CoinPanel panel = new CoinPanel();
      frame.getContentPane().add(panel);
      frame.pack();
      frame.setVisible(true);
   }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T19:57:43.517

> 我不仅向三个位置添加了一个面板吗？

不，你的循环中有太多代码。

1) 每次执行循环时都会创建 3 个新面板。

*   您的 3 个西、东和南面板的创建应在循环开始之前完成。

2) 然后在循环结束时，将这些面板中的每一个添加到主面板中。

*   这三个面板应添加到循环外的主面板中。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-01T16:59:38.413

您一次只能在哪个位置拥有 1 个组件。通过将另一个组件添加到同一位置（例如 BorderLayout.WEST），您可以删除前一个组件。这是 BorderLayout 类的代码，清楚地表明每次添加 WEST 组件时，成员变量`west`都会获得新值而旧值会丢失：

```
if ("Center".equals(name)) {
    center = comp;
} else if ("North".equals(name)) {
    north = comp;
} else if ("South".equals(name)) {
    south = comp;
} else if ("East".equals(name)) {
    east = comp;
} else if ("West".equals(name)) {
    west = comp;
} else if (BEFORE_FIRST_LINE.equals(name)) {
    firstLine = comp;
} else if (AFTER_LAST_LINE.equals(name)) {
    lastLine = comp;
} else if (BEFORE_LINE_BEGINS.equals(name)) {
    firstItem = comp;
} else if (AFTER_LINE_ENDS.equals(name)) {
    lastItem = comp;
} else {
    throw new IllegalArgumentException("cannot add to layout: unknown constraint: " + name);
}
  }
} 
```

其他展示位置也是如此。

# html - 更改我的代码的 CSS 背景

> ID：15162710
> 
> 赞同：0
> 
> 时间：2013-03-01T16:49:05.137
> 
> 标签：html, css, background

我不擅长css，所以请尝试帮助我

我有这个 CSS 代码

```
#mo-stats-w1 {
    background: url("http://i48.tinypic.com/108dbix.png") 0px 0px repeat-x;
    /*height: 143px;*/
    border-radius: 5px;
    -moz-border-radius: 5px;
    -webkit-border-radius: 5px;
    margin: 10px 0px 0px 0px;
    padding-bottom: 10px;
    background-color: #3EC4CD;
}
#mo-stats-w2 {
    padding: 12px 0px 0px 15px;
}

#mo-stats-w1 ul {
    padding: 0px 0px 0px 0px;
    margin: 0px 0px 1px 0px;
    height: 59px;
}
#mo-stats-w1 ul li {
    display: block;
    list-style: none;
    padding: 1px;/*0px 0px 0px 0px;*/
    margin: 0px 1px 0px 0px;
    width: 174px;
    height: 59px;
    float: left;
}
ul#mo-stats-r1 li { background: url("http://i50.tinypic.com/23j0bcg.png") 0px 0px no-repeat; }
ul#mo-stats-r2 li { background: url("http://i50.tinypic.com/23j0bcg.png") 0px -59px no-repeat; }

#mo-stats-w1 ul li strong {
    font-size: 24px;
    height: 22px;
    font-family: Arial, "Nimbus Sans L", "FreeSans";
    font-weight: bold;
    color: #1774C2;
    text-shadow: 1px 1px 1px white;
    display: block;
    padding: 0px 0px 0px 0px;
    margin: 10px 0px 0px 11px;
}

#mo-stats-w1 ul li span {
    font-size: 13px;
    font-weight: bold;
    color: #3e3e3e;
    display: block;
    padding: 0px 0px 0px 0px;
    margin: 0px 0px 0px 11px;
} 
```

和这个html代码

```
 <div id="mo-stats-w1">

        <div id="mo-stats-w2">

            <ul id="mo-stats-r2">

                <li><strong>Status</strong></li>
                <li><strong>100</strong> <span>Points</span></li>
                <li><strong>30</strong> <span>Pending Points</span></li>
                <li><strong>0</strong> <span>Direct Referrals</span></li>

                <li><strong>Total</strong></li>
                    <li><strong>2</strong> <span>Links</span></li>
                    <li><strong>114</strong> <span>Views</span></li>
                    <li><strong>7</strong> <span>Unlocked Views</span></li>

            </ul>
        </div>

    </div> 
```

所以布局将是

![在此处输入图像描述](../Images/cccb7c16f0702e86dea5cc4808e796e3.png)

将“Status”和“Total”的背景更改为#4EC772，背景悬停#7DD798，两个单词的颜色为#FFFFFF

变成这样

![在此处输入图像描述](../Images/e0c9ff50eb371ab264e02c1978a2bb71.png)

请问我该怎么做？

jsfiddle：http: [//jsfiddle.net/WwY2v/](http://jsfiddle.net/WwY2v/)

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T16:56:48.357

只需将一个类添加到所需的元素，例如：

```
<li class='highlight'><strong>Status</strong></li>
...
...
<li class='highlight'><strong>Total</strong></li> 
```

并使用以下CSS：

```
.highlight {
   color:#FFFFFF; /* normal text color */
   background-color:#4EC772; /* normal bg color */
}
.highlight:hover, .highlight:focus {
   color:#FFFFFF; /* hover text color */
   background-color:#7DD798; /* hover bg color */
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T16:57:35.737

您需要使用`nth-child()`伪类来定位这两个，并对除了在 . 之后指定元素之外`<li>`执行相同的操作。`color: #fff;``<strong>`

更新小提琴：http: [//jsfiddle.net/WwY2v/2/](http://jsfiddle.net/WwY2v/2/)

这是我添加的：

```
#mo-stats-r2 li:nth-child(4n + 1):hover {
   background: #4EC772;
}

#mo-stats-r2 li:nth-child(4n + 1) strong:hover {
   color: white;
} 
```

# vba - 访问 BuildingBlockEntries 集合的成员时，对象变量或 With Block 变量未设置错误

> ID：15162712
> 
> 赞同：0
> 
> 时间：2013-03-01T16:49:10.903
> 
> 标签：vba, object, iteration, ms-word

我正在尝试`BuildingBlockEntries`通过 Microsoft Word 2007 中的宏访问模板集合的成员。由于它是一个集合，我首先认为`For Each`循环是最好的方法：

```
 For Each bBlock In NormalTemplate.BuildingBlockEntries
        MessageBox.Show (bBlock.Name)
    Next bBlock 
```

但是，此尝试通过错误：`Object doesn't support property or method`. [所以我尝试了这里](http://social.msdn.microsoft.com/forums/en-US/vsto/thread/202d85a2-9583-4e55-b50e-9f98d773a319)建议的这种方法：

```
Templates.LoadBuildingBlocks   
Dim iBB As Integer
iBB = NormalTemplate.BuildingBlockEntries.Count()
Dim bb As Word.BuildingBlock
Dim i As Integer
Dim objCounter As Object

If iBB > 0 Then

  For i = 1 To iBB
    objCounter = i
    bb = NormalTemplate.BuildingBlockEntries.Item(objCounter)
    MessageBox.Show (bb.Name)
  Next

End If 
```

但是，这会导致标题中显示的错误：`Object variable or With Block variable not set`.

我试过只使用一个整数变量作为索引，`i`特别是，但现在可用。我怎样才能达到预期的效果？我的尝试有什么问题？

感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T18:39:39.260

对于您的第二个问题，答案是您需要使用`Set`，就像`bb`一个对象一样：

```
Set bb = NormalTemplate.BuildingBlockEntries.Item(objCounter) 
```

有关 Set 的更多信息，请查看这个[SO question](https://stackoverflow.com/q/349613/293078)。

对于您的 For/Next 循环，尚不清楚您如何声明`bBlock`. 我想它应该是这样的：

```
Dim bBlock as BuildingBlock 
```

也许该`For`行应该引用`BuildingBlocks`而不是`BuildingBlockEntries`：

```
For Each bBlock In NormalTemplate.BuildingBlocks 
```

不过我不确定，因为我只是在查看 Intellisense 中弹出的内容。

# wcf - 在 WCF 中的 System.ServiceModel.Channels.Message 中定位操作的参数

> ID：15162713
> 
> 赞同：1
> 
> 时间：2013-03-01T16:49:11.753
> 
> 标签：wcf, soap, operationcontract

假设我们有以下服务合同：

```
[ServiceContract]
public interface IPing
{
    [OperationContract]
    string Ping(string parameter1, string parameter2);
} 
```

我想知道，如何在 System.ServiceModel.Channels.Message 创建的服务器端找到特定的参数值，例如 parameter1 的值。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T18:44:00.287

在操作参数和对象`IDispatchMessageFormatter`之间进行转换是的任务。`Message`通常消息是使用 XML 正文创建的，参数是 XML 元素，但这只是一种可能的实现（格式化程序完全忽略消息并分配它认为适合操作参数的任何值是完全有效的）。

[您可以在http://blogs.msdn.com/b/carlosfigueira/archive/2011/05/03/wcf-extensibility-message-formatters.aspx](http://blogs.msdn.com/b/carlosfigueira/archive/2011/05/03/wcf-extensibility-message-formatters.aspx)的博客文章中了解有关消息格式化程序的更多信息。

# java - 我需要帮助数组将用户输入分配给数组，并执行循环重复

> ID：15162717
> 
> 赞同：1
> 
> 时间：2013-03-01T16:49:34.707
> 
> 标签：java, arrays, for-loop, constants, do-while

我的代码有一些问题，这是该程序的总体目标。

> 您的一位教授听说了您的新兴编程专业知识，并要求您编写一个可用于帮助他们评分的 SINGLE 程序。教授给出了三门 50 分的考试和一次 100 分的期末考试。您的程序将提示用户输入学生的姓名，输入为 Firstname Lastname（即 Bob Smith）、学生的 3 次考试成绩和 1 次期末考试成绩（全部为整数）。班级规模因学期而异，但限制为 100 人（声明为常数）。
> 
> 在进行任何计算或显示任何输出之前，请阅读所有学生的信息。确认 3 次考试成绩在 0-50 分之间，并且在输入时确保期末考试成绩在 0-100 分之间。将最小值和最大值声明为常数，以便根据需要轻松更新它们。如果无效，则显示错误消息并允许用户重新输入该无效分数。读入所有学生信息后，以 LASTNAME、FIRSTNAME（全部大写）的格式显示每个学生的姓名、学生的考试百分比（所有考试的总和加上可能的期末/总数）到小数点后 1 位和学生的期末成绩。

这就是我所拥有的：

```
import java.util.*;
import java.text.*;

public class Proj4 {
public static void main(String[] args){
Scanner s= new Scanner(System.in);
String input;
String again = "y";
final int MAX_STUDENTS = 100;
final int MIN_EXAM = 0;
final int MAX_EXAM = 50;
final int MIN_FINAL = 0;
final int MAX_FINAL = 100;

String[] names = new String[MAX_STUDENTS];
int [] exams = new int[MAX_STUDENTS * 4];
int student = 1;

do
{
        System.out.print("PLease enter the name of student " + student + ": " );
        for (int k = 0; k < 1; k++) {
            names[k] = s.nextLine().toUpperCase();
        }
        for ( int i = 0; i < 4; i++){
            if(i==3){
                System.out.print("Please enter score for Final Exam: ");
                exams[i] = s.nextInt();
            }
            else{
            System.out.print("Please enter score for Exam " + (i+1) + ": ");
            exams[i] = s.nextInt(); 

                if((exams[0]<MIN_EXAM||exams[0]>MAX_EXAM)||(exams[1]<MIN_EXAM||exams[1]>MAX_EXAM)||(exams[2]<MIN_EXAM||exams[2]>MAX_EXAM)){
                    System.out.println("Invalid enter 0-50 only...");
                    System.out.print("Please re-enter score: ");
                    exams[i] = s.nextInt();
                }
                else if(exams[3]<MIN_FINAL||exams[3]>MAX_FINAL){
                    System.out.println("Invalid enter 0-100 only...");
                    System.out.print("Please re-enter score: ");
                    exams[i] = s.nextInt();
                }
            }
        }
        System.out.print("do you wish to enter another? (y or n) ");
        again = s.next();
        if(again!="y")
            student++;
}while (again.equalsIgnoreCase ("y"));

System.out.println("***Class Results***");
System.out.println(names[1] + "," + names[0] + "   " + "Exam Percentage: "+ ((exams[0]+exams[1]+exams[2]+exams[3])/(MAX_EXAM*3+MAX_FINAL)));

}
} 
```

我遇到的问题是：

*   弄清楚如何分配用户输入的测试分数而不仅仅是第一个学生，我相信我只为一个学生设置了正确的分数，但是当我转到第二个学生时它遇到了问题。
*   由于某种原因，我无法弄清楚这条线

    ```
    System.out.print("do you wish to enter another? (y or n) ");
    again = s.next(); 
    ```

    不允许我输入任何东西，不是 y 不是 n 不是任何东西，所以我的程序有效地到此结束，这对我来说没有意义，因为我以前完全这样做过并且它已经工作了。

*   除此之外，如果您可以通过我的代码看到任何其他问题，指出它们将非常有帮助。

谢谢

编辑-

更改为后我遇到的新问题

```
if(!again.equalsIgnoreCase("y"))
            student++;
}while (again.equalsIgnoreCase ("y")); 
```

它让我现在可以输入内容，但是在我输入 y 之后，它会将下一行打印为

请输入学生 1 的姓名： 请输入考试 1 的分数：

我不知道为什么或需要更改什么来修复它，有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T16:51:56.833

```
`if(again!="y")` is the culprit here 
```

您应该使用 equals() 方法来检查字符串是否相等。

`if(!again.equals("y"))`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T16:54:52.770

如果您使用`==`or`!=`运算符比较 Java 中的字符串，那么您实际上并没有比较值。相反，您正在测试两个 Strings 是否相同*Object*。

[这篇文章很好地解释了字符串比较。](https://stackoverflow.com/questions/513832/how-do-i-compare-strings-in-java)

做你想做的事，改变`if (again != "y")`为`if(! (again.equalsIgnoreCase("y")) )`

**编辑**

我相信您的新问题源于`for`您在循环中执行的第一个`do`循环。每次您在末尾键入“y”时，`do/while`您都将执行整个

`for (int k = 0; k < 1; k++) {`

再次循环。这就是为什么在你输入“y”之后你会看到`Please enter the name of student 1: Please enter score for Exam 1:`

对您的新问题的“解决方案”是使其外部`for`封闭内部，为每个学生循环进行 4 次考试，通常称为“双循环”或“嵌套循环”。

也就是说，您随后会遇到将所有学生的所有考试都放在一个数组中的问题。

我认为现在是坐下来认真思考程序设计的时候了。如果您使用`Student`对象来代表学生并保存他们的考试成绩，IMO 会容易得多。然后你可以创建一个`Student`s 数组，而不是你现在拥有的两个不同的数组。

以下是一些“入门”步骤（不一定是完整列表）：

1.  创建一个`Student`包含学生名字和姓氏变量的类，以及一个保存`Student`考试成绩的数组
2.  在您的主类中创建一个来保存您将要创建 `ArrayList`的所有新对象。`Student`
3.  做你的`do/while`循环。在循环开始时创建一个新`Student`对象。然后询问`Student`姓名和考试成绩（请注意，如果您知道只有 4 个考试成绩，您不必在那里做任何额外的逻辑。您可以简单地使用 for 循环询问 4 个考试成绩，或者如果你想要一次全部。如果分数数量不定，你将不得不做某种检查）
4.  `Student`将您创建的新添加`ArrayList`到`Student`s 中。
5.  一旦该人选择“n”，循环`ArrayList`并打印每个`Student`！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T17:05:55.083

您的 for (int k = 0; k < 1; k++) 循环将只执行一次（对于一名学生），因为您将其设置为仅在 k < 1 时执行，这只会发生一次。只要将 k 增加到 1，循环就会停止。我会将其更改为 for (int k = 0; k < MAX_STUDENTS; k++) 以确保它会循环播放，直到达到允许的最大学生人数。

# ruby-on-rails - 使用 --format doc 保持 rspec 约定

> ID：15162720
> 
> 赞同：1
> 
> 时间：2013-03-01T16:49:40.283
> 
> 标签：ruby-on-rails, ruby, rspec

[Betterspecs](http://betterspecs.org/#subject)建议使用类似的东西：

```
subject { assigns('message') }
it { should match /it was born in Billville/ } 
```

作为良好的做法。但如果我想以 doc 格式 ( `rspec -f doc`) 运行 rspec，我会收到：

```
When you call a matcher in an example without a String, like this:    
  specify { object.should matcher }    
or this:    
  it { should matcher }    
RSpec expects the matcher to have a #description method. You should either
add a String to the example this matcher is being used in, or give it a
description method. Then you won't have to suffer this lengthy warning again. 
```

所以这

```
it "some desc" do 
  should match /it was born in Billville/ 
end 
```

不会提出那个烦人的信息，但看起来很丑。

关于如何保持 rspec 约定和代码干净的任何想法，并且仍然有一些漂亮的输出（比如 with `-f doc`）？

rspec v.2.13.0

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-01T20:11:29.390

作为 RSpec 维护者，betterspecs.org 上列出了很多我不同意的东西。几个月前，我就该项目的 github 问题发表了这样的评论，但遗憾的是，我认为我的任何担忧都没有得到解决:(。

无论如何，我认为当 doc 输出与您想要的匹配时，可以使用单行语法，但通常情况并非如此。通常，单行语法的文档输出过于具体，例如，它以文档字符串的形式返回，`should eq "dfgh"`即使这不是一般真实的行为——类似的东西`returns a string without vowels removed`是对行为的更好、更普遍真实的描述。

所以我的建议是不要使用单行语法，除非它产生你想要的输出。不要仅仅因为 betterspecs.org 推荐它就使用它。在我看来，它的许多建议都是不好的建议。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-04T02:16:47.757

就个人而言，我同意 BetterSpecs 的观点。以下内容有什么难理解的？

```
subject { assigns('message') }
it { should match /it was born in Billville/ } 
```

如果正如@Myron Marston 认为的那样，它不能产生足够好的输出，那么我建议（而且我总是这样做）使用上下文，例如

```
context "When given a message" do
  subject { my_func arg }
  context "With vowels" do
    let(:arg) { "dafegih" }
    let(:expected){ "dfgh" }
    it { should == expected }
  end
  context "Without vowels" do #… 
```

你会得到可爱的输出，它也像代码一样可读，简洁，鼓励你思考不同的输入，并通过共享的示例和上下文重用，然后鼓励在更广泛的输入范围内进行测试。使用基于字符串 + 块的方式编写规范会鼓励将多个规范塞进一个测试中，例如

```
it "some desc" do
  should_not be_nil
  should match /it was born in Billville/
end 
```

如果失败是因为它为零，还是因为它不匹配？这会鼓励重用吗？这要好得多，IMO：

```
subject { assigns('message') }
it{ should_not be_nil }
it { should match /it was born in Billville/ } 
```

库的编写者和维护者打算让我们很好地使用库，这很好，但我有点厌倦他们认为他们可以唠叨我们或强迫我们做这些事情。RSpec 已将自己添加到包含 Bundler 和 Rails 的列表中，标题为“非常有用的项目，我真的很感激，但应该退出我的业务”。

# magento - Magento 类别列表为空

> ID：15162721
> 
> 赞同：0
> 
> 时间：2013-03-01T16:49:41.767
> 
> 标签：magento

我正在使用下面的代码添加一个类别。

我的问题是：如何修改此代码以将类别添加到根类别？

```
require_once('../app/Mage.php');
Mage::app('mysite');

$category = Mage::getModel('catalog/category');
$category->setStoreId(Mage::app()->getStore()->getId());

if ($id) {
  $category->load($id);
}
$general['name'] = "My Category";
$general['description'] = "Great My Category";
$general['meta_title'] = "My Category"; //Page title
$general['meta_keywords'] = "My , Category";
$general['meta_description'] = "Some description to be found by meta search robots. 2";
$general['is_active'] = 1;
$general['is_anchor'] = 0;
$general['url_key'] = "cars";//url to be used for this category's page by magento.
$category->addData($general);

try {
    $category->save();
    echo "<p>Success! Id: ".$category->getId();
}
catch (Exception $e){
    echo $e->getMessage();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T16:59:22.960

如果您使用 API 类会更简单:)

```
try {
    $storeId = Mage::app()->getStore()->getId();
    $parentId = Mage::app()->getStore($storeId)->getRootCategoryId();
    $categoryData = array(
         'is_active'         => TRUE,
         'default_sort_by'   => 'price',
         'available_sort_by' => 'price',
         'include_in_menu'   => TRUE,
         'name'              => 'something here'
    );
    $api = new Mage_Catalog_Model_Category_Api_V2;
    return $api->create($parentId, (object) $categoryData, $storeId);
}
catch(Exception $e) {
    echo $e->getMessage(); // do something here...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T17:06:57.690

只需添加：

```
$general['path'] = "1/root_id/path_to_your_cat"; 
```

使用此路径的路径，例如，如果您要添加的根类别是类别 id 5，请使用：

```
$general['path'] = "1/5"; 
```

# c# - 引用生成的数据集

> ID：15162723
> 
> 赞同：0
> 
> 时间：2013-03-01T16:49:43.350
> 
> 标签：c#, visual-studio, dataset-designer

如何从生成的数据集中引用和提取数据？

我在同一个解决方案中有 2 个项目。

(1) MyUIProject

(2) MyDataSetProject ->MyGeneratedDataSet.xsd -->-->MyNamesTable（在数据集中）

我要做的就是引用 MyNamesTable 并遍历表中的名称并将它们放在列表框中。我无法从生成的数据集中获取记录。

我正在尝试做类似的事情：

```
foreach (var name in MyDataSetProject.GeneratedDataSet.MyNamesTable)
{
    MyDropDownList.Items.Add(new ListItem(name));
} 
```

感谢您的任何想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T19:01:10.190

首先要做的是确保您的项目之间的引用是正确的。右键单击您的`MyUIProject`并单击`Add Reference`。转到项目选项卡并添加您的`MyDataSetProject`条目​​。如果它给你一个关于它已经被添加的错误，那么它已经被添加了。

其次，您需要从您的网站访问您的 dll 项目类。假设在您的网站中有一个名为 的页面`Default.aspx`，而在您的 dll 项目中，您有一个名为的**类**`DataSetAccessor`，如下所示：

```
public class DataSetAcessor
{
    public DataSet GetDataSet(<arguments>)
    {
        //populate the dataset and return it
    }
} 
```

然后，您可以在页面中使用此类`Default`：

```
//at top
using MyDataSetProject; //this may vary

//down in some method
DataSetAccessor dsa = new DataSetAccessor();
DataSet data = dsa.GetDataSet();

foreach(DataRow row in data.Tables[0].Rows)
{
    //using the values in row to populate your drop down list
} 
```

希望这会有所帮助。

# css - 在网络共享上查看 HTML 文件时 CSS 列不起作用

> ID：15162727
> 
> 赞同：0
> 
> 时间：2013-03-01T16:49:59.240
> 
> 标签：css, internet-explorer-9

我有一个基于列表的相当简单的列方法，如下所述：[如何制作一个调整大小以适应页面宽度的 HTML 网格？](https://stackoverflow.com/questions/14833056/how-to-make-an-html-grid-which-resizes-to-fit-page-width)

它在我的本地机器上运行良好，但是当通过网络共享查看文件时，一切都在一个大列中。所有的 CSS 都在 HTML 文件中，根本没有外部脚本。我在这两种情况下都使用 IE9，那么为什么会有不同的行为呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T20:45:41.173

查看示例链接和相应的 JSFiddle 后，接受的答案使用链接样式表资源：bootstrap-combined.min.css。可在此处访问：http: [//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.0/css/bootstrap-combined.min.css](http://netdna.bootstrapcdn.com/twitter-bootstrap/2.3.0/css/bootstrap-combined.min.css)

我猜，在您网络的某个地方，当访问文件时，用户/IIS/任何代理都无权访问引导文件，或者它不包含在 FTP 发布中。

`<ul>`我曾经使用过的每一个都将`<li>`' 设置为 clear:both 默认情况下。通过设置`<ul class="inline">`，它使所有子元素内联元素，默认情况下将向左浮动，这在 twitter 引导程序中定义（显然）。所以这对我来说是voo-doo css。

您可以尝试将`<li>`'s 类样式设置为`float:left;`. 这会给你想要的结果。

JSFiddle：http: [//jsfiddle.net/ywVWD/1/](http://jsfiddle.net/ywVWD/1/)

# javascript - 基本的触摸手势不起作用，使用hammer.js

> ID：15162728
> 
> 赞同：2
> 
> 时间：2013-03-01T16:50:01.820
> 
> 标签：javascript, mobile, hammer.js

我刚开始学习javascript，所以我可以实现触摸手势，我正在使用hammer.js库，但即使是一段简单的代码似乎也不起作用，有谁知道我是否遗漏了一些明显的东西？

我正确地包含了hammer.js（已通过在浏览器中输入路径对其进行了测试）并且我已将此代码包含在头部...

```
<script type="text/javascript">
    var element = document.getElementById('tapdiv');
    var hammertime = Hammer(element).on("tap", function(event) {
    alert('hello!');
    });
</script> 
```

和我的html...

```
<div id="tapdiv">
 <img src="files/tabdiv.jpg" />
</div> 
```

编辑：我也在hammer.js的控制台中收到这个错误......

> TypeError: el is null [中断此错误]
> 
> if(!css_props || !el.style) {

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-01T17:00:31.270

看来您的 javascript 正在尝试访问 DOM 中尚不存在的对象——确保在 DOM 准备好后执行您的 javascript：

```
<script type="text/javascript">
window.addEventListener('load', function() { 
    var element = document.getElementById('tapdiv');
    var hammertime = Hammer(element).on("tap", function(event) {
        alert('hello!');
    })

}, false);
</script> 
```

# clojure - 从 clojure 操作 java 对象

> ID：15162732
> 
> 赞同：4
> 
> 时间：2013-03-01T16:50:08.017
> 
> 标签：clojure, functional-programming, clojurescript, clojure-contrib

我是 clojure 的新手，想使用 clojure 与 java 对象进行交互。如果我很好理解，可以使用**defprotocol**来实现这种交互。我具体尝试做的是以下内容：

1-我有以下java类

```
package mytestspackage;

public class TestObject {

    private String lastName;
    private String firstName;
    private String age;

    public TestObject(String lastName, String firstname, String age) {
        super();
        this.lastName = lastName;
        this.firstName = firstname;
        this.age = age;
    }

    public String getName() {
        return this.lastName;
    }

    public void setName(String name) {
        this.lastName = name;
    }

    public String getFirstname() {
        return this.firstName;
    }

    public void setFirstname(String vorname) {
        this.firstName = vorname;
    }

    public String getAge() {
        return this.age;
    }

    public void setAge(String age) {
        this.age = age;
    }

} 
```

2-我创建了一个 clojure 协议，它应该允许我访问上述 java 类*TestObject的实例*

```
(ns mytestspackage)
(defprotocol Test
  (first-name [t])
  (last-name [t])
  (age [t])) 
```

现在我的问题是：我*在哪里*具体实现协议中定义的方法以及*如何*使用此实现将 TestObject 实例传递到 clojure 端并*访问*名字、姓氏等值...

任何帮助，将不胜感激。提前致谢。

问候，贺拉斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T17:27:20.770

> 如果我很好理解的话，可以使用 defprotocol 来实现这种交互。

不，你搞错了。协议旨在允许类似于普通 java 中的接口允许的事情（尽管更强大）。您可以在没有任何协议的情况下访问您的 Java 类。关于这个主题的官方 clojure 文档：http: [//clojure.org/java_interop](http://clojure.org/java_interop)

例子：

```
(ns example
  (:import mytestpackage.TestObject))

;; This is how we call methods on java objects    

(defn first-name [obj]
  (.getFirstname obj))

(defn last-name [obj]
  (.getName obj))

(defn age [obj]
  (.getAge obj))

(defn set-first-name [obj name]
  (.setFirstname obj name))

(defn set-last-name [obj name]
  (.setName obj name))

(defn set-age [obj age]
  (.setAge obj age))

;; In REPL

example => (let [x (TestObject. nil nil nil)      ;; This is how we create Java objects
                 x (new TestObject nil nil nil)]  ;; These expressions are equivalent
              (println (first-name x))
              (set-first-name x "Name")
              (println (first-name x))
              (set-last-name x "Last name")
              (set-age x "23")
              (println (last-name x))
              (println (age x)))
;; Outputs
nil
Name
Last name
23 
```

请注意，此代码只不过是旨在介绍 java 互操作的示例。绝不应该编写这样的真实程序，尤其是如果它们主要是在 Clojure 中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T17:39:03.140

如果您只想使用 Clojure 与 java 对象进行交互，而不是在它们上实现新功能，则无需担心协议。Clojure 为 java 方法调用提供直接访问和语法。

例如 Clojure 中的字符串是 java.lang.String 对象：

```
user=> (type "Really a Java String")
;; java.lang.String

user=> (.toUpperCase "Really a java string")
;;=> "REALLY A JAVA STRING" 
```

如果您的测试对象类在类路径上，您可以像这样创建实例：

```
user=> (def a-test-object (mytestpackage/TestObject. "lastName" "firstName" 42)) 
```

并调用如下方法：

```
user=> (.getAge a-test-object) 
```

有关详细信息，请参阅[http://clojure.org/java_interop](http://clojure.org/java_interop)。

# windows - Visual SVN 服务器 - 由于禁用帐户导致服务启动登录失败

> ID：15162733
> 
> 赞同：1
> 
> 时间：2013-03-01T16:50:11.513
> 
> 标签：windows, svn, windows-services, visualsvn-server

我正在使用 Visual SVN 服务器。由于某种原因，该服务已停止。当我尝试重新启动它时，由于登录错误而失败。

我发现，之前设置它的人已经离开了组织，并且他在服务器上的帐户已被禁用。SVN 服务器正在使用他的帐户凭据来启动服务并失败。

我需要更改身份验证凭据，但无法弄清楚。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T10:51:42.750

有关详细说明，请参阅 TechNet 文章[“配置服务的启动方式”](http://technet.microsoft.com/en-us/library/cc755249.aspx)：

1.  **开始**，单击**开始搜索**框，键入`services.msc`，然后按**ENTER**，

2.  在详细信息窗格中，右键单击 VisualSVN Server 服务，然后单击**Properties**，

3.  要指定服务可用于登录的用户帐户，请单击“**登录”**选项卡，您可以在此处指定帐户。

VisualSVN Server 在`NETWORK SERVICE`默认情况下工作，但您也可以在专用帐户下运行它。

如果您要创建新的服务帐户，您可能还需要查看这些文章：

*   ["运行 VisualSVN 服务器所需的权限"](http://www.visualsvn.com/support/topic/00037/) ,
*   [“将 VisualSVN 服务器服务配置为在专用用户帐户下运行”](http://www.visualsvn.com/support/topic/00024/)。

# entity-framework - 如何在 Code First Drop-Create 模式下使用实体框架？

> ID：15162734
> 
> 赞同：35
> 
> 时间：2013-03-01T16:50:13.917
> 
> 标签：entity-framework, code-first

我正在使用实体框架 v4。我已按照[书呆子晚餐教程中的说明进行操作](http://weblogs.asp.net/scottgu/archive/2010/07/16/code-first-development-with-entity-framework-4.aspx). 我目前处于开发模式（未发布到任何更高的环境），并且希望在每次新部署时重新创建表，因为模型仍然高度不稳定，我不关心保留数据。但是，这不会发生。没有创建/修改表，或者数据库发生任何事情。如果我通过使用包管理器命令迁移到迁移模型：启用迁移、添加迁移（初始），这将起作用并使用我的迁移。但是，由于我还不想进行粒度迁移并且只想要我的初始创建脚本，我不得不每次都删除迁移文件夹，重做命令（启用迁移，添加迁移）并手动删除数据库我改变任何东西。

如何让代码的删除/创建行为首先发生？

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2013-03-01T16:53:46.427

为您的数据库使用[DropCreateDatabaseAlways初始化程序。](http://msdn.microsoft.com/en-us/library/gg679506(v=vs.103).aspx)在应用程序域中首次使用上下文期间，它将始终重新创建数据库：

```
Database.SetInitializer(new DropCreateDatabaseAlways<YourContextName>()); 
```

实际上，如果您想为数据库播种，请创建自己的初始化程序，它将继承自`DropCreateDatabaseAlways`：

```
public class MyInitializer : DropCreateDatabaseAlways<YourContextName>
{
     protected override void Seed(MagnateContext context)
     {
         // seed database here
     }
} 
```

并在第一次使用上下文之前设置它

```
Database.SetInitializer(new MyInitializer()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-29T16:44:32.193

如果数据库已经存在并且您想对模型进行更改，则使用`DropCreateDatabaseIfModelChanges<YourContextName>`

# r - R的叉积函数是什么？

> ID：15162741
> 
> 赞同：34
> 
> 时间：2013-03-01T16:50:30.963
> 
> 标签：r

`crossprod`我觉得这个问题很愚蠢，但是 R函数相对于向量输入的意图是什么 ？我想计算欧几里得空间中两个向量的叉积并错误地尝试使用`crossprod`.
向量叉积的一种定义是`N = |A|*|B|*sin(theta)`其中 theta 是两个向量之间的角度。（方向`N`垂直于 AB 平面）。另一种计算方法是 `N = Ax*By - Ay*Bx`。
`base::crossprod`显然不做这个计算，实际上产生了两个输入的向量点积`sum(Ax*Bx, Ay*By)`。

所以，我可以很容易地编写自己的`vectorxprod(A,B)`函数，但我不知道`crossprod`一般在做什么。

另请参阅[R - 计算向量的叉积（物理）](https://stackoverflow.com/questions/36798301/r-compute-cross-product-of-vectors-physics/36802067)

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-03-01T16:59:01.903

根据 R 中的帮助函数： crossprod (X,Y) = t(X)%*% Y 是比表达式本身更快的实现。它是两个矩阵的函数，如果有两个向量对应点积。@Hong-Ooi 的评论解释了为什么它被称为交叉产品。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2014-02-12T18:43:02.347

这是一个简短的代码片段，只要叉积有意义就可以使用：3D 版本返回一个向量，2D 版本返回一个标量。如果您只想要简单的代码来给出正确的答案而不需要引入外部库，那么这就是您所需要的。

```
# Compute the vector cross product between x and y, and return the components
# indexed by i.
CrossProduct3D <- function(x, y, i=1:3) {
  # Project inputs into 3D, since the cross product only makes sense in 3D.
  To3D <- function(x) head(c(x, rep(0, 3)), 3)
  x <- To3D(x)
  y <- To3D(y)

  # Indices should be treated cyclically (i.e., index 4 is "really" index 1, and
  # so on).  Index3D() lets us do that using R's convention of 1-based (rather
  # than 0-based) arrays.
  Index3D <- function(i) (i - 1) %% 3 + 1

  # The i'th component of the cross product is:
  # (x[i + 1] * y[i + 2]) - (x[i + 2] * y[i + 1])
  # as long as we treat the indices cyclically.
  return (x[Index3D(i + 1)] * y[Index3D(i + 2)] -
          x[Index3D(i + 2)] * y[Index3D(i + 1)])
}

CrossProduct2D <- function(x, y) CrossProduct3D(x, y, i=3) 
```

## 它有效吗？

让我们看看[我在网上找到的一个随机示例](http://mathinsight.org/cross_product_examples)：

```
> CrossProduct3D(c(3, -3, 1), c(4, 9, 2)) == c(-15, -2, 39)
[1] TRUE TRUE TRUE 
```

看起来还不错！

## 为什么这比以前的答案更好？

*   它是 3D 的（Carl 的只有 2D）。
*   它简单而惯用。
*   很好的评论和格式化；因此，易于理解

缺点是数字“3”被硬编码了好几次。实际上，这并不是一件坏事，因为它突出了向量叉积*纯粹是*一个 3D 构造的事实。就个人而言，我建议[完全放弃交叉产品](http://www.av8n.com/physics/clifford-intro.htm#preface-nocross)并[学习几何代数](https://rads.stackoverflow.com/amzn/click/com/0123749425)。:)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-01T18:52:40.527

帮助`?crossprod`解释得很清楚。以线性回归为例，对于`y = XB + e`您要查找的模型，转置和`X'X`的乘积。要做到这一点，一个简单的调用就足够了：is the same as is the same as 。此外，可用于求两个向​​量的点积。`X``X``crossprod(X)``crossprod(X,X)``t(X) %*% X``crossprod`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-06-04T15:23:23.287

应@Bryan Hanson 的请求，这里有一些Q&D 代码来计算平面中两个向量的向量叉积。计算一般的 3 空间向量叉积或扩展到 N 空间有点麻烦。如果你需要这些，你必须去维基百科:-)。

```
crossvec <- function(x,y){
if(length(x)!=2 |length(y)!=2) stop('bad vectors')
 cv <-  x[1]*y[2]-x[2]*y[1]
return(invisible(cv))
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-03-24T07:16:29.760

这是 3D 矢量的简约实现：

```
vector.cross <- function(a, b) {
    if(length(a)!=3 || length(b)!=3){
        stop("Cross product is only defined for 3D vectors.");
    }
    i1 <- c(2,3,1)
    i2 <- c(3,1,2)
    return (a[i1]*b[i2] - a[i2]*b[i1])
} 
```

如果您想获得 2D 向量`u`和的标量“叉积” `v`，您可以这样做

```
vector.cross(c(u,0),c(v,0))[3] 
```

* * *

## 回答 #6

> 赞同：-4
> 
> 时间：2021-02-01T12:27:32.483

我想通过叉积你的意思是矩阵乘法在这种情况下它只是

垫1 *%*垫2

# linux - 内核模块中的符号

> ID：15162742
> 
> 赞同：0
> 
> 时间：2013-03-01T16:50:33.660
> 
> 标签：linux, linker, linux-kernel, kernel

我为 mips 架构构建了带有 SSP 支持的 linux 内核模块。我将**-fstack-protector-all**添加到编译标志中。但是在加载这个模块后，我对**__stack_chk_guard**和**__stack_chk_fail**有未定义的引用。但是我将**libssp.so**添加到链接器中。看起来我应该在内核中导出这些符号，如下所示：

```
EXPORT_SYMBOL(__stack_chk_guard); 
```

因为我的内核很旧并且还没有包含它们。但不幸的是我应该使用这个版本。

我的问题是：为什么用户空间可以使用工具链库中的这个符号，但内核空间不能？

我想，我错过了一些 linux 内核要领。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T17:28:48.873

您不能将内核链接到共享库。如果你有一个 libssp 的静态库，它可能会工作 - 但它要求该库不调用其他会导致内核出现问题的东西。

一般来说，堆栈检查不是你应该在内核上做的事情——我很确定它没有特别好的目的[我也很确定内核为每个内核堆栈使用一个“保护页” ]。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T17:38:09.420

您不能在内核空间的任何地方使用共享库（包括作为内核模块的一部分）。

您可以将内核模块本身视为内核空间中的共享库，但有很多差异。

内核模块可以依赖于`exported symbols`其他内核模块。

> 我的问题是：为什么用户空间可以使用工具链库中的这个符号，但内核空间不能？

内核空间中没有任何东西可以访问`libc`C 库。内核有自己的一组内置标准字符串操作函数等，您可以使用它们来代替。工具链库建立在`libc`.

+1 对 Mats 的回答。`static library`只要它不依赖于标准 C 库，您就可以使用`libc`

# php - Cakephp - 将多个复选框保存到连接表

> ID：15162746
> 
> 赞同：0
> 
> 时间：2013-03-01T16:50:47.017
> 
> 标签：php, cakephp

我需要将多个复选框保存到连接表的帮助。

有3张表：

*   **客户**（身份证、姓名、地址）
*   **Products** (id,product_name,desc) 输入所有产品。
*   **Customers_Products** (id,product_id,customer_id) <-(连接表)

**第 1 步：**
客户选择所需的产品*（复选框中的苹果、橙子、樱桃）* 并单击`<Next>`按钮

**第 2 步：**
填写有关自己的表格*（姓名、地址等）。* 并点击`<Submit>`按钮

**第 3 步：**
我将第 2 步中的个人信息保存到客户表中，并将第 1 步中的选定产品 ID 保存到客户_产品表中。它确实将个人信息和产品ID保存到指定的表中，但是当客户选择多个产品时，它不会保存产品ID。它添加了行，但产品 id 字段为空。

这是我的看法：

*   `<?php echo $this->Form->checkbox('CustomerProduct.product.', array('value' => '1', 'style' => 'float: left; display: inline')); ?>`
*   `<?php echo $this->Form->checkbox('CustomerProduct.product.', array('value' => '2', 'style' => 'float: left; display: inline')); ?>`
*   `<?php echo $this->Form->checkbox('CustomerProduct.product.', array('value' => '3', 'style' => 'float: left; display: inline')); ?>`
*   `<?php echo $this->Form->input('Customers.name', array('value'=>'Jon Toshmatov')); ?>`

控制器：

```
$this->Prospect->saveAll($this->request->data); 
```

模型：

```
public $hasAndBelongsToMany = array(
    'CustomerProduct' => array(
        'className' => 'CustomerProduct',
        'joinTable' => 'customers_products',
        'foreignKey' => 'customer_id',
        'associationForeignKey' => 'product_id',
        'unique' => 'false',
        'dependent' => false,
        'conditions' => '',
        'fields' => '',
        'order' => '',
        'limit' => '',
        'offset' => '',
        'exclusive' => '',
        'finderQuery' => '',
        'counterQuery' => ''
    ) 
```

**期望的结果：** 我想按以下顺序保存数据：

```
客户表：
身份证名称
1 乔恩 T

客户_产品*(加入表)*
id product_id customer_id
1 4 1
2 3 1
3 5 1

```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T21:48:08.250

问题是如果通过 CakePHP formhelper 创建，每个复选框也会添加一个“隐藏”输入。添加此隐藏输入以确保复选框即使未选中也始终发送值（0 或 1）。

但是，在您的示例中，您正在创建 3 个具有相同“名称”的复选框，因此每个复选框都将覆盖以前的值。

最好的方法是使用 CakePHP formhelper 创建一个“多个”复选框；

```
echo $this->Form->input('Product', array('multiple' => 'checkbox')); 
```

为了使其正常工作，应该有一个`$products`viewVar，包含产品 ID 和标签；

在您的控制器内部：

```
public function some_action()
{
     // your code here

     $this->set('products', $this->Customer->Product->find('list'));
} 
```

更多关于在此处保存 HABTM 数据的信息； [http://book.cakephp.org/2.0/en/models/saving-your-data.html#saving-related-model-data-habtm](http://book.cakephp.org/2.0/en/models/saving-your-data.html#saving-related-model-data-habtm)

**请注意** ，除非您为模型使用非标准名称，否则您的名称似乎`hasAndBelongsToMany`不正确；

我*怀疑*你的关系是`Customer`hasAndBelongsTo `Product`，不是`CustomerProduct`吗？

[http://book.cakephp.org/2.0/en/models/associations-linking-models-together.html#hasandbelongstomany-habtm](http://book.cakephp.org/2.0/en/models/associations-linking-models-together.html#hasandbelongstomany-habtm)

# git - 使用 git，如何删除远程分支的本地副本？或者至少在不合并的情况下拉动？

> ID：15162748
> 
> 赞同：14
> 
> 时间：2013-03-01T16:50:49.983
> 
> 标签：git, branch, git-branch, branching-and-merging

另一位开发人员删除并重建了一个名为“开发”的远程分支，我已经有一个签出副本。他做了这个删除和重建以从中删除一些杂物。这是伟大的。

但是当我进行“git pull origin development”时，它会不断出现合并冲突。然而，我不想要我的副本中的内容。我只想要原始的东西。

那么如何删除它的本地副本并将其拉回呢？或者至少在不将我的本地信息合并到其中的情况下进行拉取？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-03-01T17:12:38.683

从源远程获取最新的更改。此步骤是您在问题中要求的“不合并拉取”步骤。`git pull`相当于`git fetch`后面跟着`git merge`。

```
$ git fetch origin 
```

如有必要，请前往干净的分支。

```
$ git stash 
```

使用干净的分支，如果您还没有，请切换到开发分支。

```
$ git checkout development 
```

最后，强制您的本地开发分支指向与原点相同的提交。

```
$ git reset --hard origin/development 
```

使用前请务必三思而后`git reset --hard`行`rm -rf`。它是一种锋利而有用的工具，但如果你不小心，它可能会破坏工作。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-03-01T16:57:48.630

要永久删除本地分支，请执行以下操作：

```
git branch -D <branch-name> 
```

从远程仓库获取更改但不合并：

```
git fetch 
```

现在创建并签出远程分支的本地副本并跟踪它：

```
git checkout -b development origin/development 
```

git 应该告诉您“分支开发设置为从源跟踪远程分支开发”，并且它已在本地切换到开发分支。

# android - 使用 android maven 插件重命名包

> ID：15162750
> 
> 赞同：6
> 
> 时间：2013-03-01T16:50:52.223
> 
> 标签：android, maven, ant

像往常一样，当您尝试制作非标准的东西时，您会坚持使用 maven。

我目前正在尝试为 Android 应用程序重命名我的主应用程序包，以便能够运行来自相同来源的不同品牌应用程序。

我们正在使用 android maven 插件，很难完成它。

1.  我正在尝试第一种简单的方法 - 使用**renameManifestPackage**配置。但这看起来不是我所期望的。因为现在无法安装生成的 apk。

2.  我尝试了第二种方法。在初始化阶段运行 ant 以重命名 sources/resources/tests/AndroidManifest.xml 中的包。如果我跳过测试，这几乎可以工作。如果不是，Robolectric 会失败，因为它使用的是原始清单。如果我不复制清单并在原始文件中进行替换，一切正常，但我现在修改了 AndroidManifest，这破坏了我的工作环境（IDE）。

有没有人有明确的步骤如何重命名包并且仍然有工作环境？

**UPD：**第 1 点中提到的问题是我使用了错误的包名“devapp”。它应该至少包含一个“.”。它是通过使用“my.package.devapp”修复的。并且安装成功。但我现在无法安装新应用，因为：

```
Can't install because provider name my.package.app (in package my.package.devapp) is already used by my.package.live 
```

我不确定下一步该怎么做。将更深入地了解 apktool。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-04T13:44:08.253

我知道它正在使用 3.5.1 android maven 插件和配置中的下一行：

```
<renameManifestPackage>my.package.${environment}</renameManifestPackage>
<manifest>
    <providerAuthorities>
         <property>
             <name>my.package.provider.Provider1</name>
             <value>my.package.${environment}</value>
         </property>
         <property>
             <name>my.package.provider.Provider2</name>
             <value>my.package.${environment}.media</value>
         </property>
    </providerAuthorities>
</manifest> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-22T12:55:41.317

# 防止覆盖 AndroidManifest.xml

使用 android-maven-plugin 更改 AndroidManifest.xml 文件的一个问题是它可能会错误地提交给您的 SCM。

自 android-maven-plugin 版本 3.8.0 以来引入了一项新功能，它使您有机会将更新的 AndroidManifest.xml 保存在另一个位置。

### 样本：

```
 <plugin>
    <groupId>com.jayway.maven.plugins.android.generation2</groupId>
    <artifactId>android-maven-plugin</artifactId>
    <version>3.8.2</version>
    <extensions>true</extensions>
    <configuration>
      <renameManifestPackage>com.domain.android${environment}</renameManifestPackage>
      <updatedManifestFile>${project.build.directory}/AndroidManifest.xml</updatedManifestFile>
      <manifestApplicationLabel>Appname${environment}</manifestApplicationLabel>
      <manifest>
          <providerAuthorities>
               <property>
                   <name>com.domain.android.vc2.utility.SearchSuggestionsProvider</name>
                   <value>com.domain.android${environment}.searchsuggestionsprovider</value>
               </property>
               <property>
                   <name>com.domain.android.widget.VPWidgetDataProvider</name>
                   <value>com.domain.android${environment}.widget.provider</value>
               </property>
          </providerAuthorities>
      </manifest>
    </configuration>
    <executions>
      <execution>
        <id>update-manifest</id>
        <goals>
          <goal>manifest-update</goal>
        </goals>
      </execution>
    </executions>
  </plugin> 
```

*然后元素中的内容`updatedManifestFile`将导致使用此名称创建原始 AndroidManifest.xml 文件的副本并用于更新。当然也用于打包apk。*

通过将属性环境添加到您的 mvn 命令，您可以创建在同一设备上彼此并排安装的不同构建。

```
 mvn clean package -Denvironment=.beta 
```

### 更多阅读

此链接解释了这一点以及有关插件属性的更多信息：

[http://jayway.github.io/maven-android-plugin/manifest-update-mojo.html#updatedManifestFile](http://jayway.github.io/maven-android-plugin/manifest-update-mojo.html#updatedManifestFile)

# jquery - JQuery 使用 .each() 循环输出缓冲区

> ID：15162751
> 
> 赞同：0
> 
> 时间：2013-03-01T16:50:54.013
> 
> 标签：jquery, loops, for-loop

好的，我有一个函数可以获取 vine 推文，然后通过 iFrame 显示视频。这很好用，唯一的问题是我不想一次全部列出，我只想显示一个，然后在完成后显示下一个。这可能很简单，但我一直在看代码很长时间，现在我想不通。请帮忙。

```
 function getTweets() {
                    var url='http://search.twitter.com/search.json?callback=?&q=givingvine';
                    $.getJSON(url,function(json){

                    //setup an array to buffer output
                    var output = [];

                    //a for loop will perform faster when setup like this
                    for (var i = 0, len = json.results.length; i < len; i++) {
                   //instead of appending each result, add each to the buffer array
                   output.push('<p>' + '<iframe class="video" src="' + json.results[i].text.substr(json.results[i].text.indexOf("http")) +'" frameborder="0" width="1080" height="800" style="margin:-155px -100px -130px -60px;"></iframe>' + '</p>');

                    }

                //now select the #results element only once and append all the output at once, then slide it into view
                  $.each(output, function (intIndex, objValue) {
                    $("#results").html(objValue);
                    });
                });
                }
                 //set an interval to run the getTweets function (30,000 ms is 5 minutes), you can cancel the interval by calling clearInterval(timer);
                 var timer = setInterval(getTweets, 10000);
                clearInterval(timer);
                //run the getTweets function on document.ready
                getTweets();

            }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T17:02:59.087

如果我理解正确，您希望将结果存储在输出中，然后只将第一个附加到#results。那么当用户做某事时添加另一个？

我建议您将当前的“位置”存储在一个变量中，然后当用户执行您想要添加下一个的操作时，将其增加 1

就像是

```
 var output =[],currentKey =0;
  function getTweets() {
                var url='http://search.twitter.com/search.json?callback=?&q=vine';
                $.getJSON(url,function(json){

                //setup an array to buffer output

                //a for loop will perform faster when setup like this
                for (var i = 0, len = json.results.length; i < len; i++) {
               //instead of appending each result, add each to the buffer array
               output.push('<p>' + '<iframe class="video" src="' + json.results[i].text.substr(json.results[i].text.indexOf("http")) +'" frameborder="0" width="1080" height="800" style="margin:-155px -100px -130px -60px;"></iframe>' + '</p>');

                }

            //now select the #results element only once and append all the output at once, then slide it into view
                $("#results").html(output[currentKey]);
            });
            }

         getTweets();

        $('#next').click(function(){
          currentKey +=1;
          if(currentKey  < output.length){
         $('#results').append(output[currentKey]);   
       }
       }); 
```

The example above assumes you have some kind of button with an id=next that when clicked appends the next item to results e.g

```
 <button id="next">Next Video</button> 
```

If you want to replace the current video then use

```
 $('#results').html(output[currentKey]);   
       //  instead of
       $('#results').append(output[currentKey]); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T17:07:13.057

EDIT:

Sounds like you would want something like this:

```
output.push('<p>' + '<iframe id="iframe' + i.toString() + '"  class="video" src="' + json.results[i].text.substr(json.results[i].text.indexOf("http")) +'" frameborder="0" width="1080" height="800" style="margin:-155px -100px -130px -60px;"></iframe>' + '</p>');

                    } 
```

Then in here:

```
 $.each(output, function (intIndex, objValue) {
                $("#results").html(objValue);
                //Some Timer code here;
                //Remove previous iframe, add a new iframe
                $('#results').empty();
                }); 
```

You could also however change the forloop to populate output with the src and then in the foreach do something like this:

```
 $.each(output, function (intIndex, objValue) {
                $("#iframe").attr('src', objValue)
                //Some Timer code here;
                }); 
```

* * *

If you want to display an iframe one at a time with your setup:

You may want to use the each() function:

```
$.each(output, function (intIndex, objValue) {
     $("#results").html(objValue);
}); 
```

In place of the:

```
$("#results").html(output); 
```

# c# - 如何在 C# 应用程序中进行备份？

> ID：15162757
> 
> 赞同：2
> 
> 时间：2013-03-01T16:51:02.070
> 
> 标签：c#, sql-server, visual-studio, backup, restore

我将尝试从 C# 应用程序做一个备份数据库。我找到了更多教程如何做到这一点。在新项目中复制一些解决方案并运行。我一直遇到一个连接错误，例如：

> “服务器备份失败”。

在这一行：

> source.SqlBackup(服务器);

你知道我怎么解决这个问题吗？我认为这个问题涉及到服务器的连接（它坏了？）。

您可以在下面看到一种备份方法：

```
public static void BackupDatabase(string backUpFile)
{
    ServerConnection con = new ServerConnection(@".\SQLEXPRESS");
    Server server = new Server(con);
    Backup source = new Backup();
    source.Action = BackupActionType.Database;
    source.Database = "DB";
    BackupDeviceItem destination = new BackupDeviceItem(backUpFile, DeviceType.File);
    source.Devices.Add(destination);
    source.SqlBackup(server);
    con.Disconnect();
    MessageBox.Show("Kopia wykonana!");
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T17:27:05.773

几件事让你尝试。

1.  确保您的数据库名称正确

    source.Database = "数据库"; // 检查数据库名称实际上是 'DB'。

2.  过去我在使用`ServerConnection`连接字符串时遇到了一些问题，即使语法允许您这样做。我所做的是`SqlConnection`从连接字符串创建一个，然后将其提供给`ServerConnection`.

    ```
    string connectionString = "Your connection string goes here";

    SqlConnection sqlCon = new SqlConnection(connectionString);

    ServerConnection connection = new ServerConnection(sqlCon); 
    ```

3.  我也会尝试初始化备份对象。

    ```
    source.Initialize = true; 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T18:33:50.897

将 PC 用户的完全控制权添加到 C:\ 驱动器上的备份文件夹有帮助！谢谢大家的帮助！但我只有一个问题：我如何修改上面的 C# 代码，该程序应该是你自己在 C:\ 上创建备份文件夹并复制数据库？目前我必须手动完成。

# java - 仅当不存在确切实体时才保存实体

> ID：15162759
> 
> 赞同：0
> 
> 时间：2013-03-01T16:51:05.797
> 
> 标签：java, spring, hibernate

我有一个`ShippingDestination`实体，如果它不存在，我只想保存一个新实体。它必须完全匹配。

Hibernate 或 Spring 是否能够帮助解决这个问题，或者这部分完全取决于我？

```
@javax.persistence.Table(name = "Shipping_Destination", schema = "", catalog = "production_queue")
@Entity
public class ShippingDestination {
    private Integer id;

    @javax.persistence.Column(name = "id", nullable = false, insertable = true, updatable = true, length = 10, precision = 0)
    @Id
    @GeneratedValue
    public Integer getId() {
        return id;
    }

    public void setId(Integer id) {
        this.id = id;
    }

    private String recipient;

    @javax.persistence.Column(name = "recipient", nullable = false, insertable = true, updatable = true, length = 32, precision = 0)
    @Basic
    public String getRecipient() {
        return recipient;
    }

    @JsonProperty("Recipient")
    public void setRecipient(String recipient) {
        this.recipient = recipient;
    }

    private String street;

    @javax.persistence.Column(name = "street", nullable = false, insertable = true, updatable = true, length = 255, precision = 0)
    @Basic
    public String getStreet() {
        return street;
    }

    @JsonProperty("Street")
    public void setStreet(String street) {
        this.street = street;
    }

    private String street2;

    @javax.persistence.Column(name = "street2", nullable = false, insertable = true, updatable = true, length = 255, precision = 0)
    @Basic
    public String getStreet2() {
        return street2;
    }

    @JsonProperty("Street2")
    public void setStreet2(String street2) {
        this.street2 = street2;
    }

    private String city;

    @javax.persistence.Column(name = "city", nullable = false, insertable = true, updatable = true, length = 128, precision = 0)
    @Basic
    public String getCity() {
        return city;
    }

    @JsonProperty("City")
    public void setCity(String city) {
        this.city = city;
    }

    private String state;

    @javax.persistence.Column(name = "state", nullable = false, insertable = true, updatable = true, length = 2, precision = 0)
    @Basic
    public String getState() {
        return state;
    }

    @JsonProperty("State")
    public void setState(String state) {
        this.state = state;
    }

    private String postalCode;

    @javax.persistence.Column(name = "postal_code", nullable = false, insertable = true, updatable = true, length = 12, precision = 0)
    @Basic
    public String getPostalCode() {
        return postalCode;
    }

    @JsonProperty("PostalCode")
    public void setPostalCode(String postalCode) {
        this.postalCode = postalCode;
    }

    @Override
    public boolean equals(Object o) {
        if (this == o) return true;
        if (o == null || getClass() != o.getClass()) return false;

        ShippingDestination that = (ShippingDestination) o;

        if (city != null ? !city.equals(that.city) : that.city != null) return false;
        if (id != null ? !id.equals(that.id) : that.id != null) return false;
        if (postalCode != null ? !postalCode.equals(that.postalCode) : that.postalCode != null) return false;
        if (recipient != null ? !recipient.equals(that.recipient) : that.recipient != null) return false;
        if (state != null ? !state.equals(that.state) : that.state != null) return false;
        if (street != null ? !street.equals(that.street) : that.street != null) return false;

        return true;
    }

    @Override
    public int hashCode() {
        int result = id != null ? id.hashCode() : 0;
        result = 31 * result + (recipient != null ? recipient.hashCode() : 0);
        result = 31 * result + (street != null ? street.hashCode() : 0);
        result = 31 * result + (city != null ? city.hashCode() : 0);
        result = 31 * result + (state != null ? state.hashCode() : 0);
        result = 31 * result + (postalCode != null ? postalCode.hashCode() : 0);
        return result;
    }

    private Collection<Order> orders;

    @OneToMany(mappedBy = "shippingDestination")
    public Collection<Order> getOrders() {
        return orders;
    }

    public void setOrders(Collection<Order> orders) {
        this.orders = orders;
    }

    private Collection<Vendor> vendors;

    @OneToMany(mappedBy = "shippingDestination")
    public Collection<Vendor> getVendors() {
        return vendors;
    }

    public void setVendors(Collection<Vendor> vendors) {
        this.vendors = vendors;
    }

    public boolean validate() throws InvalidParameterException {
        if (getRecipient() == null || getRecipient().length() == 0) {
            throw new InvalidParameterException("Address requires a recipient");
        }

        if (getStreet() == null || getStreet().length() == 0) {
            throw new InvalidParameterException("Address requires a street");
        }

        if (getCity() == null || getCity().length() == 0) {
            throw new InvalidParameterException("Address requires a city");
        }

        if (getState() == null || getState().length() == 0) {
            throw new InvalidParameterException("Address requires a state");
        }

        if (getPostalCode() == null || getPostalCode().length() == 0) {
            throw new InvalidParameterException("Address requires a postal code");
        }

        return true;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T02:17:18.723

是的，在 spring 或 hibernate 中没有这样的事情。如果您需要检查重复我的意思是相同的信息是否已经存在，那么请确保您可以在服务或 dao 类中编写查询。

# c# - 如何仅使用 JavaScript 调用 MVC 操作？

> ID：15162760
> 
> 赞同：-1
> 
> 时间：2013-03-01T16:51:09.223
> 
> 标签：c#, javascript, asp.net-mvc

我有这个 Kendo UI 下拉列表，其中包含一个`select`由 JavaScript 函数处理的事件。

我需要从运行 LINQ 查询的控制器调用操作结果，以在我的页面上填充 Kendo UI 网格。我的问题是我能找到处理这个问题的唯一方法，即使是使用 JavaScript，我也无法弄清楚如何从 JavaScript 事件函数从我的控制器调用我的操作结果。

`DropDownList`外观是这样的……

```
@(Html.Kendo().DropDownList()
    .Name("Options")
    .DataTextField("Text")
    .DataValueField("Value")
        .BindTo(new List<SelectListItem>() {
        new SelectListItem() {
            Text = "Policies Not Archived",
            Value = "1"
        },
        new SelectListItem() {
            Text = "View All Policies",
            Value = "2"
        },
        new SelectListItem() {
            Text = "Filter Policies",
            Value = "3"   
        }
    })
    .Events(e => 
    {
        e.Select("select");
    })
) 
```

以及需要调用操作结果的 JavaScript 事件处理程序

```
function select(e) {

} 
```

并根据选择`ActionResult`像这样，

```
public ActionResult ViewAllPolicies()
{
    //mycode
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T18:08:47.970

除了返回 json，您还可以返回 PartialView 并在 .done 函数中抓取一个元素并将其替换为部分视图的结果。PartialView 操作基本上会返回 HTML 片段，因此您可以在页面上的任何位置添加内容：

```
$.ajax({
        url: urlToPartialViewAction,
        type: 'POST',
        dataType: 'JSON',
        data: '123'
    })
    .done(function (result) {
       $('#someDivPlaceholder').replaceWith(result);        
    }); 
```

你可以有一个链接或灰色 div 之类的东西，然后连接到它的点击事件，然后调用它，链接可能会显示“查看收据”，当你点击它时，你调用一个操作，返回带有收据的部分视图，等等当他们单击它时，div/link 被替换为结果。有点像您在社交网站上看到的“查看更多评论”链接。

请注意，您不能单独拥有局部视图，必须通过操作调用它

```
public PartialViewResult _GetReceipt(string id)
{
   ReceiptViewModel vm = //query for receipt data
   return PartialView(vm);//render partial view and return html fragment
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T16:56:35.580

看到这个[帖子](http://weblogs.asp.net/gunnarpeipman/archive/2010/07/26/how-to-make-ajax-requests-to-asp-net-mvc-application-using-jquery.aspx)

```
var url = '@Url.Action("ViewAllPolicies","YourController")';
    $.ajax({ url: url, success: DataRetrieved, type: 'POST', dataType: 'json' }); 
```

在控制器中

```
public ActionResult ViewAllPolicies()
{
    //Should return json format
} 
```

> url – 这是发送请求的 URL。在我的情况下，有一个名为联系人的控制器，它有一个名为 ListPartiesByNameStart() 的操作。此操作方法采用参数 nameStart（个人或公司的首字母）。成功 – 这是处理检索数据的 JavaScript 函数。您也可以在那里编写匿名函数，但我建议您使用带名称的函数，否则当函数增长时您的代码可能会变得混乱。type – 这是请求的类型。它是 GET 或 POST。我建议您使用 POST，因为默认情况下，ASP.NET MVC 禁止使用 JSON 格式的 GET 请求（稍后我将向您展示如何打开对 JSON 返回操作的 GET 请求）。dataType – 这是服务器预期返回的数据格式。如果您不将其分配给 value，则返回的结果将作为字符串处理。如果将其设置为 json，那么 jQuery 会为您构造 JavaScript 对象树，该树对应于从服务器检索到的 JSON。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-01T17:45:58.973

函数执行后，您需要对`select`控制器进行 AJAX 回调。您可以在函数中使用`jQuery.ajax()`（最常见的[AJAX 操作](http://api.jquery.com/jQuery.ajax/)的包装器）`select`，

```
function select(e) {
    var url = '@Url.Action("ViewAllPolicies", "PolicyController")';
    var selectedPolicy = $('#Options').val(); // The option selected

    $.ajax({
        url: url,
        type: 'POST',
        dataType: 'JSON',
        data: selectedPolicy
    })
    .done(function (data) {
        // Display the data back from you Controller
    });
} 
```

您可以查看[剑道网站](http://demos.kendoui.com/web/dropdownlist/index.html)以获取有关其工作原理的更多信息`DropDownList`。

# php - 通过锁定百分比了解 Mongo 保存超时

> ID：15162762
> 
> 赞同：7
> 
> 时间：2013-03-01T16:51:23.840
> 
> 标签：php, mongodb

我试图了解如何更好地确定我目前所看到的问题出在哪里。

目前我正在通过 cron 更新集合，每 15 分钟从第三方供应商下载信息（没有问题）。有时我需要进行 2 年的更新，并且当我看到这个问题时。

传入的是大约 300-600k 的结果，我正在使用 mongo->collection->save($item); 我对所有结果都有_id，所以（我认为）也被快速插入。

文档大小变化不大，开始时很小（12kb~）。

我将每个请求以大约 200 的速度批量下载到第 3 方服务器，格式化它们，然后使用 save 将它们一次插入一个到 mongo 中，并将安全插入设置为 true。

现在，当保存发生时，它看起来将我的锁定百分比提高到 20-30% 之间。我想知道如何追查为什么会发生这种情况，因为我相信这是我最终遇到超时（设置为 100 秒）的原因。

*   超时错误：MongoCursorTimeoutException Object->cursor 超时（超时：100000，剩余时间：0:0，状态：0）

*   Mongo 驱动程序：Mongo Native Driver 1.2.6（来自 PHP.net）

我目前使用的是带有 SSD 驱动器和 16gb 内存的 Mongo 2.2.1。

这是我在插入时遵循的 mongoStat 操作的示例：

```
 insert  query update delete getmore command flushes mapped  vsize    res        faults                locked db               idx miss %     qr|qw   ar|aw  netIn  netOut  conn  set          repl    time 
  0       0     201    0      215     203     0       156g    313g     1.57g      7                    mydb:36.3%               0               0|0     0|0   892k   918k    52    a-cluster    PRI     10:04:36 
```

我有一个带有辅助设置的主设置和一个位于它们前面的套利（根据文档建议），使用 PHP 进行插入。

任何帮助将不胜感激。

非常感谢您的参与

**更新**

我将所有项目存储在“MongoDoc”中，因为有时需要对每个元素进行格式化，在那里批量处理这些项目时，我将数据取出并插入为

```
$mongoData = $mongoSpec->getData();
try {
    foreach($mongoData as $insert) {
        $this->collection_instance->save($insert);
        $count++;
    }
} catch(Exception $e) {
    print_r($e->getTrace());
    exit;
} 
```

我会说我已经删除了安全写入，并且我已经看到超时发生的急剧减少，所以现在我将它归结为这一点（除非插入有问题..）

感谢您的时间和想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T20:27:55.327

你达到了 PHP 的最大执行限制？您正在使用哪个 Mongo 库？我使用的是 FuelPHP 的 MongoDb 库，并且仅 50 次插入需要将近 1 秒（因为每次写入都是经过确认的 fsync 操作），所以这并不让我感到惊讶。我的解决方案是仅在特定时间间隔进行 fsync 和写入确认，这样可以提供更好的性能，并且可以合理地保证没有出错。

更多信息： http:
[//docs.mongodb.org/manual/reference/command/fsync/](http://docs.mongodb.org/manual/reference/command/fsync/)
[http://docs.mongodb.org/manual/core/write-operations/#write-concern](http://docs.mongodb.org/manual/core/write-operations/#write-concern)

# assembly - Mips：无法让标签为装配工作

> ID：15162769
> 
> 赞同：1
> 
> 时间：2013-03-01T16:51:40.937
> 
> 标签：assembly, mips

# 这是我的代码：

```
hex:    bne $a0,$t1,elseif 
    li $t1,1
        li $t2,2
        li $v0,1       
        jr $ra         

elseif: bne $a0, $t2,else
        li $v0,6
        jr $ra

else:   addi $sp,$sp,-12
    sw $ra,$ra 0($sp) -
    addi $t3,$a0,-1   ~
    sll $t3, $t2,1
    sw $a0,$a0,4($sp) -
    sw $t3,8($sp)
    lw $ra            -
    lw $a0            -
    addi $t3,4
    sub $t4,$t3,$t0
    lw $t4             -
    sw $v0,$t4         -
    lw $ra             -
    lw $a0             -
    j $ra 
```

# 我想做的是：

```
 if (n == 1)
   return 1
 else if (n == 2)
   return 6
 else
   return 2*hex(n-1) - hex(n-2) + 4 
```

# 问题：我不完全理解堆栈（其他：标签）是如何工作的，或者为什么标签中需要递归

# php - 正则表达式说没有空格时文本中有空格

> ID：15162770
> 
> 赞同：0
> 
> 时间：2013-03-01T16:51:49.407
> 
> 标签：php, regex, preg-match, whitespace

我正在尝试检查字符串中的空格、制表符等 & 我正在使用这个：

```
if (preg_match('/\s*/', $username)) {
    echo 'no spaces allowed in username.';
} 
```

但是，即使没有，它也总是认为用户名中有空格。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-01T16:52:24.720

`*`表示零次或多次。

所以

`if (preg_match('/\s+/', $username)) {`

# java - JOGL 在调用 openGL 的绑定 c 实现之前是否对任何数据进行编组？

> ID：15162773
> 
> 赞同：2
> 
> 时间：2013-03-01T16:51:54.590
> 
> 标签：java, opengl, jogl

有谁知道 JOGL 在调用 openGL 的绑定 c 实现之前是否对数据进行任何编组？据我了解，JOGL 仅在 java 中公开 openGL 并没有做更多的事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-18T19:21:29.607

我查看了文档和 API，在我看来，它接近 JOGL 实际支持的功能的 1 对 1 映射。没有编组。

# javascript - 使用 javascript 和 CSS 的加载器图像隐藏可见性效果

> ID：15162776
> 
> 赞同：-1
> 
> 时间：2013-03-01T16:52:00.413
> 
> 标签：javascript, css, css-animations

在 JSFiddle [http://jsfiddle.net/AmHSC/](http://jsfiddle.net/AmHSC/)

```
 <img src="http://www.laneaviation.com/wp-content/themes/laneaviation/images/loading.gif" id="loader" />
    var loader = document.getElementById('loader'); 
```

我希望这个图像被 javascript 隐藏。这个想法是显示图像，一旦我的程序返回 false，图像就会被隐藏，向用户显示加载效果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T16:54:59.243

`loader.style.display = 'none';`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T16:55:03.927

```
loader.style.display = "none"; // <-- You can use style method to style any element 
```

# css - 是否有跨浏览器的 CSS 语言抽象之类的东西？

> ID：15162784
> 
> 赞同：2
> 
> 时间：2013-03-01T16:52:15.373
> 
> 标签：css, cross-browser

我今天设置了一个 div 最小高度，不得不这样做（感谢[http://css-tricks.com](http://css-tricks.com/snippets/css/cross-browser-min-height/)）：

```
min-height: 500px; 
height:auto !important; 
height: 500px; 
```

好吧，没什么大不了的，但这有点令人讨厌——为了让 min-height 跨浏览器工作，我不得不花 5 分钟在谷歌上搜索它并确保它有效。

我想知道是否有一种跨浏览器的 css 语言可以抽象出这些东西。例如，我想表达一次 min-height 并让它适用于所有浏览器，就像 jquery 抽象出这些东西一样。也许在像 Styl 这样的标记中。这样的动物存在吗？

# metadata - Open Graph 协议的服务列表

> ID：15162787
> 
> 赞同：2
> 
> 时间：2013-03-01T16:52:20.867
> 
> 标签：metadata, search-engine, facebook-opengraph

我在这里找到的参考资料：
[Facebook 以外的服务是否使用 Open Graph？](https://stackoverflow.com/questions/10397510/are-open-graph-tags-just-for-facebook)

当然，通过互联网搜索一下 - 主要来自博客的自写资源，不包含直接引用的信息/链接。但是，我没有找到任何地方可用的合理（体面）列表的任何直接答案。

我还查看了 Schema.org 的微数据的比较，但没有列表：
[OpenGraph 或 Schema.org？](https://stackoverflow.com/questions/6402528/opengraph-or-schema-org)

那么，
除了 Facebook 之外，还有哪些使用 OGP 的服务呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-06-05T13:54:48.737

除了 Facebook，还有一些“使用”开放图形协议 (OGP) 的 Web 服务：

*   **Google 搜索**使用 OGP（以及其他标准）在搜索结果中显示丰富的摘要。查看他们的[结构化数据测试工具](http://www.google.com/webmasters/tools/richsnippets)。
*   **Google+**也[利用](https://developers.google.com/+/web/snippet/)了 OGP。
*   **Twitter**将 OGP 用于[Twitter 卡片](https://dev.twitter.com/docs/cards/getting-started)。“当 Twitter 卡处理器在您的页面上查找标签时，它首先检查 Twitter 属性，如果不存在，则回退到支持的 Open Graph 属性。”
*   **Bing**使用 OGP 显示丰富的搜索结果。请参阅他们的[网站管理员帮助文档](http://www.bing.com/webmaster/help/marking-up-your-site-with-structured-data-3a93e731)。
*   **根据 Yammer 的开发， **Embed.ly使用 OGP** [。文档](https://developer.yammer.com/opengraph/)。这也意味着每个使用 Embed.ly 的服务也将受益于 OGP。**
***   **Mixi**（流行的日本社交网站）似乎使用 OGP。检查他们的[开发。文档](http://developer.mixi.co.jp/en/connect/mixi_plugin/mixi_check/spec_mixi_check/)。*   **Yandex**似乎至少为视频编制了 OGP 索引。这是他们的[帮助文档](http://help.yandex.ru/webmaster/?id=1116426)（俄语）。*   **Blekko**似乎根据其 CTO的[回答使用 OGP :)](https://stackoverflow.com/a/15194159/848845)*   **根据这篇[博文，](http://montrics.blogspot.gr/2010/10/its-official-socialcast-reach-is-live.html) **Socialcast** (vmware) 似乎支持它。****

 ***** * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T03:35:44.630

blekko 为我们的 izik 平板电脑搜索应用程序和 ROCKZi 新闻阅读应用程序使用 Open Graph 元标记来帮助为链接选择好的图像 - 两者都显示每个结果链接的图像。

我们发现 og:image 在生产中非常普遍且可靠。****

# ruby-on-rails - 如何从控制器修改用户的一个属性？

> ID：15162794
> 
> 赞同：0
> 
> 时间：2013-03-01T16:52:38.070
> 
> 标签：ruby-on-rails, ruby-on-rails-3, controller

在我的应用程序中，普通用户应该能够点击一个按钮并成为超级用户。在控制台中，我可以获取一个用户然后执行`user.super=true`，`user.save`它可以工作。我将下面的代码放在我的控制器中，但它会闪烁“那不起作用”错误，而不是成功更改用户。我如何解决它？

```
def become_super
    user = current_user
    user.super = true
    if user.save
      flash[:success] = "You are super"
    else
      flash[:error] = "That didn't work"
      redirect_to apply_path
    end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T17:30:47.040

如评论中所述，您可能在验证时遇到问题。

您可以完全跳过验证（毕竟您只想让他们成为超级用户）

```
current_user.update_attribute(:super, true) # please note, singular! 
```

或者你也可以让用户知道发生了什么样的验证错误（[参见 ActiveRecord:Error](http://api.rubyonrails.org/v2.3.8/classes/ActiveRecord/Errors.html)）

```
user.super = true
if user.save
  # as before
else 
  flash[:error] = "Please fix your user record first, there are " + 
                  "validation errors: #{user.errors.full_messages.join(", ")}"
  redirect_to apply_path
  # Note: Do not use this pattern for normal CRUD actions!
end 
```

请注意，super 有一个面向对象的含义，应该避免...

# model-view-controller - Telerik MVC 网格中的 DropDownList 列

> ID：15162797
> 
> 赞同：2
> 
> 时间：2013-03-01T16:52:49.250
> 
> 标签：model-view-controller, drop-down-menu, telerik, grid

我有以下网格定义，其中 PreRemStatus 列无法与 ClientTemplate 一起正常工作。还有另一种方法可以完成在网格中添加 DropDownList 列吗？提前感谢任何可以对此有所了解的人。

@(Html.Telerik().

```
Grid(Model).
Name("grdCollections").
Columns(Sub(columns)

                columns.Bound(Function(o) o.PreRemStatus).Width(150).ClientTemplate 
```

(Html.Telerik.DropDownList.Name("ddlPreRemStatus").BindTo(New SelectList(prc.GetRemStatusList().ToList())).ToHtmlString())

```
Groupable().
Sortable().
Pageable().
Filterable().
Scrollable().
DataBinding(Function(db) db.Ajax.Select("Grid_Ajax_Select", "PreRemediation", New With {.deployID = ViewData("DeployID") }).Update("UpdateGridPartial", "PreRemediation")).
DataKeys(Function(keys) keys.Add("CollectionId")).
Editable(Function(edit) edit.Mode(GridEditMode.InCell)).
ToolBar(Function(tb) tb.SubmitChanges()).
HtmlAttributes(New With {.style = "width: 1150px"}) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-20T06:36:52.330

```
.Columns(columns=>
{
columns.Bound(p => p.Id)
             .Width(100)
             .Title("PreRemStatus")
.ClientTemplate(Html.Telerik()
.DropDownList()
.Name("ddlPreRemStatus<#= Id #>")
.BindTo(new SelectList((System.Collections.IEnumerable)ViewData["PreRemStatus"], "Value", "Text")).ToHtmlString()
)
} 
```

# javascript - MongoDB JavaScript 产生大量结果

> ID：15162802
> 
> 赞同：0
> 
> 时间：2013-03-01T16:53:00.843
> 
> 标签：javascript, python, mongodb, yield

我正在尝试通过 Python 从 MongoDB 查询大量结果。我通过 JavaScript 执行此操作，因为我想在树状结构中获得类似孙辈的东西。我的代码如下所示：

```
col = db.getCollection(...)
var res = new Array();
col.find( { "type" : ["example"] } ).forEach(
  function(entry) 
  {
    v1 = col.find( {"_id" : entry["..."]} )
    ... (walk through the structure) ...
    vn = ...
    res.push([v1["_id"], vn["data"]]);
  } 
);         
return res; 
```

现在，我遇到了问题，结果数组变得非常（太大）并且超出了内存。有没有办法产生结果而不是将它们推入数组？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T13:09:22.020

好吧，我在MongoDB的源代码中找到了一行，它清除了所有使用超过10次的JavaScript。因此，如果不希望在数据库服务器上进行任何更改，则需要多次查询数据库并借助 skip() 和 limit() 函数通过选择项目数量来向客户端发送批量。这工作得非常快。谢谢你的帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T12:44:04.400

好吧，我想我知道，你的意思。我创建了一个如下结构：

```
var bulksize = 1000;
var col = db.getCollection("..");       
var queryRes = col.find( { ... } )

process = function(entity) { ... }

nextEntries = function()
{
  var res = new Array();
  for(var i=0; i<bulksize; i++)
  {            
    if(hasNext())
      res.push(process(queryRes.next()));
    else
      break;
  }  
  return res;
}

hasNext = function()
{
  return queryRes.hasNext();
} 
```

该脚本将结果分成 1000 个条目。从 Python 端 eval 注意到脚本，然后我执行以下操作：

```
while database.eval('hasNext()'):
    print "test"
    for res in database.eval('return nextEntries()'):
        doSth(res) 
```

有趣的是，控制台总是说：

```
test
test
test
test
test
test 
```

然后我得到错误：

```
pymongo.errors.OperationFailure: command SON([('$eval', Code('return nextEntries()', {})), ('args', ())]) failed: invoke failed: JS Error: ReferenceError: nextEntries is not defined nofile_a:0 
```

这意味着，第一次调用 nextEntries() 有效，但随后该函数不再存在。会不会是 MongoDB 做了一些类似于清除 JavaScript 缓存的事情？问题不取决于bulksize（使用10、100、1000、10000 进行测试，结果始终相同）。

# ruby-on-rails - 浏览超过两级深度的关系

> ID：15162805
> 
> 赞同：0
> 
> 时间：2013-03-01T16:53:06.983
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2, rails-activerecord, eager-loading

从上到下，我的 table 和 has_many 之间有 belongs_to 关系，从另一个方向。

```
ReportTarget
Report
Manager
Organization 
```

我想对这些做一个急切的负载。我想我可以走得这么深，但如果想要更深，我不知道语法，这正是我所需要的。我想从组织一路走到 ReportTarget

```
@blah = Organization.includes([managers: :reports]).find(params[:id]) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T16:55:46.147

尝试

```
@blah = Organization.includes(managers: { reports: :report_targets }).find(params[:id]) 
```

# excel - 修改与手机相关的Excel列

> ID：15162806
> 
> 赞同：-1
> 
> 时间：2013-03-01T16:53:07.957
> 
> 标签：excel

我有一列电话号码，例如

```
344-444022-22
234325343
(545)3454-3454 
```

这些是一些格式，我想将所有电话号码转换为简单的 345354 格式，没有破折号或括号，而且我想在所有数字前面添加美国代码“1”

我怎么能在excel中做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T17:02:53.207

假设 A1 是电话号码所在的参考，您可以在单元格中使用以下公式删除字符 '(' '-' 和 ')'

```
=SUBSTITUTE(SUBSTITUTE(SUBSTITUTE(A1,"(",""),")",""),"-","") 
```

如果这些是在不同格式中使用的唯一字符，则为所有电话号码复制此公式应该可以工作。

**编辑**

如果您想删除另一个字符，假设为 ' '，您可以简单地用另一个 SUBSTITUTE 函数围绕这个公式，其工作原理如下：

```
SUBSTITUTE(source_text,text_to_replace,replace_with_this) 
```

制作公式：

```
=SUBSTITUTE(SUBSTITUTE(SUBSTITUTE(SUBSTITUTE(A1,"(",""),")",""),"-","")," ","") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T17:07:03.063

你可以使用一个公式：

```
=1&SUBSTITUTE(SUBSTITUTE(SUBSTITUTE(A1,"-",""),")",""),"(","") 
```

可能有更简洁的方法来做到这一点。但他应该工作。

# java - 从自定义组件访问文本而不使用

> ID：15162811
> 
> 赞同：2
> 
> 时间：2013-03-01T16:53:28.013
> 
> 标签：java, adobe, aem

我有一个自定义组件，其中包含两个不同的文本对话框选项卡 text1 和 text2。通常，您使用 输出`<cq:text property="text" tagClass="text" />`，但我需要在输出之前确定 text2 是否包含内容。所以我试图首先将它分配给一个局部变量。

```
<%
 String text2 = properties.get("text2", String.class);
%>
<cq:text property="text1" tagClass="text" />
<%
  if (text2 != null) {
    out.println(text2);
  }
%> 
```

但是，我收到错误：**无法解析 text2**

我是否缺少对该变量的某种类型的引用？还是不能像上面那样在本地引用基于 par 的文本变量？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-01T20:40:53.400

使用大卫建议设置变量 text2，

```
<%
  String text2 = properties.get("text2", "");
%> 
```

您将需要在 if 语句中更改您的条件，因为您所拥有的永远是正确的。

解释：

如果属性存在 text2 将获取属性的字符串值，包括空字符串或仅包含空格的字符串。如果该属性不存在，则将 text2 设置为默认的空字符串。在 Java 中，空字符串不为空，因此 if 语句中的条件将始终为真。更好的检查是：

```
<%
  if (org.apache.commons.lang3.StringUtils.isNotBlank(text2)) {
    out.println(text2);
  }
%> 
```

仅当 text2 不为 null 不是空字符串或仅包含空格字符的字符串时，才会返回 true。org.apache.commons.lang3 在 CQ5 中提供。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T17:10:28.723

第二个参数`properties.get()`是一个默认值，而不是一个类。所以试试这个：

```
<%
 String text2 = properties.get("text2", "");
%> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-09T09:15:13.287

这将起作用：

```
<%
 String text2 = properties.get("text2", String.class);
%>
<cq:text property="text1" tagClass="text" />
<%
  if (text2 != null && !("".equals(text2.trim()))) {
%>
   <%= text2 %>
<%  
  }
%> 
```

它只是修剪文本并检查它是否为空。如果您按照上面的建议（以及[此处](http://aem.matelli.org/fetching-properties-from-dialogs/)所述）更改第二个参数，您也可以删除空检查。

# xcode - 圆形矩形按钮

> ID：15162813
> 
> 赞同：0
> 
> 时间：2013-03-01T16:53:42.450
> 
> 标签：xcode, cocoa-touch, button, rounding

因此，当我将 iphone 5 模拟器用于 xcode 时，我的圆形反应按钮都在正确的位置。但是当我使用 iphone 4 模拟器时，按钮会四处移动并变形。我怎样才能让这不会发生？无论我使用什么版本的手机，我都希望按钮保持在同一个地方。例如，我将 5 个按钮垂直放置在屏幕左侧。当我使用 iphone 5 模拟器时，按钮位于正确的位置。我使用 iphone 4 模拟器，按钮都被平滑了。谢谢

# android - 为什么 removeOnGlobalLayoutListener 会抛出 NoSuchMethodError？

> ID：15162821
> 
> 赞同：43
> 
> 时间：2013-03-01T16:54:11.003
> 
> 标签：android

我有一些代码可以使用成功编译`ViewTreeObserver#removeOnGlobalLayoutListener(...)`，当它运行时，这个方法会抛出`NoSuchMethodError`. 为什么？

* * *

## 回答 #1

> 赞同：150
> 
> 时间：2013-03-01T16:59:52.013

里面有*两种*方法`ViewTreeObserver`几乎同名。

[`removeOnGlobalLayoutListener(ViewTreeObserver.OnGlobalLayoutListener victim)`](http://developer.android.com/reference/android/view/ViewTreeObserver.html#removeOnGlobalLayoutListener%28android.view.ViewTreeObserver.OnGlobalLayoutListener%29)

( **on** then **global** ) 是在 API 16 中添加的一种方法。它取代了

[`removeGlobalOnLayoutListener(ViewTreeObserver.OnGlobalLayoutListener victim)`](http://developer.android.com/reference/android/view/ViewTreeObserver.html#removeGlobalOnLayoutListener%28android.view.ViewTreeObserver.OnGlobalLayoutListener%29)

( **global** then **on** ) 自 API 1 以来就存在，但现在已弃用。

这两种方法都可以在编译时出现（如果您正在针对 Jellybean 或更高版本构建），但较新的方法将在预 Jellybean 设备上失败。

此代码阻止了错误：

```
try {
    thing.removeOnGlobalLayoutListener(victim);
} catch (NoSuchMethodError x) {
    thing.removeGlobalOnLayoutListener(victim);
} 
```

这段代码也是如此：

```
if (Build.VERSION.SDK_INT < Build.VERSION_CODES.JELLY_BEAN) {
    thing.removeGlobalOnLayoutListener(victim);
} else {
    thing.removeOnGlobalLayoutListener(victim);
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-01T16:58:05.897

我假设您正在谈论 ViewTreeObserver 类中的 removeOnGlobalLayoutListener 。此方法是在 API 级别 16 中添加的。我最好的猜测是您尝试在运行旧版本 Android 的设备上使用它，这就是找不到它的原因。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-02-28T19:01:23.420

我有工作代码

```
public static void removeOnGlobalLayoutListener(View v, ViewTreeObserver.OnGlobalLayoutListener listener){
    if (Build.VERSION.SDK_INT < 16) {
        v.getViewTreeObserver().removeGlobalOnLayoutListener(listener);
    } else {
        v.getViewTreeObserver().removeOnGlobalLayoutListener(listener);
    }
} 
```

# ruby-on-rails - Rails Cookie 检测脚本失败

> ID：15162822
> 
> 赞同：0
> 
> 时间：2013-03-01T16:54:11.827
> 
> 标签：ruby-on-rails, ruby, cookies, session-cookies

我想确保用户为我的网站启用了 cookie，所以我使用[了本指南](http://clearcove.ca/2009/09/rails-cookie-detection/)。

但是，当我运行我的服务器时，我发现了这个错误：

```
syntax error, unexpected $end, expecting keyword_end
map.cookies_test “cookie_test”, :controller... 
```

这是我的 application_controller.rb ：

```
class ApplicationController < ActionController::Base
    protect_from_forgery
    include CookieDetection
    include SessionsHelper
end 
```

和我的 routes.rb ：

```
Basketball::Application.routes.draw do

  map.cookies_test “cookie_test”, :controller => “application”, :action => “cookie_test”

  resources :games 

  resources :teams

  get "teams/new"
  get "games/new"

  resources :users
  resources :sessions, only: [:new, :create, :destroy]

  root to: 'static_pages#home'

  match '/signup',  to: 'users#new'
  match '/signin',  to: 'sessions#new'
  match '/signout', to: 'sessions#destroy', via: :delete  

  match '/help',    to: 'static_pages#help'
  match '/about',   to: 'static_pages#about'
  match '/contact', to: 'static_pages#contact'

end 
```

## 更新

我已将引号从“智能”引号更改为普通引号（根据 Edward），但现在出现错误：

```
undefined local variable or method `map' for#
<ActionDispatch::Routing::Mapper:0x007ff9ca996800> (NameError) 
```

## 更新

我已将 Map 更改为 Match（根据 Edward），现在出现错误：

```
`match': wrong number of arguments (0 for 1) (ArgumentError) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T17:09:20.967

在你的路线文件中，看起来你有“智能”引号“”，而不是普通的“

我希望您错误地剪切和粘贴了它们。

编辑

* * *

更改地图以匹配 - 地图是 rails 2

# backbone.js - 下划线模板不会在主干视图重新渲染上渲染元素

> ID：15162829
> 
> 赞同：0
> 
> 时间：2013-03-01T16:54:47.423
> 
> 标签：backbone.js, underscore.js

我遇到了一个以前从未见过的非常令人困惑的问题。我想知道我是否遗漏了一些非常明显的东西。

我有一个这样的模板（我用[Underscore](http://underscorejs.org/)编译）：

```
<a href="#advanced-search" data-toggle="modal">
  Advanced search
</a>

<div id="advanced-search">
  <div class="modal-header">header</div>
  <div class="modal-body">
    <form id="advanced-search-form">
      // This has form elements
    </form>
  </div>
  <div class="modal-footer">footer</div>
</div> 
```

问题是每当我重新渲染使用模板的主干视图时，表单元素都不会渲染！初始渲染工作正常。

我尝试通过在表单元素中`advanced-search-form`嵌套 a`<div id="advanced-search-form">`并从表单元素中删除 id 来将表单元素与 id 分开。结果是嵌套`div`的被渲染，而`form`仍然没有。

我需要表单元素才能使用`serializeArray`，[它只适用于表单元素](http://docs.jquery.com/Ajax/serializeArray#overview)。

我想一种解决方法是编写一个可以序列化*任何*元素中的输入元素的函数，但这并不理想，我真的很想知道为什么会发生这种奇怪的事情。

感谢您的关注！

编辑：渲染代码现在我不是基于任何集合或模型事件重新渲染。我通过父视图中链接上的单击事件手动触发重新渲染。以下是我的两个视图（CoffeeScript）的基本结构：

```
AdvancedSearchView = Backbone.View.extend
  template: _.template AdvancedSearchTpl   #available via requirejs      

  render: ->
    @$el.html @template() 

ParentView = Backbone.View.extend
  initialize: ->
    _.bindAll @
    $('body #refresh').livequery 'click', @refreshAdvancedSearch

  render: ->
    if !@advancedSearchElem #cache the view to save state
      @advancedSearchView = new AdvancedSearchView
      @advancedSearchElem = @advancedSearchView.render().el
    $('#content').html @advancedSearchElem

  refreshAdvancedSearch: ->
    @advancedSearchElem = @advancedSearchView.render().el  #from here, the template is rendered without the form element
    @render()

parentView = new ParentView
parentView.render() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T21:30:51.010

后来我意识到我正在渲染`<form>`另一个`form`标签，我相信 Chrome 会通过删除内部`form`标签自动修复无效的 html。这可能是我的问题，因为`console.logging`模板的 html 输出包含内部表单标记。

# ios - 如何使用 nsdateformatter 到委内瑞拉

> ID：15162835
> 
> 赞同：0
> 
> 时间：2013-03-01T16:55:07.770
> 
> 标签：ios, objective-c, cocoa, nsdateformatter, nslocale

我正在尝试在日历上安排一个日期，该日期有一个开始时间和一个结束时间，如果时区在美国，一切正常，并且更改日期没有帮助，我需要委内瑞拉什么应该我按照我放置generica的方式做，无论时区如何，都可以在任何地方为我服务？

在这里，我将代码保留为数据，并在制作日期格式时将其带到我身边。

```
 comes the date in the following format: 12/10/2012 05:00 pm

  EKEvent* event = [EKEvent eventWithEventStore:eventStore];
NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
[dateFormatter setTimeZone:[NSTimeZone localTimeZone]];
[dateFormatter setDateFormat:@"dd/MM/yyyy hh:mm:ss a"];
  horafin = [dateFormatter dateFromString:inicio];
horafin  = [horafin dateByAddingTimeInterval:3600];
horainicio = [dateFormatter dateFromString:inicio];
[dateFormatter release];

NSString *ti=[[NSString alloc]initWithString:title];
NSLog(@"");
event.title =@"juego";
event.startDate = horainicio;
event.endDate = horafin;
event.URL = [NSURL URLWithString:@"http://pagina.com"];
event.notes = ti;
event.allDay = NO;
vc.event = event;
vc.editViewDelegate = self;
[self presentViewController:vc animated:YES completion:nil]; 
```

仅当您更改时区时，事件日历正确呼叫我才会失败，因为我没有正确选择日期，我可以做什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T18:55:21.190

我使用以下代码来获取所需的时区转换日期时间：

```
- (NSString *) getUTCDate : (NSString *) inputDate
{
    NSDateFormatter *utcDateFormatter = [[NSDateFormatter alloc] init];
    [utcDateFormatter setDateFormat:@"dd-MMM-yyyy HH:mm:ss Z"];
    [utcDateFormatter setTimeZone:[NSTimeZone timeZoneWithName:@"UTC"]];
  //  [utcDateFormatter setTimeZone :[NSTimeZone timeZoneForSecondsFromGMT: 0]];        
    // utc format
    NSDate *dateInUTC = [utcDateFormatter dateFromString: inputDate];        

    return dateInUTC;
} 
```

`dateInUTC`GMT 时区的日期在哪里。

您需要在通话中替换自己的时区`[NSTimeZone timeZoneWithName:@"UTC"]`，它应该可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-30T09:23:21.153

只需更改代码中的一行代码...

```
[dateFormatter setTimeZone:[NSTimeZone timeZoneWithName:@"UTC"]]; 
```

This will set time format in universal which doesnot change with region or day light saving time.

# asp.net-mvc - asp.net MVC 中的 UrlActionResult

> ID：15162838
> 
> 赞同：1
> 
> 时间：2013-03-01T16:55:15.140
> 
> 标签：asp.net-mvc, actionresult

我想知道是否有任何可用于 asp.net mvc 的开源操作结果代码，我可以在其中传递一个 URL，它会响应内容。

就像有一些内置的 Action 结果一样

*   文件结果
*   文件流结果

我想构建一个自定义操作结果，我可以在其中传递一个 URL（基本上是一个 mp3 url），该 URL 将下载到内存中，内容将流式传输到当前执行的响应。

**如果服务器和客户端支持，它还应该支持恢复下载。这对我来说是必须的。**

```
public UrlActionResult DownloadUrl(string url)
{
     return new UrlActionResult("http://www.example.com/audiofile.mp3");
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-18T21:53:13.850

对于基本场景，您可以使用如下内容：

```
public class DownloadResult : ActionResult
{
    private readonly FileStreamResult _fileStreamResult;

    public DownloadResult(string url, string contentType)
    {
        using (var myWebClient = new WebClient())
        {
            var myStream = myWebClient.OpenRead(url);
            _fileStreamResult = new FileStreamResult(myStream, contentType);
        }
    }

    public override void ExecuteResult(ControllerContext context)
    {
        _fileStreamResult.ExecuteResult(context);
    }
} 
```

但是，如果您想进行简历下载，它会变得更加复杂。[这是一篇很棒的文章](http://tpeczek.blogspot.co.uk/2011/10/range-requests-in-aspnet-mvc.html)，其中包含示例代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-18T21:59:17.303

如果您不需要隐藏网址，只需使用重定向。使用重定向并节省您的服务器带宽：

```
public ActionResult DownloadUrl(string url)
{
     return new Redirect("http://www.example.com/audiofile.mp3");
} 
```

# node.js - 在多核服务器上启动多个 Node 实例的正确方法是什么？

> ID：15162843
> 
> 赞同：3
> 
> 时间：2013-03-01T16:55:31.717
> 
> 标签：node.js, nginx, express, cluster-computing

我有一个想要在多核（2CPU * 2Cores = 4Cores）服务器上运行的 Node.js 应用程序。在阅读了关于这个主题的一堆 Stack Overflow 线程之后，我决定在 4 个不同的端口上启动 4 个独立的节点实例，并使用 Nginx 在它们之间进行负载平衡。我决定在节点集群上使用这种方法。

以下是我试图回答的问题：

1.  在 2cpu * 2cores/cpu = 4 核心服务器与 1cpu * 4cores/cpu = 4core 服务器上启动 4 个节点实例的方式有什么不同。我认为没有任何区别，只是想确认一下。

2.  我有一个 conf 文件来启动我的服务。这个 conf 文件实际上是一个脚本，它驻留在`/etc/init`并启动我的 Node 应用程序。我应该从这 1 个 conf 文件启动 4 个实例，还是应该创建 4 个 conf 文件并每个 conf 文件启动一个实例？

    同样，我觉得后一种方法更好，但想确认一下。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T22:11:33.773

你为什么决定：

1.  使用 nginx 进行负载均衡？haproxy 是一个更好的解决方案。
2.  当有一个集群模块为您执行此操作时，手动启动 n 个进程？

    如果你启动 n 个不同的进程，你需要监听 n 个不同的端口。

    如果您使用集群模块，则不需要任何负载均衡器，因为此工作是在内部完成的，并且 n 个工作人员将侦听同一端口。如果工人死亡，您会收到通知，基本上您可以轻松管理他们。

所有工作人员都可以打开/读取/写入/关闭同一个文件，您不需要 n 个配置文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T19:26:08.743

1.  每个核心 1 个实例是一个很好的经验法则，但是如果您还在同一台服务器上运行一些服务（数据库、redis、memcache、队列......），您可能希望启动更少的实例，这样这些实例就不会“打架”为CPU。

2.  您最终将需要重新启动单个实例，因为一个实例崩溃了，或者使用了太多内存，或者其他原因。所以单独的脚本会更可取，甚至是允许您单独或一起控制实例的脚本（这最初是更多的工作）。

# jquery - FullCalendar (jQuery) refetchEvent 不会显示事件

> ID：15162844
> 
> 赞同：2
> 
> 时间：2013-03-01T16:55:32.777
> 
> 标签：jquery, fullcalendar

我曾经有

```
$('#calendar').fullCalendar({
    //some properties...
    events: "/Agenda/GetEvents/",
}); 
```

它工作正常，我的事件显示正确。现在我想更新组合框选择上的事件（重新获取），所以这就是我所做的更改：

```
$('#calendar').fullCalendar({
    //some properties...
    events: function (start, end) {
        $.ajax({
            url: '/Agenda/GetEvents/',
            dataType: 'json',
            data: {
                start: Math.round(start.getTime() / 1000),
                end: Math.round(end.getTime() / 1000),
                utilisateur: $("#Utilisateur option:selected").val()
            }
        });
        $('#Calendar').fullCalendar('refetchEvents');
    },
}); 
```

/Agenda/GetEvents/ 的 url 被正确调用并返回一个事件，但它不会再显示在日历上。难道我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T17:05:31.783

在此处查看文档以获取具有单一来源的事件。

[完整日历](http://arshaw.com/fullcalendar/docs/event_data/events_function/)

很少需要改变。

```
$('#calendar').fullCalendar({
events: function(start, end, callback) {
    $.ajax({
        url: 'myxmlfeed.php',
        dataType: 'xml',
        data: {
            // our hypothetical feed requires UNIX timestamps
            start: Math.round(start.getTime() / 1000),
            end: Math.round(end.getTime() / 1000)
        },
        success: function(doc) {
            var events = [];
            $(doc).find('event').each(function() {
                events.push({
                    title: $(this).attr('title'),
                    start: $(this).attr('start') // will be parsed
                });
            });
            callback(events);
        }
    });
} 
```

});

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T20:11:40.990

解决方案很难找到，但我在这里找到了一种可行的方法

[http://mikesmithdev.com/blog/jquery-full-calendar/](http://mikesmithdev.com/blog/jquery-full-calendar/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-18T05:06:56.447

阅读代码几个小时后，我发现关于 allDay 选项的意外配置。每个事件必须有 allDay=false，像这样：

```
evts.push({ title: "Teste", start: "2014/01/18 10:30", end: "2014/01/18 13:00", allDay: false });
callback(evts); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-03-10T14:08:20.660

删除回调函数只需从成功块中调用它
`$('#calendar').fullCalendar('refetchEvents');`

# highcharts - 在 highcharts 中查找每个系列中的数据点数

> ID：15162853
> 
> 赞同：4
> 
> 时间：2013-03-01T16:55:53.227
> 
> 标签：highcharts

有没有办法确定 Highcharts 图表的每个系列中的数据点数量？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T17:47:15.940

假设您想从第一个系列中获得。

```
console.log(chart.series[0].data.length); 
```

[**演示**](http://jsfiddle.net/ricardolohmann/tJ2Ak/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-02-16T16:56:36.747

使用 jQuery 并假设您已将图表定义为名为`chart`...

```
$.each(
    chart.series,
    function(){
        console.log(this.name + ": " + this.data.length + " data points.");
    }
); 
```

# cloud-foundry - 在 cloudfoundry 上启动应用程序时出现 310 错误，“找不到 web.xml”

> ID：15162854
> 
> 赞同：2
> 
> 时间：2013-03-01T16:55:53.893
> 
> 标签：cloud-foundry

今天，当我尝试运行来自 git@github.com:SpringSource/cloudfoundry-samples.git 的示例应用程序 hello-java 时，启动应用程序时出现以下错误，

开始 hello-java-from-linux-1... FAILED CFoundry::AppStagingError: 310: Staging failed: 'Staging task failed: Staging plugin failed: /var/vcap/packages/stager/vendor/bundle/ruby/1.9\. 1/gems/vcap_staging-0.1.64/lib/vcap/staging/plugin/java_web/plugin.rb:28:in `block in stage_application': Web application staging failed: web.xml not found (RuntimeError) from /var/vcap/packages/stager/vendor/bundle/ruby/1.9.1/gems/vcap_staging-0.1.64/lib/vcap/staging/plugin/java_web/plugin.rb:22:in`chdir' 来自 /var/vcap/packages/stager/vendor/bundle/ruby/1.9.1/gems /vcap_staging-0.1.64/lib/vcap/staging/plugin/java_web/plugin.rb:22:in `stage_application' from /var/vcap/packages/stager/bin/run_plugin:19:in`'

我检查了maven构建的目标war“hello-java-1.0.war”，web.xml已经打包在WEB-INF下。

这里是示例应用程序的 pom.xml，http://maven.apache.org/maven-v4_0_0.xsd"> 4.0.0 org.cloudfoundry.samples hello-java 1.0 war javax.servlet servlet-api 2.5 提供

这里是 vmc 版本和 maven 版本信息，-vmc 0.4.7，-Apache Maven 3.0.4

任何人都可以帮助解决这个问题吗？非常感谢！

顺便说一句，我搜索了 cloudfoundry 支持站点，发现了一些检查日志文件的提示，但是似乎我无法获取日志文件来检查真正的错误，我在尝试获取日志文件时遇到了以下问题。

[niy@niy-fedora hello-java]$ vmc files hello-java-from-linux-1 logs 正在获取文件内容... FAILED CFoundry::AppStopped: 305: Operation not allowed on a stop app 有关更多信息，请参阅~ /.vmc/崩溃

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T12:06:19.900

使用 vmc 部署 java 或 spring WAR 时，执行 vmc 时与 WAR 文件位于同一目录中很重要。

# javascript - jquery attr() 方法不起作用，但 javascript 版本可以

> ID：15162856
> 
> 赞同：1
> 
> 时间：2013-03-01T16:56:05.920
> 
> 标签：javascript, jquery, dom

这是我当前的 javascript 代码

```
var image = iframe.contentWindow.document.getElementsByClassName('productVisu').getElementsByTagName('img').getAttribute('src'); 
```

这适用于检索图像的 URL 属性。但是，当我尝试这个 jquery 版本时：

```
var iframe = document.getElementsByTagName('iframe')[0];
var doc = iframe.contentWindow.document;
var image = $('iframe').contents().find('.productVisu').$('img').attr('src'); 
```

我得到这不是一个函数的 Firefox 错误。如何解决此问题并使 jquery 版本正常工作？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T16:59:24.060

改变这个：

```
$('iframe').contents().find('.productVisu').$('img').attr('src'); 
```

至：

```
$('iframe').contents().find('.productVisu img').attr('src'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T17:03:07.943

我不确定您的原始代码是如何工作的，因为`getElementsByClassName`并`getElementsByTagName`返回节点列表，而不是单个节点。

试试这个：

```
var image = iframe.contentDocument.querySelector(".productVisu img").src; 
```

[当你可以使用Vanilla JS](http://vanilla-js.com/)时，永远不要使用 jQuery 。这就像用大锤转动螺丝一样。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-01T17:04:31.373

我不明白您的示例中前两行代码的必要性。你可以很容易地做到这一点：

```
var image = $('iframe').eq(0).find('.productVisu img').attr('src'); 
```

# regex - 正则表达式匹配字符串包括可选分隔符内的内容

> ID：15162857
> 
> 赞同：1
> 
> 时间：2013-03-01T16:56:16.923
> 
> 标签：regex, string, parentheses

我正在尝试使用正则表达式匹配一个字符串，并且我非常接近让它以我想要的方式工作。

假设我有一个字符串 5A(test1),4B,3C(test2)

我做的第一件事是用逗号将字符串分开，所以我最终得到了一个数组中的 3 个字符串

*   5A(测试1)
*   4B
*   3C(测试2)

现在我想提取以下信息；括号中的数字、字母和内容。但括号是可选的。

这是我的模式 `([1-9][0-9]*)([AaBbCcIiFfPpSs]+)(\(.*\))?`

除了包含括号外，这有效。所以 当我想要的是 5 A test1时，我得到
5 A (test1)

我也试过 `([1-9][0-9]*)([AaBbCcIiFfPpSs]+)\(([^)]*)\)?`
但是这在没有括号的字符串上不匹配，所以
5A(test1) 和 3C(test2) 匹配但 4B 不匹配。

任何援助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T17:00:40.137

稍微改变一下你的正则表达式：

```
([1-9][0-9]*)([AaBbCcIiFfPpSs]+)(\((.*)\))? 
```

里面的内容`()`将在捕获组 4 中。

如果您的语言支持非捕获组`(?:pattern)`：

```
([1-9][0-9]*)([AaBbCcIiFfPpSs]+)(?:\((.*)\))? 
```

这将防止不必要的捕获（节省一些内存），并且里面的内容`()`将在捕获组 3 中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T17:00:21.770

您需要一个额外的非捕获组围绕可选的最后一部分

```
([1-9][0-9]*)([AaBbCcIiFfPpSs]+)(?:\(([^)]*)\))? 
```

[在 Regexr 上](http://regexr.com?33ved)查看

# android - 从首选项中获取字符串

> ID：15162859
> 
> 赞同：2
> 
> 时间：2013-03-01T16:56:19.733
> 
> 标签：android, preferences

所以我`EditTextPreference`在我的`Preferences`，我想输入一些东西并保存它，然后我想把那个文本放进去`Activity`。我的钥匙`EditTextPreference`是B1。我试过这段代码：

```
SharedPreferences getPrefs = PreferenceManager.getDefaultSharedPreferences(getBaseContext());
               String samples = getPrefs.getString("B1", "");
               b1.setText(samples); 
```

* * *

```
<EditTextPreference
            android:dialogTitle="Button 1"
            android:key="B1"
            android:summary="Set text on button 1"
            android:title="Set text on button 1" /> 
```

我`java.lang.NullPointerException`在那些之间

```
String samples = getPrefs.getString("B1", "lol");
            b1.setText(samples); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T18:02:34.530

宣布：

```
SharedPreferences pref = this.getSharedPreferences("MyPreferences", Context.MODE_PRIVATE); 
```

输入一个值（可以是 int、String 等）

```
 String tom = "tom";
    pref.edit().putString("tom", tom).commit(); // To set a value to SharedPreferences 
```

获取一个值（记住类型）

```
String name = pref.getString("tom", null); // To get a value from SharedPreferences 
```

请参阅[共享首选项](http://developer.android.com/reference/android/content/SharedPreferences.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T17:35:01.067

Try this

***Home.java***

```
public class Home extends Activity {

public SharedPreferences prefs;

String mValues;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {

     setContentView(R.layout.main);
     prefs = PreferenceManager.getDefaultSharedPreferences(this);
     mValues= prefs.getString("male", "female");
} 
```

}

***Preferences.java***

```
public class Preferences extends PreferenceActivity  implements OnSharedPreferenceChangeListener{

    @Override
    public void onCreate(Bundle savedInstanceState) { 
        super.onCreate(savedInstanceState);
        addPreferencesFromResource(R.xml.setting);

    }

    @Override
    public void onSharedPreferenceChanged(SharedPreferences sharedPref, String key) {
        Editor editor = sharedPref.edit();
        if(key.equalsIgnoreCase("B1")){
            editor.putString("male","my value"); 
        }

        editor.commit();

    }
} 
```

Let me know if it works for you.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-01T17:11:40.890

为了写入 SharedPreferences 您可以使用：

```
 Editor editor = getPrefs.edit();
    editor.putString("B1", "you value here");
    editor.commit(); 
```

# jquery - 如何将select2无限滚动与coldfusion一起使用？

> ID：15162865
> 
> 赞同：2
> 
> 时间：2013-03-01T16:56:48.190
> 
> 标签：jquery, coldfusion, jquery-select2

[http://ivaynberg.github.com/select2/#infinite](http://ivaynberg.github.com/select2/#infinite)给出的例子解释得不是很好，我不知道后端发生了什么来产生这些结果。

**编辑**：我已更改我的 cfc 以从查询中返回有限数量的行。我还附加了总行数，希望能从`data.total`.

氟氯化碳：

```
<cffunction name="GetClientsByName"
    access="remote"
    returntype="string"
    output="true"
    hint="get clients from search term">

    <cfargument name="name" type="string" required="yes">
    <cfargument name="page" type="numeric">
    <cfargument name="page_limit" type="numeric">

    <cfset var start = (arguments.page * arguments.page_limit) - arguments.page_limit + 1>
    <cfset var end = start + arguments.page_limit>

    <cfset var util = createObject("component", "/surveymanagement/JSONUtil")>
    <cfset var results = arrayNew(1)>
    <cfset var elem = "">
    <cfset var total = "">

    <cfquery name="GetClientsByName" datasource="#application.dsn#">
        SELECT client_id, client_name
        FROM Clients
        WHERE client_name LIKE <cfqueryparam cfsqltype="cf_sql_varchar" value="%#arguments.name#%">
        ORDER BY client_name
    </cfquery>

    <cfset total = structNew()>
    <cfset total["total"] = GetClientsByName.RecordCount>

    <cfloop query="GetClientsByName" startrow="#start#" endrow="#end#">
        <cfset elem = structNew()>
        <cfset elem["id"] = GetClientsByName.client_id>
        <cfset elem["text"] = GetClientsByName.client_name>
        <cfset arrayAppend(results, elem)>
    </cfloop>

    <cfset arrayAppend(results, total)>

    <cfcontent type="application/json" reset="true"><cfoutput>#util.serializeJSON(results)#</cfoutput><cfabort />
</cffunction> 
```

我相信我需要使用 cfarguments 页面和 page_limit 更改我的 sql，但我不知道如何处理它们。我应该如何限制按页返回的行，然后添加下一页的行？

js：

```
$(".select").select2({
    allowClear: true,
    blurOnChange: true,
    openOnEnter: false,
    ajax: {
        url: "/surveymanagement/admin/client.cfc",
        dataType: 'json',
        quietMillis: 100,
        data: function (term, page) {
            return {
                method: "GetClientsByName",
                name: term,
                page_limit: 10,
                page: page
            };
        },
        results: function (data, page) {
            var more = (page * 10) < data.total;

            return { results: data, more: more };
        }
    }
}); 
```

如果有人找到关于 select2 如何结合无限滚动的教程，那也很好。

我相信我的问题在于`results`ajax 调用部分，但我不确定。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T06:05:55.033

## 服务器端

后端页面必须返回一个包含两个值的 JSON 结构：

*   找到的总记录
*   结果（即结构数组）

默认情况下，插件期望结果结构包含两个键：`"id"`和`"text"`. （从技术上讲，您可以使用不同的键名。但是，如果您使用不同的名称，则必须编写自定义函数来格式化结果，即`formatResult`和`formatSelection`。）

**样本：**

```
 {"clients":[{"text":"client name ABC","id":112}],"total":1} 
```

**代码：**

```
 <cffunction name="getClientsByName" access="remote" returntype="string" output="false">
        <cfargument name="name" type="string" required="yes">
        <cfargument name="page" type="numeric" required="true">
        <cfargument name="page_limit" type="numeric" default="10">

        <cfset var startRow = (arguments.page * arguments.page_limit) - arguments.page_limit + 1>
        <cfset var endRow = startRow + arguments.page_limit>

        <cfset var util = createObject("component", "test.jsonUtil")>
        <cfset var getClientsByName = "">
        <cfset var results = structNew()>
        <cfset var clients = arrayNew(1)>
        <cfset var elem = "">

        ... run db query ....

        <!--- use default keys: "id" and "text" --->  
        <cfloop query="getClientsByName" startRow="#startRow#" endRow="#endRow#">
            <cfset elem = structNew()>
            <cfset elem["id"] = getClientsByName.client_id>
            <cfset elem["text"] = getClientsByName.client_name>
            <cfset arrayAppend(clients, elem)>
        </cfloop>

         <!--- package the results into a structure --->  
        <cfset results["total"] = getClientsByName.recordCount>
        <cfset results["clients"] = clients>

        <cfcontent type="application/json" reset="true">
        <cfoutput>#util.serializeJSON(results)#</cfoutput><cfabort />
    </cffunction> 
```

## 客户端

您的 javascript 只需要稍作调整。由于`data`是结构体，所以必须加上包含结果的键名，即

```
 return { results: data.clients, more: more }; 
```

... 代替

```
 return { results: data, more: more }; 
```

## 优化：

话虽如此，当前的代码效率低下，因为它在每次请求时都会检索整个表。在数据库端进行分页效率更高。因此，数据库一次返回的记录永远不会超过 10 条。确切的语法是特定于数据库的：

*   [SQL Server 分页](https://stackoverflow.com/questions/6443731/sql-pagination-returning-total-number-of-records-before-pagination)
*   [MySQL分页](https://stackoverflow.com/a/3365239/104223)

（顺便说一句，SQL 中的许多内容因供应商而异。因此，当问题涉及查询时，最好在标签中包含您的数据库类型和版本：）

# ember.js - Ember TextField valueBinding 与动态属性

> ID：15162869
> 
> 赞同：6
> 
> 时间：2013-03-01T16:57:01.883
> 
> 标签：ember.js

我正在尝试编写一个通用视图来处理我的应用程序中的自定义字段，但我很难让它工作。这是场景 - 我有一个`fieldDef`定义自定义字段的对象，以及一个`valueObject`具有数组的对象`customFields`，它具有值。我想做的是这样的：

```
{{view Ember.TextField valueBinding="valueObject.customFields.[fieldDef.name]"}} 
```

显然这不起作用，因为它被视为`fieldDef.name`文字。我尝试过覆盖 TextField 类，但似乎无法将其绑定。

关于如何做到这一点的任何建议？

谢谢，斯科特

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-01T23:48:32.027

Ember 无法绑定到数组索引，因此您必须解决它。一种解决方案是将自己限制为单向绑定，您的文本字段会更新值哈希。如果您打算在用户按下按钮后提交表单，这应该可以解决问题。

在你的控制器中定义一个字段 id 的数组，并为它们的值定义一个哈希值。

```
App.ApplicationController = Ember.Controller.extend({
  fieldIds: ['name', 'email', 'whatever'],
  fieldValues: {} // {name: 'user', email: 'user@...', ...}
}); 
```

现在扩展`Ember.TextField`以在文本字段更改时更新您的值哈希。您需要从控制器传递每个实例 a 和对哈希`fieldId`的引用。`values`

```
App.TextField = Ember.TextField.extend({
  fieldId: null,
  values: null,

  valueChange: function() {
      var fieldId = this.get('fieldId');
      var values = this.get('values');
      if (values && fieldId) values[fieldId] = this.get('value');
  }.observes('value')
}); 
```

模板很简单。

```
{{#each fieldId in fieldIds}}
  <label>{{fieldId}}</label>
  {{view App.TextField fieldIdBinding="fieldId" valuesBinding="fieldValues"}}
  <br/>
{{/each}} 
```

[在这里，它在 jsfiddle 中得到了充实](http://jsfiddle.net/PXnWj/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-12T22:13:03.177

@ahmacleod 很好的答案。以防万一有人感兴趣，它也可以很好地扩展选择：

```
import Ember from 'ember';

export default Ember.Select.extend({
  fieldId: null,
  values: null,

  valueChange: function() {
    var fieldId = this.get('fieldId');
    var values = this.get('values');
    if (values && fieldId) values[fieldId] = this.get('value');
  }.observes('value')
}); 
```

将其称为普通组件（components/dynamic-select.js）

```
{{#each id in fieldIds}}
   {{dynamic-select content=fieldIds fieldIdBinding="header"       
     valuesBinding="fields"}}
{{/each}} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-06-22T11:08:24.373

**您现在可以在mut**助手的帮助下将输入值与对象的动态键（变量）绑定。

[https://guides.emberjs.com/v2.6.0/templates/input-helpers/#toc_binding-dynamic-attribute](https://guides.emberjs.com/v2.6.0/templates/input-helpers/#toc_binding-dynamic-attribute)

你可以像这样访问它，

```
var Object = {};
var key = "firstName"; 
```

我们可以像这样在输入助手中绑定键，

```
{{input value=(mut (get Object key))}}

{{Object.firstName}} // Prints the dynamic value in textbox 
```

# xmpp - 基于二进制的xmpp服务器？

> ID：15162870
> 
> 赞同：-1
> 
> 时间：2013-03-01T16:57:01.947
> 
> 标签：xmpp

Helo，我正在开发一款需要从客户端到服务器的实时通信的手机游戏。

通常我会实现一个 TCP 套接字服务器并使用一些私有二进制协议来启用双向通信，现在我也在研究 XMPP 服务器，比如基于标准的 Ejabberd。但是 XML 在某些方面确实是多余的和低效的，特别是对于移动应用程序，它可能意味着更多的流量和内存消耗。

1.  XMPP 是否必须使用 XML？
2.  是否有任何使用二进制作为低级数据格式而不是使用 XML 的 XMPP 实现？（或者我不应该选择 XMPP 并从其他标准或技术开始。）
3.  有什么策略可以减少使用 XMPP 发送复杂数据对象（不是大文件对象）的开销吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T19:47:24.040

XMPP 规范需要 XML，因此没有二进制实现。它确实包含更多的开销，但您必须记住 XMPP 旨在解决的问题 - 一个活跃的聊天连接可能每秒传输一条消息。

至于 Google talk api：他们使用非 xml 协议进行客户端 - Google 服务器连接。当我在 Gmail 客户端发送消息时，请求正文只包含一堆帖子数据：

```
count=1&ofs=16&req0_type=m&req0_to=my.friend%40gmail.com&req0_id=6A8466CBC59CBB0C_0&req0_text=test&req0_chatstate=active&req0_iconset=classic&req0__sc=c 
```

那部分不是XMPP。接受此请求的服务器然后执行创建和发送 XMPP 请求的工作。XMPP 仍然是 XML，它们只是在客户端和 Google 服务器之间使用不同的协议。

# iphone - iOS 自定义 URL 方案 - 获取源 URL

> ID：15162871
> 
> 赞同：0
> 
> 时间：2013-03-01T16:57:04.113
> 
> 标签：iphone, ios, webview, url-scheme

我正在开发一个从自定义 url 方案启动的应用程序。

我设法获取了 url 及其参数和所有内容，但是，我们的应用程序启动了一个 web 视图。我们希望当用户点击这个方案的链接时，他所在的页面会在我们的 web 视图中打开（这是必需的，因为其他功能在后台运行，并允许用户继续浏览他所在的网站）

甚至可以获取点击的网址的位置吗？我知道我可以获取源应用程序，但是有什么方法（除了将链接添加到方案本身作为参数之外）来获取源链接​​吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T17:02:58.487

如果您需要将信息传递给您的应用程序，则该信息必须以某种方式在 URL 本身中表示。

为此目的添加一个通用接口是没有意义的，因为这些 URL 可以托管在例如电子邮件或 SMS 中。

# android - 相对布局问题

> ID：15162872
> 
> 赞同：0
> 
> 时间：2013-03-01T16:57:05.780
> 
> 标签：android, android-relativelayout

我正在开发我的第一个 android 应用程序，我无法找到解决方案的一个问题是相对布局和页脚栏。

我已经设置了一个相对布局，底部有一个按钮栏。它可以查找其他线性布局中是否有足够的内容；但是，当没有足够的内容来填充页面时，内容将在按钮栏顶部的底部对齐。我希望它在顶部与底部的按钮栏对齐。我已经尝试了所有可以找到的 align top 选项并将内容高度设置为 fill_parent/match_parent，但所有这些都会导致线性布局内的项目消失。

我怎样才能解决这个问题？

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/ViewPost"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="#c9c9c9" >

    <LinearLayout
    android:id="@+id/bottom_control_bar"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true" >
    <Button
        android:id="@+id/btnComment"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="1.0"
        android:drawableLeft="@drawable/content_new_event"
        android:paddingBottom="2dip"
        android:paddingLeft="8dip"
        android:paddingRight="8dip"
        android:paddingTop="2dip"
        android:text="@string/BtnComment"
        android:textColor="#797979"
        android:textSize="14sp" />

    <Button
        android:id="@+id/btnMeToo"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="1.0"
        android:drawableLeft="@drawable/social_add_group"
        android:paddingBottom="2dip"
        android:paddingLeft="8dip"
        android:paddingRight="8dip"
        android:paddingTop="2dip"
        android:text="@string/BtnMeToo"
        android:textColor="#797979"
        android:textSize="14sp" />

    <Button
        android:id="@+id/btnFlag"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="1.0"
        android:drawableLeft="@drawable/flag"
        android:paddingBottom="2dip"
        android:paddingLeft="8dip"
        android:paddingRight="8dip"
        android:paddingTop="2dip"
        android:text="@string/BtnFlag"
        android:textColor="#797979"
        android:textSize="14sp" />

    <Button
        android:id="@+id/btnShare"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="1.0"
        android:drawableLeft="@drawable/social_share"
        android:paddingBottom="2dip"
        android:paddingLeft="8dip"
        android:paddingRight="8dip"
        android:paddingTop="2dip"
        android:text="@string/BtnShare"
        android:textColor="#797979"
        android:textSize="14sp" />
    </LinearLayout>

    <LinearLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_above="@id/bottom_control_bar"
    android:layout_marginBottom="5dip"
    android:layout_marginLeft="10dip"
    android:layout_marginRight="10dip"
    android:layout_marginTop="10dip"
    android:background="#ffffff"
    android:gravity="top"
    android:orientation="vertical"
    android:weightSum="1.0" >

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:orientation="horizontal" >

        <TextView
        android:id="@+id/ticket_id"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:visibility="gone" />

        <ImageView
        android:id="@+id/ticket_owner_image2"
        android:layout_width="50dp"
        android:layout_height="50dp"
        android:layout_marginLeft="1dp"
        android:layout_marginTop="1dp"
        android:background="#797979"
        android:contentDescription="@string/StdImageDesc"
        android:padding="1dp"
        android:scaleType="fitXY"
        android:src="@drawable/picture" />

        <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:orientation="vertical" >

        <TextView
            android:id="@+id/ticket_owner_name"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginLeft="10dip"
            android:layout_marginTop="5dip"
            android:paddingLeft="5dip"
            android:textColor="#595959"
            android:textSize="10sp" />

        <TextView
            android:id="@+id/ticket_title"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginLeft="10dip"
            android:layout_marginTop="2dip"
            android:paddingLeft="5dip"
            android:textColor="#595959"
            android:textSize="14sp" />

        <TextView
            android:id="@+id/ticket_create_date"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginLeft="10dip"
            android:layout_marginTop="2dip"
            android:paddingLeft="5dip"
            android:textColor="#595959"
            android:textSize="10sp" />
        </LinearLayout>
    </LinearLayout>

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_gravity="center" >

        <TextView
        android:id="@+id/ticket_text"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center_horizontal|center_vertical"
        android:layout_margin="5dip"
        android:textColor="#595959"
        android:textSize="14sp" />
    </LinearLayout>

    <ListView
        android:id="@+id/commentlist"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:cacheColorHint="#00000000"
        android:divider="#b5b5b5"
        android:dividerHeight="1dp" />
    </LinearLayout>

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T17:06:30.923

尝试以下操作，让我知道您是否想要实现以下目标：

```
 <?xml version="1.0" encoding="utf-8"?>
    <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/ViewPost"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:background="#c9c9c9" >

        <ListView
            android:id="@+id/commentlist"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:cacheColorHint="#00000000"
            android:layout_below="@+id/linear1"
            android:layout_above="@+id/bottom_control_bar"
            android:divider="#b5b5b5"
            android:dividerHeight="1dp" />

        <LinearLayout
            android:id="@+id/bottom_control_bar"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_alignParentBottom="true" >

            <Button
                android:id="@+id/btnComment"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_weight="1.0"
                android:drawableLeft="@drawable/dummy_heyzooka_icon_blue"
                android:paddingBottom="2dip"
                android:paddingLeft="8dip"
                android:paddingRight="8dip"
                android:paddingTop="2dip"
                android:text="aa"
                android:textColor="#797979"
                android:textSize="14sp" />

            <Button
                android:id="@+id/btnMeToo"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_weight="1.0"
                android:drawableLeft="@drawable/dummy_heyzooka_icon_blue"
                android:paddingBottom="2dip"
                android:paddingLeft="8dip"
                android:paddingRight="8dip"
                android:paddingTop="2dip"
                android:text="dd"
                android:textColor="#797979"
                android:textSize="14sp" />

            <Button
                android:id="@+id/btnFlag"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_weight="1.0"
                android:drawableLeft="@drawable/dummy_heyzooka_icon_blue"
                android:paddingBottom="2dip"
                android:paddingLeft="8dip"
                android:paddingRight="8dip"
                android:paddingTop="2dip"
                android:text="ff"
                android:textColor="#797979"
                android:textSize="14sp" />

            <Button
                android:id="@+id/btnShare"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_weight="1.0"
                android:drawableLeft="@drawable/dummy_heyzooka_icon_blue"
                android:paddingBottom="2dip"
                android:paddingLeft="8dip"
                android:paddingRight="8dip"
                android:paddingTop="2dip"
                android:text="ff"
                android:textColor="#797979"
                android:textSize="14sp" />
        </LinearLayout>

        <LinearLayout
            android:id="@+id/linear1"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_alignParentTop="true"
            android:layout_marginBottom="5dip"
            android:layout_marginLeft="10dip"
            android:layout_marginRight="10dip"
            android:layout_marginTop="10dip"
            android:background="#ffffff"
            android:gravity="top"
            android:orientation="vertical"
            android:weightSum="1.0" >

            <LinearLayout
                android:layout_width="match_parent"
                android:layout_height="match_parent"
                android:layout_gravity="top"
                android:orientation="horizontal" >

                <TextView
                    android:id="@+id/ticket_id"
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:visibility="gone" />

                <ImageView
                    android:id="@+id/ticket_owner_image2"
                    android:layout_width="50dp"
                    android:layout_height="50dp"
                    android:layout_marginLeft="1dp"
                    android:layout_marginTop="1dp"
                    android:background="#797979"
                    android:contentDescription="ada"
                    android:padding="1dp"
                    android:scaleType="fitXY"
                    android:src="@drawable/dummy_heyzooka_icon_blue" />

                <LinearLayout
                    android:layout_width="match_parent"
                    android:layout_height="match_parent"
                    android:orientation="vertical" >

                    <TextView
                        android:id="@+id/ticket_owner_name"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_marginLeft="10dip"
                        android:layout_marginTop="5dip"
                        android:paddingLeft="5dip"
                        android:textColor="#595959"
                        android:textSize="10sp" />

                    <TextView
                        android:id="@+id/ticket_title"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_marginLeft="10dip"
                        android:layout_marginTop="2dip"
                        android:paddingLeft="5dip"
                        android:textColor="#595959"
                        android:textSize="14sp" />

                    <TextView
                        android:id="@+id/ticket_create_date"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_marginLeft="10dip"
                        android:layout_marginTop="2dip"
                        android:paddingLeft="5dip"
                        android:textColor="#595959"
                        android:textSize="10sp" />
                </LinearLayout>
            </LinearLayout>

            <LinearLayout
                android:layout_width="match_parent"
                android:layout_height="match_parent"
                android:layout_gravity="center" >

                <TextView
                    android:id="@+id/ticket_text"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_gravity="center_horizontal|center_vertical"
                    android:layout_margin="5dip"
                    android:textColor="#595959"
                    android:textSize="14sp" />
            </LinearLayout>
        </LinearLayout>

    </RelativeLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T17:04:13.947

嗨首先，当您使用相对布局时要小心，因为如果您更改对齐或对该布局的任何修改，它将消失（或）它可能会更改对齐，所以不要担心撤消您的布局，您可以回到您的以前的对齐方式现在您可以在布局中逐项修改。

# batch-file - 如何创建批处理文件？

> ID：15162874
> 
> 赞同：-2
> 
> 时间：2013-03-01T16:57:16.560
> 
> 标签：batch-file

我想创建一个 cmd 文件来循环遍历 c:\ 文件夹中的每个 .xml 文件并回显该文件的日期时间戳。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-30T21:06:39.773

@echo off REM Next 命令打开 Microsoft Word start /d "C:\Program Files\Microsoft Word" WINWOR

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T18:32:53.557

```
@echo off
cd "C:\Folder"
for %%A in (*.xml) do echo %%~nA %%~tA 
```

# loops - 为什么我的 ASM（使用 Turbo Assembler）程序无限循环？

> ID：15162876
> 
> 赞同：1
> 
> 时间：2013-03-01T16:57:28.447
> 
> 标签：loops, assembly, infinite, tasm

我试图制作一个接受 4 位数字的小程序。但由于某种原因，它在输入第 4 位后并没有停止。

这是我正在使用的概念。

例如 1234 的四位数字就是“1000+200+30+4”
所以当我在程序中输入 1234 时，会发生以下情况：

```
1 BX = 0000 0000 0000 0000    

2.1 BX = BX + 1000    

3.1 BX = BX + 100
3.2 BX = BX + 100

4.1 BX = BX + 10
4.2 BX = BX + 10
4.3 BX = BX + 10    

5.1 BX = BX + 1
5.2 BX = BX + 1
5.3 BX = BX + 1
5.4 BX = BX + 1 
```

所以 BX = 0000 0000 0000 1234
但是下面的程序进入了一个无限循环。有人可以帮我解决这个问题。

```
;===========MACROS==========
;-----INPUT MACROS
INPUT_BCD_SUB MACRO DIGIT
        CALL COMMON_INP_PROC        
        MOV DIGIT_PLACE, DIGIT
        CALL NUM_CONVERTOR
ENDM

INPUT_BCD MACRO VAR
        XOR BX,BX
        SHOW T_MSG2
        INPUT_BCD_SUB 1000
        INPUT_BCD_SUB 0100
        INPUT_BCD_SUB 0010
        INPUT_BCD_SUB 0001
        MOV VAR, BX
        XOR BX,BX
ENDM

;-----SHOW MACRO
SHOW MACRO MSG
        MOV AH, 09H
        LEA DX, MSG
        INT 21H
ENDM
;-----END: SHOW MACRO

;-----KILLME MACRO
KILLME MACRO
        MOV AH, 4CH
        INT 21H
ENDM
;-----END: KILLME MACRO

.MODEL SMALL
.DATA
        T_MSG1 DB 10,13,'Enter a number: $'
        T_MSG2 DB 10,13,'You have entered: $'
        ERR_MSG DB 10,13, 'An error has occured: Invalid digit entered. Please use     digits 0 to 9 $'
        VAR_NUM1 DW 1 DUP(0)
        DIGIT_PLACE DW 1 DUP(0)
.CODE        

    COMMON_INP_PROC PROC
        MOV AH, 01H
        INT 21H
        CMP AL, 30H
            JB  ERR1
        CMP AL, 39H
        JBE SUBT_30
        ERR1: SHOW ERR_MSG
              KILLME
        SUBT_30: SUB AL, 30        
        RET
COMMON_INP_PROC ENDP

NUM_CONVERTOR PROC
        MOV CL,AL
        COUNT: ADD BX, DIGIT_PLACE                   
        LOOP COUNT    
NUM_CONVERTOR ENDP

MAIN PROC
        MOV AX, @DATA
        MOV DS, AX

        SHOW T_MSG1
        INPUT_BCD VAR_NUM1
        KILLME
MAIN ENDP
END MAIN 
```

我还生成了一个列表文件，它看起来不错。我真的不知道问题是什么...

[TASM 生成的列表文件](http://pastebin.com/uEU7qytQ)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-06T21:14:54.567

实际上，没有 RET 的 NUM_CONVERTER 将产生循环，并且 CH 也从未初始化，两者都是正确的。单步的建议也是合理的。我将此作为答案发布，以便您可以关闭此问题，使其不再出现在 SO 网站上。

# wordpress - Wordpress - 自己的插件 - 获取媒体库的所有图像

> ID：15162882
> 
> 赞同：0
> 
> 时间：2013-03-01T16:57:42.023
> 
> 标签：wordpress

我已经为 Wordpress TinyMCE 编辑器编写了一个插件，我想使用之前在该插件中上传到媒体库的图像。如何在我自己的插件中访问所有上传的图片？我在 wordpress 文档中找不到它。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T20:49:29.563

我对你的问题有点不清楚。您是否正在寻找访问“添加媒体”按钮的方法？

试图回答您的问题 - >此方法允许您获取媒体部分中的所有附件。目前它显示所有内容，但您可以按照您想要的方式操作它。

参考：[http ://codex.wordpress.org/Template_Tags/get_posts](http://codex.wordpress.org/Template_Tags/get_posts)

```
$args = array( 'post_type' => 'attachment', 'numberposts' => -1); 
$attachments = get_posts($args);
if ($attachments) {
    foreach ( $attachments as $attachment ) {
        echo apply_filters( 'the_title' , $attachment->post_title );
        the_attachment_link( $attachment->ID , false );
    }
} 
```

# highcharts - Highcharts - 没有初始数据的动态图

> ID：15162891
> 
> 赞同：9
> 
> 时间：2013-03-01T16:57:52.773
> 
> 标签：highcharts

如果您使用动态样条更新打开此 JSFiddle，它会在每秒开始更新之前加载 20 个点的系列。

[例子](http://jsfiddle.net/gh/get/jquery/1.7.2/highslide-software/highcharts.com/tree/master/samples/highcharts/demo/dynamic-update/)

我不想显示任何初始数据，并让间隔在它们进入时添加点。

所以我改变：

```
series: [{
            name: 'Random data',
            data: (function() {
                // generate an array of random data
                var data = [],
                    time = (new Date()).getTime(),
                    i;

                for (i = -19; i <= 0; i++) {
                    data.push({
                        x: time + i * 1000,
                        y: Math.random()
                    });
                }
                return data;
            })()
        }] 
```

至

```
series: [{
            name: 'Random data',
            data: []
        }] 
```

但它不会增加分数。有什么我想念的吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-01T18:29:33.520

更改您的加载功能，以便在添加 20 个值之前不应用 shift 参数，请参阅[**此 jsfiddle**](http://jsfiddle.net/martyk/7vZ5a/1/)

```
load: function() {

    // set up the updating of the chart each second
    var series = this.series[0],
        maxSamples = 20,
        count = 0;
    setInterval(function() {
        var x = (new Date()).getTime(), // current time
            y = Math.random();
        series.addPoint(
            [x,y]
            , true
            , (++count >= maxSamples)
        );
    }, 1000);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-01T17:38:46.213

的第三个参数`addPoint`是设置如果你在添加这个之后要移动一个点。

**那么，发生了什么？** 您正在添加一个点，然后将其删除。

**改变**：

```
series.addPoint([x, y], true, true); 
```

**至**：

```
series.addPoint([x, y], true); 
```

[**演示**](http://jsfiddle.net/ricardolohmann/2MvBq/1/)

参考

*   [http://api.highcharts.com/highstock#Series.addPoint()](http://api.highcharts.com/highstock#Series.addPoint())

# javascript - 使用 Javascript 的 Google 导航

> ID：15162893
> 
> 赞同：0
> 
> 时间：2013-03-01T16:57:57.810
> 
> 标签：javascript, android, html

是否有任何方法可以使用 javascript/html 从我当前位置到给定目的地启动 Google 导航（或任何其他转弯导航）？

如果不可能，我可以使用 Android 做同样的事情吗？

# regex - 如何为 ABCD1234 编写正则表达式？

> ID：15162898
> 
> 赞同：-3
> 
> 时间：2013-03-01T16:58:36.397
> 
> 标签：regex

我想为一个字符串设置一个规则：8 个字符前 4 个是字母，不区分大小写。最后4是数字

如何为这种情况编写正则表达式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T17:08:49.237

```
^[a-zA-Z]{4}\d{4}$ 
```

解释：

*   ^ 字符串开头
*   [a-zA-Z] 字符 a 到 z 和 A 到 Z
*   {4} 重复列表项 4 次
*   \da 数字字符
*   {4} 重复列表项 4 次
*   $ 字符串结尾

# c# - 喜欢 Verbose Linq 表达式？

> ID：15162900
> 
> 赞同：2
> 
> 时间：2013-03-01T16:58:48.760
> 
> 标签：c#, .net, linq, clr

我突然想到我用简单的方式写出 linq 语句，但其他人可能会定义为冗长的方式；

一个简单的例子：

```
return _entries
    .Where(x => x.Context.Equals(context))
    .Where(x => x.Type == typeof (T))
    .Select(x=>x.Value)
    .Cast<T>()
    .Single(); 
```

可以简化为：

```
return _entries
    .Where(x => x.Context.Equals(context) && x.Type == typeof (T))
    .Select(x=>(T)x.Value)
    .Single(); 
```

**[问题]** 从长远来看，哪种编码方式更好？即长（和简单）linq 链或具有更复杂选择器/等的短 linq 链？

假设这些 Linq 语句将被编译器优化是正确的吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-01T17:50:49.067

> 从长远来看，哪种编码方式更好？

我更喜欢简短而简单的。它更具可读性。LINQ 的全部意义在于让代码读起来更像业务领域的逻辑。

> 假设这些 Linq 语句将被编译器优化是正确的吗？

不; 优化是由*运行时*完成的，而不是由*编译器*完成的。LINQ-to-objects 遵循您描述的模式的“Where”和“Select”子句在运行时优化为单个“where-select”对象，以避免创建太多迭代器。（尽管正如 Jon Skeet 发现的那样，这有时会产生[性能实际上下降的](https://codeblog.jonskeet.uk/2011/06/16/linq-to-objects-and-the-performance-of-nested-quot-where-quot-calls/)情况；就像几乎所有“优化”一样，这并不是 100% 的胜利。不幸的是，我现在找不到 Jon 的文章。 )

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-01T17:04:00.760

不，假设这些 LINQ 语句已由编译器优化是不正确的。更冗长的语法会产生更多`Enumerator`的对象，因此两者并不等价。从性能的角度来看，较短的语法将（稍微）更好。

但是，如果您从可读性和编码的角度在两种语法之间进行选择，我会选择第一种，因为它显示了更好的步骤。我总是更喜欢可读性而不是性能，除非你可以证明存在性能瓶颈。

但是，有一个您可能会发现有用的[`OfType<T>()`LINQ 运算符。](http://msdn.microsoft.com/en-us/library/bb360913.aspx)你的第一个例子，重写：

```
return _entries
    .Where(x => x.Context.Equals(context))
    .OfType<T>()
    .Select(x => (T)x.Value)
    .Single(); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-01T17:14:23.723

从长远来看，更好的编码实践是更具可读性的实践。如果您担心性能，请测试这两种方法。如果它不值得测试，那么它就不值得优化。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-02T07:13:13.850

我喜欢 Linq 表达式，因为它提供了一种以声明方式表达代码意图的方法。它专注于*您*想要实现的目标，而不是*如何*实现它。所以强调代码的可读性。

但是用 Linq 运算符替换一些 for/foreach 块也可能使代码实现起来很麻烦。所以我建议把你的表达式写成冗长的，这样你就可以向你的共同程序员口头描述逻辑，例如，下面的表达式可以描述为“返回一个类型为 T 的单个值，其中条目上下文等于上下文和类型等于 T”。如果需要，编写自定义扩展方法，例如`As<T>()`将值转换为 T 类型。

```
return _entries
    .Where(x => x.Context.Equals(context) && x.Type == typeof (T))
    .Single (x=> x.Value)
    .As<T>(); 
```

# mysql - 在表中搜索特定用户

> ID：15162902
> 
> 赞同：0
> 
> 时间：2013-03-01T16:58:51.873
> 
> 标签：mysql, sql, database

我有以下查询：

```
SELECT * 
FROM users
WHERE id NOT 
IN (

SELECT user_id
FROM  `bids` 
WHERE DATE_SUB(  DATE_ADD( CURDATE( ) , INTERVAL 7 
DAY ) , INTERVAL 14 
DAY ) <= created
)
AND id NOT 
IN (

SELECT user_id
FROM coupon_used WHERE code = 'ACTNOW'
)
AND id
IN (

SELECT user_id
FROM accounts
) 
```

我只想获取特定用户并搜索他们，而不是搜索表中的所有用户。就像我有 id 为 1,2,3,4,5 的用户列表一样，我只想搜索这些用户

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T17:00:49.320

只需`WHERE`使用添加一个子句`IN()`

```
SELECT * 
FROM users
WHERE id IN(1,2,3,4,5) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T17:53:09.513

我相信使用左外连接将简化您的查询并有望提高性能

```
SELECT users.* 
FROM users
LEFT OUTER JOIN bids on bids.user_id = users.id AND DATE_SUB(DATE_ADD(CURDATE(), INTERVAL 7 DAY), INTERVAL 14 DAY) <= bids.created
LEFT OUTER JOIN coupon_used on coupon_used.user_id = users.id AND coupon_used.code = 'ACTNOW'
INNER JOIN accounts on accounts.user_id = users.id
WHERE bids.id is null AND coupon_used.id is null
    AND users.id in (1,2,3,4,5) 
```

# regex - 管道到 grep 并使用正则表达式

> ID：15162904
> 
> 赞同：16
> 
> 时间：2013-03-01T16:58:55.273
> 
> 标签：regex, bash

基本上我想做的是解析文件中的行并返回用户名。用户名总是用 < 和 > 括起来，所以我想使用正则表达式来匹配 < 之前（包括）之前的所有内容以及之后（包括）> 之后的所有内容，然后反转我的匹配。我知道 grep -vE 应该能够做到这一点。

到目前为止，我的脚本看起来有点像这样：

```
#!/bin/bash
while read line; do
        echo $line | grep -vE '(.*<)|(>.*)'
done < test_log 
```

test_log 包含以下内容：

```
Mar  1 09:28:08 (IP redacted) dovecot: pop3-login: Login: user=<emcjannet>, method=PLAIN, rip=(IP redacted), lip=(IP redacted)
Mar  1 09:27:53 (IP redacted) dovecot: pop3-login: Login: user=<dprotzak>, method=PLAIN, rip=(IP redacted), lip=(IP redacted)
Mar  1 09:28:28 (IP redacted) dovecot: imap-login: Login: user=<gconnie>, method=PLAIN, rip=(IP redacted), lip=(IP redacted), TLS
Mar  1 09:27:25 (IP redacted) dovecot: imap-login: Login: user=<gconnie>, method=PLAIN, rip=(IP redacted), lip=(IP redacted), TLS 
```

但是，在运行我的脚本时，没有返回任何内容，尽管当我用逆匹配的正则表达式测试正则表达式时，它完全符合我的要求。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-03-01T17:08:07.593

试试这个 grep 行：

```
grep -Po "(?<=<)[^>]*" 
```

或更安全：

```
grep -Po "(?<=user=<)[^>]*" 
```

**编辑**

简短的解释

```
-P perl-regex
-o only matching
you can get above info from man page
(?<=foo)bar look-behind assertion. matches bar, only if bar is following foo.
[^>]* any not > characters. 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-07-13T13:23:47.247

实际上，我也喜欢@Kent 的回答，而且它是正确的，但有时很难记住*“grep”*实用程序的*“-Po”之类的开关。*通常，如果您不记得确切的标志，您可能会要求 grep 实用程序以下列方式刷新您的记忆：

 *```
$ grep --help | grep regex
  -E, --extended-regexp     PATTERN is an extended regular expression (ERE)
  -G, --basic-regexp        PATTERN is a basic regular expression (BRE)
  -P, --perl-regexp         PATTERN is a Perl regular expression
  -e, --regexp=PATTERN      use PATTERN for matching
  -w, --word-regexp         force PATTERN to match only whole words
  -x, --line-regexp         force PATTERN to match only whole lines 
```

正如我们所看到的，还有其他可能的选项，例如*"-E"*。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-01T17:13:50.647

我实际上更喜欢@Kent 的回答，但是如果我们可以假设最新版本的 grep 并且您想避免基于 perl 的正则表达式，您仍然可以直接提取用户名：

```
echo $line | grep -o '<[^>]*>' | grep -o '[^<>]*' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-01T19:18:43.783

如果您的数据与您显示的一样一致，则您实际上并不需要外部程序。

```
while read line; do
    line="${line#*user=<}"  # Remove from left up to <
    line="${line%%>*}"      # Remove to right from >
    echo $line
done < test_log 
```*

# sql - SQL 记录和 SQL 索引中可空位字段占用多少空间？

> ID：15162908
> 
> 赞同：0
> 
> 时间：2013-03-01T16:59:00.680
> 
> 标签：sql, database, sql-server-2008-r2, size, bit

正如在[Tinyint vs Bit](https://stackoverflow.com/questions/488811/tinyint-vs-bit)中所讨论的，如果我在一个表中有 8 个位字段，它们将只占用一个 tinyint 的记录大小。

我认为只有当它们被声明为`not null`.

可空位字段呢？他们是 2 位还是整个 tinyint ？

索引呢？`INCLUDED`如果我在列表中使用该字段与其他位或非位字段相结合，可空或不可空位字段在索引内占用多少空间？如果位在索引表达式中与其他位和非位字段一起使用怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T17:12:05.250

我不能谈论 SQL Server 的细节，（而且我在不知道细节的情况下说话而受到抨击）。但是，数据库每个可空字段只需要一位。如果数据库专用更多空间，那是因为希望获得性能优势，例如 32 位对齐整数。

典型 RDBMS 中的索引是 b 树。位域的树只是一个用于设置位的分支和一个用于清除位的分支。如果可以为空，则另一个分支。树的末尾将是匹配该条件的记录列表。

# css - CSS IE7 如何强制 LI 内的 UL 比父级宽

> ID：15162910
> 
> 赞同：0
> 
> 时间：2013-03-01T16:59:07.963
> 
> 标签：css, internet-explorer-7, internet-explorer-9

我有一个下拉菜单，除了 Internet Explorer 7 外，它运行良好。谢谢 MS。

出于演示目的，我创建了这个简单的 HTML。下拉菜单打开以快速说明问题。在 IE 7 中，下拉菜单被剪切到顶级菜单的宽度。在 IE8 和 IE9 中这不是问题。

我可以通过添加以下 javascript 来解决此问题：

element.style.width = 320px

效果很好，但是我需要像 IE8 或 IE9 那样自动完成，否则我必须分别计算每个下拉菜单的宽度。

下面的 HTML：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <style>
        ul.menu {list-style:none;font:10px Trebushet MS;font-weight:bold;margin:0;padding:0;position:absolute;left:86px;top:90px;line-height:100%;height:15px}
        ul.menu * {margin:0;padding:0;cursor:pointer}
        ul.menu .header {position:relative; float:left;color:#999999;padding: 3px 12px 2px 4px;white-space:nowrap}
        ul.menu .header ul {position:absolute; top:15px; left:0;background:#f0f0f0; overflow: hidden;list-style:none}
        ul.menu .header ul li {position:relative; padding: 3px 25px 3px 10px; white-space:nowrap; display: block}
        ul.menu .header ul li:hover {background-color:#dcdcdc}
    </style>
</head>
<body>
<ul class="menu" id="menu">
    <li class="header">
        CREATE
        <ul>
            <li>A really really long description of nothing valuable</li>
            <li>test1</li>
            <li>test2</li>
            <li>test3 and again very long</li>
        </ul>
    </li>
    <li class="header">
        SEARCH
        <ul>
            <li>test1</li>
            <li>test1</li>
            <li>test1</li>
            <li>test1</li>
        </ul>
    </li>
</ul>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T17:14:45.970

为嵌套 ul 设置的溢出属性是这里的原因。删除该`overflow: hidden`属性`ul.menu .header ul`应该可以纠正这个问题。

在此处查看小提琴：http: [//jsfiddle.net/b45rA/1/embedded/result/](http://jsfiddle.net/b45rA/1/embedded/result/)。您可能需要使用再次运行命令（右上角）来呈现输出，因为 jsfiddle 在 IE7 上表现不佳。

# php - 我的 IF 语句中不符合条件

> ID：15162911
> 
> 赞同：1
> 
> 时间：2013-03-01T16:59:13.163
> 
> 标签：php, html

我有下面的代码，它允许成员恢复他们的密码。但是我无法发现所犯的错误并且我的条件没有得到满足。当您访问recover.php 时，您将被重定向到index.php，因此最后一个else 语句正在执行（这应该只在用户登录时发生——这意味着如果他们已登录，他们将无法恢复密码）。

```
<?php
include 'storescripts/init.php';
$msg = "";
if(isset($_GET['success']) === true && empty($_GET['success']) === true)
{
    $msg = "Thanks, we've emailed you.";
}
else
{
    $mode_allowed = array('mem_password');
    if (isset($_GET['mode']) === true && in_array($_GET['mode'],  $mode_allowed) === true)
    {
        if(isset($_POST['mem_email']) === true && empty($_POST['mem_email']) ===  false)
        {
            if (email_exists($_POST['mem_email']) === true)
            {
                recover($_GET['mode'], $_POST['mem_email']);
                header('Location: recover.php?success');
                exit();
            }
            else
            {
                $msg = "<p>Oops, we couldn\'t find that email in the system</p>";
            }
        }
    }
else
    {
        header('Location: index.php');
        exit();
    }
}
logged_in_redirect();
include 'includes/overall/head.php';
include 'includes/overall/template_header.php';
?>
<div id="mainDivShort">
    <h1>Recover</h1>
    <div id="divBreak"></div>
    <?php include ("includes/overall/column_left.php");?>
    <div id="middleContent">
        <?php echo $msg; ?>
        <form action="" method="post">
            <ul>
                <li>Please enter your email address:<br> <input type="text" name="mem_email"></li>
                <li><input type="submit" value="Recover"></li>
            </ul>
        </form>
    </div>
    <?php include ("includes/overall/column_right.php");?>
</div>
<?php include ("includes/overall/template_footer.php");?> 
```

当我注销时访问recover.php 时，我无法确定执行最后一个else 语句的条件是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T17:04:36.610

首先：

这是行不通的：

```
if(isset($_GET['success']) === true && empty($_GET['success']) === true) 
```

它应该是：

```
if(isset($_GET['success']) === true && empty($_GET['success']) === false) 
```

和

```
header('Location: recover.php?success'); 
```

应该是（否则不会设置 $_GET['success']）：

```
header('Location: recover.php?success=1'); 
```

和：

```
<form action="" method="post"> 
```

应该：

```
<form action="recover.php?mode=mem_password" method="post"> 
```

其余的，你的代码是正确的。

# google-chrome-extension - 是否可以使用 Clojurescript 或 Google Closure 编写 Chrome 扩展程序或 Web 应用程序？

> ID：15162913
> 
> 赞同：22
> 
> 时间：2013-03-01T16:59:13.497
> 
> 标签：google-chrome-extension, clojure, google-closure, clojurescript

我想使用 clojurescript 编写 chrome 扩展。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-03-15T05:30:41.737

Chrome 扩展通常使用 HTML/CSS/JS 制作，因此 ClojureScript 应该可以正常工作，因为它可以编译为 JavaScript。话虽如此，我认为还没有人真正使用 ClojureScript 构建过大型扩展。作为概念证明，这里概述了如何制作一个简单的警报扩展，它会说 Zaboomafoo（对不起这个名字）：

首先安装[Leiningen](https://github.com/technomancy/leiningen)和[lein-cljsbuild](https://github.com/emezeske/lein-cljsbuild)。阅读 lein-cljsbuild 的文档并查看[关于 ClojureScript 的 wiki，](https://github.com/clojure/clojurescript/wiki)以了解如何使用 lein-cljsbuild 进行项目和编译。

创建一个 ClojureScript 文件，该文件显示一个警告说“Zaboomafoo”，如下所示：

```
(ns Zaboomafoo.hello)   
(js/alert "Zaboomafoo") 
```

编译它`lein cljsbuild`以获取 JavaScript 文件。然后为扩展添加一个基本的 HTML 文件和 manifest.json。

Zaboomafoo.html：

```
<!Doctype html>
<html>
    <head>
        <title>Zaboomafoo!</title>
    </head>
    <body>
        <script type="text/javascript" src="Zaboomafoo.js"></script>
    </body>
</html> 
```

清单.json：

```
{
   "name": "Displays Zaboomafoo when opening a new tab",
   "version": "0.1",
   "incognito": "split",
   "chrome_url_overrides": {
   "newtab": "Zaboomafoo.html"
  },
 "manifest_version": 2
} 
```

将新的 manifest.json、Zaboomafoo.html 和 Zaboomafoo.js 放入一个明显的文件夹中。最后，进入chrome扩展页面，打开开发者模式，加载解压后的扩展，打开一个新标签。当您打开选项卡时，扩展程序应该会加载一个令人讨厌的“Zaboomafoo”的警报。希望让浏览器扩展变得更流行一点，但这是它的一般流程。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-11-24T17:41:49.440

我刚刚发布了一个简单的 Chrome 扩展示例项目以及一些文档： [https ://github.com/binaryage/chromex-sample](https://github.com/binaryage/chromex-sample)

它使用 Chromex 库： [https ://github.com/binaryage/chromex](https://github.com/binaryage/chromex)

免责声明：我是图书馆的作者

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-23T00:16:49.133

我开始[这个](https://github.com/marcelocra/chrome-extension-cljs-example)项目的确切目的是使用 ClojureScript 编写一个 Chrome 扩展程序。

虽然`greenyouse`答案确实为您提供了一般指导，但作为 ClojureScript 的初学者，我在使用时遇到了一些麻烦`lein`，`cljsbuild`因此选择首先进行基本设置。也许它会帮助某人。

旁注：我计划将我的项目迁移到`lein`并且`cljsbuild`一旦我更好地理解了事情。那时我会更新这个答案。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-05-25T23:00:40.350

看看[这个](http://clockwork-fig.blogspot.in/2012/01/clojure-extension-for-chrome.html)用 cljs 编写的 chrome 扩展，它允许您通过选择来评估浏览器中的 clojure 代码作为示例。

# python - 在二维数组上使用插值函数

> ID：15162925
> 
> 赞同：1
> 
> 时间：2013-03-01T16:59:47.683
> 
> 标签：python, numpy, scipy, interpolation

我有一个一维函数，它需要花费大量时间来计算一个大的 'x' 值的二维数组，因此使用 SciPy 工具创建一个插值函数然后使用它计算 y 非常容易，这将是快多了。但是，我不能对超过一维的数组使用插值函数。

例子：

```
# First, I create the interpolation function in the domain I want to work
x = np.arange(1, 100, 0.1)
f = exp(x) # a complicated function
f_int = sp.interpolate.InterpolatedUnivariateSpline(x, f, k=2)

# Now, in the code I do that
x = [[13, ..., 1], [99, ..., 45], [33, ..., 98] ..., [15, ..., 65]]
y = f_int(x)
# Which I want that it returns y = [[f_int(13), ..., f_int(1)], ..., [f_int(15), ..., f_int(65)]] 
```

但返回：

```
ValueError: object too deep for desired array 
```

我知道我可以遍历所有 x 成员，但我不知道这是否是一个更好的选择......

谢谢！

编辑：

像这样的功能也可以完成这项工作：

```
def vector_op(function, values):

    orig_shape = values.shape
    values = np.reshape(values, values.size)

    return np.reshape(function(values), orig_shape) 
```

我试过 np.vectorize 但它太慢了......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T17:27:15.633

如果`f_int`想要一维数据，您应该展平您的输入，将其提供给插值器，然后重建您的原始形状：

```
>>> x = np.arange(1, 100, 0.1)
>>> f = 2 * x # a simple function to see the results are good
>>> f_int = scipy.interpolate.InterpolatedUnivariateSpline(x, f, k=2)

>>> x = np.arange(25).reshape(5, 5) + 1
>>> x
array([[ 1,  2,  3,  4,  5],
       [ 6,  7,  8,  9, 10],
       [11, 12, 13, 14, 15],
       [16, 17, 18, 19, 20],
       [21, 22, 23, 24, 25]])
>>> x_int = f_int(x.reshape(-1)).reshape(x.shape)
>>> x_int
array([[  2.,   4.,   6.,   8.,  10.],
       [ 12.,  14.,  16.,  18.,  20.],
       [ 22.,  24.,  26.,  28.,  30.],
       [ 32.,  34.,  36.,  38.,  40.],
       [ 42.,  44.,  46.,  48.,  50.]]) 
```

`x.reshape(-1)`进行展平，并将其`.reshape(x.shape)`恢复为原始形式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T17:14:25.117

我想你想在 numpy 中做一个矢量化函数：

```
#create some random test data
test = numpy.random.random((100,100))

#a normal python function that you want to apply
def myFunc(i):
    return np.exp(i)

#now vectorize the function so that it will work on numpy arrays
myVecFunc = np.vectorize(myFunc)

result = myVecFunc(test) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T17:06:26.297

我会使用一个`list comprehension`和的组合`map`（可能有一种方法可以使用`maps`我缺少的两个嵌套）

```
In [24]: x
Out[24]: [[1, 2, 3], [1, 2, 3], [1, 2, 3]]

In [25]: [map(lambda a: a*0.1, x_val) for x_val in x]
Out[25]: 
[[0.1, 0.2, 0.30000000000000004],
 [0.1, 0.2, 0.30000000000000004],
 [0.1, 0.2, 0.30000000000000004]] 
```

这仅用于说明目的....替换`lambda a: a*0.1`为您的功能，`f_int`

# java - Java - 字符串加倍问题

> ID：15162926
> 
> 赞同：-2
> 
> 时间：2013-03-01T16:59:49.757
> 
> 标签：java

我正在尝试在 Java 中将 String 转换为 Double。我从客户端“1131.00”得到以下字符串，但是当我将其转换为 Double 时，我得到了 1131.0，这是不正确的。我期待 1131.00（.00 - 有两个零）

```
_dPaymentAmt = ConvertUtil.stringToDouble(sPaymentAmt, 0.0);

public static double stringToDouble(String str, double dDefaultValue)
        throws Exception
        {
        double doubleValue = 0;

        try
            {
            doubleValue = Double.parseDouble(str);
            }
        catch (Exception e)
            {
            doubleValue = dDefaultValue;
            }

        return doubleValue;
        } 
```

如何保持小数点后的两个零？

**编辑：**中间层之一删除小数周期以将值发送到银行，银行将其除以 100 以计算小数。因此，如果我发送 1311.0，银行收费 131.10 ...所以我必须保留两个小数点，将其保持为 DOUBLE 值。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-01T17:02:22.537

`double`不保留无关紧要的十进制数字。这只是一个量级 - 所以 1131 == 1131.0 == 1131.00。将“1131.00”转换为1131.0是正确的*。*它可能不是你想要的，但它是正确的。

如果您实际上是在尝试存储一个始终具有两位小数的值（例如货币），那么您可能不应该`double`从一开始就使用它。使用`BigDecimal`或存储整数美分（或您存储的任何类型的数据）。

`BigDecimal`显示工作的示例：

```
import java.math.*;

public class Test {    

    public static void main (String[] args) throws Exception {
        BigDecimal bd = new BigDecimal("1311.00");
        System.out.println(bd); // 1311.00
    }
} 
```

请注意，将货币值存储为（或任何类型的浮点*二进制*数）几乎*总是不合适的。*`double`

 *如果以上不符合您的要求，请提供更多上下文。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-01T17:01:41.823

`double``1131.0`和没有区别`1131.00`：当存储在`double`变量中时，它们是完全相同的数字。

您可能希望将数字保留为`Strings`，或使用[`BigDecimal`](http://docs.oracle.com/javase/7/docs/api/java/math/BigDecimal.html)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-01T17:04:32.840

通过使用`java.math.BigDecimal`：

```
String dblStr = "1131.00";
BigDecimal bd = new BigDecimal(dblStr);
System.out.println("BD is " + bd); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-01T17:01:50.640

这都是格式化。双对象不包含对有多少个零的任何引用......这就是您打印它的方式。在数学上，1311.00 与 1311 完全相同，因此它不关心那些零。如果你想保持零，你应该正确地格式化它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-01T17:01:48.413

您期望在数据类型中保留两位小数`double`是没有意义的。就数值而言，1131.0 和 1131.00 是完全一样的，因此 double 数据类型将值保持为 1131.0。

如果您需要保存小数位，请将其保留为字符串。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-01T17:05:39.983

它就像以下代码一样简单：

```
public void GetTwoDecimal(){

            double d = 2.34568;
            DecimalFormat f = new DecimalFormat("##.00");  // this will helps you to always keeps in two decimal places
            System.out.println(f.format(d)); 
    } 
```

[资源](http://www.javaprogrammingforums.com/java-programming-tutorials/297-java-program-format-double-value-2-decimal-places.html)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-01T17:15:19.207

试试这样：我相信你的问题会得到解决。

```
import java.text.*;
public class Demo
{
  public static void main(String args[])
  {
    String str = "131.0000";   // keep as many zeroes 
    double d1 = Double.parseDouble(str);
    DecimalFormat df = new DecimalFormat("0.00");
    System.out.print(df.format(d1));
  }
} 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2013-03-01T17:06:49.487

创建一个格式（例如 format.money("$0.00")）。Java 可能有一种用于处理金钱的内置格式。如果您想要两位小数，请使用货币格式。*

# c# - LINQ-SQL 存在并发问题

> ID：15162934
> 
> 赞同：0
> 
> 时间：2013-03-01T17:00:21.897
> 
> 标签：c#, asp.net, linq-to-sql

我使用 LINQ SQL 的方式是使用 1 个全局数据上下文。

我有问题。我有一个页面可以抓取数据库中的所有案例并从结果 IEnumerable 中复制数据。

然后，当我导航去对这些案例进行一些更新时，它失败了。

我可以做些什么来解决并发问题或这些类型的一般问题，同时每个用户会话仍然只使用 1 个数据上下文？也许我在每次页面加载时都使用新的数据上下文或其他东西会有帮助吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T17:08:24.130

ASP.NET 中不能有 1 个全局数据上下文；每个 HTTP 请求都需要一个全局上下文，因为您将处理您提到的问题。LINQ to SQL 跟踪图形中的对象更改，静态上下文将包含在先前 HTTP 请求中设置的对象实例。另外，加班时，它会变得臃肿并占用大量内存。方法是将它的一个实例存储在`HttpContext.Current.Items`.

# google-groups - 如何从 Google 网上论坛下载所有消息？

> ID：15162944
> 
> 赞同：9
> 
> 时间：2013-03-01T17:00:59.543
> 
> 标签：google-groups

我想从 Google 网上论坛下载所有消息，因为我想分析那里可用的讨论。我该怎么做？

例如[https://groups.google.com/forum/#!forum/thackday](https://groups.google.com/forum/#!forum/thackday)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-13T21:36:01.667

在你发帖一年多之后，有人[问了一个非常相似的问题](https://stackoverflow.com/questions/23522705/download-all-messages-from-a-google-group)。OP 使用了屏幕抓取程序/工具，但选择的答案是使用“... gdata python 库来获取所有组的列表及其各自的 URL。从那里我使用 selenium 来抓取组的消息和所有回复。”

# html - 是否有用于 web 开发的 sublime text 2 的模板/编译器？

> ID：15162949
> 
> 赞同：1
> 
> 时间：2013-03-01T17:01:07.790
> 
> 标签：html, sublimetext2

我正在尝试为 html 模板找到一个简单的“编译器”，您可以在其中定义模板文件，其中包含在 {squiggly 括号} 等中定义的那些模板的可更新部分。然后使用标记语言或 xml 等，在已编译的文件夹中生成平面 html。

这样的包存在吗？

它非常适合以最小的努力快速整理出多种语言的平面 html 或其他“大批量”其他相同的页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T14:37:51.663

我认为您要查找的内容不在 Sublime Text 2 的范围内。Sublime Text 2 是文本编辑器，而不是网站生成器，因此您以错误的方式提出问题。

而是通过 Sublime Text 2 构建系统使用像 Pelican [http://docs.getpelican.com/en/3.1.1/这样的独立产品。](http://docs.getpelican.com/en/3.1.1/)构建系统提供了集成命令行应用程序的通用方法，无需为此类用例创建“插件”。

所以答案是

*   了解如何使用命令行工具

*   将其集成到 Sublime Text 2 构建 [http://docs.sublimetext.info/en/latest/file_processing/build_systems.html](http://docs.sublimetext.info/en/latest/file_processing/build_systems.html)

# jquery - jquery .preventDefault() 问题

> ID：15162950
> 
> 赞同：1
> 
> 时间：2013-03-01T17:01:12.017
> 
> 标签：jquery, ajax, forms, form-submit

我想要使​​用此代码处理的表单：

```
 //All form submissions should go through here.
 $(document).on('submit', 'form', function (x) {
     //x.preventDefault();  //commented out because it's not working
     $.ajax({
         url: $(this + '#formdestination').val(), //formdestination is a hidden field, showing where to submit the form
         type: 'post',
         dataType: 'json',
         data: $(this).serialize(),
         complete: function (xhr, status) {
            if (status === 'error' || !xhr.responseText) {
                window.location = '/broken/?err=Inconsolable%20onsubmit%20ajax%20error'; //i'd like the real error here, ideally
            } //end if
            else {
                loader($('#pagedestination').val()); 
                //loader is a function that animates the page as it loads new content.
                //#pagedestination is a hidden field that stores where the page should go when it's done.
                //Yes, I know formdestination and pagedestination could be handled with the form or the backend.  There are reasons that do not matter much here.
            } //end else
        } //end complete function

    });

    return false;
}); 
```

我有几个问题。

1.) 当一个表单被提交时，它会调用这个函数。它不调用加载程序，或者如果调用，它会被控制器的重定向覆盖。提交表单时，我需要防止通用提交。.preventDefault() 无法正常工作（见下文）。

2.）（远不如#1重要）如果ajax失败，我想得到合法的错误。如何？

On .preventDefault() - 当我尝试它时，我得到这个错误：Uncaught SyntaxError: Unexpected identifier

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T17:03:01.203

```
$(document).on('submit', 'form', function (x) {
    x.preventDefault();  //x must be inside the anonymous function
    $.ajax({ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T17:15:45.083

你得到的例外来自其他地方，请访问这个小提琴：http: [//jsfiddle.net/DgRLa/](http://jsfiddle.net/DgRLa/)

它有这个代码：

```
$(document).on('click', '.test', function (x) {
    x.preventDefault();  //commented out because it's not working

    $.ajax({
         url: "test.php", //formdestination is a hidden field, showing where to submit the form
         type: 'post',
         dataType: 'json',
         data: $(this).serialize(),
         complete: function (xhr, status) {
             console.log("hi");
         } 
    }).fail(function () {
        alert("error");
    });
}); 
```

当您单击“clickme”元素时，您将同时获得 console.log 和警报。

使用“成功”回调而不是“完成”回调，并使用 deferred .fail 来捕获错误，尝试这样的事情：

```
$(document).on('submit', 'form', function (x) {
     x.preventDefault();  //commented out because it's not working
     var url = $(this).attr("action");     

     $.ajax({
         url: url , // Use the form action attribute instead of a hidden field
         type: 'post',
         dataType: 'json',
         data: $(this).serialize(),
         success: function (data) {
             loader($('#pagedestination').val()); 
         } 
    }).fail(function (error) {
         // error has all sorts of fun stuff
    });

    // return false; Dont return false, preventDefault is enough
}); 
```

PS：您提到加载器将用户发送到不同的页面，如果您要重定向页面，是否有理由使用 ajax 提交表单？

# c++ - 如何在不复制的情况下将小向量的集合转移到唯一的向量中

> ID：15162952
> 
> 赞同：0
> 
> 时间：2013-03-01T17:01:24.083
> 
> 标签：c++, map, stl

我有一个`map<T,vector<double> >`，说`T=char`的价值观是`vector<double>`说`length<n`的`n=5`。我想将每个`vector<double>`从地图转移到一个`vector<double>`有长度的大的`n*mapsize`，每个向量插入在索引处`5*k`。如果可能，所有这些都无需复制。

```
#include <vector>
#include <map>
using namespace std;
int main()
{
    typedef vector<double> Vec;
    typedef map<char, vector<double> >::iterator ItMap;

    //create a map<char,vector<double>> with 2 keys holding resp 2-3 elem vectors
    double v_value[] = {1.1,2.4};
    Vec v(v_value, v_value + sizeof(v_value)/sizeof(double));
    map<char,vector<double> > myMap;
    myMap['A'] = v;
    v.push_back(10);
    myMap['B'] = v;

    //create the vector that should get all the small vectors
    Vec receipt;
    receipt.reserve(10);

    for(ItMap it = myMap.begin(); it != myMap.end(); ++it) {
        it->second.resize(5);
        receipt.insert(receipt.end(),it->second.begin(),it->second.end());
    }
} 
```

编辑：我用我的解决方案进行了编辑，但它确实复制了。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-01T17:07:16.867

正如我在评论中解释的那样，不复制是不可能的；地图中的每个向量都是一个单独管理的动态数组，新向量是一个新的大数组。必须复制这些值。我不会担心这一点，除非您已经分析并看到这是一个重要问题。

本着这种精神，[`std::copy`](http://en.cppreference.com/w/cpp/algorithm/copy)为了救援...... de de，de de，dum de dum......

```
#include <vector>
#include <map>
#include <algorithm>

template<typename T, size_t N>
size_t length(T (&)[N]) {
   return N;
}

int main()
{
    typedef std::vector<double> Vec;
    typedef std::map<char, vector<double> >::iterator ItMap;

    //create a map<char,vector<double>> with 2 keys holding resp 2-3 elem vectors
    double v_value[] = {1.1,2.4};
    Vec v(v_value, v_value + length(v_value));
    std::map<char,vector<double> > myMap;
    myMap['A'] = v;
    v.push_back(10);
    myMap['B'] = v;

    //create the vector that should get all the small vectors
    Vec receipt(10);

    for(ItMap it = myMap.begin(); it != myMap.end(); ++it) {
        std::copy(it->second.begin(), it->second.end(), std::back_inserter(receipt));
    }
} 
```

对于用户定义和/或更复杂的类型，*如果*您的目标编译器支持 C++11 ，则使用`double`它*可能*更有效。[`std::move`](http://en.cppreference.com/w/cpp/algorithm/move)

 *我演示了一个计算数组长度的小技巧……我总是对`sizeof`.

PS我*讨厌* `using namespace std`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T17:04:34.730

**如果您的向量包含任何廉价可移动且复制昂贵的内容，您可以使用**[std::move 将](http://en.cppreference.com/w/cpp/algorithm/move)每个小向量的内容移动到大向量中：

```
std::vector<T2> big_vector;
std::map<T1, std::vector<T2>> m = ....;

#include <algorithm> // for this std::move overload
#include <iterator>  // for std::back_inserter

for(auto& e : m) {
  std::move(m.second.begin(), m.second.end(), std::back_inserter(big_vector));
} 
```

另一方面，既然你正在存储`doubles`，那么除了复制之外，你无能为力。上面的方法可以工作，但是`move`对于一个双倍来说是一个副本。所以最后一个循环可以替换为

```
for(const auto& e : m) {
  std::copy(m.second.begin(), m.second.end(), std::back_inserter(big_vector));
} 
```*

# web-services - 类文件 javax/xml/rpc/ServiceException 中非本机或抽象方法中的缺失代码属性

> ID：15162953
> 
> 赞同：0
> 
> 时间：2013-03-01T17:01:31.960
> 
> 标签：web-services, axis

我的 apache 轴有问题。虽然我能够从 wsdl 文件生成 java 代码。当我尝试使用轴教程所说的生成类时。单击[此处](http://axis.apache.org/axis/java/user-guide.html "安讯士用户指南")！我收到以下错误：

* * *

```
`Exception in thread "main" java.lang.ClassForm`enter code here`atError: Absent Code attribute in method that is not native or abstract in class file javax/xml/rpc/ServiceException
    at java.lang.ClassLoader.defineClass1(Native Method)
    at java.lang.ClassLoader.defineClassCond(ClassLoader.java:631)
    at java.lang.ClassLoader.defineClass(ClassLoader.java:615)
    at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:141)
    at java.net.URLClassLoader.defineClass(URLClassLoader.java:283)
    at java.net.URLClassLoader.access$000(URLClassLoader.java:58)
    at java.net.URLClassLoader$1.run(URLClassLoader.java:197)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:247)` 
```

* * *

我确信当我使用soapUI 4.5.1 进行通信时，Web 服务正在工作，它会响应。我正在使用 Maven 3.0.3。我的 pom 文件如下所示：

* * *

```
 <?xml version="1.0" encoding="UTF-8"?>
<project
        xmlns="http://maven.apache.org/POM/4.0.0"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">

    <!-- POM file generated with GWT webAppCreator -->
    <modelVersion>4.0.0</modelVersion>
    <groupId>com.alcatel.ssu</groupId>
    <artifactId>UMS_SSU</artifactId>
    <packaging>war</packaging>
    <version>1.0</version>
    <name>GWT Maven Archetype</name>

    <properties>
        <!-- Convenience property to set the GWT version -->
        <gwtVersion>2.1.1</gwtVersion>
        <!-- GWT needs at least java 1.5 -->
        <maven.compiler.source>1.6</maven.compiler.source>
        <maven.compiler.target>1.6</maven.compiler.target>
        <webappDirectory>${project.build.directory}/${project.build.finalName}</webappDirectory>
        <gxt.version>2.2.0</gxt.version>
    </properties>

    <dependencies>
        <dependency>
            <groupId>com.google.gwt</groupId>
            <artifactId>gwt-servlet</artifactId>
            <version>2.2.0</version>
            <scope>runtime</scope>
        </dependency>
        <dependency>
            <groupId>com.google.gwt</groupId>
            <artifactId>gwt-user</artifactId>
            <version>2.2.0</version>
            <scope>provided</scope>
        </dependency>

        <!-- Hibernate -->
        <dependency>
            <groupId>c3p0</groupId>
            <artifactId>c3p0</artifactId>
            <version>0.9.1.2</version>
        </dependency>
        <dependency>
            <groupId>javax.persistence</groupId>
            <artifactId>persistence-api</artifactId>
            <version>1.0</version>
        </dependency>
        <dependency>
            <groupId>org.hibernate</groupId>
            <artifactId>hibernate</artifactId>
            <version>3.2.6.ga</version>
            <exclusions>
                <exclusion>
                    <groupId>javax.transaction</groupId>
                    <artifactId>jta</artifactId>
                </exclusion>
            </exclusions>
        </dependency>

        <dependency>
            <groupId>org.hibernate</groupId>
            <artifactId>hibernate-entitymanager</artifactId>
            <version>3.4.0.GA</version>
        </dependency>
        <dependency>
            <groupId>org.slf4j</groupId>
            <artifactId>slf4j-simple</artifactId>
            <version>1.4.2</version>
        </dependency>
        <dependency>
            <groupId>mysql</groupId>
            <artifactId>mysql-connector-java</artifactId>
            <version>5.1.5</version>
        </dependency>

        <!-- log4j -->
        <dependency>
            <groupId>commons-configuration</groupId>
            <artifactId>commons-configuration</artifactId>
            <version>1.5</version>
        </dependency>

        <!-- jxl -->
        <dependency>
            <groupId>net.sourceforge.jexcelapi</groupId>
            <artifactId>jxl</artifactId>
            <version>2.6.10</version>
        </dependency>

        <dependency>
            <groupId>com.google.gwt</groupId>
            <artifactId>gwt-servlet</artifactId>
            <version>2.1.0</version>
            <scope>runtime</scope>
        </dependency>
        <dependency>
            <groupId>com.google.gwt</groupId>
            <artifactId>gwt-user</artifactId>
            <version>2.1.0</version>
            <scope>provided</scope>
        </dependency>

        <dependency>
            <groupId>com.extjs</groupId>
            <artifactId>gxt</artifactId>
            <version>${gxt.version}</version>
            <scope>provided</scope>
        </dependency>

        <dependency>
            <groupId>commons-configuration</groupId>
            <artifactId>commons-configuration</artifactId>
            <version>1.2</version>
        </dependency>

        <dependency>
            <groupId>commons-collections</groupId>
            <artifactId>commons-collections</artifactId>
            <version>3.2.1</version>
        </dependency>

        <dependency>
            <groupId>com.googlecode.json-simple</groupId>
            <artifactId>json-simple</artifactId>
            <version>1.1</version>
        </dependency>

        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-beans</artifactId>
            <version>3.0.5.RELEASE</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-jdbc</artifactId>
            <version>3.0.5.RELEASE</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-web</artifactId>
            <version>3.0.5.RELEASE</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-webmvc</artifactId>
            <version>3.0.5.RELEASE</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-orm</artifactId>
            <version>3.0.5.RELEASE</version>
        </dependency>
        <dependency>
            <groupId>org.hibernate</groupId>
            <artifactId>hibernate-entitymanager</artifactId>
            <version>3.3.2.ga</version>
        </dependency>

        <dependency>
            <groupId>com.thoughtworks.xstream</groupId>
            <artifactId>xstream</artifactId>
            <version>1.3.1</version>
        </dependency>

        <dependency>
            <groupId>org.apache.axis2</groupId>
            <artifactId>axis2</artifactId>
            <version>1.6.2</version>
        </dependency>
        <dependency>
            <groupId>org.apache.xmlbeans</groupId>
            <artifactId>xmlbeans</artifactId>
            <version>2.4.0</version>
            <scope>compile</scope>
        </dependency>
        <dependency>
            <groupId>org.apache.ws.commons.axiom</groupId>
            <artifactId>axiom-api</artifactId>
            <version>1.2.14</version>
        </dependency>
        <dependency>
            <groupId>org.apache.ws.commons.axiom</groupId>
            <artifactId>axiom-impl</artifactId>
            <version>1.2.14</version>
        </dependency>
        <!--<dependency>
            <groupId>axis</groupId>
            <artifactId>axis-wsdl4j</artifactId>
            <version>1.2-RC1</version>
        </dependency>-->
        <dependency>
            <groupId>org.apache.ws.commons.schema</groupId>
            <artifactId>XmlSchema</artifactId>
            <version>1.3.2</version>
        </dependency>
        <dependency>
            <groupId>org.apache.neethi</groupId>
            <artifactId>neethi</artifactId>
            <version>3.0.2</version>
        </dependency>
        <dependency>
            <groupId>javax.mail</groupId>
            <artifactId>mail</artifactId>
            <version>1.4</version>
            <scope>provided</scope>
        </dependency>
        <dependency>
            <groupId>org.apache.axis2</groupId>
            <artifactId>axis2-transport-local</artifactId>
            <version>1.5</version>
        </dependency>
        <dependency>
            <groupId>org.apache.axis2</groupId>
            <artifactId>axis2-transport-http</artifactId>
            <version>1.5</version>
        </dependency>

        <dependency>
            <groupId>cglib</groupId>
            <artifactId>cglib-nodep</artifactId>
            <version>2.2</version>
            <type>jar</type>
            <scope>compile</scope>
        </dependency>
        <dependency>
            <groupId>sshtools</groupId>
            <artifactId>j2ssh-core</artifactId>
            <version>0.2.2</version>
        </dependency>

        <!-- AXIS DEPENDENCY START-->

        <dependency>
            <groupId>org.apache.axis</groupId>
            <artifactId>axis</artifactId>
            <version>1.4</version>
        </dependency>

        <dependency>
            <groupId>org.apache.axis</groupId>
            <artifactId>axis-jaxrpc</artifactId>
            <version>1.4</version>
        </dependency>

        <dependency>
            <groupId>org.apache.axis</groupId>
            <artifactId>axis-saaj</artifactId>
            <version>1.4</version>
        </dependency>
        <dependency>
            <groupId>axis</groupId>
            <artifactId>axis-wsdl4j</artifactId>
            <version>1.5.1</version>
        </dependency>

        <dependency>
            <groupId>commons-discovery</groupId>
            <artifactId>commons-discovery</artifactId>
            <version>0.4</version>
        </dependency>

        <dependency>
            <groupId>log4j</groupId>
            <artifactId>log4j</artifactId>
            <version>1.2.14</version>
        </dependency>
        <!-- AXIS DEPENDENCY END-->

    </dependencies>

    <build>
        <!-- Generate compiled stuff in the folder used for developing mode -->
        <outputDirectory>${webappDirectory}/WEB-INF/classes</outputDirectory>

        <plugins>

            <!-- AXIS PLUGIN START-->
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-compiler-plugin</artifactId>
                <version>2.0.2</version>
                <configuration>
                    <source>1.5</source>
                    <target>1.5</target>
                </configuration>
            </plugin>
            <plugin>
                <groupId>org.codehaus.mojo</groupId>
                <artifactId>axistools-maven-plugin</artifactId>
                <configuration>
                    <sourceDirectory>src/main/resources/command</sourceDirectory>
                    <packageSpace>com.mycompany.myschema</packageSpace>
                    <testCases>false</testCases>
                    <serverSide>false</serverSide>
                    <subPackageByFileName>false</subPackageByFileName>
                </configuration>
                <executions>
                    <execution>
                        <goals>
                            <goal>wsdl2java</goal>
                        </goals>
                    </execution>
                </executions>
            </plugin>
            <!-- AXIS PLUGIN END-->

            <!-- GWT Maven Plugin -->
            <plugin>
                <groupId>org.codehaus.mojo</groupId>
                <artifactId>gwt-maven-plugin</artifactId>
                <version>2.1.0-1</version>
                <executions>
                    <execution>
                        <goals>
                            <goal>compile</goal>
                            <goal>test</goal>
                            <goal>i18n</goal>
                            <!--<goal>generateAsync</goal>-->
                        </goals>
                    </execution>
                </executions>
                <!-- Plugin configuration. There are many available options, see gwt-maven-plugin
             documentation at codehaus.org -->
                <configuration>
                    <runTarget>SSU.html</runTarget>
                    <hostedWebapp>${webappDirectory}</hostedWebapp>
                    <i18nMessagesBundle>com.alcatel.ssu.client.Messages</i18nMessagesBundle>
                </configuration>
            </plugin>

            <!-- Copy static web files before executing gwt:run -->
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-war-plugin</artifactId>
                <version>2.1.1</version>
                <executions>
                    <execution>
                        <phase>compile</phase>
                        <goals>
                            <goal>exploded</goal>
                        </goals>
                    </execution>
                </executions>
                <configuration>
                    <webappDirectory>${webappDirectory}</webappDirectory>
                </configuration>
            </plugin>

            <!-- Maven wsdl2java Code plugin -->
            <plugin>
                <groupId>org.apache.axis2</groupId>
                <artifactId>axis2-wsdl2code-maven-plugin</artifactId>
                <version>1.6.2</version>
                <executions>
                    <execution>
                        <goals>
                            <goal>wsdl2code</goal>
                        </goals>
                    </execution>
                </executions>

                <!--<configuration>
                    <packageName>com.foo.myservice</packageName>
                    <wsdlFile>src/main/resources/People_WS.wsdl</wsdlFile>
                    <databindingName>xmlbeans</databindingName>
                </configuration>-->

                <configuration>
                    <packageName>com.alcatel.ssu.server.remedy.supportGroupUser</packageName>
                    <wsdlFile>src/main/resources/People_WS.wsdl</wsdlFile>
                    <databindingName>xmlbeans</databindingName>
                </configuration>

            </plugin>

            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-dependency-plugin</artifactId>
                <version>2.1</version>
                <executions>
                    <execution>
                        <id>copy</id>
                        <phase>process-resources</phase>
                        <goals>
                            <goal>copy</goal>
                        </goals>
                        <configuration>
                            <artifactItems>
                                <artifactItem>
                                    <groupId>org.apache.openejb</groupId>
                                    <artifactId>openejb-javaagent</artifactId>
                                    <version>3.0-beta-2</version>
                                    <outputDirectory>${project.build.directory}</outputDirectory>
                                </artifactItem>
                            </artifactItems>
                        </configuration>
                    </execution>
                </executions>
            </plugin>

        </plugins>
    </build>
</project> 
```

* * *

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T12:22:30.890

我认为问题出在 javaee-api 依赖项上。当我删除这个依赖时，它起作用了，但是这次休眠有一些问题。要消除问题，请删除轴依赖项并将所需的轴 jar 添加到项目库中。目前看来，还可以。如果出现任何问题，我将更新解决方案。

# python - Python/win32com - 检查程序是否打开

> ID：15162954
> 
> 赞同：8
> 
> 时间：2013-03-01T17:01:36.817
> 
> 标签：python, win32com

我有一个脚本，我使用 win32com 与 COM 服务进行交互。当程序已经打开时，它会按预期工作。我使用 win32com.client.dynamic.Dispatch 连接到它，然后与应该已经打开的文档进行交互。假设程序已经打开，我可以轻松检查文档是否打开，但我不确定如何检查程序是否已经打开。当我使用提到的 Dispatch 时，如果程序尚未打开，它只会启动程序，这不是我想要的。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-10-15T20:19:18.803

试试 win32com.client.GetActiveObject() 方法。这是我在编写的一些便利函数中使用的，这是一个用于 Excel 的函数：

```
def Excel(visible=True):
    '''Get running Excel instance if possible, else 
    return new instance. 
    '''
    try: 
        excel = win32com.client.GetActiveObject("Excel.Application")
        print("Running Excel instance found, returning object")

    except:
        excel = new_Excel(visible=visible)
        print("No running Excel instances, returning new instance")

    else:
        if not excel.Workbooks.Count:
            excel.Workbooks.Add(1)
        excel.Visible = visible

    return excel 
```

new_Excel 只是打开 Excel 应用程序对象的新实例的另一个便利函数。

# asp.net-mvc-3 - MVC Viewbag 传递列表查看

> ID：15162957
> 
> 赞同：0
> 
> 时间：2013-03-01T17:01:43.530
> 
> 标签：asp.net-mvc-3, razor

s 这段代码有什么问题？我只是想练习将列表传递给我的视图：

控制器：

```
public ActionResult About()

    {
        List<string> ListofColors = new List<string>();
        ViewBag.colors.Add("red");
        ViewBag.colors.Add("green");
        ViewBag.colors.Add("blue");

        ViewBag.ListColors = ListofColors;
        return View(); 
```

看法：

```
<ul id="colors">

@foreach (var colors in (List<string>) ViewBag.ListColors) { 
<li>
    @colors
</li>
} 

</ul> 
```

我得到的错误是：CS0103：当前上下文中不存在名称“颜色”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T17:04:12.110

您没有`ListColors`在控制器操作中将对象传递到您的视图包：

```
 ....
 ViewBag.ListColors = ListofColors;
 return View();
 .... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T17:04:19.513

您的控制器代码中缺少该行。

```
ViewBag.ListColors = colors; 
```

编辑 :: 代码应如下所示在您的控制器中

```
public ActionResult About()
{
    List<string> ListofColors = new List<string>();
    ListofColors.Add("red");
    ListofColors.Add("green");
    ListofColors.Add("blue");

    ViewBag.ListColors = ListofColors;
    return View();
} 
```

这将解决您的问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-01T17:43:07.937

```
List<string> ListofColors = new List<string>();
ListofColors.Add("red");
ListofColors.Add("green");
ListofColors.Add("blue");

ViewBag.ListColors = ListofColors; 
```

将颜色添加到您的列表并将 listofcolors 传递给 viewbag

# templates - 是否可以在 liferay 中设置默认的网页内容模板？

> ID：15162958
> 
> 赞同：0
> 
> 时间：2013-03-01T17:01:44.753
> 
> 标签：templates, plugins, configuration, liferay, default

也许你可以帮助我。

我使用的是liferay 6.1.1 ce版本。

我已经从 plugin-repo 安装了“default-web-content-hook”。

我想为 webcontent display portlet 设置一个默认模板，这样当用户单击“添加 Web 内容”并打开编辑器时，某个预配置的模板，如 default-web-content-hook 中的“carousel”。

有人知道它是如何工作的吗？谢谢各位，你们是最棒的！周末愉快！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T22:39:44.340

我认为 Liferay 中没有这样的选项可以设置默认结构（模板）。

但这可以通过多种方式实现。您可以只编辑打开添加 Web 内容对话框的链接，并在 structureId 参数后面附加适当的值。(&_15_structureId=MULTIPLE-ITEM-CAROUSEL)

其他选项是修改 /portal-web/docroot/html/portlet/journal/edit_article.jsp 并且当 structureId 参数为空时插入一个值。该值可以硬编码或通过配置提供。

您也可以修改 com.liferay.portlet.journal.action.EditArticleAction。

# php - 通过键对数组值求和

> ID：15162960
> 
> 赞同：1
> 
> 时间：2013-03-01T17:01:47.187
> 
> 标签：php, arrays, multidimensional-array

我需要总结数组中子数组的一些值。

我有这个数组

```
Array
(
    [smecid_2] => Array
        (
            [0] => 1
            [1] => SMEC 55.6
            [2] => 960
            [3] => 864
            [4] => 960
            [5] => 864
        )

    [smecid_6] => Array
        (
            [0] => 3
            [1] => SMEC 55.6 ATEX EX
            [2] => 1290
            [3] => 1161
            [4] => 3870
            [5] => 3483
        )

) 
```

我想要做的是总结每个子数组的键 [4] 中的所有字段，并能够在 $total 中回显总计；

在此示例`$total;`中为`4830`(960+3870)。

此外，当用户提交更多产品以进行订购时，该数组可以包含比这 2 个更多的子数组。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T17:05:06.347

```
<?php
$array = array
(
    'smecid_2' => array
        (
            0 => 1,
            1 => 'SMEC 55.6',
            2 => 960,
            3 => 864,
            4 => 960,
            5 => 864,
        ),

    'smecid_6' => array
        (
            0 => 3,
            1 => 'SMEC 55.6 ATEX EX',
            2 => 1290,
            3 => 1161,
            4 => 3870,
            5 => 3483,
        )

);

$sum = 0;
foreach ($array as $subarray)
{
    $sum += $subarray[4];
}
echo $sum; 
```

[看到它在行动](http://codepad.viper-7.com/6aBUCl)

# file - 批量删除空目录（并说明哪些目录不为空？）

> ID：15162961
> 
> 赞同：0
> 
> 时间：2013-03-01T17:01:47.577
> 
> 标签：file, batch-file, organization

我在用着：

```
for /f "tokens=*" %%d in ('dir /ad/b/s ^| sort /R') do rd "%%d"
pause 
```

返回：

```
The directory is not empty. 
```

对于任何非空目录。有没有办法专门列出哪些目录不是空的而不是模糊的陈述？我知道手动检查目录并不费力，但这是我试图使用户更友好的更大脚本的一部分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T17:13:50.093

`rd`返回一个`ERRORLEVEL`您可以使用的，只需更改：

```
rd "%%d" 
```

对此：

```
rd "%%d" || (echo Not empty: %%d) 
```

要从中删除错误消息，`rd`只需重定向`stderr`到`nul`：

```
rd "%%d" 2>nul || (echo Not empty: %%d) 
```

# angularjs - 如何获取 ngRepeat 指令中输入字段的 NgModelController？

> ID：15162969
> 
> 赞同：3
> 
> 时间：2013-03-01T17:01:59.930
> 
> 标签：angularjs, angularjs-ng-repeat

通常，使用表单和输入字段，表单控制器会发布到表单名称属性下的相关范围中。并且，NgModelController 在输入名称属性下发布。因此，对于带有 ngModel 指令的输入字段，可以像这样检索输入字段的 NgModelController`$scope.myFormName.myInputFieldName`

问题是如何为 ngRepeat 指令中的输入字段做同样的事情（获取 NgModelController）？

我想使用 $index 作为名称的一部分来命名输入字段，以便每个模板实例都是唯一命名的。这渲染OK，所以

```
<input name="foo_{{$index}}" ... 
```

将具有 $index == 3 的实例呈现为

```
<input name="foo_3" ... 
```

但是尝试通过已发布的名称获取 ngModelController 不起作用（未定义），例如：

```
$scope.myFormName.foo_3 
```

显示此内容的 plunker 在这里：[http ://plnkr.co/edit/jYDhZfgC3Ud0fXUuP7To?p=preview](http://plnkr.co/edit/jYDhZfgC3Ud0fXUuP7To?p=preview)

它显示成功获取“普通”输入元素的 ngModelController 并调用 $setValidity，还显示无法获取 ngRepeat 指令内的输入元素的 ngModelController。

从下面的 plunker 复制了相关的代码部分：

```
<div ng-repeat="element in elements">
  <div ng-class="{error: form['foo_{{$index}}'].$invalid}">
    <input name="foo_{{$index}}" ng-model="element.a" type="number">
    <span ng-show="form['foo_{{$index}}'].$error.bar">ngRepeat bar invalid</span>
  </div>
</div>
{{form.foo_0.$setValidity('bar', false)}} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T02:05:07.883

@Flek 是正确的，ng-repeat 创建的新子范围是这里问题的根源。由于浏览器不允许嵌套 <form> 元素，嵌套表单时必须使用 ngForm，或者当您想在 ngRepeat 中进行表单验证时。

请参阅[Pawel](https://groups.google.com/d/msg/angular/v5lK1y8-HXQ/ucq8MfcjKNsJ)在 google group thread 上的回答，其中显示了如何使用 ng-form 创建内部表单，和/或@blesh 的[SO 回答](https://stackoverflow.com/questions/14378401/dynamic-validation-and-name-in-a-form-with-angularjs)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T01:22:44.493

如果我正确理解了您的问题，那么您正在尝试访问在`ng-repeat`.

请看看这个小提琴[http://jsfiddle.net/EF5Jp/](http://jsfiddle.net/EF5Jp/)。在按钮单击处理程序中，您将可以访问具有 id 的元素`myForm.foo_2`。您可以注意到该元素是由`myForm.foo_2`而不是检索的`$scope.myForm.foo_2`。第二件事是，使用其范围而不是使用其 value 属性（如`angular.element(element).scope().foo = 6;`.

# java - 用于 64 位 Windows 系统的 Java TIF 图像阅读器

> ID：15162971
> 
> 赞同：0
> 
> 时间：2013-03-01T17:02:07.267
> 
> 标签：java, windows, 64-bit, tiff

我正在尝试在 64 位 Windows 机器上读取 Java 中的 TIF 图像。我想使用我能使用的所有内存，因为文件会很大，所以 32 位 JAI 选项不起作用。

是否有另一个可以读取 TIF 文件的开源或免费 Java 软件包？

我查看了 javax.imageio.ImageIO ，但除非我阅读的文档已过时，否则该类似乎只处理 GIF、JPEG、PNG、WBMP 和 BMP。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T17:04:52.167

为了使用 ImageIO 读取 .tiff 图像，您需要一个支持此类型的读取器实现。JAI 发行版提供的 jai_imageio.jar 中有一个。

# silverlight - Silverlight 应用签名的必要性

> ID：15162972
> 
> 赞同：0
> 
> 时间：2013-03-01T17:02:20.073
> 
> 标签：silverlight

大家好，在stackoverflow，

在我将 Silverlight 应用程序托管到 Web 之前，真的有必要对其进行签名吗？记住我不是一家大公司或企业，但我已经为一家小公司编写和设计了应用程序，我可以在没有它的情况下做到这一点吗？

亲切的问候

将要。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T20:14:00.690

我在网络上运行了一些 Silverlight 应用程序，但从未处理过签名问题。我不能肯定地说在某些情况下不会有问题，但一般来说不需要签名。

# php - 更新表解析错误

> ID：15162974
> 
> 赞同：-5
> 
> 时间：2013-03-01T17:02:26.730
> 
> 标签：php, mysql

概述：我正在创建一个用于学习目的的虚拟网站，因此它的功能主义者是基本的和安全的，不在议程 atm 上。

问题：当我登录系统并单击编辑帐户按钮时，我收到此错误：

> 解析错误：语法错误，第 104 行 C:\xampp\htdocs\eshop\userEditAccount.php 中的文件意外结束

userEditAccount.php 文件：

```
<?php

session_start();

    require_once('userEditAccount.php');
    include('connect_mysql.php');

    if(isset($_POST['Editsubmited'])){

    $userid = $_SESSION['user_id'];

    $Newusername = $_POST['username'];
    $Newpassword = $_POST['password'];
    $Newfirstname = $_POST['first_name'];
    $Newlastname = $_POST['last_name'];
    $Newemail = $_POST['email'];

    $sql = "UPDATE users SET username='$Newusername', password='$Newpassword',
    first_name='$Newfirstname', last_name='$Newlastname WHERE user_id='$userid'";

    $result = mysql_query($sql)  or die("Query failed : " . mysql_error()); 

    if(!$result){
        exit("Error Ocured whilsd updating $ud_id record");
    }
    echo "Record $ud_id has been sucesfully updated";

mysql_close($con);

?>

<html>
<head>

<title>Edit Account</title>
<meta http-equiv="content-type" content="text/html; charset=iso-8859-1" />
<link href="style.css" rel="stylesheet" type="text/css" />
</head>
<body>

    <div id="wrapper">
        <header><h1>E-Shop</h1></header>

        <article>
        <h1>Welcome</h1>

            <h1>Edit Account</h1>

        <div id="login">

                <ul id="login">

                <form method="post" name="editAccount" action="userEditAccount.php"  >
                    <fieldset>  
                        <legend>Fill in the form</legend>

                        <label>Select Username : <input type="text" name="username" /></label>
                        <label>Password : <input type="password" name="password" /></label>
                        <label>Enter First Name : <input type="text" name="first_name" /></label>
                        <label>Enter Last Name : <input type="text" name="last_name" /></label>
                        <label>Enter E-mail Address: <input type="text" name="email" /></label>
                    </fieldset>
                        <br />

                        <input name="Editsubmited" type="submit" submit="submit" value="Edit Account" class="button">

                </form>

                <?

                    echo $newrecord;
                ?>

                </div>
            <form action="userhome.php" method="post">
            <div id="login">
                <ul id="login">
                    <li>
                        <input type="submit" value="back" onclick="index.php" class="button">   
                    </li>
                </ul>
            </div>      

        </article>
<aside>
</aside>

<div id="footer">This is my site i Made coppyrights 2013 Tomazi</div>
</div>

</body>
</html> 
```

查看代码一切看起来都是正确的，错误没有意义意外的文件结尾......

当我在单独的文件中使用 php 代码并将此文件与 html 文件链接时，我在 php 所在的文件中得到相同的错误，因此我猜它与 php 有关系......

任何建议Overflowers：.....？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T17:03:16.757

你没有关闭你的如果：

```
 if(isset($_POST['Editsubmited'])){ 
```

为防止将来出现此错误，请确保正确缩进您的代码，这样可以更轻松地找到属于一起的大括号并查看缺少的大括号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T17:20:44.630

下面提到的 if 语句没有关闭：

```
if(isset($_POST['Editsubmited'])){ 
```

`echo $newrecord;`语句后关闭此函数

# java - 如何查询列表 使用 DBUtils？

> ID：15162976
> 
> 赞同：6
> 
> 时间：2013-03-01T17:02:29.230
> 
> 标签：java, apache-commons-dbutils

查看[DBUtils API 文档](http://commons.apache.org/proper/commons-dbutils/apidocs/org/apache/commons/dbutils/handlers/package-summary.html)，我看不出是否可以像使用 BeanListHandler`List<String>`查询 a 一样查询 a 。`List<MyBean>`

我可以创建一个包装字符串并使用 BeanListHandler 的 Bean，也可以返回 a`List<Object[]>`并以这种方式取出我的字符串。

但是有没有更直接的方法可以让 DBUtils 传回`List<String>`从 varchar 表列生成一堆字符串值的查询？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-01T17:27:18.867

尝试 a `ColumnListHandler`，并告诉它要使用查询中的哪一列。您可以传入要提取的列索引或列名。就像是：

```
List<String> strings = runner.query("SELECT my_col FROM my_table",
                                    new ColumnListHandler<String>(1));
                                    // gets first column 
```

如果所选列是字符串类型，它在内部使用[`ResultSet#getObject`](http://docs.oracle.com/javase/6/docs/api/java/sql/ResultSet.html#getObject%28int%29)which 返回 a `String`，因此请确保您没有选择数字或日期类型或其他内容（如果是，请在选择查询中将其转换或以其他方式转换为 char 类型） .

# javascript - 在 Twitter Bootstrap 选项卡中使用多个图像库

> ID：15162977
> 
> 赞同：0
> 
> 时间：2013-03-01T17:02:28.963
> 
> 标签：javascript, jquery, css, twitter-bootstrap, slideshow

我创建了 3 个基于[SlidesJS](http://beta.slidesjs.com/)的图片库，并将它们放在[Twitter Bootstrap Tabs](http://twitter.github.com/bootstrap/javascript.html#tabs)中。

你可以在这里看到[演示](http://www.shanycosmetics.com.php54-1.ord1-1.websitetestlink.com/index.php?route=information/information&information_id=8)。

如您所见，画廊已正确填充并放置在选项卡内；但是，不会显示第二个和第三个画廊的图像。

我猜这可能是标签的内容被隐藏并与图库 css 冲突的问题？

你有什么解决办法吗？

**回答：**

根据以下建议，我最终以这种方式使用它：

```
$(document).ready(function(){
    $('#slides0').slidesjs({ width: 918, height: 200, navigation: false });
    $("#gallery-tab a").each(function( index ) {
        $(this).on('shown', function(){
            $('#slides' + index).slidesjs({ width: 918, height: 200, navigation: false });
        });
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T17:40:42.293

大多数标签方案中最常见的问题是，当标签被隐藏时，您正在初始化画廊，因此插件无法计算大小，并在选项卡子元素上执行其他操作，而这些操作是不可见的。

您可以 1）在选项卡选择上初始化图库插件，或 2）使用类似的东西`{position: absolute; left: -999em;}`而不是`{display: none}`隐藏选项卡。

更新：根据您的评论，这应该有效......

```
$('#gallery-tab a:first[data-toggle="tab"]').on('shown', function () {
   $('#slides0').slidesjs({ width: 918, height: 200, navigation: false });
}) 
```

# django - Django 夹层 Unicode 错误

> ID：15162979
> 
> 赞同：2
> 
> 时间：2013-03-01T17:02:32.770
> 
> 标签：django, unicode, mezzanine

尝试使用 www.mysite.com/blog/category/πρακτικα/ 或 www.mysite.com/blog/πρακτικα/ 之类的网址时出现 unicode 错误

但我在尝试 www.mysite.com/blog/tag/πρακτικα/ 时没有收到错误消息

> /blog/category/πρακτικα/'latin-1'编解码器无法编码>位置 58-65 中的字符：序数不在范围内（256）异常位置：/home/vagrant/sullogos-venv/local/lib/ 处的 UnicodeEncodeError python2.7/site-packages/django/template/loaders/filesystem.py 在 load_template_source，第 37 行

似乎它在类别和标签上有不同的行为

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T00:17:56.943

不同之处在于类别可以有自定义模板而标签不能。因此，在类别情况下，使用类别 slug 搜索模板名称 - 您收到的错误是由于不支持 utf8 的区域设置不正确。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-07T17:11:58.260

这不是 Mezzanine 或 Django 的问题，而是用于部署它们的环境。有关更多详细信息，请参阅[此问题](https://github.com/stephenmcd/mezzanine/issues/616)和[此文档](https://docs.djangoproject.com/en/dev/howto/deployment/wsgi/modwsgi/#if-you-get-a-unicodeencodeerror)。Python 支持特定的语言环境是不够的，但 Web 服务器还必须能够正确处理 Unicode 文件。

如何修复它取决于使用的网络服务器。例如，如果您使用 Apache，您需要设置`LANG`和`LC_ALL`为 Unicode 兼容的值（在 *NIX 系统上，至少您应该在 找到它们`/etc/apache2/envvars`）。一个例子是：

```
export LANG='en_US.UTF-8'
export LC_ALL='en_US.UTF-8' 
```

随意将语言/国家/地区代码替换为更适合您需要的另一种代码（我使用`pt_BR`而不是，`en_US`并且对我来说一切正常）。从您看到的错误消息来看，您系统中的这些设置可能使用的是 ISO-Latin (ISO-8859-1) 而不是 UTF-8（我认为它无法处理西里尔字母）。

如果您使用不同的网络服务器，请查看其有关本地化/国际化的文档以了解需要更改的内容。据我了解，重要的是提供对 Unicode 文件名的支持。

# asp.net - 如何在 Web 应用程序子文件夹中检索 web.config 设置

> ID：15162980
> 
> 赞同：0
> 
> 时间：2013-03-01T17:02:33.803
> 
> 标签：asp.net, web-config, application-settings, webconfigurationmanager

我的 Web 应用程序中有一个子文件夹。它不是一个单独的应用程序，只是一个子文件夹，但它有自己的 web.config。该子文件夹中有一个 aspx 页面，需要访问其自己文件夹中的 web.config 文件中的设置。

当我从该 aspx 页面上的静态初始化程序调用 ConfigurationManager.GetSection("settingname") 时，它返回 null。为什么会发生这种情况？可能是我的设置名称错误，或者正在访问应用程序根 web.config 而不是子文件夹的 web.config？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T21:05:54.473

如果您希望以编程方式访问 Web.config 文件中的 ConnectionStrings、AppSettings 或其他任何内容，而不是应用程序的根目录，那么您需要使用 System.Web.Configuration 命名空间中的 WebConfigurationManager 类（请参阅[http://msdn. microsoft.com/en-us/library/system.web.configuration.webconfigurationmanager.aspx](http://msdn.microsoft.com/en-us/library/system.web.configuration.webconfigurationmanager.aspx)）而不是 System.Configuration 命名空间中的 ConfigurationManager 类。这应该可以解决您的问题。

来自 MSDN-

> “使用 WebConfigurationManager 是处理与 Web 应用程序相关的配置文件的首选方式。对于客户端应用程序，请使用 ConfigurationManager 类。”

我了解（尽管我不能将此作为事实引用）ConfigurationManager 类是为 Windows 窗体应用程序设计的，我相信在这些应用程序中只有一个 App.config 文件。

# c++ - Visual Studio 探查器使用大量 RAM

> ID：15162983
> 
> 赞同：2
> 
> 时间：2013-03-01T17:02:43.857
> 
> 标签：c++, visual-studio-2010, profiling

我正在尝试对一个用 C++ 编写的相当大的项目（整个解决方案中有大约 40'000 个源文件，但正在分析的项目有大约 200 个源文件）进行 Instrumentation Profiling。

每次我运行分析时，它都会创建一个大约 34GB 的巨大报告，然后，当它要分析它时，它会尝试（我认为）将整个文件加载到 RAM 中。

显然，它使计算机无法使用，我必须在分析仪完成之前停止它。

有什么建议么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-14T08:00:30.870

嗨，希望这个回复不会太晚。这是来自 Visual Studio 分析器团队的 Andre Hamilton。分析这么大的报告文件确实需要一些时间。检测会产生这么多数据，因为您的所有功能都已检测。通过检测一些函数或特定的二进制文件，如果您不介意通过命令行进行分析，您可能可以加快速度。这将生成一个 vsp 文件，然后您可以在 VS 中打开该文件并正常使用。假设您的项目需要 n 个二进制文件才能运行。让我们假设在这些二进制文件中，您对二进制 ni 的性能感兴趣

打开 VisualStudio 命令提示符 1)`vsinstr ni.dll`检测整个二进制文件或使用 vsinstr 的 /include 或 /exclude 选项进一步限制检测哪些函数。注意，如果您的二进制文件已签名，则需要在检测后辞职

2）通过给定的命令以检测模式启动分析器 `vsperf /start:trace /output:myinstrumentedtrace.vsp`

3）启动您的应用程序

4）当你准备好停止分析时 `vsperf /shutdown`

希望这可以帮助

（注意，我假设您拥有 VS 的许可副本来收集和分析数据）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T08:06:17.430

在分析大型或“密集”程序时，这是一个普遍的问题。您需要限制探查器仅从代码库的某些单元收集数据。在 Microsoft 的分析器中，这是通过在命令行或 IDE 中使用包含/排除开关来完成的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T17:40:49.110

VS 中有一个错误，原因是大部分分析工作是在 UI 线程中完成的，这使得 VS 无法使用，如[http://channel9.msdn.com/Forums/TechOff/260091-Visual-Studio-Performance中所述- 10 分钟内分析](http://channel9.msdn.com/Forums/TechOff/260091-Visual-Studio-Performance-Analysis-in-10-minutes)

您可以尝试 VS 2012 看看问题是否已解决，但毫无疑问，加载 34 GB 文件并不是一项简单的任务，这也是导致系统无法使用的原因，正如 John 在上面评论部分所建议的那样，将您的代码分解为较小的组件，然后进行分析，希望对您有所帮助！

# iphone - UIManagedDocument：网络关闭时创建新文件时出错/崩溃（保存）

> ID：15162985
> 
> 赞同：3
> 
> 时间：2013-03-01T17:02:50.060
> 
> 标签：iphone, ios, core-data, icloud, uimanageddocument

当我尝试将新创建的 UIManagedDocument 保存到 iCloud 并且网络关闭（例如飞行模式）时，我收到以下错误并崩溃（删除了十六进制代码和不可读的内容）：

```
-[PFUbiquitySafeSaveFile waitForFileToUpload:](272): CoreData: Ubiquity:  <PFUbiquityPeerReceipt: ...>(0)
permanentLocation: <PFUbiquityLocation: ...>: /private/var/mobile/Library/Mobile Documents/XXXXXXXXXX~com~domain~AppName/TransactionLog/mobile.XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX/DocumentName/XXXXXXXXXXXXXXX/receipt.0.cdt
safeLocation: <PFUbiquityLocation: ...>: /private/var/mobile/Library/Mobile Documents/XXXXXXXXXX~com~domain~AppName/TransactionLog/mobile.XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX/DocumentName/XXXXXXXXXXXXXXX/mobile.XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX.0.cdt
currentLocation: <PFUbiquityLocation: ...>: /private/var/mobile/Library/Mobile Documents/XXXXXXXXXX~com~domain~AppName/TransactionLog/mobile.XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX/DocumentName/XXXXXXXXXXXXXXX/mobile.XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX.0.cdt

kv: (null)

Safe save failed for file, error: Error Domain=NSCocoaErrorDomain Code=512 "The file upload timed out." UserInfo=... {NSLocalizedDescription=The file upload timed out.}

*** Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: 'This NSPersistentStoreCoordinator has no persistent stores.  It cannot perform a save operation.'
*** First throw call stack:
(...)
libc++abi.dylib: terminate called throwing an exception 
```

我不知道这个错误，但它表示无法保存文档，因为无法上传（当然，因为没有网络）。但我不明白为什么我不能用保存完成处理程序捕捉到这个错误：

```
[theDocumentToSave saveToURL:theDocumentToSave.fileURL
            forSaveOperation:UIDocumentSaveForCreating
           completionHandler:^(BOOL success) {
                 if (success) {
                     // Do somethings, go on, ...
                 } else {
                     // Catch error HERE, but this is never called!
                 }
}]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T19:20:10.633

不幸的是，这代表了 Core Data 的 iCloud 集成中的一个内部错误。`UIManagedDocument`仍在尝试添加其数据存储，或者只是未能这样做，因为没有网络连接。这不是它应该如何工作的，但通常会出现故障或长时间延迟让 iCloud 启动并与 Core Data 一起运行。最坏的情况应该是 - 正如您所期望的那样 - 您的完成块将被调用`success`set to `NO`。在这种情况下崩溃你的应用程序不是你的错，但这也意味着你可能很难做任何事情。

您*可以*通过以下方式预测这次崩溃：

```
NSArray *persistentStores = theDocumentToSave.managedObjectContext.persistentStoreCoordinator.persistentStores;
if ([persistentStores count] == 0) {
    // exception is likely, should be at least 1
} else {
    // exception probably won't happen
} 
```

不过，这有点像 hack，它并不能帮助您实际保存文档。另外，不能保证文档在以后的某个时间可以保存。不过，它可以避免崩溃。

一般来说，Core Data 加 iCloud 并不是最可靠的组合。我询问了 iOS 版本，因为 iOS 6.x 比 iOS 5 差。由于你已经在 6 上，我不能建议移动到 6 以希望更好的行为。

# vbscript - VBScript 比较运算符不起作用？

> ID：15162991
> 
> 赞同：1
> 
> 时间：2013-03-01T17:03:00.527
> 
> 标签：vbscript, comparison, operators

我觉得这是一个非常明显的错误，但我真的无法弄清楚。似乎 VBScript 中的比较运算符无法正常工作。我正在编写一个程序，用户在其中输入订单金额，并将此金额与 1000 进行比较。如果我为订单金额输入 200，则程序输出 200 > 1000 = true。

这是我的程序的代码：

```
largeOrderAmt = 1000
orderAmt = Inputbox("What is the order amount?")
Document.write(orderAmt & largeOrderAmt & (orderAmt > largeOrderAmt))

'Calculations
If orderAmt <= largeOrderAmt then
 Document.write ("if statement called <br>")
...
Else
 Document.write ("else statement called <br>")
EndIf 
```

这是输出： 200 1000True else statement called

我真的不明白。这非常令人沮丧。任何帮助将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T17:09:14.743

这是因为这些值作为字符串进行比较：

```
"200" > "1000" = True 
```

`CInt`使用or将您的输入转换为数字`CDbl`，例如：

```
orderAmt = CDbl(Inputbox("What is the order amount?")) 
```

# xml - Xquery 返回一个对象及其关联的引用

> ID：15162994
> 
> 赞同：1
> 
> 时间：2013-03-01T17:03:07.120
> 
> 标签：xml, xquery

我有一个这样的 XML 文件（但有许多药物和合作伙伴条目）：

```
<drugs>
  <drug>
    <name>abc</name>
    <target partner="100" />
  </drug>
  <partner id="100">
    <name>gene</name>
  </partner>
</drugs> 
```

我想拔出药物和目标。可以看到，两者通过合作伙伴 id 相互关联。有没有办法在单个 xquery 语句中获取药物名称和伴侣基因名称？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T17:08:46.527

有几种方法可以做到这一点，但假设您想从更大的 XML 数据集中获取所有关联：

```
for $d in $drugs/drug
let $partner := $drugs/partner[@id = $d/target/@partner]
return
  element assoc {
    attribute drug-name { $d/name },
    attribute partner-name { $partner/name }
  } 
```

如果每种药物可能有多个合作伙伴，那么您可能希望使用合作伙伴的元素而不是输出中的属性。