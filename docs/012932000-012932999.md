# StackOverflow 问答 12932000-12932999

# php - 如何对静态页面进行 URL 重写？

> ID：12932002
> 
> 赞同：0
> 
> 时间：2012-10-17T10:12:17.573
> 
> 标签：php, .htaccess, url-rewriting

我是 URlRewriting 的新手，我在重写我的 URL 时遇到了一些问题。我完成了对动态网址的重写，例如

```
www.mysite.com/page.php?id=4 
```

到

```
www.mysite.com/4 
```

但我在静态页面 url 重写有问题..

```
www.mysite.com/page.php 
```

到

```
www.mysite.com/page 
```

我谷歌了很多，但没有找到合适的答案..请帮助我.....

我正在使用这些模式

```
RewriteRule ^flight-bookings /flight-bookings.php [L]
RewriteRule ^flight-bookings$ /flight-bookings.php [L]
 RewriteRule ^flight-bookings flight-bookings.php [L] 
```

但是没有人工作我总是找不到 404 页面.. 而

```
www.mysite.com/flight-bookings.php 
```

完美工作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T12:07:49.313

嘿嘿谢谢大家的帮助。。终于找到问题了。。。

我不知道写的逻辑是对还是错，但在我的 senerio 上工作..

我尝试将“/flight-booking **s.php** ”的 url 重写为 /flight-booking **s**

这里的 URL 和 REWRITED URL 是一样的

但是当我尝试“/flight-booking **.php** ”到 /flight-booking**时** 它起作用了......

结论：在静态页面的URL重写页面名称和模式应该是不同的“我用**'s'**区分它”

实际网址：-

```
www.mysite.com/flight-booking.php 
```

改写后

```
www.mysite.com/flight-bookings 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T10:16:08.903

试试这个：

```
RewriteRule ^page page.php [L] 
```

# iphone - 在 ios 中更改完整的项目方向

> ID：12932003
> 
> 赞同：1
> 
> 时间：2012-10-17T10:12:30.957
> 
> 标签：iphone, ios, xcode

当用户将设备横向的方向更改为纵向模式时，我的应用程序完整方向应该更改我如何更改完整的应用程序方向而不是特定视图我需要更改整个应用程序

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T10:21:48.977

转到目标 --> 支持的设备方向 --> 选择所需的方向

编辑

尝试这个

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    // Return YES for supported orientations
    // return YES;
    return UIInterfaceOrientationIsLandscape(interfaceOrientation);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T10:32:08.400

来自 Apple.developer：基于 iOS 的设备中的加速度计可以确定设备的当前方向。默认情况下，应用同时支持纵向和横向。当基于 iOS 的设备的方向发生变化时，系统会发出**UIDeviceOrientationDidChangeNotification**通知，让任何相关方知道发生了变化。默认情况下，UIKit 框架会监听这个通知并使用它来自动更新你的界面方向。这意味着，除了少数例外，您根本不需要处理此通知。

实现supportedInterfaceOrientations 方法

```
 - (NSUInteger)supportedInterfaceOrientations

    {    
        return UIInterfaceOrientationMaskPortrait | UIInterfaceOrientationMaskLandscapeLeft;    
    } 
```

[在此处](http://developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/RespondingtoDeviceOrientationChanges/RespondingtoDeviceOrientationChanges.html)查看更多详细信息

# javascript - ExtJS 4 Grid 自定义列排序（文件管理器样式）

> ID：12932007
> 
> 赞同：7
> 
> 时间：2012-10-17T10:12:52.693
> 
> 标签：javascript, extjs, extjs4

我正要使用**ExtJS 4**制作一个基本的文件管理器。我现在面临的问题是：*如何在单击列时为[网格面板](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.grid.Panel)*进行自定义排序。

假设我们有存储字段：

```
[
    { name: "is_dir", type: "boolean" },
    { name: "name",   type: "string"  },
    { name: "size",   type: "int"     }
] 
```

以及来自数组的数据：

```
[
    { is_dir: true,  name: "..",        size: 0    },
    { is_dir: false, name: "file2.txt", size: 512  },
    { is_dir: true,  name: "folder2",   size: 0    },
    { is_dir: false, name: "file3.txt", size: 1024 },
    { is_dir: true,  name: "folder1",   size: 0    },
    { is_dir: true,  name: "file1.txt", size: 1024 },
    // ...
] 
```

这个想法是像在任何文件管理器（例如[Total Commander](http://www.ghisler.com/screenshots/en/01.html)、[MC](http://upload.wikimedia.org/wikipedia/commons/7/79/Midnight-commander.png)、[FAR](http://www.farmanager.com/img/screen/ctrll.png)等）中一样进行排序，这样：

*   名称为“..”的项目始终位于顶部
*   dirs 以排序顺序在“..”（如果存在）之后
*   文件按排序顺序排在 dirs（如果存在）之后

例如，按名称和大小排序的输出应该是：

```
^ Name           | Size               Name             | ^ Size
-----------------------               -------------------------
..               | 0                  ..               | 0
folder1          | 0                  folder1          | 0
folder2          | 0                  folder2          | 0
file1.txt        | 1024               file2.txt        | 512
file2.txt        | 512                file1.txt        | 1024
file3.txt        | 1024               file3.txt        | 1024 
```

我试图`sorterFn`为商店`sorters`属性编写自定义，但它没有帮助。我相信应该有一些简单的解决方案。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-19T05:20:48.637

您可以覆盖`sort`商店的方法：

```
Ext.define('My.store.FileStore', {
    extend: 'Ext.data.Store',

    sort: function () {
        this.doSort(function() {
            // Custom sorting function
            console.log(arguments);
            return Math.random() > 0.5 ? 1 : -1; // :)
        });
    }
}); 
```

**更新**

```
Ext.define('FileModel', {
    extend: 'Ext.data.Model',
    fields: [
        { name: "is_dir", type: "boolean" },
        { name: "name",   type: "string"  },
        { name: "size",   type: "int"     }
    ]
});

Ext.define('FileStore', {
    extend: 'Ext.data.Store',
    model: 'FileModel',
    data: [
        { is_dir: true,  name: "..",        size: 0    },
        { is_dir: false, name: "file2.txt", size: 512  },
        { is_dir: true,  name: "folder2",   size: 0    },
        { is_dir: false, name: "file3.txt", size: 1024 },
        { is_dir: true,  name: "folder1",   size: 0    },
        { is_dir: false, name: "file1.txt", size: 1024 },
    ],

    sorters: [{
        property: 'name',
        direction: 'ASC'
    }],

    sort: function(params) {
        var dir = params ? params.direction : 'ASC';
        var prop = params ? params.property : 'name';

        this.callParent(arguments); // UPDATE 2                    

        this.doSort(function(rec1, rec2) {
            var rec1sort = '';
            var rec2sort = '';

            if (rec1.get('is_dir') && rec2.get('is_dir')) {
                // both dirs
                if (rec1.get('name') == '..') {
                    return -1;
                }
                else if (rec2.get('name') == '..') {
                    return 1;
                }
                else {
                    return rec1.get('name').localeCompare(rec2.get('name')) * (dir == 'ASC' ? 1 : -1);;
                }
            }
            else if (rec1.get('is_dir') != rec2.get('is_dir')) {
                // file and dir
                if (rec1.get('is_dir')) {
                    if (rec1.get('name') == '..') {
                        return -2;
                    }
                    else {
                        return -1;
                    }
                }
                else {
                    if (rec2.get('name') == '..') {
                        return 2;
                    }
                    else {
                        return 1;
                    }
                }
            }
            else if (!rec1.get('is_dir') && !rec2.get('is_dir')) {
                // both files
                var result;
                if (typeof rec1.get(prop) == 'number') {
                    result = rec1.get(prop) - rec2.get(prop);
                    if (result == 0) {
                        result = rec1.get('name').localeCompare(rec2.get('name'));
                    }
                }
                else {
                    result = rec1.get('name').localeCompare(rec2.get('name'));
                }
                return dir == 'ASC' ? result : result * -1;
            }
        });
    }
});    

var grid = Ext.create('Ext.grid.Panel', {
    title: 'Files',
    store: Ext.create('FileStore'),
    renderTo: Ext.getBody(),
    columns: [{
        header: 'Name',
        dataIndex: 'name'
    }, {
        header: 'Size',
        dataIndex: 'size'    
    }]
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T08:02:04.347

我用简短的排序算法分叉了[@Alexey 的答案。](https://stackoverflow.com/a/12967822/1249581)此外，我修复了双重排序的问题（因为`this.callParent(arguments);`它从父方法运行基本排序）。这是对我来说完美的解决方案：

```
sort: function(sorters) {
    sorters = sorters || { property: "name", direction: "ASC" };
    var mod = sorters.direction.toUpperCase() === "DESC" ? -1 : 1;

    this.sorters.clear();        // these lines are needed
    this.sorters.add(sorters);   // to update the column state

    this.doSort(function(a, b) {
        var a_type = a.get("is_dir"),
            b_type = b.get("is_dir"),
            a_name = a.get("name"),
            b_name = b.get("name");

        if (a_name === "..") return -1;
        if (a_type === b_type) {
            var a_prop = a.get(sorters.property),
                b_prop = b.get(sorters.property);

            if (a_prop === b_name) {
                return (a_name < b_name ? -1 : 1) * mod;
            } else {
                return (a_prop < b_prop ? -1 : 1) * mod;
            }
        } else {
            return b_type - a_type;
        }
    });
} 
```

**演示：http:** [//jsfiddle.net/cvdNW/186/](http://jsfiddle.net/cvdNW/186/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-29T06:39:48.033

Sencha 的 Ext.Store 现在包含一个名为的新配置对象

例如：

存储配置：

```
 groupField: 'type', // here you can setup a the attribute of the model to group them by
   groupDir: 'DESC' // this is the direction 
```

模型配置：

```
 {
        name: 'createdByName',
        sortType: 'asUCText',
    }, 
```

只需这样做并将 sortType 添加到模型配置中，您现在就可以对按类型分组的列名进行大小写不敏感排序

# ios - HTTP PUT 方法如何跟踪上传进度

> ID：12932017
> 
> 赞同：0
> 
> 时间：2012-10-17T10:13:29.007
> 
> 标签：ios, http, asihttprequest, progress, put

我正在使用 HTTP PUT 方法通过 ASIHttpRequest 上传视频文件，但进度跟踪不起作用。以下方法仅调用了 2 次（开始和结束）。

```
- (void)setProgress:(float)newProgress; 
```

如果是 POST 上传，它工作正常。

# hadoop - 一个组中的所有记录都调用“减少”一次吗？

> ID：12932023
> 
> 赞同：3
> 
> 时间：2012-10-17T10:13:50.897
> 
> 标签：hadoop, reduce

我在 hadoop 中做了一个练习，用于对对象“IntPair”进行排序，它是 2 个整数的组合。这是输入文件：

```
2,9
3,8
2,6
3,2
... 
```

“IntPair”类是这样的：

```
static class IntPair implements WritableComparable<IntPair> {
    private int first;
    private int second;   
       ...
   public int compareTo(IntPair o) {
       return (this.first==o.first)?(this.second==o.second?0:(this.second>o.second?1:-1)):(this.first>o.first?1:-1);
    }
   public static int compare(int a, int b) {
   return (a==b)?0:((a>b)?1:-1);
   }
       ...  
} 
```

在 Mapper 中，我使用 inputFormat 和 outputKey/Value，并创建 IntPair 实例，每行有 2 个整数：

```
protected void map(LongWritable key, Text value, Context context)
        throws IOException, InterruptedException {
            String v[] = value.toString().split(",");
            IntPair k = new IntPair(Integer.parseInt(v[0]), Integer.parseInt(v[1]));
            context.write(k, NullWritable.get());

        } 
```

我根据第一个整数对映射器结果进行分区，并根据第一个整数创建组比较器。只有排序比较器基于两个整数。

```
static class FirstPartitioner extends Partitioner<IntPair, NullWritable> {

    public int getPartition(IntPair key, NullWritable value, int numPartitions) {
            return Math.abs(key.getFirst()*127)%numPartitions;
        }
}
static class BothComparator extends WritableComparator {
    public int compare(WritableComparable w1, WritableComparable w2) {
            IntPair p1 = (IntPair)w1;
            IntPair p2 = (IntPair)w2;
            int cmp = IntPair.compare(p1.getFirst(), p2.getFirst());
            if(cmp != 0) {
                return cmp;
            }
            return -IntPair.compare(p1.getSecond(), p2.getSecond());//reverse sort
    }

}

static class FirstGroupComparator extends WritableComparator {
    public int compare(WritableComparable w1, WritableComparable w2) {
            IntPair p1 = (IntPair)w1;
            IntPair p2 = (IntPair)w2;
            return IntPair.compare(p1.getFirst(), p2.getFirst());
    }
} 
```

在 Reducer 中，我只是将 IntPair 作为键输出，将 NullWritable 作为值输出：

```
static class SSReducer extends Reducer<IntPair, NullWritable, IntPair, NullWritable> {
        protected void reduce(IntPair key, Iterable<NullWritable> values,
            Context context)throws IOException, InterruptedException {
            context.write(key, NullWritable.get());
        }
} 
```

运行hadoop后，我得到以下结果：

```
 2,9
   3,8 
```

早些时候，我认为reducer 应该通过key(IntPair) 对记录进行分组。由于每条记录代表一个不同的键，所以每条记录都会调用一次“reduce”方法，在这种情况下，结果应该是：

```
2,9
2,6
3,8
3,2 
```

所以我认为存在差异是因为组比较器，因为它只使用第一个整数进行比较。所以在 reducer 中，记录按第一个整数分组。在此示例中，这意味着 2 条记录中的每条记录都调用一次“reduce”，因此在不循环的情况下，它只生成每组的第一条记录。这样对吗？另外，我做了另一个实验，将减速器更改如下：

```
static class SSReducer extends Reducer<IntPair, NullWritable, IntPair, NullWritable> {
     protected void reduce(IntPair key, Iterable<NullWritable> values,
                Context context)throws IOException, InterruptedException {
                        for(NullWritable n : values) //add looping
                   context.write(key, NullWritable.get());
            }
    } 
```

然后它产生有 4 个项目的结果。

如果我将 groupcomarator 更改为使用两个整数进行比较，它也会产生 4 个项目。所以reducer实际上使用groupcomparator对keys进行分组，这意味着即使keys不同，一个组中的每条记录都会调用一次'reduce'。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T12:04:25.137

是的，即使键不同，一组中的每条记录也会调用一次“减少”。实际上，每个组调用reduce方法一次，组中的第一个键为'KEY'，组中的所有值形成reduce方法的值。

即使我们在 reduce 方法中只有一个键（第一个键）并且所有值都是可迭代的，但您可以看到，在迭代时，我们将获得可迭代内部值的对应键。

首先，我们使用两个键进入 groupcomparator，reduce 方法启动并从迭代器内部再次调用具有另外两个键的组比较器。

这意味着reducer事先不知道它的可迭代值。它是在迭代可迭代值时确定的。

因此，如果我们不迭代值，我们只会看到组的第一个键。如果我们迭代值，我们将获得所有键。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T11:26:01.157

你的理解是正确的。键的“复合值”对进入 reducer 的分组没有影响。比较器的特定行为和它们所查看的特定字段使人受到尊重..

# list - 更新大树结构的“偏移”字段的有效方法

> ID：12932027
> 
> 赞同：1
> 
> 时间：2012-10-17T10:14:06.560
> 
> 标签：list, tree, linked-list

我有一个大（> 百万个元素）树，每个元素都有一个“偏移”字段，它引用外部的东西。我需要做这两个：

1.  在任意位置插入新元素。每次插入都会导致后面元素的“偏移”字段增加一些量。
2.  快速获取元素的偏移值。

如果 2 不是必需的，我会存储相对于前一个的偏移量，那么插入后就不需要更新所有内容。但这意味着我需要将每个先前的偏移量相加来计算一个元素的绝对值。

有没有做这种事情的规范方法？我在想也许是一种折衷方案，例如，每个第 n 个元素都有一个绝对偏移量，而其他元素的偏移量将相对于前一个绝对偏移量，这意味着在这两种情况下我都必须进行少量遍历。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T10:45:51.487

有一些方法在某种程度上基于您让某些元素存储绝对偏移量的想法。

其中一个（我认为它是[分层向量](https://www.google.com/search?client=ubuntu&channel=fs&q=tiered%20vector&ie=utf-8&oe=utf-8)的一个版本）是存储第一个连续`sqrt(N)`元素的偏移量变化，然后存储元素 from `sqrt(N)`to`2 * sqrt(N)`等等。然后，为了找到给定元素的偏移量，您需要将先前元素的所有连续总和（最多为`sqrt(N) + 1`, since `(sqrt(N) ^ 2) = N`）相加，然后添加最后一个整组之后但在您的元素之前的元素'感兴趣。这为您提供了`O(sqrt(N))`插入和查找时间。

您还可以将此方法提升到一个新的水平，并将总和存储为：

*   整个区间
*   区间的前半段和后半段
*   第一...第四季度等

这样，您将获得一个类似于区间或段树的数据结构，但不完全相同。它可以使用简单的数组实现为完整的二叉树。它为您提供`O(log N)`了两种操作的复杂性。

对这个想法的一些改进导致了二[叉索引树](http://community.topcoder.com/tc?module=Static&d1=tutorials&d2=binaryIndexedTrees)，它具有相同的复杂性，但使用了大约一半的空间。

# jquery - 我想在 struts 2 表单中使用 jquery 执行客户端验证。有人可以给我一个参考，以便我可以开始进行验证吗？

> ID：12932037
> 
> 赞同：1
> 
> 时间：2012-10-17T10:14:54.903
> 
> 标签：jquery, struts2

我想使用 jquery 在 java 中执行表单验证，我使用的是 struts 2 框架。我是 jquery 的新手，所以有没有网站告诉我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T10:23:22.217

好吧，我不是 struts 专家，但如果它可以像 HTML 一样工作，并且如果它支持 JavaScript，它应该像这样工作。

```
var elementBeingTested = $("#textElementID").val();

if (elementBeingTested != null) {

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T10:21:13.810

如果你想执行用户端验证，我推荐[jquery 验证插件](http://docs.jquery.com/Plugins/Validation)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T10:22:38.553

您可以在 google 中键入表单验证 jquery。它将返回数百个结果。任何方式，您都可以使用此[链接](http://docs.jquery.com/Plugins/Validation#Validate_forms_like_you.27ve_never_been_validating_before.21)。它是验证表单的最古老的方法之一。

**“您需要在 DOM 中放置错误消息，并在适当的时候显示和隐藏它们。您希望对提交事件做出反应，而不是仅仅响应一个提交事件，例如 keyup 和 blur。您可能需要不同的方式来指定验证规则，具体取决于服务器 -您在不同项目中使用的侧面环境”**

如果想要进行任何特定的客户端验证，您可以使用此[链接](http://code.google.com/p/bvalidator/)。

**"bValidator 是一个用于客户端表单验证的 jQuery 插件。它支持使用模板和 CSS 定义的完全自定义的错误消息，许多验证功能（操作），如日期、电子邮件、URL、IP 地址、动态表单验证、自定义验证功能和更多。”**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-17T10:41:39.410

哦，这是纯 jquery queston :) 使用[Jquery Vlidation 插件](http://docs.jquery.com/Plugins/Validation)[从这里](http://bassistance.de/jquery-plugins/jquery-plugin-validation/) 下载并像这样简单地使用它：

```
<form id="myform">
  <input type="textfield" name="field1" class="number"/>
  <input type="textfield" name="field2" class="required"/>
</form>

<input type="button" onClick="$('#myform').validate()"> 
```

因此验证插件将检查 field1 是否为数字或为空，并且 field2 是否为空。

# c++ - MFC 功能区界面在本地化应用程序时出现断言失败

> ID：12932043
> 
> 赞同：0
> 
> 时间：2012-10-17T10:15:19.243
> 
> 标签：c++, localization, mfc, ribbon, assert

我有一个使用 Office 2007 功能区界面的基于 MFC 的应用程序。MFC 是静态链接的。

我正在尝试添加日语本地化。我在单独的 DLL 中有本地化资源。我在开头加载资源 DLL `InitInstance`：

```
VERIFY(hRes = LoadLibrary(_T("JapaneseLang.dll")));
if(hRes)
    AfxSetResourceHandle(hRes); 
```

这会导致断言失败`CMFCVisualManagerOffice2007::OnUpdateSystemColors`

```
#if !defined _AFXDLL
        TRACE(_T("\r\nImportant: to enable the Office 2007 look in static link,\r\n"));
        TRACE(_T("include afxribbon.rc from the RC file in your project.\r\n\r\n"));
        ASSERT(FALSE);
#endif 
```

但我确实`afxribbon.rc`包含在 DLL 和 EXE 的 rc 文件中。

* * *

我还在[tech-archive.net 上发现了一个类似的问题，](http://www.tech-archive.net/Archive/VC/microsoft.public.vc.mfc/2008-06/msg00225.html)并在那里概述了一个[可能的解决方案](http://www.tech-archive.net/Archive/VC/microsoft.public.vc.mfc/2008-06/msg00230.html)

> 现在我找到了错误位置。这应该是新 mfc 版本的错误。
> 
> 在CMFCVisualManagerOffice2007中，当样式发生变化时，CMFCVisualManagerOffice2007的SetStyle函数会自动调用FreeLibrary释放dll，所以出现错误。
> 
> 现在我从 CMFCVisualManagerOffice2007 派生了一个类，并添加了一个静态函数来设置成员变量 m_bAutoFreeRes ，这样应用程序可以正常运行；见下文。
> 
> 类 CMFCVisualExtManagerOffice2007：公共 CMFCVisualManagerOffice2007 { DECLARE_DYNCREATE（CMFCVisualExtManagerOffice2007）公共：CMFCVisualExtManagerOffice2007（）；虚拟~CMFCVisualExtManagerOffice2007();
> 
> 静态无效 SetAutoFreeRes(BOOL bAutoFree = FALSE) { m_bAutoFreeRes = bAutoFree; } };

* * *

但我很难理解究竟是什么导致了问题，以及这个解决方案是如何工作的。另外我不确定这是否是正确的解决方案。有谁知道究竟是什么导致了这个问题，以及解决方案是如何工作的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T12:01:22.387

我弄清楚了解决方案是如何工作的。每次`m_bAutoFreeRes`调用`CMFCVisualManagerOffice2007::SetStyle`.

```
class CMFCVisualExtManagerOffice2007 : public CMFCVisualManagerOffice2007
{
    DECLARE_DYNCREATE(CMFCVisualExtManagerOffice2007)
public:
    CMFCVisualExtManagerOffice2007();
    virtual ~CMFCVisualExtManagerOffice2007();

    static void SetAutoFreeRes(BOOL bAutoFree = FALSE)
    {
        m_bAutoFreeRes = bAutoFree;
    }
}; 
```

然后在主题之间切换时

```
 switch (m_nAppLook)
    {
    case ID_VIEW_APPLOOK_OFF_2007_BLUE:
        CMFCVisualManagerOffice2007::SetStyle (CMFCVisualManagerOffice2007::Office2007_LunaBlue);
        CMFCVisualExtManagerOffice2007::SetAutoFreeRes(FALSE);
        break;

    case ID_VIEW_APPLOOK_OFF_2007_BLACK:
        CMFCVisualManagerOffice2007::SetStyle (CMFCVisualManagerOffice2007::Office2007_ObsidianBlack);
        CMFCVisualExtManagerOffice2007::SetAutoFreeRes(FALSE);
        break;

    case ID_VIEW_APPLOOK_OFF_2007_SILVER:
        CMFCVisualManagerOffice2007::SetStyle (CMFCVisualManagerOffice2007::Office2007_Silver);
        CMFCVisualExtManagerOffice2007::SetAutoFreeRes(FALSE);
        break;

    case ID_VIEW_APPLOOK_OFF_2007_AQUA:
        CMFCVisualManagerOffice2007::SetStyle (CMFCVisualManagerOffice2007::Office2007_Aqua);
        CMFCVisualExtManagerOffice2007::SetAutoFreeRes(FALSE);
        break;
    } 
```

# java - 什么决定了给定一组数据使用的映射器/缩减器的数量

> ID：12932044
> 
> 赞同：1
> 
> 时间：2012-10-17T10:15:24.393
> 
> 标签：java, hadoop, mapreduce

哪些因素决定了用于给定数据集以实现最佳性能的映射器和缩减器的数量？我说的是 Apache Hadoop Map Reduce 平台。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T02:08:13.480

根据 Cloudera[博客](http://www.cloudera.com/blog/2009/05/10-mapreduce-tips/)

> > **您是否设置了映射器和缩减器的最佳数量？**
> > 映射器的数量默认设置为每个 HDFS 块一个。这通常是一个很好的默认值，但请参阅技巧 2。reducer
> > 的数量最好设置为集群中的 reduce 槽数（减去一些以允许失败）。这允许减速器在一个波中完成。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T10:57:11.193

映射器的数量主要取决于[InputFormat#getInputSplits](http://hadoop.apache.org/docs/mapreduce/current/api/org/apache/hadoop/mapreduce/InputFormat.html)方法生成的[InputSplit的数量。](http://hadoop.apache.org/docs/mapreduce/current/api/org/apache/hadoop/mapreduce/InputSplit.html)特别是 FileInputSplit 根据块和文件拆分输入目录。Gzipped 文件不拆分，整个输入文件传递给 1 个映射器。

```
Two files:
f1 [ block1, block2], 
f2 [block3, block4] 
becomes 4 mappers 
f1(offset of block1), 
f1(offset of block2), 
f2(offest of block3),
f2(offset of block4) 
```

其他 InputFormat 有自己的文件拆分方法（例如 Hbase 在区域边界上拆分输入）。

[除了使用CombineFileInputFormat](http://hadoop.apache.org/docs/current/api/org/apache/hadoop/mapred/lib/CombineFileInputFormat.html)之外，无法有效控制映射器。但是大多数映射器应该在数据所在的主机上执行。

在大多数情况下，用户指定的减少次数。这主要取决于需要在减速器中完成的工作量。但是它们的数量不应该很大，因为 Mapper 使用算法在减速器之间分配数据。一些框架，比如 Hive 可以使用每个 reducer 的经验 1GB 输出来计算 reducer 的数量。

一般经验法则：每个 reducer 使用 1GB，但不超过集群容量的 0.8-1.2。

# sql - 没有重复组合的交叉连接

> ID：12932045
> 
> 赞同：17
> 
> 时间：2012-10-17T10:15:26.937
> 
> 标签：sql, sql-server-2005

我知道这个问题与这个问题非常相似： [Symmetric cross join](https://stackoverflow.com/questions/12490244/symmetric-cross-join) and this one： [combinations (not permutations) from cross join in sql](https://stackoverflow.com/questions/7112513/combinations-not-permutations-from-cross-join-in-sql)

但是如果我们有两个不同的表，比如 A 和 B：

```
select A.id,B.id from A cross join B 
```

我想考虑这对`(a,b)`等于`(b,a)`？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-10-17T10:18:45.767

```
select A.id aid,B.id bid
from A inner join B on a.id <= b.id
union
select B.id,A.id
from A inner join B on b.id < a.id 
```

如果你想更复杂：

```
select distinct
       case when a.id<=b.id then a.id else b.id end id1,
       case when a.id<=b.id then b.id else a.id end id2
from A cross join B 
```

在我用小桌子做的不科学的小烘焙中，后者更快。下面是`case`写成子查询的表达式。

```
select distinct
       (select MIN(id) from (select a.id union select b.id)[ ]) id1,
       (select MAX(id) from (select a.id union select b.id)[ ]) id2
from A cross join B 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-06-29T10:15:59.313

这不是也能达到预期的结果吗？

```
select A.id,B.id from A cross join B on A.id >= B.id 
```

# file - 在 Octave 中将矩阵写入文本文件的最快方法是什么？

> ID：12932052
> 
> 赞同：13
> 
> 时间：2012-10-17T10:15:44.767
> 
> 标签：file, matlab, matrix, octave

我有一个大矩阵（2e6 x 3），我必须将其写入文本文件。

dlmwrite 大约需要 230 秒才能完成这项任务。

根据您的经验，将大型矩阵写入文本文件的最快方法是什么？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-17T10:44:25.593

以下适用于 MATLAB，但我建议您在 Octave 中尝试。首先，如果可以的话 - 转置矩阵。以下是使用`fprintf`and `csvwrite`（本质上`dlmwrite`）的示例

```
A = rand(3, 1e6);
tic;
fid = fopen('data.txt', 'w+');
for i=1:size(A, 1)
    fprintf(fid, '%f ', A(i,:));
    fprintf(fid, '\n');
end
fclose(fid);
toc

tic;
csvwrite('data.txt', A);
toc;

Elapsed time is 1.311512 seconds.
Elapsed time is 2.487737 seconds. 
```

如果不转置，确实需要很长时间。[默认情况下，`fprintf`每次调用后刷新缓冲区](http://blogs.mathworks.com/loren/2006/04/19/high-performance-file-io/)。您可以尝试使用`W`而不是`w`打开文件，但这并没有太大改善这里的情况。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-08-20T19:13:06.667

你试过这个吗？与 dlmwrite 相比，我不确定它的速度。

```
a = [1 2;3 4];
save temp.txt a; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-12-08T13:05:24.907

拥有一个变量`data`，您可以将其保存为`text`具有空格分隔值的格式（包括标题）：

```
save out.txt data 
```

可以使用基本的 Unix 命令简单地删除标头，[`tail`](http://man7.org/linux/man-pages/man1/tail.1.html)例如（在任何 Linux/Mac OS 上）：

```
tail -n +6 out.txt > file.csv 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-17T14:12:59.800

从理论上讲，根据@angainor 所说，甚至可以以某种方式提高性能包装

```
for i=1:size(A, 1)
   fprintf(fid, '%f ', A(i,:));
   fprintf(fid, '\n');
end 
```

在块中避免无用的缓冲区刷新，iedoing

```
1\. coverting (in memory) numbers->string + introduction of termination characters '\n' 
   (for say K matrix rows)
2\. writing of the obtained string to file through fscanf. 
```

应该试试。。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-01-14T12:33:21.230

在 Matlab 中使用：

```
 save -ascii output.txt variableName 
```

在 Octave 中使用它：

```
 save hello1.m variableName -ascii 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-09-19T06:26:34.017

在我的系统中

```
A = rand(3, 1e6);

# Method with fprintf
tic;
fid = fopen('data1.txt', 'w+');
for i=1:size(A, 1)
    fprintf(fid, '%f ', A(i,:));
    fprintf(fid, '\n');
end
fclose(fid);
toc

# Method with sprintf
tic;
s = "";
for i=1:size(A, 1)
    s = strcat( s, sprintf('%f ', A(i,:)) );
    s = strcat( s, sprintf('\n') );
end
fid = fopen('data2.txt', 'w+');
    fprintf(fid, '%s\n', s);
fclose(fid);
toc

# Method with save
tic;
save 'data3.txt' A;
toc;

return;  # Commented when the size is <= 1e5

# Method with csvwrite
tic;
csvwrite('data4.txt', A);
toc; 
```

给

```
>> Elapsed time is 5.36293 seconds.
Elapsed time is 6.43252 seconds.
Elapsed time is 6.09889 seconds. 
```

因为`csvwrite`它比其他的慢 10 倍，所以我只尝试了 size = 10^-5。在这种情况下，

```
>> Elapsed time is 0.541885 seconds.
Elapsed time is 0.657595 seconds.
Elapsed time is 0.576796 seconds.
Elapsed time is 4.24433 seconds. 
```

我的结论是：

1.  各种方法之间的速度比较很大程度上取决于系统。然后，您将不得不自己尝试。

2.  [Acorbe](https://stackoverflow.com/a/12936330/2707864)的提议没有达到他的预期。

# apache - 如何在 apache 中为不同集群的相同位置配置 weblogic 插件？

> ID：12932055
> 
> 赞同：0
> 
> 时间：2012-10-17T10:15:58.780
> 
> 标签：apache, weblogic, cluster-computing

我想知道以下设置是否可以工作。

我有 2 个 weblogic 集群，每 2 个节点，都提供相同的应用程序：

*   具有节点 10.0.0.1:7045 和 10.0.0.2:7045 的 cluster-1

*   具有节点 10.0.0.3:7045 和 10.0.0.4:7045 的 cluster-2

我可以在 apache 中配置 weblogic 插件，如下所示：

```
 <Location /service>
     WebLogicCluster 10.0.0.1:7045,10.0.0.2:7045,10.0.0.3:7045,10.0.0.4:7045
     SetHandler weblogic-handler
  </Location> 
```

如果是这样，预期的行为是什么？例如，不同集群的节点之间是否会有故障转移？

有没有其他方法可以做到这一点（我不希望在不同集群的节点之间进行故障转移）？

谢谢你。

[Weblogic 10.0、apache 2.0.64、weblogic 模块 mod_wl_20、SunOS 5.10]

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T02:48:21.637

简短的回答是否定的 - 该插件将尊重集群中单个成员的会话粘性，但是在失去用户具有会话状态的集群成员时，它将假定该集群的任何其他成员都是有效的故障转移目标，并且用户可能会丢失他们的状态信息。这意味着您提供*的*可用性低于同一集群只有两台服务器的情况。

这似乎是一个老生常谈的问题，但退后一步，看看您要解决的问题 - 为什么不希望在不同集群的节点之间进行故障转移？使用 WebLogic 10（无需检查配置），您应该能够使用跨集群复制来确保用户状态信息在任何服务器中都可用。

我假设服务器不是同一个集群的所有成员，因为它们位于不同的站点上？

# ruby-on-rails - remote true 在 rails2.3.8 中无法正常工作

> ID：12932060
> 
> 赞同：0
> 
> 时间：2012-10-17T10:16:21.677
> 
> 标签：ruby-on-rails, ajax, forms

我正在使用红宝石 1.8.7。我刚刚编写了一个简单的表单，它使用远程 true 将 ajax 请求发送到某些操作，但它似乎不起作用！

我已经包含了 jquery1.6.3.js 和 rails.js。表格很简单，看起来像这样：

```
<% form_tag("/click_button", :remote => true) do %>
  <%= text_field_tag "something" %>
  <%= submit_tag "Add" %>
<% end %> 
```

click_button 方法只是渲染js

```
def click_button
  respond_to do |format|
    format.js
  end
end 
```

问题是当我单击按钮时，在萤火虫的控制台中看不到任何请求，而是将页面重定向到 /click_button.erb 并且它提供了一个丢失的错误模板。谁能帮我解决这个问题？

**[编辑]** 生成的html代码是这样的：

```
<form remote="true" method="post" action="/data_management/add_configuration_data">
  <input id="something" type="text" name="something">
  <input type="submit" value="Add" name="commit">
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T10:28:14.183

试试这个

```
 <% form_remote_for :xyz, :url => {:controller => "controller-name", :action => "action-name"} do |f| %>
    <%= text_field_tag "something" %>
    <%= submit_tag "Add" %>
  <% end %> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T10:28:22.943

对于 rails 2.3.8 你必须使用[`remote_form_for`](http://api.rubyonrails.org/v2.3.8/classes/ActionView/Helpers/PrototypeHelper.html#M002170) OR[`form_remote_tag`](http://api.rubyonrails.org/v2.3.8/classes/ActionView/Helpers/PrototypeHelper.html#M002169)代替 `:remote => true`

```
<% remote_form_for("/click_button"e) do %>
  <%= text_field_tag "something" %>
  <%= submit_tag "Add" %>
<% end %> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-17T11:23:39.457

似乎远程处理程序未附加到表单。仔细检查

1.  jQuery 库是从页面链接的，并确保链接有效。有时拼写错误。打开源代码并检查它。
2.  rails.js 文件是从页面链接的，并且链接有效。和上面一样。
3.  `csrf_meta_tag`在页眉部分的页面中添加标签

    ```
    <%= csrf_meta_tag %> 
    ```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-17T11:16:53.543

我试图做类似 remote_true 的事情，但它似乎没有用，所以我找到了一种通过[javascript](https://stackoverflow.com/questions/6723334/submit-form-in-rails-3-in-a-ajax-way-with-jquery)解决这个问题的方法。

# sql - SQL：@somevalue = null 无法正常工作

> ID：12932065
> 
> 赞同：1
> 
> 时间：2012-10-17T10:16:45.417
> 
> 标签：sql, stored-procedures, if-statement, null

我尝试了 @somevalue = null 并且当时有效。但现在它不起作用。如何检查值是否为空？简而言之，我需要做的是如果 @existPerson 等于 null 然后将值插入到数据库中。但如果存在则返回-2。我检查了数据库，确保没有与@nic = 100 相同的值。即使如此，它也返回-2。可能的原因是什么？非常感谢！

```
CREATE PROCEDURE [dbo].[addStudent] 
    @stuName varchar(50), 
    @address varchar(100),
    @tel varchar(15),
    @etel varchar(15),
    @nic varchar (10),
    @dob date

AS 
BEGIN   
    SET NOCOUNT ON;

    DECLARE @currentID INT
    DECLARE @existPerson INT
    SET @existPerson = (SELECT p_ID FROM Student WHERE s_NIC = @nic);
    IF @existPerson = null
        BEGIN
            INSERT INTO Person (p_Name, p_RegDate, p_Address, p_Tel, p_EmergeNo, p_Valid, p_Userlevel)
            VALUES (@stuName,  GETDATE(), @address, @tel, @etel, 0, 'Student' );
            SET @currentID = (SELECT MAX( p_ID) FROM Person); 
            INSERT INTO Student (p_ID, s_Barcode, s_DOB, s_NIC) VALUES (@currentID , NULL, @dob, @nic);
            return 0;
        END
    ELSE
        return -2;
END 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-17T10:18:32.907

这应该是

```
 IF @existPerson is null 
```

在 sql 中，如果你想检查值是否为空，那么你需要使用`is null`or`is not null`而不是`= null`or`<> null`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-17T10:18:47.977

您无法将某些东西`null`与`=`标志进行比较。它将永远是`unknown`。您必须为此使用`IS`运算符：

```
IF @existPerson IS null 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T10:18:14.050

例如：-

```
SELECT p_ID FROM Student WHERE s_NIC IS NULL 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-17T10:18:59.290

另一种方式，`ISNULL ( check_expression , replacement_value )`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-17T10:25:10.673

```
 if @existsperson is null
   insert(...)
 else
     return -2; 
```

# java - 如何在 NotSerializableException 中识别匿名内部类

> ID：12932079
> 
> 赞同：6
> 
> 时间：2012-10-17T10:17:28.210
> 
> 标签：java, anonymous, notserializableexception

尝试在 NetBeans 中调试应用程序时收到以下错误消息：

> java.io.WriteAbortedException：写入中止；java.io.NotSerializableException: board.Board$1

在调试过程中，我不得不在许多类中插入“实现可序列化”，因为在从存储大对象的文件读取的过程中出现异常。这并不困难，因为从异常消息中可以清楚地看出需要注意的类。让我感到震惊的是明显的匿名内部类“Board$1”。我一生都无法确定导致问题的“板”的来源。我怎样才能做到这一点？

因为这是调试实践的问题，而不是代码的细节（我认为）我没有包括它，但如果它有帮助我可以很容易地添加它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-17T10:24:31.023

`Board$1`是 中遇到的第一个匿名类`Board.java`。例如：

```
class Board {
  public static void main(String[] args) {
    new Object() {}; // Board$1
    new Object() {}; // Board$2
  }
} 
```

使用像 Eclipse 这样的 IDE，很容易在大纲视图中发现那些匿名类。我确信 NetBeans 也有类似的看法：

![在此处输入图像描述](../Images/ce086859e30f9e11ad36be12ba2a8d95.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-12-08T00:22:12.273

在 IntelliJ（和 Android Studio）中，您可以 Navigate->Class（Mac 上的⌘-O）并粘贴`Board$1`，它会带您进入该内部类的代码。

# python - 使用 Gdata 插入单元格，Python Google 电子表格 Api 客户端

> ID：12932080
> 
> 赞同：0
> 
> 时间：2012-10-17T10:17:36.183
> 
> 标签：python, api, google-sheets-api, gdata

我正在尝试将单元格更新或插入到谷歌电子表格中，这是我第一次使用谷歌 api 和 python，所以我可能做了一些点头的事情。但我一辈子都看不到它。

目前我的代码更新现有单元格但不插入新单元格，（空白单元格保持空白）当我注释掉“batchRequest.AddInsert（newCell）”但当它留在我得到返回的状态代码500和一堆xml时，帮助不大。

代码（部分）

```
def setRowEntries(self, cohort_key=None):
  cohort = self.GetCohort(cohort_key)

  gd_client = gdata.spreadsheet.service.SpreadsheetsService()
  gd_client.email = email
  gd_client.password = password
  gd_client.source = 'YOUR_APP_NAME'

  # LOGIN
  try:
    # log in
    gd_client.ProgrammaticLogin()
  except socket.sslerror, e:
    logging.error('Spreadsheet socket.sslerror: ' + str(e))
    return False

  # KEY FOR SHEET
  key = '0At**************************Gc'

  # LOOKUP FOR WORKSHEET KEY
  GID_TABLE = {
    'android_users_by_week_by_registration' : 'od6'
  }

  wksht_id =''
  wksht_id = GID_TABLE[cohort_key]

  #  create a cells feed and batch request
  cells = gd_client.GetCellsFeed(key, wksht_id)
  batchRequest = gdata.spreadsheet.SpreadsheetsCellsFeed()

  #TODO SET TITLE

  #resize worksheet
 # cells.col_count = len(cohort[0])
 # cells.row_count = len(cohort)

  rowcursor = 0
  for myrow in cohort:
    colcursor = 0
    #print ("row ::"+str(myrow))
    for mycell in myrow:
      #print ("cell::"+str(mycell))
      found = 0
      #print ("try and place"+str(rowcursor)+','+str(colcursor))
      for myentry in cells.entry:
        if ((int(myentry.cell.row) == int(rowcursor+1)) and (int(myentry.cell.col) == int(colcursor+1))):
          print "updating  "+myentry.cell.text+" to "+str(mycell)
          myentry.cell.inputValue = str(mycell)
          batchRequest.AddUpdate(myentry)
          found = 1

      if not found:
        print "inserting "+str(mycell)+" at Cell "+ str(rowcursor+1)+'_'+str(colcursor+1)
        newCell = gdata.spreadsheet.SpreadsheetsCell()
        newCell.cell = gdata.spreadsheet.Cell(inputValue=str(mycell), text=None, row=str(rowcursor+1), col=str(colcursor+1))
        print newCEll.inpu
        batchRequest.AddInsert(newCell)# the broken part
      colcursor = colcursor + 1
    rowcursor = rowcursor + 1

  updated = gd_client.ExecuteBatch(batchRequest, cells.GetBatchLink().href)

  if updated:
    print "Sucessfull!"+str(updated)
  else:
    print "Failed!" 
```

错误（部分）

```
type="text">Internal Error</ns0:content><ns1:id xmlns:ns1="http://schemas.google.com/gdata/batch">1626</ns1:id><ns0:title type="text">Error</ns0:title><ns1:status code="500" reason="Internal Error" xmlns:ns1="http://schemas.google.com/gdata/batch" /><ns1:operation type="insert" xmlns:ns1="http://schemas.google.com/gdata/batch" /><ns0:updated>2012-10-17T09:39:18.946Z</ns0:updated></ns0:entry><ns0:entry><ns0:id>1627</ns0:id><ns0:content type="text">Internal Error</ns0:content><ns1:id xmlns:ns1="http://schemas.google.com/gdata/batch">1627</ns1:id><ns0:title type="text">Error</ns0:title><ns1:status code="500" reason="Internal Error" xmlns:ns1="http://schemas.google.com/gdata/batch" /><ns1:operation type="insert" xmlns:ns1="http://schemas.google.com/gdata/batch" /><ns0:updated>2012-10-17T09:39:18.946Z</ns0:updated></ns0:entry><ns0:entry><ns0:id>1628</ns0:id><ns0:content type="text">Internal Error</ns0:content><ns1:id xmlns:ns1="http://schemas.google.com/gdata/batch">1628</ns1:id><ns0:title type="text">Error</ns0:title><ns1:status code="500" reason="Internal Error" xmlns:ns1="http://schemas.google.com/gdata/batch" /><ns1:operation type="insert" xmlns:ns1="http://schemas.google.com/gdata/batch" /><ns0:updated>2012-10-17T09:39:18.946Z</ns0:updated></ns0:entry><ns0:entry><ns0:id>1629</ns0:id><ns0:content type="text">Internal Error</ns0:content><ns1:id xmlns:ns1="http://schemas.google.com/gdata/batch">1629</ns1:id><ns0:title type="text">Error</ns0:title><ns1:status code="500" reason="Internal Error" xmlns:ns1="http://schemas.google.com/gdata/batch" /><ns1:operation type="insert" xmlns:ns1="http://schemas.google.com/gdata/batch" /><ns0:updated>2012-10-17T09:39:18.946Z</ns0:updated></ns0:entry><ns0:entry><ns0:id>1630</ns0:id><ns0:content 
```

我发现 google api 文档很难理解，示例很少而且范围太窄。如果你能让我知道我做错了什么那就太好了

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T14:30:43.857

在 chrome 中查看 xml 时原因变得很清楚，批量不支持插入。看起来新单元格必须通过工作表提要进入。

# azure - 配置nservicebus在azure上自动创建servicebus队列和错误队列

> ID：12932082
> 
> 赞同：2
> 
> 时间：2012-10-17T10:17:46.980
> 
> 标签：azure, queue, nservicebus, servicebus

我们目前正在使用 nservicebus 从 azure servicebus 队列中读取消息。

我可以通过代码创建我需要的队列，但有谁知道我是否可以设置配置文件以在 azure 上自动创建错误和输入队列？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T13:37:17.347

默认情况下会自动创建所有输入队列，但从不自动创建目标队列（以避免创建流氓队列）

因此，如果某个实例正在读取错误队列，则应该创建它，否则您将不得不手动创建它。

请注意，实例在 azure 中的启动速度不同，因此当角色尝试发送信息时，目标队列可能还不存在，而与此同时工作人员仍在启动并将创建该队列几秒钟后。这通常会随着时间的推移自行解决，但对于关键部分或生产部署，我建议您在第一次发布之前手动创建队列。

说得通？

# java - 处理 JTextPane 上的超链接右键单击

> ID：12932089
> 
> 赞同：2
> 
> 时间：2012-10-17T10:18:16.153
> 
> 标签：java, swing, applet

我试图在我的程序中检测对 JTextPane 中超链接的右键单击。网上真的没有什么关于这个问题的。有人能帮我吗？

```
public class rchltest extends Applet {

    public void init() {

        JPanel panel = new JPanel(false);

        JEditorPane gentextp = new JTextPane();
        JScrollPane scrollPane = new JScrollPane(gentextp);
        panel.add(scrollPane);
        scrollPane.setVerticalScrollBarPolicy(JScrollPane.VERTICAL_SCROLLBAR_ALWAYS);
        gentextp.setContentType("text/html");
        gentextp.setEditable(false);
        gentextp.addHyperlinkListener(new texthll());
        gentextp.setPreferredSize( new Dimension( 500, 400 ) );
        gentextp.setText("Here is a <a href='http://A'>hyperlink</a>");

        this.add( panel );

    }
}

class texthll implements HyperlinkListener  {

        public void hyperlinkUpdate(HyperlinkEvent event) {
        if (event.getEventType() == HyperlinkEvent.EventType.ACTIVATED) {
            JEditorPane pane = (JEditorPane)event.getSource();

            URL url = event.getURL();

                // Show the new page in the editor pane.
                JOptionPane.showMessageDialog( null, url);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-17T10:44:12.453

使用传统的鼠标监听器。HyperlinkListener 仅转发鼠标移动和左键单击。

这是一个小演示代码：

```
import java.awt.BorderLayout;
import java.awt.Desktop;
import java.awt.Dimension;
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;
import java.io.IOException;
import java.net.URI;
import java.net.URISyntaxException;

import javax.swing.JEditorPane;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.swing.JTextPane;
import javax.swing.SwingUtilities;
import javax.swing.UIManager;
import javax.swing.UnsupportedLookAndFeelException;
import javax.swing.event.HyperlinkEvent;
import javax.swing.event.HyperlinkListener;
import javax.swing.text.AttributeSet;
import javax.swing.text.Element;
import javax.swing.text.html.HTML;
import javax.swing.text.html.HTMLDocument;

public class TestHyperlinks {

    private final class HyperlinkMouseListener extends MouseAdapter {
        @Override
        public void mouseClicked(MouseEvent e) {
            if (e.getButton() == MouseEvent.BUTTON3) {
                Element h = getHyperlinkElement(e);
                if (h != null) {
                    Object attribute = h.getAttributes().getAttribute(HTML.Tag.A);
                    if (attribute instanceof AttributeSet) {
                        AttributeSet set = (AttributeSet) attribute;
                        String href = (String) set.getAttribute(HTML.Attribute.HREF);
                        if (href != null) {
                            try {
                                Desktop.getDesktop().browse(new URI(href));
                            } catch (IOException e1) {
                                e1.printStackTrace();
                            } catch (URISyntaxException e1) {
                                e1.printStackTrace();
                            }
                        }
                    }
                }
            }
        }

        private Element getHyperlinkElement(MouseEvent event) {
            JEditorPane editor = (JEditorPane) event.getSource();
            int pos = editor.getUI().viewToModel(editor, event.getPoint());
            if (pos >= 0 && editor.getDocument() instanceof HTMLDocument) {
                HTMLDocument hdoc = (HTMLDocument) editor.getDocument();
                Element elem = hdoc.getCharacterElement(pos);
                if (elem.getAttributes().getAttribute(HTML.Tag.A) != null) {
                    return elem;
                }
            }
            return null;
        }
    }

    protected void initUI() {
        JPanel panel = new JPanel(false);

        JEditorPane gentextp = new JTextPane();
        JScrollPane scrollPane = new JScrollPane(gentextp);
        panel.add(scrollPane);
        scrollPane.setVerticalScrollBarPolicy(JScrollPane.VERTICAL_SCROLLBAR_ALWAYS);
        gentextp.setContentType("text/html");
        gentextp.setEditable(false);
        gentextp.setPreferredSize(new Dimension(500, 400));
        gentextp.addMouseListener(new HyperlinkMouseListener());
        gentextp.setText("Some text containing an hyperlink: <a href=\"http://www.stackoverflow.com\">a link to stackoverflow</a> and some more text not in an hyperlink");

        JFrame f = new JFrame(TestHyperlinks.class.getSimpleName());
        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        f.add(panel, BorderLayout.CENTER);
        f.pack();
        f.setSize(f.getWidth() + 100, f.getHeight() + 100);
        f.setVisible(true);

    }

    public static void main(String[] args) throws ClassNotFoundException, InstantiationException, IllegalAccessException,
            UnsupportedLookAndFeelException {
        UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                new TestHyperlinks().initUI();
            }
        });
    }

} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-17T10:39:44.160

添加通常`MouseListener`并右键单击。单击使用`viewToModel()`方法`JEditorPane`获取文档中的偏移量。然后检查是否使用`getCharacterElement()`方法`StyledDocument`获取叶子元素。然后检查叶子是否是超链接。

或者你可以使用这个[http://java-sl.com/tip_links_in_editable.html](http://java-sl.com/tip_links_in_editable.html)来实现你自己的`LinkController`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-07-02T06:00:03.293

`HyperTextPane`基于@GuillaumePolet 代码的单个类 ( )：

```
package stackoverflow;

import javax.swing.*;
import javax.swing.text.AttributeSet;
import javax.swing.text.BadLocationException;
import javax.swing.text.Element;
import javax.swing.text.html.HTML;
import javax.swing.text.html.HTMLDocument;
import java.awt.*;
import java.awt.datatransfer.Clipboard;
import java.awt.datatransfer.StringSelection;
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;
import java.io.IOException;
import java.net.URI;
import java.net.URISyntaxException;

public class Main {

    static void showUI() {
    javax.swing.SwingUtilities.invokeLater(
            () -> {
                JFrame frame = new JFrame();
                HyperTextPane label = new HyperTextPane("<html>Visit new: <a href=\"http://www.google.pl\">google</a><br>" +
                        "Visit <a href=\"http://stackoverflow.com\">stackoverflow</a>" +
                        "</html>");
                label.setHyperlinkClickListener(
                        (e,href,button) -> {
                            if (button == MouseEvent.BUTTON1) {
                                HyperTextPane.openHyperlink(href);
                            } else if (button == MouseEvent.BUTTON3) {
                                label.showHyperlinkCopyMenu(e,href);
                            }
                });
                frame.add(label);
                frame.setSize(800,600);
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setVisible(true);
            }
    );
    }
    public static void main(String[] args) {
    showUI();
    }
}

class HyperTextPane extends JTextPane {
    HyperlinkClickListener hyperlinkClickListener;

    public HyperTextPane(String htmlText) {
    setContentType("text/html");
    setEditable(false);
    addMouseListener(new MouseAdapter() {
        @Override
        public void mouseClicked(MouseEvent e) {
            Element h = getHyperlinkElement(e);
            if (h != null) {
                Object attribute = h.getAttributes().getAttribute(HTML.Tag.A);
                if (attribute instanceof AttributeSet) {
                    AttributeSet set = (AttributeSet) attribute;
                    String href = (String) set.getAttribute(HTML.Attribute.HREF);
                    if (href != null) {
                        hyperlinkClickListener.onHyperlinkClicked(h, href, e.getButton());
                    }
                }
            }
        }
    });
    setText(htmlText);
    }
    public void setHyperlinkClickListener(HyperlinkClickListener hyperlinkClickListener) {
    this.hyperlinkClickListener = hyperlinkClickListener;
    }
    private Element getHyperlinkElement(MouseEvent event) {
    JEditorPane editor = (JEditorPane) event.getSource();
    int pos = editor.getUI().viewToModel(editor, event.getPoint());
    if (pos >= 0 && editor.getDocument() instanceof HTMLDocument) {
        HTMLDocument hdoc = (HTMLDocument) editor.getDocument();
        Element elem = hdoc.getCharacterElement(pos);
        if (elem.getAttributes().getAttribute(HTML.Tag.A) != null) {
            return elem;
        }
    }
    return null;
    }
    public static boolean openHyperlink(String href) {
    try {
        Desktop.getDesktop().browse(new URI(href));
        return true;
    } catch (IOException | URISyntaxException e1) {
        e1.printStackTrace();
    }
    return false;
    }
    public void showHyperlinkCopyMenu(Element elem, String href) {
    JPopupMenu popup = new JPopupMenu();
    popup.add("Copy URL");
    ((JMenuItem)popup.getComponent(0)).addActionListener(e -> {
        StringSelection selection = new StringSelection(href);
        Clipboard clipboard = Toolkit.getDefaultToolkit().getSystemClipboard();
        clipboard.setContents(selection, selection);            }
    );
    try {
        Rectangle rec = modelToView(elem.getStartOffset());
        popup.show(this, rec.x, rec.y+rec.height);
    } catch (BadLocationException e) {
        e.printStackTrace();
    }
    }
    public interface HyperlinkClickListener {
    void onHyperlinkClicked(Element element, String href, int mouseButton);
    }
} 
```

此示例还显示在默认浏览器中打开超链接，并将超链接地址复制到剪贴板。

# scala - 如何在 Play2 框架中为 sbt idea 插件设置选项？

> ID：12932090
> 
> 赞同：1
> 
> 时间：2012-10-17T10:18:17.413
> 
> 标签：scala, playframework-2.0, sbt, sbt-idea

我知道播放框架有自己的自定义 sbt 插件来生成 Idea 项目文件，我正在尝试找到一种配置它的方法。我看到有一些可用的选项，例如当我键入时：

```
[my-play-project] $ idea-include-scala-facet 
```

我明白了

```
[info] false 
```

如何使用播放控制台将此选项设置为 true？我找不到任何有关如何执行此操作的文档。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T13:40:43.573

您可以将此配置传递给`PlayProject#settings`您的 Build.scala 。以下对我有用。根据您的设置，您可能需要对其进行一些调整。

```
import org.sbtidea.SbtIdeaPlugin

val main = PlayProject(appName, appVersion, appDependencies, mainLang = SCALA).settings(
  ... some other settings ...,
  SbtIdeaPlugin.includeScalaFacet := true
) 
```

要在播放控制台中设置此选项，请执行以下操作：

```
set org.sbtidea.SbtIdeaPlugin.includeScalaFacet := true 
```

您可以在此处找到其他 intellij 命令设置：[https ://github.com/playframework/Play20/blob/2.0.3/framework/src/sbt-plugin/src/main/scala/PlayCommands.scala#L212](https://github.com/playframework/Play20/blob/2.0.3/framework/src/sbt-plugin/src/main/scala/PlayCommands.scala#L212)

# wordpress - WordPress TinyMCE 使用 POST 获取内容

> ID：12932095
> 
> 赞同：0
> 
> 时间：2012-10-17T10:18:37.620
> 
> 标签：wordpress

我想将 tinymce 编辑器集成到插件选项页面并保存其值。我使用
wp_editor( $content, $editor_id, $settings = array() ); 加载编辑器的功能。但是提交时内容在 $_POST 中不可用

有什么可能的原因吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T21:17:04.760

测试它： tinyMCE.get('content id').getContent();

;-) PSO

# mysql - 为父级选择第一个创建的子级

> ID：12932100
> 
> 赞同：0
> 
> 时间：2012-10-17T10:18:59.570
> 
> 标签：mysql

我正在尝试选择`quote`a`contact`创建的第一个来修改它，但我不太确定如何这样做，我已经尝试了一段时间。SQL 表如下所示：

```
quotes

id | name | value | date_entered

contacts

id | first_name | last_name | notes

quotes_contacts

id | quote_id | contact_id 
```

因此，如果有意义的话，我想获取首先为联系人创建的所有报价的列表，以便我们可以列出每个客户的第一个报价。

我正在使用 MySQL

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T10:23:50.147

```
SELECT
    c.first_name,
    c.last_name,
    (
        SELECT value 
        FROM quotes q 
        LEFT JOIN quotes_contacts qc ON q.id = qc.quote_id
        WHERE qc.contact_id = c.id
        ORDER BY q.date_entered
        LIMIT 1
    ) first_quote_value
FROM
    contacts c 
```

将为您提供每个联系人的第一个报价。

# c# - 一次启动多个 async/await 函数并分别处理它们

> ID：12932102
> 
> 赞同：8
> 
> 时间：2012-10-17T10:19:04.517
> 
> 标签：c#, asynchronous, windows-8, async-await

您如何`HttpClient.GetAsync()`一次启动多个请求，并在它们各自的响应返回后立即处理它们？首先我尝试的是：

```
var response1 = await client.GetAsync("http://example.com/");
var response2 = await client.GetAsync("http://stackoverflow.com/");
HandleExample(response1);
HandleStackoverflow(response2); 
```

但当然它仍然是连续的。因此，我尝试同时启动它们：

```
var task1 = client.GetAsync("http://example.com/");
var task2 = client.GetAsync("http://stackoverflow.com/");
HandleExample(await task1);
HandleStackoverflow(await task2); 
```

现在任务同时*启动*了，很好，当然代码还是要一个接一个的等待。

我想要的是能够在“example.com”响应一进来就处理它，而“stackoverflow.com”响应一进来就能够处理。

我可以将这两个任务放在一个数组中并`Task.WaitAny()`在循环中使用，检查哪一个完成并调用适当的处理程序，但是……这比普通的旧回调有什么好处？或者这不是 async/await 的真正预期用例？如果没有，我将如何使用`HttpClient.GetAsync()`回调？

澄清一下——我所追求的行为是这样的伪代码：

```
client.GetAsyncWithCallback("http://example.com/", HandleExample);
client.GetAsyncWithCallback("http://stackoverflow.com/", HandleStackoverflow); 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-17T10:26:33.760

您可以使用`ContinueWith`and`WhenAll`来等待一个新`Task`的，task1 和 task2 将并行执行

```
var task1 = client.GetAsync("http://example.com/")
                  .ContinueWith(t => HandleExample(t.Result));

var task2 = client.GetAsync("http://stackoverflow.com/")
                  .ContinueWith(t => HandleStackoverflow(t.Result));

var results = await Task.WhenAll(new[] { task1, task2 }); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-17T11:05:17.267

您可以使用一种在它们完成时重新排序它们的方法。这是[Jon Skeet](http://blogs.msmvps.com/jonskeet/2012/01/16/eduasync-part-19-ordering-by-completion-ahead-of-time/)和[Stephen Toub描述的一个很好的技巧，我的](http://blogs.msdn.com/b/pfxteam/archive/2012/08/02/processing-tasks-as-they-complete.aspx)[AsyncEx 库](http://nitoasyncex.codeplex.com/)也支持这个技巧。

所有三个实现都非常相似。采取我自己的实现：

```
/// <summary>
/// Creates a new array of tasks which complete in order.
/// </summary>
/// <typeparam name="T">The type of the results of the tasks.</typeparam>
/// <param name="tasks">The tasks to order by completion.</param>
public static Task<T>[] OrderByCompletion<T>(this IEnumerable<Task<T>> tasks)
{
  // This is a combination of Jon Skeet's approach and Stephen Toub's approach:
  //  http://msmvps.com/blogs/jon_skeet/archive/2012/01/16/eduasync-part-19-ordering-by-completion-ahead-of-time.aspx
  //  http://blogs.msdn.com/b/pfxteam/archive/2012/08/02/processing-tasks-as-they-complete.aspx

  // Reify the source task sequence.
  var taskArray = tasks.ToArray();

  // Allocate a TCS array and an array of the resulting tasks.
  var numTasks = taskArray.Length;
  var tcs = new TaskCompletionSource<T>[numTasks];
  var ret = new Task<T>[numTasks];

  // As each task completes, complete the next tcs.
  int lastIndex = -1;
  Action<Task<T>> continuation = task =>
  {
    var index = Interlocked.Increment(ref lastIndex);
    tcs[index].TryCompleteFromCompletedTask(task);
  };

  // Fill out the arrays and attach the continuations.
  for (int i = 0; i != numTasks; ++i)
  {
    tcs[i] = new TaskCompletionSource<T>();
    ret[i] = tcs[i].Task;
    taskArray[i].ContinueWith(continuation, CancellationToken.None, TaskContinuationOptions.ExecuteSynchronously, TaskScheduler.Default);
  }

  return ret;
} 
```

然后，您可以这样使用它：

```
var tasks = new[]
{
  client.GetAsync("http://example.com/"),
  client.GetAsync("http://stackoverflow.com/"),
};
var orderedTasks = tasks.OrderByCompletion();
foreach (var task in orderedTasks)
{
  var response = await task;
  HandleResponse(response);
} 
```

* * *

另一种方法是使用[TPL Dataflow](https://www.nuget.org/packages/Microsoft.Tpl.Dataflow)；随着每个任务的完成，将其操作发布到一个`ActionBlock<T>`，如下所示：

```
var block = new ActionBlock<string>(HandleResponse);
var tasks = new[]
{
  client.GetAsync("http://example.com/"),
  client.GetAsync("http://stackoverflow.com/"),
};
foreach (var task in tasks)
{
  task.ContinueWith(t =>
  {
    if (t.IsFaulted)
      ((IDataflowBlock)block).Fault(t.Exception.InnerException);
    else
      block.Post(t.Result);
  });
} 
```

* * *

以上任何一个答案都可以正常工作。如果您的其余代码使用/可以使用 TPL 数据流，那么您可能更喜欢该解决方案。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-17T10:27:05.630

声明一个异步函数并传入你的回调：

```
void async GetAndHandleAsync(string url, Action<HttpResponseMessage> callback)
{
    var result = await client.GetAsync(url);
    callback(result);
} 
```

然后多次调用它：

```
GetAndHandleAsync("http://example.com/", HandleExample);
GetAndHandleAsync("http://stackoverflow.com/", HandleStackoverflow); 
```

# android - 尝试在 EditText 上使用 Getter 或 Setter 时 Android 中的 NullPointerException

> ID：12932104
> 
> 赞同：0
> 
> 时间：2012-10-17T10:19:12.050
> 
> 标签：android, nullpointerexception, android-edittext, getter-setter

以下代码引发 NullPointerException，我不知道为什么。问题似乎是我没有正确引用 EditText 对象。但我不知道如何使它正确。

这是我的代码中有趣的部分：

```
private static ArrayList<String> roomList = new ArrayList<String>();
    private static ArrayList<String> deviceList = new ArrayList<String>();

    private static String project_name;
    private static String router_ip;
    private static String port;
    private static String device_name;
    private static String room_name;
    private static String datatype;
    private static String grpaddr;
    private static boolean status;

    private EditText et_project_name;
    private EditText et_router_ip;
    private EditText et_port;

    private Spinner spinner_dpt; 
    private CheckBox cb_checkStatus;
    private EditText et_device_name;
    private EditText et_groupaddress;
    private View textEntryView;

    private static final String[] items={"1.001 (Lichtschalter)", "5.001 (Dimmer/Jalousien)",
          "9.001 (Temperaturanzeige)", "1.008 (Jalousien)"};

    private SectionsPagerAdapter mSectionsPagerAdapter;
    private ViewPager mViewPager;

    private static ManualConfigDBAdapter dbHelper;

    /**
     * OnCreate
     * */ 
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_create_project_manually);

        setup();
    }

    /**
     * Setup
     * */ 
    public void setup(){

        //DATABASE
        // Add project to Database
        dbHelper = new ManualConfigDBAdapter(this);
        dbHelper.open();

        // Create the adapter that will return a fragment for each of the three primary sections
        // of the app.
        mSectionsPagerAdapter = new SectionsPagerAdapter(getSupportFragmentManager());

        // Set up the action bar.
        final ActionBar actionBar = getActionBar();
        // set the app icon as an action to go home
        actionBar.setDisplayHomeAsUpEnabled(true); 
        //enable tabs in actionbar
        actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);

        // Set up the ViewPager with the sections adapter.
        mViewPager = (ViewPager) findViewById(R.id.pager);
        mViewPager.setAdapter(mSectionsPagerAdapter);

        // When swiping between different sections, select the corresponding tab.
        // We can also use ActionBar.Tab#select() to do this if we have a reference to the
        // Tab.
        mViewPager.setOnPageChangeListener(new ViewPager.SimpleOnPageChangeListener() {
            @Override
            public void onPageSelected(int position) {
                actionBar.setSelectedNavigationItem(position);
            }
        });

        // For each of the sections in the app, add a tab to the action bar.
        for (int i = 0; i < mSectionsPagerAdapter.getCount(); i++) {
            // Create a tab with text corresponding to the page title defined by the adapter.
            // Also specify this Activity object, which implements the TabListener interface, as the
            // listener for when this tab is selected.
            actionBar.addTab(
                    actionBar.newTab()
                            .setText(mSectionsPagerAdapter.getPageTitle(i))
                            .setTabListener(this));
        }

        //get the controls from the layout
        et_project_name = (EditText) mViewPager.findViewById(R.id.project_name);
        et_router_ip = (EditText) mViewPager.findViewById(R.id.router_ip);
        et_port = (EditText) mViewPager.findViewById(R.id.port);

        //Use a input filter for the input of the IP adress
        InputFilter[] filters = new InputFilter[1];
        filters[0] = new InputFilter() {
            public CharSequence filter(CharSequence source, int start, int end, Spanned dest, int dstart, int dend) {
                if (end > start) {
                    String destTxt = dest.toString();
                    String resultingTxt = destTxt.substring(0, dstart) + source.subSequence(start, end) + destTxt.substring(dend);
                    if (!resultingTxt.matches ("^\\d{1,3}(\\.(\\d{1,3}(\\.(\\d{1,3}(\\.(\\d{1,3})?)?)?)?)?)?")) { 
                        return "";
                    } else {
                        String[] splits = resultingTxt.split("\\.");
                        for (int i=0; i<splits.length; i++) {
                            if (Integer.valueOf(splits[i]) > 255) {
                                return "";
                            }
                        }
                    }
                }
            return null;
            }
        };

        et_router_ip.setFilters(filters);

    } 
```

和 LogCat：

```
02-16 20:09:25.755: E/AndroidRuntime(26658): FATAL EXCEPTION: main
02-16 20:09:25.755: E/AndroidRuntime(26658): java.lang.RuntimeException: Unable to start activity ComponentInfo{de.bertrandt.bertrandtknx/de.bertrandt.bertrandtknx.CreateProjectManually}: java.lang.NullPointerException
02-16 20:09:25.755: E/AndroidRuntime(26658):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1970)
02-16 20:09:25.755: E/AndroidRuntime(26658):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1995)
02-16 20:09:25.755: E/AndroidRuntime(26658):    at android.app.ActivityThread.access$600(ActivityThread.java:128)
02-16 20:09:25.755: E/AndroidRuntime(26658):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1161)
02-16 20:09:25.755: E/AndroidRuntime(26658):    at android.os.Handler.dispatchMessage(Handler.java:99)
02-16 20:09:25.755: E/AndroidRuntime(26658):    at android.os.Looper.loop(Looper.java:137)
02-16 20:09:25.755: E/AndroidRuntime(26658):    at android.app.ActivityThread.main(ActivityThread.java:4514)
02-16 20:09:25.755: E/AndroidRuntime(26658):    at java.lang.reflect.Method.invokeNative(Native Method)
02-16 20:09:25.755: E/AndroidRuntime(26658):    at java.lang.reflect.Method.invoke(Method.java:511)
02-16 20:09:25.755: E/AndroidRuntime(26658):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:993)
02-16 20:09:25.755: E/AndroidRuntime(26658):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:760)
02-16 20:09:25.755: E/AndroidRuntime(26658):    at dalvik.system.NativeStart.main(Native Method)
02-16 20:09:25.755: E/AndroidRuntime(26658): Caused by: java.lang.NullPointerException
02-16 20:09:25.755: E/AndroidRuntime(26658):    at de.bertrandt.bertrandtknx.CreateProjectManually.setup(CreateProjectManually.java:152)
02-16 20:09:25.755: E/AndroidRuntime(26658):    at de.bertrandt.bertrandtknx.CreateProjectManually.onCreate(CreateProjectManually.java:75)
02-16 20:09:25.755: E/AndroidRuntime(26658):    at android.app.Activity.performCreate(Activity.java:4562)
02-16 20:09:25.755: E/AndroidRuntime(26658):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1053)
02-16 20:09:25.755: E/AndroidRuntime(26658):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1934)
02-16 20:09:25.755: E/AndroidRuntime(26658):    ... 11 more
02-16 20:09:25.770: D/dalvikvm(26658): GC_CONCURRENT freed 396K, 4% free 14704K/15303K, paused 2ms+3ms 
```

使用的xml文件：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@color/black" >

    <RelativeLayout
        android:id="@+id/project_save_text"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:background="@color/black"
        android:orientation="vertical" >

        <TextView
            android:id="@+id/textView2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:layout_alignParentTop="true"
            android:layout_marginTop="10dp"
            android:text="@string/project_name"
            android:textAppearance="?android:attr/textAppearanceMedium" />

        <EditText
            android:id="@+id/project_name"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:layout_below="@+id/textView2"
            android:ems="10"
            android:hint="@string/project_name_hint" >
        </EditText>

        <TextView
            android:id="@+id/textView4"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:layout_below="@+id/project_name"
            android:layout_marginTop="10dp"
            android:text="@string/router_ip"
            android:textAppearance="?android:attr/textAppearanceMedium" />

        <EditText
            android:id="@+id/router_ip"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:layout_below="@+id/textView4"
            android:digits="0123456789."
            android:ems="10"
            android:hint="@string/router_adress_info"
            android:inputType="numberDecimal|phone" />

        <ImageView
            android:id="@+id/imageView1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentBottom="true"
            android:layout_alignParentLeft="true"
            android:contentDescription="@string/placeholder"
            android:src="@drawable/bertrandtlogoinv" />

        <TextView
            android:id="@+id/info_text"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_above="@+id/imageView1"
            android:layout_alignParentLeft="true"
            android:gravity="center"
            android:text="@string/info_settings"
            android:textAppearance="?android:attr/textAppearanceSmall"
            android:textSize="16dp" />

        <ImageView
            xmlns:android="http://schemas.android.com/apk/res/android"
            android:id="@+id/ImageView1"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_above="@+id/info_text"
            android:layout_alignParentLeft="true"
            android:contentDescription="@string/placeholder"
            android:paddingBottom="2dp"
            android:paddingLeft="5dp"
            android:paddingRight="5dp"
            android:paddingTop="2dp"
            android:scaleType="fitXY"
            android:src="@color/ics_blue" />

        <ImageView
            xmlns:android="http://schemas.android.com/apk/res/android"
            android:id="@+id/ImageView01"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:layout_alignTop="@+id/imageView1"
            android:contentDescription="@string/placeholder"
            android:paddingBottom="2dp"
            android:paddingLeft="5dp"
            android:paddingRight="5dp"
            android:paddingTop="2dp"
            android:scaleType="fitXY"
            android:src="@color/ics_blue" />

        <TextView
            android:id="@+id/textView3"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:layout_below="@+id/router_ip"
            android:layout_marginTop="10dp"
            android:text="@string/Port"
            android:textAppearance="?android:attr/textAppearanceMedium" />

        <EditText
            android:id="@+id/port"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:layout_below="@+id/textView3"
            android:digits="0123456789"
            android:ems="10"
            android:hint="@string/port_hint"
            android:inputType="number"
            android:maxLength="5" />

    </RelativeLayout>

</RelativeLayout> 
```

以下行引发错误：

```
et_router_ip.setFilters(filters); 
```

**解决方案**

要使用视图寻呼机创建 3 个不同的片段，您应该：

1）使用视图寻呼机和视图寻呼机适配器创建 FragmentActivity。

2）用静态实例创建3个片段

```
public final class Fragment1 extends Fragment
{   
    public static Fragment1 newInstance() {
        return new Fragment1();
    }

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        LinearLayout layout = new LinearLayout(getActivity());
// your fragment xml view
        return view;
    }
} 
```

3）用它填充视图寻呼机适配器；

```
public class FragmentAdapter extends FragmentPagerAdapter

{    
    public InstallFragmentAdapter(FragmentManager fm) {
        super(fm);
    }
    @Override
    public Fragment getItem(int position) {     
        switch (position) {
            case 0:
                return Fragment1.newInstance();
            case 1:
                return Fragment2.newInstance();
            case 2:
                return Fragment3.newInstance();
        }
        return null;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T10:42:51.487

`R.id.router_ip`存在，但根据您发布的所有代码，它不存在于具有 pager id 的 ViewPager 元素中。通过在对 ViewPager 的引用上调用 findViewById() ，您只是在该 ViewPager 对象中查找，`R.id.router_ip`而不是在所有膨胀的 XML 元素中全局查找。

如果上面调用的 XML 文件没有被调用`activity_create_project_manually.xml`，那么您的问题就源于在使用其中的元素之前没有将所需的 XML 膨胀到内存中。

`setContentView()`将 XML 文件膨胀到内存中。你也可以用 LayoutInflater 来做，但我认为这个解决方案不适合你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T10:45:25.023

```
// Set up the ViewPager with the sections adapter.
mViewPager = (ViewPager) findViewById(R.id.pager); 
```

但是，我在**The used xml-file中看不到****纸张**。

# r - 如何在 R 中使用 ksvm 执行新颖性检测？

> ID：12932106
> 
> 赞同：4
> 
> 时间：2012-10-17T10:19:15.433
> 
> 标签：r, svm, kernlab

我正在尝试使用 R 中的 kernlab 库（ksvm 函数）来实现新颖性检测器。这是我正在尝试做的一个简单示例：

```
# Training data
xxTrain <- matrix(rnorm(2000), nrow=1000, ncol=2, byrow=TRUE)
y <- rep(1,1000)
classifier <- ksvm(xxTrain, y, type="one-svc", kernel="rbfdot", kpar="automatic")
# Test data
x1 <- rnorm(1000)
scale <- c(rep(1,500), rep(10,100), rep(1,400))
x2 <- rnorm(1000)*scale
xxTest <- matrix(c(x1,x2), nrow=1000, ncol=2, byrow=TRUE)
# Prediction
p <- predict(classifier, xxTest, type="response")
# Visualization
plot(x2, type='l')
lines(x1, col="red")
points(5*as.integer(p), type='l', col="blue") 
```

![在此处输入图像描述](../Images/19701789468d9948491d1469aadad086.png)

上图是我得到的结果。蓝色迹线是预测，它清楚地显示了一个始终为 0 的周期。但它与黑色迹线中的异常值在时间或宽度上不匹配。有100个幅度较大的点（黑线），我得到的蓝色输出与黑线不匹配。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T11:05:26.893

这是你做错了什么：

```
xxTest <- matrix(c(x1,x2), nrow=1000, ncol=2, byrow=TRUE) 
```

这应该是

```
xxTest <- matrix(c(x1,x2), nrow=1000, ncol=2, byrow=F ) 
```

或更好

```
xxTest <- cbind( x1, x2 ) 
```

或者干脆

```
p <- predict( classifier, cbind( x1, x2 ), type= "response" ) 
```

结果（我已将灰色用于 x2）：

![在此处输入图像描述](../Images/b5801324fe9ebf001204b98d8915f8d7.png)

解释：通过指定`byrow=T`，您首先取 x1 的元素来填充前 500 行（或者，第 1 列和第 2 列），然后用 x2 填充剩余的 500 行`xxTest`。由于 x2 中的奇点约为 500 - 600，因此它出现在`xxTest`(500+500)/2 - (500+600)/2 左右的两列中，即 750-800，这是你可以看到的。

# c++ - Mac OS X Lion 上的 OpenMP 编译失败（memcpy 和 SSE 内部函数）

> ID：12932107
> 
> 赞同：8
> 
> 时间：2012-10-17T10:19:25.203
> 
> 标签：c++, c, macos, openmp, fortify-source

我偶然发现了以下问题。下面的代码片段在 Mac OS X 上没有与我尝试过的任何 Xcode 链接（4.4、4.5）

```
#include <stdlib.h>
#include <string.h>
#include <emmintrin.h>

int main(int argc, char *argv[])
{
  char *temp;
#pragma omp parallel
  {
    __m128d v_a, v_ar;
    memcpy(temp, argv[0], 10);
    v_ar = _mm_shuffle_pd(v_a, v_a, _MM_SHUFFLE2 (0,1));
  }
} 
```

该代码仅作为示例提供，运行时会出现段错误。关键是它不编译。使用以下行完成编译

```
/Applications/Xcode.app/Contents/Developer/usr/bin/gcc test.c -arch x86_64 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.7.sdk -mmacosx-version-min=10.7 -fopenmp

 Undefined symbols for architecture x86_64:
"___builtin_ia32_shufpd", referenced from:
    _main.omp_fn.0 in ccJM7RAw.o
"___builtin_object_size", referenced from:
    _main.omp_fn.0 in ccJM7RAw.o
ld: symbol(s) not found for architecture x86_64
collect2: ld returned 1 exit status 
```

当**不**使用`-fopenmp`标志时，代码编译得很好`gcc`。现在，我四处搜索并找到了与 相关的第一个问题的解决方案`memcpy`，即添加`-fno-builtin`或`-D_FORTIFY_SOURCE=0`到`gcc`参数列表。我没有设法解决第二个问题（sse 内在）。

谁能帮我解决这个问题？问题：

*   **最重要的是：**如何摆脱“___builtin_ia32_shufpd”错误？
*   问题的确切原因是`memcpy`什么，`-D_FORTIFY_SOURCE=0`标志最终会做什么？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-18T18:32:32.177

这是 Apple 支持 LLVM 的 GCC ( `llvm-gcc`) 转换 OpenMP 区域并处理对其中内置函数的调用的方式中的一个错误。可以通过检查中间树转储来诊断问题（可通过将`-fdump-tree-all`参数传递给 来获得`gcc`）。在未启用 OpenMP 的情况下，将生成以下最终代码表示（来自`test.c.016t.fap`）：

```
main (argc, argv)
{
  D.6544 = __builtin_object_size (temp, 0);
  D.6545 = __builtin_object_size (temp, 0);
  D.6547 = __builtin___memcpy_chk (temp, D.6546, 10, D.6545);
  D.6550 = __builtin_ia32_shufpd (v_a, v_a, 1);
} 
```

这是编译器在所有转换后如何在内部查看代码的类似 C 的表示。这就是然后变成汇编指令的内容。*（这里只显示那些引用内置函数的行）*

启用 OpenMP 后，并行区域被提取到自己的函数中`main.omp_fn.0`：

```
main.omp_fn.0 (.omp_data_i)
{
  void * (*<T4f6>) (void *, const <unnamed type> *, long unsigned int, long unsigned int) __builtin___memcpy_chk.21;
  long unsigned int (*<T4f5>) (const <unnamed type> *, int) __builtin_object_size.20;
  vector double (*<T6b5>) (vector double, vector double, int) __builtin_ia32_shufpd.23;
  long unsigned int (*<T4f5>) (const <unnamed type> *, int) __builtin_object_size.19;

  __builtin_object_size.19 = __builtin_object_size;
  D.6587 = __builtin_object_size.19 (D.6603, 0);
  __builtin_ia32_shufpd.23 = __builtin_ia32_shufpd;
  D.6593 = __builtin_ia32_shufpd.23 (v_a, v_a, 1);
  __builtin_object_size.20 = __builtin_object_size;
  D.6588 = __builtin_object_size.20 (D.6605, 0);
  __builtin___memcpy_chk.21 = __builtin___memcpy_chk;
  D.6590 = __builtin___memcpy_chk.21 (D.6609, D.6589, 10, D.6588);
} 
```

同样，我只留下了引用内置函数的代码。显而易见的（但原因对我来说不是很明显）是 OpenMP 代码转换器确实**坚持**通过函数指针调用所有内置函数。这些指针赋值：

```
__builtin_object_size.19 = __builtin_object_size;
__builtin_ia32_shufpd.23 = __builtin_ia32_shufpd;
__builtin_object_size.20 = __builtin_object_size;
__builtin___memcpy_chk.21 = __builtin___memcpy_chk; 
```

生成对符号的外部引用，这些符号不是真正的符号，而是得到编译器特殊处理的名称。链接器然后尝试解析它们，但无法`__builtin_*`在代码链接的任何目标文件中找到任何名称。这在汇编代码中也可以观察到，可以通过传递`-S`给来获得`gcc`：

```
LBB2_1:
    movapd  -48(%rbp), %xmm0
    movl    $1, %eax
    movaps  %xmm0, -80(%rbp)
    movaps  -80(%rbp), %xmm1
    movl    %eax, %edi
    callq   ___builtin_ia32_shufpd
    movapd  %xmm0, -32(%rbp) 
```

这基本上是一个接受 3 个参数的函数调用：一个整数 in`%eax`和两个 XMM 参数 in `%xmm0`，并`%xmm1`返回结果`%xmm0`（根据 SysV AMD64 ABI 函数调用约定）。相反，没有生成的代码`-fopenmp`是内在函数的指令级扩展，因为它应该发生：

```
LBB1_3:
    movapd  -64(%rbp), %xmm0
    shufpd  $1, %xmm0, %xmm0
    movapd  %xmm0, -80(%rbp) 
```

当您通过时会发生什么`-D_FORTIFY_SOURCE=0`不会`memcpy`被“强化”检查版本取代，而是使用常规调用来`memcpy`代替。这消除了对内置函数的引用`object_size`，`__memcpy_chk`但不能删除对`ia32_shufpd`内置函数的调用。

这显然是一个编译器错误。如果您真的真的必须使用 Apple 的 GCC 来编译代码，那么临时解决方案是将有问题的代码移至外部函数，因为该错误显然只会影响从`parallel`区域中提取的代码：

```
void func(char *temp, char *argv0)
{
   __m128d v_a, v_ar;
   memcpy(temp, argv0, 10);
   v_ar = _mm_shuffle_pd(v_a, v_a, _MM_SHUFFLE2 (0,1));
}

int main(int argc, char *argv[])
{
  char *temp;
#pragma omp parallel
  {
    func(temp, argv[0]);
  }
} 
```

`parallel`与进入和退出该区域的开销相比，一个额外的函数调用的开销可以忽略不计。您可以在内部使用 OpenMP pragma `func`- 由于该`parallel`区域的动态范围，它们将起作用。

考虑到他们承诺用 Clang 替换 GCC，Apple 可能会在未来提供一个固定的编译器，但他们可能不会。

# iphone - 如何从应用程序将音乐文件添加到音乐播放器播放列表

> ID：12932108
> 
> 赞同：4
> 
> 时间：2012-10-17T10:19:27.277
> 
> 标签：iphone, audio, audio-player

当我搜索很多时，我可以访问音乐库来挑选歌曲，但无法将录制的歌曲文件添加到它的播放列表中。

是否可以将文件添加到该播放列表？iPod api 库是否允许......

[http://developer.apple.com/library/ios/#documentation/Audio/Conceptual/iPodLibraryAccess_Guide/AboutiPodLibraryAccess/AboutiPodLibraryAccess.html](http://developer.apple.com/library/ios/#documentation/Audio/Conceptual/iPodLibraryAccess_Guide/AboutiPodLibraryAccess/AboutiPodLibraryAccess.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-05T21:13:38.403

假设您想通过 AppStore 分发您的应用程序，它是

*   由于 iOS 应用程序是沙盒的，因此无法通过文件系统调用访问 iPod 库（这意味着您不能直接将文件写入设备上的 iTunes 库，只能将文件写入应用程序的空间）
*   iPod api 也无法为您提供此功能，它只允许您读取库，而不是写入库。

如果您计划在越狱设备上使用[libipodimport](https://github.com/H2CO3/libipodimport)库。

# android - 如何防止 android 中 ContentResolver.query() 中的 gmail 联系人？

> ID：12932111
> 
> 赞同：1
> 
> 时间：2012-10-17T10:19:37.480
> 
> 标签：android

实际上，我正在尝试使用 baseadapter 将我的 android 手机中的所有联系人显示到客户列表视图。但是当列表显示时，gmail 联系人也会显示。实际上，我只想显示我的电话联系人的姓名和号码，而不是 gmail 或任何其他联系人。我有以下查询： cursor = cr.query( ContactsContract.Contacts.CONTENT_URI, null, null, null, null);

请帮我........

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T10:34:12.093

试试这个：

```
Cursor cursor = context.getContentResolver().query(
  ContactsContract.Contacts.CONTENT_URI, 
  null, 
  ContactsContract.Contacts.IN_VISIBLE_GROUP + "=1", // 1=local, 0=google acount
  null, 
  null
); 
```

祝你好运= =

# regex - 试图匹配“”中的字符串

> ID：12932112
> 
> 赞同：0
> 
> 时间：2012-10-17T10:19:47.507
> 
> 标签：regex, string, jflex

```
"[a-zA-Z0-9]*" 
```

我希望匹配表单的模式

```
"testing" 
```

但我的正则表达式不匹配任何这些字符串。我在哪里犯错误？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T10:22:12.390

我想你可能不得不逃避

```
" 
```

与

```
\ 
```

如：

```
\"[a-zA-z0-9]*\" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T10:22:21.050

这将按预期为您提供三场比赛。

请参阅此[http://rubular.com/r/WW9IKTb0Xa](http://rubular.com/r/WW9IKTb0Xa)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-17T10:31:05.833

如果您的要求是“匹配”而不是“提取”：

```
^"[a-zA-Z0-9"]*"$ would be the regex you need. 
```

请注意，由于您的第二个示例嵌套了双引号，因此您需要`"`在`[]`

用 grep 测试：

```
kent$  echo '"testing"
"testing123"hello""
'|grep -E '^"[a-zA-Z0-9"]*"$'
"testing"
"testing123"hello"" 
```

如果你想在双引号之间提取东西，你需要解释，你想在你的第二个例子中得到什么。

**编辑**

如果您只想提取双引号之间的内容：

```
(?<=")[^"]* 
```

就是你要找的。

仍在使用 grep 进行测试：

```
kent$  echo '"xxx bbb _ foo bar"'|grep -Po '(?<=")[^"]*'
xxx bbb _ foo bar 
```

# html - 新的图像替换技术（Kellum/Zeldman）布局

> ID：12932114
> 
> 赞同：0
> 
> 时间：2012-10-17T10:19:57.930
> 
> 标签：html, css

我正在开发一个新的响应式网站...看看 > [www.living-heart.nl/txp的主页](http://www.living-heart.nl/txp)

一切都（几乎）按照这种 IR 技术工作 > [www.zeldman.com](http://www.zeldman.com/2012/03/01/replacing-the-9999px-hack-new-image-replacement/)

我有两个问题：

1) 我仍然可以在右侧看到一点点 H1（Firefox/Mac）……你也是吗？可以通过给 H1 更多的文本缩进来隐藏它...... 101% 就足够了。这样做可以吗？

2）如果我禁用图像......我怎样才能让我的文字（H1）回来？

谢谢你帮助我。

```
/* New Image Replacement > http://wp.me/p4WtR-2xq */
hgroup {
    padding: 1em 0 0 0;
}
h1 {
    font-family: lavanderia_sturdysturdy, cursive;
    color: #fff;
    font-size: 4em;
    line-height: 100%;
    background: url(../design/living-heart_logo-05.gif) no-repeat center 0;
    text-indent: 100%;
    white-space: nowrap;
    overflow: hidden;
    padding-bottom: 1.2em;
}
h2 {
    text-align: center;
    font-size: 2.8em;
    color: #6d8677;
    line-height: 1.2em; /* 120% van 16px */
    margin-bottom: 0;   
    font-family: 'IM Fell English', Georgia, Times, "Times New Roman", serif;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T10:31:18.680

> 1) 101% 就足够了。这样做可以吗？

我总是使用`text-indent: 110%;`; 只是为了确保它有效（有时文本在放大到页面时可见，值为`100%`）

> 2）如果我禁用图像......我怎样才能让我的文字（H1）回来？

这种替换技术无法做到这一点。

例如，您需要使用 Shea 图像替换方法来执行此操作。请参阅以下链接的 WP 文章并搜索“ **Shea 方法**”：[https](https://en.wikipedia.org/wiki/Fahrner_Image_Replacement) ://en.wikipedia.org/wiki/Fahrner_Image_Replacement （此方法需要在被替换的元素中添加一个附加元素；可以在此处使用伪元素 - 我'我从来没有尝试过）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T12:04:37.163

有一种 IR 技术可以在不需要额外标记的情况下禁用图像：http: [//nicolasgallagher.com/css-image-replacement-with-pseudo-elements/](http://nicolasgallagher.com/css-image-replacement-with-pseudo-elements/)

```
.nir {
   height:100px; /* height of replacement image */
   width:400px; /* width of replacement image */
   padding:0;
   margin:0;
   overflow:hidden;
}

.nir:before {
   content:url(image.gif);
   display:inline-block;
   font-size:0;
   line-height:0;
} 
```

较旧的浏览器不理解`:before`or `content`，但至少他们能够看到文本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T11:09:04.073

这是我过去使用的 - 它有点简单：

```
h1 {
  overflow: hidden;
}

h1 span {
  width: 100%;
  display: block;
  margin-left: -100%;
} 
```

和标记：

```
<h1>
  <span>
    My Title with lots of text so
    that if and when it wraps nothing 
    goes wrong, and I don't have to rely 
    on nowrap
  </span>
</h1> 
```

这是因为在某些代理中对 nowrap 的支持并不是 100% 可靠的。使用辅助元素来定位也有好处，因为这意味着您可以更好地控制对文本内容的处理方式。

您显然可以使用正边距或负边距。我更喜欢否定，因为在不太可能`overflow:hidden`失败的情况下，向左移动更有可能隐藏文本内容，并且不会导致出现滚动条。正如我所说，这取决于个人喜好。

### 禁用图像

不幸的是，虽然无法帮助您禁用/启用图像，但我所知道的唯一解决方案是feeela 已经建议的解决方案 - 这显然不适用于透明图像：/

实际上你确实有一种可能性，那就是使用多个背景图像和`Shea method`. 所以你基本上重复你的页面背景，然后在上面分层你的文本图像。但是，如果您有一个居中的站点，就像您一样，您必须确保您可以使用`background-attachment: fixed`它来正常工作和对齐。显然，这仅适用于支持多个背景图像的浏览器......虽然您可以添加另一个元素层来伪造这种行为 - 但随后事情开始变得混乱。

# php - 允许 PHP date() 函数识别 dd-mm-yy 格式

> ID：12932115
> 
> 赞同：2
> 
> 时间：2012-10-17T10:20:00.003
> 
> 标签：php, regex, date

我希望稍微修改 PHP`date()`函数，以便它能够识别 dd/mm/yy 或 dd-mm-yy 的英国 6 位数字格式。可以理解的是，它会认为这种形式的日期是国际（yy-mm-dd）格式。

我仍然希望将它传递给日期函数，因为这将允许它识别其他格式，但由于我在英国，人们很可能会将其放入英国格式。

有任何想法吗？我怀疑正则表达式参与了这个问题的解决方案......

## 更新 - 我的解决方案

使用下面答案中的部分，这就是我能够在 dd/mm/yy 的情况下更改它的方式：

```
$s_date = str_replace('/', '-', $s_date);

preg_match('^(.*)[-](.*)[-](.*)$^', $s_date, $matches);
if ($matches) {
    if (strlen($matches[3]) == 2) {
        $matches[3] = '20'.$matches[3];
    }
    $s_date = $matches[1].'-'.$matches[2].'-'.$matches[3];
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-17T10:24:04.750

此功能将允许您检查 dd-mm-yy 和 dd/mm/yy。

通过使用 str 替换 - 您强制日期始终采用“dd-mm-yy”格式。strtotime 将带有“-”的日期解释为您想要的格式。

```
// Is this a valid date?
    function valid_date($str) 
    {
        $str = str_replace('/', '-', $str);
        if ($arr = strtotime($str))
        {
            $arr = explode("-", date("d-m-Y", strtotime($str)));
            $yyyy = $arr[2];
            $mm = $arr[1];
            $dd = $arr[0];
            if (is_numeric($yyyy) && is_numeric($mm) && is_numeric($dd))
            {
                return checkdate($mm, $dd, $yyyy);
            }
        }
        return false;
    } 
```

[引用strtotime：](http://php.net/manual/en/function.strtotime.php)

> 如果分隔符是斜线 (/)，则假定为美式 m/d/y；而如果分隔符是破折号 (-) 或点 (.)，则假定为欧洲 dmy 格式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T10:43:22.753

询问该`date()`功能是在寻找错误的树。

该`date()`函数**输出**一个日期字符串，而不是输入。的输入`date()`是一个整数时间戳值。您无法`date()`识别任何类型的字符串输入。

如果您正在处理作为字符串输入的日期字段，则该`date()`函数不是您要使用的函数；PHP为此提供了不同的功能。

有很多选择，但最好的选择是使用[class `DateTime`，](http://www.php.net/manual/en/class.datetime.php)更具体地说，使用[`DateTime::createFromFormat()`method](http://www.php.net/manual/en/datetime.createfromformat.php)。

这告诉程序导入日期字符串，并以您期望的格式处理它。这消除了输入中任何可能的歧义（即程序知道输入是 dd-mm-yy 而不必猜测 dd、mm 和 yy 部分是哪条路）：

```
$date = DateTime::createFromFormat('d-m-y', '09-04-12'); 
```

完成此操作后，您可以使用在`$date`上面一行中创建的对象来处理代码中的日期，并以您喜欢的任何格式输出它。例如：

```
echo $date->format('j-M-Y');   //prints 9-Apr-2012 
```

希望有帮助。

# android - 无法将本地通知插件添加到 android phonegap 应用程序

> ID：12932117
> 
> 赞同：0
> 
> 时间：2012-10-17T10:20:19.850
> 
> 标签：android, cordova, phonegap-plugins

我尝试了这个[localnotificationplugin](https://github.com/phonegap/phonegap-plugins/tree/master/Android/LocalNotification)来添加本地通知插件，并按照阅读我的步骤工作，虽然我有一些编译错误，但我通过更改`alarm = new AlarmHelper(this.ctx);`localnotification.java 解决了这个问题，`new AlarmHelper(cordova.getContext());`这里是我的 localnotification.js

```
 /*-
 * Phonegap LocalNotification Plugin for Android
 *
 * Created by Daniel van 't Oever 2012 MIT Licensed
 *
 * Usage:
 *
 * plugins.localNotification.add({ date: new Date(), message: 'This is an Android alarm using the statusbar', id: 123 });
 * plugins.localNotification.cancel(123);
 * plugins.localNotification.cancelAll();
 *
 * This interface is similar to the existing iOS LocalNotification plugin created by Greg Allen
 */
if (typeof PhoneGap !== "undefined") {

    /**
     * Empty constructor
     */
    var LocalNotification = function() {
    };

    /**
     * Register a notification message for a specific date / time
     * 
     * @param successCB
     * @param failureCB
     * @param options
     *            Array with arguments. Valid arguments are date, message,
     *            repeatDaily and id
     */
    LocalNotification.prototype.add = function(options) {
        var defaults = {
            date : new Date(),
            message : '',
            ticker : '',
            repeatDaily : false,
            id : ""
        };

        if (options.date) {
            options.date = (options.date.getMonth()) + "/"
                    + (options.date.getDate()) + "/"
                    + (options.date.getFullYear()) + "/"
                    + (options.date.getHours()) + "/"
                    + (options.date.getMinutes());
        }

        for ( var key in defaults) {
            if (typeof options[key] !== "undefined")
                defaults[key] = options[key];
        }

        PhoneGap.exec(null, null, 'LocalNotification', 'add', new Array(
                defaults));
    };

    /**
     * Cancel an existing notification using its original ID.
     * 
     * @param id
     *            The ID that was used when creating the notification using the
     *            'add' method.
     */
    LocalNotification.prototype.cancel = function(notificationId) {
        PhoneGap.exec(null, null, 'LocalNotification', 'cancel', new Array({
            id : notificationId
        }));
    };

    /**
     * Cancel all notifications that were created by your application.
     */
    LocalNotification.prototype.cancelAll = function() {
        PhoneGap
                .exec(null, null, 'LocalNotification', 'cancelAll', new Array());
    };

    /**
     * Register this plugin with phonegap
     */
    PhoneGap.addConstructor(function() {
        alert("constructor called here");
        if (!window.plugins) {
            window.plugins = {};
        }
        window.plugins.localNotification = new LocalNotification();
        alert("localnotification called");
    });
} 
```

它调用 phonegap 构造函数和 alert("localnotification called"); 已显示，但在添加未执行之后，我无法运行 localnotification

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T22:37:34.267

你在哪里测试它（设备或模拟器）？您知道本地通知不会弹出窗口，不是吗？日志中是否有任何错误？

# sql - postgresql - pk 与唯一索引

> ID：12932119
> 
> 赞同：0
> 
> 时间：2012-10-17T10:20:24.423
> 
> 标签：sql, postgresql, primary-key, pgadmin, postgresql-performance

在 PostgreSQL 9 数据库中，有一个表包含一个串行字段 X，它是一个 PK（启用了 oid）和其他字段。

将 postgres 的 pgadmin 与该表一起使用 - 查询需要 30 秒。

如果我在同一个字段 X 上添加唯一索引 - pgadmin 中的相同查询需要 3 秒。

PK 是隐式索引： [http ://www.postgresql.org/docs/current/static/indexes-unique.html](http://www.postgresql.org/docs/current/static/indexes-unique.html)

那么为什么显式索引会产生影响呢？

这是一个 pgadmin 问题吗？

我是否需要 PK 字段的显式索引？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T10:31:54.103

查看查询计划（`EXPLAIN`如果我没记错的话，您可以在 pgAdmin 中选择查询窗口中的选项），以更详细地了解正在发生的事情。您确定您不只是使用第二个查询从 postgresql 缓存中读取数据，或者无论触发查询的顺序如何，都始终如此行事？

此外，`vacuum`在删除/插入/操作大量数据后运行 a 会产生巨大的差异。如果添加（多余的）索引是原因，我会感到惊讶。正如@Eelke 指出的那样，您*确定*该列上已经定义了一个 PK 吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T14:23:30.127

这里没有区别（pg 9.1.2），我认为这是一个工件（模式，大小写无关紧要？）

```
DROP SCHEMA tmp CASCADE;
CREATE SCHEMA tmp ;
SET search_path=tmp;

CREATE TABLE lutser
        ( id INTEGER NOT NULL PRIMARY KEY
        , val INTEGER NOT NULL
        );
INSERT INTO lutser(id,val)
SELECT g, g %31
FROM generate_series(1,100000) g
        ;

DELETE FROM lutser WHERE random() < .5;

VACUUM ANALYZE lutser;

EXPLAIN ANALYZE
SELECT COUNT(*) FROM lutser
WHERE id >= 1000 AND id < 2000
        ;

CREATE INDEX lutser_id ON lutser(id);

VACUUM ANALYZE lutser;

EXPLAIN ANALYZE
SELECT COUNT(*) FROM lutser
WHERE id >= 1000 AND id < 2000
        ; 
```

结果：

```
NOTICE:  drop cascades to table tmp.lutser
DROP SCHEMA
CREATE SCHEMA
SET
NOTICE:  CREATE TABLE / PRIMARY KEY will create implicit index "lutser_pkey" for table "lutser"
CREATE TABLE
INSERT 0 100000
DELETE 50051
VACUUM
                                                          QUERY PLAN
-------------------------------------------------------------------------------------------------------------------------------
 Aggregate  (cost=20.28..20.29 rows=1 width=0) (actual time=0.294..0.295 rows=1 loops=1)
   ->  Index Scan using lutser_pkey on lutser  (cost=0.00..19.03 rows=499 width=0) (actual time=0.015..0.216 rows=487 loops=1)
         Index Cond: ((id >= 1000) AND (id < 2000))
 Total runtime: 0.343 ms
(4 rows)

CREATE INDEX
VACUUM
                                                         QUERY PLAN
-----------------------------------------------------------------------------------------------------------------------------
 Aggregate  (cost=19.03..19.04 rows=1 width=0) (actual time=0.232..0.232 rows=1 loops=1)
   ->  Index Scan using lutser_id on lutser  (cost=0.00..17.79 rows=497 width=0) (actual time=0.033..0.185 rows=487 loops=1)
         Index Cond: ((id >= 1000) AND (id < 2000))
 Total runtime: 0.266 ms
(4 rows) 
```

# sql - INSERT 到另一个表，然后从源表中删除

> ID：12932126
> 
> 赞同：3
> 
> 时间：2012-10-17T10:20:43.733
> 
> 标签：sql, sql-server-2005

如何从“pippo”表中删除前 18 行（按 FIELD1 排序），然后在另一个名为 minnie 的克隆表中插入相同的 18 行？

以下代码提取按 FIELD1 排序的前 18 行，然后删除它们：

```
WITH  q AS
        (
        SELECT TOP 18 *
        FROM    pippo
        ORDER BY FIELD1 ASC /* You may want to add ORDER BY here */
        )
DELETE
FROM    q 
```

在删除它们之前，如何将相同的 18 行插入到 minnie 表中？

预先感谢您的帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-17T10:24:43.683

采用

```
WITH  q AS
        (
        SELECT TOP 18 *
        FROM    pippo
        ORDER BY FIELD1 ASC /* You may want to add ORDER BY here */
        )
DELETE
FROM    q
OUTPUT DELETED.* INTO TableNew 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T10:30:15.937

如果你愿意，你可以嵌套`delete`一个`select`查询`insert`：

```
declare @t1 table (Field1 int not null)
declare @t2 table (Field1 int not null)

insert into @t1 (Field1) select ROW_NUMBER() OVER (ORDER BY object_id) from sys.objects

;with First18 as (
    select top 18 * from @t1 order by Field1
)
insert into @t2 (Field1)
select * from 
    (
    delete from First18 output deleted.Field1) t 
```

# mysql - 如何在mysql中更改表中的名称

> ID：12932128
> 
> 赞同：0
> 
> 时间：2012-10-17T10:20:47.867
> 
> 标签：mysql, sql

我有一个叫做用户的表。它包含像这样的名字

```
 user
   xyz.abc
   123.abc
   atr.abc
   etc..... 
```

我需要一个查询，以便输出不应包含点（。）之后的名称

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T10:24:31.030

您可以使用[SUBSTRING_INDEX](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_substring-index)

```
SELECT SUBSTRING_INDEX(name, '.', 1) from USER; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T10:23:43.827

```
select rtrim(username,'.') from user 
```

# android - 上传图片到服务器

> ID：12932133
> 
> 赞同：1
> 
> 时间：2012-10-17T10:21:12.753
> 
> 标签：android

将图像上传到服务器的代码：此处的完整代码

```
static{
    httpclient=new DefaultHttpClient();
    httpPost=new HttpPost(serverUrl);
}

public String uploadImage(String imageFileURL){

    Bitmap bitmap=BitmapFactory.decodeFile(imageFileURL);
    ByteArrayOutputStream baos=new ByteArrayOutputStream();
    bitmap.compress(Bitmap.CompressFormat.JPEG, 90, baos);
    byte []ba=baos.toByteArray();
    String bal=Base64.encodeBytes(ba);
    ArrayList<NameValuePair> nameValuePair=new ArrayList<NameValuePair>();
    nameValuePair.add(new BasicNameValuePair("image",bal));
     String res = "";
     StringBuffer buffer = new StringBuffer();
    try {
        httpPost.setEntity(new UrlEncodedFormEntity(nameValuePair));
        httpresponse=httpclient.execute(httpPost);
        httpEntity=httpresponse.getEntity();
        inputStream=httpresponse.getEntity().getContent();

        int contentLength=(int) httpresponse.getEntity().getContentLength();
        if(contentLength<0){

        }
        else{
            byte []data =new byte[512];
            int len=0;
            try{
                while(-1 !=(len=inputStream.read(data))){
                    buffer.append(new String(data,0,len));
                }

            }
            catch(IOException e){
                e.printStackTrace();
                return null;
            }
        }

    } catch (UnsupportedEncodingException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (ClientProtocolException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    finally{
        try {
            inputStream.close();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }
    res=buffer.toString();
    return res; 
} 
```

正在调用此方法

```
 onClick(View view){
    new Thread(new Runnable(){

        public void run() {
            // TODO Auto-generated method stub
            response=new ServerCommunication().uploadImage(path);
        }           
    }).start(); 
```

但它显示为`TimeOutException`。谁能告诉我我做错了什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T11:11:26.553

添加此代码以删除超时异常：

```
final int TIMEOUT_MILLISEC = 20000;
HttpParams httpParams = new BasicHttpParams();
HttpConnectionParams.setConnectionTimeout(httpParams,TIMEOUT_MILLISEC);
HttpConnectionParams.setSoTimeout(httpParams, TIMEOUT_MILLISEC); 
```

# grails - 如何避免客户端防火墙关闭连接，因为在 Grails 上处理数据时不活动

> ID：12932136
> 
> 赞同：1
> 
> 时间：2012-10-17T10:21:17.510
> 
> 标签：grails, firewall, keep-alive, user-inactivity

我有一个 Grails 在 Tomcat 上的服务器上工作。这个应用程序是一个从 MySQL 服务器导出信息的 Web 界面。可以根据您所做的选择导出此信息，但需要一些时间。最大的部分或过程大约是 40 分钟。这是它需要从数据库中导出所有信息并压缩在一个 zip 文件中返回给用户的时间。

一切正常，但我们遇到了一位客户的问题。他们安装了某种代理，并且在 3 分钟不活动后关闭与服务器的连接，并且他无法导出任何内容，因为他可以选择导出的所有组合都需要更长的时间。

客户端，即 GSP 页面，在服务器端计算和创建压缩文件时不做任何事情，只是等待。我能做些什么来避免这种连接关闭？

这是接收客户端的消息：

> 网络错误 (tcp_error) 发生通信错误："" 详细技术信息：URL：***** ***** 代理：fe0psg03 客户端地址：10.2.122.105 时间：[15/10/2012:15:41:40 GMT] 用户：DE \roklinne Web 服务器可能已关闭、太忙或遇到其他问题，使其无法响应请求。您可能希望稍后再试一次。

预先感谢您的支持，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T14:05:11.513

因为这个过程最多需要 40 分钟。我会考虑分拆一个任务并在后台运行它。

几个建议...

1) 只使用 Java 5 并发类（额外的工作很少）

2) JSR-166y 库为您提供方便的 Fork/Join 和并行数组抽象。

3) 后台线程 Grails 插件

在此之后，您可以有一个进度条，并为用户提供有关事情进展的最新信息。

# uiactionsheet - UIActionsheet 怎么会这样？

> ID：12932142
> 
> 赞同：0
> 
> 时间：2012-10-17T10:21:42.423
> 
> 标签：uiactionsheet

![在此处输入图像描述](../Images/6053c84faaa6622fd5d3dd55c81e0670.png) 有谁知道这是什么问题？

![在此处输入图像描述](../Images/be91470ceeea6c7f0517816305bf6994.png) 正常的一个：

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T15:09:19.517

像第一个屏幕一样的 UiActionSheet 来了，然后您的按钮数超过 7 个。在您的第二个屏幕上添加一些按钮，您就有了像第一个屏幕一样的 UiActionScreen。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-19T23:17:24.123

`UIActionSheet`如果您提供的按钮数量不适合您提供的区域，将允许按钮滚动。

# c# - 如何更改 WSDL 客户端的预期内容类型？

> ID：12932149
> 
> 赞同：3
> 
> 时间：2012-10-17T10:22:18.833
> 
> 标签：c#, .net, web-services, wsdl

我已经导入了一个在线服务，它是 WSDL。

调用服务方法时，出现以下异常：

> System.ServiceModel.ProtocolException：内容类型 text/xml；响应消息的 charset=ISO-8859-1 与绑定的内容类型不匹配 (text/xml; charset=utf-8)。如果使用自定义编码器，请确保正确实现 IsContentTypeSupported 方法。响应的前 617 个字节是 < ?xml version="1.0" encoding="ISO-8859-1"?>< SOAP-ENV:Envelope SOAP-...

我相信这意味着我的客户希望服务以 UTF-8 编码返回数据，而服务以 ISO-8859-1 形式返回数据。有没有办法让我改变客户的预期内容类型以匹配服务之一？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-21T13:20:46.930

如果您的客户端是 .net，您可以按此处所示进行设置

这就是你在代码中的做法

```
wsHttpBinding.TextEncoding = Encoding.UTF8; 
```

[https://stackoverflow.com/a/8925516/57883](https://stackoverflow.com/a/8925516/57883)

让我看看我是否可以找到直接在配置文件中设置它的示例。

啊这里是问题是一个样本

[WCF：如何在客户端使用客户端代理和配置文件？](https://stackoverflow.com/q/12293833/57883)

# android - android应用结构的推荐/建议

> ID：12932155
> 
> 赞同：1
> 
> 时间：2012-10-17T10:22:33.873
> 
> 标签：android

我需要一个建议。我正在创建一个具有多个列表活动的 android 应用程序。从列表中选择项目，导致另一个列表，并在从第二个列表中选择项目时，显示图像。所有数据（列表和图像）都来自网络服务器。我在 PHP 中创建了服务来将数据提供给 android 应用程序。我想尽可能地优化应用程序。我的问题是，更好的是，一次从服务器获取所有数据，或者在用户选择一个项目时只获取相关数据。

第一种方法（我能想到的）的优点是用户只需要第一次等待。加载数据后，应用程序将运行得更快，因为不会再调用服务器。负面的一点（我能想到的）是应用程序会消耗更多的内存。

为了使应用程序更高效和用户友好，我应该遵循哪种方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T10:27:30.300

根据我的建议，不要采用第一种方法（一次获取数据），因为假设您现在有少量数据，但如果您考虑未来，那么这会给您带来问题。因此，与其一次获取所有数据，不如在必要时进行。您还可以使用延迟加载的概念，以便您获得良好的结果。懒惰地获取数据将是这样做的好方法。

对于延迟加载，这里有一些资源：-

[Android：为 Android Market 等 Endless List 实现进度条和“正在加载...”](https://stackoverflow.com/questions/4667064/android-implementing-endless-list-like-android-market)

[ListView 中图像的延迟加载](https://stackoverflow.com/questions/541966/android-how-do-i-do-a-lazy-load-of-images-in-listview)

[在 Android 中的 Listview 上延迟加载图像（初级）？](https://stackoverflow.com/questions/2912054/lazy-load-images-on-listview-in-androidbeginner-level)

所以我建议你在你的需求中使用 LazyLoading 概念。希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T10:29:25.607

您应该观看 Reto Meier 的 Google IO 2012 演讲 - [https://www.youtube.com/watch?v=PwC1OlJo5VM](https://www.youtube.com/watch?v=PwC1OlJo5VM)。

在其中，他谈到了移动无线电，并解释了为什么一次获取所有数据会更好地延长电池寿命。这是一个很棒的演讲，值得一试。

除非您的列表视图中有大量数据，否则内存应该不是什么大问题。

# android - 为什么android源码中有这么多与框架相关的git项目？

> ID：12932159
> 
> 赞同：0
> 
> 时间：2012-10-17T10:22:47.403
> 
> 标签：android, android-source, android-framework

![在此处输入图像描述](../Images/6e089130bb893bec204e9d14487716d5.png)

您可以通过链接[https://android.googlesource.com/?format=HTML获取此列表](https://android.googlesource.com/?format=HTML)

那么这些项目之间有什么关系呢？

**编辑 1**：

根据[如何理解android根树的目录结构？](https://stackoverflow.com/questions/9046572/how-to-understand-the-directory-structure-of-android-root-tree)， 我们知道

> Frameworks - 这个文件夹对 Android 来说是必不可少的，因为它包含框架的源代码。在这里，您将找到关键服务的实现，例如带有包和活动管理器的系统服务器。Java 应用程序 API 和本机库之间的很多映射也是在这里完成的。

但是仍然不知道 mff ， ml 等是什么，也许它们与 JNI 有关，但它到底是什么？有什么文件可以说明这个细节吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T10:34:18.803

整个[AOSP 源代码](http://source.android.com)由一堆**git**存储库组成，这些存储库组合在一起并使用**repo**工具进行管理。在每个都有自己的存储库的意义上，所有模块都是独立的模块。它们中的每一个都以相对有序的方式获取和存储。这是由**repo管理的，它是一个构建在****git**之上的工具。这是您`repo sync`系统上的 a 之后的 android 源目录。

更多关于**[git、repo 和 AOSP](http://source.android.com/source/version-control.html)**的信息。

* * *

**更新（有问题的edit1）：**

请耐心等待并检查 git 日志。例如，**[`git log`of frameworks/ml](https://android.googlesource.com/platform/frameworks/ml/+/6b4eebc73439cbc3ddfb547444a341d1f9be7996)**告诉我它与机器学习有关，并且基于 google-mca 项目（不管是什么）。

由于目录结构变化非常频繁，个别项目进出 AOSP 也相当频繁，因此很难从顶层找到 AOSP 树的最新描述。而是要理解它只是一组单独的项目组合在一起（以良好而有序的方式工作）并参考每个单独的文档（git log、代码、父项目）。

# android - Zxing 应用程序和 SQLite 数据库

> ID：12932161
> 
> 赞同：-1
> 
> 时间：2012-10-17T10:22:58.637
> 
> 标签：android

我按照在线教程，使用ZXing库创建了一个用于扫描条形码和二维码的应用程序，并将所有信息存储在数据库中。我一步一步地做，但我的代码中有一些东西。数据不能存储在数据库中，并保持关闭

调用spot_pay.java

```
package com.example.zxing_android_products;

import java.math.BigDecimal;

import android.os.Bundle;
import android.app.Activity;
import android.content.Intent;
import android.view.Menu;
import android.view.MenuItem;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.support.v4.app.NavUtils;

public class Calledspot_pay extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_calledspot_pay);
        Button addButton=(Button)findViewById(R.id.addMenuButton);
        addButton.setOnClickListener (new OnClickListener(){
            public void onClick (View v){
                startActivity(new Intent(Calledspot_pay .this, AddProduct.class));
            }
            });
    }  

    static final class ProductData {
        String barcode;
        String format;
        String title;
        BigDecimal price;
    }

} 
```

产品数据库.java

```
package com.example.zxing_android_products;

import java.math.BigDecimal;

import com.example.zxing_android_products.Calledspot_pay.ProductData;

import android.content.ContentValues;
import android.content.Context;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteDatabase.CursorFactory;
import android.database.sqlite.SQLiteOpenHelper;
import android.util.Log;

public class ProductDatabase {
  private static final String PRODUCT_TABLE="products";
  private static final String DATABASE_NAME="spot_pay.db";
  private static final int DATABASE_VERSION=1;
private static final BigDecimal ONE_HUNDRED = null;

  private SQLiteDatabase db;

  private static class ProductDatabaseHelper extends SQLiteOpenHelper {

        private static final String TAG = null;

        public ProductDatabaseHelper(Context context) {
            super(context, DATABASE_NAME, null, DATABASE_VERSION);
            // TODO Auto-generated constructor stub
        }

        @Override
        public void onCreate(SQLiteDatabase db) {            
               StringBuilder sql = new StringBuilder();

                sql.append("create table ").append(PRODUCT_TABLE)
                    .append("(  ")
                    .append("   _id integer primary key,")
                    .append("   barcode text,")
                    .append("   format text,")
                    .append("   title text,")
                    .append("   price currency")
                    .append(")  ");

                db.execSQL(sql.toString());    

                Log.d(TAG, PRODUCT_TABLE + "table created");       
        }

        @Override
        public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {            
            db.execSQL("drop table if exists " + PRODUCT_TABLE);                    
            onCreate(db);
        }

      }

  public ProductDatabase(Context context) {
        ProductDatabaseHelper helper = new ProductDatabaseHelper(context);
        db = helper.getWritableDatabase();
    }

  public boolean insert(ProductData product) {
        ContentValues vals = new ContentValues();
        vals.put("barcode", product.barcode);
        vals.put("format", product.format);
        vals.put("title", product.title);
        vals.put("price", product.price.multiply(ONE_HUNDRED).longValue());

        return db.insert(PRODUCT_TABLE, null, vals) != -1;
    }
} 
```

添加产品.java

```
package com.example.zxing_android_products;

import java.math.BigDecimal;

import com.example.zxing_android_products.Calledspot_pay.ProductData;

import android.app.Activity;
import android.app.AlertDialog;
import android.content.Context;
import android.content.DialogInterface;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;

public class AddProduct extends Activity  implements OnClickListener{
    private static final int REQUEST_BARCODE=0;
    private static final ProductData mProductData=new ProductData();
    EditText mBarcodeEdit;
    EditText mFormatEdit;
    EditText mTitleEdit;
      EditText mPriceEdit;
      private Button mScanButton;
        private Button mAddButton;
    //private ProductDatabase mProductDb;
     ProductDatabase mProductDb;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.add_product);

        mBarcodeEdit = (EditText) findViewById(R.id.barcodeEdit);
        mFormatEdit = (EditText) findViewById(R.id.codeFormatEdit);
        mTitleEdit = (EditText) findViewById(R.id.titleEdit);
        mPriceEdit = (EditText) findViewById(R.id.priceEdit);
        mScanButton = (Button) findViewById(R.id.scanButton);
        mScanButton.setOnClickListener(this);
        mAddButton = (Button) findViewById(R.id.addButton);
        mAddButton.setOnClickListener(this);
         mProductDb = new ProductDatabase(this); // not yet shown

}
    public void onClick(View v) {
    // TODO Auto-generated method stub
           switch (v.getId()) {
            case R.id.scanButton:
                Intent intent = new Intent("com.google.zxing.client.android.SCAN");
                intent.putExtra("SCAN_MODE", "PRODUCT_MODE");
                startActivityForResult(intent, REQUEST_BARCODE);
                break;

            case R.id.addButton:
                String barcode = mBarcodeEdit.getText().toString();
                String format = mFormatEdit.getText().toString();
                String title = mTitleEdit.getText().toString();
                String price = mPriceEdit.getText().toString();

                String errors = validateFields(barcode, format, title, price);
                if (errors.length() > 0) {
                    showInfoDialog(this, "Please fix errors", errors);
                } else {
                    mProductData.barcode = barcode;
                    mProductData.format = format;
                    mProductData.title = title;
                    mProductData.price = new BigDecimal(price);

              mProductDb.insert(mProductData);
                    showInfoDialog(this, "Success", "Product saved successfully");
                    resetForm();
                }
                break;
            }   
        }

    private void showInfoDialog(Context context, String title, String information) {
        new AlertDialog.Builder (context)
        .setMessage(information)
        .setTitle(title)
        .setPositiveButton("OK", new DialogInterface.OnClickListener() {

            public void onClick(DialogInterface dialog, int which) {
                dialog.dismiss();

            }
        }).show();  
    }
private void resetForm() {
    // TODO Auto-generated method stub
      mBarcodeEdit.getText().clear();
      mFormatEdit.getText().clear();
      mTitleEdit.getText().clear();
      mPriceEdit.getText().clear();
}

public void onActivityResult(int requestCode, int resultCode, Intent intent) {
    if (requestCode == REQUEST_BARCODE) {
        if (resultCode == RESULT_OK) {
            String barcode = intent.getStringExtra("SCAN_RESULT");
            mBarcodeEdit.setText(barcode);

            String format = intent.getStringExtra("SCAN_RESULT_FORMAT");
            mFormatEdit.setText(format);
        } else if (resultCode == RESULT_CANCELED) {
            finish();
        }
    }
}

private static String validateFields(String barcode, String format, 
        String title, String price) {
        StringBuilder errors = new StringBuilder();

        if (barcode.matches("^\\s*$")) {
            errors.append("Barcode required\n");
        }

        if (format.matches("^\\s*$")) {
            errors.append("Format required\n");
        }

        if (title.matches("^\\s*$")) {
            errors.append("Title required\n");
        }

        if (!price.matches("^-?\\d+(.\\d+)?$")) {
            errors.append("Need numeric price\n");
        }

        return errors.toString();
    }
} 
```

有人有什么错误吗？

```
10-17 10:21:37.746: D/AndroidRuntime(18643): Shutting down VM
10-17 10:21:37.746: W/dalvikvm(18643): threadid=3: thread exiting with uncaught exception (group=0x4001b188)
10-17 10:21:37.746: E/AndroidRuntime(18643): Uncaught handler: thread main exiting due to uncaught exception
10-17 10:21:37.767: E/AndroidRuntime(18643): java.lang.NullPointerException
10-17 10:21:37.767: E/AndroidRuntime(18643):    at java.math.BigDecimal.multiply(BigDecimal.java:1025)
10-17 10:21:37.767: E/AndroidRuntime(18643):    at com.example.zxing_android_products.ProductDatabase.insert(ProductDatabase.java:69)
10-17 10:21:37.767: E/AndroidRuntime(18643):    at com.example.zxing_android_products.AddProduct.onClick(AddProduct.java:74)
10-17 10:21:37.767: E/AndroidRuntime(18643):    at android.view.View.performClick(View.java:2364)
10-17 10:21:37.767: E/AndroidRuntime(18643):    at android.view.View.onTouchEvent(View.java:4179)
10-17 10:21:37.767: E/AndroidRuntime(18643):    at android.widget.TextView.onTouchEvent(TextView.java:6541)
10-17 10:21:37.767: E/AndroidRuntime(18643):    at android.view.View.dispatchTouchEvent(View.java:3709)
10-17 10:21:37.767: E/AndroidRuntime(18643):    at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:884)
10-17 10:21:37.767: E/AndroidRuntime(18643):    at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:884)
10-17 10:21:37.767: E/AndroidRuntime(18643):    at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:884)
10-17 10:21:37.767: E/AndroidRuntime(18643):    at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:884)
10-17 10:21:37.767: E/AndroidRuntime(18643):    at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:884)
10-17 10:21:37.767: E/AndroidRuntime(18643):    at com.android.internal.policy.impl.PhoneWindow$DecorView.superDispatchTouchEvent(PhoneWindow.java:1659)
10-17 10:21:37.767: E/AndroidRuntime(18643):    at com.android.internal.policy.impl.PhoneWindow.superDispatchTouchEvent(PhoneWindow.java:1107)
10-17 10:21:37.767: E/AndroidRuntime(18643):    at android.app.Activity.dispatchTouchEvent(Activity.java:2061)
10-17 10:21:37.767: E/AndroidRuntime(18643):    at com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchTouchEvent(PhoneWindow.java:1643)
10-17 10:21:37.767: E/AndroidRuntime(18643):    at android.view.ViewRoot.handleMessage(ViewRoot.java:1691)
10-17 10:21:37.767: E/AndroidRuntime(18643):    at android.os.Handler.dispatchMessage(Handler.java:99)
10-17 10:21:37.767: E/AndroidRuntime(18643):    at android.os.Looper.loop(Looper.java:123)
10-17 10:21:37.767: E/AndroidRuntime(18643):    at android.app.ActivityThread.main(ActivityThread.java:4363)
10-17 10:21:37.767: E/AndroidRuntime(18643):    at java.lang.reflect.Method.invokeNative(Native Method)
10-17 10:21:37.767: E/AndroidRuntime(18643):    at java.lang.reflect.Method.invoke(Method.java:521)
10-17 10:21:37.767: E/AndroidRuntime(18643):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860)
10-17 10:21:37.767: E/AndroidRuntime(18643):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618)
10-17 10:21:37.767: E/AndroidRuntime(18643):    at dalvik.system.NativeStart.main(Native Method)
10-17 10:21:37.776: I/dalvikvm(18643): threadid=7: reacting to signal 3
10-17 10:21:37.776: E/dalvikvm(18643): Unable to open stack trace file '/data/anr/traces.txt': Permission denied
10-17 10:21:39.636: I/Process(18643): Sending signal. PID: 18643 SIG: 9 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T10:35:47.257

你的`ONE_HUNDRED`变量为空。

```
private static final BigDecimal ONE_HUNDRED = null; 
```

你可以试试：

```
private static final BigDecimal ONE_HUNDRED = new BigDecimal(100); 
```

# nginx - 如何检查 php fpm 正在做什么？

> ID：12932165
> 
> 赞同：1
> 
> 时间：2012-10-17T10:23:06.460
> 
> 标签：nginx, php

我们在 nginx 上设置了 php-fpm，就最终用户体验而言一切正常，我们在前面使用了 varnish，所以通常 varnish 后端的负载很低。

但是有时当我们运行 top 时，我们会看到 php-fpm 进程正在消耗内存，特别是在 varnish 重新启动后。

现在我想做的是查看 php-fpm 正在运行的 php 的哪个部分，无论如何，是否可以准确监控 php-fpm 在那一刻正在做什么？

监控工具列表可能有用

干杯！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T04:11:38.467

@mursalat - 你可以做很多事情来看看当时发生了什么。当时 php-fpm 产生了多少个进程？这可能与您的设置有关。

通过检查日志内容来检查正在发生的事情的一种方法：

```
/var/log/php5-fpm.log 
```

我们使用的另一个很棒的工具是[NewRelic。](http://newrelic.com)在调试可能遇到的问题时，您应该能够获得免费试用。

最后但同样重要的是，您确定这不是正常行为吗？php-fpm 实际使用了多少内存？

# java - 算法“带有 MD5 和 256 位 AES-CBC-OPENSSL 的 PBE”的 java.security.NoSuchAlgorithmException

> ID：12932167
> 
> 赞同：1
> 
> 时间：2012-10-17T10:23:23.387
> 
> 标签：java, android, cryptography

我正在使用以下代码片段来获取指定算法的工厂实例。但它正在抛出一个`java.security.NoSuchAlgorithmException`. 我在 jre1.6 的 java 项目中使用它。

它需要任何外部库（jar）吗？当我在我的 Android 应用程序中尝试使用相同的代码时，它运行良好。

```
try {
    SecretKeyFactory factory = SecretKeyFactory.getInstance("PBEWITHMD5AND256BITAES-CBC-OPENSSL");
} catch (Exception e) {
    e.printStackTrace();
} 
```

* * *

```
Provider[] providers = Security.getProviders();
if (null == providers) {
    System.out.println("Providers are not available.");
    return;
}

for (Provider provider : providers) {
    System.out.println("Provider: " + provider.getName());
    Set<Provider.Service> services = provider.getServices();
    for (Provider.Service service : services) {
        System.out.println("\tAlgorithm: " + service.getAlgorithm());
    }
}

try {
    SecretKeyFactory factory = SecretKeyFactory.getInstance(providers[0].getServices().iterator().next().getAlgorithm());
    if (null == factory) {
        System.out.println("Getting instance of specified algorithm failed.");
    } else {
        System.out.println("Success.");
    }
} catch (Exception e) {
    e.printStackTrace();
} 
```

以上是编辑过的代码，并引发以下异常：

```
java.security.NoSuchAlgorithmException: SHA1PRNG SecretKeyFactory not available
    at javax.crypto.SecretKeyFactory.<init>(DashoA13*..)
    at javax.crypto.SecretKeyFactory.getInstance(DashoA13*..) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T01:24:47.493

`"PBEWITHMD5AND256BITAES-CBC-OPENSSL"`是[Bouncy Castle](http://www.bouncycastle.org)提供程序的一部分，您可能必须下载该库才能在 Java SE 上使用它。不要忘记也下载[无限强度管辖政策文件](http://www.oracle.com/technetwork/java/javase/downloads/jce-7-download-432124.html)。

至于第二个例外，如果你只问第一个提供者的第一个服务的算法，你会得到一个只对特定**类型**有效的算法。在这种情况下，它只能用于`SecureRandom`，而不是用于替换`SecretKeyFactory`为 时会发现的情况。`.getAlgorithm()``.getType()`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T13:20:44.530

根据以下文档`SecretKeyFactory.getInstance(String algorithm)`：

> `algorithm`- 请求的密钥算法的标准名称。请参阅 Java Cryptography Architecture Reference Guide 中的附录 A。

因此，`SecretKeyFactory.getInstance("SHA1PRNG")`根据该文档，调用无效时，您应该期望并出错。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-12-28T09:51:56.140

执行此处的步骤。我做到了，结果是成功的。

步骤 1\. 为您的 JDK 或 JRE 下载 Bouncy Castle 提供程序（JDK 1.6 的 bcprov-jdk16-146.jar）；

步骤 2\. 将提供程序 .jar 文件复制到 Java 运行时 (JRE) 扩展子文件夹；对于 Windows 机器，JRE 1.6（如果存在）通常安装在：例如：C:\Program Files\Java\jre6\lib\ext C:\Program Files\Java\jdk1.6.0_16\jre\lib\ext

步骤 3\. 将 Bouncy Castle 提供程序添加到 java.security 文件以启用它；该文件位于 JRE 位置的 \lib\security\ 子文件夹中（注意！两个位置 - 独立 JRE 和 JDK 中的一个）；编辑文件并添加语句

security.provider.N=org.bouncycastle.jce.provider.BouncyCastleProvider 注意：N 必须是序列中的下一个数字。

访问 --> [http://www.itcsolutions.eu/2011/08/22/how-to-use-bouncy-castle-cryptographic-api-in-netbeans-or-eclipse-for-java-jse-projects/](http://www.itcsolutions.eu/2011/08/22/how-to-use-bouncy-castle-cryptographic-api-in-netbeans-or-eclipse-for-java-jse-projects/)

# mysql - 如何更改表列数据类型

> ID：12932168
> 
> 赞同：12
> 
> 时间：2012-10-17T10:23:30.597
> 
> 标签：mysql

我有以下专栏

```
hits text NOT NULL 
```

并想将其更改为

```
hits bigint(20) unsigned NOT NULL default '0' 
```

如何使用 ALTER TABLE 命令进行此更改！~ 谢谢

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-10-17T10:26:23.977

```
ALTER TABLE table_name MODIFY hits bigint(20) unsigned NOT NULL default '0'; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-17T10:26:29.317

尝试[改变表](http://dev.mysql.com/doc/refman/5.5/en/alter-table.html)语法：

```
ALTER TABLE tbl_name
MODIFY [COLUMN] col_name column_definition
    [FIRST | AFTER col_name] 
```

所以你的查询应该是：

```
ALTER TABLE tbl_name
MODIFY hits bigint(20) unsigned NOT NULL default '0'; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-17T10:29:48.530

尝试阅读[更改表语法](http://dev.mysql.com/doc/refman/5.1/en/alter-table.html)

```
alter table YourTableName 
change column hits hits bigint(20) unsigned NOT NULL default '0'; 
```

# java - 使用 java 反射获取属性/字段？

> ID：12932173
> 
> 赞同：-1
> 
> 时间：2012-10-17T10:23:42.717
> 
> 标签：java, reflection

我有一个具有以下 6 个属性的 POJO。我只需要使用反射获得 5 个字段名称。

```
class Employee {

private Long id;
private String address;
private String phone;
private String firstName;
private String lastName;
private String designation;

//getters and setters

} 
```

但我只想使用java反射getFields（）获得5个字段名，除了'phone'。我怎样才能得到字段名称？是否可以从 pojo 中仅获取特定字段名称而不是所有字段名称？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T10:29:43.090

不，没有“获取所有字段除外”的 API。

只需获取所有字段并测试您不想要的字段名称并在处理中跳过它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T10:26:23.590

您可以将字段名称传递给`getField()`方法：-

```
Class<Employee> aClass = Employee.class
Field field = aClass.getField("address");  // For public fields 
```

但这只会吸引你`public fields`。

您可以`private fields`通过使用`getDeclaredField("fieldName")`：

```
Field f = aClass.getDeclaredField("address"); //For all fields(Including private) 
```

**更新**： -

如果您没有字段名称，则必须遍历所有字段并通过 using`Field.getName()`方法手动使用字段名称过滤数组。没有其他出路：-

```
for(Field field: aClass.getDeclaredFields()) {
    if (!field.getName().equals("phone")) {
        // Process it
    }
} 
```

# c - C为不同的字符串获取相等的哈希值openssl

> ID：12932175
> 
> 赞同：0
> 
> 时间：2012-10-17T10:23:44.220
> 
> 标签：c, openssl, md5

我对c很陌生。我正在尝试将两个文件与 md5 进行比较。我写了一个应该返回哈希值的函数。但是当比较不同文件或缓冲区的值时，它说它们具有相同的哈希值。

```
unsigned char* getMD5(void *buffer, size_t bsize) {
    EVP_MD_CTX *mdctx;
    const EVP_MD *md;
    unsigned char hashwert[EVP_MAX_MD_SIZE];
    int hashwert_laenge;
    OpenSSL_add_all_digests();
    md = EVP_get_digestbyname("MD5");
    mdctx = EVP_MD_CTX_create();
    EVP_DigestInit_ex(mdctx, md, NULL);
    EVP_DigestUpdate(mdctx, buffer, bsize);
    EVP_DigestFinal_ex(mdctx, hashwert, &hashwert_laenge);
    EVP_MD_CTX_destroy(mdctx);
    return hashwert;
}

//in main...
char mess[] = "abc";
cahr mess2[] = "bcd";
if(strcmp(getMD5(mess, strlen(mess)),getMD5(mess2, strlen(mess2))==0) {
   printf("euqal\n");
}else {
   printf("not equal \n"); 
} 
```

我总是知道缓冲区是相等的，即使它们不是。问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T10:29:33.940

您应该在启用所有警告和调试信息的情况下进行编译，例如`gcc -Wall -g`在 Linux 上使用。

它会警告你：*函数返回局部变量的地址*。

^(新手和专家 C 程序员通常应该改进他们的代码，直到没有给出警告。如果您的代码触发了您确实无法避免的警告，您至少应该非常仔细地评论原因。)

您无法有意义地返回某个本地数组的地址。

您可以`return strdup(hashwert);`并且约定调用函数（调用者）应该`free`得到结果。

或者你可以有一个不同的 API，例如`hashwert`你的函数的一个参数。

# objective-c - 恢复以前删除的 NSView

> ID：12932180
> 
> 赞同：0
> 
> 时间：2012-10-17T10:24:00.830
> 
> 标签：objective-c, macos, cocoa

我有一个`NSWindowController`包含根视图。根视图有 4 `NSButtons`，一些文本和图像。每个按钮都绑定到一个`NSViewController`. 当我单击其中一个按钮时，会删除根视图并显示绑定到`NSViewController`（我们称其为子视图）的视图。在子视图中，有一个`NSButton`向窗口控制器发送通知以恢复根视图。这是我的代码（我删除了大部分无用的部分）

*   窗口控制器.h

    ```
    @interface MainWindowController : NSWindowController {

    IBOutlet NSView*    myTargetView; // bound to the whole view of the window
    NSView*             viewRoot;
    NSViewController*   myCurrentViewController;
    }

    - (IBAction)buttonClicked:(id)sender; // Not shown in the implementation
    - (void)changeViewController:(NSInteger)buttonTag;
    - (void)restoreRootView;

    @end 
    ```

*   窗口控制器.m

    ```
    - initWithPath:(NSString *)newPath
    {
      return [super initWithWindowNibName:@"MainWindow"];
    }

    - (void)windowDidLoad {

       vwRoot = [[[[self window] contentView] subviews] objectAtIndex:0];

        // set up notification observer, will call restoreRootView when receiving notification from NSViewController object
    }

    - (void)changeViewController:(NSInteger)buttonTag
    {

      [vwRoot retain];

      [vwRoot removeFromSuperview];

      if (myCurrentViewController != nil)
      [myCurrentViewController release];

     switch (buttonTag)

           {
            case kView1:
              {
                   View1Controller * viewOneController = [[View1Controller alloc]         initWithNibName:kViewOneTile bundle:nil];

            if (viewOneController != nil) {

                   myCurrentViewController = viewOneController;
                }

            break;
          }

          case kView2:
           {

               // and so on...  

           }
       }

       [myTargetView addSubview: [myCurrentViewController view]];

       [[myCurrentViewController view] setFrame: [myTargetView bounds]];

     }

    - (void)restoreRootView {

       [[myCurrentViewController view] removeFromSuperview];

        [myTargetView addSubview:vwRoot];

       [[vwRoot setFrame:[myTargetView bounds]];
     } 
    ```

不幸的是，当`restoreRootView`被调用时，`NSViewController`的视图被删除，但根视图不显示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T13:36:40.567

我重新创建了您的代码，假设它与 WindowController.h`vwRoot`中声明的相同`viewRoot`，并且所有内容都正确绑定且非零；我使用了一个文本视图作为目标视图、两个按钮，并在它被另一个视图（由控制器拥有）替换时保留了它的引用。

我遇到了同样的问题**，但只有 autolayout**。当我禁用自动布局时，代码开始完美运行。

问题出在约束中：当`vwRoot`删除时，定义其位置的约束`myTargetView`被删除。您必须再次定义它们，否则您的视图将被放置在可见区域之外的某个位置（在我的情况下，左上角位于窗口的左下角：所以，什么都看不见）。

添加约束的代码（不需要设置框架）：

```
[myTargetView addSubview:vwRoot];
[vwRoot removeConstraints:vwRoot.constraints]; // eventually remove old w/h constraints

// snap to left and right border
[myTargetView addConstraints:[NSLayoutConstraint constraintsWithVisualFormat:@"H:|-0-[vwRoot]-0-|"
                                                                     options:0
                                                                     metrics:nil
                                                                       views:NSDictionaryOfVariableBindings(vwRoot)]];

// snap to top and bottom border
[myTargetView addConstraints:[NSLayoutConstraint constraintsWithVisualFormat:@"V:|-0-[vwRoot]-0-|"
                                                                     options:0
                                                                     metrics:nil
                                                                       views:NSDictionaryOfVariableBindings(vwRoot)]]; 
```

这同样适用于`- (void)changeViewController:(NSInteger)buttonTag`：当你添加时`myCurrentViewController.view`，不应该有任何约​​束，所以除非你有一些代码来解决这个问题，否则当你调整窗口大小时，你的内容视图不应该跟随。

# liferay - 如何添加css来改变liferay基本视图？

> ID：12932183
> 
> 赞同：0
> 
> 时间：2012-10-17T10:24:04.657
> 
> 标签：liferay, portlet, liferay-6

我想在我的 liferay 网站中使用一些自定义用户界面。我怎样才能使它成为可能

就像我想改变liferay的这一部分一样？

![在此处输入图像描述](../Images/eb10085a6e4faa9fc24c4e228e60bb6d.png)

我为此制作了一个 css 文件，但它只是覆盖了以下部分。

那么有什么方法可以用css编辑liferay的这一部分吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T10:37:14.683

正确的方法是创建一个主题，该主题将具有模板目录设置，将特定的 css 合并到系统所基于的 css。

[http://www.liferay.com/documentation/liferay-portal/6.0/development/-/ai/creating-a-theme](http://www.liferay.com/documentation/liferay-portal/6.0/development/-/ai/creating-a-theme)

或者，对于不经过完整主题开发过程的快速破解，您可以更改文件夹中的 css：

liferay-portal-6.1.10-ee-ga1\tomcat-7.0.25\webapps\ROOT\html\themes\classic\css

前提是您使用的是默认的经典主题。

这当然不是推荐的方式，但会起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T12:14:51.370

您在帖子中发布的屏幕截图将仅对管理员用户可见。只有您作为管理员才能在页面上看到此类控件。在您定义的角色下且无权编辑某些内容的最终用户将看不到页面的该部分。也就是说，您不必费心更改您放入 SS 的页面部分的颜色。您将不得不为下面的页面部分烦恼。这只能通过自定义主题开发来完成。创建自定义主题后，您需要在`custom.css`. 即使您想更改 Liferay 提供的默认主题的颜色，您也必须在 custom.css 文件中进行编辑。这是因为 custom.css 文件在最后被加载，它将覆盖其他作用的 css 文件。

# c# - 点击或点击 TextBox 时执行代码？

> ID：12932188
> 
> 赞同：8
> 
> 时间：2012-10-17T10:24:26.790
> 
> 标签：c#, textbox, windows-8, windows-runtime

我在我的文本框上尝试了这个事件处理程序：

```
private void TextBox_Tapped(object sender, Windows.UI.Xaml.Input.TappedRoutedEventArgs e)
{
    //do this
} 
```

我也试过`LayoutUpdated`, `SelectionChanged`, `PointerEntered`, `PointerReleased`. 一旦我单击该框，它们都不会执行代码。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-10-17T10:32:56.713

这是因为文本框的其他消息阻止在触发 Tapped 事件之前触发它。在您使用文本框的页面的构造函数中添加以下代码。点击事件将被触发。

```
textBox.AddHandler(TappedEvent, new TappedEventHandler(textBox_Tapped_1), true); 
```

请参考此链接：[TextBox Tapped event not being called in Windows 8 RC](http://social.msdn.microsoft.com/Forums/pl-PL/winappswithcsharp/thread/708c0949-8b06-40ec-85fd-201139ca8b2d)

# iphone - 指向外部对象的指针为零

> ID：12932198
> 
> 赞同：1
> 
> 时间：2012-10-17T10:24:57.600
> 
> 标签：iphone, objective-c, c

我有一个 C 文件和一个 Objective C 文件。
即，C 文件是 :`CB.m`并且`CB.h`
`CB.m`包含 ac 函数 : `callIncomings()`。这个函数必须是一个 C 函数，因为它是一个回调函数。*（其签名不能更改）*

目标 C 文件是`ViewController.h/.xib/.m`和`IncomingCall.h/.m/.xib`.

现在，我在 ViewController.h 中声明了以下内容

```
static ViewController* varViewController; 
```

在 中`viewDidLoad`，我分配：

```
varViewController = self; 
```

我有以下代码`CB.m`

```
#include <stdio.h>
#import "ViewController.h"
#import "IncomingCall.h"

int callIncomings(int a, char* b)
{

    IncomingCall *obj = [[IncomingCall alloc]initWithNibName:@"IncomingCall" bundle:nil];
    //NSString *temp =
    //NSString* string =
    obj.tempAddress = [NSString stringWithFormat:@"%s" , b];

    [obj setModalTransitionStyle:UIModalTransitionStylePartialCurl];
    [varViewController presentModalViewController:obj animated:YES];

    [obj release];

    return 1;
} 
```

此函数在以下位置调用：

```
- (IBAction)DemoCall:(id)sender {
    callIncomings(1, "from C file");    
} 
```

该项目构建良好，但视图`IncomingCall()`未显示。

任何想法为什么？

编辑：另外，我想知道，如果我想概括 C 函数并加载一些不同的视图，比如 ABCD.view 或 IncomingCall 视图，我该如何概括这个函数。

编辑 2：这个问题可以是从这里开始的连续性：[C 函数调用目标 C 函数](https://stackoverflow.com/q/12854195/1176432)

一些澄清：当我将 callIncoming 函数放在 viewcontroller.m 文件中时，它工作正常。但现在我想将它单独放在另一个文件中，因此放在 CB.m 文件中。
这样就回答了您对 varViewController 的疑问。DemoCall 函数在 ViewController 文件中，如果您注意到它是 IBAction，那么是的，IncomingCall 函数肯定会被调用。

输入：是的，就像有人指出的那样，它是真的， varViewController 似乎是 NULL。怎么办？？！！我哪里错了？？.![在此处输入图像描述](../Images/439f7db30d828a078c3e7216261f2674.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T11:07:16.973

问题在于以下声明：

```
static ViewController* varViewController; 
```

在`ViewController.h`.

`static`关键字意味着将在包含该头文件的每个源文件中本地创建变量（它具有内部链接）*。*因此`varViewController`， in 中使用的`CB.m`是一个**不同**的（未初始化的）指针，指向 .in 中的实际指针`ViewController.m`。

更正此错误：

```
extern ViewController* varViewController; 
```

（并确保它没有被定义为`static`within `ViewController.m`，否则你会遇到链接失败）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T10:29:51.407

编写以下代码...

```
#include <stdio.h>
#import "ViewController.h"
#import "IncomingCall.h"

static  int callIncomings(int a, char* b); 
```

# list - ANT：用逗号分隔文件夹列表

> ID：12932200
> 
> 赞同：1
> 
> 时间：2012-10-17T10:25:04.327
> 
> 标签：list, ant, directory

我有一个目录，里面有很多模块。

好像：

```
C: 

|--Project 

      |----files

            |----Modul1
                    |----FoldersinModuls
            |----Modul2
                    |----FoldersinModuls
            |----Modul3
                    |----FoldersinModuls
            |----Modul4
                    |----FoldersinModuls 
```

我需要这样的列表：Modul1,Modul2,Modul3,Modul4

但我唯一得到的是：`C:\Project\files\Modul1,C:\Project\files\Modul2,C:\Project\files\Modul3,C:\Project\files\Modul4`

```
<dirset id="list.moduls" dir="${basedir}" includes="*" excludes=".folder">
</dirset>
<pathconvert pathsep="," property="list.of.moduls" refid="list.moduls">
<mapper type="identity"/> 
</pathconvert>  
<echo message="${list.of.moduls}"/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T08:41:28.880

@Jayan 我通过评论回答了它，因为我不得不离开我的工作场所。

我终于用这个答案解决了它：

[替换 Ant 属性中的字符](https://stackoverflow.com/questions/1176071/replacing-characters-in-ant-property)

> 答案 --> 如果您想要一个仅使用 Ant 内置函数的解决方案，请考虑以下问题：

这是我发现唯一有效的方法。直接生成/替换（如我所想）是不可能的。

# hibernate - Hibernate：使用 HibernateTempate 进行内部连接映射和未映射表

> ID：12932207
> 
> 赞同：0
> 
> 时间：2012-10-17T10:25:46.447
> 
> 标签：hibernate, many-to-many

我有以下表格：

```
USER
    ID VARCHAR(32) INTEGER NOT NULL

ROLE
    ID INTEGER NOT NULL

USERROLE /*Many to Many*/
    USER_ID VARCHAR(32) NOT NULL
    ROLE_ID INTEGER NOT NULL 
```

我正在使用注释将数据库表映射到我的类。

```
/* Mapping for USER table */
@Entity
@Table (name="USER")
public class User{
    @Id
    @Column (name="ID")
    private String id;

    @ManyToMany 
    @JoinTable (name="USERROLE", joinColumns = {@JoinColumn (name="USER_ID")}, 
            inverseJoinColumns = {@JoinColumn (name="ROLE_ID")})
    @LazyCollection (LazyCollectionOption.FALSE)
    private List<Role> roles;
}

/* Mapping for ROLE table */
@Entity
@Table (name="ROLE")
public class Role {
    @Id
    @Column (name="ID")
    private int id;

} 
```

现在我想做一个连接 ROLE 和 USERROLE 表的查询，这样我就可以获得那些分配了用户的 ROLE。

- 编辑

我有 Role.id，我想检查 USERROLE 表中是否引用了此角色。在本机 SQL 中，我会这样做：

```
SELECT DISTINCT A.* from ROLE A INNER JOIN USERROLE B 
WHERE A.ID = B.ROLE_ID AND A.ID = ?; 
```

如何使用 HibernateTemplate 在休眠中做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T10:54:52.273

这很容易：

```
select role from User user inner join user.roles role where user.id = :userId 
```

甚至更简单，无需任何查询：

```
User user = (User) session.get(User.class, userId);
return user.getRoles(); 
```

编辑：要知道给定角色是否被至少一个用户引用，您可以使用以下查询，这与您的 SQL 查询非常相似：

```
select distinct role from User user 
inner join user.roles role 
where role.id = :roleId 
```

# perl - Perl 最大、最小、平均数使用子程序

> ID：12932208
> 
> 赞同：0
> 
> 时间：2012-10-17T10:25:48.677
> 
> 标签：perl

我在 Perl 中的问题：编写带有子例程的 Perl 脚本，该子例程接受值列表并将最大值、最小值和平均值返回给调用程序。

```
#!/usr/bin/perl

sub large_and_small {   
    my (@numbers);
    @numbers = @_;

    my ($small, $large);
    $large = $numbers[0];
    $small = $numbers[0];

    foreach my $i (@numbers) {

        if ($i > $large) {         

            $large = $i;  
        }        
        elsif ($i < $small) {

            $small = $i;  
        }
    }
    return ($small, $large);
}

sub avg {
    my ($avg);
    my ($total);

    foreach (@test_array) {

        $total += $_;
    }
    $avg = $total/scalar @test_array;
    return $avg;
}

my (@test_array, @ret);
@test_array = (15, 5, 7, 3, 9, 1, 20,1 3, 9, 8, 15, 16, 2, 6, 12, 90);
@ret = large_and_small(@test_array);
print "The Largest value is ", $ret[1], "\n";
print "The Smallest value is ", $ret[0], "\n";
print "The Average value is", avg(@test_array), "\n"; 
```

我得到的输出是：

```
The Largest value is 90
The Smallest value is 1
Illegal division by zero at /tmp/135044395416028.pl line 59. 
```

我在脚本中哪里出错了？请帮助。在此先感谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T10:40:37.273

我建议您使用 core module: `List::Util`，它具有您实现为 min、max、sum 的所有功能。

```
#!/usr/bin/perl

use strict;
use List::Util qw(min max sum);

my @test_array = (15, 5, 7, 3, 9, 1, 20, 13, 9, 8, 15, 16, 2, 6, 12, 90);
my $min = min(@test_array);
my $max = max(@test_array);
my $avg = scalar @test_array
        ? (sum(@test_array) / (scalar @test_array))
        : 0;

print "The Largest value is ", $max, "\n";
print "The Smallest value is ", $min, "\n";
print "The Average value is ", $avg, "\n"; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-17T10:33:24.390

您没有阅读`avg`. 添加

```
my @test_array = @_; 
```

您还可以保存一些变量并同时进行声明和赋值：

```
sub large_and_small {
    my @numbers = @_;
    my ($small, $large) = @numbers[0, 0];

    foreach my $n (@numbers) {
        if ($n > $large) {
            $large = $n;
        }
        elsif ($n < $small) {
            $small = $n;
        }
    }
    return ($small, $large);
}

sub avg {
    my @numbers = @_;
    return unless @numbers;  # Prevent Division by zero
    my $total;
    foreach (@numbers) {
        $total += $_;
    }
    return $total / @numbers;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T10:36:05.250

avg procedure 没有看到`@test_array`你认为它应该看到的。相反，它可能会看到空数组。

重写`avg`如下，它应该工作：

```
sub avg {
    my @test_array = @_;
    my ($avg);
    my ($total);
    # ...
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-17T10:34:04.607

测试数组在 main 中声明为词法，并直接在函数中使用。要么必须将其传递给函数，要么删除不建议的词法。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-10-17T10:33:37.990

看起来这里有除零

```
$avg = $total/scalar @test_array; 
```

你为什么要除以标量？

# sql - 标识列与主键

> ID：12932209
> 
> 赞同：4
> 
> 时间：2012-10-17T10:25:56.570
> 
> 标签：sql, sql-server-2008-r2, primary-key, identity

我们如何决定使用身份列或主键？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T10:28:05.780

这两个概念并不相互排斥。所有组合都是可能的：

*   一个身份列，它也是一个主键，
*   不是主键的标识列，
*   不是身份的主键列，
*   既不是主键也不是标识的列

请注意，标识列通常用作主键，因为它保证是唯一的，并且通常是必需的架构字段的补充，因此如果架构更改，它不会更改。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T10:30:43.937

当您需要自动增量时，您可以使用标识列。时期！就那么简单。通常，标识列是主键的良好候选者。

主键只是一个概念。主键背后的重要之处在于它在列上创建了一个 CLUSTERED INDEX，因此理论上，如果您有一个具有唯一聚集索引的表，则不需要“主键”。

我建议你谷歌并阅读这两个概念，这对理解非常重要

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-17T10:51:44.387

从经验而不是理论来看，我发现使用用户不共享的密钥作为“用户数据”很重要。也就是说，用户数据和键应该是不同的字段。

我们有一个使用项目代码的数据库。项目代码是唯一的，永远不会为空，并且具有一旦分配就永远不会更改的业务规则。这使它成为候选键。

但是，如果用户看到项目代码，按项目代码查找文件等等，这是他们的数据，他们会想围绕项目代码更改业务规则。

我们的项目代码是客户 ID，后跟一个破折号和一个序列号，以使其唯一。如果针对一个客户 ID 的提议项目最终与不同客户 ID 签订了合同，则用户希望更改项目代码。如果用户输入了错误的客户 ID，他们想更改项目代码。更改主键以及引用它的所有外键都是有问题的。

这并没有（似乎）回答这个问题*我们如何决定使用身份列或主键？*

但是，如果您不将客户数据用作主键（正如我刚才所说，您不应该使用），那么主键将需要自动生成，因为您不能期望用户输入它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-17T10:28:50.543

您应该始终使用主键，它只会使您的数据库具有可扩展性。使用 GUID 或 UUID 或其他任何唯一的东西。

# django - Django：让用户创建具有个性化网址的网站

> ID：12932210
> 
> 赞同：0
> 
> 时间：2012-10-17T10:26:05.183
> 
> 标签：django, django-urls

我正在使用 django，并且在我的 url.py 中有如下网址

```
url('^mysite/home/$', home),
url('^mysite/listings/$', listings), 
```

现在，我希望用户能够创建自己的帐户，然后这些帐户将拥有自己的 url 名称。我在想像wordpress这样的东西：

```
macks_knitting_blog.wordpress.com 
```

但是，以下两个 url 应该都映射到相同的函数，列表。

```
macks_knitting_blog.mysite.com/listings
my_trip.mysite.com/listings 
```

这些帐户本质上是相同的，并且所有帐户都将使用相同的功能和模板（与 wordpress 不同）。显示的信息将根据 request.user 进行过滤，模板看起来会根据 request.path 有所不同。

有可能做这样的事情吗？它也可以：

```
mysite.com/macks_knitting_blog/listings 
```

我读过有关 Django 站点的信息，但在这种情况下似乎并不成立。还是我错过了什么？这个想法是我不需要更改 settings.py 或 url.py 来实现这一点。这一切都应该自动发生。否则，我可以考虑为新站点分配一些 id 并将其传递 - 不是很个性化的外观。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T10:47:50.523

这是一个想法：在您的 url 部分将列表行更改为

```
url('^mysite/([^//]*)/listings/$', listings) 
```

你在“views.py”中的函数应该是这样的：

```
def listings(request, username):
    ...
    return HttpResponse(...) 
```

用户名参数在 mysite 和 'listings' 之后的斜杠之间接收字符串段 希望有帮助

# jquery - 为除第一个孩子之外的所有孩子添加课程

> ID：12932211
> 
> 赞同：3
> 
> 时间：2012-10-17T10:26:05.817
> 
> 标签：jquery

我有一些 html，我想为除第一个孩子之外的所有孩子添加一个类。

```
 <div class="test">
        <div class="different">title</div>
        <div class="same">a</div>
        <div class="same">b</div>
        <div class="same">c</div>
    </div> 
```

用下面的js

```
<script>
$(".test").children().each(function(i) {
  $(this).addClass("eg_" + (i+1));
});
</script> 
```

看到这个小提琴

[http://jsfiddle.net/aaronk85/HaH2y/](http://jsfiddle.net/aaronk85/HaH2y/)

我希望除第一个测试之外的每个子 div 都能获得“eg_” + (i+1) 类，但我似乎无法让它工作？

我已经看到了一些类似的示例，请参见下面的示例，但不能从中完全解决。我在这里哪里出错了？

[http://jsfiddle.net/aaronk85/y9bEG/11/](http://jsfiddle.net/aaronk85/y9bEG/11/)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-17T10:27:34.990

使用[gt](http://api.jquery.com/gt-selector/)过滤和[回调](http://api.jquery.com/addClass/)来设置精确的类：

```
$('.test > div:gt(0)').addClass(function(i){
      return 'eg_'+(i+2);
}); 
```

（如果你需要，你的问题不清楚`i`，`i+1`或者`i+2`）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T10:28:48.410

尝试检查索引

```
<script>
$(".test").children().each(function(i) {

if(i!=0){ // check the first index and add 
   $(this).addClass("eg_" + (i+1));
  }
});
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T10:29:47.857

尝试这个：

```
$(".test").children().each(function(i) {
    if (i>0) {
        $(this).addClass("eg_" + (i));
    } else {
        i++;
    }
}); 
```

​</p>

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-05-17T05:21:18.100

```
 ##  This code can help answer, and I completed my friends   
    ##

         <div id="list3">
               <ul class="NewFilm">
               <li>test1</li>
               <li>test2</li>
               <li>test3</li>
               <li>test4</li>
               <li>test5</li>
               </ul>
              </div> 
        <script>
       $("li:lt(5)").addClass("eg_1");
</script>
         <style>
        .eg_1, .eg_2, .eg_3 {color:red;}
        </style> 
```

[http://jsfiddle.net/moslem68/oo907b6s/1/](http://jsfiddle.net/moslem68/oo907b6s/1/)

# iphone - 当今通用应用程序的适当设计分辨率？

> ID：12932212
> 
> 赞同：2
> 
> 时间：2012-10-17T10:26:09.423
> 
> 标签：iphone, ios, ipad, ios-universal-app

现在，我们有了新的 iPhone 5 和 iPad 3，我们应该为通用应用程序设计什么分辨率？

我们能否以最高分辨率制作**一个 Photoshop 设计**，然后缩小这些图像以适应 iPhone 屏幕？

请指教...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T12:40:00.517

That's the best approach.

Since the aspect ratios are different, just design background images separately for each device and use resized versions of highest resolution design for other objects.

For iPads, design for 2048x1536, use it directly on iPad3 and use resized 1024x768 on iPad2 and iPad1.

For iPhones, design for 640x1136 and use it on iPhone5, then crop central content and use it as 640x960 on retina iPhones, and as resized 320x480 on non-retina iPhones.

By the way, you can use same images for non-retina iPad and retina iPhone.

# iphone - 创建了两个 iPhone 应用程序并集成了 Facebook SDK，两个应用程序具有相同的 fbApp-Id

> ID：12932222
> 
> 赞同：1
> 
> 时间：2012-10-17T10:26:29.547
> 
> 标签：iphone

iPhone Facebook 集成的新手，问题是我已经开发了两个应用程序并在两个应用程序中集成了 Facebook sdk，我已经在具有不同规定的设备中运行了这两个应用程序，并且都安装在 iPhone 中，我在信息中给出了相同的 App-Id。两个应用程序问题的 plist 是

如果假设应用程序 A 和 B 存在，那么在应用程序“A”中，如果我单击 facebook 的登录按钮，它会在我的 iphone 中打开 facebook 应用程序，然后单击确定后返回应用程序“B”并在该应用程序中显示'B' 登录到面子书，反之亦然。

**主要要求：**

我的主要特点是我在两个应用程序中都有两个 A 和 B 集成 Facebook，如果在“A”中登录到 facebook，它应该显示 A 和 B 都已登录，

请帮我 。

谢谢，尼基尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T14:56:58.640

通常我们可以为不同的应用程序提供相同的应用程序 ID，但在登录屏幕中，两个应用程序都显示该应用程序名称，这不是问题。

请确保在 appdelegate.m 中包含以下代码：

facebook = [[Facebook alloc] initWithAppId:@"481018011908421"];

```
 NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
    if ([defaults objectForKey:@"FBAccessTokenKey"] 
        && [defaults objectForKey:@"FBExpirationDateKey"]) 
    {

        facebook.accessToken = [defaults objectForKey:@"FBAccessTokenKey"];
        facebook.expirationDate = [defaults objectForKey:@"FBExpirationDateKey"];
        NSLog(@"FBAccessTokenKey = %@~~~~ FBExpirationDateKey = %@",facebook.accessToken,facebook.expirationDate);

    } 
```

我认为 info.plist 中不需要 appid，需要在 appdelegate 中提供。

# c# - 如何显示特殊字符 - 知道它的 alt 代码

> ID：12932232
> 
> 赞同：1
> 
> 时间：2012-10-17T10:27:00.907
> 
> 标签：c#, visual-studio-2005

我想知道`Alt`当用户键入一些键时如何显示字符映射中的一些特殊字符（使用 with ）。

例如：输入时显示`¥`（Alt+0165），输入`\`时显示`§`（Alt+0167）`[`。

我知道`z`如果用户键入以下代码会显示`a`。但我不知道带`Alt`键的字符。

```
private void richTextBox1_KeyPress(object sender, KeyPressEventArgs e)
{
   if (e.KeyChar == 'a')
     e.KeyChar = 'z';
} 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T10:33:33.767

我认为直截了当的方式必须正确：

```
private void richTextBox1_KeyPress(object sender, KeyPressEventArgs e)
{
   if (e.KeyChar == '[')
       e.KeyChar = '§';
   else if (e.KeyChar == '\\')
       e.KeyChar = '¥';
} 
```

只需在 Visual Studio 中使用 Alt 键入这些字符！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T10:39:24.090

你也可以试试

```
private void richTextBox1_KeyPress(object sender, KeyPressEventArgs e)
{
   if (e.KeyChar == '[')
       e.KeyChar = (char)167;
   else if (e.KeyChar == '\\')
       e.KeyChar = (char)165;
} 
```

# java - linux上的asp.net mvc vs java spring

> ID：12932233
> 
> 赞同：0
> 
> 时间：2012-10-17T10:27:02.123
> 
> 标签：java, asp.net, spring, mono

我正在为一个需要在 linux 服务器上托管并使用 iphone、ipad 等与服务器交互的项目做 POC。

我在asp.net mvc方面有很强的背景，但是对java知之甚少，也没有java spring的经验。

对于这个要求，我必须使用 HTML5 在控制器上切换到多个视图以支持多个平台，或者我可以使用 phoneGap 来呈现视图。

如果我选择使用 asp.net MVC，我必须使用 Mono 来开发（最新版本的 2.10 支持 asp.net MVC 3），并使用 apache 来托管应用程序。

如果我选择使用 java spring，那么对应用程序的所有支持似乎都是原生的，没有太多“黑客”。

问题是是否值得使用 java ，这对我和我的团队来说会有一些学习曲线，有好处（性能或支持），或者我应该使用带有 Mono 的 asp.net mvc，我们只需要在其中学习Mono 是为了为 linux 服务器开发吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T16:44:56.523

> 是否值得使用 java，它对我和我的团队有一些学习曲线，有好处（**性能**或**支持**），或者我应该使用带有 Mono 的 asp.net mvc，我们只需要学习 Mono

对于 G-WAN，我们最近添加了对 Java (JVM) 和 C# (Mono) 的支持。

在这个阶段（支持 Mono 的版本将在月底发布）可以说的是，两者在 G-WAN 上的**性能**“相同”（Mono 消耗的 RAM 少一点）。

从其他应用程序使用 Java 或 Mono 时，情况*并非如此。*服务器（您必须根据具体情况进行测试）。

当我在周末（！）提出问题时，我从 Mono获得了相关且响应迅速的**支持，但 Java 提供了更多的支持选项（许多公司提供 Java 解决方案和支持计划）。**

这只是我个人的经验。

# jquery - 通过在 jquery 中多次单击来减慢进程

> ID：12932237
> 
> 赞同：0
> 
> 时间：2012-10-17T10:27:23.940
> 
> 标签：jquery, ajax, performance, click

我正在开发自己的 CMS 系统。它部分适用于 Ajax 和 jQuery，但问题是我使用了很多点击事件。因此，当我不断单击网站中的不同项目时，它会减慢系统速度。最终它不再做任何事情。我对点击事件是否正确，我需要如何以好的方式使用它？我使用了 .bind 和 .on 事件处理程序。

```
$(document).ready(function(){

//Standards
var windowWidth = $(window).width();
var windowHeight = $(window).height();
$('#wrapper').css('width',windowWidth);
$('#content').css('height',windowHeight);

//Click related items
$('.listItem').bind('click',function() {
    var itemID = $(this).attr('rel');
    $('#content').load('showitems.php',{newID:itemID});
});

//Click on tab
$('.liBase a').on('click', function() {
    $('.liBase a').parent().removeClass('activeList');
    $('#imageShow').removeClass('activeList');
    $(this).parent().addClass('activeList');
});

//Click pages

$('.page').on('click', function() {
    var pageID = $(this).attr('rel');
    $('.liBase').parent().parent().removeClass('activeList');
    $('#imageShow').removeClass('activeList');
    $(this).parent().parent().addClass('activeList');
    $('#content').load('showpages.php',{newID:pageID});
});

$('.item').on('click', function() {
    var pageID = $(this).attr('rel');
    $('.liBase').parent().parent().removeClass('activeList');
    $('#imageShow').removeClass('activeList');
    $(this).parent().parent().addClass('activeList');
    $('#content').load('showitems.php',{newID:pageID});
});

$('.editItem').on('click', function() {
    var newID = $(this).attr('rel');
    $('.editPage').parent().parent().removeClass('activeList');
    $('#imageShow').removeClass('activeList');
    $(this).parent().parent().addClass('activeList');
    $('#content').load('edititem.php',{itemID:newID});
});

$('.editPage').on('click',function() {
    var newID = $(this).attr('rel');
    $('.liBase').parent().parent().removeClass('activeList');
    $('#imageShow').removeClass('activeList');
    $(this).parent().parent().addClass('activeList');
    $('#content').load('editpage.php',{pageID:newID});
});

$('.deleteItem').on('click', function() {
    var newID = $(this).attr('rel');
    $('.liBase').parent().parent().removeClass('activeList');
    $('#imageShow').removeClass('activeList');
    $(this).parent().parent().addClass('activeList');
    $('#content').load('../control/deleteRecords.php',{postID:newID,tblName:'items',tblID:'itemID'});
});

$('.deletePage').on('click',function() {

    var newID = $(this).attr('rel');
    $('.liBase').parent().parent().removeClass('activeList');
    $('#imageShow').removeClass('activeList');
    $(this).parent().parent().addClass('activeList');
    $('#content').load('../control/deleteRecords.php',{postID:newID,tblName:'pages',tblID:'pageID'});
});

$('#addPage').on('click', function() {
    $('#content').load('addpage.php');
});

$('#addItem').on('click', function() {
    $('#content').load('additem.php');
});

$('#imageShow a').on('click', function() {
    var pageID = $(this).attr('rel');
    $('.liBase').parent().parent().removeClass('activeList');
    $(this).parent().addClass('activeList');
    $('#content').load('showimages.php');

});

$('#imageAdd').on('click', function() {
    $('#content').load('addimage.php');
});

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T10:46:51.250

我建议您执行以下操作（首先是简单的；D）

1）缓存你经常使用的jQuery Object。

```
 $item = $('.item'); 
```

2) 重构代码以消除冗余

```
$('.editPage').on('click',function() {
    doStuff(this);
    $('#content').load('editpage.php',{pageID:newID});
});

function doStuff(that){
    var newID = $(that).attr('rel');
    $('.liBase').parent().parent().removeClass('activeList');
    $('#imageShow').removeClass('activeList');
    $(that).parent().parent().addClass('activeList');
} 
```

3）看看你是否可以限制点击事件绑定的数量（是否有元素不必要地绑定了几个点击事件？）

4) 进行分析（Chrome devtools 是一个不错的选择）

*   是网络吗 - 通过丢弃旧请求或将它们排队来限制请求的频率

*   分析您的内存消耗 - 您的代码中的部分是否消耗大量内存

# objective-c - 如何在 UIRefreshControl 中使用 NSAttributedString

> ID：12932238
> 
> 赞同：3
> 
> 时间：2012-10-17T10:27:24.470
> 
> 标签：objective-c, ios6, nsattributedstring, uirefreshcontrol

我在[这篇文章](https://stackoverflow.com/questions/3482346/how-do-you-use-nsattributedstring)中找到了 NSAttributedString 的示例。我的问题是 - 有任何提示，如何使用它`UIRefreshControl class`？

从上面的帖子：

```
NSMutableAttributedString * string = [[NSMutableAttributedString alloc] initWithString:@"firstsecondthird"];
[string addAttribute:NSForegroundColorAttributeName value:[UIColor redColor] range:NSMakeRange(0,5)];
[string addAttribute:NSForegroundColorAttributeName value:[UIColor greenColor] range:NSMakeRange(5,6)];
[string addAttribute:NSForegroundColorAttributeName value:[UIColor blueColor] range:NSMakeRange(11,5)]; 
```

属性是`UIRefreshControl`自动调用的吗？

编辑：

我知道如何设置它，我想知道它是否有任何其他用途，然后“只是”格式化标签 - UIRefresherControl 是否能够显示**两个**字符串？拉之前一张，拉之后一张？当我看到我不能放入“普通”字符串时，这就是我最初的想法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-07-17T16:20:05.630

这是如何在 UIRefreshControl 中创建和修改色调颜色、字体颜色和字体样式的完整示例：

```
_refreshControl = [[UIRefreshControl alloc] init];
_refreshControl.tintColor = [UIColor blackColor];
NSMutableAttributedString *string = [[NSMutableAttributedString alloc] initWithString:@"Pull to Refresh"];
NSRange fullRange = NSMakeRange(0, [string length]);
[string addAttribute:NSForegroundColorAttributeName value:[UIColor blackColor] range:fullRange];
[string addAttribute:NSFontAttributeName value:[UIFont fontWithName:@"Georgia" size:17] range:fullRange];
[_refreshControl setAttributedTitle:string];
[_refreshControl addTarget:self action:@selector(refresh:) forControlEvents:UIControlEventValueChanged];
[self setRefreshControl:_refreshControl]; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-19T14:33:24.770

好吧，看看 how`UIRefreshControl`有一个[`attributedTitle`](http://developer.apple.com/library/ios/documentation/UIKit/Reference/UIRefreshControl_class/Reference/Reference.html#//apple_ref/doc/uid/TP40012250-CH1-SW8)接受 a 的属性`NSAttributedString`，并看看 how`NSMutableAttributedString`是 的子类`NSAttributedString`，你会这样做：

```
[myRefreshControl setAttributedTitle:string]; 
```

* * *

> UIRefresherControl 是否能够显示两个字符串？

不可以。但是您可以尝试放入具有多行或不同段落样式的属性字符串（例如，一部分可以左对齐，另一部分右对齐）。

> 拉之前一张，拉之后一张？

不，您可以根据自己的应用程序逻辑更改 refreshControl 的属性标题。

# android - C2DM 通知问题

> ID：12932243
> 
> 赞同：1
> 
> 时间：2012-10-17T10:27:36.317
> 
> 标签：android, android-c2dm

我正在使用 C2DM 与 android 2.3.3 推送通知。我已成功注册 C2DM 服务器。Android 应用程序运行良好。我正在使用无线网络。

有时 Google C2DM 正确响应以发送通知，而我在我的应用程序上收到通知，有时 C2DM 没有正确响应。

# javascript - 如何在 ruby on rails 中将文本值迭代为 Active Record 模型名称格式？

> ID：12932244
> 
> 赞同：0
> 
> 时间：2012-10-17T10:27:47.310
> 
> 标签：javascript, ruby-on-rails, ruby, ruby-on-rails-3

我有一个`dialog popup`过来`model name`。例如，

```
<%= link_to pro_generic_lookup_data_path("Enr::Rds::Question2009", format: :js), data: {remote: true}, id: "question_picker" do %>
      <%= f.label :Question, class: 'question_label'%>
      <%= f.text_field :Question, class: 'question_label'%>
<% end %> 
```

我有这三个`section`。我正在获取值`javascript`并插入方法`fields`内部`link_to`。

但最后一个`section`，会得到`question_id`并匹配`answer_column`. `answer_column`具有`Model's`名称 like的值`enr_rds_question_t`。因此，我应该获取此文本并更改为模型名称，例如 Enr::Rds::Question 并进行类似`link_to`操作以打开.`dialog popup``answers`

我是 RoR 的新手，所以很抱歉无法解释清楚。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T10:42:11.893

```
 "enr_rds_question_t".split('_t').first.split('_').map(&:camelize).join('::').constantize 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T10:37:13.027

自己写喜欢

```
"enr_rds_question".gsub("_", " " ).titleize.gsub(" ", "::" ) 
```

或参考[`camelize`](http://api.rubyonrails.org/v2.3.8/classes/ActiveSupport/Inflector.html#M000708)

```
"enr_rds_question".gsub("_", "\" ).camelize 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-17T10:38:07.853

粗鲁的方式虽然

```
'enr_rds_question'.split('_t')[0].split('_').collect{|s| s.camelize}.join("::").constantize 
```

# ios - iOS 6 SLComposeViewController - 创建带有文本和 URL 的 facebook 帖子 - 没有图像

> ID：12932247
> 
> 赞同：2
> 
> 时间：2012-10-17T10:28:03.230
> 
> 标签：ios, facebook, ios6

根本无法仅使用文本和 NSURL 对象发布帖子。我可以只使用帖子，或者使用帖子、NSURL 和图像，但理想情况下我只想提供帖子的链接。

它只是将“无法发布到 Facebook”声明为“无法发送帖子，因为与 Facebook 的连接失败”。

有什么我可以做的吗？我目前没有使用 Facebook SDK，但也许我必须使用？

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T22:45:26.150

我们刚刚开始使用昨天正常工作的代码来解决这个问题。谷歌搜索显示，今天很多人通过本机集成从其他 Apple 应用程序共享此问题。我实际上认为这是 Facebook 的问题。

我尝试从 Mobile Safari 共享一个 URL，但它也因同样的错误而失败。您能否确认 Mobile Safari 也无法共享？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T22:26:31.013

好吧，现在我可以将图像部分保留为 nil（仍然包括方法，只需保留参数 nil），它将仅显示文本和链接。

# nsis - 如何在执行 perl.exe 时隐藏控制台窗口？

> ID：12932251
> 
> 赞同：0
> 
> 时间：2012-10-17T10:28:06.143
> 
> 标签：nsis

我的安装程序在执行 perl.exe 时显示带有进程 ID 的命令提示符窗口。

我想阻止它显示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-04T17:04:51.683

在代码底部添加这个很棒的片段

```
BEGIN {
    Win32::SetChildShowWindow(0)
        if defined &Win32::SetChildShowWindow; 
} 
```

原文来源： [http ://samdelacruz.blogspot.com/2007/12/hide-console-windows-in-perl.html](http://samdelacruz.blogspot.com/2007/12/hide-console-windows-in-perl.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T10:47:06.950

我假设你的意思是它正在显示一个控制台窗口......

您可以使用[nsExec](http://nsis.sourceforge.net/Docs/nsExec/nsExec.txt)插件来隐藏控制台窗口。[如果您需要更多控制（标准输入等），您可以从wiki](http://nsis.sourceforge.net/Category%3aPlugins)下载 ExecDos 和/或 ExecCmd ...

# c# - TCP客户端和服务器在同一台PC上

> ID：12932253
> 
> 赞同：1
> 
> 时间：2012-10-17T10:28:11.433
> 
> 标签：c#, networking, tcp, connection, client

我正在尝试在 C# 中实现一个基于 tcp 的小型应用程序。我是 TCP 编程的新手。

该应用程序非常简单。这是一个客户端/服务器方案，最多支持 2 个客户端。一个客户端将是“外部”IP，另一个将是主机本身。

每次客户端连接到服务器时，它都会开始从/向服务器接收和发送数据包。

我已经建立了一个小型控制台应用程序，它实现了 TCP 服务器端代码和 TCP 客户端代码。

服务器使用绑定到特定端口的侦听器并等待客户端连接。连接客户端后，它会生成一个新线程来处理与客户端的通信。

客户端只需连接到服务器，一旦连接建立，它就会开始接收和发送数据包。

正如我之前所说的“主机也是它自己的客户”，但这会导致一个问题。如果客户端向服务器发送一个数据包，服务器和客户端都声称收到了一个数据包。这是正常的？我错过了什么吗？

更新 2（修复问题）

我想我找到了问题所在。客户端完成发送操作后，我需要“重置”缓冲区

```
 case SocketAsyncOperation.Send:                        

              // Put in listen mode

              // Buffer reset AFTER send and BEFORE receive
              _receiver.SetBuffer(new byte[4096], 0, 4096);

              _client.ReceiveAsync(_receiver);                        

              break; 
```

更新 1（添加代码）

**服务器**

```
 public void Host()
    {                        
        _listener = new TcpListener(new IPEndPoint(IPAddress.Any, this.ConnectionPort));
        _listener.Start();

        this.IsListening = true;            

        ThreadPool.QueueUserWorkItem((state) =>
        {
            while (true)
            {
                // Blocks until a client connections occours
                // If continue with no client then stop listening                    
                try
                {
                    TcpClient client = _listener.AcceptTcpClient();

                    // Add client to peer list
                    long assignedID = DateTime.UtcNow.Ticks;
                    _clients.Add(assignedID, client);

                    HandleClient(assignedID);

                    if (this.ConnectedClients == this.MaxClients)
                    {
                        _listener.Stop();

                        this.IsListening = false;

                        break;
                    }
                }
                catch
                {
                    // Server has stop listening
                    _stopListen.Set();

                    break;
                }
            }
        });
    }

    private void HandleClient(long assignedID)
    {
        ThreadPool.QueueUserWorkItem((state) =>
        {
            long clientID = (long)state;
            TcpClient client = _clients[clientID];        

            try
            {
                byte[] message = new byte[4096];
                byte[] buffer = new byte[4096];

                int readed = 0;
                int index = 0;

                NetworkStream clientStream = client.GetStream();

                while (true)
                {                        
                    readed = clientStream.Read(message, 0, message.Length);
                    if (readed == 0)
                    {
                        // Client disconnected, thorw exception
                        throw new SocketException();
                    }

                    Array.Copy(message, 0, buffer, index, readed);
                    index += readed;

                    if (readed == 4096
                        && !_packetHub.IsValidBufferData(buffer))
                    {
                        Array.Clear(buffer, 0, buffer.Length);
                        readed = 0;
                        index = 0;

                        continue;
                    }

                    if (_packetHub.IsValidBufferData(buffer))
                    {
                        NetPacket receivedPacket = _packetHub.DeserializePacket(buffer);
                        NetPacket answerPacket = null;

                        // Assign sender ID in case of unknown sender ID
                        if (receivedPacket.SenderID == NetPacket.UnknownID)
                            receivedPacket.SenderID = clientID;

                        // Handle received packet and forward answer packet
                        // to the client or to all other connected peers                            
                        answerPacket = HandlePacket(receivedPacket);                            
                        if (answerPacket != null)
                        {                                
                            if (answerPacket.RecipientID == clientID)
                            {
                                // Send answer packet to the client
                                SendPacket(client, answerPacket);
                            }
                            else
                            {
                                // Broadcast packet to all clients
                                foreach (TcpClient peer in _clients.Values)
                                    SendPacket(peer, answerPacket);
                            }
                        }

                        // Reset receive packet buffer
                        Array.Clear(buffer, 0, buffer.Length);
                        readed = 0;
                        index = 0;
                    }
                }
            }
            catch
            {
                System.Diagnostics.Debug.WriteLine("Network error occours!");
            }
            finally
            {
                // Close client connection
                client.Close();

                // Remove the client from the list
                _clients.Remove(clientID);

                // Raise client disconnected event
                OnClientDisconnected();
            }

        }, assignedID);
    } 
```

**客户**

```
 public void Connect()
    {
        if (this.ConnectionAddress == null)
            throw new InvalidOperationException("Unable to connect. No server IP specified.");

        _receiver = new SocketAsyncEventArgs();
        _receiver.RemoteEndPoint = new IPEndPoint(this.ConnectionAddress, this.ConnectionPort);
        _receiver.SetBuffer(new byte[4096], 0, 4096);
        _receiver.Completed += new EventHandler<SocketAsyncEventArgs>(Socket_OperationComplete);

        _client = new Socket(AddressFamily.InterNetwork, SocketType.Stream, ProtocolType.Tcp);            

        _client.ConnectAsync(_receiver);
    }

    private void Socket_OperationComplete(object sender, SocketAsyncEventArgs e)
    {
        if (e.SocketError == SocketError.Success)            
        {
            switch (e.LastOperation)
            {
                case SocketAsyncOperation.Connect:

                    _readyToSend = true;

                    this.IsConnected = true;

                    // Once connection is estabilished, send a join packet to
                    // retrive server side assigned informations

                    JoinPacket joinPacket = (JoinPacket)NetPacket.CreatePacket(this.ClientID, NetPacket.ToHost, NetPacket.JoinPacket);
                    joinPacket.ClientName = this.ClientName;
                    joinPacket.ClientAddress = this.LocalAddress.ToString();

                    SendPacket(joinPacket);

                    break;

                case SocketAsyncOperation.Receive:

                    _readyToSend = true;

                    byte[] buffer = _receiver.Buffer;

                    System.Diagnostics.Debug.WriteLine("Client received packet (" + _packetHub.GetBufferDataType(buffer) + ") with length of: " + buffer.Length);

                    if (_packetHub.IsValidBufferData(buffer))
                    {
                        NetPacket receivedPacket = _packetHub.DeserializePacket(buffer);
                        NetPacket answerPacket = null;

                        // Handle received packet and forward answer packet
                        // to the server
                        answerPacket = HandlePacket(receivedPacket);
                        if (answerPacket != null)
                            SendPacket(answerPacket);
                    }
                    else
                    {
                        _client.ReceiveAsync(_receiver);
                    }

                    break;

                case SocketAsyncOperation.Send:                        

                    // Put in listen mode
                    _client.ReceiveAsync(_receiver);                        

                    break;
            }
        }            
        else
        {
            OnClientDisconnected();

            System.Diagnostics.Debug.WriteLine(String.Format("Network error: {0}", e.SocketError.ToString()));
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T10:31:11.767

由于您使用的是 TCP，因此您必须指定要发送/侦听的端口（服务器和客户端不同）。所以不，这是不正常的（但如果客户端和服务器在同一个端口上发送/监听）。

# excel - 当工作表受到保护时，宏不起作用。运行宏返回运行时错误 1004

> ID：12932254
> 
> 赞同：2
> 
> 时间：2012-10-17T10:28:11.390
> 
> 标签：excel, vba

我的工作簿中有三个可以正常工作的宏。但是，当我保护任何工作表时，它们会停止工作，我得到一个`run-time error 1004`.

我尝试遵循我在网上找到的两个建议：

*   宏代码开头不保护，结尾保护；
*   仅用户界面），但运行时错误仍然存​​在。

我需要保护我的工作簿并让我的宏发挥作用，我该怎么办？

**宏 1：**

```
Sub Macro1()

Dim historyWks As Worksheet
Dim inputWks As Worksheet

Dim nextRow As Long
Dim oCol As Long

Dim myCopy As Range
Dim myTest As Range

Dim lRsp As Long

Set inputWks = Worksheets("Visit & Order Entry Form")
Set historyWks = Worksheets("Visit & Order Database")

'check for duplicate order ID in database
If inputWks.Range("CheckID2") = True Then
  lRsp = MsgBox("Clinic ID already in database. Update database?", vbQuestion + vbYesNo, "Duplicate ID")
  If lRsp = vbYes Then
    UpdateLogRecord
  Else
    MsgBox "Please change Clinic ID to a unique number."
  End If

Else

  'cells to copy from Input sheet - some contain formulas
  Set myCopy = inputWks.Range("OrderEntry2")

  With historyWks
      nextRow = .Cells(.Rows.Count, "A").End(xlUp).Offset(1, 0).Row
  End With

  With inputWks
      Set myTest = myCopy.Offset(0, 2)

      If Application.Count(myTest) > 0 Then
          MsgBox "Please fill in all the cells!"
          Exit Sub
      End If
  End With

  With historyWks
      With .Cells(nextRow, "A")
          .Value = Now
          .NumberFormat = "mm/dd/yyyy hh:mm:ss"
      End With
      .Cells(nextRow, "B").Value = Application.UserName
      oCol = 3
      myCopy.Copy
      .Cells(nextRow, 3).PasteSpecial Paste:=xlPasteValues, Transpose:=True
      Application.CutCopyMode = False
  End With

  'clear input cells that contain constants
  With inputWks
    On Error Resume Next
       With myCopy.Cells.SpecialCells(xlCellTypeConstants)
            .ClearContents
            Application.GoTo .Cells(1) ', Scroll:=True
       End With
    On Error GoTo 0
  End With
End If

End Sub 
```

**宏 2**

```
Sub UpdateLogWorksheet()

Dim historyWks As Worksheet
Dim inputWks As Worksheet

Dim nextRow As Long
Dim oCol As Long

Dim myCopy As Range
Dim myTest As Range

Dim lRsp As Long

Set inputWks = Worksheets("Visit & Order Entry Form")
Set historyWks = Worksheets("Contact Details & Segm Database")

'check for duplicate order ID in database
If inputWks.Range("CheckID") = True Then
  lRsp = MsgBox("Clinic ID already in database. Update database?", vbQuestion + vbYesNo, "Duplicate ID")
  If lRsp = vbYes Then
    UpdateLogRecord
  Else
    MsgBox "Please change Clinic ID to a unique number."
  End If

Else

  'cells to copy from Input sheet - some contain formulas
  Set myCopy = inputWks.Range("OrderEntry")

  With historyWks
      nextRow = .Cells(.Rows.Count, "A").End(xlUp).Offset(1, 0).Row
  End With

  With inputWks
      Set myTest = myCopy.Offset(0, 2)

      If Application.Count(myTest) > 0 Then
          MsgBox "Please fill in all the cells!"
          Exit Sub
      End If
  End With

  With historyWks
      With .Cells(nextRow, "A")
          .Value = Now
          .NumberFormat = "mm/dd/yyyy hh:mm:ss"
      End With
      .Cells(nextRow, "B").Value = Application.UserName
      oCol = 3
      myCopy.Copy
      .Cells(nextRow, 3).PasteSpecial Paste:=xlPasteValues, Transpose:=True
      Application.CutCopyMode = False
  End With

  'clear input cells that contain constants
  With inputWks
    On Error Resume Next
       With myCopy.Cells.SpecialCells(xlCellTypeConstants)
            .ClearContents
            Application.GoTo .Cells(52) ', Scroll:=True
       End With
    On Error GoTo 0
  End With
End If

End Sub 
```

**宏 3**

```
Sub UpdateLogRecord()

Dim historyWks As Worksheet
Dim inputWks As Worksheet

Dim lRec As Long
Dim oCol As Long
Dim lRecRow As Long

Dim myCopy As Range
Dim myTest As Range

Dim lRsp As Long

Set inputWks = Worksheets("Visit & Order Entry Form")
Set historyWks = Worksheets("Contact Details & Segm Database")

'check for duplicate order ID in database
If inputWks.Range("CheckID") = False Then
  lRsp = MsgBox("Clinic ID not in database. Add clinic to database?", vbQuestion + vbYesNo, "New Order ID")
  If lRsp = vbYes Then
    UpdateLogWorksheet
  Else
    MsgBox "Please select Clinic ID that is in the database."
  End If

Else

  'cells to copy from Input sheet - some contain formulas
  Set myCopy = inputWks.Range("OrderEntry")

  lRec = inputWks.Range("CurrRec").Value
  lRecRow = lRec + 1

  With inputWks
      Set myTest = myCopy.Offset(0, 2)

      If Application.Count(myTest) > 0 Then
          MsgBox "Please fill in all the cells!"
          Exit Sub
      End If
  End With

  With historyWks
      With .Cells(lRecRow, "A")
          .Value = Now
          .NumberFormat = "mm/dd/yyyy hh:mm:ss"
      End With
      .Cells(lRecRow, "B").Value = Application.UserName
      oCol = 3

      myCopy.Copy
      .Cells(lRecRow, 3).PasteSpecial Paste:=xlPasteValues, Transpose:=True
      Application.CutCopyMode = False
  End With

  'clear input cells that contain constants
  With inputWks
    On Error Resume Next
       With myCopy.Cells.SpecialCells(xlCellTypeConstants)
            .ClearContents
            Application.GoTo .Cells(52) ', Scroll:=True
       End With
    On Error GoTo 0
  End With
End If

End Sub 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-17T12:39:35.463

您没有任何代码可以在宏开始时取消保护，然后在结束时再次保护。你一开始就需要这样的东西（我想你已经知道了，但只是想弄清楚）。

```
SheetName.Unprotect Password:=yourPassword 
```

最后是：

```
SheetName.Protect Password:=yourPassword 
```

您说您已经尝试过了，但是从您发布的代码中并不清楚您在哪里拥有这些命令。

通过尝试重现此行为，我注意到您有两个不同的工作表，`historyWks`它们可能会导致锁定和解锁问题。

一种选择是在入口处取消保护所有工作表，然后在出口处再次保护它们。

```
Private Const yourPassword As String = "password"

Sub UnprotectAll()
    Dim sh As Worksheet
    For Each sh In ActiveWorkbook.Worksheets
        sh.Unprotect Password:=yourPassword
    Next sh
End Sub

Sub ProtectAll()
    Dim sh As Worksheet
    For Each sh In ActiveWorkbook.Worksheets
        sh.Protect Password:=yourPassword
    Next sh
End Sub 
```

您只需要在`Macro1`. 您可能还想`Application.ScreenUpdating = False`在开头添加一个以避免闪烁，因为它循环遍历所有工作表，然后`Application.ScreenUpdating = True`在末尾添加`Macro1`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-23T06:32:59.743

对宏初学者的帮助：

如果您使用按钮来运行宏，请在 sub buttonclick() 中包含以下内容

```
Dim sh As Worksheet

Dim yourPassword As String

    yourPassword = "whatever password you like"

   For Each sh In ActiveWorkbook.Worksheets
        sh.Unprotect Password:=yourPassword 
```

“现在输入你需要运行的宏

，最后，在结束子之前粘贴以下行

```
For Each sh In ActiveWorkbook.Worksheets
        sh.Protect Password:=yourPassword
    Next sh 
```

# datetime - SQL中日期时间字段中两个日期和时间之间的差异

> ID：12932255
> 
> 赞同：7
> 
> 时间：2012-10-17T10:28:12.967
> 
> 标签：datetime, datediff

> **可能重复：**
> [如何比较两个日期以查找 SQL Server 2005 中的时差，日期操作](https://stackoverflow.com/questions/9521434/how-to-compare-two-dates-to-find-time-difference-in-sql-server-2005-date-manipu)

我有两个日期时间字段，应该计算它们之间的时间，包括时间字段。

如果它们之间的差异小于 24 小时，则应将其视为 1 天，将 24 到 48 小时视为 2 天。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-17T10:31:59.260

如果您谈论的是 SQL Server，那么您需要的是[DATEDIFF 。](http://msdn.microsoft.com/en-us/library/ms189794.aspx)

就像是：

```
SELECT DATEDIFF(d, StartDate, EndDate) FROM tableName 
```

...只需将 StartDate 和 EndDate 替换为您的列名，并将 tableName 替换为实际表名。此外，您可以将 'd' 字符换成其他日期部分，例如，如果您想查找月份、年份等的日期差异。

*** 更新 ***

@sateesh，尝试遵循这个。我认为您可能遇到的问题与 SQL 的 DATEDIFF 函数中的舍入有关。解决这个问题的方法是降低到更细化的级别，例如几分钟而不是几天。请参阅下面的示例代码，并比较输出：

```
DECLARE @tblDummy TABLE(Value1 SMALLDATETIME, Value2 SMALLDATETIME, [Description] NVARCHAR(50))
INSERT INTO @tblDummy (Value1, Value2, [Description]) VALUES ('2012-01-01 12:00', '2012-01-02 01:00', '13 hours 0 mins')
INSERT INTO @tblDummy (Value1, Value2, [Description]) VALUES ('2012-01-01 12:00', '2012-01-02 11:59', '23 hours 59 mins')
INSERT INTO @tblDummy (Value1, Value2, [Description]) VALUES ('2012-01-01 12:00', '2012-01-02 13:00', '25 hours 0 mins')
INSERT INTO @tblDummy (Value1, Value2, [Description]) VALUES ('2012-01-01 12:00', '2012-01-03 12:00', '48 hours 0 mins')
INSERT INTO @tblDummy (Value1, Value2, [Description]) VALUES ('2012-01-01 12:00', '2012-01-03 12:01', '48 hours 1 min')
INSERT INTO @tblDummy (Value1, Value2, [Description]) VALUES ('2012-01-01 12:00', '2012-01-04 00:00', '60 hours 0 mins')

-- Attempt 1: Standard date diff
SELECT DATEDIFF(d, Value1, Value2) [diff], [Description]
FROM @tblDummy

-- Attempt 2: Date diff taking it down to the minutes level
SELECT CEILING((DATEDIFF(minute, Value1, Value2) / 60.0) / 24.0) [diff], [Description]
FROM @tblDummy 
```

这是输出：

![显示查询输出的图像](../Images/2cdbad32f6fe57a2912995fac2364abb.png)

我相信尝试 2 可以满足您的需求。如果那对您没有帮助，那么恐怕我只是不明白您的问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T10:31:57.353

听起来 DATEDIFF 函数会有所帮助。你可以选择你的 DatePart ，这样可以得到非常精细的输出。

[http://msdn.microsoft.com/en-us/library/ms189794.aspx](http://msdn.microsoft.com/en-us/library/ms189794.aspx)

来自：[http ://www.w3schools.com/sql/func_datediff.asp](http://www.w3schools.com/sql/func_datediff.asp)

```
SELECT DATEDIFF(day,'2008-06-05 20:10:00','2008-08-05 20:10:00') AS DiffDate 
```

结果：

```
DiffDate
61 
```

# java - 读取网页时出现错误的请求错误

> ID：12932259
> 
> 赞同：0
> 
> 时间：2012-10-17T10:28:19.467
> 
> 标签：java

我试图以字节为单位读取网页，但它总是在我的 java 控制台上返回“错误请求错误 400”消息（我在控制台上显示内容）。我找不到纠正它的方法，可能是因为我阅读了字节码。这是我的代码和结果：

```
Socket s = new Socket(InetAddress.getByName(req.hostname), 80);
                    PrintWriter socketOut = new PrintWriter(s.getOutputStream());
                    socketOut.print("GET "+ req.url + "\n\n");
                    socketOut.flush();
                    BufferedReader in = new BufferedReader(new InputStreamReader(s.getInputStream()));

                    StringBuffer buffer = new StringBuffer();
                    int data = in.read();
                    while (data != -1) {
                      char theChar = (char) data;
                      buffer.append(theChar);
                      data = in.read();
                    }
                    in.close();
                    byte[] result = buffer.toString().getBytes();
                    out.write(result); 
```

结果包含从 Bad request 消息开始的 html 标签，但我删除了它们，所以这是我的结果：

```
Thread with id 10 URL: http://www.facebook.com.tr/
Host: www.facebook.com.tr
HTTP/1.1 400 Bad Request
Content-Type: text/html
Date: Wed, 17 Oct 2012 10:18:06 GMT
Connection: close
Content-Length: 134

400 Bad Request
Method Not Implemented
Invalid method in request 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T21:39:15.843

服务器不容忍没有[`HTTP-Version`](http://www.w3.org/Protocols/rfc2616/rfc2616-sec5.html)声明的 HTTP 请求。试试这样：

```
socketOut.print("GET "+ req.url + " HTTP/1.1\n\n"); 
```

还要考虑到服务器保持连接处于活动状态，因此在某些时候`data = in.read()`会锁定主线程。除非您终止连接或执行其他操作，否则您的循环将需要一段时间才能结束，直到连接超时。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T10:36:03.033

当您向 HTTP 服务器发送不正确或不适当的请求时，将向 HTTP 服务发送错误代码 400。你必须确定你的要求是否正确。我明白了`www.facebook.com.tr`。检查那个`.tr`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T10:34:16.247

我想这是因为您的代码无法处理它在初始握手中收到的永久重定向：

```
$>> curl --head www.facebook.com.tr/
HTTP/1.1 301 Moved Permanently
Location: http://www.facebook.com/
Content-Type: text/html; charset=utf-8
X-FB-Debug: WOU3E4EGqo5Rxch8AnUzqcWg9CcM1p55pt1P9Wrm0QI=
Date: Wed, 17 Oct 2012 10:33:12 GMT
Connection: keep-alive
Content-Length: 0 
```

还要检查您的问题，您收到的是 400，而不是 404。

尝试这个：

```
BufferedReader reader = new BufferedReader(new InputStreamReader(new URL("http://www.facebook.com.tr").openStream()));

String line = reader.readLine();
while(line!=null) {
    System.out.println(line);
    line = reader.readLine();
} 
```

# oracle - 从 Oracle 中启用版本的表中获取触发器

> ID：12932263
> 
> 赞同：1
> 
> 时间：2012-10-17T10:28:38.197
> 
> 标签：oracle, triggers, versioning, workspace

我是 Oracle Workspace Manager 的新手。我有一个触发器，每次插入记录时都会填充我的 ID。我在启用表的版本控制之前创建了触发器。在我的表中启用版本控制后，我无法再找到我的触发器，而是使用这些触发器：

```
OVM_DELETE_7
OVM_INSERT_7
OVM_UPDATE_7 
```

我想做的是查询我在表上创建的触发器。有没有办法在不禁用我的桌子上的版本控制的情况下做到这一点？我有太多启用版本的表，如果只为该查询禁用每个表中的版本会很麻烦。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T10:59:39.910

要获取在您（当前用户）拥有的启用版本的表上创建的触发器列表，您可以查询`USER_WM_TAB_TRIGGERS`view 或`ALL_WM_TAB_TRIGGERS`view（如果您已被授予`create any trigger`特权）以获取有关所有启用版本的表的触发器的信息。

# android - 如何在 Android 中将 viewpagerindicator 与 ViewPager 一起使用？

> ID：12932267
> 
> 赞同：2
> 
> 时间：2012-10-17T10:28:42.987
> 
> 标签：android, android-viewpager, viewpagerindicator

我想在我的 android 应用程序中使用[viewpagerindicator 。](http://viewpagerindicator.com/)`ViewPager`我已经创建了`ViewPager`，现在我想在`ViewPager`. 读完[这篇](https://stackoverflow.com/a/10039279/1341006)文章后，我知道 viewpagerindicator 会很有帮助。现在的问题是我如何在我的项目中使用这个项目。我尝试添加 from`properties --> java build path --> Libraries --> add external class folders`但没有帮助。
我还尝试编译从[http://viewpagerindicator.com/](http://viewpagerindicator.com/)下载的库，但这给了我一堆`The method setViewPager(ViewPager) of type LinePageIndicator must override a superclass method`类型错误。

我想在我的应用程序中使用`TabPageIndicator`和`TitlePageIndicator`from viewpagerindicator 项目，如此处[所述](https://stackoverflow.com/a/10039279/1341006)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T10:34:16.950

您可以使用新的 android PagerTabStrip，它工作得非常好并且向后兼容。这是一个很好的示例项目，使用 android PagerTabStrip：

[http://code.google.com/p/viewpage-title-project/](http://code.google.com/p/viewpage-title-project/)

[http://developer.android.com/reference/android/support/v4/view/PagerTabStrip.html](http://developer.android.com/reference/android/support/v4/view/PagerTabStrip.html)

您唯一需要做的就是导入 android 支持库版本 9：

右键单击您的项目 --> android 工具 --> 添加支持库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T10:38:45.553

1.  下载该项目的源代码
2.  在您的 Eclipse 工作区中： File > New > Project... > Android > Android project from existing code
3.  作为位置选择 viewpagerindicator/library （这应该在您的工作区中创建库项目）
4.  右键单击您的项目>属性...
5.  Android > 图书馆 > 添加...
6.  选择您使用前面的步骤创建的 viewpagerindicator 项目。
7.  按照[http://viewpagerindicator.com/#usage上有关如何在布局中包含视图寻呼机指示器的说明进行操作](http://viewpagerindicator.com/#usage)

# c# - 路径中的文件名

> ID：12932274
> 
> 赞同：0
> 
> 时间：2012-10-17T10:29:13.067
> 
> 标签：c#, windows-phone-7

我想将项目中文件夹中的所有文件名加载到字符串数组中。

但我做不到。已经尝试过`DirectoryInfo`，但我无法加载想要的`Directory`.

只是要确定。我不想将所有文件复制到`IsolatedStorage`. 我只想获取文件名。

任何人都可以为我提供一个解决方案。

到目前为止感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T10:44:49.087

WP7 应用程序没有任何 API 可用于文件系统。

如果您在项目文件夹中有文件 - 您可以将它们标记为资源，并使用

`Application.GetResourceStream(new Uri(fileName, UriKind.Relative));`

* * *

如果文件被标记为`Content`- 您无法获取它们的列表。您只能使用硬编码的名称。

如果文件标记为嵌入式资源，您可以通过以下代码列出它们：

```
var list = Assembly.GetCallingAssembly().GetManifestResourceNames(); 
```

# c# - HttpWebRequest 超时

> ID：12932275
> 
> 赞同：1
> 
> 时间：2012-10-17T10:29:18.607
> 
> 标签：c#, httpwebrequest, timeout, getresponse

我正在使用 HttpWebRequest 从网站读取内容。

```
string url = "http://google.com.vn";
HttpWebRequest request = (HttpWebRequest)HttpWebRequest.Create(url);
request.Timeout = 2000;
request.Method = WebRequestMethods.Http.Get;
request.ReadWriteTimeout = 2000;
HttpWebResponse response = (HttpWebResponse)request.GetResponse(); 
```

但是超时不起作用:(。我可以使用后台工作人员来超时吗？

# .net - Crystal Reports 中子报表的任何替代方案

> ID：12932285
> 
> 赞同：-4
> 
> 时间：2012-10-17T10:29:49.357
> 
> 标签：.net, winforms, crystal-reports

我的报告中有一对多的关系。我使用子报告来处理这种情况，但报告变得如此缓慢以至于无法使用。我想知道是否有任何替代水晶报表中的子报表可用于处理一对多关系。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T13:24:47.920

我设法在分组的帮助下做到了。以下是我遵循的步骤，让我们考虑具有多个通信详细信息的单个用户的示例。

1.  创建存储过程以返回所有记录（通过加入用户和通信表）。

2.  在主记录上执行分组（用户 ID）

3.  在该组内部，通过通信 ID 创建了该组。

    ***与子报告相比，它提高了性能。***

# c# - 带有逗号分隔的 Linq (EF) where 子句

> ID：12932286
> 
> 赞同：0
> 
> 时间：2012-10-17T10:29:49.627
> 
> 标签：c#, linq, entity-framework-4, lambda

我有 C# Lambda linq 查询如下：

```
public IQueryable<CtArticleDetail> GetArticleDetailsByTagNames(string tagNames)
{
    return db.CtArticleTags.Where(m => tagNames.Contains(m.CtTag.Name) 
                                       && m.CtArticleDetail.ExpirationDate > DateTime.Now
                                       && m.CtArticleDetail.ArticleStatusId == (int)ArticleStatus.Published)
                           .Select(m => m.CtArticleDetail).OrderBy(x => x.LiveDate).Distinct();
} 
```

由于“包含”，这会返回稍微错误的数据列表。参数实际上是这样的格式：EG（“AterSale,GeneralSale”）。结果列表包含其他销售类型的文章.EG（“Sale”或“ImportedSale”）。

reuslt 列表应该是作为参数传递的确切列表。有人可以请教吗？

```
var mustContain = new[] {"A", "B");

var foos = new  List<Foo>(){
     new Foo1 {Tags = "A"},
     new Foo1 {Tags = "B"},
     new Foo2 {Tags = "A"},
     new Foo2 {Tags = "C"}
}; 
```

如果 mustcontain 是 A,B，我只需要 Foo1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T10:33:35.890

如果我理解正确，`tagNames`是一个字符串，它是一个用逗号分隔的标记名列表。然后你可以使用`String.Split`：

```
String[] tags = tagNames.Split(new[]{","}, StringSplitOptions.RemoveEmptyEntries);
return db.CtArticleTags.Where(m => tags.Contains(m.CtTag.Name) && m.CtArticleDetail.ExpirationDate > DateTime.Now
            && m.CtArticleDetail.ArticleStatusId == (int)ArticleStatus.Published)
            .Select(m => m.CtArticleDetail).OrderBy(x => x.LiveDate).Distinct(); 
```

* * *

根据你的评论

> 如果我需要多个条件怎么办。例如。假设-“标签”包含销售、售后。我喜欢检索那篇文章必须带有 SALE 和 AFTERSALE 标记。不仅是销售或售后

您可以使用`Enumerable.All`，这是一个 Linq-To-Objects 示例，您可以希望将其转换为 Linq-To-Entities：

```
var mustContain = new[] { "A", "B" };
var foos = new List<Foo>() { 
    new Foo{Tags="A,B"},
    new Foo{Tags="B"},
    new Foo{Tags="C,A"},
    new Foo{Tags="D"},
    new Foo{Tags="B,A,C"},
    new Foo{Tags="F,C,A,D,B"},
};

var result = foos
    .Where(f => mustContain.All(mc =>  
        f.Tags.Split(new[] { ',' }, StringSplitOptions.RemoveEmptyEntries)
              .Contains(mc))); 
```

# macros - 如何在逗号后引用列表中的所有项目

> ID：12932288
> 
> 赞同：0
> 
> 时间：2012-10-17T10:29:50.510
> 
> 标签：macros, common-lisp, quote

我想扩展`(foo a b c d e ...)`为 ===>`(bar 'a 'b 'c 'd 'e ...)`

到目前为止，我只得到这个解决方案：

```
(defmacro foo (a1 &rest a2)
  `(bar ',a1 '(,@a2))) 
```

但这会导致：

`(foo a b c d)`===>`(bar 'a '(b c d))`

这不是我想要的。

有人有什么主意吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T12:50:44.437

`'whatever`是 的简写`(quote whatever)`。如果您有一个符号列表，如 A、B、C、D 等，并且您想要一个包含结构的列表`(bar (quote a) (quote b) (quote c) ...)`，您可以执行以下操作：

```
`(bar ,@(mapcar (lambda (symbol) (list 'quote symbol)) symbols)) 
```

# php - 从数据库中转义特殊字符 - MySql

> ID：12932294
> 
> 赞同：1
> 
> 时间：2012-10-17T10:30:05.217
> 
> 标签：php, mysql, database, escaping

大家好，我需要在数据库中搜索 123.456.789 之类的数据，即使我只输入 123456789 我怎么能搜索它？我需要从数据库中转义特殊字符，这样即使我搜索 123456789 它也可以显示像 123.456.789 这样的值。

这是我的查询：

```
SELECT *
FROM clients 
WHERE REPLACE(phone, '.', '') LIKE ".$searchtext." 
```

...`searchtext`我要找的号码在哪里。无论出现什么特殊字符，它都应该返回所有匹配的值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T10:49:23.683

```
select phone from table_name 
 where  replace (cast (phone as text) , '.','')  like '%123456789%' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T11:28:12.603

@基尔

这是示例表和查询。请看看这是否可以帮助你。不确定您的表结构。

```
 CREATE TABLE `clients` (
 `id` int(11) NOT NULL,
 `phone` varchar(255) NOT NULL
 ) ENGINE=InnoDB;

INSERT INTO `test`.`clients` (
`id` ,
`phone`
)
VALUES (
 '1', '123.456.789'
), (
'2', '123.456.785'
);

mysql> select * from clients where replace(phone,'.','') = '123456789'; 
+----+-------------+
| id | phone       |
+----+-------------+
|  1 | 123.456.789 |
+----+-------------+ 
```

希望这有帮助！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-17T10:40:39.777

您*可以*使用 MySQL 的[`REPLACE()`](http://dev.mysql.com/doc/en/string-functions.html#function_replace)功能：

```
SELECT * FROM my_table WHERE REPLACE(my_column, '.', '') = '123456789'; 
```

但是如果`my_column`只包含整数，你真的应该把它改成 MySQL 的[整数类型](http://dev.mysql.com/doc/en/numeric-types.html#integer-types)之一。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-17T11:20:29.897

`Replace()`是做到这一点的最佳功能：

```
Select * from TableName where Replace(ColumnName,'escaping character','replaced character')='your Search option' 
```

对于您的情况，转义字符是`dot(.)`，替换字符是`''`，搜索选项是`'123456789'`

# python - 查找字符串并递归打印当前行和下一行的 shell 脚本

> ID：12932298
> 
> 赞同：1
> 
> 时间：2012-10-17T10:30:26.183
> 
> 标签：python, perl, bash, shell

我编写了一个小脚本来搜索字符串并打印当前行。但是 m 有点困惑打印下一行。我对 bash/perl/python 没问题

```
#!/bin/bash  

CURRENT_DIR=`pwd`
cnt=0

for dir in $(find $CURRENT_DIR -type d)
do
    for myFile in $dir/*  
    do 
        if [ -f "$myFile" ]; then
            cat $myFile | while myLine=`line`
            do
                allFile="$myLine"    
                if echo "$myLine" | grep -q $1 ; then 
                    echo "$myFile" "$allFile" ""
                fi  
                #echo 'expr $count+1'
                #echo   "$allFile"   ""
            done #LINE  
        fi
    done #FILE
done # DIRECTORY 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T10:37:54.560

如果您的 grep 是 GNU：

```
 grep -A1 pattern file 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T10:39:25.770

我在这里用 bash 给你一个例子，这个例子考虑了一个目录中的一堆文本文件。您可以根据需要对其进行操作。

一个目录内

```
 grep "search string" *.txt 
```

搜索或转到子目录

```
 find /full/path/to/dir -name "*.txt" -exec grep "search string" {} ; 
```

希望这可以帮助你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T10:40:08.980

你可以使用 awk 来做到这一点：

```
awk '/Message/{print;getline;print}' your_file 
```

以上是单个文件。此命令将显示匹配的模式行和文件中的下一行。

如果你想在目录结构中的所有文件中递归，那么：

```
find . -name -type f|xargs awk '/Message/{print;getline;print}' 
```

# java - 为每个访问者只启动一次线程的 Servlet

> ID：12932300
> 
> 赞同：1
> 
> 时间：2012-10-17T10:30:31.690
> 
> 标签：java, multithreading, servlets, multi-user

嘿，我想实现一个 Java Servlet，它只为每个用户启动一次线程。即使刷新它也不应该重新开始。我的最后一种方法给我带来了一些麻烦，所以没有代码^^。对 servlet 的布局有什么建议吗？

```
 public class LoaderServlet extends HttpServlet {
// The thread to load the needed information
private LoaderThread loader;
// The last.fm account
private String lfmaccount;

public LoaderServlet() {
    super();
    lfmaccount = "";
}

@Override
protected void doPost(HttpServletRequest request,
        HttpServletResponse response) throws ServletException, IOException {
    if (loader != null) {
        response.setContentType("text/plain");
        response.setHeader("Cache-Control", "no-cache");
        PrintWriter out = response.getWriter();
        out.write(loader.getStatus());
        out.flush();
        out.close();
    } else {
        loader = new LoaderThread(lfmaccount);
        loader.start();
        request.getRequestDispatcher("WEB-INF/pages/loader.jsp").forward(
                request, response);
    }
}

@Override
protected void doGet(HttpServletRequest request,
        HttpServletResponse response) throws ServletException, IOException {
    if (lfmaccount.isEmpty()) {
        lfmaccount = request.getSession().getAttribute("lfmUser")
                .toString();
    }
    request.getRequestDispatcher("WEB-INF/pages/loader.jsp").forward(
            request, response);
}
} 
```

jsp 使用 ajax 定期发布到 servlet 并获取状态。该线程只运行了 3 分钟，爬取了一些 last.fm 数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T10:51:45.447

您在这里需要的是[Session listener](http://docs.oracle.com/javaee/5/api/javax/servlet/http/HttpSessionListener.html)。对于每个浏览器会话，该方法`sessionCreated()`只会被调用一次。因此，即使用户刷新页面，也不会有任何问题。然后，您可以继续为每个`sessionCreated()`方法调用启动线程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T10:59:08.643

实现 javax.servlet.SingleThreadModel => 服务方法不会被并发执行。请参阅 servlet 规范。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T10:49:12.437

您的首要任务是弄清楚如何唯一地识别用户，例如，您将如何识别代理/SOHO 网关后面的不同用户？

一旦你把它弄下来，它基本上只是有一个单例对象为你的 servlet 提供用户<->线程映射。

然后我们进入@beny23 在上面的评论中提到的可扩展性问题......我完全同意所提出的观点 - 你的方法在可扩展性方面并不合理！

干杯，

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-17T10:50:36.153

据我了解，您希望**避免并行处理来自同一用户的请求**。我建议您使用其他方法：**将 lock 与每个用户关联并将其存储在 session 中**。在开始处理用户请求之前 - 尝试获取该锁。因此，当前线程将等待来自该用户的其他请求正在处理。（创建会话时使用会话监听器存储锁）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-17T10:52:41.280

假设它可以通过创建一个来实现`Map<String,Thread>`，然后你的 servlet 被调用，它会尝试使用`sessionId`.

只是一个草图：

```
public class LoaderServlet extends HttpServlet {

  private Map<String,Thread> threadMap = new HashMap<>();

  protected void doPost(..) {
    String sessionId = request.getSesion().getId();
    Thread u = null;
    if(threadMap.containsKey()) {
        u = threadMap.get(sessionId);
    } else {
       u = new Thread(...);
       threadMap.put(sessionId, u);
    }
    // use thread 'u' as you wish
  } 

} 
```

笔记：

*   这使用会话 ID，而不是用户来关联线程
*   看看`ThreadPools`，他们很棒
*   正如评论者指出的那样：此草图**中未考虑同步问题**

# php - 如何从总和等于php中X数的数组中找到最佳子集

> ID：12932301
> 
> 赞同：2
> 
> 时间：2012-10-17T10:30:38.850
> 
> 标签：php, algorithm, combinations

我有一个数组

```
$array = array(3,5,6,10,15,30);
$sum = 69; 
```

那么有 3 个不同的和等于 69：

```
3+5+6+10+15+30,
3+6+10+20+30,
3+6+30+30, 
```

最好的是3+6+30+30。因为它包含来自数组的更高数字来完成减少数字计数的总和。

（一个数字可以在总和中使用的次数与它在列表中出现的次数一样多，并且单个数字计为总和。）这是我正在实现的代码

```
$sum = 18;
$list = array();
$this->sumUpRecursive(array(3,5,6,10,15,30), $list);  //function call
$list = array_filter($list,function($var) use ($sum) { return(array_sum($var) == $sum);});
var_dump($list);

function sumUpRecursive($array, &$list, $temp = array()) {
      if (count($temp) > 0 && !in_array($temp, $list))
        $list[] = $temp;
      for ($i = 0; $i < sizeof($array); $i++) {
        $copy = $array;
        $elem = array_splice($copy, $i, 1);
        if (sizeof($copy) > 0) {
          $add = array_merge($temp, array($elem[0]));
          sort($add);
          $this->sumUpRecursive($copy, $list, $add);
        }
        else {
          $add = array_merge($temp, array($elem[0]));
          sort($add);
          if (!in_array($temp, $list)) {
            $list[] = $add;
          }
        }
      }
    } 
```

结果：

```
Array
    (
[9] => Array
    (
        [0] => 3
        [1] => 5
        [2] => 10
    )

[28] => Array
    (
        [0] => 3
        [1] => 15
    ) 
```

)

我希望这可能有点复杂。它从数组中取一个数字一次。但是如何计算出69...

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-03-05T05:17:55.770

这应该适合你：

这段代码有什么作用（函数`getKnapsackSum()`）？

1.准备数据

在函数的前几行中，我准备了数据，这意味着我对数组 DESC 进行了排序[`rsort()`](http://php.net/manual/en/function.rsort.php)。我用 获取列表的最后一个元素，用[`end()`](http://php.net/manual/en/function.end.php)重置数组指针[`rest()`](http://php.net/manual/en/function.reset.php)并将其分配给临时变量。

2.输入检查

在我开始计算总和之前，我检查输入是否不是 0。

3.计算总和

在这之后，真正的事情发生了（IT 巫术，不是真的）！只要我没有得到总和，我就会从一个错误的循环开始。while 循环中的下两行用于检查，首先如果无法计算总和，它返回一个带有 0 的数组，其次是当我们得到数组指针的“偏移量”时，我设置它返回最后一个数组元素。

然后第一个 if 子句用于检查它是否犯了错误，它必须用较低的值进行尝试。举个例子：

```
list = [3, 5, 6]
sum = 8 
```

```
 //entire sum
                        | 0
                        |
check 6:                |
                        |
      6 + sum  -> 8     | 6               | fits
      6 + sum  -> 8     |                 | does not fit
                        |
check 5:                |
                        |
      5 + sum  -> 8     |                 | does not fit
                        |
check 3:                |
                        |
      3 + sum  -> 8     |                 | does not fit

--------------------------------------------------------
                          = sum = [6] != 8 
```

正如你在这个例子中看到的那样，算法犯了一个错误，因为它开始用 6 构建总和，但是在此之后它直到最后都无法构建它，现在这里是第一个 if 子句检查的地方，如果数组指针的当前元素是数组的末尾，并且这个值 + 当前总和高于目标。

如果是这种情况，它会从 sum 数组中删除最后一个值并弹出列表的最高元素。因此，现在它使用以下数据再次尝试：

```
list = [3, 5]
          //^ As you can see it removed the highest value of the list 
sum = 8 
```

```
 //entire sum
                        | 0 <- it removed the last value of the sum array, here 6
                        |
check 5:                |
                        |
      5 + sum  -> 8     | 5               | fits
      5 + sum  -> 8     |                 | does not fit
                        |
check 3:                |
                        |
      3 + sum  -> 8     | 3               | fits
      3 + sum  -> 8     |                 | does not fit

--------------------------------------------------------
                          = sum = [5, 3] == 8 
```

因此，正如您现在所看到的，第一个 if 子句使使用列表构建总和成为可能。所以 if 语句确保它纠正了级别 1 的错误。

现在，我的 while 循环中的第二个 if 语句更正了级别 2 的错误。那么级别 2 的错误是什么？我们也再看一个例子：

```
list = [3, 5, 6]
sum = 22 
```

```
 //entire sum
                        | 0
                        |
check 6:                |
                        |
      6 + sum  -> 22    | 6               | fits
      6 + sum  -> 22    | 6               | fits
      6 + sum  -> 22    | 6               | fits
      6 + sum  -> 22    |                 | does not fit
                        |
check 5:                |
                        |
      5 + sum  -> 22    |                 | does not fit
                        |
check 3:                |
                        |
      3 + sum  -> 22    | 3               | fits
      3 + sum  -> 22    |                 | does not fit

--------------------------------------------------------
                          = sum = [6, 6, 6, 3] != 22 
```

所以你可以看到它不能完全建立总和。但是这次它不是级别 1 的错误，因为如果我们从当前总和中取出最后一个元素并遍历我们删除最高元素的新列表，它仍然无法构建总和，如您在此处看到的：

更正错误级别 1：

```
list = [3, 5]
          //^ As you can see it removed the highest value of the list 
sum = 22 
```

```
 //entire sum
                        | [6, 6, 6] <- it removed the last value of the sum array, here 3
                        |
check 5:                |
                        |
      5 + sum  -> 22    |                | does not fit
                        |
check 3:                |
                        |
      3 + sum  -> 22    | 3              | fits
      3 + sum  -> 22    |                | does not fit
                        |
--------------------------------------------------------
                          = sum = [6, 6, 6, 3] != 22 
```

所以你可以看到它现在被卡住了，它不能只用第一个 if 子句来纠正错误。这是第二个 if 语句检查列表是否为空的地方，如果是这种情况，则意味着您尝试了每个值，但错误在 sum 数组中更高。

所以现在它返回 sum 数组的 1 个数组元素并将其删除。它还将错误作为偏移量来获得一个没有错误数字的列表。所以在这里：`[6, 6, 6, 3]`3 从第一个 if 子句中删除，所以现在数组看起来像这样：`[6, 6, 6]`。现在第二个 if 语句看到错误是 6。它删除它并更正它从中选择数字的列表。

所以现在结果数组看起来像：`[6, 6]`和从中选择数字的列表是这样的：`[5, 3]`。现在它对 2 级进行了更正，它可以建立总和，如下所示：

```
list = [3, 5]
          //^ As you can see it removed the highest value of the list 
sum = 22 
```

```
 //entire sum
                        | [6, 6] <- it removed the last value of the sum array, here 3 and 6
                        |
check 5:                |
                        |
      5 + sum  -> 22    | 5              | fits
      5 + sum  -> 22    | 5              | fits
      5 + sum  -> 22    |                | does not fit
                        |
check 3:                |
                        |
      3 + sum  -> 22    |                | does not fit
                        |
                        |
--------------------------------------------------------
                          = sum = [6, 6, 5, 5] == 22 
```

因此，在此之后，if else 语句只是为了检查列表的当前值是否适合 sum 数组并且不大于目标。如果合适，则将其添加到数组中，否则将转到下一个列表元素。

现在你可以看到我的代码纠正了一些错误，但我不能 100% 确定它适用于所有事情，我也不确定你是否会产生 3 级错误，你必须返回 sum 数组一个正确的 3 个值，如果有一个值，我也不确定我的代码是否纠正了它，甚至可能陷入无限循环。

但毕竟这里的谈话是发挥所有魔力的代码：

```
<?php

    //data
    $arr = [3,5,6,10,15,30];
    $sum = 69;

    //get sum
    function getKnapsackSum($arr, $sum) {
        //prepare data
        rsort($arr);
        $end = end($arr);
        reset($arr);
        $tmp = $arr;
        $result = [];

        //check if it is not a empty input
        if($sum == 0 || empty($tmp) || array_sum($tmp) == 0) return [0];

        //calculate the sum
        while(array_sum($result) != $sum) {
            if(empty($tmp) && empty($result)) return [0];
            if(current($tmp) === FALSE) end($tmp);

            //correction for errors level 1
            if(current($tmp) == $end && array_sum($result) + current($tmp) > $sum) {
                array_pop($result);
                array_shift($tmp);
                reset($tmp);
            }

            //correction for errors level 2
            if(empty($tmp)) {
                $mistake = array_pop($result);
                if($mistake == NULL) return [0];
                $tmp = array_slice($arr, array_search($mistake, $arr)+1);
                reset($tmp);
            }

            if(array_sum($result) + current($tmp) <= $sum)
                $result[] = current($tmp);
            else
                next($tmp);     
        }
        return $result;
    }

    $result = getKnapsackSum($arr, $sum);
    print_r($result);

?> 
```

输出：

```
Array ( [0] => 30 [1] => 30 [2] => 6 [3] => 3 ) 
```

这里还有一些输入示例和我的代码的输出：

```
 input        |        output    
------------------------------------
 list: []        |
 goal:  0        |  sum: [0]
------------------------------------
 list: []        |
 goal:  1        |  sum: [0]
------------------------------------
 list: [0]       |
 goal:  1        |  sum: [0]
------------------------------------
 list: [0]       |
 goal:  0        |  sum: [0]
------------------------------------
 list: [3, 5, 6] |  //error level 1
 goal:  8        |  sum: [5, 3]
------------------------------------
 list: [3, 5, 6] |  //error level 2
 goal: 22        |  sum: [6, 6, 5, 5]
------------------------------------
 list: [5, 7, 9] |  //can't build the sum
 goal: 56        |  sum: [0]
------------------------------------
 list: [5, 7, 9] |
 goal: 34        |  sum: [9, 9, 9, 7]
------------------------------------ 
```

# objective-c - 使用 tableview 作为水平滚动并为视图设置动画，还为文本设置动画，如 marquee

> ID：12932302
> 
> 赞同：1
> 
> 时间：2012-10-17T10:30:40.397
> 
> 标签：objective-c

```
//To Drag the image View on the iphone screen

- (void) touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event {

    UITouch *touch = [[event allTouches] anyObject];
    point0 = [touch locationInView:self.view];
    if ([touch tapCount] == 2) {
        dropDownBool = NO;
        pushUpBool = NO;
        self.imageView.alpha = 0.4;
        doublePressed = YES;
    }

    if(doublePressed)
    {
    point0 = [touch locationInView:self.view];

    if (CGRectContainsPoint([self.imageView frame], [touch locationInView:[touch view]])) 
    {
        self.imageView.center = [touch locationInView:nil];
    }

    }

}

- (void) touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event 
{
UITouch *touch = [[event allTouches] anyObject];
point0 = [touch locationInView:self.imageView];

if(doublePressed)
{
UITouch *touch = [[event allTouches] anyObject];
point0 = [touch locationInView:self.imageView];
//animating the view... 
[UIView beginAnimations:nil context:NULL];
[UIView setAnimationDuration:0.5];
CGAffineTransform transform =CGAffineTransformTranslate(CGAffineTransformIdentity,0.0f, 0.0f);
self.imageView.transform = transform;
[UIView commitAnimations];
doublePressed = NO;
self.imageView.alpha = 1.0;
}
}

// To drop down a view as you swipe on top of the screen

-(void)handleSwipeGesture:(UISwipeGestureRecognizer *) sender 
{
    //Gesture detect - swipe up/down , can be recognized direction
    if(sender.direction == UISwipeGestureRecognizerDirectionUp)
    {
        pushUpBool = YES;
    }
    else
        if(sender.direction == UISwipeGestureRecognizerDirectionDown)
        {
            dropDownBool = YES;
        }

    if(dropDownBool && (point0.y < 80.0f))
    {
        NSLog(@"%f",point0.y);
        [UIView beginAnimations:nil context:NULL];
        [UIView setAnimationDuration:0.25];
        self.dropDownView.center = CGPointMake(originalCenter.x,30.0 );
        self.dropDownView.alpha = 0.8;
        dropDownBool = NO;
    }
    if(pushUpBool && (point0.y < 80.0f))
    {
        [UIView beginAnimations:nil context:NULL];
        [UIView setAnimationDuration:0.25];
        pushUpBool = NO;
        self.dropDownView.center = originalCenter;
        self.dropDownView.alpha = 0.0;
    }
}

// animates from left to right like Marqee...
-(void) scrollLeft
{

CABasicAnimation *scrollText;
scrollText=[CABasicAnimation animationWithKeyPath:@"position.x"];
scrollText.duration = 6.0;
scrollText.repeatCount = 10000;
scrollText.autoreverses = NO;
scrollText.fromValue = [NSNumber numberWithFloat:500];
scrollText.toValue = [NSNumber numberWithFloat:-120.0];
[[self.detailView layer] addAnimation:scrollText forKey:@"scrollTextKey"];
}

// Making the table View scroll horizontally place this code in viewDidLoad.

CGAffineTransform transform = CGAffineTransformMakeRotation(-1.5707963);    
self.horizontalTableView.transform = transform; 

// now in tableview method transform the cell back.
- (void)tableView:(UITableView *)tableView willDisplayCell:(UITableViewCell *)cell forRowAtIndexPath:(NSIndexPath *)indexPath 
{
CGAffineTransform transform = CGAffineTransformMakeRotation(1.5707963);
cell.transform = transform;
} 
```

使用上述方法可以将表格视图转换为水平滚动视图。您可以通过双击图像并将其在屏幕上移动来拖动图像视图。如果您有任何问题，请随时。

# iphone - 在 iPhone 的 uitextview 中获取光标的确切位置

> ID：12932303
> 
> 赞同：0
> 
> 时间：2012-10-17T10:30:42.880
> 
> 标签：iphone, xcode

如何在 iPhone 的 UITextview 中获取光标的确切位置。我知道光标的位置可以通过使用'text_view.selectedRange.location'来获得。我想要光标的 X 和 Y 坐标。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T10:38:25.827

```
CGPoint origin = myTextView.frame.origin;
NSString* myHead = [myTextView.text substringToIndex:textView.selectedRange.location];
CGSize initialSize = [myHead sizeWithFont:myTextView.font constrainedToSize:myTextView.contentSize];
NSUInteger startOfLine = [myHead length];
while (startOfLine > 0) {
    /*
     * 1\. Adjust startOfLine to the beginning of the first word before startOfLine
     * 2\. Check if drawing the substring of head up to startOfLine causes a reduction in height compared to initialSize.
     * 3\. If so, then you've identified the start of the line containing the cursor, otherwise keep going.
     */
}

NSString* textTailSection = [head substringFromIndex:startOfLine];
CGSize lineTotalSize = [textTailSection sizeWithFont:myTextView.font forWidth:myTextView.contentSize.width lineBreakMode:UILineBreakModeWordWrap];

CGPoint cursorPoint = origin;
cursorPoint.x += lineTotalSize.width;
cursorPoint.y += initialSize.height - lineTotalSize.height; 
```

**cursorPoint**包含该点。

# c# - StartCoroutine / yield return 模式在 Unity 中如何真正起作用？

> ID：12932306
> 
> 赞同：146
> 
> 时间：2012-10-17T10:30:48.443
> 
> 标签：c#, unity3d, coroutine

我了解协程的原理。我知道如何让标准`StartCoroutine`/`yield return`模式在 Unity 中的 C# 中工作，例如调用通过返回的方法`IEnumerator`并`StartCoroutine`在该方法中执行某些操作`yield return new WaitForSeconds(1);`，等待一秒钟，然后执行其他操作。

我的问题是：幕后到底发生了什么？`StartCoroutine`真正做什么？什么`IEnumerator`是`WaitForSeconds`回归？如何`StartCoroutine`将控制权返回到被调用方法的“其他”部分？所有这些如何与 Unity 的并发模型（其中很多事情在不使用协程的情况下同时进行）交互？

* * *

## 回答 #1

> 赞同：118
> 
> 时间：2015-09-09T00:09:16.420

经常引用的[Unity3D 协程详细](http://www.altdevblogaday.com/2011/07/07/unity3d-coroutines-in-detail/)链接已失效。由于在评论和答案中提到了它，我将在此处发布文章的内容。此内容来自[这面镜子](http://m.blog.csdn.net/blog/StupidCodeGenerator/11526285)。

* * *

> Unity3D协程详解
> 
> 游戏中的许多过程发生在多个帧的过程中。你有“密集”的过程，比如寻路，它在每一帧都努力工作，但被分成多个帧，以免对帧速率产生太大影响。你有“稀疏”的过程，比如游戏触发器，大多数帧什么都不做，但偶尔会被要求做关键的工作。而且你在两者之间有各种各样的过程。
> 
> 每当您创建一个将在多个帧上发生的进程时——没有多线程——你需要找到某种方法将工作分解成可以每帧运行一个的块。对于任何具有中心循环的算法，这是相当明显的：例如，一个 A* 探路者可以构造成半永久性地维护其节点列表，每帧只处理开放列表中的少数节点，而不是尝试一口气完成所有工作。需要做一些平衡来管理延迟——毕竟，如果你将帧速率锁定在每秒 60 或 30 帧，那么你的过程将只需要每秒 60 或 30 步，这可能会导致过程只需要整体太长了。一个简洁的设计可能会在一个层次上提供尽可能小的工作单元——例如 处理单个 A* 节点——并在顶层将工作组合成更大的块——例如，继续处理 A* 节点 X 毫秒。（有些人称其为“时间片”，尽管我没有）。
> 
> 尽管如此，允许以这种方式分解工作意味着您必须将状态从一帧转移到下一帧。如果你要打破一个迭代算法，那么你必须保留迭代之间共享的所有状态，以及一种跟踪接下来要执行哪个迭代的方法。这通常不算太糟糕——“A* 探路者类”的设计相当明显——但也有其他情况不太令人愉快。有时你会面临长时间的计算，这些计算在不同的帧之间进行不同类型的工作；捕获其状态的对象最终可能会得到一大堆半有用的“本地”，用于将数据从一帧传递到下一帧。而且，如果您正在处理一个稀疏进程，您通常最终不得不实现一个小型状态机来跟踪何时应该完成工作。
> 
> 如果不必在多个帧中显式跟踪所有这些状态，也不必多线程和管理同步和锁定等，您可以将您的函数编写为单个代码块，这不是很好吗？标记功能应该“暂停”并在以后继续的特定位置？
> 
> Unity 以及许多其他环境和语言以协程的形式提供了这一点。
> 
> 他们看起来怎么样？在“Unityscript”（Javascript）中：

```
function LongComputation()
{
    while(someCondition)
    {
        /* Do a chunk of work */

        // Pause here and carry on next frame
        yield;
    }
} 
```

> 在 C# 中：

```
IEnumerator LongComputation()
{
    while(someCondition)
    {
        /* Do a chunk of work */

        // Pause here and carry on next frame
        yield return null;
    }
} 
```

> 它们是如何工作的？让我快点说，我不为 Unity Technologies 工作。我还没有看到 Unity 源代码。我从未见过 Unity 协程引擎的胆量。但是，如果他们以与我将要描述的完全不同的方式实现它，那么我会感到非常惊讶。如果 UT 的任何人想插话并谈论它的实际工作原理，那就太好了。
> 
> 大线索在 C# 版本中。首先，请注意函数的返回类型是 IEnumerator。其次，请注意其中一个语句是 yield return。这意味着 yield 必须是关键字，并且由于 Unity 的 C# 支持是 vanilla C# 3.5，因此它必须是 vanilla C# 3.5 关键字。事实上，[它在 MSDN 中](http://msdn.microsoft.com/en-us/library/9k7k7cf0(v=vs.80).aspx)——谈论称为“迭代器块”的东西。发生什么了？
> 
> 首先，有这个 IEnumerator 类型。IEnumerator 类型就像一个序列上的光标，提供了两个重要的成员：Current，它是一个属性，为您提供光标当前所在的元素，以及 MoveNext()，一个移动到序列中下一个元素的函数。因为 IEnumerator 是一个接口，它并没有具体说明这些成员是如何实现的；MoveNext() 可以只添加一个 toCurrent，或者它可以从文件中加载新值，或者它可以从 Internet 下载图像并将其散列并将新散列存储在 Current 中……或者它甚至可以首先做一件事序列中的元素，而第二个元素则完全不同。如果您愿意，您甚至可以使用它来生成无限序列。MoveNext() 计算序列中的下一个值（如果没有更多值，则返回 false），
> 
> 通常，如果你想实现一个接口，你必须编写一个类，实现成员，等等。迭代器块是实现 IEnumerator 的一种便捷方式，无需任何麻烦——您只需遵循一些规则，编译器会自动生成 IEnumerator 实现。
> 
> 迭代器块是一个常规函数，它 (a) 返回 IEnumerator，并且 (b) 使用 yield 关键字。那么 yield 关键字实际上是做什么的呢？它声明序列中的下一个值是什么——或者没有更多的值。代码遇到 yield return X 或 yield break 的点是 IEnumerator.MoveNext() 应该停止的点；yield return X 导致 MoveNext() 返回 true 并且 Current 被分配值 X，而 yield break 导致 MoveNext() 返回 false。
> 
> 现在，这是诀窍。序列返回的实际值是什么并不重要。您可以重复调用 MoveNext()，而忽略 Current；仍将执行计算。每次调用 MoveNext() 时，您的迭代器块都会运行到下一个“yield”语句，而不管它实际生成的表达式是什么。因此，您可以编写如下内容：

```
IEnumerator TellMeASecret()
{
  PlayAnimation("LeanInConspiratorially");
  while(playingAnimation)
    yield return null;

  Say("I stole the cookie from the cookie jar!");
  while(speaking)
    yield return null;

  PlayAnimation("LeanOutRelieved");
  while(playingAnimation)
    yield return null;
} 
```

> 您实际编写的是一个迭代器块，它生成一长串空值，但重要的是它为计算它们所做的工作的副作用。你可以使用这样的简单循环来运行这个协程：

```
IEnumerator e = TellMeASecret();
while(e.MoveNext()) { } 
```

> 或者，更有用的是，您可以将其与其他工作混合：

```
IEnumerator e = TellMeASecret();
while(e.MoveNext()) 
{ 
  // If they press 'Escape', skip the cutscene
  if(Input.GetKeyDown(KeyCode.Escape)) { break; }
} 
```

> 正如您所见，每个 yield return 语句都必须提供一个表达式（如 null），以便迭代器块可以实际分配给 IEnumerator.Current。一长串的空值并不是很有用，但我们对副作用更感兴趣。我们不是吗？
> 
> 实际上，我们可以用这个表达式做一些方便的事情。如果我们不是仅仅产生 null 并忽略它，而是产生了一些表明我们何时需要做更多工作的东西怎么办？通常我们需要直接继续下一帧，当然，但并非总是如此：在动画或声音播放完毕或经过特定时间后，我们会想要继续进行很多次。那些 while(playingAnimation) 产生返回 null；构造有点乏味，你不觉得吗？
> 
> Unity 声明了 YieldInstruction 基类型，并提供了一些具体的派生类型来指示特定类型的等待。你有 WaitForSeconds，它会在指定的时间过去后恢复协程。你有 WaitForEndOfFrame，它会在同一帧稍后的特定点恢复协程。你有 Coroutine 类型本身，当协程 A 产生协程 B 时，它会暂停协程 A，直到协程 B 完成。
> 
> 从运行时的角度来看，这是什么样的？正如我所说，我不为 Unity 工作，所以我从未见过他们的代码；但我想它可能看起来有点像这样：

```
List<IEnumerator> unblockedCoroutines;
List<IEnumerator> shouldRunNextFrame;
List<IEnumerator> shouldRunAtEndOfFrame;
SortedList<float, IEnumerator> shouldRunAfterTimes;

foreach(IEnumerator coroutine in unblockedCoroutines)
{
    if(!coroutine.MoveNext())
        // This coroutine has finished
        continue;

    if(!coroutine.Current is YieldInstruction)
    {
        // This coroutine yielded null, or some other value we don't understand; run it next frame.
        shouldRunNextFrame.Add(coroutine);
        continue;
    }

    if(coroutine.Current is WaitForSeconds)
    {
        WaitForSeconds wait = (WaitForSeconds)coroutine.Current;
        shouldRunAfterTimes.Add(Time.time + wait.duration, coroutine);
    }
    else if(coroutine.Current is WaitForEndOfFrame)
    {
        shouldRunAtEndOfFrame.Add(coroutine);
    }
    else /* similar stuff for other YieldInstruction subtypes */
}

unblockedCoroutines = shouldRunNextFrame; 
```

> 不难想象如何添加更多 YieldInstruction 子类型来处理其他情况 - 例如，可以添加对信号的引擎级支持，并使用 WaitForSignal("SignalName")YieldInstruction 支持它。通过添加更多的 YieldInstructions，协程本身可以变得更具表现力——如果你问我，yield return new WaitForSignal("GameOver") 比 while(!Signals.HasFired("GameOver")) 更易读，如果你问我，除了事实上，在引擎中执行它可能比在脚本中执行它更快。
> 
> 一些不明显的后果 关于这一切，人们有时会忽略一些有用的东西，我认为我应该指出。
> 
> 首先，yield return 只是产生一个表达式——任何表达式——而 YieldInstruction 是一个常规类型。这意味着您可以执行以下操作：

```
YieldInstruction y;

if(something)
 y = null;
else if(somethingElse)
 y = new WaitForEndOfFrame();
else
 y = new WaitForSeconds(1.0f);

yield return y; 
```

> 特定行 yield return new WaitForSeconds()、yield return new WaitForEndOfFrame() 等很常见，但它们本身并不是特殊形式。
> 
> 其次，因为这些协程只是迭代器块，如果你愿意，你可以自己迭代它们——你不必让引擎为你做。我以前用它来向协程添加中断条件：

```
IEnumerator DoSomething()
{
  /* ... */
}

IEnumerator DoSomethingUnlessInterrupted()
{
  IEnumerator e = DoSomething();
  bool interrupted = false;
  while(!interrupted)
  {
    e.MoveNext();
    yield return e.Current;
    interrupted = HasBeenInterrupted();
  }
} 
```

> 第三，您可以在其他协程上让出这一事实可以让您实现自己的 YieldInstructions，尽管性能不如引擎实现的那么好。例如：

```
IEnumerator UntilTrueCoroutine(Func fn)
{
   while(!fn()) yield return null;
}

Coroutine UntilTrue(Func fn)
{
  return StartCoroutine(UntilTrueCoroutine(fn));
}

IEnumerator SomeTask()
{
  /* ... */
  yield return UntilTrue(() => _lives < 3);
  /* ... */
} 
```

> 但是，我不会真的推荐这个——启动协程的成本对我来说有点沉重。
> 
> 结论 我希望这能澄清一些在 Unity 中使用协程时实际发生的情况。C# 的迭代器块是一个时髦的小结构，即使您不使用 Unity，也许您会发现以同样的方式利用它们很有用。

* * *

## 回答 #2

> 赞同：104
> 
> 时间：2013-03-14T15:08:46.813

下面的第一个标题是对这个问题的直接回答。后面的两个标题对日常程序员更有用。

## 可能无聊的协程实现细节

[协程在Wikipedia](https://en.wikipedia.org/wiki/Coroutine)和其他地方都有解释。在这里，我将从实际的角度提供一些细节。`IEnumerator`,`yield`等是[C# 语言功能](https://msdn.microsoft.com/en-us/library/9k7k7cf0.aspx)，在 Unity 中用于不同的目的。

简而言之，an`IEnumerator`声称拥有一组值，您可以逐个请求这些值，有点像`List`. 在 C# 中，具有返回 an 签名的函数`IEnumerator`不必实际创建并返回一个，但可以让 C# 提供一个隐式`IEnumerator`. 然后，该函数可以通过语句`IEnumerator`以惰性方式提供将来返回的内容。`yield return`每次调用者从该隐式请求另一个值时`IEnumerator`，该函数都会执行到下`yield return`一条语句，该语句提供下一个值。作为这个的副产品，函数会暂停，直到请求下一个值。

在 Unity 中，我们不使用这些来提供未来值，我们利用函数暂停的事实。由于这种利用，Unity 中关于协程的很多事情都没有意义（`IEnumerator`与任何事情有什么关系？什么是`yield`？为什么`new WaitForSeconds(3)`？等等）。“在幕后”发生的事情是，您通过 IEnumerator 提供的值用于`StartCoroutine()`决定何时请求下一个值，这决定了您的协程何时再次取消暂停。

## 您的 Unity 游戏是单线程的 (*)

协程**不是**线程。Unity 有一个主循环，您编写的所有这些函数都被同一个主线程按顺序调用。`while(true);`您可以通过在您的任何函数或协程中放置 a 来验证这一点。它将冻结整个事物，甚至是 Unity 编辑器。这证明一切都在一个主线程中运行。[Kay 在上面的评论中提到的这个链接](http://webcache.googleusercontent.com/search?q=cache:XgO6c7yCmIsJ:altdevblog.com/2011/07/07/unity3d-coroutines-in-detail/+&cd=1&hl=en&ct=clnk&gl=tr)也是一个很好的资源。

(*) Unity 从一个线程调用您的函数。因此，除非您自己创建线程，否则您编写的代码是单线程的。当然，Unity 确实使用了其他线程，如果您愿意，您可以自己创建线程。

## 游戏程序员的协程实用描述

基本上，当您调用 时`StartCoroutine(MyCoroutine())`，它与对 的常规函数​​调用完全一样`MyCoroutine()`，直到第一个`yield return X`,`X`类似`null`, `new WaitForSeconds(3)`, `StartCoroutine(AnotherCoroutine())`,`break`等的地方。这是它开始与函数不同的时候。Unity 会在该行“暂停”该功能`yield return X`，继续其他业务并且某些帧通过，当时间再次到来时，Unity 会在该行之后立即恢复该功能。它记住函数中所有局部变量的值。例如，通过这种方式，您可以有一个`for`每两秒循环一次的循环。

Unity 何时恢复您的协程取决于`X`您的`yield return X`. 例如，如果您使用`yield return new WaitForSeconds(3);`，它会在 3 秒后恢复。如果您使用，它会在完成`yield return StartCoroutine(AnotherCoroutine())`后恢复，这使您能够及时嵌套行为。`AnotherCoroutine()`如果您刚刚使用 a `yield return null;`，它将在下一帧继续。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2016-02-08T22:05:15.353

# 再简单不过了：

Unity（和所有游戏引擎）都是*基于框架的*。

Unity 的全部意义，全部存在的理由，就是它是基于框架的。**引擎为你做“每一帧”的事情。** （动画、渲染物体、做物理等等。）

你可能会问..“哦，那太好了。如果我希望引擎在每一帧都为我做一些事情怎么办？我如何告诉引擎在一帧中做某事？”

# 答案是 ...

这正是“协程”的用途。

就是这么简单。

# 关于“更新”功能的说明...

很简单，您在“更新”中输入的任何内容都会在*每一帧*中完成。从字面上看，它与 coroutine-yield 语法完全相同，完全没有区别。

```
void Update()
 {
 this happens every frame,
 you want Unity to do something of "yours" in each of the frame,
 put it in here
 }

...in a coroutine...
 while(true)
 {
 this happens every frame.
 you want Unity to do something of "yours" in each of the frame,
 put it in here
 yield return null;
 } 
```

绝对没有区别。

# 无论如何，线程与帧/协程完全没有联系。没有任何联系。

无论如何，游戏引擎中的帧***与线程完全没有联系***。它们是完全、完全、完全不相关的问题。

（您经常听到“Unity 是单线程的！”***请注意，即使是这种说法也很混乱。***帧/协程与线程完全没有联系。如果 Unity 是多线程、超线程或在量子计算机上运行的！！ ...它与框架/协程***没有任何关系***。这是一个完全、完全、绝对、不相关的问题。）

如果 Unity 是多线程、超线程或在量子计算机上运行的！！...它与框架/协程***没有任何联系。***这是一个完全、完全、绝对、无关的问题。

# 所以总结...

因此，Coroutines/yield 只是您在 Unity 中访问帧的方式。而已。

（实际上，它与 Unity 提供的 Update() 函数完全一样。）

这就是它的全部，就这么简单。

# 为什么选择 IEnumerator？

再简单不过了：IEnumerator “一遍又一遍”地返回东西。

（该列表可以具有特定的长度，例如“10 件事”，或者该列表可以永远存在。）

因此，不言而喻，您将使用 IEnumerator。

在 .Net 中您想要“一遍又一遍地返回”的任何地方，IEnumerator 都是为此目的而存在的。

所有使用 .Net 的基于帧的计算当然都使用 IEnumerator 来返回每个帧。它还能用什么？

（如果您是 C# 新手，请注意 IEnumerator 也用于一一返回“普通”事物，例如简单地返回数组中的项目等）

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2015-01-30T10:37:38.823

最近对此进行了深入研究，在这里写了一篇文章-http: [//eppz.eu/blog/understanding-ienumerator-in-unity-3d/-](http://eppz.eu/blog/understanding-ienumerator-in-unity-3d/)阐明了内部结构（带有密集的代码示例），底层[**`IEnumerator`**](https://msdn.microsoft.com/en-us/library/78dfe2yb(v=vs.110).aspx)接口，以及它如何用于协程。

> 为此目的使用集合枚举器对我来说仍然有点奇怪。这与枚举器的设计目的相反。枚举器的点是每次访问的返回值，但协程的点是返回值之间的代码。在这种情况下，实际返回的值是没有意义的。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-05-17T16:34:54.723

在**Unity 2017+ 上**，您可以将原生 C# `async`/`await`关键字用于异步代码，但在此之前，**C# 没有原生方式来实现异步代码**。

Unity 不得不为异步代码使用一种变通方法。他们通过利用当时流行的异步技术**C# 迭代器来实现这一点。**

## 了解 C# 迭代器

假设您有以下代码：

```
IEnumerable SomeNumbers() {
  yield return 3;
  yield return 5;
  yield return 8;
} 
```

如果你通过一个循环运行它，就像一个数组一样调用，你会得到`3` `5` `8`：

```
// Output: 3 5 8
foreach (int number in SomeNumbers()) {
  Console.Write(number);
} 
```

如果您不熟悉迭代器（大多数语言都有它们来实现列表和集合），它们就像一个数组一样工作。不同之处在于回调生成值。

## 它们是如何工作的？

在 C# 上循环遍历迭代器时，我们使用`MoveNext`转到下一个值。

在示例中，我们使用`foreach`，它在后台调用此方法。

当我们调用`MoveNext`时，迭代器会执行一切，直到下一个`yield`。父调用者获取返回的值`yield`。然后，迭代器代码暂停，等待下一次`MoveNext`调用。

由于其“惰性”功能，C# 程序员使用迭代器来运行异步代码。

## 使用迭代器在 C# 中进行异步编程

在 2012 年之前，使用迭代器是在 C# 中执行异步操作的流行技巧。

示例 - 异步下载功能：

```
IEnumerable DownloadAsync(string URL) {
  WebRequest  req      = HttpWebRequest.Create(url);
  WebResponse response = req.GetResponseAsync();
  yield return response;

  Stream resp = response.Result.GetResponseStream();
  string html = resp.ReadToEndAsync().ExecuteAsync();
  yield return html;

  Console.WriteLine(html.Result);
} 
```

*PS：上面的代码来自这篇关于使用迭代器进行异步编程的优秀但古老的文章：http: [//tomasp.net/blog/csharp-async.aspx/](http://tomasp.net/blog/csharp-async.aspx/)*

## 我应该使用`async`而不是`StartCoroutine`吗？

至于 2021 年，Unity 官方文档在他们的示例中使用协程而不是`async`.

此外，社区似乎更倾向于协程而不是异步：

*   开发人员熟悉协程；
*   协程与 Unity 集成；
*   和别的;

我推荐 2019 年的 Unity 讲座“***最佳实践：异步与协程 - Unite Copenhagen 2019*** ”：[https ://youtu.be/7eKi6NKri6I](https://youtu.be/7eKi6NKri6I)

* * *

***PS：**这是 2012 年的一个老问题，但我正在回答它，因为它在 2021 年仍然相关。*

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2020-05-21T07:17:12.357

StartCoroutine 是一种调用 IEnumerator 函数的方法。它类似于只调用一个简单的 void 函数，不同之处在于您在 IEnumerator 函数上使用它。这种类型的函数是独一无二的，因为它可以让你使用一个特殊的**yield**函数，注意你必须返回一些东西。据我所知，这就是。这里我统一写了一个简单的**闪烁游戏Over text方法**

```
 public IEnumerator GameOver()
{
    while (true)
    {
        _gameOver.text = "GAME OVER";
        yield return new WaitForSeconds(Random.Range(1.0f, 3.5f));
        _gameOver.text = "";
        yield return new WaitForSeconds(Random.Range(0.1f, 0.8f));
    }
} 
```

然后我从 IEnumerator 本身中调用它

```
 public void UpdateLives(int currentlives)
{
    if (currentlives < 1)
    {
        _gameOver.gameObject.SetActive(true);
        StartCoroutine(GameOver());
    }
} 
```

如您所见，我是如何使用 StartCoroutine() 方法的。希望我能以某种方式帮助。我自己也是一个初学者，所以如果你纠正我或欣赏我，任何类型的反馈都会很棒。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2020-03-24T21:21:52.383

Unity 中自动获取的基础函数是 Start() 函数和 Update() 函数，因此 Coroutine 本质上是与 Start() 和 Update() 函数一样的函数。任何旧函数 func() 都可以像调用协程一样被调用。Unity 显然为协程设置了某些界限，使它们不同于常规函数。一个区别是

```
 void func() 
```

你写

```
 IEnumerator func() 
```

对于协程。同样，您可以使用代码行来控制正常功能的时间，例如

```
 Time.deltaTime 
```

协程在控制时间的方式上有一个特定的句柄。

```
 yield return new WaitForSeconds(); 
```

虽然这不是在 IEnumerator/Coroutine 中唯一可以做的事情，但它是 Coroutines 用来做的有用的事情之一。您必须研究 Unity 的脚本 API 才能了解协程的其他特定用途。

# clojure - 如何在同一项目中的不同 clojurescripts 之间共享代码

> ID：12932308
> 
> 赞同：0
> 
> 时间：2012-10-17T10:30:54.347
> 
> 标签：clojure, clojurescript

我有一个项目编译在应用程序的 2 个页面中使用的 2 个脚本：

```
 :cljsbuild {:builds [{:source-path "src-cljs/search",
                       :compiler {:output-to "resources/public/cljs/search.js" }}
                      {:source-path "src-cljs/view",
                       :compiler { :output-to "resources/public/cljs/view.js"}}
                      ] 
```

我有两个脚本通用的代码。如何共享此代码？我发现的唯一方法是通过一个单独的 Clojure 项目——我在它上面执行“lein install”，它可以像任何其他第三方库一样用于我的 ClojuresScript 代码。

我注意到交叉点，但它们用于在 Clojure 和 ClojureScript 之间共享代码。我不需要 Clojure 中的共享代码。所以我可以使用交叉，但这会在最后的 jar 中留下一些不需要的 Clojure 代码。不是一个大问题，但仍然不是很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T08:52:21.733

In this [article](https://github.com/magomimmo/modern-cljs/blob/master/doc/second-edition/tutorial-06.md) I afforded the same issue. You're solution is the one I called "Easy made complex" solution, because of duplication. The second one which I called the "Simple made easy" should be the one you're looking for.

# java - 如何识别管道中的所有任务何时在单个 Java 执行器服务中完成

> ID：12932313
> 
> 赞同：1
> 
> 时间：2012-10-17T10:31:15.617
> 
> 标签：java, concurrency, java-7, executorservice, java.util.concurrent

我有一个要在文件上完成的任务管道，每种不同类型的任务都在不同的执行程序服务中运行。在初始化每个执行程序服务后，我开始第一个任务，这保证在完成处理所有文件之前不会完成，因为它处理一个文件夹，要么不需要更多工作，要么它向 service2 提交一个可调用的任务。因此，当第一个任务的 shutdown() 调用成功时，所有文件现在都将在 task2 中处理，或者在流水线下游的另一个任务中处理，依此类推。当我们可以关闭最终服务时，我们就完成了。

```
Loader loader = Loader.getInstanceOf();
List<ExecutorService> services = new ArrayList<ExecutorService>();
ExecutorService es = Executors.newSingleThreadExecutor();

//Init Services
services.add(es);
services.add(task1.getService());
services.add(task2.getService());
services.add(task3.getService());
services.add(task4.getService());

//Start Loading Files
es.submit(loader);

int count = 0;
for (ExecutorService service : services)
{
    service.shutdown();
    count++;
    //Now wait for all submitted tasks to complete, for upto one day per task
    service.awaitTermination(10, TimeUnit.DAYS);
    MainWindow.logger.severe("Shutdown Task:" + count);
}

public class AnalyserService
{
    protected String threadGroup;
    public AnalyserService(String threadGroup)
    {
        this.threadGroup=threadGroup;
    }

    protected  ExecutorService      executorService;
    protected  CompletionService    completionService;

    protected void initExecutorService()
    {
        int workerSize = Runtime.getRuntime().availableProcessors();
        executorService
                = Executors.newFixedThreadPool(workerSize, new SongKongThreadFactory(threadGroup));
    }

    public ExecutorService getService()
    {
        if (executorService == null || executorService.isShutdown())
        {
            initExecutorService();
        }
        return executorService;
    }
} 
```

所以这一切都很好，**除了**我的 cpu 加载逻辑不正确。每个服务都使用与计算机拥有的 CPU 数量相等的池。因此，如果计算机有 4 个 CPU，而我们有 5 个服务，那么我们可以有 20 个线程同时尝试工作，从而使 CPU 过载。我想在这种情况下我应该一次只有 4 个线程。

如果我将每个服务限制为使用一个线程，那么 ID 只有 5 个线程同时运行，但这仍然不正确，因为

1.  如果有更多的服务或更多的 CPU 将不再正确
2.  效率低下，因为大部分工作的流水线将由 task1 完成，如果我将其限制为一个 cpu，它将比必要的慢，相反，稍后大多数线程将由以后的任务完成，而 task1 将一无所有去做。

我认为我需要让所有任务共享一个执行器服务，并将其池大小设置为等于计算机拥有的 cput 数量。**但是，我将如何确定服务何时完成**？

我正在使用 Java 7，那么 Java 7 中的新功能是否有帮助，目前只使用 Java 5 并发特性

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-17T10:44:44.610

您问题的核心是：“[...] 使 CPU 过载。” 如果这是问题所在，只需正确安排应用程序的优先级即可。顺便说一句，你更有可能增加 IO 负载而不是增加 CPU 负载；很多不同的线程实际上是一件好事:-)

但是，您的问题是：“但是我将如何确定服务何时完成？” 非常简单的答案：`submit()`而不是`invokeAll()`检查您收到`isDone()`的对象的方法。`Future`

[http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/ExecutorService.html#submit(java.util.concurrent.Callable](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/ExecutorService.html#submit(java.util.concurrent.Callable) )

# django - 将文件从主干模型发送到 django

> ID：12932316
> 
> 赞同：1
> 
> 时间：2012-10-17T10:31:18.497
> 
> 标签：django, file, backbone.js, upload

我想将文件从 Backbone 上传到 Django 文件上传系统。

首先，我遵循了[https://stackoverflow.com/a/10916733/1590377](https://stackoverflow.com/a/10916733/1590377)的解释。我做了一个 FileModel 并根据上述指示，我有一个包含以下信息的模型：

```
attributes: Object
    data: "data:image/png;base64,iVBORw ..."
    file: "image2012-06-12 13:36:45.png" 
```

现在我将模型保存到我在 django 中有上传视图的 URL，如下所示：

```
def upload_file_64(request):
   if request.method == 'POST':

       file = cStringIO.StringIO(base64.b64decode(request.POST['data']))
       #method to save the file
       response_data={"result":"ok"}
       return HttpResponse(simplejson.dumps(response_data), mimetype='application/json')
else:
    response_data={"success": "No a post request"}
    return HttpResponse(simplejson.dumps(response_data), mimetype='application/json') 
```

但 django 系统给我的回应是：

```
"MultiValueDictKeyError at /api/upload64/↵'Key \'data\' not found in <QueryDict: {u\'base64,iVBORw0KG.... 
```

POST http 请求是：

```
 POST:
 base64,iVBORw0KG ..."} = u''
 {"file":"Captura de pantalla de 2012-06-12 13:36:45.png","data":"data:image/png = u'' 
```

我该如何解决这个问题，以便我可以将文件上传到 django。我使用多部分方法从另一个平台上传文件，但使用主干我无法上传文件。

有人可以帮我解决这个问题吗？

谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T15:39:07.080

我编写了另一个解决方案。我使用了一个 jquery 上传插件来上传文件，并得到响应。

该插件是：[http](http://lagoscript.org/jquery/upload/demo?locale=en) ://lagoscript.org/jquery/upload/demo?locale=en ，我在主干视图中使用的代码是：

```
events : {
    'change #file1' : 'upload'
},
upload : function(){

    $('#file1').upload('http://192.168.0.195/api/upload/', function(res) {
            console.log(res)
            //now I use the res to create a model :)
        }, 'html');
}, 
```

# jquery - Jquery - 我在页面上有多个表单。如何在不重新加载页面的情况下更新每个表单

> ID：12932317
> 
> 赞同：0
> 
> 时间：2012-10-17T10:31:24.737
> 
> 标签：jquery, multiple-forms

我是 jQuery 的初学者，我正在尝试创建一个包含多个表单的页面，每个表单都有 3 个公共字段，它们是：**1.**带有 uniqueID 的隐藏字段、**2.**文本框和**3.**提交按钮。

我关心的是如何在单击提交按钮但不刷新页面时获取每个表单记录的隐藏字段和文本框的值。我使用了下面的 jQuery、AJAX 但这并没有在提交时传递该表单的值。

任何人都可以帮我解决这个问题。

我正在使用的Javascript如下：

```
$(document).ready(function() {
    $(".submit").click(function(){
        alert($(this).serialize());
        $.ajax({
        url:"ajax.php",
        type:"POST",
        //data:form.serialize(),
        data:$(this).serialize(),
        success:function(response){
          console.log(response);
            //Do stuff here
      }

   });
        return false;
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T10:34:03.920

试试看

```
alert($(this).parent().serialize()); 
```

正在返回。`this`相对于选择器，在您的示例中是带有 class="submit" 的元素

# c# - 使用c#获取git命令行返回值

> ID：12932319
> 
> 赞同：5
> 
> 时间：2012-10-17T10:31:38.887
> 
> 标签：c#, git

我想从 c# 运行 git 命令。下面是我编写的代码，它确实执行了 git 命令，但我无法捕获返回值。当我从命令行手动运行它时，这是我得到的输出。

![在此处输入图像描述](../Images/697cdb8e7d7492654c562ee1a30b4cea.png)

当我从程序运行时，我唯一得到的是

```
Cloning into 'testrep'... 
```

其余信息未捕获，但命令执行成功。

```
class Program
{
    static void Main(string[] args)
    {
        ProcessStartInfo startInfo = new ProcessStartInfo("git.exe");

        startInfo.UseShellExecute = false;
        startInfo.WorkingDirectory = @"D:\testrep";
        startInfo.RedirectStandardInput = true;
        startInfo.RedirectStandardOutput = true;
        startInfo.Arguments = "clone http://tk1:tk1@localhost/testrep.git";

        Process process = new Process();
        process.StartInfo = startInfo;
        process.Start();

        List<string> output = new List<string>();
        string lineVal = process.StandardOutput.ReadLine();

        while (lineVal != null)
        {

            output.Add(lineVal);
            lineVal = process.StandardOutput.ReadLine();

        }

        int val = output.Count();
        process.WaitForExit();

    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-01-14T01:03:24.850

你试过[libgit2sharp](https://github.com/libgit2/libgit2sharp/wiki)吗？文档不完整，但它非常易于使用，并且有一个[nuget 包](https://www.nuget.org/packages/LibGit2Sharp)。您也可以随时查看[测试代码](https://github.com/libgit2/libgit2sharp/tree/vNext/LibGit2Sharp.Tests)以了解使用情况。一个简单的克隆是这样的：

```
string URL = "http://tk1:tk1@localhost/testrep.git";
string PATH = @"D:\testrep";
Repository.Clone(URL, PATH); 
```

获取更改也很容易：

```
using (Repository r = new Repository(PATH))
{
    Remote remote = r.Network.Remotes["origin"];
    r.Network.Fetch(remote, new FetchOptions());
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-17T10:44:51.740

[从git clone](http://www.kernel.org/pub/software/scm/git/docs/git-clone.html)的手册页：

> --progress 进度状态在连接到终端时默认在标准错误流上报告，除非指定了 -q。即使标准错误流未定向到终端，此标志也会强制执行进度状态。

交互运行时输出中的最后三行`git clone`被发送到标准错误，而不是标准输出。但是，当您从程序运行命令时，它们不会出现在那里，因为它不是交互式终端。您可以强制它们出现，但输出不会是任何可用于程序解析的东西（很多`\r`s 来更新进度值）。

您最好根本不解析字符串输出，而是查看`git clone`. 如果它不为零，那么您有一个错误（并且可能会有一些标准错误，您可以向您的用户显示）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-17T10:38:56.770

一旦您调用`process.WaitForExit()`并且该过程已终止，您可以简单地使用`process.ExitCode`which 将获得您想要的值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-17T13:06:14.050

您的代码看起来不错。这是 git 问题。

```
git clone git://git.savannah.gnu.org/wget.git 2> stderr.txt 1> stdout.txt 
```

**stderr.txt**为空 **stdout.txt**：克隆到 'wget'...

看起来 git 没有使用标准的 console.write() 之类的输出，当它写入百分比时可以看到它，它全部在一行中，而不是：10%

25%

60%

100%

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-04-19T03:12:57.067

```
process.StandardError.ReadToEnd() + "\n" + process.StandardOutput.ReadToEnd(); 
```

# jquery - 使用 JQuery 选择所有元素的数据字段 ID

> ID：12932322
> 
> 赞同：1
> 
> 时间：2012-10-17T10:31:48.680
> 
> 标签：jquery, selector

我试图变得非常简洁，并使用以下 javascript 代码来侦听自定义触发事件：

```
var concat = "";
$("body")
    .unbind("__evt_selgrps_ok")
    .bind("__evt_selgrps_ok", function(event, param) {
        $(param).each( function() {
            concat += $(this).attr("data-field-id");
        });
    }); 
```

使用以下代码触发事件：

```
$("body")
    .trigger('__evt_selgrps_ok', 
    [$("#<%=DialogID%>").find(":input:checked")]); 
```

简单地说，上面获取了当前检查的 Checkbox 类型的所有输入字段，并将元素数组作为参数传递给绑定的处理程序（根据此问题中的第一个代码示例）。

功能上，这段代码运行良好。我只是觉得有很多代码可以做一些比较简单的事情，那就是将所有选中的复选框的“data-field-id”属性值作为参数传递给触发器。

理想情况下，传递给触发器处理程序的值的简单 json 数组会好得多。触发器处理程序实际上不必知道输入元素，因为它只想接收属性值数组。

我想，我的问题的底线是，您如何要求 JQuery 使用某个选择器为您提供所有指定属性的数组。

我只对一个非常简洁的解决方案感兴趣，最好不涉及使用“每个”功能。

谢谢！SR

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T10:36:36.447

您可以使用[map()](http://api.jquery.com/jQuery.map/)从一组元素中投影属性数组：

```
var fieldIds = $("#<%=DialogID%> :input:checked").map(function() {
    return $(this).attr("data-field-id");
}).get(); 
```

在您的情况下，您可以像这样使用它：

```
$("body").trigger("__evt_selgrps_ok",
    $("#<%=DialogID%> :input:checked").map(function() {
        return $(this).attr("data-field-id");
    }).get()); 
```

# java - 读取具有多个选项的字符串

> ID：12932323
> 
> 赞同：-4
> 
> 时间：2012-10-17T10:31:50.970
> 
> 标签：java, string

我有类似的字符串`",yes,,,,,,,,,,,,,"`，它说 option2 是从 15 个选项中选择的。这里，逗号`,`代表一个选项；如果它被选中，那么一些数据将代替选项。我需要阅读这个字符串并获得确切的选项选择值。在上面它应该是选项2。我该怎么做？

我在数据库中有 15 个选项，从这些选项中选择的数据在这里被替换，并且`,`没有选择。

或者，换个角度看，有 15 个字段用逗号分隔。一个字段（在示例中为第二个字段）具有非空值；其他都是空的。如何确定第一个不为空的字段？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T10:45:01.437

试试 String.split(",") - 这将返回 String[]

[http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#split%28java.lang.String%29](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#split%28java.lang.String%29)

公共类拆分{

```
public static void main(String [] args) {
    String [] options = args[0].split(",",15);
    for(int i = 0; i < options.length; i++) {
        System.out.printf("option %d = [%s]\n", i, options[i]);
    }
} 
```

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T10:38:36.247

如果您`String`始终遵循您指定的格式，则可以使用[`String.split()`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#split%28java.lang.String%29). 例如，

```
String[] split = ",yes,,,,,,,,,,,,,".split(",");
System.out.format("The chosen data is in Option %d and is '%s'%n", split.length, split[split.length - 1]); 
```

印刷

```
The chosen data is in Option 2 and is 'yes' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T10:39:22.890

如果我理解正确，你会得到一串逗号，并且在两个逗号之间有一些像“是”这样的词。您的任务是检索该词的索引，即该词前的逗号数（加 1）。

首先，选项的编码是非常愚蠢的，所以如果它是你的责任，那就改变它。

简单的解决方案是计算单词前的逗号。

这样的事情会做：

```
String s = ",yes,,,,"
for ( int i = 0 , len = s.length() ; i < len ; i++ )
    if ( s.charAt(i) != ',' )
        return i+1;
throw new Exception ("No option found"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-17T10:39:39.797

好吧，我假设您想像这样拆分字符串`,`：

```
String[] options = ",yes,,,,,,,,,,,,,".split(",");
String option2 = options[1]; //yields "yes" 
```

但是，你为什么不使用一些更容易理解的标记，比如`option2=yes`等等？

查看[Apache Commons CLI](http://commons.apache.org/cli/)以获取一些库以支持更好的选项。

# extjs - Ext JS 中的事件驱动编程

> ID：12932325
> 
> 赞同：1
> 
> 时间：2012-10-17T10:31:54.573
> 
> 标签：extjs, event-driven

我正在开发一个应用程序，其中来自不同插件的不同小部件将被加载到主机中，并且它们彼此不知道。所以我想使用 EDP 并在一个小部件中引发一个事件（例如，UserDeleted）并在另一个小部件中订阅该事件（著名的发布者/订阅者，或者让我们获得更具体的观察者模式）。

在 jQuery 中，我使用 trigger() 和 bind() 方法来完成此操作。但是，我无法在 Ext JS 中找到任何等效的东西。我错过了什么吗？或者是否有任何其他模式可以在 Ext JS 中创建松散耦合的 UI 小部件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T11:24:51.347

如果您的小部件彼此不了解，则需要使用中介模式。

看来[Ext.util.Observable](http://docs.sencha.com/core/?class=Ext.util.Observable)就是你要找的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T20:46:40.140

由于 ExtJS 4.x Sencha 引入了控制器的概念，控制器以 MVC 应用程序的干净系统模式监听事件。在此方案中，您的组件将触发事件（内置或自定义），控制器将响应这些事件。

要触发自定义事件，您可以在几乎所有其他 ExtJS 类继承的 Observable 类上使用 fireEvent 方法。

# c# - IronPython 用于 SWIG python 接口

> ID：12932331
> 
> 赞同：1
> 
> 时间：2012-10-17T10:32:09.813
> 
> 标签：c#, python, .net, ironpython, swig

我有一个通过 SWIG 创建的 python 接口作为一些 3d 方 C/C++ 程序的包装器。我可以通过 C# 使用它没问题。我只是想知道 IronPython 是否可以让我的“集成生活”变得更简单/无缝。任何反馈将不胜感激。非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T15:32:05.277

IronPython 不能使用 SWIG 生成的包装器。它确实支持[`ctypes`](http://docs.python.org/library/ctypes.html)访问 C/C++，但它真的取决于你需要什么。如果您只是从 C# 调用 Python 包装器，则使用 SWIG 生成 C# 包装器并完全绕过 Python 可能更容易。

# c# - 在 Web 应用程序的服务器上存储图像的更好方法是什么？

> ID：12932334
> 
> 赞同：5
> 
> 时间：2012-10-17T10:32:26.467
> 
> 标签：c#, asp.net, image, webserver, directory

我正在开发一个 Web 应用程序，我需要将图像存储在服务器上（这些图像由用户上传）。我正在为每个新图像生成新的 Guid。我正在创建一个图像的三个图像，即原始图像、图标和拇指。我仍然使用三个不同的文件夹来保存这些。我的项目经理问我为什么我没有为每个用户创建不同的文件夹。所以我的问题是在以下之间存储图像的更好方法是：

1）。仅在三个文件夹中上传图像，即 Original、Icon 和 Thumb，或 2)。为每个用户创建文件夹，然后在其中为原始、拇指和图标创建三个文件夹。我想问一件事如果用户数量超过 100000 那么它会影响性能吗？？？

这是更好的方法。请帮助我做出决定。谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-17T10:35:18.937

我会按用户存储图像。但是，鉴于您可能有很多用户，它可能不是那么简单。

用户文件上传就是：用户特定的文件上传。当您管理这些文件时，您通常需要为每个用户应用各种程序。例如：1）删除用户帐户并删除所有相关文件，2）计算用户使用的空间量，3）列出用户上传的所有文件等。

如果您将这些文件分散在不同的目录中，则很难有效地实施上述过程。

您指定您可能拥有超过 100.000 个用户。根据您的文件系统是什么，您最终可能会因此而遇到麻烦。例如，在 ext3 中，每个目录最多有 32K 个子目录，这对于在每个用户的目录中组织文件可能是个问题（请参阅：[我可以在一个目录中放入多少文件？](https://stackoverflow.com/questions/466521/how-many-files-in-a-directory-is-too-many)）。

假设我们不能在一个目录中存储超过 32K 的文件或目录，那么您需要找到一种解决此限制的方法。例如，您可以根据用户名中的第一个字母将用户文件夹分成几个子目录（并为所有其他起始字符添加一个额外的子目录）：

```
users
   a
      aaron
         ...
   b       
      bertie
         ...
   ...
   misc
      _foobar 
         ...
      @jack
         ... 
```

`100000/25=4000`现在每个目录只有大概的用户，在给定的 32K 之下。

跳出框框思考，*将图像作为文件存储在平面文件系统中可能不是正确的选择*。有专门为存储和处理大量文件而创建的数据库系统。以[MongoDB 的 GridFS 为例](https://stackoverflow.com/questions/4988436/mongodb-gridfs-with-c-how-to-store-files-such-as-images)。它非常高效，可以扩展到大量文件，还可以处理所有较低级别的问题，例如正确的文件系统使用。在 MS SQL 中有[FILESTREAM Storage](http://technet.microsoft.com/en-us/library/bb933993%28v=sql.105%29.aspx)，它特别擅长将文件存储在 NTFS 文件系统上。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-17T10:40:15.577

这取决于。出于安全原因，我更喜欢按用户文件夹存储图像。如果安全性无关紧要，由于文件夹的数量，我将存储在三个不同的文件夹中。

更新：每次创建文件夹都会强制 ASP.NET 重新编译应用程序池，并带来各种后果，例如会话丢失。

我建议创建这样的文件夹结构：

```
year
  month
    day
      hour - if necessary
        images 
```

这意味着每小时只需创建一个文件夹。但是使用此解决方案，有必要为每个用户保存图像路径。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T10:36:34.090

我会按用户存储它，但我不会为每个图像大小创建额外的文件夹。我只是将这三个图像直接存储在用户文件夹中。

此外，我会将所有文件夹存储在项目文件夹之外，作为一种避免在创建新文件夹时重新启动应用程序的方法。

# java - Android 应用程序 - 将用户输入的值乘以和除以三种形式

> ID：12932336
> 
> 赞同：0
> 
> 时间：2012-10-17T10:32:30.700
> 
> 标签：java, android, math

> **可能重复：**
> [Android 应用程序 - 将用户输入的值乘以和除以两种形式](https://stackoverflow.com/questions/12931798/android-app-multiply-and-divide-the-user-entered-values-values-in-the-two-form)

我正在尝试制作一个android应用程序，并且由于我是一个初学者，我想知道是否有人可以帮助我编写代码。

将有三个框输入不同的数字，我希望应用程序将第二个值除以第一个，然后将它乘以第三个。然后在屏幕上显示答案。

该应用程序确实有目的啊哈。

就像 (b/a)*c

太感谢了 ：）

好吧，如果我不知道我在做什么，我很抱歉啊哈。我的朋友正在制作它，我正在尝试为他找到一些代码，所以如果有帮助的话，这就是它的一部分。我认为这是您需要的唯一一点？没有把握...

公共类 MainActivity 扩展 Activity 实现 View.OnClickListener{

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
}

public void OnClick(View v){}
public void helpbtn(View v){

    new AlertDialog.Builder(this)
    .setTitle("Help")
    .setMessage("Numbers" +
            "Value A" +
            "Value B" +
            "Value C")
    .setNeutralButton("I get it now", null)
    .show();
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;

}

public void onClick(View v) {
    // TODO Auto-generated method stub

} 
```

}

# php - 如何包含代码块

> ID：12932339
> 
> 赞同：0
> 
> 时间：2012-10-17T10:32:35.430
> 
> 标签：php, templates, symfony

我正在构建一个小博客引擎，但我遇到了一些问题：我希望能够在我的博客文章中添加代码块，就像 Wikipedia 上的“模板”一样。

其中一些模板有点复杂，需要一些代码。在这种情况下，最佳做法是什么？我认为我不应该将 php 代码放入数据库中，对吧？

无论我如何看待它，可用模板与数据库之间存在脱节。我无法创建模板的下拉列表，或者我可以吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T11:19:10.667

看看在symfony 文档中[包含其他模板。](http://symfony.com/doc/current/book/templating.html#including-other-templates)如果您需要将代码添加到包含的模板中，您应该[嵌入控制器](http://symfony.com/doc/current/book/templating.html#embedding-controllers)。

希望能帮助到你。

# plsql - 在 vb.net 中获取空数据集结果

> ID：12932341
> 
> 赞同：0
> 
> 时间：2012-10-17T10:32:43.393
> 
> 标签：plsql, dataset, vb.net-2010

在 pl/sql 中编写程序。在 vb.net 中调用此过程。我想用 pl/sql 过程的结果填充数据集。但我得到空数据集。在 pl/sql 中，我能够看到输出。在我的应用程序中，我正在使用 oracle.dataaccess.client dll。帮助我在数据集中获取结果。

```
 using  this dll
 Imports Oracle.DataAccess.Client
my code

 Dim orc1 As Oracle.DataAccess.Client.OracleConnection
 orc1 = New OracleConnection("Data Source=xxx;User Id=qqq;Password=123;")
 orc1.open()
Dim objcommand3 As New Oracle.DataAccess.Client.OracleCommand

objcommand3.Connection = orc1
objcommand3.CommandText = "SMSDND.pro_mod934"
objcommand3.CommandType = CommandType.StoredProcedure
Dim oraada As New OracleDataAdapter(objcommand3)
            'oraada .SelectCommand =objcommand3
Dim ods As New DataSet
oraada.Fill(ods)

procedure in pl/sql(using oracle toad)

CREATE  procedure SMSDND.pro_mod934
as
cursor c78 is 
SELECT smsdnd.phonenumbers_tbl.FLD_PHONENUMBER 
FROM smsdnd.phonenumbers_tbl
WHERE not exists (select smsdnd.smsdnd_tbl.FLD_PHONENUMBERS from smsdnd.smsdnd_tbl
where smsdnd.smsdnd_tbl.FLD_PHONENUMBERS = smsdnd.phonenumbers_tbl.FLD_PHONENUMBER and   smsdnd.smsdnd_tbl.FLD_OPSTYPE='A');
m  smsdnd.phonenumbers_tbl.FLD_PHONENUMBER %type;
BEGIN
 OPEN c78;
LOOP
 FETCH c78 INTO m;
EXIT when c78%NOTFOUND;
DBMS_OUTPUT.PUT_LINE(''|| m);
END LOOP;
CLOSE c78;
 EXCEPTION WHEN OTHERS THEN 
  raise_application_error(-20001,'An error was encountered - '||SQLCODE||' -ERROR-  '||SQLERRM);
end;
/ 
```

# javascript - Drupal 7 模块不加载 JavaScript 代码

> ID：12932342
> 
> 赞同：0
> 
> 时间：2012-10-17T10:32:43.587
> 
> 标签：javascript, jquery, drupal-7

我正在尝试为我的模块加载一个 JavaScript 文件。javascript 代码应该执行并动态应用一些 CSS 样式。

但是，我的 jQuery 没有任何效果。普通的原生 JavaScript 代码有效，但我的 jQuery 代码无效。

我正在使用以下代码加载我的 JavaScript：

```
drupal_add_js(drupal_get_path('module', 'my_module') .'/js/mycode.js', 'file'); 
```

我在任何函数之外应用此代码，但在已满`hook_node_view`时将其**加载**。`$view_mode`

 **以下是我的javascript：

```
(function ($) {

    alert('RESPONDING!');

    $('#page').css('background', 'red')

    alert('RESPONDING-2!');

    jQuery('body').click(
        function () {
            alert('clicked!');
        }
    );

})(jQuery); 
```

没有任何`$/jQuery`标记有效，但两个警报语句都有效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T11:20:45.793

@塔里亚马：

感谢您的所有意见和想法。

您对 console.log($('#page')) 的建议非常有启发性。当输出完全为空时，我意识到出现了严重错误。它让我思考，我决定尝试将代码重新定位到“页面底部”。

使用以下修改后的代码：

```
drupal_add_js(drupal_get_path('module', 'my_module') .'/js/mycode.js', array('type' => 'file', 'scope' => 'footer')); 
```

我的**$/jQuery**标记代码现在执行。

谢谢！**

# php - Eclipse：与多个项目共享一个大型框架？

> ID：12932344
> 
> 赞同：0
> 
> 时间：2012-10-17T10:33:05.343
> 
> 标签：php, eclipse, frameworks, shared-libraries

我们使用 PHP 和 HTML/Javascript 进行开发。随着时间的推移，我们开发了一个非常大的源代码库，其中包含几百个 PHP 和 Javascript 库，我们将其用于每个项目。该框架驻留在自己的 svn 存储库中，我们在每个项目中都包含一个外部 svn 链接。

问题是，整个框架本身现在大约有 800MB。我们只参与了几个项目，这并不是一个真正的问题，但现在我们有大约 30 个项目，它们都包含框架的完整副本，这占用了大量空间，并且需要不断更新每个项目复制。

不知何故，我想在项目文件夹*之外拥有框架。*我读过关于在 Eclipse 中引用其他项目的信息，但无法真正让它工作。您如何设置包含路径，以便每个项目“认为”框架通常位于项目文件夹中？您能否像往常一样在 Eclipse 项目中创建虚拟链接来编辑框架中的文件，并获得库的代码帮助？

主要问题之一是我们所有的代码（以及框架本身中的一些库）都依赖于框架位于每个项目内的“框架”文件夹中这一事实。我宁愿不将所有这些引用更改为不同的路径，所以也许我需要一些`.htaccess`技巧来完成这项工作......

其他人是否遵循相同的程序？有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T10:35:38.410

您可以使用“大”项目作为目标平台吗？

[为什么要创建自定义目标平台](http://www.modumind.com/2008/04/21/why-create-a-custom-target-platform/)

如果您将其定义为目标平台，则源在您的工作区中可用，但它们被放置在 1 个文件夹中以用于多个工作区。工作区将链接到平台，但不会将其签出。

# c++ - 为什么 std::make_shared<>() 比 boost::make_shared() 有更好的性能？

> ID：12932348
> 
> 赞同：4
> 
> 时间：2012-10-17T10:33:11.843
> 
> 标签：c++, performance, visual-studio, gcc, boost

我一直在做一些现场性能测试

```
1>std::shared_ptr, std::make_shared based on 'gcc 4.7.2' & 'VC10 implementation' 
2>boost::shared_ptr, boost::make_shared based on boost 1.47 
```

测试结果有点意思。

1>在一般`std`版本中表现更好，但尤其是`std::make_shared`。为什么？`boost`由于 C++ 11 不适用于某些旧项目，因为他们使用的是旧版本的 Visual Studio，我可以提高版本性能吗？

下面是我用来测试这些的代码片段。注意。您需要在 boost 和 std 之间手动切换。注意。“SimpleMSTimer.hpp”是我用于提升 ptime 的计时器包装器，此处发布的时间有点长。但请随意使用您自己的计时器。任何便携式时间都可以。

```
#include "stdafx.h"
#include <vector>
#include <iostream>
#include <boost/shared_ptr.hpp>
#include <boost\make_shared.hpp>

#include "SimpleMSTimer.hpp"//my timer wrapper for boost ptime

using namespace std;
using namespace boost;

class Thing
{
public:
    Thing()
    {
    }

    void method (void)
    {
        int i = 5;
    }
};

typedef boost::shared_ptr<Thing> ThingPtr;

void processThing(Thing* thing)
{
    thing->method();
}

//loop1 and loop2 test shared_ptr in the vector container
void loop1(long long num)
{
    cout << "native raw pointer: ";
    vector<Thing> thingPtrs;
    YiUtil::MSSegmentTimer segTimer(YiUtil::MSSegmentTimer::MLSEC, std::cout);
    for(int i=0; i< num; i++) {
        Thing thing;
        thingPtrs.push_back(thing);
    }
    thingPtrs.clear();
}

void loop2(long long num)
{
    cout << "native boost::shared_ptr: ";
    vector<ThingPtr> thingPtrs;
    YiUtil::MSSegmentTimer segTimer(YiUtil::MSSegmentTimer::MLSEC, std::cout);
    for(int i=0; i< num; i++) {
        ThingPtr p1(new Thing);
        thingPtrs.push_back(p1);
    }
}

void loop3(long long num)
{
    cout << "optimized boost::shared_ptr: ";
    vector<ThingPtr> thingPtrs;

    YiUtil::MSSegmentTimer segTimer(YiUtil::MSSegmentTimer::MLSEC, std::cout);
    for(int i=0; i< num; i++) {
        ThingPtr p1 = boost::make_shared<Thing>();
        thingPtrs.push_back(p1);
    }
}

//loop3 and loop4 test shared_ptr in loop
void loop4(long long num)
{
    cout << "native raw pointer: ";
    YiUtil::MSSegmentTimer segTimer(YiUtil::MSSegmentTimer::MLSEC, std::cout);
    for(int i=0; i< num; i++) {
        Thing* p1 = new Thing();
        processThing(p1);
        delete p1;
    }
}

void loop5(long long num)
{
    cout << "native boost::shared_ptr: ";
    YiUtil::MSSegmentTimer segTimer(YiUtil::MSSegmentTimer::MLSEC, std::cout);
    for(int i=0; i< num; i++) {
        ThingPtr p1(new Thing);
        processThing(p1.get());
    }
}

void loop6(long long num)
{
    cout << "optimized boost::shared_ptr: ";
    YiUtil::MSSegmentTimer segTimer(YiUtil::MSSegmentTimer::MLSEC, std::cout);
    for(int i=0; i< num; i++) {
        ThingPtr p1 = boost::make_shared<Thing>();
        processThing(p1.get());
    }
}

int main() {
    long long num = 10000000;
    cout << "test 1" << endl;
    loop1(num);
    loop2(num);
    loop3(num);

    cout << "test 2"<< endl;
    loop4(num);
    loop5(num);
    loop6(num);

    return 0;
} 
```

发布模式下的 VC10 编译器，gcc 编译时使用标志“-O3”进行最大优化。测试结果：

```
//VS2010 release mode
//boost
test 1
native raw pointer: SegmentTimer: 15 milliseconds/n
native boost::shared_ptr: SegmentTimer: 3312 milliseconds/n
optimized boost::shared_ptr: SegmentTimer: 3093 milliseconds/n
test 2
native raw pointer: SegmentTimer: 921 milliseconds/n
native boost::shared_ptr: SegmentTimer: 2359 milliseconds/n
optimized boost::shared_ptr: SegmentTimer: 2203 milliseconds/n

//std
test 1
native raw pointer: SegmentTimer: 15 milliseconds/n
native std::shared_ptr: SegmentTimer: 3390 milliseconds/n
optimized std::shared_ptr: SegmentTimer: 2203 milliseconds/n
test 2
native raw pointer: SegmentTimer: 937 milliseconds/n
native std::shared_ptr: SegmentTimer: 2359 milliseconds/n
optimized std::shared_ptr: SegmentTimer: 1343 milliseconds/n
==============================================================================
gcc 4.72 release mode
//boost
test 1
native raw pointer: SegmentTimer: 15 milliseconds/n
native boost::shared_ptr: SegmentTimer: 4874 milliseconds/n
optimized boost::shared_ptr: SegmentTimer: 3687 milliseconds/n
test 2
native raw pointer: SegmentTimer: 1109 milliseconds/n
native boost::shared_ptr: SegmentTimer: 2546 milliseconds/n
optimized boost::shared_ptr: SegmentTimer: 1578 milliseconds/n

//std
test 1
native raw pointer: SegmentTimer: 15 milliseconds/n
native std::shared_ptr: SegmentTimer: 3374 milliseconds/n
optimized std::shared_ptr: SegmentTimer: 2296 milliseconds/n
test 2
native raw pointer: SegmentTimer: 1124 milliseconds/n
native std::shared_ptr: SegmentTimer: 2531 milliseconds/n
optimized std::shared_ptr: SegmentTimer: 1468 milliseconds/n 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T10:38:00.843

它们的性能要好得多，因为 Boost 版本没有更新为使用右值引用，这启用了移动语义。而 C++11 版本确实使用移动语义。这意味着 Boost 版本必须更频繁地复制。如果您在 C++11 之前的编译器上进行测试，您的目标基础（带有`std::tr1::shared_ptr`）它们的性能应该更加相似。

# smalltalk - 我的 Seaside 生成的 html 文档中的 onLoad() 函数来自哪里，如何摆脱它？

> ID：12932349
> 
> 赞同：1
> 
> 时间：2012-10-17T10:33:15.777
> 
> 标签：smalltalk, seaside

Seaside 生成的一些（不是全部）html 文档中包含以下元素：

```
<body onload="onLoad()">

<script type="text/javascript">/*<![CDATA[*/function onLoad(){};/*]]>*/</script> 
```

我在这些文档中没有使用任何 Javascript，我想知道这是从哪里来的，以及我是否/如何防止这些部分被添加。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T12:47:26.767

Seaside 在类中生成此标记`WADefaultScriptGenerator`。不幸的是，即使您不使用 Javascript，也需要生成标记，因为不知道 Seaside 何时打开`<body>`标记。

`WAScriptGenerator`您可以通过子类化和在应用程序配置中设置自定义类来自定义（或避免生成 Javascript 标记） 。通过配置界面或以编程方式：

```
application := WAAdmin register: MyRootComponent asApplicationAt: 'myapp'.
application preferenceAt: #scriptGeneratorClass put: MyScriptGenerator. 
```

# php - 在 IIS 上使用 PHP (odbc_connect) 连接到 Oracle

> ID：12932352
> 
> 赞同：1
> 
> 时间：2012-10-17T10:33:25.700
> 
> 标签：php, oracle, iis, odbc

我正在尝试使用 PHP 中的 odb_connect() 函数连接到 Oracle 数据库。PHP 安装在 IIS 上。

我正在使用以下命令：

```
 $dsn="Driver={Microsoft ODBC for Oracle};Server=(DESCRIPTION=(ADDRESS=(PROTOCOL=TCP)(HOST=******)(PORT=1521))(CONNECT_DATA=(SERVICE_NAME=***)));Uid=***;Pwd=***";
 $connect = odbc_connect($dsn, '****', '***') ; 
```

不幸的是为什么脚本运行我收到以下错误：

> 警告：odbc_connect()：SQL 错误：[Microsoft][ODBC driver for Oracle][Oracle]，SQLConnect 中的 SQL 状态 NA000 in ..

任何关于为什么会发生这种情况的想法都将不胜感激。我试图在网上寻找解决方案，但因为在我没有设法修复它之前我从来没有这样做过。

提前致谢 ！

# java - Does Big Memory compliments EhCache & Terracotta server?

> ID：12932357
> 
> 赞同：2
> 
> 时间：2012-10-17T10:33:37.897
> 
> 标签：java, ehcache, terracotta, ehcache-bigmemory

I am using EHCache as second level cache for my application's Hibernate DAO layer. To implement distributed cache I am planning to include Terracotta Server.
Recently I came to know about Terracotta's another product `Big Memory`.
Few questions regarding that:

*   How is Big Memory will help on top of Terracotta/EhCache?
*   Will it compliment Terracotta/EhCache implementation?
*   Will it be worth giving a try?

I work on a Java EE application which has a flex UI, Hibernate ORM layer, SQL Server 2008 and Tomcat application server.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T13:34:07.550

**How will Big Memory help on top of Terracotta/EhCache?**

The way I've understood the point of BigMemory is that it stores large amounts of data on the memory *outside JVM*. This will help if you have *lots* of stuff you want to be cached, so much so that the GC times are impacting your performance like [explained here](http://blog.terracottatech.com/2010/09/bigmemory_explained_a_bit.html).

If your stuff fits with your cache just fine and you don't experience such slowups, I would imagine Big Memory can even slow you down in contrast to terracotta, as [heap within JVM would be faster than outside JVM](http://www.theserverside.com/report/What-Does-BigMemory-Mean-for-Terracotta). At least, it would not improve much.

**Will it compliment Terracotta/EhCache implementation?**

Based on the [documentation](http://ehcache.org/documentation/user-guide/bigmemory), integration to ehcache/terracotta should be quite seamless. So, yes.

**Will it be worth giving a try?**

I'd go first with Terracotta, measuring memory usage, GC times and the impact, and if it would seem like Big Memory could help some more, then sure. If it looks ok, no reason to add extra stuff.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T15:45:51.100

BigMemoryGO offers upto 32 GB free usage. I would suggest to give a try to BigMemory.

BigMemory Go lets you keep all of your application's data instantly available in your server's memory so I don't think it will slow down your app in contrast to Terracotta.

# javascript - 如何快速加载多张图片（没有 Css Sprites）

> ID：12932358
> 
> 赞同：0
> 
> 时间：2012-10-17T10:33:43.237
> 
> 标签：javascript, html, css, loading

我正在为 iPad 创建头像创建者。用户可以选择不同的发型、发色、肤色等。

该页面有两个组成部分：选择区域（所选选项显示为小缩略图）和预览区域（所选选项显示为较大）。

每个选项都保存为 SVG 文件。使用 SVG 有很多优点：

1.  它在 Retina 显示器上保持清晰
2.  每个资产的文件大小很小（因为图像是基于矢量的）
3.  文件可以很小，但仍然允许透明
4.  相同的图像可用于预览/选择区域（浏览器只是通过 CSS 缩放它们）。

Jquery 用于更改 oage 上的类 ID，这反过来会影响所调用的 CSS 代码（CSS 将 SVG 图像保存为背景图像）。

有很多选项，所以为了避免让用户不知所措，选择区域中只显示相关选项。例如，如果您点击红色头发，则仅显示红色发型（在用户选择相关颜色之前，所有其他发型均被隐藏）。

一切正常，唯一的缺点是当用户点击一个选项时，浏览器从服务器获取图像时会有延迟。

我怎样才能加快加载过程，所以没有延迟？

以下是我考虑过的一些选项：

**CSS Sprites** 通常 CSS sprite 会解决这个问题。然而，由于选项的范围，手动创建 CSS sprite 是不切实际的，并且没有一个自动选项支持 SVG sprite 创建。如果我切换到 PNG，文件大小会变得非常大。

**不可见的加载** 我创建了一个隐藏的 DIV，将我的所有图像存储为背景图像（使用 CSS3 多背景图像属性）。这样可以确保加载所有图像，以便在用户点击它们时立即显示它们。唯一的缺点是这会导致页面初始加载需要很长时间。

有没有更好的选择？

（不幸的是，我无法提供我作品的链接）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-14T12:07:06.460

我最终这样做的方法是创建一个 DIV，将我的所有图像附加为 CSS3 多重背景。然后我将 DIV 设置为 display:none。这会在页面加载时加载所有图像。

# sharepoint - Sharepoint 设计器：在列表中显示自定义字段

> ID：12932359
> 
> 赞同：2
> 
> 时间：2012-10-17T10:33:46.217
> 
> 标签：sharepoint, xslt, sharepoint-designer, sharepoint-2013

您好我有一个名为“讨论列表”的列表，我在该列表中创建了一个自定义列。如何在页面中显示该字段？

我在 SharePoint 2013 社区网站工作。我必须通过 Sharepoint 设计器（xslt）在 Topic.aspx 页面中显示自定义字段。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-20T01:33:31.843

您可以使用 Sharepoint 设计器中的数据视图 Web 部件在页面上显示任何列表自定义列。谷歌“数据视图 Web 部件”以查找示例。

# groovy - 为什么 Gant 不会在正整数返回目标上失败？

> ID：12932360
> 
> 赞同：0
> 
> 时间：2012-10-17T10:33:52.373
> 
> 标签：groovy, gant

当我有以下`build.gant`

```
target(example: 'example target') {
  echo(message: "name : ${it.name}, description: ${it.description}")
}

target(alwaysFails: 'never succeed') {
  27
} 
```

如果我运行`gant alwaysFails`，构建失败。但如果我运行`gant alwaysFails example`，构建成功。

实际上我预计构建失败并且“示例”目标没有运行。

如何让 gant 在目标失败时停止？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T11:01:27.413

我相信你必须让目标相互依赖，所以

```
target(alwaysFails: 'never succeed') {
  27
}

target(example: 'example target') {
  depends( alwaysFails )
  echo( message: "name : ${it.name}, description: ${it.description}" )
} 
```

然后运行：

```
gant example 
```

如果成功（它永远不会），将运行`alwaysFails`然后运行。`example`这样我相信你会得到你想要的功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T03:19:58.653

我让目标在必须总是失败时抛出异常。有用。

```
throw new RuntimeException('error message..') 
```

# r - 对于给定的阈值，将表转换为 0 和 1

> ID：12932362
> 
> 赞同：2
> 
> 时间：2012-10-17T10:34:01.090
> 
> 标签：r, transform

我有一个表（t1）如下：

```
t1 <- array(1:20, dim=c(10,10))

      [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8] [,9] [,10]
 [1,]    1   11    1   11    1   11    1   11    1    11
 [2,]    2   12    2   12    2   12    2   12    2    12
 [3,]    3   13    3   13    3   13    3   13    3    13
 [4,]    4   14    4   14    4   14    4   14    4    14
 [5,]    5   15    5   15    5   15    5   15    5    15
 [6,]    6   16    6   16    6   16    6   16    6    16
 [7,]    7   17    7   17    7   17    7   17    7    17
 [8,]    8   18    8   18    8   18    8   18    8    18
 [9,]    9   19    9   19    9   19    9   19    9    19
[10,]   10   20   10   20   10   20   10   20   10    20 
```

我想将此表转换为 1 或 0。如果单元格数 >5，我们给它一个 1，如果单元格数 <5 或 = 5，我们给它一个 0。因此，转换后，表 t1 将变成如下：

```
 [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8] [,9] [,10]
 [1,]    0   1    0   1    0    1    0    1    0    1
 [2,]    0   1    0   1    0    1    0    1    0    1
 [3,]    0   1    0   1    0    1    0    1    0    1
 [4,]    0   1    0   1    0    1    0    1    0    1
 [5,]    0   1    0   1    0    1    0    1    0    1
 [6,]    1   1    1   1    1    1    1    1    1    1
 [7,]    1   1    1   1    1    1    1    1    1    1
 [8,]    1   1    1   1    1    1    1    1    1    1
 [9,]    1   1    1   1    1    1    1    1    1    1
[10,]    1   1    1   1    1    1    1    1    1    1 
```

我应该使用哪些命令？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-17T10:36:06.697

您可以只使用一个`ifelse()`语句：

```
ifelse(t1 > 5, 1, 0) 
```

由于语句 like`t1 > 5`将产生一个矩阵`TRUE`and `FALSE`，并且由于 R 将`TRUE`其视为“ `1`”和`FALSE`“ `0`”，因此对于此特定转换，您还可以执行以下操作：

```
(t1 > 5)+0
      [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8] [,9] [,10]
 [1,]    0    1    0    1    0    1    0    1    0     1
 [2,]    0    1    0    1    0    1    0    1    0     1
 [3,]    0    1    0    1    0    1    0    1    0     1
 [4,]    0    1    0    1    0    1    0    1    0     1
 [5,]    0    1    0    1    0    1    0    1    0     1
 [6,]    1    1    1    1    1    1    1    1    1     1
 [7,]    1    1    1    1    1    1    1    1    1     1
 [8,]    1    1    1    1    1    1    1    1    1     1
 [9,]    1    1    1    1    1    1    1    1    1     1
[10,]    1    1    1    1    1    1    1    1    1     1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T11:50:14.483

我没有计时，但替代方法`ifelse` 是使用条件语句。

`foo <- bar < 5` 哦，该死，朱利叶斯以 10 秒的优势击败了我。

# ios - ios如何从图像创建简单的地图应用程序

> ID：12932363
> 
> 赞同：2
> 
> 时间：2012-10-17T10:33:59.830
> 
> 标签：ios

我是新来的，所以请温柔:)

总体思路：我正在为徒步旅行者构建一个（简单）基于位置的应用程序，我想从我拥有的自定义图像（一些山的 2D image.jpg）创建地图。我的目的是向徒步旅行者（用户）显示他在该图像上的当前位置（不一定指导他/导航）。

我拥有的数据： - 矩形区域的 4 个纬度/经度坐标（山的 4 个“角”）。- 山的图像（不是真实的图片，它的图画！！！）。

目前，我的应用程序可以： - 定位用户 - 使用 CoreLocation 获取纬度/经度。- 显示图像 - 使用 UIImageView。

剩下的： - 在图像上显示用户的当前位置。

我已经阅读了：[帮助从 iPhone 中的纬度和经度计算 X 和 Y](https://stackoverflow.com/questions/6852195/help-calculating-x-and-y-from-latitude-and-longitude-in-iphone) 等等......我仍然有点困惑。

我的问题是：我在想清楚吗？

如何设置图像边界以保存 4 个纬度/经度坐标并将坐标转换/缩放到图像地图上的点？

谢谢！

# javascript - 如何在 JavaScript 中将事件对象转换为字符串？

> ID：12932372
> 
> 赞同：5
> 
> 时间：2012-10-17T10:34:17.023
> 
> 标签：javascript, jquery

我正在尝试获取发生了哪个事件::

```
function getEvent(){
    alert(window.event);
} 
```

我正在低于事件对象。我希望它在字符串中进行比较。如果事件 onclick 事件那么我想做这个动作。我怎样才能得到它的字符串？或者如何将事件对象转换为字符串？

```
[object MouseEvent] 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-17T10:37:14.793

使用类型属性。`window.event.type`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-17T10:37:59.280

你可能想要：

```
function getEvent(){
    alert(window.event.type);
} 
```

[https://developer.mozilla.org/en-US/docs/DOM/event.type](https://developer.mozilla.org/en-US/docs/DOM/event.type)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-17T10:39:20.203

`type`您可以像这样轻松获得它

```
function getEvent(){
    alert(window.event.type);
} 
```

更多信息在这里

[http://www.quirksmode.org/js/events_access.html](http://www.quirksmode.org/js/events_access.html)

[http://www.quirksmode.org/js/events_properties.html](http://www.quirksmode.org/js/events_properties.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-17T10:39:40.187

使用`type`属性读出类型：

```
function getEvent(){
    alert(window.event.type);
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-17T10:40:32.357

使用`event.type`属性，例如

```
<div id="a" onclick="alert(event.type)">Click This</div>

<div id="b">And This</div>​ 
```

**Javascript**：

```
var func = $('#a').attr('onclick');
$('#b').mouseover(function(e) {
    func(e)
}); 
```

**演示**： http: [//jsfiddle.net/4tLms/](http://jsfiddle.net/4tLms/) ​</p>

# qt - 忽略 OSG 内 Qt 上的键盘按下

> ID：12932374
> 
> 赞同：2
> 
> 时间：2012-10-17T10:34:19.570
> 
> 标签：qt, keyboard, openscenegraph

我是 Qt 的新手，遇到了一个我无法处理的问题，比如一个月。情况是这样的：我有 OpenSceneGraph 项目（它是 OpenGL）并试图在 3d 场景中制作 Qt 界面。我认为我没有必要如何处理它，但是如果有人想在[这里](http://forum.openscenegraph.org/viewtopic.php?t=11110)了解更多信息，请参阅 OSG 论坛上的更多信息（尽管我没有在那里得到解决方案）。问题是，当单击键盘上的任何键时，Qt 控件会在屏幕上跳跃，不再对任何（鼠标或键盘）事件做出反应。不过，整个程序仍在继续工作。总而言之，我的问题是：**有没有办法让 Qt 小部件忽略所有按键？** 我搜索了很多，但找不到任何可行的解决方案。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T11:06:08.440

阅读一些关于[Qt 中的事件](http://doc.qt.digia.com/4.7-snapshot/eventsandfilters.html)。有一个关于事件过滤的部分（但请不要直接跳到它：P）。

**简短的回答：**

[无效 Qwidget::setEnabled ( bool );](http://doc.qt.digia.com/4.7-snapshot/qwidget.html#enabled-prop)

缺点是它还禁用了鼠标事件，更改了小部件样式，这很糟糕。

**长答案：过滤事件**

一种可能性是**过滤 Qt 应用程序上的所有事件**。我想启动你的 Qt 代码的函数看起来像这样（如果这里有不同的帖子）：

```
int main(int argc, char* argv[]){
    QApplication app(argc, argv);
    QWidget toplevelwidget1;
    toplevelwidget1.show()
    //stufff
    return app.exec();
} 
//doesnt have to exactly like this. 
```

您可以在变量上[设置事件过滤器。](http://doc.qt.digia.com/4.7-snapshot/qcoreapplication.html#setEventFilter)`app`这是更优雅的解决方案，但它太复杂了，因为它过滤原生事件并且需要一些工作......

相反，您可以做**的是仅过滤您的顶级小部件或窗口**（没有父级的窗口）。您定义一个事件过滤器（它是 a `QObject`），例如：

```
class KeyboardFilter: public QObject
{
   Q_OBJECT
   ...

   protected:
     bool eventFilter(QObject *obj, QEvent *event);
 };

  bool KeyboardFilter::eventFilter(QObject *obj, QEvent *event)
  {
      //for all events from keyboard, do nothing
      if (event->type() == QEvent::KeyPress || 
          event->type() == QEvent::KeyRelease ||
          event->type() == QEvent::ShortcutOverride ||
          ) {
          return true;
      } else {
        // for other, do as usual (standard event processing)
        return QObject::eventFilter(obj, event);
      }
  } 
```

然后使用以下方法在所需的小部件上设置过滤器：

```
 myDesiredWidgetorObject->installEventFilter(new KeyboardFilter(parent)); 
```

就是这样！

# indexing - 如何从搜索引擎中阻止站点中的所有子域？

> ID：12932375
> 
> 赞同：1
> 
> 时间：2012-10-17T10:34:19.733
> 
> 标签：indexing, web-crawler, robots.txt

我的网站有大约 300 多个子域，我需要阻止它们在搜索引擎中编入索引。我看到了这个 robots.txt 代码 User-agent: * Disallow: /

但是我需要为每个子域都这样做，有没有更简单的方法可以使用主域根目录中的单个 robots.txt 文件来完成。

# jquery-mobile - JQM 水平高度自动调整（列表视图和按钮）

> ID：12932376
> 
> 赞同：1
> 
> 时间：2012-10-17T10:34:23.703
> 
> 标签：jquery-mobile

我正在使用：jquery-1.8.2 和 jquery-mobile-1.2.0（生成时检查了所有选项）

目标设备是 iPhone 4/4s/5 和 iPad。

当前数据角色=“列表视图”：

[测试链接](http://imgur.com/FhFrW)

当前代码：

```
<div data-role="page">

<div data-role="header" data-position="fixed">
<h1>Test</h1>
</div>

<div data-role="content">   

<div class="content-primary">   
<ul data-role="listview" data-split-icon="gear" data-split-theme="d">
<li><a href="index.html">
<img src="pics/paul_jones.jpg" />
<h3>First Element</h3>
<p>First</p>
</a></a><a href="#purchase" data-rel="popup" data-position-to="window" data-transition="pop">Test</a>
</li>
<li><a href="index.html">
<img src="pics/ray_moore.jpg" />
<h3>Second Element</h3>
<p>Second</p>
</a><a href="#purchase" data-rel="popup" data-position-to="window" data-transition="pop">Test</a>
</li>
<li><a href="index.html">
<img src="pics/lisa_wong.jpg" />
<h3>Third Element</h3>
<p>Third</p>
</a><a href="#purchase" data-rel="popup" data-position-to="window" data-transition="pop">Test</a>
</li>
</ul>
</div>      
</div>
</div>
</body>
</html>
</pre> 
```

使每个项目自动调整其高度以垂直拉伸到全屏的最佳方法是什么（我看到框架很好地处理水平拉伸），以便在这种情况下每行占屏幕的 33%，并且有图像相应地调整大小？显然，当有四个或更多项目时，这将必须工作。

在我的网站主页中，我希望有三个或四个我以这种方式设置样式的“图像按钮”。

```
<b>#button_id .ui-btn-inner</b> 
background: url("../img/button_image.png") no-repeat rgba(0, 0, 0, 0.4);
background-size: 100% 100%; 
```

垂直填充屏幕自动调整大小。

# objective-c - 单击 NSTextField 下

> ID：12932381
> 
> 赞同：0
> 
> 时间：2012-10-17T10:34:36.057
> 
> 标签：objective-c, cocoa, cell, nstableview, nstextfield

我正在尝试自定义一个 NSTableView，为此，我实现了以下方法：

```
-(NSView *)tableView:(NSTableView *)tableView viewForTableColumn:(NSTableColumn *)tableColumn row:(NSInteger)row{

    NSImageView *cellImage = [[NSImageView alloc] initWithFrame:NSMakeRect(0, 0, 229, 51)];
    cellImage.image = [[NSImage alloc] initByReferencingFile:[[NSBundle mainBundle] pathForImageResource:@"list_cell_secetion_background.png"]];

    NSView *view = [[NSView alloc] initWithFrame:NSMakeRect(0, 0, 229, 51)];

    NSTextField *textField = [[NSTextField alloc] initWithFrame:NSMakeRect(20, 10, 150, 30)];
    [textField setStringValue:[[_objects objectAtIndex:row] description]];
    [textField setBezeled:NO];
    [textField setDrawsBackground:NO];
    [textField setEditable:NO];
    [textField setSelectable:NO];

    if(row == selectedCell) [view addSubview:cellImage];

    [view addSubview:textField];

    return view;
} 
```

所以它工作正常，直到您单击标签所在的位置。然后它不会发生任何事情。我想点击单元格中的任何地方，正确选择。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T15:05:15.267

禁用文本字段将允许用户单击文本字段下方。

```
 [textField setEnabled:NO]; 
```

# java - java eclipse juno错误弹出语法错误，即使它正确帮助我

> ID：12932382
> 
> 赞同：-1
> 
> 时间：2012-10-17T10:34:36.883
> 
> 标签：java

```
JOptionPane.showMessageDialog(null, "the answer" + sum, "the title",
                JOptionPane.PLAIN_MESSAGE); 
```

它是我在*eclipse* *Juno* 中的代码给出`SYNTAX` *错误*。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T10:49:55.920

`eclispe -clean`在命令模式下以干净模式重新启动 Eclipse 。解决所有类似的问题。我面对几个。这对我有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T10:40:50.303

`JOptionPane.showMessageDialog(null, "the answer"+sum, "the title", JOptionPane.PLAIN_MESSAGE)`似乎是对的。但请检查您是否已导入该类`JOptionPane`并清理您的项目。如果错误仍然存​​在，请考虑检查您的构建路径是否包含正确的 JRE 库。

# iphone - 选择 UIPickerView 项目时运行 ibaction

> ID：12932386
> 
> 赞同：0
> 
> 时间：2012-10-17T10:35:02.293
> 
> 标签：iphone, objective-c, ios, xcode, cocoa

我在 Xcode 4 中工作，我的选择器视图有一些问题。当 UIPickerView 的选定对象等于“European Sights”时，我不想转到其他视图

这是我要运行的操作：

```
-(IBAction)switchviewMainToQuiz:(id)sender {

    if([arrayPickerView objectAtIndex:1] == @"European Sights"){

        ViewControllerQuiz *quizView = [[ViewControllerQuiz alloc] initWithNibName:nil bundle:nil];

        [self presentModalViewController:quizView animated:YES];

    }
    else{
        lblPickerView.text = @"werkt niet";
    }
} 
```

这是代码的其余部分（pickerview 代码）：

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    // Do any additional setup after loading the view, typically from a nib.

    //Put strings in the PickerView and show in label what's selected
    arrayPickerView = [[NSMutableArray alloc] init];
    [arrayPickerView addObject:@"European Sights"];
    [arrayPickerView addObject:@"Flags of the world"];
    [arrayPickerView addObject:@"Something2"];
    [arrayPickerView addObject:@"Something3"];
    [arrayPickerView addObject:@"Something4"];

    [pickerView selectRow:1 inComponent:0 animated:NO];
    lblPickerView.text= [arrayPickerView objectAtIndex:[pickerView selectedRowInComponent:0]];

}

- (NSInteger)numberOfComponentsInPickerView:(UIPickerView *)pickerView;
{
    return 1;
}

- (void)pickerView:(UIPickerView *)pickerView didSelectRow:(NSInteger)row inComponent:(NSInteger)component
{
    lblPickerView.text=    [arrayPickerView objectAtIndex:row];
}

- (NSInteger)pickerView:(UIPickerView *)pickerView numberOfRowsInComponent:(NSInteger)component;
{
    return [arrayPickerView count];
}

- (NSString *)pickerView:(UIPickerView *)pickerView titleForRow:(NSInteger)row forComponent:(NSInteger)component;
{
    return [arrayPickerView objectAtIndex:row];

} 
```

UIPickerView 工作并在标签中显示所选项目。有人可以帮我吗？谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T10:36:25.840

```
objectAtIndex:0 
```

obj c 使用从零开始的数组

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T10:47:27.130

```
- (void)pickerView:(UIPickerView *)pickerView didSelectRow:(NSInteger)row inComponent:(NSInteger)component
{
    lblPickerView.text=    [arrayPickerView objectAtIndex:row];

    UIButton *sender = [UIButton buttonWithType:UIButtonTypeCustom]; 
    sender.tag = row;
    [self  switchviewMainToQuiz:(id)sender];  // send a dummy button as the action is conformed for an UIButton interception
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T10:54:22.377

试试这行代码：

```
    - (void)pickerView:(UIPickerView *)pickerView didSelectRow:(NSInteger)row inComponent:(NSInteger)component
    {
        lblPickerView.text= [arrayPickerView objectAtIndex:row];
        if(lblPickerView.text isEqualToString:@"European Sights"){
            ViewControllerQuiz *quizView = [[ViewControllerQuiz alloc] initWithNibName:nil bundle:nil];
            [自我presentModalViewController：quizView动画：YES]；
        }
        别的{
            lblPickerView.text = @"werkt niet";
        }
    }

```

# java - 如何实现“System.out.println(ClassName::MethodName )" 在 Netbeans 中的 Eclipse？

> ID：12932389
> 
> 赞同：16
> 
> 时间：2012-10-17T10:35:16.337
> 
> 标签：java, netbeans

我想知道是否有与**eclipse**相同的功能来自动生成和打印*Netbeans*`System.out.println(ClassName::MethodName <then my message>)`中的功能（将打印*类*名和*方法名以在**控制台*中进行调试）。

 *例如，在 Eclipse 编辑器中，键入

> **系统 + `Ctrl`+`Space`**

将在控制台中自动生成 System.out.println(ClassName::MethodName) 类型的输出。

Netbeans 中是否有这种方法？

到目前为止，我在 Netbeans 中只有两种方法：

> **南 +`Tab`**

(System.out.println()) 和

> **南方电视台+`Tab`**

（System.out.println（打印在该行上方使用的变量））自动。

让我换个说法，而不是 myMethod1，我想获取封闭的方法名称。

例如。：

```
public class X {

  public void myMethod1(int a) {
    System.out.println(X::myMethod1()); // This should be produced when I type the Code-Template abbreviation (example: syst) and press tab (or corresponding key).
  }
}

public class Y {

  public void myMethod2(int b) {
    System.out.println(Y::myMethod2()); // This should be produced when I type the Code-Template abbreviation (example: syst) and press tab (or corresponding key).
  } 
} 
```

* * *

**更新：**

使用以下代码模板：

> syst = System.out.println("${classVar editable="false" currClassName default="getClass()"}");

我可以打印类名，但仍然不知道方法名称。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-28T06:26:45.037

您可以使用它`Logger`来实现这一点。

[Apache log4j](http://www.google.co.in/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&ved=0CCIQFjAA&url=http://logging.apache.org/log4j/1.2/&ei=08-MUKjAKsLIrQfPpIGAAQ&usg=AFQjCNHa3hT5r4h5P2115jiUMpTxZpwYHQ&sig2=9GFiXPUpK7-mNeMB1zw66g)是一个基于 Java 的日志记录实用程序。

使用`log4j`或其他记录器实现将为您提供`class`信息`method`和每个商业应用程序使用`logger`而不是使用`System.out.`

记录器还能够定义记录消息的不同重要性级别，并能够使用不同的接收器进行输出 - 控制台、文件等。

此外，在使用记录器时，仅启用或禁用某种类型的消息也很容易——例如，您不想在生产中看到每条调试消息。

如果您的应用程序正在使用`spring framework`，那么您可以使用[Log4j 和 AOP](http://www.jtmelton.com/2008/01/24/a-simple-spring-aop-tutorial/)来实现它。

```
Setting the log level 
```

您可以设置 5 个日志级别：

```
`FATAL` — logs only fatal errors

`ERROR` — logs all errors

`WARN` — logs warnings, and all errors

`INFO` — logs information, warnings, and all errors

`DEBUG` — logs debug information, and all other levels 
```

示例`log4j.xml`文件

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE log4j:configuration SYSTEM "log4j.dtd" >
<log4j:configuration>
 <appender name="stdout" class="org.apache.log4j.ConsoleAppender">
   <layout class="org.apache.log4j.PatternLayout">
     <param name="ConversionPattern" value="%d{ABSOLUTE} 
      %5p %c{1}:%L - %m%n"/> 
    </layout>
     </appender>
       <root>
      <priority value="debug"></priority>
      <appender-ref ref="stdout"/>
    </root>
</log4j:configuration> 
```

在此配置文件中，您可以选择要存储的内容。

Like`%m`表示它将存储`method name`. 与其他人类似，您必须阅读它以了解不同的用法。好的部分是您可以根据需要对其进行定制。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T02:44:48.427

您应该考虑使用@vikiiii 建议的日志框架。我会更进一步，建议您查看[sl4fj](http://www.google.com.au/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&ved=0CCAQFjAA&url=http://www.slf4j.org/&ei=NOyNUN3mAsaUiQfjvoHICw&usg=AFQjCNEcMpiXAjIDjIVe-yjiBy8oQ_QJGA)，它提供了一种无缝整合日志框架的方式，包括 log4j。虽然这似乎需要更多的工作（并且需要学习更多），但不使用`System.out.println()`.

具体来说，`System.out.println()`在写入时阻塞所有线程，影响任何重要应用程序的性能，如此处[所述](http://www.certpal.com/blogs/2010/11/system-out-println-performance/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-23T23:02:01.667

目前，经过一些测试，我认为无法在 netbeans 中实现相同的功能。也许您可以坚持使用 eclipse，因为它过去似乎对您来说效果很好。

如果您真的想在 NetBeans 中完成这项工作（我仍然更喜欢（并推荐）eclipse），我建议您查看[这个插件](http://netbeans.org/kb/docs/ide/NetBeans_DTrace_GUI_Plugin_0_4.html)，并可能对其进行编辑以添加您正在寻找的 SystemTrace 功能。*

# android - 如何设置，在谷歌地图中搜索位置到特定国家

> ID：12932397
> 
> 赞同：1
> 
> 时间：2012-10-17T10:35:57.867
> 
> 标签：android

我正在我的应用程序中使用 Google 地图。我需要为特定国家（例如印度）设置搜索位置。例如，如果我搜索任何地方（例如巴黎），它应该只在印度搜索。有什么方法可以搜索，而不在 URL 中传递国家名称印度。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-10T06:58:51.593

componentRestrictions 可用于将结果限制为特定组。目前，您可以使用 componentRestrictions 按国家/地区进行过滤。国家必须作为两个字符传递，ISO 3166-1 Alpha-2 兼容国家代码

```
var input = document.getElementById('searchTextField');
var options = {
   bounds: defaultBounds,
   types: ['establishment']
};

autocomplete = new google.maps.places.Autocomplete(input, options); 
```

来源：[https ://developers.google.com/maps/documentation/javascript/places#adding_autocomplete](https://developers.google.com/maps/documentation/javascript/places#adding_autocomplete)

# android - 如何从菜单 android 更改 gridView 的数据集

> ID：12932398
> 
> 赞同：0
> 
> 时间：2012-10-17T10:36:00.797
> 
> 标签：android, gridview

我有一个`GridView`由一些图像填充的图像（比如说鸟类图像），所以现在我想在单击菜单项时更改该视图的数据以显示（哺乳动物图像），我该怎么做？

我将这些图像作为这样的数组：

```
private int[] birdImage = { 

            R.drawable.huuhkaja, 
            R.drawable.peippo,
            R.drawable.peukaloinen, 
            R.drawable.punatulkku,

    };
    private int[] mammalImage = {

    R.drawable.bear, 
    R.drawable.elephant, 
    R.drawable.wolf, 
    R.drawable.lamb,

    }; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T11:02:07.443

从菜单中我会：

```
putExtra("img_type", "bird"); 
```

根据单击的项目，然后在 gridview 活动中，我会得到额外的并使用 if 语句，例如：

```
 if(img_type.equals("bird")) {
            code here to use the bird images, etc
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T11:29:52.623

你必须像这样添加菜单项..

```
@Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // TODO Auto-generated method stub
        menu.add(0, 1, Menu.NONE,"birds");
        menu.add(0, 2, Menu.NONE,"mammals");
        return super.onCreateOptionsMenu(menu);
    } 
```

在 onOptionItemSelected 方法中添加这两个菜单项后，您可以根据需要设置 griview 数据..

```
@Override
    public boolean onOptionsItemSelected(MenuItem item) {

        switch (item.getItemId()) {
        case 1:

                    **// here code for seting birds data**
            break;

        case 2:
             **// here code for seting mammals data**
            break;

        }

        return super.onOptionsItemSelected(item);
    } 
```

# rdbms - 了解数据库表之间的关系

> ID：12932402
> 
> 赞同：0
> 
> 时间：2012-10-17T10:36:06.200
> 
> 标签：rdbms

嗨，我对关系数据库有点困惑。这是我目前所理解的：

假设我们有两个表用户和个人资料

用户：用户名，密码配置文件：地址，电话，国家，城市等。

显然应该在这两个表之间创建关系，因为每个用户都有一个地址，电话等。但是 MySql 或 Sql-server 如何知道女巫地址属于哪个用户。

我在一些教程中看到，在这种情况下为配置文件创建了一个额外的字段 users_id。我不明白的是，如果字段中的项目是针对用户表自动生成的？另外我怎么能确定我是没有检索到错误的用户资料？

任何人都可以向我解释这个概念或向我指出一些教程吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T10:42:32.863

您需要的是任何表中的外键。由于在您提到的示例中它是 1-1 关系（基于用户只能拥有一个配置文件的逻辑），我将在配置文件表中有一个名为 user_id 的字段。

```
TABLE users:
id, username, password

TABLE profile:
id, user_id, presentation 
```

当您创建用户时，在插入配置文件表时使用它的插入 ID 号。

一些糟糕的 php 代码示例（不要使用此代码）：

```
mysql_query('INSERT INTO users (username, password) VALUES ("admin", "admin")');
$uid = mysql_insert_id();
mysql_query('INSERT INTO profile (user_id, presentation) VALUES ( ' . $uid . ', "I love my cats")'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T10:39:44.600

您的表格需要看起来像这样

```
users:
  - id
  - username
  - password

profile:
  - id 
  - user_id // references field id from user as one to one
  - phone
  - etc 
```

对相关规则的约束将不允许删除用户表中的记录（例如）而不删除 user.id = profile.user_id 的配置文件记录

关系数据库简介[http://www.youtube.com/watch?v=z2kbsG8zsLM](http://www.youtube.com/watch?v=z2kbsG8zsLM)

# eclipse - Eclipse/IntelliJ/Webapp 的图形工作流编辑器插件

> ID：12932404
> 
> 赞同：6
> 
> 时间：2012-10-17T10:36:20.720
> 
> 标签：eclipse, intellij-idea, eclipse-plugin, eclipse-emf

我正在考虑开发一个多平台图形工作流编辑器作为 Eclipse 和/或 IntelliJ 的插件。编辑器的工作方式类似于 Visio/OmniGraffle/Activiti Designer/FuseIDE 等工具。它将允许开发人员从工具箱中拖放组件，使用鼠标（或可能很酷的触摸）连接它们，甚至运行工作流模拟（逐个突出显示组件并显示其相应值）。

一些更重要的功能包括：

1- 它应该使开发人员能够在他们的代码（Java/Scala）和工作流编辑器之间来回切换。

2- 它应该能够连接到在浏览器上显示模型的 Web 应用程序（如果可能是实时的）。

基本上，最终产品看起来像下面两张图片中描述的那样。

![](../Images/0aacc7618022c15a26eb794502a8ed15.png)

[![](../Images/65b217269e1afdba706d6ba30e423094.png)](https://i.stack.imgur.com/78ZU8.png)
[（来源：[fusesource.com](http://fusesource.com/images/fuse-ide-21.png)）]

我做了一些研究，发现 Eclipse 支持使用[图形建模框架](https://wiki.eclipse.org/Graphical_Modeling_Framework/Tutorial#Get_started "图形建模框架")开发面向工作流的插件。但我似乎找不到任何对 IntelliJ 的类似支持。我们的团队在内部使用 IntelliJ，我相信它提供了比 Eclipse 更直观和对开发人员友好的体验。

你能给我一些关于如何开始构建我的插件的提示吗？与 Eclipse 相比，IntelliJ 对此类交互式编辑器的支持如何？或者您会建议第三种方法（基于 Web 的 IDE、工具...）？一些参考文献就绰绰有余了。我真的很感谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-02-12T19:52:59.120

我为 IntelliJ 找到了这个插件。它适用于 Activiti 框架。这是描述：Intellij Idea 的 Activiti Designer 插件

[https://plugins.jetbrains.com/plugin/7429](https://plugins.jetbrains.com/plugin/7429)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-07-25T20:15:17.733

也许我迟到了，但我已经为**Flowable BPMN 引擎**创建了一个 IntelliJ 插件，它与您的要求非常匹配——在 BPMN 和代码之间导航。

我认为您可以使用我的插件的源代码来了解如何构建自己的插件。

这是插件链接： [https ://plugins.jetbrains.com/plugin/14318-flowable-bpmn-visualizer](https://plugins.jetbrains.com/plugin/14318-flowable-bpmn-visualizer)

以下是来源： [https ://github.com/valb3r/flowable-bpmn-intellij-plugin](https://github.com/valb3r/flowable-bpmn-intellij-plugin)

# wcf - 尝试过滤进程历史记录时出现“MaxItemsInObjectGraph 配额”错误

> ID：12932409
> 
> 赞同：1
> 
> 时间：2012-10-17T10:36:36.563
> 
> 标签：wcf, tridion, tridion-2011

我正在尝试遍历**Workflow Management --> Process History**下的所有项目并做一些事情。

以下是我的代码：

```
ProcessesFilterData filter = new ProcessesFilterData()
{
    BaseColumns = ListBaseColumns.IdAndTitle,
    ProcessType = ProcessType.Historical
};
foreach (IdentifiableObjectData data in csClient.GetSystemWideList(filter))
{
     //doing somethine here
} 
```

我在**foreach 行中收到以下错误（csClient.GetSystemWideList(filter) 中的 IdentifiableObjectData 数据）**

**错误信息：**

格式化程序在尝试反序列化消息时抛出异常：尝试反序列化参数[http://www.sdltridion.com/ContentManager/CoreService/2011:GetSystemWideListResult](http://www.sdltridion.com/ContentManager/CoreService/2011:GetSystemWideListResult)时出错。InnerException 消息是“对象图中可以序列化或反序列化的最大项目数为“65536”。更改对象图或增加 MaxItemsInObjectGraph 配额。'。有关更多详细信息，请参阅 InnerException。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-17T10:41:35.703

查看[http://www.dailycode.info/Blog/post/2011/05/27/Change-the-object-graph-or-increase-the-MaxItemsInObjectGraph-quota.aspx](http://www.dailycode.info/Blog/post/2011/05/27/Change-the-object-graph-or-increase-the-MaxItemsInObjectGraph-quota.aspx)。您可以在 %TRIDION_HOME%\webservices 中更改 Web.config 中的值。我的安装已经具有明显高于您的错误指示的值。

# ruby-on-rails - 无法使用 rvm 安装从命令行运行 rails

> ID：12932413
> 
> 赞同：4
> 
> 时间：2012-10-17T10:37:12.200
> 
> 标签：ruby-on-rails, linux, path, rvm

我刚刚在一台新的 Linux Mint 机器上用 rails 重新安装了 rvm
我可以看到 rails 安装在我的 gems 中

```
gem query --local

*** LOCAL GEMS ***

...other stuff ...
rails (3.2.8)
...other stuff ... 
```

但如果我尝试从控制台运行，我看不到它

```
$ rails -v
The program 'rails' is currently not installed.  You can install it by typing:
sudo apt-get install rails 
```

这是我的 PATH 变量

```
/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/home/motta/.rvm/bin 
```

我应该在路径中添加什么以使导轨可用？谢谢你

更新：这是 rvm list 的输出

```
rvm rubies

=* ruby-1.9.3-p286 [ x86_64 ]

# => - current
# =* - current && default
#  * - default 
```

安装已按照 rvm 说明
[https://rvm.io/rvm/install/](https://rvm.io/rvm/install/)

**已解决：** 当我完成安装时，我发现 rvm 用这一行修改了我的 /home/user/.bashrc 文件

```
PATH=$PATH:$HOME/.rvm/bin # Add RVM to PATH for scripting 
```

因此我认为不再需要以下一个，事实并非如此

```
[[ -s "$HOME/.rvm/scripts/rvm" ]] && . "$HOME/.rvm/scripts/rvm" # This loads RVM into a shell session. 
```

将上述内容添加到 .bashrc 解决了我的问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T10:43:42.123

尝试按照此步骤安装 RVM，然后安装 rails

[http://rails.vandenabee.com/blog/2011/11/26/installing-ruby-and-rails-with-rvm-on-ubuntu-11-dot-10/](http://rails.vandenabeele.com/blog/2011/11/26/installing-ruby-and-rails-with-rvm-on-ubuntu-11-dot-10/)

或者

[https://rvm.io/rvm/install/](https://rvm.io/rvm/install/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T11:23:27.890

您的 PATH 显然设置错误，请确保您使用 ruby​​：

```
rvm use 1.9.3 
```

要使此持久性为下一个会话设置默认值：

```
rvm use 1.9.3 --default        #OR:
rvm alias create default 1.9.3 
```

最后，您可能需要启用登录 shell 才能使其工作（关于此主题的答案已经很少）。

# android - 视图寻呼机片段和另一个活动之间的动画

> ID：12932417
> 
> 赞同：2
> 
> 时间：2012-10-17T10:37:14.467
> 
> 标签：android, animation

我正在使用视图寻呼机的应用程序由 3 个差异片段组成。当我单击片段中的按钮时，我想显示活动。我想要它们之间的动画。是否可以？如果是，我必须使用过渡动画、布局动画还是视图动画？

我是动画新手，不知道。所以请给我一些好的链接。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-25T04:41:41.370

而不是`overridePendingTransition()`用于`getActivity.overridePendingTransition()`提供**从片段移动到活动**的动画。

希望这可以帮助...！！

# html - 如何让鼠标在画布上超出形状

> ID：12932418
> 
> 赞同：1
> 
> 时间：2012-10-17T10:37:18.150
> 
> 标签：html, html5-canvas, dom-events

我有一个画布，用户可以通过在其周围绘制形状来选择图像上的东西。所以画布上可能有不止一种形状

现在我想要的是当鼠标悬停形状时，我想改变画布的不透明度，除了自定义形状（鼠标悬停在哪里）。

就像一些 jQuery 插件在做 [http://davidlynch.org/projects/maphilight/docs/demo_simple.html](http://davidlynch.org/projects/maphilight/docs/demo_simple.html)的反向区域效果（这里是反向效果）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T07:05:16.107

如果我正确理解您的问题，您需要使用 Canvas 的数据模型方法。基本上，您需要存储将出现在画布上的信息。然后，您有一个使用该信息呈现画布的函数。

当用户将鼠标移到画布上时，您可以确定他们相对于画布的 x,y，查看您的数据并查看 x,y 处的内容。更改数据中的状态并重新构建画布。

这是我快速拼凑的一个非常粗略的例子。我强烈建议您更好地构建您的 javascript，但这是一个概念证明。在实践中，您将希望以索引格式存储数据，并更好地调用 mousemove() 函数，因为当用户移动鼠标时它会被锤击（通常完成`setTimeout`并忽略后续调用）。

```
$(function() {
    function renderCanvas() {
        for(var i = 0; i < data.length; i++) {              
          context.fillRect(data[i].x, data[i].y, data[i].width, data[i].height);
        }        
    }

    var context = $(".myCanvas").get(0).getContext("2d");

    var data = [];

    data.push({ x : 25, y : 25, height : 100, width : 100 });

    renderCanvas();

    $(".myCanvas").mousemove(function(e) {
        for(var i = 0; i < data.length; i++) {
            if (e.pageX > data[i].x && e.pageX < data[i].x + data[i].width && e.pageY > data[i].y && e.pageY < data[i].y + data[i].height) {
               data[i].height = 200;
               renderCanvas();
            }                        
        }
    });
}); 
```

小提琴格式：http: [//jsfiddle.net/wUnDu/1/](http://jsfiddle.net/wUnDu/1/)

# c - 使用程序参数将摄氏度转换为华氏度

> ID：12932420
> 
> 赞同：0
> 
> 时间：2012-10-17T10:37:39.220
> 
> 标签：c

“对于这个程序，我想使用程序参数来收集用户数据。例如，你可以用`program -c 20`which编译将20转换为摄氏度，当编译时`program -f 20`，程序会将20转换为华氏度。程序只能接受`argv[0]`为`-c`或`-f`, 并将`argv[1]`转换为浮点数。下面是我的程序，我收到了一些警告和错误。你能帮我把它弄对吗？

```
 #include <stdio.h>
 #include <string.h>

 int main(int argc, char *argv[])
 {

    const char* c = "-c";
    const char* f = "-f";

    float temp_c;

    if(0==strcmp(argv[1],c))
    { 
      sscanf(s,"%f",&temp_c);
      temp_c =  (argv[2]-32)*5/9;
      printf("%f celsius = %f fahrenheit", &temp_c, argv[2]);

    }else if(f0==strcmp(argv[1],f)){

 sscanf(s,"%f",&temp_c);
 temp_c =  argv[1]*9/5+32;
 printf("%f celsius = %f fahrenheit", &temp_c, argv[2]);

    }else

    {
      printf("please use correct flag");
      exit(0);
    }
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T10:40:48.153

```
char c = "-c";
char f = "-f; 
```

这是个问题。`""`意味着`string` 但您将这些变量声明为`char`

利用，

```
char c[] = "-c";
char f[] = "-f"; 
```

然后使用 . 比较它们`strcmp(argv[1], c)`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T10:45:09.367

这是一个错误（和实现定义的行为）：

```
char c = "-c";
char f = "-f"; /* Note I added missing closing "/ */ 
```

改成：

```
const char* c = "-c";
const char* f = "-f"; 
```

`argv[0]`是程序的名称。第一个参数存储在`argv[1]`. 您不能用于`==`比较 C 中字符串的内容（`==`比较存储字符串的数组的基地址），因此这是不正确的：

```
if(argv[0] == c) 
```

改成：

```
if (0 == strcmp(argv[1], c)) 
```

条件相同`else if`。

使用`scanf()`, not`sscanf()`来检索用户输入（`s`顺便说一句未定义）并检查其返回值以确保为变量分配了一个值：

```
if (1 == scanf("%f", &temp_c)) 
```

最终计算不正确：

```
temp_c =  (argv[1]-32)*5/9 
```

改成：

```
temp_c =  (temp_c-32)*5/9 
```

其他计算相同。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-17T12:05:30.017

从您的代码的修订版 3 开始：

```
mike@linux-4puc:~> gcc a.c
a.c: In function ‘main’:
a.c:29:16: error: ‘s’ undeclared (first use in this function)
a.c:29:16: note: each undeclared identifier is reported only once for each function it appears in
a.c:30:30: error: invalid operands to binary * (have ‘char *’ and ‘int’)
a.c:33:9: error: ‘f0’ undeclared (first use in this function)
a.c:35:20: error: invalid operands to binary * (have ‘char *’ and ‘int’)
a.c:40:8: warning: incompatible implicit declaration of built-in function ‘exit’ [enabled by default] 
```

所以让我们来看看它们：

1）是的，你在这里使用`s`它并没有在任何地方声明。`sscanf` [在这里](http://www.cplusplus.com/reference/clibrary/cstdio/sscanf/)阅读。第一个参数是 a `const char *`，或者我们将在其中找到内容的字符串。在你的情况下`s`没有声明。你想得到临时（或第二个命令行变量）所以你需要在`argv[2]`这里传递，而不是`s`

```
sscanf(s,"%f",&temp_c);   -->  sscanf(argv[2], "%f", &temp_c); 
```

2) 同样，这次您使用的是尚未声明的东西`f0`。

```
else if(f0==strcmp(argv[1],f)){ 
```

看起来你只是想要 0 就像第一个一样`if`，所以只需删除`f`

3)`Invalid operands to binary *`表示您正在尝试对字符串进行数学运算，而编译器不知道该怎么做。`argv[x]`无论您是否传递数字，参数都是字符串，因此：

```
temp_c =  argv[1]*9/5+32; 
```

无效。您也**已经**进行了转换！这就是`sscanf()`为你做的，所以你想要的价值是`temp_c`，而不是`argv[1]`

4)`incompatible implicit declaration of built-in function`在这种情况下意味着您正在尝试使用标准函数`exit()`但没有包含正确的头文件。包括`<stdlib.h>`将解决这个问题。

* * *

这会处理警告和错误。但是您的代码仍然存在一些逻辑和一致性问题：

```
printf("%f celsius = %f fahrenheit", &temp_c, argv[2]); 
```

这不是你想要的。不要传递 的地址`temp_c`，你要的是值，而不是指针的值。阅读 C 中的 & 符号，您不能随心所欲地将它们扔到任何地方。

该语句的第二个问题是 argv[2] 不是一个数字，它是一个字符串（我们之前已经讨论过）所以你必须使用特定的字符串格式而`%s`不是 float `%f`。你的两个相同`printf`的问题。

还有一个问题，你的`main`函数应该返回一个`int`，这就是`int main(...`意思。在你离开这个功能之前，你应该确保有一个`return 0;`或`exit(0);`你有一个，但前提是你陷入了这种`else`情况。您应该无条件地在函数末尾添加一个。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-17T10:44:43.627

```
char c = "-c";
char f = "-f; 
```

是错的。这些不是字符，而是字符串，因此将它们存储为`char *`. 并且弦必须平衡。（后一个错误您可能自己也发现了。）

```
if(argv[0] == c) 
```

这里你要

```
if (strcmp(argv[1], c) == 0) 
```

as`argv[0]`是程序的名称，字符串不能与`==`.

```
sscanf(s,"%f",&temp_c); 
```

是什么`s`？

```
temp_c =  (argv[1]-32)*5/9; 
```

不，您正在混淆指针和浮点算术。

```
}else if(argv([0]=f){ 
```

看上面。顺便说一句：这应该会导致编译器出现语法错误；很容易自己发现。

```
sscanf(s,"%f",&temp_c); 
```

看上面。

```
temp_c =  argv[1]*9/5+32; 
```

看上面。

# xslt - 获取元素的以下兄弟但在同一分支上？

> ID：12932421
> 
> 赞同：2
> 
> 时间：2012-10-17T10:37:43.857
> 
> 标签：xslt, xslt-1.0

此平面 XML 表示使用级别字段的树结构。如何将树中较深的元素获取到给定节点但仅在同一分支中？

因此，鉴于公司名称是 A，我需要获得公司 B 和 C（不是位于不同分支机构的 E）。

```
<Companies>
      <Company>
        <Name>A</Name>
        <Level>0</Level>
      </Company>
      <Company>
        <Name>B</Name>
        <Level>1</Level>
      </Company>
      <Company>
        <Name>C</Name>
        <Level>1</Level>
      </Company>
      <Company>
        <Name>D</Name>
        <Level>0</Level>
      </Company>
      <Company>
        <Name>E</Name>
        <Level>1</Level>
      </Company>
    </Companies> 
```

可以有不止一级。我也想退货。我正在使用 XLST 1.0。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T13:55:15.227

**使用**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:key name="kDescendants" match="Company[Level > 0]"
  use="generate-id(preceding-sibling::Company[Level=0][1])"/>

 <xsl:template match="/">
     <xsl:copy-of select="key('kDescendants', generate-id(/*/*[Name='A']))"/>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时：**

```
<Companies>
    <Company>
        <Name>A</Name>
        <Level>0</Level>
    </Company>
    <Company>
        <Name>B</Name>
        <Level>1</Level>
    </Company>
    <Company>
        <Name>C</Name>
        <Level>1</Level>
    </Company>
    <Company>
        <Name>D</Name>
        <Level>0</Level>
    </Company>
    <Company>
        <Name>E</Name>
        <Level>1</Level>
    </Company>
</Companies> 
```

**产生了想要的正确结果**：

```
<Company>
   <Name>B</Name>
   <Level>1</Level>
</Company>
<Company>
   <Name>C</Name>
   <Level>1</Level>
</Company> 
```

**说明**：

键`"kDescendants"`定义树中的顶部节点与其后代之间的映射 - 给定`generate-id($someTopNode)`，它会在以 为顶部的（逻辑）树中生成所有后代`$someTopNode`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T12:49:32.367

在 XSLT1.0 中实现此目的的一种方法是定义一个键，该键按具有较低级别的最前面的兄弟元素对元素进行分组

```
<xsl:key 
   name="companies" 
   match="Company" 
   use="generate-id(preceding-sibling::Company[Level &lt; current()/Level][1])" /> 
```

然后，假设您定位在您想要较低级别的特定**公司**元素上，您可以这样做

这将首先获得下一个级别的元素。要获得后续级别，您需要一个模板来匹配**公司**元素，复制它们并递归应用模板

```
<xsl:template match="Company">
   <Company>
     <xsl:apply-templates select="@*|node()"/>
   </Company>
   <xsl:apply-templates select="key('companies', generate-id())" />
</xsl:template> 
```

这是完整的 XSLT

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
   <xsl:output method="xml" indent="yes"/>
   <xsl:key name="companies" match="Company" use="generate-id(preceding-sibling::Company[Level &lt; current()/Level][1])" />

   <xsl:template match="/Companies">
      <xsl:apply-templates select="Company[Name='A']" mode="parent" />
   </xsl:template>

   <xsl:template match="Company" mode="parent">
      <xsl:apply-templates select="key('companies', generate-id())" />
   </xsl:template>

   <xsl:template match="Company">
      <Company>
         <xsl:apply-templates select="@*|node()"/>
      </Company>
      <xsl:apply-templates select="key('companies', generate-id())" />
   </xsl:template>

   <xsl:template match="@*|node()">
      <xsl:copy>
         <xsl:apply-templates select="@*|node()"/>
      </xsl:copy>
   </xsl:template>
</xsl:stylesheet> 
```

应用于您的示例 XML 时，将输出以下内容

```
<Company>
   <Name>B</Name>
   <Level>1</Level>
</Company>
<Company>
   <Name>C</Name>
   <Level>1</Level>
</Company> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T12:48:07.343

假设焦点节点 (current()) 是您计算的基础。

定义...

```
<xsl:variable name="set1" select="following-sibling::Company[ Level &gt; current()]" />
<xsl:variable name="set2" select="following-sibling::Company[ Level &lt; 
      preceding-sibling::Company[1]/Level][1]/preceding-sibling::Company" /> 
```

那么子公司就在这两组的交汇处，也就是……

```
$set1[. = $set2] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-17T13:32:09.150

这是我的尝试 - 但我相信有更简单的方法......抱歉：它只是 XSLT 2.0。

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:fn="http://www.w3.org/2005/xpath-functions">
    <xsl:output method="xml" version="1.0" encoding="UTF-8" indent="yes"/>
    <xsl:template match="/Companies">
        <xsl:param name="nodeName" select="'A'" />

        <xsl:variable name="level" select="Company[Name = $nodeName]/Level/text()" as="xs:int"/>
        <xsl:variable name="seq" as="node()*" select="Company[Name = $nodeName]/following-sibling::*" />
        <xsl:variable name="levels" as="xs:int*" select="$seq/Level/text()" />
        <xsl:copy-of select="subsequence($seq, 0, index-of($levels, $level)[1])" />
    </xsl:template>
</xsl:stylesheet> 
```

# ruby - 使用 Ruby 单元测试创 建测试报告

> ID：12932422
> 
> 赞同：1
> 
> 时间：2012-10-17T10:37:45.213
> 
> 标签：ruby, testunit, rest-client

我有一个可以测试一些 RESTful API 的工作测试套件。到目前为止，标准输出结果一直很好：

```
.......E..F.. 
```

但是现在我需要更多信息。

输出应该是：

```
TestName, startTime, endTime, Result 
```

我可能会将其写入 csv 或 xml 中的文件。现在，我对测试名称、开始时间和结束时间（有多种方法）没有任何问题，但我不知道如何编写结果，. 或 F 或 E 到文件。

有什么方法可以提取测试结果并在测试或测试运行器中对其进行处理？

有人能指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T20:55:42.120

一种替代方法（简单）是使用命令行字符串操作工具（sed/awk/..）提供的输出并生成所需的输出格式。

一个更复杂的替代方案是深入[测试单元内部](https://github.com/test-unit/test-unit)并创建您自己的测试运行器，它可以提供所需的输出。./lib/test/unit/ui/console/testrunner.rb文件将是一个很好的起点[。](https://github.com/test-unit/test-unit/blob/master/lib/test/unit/ui/console/testrunner.rb)

查看[https://stackoverflow.com/a/10558600/429758](https://stackoverflow.com/a/10558600/429758)以获取有关如何编写自定义测试运行器的示例。

# c# - 将常量呈现到 XML 文档中？

> ID：12932425
> 
> 赞同：35
> 
> 时间：2012-10-17T10:37:55.077
> 
> 标签：c#, visual-studio, xml-documentation

我有 2 个私有常量和一个公共方法：

```
private const byte _minAge = 24;
private const byte _maxAge = 29;

public bool IsInAgeRange() { ... } 
```

我正在添加 XML 文档，并且希望我的代码的用户可以在 IntelliSense 中阅读此文档：`Checks whether the age is within the allowed range (between 24 and 29).`

我的问题是：有没有办法将我的 const 呈现到我的 XML 文档中？

* * *

我想出的替代方案是：

1.  只需在文档中写 24 和 29 （缺乏对实际值的依赖）
2.  公开 consts 并添加`<see cref="MinAge">`and `<see cref="MaxAge">`（减少封装并使文档信息量减少）

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2020-08-31T12:18:58.157

为每个包含该值的常量添加摘要，然后参考这些注释：

```
/// <summary>24</summary>
private const byte _minAge = 24;
/// <summary>29</summary>
private const byte _maxAge = 29;

/// <summary>Checks whether the age is within the allowed range (between <inheritdoc cref="_minAge"/> and <inheritdoc cref="_maxAge"/>).</summary>
public bool IsInAgeRange() { ... } 
```

我知道它仍然是重复的，但这样你就可以将常量注释保持在常量附近，即使常量完全定义在另一个文件中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-17T10:45:00.960

我认为没有任何方法可以在文档`_minAge`和`_maxAge`文档中编写常量的实际值，但是您可以使用以下标记来引用它们`<see>`：

```
/// <summary>
/// Checks whether the age is within the allowed range (between <see cref="_minAge" /> and <see cref="_maxAge" />).
/// </summary> 
```

现在，这将在您的文档中创建指向这些常量的链接，这样当您生成文档并稍后呈现它们时，用户将能够单击这些链接并引用适当的常量。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-06-11T12:21:18.480

这结合了来自@kalu93 的答案和来自@DhyMik 的评论，展示了如何`<inheritdoc/>`在`<summary>`标签和`<param>`标签中使用：

```
 /// <summary>24</summary>
    private const byte _minAge = 24;
    /// <summary>29</summary>
    private const byte _maxAge = 29;

    /// <summary>
    /// Checks whether the age is within the allowed range 
    /// (between <inheritdoc cref="_minAge"/> and <inheritdoc cref="_maxAge"/>).
    /// </summary>
    /// <param name="TheAge">
    /// Age (must be between <inheritdoc cref="_minAge" path="//summary"/> and 
    /// <inheritdoc cref="_maxAge" path="//summary"/>).
    /// </param>
    public bool IsInAgeRange(int TheAge) { 
      return _minAge <= TheAge && TheAge <= _maxAge; 
    } 
```

当您将鼠标悬停在函数上时，Visual Studio 现在会正确显示限制`IsInAgeRange`：

[![功能工具提示](../Images/6efd6e34a1ca68aca5897bd449bf0fb0.png)](https://i.stack.imgur.com/QC3oz.png)

...以及当您将鼠标悬停在参数上时`TheAge`：

[![参数工具提示](../Images/93fae3b2ab3898d8527b39d5260eb981.png)](https://i.stack.imgur.com/Aw3QJ.png)

# php - 让用户通过正则表达式查询是个好主意吗？

> ID：12932426
> 
> 赞同：0
> 
> 时间：2012-10-17T10:37:56.427
> 
> 标签：php, regex, security

> **可能的重复：**
> [在 PHP 中清理用户提供的正则表达式](https://stackoverflow.com/questions/2371445/sanitization-of-user-supplied-regular-expressions-in-php)

假设您想让用户搜索某些内容，并且您的搜索功能能够接受正则表达式。

是否可以让网站用户通过他们发布的正则表达式进行搜索？从用户的角度来看，我喜欢一个能让我这样做的网站：D

是否涉及任何安全风险？如何清理正则表达式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T10:41:29.263

主要风险是正则表达式非常复杂，会运行很长时间或达到引擎的递归限制。[见这篇文章。](http://www.regular-expressions.info/catastrophic.html)如果您让您的用户在错误的地方使用正则表达式替换，则可能会出现其他风险，因为这会引入代码注入的风险。但是匹配本身除了 DoSing 你的服务器之外并不能真正造成任何其他伤害。

最近有一个关于如何识别这些危险的正则表达式的问题，并且一致认为这通常是不可能的。[看问题。](https://stackoverflow.com/questions/12841970/how-can-i-recognize-an-evil-regex)

您最好限制正则表达式搜索的时间，如果时间太长则中止它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T10:42:59.823

我没有看到直接的安全风险，但我看到了与性能相关的问题，这些问题很容易导致严重的停机。这有两种口味，太复杂的和太宽泛的。例如，考虑一个类似的查询`.*`- 使用一个大数据库，我已经看到即使是其中的几个也可以很容易地关闭系统。

我会使用实际的实时数据库以外的其他东西执行用户搜索，最好是从内存中的缓存结果中执行，这并不重要。

或者只实现评论中建议的通配符（*，？）。它们都更加用户友好且更易于处理。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-17T10:42:15.783

如果正则表达式不影响编程代码，则没有真正的安全风险。我相信，它经常没有实现的原因是它是一个昂贵的过程，我从未见过它在 SQL 中使用过，所以你需要获取所有正在搜索的内容，然后在其上运行正则表达式，而不是比 SQL`like`或精确匹配等所允许的简单性。

# javascript - 安全 PUBNUB 不会触发回调

> ID：12932427
> 
> 赞同：1
> 
> 时间：2012-10-17T10:37:57.880
> 
> 标签：javascript, security, pubnub

```
pubnub = PUBNUB.secure({
         subscribe_key : "#{config.subscribe_key}",
         publish_key   : "#{config.publish_key}",
         origin        : 'pubsub.pubnub.com',
         ssl           : true,
         cipher_key    : "#{config.publish_key}"
});

pubnub.subscribe({
        restore  : true,
        channel  : 'broadcast',
        callback : function(data) {
          debugger;
          new_message_notification(data);
        }
}); 
```

回调不起作用，但我在浏览器的 NETWORK 选项卡中看到响应。问题出在哪里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T21:42:57.103

那是因为你没有打电话

```
PUBNUB.init 
```

所以 pubnub 无法初始化。

所以..

```
pubnub = PUBNUB.init({

 subscribe_key : "#{config.subscribe_key}",
 publish_key   : "#{config.publish_key}",
 origin        : 'pubsub.pubnub.com',
 ssl           : true,
 cipher_key    : "#{config.publish_key}"

}); 
```

应该更正确。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T23:10:00.097

# JavaScript 中的 PubNub 密码学

> 有一个新版本的 PubNub JavaScript：**[实时应用程序的 JavaScript API 参考](http://www.pubnub.com/docs/web-javascript/api-reference#init)**

使用以下代码示例使用 SSL 2048 加密建立 AES 256 位。您可以在此处找到实时示例：http: [//pubnub.github.com/pubnub-api/crypto/index.html](http://pubnub.github.com/pubnub-api/crypto/index.html)

```
<script src=https://pubnub.a.ssl.fastly.net/pubnub-3.3.min.js></script>
<script src=http://pubnub.github.com/pubnub-api/crypto/crypto.js></script>
<script src=http://pubnub.github.com/pubnub-api/crypto/encrypt-pubnub.js></script>
<script>(function(){
    var publish_key   = PUBNUB.$('pub').value;
    var subscribe_key = PUBNUB.$('sub').value;
    var channel       = PUBNUB.$('channel').value;
    var origin        = PUBNUB.$('origin').value;
    var message       = PUBNUB.$('message');
    var output        = PUBNUB.$('output');
    var cipher_key    = PUBNUB.$('cipher_key')
                              .value.split(/\s/).join('');

    var secure_pubnub = PUBNUB.secure({
        publish_key   : publish_key,
        subscribe_key : subscribe_key,
        origin        : origin,
        ssl           : true,
        cipher_key    : cipher_key
    });

    secure_pubnub.subscribe({
        channel  : channel,
        connect  : send_message,
        callback : alert
    });

    function send_message() {
        secure_pubnub.publish({
            channel : channel,
            message : message.value
        });
    }

    send_message();

})();</script> 
```

# javascript - javascript函数响应延迟

> ID：12932432
> 
> 赞同：-1
> 
> 时间：2012-10-17T10:38:00.143
> 
> 标签：javascript, function

我的代码是：

```
var myvarible = "0";

wialon.util.Gis.getLocations(coordsc,function(code,responceval) {
    myvarible = responceval;
})

console.log(myvarible); // output is 0 
```

我该如何解决我的问题？我认为当它返回响应代码时，console.log 首先运行。请帮助解决我的问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T10:41:55.987

假设这依赖于浏览器的地理定位功能，您无法“修复”这个问题。它具有异步编码的性质。

在您的函数`wialon.util.Gis.getLocations()`中，您传入一个回调。所以在这个调用的（异步）执行之后，你的回调将被执行。

同时执行您的其余代码，这导致`console.log(myvarible);`结果为 0。

相应地更改您的编码风格，并将所有依赖于`myvarible`回调本身或函数中的代码放在回调中调用。这样，此代码仅在设置*后* `myvarible`执行。

所以要么：

```
var myvarible = "0";

wialon.util.Gis.getLocations(coordsc,function(code,responceval){
  myvarible = responceval;

  // here comes code using myvarible
  console.log(myvarible);
}); 
```

或者

```
var myvarible = "0";

function doStuff(){
  // here comes code using myvarible
  console.log(myvarible);
};

wialon.util.Gis.getLocations(coordsc,function(code,responceval){
  myvarible = responceval;

  doStuff();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T10:44:14.970

如果我理解正确，在返回`console.log(myvarible);`之前运行`geLocations()`，这就是你得到`myvariable`旧值的原因。

试试这个：

```
var myvarible = "0";

wialon.util.Gis.getLocations(coordsc,function(code,responceval){
      myvarible = responceval;
      console.log(myvarible);
}) 
```

这意味着您必须将所有`myvariable`相关代码*放入*`getLocations()`回调函数中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T10:44:47.803

正如 Sirko 解释的那样，您必须将您的日志记录放入回调函数中，如下所示：

```
var myvarible = "0";
wialon.util.Gis.getLocations(coordsc,function(code,responceval){
    myvarible = responceval;
    console.log(myvarible); // output will be responceval 
}); 
```

# ios - 未调用音频会话中断侦听器

> ID：12932433
> 
> 赞同：1
> 
> 时间：2012-10-17T10:38:04.350
> 
> 标签：ios, core-audio, audio-recording, audiosession

AudioSessionCategory 设置为 PlayAndRecord。我有一个中断监听器，在它的第一行：

```
printf("hello\n"); 
```

我的应用可以录制 wav、caf 和 mp4。当我的应用程序以 wav 格式录制并且出现中断时，我可以在 Xcode 中看到“hello”，并且我的应用程序可以正确处理它。但是当它以 caf 或 mp4 格式录制并且中断到达时，Xcode 中没有“你好”，并且我的应用程序在中断结束后崩溃。为什么我的中断回调没有被调用？

**编辑：** Apple 的示例代码： http: [//developer.apple.com/library/ios/#samplecode/iPhoneExtAudioFileConvertTest/Introduction/Intro.html#//apple_ref/doc/uid/DTS40009222](http://developer.apple.com/library/ios/#samplecode/iPhoneExtAudioFileConvertTest/Introduction/Intro.html#//apple_ref/doc/uid/DTS40009222) 在转换为 aac 期间未调用中断侦听器！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T08:07:11.987

```
THIS IS NOT A SOLUTION RATHER A WORKAROUND : 
```

我发现仅以 kAudioFormatMPEG4AAC 格式录制时会出现问题。但是您可以将其更改为 kAudioFormatMPEG4AAC_ELD 并且它可以完美运行。我仍然很感激我的问题的任何答案。

# iphone - 如何在 iphone 中制作 DropBox？

> ID：12932434
> 
> 赞同：-7
> 
> 时间：2012-10-17T10:38:03.563
> 
> 标签：iphone

我是 iPhone 的新手开发人员。我正在研究 DropBox 演示示例。我对 DropBox 没有任何想法。我在 Xcode 4.5 中工作。那么，任何人都可以分享保管箱文档和保管箱示例吗？

我参考[了这个](https://github.com/schwa/dropbox-iphone-sdk)github 示例。但这不起作用，它可能会出错。

提前感谢 x。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T10:41:20.737

首先下载 iPhone Dropbox SDK，然后按照 Dropbox 开发人员入门文档中的教程进行操作。下方链接。

[https://www.dropbox.com/developers/reference/sdk](https://www.dropbox.com/developers/reference/sdk)

下次谷歌它并自己做一些研究，这是大学学习的重要技能。

# android - 我想将我的数据分享到我的 android 设备中可用的社交网站。如何在我的应用程序中为此编写 android 代码？

> ID：12932441
> 
> 赞同：-1
> 
> 时间：2012-10-17T10:38:29.220
> 
> 标签：android

```
SocAdapter = new SocialAuthAdapter(new ResponseListener());

// Add providers
SocAdapter.addProvider(Provider.FACEBOOK, R.drawable.facebook);
SocAdapter.addProvider(Provider.TWITTER, R.drawable.twitter);
SocAdapter.addProvider(Provider.LINKEDIN, R.drawable.linkedin);
SocAdapter.addProvider(Provider.MYSPACE, R.drawable.myspace);
SocAdapter.enable(share); 
```

我的设备中需要全部社交网站。我怎样才能在不这样写的情况下动态获取它们。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T10:42:27.713

[http://developer.android.com/training/sharing/shareaction.html](http://developer.android.com/training/sharing/shareaction.html)

[http://developer.android.com/training/sharing/send.html](http://developer.android.com/training/sharing/send.html)

这些开发人员链接应该可以帮助您：

这就是我分享基于文本的内容的方式：

```
String text = "this is some text i want to share";
Intent sharingIntent = new Intent(android.content.Intent.ACTION_SEND);
sharingIntent.setType("text/plain");
sharingIntent.putExtra(android.content.Intent.EXTRA_SUBJECT, "Subject");
sharingIntent.putExtra(android.content.Intent.EXTRA_TEXT, text);
startActivity(Intent.createChooser(sharingIntent, "Title")); 
```

# java - 由超链接触发的 Java 上下文菜单

> ID：12932442
> 
> 赞同：0
> 
> 时间：2012-10-17T10:38:30.787
> 
> 标签：java, swing, applet

> **可能重复：**
> [处理 JTextPane 上的超链接右键单击](https://stackoverflow.com/questions/12932089/handling-hyperlink-right-clicks-on-a-jtextpane)

这可能是一个简单的问题，但我似乎无法正确完成！单击超链接时如何触发上下文弹出菜单？

```
public class rchltest extends Applet {

    public void init() {

        JPanel panel = new JPanel(false);

        JEditorPane gentextp = new JTextPane();
        JScrollPane scrollPane = new JScrollPane(gentextp);
        panel.add(scrollPane);
        scrollPane.setVerticalScrollBarPolicy(JScrollPane.VERTICAL_SCROLLBAR_ALWAYS);
        gentextp.setContentType("text/html");
        gentextp.setEditable(false);
        gentextp.addHyperlinkListener(new texthll());
        gentextp.setPreferredSize( new Dimension( 500, 400 ) );
        gentextp.setText("Here is a <a href='http://A'>hyperlink</a>");

        this.add( panel );

    }
}

class texthll implements HyperlinkListener  {

        public void hyperlinkUpdate(HyperlinkEvent event) {
        if (event.getEventType() == HyperlinkEvent.EventType.ACTIVATED) {
            JEditorPane pane = (JEditorPane)event.getSource();

            URL url = event.getURL();

                // Show the new page in the editor pane.
                JOptionPane.showMessageDialog( null, url);
        }
    }
} 
```

# jquery - 重命名 jQuery UI 选项卡

> ID：12932446
> 
> 赞同：1
> 
> 时间：2012-10-17T10:38:48.447
> 
> 标签：jquery, jquery-ui

我想用不同的名称重命名每个选项卡。它显示选项卡 1、选项卡 2.... 等。

```
$(function() {
    var total_tabs = 0;

    // initialize first tab
    total_tabs++;
    addtab(total_tabs);

    $("#addtab, #litab").click(function() {
        total_tabs++;
        $("#tabcontent p").hide();
        addtab(total_tabs);
        return false;
    });

    function addtab(count) {
        var closetab = '<a href="" id="close'+count+'" class="close">&times;</a>';
        $("#tabul").append('<li id="t'+count+'" class="ntabs">Tab '+count+'&nbsp;&nbsp;'+closetab+'</li>');
        $("#tabcontent").append('<p id="c'+count+'">Tab Content '+count+'</p>');

        $("#tabul li").removeClass("ctab");
        $("#t"+count).addClass("ctab");

        $("#t"+count).bind("click", function() {
            $("#tabul li").removeClass("ctab");
            $("#t"+count).addClass("ctab");
            $("#tabcontent p").hide();
            $("#c"+count).fadeIn('slow');
        });

        $("#close"+count).bind("click", function() {
            // activate the previous tab
            $("#tabul li").removeClass("ctab");
            $("#tabcontent p").hide();
            $(this).parent().prev().addClass("ctab");
            $("#c"+count).prev().fadeIn('slow');

            $(this).parent().remove();
            $("#c"+count).remove();
            return false;
        });
    }
}); 
```

如何为我创建的每个选项卡添加重命名功能。我可以使用弹出框重命名选项卡吗？

我想用 GUI 系统重命名它，就像下面的链接。

[http://demo.superdit.com/jquery/dynamic_tab.html](http://demo.superdit.com/jquery/dynamic_tab.html)

我想在那里重命名它。（通过使用弹出框或其他东西）

谢谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T10:53:09.320

尝试这个

```
function addtab(count, tabName) {
    var closetab = '<a href="" id="close'+count+'" class="close">&times;</a>';
    $("#tabul").append('<li id="t'+count+'" class="ntabs">'+tabName+'&nbsp;&nbsp;'+closetab+'</li>');
    $("#tabcontent").append('<p id="c'+count+'">Tab Content '+count+'</p>');

    $("#tabul li").removeClass("ctab");
    $("#t"+count).addClass("ctab");

    $("#t"+count).bind("click", function() {
        $("#tabul li").removeClass("ctab");
        $("#t"+count).addClass("ctab");
        $("#tabcontent p").hide();
        $("#c"+count).fadeIn('slow');
    });

    $("#close"+count).bind("click", function() {
        // activate the previous tab
        $("#tabul li").removeClass("ctab");
        $("#tabcontent p").hide();
        $(this).parent().prev().addClass("ctab");
        $("#c"+count).prev().fadeIn('slow');

        $(this).parent().remove();
        $("#c"+count).remove();
        return false;
    });
}
}); 
```

这是你的功能，只有两个变化。首先，我在函数中添加了一个额外的参数`tabName`，表示选项卡的名称。

```
function addtab(count, tabName) 
```

这意味着您现在将像这样调用函数`addTab(1, "Awesome tab name")`

二、我改了这条线

```
 $("#tabul").append('<li id="t'+count+'" class="ntabs">Tab '+count+'&nbsp;&nbsp;'+closetab+'</li>'); 
```

至

```
 $("#tabul").append('<li id="t'+count+'" class="ntabs">Tab '+count+'&nbsp;&nbsp;'+closetab+'</li>'); 
```

最初，选项卡名称设置为*Tab 1*，其中 1 是`count`参数 ( `Tab '+count+'`) 的值。现在，选项卡名称将是您在调用函数时为其指定的名称。

[**编辑**]对于标签重命名，你可以试试这个版本：

```
function addtab(count, tabName) {
    var closetab = '<a href="" id="close'+count+'" class="close">&times;</a>';
    $("#tabul").append('<li id="t'+count+'" class="ntabs"><span id="title' + count + '">'+tabName+'</span>&nbsp;&nbsp;'+closetab+'</li>');
    $("#tabcontent").append('<p id="c'+count+'">Tab Content '+count+'</p>');

    $("#tabul li").removeClass("ctab");
    $("#t"+count).addClass("ctab");

    $("#t"+count).bind("click", function() {
        $("#tabul li").removeClass("ctab");
        $("#t"+count).addClass("ctab");
        $("#tabcontent p").hide();
        $("#c"+count).fadeIn('slow');
    });

    $("#span"+count).bind("click", function() {
        var newTitle = prompt("Enter the new title","");
        if (newTitle && newTitle !== "") {
            $(this).innerText = newTitle;
        }
    });

    $("#close"+count).bind("click", function() {
        // activate the previous tab
        $("#tabul li").removeClass("ctab");
        $("#tabcontent p").hide();
        $(this).parent().prev().addClass("ctab");
        $("#c"+count).prev().fadeIn('slow');

        $(this).parent().remove();
        $("#c"+count).remove();
        return false;
    });
}
}); 
```

首先，我将选项卡标题放在一个单独的元素中，a`span` `$("#tabul").append('<li id="t'+count+'" class="ntabs"><span id="title' + count + '">'+tabName+'</span>&nbsp;&nbsp;'+closetab+'</li>');`

然后我制作了标题以显示一个 javascript 提示框，要求您输入标题并将跨度的文本设置为给定值

```
$("#span"+count).bind("click", function() {
        var newTitle = prompt("Enter the new title","");
        if (newTitle && newTitle !== "") {
            $(this).innerText = newTitle;
        }
    }); 
```

我不确定它是否会 100% 工作，因为我不是 jQuery 用户，但它应该让您了解它是如何完成的

# windows - 不同 dll 中的不同日期格式

> ID：12932448
> 
> 赞同：1
> 
> 时间：2012-10-17T10:38:51.027
> 
> 标签：windows, datetime, culture

我面临日期时间格式问题，其中一个 dll 中的日期时间格式为 MM/dd/yyyy，当该值传递给另一个 dll 时，它期望该值位于 dd/MM/yyyy 中，因此无法执行任何日期转换或dll中的比较？

有没有办法为整个解决方案指定文化，以便所有 dll 都遵循相同的文化？

这只发生在某些机器上。

# oracle - Toad Formatting：是否可以消除此语句？/* 格式化于 17/10/2012 12:33:19 (QP5 v5.185.11230.41888) */

> ID：12932452
> 
> 赞同：4
> 
> 时间：2012-10-17T10:38:57.797
> 
> 标签：oracle, toad

我不希望 Toad 在文件和查询的开头编写此语句：

/* 格式化于 17/10/2012 12:33:19 (QP5 v5.185.11230.41888) */

是否可以？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-17T15:03:05.067

使用 Toad 10.6 版：

*   转到查看 -> 格式选项
*   导航到 Oracle 格式化程序选项 -> 标题
*   选择标语：**禁用**

# .net - 让一个类表现得像一个字符串

> ID：12932453
> 
> 赞同：3
> 
> 时间：2012-10-17T10:38:59.503
> 
> 标签：.net, oop, class

是否有可能拥有一个行为类似于字符串但允许我拥有一些附加属性的类？

具体来说，我希望能够做类似的事情

```
Dim A As MyClass ''Or New MyClass("InitialValue")
A = "Something"
If A = "SomethingElse" Then

End If 
```

据我所见，我需要实现一种可以分配的类型，以便在构造函数中传递字符串：

eg`A = Something`应解释为`A = New MyClass("Something")`. 此外，然后我需要覆盖比较运算符，以便`If A = "SomethingElse" Then`可以由检查底层字符串值的代码处理

由于`String`是密封的/不可继承的，而且 String 似乎在 .Net 中有一些特殊处理，所以我对如何处理这个问题感到有些困惑。

为了解释为什么需要它，我有一个实体类（不是 EF），它被序列化以生成针对搜索索引的查询。查询是通过针对我的实体指定 lambda 来创建的。

我现在需要修改实体上的某些属性，以便它们不是序列化为简单字符串（用于传递给搜索索引），而是复杂的对象。我无法控制序列化本身（目前在 Newtonsoft Json.Net 内部处理），所以我希望这将是一个（更快的）替代方案，允许我使用现有的 lambdas 等......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T10:40:39.207

您*可以使用*[自定义隐式转换](http://msdn.microsoft.com/library/yf7b9sy7.aspx)为分配执行此操作`System.String`，`XNamespace`例如¹。这是否*也*适用于比较，我不确定。

我通常对隐式转换*非常紧张*，并会敦促对此保持谨慎。拥有一个构造函数或静态工厂方法，或者可能是一个扩展方法来转换`string`为相关类型，会使这一点更清楚：

```
Dim A = new MyClass("Something")
If A = "SomethingElse".ToMyClass() 
```

* * *

¹ LINQ to XML 包含一堆打破规则的设计决策，使其更易于使用。这是天才能够胜过正常的良好实践的一个例子——但我们大多数人都没有那种水平的天才。

# sql - oracle 序列初始化

> ID：12932463
> 
> 赞同：1
> 
> 时间：2012-10-17T10:39:42.563
> 
> 标签：sql, oracle, sequence

我想将 db1 中的 3 个表导出到 db2 中。

在导出开始之前，我将为这 3 个表创建序列。

```
CREATE SEQUENCE TEST_SEQ START WITH 1 INCREMENT BY 1; 
```

导出后，我将重新初始化序列值以匹配表中的 max(id) + 1。

```
CREATE OR REPLACE PROCEDURE "TEST_SEQUENCE"
AUTHID CURRENT_USER
is
v_num number;
begin
select max(ID)  into v_num from TABLE_1;
EXECUTE IMMEDIATE 'ALTER SEQUENCE TEST_SEQ  INCREMENT BY ' || v_num;
EXECUTE IMMEDIATE 'ALTER SEQUENCE 1TEST_SEQ  INCREMENT BY 1'; 
end;
/
show errors;
execute TEST_SEQ; 
```

此过程编译和执行没有问题。

但是当我想检查序列的最后一个值时，比如 select TEST_SEQ.nextval from dual;

我仍然得到“1”。

有人能告诉我为什么我的程序没有影响我的顺序吗？附言。我正在使用oracle sql developer来传递sql。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T10:53:52.117

您实际上需要使两个`alter`语句之间的序列递增：

```
EXECUTE IMMEDIATE 'ALTER SEQUENCE TEST_SEQ  INCREMENT BY ' || v_num;
select test_seq.nextval into v_num from dual;
EXECUTE IMMEDIATE 'ALTER SEQUENCE TEST_SEQ  INCREMENT BY 1'; 
```

在 11g 中，您可以直接分配序列：

```
v_num := test_seq.nextval; 
```

无论哪种方式，您都不需要对该值做任何事情，您只需要生成它。

或者，您可以在加载后创建序列，并根据您刚刚加载的内容设置起始值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T11:01:43.743

```
ALTER SEQUENCE TEST_SEQ  INCREMENT BY 1000; 
```

不改变序列的实际值。您必须选择 TEST_SEQ.nextval 并将实际值增加 1000。

你有几个解决问题的方法。

1) DROP 序列并再次创建

```
CREATE SEQUENCE test_seq INCREMENT BY 1 START WITH xxxx; 
```

其中 xxxx 是您的新号码。通过删除序列，您将失去对其授予的权限，您必须再次授予它们。

2）使用你的方式，但稍作修改

```
ALTER SEQUENCE test_seq INCREMENT BY yyy;
SELECT test_seq.nextval FROM dual;
ALTER SEQUENCE test_seq INCREMENT BY 1; 
```

其中 yyy 是实际序列号和新值之间的差异

3) 在 PLSQL 循环中移动序列号。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T10:54:14.447

那是因为你从 1 开始，如果你再次运行你的选择，你会发现它已经按照你的预期增加了。您还需要设置序列的起始值。

尝试类似：

```
create sequence xxx start with 100 increment by 10; 
```

或更具体地说：

```
EXECUTE IMMEDIATE 'ALTER SEQUENCE TEST_SEQ  start with ' || v_num || 'INCREMENT BY ' || v_num; 
```

# controller - 我在哪里可以找到我的 MVC4 应用程序的 DbDataController

> ID：12932467
> 
> 赞同：1
> 
> 时间：2012-10-17T10:39:51.520
> 
> 标签：controller, asp.net-mvc-4

我刚刚看到[http://channel9.msdn.com/Events/TechDays/Techdays-2012-the-Netherlands/2159](http://channel9.msdn.com/Events/TechDays/Techdays-2012-the-Netherlands/2159)

但我找不到任何关于单页应用程序的东西。我看到一个注释，它没有与 MVC4 一起发布。

我有一个 MVC 4 应用程序，现在正在使用 Controller 和 ApiController。我想试试这个 DbDataController - 它位于我找到的 System.Web.Http.Data.EntityFramework dll 中。

现在我如何找到/添加到我的项目中？有没有为它打包的nuget？

我发现了这个： http: [//nuget.org/packages/SinglePageApplication](http://nuget.org/packages/SinglePageApplication) 但它还包括很多其他的东西。

# android - 有没有办法在 Android 2.2 中与 listSelector 有类似的行为。和 4.1

> ID：12932469
> 
> 赞同：1
> 
> 时间：2012-10-17T10:39:58.177
> 
> 标签：android, selector, listitem

我正在使用 listSelector 以便在按下时更改 listItem 颜色。

在模拟器和 Android 4.1 设备上一切看起来都不错，但在 Android 2.2 设备上，列表项改变颜色，整个列表变为紫色（所有项），而不仅仅是选定项。

我使用： android:listSelector="@drawable/purpulefocus" 按下时将背景更改为紫色。

我想知道 Android 版本之间是否存在行为变化，或者我的设备存在问题，因为我无法弄清楚是什么导致了这种行为变化。

肿瘤坏死因子。

```
<ListView
    android:id="@+id/lvRecepies1list"
    android:listSelector="@drawable/purpulefocus"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" >
</ListView> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T13:18:03.967

2.3 及以下版本期望将选择器设置为列表项的背景。所以基本上你必须将选择器添加到列表中，为了让它在 2.3 及更低版本上工作，你需要添加相同的可绘制引用作为背景到你用作 ListView 行的项目的根元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T13:12:42.347

使用“形状”找到解决方案，例如：

```
<item android:state_focused="true">
<shape>
    <solid android:color="#66000000" />
</shape>
</item> 
```

从此处的示例：[ListSelector 适用于整个列表](https://stackoverflow.com/questions/2183447/listselector-applies-to-the-entire-list)

# c# - ExecuteNonQuery() 执行存储过程时返回 -1

> ID：12932471
> 
> 赞同：13
> 
> 时间：2012-10-17T10:40:05.650
> 
> 标签：c#, sql, sql-server, visual-studio-2010, stored-procedures

我正在尝试在 Visual Studio 中执行存储过程。它在下面给出。

```
CREATE PROCEDURE [dbo].[addStudent] 
    @stuName varchar(50), 
    @address varchar(100),
    @tel varchar(15),
    @etel varchar(15),
    @nic varchar (10),
    @dob date

AS 
BEGIN   
    SET NOCOUNT ON;

    DECLARE @currentID INT
    DECLARE @existPerson INT
    SET @existPerson = (SELECT p_ID FROM Student WHERE s_NIC = @nic);
    IF @existPerson = null
        BEGIN
            INSERT INTO Person (p_Name, p_RegDate, p_Address, p_Tel, p_EmergeNo, p_Valid, p_Userlevel)
            VALUES (@stuName,  GETDATE(), @address, @tel, @etel, 0, 'Student' );
            SET @currentID = (SELECT MAX( p_ID) FROM Person); 
            INSERT INTO Student (p_ID, s_Barcode, s_DOB, s_NIC) VALUES (@currentID , NULL, @dob, @nic);
            return 0;
        END
    ELSE
        return -1;
END 
```

我通过使用下面的代码来做到这一点。

```
 SqlConnection con = new SqlConnection();
        Connect conn = new Connect();
        con = conn.getConnected();
        con.Open();
        cmd = new SqlCommand("addStudent", con);
        cmd.CommandType = CommandType.StoredProcedure;
                cmd.Parameters.Add("@stuName", SqlDbType.VarChar).Value = nameTxt.Text.ToString();
                cmd.Parameters.Add("@address", SqlDbType.VarChar).Value = addressTxt.Text.ToString();
                cmd.Parameters.Add("@tel", SqlDbType.VarChar).Value = telTxt.Text.ToString();
                cmd.Parameters.Add("@etel", SqlDbType.VarChar).Value = emerTxt.Text.ToString();
                cmd.Parameters.Add("@nic", SqlDbType.VarChar).Value = nicTxt.Text.ToString();
                cmd.Parameters.Add("@dob", SqlDbType.DateTime).Value = dobTime.Value.ToString("MM-dd-yyyy");

                    int n = cmd.ExecuteNonQuery();
                    MessageBox.Show(n.ToString()); 
```

但它返回我-1。我通过输入从调试中捕获的相同值来尝试此存储过程。它是成功的。可能的错误是什么？非常感谢！

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-17T10:44:45.907

不使用`= null`，使用`is null`

```
IF @existPerson is null 
```

当你比较任何东西时`= null`，结果总是错误的（除非你有`set ansi_nulls off`，你不应该这样做，因为这样的选项已被弃用）

更好的是，您可以使用

```
IF NOT EXISTS (SELECT p_ID FROM Student WHERE s_NIC = @nic) 
```

此外，您应该使用`SCOPE_IDENTITY()`而不是`SET @currentID = (SELECT MAX( p_ID) FROM Person);`

```
SET @currentID = SCOPE_IDENTITY() 
```

最后还需要添加一个参数来收集返回值

```
 SqlParameter retValue = cmd.Parameters.Add("return", SqlDbType.Int);
   retValue.Direction = ParameterDirection.ReturnValue; 
```

然后

```
MessageBox.Show(retValue.Value); 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-10-17T10:49:13.263

让我们看一下*文档*[`ExecuteNonQuery`](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.executenonquery.aspx)：

> 对于 UPDATE、INSERT 和 DELETE 语句，返回值是受命令影响的行数。...*对于所有其他类型的语句，返回值为 -1。*

您正在调用一个存储过程，它本身不是返回行数的 3 个列出的语句中的任何一个。

* * *

如果要确定传递给`return`存储过程中语句的值，则需要在命令中添加另一个参数，并将其[`Direction`](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlparameter.direction.aspx)属性设置为[`ReturnValue`](http://msdn.microsoft.com/en-us/library/system.data.parameterdirection.aspx)（您赋予此参数的名称将被忽略）

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2014-02-14T12:15:41.937

要解决此问题，只需删除“SET NOCOUNT ON”或将其更改为“SET NOCOUNT OFF”。一切正常！

# android - 如何以原始尺寸显示相机捕获的图像？

> ID：12932477
> 
> 赞同：1
> 
> 时间：2012-10-17T10:40:19.143
> 
> 标签：android, image, opencv, camera

我正在尝试实现一个应用程序，该应用程序将使用相机捕获图像并将其显示在 ImageView 上。但是，系统会在显示之前将图片分辨率调整为 204x153，但会将图片的原始分辨率（3264x2448）保存在 sd 卡中。

这是我的代码。

```
buttonCapture.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {

            Intent intentCamera = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
            bmpUri = Uri.fromFile(new File(Environment.getExternalStorageDirectory(),  
                    "pic_" + String.valueOf(System.currentTimeMillis()) + ".jpg"));  
            try {  
                intentCamera.putExtra("return-data", false);  
                startActivityForResult(intentCamera, resultOpenCamera);  
            } 
            catch (ActivityNotFoundException e) {  
                e.printStackTrace();  
            }               
        }
    }); 
```

和我的 onActivityResult

```
protected void onActivityResult(int requestCode, int resultCode, Intent data) {

        if (requestCode == resultOpenCamera && resultCode == RESULT_OK && null != data) {
            setContentView(R.layout.preview);

            if(data.getAction() != null){  

               Uri selectedImage = data.getData();
               bmpUri = selectedImage;
               // display image received on the view
               Bundle newBundle = data.getExtras();
               Bitmap theImage = (Bitmap) newBundle.get("data");
               displayImage(preProcessing(theImage));  
               System.out.println("theImage height n width = "+theImage.getHeight()+" + "+theImage.getWidth());
            }
        }
} 
```

我使用 System.out.println 来跟踪从相机捕获的位图分辨率。它显示只有 204x153。原始分辨率应为 3264x2448。

有谁知道如何解决这个问题？？非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T12:15:21.643

仅来自以下官方文档[`ACTION_IMAGE_CAPTURE`](http://developer.android.com/reference/android/provider/MediaStore.html#ACTION_IMAGE_CAPTURE)：

> 调用者可能会传递一个额外的 EXTRA_OUTPUT 来控制该图像将被写入的位置。如果 EXTRA_OUTPUT 不存在，则在额外字段中将小尺寸图像作为位图对象返回。这对于只需要小图像的应用程序很有用。如果存在 EXTRA_OUTPUT，则将全尺寸图像写入 EXTRA_OUTPUT 的 Uri 值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T10:52:10.207

尝试将 imageview 的比例类型设置为 center 或 centerInside。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T11:04:42.967

试试这个 ：-

```
int width = bmpSelectedImage.getWidth();
int height = bmpSelectedImage.getHeight();
float scaleWidth = ((float) 250) / width;
float scaleHeight = ((float) 150) / height;
Matrix matrix = new Matrix(); matrix.postRotate(90);
resizedBitmap = Bitmap.createBitmap(bmpSelectedImage, 0, 0, width, height, matrix, true); 
```

# c# - 将一个类转换为没有任何值的字节数组已经包含我的 256 个可用字节中的 220 个字节

> ID：12932485
> 
> 赞同：0
> 
> 时间：2012-10-17T10:40:49.487
> 
> 标签：c#, compression, gzip, bytearray, binaryformatter

我目前正在将类保存`UsageData`到字节数组并将其存储在硬件密钥上。该硬件密钥为用户数据保留了最多 256 个字节。目前，我填充的属性类的大小约为 640 字节，已经压缩。现在我去创建一个`UsageDataTemp`没有任何属性/字段的临时类。我运行一个测试来查看没有任何值的字节数组有多大，它已经有 220 个字节的大小，只剩下 36 个字节要填充。

```
 [Serializable]
    public class UsageDataTemp
    {
        public byte[] ToByteArray()
        {
            var formatter = new BinaryFormatter();
            using (var stream = new MemoryStream())
            {
                //original serialization is 684 bytes long, compress it with the gzipstream
                using (var compressionStream = new GZipStream(stream, CompressionMode.Compress))
                {
                    formatter.Serialize(compressionStream, this);
                    compressionStream.Flush();
                    return stream.ToArray();
                }
            }
        }
    } 
```

为什么没有任何值的空类已经需要 220 个字节来保存自己。有没有办法进一步压缩字节数组。还是我需要开始自己制作`BinaryFormatter`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T10:45:50.443

你不告诉序列化器/反序列化器他们正在处理什么类型的对象——你可以传递给他们任何东西，他们“应该”工作。

这意味着必须将一些类型信息存储在二进制流中，才能确定正在反序列化的对象类型。这很容易（我认为）占 220 字节的开销。

* * *

如果每个字节都很重要，那么是的，您应该编写自己的代码来将您感兴趣的数据转换为最小表示，而不是使用诸如二进制序列化程序之类的通用机制。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T10:56:06.493

> 为什么没有任何值的空类已经需要 220 个字节来保存自己？

为什么要问你能找到什么？这段代码已经产生了 33 个字节：

```
FileStream fs = new FileStream("Serialized.dat", FileMode.Create);
BinaryFormatter formatter = new BinaryFormatter();
formatter.Serialize(fs, "FooString"); 
```

因为被序列化的不仅仅是字符串本身。如果您序列化一个对象，那么它的类定义（以及它所在的程序集）也会被序列化。序列化这个类的一个实例：

```
[Serializable]
class Foo
{
    public String FooString { get; set; }
} 
```

花费 166 个字节，而该`FooString`属性包含与之前序列化的原始字符串相同的数据。

所以：编写自己的序列化（或：加载/保存）逻辑。您是读取和写入该数据的人，因此您可以将空间中的特定字节分配给类的某些属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T10:50:41.797

您不需要序列化您的结构。您所需要的只是将字节存储在硬件密钥中。您可以使用对象工厂模式来实现一些东西，给定一个 256 字节数组构建一个 UsageData 对象，并从一个 UsageData 对象获取您的 256 字节数组。

# string - 从子字符串 F# 生成文件引用

> ID：12932487
> 
> 赞同：0
> 
> 时间：2012-10-17T10:40:54.310
> 
> 标签：string, f#, substring

我在 F# 中从子字符串生成文件引用时遇到问题。

我有一个输入文件，我想从输入文件名的截断创建一个唯一可识别的输出文件。

我的代码如下： -

```
 let sillyString = @"BookingsAberdeen.csv";;

    let cutString = sillyString.Substring(8);;

    let outputFile = "@" + cutString;;

    outputFile;; 
```

但结果并不完全正确。我得到“@Aberdeen.csv”，但我需要它是@“Aberdeen.csv”。

任何人都可以建议用于 outputFile 的正确代码吗？

非常感谢，

西蒙

编辑：从代码中删除了不必要的测试行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T10:56:01.547

`@`是逐字字符串修饰符。

> 如果前面有 @ 符号，则文字是逐字字符串。这意味着任何转义序列都将被忽略，除了两个引号字符被解释为一个引号字符。[微软](http://msdn.microsoft.com/en-us/library/dd323829.aspx)

它阻止 F# 将例如解释`"c:\test.txt"`为`"c:[TAB]est.txt"`. 正确解释字符串后，您无需担心 @-ing 它 - 只需`"@" +`从第四行中删除即可。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T10:54:49.473

您应该转义初始引号和结束引号：

```
let outputFile = "@\"" + sillyString + "\""; 
```

# jquery - 如何在 HTML 中表示带有垂直标题文本的网格？

> ID：12932490
> 
> 赞同：1
> 
> 时间：2012-10-17T10:41:02.710
> 
> 标签：jquery, html, css, internet-explorer, header

我想用两个坐标表示一个“分数”网格：“系统”和“位置”。分数是 0 到 5 之间的数值，而其他两个坐标是字符串。

我必须将其表示为兼容 IE7 的 HTML 表，但是我面临许多问题：

由于标题（“位置”）是字符串，它们比单元格（数字）占据更多的位置，所以我失去了很多空间（特别是因为位置字符串可能很长）。所以有问题：

> 我希望能够旋转我的标题。

我能够做到这一点，使用各种 jQuery 插件（屏幕截图中使用的是[这个](http://davidjs.com/2011/07/rotate-table-cell-content-jquery/)），它在各种导航器中工作（见[这里](http://ompldr.org/vZnd4Mg)）但它们都不能在 IE7 中工作（见[这里](http://ompldr.org/vZnd3dw/fuckie.JPG)）

没有 jQuery，使用

> 过滤器： progid:DXImageTransform.Microsoft.BasicImage(rotation=3);

我能够旋转文本，但它的容器仍然没有适应新的大小（见[这里](http://ompldr.org/vZnd3eA/iefilter.JPG)）：宽度没有减少，高度没有增加。所以，使用这个：

> 表 tr:first-child { 高度: 200px; }

我固定了第一行的高度（这并不完美，因为我不知道单元格内容会有多长，但仍然......），但这并没有改变单元格的宽度：见[这里](http://ompldr.org/vZnd4MA/block.JPG)。使用这个：

> 表 tr:first-child td { 宽度: 30px; }

没有改变任何东西，宽度仍然和旋转之前一样大。

现在，我想知道是否有办法在 IE7 下进行这项工作，如果可能的话，没有固定的高度/宽度（如[这里](http://ompldr.org/vZnd4Mg)）。此外，也许还有另一种方式来表示我的数据而不是 HTML 表格：

*   也许是带有垂直图例的散点图
*   使用一个大的 jQuery 网格插件，比如 jqGrid ：但是，我需要找到一个可以旋转表头的插件
*   使用 PNG 替换文本标题。但是，我的表中可能有 400 多列，这样会有效吗？

总而言之，这是我的问题：

*   是否有任何与 IE 兼容、能够旋转标题的 jQuery 网格插件？
*   是否可以使用 CSS 甚至 Javascript 在 IE中进行[这项工作？](http://ompldr.org/vZnd4Mg)

谢谢，

PS：我的限制是兼容 IE（至少 IE7，更好的 IE6，但如果这不可能，那是不可能的。），而不是避免使用 JavaScript。我可以尝试不使用它，但如果需要，它将在客户端计算机上可用。但是，我使用的 JS 库仍然需要与 IE7 兼容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T10:25:41.783

我终于能够使用 jQuery 和 RaphaelJS 做我想做的事了。

诀窍：将文本转换为 SVG 以便于操作。因为这一切都是使用 JavaScript 完成的，所以这不会改变网页语义。

# 如何

## HTML

```
<table>
    <thead>
        <tr>
            <th><div id="column1"><span>aaaaaaaaaaa aaaaaaaa</span></div></th>
            <th><div id="column2"><span>bbbbbbb bbbbbbbbbbbb</span></div></th>
            <th><div id="column3"><span>ccc cccccccccccccccc</span></div></th>
            <th><div id="column4"><span>ddd ddd dddddddddddd</span></div></th>
            <th><div id="column5"><span>eee eee eee eee eee </span></div></th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>1</td>
            <td>2</td>
            <td>3</td>
            <td>4</td>
            <td>5</td>
        </tr>
        <tr>
            <td>I</td>
            <td>II</td>
            <td>III</td>
            <td>IV</td>
            <td>V</td>
        </tr>
    </tbody>
</table> 
```

如您所见，在每个列标题中，我们创建一个 div，每次都有不同的 id（对于 Django，我为此使用对象 ID）如果我们想稍后独立操作每个列，使用内联跨度，然后与内容。

## Javascript

然后，使用以下代码（在页面的开头，但不在 中，最好在 之后：

```
$(document).ready(function(){
$('tr th div').each(function (index, div){
R = Raphael($(div).attr('id'), 10, 200);
R.text(5, 100, $(div).find('span').text())
.rotate(-90, true);
$(div).find('span').hide();
});
}); 
```

您将需要调整数值（当然，-90 除外）以适应您的单元格大小。 **当然，您必须在代码中导入 jQuery 和 RaphaelJS。**我使用了 jquery-1.8.2.min.js 和 raphael-min.js，它们都可以在各自的项目站点上找到。

## CSS

当然，您可以使用自己的 CSS，但如果您在主题化内联文本时遇到困难，请尝试使用 RaphaelJS 的 .attr(...) 函数。请记住，您必须将它们与 R.text(...) 行链接：

```
R.text(...).attr(...).attr(...).rotate(-90, true); 
```

# 最终渲染

我能够得到这样的东西：

[![最终渲染](../Images/a4dfc126f518bf4896f809d9229365e0.png)](https://i.stack.imgur.com/7UpIe.png)
[（来源：[ompldr.org](http://ompldr.org/vZnhhdw)）]

## 下一步

我的下一步是现在能够将单元格内容向下对齐到底部，请参见[此处](https://stackoverflow.com/questions/12952454/in-raphaeljs-how-to-align-rotated-text-to-the-bottom)。

# android - 如何使用 Google Drive SDK 对结果进行排序？

> ID：12932491
> 
> 赞同：1
> 
> 时间：2012-10-17T10:41:04.223
> 
> 标签：android, google-drive-api

我正在使用以下方法从 Google Drive 中查询条目。在我的 Android 应用程序中，我不会一次获取目录的所有条目。通过延迟加载，我在用户滚动列表时获取条目。

问题是条目确实未排序。我确实对它们进行了排序，但是由于延迟加载，事情变得令人讨厌。我只能对我拥有的内容进行排序，因此必须在加载每个新页面时都对列表进行排序。

我该如何改变呢？

```
 FileList files = drive
            .files()
            .list()
            .setMaxResults(GdataConstants.REQUEST_ENTRIESPERPAGE)
            .setPageToken(nextPageToken)
            .setQ(buildFilesQuery(folderId, mimeTypes))
            .execute(); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-08T22:09:12.337

以前的 doclist API 允许排序。它是一个缺失的功能，除非您只有几个未分页的结果，否则无法在客户端实现。它不可能实现例如驱动器搜索并让结果文件按名称排序。我必须预先加载整个结果集（可能是数千个）才能正确排序。

请参阅[https://developers.google.com/google-apps/documents-list/v2/reference#Parameters](https://developers.google.com/google-apps/documents-list/v2/reference#Parameters)其中显示“orderby”

# javascript - 如何使用回车键加载新页面？

> ID：12932494
> 
> 赞同：-1
> 
> 时间：2012-10-17T10:41:21.373
> 
> 标签：javascript, button, key, enter

```
<script type="text/javascript">
window.onload = init;

function init() {
    var button = document.getElementById("searchbutton");
    button.onclick = handleButtonClick;
}

function handleButtonClick(e) {
    var textinput = document.getElementById("searchinput");
    var searchterm = textinput.value;
    window.location.assign("http://www.google.com/testing/" + searchterm)
}
</script>

<input type="text" name="search" id="searchinput">
<button type="button" id="searchbutton">Ara</button> 
```

此代码块接受用户输入并使用该输入进入新页面。

当用户按下回车键时，我想用那个提交按钮做同样的事情。我在网上找到了一些东西，但它们都与 jquery 有关。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T11:02:24.730

从评论扩展：

一个对 IE 不友好的解决方案：

```
function init() {
    var button = document.getElementById("searchbutton");
    button.onclick = handleButtonClick;
    document.getElementById("searchinput").onchange=handleButtonClick;
} 
```

一个常见的解决方案：

```
function init() {
    var button = document.getElementById("searchbutton");
    button.onclick = handleButtonClick;
    document.getElementById("searchinput").onkeyup=function(e){
        e=e?e:event;
        if(e.keyCode==13) handleButtonClick();
    };
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T10:55:46.360

```
<input type="text" name="search" id="searchinput" onkeydown="if (event.keyCode == 13) handleButtonClick()"> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T10:56:24.767

我认为您应该使用带有提交按钮的标签，并使用表单的 .onSubmit() 事件。当您单击和按下 Return (Enter) 键时，都会触发此事件。

一个示例 JS 代码（在 JSFiddle 中测试，只是修改了一些代码以添加表单）：

```
<script type="text/javascript">
function processForm(e) {
    if (e.preventDefault) e.preventDefault();

    var textinput = document.getElementById("searchinput");
    var searchterm = textinput.value;
    window.location.assign("http://www.urbandictionary.com/define.php?term=" + searchterm)

    return false; // Block form
}

var form = document.getElementById('searchForm');

if (form.attachEvent) { form.attachEvent("submit", processForm); } 
else { form.addEventListener("submit", processForm); }​
</script>
<form id="searchForm">
<input type="text" name="search" id="searchinput">
<input type="submit">
</form>​ 
```

您可以在此处观看此代码：http: [//jsfiddle.net/UD8FN/](http://jsfiddle.net/UD8FN/)

雨果，

# mysql - 用 LIKE 更新同一张表

> ID：12932495
> 
> 赞同：0
> 
> 时间：2012-10-17T10:41:28.167
> 
> 标签：mysql, join, sql-like

我有一个包含 30,000 种产品的产品表。

```
SELECT product_id,sku PRODUCT T1

1  3518
12 3518[2]
11 88322[2]
10 915703[12]
 9 915703 
```

product_id 的 1 和 12 是相同的产品，但有所不同，所以我想更新 product_description.tag 两个值。

```
product_id = 1
product_description.tag = 3518, 3518[2]

product_id = 12
product_description.tag = 3518, 3518[2]

product_id = 11
product_description.tag = 88322[2]

product_id = 10
product_description.tag = 915703[12],915703

product_id = 9
product_description.tag = 915703[12],915703 
```

认为这是有道理的，我只是无法在同一张桌子上做一个 LIKE '%3518' 并更新另一个。

你能帮我吗？

谢谢

斯图

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T10:54:40.253

这是一个可怕的模式，花点时间通过创建一个新表来部分修复它，说`Product_Masters`并用以下结果填充它：

```
SELECT product_id, 
    (
    SELECT MIN(product_id)
    FROM PRODUCT T2 
    WHERE T2.sku LIKE T1.sku + '%'
    ) AS master_project_id
FROM PRODUCT T1 
```

然后将其用作设置 product_description 字段的列表。首先更新与 master_product_id 对应的记录的描述，然后更新所有子项目以匹配该值。

# node.js - 如何使 fs.readDir 从相对路径读取文件夹？其中根不是节点进程的入口点

> ID：12932500
> 
> 赞同：1
> 
> 时间：2012-10-17T10:41:34.940
> 
> 标签：node.js, fs

我在文件“/subfolder/a”中有 fs.readDir，文件“/subfolder/a”是从“/b”调用的。当我运行 fs.readDir 时，它会显示“/”中的文件，即 b。我想知道是否有任何方法可以“说”到 fs.readDir 以将其设置为“/subfolder/”而不是“/”。

**更新：** 当然我可以使用相对于节点入口点的路径，但我想使用文件“/subfolder/a”中的“./”（当前文件夹）之类的东西并获取文件夹的内容“/子文件夹/”而不是文件夹“/”。

# android - 在 ActionBarSherlock 中调用“查找”

> ID：12932501
> 
> 赞同：0
> 
> 时间：2012-10-17T10:41:38.897
> 
> 标签：android, find, android-actionbar, actionbarsherlock

我有一个带有 a 的应用程序，`WebView`我曾经`ActionBarSherlock`实现过操作栏。

现在，当用户长按一个单词时，`WebView`他可以选择**查找**文本并输入他想要查找的任何内容，并使用内置的查找功能，这非常棒。

有什么方法可以有问题地调用它（阅读：一个启动 find 方法的**查找**按钮，而用户不必长按`webview`）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T11:12:39.080

好的，解决方案更简单，事实证明：

```
public boolean showFindDialog(String text, boolean showIme) 
```

它是 WebView 控制器中的内置方法。实现了这样的事情：

```
public boolean onOptionsItemSelected(MenuItem item) {
    int i = item.getItemId();
    if (i == R.id.findInDocument)
    {
        _webMain.showFindDialog(null, true);
    }
    return true;
} 
```

不幸的是，它仅在 SDK11+ 中受支持。这可能意味着碎片化，我上面的建议在可用的情况下更合适（尽管有一些修改，使用内置的“可折叠动作”而不是浮动文本视图）。

# javascript - 链接列表项

> ID：12932503
> 
> 赞同：3
> 
> 时间：2012-10-17T10:41:41.963
> 
> 标签：javascript, jquery, html, list, variables

我有一个 HTML 列表，其中包含属性 data-answer 和 data-sum。网格中填充了隐藏的答案。当隐藏的答案被突出显示时，用户使用总和来计算答案是什么。在突出显示答案的那一刻，总和不是 HTML 中链接的正确答案，因此用户无法计算出来。

我的代码有什么问题，为什么不将这两个属性配对。是因为我没有为答案设置变量吗？

我有这个清单...

```
<ul style="display:none;" id="answerlist">

    <li data-answer="1" data-sum="4 - 3 ="></li>

    <li data-answer="2" data-sum="7 - 5 ="></li>

    <li data-answer="3" data-sum="1 + 2 ="></li>

    <li data-answer="4" data-sum="1 + 3 ="></li>

    <li data-answer="5" data-sum="4 - 3 ="></li>

    <li data-answer="6" data-sum="10 - 4 ="></li>

    <li data-answer="7" data-sum="4 + 3 ="></li>

    <li data-answer="8" data-sum="2 x 4 ="></li>

    <li data-answer="9" data-sum="4 + 5 ="></li>

    <li data-answer="10" data-sum="1 x 10 ="></li>

    <li data-answer="11" data-sum="10 + 1 ="></li>

    <li data-answer="12" data-sum="2 x 6 ="></li>

    <li data-answer="13" data-sum="9 + 4 ="></li>

    <li data-answer="14" data-sum="2 x 7 ="></li>

    <li data-answer="15" data-sum="11 + 4 ="></li>

  </ul> 
```

答案很好，但是当我将问题拉入 div -“.sumstyle”时，问题总是错误的。

```
var sum = $('#answerlist li[data-answer=' + answer + ']').data('sum');
$('.sumstyle').text(sum); 
```

我为总和设置变量的方式有问题吗？

这是一个小提琴[http://jsfiddle.net/ZAfVZ/21/](http://jsfiddle.net/ZAfVZ/21/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T14:24:22.690

好的，我看过 Fiddle，原因如下：

```
var sum= $('#answerlist li[data-answer="'+answer+'"]').data('sum'); 
```

...在第 120 行没有找到您想要的 li 元素`answer`是写入 JQuery 选择器的变量没有值。这意味着你真的在这样做：

```
var sum= $('#answerlist li[data-answer=""]').data('sum'); 
```

...它正在寻找 data-answer 属性没有值的 li 元素，它不存在。

那条线上的价值`answer`应该来自哪里？`answer`在第 100 行附近的早期循环中使用了一个局部变量`for / while`- 是吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T10:50:04.937

这里的问题是属性`data-sum`是字符串而不是整数。您将需要获取属性并评估变量以获得正确的总和。

**更新**：一旦你得到你的属性

```
var attribute_value = "5 + 7 ="; // assumed attribute value
var solution = attribute_value.substring(0, attribute_value.length -2);
var sum = eval ( solution );
alert(sum); 
```

# opencv - 提取 SIFT 描述符

> ID：12932508
> 
> 赞同：0
> 
> 时间：2012-10-17T10:41:46.433
> 
> 标签：opencv, sift

如果您不介意我使用 opencv SIFT 来获取筛选描述符。我得到正确数量的关键点和描述符。

但是当我使用这样的代码遍历描述符时（我只访问第一个描述符）

```
for (int ii=0;ii<128;ii++)
    {
        int m=descriptors1.at<int>(0,ii);
            std::cout<<ii<<"    "<<m<<std::endl;
    } 
```

我得到了像 1110122255 4154646455 1101111115 1111020416 这样的 stange 值

他们都是10位数字，这是不可能的？那么访问这些元素的正确方法是什么

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T12:59:35.733

很确定描述符存储在浮点值矩阵中。尝试使用`float m = descriptors1.at<float>(0,ii)`

# selenium - Selenium setTimeout 命令在 WebDriver 中被忽略？

> ID：12932510
> 
> 赞同：0
> 
> 时间：2012-10-17T10:42:01.633
> 
> 标签：selenium, automation, webdriver

我正在使用 WebDriverBackedSelenium

我注意到 selenium.setTimeout() 命令被完全忽略了。还有其他人面临这个问题吗？有解决办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T12:41:53.317

恕我直言解决的两种可能性：

```
WebDriver driver;
driver = new FirefoxDriver();   
driver.manage().timeouts().implicitlyWait(20, TimeUnit.SECONDS); 
```

第二种方式：

```
Thread.sleep(...miliseconds...) 
```

取决于你要使用它的目的。

# php - 从数据库中更新选择标签

> ID：12932512
> 
> 赞同：0
> 
> 时间：2012-10-17T10:42:06.977
> 
> 标签：php, mysql

选择.php

```
<?php
echo '<form method="post"><table>
         <tr><td>Region<select name="region">
                    <option value="0">Choose</option>
                    <option value="1">True</option>
                    <option value="2">False</option>
         </td></tr>
         <tr><td><input type="submit" value="submit"></td></tr>
      </table></form>';
?> 
```

编辑.php

```
<?php
echo '<table>
         <tr><td>Region <select id="selector">';
      $region = mysql_query('SELECT * FROM region');
        echo '<option selected="selected">Choose</option>';
        foreach($region as $pr)
        {
              $region = $pr->region;
          echo '<option value='.$region.'>'.$region.'</option>';          
            }
        echo '</select>';
         </td></tr>
      </table>';
?> 
```

我通过值 0、1、2 成功地将区域提交到数据库，当处于编辑模式时，我需要首先获取选定的区域。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T11:08:53.803

修改为edit.php

```
<select name="selector"> 
```

将您的 edit.php 最后回显更正为

```
 echo '</select></td></tr>'; 
```

然后评估提交的表单

```
$selected_option = $_POST['selector']; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T10:53:01.517

进入edit.php页面获取值并将其存储到变量中，像这样

如果你使用`GET`方法

```
$value=$_GET['selected_id']; 
```

或者如果你使用`POST`方法

```
$value=$_POST['selected_id']; 
```

然后使用下面的代码来获取选定的值

```
<option value="<?php echo $region; ?>" <?php if($value==$region){ echo "selected";} ?> ><?php echo $regio; ?></option> 
```

可能对您有用。

# android - ActivityNotFoundException: 无法找到明确的活动类。android.content.ClipData$Item 丢失

> ID：12932520
> 
> 赞同：-1
> 
> 时间：2012-10-17T10:42:16.663
> 
> 标签：android, android-intent, android-activity

我的 logcat 显示

```
android.content.ActivityNotFoundException: Unable to find explicit activity class {com.example.storemanager/android.content.ClipData$Item}; have you declared this activity in your AndroidManifest.xml? 
```

我的意图是这样的

```
Intent intent = new Intent(CategoryMain.this, Item.class);
intent.putExtra("childData", childDataMap);
startActivity(intent); 
```

Android清单就像

```
<activity android:name="CategoryMain" >
        </activity>
        <activity android:name="Item" >
        </activity> 
```

发现[这个](https://stackoverflow.com/questions/9137780/activitynotfoundexception-unable-to-find-explicit-activity-class)问题，提到可能是由于下一个活动中的一些空指针异常，我试图调试它，但调试器没有移动到下一个活动。请告诉我我错在哪里？

**编辑**：我已经尝试将“Item”更改为“.Item”

**已解决：**在尝试了每一种方法后，我终于意识到我的 android manifest 没有问题。问题出在下一个活动`nullpointerexception` 的方法中。`oncreate`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T10:44:59.313

试试这个

```
<activity 
android:name=".CategoryMain" >
        </activity>
        <activity android:name=".Item" >
        </activity> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T10:49:16.680

[给出完全合格](http://developer.android.com/guide/topics/manifest/activity-element.html)的班级名称是一个好习惯

```
<activity 
   android:name="com.example.storemanager.CategoryMain" >
    </activity>
    <activity android:name="com.example.storemanager.Item" >
    </activity> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T10:44:58.790

试试这个 -

```
......
......
<activity android:name=".CategoryMain" />
<activity android:name=".Item" />
......
...... 
```

**更新**

你有没有试过用完整的包裹来声明你的活动？

```
<activity android:name="com.example.storemanager.Item />
...... 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-17T10:57:29.430

由于上面的答案不起作用，我觉得项目的名字有点可疑，因为android使用项目标签。尝试将活动名称更改为 ItemActivity。
我只是猜测。

# jquery - 根据选择值显示和隐藏内容

> ID：12932526
> 
> 赞同：2
> 
> 时间：2012-10-17T10:42:39.433
> 
> 标签：jquery

我有这个 Html 代码

```
<select class="selectOption">
    <option>Analytics</option>
    <option>Translation</option>
    <option>Poll</option>
</select>

<div id="changingArea">
    <div id="Analytics" class="desc">Analytics</div>
    <div id="Translation" class="desc">Translation</div>
    <div id="Poll" class="desc">Poll</div>
</div>​ 
```

CSS

```
.desc {display: none;}​ 
```

JS

```
$(function(){
      $('.selectOtion').change(function(){
        var selected = $(this).find(':selected').text();
        $(".desc").hide();
         $('#' + selected).show();
      });
}); 
```

现在的问题是所有 div 元素都隐藏在页面加载中。我想默认显示第一个选项值，并且当更改 div 内容时也会更改。

示例 [http://jsfiddle.net/bsqVm/](http://jsfiddle.net/bsqVm/)

**编辑：**

谢谢你们的帮助

首先我的代码中有一个错字，所以'selectOtion'应该是'selectOption'

其次，使默认选择显示我们可以触发 DOMReady 上的更改事件作​​为“未定义”解决方案

所以javascript是

```
$(function(){
      $('.selectOption').change(function(){
        var selected = $(this).find(':selected').text();
        //alert(selected);
        $(".desc").hide();
         $('#' + selected).show();
      }).change()
 }); 
```

或者

```
 $(function(){
  $('#Analytics').show(); // Will show the div
  $('.selectOption').change(function(){
    var selected = $(this).find(':selected').text();
    //alert(selected);
    $(".desc").hide();
    $('#' + selected).show();
  });
 }); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T10:45:30.223

`selectOtion`您的代码中应该有一个错字`selectOption`。为了根据所选值显示 div，您可以在 DOMReady 上触发更改事件。

```
$(function(){
     $('.selectOption').change(function(){
         var selected = $(this).find(':selected').text();
         $(".desc").hide();
         $('#' + selected).show();
     }).change()
}); 
```

[http://jsfiddle.net/XCUDF/](http://jsfiddle.net/XCUDF/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-17T10:46:19.890

您的代码中有错字

```
$(function(){
      $('.selectOption').change(function(){
        var selected = $(this).find(':selected').text();
        $(".desc").hide();
         $('#' + selected).show();
      });
}); 
```

更改`$('.selectOtion')`为`$('.selectOption')`

我已经更新了你的小提琴工作正常现在看看

[http://jsfiddle.net/bsqVm/4/](http://jsfiddle.net/bsqVm/4/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-17T10:47:44.637

试试这个：[jsfiddle](http://jsfiddle.net/bsqVm/3/)

自动呼叫事件通常是最简单的事情......

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-17T10:51:01.467

您可以添加此行以显示加载时的 div：

```
$(function(){
      $('#Analytics').show(); // Will show the div
      $('.selectOption').change(function(){
        var selected = $(this).find(':selected').text();
        //alert(selected);
        $(".desc").hide();
        $('#' + selected).show();
      });
}); 
```

这是[演示](http://jsfiddle.net/bsqVm/8/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-17T13:22:09.633

为了确保您始终显示正确的 div，最好为所有选项赋予价值，即使它与选项中的文本相同，因为如果您有多种语言，例如西班牙语的“分析”会有不同的文本。所以更好让它像这样：

```
<select class="selectOption">
    <option value="Analytics">Analytics</option>
    <option value="Translation">Translation</option>
    <option value="Poll">Poll</option>
</select>

$(function(){
      $('#Analytics').show(); // Will show the div
      $('.selectOption').change(function(){
        var selected = $(this).val(); //may store it in a variable
        //alert(selected);
        $(".desc").hide();
        //$('#'+selected).show();
        $('#' + $(this).val()).show(); //or u can just use obj value in selector to save coding
      });
}); 
```

# ruby-on-rails - 不幸的是，发生了致命错误。请参阅 Bundler 故障排除文档

> ID：12932527
> 
> 赞同：2
> 
> 时间：2012-10-17T10:42:44.813
> 
> 标签：ruby-on-rails, ruby, rvm

我刚刚遇到了一些使用 RVM 从 ruby​​ 1.9.3-p194 升级到 1.9.3-p286 的问题。到目前为止，我已经设法修复了它们，当我运行捆绑器时，我得到以下信息：

```
~/rp/tp[master*]$ bundle update

Unfortunately, a fatal error has occurred. Please see the Bundler 
troubleshooting documentation at http://bit.ly/bundler-issues. Thanks! 
/home/robin/.rvm/rubies/ruby-1.9.3-p286/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require': libcrypto.so.0.9.8: cannot open shared object file: No such file or directory - /home/robin/.rvm/rubies/ruby-1.9.3-p286/lib/ruby/1.9.1/x86_64-linux/digest/sha1.so (LoadError)
    from /home/robin/.rvm/rubies/ruby-1.9.3-p286/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
    from /home/robin/.rvm/gems/ruby-1.9.3-p286@global/gems/bundler-1.2.1/lib/bundler/definition.rb:1:in `<top (required)>'
    from /home/robin/.rvm/gems/ruby-1.9.3-p286@global/gems/bundler-1.2.1/lib/bundler.rb:144:in `definition'
    from /home/robin/.rvm/gems/ruby-1.9.3-p286@global/gems/bundler-1.2.1/lib/bundler/cli.rb:279:in `update'
    from /home/robin/.rvm/gems/ruby-1.9.3-p286@global/gems/bundler-1.2.1/lib/bundler/vendor/thor/task.rb:27:in `run'
    from /home/robin/.rvm/gems/ruby-1.9.3-p286@global/gems/bundler-1.2.1/lib/bundler/vendor/thor/invocation.rb:120:in `invoke_task'
    from /home/robin/.rvm/gems/ruby-1.9.3-p286@global/gems/bundler-1.2.1/lib/bundler/vendor/thor.rb:275:in `dispatch'
    from /home/robin/.rvm/gems/ruby-1.9.3-p286@global/gems/bundler-1.2.1/lib/bundler/vendor/thor/base.rb:408:in `start'
    from /home/robin/.rvm/gems/ruby-1.9.3-p286@global/gems/bundler-1.2.1/bin/bundle:14:in `block in <top (required)>'
    from /home/robin/.rvm/gems/ruby-1.9.3-p286@global/gems/bundler-1.2.1/lib/bundler/friendly_errors.rb:4:in `with_friendly_errors'
    from /home/robin/.rvm/gems/ruby-1.9.3-p286@global/gems/bundler-1.2.1/bin/bundle:14:in `<top (required)>'
    from /home/robin/.rvm/gems/ruby-1.9.3-p286@global/bin/bundle:19:in `load'
    from /home/robin/.rvm/gems/ruby-1.9.3-p286@global/bin/bundle:19:in `<main>'
    from /home/robin/.rvm/gems/ruby-1.9.3-p286@global/bin/ruby_noexec_wrapper:14:in `eval'
    from /home/robin/.rvm/gems/ruby-1.9.3-p286@global/bin/ruby_noexec_wrapper:14:in `<main>' 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-17T11:16:44.927

确保正确安装所有库，RVM 显示所需的库以及如何安装它们：

```
rvm requirements 
```

删除所有其他版本的**openssl**并仅保留一个匹配版本的 openssl + openssl-dev(el) 很重要。

在此之后，您需要重新安装 ruby​​：

```
rvm reinstall 1.9.3 
```

# php - 为什么 array_slice() 和 array_splice() 做同样的事情？

> ID：12932529
> 
> 赞同：0
> 
> 时间：2012-10-17T10:42:48.913
> 
> 标签：php, arrays

我尝试使用各种数据来查看 array_slice() 和 array_splice() 之间的区别，但这两个函数在我的计算机上的结果相同。

```
$input = array("red", "green", "blue", "yellow");
print_r(array_splice($input, 2));  //the result should be {"red", "green"}

$input = array("red", "green", "blue", "yellow");
print_r(array_slice($input, 2));   //the result should be {"blue", "yellow"} 
```

在这两种情况下，都会显示以下输出： Array ( [0] => blue [1] => yellow )

有什么想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-17T10:49:39.897

所以你有一个数组

```
$input = ["red", "green", "blue", "yellow"]; 
```

**数组切片**

运行`array_slice($input, 2)`将返回您通过`$offset`(2) 请求的部分和`$length`- 您省略的 3d 参数（这意味着与剩下的一样多）。另外有趣的是，`$input`不是通过引用传递的，这意味着它将保持不变。

```
$result = array_slice($input, 2);
// $input == [0 => "red", 1 => "green", 2 => "blue", 3 => "yellow"];
// $result == [0 => "blue", 1 => "yellow"]; 
```

有一个可选的第四个参数来保留键，这意味着返回的键不变。

```
$result = array_slice($input, 2, null, true);
// $result == [2 => "blue", 3 => "yellow"]; 
```

**数组拼接**

这个函数类似于`array_slice`，除了这次数组是通过引用传递的。因此该函数现在可以更改初始数组。此外，第 4 个参数接受一个应该替换切片部分的数组（如果省略，则表示该部分被替换为空数组）。

```
$result = array_splice($input, 2);
// $input = [0 => "red", 1 => "green"];
// $result == [0 => "blue", 1 => "yellow"];

$result = array_splice($input, 2, null, ["brown", "black"]);
// $input = [0 => "red", 1 => "green", 2 => "brown", 3 => "black"];
// $result == [0 => "blue", 1 => "yellow"]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T10:50:20.177

array_splice($input, 2) 删除偏移量 2 处的元素，将它们替换为空（您没有指定要替换的任何内容）并返回由提取的元素组成的数组：即蓝色和黄色。变形后的原始数组（$input）被引用修改，不返回

array_slice($input, 2) 返回 $input 中偏移量 2 的所有元素：即蓝色和黄色

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T10:47:49.410

根据PHP手册`array_splice`：

> 返回由提取的元素组成的数组。

例如：

```
$input = array("red", "green", "blue", "yellow");
array_splice($input, 2);
// $input is now array("red", "green") 
```

所以 of`$input`和 of的值`print_r(array_splice...`是不一样的。

# clojure - clojure 的动态变量和绑定的实际目的是什么？

> ID：12932530
> 
> 赞同：8
> 
> 时间：2012-10-17T10:42:49.020
> 
> 标签：clojure, dynamic-scope

我看了一下参考资料：[http](http://clojure.org/vars#Vars%20and%20the%20Global%20Environment) ://clojure.org/vars#Vars%20and%20the%20Global%20Environment，http : [//clojuredocs.org/clojure_core/clojure.core/binding](http://clojuredocs.org/clojure_core/clojure.core/binding)

以及[clojure 和 ^:dynamic](https://stackoverflow.com/questions/11730828/clojure-and-dynamic)和[Clojure 动态绑定](https://stackoverflow.com/questions/12789350/clojure-dynamic-binding?rq=1)

我仍然不明白为什么需要，`binding`因为我编写的每个程序都没有它们，我可以找到以传统方式编写示例的方法——我觉得这更容易理解。有没有利用这个的项目/编程范例的例子？

例如......在动物说话的例子中，你可以得到类似的效果：

```
(def dog {:name "Dog" :sound "Woof"})
(def cat {:name "Cat" :sound "Meow"})

(defn speak [animal]
   (str (:name animal) " says " (:sound animal))

(println (speak dog))
(println (speak cat)) 
```

没有宏，没有动态绑定......仍然很干净。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-17T12:27:49.833

*严格*来说并不需要它们：正如您正确地观察到的那样，您可以在没有 的情况下做任何您喜欢的事情`binding`，而且实际上如果`binding`不存在，那么您可以使用宏和 Java 的`ThreadLocal`s 相对轻松地重新实现它。

然而，绑定作为一种将**动态上下文**传递给函数而无需显式传递参数的方式很有用。

当您编写深度嵌套的高阶函数并且不想为调用堆栈中的每个函数添加额外的参数以便将一些值传递给嵌入深处的低级函数时，它特别有用。

以您的示例为基础：

```
(def ^:dynamic *loud-noises* false)

(defn speak [animal]
     (str (:name animal) " says " 
          (let [sound (:sound animal)]
            (if *loud-noises* (.toUpperCase sound) sound))))

(speak dog)
=> "Dog says Woof"

(binding [*loud-noises* true]
  (speak dog))
=> "Dog says WOOF" 
```

注意我不需要向`speak`函数添加额外的参数来获得不同的行为。在这种情况下，添加一个额外的参数将是微不足道的，但想象一下，如果`speak`函数深埋在复杂的高阶函数中......

尽管如此，我认为总体上最好的建议是避免动态绑定，除非你真的需要它。如果可以的话，通常最好添加显式参数：直接参数可以更容易地测试和推理函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T00:36:36.657

只是跟进上面 mikera 的示例.. 我可以理解为什么你会用一种表达力较低的语言来做，但是因为 clojure 的表达力很强，我宁愿重写它......`loud-noise`函数可以稍微改变一下，再次达到相同的效果通过添加额外的参数来说话...

```
(defn speak [animal & opts]
  (let [sound (:sound animal)
        sound (if (some #(= % :louder) opts)
                 (.toUpperCase sound) sound)]
    (str (:name animal) " says " sound)))

> (speak dog)
;;=> "Dog says Woof"
> (speak dog :louder)
;;=> "Dog says WOOF" 
```

如果您无法更改原始代码，绑定只是一种破解快速而肮脏的解决方案的方法吗？

# ruby-on-rails - 如何使用正则表达式验证此 IP 地址

> ID：12932532
> 
> 赞同：1
> 
> 时间：2012-10-17T10:42:56.280
> 
> 标签：ruby-on-rails, regex

我想制作正则表达式来验证这些类型的 ip 地址。比如

```
 192.168.12.1       # it may be any proper ip address 

       193.168.34.3-3     # this format should also be acceptable 
```

因为我想从范围内的用户那里获取价值。

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T10:49:17.037

```
^([01]?\\d\\d?|2[0-4]\\d|25[0-5])\\.([01]?\\d\\d?|2[0-4]\\d|25[0-5])\\.
([01]?\\d\\d?|2[0-4]\\d|25[0-5])\\.([01]?\\d\\d?|2[0-4]\\d|25[0-5])$ 
```

`0-255.0-255.0-255.0-255`是用于以格式验证 IP 地址的正则表达式。最后一个数字的范围是多少，用`-`

**编辑**

```
^([01]?\d\d?|2[0-4]\d|25[0-5])\.([01]?\d\d?|2[0-4]\d|25[0-5])\.([01]?\d\d?|2[0-4]\d|25[0-5])\.([01]?\d\d?)(?:\-([01]?\d\d?|2[0-4]\d|25[0-5]))?|2[0-4]\d|25[0-5](?:\-([01]?\d\d?|2[0-4]\d|25[0-5]))?$ 
```

这应该适用于 OP 的场景。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T11:02:17.283

在 Rails 3 中使用 ActiveRecord 进行验证的 Rails 方法是：

```
@ip_regex = /^([1-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])(\.([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])){3}$/

validates :gateway, 
          :presence => true, 
          :uniqueness => true,
          :format => { :with => @ip_regex } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-17T10:56:36.077

你可以从这里开始

[http://answers.oreilly.com/topic/318-how-to-match-ipv4-addresses-with-regular-expressions/](http://answers.oreilly.com/topic/318-how-to-match-ipv4-addresses-with-regular-expressions/)

并根据需要进行修改。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-17T10:55:38.553

为简单起见，调用`([0-9] | [1-9][0-9] | 1[0-9][0-9] | 2[0-4][0-9] | 25[0-5])`“模式”，RegEx 将是；

```
Pattern\.Pattern\.Pattern\.Pattern(-Pattern)? 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-17T11:52:56.233

签出这个正则表达式。

```
/^([1-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])(\.([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])){3}(?:\-([1-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5]))?$/ 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-17T10:47:58.053

`([0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}[\-0-9]*)`将验证你的两个例子..如果你需要它来匹配更多，你能更具体吗？

# sqlite - 无法从 flex 中的 sqlite 数据库中获取数据

> ID：12932535
> 
> 赞同：0
> 
> 时间：2012-10-17T10:43:01.227
> 
> 标签：sqlite, flex4.5, flex-mobile

我正在 flex 4.5 中制作一个移动应用程序，我想获取人的姓名和年龄，然后保存到 sqlite 数据库完成我的代码如下所示：

```
public var personNamesDB:File;
        public var dbConnection:SQLConnection;

        protected function createDatabase(event:FlexEvent):void
        {
            // TODO Auto-generated method stub
            personNamesDB = File.applicationStorageDirectory.resolvePath("person.db");
            dbConnection = new SQLConnection();
            dbConnection.openAsync(personNamesDB, SQLMode.CREATE);
            dbConnection.addEventListener(SQLEvent.OPEN, onDatabaseOpened);
            dbConnection.addEventListener(SQLEvent.CLOSE, onDatabaseClosed);

        }// end createDatabase method

protected function onDatabaseOpened(arshayEvent:SQLEvent):void
        {
            trace("DB Opened");
            var statement:SQLStatement = new SQLStatement();
            statement.sqlConnection = dbConnection;
            statement.text = "CREATE TABLE IF NOT EXISTS personinfo(id INTEGER PRIMARY KEY AUTOINCREMENT, nameofperson TEXT, ageofperson TEXT)";

            statement.execute();
            // for showing saved city names in list on App start up
            showSavedNames();
            trace("table created");
        } 
```

现在插入数据代码是：

```
///////////////////////////////////
        public var insertData:SQLStatement
        protected function saveName():void
        {
            // SQLite Usage
            insertData = new SQLStatement();
            insertData.sqlConnection = dbConnection;
            insertData.text = "INSERT INTO personinfo(nameofcity, ageofperson) VALUES(:nameofcity, :ageofperson)";
            insertData.parameters[":nameofcity"] =nameInput.text;
            insertData.parameters[":ageofperson"] = ageInput.text;
            insertData.addEventListener(SQLEvent.RESULT, dataInsertedSuccess);
            trace("Name " + nameInput.text);
            insertData.execute();

            showSavedNames();

        }

        protected function dataInsertedSuccess(event:SQLEvent):void
        {
            trace(insertData.getResult().data);
        }
        //////////////////////////////////////////////
        public var selectQuery:SQLStatement;
        protected function showSavedNames():void
        {
            selectQuery = new SQLStatement();
            selectQuery.sqlConnection = dbConnection;
            selectQuery.text = "SELECT * FROM personinfo ORDER BY nameofperson ASC";
            selectQuery.addEventListener(SQLEvent.RESULT, showNamesInList);

            selectQuery.execute();
        }

        protected function showNamesInList(event:SQLEvent):void
        {
            listOfAddedNames.dataProvider = new ArrayCollection(selectQuery.getResult().data);
        } 
```

列表控件的 mxml 代码是：

```
<s:List id="listOfAddedNames" width="345" height="100%" labelField="nameofperson"
            click="get_names_data(event)"/> 
```

现在 get_names_data 方法是这样的：

```
public var selectNameQuery:SQLStatement;

        protected function get_names_data(event:MouseEvent):void
        {
            // TODO Auto-generated method stub

            var currentName:String = listOfAddedNames.selectedItem.nameofperson;

            selectNameQuery = new SQLStatement();
            selectNameQuery.sqlConnection =dbConnection;
            selectNameQuery.text = "SELECT ageofperson FROM personinfo WHERE (nameofperson = '" + currentName + "')";
            selectNameQuery.addEventListener(SQLEvent.RESULT, nowGotAge);

            selectNameQuery.execute();
            trace("current selected   >> "+currentName);
        }

        protected function nowGotAge(event:SQLEvent):void
        {

            trace("Age of selected Name is >> "+selectNameQuery.getResult().data.ageofperson);
        } 
```

在这条线上：

```
trace("Age of selected Name is >> "+selectNameQuery.getResult().data.ageofperson); 
```

没有从数据库中获取数据并且 trce 显示“未定义”请为我解决这个问题并告诉我如何根据人名列表中的选定名称从 ageofperson 列中获取数据——提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T06:22:13.527

第一个问题需要了解异步执行模型，因为您打开了 sqlite 数据库异步模式。列名“nameofcity”的第二个问题该人员表没有像您声明的任何列。所以我在 saveName() 中将这里修改为“nameofperson”。

在您调用 saveName() 的地方，请确保您调用了“saveName()”。

在 dataInsertedSuccess() 中，只有在再次运行 INSERT/UPDATE sql 查询时，sqlquery 才会返回受影响的行，即只返回整数值。因此，insertData.getResult().data 始终为 null/undefined。如果您运行 SELECT sql 查询，它将包含数据。

```
 public var personNamesDB:File;
        public var dbConnection:SQLConnection;

        protected function createDatabase(event:FlexEvent):void
        {
            // TODO Auto-generated method stub
            personNamesDB = File.applicationStorageDirectory.resolvePath("person.db");
            dbConnection = new SQLConnection();
            dbConnection.openAsync(personNamesDB, SQLMode.CREATE);
            dbConnection.addEventListener(SQLEvent.OPEN, onDatabaseOpened);
            dbConnection.addEventListener(SQLEvent.CLOSE, onDatabaseClosed);
        }// end createDatabase method

        protected function onDatabaseOpened(arshayEvent:SQLEvent):void
        {
            trace("DB Opened");
            var statement:SQLStatement = new SQLStatement();
            statement.sqlConnection = dbConnection;
            statement.text = "CREATE TABLE IF NOT EXISTS personinfo(id INTEGER PRIMARY KEY AUTOINCREMENT, nameofperson TEXT, ageofperson TEXT)";
            statement.addEventListener(SQLEvent.RESULT ,function(event:SQLEvent):void
            {
                trace("table created");
                // for showing saved city names in list on App start up
                showSavedNames(); **//Need to call after get success event**
            });
            statement.execute();
        }

        public var insertData:SQLStatement
        protected function saveName():void
        {
            // SQLite Usage
            insertData = new SQLStatement();
            insertData.sqlConnection = dbConnection;
            insertData.text = "INSERT INTO personinfo(nameofperson, ageofperson) VALUES(:nameofperson, :ageofperson)";
            insertData.parameters[":nameofperson"] = "Xyz";
            insertData.parameters[":ageofperson"] = "27"
            insertData.addEventListener(SQLEvent.RESULT, dataInsertedSuccess);
            insertData.addEventListener(SQLErrorEvent.ERROR, function(event:SQLErrorEvent):void
            {
                //details   "table 'personinfo' has no column named 'nameofcity'"   
                trace(event.error.message.toString());
                //                  showSavedNames();
            });
            insertData.execute();
        }

        protected function dataInsertedSuccess(event:SQLEvent):void
        {
            trace("Success :: " + insertData.getResult().rowsAffected);
            showSavedNames();
        }
        //////////////////////////////////////////////
        public var selectQuery:SQLStatement;
        protected function showSavedNames():void
        {
            selectQuery = new SQLStatement();
            selectQuery.sqlConnection = dbConnection;
            selectQuery.text = "SELECT * FROM personinfo ORDER BY nameofperson ASC";
            selectQuery.addEventListener(SQLEvent.RESULT, showNamesInList);
            selectQuery.execute();
        }

        protected function showNamesInList(event:SQLEvent):void
        {
            listOfAddedNames.dataProvider = new ArrayCollection(selectQuery.getResult().data);
        }

        public var selectNameQuery:SQLStatement;
protected function get_names_data(event:MouseEvent):void
        {
            //Need not to get ageofperson from db
            Alert.show(listOfAddedNames.selectedItem.ageofperson);

            //Any way continue your way
            var currentName:String = listOfAddedNames.selectedItem.nameofperson;

            selectNameQuery = new SQLStatement();
            selectNameQuery.sqlConnection =dbConnection;
            selectNameQuery.text = "SELECT ageofperson FROM personinfo WHERE nameofperson = '" + currentName + "'";
            selectNameQuery.addEventListener(SQLEvent.RESULT, nowGotAge);
            selectNameQuery.execute();
            trace("current selected   >> "+currentName);
        }

        protected function nowGotAge(event:SQLEvent):void
        {
            trace("Age of selected Name is >> "+selectNameQuery.getResult().data[0].ageofperson);
        } 
```

# iphone - 避免在 NSMutbleArray 中重复选择

> ID：12932542
> 
> 赞同：0
> 
> 时间：2012-10-17T10:43:34.463
> 
> 标签：iphone, ios, xcode, uitableview, nsmutablearray

我有一个使用 tableview 的简单问卷调查应用程序。当用户回答问题时，他们可以选择退后一步并更改他们所做的选择。这会导致结果中的答案加倍（选择存储在 NSmutableArray 中） 如何避免在数组中存储“双”结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T10:54:55.777

```
NSMutableArray *add= [[NSMutableArray alloc]init];

for (Item *item in addList){
        if ([add containsObject:item])
        { // Do not add
        }
        else
            [add addObject:item];
} 
```

这里 addList 是对象列表

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T10:51:33.760

首先数组应该是 NSMutableArray 类型，然后检查要插入的对象是否存在

```
if([yourMutableArray containsObject:valueToBeStored]){
NSLog(@"do not add");

}
else{
[yourMutableArray addObject:valueToBeStored];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T11:09:59.250

只需将您的更改`NSMutableArray`为`NSMutableSet`. 确保您的答案`isEqual:`仅考虑正在回答的问题编号。也实施`- (NSUInteger)hash`，但它可能没有。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-17T11:18:00.137

I've made the assumption that in going back, the only way a user can go forward is to answer the question again and that the selections (answers) are stored in the array in the order they are answered.

In that case, all you need to do it remove the last object in the array each time you step back.

```
[selections removeLastObject]; 
```

It gets a bit more complicated if you're allowing them to move backwards and forwards, but essentially you hold onto the current index and decrement or increment it as you move backward or forward respectively.

You then use this index to replace the object in the array at the current index when the user selects a new answer.

```
[selections replaceObjectAtIndex:currentQuestionIndex withObject:newSelection]; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-17T11:36:51.280

Change your array to a `NSMutableSet` or, if you need the sorting, use `NSMutableOrderedSet`. This basically behaves like a `NSMutableArray` but checks for double entries with `isEqual:`.

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-10-17T10:47:22.827

在调用方法的地方使用以下代码...

```
[yourArray removeAllObjects]; 
```

我想这会对你有所帮助。

# asp.net-mvc-4 - 如何在 asp.net MVC4 查看页面中包含 javascript 代码？

> ID：12932544
> 
> 赞同：4
> 
> 时间：2012-10-17T10:43:41.600
> 
> 标签：asp.net-mvc-4

我是 asp.net MVC4 架构的新手，我被以下事情困住了，请帮助我。

```
@Scripts.Render("~/bundles/jquery")
@Scripts.Render("~/bundles/jqueryui")

<script type="text/javascript">
$(function () {
    $("#sections").tabs();
    //here i am getting error that Object[object object] has not method tabs    
});
</script>

<div id="sections">
    <ul>
        <li><a href="#section-1">section-1 </a></li>
        <li><a href="#section-2">section-2 </a></li>
    </ul>
        <div id="section-1">
        section-1 content............  
        </div>
        <div id="section-2">
        section-2 content............ 
        </div>
    </div> 
```

提前致谢......

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-17T10:49:02.793

您可能已经包含该`~/bundles/jquery`捆绑包两次。签出你的`~/Views/Shared/_Layout.cshtml`文件。最后你可能有以下内容：

```
 @Scripts.Render("~/bundles/jquery")
    @RenderSection("scripts", required: false)
</body> 
```

所以 jQuery 包已经包含在您的页面中。您不应该再次将它包含在您的视图中。您只需要`~/bundles/jqueryui`捆绑：

```
@Scripts.Render("~/bundles/jqueryui")

<script type="text/javascript">
$(function () {
    $("#sections").tabs();
    //here i am getting error that Object[object object] has not method tabs    
});
</script>

<div id="sections">
    <ul>
        <li><a href="#section-1">section-1 </a></li>
        <li><a href="#section-2">section-2 </a></li>
    </ul>
    <div id="section-1">
        section-1 content............  
    </div>
    <div id="section-2">
        section-2 content............ 
    </div>
</div> 
```

* * *

更新：

以下是您的视图结构的完整示例：

```
@{
    Layout = null;
}

<!DOCTYPE html>

<html>
<head>
    <meta name="viewport" content="width=device-width" />
    <title>Foo</title>
    <link rel="stylesheet" type="text/css" href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/themes/base/jquery-ui.css" />
</head>
<body>
    <div id="sections">
        <ul>
            <li><a href="#section-1">section-1 </a></li>
            <li><a href="#section-2">section-2 </a></li>
        </ul>
        <div id="section-1">
            section-1 content............  
        </div>
        <div id="section-2">
            section-2 content............ 
        </div>
    </div>

    @Scripts.Render("~/bundles/jquery")
    @Scripts.Render("~/bundles/jqueryui")
    <script type="text/javascript">
        $("#sections").tabs();
    </script>
</body>
</html> 
```

# jquery - 嵌套表行 jQuery 可排序

> ID：12932545
> 
> 赞同：0
> 
> 时间：2012-10-17T10:43:50.063
> 
> 标签：jquery, jquery-ui, html-table, nested, jquery-ui-sortable

我想用 jQuery sortable 对我的嵌套表行进行排序，这样它就可以像`<ul>`标签一样工作。

你可以在这里看看：http: [//www.studybuddy.at/](http://www.studybuddy.at/)

只需使用 Google 或 Facebook 帐户或在此处登录

[http://www.studybuddy.at/login.php](http://www.studybuddy.at/login.php)
用户名：stackoverflow
密码：stackoverflow

希望你能帮我

编辑：
我可以像这样对我的任务进行排序：

```
$("table tbody").sortable(
        {
            helper:fixHelper,
            cancel: "[t_parent='0'],#new_task_row,#date_grid_days,[t_edit='0'],.sub_task_leading_div",
            //items: "tr not:(#new_task_row)",
            handle: ".task",
            revert: true,
            delay: 200,
            axis:'y',
            cursor: 'crosshair',
            change: function(event, ui) {
                function here...
            }

        }).disableSelection() 
```

但问题是我不能像无序列表那样对它进行排序（这样所有子元素也会被排序，如果你明白我的意思的话。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T10:56:03.763

我无法理解您的可排序选择器。但这是我的镜头。bdw 漂亮的用户界面！

```
var sort_a=$("table").sortable({  items: 'tr',handle:'.t_title'    }); 
```

当你添加新的 tr 时，告诉 sortable 刷新。

```
sort_a.sortable( "refresh" ); 
```

# java - 如何使用 JOGL 库执行项目？

> ID：12932546
> 
> 赞同：1
> 
> 时间：2012-10-17T10:43:57.810
> 
> 标签：java, jogl

我正在使用 JOGL 开发 Java 项目，但是当我尝试执行我的项目时，我会收到以下消息：

```
Catched FileNotFoundException: E:\Eclipse\Projects\FuzzyProject\lib\jogl2-rc10\gluegen-natives-windows-i586.jar (Can't find file), while TempJarCache.bootstrapNativeLib() of jar:file:/E:/Eclipse/Projects/FuzzyProject/lib/jogl2-rc10/gluegen-natives-windows-i586.jar!/ (file:/E:/Eclipse/Projects/FuzzyProject/lib/jogl2-rc10/ + gluegen-natives-windows-i586.jar)
Exception in thread "AWT-EventQueue-0" java.lang.UnsatisfiedLinkError: no gluegen-rt in java.library.path 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T10:45:33.717

从控制台 `java -Djava.library.path=<path to native library> -jar (if jar) <name of jar or class>`

从代码只是`System.loadLibrary(<path to native library>)`

来自 Eclipse：`Run Configuration -> Arguments -> VM Argiments->-Djava.library.path=<path to native library>`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T10:47:42.043

我假设您是在 Eclipse 和 Windows 机器上运行它，所以请看这里：[我安装了 JOGL 但为什么 Eclipse 不能识别我的 hello world 程序？](https://stackoverflow.com/questions/9334203/i-installed-jogl-but-why-wont-eclipse-recognize-my-hello-world-program)

对于gluegen，请看这里：[java.lang.UnsatisfiedLinkError: no gluegen-rt in java.library.path RCP Application](https://stackoverflow.com/questions/9453506/java-lang-unsatisfiedlinkerror-no-gluegen-rt-in-java-library-path-rcp-applicati)

# action - 从 href 调用 Action 类的问题（Struts 1.2）

> ID：12932550
> 
> 赞同：1
> 
> 时间：2012-10-17T10:44:13.410
> 
> 标签：action, href, struts-1

在 /jsp/home.jsp

我有一个这样的标签：

```
<a href="Load.do?id=someid">First</a> 
```

在 struts-config.xml 中有：

```
<action path="/Load" scope="request" type="myPackage.Load">
    <forward name="Success" path="/jsp/home.jsp"/>  
</action> 
```

当我执行我的 webapp 并单击链接时，永远不会执行 Load 类的 execute 方法。我没有例外。

在 web.xml 文件中，我有：

```
 <servlet>
    <servlet-name>action</servlet-name>
    <servlet-class>org.apache.struts.action.ActionServlet</servlet-class>
    <init-param>
        <param-name>config</param-name>
        <param-value>/WEB-INF/struts-config.xml</param-value>
    </init-param>
    <load-on-startup>2</load-on-startup>
</servlet>

<servlet-mapping>
    <servlet-name>action</servlet-name>
    <url-pattern>*.do</url-pattern>
</servlet-mapping> 
```

我不明白可能是什么问题。

**编辑**

问题出在我用来拥有可折叠菜单的 menu3.js 上（如此处右侧的[菜单](http://demosthenes.info/blog/401/Beginning-CSS-Web-Development)）

# iphone - 为 iOS 5 设置音频输入增益/音量

> ID：12932552
> 
> 赞同：0
> 
> 时间：2012-10-17T10:44:16.687
> 
> 标签：iphone, objective-c, ios, audio

有没有办法设置我从 AudioQueue 获得的音频输入的增益？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T11:15:56.047

这可以帮助您：

[http://developer.apple.com/library/ios/#documentation/AVFoundation/Reference/AVAudioSession_ClassReference/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/AVFoundation/Reference/AVAudioSession_ClassReference/Reference/Reference.html)

访问延迟和增益设置 outputVolume 属性 inputGain 属性 inputGainSettable 属性 – setInputGain:error: inputLatency 属性 outputLatency 属性

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-07T14:11:43.927

您可以在 iOS5 上设置 AudioSession 属性`InputGainScalar`。我刚刚在这里发布了一个完整的答案，还有 ios6 和 ios5 的替代品：

[如何控制 iPhone 上的硬件麦克风输入增益/电平？](https://stackoverflow.com/questions/10871231/how-to-control-hardware-mic-input-gain-level-on-iphone/16420963#16420963)

这似乎是非常特定于硬件的，因此无法保证您获得控制权。

# snmp - mib2c生成代码的实现

> ID：12932555
> 
> 赞同：1
> 
> 时间：2012-10-17T10:44:36.463
> 
> 标签：snmp, net-snmp, snmp4j, snmpd

```
/*
 * Note: this file originally auto-generated by mib2c using
 *  $
 */

#include <net-snmp/net-snmp-config.h>
#include <net-snmp/net-snmp-includes.h>
#include <net-snmp/agent/net-snmp-agent-includes.h>
#include "pool.h"

/** Initializes the pool module */
void
init_pool(void)
{
  /* here we initialize all the tables we're planning on supporting */
    initialize_table_poolTable();
}

  //Determine the first/last column names

/** Initialize the poolTable table by defining its contents and how it's structured */
void
initialize_table_poolTable(void)
{
    const oid poolTable_oid[] = {1,3,6,1,4,1,21068,4,2};
    const size_t poolTable_oid_len   = OID_LENGTH(poolTable_oid);
    netsnmp_handler_registration    *reg;
    netsnmp_iterator_info           *iinfo;
    netsnmp_table_registration_info *table_info;

    DEBUGMSGTL(("pool:init", "initializing table poolTable\n"));

    reg = netsnmp_create_handler_registration(
              "poolTable",     poolTable_handler,
              poolTable_oid, poolTable_oid_len,
              HANDLER_CAN_RONLY
              );

    table_info = SNMP_MALLOC_TYPEDEF( netsnmp_table_registration_info );
    netsnmp_table_helper_add_indexes(table_info,
                           ASN_INTEGER,  /* index: ifIndex */
                           0);
    table_info->min_column = 1;
    table_info->max_column = COLUMN_POOLINOCTETS;

    iinfo = SNMP_MALLOC_TYPEDEF( netsnmp_iterator_info );
    iinfo->get_first_data_point = poolTable_get_first_data_point;
    iinfo->get_next_data_point  = poolTable_get_next_data_point;
    iinfo->table_reginfo        = table_info;

    netsnmp_register_table_iterator( reg, iinfo );

    /* Initialise the contents of the table here */
}

    /* Typical data structure for a row entry */
struct poolTable_entry {
    /* Index values */
    long ifIndex;

    /* Column values */
    u_long poolInOctets;

    /* Illustrate using a simple linked list */
    int   valid;
    struct poolTable_entry *next;
};

struct poolTable_entry  *poolTable_head;

/* create a new row in the (unsorted) table */
struct poolTable_entry *
poolTable_createEntry(
                 long  ifIndex
                ) {
    struct poolTable_entry *entry;

    entry = SNMP_MALLOC_TYPEDEF(struct poolTable_entry);
    if (!entry)
        return NULL;

    entry->ifIndex = ifIndex;
    entry->next = poolTable_head;
    poolTable_head = entry;
    return entry;
}

/* remove a row from the table */
void
poolTable_removeEntry( struct poolTable_entry *entry ) {
    struct poolTable_entry *ptr, *prev;

    if (!entry)
        return;    /* Nothing to remove */

    for ( ptr  = poolTable_head, prev = NULL;
          ptr != NULL;
          prev = ptr, ptr = ptr->next ) {
        if ( ptr == entry )
            break;
    }
    if ( !ptr )
        return;    /* Can't find it */

    if ( prev == NULL )
        poolTable_head = ptr->next;
    else
        prev->next = ptr->next;

    SNMP_FREE( entry );   /* XXX - release any other internal resources */
}

/* Example iterator hook routines - using 'get_next' to do most of the work */
netsnmp_variable_list *
poolTable_get_first_data_point(void **my_loop_context,
                          void **my_data_context,
                          netsnmp_variable_list *put_index_data,
                          netsnmp_iterator_info *mydata)
{
    *my_loop_context = poolTable_head;
    return poolTable_get_next_data_point(my_loop_context, my_data_context,
                                    put_index_data,  mydata );
}

netsnmp_variable_list *
poolTable_get_next_data_point(void **my_loop_context,
                          void **my_data_context,
                          netsnmp_variable_list *put_index_data,
                          netsnmp_iterator_info *mydata)
{
    struct poolTable_entry *entry = (struct poolTable_entry *)*my_loop_context;
    netsnmp_variable_list *idx = put_index_data;

    if ( entry ) {
        snmp_set_var_typed_integer( idx, ASN_INTEGER, entry->ifIndex );
        idx = idx->next_variable;
        *my_data_context = (void *)entry;
        *my_loop_context = (void *)entry->next;
        return put_index_data;
    } else {
        return NULL;
    }
}

/** handles requests for the poolTable table */
int
poolTable_handler(
    netsnmp_mib_handler               *handler,
    netsnmp_handler_registration      *reginfo,
    netsnmp_agent_request_info        *reqinfo,
    netsnmp_request_info              *requests) {

    netsnmp_request_info       *request;
    netsnmp_table_request_info *table_info;
    struct poolTable_entry          *table_entry;

    DEBUGMSGTL(("pool:handler", "Processing request (%d)\n", reqinfo->mode));

    switch (reqinfo->mode) {
        /*
         * Read-support (also covers GetNext requests)
         */
    case MODE_GET:
        for (request=requests; request; request=request->next) {
            table_entry = (struct poolTable_entry *)
                              netsnmp_extract_iterator_context(request);
            table_info  =     netsnmp_extract_table_info(      request);

            switch (table_info->colnum) {
            case COLUMN_POOLINOCTETS:
                if ( !table_entry ) {
                    netsnmp_set_request_error(reqinfo, request,
                                              SNMP_NOSUCHINSTANCE);
                    continue;
                }
                snmp_set_var_typed_integer( request->requestvb, ASN_COUNTER,
                                            table_entry->poolInOctets);
                break;
            default:
                netsnmp_set_request_error(reqinfo, request,
                                          SNMP_NOSUCHOBJECT);
                break;
            }
        }
        break;

    }
    return SNMP_ERR_NOERROR;
} 
```

以上是我的 mib2c 生成的代码。我将它编译为子代理......但它没有显示任何类型的值。我下一步应该如何实施它？我可以从哪里获取数据？请帮我实现它。

snmpwalk -c public -v 2c localhost 1.3.6.1.4.1.21068 POOL-MIB::elite = 在此 OID 的此代理上没有可用的此类对象

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T12:47:00.947

您需要将数据添加到 poolTable_head 数据链表中。你可以这样做：

```
struct poolTable_entry *entry = poolTable_createEntry(1);
entry->poolInOctets = 42; 
```

然后将该代码（它只是带有静态数字的非常基本的示例代码）放在会被调用的地方。例如，您可以将它放在 initialize_table_poolTable() 函数的底部。

请注意，mib2c 会生成许多不同的编码样式，根据我在上面看到的内容，我不太相信您选择了正确的样式，因为您的数据看起来不会是高度静态的，因此您需要设置定期更新 poolInOctets 数字的警报（请参阅 snmp_alarm(3)）。

# gwt - 使用没有提交按钮的 gwt FileUpload 小部件上传文件

> ID：12932556
> 
> 赞同：1
> 
> 时间：2012-10-17T10:44:36.810
> 
> 标签：gwt

> **可能重复：**
> [gwt 文件上传代码](https://stackoverflow.com/questions/6410004/gwt-file-upload-code)

我想在 gwt 中使用 FileUpload，而该小部件旁边没有提交按钮。例如：我按下浏览按钮来浏览我要上传的文件。找到文件并选择它后，我按下打开按钮。现在，是否可以使用此打开按钮将文件发送到服务器，而不是使用另一个提交按钮。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T12:41:03.353

Register a `ChangeHandler` on the `FileUpload` that `submit()`s the `FormPanel`.

# objective-c - 将文件从 iOS 上传到 Web 服务

> ID：12932559
> 
> 赞同：0
> 
> 时间：2012-10-17T10:44:42.580
> 
> 标签：objective-c, ios

我有一个应用程序需要我将文件从它上传到网络服务。我基本上是文件传输和应用程序网络服务通信方面的菜鸟，我希望能有一个前进的方向。

第一个问题是如何对文件进行编码？网络服务必须解释发送的数据，那么我应该以哪种方式来做呢？我不拥有网络服务，所以我不知道他们如何获取文件，但我假设是 XML/JSON 格式。

第二个问题是我如何发送它？拥有一个 XML 对象，我如何将它发送到，比如说，“http://www.website.com/path/to/upload”。异步可用吗？

如果我遗漏了一个步骤（或 10 个步骤）或有错误，请纠正我！非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T11:00:06.480

1：如果是 XML，则需要对其进行解析，并从中创建对象。如果是 Json，我推荐你[https://github.com/johnezang/JSONKit](https://github.com/johnezang/JSONKit) JSONKIt，真的很棒。

2：您需要从 webService 获取数据，而 ASIHTTP 是一个非常棒的工具，可以快速调用 web 服务。该文档非常清晰易懂[http://allseeing-i.com/ASIHTTPRequest/](http://allseeing-i.com/ASIHTTPRequest/)是必须的。

3：您可以通过 url (get) 或 post 发送数据。

希望你不是 XML 格式，这真的很痛苦，相信我

# c# - TDD 和继承

> ID：12932560
> 
> 赞同：4
> 
> 时间：2012-10-17T10:44:43.970
> 
> 标签：c#, inheritance, tdd, composition

我正在使用 TDD 进行我的第一个项目，并且在继承方面遇到了一些障碍。

例如，如果我有这样的东西

```
public interface IComponent
{
    void MethodA();

    void MethodB();
}

public class Component : IComponent
{
    public virtual void MethodA()
    {
        // Do something
    }

    public virtual void MethodB()
    {
        // Do something
    }
}

public class ExtendedComponent : Component
{
    public override void MethodA()
    {
        base.MethodA();

        // Do something else
    }
} 
```

那么我不能单独测试 ExtendedComponent，因为它依赖于 Component。

但是，如果我像这样使用合成来创建 ExtendedComponent

```
public class ExtendedComponent : IComponent
{
    private readonly IComponent _component;

    public ComponentB(IComponent component)
    {
        _component = component;
    }

    public virtual void MethodA()
    {
        _component.MethodA();

        // Do something else
    }

    public virtual void MethodB()
    {
        _component.MethodB();
    }
} 
```

我现在可以通过模拟包装的 IComponent 来单独测试 ExtendedComponent。

这种方法的缺点是，如果我想向 IComponent 添加新方法，那么我必须将新方法添加到 Component 和 ExtendedComponent 以及可能有很多的任何其他实现。使用继承我可以将新方法添加到基本组件中，它不会破坏其他任何东西。

我真的希望能够干净地进行测试，所以我更喜欢组合路线，但我担心能够进行单元测试并不是总是使用组合而不是继承的正当理由。此外，在基础级别添加功能将需要创建许多繁琐的委托方法。

我真的很感谢其他人如何解决这类问题的一些建议

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T10:50:40.033

您无需担心“孤立地”测试扩展组件，因为它不“依赖”组件，它是一个组件（至少它是您编写它的方式）。

您最初为组件类编写的所有测试仍然很好，并且还测试了扩展类中所有未更改的行为。您需要做的就是编写新的测试来测试扩展组件中添加的功能。

```
public class ComponentTests{
  [Fact]
  public void MethodADoesSomething(){
    Assert.xxx(new Component().MethodA());//Tests the component class
  }

  [Fact]
  public void MethodBDoesSomething(){
    Assert.xxx(new Component().MethodB());//Tests the component class
  }
}

public class ExtendedComponentTests{
  [Fact]
  public void MethodADoesSomething(){
    Assert.xxx(new ExtendedComponent().MethodA());//Tests the extended component class
  }
} 
```

您可以从上面看到，MethodA 功能已针对组件和扩展组件进行了测试。而新功能仅针对 ExtendedComponent 进行了测试。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T10:50:01.560

您使用组合的方法实际上是大多数编译器实现继承的方式，因此您除了付出沉重的成本（大量的样板代码）之外什么也得不到。因此，当存在 is-a 关系时坚持继承，当存在 has-a 关系时坚持组合（这些当然既不是黄金也不是唯一的规则）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-17T11:01:00.140

这里的关键思想是**在单元测试方面也可以有继承**。我在这种情况下使用以下方法。我将有一个单元测试用例的并行继承层次结构。例如

```
[TestClass]
public abstract class IComponentTest
{
    [TestMethod]
    public void TestMethodA()
    {
         // Interface level expectations.
    }
    [TestMethod]
    public void TestMethodB()
    {
         // Interface level expectations.
    }
}

[TestClass]
public class ComponentTest : IComponentTest
{
    [TestMethod]
    public void TestMethodACustom()
    {
        // Test Component specific test, not general test
    }
    [TestMethod]    
    public void TestMethodBCustom()
    {
        // Test Component specific test, not general test
    }
}
[TestClass]
public class ExtendedComponent : ComponentTest 
{
    public void TestMethodACustom2()
    {
        // Test Component specific test, not general test
    }
} 
```

每个抽象测试类或具体类都在其自己的级别上处理期望。因此可扩展和可维护。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-17T10:52:42.697

你是对的 - 在不合适的地方使用组合而不是继承不是要走的路。根据您在此处提供的信息，尚不清楚哪个更好。问问自己在这种情况下哪一个更合适。通过使用继承，您可以获得方法的*多态性*和*虚拟化*。如果你使用组合，你就可以有效地将你的“前端”逻辑与孤立的“后端”逻辑分开——这种方法更容易，因为更改底层组件不会对其余代码产生连锁反应，因为继承经常发生。

总而言之，这不应该影响您测试代码的方式。有*许多*可用的测试框架，但这不应该影响您选择的设计模式。

# graphael - gRaphael barchart：限制条形图的数量和排序值

> ID：12932571
> 
> 赞同：1
> 
> 时间：2012-10-17T10:45:05.093
> 
> 标签：graphael

我可以有一个条形图，限制条形图，例如 gRaphael 饼图只接受 10 个扇区，其余的为“其他”，不到总数的 10%。同样的方式，gRaphael 条形图只有 10 个条形，剩下的到“其他”？

谢谢， Mythyili

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T02:39:22.700

这目前不是 g.bar 类中的选项，因此您可能必须更新源代码才能实现此目的。

在查看了他们对 g.pie.js 中的“其他”部分做了什么之后，我会推荐以下内容：

*   向属性数组添加一个选项，称为“maxbars”。当您传入此选项时，这将是图表上显示的最大柱数。如果 maxbars = 10 并且有超过 10 个段，则 1 到 9 将是唯一的，而 10 将是第 10 个到末尾的组合。
*   由于他们处理值数组的方式，我认为最好的解决方案是在第一次访问该值数组之前覆盖它。在 vbarchart 和 hbarchart 中，在图表元素初始化之后，您应该添加一个看起来像这样的 for 循环：

    ```
    if (values.length > opts.maxbars) {
        for (var i = maxbars; i < values.length; i++) {
            values[maxbars-1] += values[i];
            values[i] = null;
        }
    } 
    ```

    这是将第 10 个（例如）元素之后的所有值添加到第 10 个元素并清除数组中的剩余插槽。现在您拥有的是一个包含 10 个元素的数组，其中第 10 个是第 10 个以上元素的总和。请注意，在这个简单的循环中，我只考虑了每个值都不是数组的情况。您需要检查 values[i][j] 并添加这些元素而不是 values[i]，这可能需要嵌套的 for 循环或三元运算符。查看 g.bar 的其余部分，看看其他地方是如何处理的。

*   在他们绘制标签的代码部分中，您可能希望在循环中添加一个检查，例如 if (opts.maxbars && (i == opts.maxbars - 1)) { // 用“OTHER”标记栏}

抱歉，我没有任何实际的工作代码来实现这一点，但它会涉及更多，并且需要一些试验和错误。希望这能为您指明正确的方向。

# android - android phonegap 移动应用程序中的水平滚动条

> ID：12932572
> 
> 赞同：2
> 
> 时间：2012-10-17T10:45:04.980
> 
> 标签：android, html, cordova, horizontalscrollview

水平滚动不适用于`HTML5` `phonegap`移动`Android`应用程序。

请使用`css3`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T11:01:33.403

查看[iScroll](http://cubiq.org/iscroll)及其最新版本[iScroll 4](http://cubiq.org/iscroll-4)

# xml - 在导入带有特定“batchnumber”标签的 xml 文件之前查询 Oracle 表是否存在“batchnumber”

> ID：12932575
> 
> 赞同：0
> 
> 时间：2012-10-17T10:45:17.770
> 
> 标签：xml, linux, oracle, shell, import

我目前正在为一个项目做一个很好的拼图，也许你们中的一些人已经做过类似的事情：

它需要是一个 linux shell 脚本

以下是需要采取的步骤：

1.  xml 文件放置在 linux 数据库服务器（oracle）上

2.  xml 文件已经过验证（我用过 xmllint，这行得通）

3.  xml 文件包含一个批号，在导入之前，批号不允许出现在数据库中，那么如何将文件中的值传递到 sql 查询中（可能带有 if..then...else 子句?)

在此先感谢您的帮助！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T18:44:20.663

如果脚本用户有权访问 sqlplus，您可以从 shell 脚本执行它并解析结果。

**批处理号.sql**

```
--  ==== batchnum.sql ===============
var bnum varchar2(32)
exec :bnum=&1
select count(*) from tablename where batchnumber=':bnum';
-- ======================== 
```

在你的 shell 脚本中执行命令：

```
value=`sqlplus uname/pass @batchnum.sql 12345` 
```

然后`$value`使用`grep`或类似的解析。

笔记：

*   未经测试的代码；我不能保证 var/exec 块的语法
*   我以为`batchnum`是`varchar2(32)`; 你会想根据你的实际类型来定义它
*   var/exec 结构有点麻烦，但使用了绑定变量。这允许 Oracle 的 SQL 解析器缓存查询，这将提高多次连续调用的性能
*   无异常处理；作为练习留给你:)
*   不验证输入参数；也留给你作为练习。确保以具有最小权限的用户身份调用它

# objective-c - ios6 uilabel没有居中对齐文本

> ID：12932580
> 
> 赞同：11
> 
> 时间：2012-10-17T10:45:27.273
> 
> 标签：objective-c, ios

我正在开发一个最低 ios 5 的 ios 应用程序，我刚刚遇到了 uilabels 的一个奇怪问题。或者我错过了一些明显的东西。无论如何，我遇到的问题是我有一个要居中对齐的 uilabel。在 ios 5 上一切正常，但在 ios 6 上总是左对齐。我看到进行 uilabel text align 的旧方法已被弃用，并且将其设置为应该有效。

```
self.topComment.textAlignment = NSTextAlignmentCenter; 
```

但即使这样，它仍然只是在 ios 5 上居中对齐，在 ios 6 上左对齐。我确实有一些代码可以调整标签中文本的字体大小，以尝试使其适合最小和最大尺寸。

```
UIFont *font = self.topComment.font;

for(int i = maxFont; i > minFont; i--)
{
    // Set the new font size.
    font = [font fontWithSize:i];
    CGSize constraintSize = CGSizeMake(self.topComment.frame.size.width, 1000);
    CGSize labelSize = [topString sizeWithFont:font constrainedToSize:constraintSize lineBreakMode:UILineBreakModeWordWrap];
    if(labelSize.height <= self.topComment.frame.size.height ) {
        fits = YES;
        break;
    }
    //self.topComment.text = topString;

}

self.topComment.font = font;
self.topComment.text = topString; 
```

所以这是我对标签所做的唯一事情，但它始终在 ios 6 中左对齐。重要的是要注意，如果我放入带有文本的 uilabel 并将其居中对齐并且不使用上面的代码，那么它会居中于两者IOS 5 和 6。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-10-17T12:09:37.880

好的，看起来打开 Tighten Letter Spacing 在 ios 5 和 6 上会产生不同的结果。老实说，我无法解释为什么会有这种差异，但只要关闭它就可以为我提供所需的标签居中。把这个留在这里作为答案，以防其他人犯同样的愚蠢错误。

例如：

```
 lbl.adjustsLetterSpacingToFitWidth = NO; 
```

请注意，这在 iOS 7.0 中已弃用。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-12-15T12:45:00.597

**对于 iOS 6 或更高版本：**

```
label.textAlignment = NSTextAlignmentLeft; 
```

# facebook-javascript-sdk - 当用户从她的 Facebook 帐户中选择“将 Facebook 用作：”选项时，Facepile 会显示一个带有切换选项的白框

> ID：12932585
> 
> 赞同：0
> 
> 时间：2012-10-17T10:45:46.757
> 
> 标签：facebook-javascript-sdk, facebook-social-plugins, facebook-fbml

我的网页上有 facepile 插件来显示正在使用该应用程序的面孔。显示facepile的代码片段是

```
<fb:facepile id="some_id" data-size="medium" data-width="396">
</fb:facepile> 
```

面孔显示正常。但是当我从 facebook 主页使用“使用 facebook 作为：”选项并选择我列出的任何页面时，我网页上的 facepile 插件变得很奇怪，并显示一个带有小缩略图和锚点的白框（带有文本'switch') 在它上面在使用 chrome 的右键单击上下文菜单检查元素时，我发现它是一个 iframe，宽度为 396px，高度为 1000px，它显示在页面中间，也隐藏了用于正常登录的 html 表单。如果我使用“将 facebook 用作：”选项恢复到我的个人资料，则选项面开始正常显示。我错过了什么还是这是一个错误？

我已经检查了一个[类似的问题](https://stackoverflow.com/questions/7290069/facepile-iframe-is-white-when-the-viewer-is-not-logged-in-to-facebook)，但这与未登录的用户有关。

我还检查了 facebook 开发人员页面上列出的这个[错误](https://developers.facebook.com/bugs/312418878851638)，但它似乎已经解决。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T11:35:08.627

这是预期的行为，尽管显然错误消息应该更好一些 - Facepile（实际上是大多数社交插件）旨在仅与用户帐户一起使用。您可以相当肯定，99.9% 的查看插件的人不会“将 Facebook 用作”主页。

由于页面并非旨在与 Facebook API 真正交互（超出`manage_pages`功能），因此这些插件很可能不会被修复为适用于页面帐户，但它们会被修复为显示一条消息，通知任何登录为一个页面切换回他们的用户帐户。

您可以在下面找到一些相关的错误报告，您应该考虑向他们添加您的声音以提高他们的优先级：
[https ://developers.facebook.com/bugs/372904202778489](https://developers.facebook.com/bugs/372904202778489)
[https://developers.facebook.com/bugs/313164415437524](https://developers.facebook.com/bugs/313164415437524)

# java - 更改 Spring Web 应用程序的默认会话超时

> ID：12932589
> 
> 赞同：30
> 
> 时间：2012-10-17T10:45:52.490
> 
> 标签：java, spring, tomcat, session-timeout

我必须测试一个由 spring 和 jsp 编写的 Web 应用程序。应用程序的默认会话超时为 30 分钟。

我想减少会话超时。为此，我`web.xml`在`tomcatInstallationLocation/conf/`. 但它不起作用。中的默认配置`tomcatInstallationLocation/conf/web.xml`是 -

```
<session-config>
    <session-timeout>30</session-timeout>
</session-config> 
```

我刚刚改变了时间并成功了-

```
<session-config>
    <session-timeout>5</session-timeout>
</session-config> 
```

但是仍然不起作用。据我所知，在这种情况下，我必须更改我的 spring 应用程序的`web.xml`. 但我不确定。谁能帮我？

提前致谢。

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2012-10-17T11:33:57.013

会话超时层次结构：

*   `$tomcat_home/conf/web.xml`
*   `$your_webapp/WEB-INF/web.xml`
*   手动调用`HttpSession.setMaxInactiveInterval(int)`

每个后续条目都会覆盖上面的其他条目。

# javascript - Javascript检查json输出为空

> ID：12932590
> 
> 赞同：0
> 
> 时间：2012-10-17T10:45:56.620
> 
> 标签：javascript, jquery, jsonp, json

如果我在 json 中有这样的数据：

```
{"items":[{"id":"2049","channel_code":"HBD","channel_name":"HBO HD"}]} 
```

如果您将我的数据搜索到服务器，则找不到这样的结果：

```
{"items":[]} 
```

在上述输出中，我如何读取我的数据不存在或为空？

我写了一些我得到的代码，但没有找到我想要的结果。

这段代码：

```
var data = { Name: "John Doe", Age: 25, Address: null, CityState: "Denver, CO" };
for (member in data) {
if (data[member] != null)
    //Do something
} 
```

或者

```
if (myObject == '') {
   alert('this object is empty');
} 
```

也许有人可以帮我找到摆脱这个例子的方法。请帮忙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T10:47:53.843

你想检查是否`data.items.length > 0`. 假设

```
var data = {"items":[]}; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T10:47:59.723

要检查您的数组是否为空，只需使用相应的[`length`属性](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/length)：

```
if ( data['items'].length < 1 ) {
   // it's empty
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T10:48:46.450

```
for (member in data) {
if (data[member] != null)
    //Do something
} 
```

里面的代码`for`不会运行，因为`length`数据为0

```
if (myObject == '') {
   alert('this object is empty');
} 
```

myObject 不会为空，因为该对象实际上存在并且它是一个空数组

，您应该检查它，`myObject.length`因为它是一个空数组

# c++ - 读取文件并在c ++中拆分行

> ID：12932591
> 
> 赞同：0
> 
> 时间：2012-10-17T10:45:58.133
> 
> 标签：c++, map, split, readfile

我有以下代码从 txt 文件中读取输入，如下所示

```
Paris,Juli,5,3,6 
Paris,John,24,2 
Canberra,John,4,3 
London,Mary,29,4,1,2 
```

我的代码是将数据加载到地图中，然后我想打印地图内容以确保它已正确插入，我检查了 m 的值，因为它在分割线时使用。但是，在执行过程中，我将其视为 continue 0s，这意味着它永远不会进入 while 循环。我以前使用过这部分代码，它可以工作。我找不到我犯错的地方。

```
#include <iostream>
#include <fstream>
#include <string>
#include <cstdlib>
#include <vector>
#include<map>
using namespace std;

struct info {
       string Name;
       int places;// i will use the binary value to identfy the visited places example 29 is 100101 
             // this means he visited three places (London,LA,Rome)   
       vector<int> times; // will represent the visiting time,e.g. 1,2,5 means london 1 time, LA 
                   // twice and Rome five times 

       };
map<string,vector<info> > log;
map<string,vector<info> >::iterator i;
fstream out;
int main() {
    out.open("log.txt", std::ios::in | std::ios::out | std::ios::app);
            string line;
            char* pt;
            string temp[19];

    // for each line in the file 
    while (!out.eof())
    {
         getline(out,line);//read line from the file
         pt=strtok(&line[0],"," );//split the line
         int m=0;
         while (pt != NULL)
         {
         temp[m++] = pt; // save the line info to the array
         cout<<m<<"  ";
         pt = strtok (NULL, ",");
         }
         cout<<m<<"  "; // during the execution I get this as continues 0s which means it is never enter the while loop
         info tmp;
         // read the other data
         tmp.Name=temp[1];
         tmp.places=atoi(temp[2].c_str());
         for ( int i=3;i<=m;i++)
         { 
         tmp.times.push_back(atoi(temp[i].c_str()));
         }         
         // create a new object 
         log[temp[0]].push_back(tmp); 
         }

 vector<int>::iterator j; 
    for(i=log.begin();i!=log.end();i++) {
    cout<< "From "<< i->first<<" city people who travels: "<<endl; 
    for (size_t tt = 0; tt < (i->second).size(); tt++) {
    cout<< (i->second[tt]).Name<< " went to distnations "<< (i->second)[tt].places<<" \nwith the folloing number of visiting time "; 
    for (j=((i->second[tt]).times).begin();j!= ((i->second[tt]).times).end();j++) 
    cout<<*j<<" ";
     } 
    }  

          system("PAUSE");
          return 0;
          } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T11:02:26.350

这是一个错误

```
// for each line in the file 
while (!out.eof())
{
     getline(out,line);//read line from the file 
```

应该

```
// for each line in the file 
while (getline(out,line))
{ 
```

坦率地说，我发现这个错误重复的频率令人难以置信。`eof`不做你认为它做的事。它测试*最后一次*读取是否由于文件结束而失败。您正在使用它来尝试*预测*下一次读取是否会失败。它根本不像那样工作。

此行是一个错误

```
pt=strtok(&line[0],"," );//split the line 
```

`strtok`适用于 C 字符串，不能保证它适用于`std::string`.

但这些都不是你真正的错误。我建议`ios::in`只打开文件。毕竟你只想从中读取。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T10:59:55.917

您不能标记`std::string`using `strtok`。改用`getline`：

```
std::string str("some,comma,separated,data");
std::string token;
while (getline(str, token, ',')) {
    cout << "Token: " << token << end;
} 
```

在每次迭代中，`token`包含来自 的下一个已解析标记`str`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-17T11:00:11.923

您的 fstream 不应在应用模式下打开。这将寻找文件到文件末尾。`std::ios::app`从中删除。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-17T11:03:07.707

这是错误的`temp[m++] = pt; // save the line info to the array`

切换到这样的东西，而不是“temp”

```
std::vector<std::string> vTemp; 

pt=strtok(&line[0],"," );//split the line       
while (pt != NULL)
{
vTemp.push_back(pt); // save the line info to the array      
pt = strtok (NULL, ",");
} 
```

还可以考虑使用类似的东西来进行拆分。

```
std::vector<std::string> SplitString(const std::string &strInput, char cDelimiter)
{
    std::vector<std::string> vRetValue;

    std::stringstream ss(strInput); 
    string strItem;
    while(std::getline(ss, strItem, cDelimiter))    
    {   
        // Skip Empty
        if(strItem.size()==0)       
            continue;

        vRetValue.push_back(strItem);
    }

    return vRetValue;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-17T11:50:10.967

@halfelf 对我的简单错误真的很好的解决方案，它可以工作，但现在问题是当我打印我得到的数据时

```
From Paris  city people who travels:
Juli went to distnations 5
with the folloing number of visiting time 3 6 0 
John went to distnations 24
with the folloing number of visiting time 2 6 
From Canberra  city people who travels:
Johnwent to distnations 4
with the folloing number of visiting time 3  6
From London city people who travels:
Mary went to distnations 29
with the folloing number of visiting time 4 1 2 0 
```

这是不正确的，因为来自堪培拉和巴黎的 John 添加了 6，而 Juli 和 Mary 添加了 0。关于我在哪里弄错的任何想法，它关于时间向量，似乎我需要重置每一行的值或在插入后清除内容。额外的 0 呢？

# c# - 通过C#查找输入类型的Id、Text

> ID：12932593
> 
> 赞同：0
> 
> 时间：2012-10-17T10:46:07.197
> 
> 标签：c#, jquery, asp.net

我已将输入（文本、复选框、下拉列表）保存在一个 html 页面中，并将其加载到 asp:panel 中，加载后用户可以在其中输入值。现在通过单击 Asp:button 我必须找到输入类型并保存到数据库，它是如何实现的。

输入代码将采用这种格式。

```
<label style="left: 46px; top: 73px; position: relative;" id="Llb1" onmouseup="MLup(this.id)" class="ui-draggable" onmousedown="MLdown(this.id)"> Enter the value </label>
<input style="left: 170px; top: 113px; position: relative;" id="T1" onmouseup="mUp(this.id)" class="ui-draggable"  onmousedown="mDown(this.id)" value="" type="text"> 
```

这个输入类型我必须找到那些 id 和文本......这怎么可能......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T10:54:54.597

首先，您无法在服务器上获取标签的值。要获取动态文本框值，您需要为其分配`name`属性并通过该名称从`Request.Form`集合中获取回发值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T10:55:12.923

您至少有两种选择来实现它。

*   还创建一些隐藏字段以及您正在创建的字段，并将字段类型值和其他必需的元数据放在隐藏字段中。当您发布表单时，这些隐藏字段将为您提供有关表单的元数据，您可以使用这些元数据将其正确插入数据库。

或者

*   当您动态创建控件时，请使用 ajax 请求通知服务器，以便服务器事先了解这些字段。您可以将此信息存储在会话中，当表单回发时，您可以使用它从请求对象中获取数据。

在任何一种情况下，您都必须使用原始请求对象来获取字段的值，因为 asp.net 不会解析页面上不存在的那些字段，因为它们不是视图状态的一部分。

最好使用 ajax 发布整个表单，而不是以正常方式发布。这样，您可以确保只发布动态数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T08:10:07.240

在这里，我得到了一个通过 html 按钮单击查找文本 ID、选择、标签的解决方案

```
 <input type="button" id="save" value="submit" onclick="submitpage()" /> 
```

然后在提交页面上

```
<script type="text/javascript">
          function submitpage() {
              var completeids = new Array();
              var completevalues = new Array();
              var completetype = new Array();
              var completeselected = new Array();
              var labelvalues = new Array();
             // var name = "abc";
              var name = document.getElementById('<%=username.ClientID %>').innerHTML
              $('input[type="text"]').each(function () {
                  completeids.push($(this).attr('id'));
                  completetype.push('TEXTBOX');
                  completevalues.push($(this).attr('value'));
                  completeselected.push('no');

              });
              $('label').each(function () {
                  completeids.push($(this).attr('id'));
                  completevalues.push($('label[id= ' + $(this).attr('id') + ']').html());
                  labelvalues.push($('label[id= ' + $(this).attr('id') + ']').html());
                  completetype.push('LABEL');
                  completeselected.push('no');

              });
              $('select').each(function () {
                  completeids.push($(this).attr('id'));
                  completevalues.push($(this).val());
                  completetype.push('DROPDOWN');
                  completeselected.push('no');

              });
              $('input[type="checkbox"]').each(function () {
                  completeids.push($(this).attr('id'));
                  completevalues.push($('label[for=' + $(this).attr('id') + ']').html());
                  completetype.push('CHECKBOX');
                  completeselected.push($(this).attr('checked'));

              });
              $('input[type="radio"]').each(function () {
                  completeids.push($(this).attr('id'));
                  completevalues.push($('label[for=' + $(this).attr('id') + ']').html());
                  completetype.push('RADIOBUTTON');
                  completeselected.push($(this).attr('checked'));

              });
              $('input[type="file"]').each(function () {
                  completeids.push($(this).attr('id'));
                  //completevalues.push('not yet done');
                  completevalues.push($(this).attr('value'));

                  completetype.push('FILE');
                  completeselected.push('no');

              });

              var loc = window.location.href;
              $.ajax({
                  type: 'POST',
                  url: loc + "/GetSaved",
                  data: "{getcompleteids :'" + completeids + "',getcompletevalues :'" + completevalues + "',getcompletetypes :'" + completetype + "',getcompleteselected :'" + completeselected + "',getlabelvalue :'" + labelvalues + "',formname:'"+name+"'}",
                  contentType: "application/json; charset=utf-8"

              })
            .success(function (response) {
                alert(response.d);

            })
            .error(function (response) {
                alert(response.d);
            });

          }

    </script> 
```

在我这样使用的 c# 代码中...

```
 [WebMethod]
    public static string GetSaved(string getcompleteids, string getcompletevalues, string getcompletetypes, string getcompleteselected, string getlabelvalue, string formname)
    {

        string[] completeids = getcompleteids.Split(',');
        string[] completevalues = getcompletevalues.Split(',');
        string[] completetypes = getcompletetypes.Split(',');
        string[] completeselected = getcompleteselected.Split(',');
        string[] labelvalues = getlabelvalue.Split(',');
         SqlConnection con = new SqlConnection(ConfigurationManager.ConnectionStrings["dynamic"].ConnectionString);
        string FORMNAME = labelvalues[0];
        for (int i = 0; i <= completeids.Length-1; i++)
        {
            con.Open();
                                                                                        //FORM_NAME,     USER_NAME         ,CONTRO_TYPE,             CONTROL_ID,        CONTROL_VALUE,                CONTROL_SELECTED
            SqlCommand cmd = new SqlCommand("INSERT INTO CONTROLS_INFORMATION VALUES('" + FORMNAME + "',' "+formname+" ','" + completetypes[i] + "','" + completeids[i] + "','" + completevalues[i] + "','" + completeselected[i] + "')", con);
            cmd.ExecuteNonQuery();
            con.Close();
        }

        return "successfully";

    } 
```

它已经完成了..希望它对像我这样的人有用..hmm...

# php - 在 Symfony2 ContainerAwareCommand 中获取服务定义

> ID：12932595
> 
> 赞同：2
> 
> 时间：2012-10-17T10:46:10.630
> 
> 标签：php, symfony, dependency-injection

我正在尝试根据[http://symfony.com/doc/2.0/components/dependency_injection/definitions.html#getting-and-setting-service-definitions在 ContainerAwareCommand 中获取服务定义](http://symfony.com/doc/2.0/components/dependency_injection/definitions.html#getting-and-setting-service-definitions)

但是，这会立即导致失败：

> 致命错误：调用未定义的方法 appDevDebugProjectContainer::getDefinition()

我在文档中找不到更多关于这种行为的信息，有什么想法吗？

编辑：代码示例：

```
class MyCommand extends ContainerAwareCommand {

    protected function execute(InputInterface $p_vInput, OutputInterface $p_vOutput) {
        try {
            var_dump($this->getContainer()->getDefinition('api.driver'));
        } catch (\Exception $e) {
            print_r($e);
            exit;
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T12:12:21.167

在您提供`$container`的示例中，不是类的实例`Container`，而是`ContainerBuilder`类。容器没有任何名为`getDefinition()`.

如果您不显示您想要使用该定义的上下文，我不能说更多。

**编辑：**

下面我发布了使用`ContainerBuilder`. 它是直接从 symfony 的命令复制而来的，所以我想这是一个很好的使用示例。

```
// Symfony/Bundle/FrameworkBundle/Command/ContainerDebugCommand.php

/**
 * Loads the ContainerBuilder from the cache.
 *
 * @return ContainerBuilder
 */
private function getContainerBuilder()
{
    if (!$this->getApplication()->getKernel()->isDebug()) {
        throw new \LogicException(sprintf('Debug information about the container is only available in debug mode.'));
    }

    if (!file_exists($cachedFile = $this->getContainer()->getParameter('debug.container.dump'))) {
        throw new \LogicException(sprintf('Debug information about the container could not be found. Please clear the cache and try again.'));
    }

    $container = new ContainerBuilder();

    $loader = new XmlFileLoader($container, new FileLocator());
    $loader->load($cachedFile);

    return $container;
} 
```

最好的！

# tmux - 如何在 Tmux 中更改窗格的位置

> ID：12932605
> 
> 赞同：12
> 
> 时间：2012-10-17T10:46:40.023
> 
> 标签：tmux

我想更改窗格的位置，例如我想在窗格 3 退出后将窗格 4 更改为窗格 3。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2017-10-03T09:01:22.950

在窗格 3 退出后将窗格 4 更改为窗格 3：

```
C-b {          move the current pane to the previous position 
```

以下是移动窗格的更多快捷方式：

```
C-b }          move the current pane to the next position
C-b C-o        rotate window ‘up’ (i.e. move all panes)
C-b M-o        rotate window ‘down’
C-b !          move the current pane into a new separate
               window (‘break pane’)
C-b :move-pane -t :3.2
               split window 3's pane 2 and move the current pane there 
```

来源：[tmux 备忘单](https://gist.github.com/andreyvit/2921703)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-17T15:00:41.623

最新版本的 tmux (1.7) 支持[对 windows 重新编号](https://superuser.com/a/487418/133552)。

如果您只想将窗口 4 的数量更改为 3，请在窗口 4 中执行此操作：

```
move-window -t 3 
```

# openerp - openerp 和 rml

> ID：12932606
> 
> 赞同：0
> 
> 时间：2012-10-17T10:46:42.970
> 
> 标签：openerp

我正在尝试将 keepWithNext="1" 用于段落。我定义了我的 para 样式 999。我将它与以下几行一起使用

```
 <para style="999" >[[repeatIn(o.order_line,'line')]]   </para>
          <blockTable colWidths="530.0" style="Table4">
            <tr>
              <td>
                <para style="999" keepWithNext="1" >Detail Specifications</para>
              </td>
            </tr>
          </blockTable>
          <para style="999" keepWithNext="1" />
          <blockTable colWidths="98.0,12.0,420.0" style="Table5">
            <tr>
              <td>
                <para style="999" keepWithNext="1">Product </para>
              </td>
              <td>
                <para style="999">: </para>
              </td>
              <td>
                <para style="999">[[line.product_id.name_template]]</para>
              </td>
            </tr>
       </blockTable> 
```

但我的代码在两页中途中断。提前致谢。我在 openerp6.1 中这样做

-乌莎

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T12:43:49.580

为什么可以使用报表设计器模块？以格式创建报告，`sxw`然后使用`base_report_designer`模块中给出的 python 脚本将其转换为 rml。

# python - 如何检查 Python 中是否存在 SQLite3 数据库？

> ID：12932607
> 
> 赞同：23
> 
> 时间：2012-10-17T10:46:41.877
> 
> 标签：python, python-2.7, sqlite

我正在尝试在 Python 2.7.3 中创建一个函数来打开一个 SQLite 数据库。

这是我目前的代码：

```
import sqlite3 as lite
import sys

db = r'someDb.sqlite'

def opendb(db):
    try:
        conn = lite.connect(db)
    except sqlite3.Error:
        print "Error open db.\n"
        return False
    cur = conn.cursor()
    return [conn, cur] 
```

我已经尝试了上面的代码，并且我观察到该`sqlite3`库会打开声明的数据库（如果存在），或者如果该数据库不存在则创建一个新数据库。

有没有办法通过方法检查数据库是否存在，`sqlite3`或者我必须使用文件操作`os.path.isfile(path)`？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-10-17T10:55:30.033

在 Python 2 中，您必须使用以下命令显式测试是否存在[`os.path.isfile`](http://docs.python.org/library/os.path.html#os.path.isfile)：

```
if os.path.isfile(db): 
```

无法强制该`sqlite3.connect`函数不为您创建文件。

* * *

对于使用 Python 3.4 或更新版本的用户，您可以使用更新的 URI 路径功能在打开数据库时设置不同的模式。该`sqlite3.connect()`函数默认会以*Read, Write & Create*`rwc`模式打开数据库，因此连接到不存在的数据库将导致它被创建。

 *使用 URI，您可以指定不同的模式；如果将其设置为`rw`, 即*读写*模式，则在尝试连接到不存在的数据库时会引发异常。`uri=True`连接时设置flag时可以设置不同的模式，传入一个`file:`URI，并`mode=rw`在路径中添加查询参数：

```
from urllib.request import pathname2url

try:
    dburi = 'file:{}?mode=rw'.format(pathname2url(db))
    conn = lite.connect(dburi, uri=True)
except sqlite3.OperationalError:
    # handle missing database case 
```

有关接受哪些参数的更多详细信息，请参阅[SQLite URI*识别查询参数*文档](https://www.sqlite.org/uri.html#recognized_query_parameters)。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2013-03-12T07:45:32.883

`os.path.isfile()`只是告诉你一个文件是否存在，而不是它是否存在并且是一个 SQLite3 数据库！知道[http://www.sqlite.org/fileformat.html](http://www.sqlite.org/fileformat.html)，你可以这样做：

```
def isSQLite3(filename):
    from os.path import isfile, getsize

    if not isfile(filename):
        return False
    if getsize(filename) < 100: # SQLite database file header is 100 bytes
        return False

    with open(filename, 'rb') as fd:
        header = fd.read(100)

    return header[:16] == 'SQLite format 3\x00' 
```

然后像这样使用它：

```
for file in files:
    if isSQLite3(file):
        print "'%s' is a SQLite3 database file" % file
    else:
        print "'%s' is not a SQLite3 database file" % file 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2017-11-17T13:21:35.773

是的，有一种方法可以用 Python 3.4+ 做你想做的事。

使用该`sqlite3.connect()`函数进行连接，但将其传递给 URI 而不是文件路径，并将其添加`mode=rw`到其查询字符串中。

这是一个完整的工作代码示例：

```
import sqlite3
con = sqlite3.connect('file:aaa.db?mode=rw', uri=True) 
```

这将从当前文件夹中命名的文件打开现有数据库`aaa.db`，但如果该文件无法打开或不存在，则会引发错误：

```
Traceback (most recent call last):
  File "aaa.py", line 2, in <module>
    con = sqlite3.connect('file:aaa.db?mode=rw', uri=True)
sqlite3.OperationalError: unable to open database file 
```

Python [sqlite.connect() 文档](https://docs.python.org/3/library/sqlite3.html#sqlite3.connect)指出：

> 如果 uri 为真，则数据库被解释为 URI。这允许您指定选项。例如，要以只读模式打开数据库，您可以使用：
> 
> db = sqlite3.connect('file:path/to/database?mode=ro', uri=True)
> 
> 有关此功能的更多信息，包括已识别选项的列表，可以在[SQLite URI 文档](https://www.sqlite.org/uri.html)中找到。

[以下是从http://www.sqlite.org/c3ref/open.html](http://www.sqlite.org/c3ref/open.html)收集的所有相关 URI 选项信息的摘录：

> **模式**：模式参数可以设置为“ro”、“rw”、“rwc”或“memory”。尝试将其设置为任何其他值是错误的。如果指定了“ro”，则打开数据库以进行只读访问，就像在 sqlite3_open_v2() 的第三个参数中设置了 SQLITE_OPEN_READONLY 标志一样。如果模式选项设置为“rw”，则打开数据库进行读写（但不是创建）访问，就像设置了 SQLITE_OPEN_READWRITE（但不是 SQLITE_OPEN_CREATE）一样。值“rwc”等效于同时设置 SQLITE_OPEN_READWRITE 和 SQLITE_OPEN_CREATE。如果模式选项设置为“内存”，则使用从不从磁盘读取或写入的纯内存数据库。
> 
> **sqlite3_open_v2()**接口的工作方式与sqlite3_open() 类似，只是它接受两个额外的参数来额外控制新的数据库连接。sqlite3_open_v2() 的 flags 参数可以采用以下三个值之一，可选择与 SQLITE_OPEN_NOMUTEX、SQLITE_OPEN_FULLMUTEX、SQLITE_OPEN_SHAREDCACHE、SQLITE_OPEN_PRIVATECACHE 和/或 SQLITE_OPEN_URI 标志组合：
> 
> SQLITE_OPEN_READONLY 数据库以只读模式打开。如果数据库尚不存在，则返回错误。
> 
> SQLITE_OPEN_READWRITE 如果可能，打开数据库进行读取和写入，或者仅在文件受操作系统写保护时才读取。无论哪种情况，数据库都必须已经存在，否则返回错误。
> 
> SQLITE_OPEN_READWRITE | SQLITE_OPEN_CREATE 打开数据库进行读写，如果数据库不存在则创建。这是 sqlite3_open() 和 sqlite3_open16() 始终使用的行为。

为方便起见，这里还有一个 Python 3.4+ 函数，用于将常规路径转换为 ​​sqlite.connect() 可用的 URI：

```
import pathlib
import urllib.parse

def _path_to_uri(path):
    path = pathlib.Path(path)
    if path.is_absolute():
        return path.as_uri()
    return 'file:' + urllib.parse.quote(path.as_posix(), safe=':/') 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-09-05T07:01:37.450

这是一个基于**Tom Horen 答案**的分叉（使用 Python 3） ，它提供了一个比选定答案更完整和可靠的解决方案。

选择的答案不评估任何内容、标题等，以确定文件是否实际包含与 SQLite3 数据库相关的任何数据。

我试图在这里提出一些更务实的东西：

```
#!/usr/bin/python3

import os
import sys

if os.path.isfile('test.sqlite3'):
    if os.path.getsize('test.sqlite3') > 100:
        with open('test.sqlite3','r', encoding = "ISO-8859-1") as f:
            header = f.read(100)
            if header.startswith('SQLite format 3'):
                print("SQLite3 database has been detected.") 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-12-06T20:16:44.893

基于上面的其他几个答案。这是一个干净的解决方案，适用于`Python 3.7.7`：

```
def isSqlite3Db(db):
    if not os.path.isfile(db): return False
    sz = os.path.getsize(db)

    # file is empty, give benefit of the doubt that its sqlite
    # New sqlite3 files created in recent libraries are empty!
    if sz == 0: return True

    # SQLite database file header is 100 bytes
    if sz < 100: return False

    # Validate file header
    with open(db, 'rb') as fd: header = fd.read(100)    

    return (header[:16] == b'SQLite format 3\x00') 
```

用法：

```
if isSqlite3Db('<path_to_db>'):
    # ... <path_to_db> is a Sqlite 3 DB 
```

笔记：

*   检查文件大小> 100的答案不起作用，因为在最近的python中创建的新sqlite3 db创建了一个长度为0的文件。
*   读取文件头的其他示例返回字节`Python 3.7.7`而不是字符串，因此比较将失败。
*   使用的示例`sqlite3.connect(dburl, uri=True)`对我不起作用，`Python 3.7.7`因为它给出了误报。

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2013-09-27T15:19:22.427

我在脚本开头使用了如下函数，以便我可以尝试找出 sqlite3 db 脚本可能无法正常工作的原因。就像评论说的那样，它使用 3 个阶段，检查路径是否存在，检查路径是否为文件，检查该文件的标头是否为 sqlite3 标头。

```
def checkdbFileforErrors():

    #check if path exists
    try:
        with open('/path/to/your.db'): pass
    except IOError:
        return 1

    #check if path if a file
    if not isfile('/path/to/your.db'):
        return 2

    #check if first 100 bytes of path identifies itself as sqlite3 in header
    f = open('/path/to/your.db', "rx")
    ima = f.read(16).encode('hex')
    f.close()
    #see http://www.sqlite.org/fileformat.html#database_header magic header string
    if ima != "53514c69746520666f726d6174203300": 
        return 3

    return 0 
```*

# jquery-mobile - 构建应用程序时出现 BB Webworks 异常 ('javax.xml.rpc.JAXRPCException')

> ID：12932609
> 
> 赞同：1
> 
> 时间：2012-10-17T10:46:52.300
> 
> 标签：jquery-mobile, blackberry, blackberry-webworks

我需要一些帮助。它与 Blackberry WebWorks 平台有关。

我正在为我的动态 Web 项目运行 Ripple chrome 扩展。我已经做了这里显示的步骤：

[https://developer.blackberry.com/html5/documentation/packaging_your_app_in_ripple_1904611_11.html](https://developer.blackberry.com/html5/documentation/packaging_your_app_in_ripple_1904611_11.html)

但是从 Chrome 扩展程序中的“打包和签名”按钮构建应用程序时出现此错误。

如果您想了解任何额外信息，请告诉我。

谢谢！

```
out: [INFO]
out: Compiling BlackBerry WebWorks application

out: Exported static routine: .main(String[]) is multiply defined.

out: Exported static routine: .main(String[]) is multiply defined.

out: Exported static routine: .main(String[]) is multiply defined.

out: Exported static routine: .main(String[]) is multiply defined.

out: Exported static routine: .main(String[]) is multiply defined.

out: Exported static routine: .main(String[]) is multiply defined.

out: Exported static routine: .main(String[]) is multiply defined.

out: C:\Program Files\Research In Motion\BlackBerry WebWorks SDK 2.3.1.5\lib\net
_rim_api.jar(net_rim_jaxrpc.cod): Error!: Duplicate definition for 'javax.xml.rp
c.JAXRPCException' found in: JAXRPCException.java

out: [ERROR]
out: RAPC exception occurred

Done build 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T20:51:25.420

这通常是使用 -s 标志构建的结果（它为应用程序生成 Java 源代码），然后将此源代码包含在您的 zip 中。源文件提供了重复的 java 文件。

Ripple 会自动压缩您的 Web 应用程序的整个目录，因此请清理所有额外文件的目录并重试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T12:49:41.850

有几件事要检查。

1.  确保您使用的是 JDK 1.6
2.  您必须使用 32 位版本。

# python - CPython 和 GCC

> ID：12932610
> 
> 赞同：1
> 
> 时间：2012-10-17T10:46:58.957
> 
> 标签：python

如果我在控制台中的 MacOS X 10.8 下启动 python，它以“Python 2.7.2（默认，2012 年 6 月 20 日，16:23:33）[ **GCC 4.2.1 Compatible Apple Clang** 4.0 (tags/Apple/clang-418.0\. 60)] 关于达尔文”。

python的实现是如何依赖GCC的？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-17T11:01:16.147

Python 是*用*C 语言实现的，并记录用于编译它的 C 编译器的版本（以帮助跟踪编译器特定的错误）。

实现本身不会因编译器而异。它*可以*根据编译的平台和可用的外部库而有所不同，但没有什么会根据使用的编译器改变 Python 行为。

# javascript - 将动态 html 表从一个页面发送到另一个页面

> ID：12932616
> 
> 赞同：0
> 
> 时间：2012-10-17T10:47:24.107
> 
> 标签：javascript, jquery, html, jsp

我不知道它是否简单，但是有没有办法将完整的 html 表格从页面发送到弹出窗口？该表是从服务器数据动态创建的，现在我想将这个唯一的表从其原始页面中弹出。用户更改了 html 表中的数据，但不会保存回服务器上。所以在弹出窗口中从服务器获取数据是不切实际的，jquery 可以做到这一点，但不知道如何。任何建议将不胜感激。

```
enter code here 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T10:51:39.440

创建新页面或对话框时，使用 jQuery 检索表格的 HTML 内容并将返回字符串作为变量发送

```
$("#TABLE_ID").html();   // <-- gets you the entire HTML table code 
```

并确保该表具有 ID：

```
<table id="TABLE_ID">...</table> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T10:55:10.203

你可以像这样简单地使用`html()`jquery的属性

```
$("#YourTableId").html(); 
```

并在弹出窗口中设置 div 的 html

```
$('#YourDivId').html($("#YourTableId").html()); 
```

更多信息在这里

[http://api.jquery.com/html/](http://api.jquery.com/html/)

# math - 基于四元数的旋转和枢轴位置

> ID：12932619
> 
> 赞同：0
> 
> 时间：2012-10-17T10:47:36.863
> 
> 标签：math, opengl, quaternions

在考虑 OpenGL 中的枢轴位置的同时，我无法弄清楚如何使用四元数执行矩阵旋转。我目前得到的是对象围绕空间中某个点的旋转，而不是我想要的局部枢轴。这是代码[使用Java]

四元数旋转法：

```
 public void rotateTo3(float xr, float yr, float zr) {

    _rotation.x = xr;
    _rotation.y = yr;
    _rotation.z = zr;

    Quaternion xrotQ = Glm.angleAxis((xr), Vec3.X_AXIS);
    Quaternion yrotQ = Glm.angleAxis((yr), Vec3.Y_AXIS);
    Quaternion zrotQ = Glm.angleAxis((zr), Vec3.Z_AXIS);
    xrotQ = Glm.normalize(xrotQ);
    yrotQ = Glm.normalize(yrotQ);
    zrotQ = Glm.normalize(zrotQ);

    Quaternion acumQuat;
    acumQuat = Quaternion.mul(xrotQ, yrotQ);
    acumQuat = Quaternion.mul(acumQuat, zrotQ);

    Mat4 rotMat = Glm.matCast(acumQuat);

    _model = new Mat4(1);

   scaleTo(_scaleX, _scaleY, _scaleZ);

    _model = Glm.translate(_model, new Vec3(_pivot.x, _pivot.y, 0));

    _model =rotMat.mul(_model);//_model.mul(rotMat); //rotMat.mul(_model);

    _model = Glm.translate(_model, new Vec3(-_pivot.x, -_pivot.y, 0));

   translateTo(_x, _y, _z);

    notifyTranformChange();
   } 
```

模型矩阵缩放方法：public void scaleTo(float x, float y, float z) {

```
 _model.set(0, x);
    _model.set(5, y);
    _model.set(10, z);

    _scaleX = x;
    _scaleY = y;
    _scaleZ = z;

    notifyTranformChange();
  } 
```

翻译方法：public void translateTo(float x, float y, float z) {

```
 _x = x - _pivot.x;
    _y = y - _pivot.y;
    _z = z;
    _position.x = _x;
    _position.y = _y;
    _position.z = _z;

    _model.set(12, _x);
    _model.set(13, _y);
    _model.set(14, _z);

    notifyTranformChange();
   } 
```

但是我不使用四元数的这种方法效果很好：

```
 public void rotate(Vec3 axis, float angleDegr) {
    _rotation.add(axis.scale(angleDegr));
    //  change to GLM:
    Mat4 backTr = new Mat4(1.0f);

    backTr = Glm.translate(backTr, new Vec3(_pivot.x, _pivot.y, 0));

    backTr = Glm.rotate(backTr, angleDegr, axis);

    backTr = Glm.translate(backTr, new Vec3(-_pivot.x, -_pivot.y, 0));

    _model =_model.mul(backTr);///backTr.mul(_model);
    notifyTranformChange();

   } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T12:55:52.607

**四元数仅**描述旋转。结果，您想如何仅使用四元数围绕枢轴点旋转某些东西？

您需要的最小值是一个 R3 向量和一个四元数。只有一个级别的转换，您首先旋转对象，然后将其移动到那里。

如果您想创建一个矩阵，您首先创建配给矩阵，然后添加未更改的平移。

如果您只想调用 glTranslate 和 glRotate（或 glMultMatrix），您将首先调用 glTranslate，然后调用 glRoatate。

编辑：

如果您不进行渲染并且只想知道每个顶点的位置：

```
Vector3 newVertex = quat.transform(oldVertex) + translation; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T08:37:09.973

在我看来，您已经考虑了旋转前后的来回平移。为什么最后调用 translateTo？

此外，当你旋转时，纯粹的旋转总是意味着围绕原点。所以如果你想围绕你的枢轴点旋转。我希望将您的枢轴点转换为原点，然后旋转，然后再转换回枢轴将是正确的做法。因此，我希望您的代码如下所示：

```
_model = Glm.translate(_model, new Vec3(-_pivot.x, -_pivot.y, 0));

_model =rotMat.mul(_model);//_model.mul(rotMat); //rotMat.mul(_model);

_model = Glm.translate(_model, new Vec3(_pivot.x, _pivot.y, 0)); 
```

并且没有电话`translateTo(_x, _y, _z);`。另外，你能确认旋转部分已经完成了它应该做的事情吗？`rotMat`您可以通过与比较来检查这一点`Glm.rotate(new Mat4(1.0f), angleDegr, axis)`。对于相同的旋转，它们应该是相同的。

# xml - 需要检索当前元素

> ID：12932629
> 
> 赞同：1
> 
> 时间：2012-10-17T10:48:05.697
> 
> 标签：xml, xslt

我正在尝试获取当前元素节点，但我只获取元素的值。请帮我..

```
<root><LIST>
                     <ROLE>s1</ROLE>
                    <STATUS>yes</STATUS>
                </LIST>
                <LIST>
                    <ROLE>s1</ROLE>
                    <STATUS>yes</STATUS>
                </LIST>
                 <LIST>
                    <ROLE>Member</ROLE>
                    <STATUS>no</STATUS>
                </LIST>
                 <LIST>
                    <ROLE>Member</ROLE>
                    <STATUS>no</STATUS>
                </LIST>
                 <LIST>
                    <ROLE>Member</ROLE>
                    <STATUS>yes</STATUS>
                </LIST>
                </root> 
```

我试过了

```
 <?xml version="1.0" ?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:template match="/"><html>
    <h2>
<xsl:element name="test">
    <xsl:for-each select="/root/LIST[STATUS='yes']">
<xsl:copy-of select="current()"/>
</xsl:if>
</xsl:for-each>
</xsl:element>
</h2></html>
    </xsl:template>
</xsl:stylesheet> 
```

但我只得到元素的值。我需要检索具有值的当前元素。有人知道吗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T13:31:02.080

> ```
> <xsl:element name="test">     
>   <xsl:for-each select="/root/LIST[STATUS='yes']"> 
>     <xsl:copy-of select="current()"/>
>   </xsl:for-each>       
> </xsl:element> 
> ```

这是一种相当奇怪的说法：

```
<test>
 <xsl:copy-of select="/root/LIST[STATUS='yes']"/>
</test> 
```

**所以，完整的转换可以是这样的：**

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output omit-xml-declaration="yes" method="xml" indent="yes"/>
    <xsl:strip-space elements="*"/>
    <xsl:template match="/">
        <html>
            <h2>
                <test>
                    <xsl:copy-of select="/root/LIST[STATUS='yes']"/>
                </test>
            </h2>
        </html>
    </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时：**

```
<root>
    <LIST>
        <ROLE>s1</ROLE>
        <STATUS>yes</STATUS>
    </LIST>
    <LIST>
        <ROLE>s1</ROLE>
        <STATUS>yes</STATUS>
    </LIST>
    <LIST>
        <ROLE>Member</ROLE>
        <STATUS>no</STATUS>
    </LIST>
    <LIST>
        <ROLE>Member</ROLE>
        <STATUS>no</STATUS>
    </LIST>
    <LIST>
        <ROLE>Member</ROLE>
        <STATUS>yes</STATUS>
    </LIST>
</root> 
```

**产生了想要的正确结果**：

```
<html>
   <h2>
      <test>
         <LIST>
            <ROLE>s1</ROLE>
            <STATUS>yes</STATUS>
         </LIST>
         <LIST>
            <ROLE>s1</ROLE>
            <STATUS>yes</STATUS>
         </LIST>
         <LIST>
            <ROLE>Member</ROLE>
            <STATUS>yes</STATUS>
         </LIST>
      </test>
   </h2>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T12:22:13.270

采用...

```
<xsl:copy-of select="."/> 
```

并删除不匹配的 xsl:if 像这样...

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

 <xsl:template match="/">
   <html>
    <h2>
      <xsl:element name="test">
        <xsl:for-each select="/root/LIST[STATUS='yes']">
          <xsl:copy-of select="."/>
        </xsl:for-each>
      </xsl:element>
    </h2>
   </html>
  </xsl:template>
</xsl:stylesheet> 
```

结果会是这样...

```
<html>
  <h2><test><LIST>
                     <ROLE>s1</ROLE>
                    <STATUS>yes</STATUS>
                </LIST><LIST>
                    <ROLE>s1</ROLE>
                    <STATUS>yes</STATUS>
                </LIST><LIST>
                    <ROLE>Member</ROLE>
                    <STATUS>yes</STATUS>
                </LIST>
    </test>
   </h2>
</html> 
```

# c# - 从项目中获取参考位置

> ID：12932630
> 
> 赞同：2
> 
> 时间：2012-10-17T10:48:13.563
> 
> 标签：c#, reflection, branch, .net-assembly

对于我们的一个主要系统，我们有一个相当大的解决方案，我们终于做了一些很久以前应该做的事情，但是嘿。

> *   主要的
>     *   开发（新开发）
>     *   服务包（错误修复）
>         *   释放（锁定，目前与客户有关）

我们刚刚获得了我们的主要解决方案，使其无错误（经过测试并为客户签名准备就绪），因此现在是实施该解决方案的正确时机。然而，我们的主要解决方案是这样的：

> *   主要的
>     *   项目A
>         *   参考 A (C:\DLLS)
>         *   参考 B (C:\DLLS)
>         *   项目B（本地参考）
>     *   项目 B
>         *   参考 A (C:\DLLS)
>         *   参考 B (C:\DLLS)

在我们有直接关系项目的地方，它们往往是我们应用程序的模块并在本地引用（项目 B）。外部引用是自定义实用程序类，它们不驻留在解决方案中，因此被构建并放在一个文件夹中（如果我们只有一个解决方案而不是现在我们正在考虑分支，这很好）。

> ## 问题

现在的问题是我正在分支，每个分支都将引用一个部分，并且不能逐个分支地更改代码。我希望能够加载当前`MAIN`并查看它有哪些引用以及它们在解决方案中的位置，我尝试使用`reflection`and但这仅`Assemblies`提供`MAIN.EXE`引用的 .DLL 的信息，例如它们的名称而不是项目所在的位置期待他们成为。然后我继续看`Microsoft.Build.BuildEngine`

```
 Project p = new Project();
  //This is the cs/vb project file
  p.Load(_projectPath);
  var v = p.Imports; 
```

这不是正确的。本质上，我正在尝试获取给定项目文件的参考位置列表，关于我能做什么的任何可能的建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T11:34:24.823

我通过使用获得了胜利`Microsoft.Build.BuildEngine`- 每个参考都是一个`BuildItem`并且已经`MetaData`调用`HintPath`了它，它给出了我需要的东西。对于任何想尝试这个的人：

```
 Project p = new Project();
  p.Load(_projectPath);
  var buildItems = p.ItemGroups.Cast<BuildItemGroup>().Where(x => x.Cast<BuildItem>().Any(y => y.Name.ToLower().Contains("reference"))).Select(x => x.Cast<BuildItem>()).ToList();
  var buildItemPaths = buildItems.SelectMany(x => x.Select(y => y.GetMetadata("HintPath").ToString())).ToList<string>(); 
```

这给了我我需要的东西——希望也能帮助其他人。

# html - 如何在不使用填充/边距的情况下设置内部 div 的边距

> ID：12932631
> 
> 赞同：0
> 
> 时间：2012-10-17T10:48:15.980
> 
> 标签：html, css

```
<div class="out">
    <div class="inner"></div>
</div> 
```

在上面的代码中，`out`div 必须设置为：

```
padding:0;
margin:0; 
```

然后我希望内部 div 以`out`一定的余量取代所有的地方。

[这是我想要的效果](http://jsfiddle.net/rrMjj/)

在示例中，我使用`top,bottom,left,right`属性定位内部 div，但是 ie6 不支持它。

如何让它跨浏览器工作？

顺便说一句，我不想​​使用绝对大小

```
height:1px
width:1px; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T10:51:59.657

`out`绝对不允许更改的填充？如果可以的话，这将非常容易：http: [//jsfiddle.net/rrMjj/2/](http://jsfiddle.net/rrMjj/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T11:12:10.607

使用这个 CSS

```
.inner{
border: 10px solid red;
width: 250px;
height: 250px;
background-color:gray;
} 
```

[链接演示](http://jsfiddle.net/rrMjj/5/)

# selenium - 如何在不同的测试用例中使用相同的 selenium 会话？

> ID：12932632
> 
> 赞同：1
> 
> 时间：2012-10-17T10:48:17.557
> 
> 标签：selenium, junit, selenium-rc

我正在使用 JUnit 和 Selenium。我想登录一次网页，运行后我运行两个测试用例，而不打开新的浏览器/会话。如果我在方法中执行“登录” `setUp()`，那么每次在测试用例之前都会调用它。如何`setUp()`对所有测试用例只使用一种方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T11:58:05.010

我认为可以通过以下方式实现

```
package com.java;

import org.junit.After;
import org.junit.AfterClass;
import org.junit.Before;
import org.junit.BeforeClass;
import org.junit.Test;

import com.thoughtworks.selenium.DefaultSelenium;
import com.thoughtworks.selenium.Selenium;

public class TestAnnt {

    public static Selenium sel;

    @BeforeClass
    public static void beforeClass() {
        sel = new DefaultSelenium("localhost", 5555, "*firefox",
                "http://www.google.com");
        sel.start();
        System.out.println("Before Class");
    }

    @Before
    public void beforeTest() {

        System.out.println("Before Test");

        // Actions before a test case is executed
    }

    @Test
    public void testone() {
        sel.open("/");
        sel.waitForPageToLoad("30000");
        System.out.println("Test one");
        // Actions of test case 1
    }

    @Test
    public void testtwo() {
        sel.open("http://au.yahoo.com");
        sel.waitForPageToLoad("30000");
        System.out.println("test two");
        // Actions of test case 2
    }

    @After
    public void afterTest() {
        System.out.println("after test");
        // Actions after a test case is executed
    }

    @AfterClass
    public static void afterClass() {
        sel.close();
        sel.stop();
        sel.shutDownSeleniumServer();
        System.out.println("After Class");
    }

} 
```

# java - java从mongo db打开一个文件（pdf，xsl等...）

> ID：12932633
> 
> 赞同：1
> 
> 时间：2012-10-17T10:48:18.193
> 
> 标签：java, mongodb, desktop

我有文件（pdf、doc、txt、xsl 等）存储在我的*mongo* *db* 中。我想检索并打开它们。我知道提取。我还发现`Desktop.getDesktop().open(FileName);`将使用其各自的应用程序（Acrobat 阅读器、办公套件等）打开文件。但是任何人都可以告诉我是否只有文件就足够了，或者我们应该提供文件的完整路径。

在后一种情况下，谁能告诉我如何为从*mongodb*检索到的文件提供路径？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T10:55:17.650

如果要使用打开文件，则必须从 Mongodb 中提取文件`Desktop.getDesktop().open(FileName);`

您可以使用从 mongodb 获取的内容创建一个临时文件[`File.createTempFile`](http://docs.oracle.com/javase/7/docs/api/java/io/File.html#createTempFile%28java.lang.String,%20java.lang.String%29)并将其写入其中，并使用正确的文件扩展名，然后运行`Desktop.getDesktop().open()`以打开它。

# c# - 使用未分配的变量c#

> ID：12932636
> 
> 赞同：-3
> 
> 时间：2012-10-17T10:48:38.697
> 
> 标签：c#

解决**未分配变量错误使用**的最佳方法是什么？以下代码包含错误：

```
string[] Names;
Countries.Keys.CopyTo(Names, 0); 
```

这里`Countries`是类型`Dictionary<string, string>`。`Names`数组出现错误。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T10:51:02.763

您需要创建一个空数组将值复制到：

```
string[] Names = new string[Countries.Keys.Count];
Countries.Keys.CopyTo(Names,0); 
```

如果你可以使用 LINQ，你可以这样做

```
string[] names = Countries.Keys.ToArray(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T10:51:59.923

假设国家集是一个字典，例如：

```
string[] names = new string[countries.Count]; 
```

关于 .NET 编码约定，局部变量和私有类型成员的标题应为驼峰式，因此使用“名称”而不是“名称”和“国家”而不是国家，假设国家不是属性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-17T10:50:55.867

最好使用[默认](http://msdn.microsoft.com/en-us/library/xwth0h0d%28v=vs.80%29.aspx)构造，如果可能的话，在初始化一些变量时使用一些**它的**初始值：

**例如**：

```
var x = default(int); 
```

在你的情况下，它可能是

```
string[] s = default(string[]); 
```

**编辑**

考虑到已*编辑的问题，您必须**正确*进行初始化，因为`default`reference-type 的值会返回`null`，在您的特定情况下，这会产生异常。

所以只需像这样初始化它：

```
string[]  s=  new string[Countries.Keys.Count]; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-17T10:52:45.443

您必须初始化数组来克服这个问题：

```
string[]  Names =  new string[Countries.Keys.Count]; 
```

# python - NumPy 数组索引

> ID：12932637
> 
> 赞同：1
> 
> 时间：2012-10-17T10:48:39.987
> 
> 标签：python, numpy

我想提取 NumPy 数组的第二列和第三列到第五列，我该怎么做？

```
A = array([[0, 1, 2, 3, 4, 5, 6], [4, 5, 6, 7, 4, 5, 6]])
A[:, [1, 4:6]] 
```

这显然是行不通的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-17T11:13:19.270

假设我已经理解你——明确指定你想要的输出通常是个好主意，因为它并不明显——你可以使用[numpy.r_](http://docs.scipy.org/doc/numpy/reference/generated/numpy.r_.html)：

```
In [27]: A
Out[27]: 
array([[0, 1, 2, 3, 4, 5, 6],
       [4, 5, 6, 7, 4, 5, 6]])

In [28]: A[:, [1,3,4,5]]
Out[28]: 
array([[1, 3, 4, 5],
       [5, 7, 4, 5]])

In [29]: A[:, r_[1, 3:6]]
Out[29]: 
array([[1, 3, 4, 5],
       [5, 7, 4, 5]])

In [37]: A[1:, r_[1, 3:6]]
Out[37]: array([[5, 7, 4, 5]]) 
```

然后您可以根据需要将其展平或重塑。 `r_`基本上是生成正确索引的便利功能，例如

```
In [30]: r_[1, 3:6]
Out[30]: array([1, 3, 4, 5]) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T11:04:59.623

也许你正在寻找这个？

```
In [10]: A[1:, [1]+range(3,6)]
Out[10]: array([[5, 7, 4, 5]]) 
```

请注意，这将为您提供除第一行之外的所有行的第二、第四、第五和六列。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T11:06:51.963

第二个元素是`A[:,1]`。元素 3-5（我假设你想要包含）是`A[:,2:5]`. 您将无法通过一次调用来提取它们。要将它们作为数组获取，您可以这样做

```
import numpy as np

A = np.array([[0, 1, 2, 3, 4, 5, 6], [4, 5, 6, 7, 4, 5, 6]])
my_cols = np.hstack((A[:,1][...,np.newaxis], A[:,2:5])) 
```

这些`np.newaxis`东西只是为了制作`A[:,1]`一个二维数组，与`A[:,2:5]`.

希望这可以帮助。

# api - Vimeo API froogaloop 进入没有 vimeo 控件的 HTML 5 播放器

> ID：12932638
> 
> 赞同：3
> 
> 时间：2012-10-17T10:48:46.060
> 
> 标签：api, controls, customization, vimeo, froogaloop

我必须使用 Vimeo API froogaloop 在我的网站上播放视频，但我想自定义播放器......不幸的是我无法删除控件。

所以我想将 Vimeo 中的 Video Flux 使用到另一个我可以自定义的播放器中。

你有什么想法 ？可能吗 ？

# php - Tumblr V2 API PHP 包装器

> ID：12932640
> 
> 赞同：0
> 
> 时间：2012-10-17T10:48:55.587
> 
> 标签：php, blogs, tumblr

我正在尝试使用[https://github.com/gregavola/tumblrPHP](https://github.com/gregavola/tumblrPHP)上提供的 TumblrPHP 包装器将 Tumblr 博客集成到我的网站中。这是我用来查看我网站上的帖子的代码：

```
<?php
    include ('lib/tumblrPHP.php');
    $consumer = 'key';
    $secret = 'key';
    $tumblr = new Tumblr($consumer, $secret);
    $posts = $tumblr->get('/blog/nyhetergaius.tumblr.com/posts');
    foreach($posts->response->posts as $posts) {
    ?>
        <h2><?php echo date('Y-m-d', $post->timestamp) ?></h2>
        <?php if ($post['type'] == 'regular') { ?>
        <?php echo $post{'body'}; ?>
          <?php } ?>
        <?php
        if ($post->type == 'photo') {
            foreach ($post->photos as $photo) {
                ?>
                <img src="<?php echo $photo->alt_sizes[1]->url ?>" />
                <?php
            }
            echo $post->caption;
        }
        else
            echo $post->body;
        ?>
    <?php
}
?> 
```

我正在使用自己的密钥和密钥，但即便如此，我也只能检索每个帖子的默认日期。我究竟做错了什么？有没有更简单的方法来查看博客[http://nyhetergaius.tumblr.com/](http://nyhetergaius.tumblr.com/)上出现的帖子？这就是帖子在我的网站上的显示方式：http: [//test.gaius.nu/om.php](http://test.gaius.nu/om.php)。

谢谢您的支持。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-01T23:19:46.737

我能够通过将 $post['type'] 替换为 $post->type 等来完成这项工作。

```
foreach($posts->response->posts as $posts) {
    $postDate = date('Y-m-d', $posts->timestamp);
    echo "<h2>$postDate</h2>";
    if ($posts->type == 'regular') {
        echo $posts->body;
    }
    elseif ($posts->type == 'photo') {
        foreach ($posts->photos as $photo) {
            $imgURL = $photo->alt_sizes[1]->url;
            echo "<img src=\"$imgURL\" />";
        }
        echo $posts->caption;
    }
    else
    {
        echo $posts->body;
    }
} 
```

# c# - 自定义编译器闪烁打开然后关闭

> ID：12932644
> 
> 赞同：0
> 
> 时间：2012-10-17T10:49:03.497
> 
> 标签：c#, compiler-construction

我正在使用 MSDN 网站上的自定义编译器。当我尝试编译/运行一些测试代码（拖放到 .exe）时，控制台窗口打开然后关闭，而不是保持打开状态，直到我选择关闭它。如何保持打开状态？

来源：http: [//msdn.microsoft.com/en-us/magazine/cc136756.aspx#S8](http://msdn.microsoft.com/en-us/magazine/cc136756.aspx#S8)

**程序.cs**

```
if (args.Length != 1)
        {
            // Display title, reset cursor to normal, add space
            Console.WriteLine("Alt ver 1.0 (Alpha)");
            Console.WriteLine();
            Console.ReadLine();
            try
            {
                Scanner scanner = null;
                using (TextReader input = File.OpenText(args[0]))
                {
                    scanner = new Scanner(input);
                }
                Parser parser = new Parser(scanner.Tokens);
                CodeGen codeGen = new CodeGen(parser.Result, Path.GetFileNameWithoutExtension(args[0]) + ".exe");
            }
            catch (Exception e)
            {
                Console.Error.WriteLine(e.Message);
                Console.ReadLine();
            }
        } //if 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T10:51:28.337

`Console.ReadLine();` 在块内的最后添加一个`try`试试这个

```
 if (args.Length != 1)
            {
                // Display title, reset cursor to normal, add space
                Console.WriteLine("Alt ver 1.0 (Alpha)");
                Console.WriteLine();
                Console.ReadLine();
                try
                {
                    Scanner scanner = null;
                    using (TextReader input = File.OpenText(args[0]))
                    {
                        scanner = new Scanner(input);
                    }
                    Parser parser = new Parser(scanner.Tokens);
                    CodeGen codeGen = new CodeGen(parser.Result, Path.GetFileNameWithoutExtension(args[0]) + ".exe");
                }
                catch (Exception e)
                {
                    Console.Error.WriteLine(e.Message);
                    Console.ReadLine();
                }
finally
{
Console.Readkey();
}
            } //if
else
{
Console.WriteLine("no args");
Console.ReadKey();
} 
```

编辑：---传递参数问题我已经制作了这个程序，它可以完美地获取文件名作为参数
，请看一下

```
class Program
    {
        static void Main(string[] args)
        {
            if (args.Length > 0)
            {
                foreach (var arg in args)
                {
                    Console.WriteLine(arg);
                }
                Console.ReadKey();
            }
            else
            {
                Console.WriteLine("NO ARGS");
                var fileName = Console.ReadLine();
                Main(new string[] { fileName });
            }
        }
    } 
```

# c - 如何修复 Valgrind 日志中的内存泄漏

> ID：12932647
> 
> 赞同：0
> 
> 时间：2012-10-17T10:49:12.503
> 
> 标签：c, memory-leaks, valgrind, patch

这是我第一次看到 valgrind 日志，这个日志是由其他用户提供的（我无法运行 valgrind，因为它不支持 stlinux (sh4)

为了了解如何使用 valgrind 日志修复内存泄漏，如果有专家，将不胜感激，甚至选择 bellow 的 valgrind 错误日志中的一行（并告诉我们，他打算修复的 valgrind 错误行并发布他们的修复（源代码补丁）

然后，将学习如何从 valgrind 日志中修复内存泄漏，然后我将自己修复（我只需要一个示例修复）

这是应用程序 trac 浏览器（源代码）： [http ://www.streamboard.tv/oscam/browser/trunk/?rev=5375](http://www.streamboard.tv/oscam/browser/trunk/?rev=5375)

如果有专家可以查看这些日志（我真的需要帮助），将不胜感激，这里有 4 个 valgrind 日志：

[http://www.4shared.com/office/04seUumN/valgrind_2.html *_* _](http://www.4shared.com/office/04seUumN/valgrind__2_.html)

[http://www.4shared.com/office/WYmfxICb/valgrindlog.html](http://www.4shared.com/office/WYmfxICb/valgrindlog.html)

[http://www.4shared.com/office/WGwlKeUK/valgrind.html](http://www.4shared.com/office/WGwlKeUK/valgrind.html)

[http://www.4shared.com/office/mkX4FAzd/valgrind_1.html *_* _](http://www.4shared.com/office/mkX4FAzd/valgrind__1_.html)

PS：

1.  由于我自己无法运行 valgrind，请选择内存损失最大的内存泄漏（泄漏），然后，我可以用我的眼睛监控这些改进（top 命令，ps -aux）

2.  我对修复内存泄漏的关注主要限于这些模块（对我来说，优先级（重要性）在于它们的编号顺序（我的意思是，使用 module-datastruct-list.c 修复内存泄漏对我来说是重中之重，. ...)

    *   模块数据结构列表.c
    *   oscam-garbage.c
    *   oscam.c
    *   模块-cccam.c
    *   模块-dvbapi.c

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T12:39:44.430

I used Valgrind a long time ago so I don't remember well how to use it, but I know it is fairly easy. Valgrind logs show every memory leak of the program, due to your code, but also due to code you call from libraries. For every leak, the function call stack is displayed, like this :

```
==5313== Invalid write of size 4
==5313==    at 0x8048A27: test_2() (valgrind-tests.cc:37)
==5313==    by 0x8048CDF: main (valgrind-tests.cc:134)
==5313==    by 0x215BBE: __libc_start_main (in /lib/libc-2.3.2.so)
==5313==    by 0x8048910: (within /home/newren/examples/valgrind-tests)
==5313==    Address 0x1B3E024 is 0 bytes inside a block of size 4 free'd
==5313==    at 0x5419C5: __builtin_delete (vg_replace_malloc.c:244)
==5313==    by 0x5419E3: operator delete(void*) (vg_replace_malloc.c:253)
==5313==    by 0x8048A20: test_2() (valgrind-tests.cc:36)
==5313==    by 0x8048CDF: main (valgrind-tests.cc:134)
==5313==    by 0x215BBE: __libc_start_main (in /lib/libc-2.3.2.so)
==5313==    by 0x8048910: (within /home/newren/examples/valgrind-tests) 
```

This means you try to write 4 bytes in memory, but you don't have access to theses bytes. This issue is located at line 37 of "valgrind-tests.cc" in this example.

The main problem of valgrind is that, as I said earlier, it displays memory leaks or memory warnings (like forgotten pointers) from libraries you use. To clean your logs, you can write valgrind rule files called "[suppression files](http://www.valgrind.org/docs/manual/mc-manual.html#mc-manual.suppfiles)".

More informations [here](http://www.valgrind.org/docs/manual/mc-manual.html) and [here](http://people.gnome.org/~newren/tutorials/developing-with-gnome/html/ch03s03.html).

# php - 通过 Ajax 提交表单时出现空查询 PHP 错误

> ID：12932650
> 
> 赞同：1
> 
> 时间：2012-10-17T10:49:21.753
> 
> 标签：php, ajax

当我的表单被提交（通过 Ajax）时，我收到以下错误消息：

```
[17-Oct-2012 11:46:29] PHP Warning:  mysqli_query() [<a href='function.mysqli-query'>function.mysqli-query</a>]: Empty query in /home1/xenongro/public_html/testing/enrolment/thanks.php on line 32 
```

我怀疑这与 if/else 语句有关，但不确定实际问题是什么。

任何人都可以帮忙吗？

```
<?php

$firstname = htmlspecialchars(trim($_POST['fname']));
$lastname = htmlspecialchars(trim($_POST['lname']));
$worktel = htmlspecialchars(trim($_POST['worktel']));

$dbc = mysqli_connect('localhost', 'xxxxx', '<xxxx>', 'xxxx')
or die ('Could not connect to MySQL server.');

if ($level != "IOSH Managing Safely"){
 if ($funding == "Self Funding"){
  $query = "INSERT INTO enrolments (fname, lname, worktel)" . 
"VALUES ('$firstname', '$lastname', '$worktel')";
}
else if ($funding == "Employer Funding"){
$query = "INSERT INTO enrolments (fname, lname, worktel)" . 
"VALUES ('$firstname', '$lastname', '$worktel')";
}
}
else if ($level == "IOSH Managing Safely"){
if ($funding == "Self Funding"){
$query = "INSERT INTO enrolments (fname, lname, worktel)" . 
"VALUES ('$firstname', '$lastname', '$worktel')";
}

else if ($funding == "Employer Funding"){
$query = "INSERT INTO enrolments (fname, lname, worktel)" . 
"VALUES ('$firstname', '$lastname', '$worktel')";
    }
    }

$result = mysqli_query($dbc, $query)
or die ('error querying database');
mysqli_close($dbc);

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T10:52:55.880

尝试

```
var_dump($query);
var_dump($funding); 
```

就在之前

```
$result = mysqli_query($dbc, $query); 
```

它会给你更多信息

我怀疑这`$funding`可能会对你的常量字符串有轻微的变化

可能是错字/多余的空间/大写字母

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T10:53:41.190

没有设置查询的情况有两种：级别不匹配字符串，或者资金不匹配字符串。可能是空格的问题。

更糟糕的是，您不使用 mysql_real_escape_string，除非打开了 magic_quotes_gpc，否则攻击者可以注入他的 SQL。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T10:54:38.733

`$funding`在提供的代码示例中似乎没有定义，因此您`if`的 ' 都不会匹配。

# vb.net - vb.net 项目模板如何将根名称空间留空

> ID：12932658
> 
> 赞同：9
> 
> 时间：2012-10-17T10:49:47.287
> 
> 标签：vb.net, visual-studio, templates

我一直在修改 VS 2010 模板。到目前为止，我能够从我的模板创建一个 vb.net 类库项目。

然而，一件小事困扰着我。

在我的项目模板中，默认程序集名称与默认文件名相同。我将根命名空间留空。

但是当我从模板创建一个新项目时，VS 2010 会自动使用与我的程序集名称相同的名称填充根命名空间。

我的程序集名称和根命名空间的模板项目 (vbproj) 如下所示：

```
<AssemblyName>$safeprojectname$</AssemblyName>
<!-- RootNameSpace should always be empty. -->
<RootNamespace></RootNamespace> 
```

但如前所述，当我将其留空时，它总是会被程序集名称覆盖。即使我创建一个带有空字符串作为值的自定义参数来替换根命名空间，它仍然会被覆盖。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T13:42:52.413

在**解决方案资源管理器**中-> 右键单击​​解决方案 -> 属性 -> 清除***根命名空间***字段 -> 按**Enter**保存。

# php - 如何在 Wordpress 中通过 CSS 使用 Image 而不是border-right？

> ID：12932659
> 
> 赞同：2
> 
> 时间：2012-10-17T10:49:52.093
> 
> 标签：php, html, wordpress, css

我想使用图像在菜单项的右侧放置边框。目前我正在通过如下的css代码执行此操作：

```
.menu-item{
border-right:2px solid #f1f1f1;
} 
```

但它的高度比我看到的要高一点。所以有些人建议我使用图像而不是这个。

那么如何在这里使用呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T10:59:54.777

您可以使用图像作为背景，如下所示：

```
.menu-item {
    padding-right: 2px;
    background: url('/path/to/image.png') no-repeat center right;
} 
```

工作示例：http: [//jsfiddle.net/Yxyyw/](http://jsfiddle.net/Yxyyw/)

# javascript - 如何有效地序列化 64 位浮点数以使字节数组保持自然数字顺序？

> ID：12932663
> 
> 赞同：3
> 
> 时间：2012-10-17T10:49:57.050
> 
> 标签：javascript, python, c, serialization, natural-sort

我正在处理的项目要求我将 javascript 数字（它们是双精度数）作为 BLOB 主键存储在数据库表中（不能使用数据库本机浮点数据类型）。所以基本上我需要以这样的方式将数字序列化为字节数组：

1 - 字节数组的长度为 8（通常需要序列化双精度）

2 - 字节数组必须保持自然顺序，以便数据库透明地对索引 b 树中的行进行排序。

我正在寻找一个简单的函数，它接受一个数字并返回一个表示字节的数字数组。我更喜欢用 javascript 编写的函数，但也可以接受用 java、C、C#、C++ 或 python 编写的答案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-17T11:56:02.900

要满足排序要求，您需要：

1.  使用大端表示
2.  如果符号位为 0，则将其翻转为 1。检查实际位 - 将原始数字与 0 进行比较在特殊情况下（例如负零）会得到不同的结果。
3.  如果符号位为 1，则翻转所有位

Python 3 代码：

```
import struct

def invert(x):
    return bytes(c ^ 255 for c in x)

def tobin(x):
    binx = struct.pack('>d', x)
    if binx > b'\x80': #negative
        return invert(binx)
    else:
        return struct.pack('>d', -x)

data = [float('-inf'), -100.0, -2.0, -.9, -.1, -0.0, 
    0.0, .1, .9, 2.0, 100.0, float('inf'), float('nan')]

print(sorted(data, key=tobin))
#[-inf, -100.0, -2.0, -0.9, -0.1, -0.0, 0.0, 0.1, 0.9, 2.0, 100.0, inf, nan] 
```

在 Python 2 上更改`invert`为：

```
def invert(x):
    return "".join(chr(ord(c) ^ 255) for c in x) 
```

作为参考，这里是等效的 node.js，它已经通过 'Buffer' 类实现了 Big Endian 序列化功能：

```
function serialize(n) {
  var buffer = new Buffer(8);
  var l = buffer.length;
  buffer.writeDoubleBE(n, 0);
  if (buffer[0] < 0x80) {
    buffer[0] ^= 0x80;
  } else {
    for (var i = 0; i < l; i++) 
      buffer[i] ^= 0xff;
  }
  return buffer
}

function deserialize(buffer) {
  var l = buffer.length;
  // 0x80 is the most significant byte of the representation of
  // the first positive number(Number.MIN_VALUE)
  if (buffer[0] >= 0x80) { 
    buffer[0] ^= 0x80;
  } else {
    for (var i = 0; i < l; i++) 
      buffer[i] ^= 0xff;
  }
  return buffer.readDoubleBE(0);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T10:57:31.787

[DataView](https://developer.mozilla.org/en-US/docs/JavaScript_typed_arrays/DataView)提供了一个在 8 字节容器中写入双精度的 API。

用方法`getFloat64()`和`setFloat64()`

提到的链接显然没有实现 setFloat64()，但至少提供了一些观点，至少在编写这样一个函数时涉及到什么。

[https://github.com/vjeux/jDataView](https://github.com/vjeux/jDataView)

对于浏览器，绝对最好和最快的方法是使用类型数组中的 Float64Array（并可能修复字节顺序）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T11:39:18.613

显而易见的答案是消除您不能使用本机数据库类型的限制。我看不出有任何意义。它仍然是 8 个字节，无需任何进一步的调查、工作、实验、测试等即可为您进行排序。

# python - 使用自定义词典进行拼写检查

> ID：12932671
> 
> 赞同：-1
> 
> 时间：2012-10-17T10:50:31.543
> 
> 标签：python, spell-checking

需要您的指导！想要检查一些文本文件是否存在针对自定义词典的任何拼写错误。这是代码：

```
Dictionary=set(open("dictionary.txt").read().split())
print Dictionary

SearchFile = open(input("sample.txt"))
WordList = set()     

for line in SearchFile:
    line = line.strip()
    if line not in Dictionary:
        WordList.add(line)
print(WordList) 
```

但是当我打开并检查示例文件时，没有任何改变。我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T11:17:52.947

您做错的不是明确更改任何文件中的任何内容。

这是一些代码来展示如何将内容写入文件......

```
fp = open(somefilepath,'w') 
```

此行打开一个文件进行写入，'w' 告诉 python 如果文件不存在则创建该文件，但如果文件存在则删除该文件的内容。如果要打开文件进行写入并保留当前内容，请改用“a”。'a' 用于追加。

```
fp.write(stuff) 
```

将变量“stuff”中的任何内容写入文件。

希望这可以帮助。对于更具体到您的问题的代码，请告诉我们您想要写入文件的具体内容。

此外，这里有一些文档可以帮助您更好地理解文件的主题：http: [//docs.python.org/tutorial/inputoutput.html#reading-and-writing-files](http://docs.python.org/tutorial/inputoutput.html#reading-and-writing-files)

**编辑：但你没有改变任何东西！**

在您的脚本结束时，您已经完成了以下工作：

```
1\. Dictionary is a set containing all acceptable words
2\. WordList is a set containing all not acceptable lines 
3\. You have read to the end of SearchFile 
```

如果我正确理解您的问题，您现在想要做的是：

```
4\. find out which Disctionary word each line stored in Wordlist should be
5\. re-write SearchFile with the offending lines replaced. 
```

如果这是正确的，您打算如何确定哪个 WordList 条目应该是哪个 Dictionary 条目？你怎么知道实际的修正？您是否尝试过这部分脚本（毕竟这是症结所在。这只是出于礼貌）。您能否与我们分享您在这部分的尝试。

让我们假设你有这个功能：

```
def magic(line,dictionary):
    """
    this takes a line to be checked, and a set of acceptable words.
    outputs what line is meant to be.
    PLEASE tell us your approach to this bit

    """
    if line in dictionary:
        return line
    ...do stuff to find out which word is being mis spelt, return that word

Dictionary=set(open("dictionary.txt").read().split())
SearchFile = open("sample.txt",'r')

result_text = ''
for line in SearchFile:   
    result_text += magic(line.strip(),Dictionary)    #add the correct line to the result we want to save
    result_text += '\n'

SearchFile = open("sample.txt",'w')
SearchFile.write(result_text)      # here we actually make some changes 
```

如果您还没有想过如何找到应该纠正拼写错误的行的实际字典值，试试这个： http: [//norvig.com/spell-correct.html](http://norvig.com/spell-correct.html)

要重申之前的观点，重要的是要表明如果您需要任何有意义的帮助，您至少已经尝试解决问题的症结所在。

# php - 获取不在活动中的 Facebook 好友

> ID：12932672
> 
> 赞同：-2
> 
> 时间：2012-10-17T10:50:32.003
> 
> 标签：php, facebook, facebook-graph-api

> **可能重复：**
> [邀请朋友参加活动 facebook api](https://stackoverflow.com/questions/12931129/invite-friends-to-event-facebook-api)

我如何获得所有不在我活动中的朋友？（不被邀请）

现在我只有这个，但它只显示所有朋友。

```
$friends = $facebook->api('/me/friends');
    foreach ($friends as $key=>$value) {
       foreach ($value as $fkey=>$fvalue) {
          if ( is_numeric ( $fvalue['id'] ) ) :
               echo '<div class="friends"><table><tr><td><input type="checkbox" name="friends[]" value="' . $fvalue['id'] . '" checked="checked"/></td><td><img src="http://graph.facebook.com/' . $fvalue['id'] . '/picture" title="' . $fvalue['name'] . '"/></td><td><span style="color:#000"> '.$fvalue['name'].'</span></td></tr></table></div>';
          endif;
       }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T10:57:37.583

您可以通过 http get 检查是否有人被邀请（请参阅：[https](https://developers.facebook.com/docs/reference/api/event/) ://developers.facebook.com/docs/reference/api/event/ ）所以首先你得到所有的朋友，然后检查他们是否参加，如果是的话然后不要显示它们，或者像facebook那样以灰色显示它们，否则显示它们

这是 facebook 给出的答案：[https ://developers.facebook.com/tools/explorer/?method=GET&path=331218348435/invited/2503747](https://developers.facebook.com/tools/explorer/?method=GET&path=331218348435/invited/2503747)

# java-me - j2me HttpConnection

> ID：12932674
> 
> 赞同：1
> 
> 时间：2012-10-17T10:50:38.400
> 
> 标签：java-me

我正在创建一个 J2ME 应用程序，它使用 j2me(HttpConnection) 连接/访问远程服务器中的一些 php 文件。由于某些网络问题有时会长时间阻塞连接。给定超时 10 秒，我将如何创建一个线程来尝试连接。如果连接在 10 秒内没有响应，则线程再等待 5 秒并重试。在警告用户没有可用的网络连接之前，最大重试次数应为 3。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T15:04:09.593

您可以以任何一种方式使用 TimerTask 类，检查 10 秒的超时间隔，如下所示，

```
// First do your HttpConnection and open your URL
HttpConnection httpConnection = (HttpConnection) Connector.open(URL);

responseCode = httpConnection.getResponseCode(); // responseCode is class variable

// Now create a timertask that invokes after 10 seconds,
Timer timer = new Timer(); 

timer.schedule ( new TimeoutTask(), 10 * 1000 ); 

...
private class TimeOutTask extends TimerTask
{
    public void run()
    {
      // check reponseCode's value here, if it is not 200 then there is problem in network connection.
    }
} 
```

# git-branch - 远程分支是否克隆到本地 git repo？

> ID：12932678
> 
> 赞同：0
> 
> 时间：2012-10-17T10:50:47.867
> 
> 标签：git-branch, git-clone, git

> **可能重复：**
> [使用 Git 和 Mercurial 进行部分克隆](https://stackoverflow.com/questions/2586824/partial-clone-with-git-and-mercurial)

如果我只想克隆一个分支，我该怎么做？

**是什么`git clone url`意思`git clone url --all`？**

```
[hugemeow@home base]$ git branch
* master
[hugemeow@home base]$ git branch -a
* master
  remotes/origin/HEAD -> origin/master
  remotes/origin/donut-release
  remotes/origin/donut-release2
  remotes/origin/eclair-passion-release
  remotes/origin/eclair-release
  remotes/origin/eclair-sholes-release
  remotes/origin/eclair-sholes-release2
  remotes/origin/froyo
  remotes/origin/froyo-release
  remotes/origin/gingerbread
  remotes/origin/gingerbread-mr4-release
  remotes/origin/gingerbread-release
  remotes/origin/ics-factoryrom-2-release
  remotes/origin/ics-mr0
  remotes/origin/ics-mr0-release
  remotes/origin/ics-mr1
  remotes/origin/ics-mr1-release
  remotes/origin/ics-plus-aosp
  remotes/origin/jb-dev
  remotes/origin/jb-mr0-release
  remotes/origin/jb-release
  remotes/origin/master
  remotes/origin/tools_r20

[mirror@home base]$ git branch -r
  origin/HEAD -> origin/master
  origin/donut-release
  origin/donut-release2
  origin/eclair-passion-release
  origin/eclair-release
  origin/eclair-sholes-release
  origin/eclair-sholes-release2
  origin/froyo
  origin/froyo-release
  origin/gingerbread
  origin/gingerbread-mr4-release
  origin/gingerbread-release
  origin/ics-factoryrom-2-release
  origin/ics-mr0
  origin/ics-mr0-release
  origin/ics-mr1
  origin/ics-mr1-release
  origin/ics-plus-aosp
  origin/jb-dev
  origin/jb-mr0-release
  origin/jb-release
  origin/master
  origin/tools_r20 
```

**编辑 1**
事实上，我的问题与[仅克隆一个分支](https://stackoverflow.com/questions/4811434/git-clone-only-one-branch)不同，尽管答案可能有点相似......

顺便说一句，如果该链接是解决方案，在从远程仓库克隆它之前如何获取分支列表？（该链接中未提及此问题，如果该链接可以回答我的问题，则应预先解决此问题。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T12:50:33.583

您可以在使用 .clone 之前获取分支列表[`git ls-remote --heads <repo-url>`](http://git-scm.com/docs/git-ls-remote)。

# javascript - 如何使用 JavaScript 和 Node.js 将捕获的图像存储到 MySQL 数据库中

> ID：12932680
> 
> 赞同：4
> 
> 时间：2012-10-17T10:50:50.657
> 
> 标签：javascript, html, mysql, node.js

我正在使用画布捕获图像，我想使用 Javascript 将捕获的图像存储在 MySQL 数据库中。

这是我的代码：

```
<html>  
      <head>
            <meta charset="utf-8">
            <meta name="viewport" content="width=device-width, maximum-scale=1.0">
            <style>
                body {width: 100%;}
                canvas {display: none;}
            </style>
            <title>Instant Camera - Remote</title>
            <script>

                var video, canvas, msg;
                var load = function () {
                    video  = document.getElementById('video');
                    canvas = document.getElementById('canvas');
                    msg    = document.getElementById('error');
                    if( navigator.getUserMedia ) {
                        video.onclick = function () {
                            var context = canvas.getContext("2d");
                            context.drawImage(video, 0, 0, 240, 320);
                            var image1 = canvas.toDataURL("image/png");
                    document.write('<img src="' + image1 + '" />');         
                        };

                    } else {
                        msg.innerHTML = "Native web camera not supported :(";
                    }
                };

                window.addEventListener('DOMContentLoaded', load, false);
            </script>
        </head>
        <body>
            <video  id="video" width="240" height="320" autoplay> </video>
            <p      id="error">Click on the video to send a snapshot to the receiving screen</p>
            <canvas id="canvas" width="240" height="320"> </canvas>
        </body>
        </html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T14:18:16.977

获取画布“屏幕截图”，将其编码为 BASE64 字符串，将其发送到 servlet/php/etc 并将其存储在 mysql 中应该可以工作。

# c++ - 在构造函数中调用的成员变量的析构函数 - 编译器错误？

> ID：12932681
> 
> 赞同：3
> 
> 时间：2012-10-17T10:50:53.837
> 
> 标签：c++, visual-studio, visual-studio-2012

我在使用 Visual Studio 2012 时遇到问题。首先是 SSCCE：

```
class CacheImpl
{
public:
    float* m_cache;

    CacheImpl()
    {
        m_cache=(float*)new float[1];
    }

    ~CacheImpl()
    {        
        delete [] m_cache;
    }
};

class Image 
{
public:
    Image() {}
    ~Image() {}
};

static const Image g_tmpImg;

class Filter
{       

public:

    Filter() : m_img(Image())
    //Filter() : m_img(g_tmpImg) // <-- This variant works
    {
        //Empty
    }

private:

    CacheImpl m_cache;
    const Image &m_img;
};

int main()
{
    Filter f;
    return 0;
} 
```

当运行这个（在调试模式下编译）时，我在 CacheImpl 中的删除上得到一个 CRT 断言，并查看 Filter() 的程序集列表或在 ~CacheImpl() 中设置断点表明 ~CacheImpl() 正在被调用Filter 构造函数的结尾没有明显的原因（实际上，这在 VS2010 中不会发生）。而是为临时对象调用 ~Image() ，而 VS2012*不这样*做。

在 VS2012 中编译它时，我收到警告“C4413：'Filter::m_img'：引用成员被初始化为一个临时的，在构造函数退出后不会持续存在”。我理解这一点，但我期望一个悬空引用，而不是崩溃，因为错误的对象正在被破坏。我是否偶然发现了编译器错误，还是应该将其视为未定义的行为而不初始化对临时对象的引用？对于上下文，在我的真实代码中，当使用这样的构造函数创建 Filter 时，从不使用悬空引用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T11:33:22.763

有人可能会争辩说这是一个编译器错误 - 但“未定义的行为”本质上意味着“任何事情都会发生”，并且您存储对即将被破坏的对象的引用符合未定义的行为。因此，您应该接受这一点并停止使用临时对象初始化引用。

# c# - 通过HttpHandler用ajax获取数据

> ID：12932682
> 
> 赞同：3
> 
> 时间：2012-10-17T10:50:54.747
> 
> 标签：c#, ajax, json, httphandler

所以我正在努力使用 AJAX 获取一些数据。一切似乎都可以正常工作，但我实际上并没有在我的页面上获取数据：

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
<script type="text/javascript">
    function getMailDetail(mailId) {
        $.ajax({
            type: "GET",
            url: "GetMail.ashx",
            data: "mid=" + mailId,
            success: function (data) {
                console.log(data);
                var pnlMail = $('#<%= pnlMail.ClientID %>');
                var lblFrom = $('#<%= lblFrom.ClientID %>');
                var lblDate = $('#<%= lblDate.ClientID %>');
                var lblSubject = $('#<%= lblSubject.ClientID %>');
                var lblMessage = $('#<%= lblMessage.ClientID %>');

                lblFrom.text(data.From);
                lblDate.text(data.Date);
                lblSubject.text(data.Subject);
                lblMessage.text(data.Message);

                pnlMail.css("display", "block");
            }
        });
    }
</script> 
```

我已经登录`data`以检查它的价值。由于这是我第一次尝试，我不确定会发生什么，但是，我相信我应该得到名称：值对。目前，控制台完全没有记录任何内容。一点价值都没有。

这是我的HttpHandler：

```
 public void ProcessRequest(HttpContext context)
    {
        string mailid = context.Request.QueryString["mid"].ToString();
        context.Response.ContentType = "text/json";

        context.Response.Write(showMailDetail(mailid));
    }

    protected string showMailDetail(string id)
    {
        int mailid = int.Parse(id);

        string From = "";
        DateTime Date = DateTime.Now;
        string Subject = "";
        string Message = "";

        MySqlContext db = new MySqlContext();

        string sql = "select m.datesent, m.subject, m.message, u.firstname, u.lastname from mail m inner join users u on m.sender = u.userid where m.mailid = @id";

        List<MySqlParameter> args = new List<MySqlParameter>();
        args.Add(new MySqlParameter() { ParameterName = "@id", MySqlDbType = MySqlDbType.Int32, Value = mailid });

        MySqlDataReader dr = db.getReader(sql, args);

        if (dr.HasRows)
        {
            dr.Read();

            From = (string)dr["firstname"] + " " + (string)dr["lastname"];
            Date = dr.GetDateTime("datesent");
            Subject = (string)dr["subject"];
            Message = (string)dr["message"];
        }
        dr.Close();

        string result = "{ 'From' : " + From + ", 'Date' : " + Date.ToString("yyyy/MM/dd HH:mm:ss") + ", 'Subject' : " + Subject + ", 'Message' : " + Message + " }";

        return result; 
    } 
```

谁能帮我弄清楚为什么我在这里没有得到任何东西？我已经为我做错这件事的可能性做好了充分的准备......

[我根据http://www.codeproject.com/Articles/170882/jQuery-AJAX-and-HttpHandlers-in-ASP-NET](http://www.codeproject.com/Articles/170882/jQuery-AJAX-and-HttpHandlers-in-ASP-NET)上的文章编写了代码

**编辑**
发现我在我的 sql 中使用了不正确的列名 - 应该`m.sender`不是`m.senderid`......但是，我现在有另一个问题。

当我触发处理程序时，我在 Chrome 的控制台中得到以下信息：

> GET GetMail.ashx?mid=1 500（内部服务器错误）jquery.min.js:2

**编辑 2**
更正了处理程序代码中的更多错误，现在任何地方都没有出现错误，但看起来点击实际上根本没有触发任何东西......

不知道如何在这里进行...

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-17T12:46:34.937

哇，永远不要使用字符串连接手动构建 JSON，你永远不会做对。

使用JSON 时始终使用[序列化程序：](http://msdn.microsoft.com/en-us/library/system.web.script.serialization.javascriptserializer.aspx)

```
public void ProcessRequest(HttpContext context)
{
    int mailid = int.Parse(context.Request["mid"]);
    var detail = GetMailDetail(mailid);

    if (detail != null)
    {
        context.Response.ContentType = "application/json";
        string json = new JavaScriptSerializer().Serialize(detail);
        context.Response.Write(json);
    }
    else
    {
        context.Response.StatusCode = 404;
    }
}

protected object GetMailDetail(int mailid)
{
    string sql = "select m.datesent, m.subject, m.message, u.firstname, u.lastname from mail m inner join users u on m.senderid = u.userid where m.mailid = @id";

    var args = new[]
    {
        new MySqlParameter 
        { 
            ParameterName = "@id", 
            MySqlDbType = MySqlDbType.Int32, 
            Value = mailid 
        }
    }.ToList();

    MySqlContext db = new MySqlContext();
    using (MySqlDataReader dr = db.getReader(sql, args))
    {
        if (dr.Read())
        {
            return new 
            {
                From = string.Format("{0} {1}", dr["firstname"], dr["lastname"]),
                Date = dr.GetDateTime("datesent").ToString("yyyy/MM/dd HH:mm:ss"),
                Subject = dr["subject"],
                Message = dr["message"]
            }
        }
        return null;
    }
} 
```

现在让我们看看客户端调用。你似乎已经定义了一些`getMailDetail`函数，但你似乎没有在任何地方调用它，或者至少你没有显示它。

这是一个完整的示例：

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
<script type="text/javascript">
    function getMailDetail(mailId) {
        $.ajax({
            type: 'GET',
            url: '<%= ResolveUrl("~/GetMail.ashx") %>',
            data: { mid: mailId },
            success: function (data) {
                console.log(data);
            }
        });
    }
</script>

<div onclick="getMailDetail(5);">Click to get mail detail</div> 
```

# html - 第一次在 chrome 上重定向后页面从缓存中消失

> ID：12932685
> 
> 赞同：1
> 
> 时间：2012-10-17T10:50:57.880
> 
> 标签：html, offline-caching, cache-manifest

当用户访问我的站点并且设备当前处于脱机状态时，我正试图将用户转移到脱机页面。

问题是我从主页本身触发了缓存，所以问题是当用户访问我的 url 时，他会访问加载页面本身，而不是我希望他访问的离线页面。

如果清单不可用，我所做的是使用 js 重定向用户

```
function errorCache(event) {
//Redirect for error event of manifest
var offlineURL = 'http://myUrl/OfflinePage'
window.location = offlineURL;
} 

window.applicationCache.addEventListener("error", errorCache, false); 
```

现在，这在用户第一次访问该页面时可以完美运行。下次我去主页时，它会将我重定向到离线页面，但离线页面不再可用。

知道这是 chrome 问题还是 HTML5 行为，我该如何保留离线页面？

谢谢

# intellij-idea - Intellij 在 TestNG 中运行一项测试

> ID：12932686
> 
> 赞同：5
> 
> 时间：2012-10-17T10:50:59.210
> 
> 标签：intellij-idea, testng

所以我典型的工作流程是

1.  我在 IntelliJ 中使用 TestNG 编写了一个数据驱动的测试。
2.  我提供数百个数据项
3.  运行测试，其中一两个失败
4.  我在“运行”窗格中看到了通过/失败的测试列表。

我希望能够右键单击该测试的“实例”并单独运行该测试（带断点）。目前 IntelliJ 似乎没有该功能。我必须右键单击测试，当我运行时，它会运行具有数百个数据点的整套测试。

这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T07:36:02.023

TestNG 在`testng.xml`级别上支持这一点，您可以在其中指定应使用数据提供者的哪些索引。`testng-failed.xml`它被称为“调用编号”，您可以通过使用数据提供者运行测试、使其某些调用编号失败并查看生成的调用编号来查看它的外观。

回到您的问题：您的 IDE 需要支持此功能才能使其在 UI 中可用，所以我建议您在 IDEA 论坛上提问

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-20T11:12:46.100

该功能已从 Intellij 添加`142.1217`：[https ://youtrack.jetbrains.com/issue/IDEA-57906](https://youtrack.jetbrains.com/issue/IDEA-57906)

# css - 如何在固定包装器内滚动 div 内容

> ID：12932688
> 
> 赞同：1
> 
> 时间：2012-10-17T10:51:00.577
> 
> 标签：css, html, fixed, floating

我有我的固定包装器 div，我想在其中添加一个带有内容的浮动 div 博客。我想用垂直滚动滚动浮动博客 div 的内容，而固定包装器保持原样。例如我想要这样[http://labs.burntfeathers.com/?theme=village](http://labs.burntfeathers.com/?theme=village)

# java - 如何使用 Solrj 将 JSON 文档插入到 Solr

> ID：12932690
> 
> 赞同：2
> 
> 时间：2012-10-17T10:51:01.043
> 
> 标签：java, solr, solrj

有向 Solr 插入或“更新”JSON 文档的[示例](http://wiki.apache.org/solr/UpdateJSON)，但是我想知道如何使用 Solrj（Solr Java 客户端）实现相同的目标？

还是我应该打开一个套接字并通过它发送它？

**注意**：我使用的是 Solr 4.0

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T11:51:29.390

使用 SolrJ，您可以使用 @Field 注释或[SolrInputDocument 实例](http://wiki.apache.org/solr/Solrj#Adding_Data_to_Solr)[将 POJO 添加到 Solr](http://wiki.apache.org/solr/Solrj#Directly_adding_POJOs_to_Solr)，它们是包含文档字段的更少映射。您不能直接添加 Json 文档。[如果您已经有一个可用的 Json 文档，您可以使用Jackson](http://wiki.fasterxml.com/JacksonHome)将其转换回 Java 对象，对其进行注释并通过 SolrJ 发送或通过 httpclient 发送请求，而根本不使用 SolrJ。

# bash - Bash 脚本，响应按键

> ID：12932694
> 
> 赞同：0
> 
> 时间：2012-10-17T10:51:12.730
> 
> 标签：bash, terminal

我构建了一个小菜单以在 bash 终端中使用，其中有多个选项可通过数字键进行选择。

```
#!/bin/bash
PS3='Teleport to ... '
options=("→ option 1" "→ option 2" "Quit")
select opt in "${options[@]}"
do
    case $opt in
        "→ option 1")
            echo "option 1"
            break
            ;;
        "→ option 2")
            echo "option 2"
            break
            ;;
        "Quit")
            break
            ;;
        *) echo invalid option
            break
            ;;
    esac
done 
```

目前我仍然需要按*enter*确认选择。是否可以让脚本直接响应第一个按键的输入？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T11:06:50.183

`read -n 1`读取一个字符。但是，您不能使用`select`它，因此您必须自己编写`while`循环。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T11:09:24.380

是的，使用`bash`（而不是`sh`！）您可以使用以下内容：

```
_KEY=
read -d '' -sn1 _KEY 
```

# javascript - 旋转 90/-90 度的图像模糊 jquery 旋转

> ID：12932700
> 
> 赞同：0
> 
> 时间：2012-10-17T10:51:35.523
> 
> 标签：javascript, jquery, jquery-plugins

使用此 jquery 插件时：[http](http://code.google.com/p/jqueryrotate/wiki/Documentation) ://code.google.com/p/jqueryrotate/wiki/Documentation 我将图像旋转 90 度，它们最终变得模糊。如果图像旋转 180 度，则它不会模糊。

有没有办法来解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T11:07:53.840

尝试使用具有`even * even`或`odd * odd`尺寸的图像将旋转中心设置为像素角或像素中心。

这里我旋转了一个 10*7 的图像（动画 gif），你可以看到旋转的像素并没有真正与屏幕的像素网格对齐：

![腐烂](../Images/bedd2939cfdd2adc030b1110749aa72e.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T10:57:03.560

尝试使用 css 过渡来旋转图像：

```
img {
-webkit-transform: rotate(90deg);
-moz-transform: rotate(90deg);
filter: progid:DXImageTransform.Microsoft.BasicImage(rotation=1);
} 
```

小心

# c - “使用相机确定物体的 2D 速度”- 如何跟踪物体的质心？

> ID：12932705
> 
> 赞同：4
> 
> 时间：2012-10-17T10:51:50.013
> 
> 标签：c, opencv

我正在尝试制作一个项目“使用相机确定物体的 2D 速度”。这只是二维速度。我想在 OpenCV 中使用 Lucas Kanade 算法。但是我无法区分我的对象属于哪个圆锥，也找不到要跟踪的对象的质心（这是黑色背景中的白色对象位置，该对象有任何形状，例如：正方形、椭圆形、.. ）。如何跟踪物体的质心以确定运动的距离？我需要使用 Lucas Kanade 算法来制作这个项目吗？请帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T11:50:46.560

要获得对象的速度，您需要做两件事，首先您需要检测每个图像中的对象（并按照您的建议将其压缩到质心），其次您需要将检测到的对象关联到不同的图像中。完成后，可以通过简单的运动速度 = 距离/时间等式轻松计算速度。

如果您只在每张图像中检测到一个对象（假设检测到的是对象），则关联很容易，尽管这种方法在现实世界中可能会失效。

检测你的物体是我认为你遇到困难的地方。如果它真的像纯黑色背景上的单个白色物体一样简单，那么找到质心应该很简单，只需平均所有白色像素的坐标。如果您有一个嘈杂的图像，那么您将需要先进行一些清理，例如形态关闭和打开操作以去除小的噪声斑点。

# php - 获取最接近 url php 的标题描述文本的图像

> ID：12932710
> 
> 赞同：-1
> 
> 时间：2012-10-17T10:52:06.137
> 
> 标签：php, xpath, domxpath

我正在尝试从 url 获取最相关的图像。我想获取最接近页面标题“文本”的图像。或者换一种说法。我想根据图像与标题“文本”的距离为图像打分。然后获取得分最高的图像。

标题“文本”可以在标题元素中

```
<h1>title text</h1>,<h2>title text<h2>,etc 
```

或者它可能与 alt 属性匹配

```
<img alt='title text'> tags. 
```

或者它也可能在任何其他元素中，例如

```
<p> , <span> , <div> etc 
```

例如：

假设页面的标题如下：

```
<title>White Gold Round Diamond Wedding Band: Jewelry: Amazon.com</title> 
```

在页面的正文中，我们有类似的内容：

```
<h1>White Gold Round Diamond Wedding Band</h1> 
```

可以说最接近上述标签的元素位于 div 内，如下所示：

```
<div class='abc'>
    <img src='efg' />
</div> 
```

那么上面的图像应该得到最高分。

相反，如果 img 的 alt 属性与 title 匹配，则该图像应获得最高分。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T11:07:07.757

我不认为这是一个好的解决方案。`og:image`如果已设置，您可以尝试获取而不是这个。

另一种解决方案是获取所有图像`XPath`并仅获取具有指定大小的图像，例如：大于`150px X 150px`和有限`width/height`的比率，例如 from`0.5`到`2`。如果有超过 1 张图片，您可以让用户使用简单的图片滑块选择其中一张，就像 Facebook 的分享弹出窗口一样。

您也可以使用[Embed.LY](http://embed.ly/) API 之类的东西，如果您想获取一些产品图像，它可以非常准确地工作。

如果您正在彻底使用亚马逊和/或 Ebay 优惠，那么您可以尝试[亚马逊的产品广告 API](https://affiliate-program.amazon.com/gp/advertising/api/detail/main.html)和[Ebay 的查找 API](http://developer.ebay.com/DevZone/finding/CallRef/findItemsByProduct.html)以获得最佳效果。您只需从给定的 URL 中提取商品 ID 并发送 API 请求即可获取该商品的详细信息，包括不同大小的图像。

最后，最好的解决方案可能是结合每种方法并像多合一一样使用它们。

# objective-c - NSWindowWillCloseNotification 从数组中删除窗口后的 EXC_BAD_ACCESS

> ID：12932713
> 
> 赞同：1
> 
> 时间：2012-10-17T10:52:17.287
> 
> 标签：objective-c, xcode, cocoa, nsnotificationcenter

假设我有一个名为“创建窗口”的菜单按钮，可以创建一个新窗口：

```
MyWindowClass * window = [MyWindowClass new]; 
```

为了保留它，我将它添加到一个可变数组中（声明并合成为 _articleArray = [NSMutableArray new];）

```
[_articleArray addObject:window] 
```

这很好用。如果我包括：

```
NSLog(@"Windows in mem: %lu",_articleArray.count); 
```

每次单击按钮时，数字都会增加，屏幕上会出现另一个窗口。

现在，如果我将选择器附加到此“创建窗口”函数以识别窗口何时关闭：

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(windowClosed:) name:NSWindowWillCloseNotification object:window]; 
```

这会产生一个错误：

```
-(void) windowClosed:(NSNotification*)notification {
    [_articleArray removeObject:[notification object]];
    NSLog(@"Windows in mem: %lu",_articleArray.count); 
```

当我按预期关闭窗口时，NSLog 会递减，但是一旦函数结束，它就会引发 EXC_BAD_ACCESS 错误（代码 13，地址 = 0,0）

```
0x7fff97878710:  movq   24(%rax), %rax 
```

我很迷茫。数字递减，所以我只能认为该功能正在工作。那么这里发生了什么？

编辑：（lldb）线程回溯

```
* thread #1: tid = 0x1c07, 0x00007fff97878710 libobjc.A.dylib`objc_msgSend_vtable13 + 16, stop reason = EXC_BAD_ACCESS (code=13, address=0x0)
frame #0: 0x00007fff97878710 libobjc.A.dylib`objc_msgSend_vtable13 + 16
frame #1: 0x00007fff97571503 Foundation`__NSFireTimer + 80
frame #2: 0x00007fff993a6da4 CoreFoundation`__CFRUNLOOP_IS_CALLING_OUT_TO_A_TIMER_CALLBACK_FUNCTION__ + 20
frame #3: 0x00007fff993a68bd CoreFoundation`__CFRunLoopDoTimer + 557
frame #4: 0x00007fff9938c099 CoreFoundation`__CFRunLoopRun + 1513
frame #5: 0x00007fff9938b6b2 CoreFoundation`CFRunLoopRunSpecific + 290
frame #6: 0x00007fff8df260a4 HIToolbox`RunCurrentEventLoopInMode + 209
frame #7: 0x00007fff8df25e42 HIToolbox`ReceiveNextEventCommon + 356
frame #8: 0x00007fff8df25cd3 HIToolbox`BlockUntilNextEventMatchingListInMode + 62
frame #9: 0x00007fff92ce3613 AppKit`_DPSNextEvent + 685
frame #10: 0x00007fff92ce2ed2 AppKit`-[NSApplication nextEventMatchingMask:untilDate:inMode:dequeue:] + 128
frame #11: 0x00007fff92cda283 AppKit`-[NSApplication run] + 517
frame #12: 0x00007fff92c7ecb6 AppKit`NSApplicationMain + 869
frame #13: 0x0000000100006942 myApp`main + 34 at main.m:13
frame #14: 0x00007fff9094f7e1 libdyld.dylib`start + 1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T14:41:32.577

*应OP的要求，此答案已从问题中的评论中移出*

您需要确保`NSWindowWillCloseNotification`在销毁窗口之前移除观察者：

```
-(void) windowClosed:(NSNotification*)notification {
    NSWindow *window = [notification object];
    [[NotificationCenter defaultCenter] removeObserver:self
                                                  name:NSWindowWillCloseNotification
                                                object:window];
    [_articleArray removeObject:window];
    NSLog(@"Windows in mem: %lu",_articleArray.count);
    ... 
```

并确保窗口的`isReleasedWhenClosed`属性设置为，`YES`以便在关闭时自行清理。

# c++ - 如何在不向下转换的情况下调用派生类的成员函数

> ID：12932716
> 
> 赞同：2
> 
> 时间：2012-10-17T10:52:33.417
> 
> 标签：c++, inheritance, overriding, abstract-class, virtual-functions

我有消息类和处理器类的雇佣关系。每个处理器都可以即时接收一条或多条消息。由于每条消息都可以有一些不同的属性，我必须将该消息向下转换为具体的消息类，以实际处理它。
因为没有。消息类和进程类，我不想使用dynamic_cast。
我尝试使用以下代码，但这会导致编译时错误。此外，我可以灵活地将处理器指针附加到消息中（如果需要），但反之则不行。

```
class Message  
{  
    public:  
    virtual const Message* const getMessage() const = 0;
};

class MA : public Message  
{  
    public:  
    const MA* const getMessage() const {return this;}
    void printMA() const{std::cout<<"I am MA"<<std::endl;}
};

class MB : public Message  
{  
    public:  
    const MB* const getMessage() const {return this;}
    void printMB() const{std::cout<<"I am MB"<<std::endl;}
};

class Processor  
{  
public:  
    virtual void process(const Message* m) = 0;

};

class PA : public Processor  
{  
    public:  
    void process(const Message* m) {processM(m->getMessage());}

    void processM(const MA*  m) {m->printMA();}
    void processM(const MB*  m) {m->printMB();}
};

int main()  
{  
    Message* m1 = new MA();  
    Message* m2 = new MB();  

    Processor* p1 = new PA();  
    p1->process(m1);
    p1->process(m2);
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T07:13:42.630

我最终使用了“双重调度”来解决这个问题。现在，唯一的事情是，每当我添加新的消息类型时，我都需要在 MessageProcessor 类中添加一个函数。但我认为这很好。

```
class MessageProcessor
{
    public:
        virtual void process(const MA*) const{std::cout<<"unhandled:MA"<<std::endl;}
        virtual void process(const MB*) const{std::cout<<"unhandled:MB"<<std::endl;}
        virtual void process(const MC*) const{std::cout<<"unhandled:MC"<<std::endl;}
};

class Message
{
    public:
    virtual void process(const MessageProcessor*) const = 0;
};

class MA : public Message
{
    public:
    void printMA() const{std::cout<<"I am MA"<<std::endl;}
    virtual void process(const MessageProcessor* p) const {p->process(this);}
};

class MB : public Message
{
    public:
    void printMB() const{std::cout<<"I am MB"<<std::endl;}
    virtual void process(const MessageProcessor* p) const {p->process(this);}
};

class MC : public Message
{
    public:
    void printMC() const{std::cout<<"I am MC"<<std::endl;}
    virtual void process(const MessageProcessor* p) const {p->process(this);}
};

class Processor : public MessageProcessor
{
    public:
    void processM(const Message* m){m->process(this);}

};

class PA : public Processor
{
    public:
    void process(const MA*  m) const {m->printMA();}
    void process(const MB*  m) const {m->printMB();}
};

class PB : public Processor
{
    public:
    void process(const MA*  m) const {m->printMA();}
    void process(const MC*  m) const {m->printMC();}
};

int main()
{
    const Message* m1 = new MA();
    const Message* m2 = new MB();
    const Message* m3 = new MC();

    Processor* p1 = new PA();
    p1->processM(m1);
    p1->processM(m2);
    p1->processM(m3);

    Processor* p2 = new PB();
    p2->processM(m1);
    p2->processM(m2);
    p2->processM(m3);

    return 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T11:09:18.500

最简单的做法是消除`getMessage()`方法，并在 and 中创建`print()`纯虚 in并`Message`覆盖 this 。此外，您可以在中创建一个纯虚方法并在中覆盖它。请参见下面的代码：`MA``MB``process()``Process``PA`

```
#include <iostream>

class Message  
{  
    public:  
    const std::string _id;

    Message(std::string id):_id(id) {}

    virtual void print() const = 0;
    virtual void other_fun() const = 0;
};

class MA : public Message  
{ 
    private: double d_; 
    public:  
    MA():Message("MA"), d_(0.0) {}

    virtual void print() const
    {
        std::cout<<"I am MA"<<std::endl;
        std::cout << "I also have a double" << std::endl; 
    }

    virtual void other_fun() const { std::cout << "I am MA specific" << std::endl; }

    void do_hoops () const { std::cout << "Hoop!"<<std::endl;}
};

class MB : public Message  
{  
    private: int i_;
    public:  
    MB():Message("MB"), i_(0) {}

    virtual void print() const
    {
        std::cout<<"I am MB"<<std::endl;
        std::cout << "I also have an int"<<std::endl;
    }

    virtual void other_fun() const { std::cout << "I am MB specific" << std::endl; }

    void do_twist() const { std::cout << "Twist!"<<std::endl; }
};

class Processor  
{  
public:  
    const std::string _id;
    Processor(std::string id) : _id(id){}

    virtual void process(const Message* m) = 0;

};

class PA : public Processor  
{  
    public:  
    PA():Processor("PA") {}

    virtual void process(const Message* m) 
    {
        m->print();
        m->other_fun();
    }
};

int main()  
{  
    Message* m1 = new MA();  
    Message* m2 = new MB();  

    // generic handling of message
    Processor* p1 = new PA();  
    p1->process(m1);
    p1->process(m2);

    // message specific stuff
    dynamic_cast<MA*>(m1)->do_hoops();
    dynamic_cast<MB*>(m2)->do_twist();
    return 0;
} 
```

在[Ideone](http://ideone.com/kt33y)上输出。

不需要强制转换，将在运行时通过动态调度（虚拟表查找等）选择虚拟函数。`Message`和`Process`是抽象基类（“接口”）`MA`，`MB`和`PA`是实现这些接口的具体类。理想情况下，您还可以将`std::string`状态排除在`Message`界面之外，但这留作练习。

如果您要调用特定于派生类的函数，并且如果您在运行时知道您实际上正在调用这样的类，则需要进行强制转换。这是通过`dynamic_cast`您的基类指针当前指向的特定派生类来完成的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-17T11:29:00.940

您的问题最通用的解决方案可能是[访问者模式](http://en.wikipedia.org/wiki/Visitor_pattern)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-17T12:05:26.567

你有一个设计缺陷。的签名`Processor::process`表明它需要一个`Message`，那么它不应该通过尝试访问不是公共接口的东西来破坏这个承诺`Message`。

您可以创建`Process`一个从用户提供的策略继承的模板类（主机）。这里的策略是具体的`Message`类。像这样的东西：

```
#include <iostream>

struct MA
{
    void print ()
    {  
        std::cout << "MA: I'm the interface" << std::endl;
    }

    void printMA ()
    {  
        std::cout << "MA: I'm special" << std::endl;
    }
};

struct MB
{
    void print ()
    {  
        std::cout << "MB: I'm the interface" << std::endl;
    }

    void printMB ()
    {  
        std::cout << "MB: I'm special" << std::endl;
    }
};

template <typename M>
struct Process :
    public M
{
    void process()
    {  
        M::print();
    }
};

int main ()
{
    Process<MA> p1;
    Process<MB> p2;

    p1.print();     // MA: I'm the interface
    p1.printMA();   // MA: I'm special

    p2.print();     // MB: I'm the interface
    p2.printMB();   // MB: I'm special
} 
```

策略具有`print`定义其接口的方法。他们也有一些特殊的方法，比如`printMA`and `printMB`。主机类（此处`Process`）充当策略的用户界面。它可以使用策略类的接口方法。用户可以通过宿主类调用特殊的策略方法。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-17T12:49:18.747

您遇到了 C++ 的限制。您真正想要的是让多态性处理方法的参数，而不仅仅是调用参数的方法。它通常被称为[双重调度](http://en.wikipedia.org/wiki/Double_dispatch)。不幸的是，虽然有一些解决方法，但我还没有看到任何完美的解决方法。该 Wikipedia 文章显示了普遍接受的解决方法（使用访问者模式）。

# sql-server - 将查询结果发送到 SqlServer 中的文本文件中

> ID：12932718
> 
> 赞同：0
> 
> 时间：2012-10-17T10:52:37.800
> 
> 标签：sql-server

我想将标量变量的结果发送到文本文件中，

我的代码看起来像这样

```
 DECLARE @test varchar(10)

 SET @test='This is sample text'

 EXEC master..xp_cmdshell'bcp ' + @test + ' queryout "D:\sample.txt" -S LocalHost -U 
 sa -P 123 -c  -T -t' 
```

但这显示了以下错误

```
 output
 usage: bcp {dbtable | query} {in | out | queryout | format} datafile
 [-m maxerrors]            [-f formatfile]          [-e errfile]
 [-F firstrow]             [-L lastrow]             [-b batchsize]
 [-n native type]          [-c character type]      [-w wide character type]
 [-N keep non-text native] [-V file format version] [-q quoted identifier]
 [-C code page specifier]  [-t field terminator]    [-r row terminator]
 [-i inputfile]            [-o outfile]             [-a packetsize]
 [-S server name]          [-U username]            [-P password]
 [-T trusted connection]   [-v version]             [-R regional enable]
 [-k keep null values]     [-E keep identity values]
 [-h "load hints"]         [-x generate xml format file]
 NULL 
```

不知道如何在 bcp 命令中给出分配标量变量值的格式 请任何人帮助。

并以这种方式尝试过

```
 Create table #sample
  (
   productid int
  )

  Insert into #sample(productid) values(1001098)

  EXEC master..xp_cmdshell'bcp "select * from #sample" queryout "D:\sample.txt" -S 
  LocalHost -U sa -P 123 -c  -T -t' 
```

它给出了错误

```
 #sample does not exist (in bcp command line) 
```

任何人都可以解决这个问题。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T01:10:59.010

首先，临时表绑定到范围，因此不能在不同的进程 ID 中使用。

但是，您可以声明一个全局临时表（请务必在之后将其删除，并确保使用非常具体的名称以确保您不会干扰其他代码）。

为此，您只需将表名中的“#”加倍。

```
if object_ID('tempdb..##sample') is not null
    drop table ##sample

Create table ##sample
(
 productid int
)

Insert into ##sample(productid) values(1001098) 
```

那么你所要做的就是你的输出。

```
EXEC master..xp_cmdshell'bcp "select * from ##sample" queryout "d:\sample.txt" -w -U sa -P 123 -S server_name\instance_name' 
```

如您所见，我也更改了几个开关。我发现最好使用 -w 来生成 ansi 字符，所以我删除了 -c。-T 用于受信任的连接，但由于您提供了用户名和密码，因此您不需要它。

那你应该没事。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-06T05:33:28.657

测试这个：

```
EXEC xp_cmdshell 'bcp "SELECT *FROM [YOURDATABASE].[dbo].[YOURTABLE]"  queryout "f:\newOUTPUT.txt" -S DESKTOP-A5CFJSH\MSSQLSERVER1 -UYOURUSERNAME -PYOURPASSWORD -n ' 
```

# javascript - 无法在 IE 中导出 Amcharts

> ID：12932729
> 
> 赞同：1
> 
> 时间：2012-10-17T10:53:09.157
> 
> 标签：javascript, internet-explorer, export, amcharts

我正在尝试[将 amcharts 导出到 image](http://blog.amcharts.com/2012/09/exporting-javascript-charts-maps-as.html)。提供的[示例](http://jsfiddle.net/maertz/qf5m3/)适用于 Chrome 和 FF，但不适用于 IE（我尝试了 8 和 9）。

知道发生了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T07:30:44.570

Tetra1337 找到了[答案](http://www.amcharts.com/forum/viewtopic.php?pid=38558#p38558)。有必要将*toString.call()*替换为*String()*。

请参阅[小提琴示例](http://jsfiddle.net/qf5m3/111/)。

# security - 如何保护 Node.JS Web 套接字服务器免受连接炸弹？

> ID：12932731
> 
> 赞同：2
> 
> 时间：2012-10-17T10:53:09.953
> 
> 标签：security, node.js

任何人都可以请求连接到我的由 Node.JS 编写的实时应用服务器，该服务器从 80 端口开始。

这意味着任何人都可以发送大量 curl 请求来炸毁我的套接字服务器，从而导致连接溢出。有什么方法可以检测 curl 请求并拒绝它们？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T20:42:35.793

仅取决于您要阻止的 DDoS 类型。对于大多数情况，HAProxy 或 IPTables 就足够了：
HAProxy [http://www.serverphorums.com/read.php?10,452070](http://www.serverphorums.com/read.php?10,452070)

IPTables：[http ://blog.bodhizazen.net/linux/prevent-dos-with-iptables/](http://blog.bodhizazen.net/linux/prevent-dos-with-iptables/)

# ajax - Wicket 6.1 AjaxEventBehavior 和带有模型的表单组件

> ID：12932733
> 
> 赞同：0
> 
> 时间：2012-10-17T10:53:17.540
> 
> 标签：ajax, wicket, wicket-1.6

```
final Address address = new Addres();
Form form = new Form("addressInputForm");
this.add(form);
form.setOutputMarkupId(true);

FormComponent fc;

fc = new RequiredTextField("street", new AddressModel(new Model(address), AddressModelType.STREET_MODEL));
fc.add(StringValidator.maximumLength(30));
fc.setLabel(new ResourceModel("label.street"));
form.add(fc);

form.add(new AjaxButton("submitAddressInput", form){

        @Override
        protected void onSubmit(AjaxRequestTarget target, Form<?> form){                
            System.out.println(address.toString());
        }

        @Override
        protected void onError(AjaxRequestTarget target, Form<?> form){
            //
        }
    });

AjaxEventBehavior behavior = new AjaxEventBehavior("keyup"){

        @Override
        protected void onEvent(AjaxRequestTarget target) {
            System.out.println(address.toString());
        }
    };

    form.add(behavior); 
```

我创建了一个关于这个问题的小例子。

基本上，当人们在名为“street”的字段中插入一个值时，正如您可以从代码中所期望的那样，它会激活行为并运行 onEvent() 方法。onEvent() 将打印出变量地址。不幸的是 address.street 值为 NULL。所以它打印出“Street：NULL”。

但是当用户单击提交数据的 ajax 按钮时，Wicket 会将表单中的所有数据通过 AddressModel 加载到地址变量中。在那里，最终结果将是例如“街道：邦德街”。

我的问题是，在 AjaxEventBehavior 案例中，如何启动将数据保存到地址变量的过程？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T12:27:55.880

使用将提交组件值的 AjaxFormComponentUpdatingBehavior。

# android - 如何防止 Android WebView 操纵网页？

> ID：12932735
> 
> 赞同：1
> 
> 时间：2012-10-17T10:53:26.487
> 
> 标签：android, security, android-webview

如此处所示[，](https://stackoverflow.com/questions/2219074/in-android-webview-am-i-able-to-modify-a-webpages-dom)可以： 1\. 使用 setJavaScriptEnabled=true 创建一个 Android WebView 2\. 加载 URL 3\. 覆盖 onPageFinished 并更改向用户显示的网页

现在，网页所有者是否有可能实现任何服务器端来防止这种情况发生？风险在于恶意应用程序可能会通过修改网页以获取恶意手段来欺骗用户......

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T10:57:36.763

确实不可能阻止 Web 响应被修改。您只能考虑使欺骗者难以对其进行编辑。

# qt - QtDesigner：设置 QLabel 的固定大小

> ID：12932737
> 
> 赞同：2
> 
> 时间：2012-10-17T10:53:32.767
> 
> 标签：qt, qt4, qt-designer

我在 QtDesigner 表单上有一个固定大小的标签。标签用于显示图像，假设它用于显示 100x100 像素的缩略图。

我可以设置标签的大小，但是当我将标签放在某个布局管理器中时，标签会调整大小以占据整个空间。即使我通过表格中的表格>布局来做到这一点。标签的尺寸缩小了。

我相信这是一些极端情况，因为标签通常不用于做此类事情（尽管它们旨在能够显示图像）。是否有解决方法可以避免标签在布局中的大小发生变化？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-17T10:59:49.460

您可以将水平和垂直[尺寸策略](https://qt-project.org/doc/qt-4.8/qwidget.html#sizePolicy-prop)设置为固定或额外设置最大[高度](https://qt-project.org/doc/qt-4.8/qwidget.html#maximumHeight-prop)和[宽度](https://qt-project.org/doc/qt-4.8/qwidget.html#maximumWidth-prop)。无论是在代码中还是在设计器中。

# excel - 将特定数据从一张纸复制到另一张纸

> ID：12932741
> 
> 赞同：1
> 
> 时间：2012-10-17T10:53:46.487
> 
> 标签：excel, pivot-table, worksheet-function, array-formulas, vba

主表上的 2 列：

```
col1      col2
Apple     Fruit
Spinach   Veg
Orange    Fruit
Potatoe   Veg   
Pear      Fruit
Bannana   Fruit
Carrot    Veg
Potataoe  Veg 
```

假设我想将所有`Fruit`数据复制到另一张纸上，并将所有`Veg`数据复制到第三张纸上。有没有办法做到这一点？它需要一个宏还是我可以以某种方式做一个`VLOOKUP`？

我还需要它是动态的，所以如果添加了新行，相应的工作表就会更新。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T14:39:06.160

你可以使用这个可怕的公式：

```
=INDEX($B$2:$B$9, SMALL(IF("veg"=$A$2:$A$9, ROW($A$2:$A$9)-MIN(ROW($A$2:$A$9))+1, ""), ROW(A1))) 
```

使用 Ctrl+Shift+Enter 将其作为数组公式输入。

![可怕的怪物公式](../Images/42b40e6fa4eafd6ca4d1a13d7c776003.png)

我在这里找到了公式：http: [//www.get-digital-help.com/2009/10/25/how-to-return-multiple-values-using-vlookup-in-excel/](http://www.get-digital-help.com/2009/10/25/how-to-return-multiple-values-using-vlookup-in-excel/)

这可能不是这个公式的最佳版本或最优雅的版本（这是一个常见的公式任务），但它会完成工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T18:17:58.647

我会使用数据透视表（使用 Excel 2007），但每次修改/扩展源时都需要刷新并密切关注表/数据范围：不要缺少任何添加：

![SO12932741 示例](../Images/2476c405e4b636f7f8e93775a3e315e4.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T00:15:43.560

*   右键单击您的工作表选项卡
*   查看代码
*   复制并粘贴下面的代码

每当更改 B 列时，代码

1.  为“水果”自动筛选列 B，然后将记录复制到工作表 2 列 A:B
2.  为“Veg”自动筛选列 B，然后将记录复制到工作表 2 列 A:B

**代码**

```
Private Sub Worksheet_Change(ByVal Target As Range)
Dim rng1 As Range
Dim ws1 As Worksheet
Dim ws2 As Worksheet
Set rng1 = Intersect([B:B], Target)
If rng1 Is Nothing Then Exit Sub
Set ws1 = Sheets(2)
Set ws2 = Sheets(3)
ws1.[A:B].ClearContents
ws2.[A:B].ClearContents
Application.ScreenUpdating = False
ActiveSheet.AutoFilterMode = False
With ActiveSheet.Range("A:B")
.AutoFilter Field:=2, Criteria1:="Fruit"
.Copy ws1.[a1]
.AutoFilter Field:=2, Criteria1:="Veg"
.Copy ws2.[a1]
End With
ActiveSheet.AutoFilterMode = False
Application.ScreenUpdating = True
End Sub 
```

# ios-simulator - iOS 模拟器安装应用程序失败

> ID：12932750
> 
> 赞同：138
> 
> 时间：2012-10-17T10:54:11.873
> 
> 标签：ios-simulator, cordova, xcode4.5

我创建了一个 Cordova 2.1.0 应用程序，前 2-3 次运行良好。但是现在当我试图通过终端运行它时，它给了我以下错误。我没有改变任何东西。

```
Ankurs-Mac-mini:~ ankur$ /Users/ankur/Desktop/CordovaSMS/cordova/emulate 
Ankurs-Mac-mini:~ ankur$ 2012-10-17 16:11:08.695 ios-sim[7032:507] stderrPath: 
/Users/ankur/Desktop/CordovaSMS/cordova/console.log
2012-10-17 16:11:08.698 ios-sim[7032:507] stdoutPath: 
/Users/ankur/Desktop/CordovaSMS/cordova/console.log
[DEBUG] Session could not be started: Error Domain=DTiPhoneSimulatorErrorDomain 
Code=1 "iOS Simulator failed to install the application." UserInfo=0x7fc643902320 
{NSLocalizedDescription=iOS Simulator failed to install the application.,
DTiPhoneSimulatorUnderlyingErrorCodeKey=-1} 
```

任何帮助，将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：280
> 
> 时间：2012-10-22T07:37:01.040

**解决了问题**

删除内容`~/Library/Application Support/iPhone Simulator`并重新运行项目解决了这个问题。或者您可以简单地重置模拟器的内容和设置。

![在此处输入图像描述](../Images/406d8100d52a2babb2febd7fd3ce3eb6.png)

* * *

## 回答 #2

> 赞同：101
> 
> 时间：2013-06-28T12:17:56.833

尝试手动启动 iOS 模拟器并从“iOS 模拟器”菜单中单击“重置内容和设置”，然后关闭并重新构建您的应用程序。

![在此处输入图像描述](../Images/b378c7c15864ee3a0b8b3f93de5004d8.png)

* * *

## 回答 #3

> 赞同：33
> 
> 时间：2013-10-03T09:48:37.423

我的解决方案是：

![重置](../Images/6bc3941d1c284e1b99ade9a1e3850819.png)

从菜单、iOS 模拟器、重置内容和设置。关闭 XCode 5.0：关闭项目并从 Dock 关闭它，然后重新打开项目并再次启动，就像在 Windows 中一样 :)

* * *

## 回答 #4

> 赞同：20
> 
> 时间：2013-10-14T16:33:08.417

我尝试了上面提到的所有方法，但没有任何效果。我的问题是特定于 iOS 7 的。我终于能够通过在 -Info.plist 文件中为**Bundle 版本字符串短 (CFBundleShortVersionString)分配一个****非空值**来解决这个问题。看起来 iOS 7 不喜欢内部版本号的空值。我有一个脚本，每次构建项目时都会自动将包编号增加 1，因此该字段为空。我只是在那里分配了一个虚拟值以使其正常工作。

 *** * *

## 回答 #5

> 赞同：12
> 
> 时间：2014-03-21T03:10:42.957

在这里解决：[https ://stackoverflow.com/a/16279286/1927253](https://stackoverflow.com/a/16279286/1927253)

我将一个名为“Resources”的文件夹复制到 XCode 4.6.2 中。当 XCode 询问时，我为任何添加的文件夹创建了文件夹引用。

每次我这样做时，我都必须转到派生应用程序目录，并删除我的项目的构建目录以使其再次工作。

解决方案：不要通过引用将文件夹复制到名为“Resources”的 XCode 中。将其重命名为 Resources 以外的其他名称。

非常烦人的错误。

* * *

## 回答 #6

> 赞同：12
> 
> 时间：2013-09-19T09:31:16.143

您还可以从模拟器中删除该应用程序。

这在 iOS6.1 中对我有用

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2014-03-18T17:34:49.507

不幸的是，这些解决方案都没有解决我的问题。我做了一切，甚至重新启动了我的mac，但它仍然失败。实际上解决我的问题的是去管理器并删除派生数据和快照。![在此处输入图像描述](../Images/3eab16085c829aae6cd073f098ceaa59.png)

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2013-09-13T05:17:33.193

只需重置您的模拟器并重新运行您的项目

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2013-10-14T13:56:58.643

安装 XCode 5 后遇到同样的问题。没有 iOS 6.1 Sim 或 SDK。获得了这些。尝试在 iOS6.1 Sim 下运行应用程序并显示安装失败消息。阅读完上述所有帖子后，我决定简单地从模拟器中删除应用程序并重新安装，从项目窗口重新运行，这为我解决了问题。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2013-10-23T20:50:53.017

我尝试了所有这些事情以及更多，包括重新安装 Xcode 5 和核对每个 xcode 和模拟器首选项/应用程序支持文件，但没有运气。

然后为了它，我改变了我的短捆绑版本字符串（它已经有一个值，它不是空的），它立即启动。

3小时过去了，但是是的

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2014-08-01T02:18:47.393

如果您将“Build”留空，则在 iOS 7.0 上会出现此错误。输入内部版本号！

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2014-01-31T00:08:04.563

以上都对我不起作用，我终于将我的 info.plist 与另一个项目进行了比较，发现我以某种方式删除了“可执行文件 = ${EXECUTABLE_NAME}”键/值对，替换它为我解决了问题。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2013-04-21T16:44:37.397

我寻找的所有答案都不适合我！最后使它工作的唯一方法如下

*   1.在tiapp.xml中查看项目使用的钛版本
*   2.右键单击项目资源管理器窗口中的项目。
*   3.选择属性
*   4.选择项目构建路径。选择 Titanium Mobile SDK 3.* 所有版本。
*   5.现在点击应用并重新运行项目。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2014-10-17T01:09:21.230

在使用 Xcode 版本 6.0.1 (6A317) 和支持 8.0 的 iOS SDK 的 Mavericks 10.9.5 上，最初所有版本 8 的模拟器都出现此错误。上面的所有建议都不适合我。所以去 Xcode->Preferences->Downloads 并在组件部分看到可安装（但未安装）是 iOS Simulators 7.1 和/或 7.0。继续安装 7.1 Simulators 并在 Product->Destination list Simulators 版本 8.0 和 7.1 上获得额外的名称，使用 8.0 仍然有相同的错误，但 7.1 Simulators 都可以工作。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2014-10-13T15:06:25.600

I tried everything mentioned above and nothing worked.

Finally the only way to make it work was unsetting **DYLD_INSERT_LIBRARIES=/usr/lib/libimckit.dylib**

How I did this:

1.  Open terminal and typing "sudo vi /etc/launchd.conf"
2.  Changing

**"setenv DYLD_INSERT_LIBRARIES /usr/lib/libimckit.dylib"**

to

**"unsetenv DYLD_INSERT_LIBRARIES /usr/lib/libimckit.dylib"**

3.  Save changes
4.  Reboot your system

In this post [1] explain what DYLD_INSERT_LIBRARIES is for

[1] [https://stackoverflow.com/a/26053165/2091181](https://stackoverflow.com/a/26053165/2091181)

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2014-02-06T23:54:38.247

对我有用的是简单地删除旧版本的应用程序，该版本是在早期版本的 Xcode（可能是 4，现在运行 5）中从模拟器（轻按、抖动、x）中创建的。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2014-07-23T02:32:45.863

我在尝试为 Facebook 应用程序批准创建构建时遇到了这个问题。我发现由于某种原因，当我使用以下命令行时：

`xcodebuild -arch i386 -sdk iphonesimulator7.1 -scheme Mana -configuration Release`

这些文件最终没有出现`[project root]/build/...`（如[Facebook 上的说明](https://developers.facebook.com/docs/ios/creating-ios-simulator-build-for-review)所建议的那样），而是在 ~/Library/Developer/Xcode/DerivedData/[app name + unique identifier]/Build/Products.

我不确定这里到底发生了什么（任何知道更多的人请赐教！）但我能够在模拟器上运行 DerivedData 目录中的文件。希望他们也能为 Facebook 工作！**

# function - 如何在 emacs lisp 函数中进行搜索

> ID：12932751
> 
> 赞同：0
> 
> 时间：2012-10-17T10:54:11.810
> 
> 标签：function, search, emacs, lisp, yank

```
(defun search-for-what-is-just-killed () 
(interactive)
(search-forward latestkillringvariable? nil t)
) 
```

如何在 emacs lisp 函数中使用“yank”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T11:58:48.200

您可以直接访问`kill-ring`列表以访问最新的杀戮：

```
 (substring-no-properties (car kill-ring)) 
```

这`substring-no-properties`一点很重要，因为文本保留在具有其他属性的杀伤环中（例如特定于特定模式的字体，您可能想要剥离这些属性）。

# java - 运行 Universal Image Downloader 示例时出现 iIlegalArgument 异常

> ID：12932753
> 
> 赞同：0
> 
> 时间：2012-10-17T10:54:19.200
> 
> 标签：java, android, universal-image-loader

我正在尝试运行通用图像下载器示例，在导入和修复项目属性后，运行它时出现此错误。

```
UNEXPECTED TOP-LEVEL EXCEPTION:
java.lang.IllegalArgumentException: already added: Lcom/nostra13/universalimageloader/cache/disc/BaseDiscCache;
at com.android.dx.dex.file.ClassDefsSection.add(ClassDefsSection.java:123)
at com.android.dx.dex.file.DexFile.add(DexFile.java:163)
at com.android.dx.command.dexer.Main.processClass(Main.java:486)
at com.android.dx.command.dexer.Main.processFileBytes(Main.java:455)
at com.android.dx.command.dexer.Main.access$400(Main.java:67)
at com.android.dx.command.dexer.Main$1.processFileBytes(Main.java:394)
at com.android.dx.cf.direct.ClassPathOpener.processArchive(ClassPathOpener.java:245)
at com.android.dx.cf.direct.ClassPathOpener.processOne(ClassPathOpener.java:131)
at com.android.dx.cf.direct.ClassPathOpener.process(ClassPathOpener.java:109)
at com.android.dx.command.dexer.Main.processOne(Main.java:418)
at com.android.dx.command.dexer.Main.processAllFiles(Main.java:329)
at com.android.dx.command.dexer.Main.run(Main.java:206)
at sun.reflect.GeneratedMethodAccessor138.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
at java.lang.reflect.Method.invoke(Unknown Source)
at com.android.ide.eclipse.adt.internal.build.DexWrapper.run(DexWrapper.java:180)
at com.android.ide.eclipse.adt.internal.build.BuildHelper.executeDx(BuildHelper.java:703)
at com.android.ide.eclipse.adt.internal.build.builders.PostCompilerBuilder.build(PostCompilerBuilder.java:577)
at org.eclipse.core.internal.events.BuildManager$2.run(BuildManager.java:728)
at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
at org.eclipse.core.internal.events.BuildManager.basicBuild(BuildManager.java:199)
at org.eclipse.core.internal.events.BuildManager.basicBuild(BuildManager.java:321)
at org.eclipse.core.internal.events.BuildManager.build(BuildManager.java:396)
at org.eclipse.core.internal.resources.Project$1.run(Project.java:618)
at org.eclipse.core.internal.resources.Workspace.run(Workspace.java:2344)
at org.eclipse.core.internal.resources.Project.internalBuild(Project.java:597)
at org.eclipse.core.internal.resources.Project.build(Project.java:124)
at com.android.ide.eclipse.adt.internal.project.ProjectHelper.doFullIncrementalDebugBuild(ProjectHelper.java:1000)
at com.android.ide.eclipse.adt.internal.launch.LaunchConfigDelegate.launch(LaunchConfigDelegate.java:147)
at org.eclipse.debug.internal.core.LaunchConfiguration.launch(LaunchConfiguration.java:855)
at org.eclipse.debug.internal.core.LaunchConfiguration.launch(LaunchConfiguration.java:704)
at org.eclipse.debug.internal.ui.DebugUIPlugin.buildAndLaunch(DebugUIPlugin.java:1047)
at org.eclipse.debug.internal.ui.DebugUIPlugin$8.run(DebugUIPlugin.java:1251)
at org.eclipse.core.internal.jobs.Worker.run(Worker.java:53)
[2012-10-17 16:18:38 - com.nostra13.example.universalimageloader.HomeActivity] Dx 2 errors; aborting
[2012-10-17 16:18:38 - com.nostra13.example.universalimageloader.HomeActivity] Conversion to Dalvik format failed with error 1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T11:37:17.867

删除Java 构建路径中对**universal-image-loader.jar的引用。**Jar 会自动附加到项目中（如果它位于**libs**文件夹中）。

# javascript - Js打印功能在ie9中不起作用

> ID：12932755
> 
> 赞同：0
> 
> 时间：2012-10-17T10:54:25.517
> 
> 标签：javascript, jquery, internet-explorer, printing

我有下面的代码来打印在 fancybox 中加载的文本。它在 chrome 和 firefox 中完美运行。但在 ie9 中它会打开一个空白窗口并关闭。然后什么也没有发生。

```
jQuery(function($) {
    $('a.print').click(function() {
        var print_button = '';
        var print_page = window.open('', 'Print', 'width=600,scrollbars=yes, height=700');
        var html = '<h2><?php print t("Term & Condition"); ?></h2> <br/>' + '<?php echo $body_content; ?>';
        print_page.document.open();
        print_page.document.write(html);
        print_page.print();
        print_page.close();
        return false;
    });
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T11:10:04.817

更改以下内容：

```
print_page.document.write(html);
print_page.print(); 
```

进入：

```
print_page.document.write(html);
print_page.document.close();
print_page.focus();
print_page.print(); 
```

[JSF](http://jsfiddle.net/wguQf/1/)中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T11:06:06.270

尝试`<meta http-equiv="X-UA-Compatible" content="IE8"/>`在 head 部分添加，以便页面以 IE8 模式呈现并检查是否有帮助。

# mysql - mysql允许选择无效日期

> ID：12932760
> 
> 赞同：9
> 
> 时间：2012-10-17T10:54:39.250
> 
> 标签：mysql, sql

出于某种原因，我什至无法在我的表格中选择无效日期。如何强制选择？我刚收到：

```
select * from table
>> Mysql2::Error: Invalid date: 1900-00-00 
```

我不是要插入，只是选择。我可以在选择查询中设置允许无效日期吗？

```
mysql --version
mysql  Ver 14.14 Distrib 5.1.61, for debian-linux-gnu (i686) using readline 6.1

mysql> select @@global.sql_mode;
+-------------------+
| @@global.sql_mode |
+-------------------+
|                   | 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-04-11T22:37:34.810

这就是我忽略无效日期的方法：

```
SET SQL_MODE='TRADITIONAL,ALLOW_INVALID_DATES'; 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2017-01-21T15:37:03.997

*   在命令行中登录mysql`mysql -u root -p`
*   输入您的密码
*   查看当前`sql-modes`使用`SELECT @@GLOBAL.sql_mode;`
*   复制当前模式（根据需要添加或删除模式）并粘贴到下一步。
*   设置`sql-modes`使用`SET GLOBAL sql_mode = 'ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,ERROR_FOR_DIVISION_BY_ZERO,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION,ALLOW_INVALID_DATES';`
*   这将添加`ALLOW_INVALID_DATES`和删除两者`NO_ZERO_DATE, NO_ZERO_IN_DATE`
*   重启 MySQL 服务器`/etc/init.d/mysql start`

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2017-02-24T16:35:27.603

## SQL Server 模式 [重置配置文件]

[解决方案链接](https://www.sitepoint.com/quick-tip-how-to-permanently-change-sql-mode-in-mysql/)
- 从命令行`which mysqld`
- 应该得到类似`/usr/sbin/mysqld`二进制文件的位置
- 整理配置文件的路径`/usr/sbin/mysqld --verbose --help | grep -A 1 "Default options"`
- 您的 bash 响应应该如下所示：`Default options are read from the following files in the given order: /etc/my.cnf /etc/mysql/my.cnf ~/.my.cnf`
- 按顺序查看文件以查看在哪里进行更改（如果文件不存在，则不会被引用）。
- 查找您当前的模式。打开终端并登录 mysql 数据库`mysql -u database_user -p -e "select @@sql_mode"`
- 通过将以下代码添加到配置文件来修改要更改的 SQL 模式。 - 保存配置文件并重启mysql服务
`[mysqld]
sql-mode = "STRICT_TRANS_TABLES,ERROR_FOR_DIVISION_BY_ZERO,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION,ALLOW_INVALID_DATES"`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-07-16T05:02:05.937

这个解决了我的问题。我在本地 MySQL 5.7 ubuntu 18.04 中进行了测试。

```
set global sql_mode="NO_ENGINE_SUBSTITUTION"; 
```

***在全局运行此查询之前，我在/etc/mysql/conf.d***目录中添加了一个 cnf 文件 。cnf 文件名为***mysql.cnf***和代码

```
[mysqld]
sql_mode=STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ALLOW_INVALID_DATES,ERROR_FOR_DIVISION_BY_ZERO,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION 
```

然后我重启mysql

```
sudo service mysql restart 
```

希望这可以帮助某人。

# css - CSS first-child 被 LESS 覆盖

> ID：12932763
> 
> 赞同：1
> 
> 时间：2012-10-17T10:54:43.260
> 
> 标签：css, less, css-selectors

我有以下 CSS.less

```
header.section-header ul {
width: 100%;
list-style-type: none;
li {
    display: inline-block;
    padding-right: 10px;
    .bordered(0,0,0,@compcolor);
    margin-right: 10px;
    .font-size(12);
    color: @compcolor;
}
li:first-child {
    .bordered(0,0,0,0);
}
} 
```

这是一个简单的水平列表。我希望关闭第一项的边框，但它没有显示在 FF 或 Chrome 中。该项目出现但没有特异性。有任何想法吗？

编辑：混合是

```
//.bordered(COLOR, COLOR, COLOR, COLOR);

.bordered(@top-color: @bordercolor, @right-color: @bordercolor, @bottom-color:       @bordercolor, @left-color: @bordercolor) {
border-top : solid 1px @top-color;
border-left : solid 1px @left-color;
border-right : solid 1px @right-color;
border-bottom : solid 1px @bottom-color; } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T10:56:48.350

`0`不是有效的颜色值。也许你的意思是`transparent`？

```
li:first-child {
    .bordered(0,0,0,transparent);
} 
```

（您必须具有零边框宽度或边框样式`none`才能真正禁用边框，但很难弄清楚您的`.bordered()`函数到底在做什么。）

# android - 如何检测我的应用程序的 UI 已移至后台？

> ID：12932764
> 
> 赞同：1
> 
> 时间：2012-10-17T10:54:46.003
> 
> 标签：android

是否有一种通用方法可以通过按“返回”、“主页”或选择其他以前打开的应用程序之一来了解应用程序切换到后台？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T10:55:50.003

您当前的活动`onPause()`将被调用。[参考](http://developer.android.com/reference/android/app/Activity.html#ActivityLifecycle)

# objective-c - UiimageView 适配在一个 uiview 中

> ID：12932772
> 
> 赞同：2
> 
> 时间：2012-10-17T10:55:09.840
> 
> 标签：objective-c, ios, uiimageview, scale, contentmode

我的 UIImageView 有一点问题。我希望 UIImageView 的内容不会溢出到 UIView。

当我尝试这段代码时，我得到了这个结果，但我不会在区域条纹中显示图像。

```
UIView *view = [[UIView alloc] init];
[view setFrame:CGRectMake(10, 0, 300, 100)];
[self.view addSubview:view];

UIImageView *viewimageArticle = [[UIImageView alloc] initWithFrame:CGRectMake(0, 0, 300, 100)];
viewimageArticle.image =[UIImage imageNamed:@"article1.jpeg"];
viewimageArticle.contentMode = UIViewContentModeScaleAspectFill;
viewimageArticle.frame = CGRectMake(0, 0, 320, 100);
[view addSubview:viewimageArticle]; 
```

![在此处输入图像描述](../Images/2b810d86a84c012fdbfbc1cac6e4b7fe.png)

我尝试了很多属性，“contentMode”和“autorezingMask”，但我没有很好的结果。

谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T10:58:03.887

设置`clipsToBounds = YES`在视图

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T11:00:31.767

利用

```
view.clipsToBounds = YES; 
```

这会导致其子视图被裁剪到接收器边界。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T11:04:59.780

我不是 100% 清楚您想要实现的目标，但您想要的可能`UIViewContentModeScaleAspectFit`不是`UIViewContentModeScaleAspectFill`.

此外，您`UIImageView`首先在 300x100 中创建框架并重置为 320x100。我相信重置部分不是你的意图。

# mysql - MySQL - 为每个表选择多个表和条件的计数

> ID：12932784
> 
> 赞同：0
> 
> 时间：2012-10-17T10:55:36.137
> 
> 标签：mysql, count

我有一个相当简单的查询：

我有三个表，我想返回每个表使用的行数（具有外键）。

这是我的第一次尝试：

```
 SELECT 
        COUNT(at.code) AS atcount, 
        COUNT(de.code) AS decount, 
        COUNT(ch.code) AS chcount 
    FROM 
        table_at at, 
        table_ch ch, 
        table_de de 
    WHERE 
        at.teilnehmerid != 0
    AND
        de.teilnehmerid != 0
    AND
        ch.teilnehmerid != 0 
```

但这不知何故不起作用，它不会产生任何错误，但只是不考虑条件。我还考虑过子查询，例如：

```
 SELECT 
        (SELECT COUNT(code) FROM table_at at WHERE at.teilnehmerid != 0), 
        (SELECT COUNT(code) FROM table_de de WHERE de.teilnehmerid != 0), 
        (SELECT COUNT(code) FROM table_ch ch WHERE ch.teilnehmerid != 0) 
```

但是我对这种尝试相当愚蠢的事情感到困惑……那`FROM`呢？当然我得到一个错误：`Operand should contain 1 column(s)`- 但我只想要计数......

我还阅读了有关 Joins 的信息，但不明白如何在我的主要语句中获取`COUNT`via a 。`JOIN``SELECT`

是的，我在这里阅读了其他一些问题，但没有看到适用于这两个问题的答案：

*   选择多个表

和

*   `COUNT`在多张桌子上做

如果我错了，只是没有得到正确的答案，也许更好的解释会有所帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T11:02:27.003

`COUNT (x)`非常不同`COUNT(DISTINCT x)`。前者计算所有具有多重性的值，后者仅计算不同的值。也许后者是您想要使用的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T11:03:00.170

您可能能够连接表以获得结果，但是如果看不到表结构以及它们之间的关系是很困难的。

您可以使用以下方式获得结果`UNION ALL`：

```
select count(code) CodeCount, 'atcount' col
from table_at
where teilnehmerid != 0
union all
select count(code) CodeCount, 'chcount' col
from table_ch
where teilnehmerid != 0
union all
select count(code) CodeCount, 'decount' col
from table_de
where teilnehmerid != 0 
```

这将为您提供单列中的值，然后如果您希望它们连续出现，您可以使用以下内容：

```
select 
    max(case when x.col = 'atcount' then x.codecount else 0 end) atcount,
    max(case when x.col = 'chcount' then x.codecount else 0 end) chcount,
    max(case when x.col = 'decount' then x.codecount else 0 end) decount
from 
(
    select count(code) CodeCount, 'atcount' col
    from table_at
    where teilnehmerid != 0
    union all
    select count(code) CodeCount, 'chcount' col
    from table_ch
    where teilnehmerid != 0
    union all
    select count(code) CodeCount, 'decount' col
    from table_de
    where teilnehmerid != 0
) x 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-17T11:11:28.717

由于`COUNT()`返回单行单列；怎么样，

```
SELECT * 
FROM
(SELECT COUNT(code) FROM table_at at WHERE teilnehmerid != 0) as T1, 
(SELECT COUNT(code) FROM table_de de WHERE teilnehmerid != 0) as T2, 
(SELECT COUNT(code) FROM table_ch ch WHERE teilnehmerid != 0) as T3 
```

连接将返回一行的位置。

# javascript - Bootstrap Carousel 无法正常工作

> ID：12932791
> 
> 赞同：1
> 
> 时间：2012-10-17T10:56:02.787
> 
> 标签：javascript, html, twitter-bootstrap

```
<div class="container-fluid">
  <div class="row-fluid">
<div class="span8">
<div id="myCarousel" class="carousel  slide">

  <!-- Carousel items -->
  <div class="carousel-inner">
    <div class="active item"><img src="01.jpg" alt=""></div>
    <div class="item"><img src="02.jpg" alt=""></div>
    <div class="item"><img src="03.jpg" alt=""></div>
    <div class="item"><img src="02.jpg" alt=""></div>
    <div class="item"><img src="03.jpg" alt=""></div>
  </div>

  <!-- Carousel nav -->
  <a class="carousel-control left" href="#myCarousel" data-slide="prev">&lsaquo;</a>
  <a class="carousel-control right" href="#myCarousel" data-slide="next">&rsaquo;</a>
</div>
</div>
  </div>
</div> 
```

我正在根据[这个主题](http://bootstrapwp.rachelbaker.me/)在现场工作。当我放置 Bootstrap Carousel 时，它会跳到最后一帧并且什么也没有显示。我已经阅读了很多教程并且无法理解我做错了什么。我按照主题说明进行操作。

我的网站在[这里](http://shopogolick.16mb.com)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T11:04:16.323

在提供的 URL 中，您有一个空`p`元素`.carousel-inner`。尝试删除它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T12:09:59.190

看起来`<p>`标签出现问题...`<p>`标签最后以每个“img 和 div”标签结束。尝试在文件中查找`<p>`标签并将其删除。

# java - Spring MVC 简单案例

> ID：12932794
> 
> 赞同：-1
> 
> 时间：2012-10-17T10:56:07.317
> 
> 标签：java, spring-mvc, netbeans

试图理解示例代码......我从我的 AthuenticationController 成功返回了一个模型视图，如下所示

```
modelAndView = new ModelAndView("redirect:/home/");
....
return modelAndView; 
```

并且我的浏览器网址更改为，`/home/`但显示为`404 page`

我有一个 HomePageController，它有方法

```
@RequestMapping(method = RequestMethod.GET)
    public String loadHome 
```

和

```
@RequestMapping(method = RequestMethod.GET, value = "/main")
    public String reloadHome 
```

但是 System.out.println("Message") 没有在上述任何方法中执行。经过身份验证后，我想加载 home.jsp 页面吗？它在 WEB-INF/jsp/...

```
<bean id="viewResolver"
        class="org.springframework.web.servlet.view.InternalResourceViewResolver">
        <property name="prefix" value="/WEB-INF/jsp/"></property>
        <property name="suffix" value=".jsp"></property>
    </bean> 
```

来自 WEB-INF/jsp/ 的 login.html 页面加载正常

这是更新现在它正在浏览器中打开 WEB-INF/jsp/home.jsp 页面，但 url 仍然是旧的......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T10:58:37.900

您需要更改请求映射

```
@RequestMapping(value = "/home", method = RequestMethod.GET)
public String loadHome 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T11:27:40.423

而不是这个

```
modelAndView = new ModelAndView("redirect:/home/");
....
return modelAndView; 
```

试试这个：

```
modelAndView = new ModelAndView("home");
....
return modelAndView; 
```

# jquery - ServiceStack 反序列化在 jQuery 请求上失败，但不是 C# 客户端

> ID：12932795
> 
> 赞同：3
> 
> 时间：2012-10-17T10:56:08.073
> 
> 标签：jquery, json, servicestack

我的前端实现者遇到了一个非常复杂的嵌套 DTO 的奇怪问题。

这是他通过jquery ajax调用传递的json

```
{"Id":"507e7e5aa6305825c012c606","Name":"test fried chicken","Description":"why you no work","Servings":4,"Author":"unit test","Steps":[{"Instructions":"put chicken in egg","Ingredients":[{"PreparationId":"507e7e34a6305825c012c601","MeasureId":"kilogram","Quantity":2,"MeasureType":"weight"},{"PreparationId":"507e7e36a6305825c012c605","MeasureId":"gram","Quantity":100,"MeasureType":"weight"}]},{"Instructions":"put in flour and cook it up","Ingredients":[{"PreparationId":"507e7e35a6305825c012c603","MeasureId":"gram","Quantity":100,"MeasureType":"weight"}]}]} 
```

这将作为 uri/recipes 的 PUT，然后在请求端转换为 DTO 的默认实例（实际上没有任何信息被反序列化）。

如果我从请求中获取完全相同的 Json 并运行 C# 代码

```
var d = new ServiceStack.Text.JsonSerializer<RecipeDTO>();
var re = d.DeserializeFromString(theJson);
var client = new JsonServiceClient(uri);
client.Put<RecipeDTOResponse>("/recipes", re); 
```

然后它工作。任何想法为什么会有差异？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T22:16:48.420

在记录来自网页和 C# 客户端的 IHttpRequest 后，我​​注意到 jquery 调用的 ContentType 是**application/x-www-form-urlencoded**而 c# 是**application/json**。

在 jquery 调用中更改它解决了这个问题。

# android - 如何在 android 上将 qt(necessitas) 与 SDL 结合？

> ID：12932798
> 
> 赞同：0
> 
> 时间：2012-10-17T10:56:14.153
> 
> 标签：android, qt, android-ndk

我通过 necessitas 端口在 android 上使用 Qt。我正在尝试将 Qt 与 SDL 结合起来。当使用调用 SDL (SDL_Init) 编译此类项目时，编译器给我错误：`JNI_OnLoad' 的多个定义。

日志：/mnt/sdcard/Android/data/com.n0n3m4.droidc/files/gcc/bin/../lib/gcc/arm-linux-androideabi/4.7.1/../../../。 ./arm-linux-androideabi/lib/libSDL.a(SDL_andvideo.o): 在函数`JNI_OnLoad': SDL_andvideo.c:(.text+0xddc): multiple definition of`JNI_OnLoad' qtmain_android.o:qtmain_android.cpp:(.text.JNI_OnLoad+0x0): 这里首先定义

有一些简短的方法可以解决这个问题吗？

具体：在 C4droid 上编译（来自 google play with gcc 的 ide，necessitas Qt(gui + core)，SDL 插件）

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T21:59:12.140

您应该询问 c4droid 的开发人员。看来他是个乐于助人的人。他在 google play 上说，如果你遇到问题，你应该联系他。

# java - 在 spring/hibernate 应用程序中提高本机 sql 查询的性能？

> ID：12932799
> 
> 赞同：0
> 
> 时间：2012-10-17T10:56:15.993
> 
> 标签：java, sql, oracle, spring, hibernate

我在下面`native sql query`。我正在使用`Oracle`数据库。

```
select
         * 
     from
         (select
             row_.*,
             rownum rownumber 
         from
             (select
                 colmn1,
                 colmn2,
                 colmn3,
                 colmn4,
                 colmn5,
                 colmn6,
                 from
                 Table5
             where
                 colmn5 In (
                    '19901','10001'
                 ) 
             order by
                colmn1 ) row_ ) 
         Where
             Rownumber <= 50000
             and rownumber > 0 
```

上面的查询返回`50000`记录。如果我执行上面的查询`sqldeveloper`，它只需要`30 seconds`但在 spring 和 hibernate 集成应用程序中需要`15 minutes`。我怎样才能提高性能？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T06:29:58.300

你有两个内部选择。内部选择总是可能导致性能不佳，因为它可能会阻碍数据库找到最佳搜索策略。

据我所知，您仅使用内部选择来处理行号。如果您只使用最内部的选择并在 java/hibernate 级别处理行号，那么您将获得更好的性能。

你只使用这个选择

```
select colmn1, colmn2, colmn3, colmn4, colmn5, colmn6,
   from Table5
   where colmn5 In ('19901','10001') 
   order by colmn1 
```

其中，由于它没有任何数据库特性，因此可以更容易地被 HQL 语句替换，从而使您的程序独立于使用的数据库（Java 类和属性名称应替换为真实名称）：

```
from Table5_Class
   where colmn5_Prop in ('19901','10001') 
   order by colmn1_prop 
```

然后你用`Where Rownumber <= 50000 and rownumber > 0`hibernate方法替换你的where条件`Query.setMaxResults(50000)`并且`Query.setFirstResult(0)`（备注：setFirstResult（0）是多余的，因为第0行总是第一个，但我想你也想获得接下来的50000行，然后你可以使用setFirstResult（n ））。

如果您需要将行号作为参数，那么您可以为此使用结果列表的索引。

P.S：我无法告诉您为什么您的选择在 SQL 开发人员中比在 Hibernate 中快得多。

# racket - 违反 DrRacket 合同

> ID：12932806
> 
> 赞同：2
> 
> 时间：2012-10-17T10:56:56.723
> 
> 标签：racket

我安装了 DrRacket，这样我就可以使用 SICP 学习编程概念。但是在过去的一周左右，每次我启动 DrRacket 时，控制台窗口都会出现以下消息：

```
fl-:contract violation
  expected: flonum?
  given: 0
  argument position: 2nd
  other arguments...:
     2.0 
```

我不确定我是怎么到这里的。我尝试卸载并重新安装为 32 位和 64 位，重新启动我的笔记本电脑，在论坛中搜索可能的修复程序。没运气。只想回到我可以输入代码的正常窗口。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-18T13:24:04.033

希望你找到了答案。对于我的情况，我发现从我一直在处理的文件中，我的计算机意外关闭，有三个文件与初始文件名相关联 - 在恢复 Windows 时。文件扩展名为 .rkt（原始）、.bak 和 .1。我将“.1”文件重命名为原始文件的第二个副本，“违反合同”的问题就结束了。看起来“.1”文件是由于笔记本电脑关机而导致的，并且是自动检索文件。

# android - BufferedReader，读取了多少字节？

> ID：12932811
> 
> 赞同：4
> 
> 时间：2012-10-17T10:57:16.243
> 
> 标签：android, bufferedreader

我正在使用`AsynkTast`下载一组 CSV 行，并希望跟踪总共读取了多少字节。

```
while ((string = bufferedReader.readLine()) != null)
{
    bytesRead += ?;
} 
```

我将如何访问行总字节数？

如果这个问题是重复的，我很抱歉，但我似乎只能找到答案与`OutputStream`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T10:58:40.957

尝试：

```
while ((string = br.readLine()) != null)
{
    bytesRead += (string.getBytes().length);
} 
```

# css - 我们如何自定义 vs2010 css 编辑器模板？

> ID：12932816
> 
> 赞同：1
> 
> 时间：2012-10-17T10:57:33.830
> 
> 标签：css, visual-studio-2010, visual-studio, ide

特别是，我喜欢通过`#region`和将代码块组织成区域`#endregion`。编辑css文档时可以做这样的事情吗？

那么，一般我们如何自定义vs2010 css编辑器模板呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T15:05:12.013

查看 VS.NET的[JSEnhancements](http://visualstudiogallery.msdn.microsoft.com/0696ad60-1c68-4b2a-9646-4b5f4f8f2e06)插件，它可以让您在 css 和 js 中使用#region。有关 vs.net 中 js 和 css 增强的列表，请阅读[此](http://www.stefanprodan.eu/2011/05/improve-visual-studio-2010-jscript-editor-with-jquery-intellisense-and-code-outlining/)内容。

# iphone - 我想为 UIImageView 制作动画并在动画期间我想识别它上面的事件

> ID：12932824
> 
> 赞同：-1
> 
> 时间：2012-10-17T10:58:17.853
> 
> 标签：iphone, objective-c, ios, xcode

当为 UIImageView 设置动画时，它在动画期间不会发送事件，但是当它完成动画时，它能够发送事件，我也尝试过 UIButton。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T11:01:00.983

您只需要在调用动画时包含 UIViewAnimationOptionAllowUserInteraction 选项：

```
[UIView animateWithDuration:animationDuration 
                          delay:0 
                        options:(UIViewAnimationOptionCurveLinear | UIViewAnimationOptionAllowUserInteraction)
                     <snip>]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T11:13:08.220

```
 CATransition *animation = [CATransition animation];
    [animation setDelegate:self];   
    [animation setType:kCATransitionFade];
    [animation setDuration:0.0];// try 0.1 also
    [animation setTimingFunction:[CAMediaTimingFunction functionWithName:
                                  kCAMediaTimingFunctionEaseInEaseOut]];
    [[yourImageView layer] addAnimation:animation forKey:@"transitionViewAnimation"];//Try   self.view insted of yourImageView if you want to animate whole view 
```

# microsoft-metro - WinRT C++ 创建对象的浅拷贝

> ID：12932825
> 
> 赞同：0
> 
> 时间：2012-10-17T10:58:25.900
> 
> 标签：microsoft-metro, windows-runtime

根据 Platform::Object Class docs ( [http://msdn.microsoft.com/en-us/library/windows/apps/hh748265.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh748265.aspx) )，有一种创建浅拷贝的方法：

[MemberwiseClone] 方法 创建当前对象的浅表副本。

如何使用它 ？我试过object->MemberwiseClone(), Object::MemberwseClone()，没有成功？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T17:18:28.437

没有这样的成员函数；文档不正确。如果要使其中一种类型可复制，则可以实现生成副本的构造函数或返回副本的成员函数。

（我会通知适当的人，以便更正文档。）

# c# - 如何找到正在使用的 C# 和 .NET/Mono 版本？

> ID：12932831
> 
> 赞同：2
> 
> 时间：2012-10-17T10:58:44.307
> 
> 标签：c#, .net, mono

您可以使用`System.Environment.Version`获取CLR的版本；您如何获得当前使用的 C# 和 .NET 或 Mono 框架的版本？

编辑：我不是在问如何找到您使用的是 Mono 还是 .NET。（我的问题的第一个版本确实将其作为次要问题提出，但当我在其他地方看到该问题得到回答时，我几乎立即删除了它。）这里的问题是（1）如何确定您正在使用的 C# 版本，以及 (2) 您拥有的 .NET 版本（与 CLR 的版本相反，这[不是一回事](http://msdn.microsoft.com/en-us/library/bb822049.aspx)）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-17T11:01:29.437

检查您是否在单声道中运行：

```
public static bool IsRunningOnMono ()
{
    return Type.GetType ("Mono.Runtime") != null;
} 
```

检查单声道版本：

```
Type type = Type.GetType("Mono.Runtime");
if (type != null)
{                                          
    MethodInfo dispalayName = type.GetMethod("GetDisplayName", BindingFlags.NonPublic | BindingFlags.Static); 
    if (dispalayName != null)                   
        Console.WriteLine(dispalayName.Invoke(null, null)); 
} 
```

如果您不在 Mono 中，那么您仍然使用`System.Environment.Version`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T11:01:25.073

已经提出了一个非常相似的问题：

```
public static bool IsRunningOnMono ()
{
    return Type.GetType ("Mono.Runtime") != null;
} 
```

[如何检测正在使用哪个 .NET 运行时（MS 与 Mono）？](https://stackoverflow.com/questions/721161/how-to-detect-which-net-runtime-is-being-used-ms-vs-mono)

并且为了检测当前在运行时用于执行的 .NET 框架的版本，您可以检查`Environment.Version`

# java - 使用 OracleCachedRowSet 获取时间戳

> ID：12932832
> 
> 赞同：2
> 
> 时间：2012-10-17T10:58:51.783
> 
> 标签：java, oracle

代码 ：

```
 OracleCachedRowSet rowSet =  new OracleCachedRowSet();             
 ResultObject obj = new ResultObject(0,null);      
 PreparedStatement pstat = connection.prepareStatement(strQry);
 rowSet.populate(pstat.executeQuery());
 rowSet.beforeFirst();

 while(rowSet.next()){
      System.out.println("Conference name "+rowSet.getString(1));
      System.out.println("StartTime "+rowSet.getTimestamp(5)) ;
 } 
```

当我运行上面的代码时，出现如下错误：

```
java.sql.SQLException: Invalid column type
    at oracle.jdbc.rowset.OracleCachedRowSet.getTimestamp(OracleCachedRowSet.java:4399)
    at test.Test.main(Test.java:102) 
```

`ResultSet`如果我使用而不是，同样的事情工作正常（检查下面的正确代码）`OracleCachedRowSet`

```
 PreparedStatement pstat = connection.prepareStatement(strQry);                    
  ResultSet rset =   pstat.executeQuery();                  
  while(rset.next()){
        System.out.println("Conference name "+rset.getString(1));
        System.out.println("StartTime "+rset.getTimestamp(5)) ;
  } 
```

有什么方法可以`getTimestamp()`使用`OracleCachedRowSet`吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T13:59:11.420

我用这个：

```
Object timeStampObj = result.getObject(2);
if (timeStampObj instanceof oracle.sql.TIMESTAMP){
    oracle.sql.TIMESTAMP oraTimeStamp = (oracle.sql.TIMESTAMP)timeStampObj;
    report.setLastRefresh(new Timestamp(oraTimeStamp.longValue()));
} 
```

这里的结果是 OracleCachedRowSet 的一个实例，报表实例的 setLastRefresh 采用 Timestamp。我之前的代码是：

```
report.setLastRefresh(result.getTimestamp(2)); 
```

上面的行在 Tomcat 中工作，但不是 WebSphere 抛出“无效的列类型”异常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T12:10:08.543

我们可以通过以下方式实现定义的事情：

```
java.util.Date date = new java.util.Date(((oracle.sql.TIMESTAMP)rSet.getObject(5)).timestampValue().getTime()) 
```

# css - Bootstrap WELL 中的背景文本

> ID：12932836
> 
> 赞同：2
> 
> 时间：2012-10-17T10:59:04.763
> 
> 标签：css, twitter-bootstrap

我在将文本放在 Bootstrap 的背景中时遇到问题。我首先在[这个](https://stackoverflow.com/questions/12920339/using-text-as-background-of-a-div)问题中发布了问题，但这对我的问题来说太简单了。我正在寻找[在此 jFiddle](http://jsfiddle.net/aBqw8/20/)中创建的效果，即菜单背景中的文本。该示例适用于我想要的工作方式，但是当我将它放入 Bootstrap 时，我得到[了这个 (http://jsfiddle.net/aBqw8/21/)](http://jsfiddle.net/aBqw8/21/)。

背景文字消失了，很可能是在井的后面。当我从井中删除背景颜色时，我可以看到文字。如果我从跨度中删除“位置：相对”，它会显示标题，但它会干扰菜单，这是我试图避免的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T11:01:01.950

在 CSS 中将 z-index 从 -1 更改为正数（我喜欢 1000，所以它总是在顶部）

看到这个小提琴：http: [//jsfiddle.net/aBqw8/22/](http://jsfiddle.net/aBqw8/22/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T15:57:46.220

尝试这个：

**HTML**

```
<div class='well'>
    <div class='bg-title'>
      <span class='title'>TITLE GOES HERE</span>
    </div>
    <ul class='nav nav-pills'>
        <li><a href='#'>menu1</a></li>
        <li><a href='#'>menu2</a></li>
    </ul>
</div> 
```

**CSS**

```
.bg-title {
    height: 100%;
    position: relative;
    width: 100%;
}

.title {
    display: block;
    font-size: 47px;
    font-weight: bold;
    opacity: 0.2;
    position: relative;
    text-align: right;
    top: 37px; // whatever ...
    z-index: 90; // Must be behind your .nav-pills, if you use "-1" it will go behind the .well!
}

.nav-pills {
    //include ...
    z-index: 99;
} 
```

**注意：** Bootstrap 的某些元素使用 z-index: 1000 到 1050 - 所以尽量不要使用这个范围，否则你可能会陷入另一个冲突 - 检查 _variables.scss （或 .less）

# php - 同步离线 JQuery Mobile 表单

> ID：12932837
> 
> 赞同：2
> 
> 时间：2012-10-17T10:59:04.540
> 
> 标签：php, html, jquery-mobile, offline

我的名字是 Dimas，我在一家医院担任开发人员。

我使用 JQuery Mobile 开发了一个 Web 表单，可以从 Android 平板电脑访问。它将数据（文本和文件）发送到服务器（PHP）并保存在 MySQL 数据库中。

这种药片供在家中探访患者的医生使用。其中一些患者生活在互联网连接非常差的偏远地区，所以我正在考虑使用 HTML5 离线功能来解决这些情况。

我开始阅读它，但我是这项技术的新手。我有一些问题：

*   您认为这是最好/最简单的解决方案吗？
*   如果我可以在平板电脑离线时将表单数据保存在本地 sqlite 存储中，那么当平板电脑在线时，我如何将其与 MySQL 服务器中的数据同步？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T06:53:50.170

构建一个在线托管的小型 HTML5 表单，并在应用未连接到 Internet 时离线存储数据。一旦连接到互联网，它应该在数据库中同步数据。

第 1 步这里是示例文件和教程， [https://github.com/alexgibson/OfflineForm](https://github.com/alexgibson/OfflineForm)

Step 2 建立一个简单的表格 医生姓名 患者姓名 测试描述 <> <>

步骤 3 离线存储此数据

Step 4 同步数据并显示报表

# javascript - 从 .ashx 文件调用 Javascript 方法

> ID：12932840
> 
> 赞同：2
> 
> 时间：2012-10-17T10:59:14.683
> 
> 标签：javascript, asp.net, generic-handler

从我之前的问题（[使用 JavaScriptSerializer 创建 json](https://stackoverflow.com/questions/12916779/create-json-using-javascriptserializer)），在`.ashx`文件中我使用以下方法打印 json 对象：

```
context.Response.ContentType = "application/json";
context.Response.Write(json); 
```

我`.ashx`从 default.aspx 调用这个文件，它的`<head>`标签中有一些 javascript 函数。 **我的问题是**：
之后我将如何从 .ashx 文件中调用 javascript 函数`context.Response.Write(json);`？

**更新**：
我的最终目标是实现DataTable 的[服务器端处理](https://stackoverflow.com/questions/3531438/jquery-datatables-server-side-processing-using-asp-net-webforms)。我想使用 javascript 函数将行与上下文菜单绑定。为此，我使用以下代码调用`.ashx`文件：

```
 $('#example').dataTable({
            'bProcessing': true,
            'bServerSide': true,
            'sAjaxSource': '/data.ashx'
        }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T11:14:58.893

你在使用ajax请求吗？在这种情况下，您可以使用 javascript 中可用的成功方法，如 w3schools 中的以下示例所示：

```
function showHint(str)
{
var xmlhttp;
if (str.length==0)
  { 
  document.getElementById("txtHint").innerHTML="";
  return;
  }
if (window.XMLHttpRequest)
  {// code for IE7+, Firefox, Chrome, Opera, Safari
  xmlhttp=new XMLHttpRequest();
  }
else
  {// code for IE6, IE5
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }
xmlhttp.onreadystatechange=function()
  {
  if (xmlhttp.readyState==4 && xmlhttp.status==200)
    {
    // You can call your custom method here...  
    document.getElementById("txtHint").innerHTML=xmlhttp.responseText;
    }
  }
xmlhttp.open("GET","gethint.asp?q="+str,true);
xmlhttp.send(); 
```

}

或者，如果您使用的是 jquery：

```
$.ajax({
  url: "test.html",
  context: document.body
}).done(function() { 
  // You can call your custom method here... 
  $(this).addClass("done");
}); 
```

**更新**

查看：[http](http://datatables.net/usage/callbacks) ://datatables.net/usage/callbacks 可以使用的方法是：fnInitComplete

例如

```
$('#example').dataTable({
            'bProcessing': true,
            'bServerSide': true,
            'sAjaxSource': '/data.ashx',
            'fnInitComplete' : function() {
                alert('Your menu population code here!');
             }
        }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T11:02:01.153

你可以使用

```
eval 
```

在客户端将响应评估为 javascript。但我怀疑你真的需要或想要这个，它可能不是一个非常优雅的解决方案。那么你想归档什么？

# java - java.lang.ClassNotFoundException: javax.persistence.Entity

> ID：12932851
> 
> 赞同：2
> 
> 时间：2012-10-17T10:59:55.787
> 
> 标签：java, netbeans-7

我有一个从其他地方复制的示例项目，当我尝试在 netbeans 中运行它时，我在 tomcat 的控制台窗口中遇到了一些错误/异常。

```
java.lang.ClassNotFoundException: javax.persistence.Entity
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1711)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1556)
    at org.springframework.core.type.classreading.RecursiveAnnotationAttributesVisitor.visitEnd(AnnotationAttributesReadingVisitor.java:167)
    at org.springframework.asm.ClassReader.a(Unknown Source)
    at org.springframework.asm.ClassReader.accept(Unknown Source)
    at org.springframework.asm.ClassReader.accept(Unknown Source) 
```

javax.persistence 已添加到我的项目中。我什至在 netbeans 中删除并重新添加，但仍然是同样的错误。此错误是在运行 Web 应用程序时而不是在编译时。 ![在此处输入图像描述](../Images/ac76fa27714e2d4536a194df940ee732.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T11:05:39.220

您需要在`Jar Files`构建路径中添加以下内容：-

*   `javax.persistence_2.0.3.v201010191057.jar`
*   `org.eclipse.persistence.jpa_2.3.0.v20110604-r9504.jar`
*   `org.eclipse.persistence.jpa.equinox_2.3.1.v20111018-r10243.jar`
*   `org.eclipse.persistence.antlr_2.3.0.v20110604-r9504.jar`
*   `org.eclipse.persistence.asm_2.3.0.v20110604-r9504.jar`

最好添加第一个将起作用，仅`javax.persistence.Entity`在其中发现`Jar`。但您可能还需要添加后面的，以便使用`JPA`

使用 JPA Jars 的名称搜索它们。你会得到它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T11:04:25.043

javax.persistence.Entity 是 Java EE SDK 库“javaee.jar”中的一个类，您的项目类路径中缺少此 jar 文件。

参考这个[http://www.mkyong.com/hibernate/java-lang-classnotfoundexception-javax-persistence-entity/](http://www.mkyong.com/hibernate/java-lang-classnotfoundexception-javax-persistence-entity/)

# html - 如何在 Joomla 工具提示中的 div 中排列图像？

> ID：12932862
> 
> 赞同：1
> 
> 时间：2012-10-17T11:00:29.017
> 
> 标签：html, css, joomla, tooltip, joomla2.5

我正在使用[JHtml::tooltip](http://docs.joomla.org/JHtml::tooltip/1.6)在组件中显示我的工具提示，但问题出在图像位置。我试图添加`bottom:0%`, `bottom:0px`。

所以这就是我所拥有的：

![图片](../Images/d06cbdf96ea3b02cade07edbb315f906.png)

我需要该图像与文本内联。这是我的代码：

```
<div class="serch">
    <div class="advanced_search">
        <span id="advanced_search">Advanced Search</span>
        <span>
            Search: 
            <a href="#"><span id="advanced_search_by_branch"><b>By Branch</b></span></a> |
            <a href="#"><span id="advanced_search_by_address">By Address</span></a> |
            <a href="#"><span id="advanced_search_by_tel">By Telephone Number</span></a> 
            <?php echo JHTML::tooltip('This is a tooltip attached to text', 'Text Tooltip Title', 'tooltip.png');?>
        </span>
    </div>
</div> 
```

此处包含的样式为空。这里也是萤火虫的来源：

![在此处输入图像描述](../Images/3ad53287da0fea9586a090e8d91b2fa6.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T11:31:27.710

你可以试试这个

```
.hasTip img {vertical-align: baseline;} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T11:58:43.700

你可以试试内联css...

```
<img alt="Tooltip" src="/~nonamez/joomla/media/..../tooltip.png" style="margin-top:10px;">.. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T11:04:31.963

您可以尝试一个简单`.hasTip img { margin-top: 10px; }`的方法将其向下移动 10 像素，然后对其进行更改以使其恰到好处。

# actionscript-3 - 用于 AIR 应用程序的自托管分析工具？

> ID：12932867
> 
> 赞同：1
> 
> 时间：2012-10-17T11:00:54.897
> 
> 标签：actionscript-3, flash, air, google-analytics, analytics

我们正在开发在我们公司 VPN 中使用的 AIR 应用程序。客户端在使用时并不总是连接到网络（有桌面客户端和 iOS 客户端）。现在我们要添加分析功能来获取安装数量、某些功能的使用频率等的统计信息。

因为客户端并不总是连接到网络，所以解决方案应该具有事件的离线跟踪功能，一旦可以建立与服务器的连接，这些事件就会发送到跟踪服务器。

AppAnalytics (http://www.appanalyticshq.com/features/) 提供了我们所需要的，但它显然不是自托管的。由于严格的安全政策，我们的 VPN 中的客户端不允许在互联网上上传或下载任何内容 - 因此我们寻找可以托管在我们 VPN 内的服务器上的东西。

有谁知道这种情况的好解决方案？

# cxf - 如何在 ExceptionMapper 中为 ResponseBuilder 定义正确的 MediaTypes

> ID：12932883
> 
> 赞同：1
> 
> 时间：2012-10-17T11:02:00.720
> 
> 标签：cxf

我面临以下问题：

我将 CXF 用于 REST 服务。对于我正在使用的异常处理`javax.ws.rs.ext.ExceptionMapper`，`public Response toResponse(T ex)`我想返回一些对象，例如

```
class MyObject {
    String detail;
} 
```

方法的示例实现类似于

```
public Response toResponse(T ex) {
    MyObject o = new MyObject();
    o.detail = "...";
    return Response.status(400).entity(o).build();
} 
```

但我有问题

```
org.apache.cxf.jaxrs.interceptor.JAXRSOutInterceptor writeResponseErrorMessage
WARNING: No message body writer has been found for response class RequestError. 
```

不知何故，我发现当我指定 MediaType

```
return Response.status(400).entity(o).type("application/json").build(); 
```

一切正常，但我不知道客户端接受哪种类型...

当然，我可以在某个地方存储客户端接受的类型，然后使用正确的类型，但这有异味。我想用更好的东西。

例如，在我的 CXF 端点中，我可以使用 指定`@Produces`我的控制器方法生成的 MediaType 类型，然后 CXF/Spring 选择正确的。我也在我的 ExceptionMapper 中尝试过，但它不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-15T09:36:14.510

你可以这样做

```
@Context HttpHeaders headers;

public Response toResponse(Exception e) {
    ExceptionEntity ee = new ExceptionEntity(e);
    ResponseBuilder rb = Response.status(Response.Status.INTERNAL_SERVER_ERROR);
    rb.type(headers.getMediaType());
    rb.entity(ee);
    Response r = rb.build();
    return r;
} 
```

我正在使用 cxf-rs 2.7.5

# ios - 使用 setNeedsDisplay 在后台为 CALayers 设置动画

> ID：12932891
> 
> 赞同：1
> 
> 时间：2012-10-17T11:02:29.317
> 
> 标签：ios

我正在将我的库从 Andriod 移植到 IOS，并且我取得了很大的进步，并在此过程中学到了一些关于 Objective C 的知识。我说一点，因为有很多东西要学。Android 库创建一个surfaceView 并通过将图像直接绘制到surfaceView 来做动画；在 Objective C 中，我使用带有 CALayers 的 UIView。

在 UIView 中，我动态添加加载了 Sprite Sheet 图像的 CALayers，然后在 UIView 中移动 CALayers，同时通过移动 CALayer 的 contentsRect 来在 CALayer 中的 Sprite 图像中移动。

这一切都在 Android 的后台线程中完美运行，并且不会干扰主机应用程序。在 Objective C 中，我尝试使用 performSelectorInBackground 或新的 Grand Central Dispatch 在后台运行它。两者似乎都可以在后台正常工作，将图像加载到 CALayers 中，然后我遇到了障碍：CALayers 没有显示。

我知道 CALayers 在那里，因为当我通过单击中间的硬件按钮在模拟器中暂停应用程序，然后再次单击以显示它时，CALayers 看起来很棒——但静态的。

阅读了几天的帖子并尝试了在 UIView 和各个 CALayers 上设置 NeedsDisplay 和 NeedsLayout 的各种方法，我已经放弃了，我正在寻求您的帮助。

所以，请看看下面的代码，让我知道我做错了什么。我在设置 CALayers 的框架时也遇到了问题。当我尝试使用 [self setFrame: CGRectMake(0,0,spWidth, spHeight)] 设置它们时 – 两个 NSIntegers; 我收到一条错误消息，提示将 CGRect 发送到不兼容类型 NSInteger 的参数。我知道这可能是一个菜鸟错误。

这是我的代码的相关部分。我会发布更多，但我希望我的错误出现在 run 方法中。

在我的自定义 UIView

```
 if ((self = [super initWithFrame:CGRectMake(0,0,dw,dh)])){

    (initialization and defining variables)

    self.bounds = CGRectMake(0, 0, dw, dh);
    self.frame = CGRectMake(0,0,dw,dh);
    self.backgroundColor = [UIColor whiteColor];
    MainDrawLayer  = [[CALayer layer]retain];
    MainDrawLayer.bounds = CGRectMake(0, 0, dw, dh); //dw=320 dh=50.
    MainDrawLayer.frame = CGRectMake(0,0,dw,dh);

    [self.layer addSublayer:MainDrawLayer] ;
    }
    return self; 
```

所有的动作都是在我从 ViewController 调用的 run 方法中触发的。

```
 - (void) run {
    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT,0), ^{

    PGM = [[[GadsMonitor alloc] init:   @"http://www.javelin21.com/servlets/theloader" :_displaySizeW :_displaySizeH]autorelease];

   while(!PGM.adsdone){
   [NSThread sleepForTimeInterval:2.0];
    NSLog(@"The value of adsdone is %@\n", (PGM.adsdone ? @"YES" : @"NO"));
   }

   NSLog(@"Into processComponent Number in PGM.PGVarray %d ", PGM.PGVarray.count);

   GVarray = [PGM.PGVarray mutableCopy];
   NSLog(@"Into RUN after copy  GVArray %d ", GVarray.count);

   Gad * readyGad = (Gad *) [GVarray objectAtIndex:0];
   if (readyGad != nil)
   [readyGad getImages];

   NSLog(@"The value of the bool is %@\n", (readyGad.gdone ? @"YES" : @"NO"));

  while (!readyGad.gdone) {
     [NSThread sleepForTimeInterval:2.0];
     [readyGad checkImages];
    NSLog(@"The value of the readyGad.gdone is %@\n", (readyGad.gdone ? @"YES" : @"NO"));
    }
    rstop = NO;

   while (!rstop) {
    NSLog(@"The value of rstop in while is %@\n", (rstop ? @"YES" : @"NO"));

    [self rotateGames];

    stop = NO;

   while (!stop) {
        [self gameAction];
        [self paint];

   dispatch_async(dispatch_get_main_queue(), ^{
    [self setNeedsLayout]; //I have also tried self.layer
      [self  setNeedsDisplay]; //I have also tried self.layer
        });

        //These are various timers for CALayer action
        [NSThread sleepForTimeInterval:stime];
        rtime = (rtime +runGad.gslp);
        ltime += runGad.gslp;
        jtime += runGad.gslp;
        vtime += runGad.gslp;
        ftime += runGad.gslp;
        ttime += runGad.gslp;
        Stime += runGad.gslp;

        NSLog(@"After Thread Sleep rtime + gslp %f ", rtime);

        if ((runTime += runGad.gslp) >= runGad.grun) {
            stop = YES;
        }
    }

   stop = NO;
  }
  }); 
```

}

我感谢你的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T11:05:52.377

在 iOS 中，任何 UI 更新代码都必须在主线程中执行。您不能使用 GCD（除非它在 ​​mainQueue 上运行）或 performSelectorInBackground 来更新 UI。

您可以更新数据并在后台线程上执行 IO，但是当您加载数据并想要显示它时，您必须切换回主线程。

尝试不这样做有时会奏效，有时不会，或者使您的应用程序崩溃。

主线程拥有 iOS 中的 UI 更新。

此外，在主线程上执行工作时，您有几个选项，您可以使用 performSelectorOnMainThread 将块排队

或者您可以向主线程 GCD 队列发送一个块，如果您使用 GCD，有时您可能需要在主线程上使用 dispatch_async 与 dispatch_sync，它们在每种情况下都不起作用。performSelectorInMainthread 似乎比 GCD 的主线程队列更可靠。

ymmv

# php - 在 PHP 或 MySQL 上生成 Friday Cutoff

> ID：12932901
> 
> 赞同：0
> 
> 时间：2012-10-17T11:03:38.937
> 
> 标签：php, mysql

> **可能重复：**
> [查找当前周、月和年的日期范围](https://stackoverflow.com/questions/5552862/finding-date-range-for-current-week-month-and-year)

任何人都可以帮助我如何使用 PHP 或 MySQL 生成星期五截止日期。以下是示例日期范围

```
...
2012-10-06 to 2012-10-12
2012-10-13 to 2012-10-19
2012-10-20 to 2012-10-26
...
2012-12-22 to 2012-12-28
2012-12-29 to 2013-01-04 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T11:17:33.253

知道第一个星期六（初始期间）很容易计算下一个星期五（并循环下一个星期六，第二个星期六的下一个星期五......）

检查此代码：

```
<?php
$saturday = '2012-10-06';
$next_friday = date('Y-m-d', strtotime('+6 days', strtotime($saturday)));

print "The next friday is $next_friday"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T11:42:14.370

试试这段代码...

```
function getCurrentWeek($start , $end){
        $ts = strtotime($start);
        $te = strtotime($end);
        $days = round(abs($te-$ts)/86400);
        $range = '';
        $j = 0;
        // generate dates
        for ($i=0; $i<$days; $i++, $ts+=86400){
            $temp_date = date("Y-m-d", $ts);
            $d = (int) date('w',$ts);

            switch ($d) {

                case 5 :
                    if($j == 1)
                       $range .= $temp_date . "<br />" ;
                       $j = 0;
                    break; 

                case 6 :
                    $j = 1;
                    $range  .= $temp_date . " TO "  ;
                    break;

            }
        }
        return $range;
    }

    echo getCurrentWeek('2012-10-06','2013-01-06'); 
```

Ps）您需要输入正确的开始和结束日期，最后是星期五...否则您将有 XXXX-XX-XX TO EMPTY

# c# - 基于亮度的位图像素替换

> ID：12932903
> 
> 赞同：1
> 
> 时间：2012-10-17T11:03:40.550
> 
> 标签：c#, image-processing

简单地说，我想将图像中的任何像素设置为白色，其中亮度大于给定阈值。我编写了以下代码，这些代码可以快速准确地用于我的目的。

```
using (Bitmap image = new Bitmap("C:\\temp\\test1.png"))
{
    for (int x = 0; x < image.Width; x++)
    {
        for (int y = 0; y < image.Height; y++)
        {
            Color c = image.GetPixel(x, y);
            float f = c.GetBrightness(); //From 0 (black) to 1 (white)

            if (f > 0.1) { image.SetPixel(x, y, Color.White); }
        }
    }

    image.Save("C:\\temp\\test2.png");
} 
```

**但是，必须逐个循环遍历每个像素，这感觉是错误的。是否有使用另一种 .NET 成像或图形方法来解决此问题的优化方法？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T12:37:49.070

您可以通过使用经过验证的本机算法实现（例如 OpenCV）进行优化。尽管我不是这方面的专家，但认为无论如何您都需要遍历所有像素。即使是关于阈值算法的科学论文（更侧重于找到一个好的阈值）也会遍历整个图像，所以我认为您不必对此感到错误。

无论如何，如果有一些数学方法适用于**任何**图像，我也会感兴趣，但我怀疑存在。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-17T14:33:48.843

对于某些特殊情况（例如 2 阈值的幂），您可以使用位掩码技巧处理 32 位块，但我怀疑它会为您带来很多好处。您提供的代码中更大的开销是`GetPixel`and`SetPixel`调用，这是非常低效的。您可以使用[LockBits](http://msdn.microsoft.com/en-us/library/system.drawing.bitmap.lockbits.aspx)方法并直接从`byte[]`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-17T14:22:32.107

这样考虑，如果你想知道一个像素是高于还是低于所有像素的阈值，你将不得不访问所有像素。任何未访问的像素都意味着您不知道它的值。

没有办法在 O(n) 时间内编写此代码，特别是如果您打算更改某些像素的值。

# java - instanceof 运算符

> ID：12932905
> 
> 赞同：-3
> 
> 时间：2012-10-17T11:03:59.470
> 
> 标签：java

为什么是`Foo[]` `false`？。它是 的一个实例`Bar`。Even在实现时`Face`是有效`Bar class`的。同一个类的两个对象也可以正常工作`instanceof.`

使用 instanceof 运算符的操作数和结果。

```
First Operand              instanceof Operand             Result 
```

（正在测试的参考）（我们正在比较参考的类型）

```
null                   Any class or interface type        false
Foo instance                 Foo, Bar, Face, Object       true
Bar instance                 Bar, Face, Object            true
Bar instance                     Foo                      false
Foo [ ]                      Foo, Bar, Face               false
Foo [ ]                         Object                    true
Foo [ 1 ]                    Foo, Bar, Face, Object       true 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T11:14:16.397

`Foo[]`是一个对象**数组**。`Foo`对象数组`Foo`不是`Foo`,`Bar`或`Face`对象，因此如果您使用 进行检查，`instanceof`结果将是`false`. 数组*是*Java 中的对象`Foo[] instanceof Object`，`true`.

`Foo[1]`引用`Foo`数组中索引 1 处的对象。该对象的类型是`Foo`，因此如果您使用 进行检查，`instanceof`则结果`true`是`Foo`、`Bar`和。`Face``Object`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T11:11:20.730

> ```
> (Reference)               (Type)                          (Result)
> Foo [ ]                   Foo, Bar, Face                  false 
> ```

`Foo[]`表示“Foo 的数组”，并且 a`Foo[]`不是`Foo`,`Bar`或的子类型`Face`。

> ```
> Foo [ ]                   Object                          true 
> ```

但是，`Foo[]`是 的子类型`Object`，因为所有引用都是 的子类型，`Object`而数组类型是引用类型。

> ```
> Foo [ 1 ]                 Foo, Bar, Face, Object          true 
> ```

`Foo[1]``Foo[]`表示（我认为）实例的第二个元素。`Foo`数组元素的名义类型是`Foo`。并且`Foo` *是*所有这些类型的子类型。

> ```
> null                      Any class or interface type     false 
> ```

该`null`值不是技术意义上的*任何*引用类型的实例。（当您分配`null`给引用变量时，`null`文字会*转换*为引用变量的类型......）这种情况有点出乎意料（对于新的 Java 程序员），但它是`instanceof`指定运算符的工作方式。

# nuget - 如何使用 NuGet 为基于文件的包源设置相对路径？

> ID：12932906
> 
> 赞同：30
> 
> 时间：2012-10-17T11:04:06.930
> 
> 标签：nuget

我将 NuGet 2.1 与多个解决方案一起使用，每个解决方案位于单个父目录下的子目录和由所有解决方案共享的单个包目录中（这在 NuGet 2.1 中成为可能）。

我想添加一个基于文件的包源，它指向我的工作副本中的包目录（我正在使用 Subversion）。

这有效：

```
<configuration>
  <repositoryPath>_Packages</repositoryPath>
  <activePackageSource>
    <add key="Working copy package source" value="C:\AllMySolutions\_Packages" />
  </activePackageSource>
</configuration> 
```

这不会：

```
<configuration>
  <repositoryPath>_Packages</repositoryPath>
  <activePackageSource>
    <add key="Working copy package source" value="_Packages" />
  </activePackageSource>
</configuration> 
```

我不想对绝对路径进行硬编码，但找不到在内部的 value 属性中使用相对路径的方法`activePackageSource`。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2015-02-20T21:21:02.797

看起来现在支持此功能。

[http://nuget.codeplex.com/workitem/2810](http://nuget.codeplex.com/workitem/2810)

1.  将一个名为 nuget.config 的文件放在解决方案的根目录中（在包文件夹和解决方案文件旁边），其中包含：

    ```
    <?xml version="1.0" encoding="utf-8"?>
    <configuration>
      <packageSources>
        <add key="Local" value="packages-local" />
      </packageSources>
    </configuration> 
    ```

2.  将包构建到 packages-local 文件夹。

3.  此文件夹中的包可用于添加到解决方案中的其他项目。（您可能需要重新启动 VS 或至少关闭重新打开您的解决方案以获取配置）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-12-09T16:02:46.390

我有同样的问题`<repositoryPath>`。我需要强制我的 git 存储库中的所有解决方案使用相同的文件夹来存储他们的 NuGet 包。因此，我在`nuget.config`存储库的根目录上创建了一个文件，其中包含以下内容，如[文档](https://docs.microsoft.com/en-us/nuget/consume-packages/configuring-nuget-behavior)中所述：

```
<?xml version="1.0" encoding="utf-8"?>
<configuration>
    <config>
    <add key="repositoryPath" value="NugetPackages\" />
    </config>
</configuration> 
```

在手动创建`NugetPackages`并`nuget.config`安装软件包后，该目录中没有任何内容，但一切正常。然后我发现VS已经在`C:\NugetPackages`那里创建并移动了包。经过一段时间的反复试验，最后使用的相对路径`.\`对我有用：

```
<?xml version="1.0" encoding="utf-8"?>
<configuration>
    <config>
    <add key="repositoryPath" value=".\NugetPackages\" />
    </config>
</configuration> 
```

我希望它对其他配置也有相同的行为。

**PS：**正如 Matthew 已经说过的，我必须重新启动 VS 才能使我的编辑`nuget.config`生效。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2022-02-13T12:23:42.087

对于 .NETCore/.NET5 和更新版本，config 键`repositoryPath`不再起作用，它现在被命名为`globalPackagesFolder`，所以：

```
<?xml version="1.0" encoding="utf-8"?>
<configuration>
    <config>
        <add key="globalPackagesFolder" value=".\packages\" />
    </config>
</configuration> 
```

# jqgrid - 如何在多个选项卡中开发相同的 jqgrid？

> ID：12932909
> 
> 赞同：1
> 
> 时间：2012-10-17T11:04:17.427
> 
> 标签：jqgrid

我的问题是，我有一个显示订单详细信息的数据表。

如果我单击订单，将打开一个新选项卡，并在该选项卡中显示一个 jqgrid，其中包含详细的订单信息。这里我只使用一个 jqgrid，并使用“url”选项将数据动态加载到 jqgrid 中。

如果我为另一个订单打开另一个选项卡，jqgrid 不会显示。即。同时在两个选项卡中，相同的网格不起作用。

请建议我，我怎样才能做到这一点..

# c# - 如何判断我的应用程序是否与 Mono 捆绑在一起，而不是与 Mono 一起执行？

> ID：12932910
> 
> 赞同：1
> 
> 时间：2012-10-17T11:04:19.827
> 
> 标签：c#, mono, mkbundle

如何检查我的应用程序是否已使用单声道 (mono MyProgram.exe) 启动，或者是否已与使用 mkbundle 或类似工具嵌入的单声道运行时捆绑在一起？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T11:04:19.827

```
IsBundled = (typeof(int).Assembly.Location == "mscorlib.dll"); 
```

# file - 如何使用批处理脚本搜索给定名称的文件的目录？

> ID：12932919
> 
> 赞同：-1
> 
> 时间：2012-10-17T11:04:46.130
> 
> 标签：file, batch-file, directory

我知道一个文件的名称，但我不知道它所在的目录。我需要找到该目录。

给定文件名，如何使用批处理脚本搜索包含该文件的目录？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T12:14:01.270

我假设您知道它位于哪个驱动器上，让我们说驱动器 C：

如果您只想列出 MYFILE.TXT 存在的所有位置，那么

```
dir /b /a-d /s "c:\myfile.txt" 
```

以上将在输出中包含文件名。

如果你需要对路径做点什么，让我们说 ECHO 路径，但它可以是任何东西，然后

```
for /r c:\ %%F in (myfile.txt) if exist "%%F" echo %%~dpF 
```

将`~dp`扩展修改`%%F`为仅包括驱动器和路径，剥离名称和扩展名。

如果从命令行而不是从批处理文件运行，则将双百分比更改为单百分比。

如果您不知道文件位于哪个驱动器上，则必须在可能包含该文件的每个驱动器上运行任一解决方案。

# c# - 在 SharePoint 2010 中使用使用托管元数据的 KeywordQuery 显示自定义用户属性？

> ID：12932925
> 
> 赞同：2
> 
> 时间：2012-10-17T11:04:59.880
> 
> 标签：c#, sharepoint, sharepoint-2010

背景：

我正在使用 KeywordQuery 在 SharePoint 2010 的自定义 Web 部件中执行人员搜索。我正在搜索特定的用户配置文件属性。这些属性映射到 Search Service 应用程序中的托管属性。我想在搜索结果中输出这些属性。这适用于不使用托管元数据的标准属性和自定义用户属性。

问题：

但是，问题是：使用托管元数据术语集的用户配置文件属性未显示在搜索结果中。我不确定问题是否与 MM 有关，但似乎很可能，因为出现了其他自定义属性。更重要的是，搜索本身似乎工作正常。当我搜索使用 MM 的用户配置文件属性时，我得到了预期的人。

相关代码：

在下面的代码中，我使用 SelectProperties 为要显示的属性添加列。自定义属性 Regular_Property 和 MM_Property 都是托管属性。但是，在这两个中，只有 Regular_Property 显示在 GridView 中。在 MM_Property 上搜索，例如 keywordQueryText = MM_Property:"Some Value"，似乎工作正常。

```
private void ExecuteKeywordQuery(string keywordQueryText)
        {
            SearchServiceApplicationProxy SSAProxy = (SearchServiceApplicationProxy)SearchServiceApplicationProxy.
               GetProxy(SPServiceContext.GetContext(SPContext.Current.Site));

            KeywordQuery keywordQuery = new KeywordQuery(SSAProxy);
            keywordQuery.ResultsProvider = SearchProvider.Default;
            keywordQuery.QueryText = keywordQueryText;
            keywordQuery.ResultTypes |= ResultType.RelevantResults; 
            //keywordQuery.ResultTypes = ResultType.RelevantResults;
            keywordQuery.HiddenConstraints = "scope:\"People\"";
            //keywordQuery.KeywordInclusion = KeywordInclusion.AnyKeyword;

            keywordQuery.SelectProperties.Add("Title");
            keywordQuery.SelectProperties.Add("Path");
            keywordQuery.SelectProperties.Add("MobilePhone");
            keywordQuery.SelectProperties.Add("Regular_Property");
            keywordQuery.SelectProperties.Add("MM_Property");

            ResultTableCollection searchResults = keywordQuery.Execute();

            if (searchResults.Exists(ResultType.RelevantResults))
            {
                ResultTable searchResult = searchResults[ResultType.RelevantResults];
                DataTable result = new DataTable();
                result.TableName = "SearchResults";
                result.Load(searchResult, LoadOption.OverwriteChanges); 

                PopulateResultsGrid(result);
            }
private void PopulateResultsGrid(DataTable resultsTable)
        {
            gridSearchResults = new GridView();
            gridSearchResults.DataSource = resultsTable;
            gridSearchResults.DataBind();
            Controls.Add(gridSearchResults);
        } 
```

有谁知道如何使这项工作？我已经尝试过无数次尝试重置索引、完全爬网、增量爬网、用户配置文件同步等。它似乎仍然不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T09:02:26.083

我最终想通了，答案很简单。由于 MM_Property 是多值的，存储在列中的值的数据类型（由 result.Columns["MM_Property"].DataType 返回）是字符串数组，而不是字符串。

# facebook - 使用批处理 API PHP 邀请 50 多个朋友参加活动

> ID：12932926
> 
> 赞同：0
> 
> 时间：2012-10-17T11:05:01.857
> 
> 标签：facebook, events, batch-file, facebook-fql, facebook-page

我正在尝试使用批处理 API 让我的用户能够邀请他们所有的页面粉丝参加活动。这是我第一次尝试使用批处理 API，但遇到了一些麻烦。这是我不使用批处理的代码：

```
$result = $facebookObj->api(array(
      'method' => 'fql.query',
      'query' => 'select uid,name from user where uid in ( select uid from page_fan where uid in (select uid2 from friend where uid1 = me()) and page_id = '.$fbPage.')'
));

foreach ($result as $value) {
   $ret_val = $facebookObj->api($event_fbID . "/invited/" . $value['uid'],'POST');
   if($ret_val) {
     // Success
     $numInvited++;
   }
} 
```

如何将此代码改编为批处理 API 以查询页面的 50 多个粉丝？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T15:53:05.327

很抱歉这么晚才知道答案。我的问题是我不知道如何测试我的代码。

我用你的答案编写了这个代码示例。有人可以告诉我它是否可行，或者我如何在不将其发送到生产环境的情况下对其进行测试？

```
//Getting all the likers of the page
$result = $facebookObj->api(array(
      'method' => 'fql.query',
      'query' => 'select uid,name from user where uid in ( select uid from page_fan where uid in (select uid2 from friend where uid1 = me()) and page_id = '.$fbPage.')'
));

//If liker are more than 50 we use batch request
if($numLikers >50){

   // split array into several part of 50 users accounts                        
   $splitLikers = array_chunk($result, 50);
   // count how many arrays are generated by the array_chunk
   $countSplit = count($splitLikers);

   //Start a loop through the numbers of groups of 50 users  (or less if last group contains less than 50 users                      
   for($a=0; $a<$countSplit; $a++){
      //Second loop to go through the 50 likers in one group                                  
      for($b=0; $b<count($splitLikers[$a]); $b++){
           // construct an array containing the whole group                                
           $queries[$a] = array('method' => 'POST', 'relative_url' => $event_fbID . "/invited/" . $splitLikers[$a][$b]['uid']);

       }
       //Send POST batch request with the array above                            
       $ret_val = $facebookObj->api('/?batch='.json_encode($queries[$a]), 'POST');
    }

 }else{

    foreach ($result as $value) {
         $ret_val = $facebookObj->api($event_fbID . "/invited/" . $value['uid'],'POST');
         if($ret_val) {
            // Success
             $numInvited++;
         }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T11:36:24.710

> 如何将此代码改编为批处理 API 以查询页面的 50 多个粉丝？

由于 50 个操作是批处理请求的限制——只需将其拆分为 50 个包，并发出包含这 50 个操作的批处理请求，然后再发出下一个。

# sharepoint - 实施的 IHttpModule 类事件未触发，SharePoint 2010 问题

> ID：12932928
> 
> 赞同：1
> 
> 时间：2012-10-17T11:05:12.763
> 
> 标签：sharepoint, global-asax, ihttpmodule

我正在开发 sharepoint 2010 网络应用程序。我想通过使用从 SPHttpApplication 继承的 Global.asax 以经典的 asp.net 方式处理一些 Applicaton 事件（Begin_Request、End_Request、Application_Start）。

我找到 [了两种](http://social.msdn.microsoft.com/Forums/en/sharepointdevelopment/thread/79f69293-a91c-4426-acac-ff23030db1ee) 区分的方法。

第一个建议在 Global 类中重载 SPHttpApplication 。好主意，但不适合我，因为我的应用程序部署到另一个主站点的子站点。如果有办法绕过这一刻，那将是一个很好的解决方案！

第二个建议实现 IHttpModule 接口并从 HttpApplication 上下文变量注册事件。它适合我，我创建了一个类库项目，其中一个类实现了这个接口。我还在 web.config 文件中添加了特殊记录：

```
<httpModules>
    <add name="DSModule" type="Artec.DS.HttpContext.DSModule, DSModule, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31a3567341f39f94"/>
</httpModules> 
```

其中“Artec.DS.HttpContext”是项目名称，DSModule 是类名称。毕竟，当我开始调试时，不会调用“Init()”方法。

**更新**

```
namespace Artec.DS.HttpContext
{
    public class DSModule : IHttpModule
    {
        public void Dispose()
        {
           throw new NotImplementedException();
        }

        public void Init(HttpApplication context)
        {
            System.Diagnostics.Debugger.Launch();

            ApplicationVariables.AppPath = context.Server.MapPath("/");
            NhibernateManager.Init();
            NavigationManager.Init();
        }
    }
} 
```

首先我的 web.config 有错误的“类型”属性。我对类名而不是程序集名感到困惑。所以格式良好的标签如下：

```
<add name="DSModule" type="Artec.DS.HttpContext.DSModule, Artec.DS.HttpContext, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31a3567341f39f94" /> 
```

修改 web.config system.webServer/modules 后（感谢[CBono](https://stackoverflow.com/users/17966/cbono)） Init() 被调用，这是我最初问题的答案。

但现在我收到错误：“System.Web.HttpException：服务器操作在此上下文中不可用。” 尝试映射服务器路径时：

```
context.Server.MapPath("/") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T13:11:30.193

如果您的 IIS 实例是版本 6，或者您在版本 7 经典模式下运行，则您列出的 web.config 条目是合适的。

尝试将其添加到您的 web.config 以涵盖 IIS 7 集成模式（您可能正在使用）：

```
<configuration>
  <system.webServer>
    <modules>
      <add name="DSModule" type="Artec.DS.HttpContext.DSModule, DSModule, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31a3567341f39f94"/>
    </modules>
  </system.webServer>
</configuration> 
```

在这两个部分都注册您的 HTTP 模块是完全可以的。

# c++ - 新操作员无法分配内存

> ID：12932929
> 
> 赞同：4
> 
> 时间：2012-10-17T11:05:14.680
> 
> 标签：c++

在我的 C++ 程序中，我需要处理大量信息。我将这些大量信息存储在一个结构中。结构是..

```
struct xlsmain
{
    struct sub_parts_of_interface sub_parts[200];
    string name;
    int no_of_subparts;
};

struct sub_parts_of_interface
{
    struct pio_subparts pio[10];
    string name_of_interface;
    string direction; 
    string partition;
    int no_of_ports;
};

struct pio_subparts
{
    struct corners corner[32]; 
    string pio_name;     
};

struct corners
{
    struct file_structure merging_files[50];
    string corner_name;
    int merginf_files_num;
};

struct file_structure
{
    string file_name;
    string file_type;
    struct reportspecs report[20];
}; 
```

我正在使用 new 运算符为其分配内存

```
struct xlsmain *interface = new xlsmain[60]; 
```

在运行程序时`std::bad_alloc error`显示。请帮忙！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-17T11:10:29.203

您正在尝试分配 60`xlsmain`其中包含 12,000`sub_parts_of_interface`包含 120,000`pio_subparts`包含 3,840,000`corners`包含 192,000,000`file_structure`包含 3,840,000,000 `reportspecs`，并且您没有显示 的​​定义`reportspecs`。所以你试图分配 38 亿个东西并且内存不足。

那是因为您正在运行的系统没有足够的内存来保存您尝试分配的对象。

如果这些结构包含数组，因为这些结构可能包含这些对象，但它们通常不包含最大值，那么摆脱数组并替换它们`std::vector`（在 C++ 中）或指针（在 C 或 C++ 中）。无论使用哪种方法，您都将只为所需的实际对象使用空间以及一些记帐开销，而不是使用理论上可能的最大空间。`std::vector`允许您根据需要添加元素，`std::vector`应用程序将负责分配所需的内存。使用指针，您必须自己分配和释放空间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T11:08:36.623

这很简单。你没有足够的内存。要么购买更多内存，要么重新设计代码。我建议你用零长度向量替换你的数组。这样，您只需将向量增加到您实际需要的大小，而不是始终具有固定大小。这将使用更少的内存并且更加灵活。例如

```
 struct pio_subparts
   {
    vector<corners> corner; 
    string pio_name;     
   }; 
```

如果不确切知道您要做什么，就不可能获得更精确的建议。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T11:10:36.777

@H2CO3 是对的。

在纯 C 中使用这样的东西： [http ://www.elook.org/programming/c/malloc.html](http://www.elook.org/programming/c/malloc.html)

# c# - 流顺序的排序

> ID：12932932
> 
> 赞同：1
> 
> 时间：2012-10-17T11:05:35.277
> 
> 标签：c#, linq, linq-to-sql

返回 test.ToList();

流顺序的排序

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-17T11:06:27.113

使用[Enumerable.OrderBy](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.orderby.aspx)

```
return _Repository.GetAll().Select(x => x.Name)
                           .OrderBy(r => r)
                           .Distinct()
                           .ToList(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T11:06:47.393

[**MSDN 按示例排序**](http://code.msdn.microsoft.com/101-LINQ-Samples-3fb9811b)

像这样订购

```
_Repository.GetAll().Select(x => x.Name).OrderBy(y => y).Distinct().ToList(); 
```

或者

```
_Repository.GetAll().Select(x => x.Name).Distinct().OrderBy(y => y).ToList(); 
```

或者

```
var names = 
        (from u in _Repository.GetAll()
        order by u.Name 
        select u.Name).Distinct(); 
```

订购数据的图像表示

阅读全文：[SQL 到 LINQ（视觉表示）](http://pranayamr.blogspot.ca/2010/12/sql-to-linq-visual-representation.html)

![在此处输入图像描述](../Images/67643c7d7d54f56c5ca488a12df14492.png)

# intersystems-cache - 如何按属性名称在 %DIctionary.ClassDefinition 中查找属性？

> ID：12932938
> 
> 赞同：2
> 
> 时间：2012-10-17T11:05:51.940
> 
> 标签：intersystems-cache

我在一个类中有以下代码行：

```
 Set objDClass = ##class(%Dictionary.ClassDefinition).%OpenId("Dict.ProcCde") 
```

这将创建对另一个类的类定义的对象引用。Dict.ProcCde 类定义了 173 个属性。我希望能够通过它的属性名称（我相信它是 Id）来检索对特定属性的对象引用，但我不知道如何做到这一点，除非创建一个循环来通过 objDClass.Properies 之一有时间并寻找正确的属性名称。当我输入 objDClass.Properties 时。在缓存工作室中，我看到了许多看起来可能有效的方法，但我找不到关于它们的任何文档或使它们有效。具体来说， objDClass.Properties.FindObjectId(PropertyName) 看起来可以解决问题，但没有。其他可能的方法是：FindExistingObjectId、FindObject 但都不起作用。有谁知道检索 %Dictionary 的方法。PropertyDefinition 对象来自 %Dictionary.ClassDefinition 对象的属性名称？谁能指出我上面提到的 .Properties 方法的文档？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T11:50:54.983

s prop=##class(%Dictionary.PropertyDefinition).%OpenId("Dict.ProcCde||SomeProperty")
或
s prop=##class(%PropertyDefinition).%OpenId("Dict.ProcCde:SomeProperty")

# php - PHP表单未发送到同一服务器上的电子邮件地址

> ID：12932939
> 
> 赞同：3
> 
> 时间：2012-10-17T11:05:54.557
> 
> 标签：php, forms, email, contact, mx-record

我在我的网站上使用了一个非常简单的 PHP 表单，但该表单不会将消息发送到我的服务器 IE 上的任何电子邮件

pixology.net/contact.php

不会发送到 brad@pixology.net 但会发送到 bradhouston@gmail.com

这是代码，有什么想法吗？

```
<?php
if(isset($_POST['email'])) {

    // EDIT THE 2 LINES BELOW AS REQUIRED
    $email_to = "brad@tpdesign.co.uk";
    $email_subject = "TP Design Contact Form";

    function died($error) {
        // your error code can go here
        echo "We are very sorry, but there were error(s) found with the form you submitted. ";
        echo "These errors appear below.<br /><br />";
        echo $error."<br /><br />";
        echo "Please go back and fix these errors.<br /><br />";
        die();
    }

    // validation expected data exists
    if(!isset($_POST['first_name']) ||
        !isset($_POST['last_name']) ||
        !isset($_POST['email']) ||
        !isset($_POST['telephone']) ||
        !isset($_POST['comments'])) {
        died('We are sorry, but there appears to be a problem with the form you submitted.');
    }

    $first_name = $_POST['first_name']; // required
    $last_name = $_POST['last_name']; // required
    $email_from = $_POST['email']; // required
    $telephone = $_POST['telephone']; // not required
    $comments = $_POST['comments']; // required

    $error_message = "";
    $email_exp = '/^[A-Za-z0-9._%-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,4}$/';
  if(!preg_match($email_exp,$email_from)) {
    $error_message .= 'The Email Address you entered does not appear to be valid.<br />';
  }
    $string_exp = "/^[A-Za-z .'-]+$/";
  if(!preg_match($string_exp,$first_name)) {
    $error_message .= 'The First Name you entered does not appear to be valid.<br />';
  }
  if(!preg_match($string_exp,$last_name)) {
    $error_message .= 'The Last Name you entered does not appear to be valid.<br />';
  }
  if(strlen($comments) < 2) {
    $error_message .= 'The Comments you entered do not appear to be valid.<br />';
  }
  if(strlen($error_message) > 0) {
    died($error_message);
  }
    $email_message = "Form details below.\n\n";

    function clean_string($string) {
      $bad = array("content-type","bcc:","to:","cc:","href");
      return str_replace($bad,"",$string);
    }

    $email_message .= "First Name: ".clean_string($first_name)."\n";
    $email_message .= "Last Name: ".clean_string($last_name)."\n";
    $email_message .= "Email: ".clean_string($email_from)."\n";
    $email_message .= "Telephone: ".clean_string($telephone)."\n";
    $email_message .= "Comments: ".clean_string($comments)."\n";

// create email headers
$headers = 'From: '.$email_from."\r\n".
'Reply-To: '.$email_from."\r\n" .
'X-Mailer: PHP/' . phpversion();
@mail($email_to, $email_subject, $email_message, $headers);  
?>

<!-- REDIRECTED PAGE ONCE CONTACT FORM IS SUCCESFULL -->

<?php require_once('thankyou.php'); ?>

<?php
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T09:21:47.967

假设您将电子邮件托管在服务器以外的其他地方，您需要确保将其设置为解析为远程交换器。

有关如何在 WHM/cPanel 中执行此操作的信息，[请参阅本文。](https://knowledgebase.servint.net/questions/286/What+is+the+difference+between+Local,+Backup,+and+Remote+Mail+Exchanger+in+cPanel?%20%20)

如果您没有访问权限（例如，您在共享环境中），请联系您的虚拟主机，他们应该能够为您安排。

# ios - 在 iOS 上使用 NEON 乘积

> ID：12932940
> 
> 赞同：2
> 
> 时间：2012-10-17T11:05:57.630
> 
> 标签：ios, arm, neon, llvm-clang

即使我`armv7`只编译，NEON 乘法累加内在函数似乎被分解为单独的乘法和加法。

我在 Xcode 最新 4.5 的多个版本、iOS SDK 5 到 6 以及不同的优化设置（通过 Xcode 和直接通过命令行构建）都体验过这一点。

例如，构建和拆卸一些`test.cpp`包含

```
#include <arm_neon.h>

float32x4_t test( float32x4_t a, float32x4_t b, float32x4_t c )
{
   float32x4_t result = a;
   result = vmlaq_f32( result, b, c );
   return result;
} 
```

和

```
clang++ -c -O3 -arch armv7 -o "test.o" test.cpp
otool -arch armv7 -tv test.o 
```

结果是

```
test.o:
(__TEXT,__text) section
__Z4test19__simd128_float32_tS_S_:
00000000    f10d0910    add.w   r9, sp, #16 @ 0x10
00000004        46ec    mov ip, sp
00000006    ecdc2b04    vldmia  ip, {d18-d19}
0000000a    ecd90b04    vldmia  r9, {d16-d17}
0000000e    ff420df0    vmul.f32    q8, q9, q8
00000012    ec432b33    vmov    d19, r2, r3
00000016    ec410b32    vmov    d18, r0, r1
0000001a    ef400de2    vadd.f32    q8, q8, q9
0000001e    ec510b30    vmov    r0, r1, d16
00000022    ec532b31    vmov    r2, r3, d17
00000026        4770    bx  lr 
```

而不是`vmla.f32`.

请问我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T21:16:15.037

它要么是错误，要么是 llvm-clang 的优化。armcc 或 gcc 会按您的预期生成 vmla，但如果您阅读*Cortex-A 系列程序员指南 v3*，它会说：

> > **20.2.3 调度**
> > 
> > 在某些情况下，可能会有相当长的延迟，尤其是 VMLA 乘法累加（整数 5 个周期；浮点数 7 个周期）。应该优化使用这些指令的代码，以避免在结果值准备好之前尝试使用它，否则会发生停顿。尽管有几个周期会导致延迟，但这些指令确实是完全流水线的，因此可以同时进行多个操作。

因此，llvm-clang 将 vmla 分离为乘法并累加以填充管道是有意义的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T20:37:23.830

霓虹灯乘加指令执行操作

```
c = c + a * b 
```

请注意，目的地和来源之一是相同的。如果要执行操作

```
d = c + a * b 
```

编译器必须将其分解为两条指令

```
d = c
d = d + a * b 
```

或者，它可以将其分解为乘法+加法指令

```
d = a * b
d = d + c 
```

在 Cortex-A8/A9 上，两个变体具有相同的吞吐量，但在 Cortex-A8 上，第二个变体具有较低的延迟，因为乘加指令在许多情况下会导致停顿。

# android - 如何恢复我的 motodev.keystore 密码？

> ID：12932941
> 
> 赞同：1
> 
> 时间：2012-10-17T11:06:02.373
> 
> 标签：android, keystore, motodev-studio

我完全忘记了我的`motodev.keystore`文件的密码，因此无法将此密钥库文件导入另一台运行*MotoDevStudio*的 PC 。有没有办法恢复`motodev.keystore`文件的密码？

# git - 使用 byobu 和 git post-receive hook

> ID：12932944
> 
> 赞同：0
> 
> 时间：2012-10-17T11:06:20.987
> 
> 标签：git, git-post-receive, byobu

作为我的接收后挂钩的一部分，我签出存储库的 HEAD，然后运行我的启动命令。

所以当我做 git push 它工作正常。

问题是，当我通过 SSH 进入盒子时，我使用 byobu。有没有办法让 post-receive 挂钩在 byobu 会话中运行我的启动命令，这样当我 SSH 进入时，我可以看到我的应用程序正在运行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T01:08:26.763

Byobu 只是 or 的一个包装器`screen`，`tmux`所以你想将你的命令发送给其中一个。

如果您使用`tmux`，您可以使用以下命令在 2 号窗口中按字面输入命令，然后按 Enter：

```
tmux send-keys -t 1 "start-app.sh" C-m 
```

要设置`byobu`使用`tmux`，请使用命令`byobu-select-backend`或使用 启动它`byobu-tmux`。

# java - 将一个类定义为 Observable 和 Observer

> ID：12932945
> 
> 赞同：5
> 
> 时间：2012-10-17T11:06:23.320
> 
> 标签：java, design-patterns, observer-pattern

`Class`从技术上讲，将 a 定义为 both`Observable`并`Observer`使用以下代码似乎可以：

```
public class Data extends Observable implements Observer 
```

但是，尝试实施它，它不起作用。

```
public class Data extends Observable implements Observer {

    @Override
    public void update(Observable o, Object o1) {
        System.out.println("SC");        
    }

    Integer A;
    String B;
    Float C;

    public Data() {
        this.addObserver(this);
    }

    public void setA(Integer A) {
        this.A = A;
        notifyObservers();
    }

    public void setB(String B) {
        this.B = B;
        notifyObservers();
    }

    public void setC(Float C) {
        this.C = C;
        notifyObservers(this.C);
    }

} 
```

功能`main`如下：

```
public static void main(String[] args) {
    Data d = new Data();
    d.setA(5);
    d.setB("Hi");
    d.setC(2.0f);
} 
```

它应该打印一些“SC”，但它不工作。谁能描述为什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-17T11:09:26.567

如果不这样做`.setChanged()`，则`.notifyObservers()`没有效果。如果您有单独的定义 Observable 和 Observers 的类，或者您有一个单独的类，例如在您的示例中，就会出现这种情况。

尝试如下更改您的设置器：

```
public void setC(Float C) {
  this.C = C;
  setChanged();  // <-- add this line
  notifyObservers(this.C);
} 
```

从 的文档中**[`Observable`](http://docs.oracle.com/javase/7/docs/api/java/util/Observable.html)**，

> `setChanged()` **将此 Observable 对象标记为已更改**；该`hasChanged`方法现在将返回`true`。
> 
> `notifyObservers(Object arg)` **如果这个对象发生了变化，如`hasChanged`方法**所指示的，则通知其所有观察者，然后调用该`clearChanged`方法以指示该对象不再发生变化。

# php - PHP：使用 bcrypt 进行密码加密

> ID：12932948
> 
> 赞同：3
> 
> 时间：2012-10-17T11:06:30.060
> 
> 标签：php, password-encryption

我还是 PHP 新手。我尝试了 Andrew Moore 先生的方法。密码不匹配。我尝试使用[Andrew Liu 的代码](https://stackoverflow.com/questions/11481199/php-mysql-using-bcrypt-hash-and-verifying-password-with-database/12932732#12932732) 和帖子中的答案。当我尝试 var_dump 时，我没有得到真或假。我不确定我做错了什么。有人可以告诉我吗？

```
$bcrypt = new Bcrypt(15); 
$username = sanitize($username);
$password = $_POST['password'];

DEFINE('DB_USER', 'root');
DEFINE('DB_PASSWORD', 'password');
DEFINE('DB_HOST', 'localhost');
DEFINE('DB_NAME', 'users');

$dbh = @mysqli_connect(DB_HOST, DB_USER, DB_PASSWORD, DB_NAME);
$check_username = $dbh->prepare("SELECT password FROM user WHERE username= '$username'");
$check_username -> execute(array($username));

while($row = $check_username->fetch(PDO::FETCH_ASSOC)){
    $check_password = $row['password'];
    $isGood = $bcrypt->verify($password, $check_password);
    var_dump($isGood);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T23:29:00.037

您可以将散列密码与存储在数据库中的密码进行比较吗？我有类似的问题，然后我意识到 db 中的哈希被截断。将密码列大小从 Varchar(40) 更改为 Varchar(125) 解决了我的问题。

# iphone - CHCSV 问题通过邮件发送

> ID：12932949
> 
> 赞同：0
> 
> 时间：2012-10-17T11:06:33.117
> 
> 标签：iphone, objective-c, export-to-csv

我想从我的 SQLite3 数据库中编写一个 CSV 文件，然后通过电子邮件发送它...要编写我的 CSV 文件，我使用以下功能：

```
- (void) exportCSV {

FMDatabase *dbb = [[FMDatabase alloc] initWithPath:[self getDBPath]];
if (![dbb open]) {
    //couldn't open the database
    [dbb release];
}
FMResultSet *results = [dbb executeQuery:@"SELECT * FROM Daten"];
CHCSVWriter *csvWriter = [[CHCSVWriter alloc] initWithCSVFile:[self getCSVPath] atomic:NO];
while([results next]) {
    NSDictionary *resultRow = [results resultDictionary];
    NSArray *orderedKeys = [[resultRow allKeys] sortedArrayUsingSelector:@selector(compare:)];
    //iterate over the dictionary
    for (NSString *columnName in orderedKeys) {
        id value = [resultRow objectForKey:columnName];
        [csvWriter writeField:value];
    }
    [csvWriter writeLine];
}
[csvWriter closeFile];
[csvWriter release];

[dbb close];
[dbb release];

} 
```

这是我通过邮件发送 csv 的功能：

```
- (void)actionEmailComposer {

if ([MFMailComposeViewController canSendMail]) {

    MFMailComposeViewController *mailViewController = [[MFMailComposeViewController alloc] init];
    mailViewController.mailComposeDelegate = self;
    [mailViewController setSubject:@"Subject Goes Here"];
     [mailViewController setMessageBody:@"Your message goes here" isHTML:NO];
    mailViewController.navigationBar.tintColor = [UIColor blackColor];
    NSString *filePath = [[NSBundle mainBundle] pathForResource:@"Speed" ofType:@"csv"];
    NSData *myData = [NSData dataWithContentsOfFile:filePath];

    NSString *fileName = @"Speed.csv";

            [mailViewController addAttachmentData:myData mimeType:@"text/csv" fileName:fileName];

      [self presentViewController:mailViewController animated:YES completion:nil];
      [mailViewController release];

      }

      else {

          NSLog(@"Device is unable to send email in its current state.");

      }

      } 
```

问题是，我的邮件没有附件……其他附件，如 png、jpg 甚至 txt，没有任何问题！

# sql - 将多行连接成一个字符串

> ID：12932950
> 
> 赞同：1
> 
> 时间：2012-10-17T11:06:37.893
> 
> 标签：sql, oracle, oracle10g, string-aggregation

我在 Oracle 中有 2 个表：table1 和 table2（我们有一个非常缺乏想象力的 DBA！）

table1 具有列 id （以及其他一些）。

table2 有列 id、table1id 和 code。table1id 是 table1 的外键。

通常每个 table1 行有 1 个 table2 行，但有时一个 table1 行有 2 个 table2 行，偶尔有 3 个。

我需要的是每个 table1 行的单个“代码”值。如果有多个对应的 table2 行，我需要返回所有值的串联字符串，因此结果可能如下所示：

```
table1.id     code
1             a
2             b
3             a b
4             a b c 
```

知道如何实现吗？如果是 SQL Server，我会编写一个函数，尽管这会比我想要的要慢。但是，我在 Oracle 中的热度不如在 SQL Server 中的热度。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T11:10:46.073

您没有指定 Oracle 的版本，但是。如果您使用的是 Oracle 11g，那么您可以使用以下[`LISTAGG()`](http://docs.oracle.com/cd/E14072_01/server.112/e10592/functions087.htm)功能：

```
select t1.id,
    listagg(t2.code, ' ') within group(order by t1.id) code
from table1 t1
left join table2 t2
    on t1.id = t2.id
group by t1.id 
```

如果您使用的是 Oracle 10g，那么您可以使用`WM_CONCAT`：

```
select t1.id,
    WM_CONCAT(t2.code) code
from table1 t1
left join table2 t2
    on t1.id = t2.id
group by t1.id 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T11:55:08.923

@bluefeet 有正确的解决方案，但如果你在 10g 中并且由于某种原因不想使用 WM_CONCAT（例如，它没有记录），还有另一个：

```
select t1.id, 
   RTRIM(XMLAGG(XMLELEMENT(e,code,',').EXTRACT('//text()')),',') code 
from table1 t1
left join table2 t2 
   on t1.id = t2.id
group by t1.id 
```

# c# - 我需要一些使用图表的线索

> ID：12932956
> 
> 赞同：0
> 
> 时间：2012-10-17T11:07:03.807
> 
> 标签：c#, javascript, jquery, asp.net-mvc, charts

我是n00bie。很抱歉，如果这对你们中的某些人来说不是一个合适的问题。也许有人会帮助我。我想在 C#/.net 中开发一个带有一些控件和 ajax 可更新图表（基于 MVC）的简单工具。我找到了一个简单而干净的教程。但它是在 2010 年写的。我想知道它是否有点现代？或者已经改变了什么并且这种风格已经过时了？如果在按下某些按钮后使用 jquery 在图表上执行更新是一个好主意，我特别感兴趣？

我还包括本教程的一个片段，所以也许你能让我变得更好：

```
<%@ Page Title="" Language="C#" MasterPageFile="~/Views/Shared/Site.Master" Inherits="System.Web.Mvc.ViewPage<dynamic>" %>

<asp:Content ID="Content1" ContentPlaceHolderID="TitleContent" runat="server">
    Annual Sales Data (With Fancy JavaScript!)
</asp:Content>

<asp:Content ID="Content3" ContentPlaceHolderID="HeadContent" runat="server">
    <script type="text/javascript">
        $(document).ready(function () {
            // Populate the Categories and Years DDLs with the values from the server
        $.getJSON('/Api/Years',        // URL that returns data of interest
                  function (result) {       // The function that executes once the data has been returned
                      var years = $("#years");
                      $.each(result, function (index, year) {
                          years.append($("<option />").val(year).text(year));
                      });

                      $.getJSON('<%=Page.ResolveClientUrl("~/Api/Categories")%>',        // URL that returns data of interest
                          function (result) {       // The function that executes once the data has been returned
                              var categories = $("#categories");
                              $.each(result, function (index, categoryName) {
                                  categories.append($("<option />").val(categoryName).text(categoryName));
                              });

                              // Load the image
                              UpdateImage();
                           });
                  });

            // Add client-side event handlers to these DDLs
            $("#years").change(UpdateImage);
            $("#categories").change(UpdateImage);
        });

        function UpdateImage() {
            var selectedYear = $("#years").val();
            var selectedCategory = $("#categories").val();

            $("#chart").fadeOut(function () {
                $(this).attr('src', '/Charts/SalesByYear?CategoryName=' + escape(selectedCategory) + '&OrderYear=' + escape(selectedYear) + '&showTitle=false')
                       .attr('alt', 'Sales for ' + selectedCategory + ' in ' + selectedYear)
                       .attr('title', 'Sales for ' + selectedCategory + ' in ' + selectedYear);

                $(this).fadeIn();
            });
        }
    </script>
</asp:Content>

<asp:Content ID="Content2" ContentPlaceHolderID="MainContent" runat="server">

    <h2>Annaul Sales Data (With Fancy JavaScript)</h2>
    <p>
        This demo shows how to gussy up the sales data charting example using a tad of JavaScript and jQuery.
    </p>
    <div style="text-align: center">
        <h2 style="text-align: center">Sales For <select id="categories"></select> In <select id="years"></select></h2>
        <img id="chart" style="display:none" />
    </div>
</asp:Content> 
```

任何人都可以向我推荐任何教程，我可以在其中了解如何使用 flotcharts 实现基于 mvc 的 Web 应用程序？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T13:38:15.440

我会看类似 flot [http://www.flotcharts.org/](http://www.flotcharts.org/)的东西， 而不是在服务器端生成图像。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-29T11:42:35.767

您可能想检查[jqPlot](http://www.jqplot.com/)。它是一个非常好的使用 jQuery 的图形插件。

# javascript - 根据条件从选择列表中删除值

> ID：12932959
> 
> 赞同：38
> 
> 时间：2012-10-17T11:07:07.197
> 
> 标签：javascript, html, validation

我在页面中有以下内容

```
<select name="val" size="1" >
<option value="A">Apple</option>
<option value="C">Cars</option>
<option value="H">Honda</option>
<option value="F">Fiat</option>
<option value="I">Indigo</option>                    
</select> 
```

如果某些条件为真，我想从我的选择中删除某些值。

例如

```
if(frm.product.value=="F"){
  // remove Apple and Cars from the select list
} 
```

如何使用 javascript 执行此操作

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-10-17T11:14:55.143

为 select 对象提供一个 id，如下所示：

```
<select id="mySelect" name="val" size="1" >
    <option value="A">Apple</option>
    <option value="C">Cars</option>
    <option value="H">Honda</option>
    <option value="F">Fiat</option>
    <option value="I">Indigo</option>                    
</select> 
```

你可以在纯 JavaScript 中做到这一点：

```
var selectobject = document.getElementById("mySelect");
for (var i=0; i<selectobject.length; i++) {
    if (selectobject.options[i].value == 'A')
        selectobject.remove(i);
} 
```

But - as the other answers suggest - it's a lot easier to use jQuery or some other JS library.

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-10-17T11:18:41.353

with pure javascript

```
var condition = true; // your condition
if(condition) {
    var theSelect = document.getElementById('val');
    var options = theSelect.getElementsByTagName('OPTION');
    for(var i=0; i<options.length; i++) {
        if(options[i].innerHTML == 'Apple' || options[i].innerHTML == 'Cars') {
            theSelect.removeChild(options[i]);
            i--; // options have now less element, then decrease i
        }
    }
} 
```

not tested with IE (if someone can confirm it...)

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2014-04-11T07:44:03.333

Check the JQuery solution [here](https://stackoverflow.com/a/375573/2174170)

```
$("#selectBox option[value='option1']").remove(); 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2016-03-28T08:04:14.410

The index I will change as soon as it removes the 1st element. This code will remove values 52-140 from wifi channel combo box

```
obj = document.getElementById("id");
if (obj)
{
        var l = obj.length;
        for (var i=0; i < l; i++)
        {
            var channel = obj.options[i].value;

            if ( channel >= 52 &&  channel <= 140 )
            {
                obj.remove(i);
                i--;//after remove the length will decrease by 1 
            }
        }
    } 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2018-03-04T14:52:06.160

As some mentioned the length of the select element decreases when removing an option. If you just want to remove one option this is not an issue but if you intend to remove several options you could get into problems. Some suggested to decrease the index manually when removing an option. In my opinion manually decreasing an index inside a for loop is not a good idea. This is why I would suggest a slightly different for loop where we iterate through all options from behind.

```
var selectElement = document.getElementById("selectId");

for (var i = selectElement.length - 1; i >= 0; i--){
  if (someCondition) {
    selectElement.remove(i);
  }
} 
```

If you want to remove all options you can do something like this.

```
var selectElement = document.getElementById("selectId");

while (selectElement.length > 0) {
  selectElement.remove(0);
} 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2012-10-17T11:11:56.697

如果您使用的是 JQuery，则如下所示：

为您的 SELECT 提供一个 ID

```
<select name="val" size="1" id="val">
<option value="A">Apple</option>
<option value="C">Cars</option>
<option value="H">Honda</option>
<option value="F">Fiat</option>
<option value="I">Indigo</option>                    
</select>

$("#val option[value='A'],#val option[value='C']").remove(); 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2020-04-07T13:39:21.640

To remove options in a select by value I would do (in pure JS) :

```
[...document.getElementById('val').options]
    .filter(o => o.value === 'A' || o.value === 'C')
    .forEach(o => o.remove()); 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2012-10-17T11:09:43.760

您可以使用：

```
if ( frm.product.value=="F" ){
    var $select_box = $('[name=val]');
    $select_box.find('[value=A],[value=C]').remove(); 
} 
```

**更新**：如果你修改你的选择框有点这个

```
<select name="val" size="1" >
  <option id="A" value="A">Apple</option>
  <option id="C" value="C">Cars</option>
  <option id="H" value="H">Honda</option>
  <option id="F" value="F">Fiat</option>
  <option id="I" value="I">Indigo</option>                    
</select> 
```

非 jQuery 解决方案是这样的

```
if ( frm.product.value=="F" ){
    var elem = document.getElementById('A');
    elem.parentNode.removeChild(elem);
    var elem = document.getElementById('C');
    elem.parentNode.removeChild(elem);
} 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2012-10-17T11:13:17.687

```
if(frm.product.value=="F"){
    var select = document.getElementsByName('val')[0];
    select.remove(0);
    select.remove(1);
} 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2012-10-17T11:21:54.547

You have to go to its parent and remove it from there in javascript.

"Javascript won't let an element commit suicide, but it does permit infanticide"..:)

try this,

```
 var element=document.getElementsByName(val))
 element.parentNode.removeChild(element.options[0]); // to remove first option 
```

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2012-10-17T11:28:51.830

This should do it

```
document.getElementsByName("val")[0].remove(0);
document.getElementsByName("val")[0].remove(0); 
```

Check the fiddle [here](http://jsfiddle.net/5H4hV/1/)

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2016-09-16T19:35:37.920

Alternatively you can also accomplish this with **getElementsByName**

```
<select id="mySelect" name="val" size="1" >
<option value="A">Apple</option>
<option value="C">Cars</option>
<option value="H">Honda</option>
<option value="F">Fiat</option>
<option value="I">Indigo</option>                    
</select> 
```

So in matching on the option value of "C" we could remove Cars from the list.

```
var selectobject = document.getElementsByName('val')[0];
for (var i=0; i<selectobject.length; i++){
if (selectobject.options[i].value == 'C' )
    selectobject.remove(i);
  } 
```

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2012-10-17T11:09:02.927

```
document.getElementById(this).innerHTML = ''; 
```

把它放在你的 if-case 中。它所做的只是检查文档中的当前对象并将其替换为空。您将首先遍历列表，我猜您已经这样做了，因为您有那个 if。

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2019-05-04T15:56:06.763

For clear all options en Important en FOR : remove(0) - Important: 0

```
var select = document.getElementById("element_select");
var length = select.length;
for (i = 0; i < length; i++) {
     select.remove(0);
 //  or
 //  select.options[0] = null;
} 
```

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2019-10-30T14:06:12.590

The best answer is this

```
function f1(){
  var r=document.getElementById('ms');
  for(i=0;i<r.length;i++)
    if(r.options[i].selected==true)
    {
      r.remove(i);
      i--;
    }
}
```

```
<select id="ms" size="5" multiple="multiple">
<option>A</option>
<option>B</option>
<option>C</option>
<option>D</option>
<option>E</option>
<option>F</option>
</select>
<input type="button" value="btn1" id="b1" onclick="f1()"/>
```

Because your visitor can also add custom options as he want and delete them without need any info about his options . This code is the most responsive delete code that you can write as your selected delete..

enjoy it:))))

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2020-02-12T16:01:23.660

A simple working solution using vanilla JavaScript:

```
const valuesToRemove = ["value1", "value2"];

valuesToRemove.forEach(value => {
    const mySelect = document.getElementById("my-select");

    const valueIndex = Array.from(mySelect.options).findIndex(option => option.value === value);

    if (valueIndex > 0) {
        mySelect.options.remove(valueIndex);
    }
}); 
```

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2021-05-04T15:40:12.817

Other way

```
document.querySelectorAll('#select option').forEach(i=>{
      if(frm.product.value == i.value){
         i.remove();
      }else {}
 }) 
```

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2020-11-05T14:04:42.577

A few caveats not covered in most answers:

*   Check against multiple items (some should be deleted, some should remain)
*   Skip the first option (-Select-) on some option lists

A take on these:

```
const eligibleOptions = ['800000002', '800000001'];
let optionsList = document.querySelector("select#edit-salutation");
for (let i = 1; i<optionsList.length; i++) {
    if(eligibleOptions.indexOf(optionsList.options[i].value) === -1) {
        cbxSal.remove(i);
        i--;
    }
} 
```

* * *

## 回答 #19

> 赞同：-1
> 
> 时间：2012-10-17T11:09:32.863

删除选项

```
$("#val option[value='A']").remove(); 
```

# c# - 如何设置 SQL Server Compact 数据库的相对路径？

> ID：12932963
> 
> 赞同：1
> 
> 时间：2012-10-17T11:07:23.037
> 
> 标签：c#, sql-server-ce

如何编写紧凑型数据库的路径，使其适用于从事该项目的每个人？

我的本地路径如下所示：

```
SqlCeConnection con = 
    new SqlCeConnection(@"Data Source=C:\Users\Name\Documents\Visual Studio 2012\Projects\Unwanted\Local\Path\App_Data\Databas.sdf"); 
```

我想我已经看到人们使用“~”符号来做这样的事情，无论如何我想让这种连接对每个人都是可行的，无论他们的映射看起来如何。

希望我说清楚了！:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T11:33:51.070

波浪号 ( `~`) 在**ASP.NET**中用于表示网站的根 - 但是它不能用于 SQL Server CE 连接字符串。

你可以尝试只使用

```
SqlCeConnection con = 
    new SqlCeConnection(@"Data Source=App_Data\Database.sdf"); 
```

然后 .NET 应用程序将查看当前目录（从它开始的位置 - 通常是`(project dir)\bin\debug`文件夹）以查找`App_Data`文件夹和该`Database.sdf`文件夹内的文件。

# objective-c - xcode ipad uiwebview 刷新 白闪

> ID：12932964
> 
> 赞同：0
> 
> 时间：2012-10-17T11:07:40.157
> 
> 标签：objective-c, xcode, ipad

我有一个网站，我在我的 ipad 的 UIWebview 中加载。5分钟后我刷新，问题是当页面刷新时你看到一个白色的闪光，是否可以用旋转的轮子替换这个白色的闪光？

我用这段代码做的刷新：

```
- (void)viewDidLoad
{
    NSString *urlString = @"http://pmcuserportal.azurewebsites.net/pmc/index.php";
    NSURL *url = [NSURL URLWithString:urlString];
    NSURLRequest *request = [NSURLRequest requestWithURL:url];
    [webDisplayiPad loadRequest:request];

    [NSTimer scheduledTimerWithTimeInterval:300 target:self selector:@selector(updateWeb) userInfo:nil repeats:YES];

    [super viewDidLoad];

    // Do any additional setup after loading the view, typically from a nib.
}

-(void)updateWeb
{
    [webDisplayiPad reload];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T11:24:58.687

在此处查看 UIWebView 类参考[http://developer.apple.com/library/ios/ipad/#documentation/uikit/reference/UIWebView_Class/Reference/Reference.html](http://developer.apple.com/library/ios/ipad/#documentation/uikit/reference/UIWebView_Class/Reference/Reference.html)

我自己没有尝试过，但听起来如果您使用布尔属性 SupressesIncrementalRendering 它可能会对您的情况有所帮助。

还有一个加载属性，您也可以利用它。您可以尝试先在 updateWeb 方法中显示 UIActivityIndi​​cator，然后在不断检查 loading 属性的值的同时进行重新加载，一旦 loading 的值等于 NO，您可以停止动画并隐藏 UIActivityIndi​​cator。

同样，我没有尝试过这两个建议中的任何一个，但听起来它们可能会起作用，试一试。

# sql - SQL 返回两个传入日期之间的工作日数

> ID：12932965
> 
> 赞同：1
> 
> 时间：2012-10-17T11:07:41.617
> 
> 标签：sql, oracle, date, plsql, datediff

我需要编写一个 sql 查询，返回两个给定日期之间的工作日数（周一 - 周五）。

我想知道最有效的方法是什么？

```
SELECT           --Start with total number of days including weekends             
(DATEDIFF(dd,@StartDate,@EndDate)+1) --Subtact 2 days for each full weekend 
(DATEDIFF(wk,@StartDate,@EndDate)*2) --If StartDate is a Sunday, Subtract 1          
ELSE 0               END)            --If EndDate is a Saturday, Subtract 1 
FROM dual 
```

然后，能够从该计数中删除假期（例如圣诞节和节礼日）也会很有帮助。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-09-03T13:45:35.730

计算两个日期之间的工作日数的简单方法是：

```
SELECT
date1,
date2,
((date2-date1)-2*FLOOR((date2-date1)/7)-DECODE(SIGN(TO_CHAR(date2,'D')-
    TO_CHAR(date1,'D')),-1,2,0)+DECODE(TO_CHAR(date1,'D'),7,1,0)-
    DECODE(TO_CHAR(date2,'D'),7,1,0))*24 as WorkDays
FROM
  tablename
ORDER BY date1,date2 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-17T15:04:35.067

就是这么简单：

```
 SQL> Select count(*)
      2  from ( select rownum rnum
      3          from all_objects
      4        where rownum <= to_date('18-dec-2009','dd-mon-yyyy') - 
    to_date('16-nov-2009')+1 )
      5    where to_char( to_date('16-nov-2009','dd-mon-yyyy')+rnum-1, 'DY' )
      6                not in ( 'SAT', 'SUN' )

      COUNT(*)
    ----------
            25

    SQL> Select to_char( to_date('16-nov-2009','dd-mon-yyyy')+rnum-1, 'DY dd-mon-yyyy' )
      2  from ( select rownum rnum
      3          from all_objects
      4        where rownum <= to_date('18-dec-2009','dd-mon-yyyy') - to_date('16-nov-2009')+1 )
      5    where to_char( to_date('16-nov-2009','dd-mon-yyyy')+rnum-1, 'DY' )
      6                not in ( 'SAT', 'SUN' )

DAY_DATE
---------------
MON 16-nov-2009
TUE 17-nov-2009
WED 18-nov-2009
THU 19-nov-2009
FRI 20-nov-2009
MON 23-nov-2009
TUE 24-nov-2009
WED 25-nov-2009
THU 26-nov-2009
FRI 27-nov-2009
MON 30-nov-2009
TUE 01-dec-2009
WED 02-dec-2009
THU 03-dec-2009
FRI 04-dec-2009
MON 07-dec-2009
TUE 08-dec-2009
WED 09-dec-2009
THU 10-dec-2009
FRI 11-dec-2009
MON 14-dec-2009
TUE 15-dec-2009
WED 16-dec-2009
THU 17-dec-2009
FRI 18-dec-2009

25 rows selected. 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-17T11:23:43.593

这是一个例子

```
with given_days(d) as(
  select <<start_date>> + level - 1
    from dual
  connect by level < = (<<end_date>> - <<start_date>>) + 1
)
select count(*)
  from given_days
where to_char(d, 'DY', 'NLS_DATE_LANGUAGE=english') not in ('SUN', 'SAT') 
```

示范

```
HR\XE> with given_days as(
  2    select (to_date('&&1', 'dd.mm.yyyy') + level - 1) as g_day
  3      from dual
  4    connect by level < = (to_date('&2', 'dd.mm.yyyy') - to_date('&&1', 'dd.mm.yyyy')) + 1
  5  )
  6  select count(g_day) as cnt
  7    from given_days
  8  where to_char(g_day, 'DY', 'NLS_DATE_LANGUAGE=english') not in ('SUN', 'SAT');
Enter value for 1: 10.10.2012
old   2:   select to_date('&&1', 'dd.mm.yyyy') + level - 1
new   2:   select to_date('10.10.2012', 'dd.mm.yyyy') + level - 1
Enter value for 2: 17.10.2012
old   4:   connect by level < = (to_date('&2', 'dd.mm.yyyy') - to_date('&&1', 'dd.mm.yyyy')) + 1
new   4:   connect by level < = (to_date('17.10.2012', 'dd.mm.yyyy') - to_date('10.10.2012', 'dd.mm.yyyy')) + 1

  cnt                                                                     
----------                           
   6 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-04-09T22:15:16.057

它可以通过以下方式实现：

```
select  SUM(decode ( to_CHAR((sysdate-ROWNUM),'DY'),'SUN',0,'SAT',0,1)) from all_objects where rownum < sysdate -  (sysdate -9) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-08-21T15:12:22.467

我就是这样做的，假设您已经有一个带有列的日历表，该列指示一天是否是工作日：向您的日历表添加一个新列，例如 workday_num 并使用运行编号填充一次

```
sum(case when workingday then 1 else 0 end)
over (order by calendardate rows unbounded preceding) 
```

现在它是您日历的两个连接，以及 p_start_date 和 p_end_date 的 workday_nums 的简单区别。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-08-21T15:06:20.103

干得好...

1.  首先检查您在假期表中有多少天，不包括周末。
2.  获取两个日期之间的工作日（周一至周五），然后减去假期。

    ```
    create or replace
    FUNCTION calculate_business_days (p_start_date IN DATE, p_end_date IN DATE)
            RETURN NUMBER IS
            v_holidays     NUMBER;
            v_start_date   DATE   := TRUNC (p_start_date);
            v_end_date     DATE   := TRUNC (p_end_date);
            BEGIN
            IF v_end_date >= v_start_date
            THEN
                    SELECT COUNT (*)
                    INTO v_holidays
                    FROM holidays
                    WHERE day BETWEEN v_start_date AND v_end_date
                    AND day NOT IN (
                            SELECT hol.day 
                            FROM holidays hol 
                            WHERE MOD(TO_CHAR(hol.day, 'J'), 7) + 1 IN (6, 7)
                    );

            RETURN   GREATEST (NEXT_DAY (v_start_date, 'MON') - v_start_date - 2, 0)
                 +   (  (  NEXT_DAY (v_end_date, 'MON')
                         - NEXT_DAY (v_start_date, 'MON')
                        )
                      / 7
                     )
                   * 5
                 - GREATEST (NEXT_DAY (v_end_date, 'MON') - v_end_date - 3, 0)
                 - v_holidays;
            ELSE
                    RETURN NULL;
            END IF;
    END calculate_business_days; 
    ```

之后，您可以对其进行测试，例如：

```
 select 
            calculate_business_days('21-AUG-2013','28-AUG-2013') as business_days 
    from dual; 
```

# asp.net-mvc - MVC 4 捆绑文件更改 - 是否重新编译？它会失去会话吗？

> ID：12932966
> 
> 赞同：1
> 
> 时间：2012-10-17T11:07:42.247
> 
> 标签：asp.net-mvc, asp.net-mvc-4, bundling-and-minification

MVC 4 宣扬缩小和捆绑 javascript 和 css 资源的有用性。

有谁知道更改捆绑文件是否会导致重新编译或删除当前活动的会话，就像更改本地化资源一样？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T12:17:57.890

好吧，由于捆绑文件是 CSS 和 JavaScript 文件之类的内容文件，因此更改其中之一肯定不需要重新编译，也不会丢弃活动会话。但是，它将要求客户端在后续请求中下载新版本的捆绑包。

# com - Inspector 和 InspectorClass 的区别

> ID：12932968
> 
> 赞同：1
> 
> 时间：2012-10-17T11:07:51.920
> 
> 标签：com, outlook, vsto, outlook-addin, coclass

我一直在查看 VSTO 库，主要是为了好玩，我注意到有一些东西叫做`Inspector`as well as `InspectorClass`.

有什么区别，为什么会在那里，我该如何使用它？*（注意，我不是在寻找关于**如何**使用这些类进行编码的答案，而是在寻找某种架构模式背后的基本原理。纯粹是学术好奇心。）*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T15:38:41.520

[`InspectorClass`](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.outlook.inspectorclass.aspx)是COM 接口的一个[coclass](http://en.wikipedia.org/wiki/Component_Object_Model#Classes)（*具体实现*） （*例如，它是一个带有元数据 + 代码的 COM 对象*）。An可以直接实例化，即使它纯粹作为接口定义存在（[*它实际上是*](https://stackoverflow.com/a/1093623/175679)[*在幕后*](https://stackoverflow.com/a/1093623/175679)实例化）。[`Inspector`](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.outlook.inspector.aspx)*`Inspector`[*`InspectorClass`*](https://stackoverflow.com/a/1093623/175679)*

 *`InspectorClass`可以实例化，因为它表示一个具体的类实例，尽管随着[VSTO 添加了对在 .NET 4 中嵌入互操作类型的](http://badecho.com/2010/08/office-and-embedded-interop-types/)支持-[不再使用](https://stackoverflow.com/a/4553402/175679)[对`*Class`](https://stackoverflow.com/a/4553402/175679)使用的支持，并且或多或少地存在[向后兼容性](http://msdn.microsoft.com/en-us/library/office/aa155703%28v=office.10%29.aspx#odc_oladdinvbnet_topic2)。

所有这一切都是说你现在应该使用`Inspector`而不是`InspectorClass`可以包含可执行代码的。来自[MSDN 博客](http://blogs.msdn.com/b/mshneer/archive/2009/12/07/interop-type-xxx-cannot-be-embedded-use-the-applicable-interface-instead.aspx)：

> *...嵌入元数据是安全的，但不是任何可能包含可执行代码的东西（**类类型包含元数据和代码，而接口只包含元数据**）*

从这个语句中，您可以推断出`InspectorClass`包含可执行代码，而`Inspector`没有 - 它纯粹是一个接口（*元数据*）。这意味着嵌入互操作类型不允许支持`*Class`实现。*

# accordion - 手风琴不工作

> ID：12932969
> 
> 赞同：4
> 
> 时间：2012-10-17T11:07:52.617
> 
> 标签：accordion, jquery-ui-accordion

我正在尝试使用手风琴。我正在使用的功能是

```
$(function() {
    $("#accordion").accordion({
        collapsible: true,
        heightStyle: "content"
    });
}); 
```

该功能可以正常工作，但前提是我在使用手风琴的同一页面上添加库。

```
<script src="http://code.jquery.com/jquery-1.8.2.js"></script>
<script src="http://code.jquery.com/ui/1.9.0/jquery-ui.js"></script> 
```

当我下载css文件并在view.yml中给出路径时。但是如果我对 js 文件做同样的事情（下载它们并在 view.yml 中给出路径）它似乎不起作用。我想在许多页面中重复使用它们，这就是为什么我不想在每个页面中都包含 Web 路径。

其次，如果我在页面上给出路径，则引导程序似乎无法正常工作，会发生冲突或其他事情。给我解决方案。我如何避免在所有页面中给出路径。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-12T10:07:01.310

您将需要一个共享视图或布局视图，其中包含对所有页面上使用的公共脚本文件的引用。然后你可以在那个地方包含脚本标签。

例如，在 ASP.NET-MVC 中，如果您使用的是 razor 视图，则“_Layout.cshtml”文件应该已经在“_ViewStart.cshtml”文件中被引用。如果没有，您可以在任何文件中添加对共享视图的引用，如下所示：

```
@{Layout = "~/Views/Shared/_Layout.cshtml";} 
```

然后确保在 _Layout 文件中包含必要的脚本。

您可以在 php 中执行类似的操作，只需向每个视图添加一个包含语句，如下所示：

```
< ? php include 'header.php'; ?> 
```

然后只需引用 jquery 的副本或从 header.php 文件中的 CDN 拉取它。

有关更多信息，请尝试以下链接：
ASP.NET-MVC： [http ://www.w3schools.com/aspnet/mvc_layout.asp](http://www.w3schools.com/aspnet/mvc_layout.asp)

PHP：[http ://www.w3schools.com/php/php_includes.asp](http://www.w3schools.com/php/php_includes.asp)

# objective-c - ios设置包中的简单标题输出

> ID：12932974
> 
> 赞同：17
> 
> 时间：2012-10-17T11:08:19.547
> 
> 标签：objective-c, ios, xml

我只想在设置文件中输出我的 ios 应用程序的版本号。

我知道我必须将设置文件添加到应用程序文件夹。

当我构建和运行时，我可以看到标准设置包附带的 4 个设置。

为了获得一个简单的只读字符串，我将第二个值更改为以下

![在此处输入图像描述](../Images/3c7c8f195f2ee901fc6140389ba13819.png)

在代码 (didFinishLaunchingWithOptions:) 中，我调用以下代码：

```
NSString *version = [[[NSBundle mainBundle] infoDictionary] objectForKey:@"CFBundleVersion"];
[[NSUserDefaults standardUserDefaults] setValue:version forKey:@"version_number"];
[[NSUserDefaults standardUserDefaults] synchronize]; 
```

令我惊讶的是，什么都没有发生。我只看到 Group 元素、togle 开关和滑块，但没有看到标题行。有人知道我错过了什么吗？

非常感谢！

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2014-03-28T12:22:47.663

我遇到过同样的问题。要在其中显示 Title 属性，`Settings.bundle`您还需要添加“默认值”（它可能为空）。

1) 右键单击​​ Title 对象（在我的例子中是 Item 0）并选择 Add Row。

2）在创建行的下拉菜单中选择“默认值”

![在此处输入图像描述](../Images/02c0a396f4d574ccdf5360a70a4b9a72.png)

3) 在`didFinishLaunchingWithOptions`设定值中`NSUserDefaults`要显示，例如：

```
NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
[defaults setValue:@"0.0.1" forKey:@"appVersion"];
[defaults synchronize]; 
```

结果：

![在此处输入图像描述](../Images/f01a6dfd5372c8312c93d578bfec557d.png)

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-10-31T18:24:12.877

好的，我也有这个问题。解决方案（有点）是提供一个默认值字段并给它一个值。这实际上在文档中明确说明 - 默认值是 Title 属性的必填字段，因此如果您不指定它，标题将不会显示在设置窗格中。不幸的是，一旦设置，我似乎无法更改值，也可能按设计 - 文档还指出它是只读属性。我要尝试的解决方案是在每次构建新版本时明确地将版本号放入我的 Root.plist 文件中。我认为超级不理想，但会起作用。

编辑：查看[这篇关于更新设置包中的版本号的帖子](https://stackoverflow.com/a/1061864/1166029)

编辑：好的，我得到了这个工作（感谢上面的那个帖子，以及我对 bash 脚本的一些修改，我对此几乎没有经验。）这是脚本（我只是在“运行脚本”构建中内联编写的阶段）：

```
#!/bin/bash

builtInfoPlistPath=${TARGET_BUILD_DIR}/${INFOPLIST_PATH}

#increment the build number
buildNumber=$(/usr/libexec/PlistBuddy -c "Print :CFBundleVersion" "$builtInfoPlistPath")
buildNumber=$(($buildNumber + 1))
/usr/libexec/PlistBuddy -c "Set :CFBundleVersion $buildNumber" "$builtInfoPlistPath"

#compose the version number string
versionString=$(/usr/libexec/PlistBuddy -c "Print :CFBundleShortVersionString" "$builtInfoPlistPath")
versionString+=" ("
versionString+=$(/usr/libexec/PlistBuddy -c "Print :CFBundleVersion" "$builtInfoPlistPath")
versionString+=")"

#write the version number string to the settings bundle
#IMPORTANT: this assumes the version number is the first property in the settings bundle!
/usr/libexec/PlistBuddy -c "Set :PreferenceSpecifiers:0:DefaultValue $versionString" "Settings.bundle/Root.plist" 
```

……就是这样！奇迹般有效！希望对您的问题有所帮助，因为它解决了我的问题。现在唯一的问题是与内部版本号略有不同...

编辑：...我用[vakio 对这篇文章的第二条评论进行了](https://stackoverflow.com/a/4203459/1166029)修复，而是将 info.plist 的路径设置为已经处理的路径（在运行脚本阶段之前！）

编辑：这是我的最新版本，它位于外部文件中，并在增加内部版本号之前验证某些源文件是否已更改：

```
 #!/bin/bash

 #note: for simplicity, it's assumed that there's already a bundle version (which is an integer) and a version string. set them in the Summary pane!

 #get path to the BUILT .plist, NOT the packaged one! this fixes the off-by-one bug
 builtInfoPlistPath=${TARGET_BUILD_DIR}/${INFOPLIST_PATH}
 echo "using plist at $builtInfoPlistPath"

 modifiedFilesExist=false
 #this is the modification date to compare to -- there's a possible bug here, if you edit the built plist directly, for some reason. probably you shouldn't do that anyways.
 compModDate=$(stat -f "%m" "$builtInfoPlistPath")

 for filename in *
 do
     modDate=$(stat -f "%m" "$filename")
     if [ "$modDate" -gt "$compModDate" ]
     then
         modifiedFilesExist=true;
         echo "found newly modified file: $filename"
         break
     fi
 done

 if $modifiedFilesExist
 then
     echo "A file is new, bumping version"

     #increment the build number
     buildNumber=$(/usr/libexec/PlistBuddy -c "Print :CFBundleVersion" "$builtInfoPlistPath")
     echo "retrieved current build number: $buildNumber"
     buildNumber=$(($buildNumber + 1))
     /usr/libexec/PlistBuddy -c "Set :CFBundleVersion $buildNumber" "$builtInfoPlistPath"
     /usr/libexec/PlistBuddy -c "Set :CFBundleVersion $buildNumber" "$INFOPLIST_FILE"

     #compose the version number string
     versionString=$(/usr/libexec/PlistBuddy -c "Print :CFBundleShortVersionString" "$builtInfoPlistPath")
     versionString+=" ("
     versionString+=$(/usr/libexec/PlistBuddy -c "Print :CFBundleVersion" "$builtInfoPlistPath")
     versionString+=")"

     #write the version number string to the settings bundle
     #IMPORTANT: this assumes the version number is the second property in the settings bundle!
     /usr/libexec/PlistBuddy -c "Set :PreferenceSpecifiers:1:DefaultValue $versionString" "Settings.bundle/Root.plist"
 else
     echo "Version not incremented -- no newly modified files"
 fi 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-17T11:26:55.817

您可以将 Settings 捆绑包同步到`NSUserDefaults`，但奇怪的是它一开始并没有这样做。您必须首先从设置中检索值，`NSUserDefaults`然后再将您对这些值所做的编辑`NSUserDefaults`自动应用于设置包。

我引用了这篇[不错的文章](http://greghaygood.com/2009/03/09/updating-nsuserdefaults-from-settingsbundle)。

**编辑：**

对于您的情况，只是为了保存您的版本，这样的事情会起作用。（这个示例代码在某种程度上是多余的，但应该更容易理解流程）

```
//Get the bundle file
NSString *bPath = [[NSBundle mainBundle] bundlePath];
NSString *settingsPath = [bPath stringByAppendingPathComponent:@"Settings.bundle"];
NSString *plistFile = [settingsPath stringByAppendingPathComponent:@"Root.plist"];

//Get the Preferences Array from the dictionary
NSDictionary *settingsDictionary = [NSDictionary dictionaryWithContentsOfFile:plistFile];
NSArray *preferencesArray = [settingsDictionary objectForKey:@"PreferenceSpecifiers"];

//Save default value of "version_number" in preference to NSUserDefaults 
for(NSDictionary * item in preferencesArray) {
    if([[item objectForKey:@"key"] isEqualToString:@"version_number"]) {
        NSString * defaultValue = [item objectForKey:@"DefaultValue"];
        [[NSUserDefaults standardUserDefaults] setObject:defaultValue forKey:@"version_number"];
        [[NSUserDefaults standardUserDefaults] synchronize];
    }
}

//Save your real version number to NSUserDefaults
NSString *version = [[[NSBundle mainBundle] infoDictionary] objectForKey:@"CFBundleVersion"];
[[NSUserDefaults standardUserDefaults] setValue:version forKey:@"version_number"];
[[NSUserDefaults standardUserDefaults] synchronize]; 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-01-21T12:37:18.083

这对我有用：

编辑 Root.plist 作为源代码：右键单击文件并选择 Open As->Source Code

添加标题部分：

```
 <key>PreferenceSpecifiers</key>
        <array>
            <dict>
                <key>DefaultValue</key>
                <string>NoVersion</string>
                <key>Key</key>
                <string>Version</string>
                <key>Title</key>
                <string>Version</string>
                <key>Type</key>
                <string>PSTitleValueSpecifier</string>
            </dict> 
```

在 - (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions

添加这个：

```
NSString *version = [[[NSBundle mainBundle] infoDictionary] objectForKey:@"CFBundleShortVersionString"];
    [[NSUserDefaults standardUserDefaults] setObject:version forKey:@"Version"]; 
```

它会在应用程序第一次启动后工作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-03-22T16:03:06.600

另一种无需编写快速代码的解决方案是：

**1/ 创建一个设置包**

这将在您设备的“设置”中为您的应用创建一个新部分

*   右键单击您的项目名称 -> 新建文件 -> 设置包

[![在此处输入图像描述](../Images/b6372984441104d14566bd22ce89a1c5.png)](https://i.stack.imgur.com/iTMmd.png)

**2/修改Root.plist**

这将设置您想要在应用程序设置中显示的内容 - 在您的新设置包中，右键单击**Root.plist** -> 打开为 -> 源代码

*   复制粘贴以下代码：

    ```
    <?xml version="1.0" encoding="UTF-8"?>
     <!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
     <plist version="1.0">
     <dict>
         <key>PreferenceSpecifiers</key>
         <array>
            <dict>
                <key>Title</key>
                <string>About</string>
                <key>Type</key>
                <string>PSGroupSpecifier</string>
            </dict>
            <dict>
                <key>DefaultValue</key>
                <string></string>
                <key>Key</key>
                <string>version_preference</string>
                <key>Title</key>
                <string>Version</string>
                <key>Type</key>
                <string>PSTitleValueSpecifier</string>
            </dict>
        </array>
        <key>StringsTable</key>
        <string>Root</string>
    </dict>
    </plist> 
    ```

**3/ 创建运行脚本**

这将始终从 Info.plist 获取您的应用程序版本并将其显示在您的应用程序设置中

*   导航到左侧面板上的项目目标，然后单击构建阶段
*   单击“+”按钮并单击“新运行脚本阶段”
*   在最新的运行脚本部分，复制/粘贴以下内容：

    ```
    #Getting Current Version
    VERSIONNUM=$(/usr/libexec/PlistBuddy -c "Print CFBundleShortVersionString"   "${PROJECT_DIR}/${INFOPLIST_FILE}")

    #Setting the version number in settings
    /usr/libexec/PlistBuddy -c "Set PreferenceSpecifiers:1:DefaultValue $VERSIONNUM" <YOUR-APP-NAME>/Settings.bundle/Root.plist 
    ```

*   只需用您的应用名称替换 YOUR-APP-NAME

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-10-17T11:18:48.410

NSUserDefaults 不会将任何值写入设置文件。它只会将数据保存在您应用的用户默认 plist 中。

要将某些内容保存在另一个文件中，您必须自己编写。也许这会有所帮助：

[iOS - 如何在 plist 中写入数据？](https://stackoverflow.com/questions/7628372/ios-how-to-write-a-data-in-plist)

# jsf-2 - JSF @PostConstruct 在 ConfigurableNavigationHandler 执行后再次触发

> ID：12932977
> 
> 赞同：0
> 
> 时间：2012-10-17T11:08:28.923
> 
> 标签：jsf-2, primefaces

我有一个奇怪的问题，我使用的是 JSF 2.1.6 和 Primefaces 3.4。

问题是我的@ViewScoped bean 中的@PostConstruct 在onSelectNavigate 之后再次被触发，这会导致NPE，因为Flash Scope 中不再设置东西。

我有以下 init() 方法

@PostConstruct public void init() {

```
 log.debug("initing DashBoard");

    epsDashboardVos = new ArrayList<>();

    for (Eps eps : epsService.getEpss()) {
        /// do some stufff

    }

} 
```

并在同一个bean中使用以下导航方法

```
public void onSelectedEpsNavigate(EpsDashboardVo selectedEps) {

    log.debug("Selecting eps and moving to detail screen : "
            + selectedEps.getEps().getName());

    FacesContext.getCurrentInstance().getExternalContext().getFlash()
            .put("selectedEps", selectedEps.getEps());

    // adjust header
    menuController.setCurrentPage("View EPS Status - "
            + selectedEps.getEps().getName());

    ConfigurableNavigationHandler configurableNavigationHandler = (ConfigurableNavigationHandler) FacesContext
            .getCurrentInstance().getApplication().getNavigationHandler();

    configurableNavigationHandler
            .performNavigation("epsdashboard-detail-view?faces-redirect=true");
} 
```

然后我在日志中看到的是调用了 navigate 方法，但随后再次调用了同一个 bean 中的 init() 方法。

```
 17 Oct 2012 11:54:07,244 DEBUG com.xxxx.eps.subscription.controller.EpsDashboardViewController : initing DashBoard
  17 Oct 2012 11:54:09,550 DEBUG com.xxxx.eps.subscription.controller.EpsDashboardViewController : Selecting eps and moving to detail screen : M0951-EPS2X-DEV-Commercial
  17 Oct 2012 11:54:09,553 DEBUG com.xxxx.eps.subscription.controller.EpsDashboardViewController : initing DashBoard
  17 Oct 2012 11:54:09,639 DEBUG com.xxxx.eps.subscription.controller.EpsDashboardDetailViewController : initing DashBoard 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T11:16:59.207

您正在导航到不同的视图。这是当前视图范围的结束。如果由于某种原因，相同的支持 bean 类在另一个视图中也被引用为视图范围的 bean，那么将为新的视图范围创建一个新实例。

具体的功能要求尚不清楚，因此不可能为您要实现的任何目标提出正确的方法。也许“解决”这个问题的最简单方法是在`@PostConstruct`.

# jquery - 服务器端和客户端单击 ASP.NET 链接按钮

> ID：12932980
> 
> 赞同：0
> 
> 时间：2012-10-17T11:08:35.880
> 
> 标签：jquery, asp.net, button, postback

我有一个标准链接按钮，它有一个 OnClick 处理程序。处理程序运行一个漫长的过程。我想插入一个客户端处理程序，在我们等待操作完成时显示“请稍候”图像：

```
$("#<%= btnProcess.ClientID %>").click( function() {
  $("#loaderimage").show();
}); 
```

这个想法是当页面回发时图像将被清除。

这是正确的方法吗？它似乎不起作用 - 有没有人有这种事情的例子或最佳实践？

克里斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T11:21:28.073

拨打以下电话

```
function__doPostBack("clientIdOfSubmitButton", null)` 
```

我认为它会为你工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T12:08:39.963

您可以使用`UpdatePanel`和`UpdateProgress`控件来完成任务。[这是一个例子](http://www.codeproject.com/Articles/18238/The-UpdateProgress-Control-of-ASP-NET-AJAX-Extensi)

其他解决方案。首先创建一个`WebService`（它将执行所需的任务），在单击按钮时从客户端调用它，同时使用 javascript 或 jquery 显示图像。一旦您从服务获得确认任务已完成隐藏此图像并告诉用户任务已完成。

# iphone - iOS - 无法在包 NSInternalInconsistencyException 中加载 NIB

> ID：12932981
> 
> 赞同：0
> 
> 时间：2012-10-17T11:08:43.400
> 
> 标签：iphone, objective-c, ios, xcode, cocoa-touch

无法解决这个问题

```
*** Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: 'Could not load NIB in bundle: 'NSBundle </var/mobile/Applications/A0EC53C5-E9C0-4191-9BAF-0B61205B92F0/Handbook.app> (loaded)' with name 'pAM-c5-AKQ-view-CuA-a0-uZt' and directory 'Storyboard.storyboardc'' 
```

我有一个`ListViewController: UITableViewController`推动另一个`DetailViewController`：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    [self performSegueWithIdentifier:@"ShowDetailsSegue" sender:self];
}

- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if ([[segue identifier] isEqualToString:@"ShowDetailsSegue"])
    {
        DetailViewController *detailController = (DetailViewController *)[segue destinationViewController];

        detailController.department = [departmentsList objectAtIndex:[self.tableView indexPathForSelectedRow].row];
    }
} 
```

奇怪的是我可以执行segue并返回5次。第 5 次我`DetailViewController`出现空表，第 6 次出现上述异常。

我在 SO 上发现了很多类似的问题，但没有适合我的解决方案。

不知道可能是什么问题？有什么建议在哪里看？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T12:46:20.107

在导航控制器上来回移动时，我添加了这样的奇怪问题。我的情况是键盘问题。

对我来说，事实证明我的细节视图控制器正在被重用。我认为这是 Xcode 4.5 或 iOS 6 中的一个新功能，它试图保持低笔尖负载的数量。`-viewWillDisappear:`我没有在/中正确清理自己`-viewDidDisappear:`。键盘以为它仍在显示，但不是。

我不知道你是否有类似的问题，但它可能值得研究。检查并查看每次加载是否获得相同的详细视图控制器对象。如果是这样，那么看看你是否让细节视图控制器处于错误状态。

# python - 在python中列出一个生成器

> ID：12932982
> 
> 赞同：0
> 
> 时间：2012-10-17T11:08:48.017
> 
> 标签：python, generator

> **可能重复：**
> [在 Python 中重置生成器对象](https://stackoverflow.com/questions/1271320/reseting-generator-object-in-python)

我在 python 中经常遇到以下问题：我有一个生成器，我在多次调用中使用它来计算不同的值，如下所示：

```
mygenerator = generate_data()
value1 = compute1(mygenerator)
value2 = compute2(mygenerator) 
```

问题是，当然，compute2 将找不到数据，因为生成器已被消耗。所以我被迫“列出”生成器：

```
mygenerator = generate_data()
mylist = listize_generator(mygenerator)
value1 = compute1(mylist)
value2 = compute2(mylist) 
```

有没有另一种方法来解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T11:21:37.590

您需要协同例程将生成器输出发送给多个消费者。

例如[http://www.dabeaz.com/coroutines/cobroadcast.py](http://www.dabeaz.com/coroutines/cobroadcast.py)

我建议阅读所有[http://www.dabeaz.com/coroutines/](http://www.dabeaz.com/coroutines/)，因为它是一个很好的介绍。

# java - 如何获取今天到期的已设置提醒列表

> ID：12932983
> 
> 赞同：1
> 
> 时间：2012-10-17T11:08:50.290
> 
> 标签：java, android, alarmmanager, android-sdk-2.3

我已经使用 android 中的 AlarmManager 类设置了每天触发 3 次的提醒。提醒正在正确触发。我想显示今天到期的提醒列表。我在我的数据库中保存时间（不是他们的日期）。我该怎么办？

# c++ - C++：在两个类中使用模板化的 typedef

> ID：12932987
> 
> 赞同：1
> 
> 时间：2012-10-17T11:09:06.067
> 
> 标签：c++, templates, typedef

嗨，我有以下课程：

```
template<class T>
class RandomTree<T> {
private:
    RandomTreeNode root;
    typedef double (*funcion_ptr) (T, T);

public:
    RandomTree(std::vector<function_ptr> functions){...}
};

template<class T>
class RandomTreeNode<T> {
private:
    typedef double (*funcion_ptr) (T, T);
    function_ptr function;
public:
    RandomTreeNode(function_ptr function){...}
}; 
```

树被赋予一个函数指针向量，每个节点都被创建并具有一个特定的函数。有没有办法让我不必`typedef double (*function_ptr) (T,T)`在两个类中定义？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T11:18:45.017

当您声明一个独立的函数指针类型时，与成员函数指针相反，您当然可以将 typedef 放在全局范围或命名空间中的单独模板类中，以便两个类都可以访问它。

像这样：

```
template<class T>
struct RandomTreeFunction
{
    typedef double (*function_ptr)(T, T);
};

template<class T>
class RandomTree<T> {
private:
    typedef typename RandomTreeFunction<T>::function_ptr function_ptr;
    ...
}; 
```

我还建议您考虑[`std::function`](http://en.cppreference.com/w/cpp/utility/functional/function)改用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T11:22:13.610

如果您将其公开，`RandomTreeNode<T>`则可以说：

```
template<class T>
class RandomTree<T> {
    typedef RandomTreeNode<T>::funcion_ptr function_ptr;
}; 
```

或者`RandomTreeNode<T>::funcion_ptr`直接使用，比较繁琐。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T11:24:50.817

**如果您可以访问支持模板别名**的编译器（例如 gcc >= 4.7，clang >= 3.0），您可以执行类似的操作

```
#include <vector>

template<class T>
using function_ptr = double (*)(T,T);  

template<class T>
class RandomTreeNode {
private:
    function_ptr<T> function;
public:
    RandomTreeNode(function_ptr<T> function){/*...*/}
};

template<class T>
class RandomTree {
private:
    RandomTreeNode<T> root;

public:
    RandomTree(std::vector<function_ptr<T>> functions){/*...*/}
}; 
```

否则，Joachim Pileborg 的解决方案就足够了。

# php - 在 foreach 之后不为空

> ID：12932991
> 
> 赞同：0
> 
> 时间：2012-10-17T11:09:25.390
> 
> 标签：php, foreach, smarty

我不擅长 smarty php，所以我想就如何在下面的 foreach 之后制作“不为空”提供建议：

```
{foreach from=$form_fields item=form_field}
{if $form_field.caption == "Language Name" || $form_field.caption == "Tool or Technology Name" || $form_field.caption == "Area, Field, or Speciality"} 
```

代码：

```
{elseif $complexField == "Languages" || $complexField == "Tool_Technology" || $complexField == "AreasOfExpertise"}
{foreach from=$complexElements key="complexElementKey" item="complexElementItem"}
       <div class="row-fluid">
     {foreach from=$form_fields item=form_field}
         {if $form_field.caption == "Language Name" || $form_field.caption == "Tool or Technology Name" || $form_field.caption == "Area, Field, or Speciality"}

           <h4>{display property=$form_field.id complexParent=$complexField complexStep=$complexElementKey}&nbsp;</h4>{else}
   <div style="display:inline">
      <label class="span4" for="slider">[[$form_field.caption]]</label>
      <div class="span8"> 
    <div class="progress progress-info progress-striped" style="margin-bottom: 9px;" rel="tooltip" title="{display property=$form_field.id complexParent=$complexField complexStep=$complexElementKey}%">
    <div class="bar" style="width: {display property=$form_field.id complexParent=$complexField complexStep=$complexElementKey}%;"></div>
    </div>
       </div>
   </div>
{/if}
{/foreach}
</div>
{/foreach} 
```

ID l 标题 l 类型

关键技能 l 关键技能 l 复杂

Tool_Technology l Tool & Technology l complex

<< 工具与技术 >>

ToolorTechnologyName l 工具或技术名称 l 字符串

熟练度 l 熟练度 l 整数

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T11:44:40.767

试试这个

```
{if $form_field.caption neq ""} 
//your code
{else}
// else part
{/if} 
```

# mysql - 如何形成 SQL 查询

> ID：12932993
> 
> 赞同：1
> 
> 时间：2012-10-17T11:09:25.723
> 
> 标签：mysql, sql, database

这是我需要解决的问题：

这是我需要为每个用户获取的表。

```
Date        | Working time (day) | Night shifts (23:00 - 06:00) | Total(day + night) |             | Notes
3.9\.        |    7               |               2              |         9          |      1      | 
4.9\.        |    8               |               0              |         8          |             |  
5.9\.        |    6               |               2              |         8          |             |
6.9\.        |    4               |               3              |         7          |             |
7.9\.        |    0               |               0              |         0          |             |
8.9\.        |    0               |               0              |         0          |             |
9.9\.        |    0               |               0              |         0          |             |
10.9\.       |    0               |               0              |         0          |             |
Total(week) |    25              |               7              |         32         |  Total(>48h)|    0 
```

所以让我解释一下。用户在这个例子中选择的星期是从 3.9-10.9，用户有唯一的键。如果可能，此表中的所有内容都需要在 sql 中生成。所以第一列是日期，第二列是（06：00-23：00）之间的工作时间，第三列是（23：00-06：00）之间的夜班，第四列是白天和黑夜的总和shift，仅当第四列大于 8 时才填充第五列，即总计 9h - 8 为 1，仅当底部的（日夜班）总计大于 48h 时才填充第六列，然后将差异写入最后一栏。

我当前的数据表有以下列：`user_key,id,time`

现在这将是查询应该做什么的示例：

```
 1\. user_key(100), id(1), time(15:00); 
    2\. user_key(200), id(2), time(15:05); 
    3\. user_key(100), id(3), time(16:00); 
    4\. user_key(100), id(4), time(16:05); 
    5\. user_key(100), id(5), time(17:05); 

    3.-1\. = 1h 
    5.-4\. = 1h 

    Result: 
    user_key(100), day_shift(2h) 
```

所以我们 user_key 对于每个用户都是唯一的，并且 id 是自动递增的，我们总是需要为同一用户获取第一条和第二条记录并保存结果，然后为该用户获取第二条记录并节省工作时间等等......如何做到这一点？我需要使用一些 sql 变量吗？当然，如果是白班和夜班，它必须有选择，因为我们不想在错误的列中节省工作时间。

编辑：

正如我所见，你们中的很多人并不了解我真正需要什么。我将尝试多解释一下。

当用户登录时，它会写入自己的 user_key。当他退出时，我在表中写了 user_key(0)，之后另一个用户可以唱歌，依此类推。所以基本上我需要在例如白班中看到第一个唯一的用户密钥并获得最后一个。我们可以获得的最后一个 user_key 只是为了检查下一个 user_key 是否不同。如果下一个用户密钥不同，那么我们有第一个和最后一个，它们之间的差异需要保存在变量中。然后例如我们有一些其他用户，稍后我们又有一对 user_key 然后我们只需要将它们之间的差异添加到同一个变量等等......

我的问题也可以用 PHP 解决。例如，我们只能获取特定 user_key 和特定时间的值。然后在 php 中，我们可以通过数据进行检查。

请给我一些例子

编辑：

数据：

```
1447, 0, 2012-10-21 13:32:15.453
1448, 0, 2012-10-21 13:32:22.203
1449, 0, 2012-10-21 13:32:29.203
1450, , 2012-10-21 13:32:35.671
1451, , 2012-10-21 13:32:44.515
1452, , 2012-10-21 13:32:52.62
1453, 0010154108, 2012-10-21 13:32:59.203
1454, 0010154108, 2012-10-21 13:33:06.46
1455, 0010154108, 2012-10-21 13:33:13.171
1456, 0010154108, 2012-10-21 13:33:20.62
1457, 0010154108, 2012-10-21 13:33:27.62
1458, 0010154108, 2012-10-21 13:33:34.171
1459, 0010154108, 2012-10-21 13:33:40.234
1460, 0010154108, 2012-10-21 13:33:47 
1461, 0010154108, 2012-10-21 13:33:53.812
1462, 0010154108, 2012-10-21 13:33:59.828
1463, 0010154108, 2012-10-21 13:34:05.859
1464, 0010154108, 2012-10-21 13:34:11.828
1465, 0010154108, 2012-10-21 13:34:18.843
1466, 0010154108, 2012-10-21 13:34:24.828
1467, 0010154108, 2012-10-21 13:34:30.781
1468, 0010154108, 2012-10-21 13:34:36.765
1469, 0010154108, 2012-10-21 13:34:43.156
1470, 0010154108, 2012-10-21 13:34:49.375
1471, 0010154108, 2012-10-21 13:34:55.593
1472, 0010154108, 2012-10-21 13:35:03.156
1473, 0010154108, 2012-10-21 13:35:10.875
1474, 0010154108, 2012-10-21 13:35:16.734
1475, 0010154108, 2012-10-21 13:35:24.875
1476, 0010154108, 2012-10-21 13:35:31.750
1477, 0010154108, 2012-10-21 13:35:38.765
1478, 0010154108, 2012-10-21 13:35:45.859
1479, 0010154108, 2012-10-21 13:35:54.203
1480, 0010154108, 2012-10-21 13:36:01.62
1481, 0010154108, 2012-10-21 13:36:08.93
1482, 0010154108, 2012-10-21 13:36:15.109
1483, 0010154108, 2012-10-21 13:36:21.109
1484, 0010154108, 2012-10-21 13:36:28.109
1485, 0010154108, 2012-10-21 13:36:34.93
1486, 0010154108, 2012-10-21 13:36:40.93
1487, 0010154108, 2012-10-21 13:36:46.78
1488, 0010154108, 2012-10-21 13:36:54.921
1489, 0010154108, 2012-10-21 13:37:01.93
1490, 0010154108, 2012-10-21 13:37:08.93
1491, 0010154108, 2012-10-21 13:37:14.78
1492, 0010154108, 2012-10-21 13:37:20.78
1493, 0010154108, 2012-10-21 13:37:26.78
1494, 0010154108, 2012-10-21 13:37:33.93
1495, 0010154108, 2012-10-21 13:37:39.140
1496, 0010154108, 2012-10-21 13:37:45.156
1497, 0010154108, 2012-10-21 13:37:51.171
1498, 0010154108, 2012-10-21 13:37:58.562
1499, 0010154108, 2012-10-21 13:38:05.93
1500, 0010154108, 2012-10-21 13:38:11.125
1501, 0010154108, 2012-10-21 13:38:18.109
1502, 0010154108, 2012-10-21 13:38:24.78
1503, 0010154108, 2012-10-21 13:38:30.15
1504, 0010154108, 2012-10-21 13:38:36.15
1505, 0010154108, 2012-10-21 13:38:42.984
1506, 0010154108, 2012-10-21 13:38:48.984
1507, 0010154108, 2012-10-21 13:38:55 
1508, 0010154108, 2012-10-21 13:39:01.750
1509, 0010154108, 2012-10-21 13:39:07.953
1510, 0010154108, 2012-10-21 13:39:13.953
1511, 0010154108, 2012-10-21 13:39:19.984
1512, 0010154108, 2012-10-21 13:39:26 
1513, 0010154108, 2012-10-21 13:39:32.984
1514, 0010154108, 2012-10-21 13:39:38.953
1515, 0010154108, 2012-10-21 13:39:44.937
1516, 0010154108, 2012-10-21 13:39:50.937
1517, 0010154108, 2012-10-21 13:39:57.968
1518, 0010154108, 2012-10-21 13:40:03.968
1519, 0010154108, 2012-10-21 13:40:10.15
1520, 0010154108, 2012-10-21 13:40:16.15
1521, 0010154108, 2012-10-21 13:40:22.968
1522, 0010154108, 2012-10-21 13:40:28.953
1523, 0010154108, 2012-10-21 13:40:34.953
1524, 0010154108, 2012-10-21 13:40:40.984
1525, 0010154108, 2012-10-21 13:40:48 
1526, 0010154108, 2012-10-21 13:40:54.15
1527, 0010154108, 2012-10-21 13:40:59.984
1528, 0010154108, 2012-10-21 13:41:07.578
1529, 0010154108, 2012-10-21 13:41:13.984
1530, 0010154108, 2012-10-21 13:41:20.31
1531, 0010154108, 2012-10-21 13:41:26.31
1532, 0010154108, 2012-10-21 13:41:33.78
1533, 0010154108, 2012-10-21 13:41:39.46
1534, 0010154108, 2012-10-21 13:41:45.31
1535, 0010154108, 2012-10-21 13:41:50.937
1536, 0010154108, 2012-10-21 13:41:57.968
1537, 0010154108, 2012-10-21 13:42:03.953
1538, 0010154108, 2012-10-21 13:42:11.93
1539, 0010154108, 2012-10-21 13:42:17.953
1540, 0010154108, 2012-10-21 13:42:23.968
1541, 0010154108, 2012-10-21 13:42:30.187
1542, 0010154108, 2012-10-21 13:42:37.968
1543, 0010154108, 2012-10-21 13:42:44 
1544, 0010154108, 2012-10-21 13:42:50.15
1545, 0010154108, 2012-10-21 13:42:56 
1546, 0010154108, 2012-10-21 13:43:03.31
1547, 0010154108, 2012-10-21 13:43:08.984
1548, 0010154108, 2012-10-21 13:43:14.984
1549, 0010154108, 2012-10-21 13:43:21.281
1550, 0010154108, 2012-10-21 13:43:28.62
1551, 0010154108, 2012-10-21 13:43:35 
1552, 0010154108, 2012-10-21 13:43:41.78
1553, 0010154108, 2012-10-21 13:43:48.78
1554, 0010154108, 2012-10-21 13:43:54 
1555, 0010154108, 2012-10-21 13:43:59.968
1556, 0010154108, 2012-10-21 13:44:06.62
1557, 0010154108, 2012-10-21 13:44:13.15
1558, 0010154108, 2012-10-21 13:44:19.968
1559, 0010154108, 2012-10-21 13:44:25.984
1560, 0010154108, 2012-10-21 13:44:33.15
1561, 0010154108, 2012-10-21 13:44:39.78
1562, 0010154108, 2012-10-21 13:44:45.46
1563, 0010154108, 2012-10-21 13:44:53.78
1564, 0010154108, 2012-10-21 13:44:59.78
1565, 0010154108, 2012-10-21 13:45:05.437
1566, 0010154108, 2012-10-21 13:45:12.953
1567, 0010154108, 2012-10-21 13:45:19.625
1568, 0010154108, 2012-10-21 13:45:25.937
1569, 0010154108, 2012-10-21 13:45:32.921
1570, 0010154108, 2012-10-21 13:45:38.937
1571, 0010154108, 2012-10-21 13:45:44.890
1572, 0010154108, 2012-10-21 13:45:50.843
1573, 0010154108, 2012-10-21 13:45:57.843
1574, 0010154108, 2012-10-21 13:46:03.843
1575, 0010154108, 2012-10-21 13:46:09.906
1576, 0010154108, 2012-10-21 13:46:15.906
1577, 0010154108, 2012-10-21 13:46:22.921
1578, 0010154108, 2012-10-21 13:46:28.859
1579, 0010154108, 2012-10-21 13:46:34.796
1580, 0010154108, 2012-10-21 13:46:40.703
1581, 0010154108, 2012-10-21 13:46:48.656
1582, 0010154108, 2012-10-21 13:46:54.687
1583, 0010154108, 2012-10-21 13:47:00.671
1584, 0010154108, 2012-10-21 13:47:07.687
1585, 0010154108, 2012-10-21 13:47:13.750
1586, 0010154108, 2012-10-21 13:47:20.265
1587, 0010154108, 2012-10-21 13:47:27.812
1588, 0010154108, 2012-10-21 13:47:33.796
1589, 0010154108, 2012-10-21 13:47:39.781
1590, 0010154108, 2012-10-21 13:47:45.765
1591, 0010154108, 2012-10-21 13:47:52.734
1592, 0010154108, 2012-10-21 13:47:58.781
1593, 0010154108, 2012-10-21 13:48:04.812
1594, 0010154108, 2012-10-21 13:48:10.843
1595, 0010154108, 2012-10-21 13:48:17.843
1596, 0010154108, 2012-10-21 13:48:23.843
1597, 0010154108, 2012-10-21 13:48:29.859
1598, 0010154108, 2012-10-21 13:48:35.890
1599, 0010154108, 2012-10-21 13:48:42.906
1600, 0010154108, 2012-10-21 13:48:48.875
1601, 0010154108, 2012-10-21 13:48:54.890
1602, 0010154108, 2012-10-21 13:49:00.890
1603, 0010154108, 2012-10-21 13:49:07.843
1604, 0010154108, 2012-10-21 13:49:13.890
1605, 0010154108, 2012-10-21 13:49:19.890
1606, 0010154108, 2012-10-21 13:49:28.468
1607, 0010154108, 2012-10-21 13:49:34.500
1608, 0010154108, 2012-10-21 13:49:40.484
1609, 0010154108, 2012-10-21 13:49:46.453
1610, 0010154108, 2012-10-21 13:49:52.859
1611, 0010154108, 2012-10-21 13:49:58.984
1612, 0010154108, 2012-10-21 13:50:04.875
1613, 0010154108, 2012-10-21 13:50:10.875
1614, 0010154108, 2012-10-21 13:50:17.796
1615, 0010154108, 2012-10-21 13:50:23.812
1616, 0010154108, 2012-10-21 13:50:29.796
1617, 0010154108, 2012-10-21 13:50:35.812
1618, 0010154108, 2012-10-21 13:50:42.812
1619, 0010154108, 2012-10-21 13:50:48.828
1620, 0010154108, 2012-10-21 13:50:54.906
1621, 0, 2012-10-21 13:51:00.828
1622, 0, 2012-10-21 13:51:07.890
1623, 0, 2012-10-21 13:51:13.796
1624, 0, 2012-10-21 13:51:19.796
1625, 0, 2012-10-21 13:51:25.812
1626, 0, 2012-10-21 13:51:32.828
1627, 0, 2012-10-21 13:51:38.828
1628, 0, 2012-10-21 13:51:44.796
1629, 0, 2012-10-21 13:51:50.781
1630, 0, 2012-10-21 13:51:57.750
1631, 0, 2012-10-21 13:52:03.718
1632, 0, 2012-10-21 13:52:12.718
1633, 0, 2012-10-21 13:52:18.765
1634, 0, 2012-10-21 13:52:25.46
1635, 0, 2012-10-21 13:52:32.796
1636, 0, 2012-10-21 13:52:39.765
1637, 0, 2012-10-21 13:52:45.781
1638, 0, 2012-10-21 13:52:52.812
1639, 0, 2012-10-21 13:52:59.218
1640, 0, 2012-10-21 13:53:05.250
1641, 0, 2012-10-21 13:53:12.765
1642, 0, 2012-10-21 13:53:18.781
1643, 0, 2012-10-21 13:53:24.875
1644, 0, 2012-10-21 13:53:30.890
1645, 0, 2012-10-21 13:53:37.765
1646, 0, 2012-10-21 13:53:43.750
1647, 0, 2012-10-21 13:53:49.734
1648, 0, 2012-10-21 13:53:55.718
1649, 0, 2012-10-21 13:54:02.859
1650, 0, 2012-10-21 13:54:08.750
1651, 0, 2012-10-21 13:54:14.781
1652, 0, 2012-10-21 13:54:20.750
1653, 0, 2012-10-21 13:54:27.703
1654, 0, 2012-10-21 13:54:33.656
1655, 0, 2012-10-21 13:54:39.671
1656, 0, 2012-10-21 13:54:46.671
1657, 0, 2012-10-21 13:54:53.671
1658, 0, 2012-10-21 13:54:59.656
1659, 0, 2012-10-21 13:55:05.656
1660, 0, 2012-10-21 13:55:12.640
1661, 0, 2012-10-21 13:55:18.640
1662, 0, 2012-10-21 13:55:24.656
1663, 0, 2012-10-21 13:55:30.718
1664, 0, 2012-10-21 13:55:37.703
1665, 0, 2012-10-21 13:55:43.703
1666, 0, 2012-10-21 13:55:49.671
1667, 0, 2012-10-21 13:55:55.609
1668, 0, 2012-10-21 13:56:02.609
1669, 0, 2012-10-21 13:56:08.625
1670, 0, 2012-10-21 13:56:14.625
1671, 0, 2012-10-21 13:56:20.593
1672, 0, 2012-10-21 13:56:27.625
1673, 0, 2012-10-21 13:56:33.687
1674, 0, 2012-10-21 13:56:39.640
1675, 0, 2012-10-21 13:56:45.578
1676, 0, 2012-10-21 13:56:53.703
1677, 0, 2012-10-21 13:56:59.984
1678, 0, 2012-10-21 13:57:07.562
1679, 0, 2012-10-21 13:57:14.562
1680, 0, 2012-10-21 13:57:20.578
1681, 0, 2012-10-21 13:57:27.625
1682, 0, 2012-10-21 13:57:33.609
1683, 0, 2012-10-21 13:57:39.546
1684, 0, 2012-10-21 13:57:47.609
1685, 0, 2012-10-21 13:57:55.765
1686, 0, 2012-10-21 13:58:02.453
1687, 0, 2012-10-21 13:58:08.609
1688, 0, 2012-10-21 13:58:14.484
1689, 0, 2012-10-21 13:58:22.500
1690, 0, 2012-10-21 13:58:28.703
1691, 0, 2012-10-21 13:58:35 
1692, 0, 2012-10-21 13:58:42.656
1693, 0, 2012-10-21 13:58:49.468
1694, 0, 2012-10-21 13:58:55.453
1695, 0, 2012-10-21 13:59:02.453
1696, 0, 2012-10-21 13:59:08.453
1697, 0, 2012-10-21 13:59:14.453
1698, 0, 2012-10-21 13:59:20.453
1699, 0, 2012-10-21 13:59:27.453
1700, 0, 2012-10-21 13:59:33.484
1701, 0, 2012-10-21 13:59:40.515
1702, 0, 2012-10-21 13:59:47.515
1703, 0, 2012-10-21 13:59:53.531
1704, 0, 2012-10-21 14:00:01.437
1705, 0, 2012-10-21 14:00:07.484
1706, 0, 2012-10-21 14:00:13.484
1707, 0, 2012-10-21 14:00:19.500
1708, 0, 2012-10-21 14:00:25.531
1709, 0, 2012-10-21 14:00:32.562
1710, 0, 2012-10-21 14:00:38.531
1711, 0, 2012-10-21 14:00:44.515
1712, 0, 2012-10-21 14:00:50.484
1713, 0, 2012-10-21 14:00:57.531
1714, 0, 2012-10-21 14:01:04.62
1715, 0, 2012-10-21 14:01:09.968
1716, 0, 2012-10-21 14:01:17.531
1717, 0, 2012-10-21 14:01:23.546
1718, 0, 2012-10-21 14:01:29.546
1719, 0, 2012-10-21 14:01:35.531
1720, 0, 2012-10-21 14:01:42.546
1721, 0, 2012-10-21 14:01:48.562
1722, 0, 2012-10-21 14:01:54.531
1723, 0, 2012-10-21 14:02:00.546
1724, 0, 2012-10-21 14:02:07.671
1725, 0, 2012-10-21 14:02:13.468
1726, 0, 2012-10-21 14:02:19.921
1727, 0, 2012-10-21 14:02:27.468
1728, 0, 2012-10-21 14:02:33.484
1729, 0, 2012-10-21 14:02:39.468
1730, 0, 2012-10-21 14:02:45.484
1731, 0, 2012-10-21 14:02:52.484
1732, 0, 2012-10-21 14:02:58.484
1733, 0, 2012-10-21 14:03:04.515
1734, 0, 2012-10-21 14:03:12.500
1735, 0, 2012-10-21 14:03:18.421
1736, 0, 2012-10-21 14:03:24.437
1737, 0, 2012-10-21 14:03:30.734
1738, 0, 2012-10-21 14:03:37.484
1739, 0, 2012-10-21 14:03:43.437
1740, 0, 2012-10-21 14:03:49.437
1741, 0, 2012-10-21 14:03:55.484
1742, 0, 2012-10-21 14:04:02.484
1743, 0, 2012-10-21 14:04:08.453
1744, 0, 2012-10-21 14:04:14.531
1745, 0, 2012-10-21 14:04:20.500
1746, 0, 2012-10-21 14:04:27.484
1747, 0, 2012-10-21 14:04:33.515
1748, 0, 2012-10-21 14:04:39.484
1749, 0, 2012-10-21 14:04:45.375
1750, 0, 2012-10-21 14:04:52.375
1751, 0, 2012-10-21 14:04:58.406
1752, 0, 2012-10-21 14:05:04.421
1753, 0, 2012-10-21 14:05:10.437
1754, 0, 2012-10-21 14:05:17.406
1755, 0, 2012-10-21 14:05:23.421
1756, 0, 2012-10-21 14:05:29.453
1757, 0, 2012-10-21 14:05:35.453
1758, 0, 2012-10-21 14:05:42.468
1759, 0, 2012-10-21 14:05:48.437
1760, 0, 2012-10-21 14:05:54.437
1761, 0, 2012-10-21 14:06:00.453
1762, 0, 2012-10-21 14:06:07.406
1763, 0, 2012-10-21 14:06:13.390
1764, 0, 2012-10-21 14:06:19.343
1765, 0, 2012-10-21 14:06:25.359
1766, 0, 2012-10-21 14:06:32.343
1767, 0, 2012-10-21 14:06:38.343
1768, 0, 2012-10-21 14:06:44.359
1769, 0, 2012-10-21 14:06:50.343
1770, 0, 2012-10-21 14:06:57.343
1771, 0, 2012-10-21 14:07:03.328
1772, 0, 2012-10-21 14:07:09.312
1773, 0, 2012-10-21 14:07:15.343
1774, 0, 2012-10-21 14:07:22.812
1775, 0, 2012-10-21 14:07:29.312
1776, 0, 2012-10-21 14:07:35.328
1777, 0, 2012-10-21 14:07:42.343
1778, 0, 2012-10-21 14:07:48.296
1779, 0, 2012-10-21 14:07:54.343
1780, 0, 2012-10-21 14:08:00.343
1781, 0, 2012-10-21 14:08:07.328
1782, 0, 2012-10-21 14:08:13.312
1783, 0, 2012-10-21 14:08:19.265
1784, 0, 2012-10-21 14:08:26.46
1785, 0, 2012-10-21 14:08:32.296
1786, 0, 2012-10-21 14:08:38.296
1787, 0, 2012-10-21 14:08:44.281
1788, 0, 2012-10-21 14:08:50.296
1789, 0, 2012-10-21 14:08:57.265
1790, 0, 2012-10-21 14:09:03.828
1791, 0, 2012-10-21 14:09:09.937
1792, 0, 2012-10-21 14:09:17.265
1793, 0, 2012-10-21 14:09:23.546
1794, 0, 2012-10-21 14:09:30.468
1795, 0, 2012-10-21 14:09:39.406
1796, 0, 2012-10-21 14:09:49.453
1797, 0, 2012-10-21 14:09:57.562
1798, 0, 2012-10-21 14:10:04.359
1799, 0, 2012-10-21 14:10:15.609
1800, 0, 2012-10-21 14:10:22.187
1801, 0, 2012-10-21 14:10:28.218
1802, 0, 2012-10-21 14:10:34.218
1803, 0, 2012-10-21 14:10:40.296
1804, 0, 2012-10-21 14:10:50.250
1805, 0, 2012-10-21 14:10:57.265
1806, 0, 2012-10-21 14:11:03.125
1807, 0, 2012-10-21 14:11:09.125
1808, 0, 2012-10-21 14:11:15.125
1809, 0, 2012-10-21 14:11:22.125
1810, 0, 2012-10-21 14:11:28.109
1811, 0, 2012-10-21 14:11:35.390
1812, 0, 2012-10-21 14:11:42.15
1813, 0, 2012-10-21 14:11:48.31
1814, 0, 2012-10-21 14:11:54.46
1815, 0, 2012-10-21 14:12:00.78
1816, 0, 2012-10-21 14:12:08.140
1817, 0, 2012-10-21 14:12:14.140
1818, 0, 2012-10-21 14:12:20.171
1819, 0, 2012-10-21 14:12:27.218
1820, 0, 2012-10-21 14:12:33.171
1821, 0, 2012-10-21 14:12:39.125
1822, 0, 2012-10-21 14:12:46 
1823, 0, 2012-10-21 14:12:52.93
1824, 0, 2012-10-21 14:12:58.593
1825, 0, 2012-10-21 14:13:05.484
1826, 0, 2012-10-21 14:13:12.78
1827, 0, 2012-10-21 14:13:18.93
1828, 0, 2012-10-21 14:13:24.109
1829, 0, 2012-10-21 14:13:30.140
1830, 0, 2012-10-21 14:13:37.140
1831, 0, 2012-10-21 14:13:43.203
1832, 0, 2012-10-21 14:13:49.281
1833, 0, 2012-10-21 14:13:57.296
1834, 0, 2012-10-21 14:14:03.203
1835, 0, 2012-10-21 14:14:09.671
1836, 0, 2012-10-21 14:14:17.265
1837, 0, 2012-10-21 14:14:23.171
1838, 0, 2012-10-21 14:14:29.187
1839, 0, 2012-10-21 14:14:35.109
1840, 0, 2012-10-21 14:14:43.484
1841, 0, 2012-10-21 14:14:49.515
1842, 0, 2012-10-21 14:14:57.203
1843, 0, 2012-10-21 14:15:03.187
1844, 0, 2012-10-21 14:15:09.125
1845, 0, 2012-10-21 14:15:17.156
1846, 0, 2012-10-21 14:15:23.140
1847, 0, 2012-10-21 14:15:29.109
1848, 0, 2012-10-21 14:15:35.109
1849, 0, 2012-10-21 14:15:42.125
1850, 0, 2012-10-21 14:15:48.93
1851, 0, 2012-10-21 14:15:54.125
1852, 0, 2012-10-21 14:16:00.109
1853, 0, 2012-10-21 14:16:07.546
1854, 0, 2012-10-21 14:16:14.78
1855, 0, 2012-10-21 14:16:20.156
1856, 0, 2012-10-21 14:16:28.93
1857, 0, 2012-10-21 14:16:34.546
1858, 0, 2012-10-21 14:16:42.62
1859, 0, 2012-10-21 14:16:50.437
1860, 0, 2012-10-21 14:17:13.15
1861, 0, 2012-10-21 14:17:20.593
1862, 0, 2012-10-21 14:17:28.125
1863, 0, 2012-10-21 14:17:35.578
1864, 0, 2012-10-21 14:17:43.125
1865, 0, 2012-10-21 14:17:52.484 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T11:08:55.243

让我推荐这些东西：

*   对于用户的每个时间戳，您还应该记录它是“签入”还是“签出”。否则你很可能会遇到麻烦。例如，缺少时间戳（可能有原因......）将完全混淆您的评估，因为该用户的下一个时间戳将被错误地解释（例如，作为“结帐”而不是“签入”）。
*   我还会考虑不要将所有评估逻辑都放入 SQL 查询中。使用编程语言（php、java、...）时，评估逻辑通常会变得更简单。您的任务似乎非常复杂，仅在 SQL 中解决。例如，为了获得一天的评估，您必须检查前一天的“签入”，其对应的“签出”是在您感兴趣的那一天等。
*   使您的问题更简洁，例如，您的日子似乎是从早上 6 点到早上 6 点。因此，从凌晨 4 点开始到早上 8 点结束的工作时间段（即为同一用户匹配一对“签入”和“签出”）需要为您的摘要拆分吗？
*   您应该添加健全性检查，例如单个工作期最多可以持续多长时间。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-21T15:34:51.057

我的答案基于下表结构，Rufo 爵士在另一个答案中提供了该结构：

```
CREATE TABLE `userstamp` (
  `user_key`  int(11) NOT NULL ,
  `id`  int(11) NOT NULL AUTO_INCREMENT ,
  `stamptime`  datetime NOT NULL ,
  PRIMARY KEY (`id`)
); 
```

此视图显示每个用户的每个“活动”间隔：

```
CREATE VIEW Intervals AS
SELECT
  userstamp.user_key,
  userstamp.stamptime as checkin,
  min(userstamp_2.stamptime) as checkout
FROM
  userstamp inner join userstamp userstamp_2
    on userstamp.user_key = userstamp_2.user_key
WHERE
  userstamp_2.id > userstamp.id
  AND Mod(
    (SELECT
       Count(*)
     FROM
       userstamp as userstamp_1
     WHERE
       userstamp.user_key = userstamp_1.user_key
       AND userstamp.id>userstamp_1.id)
     , 2 ) = 0
GROUP BY
  userstamp.user_key, userstamp.id 
```

WHERE 子句中奇怪的 SELECT 子查询是通过计算该用户的结帐时间是否在奇数行中来摆脱“非活动”间隔（如 16:00 - 16:05）。

现在我们必须处理这样一个事实，即活动间隔可以在一天开始，并在第二天结束。这也是将日期转换为秒的正确位置。我会使用这个 VIEW，基于一个 UNION 查询：

```
CREATE VIEW intervals_2 AS
SELECT
  user_key,
  CAST(checkin AS DATE) AS day,
  TIME_TO_SEC(CAST(checkin AS TIME)) AS checkinsec,
  TIME_TO_SEC(CAST(checkout AS TIME)) AS checkoutsec
FROM intervals WHERE CAST(checkin AS date) = CAST(checkout AS date)
UNION
SELECT
   user_key,
   CAST(checkin AS date) AS day,
   TIME_TO_SEC(CAST(checkin AS TIME)) AS checkinsec,
   86400 AS checkoutsec
FROM intervals WHERE CAST(checkin AS date) < CAST(checkout AS date)
UNION
SELECT
  user_key,
  CAST(checkout AS DATE) AS day,
  0 AS checkinsec,
  TIME_TO_SEC(CAST(checkout AS TIME)) AS checkoutsec
FROM intervals WHERE CAST(checkin AS date) < CAST(checkout AS date) 
```

好的！现在我们准备做一些基本的求和。这是计算每天的总和：

```
SELECT
  user_key,
  day,
  SEC_TO_TIME( SUM(IF(checkinsec<82800 and checkoutsec>21600,LEAST(82800, checkoutsec) - GREATEST(21600, checkinsec),0))) as WorkHours,
  SEC_TO_TIME( SUM(IF(checkinsec<21600, 21600-checkinsec, 0)+IF(checkoutsec>82800, checkoutsec-GREATEST(82800, checkinsec), 0))) as NightShift,
  SEC_TO_TIME( SUM(checkoutsec-checkinsec) ) as TotalDay
FROM
  intervals_2
WHERE
  day BETWEEN startdate AND enddate
GROUP BY
  user_key,
  day 
```

但如果您只需要整周的总和，您可以从字段和 GROUP BY 中删除 DATE(checkin)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T13:58:29.490

我有一个存储过程供您处理并返回一个表格结果。恕我直言，普通的 SQL 查询无法处理此问题，因为您必须解析每条记录并切换状态“来”和“去”。

这是 SP 的表格布局

```
CREATE TABLE `userstamp` (
`user_key`  int(11) NOT NULL ,
`id`  int(11) NOT NULL AUTO_INCREMENT ,
`stamptime`  datetime NOT NULL ,
PRIMARY KEY (`id`)
); 
```

调用 SP 看起来像

```
CALL get_user_result( 100, '2012-09-03', '2012-09-10' ); 
```

这是SP

```
DROP PROCEDURE IF EXISTS `get_user_result`;
DELIMITER ;;
CREATE PROCEDURE `get_user_result`(IN Auser_key INT, IN AStartDate DATE, IN AEndDate DATE)
BEGIN

DECLARE done INT DEFAULT 0;
DECLARE LKnownUser INT DEFAULT 0;
DECLARE LCstampdate DATE;
DECLARE LCuser_key INT;
DECLARE Lday_shift_inc, Lnight_shift_inc DECIMAL( 9, 6 ) DEFAULT 0; -- CHANGE
DECLARE LCstamptime, Lstamptime DATETIME;

DECLARE c_ustamp CURSOR FOR SELECT user_key, stamptime FROM userstamp WHERE user_key = Auser_key AND stamptime >= ADDDATE( AStartDate, INTERVAL 6 HOUR ) AND stamptime < ADDDATE( DATE_ADD( AEndDate, INTERVAL 6 HOUR ), 1 ) ORDER BY user_key,stamptime;
DECLARE CONTINUE HANDLER FOR SQLSTATE '02000' SET done = 1;

DROP TEMPORARY TABLE IF EXISTS user_result;

CREATE TEMPORARY TABLE user_result (
`stampdate`  date NULL DEFAULT NULL ,
`user_key`  int(11) NOT NULL ,
`day_shift`  decimal(9,6) NOT NULL DEFAULT 0.00 , -- CHANGE
`night_shift`  decimal(9,6) NOT NULL DEFAULT 0.00 , -- CHANGE
`stamptime`  datetime NULL DEFAULT NULL ,
PRIMARY KEY (`stampdate`,`user_key`)
);

OPEN c_ustamp;

REPEAT

    FETCH c_ustamp INTO LCuser_key, LCstamptime;

    IF NOT done THEN

        IF ( TIME( LCstamptime ) >= MAKETIME(00,00,00) ) AND ( TIME( LCstamptime ) < MAKETIME(06,00,00) ) THEN
            SET LCstampdate = DATE_SUB( DATE( LCstamptime ), INTERVAL 1 DAY );
        ELSE
            SET LCstampdate = DATE( LCstamptime );
        END IF;

        SELECT COUNT(*)
        INTO LKnownUser
        FROM user_result
        WHERE stampdate = LCstampdate AND user_key = LCuser_key;

        IF NOT LKnownUser THEN

            INSERT INTO user_result
                SET stampdate = LCstampdate, user_key = LCuser_key, stamptime = LCstamptime, day_shift = 0, night_shift = 0;

        ELSE

            SELECT stamptime
            INTO Lstamptime
            FROM user_result
            WHERE stampdate = LCstampdate AND user_key = LCuser_key;

            IF Lstamptime IS NULL THEN

                UPDATE user_result
                SET stamptime = LCstamptime
                WHERE stampdate = LCstampdate AND user_key = LCuser_key;

            ELSE

                IF ( TIME( Lstamptime ) >=  MAKETIME(06,00,00) ) AND ( TIME( Lstamptime ) < MAKETIME(23,00,00) )
                THEN -- day_shift 06:00:00 til 23:00:00
                    SET Lday_shift_inc = TIME_TO_SEC( TIMEDIFF( LCstamptime, Lstamptime ) ) / 3600.0; -- CHANGE
                    SET Lnight_shift_inc = 0;
                ELSE -- night_shift
                    SET Lday_shift_inc = 0;
                    SET Lnight_shift_inc = TIME_TO_SEC( TIMEDIFF( LCstamptime, Lstamptime ) ) / 3600.0; -- CHANGE
                END IF;

                UPDATE user_result
                SET 
                    day_shift = day_shift + Lday_shift_inc,
                    night_shift = night_shift + Lnight_shift_inc,
                    stamptime = NULL
                WHERE stampdate = LCstampdate AND user_key = LCuser_key;

            END IF;

        END IF;

    END IF;

UNTIL done END REPEAT;

CLOSE c_ustamp;

SELECT stampdate, user_key, day_shift, night_shift
FROM user_result
WHERE day_shift + night_shift > 0;

DROP TEMPORARY TABLE IF EXISTS user_result;

END;;
DELIMITER ; 
```

# javascript - 使用 Javascript 获取为域打开的所有窗口

> ID：12932996
> 
> 赞同：0
> 
> 时间：2012-10-17T11:09:32.443
> 
> 标签：javascript

我想知道 javascript 中的一种方法，通过它我可以获得域的所有打开窗口。

我知道以下方式 -

假设我在 wind0 上，我有三个链接，并且 onclick 我写了以下代码 -

```
var win1=window.open('page1','name1');//link1 onclick
var win2=window.open('page2','name2');//link2 onclick
var win3=window.open('page3','name3');//link3 onclick 
```

上面的代码将打开三个不同的窗口。我可以使用win1、win2、win3 objs并将它们保存在一个数组中并在以后使用它，但是假设我在wind0上的页面被刷新并且数组的内容丢失了。

现在我无法找出为该域打开了多少个窗口。

如何为域打开所有窗口？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T11:11:13.107

我敢打赌，您可以将它们推送到存储在本地存储中的值中，然后在页面卸载时将它们弹出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T11:28:00.200

您可以从所有窗口存储对该数组的引用。即使数组是在父窗口中创建的，它也可以在子窗口中从它们自己的范围内引用，并且不会消失：

家长：

```
var windowsOpen = [];
w1 = window.open(...);
windowsOpen.push(w1);
w1.windowsOpen = windowsOpen;
... 
```

孩子们：

```
$(window).on("unload", function(){
  windowsOpen.filter(function(x){
    return x!=window;
  }
} 
```

只要每个窗口可以引用同一个数组，它就会在窗口之间共享，并且可以用于通信。