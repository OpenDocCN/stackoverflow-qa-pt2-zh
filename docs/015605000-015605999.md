# StackOverflow 问答 15605000-15605999

# php - 多列关联数组的 CSS 格式

> ID：15605004
> 
> 赞同：0
> 
> 时间：2013-03-24T22:46:05.267
> 
> 标签：php, css, textbox, associative-array, word-wrap

我正在尝试使以下 PHP 函数在带有自动换行的 CSS 滚动文本框中工作（这是整个程序示例——没有其他 CSS）。

```
<?php

    function prettyPrint( $my_array ) {

    if (is_array($my_array)) {

        echo "<table style=border=0 cellspacing=2 cellpadding=1 width=100%>";
        echo '<tr><td colspan=2 style="background-color:#B29980;"></td></tr>';

        foreach ($my_array as $k => $v) {
            if (is_int($k)){$k=$k+1;}                    
            echo '<tr><td valign="top" style="width:20px;background-color:#F0F0F0;">';
            echo '<strong>' . "&nbsp;&nbsp;" . $k . "&nbsp;&nbsp;" . "</strong></td><td>";
            prettyPrint( $v ) ;
            echo "</td></tr>";
        }

        echo '<tr><td colspan=2 style="background-color:#B29980;"></td></tr>';
        echo "</table>";
        return;
    }

    echo $my_array;
}

$array = array( array ( "Txt1" => "Lorem ipsum dolor sit amet...
                        "Txt2" => "Lorem ipsum dolor sit amet...
                array ( "Txt3" => "Lorem ipsum dolor sit amet...
                        "Txt4" => "Lorem ipsum dolor sit amet...
prettyPrint($array); 

?> 
```

我曾尝试在第 3 行添加此内容：

```
echo '<div style="height:250px; width:980px; overflow:auto; overflow-x: hidden">'; 
```

这个 div 标签在分组项目之间增加了很大的空间间隙，也没有自动换行。如何获取函数的输出并将其显示在自动换行的滚动文本框中？

预先感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T02:23:53.027

据我了解，您想要`<div>`- 围绕所有东西的容器，对吗？

喜欢...

```
____________ this is the <div> ________________
|                                              |
| inside here is the nested table              |
| with text 1 to text 4                        |
|______________________________________________| 
```

然后去：

```
echo '<div style="height:250px; width:980px; overflow:auto; overflow-x: hidden">';
prettyPrint($array);
echo '</div>'; 
```

您的函数 prettyPrint 是递归的，这意味着多次从自身调用。如果你`<div>`在其中包含，你最终会`<div>`在一个嵌套表中得到几个 -Containers，这是一团糟。

# php - Select 语句正在加载错误的数据

> ID：15605005
> 
> 赞同：0
> 
> 时间：2013-03-24T22:46:12.237
> 
> 标签：php, sql, oop, select, inner-join

我的 SQL SELECT 语句有问题，我在 Google 和 youtube 上进行了搜索，但什么也没找到。

这是我的PHP代码：

```
public function loadMark($data){
    dbConn(); 

    $query = "SELECT
        subject.subName
        , mark.mark
    FROM
        itcollage.marktype
        , itcollage.student
    INNER JOIN itcollage.parent 
        ON (student.pId = parent.pId)
    INNER JOIN itcollage.mark 
        ON (mark.stId = student.sId)
    INNER JOIN itcollage.subject 
        ON (mark.subId = subject.subId)
    WHERE 
        parent.pUsername='$data' 
    AND 
        mark.subId = subject.subId LIMIT 2";

    return $result=  mysql_query($query);

} 
```

而且我不想为获得学生证的父母加载正确的分数，但它会不断重复所有科目的分数。

数据如下：

```
Subject      Mark
--------  | ------
Java 101  |   A
Java 101  |   D
Math 101  |   A
Math 101  |   D 
```

*   Java 101 = A，数学 = D

所以怎么了！！！

这是我调用marks.class.php类的代码

```
 include '../classes/mark.class.php';

    $mark = new mark();
    $result = $mark->loadMark($user);
    $num = mysql_num_rows($result);

     if ($num == 0) {
?>
         <h2>No Marks for your Kid</h2>
<?php
     } else {
?>
         <h2>Marks</h2>
         <table>
             <thead>
                 <tr>
                     <th>Subject</th>
                     <th>Mark</th> 
                  </tr>
              </thead>
              <tbody>
<?php
                  while ($row = mysql_fetch_object($result)) {
                      $marks = $row->mark;
                      $subject = $row->subName;
?>

                      <tr class="light">
                          <td align="center"><?php echo $subject; ?></td>
                          <td align="center"><?php echo $marks; ?></td>
                      </tr>

 <?php
                   }
 ?>
               </tbody>   
           </table> 
```

谁能告诉我有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T23:17:21.560

这看起来像问题。您没有为此表指定连接条件。

```
FROM
    itcollage.marktype
    , itcollage.student 
```

改成：

```
FROM
    itcollage.marktype 
    INNER JOIN itcollage.student *(add join condition here)* 
```

# php - 奇怪的标签作为 WordPress 模板的 php 文件中的 html 标记的值

> ID：15605008
> 
> 赞同：0
> 
> 时间：2013-03-24T22:46:32.230
> 
> 标签：php, html, wordpress, xhtml, wordpress-theming

我是 PHP 和 WordPress 的新手。我正在修改这个模板：

在一些 php 文件中，我发现了这样的内容：

```
<span class="sep">Posted on </span>
                 <a href="%1$s" title="%2$s" rel="bookmark">
                    <time class="entry-date" datetime="%3$s" pubdate>%4$s</time>

                 </a>
                 <span class="by-author"> 
                    <span class="sep"> by bla</span> 
                    <span class="author vcard">
                        <a class="url fn n" href="%5$s" title="%6$s" rel="author">%7$s</a>
                        <p>CUCU</p>
                    </span>
                    <span>BLABLA</span>
                 </span> 
```

如您所见，我找到了一些标签（如**%1$s**、**%2$s**、**%4$s**） ，而不是某些标签的值，例如 href、title、datetime

它的含义和参考是什么？

肿瘤坏死因子

安德烈亚

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T23:02:17.260

这些只是占位符，在页面加载时将放置变量（某些值）。Wordpress 使用模板，这就是为什么您看到的是那些而不是通常在常规 .html 文件中看到的硬编码值的原因。

# c# - 将列表投射到列表而不制作新副本

> ID：15605009
> 
> 赞同：0
> 
> 时间：2013-03-24T22:46:37.120
> 
> 标签：c#, casting

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T22:56:43.320

你可以尝试这样的事情：

```
public abstract class Foo<T>
{
    List<T> _List = new List<T>();
    public List<T> ListObject { get { return _List; } }
}
public class Bar : Foo<string>
{
    public List<string> ListString
    {
        get { return ListObject; }
    }
} 
```

结果： ![在此处输入图像描述](../Images/1b92c30bb93adc23b5689b61ddb23a4b.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T03:09:35.797

我希望其他人会对此提出一个相当好的答案，但现实情况是这个问题可能没有一个*好的*答案。

然而，有几种方法可以给普通猫剥皮，其中许多方法非常难看。

这个问题的一个丑陋的解决方案是实现一个列表类，它封装 n 个`List<object>`对象并尝试以您选择的任何类型访问这些对象。这种类型的代理类可能很难正确处理，但可能是一种做你想做的事情的方法。

```
public class StringObjectList : IList<string>
{
    private List<object> _list;
    public StringObjectList(List<object> src)
    {
        _list = src;
    }

    // IList Implementation...

    public string this[int index]
    {
        get
        {
            object obj = _list[index];
            if (obj == null)
                return null;
            return obj.ToString();
        }
        set
        {
            _list[index] = value;
        }
    }

    // ... plus 3 more IList<string> methods (IndexOf, Insert, RemoveAt)

    // ICollection<string> implementation (5 methods, 2 properties)

    // IEnumerable<string> implementation (1 method)

    // IEnumerable implementation (1 method)
} 
```

一些实现细节有点棘手。大多数情况下，尽管实现是简单的代理方法，因为底层列表很乐意接受字符串以及任何其他对象。例如，该`ICollection<string>.Add`方法可以很简单：

```
public void Add(string item)
{
    _list.Add(item);
} 
```

您可能遇到的问题是`IEnumerable<string>`和`IEnumerable`实现，这可能需要您创建几个支持类。

不简单，不优雅，但可能可行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T23:04:37.753

如果您不喜欢上面的通用解决方案，您可以使`List`成员抽象。

```
public abstract class Foo
{
    public abstract IList ListObject { get; }
}

public class Bar : Foo
{
    public override IList ListObject
    {
        get { return new List<string>(); }
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-24T23:22:51.960

```
 public abstract class Foo<T>
    {
        public abstract IList<T> MyList { get; }
        // you can manipulate MyList in this class even if it is defined in inherited class
    }

    public class Bar : Foo<string>
    {
        private readonly IList<string> _myList = new List<string>();

        public override IList<string> MyList
        {
            get { return _myList; }
        }
    }

    [TestFixture]
    public class TestFixture1
    {
        [Test]
        public void Test()
        {
            Bar oBar = new Bar();
            Foo<string> oFoo = oBar;

            oFoo.MyList.Add("Item");
            // oFoo.ListObject= { "Item" }
            // oBar.ListString = { "Item" }

            oBar.MyList.Add("NewItem");
            // oFoo.ListObject= { "Item" }
            // oBar.ListString = { "Item" }
        }

    } 
```

# css - 用 :hover:before 删除下划线

> ID：15605010
> 
> 赞同：5
> 
> 时间：2013-03-24T22:46:39.533
> 
> 标签：css, html

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-24T23:01:25.230

到目前为止，我发现从生成的内容中删除（通常）继承的样式的唯一方法是`position: absolute`使用简化的演示（来自评论）给它：

```
a:link
{
    text-decoration: none;
    position: relative;
    margin-left: 1em;
}

a:hover
{
    text-decoration: underline;
}

a:before
{
    content: '#';
    position: absolute;
    right: 100%;
    top: 0;
    bottom: 0;
    width: 1em;
} 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/NGHpg/1/)。

当然，这种方法的缺点是需要将显式`width`分配给生成的内容（以及`margin`父`a`元素的）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-24T23:06:27.223

另一种方法是将链接的文本包装在元素中，例如跨度，从“a”中删除下划线并将其应用于悬停时的跨度。

```
<li><a class="entypo-home active" href="#"><span>Home</span></a></li>

[class*='entypo-'] a { text-decoration: none; }
[class*='entypo-'] a:hover span { text-decoration: underline; } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T23:02:01.763

恐怕这行不通。我建议给你上课`<li/>`并`:before`为他们设置。

如果您不想使用该`position: absolute`方法，这是我的[建议](http://jsfiddle.net/NGHpg/2/)。

# linux - grep - 打印所有包含 'cat' 作为第二个单词的行

> ID：15605015
> 
> 赞同：1
> 
> 时间：2013-03-24T22:47:06.453
> 
> 标签：linux, shell, grep

好的，考虑到我有一个包含以下文本的文件：

```
lknsglkn cat lknrhlkn lsrhkn
cat lknerylnk lknaselk cat
awiooiyt lkndrhlk dhlknl
blabla cat cat bla bla 
```

我需要使用 grep 仅打印包含“cat”作为该行的第二个单词的行，即第 1 行和第 4 行。我尝试了多个`grep -e 'regex' <file>`命令，但似乎无法获得正确的命令。我不知道如何匹配一行的第 N 个单词。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-24T22:51:39.753

这可能对你有用吗？

```
grep -E '^\w+\s+cat\s' file 
```

如果第一个“单词”可以包含一些非单词字符，例如`"#, (,[.."`，您也可以尝试：

```
grep -E '^\S+\s+cat\s' file 
```

使用您的示例输入：

```
kent$  echo "lknsglkn cat lknrhlkn lsrhkn
cat lknerylnk lknaselk cat
awiooiyt lkndrhlk dhlknl
blabla cat cat bla bla"|grep -E '^\S+\s+cat\s'
lknsglkn cat lknrhlkn lsrhkn
blabla cat cat bla bla 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T22:54:27.060

什么构成一个词？

```
grep '^[a-z][a-z]*  *cat ' 
```

如果 . 之后至少有一个空白，这将起作用`cat`。如果不能保证，那么：

```
grep -E '^[a-z]+ +cat( |$)' 
```

它查找`cat`后跟空白或行尾。

如果您想要更广泛地定义“第一个单词”（大写、数字、标点符号），请更改字符类。如果您想允许空格或制表符，可以进行更改。如果您可以有前导空格，请`*`在插入符号处添加 ' '。根据需要进行变化。

这些变体适用于`grep`支持该`-E`选项的任何版本。POSIX 不强制使用诸如`\S`表示“非空白”之类的符号，尽管 GNU`grep`确实支持将其作为扩展。如果该版本不起作用但存在，则该`grep -E`版本将与常规一起使用（不要使用带有 的选项）。`egrep``grep -E``egrep``-E``egrep`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T00:27:44.743

会更慢，但可能更具可读性：

```
awk '$2 == "cat"' file 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-24T22:53:35.497

以下应该有效：

```
grep -e '^\S\+\scat\s' 
```

该行应以长度至少为 1 的非空格开头，后跟一个空格，然后是单词“cat”，后跟一个空格。

# windows-phone-7 - 在 Windows Phone 中打开 PDF 文件

> ID：15605021
> 
> 赞同：3
> 
> 时间：2013-03-24T22:47:47.340
> 
> 标签：windows-phone-7, cordova, windows-phone

我正在为 Windows Phone 7 开发一个应用程序，并且我正在为它使用一个 Phonegap 模板。一切看起来都很完美，但现在我无法在浏览器中打开 PDF 文件。我尝试了以下方法，但这不起作用，因为 PDF 的 url 超过了 2048 个字符的限制（它是一个数据 url）。此代码在触发 deviceReady 事件后运行。

```
var ref = window.open('http://www.google.com', '_blank', 'location=no');
ref.addEventListener('loadstart', function () { alert(event.url); }); 
```

现在，我正在尝试将 PDF 文件保存到存储中，然后尝试让浏览器打开它，但浏览器没有显示任何内容。我正在从 cordovalib 编辑 InAppBrowser.cs 代码，并在调用 browser.Navigate(loc); 之前添加了以下行

```
private void ShowInAppBrowser(string url)
{
    IsolatedStorageFile store = IsolatedStorageFile.GetUserStoreForApplication();
    FileStream stream = store.OpenFile("test.pdf", FileMode.Create);
    BinaryWriter writer = new BinaryWriter(stream);
    var myvar = Base64Decode("the big data url");
    writer.Write(myvar);
    writer.Close();

    if (store.FileExists("test.pdf")) // Check if file exists
    {
        Uri loc = new Uri("test.pdf", UriKind.Relative);
        ...
    }
} 
```

此代码返回以下错误：日志：“错误回调中的错误：InAppBrowser1921408518 = TypeError：无法获取属性'url'的值：对象为空或未定义”

我不想使用 ComponentOne。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T07:56:17.970

您无法在 PDF 文件的默认阅读器中打开隔离存储中的 pdf 文件。如果文件在线，例如它有一个 URI，您可以使用 WebBrowserTask 打开它，因为这将下载并在 Adob​​e Reader 中打开文件。

在 Windows Phone 8 上，您实际上可以在该扩展名的默认文件阅读器中打开您自己的文件，但我不确定这对您有什么帮助，因为您的目标是 PhoneGap 和 Windows Phone 7。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T14:05:58.147

托尼是正确的。您可以尝试构建自己的查看器（这与使用 C1 相同，但需要更多时间）。我为 WP7 开发了 iTextSharp 和 PDFSharp 的端口，但它们都不是 PDF 查看器。它们非常适合创建 PDF 并对其进行一些解析（但要渲染它们，需要做更多的工作）。这是我的个人追求，但老实说，我得到的最好的结果是能够从 PDF 中提取一些图像（而不是文本）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-08T11:19:39.943

尝试这个

```
var installedLocation = Windows.ApplicationModel.Package.Current.InstalledLocation;
var assets = await installedLocation.GetFolderAsync("Assets");
var pdf = await assets.GetFileAsync("metro.pdf");
Windows.System.Launcher.LaunchFileAsync(pdf); 
```

这在我的设备上正常工作。

# delphi - Table.Edit 强制光标到 EOF

> ID：15605024
> 
> 赞同：3
> 
> 时间：2013-03-24T22:48:02.837
> 
> 标签：delphi

有人可以告诉我为什么这只在 aTbl.Edit 之后有效。如果我删除用于编辑表格的四行，它将遍历所有 49 条记录。似乎编辑和发布会将文件光标定位在文件的末尾，因为我只更改了一条记录并且它以 EOF 退出。

我正在使用 D5、Zeos-6 和 SQLite3。我什至尝试在编辑之前抓取 Auto-inc，然后在它之后进行定位，但它在编辑后仍然退出。

感谢您提出的任何建议，但这让我整个下午都发疯了。我一直认为这是我所做的愚蠢的事情，但我找不到它。:)

```
aTbl.First;                            // Test DB has 49 records
while not aTbl.EOF do
begin
  for i := 0 to lbCt.Items.Count-1 do  // Currently only two items in the list
  begin                                // and only the second makes a match
    aMatch := False;                   // which then forces the edit
    CtStr := lbCt.Items[i]);
    case InOut.ItemIndex of
      0: aMatch := aTbl.FieldByName(fld_A).AsString = CtStr;
      1: aMatch := aTbl.FieldByName(fld_B).AsString = CtStr;
      2: aMatch := (aTbl.FieldByName(fld_A).AsString = CtStr) or
                   (aTbl.FieldByName(fld_B).AsString = CtStr);
      3: aMatch := (aTbl.FieldByName(fld_A).AsString = CtStr) and
                   (aTbl.FieldByName(fld_B).AsString = CtStr);
    end;
    if aMatch then
    begin
      aTbl.Edit; 
      aTbl.FieldByName('Account').AsString := lbCt.Items[i];
      aTbl.FieldByName('Folder').AsString := lbCt.Items[i];
      aTbl.Post;
    end;
  end;
  aTbl.Next;
end; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T01:55:58.103

问题很可能是您的索引处于活动状态，该索引使用`Account`或`Folder`用作索引字段之一。这些是您要更改其值的字段，如果其中任何一个在当前索引表达式中，它会将记录指针移动到该行的新位置（实际上可能是`EOF`）。

# ios - iOS AFNetworking GET/POST 参数

> ID：15605026
> 
> 赞同：3
> 
> 时间：2013-03-24T22:48:07.007
> 
> 标签：ios, nsurlconnection, afnetworking

我想使用包含 GET 和 POST 参数的 AFNetworking 进行 POST 请求。

我正在使用这段代码：

```
NSString *urlString = [NSString stringWithFormat:@"upload_stuff.php?userGUID=%@&clientGUID=%@",
                           @"1234",
                           [[UIDevice currentDevice] identifierForVendor].UUIDString];

    NSString *newUrl = @"https://sub.domain.com";

    NSURL *baseURL = [NSURL URLWithString:newUrl];

    AFHTTPClient *httpClient = [[AFHTTPClient alloc] initWithBaseURL:baseURL];
    [httpClient defaultValueForHeader:@"Accept"];

    NSDictionary *getParams = [NSDictionary dictionaryWithObjectsAndKeys:
                            @"1234", @"userGUID",
                            [[UIDevice currentDevice] identifierForVendor].UUIDString, @"clientGUID",
                            nil];
    NSDictionary *postParams = [NSDictionary dictionaryWithObjectsAndKeys:
                                [@"xyz" dataUsingEncoding:NSUTF8StringEncoding], @"FILE",
                                nil];

    [httpClient postPath:urlString parameters:postParams success:^(AFHTTPRequestOperation *operation, id responseObject) {

    }failure:^(AFHTTPRequestOperation *operation, NSError *error) {
        NSLog(@"Error retrieving data: %@", error);
    }]; 
```

现在我有两个问题：

*   如何在同一个请求中同时使用 GET 和 POST 字典？目前，我正在将 GET 字典集成到 URL 中，并且只使用 POST 字典 ( `[httpClient postPath:...]`)

*   我从服务器收到一个错误，指出缺少参数“FILE”。不幸的是，我无法检查任何服务器日志（不是我的服务器）。但是使用标准`NSURLConnection`，我能够将带有`FILE`参数的请求发送到该服务器。那么这里出了什么问题呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T02:27:51.770

Stackoverflow 为您服务：

```
NSData* sendData = [self.fileName.text dataUsingEncoding:NSUTF8StringEncoding];
NSDictionary *sendDictionary = [NSDictionary dictionaryWithObject:sendData forKey:@"name"];
AFHTTPClient *httpClient = [[AFHTTPClient alloc] initWithBaseURL:remoteUrl];
NSMutableURLRequest *afRequest = [httpClient multipartFormRequestWithMethod:@"POST" 
                                                                       path:@"/photos" 
                                                                 parameters:sendDictionary 
                                                  constructingBodyWithBlock:^(id <AFMultipartFormData>formData) 
                                  {                                     
                                      [formData appendPartWithFileData:photoImageData 
                                                                  name:self.fileName.text 
                                                              fileName:filePath 
                                                              mimeType:@"image/jpeg"]; 
                                  }
                                  ];

AFHTTPRequestOperation *operation = [[AFHTTPRequestOperation alloc] initWithRequest:afRequest];
[operation setUploadProgressBlock:^(NSInteger bytesWritten, NSInteger totalBytesWritten, NSInteger totalBytesExpectedToWrite) {

    NSLog(@"Sent %d of %d bytes", totalBytesWritten, totalBytesExpectedToWrite);

}];

[operation setCompletionBlock:^{
    NSLog(@"%@", operation.responseString); //Gives a very scary warning
}];

[operation start]; 
```

来自@Igor Fedorchuk 来自[POST jpeg 使用 AFNetworking 上传](https://stackoverflow.com/questions/8557364/post-jpeg-upload-with-afnetworking)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-05T06:03:03.150

AFNetworking 无法同时设置 GET 和 POST 参数。您必须为您的 url 设置 GET 参数，并使用`[AFHTTPClient requestWithMethod:path:parameters:]`设置 POST 参数。

```
- (NSURLRequest *)requestForPath:(NSString *)path method:(NSString *)method
{
    NSMutableString *pathWithGetParams = [NSMutableString stringWithString:path];
    BOOL hasPathContainsQueryChar = [path rangeOfString:@"?"].location != NSNotFound;
    [pathWithGetParams appendString:hasPathContainsQueryChar ? @"&" : @"?"];
    for (id key in self.getArguments.allKeys)
    {
        if ([key isKindOfClass:[NSString class]])
        {
            NSString *value = self.getArguments[key];
            if ([value isKindOfClass:[NSString class]])
            {
                [pathWithGetParams appendString:[[self class] urlEncode:key]];
                [pathWithGetParams appendString:@"="];
                [pathWithGetParams appendString:[[self class] urlEncode:value]];
                [pathWithGetParams appendString:@"&"];
            }
        }
    }

    NSString *upperCaseMethod = [method uppercaseString];
    BOOL isMethodInGet = [upperCaseMethod isEqualToString:@"GET"];
    NSURLRequest *request = [[self shareAFClient] requestWithMethod:method
                                                               path:pathWithGetParams
                                                         parameters:isMethodInGet ? nil : self.postArguments];
    return request;
}

+ (NSString *)urlEncode:(NSString *)stringToEncode
{
    return [self urlEncode:stringToEncode usingEncoding:NSUTF8StringEncoding];
}

+ (NSString *)urlEncode:(NSString *)stringToEncode usingEncoding:(NSStringEncoding)encoding
{
    return (__bridge_transfer NSString *)CFURLCreateStringByAddingPercentEscapes(NULL,
                                                                                 (__bridge CFStringRef)stringToEncode,
                                                                                 NULL,
                                                                                 (CFStringRef)@"!*'\"();:@&=+$,/?%#[]% ",
                                                                                 CFStringConvertNSStringEncodingToEncoding(encoding));
}

+ (NSString*)urlDecode:(NSString *)stringToDecode
{
    return [self urlDecode:stringToDecode usingEncoding:NSUTF8StringEncoding];
}

+ (NSString*)urlDecode:(NSString *)stringToDecode usingEncoding:(NSStringEncoding)encoding
{
    return (__bridge_transfer NSString *) CFURLCreateStringByReplacingPercentEscapesUsingEncoding(NULL,
                                                                                                  (__bridge CFStringRef)stringToDecode,
                                                                                                  (CFStringRef)@"",
                                                                                                  CFStringConvertNSStringEncodingToEncoding(encoding));
} 
```

# php - $_FILES["file"]["type"] 和 end(explode(".", $_FILES["file"]["name"])) 有什么区别

> ID：15605030
> 
> 赞同：7
> 
> 时间：2013-03-24T22:48:21.203
> 
> 标签：php, file

我`var_dump(@$_FILES['file']['type'])`用来测试我上传的文件类型

首先，我上传了一个`exe file`名为“ `uninstall.exe`”，它返回

```
"string 'application/octet-stream' (length=24)" 
```

然后，我将此文件重命名为`uninstall.png`，它返回

```
string 'image/png' (length=9) 
```

我的结论是：**$_FILES['file']['type'] 只检查文件扩展名，而不是原始文件类型。**

以下代码来自[w3cschool](http://www.w3schools.com/php/php_file_upload.asp)：

```
$allowedExts = array("gif", "jpeg", "jpg", "png");
$extension = end(explode(".", $_FILES["file"]["name"]));
if ((($_FILES["file"]["type"] == "image/gif")
|| ($_FILES["file"]["type"] == "image/jpeg")
|| ($_FILES["file"]["type"] == "image/jpg")
|| ($_FILES["file"]["type"] == "image/png"))
&& ($_FILES["file"]["size"] < 20000)
&& in_array($extension, $allowedExts)) 
```

我认为`$_FILES["file"]["type"]`上面的代码是不必要的，我们可以使用`explode()`和检查文件扩展名`in_array`

我只是一个php初学者，有人可以证实我的想法吗？谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-24T22:54:01.860

如果您想确保已上传图像，请使用[getimagesize](http://www.php.net/getimagesize)，对于非图像返回 0。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-24T22:49:40.667

你完全正确。MIME 类型由客户端提供，您不能保证它是正确的。就此而言，文件扩展名也是如此。如果您需要完全确定，则需要查看文件内容。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-24T23:24:06.977

您应该使用 GD 或 Imagick 扩展的包装器。一个非常好的是[WideImage](http://wideimage.sourceforge.net/ "宽幅图像")。

# javascript - 更改数组格式

> ID：15605032
> 
> 赞同：-1
> 
> 时间：2013-03-24T22:48:33.923
> 
> 标签：javascript, jquery, arrays

如何更改此 Javascript 数组格式：

```
var sample_data = ["af","16.63","al","11.58","dz","158.97"]; 
```

到这个对象格式：

```
var sample_data = {"af":"16.63","al":"11.58","dz":"158.97"}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T23:04:45.880

也可以使用 Array.shift 来完成。不知道它与其他方法的速度相比如何。

```
var sample_data = ["af","16.63","al","11.58","dz","158.97"]; // source

var data = sample_data.slice(); // clone the data

sample_data = {};

while (data.length > 1) {
    sample_data[data.shift()] = data.shift() || null;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T22:59:17.790

它的代码看起来像这样

```
var sample_data = ["af","16.63","al","11.58","dz","158.97"];
var tmp = sample_data;
sample_data = {};
for (var i = 0; i < tmp.length / 2; i++) 
    sample_data[tmp[i * 2]] = tmp[i * 2 + 1]; 
```

**编辑**

记住。

```
var arr = []; // This is an array
var obj = {}; // This is an object! Not array. 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-24T22:59:24.977

```
var d = {}; // a temporary object
for (var i = 0; i < sample_data.length; i += 2) {
    // iterate over sample_data with a step width of 2
    // and set the the data in the temp. object
    d[sample_data[i]] = sample_data[i+1];
}
sample_data = d; 
```

# jquery - 在 Jtable Jquery 中实现 JColor Picker

> ID：15605033
> 
> 赞同：0
> 
> 时间：2013-03-24T22:48:35.187
> 
> 标签：jquery, json, asp.net-mvc, color-picker

我将如何将 Jquery-color-picker 实施到我的 Jtable 中以获取字段 colourCode。colourCode 是由 Json 字符串提供的十六进制代码。我对Jtable（输入）做了一些研究。但它把我带到了死胡同。

```
<script type="text/javascript">
        $(document).ready(function () {
            $('#EventTypeTableContainer').jtable({
                title: 'Table of EventType',
                columnResizable: false,
                columnSelectable: false,
                actions: {
                    listAction: 'Admin/GetEventTypeList',
                    createAction: 'Admin/CreateEventType',
                    updateAction: 'Admin/UpdateEventType',
                    deleteAction: 'Admin/DeleteEventType'
                },
                fields: {
                    EventTypeId: {
                        key: true,
                        list: false
                    },
                    EventTypeName: {
                        title: 'Event Type',
                        width: '40%'
                    },
                    colourCode: {
                        title: 'Event Color',
                        width: '40%',
                        input: $(function () { $('input').ColorPicker(options);}),
                    },
                    isSystemEventType: {
                        title: 'System Constraint',
                        width: '20%',
                        list: false,
                        create: false,
                        edit: false
                    }
                }
            });
            $('#EventTypeTableContainer').jtable('load');
        });
    </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-23T23:03:17.463

您可以使用['input'](http://www.jtable.org/ApiReference#fopt-input)属性和['formCreated'](http://www.jtable.org/ApiReference#event-formCreated)事件的组合来实现此目的。

在输入函数中，将“id”添加到普通文本输入中。

```
input: function (data) {
    if (data.record) {
        return '<input id="color" type="text" value="data.record.color">';
    } else {
        return '<input id="color" type="text">';
    }
} 
```

接下来在“formCreated”事件中初始化颜色选择器。

```
formCreated: function (event, data) {
    $('#color').ColorPicker(options);
} 
```

# java - 与 POJO 相比，使用 EJB 有什么优势？

> ID：15605034
> 
> 赞同：6
> 
> 时间：2013-03-24T22:48:37.833
> 
> 标签：java, jakarta-ee, ejb, pojo

为什么我应该使用 EJB？我能从中得到什么是其他方式无法得到的？

与 POJO 相比，使用 EJB 有什么优势？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-24T23:48:01.220

[EJB](http://docs.oracle.com/javaee/6/tutorial/doc/gipmb.html)由 Java EE 应用程序服务器管理和监视，它负责通过依赖注入创建它们并将它们提供给客户端，并管理它们的[生命周期](http://docs.oracle.com/javaee/6/tutorial/doc/giplj.html)。EJB 由应用服务器保存在池中。每次客户端获取 EJB 时，应用程序服务器都会从池中挑选一个并将其分配给客户端。在客户端完成后（客户端没有对它的引用），它将返回到池中并准备分配给其他客户端。

池化对于应用程序的可扩展性非常重要。您不必对已部署的应用程序进行任何更改来处理不断增长的负载，并且由于资源数量有限，如果负载过高，您的应用程序不会让应用服务器屈服。一切都是通过配置应用服务器来完成的。

EJB 可以（如果有相应的注释）处理事务和异步执行，并且可以暴露给远程客户端。

有四种类型的 EJB：

**会话 bean**

1.  [无状态 EJB](http://docs.oracle.com/javaee/6/tutorial/doc/gipjg.html#gipin)：让客户端执行一些操作并返回，不能用于保存状态，因为服务器可能会将其分配给其他客户端（您可以将其用作客户端之间的一种通信，例如，如果您有一个实例变量将其设置为一个值，则该值可能会被其他客户端看到）。您可以将无状态 EJB 方法视为类的函数式编程或静态方法。
2.  [Statefull EJB](http://docs.oracle.com/javaee/6/tutorial/doc/gipjg.html#gipnl)：让客户端在多个请求中维护一个状态（客户端必须持有对它的引用，否则应用服务器可能会将其分配给另一个客户端）
3.  [单例 EJB](http://docs.oracle.com/javaee/6/tutorial/doc/gipjg.html#gipim)：顾名思义，服务器保证此实例对于整个应用程序是唯一的。

**消息驱动的 bean**

1.  [消息驱动的 EJB](http://docs.oracle.com/javaee/6/tutorial/doc/gipko.html)：也是无状态的，通常与 JMS 结合用于发送和接收消息。消息处理函数异步执行。

虽然 EBJ 提供了所有这些，并且可能提供其他东西，但 POJO 只是 POJO，仅此而已。

# java - Java 在不同平台上有何不同？

> ID：15605035
> 
> 赞同：2
> 
> 时间：2013-03-24T22:48:41.833
> 
> 标签：java, linux, unix, jvm

我目前在读高中。我最近在浏览互联网，寻找软件行业的员工通常想要什么以及工作要求是什么样的。

我遇到了一份工作描述，其中一项要求是：

> 强大的、面向对象的设计和编码技能（最好在 UNIX 或 Linux 平台上使用 C/C++ 和/或 Java）

注意最后一部分：**Java 最好在 UNIX 或 Linux 平台上**。

我不明白这一点。Java不是在虚拟环境/机器中运行吗？既然 Java 不能直接与操作系统交互，为什么它运行在什么操作系统上会很重要？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-24T23:07:10.573

出于以下几个原因，开发人员的职位描述可能需要使用某些操作系统的经验：

1.  首先，正如您已经注意到的那样，有些语言直接与操作系统对话，并且代码需要了解底层操作系统（例如 C/C++，在您的职位描述中列出）。

2.  其次，即使编程语言从您那里抽象出任何特定于操作系统的东西（包括文件系统/路径分隔符），您仍然要在某些操作系统之上部署/配置/运行/监控您的应用程序，您需要知道（至少）基础知识才能做到这一点。

对于 Java 工作描述，如果 UNIX/Linux “是一个加号”，通常意味着您将在 UNIX/Linux 系统上运行您的代码，并且您应该知道如何启动一个进程（您自己的 Java 应用程序或某个应用程序）服务器），如何在容器中部署应用程序，如何读取日志文件等等......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T22:58:52.377

## 一次开发到处调试

虽然从概念上讲，它不应该对执行 java 代码的目标平台有任何影响，但不幸的是，在实践中，让代码在任何平台上运行并不总是那么简单，而是一项相当乏味的任务。

从易于规避的错误开始，例如使用`/`or`\`代替`java.io.File.separatorChar` 或`:`/`;`代替 or`java.io.File.pathSeparatorChar` 最常见的问题包括在本机代码中实现的方法通常在不同平台之间不兼容。

您的雇主甚至可能正在寻找`native`使用 JNI 实现 java 方法的人。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-25T12:39:04.047

Java 在不同的平台上没有区别。这是 Java 最突出的特性（可移植性）。JVM 抽象了底层平台。

但是，在软件开发方面，平台很重要，这不仅涉及编码部分。大多数行业中，开发人员通过登录终端在 Linux 平台上工作。您不会获得像 Windows 中那样的 GUI 和像 NetBeans 这样好的 IDE。因此，在这种情况下，您应该知道如何从终端编译和运行 java 程序。

例如，在 linux 中，为了创建一个包，你需要创建一个目录（文件夹），比如 myJava/。你进入它（cd myJava）并编写 SomeThing.java 文件并使用**javac SomeThing.java**进行编译，你会得到一个 SomeThing.class 文件（在 myJava 中）。现在为了执行这个，你需要使用**java**命令。在使用它之前，您需要移动到包含该包的父目录。然后作为**java myJava.SomeThing**执行。除非您在 Linux 平台上玩耍，否则您不会知道这一点。设置类路径等其他事情也值得关注

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-24T22:55:15.063

当 Java 语言在[虚拟机](http://docs.oracle.com/javase/specs/jvms/se7/html/index.html)上运行时，Java[库](http://docs.oracle.com/javase/7/docs/)必须抽象对主机平台上可用设施的访问。理想情况下，这些抽象是跨平台的，但魔鬼在细节中——因此偏爱在*特定*目标平台上的体验。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-24T23:15:11.947

首先，Java 在虚拟机内部运行是对的——它不会直接向您公开系统的内部工作原理。然而，这并不意味着每个系统在某些方面没有区别——不同风格的操作系统有不同的内核、不同的调度方式、不同的线程处理方式和不同的中断链（Linux 有很多信号，而 Windows 有一些）。

就 Java（语言）而言，它在任何地方都运行相同。它的实际*完成*方式取决于它运行的本机 JVM。

不过，对于这个职位发布，我不会过多地阅读 UNIX/Linux 部分。这或多或少衡量了某人在编写 Java 时在 UNIX 或 Linux 环境中工作的舒适程度。大多数可用于 Java 的 IDE 都是跨平台的，但该商店可能使用的是 Mac 或某种 *nix（RHEL、Debian、Ubuntu 等）。使用命令行/shell 脚本也很重要，因为使用 UNIX/Linux 的许多便利都在命令行上。

并非每个商店都使用 Windows 机器进行开发。只是一个提示。

# ruby-on-rails - 为用户登录创建“弹出窗口”

> ID：15605037
> 
> 赞同：0
> 
> 时间：2013-03-24T22:48:54.483
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, rubygems

我搜索了 stackoverflow 和 google，似乎找不到足够具体的答案，所以我想我会自己去问！

提供一些背景知识：我是一个相当新的 Rails 开发人员，我刚刚创建了一个基本的应用程序，尽管它缺少一些想要的功能。到目前为止，我已经集成了 Devise 和 Omniauth 用于用户登录。但是，当用户单击“登录”而不是被重定向到实际的登录页面时，我希望有一个“弹出窗口”。

如果您单击本网站上的登录按钮，您将看到我所指的内容：http: [//geckodesigns.kinja.com/so-i-bought-a-firetruck-252516685](http://geckodesigns.kinja.com/so-i-bought-a-firetruck-252516685)

必须使用哪种 Ruby 或 Java 代码来实现这样的功能？

我期待着阅读你的答案！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T22:56:16.910

你可以使用类似的东西`jQuery UI Dialog`。

这是[jQuery UI](http://jqueryui.com/dialog/)的网站。还有一个 Rails gem 包装了这个库，使它很容易放入您的项目中。[你](https://github.com/joliss/jquery-ui-rails)可以在 github 上找到那个 gem 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T23:08:55.100

假设您有一个登录页面：`html/login.html`

在原始页面中：

```
<a onclick='popupLoginWindow'>Login</a> 
```

JavaScript：

```
function popupLoginWindow(){
    window.open('html/login.html');
} 
```

# java - 无法在自定义 Apache Shiro AuthorizingRealm 中 @Inject 我的 DAO

> ID：15605038
> 
> 赞同：4
> 
> 时间：2013-03-24T22:49:04.873
> 
> 标签：java, jsf, cdi, shiro

我正在尝试将我的 UserDAO 注入到 Apache Shiro 正在使用的自定义 AuthorizingRealm 中，但是......我得到了空值。

我究竟做错了什么？

shiro.ini

```
[main]
user = demo.shiro.security.FacesAjaxAwareUserFilter
realmA = demo.shiro.security.JpaRealm
credentialsMatcher = org.apache.shiro.authc.credential.SimpleCredentialsMatcher
realmA.credentialsMatcher = $credentialsMatcher
securityManager.realms = $realmA
user.loginUrl = /pages/public/login.xhtml

[users]
admin = admin
user = user

[urls]
# public files and folders
/index.html = anon
/resources/** = anon
/pages/public/** = anon

# restricted files and folders
/pages/admin/** = user
/pages/user/** = user 
```

JpaRealm.java

```
public class JpaRealm extends AuthorizingRealm {

    @Inject
    private UserDao userDao;

    public JpaRealm() {
        setCredentialsMatcher(new Sha256CredentialsMatcher());
    }

    protected AuthenticationInfo doGetAuthenticationInfo(AuthenticationToken authToken) throws AuthenticationException {
        UsernamePasswordToken token = (UsernamePasswordToken) authToken;
        User user = userDao.getForUsername(token.getUsername());
        if (user != null) {
            return new SimpleAuthenticationInfo(user.getId(), user.getPassword(), getName());
        } else {
            return null;
        }
    }

    protected AuthorizationInfo doGetAuthorizationInfo(PrincipalCollection principals) {
        Long userId = (Long) principals.fromRealm(getName()).iterator().next();
        User user = userDao.findByKey(userId);
        if (user != null) {
            SimpleAuthorizationInfo info = new SimpleAuthorizationInfo();
            for (Role role : user.getRoles()) {
                info.addRole(role.getDescription());
                for (Permition permition : role.getPermitions()) {
                    info.addStringPermission(permition.getDescription());
                }
            }
            return info;
        } else {
            return null;
        }
    }

} 
```

我必须做什么才能让 CDI 知道我的自定义领域内的 @Inject 并正确注入我的 UserDAO？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-24T23:10:38.917

Apache Shiro 使用的默认 EnvironmentLoaderListener 不支持 CDI。解决方案是构建一个并替换 web.xml 中的原始引用以指向您自定义的引用。

**注意：**[监听器自动](http://www.ibm.com/developerworks/websphere/techjournal/1301_stephen/1301_stephen.html#sec2)支持 CDI 注入，但监听器必须通过 CDI 机制请求 bean。自定义侦听器将用于`@Inject`请求 bean 并将创建`JpaRealm`为 CDI bean，它将注入所有依赖项。默认 Shire 侦听器不会`JpaRealm`通过`@Inject`.

CustomCredentialsMatcher.java

```
public class CustomCredentialsMatcher extends SimpleCredentialsMatcher {
} 
```

CustomEnvironmentLoaderListener.java

```
public class CustomEnvironmentLoaderListener extends EnvironmentLoaderListener {

    @Inject
    private JpaRealm jpaRealm;

    @Override
    protected WebEnvironment createEnvironment(ServletContext pServletContext) {
        WebEnvironment environment = super.createEnvironment(pServletContext);
        RealmSecurityManager rsm = (RealmSecurityManager) environment.getSecurityManager();
        PasswordService passwordService = new DefaultPasswordService();
        PasswordMatcher passwordMatcher = new PasswordMatcher();
        passwordMatcher.setPasswordService(passwordService);
        jpaRealm.setCredentialsMatcher(passwordMatcher);
        rsm.setRealm(jpaRealm);
        ((DefaultWebEnvironment) environment).setSecurityManager(rsm);
        return environment;
    }

} 
```

FacesAjaxAwareUserFilter.java

```
public class FacesAjaxAwareUserFilter extends UserFilter {

    private static final String FACES_REDIRECT_XML = "<?xml version=\"1.0\" encoding=\"UTF-8\"?><partial-response><redirect url=\"%s\"></redirect></partial-response>";

    @Override
    protected void redirectToLogin(ServletRequest req, ServletResponse res) throws IOException {
        HttpServletRequest request = (HttpServletRequest) req;

        if ("partial/ajax".equals(request.getHeader("Faces-Request"))) {
            res.setContentType("text/xml");
            res.setCharacterEncoding("UTF-8");
            res.getWriter().printf(FACES_REDIRECT_XML, request.getContextPath() + getLoginUrl());
        } else {
            super.redirectToLogin(req, res);
        }
    }

} 
```

JpaRealm.java

```
public class JpaRealm extends AuthorizingRealm {

    private static String REALM_NAME = "jpaRealm";

    @Inject
    private UserDao userDao;

    @Inject
    private RoleDao roleDao;

    @Inject
    private PermissionDao permissionDao;

    public JpaRealm() {
        setName(REALM_NAME); // This name must match the name in the User class's getPrincipals() method
    }

    protected AuthenticationInfo doGetAuthenticationInfo(AuthenticationToken authToken) throws AuthenticationException {
        UsernamePasswordToken token = (UsernamePasswordToken) authToken;
        User user = userDao.getForUsername(token.getUsername());
        if (user != null) {
            return new SimpleAuthenticationInfo(user.getId(), user.getPassword(), getName());
        } else {
            return null;
        }
    }

    protected AuthorizationInfo doGetAuthorizationInfo(PrincipalCollection principals) {
        Long userId = (Long) principals.fromRealm(getName()).iterator().next();
        User user = userDao.findByKey(userId);
        if (user != null) {
            SimpleAuthorizationInfo info = new SimpleAuthorizationInfo();
            for (Role role : roleDao.getForUser(user)) {
                info.addRole(role.getDescription());
                for (Permition permition : permissionDao.getForRole(role)) {
                    info.addStringPermission(permition.getDescription());
                }
            }
            return info;
        } else {
            return null;
        }
    }

} 
```

shiro.ini

```
[main]
user = com.boss.mrfoods.security.FacesAjaxAwareUserFilter
user.loginUrl = /pages/public/login.xhtml

[urls]
/index.html = anon
/pages/index.xhtml = anon
/pages/public/** = anon

/pages/admin/** = user, roles[ADMIN]
/pages/user/** = user, roles[USER] 
```

web.xml

```
...

<listener>
    <listener-class>com.boss.mrfoods.security.CustomEnvironmentLoaderListener</listener-class>
</listener>

<filter>
    <filter-name>ShiroFilter</filter-name>
    <filter-class>org.apache.shiro.web.servlet.ShiroFilter</filter-class>
</filter>
<filter-mapping>
    <filter-name>ShiroFilter</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping>
... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-22T20:22:29.227

使用 ShiroWebModule 注入您的自定义领域

```
public class PocShiroModule extends ShiroWebModule {

    public PocShiroModule(ServletContext servletContext) {
        super(servletContext);
    }

    @Override
    protected void configureShiroWeb() {
        bindConstant().annotatedWith(Names.named("shiro.globalSessionTimeout"))
                .to(30000L);
        bind(Realm.class).to(JPARealm.class);
    }

    @Provides
    @Singleton
    Set<Realm> provideRealmSet(Realm realm) {
        Set<Realm> result = new HashSet<Realm>();
        result.add(realm);
        return result;
    }

} 
```

在你的上下文监听器中注册这个模块

```
public class PocGuiceServletConfig extends GuiceServletContextListener {

    private ServletContext context = null;

    @Override
    public void contextInitialized(ServletContextEvent servletContextEvent) {
        this.context = servletContextEvent.getServletContext();
        super.contextInitialized(servletContextEvent);
    }

    @Override
    protected synchronized Injector getInjector() {
        return Guice.createInjector(
                new PocModule(), 
                new PocShiroModule(context), 
                new ShiroAopModule());
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-16T11:35:13.340

jpaRealm 在“CustomEnvironmentLoaderListener”中恰好为空。我也尝试在 JpaRealm 类上设置 @Service("JpaRealm") 注释，以便容器可能知道注入但仍然没有运气。在任何一种情况下，JpaRealm 都是空的。

如果我们在自定义领域中进行注入工作，还需要做什么。

# android - android客户端-服务器通信服务器没有收到消息

> ID：15605039
> 
> 赞同：1
> 
> 时间：2013-03-24T22:49:07.067
> 
> 标签：android, client

我刚开始学习android&java。现在我正在尝试在 android 和 pc 之间建立简单的 udp 连接。但看起来我的服务器没有收到来自 android 的消息；它在控制台中编写的一行监听端口......然后什么也没有发生。首先我在 netbeans 中运行服务器代码，而不是在 android 模拟器中运行我的客户端。把招工广告！

```
client:

    package com.asd.soed;

    import android.os.Bundle;
    import android.app.Activity;
    import android.view.Menu;
    import android.view.View;
    import android.widget.Button;

    public class MainActivity extends Activity {
        Button button;

        @Override
        protected void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.activity_main);
            button=(Button) findViewById(R.id.button1);
            button.setOnClickListener(new View.OnClickListener() {

                @Override
                public void onClick(View v) {
                    // TODO Auto-generated method stub
                    Thread thread=new Thread (new Client());
                    thread.start();
                }
            });

        }

        @Override
        public boolean onCreateOptionsMenu(Menu menu) {
            // Inflate the menu; this adds items to the action bar if it is present.
            getMenuInflater().inflate(R.menu.main, menu);
            return true;
        }

    }

package com.asd.soed;

import java.net.DatagramPacket;
import java.net.DatagramSocket;
import java.net.InetAddress;

import android.util.Log;

public class Client implements Runnable {
Client()
{
    run();
}
    @Override

    public void run() {
        // TODO Auto-generated method stub
        try {

            String messageStr = "Hello Android!";
            int server_port = 9999;
            DatagramSocket s = new DatagramSocket();
            InetAddress local = InetAddress.getByName("127.0.0.1");
            int msg_length = messageStr.length();
            byte[] message = messageStr.getBytes();
            DatagramPacket p = new DatagramPacket(message, msg_length, local,
                    server_port);
            s.send(p);
        } catch (Exception e) {

        }
    }
    }

server:

    package serv;

    /**
     *

     */
    import java.net.*;  
    import java.util.Date;  

    class Serv  
    {  
        private static final int PORT = 9999;  

        public static void main(String args[])  
            throws Exception  
        {  
      System.out.println("UDP Server Listening on port# " + PORT);  

            byte[] buffer  = new byte[65536];  
            DatagramSocket serverSocket = new DatagramSocket(PORT);  

            DatagramPacket receivePacket = new DatagramPacket(buffer, buffer.length);  
            for (;;)  
            {  

                serverSocket.receive(receivePacket);  

                System.out.println((new Date().toString()) + ": " +"Received " + receivePacket.getLength() +  
                    " bytes from " + receivePacket.getAddress() + ":" + receivePacket.getPort() + "...");  

                String value = new String(buffer, 0, receivePacket.getLength());  
                System.out.println(value);  

                receivePacket.setLength(buffer.length);  

                byte[] b = "Hello from UDP Server".getBytes();  

       DatagramPacket sendPacket = new DatagramPacket(b, b.length, receivePacket.getAddress(), receivePacket.getPort());   
       serverSocket.send(sendPacket);  

       System.out.println((new Date().toString()) + ": " +"Sent Response of " + b.length + "b to " +receivePacket.getAddress() + ":" + receivePacket.getPort());  

             }  
        }  
    } 
```

# sql - 如何构建适当的数据库模式以在选定的日期拥有表的“定期快照”？

> ID：15605043
> 
> 赞同：0
> 
> 时间：2013-03-24T22:49:17.480
> 
> 标签：sql, database, ms-access, database-design

**要解决的问题：** 我是数据库新手，我试图找出在表中存储更改的最佳方法，即某些状态的每日快照：例如。“hotel_room_rentals”表（有 20 列 - 每列都可以更改）。我希望能够为选定的日期生成该表（例如，生产变化中的数据，所以我必须将其存储在其他地方），或者对其进行一些其他转换（例如，一段时间内租用的平均天数）

**我的理论示例 - 详细：** 假设我为一家酒店创建了一个数据库。在生产系统中，我有一个表格，显示酒店所有 10 000 间客房的信息。这是每日快照 - 假设该表每天更新一次。

房间的某些属性经常变化：例如 is_rented；customer_number，rate_usd。一些属性不会经常更改：例如 disabled_room、room_color、type_of_furniture。Room_number 显然没有改变（主键）

现在我想找到最好的方法来跟踪这个表的变化；在此表的基础上创建统计数据的最佳方法（例如，一个时期内的平均租用天数）并能够生成选定日期的表（例如 2013-01-01）

**我的想法：** 由于我对数据库一无所知，我的想法是每天复制整个表，再加上 1 列，称为“DB_dump_date”（带有日期）。这是一种非常简单的方法，可能需要很多空间；由于我的 10k 个房间表，一年内必须复制 365 次。

**其他解决方案：** 在其他一些网站上，建议我创建两个表：“预订”表，其中包含以下列：Startdate Enddate Room Rate Occupant_name 然后将此表转换为 FactReservations 表：Date Room Is_occupied Rate Occupant_name 我不明白怎么做这对我有帮助......事实上，我假设我必须制作 20 个中间表，然后是 20 个事实表（因为我的数据库中有 20 个列）。

**问题：** 处理此类问题的推荐方法是什么？是否有任何数据库模式可以处理它，而无需用户制作神奇的 ETL？（例如，可以自行优化问题的数据库）有哪些替代方案？聪明的人，你会怎么做？（最好在 MS Access... 或一些免费软件技术中）

**编辑：** 还有一件事 - 桌子上的一切都可以改变，不仅仅是房间预订，一切; 我希望能够跟踪更改

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T22:57:57.803

停下来——放慢速度——深呼吸。

不要 - 重复 不要每天复制表格。这种方法太离谱了。

您的问题是标准化问题。正如您所指出的-您对如何规范化还有其他建议-这是您想要的方向。

您的目标是找到一种结构，该结构可以容纳可以回答您的问题的 SQL 语句（希望还有更多您尚未想到的问题） 这将是一个静态模型，其中表不会更改或被复制，但而是静态的——唯一改变的是表中的数据。（理想情况下 - 对我来说，更新也很少甚至没有，只有插入）

您肯定需要一个 ROOM 表和一个 CUSTOMER 表，然后它们之间的关系可能是 RESERVATION。

然后这些可以填满 - 你可以得到你提出的问题的所有答案，而无需任何复制或物化或任何东西......只需 SQL。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-24T23:51:59.847

您需要关注需求并从那里开始。到目前为止，我看到的要求是：

- 为选定的一天生成该表

- 平均租用天数

如果我们考虑两个极端的设计，在更复杂的一端将是一个带有 SCD 表的数据集市，用于跟踪房间的变化，而在简单的一端将是某种日志表，就像您已经提到的那样。

从字里行间看，我真的没有看到任何了解特定日期房间属性的要求，但我确实看到了分析历史交易的要求。

所以我的建议是在你开始设计数据库之前仔细考虑你的需求。

没有神奇的设计可以自动覆盖这一点。维度设计是对业务数据进行建模以方便分析的标准方法，但它可能超出您的要求。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-25T19:47:58.910

欢迎来到数据库的世界！考虑到这一点 - 把你所知道的关于 Excel 的几乎所有东西都扔到窗外。虽然在 Excel 中定义工作簿的两个工作表之间的关系并从这两个不同的工作表中报告要困难得多，但大多数情况下，简单地将相同的数据复制到单个工作表中会更容易，使用起来非常容易Access 或任何其他关系数据库。

通常，您想要做的是创建几个规范化表并定义它们之间的关系。然后，在查询视图时，您可以轻松地在表之间进行联接以获取所需的数据。

因此，假设您正在构建它是为了简单的报告而不是创建一个物业管理系统（如果您正在研究这个 - 我建议您看看该行业的一些参与者，例如 Micros或 Agilysys），根据我在该行业的工作经验，我推荐以下表格布局：

*   预订 - 这包含预订信息（客人姓名、抵达日期、离开日期、入住日期、退房日期、使用混合房价的房价等）
*   房间 - 这包含关于您的机架的信息（数量、翼代码、最大客人数、# 床、吸烟/不吸烟、视图、类型等）
*   房间状态 – 仅当您需要跟踪房间是否处于预订/保留/OOO/OTM 时（状态类型、日期开始、日期结束）
*   房间状态类型——房间状态的类型以及它如何影响库存（类型、库存不足标志）
*   价格（如果您不使用混合价格）——每晚每次预订一次（客人，价格）

就个人而言，我非常喜欢使用[代理键](http://en.wikipedia.org/wiki/Surrogate_key)作为唯一标识符，因为我经常被业务流程中的某些变化所困扰，并且以前突然之间唯一的自然键可以被复制。在这种情况下，每个表都有一个代理键，连接如下：

*   预订 - 房间（多对一）
*   房间 - 房间状态（一对多）
*   房间状态 - 房间状态类型（多对一）
*   预订 – 价格（一对多）

如果您在 Access 中正确定义了关系（即其他 DBMS 中的外键关系），它应该在创建查询（在几乎所有其他 DBMS 中称为视图）或报告时自动使用它们来构建您的连接。

为了了解数据库，我建议您查看：

*   [加入类型的维基百科](http://en.wikipedia.org/wiki/Join_%28SQL%29)
*   [Wikipedia on Slowly changed Dimension](http://en.wikipedia.org/wiki/Slowly_changing_dimension)（您可以使用其中一些技术来记录房间信息随时间的变化）
*   [关系数据库维基百科](http://en.wikipedia.org/wiki/Relational_database)
*   [关于 Access 的办公文档](http://office.microsoft.com/en-us/access-help/access-2010-database-tasks-HA101829991.aspx)
*   [Kimball Group Design Tips](http://www.kimballgroup.com/category/design-tips/)（非常适合数据仓库/数据集市设计）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-29T13:10:57.933

如果您需要使用现有表格，则以下内容不适用。如果可以将数据迁移到新模式，那么这将很容易解决挑战。TRE是一种使用当前视图范式进行开发但完全支持数据时间维度的方法（系统时间=数据进入数据库的时间，有效时间=适用于数据的业务时间）。通过使用 TRE 的当前视图方法，这类问题很简单。看看：- [http://youtu.be/V1EcsuJxUno](http://youtu.be/V1EcsuJxUno)

# mysql - JDBC 与 Mysql：使用带有 where 子句的多个外连接

> ID：15605045
> 
> 赞同：1
> 
> 时间：2013-03-24T22:49:30.233
> 
> 标签：mysql, jdbc

我对以下查询有疑问。它适用于 mysql 工作台，但当我在 java 中使用 jdbc 时不起作用。我不断收到语法错误。

这是查询：

```
"SELECT f.ISBN, f.text, m.title, AVG(r.rating) as score" +
" FROM RATES r LEFT OUTER JOIN FEEDBACK f ON (f.fid = r.fid) WHERE f.ISBN = ? " +
"LEFT OUTER JOIN MOVIE m ON (m.ISBN = f.ISBN) " +
"GROUP BY ISBN " +
"ORDER BY score DESC LIMIT ? "; 
```

我做了一些搜索，发现 {oj} 的 jdbc 转义语法。但我会得到另一个语法错误。

我最近遇到的错误是：

> HTTP 状态 500 - javax.servlet.ServletException:
> com.mysql.jdbc.exceptions.jdbc4.MySQLSyntaxErrorException: 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的“LEFT OUTER JOIN MOVIE m ON (m.ISBN = f.ISBN) GROUP BY ISBN ORDER BY score DESC L”附近使用正确的语法

我希望对此有一些新的看法，因为我似乎看不到我的问题。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T22:54:50.940

我认为该`WHERE`条款必须放在后面`JOINING`。下一个问题是 select 子句中的列数等于 group 子句中的列数（除了 avg、count 等函数）。所以你需要像这样更正你的查询：

```
SELECT f.ISBN, f.text, m.title, AVG(r.rating) as score
FROM RATES r
LEFT OUTER JOIN FEEDBACK f ON (f.fid = r.fid)
LEFT OUTER JOIN MOVIE m ON (m.ISBN = f.ISBN)
WHERE f.ISBN = ?
GROUP BY f.ISBN, f.text, m.title
ORDER BY score DESC LIMIT ? 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T22:55:28.347

左连接必须在 where 子句之前。并且 select 子句中列出的每一列都应该在 group by 子句中：

```
SELECT f.ISBN, f.text, m.title, AVG(r.rating) as score
FROM RATES r 
LEFT OUTER JOIN FEEDBACK f ON (f.fid = r.fid) 
LEFT OUTER JOIN MOVIE m ON (m.ISBN = f.ISBN) 
WHERE f.ISBN = ? 
GROUP BY f.ISBN f.text, m.title
ORDER BY score DESC
LIMIT ? 
```

# vb.net - 无法导入“导入 System.Web.Script.Serialization”

> ID：15605048
> 
> 赞同：3
> 
> 时间：2013-03-24T22:49:54.410
> 
> 标签：vb.net, visual-studio-2010, namespaces, import

当我尝试时`Imports System.Web.Script.Serialization`，我在 VB 2010 中收到一个错误，上面写着：

> *警告：导入中指定的命名空间或类型`System.Web.Script.Serialization`不包含任何公共成员或找不到。确保命名空间或类型已定义并包含至少一个公共成员。确保导入的元素名称不使用任何别名。*

不知道为什么我不能导入它。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-24T22:54:22.527

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-08-22T08:41:17.653

还要确保检查项目属性中的“目标框架”。如果您的目标是“客户端配置文件”框架，则程序集 System.Web.Extensions.dll 将无法作为对项目的引用添加。

# c# - 使用动态创建的文本框更新数据库

> ID：15605050
> 
> 赞同：0
> 
> 时间：2013-03-24T22:50:09.857
> 
> 标签：c#, asp.net, linq, dynamic, textbox

我正在为我拥有的网页项目编写购物车功能。在购物车页面上，它会在 cookie 中检查您的购物车 ID，然后在数据库中获取您的所有商品。因此，Cart 表中的每个项目都是动态创建的。在 .aspx 页面上，创建了一个空表。在代码隐藏中，为每个项目创建一个新行和单元格。

我在更新某个项目的数量时遇到问题。对于购物车中的每个项目，都会为数量动态创建一个文本框和按钮，并更新数量。数量设置为页面加载时数据库中的任何数量。更改文本框后，我似乎无法获取文本框的值，例如从 1 更改为 2。

以下是表格填充方式的摘要。我已经缩短了很多，只是为了展示我如何将数据加载到表中。

```
protected void Page_Load(object sender, EventArgs e){
    cartpopulate(cartID);
}

private void cartpopulate(int cartID){
    //for each item in database where cartID is paramater cartID
    //create a row 
    //get the product name, image, price, quantity, options, and make a cell for each
    //calculate total price from quantity and price
    //add in delete and quantity update buttons 
```

为方便起见，我们假设所有数量都是 1。因此，在 page_load 上，它将所有数量设置为 1。我认为我的问题是以下代码将文本框的值设置为填充时的数量，这将是 1。当您将其更改为 2 或其他值时，该值已经设置并且 2 什么都不做。数据库更新部分有效，我只是无法获得第二个值“2”。

这是数量更新代码...

```
 if (prod.Quantity == null) { quantitylabel.Value = 1.ToString(); }
            else { quantitylabel.Value = prod.Quantity.ToString() ; }
            quantityinput.ID = "quantity" + i.ToString();
            quantityinput.Width = 20;
            quantityinput.Text = quantitylabel.Value.ToString();
            quantitycell.Controls.Add(quantityinput);
            quantitycell.CssClass="cartitem";
            row.Cells.Add(quantitycell);

            Button btnUpdate = new Button();
            btnUpdate.Text = "Update";
            string arg = quantityinput.Text;
            btnUpdate.CommandName = "update";
            btnUpdate.CommandArgument = arg;
            btnUpdate.Command += (s, e) =>
                {
                    string quanupdate = Convert.ToString(e.CommandArgument);
                    int quanint = Convert.ToInt32(quanupdate);
                    prod.Quantity = quanint;
                    db.SubmitChanges();
                    Response.Redirect("cart.aspx");
                }; 
```

我查看了一些不同的解决方案，但似乎没有一个有效。我怀疑的两件事是问题将在 !IsPostBack 上做某事，或者在回发时重新创建动态创建的控件。我在网络编程方面是自学成才的，所以我不是 100% 确定如何做到这一点，但我认为其中之一就是问题所在。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T12:38:10.997

尝试使用静态变量，即使用 prod.Quantity 作为静态变量

# java - 生成的整数到二进制文件

> ID：15605051
> 
> 赞同：0
> 
> 时间：2013-03-24T22:50:12.290
> 
> 标签：java

我有作业问题，我无法得到最终答案。

问题是： **编写一个程序，使用 DataOutputStream 中的 writeInt(int) 方法将 100 个随机生成的整数写入二进制文件。关闭文件。使用 DataInputStream 和 BufferedInputStream 打开文件。读取整数值，就像文件包含未指定的数字一样（忽略您编写文件的事实）并报告数字的总和和平均值。**

我相信我完成了问题的第一部分（写入文件），但我不知道如何报告总和。

到目前为止，我所拥有的

```
import java.io.*;

public class CreateBinaryIO {
public static void main(String [] args)throws IOException {
    DataOutputStream output = new DataOutputStream(new FileOutputStream("myData.dat"));
    int numOfRec = 0 + (int)(Math.random()* (100 - 0 +1));
    int[] counts = new int[100];
    for(int i=0;i<=100;i++){
        output.writeInt(numOfRec);      
        counts[i] += numOfRec;
    }// Loop i closed
    output.close();
}

} 
```

这个 ReadBinaryIO 类：

```
import java.io.*;

public class ReadBinaryIO {
    public static void main(String [] args)throws IOException {
        DataInputStream input = new DataInputStream (new BufferedInputStream(new FileInputStream("myData.dat")));

        int value = input.readInt();

        System.out.println(value + " ");
        input.close();

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T23:16:09.727

尝试以下代码，您尝试读取一个整数：

```
 DataInputStream input = new DataInputStream (new BufferedInputStream(new FileInputStream("myData.dat")));

   int sum = 0;
   for(int i =0; i<=100; i++){
        int value = input.readInt();
        sum += value;
    }

    System.out.println(value + " ");
    input.close(); 
```

或者，如果您想动态设置 for 循环的长度，那么

在 myData.dat 文件上创建一个 File 对象，然后将文件大小除以 32 位

```
 File file = new File("myData.dat");
   int length = file.length() / 32;

   for(int i =0; i <= length;i++) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T23:31:51.277

```
int numOfRec = 0 + (int)(Math.random()* (100 - 0 +1)); 
```

那不是生成随机数。调查`java.util.Random.nextInt()`。

```
int[] counts = new int[100];
for(int i=0;i<=100;i++){
   output.writeInt(numOfRec);      
   counts[i] += numOfRec;
}// Loop i closed 
```

这实际上会中断，因为您正在使用`i<=100`而不是仅使用`i<100`但我不确定您为什么要填充该数组开始？此外，该代码只写了 101 次相同的数字。该随机数的生成需要在循环内，因此每次都会生成一个新的。

至于回读它，您可以使用这样的循环来循环您的文件：

```
long total = 0;
while (dataInput.available() > 0) {
  total += dataInput.readInt();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T02:34:36.013

尝试将问题分成几部分以使您的代码有机化，不要忘记在关闭之前刷新 OutputStream。

```
package javarandomio;

import java.io.DataInputStream;
import java.io.DataOutputStream;
import java.io.FileInputStream;
import java.io.FileOutputStream;
import java.util.Random;

public class JavaRandomIO {

public static void main(String[] args) {

    writeFile();
    readFile();
}

private static void writeFile() {
    DataOutputStream output=null;
    try {
        output = new DataOutputStream(new FileOutputStream("myData.txt"));
        Random rn = new Random();
        for (int i = 0; i <= 100; i++) {
            output.writeInt(rn.nextInt(100));
        }
        output.flush();
        output.close();
    } catch (Exception e) {
        System.out.println(e.getMessage());
    } finally{
        try{
            output.close();
        }catch(Exception e){
            System.out.println(e.getMessage());
        }
    }
}

private static void readFile() {
    DataInputStream input=null;
    try {
        input = new DataInputStream(new FileInputStream("myData.txt"));
        int cont = 0;
        int number = input.readInt();
        while (true) {
            System.out.println("cont =" + cont + " number =" + number);
            if (input.available() == 4) {
                break;
            }
            number = input.readInt();
            cont++;
        }
        input.close();
    } catch (Exception e) {
        System.out.println(e.getMessage());
    } finally{
        try{
            input.close();
        }catch(Exception e){
            System.out.println(e.getMessage());
        }
    }
}
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-27T04:12:29.440

到目前为止，我提交了作业，我想我得到了。

```
/** Munti ... Sha
course code (1047W13), assignment 5 , question 1 , 25/03/2013, 

 This file read the integer values as if the file contained an unspecified number (ignore 
the fact that you wrote the file) and report the sum and average of the numbers.
*/

import java.io.*;
public class ReadBinaryIO {
    public static void main(String [] args)throws ClassNotFoundException, IOException {
        //call the file to read 
        DataInputStream input = new DataInputStream (new BufferedInputStream(new FileInputStream("myData.dat")));
        // total to count the numbers, count to count loops process
        long total = 0;
        int count = 0;
        System.out.println("generator 100 numbers are ");
        while (input.available() > 0) {
          total += input.readInt();
          count ++;
            System.out.println(input.readInt());

        }
        //print the sum and the average
        System.out.println("The sum is " + total);
        System.out.println("The average is " + total/count);

        input.close();

    }

} 
```

CreateBinaryIO 类：

> 导入java.io.*；导入 java.util.Random；
> 
> public class CreateBinaryIO { //创建二进制文件 public static void main(String [] args)throws ClassNotFoundException, IOException { DataOutputStream output = new DataOutputStream(new FileOutputStream("myData.dat")); 随机 randomno = new Random();
> 
> ```
> for(int i=0;i<100;i++){       output.writeInt(randomno.nextInt(100));     }// Loop i closed   output.close(); }    } 
> ```

# c# - 如何以编程方式在 3D 空间中移动对象？

> ID：15605054
> 
> 赞同：3
> 
> 时间：2013-03-24T22:50:42.587
> 
> 标签：c#, wpf, 3d

我对 WPF 3D 动画真的很陌生，还有一些我仍在努力解决的问题。

我正在为从磁盘加载程序集的应用程序构建 3D UI。我可以创建一个代表当前加载的每个程序集的多维数据集。我想动画加载过程如下：

1.  在 3D 空间中选择一个随机点并将其设置为立方体的起始位置。
2.  动画从该随机点移动到原点 (0,0,0) 的立方体。当然，这涉及重新定位任何已经“滑入”到位的立方体。

创建随机起点没有问题。重新定位任何现有的立方体以为新的立方体腾出空间（以非动画方式）是没有问题的。但是我似乎找不到正确的程序组合来动画立方体从随机起点移动到原点。

我的（非常基本的）XAML 看起来像这样（窗口中的网格）：

```
<Grid Background="WhiteSmoke">        
    <Viewport3D Name="MainViewport" Height="500" Width="975">            
        <Viewport3D.Camera>
            <PerspectiveCamera x:Name="CubeCam" Position="0,0,35" LookDirection="-1,-1,-25 " UpDirection="0,1,0" FieldOfView="45" />
        </Viewport3D.Camera>
        <Viewport3D.Children>                
            <ModelVisual3D x:Name="Light">
                <ModelVisual3D.Content>
                    <Model3DGroup>
                        <DirectionalLight Color="White" Direction="10,-60,-125" />
                        <AmbientLight Color="#FF333333"/>
                    </Model3DGroup>                        
                </ModelVisual3D.Content>
            </ModelVisual3D>      
            <ModelVisual3D>                    
                <ModelVisual3D.Content>                        
                    <Model3DGroup x:Name="CubeGroup" />
                </ModelVisual3D.Content>                    
            </ModelVisual3D>                
        </Viewport3D.Children>
    </Viewport3D>
</Grid>` 
```

我目前正在使用 HelixToolkit，但除非我遗漏了一些东西，否则我会发现缺少文档。

我试图制作动画的立方体是 HelixToolkit 中的 CubeVisual3D 对象。我在代码中创建多维数据集并将它们添加到 CubeGroup。

我尝试了各种 XXXAnimation 对象，但我总是遇到同样的问题：当需要设置目标属性时，我试图动画的对象都没有我可以挂钩的 DependencyProperty。

重申一下，将这些立方体添加到 3D 空间中的静态（尽管是计算的）位置没有问题。我似乎无法做的是将它们设置为动画。

我很感激任何建议！

# c# - 如何避免错误：未找到源，但无法搜索部分或全部事件日志。无法访问的日志：安全性

> ID：15605056
> 
> 赞同：2
> 
> 时间：2013-03-24T22:50:57.007
> 
> 标签：c#, .net

我有一个遗留应用程序，如果存在正确的源，它将写入事件日志。当我使用权限不足的帐户运行时，我收到此错误：

```
The source was not found, but some or all event logs could not be searched.  Inaccessible logs: Security. 
```

执行的代码是：

```
if (!EventLog.SourceExists("foo")) 
```

现在我真的不在乎它是否存在，并且想测试该帐户是否具有访问权限。有没有简单的捕捉异常的好方法？

# ms-access - 将行 ID 值返回到 One

> ID：15605057
> 
> 赞同：0
> 
> 时间：2013-03-24T22:51:03.967
> 
> 标签：ms-access, ms-access-2007, primary-key

我已经输入了一些测试值并将我的当前值包含在我的访问数据库中。由于我的表单工作正常并准备好上线，我删除了我的数据库中的一些测试值。ID 是增量，我很好，但我怎么能返回我的 ID 回到 1 并再次重新输入我的当前值..例如，如果我在我的数据库中删除我的行 ID 1，我的行 ID 2 值将成为我的第一个值，它不会更改为 ID 1..如果我想要我删除第 1 行，作为 ID 1，我的第 2 行值应该是我的 ID=1 它应该自动更改..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T23:35:48.100

删除表中具有自动编号列的所有行，然后从 Access 应用程序中**压缩并修复数据库。**这会将自动编号计数器重置为 1。

# libcurl - 阻止 libcurl 发送 FTP LIST 命令

> ID：15605060
> 
> 赞同：0
> 
> 时间：2013-03-24T22:51:17.393
> 
> 标签：libcurl

当连接到服务器并发送特定的 QUOTE 命令时，libcurl(7.29.0) 似乎正在请求目录列表，即使我不想要这个。这是我得到的响应，表明在发送 MDTM 命令后 libcurl 发送了一个我不想要的 LIST 命令。如何防止它发送 LIST？

```
* Request has same path as previous transfer
> MDTM fileName
< 213 20130324223404
> EPSV
* Connect data stream passively
< 229 Entering Extended Passive Mode (|||x|)
*   Trying ip...
* Connecting to ip (ip) port x
> LIST
< 150 Here comes the directory listing. 
```

curl 会话代码的一部分（我在这里重用了一个 curl 句柄，该句柄之前将远程目录更改为 fileName 所在的位置，并为其他目的获取目录列表）：

```
 headers = NULL;
    headers = curl_slist_append(headers, "MDTM fileName");
    curl_easy_setopt(curlSession, CURLOPT_QUOTE, headers);       
    curl_easy_setopt(curlSession, CURLOPT_WRITEHEADER, &fileModResponse);
    res = curl_easy_perform(curlSession); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T01:03:30.830

我下载了 libcurl 源代码并找到了答案。指定 CURLOPT_NOBODY 选项可防止它发送 FTP LIST 命令。

```
curl_easy_setopt(curlSession, CURLOPT_NOBODY, 1); 
```

# python - Python 3：从其类中调用函数以模拟 switch 语句不起作用

> ID：15605061
> 
> 赞同：0
> 
> 时间：2013-03-24T22:51:21.240
> 
> 标签：python, python-3.x

我正在编写一个程序，它是石头剪刀布游戏变体的模拟游戏。在我的主函数中，我正在输出一个接口，然后尝试调用其中定义的一个方法，该方法充当 switch 语句。我得到：“makeSel() 缺少 1 个必需的位置参数：'self'” TypeErrors 我已经在网上搜索了任何提示，但找不到任何有帮助的提示。我试图将“makeSel()”更改为“Main.makeSel()”，但它只是让我知道 main 是未定义的。

* * *

```
class Main:

    def makeSel(self):
        selection = input()
        if(selection == 1):
            return StupidBot('StupidBot')
        elif(selection == 2):
            return RandomBot('RandomBot')
        elif(selection == 3):
            return IterativeBot('IterativeBot')
        elif(selection == 4):
            return LastPlayBot('LastPlayBot')
        elif(selection == 5):
            return MyBot('MyBot')
        elif(selection == 6):
            return HumanPlayer('HumanPlayer')
        else:
            print('Invalid selection, please try again.  Enter 1, 2, 3, 4, 5, or 6')
            makeSel()

    print('')
    print('Welcome to my Rock-Paper-Scissors-Lizard-Spock game!')
    print('')
    print('Please select two players, enter 1, 2, 3, 4, 5, or 6')
    print('  (1) -> StupidBot')
    print('  (2) -> RandomBot')
    print('  (3) -> IterativeBot')
    print('  (4) -> LastPlayBot')
    print('  (5) -> MyBot')
    print('  (6) -> HumanPlayer')

    p1 = makeSel()
    p2 = makeSel() 
```

* * *

我希望有人能够对我遇到的问题有所了解。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T22:59:05.967

要修复直接但，请更改`makeSel()`为`self.makeSel()`. `self`与其他一些语言不同，它不会隐式传递给 Python 中的方法调用。你的意思也是`return self.makeSel()`，我想。

另外，我认为你想要一个循环`mainSel()`。你递归调用`mainSel()`which 工作很像循环，但会填满调用堆栈。

```
class Main:

    def makeSel(self):
        while True
            selection = input()
            if(slection == 1):
                return StupidBot('StupidBot')
            elif(slection == 2):
                return RandomBot('RandomBot')
            elif(selection == 3):
                return IterativeBot('IterativeBot')
            elif(selection == 4):
                return LastPlayBot('LastPlayBot')
            elif(selection == 5):
                return MyBot('MyBot')
            elif(selection == 6):
                return HumanPlayer('HumanPlayer')
            else:
                print('Invalid selection, please try again.  Enter 1, 2, 3, 4, 5, or 6') 
```

# php - 在php中为存折创建通行证

> ID：15605066
> 
> 赞同：5
> 
> 时间：2013-03-24T22:51:47.500
> 
> 标签：php, passbook

我正在尝试为我的应用创建动态优惠券。我有一个创建它们的 PHP 服务器。但我不知道为什么他们不能在存折上工作。

如果我从终端创建通行证，它工作正常。但是在带有 PHP-PKPass 的 PHP 中。

我在 PHP 中留下了代码，它出现在我的计算机中，但它没有添加到存折中（如果我通过电子邮件发送它）

我 100% 确定 passTypeIdentifier、teamIdentifier、Certificate 和 WWDR 是 100% 正确的

注意：所有图片都存在

```
<?php
include ("conexion.php");
require('passpk/PKPass.php');

if (isset($_GET['cupon']) and $_GET['cupon'] != '' and $_GET['cupon'] > 0) {

    $cuponID = $_GET['cupon'];

    $pass = new PKPass\PKPass();

    $pass->setCertificate('./Certificate.p12');  // 2\. Set the path to your Pass Certificate (.p12 file)
    $pass->setCertificatePassword('*******');     // 2\. Set password for certificate
    $pass->setWWDRcertPath('./WWDR.pem'); // 3\. Set the path to your WWDR Intermediate certificate (.pem file)

    // Top-Level Keys http://developer.apple.com/library/ios/#documentation/userexperience/Reference/PassKit_Bundle/Chapters/TopLevel.html
    $standardKeys         = array(
        'description'        => 'Store',
        'formatVersion'      => 1,
        'organizationName'   => 'Store',
        'passTypeIdentifier' => 'pass.store.store', // 4\. Set to yours
        'serialNumber'       => $cupon['id'],
        'teamIdentifier'     => '********'           // 4\. Set to yours
    );
    $associatedAppKeys    = array();
    $relevanceKeys        = array();
    $styleKeys            = array(
        'coupon' => array(
            'primaryFields' => array(
                array(
                    'key'   => 'key',
                    'label' => "Label"
                )
            ),
            'secondaryFields' => array(
                array(
                    'key'   => 'name',
                    'label' => 'Tienda',
                    'value' => "Name"
                ),
                array(
                    'key'   => 'date',
                    'label' => 'Válido hasta',
                    'value' => "Vigencia"
                )
            ),
            'backFields' => array(
                array(
                    'key'   => 'tienda',
                    'label' => 'Tienda',
                    'value' => "tienda"
                ),
                array(
                    'key'   => 'sucursales',
                    'label' => 'Sucursales',
                    'value' => 'Valido en las sucursales y sus horarios'
                ),
                array(
                    'key'   => 'description',
                    'label' => 'Descripción',
                    'value' => "descr"
                ),
                array(
                    'key'   => 'terms',
                    'label' => 'Términos y Condiciones',
                    'value' => "cupon"
                )
            )
        )
    );
    $visualAppearanceKeys = array(
        'barcode'         => array(
            'format'          => 'PKBarcodeFormatPDF417',
            'message'         => "cupon",
            'messageEncoding' => 'iso-8859-1'
        ),
        'foregroundColor' => 'rgb(255, 255, 255)',
        'backgroundColor' => 'rgb(4, 148, 203)',
        'logoText'        => 'cupon'
    );
    $webServiceKeys       = array();

    // Merge all pass data and set JSON for $pass object
    $passData = array_merge(
        $standardKeys,
        $associatedAppKeys,
        $relevanceKeys,
        $styleKeys,
        $visualAppearanceKeys,
        $webServiceKeys
    );

    $pass->setJSON(json_encode($passData));

    //creating a temp file called strip.png
    //generamos un directorio temporal y creamos el strip
    $uniqID = uniqid('', true);
    $dir = './tempDir/'.$uniqID;
    mkdir($dir, 0777);

    //copiamos el archvio al nuevo directorio
    copy('../'.$img, './tempDir/'.$uniqID.'/strip.png');

    // Add files to the PKPass package
    $pass->addFile($dir.'/strip.png');
    $pass->addFile('images/icon.png');
    $pass->addFile('images/icon@2x.png');
    $pass->addFile('images/logo.png');
    $pass->addFile('images/logo@2x.png');

    if(!$pass->create(true)) { // Create and output the PKPass
        echo 'Error: '.$pass->getError();
    }

    //borramos el folder temp
    unlink($dir.'/strip.png');
    rmdir($dir);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T02:50:58.010

在我尝试安装您的通行证时查看控制台输出，我看到以下警告。

```
Mar 25 10:45:40 iPhone MobileSafari[279] <Warning>: Invalid data error reading pass pass.cuponice.cuponice/9\. Pass dictionary must contain key 'value'.
Mar 25 10:45:40 iPhone MobileSafari[279] <Warning>: PassBook Pass download failed: The pass cannot be read because it isn't valid. 
```

深入您的 pass.json，我发现您的`primaryFields`字典不包含“值”键。

```
 "primaryFields": [{
            "key": "key",
            "label": "30% de Descuento en Persianas"
        }
    ], 
```

要解决此问题，请更改您的 PHP 以向您的字典添加一个`value`键。`primaryFields`

```
$styleKeys = array(
    'coupon' => array(
        'primaryFields' => array(
            array(
                'key'   => 'key',
                'label' => "Label",
                'value' => ""
            )
        ),                            //... 
```

# java - 这是一个有效的 MaxHeap 结构吗？

> ID：15605070
> 
> 赞同：0
> 
> 时间：2013-03-24T22:52:08.900
> 
> 标签：java, tree, heap, min-heap, max-heap

我正在尝试将 minHeap 类转换为 maxHeap 类。我得到了 minHeap 类的代码，其中一种方法是 add。它看起来像这样：

```
while (index > 1 && getParent(index).compareTo(newElement) > 0) 
```

第一个节点自动设置为 null，因此添加的所有内容都放在节点 1 以后。如前所述，这段代码给出了一个 minHeap 结构。所以将其更改为 maxHeap，我只是像这样翻转比较器符号：

```
while (index > 1 && getParent(index).compareTo(newElement) < 0) 
```

我输入的项目由一个整数值存储。按插入顺序，它们是：

```
3
7
8
10
6
1
9
2 
```

在 minHeap 结构中，这些存储在节点中，如下所示：

```
 1
       2         3
    6     7   8     9
 10 
```

在 maxHeap 结构中，更改符号会像这样存储它们：

```
 10
      8           9
   2     7     3     6
 1 
```

请注意，它们的顺序不再与 minHeap 结构中的顺序相同。这很重要还是仍然是有效的 maxHeap？

为我展示树状结构的糟糕尝试道歉。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T23:31:36.533

是的。如果您的堆按您所说的那样存储，那么它是有效的最大堆。Max-Heap 具有每个节点（根节点除外）包含小于或等于其父节点的值的属性。你的堆遵守这条规则。

# facebook - 在用户评论她自己的帖子之前，Facebook 提及标签是不可能的？[漏洞？]

> ID：15605072
> 
> 赞同：2
> 
> 时间：2013-03-24T22:52:18.563
> 
> 标签：facebook, api, facebook-graph-api, facebook-page

带有用户的内联提及标签的评论，我们知道可以通过 API 发送它们以使用以下语法在页面上发布：

@[用户名：用户名]

但是，这似乎只有在提到自己对该帖子发表评论的用户时才有可能。据我所知，不可能发布带有提及标签的用户的评论，该用户写了您实际评论的帖子 - 除非该用户首先评论她自己的帖子。

简而言之，这似乎很奇怪。有没有办法解决这个问题？

非常感谢任何和所有帮助。

# javascript - AppMobi，html5 声音在模拟器和 android 上工作，但在 iphone 上不工作

> ID：15605075
> 
> 赞同：0
> 
> 时间：2013-03-24T22:52:32.697
> 
> 标签：javascript, html, appmobi

今天我开始使用appmobi。我正在开发一个小例子来处理声音。

我只需要创建一个处理程序来播放和停止许多声音。

```
var audioOn = new Audio('sounds/11.mp3'); 
audioOn.play(); 
```

此代码在 xdk 模拟器中运行，也适用于 android 设备，但不适用于我的 Iphone 5。

问题是，如果我使用标签，它可以在 iphone 上运行，但我想使用 javascript 原生 api 来处理声音等等。

我一直在尝试使用 appmobi 播放器库来处理它，但它没有停止、恢复等控件，这就是我想使用本机的方式。

这是javascript代码的一部分：

```
<script type="text/javascript">
/* This function runs once the page is loaded, but appMobi is not yet active */
var init = function(){
var alarmButton = document.getElementById("alarmButton");
var on = false;
//var audioOn = new Audio('http://rpg.hamsterrepublic.com/wiki-images/3/3e/Heal8-Bit.ogg');

var audioOn = new Audio('sounds/11.mp3'); 
audioOn.addEventListener('ended', function() {
this.play();
}, false);

var but = function(){
alert("but");
alert(on);
alert(audioOn);

if(!on){
on = true;
audioOn.currentTime = 0;
audioOn.play(); 
}
else{
on = false;
audioOn.pause(); 
}
}
//alarmButton.addEventListener("click",but,false);
alarmButton.addEventListener("touchstart",but,false);
alarmButton.addEventListener("tap",but,false);

};

window.addEventListener("load",init,false);

/* This code prevents users from dragging the page */
var preventDefaultScroll = function(event) {
event.preventDefault();
window.scroll(0,0);
return false;
};
document.addEventListener('touchmove', preventDefaultScroll, false);

/* This code is used to run as soon as appMobi activates */
var onDeviceReady=function(){
//Size the display to 768px by 1024px
AppMobi.display.useViewport(768,1024);
//hide splash screen
AppMobi.device.hideSplashScreen(); 
};

document.addEventListener("appMobi.device.ready",onDeviceReady,false);

function echo(){
alert("clicked");
}

</script> 
```

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T08:20:44.083

似乎它不是 appmobi 问题。

我认为适用于 iphone 的 appmobi 实验室应用程序使用 safari mobile 来运行 html5 测试。

所以这是一个野生动物园移动事件。

由 onclick 事件启动时似乎 play() 工作。请参阅[http://groups.google.com/group/iphonewebdev/browse_thread/thread/91e31ba7ae25e6d4?hl=en](http://groups.google.com/group/iphonewebdev/browse_thread/thread/91e31ba7ae25e6d4?hl=en)

需要进行一些测试...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-08T10:40:11.527

I have to try this:

[http://www.schillmania.com/projects/soundmanager2/](http://www.schillmania.com/projects/soundmanager2/)

> Supporting HTML5 audio can be tedious in modern browsers, let alone legacy ones. With real-world visitors using browsers ranging from mobile Safari to IE 6 across a wide range of devices, there can be many support cases to consider.
> 
> SoundManager 2 gives you a single, powerful API that supports both new and old, using HTML5 audio where supported and optional Flash-based fallback where needed. Ideally when using SoundManager 2, audio "just works."

# wolfram-mathematica - Mathematica 8 使用 Heun 方法/改进的 Euler 方法

> ID：15605076
> 
> 赞同：0
> 
> 时间：2013-03-24T22:52:38.790
> 
> 标签：wolfram-mathematica

![在此处输入图像描述](../Images/9f226832421d4673c159731db600945b.png)

```
Clear[x, y, h, k, FirstSlope, SecondSlope];
h = [Pi]; y[[Pi]] = 0;
dy[x_, y_] = (Cos[x] - 3 x^2 y)/x^3;
Do[{x[k] = [Pi] + h*(k - [Pi]),
   FirstSlope = dy[x[k], y[k]],
   SecondSlope = dy[x[k] + h, y[k] + h*FirstSlope], 
   y[k + [Pi]] = y[k] + (h*(FirstSlope + SecondSlope))/2}, {k, [Pi], 
   5[Pi]}] Table[{x[k], y[k]}, {k, [Pi], 5[Pi]}]; 
MatrixForm[%] 
```

上图是我的错误。我正在尝试使用 Heun 的方法，我的问题是：

1）我希望它停下来，`y[5 Pi]`但它继续前进。我可以操纵它，让它去`y[5 Pi]`，但我想知道它到底为什么这样做。

2)`y[k]`不在 k=pi,2pi,3pi 等处进行评估。

# c# - NHibernate：为查询参数显式设置数据类型和长度

> ID：15605078
> 
> 赞同：2
> 
> 时间：2013-03-24T22:52:54.887
> 
> 标签：c#, nhibernate, mapping-by-code

我正在通过代码和 sql server 2012 使用 NHibernate 映射。我还在会话工厂中使用 Sql2008ClientDriver 作为驱动程序。我一直在试图弄清楚如何将确切的 sql 类型和长度映射到代表表的 C# 对象。我遇到的问题是生成的 sql 中指定的数据类型，特别是字符串。

例如：

> 公共虚拟字符串 SomeProperty { get; 放; }

这在生成查询时转换为 nvarchar(4000) 参数，但此列是数据库中的 char(6)。是否可以在映射中指定一些方式？

我相信会有性能损失，因为 sql server 在执行查询之前会进行转换。

我试过这个（它不起作用）： http: [//notherdev.blogspot.com.au/2012/01/mapping-by-code-property.html](http://notherdev.blogspot.com.au/2012/01/mapping-by-code-property.html)

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T23:24:30.750

这是一个冗长的映射，它导致了一个工作`char(6)`领域。

```
Property(x => x.SomeProperty,
         pm =>
         {
             pm.Type(NHibernateUtil.AnsiString);
             pm.Length(6);
             pm.Column(cm => cm.SqlType("char(6)"));
         }); 
```

开箱即用的支持可能会更好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T23:01:04.447

在您的映射文件中，您可以指定`sql-type`：

```
<property name="SomeProperty" type="String">
   <column name="ColumnName" sql-type="char(6)" />
</property> 
```

# java - 未使用局部变量

> ID：15605079
> 
> 赞同：0
> 
> 时间：2013-03-24T22:52:56.097
> 
> 标签：java, eclipse, local-variables, palindrome

我正在尝试测试输入的单词是否是回文（向前和向后拼写相同）。据我所见，它应该可以工作，但 Eclipse 说“未使用局部变量 isPalindrome 的值”，但它被使用了。问题是，即使这个词不是回文，它也说它是。

```
import java.util.Scanner;

public class Palindrome {
    public static void main(String[] args) {
        String phrase;
        char[] phraseLetters;
        int endChar;
        boolean isPalindrome;

        Scanner input = new Scanner(System.in);
        System.out.println("Enter a word or phrase.");
        phrase = input.nextLine();
        input.close();

        phrase = phrase.toLowerCase();
        phrase = phrase.replaceAll(" ","");
        phraseLetters = phrase.toCharArray();

        endChar = phraseLetters.length - 1;

        for (int i = 0; i < phraseLetters.length; i++) {
            if (phraseLetters[i] != phraseLetters[endChar]) {
                isPalindrome = false;   
            } else {
                isPalindrome = true;
                endChar -= 1;
            }
        }

        if (isPalindrome = true) {
            System.out.println("This word or phrase entered is a palindrome.");
        } else {
            System.out.println("This word or phrase is not a palindrome.");
        }
    }
} 
```

编辑：我试过 if 语句是

```
 if (isPalindrome == true) 
```

和

```
 if (isPalindrome) 
```

在这两种情况下，Eclipse 都会在这种 if 条件下说“局部变量 isPalindrome 可能尚未初始化”。

最终编辑：

从那以后，我继续前进，重写了这段代码，但是如果有人还在看这个，我就回去修复我的原始代码。

我在代码开头初始化了 isPalindrome：

`Boolean isPalinddrome = True;`

我将for循环条件更改为：

`for (int i = 0; (i < phraseLetters.length) && (isPalindrome); i++)`

最后我`if (isPalindrome = true)`改为`if (isPalindrome)`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-24T22:54:33.520

`if (isPalindrome = true)`应该是`if (isPalindrome == true)`（或**`if (isPalindrome)`**更好！实际上这个错误是另一个很好的理由，为什么不问`someBoolean == true`哪个是不好的风格）

通过键入`if (isPalindrome = true)`，您再次将值分配给`true`变量`isPalindrome`。而且由于您只是为其分配值，因此编译器会警告您*未使用的变量*。

知道这一点也很好：

> 在运行时，赋值表达式的结果是赋值发生后变量的值。赋值表达式的结果本身不是变量。

因此，当您这样做时，`if (isPalindrome = true)`始终满足 if 条件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-24T23:02:52.480

`isPalindrome`您应该在`main`范围内分配一些布尔值。

例如：

```
boolean isPalindrome = true 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-24T23:15:20.163

你有一个错字。

```
if (isPalindrome = true)
{
    System.out.println("This word or phrase entered is a palindrome.");
}
else
{
    System.out.println("This word or phrase is not a palindrome.");
} 
```

查看*if*条件。您使用 = 而不是 ==。因此，您将 isPalindrome 设置为 true，仅执行 true 块，编译器认为这`isPalindrome`无关紧要。

现在，您的课程有一些逻辑缺陷和一些编程陷阱。

1.  如果第一个和最后一个字符不相等，`isPalindrome`则设置为 false，然后程序继续。跳出循环；不要让`isPalindrome`设置为`true`以后。顺便说一句，您的版本实际上只关心第一个和最后一个字符。
2.  不要写`if (x == true)`。就写吧`if (x)`。
3.  不要命名你的 boolean `isAnything`。毕竟，您可以在 JavaBean 类中执行此操作，然后您将得到一个名为`isIsAnything`or的方法`getIsAnything`。这会惹恼你的读者。
4.  将来，不要在`main(String[])`方法中编写所有代码。让 main 方法使用参数来构造类的实例，并使用该实例。这样，您可以为该类编写单元测试；你不能主要。您可以将代码分解为几种方法。一个检查是否是回文，而另一个提供人类可读的输出。
5.  使用和的无参数形式实际上是一个坏主意。`String.toLowerCase()`有`String.toUpperCase()`一天，您可能需要编写一个国际化的应用程序，并且您将不得不处理土耳其语语言环境。你最终可能会自言自语，“无点的 i 到底是什么？”</li>
6.  不要在这里使用`i`和`j`作为变量名。使用显示变量用途的名称。就像是：

    for (int start = 0, end = phraseLetters.length - 1; start < end; start++, end--) { ... }

毕竟，当`start`通过时`end`，您只是在重复自己。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-25T07:53:32.330

这里有一个错误和不好的做法。

不好的**做法**是不初始化变量：

```
boolean isPalindrome = true; 
```

尽管 java 中的所有原语都有一个默认值（对于布尔值，它是 false），但为了增强代码可重复性，显式初始化变量总是更好的。

**错误**在if 子句中：

```
if (isPalindrome = true) { 
```

在这一行中，您分配值而不检查变量，所有分配都返回分配的值，这意味着该表达式将始终返回 true。因此，您的代码始终返回 true。

# jquery - 使用 MVC 4 的 Jquery UI 自动完成

> ID：15605084
> 
> 赞同：1
> 
> 时间：2013-03-24T22:53:26.217
> 
> 标签：jquery, asp.net-mvc, visual-studio, asp.net-mvc-4, razor

我在 MVC 4 中使用带有 Razor HTML 的 jquery ui 自动完成功能。我可以将它与硬编码值一起使用，但我想知道如何将它连接到数据库，以便不必对即将出现的值进行硬编码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T23:03:14.963

如果您使用的是 MVC4，那么您应该创建一个可以从视图访问的操作（呈现操作 url）。然后，您需要在设置自动完成 jquery 时将此 (url) 设置为源。

远程源的文档在[这里](http://jqueryui.com/autocomplete/#remote)。

对于 MVC，它看起来像这样：

```
$( "#birds" ).autocomplete({
      source: "/MyController/OptionsAction",
      minLength: 2,
      select: function( event, ui ) {
        log( ui.item ?
          "Selected: " + ui.item.value + " aka " + ui.item.id :
          "Nothing selected, input was " + this.value );
      }
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-26T12:27:12.830

最好使用 MVC 的 @URL.Action 来确保正确编码 URL，即使您的视图是一到十个文件夹深。

在上面的示例中，“/MyController/OptionsAction”如果您将视图向下移动一个文件夹，@URL.Action 将继续工作，则该文件夹将不起作用。

**注意ajax调用的格式是这样的：**

1.  发送数据：

url（您发布到的位置）

数据（您发布的数据）

类型（发出的请求类型：POST 或 GET 或 PUT。如果留空，则默认为 GET）

contentType（向服务器发送数据时使用的内容类型。除非必要，否则最好不要更改）

2.  接收数据：

dateType（您期望返回的数据类型：在本例中为 json）

成功（请求成功时调用的函数）

```
 $('#Country').autocomplete({
        source: function (request, response) {
            $.ajax({
                url: '@Url.Action("GetCountries", "User")',
                data: "{ 'CountrySearch': '" + $('#Country').val() + "' }",
                dataType: "json",
                type: "POST",
                contentType: 'application/json',
                success: function (data) {
                    response($.map(data, function (item) {
                        return JSON.parse(item);
                    }))
                },
                error: function (jqXhr, textStatus, errorThrown) { alert("Error '" + jqXhr.status + "' (textStatus: '" + textStatus + "', errorThrown: '" + errorThrown + "')"); },
            })
        },
        minLength: 1,
    }); 
```

国家从这样的数据库调用中返回数据的地方：

{ "国家":"["澳大利亚", "奥地利", "加拿大", "美国"]" }

```
 public JsonResult GetCountries(string CountrySearch)
    {
        string[] Countries = new AddressManager().GetCountries(CountrySearch);
        string serialisedList = new JavaScriptSerializer().Serialize(Countries);
        return new JsonResult { Data = new { Countries = serialisedList }, ContentEncoding = Encoding.UTF8, ContentType = "text/plain", JsonRequestBehavior = JsonRequestBehavior.AllowGet };
    } 
```

# css - “-webkit-overflow-scrolling: touch”在移动设备上导致垂直滚动问题

> ID：15605085
> 
> 赞同：7
> 
> 时间：2013-03-24T22:53:28.773
> 
> 标签：css, responsive-design, mobile-webkit

我正在制作一个响应式移动网站。在我的手机上进行测试时，我注意到我无法垂直滚动超过可以水平滚动的内容。

这是我的意思的一个示例（抱歉，您看不到手机上的水平滚动条，但请相信我它有效）。

移动 Webkit 浏览器**无法**滚动浏览此示例中的表格：http: [//jsfiddle.net/tArEy/](http://jsfiddle.net/tArEy/)

然后我注释掉以下行以使垂直滚动工作。然而，这使得水平滚动有点不稳定。

```
-webkit-overflow-scrolling: touch; 
```

在这个例子中，移动 Webkit 浏览器**可以**滚动过去的表格，但它有点小故障。 [http://jsfiddle.net/tArEy/1/](http://jsfiddle.net/tArEy/1/)

有谁知道如何仅使用 CSS 来解决这个问题？

演示必须在浏览器上进行测试。（我在 Android 上运行 Chrome 浏览器。我认为 iPhone 也有同样的问题）。

**编辑：**

事实证明，在您的 CSS 中没有以下行的移动 webkit 浏览器中，水平滚动是非常错误的：

```
-webkit-overflow-scrolling: touch; 
```

但是，那条线无法垂直滚动，所以我有点停滞不前。其他非 webkit 浏览器水平滚动就好了。

**编辑2：**

我拿到了一部iphone。溢出滚动是硬件加速的并且可以完美运行。这似乎只是**Android 版 Chrome 的**问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-09T15:16:57.303

这是仅适用于 Android 的 chrome 中的错误。它已在最近的升级中修复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T07:27:38.747

这可能有助于解决问题：[http://filamentgroup.github.com/Overthrow/](http://filamentgroup.github.com/Overthrow/) 仅在较新的手机中支持溢出滚动。当我测试时，我发现新手机是否有轻微的滚动问题，支持 android 2.x 和 ios4 会让你哭泣。

如果您是水平滚动，您可能需要重新考虑您的设计。

# javascript - 需要帮助使用 JavaScript 从新 HTML 页面上的 HTML 表单返回数据

> ID：15605088
> 
> 赞同：0
> 
> 时间：2013-03-24T22:54:11.043
> 
> 标签：javascript, html, forms

我在一些我相信你们大多数人会笑的事情上遇到了一些麻烦。

我有一个内置在一个 HTML 页面 (contact.html) 中的表单，我需要另一个 HTML 页面 (submit.html) 显示使用 JavaScript 输入到表单中的信息。这是我第 1 页的表单代码：

```
<form name="contact" method="post" action="submit.html">
    <p>First Name: *</p><input type="text" name="first">
    <p>Last Name: *</p><input type="text" name="last">
    <p>Cell Phone Number:</p><input type="text" name="number">
    <p>E-mail Address: *</p><input type="text" name="address">
    <p>Comment: *</p>
    <p><textarea name="comments" cols="25" rows="5">
</textarea></p>
    <p><input type="submit" value="Submit"></p>
    </form> 
```

有人可以指出我正确的方向吗？我确实是 JavaScript 的新手，所以我还不太了解它。

提前谢谢你，请放轻松！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T23:08:37.420

您无法使用 javascript 获取发布参数 - 发布参数以隐藏的方式通过标题，您必须将第二页设置为某个服务器端页面（php、asp.net 等），例如在 php 中您可以使用以下方法获取发布参数：

```
$first_value = $_POST['first']; 
```

如果您仍然只想使用 javascript，您可以将表单的方法更改为“get”（`method="get"`），然后参数将在 URL 中 - 然后在另一个页面中，您可以使用正则表达式来获取使用此参数功能：

```
function getQSParam(key,target){
    var value = '';
    if(!target){
        target = location.href;
    }

    var pattern = key + '=([^&]+)';
    var o_reg = new RegExp(pattern,'i');
    var matches = o_reg.exec(target);
    if(matches && matches[1]){
        value = matches[1];
    }

    return value;
} 
```

因此，如果 url 是这样的： submit.html?first=karl&last=marx&... 您可以使用以下函数获取这些参数：

```
var first_value = getQSParam('first');
var last_value = getQSParam('last'); 
```

等等...

# html - 如何更改另一个班级的班级价值？

> ID：15605094
> 
> 赞同：0
> 
> 时间：2013-03-24T22:54:53.937
> 
> 标签：html, css, joomla

这是一些代码：

```
<div id="one">
  <div id="two">
    <div class="cell_pad">
    </div>
  </div>
</div> 
```

如何告诉 css，那个`you have to change value of class "cell_pad" which is in id="one"`？

.cell_pad 在代码中重复了几次，但我必须改变`one occurence of this class.`

我正在使用`sparky framework`joomla。

我在我的样式表中试过这样，但它没有效果：

```
#one > .cell_pad{} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T22:59:38.907

你应该使用

```
#one .cell_pad{} 
```

选择 #one 元素中的所有 .cell_pad 元素，您可以在这里查看[http://www.w3schools.com/cssref/css_selectors.asp](http://www.w3schools.com/cssref/css_selectors.asp)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T23:32:18.347

你应该使用这个：

```
#one .cell_pad 
{
} 
```

这将选择 #one 元素中的所有 .cell_pad 元素

# powershell - Start-Job 输出在哪里？

> ID：15605095
> 
> 赞同：8
> 
> 时间：2013-03-24T22:54:58.497
> 
> 标签：powershell

```
W:> $job = start-job { Write-Output "hi there"; throw "an error!" } | Wait-Job
W:> $job | select *

State         : Failed
HasMoreData   : True
StatusMessage :
Location      : localhost
Command       :  Write-Output "hi there"; throw "an error!"
JobStateInfo  : Failed
Finished      : System.Threading.ManualResetEvent
InstanceId    : 882957a9-a5e0-4876-bd22-0dbd87512f10
Id            : 7
Name          : Job7
ChildJobs     : {Job8}
PSBeginTime   : 3/24/2013 5:52:41 PM
PSEndTime     : 3/24/2013 5:52:47 PM
PSJobTypeName : BackgroundJob
Output        : {}
Error         : {}
Progress      : {}
Verbose       : {}
Debug         : {}
Warning       : {} 
```

我的输出去哪儿了？如何查看标准输出/错误流？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-03-24T23:23:54.157

作业在后台运行，因此它们不会写入控制台。您必须[`Receive-Job`](http://technet.microsoft.com/en-us/library/hh849718.aspx)在作业完成后运行以收集其输出。

# html - 将类和占位符分配给 html 选项并选择标签

> ID：15605097
> 
> 赞同：0
> 
> 时间：2013-03-24T22:55:12.800
> 
> 标签：html, semantics

将类分配给`<option>`标记或标记`placeholder`在语义上是否不正确`<select>`？它还有其他缺点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T23:22:46.463

`class`是 HTML5 中的[全局属性](http://www.w3.org/TR/html5/dom.html#global-attributes)，因此可以应用于`option`但`placeholder`不允许在`select`. 为什么？可能出于实际/历史原因，因为第一个选项显示在 select - of `size`< 2 - 并且没有留下空间来显示另一个文本，因为它是空的`input[type="text"]`

那么如何在文本输入中实现与占位符相同的效果呢？那么你不需要它：

> （[关于占位符的 HTML5 文档](http://www.w3.org/html/wg/drafts/html/master/forms.html#the-placeholder-attribute)）
> placeholder 属性表示一个简短的提示（单词或短语），旨在帮助用户在控件没有值时输入数据。

*   选择一个选项不需要任何数据输入（日期确实需要指定格式，如 mm/dd/aaaa 或 dd/mm/aaaa...）
*   已经有一个标签来指示选择的目的（与`for/id`每个属性相关联）
*   您应该在第一个选项中添加什么？这是一个很好的问题......在`-------`（“*哦，但是用户可能看不到选择*”），`Please select blah`......之间`(repeating the label)`，`first option but we'll never know if user did choose this option or forgot to select another one`这是一个人体工程学问题，而不是我的专业领域。;)

# javascript - div的内容作为图像到剪贴板？

> ID：15605105
> 
> 赞同：1
> 
> 时间：2013-03-24T22:55:49.610
> 
> 标签：javascript, css, canvas, web, screenshot

这是我想要的一个例子：[http ://gumonshoe.net/magic/card/?card=620](http://gumonshoe.net/magic/card/?card=620)

我有一个将数据元素与图像混合在一起的网站。实际上，它甚至可以根据其中一些元素对图像应用遮罩效果。结果是一系列相当独特的图形卡，我希望用户能够保留其图像。各种出口。

不幸的是，据我所知这是不可能的，但我希望你们中的一个可以帮助我。我希望用户能够单击一个按钮来获取他们正在查看的内容的屏幕截图。我有一个包含所有对象的 div 元素。

我考虑过尝试在 PHP 中预渲染图像或全程使用画布，但我的主要问题是：确定文本是否溢出框取决于字体并且需要大量工作。由于我不使用带有单型字符的字体，例如 courier new，所以我真的不知道这些单词将在画布中占用多少空间。似乎也没有一种方法可以测量您放入画布的文本的高度和宽度。或者，如果有，我只是没有找到文档（或者自从我上次检查以来它已经更新）。

我愿意尝试一些不同的东西，甚至，可能会在我的用户中创建一个可以安装的插件，它能够为他们执行此操作。但理想的解决方案是让 javascript 有办法做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T03:52:32.913

**您可以通过组合图像和文本来使用 Canvas 来创建卡片**

下面的代码测量您提供的任何字体大小和字体的文本高度。然后它会将您的文本包装在您指定的卡片宽度内。

为用户设计好卡片后，您可以通过在 html img 标签中将卡片显示为 png 图像来让用户保存您的卡片……方法如下：

```
// html image element where the card will be displayed in PNG format
<p>Right-click the card image below to save it</p>
<img id="card" > 

  // javascript: save canvas image to a dataURL and then
  // put that dataURL into the html image tag so the user can see/save the card
  var dataURL = canvas.toDataURL();
  document.getElementById('card').src = dataURL; 
```

![在此处输入图像描述](../Images/7f4a1f235c49f3a8ec442d0daa641f06.png)

这是代码和小提琴：http: [//jsfiddle.net/m1erickson/RtWwF/](http://jsfiddle.net/m1erickson/RtWwF/)

```
<!doctype html>
<html>
<head>
<link rel="stylesheet" type="text/css" media="all" href="css/reset.css" /> <!-- reset css -->
<script type="text/javascript" src="http://code.jquery.com/jquery.min.js"></script>

<style>
    body{ background-color: ivory; }
    canvas{border:1px solid red;}
</style>

<script>
$(function(){

    var canvas=document.getElementById("canvas");
    var ctx=canvas.getContext("2d");

    var img=new Image();
    img.onload=function(){
      canvas.width=img.width;
      canvas.height=img.height;
      ctx.drawImage(img,0,0);

      var text="Whenever Cowardly Lion becomes the target of a spell or ability exile Cowardly Lion; or whenever another creature enters the battlefield exile Cowardly Lion. Then you may return it to the battlefield.";

      wrapText(ctx,text,19,330,300,"14px Verdana");

      text="You're right, I am a coward! I haven't any courage at all. I even scare myself.";

      wrapText(ctx,text,19,425,300,"italic 14px Verdana");

    }
    img.src="http://dl.dropbox.com/u/139992952/stackoverflow/card.png";

    function wrapText(context, text, x, y, maxWidth, fontSizeFace) {
      var words = text.split(' ');
      var line = '';
      var lineHeight=measureTextHeight(fontSizeFace);
      // +40% = lead
      lineHeight=parseInt(lineHeight*1.4);  

      context.font=fontSizeFace;
      for(var n = 0; n < words.length; n++) {
        var testLine = line + words[n] + ' ';
        var metrics = context.measureText(testLine);
        var testWidth = metrics.width;
        if(testWidth > maxWidth) {
          context.fillText(line, x, y);
          line = words[n] + ' ';
          y += lineHeight;
        }
        else {
          line = testLine;
        }
      }
      context.fillText(line, x, y);
    }

    function measureTextHeight(fontSizeFace) {

        // create a temp canvas
        var width=1000;
        var height=60;
        var canvas=document.createElement("canvas");
        canvas.width=width;
        canvas.height=height;
        var ctx=canvas.getContext("2d");

        // Draw the entire a-z/A-Z alphabet in the canvas
        var text="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";
        ctx.save();
        ctx.font=fontSizeFace;
        ctx.clearRect(0,0,width,height);
        ctx.fillText(text, 0, 40);
        ctx.restore();

        // Get the pixel data from the canvas
        var data = ctx.getImageData(0,0,width,height).data,
            first = false, 
            last = false,
            r = height,
            c = 0;

        // Find the last line with a non-transparent pixel
        while(!last && r) {
            r--;
            for(c = 0; c < width; c++) {
                if(data[r * width * 4 + c * 4 + 3]) {
                    last = r;
                    break;
                }
            }
        }

        // Find the first line with a non-transparent pixel
        while(r) {
            r--;
            for(c = 0; c < width; c++) {
                if(data[r * width * 4 + c * 4 + 3]) {
                    first = r;
                    break;
                }
            }

            // If we've got it then return the height
            if(first != r) return last - first;
        }

        // error condition if we get here
        return 0;
    }

}); // end $(function(){});
</script>

</head>

<body>
    <canvas id="canvas" width=300 height=300></canvas>
</body>
</html> 
```

# html - 建议的元标签？

> ID：15605106
> 
> 赞同：-2
> 
> 时间：2013-03-24T22:55:50.993
> 
> 标签：html

我实际上正在使用 HTML 5，我想用它构建一个有效且安全的代码。

有人可以告诉我元标签的要求是什么吗？

我目前有以下内容：

```
<meta charset="UTF-8" /> 
```

由于网站的有效性或安全性，还有其他要求/或建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T23:16:46.233

为了检查有效性，我会针对[http://validator.w3.org/](http://validator.w3.org/)运行您的站点并更正它显示的任何错误。[还针对 DOM Monster ( http://mir.aculo.us/dom-monster/](http://mir.aculo.us/dom-monster/) ) 和 YSlow ( [http://yslow.org/](http://yslow.org/) ) 之类的东西进行测试以进行常见调整。

# java - 如何在 messages.properties 文件中使用参数？

> ID：15605107
> 
> 赞同：22
> 
> 时间：2013-03-24T22:55:56.230
> 
> 标签：java

在[这个问题](https://stackoverflow.com/q/5600055/456218)中，它指出，可能有类似的东西：

```
message.myMessage = This message is for {0} in {1} 
```

但我不知道如何将参数传递给它

```
MESSAGES.getString("message.myMessage", "foor", "bar") 
```

但不幸的是 getString 不知道带其他参数有什么想法吗？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-03-24T23:53:42.987

我猜你在想[MessageFormat](http://docs.oracle.com/javase/6/docs/api/java/text/MessageFormat.html)？如果是这样，那就是这样的：

```
String s = MessageFormat.format("This message is for {0} in {1}", "foo", "bar"); 
```

或从属性：

```
Properties p = new Properties();
p.setProperty("messages.myMessage", "This message is for {0} in {1}");
String s = MessageFormat.format(
    p.getProperty("messages.myMessage"), "foo", "bar"); 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-03-24T23:53:06.330

试试这个：

```
String message = "This message is for {0} in {1}.";
String result = MessageFormat.format(message, "me", "the next morning");
System.out.println(result); 
```

( `java.text.MessageFormat;`)

或者在 JSF 中：

```
<h:outputFormat value="This message is for {0} in {1}.">
    <f:param value="me">
    <f:param value="the next morning">
</h:outputFormat> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-02-04T06:48:28.783

您可以使用字符串数组。

```
String[] params = new String[2]; 
params[0] = "This is your text including parameters";
params[1] = "This is your second text including parameters"; 
```

如果您使用的是 JSF，请以这种方式从您的支持 bean 将 Array 作为警告文本传递给文本：

```
JsfUtil.addWarn("A_MSG_TITLE_IN_PROPERTIES_FILE", params); 
```

并将这一行插入到您的本地属性文件中：

```
A_MSG_TITLE_IN_PROPERTIES_FILE = Hello {0} and {1} 
```

所以，输出将是：

*您好，这是您的包含参数的文本，这是您的第二个包含参数的文本*

# php - php- 网络爬虫：讨论“索引唯一 URL” - 性能问题

> ID：15605108
> 
> 赞同：0
> 
> 时间：2013-03-24T22:55:59.130
> 
> 标签：php, mysql, web-crawler, large-data

（原谅我英语不好）

我在特定范围的 URL 上运行自定义网络爬虫。我正在对其进行测试，到目前为止一切正常。

最近我注意到一个我想讨论的性能问题 - 机器人正在爬取在 url_pool 表中索引的页面，同时在目标页面中搜索目标内容，如果它们不在表中，机器人会保存它们找到的页面链接已经...我在操作多个爬网脚本（同时）时遇到了一些冲突问题，但我修复了它。

在爬取了大约 150 万页后，我的 url_pool 表包括近 5M 行，其中包含 url、一些“标志”、url 哈希（simhash - 32 位）、域等......

mysql db 表是具有大缓冲区的 innodb，并且根据搜索查询的索引很好。我在监控机器人的性能时注意到，我用来防止表中重复 url 的“检查是否存在”功能越来越慢。我知道很明显，表越大，在其中搜索所需的时间就越长，但现在看到执行时间的增加似乎还为时过早。

如果我总结表现：

*   url_pool~100K ROWS -> 整个爬取过程（1页）0.8s。
*   url_pool~800K ROWS -> 1.1s
*   url_pool~1.8M ROWS -> 1.9s
*   url_pool~3.5M ROWS -> 3.2s
*   url_pool~5M ROWS -> 4.8s

另一个重要的事实是，在检查表中是否存在 url 时我没有使用文本搜索，我正在创建哈希，然后将其与表中的其他人匹配，我遵循了我在构建爬虫的早期阶段收到的建议，并发现它提高了性能。

现在，每页 1.9 秒是票价（考虑同时运行 4 个机器人），但 5 秒太慢了......

你能给我建议吗？

**编辑：**

更多信息：

我使用一个：

```
SELECT EXISTS(SELECT 1 FROM table1 WHERE ...) 
```

对于索引列上的搜索查询（在文档中建议获得更快的结果），表结构是一个非常简单的表

*   ID

*   链接（varchar 400）

*   link_simhash (varchar 32)

*   域（varchar 200）

*   标志 1（布尔）

*   标志 2（铃）

*   bot_visit (int)

*   date_found (日期)

*   date_crawled (日期)

正如我所说，where 指的是链接哈希。

有任何想法吗？？？没有人？？？我的问题有什么问题？？？

# java - Java 键绑定加键

> ID：15605109
> 
> 赞同：9
> 
> 时间：2013-03-24T22:55:59.267
> 
> 标签：java, swing, keyboard-shortcuts, key-bindings

我试图在我正在创建的图像编辑应用程序中创建用于放大和缩小的快捷方式，但我发现了一些奇怪的东西。要绑定`ctrl`+的组合`+`，我必须使用`=`键和控制和移位掩码：

```
getInputMap().put(KeyStroke.getKeyStroke(KeyEvent.VK_EQUALS, KeyEvent.CTRL_DOWN_MASK + KeyEvent.SHIFT_DOWN_MASK),"ZoomIn"); 
```

我尝试直接绑定的两种组合都`VK_PLUS`不起作用：

```
getInputMap().put(KeyStroke.getKeyStroke(KeyEvent.VK_PLUS, KeyEvent.CTRL_DOWN_MASK + KeyEvent.SHIFT_DOWN_MASK),"ZoomIn");

getInputMap().put(KeyStroke.getKeyStroke(KeyEvent.VK_PLUS, KeyEvent.CTRL_DOWN_MASK),"ZoomIn"); 
```

它现在可以使用第一行代码，但我想知道为什么底部的两个都不起作用，如果键盘没有`+`键作为移位`=`键，这是否（理论上​​）可能是一个问题。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-24T23:05:41.990

对于数字键盘加上尝试`KeyEvent.VK_ADD`：

```
getInputMap().put(KeyStroke.getKeyStroke(KeyEvent.VK_ADD,
                KeyEvent.CTRL_DOWN_MASK), "plus"); 
```

对于主键盘（美式键盘布局）的加号，请使用：

```
getInputMap().put(KeyStroke.getKeyStroke(KeyEvent.VK_EQUALS, KeyEvent.CTRL_DOWN_MASK | KeyEvent.SHIFT_DOWN_MASK),"plus"); 
```

对于非美式键盘使用`VK_PLUS`。有关一些说明，请参阅错误[4262044](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=4262044)和[6942481](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6942481)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-08-29T16:03:24.960

我今天遇到了同样的问题：我想捕捉`Ctrl`+ `=`，我们按下思考`Ctrl`+ `+`，并将其与放大动作相关联。我使用巴西 ABNT2 键盘。打字时，要获得加号，我需要使用组合`Shift`+ `=`，所以我不能直接抓住`Ctrl`+ `+`。我可以像@Aqua建议的那样做，即实际捕获`Ctrl`++ ，但对我来说似乎并不自然。我决定看看一些应用程序是如何解决这个问题的。`Shift``=`

[Notepad++](http://notepad-plus-plus.org/)将放大和缩小分别与小键盘的加号和减号相关联。这是解决问题的简单方法，但这也不是我想要的。[反过来， Mozilla Firefox](https://www.mozilla.org/firefox/)正是我想要的：它说`Ctrl`+`+`是放大的组合键，但它实际捕获的是`Ctrl`+ `=`。此外，它还可以理解我是否使用小键盘的加号来放大。

## 我是如何解决问题的

所以，这就是我决定解决问题的方法：在创建 时`Action`，我将组合键`Ctrl`+`+`与放大的动作相关联，实际上无法捕捉到：

```
Action zoomInAction = new AbstractAction() {
    @Override
    public void actionPerformed(ActionEvent event) {
        zoomIn();
    }
};

zoomInAction.putValue(AbstractAction.ACCELERATOR_KEY,
        KeyStroke.getKeyStroke(KeyEvent.VK_PLUS, KeyEvent.CTRL_DOWN_MASK));

JMenuItem zoomInMenuItem = new JMenuItem(zoomInAction);
viewMenu.add(zoomInMenuItem); 
```

洞中的王牌是将`Ctrl`+`=`组合分开并同样对待它：

```
frame.addKeyListener(new KeyListener() {
    @Override
    public void keyTyped(KeyEvent event) {
    }

    @Override
    public void keyReleased(KeyEvent event) {   
    }

    @Override
    public void keyPressed(KeyEvent event) {
        if (event.isControlDown() && (event.getKeyCode() == KeyEvent.VK_EQUALS)) {
            zoomIn();
        }
    }
}); 
```

这样，界面（即与`JMenuItem`对应的`Action`）告诉用户使用快捷键`Ctrl`+`+`来放大。然后用户按下`Ctrl`+ `=`，想到`Ctrl`+ `+`，但应用程序理解该组合并按照用户期望的那样操作这样做。

这是我的第一个 Stack Overflow 答案，对任何事情都感到抱歉:)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-24T23:14:25.703

据我了解，`VK_ADD`实际用于 numpad `+`。

为了使用`+`出现在键盘顶部（数字行旁边）的 ，您需要在物理上键入`shift`+`=`

在这种情况下，您需要使用`KeyEvent.VK_EQUALS`with`KeyEvent.SHIFT_DOWN_MASK`修饰符。

但是您也需要`KeyEvent.CTRL_DOWN_MASK`修饰符。

```
im.put(KeyStroke.getKeyStroke(KeyEvent.VK_EQUALS, KeyEvent.CTRL_DOWN_MASK | KeyEvent.SHIFT_DOWN_MASK), "Test1"); 
```

您遇到的问题是修饰符是`a bitwise-ored combination of any modifiers`

# jquery - JQuery自动完成未显示在页面上

> ID：15605110
> 
> 赞同：1
> 
> 时间：2013-03-24T22:56:00.210
> 
> 标签：jquery, autocomplete

我在让这个 JQuery AJAX 显示在网页上时遇到问题。

```
$(document).ready(function(e) {
    $(".autocomp").autocomplete(
         {
             source: function( request, response ) {
                         $.ajax({
                              url: "/apples",
                              dataType: "json",
                              data: {
                                 srch:request.term
                              },
                              success: function( data ) {
                                   response( $.map( data.result, function( item ) {
                                       return {
                                          label: item.name,    
                                          value: item.name,
                                          data: item
                                        };
                                    }));
                               }
                          });
                     },
                     minLength: 2,
                     select: function(event, ui){
                                  var parts = this.name.match(/(\D+)(\d+)$/);
                                  $("key_"+parts[2]).val(ui.item.data.key);
                               }
                    }); 
}); 
```

该函数调用一个返回信息的网站： `{result: [{name:macintosh,key:1},{name:golden,key:2},{name:fuji,key:3}]}`. 在数据字段中发回的对象是：

```
Object {result= [Object{name:macintosh,key:1},Object{name:golden,key:2},Object{name:fuji,key:3}]} 
```

的HTML：

```
<input type="text" name="name_1" id="name_1" class="autocomp"><input type="hidden" name="key_1" id="key_1"> 
```

任何人都知道为什么它不起作用？我正在进口

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.10.1/jquery-ui.min.js"></script> 
```

和样式表：

```
<link href="http://code.jquery.com/ui/1.10.0/themes/base/jquery-ui.css" rel="stylesheet" type="text/css" /> 
```

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T00:27:42.173

此解决方案来自 WebTuts 站点。它现在可以工作，但它不使用 AJAX 调用——我仍然很想知道该怎么做。它是一个解决方案，并获得了相同的结果，但没有明确回答如何使用 AJAX 的问题。用这个部分替换 $.ajax 部分。

```
$.getJSON("/apples?srch="+request.term,request,
                        function(data){
                            var names = [];
                            $.each(data.result, function(i, val){
                                names.push({
                                    label: val.name,
                                    value: val.name,
                                    data: val
                                });
                            });
                            response(names);
                        }); 
```

谢谢大家！乔恩

# javascript - toFixed onBlur 不想开火？

> ID：15605111
> 
> 赞同：0
> 
> 时间：2013-03-24T22:56:02.320
> 
> 标签：javascript, jquery

我正在尝试使输入的数字自动移动到小数点后 2 位 - 但经过几次尝试后我无法做到这一点 - 和想法？：

html

```
<tr>
    <td colspan="2" class="null"></td>
    <td class="label">Money Accounted For</td>
    <td class="field"><input type="text" name="moneyAccountedFor" id="moneyAccountedFor" tabindex="7" /></td>
</tr> 
```

jQuery

```
$("#moneyAccountedFor").blur(function() {
        $(this).val($(this).value.toFixed(2));
    }); 
```

**编辑：** 为了更仔细地查看我的问题 - 我创建了一个小提琴：http: [//jsfiddle.net/drewwyatt/AEWHs/](http://jsfiddle.net/drewwyatt/AEWHs/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T22:58:23.073

使用`**this**.value`代替`**$(this)**.value`：

```
$("#moneyAccountedFor").blur(function() {
    this.value = this.value.toFixed(2);
}); 
```

或者，如果您更喜欢 jQuery'ish。`$(this)**.val()**`

**更新**

另一个问题在于输入值类型。您需要通过将其值解析为**[整数](http://jsperf.com/performance-of-parseint/14)**`parseFloat`，`parseInt`否则...

```
$("#moneyAccountedFor").blur(function() {
    this.value = parseInt(this.value).toFixed(2);
}); 
```

[http://jsfiddle.net/AEWHs/2/](http://jsfiddle.net/AEWHs/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T23:47:16.523

我能够使用

```
<tr>
    <td colspan="2" class="null"></td>
    <td class="label">Money Accounted For</td>
    <td class="field"><input type="text" name="moneyAccountedFor" id="moneyAccountedFor" onblur ="this.value = Number(this.value).toFixed(2)"></td>
</tr> 
```

在这里提琴：

> [http://jsfiddle.net/drewwyatt/AEWHs/1/](http://jsfiddle.net/drewwyatt/AEWHs/1/)

# javascript - 在运行时获取数据，例如从文本框中

> ID：15605117
> 
> 赞同：3
> 
> 时间：2013-03-24T22:56:44.867
> 
> 标签：javascript, d3.js

我对 Javascript 还是很陌生，正在尝试做一些事情：

我确实有一个为我绘制**D3.js 图表**的代码，代码附在下面。

我需要的是能够出于某些演示目的对其进行更改，以便我可以在页面上输入一些值作为**数据集**，例如在文本框中？并点击一个按钮，然后根据这些值绘制图表。

目前这些值在代码中是这样硬编码的：

```
<script type="text/javascript">

    //Width and height
    var w = 500;
    var h = 100;
    var barPadding = 1;

    var dataset = [ 5, 10, 13, 19, 21, 11, 22, 18, 15, 13,
        11, 12, 15, 20, 18, 17, 16, 18, 23, 11 ];

    //Create SVG element
    var svg1 = d3.select("body")
            .append("svg")
            .attr("width", w)
            .attr("height", h)

    svg1.selectAll("rect")
            .data(dataset)
            .enter()
            .append("rect")
            .attr("x", function(d, i) {
                return i * (w / dataset.length);
            })
            .attr("y", function(d) {
                return h - (d * 4);
            })
            .attr("width", w / dataset.length - barPadding)
            .attr("height", function(d) {
                return d * 4;
            })
            .attr("fill", function(d) {
                return "rgb(0, 0, " + (d * 10) + ")";
            });

    svg1.selectAll("text")
            .data(dataset)
            .enter()
            .append("text")
            .text(function(d) {
                return d;
            })
            .attr("text-anchor", "middle")
            .attr("x", function(d, i) {
                return i * (w / dataset.length) + (w / dataset.length - barPadding) / 2;
            })
            .attr("y", function(d) {
                return h - (d * 4) + 14;
            })
            .attr("font-family", "sans-serif")
            .attr("font-size", "11px")
            .attr("fill", "white"); 
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T02:12:39.173

1.  添加一个 textarea 元素和一个元素以捕获单击以更新图表。此外，有一个单独的 div 来包含图表可以更容易地在每次更新时删除它：

    ```
    <div id="chart"></div>
    <textarea id="values" rows="5"></textarea>
    <a href="#" id="gen">
      Generate Chart    
    </a> 
    ```

2.  用点击事件包装前面的代码并防止默认事件：

    ```
    d3.select("#gen").on("click", function(){
     d3.event.preventDefault(); 
     ...
    }); 
    ```

3.  如果存在，则删除以前的图表：

    ```
    d3.select("#chart svg").remove() 
    ```

4.  使用 textarea 中的值更新数据：

    ```
    var dataset = document.getElementById("values")
                    .value
                    .split(",")
                    .map(function(d){return +d}); 
    ```

显然，这是非常脆弱的，只有真正适合演示。用户输入没有经过清理、验证等，但如果您只想测试几个不同数据集的表示，应该就足够了。

JS 小提琴：http: [//jsfiddle.net/qfS62/](http://jsfiddle.net/qfS62/)

# ios - 如何在自定义单元格中显示 UIImage

> ID：15605118
> 
> 赞同：0
> 
> 时间：2013-03-24T22:56:46.223
> 
> 标签：ios, uiimageview, uiimage, tablecell

我正在尝试在我的自定义单元格中显示徽标图像，来自亚马逊 Amazon S3 存储桶，虽然 StackMob 但它没有显示。如果我将直接 url 路径粘贴到它工作的图像中，我该如何解决这个问题。

```
NSManagedObject *object = [self.fetchedResultsController objectAtIndexPath:indexPath];

 CGRect imageFrame = CGRectMake(2, 2, 67, 67);

 self.customImage = [[UIImageView alloc] initWithFrame:imageFrame];

    NSURL* imageURL = [NSURL URLWithString:[object valueForKey:@"restoLogo"]];

    NSData *data = [[NSData alloc] initWithContentsOfURL:imageURL];

  UIImage *tmpImage = [[UIImage alloc] initWithData:data];

  self.customImage.image = tmpImage;
   [cell.contentView addSubview:self.customImage]; 
```

图像位于此路径 [object valueForKey:@"restoLogo"] 现在返回数据的 s3 url。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T21:30:17.957

如果你没有使用 NSString 的实例方法

`stringByAddingPercentEscapesUsingEncoding:`

这可能是问题所在。

例如

```
NSString *escapedString = [imgURLString stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]; 
```

然后把它变成一个 URL 并继续你的方式。

# matlab - 根据定义的序列拆分向量

> ID：15605124
> 
> 赞同：1
> 
> 时间：2013-03-24T22:57:08.553
> 
> 标签：matlab, vector, indexing, sequence

任何人都可以提出一种可以根据预定顺序对向量执行操作的方法 - 例如，我有一个不同值的向量 M，其大小为 <8760x1>。我有另一个带有数字序列 P 的向量（大小 <300x1>），这个序列的总和为 8760。我想使用这些 P 值来索引向量 M 并找到每个索引的乘积。

一个更清楚的例子：

M = [1,2,4,2,3,4,5,3,4,2];

P = [2,2,4,2]；

结果 = [3,6,15,6]

在这里的任何帮助将不胜感激。

彼得.S.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T00:41:16.180

这是一种基于[acummarray](http://www.mathworks.com/help/matlab/ref/accumarray.html)的方法，也是一种使用[cumsum](http://www.mathworks.com/help/matlab/ref/cumsum.html)创建索引向量的巧妙方法。给定两个向量：

```
M = [1,2,4,2,3,4,5,3,4,2];
P = [2,2,4,2]; 
```

`P`在（遵循此[SO](https://stackoverflow.com/questions/2382319/element-wise-array-replication-according-to-a-count)帖子）中创建每个频率值的唯一索引向量：

```
numM = sum(P);
index = zeros(numM, 1);
index(cumsum([1 P(1:end-1)])) = 1;
index = cumsum(index);

>> index'
ans =
     1     1     2     2     3     3     3     3     4     4 
```

使用`accumarray()`构造的索引向量和值向量应用：

```
result = accumarray(index, M);

>> result'
ans =
     3     6    15     6 
```

# jquery - Superfish 菜单与滑块重叠

> ID：15605128
> 
> 赞同：0
> 
> 时间：2013-03-24T22:57:22.977
> 
> 标签：jquery, jquery-ui-slider, superfish

我在这里使用 jquery 的 superfish 插件：[http ://www.oct-alliance.com/test/index.html](http://www.oct-alliance.com/test/index.html)

似乎 z-index 不起作用，因为任何下拉菜单都与下面的 silder 重叠

和

鼠标悬停下拉功能不再起作用。

您可以看到菜单正在出现，但被其下方的元素切断。

我试过在我能想到的任何地方添加一个 z-index，但似乎没有什么可以解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T07:25:58.380

请增加菜单 div 的 z-index 必须大于滑块 div 的 z-index。

# javascript - 从本地文件加载时未触发 Javascript 图像加载

> ID：15605135
> 
> 赞同：1
> 
> 时间：2013-03-24T22:57:59.923
> 
> 标签：javascript, image, filereader

我试图让用户在上传图像之前预览图像与另一张图像组合时的外观（想想枪射击子弹）。我可以让图像加载到图像元素中，但是 onload 事件不会触发（在 chrome 和 firefox 中测试）。我尝试使用 setTimeout 作为一个肮脏的黑客，但不幸的是 bullet.image.height 似乎没有在相对较短的时间内设置。

这是我正在尝试做的一个例子：

```
if (input.target.files && input.target.files[0]) {
    var file = new FileReader();

    file.onload = function (event) {
        // this part works fine
        var bullet = {};
        bullet.id = 0;
        bullet.image = new Image();
        bullet.image.onload = function () {
            // This never fires
            bullet.offset_y = bullet.image.height / 2;

            $('#modal-weapons-field-bullet').append('<option value="0">' + bullet.title + '</option>');
            $('#modal-weapons-field-bullet').val(0);
        };

        bullet.src = event.target.result;
        bullet.offset_x = 0;
        bullet.title = input.target.files[0].name;
    }

    file.readAsDataURL(input.target.files[0]);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T00:40:10.507

`bullet.src`应该`bullet.image.src`

# javascript - wrapAll() 仅适用于第一个元素？

> ID：15605141
> 
> 赞同：1
> 
> 时间：2013-03-24T22:59:01.560
> 
> 标签：javascript, jquery, html, jquery-selectors

我正在使用这个脚本来包装两个 div：

**jQuery：**

```
$("#wrapcb").click(function(){
  $('#cboxOverlay, #colorbox').wrapAll('<div class="wrapcolorbox">');
}); 
```

**HTML：**

```
<span><a id="wrapcb" href="http://www.example.com/one">First link</a></span>
<span><a id="wrapcb" href="http://www.example.com/two">Second link</a></span>
<span><a id="wrapcb" href="http://www.example.com/three">Third link</a></span> 
```

奇怪的是，这个脚本只适用于第一个链接，而所有其他链接都被忽略了。

任何想法我做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-24T23:00:01.187

那是因为你给了他们所有相同的 ID（**[永远不要](http://webdesign.about.com/od/css/f/blfaqmultiIDs.htm)**在一个页面上使用相同的 ID 两次）。将其更改为类或给每个链接一个唯一的 ID。

这是在链接上使用公共类的示例：

**jQuery：**

```
$(".wrapcb").click(function(){
  $('#cboxOverlay, #colorbox').wrapAll('<div class="wrapcolorbox">');
}); 
```

**HTML：**

```
<span><a class="wrapcb" href="http://www.example.com/one">First link</a></span>
<span><a class="wrapcb" href="http://www.example.com/two">Second link</a></span>
<span><a class="wrapcb" href="http://www.example.com/three">Third link</a></span> 
```

# c++ - 链接器错误未定义对 class::class 的引用（在我的情况下为 Person::Person）

> ID：15605147
> 
> 赞同：0
> 
> 时间：2013-03-24T22:59:25.337
> 
> 标签：c++, linker-errors

我在尝试实现我的程序时收到链接器错误未定义对 Person::Person 的引用。三部分如下。我已经努力修复它几个小时了。我知道这可能很简单，我只是没有看到。但是我在互联网上环顾四周，仍然没有找到我的答案。所以任何帮助将不胜感激。

```
#ifndef PERSON0_H_
#define PERSON0_H_

#include <string>

class Person // class declaration
{
private:
    static const int LIMIT = 25;
    std::string lname;
    char fname[LIMIT];
public:
   Person() {lname = ""; fname[0] = '\0';}
   Person(const std::string & ln, const char * fn = "Hay you");
   void Show() const;
   void FormalShow() const;
};

#endif

#include <iostream> 
#include <string>
#include "person0.h"

void Person::Show() const
{
 using namespace std;

      std::cout << fname << " " << lname << '\n';

}           

void Person::FormalShow() const
{
 using std::cout;

      std::cout << lname << ", " << fname << '\n';
}

#include <iostream>
#include <string>
#include "person0.h"

int main()
{
using namespace std;

Person one;
Person two("Smythecraft");
Person three("Dimwiddy", "Sam");
one.Show();
cout << endl;
one.FormalShow();
cout << endl;
two.Show();
cout << endl;
two.FormalShow();
cout << endl;
three.Show();
cout << endl;
three.FormalShow();        

cin.get();
cin.get();
return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-24T23:18:33.927

我不是一个真正的 C++ 人，所以术语可能是错误的，但我想说的是

```
Person::Person(const std::string & ln, const char * fn) 
```

构造函数丢失。

# ruby-on-rails - Rails 重复 sql 查询，即使包含

> ID：15605154
> 
> 赞同：4
> 
> 时间：2013-03-24T23:00:13.643
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord

我很难理解为什么在这种情况下会生成两个重复的 sql 查询：

我有一个帖子`has_many :comments`

```
post = Post.where(id: 4).includes(:comments).first 
```

生成这些 sql 语句：

```
SELECT "posts".* FROM "posts" WHERE "posts"."id" = 4 LIMIT 1
SELECT "comments".* FROM "comments" WHERE "comments"."post_id" IN (4) 
```

现在：

```
comment = post.comments.first 
```

（没有 sql - 好）
但是：

```
post = comment.post 
```

生成相同的sql：

```
SELECT "posts".* FROM "posts" WHERE "posts"."id" = 4 LIMIT 1 
```

似乎对象没有在内部绑定。有没有办法可以手动避免第二个 sql ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T04:56:03.860

用于`inverse_of`指定双向关系。从[文档](http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html#label-Bi-directional+associations)：

> 在关联上指定 :inverse_of 选项可以告诉 Active Record 反向关系，它会优化对象加载。

对于简单的情况，它可能看起来是多余的，但关联是单向定义。指定`inverse_of`让 Rails 知道这两种关系是彼此相反的，并且可以解决您遇到的问题。

```
# in post.rb
has_many :comments, :inverse_of => :post

# in comment.rb
belongs_to :post, :inverse_of => :comments 
```

# bash - 在 bash 脚本中插入变量作为命令参数

> ID：15605157
> 
> 赞同：0
> 
> 时间：2013-03-24T23:01:00.767
> 
> 标签：bash

我有一个用于在 linux 上进行截屏的文件，我想根据用户输入修改其中的部分内容。目前，我什至无法将参数粘贴到变量的命令中。

```
#!/bin/bash -x

fps="30"
capturesize="hd1080"
outputsize="720"

filter=-vf 'scale=${outputsize}'

avconv \
-f x11grab -r $fps -s $capturesize -i :0.0 \
-f alsa -ac 2 -i pulse \
-f alsa -ac 2 -i pulse \
-f alsa -ac 1 -i pulse \
-map 0:0 -map 1:0 -map 2:0 -map 3:0 \
-vcodec libx264 \
$filter \
-pre:v lossless_ultrafast \
-acodec libmp3lame \
-threads 4 \
-y $@ 
```

`$fps`并被`$capturesize`正确评估，但`$filter`分配给出了一个很好的：

```
+ filter=-vf
+ 'scale=${outputsize}'
~/bin/screencap: line 9: scale=${outputsize}: command not found 
```

将行更改为：

```
filter="-vf 'scale=$outputsize'" 
```

给人一种更不愉快的感觉：

```
+ filter='-vf '\''scale=720'\'''
+ avconv -f x11grab [...] -vf ''\''scale=720'\''' [...]
[...]
No such filter: 'scale=720'
Error opening filters! 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T23:19:25.040

使用数组。它具有保护包含空格的项目的额外好处，如果您尝试将其存储在以空格分隔的列表中，则无法做到这一点。

```
#!/bin/bash -x

fps="30"
capturesize="hd1080"
outputsize="720"

filter=( -vf "scale=${outputsize}" )

avconv \
-f x11grab -r "$fps" -s "$capturesize" -i :0.0 \
-f alsa -ac 2 -i pulse \
-f alsa -ac 2 -i pulse \
-f alsa -ac 1 -i pulse \
-map 0:0 -map 1:0 -map 2:0 -map 3:0 \
-vcodec libx264 \
"${filter[@]}" \
-pre:v lossless_ultrafast \
-acodec libmp3lame \
-threads 4 \
-y "$@" 
```

您可以将所有选项放在一个数组中；一个小例子：

```
options=( -f x11grab -r "$fps" -s "$capturesize" )
options+=( -i :0.o )
# etc
avconv "${options[@]}" -y "$@" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T23:08:25.147

```
filter="-vf scale=${outputsize}" 
```

# c# - 选中 form2 上的复选框时如何使 Form1 label.text 更改？

> ID：15605161
> 
> 赞同：4
> 
> 时间：2013-03-24T23:01:36.073
> 
> 标签：c#, winforms, events

我对 c# 很陌生，我正在尝试用 2 种不同的形式进行第一次实验。

我想让它在 Form1 上有一个 label1 和一个 button1，在 Form2 上有一个 checkbox1。

Form1 上的 button1 打开 Form2，一旦您选中 Form2 上的 checkbox1，label1 中的文本就会更改。

我认为这必须使用事件来完成，但事件是迄今为止唯一真正让我感到困惑的事情，所以我想本质上这个问题更多的是关于事件的使用。如果我在 MSDN 和其他网站上查找它，我也会感到非常困惑。

非常感谢您的帮助，这让我感到非常愚蠢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T23:06:38.137

在这种情况下，您可以使用该`CheckedChanged`事件：

```
public void checkbox2_CheckedChanged(object sender, EventArgs e) {
    if (checkbox2.Checked) 
    {
        Form1.Label1.Text = "Checkbox 2 has been checked";
    } else 
     { 
        Form1.Label1.Text = "";
     }
} 
```

[http://www.c-sharpcorner.com/uploadfile/mahesh/checkbox-in-C-Sharp3/](http://www.c-sharpcorner.com/uploadfile/mahesh/checkbox-in-C-Sharp3/)

请注意，您必须更改访问修饰符`Form1`并`Label1`公开，以便`Form2`更改`Text`属性。

为此，请 goto `Form1`、选择`Label1`goto `Properties`、选择`Modifiers`并从`Private`to更改`Public`。然后 Form2 将有权访问`Label`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-24T23:33:12.853

**使用控制器和事件来解耦表单**

做这种事情的正确方法是通过引入一个`Controller`类来将两种形式相互解耦，并使用`events`来表示状态变化。

这是一个例子。

首先，创建一个新的默认 Windows 窗体应用程序`WindowsFormsApplication1`，并添加两个窗体`form1`和`form2`.

然后添加`form1`一个名为“button1”的按钮和一个名为“label1”的标签。

然后添加到`form2`一个名为“checkbox1”的复选框。

在`form1`设计器中，双击按钮为其添加点击处理程序。

在`form2`设计器中，双击复选框为其添加更改处理程序。

现在添加一个名为“Controller”的新类，并向其中添加以下代码：

```
using System;
using System.Windows.Forms;

namespace WindowsFormsApplication1
{
    internal sealed class Controller
    {
        public void RunForm1()
        {
            _form1 = new Form1();
            // The next line defines our response to the button being pressed in Form1
            _form1.ButtonClicked += (sender, args) => showForm2();
            Application.Run(_form1);
        }

        private void showForm2()
        {
            var form2 = new Form2();
            // The next line defines our response to the checkbox changing in Form2.
            form2.CheckBoxChanged += 
                (sender, args) => 
                _form1.SetLabel("Checkbox = " + ((CheckBox)sender).Checked);

            form2.ShowDialog(_form1);
        }

        private Form1 _form1 ;
    }
} 
```

现在改成`Form1.cs`这样：

```
using System;
using System.Windows.Forms;

namespace WindowsFormsApplication1
{
    public partial class Form1: Form
    {
        // Here's where we announce our event handler to the world:
        public event EventHandler ButtonClicked;

        public Form1()
        {
            InitializeComponent();
        }

        public void SetLabel(string text)
        {
            label1.Text = text;
        }

        private void button1_Click(object sender, EventArgs e)
        {
            // We make a copy of ButtonClicked before checking it for null because
            // in a multithreaded environment some other thread could change it to null
            // just after we checked it for nullness but before we call it, which would
            // cause a null reference exception.
            // A copy cannot be changed by another thread, so that's safe to use:

            var handler = ButtonClicked;

            if (handler != null)
                handler(sender, e);
        }
    }
} 
```

并更改`Form2.cs`为：

```
using System;
using System.Windows.Forms;

namespace WindowsFormsApplication1
{
    public partial class Form2: Form
    {
        // Here's the event handler for the check box:
        public event EventHandler CheckBoxChanged;

        public Form2()
        {
            InitializeComponent();
        }

        private void checkBox1_CheckedChanged(object sender, EventArgs e)
        {
            var handler = CheckBoxChanged;

            if (handler != null)
                handler(sender, e);
        }
    }
} 
```

最后，改成`Program.cs`这样：

```
using System;
using System.Windows.Forms;

namespace WindowsFormsApplication1
{
    static class Program
    {
        [STAThread]
        static void Main()
        {
            Application.EnableVisualStyles();
            Application.SetCompatibleTextRenderingDefault(false);

            Controller controller = new Controller();
            controller.RunForm1();
        }
    }
} 
```

现在运行程序并单击按钮，然后单击复选框几次。您将看到 Form1 中的标签发生变化。

通过这种方式，您已经将控制逻辑完全解耦`Form1`并`Form2`放入单独的 Controller 类中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T23:20:56.080

您可以直接从 Form1 实例订阅 Form2 实例中的复选框的 CheckedChanged 事件。在 Form1 中，就在显示 Form2 之前订阅复选框的 CheckedChanged 事件

```
Form2 frm = new Form2();
frm.chkBox1.CheckedChanged += new EventHandler(this.ReceiveCheckedChanged);
frm2.ShowDialog(); 
```

然后在 Form1 (this) 中定义 Form2 中引发的 checkedChanged 事件的处理程序

```
private void ReceiveCheckedChanged(object sender, EventArgs e)
{
   CheckBox chk = sender as CheckBox;
   if(chk.Checked)
       this.label1.Text = "Checked";
   else
       this.label1.Text = "UnChecked";
} 
```

为此，您需要将`Modifiers`复选框上的属性从更改`Private`为`Public`

通过这种方式，您的 Form2 不需要知道有一个 Form1 并且每次有人单击复选框时，您都需要更改另一个表单中的标签。更改其内部状态（标签上的文本）的责任在于 Form1，它已将其要求通知系统。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-24T23:08:13.077

表格1：

```
public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();
    }

    private void button1_Click(object sender, EventArgs e)
    {
        var form = new Form2();
        form.Changed += (o, args) => label1.Text = "some";

        form.ShowDialog();
    }
} 
```

表格2：

```
public partial class Form2 : Form
{
    public delegate void ChangedEventHandler(object sender, EventArgs e);

    public event ChangedEventHandler Changed;

    public Form2()
    {
        InitializeComponent();
    }

    private void checkBox1_CheckedChanged(object sender, EventArgs e)
    {
        if (Changed != null)
        {
            Changed(this, e);
        }
    }
} 
```

使用`CheckedChanged`CheckBox 的事件。

此外，您可以查看如何在 C# 中使用事件的优秀[教程。](http://msdn.microsoft.com/en-us/library/aa645739%28v=vs.71%29.aspx)

# javascript - 使用 Raphael.js 单击并拖动路径时克隆路径

> ID：15605163
> 
> 赞同：0
> 
> 时间：2013-03-24T23:01:39.790
> 
> 标签：javascript, jquery, raphael

我有一个隐藏的路径。当我单击 div 中的某个位置时，我想克隆它，并且当我单击并按住它时能够拖动它。

问题是，一旦我完成了在路径周围的拖动，**释放鼠标按钮会导致创建另一个路径**。

我同时使用 Raphael.js 和 JQuery，这是我使用的代码：

```
var c = Raphael("holder", 640, 480);
var p = c.path("M150 0 L75 200 L225 200 Z").hide().attr("fill", "#c0c0c0");
function getCenter (bbox) {
    return [Math.floor(bbox.x + bbox.width/2.0), Math.floor(bbox.y + bbox.height/2.0)];
};

$(document).ready(function (e) {
    $('#holder').click(function (e) {
        var posX = $(this).position().left, posY = $(this).position().top;
        var [x,y] = getCenter(p.getBBox());
        p.clone()
            .transform("T"+[(e.pageX-posX-x),(e.pageY-posY-y)])
            .drag(
        function (dx, dy) {     
            this.transform("t"+(e.pageX-posX-x+dx)+","+(e.pageY-posY-y+dy));
        },
        function () {},
        function () {});
    });
}); 
```

这是一个显示奇怪行为的 JSfiddle。 [http://jsfiddle.net/2gggp/3/](http://jsfiddle.net/2gggp/3/)

任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T12:28:14.590

```
$('#holder').click(function (e) {
   if ($(e.target).is("path")) 
     return false;
   ...
   ...
}); 
```

# php - 在 Silverstripe 框架中生成并返回图像

> ID：15605173
> 
> 赞同：0
> 
> 时间：2013-03-24T23:02:45.680
> 
> 标签：php, image, httprequest, httpresponse, silverstripe

我正在尝试使用 Silverstripe 3.0 框架生成图像并将其返回到模板，但遇到了一些问题。

我在一个变量中将它返回给浏览器，如下所示：

```
public function make_image(){

    $string = 'string';
    $im     = imagecreate(300,300);
    $orange = imagecolorallocate($im, 220, 210, 60);
    $px     = (imagesx($im) - 7.5 * strlen($string)) / 2;
    imagestring($im, 3, $px, 9, $string, $orange);
    imagepng($im);
    imagedestroy($im);

} 
```

浏览器将其呈现为： `�PNG IHDR,,C�6PLTE��<��*�"IDATh���1 �Om ?�x-��{�IEND�B`�`

返回的标头是 text/html ，只有一个请求让我觉得那里发生了一些奇怪的事情。谁能帮我解决这个问题。

Silverstripe 使用 Image() 类可能实现这一点的另一种方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T23:33:24.620

我不太确定你为什么需要使用你的 http 标头。我了解您正在通过中间步骤生成图像，因此您需要看到它正在生成，但如果您的初始目标是生成图像以将其包含在模板中，这可能会有所帮助：

```
public function StringImage($string) {
    $filePath = ASSETS_PATH.'/'.$string.'.png';
    if (!file_exists(ASSETS_PATH.'/'.$string.'.png')){
        $stringFontSize = 11;
        $dimensions = imagettfbbox($stringFontSize, 90, 'Arial', $string);
        $gd = new GD();
        $width = $dimensions[2] - $dimensions[4];
        $height = $dimensions[7] - $dimensions[5];
        $image = imagecreatetruecolor($width, $height);
        imagefilledrectangle($image, 0, 0, $width, $height, 0xFFFFFF);
        imagettftext($image, $stringFontSize, 90, $width, $height, 0x000000, 'Arial', $string);
        $gd->setGD($image);
        $gd->writeTo($filePath);
    }
    return '<img src="'.ASSETS_DIR.'/'.$string.'.png'.'" alt="string"/>';
} 
```

# gtk - 具有纵横比的自定义小部件 (GTK2+)

> ID：15605175
> 
> 赞同：1
> 
> 时间：2013-03-24T23:02:53.823
> 
> 标签：gtk

我目前正在编写自己的从 GtkWidget 派生的 GTK2-Widget，我希望它保持一定的纵横比，就像 GtkAspectFrame 一样，但我不知道该怎么做。例如，如果 GTK+ 为我的小部件提供 400 像素的宽度，我希望它具有 400 像素、200 像素等的高度（取决于比率）。设置一个简单的大小请求不是解决方案，因为我的小部件的大小取决于其他小部件的大小。

# kendo-ui - 粘贴到 KendoUI 编辑器时，如何从文本中删除所有 html 格式？

> ID：15605177
> 
> 赞同：7
> 
> 时间：2013-03-24T23:03:08.607
> 
> 标签：kendo-ui, kendo-asp.net-mvc

我想使用 KendoUI 编辑器基本上只允许用户将文本格式化为段落。可能允许粗体和下划线。

我正在努力解决两件事：

1.  我想在粘贴时从文本中删除所有 html 格式
2.  我想禁用粗体、下划线等的键盘快捷键——即使工具栏元素不存在，它们似乎也能工作。

谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-24T23:37:56.443

为了粘贴唯一的文本，您可以定义一个粘贴处理程序来删除除文本之外的所有内容。这很简单：

```
$("#editor").kendoEditor({
    paste: function (ev) {
        ev.html = $(ev.html).text();
    }
}); 
```

`paste`处理程序接收作为参数的事件，该事件包含在正在`html`解析的文本中。我们可以使用 jQuery 来获取仅使用的文本`$(ev.html).text()`

对于删除快捷方式，据我所知，如果您只定义了您想要的工具，那么只有那些快捷方式是活动的。所以如果你说这样的话：

```
$("#editor").kendoEditor({
    tools: [
        "italic"
    ],
    paste: function (ev) {
        ev.html = $(ev.html).text();
    }
}); 
```

只有`italic`快捷方式`<ctrl>+i`可用。如果您将`tools`数组留空，则您没有任何数组。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-09-08T13:54:50.870

现在可以通过`pasteCleanup`选项轻松实现这一点。

见这里：[http ://docs.telerik.com/kendo-ui/controls/editors/editor/pasting](http://docs.telerik.com/kendo-ui/controls/editors/editor/pasting)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-06-20T02:47:08.907

对我来说，这是完整的解决方案

```
 pasteCleanup: {
                custom: function (html)
                {
                    html = html.replace(/<\s*br\/*>/gi, '');
                    html = html.replace(/<\s*a.*href="(.*?)".*>(.*?)<\/a>/gi, " $2 (Link - $1) ");
                    html = html.replace(/<\s*\/*.+?>/ig, '');
                    html = html.replace(/ {2,}/gi, '');
                    html = html.replace(/\n+\s*/gi, '');
                    html = html.replace("&nbsp;", '');
                    html = html.replace(/&lt;.*?&gt;/g, '');
                    return html;
                }
            } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-09-30T13:50:37.727

Kendo MVC 也为此目的进行了扩展。使用示例：

```
.PasteCleanup(x => x.KeepNewLines(false)) 
```

`false`在这种情况下意味着您要清除除新行之外的所有内容。

# bash - bash算术表达式：检查零值变量

> ID：15605180
> 
> 赞同：1
> 
> 时间：2013-03-24T23:03:41.217
> 
> 标签：bash

我发现这种行为违反直觉：

```
v=0; ((v)) && echo K; v=1; ((v)) && echo J 
```

回声：

```
J 
```

但通常`0`是*成功*的：

```
f() { return 0; }; if f; then echo W; fi 
```

* * *

### 解释原因？

* * *

`man`页面`(( ))`说：

*如果表达式的值为非零，则返回状态为0；否则返回状态为 1。*

* * *

如何最好地使用算术评估检查变量是否为零？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-24T23:11:47.870

测试 0 的规范方法是`[ $something -eq 0 ]`，通常写为`[ x$something = x0 ]`. （Using`=`是一个字符串比较，但当变量未设置或为空白时，它仍然是有效的语法。）参见`man expr`.

所以，

```
q=0
if [ $q -eq 0 ]; then # or [ x$q = x0 ]
  echo yes, zero
fi 
```

`((expr))`语法是命令的快捷方式，该`let`命令被简单地定义为`true`在表达式为非零时返回状态，否则返回 false。

Posix 命令也不`((...))`是`let ...`，所以有一些*WTF？！*可以预期。这只是 bash 的作者想出的东西，或者是从一些现在不为人知的早期 shell 中提取出来的东西。（它似乎在 zsh 中。）它不在[ash(1) 中，](http://netbsd.gw.com/cgi-bin/man-cgi?sh%20%20NetBSD-current)即[dash(1) 中，](http://linux.die.net/man/1/dash)它是一种参考纯 Posix shell。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-24T23:16:28.403

“翻转”任何不成功的值的含义的一个很好的理由**是**`0`，您可能想要指示不同的错误条件。 **`0`**

 **将`0`其用作失败根本不可能，因为任何值 !=`0`都会被浪费以表示成功。

给定一个数字变量，检查该值是否`0`完全正确的最佳方法是：

```
((v==0)) 
```**

# django - Django 1.5 url deprecation 警告在 Webfaction Apache wsgi 中导致 500 错误

> ID：15605185
> 
> 赞同：1
> 
> 时间：2013-03-24T23:04:22.907
> 
> 标签：django, mod-wsgi, django-1.5

我已将此特定应用程序从 Django 1.4 更新到 Django 1.5，并且在本地一切正常 - 我必须修复一些`url`调用，但这很好。现在在部署到 Webfaction 并通过 Apache + mod_wsgi 运行站点时，我收到错误 500s在我尝试加载的每一页上。

所有配置文件都保持不变，只有 Django 库发生了变化。我已经 pip 安装了所有要求并且它们加载正常。

如果我在本地设置中将站点调低到调试模式`DEBUG = True`，那么一切正常。在调试模式下的错误日志中，我得到以下信息：

```
[Sun Mar 24 22:47:17 2013] [error] /home/user/webapps/app/htdocs/env/lib/python2.7/site-packages/django/conf/urls/defaults.py:3: DeprecationWarning: django.conf.urls.defaults is deprecated; use django.conf.urls instead
[Sun Mar 24 22:47:17 2013] [error]   DeprecationWarning) 
```

我的问题是 - 为什么这被作为一个错误提出？`[error]`? 不应该是`[info]`水平吗？当我将应用程序退出调试模式时，这可能是导致 500 错误的原因吗？

使用 Django 1.5 我可以做些什么来让网站再次活跃起来？有没有办法关闭这些警告？

我确实在 Django 源[https://github.com/django/django/commit/0d49fdb573d44794cc78c6af4761cc79c5330315](https://github.com/django/django/commit/0d49fdb573d44794cc78c6af4761cc79c5330315)中查看了这个提交，看看我是否可以关闭我的应用程序的 local_settings 文件中的日志记录，但没有运气。

这是我的`httpd.conf`文件：

```
ServerRoot "/home/user/webapps/app/apache2"

LoadModule dir_module        modules/mod_dir.so
LoadModule env_module        modules/mod_env.so
LoadModule log_config_module modules/mod_log_config.so
LoadModule mime_module       modules/mod_mime.so
LoadModule rewrite_module    modules/mod_rewrite.so
LoadModule setenvif_module   modules/mod_setenvif.so
LoadModule wsgi_module       modules/mod_wsgi.so

LogFormat "%{X-Forwarded-For}i %l %u %t \"%r\" %>s %b \"%{Referer}i\" \"%{User-Agent}i\"" combined
CustomLog /home/user/logs/user/access_app.log combined
ErrorLog /home/user/logs/user/error_app.log
LogLevel info
KeepAlive Off
Listen 27114
MaxSpareThreads 3
MinSpareThreads 1
ServerLimit 1
SetEnvIf X-Forwarded-SSL on HTTPS=1
ThreadsPerChild 5
WSGIDaemonProcess app processes=2 threads=12 python-path=/home/user/lib/python2.7:/home/user/webapps/app/htdocs:/home/user/webapps/app/htdocs/env/lib/python2.7/site-packages
WSGIProcessGroup app
WSGIRestrictEmbedded On
WSGILazyInitialization On
WSGIScriptAlias / /home/user/webapps/app/htdocs/ag/wsgi.py 
```

这是我的`wsgi.py`

```
import os
os.environ.setdefault("DJANGO_SETTINGS_MODULE", "ag.settings")
from django.core.wsgi import get_wsgi_application
application = get_wsgi_application() 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T22:46:03.747

我找到了解决方案——这些`[error]`消息是一条红鲱鱼。

在 Django 1.5 中，在设置中时，设置文件中**需要**`DEBUG = False`then 。[https://docs.djangoproject.com/en/1.5/releases/1.5/#allowed-hosts-required-in-production](https://docs.djangoproject.com/en/1.5/releases/1.5/#allowed-hosts-required-in-production)`ALLOWED_HOSTS`

 **否则，该站点将引发 500 个错误——这就是我得到的。

添加`ALLOWED_HOSTS`，一切又恢复正常。RTFM 的简单案例。**

# php - JavaScript 中的 MySQL 查询

> ID：15605189
> 
> 赞同：3
> 
> 时间：2013-03-24T23:04:40.103
> 
> 标签：php, javascript, mysql, forms, invoice

我正在研究一种使用 JavaScript 添加另一个行项目的表单。目的是将行项目添加到发票中。在我的表单中使用文本框时，我已经成功地让它工作正常，但我一直坚持如何让它与一个调用 mysql 以获取下拉框数据的下拉框一起工作。

这就是我所拥有的。

```
 <?php
     include $_SERVER['DOCUMENT_ROOT']."/connect.php";
     include $_SERVER['DOCUMENT_ROOT']."/includes/header.php";
 ?>

 <script type="text/javascript">
     var counter = 1;
     function addInput(divName){
          var newdiv = document.createElement('div');
          newdiv.innerHTML = "Entry " + (counter + 1) + " <br><select name='myInputs[]'><?php $result = mysql_query("SELECT * FROM salesitem"); while($row = mysql_fetch_array($result)) { echo "<option value=\"".$row['name']."\">".$row['name']."</option>";} ?></select>";
          document.getElementById(divName).appendChild(newdiv);
     }
 </script>

 <form method="POST">
     <div id="dynamicInput">
          Entry 1<br><select name="myInputs[]"><?php $result = mysql_query("SELECT * FROM salesitem"); while($row = mysql_fetch_array($result)) { echo "<option value=\"".$row['name']."\">".$row['name']."</option>";} ?></select>
     </div>
     <input type="button" value="Add another text input" onClick="addInput('dynamicInput');">
 </form> 
```

所以这里有一些关于正在发生的事情的信息。现在，上面的 JavaScript 代码显示了其中的 MySQL 查询。这会终止添加订单项功能。如果我只是删除查询但保留其他 php，则添加行项目再次开始工作，但下拉列表中当然没有数据。

在表单本身中，它在不使用 javascript 的情况下从数据库中获取第一个行项目，这可以正常工作。

我觉得我越来越近了，但不知道从这里去哪里。

提前致谢。

编辑：感谢尼克，我得到了这个工作。这是代码。

```
 <?php
 include $_SERVER['DOCUMENT_ROOT']."/connect.php";
 include $_SERVER['DOCUMENT_ROOT']."/includes/header.php";
 ?>

 <script type="text/javascript">
 var counter = 1;
 function addInput(div){
    xmlhttp=new XMLHttpRequest();
    xmlhttp.onreadystatechange = function() {
     if (xmlhttp.readyState == 4 && xmlhttp.status == 200){
      var newdiv = document.createElement('div');
      newdiv.innerHTML = "Entry " + (++counter) + " <br><select name='myInputs[]'>" + xmlhttp.responseText + "</select>";
     }
      document.getElementById(div).appendChild(newdiv);
   }

 xmlhttp.open("GET", "update_text.php", false);
 xmlhttp.send();
 }
 </script>

 <form method="POST">
 <div id="dynamicInput">
      Entry 1<br><select name="myInputs[]"><?php $result = mysql_query("SELECT * FROM salesitem"); while($row = mysql_fetch_array($result)) { echo "<option value=\"".$row['name']."\">".$row['name']."</option>";} ?></select>
 </div>
 <input type="button" value="Add" onClick="addInput('dynamicInput');">
 </form> 
```

然后update_text.php

```
 <?php
 include $_SERVER['DOCUMENT_ROOT']."/connect.php";
 $result = mysql_query("SELECT * FROM salesitem");
 while($row = mysql_fetch_array($result)) {
 echo "<option value=\"".$row['name']."\">".$row['name']."</option>";
 }
 ?> 
```

这是我在数据库中的 php 帖子，它不适用于 javascript 添加行项目，仅适用于从表单创建的原始条目。（除了下拉菜单，我还有其他字段）。

```
 <?php

 include $_SERVER['DOCUMENT_ROOT']."/connect.php";

 $company = mysql_real_escape_string($_POST['company']);

 foreach($_POST['item'] as $i => $item)
 {
   $item = mysql_real_escape_string($item);
 $quantity = mysql_real_escape_string($_POST['quantity'][$i]);

 mysql_query("INSERT INTO invoice (company, item, quantity) VALUES ('$company', '".$item."', '".$quantity."') ") or die(mysql_error());
 }
 echo "<br><font color=\"green\"><b>Invoice added</b></font>";

 ?> 
```

谢谢，如果我能更好地清理这个，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T23:32:03.247

遗憾的是，由于 PHP 的性质，您尝试执行此操作的方式不起作用。

当客户端从服务器请求您的页面时，所有的 php 都会被执行。

因此，您的 javascript 函数中的 php 块实际上只是您的 php.ini 的静态结果。

您需要使用 XMLHttpRequests/Ajax 从服务器请求新数据。

这是一个快速（可能相当糟糕）的例子！

修改您的 javascript 函数：

```
var counter = 1;
function addInput(div) {
    xmlhttp=new XMLHttpRequest();
    xmlhttp.onreadystatechange = function() {
        if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
                    var d = document.getElementById(div);
                    d.innerHTML=d.innerHTML  +"<div>Entry " + (++counter) + " <br><select name='myInputs[]'>" + xmlhttp.responseText + "</select></div>";
        }
    }
    xmlhttp.open("GET", "updated_list.php", false);
    xmlhttp.send();
} 
```

您服务器上的新 php 文件：(updated_list.php)

```
<?php 
// you'll need to include stuff to connect to your database here
$result = mysql_query("SELECT * FROM salesitem"); 
while($row = mysql_fetch_array($result)) { 
    echo "<option value=\"".$row['name']."\">".$row['name']."</option>";
} 
?> 
```

**更新**

我确实说过这是一个不好的例子 :) 我的原始代码覆盖了你的 div 的内容，而不是添加到它，我更新了它。这只是一个示例，您应该阅读 AJAX 以及如何从服务器请求数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T23:20:19.310

页面加载后，您不能在 javascript 函数中使用服务器代码。服务器端代码就像它的名字一样——在服务器上运行的代码。因此，在页面完成加载后，它“返回”到客户端，现在只有客户端代码（javascript）可以运行。所以你的线

```
newdiv.innerHTML = "Entry " + (counter + 1) + " <br><select name='myInputs[]'><?php $result = mysql_query("SELECT * FROM salesitem"); while($row = mysql_fetch_array($result)) { echo "<option value=\"".$row['name']."\">".$row['name']."</option>";} ?></select>"; 
```

有点错误。

您可以做的是将数据库中的数据返回到 javascript（使用 json 将是最佳选择），然后使用来自服务器的原始数据（现在是 javascript 数据）动态构建选择框。

所以假设你的数据是

```
var data = [{name:'n1'},{name:'n2'},{name:'n3'}]; 
```

您可以使用 javascript 运行此数据并构建您的组合：

```
var newSelect = document.createElement('select');
for(var i=0;i<data.length;i++){
  var name = data[i].name;
  newSelect.options[newSelect.options.length] = new Option(name,name);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T23:32:33.473

这是*AJAX*（异步 Javascript 和 XML）的一个经典例子——基本概念是当一个动作被执行时（例如一个按钮点击显示内容），一些 JavaScript 调用一个 PHP（*异步*），PHP 运行，返回一个XML 文件（虽然这实际上可以是您想要的任何文件格式，但现在有些人更喜欢使用 JSON，因为它更容易解析），并且显示此 XML/JSON 的内容，也使用 JavaScript。

尽管上面的示例是显示内容，但没有理由不能异步执行您需要在服务器上运行的任何操作（例如，将数据插入数据库）。

SO 不是为人们编写代码的地方 - 所以现在我已经给你一个关于从哪里开始的提示，作为读者的练习（/问题提问者！），看看一些 AJAX 教程，确保你理解了这个概念，写了一些代码，如果仍然不能让它工作，请回来！

祝你好运 ：）

# java - 关于 JTextFields 和打字

> ID：15605191
> 
> 赞同：0
> 
> 时间：2013-03-24T23:05:12.257
> 
> 标签：java, swing, key, keypress, jtextfield

我正在研究一个 JTexfield，它将自己的文本设置为当焦点放在窗口上时按下的键的名称。我设法让它与代码只有一句话：

```
@Override
public void keyReleased(KeyEvent ev) {
    if (ev.getKeyCode() != 0) {
    keyTrigger = ev.getKeyCode();
    txtTrigger.setText(ev.getKeyText(keyTrigger));
}
}

@Override
public void keyTyped(KeyEvent ev) {
    txtTrigger.setText("");
} 
```

但是，当您按 F1--12 或 Ctrl 之类的特殊键时，它看起来很糟糕，因为它保留了最后键入的非特殊键（例如，如果您按“T”然后按“Ctrl”，则该字段中的文本一直是“ t' 直到您释放 'Ctrl' 键）。

这是迄今为止 JTextField 的代码：

```
txtTrigger = new JTextField();
txtTrigger.setColumns(10);
txtTrigger.addKeyListener(this);
txtTrigger.setBounds(80, 5, 64, 20);
contentPane.add(txtTrigger); 
```

我想要的是在您释放密钥之前该字段为空。我怎样才能让应用程序以这种方式工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T23:53:44.273

我不认为可编辑的文本字段是您的最佳选择。我过去所做的基本上是伪造的。

我已经生成了一个“看起来”像 a 的自定义组件，`JTextField`并且使用我自己的`KeyListener`向视图添加了元素（我做了我自己的“关键”渲染器，但您可以简单地拥有一个`String`可以渲染的元素列表）。

基本上，当`keyPressed`被触发时，我会将键代码添加到列表中（考虑到其修饰符状态等因素）。如果使用相同的键码触发了另一个键事件，则可以忽略它。

触发时`keyReleased`，您可以从活动列表中删除该键码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T00:04:33.380

您可以将 keylistener 添加到 jframe 或许多组件......只需确保该组件具有焦点。

# facebook - 使用 Facebook Graph API 将用户添加/邀请到 Facebook 群组

> ID：15605192
> 
> 赞同：5
> 
> 时间：2013-03-24T23:05:16.397
> 
> 标签：facebook, facebook-graph-api, facebook-group

我有一个使用 Corona 的 iOS 应用程序（即在 LUA 中；不是 ObjectiveC；虽然我没有请求特定的 Corona 帮助，只是一般如何执行此操作）我想添加或邀请该应用程序的用户到 Facebook团体。我已经成功地将群组成员从我的应用程序发布到群组的墙上，但我一生都无法获得“邀请用户”代码来为还不是 FB 成员的人工作团体。

该网站上的所有帖子都说它要么无法完成（可能是因为它们来自 Groups API 可用之前），要么只是重复 Facebook 文档所说的内容（我已经阅读了一百万次，但也许不要'不完全理解）。

来自 Facebook 的群组文档（[https://developers.facebook.com/docs/reference/api/group/](https://developers.facebook.com/docs/reference/api/group/)）...
“应用程序可以通过使用应用程序向 /GROUP_ID/members/USER_ID 发出 POST 请求来邀请用户加入群组访问令牌。”

在弄清楚如何获取*应用程序*access_token（而不是*用户*access_token）之后，我尝试使用 3 种不同的方法来测试它；Corona 的 facebook API request() 命令，用该命令制作了一个 PHP 页面，甚至尝试了 Facebook Graph Explorer 来尝试这段代码，但没有任何效果。

所有这些都是...... [https://graph.facebook.com/myGroupID/members/nonMemberFBUserID?access_token=myAppsAppToken](https://graph.facebook.com/myGroupID/members/nonMemberFBUserID?access_token=myAppsAppToken)

Corona 给了我一个 HTTP 200（这应该意味着 OK），但 facebook 请求返回一个错误（我在他们的论坛中有一个问题，但我通常不会从他们那里得到太多帮助）。我的网站 PHP 页面返回一个空数据对象`ala: "{\"data\":[]}"`。Facebook Graph Explorer 只列出了所有现有成员以及一些神秘的“分页”对象，其中包含“下一个”网址。如果我直接去这个地址，它会说：

```
{
   "error": {
      "message": "An access token is required to request this resource.",
      "type": "OAuthException",
      "code": 104
   }
} 
```

但是我传递了一个 access_token 作为参数！这是否意味着我还需要传递*用户*access_token？*如果是这样，如果 access_token 变量已用于应用程序的*access_token ，我该怎么称呼它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-17T07:12:05.147

你得到一个空的 json 对象的原因是你正在做一个 GET 请求。如果您将其更改为 POST 请求，它应该可以工作。

# php - preg_replace() 在 MySQL 表中查找匹配项

> ID：15605196
> 
> 赞同：0
> 
> 时间：2013-03-24T23:05:49.960
> 
> 标签：php, mysql, preg-replace, preg-match

```
 function convText($v){

    $str = htmlentities($v);

    preg_match_all('(\[\[(.+?)\]\])', $str, $matches);

    foreach($matches['0'] as $match){

        $substring = substr($match, 1);
        $getData = bandToLink($substring);
        $str = preg_replace('/$match/', $getData , $str);
    }
    return $str;
    }

function bandToLink($v){

    $findBand = mysql_query("select * from news where news_title='". $v ."'") or die(mysql_error());
    if(mysql_num_rows($findBand)==0){
        return '<strong style="color:red">$v</strong>';
    } else {
        $getFind = mysql_fetch_assoc($findBand);
        return '<a href="/band/'. $getFind['seo_link'] .'.html">'. $getFind['news_title'] .'</a>';
    }

}

$text = "Lorem ipsum dolor sit amet, [[APPLE]] and Lorem [[CHERRY]] ipsum dolor";
echo convText($text); 
```

如果在数据库中找到**APPLE** ，如何将**[[APPLE]]**文本替换为？我在 ASP 函数上使用此模式进行相同的工作，但它不适用于 php。`<a href="#">APPLE</a>`

 *** * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T23:09:37.780

您忘记在正则表达式中包含[分隔符。](http://php.net/manual/en/regexp.reference.delimiters.php)它应该是：

```
preg_match_all('/(\[\[(.+?)\]\])/', $str, $matches); 
```**

# asp.net - ASP .NET Web API 控制器操作的参数为空，但 M odelState.IsValid 仍然为真，为什么？

> ID：15605198
> 
> 赞同：1
> 
> 时间：2013-03-24T23:06:01.917
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-4

问题说明了一切，我有一个 Web API 控制器操作，它需要一个 POCO。这是一个 POST 操作，我故意不将参数发布到操作，但是 ModelState.IsValid 属性仍然显示为 true。为什么会这样？我必须在控制器操作及其参数上设置一个属性来强制验证吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T23:10:30.853

Null 是对象的有效值。使 POCO 中的属性 [必需] 以强制检查。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-15T12:09:31.537

有类似的问题。你有一个合理的担忧。请看一下：

[https://blog.markvincze.com/how-to-validate-action-parameters-with-dataannotation-attributes/](https://blog.markvincze.com/how-to-validate-action-parameters-with-dataannotation-attributes/)

数据注释救援：

```
public class ValidateActionParametersAttribute : ActionFilterAttribute  
{
    public override void OnActionExecuting(ActionExecutingContext context)
    {
        var descriptor = context.ActionDescriptor as ControllerActionDescriptor;

        if (descriptor != null)
        {
            var parameters = descriptor.MethodInfo.GetParameters();

            foreach (var parameter in parameters)
            {
                var argument = context.ActionArguments[parameter.Name];

                EvaluateValidationAttributes(parameter, argument, context.ModelState);
            }
        }

        base.OnActionExecuting(context);
    }

    private void EvaluateValidationAttributes(ParameterInfo parameter, object argument, ModelStateDictionary modelState)
    {
        var validationAttributes = parameter.CustomAttributes;

        foreach (var attributeData in validationAttributes)
        {
            var attributeInstance = CustomAttributeExtensions.GetCustomAttribute(parameter, attributeData.AttributeType);

            var validationAttribute = attributeInstance as ValidationAttribute;

            if (validationAttribute != null)
            {
                var isValid = validationAttribute.IsValid(argument);
                if (!isValid)
                {
                    modelState.AddModelError(parameter.Name, validationAttribute.FormatErrorMessage(parameter.Name));
                }
            }
        }
    }
} 
```

然后使用它：

```
 [ValidateActionParameters]
 public IActionResult Post([FromBody][Required]Product product) 
```

# php - 在同一页面上将变量从 jQuery 传递到 PHP

> ID：15605199
> 
> 赞同：-1
> 
> 时间：2013-03-24T23:06:06.510
> 
> 标签：php, jquery

请多多包涵，我是 PHP 新手。我在同一页面上混合使用`PHP`和。`jQuery`我需要将变量从`jQuery`to 传递给`PHP`. 我遇到的所有示例都描述了如何将变量传递给`PHP`我不想要的服务器上的文件。到目前为止，我设法使用 jQuery $.toJSON(); 将对象转换为 JSON；我的问题是：如果两者都驻留在同一页面上，是否可以将 jQuery 数据传递给 php`jQuery`代码`PHP`？

到目前为止，这是我的代码：

```
var myObject = {name: 'Tomas', age: 38};
var encoded = $.toJSON( myObject);
var name = $.evalJSON( encoded ).name;
var version = $.evalJSON(encoded).age; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T23:09:41.980

不，这是不可能的，因为 PHP 不是客户端脚本，而是服务器端脚本。这意味着当数据被提供给客户端时，PHP 脚本很可能已经完成运行。下面演示了 PHP 和 JavaScript 之间的关系：

> 服务器 -> PHP -> 客户端（浏览器）-> Javascript

因此，不可能在同一页面上让 javascript 与 PHP 通信。您可以做的是使用 Ajax 来调用服务器端文件，就像您说的那样 - 但恐怕这与您在 PHP 和 JavaScript 通信方面可以做的一样多

# c# - 组合框项目连接到 C# winforms 中的列表

> ID：15605206
> 
> 赞同：1
> 
> 时间：2013-03-24T23:07:05.217
> 
> 标签：c#, sql, sql-server, winforms, sql-server-2008

我有一个表格：“Emloyees”，带有一个组合框1。我有一张桌子“城市”。当我将一名员工添加到我的“员工”**表中**时，我打开了我拥有的所有城市的组合框1，然后我选择了一个。如果在表 City 我添加一个城市，我希望当我尝试添加一个员工时，当我打开 comboBox1 时，会有我刚刚添加的城市。我想要表格 City 和表单中的 comboBox1 之间的连接

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T00:00:09.070

您需要进行一个获取 Employee 的 sql 查询，然后您可以在组合框中显示它

我有类似的项目，所以我知道

它是那样的

```
 CityComboBoxEmp.DataSource = CityShow.UseSqlCommand("Select * From City").Tables[0]; 
```

CityShow 是使用运行 sql 命令的类

# java - 在 jlist 中创建新行

> ID：15605211
> 
> 赞同：0
> 
> 时间：2013-03-24T23:07:30.667
> 
> 标签：java, swing, netbeans, newline, jlist

代码：

```
String key = stockNo.getText();
String quantityTxt = quantity.getText();
String info = "\n\nName: " + StockData.getName(key) + 
                "\nPrice: £" + (StockData.getPrice(key)) + 
                "\nNumber in stock: " + StockData.getQuantity(key) +
                "\nNumber to buy: " + quantityTxt;
information.append(info); 
```

输出 jlist，我放了 \n 但似乎不起作用

```
key:33nameTshirtprice: £10.00number in stock:37number to buy:1
key:55nameshirtprice: £5.00number in stock:12number to buy:1 
```

我怎么会得到它，

```
key:33
name: Tshirt                 (image will go here)
price: £10
number in stock: 37
number bought 1 
```

等这将是列表中的一个元素

（抱歉，由于代表不能放图片）

# c++ - GLFW 和 Netbeans 行动起来

> ID：15605212
> 
> 赞同：1
> 
> 时间：2013-03-24T23:07:39.610
> 
> 标签：c++, netbeans, cygwin, mingw, glfw

我在 Netbeans 中链接到 GLFW 时遇到一些问题，我已按照此处的说明进行操作：

[http://forums.netbeans.org/topic51143.html](http://forums.netbeans.org/topic51143.html)

我已经在我的计算机上安装了 Cygwin 和 MinGW，我之前安装了 Cygwin，我试图用它来编译 GLFW 程序，但我得到了同样的错误，所以我决定尝试 MinGW，按照说明，仍然同样的问题。另外，由于某种原因，我不能使用 msys make.exe 作为 make 命令，即使是为了编译 C++ hello world，我也必须使用 Cygwin 中的那个。我已经设置了 Windows Path 变量以包含两个 msys bin 目录的位置。

“1）必须安装什么（dll等）？glfw.dll libgcc_s_dw2-1.dll libstdc++-6.dll”

我不确定这意味着什么，在这种情况下安装是否意味着 System32/SysWOW64 应该包含那些提到的 .dll？

我对该程序的输出（使用此处指定的链接器属性： [http](http://forums.netbeans.org/topic51143.html) ://forums.netbeans.org/topic51143.html ）

```
#include <cstdlib>
#include <stdio.h>
#include <GL/glfw.h>

using namespace std;

int main(int argc, char** argv) {
    if (!glfwInit())
        return -1;

    return 0;
} 
```

产量：

"/usr/bin/make" -f nbproject/Makefile-Debug.mk QMAKE= SUBPROJECTS= .build-conf make[1]: 进入目录`/cygdrive/c/Users/sysdba/Documents/NetBeansProjects/GLFW' "/usr/bin/make" -f nbproject/Makefile-Debug.mk dist/Debug/MinGW_QT-Windows/glfw.exe make[2]: Entering directory`/cygdrive/c/Users/sysdba/Documents/NetBeansProjects/GLFW' mkdir -p构建/调试/MinGW_QT-Windows rm -f 构建/调试/MinGW_QT-Windows/main.od g++.exe -lglfwdll -DGLFW_DLL -c -g -Wall -I../../../Downloads/glfw-2.7 .7.bin.WIN64/glfw-2.7.7.bin.WIN64/lib-mingw -MMD -MP -MF build/Debug/MinGW_QT-Windows/main.od -o build/Debug/MinGW_QT-Windows/main.o main.cpp g++：-lglfwdll：链接器输入文件未使用，因为链接未完成 mkdir -p dist/Debug/MinGW_QT-Windows g++.exe -lglfwdll -DGLFW_DLL -o dist/Debug/MinGW_QT-Windows/glfw build/Debug/MinGW_QT- Windows/main.o -L../../../../../MinGW/lib -lglfw -lglu32 -lopengl32 -lglfwdll nbproject/Makefile-Debug.mk:62：目标配方`dist/Debug/MinGW_QT-Windows/glfw.exe' failed make[2]: Leaving directory`/cygdrive/c/Users/sysdba/Documents/NetBeansProjects/GLFW' nbproject/Makefile-Debug.mk:59：目标配方`.build-conf' failed make[1]: Leaving directory`/cygdrive/c/Users/sysdba/Documents/NetBeansProjects/GLFW' nbproject/Makefile-impl.mk ：39：目标主配方`.build-impl' failed build/Debug/MinGW_QT-Windows/main.o: In function`'：/cygdrive/c/Users/sysdba/Documents/NetBeansProjects/GLFW/main.cpp:20：未定义引用`_ *imp* _glfwInit@0' collect2：ld返回1退出状态make [2 ]: *** [dist/Debug/MinGW_QT-Windows/glfw.exe] 错误 1

知道问题可能是什么吗？这可能与我没有使用 msys make.exe 作为 make 命令有关吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T09:50:15.137

我修复了我的 MinGW 安装，所以我可以在 MinGW msys 中使用 make.exe，而不是 cygwin mysys，但没有帮助。

答案不多，但似乎是某个地方的 GLFW 存在问题，无法使其正常工作。我切换到了 freeglut，工作起来就像一个魅力，没有任何麻烦。

# paypal - PayPal PayFlow 托管结帐

> ID：15605214
> 
> 赞同：0
> 
> 时间：2013-03-24T23:07:56.417
> 
> 标签：paypal, payflowlink

我无法理解托管结帐。我认为这是因为我放不下 Payflow Link。因此，我将把它减少到我想做的事情，如果有人能告诉我这是否可以通过 Hosted Checkout 实现，我将不胜感激。

使用 PayflowLink，我能够收集一些信息（姓名、地址、电子邮件等）+ 一些用于计算金额并将其发送到 payflow.paypal.com 的应用程序特定信息，用户可以在返回之前愉快地结帐到我的网站。

使用 Hosted Checkout，文档似乎暗示我现在收集信用卡信息并获取安全令牌以将其提交给 payflow。

您会说为什么不使用 Paypal 付款标准，但用户有自己的商家帐户。

我错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T16:07:07.737

是的你可以。

该文档未提及此用例，但您可以。

看来您甚至可以继续使用旧的 PayflowLink 参数（同样未记录）。

真正的问题是在尝试运行测试表单提交时由于缺少沙盒帐户而生成的有关“快速结帐”的令人困惑的错误消息。

对于那些关注我的人......如果您正在测试，您必须拥有沙盒帐户。您在托管结帐设置表单的中途输入您的沙盒电子邮件

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T03:26:03.440

如果您使用的是 PayPal 以外的第 3 方商家，您实际上仍会像以前一样使用 PayFlow Link（或 Pro）。Payments Advanced（托管 PayPal）仅适用于您使用 PayPal 作为商家帐户的情况。

# javascript - 在没有 jQuery Validate 的情况下验证单选按钮组

> ID：15605218
> 
> 赞同：0
> 
> 时间：2013-03-24T23:08:08.223
> 
> 标签：javascript, jquery, forms, radio-button, validation

在滑到下一组问题之前，我正在尝试验证每张幻灯片上的表格。

除了单选按钮外，一切似乎都很好。如果未选中一个按钮并且如果选中了答案，则我正在尝试向一组按钮添加一类“错误焦点”，除了 return $error = false;

这是表格[http://www.foresightaus.com.au/form/](http://www.foresightaus.com.au/form/)

```
 $nextBtn.click(function(e){

        e.preventDefault();
        var newIndex = 0,
            currentSlide = $slide.eq(currentIndex),
            $text = currentSlide.find($('li input[type="text"]')),
            $email = currentSlide.find($('#yourEmail')),
            $radio = currentSlide.find($('li.radio-btns')),
            formFields = currentSlide.find("input:text, li.radio-btns"),
            $error = true;  

        formFields.removeClass("error-focus");  

        //-----------------------------------------------------------------
        //-- Validate Text Fields

        $text.each(function(){

            if($(this).val()==""){

                //errorMessage("Please Enter Your Name");
                $(this).focus().addClass("error-focus");
                $error = true;

            }else{

                $error = false;

            }

        }); // end text each

        //-----------------------------------------------------------------
        //-- Validate Email Fields

        if($email.val()==""){

            //errorMessage("Please Enter Your Email Address");
            $(this).focus().addClass("error-focus");
            $error = true;

        }else if(!isValidEmail($email.val())){

            //errorMessage("Please Enter a Correct Email Address");
            $(this).focus().addClass("error-focus");
            $error = true;

        }else{

                $error = false;

        }

        //-----------------------------------------------------------------
        //-- Validate Radio Fields

        $radio.each(function(){

            if (!$(this).find(':checked')) {

               $(this).addClass("error-focus");
               $error = true;

            }

            else {

              $error = false;

            }

        }); // end radio each

        //-----------------------------------------------------------------

        if($error = false){

            if(currentIndex<lastIndex){
                newIndex = currentIndex+1;
            }

            slideToImage(newIndex); 

        }       

    });

    function isValidEmail(email) {
        var emailRx = /^[\w\.-]+@[\w\.-]+\.\w+$/;
        return  emailRx.test(email);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T23:55:20.063

You should add a div around each radio group, and if one of the radio buttons isn't checked, you should just give the div the red border that you're giving the other fields. An example:

**HTML**

```
<form>
<div id="group-1-wrapper">
<input type="radio">
<input type="radio">
</div>
</form> 
```

**js**:

```
if(error) // your handling
$("#group-1-wrapper").addClass("error-focus"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T00:39:38.187

我尝试了几种不同的方法，但这对我有用。@Evan 感谢您为我指出正确的方向

```
 //-----------------------------------------------------------------
        //-- Validate Radio Fields

        $radio.each(function(){

            if ($(this).find('input:radio').is(':checked')) {

                $error = false;

            }else{

                $(this).addClass("error-focus");
                $error = true;

            }

        }); // end radio each 
```

# c++ - 在基类中有一个方法可以分配给子类

> ID：15605223
> 
> 赞同：1
> 
> 时间：2013-03-24T23:08:39.013
> 
> 标签：c++, c++11, shared-ptr

我正在尝试拥有一个为调用类分配 shared_ptrs 的通用基类/助手类，但我在让它在派生类中工作时遇到了问题。

```
#include <memory>

template<typename T>
struct SPAlloc {

    virtual ~SPAlloc() {}

    template<typename ...Args>
    static std::shared_ptr<T>
    Alloc(Args&&... params) {
        return std::make_shared<T>(std::forward<Args>(params)...);
    }

    template<class U, typename ...Args>
    static std::shared_ptr<U>
    Alloc(Args&&... params) {
        return std::make_shared<U>(std::forward<Args>(params)...);
    }
};

class Base : public SPAlloc<Base> {
public:
    virtual ~Base() {};
};

class Child : public Base {
public:
    virtual ~Child() {};
};

typedef std::shared_ptr<Base> pBase;
typedef std::shared_ptr<Child> pChild;

int main() {
    pBase base = Base::Alloc();
    pChild child = Child::Alloc();
} 
```

我知道模板中的`class Base : public SPAlloc<Base>`意思是，这就是我创建第二个 Alloc 的原因。第二个 alloc 需要被称为 like 。`T``Base``Child::Alloc<Child>()`

有没有办法写这个`Alloc`，以便编译器可以推断出我调用 Alloc 的类？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T23:24:22.823

简短的回答：不，没有。

长答案：关键是除非明确告知，否则`Alloc`不知道`Child`，那么这些信息来自哪里？对 的调用`Child::Alloc()`是对 的调用`Base::Alloc()`，对 的调用是对的调用`SPAlloc<Base>::Alloc()`，所有关于的信息`Child`都丢失了。

最简单的解决方案是使用免费函数，但该函数已经存在并且它被称为：`std::make_shared`。也许考虑直接使用它并完全避免麻烦`SPAlloc`。

或者，如果你想`SPAlloc<T>::Alloc()`为每个孩子覆盖，你根本不需要基类`SPAlloc`，只需将方法添加到每个类，这可能比使用基类更容易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T23:32:16.177

如果您真的想这样做，您需要将所有对象`Spalloc`作为模板参数从它们自己继承，甚至是您的子类：

```
class Child : public SPAlloc<Child>, public Base {
public:
    virtual ~Child() {};
public:
   using SPAlloc<Child>::Alloc;
}; 
```

您也可以简单地使用 std::make_shared :)

# sql - 我如何在 SQL 中看到具有两种不同条件的一列？

> ID：15605227
> 
> 赞同：0
> 
> 时间：2013-03-24T23:09:17.400
> 
> 标签：sql, pivot

我的专栏合二为一！桌子; 例如（你好（德语）=你好，蒙塔格（德语）=星期一）

```
Id, LanguageID, ResourceName, ResourceValue  
1   1           Hello         Hello  
2   2           Hello         Hallo  
3   1           Monday        Monday  
4   2           Monday        Montag 
```

我怎样才能看到这样的查询结果：

```
ResourceName   ResourceValue(languageID=1) ResourceValue(LanguageID=2)  
Hello          Hello         Hallo  
Monday         Monday        Montag 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-24T23:19:37.740

您可以使用带有`CASE`表达式的聚合函数获得结果：

```
select ResourceName,
  max(case when languageid = 1 then ResourceValue end) Language1,
  max(case when languageid = 2 then ResourceValue end) Language2
from yourtable
group by resourcename 
```

请参阅[SQL Fiddle with Demo](http://sqlfiddle.com/#!2/89894/1)。

如果您有其他`LanguageId`值，则可以添加更多 case 表达式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-24T23:15:03.997

这可能有效...

```
select 
    t1.resourcename,
    t1.resourcevalue,
    t2.resourcevalue
from
    tablename t1,
    tablename t2
where
    t1.resourcename = t2.resourcename and
    t1.languageid = 1 and
    t2.languageid = 2 
```

# ios - 转到下一个故事板时的旋转方向

> ID：15605231
> 
> 赞同：2
> 
> 时间：2013-03-24T23:09:55.397
> 
> 标签：ios, xcode, ipad, orientation, spinning

所以我一直试图推迟在这里发帖，因为这是一件非常愚蠢的事情，我想这将是一个简单的解决方案，但老实说我找不到答案。

[http://www.youtube.com/watch?v=SbMBCSQegpw&feature=youtube_gdata_player](http://www.youtube.com/watch?v=SbMBCSQegpw&feature=youtube_gdata_player)

这就是我正在构建的 iPad 应用程序中不断发生的事情。

我有 2 个 ViewController，当我单击 UIButton 转换到下一个控制器时，它会执行上述操作。

每个控制器的方向设置为横向，项目设置全部设置为仅左。

我的两个 .m 文件中都有代码来将方向设置为向左，但似乎没有什么可以阻止它。

任何人都可以帮忙吗？

# ruby - 如何在 HAML 中包装多行 Ruby 参数？

> ID：15605238
> 
> 赞同：25
> 
> 时间：2013-03-24T23:10:37.697
> 
> 标签：ruby, haml, word-wrap

如何在 HAML 中为单个 Ruby 语句使用多行？例如，我想写如下内容：

```
- entries = [{
-   :title => "The Fellowship of the Ring", 
-   :body => "We should walk instead of fly"
- }]

!!! 5
%html
  %head
    %title Blog
  %body
    #content
      - entries.each do |entry|
        .entry
          %h3.title= entry[:title]
          %p.body= entry[:body] 
```

但是当然前四行会产生语法错误。

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2013-03-24T23:27:57.297

## 用逗号包裹参数

根据[HAML 常见问题解答](http://haml.info/docs/yardoc/file.FAQ.html)：

> [W] 当一个函数有很多参数时，只要每行以逗号结尾，就可以将其包裹在多行中。

因此，以下应该是有效的 HAML：

```
- entries = [{ :title => "The Fellowship of the Ring", 
               :body  => "We should walk instead of fly" }] 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2018-02-19T23:42:10.210

您可以使用`:ruby`过滤器。

```
:ruby
  entries = [{ 
    :title => "The Fellowship of the Ring", 
    :body  => "We should walk instead of fly" 
  }]

!!! 5
%html
  %head
    %title Blog
  %body
    #content
      - entries.each do |entry|
        .entry
          %h3.title= entry[:title]
          %p.body= entry[:body] 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-03-24T23:21:26.563

[在这里](http://haml.info/docs/yardoc/file.REFERENCE.html#multiline)查看文档。

请注意，这是故意尴尬的，因为您不应该在模板中放置大量 ruby​​。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-05-25T22:45:18.823

```
%div= "First line " + |
      "and second line" | 
```

将呈现：

```
<div>First line and second line</div> 
```

您可以使用 command-tool `haml`，例如`pbpaste | haml`在 macOS 上复制代码，或者使用 file `cat file.haml | haml`。

如果您甚至不想要标签：

```
First line |
and second line | 
```

将产生：

```
First line and second line 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-10-11T17:52:59.630

这有效：

```
= link_to( |
  'Delete', |
  attachment_path(attachment),
  confirm: 'Are you sure?',
  method: :delete,
  remote: true,
  ) 
```

注意第一行和第二行之后的管道，以及管道之前的空格！

# autofixture - 为什么 Autofixture Likeness 的行为不像我对这两个测试之一所期望的那样？

> ID：15605241
> 
> 赞同：3
> 
> 时间：2013-03-24T23:10:50.730
> 
> 标签：autofixture, semantic-comparison

鉴于这些类：

```
public class DrumAndBassBand
{
    public Drums Drum { get; set; }
    public Bass Bass { get; set; }
}

public class Instrument
{
    public string Name { get; set; }
    public int SerialNumber { get; set; }
}
public class Drums : Instrument { }
public class Bass : Instrument { } 
```

为什么这个测试通过...

```
[Fact]
public void DrumAndBassBand_Equality_Behaves_As_Expected_Version_One()
{
    // arrange
    var template = new Fixture().Create<DrumAndBassBand>();

    // act
    var createdBand = new DrumAndBassBand {Drum = template.Drum, Bass = template.Bass};

    // assert         
    var createdLikeness = createdBand.AsSource().OfLikeness<DrumAndBassBand>()
        .Without(x => x.Bass)
        .CreateProxy();
    createdLikeness.Drum = createdBand.Drum;

    Assert.True(createdLikeness.Equals(template));

    var templateLikeness = template.AsSource().OfLikeness<DrumAndBassBand>()
        .Without(x => x.Bass)
        .CreateProxy();
    templateLikeness.Drum = template.Drum;

    Assert.True(templateLikeness.Equals(createdBand));
} 
```

……这个失败了？（区别在于`DrumAndBaseBand`实例化）

```
[Fact]
public void DrumAndBassBand_Equality_Behaves_As_Expected_Version_Two()
{
    // arrange
    var template = new Fixture().Create<DrumAndBassBand>();

    // act
    var createdBand =
        new DrumAndBassBand
        {
            Drum = new Drums { Name = template.Drum.Name, SerialNumber = template.Drum.SerialNumber },
            Bass = new Bass { Name = template.Bass.Name, SerialNumber = template.Bass.SerialNumber }
        };

    // assert
    var createdLikeness = createdBand.AsSource().OfLikeness<DrumAndBassBand>()
        .Without(x => x.Bass)
        .CreateProxy();
    createdLikeness.Drum = createdBand.Drum;

    Assert.True(createdLikeness.Equals(template));

    var templateLikeness = template.AsSource().OfLikeness<DrumAndBassBand>()
        .Without(x => x.Bass)
        .CreateProxy();
    templateLikeness.Drum = template.Drum;

    Assert.True(templateLikeness.Equals(createdBand));
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T10:15:09.407

在第二个测试中，`Drum`和实例与您尝试比较的*模板*`Bass`不同。

 *您始终可以运行`Likeness`（无需创建代理）并检查输出：

```
Test 'DrumAndBassBand_Equality_Behaves_As_Expected_Version_Two' failed: 

Ploeh.SemanticComparison.LikenessException:
    The provided value DrumAndBassBand did not match the expected value DrumAndBassBand. 

The following members did not match: 
- Drum. 
```

这基本上意味着您必须在创建实例`Likeness`比较时提供提示。`Drum`

测试的前半部分变为：

```
var createdLikeness = createdBand
    .AsSource().OfLikeness<DrumAndBassBand>()
    .With(x => x.Drum)
        .EqualsWhen((s, d) => s.Drum == createdBand.Drum)
    .Without(x => x.Bass)
    .CreateProxy(); 
```

当源目标实际上是*createdBand*实例时，它`Drums`等于*other* 。`Drums`*`Drum`*

 *同样，测试的后半部分变为：

```
var templateLikeness = template
    .AsSource().OfLikeness<DrumAndBassBand>()
    .With(x => x.Drum)
        .EqualsWhen((s, d) => s.Drum == template.Drum)
    .Without(x => x.Bass)
    .CreateProxy(); 
```

以上允许您进行*非常灵活*的比较（并且您始终可以进一步自定义它）。**

# jquery - 在 div 中包含 position: absolute 元素，以便在其前后插入 position: relative div

> ID：15605244
> 
> 赞同：1
> 
> 时间：2013-03-24T23:11:21.677
> 
> 标签：jquery, css, css-position, jquery-isotope

[我有一个由Isotope JS](http://isotope.metafizzy.co/)定位的元素的网格布局，这是该项目的要求。它工作得很好，但是“同位素”的元素是使用`position: absolute`CSS3 变换定位的。

我正在尝试将另一个 div 动态放置在网格的某一行下方。这与谷歌图像的布局非常相似——有一个图像网格，当单击它时，会在该图像行下方弹出一个横跨页面宽度的黑框。

这是一个 jsfiddle，其中包含我正在尝试完成的示例：http: [//jsfiddle.net/TfWdk/1/](http://jsfiddle.net/TfWdk/1/)

绿色 div 代表弹出框。我将在使用 javascript 单击的文章之后动态插入它。问题是，正如您在小提琴中看到的那样，它不会正确放置，因为项目（红色框）的位置是`position: absolute`.

这里唯一的要求是使用同位素，因此项目必须具有小提琴中存在的绝对定位和 CSS3 变换。如果有一些同位素设置可以解决这个问题，我愿意接受。我目前正在制定的解决方案涉及使用 javascript 将单击的行下方的每个元素向下推，使用 javascript 定位下拉列表，然后显示它。显然，我更喜欢一种解决方案，它只涉及在页面上插入下拉 HTML 并让浏览器进行定位。

另请注意，我正在使用 webkit 转换，所以这在 Firefox/IE 中可能看起来很有趣。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T23:28:19.077

这应该做你需要的：

[http://jsfiddle.net/ytVvW/](http://jsfiddle.net/ytVvW/)

```
.container {
    width: 866px;
    height: 600px;
    border: 1px solid #ccc;
    position: relative;
}

.item {
    width: 274px;
    height: 180px;
    margin: 5px;
    float: left;
    border: 1px solid red;
    position: absolute;
    top: 0;
    left: 0;
}

.overlay {
    width: 100%;
    height: 50px;
    background-color: #333;
    position: absolute;
    float: left;
}

.dropdown {
    width: 100%;
    height: 40px;
    background-color: green;
    display: block;
    top: 190px;
    position: relative;
}

.row {
    position: relative;
}

#tl { -webkit-transform: translate3d(0px, 0px, 0px); }
#tc { -webkit-transform: translate3d(290px, 0px, 0px); }
#tr { -webkit-transform: translate3d(580px, 0px, 0px); }
#bl { -webkit-transform: translate3d(0px, 203px, 0px); } 
```

# php - 如果为空值，则拆分数组

> ID：15605246
> 
> 赞同：0
> 
> 时间：2013-03-24T23:11:46.693
> 
> 标签：php

如果其中一行具有空值，我正在尝试拆分数组。我的数组被导出到一个 csv 并且有多行数据，如果数据不完整，它将被发送到一个不完整的 csv，如果它是完整的，它将被发送一个完整的 csv。

这就是我的数组结构看起来第一行的空白字段在电子邮件中的样子（这一行应该从数组中拆分出来：

```
array(2) { 
    [0]=> array(6) { 
        ["Username"]=> string(47) " STARRY NIGHT CINEMA - RISE OF THE GUARDIANS " 
        ["Email"]=> string(0) "" 
        ["Location"]=> string(1) "1" 
        ["Type"]=> int(1) 
        ["Title"]=> string(47) " STARRY NIGHT CINEMA - RISE OF THE GUARDIANS " 
        ["Description"]=> string(491) "the Tooth Fairy"
    }
    [1]=> array(6) { 
        ["Username"]=> string(26) "Maui Nui Botanical Gardens" 
        ["Email"]=> string(18) "info@mnbg.org" 
        ["Location"]=> string(1) "1" 
        ["Type"]=> int(1) 
        ["Title"]=> string(26) "Maui Nui Botanical Gardens" 
        ["Description"]=> string(50) "Conserving Hawaiian Plants & Cultural Heritage"
    }
} 
```

写入我的 csv：

```
 $fp = fopen('entries.csv', 'w');
    foreach ($entries as $fields) {
        fputcsv($fp, $fields);
    }

    fclose($fp);

    if (!copy("http://www.simonstaton.co.uk/entries.csv", "entries.csv")) {
        echo ("failed to copy file");
    }; 
```

我不知道从哪里开始，也不知道应该使用什么功能，因此非常感谢任何建议。

西蒙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T23:21:32.653

首先使用 . 将您的 CSV 数据打包到一个数组中`fgetcsv()`。然后使用循环搜索“”。范例：

```
$row = 1;
if (($resource = fopen("example.csv", "r")) !== false) {
    while (($data = fgetcsv($resource, 1000, ",")) !== false) {
        $num = count($data);
        $row++;
        for ($c=0; $c < $num; $c++) {
            if ($data[$c] == "") { 
               // operate 
            }
        }
    }
    fclose($handle);
} 
```

顺便说一句，不要使用该`split()`功能。使用[`preg_split()`](http://php.net/manual/en/function.preg-split.php). [http://php.net/manual/en/function.fputcsv.php](http://php.net/manual/en/function.fputcsv.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T23:19:26.070

您可以检查数组中的任何值是否为空，如下所示：

```
in_array('', $array) 
```

那么你可以做一个简单的 if

```
if(in_array('', $array)) {
    //Do whatever you have to do to slip your array. I don't understand exactly what you want the end result to look like .
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T23:28:31.290

要按完整或不完整分隔条目，您可以打开两个文件进行写入。一个包含每个。

```
// filenames
$fn_complete = 'entries.csv';
$fn_incomplete = 'incomplete_entries.csv';

// file pointers
$fp_complete = fopen($fn_complete, 'w');
$fp_incomplete = fopen($fn_incomplete, 'w');

// write CSVs
foreach ($entries as $fields) {
    if (in_array('', $fields))
        fputcsv($fp_incomplete, $fields);
    else
        fputcsv($fp_complete, $fields);
}

fclose($fp_complete);
fclose($fp_incomplete);

if (!copy('http://www.simonstaton.co.uk/' . $fn_complete, $fn_complete)) {
    echo ('failed to copy file ' . $fn_complete);
};
if (!copy('http://www.simonstaton.co.uk/' . $fn_incomplete, $fn_incomplete)) {
    echo ('failed to copy file ' . $fn_incomplete);
}; 
```

# java - Java：将 lat/lon 从 EPSG:4236 转换为 EPSG:3857

> ID：15605247
> 
> 赞同：4
> 
> 时间：2013-03-24T23:11:47.113
> 
> 标签：java, projection, geotools

如何使用 geotools 或其他 java 库将我的 lat lon 转换为 EPSG 3857 投影？我很难找到合适的方法来使用。我知道 OpenLayers (javascript) 可以很容易地做到这一点，但我看不到转换这些坐标的清晰路径。

```
I would like to see this transformation
source lon, lat: -71.017942,  42.366662    
destination lon, lat: -71 1.25820, 42 22.0932 
```

所以我创建了我的 CRS

```
final CoordinateReferenceSystem source = CRS.decode( "EPSG:4236" );
final CoordinateReferenceSystem dest = CRS.decode("EPSG:3857");

final MathTransform transform = CRS.findMathTransform(source, dest); 
```

但是创建几何图形似乎并不直接，因为它们需要几何工厂或其他东西。

我是地理工具和地理空间数据的新手，感谢您的指导。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-10-11T21:15:17.637

这里有一个解决方案：

```
CoordinateReferenceSystem sourceCRS = CRS.decode("EPSG:4236");
CoordinateReferenceSystem targetCRS = CRS.decode("EPSG:3857");
MathTransform transform = CRS.findMathTransform(sourceCRS, targetCRS, false);
GeometryFactory geometryFactory = new GeometryFactory(new PrecisionModel(), 4326);
Point point = geometryFactory.createPoint(new Coordinate(lon, lat));
Point targetPoint = (Point) JTS.transform(point, transform); 
```

# jquery - 需要通过 jquery 显示无序列表的父项和兄弟项

> ID：15605250
> 
> 赞同：0
> 
> 时间：2013-03-24T23:11:59.230
> 
> 标签：jquery, html, css

我已经在我们的网站上获得了这个导航菜单，它已经在 stackoverflow 上从社区获得了一些很大的帮助。但我需要更多一点。

现在，如果有人点击顶部的商店链接，就会出现珠宝和定制的子元素。

但是，如果我们单击向下 3 层的项链，整个菜单就会消失。

我尝试了多种不同的方法来降低第三个元素以使其父母和祖父母留在屏幕上，但是没有运气。

我在想的是一个 jquery 函数，如果单击的项目是第三个或第二个项目，则该函数会获取父母和祖父母的索引。这样，这种级别的导航对用户保持可见。

```
<script>
$("#navigation ul li ul").hide();
$(".is-current").parent().parent().parent().siblings().show();
</script> 
```

我们在第 3 级项目上标识了 is-current，但是我们希望显示父项目和所有子项目及其兄弟项目，以便在用户单击第 3 级项目时菜单显示为缩进和可见。我已经通过 js fiddle 尝试了上面的 jquery 代码......但由于我对 jquery 的相对缺乏经验......我正在努力找出这是怎么可能的。任何建议都非常感谢

```
 <div id="navigation">
  <ul id="jsddm" class="dbtree">
    <li  id="SHOP"> <a href="...">SHOP</a>
      <ul>
        <li id="JEWELLERY"> <a href="...">JEWELLERY</a>
          <ul>
            <li id="NECKLACES" class="is-current"><a href="...">NECKLACES</a></li>
          </ul>
          <ul>
            <li id="RINGS"><a href="...">RINGS</a></li>
          </ul>
          <ul>
            <li id="EARRINGS"><a href="...">EARRINGS</a></li>
          </ul>
          <ul>
            <li id="FRIENDSHIP BRACELETS"><a href="...">FRIENDSHIP BRACELETS</a></li>
          </ul>
          <ul>
            <li id="CHARM BRACELETS"><a href="...">CHARM BRACELETS</a></li>
          </ul>
        </li>
      </ul>
      <ul>
        <li id="BESPOKE"><a href="...">BESPOKE</a>
          <ul>
            <li id="MAKE YOUR BESPOKE "><a href="...">MAKE YOUR BESPOKE</a></li>
          </ul>
          <ul>
            <li id="CHAINS"><a href="...">CHAINS</a></li>
          </ul>
          <ul>
            <li id="LETTERS"><a href="...">LETTERS</a></li>
          </ul>
          <ul>
            <li id="CRYSTALS"><a href="...">CRYSTALS</a></li>
          </ul>
          <ul>
            <li id="GEMSTONES"><a href="...">GEMSTONES</a></li>
          </ul>
          <ul>
            <li id="CHARMS"><a href="...">CHARMS</a></li>
          </ul>
          <ul>
            <li id="COLOURED CORD"><a href="...">COLOURED CORD</a></li>
          </ul>
        </li>
      </ul>
      <ul>
        <li id="KA FINES (coming soon)"><a href="...">KA FINES (coming soon)</a></li>
      </ul>
      <ul>
        <li id="GIFT VOUCHER"><a href="...">GIFT VOUCHER</a></li>
      </ul>
      <ul>
        <li id="MY DETAILS"><a href="...">MY DETAILS</a></li>
      </ul>
      <ul>
        <li id="MY HISTORY"><a href="...">MY HISTORY</a></li>
      </ul>
      <ul>
        <li id="LOGOUT"><a href="...">LOGOUT</a></li>
      </ul>
    </li>
  </ul>
  <ul>
    <li id="BESPOKE"> <a href="...">BESPOKE</a>
      <ul>
        <li id="ABOUT"><a href="...">ABOUT</a></li>
      </ul>
      <ul>
        <li id="LOOKBOOK "><a href="...">LOOKBOOK</a></li>
      </ul>
      <ul>
        <li id="MAKE YOUR BESPOKE"><a href="...">MAKE YOUR BESPOKE</a></li>
      </ul>
    </li>
  </ul>
  <ul>
    <li id="LOOKBOOK "><a href="...">LOOKBOOK</a>
      <ul>
        <li id="BESPOKE LOOKBOOK"><a href="...">BESPOKE LOOKBOOK</a></li>
      </ul>
      <ul>
        <li id="SOMETHING LIKE PARADISE"><a href="...">SOMETHING LIKE PARADISE</a></li>
      </ul>
    </li>
  </ul>
  <ul>
    <li id="OUR STORY"><a href="...">OUR STORY</a></li>
  </ul>
  <ul>
    <li id="PRESS"><a href="...">PRESS</a></li>
  </ul>
  <ul>
    <li id="BLOG"><a href="...">BLOG</a></li>
  </ul>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T23:21:45.110

这是你要找的吗？ [http://jsfiddle.net/D3fbC/](http://jsfiddle.net/D3fbC/)

javascript:

```
$(function(){
    $('#navigation').find('a').click(function(e){
        e.preventDefault();
        $(this).parent('li').find('li').toggle();
    });
}); 
```

# c# - 在 MVC 4 上的 ASP.NET 中显示经过身份验证的用户详细信息

> ID：15605253
> 
> 赞同：0
> 
> 时间：2013-03-24T23:12:10.320
> 
> 标签：c#, asp.net, asp.net-mvc-4

我目前正在开发一个用于存储医疗保健详细信息的基本系统（仅用于练习，不会用于实时数据）。使用 MVC 4 和 VS 2012。系统发布到 Windows Azure 并运行（登录/注册）。我创建了一个区域来显示输入到系统中的详细信息，但是当前，当登录用户查看页面时，所有用户的详细信息都会立即显示。我只想显示经过身份验证的用户详细信息。我确定它归结为“foreach”声明，但我不确定用什么替换它？代码

```
 @if (Request.IsAuthenticated)
 {
    foreach (var item in Model)
    {
    <tr>
        <td>
            @Html.DisplayFor(modelItem => item.FirstName)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.SecondName)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.DOB)
        </td> 
```

感谢您的时间。

# javascript - 页面扩展上的白色 div 页脚，如何？

> ID：15605254
> 
> 赞同：0
> 
> 时间：2013-03-24T23:12:17.603
> 
> 标签：javascript, jquery, html, css

我正在尝试制作一个`div`从页面上的点 (A) 延伸到点 (B) 的白色，如图所示。我想要它，以便当页面扩展时，白色从点 (A) 一直到浏览器的末尾，这样即使页面从下方扩展，下面也不会显示背景灰色。

![在此处输入图像描述](../Images/ba2099de53295191102cafad95b17dd0.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T23:16:36.367

如果您正在谈论让页脚粘在页面底部，Ryan Fait 有一个众所周知的解决方案，您可以在这里找到： [http ://ryanfait.com/resources/footer-stick-to-bottom- of-page/](http://ryanfait.com/resources/footer-stick-to-bottom-of-page/) 基本上它的工作原理是您绝对定位页脚并将其放在底部，并在页面底部添加一个“push”元素以确保页脚不会出现在内容之上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T23:34:58.043

如果您正在寻找粘性页脚，kpsuperplane 的答案将是它但在我看来，您希望有一个 DIV 位于您的内容下方，并延伸到浏览器的底部？

如果是这种情况，请检查这个示例，我非常快速地拉伸底部 div 以填充该区域，这是浏览器高度的结果 - 顶部区域。每次调整大小时都会执行。

[http://jsfiddle.net/99FpT/](http://jsfiddle.net/99FpT/)

js

```
$(function() {
    function stretch(){
        $(".area2").css({"height" : $(window).height() - $(".area1").height() });
    }
    $(window).on("resize", function(){
        stretch();
    });
    stretch();
}); 
```

# compass-sass - 如何组织 sass 文件，以便 compass 以正确的顺序包含它们

> ID：15605261
> 
> 赞同：3
> 
> 时间：2013-03-24T23:13:11.613
> 
> 标签：compass-sass, yeoman, gruntjs

我正在使用最新的 yeoman build 1.0.0beta3 和 compass 0.12.2 构建一个单页应用程序

开始`compass:server`时出现很多错误，但在开发期间，我的浏览器似乎一切正常。`grunt build`then 不会失败，但会构建不正确的 CSS 输出，从而导致浏览器中的布局被破坏。也许这都是我的错，是误会造成的。

我所拥有的是一个`main.sass`包含我所有内容的文件：

```
// compass
@import 'compass'
@import 'compass/reset'
@import 'compass/css3'
... and so on

//custom includes in the right order
@import 'base/dimensions'
@import 'base/colors'
@import 'base/layout' 
```

该文件`base/dimensions`现在定义：

```
// height of the footer
$footer-height: 50px 
```

并且（稍后）在`base/layout`我使用它：

```
.content-bg
  background-color: rgba(0, 0, 0, 0.05)
  bottom: $footer-height
  ... and more 
```

现在启动 grunt 和 compass 服务器时，出现以下错误：

```
Running "compass:server" (compass) task
directory .tmp/styles/ 
  create .tmp/styles/avendor_font-awesome.css 
  create .tmp/styles/base_colors.css 
  create .tmp/styles/base_dimensions.css 
  error app/styles/base_layout.sass (Line 23: Undefined variable: "$footer-height".) 
```

还有很多类似的错误。（在开发期间，页脚高度确实没问题。）

我不知道如何解决这个问题，我也不知道这是否会在构建运行后导致不正确的 CSS。但是当我通过发布构建时，`grunt`我在控制台中看到了相同的错误。

我应该提一下，我对 Gruntfile.js 做了一些更改，因此 .sass 文件也可以从 /styles 的子目录加载：

```
grunt.initConfig({
    yeoman: yeomanConfig,
    watch: {
        coffee: {
            files: ['<%= yeoman.app %>/scripts/{,*/}*.coffee'],
            tasks: ['coffee:dist']
        },
        coffeeTest: {
            files: ['test/spec/{,*/}*.coffee'],
            tasks: ['coffee:test']
        },
        compass: {
            **files: ['<%= yeoman.app %>/styles/{,**/}*.{scss,sass}'],**
            tasks: ['compass']
        },
        livereload: {
            files: [
                '<%= yeoman.app %>/*.html',
                '{.tmp,<%= yeoman.app %>}/styles/{,*/}*.css',
                **'{.tmp,<%= yeoman.app %>}/styles/{,**/}*.css',**
                '{.tmp,<%= yeoman.app %>}/scripts/{,*/}*.js',
                '<%= yeoman.app %>/images/{,*/}*.{png,jpg,jpeg,webp}'
            ],
            tasks: ['livereload']
        }
    }, 
```

任何人都可以启发我吗？

问候菲利克斯

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-25T09:02:58.617

对于面临同样问题的每个人：文件的命名就可以了。要包含在 main.css 中的每个文件都像这样：

```
@include 'base/colors' 
```

必须命名为：

```
_colors.sass 
```

代替：

```
colors.sass 
```

在这种情况下的`base`目录中。我也做的是重命名`main.css`为`main.css.sass`

现在一切正常，我又学到了另一件事。

# actionscript-3 - 如何使用 forEach 和进度条将图片添加到容器 Sprite？

> ID：15605263
> 
> 赞同：0
> 
> 时间：2013-03-24T23:13:58.927
> 
> 标签：actionscript-3, foreach, loader

我成功加载单个图像并使用 addChild() 创建它。现在我正在尝试使用 forEach 循环将多个图像加载到一个精灵“容器”中，增加每个图像的 X 值，以便它们连续显示。图像加载器被引用到 XML 文档中的链接。如果我测试运行此代码，则在加载图像时会弹出此错误，并且我尝试 removeChild() loadBar 动画。

```
ArgumentError: Error #2025: The supplied DisplayObject must be a child of the caller.
at flash.display::DisplayObjectContainer/removeChild() 
```

这是AS3：

```
private function loadBG():void {
    var artGrab:Number = 0;
    var artX:Number = 0;
    for each (var albumData:XML in mainXML.artist[artistID].album) {
        imgURL = new URLRequest(mainXML.artist[artistID].album[artGrab].art);
        imgLdr = new Loader();

        //if you're loading a bigger image or need a preloader
        imgLdr.contentLoaderInfo.addEventListener(Event.COMPLETE,onBGLoaded);
        imgLdr.contentLoaderInfo.addEventListener(ProgressEvent.PROGRESS, onLoading); 
        //add loader animation "All Loader"
        ldrAnim = new AllLoader();
        albumContainer.addChild(ldrAnim);
        ldrAnim.x = artX;
        ldrAnim.y = 200; 
        imgLdr.load(imgURL);
        artGrab++;
        artX + 481;
        ldrAnim.x + 481;
    }
}

private function onLoading(evt:ProgressEvent):void {
    var bytesToLoad:Number = imgLdr.contentLoaderInfo.bytesTotal;
    var numberLoaded:Number = imgLdr.contentLoaderInfo.bytesLoaded;
    ldrAnim.progBar.scaleX = numberLoaded / bytesToLoad;
    var loadedPercent = Math.round(numberLoaded / bytesToLoad * 100);
    ldrAnim.progPercent.text = loadedPercent + " %";
    trace("Loading..." + loadedPercent + "%");
}

private function onBGLoaded(evt:Event):void {
    trace("image loaded!");
    //image setup
    addChildAt(imgLdr,0);
    //now that its 100% loaded, you can resize it , etc.
    removeChild(ldrAnim);

    //use cross multiplying of fractions to maintain aspect ratio
    var origW = imgLdr.contentLoaderInfo.width;
    var origH = imgLdr.contentLoaderInfo.height;
    trace("orig width: "+ origW + "orig height: " + origH);
    //set new width
    imgLdr.width = 481;
    var newH:Number = 481 * origH / origW;
    imgLdr.height = newH;

    //may wish to do positioning AFTER resizing
    imgLdr.x = stage.stageWidth / 2 - imgLdr.width / 2;
    imgLdr.x = 0;
    imgLdr.y = 0;
    imgLdr.width = 480;
    imgLdr.height = 480;
    imgLdr.alpha = 1;   
    imgLdr.z = 0;
} 
```

祝福您阅读了这一切，我不明白是什么导致了这个错误，所以感谢您的评论！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T04:14:30.453

您需要为您的加载程序设置一组动画，以便与加载程序本身保持一致，然后当另一个`ProgressEvent.PROGRESS`事件到达时，查询数组以获取`event.target`索引，获取相应的动画并调整它，一旦放置就停止依赖单值全局变量一个监听器到多个不同的对象！

```
var animations:Vector.<AllLoader>;
var loaders:Vector.<LoaderInfo>;
private function loadBG():void {
    var artGrab:int=0;
    var artX:int=0;
    animations=new Vector.<AllLoader>();
    loaders=new Vector.<LoaderInfo>;
    for each (var albumData:XML in mainXML.artist[artistID].album) {
        imgURL = new URLRequest(mainXML.artist[artistID].album[artGrab].art);
        imgLdr = new Loader();
        //if you're loading a bigger image or need a preloader
        imgLdr.contentLoaderInfo.addEventListener(Event.COMPLETE,onBGLoaded);
        imgLdr.contentLoaderInfo.addEventListener(ProgressEvent.PROGRESS, onLoading); 
        //add loader animation "All Loader"
        ldrAnim = new AllLoader();
        albumContainer.addChild(ldrAnim);
        anomations.push(ldrAnim)
        loaders.push(imgLdr.contentLoaderInfo); // fill the arrays
        ldrAnim.x = artX;
        ldrAnim.y=200; 
        imgLdr.load(imgURL);
        artGrab++;
        artX+=481;
    }
}

private function onLoading(evt:ProgressEvent):void{
    var bytesToLoad:Number=evt.target.bytesTotal;
    var numberLoaded:Number=evt.target.bytesLoaded; // note it now refers to target of event
    var index:int=loaders.indexOf(evt.target); // should be valid
    var ldrAnim:AllLoader=animations[index]; // grab corresponding animation
    ldrAnim.progBar.scaleX = numberLoaded/bytesToLoad;
    var loadedPercent=Math.round(numberLoaded/bytesToLoad*100);
    ldrAnim.progPercent.text = loadedPercent +" %";
    trace("Loading..."+loadedPercent +"%");
} 
```

`onBGLoaded`作为一个教训，你自己对你的函数做同样的把戏。请注意，您必须`imgLdr`从事件中正确检索值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T02:33:51.447

发生的事情是您已经多次填充变量，每次都`ldrAnim`创建一个新变量。`AllLoader`当您调用 时`removeChild()`，第一次可以正常工作（有点——它将删除您创建的最后一个，无论它是否与加载的图像匹配）。当你`removeChild()`再次调用时，你调用的是你刚刚删除的同一个对象（它不再是你调用它的对象的子对象）。

解决此问题的一种方法是使用 a`Dictionary`并将每个`AllLoader`与该`Loader`图像相关联。当事件触发时，您可以根据事件的属性`COMPLETE`查找并删除它。`Alloader`

另一种解决方案是编写一个包装 an`AllLoader`和 a的 Class，`Loader`然后在 Loader 完成加载时自行处理两者之间的转换。

这可能看起来像这样：

```
公共类 LoadSwitcher 扩展 Sprite{
   受保护的变量加载器：加载器；
   受保护的 var allLoader:AllLoader;
   公共功能负载开关（网址）{
       极好的（）;
       装载机=新装载机（）；
       var request:URLRequest = new URLRequest(url);
       loader.contentLoaderInfo.addEventListener(Event.COMPLETE, switchLoaders);
       allLoader = new AllLoader(loader);//假设 AllLoader 现在具有监视加载程序完成百分比的逻辑
       loader.load（请求）；
       addChild(allLoader);
   }
   受保护的功能 switchLoaders(e:Event):void {
      removeChild(allLoader);
      addChild(加载器);
   }
}
```

然后只需为您的每一张专辑创建和定位其中之一。

# scripting - Powershell 脚本 - 在写作过程中，如何撤消？

> ID：15605264
> 
> 赞同：-1
> 
> 时间：2013-03-24T23:14:00.740
> 
> 标签：scripting, powershell-3.0

我是 powershell 的新手，因此发现我的手指按错了键，从而产生了 >> 符号。如何“撤消”以继续执行初始脚本？

例如：

```
$i=0; get-childitem $dirname | foreach-object {...rest of script and I miss closing a bracket or something then get... >> and can't remove that and continue writing script. 
```

我确信这是一个我还没有找到的简单组合键，但比关闭应用程序并重新打开要好。

非常感谢提前。

担

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T12:31:13.480

如果您只想“撤消”并重新开始编写脚本，您可以按：

```
Ctrl + C 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T00:27:49.807

该符号是续行。只要继续输入，就好像您没有按 Enter 一样，它会将所有内容视为您想要的完整行。

# c++ - 在运行时更改逻辑

> ID：15605265
> 
> 赞同：3
> 
> 时间：2013-03-24T23:14:17.813
> 
> 标签：c++

新的虚幻引擎 4 能够在运行时更改游戏逻辑。例如，您可以跳入游戏，更改一些游戏逻辑，一旦重新编译，它将在游戏本身中更新。

我想知道他们是怎么做到的？

我的第一个想法是他们将他们的游戏逻辑分离到一个 .dll 中，然后他们只是在运行时重新加载/注入它。但我也知道 .dll 是特定于 Windows 的。我认为linux中的等价物称为.elf。

有哪些选择？

我也知道有一个可用的 c++ 解释器，但我认为较新的版本现在使用 jit 编译器。这会对我有任何帮助吗？

我希望你能帮我把事情弄清楚。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T23:24:56.553

虚幻引擎通过使用**热重载**来实现这一点，它基本上（重新）编译已更改的源代码并将其重新加载回游戏中。编译时游戏将处于暂停状态。

[本演示文稿](http://www.bitsquid.se/presentations/cutting-the-pipe.pdf)更详细地介绍了该技术。

# android - 如何重置操作栏中的图标

> ID：15605267
> 
> 赞同：0
> 
> 时间：2013-03-24T23:14:27.733
> 
> 标签：android, android-actionbar

我在一个 android 程序中向我的 ActionBar 添加了一个 EditText 元素。单击该图标时，将出现 EditText 元素，并在按下回车键或回车键时输入和捕获数据。如何使 EditText 元素消失并重新出现图标？目前，EditText 字段仍保留在 ActionBar 中，并且图标已隐藏。下面是我的菜单 xml 文件。任何帮助表示赞赏。

```
 <menu xmlns:android="http://schemas.android.com/apk/res/android" >

<item
    android:id="@+id/action_settings"
    android:orderInCategory="100"
    android:showAsAction="never"
    android:title="@string/action_settings"/>
  <item
    android:id="@+id/herbsearch"
    android:title="HerbSearch"
    android:showAsAction="always"
    android:icon="@android:drawable/ic_menu_search"
    />
   <item
    android:id="@+id/locationchange"
    android:title="Change Location"
    android:showAsAction="ifRoom|collapseActionView"
    android:icon="@drawable/ic_launcher"
    android:actionLayout="@layout/search_layout"
    /> 
```

这是我的 EditText 布局。

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="match_parent"
android:orientation="horizontal" >

<EditText
    android:id="@+id/txt_search"
    android:inputType="text"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:background="#FFFFFF"
    android:textColor="#000000"
    android:textSize="15sp"
     android:singleLine="true"
     android:hint="Enter new location"
    android:imeOptions="actionDone"
/> 
```

下面是我的 onCreateOptionsMenu 逻辑。

```
 @Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    MenuInflater inflater = getMenuInflater();
    inflater.inflate(R.menu.main, menu);

    /** Get the action view of the menu item whose id is search */
    View v = (View) menu.findItem(R.id.locationchange).getActionView();

    /** Get the edit text from the action view */
    EditText locSearch = ( EditText ) v.findViewById(R.id.txt_search);
    locSearch.requestFocus();
    /** Setting an action listener */
    locSearch.setOnEditorActionListener(new OnEditorActionListener() {

        @Override
        public boolean onEditorAction(TextView v, int actionId, KeyEvent event) {
        //    Toast.makeText(getBaseContext(), "Search : " + v.getText(), Toast.LENGTH_SHORT).show();

            GetMap(String.valueOf(v.getText()));
            invalidateOptionsMenu();

            /** Get the edit text from the action view */
            EditText locSearch = ( EditText ) v.findViewById(R.id.txt_search);

        // I tried these next 3 instructions with no success
        //   locSearch.setVisibility(1);   

         //  v.setTextColor(Color.WHITE);

        //   v.setVisibility(1);
            return false;

        }
    });
   } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T01:04:27.963

尝试这个：

```
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.main, menu);

    final MenuItem locationItem = menu.findItem(R.id.locationchange);
    View v = (View) locationItem.getActionView();
    EditText locSearch = (EditText) v.findViewById(R.id.txt_search);
    locSearch.requestFocus();

    locSearch.setOnEditorActionListener(new OnEditorActionListener() {
        @Override
        public boolean onEditorAction(TextView v, int actionId, KeyEvent event) {
            if (actionId == EditorInfo.IME_ACTION_SEARCH || (event != null && event.getKeyCode() == KeyEvent.KEYCODE_ENTER)) {
                locationItem.collapseActionView();
                return true;
            }
            return false;
        }
    });
} 
```

我添加了最后一行 MenuItem locationItem = menu.findItem(R.id.locationchange); 检索位置更改菜单项，我正在调用 locationItem.collapseActionView(); 摆脱动作视图/搜索视图。

# java - “很遗憾， 已停止。” 常见的无法解释的错误

> ID：15605270
> 
> 赞同：0
> 
> 时间：2013-03-24T23:14:50.023
> 
> 标签：java, android

我在调试响应用户输入的应用程序时遇到问题。一个只显示文本的普通应用程序可以正常工作，但是当我给一个按钮一个事件处理程序时，我会收到一条通用消息“不幸的是，'应用程序名称'已停止。”。我尝试了很多解决方案，但无济于事。我正在使用 IntelliJ IDEA 12.0.4（社区版）。很抱歉问了一个非常常见的问题，但似乎每个人的解决方案都不同。

**编辑 - 新的工作代码**

源代码：

```
package com.example.Android_Test;

import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;

import static com.example.Android_Test.R.*;

public class MyActivity extends Activity {

    EditText editText;
    TextView textView;

    /**
     * Called when the activity is first created.
     */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        //  Declare all widget controls.
        editText = (EditText) findViewById(R.id.txtEdit);
        Button button = (Button) findViewById(R.id.btnChange);
        textView = (TextView) findViewById(R.id.lblText);

        button.setOnClickListener(listener);
    }

    View.OnClickListener listener = new View.OnClickListener() {
        @Override
        public void onClick(View v) {
            textView.setText(editText.getText());
        }
    };
} 
```

主要的.xml

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
              android:orientation="vertical"
              android:layout_width="fill_parent"
              android:layout_height="fill_parent"
              android:id="@+id/layout">
    <EditText
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:id="@+id/txtEdit" android:layout_gravity="left|center_vertical"
            android:layout_alignParentLeft="true" android:layout_marginLeft="0dp" android:layout_alignParentTop="true"
            android:layout_marginTop="0dp" android:layout_alignParentRight="true" android:hint="Type here change text"/>
    <Button
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Change Text"
            android:id="@+id/btnChange"
            android:layout_alignLeft="@+id/txtEdit" android:layout_below="@+id/txtEdit"
            android:layout_alignRight="@+id/txtEdit"/>
    <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Change this text"
            android:id="@+id/lblText"
            android:layout_alignLeft="@+id/txtEdit" android:layout_below="@+id/btnChange"
            android:layout_alignRight="@+id/txtEdit" android:textSize="18dp"/>
</RelativeLayout> 
```

Logcat 很长，所以我把它贴在这里：[http](http://pastebin.com/2qaY8ZJj) ://pastebin.com/2qaY8ZJj 。每个人的Logcat都这么短我不知道为什么

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T23:28:24.987

移动此代码

```
//  Declare all widget controls.
    EditText editText = (EditText) findViewById(R.id.txtEdit);
    Button button = (Button) findViewById(R.id.btnChange);
    TextView textView = (TextView) findViewById(R.id.lblText); 
```

在里面`onCreate()`并使用 R.id....

**编辑**

我编辑了你的代码

```
public class MyActivity extends Activity {

    EditText editText;
    TextView textView;

    /**
     * Called when the activity is first created.
     */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        //  Declare all widget controls.
         editText = (EditText) findViewById(R.id.txtEdit);
        Button button = (Button) findViewById(R.id.btnChange);
        textView = (TextView) findViewById(R.id.lblText);

        button.setOnClickListener(listener);
    }

    View.OnClickListener listener = new View.OnClickListener() {
        @Override
        public void onClick(View v) {
            textView.setText(editText.getText().toString);
        }
    };
} 
```

# codeigniter - CodeIgniter 路由器在特定服务器上不起作用

> ID：15605271
> 
> 赞同：0
> 
> 时间：2013-03-24T23:14:50.703
> 
> 标签：codeigniter, routes

我正在开发一个单页网站，因此所有路由都应该指向默认路由器。这就是我通过 routes.php 文件实现的方式：

```
$route['default_controller'] = "home";
$route['404_override'] = '';
$route['admin'] = 'admin/home'; 
$route['^/'] = "home";

$route['(.*)'] = $route['default_controller']; 
```

这在测试服务器和本地主机上按预期工作，但在实际服务器上，当我尝试查找任何页面时，我收到 404 错误。有什么想法可能是错的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T16:59:35.757

```
$route['default_controller'] = "home";
$route['404_override'] = "home/index";   
$route['.*'] = "home/index/$1" 
```

# c# - SQL 语法错误（Windows 形式，C#）

> ID：15605277
> 
> 赞同：-1
> 
> 时间：2013-03-24T23:15:19.803
> 
> 标签：c#, sql

我正在尝试将一些数据插入我的表中，这就是我尝试这样做的方式

```
INSERT INTO OrdersDetail 
Values (" + OrderId.Text + ", (SELECT IdProduct FROM Products WHERE ProductName = '" + listBox1.Text + "'), '" + TypeOfProductComboBox.Text + "', '" + OrderQuantity.TextAlign + "', '" + TotalCost.Text + "'"); 
```

我收到错误我认为我的语法错误，我在查询中使用查询来获取产品 ID。

列是：

```
OrderId (int)
ProductId(int)
ProductName(Nvarchar)
OrderQuantity(Nvarchar)
TotalCost(NvarChar) 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T23:16:48.137

你把你的内心`SELECT`置于`'`. 应该：

```
var query = "INSERT INTO OrdersDetail Values (" + OrderId.Text + ", (SELECT IdProduct FROM Products WHERE ProductName = '"+ listBox1.Text + "'), '" + TypeOfProductComboBox.Text + "', '" + OrderQuantity.TextAlign + "', '" + TotalCost.Text + "')"); 
```

例如，如果`TotalCost.Text`是 SQL 中的数字数据类型，请使用

```
"..." + OrderQuantity.TextAlign + "', " + Convert.ToDouble(TotalCost.Text) + ")"; 
```

正如 pswg 所说：这是对 SQL 注入开放的。将其替换为参数化版本！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T23:19:53.813

我认为问题出在第一行和您的内部`Select`。

*这应该工作*

```
INSERT INTO OrdersDetail 
Values ('" + OrderId.Text + "',(SELECT IdProduct FROM Products WHERE ProductName ='"+ listBox1.Text + "')," + TypeOfProductComboBox.Text + "','" + OrderQuantity.TextAlign + "','" + TotalCost.Text + "'"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T23:28:18.373

问题是您缺少最后一个括号，查询应该以`"')"`而不是结束`"'"`。初始代码以左括号开头，这就是您没有收到编译错误的原因。

但是你不应该创建这样的sql查询，使用[Parameters](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlparameter.aspx)来避免SQL注入攻击。你的代码容易受到他们的攻击。

# c# - 通过 localhos 访问 WCF 服务有效，但通过我的公共 ip 它没有

> ID：15605280
> 
> 赞同：0
> 
> 时间：2013-03-24T23:15:40.633
> 
> 标签：c#, wcf, wcf-hosting, wcf-http

我有一个自托管的 WCF 项目，当我进入时我完成了它的工作：

> http:// `localhost`:8000/服务/方法

但是当我尝试`localhost`用我的公共 IP 替换并通过另一台计算机访问该服务时，它不起作用。

我在路由器中打开了端口，但仍然无法正常工作

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T09:22:20.327

公共 IP 是直接在您托管服务的计算机上配置的，还是路由器的公共 IP？如果是第二种情况，您是否在路由器上添加了一条规则，以使用端口转发将端口 8000 上的传入流量定向到主机计算机端口 8000。正如@Milan 所指出的那样，您还应该在托管计算机上设置防火墙来免除端口 8000

# javascript - 使用原型模式将实例值保存在 javascript 类中

> ID：15605281
> 
> 赞同：0
> 
> 时间：2013-03-24T23:15:42.880
> 
> 标签：javascript, prototype

我承认我四处乱窜，将不同作者的代码拼凑在一起，试图找出 javascript 原型。

我是原型概念的新手，希望在我的类中有一些可以使用方法修改的实例变量。

本质上，这就是我正在尝试的。这是从网上抄袭和修改的：

```
var MyGlobe = function () {
    var self = this;
    self.variable1 = null;
    return self;
}

MyGlobe.prototype = function () {
    var setup = function () {
        this.variable1 = 33;
    };
     return {
        setup:setup
    };
 }(); 
```

...所有这一切的重点是我可以`setup`在实例上调用该方法`MyGlobe`并`variable1`正确设置：

```
var aGlobe = new MyGlobe();
aGlobe.setup();

//aGlobe.variable1 is 33 now 
```

这实际上似乎有效，但我不确定原作者为什么这样做？例如，`self.variable1`开头的位有什么意义？

是否最好输入：

```
MyGlobe.prototype.variable1;
MyGlobe.prototype.variable2;
//.... 
```

我还认为如果您认为您的类将在回调函数中使用，您会做类似的事情`self=this`，但这里似乎不是这种情况？（很高兴被显示错误。）

我不确定这里有哪些最佳实践，并想了解更多。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T14:54:01.133

> 这实际上似乎有效，但我不确定原作者为什么这样做？例如，开头的 self.variable1 位有什么意义？

无（用于 using `self`），“实例属性声明”（即使只是将它们初始化为`null`）可以帮助引擎使用内存效率更高的内部结构——尽管这并不是真正必要的。

> 例如，如果您认为您的类将在回调函数中使用，我还认为您会执行类似 self=this 的操作，但这里似乎并非如此？

确切地。这个小片段真的应该重写为

```
var MyGlobe = function () {
    this.variable1 = null;
}
MyGlobe.prototype.setup = function() {
    this.variable1 = 33;
}; 
```

> 在构造函数 ( `self.variable1`) 中声明实例变量而不是将它们添加到原型 ( `MyGlobe.prototype.variable1`) 中是否更好？

这很简单。在原型上，它不再是*实例*属性。并且请区分*变量*（比如`self`- 是函数的局部范围）和*属性*（比如`prototype`,`setup`或`variable1`- 在对象上是“公共的”）。

# c# - c#编辑时将值绑定到组合框

> ID：15605282
> 
> 赞同：0
> 
> 时间：2013-03-24T23:15:44.897
> 
> 标签：c#, combobox, windows-forms-designer

我有一个 Windows 窗体应用程序，其中有几个组合框填充了 sql 数据库表值。

这是一个代码示例：

```
public void brandSelectCB(ComboBox cb)
    {
        string sSQL = " SELECT" +
                      "      id, name" +
                      "  FROM" +
                      "      tbBrand" +
                      "  ORDER BY" +
                      "      name";

        sqlConnect connect = new sqlConnect();
        DataTable dt = new DataTable();
        dt = connect.getBD(sSQL);

        cb.DataSource = dt;
        cb.DisplayMember = "name";
        cb.ValueMember = "id"; 
```

我的主表单有几条记录，例如：型号、品牌、类型，当我想编辑特定记录时，我选择记录并单击编辑按钮，将值输入到相应的文本框和组合框中，如下所示：

```
private void btnEdit_Click(object sender, EventArgs e)
    {

            this.txtID.Text = lvMain.SelectedItems[0].SubItems[0].Text;
            this.cbBrand.SelectedText = lvMain.SelectedItems[0].SubItems[1].Text;
            this.cbModel.SelectedText = lvMain.SelectedItems[0].SubItems[2].Text;
            this.txtName.Text = lvMain.SelectedItems[0].SubItems[3].Text;
            this.cbType.SelectedText = lvMain.SelectedItems[0].SubItems[4].Text;
    } 
```

工作正常，我将文本发送到组合框和 texboxes，但未选择组合框的值，只有文本。如果我选择`SelectedValue`或者`SelectedItem`我什么都得不到。我有来自所选项目的相应文本，但我必须重新选择组合框中的值:(

我清楚了吗？:P

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T12:10:23.250

我让它像这样工作：

```
int xcb;
xcb = this.cbBrand.FindString(lvMain.SelectedItems[0].SubItems[1].Text);
this.cbBrand.SelectedIndex = xcb; 
```

# matlab - 提供量化视觉反馈的最简单方法

> ID：15605286
> 
> 赞同：0
> 
> 时间：2013-03-24T23:16:02.540
> 
> 标签：matlab, feedback

我的问题可能看起来有点不寻常，但我相信这可能是合适的地方。我正在为我的研究做一个项目，我必须根据他们的大脑活动向他们提供视觉反馈。他们可以做两件事来获得奖励，而这两件事中的一件应该比另一件付出更多。人们这样做的通常方式是使用增大尺寸的条形图。但是，我觉得这有点无趣，我想让它更有趣（或不那么无聊）。

不那么无聊的事情是，例如一个气球在天空中慢慢升起；小的奖励将是速度的暂时提升；最大的回报将是速度的更大提升。不幸的是，我没有足够的时间来进行编程，因此我向您提出问题：实现这样的事情的最简单方法是什么？它可能非常原始。唯一重要的是有一些东西给人一种它移动的印象，那就是加速/减速。

PS 如果您想知道编程语言，那么我的其余设置是在 Matlab 中完成的，所以如果您可以使用它提出一些建议，我会非常高兴。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T00:01:11.627

这是一个在 Matlab 中制作移动气球动画的简单程序。我使用了来自谷歌的气球的 jpg 图像。

```
im = imread('balloon.jpg'); % read in image file
im = flipdim(flipdim(im,1),2); % invert the image or it will display upside down
s = size(im);
fig = figure();
xDim = 10*s(1); % set the x dimension of the figure to 10 times the size of the image
yDim = 10*s(2); % same for y
axis([0,xDim,0,yDim])

v = 100; % the distance moved by the image each time step 
for d = 1:v:1000
    x = round(xDim/2).*ones(1,s(1));
    y = d:(d+s(2));
    image(x,y,im) 
    axis([0,xDim,0,yDim])
    set(gca,'xaxislocation','bottom','yaxislocation','left','xdir','normal','ydir','normal')
    pause(1) % pause after displaying the image
end 
```

要使气球移动得更快，您可以增加 v 或减少暂停时间。希望您可以将其合并到程序的其余部分中。

# applescript - 使用 applescript 打印到标准输出

> ID：15605288
> 
> 赞同：20
> 
> 时间：2013-03-24T23:16:14.917
> 
> 标签：applescript

我正在尝试从终端运行 AppleScript 脚本，但是我无法通过调用它来打印任何内容

```
 osascript myFile.scpt "/path/to/a/file" 
```

我正在努力：

```
on run fileName

set unique_songs to paragraphs of (read POSIX file fileName)

repeat with nextLine in unique_songs
    if length of nextLine is greater than 0 then
        set AppleScript's text item delimiters to tab
        set song to text item 2 of nextLine
        set artist to text item 3 of nextLine
        set album to text item 4 of nextLine

        set output to ("Song: " & song & " - " & artist & " - " & album)
        copy output to stdout
    end if
end repeat
end run 
```

制表符分隔文件的格式如下：

```
1282622675  Beneath the Balcony Iron & Wine The Sea & the Rhythm    
1282622410  There Goes the Fear Doves   (500) Days of Summer        
1282622204  Go to Sleep. (Little Man Being Erased.) Radiohead   Hail to the Thief 
```

选项卡在此方面并没有很好地显示:(

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-11-14T09:34:10.687

使用 运行 AppleScript 时`#!/usr/bin/osascript`，您可以在脚本末尾使用 return 语句返回所需的文本输出。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-03-24T23:49:03.897

它不是很清楚你是如何在终端中运行它的。但我会假设你已经用 `#!/usr/bin/osascript` [shebang](https://en.wikipedia.org/wiki/Shebang_(Unix))保存了一个 applescript 文本文件，并 `chmod`'ed 文件以便能够执行它。

然后在终端中调用该文件，只需使用文件的路径即可。

```
#!/usr/bin/osascript

#Here be the rest of your code ...

set output to ("Song: " & song & " - " & artist & " - " & album)

    do shell script "echo " & quoted form of output
end tell 
```

**更新**2，回应评论。

如果我有一个制表符分隔的文本文件，其内容为：

```
track   Skin Deep   Beady Belle Closer 
```

标签设置如下：track****TAB****Skin Deep****TAB****Beady Belle****TAB****Closer

脚本文件为：

```
on run fileName

    set unique_songs to paragraphs of (read POSIX file fileName)

    repeat with nextLine in unique_songs
        if length of nextLine is greater than 0 then
            set AppleScript's text item delimiters to tab
            set song to text item 2 of nextLine
            set artist to text item 3 of nextLine
            set album to text item 4 of nextLine

            set output to ("Song: " & song & " - " & artist & " - " & album)
            do shell script "echo " & quoted form of output
        end if
    end repeat

end run 
```

然后在终端运行：

```
/usr/bin/osascript ~/Documents/testOsa2.scpt ~/Documents/testTab.txt 
```

我回来了：

```
*Song: Skin Deep - Beady Belle - Closer* 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2020-01-02T09:42:09.300

根据第一个答案弄清楚了这一点：

```
copy "Hello World!" to stdout 
```

# php - 将浮点数舍入到百位

> ID：15605291
> 
> 赞同：1
> 
> 时间：2013-03-24T23:16:37.213
> 
> 标签：php, floating-point, rounding

我正在用 PHP 进行一些计算，得到的数字看起来像 0.20758605003357。

我如何四舍五入，所以在这种情况下输出为 0.21。或者更一般地，这样数字，无论它是什么，都四舍五入到百分之一。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T23:19:47.000

使用 PHP 的`round`函数：

```
echo round($number, 2); 
```

见：[http ://www.php.net/manual/en/function.round.php](http://www.php.net/manual/en/function.round.php)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-24T23:18:09.563

```
number_format($number,2); 
```

第二个参数是小数点后的位数。

此外，还有 money_format （如果你想要四舍五入的话）。美元：

```
money_format('%i',$number); 
```

# php - 在过滤器上隐藏特定的表格行？

> ID：15605295
> 
> 赞同：0
> 
> 时间：2013-03-24T23:17:18.260
> 
> 标签：php, javascript, jquery, html

我目前正在使用 JS/jQuery/PHP 并编写了以下代码：

[http://cole.quinnchrzan.com/tv](http://cole.quinnchrzan.com/tv)

我希望进一步利用 JS/jQuery 来隐藏具有 colspan 属性的 td 的所有父级（tr），当我运行搜索查询时，这些父级不会立即由可见行继续进行（它隐藏了找不到搜索字符串的所有行）。更简单地说，我希望在执行搜索时隐藏表中无关的时间行。目前，我将过滤器功能设置为仅搜索没有 colspan 属性的表格单元格（即不是时间单元格）。这意味着所有时间行将始终可见。

对于懒惰的人，这是我的搜索功能：

```
function filter(selector, query) {
    query = $.trim(query);
    query = query.replace(/ /gi, '|');

    $(selector).children('td:not([colspan])').each(function() {
        ($(this).parent().text().search(new RegExp(query, "i")) < 0) ? $(this).parent().hide() : $(this).parent().show();
    });
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T23:35:41.127

```
$('td[colspan]:visible').parent().each(function() {
    if($(this).siblings().first().children('td[colspan]').length > 0) {
        $(this).toggle();
    }
}); 
```

# javascript - 在对话框中使用 jQuery Resizable Helper

> ID：15605298
> 
> 赞同：9
> 
> 时间：2013-03-24T23:17:51.307
> 
> 标签：javascript, jquery, css, jquery-ui-resizable

如何在[Dialog上使用](http://jqueryui.com/dialog/)[jQuery Resizable的](http://jqueryui.com/resizable)[Helper](http://jqueryui.com/resizable/#helper)功能（仅在容器调整大小时显示框架）？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-27T16:30:05.620

[这个答案](https://stackoverflow.com/a/11102228/238722)解释了如何实现你正在寻找的东西。这是一个有效的[jsFiddle](http://jsfiddle.net/5VheS/2/)。

答案有一个缺陷：如果对话框被缩小，调整大小手柄会位于对话框下方。这是通过`z-index: 10000 !important;`. 此处链接的 jsFiddle 包含修复程序。

* * *

**HTML：**

```
<div id="dialog" title="Basic dialog">
    <p>This is the default dialog which is useful for displaying information. The dialog window can be moved, resized and closed with the 'x' icon.</p>
</div> 
```

**CSS：**

```
.ui-resizable-helper {
    border: 2px dotted #00F;
    z-index: 10000 !important;
} 
```

**JavaScript：**

```
$("#dialog").dialog().dialog('widget').resizable('destroy').resizable({
    helper: "ui-resizable-helper"
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T03:57:37.603

根据这个 - [http://forum.jquery.com/topic/specify-drag-and-resize-option-for-dialogs](http://forum.jquery.com/topic/specify-drag-and-resize-option-for-dialogs)它应该可以通过这样做：

```
dlg.dialog('widget').resizable('option','helper','ui-resizable-helper') 
```

但不幸的是，jQueryUI ( [http://bugs.jqueryui.com/ticket/6723](http://bugs.jqueryui.com/ticket/6723) ) 中有一个错误阻止了它的工作。

一种可能的解决方案是使用 jQueryUI`resizable`而不是`dialog`. 取决于您对`dialog`'s 功能的依赖程度。

# cakephp - 通过 CakePHP 中的 belongsTo 表指定订单参数不起作用？

> ID：15605299
> 
> 赞同：0
> 
> 时间：2013-03-24T23:17:54.113
> 
> 标签：cakephp, cakephp-2.0

即使在通过“[通过 CakePHP 中的 belongsTo 表指定订单参数](https://stackoverflow.com/questions/1489981/specifying-order-parameter-through-a-belongsto-table-in-cakephp)”进行挖掘之后，我似乎也无法对属于存储在另一个表中的实体的表中的条目进行排序。

本质上，我有一个教程模型，它有很多练习。每个练习都属于教程（当然），也属于一个练习类别。当我设置 recursive = 2 并找到一个给定的教程时，我想返回一个练习行列表，首先按 ExerciseCategory.title 排序，然后按 Exercise.sequence_number 排序。

**所以这是我的问题：** 我的好主意/骇人听闻的想法是根据原始的 exercise_category_id 对查询结果进行排序，如下所示：

```
class Exercise extends AppModel {
    public $belongsTo = array( 
        'Tutorial', 
        'ExerciseCategory' 
    );

    public $order = array( 'exercise_category_id' => 'ASC',  // <=========
                           'sequence_number' => 'ASC');      // <========= 
```

我也不明白为什么这不起作用。它产生以下 SQL 查询：

```
SELECT `Exercise`.`id`, `Exercise`.`exercise_category_id`, 
`Exercise`.`tutorial_id`, `Exercise`.`sequence_number`, 
`Exercise`.`body` 
FROM `Tutorial`.`exercises` AS `Exercise` 
WHERE `Exercise`.`tutorial_id` = (1) 
```

根据 CakePHP 文档，查询中似乎应该有一个 ORDER BY 子句，但没有。

我需要做什么才能获得按锻炼类别 ID 编号排序的练习行，以便按照我想要的方式对它们进行分组？

“[通过 CakePHP 中的BelongsTo 表指定订单参数](https://stackoverflow.com/questions/1489981/specifying-order-parameter-through-a-belongsto-table-in-cakephp)”建议像这样设置Exercise.php 模型文件：

```
class Exercise extends AppModel {
    public $belongsTo = array( 
        'Tutorial', 
        'ExerciseCategory' => 
            array(
                'order' => array('ExerciseCategory.title'=>'asc', 'Exercise.sequence_number' => 'asc'))
    ); 
```

但这会产生错误的 SQL 查询：

```
SELECT `ExerciseCategory`.`id`, `ExerciseCategory`.`explanation`, 
`ExerciseCategory`.`title` 
FROM `Tutorial`.`exercise_categories` AS `ExerciseCategory` 
WHERE `ExerciseCategory`.`id` = 2 
ORDER BY `ExerciseCategory`.`title` asc, `Exercise`.`sequence_number` asc 
```

问题（正如 CakePHP 有用地指出的那样）是 CakePHP 没有在查询中包含练习表。

**编辑：** 这是实际生成各种查询的代码：

```
$this->Tutorial->recursive = 2;
$this->Tutorial->Chapter->unbindModel(array('hasMany' => array('Tutorial')));
$this->Tutorial->Exercise->unbindModel(array('belongsTo' => array('Tutorial')));
$this->Tutorial->Section->unbindModel(array('belongsTo' => array('Tutorial')));
$tut = $this->Tutorial->findById($id); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T05:16:12.507

当 CakePHP 生成查询以拉入关联模型时，它实际上创建了完全独立的查询。因此，当您使用`recursive`*cringe*（或 Containable *yay!*）时，您不能按关联模型排序，因为这些表甚至不会在查询中。

如果您需要按关联模型订购，则需要使用[JOINs](http://book.cakephp.org/2.0/en/models/associations-linking-models-together.html#joining-tables)。这样，您将有一个查询，并且可以以任何方式对您想要的任何表进行排序......等等。

**其他有用的东西：**

1.  设置`$recursive = -1;`在您的 AppModel 中，然后忘记您曾经听说过它。我保证，从长远来看，你会感谢我的。请改用[CakePHP 的 Containable Behavior](http://book.cakephp.org/2.0/en/core-libraries/behaviors/containable.html)。当第一次学习时递归很酷，只是为了快速理解“很酷 - 你可以将模型相互关联”......但除此之外，它会导致更多的问题而不是它的帮助。如果 Containable 没有很好地填补这个利基市场，也许我们需要使用递归，但是......确实如此，所以我们不这样做:)

2.  如果您需要有关查询问题的帮助，通常最好发布您实际用于生成它的代码。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T07:04:42.800

所以，呃，事实证明——我可以做我希望做的事，但我需要将 order 子句放在Tutorial的**hasMany字段中，***而不是*Experiment的**belongsTo**字段：

```
class Tutorial extends AppModel {
    public $belongsTo = array('Chapter');
    public $hasMany = array('Section', 
        'Exercise' => 
            array(
                'order' => array('Exercise.exercise_category_id'=>'asc', 'Exercise.sequence_number' => 'asc'))); 
```

这更有意义，但似乎直接与[通过 CakePHP 中的 belongsTo 表指定顺序参数](https://stackoverflow.com/questions/1489981/specifying-order-parameter-through-a-belongsto-table-in-cakephp)相矛盾（诚然，这是 4 年前发布的）。

我将给这个几天，看看其他人是否可以在标记答案之前发布一个更好的方法（即，示例代码演示如何按关联模型中的字段排序，而不是按关联模型的 id 列）。

# c++ - 在纸上浏览 C++ 代码，你会怎么做？

> ID：15605301
> 
> 赞同：8
> 
> 时间：2013-03-24T23:18:04.923
> 
> 标签：c++

在我的编程课上，我们有基于代码示例的测试和测验，我们必须通过这些示例并确定最终输出。通常它们是一些棘手的代码，当我意识到时，我被困在一些随机函数中，不知道我在做什么。

你如何正确地运行纸上的代码？跟踪循环、变量、函数，一切都让我感到困惑。

例如，这是我们过去的一个测验，我得到了 100%，但它花了我很长时间，而且非常混乱：

```
#include <iostream>
#include <cstring>
using namespace std;

class foo {
     char word[20];
     int qty;

public:
     foo( ) { set(3, 5); }

     foo( int m, const char * s) { set(m, m+1);
                                   strcpy(word, s);       }

     foo(  const foo& a ) { cout << "... hahaha.1" << endl;
                qty = 3 + a.qty;
                strcpy( word, a.word );
                strcat( word, ".5.6.7" );
                cout << "... hahah.2" << endl;  }

     ~foo( ) { cout << qty << "," << word << "!!!" << endl; }

     void set(int a, int b){ qty = a + b;
                             strcpy( word, "summer" ); }
     void wow();

     void output(){ cout << word << "," << qty << endl;  }
};

void hello( foo& );
void greet( foo );

int main() {

     foo x, y(100, "QUIZ");

     greet( y );
     cout << "a.b.c.d.e." << endl;

     hello( x );
     x.output();
     y.output();

     cout << "...the end" << endl;
     return 0;
}

void foo::wow() { strcat(word,".1.2.3");
                  qty += 4;     }

void greet( foo g ) { cout << "...HI.1\n";
                      g.wow(); 
                      g.output(); 
                      cout << "...HI.2\n"; }

void hello(foo & h) {  cout << "...hello.1" << endl;
                foo e;

                e = h;
                h.wow();
                h.output();
                e.output();
                cout << "...hello.2\n"; } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T23:25:50.170

实践是理解代码的最佳方式。当我尝试进行这样的锻炼时，我并不是一开始就试图了解所有功能。我从 main 开始，就像调试器一样逐行观察所有变量。如果某事让您感到困惑，只需将所有变量写在纸上并标记它们的每一个变化。但是，没有任何方法可以比培训更好更快地学习阅读和理解代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T23:31:54.783

“像电脑一样思考”

您有一个程序和该程序正在使用的数据。

你需要知道你在程序中的位置。这确实需要一个堆栈，因为当您调用方法时，您必须知道方法结束时返回到哪里。

您需要跟踪每个变量 - 当然变量可以是方法调用的本地变量，因此这些变量实际上也是一个堆栈，这就是您必须非常小心的地方，以确保您正在更改正确的本地实例多变的。全局变量很容易，因为只有一个副本，因此您可以将它们放在堆栈中，但就在底部。

要在纸上工作，最简单的方法是将堆栈底部放在页面顶部并向下扩展堆栈。请记住，当一个方法返回时，它的局部变量不再存在，所以将它们擦掉或以某种方式标记堆栈的顶部。

如果您正在执行任何多线程，事情会变得更加有趣......

# python - 尝试通过 python 中的 cmd 命令重命名目录时出错

> ID：15605303
> 
> 赞同：0
> 
> 时间：2013-03-24T23:18:09.580
> 
> 标签：python, cmd, tkinter

我有这段试图重命名目录的 python/tkinter 代码。当 call() 被执行时，它会引发错误。

```
if os.path.exists(self.destDirectory):
    self.now = datetime.datetime.now()
    print(self.now)
    self.now = str(self.now.strftime("%Y_%m_%d_%H_%M"))
    print('rename {0} {1}'.format(self.destDirectory, 'old_' + self.now))
    self.cmd1 = ('rename {0} {1}'.format(self.destDirectory, 'old_' + self.now))
    self.returnCode1 = call(self.cmd1) 
```

错误：

```
Exception in Tkinter callback Traceback (most recent call last):  
File "C:\Python32\lib\tkinter\__init__.py", line 1399, in __call__
    return self.func(*args)
File "C:\EclipseWorkspaces\csse120\Myproject\src\BoxRestore.py", line 95, in proceed
    self.returnCode1 = call(self.cmd1)
File "C:\Python32\lib\subprocess.py", line 467, in call
    return Popen(*popenargs, **kwargs).wait()
File "C:\Python32\lib\subprocess.py", line 741, in __init__
    restore_signals, start_new_session)
File "C:\Python32\lib\subprocess.py", line 960, in _execute_child
    startupinfo)
WindowsError: [Error 2] The system cannot find the file specified 
```

但是当我这样做时：

```
print('rename {0} {1}'.format(self.destDirectory, 'old_' + self.now)) 
```

并在 cmd 中执行它，我没有收到任何错误。

另一个命令不会抱怨：

```
self.cmd2 = ('xcopy {0} {1} /I /E'.format(self.values['sourceButton'], self.values['destinationButton']))
self.returnCode = call(self.cmd2) 
```

你能帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T00:48:47.803

你应该使用这个：

```
if os.path.exists(self.destDirectory):
    self.now = datetime.datetime.now()
    print(self.now)
    self.now = str(self.now.strftime("%Y_%m_%d_%H_%M"))
    print('rename {0} {1}'.format(self.destDirectory, 'old_' + self.now))
    os.rename( self.destDirectory, 'old_' + self.now ) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T01:33:44.387

Windows 上没有“重命名”程序。

`cmd.exe`相反，“重命名”是命令提示程序 ( )中的内置命令。因此，当您在命令提示符下键入“重命名”时，它会被`cmd.exe`.

当您使用 Python 的`subprocess`模块运行程序时，（默认情况下）它不使用`cmd.exe`，它会尝试运行实际程序。这对`rename`. 您可以通过将`shell=True`选项传递给`subprocess.call`; 如果你这样做，那么它应该工作。（如果您从 Internet 或其他您不信任的地方获取命令行的任何部分，这也会引入一个安全漏洞，这就是它不是默认设置的原因）。

但是使用`os.rename()`是一个**更好**的解决方案——你可以获得更好的错误处理，你的程序将更快、更可靠、更安全、更简单、更容易被其他程序员理解，并且可以移植到 Linux/Mac。（“更可靠”的一个示例：如果目录名称包含空格，您当前的代码会中断；但`os.rename()`会正常工作）。

# sql - 卡在一个稍微棘手的查询上，试图忽略基于单个字段的多个结果

> ID：15605306
> 
> 赞同：1
> 
> 时间：2013-03-24T23:18:28.943
> 
> 标签：sql

这是我坚持的简单数据库表示：

```
IDNumber     TimeSpent         Completed
 1              0                  No
 1              0                  No
 1              2                  No
 2              0                  No
 3              0                  No 
```

我目前正在查询数据库......

```
"SELECT Distinct (IDNumber) AS Info FROM TestTable
                                    ORDER BY WorkOrderNumber"; 
```

它给了我结果

```
1
2
3 
```

这是预期的。

现在，我想将其调整为任何具有 TimeSpent != 0 或 Completed != No 的 IDNumber 实例意味着 IDNumber 根本没有被抓取。因此，例如在给定的数据库中，由于 TimeSpent = 2，我根本不希望在查询中返回 IDNumber 1。

我的第一直觉是跳到这样的地方......

```
"SELECT Distinct (IDNumber) AS Info FROM TestTable
                                    WHERE TimeSpent='0' AND Completed='No'
                                    ORDER BY WorkOrderNumber"; 
```

但显然那是行不通的。它会正确地忽略其中一个 IDNumber 1，但由于另外两个仍然满足 WHERE 子句，它仍然会返回 1。

这里有任何指示吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T23:21:10.753

```
SELECT DISTINCT IDNumber
FROM TestTable
WHERE IDNumber NOT IN 
    (SELECT IDNUmber FROM TestTable WHERE TimeSPent <> 0 OR Completed <> 'No') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T23:27:05.347

您可以使用一个`having`子句通过聚合来执行此操作：

```
select IDNumber
from TestTable
group by IDNumber
having sum(case when TimeSpent = 0 then 1 else 0 end) = 0 and 
       sum(case when Completed = 'No' then 1 else 0 end) = 0 
```

该`having`子句计算满足每个条件的行数。这`= 0`只是说没有匹配项。

我更喜欢聚合方法，因为它在您可以对组设置的条件方面更加灵活。

# uitableview - 如何显示在另一个类中实现的表格视图

> ID：15605309
> 
> 赞同：0
> 
> 时间：2013-03-24T23:18:52.677
> 
> 标签：uitableview, uiviewcontroller

我想通过仅使用一个子类来生成自定义表格视图，在其相应的视图中显示不同的内容。当表格视图充满数据时，我想将整个视图发送到特定视图并显示它。

当我在显示视图控制器上生成表格视图时，没有问题。即使我可以将表视图从显示视图控制器转移到另一个视图，但是当我尝试在另一个类中生成表视图并尝试从根视图控制器调用它时，我只会得到一个已初始化但为空的表视图。

这是代码：

表视图生成器.h

```
#import <UIKit/UIKit.h>
@interface TableViewGenerator : UIViewController <UITableViewDataSource, UITableViewDelegate>
- (UITableView *) getTableViewForOtherVC;
@property (nonatomic, strong) IBOutlet UITableView *spreadSheet;
@end 
```

表视图生成器.m

```
...

- (UITableView *) getTableViewForOtherVC {
    if (!self.spreadSheet) {
        self.spreadSheet = [[UITableView alloc]initWithFrame:CGRectMake(0., 0., self.view.frame.size.width, self.view.frame.size.height/2.5) style:UITableViewStyleGrouped];
    }
    UITableView *tableViewToBeTransfered = self.spreadSheet;
    return tableViewToBeTransfered;
}
...
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
    return 1;
}
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    static NSString *cellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:cellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:cellIdentifier];
    }
    cell.textLabel.text = @"Test";
    return cell;
} 
```

显示VC.m

```
#import "DisplayingVC.h"
#import "TableViewGenerator.h"

@interface CTTOVViewController ()

@end

@implementation CTTOVViewController

- (void)viewDidLoad{
    [super viewDidLoad];
    UITableView *spreadSheet1;
    if (!spreadSheet1) {
        TableViewGenerator *tableVC = [[TableViewGenerator alloc]init];
        spreadSheet1 = [tableVC getTableViewForOtherVC];
        [self.view addSubview:spreadSheet1];
    }
}
...
@end 
```

我想我在填表时做错了什么，但我找不到什么。任何提示将不胜感激。

先感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T23:34:15.193

您似乎没有在任何地方设置表视图的 dataSource 和委托属性，因此您需要正确设置这些属性。

在另一个方面，如果您生成模型而不是 UITableView 本身，那么您尝试完成的工作可能会容易得多。我建议查看免费的 Sensible TableView 框架提供的模型，因为它们可以为您节省大量时间。

# php - 复选框的 javascript Jquery 和 php 按钮有问题

> ID：15605318
> 
> 赞同：1
> 
> 时间：2013-03-24T23:19:50.637
> 
> 标签：php, javascript, html

我对这段代码有疑问：

```
jQuery(".cb-disable").click(function(){
var parent = jQuery(this).parents('.switch');
var vid =this.id;
jQuery('#'+vid).attr('id','');
jQuery('#'+vid).attr('id','');
jQuery('.cb-enable',parent).removeClass('selected');
jQuery(this).addClass('selected');
jQuery('input[name='+vid+'-off]').attr('checked', true)
jQuery('input[name='+vid+'-on]').removeAttr('checked');
jQuery('input[name='+vid+']').attr('name', vid+"-on");
jQuery('input[name='+vid+'-off]').attr('name', vid);
});
}); 
```

因为此代码对于下面的示例代码是正确的。

```
<p class="wpptabs_hoverable-286 switch">
    <input type="radio" id="ON" class="on286" name="wpptabs_hoverable-286" value="on" checked="checked">
    <input type="radio" id="OFF" class="off286" name="wpptabs_hoverable-286-off" value="off">
    <label for="ON" id="" class="cb-enable"><span>ON</span></label>
    <label for="OFF" id="" class="cb-disable selected"><span>OFF</span></label>
</p> 
```

但这是不正确的。你能帮助我吗？此代码基于[http://devgrow.com/iphone-style-switches/](http://devgrow.com/iphone-style-switches/) 用于 php 在表格列中生成复选框。我有一个问题：“这个 javascript 代码有什么问题？”。对不起我的英语，但我很少用这种语言写作

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T09:46:22.113

每个无线电输入的名称必须相同，否则它们会独立运行（意味着它们可以同时显示开启和关闭状态）——在下面的代码中，我删除`-off`了关闭无线电名称中的部分：

```
<p class="wpptabs_hoverable-286 switch">
  <input type="radio" id="ON" class="on286" name="wpptabs_hoverable-286" value="on" checked="checked">
  <input type="radio" id="OFF" class="off286" name="wpptabs_hoverable-286" value="off">
  <label for="ON" id="" class="cb-enable"><span>ON</span></label>
  <label for="OFF" id="" class="cb-disable selected"><span>OFF</span></label>
</p> 
```

您可以在此处看到打开和关闭按钮现在按预期工作：

[http://jsfiddle.net/S8qFT/](http://jsfiddle.net/S8qFT/)

### 更新

似乎让收音机工作并不是您唯一的问题。我已经简化了 javascript，所以它只做它需要做的事情，它现在应该可以按照你的要求工作。

[http://jsfiddle.net/65JRx/](http://jsfiddle.net/65JRx/)

**javscript**

```
/// make sure we apply the click handling to both on and off labels
$(".cb-enable,.cb-disable").click(function(){
    /// find the elements we need
    var self = $(this);
    var parent = self.parents('.switch');
    /// handle the selected highlight, first remove all selected
    parent.find('.selected').removeClass('selected');
    /// then select the right one again
    self.addClass('selected');
    /// most modern browsers should handle transfering the label click
    /// to the actual radio (via `for` and `id`), but just in case.
    if ( self.is('.cb-enable') ) {
        parent.find('input[value=on]').prop('checked', true);
    }
    else {
        parent.find('input[value=off]').prop('checked', true);
    }
}); 
```

**标记**

```
<div class="wpptabs_hoverable-286 switch">
    <!-- I've laid these inputs out just to make them
    easier to read, I wouldn't normally lay markup out
    this way //-->
    <input 
        type="radio" 
        class="on286" 
        name="wpptabs_hoverable-286" 
        id="wpptabs_hoverable-286-on" 
        value="on" 
        checked="checked"
    />
    <!-- I've renamed your IDs to have more specific names
    this will mean you can use this method on more than
    one set of inputs -- as long as you keep the IDs inline
    with your id convention. //-->
    <input 
        type="radio" 
        class="off286" 
        name="wpptabs_hoverable-286" 
        id="wpptabs_hoverable-286-off" 
        value="off" 
    />
    <label 
        for="wpptabs_hoverable-286-on"
        class="cb-enable selected">
        <span>ON</span>
    </label>
    <label 
        for="wpptabs_hoverable-286-off"
        class="cb-disable">
        <span>OFF</span>
    </label>
</div> 
```

**css**

```
/**
 * Added a highlight so you can see selected working
 */
label.selected { color: blue; }

/** 
 * I've removed the display none so you can still see the inputs
 * working as they should. Obviously you can put the display none
 * back to get your working version.
 */
.switch input{/*display: none;*/ opacity: 0.5; position: relative;} 
```

# ruby-on-rails - 从标题格到句子格

> ID：15605320
> 
> 赞同：13
> 
> 时间：2013-03-24T23:19:54.540
> 
> 标签：ruby-on-rails, regex, ruby-on-rails-3

我正在尝试编写一个助手来将字符串从 转换`"something_like_this"`为`"Something like this"`。我习惯使用`"something_like_this".titlecase`它，`"Something Like This"`但除了第一个之外，我坚持将每个大写字母都小写。

我想我正在寻找这样的东西：

```
def write_sentence
  string.titlecase.gsub!(/UPPERCASE-TO-LOWERCASE-EXCEPT-FIRST/)
  #that should be something to lowercase everything except the first letter
  return string
end 
```

因此，在视图中，我可以编写`string.write_sentence`并让它返回我想要的内容。有什么想法吗？

谢谢！

**编辑**

我应该提一下，字符串有时可能只有一个单词，在这种情况下，字符串应该从 转换`"something"`为`"Something"`.

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-03-24T23:48:12.333

尝试这个，

```
"something_like_this".humanize 
```

[http://api.rubyonrails.org/classes/ActiveSupport/Inflector.html#method-i-humanize](http://api.rubyonrails.org/classes/ActiveSupport/Inflector.html#method-i-humanize)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-12-22T17:48:17.407

你可以使用**`capitalize`**

```
greeting = 'HELLO, WORLD!'
puts greeting.capitalize
> Hello, world! 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-24T23:47:15.417

最简单的解决方案可能是抓住第一个字母，将其大写，然后将它与一个新字符串放在一起，其中第一个字母已被删除。然后只需运行正常替换即可更改`_`为`. 这里不需要任何花哨的正则表达式。`

# javascript - 理解闭包：构建一个将函数排列在一起的元函数

> ID：15605325
> 
> 赞同：0
> 
> 时间：2013-03-24T23:20:34.013
> 
> 标签：javascript, function, lambda, closures

在解决问题方面，我有一个完全可行的解决方案，我刚刚在这里完成：

```
// synchronous dynamic script loading. 
// takes an array of js url's to be loaded in that specific order. 
// assembles an array of functions that are referenced more directly rather than 
// using only nested closures. I couldn't get it going with the closures and gave up on it. 

function js_load(resources, cb_done) {
    var cb_list = []; // this is not space optimal but nobody gives a damn 
    array_each(resources, function(r, i) {
        cb_list[i] = function() {
            var x = document.body.appendChild(document.createElement('script'));
            x.src = r;
            console.log("loading "+r);
            x.onload = function() { 
                console.log("js_load: loaded "+r); 
                if (i === resources.length-1) {
                    cb_done();
                } else {
                    cb_list[i+1]();
                }
            }; 
        };
    });
    cb_list[0]();
} 
```

我对此非常满意，因为它可以满足我现在的需求，并且可能比我的第一种方法（如果它成功的话）更容易调试。

但我无法克服的是为什么我永远无法让它工作。

它看起来像这样。

```
function js_load(resources, cb_done) {
    var cur_cont = cb_done;
    // So this is an iterative approach that makes a nested "function stack" where 
    // the inner functions are hidden inside the closures. 
    array_each_reverse(resources, function(r) {
        // the stack of callbacks must be assembled in reverse order
        var tmp_f = function() {
            var x = document.body.appendChild(document.createElement('script'));
            x.src = r;
            console.log("loading "+r);
            x.onload = function() { console.log("js_load: loaded "+r); cur_cont(); }; // TODO: get rid of this function creation once we know it works right 
        };
        cur_cont = tmp_f; // Trying here to not make the function recursive. We're generating a closure with it inside. Doesn't seem to have worked :(
    });
    cur_cont();
} 
```

它一直试图在无限循环中调用自己，以及其他奇怪的事情，并且在调试过程中很难识别函数是哪个函数以及函数包含什么。

我没有深入研究代码，但似乎`jQuery.queue`也实现了与我的工作类似的机制（使用数组来跟踪延续队列），而不是仅使用闭包。

我的问题是：是否有可能构建一个可以将函数作为参数的 Javascript 函数，并通过构建包含它自己创建的函数的闭包来使用其他函数列表来增强它？

这真的很难描述。但我敢肯定，有人有一个适当的理论支持的数学术语。

PS 上面代码引用的就是这些例程

```
// iterates through array (which as you know is a hash), via a for loop over integers
// f receives args (value, index)
function array_each(arr, f) {
    var l = arr.length; // will die if you modify the array in the loop function. BEWARE
    for (var i=0; i<l; ++i) {
        f(arr[i], i);
    }
}

function array_each_reverse(arr, f) {
    var l = arr.length; // will die if you modify the array in the loop function. BEWARE
    for (var i=l-1; i>=0; --i) {
        f(arr[i], i);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T23:48:45.327

问题是您如何`cur_cont`为创建的每个新函数设置值，并`cur_cont`在`onload`回调中调用。当您像 一样进行闭包时`tmp_f`，任何像这样的自由变量`cur_cont`都*不会*“冻结”到它们的当前值。如果`cur_cont`完全更改，则从内部对其进行的任何引用都`tmp_f`将引用新的更新值。由于您不断地更改`cur_cont`为刚刚创建的新`tmp_f`功能，因此对其他功能的引用将丢失。然后，when`cur_cont`被执行并完成，`cur_cont`再次被调用。这与刚刚完成执行的函数完全相同——因此是无限循环！

在这种情况下，您需要将自由变量的值保留在闭包中，最简单的方法是创建一个新函数并使用您想要保留的值调用它。通过调用这个新函数，将为该运行创建一个新变量，它将保留您需要的值。

```
功能 js_load（资源，cb_done）{
    var cur_cont = cb_done;
    array_each_reverse（资源，函数（r）{
        // 回调堆栈必须以相反的顺序组装

        // 创建一个新函数，并传递 `cur_cont` 的当前值
        // 变量，所以我们在以后的执行中有正确的值。
        // 在这个函数中，使用 `done` 而不是 `cur_cont`;
        cur_cont = (函数(完成) {

            // 创建一个新函数，在完成时调用 `done`，并返回它。
            // 这个函数将成为新的 `cur_cont`。
            返回函数（）{

                var x = document.body.appendChild(document.createElement('script'));
                x.src = r;
                console.log("加载中"+r);
                x.onload = 函数（） {
                    console.log("js_load: 加载"+r);
                    完毕（）;
                };
            };
        })(cur_cont);

    });

    // 开始执行函数链
    cur_cont();
}

```

**编辑：**实际上，这可以通过使用该`Array.reduce`功能变得更简单。从概念上讲，您正在获取一个数组并从该数组中生成一个函数，并且生成的每个连续函数都应依赖于生成的最后一个函数。这是 reduce 旨在帮助解决的问题：

```
function js_load(resources, done) {
    var queue = resources.reduceRight(function(done, r) {
        return function() {
            var x = document.body.appendChild(document.createElement('script'));
            x.src = r;
            console.log("loading "+r);
            x.onload = function() {
                console.log("js_load: loaded "+r);
                done();
            };
        };
    }, done);

    queue();
}; 
```

请注意`reduce`和`reduceRight`不适用于旧版浏览器 (<= IE8)。可以在[MDN 页面](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/ReduceRight)上找到 JavaScript 实现。

# c++ - 如何检查从文件中读取的内容是否为有效整数？

> ID：15605327
> 
> 赞同：2
> 
> 时间：2013-03-24T23:20:51.810
> 
> 标签：c++

我正在尝试类似的东西：

```
int integer;

cin >> integer;

if(!integer) {//do something} 
```

但显然如果整数 = 0，这是一个问题。

是否有更有效的方法来检查某物是否为整数？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-24T23:27:34.143

在派生对象中使用`fail`or ：`operator bool``basic_ios`

```
if(cin.fail()) {//do something} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T23:22:45.053

使用[std::stoi()](http://en.cppreference.com/w/cpp/string/basic_string/stol)。如果字符串不是整数值，则会出现异常。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T23:28:28.363

请查找[失败位](http://www.cplusplus.com/reference/ios/ios/fail/)- 它会告诉你有什么问题

# node.js - Node.js 变量被更改而不对其执行任何操作

> ID：15605330
> 
> 赞同：0
> 
> 时间：2013-03-24T23:21:11.873
> 
> 标签：node.js

我正在使用 node.js 服务器进行多人同步骰子，但是我遇到了一些奇怪的问题，即变量更改没有被引用或使用......

```
 var origonalRolls = rolls;

    //identify epic fails
    var epicFails = [];
    for(var r = 0; r < rolls.length; r++)
        if(rolls[r] === 1)
            epicFails.push(r);

    console.log("TEST 1 :: " + JSON.stringify(rolls));
    console.log("TEST 2 :: " + JSON.stringify(origonalRolls));
    //remove epic fails and the corresponding heighest
    if(epicFails.length > 0){
        for(var i = epicFails.length-1; i >= 0; i--){
            rolls.splice(epicFails[i], 1);
            if(rolls[rolls.length-1] >= success)
                rolls.splice(rolls.length-1, 1);
        }
    }
    console.log("TEST 3 :: " + JSON.stringify(rolls));
    console.log("TEST 4 :: " + JSON.stringify(origonalRolls)); 
```

上面应该找到`rolls`数组中为 1 的任何元素，然后将其添加到`epicFails`. 然后它应该从`rolls`剩余的最高卷中移除它。（注意，`rolls`按数字排序）

由于某种原因，这段代码的输出如下：

```
TEST 1 :: [1,1,2,3,3,6,7,7,9,9]
TEST 2 :: [1,1,2,3,3,6,7,7,9,9]
TEST 3 :: [2,3,3,6,7,7]
TEST 4 :: [2,3,3,6,7,7] 
```

我不确定为什么`rolls`并以相同的方式`origonalRolls`开始并以相同的方式结束。我只使用`rolls`.

欢迎对这个问题提供任何帮助和/或解释，这已经困扰我很长时间了......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T23:29:55.953

在 Javascript 中，数组和对象只是浅拷贝——这意味着从另一个数组（originalRolls）复制的数组（rolls）只是对 originalRolls 的引用——它不是一个全新的数组，修改一个数组中的值会影响其他。

您将需要实现一个深拷贝函数来创建一个基于另一个数组的全新数组。在网络上和其他地方都有许多深度复制数组/对象的实现——[这是](http://james.padolsey.com/javascript/deep-copying-of-objects-and-arrays/)来自快速谷歌的其中一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T23:38:24.587

替换`var origonalRolls = rolls;`为：

```
var origonalRolls = [];
for (var i = 0, len = rolls.length; i < len; i++) {
    origonalRolls[i] = rolls[i];
} 
```

# css - .less 批处理中的编译 for-loop 过早地结束批处理脚本

> ID：15605339
> 
> 赞同：3
> 
> 时间：2013-03-24T23:22:03.907
> 
> 标签：css, batch-file, less

我是批处理的新手，但我发现在部署之前将我的网站的[.less文件编译成 .css 是一种好方法。](http://lesscss.org)

不幸的是，在我`for`在批处理文件中使用循环来查找我的所有 .less 文件并将它们编译成它们的 .css 等效项之后，即使`for`循环后我有更多命令，我的脚本也会停止执行。

我的批处理脚本包含以下内容：

```
@echo off
rmdir c:\code\releaseDirectory /s /q
echo d | xcopy /d c:\code\devDirectory c:\code\releaseDirectory /s
cd c:\code\releaseDirectory
for /r %%i in (*.less) do echo %%i
for /r %%i in (*.less) do lessc -x %%i > %%~pi%%~ni.css
echo reached the end of the batch script! 
```

当我运行它时，输出显示所有正在发生的 .less 编译，但“到达了批处理脚本的末尾！” 字符串永远不会显示，因此我想在 .less 编译后采取的任何操作都不会发生。

为什么在`for`执行循环中的较少编译后没有任何脚本？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-03-03T19:22:08.077

我遇到了同样的问题，不得不更改`lessc`为`call lessc`，然后我的脚本停止过早结束。这是一个引导我尝试的 SO 链接：[为什么调用嵌套批处理文件而不在该行前面加上“调用”退出父批处理文件？](https://stackoverflow.com/questions/11638705/why-does-calling-a-nested-batch-file-without-prepending-call-to-the-line-exit)基本上它说您需要`call`在执行嵌套批处理文件时使用，以便在子文件完成执行时将控制权返回给父文件。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-24T23:28:07.297

`lessc.bat`你的路径中有一个吗？

如果是这样，您需要`CALL lessc...`

* * *

有一个“奇怪”的文件名吗？正在处理？

也许...做**ECHO %%i&** lessc -x %%i > %%~pi%%~ni.css

可能会透露更多...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-25T04:22:58.507

尝试这个：

```
...
for /r %%i in (*.less) do lessc.exe -x "%%~i" "%%~dpni.css"
... 
```

# iphone - 如何在 iOS 中的视图控制器之间进行 3D 立方体转换

> ID：15605341
> 
> 赞同：3
> 
> 时间：2013-03-24T23:22:30.003
> 
> 标签：iphone, ios, uiviewcontroller, uiviewanimation, uiviewanimationtransition

[**旋转**](https://itunes.apple.com/gb/app/spun-city-news-magazine/id575348873?mt=8)应用程序

iPhone 在视图控制器之间具有出色的垂直 3D 过渡。有哪些开源的

为此目的设计的库或类似的酷过渡效果？

![旋转应用](../Images/4fbf5835568683764028937d93cf3b0b.png)

# jquery - $.each() 循环没有被调用

> ID：15605342
> 
> 赞同：0
> 
> 时间：2013-03-24T23:22:41.887
> 
> 标签：jquery, ajax, json

```
$.ajax({
                    url: '@Url.Action("Ajax_GetCartOrders","Business")',
                    type: 'POST',
                    data: JSON.stringify(email),
                    dataType: 'json',
                    processData: false,
                    contentType: 'application/json; charset=utf-8',
                    success: function (result) 
                    {

                            alert("success"); // this works
                            alert(result);    //this works and shows the correct data

                            $.each(result, function () 
                            {
                               alert("inside loop");// this doesnt work
                            });
                    }, 
```

为什么 $.each 中的警报不起作用？成功警报有效，警报结果显示正确的 json 数据

```
 result data

    {"id":6,"email":"TEST","date":"TEST","relation":"TEST"},       {"id":7,"email":"TEST","date":"TEST","relation":"TEST"},{"id":8,"email":"TEST","date":"TEST","relation":"TEST"},{"id":9,"email":"TEST","date":"TEST","relation":"TEST"},{"id":10,"email":"TEST","date":"TEST","relation":"TEST"},{"id":11,"email":"TEST","date":"TEST","relation":"TEST"},{"id":12,"email":"TEST","date":"TEST","relation":"TEST"},{"id":19,"email":"TEST","date":"TEST","relation":"TEST"},{"id":3,"email":"testemail","date":null,"relation":null}] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T23:54:07.367

This seems to work:

```
$(result).each(function(){
    console.log(this.email);
}) 
```

[http://jsfiddle.net/22BBv/](http://jsfiddle.net/22BBv/)

# javascript - 如何使用jQuery单击按钮并弹出警报消息

> ID：15605347
> 
> 赞同：1
> 
> 时间：2013-03-24T23:23:15.613
> 
> 标签：javascript, jquery, html

我无法弹出警报消息。我的所有其他 jQuery 代码都在工作，所以我知道我正确链接了库。可能是我把它放在重要文件中的地方吗？

HTML：

```
<button type="button" class="cancelForm">Cancel</button> 
```

jQuery：

```
 $(".cancelForm").submit(function(){
     alert('Are you sure you want to cancel?');
   }); 
```

更新：仍然无法让它工作。我稍后会尝试重新标记。感谢您的提示。

```
$(".cancelForm").on('click', function(){
alert('Are you sure you want to cancel?');
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T23:45:07.130

我让它工作，但将代码放在 document.ready 部分中。感谢您的帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T23:29:09.000

您想要点击，而不是提交。

```
$(".cancelForm").click(function() 
```

另外 - 将您的按钮的类称为其他名称（现在，它是“cancelForm”，这意味着它是一个让您感到困惑的表单 - 并且可能会使需要在您之后维护代码的开发人员感到困惑。

另外 - 使用 jquery 对话框显示消息，而不是 alert()。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T23:30:27.990

按钮类型需要“提交”才能使此 javascript 工作。否则，您将需要为按钮提供 onclick 事件处理程序。

# objective-c - 如何使用 NSDateFormatter 显示人类可读的 NSDate

> ID：15605348
> 
> 赞同：1
> 
> 时间：2013-03-24T23:23:17.210
> 
> 标签：objective-c, nsdateformatter

我需要显示人类可读的 NSDate 本地化格式。

目前，NSDateFormatter 一次只能格式化一个日期。

但是，我可以找到任何关于如何进行两种日期格式的示例。

以下是我需要制作的一些格式示例。

1.  2013 年 3 月 25 日星期一上午 10:00 - 11:00

2.  2013 年 3 月 25 日星期一上午 10:00 - 晚上 11:00

而且这些需要采用本地化格式，取决于语言环境和时区。

有人可以在这里遮光吗？非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T23:30:02.363

无论您将如何处理，您都必须使用两个字符串并将它们组合在一起。

归根结底，您最终有两个日期：

```
10:00 - 11:00AM Monday 25th March, 2013
^^^^^   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
Date1   Date2 
```

您可以使用两个单独`NSDateFormatter`的对象来满足您的需求。

```
NSDateFormatter *timeOnlyDateFormatter = [[NSDateFormatter alloc] init];
//... set the format for the timeOnlyDateFormatter here
NSDateFormatter *fullDateFormatter = [[NSDateFormatter alloc] init];
//.. set the format for the fullDateFormatter here 
```

有了这个，您可以使用它们来创建 Date1 字符串和 Date2 字符串，然后将它们组合起来。

```
NSString *firstString = [timeOnlyDateFormatter stringFromDate:firstDate];
NSString *secondString = [fullDateFormatter stringFromDate:secondDate];
NSString *combined = [NSString stringWithFormat:@"%@ - %@", firstString, secondString]; 
```

据我所知，没有真正漂亮的方法可以做到这一点。

# html - 知道用于全屏背景图像的良好 CSS 技术吗？

> ID：15605349
> 
> 赞同：0
> 
> 时间：2013-03-24T23:23:23.913
> 
> 标签：html, image, css, background-image

我在网上环顾四周并尝试了各种方法来解决这个问题，但还没有找到一种适合我的技术。我希望我的网站的背景图片居中，填满整个浏览器屏幕，并使用响应式设计。

除了 CSS3/background-size: 封面之外，还有什么简单的技术吗？这对我来说根本不起作用（不知道为什么......）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T00:39:24.513

**[现场演示](http://jsbin.com/uladug/2/)**

```
body{
  background:url(img.jpg) center center fixed;
  background-size:cover; // CSS3 *
} 
```

^(*注意：*) **CSS3**。对于其他*旧*浏览器，请使其尽可能丑陋！;)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-24T23:44:04.200

如果您不反对除了 CSS 之外还涉及 HTML 的解决方案，您可以使用标签来模拟`background-size: cover`行为。`img`

HTML：

```
<body>
    <div id="image-matte">
        <img src="..."/>
    </div>

    ... Page content below ...

</body> 
```

CSS：

```
#image-matte {
    position: fixed;
    top: 0%;
    left: -50%;
    width: 200%;
    height: 200%;
}

#image-matte img {
    display: block;
    margin: auto;
    min-height: 50%;
    min-width: 50%;
}

/* Covers the image to prevent pointer interaction */
#image-matte:after {
    content: '';
    display: block;
    position: absolute;
    top: 0;
    right: 0;
    bottom: 0;
    left: 0;
} 
```

**编辑：**要获得垂直和水平居中的背景图像，您需要在包装器 div 和包含图像本身的内部 div 之间创建表/表单元格关系...... HTML 和 CSS 看起来像这样：

HTML：

```
<div id="image-matte">
    <div>
        <img src="..."/>
    </div>
</div> 
```

CSS：

```
#image-matte {
    position: fixed;
    display: table;
    top: -50%;
    left: -50%;
    width: 200%;
    height: 200%;
    text-align: center;
}
#image-matte div {
    vertical-align: middle;
    display: table-cell;
}
#image-matte img {
    position: relative;
    text-align: center;
    min-height: 50%;
    min-width: 50%;
}

/* Covers the image to prevent pointer interaction */
#image-matte:after {
    content: '';
    display: block;
    position: absolute;
    top: 0;
    right: 0;
    bottom: 0;
    left: 0;
} 
```

工作示例：http: [//jsfiddle.net/qkpvb/](http://jsfiddle.net/qkpvb/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-25T09:09:30.613

尝试在链接中的标记或 css 中添加此 html 标记：

```
<img src="img/beach.jpg" 

style="width:100%;height:100%;position:absolute;top:0;left:0;z-index:-5000;"> 
```

[http://thewebthought.blogspot.com/2010/10/css-making-background-image-fit-any.htmlg](http://thewebthought.blogspot.com/2010/10/css-making-background-image-fit-any.htmlg)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-26T11:07:53.267

为了在所有浏览器上都能正常工作，我建议使用 jQuery 这个解决方案：

HTML

```
<img src='./templates/lights3.jpg' alt="bg" id="bg"/> 
```

CSS

```
#bg { 
    position: fixed; 
    top: 0; 
    left: 0;
    z-index: -5000; // Yes I always overdo ^^ (that's not very clean)
}

.bgwidth { 
    width: 100%;
}

.bgheight { 
    height: 100%;
} 
```

查询

```
$(window).load(function() {    
var theWindow        = $(window),
    $bg              = $("#bg"),
    aspectRatio      = $bg.width() / $bg.height();              
function resizeBg() {
    if ( (theWindow.width() / theWindow.height()) < aspectRatio ) {
        $bg
            .removeClass()
            .addClass('bgheight');
    } else {
        $bg
            .removeClass()
            .addClass('bgwidth');
    }           
}                           
theWindow.resize(resizeBg).trigger("resize");
}); 
```

此解决方案将响应并根据浏览器窗口的大小调整背景图像的大小。

# javascript - jQuery，隐藏段落

> ID：15605352
> 
> 赞同：0
> 
> 时间：2013-03-24T23:23:45.350
> 
> 标签：javascript, jquery

我正在使用内部 jQuery 创建一个随机 html 页面，我试图让 jQuery 隐藏三个段落中的两个，并执行此操作 5 秒，但是当我加载 html 文件时，所有段落都立即可见。任何人都可以帮忙吗？

```
<html>
    <head>
        <script src="jquery-1.9.1.js"></script>
    </head>
    <body>
        <script>
            var $ = jQuery;
            $("p").each(function (idx) {
                if(idx >= 1) {
                    $(this).hide(500);
                }
            });
        </script>
        <p>This is the first paragraph</p>
        <p>This is the second paragraph</p>
        <p>This is the third paragraph</p>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-24T23:26:31.783

您必须使用包装代码，`$()`因为尚未加载元素。

```
$(function(){
    $("p:not(:first-child)").hide(5000);
}); 
```

　`[TRY-A-DEMO](http://jsfiddle.net/DerekL/cT3mC/)`

我也相信这`500`是一个错字，因为`5000`是 5 秒。

正如[@David Thomas](https://stackoverflow.com/questions/15605352/jquery-hiding-paragraphs/#comment22131438_15605378)建议的那样，您可以将其进一步简化为：

```
$(function(){
    $("p:gt(0)").hide(5000);  //:gt means "greater than..."
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T23:26:14.780

确保等待 DOM 就绪事件：

```
$(document).ready(function() {
  // your code
}); 
```

# javascript - 在 Firefox 或 Chrome 的 javascript 调试器中观察数据流

> ID：15605361
> 
> 赞同：2
> 
> 时间：2013-03-24T23:24:40.513
> 
> 标签：javascript, debugging, runtime, firebug, breakpoints

我有一个复杂的问题要解决。我想找出一种方法，如果在执行 javascript 代码期间其中任何一个与特定模式匹配，我可以创建所有变量名称、函数参数（包括函数名称）及其各自的行号的日志。

例如，我知道我可以在 JavaScript 源代码中的特定行设置断点，并使用 Chrome 的 Web 开发人员工具查看范围变量和函数参数的值。想象一下以下代码片段是 URL www.example.com/page.html#stack 处网页的一部分，我在代码执行期间正在观察字符串“stack”（URL 片段）的流动：

```
 01\. function inform(str) {
    02\.  if(str){
    03\.    var flag = str;
    04\.    alert(flag);
    05\.    return 0;
    06\.  }
    07\. }
    08.
    09\. function call() {
    10\.  var value = location.hash.split("#")[1];
    11\.  msg = value;
    12\.  inform(msg);
    13\. } 
```

我希望输出如下，因为这些变量在内存中包含值“堆栈”：

1.  调用->值
2.  通话->味精
3.  通知（味精）
4.  通知-> str
5.  通知->标志
6.  警报（标志）

我可以使用 Chrome 的 JavaScript 调试器通过设置断点并查看 Scope Variables 部分来手动执行此操作。但是有没有办法自动化呢？

谢谢

# cocos2d-iphone - 如何为 VOID 语句中的内容设置动画？XCODE

> ID：15605364
> 
> 赞同：-1
> 
> 时间：2013-03-24T23:24:58.077
> 
> 标签：cocos2d-iphone, kobold2d

```
-(void) redafter1
{

red = [CCMenuItemImage
       itemFromNormalImage:@"red.png" selectedImage:@"redclick.png"];
red.position = ccp(175, 725);
redMenu = [CCMenu menuWithItems:red, nil];
redMenu.position = CGPointZero;
redMenu.scale = .75;
[self addChild:redMenu z:10];
} 
```

我将如何为这个对象设置动画以移动到屏幕上的另一个位置？我对此很陌生，请在您的解释中保持基本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T21:55:05.070

`[redMenu runAction:[CCMoveTo actionWithDuration:time position:place]];`您在函数末尾添加（您选择时间和位置），`redafter1`因此当父方法最终被诸如`init`菜单之类的方法调用时会移动。

请记住，您不能移动 a `CCMenuItemImage`，因为它已锁定到`CCMenu`' 位置。你必须移动它`CCMenu`本身。

希望这会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T00:25:20.537

如果要动画 CCNode（这是所有 cocos2d 对象的基类，如图层、精灵、标签、菜单项等），则必须使用动作机制。要移动对象，请使用 CCMoveTo、CCMoveBy 操作和`runAction:`方法。

```
id moveAction = [CCMoveTo actionWithDuration: animationDuration position: targetPosition];
[nodeToAnimate runAction: moveAction]; 
```

在您的情况下，如果您在将对象添加到某个可见的父对象（您的场景或其他可见父对象）之后立即对对象运行操作，则操作将在对象出现后立即开始。

# php - PHP从数据库中删除不起作用

> ID：15605366
> 
> 赞同：-1
> 
> 时间：2013-03-24T23:25:07.203
> 
> 标签：php, mysql, database

我试图让用户检查要删除的项目。当用户勾选一项或多项并单击删除按钮时，这些数据将从数据库中删除。我还添加了一个搜索框来搜索 DVD。搜索框有效，但删除无效。这就是它在浏览器中的样子。

![PHP 删除](../Images/fba055c647f353f7c2eba8af2f3216ee.png)

我的 PHP 看起来是这样的（我拿出了搜索代码）：

```
<form action="" method="post">
<p><input type="text" name="search"> <input type="submit" value="Search"></p>
<p><input type="submit" name="deleting" value="Delete"></p>
</form>
<?php   
    $link = mysqli_connect( $host, $user, $password, $dbname);
    if (!$link) {
        die('Could not connect: ' . mysqli_connect_error());
    }
    echo 'Connected successfully<br/>';

//searching code goes here 

if (isset ($_POST['deleting']) && isset ($_POST['deleteThese']) )
{
$deleteThese = implode(",", $_POST['deleteThese']); 
$queryTwo = "DELETE FROM `$dbname`.`dvds` WHERE `dvds`.`DvdID` IN ($deleteThese)"; 
$resultTwo = mysqli_query($link, $queryTwo);
}

echo "<table border=\"1\"><tr><th>DvdTitle</th><th>RunningTime</th><th>Delete</th></tr>";
if (mysqli_num_rows($result) == 0)
   echo "<tr><td colspan='2'>No records found.</td></tr>";

   else {
    while ($row = mysqli_fetch_assoc($result)) {
    echo "<tr><td>" . $row['DvdTitle'] . "</td>";
    echo "<td>" . $row['RunningTime'] . "</td>";
    echo "<td>" . "<form>" . "<input type='checkbox' name='deleteThese[]' value='" . $row['DvdID'] . "' >" . "</form>" . "</td></tr>\n"; 
           }
        }
    echo "</table>";
    mysqli_free_result($result);
    mysqli_close($link);
?> 
```

每个 DvdTitle 都有一个唯一的 Dvd ID，因此每一行的值就是 dvd 的 ID `$row['DvdID']`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T23:29:13.590

添加括号将允许选择这些 ID 进行删除。

```
 IN($deleteThese) 
```

**编辑**

提交按钮后不要关闭表单。把它放在代码的末尾。这将允许表单包含复选框值。

```
<form action="" method="post">
<p><input type="text" name="search"> <input type="submit" value="Search"></p>
<!-- YOUR PHP CODE -->
<p><input type="submit" name="deleting" value="Delete"></p>
</form> 
```

**第二次编辑[要求改进代码]**

将 isset 移动到表单顶部。

```
<?php
if (isset ($_POST['deleting']) && isset ($_POST['deleteThese']) )
{
  $deleteThese = implode(",", $_POST['deleteThese']); 
  $queryTwo = "DELETE FROM `$dbname`.`dvds` WHERE `dvds`.`DvdID` IN ($deleteThese)"; 
  $resultTwo = mysqli_query($link, $queryTwo);
}
?>
<form>.... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T23:34:36.500

`$deletethese`可能需要在它周围加上引号。

# ios - 自定义单元格数据不显示ios

> ID：15605368
> 
> 赞同：1
> 
> 时间：2013-03-24T23:25:15.783
> 
> 标签：ios, uitableview

我需要显示单元格数据。实际上，如果我调试代码，我可以看到`cell.label.text`确实具有正确的值，但模拟器上没有显示任何内容。我在 numberOfRowsInSection 方法中设置了行数。

```
-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
        static NSString *identifier = @"Cell";
        LogTableCell *cell = (LogTableCell *)[tableView dequeueReusableCellWithIdentifier:identifier];
        CGRect frame1 = [ self.view  frame];
        frame1.origin.x=22.0f;
        frame1.origin.y=55.0f;

        frame1.size.width = 298.0f;
        frame1.size.height= 425.0f;
        [self.view.superview setFrame:frame1];
        int btnWidth = ((self.view.frame.size.width-16)/3);

        if(cell == nil)
        {
            cell = [[LogTableCell alloc]initWithStyle:UITableViewCellStyleDefault reuseIdentifier:identifier];
        }
        LogItem *lg = [[LogItem alloc]init];

        lg = [arrLogs objectAtIndex:indexPath.row ];

        NSLog(@"%d",indexPath.row);
        cell.lblname.textColor=[UIColor whiteColor];
        cell.lblsubtype.textColor=[UIColor whiteColor];
        cell.lbltime.textColor=[UIColor whiteColor];
        cell.lblname.font=[UIFont fontWithName:@"Merriweather" size:15.0];
        cell.lblsubtype.font=[UIFont fontWithName:@"Merriweather-Light" size:13.0];
        cell.lbltime.font=[UIFont fontWithName:@"Merriweather-Light" size:13.0];

        UIImageView *imageview = [[UIImageView alloc] initWithFrame:CGRectMake(1, cell.contentView.frame.size.height, 298.0,2)] ;

        imageview.image = [UIImage imageNamed: @"lineseperator.png"];
        [cell.contentView addSubview:imageview];

        cell.lblname.text = lg.name;
        NSLog(@"%@",lg.name);
        [[cell imgtype] setImage:[UIImage imageNamed:lg.imagetype]];

        if([lg.subtype length] == 0){
            NSLog(@"%@",lg.subtype);
            cell.lblsubtype.text = lg.time;
            cell.lbltime.text = @"";
        }
        else{
            NSLog(@"%@",lg.subtype);
            cell.lblsubtype.text = lg.subtype;
            cell.lbltime.text = lg.time;
        }

    return cell;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T01:05:57.453

您添加到单元格的图像视图覆盖了所有其他内容。您需要调整它的大小/重新定位它，或者只使用已经存在的 cell.imageView 。

# java - 播放框架 2 slugify

> ID：15605369
> 
> 赞同：3
> 
> 时间：2013-03-24T23:25:25.310
> 
> 标签：java, playframework-2.0

我想 slugify 一个对象的 String attr 以在 url 中使用它。我读过 play 1.x 中有一个名为“slugify”的函数，但我在 play 2.x 中找不到它

在 play 2.x 中 slugify 字符串的最佳方法是什么？

如果我必须实现该函数（或任何类似的辅助函数），我应该将它放在哪里以获得整个 mvc 的最佳可访问性？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T16:31:18.400

如[https://groups.google.com/forum/#!topic/play-framework/r-raDXl95Q4](https://groups.google.com/forum/#!topic/play-framework/r-raDXl95Q4)中所述，Play 2 中没有内置的 slugify 助手。但是构建自己的很容易。这是一个例子：

[https://github.com/julienrf/chooze/blob/master/app/util/Util.scala#L6](https://github.com/julienrf/chooze/blob/master/app/util/Util.scala#L6)

作者将 helper`app/util`放置在 IMO 下，这是一个与任何地方一样合理的地方。

# ruby - 使用 File.new 创建的文件实际上存储在 Ruby 中的什么位置？

> ID：15605371
> 
> 赞同：0
> 
> 时间：2013-03-24T23:25:39.590
> 
> 标签：ruby

我正在从 Ruby 脚本中创建文件并向其中添加内容。但是我正在创建的这些文件存储在哪里？

我对此很陌生，对不起！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T23:38:22.490

这些文件是在您指定的任何位置创建的。例如：

```
f = File.new("another_test.txt","w+") 
```

这将在当前工作目录中创建文件。您指定路径以及文件名。例如：

```
 f = File.new("~/Desktop/another_test.txt","w+") # will create the file on the desktop. 
```

有关更多详细信息，请[查看文件文档。](http://www.ruby-doc.org/core-2.0/File.html#method-c-new)

**更新**：包括 mu 太短更正。

# python - 从项目列表中对对进行分组的 Python 最快方法

> ID：15605379
> 
> 赞同：1
> 
> 时间：2013-03-24T23:26:51.210
> 
> 标签：python, python-2.7, combinations

作为我项目的一部分，我需要将字符分组为对（唯一）。我在一个列表中有超过 1000 个这样的字符。从这些字符列表中创建唯一对的最快和优化方法是什么。我目前正在使用 itertools，我的代码似乎表现得很糟糕。

**我的代码使用 itertools：**

```
import itertools

characters = ['A', 'B', 'C', 'D', 'E']
relations = []
for character in range(len(characters) + 1):
    for combination in itertools.combinations(characters, character):
        if len(combination) == 2:
            relations.append(combination)
print relations 
```

**预期输出：**

```
[('A', 'B'), ('A', 'C'), ('A', 'D'), ('A', 'E'), ('B', 'C'),   
('B', 'D'), ('B', 'E'), ('C', 'D'), ('C', 'E'), ('D', 'E')] 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-24T23:28:40.497

您只需要长度为 2 的组合吗？

```
In [48]: characters = ['A', 'B', 'C', 'D', 'E']

In [50]: list(itertools.combinations(characters, 2))
Out[50]:
[('A', 'B'),
 ('A', 'C'),
 ('A', 'D'),
 ('A', 'E'),
 ('B', 'C'),
 ('B', 'D'),
 ('B', 'E'),
 ('C', 'D'),
 ('C', 'E'),
 ('D', 'E')] 
```

您还生成长度为 3 到 len(characters) 的组合并将它们全部丢弃。

```
characters = ['A', 'B', 'C', 'D', 'E']
relations = list(itertools.combinations(characters, 2)) 
```

# java - 在 Java 中的 System.in 上使用 Scanner 进行缓冲

> ID：15605381
> 
> 赞同：0
> 
> 时间：2013-03-24T23:27:01.097
> 
> 标签：java, console, io-buffering

我在 Java 中遇到了 Scanner 的问题。我有一个`System.in`基于这些数据解析和创建对象的方法。但是如果我`Scanner`在方法内部创建，我有两种方法可以做到这一点，即关闭和不关闭。在第一种情况下，也`Scanner.close()`关闭`System.in`，否则它会提前缓冲，并且它缓冲的字符变得无法从另一个 Scanner 访问。所以现在我将一个`Scanner`实例传递给方法。但是，如果您需要从控制台读取另一个对象，例如通过`BufferedReader`. 此外，它似乎不是一个真正干净的设计解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T00:07:05.280

我猜设计已经考虑到一次只有一个`Reader`or`Scanner`可以实际读取`InputStream`( `System.in`)，因此在其上放置几个`Reader`s 是无用的（因为它也消耗流），因此可以关闭底层的`InputStream`.

编辑：一种解决方案是`InputStream`直接使用 ( `read()`) 并自己处理字节的读取。例如，您可以使用`String`构造函数来仅返回未使用的部分。`String(byte[])``substring()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T00:27:51.947

定义 a`BufferedReader`并将其传递给您的方法。使用它将行读入字符串并附加 a`Scanner`而不是`System.in`.

# javascript - Jquery - 定位同一类的所有元素，隐藏没有特定 rel 的 div

> ID：15605383
> 
> 赞同：1
> 
> 时间：2013-03-24T23:27:03.080
> 
> 标签：javascript, jquery, html, sorting, hide

**我的 HTML：**

```
<div class="mydiv" rel="1">test one</div>
<div class="mydiv" rel="2">test two</div>
<div class="mydiv" rel="3">test three</div>
<div class="mydiv" rel="2">test three</div> 
```

我的目标是使用 jQuery 隐藏所有**没有**rel 的 div 元素，比如 1。

rel 值将动态生成。所以我想隐藏 rel != 1 的任何 div.mydiv。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T23:34:07.867

隐藏除一个之外的所有 rel 值的所有 div 就像这样简单：

```
$(".myDiv[rel!=1]").hide(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T23:29:48.380

```
$('.mydiv').filter(function() {
    return $(this).attr('rel') != 1;
}).hide(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T05:53:38.917

$(".myDiv[rel!=1]").hide(); 是您问题的正确答案。或者你也可以这样做

```
$('div.mydiv').not('div[rel="1"]').hide(); 
```

# batch-file - 从变量中批量提取 pathdir

> ID：15605385
> 
> 赞同：0
> 
> 时间：2013-03-24T23:27:18.177
> 
> 标签：batch-file, split, dos

如果我有这种情况：

```
C:\Users\l72\Desktop\fs.cfg
C:\Users\s80\Desktop\tt.cfg
C:\Users\r88\Desktop\kj.cfg 
```

并且每个完整路径都设置为一个变量

```
set dir1=C:\Users\l72\Desktop\fs.cfg
.
.
. 
```

如何仅提取第二个字段（l72，s80，r88）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T23:32:14.083

```
for /f "tokens=3delims=\" %%i in ("%dir1%") do echo %%i 
```

是一种在将字符串标记为分隔符`dir1`时从环境变量中包含的字符串中提取第三个标记的方法。`\`

# c - 同步 2 个进程

> ID：15605386
> 
> 赞同：2
> 
> 时间：2013-03-24T23:27:29.963
> 
> 标签：c, algorithm, synchronization, fork

我试图让 2 个进程同时启动一个任务（例如，计算一个数字）。我设置了 2 个就绪标志，每个进程一个，并执行一个 while 循环来检查两个标志是否都已启动。然后2个进程在校验通过后开始计数。这是不工作的代码，我不知道为什么：

```
int p1ready=0;
int p2ready=0;
int onebil = 1000000000;

int main(){

int pid;
int exit_code;

pid=fork();
if(pid==0){
//child1
    int count1=0;
    p1ready=1;    //signal
    while(!(p1ready&p2ready))'//wait until 2 processes are both ready

    while(count1!=onebil){
        count1++;
    }
    exit(0);
}
else{
    pid=fork();
    if(pid==0){
    //child2
        int count2=0;
        p2ready=1;    //signal
        while(!(p1ready&p2ready));//wait until 2 processes are both ready
        while(count2!=onebil){
            count2++;
            }
        exit(0);
    }
    else{
    //parent
       //do stuff
    }
return 0;
} 
```

这段代码的问题是，在 child1 和 child2 中，只有他们自己的就绪标志设置为 1。他们看不到另一个孩子的标志正在设置。比如child1只看到p1ready=1，但是p2ready一直是0，为什么会这样呢？我怎样才能解决这个问题？

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-24T23:42:51.600

当您执行 fork() 时，每个进程都会获得一个新的私有地址空间。父母和孩子不会共享任何数据。这就是进程间通信机制进入的地方。

您可能会使用信号量。请参阅此链接：

[进程的信号量等价物？](https://stackoverflow.com/questions/6659780/semaphore-equivalent-for-processes).

[http://www.csc.villanova.edu/~mdamian/threads/posixsem.html](http://www.csc.villanova.edu/~mdamian/threads/posixsem.html)

您可以在父节点上准备信号量，让每个子节点在每次分叉后等待它，然后在父节点中释放它们。两个子进程将同时释放并继续执行。当然，哪些先执行取决于操作系统执行调度程序。

```
 #include <stdio.h>
    #include <semaphore.h>
    #include <unistd.h>

    int p1ready=0;
    int p2ready=0;
    int onebil = 1000000000;

    int main(){

    int pid;
    int exit_code;

    // create a semaphore for each child: value=0
    sem_t *sem1 = sem_open("test_semaphore", O_CREAT|O_EXCL);
    sem_t *sem2 = sem_open("test_semaphore", O_CREAT|O_EXCL);

    pid=fork();
    if(pid==0){
        //child1
        // wait on semaphore => blocks if value <= 0
        sem_wait(sem1);
        int count1=0;
        // do work => a function might be better
        while(count1!=onebil){
            count1++;
        }
        exit(0);
    }
    else{
        pid=fork();
        if(pid==0){
            //child2
            // wait on semaphore => blocks if value <= 0 
            sem_wait(sem2);
            // do work
            int count2=0;
            while(count2!=onebil){
                count2++;
                }
            exit(0);
        }
        else{
            //parent
            // signal semaphore1 (increment) releasing child 1
            sem_post(sem1);
            // signal semaphore2 (increment) releasing child 2
            sem_post(sem2);

            // do work

            // wait for child1/child2
            int status;
            wait(&status); // a child has exited
            // do something with status
            wait(&status); // another child has exited
            // do something with status

        }
    return 0;
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-24T23:36:57.850

您尝试同步流程的方式不会奏效，因为您创建的每个流程都有自己的`p1ready`and副本`p2ready`。

您似乎正在寻找的是某种进程间通信。您可能想查看[http://en.wikipedia.org/wiki/Inter-process_communication](http://en.wikipedia.org/wiki/Inter-process_communication)以查看可能选项的列表。

在像您的问题中提到的一个简单情况下，很可能向您的两个子进程发送来自父进程的信号就足够了，所以我建议您最好看一下。

# javascript - 带有 CSS Sprite 图像的 jQuery UI 反弹效果

> ID：15605393
> 
> 赞同：0
> 
> 时间：2013-03-24T23:28:09.670
> 
> 标签：javascript, jquery, html, css, sprite

我试图使用 jQuery UI 反弹效果让我的社交图标反弹。我正在处理来自 jQuery 的模板和一些文档。其余的我只是想自己编写 HTML、CSS 和 JS，所以我可能有一些错误。我在让图标反弹时遇到问题。我认为这可能是因为我使用精灵图像作为社交图标。

有人可以看看它并帮助我吗？

标头中的 jQuery 和 jQuery UI

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.min.js"></script>
<script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/jquery-ui.min.js"</script> 
```

正在使用的 CSS：

```
#footer {background:#1c1c1c; padding:40px 0 20px;  border-top:4px solid #fff;}
#footer a {color:#fff;}
#footer a:hover {color:#d5d5d5;}

#footer .social-icons {float:right;}
#footer .copyright img {float:left; margin-right:20px;}

#footer .copyright p {
font-size:80%;
line-height:140%;
}

#footer .social-icons { }
#footer .social-icons li.title {line-height:30px;}
#footer .social-icons li {margin:0 0 0 10px; }
#footer .social-icons li:first-child {margin-left:0;}

/* social icons */
.social-icons {margin:0 0 20px;}
.social-icons li {display:inline-block; margin:5px;vertical-align: middle;}
.social-icons li a {display:inline-block; width:30px; height:30px; text-indent:-9999px;     background-image:url(../images/social-icons-sprite.png); background-repeat: no-repeat;     position:relative; background-color: #111; -webkit-border-radius:3px; -moz-border-    radius:3px; border-radius:3px;
-webkit-transition: all 0.2s ease-out; -moz-transition: all 0.2s ease-out; -o-    transition: all 0.2s ease-out; transition: all 0.2s ease-out; }
.social-icons li a:hover {background-color:#cd2122; box-shadow:0 0 6px rgba(0,0,0,0.4)}

.social-icons li.social-twitter a {background-position:0 0;}
.social-icons li.social-dribbble a {background-position:-30px 0;}
.social-icons li.social-facebook a {background-position:-60px 0;}
.social-icons li.social-envato a {background-position:-90px 0;} 
```

图标所在位置的 HTML。

```
<div id="footer">
        <div class="row">
            <div class="span12">
                <div class="bottom fixclear">
                    <ul class="social-icons fixclear">
                        <li class="title">SOCIAL LOVE</li>
                        <li class="social-twitter">
                            <a href="#">Twitter</a>
                        </li>
                    </ul> 
```

最后，我认为需要正确插入和运行的 JS。

```
<style type="text/css">
footer li.social-twitter {
width: 32px;
height: 32px;
}
</style>
<script>
$(document).ready(function() {

$("div").mouseenter(function () {
$(this).effect("bounce", { times:3 }, 270);
});

});
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T01:19:36.887

您可以使用 @keyframes 动画来实现此效果。

```
@keyframes bounce {
0%, 20%, 50%, 80%, 100% {
    transform: translateY(0);
}
40% {
    transform: translateY(-30px);
}
60% {
    transform: translateY(-15px);
}
} 
```

查看[Animate.css](http://daneden.me/animate/) Dan Eden 创建了一个即插即用的动画库，它非常适合这类事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-28T08:25:16.627

您可以仅使用 CSS3 实现相同的弹跳效果。`@keyframes`和`animation`属性将完成这项工作。这是[JSFiddle](http://jsfiddle.net/QxQud/1/)中的工作示例。每个图像都会反弹`hover`。

# android - 在 Android 应用中使用压缩的 GTFS 数据

> ID：15605394
> 
> 赞同：0
> 
> 时间：2013-03-24T23:28:12.840
> 
> 标签：android, database, compression, gtfs

我正在寻找使用 GTFS 静态数据开发交通应用程序。我给自己设置的限制之一是应用程序应该使用最少的移动数据传输。因此，我想将所有数据嵌入到应用程序中。

我的问题是 GTFS 数据集通常非常大（例如，悉尼市的 85MB 未压缩）。我已经对其他应用程序进行了一些逆向工程，发现其中一些已经设法将所有数据压缩到一个小得多的文件中（我说的最多只有几 MB）。

使用 7zip，我设法将我的 85MB 数据集压缩到 5MB，这对我来说是可以接受的。下一步是让我在我的应用程序中使用那个 7z 文件，这就是我卡住的地方。我无法将其解压缩并将其放入 SQL 数据库中，因为这会占用手机上的太多空间。所以我想知道我的其他选择是什么。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T03:12:02.477

首先，对于嵌入，我推荐使用[Embedded XZ 库](http://tukaani.org/xz/embedded.html)（类似于 7zip）。我已经将它嵌入到一个项目中，并祝你好运。请务必使用“xz --check=crc32”压缩数据，使其与嵌入式 XZ 兼容，并记住初始化 CRC 表。

至于解压策略，您可能需要对数据进行分段，以便您可以按需解压数据的不同部分（即数据库树）。我不熟悉您的数据特征。用户是否需要同时加载所有内容？还是可以很容易地划分？

此外，XZ 可能有点慢，即使是解码也是如此。您是否评估过常规 gzip 的性能如何？这往往是 A) 非常快；B) 作为所有嵌入式和移动框架的标准部分提供。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-05-26T11:37:31.323

使用协议二进制格式 (pbf)，以前是 google，现在是开源的。它紧凑且可快速搜索，因此无需在设备上解压缩并将其加载到该设备上的数据库中，因为 pbf 充当数据库。只需在您的代码中包含 pbf 库即可对其进行查询。当然，您必须在在线分发数据之前对其进行一次压缩。

# php - 更改语言目录而不重定向到索引页面

> ID：15605399
> 
> 赞同：-1
> 
> 时间：2013-03-24T23:28:28.633
> 
> 标签：php, file, chdir

我有一个三种语言的网站：

```
 www.mysite.com/it/FILES
 www.mysite.com/de/FILES
 www.mysite.com/fr/FILES 
```

在网站的标题上，我有三个链接，每种语言一个。每个链接重定向到

```
/language/index.php 
```

我想将用户重定向到他正在观看的当前页面，但使用新语言。

我试过了

```
__FILE__ 
```

或者

```
dirname 
```

但我没有达到那个！

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T23:34:10.577

在您的负载页面中尝试此操作：

```
$prefix = $_SERVER['HTTP_HOST'];
$file = explode('/', $_SERVER['PHP_SELF']);
$page = $file[count($file)-1];

if (file_exists($prefix.'/it/'.$page)) {
    http_redirect($prefix.'/it/'.$page); // For Italian
}

if (file_exists($prefix.'/de/'.$page)) {
    http_redirect($prefix.'/de/'.$page); // For German
}

if (file_exists($prefix.'/fr/'.$page)) {
    http_redirect($prefix.'/fr/'.$page); // For French
} 
```

在 JavaScript（jQuery 单击示例）中，您将执行以下操作：

```
var host = document.location.hostname;
var path = window.location.href;
var filename = path.replace(/^.*[\\\/]/, '');

$('.myItalianLink').click(function(){
    window.location.href = host + '/it/' + filename; // For Italian
});

console.log(host + '/it/' + filename); 
```

输出：

```
http://www.mywebsite.com/it/html4.php 
```

JavaScript 方法可能更适合您的需求，因为它在用户交互（您命名的链接）的情况下更具反应性。

# python - 使用 Python（urllib2 和 cookielib）登录具有多个页面的网站

> ID：15605408
> 
> 赞同：1
> 
> 时间：2013-03-24T23:29:14.780
> 
> 标签：python, screen-scraping, urllib2, cookielib

我正在编写一个脚本来从我的银行的家庭银行网站检索交易信息，以便在个人移动应用程序中使用。

## 该网站的布局如下：

https://homebanking.purduefed.com/OnlineBanking/Login.aspx

-> 输入用户名 -> 提交表单 ->

https://homebanking.purduefed.com/OnlineBanking/AOP/Password.aspx

-> 输入密码 -> 提交表格 ->

https://homebanking.purduefed.com/OnlineBanking/AccountSummary.aspx

我遇到的问题是因为有 2 个单独的页面可以进行 POST，我首先认为这是会话信息丢失的问题。但我使用 urllib2 的 HTTPCookieProcessor 来存储 cookie 并向网站发出 GET 和 POST 请求，发现这不是问题。

我目前的代码是：

```
import urllib
import urllib2
import cookielib

loginUrl = 'https://homebanking.purduefed.com/OnlineBanking/Login.aspx'
passwordUrl = 'https://homebanking.purduefed.com/OnlineBanking/AOP/Password.aspx'
acctUrl = 'https://homebanking.purduefed.com/OnlineBanking/AccountSummary.aspx'

LoginName = 'sample_username'
Password = 'sample_password'

values = {'LoginName' : LoginName,
      'Password' : Password}

class MyHTTPRedirectHandler(urllib2.HTTPRedirectHandler):
    def http_error_302(self, req, fp, code, msg, headers):
        print "Cookie Manipulation Right Here"
        return urllib2.HTTPRedirectHandler.http_error_302(self, req, fp, code, msg, headers)

    http_error_301 = http_error_303 = http_error_307 = http_error_302

login_cred = urllib.urlencode(values)

jar = cookielib.CookieJar()
cookieprocessor = urllib2.HTTPCookieProcessor(jar)

opener = urllib2.build_opener(MyHTTPRedirectHandler, cookieprocessor)
urllib2.install_opener(opener)
opener.addheaders = [('User-agent', 'Mozilla/5.0 (Windows; U; Windows NT 5.1; de; rv:1.9.1.5) Gecko/20091102 Firefox/3.5.5')]

opener.addheader = [('Referer', loginUrl)]
response = opener.open(loginUrl, login_cred)

reqPage = opener.open(passwordUrl)

opener.addheader = [('Referer', passwordUrl)]
response2 = opener.open(passwordUrl, login_cred)

reqPage2 = opener.open(acctUrl)

content = reqPage2.read() 
```

目前，该脚本使其进入 passwordUrl 页面，因此用户名正确 POST，但是当对 passwordUrl 页面进行 POST 时，它不是转到 acctUrl，而是重定向到登录页面（如果 acctUrl 是重定向位置在没有适当或缺乏凭据的情况下打开）。

在这一点上，非常感谢任何关于如何前进的想法或评论！

# php - 如何将此 php 指令插入 printf 结果？

> ID：15605409
> 
> 赞同：0
> 
> 时间：2013-03-24T23:29:30.037
> 
> 标签：php, wordpress, wordpress-theming

我是 PHP World 的新手，我自定义了一个 WordPress 模板。

我在 php 文件中有以下函数：

```
function admired_posted_on() {
    printf( __( '<span class="sep">Posted on </span>
                 <a href="%1$s" title="%2$s" rel="bookmark">
                    <time class="entry-date" datetime="%3$s" pubdate>%4$s</time>

                 </a>

                 <span>BLABLA</span>
                 <span class="by-author"> 
                    <span class="sep"> by bla</span> 
                    <span class="author vcard">
                        <a class="url fn n" href="%5$s" title="%6$s" rel="author">%7$s</a>

                    </span>

                 </span>
                 ', 'admired' ),

    esc_url( get_permalink() ),
    esc_attr( get_the_time() ),
    esc_attr( get_the_date( 'c' ) ),
    esc_html( get_the_date() ),
    esc_url( get_author_posts_url( get_the_author_meta( 'ID' ) ) ),
    sprintf( esc_attr__( 'View all posts by %s', 'admired' ), get_the_author() ),
    esc_html( get_the_author() )
    );
    } 
```

现在，我必须在**printf**正文中将以下 php 代码插入到**BLABLA**标记中，而不是“BLABLA”文本。这是我必须插入的 php 代码：

```
<?php echo '(' . get_PostViews(get_the_ID()) . ')'; ?> 
```

如果我将 ithis 行插入到前一个 span 标签中，则会出错。

get_PostViews(get_the_ID()) 返回一个必须在该范围内显示的整数

有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T23:39:56.293

如果用单引号括起来`'`的字符串中有单引号，则必须转义该引号。像这样（注意`\'`）：

```
$string = '<span class="sep">Posted on <?php echo \'(\' . get_PostViews(get_the_ID()) . \')\'; ?></span>... more content ....'; 
```

但在您的示例中，以下解决方案可能更简单：

```
$string = '<span class="sep">Posted on (<?php echo get_PostViews(get_the_ID()); ?>)</span>... more content ....'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T04:06:50.017

这是您的功能的另一种方法。

```
function admired_posted_on() {
    printf( __( '<span class="sep">Posted on </span>
                 <a href="%1$s" title="%2$s" rel="bookmark">
                    <time class="entry-date" datetime="%3$s" pubdate>%4$s</time>
                 </a>
                 <span>%5$s</span>
                 <span class="by-author"> 
                    <span class="sep"> by bla</span> 
                    <span class="author vcard">
                        <a class="url fn n" href="%6$s" title="%7$s" rel="author">%8$s</a>
                    </span>
                 </span>
                 ', 'admired' ),

    esc_url( get_permalink() ),
    esc_attr( get_the_time() ),
    esc_attr( get_the_date( 'c' ) ),
    esc_html( get_the_date() ),
    get_PostViews(get_the_ID()),
    esc_url( get_author_posts_url( get_the_author_meta( 'ID' ) ) ),
    sprintf( esc_attr__( 'View all posts by %s', 'admired' ), get_the_author() ),
    esc_html( get_the_author() )
    );
} 
```

**附加答案：**

要回答您的问题，如果您在一行中看到它可能会更容易。

```
printf('First Var: %1$s | Second Var: %2$s | Third Var: %3$s', $firstvar, $secondvar, $thirdvar); 
```

%1$s 是在引用文本之后列出的后续变量的占位符。

相同的信息可以以相同的方式显示，但与原始帖子的间距不同

```
printf('First Var: %1$s | Second Var: %2$s | Third Var: %3$s', 
    $firstvar, 
    $secondvar, 
    $thirdvar
); 
```

并且在文本前面添加下划线可以将文本翻译成多种语言（这是 Wordpress 内部的一个功能），并且带有“admired”的逗号仅表示受赞赏的主题标识符，它将在其中寻找翻译方法。

```
printf(__('First Var: %1$s | Second Var: %2$s | Third Var: %3$s', 'admired'), 
    $firstvar, 
    $secondvar, 
    $thirdvar
); 
```

# php - RP游戏的经验点跳跃和练级

> ID：15605410
> 
> 赞同：2
> 
> 时间：2013-03-24T23:29:38.113
> 
> 标签：php, math

对不起“半模糊”的标题，但我想不出更好的标题。

无论如何，我正在使用 PHP 构建一种 RP 游戏，现在我正在尝试弄清楚如何提升用户级别并保持经验值的“溢出”并可能再次提升他们的级别。

所以假设我的角色是 1 级，我需要 400 exp 才能达到 2 级。目前我所拥有的是，当我达到 400 或更高时，它会提高我的等级并重置我的 exp。但是我想做的是，如果我获得 450 exp，它会提高我的水平并将我的 exp 重置为溢出，在这种情况下为 50。这并不难，棘手的部分是如果我获得如此多的经验，我会升级不止一次！

目前我有这个代码，

```
 public function advLvl($user) {
        $sql = $this->db->prepare("UPDATE `characters` SET `level` = `level` + 1, `experience` = '0' WHERE `u_name` = :user");
        $sql->execute(array(":user" => $user));
    }

    public function checkLvl($user, $currLvl) {
        $sql = $this->db->prepare("SELECT `experience` FROM `characters` WHERE `u_name` = :user");
        $sql->execute(array(":user" => $user));
        $exp = $sql->fetchColumn();

        if($exp >= $this->expNextLevel($currLvl)) {
            $this->advLvl($user);
        }
    }

    public function expNextLevel($currLvl) {
        if($currLvl == 1) {
            return 400;
        }else {
            $gain = 400 + $this->defaultMobGain($currLvl);
            $expNextLevel = 120 + ($gain * $currLvl);
            return $expNextLevel;
        }
    } 
```

每一次我都会这样做，

```
 $alt->checkLvl($_SESSION["username"], $char_info["level"]); 
```

这提高了我的等级，一切正常，唯一的问题是，如果我获得如此多的经验，我将不止一次前进，那么它只会在每次刷新时增加。所以假设我是 1 级并且我获得了 1320 exp，这足以让我升到 3 级（1 级 = 400，2 级 = 920）。但为了跟上变化，我必须刷新页面两次。

所以我假设你必须构建某种递归函数。比如，当我当前的 exp 大于或等于到下一个级别的 exp 量时，提升我的级别。但是，并不是那么简单，while 循环将被执行数百次，我只需要它执行两次（在这种情况下）。我该怎么做呢？

希望这是有道理的，并且您了解我要完成的工作，如果您需要更多信息，请告诉我。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T23:39:45.827

我会存储总金额而不重置为零。然后根据他们所处的级别进行数学计算。

这是我建议的一个例子。每个级别所需的 exp 只是在这里硬编码，但可以像你正在做的那样即时计算（不确定 defaultModGain 正在做什么，所以我只是硬编码）。

```
function getLevel($exp) {
    $levels = array(0, 400, 920, 1320);

    for ($i = (count($levels) - 1); $i >= 0; $i--) {
        if ($exp >= $levels[$i]) {
            return $i + 1;
        }
    }

    return 1;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T13:21:45.670

像其他人一样，我建议不要在升级后重置经验值，而是插入总经验 - 总等级之间的差异。然后重新计算升级所需的经验并在此之后重新检查。只要获得的经验高于升级要求，就应该有升级。

# java - 如何在Android中修复Button的位置

> ID：15605414
> 
> 赞同：1
> 
> 时间：2013-03-24T23:29:57.447
> 
> 标签：java, android, android-linearlayout

我正在开发一个项目，我需要在该项目中动态添加`TextView`以及`Spinner`通过程序。我能够成功地从我的程序中动态添加这两件事。

下面是我为此使用的 XML 布局。

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <LinearLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/llayout"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:orientation="vertical" >

        <Button
            android:id="@+id/button1"
            android:layout_width="100px"
            android:layout_height="wrap_content"
            android:layout_gravity="center_vertical|center_horizontal|center"
            android:gravity="center_vertical|center_horizontal"
            android:text="Save" />

    </LinearLayout>

</ScrollView>

Problem Statement:- 
```

所以我想要的是 - 所有的`TextView`and`Spinner`应该首先显示，然后最后`Button`应该显示。

但是当前正在发生的事情`Save Button`会显示在顶部，然后显示所有其他内容`TextView and Spinner`。

我如何确保该按钮出现在屏幕底部。

以下是您可以从中找出问题的屏幕截图。我想在屏幕底部显示保存按钮。

![在此处输入图像描述](../Images/c060984b6406b3f927d7613d35a3c2c2.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T23:42:59.170

或者您可以在代码中创建一个这样的按钮，并在添加如下所有微调器和文本视图后添加到您的布局中，您必须从您的 xml 中删除按钮的声明：

```
 Button button = new Button(this) ///this is a context object

   button.setWidth(100);
   button.setText("Save");

  layout.addView(button); 
```

您可以动态创建布局并将按钮添加到该布局，然后将此布局添加到超级布局

或者你可以做的是在 res/layout/savebutton_layout.xml 中声明一个新的 xml 文件

```
 <?xml version="1.0" encoding="utf-8"?>
   <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
       android:layout_width="fill_parent"
       android:layout_height="fill_parent"
       android:orientation="horizontal"
       android:id="@+id/lLayoutBT"

        >

       <Button
           android:id="@+id/saveBT"
           android:layout_width="wrap_content"
           android:layout_height="wrap_content"
           android:layout_gravity="center"
           android:text="@string/save" />

   </LinearLayout> 
```

现在在您的代码中，您必须找到包含按钮的布局，然后将此布局添加到您的主布局中（就像您添加按钮一样）

例如

```
 LinearLayout buttonLayout =(LinearLayout)  view.findViewById(R.id.lLayoutBT);  
     views.add(buttonLayout); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T23:33:35.993

如果您将您的更改`LinearLayout`为 a`RelativeLayout`然后将其添加到您的`Button`

```
<Button
...
android:layout_alignParentBottom="true"/> 
```

它应该给你你想要的。我不再尽可能频繁地使用`RelativeLayout`代替，因为在大多数情况下，它更加灵活和高效。`LinearLayout`他们需要更多时间来适应，但绝对值得花时间去理解和实施

**编辑**

```
 <?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

<RelativeLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/llayout"
    android:layout_width="match_parent"
    android:layout_height="match_parent">

    <Button
        android:id="@+id/button1"
        android:layout_width="100px"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_centerHorizontal="true"/>
        android:text="Save" />

</RelativeLayout>

</ScrollView> 
```

像这样的东西应该工作。你可能需要稍微玩一下才能得到你想要的东西，但这应该能让你到达那里。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T23:33:52.413

如果您使用 a `RelativeLayout`（而不是 a `LinearLayout`），您可以访问以下属性：

```
<Button
android:id="@+id/button1"
android:layout_alignParentBottom="true"
android:layout_alignParentLeft="true"
...
</Button> 
```

# javascript - 如何检查 popcorn js 是否无法加载 YouTube 视频？

> ID：15605424
> 
> 赞同：0
> 
> 时间：2013-03-24T23:32:04.653
> 
> 标签：javascript, youtube, popcornjs

我正在将 YouTube 视频加载到 popcorn.js 中。如何检查它是否无法加载？

这是我当前的代码：

```
document.addEventListener("DOMContentLoaded", function () {
  // Create a popcorn instance by calling the Youtube player plugin
  var example = Popcorn.youtube(
    '#video',
    'http://www.youtube.com/watch?v=Zm1c2WTD93w&rel=0'
  );
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T01:52:25.887

正如您在爆米花的媒体事件[页面](http://popcornjs.org/popcorn-docs/events/)上看到的那样，它们有一个错误事件。[您可以在实用方法页面](http://popcornjs.org/popcorn-docs/utility-methods/#Popcorn.plugin.errors)上了解如何处理它。

# python - GAESessions (Python) - “AttributeError: 'thread._local' 对象没有属性 'current_session'。”

> ID：15605426
> 
> 赞同：0
> 
> 时间：2013-03-24T23:32:13.753
> 
> 标签：python, google-app-engine, python-2.7

因此，我一直在尝试将 Janrain Engage 插件实施到我正在开发的应用程序（Google App Engine (Python 2.7)）中，使用 GAESessions 作为会话库。

按照[GAESessions 页面](https://github.com/dound/gae-sessions#readme)上的说明，我在应用程序的根目录中创建了“gaesessions”文件夹（包含“__init__.py”）和“appengine_config.py”，以及处理插件的相关文件。

然而，尝试通过 Janrain 登录时，我抛出了一个 500 错误，并在 GAE 日志中给了我这个回溯：

```
E 2013-03-25 07:06:55.535

'thread._local' object has no attribute 'current_session'
Traceback (most recent call last):
  File "/python27_runtime/python27_lib/versions/third_party/webapp2-2.5.1/webapp2.py", line 1536, in __call__
    rv = self.handle_exception(request, response, e)
  File "/python27_runtime/python27_lib/versions/third_party/webapp2-2.5.1/webapp2.py", line 1530, in __call__
    rv = self.router.dispatch(request, response)
  File "/python27_runtime/python27_lib/versions/third_party/webapp2-2.5.1/webapp2.py", line 1278, in default_dispatcher
    return route.handler_adapter(request, response)
  File "/python27_runtime/python27_lib/versions/third_party/webapp2-2.5.1/webapp2.py", line 1102, in __call__
    return handler.dispatch()
  File "/python27_runtime/python27_lib/versions/third_party/webapp2-2.5.1/webapp2.py", line 572, in dispatch
    return self.handle_exception(e, self.app.debug)
  File "/python27_runtime/python27_lib/versions/third_party/webapp2-2.5.1/webapp2.py", line 570, in dispatch
    return method(*args, **kwargs)
  File "/base/data/home/apps/s~k-sketch-test/10.366190612177083948/rpx.py", line 56, in post
    session = get_current_session()
  File "/base/data/home/apps/s~k-sketch-test/10.366190612177083948/gaesessions/__init__.py", line 38, in get_current_session
    return _tls.current_session
AttributeError: 'thread._local' object has no attribute 'current_session' 
```

我已经搜索了有关“get_current_session()”问题的[其他](https://stackoverflow.com/questions/15489106/gaesessions-cant-find-current-session-attribute) [帖子](https://stackoverflow.com/questions/8095426/how-to-use-gaesessions-in-google-app-engine)，但它们似乎引用的是“local”而不是“thread._local”。

关于这里发生了什么的任何想法？提前致谢！

========

**{根文件夹}/appengine_config.py**

```
from gaesessions import SessionMiddleware

import os
COOKIE_KEY = '<hidden - was generated through os.urandom(64)>'

def webapp_add_wsgi_middleware(app):
  from google.appengine.ext.appstats import recording
  app = SessionMiddleware(app, cookie_key=COOKIE_KEY)
  app = recording.appstats_wsgi_middleware(app)
  return app 
```

========

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-27T17:56:47.050

**{root 文件夹}/appengine_config.py**文件 appengine_config.py 是否在根位置？

```
aaps/app.yaml
    /main.py
    /appengine_config.py
    /gaesessions #folder 
```

可以看[gaesessions的基本教程](http://blog.stannard.net.au/2011/01/09/how-to-use-sessions-on-google-app-engine-with-python-and-gae-sessions/)

# c# - C#：将传入的串行数据和输出拆分到单独的文本框

> ID：15605432
> 
> 赞同：1
> 
> 时间：2013-03-24T23:32:54.680
> 
> 标签：c#

我正在从 C# 中的串行端口读取数据。目前我的微控制器上有两个传感器，我正在从我的应用程序中的两个传感器接收数据。

传入看起来像这样： `:*123*188;`where， `:`代表数据的开始

`*`第一次出现表示传感器 1 数据

`*`第二次出现表示传感器 2 数据

`;`代表数据结束

为了摆脱我使用的标点符号：

```
var DataPacket = SensorData.Split(new[]{":",";"},StringSplitOptions.RemoveEmptyEntries) 
```

现在我离开了：*123*188。如何分离两个传感器数据并将它们放在不同的文本框中。

我努力了：

```
foreach(var Data in DataPacket)
{
    string bits[] = Data.Split(new[] {"*"},StringSplitOptions.RemoveEmptyEntries);     
} 
```

但是，`textbox1.Text = bits[0]`在同一个框中同时读取传感器 1 和传感器 2 的值。并且`bits[1]`越界了。

请指导我解决这个问题。

编辑：这是读取数据并尝试对其进行相应拆分的扩展代码：

private void OnReceive(object sender, System.IO.Ports.SerialDataReceivedEventArgs s) { //FOR 1 SENSOR string SensorData = AvailablePort.ReadLine(); this.BeginInvoke(new LineReceivedEvent(LineReceived), SensorData);

```
 }

    private delegate void LineReceivedEvent(string SensorData);

    private void LineReceived(string SensorData)
    {

       /*** FOR SECOND SENSOR****************/ 
        int startReading = SensorData.IndexOf(":");
        int endReading = SensorData.IndexOf(";");
        /********                   ************/

        //int userRange = Convert.ToInt32(Temp_Range.SelectedValue);
        //int data = Int32.Parse(SensorData);

        /*** FOR SECOND SENSOR ************************************************/
        var DataPacket = SensorData.Split(new[] { ":", ";" }, StringSplitOptions.None);

        foreach (var Data in DataPacket)
        {
            //textBox1.Text = Data;
            //TRYING TO READ MORE THAN 1 SENSOR HERE
            var newData = SensorData.Split(new[] { "*" }, StringSplitOptions.None);
            while(true)
            {
                foreach (var data in newData)
                {
                    textBox1.Text = data[0].ToString();
                }
            } 
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T23:46:14.087

如果要包含 null 或空元素，请不要添加 StringSplitOptions.RemoveEmptyEntries。前任：

```
Without remove
*121
a[0]=null
a[1]=121
121*
a[0]=121
a[1]=null
111*222
a[0]=111
a[1]=222

with remove
*121
a[0]=121
a[1]=OutOfRangeException
121*
a[0]=121
a[1]=OutOfRangeException
111*222
a[0]=111
a[1]=222 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T23:57:19.133

Although there seems to be some code ambiguity for me here, but I think you need to change the following line of code:

```
var newData = SensorData.Split(new[] { "*" }, StringSplitOptions.None);
while(true)
{
      foreach (var data in newData)
      {
            textBox1.Text = data[0].ToString(); // Remove the index from data as this is not a collection but a variable
      }
} 
```

I think you should rewrite this bit of code as follows:

```
String[] newData = SensorData.Split(new[] { "*" }, StringSplitOptions.RemoveEmptyEntries);
for(int i=0; i<newData.Length; i++)
{
    textBox1.Text = newData[i]; // You will need to manipulate the textboxes better here, since the
} 
```

Now I may be wrong in understanding but I think this should work for you apart from changes in assigning these values to the textboxes as you seem to have hardcoded them. For instance the for loop could be replaced with something like this:

```
switch(newData.Length)
{
    case 0:
        break;
    case 1:
        textbox1.Text = newData[0];
        break;
    case 2:
        textbox1.Text = newData[0];
        textbox2.Text = newData[1];
        break;
    ...
    case n:
        break;
} 
```

Hope this makes sense.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T23:49:52.990

我在这里不是 Visual Studio，但你应该尝试这样的事情：

```
string bits[] = Data.Split("*"); 
```

这应该给你这个：

```
bits[0] = null;
bits[1] = 123;
bits[2] = 188; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-25T00:44:54.737

提取数据的方式没有任何问题，但只需确保从串行端口获取的数据真正遵循模式，您的程序是否有可能在读取到数据末尾之前继续？

# r - R twitteR 包，尽管有限制也能获得追随者

> ID：15605437
> 
> 赞同：3
> 
> 时间：2013-03-24T23:33:18.087
> 
> 标签：r, twitter, twitter-r

我一直在玩 R`twitteR`包，但还没有弄清楚如何实现一个系统来收集超过`#`twitter 用户每小时最大关注者的数量。
我知道计划应该是收集最大值，等待 X 时间，然后重复直到收集所有内容，但是我该如何处理`twitteR`包呢？
该`getFollowers(n)`过程每次都会保持相同的n个追随者。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T14:48:56.493

尝试将 blockOnRateLimit=TRUE 添加到您的通话中。它会坐下来等待它完成（这可能需要*很长时间*，具体取决于您请求的大小）。这是一个“隐藏”参数，因为我不确定我是否想保持原样 - 事实上，它几乎肯定会在下一个版本中有所改变，但现在它应该能让你到达你想要的位置需要去。

# ruby - 包含模块如何工作？

> ID：15605440
> 
> 赞同：0
> 
> 时间：2013-03-24T23:33:20.657
> 
> 标签：ruby

```
module A
end 

class Klass
  include A
end 
```

这包括如何影响 Klass？它是简单地将 Klass 放入模块 A 中还是做更多的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T23:38:07.050

简短的回答：如果你的模块中有一些方法并且你`include`在一个类中使用，那么这些方法可以在类中使用。

```
Module A
  def shout
    puts "HEY THERE!!!!"
  end
end 

class Klass
  include A
end 

# Create instance of Klass
instance = Klass.new

# Produces "HEY THERE!!!!"    
instance.shout 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T00:08:29.607

`include`是将模块的方法包含在另一个模块或类中的方法之一。

请阅读[我](http://tech.pro/tutorial/1149/understanding-method-lookup-in-ruby-20)关于它如何影响 Ruby 中的方法调用的文章/

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-24T23:35:35.827

> include 方法从另一个模块中获取所有方法，并将它们包含到当前模块中。这是一个语言级别的东西，而不是文件级别的东西，就像 require 一样。include 方法是使用其他模块“扩展”类的主要方法（通常称为 mix-ins）。例如，如果你的类定义了方法“each”，你可以包含 mixin 模块 Enumerable 并且它可以作为一个集合。这可能会令人困惑，因为包含动词在其他语言中的使用方式非常不同。

从这里：[Ruby中的include和require有什么区别？](https://stackoverflow.com/questions/318144/what-is-the-difference-between-include-and-require-in-ruby)

也看看这个页面：[http](http://www.ruby-doc.org/docs/ProgrammingRuby/html/tut_modules.html) ://www.ruby-doc.org/docs/ProgrammingRuby/html/tut_modules.html它有一个关于包含如何工作的详细解释。

# java - 如何在多个 Maven 项目中使用 Maven 发布插件

> ID：15605441
> 
> 赞同：2
> 
> 时间：2013-03-24T23:33:20.773
> 
> 标签：java, continuous-integration, maven-3, maven-release-plugin

我正在使用 Maven 3。

我有多个 Maven 项目，即：“数据模型”、“服务”和“演示”，分为 3 个不同的项目。它们是单独配置的（即不使用 maven parent pom）。

![项目设置](../Images/5ce8efbb9d87336c5036288bfbb8abd7.png)

我在我的项目上正确设置了 maven 发布插件，这样当我`mvn release:clean release:prepare release:perform`在每个单独的项目上运行时，它会更新项目版本（即：从 3.4.5-SNAPSHOT 到 3.4.5）以及所有其他内容。

这里的问题是，“展示”依赖于“服务”依赖于“数据模型”，我在 pom 文件中引用了带有版本号的项目。

例如，当我开发时，我会将“演示文稿”中的“服务”称为 3.4.5-SNAPSHOT。但是在部署期间，我必须发布“服务”以将版本更改为 3.4.5，然后我必须在“演示”中更新“服务”的版本引用，然后才能在“演示”上运行发布。

是否有一种自动化的方式来做到这一点，这样我就不需要在发布期间更新依赖项目的引用？

## 感谢以下评论，我有什么：更新：25/03/2013

使用以下命令运行 Maven：

```
versions:use-releases -Dmessage="update from snapshot to release" scm:checkin release:clean release:prepare release:perform 
```

结果：版本更新，但发布构建失败。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T02:31:38.713

[Versions Maven 插件](http://mojo.codehaus.org/versions-maven-plugin/)可以帮助您实现需求，尤其是目标版本[：use-releases](http://mojo.codehaus.org/versions-maven-plugin/use-releases-mojo.html)。您可能对目标[版本感兴趣：use-next-releases](http://mojo.codehaus.org/versions-maven-plugin/use-next-releases-mojo.html)和[版本：use-latest-releases](http://mojo.codehaus.org/versions-maven-plugin/use-latest-releases-mojo.html)。

### 边注：

通常，好的做法是将它们定义为 Maven 多模块（[此处](http://maven.apache.org/guides/mini/guide-multiple-modules.html)和[此处](http://www.sonatype.com/books/mvnex-book/reference/multimodule.html)）。这使我们可以更轻松地管理版本，如下例所示。

### 父母

```
<groupId>my-group</groupId>
<artifactId>my-parent</artifactId>
<version>0.0.1-SNAPSHOT</version>
<packaging>pom</packaging>

    .....

<modules>
    <module>my-model</module>
    <module>my-service</module>
    <module>my-ui</module>
</modules> 
```

### 我的模型

```
<parent>
    <groupId>my-group</groupId>
    <artifactId>my-parent</artifactId>
    <version>0.0.1-SNAPSHOT</version>
</parent>
<artifactId>my-model</artifactId> 
```

### 我的服务

```
<parent>
    <groupId>my-group</groupId>
    <artifactId>my-parent</artifactId>
    <version>0.0.1-SNAPSHOT</version>
</parent>
<artifactId>my-service</artifactId>
<dependencies>
    <dependency>
        <groupId>${project.groupId}</groupId>
        <artifactId>my-model</artifactId>
        <version>${project.version}</version>
    </dependency>
</dependencies> 
```

### 我的用户界面

```
<parent>
    <groupId>my-group</groupId>
    <artifactId>my-parent</artifactId>
    <version>0.0.1-SNAPSHOT</version>
</parent>
<artifactId>my-ui</artifactId>
<dependencies>
    <dependency>
        <groupId>${project.groupId}</groupId>
        <artifactId>my-service</artifactId>
        <version>${project.version}</version>
    </dependency>
</dependencies> 
```

对于上面的例子，我们发布的时候，相关的版本会根据父版本自动更新。

# javascript - 在我的演示站点中使用来自另一个网站的 D3

> ID：15605449
> 
> 赞同：-4
> 
> 时间：2013-03-24T23:34:32.373
> 
> 标签：javascript, svg, d3.js

请看看这个很棒的项目： [http ://d3-generator.com](http://d3-generator.com)

我希望明天的演示完全相同，但我必须使用**R2D3**而不是 D3。 [https://github.com/mhemesath/r2d3/](https://github.com/mhemesath/r2d3/) R2D3 与 D3 几乎相同，您的 D3 代码中的大多数也只能在 R2D3 中工作。但就像我说的，我需要使用 R2D3，而 D3-Generator 正是我需要的演示。

我怎样才能使用它的源代码并像那样为自己创建一个演示**但是使用 R2D3**而不是 D3？如果是 D3，我可以直接从那个 URL 演示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T12:35:48.877

R2D3 只不过是 D3 的填充版本，使其可以在 Internet Explorer 7 和 8 中运行。您应该能够运行生成器以获取 D3 代码片段。然后包括该脚本，以及为 IE 加载 R2D3 的条件脚本，以及为所有其他现代浏览器加载的标准 D3。

R2D3 是以这种方式构建的，因此一旦您不关心 IE 7 和 8，就可以将其删除，对代码库的影响为 0。仅使用 R2D3 是一个坏主意，因为这意味着您的可视化仅适用于旧版本的 Internet Explorer . R2D3 是在假设它在 Internet Explorer 中运行的情况下构建的

# cmd - 仅列出指定文件夹的子文件夹中的文件

> ID：15605455
> 
> 赞同：0
> 
> 时间：2013-03-24T23:35:06.813
> 
> 标签：cmd

这个问题可能有一个简单的解决方案，但我就是找不到。

假设我正在使用 DIR 命令生成文件夹“E:\Documents”中的 .txt 文件列表。如何确保仅列出“E:\Documents”下一级的 .txt 文件（即在直接子文件夹中），而不是“E:\Documents”本身中的文件。"E:\Documents\\" 或 "E:\Documents\*\" 似乎不起作用。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T12:12:07.010

这可以在没有`dir`：

```
for /d %%d in ("C:\basedir\*") do for %%f in ("%%~fd\*.txt") do echo %%~ff 
```

如果您不仅需要文件名，还需要有关文件的详细信息，请添加相应的限定符，例如：

```
for /d %%d in ("C:\basedir\*") do for %%f in ("%%~fd\*.txt") do echo %%~azff 
```

*   `a`→ 文件的属性
*   `t`→ 文件的时间戳
*   `z`→ 文件大小

详情请参阅`help for`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T23:54:02.293

```
FOR /f "delims=" %%i IN ('dir /b/ad') DO IF EXIST ".\%%i\*.txt" DIR ".\%%i\*.txt" 
```

那就是如果你想要 DIR 格式的输出 - 带有标题

```
FOR /f "delims=" %%i IN ('dir /b /ad') DO IF EXIST ".\%%i\*.txt" (
  FOR /f "delims=" %%q IN ('DIR /b ".\%%i\*.txt" ') DO ECHO ".\%%i\%%q"
  ) 
```

如果你只想要文件名。

# css - 如何在部分 html 代码中不使用 body style css 规则？

> ID：15605456
> 
> 赞同：2
> 
> 时间：2013-03-24T23:35:10.637
> 
> 标签：css, html, styles

我有这种`body`风格的 CSS 规则。我想知道我怎样才能**保持规则**，但只是不将它用于我之后立即开始的代码的一部分`<body>`？紧随其后的代码`<body>`是大约 5 个超链接，彼此之间只有一个。

目前，当前的 css 格式化了我不想要的超链接大小和字体；有没有办法让这些超链接有自己的字体或大小或有默认值（基本格式）？如何才能做到这一点 ？

css规则：

```
body {
    direction: ltr;
    font-size:62.5%;
    color:#555;
    font-family:Tahoma, Arial, Helvetica, Verdana, Sans-Serif;
    z-index:1; 
```

}

之后的代码`<body>`：

```
<a href="./link1.html">link1</a>  <br />
<a href="./link2.html">link2</a>  <br />
<a href="./link3.html">link3</a>  <br />
<a href="./link4.html">link4</a>  <br />
<a href="./link5.html">link5</a>  <br /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T23:39:02.683

特定规则会覆盖 CSS 中的一般规则。下面的基本示例。

```
body {
    direction: ltr;
    font-size:62.5%;
    color:#555;
    font-family:Tahoma, Arial, Helvetica, Verdana, Sans-Serif;
    z-index:1;
}

a {
    font-size:42.5%;
} 
```

## 更新

**HTML：**

```
<div id="example">
  <a href="./link1.html">link1</a>  <br />
  <a href="./link2.html">link2</a>  <br />
  <a href="./link3.html">link3</a>  <br />
  <a href="./link4.html">link4</a>  <br />
  <a href="./link5.html">link5</a>  <br />
</div> 
```

**CSS：**

```
body {
    font-size:62.5%;
    color:#555;
}

#example a {
    font-size:42.5%;
    color:red;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T23:47:42.103

有很多方法可以实现这一点如果你想在你的 html 中使用不同字体的所有超链接，你可以指定

```
a{
   font-size:5px;
} 
```

或者您只想制作某些超链接以具有不同的字体

```
 <div id="menu">
    <a href="./link1.html">link1</a>  <br />
    <a href="./link2.html">link2</a>  <br />
    <a href="./link3.html">link3</a>  <br />
    <a href="./link4.html">link4</a>  <br />
    <a href="./link5.html">link5</a>  <br />
   </div> 
```

现在在 CSS

```
#menu a
{
 font=size:5px;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T23:37:57.093

> 有没有办法让这些超链接有自己的字体或大小

只需编写一个 CSS 规则集，其中包含与链接匹配的选择器，以及更改字体和/或字体大小的规则。

> 或有默认值（基本格式）？

不。

# java - BFS或DFS的应用

> ID：15605457
> 
> 赞同：0
> 
> 时间：2013-03-24T23:35:14.590
> 
> 标签：java, search

我需要帮助来解决这个问题，我尝试使用二维数组，然后找到最少的交换次数。不确定如何解决这个问题。是使用 BFS 还是 DFS？

给你两个四位数的数字。第一个数字是初始数字，第二个数字是目标数字。编写一个 java 程序，使用尽可能少的操作将初始数字转换为目标数字。可用的操作如下： 四位数字之一加 1。将 1 加到 9 得到 0。从四个数字之一中减去 1。从 0 中减去 1 得到 9。交换两个相邻的数字

例如 1：初始编号：1111

最终编号：9999

最少操作次数：8

例如 2：初始编号：1234

最终编号：2144

最少操作次数：2

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-04T04:47:59.990

您应该使用 BFS 算法，因为它将为您提供将第一个数字转换为目标数字的最短方法。DFS 仅探索路径，而不是最短路径。在某些情况下，DFS 可能比 BFS 更快地找到解决方案，但没有算法保证。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T00:23:08.463

BFS。

当 DFS 找到第一个解决方案时，它通常不是在尽可能少的移动次数中找到的。当解决方案接近时，它还可以探索漫长而无意义的路径（如果您不记得访问过的节点，它可能会陷入无限循环）。这些问题可以通过迭代深化 DFS 来解决，如果存在内存限制，这可能是可取的，但对于如此小的搜索空间，BFS 更简单。

# c++ - 为什么这不访问矢量位置？

> ID：15605458
> 
> 赞同：1
> 
> 时间：2013-03-24T23:35:16.927
> 
> 标签：c++, vector, void-pointers

我正在为我的班级写一个回溯问题，我必须实现一些现有的功能。这是我必须实现的功能之一。这`void *input`是我们应该传入数据的地方，在我的例子中是一个二维向量。

```
void process_solution(int a[], int k, void *input, bool *finished)
{
    int sumweight = 0;
    int sumvalue = 0;
    std::vector<std::vector<int> > *datavector = static_cast<std::vector<std::vector<int> >* >(input);
    for(unsigned i=0; i<sizeof(a); i++)
    {
        sumweight += a[i]*datavector[i][0];
        sumvalue += a[i]*datavector[i][1];
    }
} 
```

但是，我认为我的演员阵容有问题，因为我在线路上遇到错误`sumweight += a[i]*datavector[i][0];`

> 错误：在 '*(a + ((long long unsigned int)(((long long unsigned int)i) * 4ull))) * (datavector + ((long long unsigned int)(( (long long unsigned int)i) * 24ull)))->std::vector<_Tp, _Alloc>::operator[] with _Tp = std::vector, _Alloc = std::allocator >, std::vector< _Tp, _Alloc>::reference = std::vector&, std::vector<_Tp, _Alloc>::size_type = long long unsigned int'

如果我尝试使用另一个变量来访问向量，例如`int t1 = datavector[i][0];`，我会得到一个错误

> 错误：无法在初始化中将 'std::vector' 转换为 'int'

我认为 void 指针可以用来传递任何东西，只要进行了正确的转换。这里发生了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-24T23:38:56.377

您的`datavector`变量是*指向*向量向量的指针`int`，因此您应该应用适当的取消引用：

```
sumweight += a[i] * (*datavector)[i][0];
//                  ^^^^^^^^^^^^^

sumvalue += a[i] * (*datavector)[i][1];
//                 ^^^^^^^^^^^^^ 
```

此外，这：

```
for (unsigned i=0; i < sizeof(a); i++)
//                     ^^^^^^^^^ 
```

不会计算数组中元素的数量（这让我认为您没有使用的*参数*`k`是为了包含该数组的长度）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T23:42:50.107

首先，你的循环是错误的：

```
for(unsigned i=0; i<sizeof(a); i++) 
```

`sizeof(a)`将始终是`sizeof(int*)`因为无论您的签名如何，您都无法将数组传递给函数。该参数将是一个指针，因此您将永远无法正确访问您的向量。

您的下一个问题是您有一个指向向量的指针（通常是个坏主意），但您没有正确取消引用它在索引到下一个向量（然后进入下一个向量......）之前需要一个取消引用，即，

```
sumweight += a[i] * (*datavector)[i][0]; 
```

接下来，问问自己；你为什么要处理指向向量的指针的指针？这是一个非常草率且容易出错的解决方案。

# c# - 更改用户上下文

> ID：15605460
> 
> 赞同：1
> 
> 时间：2013-03-24T23:35:39.933
> 
> 标签：c#, entity-framework, asp.net-mvc-4, entity-framework-migrations

我正在使用 MVC4 Internet 应用程序，并且正在尝试更改帐户模型以使用我的上下文。我似乎无法让它工作。我试图删除上下文并将用户配置文件包含在我的上下文中，我可以登录等，但是当我通过用户 ID 检查配置文件时，它返回一个空值。

```
public DbSet<FightCard> FightCards { get; set; }
public DbSet<Fight> Fights { get; set; }
public DbSet<Fighter> Fighters { get; set; }
public DbSet<UserProfile> UserProfiles { get; set; }

[Table("UserProfile")]
public class UserProfile
{
    [Key]
    [DatabaseGeneratedAttribute(DatabaseGeneratedOption.Identity)]
    public int UserId { get; set; }
    public string UserName { get; set; }

} 
```

当我尝试这样做时：

```
public ActionResult Profile(int id)
    {
        UserProfile profile = uc.UserProfiles.Find(id);
        ViewBag.Name = profile.UserName;
    } 
```

我得到一个空值返回。任何人都知道如何在不同的上下文中成功使用简单的成员资格？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T01:06:38.363

在那里解决了。但老实说，我不确定是什么修复了它。这是我使用的链接，其中一部分解决了我的问题。

[http://dansgreenshoes.com/2013/03/10/mvc4usertable/](http://dansgreenshoes.com/2013/03/10/mvc4usertable/)

# html - 在 dijit 中制作搜索框

> ID：15605462
> 
> 赞同：1
> 
> 时间：2013-03-24T23:35:41.363
> 
> 标签：html, css, dojo

[http://jsfiddle.net/PRAPc/](http://jsfiddle.net/PRAPc/)

我想要在文本框的开头呈现这样的搜索图标[，](http://app.maqetta.org/maqetta/user/CoQ/ws/workspace/project1/search_icon.png)但我无法让以下内容正常工作。请帮忙。

## html:

```
<body class="claro" data-maq-flow-layout="true" data-maq-comptype="desktop" data-maq-ws="collapse" style="margin-top:0" id="myapp" data-maq-appstates="{}">
 <div id="top_bar">
 <div style="width: 900px; height:50px; margin-left: auto; margin-right: auto;">
<a href="/" class="logo logo_a">
 <div class="logo">

 </div>
</a>
<div class="midArea_div">
 <div class="searchBox_div">
   <input type="text" data-dojo-type="dijit.form.TextBox" class="searchBox"></input>
 </div>
</div>
</div>

</div>
 <div id="top_bar_divider"></div>
 <div data-dojo-type="dijit.layout.BorderContainer" persist="false" gutters="true" style="min-width: 1em; min-height: 1px; z-index: 0; width: 600px; height: 687px; margin-left: auto; margin-right: auto;" design="headline">
   <div data-dojo-type="dijit.layout.ContentPane" extractContent="false" preventCache="false" preload="false" refreshOnShow="false" region="center" splitter="false" maxSize="Infinity">
  </div>
 </div>
</body> 
```

## js：

```
require([
  "dijit/dijit",
  "dojo/parser",
  "maqetta/space",
  "maqetta/AppStates",
  "dijit/layout/BorderContainer",
  "dijit/layout/ContentPane",
  "dijit/form/TextBox"
]); 
```

## CSS：

```
html,body {
    height: 100%;
    width: 100%;
}

 .logo_a{
background:url("icon1.png");
}
.logo{
width:60px;
height:50px;
display:inline-block;
vertical-align:middle;
}
.logo_a:active{
background-position:0 1px;
}

#top_bar{
    padding:0px; 
    background: -webkit-linear-gradient(#464646, #121212);
    background: -moz-linear-gradient(#464646, #121212);
    background: -ms-linear-gradient(#464646, #121212);
    background: -o-linear-gradient(#464646, #121212);
    background: linear-gradient(#464646, #121212);
    color: #ccc;
    text-shadow:none;
    height:50px;
    width:100%;
}
#top_bar_divider{
background-color:#1ba0e1;
height:4px;
width:100%;

}
.searchBox{
height: 30px;
width: 400px;
padding-left:30px;
font-size:20px;
}
.searchBox_div{
display:inline-block;
verticle-align:middle;
background: #FFF url("http://app.maqetta.org/maqetta/user/CoQ/ws/workspace/project1/search_icon.png") no-repeat scroll 5px 6px;
}
.midArea_div{
margin-left: 100px;
verticle-align:middle;
display:inline-block;
}
.searchIcon{

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T08:23:56.207

您当前的方法不起作用，因为文本框位于其背景之上，因此不可见。您可以使用 on 上的伪元素来执行此操作`.searchBox_div`（在 <= IE8 中不起作用）。

[jsFiddle](http://jsfiddle.net/Sfn7M/)

![在此处输入图像描述](../Images/056b5df6dfa3734e28d177304b57d6d9.png)

```
.searchBox_div {
    position:relative;
}
.searchBox_div:before {
    content:"";
    display:block;
    position:absolute;
    background: url(http://app.maqetta.org/maqetta/user/CoQ/ws/workspace/project1/search_icon.png) no-repeat center center;
    width:24px;
    height:24px;
    left:4px;
    top:50%;
    margin-top:-12px;
    z-index:1;
} 
```

或者，您可以将这些样式应用于内部的另一个 div`.searchBox_div`以解决 IE8 问题，但代价是更多标记。

[jsFiddle](http://jsfiddle.net/YsEC7/)

**HTML**

```
<div class="midArea_div">
 <div class="searchBox_div">
   <input type="text" data-dojo-type="dijit.form.TextBox" class="searchBox"></input>
   <div class="overlay"></div>
 </div>
</div> 
```

**CSS**

```
.searchBox_div {
    position:relative;
}
.overlay {
    position:absolute;
    background: url(http://app.maqetta.org/maqetta/user/CoQ/ws/workspace/project1/search_icon.png) no-repeat center center;
    width:24px;
    height:24px;
    left:4px;
    top:50%;
    margin-top:-12px;
    z-index:1;
} 
```

# matlab - 从 1 个方程中获取 2 个参数的值

> ID：15605466
> 
> 赞同：0
> 
> 时间：2013-03-24T23:35:52.757
> 
> 标签：matlab

我有这个等式：`p = (1 + (q-1)*B*T) ^ (-1/q-1)`

p、T 的值是已知的，并且图 p - T 使我们知道了这一点。我想计算 q 和 B 以使路边尽可能接近直线。

一些值是：

```
T    p
1    0,999147061
2    0,997121331
3    0,994562513 
```

有没有办法让 matlab （或其他）给我 B 和 q 的值？

# windows - 使用批处理文件在后台启动 Apache

> ID：15605467
> 
> 赞同：1
> 
> 时间：2013-03-24T23:35:59.007
> 
> 标签：windows, apache, batch-file

我正在编写一个将启动 Apache 并`http://localhost`在 Web 浏览器中打开的批处理文件。最简单的形式：

```
@start apache\bin\httpd.exe
@start http://localhost 
```

这会导致批处理文件运行 Apache、打开网页并退出。但是，它会`httpd.exe`在自己的终端窗口中打开，而不是在后台隐藏打开。如何在没有可见窗口的情况下打开它？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-25T06:09:45.660

尝试这个：

```
@start /b "" apache\bin\httpd.exe 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T23:40:56.253

在另一个网站上看到这个。它可能会起作用。

在后台启动它：

```
command & 
```

然后运行：

```
disown 
```

并关闭终端。

您可以使用 Ctrl+z 停止前台应用程序，然后使用 bg (fg) 命令在后台（前台）启动它。

# c# - 使用 LINQ 按多个属性分组并求和

> ID：15605468
> 
> 赞同：20
> 
> 时间：2013-03-24T23:36:31.880
> 
> 标签：c#, asp.net, asp.net-mvc, linq

我有一个项目集合，这里是：

```
AgencyID VendorID StateID Amount Fee
1        1        1       20.00  5.00
1        1        1       10.00  2.00
1        1        1       30.00  8.00    
2        2        1       20.00  5.00
2        2        1       5.00   5.00
1        1        2       20.00  5.00
2        2        2       20.00  5.00
2        2        2       40.00  9.00
1        2        2       35.00  6.00
1        2        2       12.00  3.00 
```

我希望根据 AgencyID、VendorID 和 StateID 以及从金额和费用（金额 + 费用）计算的总计对这些项目进行分组

所以使用上面的数据，我想得到这些结果：

```
AgencyID VendorID StateID Total
1        1        1       75.00    
2        2        1       35.00
1        1        2       25.00
2        2        2       74.00
1        2        2       56.00 
```

这就是我现在拥有的所有内容，它只获取数据库中的每一行：

```
var agencyContracts = _agencyContractsRepository.AgencyContracts.
    Select(ac => new AgencyContractViewModel
    {
        AgencyContractId = ac.AgencyContractID,
        AgencyId = ac.AgencyID,
        VendorId = ac.VendorID,
        RegionId = ac.RegionID,
        Amount = ac.Amount,
        Fee = ac.Fee
    }); 
```

有谁知道我如何用 LINQ 过滤和分组？

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2013-03-24T23:51:48.847

使用`.Select()`后分组：

```
var agencyContracts = _agencyContractsRepository.AgencyContracts
    .GroupBy(ac => new
                   {
                       ac.AgencyContractID, // required by your view model. should be omited
                                            // in most cases because group by primary key
                                            // makes no sense.
                       ac.AgencyID,
                       ac.VendorID,
                       ac.RegionID
                   })
    .Select(ac => new AgencyContractViewModel
                   {
                       AgencyContractID = ac.Key.AgencyContractID,
                       AgencyId = ac.Key.AgencyID,
                       VendorId = ac.Key.VendorID,
                       RegionId = ac.Key.RegionID,
                       Amount = ac.Sum(acs => acs.Amount),
                       Fee = ac.Sum(acs => acs.Fee)
                   }); 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-03-25T00:40:29.513

Linus 在这个方法中很合适，但有一些属性是关闭的。看起来“AgencyContractId”是您的主键，它与您要提供给用户的输出无关。我认为这就是您想要的（假设您更改 ViewModel 以匹配您在视图中想要的数据）。

```
var agencyContracts = _agencyContractsRepository.AgencyContracts
    .GroupBy(ac => new
                   {
                       ac.AgencyID,
                       ac.VendorID,
                       ac.RegionID
                   })
    .Select(ac => new AgencyContractViewModel
                   {
                       AgencyId = ac.Key.AgencyID,
                       VendorId = ac.Key.VendorID,
                       RegionId = ac.Key.RegionID,
                       Total = ac.Sum(acs => acs.Amount) + ac.Sum(acs => acs.Fee)
                   }); 
```

# calculated-columns - 创建新列 B 指示每行 Col A 所在的五分之一

> ID：15605474
> 
> 赞同：1
> 
> 时间：2013-03-24T23:37:53.837
> 
> 标签：calculated-columns, quantile

我希望计算我的数据框中的每条记录所在的五分之一，因为它与各个列有关。例如，使用 mtcars 数据集，我需要一个类似于 MPG_QUINTILE 的列。我刚刚输入了该列并猜测了 mpg 将在哪个五分之一。但是我该如何自动化呢？我需要为几列做这件事。即HP_QUINTILE等。

```
mpg   MPG_QUINTILE
21    1   
25    1  
27    2  
33    3  
42    5 
```

无论如何，我希望找到一个不需要自定义构建功能的解决方案。此外，如果您想要大小相同的五分位数（每个 bin 的记录数相同）与严格基于百分位数的五分位数怎么办？

# c# - 具有未指定长度的数组的 PInvoke 结构

> ID：15605483
> 
> 赞同：5
> 
> 时间：2013-03-24T23:38:30.007
> 
> 标签：c#, pinvoke

**C 定义**

```
typedef struct {
    const uint8_t* buf;
    int bufLen;
} Info;

int Foo(Info* info); 
```

**C# 定义**

```
[StructLayout(LayoutKind.Sequential)]
public struct Info
{
     // [MarshalAs( ??? )]
     public byte[] buf;
     int bufLen
}    

[DllImport(...)]
public static extern int Foo(ref Info info); 
```

我无法弄清楚在 C# 结构定义中为`MarshalAs`属性指定什么。`byte[] buf`缓冲区是在 .NET 端分配的，它的长度在调用时是已知的。

在一个简单的小测试中：

```
var info = new Info {
    buf = new byte[] {0x40, 0x50, 0x60, 0x70},
    bufLen = 4,
};

Foo(ref info); 
```

一切似乎都正常工作，但实际上我缓冲区中的数据不正确。从我看到的 DLL 中打印出来`01 00 80 00`- 不确定那是什么。

我试过了：

*   不`MarshalAs`
*   `[MarshalAs(UnmanagedType.SafeArray)]`

没有任何效果。

一般来说，我也真的不知道调试这类问题的最佳方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T00:52:24.320

根据 Hans Passant 的建议，我实施了以下操作：

```
[StructLayout(LayoutKind.Sequential)]
public struct Info : IDisposable
{
    private IntPtr buf;
    private int bufLen;

    public Info(byte[] buf) : this() {
        this.buf = Marshal.AllocHGlobal(buf.Length);
        Marshal.Copy(buf, 0, this.buf, buf.Length);
        this.bufLen = buf.Length;
    }

    public void Dispose() {
        if (buf != IntPtr.Zero) {
            Marshal.FreeHGlobal(buf);
            buf= IntPtr.Zero;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-14T13:51:11.697

我知道为时已晚.. 但以防万一有人来这里寻求答案。

我终于想出了类似练习的下一个解决方案。

```
[StructLayout(LayoutKind.Sequential)]
public struct Info
{
     [MarshalAs(UnmanagedType.ByValArray, SizeConst = 8)]
     public byte[] buf;
     int bufLen
} 
```

**来自 MSDN**

> 数组可以作为 UnmanagedType.ByValArray 封送，这需要您设置 MarshalAsAttribute.SizeConst 字段。大小只能设置为常数。

在我的情况下，缓冲区大小为 8 个字节。

# opencv - Opencv和图像处理：提取身体框架的轮廓

> ID：15605485
> 
> 赞同：1
> 
> 时间：2013-03-24T23:38:48.517
> 
> 标签：opencv, image-processing, contour, motion-detection, threshold

我是图像处理的初学者，刚刚开始为一个项目摆弄 OpenCV。我有一个行人行走的视频信号。我正在运行 pedestrain.cpp 程序，该程序使用 HOG 进行 bckgound 减法并想做一些类似于所附图像的事情![在此处输入图像描述](../Images/622576600e7c309d906d7220dd163e62.png)。我在检测到 peson 后做了以下操作

```
int main (int argc, const char * argv[])
{
    VideoCapture cap(0);
    cap.set(CV_CAP_PROP_FRAME_WIDTH, 320);
    cap.set(CV_CAP_PROP_FRAME_HEIGHT, 240);    
    if (!cap.isOpened())
        return -1;

    Mat img;
    HOGDescriptor hog;
    hog.setSVMDetector(HOGDescriptor::getDefaultPeopleDetector());
    if((WriteFP=fopen("output.txt", "w")) == NULL) ErrorExit(ER_WRITE_OPEN);

    namedWindow("video capture", CV_WINDOW_AUTOSIZE);
    namedWindow("Motion", CV_WINDOW_AUTOSIZE);

    while (true)
    {
        cap >> img;
        if (!img.data)
            continue;

        vector<Rect> found, found_filtered;
        hog.detectMultiScale(img, found, 0, Size(8,8), Size(32,32), 1.05, 2);

        size_t i, j;
        for (i=0; i<found.size(); i++)
        {
            Rect r = found[i];
            for (j=0; j<found.size(); j++)
                if (j!=i && (r & found[j])==r)
                    break;
            if (j==found.size())
                found_filtered.push_back(r);
        }
        for (i=0; i<found_filtered.size(); i++)
        {
        Rect r = found_filtered[i];
            r.x += cvRound(r.width*0.1);
        r.width = cvRound(r.width*0.8);
        r.y += cvRound(r.height*0.06);
        r.height = cvRound(r.height*0.9);
        rectangle(img, r.tl(), r.br(), cv::Scalar(0,255,0), 2);
        }
        imshow("video capture", img);
        IplImage *mat_img;

        mat_img=cvCloneImage(&(IplImage)img);
        cvThreshold(img,img, 0, 255, CV_THRESH_BINARY_INV);
    cvDilate(img, img, 0,1);
    cvErode(img, img, 0, 0);
    cvFindContours(img, storage_contours, &contours, sizeof(CvContour),
    CV_RETR_EXTERNAL, CV_CHAIN_APPROX_SIMPLE, cvPoint(0, 0));
} 
```

但是，我无法获得图片中的输出帧。有人可以告诉我需要做什么。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T07:12:44.800

在[变更检测基准](http://www.changedetection.net/)中，您将找到最先进的背景建模方法和实现的概述。

OpenCV为背景建模和前景减法提供了[BackgroundSubtractorMOG类。](http://docs.opencv.org/modules/video/doc/motion_analysis_and_object_tracking.html?highlight=background#BackgroundSubtractorMOG2%20%3a%20public%20BackgroundSubtractor)

大多数方法训练背景颜色的像素统计，如果像素颜色不属于背景统计，则确定像素是前景还是背景。因此，这些方法需要一组训练样本（图像）来学习背景。您还应该提到，背景和前景对象的相似颜色可能会导致前景蒙版中出现空洞，因为该算法只能通过颜色在这两个类别之间进行划分。

# c# - 发布时有什么方法可以调用自定义代码吗？

> ID：15605489
> 
> 赞同：4
> 
> 时间：2013-03-24T23:39:00.143
> 
> 标签：c#, visual-studio-2012, msbuild

我们现在有一个相当大的站点，使用 C#/Asp.Net 构建。我们有两个发布配置文件，一个用于暂存，一个用于生产。它们是使用标准 Web Deploy 发布配置文件制作的。

我们现在要做的是在我们发布到生产的任何时候发送一封电子邮件。我想做的是找到某种我可以挂钩的发布后方法。有点像 Post-build 事件，除了发布。

这可能吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-25T03:58:50.287

虽然我还没有测试过这里有一些方向

*   [发布发布事件](https://stackoverflow.com/questions/1360579/post-publish-events)
*   [http://msdn.microsoft.com/en-us/library/ms366724.aspx](http://msdn.microsoft.com/en-us/library/ms366724.aspx)
*   [http://msdn.microsoft.com/en-us/library/7z253716.aspx（MSBuild](http://msdn.microsoft.com/en-us/library/7z253716.aspx)任务）
*   [http://msdn.microsoft.com/en-us/library/t9883dzc.aspx](http://msdn.microsoft.com/en-us/library/t9883dzc.aspx)（创建自定义 MSBuild 任务（

真正简单的例子：

```
<Target Name="BeforePublish" BeforeTargets="MSDeployPublish">
  <Exec Command="D:\Pre.bat" />
</Target>
<Target Name="AfterPublish" AfterTargets="MSDeployPublish">
  <Exec Command="D:\Post.bat" />
</Target> 
```

# bash - Bash：将命令替换的输出分配给整数变量

> ID：15605494
> 
> 赞同：2
> 
> 时间：2013-03-24T23:40:00.093
> 
> 标签：bash

在 Bash 中，我需要一个整数变量，如下所示：

```
declare -i n_jobs 
```

以值的形式分配当前后台作业的数量：

```
jobs | wc -l 
```

如果我这样分配它：

```
n_jobs=$(jobs | wc -l) 
```

is 似乎是一个工作整数，例如：

```
echo $((++n_jobs)) 
```

但是...打印它（不运行上面的增量）提醒我它包含空白：

```
$ echo "$n_jobs"
$ <space><space><space><space><space>4 
```

所以我求助于这个结构：

```
n_jobs=$(( $(jobs | wc -l) )) 
```

强制立即“强制转换”为*int*。

有没有更好的方法来获取命令替换列表的输出并将其作为*整数*分配给变量？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T23:43:59.950

这不是真的必要，但您可以执行以下操作：

```
n_jobs=$(($n_jobs + 0)) 
```

或者

```
n_jobs=`expr $(jobs | wc -l)` 
```

我建议您实际上避免`declare`......它仅存在于一个 shell 中，并且 Posix 没有指定它。

shell 部分是一个宏处理器，在其标准化形式中，所有变量都保存为字符串。对于适合 shell 的工作来说，这并不是一个很大的障碍，并且添加`declare`和整数变量使得 bash 在微观上更适合复杂的事情。

用 Ruby、Python、Perl、Go 甚至 node.js 之类的东西来做那些更复杂的事情。

顺便说一句，我无法重现您的原始问题。使用时`declare -i`，它似乎*确实*对您的表达式进行算术评估，并且似乎没有以任何前导空格结尾。

```
declare -i qn_jobs
qn_jobs=$(jobs | wc -l)
echo "x$qn_jobs"
# => x0 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-25T00:29:31.497

仍然`bash`是特定的，但获得无空格整数的更简洁的方法可能是：

```
job_pids=( $(jobs -p) )
n_jobs=${#job_pids[@]} 
```

符合 POSIX 的版本：

```
n_jobs=$( jobs -p | awk '{print NR}' ) 
```

（这`-p`不是必需的，但你真的不需要任何比每个作业唯一的行来提供给 的东西`awk`，所以最好让这些行尽可能简短。）

# php - PHP 帮助获取数据

> ID：15605498
> 
> 赞同：-1
> 
> 时间：2013-03-24T23:40:24.813
> 
> 标签：php

我制作了这个 Printers.php 页面，其中列出了数据库中的所有信息。我有一个模板文件printerbymodel.php，其中列出了单台打印机的信息。基本上我被卡住的地方是如何单击列出的打印机之一并被带到printerbymodel.php页面。

这是我的页面

打印函数.php

```
 function getPrinters2() {
$query = mysql_query("SELECT * FROM printers") or die (mysql_error());
if (mysql_num_rows($query) == 0) {
echo "<tr><td colspan=\"3\">No Printers Were Found</td></tr>";
} else {
while($post = mysql_fetch_assoc($query)) {
$bran=$post['Brand'];
$mod=$post['Model'];
$off=$post['Office'];
$loc=$post['Location'];
$ip=$post['IPAddress'];
$mac=$post['MACAddress'];
$Ink=$post['Ink'];
$Stock=$post['Stock'];
$id=$post['id'];
echo "<tr><td>" . $bran . "</td><td>" .  '<a href="/web/printer%202/printer/admin/printerbymodel.php?id='.$post['Model'].'">'.$post['Model'].'</a>' . "</td><td>" . $off . "</td><td>" . $loc . "</td><td>" . $ip . "</td><td>" . $mac. "</td><td>" .  $Ink . "</td><td>" . $Stock . "</td><td><a href=\"delete.php?id=" . $id . "\">Delete</a><br /><a href=\"edit.php?id=" . $id . "\">Edit</a></td></tr>";
}
}
} 
```

Printerbymodel.php

```
 <?php
mysql_connect("localhost", "root", "") or
    die("Could not connect: " . mysql_error());
mysql_select_db("whc_tech");

$result = mysql_query("SELECT id, Brand, Model, Office, Location, IPAddress, MACAddress, Ink  FROM printers");

while ($row = mysql_fetch_array($result, MYSQL_ASSOC)) {

    $bran = $row['Brand']; 
$mod = $row['Model']; 
    $off = $row['Office']; 
$loc = $row['Location']; 
$ip = $row['IPAddress']; 
$mac = $row['MACAddress']; 
$Ink = $row['Ink']; 
}

mysql_free_result($result);
?>
<html>
    <head>
    <title><?php echo $mod ?></title>
    </head>
    <body>
      <table>
<tr>
<td>Brand</td><td><?php echo $bran; ?></td>
</tr>
<tr>
<td>Model:</td><td><?php echo $mod; ?></td>
</tr>
<tr>
<td>Office:</td><td><?php echo $off; ?></td>
</tr>
<tr>
<td>Location:</td><td><?php echo $loc; ?></td>
</tr>
<tr>
<td>IP Address:</td><td><?php echo $ip; ?></td>
</tr>
<tr>
<td>MAC Address:</td><td><?php echo $mac; ?></td>
</tr>
<tr>
<td>Ink Type:</td><td><?php echo $Ink; ?></td>
</tr>

</table>
    </body>
</html> 
```

打印机.php

```
 <?php include('includes/PrintFunctions.php');?>

<html>

    <head>

        <title>Printer List</title>
    </head>

    <body bgcolor="f8e2e2">

<style type="text/css">
table.sample {
    border-width: 1px;
    border-spacing: 5px;
    border-style: outset;
    border-color: black;
    border-collapse: separate;
    background-color: rgb(250, 240, 230);

}
table.sample th {
    border-width: 1px;
    padding: 1px;
    border-style: dotted;
    border-color: gray;
    background-color: rgb(255, 250, 250);
    -moz-border-radius: ;
}
table.sample td {
    border-width: 1px;
    padding: 1px;
    border-style: dotted;
    border-color: gray;
    background-color: rgb(255, 250, 250);
    -moz-border-radius: ;
}
</style>

<table class="sample" align="center">
    <thead>
<tr>

            <td><b>Brand</b></td>
            <td><b>Model</b></td>
            <td><b>Office</b></td>
            <td><b>Location</b></td>
            <td><b>IP Address</b></td>
            <td><b>MAC Address</b></td>
            <td><b>Ink Type</b></td>
            <td><b>Ink Stock</b></td>

            <td><b>Action</b></td>
        </tr>

    </thead>
        <tbody>
<?php 
getPrinters2(); 
?>

    </tbody>

</table>

?>

    </body>
</html> 
```

现在，当将打印机信息添加到数据库中时，它们会在 printers.php 中列出，并且模型是一个超链接，这是我卡住的地方。当我点击它时完全迷失了，我将被带到该特定打印机的printerbymodel.php页面，该页面将显示信息。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T00:13:52.967

请参阅您发布的 print functions.php 的第 16 行，它正在回显一个包含有关 1 台打印机信息的表格行，请关注这部分：

```
'<a href="/web/printer%202/printer/admin/printerbymodel.php?id='. $post['Model'].'">'.$post['Model'].'</a>' 
```

(1)我怀疑这是错误的，因为它设置了id=model，所以改变这一行，看看`***`在哪里进行改变！

```
'<a href="/web/printer%202/printer/admin/printerbymodel.php?id='. $post[***'id'].'">'.$post['Model'].'</a>' 
```

(2) 现在，这正在创建一个链接，如：`printerbymodel.php?id=1234`。中`printerbymodel.php`，您现在需要从 url 中获取该 id

```
if (isset($_GET['id']) $id = $_GET['id']; 
```

(3) 然后，从数据库中提取记录：

```
$sql = "SELECT * FROM printers WHERE id=$id";

// get the record from your db by committing $sql
// read the result and echo it. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T00:02:29.260

我不是 100% 确定您要的是什么，但我猜您是在询问如何对 printerbymodel.php 进行编码以输出特定模型？

在 printers2() 中，您创建了超链接，如下所示：

```
echo "<tr><td>" . $bran . "</td><td>" .  '<a href="/web/printer%202/printer/admin/printerbymodel.php?id='.$post['Model'].'">'.$post['Model'].'</a>' . "</td><td>" . $off . "</td><td>" . $loc . "</td><td>" . $ip . "</td><td>" . $mac. "</td><td>" .  $Ink . "</td><td>" . $Stock . "</td><td><a href=\"delete.php?id=" . $id . "\">Delete</a><br /><a href=\"edit.php?id=" . $id . "\">Edit</a></td></tr>"; 
```

您应该将 id 更改为指向当前记录（而不是模型）的实际 Id，如下所示：

```
echo "<tr><td>" . $bran . "</td><td>" .  '<a href="/web/printer%202/printer/admin/printerbymodel.php?id='.$post['id'].'">'.$post['Model'].'</a>' . "</td><td>" . $off . "</td><td>" . $loc . "</td><td>" . $ip . "</td><td>" . $mac. "</td><td>" .  $Ink . "</td><td>" . $Stock . "</td><td><a href=\"delete.php?id=" . $id . "\">Delete</a><br /><a href=\"edit.php?id=" . $id . "\">Edit</a></td></tr>"; 
```

我认为您应该将变量名 $post 更改为其他名称，因为它很容易与 $_POST 混淆...

你必须做这样的事情（修改一些你现有的getPrinter2（）。（我没有做任何验证或任何......）

***打印机模型.php***：

```
<?php
$id=$_GET['id']; //Got from hyperlink

getPrintersInfo($id);
function getPrintersInfo($id) {
    $query = mysql_query("SELECT * FROM printers WHERE id=$id") or die (mysql_error());

    if (mysql_num_rows($query) == 0) {
    echo "<tr><td colspan=\"3\">No Printers Were Found</td></tr>";
    } else {

    while($post = mysql_fetch_assoc($query)) {
    $bran=$post['Brand'];
    $mod=$post['Model'];
    $off=$post['Office'];
    $loc=$post['Location'];
    $ip=$post['IPAddress'];
    $mac=$post['MACAddress'];
    $Ink=$post['Ink'];
    $Stock=$post['Stock'];
    $id=$post['id'];

    //Output information about this specific product...
    echo 'id=' . $id . '<br />';
    echo 'Model=' . $mod; 
    //etc...
}
}
} 
```

# delphi - 对 TListView 列进行排序 - 续。（升序降序）

> ID：15605509
> 
> 赞同：3
> 
> 时间：2013-03-24T23:42:25.150
> 
> 标签：delphi, delphi-2010

我最近获得了[基于列数据类型对 TListView 的列进行排序的](https://stackoverflow.com/questions/15573282/sorting-tlistview-columns)帮助。

这是代码：

```
procedure TfrmFind.lvwTagsColumnClick(Sender: TObject; Column: TListColumn);
begin
 ColumnToSort := Column.Index;
 (Sender as TCustomListView).AlphaSort;
end;

procedure TfrmFind.lvwTagsCompare(Sender: TObject; Item1, Item2: TListItem;
  Data: Integer; var Compare: Integer);
var
 ix: Integer;
 begin
 if ColumnToSort = 0 then
  Compare := CompareText(Item1.Caption,Item2.Caption)
 else
 if ColumnToSort = 1 then
  Compare := CompareTextAsInteger(Item1.subitems[0],Item2.subitems[0])
 else
if ColumnToSort = 2 then
  Compare := CompareTextAsDateTime(Item1.subitems[1],Item2.subitems[1])
 else
 begin
 ix := ColumnToSort - 1;
 Compare := CompareText(Item1.SubItems[ix],Item2.SubItems[ix]);
 end;
end; 
```

如果可能的话，我想添加升序和降序排序的功能吗？

用户单击一次以升序排序，然后单击第二次以降序排序

我可以从我目前拥有的代码中做到这一点吗？

如何在左列添加字形以显示排序类型（升序与降序）？

```
****************************************************************************** 
```

根据专家回答修改：2013 年 3 月 25 日

```
procedure TfrmFind.lvwTagsColumnClick(Sender: TObject; Column: TListColumn);
begin
 ColumnToSort := Column.Index;
 Column.Tag:= Column.Tag * -1;
 if Column.Tag = 0 then Column.Tag:=1;
 (Sender as TCustomListView).AlphaSort;
end;

procedure TfrmFind.lvwTagsCompare(Sender: TObject; Item1, Item2: TListItem;
  Data: Integer; var Compare: Integer);
begin
Case ColumnToSort of
    0:  Compare := TRzListView(Sender).Tag * CompareText(Item1.Caption, Item2.Caption);
    1:  Compare := TRzListView(Sender).Tag * CompareTextAsInteger(Item1.subitems[0],Item2.subitems[0]);
    2:  Compare := TRzListView(Sender).Tag * CompareTextAsDateTime(Item1.subitems[1],Item2.subitems[1]);
    else
    Compare := TRzListView(Sender).Tag * CompareText(Item1.Caption, Item2.Caption);
  End;
end; 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-25T08:09:21.637

您现在尝试做的事情相当复杂。为了能够掌握这一点，我建议您构建一组精心设计的低级帮助程序。然后，您可以用简洁明了的方法编写高级 UI 代码。

首先，让我们有一些获取和设置列表标题排序状态的例程。这是列表视图的标题控件中的向上/向下排序图标。

```
function ListViewFromColumn(Column: TListColumn): TListView;
begin
  Result := (Column.Collection as TListColumns).Owner as TListView;
end;

type
  THeaderSortState = (hssNone, hssAscending, hssDescending);

function GetListHeaderSortState(Column: TListColumn): THeaderSortState;
var
  Header: HWND;
  Item: THDItem;
begin
  Header := ListView_GetHeader(ListViewFromColumn(Column).Handle);
  ZeroMemory(@Item, SizeOf(Item));
  Item.Mask := HDI_FORMAT;
  Header_GetItem(Header, Column.Index, Item);
  if Item.fmt and HDF_SORTUP<>0 then
    Result := hssAscending
  else if Item.fmt and HDF_SORTDOWN<>0 then
    Result := hssDescending
  else
    Result := hssNone;
end;

procedure SetListHeaderSortState(Column: TListColumn; Value: THeaderSortState);
var
  Header: HWND;
  Item: THDItem;
begin
  Header := ListView_GetHeader(ListViewFromColumn(Column).Handle);
  ZeroMemory(@Item, SizeOf(Item));
  Item.Mask := HDI_FORMAT;
  Header_GetItem(Header, Column.Index, Item);
  Item.fmt := Item.fmt and not (HDF_SORTUP or HDF_SORTDOWN);//remove both flags
  case Value of
  hssAscending:
    Item.fmt := Item.fmt or HDF_SORTUP;
  hssDescending:
    Item.fmt := Item.fmt or HDF_SORTDOWN;
  end;
  Header_SetItem(Header, Column.Index, Item);
end; 
```

我从这个答案中获取了这段代码：[如何在 TListView 列上显示排序箭头？](https://stackoverflow.com/questions/14792244/how-to-show-the-sort-arrow-on-a-tlistview-column#14792399)

接下来我会做一个记录来保存排序规范。理想情况下，这将到达其`Data`参数中的排序比较函数。但遗憾的是，VCL 框架错过了将该参数用于其预期目的的机会。因此，我们需要将活动排序的规范存储在拥有列表视图的表单中。

```
type
  TSortSpecification = record
    Column: TListColumn;
    Ascending: Boolean;
    CompareItems: function(const s1, s2: string): Integer;
  end; 
```

然后在表单本身中，您将声明一个字段来保存其中之一：

```
type
  TfrmFind = class(...)
  private
    ....
    FSortSpecification: TSortSpecification;
    ....
  end; 
```

比较函数使用规范。这很简单：

```
procedure TfrmFind.ListViewCompare(Sender: TObject; Item1, Item2: TListItem;
  Data: Integer; var Compare: Integer);
var
  Index: Integer;
  s1, s2: string;
begin
  Index := FSortSpecification.Column.Index;
  if Index=0 then
  begin
    s1 := Item1.Caption;
    s2 := Item2.Caption;
  end else
  begin
    s1 := Item1.SubItems[Index-1];
    s2 := Item2.SubItems[Index-1];
  end;
  Compare := FSortSpecification.CompareItems(s1, s2);
  if not FSortSpecification.Ascending then
    Compare := -Compare;
end; 
```

接下来我们将实现一个排序功能。

```
procedure TfrmFind.Sort(Column: TListColumn; Ascending: Boolean);
var
  ListView: TListView;
begin
  FSortSpecification.Column := Column;
  FSortSpecification.Ascending := Ascending;
  case Column.Index of
  1:
    FSortSpecification.CompareItems := CompareTextAsInteger;
  2:
    FSortSpecification.CompareItems := CompareTextAsDateTime;
  else 
    FSortSpecification.CompareItems := CompareText;
  end;

  ListView := ListViewFromColumn(Column);
  ListView.OnCompare := ListViewCompare;
  ListView.AlphaSort;
end; 
```

此`Sort`功能与`OnClick`处理程序分离。这将允许您独立于用户的 UI 操作对列进行排序。例如，您可能希望在首次显示表单时对特定列上的控件进行排序。

最后，`OnClick`处理程序可以调用排序函数：

```
procedure TfrmFind.lvwTagsColumnClick(Sender: TObject; Column: TListColumn);
var
  i: Integer;
  Ascending: Boolean;
  State: THeaderSortState;
begin
  Ascending := GetListHeaderSortState(Column)<>hssAscending;
  Sort(Column, Ascending);
  for i := 0 to ListView.Columns.Count-1 do
  begin
    if ListView.Column[i]=Column then
      if Ascending then
        State := hssAscending
      else
        State := hssDescending
    else
      State := hssNone;
    SetListHeaderSortState(ListView.Column[i], State);
  end;
end; 
```

为了完整起见，这里有一个实现这些想法的完整单元：

```
unit uFind;

interface

uses
  Windows, Messages, SysUtils, Classes, Math, DateUtils, Controls, Forms, Dialogs, ComCtrls, CommCtrl;

type
  TSortSpecification = record
    Column: TListColumn;
    Ascending: Boolean;
    CompareItems: function(const s1, s2: string): Integer;
  end;

  TfrmFind = class(TForm)
    ListView: TListView;
    procedure lvwTagsColumnClick(Sender: TObject; Column: TListColumn);
  private
    FSortSpecification: TSortSpecification;
    procedure ListViewCompare(Sender: TObject; Item1, Item2: TListItem;
      Data: Integer; var Compare: Integer);
    procedure Sort(Column: TListColumn; Ascending: Boolean);
  end;

var
  frmFind: TfrmFind;

implementation

{$R *.dfm}

function CompareTextAsInteger(const s1, s2: string): Integer;
begin
  Result := CompareValue(StrToInt(s1), StrToInt(s2));
end;

function CompareTextAsDateTime(const s1, s2: string): Integer;
begin
  Result := CompareDateTime(StrToDateTime(s1), StrToDateTime(s2));
end;

function ListViewFromColumn(Column: TListColumn): TListView;
begin
  Result := (Column.Collection as TListColumns).Owner as TListView;
end;

type
  THeaderSortState = (hssNone, hssAscending, hssDescending);

function GetListHeaderSortState(Column: TListColumn): THeaderSortState;
var
  Header: HWND;
  Item: THDItem;
begin
  Header := ListView_GetHeader(ListViewFromColumn(Column).Handle);
  ZeroMemory(@Item, SizeOf(Item));
  Item.Mask := HDI_FORMAT;
  Header_GetItem(Header, Column.Index, Item);
  if Item.fmt and HDF_SORTUP<>0 then
    Result := hssAscending
  else if Item.fmt and HDF_SORTDOWN<>0 then
    Result := hssDescending
  else
    Result := hssNone;
end;

procedure SetListHeaderSortState(Column: TListColumn; Value: THeaderSortState);
var
  Header: HWND;
  Item: THDItem;
begin
  Header := ListView_GetHeader(ListViewFromColumn(Column).Handle);
  ZeroMemory(@Item, SizeOf(Item));
  Item.Mask := HDI_FORMAT;
  Header_GetItem(Header, Column.Index, Item);
  Item.fmt := Item.fmt and not (HDF_SORTUP or HDF_SORTDOWN);//remove both flags
  case Value of
  hssAscending:
    Item.fmt := Item.fmt or HDF_SORTUP;
  hssDescending:
    Item.fmt := Item.fmt or HDF_SORTDOWN;
  end;
  Header_SetItem(Header, Column.Index, Item);
end;

procedure TfrmFind.ListViewCompare(Sender: TObject; Item1, Item2: TListItem;
  Data: Integer; var Compare: Integer);
var
  Index: Integer;
  s1, s2: string;
begin
  Index := FSortSpecification.Column.Index;
  if Index=0 then
  begin
    s1 := Item1.Caption;
    s2 := Item2.Caption;
  end else
  begin
    s1 := Item1.SubItems[Index-1];
    s2 := Item2.SubItems[Index-1];
  end;
  Compare := FSortSpecification.CompareItems(s1, s2);
  if not FSortSpecification.Ascending then
    Compare := -Compare;
end;

procedure TfrmFind.Sort(Column: TListColumn; Ascending: Boolean);
var
  ListView: TListView;
begin
  FSortSpecification.Column := Column;
  FSortSpecification.Ascending := Ascending;
  case Column.Index of
  1:
    FSortSpecification.CompareItems := CompareTextAsInteger;
  2:
    FSortSpecification.CompareItems := CompareTextAsDateTime;
  else
    FSortSpecification.CompareItems := CompareText;
  end;

  ListView := ListViewFromColumn(Column);
  ListView.OnCompare := ListViewCompare;
  ListView.AlphaSort;
end;

procedure TfrmFind.lvwTagsColumnClick(Sender: TObject; Column: TListColumn);
var
  i: Integer;
  Ascending: Boolean;
  State: THeaderSortState;
begin
  Ascending := GetListHeaderSortState(Column)<>hssAscending;
  Sort(Column, Ascending);
  for i := 0 to ListView.Columns.Count-1 do
  begin
    if ListView.Column[i]=Column then
      if Ascending then
        State := hssAscending
      else
        State := hssDescending
    else
      State := hssNone;
    SetListHeaderSortState(ListView.Column[i], State);
  end;
end;

end. 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-25T00:10:35.290

您可以使用您的代码。只需带标签即可切换排序

```
procedure TfrmFind.lvwTagsColumnClick(Sender: TObject; Column: TListColumn);
begin
 ColumnToSort := Column.Index;
 if Column.Tag = 0 then Column.Tag := 1 else Column.Tag := 0; 
 (Sender as TCustomListView).AlphaSort;
end; 
```

在你的比较中

```
 Case ColumnToSort of
    0:begin
        if TListView(Sender).Column[ColumnToSort].Tag = 0 then
          Compare := CompareText(Item1.Caption, Item2.Caption)
        else
          Compare := CompareText(Item2.Caption, Item1.Caption);
      end;
    1:begin
      ........................
    end;
  End; 
```

或建议的赌注是 TLama

```
procedure TfrmFind.lvwTagsColumnClick(Sender: TObject; Column: TListColumn);
begin
 ColumnToSort := Column.Index;
 Column.Tag := Column.Tag * -1;
 if Column.Tag = 0 then Column.Tag := 1; 
 (Sender as TCustomListView).AlphaSort;
end; 
```

与比较

```
 Case ColumnToSort of
    0:  Compare := TListView(Sender).Column[ColumnToSort].Tag * CompareText(Item1.Caption, Item2.Caption);
    1: ........................

  End; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-16T16:20:53.130

我认为有一个简单的方法。我已经在 C++Builder 中对其进行了测试，它工作正常。

注意：初始化 FColSorted = -1。

1.创建以下辅助方法。

```
void 
TFormFind::SetSortCol(int ASortCol)
{
  FColToSort = ASortCol;
  //If new column: ascending sort. Else: toggle sort order.
  FSortToggle = (FColSorted != FColToSort) ? +1 : -1*FSortToggle;
  ListView->AlphaSort();
  FColSorted = FColToSort;
} 
```

2.使用带有 OnColumnClick 事件的辅助方法。

```
void __fastcall
TFormFind::ListViewColumnClick(TObject* Sender, TListColumn* Column)
{
  SetSortCol(Column->Index);
} 
```

3.将 FSortToggle 与您的比较逻辑一起使用。

```
void __fastcall
TFormFind::ListViewCompare(TObject* Sender, 
  TListItem* Item1, TListItem* Item2, int Data, int& Compare)
{
  //Your Compare logic here.
  //...
  Compare = FSortToggle * Compare; 
} 
```

最好的，

马塞洛。

# javascript - 为什么该脚本将从使用 jquery 的 html 而不是从使用 innerHTML 运行？

> ID：15605519
> 
> 赞同：2
> 
> 时间：2013-03-24T23:43:08.307
> 
> 标签：javascript, jquery, html, innerhtml

所以我在这里有点困惑。我不明白为什么脚本在使用 jquery`.html()`而不是`innerHTML`. 我查看了 jQuery 的源代码`.html`，它似乎仍在`innerHTML`使用中。谁能解释这种行为？

我在 ajax 响应期间遇到了这个问题。我正在取回 html 和一个`script`带有一些 javascript 的标签，我通常使用`html`，但由于某种原因，这次使用`innerHTML`时认为没有区别。

我知道这似乎是本地化的，因此我制作了一个带有超时行为的 jsFiddle，其行为类似于 ajax 响应，以突出问题。

**[jsFiddle 演示行为](http://jsfiddle.net/sKm8N/)**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T23:58:41.827

据我所知，jQuery 会*尝试*使用`innerHTML`，但如果失败，它将退回到清空目标元素，并通过 DOM 附加新内容。

*更新：见下面 Felix Kling 的评论；基本上，如果要插入的字符串内容包含脚本或样式/链接标签，jQuery 不会直接使用`innerHTML`*

当这种情况发生时 - 在你的情况下 - 内容会通过一个`domManip`我不声称完全理解的函数调用，但它确实会专门寻找和评估脚本。

所以简短的回答是：`innerHTML`毕竟 jQuery 没有使用。希望我能给你一个更好的一步一步的确切发生的事情，但我不太了解 jQuery 的源代码。我只是设置了一个断点（在 jQuery-1.9.1.js 中的第 6074 行；jQuery 最终决定*不*使用该点`innerHTML`）并稍微绕过源代码。

# javascript - 如何等到图像在jquery中加载

> ID：15605522
> 
> 赞同：4
> 
> 时间：2013-03-24T23:43:22.823
> 
> 标签：javascript, jquery, html, image, forms

我有这个例子，当我的表单被提交时，我必须加载一个图像文件并等到图像加载到`return true`（在这种情况下提交表单）

例如

```
$('#myform').submit(function(){
  var image=document.createElement('image')  
  var src=document.createAttribute('src')
  image.value="http://example.com/image.jpg"
  image.setAttributeNode(src);
  document.body.appendChild(image);
}) 
```

在这里，如果我`return true`将提交表单（不会加载图像），如果`false`不会（将加载图像但不会提交表单）。如何制作一个在图像加载后返回 true 的代码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T00:45:06.777

这里有一个重要的概念必须注意——当你添加一个事件处理函数以在触发特定事件时执行时，事件处理函数`return`的值实际上无处可去，并且什么都没有传递。创建事件侦听器是为了在未来某个未知时间点调用事件处理程序函数，但典型的脚本执行是完全线性的，并且按照脚本中的命令顺序发生 - 所以最好以某种方式定义应用程序的功能只有当某些事件发生时，您才会执行某些类似的操作。

看起来在您上面的问题中，您正在定义一个事件处理程序来侦听最初提交表单的时间，所以我将把它作为启动一切的初始事件。以下是我将如何处理您描述的提交过程：

```
//wrap the form element in jQuery and cache it so we don't work to re-select it
var $myform = $('#myform');

//specify that we are listening for -when- the form is submit
$myform.on('submit', function(event){
    //prevents the form from actually submitting when submit is first clicked
    event.preventDefault();

    //Simpler image construction
    var image = new Image();
    document.body.appendChild(image);

    //remember to listen for the image's load event before assigning a source
    $(image).on('load', function(){
        //this function is invoked in the future,
        //when the image load event has been fired

        //this bit actually submits the form via GET or POST
        $myform.submit();
    });

    //an image's `src` attribute can be set directly via the`src` property
    image.src = "http://placekitten.com/320/240";
}); 
```

在 JSFiddle 上工作的示例：

[http://jsfiddle.net/Admiral/uweLe/](http://jsfiddle.net/Admiral/uweLe/)

我建议阅读 jQuery 的`.on()`方法，以深入了解当前首选的事件绑定方法——这应该会让事情变得更清楚。

[http://api.jquery.com/on/](http://api.jquery.com/on/)

祝你好运！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T00:05:57.943

您可以在图像上使用`onload`or`jquery load`事件并在回调中提交表单。然后，如果您还想等待更长时间，您还可以在回调中添加超时。

就像是：

```
$('#myform .submitButton').click(function(e){
  e.preventDefault();

  var image=document.createElement('image');

  $(image).load(function(){

    //Submits form immediately after image loaded.
    $('#myForm').submit();  

    // Submits form 1 second after image has loaded
    setTimeout(function(){ $('#myForm').submit(); }, 1000); 
  });

  var src=document.createAttribute('src');
  image.value="http://example.com/image.jpg";
  image.setAttributeNode(src);
  document.body.appendChild(image);
}) 
```

注意：在我的示例中，我已将事件更改`submit`为`click`事件。如果您愿意，您仍然可以使用提交，它可能仍然有效，只要您返回`false`或使用`preventDefault`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-20T04:46:57.190

我使用 imagesLoaded PACKAGED v3.1.8

你可以在 github 上找到它： [https ://github.com/desandro/imagesloaded](https://github.com/desandro/imagesloaded)

他们的官方网站：http: [//imagesloaded.desandro.com/](http://imagesloaded.desandro.com/)

# user-interface - 如何从 Racket 中的 GUI 读取输入？

> ID：15605523
> 
> 赞同：1
> 
> 时间：2013-03-24T23:43:31.670
> 
> 标签：user-interface, input, racket

我正在为我的编程语言课在 Racket 中编写 Mastermind 程序。我创建了一个基本的 GUI 来向用户显示信息。我想问用户“你想继续吗？是/否”，从 GUI 读取他们的输入，并将该输入存储到一个字符串中。我是 Racket 的新手，所以如果有人能帮我解决这个问题，那就太好了。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T03:43:47.373

如果您要求用户输入是/否，则最好使用模式对话框。幸运的是，`racket/gui`它附带了一个方便的函数[`message-box`](http://docs.racket-lang.org/gui/Windowing_Functions.html?q=message-box#%28def._%28%28lib._mred%2Fmain..rkt%29._message-box%29%29)，可以让你做到这一点：

```
(message-box "Title" "Do you wish to continue?" #f '(yes-no)) 
```

如果您确定要使用文本框要求用户输入，您可能希望使用[`text-field%`](http://docs.racket-lang.org/gui/text-field_.html)对象（可能带有 a `dialog%`）而不是`text%`对象。查看文档中的[小部件库](http://docs.racket-lang.org/gui/Widget_Gallery.html)以查看`text-field%`外观。您可以在用户按下时触发的字段上设置回调`enter`。

# c - linux调度程序类如何相互通信

> ID：15605525
> 
> 赞同：0
> 
> 时间：2013-03-24T23:43:41.527
> 
> 标签：c, linux

我最近正在阅读 linux kernel 2.6.26.5 的代码并尝试实现另一个调度程序类。但是，我对 linux 内核如何处理不同调度程序类之间的通信感到困惑。例如，在 sched_rt.c 中，rt_sched_class 定义为：

```
static const struct sched_class rt_sched_class = {
    .next               = &fair_sched_class,
    .enqueue_task       = enqueue_task_rt,
    .dequeue_task       = dequeue_task_rt,
    .yield_task         = yield_task_rt,
#ifdef CONFIG_SMP
    .select_task_rq     = select_task_rq_rt,
#endif /* CONFIG_SMP */ 
...... 
```

字段“next”指向下一个 sched_class，这里是 fair_sched_class。

我对它如何知道什么是 fair_sched_class 感到困惑。由于 fair_sched_class 在另一个文件 shed_fair.c 中定义，我想有一个包含或“告诉”rt_sched_class 什么是 fair_sched_class 的东西。

但是，我搜索了整个文件，但在 sched_rt.c 中根本找不到“包含”。所以我想知道它是如何工作的，为什么我们可以在 sched_rt.c 中获得 fair_sched_class 的值？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T00:46:43.217

`$LINUX/kernel/sched/rt.c`includes ，其中包含调度程序类实例变量的`sched.h`几个前向声明：`extern`

```
extern const struct sched_class stop_sched_class;
extern const struct sched_class rt_sched_class;
extern const struct sched_class fair_sched_class;
extern const struct sched_class idle_sched_class; 
```

然后变量的实际定义分布在调度程序编译单元（.c 文件）中。

也没有通信发生，这只是一个带有在编译时定义的初始化程序的单链表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T02:59:05.943

更好地查看[kernelnewbies](http://kernelnewbies.org)或查看[LWN](http://lwn.net)对调度程序开发的报道。这是一个*非常*复杂的领域，代码变化很快。即，与专家交谈，而不是与我们这些该死的业余爱好者交谈。

# javascript - 模拟 CSS 弹出框

> ID：15605526
> 
> 赞同：3
> 
> 时间：2013-03-24T23:43:54.090
> 
> 标签：javascript, jquery, html, css

当您将鼠标悬停在“工作”链接上时，我正在尝试模拟此站点上的弹出框：http: [//zooadvertising.com.au/](http://zooadvertising.com.au/)

弹出和鼠标悬停元素效果很好。我唯一不知道该怎么做的就是在弹出的元素中创建多个列。当我尝试在其中添加另一个 div 说，作为第二列向右浮动时，它会创建更多弹出窗口。有没有办法将 div 嵌套在这样样式的元素中？

编辑小提琴：http: [//jsfiddle.net/7ZE8q/6/](http://jsfiddle.net/7ZE8q/6/)

CSS：

```
<style type="text/css" title="">
.NameHighlights {
position:relative;
}
.NameHighlights div {
display: none;
}
.NameHighlightsHover {
position:relative;
}
.NameHighlightsHover div {
display:block;
position:absolute;
width: 400px;
height: 300px;
top:30px;
left:-300px;
z-index:1000;
background-color: #000000;
padding: 15px;
font-size: 14px;
color: white;
}
</style> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T00:51:39.287

你应该做的是这样的：http: [//jsfiddle.net/8X3uj/1/](http://jsfiddle.net/8X3uj/1/)

HTML：

```
<div class="top_bar">
  <span>Work
    <div class="popup">
      <div class="column" style="background-color: red;">
        <div class="left_column"></div>
        <div class="right_column"></div>
      </div>
      <div class="column" style="background-color: green;">
        <div class="left_column"></div>
        <div class="right_column"></div>
      </div>
      <div class="column" style="background-color: yellow;">
        <div class="left_column"></div>
        <div class="right_column"></div>
      </div>
    </div>
  </span>
</div> 
```

CSS：

```
.top_bar{ background-color: lightgreen; }
.popup{ background-color: black; height: 500px; display: none; font-size: 0px; }
.popup:hover{ display: block; text-align: center; }
.top_bar > span:hover > div{ display: block; }
.column{ height: 400px; width: 33%; display: inline-block; margin: 0px 1px; }
.column > div{ width: 50%; height: 300px; display: inline-block; }
.column > div:first-child{ background-color: dodgerblue; }
.column > div:last-child{  background-color: gray; } 
```

1.  弹出窗口本身具有黑色背景。
2.  弹出窗口内有 3 个主要列，背景为红色、绿色和黄色。
3.  每列内部都有子列，背景为蓝色和灰色。

你不需要任何 JS……只需要 HTML 和 CSS，带有 :hover 和 display: inline-block;

希望能帮助到你！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T01:02:19.637

这是我的解决方案：[它在 JSFiddle Form](http://jsfiddle.net/tpressley1/e7WDm/41/)中。希望这可以帮助。我使用引导程序来帮助添加一些基本样式，但重要的部分不是使用引导程序，而是使用的 jquery：

```
$(document).ready(function(){

        $('.nav3Hov').hide();
        $('#nav3').on('mouseover', function(){
            $('.nav3Hov').stop(true,true).fadeIn(200);
        }).on('mouseleave', function(){
            $('.nav3Hov').stop(true).delay(200).fadeOut(200);
        });      
        $('.nav3Hov').on('mouseenter', function(){
            $(this).stop(true).clearQueue().show();
        }).on('mouseleave', function() {
            $(this).delay(200).fadeOut(200);
        });
}); 
```

**编辑** 顺便说一句，很抱歉没有使用您提供的 jsfiddle。在你添加之前我就开始回答了！:P

# string - 从表中查找字符串中的字母仅适用于第一项

> ID：15605527
> 
> 赞同：2
> 
> 时间：2013-03-24T23:43:57.043
> 
> 标签：string, lua, find, lua-table

嗨，如果没有 lua 代码，我无法解释它，问题是如果我写 te = "f ... you" 它只会捕获表的第一项，它将返回 true，但如果我写过，te = "a .." 它会返回 false -_-

我只是想从字符串中找出不好的词，这里是代码 * 抱歉我没有完全写出不好的词

```
local te = "f... you"
badwords = {
"f...",
"a..",
"s...",
"b....",
"g..",
"w....",
} 
```

和功能：

```
function isTextContainsBadwords(str)
  for i,v in ipairs(badwords) do
    if str:find(v) then
      return true
    else
      return false
    end
  end
end
print(tostring(isTextContainsBadwords(te))) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T01:48:26.273

这是因为当您迭代 table 时`badwords`，其中的第一个字符串`"f..."`不匹配`a..`，并且 else 块中有 a `return false`；终止代码的执行。

你不需要`else`那里的块。只需`return false`在`for`循环之外。

```
function isTextContainsBadwords(str)
    for i,v in ipairs(badwords) do
        if str:find(v) then
            return true
        end
    end
    return false
end 
```

# java - Android/Java：EditText（数字）-> 如何为“完成”按钮创建 onClick？

> ID：15605528
> 
> 赞同：-1
> 
> 时间：2013-03-24T23:43:57.283
> 
> 标签：java, android, android-edittext

我使用 eclipse，我需要一个适用于我的 Android-App 的解决方案。

在这个应用程序中有一个 EditText。它的 inputType 设置为 number。如果用户在此框中写入内容并按下数字键盘旁边的“完成”按钮，则会显示数字并退出键盘。但我的目标是使用这个“完成”按钮来完成一个简单的附加任务。通过单击此按钮，我希望将写入 EditText 中的数字保存在整数变量中。我知道如何通过检查或使用 id 来使用按钮，但我不知道（如何获取）这个特殊“完成”按钮的 ID。

有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T23:51:08.840

使用此代码

```
EditText editetext = (EditText) findViewById(R.id.editetext); // change this R.id.editetext to your EditText id
    Button doneButton = (Button) findViewById(R.id.doneButton); // change this R.id.doneButton to your Button id
            doneButton .setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View view) {
                int num = Integer.parseInt(editetext.getText.toString);
            }
        }); 
```

**更新**

试试这个在键盘上完成按钮操作

```
editText.setOnEditorActionListener(new OnEditorActionListener() {
    @Override
    public boolean onEditorAction(TextView v, int actionId, KeyEvent event) {
        if (actionId == EditorInfo.IME_ACTION_DONE) {
            // do any thing here
        }
        return false;
    }
}); 
```

# node.js - 如何在 NodeJS 中获取本地 IP 地址？

> ID：15605532
> 
> 赞同：1
> 
> 时间：2013-03-24T23:44:17.750
> 
> 标签：node.js, networking, ip

我在 NodeJS 中查找本地 IP 地址时遇到问题。到目前为止，我发现的最佳解决方案是调用`os.networkInterfaces()`方法（或`ifconfig`）并简单地解析结果，检查 if`family == 'IPv4'`和`internal == true`. 问题是，当我们安装了带有虚拟网络接口的 VM 时，我们会得到两个这样的地址，并且无法（或者是否存在？）区分哪个是“真实的”地址。

知道怎么做吗？

提前致谢

# c++ - C++ 指针算术循环访问冲突

> ID：15605534
> 
> 赞同：0
> 
> 时间：2013-03-24T23:44:31.093
> 
> 标签：c++, memory-management, function-pointers

我正在尝试在 C++ 中使用浮点数的连续内存块。内存代表我正在使用的专有图像库的像素数据。我无法改变库为它的创建例程使用指向第一个浮点数的指针这一事实。例如，一个 20x20 的图像将作为 400 个连续的浮点数保存在内存中。

如下所示，我正在使用循环来测试此内存的填充。

我在每次循环迭代时递增指针，但是我在运行时遇到访问冲突 - 显然我以某种方式过度运行堆。我担心我没有正确增加指针，或者误解了这一点。

我哪里错了？我会很感激有一双新的眼睛看过这个:)谢谢

```
int width = 500;
int height = 500;
float *img = (float*) calloc(width * height, sizeof(float));

int count = 0;
while (count < (width * height))
{
    *img = 1.0f;
    count++;
    img++;
}

saveImage(width, height, img, TEXT("test.tiff"));

free(img); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-24T23:47:41.463

您正在循环中更改 img 。当您调用 saveImage 时，img 指针位于图像~~末尾~~之后，而不是开头！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-24T23:47:30.613

> 我在每次循环迭代时递增指针，

这就是问题所在；`img`不再像`saveImage`预期的那样指向图像的开头。我确定`saveImage`它将遍历`img`to `img + (width * height - 1)`，因此它正在运行超出您分配的内存的边界。

使用临时指针或索引：

```
int count = 0;
while (count < (width * height))
{
    img[count] = 1.0f;
}

saveImage(width, height, img, TEXT("test.tiff"));
free(img); // and now this is correct as well 
```

# php - 将 NSDictionaries 的 NSArray 发布到 php

> ID：15605535
> 
> 赞同：1
> 
> 时间：2013-03-24T23:44:34.800
> 
> 标签：php, objective-c, nsarray, nsdictionary, afjsonrequestoperation

我正在尝试从我的 ios 应用程序将 NSDictionaries 的 NSArray 发送到我的 php webservice，并且在接收某个字符串字段时遇到问题。

我以这种方式形成 POST 参数：

```
NSDictionary *orderInformation = [NSDictionary dictionaryWithObjectsAndKeys:self.orderItems,@"ORDER_ITEMS",storeId,@"STORE_ID",userId,@"USERID",nil]; 
```

“storeId”和“userId”是字符串，我在 php 中接收它们没有问题，但“self.orderItems”是 NSDictionaries 的 NSMutableArray，这是我遇到问题的地方。

self.orderItems 中的 NSDictionaries 具有以下键：“ITEM_ID”和“ITEM_PRICE”。

这是我将“orderInformation”发布到 php 的代码：

```
NSString *webService = @"http://localhost/~testuser/Developer/ReceiveOrder.php?rquest=placeOrder";
NSURL *url = [NSURL URLWithString:webService];
AFHTTPClient *client = [[AFHTTPClient alloc] initWithBaseURL:url];
NSURLRequest *placeOrderRequest = [client requestWithMethod:@"POST" path:webService parameters:orderInformation];
AFJSONRequestOperation *operation = [AFJSONRequestOperation JSONRequestOperationWithRequest:placeOrderRequest success:^(NSURLRequest *request, NSHTTPURLResponse *response, id JSON){
    [self orderPlaced:JSON];

}failure:^(NSURLRequest *request, NSHTTPURLResponse *response, NSError *error, id JSON){
    NSLog(@"Request Failed with Error: %@, %@", error, error.userInfo);
}];
[operation start]; 
```

我的 php 中接收此请求的方法如下：

```
//Place Order
public function placeOrder(){
$userId = $_POST['USERID'];
$storeId = $_POST['STORE_ID'];
$orderItems = array();
$itemInfo = array();
$orderItems = $_POST['ORDER_ITEMS'];//This is where I receive my NSArray of NSDictionaries 
```

我已经尝试了这两种方法来迭代 $orderItems 但都没有获取正确的结果。出于某种原因，ITEM_ID 显示为空，但 ITEM_PRICE 正在获取正确的值。

方法1：

```
 for ($i=0; $i<count($orderItems); $i++)
       {
         $itemInfo = $orderItems[$i]; //receiving correct value
         $itemId = $itemInfo['ITEM_ID']; //receiving correct value
         $itemPrice = $itemInfo['ITEM_PRICE']; //receiving correct value
         $orderStatus['ITEM_ID'] = $itemId ; //comes out as null
         $orderStatus['ITEM_PRICE'] = $itemPrice; //receiving correct value
       } 
```

方法2：

```
 foreach ($orderItems as $itemInfo){
         $itemId = $itemInfo['ITEM_ID']; //receiving correct value
         $itemPrice = $itemInfo['ITEM_PRICE']; //receiving correct value
         $orderStatus['ITEM_ID'] = $itemId ; //comes out as null
         $orderStatus['ITEM_PRICE'] = $itemPrice; //receiving correct value
    } 
```

我将 $orderStatus 返回到 ios 到 NSLog 以确保正确检索 $itemId 和 $itemPrice：

```
 $orderStatusJson = json_encode($orderStatus);
    header('Content-Type: application/json');
    echo $orderStatusJson; 
```

但在这两种方法中，$itemId 都显示为“null”，但 $itemPrice 显示的是正确的值。我知道存在的项目 id 是我发送的参数，因为我在发送到 php 之前将它们记录在 ios 中，并且它们在那时正确显示。

如果我在 php 中接收/迭代 NSDictionaries 的 NSArray 时遗漏了什么/没有以正确的方式做事，您能否告诉我？. 从早上起我就对这件事发疯了。我知道这一定是小事/或者我必须遗漏一些非常基本的东西，但我似乎无法弄清楚。非常感谢您的回复。

编辑：

从 ios 中的 php NSLogged 接收的 JSON 输出：

```
JSON - {
"ITEM_ID" = "<null>";
"ITEM_PRICE" = "3.99";
} 
```

谢谢，迈克！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-25T10:52:30.977

您以 JSON 格式发送，但不以 JSON 格式接收。在您的 PHP 中，您必须执行以下操作：

```
$jsonString = file_get_contents('php://input');
if ($jsonString != "") {
  error_log("[".$jsonString ."]");
  $jsonArray = json_decode($jsonString, true);
  error_log(print_r($jsonArray,true));
} 
```

要以您期望的方式发送到 PHP，您需要在帖子正文中传递 kvp，其中 value 是 url 编码的数据：

```
key1=value1&key2=value2&key3=value3 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T01:19:23.857

您的 item_id 输出“null”，这就是 php 将其读取为“null”的原因。也许你应该检查你的 NSDictionary 看看为什么它输出一个空项目。

# c++ - 将 boost::regex_search() 与字符串迭代器一起使用

> ID：15605541
> 
> 赞同：3
> 
> 时间：2013-03-24T23:45:39.253
> 
> 标签：c++, regex, boost-regex

我正在尝试让 boost::regex 为我提供搜索字符串中所有出现的模式。认为这样的事情会很简单，但让它来提升和 STL 在一切之上添加 10 个模板混淆的元层 :)。

我最近的尝试是使用 regex_search()，但不幸的是我的调用似乎与任何重载都不匹配。这是一个超级蒸馏的例子：

```
std::string test = "1234567890";
boost::regex testPattern( "\\d" );
boost::match_results<std::string::const_iterator> testMatches;
std::string::const_iterator startPos = test.begin();
while( regex_search( startPos, test.end(), testMatches, testPattern ) ) {
    // Do stuff: record match value, increment start position
} 
```

我对 regex_search() 的调用触发了智能感知，并且无法编译（“没有 'regex_search' 的实例与参数列表匹配”）。

我试图调用的重载是：

```
template <class BidirectionalIterator,
    class Allocator, class charT, class traits>
bool regex_search(BidirectionalIterator first, BidirectionalIterator last,
    match_results<BidirectionalIterator, Allocator>& m,
    const basic_regex<charT, traits>& e,
    match_flag_type flags = match_default ); 
```

这似乎与我的调用相匹配。

任何想法表示赞赏！以及做这类事情的替代方法。我最终想要做的是拆分一个字符串，如：

```
"0.11,0.22;0.33,0.444;0.555,0.666" 
```

进入我可以解析的浮动字符串的组成列表。

在任何其他正则表达式包中，这很简单——通过类似“(?:([0-9.]+)[;,]?)+”的表达式运行它，捕获的组将包含结果。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T20:16:35.233

问题实际上是您正在混合迭代器类型 (`std::string::iterator`和`std::string::const_iterator`，并且由于`regex_search`是模板函数，因此不允许从`iterator`to进行隐式转换。`const_iterator`

你是正确的，声明`test`为 a`const std::string`将修复它，因为`test.end()`现在将返回 a `const_iterator`，而不是`iterator`.

或者，您可以这样做：

```
std::string test = "1234567890";
boost::regex testPattern( "\\d" );
boost::match_results<std::string::const_iterator> testMatches;
std::string::const_iterator startPos = test.begin();
std::string::const_iterator endPos = test.end();
while( regex_search( startPos, endPos, testMatches, testPattern ) ) {
    // Do stuff: record match value, increment start position
} 
```

如果你有 C++11 可用，你也可以使用新`std::string::cend`成员：

```
std::string test = "1234567890";
boost::regex testPattern( "\\d" );
boost::match_results<std::string::const_iterator> testMatches;
std::string::const_iterator startPos = test.begin();
while( regex_search( startPos, test.cend(), testMatches, testPattern ) ) {
    // Do stuff: record match value, increment start position
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T03:10:40.117

好的，想通了这一点。如果搜索到的字符串声明为“const”，则正确找到该方法。例如：

```
const std::string test = "1234567890"; 
```

# tomcat - 启动 Servlet 引擎：Apache Tomcat/7.0.12

> ID：15605547
> 
> 赞同：3
> 
> 时间：2013-03-24T23:46:26.257
> 
> 标签：tomcat

我的服务器卡在

```
Starting Servlet Engine: Apache Tomcat/7.0.12 
```

我正在使用 maven 项目我该怎么办？

# c++ - 使用带有 O_DIRECT 标志的 libaio 读取文件

> ID：15605553
> 
> 赞同：0
> 
> 时间：2013-03-24T23:47:27.713
> 
> 标签：c++, linux, asynchronous, aio

我正在使用异步 lib​​aio 读取文件。下面的代码显示了我是如何做到这一点的。代码工作正常，但现在我想切换到 O_DIRECT 模式以避免文件缓存。当我将第 25 行更改为 fd = open("./testfile", O_RDONLY|O_DIRECT); 程序停止正常工作。（io_getevents 不返回任何数据）。您能帮我调整程序，使其在 O_DIRECT 标志下也能正常工作吗？

提前致谢

操作系统：Ubuntu 12.10 3.5.0-26-generic）

```
1 #include <unistd.h>
2 #include <stdio.h>
3 #include <stdlib.h>
4 #include <sys/types.h>
5 #include <sys/stat.h>
6 #include <sys/param.h>
7 #include <fcntl.h>
8 #include <errno.h>
9 #include <libaio.h>
10 
11 int main(int argc, char* argv[]) {
12 
13   struct iocb cb;
14   struct iocb* iocbs = &cb;
15   struct io_event events[1];
16   char data[4096];
17   io_context_t ctx;
18   int fd;
19   int res;
20 
21   memset(&ctx, 0, sizeof(ctx));
22   memset(&cb, 0, sizeof(cb));
23   memset(&data, 0, sizeof(data));
24 
25   fd = open("./testfile", O_RDONLY);
26 
27   if(io_setup(1, &ctx) < 0) {
28     printf("io_setup error\n");
29     exit(-1);
30   }
31   printf("io_setup OK\n");
32 
33   // submit read request
34   io_prep_pread(&cb, fd, &data, 1024, 0);
35   res = io_submit(ctx, 1, &iocbs);
36   if(res < 0) {
37     printf("io_submit error\n");
38     exit(-2);
39   }
40   printf("io_submit OK: %d\n", res);
41 
42   // get events
43   res = io_getevents(ctx, 0, 1, events, NULL);
44   if(res < 0) {
44   if(res < 0) {
45     printf("io_getevents Error: %d", res);
46     exit(-3);
47   }
48   printf("io_getevents OK: %d %li %li\n", res, events[0].res, events[0].res2);
49 
50   // dump data received
51   char data_prefix[16];
52   strncpy(data_prefix, data, 15);
53   data_prefix[15] = 0;
54   printf("data: %s\n", data_prefix);
55 
56   res = io_destroy(ctx);
57   if(res < 0) {
58     printf("io_destroy Error: %d\n", res);
59     exit(-4);
60   }
61   printf("io_destroy OK: %d\n", res);
62 
63   res = close(fd);
64   printf("close: %d\n", res);
65 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-12T09:44:47.797

您需要将缓冲区对齐到 512 字节才能使 O_DIRECT 正常工作。之前 `io_prep_pread`：

```
char *data;
posix_memalign(&data, 512, 1024); 
```

请注意，读取的大小必须是 512 的倍数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-05-15T11:42:30.670

您的示例有两个主要问题：

* * *

首先，您调用`io_getevents()`设置`min_nr`为零：

```
43   res = io_getevents(ctx, 0, 1, events, NULL); 
```

因此，如果您在读取完成之前调用它，该函数返回 0 个读取事件是完全可以的。

另见[io_getevents(2)](http://manpath.be/f33/2/io_getevents#L18)：

> io_getevents() 系统调用尝试从 ctx_id 指定的 AIO 上下文的完成队列中读取至少 min_nr 个事件和最多 nr 个事件。

如果您将`min_nr`参数设置为 1，即`io_getevents(ctx, 1, 1, ...)`在读取尚未完成的情况下调用然后函数阻塞 - 直到它完成。

* * *

其次，您的读取缓冲区不一定正确对齐，`O_DIRECT`并且读取大小可能无法被设备的扇区大小整除 - cf。[`open(2)`](http://manpath.be/f33/2/open#L843)：

> O_DIRECT 标志可能会对用户空间缓冲区的长度和地址以及 I/O 的文件偏移施加对齐限制。在 Linux 中，对齐限制因文件系统和内核版本而异，并且可能完全不存在。然而，目前还没有独立于文件系统的接口供应用程序发现给定文件或文件系统的这些限制。一些文件系统为此提供了自己的接口，例如 xfsctl(3) 中的 XFS_IOC_DIOINFO 操作。
> 
> 在 Linux 2.4 下，传输大小、用户缓冲区和文件偏移的对齐方式都必须是文件系统逻辑块大小的倍数。从 Linux 2.6.0 开始，与底层存储的逻辑块大小（通常为 512 字节）对齐就足够了。可以使用 ioctl(2) BLKSSZGET 操作或从 shell 使用以下命令确定逻辑块大小：
> 
> ```
> blockdev --getss 
> ```

因此，它实际上取决于您的内核版本、文件系统和驱动器，您需要什么对齐方式以及堆栈分配的`data`数组是否按要求对齐，这是偶然的。

这样的事情应该足以解决对齐和大小约束违规问题（除非您的设备具有更大的物理扇区）：

```
 void *data = 0;
    int r = posix_memalign(&data, 4096, 4096);
    if (r) {
        fprintf(stderr, "posix_memalign failed: %s\n", strerror(r));
        return 1;
    } 
```

请注意，如果您像这样更改分配，则还必须调整相关`memset()`调用和其他用法。

* * *

您的示例的其他问题：

您的错误处理不完整。这意味着您并不总是检查错误。并且在您执行并报告它们的地方，您不会将错误代码转换为可读的内容（例如，通过`strerror()`在适当的地方传递代码）。

此外，还有一行重复的引入了语法错误：

```
44   if(res < 0) {
44   if(res < 0) { 
```

当程序成功时（即最后丢失），程序的退出状态是未定义的，`return 0`并且以负退出状态返回是有问题的。

当您打印`io_event::res`并且`res2`使用了错误的格式说明符时，正确的是`%lu`;

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-10-31T15:16:02.293

改变`char *data; to void* data;`

然后做 posix_memalign(&data,512,1024);

# android - Mono Android跟踪应用程序意外崩溃背景

> ID：15605558
> 
> 赞同：1
> 
> 时间：2013-03-24T23:47:46.950
> 
> 标签：android, background, mono, gps, location

我们目前正处于一个简单的单声道安卓位置跟踪应用程序的测试阶段。应用程序选择一个“实体”来监视并启动一个继承 ILocationListener 类的服务。我们使用一个简单的计时器对象每 3 秒向 Web API 服务发送纬度/经度信息。然后，该应用程序将位于手机的后台，并在后台跟踪来自 GPS 的位置信息。

我们遇到的问题是，在一段不确定的时间（有时是 15 分钟，有时是 8 小时）之后，应用程序会在后台停止跟踪，我们很难找到原因。打开应用程序时，行为可能会有所不同，在某些情况下，应用程序会自行重新启动，而在其他情况下，会出现黑屏，就好像 UI 已停止。我们目前的测试设备是三星 Galaxy 3，但我们也使用了三星 Ace 2，结果相同。

下面的代码是一个简单的后台跟踪代码。我们无法获得实际的错误细节，这使得这个错误非常棘手。如果我找到任何关于它为什么在后台崩溃的更多信息，无论是内存问题还是 UI 停顿，我都会提供。

```
public override void OnCreate()
{
        base.OnCreate();
        BusTimer = new System.Timers.Timer(3000);
        BusTimer.Elapsed += OnTimeEvent;
        isTracking = false;
        StartTracking();
        BusTimer.Start();
}

public void StartTracking()
{

        if (SystemProperties.EntityTrackingID == 0 && SystemProperties.EntityTrackingType != "Track Me")
        {
            return;
        }
        isTracking = true;

        //SETUP THE LOCATION VARIALBES
        if (_geocoder == null) { 
            _geocoder = new Geocoder(this); 
        }

        if (_locationManager == null)
        {
            _locationManager = (LocationManager)GetSystemService(LocationService);
        }

        var criteria = new Criteria() { Accuracy = Accuracy.Fine };
        string bestProvider = _locationManager.GetBestProvider(criteria, true);
        currentLocation = _locationManager.GetLastKnownLocation(bestProvider);
        _locationManager.RequestLocationUpdates(bestProvider, 3000, 1, this);
}

private void OnTimeEvent(object source, ElapsedEventArgs e)
{
        //LOG RECORD FOR CURRENT LOCATION
        if (currentLocation != null && isTracking)
        {
             PostData(currentLocation, DateTime.Now);
        }    
} 
```

# java - PayPal 支付活动中的空异常

> ID：15605565
> 
> 赞同：0
> 
> 时间：2013-03-24T23:48:50.923
> 
> 标签：java, android, paypal

我在我的 android 应用程序中处理 PayPal 沙盒付款时遇到困难。

一旦我单击通过 PayPal 按钮付款，我的应用程序就会崩溃并给我一个空指针异常。

这是我的 PayPalTask​​ 和 PayPal 按钮 Java 代码片段：

```
class PaypalTask extends AsyncTask<Void, Void, Void> {
    protected final char[] TOTAL_GBP=null;

public Void doInBackground(Void... arg0) {
    ppObject = PayPal.initWithAppID(getBaseContext(), "APP-80W284485P519543T", PayPal.ENV_SANDBOX);

    return null;
}

@Override
protected void onPostExecute(Void result) {
    super.onPostExecute(result);
    btnPaypal = ppObject.getCheckoutButton(getApplicationContext(), PayPal.BUTTON_278x43, CheckoutButton.TEXT_PAY);
    RelativeLayout.LayoutParams params = new RelativeLayout.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
    params.addRule(RelativeLayout.CENTER_HORIZONTAL);
    params.addRule(RelativeLayout.CENTER_VERTICAL);
    btnPaypal.setLayoutParams(params);
    rlPay.addView(btnPaypal);
    if(utils.prefs.getBoolean("isLogged", false)) btnPaypal.setVisibility(View.VISIBLE); else btnPaypal.setVisibility(View.GONE);

    btnPaypal.setOnClickListener(new OnClickListener(){
        public void onClick(View view) {

            // to check whether there are any books in the shopping cart
            if(!cid.isEmpty()){
                PayPalPayment payment = new PayPalPayment();
                payment.setSubtotal(new BigDecimal(TOTAL_GBP));
                payment.setCurrencyType("GBP");
                payment.setRecipient(Utils.PAYPAL_ACCOUNT);
                payment.setPaymentType(PayPal.PAYMENT_TYPE_GOODS);
                Intent checkoutIntent = PayPal.getInstance().checkout(payment, getBaseContext());
                startActivityForResult(checkoutIntent, 1);
            }else{
                utils.showToast("Your shopping cart is empty.");
                // The PayPal button needs to be updated so that the user can click on it again.
                btnPaypal.updateButton();
            }
        }   
    });
} 
```

}

如果我更改以下行：

`payment.setSubtotal(new BigDecimal(TOTAL_GBP));`

到任何双浮点值，例如：

`payment.setSubtotal(new BigDecimal("30.00"));`

然后它工作得很好，但从不从购物车中提取小计值，而只提取指定的总金额，即在这种情况下为 30.00 英镑

为了更清楚起见，我的购物车列表 Java 代码片段如下：

```
private void fillCartList(boolean boo){
        // to delete the contents of the cartlists
        this.deleteCartLists();
        TOTAL_QTY = 0; TOTAL_GBP = 0;
        int price, qty;
        // if is not 0, first will parse all the rows to arraylists from sqlite stored on the phone
        Cursor cursor = db.getJoinedTables();
        if(cursor != null && cursor.getCount()!=0){
            cursor.moveToFirst();
            while(!cursor.isAfterLast()){
                if(boo == false){
                    price = Integer.valueOf(cursor.getString(cursor.getColumnIndex(justdealsDatabase.KEY_BPRICE)).replace("£", ""));
                    qty = cursor.getInt(cursor.getColumnIndex(justdealsDatabase.KEY_CQTY));
                    cid.add(cursor.getInt(cursor.getColumnIndex(justdealsDatabase.KEY_BID)));
                    cTitle.add(cursor.getString(cursor.getColumnIndex(justdealsDatabase.KEY_BTITLE)));
                    cCode.add(cursor.getString(cursor.getColumnIndex(justdealsDatabase.KEY_BCODE)));
                    cPrice.add(price + "£");
                    cImage.add(cursor.getString(cursor.getColumnIndex(justdealsDatabase.KEY_BIMAGE)));
                    cQty.add(qty);
                    TOTAL_QTY += qty;
                    TOTAL_GBP += qty * price;
                }else{
                    // to insert a new row to sales table on mysql db
                    postParameters.removeAll(postParameters);
                    price = Integer.valueOf(cursor.getString(cursor.getColumnIndex(justdealsDatabase.KEY_BPRICE)).replace("£", ""));
                    qty = cursor.getInt(cursor.getColumnIndex(justdealsDatabase.KEY_CQTY));
                    //information will be parsed via PHP if the internet is working
                    postParameters.add(new BasicNameValuePair("bid", String.valueOf(cursor.getInt(cursor.getColumnIndex(justdealsDatabase.KEY_BID))))); 
                    Log.i(DEBUG, utils.prefs.getString("username", ""));
                    postParameters.add(new BasicNameValuePair("user", utils.prefs.getString("username", "")));  
                    postParameters.add(new BasicNameValuePair("sQty", String.valueOf(qty)));  
                    postParameters.add(new BasicNameValuePair("sDate", String.valueOf(getCurrentDate())));  
                    postParameters.add(new BasicNameValuePair("sTotal", String.valueOf(qty * price)));

                       String response = null;

                        try{
                            response = CustomHttpClient.executeHttpPost(Utils.LINK_SALES, postParameters).toString(); 
                            response = response.replaceAll("\\s+", "");
                            Log.i(DEBUG, response);
                        } catch (Exception e) {  
                            Log.e(DEBUG, "Error at fillCartList(): " + e.toString());  
                        }
                }
                cursor.moveToNext();
            }
        }
        tvValueTotalQty.setText("" + TOTAL_QTY);
        tvValueTotalGBP.setText(TOTAL_GBP + "£");
    } 
```

您的建议和想法将不胜感激。非常感谢。

车架代码片段：

```
private static class CartHolder{
        TextView tvPrice, tvTitle, tvQty, tvTotals;
        public ImageView imgImage;
    }

    private class CartAdapter extends BaseAdapter{
        private LayoutInflater inflater;
        private ArrayList<String> list;

        public CartAdapter(ArrayList<String> ll){
            inflater = (LayoutInflater)ActivityTab.this.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            list = ll;
        }

        //number of items in the data set are linked by this Adapter.
        public int getCount() {
            return list.size();
        }

        // to get the data item associated with the specified position in the data set.
        public Object getItem(int position) {
            return list.get(position);
        }

        // to get the row id associated with the specified position in the list.
        public long getItemId(int position) {
            return position;
        }

        // to get a View that displays the data at the specified position in the data set. 
        public View getView(int position, View convertView, ViewGroup parent) {
            CartHolder holder; 
            if(convertView == null){
                convertView = inflater.inflate(R.layout.item_cart, null);
                holder = new CartHolder();
                holder.imgImage = (ImageView)convertView.findViewById(R.id.imgImage);
                holder.imgImage.getLayoutParams().height = 80;
                holder.imgImage.getLayoutParams().width = 80;
                holder.tvQty = (TextView)convertView.findViewById(R.id.tvNr);
                holder.tvTitle = (TextView)convertView.findViewById(R.id.tvTitle);
                holder.tvPrice = (TextView)convertView.findViewById(R.id.tvItemPrice);
                holder.tvTotals = (TextView)convertView.findViewById(R.id.tvTotals);
                convertView.setTag(holder);
            }else{
                holder = (CartHolder)convertView.getTag();
            }
            Bitmap bmp = BitmapFactory.decodeFile(cImage.get(position));
            holder.tvQty.setText(String.valueOf(cQty.get(position)));
            int price = Integer.valueOf(cPrice.get(position).replace("£", ""));
            int qty = cQty.get(position);
            int total = price * qty;
            holder.imgImage.setImageBitmap(bmp);
            holder.tvTitle.setText(cTitle.get(position));
            holder.tvPrice.setText(cPrice.get(position));
            holder.tvTotals.setText(total+"£");

            return convertView;
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T23:55:32.377

```
protected final char[] TOTAL_GBP=null; 
```

Here, you've declared `TOTAL_GBP` as a `final char[]`. You never (and, because it's `final`, you cannot) redefine this variable, so it will always be `null`. Thus, when you get to here:

```
payment.setSubtotal(new BigDecimal(TOTAL_GBP)); // TOTAL_GBP has to be null 
```

I'm not sure where `fillCartList()` is defined, but a) it's not called before `new BigDecimal()`, and b) it uses a different definition of `TOTAL_GBP`.

You need to get the correct value that you want for the `BigDecimal` into `PaypalTask`'s `TOTAL_GBP`.

# iphone - 为 App Store 和企业分发构建应用程序

> ID：15605566
> 
> 赞同：5
> 
> 时间：2013-03-24T23:48:59.430
> 
> 标签：iphone, ios, xcode, provisioning-profile

我有一个应用程序，它将在内部分发给 100 名员工，但也会在外部分发到 App Store。

我已经注册了普通的 iOS 开发者会员以及企业开发者计划。

但是，我试图弄清楚如何让 xcode 在构建调试构建、内部构建和应用商店构建之间切换。

具体来说，配置文件适用于特定的 App ID。我必须在开发人员门户中创建两个不同的应用程序 ID，但我的应用程序只有 1 个应用程序 ID（显然）。

```
Any ideas how to have one project that could selectively build different configs...? 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-25T00:06:58.230

您将不得不使用不同的[目标](http://developer.apple.com/library/mac/#featuredarticles/XcodeConcepts/Concept-Targets.html#//apple_ref/doc/uid/TP40009328-CH4-SW1)。这为您提供了不同的配置，您还可以设置不同的应用程序 ID/捆绑标识符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T00:23:22.697

我同意@mrueg 的回答，但是，如果出于某种原因，您需要保持相同的 App-Id，您可以发布一个使用正常分发证书签名的应用程序商店，然后返回 Xcode，创建一个新的存档，但使用企业分发证书签名。

您可能还想考虑[B2B Program](https://developer.apple.com/programs/volume/b2b/)，我认为您不需要在其中弄乱多个证书。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-03-25T00:12:57.590

您只需要一个 App ID。

1.  对于内部分发，您需要在苹果开发人员中设置所有设备。 [http://developer.apple.com/library/ios/#recipes/ProvisioningPortal_Recipes/CreatingaDistributionProvisioningProfile/CreatingaDistributionProvisioningProfile.html](http://developer.apple.com/library/ios/#recipes/ProvisioningPortal_Recipes/CreatingaDistributionProvisioningProfile/CreatingaDistributionProvisioningProfile.html)

2.  对于外部分发，您只需要通过 applestore 下载该应用程序。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-03-25T03:27:53.437

只需归档项目，打开 Xcode 管理器，选择归档，然后选择分发归档，选择您想要的选项。ad-hoc、企业、应用商店，这些选项都在那里。记得正确编码辞职。

# php - PHP MySQL 24h 查询输出 24h +10h

> ID：15605571
> 
> 赞同：0
> 
> 时间：2013-03-24T23:49:50.740
> 
> 标签：php, sql, time, timezone

我在 php 脚本中运行以下 SQL 查询：

```
SELECT DATE_FORMAT(LogDateTime, '%k:%i') AS LogDate, Temp AS OutsideTemp, InsideTemp 
FROM cumuluslog.monthly 
WHERE LogDateTime > DATE_SUB(NOW(), INTERVAL 24 HOUR)
ORDER BY LogDateTime 
```

问题是，我没有得到过去的 24 小时，而是大约 34 小时，我检查了我的时区是否设置为 +10（我的本地时区）。当直接从 phpmyadmin 运行相同的查询时，它给了我正确的结果。

我尝试使用以下方法在 .php scriot 中设置时区：`date_default_timezone_set('Australia/Brisbane );`

似乎它正在运行最后一天的查询，然后在之后添加 +10 h 时区。我已经四处搜索，但似乎找不到任何有同样问题的人。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T00:17:06.377

听起来您的 MySQL 服务器设置了错误的时区。您可以正确设置系统时间并重新启动 MySQL，或者告诉它在运行时使用哪个区域：

```
mysql_query("SET time_zone = 'Australia/Brisbane'");
mysql_query("YOUR QUERY HERE"); 
```

# c++ - 离散数学到 C++

> ID：15605573
> 
> 赞同：0
> 
> 时间：2013-03-24T23:49:58.387
> 
> 标签：c++, discrete-mathematics

我不确定我应该在这里还是在数学网站上提问，但我会在这里试一试。下面是分配：用户输入 10 个数字，即域*D*。我需要评估以下陈述： *`For All x, y in D, x<y or y <2x`*。我的问题，什么是x，什么是y？如果我输入 1 2 3 4 5 6 7 8 9 10 作为域 x =1, y =2 等等？我是否检查 1 < 2 || 2 <2(1)？

我编写了其他三个语句，它们只使用了“x”，但在输入的十个数字中不知道哪个是 x，哪个是 y。它不需要用户输入 ax 和 y 只是十个整数。

我将发布我所做的其他语句的代码。

```
using std::cout;
using std::cin;

void ASearch(int arr[], int);
void BSearch(int array[], int size);
void CSearch(int array[], int size);

int main(int argc, const char * argv[])
{
    const int SIZE = 10;
    int NumArray[10];
    int num = 0;
    int count = 0;

    while (count < 10)
    {
        cout << "Enter Number "<< count + 1 <<": ";
        cin >> NumArray[count];
        ++count;

    }

    /*if(!isdigit(num))
     {

     for (int i = 0; i < 9; ++i)
     {

     cout << "Enter Number "<< i + 2 <<": ";
     cin >> NumArray[i];

     }
     }else cout << "Error: numbers only";*/

    for(int j = 0; j < SIZE; ++j)
    {
        cout << " " << NumArray[j];
    }

    ASearch(NumArray, SIZE);
    BSearch(NumArray, SIZE);
    CSearch(NumArray, SIZE);

    return 0;
}

void ASearch(int arr[], int size)
{
    int pos = 0;
    int on = -1;
    int oddTrue = 0;
    int oddFalse = 0;

    while (on == -1 && pos < size)
    {
        cout << " \nchecking: " << arr[pos];

        if (arr[pos] % 2 != 0 && arr[pos] > 0)
        {

            cout <<"\nTrue: " <<arr[pos] << " is > 0 and odd";
            ++oddTrue;

        }
        else if(arr[pos] % 2 != 0 && arr[pos] < 0)
        {
            cout <<"\nFalse" << arr[pos] << "is < 0 and odd";
            ++oddFalse;

        }
        else cout << "\nNumber is even";
        ++pos;

    }
    if (oddFalse > 0) cout<< "\n>>>>>>>>>A is FALSE";else cout <<"\n>>>>>>A IS TRUE";
    return;
}

void BSearch(int array[], int size)
{
    int on = -1;
    int pos = 0;
    int count = 0;

    while(on == -1 && pos < size)
    {
        cout << "\n checking "<<array[pos];

        if(array[pos] % 2 != 0  && array[pos] > 10)
        {
            cout << "\nTrue: " << array[pos] <<" is > 10 & odd";
            ++count;

        }else
        {
            cout <<"\nFalse";
            --count;
        }
        ++pos;
    }
    if(count > 1 ) cout << "\n>>>>>>>>>>B IS TRUE"; else cout <<"\n>>>>>>>>>B IS FALSE";
    return;
}

void CSearch(int array[], int size)
{
    int pos = 0;
    int on = -1;
    int TrueCount = 0;
    int FalseCount = 0;

    while (on == -1 && pos < size)
    {
        cout << "\n checking "<<array[pos];

        if(array[pos] % 2 == 0  || array[pos] % 3 == 0)
        {
            cout << "\nTrue: " << array[pos] <<" is divisible by 2 or 3";
            ++TrueCount;

        }
        else if(array[pos] % 2 != 0  || array[pos] % 3 != 0)
        {
            cout <<"\nFalse";
            ++FalseCount;
        }
        ++pos;

    }

    if (TrueCount < 10)
        cout << "\n>>>>C is FALSE"; else cout << "\n>>>>>>>>>>C is TRUE";

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T00:01:10.993

这意味着 x 和 y 都可以取集合 D 中的每个值。

在伪代码中：

```
for i = 1:10
   for j = 1:10
       x = D[i]
       y = D[j]
       test x < y OR y < 2 * x
   loop
loop 
```

# java - 如何修改 pom.xml 使 Maven 3.0.4 不认为我在运行 SDK 1.3

> ID：15605574
> 
> 赞同：3
> 
> 时间：2013-03-24T23:50:27.573
> 
> 标签：java, maven, maven-3, openjdk, spark-java

我知道这个问题经常被问到，但那里的解决方案似乎是针对旧版本的 Maven。

我正在运行的版本：

```
hduser@lightning252:~/spark-0.7.0-2/examples/ex2$ mvn -version
Apache Maven 3.0.4
Maven home: /usr/share/maven
Java version: 1.6.0_26, vendor: Sun Microsystems Inc.
Java home: /usr/lib/jvm/java-6-sun-1.6.0.26/jre
Default locale: en_GB, platform encoding: UTF-8
OS name: "linux", version: "3.2.0-4-amd64", arch: "amd64", family: "unix" 
```

我正在使用的 pom.xml：

```
<project>
  <groupId>edu.berkeley</groupId>
  <artifactId>simple-project</artifactId>
  <modelVersion>4.0.0</modelVersion>
  <name>Simple Project</name>
  <packaging>jar</packaging>
  <version>1.0</version>
  <plugins>
    <plugin>
      <groupId>org.apache.maven.plugins</groupId>
      <artifactId>maven-compiler-plugin</artifactId>
      <version>2.3.2</version>
       <configuration>
        <source>1.5</source>
        <target>1.5</target>
       </configuration>
    </plugin>
  </plugins>
  <repositories>
    <repository>
      <id>Spray.cc repository</id>
      <url>http://repo.spray.cc</url>
    </repository>
    <repository>
      <id>Akka repository</id>
      <url>http://repo.akka.io/releases</url>
    </repository>
  </repositories>
  <dependencies>
    <dependency> <!-- Spark dependency -->
      <groupId>org.spark-project</groupId>
      <artifactId>spark-core_2.9.2</artifactId>
      <version>0.7.0</version>
    </dependency>
  </dependencies>
</project> 
```

实际上我以前从未使用过 Maven，我正在尝试按照 Spark 项目给出的说明来编译 Spark 任务。pom.xml 直接取自：

```
http://spark-project.org/docs/latest/quick-start.html 
```

我知道问题出在`<plugins>`有人可以让我知道如何解决吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T00:00:06.113

看了一圈，发现`<plugins>`标签需要被`<build>`标签包围。

我改变了，现在工作正常。请参阅下面的正确版本。

```
<project>
  <groupId>edu.berkeley</groupId>
  <artifactId>simple-project</artifactId>
  <modelVersion>4.0.0</modelVersion>
  <name>Simple Project</name>
  <packaging>jar</packaging>
  <version>1.0</version>
<build>
  <plugins>
    <plugin>
      <groupId>org.apache.maven.plugins</groupId>
      <artifactId>maven-compiler-plugin</artifactId>
      <version>2.3.2</version>
       <configuration>
        <source>1.5</source>
        <target>1.5</target>
       </configuration>
    </plugin>
  </plugins>
</build>
  <repositories>
    <repository>
      <id>Spray.cc repository</id>
      <url>http://repo.spray.cc</url>
    </repository>
    <repository>
      <id>Akka repository</id>
      <url>http://repo.akka.io/releases</url>
    </repository>
  </repositories>
  <dependencies>
    <dependency> <!-- Spark dependency -->
      <groupId>org.spark-project</groupId>
      <artifactId>spark-core_2.9.2</artifactId>
      <version>0.7.0</version>
    </dependency>
  </dependencies>
</project> 
```

# php - 使用 PDO 插入不起作用

> ID：15605579
> 
> 赞同：-1
> 
> 时间：2013-03-24T23:50:50.097
> 
> 标签：php, mysql, pdo

有谁知道为什么 INSERT 不起作用？我正在编写具有相同代码的教程，但我无法得到任何东西。

我将 print_r 扔在那里以验证我的 POST 信息是否被正确捕获......它是。我在这里失去理智了。任何帮助，将不胜感激。谢谢

```
 <?php

if ( $_SERVER['REQUEST_METHOD'] == 'POST' && !empty($_POST['title']) && !empty($_POST['content']) ) {

    include('config.php');

    try{
        $dbh = new PDO(DB_NAME,DB_USER,DB_PASS);

    } catch (PDOException $e){

        echo $e->getMessage();
    }

    $title = $_POST['title'];
    $content = $_POST['content'];

    $stmt = $dbh->prepare(' INSERT INTO posts (title, content, created_at, updated_at) VALUE (?, ?, now(), now() ) ');

    $bindings = array($title, $content);

    $stmt->execute($bindings);
    print_r($stmt);

} else { echo 'fail';}

?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T23:54:41.860

You need to use the keyword `VALUES` not `VALUE`

Also, you should really back tick your column and table names. (`)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T23:56:54.147

INSERT INTO posts (title, content, created_at, updated_at) VALUES (?, ?, now(), now())

Use this as your Insert statement

# html - 桌面和移动 Chrome 之间奇怪的 CSS 垂直文本问题

> ID：15605582
> 
> 赞同：2
> 
> 时间：2013-03-24T23:51:03.613
> 
> 标签：html, css, mobile, web

我有一个`<h2>`元素，我想将封闭的文本垂直居中。它在桌面 Chrome 上看起来不错，但在移动 (iOS) Chrome 上却不行。我将非常感谢对此问题的任何见解。下面找到两个屏幕截图的链接（首先是桌面，其次是移动）：

[桌面（正确行为）。](http://i.imgur.com/Gzjnv4N.jpg) [移动（不正确的行为）。](http://i.imgur.com/dNPKZ9x.jpg)

HTML 和 CSS 代码包含在下面。为了便于阅读，我已经缩写了 HTML 代码。非常感谢，互联网！

HTML：

```
...
<body id="home">
<div id="main">
    <div id="header">
        ...
    </div>
    <div id="content">
        <img src="i/splash.jpg" alt="" id="splash" />
        <div id="inner">
            <h2>hi!</h2>
            <p>Lorem ipsum...</p>
        </div>
    </div>
    <div id="clear"></div>
    <div id="footer">
        <p>...</p>
    </div>
</div>
</body>
... 
```

CSS：

```
/* CSS RESET */

html, body, div, span, applet, object, iframe, h1, h2, h3, h4, h5, h6, p, blockquote, pre, a, abbr, acronym, address, big, cite, code, del, dfn, em, img, ins, kbd, q, s, samp, small, strike, strong, sub, sup, tt, var, b, u, i, center, dl, dt, dd, ol, ul, li, fieldset, form, label, legend, table, caption, tbody, tfoot, thead, tr, th, td, article, aside, canvas, details, embed, figure, figcaption, footer, header, hgroup, menu, nav, output, ruby, section, summary, time, mark, audio, video {
    margin: 0;
    padding: 0;
    border: 0;
    font-size: 100%;
    font: inherit;
    vertical-align: baseline;
}

article, aside, details, figcaption, figure, footer, header, hgroup, menu, nav, section, div, ul#nav, ul#nav li, ul#nav li a, img#splash {
    display: block;
}

body {
    line-height: 1;
    background: url('i/bg.jpg') fixed repeat;
}

ol, ul {
    list-style: none;
}

blockquote, q {
    quotes: none;
}

blockquote:before, blockquote:after, q:before, q:after {
    content: '';
    content: none;
}

table {
    border-collapse: collapse;
    border-spacing: 0;
}

/* WALBAUM WEBFONT */

@font-face {
    font-family: Walbaum;
    src: url('f/WalbaumMTStd-Regular.otf');
}

@font-face {
    font-family: Walbaum;
    font-weight: bold;
    src: url('f/WalbaumMTStd-Medium.otf');
}

@font-face {
    font-family: Walbaum;
    font-weight: bold;
    font-style: italic;
    src: url('f/WalbaumMTStd-MediumIt.otf');
}

@font-face {
    font-family: Walbaum;
    font-style: italic;
    src: url('f/WalbaumMTStd-Italic.otf');
}

/* MAIN */

#main {
    margin: 10px auto 0 auto;
    max-width: 900px;
    overflow: hidden;
}

/* HEADER */

#header {
    width: 100%;
    margin-bottom: -10px;
}

#logo {
    float: none;
    width: 358px;
    margin: 0 auto 0 auto;
}

#logo a, #logo img {
    width: 100%;
}

#subtitle {
    text-align: center;
    font-size: 14px;
    color: #3f3f3f;
    font-family: Georgia, serif;
    width: 100%;
    margin-top: -8px;
}

#subtitle strong {
    font-weight: bold;
    color: #982020;
}

ul#nav {
    font-family: Walbaum, Georgia, serif;
    font-size: 24px;
    height: 100%;
    text-transform: uppercase;
    text-align: justify;
    padding: 0 10px 0 10px;
}

ul#nav li a {
    width: 100%;
    height: 100%;
    text-decoration: none;
}

ul#nav li {
    display: inline-block;
    height: 100%;
    padding: 42px 2px 18px 2px;
    margin: 0 7px 0 7px;
}

ul#nav:after {
    content: '';
    width: 100%;
    display: inline-block;
}

ul#nav li#music a {
    color: #d86619;
}

ul#nav li#photos a {
    color: #1787ac;
}

ul#nav li#code a {
    color: #17ac3a;
}

ul#nav li#about a {
    color: #a317ac;
}

ul#nav li a:hover {
    text-decoration: underline;
}

/* CONTENT */

#content {
    width: 100%;
    margin: 0 auto 10px auto;
}

#content img#splash {
    width: 100%;
    padding: 5px;
    border: 1px solid #191919;
    background-color: rgba(25,25,25,0.3);
    margin: 0 auto 0 -6px;
}

#content #inner {
    width: 100%;
}

#content #inner h2 {
    width: 100%;
    font-style: italic;
    color: #999999;
    text-align: center;
    font-family: Walbaum, Georgia, serif;
    font-size: 40px;
    border-top: 1px dashed #333333;
    border-bottom: 1px dashed #333333;
    background-color: rgba(75,75,75,0.1);
    margin: 0 auto 10px -6px;
    text-shadow: 0.08em 0.08em 0.05em #090909;
    padding: 0 6px 0 6px;
    height: 32px;
    line-height: 32px;
}

#content #inner p {
    font-family: Georgia, serif;
    text-align: justify;
    color: #666666;
    font-size: 14px;
    margin-bottom: 14px;
}

/* FOOTER */

#clear {
    clear: both;
}

#footer {
    width: 100%;
    text-align: center;
    margin: 20px auto 20px auto;
}

/* RESPONSIVENESS */

@media screen and (min-width: 801px) {
    #logo {
        margin-right: 10px;
        float: left;
    }

    #main {
        padding: 0 10px 0 10px;
    }

    #content img#splash {
        max-width: 75%;
        float: left;
        margin: 0;
    }

    #content #inner {
        width: 22.5%;
        float: right;
        margin: 0;
    }
}

@media screen and (max-width: 800px) and (min-width: 521px) {
    #main {
        max-width: 95%;
    }

    #content #inner {
        margin-top: 10px;
    }
}
@media screen and (max-width: 520px) and (min-width: 359px) {
    ul#nav {
        padding: 0 10px 0 10px;
    }

    ul#nav li {
        margin: 0;
    }

    #main {
        max-width: 100%;
    }

    #content {
        width: 95%;
    }

    #content #inner {
        margin-top: 5px;
    }
}
@media screen and (max-width: 358px) {
    #logo {
        width: 100%;
    }

    ul#nav {
        padding: 20px 5px 0 5px;
        font-size: 20px;
    }

    ul#nav li {
        margin: 0;
        padding: 0 2px 0 2px;
    }

    #main {
        max-width: 100%;
    }

    #content {
        width: 95%;
    }

    #content #inner {
        margin-top: 5px;
    }
}

@media screen and (max-width: 300px) {
    ul#nav {
        padding: 10px 5px 0 5px;
    }

    ul#nav li {
        width: 45%;
        margin: 0;
        padding: 0;
        text-align: center;
    }

    #subtitle {
        font-size: 10px;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T00:00:30.097

用于`em`您的字体大小 - 这将针对不同的窗口大小进行适当调整

```
#inner h2{
font-size: 1em
} 
```

（例如）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T23:56:57.463

I think, the problem here is, that mobile browsers resize your `font-size`. It's not good practice, but you can avoid that by using:

```
html {
    -moz-text-size-adjust: none;
    -ms-text-size-adjust: none;
    -webkit-text-size-adjust: none;
    text-size-adjust: none;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-14T10:23:40.690

我已经检查了多个浏览器（网络/移动）。一切对我来说都很好。但是，您可能遇到的 3 个问题 -

1）字体问题

2) Mobile-Web resize 问题，如果不是流体布局。

3) 缓存集

# c++ - 从同一代码库序列化 std::function

> ID：15605584
> 
> 赞同：1
> 
> 时间：2013-03-24T23:51:14.630
> 
> 标签：c++, serialization

我一直在使用 std::functions 使我的类更通用，而不是制作虚拟成员，这需要声明一个我只在一个地方使用的全新类，但是当我需要序列化类时我很难过。我知道序列化随机 C++ 代码的想法行不通，但这不是我需要做的。我知道这些函数已经存在于同一个二进制文件的其他地方，所以我觉得应该有办法做到这一点。我也不反对以某种“hacky”的方式来做这件事，尽管最好它可以与 gcc 和 MSVC 一起使用

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T00:16:26.013

如果将 id 或“句柄”映射到可序列化的函数集，并以确定性的编译时方式执行此操作，则可以将句柄序列化为整数类型。在反序列化/加载时，您可以使用此确定性映射将句柄转换为相关的函数指针类型，并从中构造 std::functions。

这与类中的序列化/反序列化指针没有太大区别。这种反序列化风格通常包括两个步骤：初始化 POD 类型，然后在第二遍中修复指针。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-09T10:35:25.927

我们可以用它的参数序列化一个std::function，然后将它们归档到一个文件中，或者归档到网络中，这样我们就可以在我们重新启动机器后调用这个函数（带有指定的参数），或者更常见的是，在另一台机器上，调用rpc。

这是一个例子：

测试代码： [https](https://github.com/galaxyeye/atlas/blob/master/libs/serialization/test/function.cpp) ://github.com/galaxyeye/atlas/blob/master/libs/serialization/test/function.cpp 实现： [https ://github.com/galaxyeye/atlas/blob/master/atlas/序列化/function.h](https://github.com/galaxyeye/atlas/blob/master/atlas/serialization/function.h)

一个易于使用的 C++ RPC 框架，它使程序员可以像使用本地函数一样使用远程函数，请参阅我的 github 上的项目先锋。

我会在下周一之前完成它。

例如，如果你想杀死集群中所有机器上的一个进程，在你的管理器程序中，只需要写：

多播客户端客户端；client.call("pkill", pkill, "a_bad_process");

我们假设服务器端程序实现了这样的函数： void pkill(const std::string& process_name);

希望有帮助:)

# jquery - jquery自动完成取消焦点

> ID：15605585
> 
> 赞同：1
> 
> 时间：2013-03-24T23:51:36.480
> 
> 标签：jquery, jquery-ui-autocomplete

我在 Wordpress 插件中使用 jQuery Autocomplete。失焦时如何取消 ajax/自动完成？ `$first_id`由 PHP 传递并允许多个实例。

```
jQuery(document).ready(function ($){

  $("#'.$first_id.'").autocomplete({
    source: function(req, add){
      $.getJSON("'.site_url().'/wp-admin/admin.php?page=church_admin/index.php&action=get_people&callback=?", req,  function(data) {

        //create array for response objects
        var suggestions = [];

        //process response
        $.each(data, function(i, val){
          suggestions.push(val.name);
        });

        //pass array to callback
        add(suggestions);
      });

    },
    select: function (event, ui) {
      var terms = $("#'.$first_id.'").val().split(", ");
      // remove the current input
      terms.pop();
      console.log(terms);
      // add the selected item
      terms.push(ui.item.value);
      console.log(terms);
      // add placeholder to get the comma-and-space at the end
      terms.push("");
      this.value = terms.join(", ");
      $("#'.$first_id.'").val(this.value);
      return false;
    },
    minLength: 3,

  });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T00:10:38.650

我认为自动完成会自动为您处理。[jQuery 站点上](http://jqueryui.com/autocomplete/)给出的示例实现显示了当焦点发送到其他地方时自动完成功能被关闭。

是否有一些代码阻止它正确关闭？

无论如何-您可以手动关闭自动完成功能，但我会先调查您的代码中发生了什么。

```
$("#'.$first_id.'").on('blur', function(){
    $("#'.$first_id.'").autocomplete("close");
} 
```

*编辑*

从您的评论中，听起来您在显示自动完成时添加了一些额外的 CSS。当自动完成关闭时，您可以通过以下`close`任一方式监听事件来删除它：

```
$( ".selector" ).autocomplete({
  close: function( event, ui ) {}
}); 
```

或者

```
$( ".selector" ).on( "autocompleteclose", function( event, ui ) {} ); 
```

# python - Django-watermark：URL 指向不正确

> ID：15605588
> 
> 赞同：0
> 
> 时间：2013-03-24T23:51:55.510
> 
> 标签：python, django, django-templates

我成功安装了[django-watermark](https://github.com/codekoala/django-watermark)。设置好后，我加载网页。在 Chrome 浏览器上，它运行良好，并且图像带有水印。在 Mozilla firefox 和 Opera 上，它没有显示任何图像，甚至我上传的图像也没有。检查源代码后，我发现“水印”后的“\”是导致问题的原因。

```
<img src=/media//photos/watermarked\3bbb94f57f32d2796ea59adc86310a12752f0088.jpg> 
```

模板

```
 <img src={{ MEDIA_URL }}/{{post.main_view|watermark:"hall,position=tl,opacity=90"}}> 
```

我一直在寻找解决此问题的方法，但没有成功，关于如何解决此问题的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-29T12:32:58.667

不得不通过挖掘水印文件夹来解决这个问题。水印/模板标签/watermark.py

检查以下代码，将其删除并粘贴：

```
#100   basedir = '%s/watermarked/' % os.path.dirname(url) 
```

# python - SQLAlchemy 查询 - Python

> ID：15605595
> 
> 赞同：0
> 
> 时间：2013-03-24T23:52:55.240
> 
> 标签：python, database, sqlalchemy

我对 SQLAlchemy 以及查询的工作方式有点困惑。假设我有一个桌面团队和另一个桌面游戏。我设置了它，所以如果我做 Team.games，它会调出 Team 玩过的所有游戏。为什么这是有效的：

```
from table_definitions import Team, Games

blah blah
session.query(Team).first().games 
```

这失败了：

```
teams_table = Table("teams", metadata, autoload=True)
session.query(teams_table).first().games

AttributeError: 'NamedTuple' object has no attribute 'Games' 
```

??

我的第二个问题是在它返回的第一个查询中`<table_def.Game object at 0x1b98090>`——我怎样才能让这个 Game 对象成为每个条目中保存的所有数据的列表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T07:58:24.163

如果没有团队和游戏的定义，我很难说。显然返回的对象是不同的。

Team 很可能有一个**表**属性，该属性与teams_table 具有相同的属性。

这是一个摘录，显示了一个可能有帮助的多对多关系示例。

```
from sqlalchemy.ext.declarative import declarative_base
from sqlalchemy import Table, ForeignKey, Column, Integer, String, Float, Binary, DateTime, Boolean
from sqlalchemy.orm import relationship

Base = declarative_base()

market_target = Table(
    'market_target', Base.metadata,
    Column('market_id', Integer, ForeignKey('market.id'), primary_key=True ),
    Column('target_id', Integer, ForeignKey('target.id'), primary_key=True )
)

class Market(Base):

    __tablename__ = 'market'
    id = Column(Integer, primary_key=True)
    id_market = Column(String(50))
    market = Column(String(50))

    targets = relationship("Target", secondary=market_target, backref="markets")

class Target(Base):

    __tablename__ = 'target'
    id = Column(Integer, primary_key=True)
    id_target = Column(String(100))
    sort = Column(Integer)
    target = Column(String(200)) 
```

# twitter-bootstrap - Angularjs 和 twitter 引导程序 - 每行创建 X 个项目

> ID：15605597
> 
> 赞同：3
> 
> 时间：2013-03-24T23:53:19.157
> 
> 标签：twitter-bootstrap, angularjs

我正在使用`angular.js`with`twitter bootstrap`创建 Web 应用程序的客户端。

我想知道，做这样的事情的正确方法是什么

![在此处输入图像描述](../Images/964acb0c85f2694a901e7a7ac83872d3.png)

现在我正在做这样的事情

```
<div class="span9">
    <div class="row">
        <div class="span3" ng-repeat="set in selectedCollection.sets">
            {{set.name}}</div>
    </div>
</div> 
```

使用此代码，即使我有 4 个元素，我也会得到 2 行，第一行有 3 个元素，第二行有一个元素。如果此解决方案有效（目前），我想知道这个：

```
To nest your content with the default grid, add a new .row and set of .span* columns within an existing .span* column. Nested rows should include a set of columns that add up to the number of columns of its parent. 
```

这部分来自官方引导文档。

如果这是一种不恰当的方式来做这种事情，怎么能做到呢？我是否应该以某种方式将此数据拆分为二维数组并创建两个嵌套循环，以便`span3`每行有 3 个 div？

如果是这种情况，我将在模型中创建一个函数，该函数将基于一维数组返回这个二维数组并`ng-repeat="dimensionalSet in mappingFunction()"`在我的外部元素中使用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-16T17:47:08.457

我其实也在想这种情况。我不认为你的小提琴是错的。如果这些嵌套的行列不加起来等于父列数，那应该不是问题。

您可以做的一件事是对一组对象执行 ng-repeat，其中每个对象包含三个对象的数组，然后始终添加这三个对象，即使其中一些对象是空的。如果您从服务调用中获取结果，您可以在发回结果之前在服务器端执行此操作。

# c++ - ASCII 格式的 MPI 并行 IO（我该怎么做？）

> ID：15605599
> 
> 赞同：3
> 
> 时间：2013-03-24T23:53:25.743
> 
> 标签：c++, io, parallel-processing, ascii, mpi

我知道 MPI IO 以二进制格式写入文件，但是这次我需要它是 ASCII 格式。我需要这个，因为我使用[Netpbm](http://en.wikipedia.org/wiki/Netpbm_format#File_format_description)处理图像，并且标题必须是 ASCII（因此程序可以读取 P1、P2、P3、P4、P5 或 P6 并确定图像的内容是 ASCII 还是二进制等）事物）。

我正在使用的代码是[（简单示例）MPI 并行 io 写入垃圾](https://stackoverflow.com/questions/15602521/simple-example-mpi-parallel-io-writing-garbage)中提供的代码，我想知道代码中是否有一个小的修改允许我以 ASCII 而不是二进制输出整数缓冲区的内容。

此外，有一种以 ASCII 格式输出的方法也将允许更轻松的调试。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-07-27T07:43:27.733

您可以`strlen`用于缓冲区大小

```
#include <mpi.h>
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

using namespace std;

int main(int argc,char *argv[])
{

    int  namelen, numprocs, rank = 7;
    char processor_name[MPI_MAX_PROCESSOR_NAME];
    MPI_Init(&argc,&argv);
    MPI_Comm_rank(MPI_COMM_WORLD,&rank);
    MPI_Comm_size(MPI_COMM_WORLD,&numprocs);    
    MPI_Get_processor_name(processor_name,&namelen);
    MPI_Status status;
    MPI_File fh;
    string test;
    const char* buf[100]; 
    string g = "test" + to_string(rank) + ".txt";
    MPI_File_open(MPI_COMM_SELF, g.c_str(), MPI_MODE_CREATE | MPI_MODE_WRONLY,MPI_INFO_NULL,&fh);
    for (int i=0; i < 100; i++){
        test = to_string(i) + "\n";
        buf[i] = test.c_str();
        MPI_File_write(fh, buf[i], strlen(buf[i]), MPI_CHAR, &status);
    }
    MPI_File_close(&fh);
    MPI_Finalize();
    return 0;
} 
```

注意`MPI_File_write(fh, buf[i], strlen(buf[i]), MPI_CHAR, &status);`

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-30T07:49:11.217

将您的数据作为 char 数组冲刺并使用 MPI-IO 和数据类型 MPI_CHAR 写入

# django - 如何使用用户数据呈现表单？

> ID：15605608
> 
> 赞同：1
> 
> 时间：2013-03-24T23:54:03.493
> 
> 标签：django, django-forms, django-users

如何创建一个 django 表单来显示用户的销售对象，每个对象旁边都有一个单选框以供删除？我正在尝试创建类似于 django admin 的内容，其中列出了用户并带有单选框以便快速删除。

![django 表单](../Images/604aacf00a6b77a7e6d133635ca0c7bc.png)

从 request.user 我试图从用户那里获取 Sell 的关联对象并返回销售列表以删除选定的对象。到目前为止，我的个人资料表格如下所示：

```
class ProfileForm(ModelForm):
    def __init__(self, *args, **kwargs):
        self.request = kwargs.pop("request")
        super(ProfileForm, self).__init__(*args, **kwargs)

    sells = forms.IntegerField(
        widget=forms.Select(
            sell=Sell.object.filter(user=self.request.uwer)
        )
    ) 
```

在views.py中，我计划像这样删除选定的销售对象：

```
for sell in form.sells:
    sell = Sell.objects.get(id=sell)
    sell.delete() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T08:12:34.733

这里有很多问题。最重要的是您无法在表单定义中设置选项，因为您无权访问`request.user`那里。

无论如何，我不认为你想要一个模型形式。这些用于创建和编辑模型实例，而您只想使用复选框列出现有实例。因此，您只需要一个带有代表这些实例的字段的普通表单，即 ModelMultipleChoiceField。

所以，表格看起来像这样：

```
class DeleteSellForm(forms.Form):
    sells = forms.ModelMultipleChoiceField(queryset=Sell.objects.none(),
                                           widget=forms.CheckboxSelectMultiple)

    def __init__(self, *args, **kwargs):
        user = kwargs.pop('user', None)
        super(DeleteSellForm, self).__init__(*args, **kwargs)
        self.fields['sells'].queryset=Sell.objects.filter(user=user) 
```

您会注意到查询集默认为 none，但在`__init__`方法中设置为正确的用户对象，我们可以在其中传入用户。

所以视图看起来像这样：

```
def delete_sells(request):
    if request.POST:
        form = DeleteSellsForm(request.POST, user=request.user)
        if form.is_valid():
            form.cleaned_data['sells'].delete()
    else:
        form = DeleteSellsForm(user=request.user)
    return render(request, 'template.html', {'form': form}) 
```

`ModelMultipleChoiceField`清理为 QuerySet，因此您应该可以`delete()`直接调用它。

# javascript - How do you store FB api response?

> ID：15605617
> 
> 赞同：0
> 
> 时间：2013-03-24T23:55:06.407
> 
> 标签：javascript, facebook-graph-api

I am trying the following code. I want the `html.concat(name)` line to work. `html` is a string.

```
 function getName() {                                                      
    var name = fbName(function(name){                                         
      alert(html);  //works                                                        
      alert("getName: " + name);  //works
      html.concat(name);  //fails?                                   
      alert(html);  // failed: html remains unchanged                                            
    });                                                                     
  };                                                                          

  function fbName(callback){                                                  
    FB.api('/' + user_id + '?fields=name', function(response) {             
      callback(response.name);                                                
    });                                                                     
  };                                                                        
  getName(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T23:57:54.343

js中的字符串是不可变的，所以`html.concat(name);`不会修改它的值， `html`而是返回一个新的字符串。改为使用`html = html.concat(name);`。

# css - rails3: how to change the color for the views of only one controller?

> ID：15605621
> 
> 赞同：0
> 
> 时间：2013-03-24T23:55:24.797
> 
> 标签：css, ruby-on-rails-3, stylesheet, asset-pipeline

In rails3, I want to have all the views in a specific controller(groups_controller) to have a different body background color. I have a stylesheet groups.css with this rule:

```
body { background-color:#333} 
```

and I'm including this file in application.css. but the problem is now every controller gets the styles I defined in groups.css. Is there another way to do this? Thank you!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T00:38:54.530

查看Rails 资产管道指南的[这一部分](http://guides.rubyonrails.org/asset_pipeline.html#how-to-use-the-asset-pipeline)，了解实现此目的的一种方法。

您需要将该样式规则移至该控制器的样式表 ( `groups.css.scss`)，然后确保每个页面加载与其控制器关联的样式表。您可以通过将以下行添加到您的视图模板（可能`application.html.erb`）来做到这一点：

```
<%= stylesheet_link_tag params[:controller] %> 
```

您可能还需要确保您的 css 清单不包含`groups.css.scss`- 如果您的其余样式规则在 中`application.css`，您可以删除该`*= require_tree .`指令。

还有其他方法可以做同样的事情，所以如果您对这种方法不满意，您应该能够找到其他替代方法。

# perl - How do I find the smallest epoch time that is in today (local timezone) with Perl?

> ID：15605623
> 
> 赞同：0
> 
> 时间：2013-03-24T23:55:46.833
> 
> 标签：perl, time, epoch

Perl time function is great, but how do I find the smallest epoch value that's in today? Since epoch is in seconds I would imagine that there are many epoch values that will correspond to a given day. How do I find the lowest in my timezone?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T01:45:37.477

不支持使用`timelocal`，但使用它来获取所需信息应该没有问题。

```
use Time::Local qw( timelocal );
my $epoch = timelocal(0,0,0, (localtime)[3,4,5]); 
```

*   我不知道任何一天有两个午夜的时区，所以我无法测试。
*   我测试了一个没有午夜的时区（2013 年 10 月 20 日在美国/圣保罗），它运行良好。

# joomla - Joomla 3.0 Register user with php script

> ID：15605625
> 
> 赞同：2
> 
> 时间：2013-03-24T23:55:59.723
> 
> 标签：joomla

I've searched and found a way to do this with JUser but when I try the script it says an include file can't be found and it doesn't exist on the server. I don't know if this is different for Joomla 3.0 so I was asking for help. Here's the script I tried:

```
<?php
   define( '_JEXEC', 1 );
   define('JPATH_BASE', dirname(__FILE__) );
   define( 'DS', DIRECTORY_SEPARATOR );
   /* Required Files */
   require_once ( JPATH_BASE .DS.'includes'.DS.'defines.php' );
   require_once ( JPATH_BASE .DS.'includes'.DS.'framework.php' );

   $app = JFactory::getApplication('site');
   $app->initialise();
   require_once JPATH_ROOT.DS.'components'.DS.'com_users'.DS.'models'.DS.'registration.php';
   require_once JPATH_ROOT.DS.'libraries'.DS.'joomla'.DS.'application'.DS.'component'.DS.'helper.php';
   $model = new UsersModelRegistration();
   jimport('joomla.mail.helper');
   jimport('joomla.user.helper');

   $username = 'jimporttest';
   $name = 'J Port2';
   $email = 'test @ mail.com';
   $password = 'test';
   $data = array( 'username' => $username,
             'name' => $name,
             'email1' => $email,
             'password1' => $password, // First password field
             'password2' => $password, // Confirm password field
             'block' => 0 );
   echo $model->register($data);
?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-10-29T11:02:15.670

您必须在 require_once 子句中使用 JPATH_BASE（您使用的是未定义的 JPATH_BASE_ROOT）。同样在 JOOMLA 3.0 中，helper.php 不在那个位置。

试试这个代码：

```
<?php
         define( '_JEXEC', 1 );
         define('JPATH_BASE', dirname(__FILE__) );
         define( 'DS', DIRECTORY_SEPARATOR );
         /* Required Files */
         require_once ( JPATH_BASE .DS.'includes'.DS.'defines.php' );
         require_once ( JPATH_BASE .DS.'includes'.DS.'framework.php' );

         $app = JFactory::getApplication('site');
         $app->initialise();
         require_once(JPATH_BASE.DS.'components'.DS.'com_users'.DS.'models'.DS.'registration.php';
        //not necessary
        //require_once(JPATH_BASE.DS.'libraries'.DS.'joomla'.DS.'application'.DS.'component'.DS.'helper.php';
         $model = new UsersModelRegistration();
         jimport('joomla.mail.helper');
         jimport('joomla.user.helper');

         $username = 'jimporttest';
         $name = 'J Port2';
         $email = 'test @ mail.com';
         $password = 'test';
         $data = array( 'username' => $username,
         'name' => $name,
         'email1' => $email,
         'password1' => $password, // First password field
         'password2' => $password, // Confirm password field
         'block' => 0 );
          echo $model->register($data);
  ?> 
```

我已经在我的 joomla 3.0 安装中尝试过了，它可以工作。

安德烈亚

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-18T01:00:32.223

除非您的文件位于安装 Joomla 系统的根文件夹中，否则肯定会出现此错误。

```
dirname(__FILE__) 
```

返回工作文件路径。因此，您可能需要相应地修改路径。利用

```
define( '_JEXEC', 1 );
define('JPATH_BASE', dirname(__FILE__) );
  echo JPATH_BASE; 
```

确保与 JPATH_BASE 相同路径中的“包含”文件夹重新启动。例如，如果您的文件位于“www/example/test”文件夹中，则使用

```
define( 'JPATH_BASE', realpath(dirname(__FILE__).'../../')); 
```

获得正确的基本路径。

我还在您的代码中发现了一些错误。将此工作代码用于测试目的。

```
 <?php
                define( '_JEXEC', 1 );
                define( 'JPATH_BASE', realpath(dirname(__FILE__).'../../'));
                define( 'DS', DIRECTORY_SEPARATOR );

                require_once ( JPATH_BASE .DS.'includes'.DS.'defines.php' );
                require_once ( JPATH_BASE .DS.'includes'.DS.'framework.php' );

                $app = JFactory::getApplication('site');
                $app->initialise();   

                require_once  JPATH_ROOT.DS.'components'.DS.'com_users'.DS.'models'.DS.'registration.php';
                $model = new UsersModelRegistration();
                jimport('joomla.mail.helper');
                jimport('joomla.user.helper');

                $username = 'ben';
                $name = 'ben';
                $email = 'test@mail.com';
                $password = 'test';
                $data = array( 'username' => $username,
                         'name' => $name,
                         'email1' => $email,
                         'password1' => $password, // First password field
                         'password2' => $password, // Confirm password field
                         'block' => 0 );

                $return = $model->register($data);
            ?> 
```

'../../' 的一部分

```
define( 'JPATH_BASE', realpath(dirname(__FILE__).'../../')); 
```

取决于我之前解释的根文件夹的偏差。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-27T14:30:01.170

对于 >=Joomla 3，我们需要使用以下代码。从“JModel”更改为“JModelLegacy”。[点击这里](http://docs.joomla.org/Potential_backward_compatibility_issues_in_Joomla_3_and_Joomla_Platform_12.2#General_changes)查看详细信息。

```
$data['name'] = $fname . ' ' . $lname;
$data['username'] = $email;
$data['email1'] = $email;
$data['email2'] = $email;
$pwd = substr(md5($email . $fname . time()), 0, 6);
$data['password1'] = $pwd;
$data['password2'] = $pwd;

JFactory::getLanguage()->load('com_users');
JModelLegacy::addIncludePath(JPATH_ROOT . '/components/com_users/models');

$model = JModelLegacy::getInstance('Registration', 'UsersModel');
$return = $model->register($data); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-25T15:20:18.537

这是您可以使用的代码。

```
$data['name'] = $fname . ' ' . $lname;
$data['username'] = $email;
$data['email1'] = $email;
$data['email2'] = $email;
$pwd = substr(md5($email . $fname . time()), 0, 6);
$data['password1'] = $pwd;
$data['password2'] = $pwd;

JFactory::getLanguage()->load('com_users');
JModel::addIncludePath(JPATH_ROOT . '/components/com_users/models');

$model = JModel::getInstance('Registration', 'UsersModel');
$return = $model->register($data); 
```

# android - Android AsyncTask how to check if it was launched with a specific arg

> ID：15605628
> 
> 赞同：0
> 
> 时间：2013-03-24T23:56:40.287
> 
> 标签：android, android-asynctask

I get data asynchrounsly and this data gets plotted, got the logic worked out and now of course I need to run this smootthly so I use an AsyncTask when I get more data it is digested to a bitmap and plotted accordingly of course running on a loop without the AsyncTask works but on slower/older devices it is slugish, with the ASyncTask it seems like there is some sort of overrun as the bitmap/ImageView flickers

The items come in 5 different flavours so I set my parms properly when I make a new instance of the Asynctask and call execute to run a new instance of it

Now if a particular task for a specific flavour is running already how to check that??? so that I skip it until it finish processing the data for that type??? I needed to pass different data types so I used a list of Objects and that works

I know KISS is to make 5 different instances of the AsyncTask and check the **taskInstance_n.getStatus() != AsyncTask.Status.RUNNING** but I thought there may be a cleaner/cooler generic way to do it ????

```
 ArrayList<Object>parms = new ArrayList<Object>
    ...
    do
    {
      ..grab the data ...
      switch(id)
      {
        case 0:
                 parms.clear();
                 parms.add(arg1);
                 parms.add((type1)arg2)
                 parms.add((type2)arg3)
                 if( ! task is running with arg1)  ---->how do I do this
                    new myAsyncTask().execute(parms,null,null);

              break;
        case 1:
        ... other 4 choices simar way to call it
      }  // end of switch

      ...

  }while(i_get_data) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T00:42:02.027

与普遍的看法相反，AsyncTasks 不是并行运行的，它们形成一个队列并相互等待（HoneyComb 除外，但无论如何你都不应该以 API9-10 为目标）。所以你不应该担心两个 AsyncTasks 处理相同类型的数据，当你得到新的东西，准备好参数并开火时，它会耐心地等待，直到所有以前的 AsyncTasks 都完成。

# c++ - Difference between "class variable", "class variable()", and "class variable(argument)

> ID：15605632
> 
> 赞同：0
> 
> 时间：2013-03-24T23:57:00.803
> 
> 标签：c++, variables

I came into an issue when trying to declare an instance of my own class "myClass". For example, `myClass class()` gave a compile error.

I did some reading and now know why, because I am essentially declaring a function "class" that takes no arguments and returns type "myClass". I see this now. But what I dont understand is if I have an overloaded constructor, why doesn't the compiler think this: `myClass class(argument)` is me trying to declare a function "class" with one argument that returns type "myClass"?

Is it because there is no argument type, and then it knows its the overloaded constructor?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T23:59:21.263

这是正确的。函数声明的参数必须是类型，所以如果它们不是类型，编译器知道它不能是函数声明，而是假定您正在构造一个实例并将参数作为参数传递。这个逻辑工作得很好，除了在构造函数没有参数的特殊情况下，在这种情况下它是模棱两可的。C++ 通过尽可能将语句视为声明来解决这种歧义，因此要创建不带参数的实例，请不要使用参数列表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T00:02:15.310

如果`argument`是变量的名称，或者不能解释为*类型*的表达式，则编译器无法将其解释为函数声明 - 因为在函数声明中您可以省略参数*名称*并仅指定它们的类型，但反之则不然。

但是，如果你有这样的事情：

```
myClass object(myOtherClass()); 
```

你可能认为这是试图复制构造一个`object`从默认构造的临时类型调用的对象`myOtherClass`，你会遇到所谓的[**Most Vexing Parse**](http://en.wikipedia.org/wiki/Most_vexing_parse)：事实上，编译器会将上面的声明解释为一个被调用的函数`object`，它返回一个类型的对象`myClass`并接受一个函数作为其唯一的参数，而该函数又不接受任何参数并返回一个类型的值`myOtherClass`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-25T00:03:57.883

```
myClass myclass() 
```

声明一个具有名称`myclass`、返回类型`myClass`且无参数的函数。这被称为[http://en.wikipedia.org/wiki/Most_vexing_parse](http://en.wikipedia.org/wiki/Most_vexing_parse)

当您声明一个调用默认构造函数的类对象时，您可以：

```
myClass obj; 
```

函数的参数必须是某种类型。

```
myClass myclass(argument) 
```

意味着创建一个类的对象`myClass`，具有对象名称`myclass`。

myClass myclass（类型名参数）

声明一个函数，它不调用任何构造函数，`typename`是必需的，但`argument`在函数原型中是可选的。

# php - Authorizing with oAuth, posting to Twitter

> ID：15605635
> 
> 赞同：5
> 
> 时间：2013-03-24T23:57:19.540
> 
> 标签：php, curl, twitter, twitter-oauth

I've created a Twitter Application to auto-post to my Twitter account. So, I don't need to authorize new users.

I've already set access level to read/write, and received an access token. I've used the OAuth Tool in the application to generate a cURL command:

> curl --request 'POST' '[https://api.twitter.com/1/statuses/update.json](https://api.twitter.com/1/statuses/update.json)' --data 'status=Maybe+he%27ll+finally+find+his+keys.+%23peterfalk' --header 'Authorization: OAuth oauth_consumer_key="...", oauth_nonce="97fad626790e8e5988d4a06cfd47fa74", oauth_signature="...", oauth_signature_method="HMAC-SHA1", oauth_timestamp="1364161424", oauth_token="...", oauth_version="1.0"' --verbose

Above the command, it says:

> Important: This will only be valid for a few minutes. Also remember the cURL command will actually execute the request.

I assume that this will work in a linux terminal.

I'd like to know how to translate this into a PHP cURL command. Here's what I've tried. Note that value of $DST is the value of "DST" in [https://dev.twitter.com/docs/auth/authorizing-request](https://dev.twitter.com/docs/auth/authorizing-request); it is also equal to the value of the string after `--header 'Authorization:` in the cURL command in the OAuth tool.

```
$ch = curl_init();
curl_setopt_array($ch, array(
    CURLOPT_RETURNTRANSFER => 1,
    CURLOPT_URL => $url,
    CURLOPT_POST => 1,
    CURLOPT_POSTFIELDS => array(
        data => 'status='.urlencode($status),
        header => 'Authorization: '.$DST
    )
));
$resp = curl_exec($ch);
curl_close($ch); 
```

But the value of `$resp` is:

```
{
request: "/1/statuses/update.json",
error: "Could not authenticate you."
} 
```

Is there something I'm doing wrong? Note that the OAuth Tool said that the cURL command would actually work. So I think it's just a matter of figuring out how to arrange the cURL in PHP. I'm not very familiar with it. Also note that I want to avoid using the OAuth libraries if I can. I feel like there should be a much more light-weight solution to this than to install a whole library.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-30T22:58:50.930

您好，感谢您的帮助。

我有同样的问题，你会在我的代码下面找到：

```
<?php
public function updateStatus($message)
{
    // Encoding message for the curl data parameter
    $messageData = rawurlencode($message);

    // Double encoding message for the message in signature base string
    $messageSignature = rawurlencode($messageData);

    // URL for posting a new tweet
    $statusURL = rawurlencode('https://api.twitter.com/'.$this->version.'/statuses/update.json');

    // Create oauth_nonce parameter
    $oauth_nonce = preg_replace('~[\W]~','',base64_encode(uniqid()));

    // Create timestamp
    $oauth_timestamp = time();

    // Create signature base string parameter
    $signature_base_string = "POST&".$statusURL."&oauth_consumer_key%3D".CB_TWITTER_API_KEY."%26oauth_nonce%3D".$oauth_nonce."%26oauth_signature_method%3DHMAC-SHA1%26oauth_timestamp%3D".$oauth_timestamp."%26oauth_token%3D".$this->sessionData['oauth_token']."%26oauth_version%3D1.0%26status%3D".$messageSignature."";

    // Create signature key 
    $signature_key = CB_TWITTER_SECRET_KEY.'&'.$this->sessionData['oauth_token_secret'];

    // Create new signature
    $newSignature = rawurlencode(base64_encode(hash_hmac('sha1', $signature_base_string, $signature_key, true)));

    // Create header
    $header="Authorization: 
                OAuth 
                oauth_consumer_key=\"".CB_TWITTER_API_KEY."\", 
                oauth_nonce=\"".$oauth_nonce."\", 
                oauth_signature=\"".$newSignature."\", 
                oauth_signature_method=\"HMAC-SHA1\", 
                oauth_timestamp=\"".$oauth_timestamp."\", 
                oauth_token=\"".$this->sessionData['oauth_token']."\", 
                oauth_version=\"1.0\"";

    // Replace line breaks and tabulations in header
    $header = preg_replace( "/\r|\n|\t/", "", $header);

    // Init cURL
    $ch = curl_init();

    // Put header
    curl_setopt($ch, CURLOPT_HTTPHEADER, array($header));

    // Set request type to POST for POSTing a tweet
    curl_setopt($ch, CURLOPT_CUSTOMREQUEST, 'POST');

    // Enable verbose for debugging only
    curl_setopt($ch, CURLOPT_VERBOSE, false);

    // Return the transfer in a string
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);

    // Set URL of cURL request
    curl_setopt($ch, CURLOPT_URL, rawurldecode($statusURL));

    // Do a POST request (HTML POST)
    curl_setopt($ch, CURLOPT_POST, 1);

    // Set data
    curl_setopt($ch, CURLOPT_POSTFIELDS, 'status='.$messageData);

    // Execute cURL and store result
    $output = curl_exec($ch);

    // Close cURL
    curl_close($ch);

    if ($output) {
        $output = json_decode($output);
    }

    if ($this->hasErrors($output, false))
    {
        return false;
    }

   return true;
}
?> 
```

希望它会有所帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T04:00:12.550

我遇到了三个问题：

(1) 我没有在这个问题中包含它，但我的签名没有正确创建。

我所做的是，`base64_encode(hash_hmac('sha1', $base, $key));`但我应该将 hash_hmac 第四个参数设置`true`为返回原始二进制而不是十六进制（十六进制显示为 Twitter 文档中的示例，这让我感到困惑）。因此正确的函数是：`base64_encode(hash_hmac('sha1', $base, $key, true));`。

(2) cURL 设置不正确。我需要 CURLOPT_HTTPHEADER 来设置授权，并且 CURL_VERBOSE 设置为 true：

```
curl_setopt($ch, CURLOPT_HTTPHEADER, array('Authorization: ' . $DST));
curl_setopt($ch, CURLOPT_VERBOSE, 1);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_POST, 1);
curl_setopt($ch, CURLOPT_POSTFIELDS, 'status='.rawurlencode($status));
curl_setopt($ch, CURLOPT_URL, $url); 
```

(3) 如上面的代码所示，我必须将状态发布为字符串，而不是数组。我在这个问题上找到了这个问题的解决方案：[Why can't I authenticate with OAuth?](https://stackoverflow.com/questions/11212716/why-cant-i-authenticate-with-oauth) .

所有这一切现在都完美无缺。此外，请确保您的 Twitter 应用程序中的访问令牌表明访问级别为“读写”。如果没有，请更改“设置”中的权限，然后返回“详细信息”并重新创建您的访问令牌。

## 完整脚本

```
<?php

class Tweet {

public $url = 'https://api.twitter.com/1/statuses/update.json';

function the_nonce(){
    $nonce = base64_encode(uniqid());
    $nonce = preg_replace('~[\W]~','',$nonce);
    return $nonce;
}

function get_DST($status){

    $url = $this->url;

    $consumer_key = $your_consumer_key_here;
    $nonce = $this->the_nonce();
    $sig_method = 'HMAC-SHA1';
    $timestamp = time();
    $version = "1.0";
    $token = $your_token_here;
    $access_secret = $your_access_secret_here;
    $consumer_secret = $your_consumer_secret_here;

    $param_string = 'oauth_consumer_key='.$consumer_key.
            '&oauth_nonce='.$nonce.
            '&oauth_signature_method='.$sig_method.
            '&oauth_timestamp='.$timestamp.
            '&oauth_token='.$token.
            '&oauth_version='.$version.
            '&status='.rawurlencode($status);
    $sig_base_string = 'POST&'.rawurlencode($url).'&'.rawurlencode($param_string);
    $sig_key = rawurlencode($consumer_secret).'&'.rawurlencode($access_secret);

    $tweet_sig = base64_encode(hash_hmac('sha1', $sig_base_string, $sig_key, true));

    $DST = 'OAuth oauth_consumer_key="'.rawurlencode($consumer_key).'",'.
        'oauth_nonce="'.rawurlencode($nonce).'",'.
        'oauth_signature="'.rawurlencode($tweet_sig).'",'.
        'oauth_signature_method="HMAC-SHA1",'.
        'oauth_timestamp="'.rawurlencode($timestamp).'",'.
        'oauth_token="'.rawurlencode($token).'",'.
        'oauth_version="1.0"';
    return $DST;
}

function set($status){

    $url = $this->url;

    $ch = curl_init();

curl_setopt($ch, CURLOPT_HTTPHEADER, array('Authorization: ' . $this->get_DST($status)));
curl_setopt($ch, CURLOPT_VERBOSE, 1);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_POST, 1);
curl_setopt($ch, CURLOPT_POSTFIELDS, 'status='.rawurlencode($status));
curl_setopt($ch, CURLOPT_URL, $url);

    $result = json_decode(curl_exec($ch));
if(!curl_errno($ch)){
    $info = curl_getinfo($ch);
    if($info['http_code']!='200'){
//error posting
echo 'Error: '.$result->{'error'};
    }else{
//success
echo 'Success! <a href="https://twitter.com/AOKHalifax/status/'.$result->{'id_str'}.'" target="_blank">View Tweet</a>';
    }
}else{
    //error connecting
    echo 'error posting';
    }
    curl_close($ch);
    }
}

/* 
Usage example:
$status = new Tweet();
$status->set('checking'); 
*/

?> 
```

# c# - Why Do I have to implement Dispose from IDisposable, Why not just a simple method to release...?

> ID：15605636
> 
> 赞同：3
> 
> 时间：2013-03-24T23:57:20.650
> 
> 标签：c#, .net, idisposable

Why Do I have to implement Dispose from IDisposable, What if I just implement any method in my class that releases the unmanaged resource?

People I talk to pretend to know the reason just telling me I have to do so.

Honestly, I think this is the kind of question too-obvious-to-ask-although-Idon't-know between some developers

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-25T00:04:51.860

> 我与之交谈的人假装知道原因，只是告诉我我也知道。

因为它建立了释放原生资源的通用接口（方法）。当您正确实施时，`IDisposable`我现在可以：

1.  `IDisposable`如果需要，可以 通过界面使用您的类型。
2.  将您的类型的创建包装在一个`using`语句中，而不是到处写`try/finally`。
3.  使用自动化工具来检测我未能调用`Dispose()`您的类的实例的实例（即，实现的类的实例`IDisposable`）。
4.  如果我犯了不直接调用的错误，请依靠运行时调用你的终结器（`Dispose()`只要你正确实现了你的类，它就会调用）`Dispose()`。并不是说您应该这样做，因为它会使资源管理变得不确定，但这是一个很好的以防万一的功能。

您不必*实现*`IDisposable`，只需在您的类型管理本机资源（运行时无法管理的资源）时实现。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T19:50:42.967

该`IDisposable`接口的独特之处在于它的存在实际上说明了一个类而不是它的缺失。如果一个类实现`IDisposable`了 ，则该类表明它*可能*已经要求某个外部实体（可能是任何类型的实体，在宇宙中的任何地方）代表它做某事，直到另行通知，这可能会损害其他潜在用户，并且它*可能*因此有责任确保在不再需要其服务时通知外部实体。例如，封装输入流的对象可能要求底层操作系统独占访问文件[可能在不同的计算机上]；直到对象告诉操作系统它已处理完该文件，或者托管该对象的应用程序终止，宇宙中的任何其他地方都无法访问该文件。因此，该对象有责任在不再需要该文件时通知操作系统。请注意，输入流的使用者并不真正关心该流是否真的要求任何外部实体代表它做任何事情。相反，一旦流的消费者知道不再需要它，消费者就会调用`Dispose`在流上，然后可以执行任何必要的操作（*如果有*），以确保仍然代表它执行操作的所有实体（再次，如果有）被通知他们可以停止这样做。

请注意，`IDisposable`这并不是说一个类实际上会要求任何外部实体代表它做任何事情，也不是说它实际上有任何清理职责，也不是说不调用就放弃实例会造成任何实际伤害`Dispose`。但是，如果一个类*没有*实现`IDisposable`，那么这将提供一个非常强烈的指示，表明该类的实例*没有*承担任何责任来确保清理外部资源。至少，它提供了一个强有力的指示，表明可以安全地放弃对象，而无需撤消任何必要的清理操作[某些类型，如`WeakReference`需要清理但不实现`IDisposable`，而是依赖于最终确定]

因此，我认为实现类`IDisposable`而不是使用其他一些清理方法的一个很好的理由是避免给人一种不需要清理的错误印象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T00:32:02.967

如果你能确保你的释放函数在任何情况下都会被调用，无论发生什么，异常，应用程序崩溃等，那么我会说，你不必实现 IDisposable 接口。

但事实是，如果您正在编写一个类或一个组件，您无法预测您的客户将如何使用它。他们可能会忘记调用您的发布功能。这将导致您的资源无法释放。

实现 IDisposable 接口是一个好习惯

# mysql - my first ADD / Subract on MySQL

> ID：15605637
> 
> 赞同：1
> 
> 时间：2013-03-24T23:57:26.627
> 
> 标签：mysql

Given a table that looks like this:

```
| Book in Shelves | Arrived Books | Borrowed Books | Total Books |
        15               10                5              ? 
```

How can I add the first three columns and have the total appear in the `Total Books` column?

```
Book in Shelves + Arrived books - Borrowed Books = Total Books 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T00:15:16.433

在设计数据库时，您不存储可以从其他值计算的值。这将使您的数据库不一致。例如：如果您将 更新`Book in Shelves`为 20，则必须添加另一个查询来编辑`Total Books`. 所以永远不要添加你可以计算的列。从数据库中检索数据时，您可以执行以下操作：

```
SELECT `Book in Shelves`, `Arrived Books`, `Borrowed Books`, (`Book in Shelves` + `Arrived Books` - `Borrowed Books`) AS `Total books` FROM `table`; 
```

结果：

```
+-----------------+---------------+----------------+-------------+
| Book in Shelves | Arrived Books | Borrowed Books | Total books |
+-----------------+---------------+----------------+-------------+
|              15 |            10 |              5 |          20 |
|              44 |            22 |              5 |          61 |
|              12 |             2 |              7 |           7 |
+-----------------+---------------+----------------+-------------+ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T00:10:07.267

您的意思是通过您在下面提供的计算来更新“总图书”？尝试这个：

```
UPDATE `tablename` SET total_books=(books_in_shelves+arrived_books-borrowed_books) 
```

您也可以使用[触发器](http://dev.mysql.com/doc/refman/5.0/en/triggers.html)。

'PHP and MySQL for dummy' 在我看来是一本好书。但是，例如 Lynda.com 上的一些互联网教程也很有帮助！

# asp.net-mvc - 如何声明 ASP .NET Web API 操作参数必须为非空？

> ID：15605643
> 
> 赞同：0
> 
> 时间：2013-03-24T23:58:10.547
> 
> 标签：asp.net-mvc, asp.net-mvc-4

像下面这样的简单操作，有没有办法声明 thingy 不能为空，如果是，ModelState.IsValid 将为假？或者每个动作也应该检查一个空的东西？

```
 public HttpResponseMessage DoSomething(Thingy thingy)
        {
             if (ModelState.IsValid)
             {
                 // We never get here if thingy is null
             }
        } 
```

# android - 在 Android 上访问第 3 方相机应用程序

> ID：15605645
> 
> 赞同：0
> 
> 时间：2013-03-24T23:58:18.010
> 
> 标签：android, android-camera

我正在运行 Android 4.2 Jelly bean，并尝试使用 Eclipse 构建应用程序。我正在构建的应用程序需要访问具有连拍模式功能的相机，不幸的是库存相机应用程序没有。但是，Play 商店中有几个提供此功能的相机应用程序，例如“Bust Mode Camera”。我想知道是否可以从我的应用程序中访问这个相机应用程序（或类似的应用程序），并使用它而不是默认的相机应用程序？

我试图找到这样的解决方案，但一直没能。我真的很感激这方面的一些帮助。提前致谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T01:48:38.047

您可以使用[PackageManager](http://developer.android.com/reference/android/content/pm/PackageManager.html)获取已安装应用程序的列表，并查看您想要的应用程序是否已安装。

如果未安装，则您可以请求用户从 Google Play 安装它，然后在 Google Play 上为他们启动应用程序页面。如果该应用与用户的设备不兼容，这将不起作用。

安装后，您可以通过普通[Intent](http://developer.android.com/reference/android/content/Intent.html)简单地启动。

# c++ - C++ OpenGL 有一个 Quad 跟随鼠标指针（没有 Glut）

> ID：15605647
> 
> 赞同：0
> 
> 时间：2013-03-24T23:58:48.200
> 
> 标签：c++, opengl, mouse

我试图让一个四边形跟随鼠标指针。所以基本上我需要将屏幕坐标转换为世界坐标。我看过很多关于这方面的帖子，以及来自 NeHe 和其他地方的教程，但没有一个适合我。几乎每次，我都会遇到某种缩放问题，即我将鼠标从窗口中心移得越远，四边形与鼠标的偏移就越大。

我目前正在尝试的代码来自 [http://www.3dbuzz.com/forum/threads/191296-OpenGL-gluUnProject-ScreenCoords-to-WorldCoords-problem](http://www.3dbuzz.com/forum/threads/191296-OpenGL-gluUnProject-ScreenCoords-to-WorldCoords-problem) 但它仍然存在缩放问题，即使那个人链接说代码对他有用。

如何让四边形跟随鼠标？

下面是代码（来自渲染帧函数）：

```
glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);
glLoadIdentity();
glTranslatef(0.0f,0.0f,-5.0f);

POINT mouse;
GetCursorPos(&mouse);
ScreenToClient(WindowHandle, &mouse);

GLdouble
    posX1,
    posY1,
    posZ1,
    posX2,
    posY2,
    posZ2,
    modelview[16],
    projection[16];
GLint
    viewport[4];

glGetDoublev(GL_MODELVIEW_MATRIX, modelview);
glGetDoublev(GL_PROJECTION_MATRIX, projection);
glGetIntegerv(GL_VIEWPORT, viewport);

gluUnProject( mouse.x, viewport[1] + viewport[3] - mouse.y, 0, modelview, projection, viewport, &posX1, &posY1, &posZ1);
gluUnProject( mouse.x, viewport[1] + viewport[3] - mouse.y, 1, modelview, projection, viewport, &posX2, &posY2, &posZ2);

GLfloat t = (posZ1 - 0) / (posZ1 - posZ2);

GLfloat
    fX = posX1 + (posX2 - posX1) * t,
    fY = posY1 + (posY2 - posY1) * t;

OutputDebugFloat(fX);
OutputDebugString(", ");
OutputDebugFloat(fY);
OutputDebugString("\n");

glTranslatef(fX, fY, 0);
DrawTile(test.Tex()); // Draws the quad with the specified texture

SwapBuffers(hDC); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T02:07:57.737

好吧，我似乎已经想通了。问题是我没有背景四边形。（我删除了它，所以在测试时我可以有一个空白屏幕。坏主意。）我尝试过的大多数教程实际上都有效，只是因为这个而被破坏了。

编辑：我发现'glReadPixels' 使 FPS 下降了很多。我通过仅每 FPS/60 帧更新四边形位置来解决此问题。

# asp.net-mvc-4 - ASP.NET MVC4 ActionLink 在链接中显示“索引”

> ID：15605650
> 
> 赞同：2
> 
> 时间：2013-03-24T23:59:22.427
> 
> 标签：asp.net-mvc-4

通常，路由到任何控制器的 Index 操作的 ActionLink 将省略链接中的“Index”，即`http://localhost:8080/Controller/id`. 就我而言，我试图将字符串作为 ID 传递给 Eta 控制器的 Index 操作。代码如下：

`@Html.ActionLink(item.Name, "Index", "Eta", new { id = item.Name }, null)`

结果链接显示为：`http://localhost:8080/Eta/Index/some-input-string`而不是`http://localhost:8080/Eta/some-input-string`

此 RouteConfig 与 File>New Project>MVC4 Application 完全相同。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T00:09:54.363

在 URI 中包含“索引”作为操作是必要的，因为您在字符串中包含路由值。

如果不指定动作，路由值将被解释为动作。

例如：

```
http://localhost:8080/Etc/abc123
                       ^    ^
                Controller  |
                            |
                        Action (oops) 
```

对你来说，`abc123`是一个有意义的参数。对于路由引擎来说，这是一个动作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T00:10:51.660

MVC4 模板中的标准路由是 {Controller}/{Action}/{id}，因此您需要将其更改为 {Controller}/{id}，默认 Action = "Index"

# java - 杰克逊与 JSON - 只需打印出整个响应

> ID：15605652
> 
> 赞同：-1
> 
> 时间：2013-03-24T23:59:57.553
> 
> 标签：java, jackson

使用 ObjectMapper 我可以发送一个 JSON 请求。

但是，我得到的响应是某种形式的时髦错误——我真的很想看到远程服务器返回的整个 json 字符串。

我知道我可以模拟请求并查看它（例如通过 curl），但这对调试我的程序并没有真正的帮助。

所以！鉴于请求是使用杰克逊 ObjectMapper 发送的，我如何将整个响应打印为字符串？

我不想让任何对象被捆绑/解绑 - 我正在尝试弄清楚对象的样子，因此想看到字符串！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T00:58:27.537

呸。

看起来我对杰克逊和 URL 阅读的不熟悉让我变得更好了。

Jackson 不会做任何这样的事情（我认为！），但这没关系 - 通常你会将输入流提供给 ObjectMapper 以供使用。

例如

```
mapper.writeValue(connection.getOutputStream(), somePojoHere); 
```

鉴于这种情况，那么就这样做：

```
BufferedReader in = new BufferedRead(new InputStreamReader(connection.getInputStream()));

String inputLine;
while ((inputLine = in.readLine()) != null){
    System.out.println(inputLine);
}
in.close(); 
```

# php - 在多个但连续的行和列中使用表中的回显显示图像

> ID：15605654
> 
> 赞同：0
> 
> 时间：2013-03-25T00:00:06.633
> 
> 标签：php, html-table, echo, multiple-columns, rows

我设法显示了数据库中的图像，但是它只是连续显示，没有表格中的任何格式。我必须做一个额外的 if 循环或 while 循环吗？

```
<table cellpadding='4' cellspacing='0'>

<?php
include 'dbFunctions.php';
$arrStocks = executeSelectQuery("SELECT name,id,image,price FROM stocks");

for ($countStocks = 0; $countStocks < count($arrStocks); $countStocks++) {
  $name  = $arrStocks[$countStocks]['name'];
  $image = $arrStocks[$countStocks]['image'];
  $id    = $arrStocks[$countStocks]['id'];
  $price = $arrStocks[$countStocks]['price'];
?>
  <thead>
    <tr>
      <th class="timgG">
        <h4><?php echo '<img src="stocks/' . $image . '">' ?></h4>
      </th>
      <th class="timgG">
        <?php echo '<a href="stockDetails.php?id=' . $id . '">' . $name . '</a>'; ?>
      </th>
    </tr>
<?php
}
?>
  </thead>
</table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T00:23:13.040

您当前的代码将输出如下内容

```
<table>
  <thead>
  <tr>
    <th><h4><img /></h4></th>
    <th><a>...</a></th>
  </tr>
  <thead>
  <tr>
    <th><h4><img /></h4></th>
    <th><a>...</a></th>
  </tr>
  <thead>
  <tr>
    <th><h4><img /></h4></th>
    <th><a>...</a></th>
  </tr>

  ... 
</thead> 
```

这不是格式良好的 HTML。我认为您不需要在标题中包含图像或表格的每一行都是表格列标题。

相反，请尝试使用`<td></td>`而不是`<th></th>`将您的开口`<thead>`放在 for 循环之外。

您可能还想考虑您的表格标题将是什么 - 如果它们是您`arrStocks`查询中的第一行，那么您可以添加一个 if 语句来更改您的第一个表格行的输出以制作它们`<th></th>`，但同样，我不确定为什么需要将图像定义为表头。

**编辑**

唯一可能破坏表输出的是包含的内容。

尝试：

```
<?php
include 'dbFunctions.php';
$arrStocks = executeSelectQuery("SELECT name,id,image,price FROM stocks");
?>
<table cellpadding='4' cellspacing='0'>
<?
for ($countStocks = 0; $countStocks < count($arrStocks); $countStocks++) {
  $name  = $arrStocks[$countStocks]['name'];
  $image = $arrStocks[$countStocks]['image'];
  $id    = $arrStocks[$countStocks]['id'];
  $price = $arrStocks[$countStocks]['price'];
?>
    <tr>
      <td class="timgG">
        <?php echo '<img src="stocks/' . $image . '" alt="">' ?>
      </td>
      <td class="timgG">
        <?php echo '<a href="stockDetails.php?id=' . $id . '">' . $name . '</a>'; ?>
      </td>
    </tr>
<?php
}
?>
</table> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T15:28:14.370

如果我正确理解您的要求，您需要一个图像网格。网格是一个 2 条目表，因此您确实需要有 2 个循环。行的每个条目（即每一列）都来自第一个循环，每一行都来自第二个循环，调用内部的第一个循环。

我将继续下一个片段。但是，您没有给出一些未知的限制，因此我将假设其中一些。例如，我将假设您的数据作为一维数组返回。

```
<?php
$data = array('one', 'two', 'three', 'four', 'five', 'six');
$nbColumns = 3;
?>

<table>
  <?php
    for($row = 0; $row * $nbColumns < count($data); ++$row) {
  ?>
  <tr>
    <?php
    for($col = 0; $col < $nbColumns; ++$col) {
    ?>
      <td><?php echo $data[$row * $nbColumns + $col]; ?></td>
    <?php
    }
    ?>
  </tr>
  <?php
  }
  ?>
</table> 
```

这将产生：

```
<table>
  <tr>
    <td>one</td>
    <td>two</td>
    <td>three</td>
  </tr>
  <tr>
    <td>four</td>
    <td>five</td>
    <td>six</td>
  </tr>
</table> 
```

您应该能够根据您的需要调整此代码段。

如果有什么需要我解释的，请告诉我，以便我可以编辑我的答案/片段。

* * *

**编辑：**

我不确定你需要我解释什么。

无论如何，我只是在我的代码片段中重新注入了您的初始代码，但我没有做任何特别的事情。基本上，我只是在顶部插入`include`和调用，并用你的两行替换了哑数字，第一行是图像，第二个是链接/名称。`executeSelectQuery`

这应该可以正常工作，但我不能保证它会因为我没有你的代码的所有细节。

```
<?php
include 'dbFunctions.php';
$arrStocks = executeSelectQuery("SELECT name,id,image,price FROM stocks");
$nbColumns = 3;
?>

<table>
  <?php
    for($row = 0; $row * $nbColumns < count($arrStocks); ++$row) {
  ?>
  <tr>
    <?php
    for($col = 0; $col < $nbColumns; ++$col) {
      $index = $row * $nbColumns + $col;
      $name  = $arrStocks[$index]['name'];
      $image = $arrStocks[$index]['image'];
      $id    = $arrStocks[$index]['id'];
      $price = $arrStocks[$index]['price'];
    ?>
      <td>
        <img src="stocks/<?php echo $image; ?>" alt="<?php echo $name; ?>">
        <br>
        <a href="stockDetails.php?id=<?php echo $id; ?>"><?php echo $name; ?></a>
      </td>
    <?php
    }
    ?>
  </tr>
  <?php
  }
  ?>
</table> 
```

作为结论，请注意您不应该使用 a`table`来实现您想要的。我的回答有点骇人听闻（这`$nbColumns`不是很好），但没有什么更好的方法可以使用`table`s. 虽然使用`float`s 可能是一个更好的解决方案，但它不再是 PHP 相关的问题......

* * *

**编辑2：**

编辑并测试了我的最后一个片段，它现在可以工作了;-)

# winapi - 透明win32窗口和文字

> ID：15605655
> 
> 赞同：8
> 
> 时间：2013-03-25T00:00:07.520
> 
> 标签：winapi, text, transparent

我正在尝试制作全屏透明无边框窗口，并在其上完美显示文本。文本背景应该是透明的，但不是实际的字体。问题是当我不执行 SetWindowRgn 时，我只能看到 TextOut 显示。我不知道我做错了什么:(

```
BOOL InitInstance(HINSTANCE hInstance, int nCmdShow)
{
   HWND hWnd;
   hInst = hInstance;

   DWORD Flags1 = WS_EX_COMPOSITED | WS_EX_LAYERED | WS_EX_NOACTIVATE | WS_EX_TOPMOST | WS_EX_TRANSPARENT;
   DWORD Flags2 = WS_POPUP;

   hWnd = CreateWindowEx(Flags1, szWindowClass, szTitle, Flags2, 0, 0, 1920, 1200, 0, 0, hInstance, 0);

   if(!hWnd)return FALSE;

   HRGN GGG = CreateRectRgn(0, 0, 0, 0);
   SetWindowRgn(hWnd, GGG, false);

   ShowWindow(hWnd, nCmdShow);
   UpdateWindow(hWnd);

   DeleteObject(GGG);

   return TRUE;
}

    case WM_PAINT:
    hdc = BeginPaint(hWnd, &ps);

    SetBkMode(hdc, TRANSPARENT);
    TextOut(hdc, 50, 50, L"MY TEXT", lstrlen(L"MY TEXT"));

    EndPaint(hWnd, &ps); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-25T17:54:09.260

像这样解决了这个问题：

```
BOOL InitInstance(HINSTANCE hInstance, int nCmdShow)
{
   HWND hWnd;
   hInst = hInstance;

   DWORD Flags1 = WS_EX_COMPOSITED | WS_EX_LAYERED | WS_EX_NOACTIVATE | WS_EX_TOPMOST | WS_EX_TRANSPARENT;
   DWORD Flags2 = WS_POPUP;

   hWnd = CreateWindowEx(Flags1, szWindowClass, szTitle, Flags2, 0, 0, 1920, 1200, 0, 0, hInstance, 0);

   if(!hWnd)return FALSE;

   HRGN GGG = CreateRectRgn(0, 0, 1920, 1200);
   InvertRgn(GetDC(hWnd), GGG);
   SetWindowRgn(hWnd, GGG, false);

   COLORREF RRR = RGB(255, 0, 255);
   SetLayeredWindowAttributes(hWnd, RRR, (BYTE)0, LWA_COLORKEY);

   ShowWindow(hWnd, nCmdShow);
   UpdateWindow(hWnd);

   DeleteObject(GGG);

   return TRUE;
}

LRESULT CALLBACK WndProc(HWND hWnd, UINT message, WPARAM wParam, LPARAM lParam)
{
    int wmId, wmEvent;
    PAINTSTRUCT ps;
    HDC hdc;
    RECT rect;

    switch (message)
    {
    case WM_ERASEBKGND:

        GetClientRect(hWnd, &rect);
        FillRect((HDC)wParam, &rect, CreateSolidBrush(RGB(255, 0, 255)));

        break; 
```

# installation - Inno Setup 默认安装文件夹更改

> ID：15605659
> 
> 赞同：19
> 
> 时间：2013-03-25T00:00:20.733
> 
> 标签：installation, 64-bit, inno-setup, istool

每次我编译我的安装程序时，默认安装目录是 C:\Program Files\Company\Product，我似乎无法更改它。这是我在设置下得到的：

```
[Setup]
AppName=MyProduct
AppVerName=MyProduct
AppPublisher=Company
DefaultDirName=C:\MyStuff\Company\MyProduct
DefaultGroupName=Company\MyProduct
UninstallDisplayIcon={app}\MyProduct.exe
UninstallDisplayName=MyProduct Uninstall
PrivilegesRequired=poweruser
OutputDir=userdocs:Inno Setup Examples Output
OutputBaseFilename=Setup
DisableDirPage=false
DisableProgramGroupPage=true
VersionInfoCompany=Company Inc
VersionInfoProductName=MyProduct
AllowUNCPath=false 
```

根据文档， DefaultDirName 应指定默认安装文件夹。但事实并非如此。

特别是我的情况是，我想将 x64 机器上的默认安装文件夹设置为 C:\Program Files，但无论我在 DefaultDirName 中放入什么，安装程序总是选择 Program Files (x86)。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-03-25T00:12:57.707

[`DefaultDirName`](http://jrsoftware.org/ishelp/topic_setup_defaultdirname.htm)如果[`UsePreviousAppDir`](http://jrsoftware.org/ishelp/topic_setup_usepreviousappdir.htm)指令设置为`yes`（默认情况下），则最后选择的安装文件夹优先于指令值。如果要强制[`DefaultDirName`](http://jrsoftware.org/ishelp/topic_setup_defaultdirname.htm)选择 指定的目录，请关闭该[`UsePreviousAppDir`](http://jrsoftware.org/ishelp/topic_setup_usepreviousappdir.htm)指令。

如果您想保留最后一个目录的功能，并且只是为了测试而克服这个问题，只需在运行新构建的设置之前卸载以前的安装。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2018-06-11T05:12:33.730

只需在您的 iss 文件中添加“UsePreviousAppDir=no”：

> [设置]
> 
> ...
> 
> UsePreviousAppDir=no

# java - 将图像从 java 服务器发送到 android

> ID：15605661
> 
> 赞同：1
> 
> 时间：2013-03-25T00:00:33.510
> 
> 标签：java, android, tcp, javax.imageio

我正在尝试将图像从 java 服务器发送到 android 设备。

我可以使用 ImageIO 将图像从 java 服务器发送到 java 客户端，但由于 android 不支持 ImageIO，我不知道如何从 java 服务器接收图像。

我试图将图像转换为字节数组，然后在 android 上对其进行解码，但它可能无法正常工作，并且字节数组在大小和长度方面存在很多问题。

如果有人能指出发送图像的正确方法并在 android 设备上阅读它，我将非常感激。

编辑 ...

发现它实际上比我预期的要简单

客户端将图像加载到缓冲图像中，使用 ImageIO 将图像写入服务器流

服务器端使用 bitmapFactory 将流解码为位图

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T02:14:37.840

我的建议是使用 PHP 创建一个 API，然后使用 API，您可以以字节形式下载图像，并在获取字节数组后，您可以使用此将字节转换为位图

```
Bitmap bitmap = BitmapFactory.decodeByteArray(bitmapdata , 0, bitmapdata .length); 
```

# java - 在 compareTo 方法中整理 if/else 语句

> ID：15605663
> 
> 赞同：1
> 
> 时间：2013-03-25T00:00:35.383
> 
> 标签：java, if-statement

这是 Employee 类的一个方法。它比较employee 的两个对象，包含四个变量：id（一个int）、name、phone 和job title（所有字符串）。

```
public int compareTo(Employee other) {
    if (this.id == other.id) {
        if (this.name.compareTo(other.name) == 0) {
            if (this.phoneNumber.compareTo(other.phoneNumber) == 0) {
                if (this.jobTitle.compareTo(other.jobTitle) == 0)
                    return 0;
                else if (this.jobTitle.compareTo(other.jobTitle) > 0)
                    return 1;
                else 
                    return -1;
            }
            else if (this.phoneNumber.compareTo(other.phoneNumber) > 0)
                return 1;
            else
                return -1;
        }
        else if (this.name.compareTo(other.name) > 0)
            return 1;
        else
            return -1;
    }
    else if (this.id > other.id)
        return 1;
    else
        return -1;
} 
```

代码工作正常，但我知道它变得相当箭头形，而且有点复杂。有人对清理这个 if/else 语句集合有什么建议吗？

**编辑：我知道在 ID 之后继续比较可能看起来违反直觉，这在逻辑上是唯一的，但顺其自然！**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T00:12:26.620

似乎您的所有检查都必须为 == 0，才能返回 0。如果其中一个大于 0，则返回 1，否则返回 -1；

所以：

```
 if (this.id == other.id &&
     this.name.compareTo(other.name) == 0 &&
     this.jobTitle.compareTo(other.jobTitle) == 0 &&
     this.phoneNumber.compareTo(other.phoneNumber) == 0 ) {
     return 0;
 } else if (this.id > other.id ||
     (this.name.compareTo(other.name) > 0 ||
     this.jobTitle.compareTo(other.jobTitle) > 0 ||
     this.phoneNumber.compareTo(other.phoneNumber) > 0) {
     return 1;
 } else {
     return -1;
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T00:05:42.097

有关如何实现项目的多级顺序的示例，请参阅[集合排序多项目。](https://stackoverflow.com/questions/15599048/collection-sort-multi-items/15599114)

我认为如果您只返回 compareTo 调用的结果，而不是使用 if-else 并返回 0/1，那么代码可以变得更短。

# javascript - JQuery $(window).load 无法与 Jinja 模板一起正常工作

> ID：15605664
> 
> 赞同：1
> 
> 时间：2013-03-25T00:00:37.180
> 
> 标签：javascript, jquery, jinja2

我正在尝试使用 JQuery 来检测何时加载我的页面内容，然后根据有多少内容调整页面上的 div（导航栏和内容）的大小。（例如，如果有少量文本，那么 div 的高度为 800px，但当导航和内容 div 的高度不同时，则将两者设置为两者中最大的高度。

```
 function resizePage(){
            var defaultSize = 600;
            var sidebarH = $("nav").height();
            var articleH = $("article").height();

            if((sidebarH < defaultSize) || (articleH < defaultSize)){
                $("nav").css({'height': defaultSize});
                $("article").css({'height': defaultSize});
            }
            else{
                if(sidebarH <= articleH){
                    $("nav").css({'height': articleH});
                }
                else{
                    $("article").css({'height': sidebarH});
                }
            }
        }

        $(window).load(function() {
            resizePage();
        }); 
```

当我修改 html 代码时……现在使用 Jinja 模板……似乎模板数据是在加载窗口后加载的，因此它没有正确调整大小。有没有办法 JQuery 可以判断模板数据何时已全部加载？或者我可以用不同的方式解决这个问题吗？

谢谢你的时间！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T00:30:39.167

尝试[`.ready()`](http://api.jquery.com/ready/)改为：

```
$(document).ready(function() {
    function resizePage() {
        var defaultSize = 600;
        var sidebarH = $("nav").height();
        var articleH = $("article").height();

        if((sidebarH < defaultSize) || (articleH < defaultSize)) {
            $("nav").css({'height': defaultSize});
            $("article").css({'height': defaultSize});
        }
        else{
            if(sidebarH <= articleH){
                $("nav").css({'height': articleH});
            }
            else{
                $("article").css({'height': sidebarH});
            }
        }
    }      

    resizePage(); // You are calling it here
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T22:31:54.267

只是需要改变|| 至 ＆＆。

$(window).load 与 $(document).ready 在这里没有区别。

# java - Python 应用引擎模型/实体表示和操作的 Java 等效项

> ID：15605672
> 
> 赞同：2
> 
> 时间：2013-03-25T00:01:31.043
> 
> 标签：java, google-app-engine, python-2.7, google-cloud-datastore, jdo

考虑以下 Python 中的应用引擎模型。

```
class Account(ndb.Model):
  email = ndb.StringProperty()
  nickname = ndb.StringProperty()
  phone = ndb.IntegerProperty()
  date = ndb.DateTimeProperty(auto_now_add=True)

class Invitation(ndb.Model):
  sender = ndb.StructuredProperty(Account, required=True)
  recipient = ndb.StructuredProperty(Account, required=True)
  message = ndb.StringProperty()
  date = ndb.DateTimeProperty(auto_now_add=True)

  @classmethod
  def get_recipient(cls, sender, date):
    qry = Invitation.query(ndb.AND(Invitation.sender == sender, Invitation.date == date)).fetch(projection=['recipient']))
    return qry 
```

我将如何用 Java 重写上面的代码？请注意，Account 是一个适当的实体/模型——不受 java 的`EmbeddedEntity`. 另外，如果回复是JDO（请提供代码），[谷歌网站有一个警告说](https://developers.google.com/appengine/docs/java/datastore/jdo/overview-dn2#Unsupported_Features_of_JDO_3_0)（我不明白）：

> 多态查询。您不能通过查询类来获取子类的实例。每个类都由数据存储区中的一个单独的实体类型表示。

这个警告是否意味着我们可以用 python 做一些我们不能用 app-engine 上的 java 做的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T15:55:45.440

我想您要将应用引擎后端转换为 java 的原因是因为 Google Eclipse 插件 (GEP) 可以创建应用引擎连接的设备。如果是这样的话，你在 python 中开发所节省的钱超过了使用 GEP 的好处。

您引用的警告与复合对象无关，这是您的 Account 类对 Invitation 类的作用。

同样，除非你有明确的理由去使用 java（GEP 除外），否则你应该坚持使用 Python。需要处理的多余混乱要少得多。

# java - Java IO：CharsetDecoder.decode() 在 Linux 上无法正常工作

> ID：15605674
> 
> 赞同：1
> 
> 时间：2013-03-25T00:01:40.153
> 
> 标签：java, java-io

我编写了将传入字符串转换为 UTF-8 编码的小方法：

```
private String convertStringToUTF8( String pIncomingString ) throws CharacterCodingException {

        CharsetDecoder cd = Charset.availableCharsets().get("UTF-8").newDecoder( );
        CharBuffer buffer = cd.decode(ByteBuffer.wrap(pIncomingString.getBytes()));

        return buffer.toString();
    } 
```

这在 Windows 机器上完美运行，例如 - 'ScÃºp' 被替换为 'Scúp'。但是，当部署到 Linux 时，它不起作用（'ScÃºp' 仍然是 'ScÃºp'）。有谁知道如何在 Linux 上解决这个烦人的问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T01:30:14.453

我通过添加 JVM 参数 -Dfile.encoding=ISO-8859-1 解决了这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T01:46:58.560

在 Java 中，将字符串用作字节序列是不安全的。String.getBytes() 不保证每个字符返回一个字节。实际上，在默认编码通常为 UTF-8 的 Linux 中，String.getBytes() 会将 \u007f 以上的任何字符转换为多个字节。

总之，当你想存储一个字节序列时，使用`byte[]`，而不是 String。

# java - 设置属性位置？

> ID：15605677
> 
> 赞同：-1
> 
> 时间：2013-03-25T00:02:04.297
> 
> 标签：java, properties

我想设置`Properties`文件的位置，但我似乎找不到这样做的方法。这可能吗？我读了几篇关于如何找出它在哪里的文章，但没有关于如何设置它的文章。

**编辑** 猜猜这需要更多细节。

我有一个为我的项目创建的属性文件。我只存储一两个值，但想更改此属性文件的位置。

我有一个程序可以读取大量数据并将其写入文件结构。像这样：

```
MainDirectory/DirectorywhereIwantPropertiesFile/.properties 
             /OtherNonPropertyData 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T00:30:30.470

我不确定我是否明白你想要什么。属性可以通过这种方式加载文件：

```
Properties p = new Properties();
File f = new File("Test.properties");
FileReader reader = new FileReader(f);
p.load(reader); 
```

如果您需要这样的 ResourceBundle：

```
 ResourceBundle prop = ResourceBundle.getBundle("Test");
    JOptionPane.showMessageDialog(this, prop.getString("test")); 
```

您只需将带有 Test.properties 文件的目录添加到您的类路径中。

# c# - C# Windows 窗体继承

> ID：15605679
> 
> 赞同：0
> 
> 时间：2013-03-25T00:02:19.487
> 
> 标签：c#, inheritance

我正在创建一个 Windows 窗体应用程序，我希望有一个基类，它具有操作表单输入的基本功能，然后从该类继承以创建 3 个略有不同的派生类。

是否有可能让基类不是实际形式，而只是有一个从未实例化的抽象类，但有几个我希望所有派生类也有的函数？

我怎样才能在 C# 中做到这一点？

谢谢

# mysql - 如何在没有表的情况下查询mysql？

> ID：15605681
> 
> 赞同：0
> 
> 时间：2013-03-25T00:02:36.203
> 
> 标签：mysql, boolean

我想知道我是否可以用 mysql 做一个简单的布尔检查。我的意思是我可以做类似的事情

```
SELECT WHERE DATE(`2013-03-25 01:22:26`) = CURDATE() 
```

只返回真或假？

或这种情况下的 php 等效项也可以，但我想学习这一点。为这样的目标使用 mysql 是不必要的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T00:04:13.827

只需删除该`WHERE`子句并在日期周围使用单引号即可。

```
SELECT DATE('2013-03-25 01:22:26') = CURDATE() 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/d41d8/9509)

# c++ - 为什么这段c++找不到结构成员'filename'？

> ID：15605682
> 
> 赞同：0
> 
> 时间：2013-03-25T00:02:45.937
> 
> 标签：c++, vector, struct, constants

```
 for (torrent_info::file_iterator i = t.begin_files();
                    i != t.end_files(); ++i, ++index)
            {
                    int first = t.map_file(index, 0, 1).piece;
                    int last = t.map_file(index, i->size - 1, 1).piece;
                    std::cout << "  " << std::setw(11) << i->size
                            << " " << i.filename() << "[ " << first << ", "
                            << last << " ]\n";
            } 
```

编译给我以下错误：

```
error: ‘class __gnu_cxx::__normal_iterator<const libtorrent::internal_file_entry*, std::vector<libtorrent::internal_file_entry, std::allocator<libtorrent::internal_file_entry> > >’ has no member named ‘filename’ 
```

AFAICS`i`是一个常量结构[，](http://sourceforge.net/p/libtorrent/code/8213/tree/tags/libtorrent-0_16_9/src/file_storage.cpp#l156)`internal_file_entry`其头代码位于开源 libtorrent 项目中。我只是第一次看 C++，但我一生都无法弄清楚为什么上述调用在编译时失败？`i.filename()`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-25T00:03:51.143

`i`是一个指向 an 的迭代器`internal_file_entry`- 它必须被取消引用。`filename`像这样访问：

```
i->filename 
```

这相当于：

```
(*i).filename 
```

# php - 使用 javascript 和 PHP 发送电子邮件的简单方法

> ID：15605687
> 
> 赞同：-3
> 
> 时间：2013-03-25T00:03:29.190
> 
> 标签：php, javascript, email, input, sendmail

我需要能够从用户那里获取电子邮件地址，然后使用 php 向他们发送带有链接的电子邮件。我知道有一些使用 jquery 或 AJAX 的实现，但我对这两个主题都没有经验。我希望有一些简单的东西。谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-25T00:59:31.763

“我需要能够从用户那里获取电子邮件地址”

创建一个表格：

```
<form action="emailHandler.php" method="POST" id="emailForm">
    <label for="emailInput">Email: </label>
    <input type="text" name="emailInput" id="emailInput" value="" />
    <input type="submit" id="submitEmail" value="Submit Email" />
</form> 
```

“然后使用 php 向他们发送带有链接的电子邮件”

表单中的提交按钮会将输入字段的值发布到 PHP 脚本 emailHandler.php

“我知道有一些使用 jquery 或 AJAX 的实现，但我对这两个主题都没有经验”

你不需要 jQuery 或 AJAX，jQuery 和 AJAX 是 javascript 主题（在这种情况下，AJAX 是关于让你从 HTML 中获取值，然后将它们发布到 PHP 后端，并接收一个 JSON 对象来告诉javascript是否成功，这里显然不需要，但可以使用），您可以简单地使用内置的PHP邮件功能： http: [//php.net/manual/en/function.mail.php](http://php.net/manual/en/function.mail.php)

在 emailHandler.php 中。

我喜欢这样做：

```
function spamcheck($field)
{
    //filter_var() sanitizes the e-mail
    //address using FILTER_SANITIZE_EMAIL
    $field=filter_var($field, FILTER_SANITIZE_EMAIL);

    //filter_var() validates the e-mail
    //address using FILTER_VALIDATE_EMAIL
    if(filter_var($field, FILTER_VALIDATE_EMAIL))
    {
        return true;
    }
    else
    {
        return false;
    }
}

function sendMail($toEmail, $fromEmail, $subject, $message)
{
    $validFromEmail = spamcheck($fromEmail);
    if($validFromEmail)
    {
        mail($toEmail, $subject, $message, "From: $fromEmail");
    }
} 
```

在 emailHandler.php 中做这样的事情：

```
$email = isset($_POST['emailInput']) ? $_POST['emailInput'] : false;

if($email != false)
{
    $yourEmail = "example@example.com";.
    $subject = "Link";
    $message = "The link and some message";
    $success = sendMail($email, $yourEmail, $subject, $message);
} 
```

在某些情况下你必须修改 PHP ini 文件，你可以这样做：

```
ini_set('SMTP' , 'smtp.example.com');
ini_set('smtp_port' , '25');
ini_set('username' , 'example@example.com');
ini_set('password' , 'password');
ini_set('sendmail_from' , 'example@example.com'); 
```

“......我希望得到一些简单的东西。谢谢”

如果这不简单，那我不知道是什么。如果您不想让它变得复杂，请使用 jQuery 和 Ajax，然后在线阅读它们（或查看我的个人资料，我已经给出了许多可以使用它的完整工作代码）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T00:09:07.920

如果您尝试在表单中发送电子邮件，您可以对表单操作执行此操作，其余操作类似。希望能帮助到你（：

```
<form action="MAILTO:name@email.com" method="post" enctype="text/plain"> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T00:19:52.560

PHP有一个[邮件功能](http://php.net/manual/en/function.mail.php)。不过，您需要为此[配置 php.ini](http://email.about.com/od/emailprogrammingtips/qt/Configure_PHP_to_Use_a_Remote_SMTP_Server_for_Sending_Mail.htm)。

# wcf - 除非客户端和服务器使用相同的 Windows 身份，否则带有 sspi 的 WCF Net.tcp 会失败

> ID：15605688
> 
> 赞同：14
> 
> 时间：2013-03-25T00:03:49.513
> 
> 标签：wcf, security, net.tcp, sspi

我有一个由 Windows 服务托管的**WCF**服务。如果我使用与运行服务相同的凭据登录客户端计算机，则客户端应用程序成功，但如果我使用任何其他有效域帐户登录，它会失败并出现异常。

我有两个正在测试的帐户，一个是普通用户帐户，另一个帐户是管理员帐户。我已经尝试了下面列出的所有四种组合：

```
 Server account
   CLient      RegUser    AdminAcct   
  RegUser     Succeeds      Fails   
 AdminAcct     Fails       Succeeds 
```

如您所见，这不是管理员问题，因为当客户端和服务器都在非管理员帐户下运行时，系统可以正常工作。在这两种失败的情况下，我都会在客户端上遇到相同的异常，但没有任何迹象表明服务器日志中发生了任何事情：

> “对 SSPI 的调用失败。请参阅内部异常”

内部异常是**“目标原则名称不正确”。**

我已将这些帐户注册为 SPN。

该问题仅在我的客户端应用程序中出现，但在我使用`WCVFTestClient.exe`Visual Studio 附带的应用程序时不会出现。

WCF 跟踪日志中的异常是

> “System.ServiceModel.Security.SecurityNegotiationException，System.ServiceModel，版本=4.0.0.0，文化=中性，PublicKeyToken=b77a5c561934e089”

留言：

**“远程身份验证失败（流可能仍可用于其他身份验证尝试）。”**

堆栈跟踪位于底部：出了什么问题？

堆栈跟踪

* * *

> System.ServiceModel.Channels.WindowsStreamSecurityUpgradeProvider.WindowsStreamSecurityUpgradeAcceptor.OnAcceptUpgrade(Stream stream, SecurityMessageProperty&remoteSecurity) System.ServiceModel.Channels.StreamSecurityUpgradeAcceptorBase.AcceptUpgrade(Stream stream) System.ServiceModel.Channels.InitialServerConnectionReader.UpgradeConnection(IConnection connection, StreamUpgradeAcceptor upgradeAcceptor, IDefaultCommunicationTimeouts defaultTimeouts) System.ServiceModel.Channels.ServerSessionPreambleConnectionReader.ServerFramingDuplexSessionChannel.OnOpen(TimeSpan timeout) System.ServiceModel.Channels.CommunicationObject.Open(TimeSpan timeout) System.ServiceModel.Dispatcher.ChannelHandler.OpenAndEnsurePump() System.Runtime.ActionItem.DefaultActionItem.TraceAndInvoke() System.Runtime.ActionItem.CallbackHelper。InvokeWithoutContext(对象状态) System.Runtime.IOThreadScheduler.ScheduledOverlapped.IOCallback(UInt32 errorCode, UInt32 numBytes, NativeOverlapped* nativeOverlapped) System.Runtime.Fx.IOCompletionThunk.UnhandledExceptionFrame(UInt32 error, UInt32 bytesRead, NativeOverlapped* nativeOverlapped) System.Threading._IOCompletionCallback .PerformIOCompletionCallback(UInt32 errorCode, UInt32 numBytes, NativeOverlapped* pOVERLAP)本机重叠* pOVERLAP)本机重叠* pOVERLAP)

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-31T14:51:47.197

找到了答案。我的问题是两个因素的结合。

1.  使用 net.tcp 二进制 WCF 协议时，客户端安全模式确定 NTLM 还是 Kerberos 用于身份验证。如果您将客户端安全模式设置为“传输”，则身份验证使用 NTLM，并且只有一跳是可能的。如果您尝试让 WCF 服务器与第三台服务器（如数据库）通信，它将失败。使用 SecurityMode = "Message", otoh 会导致 WCF 服务器使用 Kerberos，它允许多个跃点...

2.  第二个问题与我在绑定中对客户端所做的操作有关。WCF 协议 net.tcp 要求在客户端上实例化终结点时，必须指定“终结点标识”（参见下面的代码）。我错误地认为这与身份验证有关，因此是客户端上当前登录用户（Windows 主体）的身份。

    ```
     var epId = EndpointIdentity.CreateUpnIdentity(userPrincipalName);
        var ep = new EndpointAddress(new Uri(url), epId): 
    ```

    否... 在客户端上创建端点时必须指定的身份必须是服务器正在运行的身份。这就是为什么每当我使用与运行该服务的用户相同的用户登录到客户端时，代码就可以工作，而当客户端是不同的用户时，代码就会失败。

    我仍然不明白为什么必须在客户端的端点中指定此用户身份（服务帐户）。服务器上的什么功能需要这些数据？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-05-19T06:08:32.743

关于第二点，客户端不需要运行在与服务器相同的Windows账户下才能认证成功，也不需要在请求中手动指定账户名。据我了解，WCF 身份验证是相互的，这意味着客户端也在验证服务器。

您收到的错误可能是由于客户端故障。如果您将客户端的服务端点配置为提供 ServicePrincipalName，则问题可能会得到解决。我发现[这篇文章](https://blogs.msdn.microsoft.com/tiche/2011/07/12/wcf-on-intranet-with-windows-authentication-kerberos-or-ntlm-part-1/)非常有助于解决我遇到的相同问题。

# c++ - 我可以同时使用属性文件和运行时配置来配置 log4cxx 吗？

> ID：15605690
> 
> 赞同：3
> 
> 时间：2013-03-25T00:03:54.167
> 
> 标签：c++, logging, log4j, log4cxx

我想将配置文件读入 log4cxx，但在运行时，我想修改 appenders/loggers。我可以这样做吗？

示例 log4cxx 文件：

```
log4j.rootLogger=all, console, file

log4j.appender.console=org.apache.log4j.ConsoleAppender
log4j.appender.console.layout=org.apache.log4j.SimpleLayout
log4j.appender.console.threshold=info

log4j.appender.file=org.apache.log4j.DailyRollingFileAppender
log4j.appender.file.layout=org.apache.log4j.PatternLayout
log4j.appender.file.layout.ConversionPattern=%d{yyyy-MM-dd HH:mm:ss,SSS} %c [%p] %l %m%n
log4j.appender.file.filename=logfile.txt
log4j.appender.file.datePattern='.'yyyy-MM-dd 
```

示例来源：

```
PropertyConfigurator::configure("./LoggingConfig.txt");

auto rootlogger = Logger::getRootLogger();
DailyRollingFileAppenderPtr fileappender = rootlogger->getAppender(LOG4CXX_STR("file"));

fileappender->setFile(LOG4CXX_STR("thisisthenewfile.txt")); 
```

--我注意到输出仍然写入我的配置文件中的原始位置。

不可能使用代码（运行时）和文件进行配置吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-26T07:33:39.063

是的，尽管您有 log4crc 文件，但可以通过您的代码修改 appender 或 logger。我通过以下方式在 log4c 中完成了此操作。
`log4c_appender_t *myappender = log4c_appender_get("man.appender");` 要更改前缀或日志目录，您需要通过以下方式创建滚动文件 udata 的对象：
`rollingfile_udata_t *rfu = rollingfile_make_udata();`
然后设置路径
`rollingfile_udata_set_logdir(rfu,"my/sample/path");`
或设置前缀，
`rollingfile_udata_set_files_prefix(rfu,"myPrefix");`
然后使用附加程序设置滚动文件，
`log4c_appender_set_udata(myappender,rfu);`
您可能还需要使用类别设置附加程序
`log4c_category_set_appender(mycat,myappender);`

# java - 在 NAT 后的两台机器之间创建套接字

> ID：15605693
> 
> 赞同：0
> 
> 时间：2013-03-25T00:04:07.933
> 
> 标签：java, sockets, networking, nat

我有一个 P2P Java 应用程序，它既充当服务器又充当客户端。它会得到一个公共 IP 地址列表，并且应用程序会尝试创建套接字通信。该列表仅包含（并且只能包含）公共 IP 地址。

我的应用程序在两台机器上运行，它们都在同一个 NAT 后面。我已经转发了两个端口（每台机器一个），以便它们是公开可用的，并且正确接收到任何一台机器的任何传入消息（即端口转发工作正常）。

但是，当两台本地机器尝试使用公共 IP 相互通信时，就会出现问题。例如，机器 A 的私有 IP 为 192.168.1.1，机器 B 的私有 IP 为 192.168.1.2，它们分别接受端口 2001 和 2002。两个端口都已在路由器上转发。它们都具有相同的公共 IP 8.8.8.8。A 尝试使用公共 IP 连接到 B 会导致数据包捕获，如下所示：

192.168.1.1:4000 -> 8.8.8.8:2002
192.168.1.2:2002 -> 192.168.1.1:4000

这个结果是 B 的监听套接字从不接受。但是，如果我改用 B 的本地 IP，一切都很好：

192.168.1.1:4000 -> 192.168.1.2:2002
192.168.1.2:2002 -> 192.168.1.1:4000

有没有办法使用它们的公共 IP 地址在同一 NAT 后面的两台机器之间形成套接字连接？

# regex - Linux：如何列出所有文件/目录，仅使用 ls

> ID：15605697
> 
> 赞同：3
> 
> 时间：2013-03-25T00:04:40.573
> 
> 标签：regex, linux, bash, grep, ls

这是大学时提出的问题。

问题是：列出文件`testfiles`夹内所有没有扩展名的文件/目录。
给出的正确答案是这样的：

```
ls testfiles | grep -v "\." 
```

现在，只是为了了解`ls`正则表达式的工作原理，有人可以向我**解释一下**`ls`仅使用 regex 是如何工作的吗？此外，我将不胜感激任何也使用美元符号的示例`$`，以明确说明名称以`.[a-z]`.

任何帮助，非常感谢。

还有一件事！这个问题的另一个答案是使用：

```
ls testfiles | grep "^[^.]*$" 
```

这是怎么读的？我是这样读`^[^.]*$`的：

```
^      -> does not contain
[^.]   -> starts with a dot
*      -> repeated zero or more times
$      -> till the end 
```

我希望有人对此进行纠正...谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T00:14:02.217

Unix 实用程序旨在用作过滤器，因此给出的答案是有道理的，因为它最接近现实世界的应用程序。

不过，您确实明白，它`grep "\."`与“句号”（因此，扩展名）匹配所有内容，并`grep -v "\."`匹配其他所有内容（即补码）。

很难使命令比它已经是更精确，因为谁能说什么是扩展，什么不是？

* * *

第2部分：`ls testfiles | grep "^[^.]*$"`

> 方括号表达式是由 [ 和 ] 括起来的字符列表。它匹配该列表中的任何单个字符；如果列表的第一个字符是插入符号 ^，则它匹配不在列表中的任何字符。例如，正则表达式 [0123456789] 匹配任何单个数字。

[http://unixhelp.ed.ac.uk/CGI/man-cgi?grep](http://unixhelp.ed.ac.uk/CGI/man-cgi?grep)

所以`^[^.]*$`实际上意味着：

任何以字符串开头和结尾的字符串，每个字符串都不是句点。

第一个插入符号不是否定，它意味着开始。第二个插入符号是“非”能指。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-25T00:16:26.217

更正：

```
^      -> pattern starts at the beginning of the string
[^.]   -> matches something that is not a dot
*      -> repeated zero or more times
$      -> and must continue to match (only non-dot items) until the end 
```

因此，它必须从头到尾只有非点的东西。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-25T00:26:20.010

> 现在，只是为了了解 ls 正则表达式是如何工作的，有人可以向我解释一下这将如何通过仅使用 ls 来完成？

您可以使用忽略标志来做到这一点：

```
ls -I '*.*' 
```

注意 - 适用于 CentOS 6，不确定其他 Linux 发行版。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-25T00:37:22.447

[由于您使用bash](/questions/tagged/bash "显示标记为“bash”的问题")标记了问题，因此您不需要 grep：

```
shopt -s extglob
(cd testfiles && ls -d !(*.*)) 
```

见[http://www.gnu.org/software/bash/manual/bashref.html#Pattern-Matching](http://www.gnu.org/software/bash/manual/bashref.html#Pattern-Matching)

# ruby-on-rails - Rails ActiveAdmin - 覆盖模型名称时更新错误

> ID：15605699
> 
> 赞同：1
> 
> 时间：2013-03-25T00:04:46.930
> 
> 标签：ruby-on-rails, ruby, activeadmin

我的 ActiveAdmin 视图中有以下代码：

```
ActiveAdmin.register IdeaAction, :as => "Action" do
  form do |f|
    f.inputs do
      f.input :description
    end
    f.actions
  end
end 
```

当我提交我的编辑表单时，我得到以下信息：

```
NoMethodError in Admin::ActionsController#update
undefined method `stringify_keys' for "update":String 
```

一旦我删除`:as => "Action"`覆盖，一切正常。对于名称覆盖，我还有什么需要告诉 ActiveAdmin 的吗？有解决方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T04:12:51.760

看来这里的问题是 ActiveAdmin 保留的关键字“Action”。我发现的最佳解决方案是将覆盖放在表单 ( `:as => :idea_action`) 上：

```
ActiveAdmin.register IdeaAction, :as => "Action" do
  form do :as => :idea_action |f|
    f.inputs do
      f.input :description
    end
    f.actions
  end
end 
```

# apache - .htaccess rewriterule 和重定向 301 - 301 不起作用

> ID：15605703
> 
> 赞同：0
> 
> 时间：2013-03-25T00:05:23.720
> 
> 标签：apache, mod-rewrite, redirect, url-redirection, mod-alias

我似乎无法让我的 301 重定向工作，mod_alias 与 mod_rewrite 一起启用。

我的重写工作正常，但 301 不起作用。基本上我想要做的是从动态 php 页面设置“干净”的 URL，它工作正常......

每个动态页面的另一部分，我希望它们重定向到正确的“干净”网址。

这是我的 .htaccess

```
#
# Options below ensure that all traffic is directed to www.mydomain
#
Options +FollowSymlinks
RewriteEngine on

RewriteCond %{HTTP_HOST} ^mydomain.com
RewriteRule (.*) http://www.mydomain.com/$1 [R=301,L]
RewriteRule ^index.php$ http://www.mydomain.com/ [R=301,L]

#
# URL Rewrites
#
RewriteRule videos page.php?id=1 [L]

#
# Custom redirects from OLD URLs
#
redirect 301 /page.php?id=1 /videos 
```

**试图达到...**

```
mydomain.com/videos

(this works - redirect does not) 
```

如果有人访问动态页面 (page.php?id=1)，他们会自动重定向到干净的 URL。

```
mydomain.com/page.php?id=1 -> mydomain.com/videos 
```

我尝试在 RewriteRule 中使用 R=301，但发生了致命错误。所以这就是我创建重定向 301 的原因，但它只是不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T19:06:55.297

好的，所以如果访问者请求 /videos，那么您希望将请求静默地重写为实际路径 /page.php?id=1，以便您可以宣传“干净”的 URL /videos 并隐藏查询字符串 ugliness。

但是您还想强制将实际请求 /page.php?id=1 的访问者永久重定向到“干净” URL /videos，以便他们收到查询字符串 ugliness 不再适合他们的消息。

问题是即使重写的请求也必须重新运行您的 Apache 指令，这意味着 clean 将重写为实际，然后将重定向到 clean，它将重写为实际，等等无限。这就是为什么您会遇到致命错误的原因。

打破此循环的唯一方法是更改​​实际路径或插入一个虚拟变量，该变量允许 RewriteEngine 在重写完成一次后停止。

例如，您可以使用以下内容：

```
RewriteCond %{QUERY_STRING} !&redirect=done$
RewriteCond %{QUERY_STRING} ^id=1
RewriteRule /page.php /videos [R=permanent]
RewriteRule /videos /page.php?id=1&redirect=done 
```

这将始终默默地将 /videos 重写为 /page.php?id=1&redirect=done，但它只会将 /page.php 重定向到 /videos，如果对 page.php 的请求没有以`redirect=done`( 以及确实有一个以 ) 开头的查询字符串`id=1`。

这很复杂，但这是我能想到的打破无限循环的唯一方法。

# objective-c - 如何在 Mac OS X 应用程序中滑动时触发警报/弹出窗口

> ID：15605704
> 
> 赞同：-1
> 
> 时间：2013-03-25T00:05:35.783
> 
> 标签：objective-c, macos, gesture

如何在 Mac OS X 应用程序中触发轻扫或捏合时发生的警报。警报将说明滑动的方向，如果是捏，那么是捏入还是捏出

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T01:01:36.360

[Apple 关于处理触控板事件](http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/EventOverview/HandlingTouchEvents/HandlingTouchEvents.html#//apple_ref/doc/uid/10000060i-CH13-SW10)的文档非常有用。您需要查看`swipeWithEvent:(NSEvent *)event`方法和`magnifyWithEvent:(NSEvent *)event`方法。它们清楚地说明了您可以使用这些方法做什么以及如何实现它们。我做的很快，所以这段代码没有经过测试。但是你需要做这样的事情。我建议您阅读整篇文章，然后创建自己的代码。

```
- (void)swipeWithEvent:(NSEvent *)event {
    CGFloat x = [event deltaX];
    CGFloat y = [event deltaY];

    NSString *msg = @"";

    if (x != 0) {
        msg = (x > 0) ? @"Left Swipe" : @"Right Swipe";
    }
    if (y != 0) {
        msg = (y > 0)  ? @"Up Swipe" : @"Down Swipe";
    }

    [self displayWithMessage:msg];
}

- (void)magnifyWithEvent:(NSEvent *)event {
    NSString *msg = @"";
    if([event magnification] > 0) {
        msg = @"Pinch In";
    }
    else if ([event magnification] < 0) {
        msg = @"Pinch Out";
    }

    [self displayWithMessage:msg];

}
-(void) displayWithMessage:(NSString *)message {
    NSAlert *alert = [[NSAlert alloc] init];
    [alert setAlertStyle:NSInformationalAlertStyle];
    [alert setMessageText:@"Gesture Notification"];
    [alert setInformativeText:message];
    [alert runModal];
} 
```

# javascript - d3 轴和路径正在裁剪

> ID：15605711
> 
> 赞同：0
> 
> 时间：2013-03-25T00:06:39.193
> 
> 标签：javascript, graph, d3.js

我遇到了一个问题，我正在尝试创建一个带有轴的简单折线图，但该线不断剪裁到 y 轴。

我正在使用它来设置轴和线条的绘图区域。

```
var HEIGHT = 400,
WIDTH = 800,
MARGINS = {top: 20, right: 20, bottom: 30, left: 50},
DRAWING_HEIGHT = HEIGHT - MARGINS.top - MARGINS.bottom,
DRAWING_WIDTH = WIDTH - MARGINS.right - MARGINS.left,
xRange = d3.scale.linear().range([0, DRAWING_WIDTH]).domain([1947, 2011]),
yRange = d3.scale.linear().range([DRAWING_HEIGHT, 0]).domain([0, HEIGHT]);

xAxis = d3.svg.axis() 
    .scale(xRange) 
    .tickSize(12) 
    .tickFormat(d3.format("d"))
    .orient("bottom")
    .tickSubdivide(true);

yAxis = d3.svg.axis()
    .scale(yRange) 
    .tickSize(10) 
    .orient("left")
    .tickSubdivide(true); 

    visPanel.append("svg:g") 
    .attr("class", "x axis") 
    .attr("transform", "translate(" + MARGINS.left + "," + (DRAWING_HEIGHT + MARGINS.top) + ")")
    .call(xAxis); 

visPanel.append("svg:g")
    .attr("class", "y axis")
    .attr("transform", "translate(" + (MARGINS.left) + ","+ MARGINS.top+ ")")
    .call(yAxis);    

graphableArea = visPanel.append("svg:g")
    .attr("transform", "translate(" + MARGINS.left + "," + (MARGINS.top) + ")"); 
```

我的线路功能是：

```
 var line = d3.svg.line().interpolate("basis")
    .x(function(d) { return xRange(d.year) + MARGINS.right + 0.5; })
    .y(function(d) { return yRange(d.amount) + 0.5; })
    .interpolate("linear"); 
```

如果我从 ".x(function..." 行中删除 MARGINS.right ，那么该行将在 y 轴上结束。

有人可以解释一下d3是如何绘制轴的吗？也就是说，在我将它翻译成一个点之后，它是向右还是向左绘制轴？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T21:58:29.663

结果我的数据集与我预期的有点不同。重置 x 比例的域，它现在可以工作了。

# java - 创建桌面快捷方式

> ID：15605715
> 
> 赞同：4
> 
> 时间：2013-03-25T00:07:22.103
> 
> 标签：java, desktop-application

我正在开发一个 java 应用程序。

我想为我的应用程序的 Exe 文件创建桌面快捷方式。

是否可以从我的应用程序本身中做到这一点？还是用户必须通过右键单击手动完成？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-25T00:20:35.437

```
package farzi;

import net.jimmc.jshortcut.JShellLink;

public class Sc {
    JShellLink link;
    String filePath;

    public Sc() {
        try {
            link = new JShellLink();
            filePath = JShellLink.getDirectory("")
                + "C:\\Program Files\\Internet Explorer\\iexplore.exe";

        } catch (Exception e) {

        }

    }

    public void createDesktopShortcut() {

        try {
            link.setFolder(JShellLink.getDirectory("desktop"));
            link.setName("ie");
            link.setPath(filePath);
            link.save();
        } catch (Exception ex) {
            ex.printStackTrace();
        }

    }

    public static void main(String a[]) {
        Sc sc = new Sc();
        sc.createDesktopShortcut();
    }
} 
```

[你可以从这里](https://github.com/jimmc/jshortcut/downloads)得到罐子

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T00:34:52.027

Java Web Start 做到了这一点。您使用常规 main 方法编写常规应用程序，并使用扩展名为 .jnlp 的简短 XML 文件指向它。当用户单击 XML 文件的链接时，Java Web Start 将创建快捷方式，如果您的 XML 文件包含以下内容：

```
<information>
    <!-- Other elements go here -->
    <shortcut>
        <desktop/>
    </shortcut>
</information> 
```

更多细节在[这里](http://docs.oracle.com/javase/7/docs/technotes/guides/javaws/developersguide/syntax.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-07-03T14:15:43.523

这是一个相当古老的话题，但是我遇到了 Austin 的出色答案，并且在 NetBeans 中使用 jshortcut 时遇到了一些问题，但我担心这也可能会影响 Ecclipse。

1.  使用 properties->Run->VM 选项从 NetBeans 添加 jshortcut.dll 到 java.library.path 不起作用。
2.  *通过像“ System.setProperty("java.library.path", yourDllPath)"*这样的源代码添加这个 dll也不起作用。
3.  而是将 jshortcut.dll 放到存储 jar 的特定文件夹中，`s for this project. JShellLink looks at this folder on its own, so you don`无需将 DLL 的路径添加到任何路径，这在某些已关闭的机器上运行时可能会导致问题。
4.  最重要的是：下载 jshortcut.dll 版本时，对所有实际的 Intel 机器使用 AMD。下载后将dll重命名为shortcut.dll。JShellLink 只查找shortcut.dll，它忽略所有其他名称。

Excert form jShellLink: /** 提供对 Java 快捷方式（shell 链接）的访问。* * 首次加载 JShellLink 时会加载本机库 (jshortcut.dll)。* 默认情况下，JShellLink 首先在 PATH 中查找本机库， * 使用 System.loadLibrary。* 如果在 PATH 中没有找到本机库， * JShellLink 然后查看 CLASSPATH 中的每个目录 *（由系统属性 java.class.path 的值确定）。* 如果 CLASSPATH 中的条目是 jar 文件， * 然后 JShellLink 在包含该 jar 文件的目录中查找本机库 *。* 应用程序可以覆盖此行为并强制 JShellLink 在特定目录中查找本机库，方法是将系统 * 属性 JSHORTCUT_HOME 设置为指向该目录。* 此属性必须在加载 JShellLink 类之前设置。* 这使得从自解压 jar 文件中使用这个库成为可能。*/

# perl - www::scripter submit_form 问题

> ID：15605717
> 
> 赞同：1
> 
> 时间：2013-03-25T00:07:44.873
> 
> 标签：perl

我在使用`submit_form`in时遇到问题`WWW::Scripter`。我意识到它确实`WWW::Mechanize`被调用了，但它的工作方式不同。使用 via 方法时`Scripter`，我得到一个 404 -- Not Found。如果我使用`Mechanize`，我会得到 200。有什么想法吗？

```
#!/usr/bin/perl

use WWW::Scripter;

my $w = new WWW::Scripter;
$w->get('https://www.lendingclub.com/foliofn/tradingInventory.action');

my $r = $w->submit_form( with_fields => { login_email => 'my@email.com', login_password => 'some_pass' });

print scalar($r->message) . "\n"; 
```

# ajax - jQuery 事件被多次触发

> ID：15605722
> 
> 赞同：3
> 
> 时间：2013-03-25T00:08:41.783
> 
> 标签：ajax, events, event-handling, jquery

我有一个表格，其中向用户显示了一些数据。有用于对数据进行 CRUD 处理的按钮，我在前端使用 jQuery。当按下按钮时，会显示一个模式并通过 ajax 请求更新数据。

我的问题是：如果我单击更新按钮，关闭模式，单击另一个更新按钮并更新数据，它会在**每个**单击的行上保存相同的新数据。简而言之，我的代码被执行了多次，与我执行的点击次数一样多。

这是我的代码： http: [//pastebin.com/QWQHM6aW](http://pastebin.com/QWQHM6aW)

```
$(document).ready(function() {
    /*--------------------------------------------*/
    //  GENERAL
    /*--------------------------------------------*/
    function loadingStart() {
        $("#overlay").show(); 
        $("#loading").show();
    }

    function loadingDone() {
        $("#overlay").hide(); 
        $("#loading").hide();
    }

    $(document).ajaxStop(function() {
        loadingDone();
        //alert('Ajax Terminou');
    });

    function reloadRows() {
        $.post("ajax.php", { type: "AllRows" }) // Faz um post do tipo AllRows.
         .done(function(data) {
            alert(data);
            //$("#tbody").html(data);
         });
    }
    $("body").on("click", ".update-socio-btn", updateSocio);
    /*--------------------------------------------*/
    // UPDATE
    /*--------------------------------------------*/
    function updateSocio(event) {
        $("#socio-form input").val(''); // Apagar os valores do form.
        loadingStart(); // Começar o Loading...
        var id = $(this).closest('tr').find('.id-holder').html(); // Pegar o valor do id holder e salvar na var id.
        $("#socio-form input").removeClass("input-transparent").prop("disabled", false); // Queremos ver e utilizar os inputs.
        $(".modal-footer").removeClass("hidden"); // Queremos ver o footer do modal.
        $(".btn-modal").attr("id", "update-btn-confirm"); // Atribui o id: update-btn-confirm ao .btn-modal.

        $.post("ajax.php", { type: "read", id: id }) // Faz um post do tipo Read e retorna os valores nos inputs correspondentes
         .done(function(data) {
            console.log('read');
            jsonOBJ = jQuery.parseJSON(data);
            for (var key in jsonOBJ) {
                $("input[name=" + key + "]").val(jsonOBJ[key]);
            }
         });

        $("#update-btn-confirm").click(function() { // Quando clicar no botão de salvar.
            var formArray = $("#socio-form").serializeArray(); // Pega todas as informações dos inputs e transforma em um array json.
            $.post("ajax.php", { type: "update", id: id, inputs: formArray }) // Faz um post do tipo Update.
             .done(function(data) {
                console.log('uptade');
                alert(data);
                event.stopPropagation();
             });
        });
        event.preventDefault();
    }
}); 
```

我强烈怀疑问题出在`.on`方法上，但我很难确定它。我知道我可以使用`.live()`or `.bind()`，但我试图避免它，因为两者都已弃用。

有什么建议么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T00:17:07.623

每次单击带有 class 的元素时`.update-socio-btn`，都会运行该`updateSocio`函数。每次`updateSocio`运行时，都会绑定一个新的点击事件`#update-btn-confirm`。

您可以通过将点击绑定移到`updateSocio`函数外部并仅绑定事件处理程序一次来解决此问题。

# string - Android NFC 标签字符串比较

> ID：15605723
> 
> 赞同：0
> 
> 时间：2013-03-25T00:08:53.970
> 
> 标签：string, tags, comparison, nfc

我在比较两个字符串时遇到问题，一个来自 NFC 标签，另一个来自 xml 文件。我用来编写标签的代码如下所示：

```
 private NdefMessage getTagAsNdef(Card new_card) 
    {
        boolean addAAR = false;
        String unique_id = new_card.getCardId();       
        byte[] bytes = unique_id.getBytes(Charset.forName("UTF-8"));
        byte[] payload = new byte[bytes.length + 1]; 
        NdefRecord rtdUriRecord = new NdefRecord(
        NdefRecord.TNF_WELL_KNOWN, NdefRecord.RTD_TEXT, new byte[0], payload);
        if(addAAR) 
        {
            NdefRecord new_record = null;
            try 
            {
                new_record = createRecord(new_card);
            } catch (UnsupportedEncodingException e) 
            {
                e.printStackTrace();
            }
            return new NdefMessage(new NdefRecord[] {rtdUriRecord, new_record}); 
        } else 
        {
            return new NdefMessage(new NdefRecord[] 
        {
                rtdUriRecord});
        }
    } 
```

我尝试按照此处找到的建议删除通常在有效负载中设置的所有语言和编码信息： [比较从 NFC 标签读取](https://stackoverflow.com/questions/12470530/comparing-data-read-from-nfc-tag) 的数据我在读取标签后在此处进行的比较总是失败，尽管日志中打印的字符串值是相同的：

```
looking at this_card_id -6465415649291849135
      compare to tag_id -6465415649291849135 
```

我得到了字符串的长度来显示问题：

```
looking at this_card_id 20
      compare to tag_id 21 
```

所以标签 id 有一个我一直无法摆脱的隐藏字符。这是比较的代码：

```
private void associateWithCardsFile(String tag_id)
{
    String method = "associateWithCardsFile";
    Log.i(DEBUG_TAG, method+" tag_id "+tag_id);
    tag_id.trim();
    boolean found = false;
    Enumeration e = cards.keys();
    Log.i(DEBUG_TAG, method+" cards "+cards.size());
    while (e.hasMoreElements())
    {
        String this_card_id = (String)e.nextElement();
        this_card_id.trim();
        Log.i(DEBUG_TAG, method+" looking at this_card_id "+this_card_id.length());
        Log.i(DEBUG_TAG, method+"       compare to tag_id "+tag_id.length());
        String card_id_str = UtilityTo.encodeThisString(this_card_id, "UTF-8");
        String tag_id_str = UtilityTo.encodeThisString(tag_id, "UTF-8");
        if (card_id_str.equals(tag_id_str))
        {
            Card matching_card = cards.get(this_card_id);
            String word = UtilityTo.getWord(matching_card);
            Toast.makeText(this, word, Toast.LENGTH_LONG ).show();
            Log.i(DEBUG_TAG, method+" 1 match"+matching_card.getText()+" "+matching_card.getDefinition()+" "+matching_card.getWordType());
            turn_cards.add(matching_card);
            found = true;
            showCards();
            break;
        }
    }
    if (!found)
    {
        Toast.makeText(this, "Not a game card!", Toast.LENGTH_LONG ).show();
        Log.i(DEBUG_TAG, method+" card not found");
    }
} 
```

在 UtilityTo 类中，我有一个非常适合使用外语的方法。

```
public static String encodeThisString(String original_value, String encoding)
{
    try
    {
        byte[] utf8Bytes = original_value.getBytes(encoding);
        String new_value = new String(utf8Bytes, encoding);
        return new_value;
    } catch (UnsupportedEncodingException e)
    {
        e.printStackTrace();
        return null;
    } catch (java.lang.NullPointerException n)
    {
        n.printStackTrace();
        return null;
    }
} 
```

我还尝试了 StackOverflow 的一些建议，如下所示： tag_id_str = new String(tag_id.getBytes("UTF-8"), "ascii") 无济于事。
有人可以解释如何编写标签以便没有隐藏字符并且基本的字符串比较将起作用，或者如何修改标签中的字符串使其等同于具有相同数字的字符串。谢谢。

ps 这是我在写完这篇文章后开始使用的 Android Developer NFC Basics 中的 write 方法。它会导致与上述相同的问题：tag_id 比 xml 文件中的 card_id 长 1 个字符。

```
public NdefRecord createRecord(String payload) 
{
    String language = "en";
    boolean encodeInUtf8 = true;
    byte[] langBytes = language.getBytes(Charset.forName("US-ASCII"));
    Charset utfEncoding = encodeInUtf8 ? Charset.forName("UTF-8") : Charset.forName("UTF-16");
    byte[] textBytes = payload.getBytes(utfEncoding);
    int utfBit = encodeInUtf8 ? 0 : (1 << 7);
    char status = (char) (utfBit + langBytes.length);
    byte[] data = new byte[1 + langBytes.length + textBytes.length];
    data[0] = (byte) status;
    System.arraycopy(langBytes, 0, data, 1, langBytes.length);
    System.arraycopy(textBytes, 0, data, 1 + langBytes.length, textBytes.length);
    NdefRecord record = new NdefRecord(NdefRecord.TNF_WELL_KNOWN,
    NdefRecord.RTD_TEXT, new byte[0], data);
    return record;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T17:39:39.793

试试这个[TextRecord](https://code.google.com/p/ndef-tools-for-android/source/browse/ndeftools/src/org/ndeftools/wellknown/TextRecord.java)看看是否能解决你的问题。可能您的编码/解码文本记录不正确。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T06:16:14.220

因为我只在每个标签上存储一个 long，所以我做了一个方法来从标签消息中排除所有其他字符。现在我可以将标记 id 字符串与 xml 文件中的 id 字符串进行比较。

```
private String removeHiddenCharacters(String message)
{
  String dash = "-";
  char d = dash.charAt(0);
  StringBuffer sb = new StringBuffer();
  for (int i = 0; i < message.length(); i++)
  {
    char c = message.charAt(i);
    if (Character.isDigit(c))
    {
        sb.append(c);
    } else if (c == d)
    {
        sb.append(d);
    }
  }
  String result = new String(sb);
  Log.i(DEBUG_TAG, " result "+result);
  return result;
} 
```

# javascript - JavaScript 或 jQuery：跳转到单独页面上的 div

> ID：15605725
> 
> 赞同：0
> 
> 时间：2013-03-25T00:08:59.517
> 
> 标签：javascript, jquery, redirect

我有一个网站，我正在努力将其扩展到社交网络。他们想要使用的社交网站有一个为他们添加的内容。然而，在页面上，公司广告前有一个巨大的标题区域。如此之多，以至于您到达那里时甚至都看不到他们在页面上的添加。

我想知道是否在进行重定向时将其重定向到页面并转到有问题的特定 div。由于另一页上没有锚点，因此无法弄清楚。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T00:16:34.303

URL 末尾的哈希标签与锚名称和 ID 一起使用。因此，如果 div 的 id 为`mydiv`，或者旁边有一个命名锚 ( `<a name="mydiv"></a>`)，您可以导航到`url.com/page.html#mydiv`

否则，如果页面在不同的服务器上，你就不走运了，因为你的 JS 不能修改/访问不同服务器上的页面

# build - Require.js 构建安排

> ID：15605726
> 
> 赞同：2
> 
> 时间：2013-03-25T00:09:04.403
> 
> 标签：build, requirejs

我有一个基于 require.js 的项目的文件安排，如下所示：

*   lib 文件夹：一些库
*   app.js ：这是在 html 中作为 data-main 添加的
*   main.js ：这是主应用程序文件

在 app.js 中，有一个 requirejs.config 和一个 require 调用来加载所有库，以及 main.js（这将需要一些其他模块，这些模块是我自己的脚本）。这看起来像这样：

```
require(['lib/jquery/jquery-1.8.2.min'],

    function() {

        require(['main']);
    }
); 
```

所以有一些 AMD 不兼容的库（这里只是 jquery）首先加载到全局空间中，然后调用 main.js（及其所有依赖项）。这工作正常，但现在我尝试使用 require.js 的优化器进行构建，但我遇到了这个问题：如果我进行构建：“node r.js -o build.js”（build.js 只选择 app.js作为输入）main.js 和它的所有依赖项都没有被丑化并内置到结果文件中，它们保持相同的方式。

现在，如果我在库列表的末尾添加“main”，这些库将很好地与它的所有依赖项一起被丑化到输出文件中。我认为依赖关系已经实现，因为 main.js 位于最后，但问题是，如果我运行代码（我编写的）的正常、未修饰和未优化版本，因为它有时会同时加载库main 将首先加载，因此不满足依赖项。

似乎我必须有一个用于开发的应用程序版本和一个用于构建的应用程序版本？但我确信有更好的方法。如果它更有意义，我愿意将我的文件重新排列为任何其他结构，但这也是我在 require js 官方示例代码中看到的方式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T20:12:54.930

听起来`main.js`应该是你的`data-main`脚本，你应该定义`jquery`为`main.js`. 例如，您`main.js`可能看起来像：

```
require.config({
  shim: {
    'jquery': {
      exports: '$'
    }
  },
  paths: {
    'jquery': 'lib/jquery/jquery-1.8.2.min'
  }
});
define([
  'jquery'
  //more libraries here
], function($) {
  //main code here
}); 
```

# android - 表格布局不起作用

> ID：15605727
> 
> 赞同：0
> 
> 时间：2013-03-25T00:09:06.907
> 
> 标签：android, tablelayout, tablerow

我有一个`TableLyout`（在 XML 文件中），我正在尝试向其中添加表行。每行包含按钮，其编号由参数控制。

每次我运行这段代码时，程序都会退出。这应该是一个简单的任务。出了什么问题？

爪哇：

```
public class Play extends Activity{
int status=0 , timeDelay , row , col;
TextView score;
TableRow    rows [];
TableLayout  table;

protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.layout_play);

    setLevel(); 
    table = (TableLayout)findViewById(R.id.Table_cards);

    for(int i=0 ; i<row ; i++){
        TableRow tblr = new TableRow(this);
        for(int j=0 ; j<col ; j++){
            final ImageButton b = new ImageButton(this);
            b.setOnClickListener(new OnClickListener() {

                public void onClick(View v) {
                    b.setBackgroundResource(R.drawable.card_back_blue);
                }
            });
            b.setBackgroundResource(R.drawable.c1+j);
            tblr.addView(b);
        }
        table.addView(tblr);
    }
} 
```

XML 文件：

```
 <TableLayout
    android:id="@+id/Table_cards"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_below="@id/layout_up"
    android:background="@drawable/wss"
    android:gravity="center_vertical"
    android:orientation="vertical" >
</TableLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T04:44:48.443

这段代码运行良好，

```
 public class Play extends Activity{
    private int status=0 , timeDelay , row=10, col=10;
    private TextView score;
    private TableRow    rows [];
    private TableLayout  table;
    @Override
    public void onCreate(Bundle bundle)
    {
        super.onCreate(bundle);
        setContentView(R.layout.table_dynamic);

//      setLevel(); 
        table = (TableLayout)findViewById(R.id.tableLayout);

        for(int i=0 ; i<row ; i++){
            TableRow tblr = new TableRow(this);
            for(int j=0 ; j<col ; j++){
                final ImageButton b = new ImageButton(this);
                b.setOnClickListener(new OnClickListener() {

                    public void onClick(View v) {
//                      b.setBackgroundResource(R.drawable.card_back_blue);
                    }
                });
//              b.setBackgroundResource(R.drawable.c1+j);
                tblr.addView(b);
            }
            table.addView(tblr);
        }
    }
} 
```

和布局table_dynamic，

```
<TableLayout 
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/tableLayout"
    android:background="@android:color/black"
    android:layout_width="match_parent"
    android:layout_height="match_parent">
</TableLayout> 
```

# css - Chrome 中的 Jerky CSS 转换过渡

> ID：15605731
> 
> 赞同：29
> 
> 时间：2013-03-25T00:09:20.267
> 
> 标签：css, css-transitions, css-transforms

我在背景图像上使用 CSS3 转换以在悬停时放大。

我已经在 Opera、Safari 和 Firefox 的最新浏览器中进行了测试，并且运行良好且流畅，但是在 Chrome 中过渡非常生涩。

这是链接，将鼠标悬停在社交图标上即可查看我的意思。[http://www.media-flare.com/pins/](http://www.media-flare.com/pins/) - 我注意到当您将浏览器大小调整为移动视图时，情况会变得更糟。

我在这里做了一个 jsfiddle 版本，并减慢了转换速度，因为它更难看到。

[http://jsfiddle.net/wsgfz/1/](http://jsfiddle.net/wsgfz/1/) - 这在 chrome 和 firefox 中看起来很生涩，在 safari 和 Opera 中很流畅。

我能做些什么来使过渡更顺利吗？

如果您无法查看 jsfiddle，这是代码

```
.social {
   position: relative;
   list-style:none;
}

.social > li > a {
   text-indent: 100%;
   white-space: nowrap;
   overflow: hidden;
   color: transparent;
}

.social > li > a {
   text-indent: 100%;
   white-space: nowrap;
   overflow: hidden;
   color: transparent;
}

.fbook, .twit, .tmblr, .pntrst, .insta {
   background: url(http://placehold.it/350x150) center center;
   width: 78px;
   height: 90px;
   background-size: cover;
   float: left;
   margin: 30px;
   -webkit-transition: all 0.8s ease;
   -moz-transition: all 0.8s ease;
   transition: all 0.8s ease;
 }

 .fbook {background-position: 0 0}
 .twit {background-position: -78px 0}
 .tmblr {background-position: -156px 0}
 .pntrst {background-position: -232px 0}
 .insta {background-position: -310px 0}

.fbook:hover, .twit:hover, .tmblr:hover, .pntrst:hover, .insta:hover {
    -webkit-transform: scale(1.5);
    -moz-transform: scale(1.5);
    transform: scale(1.5);
 }
```

```
<ul class="social">
  <li><a href="" class="fbook">Facebook</a></li>
  <li><a href="" class="twit">Twitter</a></li>
  <li><a href="" class="tmblr">Tumbler</a></li>
  <li><a href="" class="pntrst">Pinterest</a></li>
  <li><a href="" class="insta">Instagram</a></li>
  <li><a href="" class="rss">RSS</a></li>
</ul>
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2017-02-15T04:04:41.803

**2017 年更新**

为了响应@Matt Coughlin 的帖子，原生支持动画的浏览器**现在在自己的线程上渲染 CSS 和 JS 动画**......

> 基于 CSS 的动画和本机支持的 ​​Web 动画通常在称为“合成器线程”的线程上处理。这与执行样式、布局、绘画和 JavaScript 的浏览器的“主线程”不同。这意味着如果浏览器在主线程上运行一些昂贵的任务，这些动画可以继续运行而不会被中断。

[https://developers.google.com/web/fundamentals/design-and-ui/animations/animations-and-performance](https://developers.google.com/web/fundamentals/design-and-ui/animations/animations-and-performance)

该开发人员文档还支持来自@user1467267 的当前接受的答案...

> 在可能的情况下，您应该避免对触发布局或绘制的属性进行动画处理。对于大多数现代浏览器，这意味着将动画限制为**opacity 或 transform**，浏览器可以对这两者进行高度优化；动画是由 JavaScript 还是 CSS 处理并不重要。

该文档还建议`will-change`为您将要制作动画的属性实现该属性的使用，以便浏览器可以对这些属性执行额外的优化。以我个人的经验，这似乎只在不透明度和变换的 chrome 中很明显。

```
element{
  will-change: transform, opacity;
} 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2013-03-25T00:18:26.120

转换似乎比 Chrome 中的转换效果更好。尝试这个：

```
.social {
  position: relative;
  list-style: none;
}
.social > li > a {
  text-indent: 100%;
  white-space: nowrap;
  overflow: hidden;
  color: transparent;
}
.social > li > a {
  text-indent: 100%;
  white-space: nowrap;
  overflow: hidden;
  color: transparent;
}
.fbook,
.twit,
.tmblr,
.pntrst,
.insta {
  background: url(http://placehold.it/350x150) center center;
  width: 78px;
  height: 90px;
  background-size: cover;
  float: left;
  margin: 30px;
  -webkit-transform: translate(0px, 0);
  -webkit-transition: -webkit-transform 0.8s ease;
  -moz-transform: translate(0px, 0);
  -moz-transition: -moz-transform 0.8s ease;
  transform: translate(0px, 0);
  transition: -webkit-transform 0.8s ease;
}
.fbook {
  background-position: 0 0
}
.twit {
  background-position: -78px 0
}
.tmblr {
  background-position: -156px 0
}
.pntrst {
  background-position: -232px 0
}
.insta {
  background-position: -310px 0
}
.fbook:hover,
.twit:hover,
.tmblr:hover,
.pntrst:hover,
.insta:hover {
  -webkit-transform: scale(1.5);
  -moz-transform: scale(1.5);
  transform: scale(1.5);
}
```

```
<ul class="social">
  <li><a href="" class="fbook">Facebook</a>
  </li>
  <li><a href="" class="twit">Twitter</a>
  </li>
  <li><a href="" class="tmblr">Tumbler</a>
  </li>
  <li><a href="" class="pntrst">Pinterest</a>
  </li>
  <li><a href="" class="insta">Instagram</a>
  </li>
  <li><a href="" class="rss">RSS</a>
  </li>
</ul>
```

快速鼠标进/出的闪烁效果现在也应该消失了。

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2013-03-25T02:08:49.300

**基本问题**

当动画运行缓慢并且看起来不均匀时，它只是暴露了浏览器始终存在的限制。

浏览器没有用于渲染动画的专用线程。动画必须与其他浏览器活动（如 UI 事件）竞争。有时，浏览器还与计算机上运行的其他软件竞争。此外，浏览器可用的硬件加速可能有些受限。

带有缓动的动画在动画开始和/或结束时运行得更慢，这使得动画的自然不均匀性更加明显。

**解决方案**

防止不均匀性如此明显的最简单的解决方案是提高动画的速度，并且可以选择删除或减少缓动的使用。可以使用一种在开始和结束时不会减慢速度的缓动类型。

展望未来，另一种选择是使用 WebGL 的硬件加速（带有 3D 上下文的 HTML5 画布标签），这应该可以减轻这个问题。随着硬件加速在浏览器和设备上变得越来越普遍和得到更好的支持，制作复杂的动画应该可以像旧的 Flash 动画一样流畅地运行。

# list - 在列表中显示下拉列表 ul

> ID：15605733
> 
> 赞同：0
> 
> 时间：2013-03-25T00:09:34.853
> 
> 标签：list, drop-down-menu, hover

我已经尝试了一切，但我坚持这个。我希望在悬停 ul li 时显示 ul ul li。任何人都可以看到我需要做什么？我认为我在声明 ul 和 li 时做错了，但如果这是唯一的问题，我不知道。

顺便说一句：这是一个垂直菜单/列表

HTML：

```
<!--::::: SIDEBAR :::::-->

    <div class="sidebar"> <!-- sidebar starts-->
        <!-- menu starts-->
        <div id="menu_nav">
          <ul class="main">
             <li class="selected"><a class="selected" href="#featured_work1">Wat is D-day</a></li>
             <li><a href="#featured_work1">Waarom een invasie</a></li>
                   <li class="sub"><a href="#featured_work2">Het doel</a></li>
               <ul >
                <li><a href="#featured_work2">test1</a></li>
                <li><a href="#featured_work2">test2</a></li>
                <li><a href="#featured_work2">test3</a></li>
               </ul>
             <li><a href="#featured_work1">Operation Fortitude</a></li>
             <li><a href="#featured_work2">Landingsplaats</a></li>
             <li><a href="#featured_work1">Atlantische muur</a></li>
             <li><a href="#featured_work2">Organisatie Todt</a></li>
             <li><a href="#featured_work1">Batterijen</a></li>
             <li><a href="#featured_work1">Luchtlandingen</a></li>
             <li><a href="#featured_work2">Amfibische landingen</a></li>
             <li><a href="#featured_work1">Tijdlijn</a></li>
             <li><a href="#featured_work2">Na D-day</a></li>
             <li><a href="#featured_work1">Cijfers</a></li>
             <li><a href="#featured_work1">De Facties</a></li>
             <li><a href="#featured_work1">Materiaal</a></li>
             <li class="last"><a href="#featured_work2">Kaarten</a></li>

          </ul>
        </div><!-- menu ends --> 
```

CSS：

```
/* A) SIDEBAR MENU ++++++++++++++++++++++++++++++++++++++++++++ */
#menu_nav { }
#menu_nav ul li { display: block; border-bottom: 1px dashed #555; }

#menu_nav ul ul li { display: block; border-bottom: 0px dashed #555; }

#menu_nav ul ul li a {
    display: none;
    border-bottom: 0px dashed #555;
    padding: 7px 0 0px 58px;
    font-size: 12px;
    margin-top: -4px;
    background: url(style/images/forward_light2.png)  no-repeat;
    background-position: 38px 7px;
    color: #000;
    text-align: left;
    text-shadow: none;
    -webkit-transition: all .2s ease;
    -moz-transition: all .2s ease;
    -ms-transition: all .2s ease;
    -o-transition: all .2s ease;
    transition: all .2s ease; }

#menu_nav ul li.sub a:hover ul { display: block; }

#menu_nav ul li a {
    display: block;
    padding: 7px 0 11px 40px;
    font-size: 14px;
    margin-top: 3px;
    color: #9b2929;
    text-align: left;
    text-shadow: none;
    background: url(style/images/arrow-right.png)  no-repeat;
    background-position: 0px 7px;
    -webkit-transition: all .2s ease;
    -moz-transition: all .2s ease;
    -ms-transition: all .2s ease;
    -o-transition: all .2s ease;
    transition: all .2s ease; }

#menu_nav ul li.last { border-bottom: 0 solid #444; padding-bottom:10px; }
#menu_nav ul li a.selected { 

    display: block;
    padding: 7px 0 11px 40px;
    font-size: 14px;
    color:#252525;
    text-align: left;
    text-shadow: none;
    background: url(style/images/arrow-right-red.png)  no-repeat;
    background-position: 0px 7px;
    }

#menu_nav ul li a:hover {
    padding: 7px 0 11px 45px; 
    -moz-opacity: 0.85;
    -ms-filter:progid: DXImageTransform.Microsoft.Alpha(Opacity=85);
    filter: alpha(opacity=85);
    opacity: 0.85;
    -khtml-opacity: 0.85;
    text-decoration: none; }

#menu_nav ul ul li a:hover{
    padding: 7px 0 0px 62px; 

    text-decoration: none; } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T00:31:46.677

你有很多复杂的后代选择器，我认为这是你的问题。

`display: none`首先，删除`#menu_nav ul ul li a`.

然后将这些声明添加到您的 CSS 中：

```
li.sub ul {
display: none;
}

li.sub:hover ul {
display: block;
} 
```

然后，在您的 HTML 中，更改以下行：

```
<li class="sub"><a href="#featured_work2">Het doel</a></li>
           <ul >
            <li><a href="#featured_work2">test1</a></li>
            <li><a href="#featured_work2">test2</a></li>
            <li><a href="#featured_work2">test3</a></li>
           </ul> 
```

到以下：

```
<li class="sub"><a href="#featured_work2">Het doel</a>
           <ul >
            <li><a href="#featured_work2">test1</a></li>
            <li><a href="#featured_work2">test2</a></li>
            <li><a href="#featured_work2">test3</a></li>
           </ul></li> 
```

换句话说，放在`<ul>` *里面* `<li class="sub">`。

这在 Chrome 25 中对我有用。这就是你所追求的吗？

**过渡**

在这种情况下，您可以执行的转换类型有些受限。CSS 过渡不适用于规则，除非您使用确切的尺寸（因此从 切换到不会动画） ，否则`display`它们不会起作用。使用精确的高度非常棘手，如果您更改了内容，它会立即中断。所以你有两个选择：在不透明度上执行一个不太完美的过渡（淡入效果），或者使用 jQuery 在打开 JavaScript 的情况下为访问者添加一个向下滑动的效果。`height``height: 0``height: auto``<ul>`

如果您将 CSS 更改为：

```
li.sub ul {
    height: 0px;
    overflow: hidden;
    -webkit-transition: all .2s ease;
    -moz-transition: all .2s ease;
    -ms-transition: all .2s ease;
    -o-transition: all .2s ease;
    transition: all .2s ease; 
}

li.sub:hover ul {
    opacity: 1;
    height: auto;
} 
```

将“弹出”到视图中的空间`ul`，然后内容将淡入。

或者，您可以使用 jQuery 来添加一个 slideDown 效果：

```
$(document).ready(function() {
    $('.sub').hover(function() {
    $(this).find('ul').show();
}, function() {
    $(this).find('ul').hide();
});
}); 
```

然后将您的 CSS 规则更改为：

```
li.sub ul.sub-menu {
    display: none;
} 
```

（不再需要 :hover 规则。）这对您来说可能看起来更优雅。如果您选择此路线，请务必创建一个后备方案，`display:none;`为未打开 JavaScript 的访问者“取消写入”规则，否则他们将看不到任何内容！

# jquery - 扩展 Galleriffic buildImage

> ID：15605735
> 
> 赞同：0
> 
> 时间：2013-03-25T00:09:45.227
> 
> 标签：jquery, jquery-plugins, extend, galleriffic

我正在使用 jQuery 插件“Galleriffic”。我希望它在调用它的 buildImage 方法后调整图像大小。我在[这里](https://code.google.com/p/galleriffic/issues/detail?id=47)找到了以下代码并且它可以工作，但在我看来，有一种方法可以做到这一点，而无需反刍该方法中的所有代码。

有没有更清洁的方法可以做到这一点？

```
var gallery = $('#thumbs').galleriffic({
delay:                     2500,
numThumbs:                 15,
.........
buildImage: function(imageData, isSync) {
                //REDEFINED BUILD IMAGE
                var gallery = this;
                var nextIndex = this.getNextIndex(imageData.index);

                // Construct new hidden span for the image
                var newSlide = this.$imageContainer
                    .append('<span class="image-wrapper current"><a class="advance-link" rel="history" href="#'+this.data[nextIndex].hash+'" title="'+imageData.title+'">&nbsp;</a></span>')
                    .find('span.current').css('opacity', '0');

                newSlide.find('a')
                    .append(imageData.image)
                    .click(function(e) {
                        gallery.clickHandler(e, this);
                    });

                var newCaption = 0;
                if (this.$captionContainer) {
                    // Construct new hidden caption for the image
                    newCaption = this.$captionContainer
                        .append('<span class="image-caption current"></span>')
                        .find('span.current').css('opacity', '0')
                        .append(imageData.caption);
                }

                // Hide the loading conatiner
                if (this.$loadingContainer) {
                    this.$loadingContainer.hide();
                }

                // Transition in the new image
                if (this.onTransitionIn) {
                    this.onTransitionIn(newSlide, newCaption, isSync);
                } else {
                    newSlide.fadeTo(this.getDefaultTransitionDuration(isSync), 1.0);
                    if (newCaption)
                        newCaption.fadeTo(this.getDefaultTransitionDuration(isSync), 1.0);
                }

                if (this.isSlideshowRunning) {
                    if (this.slideshowTimeout)
                        clearTimeout(this.slideshowTimeout);

                    this.slideshowTimeout = setTimeout(function() { gallery.ssAdvance(); }, this.delay);
                }

                               //THE CODE TO RESIZE
                $('#slideshow img').addClass('slideshow_image')

                return this;
            }
.....
 }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T13:10:33.887

我找不到一种非常干净的方式来做我想做的事。但我确实找到了解决方案。

```
var self = this,
    style = $('<style>div.slideshow img { max-height: ' + self.imageHeight + 'px; max-width: ' + self.imageHeight + 'px; }</style>');
$('html > head').append(style); 
```

这会在页面标题中添加一行 css，因此它可以影响所有动态添加的匹配元素，但也允许我使用 Javascript 计算高度和宽度值。

这仍然是一个 hack，但它比我原来的问题中发布的替代方案要干净得多。

# android - Android活动上的静态ArrayList

> ID：15605739
> 
> 赞同：1
> 
> 时间：2013-03-25T00:10:09.470
> 
> 标签：android

在一个 Android 活动中，我正在填充一个在该活动中声明为静态的 ArrayList。此数据结构稍后在应用程序执行期间由其他活动访问，如下所示：

类名.data_structure_name;

我的问题是这样做是否安全，或者Android是否可以清除内存结构或类似的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T00:22:15.540

是的，Android 可以按照[此处](http://developer.android.com/guide/components/activities.html)`Activity`的说明处理您的。

> 如果一个活动被暂停或停止，系统可以通过要求它完成（调用它的 finish() 方法）或简单地终止它的进程**来将它从内存中删除。**Activity 再次打开时（完成或杀死后），必须全部创建

**但这**是`Activity` *举例*。如果您是静态的，那么除非从 Dalvik VM 卸载该类（我个人从未见过这种情况），`ArrayList`否则它不会被删除。`Activity`

无论如何，恕我直言，这不是一个好的设计（我过去曾使用过）。我建议你使用一个单独的类来存储你的 static `ArrayList`。请注意多线程[和](http://tech.puredanger.com/2007/07/03/pattern-hate-singleton/) [使用`Singletons`](http://oncodingstyle.blogspot.com.es/2008/11/singletons-deemed-dangerous.html).

[这个](https://stackoverflow.com/questions/5105097/static-references-are-cleared-does-android-unload-classes-at-runtime-if-unused)和[这个](https://stackoverflow.com/questions/148681/unloading-classes-in-java)SO 问题也值得一读。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T00:23:09.957

如果您需要不同的活动访问您的 ArrayList，我认为您应该将它放在一个单独的类中 - 而不是 Activity 类。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T00:16:02.910

如果您想知道，数据不会在不同的进程中持续存在，因此您可能只会遇到错误。IE，类的静态成员不是持久存储。

但是，如果您以后的这些活动都在同一个流程中，那么您将能够像您指定的那样访问它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-25T01:21:26.690

这个设计有几个问题。

1.  打破软件工程和 OOP 的规则
2.  您还违反了 MVC 设计模式的规则
3.  当不需要您的活动时，它将占用内存

我猜你从某个来源获取数据并将其放入数组列表中。如果您不需要整个数组列表，只需将值作为包内传递。

如果您在后续活动中需要整个数组列表，请按照您最初获得的方式重新填充数组列表。

静态访问不适合 OOP 设计。除了以下打印日志标签的情况外，我不会在我的 Android 应用程序的任何地方使用静态。

```
public static final String TAG="MY_TAG"; 
```

即使是辛格尔顿也值得商榷。

# java - 为 JTable 单元格着色

> ID：15605741
> 
> 赞同：1
> 
> 时间：2013-03-25T00:10:29.307
> 
> 标签：java, swing, user-interface, jtable, rendering

我无法为我的 JTable 单元格着色。我正在制作俄罗斯方块游戏。游戏的所有功能都有效；按钮按下、键盘交互移动片段、删除完整行等。现在发生的输出只是打印出的表格整数值（见屏幕截图）。这些整数值指的是一种颜色。我有代码可以根据下面的 MyRenderer 类中的整数值更改单元格的颜色，但没有发生着色。我想知道是否有一些我只是没有找到的“重新渲染”方法，或者我是否需要构建自己的绘画方法来调用？

有什么建议么？

```
 startGame.addActionListener(new ActionListener() {
        @Override
        public void actionPerformed(ActionEvent e) {
            card3.remove(0); // Removes button
            model = new MyTableModel();
            table = new JTable(model);
            table.setDefaultRenderer(int.class, new MyRenderer());
            table.setRowHeight(GRID_ROW_HEIGHT);
            table.setFocusable(false);
            table.setRowSelectionAllowed(true);
            for (int i = 0; i < NUM_COLS; i++) {
                table.getColumnModel().getColumn(i)
                        .setPreferredWidth(table.getRowHeight());
            }
            card3.add(table);
            JButton pauseButton = new JButton("Pause");
            card3.add(pauseButton);

            pauseButton.addActionListener(new ActionListener() {
                @Override
                public void actionPerformed(ActionEvent e) {
                    game.pause();
                }
            });

            card3.setFocusable(true);
            card3.requestFocusInWindow();

            KeyListener kl = new KeyListener() {
                public void keyTyped(KeyEvent e) {
                }

                public void keyReleased(KeyEvent e) {
                }

                @Override
                public void keyPressed(KeyEvent e) {
                    if (e.getKeyChar() == 'a' || e.getKeyChar() == 'A') {
                        game.move_Left();
                        draw_grid_first_time();
                        card3.revalidate();
                    } else if (e.getKeyChar() == 'd'
                            || e.getKeyChar() == 'D') {
                        game.move_Right();
                        draw_grid_first_time();
                        card3.revalidate();
                    } else if (e.getKeyChar() == 'q'
                            || e.getKeyChar() == 'Q') {
                        game.rotate_left();
                        draw_grid_first_time();
                        card3.revalidate();
                    } else if (e.getKeyChar() == 'e'
                            || e.getKeyChar() == 'E') {
                        game.rotate_right();
                        draw_grid_first_time();
                        card3.revalidate();
                    } else if (e.getKeyChar() == ' ') {
                        game.pause();
                    }
                }
            };
            card3.addKeyListener(kl);

            draw_grid_first_time();
            card3.revalidate(); // Redraws graphics

            Timer timer = new Timer(500, new ActionListener() {
                @Override
                public void actionPerformed(ActionEvent arg0) {
                    if (!game.getPause()) {
                        game.move_Down();
                        draw_grid();
                        card3.revalidate(); // Redraws graphics
                    }
                }

                public void draw_grid() {
                    for (int i = 0; i < game.getNumRows(); i++) {
                        for (int j = 0; j < game.getNumCols(); j++) {
                            int[][] grid = game.getGrid();
                            model.setValueAt(grid[j][i], i, j);
                        }
                    }
                }
            });
            timer.setRepeats(true);
            timer.setCoalesce(true);
            timer.start();
            if (game.isOver()) {
                timer.stop();
            }
        }
    });

    // Sets up layout
    cards = new JPanel(new CardLayout());
    cards.add(card1, SPLASHSCREEN);
    cards.add(card2, MAINMENU);
    cards.add(card3, TETRIS);

    // Creates the actual window
    pane.add(cards, BorderLayout.CENTER);
}

public void draw_grid_first_time() {
    for (int i = 0; i < game.getNumRows(); i++) {
        for (int j = 0; j < game.getNumCols(); j++) {
            int[][] grid = game.getGrid();
            model.setValueAt(grid[j][i], i, j);
        }
    }
}       

// Render each cell as a background color dependent on grid from tetris game
class MyRenderer implements TableCellRenderer {
    public Component getTableCellRendererComponent(JTable table,
            Object value, boolean isSelected, boolean hasFocus, int row,
                int column) {
        JTextField editor = new JTextField();
        if (value != null) {
            editor.setText(value.toString());
        }
        if ((Integer) table.getValueAt(row, column) == 0) {
            editor.setBackground(Color.DARK_GRAY);
        } else if ((Integer) table.getValueAt(row, column) == 1) {
            editor.setBackground(Color.RED);
        } else if ((Integer) table.getValueAt(row, column) == 2) {
            editor.setBackground(Color.GREEN);
        } else if ((Integer) table.getValueAt(row, column) == 3) {
            editor.setBackground(Color.BLUE);
        } else if ((Integer) table.getValueAt(row, column) == 4) {
            editor.setBackground(Color.YELLOW);
        }
        return editor;
    }
}
// Overwrite the Table Model to be what I want color wise
@SuppressWarnings("serial")
class MyTableModel extends AbstractTableModel {
    private int[][] values = new int[NUM_COLS][NUM_ROWS];
            public int getColumnCount() {
        return NUM_COLS;
    }
            public int getRowCount() {
        return NUM_ROWS;
    }

    public Object getValueAt(int row, int col) {
        return values[col][row];
    }
    public void setValueAt(Object val, int row, int col) {
        values[col][19 - row] = (Integer) val;
        fireTableCellUpdated(row, col);
    }
} 
```

![俄罗斯方块截图](../Images/8f834ef045755224cf7fc167e7f5d28b.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T00:38:55.163

您不应该在渲染器的`getTableCellRendererComponent()`. `JTable`为所有单元重用一个渲染器。在您的情况下，您多次为每个单元分配新组件。有关详细信息，请参阅*如何使用表*教程中的[概念：编辑器和渲染器。](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#editrender)考虑这个扩展（注意它是 的扩展）：*`DefaultTableCellRenderer``DefaultTableCellRenderer``JLabel`*

 *```
class MyRenderer extends DefaultTableCellRenderer {
    public Component getTableCellRendererComponent(JTable table,
            Object value, boolean isSelected, boolean hasFocus, int row,
            int column) {
        Component c = super.getTableCellRendererComponent(table,
                value, isSelected, hasFocus, row, column);
        c.setBackground(getColor((Integer) value));
        return c;
    }

    private Color getColor(int value) {
        switch(value){
        case 1: return Color.RED;
        case 2: return Color.GREEN;
        //TODO the rest of colors
        }
        return Color.DARK_GRAY;
    }
} 
```

另请注意，由于您正在为整数列设置渲染器，请确保您的模型在其`getColumnClass()`实现中实际返回一个有效的类。否则，渲染器将不会被使用。例如`DefaultTableModel.getColumnClass()`返回`Object.class`所有列。

`getColumnClass()`返回描述存储在指定列中的数据对象的类。这用于`JTable` 为该列分配默认渲染器和编辑器。在您的情况下，如果您将整数存储在模型中，`getColumnClass()`则应返回`Integer.class`. 但是请注意，这`Integer.class`和`int.class`是不同的。所以`setDefaultRenderer`应该对应于返回的类`getColumnClass`。在您的情况下，`int.Class`在两个地方或`Integer.Class`.

另一点，看看[如何使用键绑定](http://docs.oracle.com/javase/tutorial/uiswing/misc/keybinding.html)作为键侦听器是一个较低级别的接口*

# java - 使用未知参数调用构造函数

> ID：15605744
> 
> 赞同：0
> 
> 时间：2013-03-25T00:10:40.233
> 
> 标签：java, reflection, constructor

我有一组类`TestClass1`：`TestClass2`和`TestClass3`。所有这些类都继承自 class `MainTestClass`。类`TestClass1`，`TestClass2`并`TestClass3`具有不同的构造函数。例如：

```
TestClass1(String s)
TestClass2(Integer i)
TestClass3(Double d) 
```

类可以有多个构造函数——每个构造函数都与其他构造函数不同。

现在我想随机创建这些类的实例并将它们存储在 List 中。为此，我将, ...的`Class`对象存储在 List 中。然后，我得到例如每个类的第一个构造函数，它具有非零参数计数。现在，当我想使用方法创建对象时，我不知道要传递给这个特定构造函数的参数类型和数量。`TestClass1``TestClass1.class``newInstance()`

是否可以使用反射来实现这样的目标？我一直在考虑类似的事情

```
setConstructorArgument(int number, Object value) 
```

或者

```
setConstructorArguments(Object[] arguments) 
```

Java中是否存在类似的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T01:03:33.760

构造函数对象有一个 newInstance 方法，该方法可以接受参数来构造它所属的类。显然，参数必须与 getParameterTypes 方法可以提供的参数相匹配。

Object... initargs 实际上意味着 Object[] initargs，除了它允许语法

```
newInstance(param1, param2, param3); 
```

也

```
newInstance(new Object[]{param1, param2, param3}); 
```

你还应该记住

```
newInstance(null); 
```

并不意味着

```
newInstance(new Object[]{null}); 
```

时不时会抓到人。

我个人不喜欢可变参数，但 c'est la vie。

# javascript - 为什么不能在自引用函数调用中将参数传递给 setTimeout？

> ID：15605745
> 
> 赞同：0
> 
> 时间：2013-03-25T00:10:42.277
> 
> 标签：javascript, jquery, css

我认为有更好的方法可以做到这一点，也许有人可以指出我的错误。我通过向上和向下计数来脉冲 box-shadow blur css 属性，一旦启动，函数就会自行调用。

由于某种原因，我无法将参数传递给第一次传递的 setTimeout 调用。

关于如何更干净地写这个的任何想法？它可以工作，但将它推广到其他 css 属性的动画效果会很好。

```
var pulseBoxShadowBlurCounter = 0;
var pulseBoxShadowBlurDirection;

$(document).ready(function() { // dom binds

pulseBoxShadowBlur($('#getData-btn'),14,'#fff',100); // start the process

});

function pulseBoxShadowBlur(pulseElement,max,color,delayTime){
var cssInput = '0px 0px '+pulseBoxShadowBlurCounter+'px '+color;
$(pulseElement).css('box-shadow', cssInput);

    if(pulseBoxShadowBlurCounter == max){
        pulseBoxShadowBlurDirection = 1; // backwards
    }

    if(pulseBoxShadowBlurCounter == -5){ // negative num for pause at 0 time
        pulseBoxShadowBlurDirection = 0; // forward
    }

    if(pulseBoxShadowBlurDirection == 0){ 
        pulseBoxShadowBlurCounter++;
    }else{
        pulseBoxShadowBlurCounter--;
    }

setTimeout( "pulseBoxShadowBlur($('#getData-btn'),14,'#fff',100);",delayTime ); // loop
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T00:14:02.717

你可以：

```
setTimeout(function() { pulseBoxShadowBlur(element, max, color, delayTime); }, delayTime); 
```

通常，将某些 JavaScript 代码的字符串版本作为 `setTimeout()`or的第一个参数传递`setInterval()`是一个坏主意。而是传递一个函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T00:14:17.600

您必须在闭包中执行此操作，如下所示：

```
setTimeout( function() {
   pulseBoxShadowBlur($('#getData-btn'),14,'#fff',100);
}),delayTime ); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-25T00:19:22.297

由于您使用的是 jQuery，因此您可以像这样`delay`使用`queue`：

```
$('#getData-btn').delay(delayTime).queue(function(next) {
  pulseBoxShadowBlur($(this),14,'#fff',100);
  next(); // resume queue
}); 
```

# jquery - 将Div放在输入框的右上角

> ID：15605748
> 
> 赞同：0
> 
> 时间：2013-03-25T00:12:17.240
> 
> 标签：jquery, html, css

我在页面上动态插入 DIV，这是简化的示例：

[http://jsfiddle.net/GEgEc/4/](http://jsfiddle.net/GEgEc/4/)

HTML：

```
<div class="left-column">
    <p>
        <label>Company Name:</label>
        <input type="text" maxlength="255" id="BodyContentPlaceholder_LeftColumnContentPlaceHolder_CompanyNameTextBox" />

    </p>
    <p>
        <label>Phone:</label>
        <input type="text" maxlength="255" id="BodyContentPlaceholder_LeftColumnContentPlaceHolder_PhoneNumberTextBox" __id="105" />         
    </p>
</div>
<div class="right-column">
    <p>
        <label __id="109">Contact Name:</label>
        <input  type="text" maxlength="255" id="BodyContentPlaceholder_LeftColumnContentPlaceHolder_ContactNameTextBox" __id="110" /> 
    </p>
    <p>
        <label>Email:</label>
        <input type="text" maxlength="255" id="BodyContentPlaceholder_LeftColumnContentPlaceHolder_EmailTextBox"  />     </p>
</div>
<div style="clear:both;">
    <input type="submit" value="Submit Request" id="myButton" />
</div> 
```

CSS：

```
.inputError {
    border: 1px solid #006;
    background: pink;
}
.divError {
    border: 1px solid black;
    background: red;

}
label {
    float:left;
    width:120px;
    text-align:right;
    margin-right:5px;
}
input[type="text"] {
    width: 150px;
}
.left-column, .right-column {
    float:left;
    position: relative;
}
.left-column p, .right-column p {
    padding-bottom: 10px;
}
.left-column {
    margin-right:5px;
} 
```

JS：

```
$(document).ready(function() {

    $("#myButton").on("click", DoTrick);
});

function DoTrick()
{
    var $input = $("#BodyContentPlaceholder_LeftColumnContentPlaceHolder_CompanyNameTextBox");

    var $div = $("<div/>")
        .attr("id", "GGG")
        .addClass("divError")
        .text("This field has error");

    $div.insertAfter($input);

} 
```

但理想情况下，只要我*知道*输入元素我想添加显示在其右上角的 DIV，我通常希望它能够正常工作，这是应该“浮动”的验证消息

现在，当我添加 DIV 时，它会破坏布局并且不会去我需要的地方。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T00:23:46.697

您只需按像素定位任何元素。我认为应该是这样的：

```
p.pos_fixed
{
position:fixed;
top:30px;
right:5px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T00:25:19.427

your.divError 是一个`<div>`，这意味着它具有 display:block 属性，因此它将位于新行上。

如果您将其`<span>`改为 a ，它将与输入元素内联（或修改 CSS 类）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T00:28:45.597

不确定我是否理解正确，但您是否正在寻找这样的东西？[http://jsfiddle.net/5ZM25/1/](http://jsfiddle.net/5ZM25/1/)

如果您希望它“在输入框的右上角”，可以将其更改为然后将其放置在您想要的位置`insertAfter`。`insertBefore`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-25T00:29:05.043

这可能是 position: absolute 的情况。

见[http://jsfiddle.net/HNQMm/3/](http://jsfiddle.net/HNQMm/3/)

添加一个类来包装字段（我使用.relative）并将其设置为“位置：相对”。

然后您的错误框可能如下所示：

```
.divError {
border: 1px solid black;
background: red;
position: absolute;
top: 0;
left: 50px; 
```

}

.divError 的 top 和 left 值现在是相对于外部的相对 div 的，因此您可以将它们精确地设置在您需要的位置。

# asp.net - 每个网站的应用程序池或 1 个应用程序池中的几个网站？

> ID：15605750
> 
> 赞同：0
> 
> 时间：2013-03-25T00:12:29.347
> 
> 标签：asp.net, asp.net-mvc, iis, iis-7, windows-server-2008

我有一个虚拟服务器（8gb ram，windows server 2008 64bit，x5650 2.67ghz 的 2 个核心）我的客户有超过 35 个网站，每个网站（应用程序池）大约需要 80mb 到 150mb 之间。

我打算在这台服务器上托管更多网站，但是有一个内存限制..我测试了它并将 6 个网站放在同一个应用程序池中（具有相同 CMS 系统的网站），结果减少了 * 2内存

我考虑在同一个应用程序池中创建 5-20 个网站以托管更多网站的选项，但风险是什么？是不是太危险了？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T01:20:12.103

主要风险是当您的客户端过于频繁地更改其页面并且故意尝试给您的服务器造成问题时，或者因为是“糟糕的程序员”并且不释放资源并吃掉所有池内存。

例如，如果您在一个池下有 20 个站点，其中一个是试图使池崩溃，或者吃掉所有内存，或者通常是出于恶意，那么将对同一池下的所有站点造成问题.

因此，您需要监控池的运行状况、重启次数不多、内存不足等，以及所有客户端的正常运行。

也有用于 asp.net 的黑客工具，但我不想在这里提及并给出想法。现在，如果您的站点被他们感染，ether 因为您的客户故意运行它，ether 因为黑客上传它们 - 那么同一池下的所有站点都可以由其他站点的用户编辑。例如，站点 A 可以编辑存在于同一个池中的所有文件，这并不容易，但可以做到。

因此，要关闭，您需要进行备份，并监控您的用户活动是否存在不良行为。

# java - 如何让两个线程互相等待执行任务？

> ID：15605756
> 
> 赞同：0
> 
> 时间：2013-03-25T00:12:58.697
> 
> 标签：java, multithreading

在互联网上遇到一些问题时，我发现了这个。不知道如何解决这个问题。

我希望线程 1 首先运行并计算 foo 并等待，然后希望线程 2 运行并计算 foo，最后希望线程 1 继续并打印 foo 并完成执行。

我从过去 1 小时开始就在考虑它，但无法解决。任何帮助表示赞赏。谢谢。

```
public class ThreadTest {

    private static class Thread01 extends Thread {

        private Thread02 _thread02; 
        public int foo = 0;

        public void setThread02(Thread02 thread02) {
            _thread02 = thread02;
        }

        public void run() {

            try {
                for (int i = 0; i < 10; i++) foo += i;
                synchronized (this) { this.notify(); }
                synchronized (_thread02) { _thread02.wait(); }
                System.out.println("Foo: " + _thread02.foo);
            } catch (InterruptedException ie) { ie.printStackTrace(); }
        }
    }

private static class Thread02 extends Thread {

        private final Thread01 _thread01; public int foo = 0;

        public Thread02(Thread01 thread01) {
            _thread01 = thread01;
        }

        public void run() {

            try {
                synchronized (_thread01) { _thread01.wait(); }
                foo = _thread01.foo;
                for (int i = 0; i < 10; i++) foo += i;
                synchronized (this) { this.notify(); }
            } catch (InterruptedException ie) { ie.printStackTrace(); }
        }
    }

    public static void main(String[] args) throws Exception {

        Thread01 thread01 = new Thread01();
        Thread02 thread02 = new Thread02(thread01);
        thread01.setThread02(thread02);

        thread01.start(); 
        thread02.start();
        thread01.join();
        thread02.join();
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T00:22:13.207

没有看太多你的代码，我认为它是这样工作的：

线程 1 计算 foo，创建并启动线程 2。线程 1 调用`thread2.join()`. 这使线程 1 被挂起，直到线程 2 完成。然后继续 Thread 1 的最终代码。

无需通知，只需一个简单的`join()`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T11:40:41.180

像这样的通知/等待代码的一种替代方法是使用`BlockingQueue`like [`LinkedBlockingQueue`](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/LinkedBlockingQueue.html)。使用 2`BlockingQueue`秒，两个线程可以相互等待并来回传递消息，而无需编写所有可能复杂且充满错误的等待和通知代码。

# android - 谷歌地图时间表应用

> ID：15605758
> 
> 赞同：1
> 
> 时间：2013-03-25T00:13:22.617
> 
> 标签：android, json, icalendar

基本上，我正在尝试制作一个应用程序，它可以获取学生的时间表并将其转换为我的大学校园地图，其中的符号说明了在特定时间的位置，所有这些都在谷歌地图上进行了说明。您的手机上应该有一个 GPS 跟踪器，以及您的下一堂课所在的建筑物的标志。

问题是我很难理解为每个学生获取信息的想法，因为他们是我大学里大约 20000 名学生。[您可以通过点击此链接http://tt.daniel.ie/](http://tt.daniel.ie/)并使用我的 ID 号 11108215获得更好的理解。 基本上我想在绘制之前临时存储每节课的时间和上课的建筑物建筑物在我的地图上的位置。所有的一切都是为每个学生做的

现在我一直在关注新的 Boston Tuts，到目前为止这确实很有帮助，但他开始使用 JSON 从 twitter 获取诸如“最后推文”之类的信息。我不知道从长远来看这是否有用，以及 JSON 是否适用于我正在寻找的东西。他还使用了一个 URL“ [http://api.twitter.com/1/statuses/user_timeline.json?screen_name=mybringback](http://api.twitter.com/1/statuses/user_timeline.json?screen_name=mybringback) ”，mybringback（最后）指的是他的用户名（尽管这对任何用户名都有效）。我在上面给出的网站的 URL（时间表）是什么，或者它甚至可以在这种情况下使用。另一种可能的前进方式是从时间表网站下载 ICal 文件（它在下面提供了输入 ID 号的选项），但我真的不知道从哪里开始。

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T09:00:05.263

您可以使用的是`location`icalendar 文件的属性以及该`geo`属性。

您的 icalendar 文件可能仅填充，`location`但是一旦您拥有每个教室的 GPS 坐标，您就可以使用存储在`geo`属性中的 GPS 坐标来增强 icalendar。

一旦你拥有了`geo`房产，GPS 就可以给出从 A 到 B 的方向。

# java - 基于其在Java中的位置替换html标签的正则表达式

> ID：15605759
> 
> 赞同：0
> 
> 时间：2013-03-25T00:13:28.880
> 
> 标签：java, regex, string

```
<p>some text is hrere</p>

<pre>
    <p> some more text is here </p>
</pre>

<p> some other text is here </p> 
```

在上面的示例字符串中，我想用 tag 替换标签`<p> and </p>`外的`<pre>`标签，用. java中这个的正则表达式是什么？`<br/>``<p> and </p>``<pre>``\n`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T00:15:46.830

这已经说过很多次了：[不要使用正则表达式来操作 HTML](http://www.codinghorror.com/blog/2009/11/parsing-html-the-cthulhu-way.html)。

将您的 HTML 解析为 DOM 树 - 如果它是 XHTML 尤其容易 - 并以这种方式操作它。

不要这样做。

# php - PHP 联系表 - 回复

> ID：15605760
> 
> 赞同：0
> 
> 时间：2013-03-25T00:13:52.397
> 
> 标签：php, forms

我查看了有关 PHP 联系表单的其他问题并尝试了不同的选项，但似乎没有任何效果，所以这是我的代码。我无法通过回复来接收 sumbitter 电子邮件。作为回复，我得到：$email@hn02.wiroos.com（wiroos 是托管公司名称），其他一切正常。

表格：

```
<form action="procesar_form.php" method="post" name="formulario" id="formulario" onsubmit='return validarFormulario()'>
        <label for="nombre">Nombre </label>
        <input type="text" name="nombre" id="nombre" size="60"/>

        <label for="apellido">Apellido </label>
        <input type="text" name="apellido" id="apellido" size="60"/>

        <label for="email">Email </label>
        <input type="text" name="email" id="email" size="60"/>

        <label for="comentarios">Comentarios</label>
        <textarea name="comentarios" id="comentarios" cols="44" rows="10"></textarea>

        <input type="button" name="enviar" id="enviar" value="Enviar" onclick="validarFormulario()" /></textarea>

</form> 
```

PHP代码：

```
$to      = 'elunicotomas@gmail.com';
$subject = 'Contacto PowerFitness';
$message = 'Nombre: ' . $_REQUEST['nombre'] . "\r\n" .
            'Apellido: ' . $_REQUEST['apellido'] . "\r\n" .
            'Email: ' . $_REQUEST['email'] . "\r\n" .
            'Comentarios: ' . $_REQUEST['comentarios'];
$headers = 'From: Contacto PowerFitness pedidos@powerfitness.com.ar' . "\r\n" .
    'Reply-To: pedidos@powerfitness.com.ar' . "\r\n" .
    'X-Mailer: PHP/' . phpversion();

mail($to, $subject, $message, $headers);

header("Location: ../../index.html"); 
```

我向我的地址（来自表格）发送了一封电子邮件，因此我可以看到电子邮件来源，这里是：

```
> Delivered-To: elunicotomas@gmail.com Received: by 10.60.132.7 with
> SMTP id oq7csp23527oeb;
>         Sun, 24 Mar 2013 17:57:27 -0700 (PDT) X-Received: by 10.236.160.195 with SMTP id u43mr5762986yhk.104.1364173047442;
>         Sun, 24 Mar 2013 17:57:27 -0700 (PDT) Return-Path: <nobody@hn02.wiroos.com> Received: from hn02.wiroos.com
> (hn02.wiroos.com. [199.115.114.195])
>         by mx.google.com with ESMTPS id h65si7425664yhk.272.2013.03.24.17.57.27
>         (version=TLSv1 cipher=RC4-SHA bits=128/128);
>         Sun, 24 Mar 2013 17:57:27 -0700 (PDT) Received-SPF: pass (google.com: best guess record for domain of nobody@hn02.wiroos.com
> designates 199.115.114.195 as permitted sender)
> client-ip=199.115.114.195; Authentication-Results: mx.google.com;
>        spf=pass (google.com: best guess record for domain of nobody@hn02.wiroos.com designates 199.115.114.195 as permitted sender)
> smtp.mail=nobody@hn02.wiroos.com Received: from nobody by
> hn02.wiroos.com with local (Exim 4.80)    (envelope-from
> <nobody@hn02.wiroos.com>)     id 1UJvj2-0002cx-SK     for
> elunicotomas@gmail.com; Sun, 24 Mar 2013 21:57:25 -0300 To:
> elunicotomas@gmail.com Subject: Contacto PowerFitness X-PHP-Script:
> powerfitness.com.ar/contacto/procesar_form.php for 200.70.31.20 From:
> Contacto PowerFitness pedidos@powerfitness.com.ar Reply-To:
> $email@hn02.wiroos.com X-Mailer: PHP/5.3.21 Message-Id:
> <E1UJvj2-0002cx-SK@hn02.wiroos.com> Date: Sun, 24 Mar 2013 21:57:24
> -0300 X-AntiAbuse: This header was added to track abuse, please include it with any abuse report X-AntiAbuse: Primary Hostname -
> hn02.wiroos.com X-AntiAbuse: Original Domain - gmail.com X-AntiAbuse:
> Originator/Caller UID/GID - [99 32007] / [47 12] X-AntiAbuse: Sender
> Address Domain - hn02.wiroos.com X-Get-Message-Sender-Via:
> hn02.wiroos.com: uid via acl_c_vhost_owner from authenticated_id:
> nobody from /only user confirmed/virtual account not confirmed
> X-Source:  X-Source-Args: /usr/local/apache/bin/httpd -k start -DSSL 
> X-Source-Dir: powerfitness.com.ar:/public_html/contacto
> 
> Nombre: Tomas Apellido: Perez Ponisio Email: elunicotomas@gmail.com
> Comentarios: 132465 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T00:36:31.940

请尝试以下操作：

1) 使用 \n 而不是 \r\n。也许您的主机正在使用 linux 分隔符，只是无法识别 Windows 回车。

2）如果这不起作用，请尝试将“回复”的大小写更改为“回复”。一些邮件服务器区分大小写

3）如果这也不起作用，请使用您的表单发送电子邮件，当您收到它时，打开电子邮件的来源，并检查包含的标题，并将它们张贴在这里以查看您的邮件服务器的实际情况识别您尝试使用的标题。

# mysql - 导入mysql数据库

> ID：15605762
> 
> 赞同：-1
> 
> 时间：2013-03-25T00:13:56.350
> 
> 标签：mysql

我正在尝试在我的 sql 中导入一个数据库，我有一个数据库，它的名称`a`在 mysql 中，数据库的名称是`a.sql`. 我正在尝试运行命令：

```
/var/lib/mysql -u root -p a < a.sql; 
```

但我得到了错误：

```
ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '/var/lib/mysql -u root -p a < a.sql' at line 1 
```

我应该准确地写下mysql的路径，比如：

```
/var/lib/mysql -u root -p a < /home/guest/db/a.sql; 
```

我也尝试过这个，但我遇到了同样的错误。我搜索了很多并尝试了所有内容，但仍然遇到同样的错误。

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T00:16:45.123

如果您已经在 mysql 控制台中，请使用

```
source /home/guest/db/a.sql; 
```

如果你在 unix shell - 使用你想要使用的东西。

出现当前错误是因为您在 mysql shell 中运行 unix shell 命令。

# curl - 使用 cURL 将数据发布到 Web 表单

> ID：15605766
> 
> 赞同：0
> 
> 时间：2013-03-25T00:14:26.757
> 
> 标签：curl

我正在尝试使用 cURL 将数据发布到此 URL 上的表单：

```
http://www.yougetsignal.com/tools/web-sites-on-web-server/ 
```

尝试使用以下值 curl ：

```
curl -d "remoteAddress=google.com&submit=Check" http://www.yougetsignal.com/tools/web-sites-on-web-server/ 
```

我怎样才能正确地将请求发送到服务器？

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T00:35:27.220

您引用的 URL 中的表单不使用 HTTP POST，因此无法使用 curl（或任何其他 HTTP POST 工具）来获得您期望的结果。

此表单上的提交按钮会触发 AJAX 请求以 POST 变量`remoteAddress`和`key`URL [http://www.yougetsignal.com/tools/web-sites-on-web-server/php/get-web-sites-on-网络服务器-json-data.php](http://www.yougetsignal.com/tools/web-sites-on-web-server/php/get-web-sites-on-web-server-json-data.php)。然后使用此 URL 中的 JSON 修改原始页面上的数据。

[请参阅位于http://www.yougetsignal.com/tools/web-sites-on-web-server/js/tool.js](http://www.yougetsignal.com/tools/web-sites-on-web-server/js/tool.js)`reverseIpDomainCheck`的脚本文件中的函数。

您可以尝试使用 curl 发布到此 URL，但我的一次尝试返回零数据。该网站的作者可能会验证 的价值，`key`以防止随机个人直接使用该工具。可以联系作者看看需要什么值`key`。

# vb.net - 从闪存驱动器错误中提取文件

> ID：15605767
> 
> 赞同：2
> 
> 时间：2013-03-25T00:14:28.633
> 
> 标签：vb.net

嘿，我正在尝试使用 EnumerateFiles 函数，但是当我尝试运行我的程序时，它说：***错误 BC30616：变量 'e' 在封闭块中隐藏了一个变量***

有人可以帮忙吗？非常感谢！

```
Imports System.IO

Public Class frmExtractionator

    Private Sub btnStart_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btnStart.Click

        Dim sourceDirectory As String = "F:\CopierFolderforTestDriveCapstone"
        Dim archiveDirectory As String = "F:\FilesExtracted"

        Try
            Dim txtFiles = Directory.EnumerateFiles(sourceDirectory)

            If(Not System.IO.Directory.Exists(archiveDirectory )) Then
                System.IO.Directory.CreateDirectory(archiveDirectory)
            End If

            For Each currentFile As String In txtFiles
                Dim fileName = currentFile.Substring(sourceDirectory.Length + 1)
                File.Move(currentFile, Path.Combine(archiveDirectory, fileName))
            Next
        Catch eT As Exception
            Console.WriteLine(eT.Message)
        End Try

    End Sub
End Class 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T00:16:46.017

**试试这个改变**

**原因变量：e 被使用了两次**

```
Catch eT As Exception
    Console.WriteLine(eT .Message)
End Try 
```

***e*已经在哪里使用了？**

> btnStart_Click(ByVal sender As System.Object, ByVal **e** As System.EventArgs)

**更新：** 关于您的疑问：

```
 Directory.Move(currentFile, Path.Combine(archiveDirectory, fileName)) 
```

我认为您正在尝试移动文件而不是目录，对吗？

改用 `File.Move` ，记得创建`archiveDirectory`

**update2：** 之前将其添加到您的代码中`For Each`

```
If(Not System.IO.Directory.Exists(archiveDirectory )) Then
    System.IO.Directory.CreateDirectory(archiveDirectory )
End If 
```

# php - PHP mcrypt_decrypt 随机失败

> ID：15605768
> 
> 赞同：1
> 
> 时间：2013-03-25T00:14:55.053
> 
> 标签：php, encryption, mcrypt

我正在努力使用 PHP 的 mcrypt 函数。我以前从未使用过它们，它们在我的测试服务器（WAMP PHP 5.4.3）上运行良好，但它们在生产服务器（LAMP PHP 5.2.17）上随机失败。当我运行解密函数时，我得到如下随机（二进制？）字符：n��/�=�C_����+`�n{'a��6�Xh��fEe41Omk7DjQ6/n6leoTg==。

下面是加密和解密函数。这些来自我一直在使用的[nonce 类。](https://github.com/greatwitenorth/php-nonce/blob/master/nonce.php)

我尝试过的事情：

*   从两个函数中删除 IV 参数
*   在加密函数中创建一个 IV，存储在类属性中，然后在解密函数中使用该属性
*   [如此处所述](https://stackoverflow.com/a/2605400/931860)，将IV 存储在加密输出中。

还有什么我应该尝试的吗？

```
private function fnEncrypt($sValue)
{
return trim(
  base64_encode(
    mcrypt_encrypt(
      MCRYPT_RIJNDAEL_256,
      hash($this->hash, $this->secret, true), $sValue,
      MCRYPT_MODE_ECB,
      mcrypt_create_iv(
        mcrypt_get_iv_size(
          MCRYPT_RIJNDAEL_256,
          MCRYPT_MODE_ECB
        ),
        MCRYPT_RAND
      )
    )
  )
);
}

private function fnDecrypt($sValue)
{
return trim(
  mcrypt_decrypt(
    MCRYPT_RIJNDAEL_256,
    hash($this->hash, $this->secret, true),
    base64_decode($sValue),
    MCRYPT_MODE_ECB,
    mcrypt_create_iv(
      mcrypt_get_iv_size(
        MCRYPT_RIJNDAEL_256,
        MCRYPT_MODE_ECB
      ),
    MCRYPT_RAND
    )
  )
);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T01:52:45.703

在这个问题上用头撞墙几个小时后，我意识到这个问题与 mcrypt 没有任何关系。在将其输出到查询字符串中之前，我只需要`urlencode`加密字符串。

`$_REQUEST`当我稍后尝试对加密字符串进行解密时，这导致部分加密字符串丢失。这就解释了为什么失败是随机的，因为它取决于加密字符串中的“特殊”字符。

# linux - vim 远程编辑：ftpplugin 或远程 vim over ssh

> ID：15605770
> 
> 赞同：3
> 
> 时间：2013-03-25T00:15:15.730
> 
> 标签：linux, vim

我是 vim 的新手。并且对编辑远程文件有点困惑。它具有内置的 ftp 插件，也安装在远程服务器上。我应该走哪条路？我注意到使用 ftpplugin 保存和浏览速度较慢，但​​编辑和导航显然更快。但我不知道哪种方式总体上更好。

（如果答案是使用本地 vim，那么我应该挂载远程文件夹还是使用 ftpplugin？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T00:49:04.957

*   如果我只想更改一个文件，然后我的工作就完成了。我会去：（`vim scp://...` 使用 ssh 密钥认证）

*   如果我需要更改许多文件，然后在该服务器上执行一些其他操作。例如文件操作（cp、mv...）或一些服务器管理（apache/jboss/..启动、重新启动...）我会通过 ssh 进入服务器。

*   如果我需要直接在远程服务器上进行一些编程（很少发生），我也会通过 ssh 连接到服务器。

*   如果您的本地计算机上仍然存在挂载，那么为什么不直接使用它呢？

PS 可能与您的问题无关，但我会提到，如果您 ssh 进入远程服务器并工作，screen/tmux 会对您有很大帮助！

祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T00:19:34.157

我会说这是个人喜好。Vim over ssh 对我来说一直运行良好，尽管在高延迟连接上可能不是一个好主意，例如卫星链接或蹩脚的 wi-fi。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T00:32:19.303

我最终安装了我的外部服务器，然后在本地使用 vim。是的，保存时会有一点延迟，但实际上并没有那么慢。此外，拥有所有可用的绑定、插件和主题确实使选择变得显而易见。

# r - 如何有效地推断多个变量的缺失数据

> ID：15605772
> 
> 赞同：3
> 
> 时间：2013-03-25T00:15:40.243
> 
> 标签：r, time-series, linear-regression, missing-data

我有面板数据，并且在某些年份之前，许多变量都缺少观察结果。年份因变量而异。什么是推断多列中缺失数据点的有效方法？我正在考虑一些简单的事情，例如从线性趋势推断，但我希望找到一种有效的方法将预测应用于多个列。下面是一个与我正在处理的缺失相似的示例数据集。在此示例中，我希望使用使用每列中观察到的数据点计算的线性趋势来填写“国民 GDP”和“国民预期寿命”变量中的 NA 值。

```
###Simulate National GDP values
set.seed(42)
nat_gdp <- c(replicate(20L, {
  foo <- rnorm(3, mean = 2000, sd = 300) + c(0,1000,2000) 
  c(NA,NA,foo)}))
###Simulate national life expectancy values

nat_life <- c(replicate(20L, {
  foo <-  rnorm(2, mean = 55, sd = 7.8) + c(0,1.5)
  c(NA,NA,NA,foo)}))

###Construct the data.table       
data.sim <- data.table(  GovernorateID = c(rep(seq.int(11L,15L,by=1L), each = 20)), 
                         DistrictID =rep(seq.int(1100,1500,by=100),each=20 ) + rep(seq_len(4), each = 5), 
                         Year = seq.int(1990,1994,by=1L),
                         National_gdp =  nat_gdp   , 
                         National_life_exp =    nat_life  ) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T01:44:20.477

我假设您想`DistrictID`分别对每个模型进行线性模型。

原始数据表：

```
head(data.sim)
##    GovernorateID DistrictID Year National_gdp National_life_exp
## 1:            11       1101 1990           NA                NA
## 2:            11       1101 1991           NA                NA
## 3:            11       1101 1992     1988.746                NA
## 4:            11       1101 1993     2527.619          54.70739
## 5:            11       1101 1994     3854.210          44.21809
## 6:            11       1102 1990           NA                NA

dd <- copy(data.sim) # Make a copy for later. 
```

`NA`用线性模型的预测替换每个元素中的元素。一个链式操作中的两个步骤。

```
data.sim[, National_life_exp := ifelse(is.na(National_life_exp), 
                                       predict(lm(National_life_exp ~ Year, data=.SD), .SD),
                                       National_life_exp)
         , by=DistrictID
         ][, National_gdp := ifelse(is.na(National_gdp),
                                    predict(lm(National_gdp ~ Year, data=.SD), .SD),
                                    National_gdp) 
           , by=DistrictID
        ]

head(data.sim)
##    GovernorateID DistrictID Year National_gdp National_life_exp
## 1:            11       1101 1990    -8.004377          86.17531
## 2:            11       1101 1991   924.727559          75.68601
## 3:            11       1101 1992  1988.745871          65.19670
## 4:            11       1101 1993  2527.618676          54.70739
## 5:            11       1101 1994  3854.209743          44.21809
## 6:            11       1102 1990  1008.886661          70.45643 
```

一个不错的（？）情节。请注意，`DistrictID`在此示例中，每个级别恰好有两个非 NA 点。

```
plot(data.sim$National_life_exp)
points(dd$National_life_exp, col='red') # The copy from before. 
```

![在此处输入图像描述](../Images/09c43a1eca01812917404492cb4f3d94.png)

# ruby-on-rails - 使用 minitest 创建存根的正确方法是什么？

> ID：15605776
> 
> 赞同：1
> 
> 时间：2013-03-25T00:15:54.137
> 
> 标签：ruby-on-rails, minitest

我在为正在运行的测试创建存根时遇到问题`minitest (4.7.0)`。我从以前的 SO 问题中研究过的内容尝试了以下内容，但它不起作用：

**测试/模型/book_test.rb**

```
Book.stub :title, "War and Peace" do
  book = Book.new
  book.title.must_equal "War and Peace"
end 
```

**错误**

```
NameError: undefined method 'title' for `Book' 
```

**应用程序/模型/book.rb**

```
class Book  
 #I tried adding the following according to the github readme but it doesn't work:
 #def title.fake_method
 #end
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T04:20:27.807

您尝试在示例中存根的内容/原因对我来说并不完全合理，但是以下内容将起作用，并且似乎涵盖了您所追求的测试。

```
require 'minitest/autorun'

class StubbedBook
  def title
    "War and Peace"
  end
end

class BookTest < MiniTest::Unit::TestCase
  def test_title_is_war_and_peace
    book = StubbedBook.new
    assert_equal book.title, "War and Peace"
  end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T15:07:56.007

恕我直言，这将是工厂而不是存根的好地方的一个例子。

# 假设 Rails 3.2、ruby 1.9 和 bundler

将 factory-girl-rails gem 添加到您的 Gemfile。

创建工厂：

```
# test/factories/book_factory.rb
FactoryGirl.define do 
  factory :book do 
    title "book title"
  end
end 
```

在您的单元测试之前的操作（或设置）中。

```
before do 
  @book = FactoryGirl.build(:book)
end 
```

或者，如果您想要自定义标题：

```
before do 
  @book = FactoryGirl.build(:book, title: "random title")
end 
```

然后你可以在你的测试中使用这个实例变量。

请注意，如果您愿意，也可以在您的个人测试中使用 FactoryGirl.(build/create)。此外，如果您执行之前的任务，那么最好的做法是删除您使用之后（或拆卸）测试创建的内容。

# python - 如何测试金字塔变色龙模板？

> ID：15605778
> 
> 赞同：3
> 
> 时间：2013-03-25T00:16:20.730
> 
> 标签：python, templates, testing, pyramid, chameleon

我知道如何使用以下方法对我的视图进行单元测试：

```
class ViewsTests(unittest.TestCase):

    def setUp(self):
        request = DummyRequest()
        self.config = setUp(request=request)

    def tearUp(self):
        tearUp()

    def test_home(self):
        request = DummyRequest()
        inst = MyView(request)
        result = inst.View1()
        self.assertEqual(result['page_title'], 'Test') 
```

问题在于它不会测试我的 Chamelon 模板。有时，.pt 文件中出现拼写错误，而我的视图测试无法捕捉到它们。

我想我可以使用 webtest 进行集成测试，但有时很难点击所有代码路径来尝试通过请求 URL 来呈现我的所有模板......

有没有一种简单的方法可以测试模板本身以确保它们呈现正常？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T21:09:18.333

集成测试似乎是最好的方法，以确保您在实际呈现的场景中获得所需的内容。

你可以做的是填充模拟值，渲染模板，然后在生成的视图上运行断言。

因此，对于您的“主页”视图，您将按照单元测试的预期使用“测试”填充“页面标题”，并首先检查模板是否呈现，然后确保视图的 HTML 或内容符合预期。

# ios - NSPredicate 搜索具有 nil 值的连接表

> ID：15605779
> 
> 赞同：1
> 
> 时间：2013-03-25T00:16:25.467
> 
> 标签：ios, objective-c, sqlite, nspredicate

我正在一个名为`Todolists`. `Todolists`有`todos`。

我正在尝试获取所有确定的`Todolists`地方或所在`due_at (Date)`的地方。`<=``Date``due_at Date``nil`

以下谓词可以正常工作，并且可以获取某个日期之前的所有`Todolists`位置。`Todos`

```
NSDate *now = [NSDate date];
int daysToAdd = _dueDateSlider.intValue;
NSDate *datePeriod = [now dateByAddingTimeInterval:60*60*24*daysToAdd];
NSPredicate *pred = [NSPredicate predicateWithFormat:@"ANY todos.due_at <= %@", datePeriod]; 
```

但是，以下`NSPredicate`搜索会返回所有结果，即使有些有 a 有`due_at Date`一些是`nil`。

```
NSPredicate *pred = [NSPredicate predicateWithFormat:@"ANY todos.due_at = nil"]; 
```

当我搜索表时，它`due_at = nil`似乎工作正常，但在连接搜索中执行时却不行。`NSPredicate``Todos`

目标是完成这项工作：

```
NSPredicate *pred = [NSPredicate predicateWithFormat:@"ANY todos.due_at <= %@ OR todos.due_at = nil", datePeriod]; 
```

如何谓词搜索连接表中的 nil 值？

=======更新======

我试图用它作为我的谓词：

```
NSPredicate *pred = [NSPredicate predicateWithFormat:@"(todos.due_at <= %@) || (todos.due_at = nil)", datePeriod]; 
```

但这会导致此错误：

```
-[__NSArrayI compare:]: unrecognized selector sent to instance 0x1001e36b0 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T01:25:11.153

我最终在通过运行 fetchRequest 返回的 NSArray 上运行 NSPredicate。

```
// get all todolists from database
NSArray *todolists = [managedObjectContext executeFetchRequest:request error:&error];

// then filter using ALL and ANY
todolists = [todolists filteredArrayUsingPredicate:[NSPredicate predicateWithFormat:@"(ANY todos.due_at <= %@) || (ALL todos.due_at = nil)", datePeriod]]; 
```

# ruby - Errno::ENOENT: 没有这样的文件或目录 ruby

> ID：15605782
> 
> 赞同：22
> 
> 时间：2013-03-25T00:16:26.643
> 
> 标签：ruby

我收到以下错误：

```
"Errno::ENOENT: No such file or directory" 
```

当我尝试将文件下载到不存在的目录中时。

例如：

```
ftp = Net::FTP.new('example.com')
ftp.login
files = ftp.chdir('pub/lang/ruby/contrib')
files = ftp.list('n*')
ftp.getbinaryfile('nif.rb-0.91.gz', 'pub/lang/ruby/contrib/nif.gz', 1024)
ftp.close 
```

但是，对于我将下载的许多文件，完整的目录路径将不存在。例如，在第一个文件创建 pub 之前，它不会存在，这也适用于 lang/ruby/contrib。

有没有一种方法可以检查目录是否存在，如果不创建它们？我知道存在吗？，但这看起来是参考文件，它不会创建完整路径。我想我需要一些递归方法来遍历文件夹结构，直到找到文件名。

编辑： mkdir_p 似乎正是我需要的解决方案。

但是，当我使用“/a/b/c”路径时，我注意到 FileUtils.mkdir_p(File.dirname(localdir)) 返回错误： Errno::EACCES: Permission denied - /a

如果我手动删除前面的“/”，它就可以工作。这是什么原因造成的？解决错误的最佳解决方案是什么？我应该只使用以下内容吗？

```
 path="/a/b/c"
 if path[0]="/"
    path=path[1..-1]
 end 
```

但是，我觉得这只是一个黑客。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-03-25T03:03:47.540

您无法保存到不存在的路径。作为开发人员，您有责任在尝试保存文件之前确保目标路径存在。

Ruby 有一些方法可以让您检查文件或目录是否存在：

*   [File.exist?('path/to/file')](http://www.ruby-doc.org/core-2.0/File.html#method-c-exist-3F)
*   [File.file?('path/to/file')](http://www.ruby-doc.org/core-2.0/File.html#method-c-file-3F)
*   [File.directory?('path/to/file')](http://www.ruby-doc.org/core-2.0/File.html#method-c-directory-3F)
*   [Dir.directory?('path/to/dir')](http://www.ruby-doc.org/core-2.0/Dir.html#method-c-exist-3F)
*   [dir.mkdir('路径/到/目录')](http://www.ruby-doc.org/core-2.0/Dir.html#method-c-mkdir)
*   [FileUtils.makedirs('path/to/dir')](http://ruby-doc.org/stdlib-1.9.3/libdoc/fileutils/rdoc/FileUtils.html#method-c-makedirs)

`FileUtils.makedirs()`是`mkpath`, 和的别名`mkdir_p`。我更喜欢`makedirs`，因为它是一个助记符。

这些也很有用：

*   [dir.chdir('路径/到/目录')](http://ruby-doc.org/core-2.0/Dir.html#method-c-chdir)
*   [FileUtils.chdir('路径/到/目录')](http://ruby-doc.org/stdlib-2.0/libdoc/fileutils/rdoc/FileUtils.html#method-c-chdir)

在这两者之间我更喜欢`Dir.chdir`，因为它需要一个块。该块内发生的任何操作都发生在您更改到的目录中。退出时，目录恢复到以前的状态。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-07-01T18:56:34.357

*nix mkdir -p, mkdir_p 的模拟是您需要的，在其他两个答案中提供了，但我没有看到有人解决您对权限的编辑。

解决方案是调用您的脚本的用户需要对根目录的写入权限。

路径“/a/b/c”正在寻址根路径（“/”）。这通常只能对 root 用户或具有 sudo 访问权限的用户进行写访问。

当您修改路径以删除前导“/”时，您告诉 mkdir_p 创建相对于当前工作目录而不是相对于根目录的目录“a/b/c”。修改后的版本有效的原因是调用您的 ruby​​ 脚本的用户对当前工作目录具有写权限。

就个人而言，如果您的脚本的使用者正在提供路径输入，那么您可能不想删除前导斜杠，因为这可能会在与用户期望的完全不同的位置创建文件/目录......除非那是你的程序的目的，但要事先明确。

参考：

*   [*nix 风格的权限](https://www.linux.com/learn/tutorials/309527-understanding-linux-file-permissions)
*   [须藤](http://linux.die.net/man/8/sudo)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-10-29T02:58:01.657

我来到这里是因为我安装了 gem，但机器上没有安装该文件。就我而言，我安装了 gem `espeak-ruby`gem，但它没有安装在我的 mac 上，所以我用简单`brew install espeak`的命令安装了它并重新启动了服务器。我给你的建议是我们确保一切都安装正确。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-25T00:19:33.963

在 fileutils 模块中，您可以使用[`mkdir_p`](http://ruby-doc.org/stdlib-1.9.3/libdoc/fileutils/rdoc/FileUtils.html#method-c-mkdir_p)类似于`mkdir -p`创建完整路径的命令（如果它尚不存在）。

# javascript - JSON对象中的访问字符串

> ID：15605787
> 
> 赞同：0
> 
> 时间：2013-03-25T00:17:00.647
> 
> 标签：javascript, asp.net, ajax, wcf

我正在使用 javascript 访问以下 WCF Ajax Web 服务。

```
[OperationContract]
    public string Test()
    {
        return "test";
    } 
```

我正在使用下面的 javascript 来执行该方法并将一个按钮连接到该函数。

```
<asp:ScriptManager ID="ScriptManager1" runat="server">
<Services>
    <asp:ServiceReference Path="~/AjaxService.svc" />
</Services>
</asp:ScriptManager>

<script type="text/javascript">
function TestFunction() {
    alert(JSON.stringify(AjaxService.Test()));
}
</script> 
```

现在，当我运行代码时，警报显示未定义。但是，当我签入 firebug 时，我可以看到 Webmethod 实际上工作正常。我收到 {"d":"test"} 的 http 响应。

如何访问我从 javascript 中的 Ajax Web 方法返回的字符串？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T00:27:07.413

首先，尝试使用 jQuery 进行 JSON 解码以支持多种浏览器，例如：

```
<script type="text/javascript" src="http://code.jquery.com/jquery-1.9.1.min.js"></script> 
```

然后您可以使用以下方法解码 JSON 字符串：

```
var response = $.parseJSON(AjaxService.Test());
alert(response['d']); // This should show 'test' 
```

# hadoop - 使用 hive 执行挂钩来检索从查询返回的行数？

> ID：15605792
> 
> 赞同：1
> 
> 时间：2013-03-25T00:17:39.647
> 
> 标签：hadoop, hive

我需要使用后执行挂钩捕获从 Hive 查询返回的行数。我一直在 HiveHistoryViewer 文档中四处寻找，并认为计数可能在 HiveHistory.QueryInfo.rowCountMap 字段中，但是当我在我的开发环境中运行测试查询时，它似乎没有被填充。

谁能指出我正确的方向？谢谢！

# c# - 将以编程方式生成的 DataGridTextColumn 的 Visibility 属性绑定到复选框

> ID：15605793
> 
> 赞同：4
> 
> 时间：2013-03-25T00:17:52.660
> 
> 标签：c#, wpf, binding, datagrid, visibility

我正在尝试将 DataGridTextColumn 的可见性属性绑定到组合框 (cbIP) 的 IsChecked 值。对于大多数列，我已经用这样的行解决了 XAML 中的问题：

```
<DataGridTextColumn Header="Time" Binding="{Binding MeasureTime}" Visibility="{Binding Source={x:Reference cbMeasureTime}, Path=IsChecked, Converter={StaticResource BoolToVisConverter}}"></DataGridTextColumn> 
```

但是，某些列所考虑的值基于不同长度的数组（因此列数也不同）。这我在后面的代码中创建没有问题。唯一的问题是可见性属性。我已经走到这一步了：

```
private void Page_Loaded_1(object sender, RoutedEventArgs e)
        {
            for (int i = 0; i < ds.NumberOfIPValues; i++)
            {
                DataGridTextColumn col = new DataGridTextColumn() { Header = String.Format("IP #{0} (mV/V)", i + 1) };
                col.Binding = new Binding(String.Format("IP[{0}]",i));

                Binding b = new Binding("Visibility");
                b.Source = cbIP;
                b.Path = new PropertyPath(typeof(CheckBox).GetProperty("IsChecked"));
                b.Converter = new BoolToVisibilityConverter();

                BindingOperations.SetBinding(col, DataGridTextColumn.VisibilityProperty, b);

                ViewInTableDataGrid.Columns.Add(col);              
            }          
        } 
```

不用说，它不起作用。我看到了列，但复选框不起作用。（它适用于 XAML 生成的列。

我做错了什么？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-13T05:22:16.577

我以另一种方式工作-> 试试这个，其中列列表用于生成复选框，然后切换可见性..

```
<ItemsControl ItemsSource="{Binding Path=Columns, ElementName=dgSearchResult, NotifyOnTargetUpdated=True, NotifyOnSourceUpdated=True}" >
   <ItemsControl.ItemTemplate>
      <DataTemplate >
         <Grid>
          <Grid.ColumnDefinitions>
            <ColumnDefinition Width="Auto"/>
            <ColumnDefinition Width="5"/>
            <ColumnDefinition Width="Auto"/>
          </Grid.ColumnDefinitions>
             <CheckBox Content="{Binding Path=Header}" IsChecked="{Binding Path=Visibility, NotifyOnTargetUpdated=True, NotifyOnSourceUpdated=True, Mode=TwoWay, Converter={StaticResource BooleanToHiddenConvertor}}" />
          </Grid>
     </DataTemplate>
  </ItemsControl.ItemTemplate> 
```

# android - 有没有办法让弹出窗口出现在不同的应用程序上？

> ID：15605796
> 
> 赞同：2
> 
> 时间：2013-03-25T00:18:24.357
> 
> 标签：android

当您触摸通知时，我正在制作一个应用程序，它会打开一个对话框活动，允许您写笔记。唯一的问题是，无论何时打开，当前应用程序都会消失。那么有没有办法让我的弹出窗口覆盖在以前的应用程序上？类似于股票消息应用程序处理快速响应选项的方式

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T00:50:22.470

您可以为您的活动使用“对话”主题之一。Theme.Dialog、Theme.Holo.Dialog 或 Theme.Holo.Dialog.NoActionBar 之一可能是您正在寻找的。您可以在 AndroidManifest.xml 中的相关标签上定义它。

```
<activity android:name="MyActivity" android:theme="@android:style/Theme.Holo.Dialog.NoActionBar">
   ...
</activity> 
```

显然，如果您的目标是 API 级别 11+ 或使用像 ActionBarSherlock 或 HoloEverywhere 这样的库来提供与旧 Android 版本的向后兼容性，您只会想要使用 Holo 变体。

所有 Android 的默认主题都[在此处](https://android.googlesource.com/platform/frameworks/base/+/refs/heads/master/core/res/res/values/themes.xml)定义。

# ios - iOS 故事板 - 具有多个子视图的容器

> ID：15605798
> 
> 赞同：1
> 
> 时间：2013-03-25T00:18:27.740
> 
> 标签：ios, storyboard

我正在使用情节提要重建 iPhone 应用程序，但找不到在单个视图中创建自定义选项卡控件的任何方法。我想做的是在情节提要中创建一个类似元素的容器，它可以有多个视图（例如 Tab 1 内容、Tab 2 内容……）。然后在代码中决定要显示哪个视图。它与选项卡视图控件非常相似，但在子视图中。这甚至可能还是我必须以编程方式进行？或者是否有人知道一种可以简化流程的方法（以便选项卡内容将在情节提要中完成并在代码中链接）

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T00:42:29.933

您可以添加容器视图作为主视图的子视图。它会自动连接一个带有嵌入segue的视图控制器。你可以删除你得到的默认控制器，拖出一个标签栏控制器，并使用嵌入segue将它连接到容器视图。我认为这应该给你你想要的。

# java - 我无法从 Servlet (Java EE) 获得真正的路径

> ID：15605800
> 
> 赞同：0
> 
> 时间：2013-03-25T00:18:37.920
> 
> 标签：java, tomcat, absolute-path, realpath

当我想在 Java EE 中获得真实路径时，请使用以下说明：

```
String rootPath = getServletConfig().getServletContext().getRealPath("/");
System.out.println(rootPath); 
```

结果是：C:\Users\saad\Desktop\pds.metadata.plugins\org.eclipse.wst.server.core\tmp0\wtpwebapps\Metier\

通常，我必须得到这个结果：

C:\用户\saad\桌面\pds\Metier\

任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T00:34:08.930

这是一个很好的例子，说明为什么“相对于应用程序的文件系统路径”的概念在 servlet 中确实没有意义。当 servlet 部署到容器中时，不能保证它驻留在真实的文件系统位置。servlet 容器可以选择直接从 .war 文件执行它而不扩展它，或者它可以从根本不受传统文件系统支持的 URL 读取应用程序代码。

在您的情况下，您返回的漫长路径正是 Eclipse 部署您的应用程序的位置。该路径*在该上下文中*是 100% 正确的，因为如果您查看该位置的文件系统，您会找到您的应用程序的副本，但显然不是您所期望的。

通常，不可能可移植地引用相对于您的应用程序的任何文件路径，因为该路径可能不存在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-19T07:44:20.387

Tomcat 目录 (tomcat/bin) 的路径：

```
File inputFile = new File("file.xml"); // tomcat_dir/bin/file.xml 
```

其他 Tomcat 目录的路径，例如“webapps”：

```
File inputFile = new File("../webapps/file.xml"); // tomcat_dir/webapps/file.xml 
```

摆脱绝对路径的好方法:)

# testing - 系统关闭时调用的 JUnit 测试方法

> ID：15605801
> 
> 赞同：2
> 
> 时间：2013-03-25T00:18:54.700
> 
> 标签：testing, methods, junit, call, shutdown

我需要确定一个类的特定方法在接收到终止信号时是否被调用。此方法执行一些清理操作，在关闭挂钩中调用。

我尝试使用 EasyMock 来期望在执行启动此类的 main 方法的 Process 之后调用此方法，然后调用 Process destroy 方法作为测试操作的一部分，但不知何故，此类的模拟未连接到我启动的进程.

如何测试在接收到关闭信号时调用类的方法？我想这样做而不必为了测试类而修改类的实现。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-25T12:14:42.403

JVM 负责执行已向其注册的关闭挂钩。由于您不是 JVM 的开发人员，因此您必须相信它正确地做到了这一点。因此，您需要测试您的关闭挂钩是否已注册。您可以通过检查`removeShutdownHook`. 但是有一个实际问题：您可能不想在 JUnit 退出时运行关闭挂钩，因此您不应该在单元测试代码中注册关闭挂钩。所以我认为你不能。

您可以做的最好的事情是对您的关闭挂钩使用的代码进行单元测试。

# c# - XNA 矩形交点问题

> ID：15605811
> 
> 赞同：0
> 
> 时间：2013-03-25T00:19:47.157
> 
> 标签：c#, xna, intersect

我是 XNA 的新手，我遇到了一个问题。我有一个按钮类，用于游戏开始屏幕上的按钮。我想这样做，以便当鼠标单击按钮时，布尔值 isClicked 设置为 true，然后您可以对按钮执行任何操作。但是，当我编译游戏时，我似乎不能直接点击按钮的矩形（或它应该在的位置），而是必须点击它的下方或上方，每次运行游戏时都会改变。

我有这个按钮类的代码：

```
class cButton
{
    Texture2D texture;
    public Vector2 position;
    public Rectangle rectangle;
    public Rectangle mouseRectangle;
    public Vector2 mousePosition;

    public cButton(Texture2D newTexture, Vector2 newPosition)
    {
        texture = newTexture;
        position = newPosition;

        rectangle = new Rectangle((int)position.X, (int)position.Y, texture.Width, texture.Height);
    }

    bool down;
    public bool isClicked;

    public void Update(MouseState mouse, GameTime gameTime)
    {

        mouseRectangle = new Rectangle(mouse.X, mouse.Y, 1, 1);
        mousePosition = new Vector2(mouse.X, mouse.Y);
        if (mouseRectangle.Intersects(rectangle))
        {    
            if (mouse.LeftButton == ButtonState.Pressed)// if mouse is on button
            {
                isClicked = true;
            }
            else 
            {                   
                isClicked = false;
            }
        }
    }

    public void Draw(SpriteBatch spriteBatch)
    {
        spriteBatch.Draw(texture, position, color);
    }
} 
```

}

游戏 1 类中用于绘制该按钮的代码：

```
 protected override void Draw(GameTime gameTime)
    {
        GraphicsDevice.Clear(Color.Black);

        switch (CurrentGameState)
        {
            case GameState.MainMenu:
                spriteBatch.Begin();
                spriteBatch.Draw(Content.Load<Texture2D>("Backgrounds/title"), new Rectangle(0, 0, screenWidth, screenHeight), Color.White);
                btnPlay.Draw(spriteBatch);

                spriteBatch.End(); 
                break;

        }
        base.Draw(gameTime);
    } 
```

我在想这可能与我为它设置的屏幕分辨率有关，代码在这里：

```
 //Screen Adjustments
    public int screenWidth = 1280, screenHeight = 720; 

        graphics.PreferredBackBufferWidth = screenWidth;
        graphics.PreferredBackBufferHeight = screenHeight; 
```

请帮忙，我不知道我做错了什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T01:02:33.840

[我相信这个问题应该可以帮助你。:)](https://stackoverflow.com/questions/9712932/2d-xna-game-mouse-clicking)

基本上，您创建一个点结构，并在按钮的矩形中调用 Contains 方法。它会告诉你点击是否在按钮上。

# python - Django ModelForm线程安全？

> ID：15605815
> 
> 赞同：0
> 
> 时间：2013-03-25T00:20:00.120
> 
> 标签：python, django, thread-safety, django-forms

我在这里失去理智。显然我在使用 Django 的 ModelForms 时遇到了线程安全问题，我不知道为什么。在下面的代码中，我将 _links_to_create 设置为 AddTaskForm 类的私有成员。我在视图中实例化**form = AddTaskForm(request.POST)**但每次额外调用时，_links_to_create 列表仍会被填充。有什么想法吗？

```
class AddTaskForm(forms.ModelForm):
    class Meta:
        model = Task
        fields = ('text', 'created_by', 'task_list',)

        widgets = {
            'created_by' : forms.HiddenInput(),
            'task_list' : forms.HiddenInput(),
            'text': forms.Textarea(attrs = {
                'class': 'autogrow', 
                'placeholder': 'Enter a task...',
                'maxlength' : 140
                }),
        }

    tags = forms.CharField(required = False, widget = PillAutoCompleteInput(
        format = '{key}:{id}:{value}', 
        attrs = {'placeholder' : 'Add people, lists, dates, etc...'}))   

    _links_to_create = []

    def __init__(self, *args, **kwargs):
        super(AddTaskForm, self).__init__(*args, **kwargs)

        print self.fields['tags'].widget.source

        self.fields['text'].label = False
        self.fields['task_list'].required = False
        self.fields['tags'].label = False
        self.fields['tags'].widget.source = reverse('smart-complete')

        # TODO, form was not resetting. This might be a possible thread safety issue
        print self._links_to_create
        #self._links_to_create = []

    def clean(self):

        user = self.cleaned_data['created_by']
        items = self.cleaned_data['tags'].split(';')

        task_lists = None
        team_members = None

        for item in items:
            if not item: continue

            key, id, value = item.split(':')

            if key == 'list':
                if not task_lists:
                    task_lists = TaskList.objects.get_all_lists_for_user(user).values_list('id', flat = True)

                id = int(id)
                if id in task_lists:
                    self.cleaned_data['task_list'] = TaskList.objects.get(id = id)

            elif key == 'user':
                if not team_members:
                    team_members = user.teams.get_members(implied = True).values_list('id', flat = True)

                id = int(id)
                if id in team_members:
                    self._links_to_create.append(id)

        return self.cleaned_data

    def save(self, *args, **kwargs):
        task = super(AddTaskForm, self).save(*args, **kwargs)

        user = self.cleaned_data['created_by']
        if len(self._links_to_create):
            self._links_to_create = [TaskLink(user_id = id, task = task) for id in self._links_to_create]
        else:
            self._links_to_create.append(TaskLink(user = user, task = task))

        TaskLink.objects.bulk_create(self._links_to_create) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T00:28:38.233

如果您真的想为`_links_to_create`类的每个实例创建一个私有成员，则需要在`__init__`方法中创建该变量。

# svn - SVN - 更改地址

> ID：15605818
> 
> 赞同：0
> 
> 时间：2013-03-25T00:20:26.500
> 
> 标签：svn, ankhsvn

我有一个在某个位置运行的 Subversion 服务器。在内部网络上，我通过`192.168.1.x`内部 IP 连接到它。

存储库服务器也可以通过 Internet 访问。

我现在在局域网之外。我知道服务器的 IP 地址，并且可以使用 Web 浏览器浏览到它。我正在使用VS2012。我不确定要更改什么以使我的 VS2012 会话连接到外部 IP，并使用相同的代码。

我需要将其更改为我的`202.134.121.x`样式地址。

应该改变什么？我正在使用`ankhsvn`将 VS2012 与我的 SVN 存储库集成。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T00:49:46.070

听起来您应该`svn switch --relocate`在本地 SVN 工作副本上运行以更改其远程 URL 以使用外部 IP。根据[Subversion book](http://svnbook.red-bean.com/en/1.6/svn.ref.svn.c.switch.html)，这看起来像：

```
$ svn switch --relocate svn+ssh://192.168.1.x/svn/repo svn+ssh://202.134.121.x/svn/repo 
```

有关更多详细信息，请参阅[文档](http://svnbook.red-bean.com/en/1.6/svn.ref.svn.c.switch.html)。

# regex - 抓取默认网关 sh 脚本错误

> ID：15605820
> 
> 赞同：0
> 
> 时间：2013-03-25T00:20:36.530
> 
> 标签：regex, linux, sh

我编写了用于监控默认网关的 MAC 地址的脚本，如果发现 ARP 攻击则发出警报。但是我在执行中遇到了一些错误。

我不能用正则表达式返回结果。这是针对 linux 脚本的

```
#!/bin/bash
function getmac {
dg = netstat -rn | grep -Eo 'default.*([0-9]{1,3}\.){3}[0-9]{1,3}'  #grab the default gateway (DG)
dg_ip= $dg | grep -Eo '([0-9]{1,3}\.){3}[0-9]{1,3}'         #strip the DG to just IP
dg_arp = arp -a | grep -w $dg_ip                                    #grab the arp entry for DG
dg_mac=$(echo $dg_arp | grep -Eo '[0-9a-f]{1,2}[:-][0-9a-f]{2}[:-][0-9a-f]{2}[:-][0-9a-f]{2}[:-][0-9a-f]{2}[:-][0-9a-f]{2}') #strip the ARP entry to just the MAC
echo "netstat shows "$dg
echo "DG IP shows "$dg_ip
echo "arp shows "$dg_arp
echo "DG MAC shows "$dg_mac
} 
```

提前感谢，对不起我的英语。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T01:15:52.930

我建议您使用类似的工具[`arpwatch`](http://en.wikipedia.org/wiki/Arpwatch)。

但是，当您请求帮助时，我准备了一个 bash 函数，它应该可以满足您的需求：

```
#!/bin/bash

# The function expects an interface name
# such as 'eth0' as param
#
function getmac {
    interface="$1"
    # grab the ip of the default gateway
    dg=`route -n | grep UG | grep "$interface"`
    # extract the IP from netstat's output
    dg_ip=`echo "$dg" | awk '{print $2}'`
    # grab the arp entry for default gateway
    dg_arp=`arp -a "$dg_ip"`                                    
    # strip the ARP entry to just the MAC
    dg_mac=`echo "$dg_arp" | awk '{print $4}'`

    # output
    echo "netstat shows $dg"
    echo "DG IP shows $dg_ip"
    echo "arp shows $dg_arp"
    echo "DG MAC shows $dg_mac"
}

# test it with eth0
getmac "eth0" 
```

# c# - 如何使用 LINQ 枚举字典

> ID：15605822
> 
> 赞同：2
> 
> 时间：2013-03-25T00:20:56.547
> 
> 标签：c#, .net, linq

我有以下

```
private enum Properties
{ one, two, three }

private Dictionary <Properties, String> PropertyToString;
private Dictionary <String, Properies> StringToProperty; 
```

如何使用 LINQ 填充每个字典，以便可以使用以下内容？是否有一行 LINQ 语句可以填充每个语句？

```
Properties MyResult = StringToProperty["One"];
String MySResult = PropertyToString[Properties.One]; 
```

我特别想在第二种情况下使用 actaull 属性来索引。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T00:25:03.480

你可以这样做：

```
private Dictionary<Properties,String> PropertyToString = Enum
    .GetValues(typeof(Properties))
    .Cast<Properties>().
    .ToDictionary(v => v, v => Enum.GetName(typeof(Properties), v));

private Dictionary<String,Properties> StringToProperty = Enum
    .GetValues(typeof(Properties))
    .Cast<Properties>().
    .ToDictionary(v => Enum.GetName(typeof(Properties), v), v => v); 
```

请注意，`PropertyToString`字典是不必要的，因为您可以这样做：

```
String MySResult = Enum.GetName(typeof(Proeprties), Properties.One); 
```

# post - 为什么 HttpRequest 发送的是 OPTIONS 动词而不是 POST？

> ID：15605823
> 
> 赞同：29
> 
> 时间：2013-03-25T00:20:58.380
> 
> 标签：post, httprequest, dart

我得到了这个代码：

```
var req = new HttpRequest();
req.open("POST", "http://localhost:8031/rest/user/insert");
req.setRequestHeader("Content-type", "application/json");
req.send(json.stringify(user_map)); 
```

但是，当我在提琴手中看到它时，我没有发送 POST 动词，而是看到了这个：

```
OPTIONS http://localhost:8031/rest/user/insert HTTP/1.1
Host: localhost:8031
Connection: keep-alive
Access-Control-Request-Method: POST
Origin: http://127.0.0.1:3030
User-Agent: Mozilla/5.0 (Windows NT 6.2; WOW64) AppleWebKit/537.33 (KHTML, like Gecko) Chrome/27.0.1430.0 (Dart) Safari/537.33
Access-Control-Request-Headers: origin, content-type
Accept: */*
Referer: http://127.0.0.1:3030/E:/grole/dart/Clases/Clases/web/out/clases.html
Accept-Encoding: gzip,deflate,sdch
Accept-Language: es-ES,es;q=0.8
Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.3 
```

如您所见，它使用的是 OPTIONS 动词而不是 POST？

这是怎么回事？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-03-25T00:35:31.923

`OPTIONS`动词是一些浏览器发送的预检请求，用于检查跨源请求的有效性。它几乎与服务器检查`Origin`（请求者）是否被允许对指定资源进行请求。此外，根据服务器发回的标头，它让浏览器知道允许源向服务器请求哪些标头、方法和资源。

浏览器发送 OPTIONS 请求，然后如果服务器以允许源发出请求的正确标头（CORS 标头）回复，您应该会看到您的 POST 请求随后通过。

请注意，必须在 OPTIONS 响应和 POST 响应中返回 CORS 标头。这意味着您的服务器必须能够响应您要跨域访问的路由上的 options 方法。

这称为跨域资源共享。Mozilla 有一些关于这个主题的非常好的文档。[https://developer.mozilla.org/en-US/docs/HTTP/Access_control_CORS](https://developer.mozilla.org/en-US/docs/HTTP/Access_control_CORS)

如果您有更多问题，请告诉我，我会回答。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-10-05T16:41:13.610

避免此问题的一种方法是发送不带自定义标头的请求有效负载并使用 formData 设置您的请求有效负载。

# entity-framework - 如果您打算序列化 POCO，是否需要放弃 EntityFramework 中的代理对象？

> ID：15605824
> 
> 赞同：0
> 
> 时间：2013-03-25T00:21:06.703
> 
> 标签：entity-framework, entity-framework-4

我很困扰。代理对象的重点似乎是通过使用延迟加载和更好的更改跟踪来提高性能。但是，当您从 Linq 到 EF 查询中检索代理结果并希望通过 HTTP 将该结果作为 JSON 返回时，由于存在类型不匹配，您将由于序列化而出错。

所有解决方案都说要关闭代理。那么，如果你不能使用它们，那么拥有它们有什么意义呢？我错过了什么，如何返回序列化的代理对象，而不实例化新的非代理匿名类型或 POCO 类型（对象分配）来镜像我返回的每个对象？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T22:21:08.987

使用延迟加载/代理的性能改进在于您不会一次获取所有数据，从而更快地往返于数据库并降低减慢甚至阻塞其他数据库操作的可能性。如果您知道无论如何都要加载所有数据，那不一定是性能改进。

话虽如此，如果您不能使用 Include(...) （由于其限制；例如 GroupBy），还有一些选项。

要通过多次访问数据库来加载数据，您可以对引用或集合属性使用 Load 方法来显式加载数据而不访问它。然后，您可以禁用代理生成。（[http://blogs.msdn.com/b/adonet/archive/2011/01/31/using-dbcontext-in-ef-feature-ctp5-part-6-loading-related-entities.aspx](http://blogs.msdn.com/b/adonet/archive/2011/01/31/using-dbcontext-in-ef-feature-ctp5-part-6-loading-related-entities.aspx)）

例如：

```
context.Entry( entityObj ).Reference( "PropertyName" ).Load();
context.Entry( entityObj ).Collection( "PropertyName" ).Load(); 
```

如果您想对某些属性使用带有代理的延迟加载，但希望避免 WCF 数据协定序列化在释放上下文后尝试延迟加载其他属性，您可以在离开数据库上下文的范围之前分离实体。

```
EntityA a = null;
EntityA a2 = null;

using (var db = new TestEntities())
{
    a = db.EntityAs.Where( ea => ea.Id == 1 ).Single();
    db.Entry(a).State = System.Data.EntityState.Detached;

    a2 = db.EntityAs.Where( ea => ea.Id == 2 ).Single();
}

var b1 = a.EntityB; // c will remain null; no exception thown
var b2 = a2.EntityB; // blows up b/c it attempts to lazy load 
```

# android - Android 内部类 (LocationListener) 从不触发

> ID：15605825
> 
> 赞同：1
> 
> 时间：2013-03-25T00:21:13.907
> 
> 标签：android, inner-classes, locationlistener

我正在使用此代码获取 Android 设备的 GPS 坐标。LocationListener 永远不会触发，我不知道为什么。任何建议，将不胜感激。

```
public class MyClass extends ListActivity {

    private LocationManager locmgr = null;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.mylayout);
        // Start the location manager
        locmgr = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
    } // onCreate

    @Override
    public void onResume() {
        super.onResume();
        // grab the location manager service
        locmgr.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0,
                onLocationChange);
    } // onResume

    // Start a location listener
    LocationListener onLocationChange = new LocationListener() {

        public void onLocationChanged(Location loc) {
            // This never fires
            Toast.makeText(getApplicationContext(), "Test",
                    Toast.LENGTH_LONG).show();
        }
        public void onProviderDisabled(String provider) {}
        public void onProviderEnabled(String provider) {}
        public void onStatusChanged(String provider, int status,
                Bundle extras) {}
    };
} // end MyClass 
```

# php - 将文档导出为 html 时，如何访问嵌入在谷歌文档中的图像？

> ID：15605826
> 
> 赞同：1
> 
> 时间：2013-03-25T00:21:22.580
> 
> 标签：php, google-drive-api

使用 PHP 驱动器 API，我可以通过文件资源中 exportLinks["text/html"] 中的 url 下载 google 原生文档的 html 版本。但是，嵌入在文档中的图像似乎被删除了。如何检索这些嵌入的图像？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-03T22:06:58.800

导出为 html 时，Google 现在似乎完全支持图像。当我将 Google 文档导出为 html 时，我的图像显示为：

`<img src="lh3.googleusercontent.com/<buncha_hash_garbage>">`

正如我所期望的那样，图像的文件 ID 嵌入在哈希中的某处。

# python - Python 等效于 Z3_API Z3_benchmark_to_smtlib_string 的第 7 个参数

> ID：15605829
> 
> 赞同：0
> 
> 时间：2013-03-25T00:22:06.760
> 
> 标签：python, z3

我们目前在 python 上使用 z3 来检查程序跟踪的可行性。基于我们创建 z3 公式和断言的跟踪，我们的下一个方法目前是通过 Z3_benchmark_to_smtlib_string 使用 SMT2 作为中间语言将这些断言提供给 iZ3 和 smtinterpol。

一个小例子：x = Int('x') y = Int('y')

```
s = Solver()

# Assertions
s.assert_and_track(x > y, 'p1')
s.assert_and_track(x == 0, 'p2')
s.assert_and_track(y > 0, 'p3')

a = s.assertions()
v = a[0].as_ast()
f = And(a[1], a[2])
print Z3_benchmark_to_smtlib_string(a[0].ctx_ref(), "name", "QF_LIA", "unsat", "", 1, v, f.as_ast()) 
```

这会产生输出

```
; name    
(set-info :status unsat)
(set-logic QF_LIA)
(declare-fun y () Int)
(declare-fun x () Int)
(assert
(> x y))
(assert
(let (($x12 (> y 0)))
(let (($x10 (= x 0)))
(and $x10 $x12))))
(check-sat) 
```

在进行一些独裁修改后，将其提供给 smtinterpol 很好：

```
; name
(set-info :status unsat)
(set-option :produce-proofs true)
(set-logic QF_LIA)
(declare-fun y () Int)
(declare-fun x () Int)
(assert (!
(> x y) :named p1))
(assert (!
(let (($x12 (> y 0)))
(let (($x10 (= x 0)))
(and $x10 $x12))) :named p2))
(check-sat)
(get-interpolants p1 p2) 
```

我们希望有一种可能性，即在 smt2 输出中包含所有断言，而无需通过 AND 将所有 1:end 断言组合到一个等式。如果试图通过 c 代码文档（ capi.html#gaf93844a5964ad8dee609fac3470d86e4">http://research.microsoft.com/en-us/um/redmond/projects/z3/group_capi.html#gaf93844a5964ad8dee609fac3470d86e4 ）猜测第 6 个和第 7 个参数，但我可以让它工作，给他一个断言列表。

我试过例如：

```
print Z3_benchmark_to_smtlib_string(a[0].ctx_ref(), "name", "QF_LIA", "unsat", "", 2, f.as_ast(), v) 
```

但是会遇到

```
exception: access violation reading 0x00000004 
```

也只是给出一个列表是行不通的：

```
print Z3_benchmark_to_smtlib_string(a[0].ctx_ref(), "name", "QF_LIA", "unsat", "", 2, [a[0].as_ast(), a[1].as_ast()], a[2].as_ast()) 
```

基本上，有人知道 __in_ecount(num_assumptions) Z3_ast const 的 python 等价物是什么吗？或者是否有另一种可能性从 Solver 的断言列表中生成 smt2 输出？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T01:23:57.460

正如您所注意到的，Python API 不会将 python 包装器暴露给打印基准的函数。C签名是：

```
/**
   \brief Convert the given benchmark into SMT-LIB formatted string.

   \conly \warning The result buffer is statically allocated by Z3\. It will
   \conly be automatically deallocated when #Z3_del_context is invoked.
   \conly So, the buffer is invalidated in the next call to \c Z3_benchmark_to_smtlib_string.

   \param c - context.
   \param name - name of benchmark. The argument is optional.
   \param logic - the benchmark logic. 
   \param status - the status string (sat, unsat, or unknown)
   \param attributes - other attributes, such as source, difficulty or category.
   \param num_assumptions - number of assumptions.
   \param assumptions - auxiliary assumptions.
   \param formula - formula to be checked for consistency in conjunction with assumptions.

   def_API('Z3_benchmark_to_smtlib_string', STRING, (_in(CONTEXT), _in(STRING), _in(STRING), _in(STRING), _in(STRING), _in(UINT), _in_array(5, AST), _in(AST)))
*/
Z3_string Z3_API Z3_benchmark_to_smtlib_string(__in   Z3_context c, 
                                               __in Z3_string name,
                                               __in Z3_string logic,
                                               __in Z3_string status,
                                               __in Z3_string attributes,
                                               __in   unsigned num_assumptions,
                                               __in_ecount(num_assumptions) Z3_ast const assumptions[],
                                               __in   Z3_ast formula); 
```

z3.py 中有几个类似函数的示例，它们将数组作为参数，并且它们使用相同的模式，您为 C 函数提供两个参数：(1) 数组的长度 (2) 实际数组。您应该将数组的长度和未腌制的数组传递给 C 函数。您的示例的变体在这里：[http ://rise4fun.com/Z3Py/rGEp](http://rise4fun.com/Z3Py/rGEp)

# c - 如何处理生产者-消费者模式的 FIFO 队列

> ID：15605831
> 
> 赞同：2
> 
> 时间：2013-03-25T00:22:13.483
> 
> 标签：c, semaphore, producer-consumer, fifo

我有一个 FIFO 队列、生产者和消费者，我尝试了不同的组合，除了这种安排之外，这些组合都有效。我应该能够使用 3 个生产者、2 个消费者、10 个 FIFO 插槽以及没有信号量开始运行它，然后还可以在信号量激活的情况下运行它。

```
#include <stdio.h>
#include "oslab_lowlevel_h.h"

int NextPrime( int );

#define FIFO_SIZE 10

/* Declare a structure to hold a producer's starting value,
 * and an integer for the Producer-number (Producer 1, 2 or 3). */
struct Prod {
    int startvalue;
    int id;
};

unsigned int stack1[0x400]; /* Stack for thread 1 */
unsigned int stack2[0x400]; /* Stack for thread 2 */
unsigned int stack3[0x400]; /* Stack for thread 3 */
unsigned int stack4[0x400]; /* Stack for thread 4 */
unsigned int stack5[0x400]; /* Stack for thread 5 */

/* Declare variables for the First-In-First-Out Queue */
int  Fifo[FIFO_SIZE];        /* Array holding FIFO queue data. */
int  rdaddr;                /* Next unread entry when reading from queue. */
int  wraddr;                /* Next free entry when writing into queue. */

/* Declaration of semaphore variables.
 */
int  rdmutex = 1;
int  wrmutex = 1;
int  nrempty = FIFO_SIZE;
int  nrfull = 0;

/*
 * fatal_error
 * 
 * Print a message, then stop execution.
 * This function never returns; after printing
 * the message, it enters an infinite loop.
 */
void fatal_error( char * msg)
{
  printf( "\nFatal error: %s\n", msg );
  while( 1 );
}

/*
 * Sleep
 * 
 * Delay execution by keeping the CPU busy for a while,
 * counting down to zero.
 */
void Sleep (int n)
{
    while (n--);
}

/*
 * Signal
 * 
 * Semaphore operation: add to semaphore,
 * possibly allowing other threads to continue.
 */
void Signal( int *sem )
{
  /* We must disable interrupts, since the operation
   * *sem = *sem + 1
   * will require several machine instructions on Nios2.
   * If we have a timer-interrupt and a thread-switch
   * somewhere in the middle of those machine instructions,
   * the semaphore will be updated twice, or not at all, or
   * in some other erroneous way.
   */
  oslab_begin_critical_region();
  *sem = *sem + 1;
  oslab_end_critical_region();
}

/*
 * Wait
 * 
 * Sempahore operation: check semaphore, and
 * wait if the semaphore value is zero or less.
 */
void Wait( int *sem )
{
  /* Disable interrupts. */
  oslab_begin_critical_region();
  while ( *sem <= 0 )
    {
      /* If we should wait, enable interrupts again. */
      oslab_end_critical_region();

        //oslab_yield(); /* Perhaps we should yield here? */

      /* Disable interrupts again before next iteration in loop. */
      oslab_begin_critical_region();
    }
    /* We have waited long enough - the semaphore-value is now
     * greater than zero. Decrease it. */
    *sem = *sem - 1;
    /* Enable interrupts again. */
    oslab_end_critical_region();
}

/*
 * PutFifo
 * 
 * Insert an integer into the FIFO queue.
 */
void PutFifo( int tal )
{
    //Wait (&nrempty);      /* Wait for nrempty? */
    //Wait (&wrmutex);      /* Wait for wrmutex? */

  Fifo[wraddr] = tal;       /* Write to FIFO array. */
    //  printf("\nPutFifo:  %d ", tal); /* Optional debug output */
     // printf("\nwraddr = %d ", wraddr); /* Optional debug output. */
  wraddr = wraddr + 1;      /* Increase index into FIFO array,
                               to point to the next free position. */
  /* Wrap around the index, if it has reached the end of the array. */
  if (wraddr == FIFO_SIZE ) wraddr = 0;

    //Signal (&wrmutex);    /* Signal wrmutex? */
    //Signal (&nrfull);     /* Signal nrfull? */
}

/*
 * GetFifo
 * 
 * Extract the next integer from the FIFO queue.
 */
int GetFifo( void )
{
  int retval;               /* Declare temporary for return value. */

    //Wait (&nrfull);       /* Wait for nrfull? */
    //Wait (&rdmutex);      /* Wait for rdmutex? */

  retval = Fifo[rdaddr];    /* Get value from FIFO array. */
  //    printf("\nGetFifo:  %d ", retval); /* Optional debug output */
  //    printf("\nrdaddr = %d ", rdaddr); /* Optional debug output */
  rdaddr = rdaddr + 1;      /* Increase index into FIFO array,
                               to point to the next free position. */
  /* Wrap around the index, if it has reached the end of the array. */
  if (rdaddr == FIFO_SIZE ) rdaddr = 0;

    //Signal (&rdmutex);    /* Signal rdmutex? */
    //Signal (&nrempty);    /* Signal nrempty? */

  return (retval);          /* Return value fetched from FIFO. */
}

/*
 * NextPrime
 * 
 * Return the first prime number larger than the integer
 * given as a parameter. The integer must be positive.
 * 
 * *** NextPrime is outside the focus of this assignment. ***
 * The definition of NextPrime can be found at the end of this file.
 * The short declaration here is required by the compiler.
 */
int NextPrime( int );

void Producer( struct Prod * prodstruct )
{
  int next;                 /* Will hold the prime we just produced. */
  int prodid;               /* Tells whether we are producer 1, 2 or 3\. */
  next = prodstruct -> startvalue; /* Get starting value from parameter. */
  prodid = prodstruct -> id;/* Get producer number from parameter. */
  while( 1 )                /* Loop forever. */
  {
    next = NextPrime (next);/* Produce a new prime. */
    printf("\nNext Prime from producer %d is %d",prodid,next); /* Informational output. */
    PutFifo(next);          /* Write prime into FIFO. */
  //  oslab_yield();        /* Perhaps we should yield here? */
  }
}

void Consumer( int * tal )
{
  int next;                 /* Will hold the prime we are to consume. */
  int consid = *tal;        /* Tells whether we are consumer 1 or 2\. */
  while( 1 )                /* Loop forever. */
  {
    next = GetFifo();       /* Get a newly produced prime from the FIFO. */
    printf("\nConsumer %d gets Prime %d ",consid, next); /* Informational output. */
    Sleep(2000);            /* Symbolic work. */
    //oslab_yield();        /* Perhaps we should yield here? */
  }
}

int main( void )
{
  int new_thread_id; /* Thread ID variable. */
  struct Prod prod1, prod2, prod3;  /* Producer starting-values. */
  int cons1, cons2;                 /* Consumer starting-values. */

  rdaddr = 0;               /* FIFO initialization. */
  wraddr = 0;               /* FIFO initialization. */
  printf("\nSystem starting...");

  prod1.startvalue = 2000;
  prod1.id = 1;

  prod2.startvalue = 5000;
  prod2.id = 2;

  prod3.startvalue = 8000;
  prod3.id = 3;

  cons1 = 1;
  cons2 = 2;

  new_thread_id = oslab_create_thread((void *)Producer, &prod1, &(stack1[0x3ff]));
  if( new_thread_id < 0 ) fatal_error( "cannot start Producer 1" );
  printf("\nProducer %d is created with thread-ID %d", prod1.id, new_thread_id);

  new_thread_id = oslab_create_thread((void *)Producer, &prod2, &(stack2[0x3ff]));
  if( new_thread_id < 0 ) fatal_error( "cannot start Producer 2" );
  printf("\nProducer %d is created with thread-ID %d", prod2.id, new_thread_id);

  new_thread_id = oslab_create_thread((void *)Producer, &prod3, &(stack3[0x3ff]));
  if( new_thread_id < 0 ) fatal_error( "cannot start Producer 3" );
  printf("\nProducer %d is created with thread-ID %d", prod3.id, new_thread_id);

  new_thread_id = oslab_create_thread((void *)Consumer, &cons1, &(stack4[0x3ff]));
  if( new_thread_id < 0 ) fatal_error( "cannot start Consumer 1" );
  printf("\nConsumer %d is created with thread-ID %d", cons1, new_thread_id);

  new_thread_id = oslab_create_thread((void *)Consumer, &cons2, &(stack5[0x3ff]));
  if( new_thread_id < 0 ) fatal_error( "cannot start Consumer 2" );
  printf("\nConsumer %d is created with thread-ID %d", cons2, new_thread_id);

  oslab_idle(); /* Must be called here! */
}

/*
 * NextPrime
 * 
 * Return the first prime number larger than the integer
 * given as a parameter. The integer must be positive.
 */
#define PRIME_FALSE   0     /* Constant to help readability. */
#define PRIME_TRUE    1     /* Constant to help readability. */
int NextPrime( int inval )
{
   int perhapsprime;        /* Holds a tentative prime while we check it. */
   int testfactor;          /* Holds various factors for which we test perhapsprime. */
   int found;               /* Flag, false until we find a prime. */

   if (inval < 3 )          /* Initial sanity check of parameter. */
   {
     if(inval <= 0) return(1);  /* Return 1 for zero or negative input. */
     if(inval == 1) return(2);  /* Easy special case. */
     if(inval == 2) return(3);  /* Easy special case. */
   }
   else
   {
     /* Testing an even number for primeness is pointless, since
      * all even numbers are divisible by 2\. Therefore, we make sure
      * that perhapsprime is larger than the parameter, and odd. */
     perhapsprime = ( inval + 1 ) | 1 ;
   }
   /* While prime not found, loop. */
   for( found = PRIME_FALSE; found != PRIME_TRUE; perhapsprime += 2 )
   {
     /* Check factors from 3 up to perhapsprime/2\. */
     for( testfactor = 3; testfactor <= (perhapsprime >> 1) + 1; testfactor += 1 )
     {
       found = PRIME_TRUE;      /* Assume we will find a prime. */
       if( (perhapsprime % testfactor) == 0 ) /* If testfactor divides perhapsprime... */
       {
         found = PRIME_FALSE;   /* ...then, perhapsprime was non-prime. */
         goto check_next_prime; /* Break the inner loop, go test a new perhapsprime. */
       }
     }
     check_next_prime:;         /* This label is used to break the inner loop. */
     if( found == PRIME_TRUE )  /* If the loop ended normally, we found a prime. */
     {
       return( perhapsprime );  /* Return the prime we found. */
     } 
   }
   return( perhapsprime );      /* When the loop ends, perhapsprime is a real prime. */
} 
```

当我运行程序时，FIFO 队列的开头被覆盖，当消费者启动时，前 30 个素数似乎丢失了：

```
Consumer 1 gets Prime 5059 
Consumer 1 gets Prime 5077 
Consumer 1 gets Prime 5081 
Consumer 1 gets Prime 8009 
Consumer 1 gets Prime 8011 
Consumer 1 gets Prime 8017 
Consumer 1 gets Prime 8039 
Consumer 1 gets Prime 8053 
Consumer 1 gets Prime 8059 
Consumer 1 gets Prime 5051 
Consumer 1 gets Prime 5059 
Consumer 1 gets Prime 5077 
Consumer 1 gets Prime 5081 
Consumer 1 gets Prime 8009 
Consumer 1 gets Prime 8011 
```

如果我使用信号量，我不会遇到这个问题，并且消费者会得到所有的素数。你知道为什么我的这个版本的项目会出现这个问题吗？

## 更新

现在我将`Producer`函数更改为调用`yield`，然后生产者将为生成的每个素数产生收益（因此我认为每个生产者的时间片只会产生一个素数）。

```
#include <stdio.h>
#include "oslab_lowlevel_h.h"

int NextPrime( int );

#define FIFO_SIZE 10

/* Declare a structure to hold a producer's starting value,
 * and an integer for the Producer-number (Producer 1, 2 or 3). */
struct Prod {
    int startvalue;
    int id;
};

unsigned int stack1[0x400]; /* Stack for thread 1 */
unsigned int stack2[0x400]; /* Stack for thread 2 */
unsigned int stack3[0x400]; /* Stack for thread 3 */
unsigned int stack4[0x400]; /* Stack for thread 4 */
unsigned int stack5[0x400]; /* Stack for thread 5 */

/* Declare variables for the First-In-First-Out Queue */
int  Fifo[FIFO_SIZE];        /* Array holding FIFO queue data. */
int  rdaddr;                /* Next unread entry when reading from queue. */
int  wraddr;                /* Next free entry when writing into queue. */

/* Declaration of semaphore variables.
 * 
 * Sorry for the lack of comments, but part of the purpose of the lab
 * is that you should find things out by reading the actual code. */
int  rdmutex = 1;
int  wrmutex = 1;
int  nrempty = FIFO_SIZE;
int  nrfull = 0;

/*
 * fatal_error
 * 
 * Print a message, then stop execution.
 * This function never returns; after printing
 * the message, it enters an infinite loop.
 */
void fatal_error( char * msg)
{
  printf( "\nFatal error: %s\n", msg );
  while( 1 );
}

/*
 * Sleep
 * 
 * Delay execution by keeping the CPU busy for a while,
 * counting down to zero.
 */
void Sleep (int n)
{
    while (n--);
}

void Signal( int *sem )
{

  oslab_begin_critical_region();
  *sem = *sem + 1;
  oslab_end_critical_region();
}

void Wait( int *sem )
{
  /* Disable interrupts. */
  oslab_begin_critical_region();
  while ( *sem <= 0 )
    {
      /* If we should wait, enable interrupts again. */
      oslab_end_critical_region();

      //  oslab_yield(); /* Perhaps we should yield here? */

      /* Disable interrupts again before next iteration in loop. */
      oslab_begin_critical_region();
    }
    /* We have waited long enough - the semaphore-value is now
     * greater than zero. Decrease it. */
    *sem = *sem - 1;
    /* Enable interrupts again. */
    oslab_end_critical_region();
}

/*
 * PutFifo
 * 
 * Insert an integer into the FIFO queue.
 */
void PutFifo( int tal )
{
  //  Wait (&nrempty);      /* Wait for nrempty? */
  //  Wait (&wrmutex);      /* Wait for wrmutex? */

  Fifo[wraddr] = tal;       /* Write to FIFO array. */
    //  printf("\nPutFifo:  %d ", tal); /* Optional debug output */
    //  printf("\nwraddr = %d ", wraddr); /* Optional debug output. */
  wraddr = wraddr + 1;      /* Increase index into FIFO array,
                               to point to the next free position. */
  /* Wrap around the index, if it has reached the end of the array. */
  if (wraddr == FIFO_SIZE ) wraddr = 0;

  //  Signal (&wrmutex);    /* Signal wrmutex? */
  //  Signal (&nrfull);     /* Signal nrfull? */
}

/*
 * GetFifo
 * 
 * Extract the next integer from the FIFO queue.
 */
int GetFifo( void )
{
  int retval;               /* Declare temporary for return value. */

  //  Wait (&nrfull);       /* Wait for nrfull? */
  //  Wait (&rdmutex);      /* Wait for rdmutex? */

  retval = Fifo[rdaddr];    /* Get value from FIFO array. */
    //  printf("\nGetFifo:  %d ", retval); /* Optional debug output */
    //  printf("\nrdaddr = %d ", rdaddr); /* Optional debug output */
  rdaddr = rdaddr + 1;      /* Increase index into FIFO array,
                               to point to the next free position. */
  /* Wrap around the index, if it has reached the end of the array. */
  if (rdaddr == FIFO_SIZE ) rdaddr = 0;

  //  Signal (&rdmutex);    /* Signal rdmutex? */
  //  Signal (&nrempty);    /* Signal nrempty? */

  return (retval);          /* Return value fetched from FIFO. */
}

int NextPrime( int );

void Producer( struct Prod * prodstruct )
{
  int next;                 /* Will hold the prime we just produced. */
  int prodid;               /* Tells whether we are producer 1, 2 or 3\. */
  next = prodstruct -> startvalue; /* Get starting value from parameter. */
  prodid = prodstruct -> id;/* Get producer number from parameter. */
  while( 1 )                /* Loop forever. */
  {
    next = NextPrime (next);/* Produce a new prime. */
    printf("\nNext Prime from producer %d is %d",prodid,next); /* Informational output. */
    PutFifo(next);          /* Write prime into FIFO. */
    oslab_yield();        /* Perhaps we should yield here? */
  }
}

void Consumer( int * tal )
{
  int next;                 /* Will hold the prime we are to consume. */
  int consid = *tal;        /* Tells whether we are consumer 1 or 2\. */
  while( 1 )                /* Loop forever. */
  {
    next = GetFifo();       /* Get a newly produced prime from the FIFO. */
    printf("\nConsumer %d gets Prime %d ",consid, next); /* Informational output. */
    Sleep(2000);            /* Symbolic work. */
  //  oslab_yield();        /* Perhaps we should yield here? */ 
  }
}

int main( void )
{
  int new_thread_id; /* Thread ID variable. */
  struct Prod prod1, prod2, prod3;  /* Producer starting-values. */
  int cons1, cons2;                 /* Consumer starting-values. */

  rdaddr = 0;               /* FIFO initialization. */
  wraddr = 0;               /* FIFO initialization. */
  printf("\nSystem starting...");

  prod1.startvalue = 2000;
  prod1.id = 1;

  prod2.startvalue = 5000;
  prod2.id = 2;

  prod3.startvalue = 8000;
  prod3.id = 3;

  cons1 = 1;
  cons2 = 2;

  new_thread_id = oslab_create_thread((void *)Producer, &prod1, &(stack1[0x3ff]));
  if( new_thread_id < 0 ) fatal_error( "cannot start Producer 1" );
  printf("\nProducer %d is created with thread-ID %d", prod1.id, new_thread_id);

  new_thread_id = oslab_create_thread((void *)Producer, &prod2, &(stack2[0x3ff]));
  if( new_thread_id < 0 ) fatal_error( "cannot start Producer 2" );
  printf("\nProducer %d is created with thread-ID %d", prod2.id, new_thread_id);

  new_thread_id = oslab_create_thread((void *)Producer, &prod3, &(stack3[0x3ff]));
  if( new_thread_id < 0 ) fatal_error( "cannot start Producer 3" );
  printf("\nProducer %d is created with thread-ID %d", prod3.id, new_thread_id);

  new_thread_id = oslab_create_thread((void *)Consumer, &cons1, &(stack4[0x3ff]));
  if( new_thread_id < 0 ) fatal_error( "cannot start Consumer 1" );
  printf("\nConsumer %d is created with thread-ID %d", cons1, new_thread_id);

  new_thread_id = oslab_create_thread((void *)Consumer, &cons2, &(stack5[0x3ff]));
  if( new_thread_id < 0 ) fatal_error( "cannot start Consumer 2" );
  printf("\nConsumer %d is created with thread-ID %d", cons2, new_thread_id);

  oslab_idle(); /* Must be called here! */
} 
```

变化是我在代码中评论了`oslab_yield(); /* Perhaps we should yield here? */`所以现在我想每个时间片只产生一个素数（？）

```
System starting...
Producer 1 is created with thread-ID 1
Producer 2 is created with thread-ID 2
Producer 3 is created with thread-ID 3
Consumer 1 is created with thread-ID 4
Consumer 2 is created with thread-ID 5
#### Thread yielded after using 1 tick.
Performing thread-switch number 1\. The system has been running for 1 ticks.
Switching from thread-ID 0 to thread-ID 1.

Next Prime from producer 1 is 2003
#### Thread yielded after using 5 ticks.
Performing thread-switch number 2\. The system has been running for 6 ticks.
Switching from thread-ID 1 to thread-ID 2.

Next Prime from producer 2 is 5003
#### Thread yielded after using 11 ticks.
Performing thread-switch number 3\. The system has been running for 17 ticks.
Switching from thread-ID 2 to thread-ID 3.

Next Prime from producer 3 is 8009
#### Thread yielded after using 16 ticks.
Performing thread-switch number 4\. The system has been running for 33 ticks.
Switching from thread-ID 3 to thread-ID 4.

Consumer 1 gets Prime 2003 
Consumer 1 gets Prime 5003 
Consumer 1 gets Prime 8009 
Consumer 1 gets Prime 0 
Consumer 1 gets Prime 0 
Consumer 1 gets Prime 0 
Consumer 1 gets Prime 0 
Consumer 1 gets Prime 0 
Consumer 1 gets Prime 0 
Consumer 1 gets Prime 0 
Consumer 1 gets Prime 2003 
Consumer 1 gets Prime 5003 
Consumer 1 gets Prime 8009 
Consumer 1 gets Prime 0 
Consumer 1 gets Prime 0 
Consumer 1 gets Prime 0 
Consumer 1 gets Prime 0 
Consumer 1 gets Prime 0 
Consumer 1 gets Prime 0 
Consumer 1 gets Prime 0 
Consumer 1 gets Prime 2003 
Consumer 1 gets Prime 5003 
Consumer 1 gets Prime 8009 
Consumer 1 gets Prime 0 
Consumer 1 gets Prime 0 
Consumer 1 gets Prime 0 
Consumer 1 gets Prime 0 
Consumer 1 gets Prime 0 
Consumer 1 gets Prime 0 
Consumer 1 gets Prime 0 
Consumer 1 gets Prime 2003 
Consumer 1 gets Prime 5003 
Consumer 1 gets Prime 8009 
Consumer 1 gets Prime 0 
Consumer 1 gets Prime 0 
Consumer 1 gets Prime 0 
Consumer 1 gets Prime 0 
Consumer 1 gets Prime 0 
Performing thread-switch number 5\. The system has been running for 133 ticks.
Switching from thread-ID 4 to thread-ID 5.

Consumer 2 gets Prime 0 
Consumer 2 gets Prime 0 
Consumer 2 gets Prime 2003 
Consumer 2 gets Prime 5003 
Consumer 2 gets Prime 8009 
Consumer 2 gets Prime 0 
Consumer 2 gets Prime 0 
Consumer 2 gets Prime 0 
Consumer 2 gets Prime 0 
Consumer 2 gets Prime 0 
Consumer 2 gets Prime 0 
Consumer 2 gets Prime 0 
Consumer 2 gets Prime 2003 
Consumer 2 gets Prime 5003 
Consumer 2 gets Prime 8009 
Consumer 2 gets Prime 0 
Consumer 2 gets Prime 0 
Consumer 2 gets Prime 0 
Consumer 2 gets Prime 0 
Consumer 2 gets Prime 0 
Consumer 2 gets Prime 0 
Consumer 2 gets Prime 0 
Consumer 2 gets Prime 2003 
Consumer 2 gets Prime 5003 
Consumer 2 gets Prime 8009 
Consumer 2 gets Prime 0 
Consumer 2 gets Prime 0 
Consumer 2 gets Prime 0 
Consumer 2 gets Prime 0 
Consumer 2 gets Prime 0 
Consumer 2 gets Prime 0 
Consumer 2 gets Prime 0 
Consumer 2 gets Prime 2003 
Consumer 2 gets Prime 5003 
Consumer 2 gets Prime 8009 
Consumer 2 gets Prime 0 
Consumer 2 gets Prime 0 
Consumer 2 gets Prime 0 
Performing thread-switch number 6\. The system has been running for 233 ticks.
Switching from thread-ID 5 to thread-ID 0.

#### Thread yielded after using 0 ticks.
Performing thread-switch number 7\. The system has been running for 233 ticks.
Switching from thread-ID 0 to thread-ID 1.

Next Prime from producer 1 is 2011
#### Thread yielded after using 5 ticks.
Performing thread-switch number 8\. The system has been running for 238 ticks.
Switching from thread-ID 1 to thread-ID 2.

Next Prime from producer 2 is 5009
#### Thread yielded after using 11 ticks.
Performing thread-switch number 9\. The system has been running for 249 ticks.
Switching from thread-ID 2 to thread-ID 3.

Next Prime from producer 3 is 8011
#### Thread yielded after using 16 ticks.
Performing thread-switch number 10\. The system has been running for 265 ticks.
Switching from thread-ID 3 to thread-ID 4.

Consumer 1 gets Prime 0 
Consumer 1 gets Prime 0 
Consumer 1 gets Prime 0 
Consumer 1 gets Prime 0 
Consumer 1 gets Prime 2003 
Consumer 1 gets Prime 5003 
Consumer 1 gets Prime 8009 
Consumer 1 gets Prime 2011 
Consumer 1 gets Prime 5009 
Consumer 1 gets Prime 8011 
Consumer 1 gets Prime 0 
Consumer 1 gets Prime 0 
Consumer 1 gets Prime 0 
Consumer 1 gets Prime 0 
Consumer 1 gets Prime 2003 
Consumer 1 gets Prime 5003 
Consumer 1 gets Prime 8009 
Consumer 1 gets Prime 2011 
Consumer 1 gets Prime 5009 
Consumer 1 gets Prime 8011 
Consumer 1 gets Prime 0 
Consumer 1 gets Prime 0 
Consumer 1 gets Prime 0 
Consumer 1 gets Prime 0 
Consumer 1 gets Prime 2003 
Consumer 1 gets Prime 5003 
Consumer 1 gets Prime 8009 
Consumer 1 gets Prime 2011 
Consumer 1 gets Prime 5009 
Consumer 1 gets Prime 8011 
Consumer 1 gets Prime 0 
Consumer 1 gets Prime 0 
Consumer 1 gets Prime 0 
Consumer 1 gets Prime 0 
Consumer 1 gets Prime 2003 
Consumer 1 gets Prime 5003 
Consumer 1 gets Prime 8009 
Consumer 1 gets Prime 
Performing thread-switch number 11\. The system has been running for 365 ticks.
Switching from thread-ID 4 to thread-ID 5.

Consumer 2 gets Prime 5009 
Consumer 2 gets Prime 8011 
Consumer 2 gets Prime 0 
Consumer 2 gets Prime 0 
Consumer 2 gets Prime 0 
Consumer 2 gets Prime 0 
Consumer 2 gets Prime 2003 
Consumer 2 gets Prime 5003 
Consumer 2 gets Prime 8009 
Consumer 2 gets Prime 2011 
Consumer 2 gets Prime 5009 
Consumer 2 gets Prime 8011 
Consumer 2 gets Prime 0 
Consumer 2 gets Prime 0 
Consumer 2 gets Prime 0 
Consumer 2 gets Prime 0 
Consumer 2 gets Prime 2003 
Consumer 2 gets Prime 5003 
Consumer 2 gets Prime 8009 
Consumer 2 gets Prime 2011 
Consumer 2 gets Prime 5009 
Consumer 2 gets Prime 8011 
Consumer 2 gets Prime 0 
Consumer 2 gets Prime 0 
Consumer 2 gets Prime 0 
Consumer 2 gets Prime 0 
Consumer 2 gets Prime 2003 
Consumer 2 gets Prime 5003 
Consumer 2 gets Prime 8009 
Consumer 2 gets Prime 2011 
Consumer 2 gets Prime 5009 
Consumer 2 gets Prime 8011 
Consumer 2 gets Prime 0 
Consumer 2 gets Prime 0 
Consumer 2 gets Prime 0 
Consumer 2 gets Prime 0 
Consumer 2 gets Prime 2003 
Consumer 2 gets Prime 5003 
Performing thread-switch number 12\. The system has been running for 465 ticks.
Switching from thread-ID 5 to thread-ID 0.

#### Thread yielded after using 0 ticks.
Performing thread-switch number 13\. The system has been running for 465 ticks.
Switching from thread-ID 0 to thread-ID 1.

Next Prime from producer 1 is 2017
#### Thread yielded after using 5 ticks.
Performing thread-switch number 14\. The system has been running for 470 ticks.
Switching from thread-ID 1 to thread-ID 2.

Next Prime from producer 2 is 5011
#### Thread yielded after using 11 ticks.
Performing thread-switch number 15\. The system has been running for 481 ticks.
Switching from thread-ID 2 to thread-ID 3.

Next Prime from producer 3 is 8017
#### Thread yielded after using 16 ticks.
Performing thread-switch number 16\. The system has been running for 497 ticks.
Switching from thread-ID 3 to thread-ID 4.
2094 
Consumer 1 gets Prime 8009 
Consumer 1 gets Prime 2011 
Consumer 1 gets Prime 5009 
Consumer 1 gets Prime 8011 
Consumer 1 gets Prime 2017 
Consumer 1 gets Prime 5011 
Consumer 1 gets Prime 8017 
Consumer 1 gets Prime 0 
Consumer 1 gets Prime 2003 
Consumer 1 gets Prime 5003 
Consumer 1 gets Prime 8009 
Consumer 1 gets Prime 2011 
Consumer 1 gets Prime 5009 
Consumer 1 gets Prime 8011 
Consumer 1 gets Prime 2017 
Consumer 1 gets Prime 5011 
Consumer 1 gets Prime 8017 
Consumer 1 gets Prime 0 
Consumer 1 gets Prime 2003 
Consumer 1 gets Prime 5003 
Consumer 1 gets Prime 8009 
Consumer 1 gets Prime 2011 
Consumer 1 gets Prime 5009 
Consumer 1 gets Prime 8011 
Consumer 1 gets Prime 2017 
Consumer 1 gets Prime 5011 
Consumer 1 gets Prime 8017 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T15:05:14.560

尼克，你有几个问题。

首先，生产者不能只写入fifo。您需要检查它是否有空间。（这就是 wraddr+1 != rdaddr. Modulo FIFO_SIZE）您还需要消费者检查 fifo 是否为空。（这是 wraddr ！= rdaddr。模 FIFO_SIZE）

下一个问题涉及调度。oslab调度器是如何实现的？只有一个执行线程吗？如果是这样，它是先发制人的，等等？在任何情况下，如果一个线程通过 PutFifo 的一部分，而下一个线程启动 PutFifo，则无法防止双重更新。事实上，wraddr 可能已损坏，因此您会丢失条目。你可以做一个广义的 Dekker 算法（见维基百科——在页面底部你会看到指向彼得森和其他算法的指针）。消费者方面也有类似的问题。

我认为您的问题是上述两个问题的结合。那么如何解决呢？我会为每个 addr（wr 和 rd）编写一个 Sync 和 Unsync 例程。在封面下，您可以为您想做的第二件事做互斥锁等。你也可以为你想做的第一遍做一个 Dekker 等。将同步放在 PutFifo 之前，将 Unsync 放在 PutFifo 之后。GetFifo 也是如此。

需要帮助请叫我。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-01T16:23:42.823

1.  应该声明您的 FIFO 和信号量变量`volatile`。

2.  您的代码中没有任何内容调用`Wait`

# php - 如何获取字符串中某个单词之前和之后的所有内容

> ID：15605833
> 
> 赞同：5
> 
> 时间：2013-03-25T00:22:15.977
> 
> 标签：php, string, variables, word

如何在某个单词之前和之后获取 php 字符串中的所有内容？例如，如果我有一个字符串“5 乘以 8”，我如何提取 5 和 8 并将它们存储到单独的变量中？我对 PHP 有点陌生。

我试过了

```
$foo = "5 times 8";
$foo = str_replace(" times ","",$foo); 
```

然后呢？结果是“58”

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-03-25T00:25:05.737

如果您确定您的输入字符串包含，`" times "`那么您可以这样做：

```
$input = "5 times 8";
list($a, $b) = explode(' times ', $input);

echo $a; // "5"
echo $b; // "8" 
```

如果您需要做一些更复杂的事情，请使用正则表达式：

```
$input = "5 times 8";
if (preg_match('!(\d+)\s*times\s*(\d+)!i', $input, $m)){
    $a = $m[1];
    $b = $m[2];
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-25T00:25:01.217

您可以使用[**explode()**](http://php.net/manual/en/function.explode.php)函数，如下所示：

```
$string = "5 times 8";
$var = explode(' times ', $string);
echo $var[0]; //echoes 5
echo $var[1]; //echoes 8 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-25T00:28:11.840

你可以[`explode()`](http://in3.php.net/explode)使用你的字符串...

```
$string = "5 times 8";
$var = explode(' times ', $string);
echo $var[0]; //echoes 5
echo $var[1]; //echoes 8 
```

这将起作用

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-25T00:26:03.537

您在问题中说过“如何在某个单词之前和之后获取*所有内容”。*所以这将得到*一切*。将 的实例替换为`.*`eg`\d*`以获取两边的数字。

如果根本没有找到匹配项，则以下将返回 0，如果找到匹配项，则返回 >0。

`preg_match_all('/^(.*)times(.*)$/', $yourStringToSearch, $arr, PREG_PATTERN_ORDER);`

如果找到匹配项，`$arr`将被填充。

因此，例如，如果找到“次”，但没有前/后文本，那么它将返回 1，并且`$arr[0]`仅包含“次”。

因此，例如，如果`$yourStringToSearch`包含“5 乘以 8”，则将`$arr`按如下方式填充（其中`$arr[0]`是整个匹配，`$arr[1]`是前置文本，`$arr[2]`是后置文本）。

```
Array
(
    [0] => Array
        (
            [0] => 5 times 8
        )

    [1] => Array
        (
            [0] => 5
        )

    [2] => Array
        (
            [0] =>  8
        )

) 
```

但是，要小心，因为如果`$yourStringToSearch = "5 _times_ -times- 8"`它会返回：

```
Array
(
    [0] => Array
        (
            [0] => 5 _times_ -times- 8
        )

    [1] => Array
        (
            [0] => 5 _times_ -
        )

    [2] => Array
        (
            [0] => - 8
        )

) 
```

也就是说 - 您需要指定在您的搜索字符串在目标中出现多次的情况下要发生的情况，或者在这种情况下接受“默认”，即您的搜索词的第一个匹配项是“the”匹配.

如果您需要确保搜索词被空格包围，那么以下两个将起作用。第一个假设您不想“捕获”该空间，而第二个将在捕获中包含该空间：

`preg_match_all('/^(.*) times (.*)$/', $yourStringToSearch, $arr, PREG_PATTERN_ORDER);`

`preg_match_all('/^(.* )times( .*)$/', $yourStringToSearch, $arr, PREG_PATTERN_ORDER);`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-25T00:29:15.640

我不完全确定你在尝试什么，但也许这会有所帮助：

如果您使用[explode($delimiter, $string, [$limit])](http://php.net/manual/en/function.explode.php)来分解字符串，在您将“times”作为$delimiter 的示例的情况下，您可以获得一个以5 和8 作为值的数组。

所以：

```
$string = "5 times 8"
$delimiter = " times "
$array = explode($delimiter, $string) 
```

会产生

```
$array[0] = 5
$array[1] = 8 
```

希望这可以帮助！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-25T00:27:12.913

您可以使用该`substr`功能：[http](http://www.php.net/manual/en/function.substr.php) ://www.php.net/manual/en/function.substr.php ，如果您不知道单词的位置，请使用`strpos`它： http: [//php.net /manual/en/function.strpos.php](http://php.net/manual/en/function.strpos.php)

# c++ - std::sort 使用继承的仿函数

> ID：15605834
> 
> 赞同：5
> 
> 时间：2013-03-25T00:22:34.133
> 
> 标签：c++, pointers, c++11, std

我想使用不同的策略对向量进行排序。但我不知道如何传递一个子仿函数并在`std::sort`以后使用它。每当我使用抽象类进行排序策略时，我都会`cannot allocate an object of abstract type`出错。有没有办法使用继承的函子作为`std::sort`参数？谢谢！

```
#include <iostream>
#include <vector>
#include <algorithm>
using namespace std;

class BaseSort{
public:
    virtual ~BaseSort() {};
    virtual bool operator()(const int& a, const int& b) = 0;
};

class Asc : public BaseSort{
public:
    bool operator()(const int& a, const int& b){
        return a < b;
    }
};

class Desc : public BaseSort{
public:
    bool operator()(const int& a, const int& b){
        return a > b;
    }
};

void print(const vector<int>& values) {
    for (unsigned i = 0; i < values.size(); ++i) {
        cout << values[i] << ' ';
    }
    cout << endl;
}

int main() {
    vector<int> values = {2,1,3};
    sort(values.begin(), values.end(), Asc()); // {1,2,3}
    print(values);
    sort(values.begin(), values.end(), Desc()); // {3,2,1}
    print(values);
    Asc* asc = new Asc();
    sort(values.begin(), values.end(), *asc); // {1,2,3}
    print(values);
    BaseSort* sortStrategy = new Desc();
    sort(values.begin(), values.end(), *sortStrategy); //cannot allocate an object of abstract type ‘BaseSort’
    print(values);
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-25T00:27:07.457

您必须使用[`std::ref()`](http://en.cppreference.com/w/cpp/utility/functional/ref)，否则参数将按值传递（导致尝试复制构造类型的对象`BaseSort`，这是非法的，因为`BaseSort`它是抽象的 - 即使不是，您也会得到*slicing*）：

```
sort(values.begin(), values.end(), std::ref(*sortStrategy));
//                                 ^^^^^^^^ 
```

# android - Android - ViewPager 导致 addTextChangeListener 出现问题

> ID：15605835
> 
> 赞同：0
> 
> 时间：2013-03-25T00:22:39.507
> 
> 标签：android, android-fragments, nullpointerexception, android-viewpager

我在使用 a`ViewPager`填充两个的活动时遇到问题`Fragments`。在我的项目中，我有一个活动 RegisterActivity.java 和两个片段：FirstFragment.java 和 SecondFragment.java。创建活动时，会加载两个片段：

```
public class RegisterActivity extends FragmentActivity {
    SectionsPagerAdapter mSectionsPagerAdapter;
    ViewPager mViewPager;
    EditText firstName;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_register);

        mSectionsPagerAdapter = new SectionsPagerAdapter(getSupportFragmentManager());

        mViewPager = (ViewPager) findViewById(R.id.pager);
        mViewPager.setAdapter(mSectionsPagerAdapter);

        firstName = (EditText) findViewById(R.id.edit_text_register_first_name);

        firstName.addTextChangedListener(new TextWatcher() {
            @Override
            public void afterTextChanged(Editable arg0) { }

            @Override
            public void beforeTextChanged(CharSequence arg0, int arg1, int arg2, int arg3) { }

            @Override
            public void onTextChanged(CharSequence arg0, int arg1, int arg2, int arg3) {
                // Do something...
            }

        });
    }

    public class SectionsPagerAdapter extends FragmentPagerAdapter {
        public SectionsPagerAdapter(FragmentManager fm) {
            super(fm);
        }

        @Override
        public Fragment getItem(int position) {
            switch (position) {
                case 0:
                    FirstFragment firstFragment = new FirstFragment();
                    return firstFragment;
                case 1:
                    SecondFragment secondFragment = new SecondFragment();
                    return secondFragment;              
            }
            return null;
        }

        @Override
        public int getCount() {
            return 2;
        }

        @Override
        public CharSequence getPageTitle(int position) {
            ...
        }
    }
} 
```

在 FirstFragment.java 中可以找到以下代码：

```
public class FirstFragment extends Fragment {

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        View firstInterface = inflater.inflate(R.layout.fragment_first, container, false);
        return firstInterface;
    }
} 
```

和 SecondFragment.java：

```
public class SecondFragment extends Fragment {

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        View secondInterface = inflater.inflate(R.layout.fragment_second, container, false);
        return secondInterface;
    }
} 
```

我可以向您保证，所有进口商品等都按要求提供。当我运行应用程序时，我`NullPointerException`在第 41 行得到一个，这`addTextChangedListener`是声明的地方。根据我所做的阅读，我猜测为什么会发生错误是因为`edit_dext_register_first_name`它不是`setContentView(R.layout.activity_register);`. 尽管它是其中一个片段布局的一部分，但应用程序不知道在哪里寻找 my `EditText`，因此`NullPointerException`. 不过我可能是错的。

我正在努力寻找如何解决这个问题，所以任何建议都将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T00:25:33.347

将 OnTextChangedListener 放在声明 EditText 的片段中。

# python - 如何从python字典中获取特定键的最大值

> ID：15605836
> 
> 赞同：0
> 
> 时间：2013-03-25T00:22:43.883
> 
> 标签：python, dictionary, max

我有一个python dict，如下所示：

```
a={
  u'data': [
    [u'2013-03-19', u'1363762799', u'4004658'],
    [u'2013-03-20', u'1363849199', u'4756668']
  ],
  u'columns': [
    u'dt_pst',
    u'timestamp',
    u'count'
  ]
} 
```

如何获得键 u'timestamp' 的最大值？我想要这个号码：1363849199。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T00:30:34.490

首先将其转换为可用格式：

```
>>> d = {row[0]: row[1:] for row in zip(a['columns'], *a['data'])}
>>> d
    {u'count': (u'4004658', u'4756668'),
 u'dt_pst': (u'2013-03-19', u'2013-03-20'),
 u'timestamp': (u'1363762799', u'1363849199')} 
```

如果您使用的是 2.6，则 dict 理解将不起作用。您需要使用`dict()`构造函数：

```
d = dict((row[0], row[1:]) for row in zip(a['columns'], *a['data'])) 
```

现在，您可以使用`max`：

```
>>> max(d['timestamp'], key=int)
    u'1363849199'
>>> max(map(int, d['timestamp']))
    1363849199 
```

# python - 如何在python中删除字符串前后的字符？

> ID：15605849
> 
> 赞同：1
> 
> 时间：2013-03-25T00:24:40.027
> 
> 标签：python

如何从字符串中删除换行符回车的空格和条？我试过了：

```
a = []
for i in range(len(lines)):
     a.append(lines[i].rstrip().lstrip('\n')) 
```

lines 是使用 readlines() 函数创建的行列表。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-25T00:30:26.600

[`str.strip()`](http://docs.python.org/3.3/library/stdtypes.html#str.strip)从字符串的任一侧删除所有空格，因此最简单的方法就是：

```
with open("source.txt") as file:
    a = [line.strip() for line in file] 
```

您的代码的问题是您正在使用[`str.lstrip()`](http://docs.python.org/3.3/library/stdtypes.html#str.lstrip)并且[`str.rstrip()`](http://docs.python.org/3.3/library/stdtypes.html#str.rstrip)错误的方式 - 换行符在右侧，但您试图从左侧剥离它。换行符被剥离，因为`str.rstrip()`从右边剥离所有空格（包括换行符），而`str.lstrip("\n")`从左边找不到换行符，所以什么也不做，因此你的问题。

如果您需要在换行符*之外*留下尾随空格，那么您会想要`line.rstrip("\n").lstrip()`- 从原始代码中交换左右条带的参数。这将确保除了换行符之外没有空格被剥离，就像上面的代码一样。

请注意，我使用[列表推导](http://www.youtube.com/watch?v=pShL9DCSIUw)来执行此操作 - 它更具可读性和效率，并且是执行此类任务的好方法。

我还直接在文件对象上循环，因为这样更有效（不必将行加载到内存中）。请注意我使用[with 语句](http://www.youtube.com/watch?v=lRaKmobSXF4)打开文件 - 这是 Python 中的最佳实践，因为它可以保护您免受细微错误的影响，并且（再次）更具可读性

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T00:32:38.117

```
a = [line.strip() for line in lines] 
```

我认为在放入行列表之前最好先剥离

# ios - 调整 UILabel 的大小以适应自定义 UITableViewCell 中的文本，无论宽度如何

> ID：15605853
> 
> 赞同：4
> 
> 时间：2013-03-25T00:25:01.627
> 
> 标签：ios, uitableview, uilabel

我试图让单元格中的标签大小合适，无论设备或方向如何。我能够正确调整行高。我还可以在 中正确设置标签高度`cellForRowAtIndexPath`，并且可以在我的日志中进行检查。但是，当它到达时`willDisplayRowAtIndexPath`，标签高度已经改变，但只有当单元格不是 320 pts 宽时。

这是我的代码-

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
static NSString *CellIdentifier = @"CustomCellIdentifier";
CustomInfoCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell == nil){
    cell = [[CustomInfoCell alloc] initWithStyle:UITableViewCellStyleValue1 reuseIdentifier:CellIdentifier];
    NSArray *objects = [[NSBundle mainBundle] loadNibNamed:@"CustomInfoCell" owner:self options:nil];
    cell = objects[0];
}

// Configure the cell...
cell.customTitleLabel.text = [_data[indexPath.row] objectForKey:t];

CGFloat labelWidth = self.view.frame.size.width-40;
NSLog(@"labelWidth:%f",labelWidth);

NSString *text = [_data[indexPath.row] objectForKey:d];//correct text
CGSize labelsize=[text sizeWithFont:cell.customDetailLabel.font constrainedToSize:CGSizeMake(labelWidth, 2000.0) lineBreakMode:cell.customDetailLabel.lineBreakMode];
NSLog(@"labelsize:%f,%f",labelsize.width,labelsize.height);

//For testing
cell.customDetailLabel.backgroundColor = [UIColor redColor];
NSLog(@"Pre: %@",cell.customDetailLabel);
cell.customDetailLabel.frame=CGRectMake(20, 22, labelWidth, labelsize.height);

cell.customDetailLabel.text = text;
    NSLog(@"Post: %@",cell.customDetailLabel);
return cell;
} 
```

在`willDisplayRowAtIndexPath`我还打印标签信息。这是一行打印的内容-

```
2013-03-24 18:33:44.009 Bridge Alert[57793:1e503] labelWidth:728.000000
2013-03-24 18:33:44.010 Bridge Alert[57793:1e503] labelsize:713.000000,76.000000
2013-03-24 18:33:44.010 Bridge Alert[57793:1e503] Pre: <UILabel: 0xad3eaf0; frame = (20 20; 280 21); text = 'Detail'; clipsToBounds = YES; opaque = NO; autoresize = RM+BM; userInteractionEnabled = NO; layer = <CALayer: 0x17372eb0>>
2013-03-24 18:33:44.011 Bridge Alert[57793:1e503] Post: <UILabel: 0xad3eaf0; frame = (20 22; 728 76); text = 'Detail'; clipsToBounds = YES; opaque = NO; autoresize = RM+BM; userInteractionEnabled = NO; layer = <CALayer: 0x17372eb0>>
2013-03-24 18:33:44.011 Bridge Alert[57793:1e503] Text set: <UILabel: 0xad3eaf0; frame = (20 22; 728 76); text = 'A bridge is considered “f...'; clipsToBounds = YES; opaque = NO; autoresize = RM+BM; userInteractionEnabled = NO; layer = <CALayer: 0x17372eb0>>
2013-03-24 18:33:44.014 Bridge Alert[57793:1e503] Display:<UILabel: 0xad3eaf0; frame = (20 20; 728 190); text = 'A bridge is considered “f...'; clipsToBounds = YES; opaque = NO; autoresize = RM+BM; userInteractionEnabled = NO; layer = <CALayer: 0x17372eb0>> 
```

如您所见，通过 Display 调整了标签的大小。我假设高度以某种方式重新计算，基于单元格是否为 320 pt 宽，这是内置的 UITableViewCell 宽度。

我怎样才能让标签的尺寸正确？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-12-14T15:27:56.797

这就是使用**AutoLayout**尽可能少的代码对我有用的方法。

在我的 ViewController 中，我添加了以下方法

```
-(CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
{        
    NSString * yourText = //place here the text you want to calculate its size;
    return 40 + [self heightForText:yourText];
}

-(CGFloat)heightForText:(NSString *)text
{
    NSInteger MAX_HEIGHT = 2000;
    UITextView * textView = [[UITextView alloc] initWithFrame: CGRectMake(0, 0, 320, MAX_HEIGHT)];
    textView.text = text;
    textView.font = [UIFont boldSystemFontOfSize:12];
    [textView sizeToFit];
    return textView.frame.size.height;
} 
```

上面的代码基本上根据我的 UILabel 的大小 + 一个填充数（在我的例子中定义为 40）改变了 UITableViewCell 的大小。

在此之后，我必须添加几个约束，如下所示，以使 UILabel 像 UITableViewCell 一样“拉伸”

![在此处输入图像描述](../Images/d9569f5f39eec0f2c7b934ddff2640b7.png)

运行后：

![在此处输入图像描述](../Images/e77363c6d1abc93d5585ff5bdb003eba.png)

**注意：**我从 SO 中的许多线程中提取了不同的代码来提出这个解决方案。我希望我能记住这里提到的所有人

希望它对你们有用。

干杯

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-26T16:52:47.857

您是否尝试过取消选中自动布局？这将消除不必要的（大多是无用的）约束。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-26T03:24:04.257

在我看来，界面构建器/故事板可能很有用，但通常会增加另一个不必要的复杂层。我会简单地将 UITableViewCell 子类化（就像你一样，但纯粹以编程方式进行）并使用 layoutSubviews 设置 customDetailLabel 的框架。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-25T00:38:48.647

我曾经遇到过完全相同的问题，由于某种原因，标签高度在实际显示时会发生变化。我最终使用了免费的 Sensible TableView 框架，它实际上可以正确调整大小（如果您选择使用多行 UILabel，它甚至会调整单元格的大小）。该框架还从我的对象的属性中自动分配了标签的文本，这真的很酷。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-26T01:37:05.833

`setFrame`设置框架后，尝试在您的类中覆盖`CustomInfoCell`以包括调整单元格中元素的大小。我已经包含了用于完成此操作的代码，这与您的实现略有不同。另外，在您的标签上，我将自动调整大小掩码设置为`UIViewAutoresizingFlexibleWidth`.

在文件的顶部有这个：

```
static void *kKVOContext;   // See: http://www.dribin.org/dave/blog/archives/2008/09/24/proper_kvo_usage/ 
```

在 viewDidLoad 中包括：

```
[self.textLabel addObserver:self forKeyPath:@"text" options:NSKeyValueObservingOptionNew context:&kKVOContext];
[[UIDevice currentDevice] beginGeneratingDeviceOrientationNotifications];
[[NSNotificationCenter defaultCenter] addObserver:self
               selector:@selector(orientationChanged:)
                   name:UIDeviceOrientationDidChangeNotification
                 object:[UIDevice currentDevice]]; 
```

然后包括：

```
- (void)setFrame:(CGRect)frame
{
    [super setFrame:frame];

    //Resize elements to fit inside new frame
    [self textChanged];
}

- (CGSize)textLabelSize
{
    BOOL portrait = UIInterfaceOrientationIsPortrait([UIApplication sharedApplication].statusBarOrientation);
    CGFloat width = portrait ? [UIScreen mainScreen].bounds.size.width : [UIScreen mainScreen].bounds.size.height;
    CGFloat maxWidth = width - 90 - TEXT_X_LEFT_PADDING;
    CGSize maximumLabelSize = CGSizeMake(maxWidth, 10000);

    return [self.textLabel.text sizeWithFont:self.textLabel.font
                                               constrainedToSize:maximumLabelSize
                                                   lineBreakMode:self.textLabel.lineBreakMode];
}
- (CGFloat)cellHeight
{
    CGSize expectedLabelSize = [self textLabelSize];

    return (self.titleLabel.frame.origin.y+self.titleLabel.frame.size.height) + expectedLabelSize.height;
}

- (void)observeValueForKeyPath:(NSString *)keyPath
                      ofObject:(id)object
                        change:(NSDictionary *)change
                       context:(void *)context {

    if ([keyPath isEqual:@"text"] && object == self.textLabel) {
        [self textChanged];
    }

    if(context != &kKVOContext)
    {
        [super observeValueForKeyPath:keyPath
                             ofObject:object
                               change:change
                              context:context];
    }
}

- (void)orientationChanged:(NSNotification *)note
{
    //Resize text on orientation change
    [self textChanged];
}

- (void)textChanged
{
    CGRect newFrame = self.textLabel.frame;
    newFrame.size = [self textLabelSize];

    if(!CGRectEqualToRect(self.textLabel.frame, newFrame))
    {
        self.textLabel.frame = newFrame;
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-04-27T11:53:54.740

只需发布我自己基于@Paulo 的简化方法，但现在适应故事板约束宽度和更准确。

（迅速）

```
override func tableView(tableView: UITableView, heightForRowAtIndexPath indexPath: NSIndexPath) -> CGFloat {
    let cell = tableView.dequeueReusableCellWithIdentifier("cellIdentifier")!

    // Use subclass of UITableViewCell if your cell is complex.
    let label = cell.viewWithTag(3001) as! UILabel;
    label.text = someStringArray[indexPath.row]
    label.sizeToFit();

    let y = label.frame.origin.y
    let height = label.frame.size.height
    let paddingBottom: CGFloat = 8
    // add other controls/view height if any after the expand label

    return y + height + paddingBottom
} 
```

# c# - 任务取消和任务继续选项

> ID：15605860
> 
> 赞同：4
> 
> 时间：2013-03-25T00:25:32.887
> 
> 标签：c#, task-parallel-library

昨天我刚刚被介绍给 Tasks (TPL)，所以我尝试做一个小示例项目，以便了解如何使用它们。

我的示例项目设置了一个开始按钮，该按钮开始增加进度条。用于取消任务的第二个按钮。当调用使用 TaskContinuationOptions.OnlyOnRanToCompletion 的延续时报告的文本框，以及调用使用 TaskContinuationOptions.OnlyOnCanceled 的延续时报告的文本框。

我可以创建和执行一个任务，但是以一种让 TaskContinuationOptions.OnlyOnCanceled 标志继续触发的方式取消它一直是个问题。

我创建的任务如下：

```
private void StartTask()
{
    CancellationTokenSource tokenSource = new CancellationTokenSource();
    CancellationToken token = tokenSource.Token;

    Task task = null;
    task = Task.Factory.StartNew(() => DoWork(tokenSource), tokenSource.Token);

    //A list<CancellationTokenSource> so that I can cancel the task when clicking a button on the UI Thread.
    MyTasks.Add(tokenSource);

    Task completed = task.ContinueWith(result => TaskCompleted(), TaskContinuationOptions.OnlyOnRanToCompletion);
    Task canceled = task.ContinueWith(result => TaskCanceled(), TaskContinuationOptions.OnlyOnCanceled);
} 
```

我取消任务如下：

```
private void CancelTasks()
{
    foreach (CancellationTokenSource tokenSource in MyTasks)
    {
        tokenSource.Cancel();                
    }
} 
```

我的工人功能如下：

```
private void DoWork(CancellationTokenSource tokenSource)
{
    if (progressBar1.InvokeRequired)
    {
        progressBar1.Invoke(new Action(() => DoWork(tokenSource)));
        return;
    }

    try
    {
        bool dowork = true;
        while (dowork)
        {
            tokenSource.Token.ThrowIfCancellationRequested();

            if (progressBar1.Value == progressBar1.Maximum)
            {
                dowork = false;
            }
            Thread.Sleep(1000);
            progressBar1.PerformStep();
            Application.DoEvents();
        }
        countCompleted++;
    }
    catch (OperationCanceledException)
    {                
    }
} 
```

在我读过的其他帖子中，有人建议 tokenSource.Token.ThrowIfCancellationRequested() 设置由 TaskContinuationOptions.OnlyOnCanceled 评估的条件。

我见过的例子都没有包括使用：

```
catch (OperationCanceledException)
{
} 
```

但是，如果没有它，当我调用 tokenSource.Cancel(); 时程序会停止；

就目前而言，当我调用 tokenSource.Cancel() 时，使用 TaskContinuationOptions.OnlyOnRanToCompletion 的继续运行，而不是 TaskContinuationOptions.OnlyOnCanceled。

显然我没有正确地做到这一点。

**编辑**：

做一些进一步的阅读，我发现一条评论说：

“catch (OperationCanceledException) {} 会将任务的状态设置为 RanToCompletion，而不是 Canceled”

因此删除 catch (OperationCanceledException) {} 允许将任务的状态设置为已取消，但程序在 tokenSource.Token.ThrowIfCancellationRequested(); 但是如果我继续休息，带有 TaskContinuationOptions.OnlyOnCanceled 的继续任务运行，这很好。

但是我如何调用 tokenSource.Token.ThrowIfCancellationRequested() 而不允许程序中断并且允许将任务状态设置为已取消？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-25T09:38:52.940

上面的评论在调试器和防止调试器中断所需的选项方面是正确的。但是，以下内容应该为您提供一个更好的示例，说明如何使用延续以及如何处理从这些延续中的任务引发的异常......

`Task`延续可以通过前面任务的异常属性来查明前面是否抛出了异常。以下将 a 的结果打印`NullReferenceException`到控制台

```
Task task1 = Task.Factory.StartNew (() => { throw null; });
Task task2 = task1.ContinueWith (ant => Console.Write(ant.Exception()); 
```

如果`task1`抛出异常并且该异常未被继续捕获/查询，则它被视为未处理并且应用程序终止。`Status`使用延续，通过关键字确定任务的结果就足够了

```
asyncTask.ContinueWith(task =>
{
    // Check task status.
    switch (task.Status)
    {
        // Handle any exceptions to prevent UnobservedTaskException.             
        case TaskStatus.RanToCompletion:
            if (asyncTask.Result)
            {
                // Do stuff...
            }
            break;
        case TaskStatus.Faulted:
            if (task.Exception != null)
                mainForm.progressRightLabelText = task.Exception.InnerException.Message;
            else
                mainForm.progressRightLabelText = "Operation failed!";
        default:
            break;
    }
} 
```

如果您不使用延续，您要么必须等待 / 块中的任务，要么查询`try`/块中的任务`catch``Result``try``catch`

```
int x = 0;
Task<int> task = Task.Factory.StartNew (() => 7 / x);
try
{
    task.Wait();
    // OR.
    int result = task.Result;
}
catch (AggregateException aggEx)
{
    Console.WriteLine(aggEx.InnerException.Message);
} 
```

希望这可以帮助。

# php - CodeIgniter 在非对象上调用成员函数 get_where()

> ID：15605879
> 
> 赞同：-1
> 
> 时间：2013-03-25T00:28:14.917
> 
> 标签：php, codeigniter

我是 codeigniter 的超级新手，我正在尝试弄清楚如何使用模型，我之前使用过 MVP 框架，但它有点不同。我有用户控制器，它初始化模型（我认为我做对了），然后模型有一个函数，它通过电子邮件获取一行。

控制器看起来像：

```
class Users extends CI_Controller{
    public function login(){
        $this->load->model('users_model');

        $this->users_model->login('slavigne@uark.edu', 'abcdefg');

        $this->load->view('templates/header');
        $this->load->view('users/login');
        $this->load->view('templates/footer');
    }
} 
```

模型看起来像：

```
class users_model extends CI_Model{
    public function users_model(){
            parent::__construct();
    }

    public function login($email, $password){
        $query = $this->db->get_where('users', array('email' => $email));
        return $query->result();
    }
} 
```

我遇到的问题是：

```
Call to a member function get_where() on a non-object 
```

我理解这意味着 db 不是一个对象，但是我看到的所有模型代码都说这应该可以工作。任何帮助或建议都会很棒！此外，任何关于新手对 codeigniter 错误的建议都会很好！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T00:34:56.343

你好像错过了`$this->load->database();`

```
class users_model extends CI_Model{
    public function users_model(){
            parent::__construct();
    }

    public function login($email, $password){
        $this->load->database();
        $query = $this->db->get_where('users', array('email' => $email));
        return $query->result();
    }
} 
```

您还可以在`application/config/autoload.php`文件中自动加载数据库库。

```
$autoload['libraries'] = array('database'); 
```

如果这样做，则不需要每次都手动加载它，但这也意味着它会加载到没有进行数据库调用的页面上。可能更关心优化器以节省带宽。

此外，如果您使用多个数据库连接，则仍应使用`$this->load->database();`tho。有关更多信息，请参阅此链接：http: [//ellislab.com/codeigniter/user-guide/database/connecting.html](http://ellislab.com/codeigniter/user-guide/database/connecting.html)

```
$DB1 = $this->load->database('group_one', TRUE);
$DB2 = $this->load->database('group_two', TRUE); 
```

而不是使用..

```
$this->db->query();
$this->db->result(); 
```

..您将改为使用：

```
$DB1->query();
$DB1->result();
$DB2->query();
$DB2->result(); 
```

您仍然可以将负载添加到`__construct()`，因此每个控制器只需要一条线。

# jquery - 使用jstree创建节点时如何使用自定义文件夹图标？

> ID：15605888
> 
> 赞同：0
> 
> 时间：2013-03-25T00:30:01.660
> 
> 标签：jquery, jstree

使用 jstree 创建默认自定义文件夹没问题，例如，

```
 $("#treeFile1").jstree({ 
 "plugins" : ["themes","html_data","ui","crrm","types"], 
    "types" : {
        "valid_children" : [ "none" ],
    "types" : {
            "rootNote" : {
                    "valid_children" : ["none"],
           "icon" : { "image" : "/bk/tree/_demo/customFolder.png"}
},
  } 
  }); 
```

在上述代码启动后尝试使用自定义文件夹创建节点时出现。

这是我失败的尝试：

```
$("#treeFile1").jstree("create", null, "outside", {"attr" : {"rel" : "rootNote"}}); 
```

注意：Firefox 控制台没有显示错误消息

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T19:03:23.380

不知道为什么，但在删除 valid_children 属性及其值后，它解决了这个问题。

```
$("#treeFile1").jstree({ 
                          "plugins" : ["themes","html_data","ui","crrm","types"], 
                          "types" : {
                                       "types" : {
                                                   "rootNote" : {

                         "icon" : { "image" : "/bk/tree/_demo/customFolder.png"}
                                            },
                                   } 
                          }); 
```

# android - 预验证类中的 java.lang.IllegalAccessError 类引用解析为意外实现

> ID：15605898
> 
> 赞同：4
> 
> 时间：2013-03-25T00:30:44.387
> 
> 标签：android, android-activity, android-service, runtime-error

当我按下一个按钮来启动 MainActivity 中的一个方法时，我得到一个“java.lang.IllegalAccessError class ref in preverified class resolve to unexpected implementation”错误，该方法应该启动一个新的 Activity。我能做些什么来解决这个问题？这是我第一次尝试制作安卓应用程序，所以需要一步一步的说明:)

此外，我还无法测试它是否有效，但如果您发现我的 AugiActivity 服务实现或本地广播实现有任何问题，请随时告诉我。

谢谢！

fyi：MainActivity 启动 Navigation Activity，它启动 Service AugiActivity

Augi 活动向 Navigation 发送本地广播消息

日志猫：

```
03-24 20:01:56.632: E/AndroidRuntime(11183): FATAL EXCEPTION: main
03-24 20:01:56.632: E/AndroidRuntime(11183): java.lang.IllegalStateException: Could not     
execute method of the activity
03-24 20:01:56.632: E/AndroidRuntime(11183): at 
android.view.View$1.onClick(View.java:2154)
03-24 20:01:56.632: E/AndroidRuntime(11183):    at 
android.view.View.performClick(View.java:2537)
03-24 20:01:56.632: E/AndroidRuntime(11183):    at 
android.view.View$PerformClick.run(View.java:9157)
03-24 20:01:56.632: E/AndroidRuntime(11183):    at 
android.os.Handler.handleCallback(Handler.java:587)
03-24 20:01:56.632: E/AndroidRuntime(11183):    at 
android.os.Handler.dispatchMessage(Handler.java:92)
03-24 20:01:56.632: E/AndroidRuntime(11183):    at 
android.os.Looper.loop(Looper.java:130)
03-24 20:01:56.632: E/AndroidRuntime(11183):    at   
android.app.ActivityThread.main(ActivityThread.java:3687)
03-24 20:01:56.632: E/AndroidRuntime(11183):    at   
java.lang.reflect.Method.invokeNative(Native Method)
03-24 20:01:56.632: E/AndroidRuntime(11183):    at   
java.lang.reflect.Method.invoke(Method.java:507)
03-24 20:01:56.632: E/AndroidRuntime(11183):    at 
com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:842)
03-24 20:01:56.632: E/AndroidRuntime(11183):    at   
com.android.internal.os.ZygoteInit.main(ZygoteInit.java:600)
03-24 20:01:56.632: E/AndroidRuntime(11183):    at   
dalvik.system.NativeStart.main(Native Method)
03-24 20:01:56.632: E/AndroidRuntime(11183): Caused by:   
java.lang.reflect.InvocationTargetException
03-24 20:01:56.632: E/AndroidRuntime(11183):    at 
java.lang.reflect.Method.invokeNative(Native Method)
03-24 20:01:56.632: E/AndroidRuntime(11183):    at 
java.lang.reflect.Method.invoke(Method.java:507)
03-24 20:01:56.632: E/AndroidRuntime(11183):    at 
android.view.View$1.onClick(View.java:2149)
03-24 20:01:56.632: E/AndroidRuntime(11183):    ... 11 more
03-24 20:01:56.632: E/AndroidRuntime(11183): Caused by: java.lang.NoClassDefFoundError: 
com.example.augi_practice.Navigation
03-24 20:01:56.632: E/AndroidRuntime(11183):    at 
com.example.augi_practice.MainActivity.navigation(MainActivity.java:33)
03-24 20:01:56.632: E/AndroidRuntime(11183):    ... 14 more
03-24 20:01:56.632: E/AndroidRuntime(11183): Caused by: java.lang.IllegalAccessError: 
Class ref in pre-verified class resolved to unexpected implementation
03-24 20:01:56.632: E/AndroidRuntime(11183):    at 
dalvik.system.DexFile.defineClass(Native Method)
03-24 20:01:56.632: E/AndroidRuntime(11183):    at 
dalvik.system.DexFile.loadClassBinaryName(DexFile.java:207)
03-24 20:01:56.632: E/AndroidRuntime(11183):    at 
dalvik.system.PathClassLoader.findClass(PathClassLoader.java:200)
03-24 20:01:56.632: E/AndroidRuntime(11183):    at 
java.lang.ClassLoader.loadClass(ClassLoader.java:551)
03-24 20:01:56.632: E/AndroidRuntime(11183):    at 
java.lang.ClassLoader.loadClass(ClassLoader.java:511)
03-24 20:01:56.632: E/AndroidRuntime(11183):    ... 15 more 
```

XML 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.example.augi_practice"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="3"
    android:targetSdkVersion="10" />

<uses-permission android:name="android.permission.CAMERA" />
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.BLUETOOTH" />
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" /> 

<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name="com.example.augi_practice.MainActivity"
        android:label="@string/app_name"
        android:screenOrientation="landscape" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
        <intent-filter>
            <action android:name="android.hardware.usb.action.USB_ACCESSORY_ATTACHED"   
/>
        </intent-filter>
    </activity>
     <activity
        android:name="com.example.augi_practice.Navigation"
        android:label="@string/title_activity_navigation" 
        android:screenOrientation="landscape" >
    </activity>
    <service
        android:name="com.example.augi_practice.AugiActivity"
        android:label="@string/title_activity_augi"
        android:parentActivityName="com.example.augi_practice.Navigation"
        android:screenOrientation="landscape" >
        <meta-data
            android:name="android.support.PARENT_ACTIVITY"
            android:value="com.example.augi_practice.Navigation" />            
    </service>       
    <uses-library android:name="com.google.android.maps" />    
</application>

</manifest> 
```

主要活动：

```
package com.example.augi_practice;

import ioio.lib.util.android.IOIOActivity;
import android.os.Bundle;
import android.app.Activity;
import android.content.Intent;
import android.view.Menu;
import android.view.View;

public class MainActivity extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

public void call_ioio(View v)
{   
    Intent intent = new Intent(this, AugiActivity.class);
    startActivity(intent);
}

public void navigation(View v)
{   
    Intent intent = new Intent(this, Navigation.class);
    startActivity(intent);
}

} 
```

导航活动：

```
package com.example.augi_practice;

// Lots of imports here

public class Navigation extends MapActivity implements Runnable,   
SurfaceHolder.Callback{

String LED = null;
String MAG = null;
String BAR = null;
String GYRO = null;
String EULER = null;    
String GGA = null;

private BroadcastReceiver MessageReceiver = new BroadcastReceiver()
{
    @Override
    public void onReceive(Context context, Intent intent)
    {
        LED = intent.getStringExtra("LED");
        MAG = intent.getStringExtra("MAG");
        BAR = intent.getStringExtra("BAR");
        GYRO = intent.getStringExtra("GYRO");
        EULER = intent.getStringExtra("EULER");
        GGA = intent.getStringExtra("GGA");         
    }
};

// More global variables

// Lots of gui variables here

// More global variables

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_navigation);
    MapView mapview = (MapView) findViewById(R.id.mapview);
    mapview.setBuiltInZoomControls(true);   

    getWindow().setFormat(PixelFormat.UNKNOWN);

    // Camera configuration settings

    LocalBroadcastManager.getInstance(this).registerReceiver(MessageReceiver, 
new IntentFilter("IOIOData"));

    getWindow().addFlags(WindowManager.LayoutParams.FLAG_KEEP_SCREEN_ON);

            // Lots of links from acivity to gui 

    startService( new Intent(this, AugiActivity.class));        
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_navigation, menu);
    return true;
}

@Override
protected boolean isRouteDisplayed() {
    // TODO Auto-generated method stub
    return false;
}

@Override
public void surfaceChanged(SurfaceHolder holder, int format, int width,
        int height) {
    // TODO Auto-generated method stub

}

@Override
public void surfaceCreated(SurfaceHolder holder) {
    // TODO Auto-generated method stub

}

@Override
public void surfaceDestroyed(SurfaceHolder holder) {
    // TODO Auto-generated method stub

}

public void sensorLayer(View v)
{
    // Executes some code
}

public void mapLayer(View v)
{
    // Executes some code
}

public void cameraLayer(View v)
{
    // Executes some code
}   

@Override
public void run() {
    //Executes some code
}   
} 
```

AugiActivity 的一部分：

```
package com.example.augi_practice;

//lots of imports here

public class AugiActivity extends Service { 

public Activity activity_name;

class IOIO extends IOIOActivity {   

// Lots of global variables

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState); 
    activity_name = this.getParent();
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.        
    return true;
}

class Looper extends BaseIOIOLooper {
    /** The on-board LED. */
    // Class variables

    public Activity activity_name;

    Looper(Activity x)
    {
        this.activity_name = x;
    }       

    // More class variables

    /**
    * Called every time a connection with IOIO has been established.
    * Typically used to open pins.
    *   
    * @throws ConnectionLostException
    *             When IOIO connection is lost.
     * @throws InterruptedException 
    * 
    * @see ioio.lib.util.AbstractIOIOActivity.IOIOThread#setup()
    */
        @Override
        protected void setup() throws ConnectionLostException, 
InterruptedException 
        {
            // establish various connections here

            bar_calibration();      
            mag_setup();
            imu_setup();    
            try {
                gps_setup();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }

        // Various setup methods here

    /**
    * Called repetitively while the IOIO is connected.
    * 
    * @throws ConnectionLostException
    *             When IOIO connection is lost.
     * @throws InterruptedException 
    * 
    * @see ioio.lib.util.AbstractIOIOActivity.IOIOThread#loop()
    */

    @Override
        public void loop() throws ConnectionLostException, 
InterruptedException 
        {           
            get_light();

            get_temp();

            get_pressure();

            get_north();

            get_imu();

            try {
                get_gps();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

            led_.write(true);   

            sendMessage();
        }

        // Various methodes to get data

        private void sendMessage()
        {
            Intent intent = new Intent("IOIOData");     

            intent.putExtra("LED", get_LED());

LocalBroadcastManager.getInstance(activity_name).sendBroadcast(intent);

            intent.putExtra("MAG", get_MAG());

LocalBroadcastManager.getInstance(activity_name).sendBroadcast(intent);

            intent.putExtra("BAR", get_BAR());

LocalBroadcastManager.getInstance(activity_name).sendBroadcast(intent);

            intent.putExtra("GYRO", get_GYRO());

LocalBroadcastManager.getInstance(activity_name).sendBroadcast(intent);

            intent.putExtra("EULER", get_EULER());

LocalBroadcastManager.getInstance(activity_name).sendBroadcast(intent);

            intent.putExtra("GGA", gps_GGA);

LocalBroadcastManager.getInstance(activity_name).sendBroadcast(intent);
        }
    } 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-08-20T12:31:18.943

就我而言，我更改了 Intelij Idea 中的项目设置。转到模块-> 依赖项，然后将库的范围设置为“已提供”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-10-23T15:31:10.190

在打开模块设置-> 依赖项

设置行的范围

{include=[*.jar], dir=libs}

提供

为我工作

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-25T04:30:46.510

我解决了。似乎在 libs 文件夹中包含 maps.jar 文件是个坏主意。删除它纠正了问题。谢谢大家。

# spring - 使用spring的Hbase连接失败

> ID：15605901
> 
> 赞同：0
> 
> 时间：2013-03-25T00:31:01.993
> 
> 标签：spring, hadoop, hbase, apache-zookeeper

我有一个简单的带有 HBase 的 crud 应用程序，只使用了一个 java 客户端，一切都很好。但是当我尝试使用 spring 做同样的应用程序时，zookeeper 拒绝连接或关闭它，我真的不明白会发生什么。这是一些代码：xml配置：

```
 <beans xmlns="http://www.springframework.org/schema/beans"
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   xmlns:hdp="http://www.springframework.org/schema/hadoop"
   xsi:schemaLocation="
    http://www.springframework.org/schema/beans 
    http://www.springframework.org/schema/beans/spring-beans.xsd
    http://www.springframework.org/schema/hadoop 
    http://www.springframework.org/schema/hadoop/spring-hadoop.xsd">

    <hdp:configuration>
    </hdp:configuration> 
    <hdp:hbase-configuration delete-connection="true" />
    <bean id="hTemplate" class="org.springframework.data.hadoop.hbase.HbaseTemplate" >
        <property name="configuration" ref="hbaseConfiguration"></property>
    </bean>
    <bean id="usingHBase" class="com.mycompany.usinghbase.UsingHBase" />
 </beans> 
```

这是我的简单方法：

```
public class UsingHBase {

    @Autowired
    @Qualifier("hTemplate")
    private HbaseTemplate hBaseTemplate;

    public void addData(final String key, final String value) throws IOException {
        hBaseTemplate.execute("new_table", new TableCallback<Object>() {
            public Object doInTable(HTableInterface hti) throws Throwable {
              Put p = new Put(Bytes.toBytes("zz"));
              p.add(Bytes.toBytes("zz"), Bytes.toBytes(key), Bytes.toBytes(value));
                hti.put(p);
                return null;
            }
        });
    }

    public List<Object> findAll() {
        return hBaseTemplate.find("new_table", "zz", new RowMapper<Object>() {
            public Object mapRow(Result result, int rowNum) throws Exception {
                return result.toString();
            }
        });
    }

        public void DeleteData(final String key) throws IOException {
        hBaseTemplate.execute("new_table", new TableCallback<Object>() {
            public Object doInTable(HTableInterface hti) throws Throwable {
        Delete delete = new Delete(Bytes.toBytes("zz"));
        delete.deleteColumns(Bytes.toBytes("zz"), Bytes.toBytes(key));
        hti.delete(delete);
                return null;
            }
        });
    }
} 
```

这是我的测试用例：

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(locations = "file:src/main/java/spring.xml")
public class UsingHBaseTest {

    @Autowired
    @Qualifier("hTemplate")
    private HbaseTemplate hBaseTemplate;

    @Autowired
    @Qualifier("usingHBase")
    private UsingHBase usingHBase;

    @Before
    public void setUp() {
    }

    @Test
    public void testAddData() throws Exception {
        System.out.println("addData");
        long startTime = System.currentTimeMillis();
    for (int i=1; i <= 1000; i++) {
            String column = "k" + i;
            String value = "v" + i;
            usingHBase.addData(column, value);
    }
    long EndTime = System.currentTimeMillis();
    System.out.println("Put value: " + (EndTime - startTime));
    }

    @Test
    public void testFindAll() {
        System.out.println("findData");
        long startTime = System.currentTimeMillis();
        usingHBase.findAll();
    long EndTime = System.currentTimeMillis();
    System.out.println("Put value: " + (EndTime - startTime));
    } 

    @Test
    public void testDeleteData() throws IOException {
        System.out.println("deleteData");
        long startTime = System.currentTimeMillis();
    for (int i=1; i <= 1000; i++) {
            String column = "k" + i;
            usingHBase.DeleteData(column);
    }
    long EndTime = System.currentTimeMillis();
    System.out.println("delete value: " + (EndTime - startTime));
    }
} 
```

堆栈跟踪说什么：

```
Running com.mycompany.usinghbase.UsingHBaseTest
13/03/25 11:28:57 INFO context.TestContextManager: @TestExecutionListeners is not present for class [class com.mycompany.usinghbase.UsingHBaseTest]: using defaults.
13/03/25 11:28:57 INFO xml.XmlBeanDefinitionReader: Loading XML bean definitions from URL [file:src/main/java/spring.xml]
13/03/25 11:28:59 INFO support.GenericApplicationContext: Refreshing org.springframework.context.support.GenericApplicationContext@26d0fffc: startup date [Mon Mar 25 11:28:59 VLAT 2013]; root of context hierarchy
13/03/25 11:28:59 INFO support.DefaultListableBeanFactory: Pre-instantiating singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@4489140e: defining beans [hadoopConfiguration,hbaseConfiguration,hTemplate,usingHBase,org.springframework.context.annotation.internalConfigurationAnnotationProcessor,org.springframework.context.annotation.internalAutowiredAnnotationProcessor,org.springframework.context.annotation.internalRequiredAnnotationProcessor,org.springframework.context.annotation.internalCommonAnnotationProcessor,org.springframework.context.annotation.ConfigurationClassPostProcessor$ImportAwareBeanPostProcessor#0]; root of factory hierarchy
addData
2013-03-25 11:29:00.037 java[24078:1c03] Unable to load realm info from SCDynamicStore
13/03/25 11:29:01 INFO zookeeper.ZooKeeper: Client environment:zookeeper.version=3.4.3-1240972, built on 02/06/2012 10:48 GMT
13/03/25 11:29:01 INFO zookeeper.ZooKeeper: Client environment:host.name=192.168.0.86
13/03/25 11:29:01 INFO zookeeper.ZooKeeper: Client environment:java.version=1.7.0_10
13/03/25 11:29:01 INFO zookeeper.ZooKeeper: Client environment:java.vendor=Oracle Corporation
13/03/25 11:29:01 INFO zookeeper.ZooKeeper: Client environment:java.home=/Library/Java/JavaVirtualMachines/jdk1.7.0_10.jdk/Contents/Home/jre
13/03/25 11:29:01 INFO zookeeper.ZooKeeper: Client environment:java.class.path=/Users/urijvoskresenskij/NetBeansProjects/UsingHBase/target/test-classes:/Users/urijvoskresenskij/NetBeansProjects/UsingHBase/target/classes:/Users/urijvoskresenskij/.m2/repository/org/apache/hbase/hbase/0.94.3/hbase-0.94.3.jar:/Users/urijvoskresenskij/.m2/repository/com/yammer/metrics/metrics-core/2.1.2/metrics-core-2.1.2.jar:/Users/urijvoskresenskij/.m2/repository/com/google/guava/guava/11.0.2/guava-11.0.2.jar:/Users/urijvoskresenskij/.m2/repository/com/google/code/findbugs/jsr305/1.3.9/jsr305-1.3.9.jar:/Users/urijvoskresenskij/.m2/repository/commons-cli/commons-cli/1.2/commons-cli-1.2.jar:/Users/urijvoskresenskij/.m2/repository/commons-configuration/commons-configuration/1.6/commons-configuration-1.6.jar:/Users/urijvoskresenskij/.m2/repository/commons-collections/commons-collections/3.2.1/commons-collections-3.2.1.jar:/Users/urijvoskresenskij/.m2/repository/commons-digester/commons-digester/1.8/commons-digester-1.8.jar:/Users/urijvoskresenskij/.m2/repository/commons-beanutils/commons-beanutils/1.7.0/commons-beanutils-1.7.0.jar:/Users/urijvoskresenskij/.m2/repository/commons-beanutils/commons-beanutils-core/1.8.0/commons-beanutils-core-1.8.0.jar:/Users/urijvoskresenskij/.m2/repository/com/github/stephenc/high-scale-lib/high-scale-lib/1.1.1/high-scale-lib-1.1.1.jar:/Users/urijvoskresenskij/.m2/repository/commons-codec/commons-codec/1.4/commons-codec-1.4.jar:/Users/urijvoskresenskij/.m2/repository/commons-httpclient/commons-httpclient/3.1/commons-httpclient-3.1.jar:/Users/urijvoskresenskij/.m2/repository/commons-io/commons-io/2.1/commons-io-2.1.jar:/Users/urijvoskresenskij/.m2/repository/commons-lang/commons-lang/2.5/commons-lang-2.5.jar:/Users/urijvoskresenskij/.m2/repository/commons-logging/commons-logging/1.1.1/commons-logging-1.1.1.jar:/Users/urijvoskresenskij/.m2/repository/log4j/log4j/1.2.16/log4j-1.2.16.jar:/Users/urijvoskresenskij/.m2/repository/org/apache/avro/avro/1.5.3/avro-1.5.3.jar:/Users/urijvoskresenskij/.m2/repository/org/xerial/snappy/snappy-java/1.0.3.2/snappy-java-1.0.3.2.jar:/Users/urijvoskresenskij/.m2/repository/org/apache/avro/avro-ipc/1.5.3/avro-ipc-1.5.3.jar:/Users/urijvoskresenskij/.m2/repository/org/jboss/netty/netty/3.2.4.Final/netty-3.2.4.Final.jar:/Users/urijvoskresenskij/.m2/repository/org/apache/velocity/velocity/1.7/velocity-1.7.jar:/Users/urijvoskresenskij/.m2/repository/org/apache/zookeeper/zookeeper/3.4.3/zookeeper-3.4.3.jar:/Users/urijvoskresenskij/.m2/repository/org/apache/thrift/libthrift/0.8.0/libthrift-0.8.0.jar:/Users/urijvoskresenskij/.m2/repository/org/apache/httpcomponents/httpclient/4.1.2/httpclient-4.1.2.jar:/Users/urijvoskresenskij/.m2/repository/org/apache/httpcomponents/httpcore/4.1.3/httpcore-4.1.3.jar:/Users/urijvoskresenskij/.m2/repository/org/jruby/jruby-complete/1.6.5/jruby-complete-1.6.5.jar:/Users/urijvoskresenskij/.m2/repository/org/mortbay/jetty/jetty/6.1.26/jetty-6.1.26.jar:/Users/urijvoskresenskij/.m2/repository/org/mortbay/jetty/jetty-util/6.1.26/jetty-util-6.1.26.jar:/Users/urijvoskresenskij/.m2/repository/org/mortbay/jetty/jsp-2.1/6.1.14/jsp-2.1-6.1.14.jar:/Users/urijvoskresenskij/.m2/repository/org/eclipse/jdt/core/3.1.1/core-3.1.1.jar:/Users/urijvoskresenskij/.m2/repository/org/mortbay/jetty/jsp-api-2.1/6.1.14/jsp-api-2.1-6.1.14.jar:/Users/urijvoskresenskij/.m2/repository/org/mortbay/jetty/servlet-api-2.5/6.1.14/servlet-api-2.5-6.1.14.jar:/Users/urijvoskresenskij/.m2/repository/org/codehaus/jackson/jackson-core-asl/1.8.8/jackson-core-asl-1.8.8.jar:/Users/urijvoskresenskij/.m2/repository/org/codehaus/jackson/jackson-mapper-asl/1.8.8/jackson-mapper-asl-1.8.8.jar:/Users/urijvoskresenskij/.m2/repository/org/codehaus/jackson/jackson-jaxrs/1.8.8/jackson-jaxrs-1.8.8.jar:/Users/urijvoskresenskij/.m2/repository/org/codehaus/jackson/jackson-xc/1.8.8/jackson-xc-1.8.8.jar:/Users/urijvoskresenskij/.m2/repository/org/slf4j/slf4j-api/1.4.3/slf4j-api-1.4.3.jar:/Users/urijvoskresenskij/.m2/repository/org/slf4j/slf4j-log4j12/1.4.3/slf4j-log4j12-1.4.3.jar:/Users/urijvoskresenskij/.m2/repository/tomcat/jasper-compiler/5.5.23/jasper-compiler-5.5.23.jar:/Users/urijvoskresenskij/.m2/repository/tomcat/jasper-runtime/5.5.23/jasper-runtime-5.5.23.jar:/Users/urijvoskresenskij/.m2/repository/commons-el/commons-el/1.0/commons-el-1.0.jar:/Users/urijvoskresenskij/.m2/repository/org/jamon/jamon-runtime/2.3.1/jamon-runtime-2.3.1.jar:/Users/urijvoskresenskij/.m2/repository/com/google/protobuf/protobuf-java/2.4.0a/protobuf-java-2.4.0a.jar:/Users/urijvoskresenskij/.m2/repository/com/sun/jersey/jersey-core/1.8/jersey-core-1.8.jar:/Users/urijvoskresenskij/.m2/repository/com/sun/jersey/jersey-json/1.8/jersey-json-1.8.jar:/Users/urijvoskresenskij/.m2/repository/org/codehaus/jettison/jettison/1.1/jettison-1.1.jar:/Users/urijvoskresenskij/.m2/repository/com/sun/xml/bind/jaxb-impl/2.2.3-1/jaxb-impl-2.2.3-1.jar:/Users/urijvoskresenskij/.m2/repository/com/sun/jersey/jersey-server/1.8/jersey-server-1.8.jar:/Users/urijvoskresenskij/.m2/repository/asm/asm/3.1/asm-3.1.jar:/Users/urijvoskresenskij/.m2/repository/javax/xml/bind/jaxb-api/2.1/jaxb-api-2.1.jar:/Users/urijvoskresenskij/.m2/repository/javax/activation/activation/1.1/activation-1.1.jar:/Users/urijvoskresenskij/.m2/repository/stax/stax-api/1.0.1/stax-api-1.0.1.jar:/Users/urijvoskresenskij/.m2/repository/junit/junit/4.11/junit-4.11.jar:/Users/urijvoskresenskij/.m2/repository/org/hamcrest/hamcrest-core/1.3/hamcrest-core-1.3.jar:/Users/urijvoskresenskij/.m2/repository/org/springframework/spring-aop/3.1.2.RELEASE/spring-aop-3.1.2.RELEASE.jar:/Users/urijvoskresenskij/.m2/repository/aopalliance/aopalliance/1.0/aopalliance-1.0.jar:/Users/urijvoskresenskij/.m2/repository/org/springframework/spring-asm/3.1.2.RELEASE/spring-asm-3.1.2.RELEASE.jar:/Users/urijvoskresenskij/.m2/repository/org/springframework/spring-context-support/3.1.2.RELEASE/spring-context-support-3.1.2.RELEASE.jar:/Users/urijvoskresenskij/.m2/repository/javax/annotation/jsr250-api/1.0/jsr250-api-1.0.jar:/Users/urijvoskresenskij/.m2/repository/org/springframework/spring-test/3.1.2.RELEASE/spring-test-3.1.2.RELEASE.jar:/Users/urijvoskresenskij/.m2/repository/org/springframework/spring-beans/3.1.2.RELEASE/spring-beans-3.1.2.RELEASE.jar:/Users/urijvoskresenskij/.m2/repository/org/springframework/spring-context/3.1.2.RELEASE/spring-context-3.1.2.RELEASE.jar:/Users/urijvoskresenskij/.m2/repository/org/springframework/spring-expression/3.1.2.RELEASE/spring-expression-3.1.2.RELEASE.jar:/Users/urijvoskresenskij/.m2/repository/org/springframework/spring-core/3.1.2.RELEASE/spring-core-3.1.2.RELEASE.jar:/Users/urijvoskresenskij/.m2/repository/org/springframework/data/spring-data-hadoop/1.0.0.RELEASE/spring-data-hadoop-1.0.0.RELEASE.jar:/Users/urijvoskresenskij/.m2/repository/org/apache/hadoop/hadoop-streaming/1.0.4/hadoop-streaming-1.0.4.jar:/Users/urijvoskresenskij/.m2/repository/org/apache/hadoop/hadoop-core/1.0.4/hadoop-core-1.0.4.jar:/Users/urijvoskresenskij/.m2/repository/xmlenc/xmlenc/0.52/xmlenc-0.52.jar:/Users/urijvoskresenskij/.m2/repository/org/apache/commons/commons-math/2.1/commons-math-2.1.jar:/Users/urijvoskresenskij/.m2/repository/commons-net/commons-net/1.4.1/commons-net-1.4.1.jar:/Users/urijvoskresenskij/.m2/repository/net/java/dev/jets3t/jets3t/0.7.1/jets3t-0.7.1.jar:/Users/urijvoskresenskij/.m2/repository/net/sf/kosmosfs/kfs/0.3/kfs-0.3.jar:/Users/urijvoskresenskij/.m2/repository/hsqldb/hsqldb/1.8.0.10/hsqldb-1.8.0.10.jar:/Users/urijvoskresenskij/.m2/repository/oro/oro/2.0.8/oro-2.0.8.jar:/Users/urijvoskresenskij/.m2/repository/org/apache/hadoop/hadoop-tools/1.0.4/hadoop-tools-1.0.4.jar:/Users/urijvoskresenskij/.m2/repository/org/springframework/spring-tx/3.1.2.RELEASE/spring-tx-3.1.2.RELEASE.jar:
13/03/25 11:29:01 INFO zookeeper.ZooKeeper: Client environment:java.library.path=/Users/urijvoskresenskij/Library/Java/Extensions:/Library/Java/Extensions:/Network/Library/Java/Extensions:/System/Library/Java/Extensions:/usr/lib/java:.
13/03/25 11:29:01 INFO zookeeper.ZooKeeper: Client environment:java.io.tmpdir=/var/folders/_q/z5blmlxs39d4pmmv1fj9mh500000gn/T/
13/03/25 11:29:01 INFO zookeeper.ZooKeeper: Client environment:java.compiler=<NA>
13/03/25 11:29:01 INFO zookeeper.ZooKeeper: Client environment:os.name=Mac OS X
13/03/25 11:29:01 INFO zookeeper.ZooKeeper: Client environment:os.arch=x86_64
13/03/25 11:29:01 INFO zookeeper.ZooKeeper: Client environment:os.version=10.7.5
13/03/25 11:29:01 INFO zookeeper.ZooKeeper: Client environment:user.name=urijvoskresenskij
13/03/25 11:29:01 INFO zookeeper.ZooKeeper: Client environment:user.home=/Users/urijvoskresenskij
13/03/25 11:29:01 INFO zookeeper.ZooKeeper: Client environment:user.dir=/Users/urijvoskresenskij/NetBeansProjects/UsingHBase
13/03/25 11:29:01 INFO zookeeper.ZooKeeper: Initiating client connection, connectString=localhost:2181 sessionTimeout=180000 watcher=hconnection
13/03/25 11:29:02 INFO zookeeper.ClientCnxn: Opening socket connection to server /0:0:0:0:0:0:0:1:2181
13/03/25 11:29:02 INFO zookeeper.RecoverableZooKeeper: The identifier of this process is 24078@MacBook-Air-Urij.local
13/03/25 11:29:02 INFO client.ZooKeeperSaslClient: Client will not SASL-authenticate because the default JAAS configuration section 'Client' could not be found. If you are not using SASL, you may ignore this. On the other hand, if you expected SASL to work, please fix your JAAS configuration.
13/03/25 11:29:02 INFO zookeeper.ClientCnxn: Socket connection established to localhost/0:0:0:0:0:0:0:1:2181, initiating session
13/03/25 11:29:02 INFO zookeeper.ClientCnxn: Session establishment complete on server localhost/0:0:0:0:0:0:0:1:2181, sessionid = 0x13d9ee87e610328, negotiated timeout = 40000
13/03/25 11:29:03 INFO client.HConnectionManager$HConnectionImplementation: Closed zookeeper sessionid=0x13d9ee87e610328
13/03/25 11:29:04 INFO zookeeper.ZooKeeper: Session: 0x13d9ee87e610328 closed
13/03/25 11:29:04 INFO zookeeper.ClientCnxn: EventThread shut down
13/03/25 11:29:04 INFO zookeeper.ZooKeeper: Initiating client connection, connectString=localhost:2181 sessionTimeout=180000 watcher=hconnection
13/03/25 11:29:04 INFO zookeeper.RecoverableZooKeeper: The identifier of this process is 24078@MacBook-Air-Urij.local
13/03/25 11:29:04 INFO zookeeper.ClientCnxn: Opening socket connection to server /127.0.0.1:2181
13/03/25 11:29:04 INFO client.ZooKeeperSaslClient: Client will not SASL-authenticate because the default JAAS configuration section 'Client' could not be found. If you are not using SASL, you may ignore this. On the other hand, if you expected SASL to work, please fix your JAAS configuration.
13/03/25 11:29:04 INFO zookeeper.ClientCnxn: Socket connection established to localhost/127.0.0.1:2181, initiating session
13/03/25 11:29:04 INFO zookeeper.ClientCnxn: Session establishment complete on server localhost/127.0.0.1:2181, sessionid = 0x13d9ee87e61032c, negotiated timeout = 40000
13/03/25 11:29:04 INFO client.HConnectionManager$HConnectionImplementation: Closed zookeeper sessionid=0x13d9ee87e61032c
13/03/25 11:29:04 INFO zookeeper.ZooKeeper: Session: 0x13d9ee87e61032c closed
13/03/25 11:29:04 INFO zookeeper.ZooKeeper: Initiating client connection, connectString=localhost:2181 sessionTimeout=180000 watcher=hconnection
13/03/25 11:29:04 INFO zookeeper.ClientCnxn: EventThread shut down
13/03/25 11:29:04 INFO zookeeper.RecoverableZooKeeper: The identifier of this process is 24078@MacBook-Air-Urij.local
13/03/25 11:29:04 INFO zookeeper.ClientCnxn: Opening socket connection to server /0:0:0:0:0:0:0:1:2181
13/03/25 11:29:04 INFO client.ZooKeeperSaslClient: Client will not SASL-authenticate because the default JAAS configuration section 'Client' could not be found. If you are not using SASL, you may ignore this. On the other hand, if you expected SASL to work, please fix your JAAS configuration.
13/03/25 11:29:04 INFO zookeeper.ClientCnxn: Socket connection established to localhost/0:0:0:0:0:0:0:1:2181, initiating session
13/03/25 11:29:04 INFO zookeeper.ClientCnxn: Session establishment complete on server localhost/0:0:0:0:0:0:0:1:2181, sessionid = 0x13d9ee87e61032d, negotiated timeout = 40000
13/03/25 11:29:04 INFO client.HConnectionManager$HConnectionImplementation: Closed zookeeper sessionid=0x13d9ee87e61032d
13/03/25 11:29:05 INFO zookeeper.ZooKeeper: Session: 0x13d9ee87e61032d closed
13/03/25 11:29:05 INFO zookeeper.ClientCnxn: EventThread shut down
13/03/25 11:29:05 INFO zookeeper.ZooKeeper: Initiating client connection, connectString=localhost:2181 sessionTimeout=180000 watcher=hconnection
13/03/25 11:29:05 INFO zookeeper.RecoverableZooKeeper: The identifier of this process is 24078@MacBook-Air-Urij.local
13/03/25 11:29:05 INFO zookeeper.ClientCnxn: Opening socket connection to server /fe80:0:0:0:0:0:0:1%1:2181
13/03/25 11:29:10 INFO client.ZooKeeperSaslClient: Client will not SASL-authenticate because the default JAAS configuration section 'Client' could not be found. If you are not using SASL, you may ignore this. On the other hand, if you expected SASL to work, please fix your JAAS configuration.
13/03/25 11:29:10 INFO zookeeper.ClientCnxn: Socket connection established to fe80:0:0:0:0:0:0:1%1/fe80:0:0:0:0:0:0:1%1:2181, initiating session
13/03/25 11:29:11 INFO zookeeper.ClientCnxn: Session establishment complete on server fe80:0:0:0:0:0:0:1%1/fe80:0:0:0:0:0:0:1%1:2181, sessionid = 0x13d9ee87e610334, negotiated timeout = 40000 
```

请帮助，人们。我很需要你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-16T19:05:22.237

您必须在 xml 中指定您的 zookeeper 仲裁和端口

```
<hdp:configuration id="hadoopConfiguration">
    hbase.zookeeper.quorum=mynode
    hbase.zookeeper.property.clientPort=2181
</hdp:configuration> 
<hdp:hbase-configuration id="hbaseConfiguration" delete-connection="true" configuration="hadoopConfiguration" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-13T10:17:26.307

在启动 zookeeper、hbase regionservers 和 master 后尝试运行您的应用程序。代码应该可以工作。

# linux - 运行从网络上卷曲的 bash 脚本

> ID：15605903
> 
> 赞同：3
> 
> 时间：2013-03-25T00:31:04.433
> 
> 标签：linux, bash

我写了一个 bash 脚本，它应该可以从网络上安装。它应该在运行时接受用户的输入。以下是我的做法，但它直接终止应用程序而不提示用户输入信息。

```
curl www.test.com/script.sh | bash 
```

我在某处读到 stdin 是通过管道传输到 bash 的，这就是它没有提示任何内容的原因。

任何帮助都会很棒。

多谢你们

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-25T00:41:37.333

使用[进程替换](http://www.gnu.org/software/bash/manual/html_node/Process-Substitution.html)：

```
bash <(curl www.test.com/script.sh) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T00:36:14.660

尝试

```
bash -c '`curl www.test.com/script.sh`' 
```

虽然如果脚本中有单引号，这会出现问题。

如果做不到这一点，请分两步进行：

```
curl -o /tmp/script.sh www.test.com/script.sh 
bash /tmp/script.sh 
```

您可以将脚本保存在您喜欢的任何地方，并且为了更好的安全性等，您可能想要使用`tmpfile`或其他东西，但是直接从网络上运行脚本听起来并不像高安全性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-25T00:39:40.303

你可以试试：

```
 bash -c "$(curl -s www.test.com/script.sh)" 
```

从 bash 手册页，

```
 -c string If the -c option is present, then commands are read from string.  
            If there are arguments after the string, they are
            assigned to the positional parameters, starting with $0. 
```

# php - 为每个用户生成唯一的 SALT？

> ID：15605908
> 
> 赞同：0
> 
> 时间：2013-03-25T00:31:57.967
> 
> 标签：php, hash, sha1, salt

我想问一下是否可以为每个用户生成一个唯一的盐，然后像这样散列它， `sha1(sha1($password . $salt))` 所以 $salt 是一个随机生成的字符串？

如果是，我将如何在登录时加密密码？

Xenforo 使用它，我想知道如果他们为每个用户使用唯一的盐，他们如何加密密码？

非常感谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-25T00:42:04.753

[不要制作自己的密码散列算法](http://crackstation.net/hashing-security.htm)。它很容易被破解，并且当您的数据库遭到破坏时，您的用户不会感激他们的密码被盗。

Bcrypt 和其他经过充分测试的哈希已经这样做了：

```
>>> bcrypt.generate_password_hash('password', 15)
    '$2a$15$bzaLXuer1C8dtSckDp3AI.eOoL/nOTsSdpjEMyDMcJ3ZQELdRcLzq'
>>> bcrypt.generate_password_hash('password', 15)
    '$2a$15$Ye.cFInKhzo1KvAJGSi6yORV5uEqeW.Z1oAhdfi.163Psz4YPA3CO' 
```

随机盐和轮数存储在散列本身中，由分隔符分隔，这让恒定时间密码检查功能从生成的散列字符串中挑选盐。

如果出于*其他*原因需要创建安全随机字符串，请使用[`openssl_random_pseudo_bytes()`](http://php.net/manual/en/function.openssl-random-pseudo-bytes.php)：

```
$bytes = openssl_random_pseudo_bytes(64, true);
$hex = bin2hex($bytes); 
```

# java - JLabel 特定的 GIF 动画播放太快

> ID：15605915
> 
> 赞同：5
> 
> 时间：2013-03-25T00:32:43.500
> 
> 标签：java, swing, animation, jlabel, animated-gif

这个特定的 GIF 动画播放速度太快，就像正常速度的 100 倍。有什么解决办法吗？还是我应该进一步减慢“GIF的正常速度”？

```
public class Test {

    private static final String url = "http://i.stack.imgur.com/AnrWw.gif";

    private void display() throws MalformedURLException {
        JFrame f = new JFrame("Test");
        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        f.add(new JLabel(new ImageIcon(new URL(url))));
        f.pack();
        f.setLocationRelativeTo(null);
        f.setVisible(true);
    }

    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    new Test().display();
                } catch (MalformedURLException ex) {
                    ex.printStackTrace(System.err);
                }
            }
        });
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-08T11:39:10.490

我尝试使用其他效果很好的动画 gif 图像，问题可能是您的 gif 图像，尝试降低 gif 的帧速率或降低质量。

# php - MVC：这些模型应该是静态的吗？

> ID：15605919
> 
> 赞同：1
> 
> 时间：2013-03-25T00:33:17.873
> 
> 标签：php, model-view-controller

我在使用 MVC 模式时遇到问题；我创建了多个模型，我使用它们中的每一个来处理分组任务（连接、数据库等）。

问题是，在创建基本模型之后，我最终得到了这样的代码（在控制器内）。

```
class Controller 
{
    function doStuffz() 
    {
        $accounts = new AccountsModel();
        $DB       = new DBModel();
        $HTML     = new HTMLModel();
        //More models...

        $accountData = $accounts->getAccount($id);
        $DB->saveAccount($accountData);
        $HTML->display($accountData);
        //More code...
    }

} 
```

我一直在我的类中的（几乎）所有函数中创建模型实例，即使将它们设为静态似乎绝对没问题。

我[读了这个关于何时使用静态方法](https://stackoverflow.com/questions/2671496/java-when-to-use-static-methods)的问题，在应用“经验法则”之后，似乎所有这些模型都应该是静态的，这在 MVC 模式中是一个不好的做法吗？

如果我将这些模型设为静态，我可能会得到这样的结果：

```
class Controller 
{
    function doStuffz() 
    {

        $accountData = AccountModel::getAccount($id);
        DBModel::saveAccount($accountData);
        HTMLModel::display($accountData);
        //More code...
    }

} 
```

这对我来说实际上更有意义，而且它看起来更干净更短。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T01:44:55.763

DBModel、HTMLModel 实际上不是模型，它们是服务。

使用静态方式很方便，但也有缺点：全局作用域、依赖紧密、难以测试。

# android - 将 Android 应用程序从 Netbeans 迁移到 Eclipse ADT - 应用程序发布是否会被视为“新”或“版本化”版本？

> ID：15605923
> 
> 赞同：0
> 
> 时间：2013-03-25T00:34:12.057
> 
> 标签：android, netbeans-plugins, eclipse-adt

我之前发布了一个使用适用于 NetBeans 的 Android 插件构建的 Android 应用程序。

对于后续的更新版本，我使用的是 Eclipse ADT。这是由于我在使用 NetBeans 插件时遇到的问题。

我将代码迁移过来并准备工作。我确保包名称仍然相同。

我的问题：如果我使用 ADT 与 NetBeans 编译和发布了应用程序，该应用程序是否会被视为“新”应用程序？我只是想确保该应用程序被视为当前正在运行的更新版本...

我还需要做些什么来确保该应用程序仍被视为一个版本吗？

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T00:40:44.963

Google Play 商店通过包名称和签名证书跟踪应用程序，只要它们相同即可。不要忘记重复使用相同的证书进行签名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T00:38:29.873

根据[Release Guide](http://developer.android.com/tools/publishing/preparing.html#publishing-configure)，唯一重要的是包名称和签名证书。由于软件包名称相同，并且我认为您将发布证书保存在单独的位置，因此新版本应被视为同一个应用程序。

# python - 在 Python 提示符处引发错误后如何获取最后一个异常对象？

> ID：15605925
> 
> 赞同：61
> 
> 时间：2013-03-25T00:34:32.357
> 
> 标签：python, exception, try-catch, read-eval-print-loop

在交互式提示符 (REPL) 下调试 Python 代码时，我通常会编写一些引发异常的代码，但我没有将其包装在`try`/`except`中，因此一旦引发错误，我就永远丢失了异常对象.

通常，Python 打印出来的回溯和错误消息是不够的。例如，在获取 URL 时，服务器可能会返回 40x 错误，并且您需要通过`error.read()`... 响应的内容，但您已经没有错误对象了。例如：

```
>>> import urllib2
>>> f = urllib2.urlopen('http://example.com/api/?foo=bad-query-string')
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  ...
urllib2.HTTPError: HTTP Error 400: Bad Request 
```

德拉特，回复的正文说了什么？它可能包含有价值的错误信息......

我意识到重新运行包含在 try/except 中的代码通常很容易，但这并不理想。我也意识到，在这种特定情况下，如果我使用`requests`库（不会引发 HTTP 错误），我不会遇到这个问题......但我真的想知道是否有更通用的方法来获取在这些情况下，Python 提示符处的最后一个异常对象。

* * *

## 回答 #1

> 赞同：78
> 
> 时间：2013-03-25T01:06:42.373

该`sys`模块提供了一些用于事后检查异常的功能：[`sys.last_type`](http://docs.python.org/2/library/sys.html#sys.last_type)、[`sys.last_value`](http://docs.python.org/2/library/sys.html#sys.last_value)和[`sys.last_traceback`](http://docs.python.org/2/library/sys.html#sys.last_traceback)。

`sys.last_value`是你要找的那个。

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2017-01-16T05:50:24.253

正如@Cairnarvon 提到的，我没有发现任何`last_value`成员是 sys 模块。

`sys.exc_info()`为我做了伎俩。`sys.exc_info()`返回具有三个值的元组`(type, value, traceback)`。

所以`sys.exc_info()[1]`会给出可读的错误。这是示例，

```
import sys
list = [1,2,3,4]
try:
    del list[8]
except Exception:
    print(sys.exc_info()[1]) 
```

将输出`list assignment index out of range`

此外，`traceback.format_exc()`from`traceback`模块可用于打印出类似的信息。

以下是`format_exec()`使用时的输出，

```
Traceback (most recent call last):
  File "python", line 6, in <module>
IndexError: list assignment index out of range 
```

# python - 如何从两个测量时间绘制连接点？

> ID：15605926
> 
> 赞同：4
> 
> 时间：2013-03-25T00:34:35.243
> 
> 标签：python, r, perl, matplotlib, plot

这里的第一个问题！我有两列数据，每一行都是一对值。我想垂直绘制第一列和第二列，并用一条线连接每对值，如下链接所示：

[http://www.sciencedirect.com/science/article/pii/S0300957297000440#gr1](http://www.sciencedirect.com/science/article/pii/S0300957297000440#gr1) ![在此处输入图像描述](../Images/e1a570e0ced4cde4e9bf8d5b63b37c2f.png)

如果您知道如何使用任何工具，例如 R、python、perl、excel，请告诉我！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-25T01:05:01.640

另`R`一种使用`matpoints`and `matlines`(and `boxplot`)的方法

```
dd <- data.frame(x=rnorm(15), y= rnorm(15))

boxplot(dd, boxwex = 0.3)
# note that you need to transpose `dd`
matpoints(y= t(dd), x= c(1.17,1.83),pch=19, col='black')
matlines(y= t(dd), x= c(1.2,1.8), lty=1, col = 'black') 
```

![在此处输入图像描述](../Images/99d223daea525da1af1296456307c8d2.png)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-25T01:15:29.947

这是 ggplot2 的 R 方法，有点快速和肮脏：

```
library(ggplot2)

df <- data.frame(baseline=c(1,1,2,2,3,3,4,5,6,7,8,9,10,11),
                 sixmos  =c(5,6,5,7,8,9,10,12,12,2,1,5,2,3))

data <- data.frame(group = factor(1:nrow(df)), 
                   cat=c(rep('baseline',nrow(df)), 
                   rep('sixmos',nrow(df))), 
                   values=c(df$baseline,df$sixmos))

ggplot(data, aes(x=cat, y=values)) + 
  geom_line(aes(group=group)) + 
  geom_point(aes(group=group)) +
  geom_boxplot(data=df, aes(x='baselin', y=baseline)) + 
  geom_boxplot(data=df, aes(x='sixmos2', y=sixmos)) 
```

![R中带有ggplot2的箱线图和坡度图](../Images/7cbc8c7de9a7da30e9c22aaae9ba1dc3.png)

另请参阅此答案： [按组排列的折线图](https://stackoverflow.com/questions/5737071/simple-line-chart-by-ggplot2)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-03-25T01:47:15.333

这是 Python 中一个非常基本的尝试：

```
import pylab as pl

data = pl.array([[1,2],[2,3],[1,3],[2,1],[5,3],[3,2],[3,2],[1,1]])

first = data[:,0]
second = data[:,1]

xs = []
ys = []

for r in data:
   ys += list(r)
   ys.append(None)
   xs += [1.3,1.7]
   xs.append(None)

pl.plot([1.3]*len(first),first,'o',[1.7]*len(second),second,'o',xs,ys)
pl.boxplot(data)
pl.ylim([min(min(first),min(second))-.5,max(max(first),max(second))+.5])
labels = ("first", "second")
pl.xticks([1,2],labels)

pl.show() 
```

将导致： ![在此处输入图像描述](../Images/850d8ccdeb633a34b518d9202b5323d6.png)

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-03-25T00:53:50.940

这是 R 中使用`segments`. 清理并添加了符合@mnel答案的箱线图：

```
first <- 1:10
second <- 2:11
boxplot(first,second, boxwex=0.3)
points(rep(c(1.2,1.8),each=10),c(first,second),pch=19)
segments(rep(1.2,10),first,rep(1.8,10),second,col="gray") 
```

![哦，是的箱线图](../Images/868a38491aa233d82ccecb77d370d103.png)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-03-25T14:15:14.903

R 的另一种选择`lattice`- 不是最整洁的，但可以完成工作：

```
#load packages
library(lattice)
library(latticeExtra)

#example data
B <- subset(OrchardSprays, treatment == "B")
D <- subset(OrchardSprays, treatment == "D")
BD <- rbind(B,D)

#create three separate plots
nobox = list(axis.line=list(col="transparent"))#to remove box around plots
boxplotB <- bwplot(decrease ~ treatment, B, ylab = NULL, ylim=c(0,70), 
                   par.settings=nobox)
boxplotD <- bwplot(decrease ~ treatment, D, ylab = NULL, ylim=c(0,70), 
                   par.settings=nobox)
plotBD <- xyplot(decrease ~ treatment, BD, col=1, ylim=c(0,70), pch=16,  
                 par.settings=nobox, panel=function(x, y, ...) {
                   panel.xyplot(x, y, ...)
                   panel.points(x, y, ...)
                   #this loop is required to create connections between points
                   for(i in 1:nrow(B)) 
                        panel.lines(1:2, c(y[i], y[i+nrow(B)]), alpha=0.5, ...)
                   }
                 )

#combine three plots
comb <- c(boxplotB, plotBD, boxplotD, layout = c(3,1), y.same = F)
update(comb, scales = list(at = list(NA, NA, NA), y = list(draw = FALSE))) 
```

![在此处输入图像描述](../Images/2c8b6adfc85c067e5568b929c441a32c.png)

# wordpress - Wordpress 和 W3 Total Cache minifier

> ID：15605927
> 
> 赞同：2
> 
> 时间：2013-03-25T00:34:35.377
> 
> 标签：wordpress, .htaccess, caching

我已经为我的 WordPress 网络安装了 W3 总缓存，除了 Minifier 部分之外，一切都运行良好。

当设置为“自动”时，插件需要访问此路径：

```
/wp-content/cache/minify/000006/M9AvLqnMSQUA.css 
```

但是它中断了，因为 Wordpress 将它重定向到 404.php 模板，认为它是一个页面/永久链接。

我可以在我的 .htaccess 中放入什么内容或更改权限以允许直接访问此路径，以便缩小脚本可以工作吗？

到目前为止，这是我的 .htaccess 文件中的内容（包括所有总缓存设置）

```
# BEGIN W3TC Minify cache
<IfModule mod_rewrite.c> 
    RewriteEngine On
    RewriteBase /
    RewriteRule ^[_0-9a-zA-Z-]+/wp-content/cache/minify/[0-9]+/w3tc_rewrite_test$ /wp-content/plugins/w3-total-cache/pub/minify.php?w3tc_rewrite_test=1 [L]
</IfModule>
# END W3TC Minify cache

# BEGIN W3TC Browser Cache
<IfModule mod_deflate.c>
    <IfModule mod_headers.c>
        Header append Vary User-Agent env=!dont-vary
    </IfModule>
        AddOutputFilterByType DEFLATE text/css text/x-component application/x-javascript application/javascript text/javascript text/x-js text/html text/richtext image/svg+xml text/plain text/xsd text/xsl text/xml image/x-icon application/json
    <IfModule mod_mime.c>
        # DEFLATE by extension
        AddOutputFilter DEFLATE js css htm html xml
    </IfModule>
</IfModule>
# END W3TC Browser Cache

# BEGIN WordPress
<IfModule mod_rewrite.c> 
    RewriteEngine On
    RewriteBase /
    RewriteRule ^index\.php$ - [L]

    # uploaded files
    RewriteRule ^([_0-9a-zA-Z-]+/)?files/(.+) wp-includes/ms-files.php?file=$2 [L]

    # add a trailing slash to /wp-admin
    RewriteRule ^([_0-9a-zA-Z-]+/)?wp-admin$ $1wp-admin/ [R=301,L]

    RewriteCond %{REQUEST_FILENAME} -f [OR]
    RewriteCond %{REQUEST_FILENAME} -d
    RewriteRule ^ - [L]
    RewriteRule  ^[_0-9a-zA-Z-]+/(wp-(content|admin|includes).*) $1 [L]
    RewriteRule  ^[_0-9a-zA-Z-]+/(.*\.php)$ $1 [L]
    RewriteRule . index.php [L]
</IfModule>
# END WordPress 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-03-20T15:51:05.803

几个月来我已经遇到了同样的问题，我想我已经解决了。这与文件权限有关。

要确定这是否是您的问题，请尝试导航到[http://yourdomain.com/wp-content/plugins/w3-total-cache/pub/minify.php](http://yourdomain.com/wp-content/plugins/w3-total-cache/pub/minify.php)。如果您收到 404，则可能是文件权限问题。你应该得到一个空白页。

检查文件权限，如果任何插件目录设置为 775 和/或任何文件设置为 664，那么这也表明权限错误。

**修理：**

将所有这些文件夹的权限更改为**755**，确保包括所有子目录，仅文件夹。

```
/wp-content/plugins
/wp-content/cache
/wp-content/w3tc-config 
```

![更改目录权限](../Images/7b038e33bac234303d2a2a80f28c5651.png)

还要确保文件正确设置为**644**，方法是使用仅在 filezilla 中应用到文件

```
/wp-content/plugins
/wp-content/cache
/wp-content/w3tc-config 
```

![更改文件权限](../Images/cc38344dcaf0e71837f5356d8b44e9df.png)

执行此操作后，您可能必须清空缩小缓存，并且根据它是否立即工作，您可能必须在清空缓存并重试后重做权限。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T06:11:14.003

您没有W3TC 如何确定将其重写规则放在何处的注释`# BEGIN WordPress`和注释 - 请查看第 19 行（假设您拥有最新版本）。`# END WordPress``/wp-content/plugins/w3-total-cache/inc/functions/rule.php`

基本上，WordPress 会在请求到达 W3TC 重写之前拦截请求，并且您会得到 404。通过将此部分移至 W3TC 规则下方，他们将在重写进入 WordPress 部分之前捕获它（`[L]`重写末尾说匹配是要遵循的**[L]** ast 规则），正确地将 URL 重写到您的缩小缓存并且不会导致 404。

我的多站点安装中的“官方”（自动生成）WordPress 块如下所示，应该是`.htaccess`文件中的最后一组重写规则，位于 W3TC 部分下方。确保包含注释，因为其他插件在更新此文件时可能会查找它们。

```
# BEGIN WordPress
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteRule ^index\.php$ - [L]

# uploaded files
RewriteRule ^files/(.+) wp-includes/ms-files.php?file=$1 [L]

RewriteCond %{REQUEST_FILENAME} -f [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^ - [L]
RewriteRule . index.php [L]
</IfModule>
# END WordPress 
```

# angularjs - AngularJS中控制器和指令之间的共享范围

> ID：15605931
> 
> 赞同：8
> 
> 时间：2013-03-25T00:35:14.970
> 
> 标签：angularjs, angularjs-directive, angularjs-scope

我创建了一个指令来包装 jQuery 插件，并将插件的配置对象从控制器传递给指令。（作品）

在配置对象中是一个我想在事件上调用的回调。（作品）

在回调中，我想修改控制器的 $scope 上的一个属性，它*不起作用*。由于某种原因，Angular 无法识别该属性已更改，这使我相信回调中的 $scope 与控制器的 $scope 不同。我的问题是我不知道为什么。

谁能指出我正确的方向？

* * *

[**单击此处获取小提琴**](http://jsfiddle.net/simshaun/qxjck/)

* * *

**应用程序.js**

```
var app = angular.module('app', [])
    .directive('datepicker', function () {
        return {
            restrict: 'A',
            link: function (scope, element, attrs) {
                // Uncommenting the line below causes
                // the "date changed!" text to appear,
                // as I expect it would.
                // scope.dateChanged = true;

                var dateInput = angular.element('.datepicker')

                dateInput.datepicker(scope.datepickerOpts);

                // The datepicker fires a changeDate event
                // when a date is chosen. I want to execute the
                // callback defined in a controller.
                // ---
                // PROBLEM: 
                // Angular does not recognize that $scope.dateChanged
                // is changed in the callback. The view does not update.
                dateInput.bind('changeDate', scope.onDateChange);
            }
        };
    });

var myModule = angular.module('myModule', ['app'])
    .controller('MyCtrl', ['$scope', function ($scope) {
        $scope.dateChanged = false;

        $scope.datepickerOpts = {
            autoclose: true,
            format: 'mm-dd-yyyy'
        };

        $scope.onDateChange = function () {
            alert('onDateChange called!');

            // ------------------
            // PROBLEM AREA:
            // This doesnt cause the "date changed!" text to show.
            // ------------------
            $scope.dateChanged = true;

            setTimeout(function () {
                $scope.dateChanged = false;
            }, 5000);
        };
    }]); 
```

**html**

```
<div ng-controller="MyCtrl">
    <p ng-show="dateChanged">date changed!</p>
    <input type="text" value="02-16-2012" class="datepicker" datepicker="">
</div> 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-25T01:41:48.250

您的演示中存在许多范围问题。首先，在`dateChange`回调中，即使函数本身在控制器中声明，`this`回调中的上下文也是引导元素，因为它在引导处理程序中。

每当您从第三方代码中更改角度范围值时，角度都需要通过使用`$apply`. 通常最好将所有第三方范围保留在指令内。

更角度的方法是`ng-model`在输入上使用。然后`$.watch`用于更改模型。这有助于将控制器内的所有代码保持在角度上下文中。在任何 Angular 应用程序中都很少用于不用于`ng-model`任何表单控件

```
 <input type="text"  class="datepicker" datepicker="" ng-model="myDate"> 
```

在指令内：

```
dateInput.bind('changeDate',function(){
      scope.$apply(function(){
         scope[attrs.ngModel] = element.val()
      });
}); 
```

然后在控制器中：

```
$scope.$watch('myDate',function(oldVal,newVal){ 
       if(oldVal !=newVal){
           /* since this code is in angular context will work for the hide/show now*/
            $scope.dateChanged=true;
             $timeout(function(){
                   $scope.dateChanged=false;
              },5000);
        }        
}); 
```

演示：http: [//jsfiddle.net/qxjck/10/](http://jsfiddle.net/qxjck/10/)

**编辑**`var dateInput = angular.element('.datepicker')`如果您想在页面中的多个元素上使用此指令，则应该更改的另一项是删除。`element`在回调中已经是参数之一的指令中使用它是多余的`link`，并且是特定于实例的。替换`dateInput`为`element`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T00:59:43.570

绑定到输入的 changeDate 事件似乎设置为在 Angular 框架之外触发。要显示段落，请[`$scope.$apply()`](http://docs.angularjs.org/api/ng.%24rootScope.Scope#%24apply)在设置`dateChanged`为 true 后调用。要在延迟后隐藏段落，您可以`$apply()`在传递给的函数中再次使用`setTimeout`，但使用 Angular 可能会避免进一步的麻烦[`$timeout()`](http://docs.angularjs.org/api/ng.%24timeout)。

[小提琴](http://jsfiddle.net/thisgeek/qxjck/6/)

# ruby-on-rails - 使用 Simple_form 分配多个关联

> ID：15605933
> 
> 赞同：0
> 
> 时间：2013-03-25T00:35:22.393
> 
> 标签：ruby-on-rails, associations

我了解如何使用 simple_form 实现单个`has_many`关联，但是如何从另一个模型对象分配附加关联？

在我的代码中，我正在创建模型对象`@opportunity`。我目前正在分配一个`company_id`，但还需要分配一个 'user_id.

`@opportunity`_form.html.erb

```
<% if user_signed_in? %>
    <%= simple_form_for([@company, @company.opportunities.build], html: {class: "form-inline"}) do |f| %>
      <%= f.error_notification %>

      <%= f.input :description, label: false, placeholder: 'Create an opportunity', input_html: { class: "span4" } %>
      <%= f.submit 'Submit', class: 'btn btn-small'%>
    <% end %>
<% else %>
    <%= link_to "Create an Account", new_user_registration_path %>
    to contribute
<% end %> 
```

机会控制器.rb

```
def create
    @company = Company.find(params[:company_id])
    @opportunity = @company.opportunities.create(params[:opportunity])

    respond_to do |format|
      if @opportunity.save
        format.html { redirect_to company_path(@company), notice: 'Opportunity was successfully created.' }
        format.json { render json: @opportunity, status: :created, location: @opportunity }
      else
        format.html { render action: "new" }
        format.json { render json: @opportunity.errors, status: :unprocessable_entity }
      end
    end
  end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T01:18:32.180

假设您的用户已登录，您可以将控制器操作更改为以下内容：

```
def create
  @company = Company.find(params[:company_id])
  @opportunity = @company.opportunities.new(params[:opportunity]) # new instead of create
  @opportunity.user = current_user # new

  respond_to do |format|
    if @opportunity.save
      format.html { redirect_to company_path(@company), notice: 'Opportunity was successfully created.' }
      format.json { render json: @opportunity, status: :created, location: @opportunity }
    else
      format.html { render action: "new" }
      format.json { render json: @opportunity.errors, status: :unprocessable_entity }
    end
  end
end 
```

# php - 如何创建下载计数器

> ID：15605937
> 
> 赞同：2
> 
> 时间：2013-03-25T00:36:01.627
> 
> 标签：php, javascript, jquery, html, mysql

好的，所以我在这里要做的是我想要一个下载计数器，它可以实时计算下载量并实时输出值，而无需用户清除缓存或刷新页面。现在我可以使用一点点 JavaScript（用于实时更新）结合 MySQL 和 PHP 来实现这一点。但问题是，为了让它实时输出值，我的意思是当用户点击这个“按钮”时，我必须创建一个跨度标签并将其包含在包含按钮的锚标签内/link 我正在跟踪。

为了帮助您更好地理解，这里是我的 HTML 和 JavaScript。

```
<?php 

    foreach($files_array as $key=>$val)
    {
        echo '<a class="btn btn-primary btn-large" href="download.php?file='.urlencode($val).'"><span class="download-text">Download 
                </span></a><span class="download-count" title="Times Downloaded">'.(int)$file_downloads[$val].'</span>
                ';
    }

?> 
```

这是JavaScript

```
$(document).ready(function(){
/* This code is executed after the DOM has been completely loaded */

$('#download-button a').click(function(){

    var countSpan = $('.download-count',this);
    countSpan.text( parseInt(countSpan.text())+1);
}); }); 
```

我希望能够在标签内部但在其外部不包含计数器的跨度标签。

提前致谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T01:30:44.987

我在评论中的建议是这样的：

```
<ul>
<?php 
    foreach($files_array as $key=>$val) {
        echo '<li>';
        echo '<a class="btn btn-primary btn-large" href="download.php?file='.urlencode($val).'"><span class="download-text">Download</span></a><span class="download-count" title="Times Downloaded">'.(int)$file_downloads[$val].'</span>';
        echo '</li>';
    }
?>
</ul> 
```

然后在 JavaScript 中：

```
$(document).ready(function(){
    /* This code is executed after the DOM has been completely loaded */

    $('#download-button a').click(function(){
        var countSpan = $(this).closest('li').find('.download-count');
        countSpan.text( parseInt(countSpan.text(), 10) + 1);
    }); 
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T01:52:07.113

如果您希望能够在不刷新页面的情况下轮询有多少全球用户下载了该项目并更新前端，您将需要使用套接字或 setInterval()：

以下是使用 setInterval() 并每 3 秒更新一次数字的方法（您不想做太多，否则会给您的服务器带来很大的负担）：

```
<ul>
<?php 
    foreach($files_array as $key => $val) {
        echo "<li id=\"download-$key\">";
        echo '<a class="btn btn-primary btn-large" href="download.php?file=' . urlencode($val) . '"><span class="download-text">Download</span></a><span class="download-count" title="Times Downloaded">' . (int)$file_downloads[$val] . '</span>';
        echo '</li>';
    }
?>
</ul>

<script>
    setInterval(function() {
        $.getJSON('/download-count.php', function(e) {
            var i;
            for (i in e) {
                if (e.hasOwnProperty(i)) {
                    $('#download-' + i + ' .download-count').text(e[i]);
                }
            }
        });
    }, 3000); // ping every 3 seconds
</script> 
```

您需要为您的 Ajax 提供一个新文件（在我的示例中我称之为`/download-count.php`），它将为您的号码回显 JSON

```
echo json_encode($file_downloads); 
```

这显然是一个简单的例子，但希望它能够理解这一点。

更新：**download-count.php**文件需要如下所示：

```
<?php
    /**
     * You don't show how you populate $file_downloads in your question but
     * however you do it, do it the same way here
     */
    $file_downloads = foo();

    echo json_encode($file_downloads);

    die(); 
```

# asp.net - 具有不同参数类型的 MVC3 路由

> ID：15605945
> 
> 赞同：2
> 
> 时间：2013-03-25T00:36:51.003
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3, routes, asp.net-mvc-routing

我正在努力解决 MVC3 中的路由问题。

以前我通常只是避开整个区域并坚持使用丑陋的旧`?id=1&foo=bar`类型网址。不太好。

我因此定义了 4 条路线

```
routes.MapRoute("Blog", "{controller}/{action}/{PageNumber}/{PostsPerPage}", new { controller = "blog", action = "list", PageNumber = UrlParameter.Optional, PostsPerPage = UrlParameter.Optional });
routes.MapRoute("Code", "{controller}/{action}/{title}", new { });
routes.MapRoute("Id", "{controller}/{action}/{id}", new { });
routes.MapRoute("Default", "{controller}/{action}", new { controller = "home", action = "index" }); 
```

我试图从最具体到最不具体的顺序排列它们。

第一个“博客”路由工作正常，我可以使用类似的 URL `/blog/list/2/5`，它可以正确映射到我的控制器。

底部的默认路由也可以正常工作。

但是，如果我有这样的操作方法：

```
public ActionResult BarX(int id)
{
    //some stuff
}

public ActionResult BarY(string title)
{
    //some stuff
} 
```

我希望它使用第三条路由并生成一个类似`/foo/barX/3`.

然而，如果我使用

```
@Html.ActionLink("TEST1", "barX", "foo", new { id = 3 }, null) 
```

生成的 URL 是

```
/foo/barx?id=3 
```

同样，生成的 URL

```
@Html.ActionLink("TEST2", "barY", "foo", new { title = "test" }, null) 
```

是

```
/foo/bary?title=test 
```

所以我想我的问题是：为什么他们使用旧`?id=`语法而不是生成 URL `/foo/barx/3`？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-25T00:41:26.680

你所有的路线基本上都是一样的。他们是

```
{controller}/{action}/{param}/{param} 
```

`{controller}/{action}/{id}`我这么说是因为路由引擎无法理解和之间的区别`{controller}/{action}/{title}`

并且路由引擎真的会看到

```
{controller}/{action}/{PageNumber}/{PostsPerPage} 
```

并将所有路线与第一条路线混淆。

* * *

一旦路线引擎`{optional}/{optional}/{optional}/{optional}/`在顶部看到您几乎通用的路线，任何具有 4 个或更少元素的东西都可以适应它，因此它不会再往前走。

* * *

另一方面，如果您的路线有独特的开端，而不是通用的`{Controller}`：

```
routes.MapRoute("Blog", "Blog/{PageNumber}/{PostsPerPage}", new { controller = "blog", action = "list", PageNumber = UrlParameter.Optional, PostsPerPage = UrlParameter.Optional });
routes.MapRoute("Code", "Code/{title}", new { controller = "code", action = "list", title = UrlParameter.Optional });
routes.MapRoute("Default", "{controller}/{action}/{id}", new { controller = "home", action = "index", id = UrlParameter.Optional }); 
```

现在，每次路由引擎看到`Blog/...`它都知道只有 1 个路由可以匹配。与所有其他人一起，它将继续寻找匹配项。每当它看到`Code/...`时，再次只有 1 条路线是匹配的。并且 Default 将处理任何`{Controller}/{Action}/{id}`没有`Blog`或`Code`作为第一个路由参数的东西。

# sql - 在sql中拆分列值

> ID：15605947
> 
> 赞同：0
> 
> 时间：2013-03-25T00:37:21.977
> 
> 标签：sql, oracle

我在表中有一个列，它是 varchar2 的 varray。获取此列值后，我想处理此可变数组列的每个元素。如何将检索到的列拆分为单个值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T06:52:05.027

这可能会帮助您：

```
CREATE TABLE t (id NUMBER, val VARCHAR2(20));
insert into t values (1,'val1');
INSERT INTO t VALUES (2,'val2');
INSERT INTO t VALUES (3, 'val3');

SET serveroutput ON
DECLARE
type my_type IS varray(200) OF VARCHAR2(200);
obj1 my_type := my_type();
BEGIN
     FOR i IN 1..3 LOOP
          obj1.extend;
          SELECT val INTO obj1(i) FROM t WHERE id = i;
     end loop;

     FOR j IN obj1.first..obj1.last LOOP
          dbms_output.put_line(obj1(j));
     END LOOP;
END; 
```

结果：

```
val1
val2
val3 
```

或者您可以对嵌套表列使用以下内容：

```
 FOR REC IN
     (SELECT * FROM TABLE(c)    --or  select * from table(cast(c as object_type_tab))
     )
     LOOP
          dbms_output.put_line(rec.id || ', ' || rec.val);
     END LOOP; 
```

# php - foreach 循环中未定义的变量

> ID：15605950
> 
> 赞同：1
> 
> 时间：2013-03-25T00:37:48.497
> 
> 标签：php

当我执行`foreach()`循环时，当前数组元素的值`$recipient`未定义在 line 上`->to($recipient)`。为什么是这样？

**PHP 代码（抛出错误）**

```
foreach($recipients as $recipient) {
    Mail::send('emails.invite', $data, function($m){
        $m
            ->from('welcome@website.com', Auth::user()->name)
            ->to($recipient)
            ->subject('Auth::user()->name has invited you!');
    });
} 
```

**错误**

```
Notice: Undefined variable: recipient 
```

**PHP 代码（无错误）**

```
foreach($recipients as $recipient) {
    echo $recipient;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T00:39:53.073

你错过了`use`关键字。将代码更改为：

```
foreach($recipients as $recipient) {
    Mail::send('emails.shareListing', $data, function($m) use($recipient) {
        $m
            ->from('share@asd.com', Auth::user()->name)
            ->to($recipient)
            ->subject('Auth::user()->name has shared a listing with you!');
    });
} 
```

请参阅[本文档](http://php.net/manual/de/functions.anonymous.php)- 特别是第三个示例。引用：

> 闭包也可以从父作用域继承变量。任何此类变量都必须在函数头中声明。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T00:41:01.400

这是因为你在函数的范围内。

假设你在这里使用 PEAR 包，我不明白你为什么要传递一个函数： http: [//pear.php.net/manual/en/package.mail.mail.send.php](http://pear.php.net/manual/en/package.mail.mail.send.php)

如果您打算这样做，您可以使用`use`关键字将变量传递到函数范围：

```
function($m) use($recipient) { 
```

# javascript - jQuery 移动滑块输入更改事件

> ID：15605952
> 
> 赞同：4
> 
> 时间：2013-03-25T00:38:16.433
> 
> 标签：javascript, jquery-mobile, jquery

我正在使用 jQuery 移动滑块输入。我的页面中可以有多个滑块，发生的情况是它经常触发“更改”事件，而不仅仅是在实际输入值更改时。这是我的代码：

```
<div class="questionContent ui-hide-label" data-role="fieldcontain">
    <input type="range" class="slider" value="" min="1" max="5" data-highlight="true" name="slider"  data-theme="b" />  
</div>

$('input.slider').each(function() {
    $(this)
    .bind('change',function() {
        console.log('changed')
    })
}) 
```

我还为此创建了一个 jsFiddle：http: [//jsfiddle.net/EAewE/](http://jsfiddle.net/EAewE/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T01:24:41.263

问题是，每当单击鼠标、轻微移动等时，后台的 jQuery 都会更改绑定到滑块的输入值，因此“更改”实际上经常触发，因为它应该如此。

在 jQuery Mobile 中，您最好使用仅在滑块停止移动时触发的[slidestop](http://api.jquerymobile.com/slider/#event-stop)事件。请注意，当输入的值以编程方式更改时，不会触发此事件，仅当用户使用实际滑块时。

# mysql - 创建时如何复制行？

> ID：15605953
> 
> 赞同：1
> 
> 时间：2013-03-25T00:38:20.360
> 
> 标签：mysql, copy, row

向大家问好，

我正在检查有关复制行的问题，但找不到解决方案或搜索错误。

我正在尝试上传多个文件并将一些信息存储在 2 个表中，这些表是在上传过程中同时创建的。

我有 2 个表，称为“媒体”和“pmedia”结构；

```
CREATE TABLE IF NOT EXISTS `media` (
  `id` int(11) unsigned NOT NULL auto_increment,
  `product_id` int(1) unsigned NOT NULL default '0',
  `media_id` int(1) unsigned NOT NULL default '0',
  `ordering` int(2) NOT NULL default '0',
  PRIMARY KEY  (`id`),
  UNIQUE KEY `i_product_id` (`product_id`,`media_id`)
) ENGINE=MyISAM  DEFAULT CHARSET=utf8 AUTO_INCREMENT=267 ; 
```

和

```
CREATE TABLE IF NOT EXISTS `pmedia` (;
  `media_id` int(11) unsigned NOT NULL auto_increment,
  `file_title` char(126) NOT NULL default '',
  `file_mimetype` char(64) NOT NULL default '',  
  PRIMARY KEY  (`media_id`),
  KEY `i_vendor_id` (`vendor_id`)
) ENGINE=MyISAM  DEFAULT CHARSET=utf8 AUTO_INCREMENT=274 ; 
```

我正在将多张图片上传到没有问题的“pmedia”；

```
$query="INSERT into pmedia (`file_title`,`file_mimetype`) VALUES ('$file_name','$file_type') ; "; 
```

但同时我希望那些上传文件的自动创建列“media_id”也复制到“媒体”表..

结果应该是上传后；

![在此处输入图像描述](../Images/8882e719a21e49b0785d2fdd3eb5e53f.png)

**EDIT2：** 好的，这就是循环本身。我只是写错了。下面的代码在 Ruly 和 gaRex 的帮助和启发下工作。非常感谢。

**编辑 ：**

这是结构，很抱歉缺少解释。（我不想在单个查询中这样做。）我应该如何实现循环？这样它只会将上传的数据写入pmedia。

```
<?php
if(isset($_FILES['files'])){
$errors= array();
foreach($_FILES['files']['tmp_name'] as $key => $tmp_name ){
    $file_name = $_FILES['files']['name'][$key];
    $file_size =$_FILES['files']['size'][$key];
    $file_tmp =$_FILES['files']['tmp_name'][$key];
    $file_type=$_FILES['files']['type'][$key];

    if($file_size > 2097152){
        $errors[]='File size must be less than 2 MB';
    }       

        $query="INSERT into pmedia (`file_title`,`file_mimetype`) VALUES ('$file_name','$file_type') ; ";
        $media_id = mysql_insert_id();

        $query2="INSERT into media (`media_id`) VALUES ($media_id) ; ";

    $desired_dir="user_data";
    if(empty($errors)==true){
        if(is_dir($desired_dir)==false){
            mkdir("$desired_dir", 0700);        // Create directory if it does not exist
        }
        if(is_dir("$desired_dir/".$file_name)==false){
            move_uploaded_file($file_tmp,"$desired_dir/".$file_name);
        }else{                                  // rename the file if another one exist
            $new_dir="$desired_dir/".$file_name.time();
             rename($file_tmp,$new_dir) ;               
        }
     mysql_query($query);
     mysql_query($query2);  

    }else{
            print_r($errors);
    }
}
if(empty($error)){
    echo "Success";

} }
?>
<form action="" method="POST" enctype="multipart/form-data">
<input type="file" name="files[]" multiple/>
<input type="submit"/>
</form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T01:05:59.203

有两种方法可以做到这一点：

1.  运行多个查询

    执行后：

    ```
    $query="INSERT into pmedia (`file_title`,`file_mimetype`) VALUES ('$file_name','$file_type') ; "; 
    ```

    获取新记录的 id，使用 mysqli_insert_id

    [http://www.php.net/manual/en/mysqli.insert-id.php](http://www.php.net/manual/en/mysqli.insert-id.php)

    然后执行：

    ```
    $query="INSERT into media (`id`,`product_id`, `media_id`, `ordering`) VALUES ($id, $product_id, $media_id, $ordering) ; "; 
    ```

2.  使用触发器，但对于这种情况我敢肯定，因为我认为您可以从 pmedia 表中获取 id、product_id、ordering 的值

**编辑：**

要添加多行，您应该有一个循环，并且在循环中您应该执行这三个步骤。代码应该是这样的：

```
// Looping {
    $query="INSERT into pmedia (`file_title`,`file_mimetype`) VALUES ('$file_name','$file_type') ; ";

    $media_id = mysqli_insert_id($conn);

    $query="INSERT into media (`id`,`product_id`, `media_id`, `ordering`) VALUES ($id, $product_id, $media_id, $ordering) ; ";
// } Looping 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T02:56:30.470

为什么要在一个查询中向 pmedia 中插入多行？

最简单可靠的方法是在其中插入一行，然后才更新媒体表。

但如果你愿意，你可以试试这两种方法。他们都很脏：

1.  向 pmedia 添加一些具有唯一值的列，可以在外部设置。让它成为我们可爱的 GUID（见 google）CHAR(36)。然后在脚本中生成这个值并设置为 pmedia 的每一行。之后您将不需要任何 mysql 的插入 ID，因为您已经生成了它们。然后，您可以通过在插入查询中引用 pmedia 来插入媒体表。

    插入 t1 (v1, v2) 值 ($v1, (select id from t2 where guid = $guid)), ...

2.  开始交易。插入 pmedia，获取最后一条记录的 last_insert_id()。然后，您可以计算第一条记录的 id，因为您现在计算记录。

但请记住——两种方式都是肮脏和糟糕的。

# html - 奇怪的填充物

> ID：15605955
> 
> 赞同：0
> 
> 时间：2013-03-25T00:38:31.110
> 
> 标签：html, css, twitter-bootstrap

我现在正在处理的网站右侧出现一些奇怪的填充问题。我目前正在 13 英寸 Macbook Pro 上在该视口内全屏查看它。（据我所知，它在较小的视口上存在很多问题；在此过程中我还没有达到这一点。 ) 我已经使用 Chrome 中的开发人员工具对其进行了彻底检查，但找不到任何可以解释创建水平滚动的 padding-right 或 margin-right 的东西。

它目前使用 Bootstrap 和 Flexslider 构建。

回购链接：[https ://github.com/helenvholmes/designshow](https://github.com/helenvholmes/designshow)

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T00:46:48.960

水平滚动条也出现在我的 Win 8 64 系统上的 Chrome 25 上，无论宽度如何。

尝试`overflow: hidden;`添加`div.flexslider`.

这为我删除了水平滚动条，并且*似乎*使其他所有内容保持不变。但是，请注意，我没有彻底测试所有内容，因此请仔细查看该规则是否有其他不需要的副作用。

这对你有什么作用？

# c# - BackgroundWorker 中调用目标引发的异常

> ID：15605961
> 
> 赞同：4
> 
> 时间：2013-03-25T00:39:02.280
> 
> 标签：c#, winforms, zip, backgroundworker, dotnetzip

我有以下代码：

```
public void extractZipFile()
{
    if (!System.IO.Directory.Exists(extractDirectory))
        System.IO.Directory.CreateDirectory(extractDirectory);

    BackgroundWorker worker = new BackgroundWorker();
    worker.WorkerReportsProgress = true;
    worker.ProgressChanged += (o, e) =>
    {
        progbarExtract.Value = Convert.ToInt32(e.ProgressPercentage);
    };

    lblExtracting.Text = "Extracting...";
    worker.DoWork += (o, e) =>
    {
        using (ZipFile zip = ZipFile.Read(zipFile))
        {
            int step = Convert.ToInt32(zip.Count / 100.0); 
            int percentComplete = 0; 
            foreach (ZipEntry file in zip)
            {
                file.Extract(Environment.GetFolderPath(Environment.SpecialFolder.ApplicationData) + "\\XBMC Library Importer\\XBMC_Files", ExtractExistingFileAction.OverwriteSilently);
                    percentComplete += step; //When I comment this out I don't get an exception
                    worker.ReportProgress(percentComplete);
            }
        }
    };

    worker.RunWorkerAsync();
} 
```

我不明白为什么该语句`percentComplete += step;`会导致错误（`Exception has been thrown by the target of an invocation.`）。

我该如何解决这个问题？

另外，有人知道`MessageBox.Show()`提取完成后如何显示消息框（ ）吗？

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-25T01:36:52.663

您需要查看异常的 InnerException 属性以了解 TargetInvocationException 的原因。

粗略猜测一下：您错误地计算了*step*的值。它应该是 100.0 / zip.Count。也应该是双打。因此，当 .zip 文件包含超过 100 个文件时，您将冒险增加超过 100 的进度。当您将该值分配给 ProgressBar.Value 时，它​​会爆炸。您应该已经注意到进度条在小型档案中也表现不佳，根本不会增加。

调试此类难以捉摸的错误的一个好方法是 Debug + Exception，勾选 Thrown 复选框以获得 CLR 异常。抛出异常时，调试器现在将停止。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T00:56:11.087

```
 worker.ProgressChanged += (o, e) =>
    { 
```

// 看起来您正试图从后台线程更新 GUI 元素并且它正在引发异常。尝试将线程编组到 GUI 线程。

```
progbarExtract.Value = Convert.ToInt32(e.ProgressPercentage);
    }; 
```

# django - Django 查询集添加的属性未显示在模板中

> ID：15605970
> 
> 赞同：0
> 
> 时间：2013-03-25T00:39:59.833
> 
> 标签：django, templates

all_我很难拥有要添加到 QS 以显示在我的模板中的属性。

我有一个看起来像这样的经理：

```
def created_by(self, _userProfile, dateGt=None, dateLt=None):

    results = self.filter(creator=_userProfile, ...) //Some QS here

    for result in results:
        result.finished = "It works!"
    for result in results:
        print result.finished
    return results 
```

这会在我的控制台中打印：（我有 2 个事件）。我做了双 for 循环作为调试，以确保退出 for 循环后数据仍然存在。

```
 It works!
    It works! 
```

然后我打电话给经理：

```
 events = Event.manager.created_by(some stuff here).order_by('-id') 
```

然后是奇怪的部分：我将上面行的结果传递给模板并显示类似的内容：

```
{% for event in all_events %}
    <li><a href="{% url "edit_event" event_id=event.id %}">{{ event.title }} Finished:{{ event.finished }}</a></li>
{% empty %}
    <em>{% trans "NOTHING" %}</em>
{% endfor %} 
```

一切都显示出来了（标题、id 等），但不是“完成”的部分。

知道这可能来自哪里吗？我修剪了代码以提高可读性，但我认为我删除的任何内容与这里无关。

谢谢！

**编辑：**

这是视图（由于stackoverflow 4个空格的东西而出现奇怪的缩进）

```
def homepage(request):
variables = {}
if request.user.is_authenticated():
    datenow=datetime.now()
    me = request.user.get_profile()
    variables['all_events'] = Event.manager.created_by(me).order_by('-id') [:20]
context_instance = RequestContext(request)
template_name = "common/homepage.html"
return render_to_response(template_name, variables, context_instance) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T16:05:57.657

我最终在 Event 模型中创建了一个 finished() 方法，并在模板中直接调用 event.finished。

它是这样工作的，但我仍然不知道为什么我的第一个设置没有

# php - PHP 原始 16 位颜色

> ID：15605974
> 
> 赞同：6
> 
> 时间：2013-03-25T00:40:38.497
> 
> 标签：php, image-processing

有没有办法使用 PHP 将 16 位（灰度）彩色 PNG 转换为 RGBA4444 颜色格式？

-或者-

有没有办法使用 RGBA4444 格式加载这个 16 位灰度 PNG？

PNG 标头表示它使用 16 位颜色（位深度）和灰度颜色（颜色类型）（[http://www.fileformat.info/format/png/corion.htm](http://www.fileformat.info/format/png/corion.htm)，IHDR 图像标头）。

```
$rgb = imagecolorat($src, $x, $y);
var_dump("RGB - ".dechex($rgb));
$rgba = imagecolorsforindex($src, $rgb);
var_dump("RGBA - ".dechex($rgba)); 
```

`$rgb`（例如）的值是`A7`while `$rgba`is `[A7, A7, A7, 0]`。

顺便说一句，这是所述文件的标题：

```
89 50 4E 47 0D 0A 1A 0A 00 00 00 0D 49 48 44 52 | .PNG........IHDR
00 00 03 FF 00 00 03 FF 10 00 00 00 00 E3 F9 FF | ................
C9 00 00 00 0D 74 45 58 74 44 46 4D 54 00 52 34 | .....tEXtDFMT.R4
47 34 42 34 41 34 E0 94 BA 92 00 00 20 00 49 44 | G4B4A4........ID
41 54 .. ..                                     | AT 
```

编辑：

我首先做的是遵循查理的这段代码（[https://stackoverflow.com/a/7293429/2205703](https://stackoverflow.com/a/7293429/2205703)）。（当然有一些修改。）然后将每个 16 位颜色格式（基于`tEXt`块）转换为 RGBA8888 格式。

然后，`pack()`将它们转换为 PNG 文件格式。但我仍然遇到图像错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T09:41:25.843

布拉德的回答还不错。对于灰度图像，截断到 8 位就足够了。RGBA 将以透明图像结束，这可能不是您真正想要的。您是否已经尝试过转换为全彩色 24 位图像？结果仍然看起来像灰度，您可以轻松地将其降低到 8 位。

使用 imagick 会使这个过程更简单：

```
convert source-image.png -evaluate multiply 16 -depth 8 destination-image.png 
```

# javascript - 保存的网页显示 Javascript 错误

> ID：15605975
> 
> 赞同：2
> 
> 时间：2013-03-25T00:40:41.690
> 
> 标签：javascript, d3.js

有这个很棒的网站：[http ://d3-generator.com/](http://d3-generator.com/)

我做了一个保存网页-完成，它现在在我的桌面上。

当我在本地运行保存的版本时，一切看起来都像网站的在线版本，我复制粘贴相同的 CSV 并单击“生成图表”按钮，但此时这是我得到的错误：

![在此处输入图像描述](../Images/fbd88c6a187925f5f219ed5c6c92afa7.png)

这真的很容易重现，您只需保存该网页并尝试在本地运行它，您就会收到该错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T00:57:26.033

我调试了文件，它说 `“Cross origin requests are only supported for HTTP."`

您需要实际运行一个网络服务器，并向该服务器上的 URI`http://localhost/graph/creator.htm`发出 get 请求，而不是向文件发出 get 请求；例如`file:///C:/Users/myuser/Downloads/Creator.htm`

并非所有时间，当您将网站保存在本地时，一切都会正常工作。有时并非所有在网站上使用的引用也会被保存，这就是为什么它的某些部分真的不起作用的原因。

在＃3：**源代码编辑器**只需单击**导出 HTML**

HTML 导出源：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<!-- Generated with d3-generator.com -->
<html>
  <head>
     <title>Bar Chart</title>
     <meta http-equiv="X-UA-Compatible" content="IE=9">
  </head>
  <body>
    <div id="chart"></div>
    <script src="http://d3js.org/d3.v2.min.js"></script>
    <script>
function renderChart() {

var data = d3.csv.parse(d3.select('#csv').text());
var valueLabelWidth = 40; // space reserved for value labels (right)
var barHeight = 20; // height of one bar
var barLabelWidth = 100; // space reserved for bar labels
var barLabelPadding = 5; // padding between bar and bar labels (left)
var gridLabelHeight = 18; // space reserved for gridline labels
var gridChartOffset = 3; // space between start of grid and first bar
var maxBarWidth = 420; // width of the bar with the max value

// data aggregation
var aggregatedData = d3.nest()
  .key(function(d) { return d['Average Life Expectancy']; })
  .rollup(function(d) {
    return {
      'value': d3.sum(d, function(e) { return parseFloat(e['Average Life Expectancy']); })
    };
  })
  .entries(data);

// accessor functions 
var barLabel = function(d) { return d.key; };
var barValue = function(d) { return d.values.value; };

// sorting
var sortedData = aggregatedData.sort(function(a, b) {
  return d3.ascending(barValue(a), barValue(b)); 
}); 

// scales
var yScale = d3.scale.ordinal().domain(d3.range(0, sortedData.length)).rangeBands([0, sortedData.length * barHeight]);
var y = function(d, i) { return yScale(i); };
var yText = function(d, i) { return y(d, i) + yScale.rangeBand() / 2; };
var x = d3.scale.linear().domain([0, d3.max(sortedData, barValue)]).range([0, maxBarWidth]);
// svg container element
var chart = d3.select('#chart').append("svg")
  .attr('width', maxBarWidth + barLabelWidth + valueLabelWidth)
  .attr('height', gridLabelHeight + gridChartOffset + sortedData.length * barHeight);
// grid line labels
var gridContainer = chart.append('g')
  .attr('transform', 'translate(' + barLabelWidth + ',' + gridLabelHeight + ')'); 
gridContainer.selectAll("text").data(x.ticks(10)).enter().append("text")
  .attr("x", x)
  .attr("dy", -3)
  .attr("text-anchor", "middle")
  .text(String);
// vertical grid lines
gridContainer.selectAll("line").data(x.ticks(10)).enter().append("line")
  .attr("x1", x)
  .attr("x2", x)
  .attr("y1", 0)
  .attr("y2", yScale.rangeExtent()[1] + gridChartOffset)
  .style("stroke", "#ccc");
// bar labels
var labelsContainer = chart.append('g')
  .attr('transform', 'translate(' + (barLabelWidth - barLabelPadding) + ',' + (gridLabelHeight + gridChartOffset) + ')'); 
labelsContainer.selectAll('text').data(sortedData).enter().append('text')
  .attr('y', yText)
  .attr('stroke', 'none')
  .attr('fill', 'black')
  .attr("dy", ".35em") // vertical-align: middle
  .attr('text-anchor', 'end')
  .text(barLabel);
// bars
var barsContainer = chart.append('g')
  .attr('transform', 'translate(' + barLabelWidth + ',' + (gridLabelHeight + gridChartOffset) + ')'); 
barsContainer.selectAll("rect").data(sortedData).enter().append("rect")
  .attr('y', y)
  .attr('height', yScale.rangeBand())
  .attr('width', function(d) { return x(barValue(d)); })
  .attr('stroke', 'white')
  .attr('fill', 'steelblue');
// bar value labels
barsContainer.selectAll("text").data(sortedData).enter().append("text")
  .attr("x", function(d) { return x(barValue(d)); })
  .attr("y", yText)
  .attr("dx", 3) // padding-left
  .attr("dy", ".35em") // vertical-align: middle
  .attr("text-anchor", "start") // text-align: right
  .attr("fill", "black")
  .attr("stroke", "none")
  .text(function(d) { return d3.round(barValue(d), 2); });
// start line
barsContainer.append("line")
  .attr("y1", -gridChartOffset)
  .attr("y2", yScale.rangeExtent()[1] + gridChartOffset)
  .style("stroke", "#000");

}
    </script>
    <script id="csv" type="text/csv">Name,Population (mill),Average Life Expectancy,Area (1000 sq mi),Continent
Canada,33.9,80.7,3854.085,America
US,308.3,78.2,3784.191,America
Germany,82.3,79.4,137.847,Europe
Russia,141.9,65.5,6601.668,Europe
Mexico,108.4,76.06,758.449,America
Brazil,193.3,71.99,3287.612,America
Spain,46.9,80.9,195.365,Europe
France,65.4,80.98,244.339,Europe
China,1339,73,3705.407,Asia
Australia,22.4,81.2,2969.907,Australia
UK,62,79.4,93.800,Europe
Italy,60.3,80.5,116.346,Europe
India,1184,64.7,1236.085,Asia
Japan,127.4,82.6,145.920,Asia
Iceland,0.3,81.8,40.000,Europe
Portugal,10.6,78.1,35.560,Europe
South Africa,50,49.3,471.445,Africa
Egypt,78.9,71.3,387.000,Africa
Sweden,9.3,80.9,170.410,Europe</script>
    <script>renderChart();</script>
  </body>
</html> 
```

单击复制到剪贴板，将其粘贴到文本编辑器中，然后将其保存为 html。

打开您的 Html 文件，将生成图形。

此致

# javascript - 为什么这个正则表达式总是返回null？

> ID：15605976
> 
> 赞同：0
> 
> 时间：2013-03-25T00:40:44.363
> 
> 标签：javascript, regex, string, match

我需要检查字符串中的类名。

我的字符串如下所示：

```
testing ui-li ui-li-static ui-btn-up-f ui-first-child ui-filter-hidequeue 
```

我正在寻找`ui-filter-hidequeue`字符串中的任何地方（！）。

这就是我正在尝试的。它总是返回`null`，尽管我要匹配的字符串在那里：

```
var classPassed = 'ui-filter-hidequeue',
    classes = 'testing ui-li ui-li-static ui-btn-up-f ui-first-child ui-filter-hidequeue',
    c = new RegExp('(?:\s|^)' + classPassed + '(?:\s|$)');

console.log( classes.match(c) )   // returns null 
```

**问题：**
有人可以告诉我我在正则表达式中做错了什么吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T00:44:39.813

你需要`\\s`. `\s`在字符串内部会转义`s`不需要转义的`"s"`. 即，当您使用文字正则表达式时，反斜杠会转义正则表达式字符；并且字符串也使用反斜杠来转义字符串字符。当你从一个字符串构建一个正则表达式时，你需要考虑这两层：`\\`是字符串逃逸的说法`\`，然后`\s`是正则表达式逃逸的说法是空格。

此外，正如其他评论所显示的那样，有更好的方法来测试课堂存在。:) 但我只是回答了直接错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T00:44:55.097

尝试使用这个：

```
c = new RegExp('\\b' + classPassed + '\\b'); 
```

元`\b`字符匹配单词的开头/结尾；它代表边界（如单词边界）。

# php - $_SERVER['QUERY_STRING'] 与 |

> ID：15605979
> 
> 赞同：0
> 
> 时间：2013-03-25T00:40:55.163
> 
> 标签：php, query-string

我`$_SERVER['QUERY_STRING']`在我的 PHP 脚本中使用。我的查询字符串`?e+e`工作正常，但`?e|e`没有。

我的 PHP 脚本很简单：

```
<?php
echo $_SERVER['QUERY_STRING'];
?> 
```

为什么不起作用`|`？`|`如果我不使用 use ，我似乎可以使用`$_SERVER['QUERY_STRING']`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T00:52:12.120

如果您在浏览器中手动添加管道符号，则可能会发生这种情况

尝试这样做：?e%7Ce

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T00:54:11.950

您需要将`|`符号编码为`%7C`. 那么它将起作用。`$_SERVER['QUERY_STRING']`会自动解码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T00:57:42.250

这不是正确的 QUERY_STRING 原因“|” 是不允许的符号。[RFC 2396](http://www.ietf.org/rfc/rfc2396.txt) 2.3。

```
Data must be escaped if it does not have a representation using an
unreserved character; this includes data that does not correspond to
a printable character of the US-ASCII coded character set, or that
corresponds to any US-ASCII character that is disallowed, as
explained below. 
```

# mysql - 仅当表为空时才执行 mysql insert

> ID：15605985
> 
> 赞同：4
> 
> 时间：2013-03-25T00:41:58.257
> 
> 标签：mysql

在这个问题之后，我一直在尝试模仿正确的答案，仅当表格为空时才在表格中插入数据。

[如果表为空，则执行 INSERT？](https://stackoverflow.com/questions/5307164/execute-insert-if-table-is-empty)

这是我的代码：

```
INSERT INTO `statuses` SELECT 
    ('Something', 'Something else', 123),
    ('Something', 'Something else', 234)
    WHERE NOT EXISTS (SELECT * FROM `statuses`); 
```

但是，如果表为空，我不会添加元素，而是得到：

```
#1064 - You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'WHERE NOT EXISTS (SELECT * FROM `statuses`)' 
```

我应该如何编写查询以便仅在表为空时才插入值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T01:06:57.650

您的语句中有语法错误：

```
INSERT INTO `statuses`
    (SELECT  'Something', 'Something else', 123
     WHERE NOT EXISTS (SELECT * FROM `statuses`)
    ) union all
    (SELECT 'Something', 'Something else', 234
     WHERE NOT EXISTS (SELECT * FROM `statuses`)
    ); 
```

在这种情况下，您需要重复`where`两次，每个子查询一次。你也可以这样做：

```
INSERT INTO `statuses`
    select t.*
    from ((SELECT  'Something' as col1, 'Something else' as col2, 123 as col3
          ) union all
          (SELECT 'Something', 'Something else', 234
          )
         ) t
    WHERE NOT EXISTS (SELECT * FROM `statuses`); 
```

在此版本中，您需要为列分配名称。

或者，您可以只使用两个单独的插入语句。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-21T09:34:12.783

正确的语法是：

```
INSERT INTO user_authentication
SELECT t.*
FROM ((SELECT 1 as col1, 'kingston' as col2, 'test' as col3, true as col4)) t
WHERE NOT EXISTS (SELECT * FROM user_authentication); 
```

这对我有用。

# objective-c - 将 CFAbsoluteTimes 分桶到一天 NSDates

> ID：15605986
> 
> 赞同：0
> 
> 时间：2013-03-25T00:42:00.160
> 
> 标签：objective-c, nsarray, nsdate, buckets

我有一个`NSArray`s `CFAbsoluteTime`。它们*应该*从最早到最新排序，但如果不是，我可以对它们进行排序。

我需要做的是找到最小和最大日期（例如 1 月 1 日到 1 月 5 日）并创建一个显示每天之间计数的分桶，例如：

```
Jan 1 - 1
Jan 2 - 0
Jan 3 - 4
Jan 4 - 0
Jan 5 - 3 
```

类似的东西。`NSDate`将绝对时间转换为我可以计算的某种舍入的最简单方法是什么？中间形式对我来说并不重要。我只需要编写一个在给定日期时返回计数的函数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T01:07:28.267

对于这个问题，使用 NSDate 而不是 CFAbsoluteTime，您可能会更高兴完全在 Cocoa 中工作。

适用的文档是[日期和时间编程指南](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/DatesAndTimes/DatesAndTimes.html#//apple_ref/doc/uid/10000039i)。

您需要的一般方法是在 中工作`NSCalendar`，它封装了有关特定时区的所有关于每月天数、每年月数、闰年、DST 变化的所有信息。将您的`NSDate`实例转换为`NSDateComponent`，您将能够提取日期和月份数字，然后从那里分桶。

请记住，您编写的函数（在给定日期时返回计数）将隐式或显式地处理 NSCalendar 和 NSTimeZone 值。答案会因年份而异（是闰年吗？间隔是否包括闰日）和地区/日期（我们现在是否在这个位置观察夏令时？）。

# python - python - xml/html 解析问题

> ID：15605991
> 
> 赞同：0
> 
> 时间：2013-03-25T00:43:00.030
> 
> 标签：python, xml, parsing, lxml

我需要将给定的文件解析为字符串列表，给定的文件样式是这样的：

```
<DOC>
<DOCNUM> NUMBER </DOCNUM>
<DOCTYPE> TYPE </DOCTYPE>
<HEADER>
&SOMETHING
</HEADER>
<BODY>
<HEADLINE>
SOME TEXT
</HEADLINE>
TEXT
TEXT 
TEXT 
<TEXT>
<P>
INPUT TEXT1
</P>
<P>
INPUT TEXT2
</P>
.
.
.
</TEXT>
</BODY>
</DOC> 
```

我需要列出 P 标签外观内的所有 TEXTi 实例。我尝试使用 lxml xml 解析器执行此操作，但因为 &something 在 xml 格式中是不可接受的，所以它不起作用……我尝试使用 html 解析器，但我没有弄清楚如何使其工作。

有谁知道我获得所需清单的好方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T01:10:16.620

[beautifulsoup](http://www.crummy.com/software/BeautifulSoup/bs4/doc/)似乎解析它没有问题。

```
>>> from bs4 import BeautifulSoup as BS
>>> from itertools import chain

>>> doc = BS('''<DOC>
<DOCNUM> NUMBER </DOCNUM>
<DOCTYPE> TYPE </DOCTYPE>
<HEADER>
&SOMETHING
</HEADER>
<BODY>
<HEADLINE>
SOME TEXT
</HEADLINE>
TEXT
TEXT 
TEXT 
<TEXT>
<P>

INPUT TEXT1
</P>
<P>
INPUT TEXT2
</P>
.
.
.
</TEXT>
</BODY>
</DOC>''')

>>> list(chain(*[list(p.stripped_strings) for p in doc.find_all('p')]))
[u'INPUT TEXT1', u'INPUT TEXT2'] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T01:27:40.503

您可以使用`re`导入正则表达式函数的模块：

```
import re
strr="<DOC> <DOCNUM> NUMBER </DOCNUM> <DOCTYPE> TYPE </DOCTYPE> <HEADER> &SOMETHING </HEADER> <BODY> <HEADLINE> SOME TEXT </HEADLINE> TEXT TEXT  TEXT  <TEXT> <P> INPUT TEXT1 </P> <P> INPUT TEXT2 </P> . . . </TEXT> </BODY> </DOC>"

arr = re.findall(r'<P>.*?</P>', strr)
print arr 
```

如果您没有嵌套`<P>`标签，这将起作用（但是，任何其他标签都可以在`<P>`标签中）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T01:37:19.040

您可以使用选项`recover=True`忽略`&`：`<HEADER>`

```
from lxml import etree

doc = etree.parse(xmlish_file, parser=etree.XMLParser(recover=True))
print([p.text for p in doc.iter('P')])
# -> ['\nINPUT TEXT1\n', '\nINPUT TEXT2\n'] 
```

或者您可以将其解析为 html。如果你对里面的所有文字感兴趣`<p>`；你可以使用`.text_content()`而不是`.text`：

```
from lxml import html

doc = html.parse(xmlish_file)
print([p.text_content() for p in doc.iter('p')])
# -> ['\nINPUT TEXT1\n', '\nINPUT TEXT2\n'] 
```

# c - 在 C 中，如何附加到文件行而不是文件末尾？

> ID：15605992
> 
> 赞同：-1
> 
> 时间：2013-03-25T00:44:13.830
> 
> 标签：c, io, printf

我将用户名和推文存储在以下格式的文件中：

用户名1:message1:message2:...:messageN

用户名2:message1:message2:...:messageN

...

用户名N:message1:message2:...:messageN

如果文件中有一行用户名 == 用户名并附加了新消息，我想将 :newMessage 附加到上述格式的行中。

我如何用 C 来做到这一点（如果重要的话，用 cygwin）？这是我写的代码块，我遇到了麻烦。

```
 while(fgets(line, MAXBUFF, fp) != NULL){  // get each line of file
             if (strncmp(line, tweetUsr, strlen(tweetUsr)) == 0){
                 usrFound = 1;
                 fprintf(filePointer, ":");
                 fprintf(filePointer, tweet);
                 break;
             }

             memset(&line[0], 0, sizeof(line));  //reset line array
         } 
```

我期望发生的事情是将消息附加到行尾，因为 filePointer 应该指向当前行的末尾，但实际发生的是消息被附加到文件的末尾。

我在 fopen 中使用 r+ 模式尝试了这个。为了能够追加到当前行而不是文件末尾，我必须做什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-25T00:47:52.190

您不能在文件中间*插入*数据。如果您尝试写入，您将写入已经存在的数据。

如果你想这样做，你需要：

*   `fseek`到你想写信的位置
*   `fread`从该点到文件末尾到缓冲区
*   `fwrite`你想插入什么
*   `fwrite`你读出的缓冲区

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-25T00:59:51.163

Jonathon Reinhart 回答的另一种选择是：

*   逐行读取实际文件
*   在添加某些用户的新消息时写入临时文件
*   完成后（成功完成）删除原始文件并将临时文件重命名/移动到原始文件。

如果您一次添加多个用户的消息，这种方法将带来更高的性能（在每个用户都有一条新消息的最坏情况下）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T02:55:08.637

您需要的是一种比顺序文件更灵活的结构。使用某种形式的数据库，并将消息附加到用户的消息列表中。

# c++ - CMFCMenuButton 带有以编程方式构建的菜单？

> ID：15605993
> 
> 赞同：1
> 
> 时间：2013-03-25T00:44:16.460
> 
> 标签：c++, menu, mfc, cmfcmenubutton

我是`CMFCMenuButton`控件的新手；这是我的代码`OnInitDialog()`：

```
// Load application list into menu button
m_ApplicationMenu = CreateMenu();   
m_MenuInfoSize = 2;
m_MenuInfo = new MENUITEMINFO[m_MenuInfoSize];
memset(m_MenuInfo, 0, sizeof(MENUITEMINFO) * m_MenuInfoSize);
UINT menuIndex = 0;
BOOL b; 
// 1st menu item
memset(m_MenuInfo + menuIndex, 0, sizeof(MENUITEMINFO));
m_MenuInfo[menuIndex].cbSize = sizeof(MENUITEMINFO);
m_MenuInfo[menuIndex].fMask = MIIM_ID | MIIM_STRING | MIIM_DATA;
m_MenuInfo[menuIndex].wID = menuIndex;
m_MenuInfo[menuIndex].dwTypeData = new WCHAR[10]; 
swprintf_s(m_MenuInfo[menuIndex].dwTypeData, 10, L"%s", L"A1");
m_MenuInfo[menuIndex].cch = wcslen(m_MenuInfo[menuIndex].dwTypeData) + 1;
b = InsertMenuItem(m_ApplicationMenu, menuIndex, TRUE, &(m_MenuInfo[menuIndex]));
menuIndex++;
// 2nd menu item
memset(&m_MenuInfo[menuIndex], 0, sizeof(MENUITEMINFO));
m_MenuInfo[menuIndex].cbSize = sizeof(MENUITEMINFO);
m_MenuInfo[menuIndex].fMask = MIIM_ID | MIIM_STRING | MIIM_DATA;
m_MenuInfo[menuIndex].wID = menuIndex;
m_MenuInfo[menuIndex].dwTypeData = new WCHAR[10]; 
swprintf_s(m_MenuInfo[menuIndex].dwTypeData, 10, L"%s", L"B2");
m_MenuInfo[menuIndex].cch = wcslen(m_MenuInfo[menuIndex].dwTypeData) + 1;
b = InsertMenuItem(m_ApplicationMenu, menuIndex, TRUE,  &(m_MenuInfo[menuIndex]));
menuIndex++;
// Attach menu to CMFCMenuButton
m_ApplicationList.m_bOSMenu = TRUE;
m_ApplicationList.m_bRightArrow = FALSE;
m_ApplicationList.m_bStayPressed = TRUE;
m_ApplicationList.m_bDefaultClick = FALSE;
m_ApplicationList.m_hMenu = m_ApplicationMenu;
    // Testing the constructed menu with the dialog's menu bar
::SetMenu(this->m_hWnd, m_ApplicationMenu); 
```

当我运行该应用程序时，`CMFCMenuButton`单击它时会显示一个下拉菜单......但这两个项目是空的，没有文本也没有图像。

我添加了最后一行来测试我构建的菜单；并且这两个项目正确显示在菜单栏中。

我还尝试使用从资源编辑器创建的菜单。它在菜单栏中显示得很好，但在 中`CMFCMenuButton`，又出现了空白。

我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T09:01:40.827

尝试

```
m_ApplicationMenu = CreatePopupMenu(); 
```

另外，如果你想在点击事件中获得of ，你最好使用`1`作为第一个。因为：`menuIndex``m_nMenuResult``CMFCMenuButton`

> `CMFCMenuButton::m_nMenuResult`
> 
> 一个整数，指示用户从弹出菜单中选择的项目。
> 
> 如果用户取消菜单而未进行选择或发生错误，则此成员变量的值为零。

# android - 我读过，但我不明白如何在 Android 中处理不同的分辨率

> ID：15605995
> 
> 赞同：0
> 
> 时间：2013-03-25T00:44:37.663
> 
> 标签：android, layout, drawable, resolution, hdpi

我正在设计一个横向的应用程序。我使用我的 Galaxy S2 模拟器。在 Photoshop 中设计 使用 800x480 分辨率。

在 Eclipse 之后，我只使用目录“drawable”和“layout”。

我使用转换器 dp px（例如：[dp px 转换器](http://labs.rampinteractive.co.uk/android_dp_px_calculator/)）。

例如，如果**上面的图像是 800x398px**。我在**"layout/activity.xml" 中声明 width: 533.33dp, height: 260.00dp 和 scaleType = "fitXY"**。

在网络转换器中，我使用选项@高密度（240），HDPI

通常在其他应用程序中它运行良好。我只是使用了“drawable-ldpi”、“drawable-mdpi”、“drawable-hdpi”……作为图标。

如果您查看随附的屏幕截图，Galaxy S2 的设计非常完美，但在 Galaxy S3 中，较高的图像不足，其他按钮位置不佳且大小不一。

我该如何解决（不仅适用于 Galaxy S3，还适用于其他分辨率？

目录布局或可绘制的名称是什么？布局中输入了哪些值？

**我读到：+ [Android 多屏](http://developer.android.com/guide/practices/screens_support.html) +[应用程序骨架支持多屏](https://stackoverflow.com/questions/12242111/application-skeleton-to-support-multiple-screen/12258061#12258061) +[设备 720x1280 的布局文件夹名称，如三星 Galaxy s3](https://stackoverflow.com/questions/12968577/layout-folder-name-for-devices-720x1280-like-samsung-galaxy-s3)**

但是尽管尝试在目录和 dp 值中使用不同的名称，但我没有找到解决方案，也没有理解。

**谁能帮我理解它并让它发挥作用？**

谢谢..

Galaxy S2： ![Galaxy S2](../Images/cd70165f95190180b8e9512366a31c2c.png)

银河 S3（失败）： ![在此处输入图像描述](../Images/d0cfc3fdf63ac6499a3ef527c1b874ff.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T00:55:54.287

1.  对于图像，您可以使用九个补丁 - [http://android-ui-utils.googlecode.com/hg/asset-studio/dist/nine-patches.html](http://android-ui-utils.googlecode.com/hg/asset-studio/dist/nine-patches.html)
2.  对于布局，您可以使用 % 值，然后您只需为每个设备创建一个布局。

如何：

*   您需要对所有内容使用线性布局。
*   在线性布局中将权重总和设置为：1。
*   例如拖放 2 按钮。
*   为两个按钮的宽度设置 0dp。
*   内部重量您可以为每个设置 0.60 和 0.40。（线性水平布局）