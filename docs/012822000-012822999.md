# StackOverflow 问答 12822000-12822999

# celery - 用于 map/reduce 工作流程的 Celery Group 任务

> ID：12822005
> 
> 赞同：13
> 
> 时间：2012-10-10T14:37:08.177
> 
> 标签：celery

我可以使用 Celery [Group](http://docs.celeryproject.org/en/latest/userguide/canvas.html#groups)原语作为 map/reduce 工作流程中的总括任务吗？

或者更具体地说：组中的子任务可以在多个*服务器*上的多个工作人员上运行吗？

从文档：

```
However, if you call apply_async on the group it will send a special 
grouping task, so that the action of calling the tasks happens in a worker 
instead of the current process 
```

这似乎意味着任务都发送给一名工人......

在 3.0 之前（并且仍然），可以在一个任务集中启动子任务，该任务集中将在多个服务器上运行。问题是确定是否所有任务都已完成执行。这通常是通过轮询所有不是很优雅的子任务来完成的。我想知道是否可以使用 Group 原语来缓解这个问题。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-10-15T14:13:23.827

我发现可以使用 Chords 来解决类似地图减少的问题。

```
@celery.task(name='ic.mapper')
def mapper():
    #split your problem in embarrassingly parallel maps 
    maps = [map.s(), map.s(), map.s(), map.s(), map.s(), map.s(), map.s(), map.s()]
    #and put them in a chord that executes them in parallel and after they finish calls 'reduce'
    mapreduce = celery.chord(maps)(reduce.s())    
    return "{0} mapper ran on {1}".format(celery.current_task.request.id, celery.current_task.request.hostname)

@celery.task(name='ic.map')
def map():
    #do something useful here
    import time
    time.sleep(10.0)
    return "{0} map ran on {1}".format(celery.current_task.request.id, celery.current_task.request.hostname)

@celery.task(name='ic.reduce')
def reduce(results):
    #put the maps together and do something with the results
    return "{0} reduce ran on {1}".format(celery.current_task.request.id, celery.current_task.request.hostname) 
```

当映射器在三个工作人员/服务器的集群上执行时，它首先执行映射器，拆分您的问题并创建再次提交给代理的新子任务。这些并行运行，因为队列被所有代理使用。还创建了一个和弦任务，轮询所有地图以查看它们是否已完成。完成后，将执行 reduce 任务，您可以将结果重新组合在一起。

总之：是的，这是可能的。感谢蔬菜大佬！

# objective-c - NSUrlConnection 的 iOS 错误 URL

> ID：12822006
> 
> 赞同：0
> 
> 时间：2012-10-10T14:37:09.467
> 
> 标签：objective-c, ios, nsurlconnection, nsurl, nsurlrequest

我在名为 myUrl 的 NSString 中有一个 url。当我 NSLog myUrl 我看到以下内容：

```
http://dl.dropbox.com/u/57665723%2FChocolatesRUs%2FJellies%2FUn-sugared%2Fgen%20no%20sugar.pdf 
```

然后我尝试使用此 url 进行连接，如下所示：

```
NSURL* url = [ NSURL URLWithString:nextFileURL ];
NSMutableURLRequest* request =  [ [ NSMutableURLRequest alloc ] initWithURL: url ];
NSURLConnection* conn = [ [ NSURLConnection alloc ] initWithRequest: request delegate: self ]; 
```

我收到以下错误：

```
errorcode=-1000, error=Error Domain=NSURLErrorDomain Code=-1000 "bad URL" UserInfo=0x27e540 {NSUnderlyingError=0x26d800 "bad URL", NSLocalizedDescription=bad URL} 
```

我试过使用

```
NSString* myUrl = [myUrl stringByReplacingPercentEscapesUsingEncoding:NSUTF8StringEncoding]; 
```

但这也不起作用。

任何人都可以看到问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T14:42:44.490

`stringByAddingPercentEscapesUsingEncoding`也许您可以使用而不是转义您的网址`stringByReplacingPercentEscapesUsingEncoding`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-15T05:39:57.050

stringByAddingPercentEscapesUsingEncoding 是删除空格并添加百分比

```
NSString *urlString =[NSString stringWithFormat:@"&street=%@&street2=&city=%@&state=%@&
zipcode=%@&candidates=10", address.address2,address.city, address.state, address.zip5];
NSLog(@"BAD URL - %@",urlString ); // there is space in url

NSString *encodedUrl = [urlString stringByAddingPercentEscapesUsingEncoding: NSUTF8StringEncoding];
NSLog(@" CORRECT URL - %@", encodedUrl); // url encode that space by %20

NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:[NSURL RLWithString:encodedUrl]]; 
```

# c# - 如何模拟第 3 方 Web 服务 LINQ 数据提供者？

> ID：12822013
> 
> 赞同：3
> 
> 时间：2012-10-10T14:37:28.617
> 
> 标签：c#, linq, mocking

模拟 LINQ Web 服务数据提供者（由第三方制作，对我来说实际上是一个黑匣子）涉及什么？这是该黑匣子的典型用法：（已修改以保护无辜者，也称为 NDA）

```
var conn = new RemoteServer (username,password);
var result = from row in conn.GetSomeData()
    where row.this == "Hello" && row.that != "World"
    select new { row.this, row.that, row.theOther }; 
```

我目前知道`result`的是`IEnumerable<T>`。另一个使用示例：

```
string something="xxx";
var result = from row in conn.SubscribeAsync()
    where row.this == something
    select new MyObject(something) { row.that, row.theOther }; 
```

（这将继续推送数据，可能每秒推送几个项目，我会想要模拟仔细计时的序列。）

我想我真正的问题是，它会像这样简单吗：

```
 class MockRemoteServer
 {
     IEnumerable GetSomeData()
     {
          return new[]
          {
              new {this="1",that="2",theOther="special"},
              new {this="hello",that="world",theOther="something"}
          }
     }
 } 
```

还是我需要自己实现一个完整的 LINQ 数据提供程序？如果是这样，有什么书或文章推荐吗？（我的 LINQ 知识目前基于对 Jon Skeet 的 C# In Depth 的全面阅读，仅此而已……）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T15:10:06.113

A`List<T>`通常就足够了（因为它实现了 IEnumerable）。但是，如果您想知道查询的实际性能，没有什么比使用实际的 RemoteServer 更好的了。

# visual-studio-2010 - 循环问题。质数列表

> ID：12822015
> 
> 赞同：0
> 
> 时间：2012-10-10T14:37:35.503
> 
> 标签：visual-studio-2010, variables, loops

我知道一切都非常错误。我想要做的是创建一个素数列表，包括给定的数字。请尽量简单解释。我是新手。非常感谢您的帮助！

```
Option Explicit On
Option Strict On

'Author: Murray Spears
'Date: October 5th 2012

'Creating a Program that will ask the user for a number. 
'The program will then generate prime numbers up to and including the number entered by the user.

Imports System

Module PrimeNumbers

    Sub Main()

        Dim Number As Integer
        Dim One As Integer = 1
        Dim Prime As Boolean

        'Ask the user for their chosen number.
        Console.Writeline("Choose a number:")
        Number = Convert.ToInt32(Console.Readline())
        ' We have to let the program know that we only want numbers that are divisible by one and themselves, up to the entered value.

        Do While Number <= Number
        Loop

        Do While Number / One = Number
        Loop

        Do While Number / Prime = Number
        Loop

        Console.Out.Writeline("Here are the prime numbers:")
        Console.Out.Writeline(Number)

    End Sub

End Module 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T14:43:50.900

这个

```
Do While Number <= Number
Loop 
```

是一个无限循环，因为`Number <= Number`它*总是*正确的。

一般提示：停止编码。拿一张纸，试着写下你想使用的*算法（用简单的英语），即你希望计算机采取的步骤。*这样做，直到你确信这会给你想要的结果。

一旦你制定了你的算法，试着在代码中实现它。如果您对此有疑问，请返回此处，发布您的算法并解释您在实现它时遇到的问题。

# codeigniter - CI 文件上传，错误显示-if/else 导致图像重复

> ID：12822018
> 
> 赞同：1
> 
> 时间：2012-10-10T14:37:41.103
> 
> 标签：codeigniter, image-processing, if-statement

我以某种方式设法上传并调整了多张图片的大小，一切都很好。
然后，如果没有选择要上传的图像，我想显示错误。
我放了一个 if 语句来加载错误，但这会造成严重破坏。

每次我选择图像并上传时，最后一张都会被复制，没有调整大小。
同样，如果我删除 if else，那很好。

感谢您的任何帮助和您的时间。

```
function do_upload(){

    $path = array();
    $count = count($_FILES['userfile']['size']);

    foreach($_FILES as $key=>$value){
        for($n=0; $n<=$count-1; $n++) {
            $_FILES['userfile']['name']=$value['name'][$n];
            $_FILES['userfile']['type']    = $value['type'][$n];
            $_FILES['userfile']['tmp_name'] = $value['tmp_name'][$n];
            $_FILES['userfile']['error']       = $value['error'][$n];
            $_FILES['userfile']['size']    = $value['size'][$n];   

                $config['upload_path'] = './images';
                $config['allowed_types'] = 'gif|jpg|png|jpeg';

            $this->load->library('upload', $config);
            $this->upload->do_upload();
            $data = $this->upload->data();
            $path[] = $data['full_path'];
        }   

        if(!$this->upload->do_upload()){
            $error = array('error' => $this->upload->display_errors());
            $this->load->view('view_dashboard_error_car', $error);
        }
        else{
            $this->load->library('image_lib');   

            foreach($path as $p=>$ath){
                $config1 = array(
                'source_image'      => $ath,
                'new_image'         => './images',
                'maintain_ration'   => true,
                'overwrite'         => true, 
                'width'             => 600,
                'height'            => 400
                );

                $this->image_lib->initialize($config1);
                $this->image_lib->resize();
                $this->image_lib->clear();
            }       

            $this->load->view('view_dashboard_success_car');

        }

    }   

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T14:55:56.293

你跑`$this->upload->do_upload()`了两次，因为你`foreach()`跑了，然后你的`if/else`语句跑了。

您需要将其`if/else`放入`foreach`循环中。您应该注意不要只是复制/粘贴它，而是要确保`$this->upload->do_upload()`每个图像只运行一次。

# jquery - 单击向上或向下按钮时选择的jQuery SELECT输入更改选项

> ID：12822022
> 
> 赞同：0
> 
> 时间：2012-10-10T14:37:46.097
> 
> 标签：jquery, html, select, spinner, option

```
<select id="edit-attributes-1">
      <option value="44" selected="selected">0</option>
      <option value="35">1</option>
      <option value="36">2</option>
      <option value="37">3</option>
</select>
<select id="edit-attributes-2">
      <option value="44" selected="selected">0</option>
      <option value="35">1</option>
      <option value="36">2</option>
      <option value="37">3</option>
</select>
<select id="edit-attributes-3">
      <option value="44" selected="selected">0</option>
      <option value="35">1</option>
      <option value="36">2</option>
      <option value="37">3</option>
</select>
<select id="edit-attributes-4">
      <option value="44" selected="selected">0</option>
      <option value="35">1</option>
      <option value="36">2</option>
      <option value="37">3</option>

</select>
    <select id="edit-attributes-9" name="attributes[9]" class="form-select">
      <option value="44" selected="selected">0</option>
      <option value="35">1</option>
      <option value="36">2</option>
      <option value="37">3</option>
    </select>

       <select id="edit-attributes-11" name="attributes[11]" class="form-select">
      <option value="45" selected="selected">0</option>
      <option value="39">1</option>
      <option value="41">2</option>

    </select> 
```

​</p>

```
//This Code adds <span>+</span> and <span>-</span> with their attributes
$('select[id^="edit-attributes-"][id!="edit-attributes-12"]').after(function() {
    var count = $(this).find('option').length;
    return '<span class="step stepup step-' + this.id + '" id="step-up-' + this.id.substring(16) + '">+</span><span class="step stepdown step-' + this.id + '" id="step-down-' + this.id.substring(16) + '">-</span>';

});

//This code detects reacts when + or - is clicked.
$('span[id^="step-"]').click(function() {
    //Tokenized class name into array <span class="step stepup step-edit-attributes-1" id="step-up-1">+</span> 
    var classList = $(this).attr('class').split(/\s+/); 
    //Use for Option Index = 0 ofcourse
    var min = 0;
    //Use for Option Index Max = number of options in particular Select
    var max = $("#" + classList[2].substring(5) + " option").length;
    //Index of selected Option
    var selected = $("#" + classList[2].substring(5) + " option:selected").index();
    //Value of Selected Option
    var value = $("#" + classList[2].substring(5) + " option:selected").val();

    //since id is "step-up-ID" just want to get the UP or DOWN
    var op = this.id.split("-");

    if (op[1] == "up") { // second token of op = up or down

        if (value < max) {
            value++;
            alert(selected + ":" + value + " : " + op[1]);            
            //remove any selected option ??????
//MY PROBLEM IS HERE WHEN I TRY TO REMOVE EXISTING SELECTED AND SELECT A NEW OPTION AFTER THE SELECTED ONE**

            $("#" + classList[2].substring(5) + " option:selected").removeAttr("selected");
            //assign new selected option ???????
            $("#" + classList[2].substring(5) + " option").selectedIndex=value;
        }
    }
    if (op[1] == "down") {
        if (value > min) {            
            value--;
            alert(selected + ":" + value + " : " + op[1]);
//MY PROBLEM IS HERE WHEN I TRY TO REMOVE EXISTING SELECTED AND SELECT A NEW OPTION BEFORE THE SELECTED ONE**
            $("#" + classList[2].substring(5) + " option:selected").removeAttr("selected");
            $("#" + classList[2].substring(5) + " option").selectedIndex=value;
        }

    }
});​ 
```

我的目标在这里，当我单击 ( `-`) 时，它将更改上面选择的 1 步，然后 ( `+`) 选择下面一站的新选项。有人可以帮忙并优化此代码。我已经尝试在这上面游泳好几个小时了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T14:56:44.493

您正在动态生成 HTML `+`，`-`对吗？那么你应该使用`on`而不是`click`：

[http://api.jquery.com/on/](http://api.jquery.com/on/)

* * *

`selects`有共同的父母吗`div`？

如果是这样，请将您的代码更改为：

```
$("#parentDiv").on("click", 'span[id^="step-"]', function() {....}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T15:09:51.700

尝试将事件委托给跨度的 prentStatic 容器..

```
$(document).on('click','span[id^="step-"]',function() { 
```

如果您有任何包含此文档以外的静态容器，那么您可以使用该容器..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T15:26:10.490

这是脚本的工作版本+优化。

```
//This code detects reacts when + or - is clicked.
$('span[id^="step-"]').click(function() {
    //Tokenized class name into array <span class="step stepup step-edit-attributes-1" id="step-up-1">+</span> 
    var classList = $(this).attr('class').split(/\s+/),
        item      = $('#'+classList[2].substring(5)),
        selected  = item[0].selectedIndex;

    //since id is "step-up-ID" just want to get the UP or DOWN
    var op = this.id.split("-");

    var index = (op[1] == 'up' ? 1 : -1) + selected;
    if (item.find('option')[index]) {
        item[0].selectedIndex = index;
    }    
});​ 
```

[http://jsfiddle.net/rezigned/qjVHM/15/](http://jsfiddle.net/rezigned/qjVHM/15/)

# objective-c - 将javascript变量值返回到目标c

> ID：12822024
> 
> 赞同：1
> 
> 时间：2012-10-10T14:37:57.890
> 
> 标签：objective-c, ios, xcode

我已经看到了一些如何从目标 c 读取 javascript 的示例。我试图用它来将动态值从网页返回到目标 c 中的字符串。

```
[exerciseWebViewA loadHTMLString:@"<html><head><title>Untitled Page</title></head><body><div style=\"border:solid 1px red; width:300px;\"><script type=\"text/javascript\"> var myVar = \"one two three\";</script></div></body></html>" baseURL:nil];

NSString *example = [exerciseWebViewA stringByEvaluatingJavaScriptFromString:@"(function() { return myVar; })();"];

NSLog(@"script value is: %@", example); 
```

如果我将 'example' 修改为 @"(function() { return 'hello'; })();" 它确实将“脚本值是你好”写入日志。我以正确的方式解决这个问题吗？

# swing - 如何在jFrame上创建带有关闭按钮的自定义标题栏？

> ID：12822037
> 
> 赞同：2
> 
> 时间：2012-10-10T14:38:40.673
> 
> 标签：swing, jframe

我想为我的`JFrame`. 我可以删除默认标题栏

```
JFrame.setUndecorated(true) 
```

现在我需要`JFrame`用关闭按钮为我创建一个自定义的标题栏吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T14:54:53.530

如果没有这样做过，我想我会这样：

1.  确实设置`JFrame`为未装饰
2.  扩展`JRootPane`以添加附加字段`titleBar`
3.  创建一个`TitleBar`包含标题、关闭按钮等的组件...
4.  设置一个新`LayoutManager`的`JRootPane`（看看`JRootPane.RootLayout`）并以适当的顺序布局组件（首先是标题栏，然后是菜单栏下方，然后是内容窗格下方）
5.  `RootPane`在您的上设置一个扩展的实例`JFrame`

也许有更好的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T14:46:46.433

我不太确定您想如何自定义关闭按钮，但也许这可以为您指明正确的方向：[如何自定义 JFrame 上的标题栏？](https://stackoverflow.com/questions/2781987/how-can-i-customize-the-title-bar-on-jframe)

编辑：这是一个关于自定义 GUI 的论坛的更新工作链接，一位用户发布了关于他创建简单 GUI 的代码：[这里](http://www.coderanch.com/t/344113/GUI/java/There-should-no-close-minimize)

看起来您可以修改他的 removeComponents 方法并创建一个 addComponents 方法来满足您的需求。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-18T17:36:30.070

根据上述链接的代码：（为 Java 8 编辑）

```
import javax.swing.*;
import java.awt.*;
import java.awt.event.*;
import java.util.logging.Level;
import java.util.logging.Logger;

class Testing {
  public void buildGUI() throws UnsupportedLookAndFeelException {
    JFrame.setDefaultLookAndFeelDecorated(true);
    JFrame f = new JFrame();
    f.setResizable(false);
    removeMinMaxClose(f);
    JPanel p = new JPanel(new GridBagLayout());
    JButton btn = new JButton("Exit");
    p.add(btn, new GridBagConstraints());
    f.getContentPane().add(p);
    f.setSize(400, 300);
    f.setLocationRelativeTo(null);
    f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    f.setVisible(true);
    btn.addActionListener((ActionEvent ae) -> {
      System.exit(0);
    });
  }

  public void removeMinMaxClose(Component comp) {
    if (comp instanceof AbstractButton) {
      comp.getParent().remove(comp);
    }
    if (comp instanceof Container) {
      Component[] comps = ((Container) comp).getComponents();
      for (int x = 0, y = comps.length; x < y; x++) {
        removeMinMaxClose(comps[x]);
      }
    }
  }

  public static void main(String[] args) {
    SwingUtilities.invokeLater(() -> {
      try {
        new Testing().buildGUI();
      } catch (UnsupportedLookAndFeelException ex) {
        Logger.getLogger(Testing.class.getName()).log(Level.SEVERE, null, ex);
      }
    });
  }
} 
```

可能工作正常，但如果用户还想设置 L&F，如 nimbus

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-03-07T14:10:57.937

实际上有三种方法可以解决这个问题：

1.  将框架设置为未装饰并实现**所有内容**，包括控制按钮、捕捉、调整大小和移动。
2.  获取 JFrame 的根窗格并直接编辑该窗格。您将需要添加控制按钮和捕捉行为。
3.  在创建 JFrame 时使用 JNI 获取窗口句柄以控制其属性。这在这篇[文章](https://medium.com/swlh/customizing-the-title-bar-of-an-application-window-50a4ac3ed27e)中有更好的解释。我还构建了一个小[项目](https://github.com/FredPerr/CustomJavaTitledBar)，它基本上是 JFrame 类的扩展，它处理需要处理的所有内容......最后一种方法不会破坏像捕捉和调整大小这样的原生功能。但是您确实需要再次创建控制按钮，因为如果您想从头开始构建它，您将拥有一个新的标题栏。

# c++ - 使用 Objective C 类实例调用 C 函数

> ID：12822039
> 
> 赞同：0
> 
> 时间：2012-10-10T14:38:53.197
> 
> 标签：c++, objective-c, c, static-libraries

我有一个带有 C 类型方法的 Objective C 类。我必须用我的代码链接一个 C++ 库和一个 C 库。如果我从任何 Objective C 函数调用库，我会收到链接器错误，即找不到符号。

参考[在目标 c 中使用 c++ 静态库](https://stackoverflow.com/questions/12816983/using-c-static-library-in-objective-c/12817609)

但我需要以某种方式调用该 C 函数。有没有其他选择？如果只有 C 库，我可以从目标 C 方法进行库调用，但 C++ 库不允许我这样做。我不知道为什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T14:49:37.913

根据我的经验，如果程序使用任何 C++ 类，您应该使用 C++ 编译器进行链接，以便链接正确的 C++ 库。仅使用 C 和 C++，这相当简单。

将 Objective C 加入其中，您可能会遇到一些困难——您的问题意味着您遇到了一些困难。这个我没试过，但是...

您需要确保链接了正确的 C++ 库、链接了正确的 Objective C 库以及您需要的任何杂散 C 库。如果您可以在构建 Objective C 程序时确定链接的库，那么只需与 C++ 编译器链接并列出您需要的 Objective C 和纯 C 库就足够安全了。手指交叉，仅此而已。如果对 Objective C 有复杂的设置要求（以及对 C++ 的复杂要求），那么您可能仍然会遇到困难。但总的来说，你可能会没事。

如果有明确经验的人说不同的话，请使用他们的解决方案（如果它适合您）。但我能提供的最好的方法是“将程序与 C++ 编译器链接”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T14:42:40.167

我不太确定是什么代码导致了您的问题，但是如果您想从不同的 C 文件调用在 C++ 文件中定义的 C 样式函数，请务必标记该函数`extern "C"`以避免名称混淆。

# internet-explorer - SWF - 参数不工作 IE

> ID：12822040
> 
> 赞同：0
> 
> 时间：2012-10-10T14:38:57.347
> 
> 标签：internet-explorer, flash, params

当我将 SWF 对象放在页面上时，我一直在尝试将参数传递给 IE，但似乎没有任何效果。

这是 IE 7,8 & 9。不会触发缩放、质量和 wmode 变量。

这是我的代码。

```
<object width="100%" height="100%" class="view" id="one-one" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" style="width: 1595px; height: 628px;">
<param name="movie" value="flash/one-one.swf" />
<param name="scale" value="ExactFit" />
<param name="wmode" value="opaque" />
<param name="quality" value="low" />
</object> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T15:04:38.850

这可能是您缺少对象的“**代码库**”属性吗？请参阅[http://www.w3schools.com/html/html_object.asp](http://www.w3schools.com/html/html_object.asp)部分“使用 Flash 播放 SWF 视频”，并尝试类似

```
<object width="1595px" height="628px"
classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000"
codebase="http://fpdownload.macromedia.com/
pub/shockwave/cabs/flash/swflash.cab#version=8,0,0,0">
<param name="SRC" value="flash/one-one.swf"></param>
<embed src="bookmark.swf" width="1595px" height="628px">
</embed>
</object> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-02T09:44:20.897

这是我在 IE、Firefox、Chrome 中工作的代码。我不是说这是上述问题的答案，但这是有类似问题的人的参考。

```
<OBJECT classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" 
codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,0,0" 
id="Yourfilename" ALIGN=""  style="width:1170px;height:127px">
  <PARAM NAME=movie VALUE="/assets/env1.swf">
  <PARAM NAME=quality VALUE=high>
  <PARAM NAME=bgcolor VALUE=#333399>
  <EMBED src="/assets/env1.swf" quality=high bgcolor=#333399 NAME="Yourfilename" style="width:1170px;height:127px" ALIGN="" TYPE="application/x-shockwave-flash" PLUGINSPAGE="http://www.macromedia.com/go/getflashplayer"></EMBED>
</OBJECT> 
```

我的 flash 开始在 IE-8 中使用以下行

```
<PARAM NAME=movie VALUE="/assets/env1.swf"> 
```

我通过在对象中指定样式属性来调整 IE-8 中 Flash 的大小，如下所示。

```
 <OBJECT classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" 
    codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,0,0" 
    id="Yourfilename" style="width:1170px;height:127px"> 
```

# php - 中文 PHP/MySQL/JSON/Android

> ID：12822041
> 
> 赞同：0
> 
> 时间：2012-10-10T14:38:57.347
> 
> 标签：php, android, mysql, json, cjk

我目前正在开发一个 Android 应用程序，该应用程序具有附加到内容的基于 Web 的管理系统。我想做的是在 Android 应用程序中显示内容，该应用程序通过 JSON 从 Web 检索信息。应用程序需要支持中文和英文。稍后，我想提供德语、法语、荷兰语和西班牙语。

我的问题来自中文。我有一个用英语完美运行的 PHP 和 MySQL 管理系统。一旦我在系统中添加中文字符，PHPMyAdmin 不会以我输入的相同方式显示字符。编码错误。从那时起，在 Android 中通过 JSON 检索所有内容也不会显示正确的字符。

这里有没有人可以指出我正确的方向？除了中文，一切正常。我没有中文编码的经验并搜索了互联网。我发现了一些我为 MySQL 尝试的东西，GB 编码数据库中的中文项目，但这似乎不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T09:41:30.990

我将我的 PHP 页面更改为 UTF 并提供了数据库记录`uft8_unicode_ci`。当我查看 PHPMyAdmin 时，记录显示和以前一样奇怪的字符，PHP 后端的一切看起来都很完美。当我查看 JSON 文件时，我也看到了奇怪的字符，但与 PHPMyAdmin 显示的字符不同。JSON (PHP) 保存为 UTF-8。

```
function loadInfo($id){
  if(is_numeric($id)){
    $locatieArray = array();
    $q = 'SELECT * FROM locaties WHERE id='.$id.'';
    $r = mysql_query($q);
    if($l = mysql_fetch_array($r)){
      $loc = array(
        'id' => utf8_encode($l['id']),
        'nameEN' => utf8_encode($l['nameEN']),
        'nameCH' => utf8_encode($l['nameCH']),
        'descEN' => utf8_encode($l['descEN']),
        'descCH' => utf8_encode($l['descCH']),
        'addEN' => utf8_encode($l['addEN']),
        'addCH' => utf8_encode($l['addCH']),
        'img' => utf8_encode($l['img']),
        'rate' => utf8_encode($l['rate']),
        'tel' => utf8_encode($l['tel']),
        'url' => utf8_encode($l['url'])
      );
    }
    $locatieArray[] = $loc;
  }
  // format array for json.
  $returnArray['locatie'] = $locatieArray;
  $json = json_encode($returnArray);
  return $json;
} 
```

我生成 JSON 的方式是否有问题，或者我应该首先专注于使中文字符在 PHPMyAdmin 中工作？

# ios - 如何在 UIAutomation 中从句子中取出特定的单词？

> ID：12822042
> 
> 赞同：0
> 
> 时间：2012-10-10T14:39:02.607
> 
> 标签：ios, instruments, ios-ui-automation

如果我需要检查某个句子中是否存在某个特定单词，那么我应该在 javascript 中为 UIAutomation 使用什么语法/代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T10:32:53.733

使用函数 indexOf()：

在字符串中搜索“欢迎”：

```
 var str="Hello world, welcome to the universe.";
 var n=str.indexOf("welcome"); 
```

**n**的结果将是：

13

如果要搜索的值不存在，则此方法返回 -1。

# c# - C# MVC 无法让 ignoreRoute 工作（MiniProfiler 仍然显示它们？）

> ID：12822048
> 
> 赞同：0
> 
> 时间：2012-10-10T14:39:13.760
> 
> 标签：c#, asp.net-mvc, model-view-controller, mvc-mini-profiler

在我`Application_Start`的我调用了一个 RegisterRoutes 方法，我调用了以下方法：

```
// Do not process any static files
routes.IgnoreRoute(
  "{*staticfile}", new { staticfile = @".*\.(jpg|gif|jpeg|png|js|css|htm|html|htc)$" }
); 
```

此外，我配置了[MiniProfiler](http://miniprofiler.com/)，我运行如下：

```
 protected void Application_BeginRequest()
    {
        MiniProfiler.Start();

        var profiler = MiniProfiler.Current;
        using (profiler.Step("Application_BeginRequest"))
        {
        }
    } 
```

现在，当我启动我的网站时，我看到正在分析的图像：

![MiniProfiler 图像](../Images/139f61733c1e00c18bdef0ef4801d713.png)

对我来说，这似乎表明我的 IgnoreRoute 工作不正常，或者 Image 不应该达到 MiniProfiler 状态。我在这方面是不正确的，还是我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T14:41:24.213

如果您在集成模式下运行应用程序，所有请求都会通过托管处理程序并被 Application_BeginRequest 拦截，即使是静态资源的请求也是如此。您对 IgnoreRoute 调用所做的事情是将它们从路由引擎中排除，它们不会被解析为任何控制器操作。

# php - 如何在 symfony2 中路由？

> ID：12822055
> 
> 赞同：2
> 
> 时间：2012-10-10T14:39:44.147
> 
> 标签：php, symfony, routing

好吧，在我的`routing_dev.yml`

```
_welcome:
    pattern:  /
    defaults: { _controller: AcmeDemoBundle:Welcome:index }

homepage:
    pattern:   /
    defaults: { _controller: AcmeDemoBundle:Ideup:index }

aboutme:
    pattern:   /aboutme
    defaults: { _controller: AcmeDemoBundle:Ideup:about }

_ideup:
    resource: "@AcmeDemoBundle/Controller/IdeupController.php"
    type:     annotation
    prefix:   /ideup

_form:
    resource: "@AcmeDemoBundle/Controller/FormController.php"
    type:     annotation

_wdt:
    resource: "@WebProfilerBundle/Resources/config/routing/wdt.xml"
    prefix:   /_wdt

_profiler:
    resource: "@WebProfilerBundle/Resources/config/routing/profiler.xml"
    prefix:   /_profiler

_main:
    resource: routing.yml 
```

我试图有一个简单的形式：

```
<form action="{{ path('_form') }}" method="POST" id="contact_form"> 
```

但我不断收到以下异常：`"Route "_form" does not exist."`

我只是不知道还能去哪里寻找和做什么，有什么想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T14:42:26.643

```
_form:
  resource: "@AcmeDemoBundle/Controller/FormController.php"
  type:     annotation 
```

这只会从 FormController 加载带注释的路由。

例如：

```
/**
 * @Route("/my/route", name="my_route")
 */
public function myRouteAction() { ... } 
```

如果你想要一个`_form`路由，你应该从 FormController 加载所有带注释的路由或以其他方式定义它：

```
_form:
  pattern: /path/to/your/form
  defaults: { _controller: AcmeDemoBundle:Form:myFormAction } 
```

当然`myFormAction()`应该存在于`FormController`.

# xcode4 - 在项目模板文件 TemplateInfo.plist 中为每个文件设置编译器标志

> ID：12822062
> 
> 赞同：4
> 
> 时间：2012-10-10T14:39:58.413
> 
> 标签：xcode4, automatic-ref-counting, project-template, compiler-flags

我创建了一个项目模板文件 - TemplateInfo.plist，它是使用 ARC 定义的。我在模板中包含了一些不受 ARC 支持的外部文件。在一个常规项目中，我会在构建阶段手动设置这些文件的编译器标志-> 将源编译为 -fno-objc-arc 但我如何在模板中做到这一点？我没有找到任何相关的东西..有什么想法吗？

谢谢

# javascript - 通过 JS 插入时，带有 inline-blocks 和 text justify 的 DOM Equidistant div 将不起作用

> ID：12822068
> 
> 赞同：5
> 
> 时间：2012-10-10T14:40:03.963
> 
> 标签：javascript, dom, css, text-align

我一直在尝试实现 Chris Coyier 的 inline-block + text justify 解决方案，以在给定的包装器宽度中自动水平分布 div。[http://css-tricks.com/equidistant-objects-with-css/](http://css-tricks.com/equidistant-objects-with-css/)

当元素立即加载到 DOM 中时，这很有效，但由于某种原因，当通过 JS 以编程方式添加元素时失败。就好像浏览器只是忽略了 css 属性。

查看这个小提琴的一个非常基本的例子：http: [//jsfiddle.net/xmajox/NUJnZ/](http://jsfiddle.net/xmajox/NUJnZ/) 前两行是在 HTML 加载时添加的。单击按钮可通过 JS 在运行时添加更多内容。

最初我认为它可能与伪元素的使用有关：之后，所以我尝试了一个带有 DOM 节点的不同版本：http: [//jsfiddle.net/xmajox/wnPSA/](http://jsfiddle.net/xmajox/wnPSA/) 不幸的是它的反应方式完全相同。

有人知道为什么会这样吗？或者更好的是，如何修复/预防它？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-10T14:58:37.660

元素之间需要有某种形式的空格才能起作用，请参见：http: [//jsfiddle.net/NUJnZ/22/](http://jsfiddle.net/NUJnZ/22/)

请注意，在第三行中，DIV 之间没有空格。当 jQuery 追加新元素时，没有前导或尾随空格。

只需添加一个尾随空格，`.before(' ')`元素就会正确排列。（如果您使用`.after(' ')`最后一个元素的间距问题）

更新小提琴：http: [//jsfiddle.net/NUJnZ/24/](http://jsfiddle.net/NUJnZ/24/)

# r - 黄土预测新的 x 值

> ID：12822069
> 
> 赞同：13
> 
> 时间：2012-10-10T14:40:09.810
> 
> 标签：r, regression, smoothing, loess

我试图了解该`predict.loess`函数如何能够在原始数据中不存在的`y_hat`点处计算新的预测值 ( ) 。`x`例如（这是一个简单的例子，我意识到这种例子显然不需要黄土，但它说明了这一点）：

```
x <- 1:10
y <- x^2
mdl <- loess(y ~ x)
predict(mdl, 1.5)
[1] 2.25 
```

`loess`回归通过在每个处使用多项式来工作`x`，因此它`y_hat`在每个处创建一个预测值`y`。但是，由于没有存储系数，因此在这种情况下，“模型”只是用于预测每个 的详细信息`y_hat`，例如`span`or `degree`。当我这样做的时候`predict(mdl, 1.5)`，如何`predict`能够在这个新产品上产生价值`x`？它是否在两个最接近的现有`x`值及其相关值之间进行插值`y_hat`？如果是这样，它是如何做到这一点的背后的细节是什么？

我已经`cloess`在线阅读了文档，但无法找到它讨论这个的地方。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-10T15:10:51.933

> 但是，由于没有存储系数，因此这种情况下的“模型”只是用于预测每个 y_hat 的详细信息

也许您使用过`print(mdl)`命令或只是`mdl`查看模型`mdl`包含的内容，但事实并非如此。该模型非常复杂，并且存储了大量的参数。

要了解其中的内容，您可以使用`unlist(mdl)`并查看其中的参数大列表。

这是命令手册的一部分，描述了它的实际工作原理：

> 安装在本地完成。也就是说，对于点 x 处的拟合，使用 x 邻域中的点进行拟合，由它们与 x 的距离加权（在计算距离时忽略“参数”变量的差异）。邻域的大小由 α 控制（由 span 或 enp.target 设置）。对于 α < 1，邻域包括点的比例 α，并且这些点具有三次加权（与 (1 - (dist/maxdist)^3)^3 成比例）。对于 α > 1，使用所有点，“最大距离”假定为 α^(1/p) 乘以 p 个解释变量的实际最大距离。
> 
> 对于默认族，拟合是（加权）最小二乘法。对于family="symmetric"，使用Tukey 双权重的M 估计过程的几次迭代。请注意，由于初始值是最小二乘拟合，因此这不一定是非常耐久的拟合。

我相信它试图在每个点的附近拟合一个多项式模型（而不仅仅是整个集合的单个多项式）。但是邻域并不意味着只有一个点之前和一个点之后，如果我正在实现这样一个函数，我会在离点 x 最近的点上放一个很大的权重，对远端点放低权重，并尝试拟合一个多项式适合最高的总重量。

然后，如果应该预测高度的给定 x' 最接近点 x，我尝试使用拟合在点 x 的邻域上的多项式 - 比如说 P(x) - 并将其应用于 x' - 比如说 P(x ') - 这就是预测。

如果您正在寻找任何特别的东西，请告诉我。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-10T15:56:30.100

为了更好地了解黄土拟合中发生的情况，请尝试`loess.demo`从 TeachingDemos 包中运行该函数。这使您可以交互地单击图（甚至在点之间），然后它会显示预测中使用的点集及其权重以及该点的预测线/曲线。

另请注意，默认设置`loess`是对黄土拟合进行第二次平滑/插值，因此您在拟合对象中看到的可能不是真正的黄土拟合信息，而是二次平滑。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-10T15:32:46.057

在手册的第 42 页上找到了答案：

```
In this algorithm a set of points typically small in number is selected for direct    
computation using the loess fitting method and a surface is evaluated using an interpolation
method that is based on blending functions. The space of the factors is divided into
rectangular cells using an algorithm based on k-d trees. The loess fit is evaluated at
the cell vertices and then blending functions do the interpolation. The output data
structure stores the k-d trees and the fits at the vertices. This information
is used by predict() to carry out the interpolation. 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-11-16T08:12:52.063

我猜想对于 x 处的预测，predict.loess 对 x 附近的一些点进行回归，并计算 x 处的 y 值。

访问[https://stats.stackexchange.com/questions/223469/how-does-a-loess-model-do-its-prediction](https://stats.stackexchange.com/questions/223469/how-does-a-loess-model-do-its-prediction)

# javascript - Android Webview：从javascript调用的java方法执行javascript

> ID：12822071
> 
> 赞同：4
> 
> 时间：2012-10-10T14:40:16.130
> 
> 标签：javascript, android, webview

我有以下 javascript 代码：

```
 function mine()
    {
        var i = 3;
        AndroidObject.call();
    } 
```

其中*AndroidObject*是 java 的 javascript 接口。它有方法*调用*

```
 WebView myWebView;

    public void call()
    {
        runOnUiThread(new Runnable()
        {
            @Override
            public void run()
            {
                myWebView.loadUrl('javascript:alert(i);');
            }
        });
    } 
```

以下代码在 javascript 中执行“ *i is not defined* ”时会产生错误，因为 javascript 不会在调用 java 代码的上下文中执行。

是否可以在同一上下文中从 java 方法执行 JS，即在上述情况下使“i”可见？

在本例中，“i”是整数，但它可以是任何类型的对象。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T10:13:37.860

Suppose i is an integer,

```
function mine()

 {

var i = 3;

AndroidObject.call(i);

} 
```

and

```
WebView myWebView;

public void call(Integer i)
{
Integer temp = i;
    runOnUiThread(new Runnable()
    {
        @Override
        public void run()
        {
            myWebView.loadUrl('javascript:alert(' + temp + ');');
        }
    });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T16:39:29.707

I suggest you to create a function to get value of ***i*** if your i variable is global, like this:

```
var i = 20;

function getValueOfI() {
     return i;
} 
```

and in your java code use something like this:

```
 myWebView.loadUrl('javascript:alert(getValueOfI());'); 
```

**Updated** If you want to achieve the same with local variables:

```
 function mine()
    {
        var i = 3;
        AndroidObject.call(i);
    } 
```

where AndroidObject is javascript interface to java. It has method call

```
WebView myWebView;

public void call(final Integer i)
{
    runOnUiThread(new Runnable()
    {
        @Override
        public void run()
        {
            myWebView.loadUrl("javascript:alert(" + i + ");");
        }
    });
}

public void call(final String i)
{
    runOnUiThread(new Runnable()
    {
        @Override
        public void run()
        {
            myWebView.loadUrl("javascript:alert(" + i + ");");
        }
    });
}

public void call(final Boolean i)
{
    runOnUiThread(new Runnable()
    {
        @Override
        public void run()
        {
            myWebView.loadUrl("javascript:alert(" + i + ");");
        }
    });
} 
```

# perl - 如何用序号替换行标识符？

> ID：12822072
> 
> 赞同：1
> 
> 时间：2012-10-10T14:40:18.873
> 
> 标签：perl, loops, split

我编写了一个 perl 脚本，将 3 列拆分为标量，并使用正则表达式替换第二列中的各种值。这部分工作正常，如下所示。不过，我想做的是将第一列 ($item_id 更改为一系列序号，这些序号在 $item_id 的原始（数字）值更改时重新启动。

例如：123
123
123
123
2397
2397
2397
2397
8693
8693
8693
8693

将更改为这样的内容（在列中）：

1 2 3 4 1 2 3 4 1 2 3 4

这可以替换第一列或成为新的第四列。我知道我可以通过一系列 if-else 语句来做到这一点并尝试了这个，但这似乎与我已经为我工作的 while 过程不太匹配。- 谢谢，汤姆·谢泼德

```
open(DATA,"< text_to_be_processed.txt");
while (<DATA>)
{
chomp;
my ($item_id,$callnum,$data)=split(/\|/);
$callnum=~s/110/\%I/g;
$callnum=~s/245/\%T/g;
$callnum=~s/260/\%U/g;
print "$item_id\t$callnum\t$data\n";
}   #End while
close DATA; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T14:50:48.207

基本步骤是：

在循环之外声明计数器和一个保存前一个的变量`$item_id`。

在循环中，你做了三件事：

1.  `$item_id`如果当前与前一个不同，则将计数器重置为 1 ，否则将其增加
2.  使用那个计数器，例如打印它
3.  记住之前的值

使用代码，这可能看起来与此类似（未经测试）：

```
my ($counter, $prev_item_id) = (0, '');
while (<DATA>) {
  # do your thing
  $counter      = $item_id eq $prev_item_id ? $counter + 1 : 1;
  $prev_item_id = $item_id;
  print "$item_id\t$counter\t...\n";
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T15:07:51.840

这比你问的更进一步......

*   使用[词法文件句柄](http://perldoc.perl.org/functions/open.html)
*   [autodie] 使 open 自动抛出错误
*   使用表格替换呼叫号码
*   不要假设数据按项目 ID 排序

这是代码。

```
use strict;
use warnings;
use autodie;

open(my $fh, "<", "text_to_be_processed.txt");

my %Callnum_Map = (
    110         => '%I',
    245         => '%T',
    260         => '%U',
);

my %item_id_count;
while (<$fh>) {
    chomp;
    my($item_id,$callnum,$data) = split m{\|};

    for my $search (keys %Callnum_Map) {
        my $replace = $Callnum_Map{$search};
        $callnum =~ s{$search}{$replace}g;
    }

    my $item_count = ++$item_id_count{$item_id};

    print "$item_id\t$callnum\t$data\t$item_count\n";
} 
```

通过使用散列，它不会假定数据是按项目 ID 排序的。所以如果看到...

```
123|foo|bar
456|up|down
123|left|right
789|this|that
456|black|white
123|what|huh 
```

它会产生...

```
1
1
2
1
2
3 
```

假设您想要计算在整个文件中看到项目 id 的次数，这将更加健壮。如果您想连续看到多少次，请使用 Mortiz 的解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T14:51:07.467

这是你想要的？

```
open(DATA,"< text_to_be_processed.txt");
my $counter = 0;
my $prev;

while (<DATA>)
{
chomp;
my ($item_id,$callnum,$data)=split(/\|/);
$callnum=~s/110/\%I/g;
$callnum=~s/245/\%T/g;
$callnum=~s/260/\%U/g;
++$counter;
$item_id = $counter;
#reset counter if $prev is different than $item_id
$counter = 0 if ($prev ne $item_id );
$prev = $item_id;
print "$item_id\t$callnum\t$data\n";
}   #End while
close DATA; 
```

# c++ - 如何在 cpp 中定义 volatile 元素的映射

> ID：12822073
> 
> 赞同：5
> 
> 时间：2012-10-10T14:40:19.863
> 
> 标签：c++, map, volatile

我想生成一个互斥元素的映射，它可能需要是易失的。我正在尝试定义这种东西：

```
typedef std::map<int key, volatile long mutex> tMutexMap;
tMutexMap myMutexMap; 
```

然后使用简单的地图索引，例如：

```
myMutexMap[10]=0;
myMutexMap[23]=1; 
```

我正在使用 gcc 4.1.2。gcc 编译器不喜欢该代码。我收到一个错误

> 调用 'std::pair....' 没有匹配的函数"

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-21T09:37:10.707

C/C++`volatile`与`volatile`某些托管语言不同，与互斥锁无关（请参阅[http://www.drdobbs.com/parallel/volatile-vs-volatile/212701484](http://www.drdobbs.com/parallel/volatile-vs-volatile/212701484)）。根据您想要实现的目标考虑使用[`std::mutex`](http://en.cppreference.com/w/cpp/thread/mutex "标准::互斥")（或者`boost::mutex`如果您有 C++11 之前的标准库）或`std::atomic<YourPreferredIntergalType>`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T14:53:30.440

我不确定你是否可以在地图中制作 volatile 元素。您可以制作易失性地图，但不能在地图中制作价值。Map 实现为二叉树。并且有复杂的算法可以从这棵树中获取价值。Volatile 对编译器说它不应该优化对这个变量的访问。当您可以直接访问变量时，您可以使用 volatile。但是在地图中，您没有这样的直接访问权限。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T14:49:00.220

为什么价值观需要是`volatile`？的影响`volatile`与线程无关。

也就是说，问题可能只是使用 te 下标运算符时隐式使用的默认构造函数（不幸的是，您截断了错误消息，因此很难分辨）。尝试插入易于构建的适当类型对。对于查找，您需要使用`find()`地图的成员。

# c++ - 用 enable_if 重载类模板的成员函数

> ID：12822083
> 
> 赞同：2
> 
> 时间：2012-10-10T14:40:54.163
> 
> 标签：c++, templates, sfinae, enable-if

> **可能重复：**
> [std::enable_if 有条件地编译成员函数](https://stackoverflow.com/questions/6972368/stdenable-if-to-conditionally-compile-a-member-function)

我正在尝试为`Foo<T>::bar()`以下特定类型重载该方法`T`——但没有成功。我很感激指针和解决方法。

```
#include <cstdlib>
#include <iostream>
#include <boost/type_traits.hpp>
#include <boost/utility/enable_if.hpp>

template<typename T>
struct Foo
{
    typename boost::enable_if_c<boost::is_same<char,T>::value >::type
    bar();

    typename boost::disable_if_c<boost::is_same<char,T>::value >::type
    bar();
};

template<typename T>
typename boost::disable_if_c<boost::is_same<char,T>::value >::type
Foo<T>::bar()
{
    std::cout << "I am generic ..." << std::endl;
}

template<typename T>
typename boost::enable_if_c<boost::is_same<char,T>::value >::type
Foo<T>::bar()
{
    std::cout << "I am specific ..." << std::endl;
}

int main()
{
    Foo<char> f;
    f.bar();

    return EXIT_SUCCESS;
} 
```

在[ideone](http://ideone.com/OUVNz)上编译它会产生以下编译器错误：

```
prog.cpp:13: error: ‘typename boost::disable_if_c<boost::is_same::value, void>::type Foo<T>::bar()’ cannot be overloaded
prog.cpp:10: error: with ‘typename boost::enable_if_c<boost::is_same::value, void>::type Foo<T>::bar()’
prog.cpp:18: error: prototype for ‘typename boost::disable_if_c<boost::is_same::value, void>::type Foo<T>::bar()’ does not match any in class ‘Foo<T>’
prog.cpp:10: error: candidate is: typename boost::enable_if_c<boost::is_same::value, void>::type Foo<T>::bar() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T15:13:54.290

您正在使用具有相同参数的 enable_if 和 disable_if。看起来您正在启用和禁用相同的模板实例，编译器认为您正在重载它。不要在这两种情况下都使用 is_same_char。

# java - Maven中的注释处理器输出

> ID：12822087
> 
> 赞同：15
> 
> 时间：2012-10-10T14:40:59.603
> 
> 标签：java, maven, annotation-processing

我使用 JSR 269 作为在编译期间分析代码并在需要时使其失败的一种方式。我在 maven 中显示注释处理器的输出时遇到问题（Ant 确实显示了输出）我正在使用 javax.annotation.processing.Messager 来显示警告和错误，但在 maven 中我看不到它的输出。（我确实知道它会运行，因为它会生成应有的代码）。有任何想法吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-11T11:53:37.113

[我认为您在编译器插件MCOMPILER-66](https://issues.apache.org/jira/browse/MCOMPILER-66)中遇到了 Maven 错误或更好的错误。在注释处理方面，编译器插件有几个问题，例如[MCOMPILER-62](https://issues.apache.org/jira/browse/MCOMPILER-62)。真正最好的选择 imo 是禁用编译器插件的注释处理并使用[*maven-processor-plugin*](https://code.google.com/p/maven-annotation-plugin/)。在这篇[博文](http://in.relation.to/Bloggers/HibernateMetamodelGenerator110Final)中，您可以了解如何使用它。它看起来像这样：

```
 <plugins>
    <plugin>
        <artifactId>maven-compiler-plugin</artifactId>
        <configuration>
            <source>1.6</source>
            <target>1.6</target>
            <compilerArgument>-proc:none</compilerArgument>
        </configuration>
    </plugin>
    <plugin>
        <groupId>org.bsc.maven</groupId>
        <artifactId>maven-processor-plugin</artifactId>
        <version>1.3.7</version>
        <executions>
            <execution>
                <id>process</id>
                <goals>
                    <goal>process</goal>
                </goals>
                <phase>process-sources</phase>
            </execution>
        </executions>
        <dependencies>
            <dependency>
                <groupId>org.hibernate</groupId>
                <artifactId>hibernate-jpamodelgen</artifactId>
                <version>1.1.0.Final</version>
                <scope>compile</scope>
            </dependency>
        </dependencies>
    </plugin> 
```

还要注意注释处理器依赖项如何很好地仅限于插件。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2018-08-10T07:57:10.143

您可以通过在 maven-compiler-plugin 配置中启用 showWarnings 标志来做到这一点：

```
<build>
  <plugins>
    <plugin>
       <groupId>org.apache.maven.plugins</groupId>
       <artifactId>maven-compiler-plugin</artifactId>
       <configuration>
         <showWarnings>true</showWarnings>
       </configuration>
    </plugin>
  </plugins>
</build> 
```

另请参阅[https://github.com/Cosium/annotation-processor-logger#enable-all-logging-levels](https://github.com/Cosium/annotation-processor-logger#enable-all-logging-levels)

# php - 为什么我必须 utf8_decode() 我的 MySQL 列值才能使其正确显示？

> ID：12822088
> 
> 赞同：0
> 
> 时间：2012-10-10T14:41:01.470
> 
> 标签：php, cakephp, utf-8, utf8-decode

我正在使用将 App.encoding 设置为 UTF-8 的 CakePHP，`<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />`存在于我`<head>`和我的 MySQL 数据库中，设置为 UTF-8 Unicode 编码和 utf8_general_ci 排序规则。`"encoding"=>"UTF8"`我的 database.php 中也有连接详细信息。

当我在数据库表中存储一个“£”符号并使用命令行 MySQL 查看它时，该字符显示正确。

如果我使用 CakePHP 从数据库表中获取行并将它们输出到我的网站中，我看到`Â£`的不是我想要的`£`符号。

但是，如果我然后使用`utf8_decode()`输出我的数据，它会正确显示。

这个对吗？我曾尝试使用 htmlentities() 将 £ 符号转换为`&pound;`，但它会输出`&Acirc;&pound;`！即使我使用字符集的附加参数。

也许有人可以提供帮助 - 我一定在这里遗漏了一些东西，但我认为如果你所有的标题、元标记等都是 UTF-8，那么字符应该正确显示（在 textarea HTML 标签之类的东西中）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T16:01:05.657

听起来您的数据库中的数据是错误的：字符 £ 实际上存储为两个字符 Â£。您可以通过访问数据库并使用 hex 和 charset 函数来确认这一点：

```
select charset(MyColumn), hex(MyColumn) from MyTable; 
```

如果列以 UTF-8 编码，对于值“£”，您应该看到与此相同的输出：

```
+---------------+-----------+
| utf8          | C2A3      |
+---------------+-----------+ 
```

如果您看到任何其他内容，例如 charset 列报告 latin1 或 hex 列报告 C382C2A3，则表中的数据是错误的。虽然可以修复，但修复取决于数据的错误类型。你从`charset`和得到什么`hex`？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T14:42:26.803

您可以使用带有第三个参数的 htmlentities 来安全地编码 UTF-8 ：

```
htmlentities("£", ENT_COMPAT, "UTF-8") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-18T23:57:26.430

如果一切都在 UTF8 中，请删除`"encoding"=>"UTF8"`您的 database.php 连接详细信息：

```
$conn = mysql_connect($server, $username, $password);
//mysql_set_charset("UTF8", $conn); // REMOVED. ;)
mysql_select_db($database, $conn); 
```

# c# - 对象的内存缓存

> ID：12822090
> 
> 赞同：3
> 
> 时间：2012-10-10T14:41:12.210
> 
> 标签：c#, caching

我有各种执行长计算的函数类。目前，每次访问函数的结果都意味着重新计算函数。这就是我想在我的解决方案中加入 MemoryCache 的原因。但问题是我需要一个 ChangeMonitor 类来监视函数类的更改。我见过监控文件的例子。我的问题是：我需要编写自定义 ChangeMonitor 还是缺少一个简单的解决方案？

为了清楚起见，一个例子：

```
class MyFunction
{
    //I want to monitor changes to these parameters
    private int param1;
    private int param2;

    //This result should be cached
    public int GetResult()
    {
        return param1 * param2;
    }
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T14:58:41.300

您可以使用 Factory 类来拥有一个用于访问和创建 MyFunction 对象的类。
然后，工厂可以管理和同步包含先前计算的内部字典。
MyFunction 类需要实现 IEquals 并提供哈希函数。在 myClass 中，您需要添加私有可为空的 int 结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T14:19:00.790

感谢所有的答案。

我意识到如果我想使用 ChangeMonitor 类，我必须扩展它来监控内存段。在我的情况下，更好的解决方案是提醒缓存函数结果已更改。我通过向 MyFunction 类添加方法“Reset”来做到这一点。每次参数更改时，我都会调用重置函数，这将使缓存无效。

# visual-studio-2012 - Visual Studio 2012 - 代码审查 - 从不匹配的行中删除斜线

> ID：12822097
> 
> 赞同：0
> 
> 时间：2012-10-10T14:41:17.047
> 
> 标签：visual-studio-2012, tfs-code-review

我的团队最近转换到 Visual Studio 2012 并使用 Code Review 工作项。在查看新文件或有重大更改的文件时，为不匹配的行显示的斜线或散列会导致我的眼睛交叉并失去焦点，从而使审查变得痛苦。

有什么方法可以将代码审查工具中的斜线或散列更改为不同的东西，例如 50% 的灰色，或者至少降低线条的对比度以便我可以使用该工具？

![代码审查可用性问题描述](../Images/f361d963f61d4a96a9b7ee6d57af4934.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T05:45:39.747

我不认为有办法做到这一点。无论如何我都找不到。[如果你想要这个，你可以通过向http://visualstudio.uservoice.com](http://visualstudio.uservoice.com)添加建议来让团队知道

# android - 如何根据android上的时间戳删除sqlite数据库中的条目

> ID：12822098
> 
> 赞同：2
> 
> 时间：2012-10-10T14:41:21.173
> 
> 标签：android, sql, sqlite

我的 Android 应用程序有一个 SQLite 数据库表，其条目如下：

```
USER_ID | NAME | MESSAGE | TIMESTAMP 
```

其中时间戳存储在字符串中，格式为：

```
"2012-10-10T03:14:32+0000" 
```

我正在寻找一种方法来删除超过 3 天的条目。

该表一次可能少于 3,000 行。

我是 SQL 新手，我的问题是如何在 SQL for SQLite 中处理这个问题？在 SQL 中是否有比在 Java 中迭代所有帖子更便宜的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T14:50:39.050

你可以看看[这个文档](http://www.sqlite.org/lang_datefunc.html)。

另一种方法是利用您使用的日期格式可以直接作为字符串排序（字典顺序）这一事实。

1.  在 java 代码中，您构建表示日期时间阈值的字符串（现在减去 3 天）
2.  并且只需在 where 子句中比较 SQL 中的字符串

    SELECT * FROM MyTable WHERE TIMESTAMP >= '我用 Java 构建的日期'

大多数时候，时间戳和日期时间在 SQLite 中存储为刻度，这涉及到 int 比较（快得多）。

# html - @font-face 在本地主机中工作而不是在实时服务器中

> ID：12822102
> 
> 赞同：3
> 
> 时间：2012-10-10T14:41:26.447
> 
> 标签：html, css, fonts, font-face

我正在为我的网站使用一种[字体，它作为](http://fontzone.net/font-details/Kristen+ITC/)**字体** 存储在我的项目文件夹下 ，我在 css 中使用了这个代码。

**我的 CSS**

```
 @font-face
{
font-family: buddys;
src: url('/fonts/Kristen-ITC-Regular.ttf'),
     url('/fonts/Kristen-ITC-Regular.eot'); /* IE9 */
} 
```

它在本地主机上工作，而它上传到生活字体样式不适用于我的网站。如何让它在现场工作。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T14:49:28.153

当您使用 Visual Studio 时，您需要在属性下将每个 webfonts 的构建操作设置为“内容”。如果您不这样做，您的字体文件将不会包含在部署包中，并且永远不会进入您的服务器。

此外，我建议改进`@font-face`CSS 中的代码以包含所有格式（您可以使用字体松鼠来帮助解决此问题：[http](http://www.fontsquirrel.com/fontface/generator) ://www.fontsquirrel.com/fontface/generator ）。另外值得一读的是这篇关于最兼容代码的文章：http: [//paulirish.com/2009/bulletproof-font-face-implementation-syntax/](http://paulirish.com/2009/bulletproof-font-face-implementation-syntax/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T14:57:26.977

您确定实际字体已上传到您的网络服务器并且路径正确吗？

我建议指定所有图像文件：

```
@font-face {
    font-family: 'MyWebFont';
    src: url('webfont.eot'); /* IE9 Compat Modes */
    src: url('webfont.eot?#iefix') format('embedded-opentype'), /* IE6-IE8 */
         url('webfont.woff') format('woff'), /* Modern Browsers */
         url('webfont.ttf')  format('truetype'), /* Safari, Android, iOS */
         url('webfont.svg#svgFontName') format('svg'); /* Legacy iOS */
    } 
```

要从字体文件中生成它们，只需使用这样的[工具](http://fontface.codeandmore.com/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T14:43:05.923

您的字体路径是绝对的。核实。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-10T14:50:44.820

如果您的 css 文件位于名为“css”的文件夹中，并且字体目录和 css 目录位于名为“assets”的同一文件夹中。

然后：我认为你的css代码应该是：

```
 @font-face
{
font-family: buddys;
src: url('../fonts/Kristen-ITC-Regular.ttf'),
     url('../fonts/Kristen-ITC-Regular.eot'); /* IE9 */
} 
```

# android - Android 使用 SQLCipher - 你如何解密？

> ID：12822104
> 
> 赞同：5
> 
> 时间：2012-10-10T14:41:31.027
> 
> 标签：android, sqlite, sqlcipher

我认为有人问过这个问题，但是我尝试了几个示例均无济于事。我的问题是……我有一个 Android 应用程序设置来使用 SQLCipher DB 加密，它在设备上运行良好。

在模拟器上进行测试时，如果我使用 DDMS 下载数据库文件，我如何读取该文件以检查表和数据？我已经尝试使用 SQLite3 的命令 shell 和 ATTACH 示例，但是每次我这样做时，我都会收到以下消息“错误：文件已加密或不是数据库”。这当然表明 ENCRYPT 正在工作，但是我如何在模拟器/eclipse 之外正确地 DECRYPT 呢？

我需要不同的 SQLite 客户端吗？其他人会被困在这个问题上吗？

我在使用：SQLCipher for Android 2.0.8 06/14/2012

有什么帮助吗？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-09-11T13:10:56.583

我通过使用这个小脚本解决了这个问题。

# 解密.sh

```
#!/bin/bash
# Bashscript to decrypt databases

echo "pull db from device.."
adb pull /data/data/com.example/databases/database.db

echo "removing previous decrypted db, if existent.."
rm -r decrypted_database.db

echo "decrypting database.db into decrypted_database.db"
sqlcipher -line database.db 'PRAGMA key = "encryption_key";ATTACH DATABASE "decrypted_database.db" AS decrypted_database KEY "";SELECT sqlcipher_export("decrypted_database");DETACH DATABASE decrypted_database;' 
```

这些程序应该添加到您的 PATH 中：

*   [亚行](https://stackoverflow.com/a/19764254/1281750)
*   [sqlcipher](https://www.zetetic.net/blog/2013/1/21/sqlcipher-available-on-homebrew.html)

在脚本中替换：

*   **com.example**与您的包名
*   **名称为 databasefile 的**database.db****
***   **带加密**密码的 encryption_key**

 *** * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-10T15:02:20.127

“普通”SQLite 工具不包括 SQLCipher。

您必须[下载](http://sqlcipher.net/downloads)源代码并[自己编译](https://sites.google.com/site/lukeshq/engineering-articles/compiling-sqlcipher-for-windows)才能获得支持 SQLCipher 的命令 shell。**

# php - 使用鼠标坐标查询图像数据库

> ID：12822105
> 
> 赞同：1
> 
> 时间：2012-10-10T14:41:34.707
> 
> 标签：php, database, image, drupal, coordinates

感谢您花时间阅读我的帖子。

我正在寻找一些关于如何根据鼠标位置查询图像数据库的选项/建议/一般性评论。

本质上，我有一个包含一些图像的数据库（在单独的公司服务器上），我想做的是根据我的鼠标在浏览器中的位置将图像返回到我的网站。

因此，如果我单击左上角，我将获得风景左上角的放大图片（单独的图像），如果我单击右下角，我将获得右下角的放大图片（同样，单独的图像）。

我是 HTML/PHP/CSS 的新手，但不是 C++/C/Delphi 的新手，我确信我可以做到这一点，但我无法从树上看到我真正要做的事情！

我正在使用自己的服务器（由 1&1 托管）和 Drupal 网页。

如果有人可以提供帮助，那就太好了！

非常感谢您的时间，

凯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T14:44:04.193

[HTML映射](http://www.w3schools.com/tags/tag_map.asp)并使用javascript（可能是jQuery）绑定到每个`<area>`并做一些事情（在你的情况下，弹出/缩放一个单独的图像）

# c# - c#中的webdav文件服务器客户端

> ID：12822107
> 
> 赞同：1
> 
> 时间：2012-10-10T14:41:34.800
> 
> 标签：c#, .net, winforms, webdav

我正在用 c# 编写一个 webdav 客户端 winforms 应用程序，以实现基本的 ftp 功能。我想知道是否有用于 webdav ftp 功能的开源 api。如果没有，我必须从头开始编码它应该从哪里开始？为 webdav 服务器编写 c# libray 的最佳文档是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T12:26:55.763

从学习当前的客户端/服务器和 WebDAV 文档开始。这是 WebDAV 的最佳文档：[http](http://greenbytes.de/tech/webdav/common-index.html) ://greenbytes.de/tech/webdav/ 以及 HttpWebRequest - [http://msdn.microsoft.com/](http://social.msdn.microsoft.com/Search/en-US?query=HttpWebRequest&ac=3)

# android - Android & Felix OSGI - 与 Android GUI 的通信？

> ID：12822109
> 
> 赞同：0
> 
> 时间：2012-10-10T14:41:41.773
> 
> 标签：android, osgi, apache-felix

我们在 Android (2.1) 上成功运行了 Apache Felix 4.0.3，并且可以在运行时部署/删除 Bundle。对于 OSGI Bundle 之间的依赖管理，我们使用 Felix DependenyManager。

现在我们想要将数据从正在运行的 OSGI Bundles 发送到 Android GUI 并显示它。

我们怎样才能完成这项任务？我们可以使用某种回调吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T19:39:26.777

假设通过“发送数据”，您的意思是与捆绑提供的服务进行交互，这并没有什么特别之处：只要确保您持有`BundleContext`您的`Felix`实例为您提供的实例，并使用它来请求服务。绑定数据的方式完全取决于您，就像在任何其他 Java 项目中一样。

## 只显示数据

作为一个相当人为的例子，你可以做类似的事情

```
Map<String, Object> config = new HashMap<String, Object>();
/// make settings here, including providing the bundles to start
Felix felix = new Felix(config);

    felix.start();

BundleContext context = felix.getBundleContext();

// now get some service! Remember to do nullchecks.
ServiceReference<PackageAdmin> ref = context.getServiceReference(PackageAdmin.class);
PackageAdmin admin = context.getService(ref);
ExportedPackage[] exportedPackages = admin.getExportedPackages(felix);

// use the result to update your UI
TextView field = (TextView) findViewById(R.id.textfield);
field.setText(exportedPackages[0].getName()); 
```

设置框架，获取一些服务，并使用一些数据更新 UI。

## 捆绑

没有可以使用的默认回调，但我特别喜欢的一个技巧是让 UI 元素了解它们的 OSGi 环境；这样，您可以让他们“聆听”您框架中的更改。下面是我使用的简化视图，我更喜欢将复杂的东西委托给[Apache Felix 依赖管理器](http://felix.apache.org/site/apache-felix-dependency-manager.html)。

例如，假设您有一些侦听器接口。

```
public interface ClockListener {
    public void timeChanged(String newTime);
} 
```

并且您有一些服务会定期调用当前时间实现此接口的所有服务。您现在可以创建一个`TextField`在每次调用此方法时自行更新的方法。就像是，

```
public class ClockTextField extends TextView implements ClockListener {
    public ClockTextField(Context context) {
        super(context);
    }

    public void timeChanged(String newTime) {
        setText(newTime);
    }

    public void register(BundleContext bundleContext) {
        // remember to hold on to the service registration, so you can pull the service later.
        // Better yet, think about using a dependency management tool.
        bundleContext.registerService(ClockListener.class, this, null);
    }
} 
```

# php - 使用 PHP 将图像大小调整到新目录

> ID：12822110
> 
> 赞同：-3
> 
> 时间：2012-10-10T14:41:43.077
> 
> 标签：php, image, resize

我真的不知道这里出了什么问题以及为什么它没有将新图像重新创建到新目录。请帮忙！由于某种原因没有创建图像。我在 Microsoft 的 WebMatrix 中编写所有内容。

```
 public static function imgResize($imgdir){
        list($width, $height) = getimagesize($imgdir);

        $ratio = $width/$height;
        $new_height = 90;
        $new_width = round($new_height * $ratio);

        $new_image = imagecreatetruecolor($new_width, $new_height);
        $old_image = imagecreatefromjpeg($imgdir);
        imagecopyresampled($new_image, $old_image, 0, 0, 0, 0, $new_width, $new_height, $width, $height);

        imagejpeg($new_image, "gal/newimages/", 100);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T14:47:02.593

imagejpeg 需要文件名，而不是目录。尝试：

```
imagejpeg($new_image, "gal/newimages/" . basename($imgdir), 100); 
```

另外，该文件夹是否存在？如果没有，您需要先创建它。

# debugging - DebugDiag 报告线程调用 GC.Cleanup 过于频繁。是什么进程产生了那个线程？

> ID：12822111
> 
> 赞同：1
> 
> 时间：2012-10-10T14:41:53.223
> 
> 标签：debugging, telerik, iis-7.5, telerik-open-access, debugdiag

我使用的是 Windows 2008 R2，CPU 为 100%。我在负责的应用程序池上运行了 DebugDiag，并发现了以下调用堆栈：

```
System.GC._Collect(Int32, Int32)
OpenAccessRuntime.Relational.conn.RelationalConnectionPool.CleanupLeftOvers(System.Object)
System.Threading.ExecutionContext.runTryCode(System.Object)
System.Runtime.CompilerServices.RuntimeHelpers.ExecuteCodeWithGuaranteedCleanup(TryCode, CleanupCode, System.Object)
System.Threading.ExecutionContext.Run(System.Threading.ExecutionContext, System.Threading.ContextCallback, System.Object, Boolean)
System.Threading.QueueUserWorkItemCallback.System.Threading.IThreadPoolWorkItem.ExecuteWorkItem()
System.Threading.ThreadPoolWorkQueue.Dispatch()
System.Threading._ThreadPoolWaitCallback.PerformWaitCallback() 
```

我的问题是我想弄清楚是什么组件产生了这个线程，所以我知道这个线程是来自 Telerik 应用程序，还是由我们的开发人员创建的某个东西控制。

如何确定是什么对象产生了这个线程？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T15:46:00.887

该线程由 OpenAccess 运行时产生。

OpenAccess 维护一个具有可配置“最大活动连接”值的连接池 - 默认值为 10。当所有连接都已发出（并行操作）时，下一个请求会阻塞，直到活动连接返回池为止。如果请求被阻塞，后台池管理线程会尝试强制执行垃圾收集以释放可能存在的任何悬空/无效连接。

您是否明确指定了最大活动值？也许您应该根据您的使用情况考虑更高的价值。您是否有访问“context.Connection”但不处置它的地方？

# asp.net-mvc - 如果 Roles 为空，则默认设置 AuthorizeAttribute 拒绝用户

> ID：12822113
> 
> 赞同：5
> 
> 时间：2012-10-10T14:42:04.863
> 
> 标签：asp.net-mvc, authorization

我对`AuthorizeAttribute`;的默认行为感到相当惊讶 如果您不提供任何`Roles`属性，它似乎只是允许*任何*授权用户访问控制器/操作。我想要白名单行为；如果`Roles`为 null 或为空，则*拒绝*所有用户访问。我怎样才能使这种行为发生？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-10T14:47:10.207

```
public class AuthorizeExAttribute : AuthorizeAttribute
{
    protected override bool AuthorizeCore(HttpContextBase httpContext)
    {
        if (string.IsNullOrWhiteSpace(Roles))
            return false;
        return base.AuthorizeCore(httpContext);
    }
} 
```

现在`[AuthorizeEx]`在你的控制器/动作上使用

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-16T09:38:09.883

这是我最终想出的，作为我添加到 MVC 应用程序的全局过滤器集合中的过滤器：

```
/// <summary>
/// This filter should be applied to an MVC application as a global filter in RegisterGlobalFilters, not applied to individual actions/controllers.
/// It will cause access to every action to be DENIED by default.
/// If an AllowAnonymousAttribute is applied, all authorization checking is skipped (this takes precedence over AuthorizeSafeAttribute).
/// If an AuthorizeSafeAttribute is applied, only the roles specified in AuthorizeSafeAttribute's Roles property will be allowed access.
/// </summary>
public sealed class AuthorizeSafeFilter : AuthorizeAttribute {
    public override void OnAuthorization(AuthorizationContext filterContext) {
        if (!string.IsNullOrEmpty(this.Roles) || !string.IsNullOrEmpty(this.Users)) {
            throw new Exception("This class is intended to be applied to an MVC application as a global filter in RegisterGlobalFilters, not applied to individual actions/controllers.  Use the AuthorizeSafeAttribute with individual actions/controllers.");
        }

        // Disable caching for this request
        filterContext.HttpContext.Response.Cache.SetNoServerCaching();
        filterContext.HttpContext.Response.Cache.SetNoStore();

        // If AllowAnonymousAttribute applied, skip authorization
        if (
            filterContext.ActionDescriptor.IsDefined(typeof(AllowAnonymousAttribute), true) ||
            filterContext.ActionDescriptor.ControllerDescriptor.IsDefined(typeof(AllowAnonymousAttribute), true)
        ) {
            return;
        }

        // Backup original roles
        string rolesBackup = this.Roles;

        // Look for AuthorizeSafeAttribute roles
        bool foundRoles = false;
        string foundRolesString = null;
        object[] actionCustomAttributes = filterContext.ActionDescriptor.GetCustomAttributes(false);
        object[] controllerCustomAttributes = filterContext.ActionDescriptor.ControllerDescriptor.GetCustomAttributes(false);

        if (actionCustomAttributes.Any(attr => attr is AuthorizeSafeAttribute)) {
            AuthorizeSafeAttribute foundAttr = (AuthorizeSafeAttribute)(actionCustomAttributes.First(attr => attr is AuthorizeSafeAttribute));
            foundRoles = true;
            foundRolesString = foundAttr.Roles;
        }
        else if (controllerCustomAttributes.Any(attr => attr is AuthorizeSafeAttribute)) {
            AuthorizeSafeAttribute foundAttr = (AuthorizeSafeAttribute)(controllerCustomAttributes.First(attr => attr is AuthorizeSafeAttribute));
            foundRoles = true;
            foundRolesString = foundAttr.Roles;
        }

        if (foundRoles && !string.IsNullOrWhiteSpace(foundRolesString)) {
            // Found valid roles string; use it as our own Roles property and auth normally
            this.Roles = foundRolesString;
            base.OnAuthorization(filterContext);
        }
        else {
            // Didn't find valid roles string; DENY all access by default
            filterContext.Result = new HttpUnauthorizedResult();
        }

        // Restore original roles
        this.Roles = rolesBackup;
    }
} 
```

我还定义了这个属性：

```
/// <summary>
/// Represents an attribute that is used to restrict access by callers to an action method, in conjunction
/// with a global AuthorizeSafeFilter, DENYING all access by default.
/// </summary>
public class AuthorizeSafeAttribute : Attribute {
    public string Roles { get; set; }
} 
```

我适用`AllowAnonymousAttribute`于我的登录操作/控制器和`AuthorizeSafeAttribute`其他登录操作/控制器，但如果我忘记应用这些，默认情况下会*拒绝*访问。我希望 ASP.NET MVC 在默认情况下也能像这样安全。:-)

# android - 谷歌地图和铁路

> ID：12822120
> 
> 赞同：0
> 
> 时间：2012-10-10T14:42:15.900
> 
> 标签：android, ruby-on-rails, google-maps

我的问题是关于使用 RAILS 网页中的数据在 android 中填充地图的最佳方法......我现在这样做的方式是：

我有一个带有数据的json（纬度，经度和点的其他一些属性）我使用httpclient获取信息，然后我将数据放入列表中，然后我填充地图......它目前工作正常，但它是太慢了

有一个更好的方法吗？

我也想知道一种方法，我可以用手指在安卓上画一条路线

# java - 在 griffon 中保存文件对话框

> ID：12822122
> 
> 赞同：0
> 
> 时间：2012-10-10T14:42:21.323
> 
> 标签：java, jfilechooser, griffon

我的 griffon 应用程序中有一个保存文件对话框。代码是这样的：

```
 String filename = siteCode+'-'+model.currentClient.name+'-'+computerName+'-'+date+'.csv'
    File selFile = new File(filename)
    def fc = new JFileChooser()
    fc.setSelectedFile(selFile)
    fc.showSaveDialog()

    BufferedWriter out = new BufferedWriter(new FileWriter(selFile)); 
```

问题是，无论我选择保存文件的路径，它总是会转到我的应用程序文件夹中的“暂存”目录。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T00:03:53.877

可能是您没有从对话框中读回选定的文件而是重用`selFile`变量？确保你打电话`fc.getSelectedFile()`。

# c# - 状态为 EndRootElement 的令牌 EndElement 将导致无效的 XML 文档

> ID：12822123
> 
> 赞同：0
> 
> 时间：2012-10-10T14:42:25.183
> 
> 标签：c#, windows-phone-7, serialization, datacontractserializer, isolatedstoragefile

我正在为 wp7 开发应用程序。我正在使用 datacontractserializer 将应用程序的状态存储在隔离的存储文件中。现在，当我尝试序列化对象时，有时我会遇到此异常。

> 处于 EndRootElement 状态的令牌 EndElement 将导致无效的 XML 文档。如果要编写 XML 片段，请确保将 ConformanceLevel 设置设置为 ConformanceLevel.Fragment 或 ConformanceLevel.Auto。

这是我正在序列化的课程

```
[DataContract]
public class TcpSessionProperties
{
  [DataMember]
    public int NumberOfReceivedStanzas { get { return _numberOfReceivedStanzas; } set { _numberOfReceivedStanzas = value; } }

    [DataMember]
    public int NumberOfPacketsSent { get { return _numberOfPacketsSent; } set { _numberOfPacketsSent = value; } }

    [DataMember]
    public List<TcpPacket> PendingPacketsToSendQueue
    {
        get { return _pendinPacketsToSendQueue; }
        set
        {
            LogUtility.Log(Thread.CurrentThread.GetHashCode());
            _pendinPacketsToSendQueue = value;
        }
    }

}

cla 
```

这是我正在序列化和反序列化的代码

```
public class AppCacheIsolatedFile
{
    public static void Add(object val)
    {
      private static object _objectToSave;

        lock (_storageLock)
        {
            /*
            if (PhoneApplicationService.Current.State.ContainsKey(key))
                PhoneApplicationService.Current.State[key] = val;
            else
                PhoneApplicationService.Current.State.Add(key, val);
             */
            _objectToSave = val;
            WriteObject(NameOfFile, val, typeof(StreamingSocketConnection.StreamingSocketConnection));
        }
         public static void WriteObject(string fileName,object val,Type type)
    {
        try
        {
            Console.WriteLine(
            "Creating a Person object and serializing it.");

            using (IsolatedStorageFileStream stream = new IsolatedStorageFileStream(fileName, FileMode.Create, IsoStore))
            {
                DataContractSerializer dcs = new DataContractSerializer(type);
                dcs.WriteObject(stream, val);
            }
        }
        catch (Exception exception)
        {

            LogUtility.NotifyUserAndLog("Exception occured in isolatd storage file  while writing "+exception.StackTrace); 
        }

    }

    } 
```

该异常发生在 dcs.writeobject。我不知道为什么会这样。

# android - 我从服务器下载了 Json 但不知道它的大小和结构

> ID：12822127
> 
> 赞同：2
> 
> 时间：2012-10-10T14:42:29.340
> 
> 标签：android, json

我会解析 JSON

```
public JSONObject getJSONFromUrl() {

    try {

        DefaultHttpClient httpClient = getNewHttpClient();

        String auth = android.util.Base64.encodeToString(
                ("estafeta@62e12548-0a68-4999-960b-a3bb3c44675c:11111")
                        .getBytes("UTF-8"), android.util.Base64.NO_WRAP);

        HttpGet get = new HttpGet(
                "https://test2.estafeta.org/mobileestafeta/MobileSurveyReportsService.svc/LoadTabletSurveyTasks?startRowVersion=AAAAAAAAAAA=&count=500");

        get.addHeader("Authorization", "Basic " + auth);

        HttpResponse httpResponse = httpClient.execute(get);
        //httpResponse.getStatusLine().getStatusCode()
        HttpEntity httpEntity = httpResponse.getEntity();
        is = httpEntity.getContent();           

    } catch (UnsupportedEncodingException e) {
        e.printStackTrace();
    } catch (ClientProtocolException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }

    try {

        BufferedReader reader = new BufferedReader(new InputStreamReader(
                is, "iso-8859-1"));
        StringBuilder sb = new StringBuilder();
        String line = null;
        while ((line = reader.readLine()) != null) {
            sb.append(line + "\n");
        }
        is.close();
        json = sb.toString();
    } catch (Exception e) {
        Log.e("Buffer Error", "Error converting result " + e.toString());
    }

    try {
        jObj = new JSONObject(json);
    } catch (JSONException e) {
        Log.e("JSON Parser", "Error parsing data " + e.toString());
    }

    return jObj;

} 
```

**我从服务器下载了 Json 但不知道它的大小和结构**

1）告诉我如何查看从服务器收到的 JSON 的大小和结构？

2) 如何查看 jObj 的内容？

3）会发生什么，为什么有这么多行？

![在此处输入图像描述](../Images/ad32aa32817a8d7a1b4bd5a9e7a41d40.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T14:50:05.080

ADT 带有一个名为 DDMS 的漂亮工具。在 Eclipse IDE 的右上角，您可以找到`perspectives`. 选择 DDMS 视角。

接下来，您可以启用项目分析。单击您的项目并按绿色的错误（调试）按钮。然后，您可以使用 DDMS 选项卡转到`Allocation`.

在分配中，您可以找到每个指针，以及它所指的内容。因此，您可以找到您的`jObj`变量并查看它所指向的内容以及其中的每个对象。

[通过这些教程](http://www.edumobile.org/android/android-tutorial/what-is-ddms-and-how-it-works/)了解如何使用 DDMS 。他们会改善你的生活。

# python - 如何在webpy中获取当前请求的url

> ID：12822137
> 
> 赞同：4
> 
> 时间：2012-10-10T14:43:17.657
> 
> 标签：python, web.py

我正在使用 webpy 框架。我想在 webpy 中获取当前请求的 url。

请帮助我，谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-12T11:35:38.787

只需尝试`web.ctx`在您的控制器方法中打印，您就会看到一堆环境变量。

```
from pprint import pprint
pprint(web.ctx) 
```

所以你的网址可能应该是`ctx.home + ctx.path + ctx.query`or `ctx.home + ctx.fullpath`。

UPD：您还可以查看`web.url`and `web.changequery`，在 api 文档中找到它们：[http ://webpy.org/docs/0.3/api](http://webpy.org/docs/0.3/api)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T14:54:59.927

[ctx 路径](http://webpy.org/cookbook/ctx)是您所追求的吗？

> **在 ctx 中找到的数据**
> 
> **要求**
> 
> path – 用户请求的路径，相对于当前应用程序。如果您正在使用子应用程序，则与外部应用程序匹配的任何部分 url 都将被修剪掉。例如，您在 code.py 中有一个主应用程序，还有一个名为 admin.py 的子应用程序。在 code.py 中，您将 /admin 指向 admin.app。在 admin.py 中，您将 /stories 指向一个名为 stories 的类。在故事中，web.ctx.path 将是 /stories，而不是 /admin/stories。例如/articles/845

# c++ - 求根时的包围算法。“二次”函数中的单根

> ID：12822141
> 
> 赞同：3
> 
> 时间：2012-10-10T14:43:31.283
> 
> 标签：c++, algorithm, math

我正在尝试实现寻根算法。我正在使用在数值配方中找到的混合 Newton-Raphson 算法，效果非常好。但是我在括号中遇到了问题。

在实现求根算法时，我意识到在某些情况下，我的函数有 1 个实根和所有其他虚根（其中几个，通常为 6 或 9 个）。我感兴趣的唯一根源是真正的根源，所以问题不存在。问题是该函数像三次函数一样接近根，与 y=0 轴的点接触......

Newton-Rapson 方法需要一些不同符号的括号，而我发现的所有括号方法都不适用于这种特定情况。

我能做些什么？在我的程序中找到那个根非常重要......

编辑：更多问题：有时由于真的很小的数值错误，比如说`1e-6`“三次”函数的某个值的变化没有那个真正的根，它只是一个可忽略的虚数部分的虚数......（用matlab检查）

**编辑2：**有关该问题的更多信息。

好的，我需要寻根算法。

我有的信息：

*   我需要找到的根在 [0-1] 之间，如果在该部分之外还有更多根，我对它们不感兴趣。
*   根是真实的，可能有虚构的根，但我不想要它们。
*   可能所有其余的根都将是虚构的
*   在那一点上，根可能是双倍的，但我认为这实际上与数值分析问题无关
*   在整个计算过程中，我需要多次使用求根算法，但函数始终是多项式
*   在求根的一种特殊情况下，我的多项式将类似于使 Y=0 与该点接触的二次函数。一个真实案例的例子： ![在此处输入图像描述](../Images/6be82513ad072ac599c490708a27cbc0.png)
*   该系数可能不是 100% 精确的，并且真正轻微的不精确可能会使函数不接触 Y=0 轴。
*   我无法解决这种特定情况，因为在其他情况下，多项式可能非常正常并且不会产生任何“奇怪”的事情。
*   我实际使用的方法是 NewtonRaphson 混合，如果导数非常小，它会进行二等分而不是 NewRaph（在*数值配方*中找到）。

Matlab对图像上的函数的回答：roots：

```
0.853553390593276 + 0.353553390593278i
0.853553390593276 - 0.353553390593278i
0.146446609406726 + 0.353553390593273i
0.146446609406726 - 0.353553390593273i
0.499999999999996 + 0.000000040142134i
0.499999999999996 - 0.000000040142134i 
```

该函数是我准备的一个真实示例，我知道我想要的答案是`0.5`

注意：我还没有完全检查你们给我的一些答案（谢谢！），我只是想提供我已经完成问题的所有信息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T14:53:52.790

假设您有一个一维多项式问题（我从想象的解决方案中假设），您可以使用 Sturm 序列将所有实根括起来。参见[Sturm 定理](http://en.wikipedia.org/wiki/Sturm%27s_theorem)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T15:36:58.203

欢迎来到数值方法的奇妙世界。注意你的发际线；当你沮丧地拔出头发时，它可能会开始消退。

首先，通过数字根查找，如果你不能解决问题，你就完蛋了。一旦接近，Newton Raphson 非常适合完善解决方案，并且它仅在根附近的导数远离零时才有效。您总是需要手头有一些较慢的技术作为备用，因为 Newton Raphson 可以将您送至永无止境的地方（即，在支架之外的某个地方）。如果你的函数不是多项式，首先要尝试的是布伦特方法。如果您的函数是多项式，请尝试 Laguerre 方法或 Jenkins-Traub。

顺便说一句，听起来你有病态问题。你不应该期望特别好的性能。病态问题是病态的。

**附录**
如果您对看似是根但不是根的事物有问题，您需要注意如何评估您的功能。如果确实有多项式，请形成多项式的每一项，按绝对值排序，然后将最小到最大相加。大多数情况下，这会产生更好的准确性，但如果您有总和几乎为零的大项，则会失败。如果是这种情况，您可能希望单独添加这些取消项，将其余的最小添加到最大，然后计算总计 - 您仍然有点搞砸了。几乎取消的那个大加法会损失很多精度。除了扩展精度算术之外，别无他法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T15:20:30.030

使用 Newton-Raphson 是一种绝望的行为。你最好找到代表你的函数的连分数并计算它。CF 会收敛得更快，并且会产生真正的根。此外，由于 CF 产生两个整数的比率，因此您可以严格控制数值精度，而不必担心舍入误差的累积和其他类似的拔毛问题。

要找到任何多项式函数的实根，请参阅 David Rosen (1978) 的“A Continued Fraction Algorithm for Approximating All Real Polynomial Roots”。

------------ 附录 1 --- 10 月 11 日-----

好的，你正在解决一个性问题。你有几个选择。最简单的方法是将泰勒近似（比如 3 阶）与哈雷方法结合使用。这比牛顿要好得多，因为它具有三次收敛性，并且您可以检测虚构的解决方案。缺点是你会遇到四舍五入的问题，这可能会导致错误的答案。

理想的选择是找到表示一元根的连分数，因为这个 CF 可以计算为任何所需精度的整数比，从而消除了舍入问题。

计算该 CF 的一种方法是通过 Jacobi-Perron 算法。请参阅论文 Hendy 和牛仔裤：[http](http://www.ams.org/mcom/1981-36-154/S0025-5718-1981-0606514-X/S0025-5718-1981-0606514-X.pdf) ://www.ams.org/mcom/1981-36-154/S0025-5718-1981-0606514-X/S0025-5718-1981-0606514-X.pdf 。本文展示了通过 CF 近似计算三次根和四次根的精确算法。

请注意，如果六分法是可约的，那么它可以转换为四次和二次：[http](http://elib.mi.sanu.ac.rs/files/journals/tm/21/tm1124.pdf) ://elib.mi.sanu.ac.rs/files/journals/tm/21/tm1124.pdf 。然后可以通过 Hendy 论文中的算法求解四次。

可以通过 Rogers-Ramunajan CF 来为六分仪生成 CF 的一般解决方案。该方法参见以下论文：http: [//arxiv.org/pdf/1111.6023v2](http://arxiv.org/pdf/1111.6023v2)。这将为任何性别生成 CF。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-10T16:19:53.647

好吧，如果您的函数触及零但从未超过它，那么您似乎正在寻找最小值（或最大值）。在这种情况下，你最好告诉计算机去做——要么找到导数的根（如果你可以分析地计算它），或者使用最小化例程。然后检查最小值处的函数值是否“足够接近”为零。

只是重申其他人已经说过的话：

*   不要从 Newton-Raphson 方法开始；从布伦特甚至直接二分法开始几乎总是更好（前提是您可以将根括起来）。
*   1e-6 量级的“小数值误差”会产生不良影响的不稳定性值得研究。直接怀疑：混合浮点数和双精度数，某处精度损失等。

编辑：因此，根据某些参数，您的函数要么有零交叉，要么具有零值的最小值，这是正确的吗？在这种情况下，我要做的是：使用简单而强大的包围策略（例如，从 开始`[-1, 1]`，将端点乘以`1.1`，检查符号，继续相乘，类似这样）。如果成功，则存在过零，请使用寻根例程。如果包围失败，请使用最小化。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-11T20:56:22.250

安德，感谢您回答我的问题（关于间隔）；很抱歉延迟跟进 - 我的工作很忙。另外-在我找到您提供的其他信息之前-我想解释很多如何处理这个问题，并且正在考虑如何呈现它。但是，我现在相信您的情况并不太难，我们可以在没有太多额外内容的情况下解决它，因为您显然有一个明确的多项式表达式（各种幂的系数）。

让我们从一个简单的案例开始，来确定方法。

步骤 1。如果您有一个 2 次多项式，它的导数是一阶的并且有一个简单的零（您可以通过括号或简单地通过显式求解方程来找到它）。（是的，我知道二次多项式的根也有一个封闭公式，但为了当前的论点，让我们忘记这一点）。然后，二次多项式的零位于导数零的左侧和右侧。因此，如果您还有要找到原始函数（二次多项式）的根的区间，那么您现在有两个区间 - 导数零的左侧和右侧，每个区间都有一个零。

重要的是要认识到原始函数在每个子区间上都是单调的（其中一个减少，另一个增加）。因此，只需检查（子）区间末尾的函数值，您就可以确定它们是否实际上将零括起来。如果不是，则在导数的零处恰好有多个零（在这种情况下为双），如果函数在那里为零（否则，它是一个双虚根，您现在已经找到了实部）。

如果导数的零位于总区间之外，则区间内最多有一个根，并且您只需要检查那个特定的（子）区间。

步骤 2\. 现在考虑一个三阶多项式。它的导数是二阶的。那个二阶多项式的导数又是一阶的，你像以前一样继续得到两个子区间来找到原始函数的导数的根。这两个根为您提供三个（最多）间隔，您将在其中找到原始（三阶）函数的 3 个根。同样在这里，您将有区间 (3)，其中原始函数是单调的（交替增加/减少），使得每个子区间的分析非常容易。

同样，零可能重合（2 个或什至全部 3 个）并且可能另外变成复值（即具有非零虚部）。案例分析很简单：检查区间边界处的函数值，以评估是否存在符号变化（函数在每个子区间上是单调的）和/或函数在子区间边界之一处是否为零。

步骤 4\. 用已知多项式对此进行推广。比方说 - 你的例子 - 它是 6 阶：

a) 构造五阶导数（即将原始多项式简化为一阶多项式）。计算它为零（在您的示例中恰好为 0.5）。在这种情况下，您已经完成了，但假设您没有意识到这一点。所以你现在有 2 个区间 0..0.5 和 0.5..1

b) 构造四阶导数。检查其在子区间边界 (0, 0.5, 1) 处的值 对于每个子区间，确定其内部是否有实零。如果是这样，您使用找到的两个零（您忘记了五阶导数的零）将原始区间重新划分为 3 个子区间。如果它们重合（在上一次切割中，0.5），您坚持使用 0.5（不管您是否在那里找到了四阶导数的真正双零或“双虚数”）并且仍然只有 2 个间隔，但是为了争论，假设你现在有 3 个。

c) 构造三阶导数并像以前一样做。然后，您将有 4 个（最多）间隔。

d) 等等。以这种方式处理二阶导数后，您有 5 个（最多）区间，在处理一阶导数后，您有 6 个区间（或更少......）并且知道函数在每个子区间上是单调的，您将快速确定如果有一个真正的根，那么在它们中的每一个中，总是使用每个最终子区间中函数的已知单调性。

在评估函数时添加关于数值准确性的注释：减少噪声的第一个（在这种情况下可能足够）方法不是以原始形式建议的方式评估您的函数（即 a6 *x* *6 + a5 *x* *5 +..)，但将其重写为：

a0 + x*(a1 + x*(a2 + x*(a3 + x*(a4 + x*(a5 + x*a6)))))

所以，在评估你继续：

tmp = a6

tmp = x*tmp + a5

tmp = x*tmp + a4

等等。

如果这个小小的重写不足以保持数值稳定性，你应该用（例如）切比雪夫多项式展开式重写你的多项式，并用它的递归关系来评估它。两者（获得扩展和应用递归关系进行评估）都相当简单。如果您需要帮助，我可以解释，但我想这里没有必要。

在所有情况下，您都必须允许一些不准确性，即接受计算通常不会给您数学上精确的函数值。所以评估函数是否在某个点可能为零必须包括一些“容差”，不幸的是，没有办法解决这个问题；您可以达到的最佳目标是尽量减少噪音。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-09-27T03:07:02.880

与您的情况一样，您对实数多项式的实数分解感兴趣。人们可能会看到所有复数根都以共轭对形式出现，它们对应于一个实数二次因子。通过找到这个实数二次方并完成平方得到表格`(x-r)^2 + s`，您将能够看到“实数”偶数阶根`r`，并带有由 给出的“错误” `s`。如果`s > 0`太大，您可以将其丢弃，因为它可能很复杂。如果`s < 0`也很大，那么您有两个由 给出的遥远实根`x = r ± √(-s)`。如果`s`非常小，那么您可能会怀疑`r`是真正的双根并保留它。

可以使用[Bairstow 方法](https://en.wikipedia.org/wiki/Bairstow%27s_method)找到这样的二次因子，该方法实际上应用了二维牛顿法。这给出`x^2 + ux + v`和`r = -u/2; s = v - r^2`。

# web-services - Web 服务中大对象传输的方法

> ID：12822144
> 
> 赞同：0
> 
> 时间：2012-10-10T14:43:43.377
> 
> 标签：web-services, payload, data-transfer-objects, large-data

我必须使用 Web 服务实现 SOA 解决方案。我必须传输大型对象（例如：25~30mb 的 XML 数据的发票），我想知道最好的方法是什么......

我是不是该：

**A.**在几个 WS 调用中分别传输这些对象的部分（例如：首先是标题，然后是一项一项，不管它们可能有 1000 个），然后在“服务器端”中组织它们来处理重试和错误.

或者 ...

**B.**我是否应该在一次调用中传输整个有效负载并尝试对其进行优化（而不是“烧掉”Http 连接）？

我正在使用 .Net 的 WCF 来公开服务层。我接受推荐的阅读和注意事项。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T21:05:00.290

这个想法是最大化负载并最小化调用次数。这并不总是简单的，因为 - 在一次调用中 - 防火墙或 Web 服务本身可能会限制有效负载大小并且您的消息可能无法发送，或者 - 在多次调用的情况下 - 正如您自己提到的那样，您必须处理有错误和重试（基本上是在做[WS-ReliableMessaging](http://en.wikipedia.org/wiki/WS-ReliableMessaging)）。

因此，也许，您可以尝试更改执行相应呼叫的方式，而不是专注于通常呼叫的消息，并且可以查看[带有 WCF的](http://weblogs.asp.net/ricardoperes/archive/2009/05/14/using-mtom-with-wcf.aspx)[MTOM](http://en.wikipedia.org/wiki/Message_Transmission_Optimization_Mechanism)（消息传输优化机制），或者使用[流式传输](http://msdn.microsoft.com/en-us/library/ms733742.aspx)。

# c# - 试图从 asp.net 引用 javascript

> ID：12822146
> 
> 赞同：0
> 
> 时间：2012-10-10T14:43:48.620
> 
> 标签：c#, javascript, asp.net, visual-studio-2010

我在 ASP.net 和 C# 中有一个网页（如果有帮助的话，我正在使用 Visual Studio 2010），我想在按钮单击事件之后获得一个模式弹出框。我不能使用 AJAX，因为我不允许在服务器上安装扩展...所以我尝试了[yensdesign](http://yensdesign.com/2008/09/how-to-create-a-stunning-and-smooth-popup-using-jquery/)提供的 javascript 方法。

我遇到的问题是我设置的按钮没有做任何事情......我猜因为我是从 asp.net 网页而不是标准 html 调用它，所以我需要做一些额外的事情，但是谷歌搜索的一天，询问我认识的每个人，反复试验没有产生任何结果，所以我在这里......

我在名为 popupAdminTasks.js 的“脚本”文件夹中有以下内容：

```
/***************************/
//@Author: Adrian "yEnS" Mato Gondelle
//@website: www.yensdesign.com
//@email: yensamg@gmail.com
//@license: Feel free to use it, but keep this credits please!                  
/***************************/

//SETTING UP OUR POPUP
//0 means disabled; 1 means enabled;
var popupStatus = 0;

//loading popup with jQuery magic!
function loadPopup() 
{
    //loads popup only if it is disabled
    if (popupStatus == 0) {
        $("#backgroundPopup").css({
            "opacity": "0.7"
        });
        $("#backgroundPopup").fadeIn("slow");
        $("#popupContact").fadeIn("slow");
        popupStatus = 1;
    }
}

//disabling popup with jQuery magic!
function disablePopup() 
{
    //disables popup only if it is enabled
    if (popupStatus == 1) {
        $("#backgroundPopup").fadeOut("slow");
        $("#popupContact").fadeOut("slow");
        popupStatus = 0;
    }
}

//centering popup
function centerPopup() 
{
    //request data for centering
    var windowWidth = document.documentElement.clientWidth;
    var windowHeight = document.documentElement.clientHeight;
    var popupHeight = $("#popupContact").height();
    var popupWidth = $("#popupContact").width();
    //centering
    $("#popupContact").css({
        "position": "absolute",
        "top": windowHeight / 2 - popupHeight / 2,
        "left": windowWidth / 2 - popupWidth / 2
    });
    //only need force for IE6
    $("#backgroundPopup").css({
        "height": windowHeight
    });
}

//CONTROLLING EVENTS IN jQuery
$(document).ready(function () {

    //LOADING POPUP
    //Click the button event!
    $("#btnViewTimesheet").click(function () {
        //centering with css
        centerPopup();
        //load popup
        loadPopup();
    });

    //CLOSING POPUP
    //Click the x event!
    $("#popupBtnClose").click(function () {
        disablePopup();
    });
    //Click out event!
    $("#backgroundPopupAdminTasks").click(function () {
        disablePopup();
    });
    //Press Escape event!
    $(document).keypress(function (e) {
        if (e.keyCode == 27 && popupStatus == 1) {
            disablePopup();
        }
    });

}); 
```

那太好了。然后我有我的 css 文件，其中包含所有正常的东西，底部的附加内容如下：

```
/* POPUP BOX  
----------------------------------------------------------*/
#backgroundPopup
{  
    display:none;  
    position:fixed;  
    _position:absolute; /* hack for internet explorer 6*/  
    height:100%;  
    width:100%;  
    top:0;  
    left:0;  
    background:#000000;  
    border:1px solid #cecece;  
    z-index:1;  
} 

#popupAdminTasks
{  
    display:none;  
    position:fixed;  
    _position:absolute; /* hack for internet explorer 6*/  
    height:384px;  
    width:408px;  
    background:#FFFFFF;  
    border:2px solid #cecece;  
    z-index:2;  
    padding:12px;  
    font-size:13px;  
}  

#popupAdminTasks h1
{  
    text-align:left;  
    color:#6FA5FD;  
    font-size:22px;  
    font-weight:700;  
    border-bottom:1px dotted #D3D3D3;  
    padding-bottom:2px;  
    margin-bottom:20px;  
}  

#popupBtnClose
{  
    font-size:14px;  
    line-height:14px;  
    right:6px;  
    top:4px;  
    position:absolute;  
    color:#6fa5fd;  
    font-weight:700;  
    display:block;  
}  

#btnViewTimesheet
{  
    margin:100px;  
} 
```

精彩的。所以现在我们来看看实际的 aspx 文件......好吧，这有点棘手，因为显然我不只是在做一个测试项目，所以我没有一个 head 部分，我有一个 headcontent 部分等......无论如何，这里是相关的零碎物品：

```
<asp:Content ID="Content1" ContentPlaceHolderID="HeadContent" runat="server">
    <link rel="stylesheet" href="../Styles/AdminPage.css" type="text/css" media="screen" />
    <script src="http://jqueryjs.googlecode.com/files/jquery-1.2.6.min.js" type="text/javascript"></script>  
    <script src="../Scripts/popupAdminTasks.js" type="text/javascript"></script>
</asp:Content>
<asp:Content ID="Content2" ContentPlaceHolderID="MainContent" runat="server">
    <div id="btnViewTimesheet">
        <input type="submit" value="View/Edit Timesheet" />
    </div>
    <div id="popupAdminTasks" runat="server">
        <a id="popupBtnClose">X</a>
        <h1>What would you like to do?</h1>
        <p id="popupAdminTasksBody">
            <asp:ImageButton ID="imgBtnCalendar" runat="server" Height="70px" Width="65px"
                ImageUrl="~/Images/calendar.png" AlternateText="View/Edit Timesheet" />
        </p>
    </div>
    <div id="backgroundPopupAdminTasks">
    </div>
</asp:Content> 
```

所以......这一切都没有错误，但我按下按钮`btnViewTimesheet`并没有任何反应......有什么想法吗？我一直在想的事情是我在 C# 代码中没有点击事件，我原以为我需要这个，并指向该事件中的 js 代码，但我读过的所有内容和我已经读过的人说话告诉我不，我不应该需要这个，因为 javascript 应该这样做。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T14:58:04.287

> 我不能使用 AJAX，因为我不允许在服务器上安装扩展...

AJAX 没有安装在任何服务器上。它只是Javascript。我已经很多年没有使用过 ASP.Net AJAX 扩展了，所以我忘记了是否需要安装它或者只是进行 bin 部署。无论如何，利用“Ajax”并不依赖于任何扩展/库——它们使事情变得更容易，但它们不是“必需的”。

# #

*   你`id`的`<div />`不是输入
*   你`<input />`是一个提交，虽然你仍然可以使用它，但尝试一个按钮来让事情变得更容易

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T15:22:26.827

如果您执行以下操作会发生什么？

```
<asp:button runat="server" text="Click Me" OnClientClick="javascript:loadPopup()" id="myButton"></asp:button> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-12T14:39:14.180

问题是您的 jQuery 选择器中有错误的元素 ID。

您应该更改`backgroundPopup`为`popupAdminTasks`其他`popupContact`内容。

[http://jsfiddle.net/2mSkM/](http://jsfiddle.net/2mSkM/)

# grails - Grails / GORM 可以过滤没有 N+1 查询的关联结果吗？

> ID：12822149
> 
> 赞同：1
> 
> 时间：2012-10-10T14:43:57.390
> 
> 标签：grails, grails-orm, has-many

我有一个遗留模式，其中在 hasMany 关联的子端有有效的日期记录。在这种情况下，我希望从父对象的结果中排除结束日期的记录，并试图避免 N+1 查询解决方案。

我可以像这样过滤它们并生成一个适当的查询：

```
def companyStaffList = CompanyStaff.findAll ( [ max: params.max, sort: params.sort, order: params.order ] ) {
      companyID == params.id && 
      compRecords { effectiveDate < new Date() && endDate > new Date() }
} 
```

生成的查询具有连接和过滤器：

```
 select [ ...the base fields + the associated fields... ] from company_staff 
    this_ inner join person_compensation comprecord1_ on 
    this_.personID=comprecord1_.personID where 
(this_.companyID=? and ((comprecord1_.effectiveDate<? and comprecord1_.endDate>?))) 
    order by this_.lName asc limit ? 
```

不幸的是，一旦我开始访问关联的字段，我看到第二个查询不传播过滤条件：

```
select [ the associated fields ] from person_compensation 
comprecord0_ where comprecord0_.personID=? 
```

请告知是否有原则性的方法可以做到这一点，或者我只是要求太多。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T09:13:38.950

您正在访问子集合`compRecords`，对吗？

然后第一个查询只获取那些`CompRecord`符合搜索条件的 s。

想象一下`CompanyStaff staffA`，有一个`CompRecord`适合搜索，而一个不适合。该数据不适合完全填写`CompanyStaff.compRecords`。然后您开始访问`staffA.compRecords`集合，您还需要枚举那些`CompRecord`不适合查询的 s。

为了避免 N+1 读取，我会查询 child `CompRecord`。但是你将无法对`CompanyStaff`s 进行分页，而只能对`CompRecord`s 进行分页：

```
CompRecords.findAll ([max: params.max, sort: params.sort, order: params.order]) {
  effectiveDate < new Date() && endDate > new Date() &&
  staff {
    companyID == params.id
  }
} 
```

如果只`CompRecord`为 a获取一个是可以的`CompanyStaff`，您可以使用 HQL 获取一个包含`CompanyStaff`和`CompRecord`字段的无类型集合。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T07:25:58.943

您可以使用 Eager fetching 来避免 N+1。查看[GORM](http://www.grails.org/doc/latest/guide/GORM.html)文档，其中讨论“使用 Eager Fetching 进行查询”

# c# - 单击时不关闭的 ASP.NET MenuItem

> ID：12822151
> 
> 赞同：1
> 
> 时间：2012-10-10T14:44:16.857
> 
> 标签：c#, asp.net, menu

我在我的网站中使用 ASP.NET 菜单控件。如果用户单击具有子菜单的菜单项，我希望菜单保持打开状态并且页面不执行任何操作。这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T09:28:56.357

将菜单的 RenderingMode 属性设置为 List 会导致所需的行为。但是，这会打乱菜单的布局。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T23:04:38.437

将该`DisappearAfter`属性设置为-1，它将等待用户单击某处以关闭菜单。[请参阅文档](http://msdn.microsoft.com/en-us/library/ecs0x9w5%28v=vs.100%29.aspx)中的动态外观计时部分。

> 默认值为 500 毫秒。如果 DisappearAfter 的值设置为 0，则在 Menu 控件之外暂停会导致它立即消失。将该值设置为 -1 表示暂停时间应该是无限的，并且只有通过单击菜单控件之外的动态部分才会消失。

# drupal - 如何将 Nutch 和 Solr 集成到 Drupal 中？

> ID：12822152
> 
> 赞同：1
> 
> 时间：2012-10-10T14:44:20.447
> 
> 标签：drupal, solr, integration, nutch

我将我的 Drupal 网站配置为使用 Solr 实例（使用 Apache Solr 搜索集成模块），以便获得比 Drupal 提供的更好的搜索。此外，我希望我的网站在执行搜索时能够从许多其他网站找到结果，因此我配置了一个 Nutch 实例以与 Solr 实例一起使用（我在上面提到过）。现在，我可以通过我的 Solr 实例接口查看 Drupal 索引的数据和 Nutch 索引的数据。但问题是，在我的 Drupal 网站中执行搜索时，我看不到 Nutch 索引的任何数据。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T17:03:29.250

如果您使用 Drupal 7，[Sarnia 模块](http://drupal.org/project/sarnia)+[搜索 API](http://drupal.org/project/search_api) +[搜索 API Solr](http://drupal.org/project/search_api_solr)将允许您搜索和呈现来自任何 Solr 索引的数据（使用视图）。搜索 API 是 Apache Solr 搜索集成模块的替代方案。

# windows - 通过 API 以编程方式添加 EFS 数据恢复代理 (DRA) 证书

> ID：12822153
> 
> 赞同：0
> 
> 时间：2012-10-10T14:44:21.250
> 
> 标签：windows, group-policy, encrypting-file-system

我正在寻找一种以编程方式（任何语言）为 Windows 操作系统中的加密文件系统 (EFS) 添加数据恢复代理 (DRA) 证书的方法。

手动执行很容易：gpedit.msc - 安全设置 -> 公钥策略 -> 加密文件系统 -> 添加 DRA；

但我想自动化它（不使用 Active Directory 组策略！）。

命令行解决方案也是可以接受的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T12:32:54.937

解决方案是使用（本地）组对象策略 API 发布 MSDN 文档“[MS-GPEF]：组策略：加密文件系统扩展”（MS-GPEF）中描述的注册表项。必须创建两个主键 \EFS\!Blog 和 \EFS!EFBBlob。类似的解决方案可用于 Bitlocker。

备注： - MS-GPEF 注册表项必须根据 GPO 发布规则进行修改。直接插入会被操作系统自动移除；

# graph - Neo4j - 不返回起始节点

> ID：12822154
> 
> 赞同：1
> 
> 时间：2012-10-10T14:44:27.670
> 
> 标签：graph, neo4j, cypher

我在 Neo4j 中执行以下密码查询：

```
START a = node(4107) 
MATCH a-[:AttractionFor]->b-[r:Brother]-c-[:AttractionFor]->d 
WHERE (r.distance? <= 25)
RETURN distinct d 
```

这也返回 a 的值，我不需要。我试过了`a<>d`，`a.name <> b.name`但我得到了同样的结果。同样在 webadmin 中它什么也不返回（我使用 Everyman's PHP library for neo4j）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T07:57:47.867

据我所知，密码不会进入已经遍历的顶点。这意味着，如果您已在比赛部分说明

```
a-[:AttractionFor]->b-[r:Brother]-c-[:AttractionFor]->d 
```

比 D 永远不会是 A。你是否有可能具有相同名称/值的顶点？你能给我们提供图表数据/设计吗？

# ssh - 如何检测 ssh 密钥是否受密码保护？

> ID：12822160
> 
> 赞同：2
> 
> 时间：2012-10-10T14:44:52.503
> 
> 标签：ssh, ssh-keys

如果密钥受密码保护，是否可以仅从 ssh 密钥的 pub 部分检测？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T14:54:44.507

不，只有私钥被加密，公共部分完全不受影响。即使公钥包含有关私钥加密状态的信息，这也不可靠——私钥可以随时用新密码解密和加密。

# php - IRCBot 发送文件/DCC 文件传输

> ID：12822162
> 
> 赞同：1
> 
> 时间：2012-10-10T14:44:57.397
> 
> 标签：php, bots, irc, sendfile

我正在实现一个 IRCBot 来发送文件，但在这方面找不到任何东西，有没有人这样做过？

*   PHP是语言
*   Symfony 2 是框架
*   IRCBotBundle [https://github.com/whisller/IrcBotBundle](https://github.com/whisller/IrcBotBundle)我正在使用/修改

寻找从 IRCBot 向最终用户发送文件的实现。我见过一些提到 DCC 但没有提到 PHP

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T14:50:42.420

`IRC`是聊天协议而不是文件共享协议，但是对于文件共享，某些客户端（例如 mIRC）使用`DCC`（直接客户端到客户端）来发送任何文件。

这是使用命令完成的，例如`DCC SEND <filename> <ip> <port> <file size>`

这必须在您的机器人中实现（不是 IRC 直接支持的），因此您必须打开一个到其 IP 地址的套接字并使用`socket_send()`.

[http://www.php.net/manual/en/function.socket-send.php](http://www.php.net/manual/en/function.socket-send.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T14:55:20.767

这个 PHP Bot 实现支持 DCC：[http ://www.phpbots.org/](http://www.phpbots.org/)

您要么需要将您的工作建立在该基础之上，要么阅读代码并挑选您感兴趣的部分。

# java - EMR 上的 k-means 异常：java.lang.IllegalArgumentException：此文件系统对象不支持访问请求路径

> ID：12822167
> 
> 赞同：0
> 
> 时间：2012-10-10T14:45:15.527
> 
> 标签：java, hadoop, mahout, amazon-emr, emr

我正在尝试从 mahout 在 EMR 上运行 k-means 算法。输入矢量化数据位于 S3。
我的命令：

```
elastic-mapreduce --jar s3://mybucket/dir/mahout-examples-0.8-SNAPSHOT-job.jar --main-class org.apache.mahout.driver.MahoutDriver --arg kmeans --arg -i --arg s3://mybucket/dir/normalized-bigram/tfidf-vectors --arg -c --arg /dir/kmeans-centroids --arg -o --arg /dir/kmeans-clusters --arg -cd --arg 1.0 --arg -k --arg 20 --arg -x --arg 20 --arg -cl --arg -dm --arg org.apache.mahout.common.distance.SquaredEuclideanDistanceMeasure -j $JOBID --step-name "kmeans-euclidean-distance-measure" 
```

我有例外：

```
Exception in thread "main" java.lang.IllegalArgumentException: This file system object (hdfs://10.229.34.19:9000) does not support access to the request path 's3://hdp.wtest/wiki/normalized-bigram/tfidf-vectors' You possibly called FileSystem.get(conf) when you should have called FileSystem.get(uri, conf) to obtain a file system supporting your path.
    at org.apache.hadoop.fs.FileSystem.checkPath(FileSystem.java:384)
    at org.apache.hadoop.hdfs.DistributedFileSystem.getPathName(DistributedFileSystem.java:129)
    at org.apache.hadoop.hdfs.DistributedFileSystem.getFileStatus(DistributedFileSystem.java:513)
    at org.apache.mahout.clustering.kmeans.RandomSeedGenerator.buildRandom(RandomSeedGenerator.java:71)
    at org.apache.mahout.clustering.kmeans.KMeansDriver.run(KMeansDriver.java:94)
    at org.apache.hadoop.util.ToolRunner.run(ToolRunner.java:65)
    at org.apache.mahout.clustering.kmeans.KMeansDriver.main(KMeansDriver.java:48)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.apache.hadoop.util.ProgramDriver$ProgramDescription.invoke(ProgramDriver.java:68)
    at org.apache.hadoop.util.ProgramDriver.driver(ProgramDriver.java:139)
    at org.apache.mahout.driver.MahoutDriver.main(MahoutDriver.java:195)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.apache.hadoop.util.RunJar.main(RunJar.java:187) 
```

我的命令有什么问题？

# javascript - Javascript 替换 iso-8859-1 中的变音符号

> ID：12822169
> 
> 赞同：0
> 
> 时间：2012-10-10T14:45:19.460
> 
> 标签：javascript, diacritics, iso-8859-1

我正在尝试用普通的**javascript**替换一些变音符号（重音）字符。但我不知道该怎么做。我的问题是我们使用字符集**iso-8859-1**。如果我们使用 utf-8，它会更容易。我正在尝试在此处制作类似于[此脚本的内容](https://stackoverflow.com/questions/8186302/javascript-removing-accents)（以 UTF-8 编码工作）。

谁能帮我解决这个问题？如果我能拥有**从“é”到“e”的替换**语法，那么剩下的就可以了。我用 \xE9 尝试了一些东西，但对正则表达式不太熟悉，我无法让它工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T13:09:51.183

最后我找到了这个正则表达式语法：

```
 Recherche = Recherche.replace(/À|Á|Â|Ã|Ä|Å/g, "A")
                             .replace(/à|á|â|ã|ä|å/g, "a")
                             .replace(/Ò|Ó|Ô|Õ|Õ|Ö|Ø/g, "O")
                             .replace(/ò|ó|ô|õ|ö|ø/g, "o")
                             .replace(/È|É|Ê|Ë/g, "E")
                             .replace(/è|é|ê|ë/g, "e")
                             .replace(/Ç|ç/g, "c")
                             .replace(/Ì|Í|Î|Ï/g, "I")
                             .replace(/ì|í|î|ï/g, "i")
                             .replace(/Ù|Ú|Û|Ü/g, "U")
                             .replace(/ù|ú|û|ü/g, "u"); 
```

# mysql - 如何将多行合并为一行？

> ID：12822173
> 
> 赞同：4
> 
> 时间：2012-10-10T14:45:34.380
> 
> 标签：mysql

> **可能重复：**
> [将多个子行合并为一行 MYSQL](https://stackoverflow.com/questions/1067428/combine-multiple-child-rows-into-one-row-mysql)

我有下表，

```
count     | inventory_id | resource_id | id
---------+-----------+----------------------
10        | 1            | 1           | 1
20        | 2            | 1           | 2
30        | 1            | 2           | 3
40        | 2            | 2           | 4 
```

我想合并resource_id 相等的行，并且还想根据inventory_id 为每个计数提供别名。我需要为inventory_id = 1的计数和inventory_id = 2的“资源2”提供别名“资源1”

需要的输出：

```
Resource 1| Resource 2    |resource_id 
---------+-----------+-----------------
10        | 20            | 1             
30        | 40            | 2 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T14:47:47.930

```
SELECT
  MAX(CASE WHEN inventory_id = 1 THEN `count` END) AS 'Resource 1',
  MAX(CASE WHEN inventory_id = 2 THEN `count` END) AS 'Resource 2',
  resource_id
FROM table 
GROUP BY resource_id 
```

## [SQL 小提琴演示](http://www.sqlfiddle.com/#!2/571dc/3)

这应该给你：

```
RESOURCE 1  RESOURCE 2  RESOURCE_ID
10             20                1
30             40                2 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T15:04:05.367

尝试

 ~~~~```
SELECT
  resource_id,
  MAX(CASE WHEN inventory_id = 1 THEN `count` ELSE NULL END) AS 'Resource 1',
  MAX(CASE WHEN inventory_id = 2 THEN `count` ELSE NULL END) AS 'Resource 2'
FROM table1
GROUP BY resource_id 
```

# [SQLFiddle 演示](http://sqlfiddle.com/#!2/b4aba/5)~~  ~~但是如果你有未知的值`inventory_id`不仅仅是（`1 and 2`），更好地使用`PreparedStatement`

```
SET @sql = NULL;
SELECT
  GROUP_CONCAT(DISTINCT
    CONCAT(
      'MAX(CASE WHEN inventory_id = ',
      inventory_id,
      ' THEN `count` ELSE NULL END) AS ''RESOURCE ',
      inventory_id, ''''
    )
  ) INTO @sql
FROM table1;

SET @sql = CONCAT('SELECT resource_id, ', @sql, ' 
                   FROM table1 
                   GROUP BY resource_id');

PREPARE stmt FROM @sql;
EXECUTE stmt;
DEALLOCATE PREPARE stmt; 
```

# [SQLFiddle 演示](http://sqlfiddle.com/#!2/b4aba/24)~~~~

# wpf - 如何阻止 WPF Grid 在子元素上自动插入边距

> ID：12822177
> 
> 赞同：5
> 
> 时间：2012-10-10T14:45:47.857
> 
> 标签：wpf, grid, visual-studio-2012, margin

我在 Visual Studio 2012 和 WPF 上遇到了最烦人的问题，我希望能得到一些帮助。我有一个带有子元素的简单网格，比如 TextBlocks，以及网格的单元格。TextBlocks 被设置为在单元格内相对定位（例如，使用 Left 的 Horizo​​ntalAlignment）。一切都很好，直到我敢于调整网格的列或行的大小。然后，Visual Studio 插入 Margin 和 Width/Height 属性以与父/子元素的结果位置保持一致。这一切都在静默中发生，如果我决定进一步减小列的大小，直到后来我才注意到它，突然 TextBlock 被剪裁，因为它的 Margin 属性被插入。我必须遍历每个子元素并手动删除这些额外的属性。在我当前的项目中，我不得不这样做近 100 次，而且我在网上找不到任何东西来弄清楚如何告诉 Visual Studio 退出并停止采取这些窃取我试图实现的漂亮格式的自由. 这是一个供参考的代码片段。但这发生在我项目中许多不同的网格实例上。

```
<Grid  Canvas.Left="435" Canvas.Top="138" Height="61" Width="192">
    <Grid.ColumnDefinitions>
        <ColumnDefinition Width="11*"/>
        <ColumnDefinition Width="21*"/>
    </Grid.ColumnDefinitions>
    <Grid.RowDefinitions>
        <RowDefinition Height="1*"/>
        <RowDefinition Height="1*"/>
    </Grid.RowDefinitions>

    <TextBlock Grid.Row="0" Grid.Column="0" Text="Subtotal:" HorizontalAlignment="Right" VerticalAlignment="Center"  />
</Grid> 
```

...在调整第 0 列的大小之后：

```
<TextBlock Grid.Row="0" Grid.Column="0" Text="Subtotal:" HorizontalAlignment="Right" VerticalAlignment="Center" Height="16" Margin="0,7" Width="47"  /> 
```

当然还有其他人遇到过这个问题。请帮忙！

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T14:50:02.077

对于 XAML 设计器中奇怪的自动行为，您无能为力。作为明智的通用词，您通常最好使用 XAML 文本编辑器而不是设计器来编辑您的 xaml。

幸运的是，在您的特殊情况下，有一个解决方案。该行为取决于您用鼠标准确抓取该列的位置：

如果您在顶部抓住它，它将设置新的边距。 ![抓住顶部](../Images/99692236cac5b50c750021536c827ce1.png)

如果您在下方（在线）抓住它，它将不会设置/更改边距。 ![抓住底部](../Images/b25bfb4f75affeb641798fcd45f1f175.png)

**更新：此功能在 VS 2012 中不再存在。**

您现在可以使用`Ctrl`和/或`Shift`键更改列调整大小的行为。但是没有一种行为会产生你所追求的结果。

如果网格中的所有项目都没有 a`Width`和 a`Margin`集，最好的办法是在没有任何修饰键的情况下调整列的大小（在 VS2012 中，它不应该在视觉上破坏布局，它应该只添加不必要`Margin`的`Height`和`Width`属性）和然后在*Document Outline*窗口中多选所有元素并在*Properties*视图中单击*Set To Auto*按钮。这将删除不必要的属性。

![设置为自动](../Images/b76e829f27dbe870da14cb3bb91124da.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T15:20:23.083

简单的解决方案就是不要将设计图面用于视觉参考之外的任何东西。

我使用文本编辑器，否则您几乎无法控制 XAML - 我发现在设计表面上拖放控件会自动设置边距和对齐等非常烦人

我看到它的方式 - XAML 中的所有内容都应该自动缩放 - 唯一需要在某物上设置绝对值的时候是当你绝对需要它的大小时......即使那样，通过样式（例如，标准按钮不需要缩放到整个应用程序的宽度 - 所以明确的大小是可以的......），边距应该始终用于设置项目的**边距**，而不是用于布局（这是设计师似乎认为还可以）

我使用设计图面作为参考——你也可以单击一个元素，XAML 代码将同步到你单击的项目（大多数情况下）——但是看在上帝的份上，不要拖动任何东西，否则你会进入一个受伤的世界！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-15T19:10:55.437

我为所有元素的所有边设置边距，如果它们被重置，我会再次设置它们。如果没有设置边距，XAML 设计器会同时插入边距和跨度，这会破坏一切。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-12T16:07:13.743

我知道这个问题很老了。但我找到了适用于任何版本的 Visual Studio 的简单解决方案。我认为这对面临同样问题的其他人可能非常有用。

先从上往下拖，如下图：

![在此处输入图像描述](../Images/62e562ad1c1ad386d9aea31eff9ab7ad.png)

离开鼠标并记下每列的列宽。

按 Ctrl+Z 撤消。

然后从 XAML 更改列宽。

现在您将获得适当大小的列，并且不会在网格内的任何组件中添加任何额外的边距或高度或宽度。

# ajax - 在打开缓存的情况下在 Magento 中设置会话变量

> ID：12822178
> 
> 赞同：2
> 
> 时间：2012-10-10T14:45:49.430
> 
> 标签：ajax, magento, session-variables

我正在尝试设置会话变量，以便每个会话仅出现一次弹出框。

为此，我创建了一个在有​​人关闭弹出窗口时通过 AJAX 调用的模块。模块的控制器设置一个会话变量。控制器如下所示：

```
class Company_Popup_IndexController extends Mage_Core_Controller_Front_Action {
    public function indexAction() {
        Mage::getSingleton('core/session')->setNewsletterPopup('yes');
    }
} 
```

超级简单。

然后，在该块中，我检查是否设置了会话变量（或者用户是否已登录）：

```
class Company_Popup_Block_Popup extends Mage_Core_Block_Template
{
    public function displayPopup(){
        if(!$this->helper('customer')->isLoggedIn() && Mage::getSingleton('core/session')->getNewsletterPopup() == null){
            return true;
        }
        else{
            return false;
        }
    }
    public function getSessionData(){
        return Mage::getSingleton('core/session');
    }
} 
```

然后模板文件调用 displayPopup 方法并显示或不显示时事通讯弹出窗口。

这一切都很完美......直到我打开缓存，此时会话变量没有设置或至少在块/模板文件中不可访问。

我在这里错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T16:27:07.980

我想这个块正在被缓存，这意味着更新的会话变量没有被访问，而是返回了被缓存的原始调用。

您应该尝试禁用块内的缓存。

尝试将其添加到您的块中：

```
 public function getCacheLifetime() { return null; } 
```

这将禁用块上的缓存，并应允许正确调用它。

# android - 访问被引用项目引用的库的资源

> ID：12822183
> 
> 赞同：0
> 
> 时间：2012-10-10T14:46:17.383
> 
> 标签：android, unit-testing, android-resources, android-library

我有一个测试项目 Y 的测试项目 X。项目 Y 有库 Z 作为参考。图书馆 Z 有一个原始资源 R1，我正在尝试打开它，但我一直找不到资源。原始资源位于库内的 res/raw 文件夹中。

我用相关的 packageManager 尝试了 openRawResource，但它似乎没有帮助。任何的想法？我的资源分配是否存在逻辑错误？

没用：

```
PackageManager pmMgr = getInstrumentation().getTargetContext().getPackageManager();
Resources rMgr = pmMgr.getResourcesForApplication("PROJECT.Y.PACKAGE");
InputStream is = rMgr.openRawResource(package.library.z.raw.R1); 
```

也没有

```
PackageManager pmMgr = getInstrumentation().getContext().getPackageManager();
Resources rMgr = pmMgr.getResourcesForApplication("PROJECT.Y.PACKAGE");
InputStream is = rMgr.openRawResource(package.library.z.raw.R1); 
```

PS 我验证了 R1 也被包装到 res/raw 下的引用项目 (Y) 的 .apk 中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T07:05:15.023

回答我自己的问题。虽然我的问题已经过去了一天。我已经在这个问题上苦苦挣扎了几天。

解决方案非常愚蠢。较新版本的 ADT 要求您使用项目库来调用资源，即使它们来自引用的库。例如，工作代码示例是：

```
PackageManager pmMgr = getInstrumentation().getTargetContext().getPackageManager();
Resources rMgr = pmMgr.getResourcesForApplication("PROJECT.Y.PACKAGE");
InputStream is = rMgr.openRawResource(package.library.Y.raw.R1); 
```

唯一的变化是在最后一行，Y 而不是 Z。

# android - 是否可以使用 NDK 创建 UI 元素？- Android 文档中缺乏规范

> ID：12822185
> 
> 赞同：14
> 
> 时间：2012-10-10T14:46:34.200
> 
> 标签：android, user-interface, android-ndk, native, native-activity

阅读相关文档后，我不知道是否可以仅使用使用 NDK 编译的 C++/C 代码来创建用于获取用户输入的按钮或其他 UI 元素之类的东西。

当我想处理需要保持焦点的“窗口”或活动时没有问题，但我不知道如何构建带有回调和用户输入元素的 UI。

奇怪的是有一个窗口框架，但没有任何 UI 元素回调的痕迹。

我可以使用 NDK 构建触摸按钮或虚拟游戏手柄吗？

* * *

我很欣赏我们的努力和我们越来越接近我的观点的事实，但显然我对自己的解释不够好。

我在[这里找到了这张图片](https://stackoverflow.com/questions/12687575/touch-buttons-and-controllers-with-the-ndk-and-native-activities-only-c-c) ![在此处输入图像描述](../Images/e5cdaf1ac45b0300fba246c2cbecae46.png)

现在我的问题和这个问题的重点是：

假设我可以放置和绘制这个虚拟操纵杆，我如何才能只检测运动并像Android`Joystick.onUp`或`Joystick.onDown`使用 Android 一样进行回调并且只使用 NDK？

如果 NDK 没有此类回调，我应该每次都检测 [x,y] 位置，将其与操纵杆的位置进行比较，存储上一个位置，比较上一个位置和下一个位置找到方向？

由于传感器以非常快的速度抛出事件，我认为仅考虑原始 X、Y 对我自己构建它最终会导致控制系统效率非常低，因为它不会在操作系统级别使用适当的传感器呼叫。

根据 NativeActivity 示例，还不清楚如何处理多个触摸点，例如我如何同时处理 2 个触摸事件？

只需考虑上面的图像，并考虑只有 1 个接触点的 x、y 坐标，以及如何以 NDK 支持的有效方式解决这个问题。

谢谢。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-10T14:52:25.450

你当然可以。阅读从 C(++) 调用 Java，并调用相应的 Java 函数 - 一个一个地构造 UI 元素（布局、按钮等），或者加载一个 XML 布局。没有特定于 C 的接口，但可以调用 Java 接口。

除非它是一款游戏，并且您打算通过 OpenGL ES 进行自己的绘图。我不确定你是否可以混合搭配。

在 a`NativeActivity`中，您仍然可以获得指向 Java Activity 对象的指针并调用其方法 - 它是通过结构作为参数传递给您的结构的`clazz`成员。取那个指针，取同一个指针，然后分配一个布局。`ANativeActivity``android_main``android_app``JNIEnv*`

这将如何与 OpenGL 绘图互操作，我不确定。

编辑：关于把你自己的输入处理放在一起。关键回调`onInputEvent(struct android_app* app, AInputEvent* event)`在`android_app`结构内。将您的回调放在那里，Android 会在适当的时候调用它。用于`AInputEvent_getType(event)`检索事件类型；触摸事件的类型为 AINPUT_EVENT_TYPE_MOTION。

EDIT2：这是一个抓取触摸事件的最小本机应用程序：

```
#include <jni.h>
#include <android_native_app_glue.h>
#include <android/log.h>

static int32_t OnInput(struct android_app* app, AInputEvent* event)
{
    __android_log_write(ANDROID_LOG_ERROR, "MyNativeProject", "Hello input event!");
    return 0;
}

extern "C" void android_main(struct android_app* App)
{
    app_dummy();
    App->onInputEvent = OnInput;

    for(;;)
    {
         struct android_poll_source* source;
         int ident;
         int events;

         while ((ident = ALooper_pollAll(-1, NULL, &events, (void**)&source)) >= 0)
         {
             if(source != NULL)
                 source->process(App, source);

             if (App->destroyRequested != 0)
                     return;
         }
    }

} 
```

当然，您需要围绕它添加一个项目，包括清单、Android.mk 和所有内容。Android.mk 将需要以下内容作为最后一行：

```
$(call import-module,android/native_app_glue) 
```

这`native_app_glue`是一个静态库，为通常通过 Java 使用的 API 提供一些 C 桥接。

你也可以在没有胶水库的情况下做到这一点。但是你需要提供你自己的 function`ANativeActivity_onCreate`和一堆其他的回调。`android_main`/`android_app`组合是胶水库定义的接口。

编辑：对于触摸坐标，使用`AMotionEvent_getX/Y()`，将事件对象作为第一个参数传递，将指针的索引作为第二个参数传递。用于`AMotionEvent_getPointerCount()`检索指针（触摸点）的数量。这是您对多点触控事件的本机处理。

> 我应该每次都检测 [x,y] 位置，将其与操纵杆的位置进行比较，存储上一个位置，比较上一个位置和下一个位置以获得方向？

简而言之，是的，你是。虚拟操纵杆没有内置平台支持；您处理触摸和坐标，并将其转化为应用程序的 UI 隐喻。这几乎就是编程的精髓。

不是“每次”——只有当它发生变化时。Android 是一个事件驱动的系统。

现在，关于您的“我想要它在操作系统级别”的情绪。它在很多层面上都是错误的。首先，操作系统不欠你任何东西。操作系统就是它，接受它或离开它。其次，不愿意付出努力（也就是懒惰）在软件社区中通常是不受欢迎的。第三，操作系统代码仍然是代码。将某些东西移入操作系统可能会提高您的效率，但您为什么认为它会让用户察觉到差异？我们正在谈论的是触摸处理 - 不是特别占用 CPU 的任务。您是否真的构建了一个应用程序、配置文件并发现它的性能不足？在你这样做之前，永远不要猜测瓶颈在哪里。这个词是“过早优化”，这是每个人和他们叔叔的猫都会警告你的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-06-23T17:09:53.570

[Rawdrawandroid](https://github.com/cnlohr/rawdrawandroid)显示没有什么是不可能的。使用它，您可以完全用 C/C++ 编写 UI 和处理 UI 事件。

**注意：**不会使用 java、classes.dex、字节码。

示例应用：[https ://play.google.com/store/apps/details?id=org.cnlohr.colorchord](https://play.google.com/store/apps/details?id=org.cnlohr.colorchord)

请阅读 rawdraw 开发者如何处理常见情况：

**使用此框架，您将获得：**

> *   制作一个支持 OpenGL ES 的窗口
> *   加速度计/陀螺仪输入，多点触控
> *   用于按键输入的 android 键盘
> *   能够将资产文件存储在您的 APK 中并使用 AAssetManager 读取它们
> *   权限支持使用声音之类的东西。[https://github.com/cnlohr/cnfa](https://github.com/cnlohr/cnfa)中的示例
> *   直接访问 USB 设备。[https://github.com/cnlohr/androidusbtest](https://github.com/cnlohr/androidusbtest)中的示例

**NDK UI 可以用 java 以外的方式编写。**

> 这一点也必须做一些事情来坚持互联网上所有那些在 Stack Overflow 问题上发布“那是不可能的”或“你做错了”的 Luddite ......在 JNI 中请求权限“哦，你有在 Java 中做到这一点”或其他类似的愚蠢的东西。我对你对什么是可能的或不可能的意见完全不感兴趣。这是计算机科学。没有限制。我可以做任何我想做的事。这只是一点点。你不拥有我。

**您可以从 C 访问 android api，就像 java 可以：**

> PS如果你想要一堆例子来说明如何在 Android 上用 C 语言做很多你“需要”java 的事情，滚动到这个文件的底部：[https ://github.com/cntools/rawdraw/blob/ master/CNFGEGLDriver.c](https://github.com/cntools/rawdraw/blob/master/CNFGEGLDriver.c) - 它展示了如何使用 JNI 将大量内容编组到 Android API 或从 Android API 编组，而无需跳回 Java/Kotlin 领域。

# java - jsp中的数据池

> ID：12822186
> 
> 赞同：-1
> 
> 时间：2012-10-10T14:46:44.810
> 
> 标签：java, database, jsp, hosting

您好，我在没有使用 Servlets 的情况下用纯 JSP 开发了一个小型网站。我在 Eatj.com 上托管了该网站。所有网页都运行正常。但是数据库没有连接。我的数据库在 MS-Access 中，我使用的是简单的 JDBC： ODBC 连接。在互联网上进行研究后，我发现我需要使用 DBConnector 来汇集我的数据。我是汇集我的新手，我试过但徒劳无功，所以我能得到任何指导吗？

我的jsp代码：

```
<body>
 <%@page import="java.sql.*"%>
  <%@page import ="javax.sql.*"%>
 <%
 String name=request.getParameter("name");
String email=request.getParameter("email");
String comment=request.getParameter("comment");
try{
Class.forName("sun.jdbc.odbc.JdbcOdbcDriver");
DBConnector dbConnector= DBConnector.getInstance("jdbc:odbc://localhost/prakashd22?autoReconnect=true","prakashd22","*******");
Connection con = dbConnector.getConnection();
ResultSet rs = null;

Statement st = con.createStatement();

String sql = ("INSERT INTO feedback VALUES ('" + name + "','" + email + "','"+ comment +"') ");
st.executeUpdate(sql);
rs.close();
st.close();
con.close();
}
catch(Exception e){}
%>
<script language="javascript">
alert("Thank you for your feedback");
</script>
<jsp:include page="../page/feed.jsp"/>
</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T15:19:34.273

看看一些旨在解决这个问题的开源替代方案。例如：[http ://commons.apache.org/dbcp/](http://commons.apache.org/dbcp/)

查看一些代码示例以激发您的灵感：http: [//svn.apache.org/viewvc/commons/proper/dbcp/trunk/doc/](http://svn.apache.org/viewvc/commons/proper/dbcp/trunk/doc/)

最后，我建议在 JSP 中放置尽可能少的代码并将其移至某个类。这样代码将更容易测试、重用和维护。

# c# - c#中的参数

> ID：12822193
> 
> 赞同：0
> 
> 时间：2012-10-10T14:47:09.230
> 
> 标签：c#, parameters, casting

我有一些正在传递的参数，但有一些转换问题，我想知道最好的方法是什么。

```
ReportExecution2005.ParameterValue[] parameters
parameters[0].Label = "reportID";
parameters[0].Value = "5";   /* I want to pass a variable here not an actual string value -- I want it to be of type int. I tried to cast with no luck*/
parameters[1].Label = "ReportName";
parameters[1].Value = reportName;
parameters[2].Value = reportID.ToString; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-10T14:50:46.730

取你的 int 变量，`.ToString()`最后做。这将把它变成一个字符串。您不能将 an`int`转换为 a`string`因为 - 正如评论所言 - 它们之间没有隐式转换。

# firefox - Firefox：右键单击在新选项卡中打开链接不起作用

> ID：12822202
> 
> 赞同：0
> 
> 时间：2012-10-10T14:47:44.823
> 
> 标签：firefox

一些从中午之后 Firefox 右键单击​​“在新选项卡中打开链接”不起作用

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T16:33:12.050

它似乎与 Firebug 更新 1.10.4 有关 - 重新启动 Firefox 应该会有所帮助。

# cuda - 英伟达 OptiX 几何组

> ID：12822205
> 
> 赞同：1
> 
> 时间：2012-10-10T14:47:55.260
> 
> 标签：cuda, nvidia, raytracing, optix

您好，我正在使用 Nvidia OptiX 创建 RayTracer。我使用示例程序“sample0”和“tutorial”来设置一个简单的跟踪器。

在我的 C++ 代码中，我设置了 Everything：

```
this->buffer_height  = 512u;
this->buffer_width = 512u;
char path_to_ptx[512];
_context = _context->create();
_context->setRayTypeCount( 1 );
_context->setEntryPointCount( 1 );
_context->setStackSize( 4640 );
_context["radiance_ray_type"]->setUint( 0 );
_context["scene_epsilon"]->setFloat( 1.e-3f );
_context["result_buffer"]->set( _context->createBuffer( RT_BUFFER_OUTPUT, RT_FORMAT_FLOAT4, this->buffer_width, this->buffer_height) );

sprintf( path_to_ptx, "%s/%s", projectPath, "RayTracer_generated_draw_color.cu.ptx" );
_context->setRayGenerationProgram( 0, _context->createProgramFromPTXFile( path_to_ptx, "draw_solid_color" ) );
_context["draw_color"]->setFloat( 0.462f, 0.725f, 0.0f, 1.0f );
_context["eye"]->setFloat( 0.0f, 0.0f, 5.0f );

_context->setMissProgram( 0,  _context->createProgramFromPTXFile( path_to_ptx, "miss" ) );
_context["bg_color"]->setFloat( 1.0f, 0.0f, 0.0f, 1.0f );

sprintf( path_to_ptx, "%s/%s", projectPath, "RayTracer_generated_box.cu.ptx" );
Program box_bounds = _context->createProgramFromPTXFile( path_to_ptx, "box_bounds" );
Program box_intersect = _context->createProgramFromPTXFile( path_to_ptx, "box_intersect" );

sprintf( path_to_ptx, "%s/%s", projectPath, "RayTracer_generated_draw_color.cu.ptx" );

// This block must be full there. It is not possible just to create a geometry and not attach a program to it this would lead the program to crash when _context->compile();
Geometry gbox = _context->createGeometry();
gbox->setPrimitiveCount( 1u );
gbox->setBoundingBoxProgram( box_bounds );
gbox->setIntersectionProgram( box_intersect );
gbox["boxmin"]->setFloat( -2.0f, 0.0f, -2.0f );
gbox["boxmax"]->setFloat(  2.0f, 7.0f,  2.0f );

Material box_matl = _context->createMaterial();
Program box_ch = _context->createProgramFromPTXFile( path_to_ptx, "closest_hit_radiance0" );
box_matl->setClosestHitProgram( 0, box_ch );

GeometryInstance geomIns = _context->createGeometryInstance( /* gbox, &box_matl, &box_matl+1 */ );
geomIns->setGeometry( gbox );
geomIns->setMaterialCount( 1u );
geomIns->setMaterial( 0, box_matl );

GeometryGroup geomGrp = _context->createGeometryGroup();
geomGrp->setChildCount( 1u );
geomGrp->setChild( 0, geomIns );
geomGrp->setAcceleration( _context->createAcceleration("NoAccel","NoAccel") );
//_context["target"]->set( geomGrp );

_context->validate();
_context->compile();
_context->launch( 0, buffer_width, buffer_height );

this->imageData = _context["result_buffer"]->getBuffer()->map();
this->vboId = 0;
rtBufferGetGLBOId( _context["result_buffer"]->getBuffer()->get() , &this->vboId );

RTsize buffer_width_tmp, buffer_height_tmp;

rtBufferGetSize2D( _context["result_buffer"]->getBuffer()->get() , &buffer_width_tmp , &buffer_height_tmp );
this->width  = static_cast<GLsizei>(buffer_width_tmp);
this->height = static_cast<GLsizei>(buffer_height_tmp); 
```

我的 .cu 程序如下所示：

```
#include <optix.h>
#include <optixu/optixu_math_namespace.h>
#include "commonStructs.h"

using namespace optix;

// Variables of Context

rtDeclareVariable( unsigned int, radiance_ray_type, , );
rtDeclareVariable( float, scene_epsilon, , );
rtDeclareVariable( rtObject, target, , );

rtBuffer<float4, 2> result_buffer;

// Variables of RayGenerationProgram
rtDeclareVariable( float3, eye, , );
rtDeclareVariable( float4, draw_color, , );

// Globals
rtDeclareVariable( PerRayData_radiance, prd_radiance, rtPayload, );
rtDeclareVariable( uint2, launch_index, rtLaunchIndex, );
rtDeclareVariable( uint2, launch_dim,   rtLaunchDim, );
rtDeclareVariable( float3, shading_normal,   attribute shading_normal, ); 

RT_PROGRAM void draw_solid_color()
{
    float2 d = make_float2(launch_index) / make_float2(launch_dim) * 2.f - 1.f;

float3 U,V,W;
U.x = 1.0; U.y = 0.0; U.z = 0.0;
V.x = 0.0; V.y = 1.0; V.z = 0.0;
W.x = 0.0; W.y = 0.0; W.z = -1.0;

// Calc the ray Direction
float3 ray_origin = eye;
float3 ray_direction = normalize( d.x*U + d.y*V + W );

// shoot the ray
optix::Ray ray(ray_origin, ray_direction, radiance_ray_type, scene_epsilon );

// Add ray Data
PerRayData_radiance prd;
prd.importance = 1.f;
prd.depth = 0;

//rtTrace(target, ray, prd);

//result_buffer[launch_index] = make_float4(prd.result.x, prd.result.y, prd.result.z, prd.result.w);

result_buffer[launch_index] = make_float4( abs(d.x), abs(d.y), 0.0f, 1.0f );

}

//
// Returns solid color for miss rays
//
rtDeclareVariable(float4, bg_color, , );
RT_PROGRAM void miss()
{
  prd_radiance.result = bg_color;
}

//
// Returns shading normal as the surface shading result
// 
RT_PROGRAM void closest_hit_radiance0()
{
    float3 res = normalize(rtTransformNormal(RT_OBJECT_TO_WORLD, shading_normal))*0.5f + 0.5f;
    float4 result;
    result.x = res.x;
    result.y = res.y;
    result.z = res.z;
    result.w = 1.0f;
    prd_radiance.result = result;
} 
```

就像我发布的那样，它工作正常并且可以看到彩色图片，但您可能已经注意到 //_context["target"]->set(geomGrp); 在 C++ 代码中。如果我取消注释程序在 _context->compile(); 中出现异常；

Box Program 与所有示例中的相同。

当我想将目标设置为 _context 时，有谁知道出了什么问题。

_context 的类型与 #include 类似。

最好的祝福

编辑：了解有关异常的更多信息：

```
_context->compile(); 
```

是一个捷径

```
checkError( rtContextCompile( m_context ) ); 
```

在 optixx_namespace.h 中 checkError 检查的返回结果是 RT_ERROR_INVALID_VALUE 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-05-28T19:16:01.383

幸运的是我可以自己解决这个问题。我的问题是我有一个旧安装的 CUDA 3.2 和 CUDA 5.0 并排运行。

# excel - Excel 中的 If 语句 - Access DB 女士

> ID：12822215
> 
> 赞同：0
> 
> 时间：2012-10-10T14:48:25.853
> 
> 标签：excel, ms-access

任何人都可以建议以下 IF 语句的语法，

```
IIf
  (  Cur_Insert_Cost,
     Cur_Insert_Cost/Cur_Insert_Edges,
     Cur_Regrindable_Cost/(Cur_Regrinds_Possible+1)
   ) AS Cur_Cost_Edge_Regrind 
```

以上行来自带有 Ms-Access DB 的 Excel 报告

条件部分没看懂……！！！

Cur_Insert_Cost、Cur_Insert_Edges、Cur_Regrindable_Cost ...等是列名

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T14:53:21.227

IIF 是一个三元运算符。它由逗号分隔的三部分组成

```
iif(expression, truepart, falsepart) 
```

在您的情况下，这意味着：

```
if  Cur_Insert_Cost is not zero then 
    return the result of the expression Cur_Insert_Cost/Cur_Insert_Edges
else
    return the result of the expression Cur_Regrindable_Cost/(Cur_Regrinds_Possible+1) 
```

结果将在查询中命名为 Cur_Cost_Edge_Regrind

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T14:53:23.730

测试是 Cur_Insert_Cost 是否被视为空的 false 或任何 Access 被视为 false。

所以这可能意味着 Cur_Insert_Cost = NULL, 0, '', false （我想我忘记了一些替代方案）

如您所见，第一部分使用 is 和 IIRC Cur_Insert_Cost 应用于 NULL 将给出异常（但这只是我的记忆）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T14:59:56.880

该声明说 column 的`Cur_Cost_Edge_Regrind`值为：

*   `Cur_Insert_Cost/Cur_Insert_Edges`if的结果`Cur_Insert_Cost`为 TRUE（或 1）
*   `Cur_Regrindable_Cost/(Cur_Regrinds_Possible+1)`if的结果`Cur_Insert_Cost`为 FALSE（或 0）

希望有帮助...

# android - 如何以同步方式与侦听器一起工作？

> ID：12822216
> 
> 赞同：4
> 
> 时间：2012-10-10T14:48:26.813
> 
> 标签：android, listener, synchronous

*如果我没有记错的话...*

如果您启动侦听器，您的代码将继续运行，并且当事件发生时它会触发侦听器。所以它是异步的。

我想做的是以这种方式包装整个代码，从外部代码来看它看起来像同步调用。

**之前（伪代码）**

```
listener:
   oh, we just read temperature value

listener launch:
   register listener for temperature
   continue running
   ... 
   // somewhere here the temperature is read so we can obtain the value
   ... 
```

**后**

先前代码的附加包装：

```
while (true)
  Thread.sleep(1000)
  if (is_temperature_read)
    break; 
```

并调用它：

```
temp = read_temperature() 
```

令我惊讶的是，循环无限运行并且永远不会读取温度（即永远不会触发侦听器）。如果没有用这样的循环包装它，它就会被触发。

那么如何进行正确的包装呢？

## 更新 1/2：真实代码

现在，这是基于 Sherif elKhatib（所有错误都是我的）。

主要代码：

```
 final Object lock = new Object(); 
```

听众的一部分：

```
 @Override
        public void onSensorChanged(SensorEvent event) 
        {
            synchronized (lock) 
            {
                read_value = event.values[0];
                sensor_manager.unregisterListener(this,proximity_sensor);
                lock.notifyAll();
            }
        } 
```

等待听众：

```
 synchronized (lock)
          {
              try
              {
                  lock.wait();
              }
              catch (InterruptedException ex)
              {
              }
          } 
```

## 更新 2/2：从另一个线程调用

这不是解决方案，只是一个评论。如果我从临时创建的新线程中调用这个同步包装器，它不会陷入死锁。

所以可能还有其他东西锁定在代码之上。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T14:55:42.817

你应该锁定线程（如果这是你想要的）

这是代码（我没有测试，所以它可能在这里或那里需要一些东西）

```
public wrapperFunction() {
    Object object = new Object();
    call(bla_parameters, new listener() {
        public void onEnd() {
             synchronized(object) {
                 object.notifyAll();
             }
        }
    });
    try {
         synchronized(object) {
             object.wait();
         }
    } catch(Exception ex){}

} 
```

# asp.net - OrderBy List 中的特定元素

> ID：12822222
> 
> 赞同：0
> 
> 时间：2012-10-10T14:48:49.387
> 
> 标签：asp.net, linq, list

我的场景是：我有一个`MenuBO`使用 linq 调用的类，它有一个调用的函数，该函数`SelectAll()`返回一个对象列表`menu`以用作 a `DataSource`for a `DropDownList`。在返回之前，我需要在列表中插入一个新项目作为默认值`DropDownList`

这是我到目前为止所尝试的：

```
public List<menu> SelectAll()
{
    using (var db = new SeloQual_AdminEntities(conn))
    {
        menu vmenu = new menu();
        vmenu.cod_menu = 0;
        vmenu.cod_menu_pai = null;
        vmenu.des_menu = "Select...";
        var query = from p in db.menu orderby p.des_menu select p;
        var test = query.ToList();
        test.Add(vmenu);
        return test.OrderBy(x => x.cod_menu).ToList();
    }
} 
```

`OrderBy(x => x.cod_menu)`它工作正常吗，该项目像我想要的`vmenu`那样显示在顶部，但我需要其他项目由`des_menu`. 我尝试了类似的东西

```
return teste.OrderBy(x => x.cod_menu).ThenBy(y => y.des_menu).ToList(); 
```

但是当然没有用，所以我需要一些帮助才能只订购第一个元素之后的元素

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T14:51:24.697

我认为您真正想要的是以下代码：

```
menu vmenu = new menu();
vmenu.cod_menu = 0;
vmenu.cod_menu_pai = null;
vmenu.des_menu = "Select...";
var query = from p in db.menu orderby p.des_menu select p;

List<menu> result = new List<menu>();
result.Add(vmenu);
result.AddRange(query);
return result; 
```

这通过简单地首先添加默认菜单项然后按照查询中定义的顺序添加已经排序的菜单项来优雅地解决您的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T14:51:35.457

你可以只使用[插入](http://msdn.microsoft.com/en-us/library/sey5k5z4%28v=vs.100%29.aspx)而不是添加

```
var vmenu = new menu{
    cod_menu = 0,
    des_menu="Select..."
    };
List<menu>res = db.menu.OrderBy(p => p.des_menu).ToList();
res.Insert(0,vmenu);
return res; 
```

# javascript - JavaScript 日期函数在 Firefox 浏览器中返回“日期 {无效日期}”

> ID：12822225
> 
> 赞同：4
> 
> 时间：2012-10-10T14:49:01.233
> 
> 标签：javascript, datetime, unobtrusive-javascript, ecmascript-5

在 Firefox 浏览器中面临`JavaScript Date`功能问题，`returns "Date {Invalid Date}"`但在 Google chrome 中运行良好。

```
// My Input is
new Date("Sat Jan 01 00:00:00 EST 1");

// Works fine in google chrome 
// Result: Mon Jan 01 2001 10:30:00 GMT+0530 (India Standard Time)

// Not working in Firefox (Version: 15.0.1)
// Result: Date {Invalid Date} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-13T09:06:31.323

这适用于所有浏览器 -

> 新日期（'2001/01/31 12:00:00 AM'）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T14:51:31.000

[Date](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date)不采用这种方式的时区参数。我的想法是 Chrome 只是忽略了它。

```
new Date(year, month, day [, hour, minute, second, millisecond]) 
```

请参阅下面的@Brett 评论以获取更多信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T14:53:40.283

确保参数符合 RFC1123：[https ://www.rfc-editor.org/rfc/rfc1123](https://www.rfc-editor.org/rfc/rfc1123)

# git - Git合并分离

> ID：12822227
> 
> 赞同：2
> 
> 时间：2012-10-10T14:49:09.440
> 
> 标签：git

我在合并中注意到的最大问题是最终你会得到一个单一的提交。

有没有一种方法可以在冲突合并自动合并文件和手动固定文件（2 个单独的提交）后分离？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T19:51:01.793

正如评论者指出的那样，需要解决冲突的文件将列在默认提交消息中，因此这种分离似乎没有意义。除此之外，您实际上不希望有两个提交，因为其中一个将反映两个分支的部分合并，即反映尚未完成的过程的结果。

你应该注意到 Git 提交是原子的，它反映了整个存储库的状态。看来您是通过 CVS 经验考虑的，其中提交不是原子的。Git不像CVS那样跟踪文件，因此像你描述的那样合并分离不适合Git。

如果您想要更精细地控制冲突，您应该使用 rebase 而不是合并。

# php - 使用 PHP 异常机制提供数据

> ID：12822228
> 
> 赞同：0
> 
> 时间：2012-10-10T14:49:09.597
> 
> 标签：php, design-patterns, exception-handling

使用 PHP 异常机制为某些软件组件提供数据是否是一个好主意。例如：

```
class CFoo {
    function dispatchData($dataItem1, $dataItem2) {
        throw new CQuickTransport($dataItem1, $dataItem2);
    }
}

class CBar {
    function foo() {
        try {
            // Somewhere here throw our exception...
        }
        catch (CQuickTransport $e) {
            $dataItemArray = $e->getCargo();
            $dataItem1 = $dataItemArray[0];
            $dataItem2 = $dataItemArray[1];
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T14:53:30.990

异常离开正常的执行流程。它们是为意想不到的结果而设计的，因此得名“例外”。作为最佳实践，它们应该只用于捕获和处理编程错误。

# backbone.js - RequireJs - Backbone.Views 相互依赖

> ID：12822233
> 
> 赞同：2
> 
> 时间：2012-10-10T14:49:27.630
> 
> 标签：backbone.js, requirejs

我对 requirejs 和骨干有疑问。好吧，我有两个视图（View1 和 View2）。我想从 View1 调用 View2.render()，从 View2 调用 View1.render()。一般来说，我希望每个视图都依赖于另一个视图。

我的问题是我不能调用 View2.render()。我收到错误消息“无法调用未定义的方法渲染”

如果我从 View2 中删除**View1**依赖项，那么它将起作用。

有谁知道我该如何修改代码以便它可以正常工作？

**编辑**

*视图名称-->View2*

```
define([
'Underscore',
'Backbone',
'Handlebar',
'views/view1'
], function (_, Backbone, Handlebars, View1) {
var View2 = Backbone.View.extend({
    initialize: function () {
        _.bindAll(this, "render");
    },
    tagName: 'div',
    el: '#rightPanel',
    events: {
        'change input#createNewCategory': 'createNewItem',
        'click #saveEdits': 'saveData',
        'click #clearEdits': 'render'
    },
    render: function () {
        //do something here
    },
    clear: function () {
        this.$el.empty();
    },
    createNewItem: function (e) {
      //so something here
    },
    saveData: function () {
        //This works Fine
        View1.render();
    }
});

return new View2;
}); 
```

*视图名称 --> View1*

```
define([
'Underscore',
'Backbone',
'Handlebar',
'views/view2'
], function (_, Backbone, Handlebars, View2) {
var View1 = Backbone.View.extend({
    tagName: 'li',
    el: '#categoriesList',
    events: {
        'click .categoryItem': 'edit'
    },
    initialize: function () {
        _.bindAll(this, "render");
    },
    edit: function (e) {
        View2.render();
        //**ERROR (cannot call method render of undefined)**
    },
    render: function () {
        //do something here
    }
});

return new View1;
}); 
```

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-11T18:26:47.887

首先添加 EventBus 模块。这基本上是事件聚合器模式：

```
define([
    'Underscore',
    'Backbone'
], function(_, Backbone){
    var EventBus = {
    };
    _.extend(EventBus, Backbone.Events);
    return EventBus;
}); 
```

接下来，使用 EventBus 模块在模块之间发送消息。这也让您可以在多个模块中订阅这些事件，并有助于保持单一责任原则。：

```
define([
'Underscore',
'Backbone',
'Handlebar',
'EventBus',
], function (_, Backbone, Handlebars, Vent) {
var View2 = Backbone.View.extend({
    initialize: function () {
        _.bindAll(this, "render");
        Vent.on("View1:edit", this.render, this);
    },
    tagName: 'div',
    el: '#rightPanel',
    events: {
        'change input#createNewCategory': 'createNewItem',
        'click #saveEdits': 'saveData',
        'click #clearEdits': 'render'
    },
    render: function () {
        //do something here
    },
    clear: function () {
        this.$el.empty();
    },
    createNewItem: function (e) {
      //so something here
    },
    saveData: function () {
        Vent.trigger("View2:save");
    }
});

return new View2;
});

define([
'Underscore',
'Backbone',
'Handlebar',
'EventBus'
], function (_, Backbone, Handlebars, Vent) {
var View1 = Backbone.View.extend({
    tagName: 'li',
    el: '#categoriesList',
    events: {
        'click .categoryItem': 'edit'
    },
    initialize: function () {
        _.bindAll(this, "render");
        Vent.on("View2:save", this.render, this);
    },
    edit: function (e) {
        Vent.trigger("View1:edit");
    },
    render: function () {
        //do something here
    }
});

return new View1;
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T16:17:30.077

此处的 require.js 文档涵盖了循环依赖项：[http ://requirejs.org/docs/api.html#circular](http://requirejs.org/docs/api.html#circular)

您需要在依赖项列表中包含 require （作为定义函数的参数），然后使用 require() 调用另一个视图，例如：

```
define([
'require'
'Underscore',
'Backbone',
'Handlebar',
'views/view1'
], function (require, _, Backbone, Handlebars, View1) {
var View2 = Backbone.View.extend({
    initialize: function () {
        _.bindAll(this, "render");
    },
    tagName: 'div',
    el: '#rightPanel',
    events: {
        'change input#createNewCategory': 'createNewItem',
        'click #saveEdits': 'saveData',
        'click #clearEdits': 'render'
    },
    render: function () {
        //do something here
    },
    clear: function () {
        this.$el.empty();
    },
    createNewItem: function (e) {
      //so something here
    },
    saveData: function () {
        //This works Fine
        require("View1").render();
    }
});

return new View2;
}); 
```

# kendo-ui - Knockout-Kendo.js：设置kendoui tabstrip的宽高

> ID：12822237
> 
> 赞同：0
> 
> 时间：2012-10-10T14:49:32.700
> 
> 标签：kendo-ui

我正在使用 RPNiemeyer 的 Knockout-Kendo.js 库。我有一个 kendoui 标签条。我查看了 kendoui 文档，但找不到如何设置标签条的宽度和高度。就我而言，我想将标签条的高度设置为浏览器视图的高度。目前，它正在调整每个选项卡的大小，并考虑其中的内容。

这是来自 Knockout-Kendo.js 官方页面的 jsfiddle.net 示例：

[http://jsfiddle.net/GQqwY/5/](http://jsfiddle.net/GQqwY/5/)

任何有关工作示例的帮助将不胜感激。谢谢你！

编辑：我发现这样做的一种方法是在 tabstrip 的每个 div 上设置高度

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T02:50:01.510

您有正确的想法来使用 css 设置高度。通常，我会通过利用 kendo 在 html 元素上呈现的类来处理这样的场景。你可以这样做：

```
<style>
  .k-tabstrip-items .k-link 
  {
    height:40px; /* whatever height you want */
    width:100px;
  }​
</style> 
```

这是一个更新的小提琴：http: [//jsfiddle.net/GQqwY/7/](http://jsfiddle.net/GQqwY/7/)

# android - 方向更改时的 DialogFragment 回调

> ID：12822250
> 
> 赞同：18
> 
> 时间：2012-10-10T14:50:35.597
> 
> 标签：android, dialog, callback, orientation-changes, android-dialogfragment

我正在迁移当前使用的对话框，`Activity.showDialog(DIALOG_ID);`以使用 [android 参考](http://developer.android.com/guide/topics/ui/dialogs.html)`DialogFragment`中讨论的系统。

在我的开发过程中，使用回调将某些事件传递回打开对话框的活动/片段时出现了一个问题：

这是一个简单对话框的一些示例代码：

```
public class DialogTest extends DialogFragment {

public interface DialogTestListener {
    public void onDialogPositiveClick(DialogFragment dialog);
}

// Use this instance of the interface to deliver action events
static DialogTestListener mListener;

public static DialogTest newInstance(Activity activity, int titleId, int messageId) {
    udateListener(activity);
    DialogTest frag = new DialogTest();
    Bundle args = new Bundle();
    args.putInt("titleId", titleId);
    args.putInt("messageId", messageId);
    frag.setArguments(args);
    return frag;
}

public static void udateListener(Activity activity) {
    try {
        // Instantiate the NoticeDialogListener so we can send events with it
        mListener = (DialogTestListener) activity;
    } catch (ClassCastException e) {
        // The activity doesn't implement the interface, throw exception
        throw new ClassCastException(activity.toString() + " must implement DialogTestListener");
    }
}

@Override
public Dialog onCreateDialog(Bundle savedInstanceState) {
    int titleId = getArguments().getInt("titleId");
    int messageId = getArguments().getInt("messageId");

    AlertDialog.Builder builder = new AlertDialog.Builder(getActivity());
    // dialog title
    builder.setTitle(titleId);
    // dialog message
    builder.setMessage(messageId);

    // dialog negative button
    builder.setNegativeButton("No", new OnClickListener() {
               public void onClick(DialogInterface dialog, int id) {}});
    // dialog positive button
    builder.setPositiveButton("Yes", new OnClickListener() {
        public void onClick(DialogInterface dialog, int id) {
            mListener.onDialogPositiveClick(DialogTest.this);
        }});

    // create the Dialog object and return it
    return builder.create();
}} 
```

这是一些调用它的活动代码：

```
public class SomeActivity extends FragmentActivity implements DialogTestListener {
private EditText mUserName;
@Override
public void onCreate(Bundle savedInstanceState) {
    // setup ui
    super.onCreate(savedInstanceState);
    setContentView(R.layout.ui_user_edit);
    // name input
    mUserName = (EditText) findViewById(R.id.userEdit_editTextName);
}

@Override
public void onDialogPositiveClick(DialogFragment dialog) {
    Log.d(TAG, this.toString());
    mUserName.setText(mUserName.getText() + "1");
}

private void showDialog() {
    DialogTest test = DialogTest.newInstance(SomeActivity.this, R.string.someTitleText, R.string.someMessageText);
    test.show(getSupportFragmentManager(), "testDialog");
}} 
```

代码几乎就是您看到的参考。问题是，一旦您进行方向更改，当显示一个对话框时，它就会停止按预期工作-->由于活动生命周期，活动和对话框都被重建，对话框现在没有正确的参考新的重建活动。

我在我的活动 onResume 方法中添加了以下代码：

```
 @Override
protected void onResume() {
    super.onResume();
    DialogTest.udateListener(this);
} 
```

这样做，我得到了预期的行为，当方向改变发生时，对话框将事件发送回新的重建活动。

我的问题是：在方向更改期间处理由 FragmentActivity 打开的 DialogFragment 之间的回调的“最佳实践”是什么？

最好的祝福

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2014-11-20T17:07:24.163

有更好的解决方案，而不是使用静态方法和变量，因为它只适用于对话的一个实例。最好将回调存储为非静态成员

```
private DialogTestListener mListener;
public void setListener (DialogTestListener listener){
  mListener = listener;
} 
```

然后你应该像这样使用 TAG 显示你的对话框`mDialogFragment.show(getSupportFragmentManager(), DIALOG_TAG);`

然后在`onResume`您的活动方法中，您可以重置您的听众

```
protected void onResume() {
   super.onResume();
   mDialogFragment = (CMFilterDialogFrg) getSupportFragmentManager().findFragmentByTag(DIALOG_TAG);
   if(mDialogFragment  != null){
       mDialogFragment.setListener(yourListener)
   }
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-10-18T13:38:19.967

是的，这是我自己一直陷入的常见陷阱。首先让我说，您的呼入解决方案`DialogTest.udateListener()`似乎`onResume()`完全适合我。

另一种方法是使用 a`ResultReceiver`可以序列化为 a `Parcelable`：

```
public class DialogTest extends DialogFragment {

public static DialogTest newInstance(ResultReceiver receiver, int titleId, int messageId) {
    DialogTest frag = new DialogTest();
    Bundle args = new Bundle();
    args.putParcelable("receiver", receiver);
    args.putInt("titleId", titleId);
    args.putInt("messageId", messageId);
    frag.setArguments(args);
    return frag;
}

@Override
public Dialog onCreateDialog(Bundle savedInstanceState) {
    int titleId = getArguments().getInt("titleId");
    int messageId = getArguments().getInt("messageId");
    ResultReceiver receiver = getArguments().getParcelable("receiver");

    AlertDialog.Builder builder = new AlertDialog.Builder(getActivity());
    // dialog title
    builder.setTitle(titleId);
    // dialog message
    builder.setMessage(messageId);

    // dialog negative button
    builder.setNegativeButton("No", new OnClickListener() {
        public void onClick(DialogInterface dialog, int id) {
            receiver.sendResult(Activity.RESULT_CANCEL, null);
        }});
    // dialog positive button
    builder.setPositiveButton("Yes", new OnClickListener() {
        public void onClick(DialogInterface dialog, int id) {
            receiver.sendResult(Activity.RESULT_OK, null);
        }});

    // create the Dialog object and return it
    return builder.create();
}} 
```

然后您可以像这样处理 Receiver 中的所有内容：

```
protected void onReceiveResult(int resultCode, Bundle resultData) {
    if (getActivity() != null){
        // Handle result
    }
} 
```

查看[ResultReceiver 无法忍受屏幕旋转](https://stackoverflow.com/questions/10927305/resultreceiver-doesnt-survire-to-screen-rotation)以获取更多详细信息。所以最后你可能仍然需要`ResultReceiver`用你的`Activity`. 唯一的区别是您`Activity`将`DialogFragment`.

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-09-22T21:28:39.577

虽然 André 的解决方案有效，但更好的解决方案是[`onAttach()`](http://developer.android.com/reference/android/app/Fragment.html#onAttach(android.app.Activity))在`Fragment`.

```
private DialogTestListener mListener;

@Override
public void onAttach(Activity activity) {
    super.onAttach(activity);
    mListener = (DialogTestListener) activity;
} 
```

使用此解决方案，您将不再需要传递`Activity`。`newInstance()`你只需要确保`Activity`拥有你的`Fragment`是一个`DialogTestListener`. 您也不需要像在`ResultReceiver`解决方案中那样保存状态。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-03-05T07:46:00.477

首先，调用`setTargetFragment`from`FragmentParent`到 start `dialogFragment`。`dialogFragment`用于`getTargetFragment`回调片段和返回数据。所有数据结果将`onactivityresult`在`FragmentParent`

请点击此链接： [从 DialogFragment 接收结果](https://stackoverflow.com/questions/10905312/receive-result-from-dialogfragment)

* * *

## 回答 #5

> 赞同：-7
> 
> 时间：2012-10-10T15:54:23.400

另一种方法是您可以停止重新创建活动。您必须告诉 Android 您将自己处理方向更改，并且 android 不会重新创建您的活动。您需要将此活动添加到清单文件中：

```
android:configChanges="keyboardHidden|orientation" 
```

如果不是这样，那么您可以按照 Google 的建议使用标准`onSaveInstanceState()`来保存您的状态并恢复使用。`savedInstanceState`

这是谷歌的官方指南：http: [//developer.android.com/guide/components/activities.html#Lifecycle](http://developer.android.com/guide/components/activities.html#Lifecycle)

如果你还没有，请通过它。它将真正帮助您进行 android 开发。

# html - 我是否必须添加一个额外的 div 才能实现这一点？

> ID：12822255
> 
> 赞同：0
> 
> 时间：2012-10-10T14:50:42.693
> 
> 标签：html, css

我想知道，如果我希望页眉的紫色和页脚的蓝色在页面上 100% 延伸，但保持中间的内容与中间的橙色对齐，我应该如何实现呢？

我是否必须在页眉和页脚周围添加额外的 100% div 并在其中着色？这似乎是一种糟糕的做法。

这是我正在使用的代码：http: [//jsfiddle.net/HMsKa/21/](http://jsfiddle.net/HMsKa/21/)

**HTML**

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang="en-US">
<head>
        <title>Title</title>
        <link href="/static/css/main.css" rel="stylesheet" type="text/css">
    </head>
    <body>
        <div id="container">
            <div id="header" class="thin_width" >

                        <a href="/"><img src="/static/img/header.jpg" id="logo" alt="coming soon" title="coming soon"></a>
                        <ul>
                            <li><a href="/posts/list/">Link1</a></li>
                            <li><a href="/posts/create/">Link 2</a></li>
                            <li><a href="/about">Link 3</a></li>
                        </ul>
            </div>
            <div id="content" class="thin_width">
            <h1>Sed ut perspiciatis unde</h1>
            <form id="searchForm" action="/search">
                <input type="text" name="kw" class="field r2 lft dc1 tc5 b1 ts3" id="field_regular" placeholder="Keyword">
                <input type="text" name="loc" class="field r2 lft dc1 tc5 b1 ts3" id="field_regular" placeholder="Location">
                <input type="submit" class="button r2 b1 ts3" id="button_search" value="Search">
            </form>
            <p>Sed ut perspiciatne voluptatem sequi nesciunt.</p>            
            <p>Sed ut perspiciatne voluptatem sequi nesciunt.</p>
            <p>Sed ut perspiciatne voluptatem sequi nesciunt.</p>
            <p>Sed ut perspiciatne voluptatem sequi nesciunt.</p>
            <p>Sed ut perspiciatne voluptatem sequi nesciunt.</p>
            <p>Sed ut perspiciatne voluptatem sequi nesciunt.</p>
            <p>Sed ut perspiciatne voluptatem sequi nesciunt.</p>
            <p>Sed ut perspiciatne voluptatem sequi nesciunt.</p>
            <p>Sed ut perspiciatne voluptatem sequi nesciunt.</p>
            <p>Sed ut perspiciatne voluptatem sequi nesciunt.</p>
            <p>Sed ut perspiciatne voluptatem sequi nesciunt.</p>
            <p>Sed ut perspiciatne voluptatem sequi nesciunt.</p>
            <p>Sed ut perspiciatne voluptatem sequi nesciunt.</p>
            <p>Sed ut perspiciatne voluptatem sequi nesciunt.</p>
            <p>Sed ut perspiciatne voluptatem sequi nesciunt.</p>
            <p>Sed ut perspiciatne voluptatem sequi nesciunt.</p>
            <p>Sed ut perspiciatne voluptatem sequi nesciunt.</p>
            <p>Sed ut perspiciatne voluptatem sequi nesciunt.</p>
            <p>Sed ut perspiciatne voluptatem sequi nesciunt.</p>
       </div>
       <div id="footer" class="thin_width">
           &#169; 2012 Company, Inc.
           <ul>
               <li><a href="/contact">Contact</a></li>
               <li><a href="/faq">FAQ</a></li>
               <li><a href="/terms">Terms</a></li>
               <li><a href="/privacy">Privacy</a></li>
           </ul>
        </div>
        </div>
    </body>
</html> 
```

**CSS**

```
/* GENERAL */
html { height:100%; }
body { height:100%; font-family: Arial, Helvetica, sans-serif; font-weight:normal; font-style:normal; font-size:100%; }
p { font size: 13px; margin: 10px 0; padding: 0; }
h1 { font-size: 22px; }  
h2 { font-size: 17px; }  
h3 { font-size: 14px; } 
blockquote { font-style: italic; }

.thin_width { width: 600px; }

#container { min-height: 100%; position: relative; background-color: red;
width: 600px;
margin: 0 auto;
}
#content {padding-bottom: 80px; background-color: orange;}
#footer { 
    position:absolute; 
    bottom: 0; 
    clear: both; 
    float:left;
    height:60px;
    background-color: blue;
}

#footer li { display:inline; }

#header {background-color: purple;} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T14:55:08.513

你可以这样做：[**我的小提琴**](http://jsfiddle.net/HMsKa/29/)

怎么做 ：

只需从包装器中取出页眉和页脚，`div`并为页眉和页脚提供 100% 的宽度。

要使页眉和页脚的内容居中，您需要将页眉和页脚中的内容包装在一个包装器 div 中，给它一个`width`of`600px;`并使用`margin: auto;`它来将它带到您的页面流中

# jquery - 特定页面的历史记录

> ID：12822260
> 
> 赞同：-1
> 
> 时间：2012-10-10T14:50:56.783
> 
> 标签：jquery, html

我想把一个链接放在最后一页的按钮中。但通常人们会在我的网站的当前页面和最后一页之间访问其他网站。那么，有没有办法说在我选择的三个页面之间找到​​的第一个历史记录：a.php、b.php、c.php？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T14:57:44.670

不，我很确定你不能那样做。在我看来，任何让你访问浏览器历史的东西都会带来安全风险。

无论如何，如果您想要一个指向他们在您网站上访问的最后一页的链接，那么我建议您在某个地方跟踪它。例如，在每次页面加载时，您可以将页面存储在会话变量中。然后，当他们单击“最后一页”链接时，可以查询此值。

尽管您确实有超时问题，但使用会话变量。如果您需要更长期的东西，您可以考虑使用 cookie，但请注意，有新法律强制您通知任何用户您正在使用 cookie 来存储此类信息。

或者，如果用户是注册用户（并且有登录名），那么您可以将最后一页存储在数据库中。

当然，在页面加载时执行此操作意味着您必须实际跟踪最后两个页面（因为您还将跟踪当前页面）。

同样，另一种选择是您可以将每个页面周围的最后一页 url 作为 url 参数传递 - 很像某些网站在重定向到登录页面时使用的常见“returnurl”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T14:58:37.287

不-所有现代浏览器都不允许这样的事情（同源政策）

您可以做的是建立一个数据库并记录每个用户看到的您网站的最新页面（由 IP 地址确定）。然后查看最后一次看到的页面是一个简单的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T12:05:52.683

您**可以**`history.go()`在 Internet Explorer 中传递一个字符串（URL） 。

请参阅此处的文档：http: [//msdn.microsoft.com/en-us/library/ms536443%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/ms536443%28v=vs.85%29.aspx)

![微软](../Images/3ee402e12aebbd5b161a965e222533d3.png)

现在，如果你需要一个跨浏览器的替代方案，**也许** [history.js](https://github.com/balupton/history.js)可以帮助你。

* * *

另一个解决方案（更多是 hack）是**不允许**将页面中的链接保存在会话历史记录中。只有和。`a`_ 所以当用户点击“返回”时，它只能导航到这 3 个页面。`b``c`

你会怎么做？
一种方法是使用`replace`方法；

> 将当前文档替换为提供的 URL 中的文档。[...] 使用 replace() 后，当前页面将不会保存在会话历史记录中，这意味着用户将无法使用后退按钮导航到该页面。

文档：[https ://developer.mozilla.org/en-US/docs/DOM/window.location#replace](https://developer.mozilla.org/en-US/docs/DOM/window.location#replace)

# php - 首先验证图像上传，然后才在单独的表格中插入链接到图像的文本数据

> ID：12822262
> 
> 赞同：0
> 
> 时间：2012-10-10T14:51:03.080
> 
> 标签：php, codeigniter, codeigniter-2

我有一个表单，允许我将图像和一堆文本数据上传到数据库表中。图像通过外键连接到文本数据。

问题是如果表单在上传图像时遇到问题 - 文本数据仍然会被插入（如果它通过自己的验证）。

有什么方法可以首先验证图像，如果一切正常，然后将文本数据连同图像的文件名插入相应的表中？

**控制器：**

```
function addDataRow()
        {
            //Set common properties
            $data['title'] = 'Add new data row';
            $data['action'] = site_url('crud/addDataRow');
            $data['link_back'] = anchor('crud/index/', 'Back to list', array('class' => 'back'));

            //Set validation properties
            $this->_set_fields();
            $this->_set_rules();

            //Run validation
            if($this->form_validation->run() == FALSE)
            {
                $data['message'] = '';
            }
            else
            {
                //Get the text data from $_POST
                $data_row = array(
                    'title' => $this->input->post('title'),
                    'text' => $this->input->post('text'),
                    'price' => $this->input->post('price'),
                    'status' => $this->input->post('status'),
                    'type' => $this->input->post('type')
                );

                //Insert text data into table
                $id = $this->crud_model->save($data_row);

                //Now move on to image processing
                //original image upload settings
                $path_to_uploads= './assets/upload';
                $config['allowed_types'] = 'gif|jpg|png';
                $config['max_size'] = '6000';
                $config['max_width']  = '1920';
                $config['max_height']  = '1920';
                $config['upload_path'] = $path_to_uploads;
                $this->load->library('upload', $config);

                $arr_files = @$_FILES['thumb'];

                $_FILES = array();
                foreach(array_keys($arr_files['name']) as $h){
                    $_FILES["file_{$h}"] = array(
                        'name' => $arr_files['name'][$h],
                        'type' => $arr_files['type'][$h],
                        'tmp_name' => $arr_files['tmp_name'][$h],
                        'error' => $arr_files['error'][$h],
                        'size' => $arr_files['size'][$h]
                    );
                }

                //Initialize upload
                $this->upload->initialize($config);

                foreach(array_keys($_FILES) as $h){

                    if (!$this->upload->do_upload($h)){
                        $error = $this->upload->display_errors();
                        //echo "<script>alert($error);</script>";
                        print($error); die;
                        //Fix this part
                    }else{
                        //Start uploading               
                        $upload_data = $this->upload->data();
                        $file_name = $upload_data['file_name'];
                        $full_file_path = $path_to_uploads.'/'.$file_name;

                        //Insert image data into table
                        $image_row = array(
                        'id_path' => $file_name,
                        'id_data_row' => $id
                        );

                        $this->crud_model->save_image($image_row);

                        if($h=='file_0'){
                            //Thumbnail config
                            $config['image_library'] = 'gd2';
                            $config['source_image'] = $full_file_path;
                            $config['create_thumb'] = TRUE;
                            $config['maintain_ratio'] = TRUE;
                            $config['width'] = 150;
                            $config['height'] = 150;

                            $this->load->library('image_lib', $config);

                            $this->image_lib->resize();

                            $thumbnail_row = array(
                            'id_path' => str_replace(".", "_thumb.", $file_name),
                            'id_data_row' => $id
                            );

                            $this->crud_model->save_thumbnail($thumbnail_row);
                        }       
                    }
                }
                //Set form input name="id"
                $this->form_validation->id = $id;

                //Set user message
                $data['message'] = '<div class="success">New data row added!</div>';
            }

            $this->load->view('templates/header', $data);
            $this->load->view('pages/crud_edit', $data);
            $this->load->view('templates/footer');
        } 
```

**模型：**

```
//Add new data row
        function save($data)
        {

            $this->db->insert($this->tbl_data, $data);
            return $this->db->insert_id();
        }

        //Add the original image
        function save_image($data)
        {
            $this->db->insert($this->tbl_images, $data);
            return $this->db->insert_id();
        }

        //Add the thumbnail upload path and id of the row in data table to link them
        function save_thumbnail($data)
        {
            $this->db->insert($this->tbl_thumbnails, $data);
            return $this->db->insert_id();
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T15:12:33.073

这个想法很简单：
首先上传图片，并检查错误。
如果有，则中断该过程。否则在数据库中插入文本数据。

**编辑**
对于多个文件，您在`foreach(array_keys($_FILES) as $h)`.
您上传一张图片，如果通过，您将图片和文本数据保存在数据库中，然后移动到下一张图片。

```
foreach(array_keys($_FILES) as $h){
  // Upload the image
  // Check if it succeeded
  // If yes, store the image and
  // store the textual data for it
  // proceed to next image
} 
```

**编辑 2**
根据您的最后评论，您应该这样做（伪代码）：

```
$temp_images = array(); // This array will hold the uploaded images (their path).
foreach(array_keys($_FILES) as $h){
  // Upload the image
  // Check if it succeeded
  // If yes, store it and add it to the $temp_images array and proceed to next image
  // If it did not, delete all the images in $temp_images and halt process
}
// You have all the images here
// Store the images and their textual data 
```

对不起，我现在无法编写实际代码。我不在我自己的电脑上。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T15:25:57.173

您也可以在上传到数据库后做一个简单的检查。如果图片不存在，请删除条目。这样您就不需要更改任何内容，只需添加一个 ckeck 和删除部分。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T17:56:47.067

只需将所有数据推送到数组中，然后等待图像完成上传，然后再将它们插入数据库：

```
<?php
function addDataRow()
{
    //Set common properties
    $data['title'] = 'Add new data row';
    $data['action'] = site_url('crud/addDataRow');
    $data['link_back'] = anchor('crud/index/', 'Back to list', array('class' => 'back'));

    //Set validation properties
    $this->_set_fields();
    $this->_set_rules();

    //Run validation
    if($this->form_validation->run() == FALSE)
    {
        $data['message'] = '';
    }
    else
    {
        //Get the text data from $_POST
        $data_row = array(
            'title' => $this->input->post('title'),
            'text' => $this->input->post('text'),
            'price' => $this->input->post('price'),
            'status' => $this->input->post('status'),
            'type' => $this->input->post('type')
        );

        //Now move on to image processing
        //original image upload settings
        $path_to_uploads= './assets/upload';
        $config['allowed_types'] = 'gif|jpg|png';
        $config['max_size'] = '6000';
        $config['max_width']  = '1920';
        $config['max_height']  = '1920';
        $config['upload_path'] = $path_to_uploads;
        $this->load->library('upload', $config);

        $arr_files = @$_FILES['thumb'];

        $_FILES = array();
        foreach(array_keys($arr_files['name']) as $h){
            $_FILES["file_{$h}"] = array(
                'name' => $arr_files['name'][$h],
                'type' => $arr_files['type'][$h],
                'tmp_name' => $arr_files['tmp_name'][$h],
                'error' => $arr_files['error'][$h],
                'size' => $arr_files['size'][$h]
            );
        }

        //Initialize upload
        $this->upload->initialize($config);

        //Array for image_row data
        $image_row_array = array();

        //array to hold errors
        $error = array();

        foreach(array_keys($_FILES) as $h){

            if (!$this->upload->do_upload($h)){
                $error[$h] = $this->upload->display_errors();
                //echo "<script>alert($error);</script>";
                print($error); die;
                //Fix this part
            }else{
                //Start uploading               
                $upload_data = $this->upload->data();
                $file_name = $upload_data['file_name'];
                $full_file_path = $path_to_uploads.'/'.$file_name;

                $image_row = array(
                    'id_path' => $file_name,
                    'id_data_row' => NULL,//$id isn't set yet
                );

                //push image_row data into array instead of saving to db
                $image_row_array[$h] = $image_row;

                if($h=='file_0'){
                    //Thumbnail config
                    $config['image_library'] = 'gd2';
                    $config['source_image'] = $full_file_path;
                    $config['create_thumb'] = TRUE;
                    $config['maintain_ratio'] = TRUE;
                    $config['width'] = 150;
                    $config['height'] = 150;

                    $this->load->library('image_lib', $config);

                    $this->image_lib->resize();

                    $thumbnail_row = array(
                    'id_path' => str_replace(".", "_thumb.", $file_name),
                    'id_data_row' => NULL,//$id isn't set yet
                    );
                }       
            }
        }

        //if $error array is empty, images uploaded Ok so add data to db

        if(count($error)==0)
        {
            //Insert text data into table
            $id = $this->crud_model->save($data_row);

            //insert image row data
            foreach($image_row_array as $k => $v)
            {
                //set id
                $image_row_array[$k]['id_data_row'] = $id;

                //if($k != 'file_0')... if you don't want file_0 in there
                $this->crud_model->save_image($image_row_array[$k]);
            }

            //set thumbnail id
            $thumbnail_row['id_data_row'] = $id;

            //insert thumbnail data
            $this->crud_model->save_thumbnail($thumbnail_row);

        }

        //Set form input name="id"
        $this->form_validation->id = $id;

        //Set user message
        $data['message'] = '<div class="success">New data row added!</div>';
    }

    $this->load->view('templates/header', $data);
    $this->load->view('pages/crud_edit', $data);
    $this->load->view('templates/footer');
} 
```

# mysql - 使用逗号分隔的用户输入搜索逗号分隔的数据库字段

> ID：12822265
> 
> 赞同：1
> 
> 时间：2012-10-10T14:51:05.700
> 
> 标签：mysql, sql

我有一个以逗号分隔的数据存储在数据库字段中。就像在一个字段中说`colors`有以下行。

```
red,blue, green
blue, white, purple, pink
yellow, khaki, maroon, orange
gray, lemon, black, brown 
```

下一个用户有一个 html 形式的文本框，他在其中以逗号分隔的形式输入颜色。我想搜索数据库以返回与他的输入匹配的记录。例如。

如果我输入`red, purple, orange`，那么查询应该返回三行，因为第一行是红色，第二行是紫色，第三行是橙色。

我没有比将用户输入分解为数组并循环遍历每种颜色并搜索数据库以获得结果更容易的方法。有没有更简单的方法来做到这一点？

**编辑**

我知道以逗号分隔的形式存储数据不是一个好习惯，但我正在对其他程序员制作的应用程序进行更新。在这个阶段，我不能改变表结构。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T14:58:44.393

不幸的是，没有更简单的方法。

但是，更好的方法是[标准化 DB 结构](http://en.wikipedia.org/wiki/Database_normalization)，将颜色保存在单独的表中，并在主表和颜色表之间创建一个数据透视表。

之后，您还必须拆分用户输入的值，获取颜色的 ID，然后在数据透视表上进行搜索。

这样做的主要优点是您在进行搜索时会使用数据库索引。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T15:01:08.260

1.  当然，如果可以选择，规范化是最好的方法：

    ```
    CREATE TABLE colors ( color VARCHAR(6) NOT NULL PRIMARY KEY );

    INSERT INTO colors VALUES
      ('red'), ('blue'), ('green'), ('white'), ('purple'), ('pink'),
      ('yellow'), ('khaki'), ('maroon'), ('orange'), ('gray'),
      ('lemon'), ('black'), ('brown');

    CREATE TABLE itemColors (
      item_id BIGINT UNSIGNED NOT NULL,
      color   VARCHAR(6)      NOT NULL,
      FOREIGN KEY (item_id) REFERENCES my_table (id),
      FOREIGN KEY (color)   REFERENCES colors   (color)
    );

    INSERT INTO itemColors (item_id, color)
      SELECT my_table.id, colors.color
      FROM   my_table JOIN colors ON FIND_IN_SET(colors.color, my_table.colors);

    ALTER TABLE my_table DROP COLUMN colors; 
    ```

    然后一个人只需要做：

    ```
    SELECT *
    FROM   my_table
    WHERE  id IN (
                   SELECT item_id
                   FROM   itemColors
                   WHERE  color IN ('red','purple','orange')
                 ) 
    ```

2.  否则，您可以构建一个使用 MySQL[`FIND_IN_SET()`](http://dev.mysql.com/doc/en/string-functions.html#function_find-in-set)函数的查询（在您的应用程序中）：

    ```
    SELECT *
    FROM   my_table
    WHERE  FIND_IN_SET('red',    colors)
        OR FIND_IN_SET('purple', colors)
        OR FIND_IN_SET('orange', colors) 
    ```

# android - 更改屏幕方向后 TextView 内容丢失

> ID：12822267
> 
> 赞同：10
> 
> 时间：2012-10-10T14:51:07.863
> 
> 标签：android, lifecycle

在 Android 模拟器中观察我的应用程序行为，我发现在更改屏幕方向 (Ctrl+F11) 后保留了 EditText 内容。但是 TextView 的内容被重置为其初始值，并且不保留程序设置的最新信息。这是定义上的行为吗？我能做些什么来保留这些内容？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-10T15:01:29.033

您可以`savedInstanceBundle`通过覆盖 Activity 中的两个方法来使用 来保留数据，如下所示：

```
@Override
public void onSaveInstanceState(Bundle savedInstanceState) {
  super.onSaveInstanceState(savedInstanceState);
  // Save state to the savedInstanceState
  savedInstanceState.putString("MyString", textview.getText());

}

@Override
public void onRestoreInstanceState(Bundle savedInstanceState) {
  super.onRestoreInstanceState(savedInstanceState);
  // Restore state from savedInstanceState
  String myString = savedInstanceState.getString("MyString");
  textview.setText(myString);
} 
```

将您的项目添加到`Bundle`in 中`onSaveInstanceState`，并在`onRestoreInstanceState`. 这与在创建活动时通过意图传递值的方式类似。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-10-10T15:01:39.977

**在您的TextView** 中使用此属性`android:freezesText="true"`。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-10T14:58:08.870

当方向发生变化时，Android 会重新加载 Activity，从而破坏大部分信息，如 TextView 变化。您将需要覆盖`onSaveInstanceState()`，它将在屏幕方向更改发生之前运行。然后，您将可以在`Bundle`传入的`onCreate`. 您还应该参考此内容来了解[​​活动](http://developer.android.com/reference/android/app/Activity.html#ActivityLifecycle)生命周期。

# java - 如何使用外键查询单个对象？

> ID：12822271
> 
> 赞同：-1
> 
> 时间：2012-10-10T14:51:23.917
> 
> 标签：java, ormlite

我有这两个课

```
@DatabaseTable
public class User {
    @DatabaseField(generatedId=true)
    private int _id;
    @DatabaseField
    private String name;
    @DatabaseField
    private String password;
    @DatabaseField(canBeNull = false, foreign = true, unique = true)
    private Item item; 
```

和

```
@DatabaseTable
public class Item {
    @DatabaseField(generatedId=true)
    private int _id;
    @DatabaseField
    private String name; 
```

我想使用平台从数据库中查询单个用户，因为它们是独一无二的，我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T14:57:22.897

我不确定什么是“平台”。要查询`User`与特定匹配的 a，`Item`您可以执行以下操作：

```
List<User> results = userDao.queryBuilder().where().eq("item", item).query(); 
```

这将返回结果列表。如果只有一个，那么你可以做

```
QueryBuilder<User, Integer> qb = userDao.queryBuilder();
qb.where().eq("item", item);
User user = qb.queryForFirst(); 
```

使用 a 定义列名是一个很好的模式`public final static String`：

```
@DatabaseTable
public class User {
    public final static String ITEM_COLUMN_NAME = "item";
    ...
    @DatabaseField(columnName = ITEM_COLUMN_NAME, canBeNull = false,
         foreign = true, unique = true)
    private Item item; 
```

然后您的查询可以执行以下操作：

```
...eq(User.ITEM_COLUMN_NAME, item) 
```

请注意，虽然实际存储的字段是一个整数，但该`eq(...)`方法足够聪明，可以从中获取`item`并提取其 id 字段。

# c# - 如何使用 C# 压缩具有运行长度编码的图像？

> ID：12822274
> 
> 赞同：0
> 
> 时间：2012-10-10T14:51:27.107
> 
> 标签：c#, image, compression, data-compression, image-compression

如何使用 C# 压缩具有运行长度编码的图像？是否有任何可用的库来支持这一点？

游程编码是否仅适用于位图图像？如果是这样，我将如何使用 C# 将图像类型转换为位图？

我还想问一下他们在此之后生成的文件类型是什么，他们会保留他们的文件类型还是会有一个新的文件类型？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-11-03T15:31:45.960

我知道这是一个老问题，但它是谷歌搜索中 C# 中 RLE 压缩的少数几个问题之一。对于像我这样完全没有图像处理经验的人来说，这是一次非常令人沮丧的经历，所以希望这个答案能在将来减轻其他人的痛苦。

我知道 RLE 是一种过时的压缩形式，但我们中的一些人受到要求我们使用它的约束（例如将 bmp 导出到自定义设备）。以下需要 8bpp 索引位图才能工作。如果您需要帮助将图像转换为该格式，有大量在线资源可以提供帮助。

我把它放在一个名为 BmpCompressor 的类中。

```
private enum Compression
    {
        // others not necessary for the 8bpp compression, but left for reference
        //BI_RGB = 0x0000,
        BI_RLE8 = 0x0001,
        //BI_RLE4 = 0x0002,
        //BI_BITFIELDS = 0x0003,
        //BI_JPEG = 0x0004,
        //BI_PNG = 0x0005,
        //BI_CMYK = 0x000B,
        //BI_CMYKRLE8 = 0x000C,
        //BI_CMYKRLE4 = 0x000D
    }

    private enum BitCount
    {
        // others not necessary for the 8bpp compression, but left for reference
        //Undefined = (ushort)0x0000,
        //TwoColors = (ushort)0x0001,
        //Max16Colors = (ushort)0x0004,
        Max256Colors = (ushort)0x0008,
        //Max32KBColors = (ushort)0x0010,
        //Max16MBColors = (ushort)0x0018,
        //Max16MBColors_Compressed = (ushort)0x0020
    }

    private struct RleCompressedBmpHeader
    {
        // Everything before the HeaderSize is technically not part of the header (it's not included in the HeaderSize calculation)

        /// <summary>
        /// Size of the .bmp file.
        /// Always header size (40), plus palette size, plus image size, plus pre-header size (14);
        /// </summary>
        public uint Size;

        /// <summary>
        /// Offset to start of image data in bytes from the start of the file
        /// </summary>
        public uint Offset;

        /// <summary>
        /// Size of this header in bytes. (Always 40)
        /// </summary>
        public uint HeaderSize; // 4 + 4 + 4 + 2 + 2 + 4 + 4 + 4 + 4 + 4 + 4

        /// <summary>
        /// Width of bitmap in pixels
        /// </summary>
        public int Width;

        /// <summary>
        /// Height of bitmap in pixels
        /// </summary>
        public int Height;

        /// <summary>
        /// Number of Planes (layers). Always 1.
        /// </summary>
        public ushort Planes;
        /// <summary>
        /// Number of bits that define each pixel and maximum number of colors
        /// </summary>
        public BitCount BitCount;

        /// <summary>
        /// Defines the compression mode of the bitmap.
        /// </summary>
        public Compression Compression;

        /// <summary>
        /// Size, in bytes, of image.
        /// </summary>
        public uint ImageSize;

        // These shouldn't really be all that important
        public uint XPixelsPerMeter;
        public uint YPixelsPerMeter;

        /// <summary>
        /// The number of indexes in the color table used by this bitmap.
        /// <para>0 - Use max available</para>
        /// <para>If BitCount is less than 16, this is the number of colors used by the bitmap</para>
        /// <para>If BitCount is 16 or greater, this specifies the size of the color table used to optimize performance of the system palette.</para>
        /// </summary>
        public uint ColorUsed;

        /// <summary>
        /// Number of color indexes that are required for displaying the bitmap. 0 means all color indexes are required.
        /// </summary>
        public uint ColorImportant;

        public byte[] ToBytes()
        {
            var swap = BitConverter.IsLittleEndian;
            var result = new List<byte>();

            result.AddRange(new byte[] { 0x42, 0x4d }); // signature (BM)
            result.AddRange(BitConverter.GetBytes(Size));
            result.AddRange(new byte[4]); // reserved
            result.AddRange(BitConverter.GetBytes(Offset));
            result.AddRange(BitConverter.GetBytes(HeaderSize));
            result.AddRange(BitConverter.GetBytes(Width));
            result.AddRange(BitConverter.GetBytes(Height));
            result.AddRange(BitConverter.GetBytes(Planes));
            result.AddRange(BitConverter.GetBytes((ushort)BitCount));
            result.AddRange(BitConverter.GetBytes((uint)Compression));
            result.AddRange(BitConverter.GetBytes(ImageSize));
            result.AddRange(BitConverter.GetBytes(XPixelsPerMeter));
            result.AddRange(BitConverter.GetBytes(YPixelsPerMeter));
            result.AddRange(BitConverter.GetBytes(ColorUsed));
            result.AddRange(BitConverter.GetBytes(ColorImportant));

            return result.ToArray();
        }
    }

    public unsafe byte[] RunLengthEncodeBitmap(Bitmap bmp)
    {
        if (bmp.PixelFormat != PixelFormat.Format8bppIndexed) { throw new ArgumentException("The image must be in 8bppIndexed PixelFormat", "bmp"); }

        var data = bmp.LockBits(new Rectangle(0, 0, bmp.Width, bmp.Height), ImageLockMode.ReadOnly, PixelFormat.Format8bppIndexed);
        List<byte> result = new List<byte>();

        // Actual RLE algorithm. Bottom of image is first stored row, so start from bottom.
        for (var rowIndex = bmp.Height - 1; rowIndex >= 0; rowIndex--)
        {
            byte? storedPixel = null;
            var curPixelRepititions = 0;
            var imageRow = (byte*)data.Scan0.ToPointer() + (rowIndex * data.Stride);
            for (var pixelIndex = 0; pixelIndex < bmp.Width; pixelIndex++)
            {
                var curPixel = imageRow[pixelIndex];
                if (!storedPixel.HasValue)
                {
                    curPixelRepititions = 1;
                    storedPixel = curPixel;
                }
                else if (storedPixel.Value != curPixel || curPixelRepititions == 255)
                {
                    result.Add(Convert.ToByte(curPixelRepititions));
                    result.Add(storedPixel.Value);
                    curPixelRepititions = 1;
                    storedPixel = curPixel;
                }
                else
                {
                    curPixelRepititions++;
                }
            }

            if (curPixelRepititions > 0)
            {
                result.Add(Convert.ToByte(curPixelRepititions));
                result.Add(storedPixel.Value);
            }

            if (rowIndex == 0)
            {
                // EOF flag
                result.Add(0x00);
                result.Add(0x01);
            }
            else
            {
                // End of Line Flag
                result.Add(0x00);
                result.Add(0x00);
            }
        }

        bmp.UnlockBits(data);

        var paletteSize = (uint)bmp.Palette.Entries.Length * 4;
        var header = new RleCompressedBmpHeader();
        header.HeaderSize = 40;
        header.Size = header.HeaderSize + paletteSize + (uint)result.Count + 14;
        header.Offset = header.HeaderSize + 14 + paletteSize; // total header size + palette size
        header.Width = bmp.Width;
        header.Height = bmp.Height;
        header.Planes = 1;
        header.BitCount = BitCount.Max256Colors;
        // as far as I can tell, PixelsPerMeter are not terribly important
        header.XPixelsPerMeter = 0x10000000;
        header.YPixelsPerMeter = 0x10000000;
        header.Compression = Compression.BI_RLE8;
        header.ColorUsed = 256;
        header.ColorImportant = 0; // use all available colors
        header.ImageSize = header.HeaderSize + (uint)result.Count;

        var headerBytes = header.ToBytes();
        var paletteBytes = ConvertPaletteToBytes(bmp.Palette);

        return headerBytes.Concat(paletteBytes).Concat(result).ToArray();
    }

    private byte[] ConvertPaletteToBytes(ColorPalette colorPalette)
    {
        return colorPalette.Entries.SelectMany(c => new byte[]
            {
                c.B,
                c.G,
                c.R,
                0
            }).ToArray();
    } 
```

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T14:58:05.940

如果你环顾四周，你会发现相当多的资源......

[运行长度编码](http://en.wikipedia.org/wiki/Run_length_encoding)几乎适用于字符串形式的任何类型的数据。

但这里有一个来自[Rosetta Code](http://rosettacode.org/wiki/Run-length_encoding#C.23)的例子：

```
 public static void Main(string[] args)
   {
       string input = "WWWWWWWWWWWWBWWWWWWWWWWWWBBBWWWWWWWWWWWWWWWWWWWWWWWWBWWWWWWWWWWWWWW";
       Console.WriteLine(Encode(input));//Outputs: 12W1B12W3B24W1B14W
       Console.WriteLine(Decode(Encode(input)));//Outputs: WWWWWWWWWWWWBWWWWWWWWWWWWBBBWWWWWWWWWWWWWWWWWWWWWWWWBWWWWWWWWWWWWWW
       Console.ReadLine();
   }
   public static string Encode(string s)
   {
       StringBuilder sb = new StringBuilder();
       int count = 1;
       char current =s[0];
       for(int i = 1; i < s.Length;i++)
       {
           if (current == s[i])
           {
               count++;
           }
           else
           {
               sb.AppendFormat("{0}{1}", count, current);
               count = 1;
               current = s[i];
           }
       }
       sb.AppendFormat("{0}{1}", count, current);
       return sb.ToString();
   }
   public static string Decode(string s)
   {
       string a = "";
       int count = 0;
       StringBuilder sb = new StringBuilder();
       char current = char.MinValue;
       for(int i = 0; i < s.Length; i++)
       {
           current = s[i];
           if (char.IsDigit(current))
               a += current;
           else
           {
               count = int.Parse(a);
               a = "";
               for (int j = 0; j < count; j++)
                   sb.Append(current);
           }
       }
       return sb.ToString();
   } 
```

您必须根据自己的需要来调整它，但它应该可以帮助您入门。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-10-10T14:59:40.067

为了压缩图像，我编写了一些函数：这将调整宽度并通过纵横比确定高度。请注意，如果图像的原始宽度小于新宽度，则图像未调整大小（您绝对可以在代码中更改）。

```
 public Bitmap ResizedImage(Stream imageStream, int newWidth)
    {
        Image image = Image.FromStream(imageStream);
        int newwidthimg = image.Size.Width;
        int newheightimg = image.Size.Height;
        if (newWidth <= image.Size.Width)
        {
            newwidthimg = newWidth;
            float AspectRatio = (float)image.Size.Width / (float)image.Size.Height;
            newheightimg = Convert.ToInt32(newwidthimg / AspectRatio);
        }
        Bitmap thumbnailBitmap = new Bitmap(newwidthimg, newheightimg);
        using (Graphics thumbnailGraph = Graphics.FromImage(thumbnailBitmap))
        {
            thumbnailGraph.CompositingQuality = CompositingQuality.HighQuality;
            thumbnailGraph.SmoothingMode = SmoothingMode.HighQuality;
            thumbnailGraph.InterpolationMode = InterpolationMode.HighQualityBicubic;
            var imageRectangle = new Rectangle(0, 0, newwidthimg, newheightimg);
            thumbnailGraph.DrawImage(image, imageRectangle);
        }
        return thumbnailBitmap; 
```

# android - 由于清单设置，Nexus 7 不兼容

> ID：12822279
> 
> 赞同：5
> 
> 时间：2012-10-10T14:51:51.083
> 
> 标签：android, nexus-7

我的应用程序没有出现在 Nexus 7 上。在设备列表中显示 Nexus 7 的 Play 商店控制台：

```
Unsupported devices due to your manifest settings:

Nexus 7(grouper)" 
```

我的清单如下所示：

```
...

<uses-sdk android:minSdkVersion="7" android:targetSdkVersion="14">
</uses-sdk>

<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
<uses-permission android:name="android.permission.WAKE_LOCK" />
<uses-permission android:name="android.permission.READ_PHONE_STATE" />
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
<uses-permission android:name="com.android.vending.BILLING" />

<uses-permission android:name="android.permission.ACCESS_WIFI_STATE" />

<compatible-screens>
    <screen android:screenSize="normal" android:screenDensity="mdpi"/>
    <screen android:screenSize="normal" android:screenDensity="hdpi"/>
    <screen android:screenSize="normal" android:screenDensity="xhdpi"/>

    <screen android:screenSize="large" android:screenDensity="ldpi"/>
    <screen android:screenSize="large" android:screenDensity="mdpi"/>
    <screen android:screenSize="large" android:screenDensity="hdpi"/>
    <screen android:screenSize="large" android:screenDensity="xhdpi"/>

    <screen android:screenSize="xlarge" android:screenDensity="ldpi"/>
    <screen android:screenSize="xlarge" android:screenDensity="mdpi"/>
    <screen android:screenSize="xlarge" android:screenDensity="hdpi"/>
    <screen android:screenSize="xlarge" android:screenDensity="xhdpi"/>
</compatible-screens>

... 
```

我不需要相机，这似乎是常见的不兼容问题。我没有使用该`supports-screens`条目（我想排除所有小屏幕设备以及 ldpi 普通设备，并且使用支持屏幕条目 AFAIK 是不可能的）。

知道可能是什么问题吗？

一个有趣的细节可能是 nexus 7 报告具有 DENSITY_TV (213dpi)。但是，“tv”不是 android:screenDensity 标签的可能值。

编辑：开发人员控制台报告以下所需权限：

```
Permissions: 
android.permission.INTERNET, 
android.permission.ACCESS_NETWORK_STATE, 
android.permission.WAKE_LOCK, 
android.permission.READ_PHONE_STATE, 
android.permission.WRITE_EXTERNAL_STORAGE, 
com.android.vending.BILLING, 
android.permission.ACCESS_WIFI_STATE

Features: 
android.hardware.screen.landscape, 
android.hardware.touchscreen, 
android.hardware.wifi 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-10T14:55:49.667

这确实是真的，你不能添加`"tvdpi"`到清单中。但是有一个解决方法，如果您`"213"`改为输入，正如您所指出的那样，这是`dpi`密度的值，eclipse 会对此感到满意，并且您的应用程序也将显示在 nexus 7 设备上。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-10T15:49:32.307

阅读您的权限列表，`READ_PHONE_STATE`可能会导致 Google Play 暗示您的应用需要`android.hardware.telephony`Nexus 7 上不可用的功能。

尝试将此添加到您的清单以解决此问题：

```
<uses-feature
    android:name="android.hardware.telephony"
    android:required="false" /> 
```

您可以在此处阅读有关[“暗示功能要求的权限”的](http://developer.android.com/guide/topics/manifest/uses-feature-element.html#permissions)更多信息。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-28T08:21:47.033

有一次，我上传了我的应用程序。Nexus 7 也无法使用它。就我而言，这是因为我的清单文件中有

```
<uses-permission android:name="android.permission.CALL_PHONE" /> 
```

我有上述线路是因为我可以在一个应用程序屏幕中拨打带有 Intent 的电话号码。此功能是次要功能，对于应用程序根本不是关键。也就是说，我希望应用程序在没有电话功能的设备中运行。

我在 Android 开发者博客中找到了这篇文章[《未来硬件幸福的五个步骤》，它准确地解释了这个问题。](http://android-developers.blogspot.co.uk/2010/10/five-steps-to-future-hardware-happiness.html)

将下一行添加到清单文件，生成新的 APK，并将其上传到 Play 商店，使我的应用程序与包括 nexus 7 在内的另一组设备兼容。

```
<uses-feature android:name="android.hardware.telephony" android:required="false"/> 
```

# error-handling - 在 prolog 中没有充分实例化参数

> ID：12822281
> 
> 赞同：2
> 
> 时间：2012-10-10T14:51:54.117
> 
> 标签：error-handling, prolog, clpr, instantiation-error

我正在尝试运行此代码，但每当我使用此查询时都会收到此错误：`gp174(P, S). ERROR: >=/2: Arguments are not sufficiently instantiated.`

这是我的代码：

```
call_option(B,S,C,E,P) :- 
    0 =< S, 
    S =< E / 100, 
    P = -C * B.

call_option(B,S,C,E,P) :- 
    S >= E / 100, 
    P = (100 * S - E - C) * B.

gp173(P) :- 
    call_option(1, 7, 200, 300, P).

% butterfly strike p174.
butterfly(S, H) :- 
    H = P1 + 2*P2 + P3,
    Buy = 1, Sell = -1,
        call_option(Buy, S, 100, 500, P1),
        call_option(Sell, S, 200, 300, P2),
        call_option(Buy, S, 400, 100, P3).

% goal for butterfly strike

gp174(P,S) :- 
    P >= 0, 
    butterfly(S,P). 
```

我该怎么办？
我应该在哪里加载我的 clpr 库？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T15:07:07.047

我尝试使用[文档库](http://www.swi-prolog.org/pldoc/doc_for?object=section%282,%27A.8%27,swi%28%27/doc/Manual/clpqr.html%27%29%29)进行修改：

```
:- [library(clpr)].

call_option(B,S,C,E,P) :-
    {0 =< S},
    {S =< E / 100},
    {P = -C * B}.

call_option(B,S,C,E,P) :-
    {S >= E / 100},
    {P = (100 * S - E - C) * B}.

gp173(P) :-
    call_option(1, 7, 200, 300, P).

% butterfly strike p174.
butterfly(S, H) :-
    {H = P1 + 2*P2 + P3,
    Buy = 1, Sell = -1},
        call_option(Buy, S, 100, 500, P1),
        call_option(Sell, S, 200, 300, P2),
        call_option(Buy, S, 400, 100, P3).

% goal for butterfly strike

gp174(P,S) :-
    {P >= 0},
    butterfly(S,P). 
```

这是结果：

```
?- gp174(P,S).
{S=2.0+0.01*P, P=<100.0, _G56405= -300.0+P, P>=0.0} ;
{S=4.0-0.01*P, P=<100.0, _G59475= -100.0-P, _G59488=100.0+P, P>=0.0} ;
false. 
```

高温高压

# javascript - jQuery：检测焦点何时离开元素的子元素，然后将焦点返回给触发元素

> ID：12822282
> 
> 赞同：1
> 
> 时间：2012-10-10T14:52:02.197
> 
> 标签：javascript, jquery

我有一个模态窗口脚本，我们正在努力提高可访问性要求的速度。该要求说，当您离开窗口时，它应该关闭。它还说，在关闭窗口时，原始触发元素必须重新获得焦点。

在做了一些挖掘之后，我发现了这个：[jQuery figuring if parent has lost 'focus'](https://stackoverflow.com/questions/2195877/jquery-figuring-out-if-parent-has-lost-focus)。似乎判断您何时离开窗口的最简单方法是跟踪 focusin 事件，当焦点在不是打开模式的子元素上触发时，关闭窗口。然而，这种方法是有问题的，正如您将看到的（更不用说对我来说有点太重了）。这是处理此问题的代码：

```
$('body').focusin(function(e) {
        if (!$(e.target).parent().is('.current-window')) {
            closeModal();
        }
    }); 
```

以及关闭窗口的功能：

```
function closeModal() {
        $('.modal-mask, .current-window').fadeOut('fast', function(){
            $(this).removeClass('current-window');
            $('.modal-mask').removeAttr('style');
            $('.modal-trigger').focus();
        });
    } 
```

现在很明显，当我运行此代码时，closeModal() 在 focusin 事件与最大调用堆栈之间来回触发，因此在将焦点赋予触发元素之前抛出“超出最大调用堆栈”错误消息。

有关完整代码，请参阅此小提琴：http: [//jsfiddle.net/pbredenberg/wxX4T/](http://jsfiddle.net/pbredenberg/wxX4T/)

我试图想出一种更好的方法来处理这个要求，或者至少避免无限循环。谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T15:19:03.833

我仍然无法发表评论，所以我必须提交这个作为答案：你为什么不跟踪你是否真的用像 window.closure 的 bool var 关闭窗口？我更新了示例： http: [//jsfiddle.net/kevkong/wxX4T/8/](http://jsfiddle.net/kevkong/wxX4T/8/) 这是你打算做什么？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T16:08:25.127

每当您打开模态框时，存储对被单击元素的引用。然后，当模式关闭时，您可以检索它并重新聚焦元素。

**工作演示：http:** [//jsfiddle.net/wxX4T/12/](http://jsfiddle.net/wxX4T/12/)

```
function closeModal(e) {
    if (e) e.preventDefault();

    // Rather than using a .current-window class
    // we can use the jQuery :visible pseudo-selector
    var $window = $(".window:visible");

    // Get our refernce to the focus target that was 
    // stored when the window was open.
    var $trigger = $window.data("focusTarget");

    // Close the window and mask
    $('.modal-mask, .window').fadeOut('fast', function() {
        // Focus on the original trigger
        $trigger.focus();
    });
}

$('.modal').click(function(e) {
    e.preventDefault();

    var $trigger = $(this);
    var $modal = $($trigger.attr("href")).fadeIn(300)
    $('.modal-mask').fadeIn(200);

    // I have omitted all the code that positions
    // the window (for the sake of clarity)
    // Feel free to add it back.
    // Store a reference to the trigger link in the modal's "data" hash 
    // so that when we close it later, we can retrieve the original 
    // trigger that opened the window.
    $modal.data("focusTarget", $trigger);
});

// Trigger window close based on Tab key
$(document).on("keydown", function(e) {
    // Only close modal if the tab key is pressed
    // AND if there is a visible modal window.
    if ((e.keyCode || e.which) === 9 && $(".window:visible").length > 0) {
        e.preventDefault();
        closeModal();
    }
});

$(document).on("click", ".window .close", closeModal);

$(document).on("click", ".modal-mask", function() {
    $(this).hide();
    closeModal();
});​ 
```

# vba - VBA 宏 Excel

> ID：12822283
> 
> 赞同：2
> 
> 时间：2012-10-10T14:52:03.563
> 
> 标签：vba, excel

我正在 Excel 中创建一个获取最高和最低数字的程序。我得到了最高的数字，但最低的数字始终保持在 0。请帮助我做错了什么。这是我正在使用的数字的屏幕截图：

![图片](../Images/e50b58eb876daad59a352f1bb4b0c6da.png)

这是我创建的代码：

```
Sub Code()
    Dim i As Integer
    Dim max, min As Long

    For i = 1 To 10

        If Cells(i, 1).Value < min Then
            min = Cells(i, 1).Value
        End If

        If Cells(i, 1).Value > max Then
            max = Cells(i, 1).Value
        End If

    Next i

    Cells(3, 4).Value = min
    Cells(4, 4).Value = max

End Sub 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T16:02:36.090

选择：

```
max = WorksheetFunction.max(Range("A1:A10"))
min = WorksheetFunction.min(Range("A1:A10")) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T14:56:09.160

您的`min`变量在声明时默认为 0。因此，由于您的值都不是负数，因此`min`变量将保持为零（没有任何值小于它）。下面的`If...Then`陈述永远不会是真的：

```
If Cells(i, 1).Value < min Then
    min = Cells(i, 1).Value
End If 
```

您有两种选择来解决此问题：

1.  将变量初始化为高数，例如 999
2.  读入第一个单元格中的值并将其设置为 min 的起点

# c# - SQLXML BulkLoader 没有抛出任何错误，但没有插入数据

> ID：12822284
> 
> 赞同：5
> 
> 时间：2012-10-10T14:52:03.850
> 
> 标签：c#, xml, xsd, bulkloader

我正在尝试将 C# 代码中的 SQLXMLBulkLoader4 用于 SQL 2008 DB。但是由于某种原因，尽管没有抛出任何错误，但它根本不会插入任何行。我使用了 bulkloads 自己的 ErrorLog 文件（检查可能不会导致崩溃的任何错误），但没有报告错误。

我有一个从供应商处下载的 XML 文件（基本上是产品列表），我编写了一个 XSD 以将字段与我们的数据库匹配。没有其他任何东西写入这些特定的表，也没有使用这些文件。

我的 BulkLoad 代码如下所示（我删除了实际的连接字符串值）：

```
public void Bulkload(string schemaFile, string xmlFile, string source)
    {
        SQLXMLBULKLOADLib.SQLXMLBulkLoad4 bulkload = new SQLXMLBULKLOADLib.SQLXMLBulkLoad4();

        try
        {
            bulkload.ConnectionString = "Provider=sqloledb;server=X;database=X;uid=X;pwd=X";
            bulkload.ErrorLogFile = k_ArticleInfoDirectory + source + "BulkLoadError.log";
            bulkload.KeepIdentity = false;
            bulkload.Execute(schemaFile, xmlFile);
        }
        catch (Exception e)
        {
            Console.WriteLine("Fel i BL: " + e);
            throw;
        }
        finally
        {
            bulkload = null;
        }

    } 
```

XML 看起来像这样（精简，下面的所有内容只是更多的产品字段，然后是更多的产品）：

```
<?xml version="1.0" encoding="utf-8"?>
<GetProductsResult xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  <Status xmlns="http://schemas.servicestack.net/types">
    <Code>0</Code>
    <Message>Ok</Message>
  </Status>
  <NumberOfProducts xmlns="http://schemas.servicestack.net/types">9826</NumberOfProducts>
  <Products xmlns="http://schemas.servicestack.net/types">
    <Product>
      <ProductID>1000002</ProductID>
      <CreatedDate>2011-11-24 15:54</CreatedDate>
      <UpdatedDate>2011-11-24 15:54</UpdatedDate>
      <Title>Vi tolererar inga förlorare - klanen Kennedy</Title>
      <Publisher>Piratförlaget</Publisher>
      ... And some more fields per Product 
```

我写的 XSD 看起来像这样（再次缩短）：

```
<?xml version="1.0" encoding="iso-8859-1"?>
<xs:schema targetNamespace="http://schemas.servicestack.net/types" xmlns:xs="http://www.w3.org/2001/XMLSchema" attributeFormDefault="qualified" elementFormDefault="qualified" xmlns:sql="urn:schemas-microsoft-com:mapping-schema">

<xs:annotation>
    <xs:appinfo>

        <sql:relationship name="Status"
        parent="tblElibProduct"
        parent-key="id"
        child="tblElibStatus"
        child-key="product_id" />
                    ... + Several other sql:relationships
            </xs:appinfo>
</xs:annotation>
    <xs:element name="GetProductsResult" sql:is-constant="1">
    <xs:complexType>
        <xs:sequence>
            <xs:element name="Status" sql:is-constant="1">
                <xs:complexType>
                    <xs:sequence>
                        <xs:element name="Code" type="xs:integer" minOccurs="0" />
                        <xs:element name="Message" type="xs:string" minOccurs="0" />
                    </xs:sequence>
                </xs:complexType>
            </xs:element>
            <xs:element name="NumberOfProducts" type="xs:string" sql:is-constant="1"/>
            <xs:element name="Products" sql:is-constant="1">
                <xs:complexType>
                    <xs:sequence>
                        <xs:element minOccurs="0" maxOccurs="unbounded" name="Product" sql:relation="tblElibProduct">
                            <xs:complexType>
                                <xs:sequence>
                                    <xs:element minOccurs="1" maxOccurs="1" name="CreatedDate" type="xs:date" sql:field="created_date" />
                                    <xs:element minOccurs="1" maxOccurs="1" name="UpdatedDate" type="xs:date" sql:field="updated_date" />
                                    <xs:element minOccurs="1" maxOccurs="1" name="Title" type="xs:string" sql:field="title" /> 
```

我对命名空间视而不见，但它们对我来说是正确的。（阅读许多类似的错误，其中不同的名称空间是原因）。代码在我的计算机上运行，​​我的计算机和带有数据库的计算机都可以访问包含 XML 和 XSD 文件的网络文件夹。

我已经尝试故意更改两个文件中的一些字段名称，并且 BulkLoader 突然在我刚刚更改的字段上引发错误。

我已经将我的 BulkLoader 代码和 XSD 与我在网上找到的示例进行了比较，但我找不到任何可以解释这种行为的差异。
我可能很容易忽略它，但我只是没有看到它。

任何为我指明正确方向的帮助都深受欢迎。

先感谢您！

（PS对不起，如果帖子以某种方式关闭，这是我第一次在这里发帖，但是我确实做了我的研究，我确实尝试遵循关于如何发布的指南=））

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T15:41:27.063

跟进您怀疑可能存在命名空间问题...

对于实例中限定的元素，命名空间确实匹配（在元素实例和元素声明之间）。

但它们并不都在另一个方向上匹配。模式声明了一个扩展名为 {http://schemas.servicestack.net/types}GetProductsResult 的元素，但输入实例中没有出现这样的元素（有一个 GetProductsResult，但它不是命名空间限定的）。

您可能想看看如果更改 XML 以使第一个开始标记读取会发生什么

```
<GetProductsResult 
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
  xmlns:xsd="http://www.w3.org/2001/XMLSchema"
  xmlns="http://schemas.servicestack.net/types" > 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T17:03:40.193

应始终遵循的第一条规则是：根据您的 XSD 验证您的 XML。在您的情况下，这听起来更像是您必须更改您的 XSD 而不是您的 XML，因为您似乎试图使您的 XSD 与您的 XML 相匹配——您说过`downloaded from a supplier`。您的解决方案应该使用供应商的文件，因为如果您希望稍后重新加载他们的文件，您不想继续更改它以适应似乎有问题的 XSD。

实际上，您似乎至少需要两个 XSD 文件：一个定义了一个没有目标命名空间的架构，它导入了另一个以`http://schemas.servicestack.net/types`. 有很多选项可让您从 XML 生成 XSD，并根据 XSD 验证 XML。

# core-data - 单个 NSMangedObjectContext 上的多个 NSFetchedResultsController

> ID：12822291
> 
> 赞同：1
> 
> 时间：2012-10-10T14:52:29.397
> 
> 标签：core-data, ios4, nsmanagedobjectcontext, nsfetchedresultscontroller

我正在运行最新的 XCode (4.5.1) 和 ios 模拟器 5.1。所以这就是问题所在，我在一个核心数据模型中有两个实体，以及代表它们的两个 tableviewcontrollers。我想设置两个 NSFetchedResultsControllers（每个 tableviewcontroller 一个），它们都在相同的上下文中工作，但在不同的实体上工作。当我创建第一个时，一切都很好，但是在 initWithFetchRequest: 方法中创建第二个强制 EXC_BAD_ACCESS。我可以提供使用的代码，但我相信这里没有必要。基本上，这是可能的，如果不是，那么我希望看到一个更好的解决方案来解决我的问题。编辑：代码：

```
showController.context = managedObjectContext;

self.showcaseController = [[UINavigationController alloc]initWithRootViewController:showController];
self.showcaseController.tabBarItem.title = @"Витрина";

categoryController = [[UMCategoriesController alloc] initWithNibName:@"UMCategoriesController" bundle:nil];
categoryController.context = managedObjectContext;

self.categoriesController = [[UINavigationController alloc]initWithRootViewController:categoryController]; 
```

所以基本上我有一个 UITabBarController 填充了两个 UINavigationController，每个都以 UIViewController 开头，每个都带有 UITableView。我只是设置了在 AppDelegate 中创建的 NSManagedObjectContext。这是 UMShowcaseController.m NSFetchedResultsController 的设置器。当我只在这里使用 NSFetchedResultsController 时，这非常有效。

```
-(NSFetchedResultsController *) frc
{
if (_frc != nil)
{
    return _frc;
}
NSFetchRequest *request = [[NSFetchRequest alloc] init];
[request setEntity:[NSEntityDescription entityForName:@"Goods" inManagedObjectContext:context]];
_frc = [[NSFetchedResultsController alloc] initWithFetchRequest:request managedObjectContext:context sectionNameKeyPath:nil cacheName:nil];
_frc.delegate = self;
NSError __autoreleasing *error = nil;

if (![_frc performFetch:&error]) {
}
return _frc;
} 
```

但是，当我将 NSFetchedResultsController 添加到第二个 UIViewController 时，UMCategoriesView - 它崩溃了。

```
if (_frc != nil)
{
    return _frc;
}
NSFetchRequest *request = [[NSFetchRequest alloc] init];
[request setEntity:[NSEntityDescription entityForName:@"Categories" inManagedObjectContext:context]];
_frc = [[NSFetchedResultsController alloc] initWithFetchRequest:request managedObjectContext:context sectionNameKeyPath:nil cacheName:nil]; //here it fails
_frc.delegate = self;
NSError __autoreleasing *error = nil;

if (![_frc performFetch:&error]) {
}
return _frc; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T11:35:49.570

该死的我。这里唯一缺少的是第二个 NSFetchedResultsController 中的排序描述符。重新阅读文档后一切正常。

阅读文档，不要忘记设置排序描述符。

Martin，感谢您的评论，是您让我重新阅读了文档。

# java - NIO Selector：如何在选择时正确注册新通道

> ID：12822298
> 
> 赞同：12
> 
> 时间：2012-10-10T14:53:02.123
> 
> 标签：java, multithreading, nio

我有一个`Thread`带有私有`Selector`和公共`register(SelectableChannel channel, ...)`方法的子类，它允许其他线程将通道注册到选择器。

[正如这里](https://stackoverflow.com/a/3191377/589008)回答的那样，通道`register()`在选择器`select()`/期间阻塞，`select(long timeout)`所以我们需要`wakeup()`选择器。

我的线程无限期地选择（除非它被中断）并且它实际上设法在`register()`调用通道之前进入下一个选择。所以我想我用一个带`synchronized`块的简单锁来确保`register()`首先发生。

代码：（为了便于阅读，删除了不相关的代码）

```
public class SelectorThread extends Thread {
  ...

  public void register(SelectableChannel channel, Attachment attachment) throws IOException {
    channel.configureBlocking(false);
    synchronized (this) { // LOCKING OCCURS HERE
      selector.wakeup();
      channel.register(selector,
                       SelectionKey.OP_READ,
                       attachment);
    }
  }

  @Override
  public void run() {
    int ready;
    Set<SelectionKey> readyKeys;
    while (!isInterrupted()) {
      synchronized (this) {} // LOCKING OCCURS HERE

      try {
        ready = selector.select(5000);
      } catch (IOException e) {
        e.printStackTrace();
        continue;
      }

      if (ready == 0) {
        continue;
      }

      readyKeys = selector.selectedKeys();

      for (SelectionKey key : readyKeys) {
        readyKeys.remove(key);

        if (!key.isValid()) {
          continue;
        }

        if (key.isReadable()) {
          ...
        }
      }
    }
  }
} 
```

This simple lock allows `register()` to happen before the thread continues with the next select loop. As far as I tested, this works as supposed.

**Questions:** Is that a "good" way to do it or are there any serious downsides to that? Would it be better to use a List or Queue (as suggested [here](https://stackoverflow.com/a/2179612/589008)) to store channels for registration, or a more sophisticated lock like [this](https://stackoverflow.com/a/1112809/589008) instead? What would the Pros/Cons of that be? Or are there any "even better" ways?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T16:48:03.883

Just treat Selector etc as not thread safe, perform all select related actions on the same thread, as Darron suggested.

The concurrency model of NIO selector is *bullshit*. I must call it out, because it's a huge waste of time for everyone who try to study it. In the end, the conclusion is, forget it, it's not for concurrent use.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-11T03:11:51.787

All you need is a `wakeup()` before the `register()`, and, in the select loop, a short sleep before continuing if 'ready' is zero, to give `register()` a chance to run. No additional synchronisation: it's bad enough already; don't make it any worse. I'm not a fan of these queues of things to register, cancel, change interest ops, etc: they just sequentialize things that can really be done in parallel.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-11T05:12:10.330

I am actually surprised the lock acquisition with the empty block is not removed at compile time. Pretty cool that it works. I mean it works, it's preemptive, it's not the prettiest approach, but it works. It's better than a sleep as it is predictable and since you use the wakeup call you know progress will be made as needed rather than on a periodic update if you purely relied on the select timeout.

The main downside of this approach is that you are saying that calls to register trump anything else, even servicing requests. Which may be true in your system, but usually this is not the case, I would say this is a possible issue. A minor issue which is more forward thinking is that you lock on the SelectorThread itself which is sort of a larger object in this case. Not bad, not great though as you expand, this lock will just have to documented and taken into account whenever other clients use this class. Personally I would go with making another lock altogether to avoid any unforeseen future hazards.

Personally, I like the queuing techniques. They assign roles to your threads, like a master and workers this way. Whereas all types of control happen on the master, like after every select check for more registrations from a queue, clear and farm out any read tasks, handler any changes in the overall connection setup (disconnects etc)... The "bs" concurrency model seems to accept this model pretty well and it's a pretty standard model. I don't think it's a bad thing as it makes the code a bit less hacky, more testable, and easier to read imo. Just takes a little more time to write out.

While I will admit, it has been a long time since I last wrote this stuff, there are other libraries out there that sort of take care of the queueing for you.

[Grizzly Nio Framework](http://grizzly.java.net/) while a little old, last time I used it, the main runloop was not bad. It setup a lot of the queuing for you.

[Apache Mina](http://mina.apache.org/) Similar in that it provides a queuing framework.

But I mean in the end it depends on what you are working on.

*   is it a one man project just to play around with the framework?
*   is it a piece of production code that you want to live on for years?
*   is it a piece of production code that you are iterating on?

Unless you are planning on using this as a core piece of a service you are providing to customers, I would say your approach is fine. It may just have maintenance issues in the long run.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-01-07T16:37:54.550

A possible way is injecting the channel registration (or other external task that need to be done within the NIO loop) to the selection loop, demo as bellow.

```
//private final Set<ExternalEvent> externalTaskEvents = ConcurrentHashMap.newKeySet();
//...

while (!Thread.currentThread().isInterrupted()) {
    try {
        selector.select();
    } catch (IOException ex) {
        ex.printStackTrace(Log.logWriter);
        return;
    }

    //handle external task events
    Iterator<ExternalEvent> eitr = externalTaskEvents.iterator();
    while (eitr.hasNext()) {
        ExternalEvent event = eitr.next();
        eitr.remove();
        if(event.task != null){
            event.task.accept(event);
        }
    }

    //handle NIO network events
    Iterator<SelectionKey> nitr = selector.selectedKeys().iterator();
    while (nitr.hasNext()) {
        SelectionKey key = nitr.next();
        nitr.remove();
        if (!key.isValid()) {
            continue;
        }
        try {
            if (key.isAcceptable()) {
                onAcceptable(key);
            } else if (key.isConnectable()) {
                onConnectable(key);
            } else {
                if (key.isReadable()) {
                    onReadable(key);
                }
                if (key.isWritable()) {
                    onWritable(key);
                }
            }
        } catch (IOException | InterruptedException | CancelledKeyException ex) {
            ex.printStackTrace(Log.logWriter);
            //...
        }
    }
} 
```

# vba - 在 VBA 中重置表单

> ID：12822301
> 
> 赞同：8
> 
> 时间：2012-10-10T14:53:07.537
> 
> 标签：vba

我有一个带有多种选择选项的 VBA 表单，包括下拉菜单、文本字段、复选框和单选。

我只是想知道按下按钮清除所有这些字段的最佳方法。我的一个朋友试图通过将下面的代码通过电子邮件发送给我来提供帮助，但不幸的是它不起作用，我检查了变量名。

关于如何改进它的任何建议？

提前致谢。

```
Private Sub btnReset_Click()

Unload Me
UserForm.Show

End Sub 
```

这是用户表单的其他代码。

```
Dim DeptCode 'Holds department code

Private Sub UserForm_Initialize()

    Dim c_deptCode As Range
    Dim c_deptName As Range
    Dim deptCodes As Variant
    Dim deptNames As Variant

    Dim ws_dept As Worksheet
    Set ws_dept = Worksheets("lookupDept")

    ' Assign each range to an array containing the values
    deptCodes = Choose(1, ws_dept.Range("deptCode"))
    deptNames = Choose(1, ws_dept.Range("deptName"))

    For i = 1 To ws_dept.Range("deptCode").Rows.Count
        ' Create the combined name (code + space + name)
        CombinedName = deptCodes(i, 1) & " - " & deptNames(i, 1)
        cbo_deptCode.AddItem CombinedName
    Next i

End Sub 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-10-10T16:51:51.707

我认为当它到达 Unload Me 行时，代码执行会停止，这就是它不适合你的原因。这是一个通用事件过程，用于重置表单上的所有（大部分）控件。

```
Private Sub cmdReset_Click()

    Dim ctl As MSForms.Control

    For Each ctl In Me.Controls
        Select Case TypeName(ctl)
            Case "TextBox"
                ctl.Text = ""
            Case "CheckBox", "OptionButton", "ToggleButton"
                ctl.Value = False
            Case "ComboBox", "ListBox"
                ctl.ListIndex = -1
        End Select
    Next ctl

End Sub 
```

它不会重新填充组合框和列表框，只是清除选择，这是我假设你想要的。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-03-19T08:25:11.327

I know this question is almost 2 years old BUT I was looking for an answer like this. However, I am using Access 2010 and discovered the function did not work entirely as expected:

*   ctl can be Dim-ed simply as Control
*   For a textbox, the ctl.Text property can only be assigned to if the control has focus (use ctl.Value instead)
*   If an OptionButton is part of an OptionGroup it can not be assigned a value

So with these issues in mind, here is my rewritten function:

```
Private Sub resetForm()

    Dim ctl As Control ' Removed MSForms.

    For Each ctl In Me.Controls
        Select Case TypeName(ctl)
            Case "TextBox"
                ctl.value = ""
            Case "CheckBox", "ToggleButton" ' Removed OptionButton
                ctl.value = False
            Case "OptionGroup" ' Add OptionGroup
                ctl = Null
            Case "OptionButton" ' Add OptionButton
                ' Do not reset an optionbutton if it is part of an OptionGroup
                If TypeName(ctl.Parent) <> "OptionGroup" Then ctl.value = False
            Case "ComboBox", "ListBox"
                ctl.ListIndex = -1
        End Select
    Next ctl

End Sub 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-11-10T13:54:50.727

对于最新版本的 Access，Microsoft 现在已经很好地记录了这一点。看起来上面的一些答案是指旧版本。下面的代码在我的应用程序中完美运行。我只包含了我需要的控件类型，但您可以在下面的 Microsoft 链接中找到任何其他控件的文档。

参考：[https ://msdn.microsoft.com/en-us/vba/access-vba/articles/textbox-controltype-property-access?f=255&MSPPError=-2147217396](https://msdn.microsoft.com/en-us/vba/access-vba/articles/textbox-controltype-property-access?f=255&MSPPError=-2147217396)

```
Dim ctl As Control

For Each ctl In Me.Controls
    With ctl
        Select Case .ControlType
            Case acTextBox
                .Value = ""
            Case acCheckBox
                .Value = False
            Case acComboBox
                .SetFocus
                .SelText = ""
            Case acListBox
                .Value = Null
        End Select
    End With
Next ctl 
```

请注意，对于组合框，您必须在设置值之前在那里设置焦点。参考：[https ://msdn.microsoft.com/en-us/vba/access-vba/articles/combobox-seltext-property-access](https://msdn.microsoft.com/en-us/vba/access-vba/articles/combobox-seltext-property-access)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-02-13T19:43:11.060

添加到最新答案 - 如果您的某些控件具有默认值，您可以使用

`ctl.Value = ctl.DefaultValue`

这对我有用，至少适用于复选框和组合框。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-01-22T13:57:47.170

你可以试试这个：

```
Private Sub btnReset_Click()

    Call UserForm_Initialize

End Sub 
```

# php - 混淆了php中的选定值

> ID：12822306
> 
> 赞同：-1
> 
> 时间：2012-10-10T14:53:16.313
> 
> 标签：php

首先，您将被要求输入/选择教授编号。然后会出现该教授的信息，并且有一个科目的下拉菜单。但我希望该教授下的主题是该选择标签中选择的主题。这是为了更新。因此，显示的值来自数据库。

我在 php 中有这段代码

```
echo"<select name ='sub_code' >";

$res = mysql_query("SELECT *FROM arsy_subject ORDER BY arsy_sub_Code");

while($row = mysql_fetch_array($res))
{
echo("<option selected='$_POST[arsy_sub_Code]'  value = '" .$row['arsy_sub_Code']. "'>" .$row['arsy_sub_Code'] . "/" .$row['arsy_Description'] . "</option>");
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T15:09:46.310

是否要将所选行设为与`$_POST[arsy_sub_Code]`???具有相同值的行

将代码更改为此：

```
while($row = mysql_fetch_array($res)) {
    $selected=""; 

    if ($_POST[arsy_sub_Code]==$row['arsy_sub_Code']){
        $selected='selected="selected"'; 
    }

    echo("<option " . $selected . " value = '" .$row['arsy_sub_Code']. "'>" .$row['arsy_sub_Code'] . "/" .$row['arsy_Description'] . "</option>"); 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T15:01:13.580

看起来您正在发布`arsy_sub_Code`并希望所选值保持选中状态。尝试：

```
echo "<select name ='sub_code' >";

$res = mysql_query("SELECT * FROM arsy_subject ORDER BY arsy_sub_Code");

if($res && mysql_num_rows($res) > 0) // PLEASE check to make sure the query worked before trying to access rows
{
    while($row = mysql_fetch_assoc($res))
    {
        $selected = isset($_POST['sub_code']) && $_POST['sub_code'] == $row['arsy_sub_Code'] ? 'selected' : '';

        echo "<option selected='$selected'  value = '" .htmlentities($row['arsy_sub_Code']). "'>" .htmlentities($row['arsy_sub_Code']) . "/" .htmlentities($row['arsy_Description']) . "</option>";
    }  
}

echo "</select>"; 
```

* * *

**编辑：**

如果这是允许您编辑教授详细信息的页面，并且您希望下拉菜单显示教授的主题，那么您需要`$_POST['sub_code']`用包含教授当前子代码的变量替换，所以可能类似于

```
$professor['sub_code']; // assuming you have selected the professor details and have stored them in an array 
```

强制性旁注：不要在已弃用的`mysql_*`库中编写新代码，使用 PDO 或 MySQLi。

# html - CSS样式表移动布局，页面右侧巨大的空白

> ID：12822307
> 
> 赞同：0
> 
> 时间：2012-10-10T14:53:16.833
> 
> 标签：html, css, layout, mobile

我正在添加移动布局，一切都设置好了，但是页面上有一个大约 200-300px 的巨大白色间隙，我使用了 overflow-x: hidden 但是在 iphone 上它仍然允许滚动。

截图：http: [//imgur.com/9ICyy](http://imgur.com/9ICyy)

我不知道是什么导致了我难以置信的差距！花了3个小时寻找它。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T14:55:40.557

您是否使用过视口元标记？

[https://developer.mozilla.org/en-US/docs/Mobile/Viewport_meta_tag](https://developer.mozilla.org/en-US/docs/Mobile/Viewport_meta_tag)

```
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"> 
```

# image-processing - 使用 IplImage (C++) 和 BufferedImage (JAVA) 提取不同的像素值

> ID：12822312
> 
> 赞同：0
> 
> 时间：2012-10-10T14:53:24.950
> 
> 标签：image-processing, bufferedimage, iplimage

我目前正在将我在 JAVA 中完成的代码转换为使用某些机器学习算法的 C++。问题是，如果我在 java 下加载图像相对于在 C++ (OpenCV) 中加载它们，某些像素值是不同的。JAVA代码是：

```
BufferedImage img = ImageIO.read(new java.io.FileInputStream("lena.jpg")); 
```

C++ 代码是：

```
IplImage *img = cvLoadImage("lena.jpg", CV_LOAD_IMAGE_COLOR ); 
```

当我尝试比较像素值时，我得到的差异如下：

图像

```
169 72 83 
174 70 79 
183 72 81 
188 74 82 
```

缓冲图像

```
170 63 73
175 65 74
183 72 79
188 74 82 
```

如您所见，这些值相似，但不相同，这会导致机器学习算法出现一些问题。有人有同样的问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T19:43:21.207

Jpeg 解码器库实现可能不同。不是什么大问题。

# android - 对话框的 onSaveInstanceState/onRestoreInstanceState

> ID：12822318
> 
> 赞同：5
> 
> 时间：2012-10-10T14:53:44.333
> 
> 标签：android, dialog, save, restore

我试图弄清楚 onSaveInstanceState/onRestoreInstanceState 如何与对话框一起工作。使用 Acitivity 很容易，因为它们在 Activity 被杀死/重新启动时被调用。

我们的 Activity 显示一个登录对话框。何时调用对话框的 onSaveInstanceState/onRestoreInstanceState？

当我们解开对象时它会自动调用吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-04T06:05:05.057

@theblitz：是的，从 Activity 管理 Dialog 的生命周期有点不方便。

我在 Dialog 中有 getter 方法来检索其状态变量，然后将它们存储在 Activity 的 Bundle 中。在 Activity 的 onResume 或 onCreate 时，我从 Bundle 中检索存储的变量，并将它们传递给 Dialog 的参数化构造函数以创建一个新的 Dialog。所以现在我有一个对话框，它给人一种天生状态维护的错觉。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-04-05T07:06:36.337

里面的文件`Dialog`说：

> 注意：活动提供了一种工具来管理对话的创建、保存和恢复。请参阅 {@link Activity#onCreateDialog(int)}、{@link Activity#onPrepareDialog(int, Dialog)}、{@link Activity#showDialog(int)} 和 {@link Activity#dismissDialog(int)}。

那么如果你想知道对话框的onSaveInstanceState/onRestoreInstanceState是什么时候调用的呢？您应该在其中创建对话框`Activity#onCreateDialog(int)`并显示对话框`Activity#showDialog(int)`。你可以看到`Activity#performSaveInstanceState`，它会调用`Activity#saveManagedDialogs`。但是你现在应该使用`DialogFragment`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T15:30:04.350

不应使用或期望对话像常规活动一样工作。它们应该用于收集用户输入或显示信息。您可以使用复选框、文本视图等 UI 元素为它们创建自定义布局，并捕获用户信息并将其存储以供以后使用。

在您的登录对话框中，通过为用户名、密码等创建带有文本视图的自定义布局来获取用户数据，将此信息存储在您的应用程序中，然后以您喜欢的方式使用它。

这是有关如何正确使用对话框的官方文档的出色指南：

[http://developer.android.com/guide/topics/ui/dialogs.html](http://developer.android.com/guide/topics/ui/dialogs.html)

# c - 从 C 中的输入重定向中读取整数

> ID：12822321
> 
> 赞同：2
> 
> 时间：2012-10-10T14:53:54.073
> 
> 标签：c, unix, redirect, scanf, fgets

在 Unix 命令行中，我需要使用输入重定向来指定输入文件：

`./a.out < filename`

这是我的源代码：

```
 int main(int argc, char *argv[]) {

            char fileName[30];

            fgets(fileName, sizeof fileName, stdin);

            printf("%s\n", fileName);
    } 
```

该程序打印一个整数而不是文件名。如果我使用，我会得到相同的结果`scanf("%s", fileName);`

我的 google-fu 让我失望了。我究竟做错了什么？

**编辑**：需要使用输入重定向（`<`特别是），因此命令行参数不是一个选项。但是，我不需要真正知道文件名，我只需要从文件中读取换行符分隔的整数。看来我问错问题了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T15:01:33.607

> 我只需要从文件中读取换行符分隔的整数。看来我问错问题了。

Shell 的输入重定向运算符`<`将命名文件与程序的标准输入相关联。您的程序不需要采取任何特殊操作来打开文件——它已经打开了。只需从输入中读取，就好像用户在键盘上打字一样：

```
/* foo.c */
#include <stdio.h>
int main(int ac, char **av) {
  int i;
  while(scanf("%d", &i) == 1) {
    printf("Got one!: %d\n", i);
  }
  return 0;
} 
```

编译你的程序：

```
cc foo.c 
```

并这样运行它：

```
a.out < filename 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-10T14:57:20.183

没有（简单的）方法可以从重定向的流中获取文件名，因为您的应用程序看到的只是一个打开的文件描述符。有一种仅适用于 Linux 的“硬”方式：`readlink("/proc/self/fd/0")`.

如果您必须知道文件名，请将其作为常规参数 ( `./a.out filename`) 传递并查看`argv[1]`而不是使用输入重定向。

但是，由于您只想读取文件（并且您不关心文件名），因此只需`stdin`按照您已经在执行的操作进行读取。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T14:57:02.397

看起来您正试图通过标准输入将一些文件名传递给您的程序。在这种情况下`filename`应该是一个文件，而不是一个字符串。您只需将所需的文件名作为命令参数 ( `./a.out filename`) 传递，然后将其从`argv`.

# c# - 从列表中循环创建带有单击事件处理程序的菜单项

> ID：12822323
> 
> 赞同：2
> 
> 时间：2012-10-10T14:54:01.133
> 
> 标签：c#, wpf, event-handling, menuitem

我想从列表中循环创建一些菜单项。我是这样尝试的：

```
MenuItem mnuItemDepth = new MenuItem();
foreach (ClassDepth depth in ClassDepths.ListOfDepths)
{
    MenuItem it = new MenuItem();
    it.Header = depth.name;
    it.Click += new RoutedEventHandler((s, a) => { ChangeDepth(depth); });
    mnuItemDepths.Items.Add(it);
} 
```

ClassDepths.ListOfDepths 的每一项都应该成为一个菜单项。它的工作原理除了一件事：

click 事件触发 ChangeDepth 方法，每个菜单项具有相同的参数（深度）。似乎添加的最后一个菜单项定义了由事件处理程序为从列表中创建的每个菜单项传递给 ChangeDepth 的深度参数。有谁知道为什么？菜单项不同，但每个菜单项使用相同的参数调用 ChangeDepth。

我希望我的解释没有那么糟糕。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T15:01:58.300

这是在闭包中捕获循环变量“深度”的问题。您可以阅读比我[在这里](http://blogs.msdn.com/b/ericlippert/archive/2009/11/12/closing-over-the-loop-variable-considered-harmful.aspx)给出的更好的解释。要使此代码按预期工作，只需将循环变量复制到局部变量中并传递它：

```
MenuItem mnuItemDepth = new MenuItem();
foreach (ClassDepth depth in ClassDepths.ListOfDepths)
{
    var tempDepth = depth;  //capture the loop variable here
    MenuItem it = new MenuItem();
    it.Header = depth.name;
    it.Click += new RoutedEventHandler((s, a) => { ChangeDepth(tempDepth); });
    mnuItemDepths.Items.Add(it);
} 
```

# ruby-on-rails - Rails 3.2.5：搜索的简单问题，如果没有找到，需要返回“未找到结果”

> ID：12822325
> 
> 赞同：1
> 
> 时间：2012-10-10T14:54:06.053
> 
> 标签：ruby-on-rails, search, conditional

我看过一些 Railscast，我知道这很简单，但无法设置。

实际的 SEARCH 本身工作正常。

例如，如果我输入“我们”，它会返回所有带有“我们”的结果。很公平。

在我的listing.rb 文件中，我有

```
 def self.search(search)
    s =  "%#{search}%"
    if search
      find(:all, :conditions => ["comments LIKE ? or doctor LIKE ? or website LIKE ? or     
      url LIKE ? or date LIKE ?", s, s, s, s, s])
    else
      find(:all)
    end
  end 
```

在我的 listings_controller 文件中，我有：

```
def index
  @listings = Listing.search(params[:search_text])
end 
```

所以在其他部分我显然不想要 find(:all)

return none 或 find none 的编码等价物是什么？返回零？

如果您在表单本身中并且它是空白的并且您按回车键，它应该不返回任何内容并且应该显示“未找到结果”或类似的内容。

通知本身是否必须在控制器中，我的意思是我不能像渲染：text => 'No results found' 之类的吗？

或类似的东西

```
elsif
  search.blank? 
  render [:index], flash[:notice] = 'No Results Found'
end 
```

我知道这很简单，但已经离开了编码游戏一段时间，而且对 RoR 来说总体上相对较新。

非常感谢任何输入。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T15:02:29.057

我不认为代码必须在控制器中

```
 def self.search(search)
    s =  "%#{search}%"
    if search
      find(:all, :conditions => ["comments LIKE ? or doctor LIKE ? or website LIKE ? or     
      url LIKE ? or date LIKE ?", s, s, s, s, s])
    else
      nil
    end
  end 
```

并且在视野中

```
<% if @listings.present? %>
 //some code here 
<% else %>
  <p>No results found</p>
<% end %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T14:58:05.010

尝试根据您的代码进行更改

```
def self.search(search)
    s =  "%#{search}%"
    if search
      where("comments like (?) or doctor like (?)",s,s)
    else
     all
    end
  end 
```

# vba - 从后台和任务栏中隐藏 MS Access

> ID：12822326
> 
> 赞同：0
> 
> 时间：2012-10-10T14:54:11.960
> 
> 标签：vba, ms-access

我期待在我的项目运行时隐藏它的 Access 背景，以使其具有更专业的外观并使其像独立应用程序一样运行。我正在使用 Access 2003，并且在加载项目时已经打开了一个表单。我想在`Private Sub Form_Open(Cancel As Integer)`该表单中添加一些代码来隐藏 Access 背景。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T14:54:11.960

以下内容适用于旧版本的 Access（在 Access 2003 上测试）：

```
Option Compare Database 
Option Explicit 

Global Const SW_HIDE = 0 
Global Const SW_SHOWNORMAL = 1 
Global Const SW_SHOWMINIMIZED = 2 
Global Const SW_SHOWMAXIMIZED = 3 

Private Declare Function apiShowWindow Lib "user32" _ 
Alias "ShowWindow" (ByVal hWnd As Long, _ 
ByVal nCmdShow As Long) As Long 

Function fSetAccessWindow(nCmdShow As Long) 

    Dim loX As Long 
    Dim loForm As Form 
    On Error Resume Next 
    Set loForm = Screen.ActiveForm 

    If Err <> 0 Then 
        loX = apiShowWindow(hWndAccessApp, nCmdShow) 
        Err.Clear 
    End If 

    If nCmdShow = SW_SHOWMINIMIZED And loForm.Modal = True Then 
        MsgBox "Cannot minimize Access with " _ 
        & (loForm.Caption + " ") _ 
        & "form on screen" 
    ElseIf nCmdShow = SW_HIDE And loForm.PopUp <> True Then 
        MsgBox "Cannot hide Access with " _ 
        & (loForm.Caption + " ") _ 
        & "form on screen" 
    Else 
        loX = apiShowWindow(hWndAccessApp, nCmdShow) 
    End If 
    fSetAccessWindow = (loX <> 0) 
End Function 
```

只需调用`fSetAccessWindow(0)`隐藏和`fSetAccessWindow(1)`显示。或者，使用`fSetAccessWindow(2)`和`fSetAccessWindow(3)`显示最小化/最大化。你也可以使用`Global Const`。请注意：访问将从任务栏中隐藏。

如果它不适用于 Access 2010，这里是另一个可以工作的代码：[http ://www.tek-tips.com/faqs.cfm?fid=2562](http://www.tek-tips.com/faqs.cfm?fid=2562)

**表格必须是模态的**，否则将不起作用。如果由于某种原因您搞砸了并且 Access 仍在后台运行但未显示在任务栏或任务管理器中，请再次双击任何 Access 项目（因为 Access 仍在运行，所以不会发生任何事情），然后按 ALT+TAB 键到达访问图标（它应该神奇地出现）。没有任何反应，因为它被隐藏了，但是如果它仍然具有焦点，现在可以使用 ALT+F4 将其关闭，从而阻止您重新启动计算机...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-12-29T21:42:18.030

在 Ms Access 2003 中，一种简单的方法似乎使表单 1\. 弹出 2\. 边框样式无 3\. 在表单加载事件上运行最大化命令

```
Private Sub Form_Load()
   DoCmd.Maximize
End Sub 
```

# google-analytics - 跟踪同一谷歌分析帐户下的多个域

> ID：12822327
> 
> 赞同：2
> 
> 时间：2012-10-10T14:54:15.087
> 
> 标签：google-analytics, multiple-domains

我有两个域 mysite.com 和 mysite.cz，我想查看这两个域的流量来源，我目前不能，因为我只跟踪“.com”域。任何想法如何实现这一目标？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-02-13T08:04:52.993

除了 s6mike 你还可以实现跨域自动链接插件：

为了简化跨域链接过程，假设您有一个托管在 source.com 上的网站，您想通过跨域跟踪进行跟踪：

*   目的地.com
*   test.destination.com/page2
*   test.dest3.com?page4

**代码**

```
//Load the plugin.
ga('require', 'linker'); 
```

定义域

```
// Define which domains to autoLink.
ga('linker:autoLink', ['destination.com', 'dest3.com']); 
```

或用正则表达式定义

```
// Define which domains to autoLink using a regular expression.
ga('linker:autoLink', [/^example\.(com|net)$/]); 
```

将`allowLinker`配置参数设置为`true`

```
ga('create', 'UA-XXXXXX-X', 'auto', {
  'allowLinker': true
}); 
```

**资源**

[https://developers.google.com/analytics/devguides/collection/analyticsjs/cross-domain#autolink](https://developers.google.com/analytics/devguides/collection/analyticsjs/cross-domain#autolink)

**编辑**

建立域链接后，您将只能在内容报告中看到请求 URI，而不是给定页面的顶级域或子域。

1.  为您的主域设置一个没有过滤器的主视图（配置文件）。

2.  创建一个视图（配置文件），特别是用于跨域跟踪和重复使用主跟踪代码

    *   查看（配置文件）设置页面 -> 添加过滤器链接

    *   添加新过滤器

    *   自定义过滤器 -> 过滤器类型设置：高级

    *   FieldA 到主机名和 FieldB 到请求 URI

    *   将字段 A 和字段 B 的值设置为 (.*)

    *   将 Output To --> Constructor 选项设置为 Request URI: $A1$B1

您的报告现在将显示：

```
example.com/index.php
example.net/more.php
example.cz/more.php 
```

**资源**

[https://developers.google.com/analytics/devguides/collection/gajs/gaTrackingSite?csw=1#keyComponents](https://developers.google.com/analytics/devguides/collection/gajs/gaTrackingSite?csw=1#keyComponents)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-11T06:04:45.503

您需要在两个站点之间实现跨域跟踪，这并非易事。这里有很好的建议：

[Google Analytics 跨域跟踪和 _setDomainName()](https://stackoverflow.com/questions/9534793/google-analytics-cross-domain-tracking-and-setdomainname)

# javascript - 用于仅验证字母数字字符句号、逗号、冒号和分号的正则表达式

> ID：12822330
> 
> 赞同：-3
> 
> 时间：2012-10-10T14:54:16.330
> 
> 标签：javascript, regex, alphanumeric

我对正则表达式和 JavaScript 很陌生。

我需要一个正则表达式来仅验证字母数字字符和句号 (.)、逗号 (,)、冒号 (:) 和分号 (;)。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-10T15:12:44.877

如果要验证整行是否仅包含允许的字符：

`var regexp = new RegExp(/^[a-zA-Z0-9.,:;]+$/);`

`^`在行首匹配

`[]`匹配被包围的字符之一

`+`使前一个元素一次或多次

`$`匹配行尾

`+`如果字符串允许为空，则将`*`

# powershell - 比较 Powershell 中的两个目录并使用不比较

> ID：12822333
> 
> 赞同：0
> 
> 时间：2012-10-10T14:54:40.603
> 
> 标签：powershell, move, directory, robocopy

我尝试比较 2 个文件夹。**甲**和**乙**。 **B**是**A**的备份文件夹。首先，我想检查文件夹**A**中是否有任何文件已被删除，如果是，我想从**B**中取出相应的文件并移动它。然后我可以继续 RoboCopy /mir **A**再次创建备份。

我的问题是如何比较两个目录（A 和 B 有子文件夹等），然后移动已删除的文件。这是应该执行此任务的代码。

```
#region | Global Variables 
$backupFolder = "Sandbox_Backup"
$UsbDisk = "C:\Users\pullrich\Desktop"
#endregion 

$date = Get-Date -Format G
# Create Log that Script has been started
MyLog "--- Script has been started at $date ---" 0
$testfolder = Test-Path "$UsbDisk\$backupFolder"  
 # If a Backup folder already exist then Compare files and see if any changes have been made
        if ( $testfolder -eq $true ) { #IF_2  

                    # Copy deleted files to BackUp Folder
                    MyLog "Check for Deleted Files on Data_01:\" 0                  
                    $source = $testfolder + "\Data_01"
                    $sourcelist = Get-ChildItem $source -Recurse
                    $destination = "$UsbDisk\$backupFolder\Data_01\_DeletedFiles"
                    $testDestination = Test-Path $destination
                    if ( $testDestination -eq $false ){
                        mkdir $destination
                    }

                    foreach ($file in $sourcelist){
                    $result = test-path -path "C:\Users\pullrich\Desktop\Sandbox\Data_01*" -include $file.Name
                        if ( -not $result ){
                        $CopyFile = $file.DirectoryName + "\" + $file.Name
                        Copy-Item $CopyFile -Destination $destination
                        Remove-Item $CopyFile
                        }

                    }

                    # Start Synchronizing Data_01:\
                    MyLog "Start Synchronizing Data_01:\" 0
                    Robocopy "C:\Users\pullrich\Desktop\HP-Sandbox\Data_01" "$UsbDisk\$backupFolder\Data_01" /mir /r:2 /w:3 /M /XD VM_*

                    MyLog "Data_01:\ is up to Date" 0 
        } #IF_2 
```

**更新 1**

我一直在编写代码并发现问题似乎在这里：

```
 $result = test-path -path "C:\Users\pullrich\Desktop\Sandbox\Data_01*" -include $file.Name 
```

它总是会返回 false，因为我猜它并没有真正按照我的意图去做。它应该遍历**B**文件夹中的每个 File 并检查该 File 是否存在于**A**中。

**回答**

我能够用 latkins 的回答完成脚本。作为参考，这里是完整的脚本。

```
#region | Global Variables 
$backupFolder = "Sandbox_Backup"
$UsbDisk = "C:\Users\pullrich\Desktop"
#endregion 

$date = Get-Date -Format G
# Create Log that Script has been started
MyLog "--- Script has been started at $date ---" 0

        $testfolder = Test-Path "$UsbDisk\$backupFolder"  

        # If a Backup folder already exist then Compare files and see if any changes have been made
        if ( $testfolder -eq $true ) { #IF_2  

                    # Copy deleted files to BackUp Folder
                    MyLog "Check for Deleted Files on Data_01:\" 0
                    # Set Data_01 as Source
                    $source = "$UsbDisk\$backupFolder\Data_01"
                    # Get all Items
                    $sourcelist = Get-ChildItem $source -Recurse
                    # Choose as Destination the DeletedFiles Folder
                    $destination = "C:\Users\pullrich\Desktop\Sandbox\Data_01\_DeletedFiles"
                    mkdir $destination

                    # Check if a File or Folder exists in the BackUp folder but not on the Server
                    foreach ($file in $sourcelist){
                        # First we have to check if the File we have in the Backup still exists on the Server; however, we do not care about the DeletedFiles Folder
                        if ( -not ($file.Name -eq "_DeletedFiles" )){ 
                            $fullPath = "C:\Users\pullrich\Desktop\Sandbox\Data_01" + $file.FullName.Substring($source.Length)
                            $result = test-path $fullPath
                            # If it doesn't exist then we go ahead and Copy the File to the DeletedFiles Folder on the Server, 
                            # which will later be copied to the BackUp and then deleted of the Server
                            if(-not $result ){
                                $CopyFile = $source + $file.FullName.Substring($source.Length)
                                Copy-Item $CopyFile -Destination $destination -force
                            }

                        }

                    }

                    # Start Synchronizing Data_01:\
                    MyLog "Start Synchronizing Data_01:\" 0
                    Robocopy "C:\Users\pullrich\Desktop\Sandbox\Data_01" "$UsbDisk\$backupFolder\Data_01" /mir /r:2 /w:3 /M /XD VM_*

                    #Delete the DeletedFiles Folder from Server and keep it only on the BackUp
                    Remove-Item $destination

                    MyLog "Data_01:\ is up to Date" 0 
        } #IF_2

        else { #Else_2

                    mkdir "$UsbDisk\$backupFolder" 

                    # Start Copying Data 
                    MyLog "Start Backing up Data_01:\" 0
                    Robocopy "C:\Users\pullrich\Desktop\Sandbox\Data_01" "$UsbDisk\$backupFolder\Data_01" /mir /r:2 /w:3 /XD VM_*

        }

# Delete All Files in _DeleteFiles Folder which are Older than 60 Days 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T18:22:16.783

您可以为每个潜在文件构建完整路径，而不是依赖可能成本高昂的递归通配符搜索。

每个`$file`都来自 的某个子目录，因此可以通过从 中删除第一个字符来`$source`将完整路径（由 给出`$file.FullName`）缩短为“相对”路径。获取您的新根路径并将其添加到此相对路径，您就获得了新的完整路径。`$source.Length``$file.FullName`

```
$fullPath = "C:\Users\pullrich\Desktop\Sandbox\Data_01" + $file.FullName.Substring($source.Length)
$result = Test-Path $fullPath 
```

# ios - 从 ipad 获取日期信息

> ID：12822334
> 
> 赞同：-2
> 
> 时间：2012-10-10T14:54:42.777
> 
> 标签：ios, xcode, nsdate, nsdatecomponents, nsdatepicker

我们需要从 iPad 中获取实际日期并将其保存在变量中。我们已经搜索了 NSDateComponents 和 NSDate，但没有找到任何东西。例如，如果今天是 10 月 25 日，我们希望有一个值为 25 的 int 和另一个值为 10（十月）的 int。

我们将不胜感激。谢谢！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T15:00:33.030

[你尝试了](http://whathaveyoutried.com)什么？

您是否至少阅读了有关解释一切的主题的[日期和时间编程指南？](https://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/DatesAndTimes/Articles/dtCalendars.html#//apple_ref/doc/uid/TP40003470-SW3)

文档中的清单 5 几乎直接为您提供了答案

```
NSDateComponents *comps = [[NSCalendar currentCalendar] components:(NSDayCalendarUnit | NSMonthCalendarUnit) fromDate:[NSDate date]];
NSInteger day = [comps day];
NSInteger month = [comps month]; 
```

# php - 来自 mysql 请求的字符串，字符集问题

> ID：12822335
> 
> 赞同：0
> 
> 时间：2012-10-10T14:54:43.473
> 
> 标签：php, sql, character-encoding

名称使用 utf8_unicode_ci 存储在 mysql 中。我通过一个简单的 sql 请求从数据库中获取名称并将它们回显到一个表中。

`Julián`回声像`JuliÃ¡n`。我可以通过一些命令运行 $name 变量来解读它，或者修改我的 sql 请求吗？现在很简单`SELECT name FROM table`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T02:59:58.013

检查 db 连接字符串，确保您在连接字符串中指定了字符集 utf-8。并且还应指定html编码字符集，例如：

`<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T03:11:57.237

提示：数据添加页面，检查浏览器的编码。例如，如果是 Firefox，Menu -> View -> Character Encoding 应该被自动检测为 Unicode (UTF-8)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T04:12:08.420

执行这个查询：

`"set names 'utf8'"`在mysql数据库上

在你执行之前

`"SELECT name FROM table"`

它应该工作！:)

# c# - C# 获取 explorer.exe 以返回文件路径

> ID：12822337
> 
> 赞同：0
> 
> 时间：2012-10-10T14:54:48.520
> 
> 标签：c#, windows-explorer

在我的 C# 应用程序（使用 Visual Studio 2010 终极版）中，用户需要选择某个文件。我创建了一个基本的文件浏览器，它几乎可以工作，但看起来不太好。

我被要求使用标准的 Windows 文件资源管理器。

我知道如何打开它：

```
Process.Start("explorer.exe"); 
```

但是我怎样才能得到一个从它返回的文件路径呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T14:57:15.033

为了选择一个文件，Net Framework 提供了 OpenFileDialog 组件。您可以在[此处查看 MSDN的参考资料](http://msdn.microsoft.com/en-us/library/system.windows.forms.openfiledialog.aspx)

但基本上，您所要做的就是：

创建 OpenFileDialog 的实例

```
using(OpenFileDialog openFileDialog1 = new OpenFileDialog())
{ 
```

设置初始属性

```
 openFileDialog1.InitialDirectory = "c:\\" ;
    openFileDialog1.Filter = "txt files (*.txt)|*.txt|All files (*.*)|*.*" ;
    openFileDialog1.FilterIndex = 2 ;
    openFileDialog1.RestoreDirectory = true ; 
```

打开调用 ShowDialog 的控件，等待用户按下 OK 并获取选定的文件

```
 if(openFileDialog1.ShowDialog() == DialogResult.OK)
    {
        string fileSelected = openFileDialog1.FileName;
    }
} 
```

注意 OpenFileDialog() 周围的 using 语句，虽然不是绝对必要的，但这将确保对话框的处置

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T14:56:49.550

你考虑过 OpenFileDialog 吗？

[http://msdn.microsoft.com/en-us/library/aa984392(v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/aa984392(v=vs.71).aspx)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-10T14:57:12.170

您应该使用[OpenFileDialog](http://msdn.microsoft.com/en-us/library/system.windows.forms.openfiledialog.aspx)类。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-10T14:59:52.547

也许您可以说服您的客户接受标准的探索者对话。您的客户很可能并不完全知道他的要求。

在 WPF 中，你会根据这个使用一些东西：

> [WPF 的 OpenDialog](https://stackoverflow.com/questions/1339783/opendialog-for-wpf)

在 Froms 中，你会根据这个使用一些东西：

> [http://www.dotnetperls.com/openfiledialog](http://www.dotnetperls.com/openfiledialog)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-10T15:08:08.517

这有点复杂，因为“explorer.exe”在 %PATH% 系统变量中，并且可执行路径可能没有存储在 Windows 的任何地方（在我看来，也许我错了）。

我知道的所有 Windows 版本中的“explorer.exe”都位于由 %WINDIR% 系统变量定义的目录中。您可以通过以下方法获取该变量：

```
Environment.GetEnvironmentVariable() 
```

并添加字符串“explorer.exe”。

那是简单的方法。

* * *

更复杂的方法：

使用 WMI 后，您可以找到已经运行的 explorer.exe 进程的完整路径 - 稍微复杂一些，但它更正确的方法。

此处提供更多信息： [如何获取运行进程的完整路径](https://stackoverflow.com/questions/5497064/c-how-to-get-the-full-path-of-running-process)

# teamcity - 当满足 VCS 触发器时，TeamCity 是否可以针对所有代理构建模块？

> ID：12822339
> 
> 赞同：5
> 
> 时间：2012-10-10T14:54:52.247
> 
> 标签：teamcity, teamcity-7.0

当满足 VCS 触发条件时， 我希望**所有代理都运行一个模块。**

这可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-11T10:44:33.323

您可以做到这一点的一种方法是添加一个调度触发器，该触发器具有在所有代理上运行的选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T03:08:37.433

您在研究替代解决方案方面是否很幸运？

我创建了一个构建配置来更新我们的源代码管理的第三方引用的程序集目录，这是对大多数（如果不是全部）构建配置的快照依赖。当我使用新的或更新的程序集更新此目录时，我也希望此配置能够在所有构建代理上运行。

目前，我只是简单地复制了配置并将每个配置绑定到一个特定的代理。它增加了管理开销，但暂时解决了这个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T08:56:08.783

看过之后，据我所知，不是直接的，

该行为可能通过使用命令行远程运行器插件（[http://confluence.jetbrains.net/display/TW/Command+Line+Remote+Run+Tool](http://confluence.jetbrains.net/display/TW/Command+Line+Remote+Run+Tool)）通过链接到 VCS 的单独构建配置来实现检测更改，从命令行构建步骤调用远程运行工具以在每个所需的代理上构建项目。

需要对命令行远程运行工具进行进一步研究以确认这是可能的。

REST API 中可能还有一些功能允许这样做，尽管我浏览文档并没有显示任何内容。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-09-23T18:15:20.843

您可以安装此插件并指定代理名称列表，它将在矩阵中的每个“值”运行一次。

[https://github.com/presidentio/teamcity-matrix-build-plugin](https://github.com/presidentio/teamcity-matrix-build-plugin)

# objective-c - 子视图与子视图控制器

> ID：12822343
> 
> 赞同：3
> 
> 时间：2012-10-10T14:55:18.577
> 
> 标签：objective-c, model-view-controller, architecture

这是一个普遍的问题，但我会用一个具体的例子来问它以避免混淆：

我正在开发一个在单个屏幕上具有 UIPickerView 等内容的应用程序。我想知道是否适合制作一个自定义 PickerViewController 类来控制我的 UIPickerView 然后将我的 PickerViewController 添加为 childVC ...

或者我应该在我现有的 VC 中创建一个 UIPickerView 实例并从那里控制它吗？

我什么时候应该做这些选择，它们有什么优势？

感谢朋友的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T19:28:26.670

iOS 5.0 引入了子视图控制器的概念。最初，除了 UINavigationController 和 UITabBarController 之外的任何视图控制器都必须是模态的和全屏的。在 iOS 5.0 中，您现在可以在一个屏幕上显示多个 UIViewController。这意味着一个 UIViewController 可以有多个子 (UIViewController)，其中每个子负责控制更具体的视图和模型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T14:57:41.177

如果 UIPickerView 与其他 UI 元素同时出现在屏幕上，那么您应该将其添加为子视图。视图控制器的概念适用于您开始管理完全不同的 UI/窗口/元素集（无论您如何称呼它）。如果选择器视图密切属于其他元素的功能，则不应为其创建单独的视图控制器。

# javascript - 是否可以使用 html5 本地存储在客户端创建和写入文件

> ID：12822344
> 
> 赞同：-1
> 
> 时间：2012-10-10T14:55:20.110
> 
> 标签：javascript, html, local-storage

我想创建一个嵌入 YouTube 视频的 html5 页面，我将使用 firefox 打开它。

在播放视频时，我想记录一些信息。所以基本上我想在这个页面上放一些javascript代码，javascript代码会创建一个日志文件，不时写入日志文件。

我的问题是：是否可以使用 html5 本地存储在客户端创建和写入文件？是否有任何代码示例可以使用 javascript 和 html5 在客户端创建和写入文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T14:58:57.443

DOM 存储与读取或写入文件无关，但您可以使用它来完成您想要做的事情。

可以写一些日志信息：

```
window.localStorage.setItem('myLog', 'someInformation'); 
```

然后您可以稍后阅读：

```
var storedInfo = window.localStorage.getItem('myLog'); // 'someInformation' 
```

只要与存储交互的所有页面共享相同的主机域，这将起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T15:07:06.563

您可以使用本地存储将日志存储为 JSON 对象，但它只是一个键值存储（使用 cookie 的替代方法），用于维护浏览器状态或其他客户端相关信息。日志可能是其中之一.

另外，请注意有大小限制。

有很多用于在本地存储中存储项目的包装器[jStorage](http://www.jstorage.info/)是我的偏好。

# ruby - 如何从 URL 中删除 Google 跟踪参数 (UTM)？

> ID：12822347
> 
> 赞同：7
> 
> 时间：2012-10-10T14:55:31.093
> 
> 标签：ruby, google-analytics

我有一堆要清理的 URL。它们都包含[UTM](http://en.wikipedia.org/wiki/Urchin_Tracker)参数，这些参数在这种情况下不是必需的，或者是有害的。例子：

```
http://houseofbuttons.tumblr.com/post/22326009438?utm_source=feedburner&utm_medium=feed&utm_campaign=Feed%3A+HouseOfButtons+%28House+of+Buttons%29 
```

所有可能的参数都以 开头`utm_`。如何在不破坏其他潜在“好”URL 参数的情况下使用 ruby​​ 脚本/结构轻松删除它们？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-10T15:01:06.083

您可以将正则表达式应用于 url 以清理它们。这样的事情应该可以解决问题：

```
url = 'http://houseofbuttons.tumblr.com/post/22326009438?utm_source=feedburner&utm_medium=feed&utm_campaign=Feed%3A+HouseOfButtons+%28House+of+Buttons%29&normal_param=1'
url.gsub(/&?utm_.+?(&|$)/, '') => "http://houseofbuttons.tumblr.com/post/22326009438?normal_param=1" 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-10-10T15:56:55.190

这使用[URI lib](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/uri/rdoc/URI.html)来解构和更改查询字符串（无正则表达式）：

```
require 'uri'
str ='http://houseofbuttons.tumblr.com/post/22326009438?utm_source=feedburner&utm_medium=feed&utm_campaign=Feed%3A+HouseOfButtons+%28House+of+Buttons%29&normal_param=1'

uri = URI.parse(str)
clean_key_vals = URI.decode_www_form(uri.query).reject{|k, _| k.start_with?('utm_')}
uri.query = URI.encode_www_form(clean_key_vals)
p uri.to_s #=> "http://houseofbuttons.tumblr.com/post/22326009438?normal_param=1" 
```

# c++ - 在简单的 pthread 中运行服务器

> ID：12822354
> 
> 赞同：1
> 
> 时间：2012-10-10T14:55:49.877
> 
> 标签：c++, linux, pthreads

我试图让我的小型多客户端服务器在 pthread 中运行，以便客户端可以接收数据并将数据发送到数据库。目前我可以远程登录到服务器，向服务器发送一条消息，它会被回显。我想接受客户的输入并“使用”它并向他发送答案。我能做到这一点的唯一方法是将服务器放在我假设的线程中。所以我创建了一个简单的线程并从中调用服务器函数，但服务器由于某种原因无法启动。我究竟做错了什么？

```
 void *startServer(void *)
    {

        cout << "Starting server\n";
        Server();
    }

    int main() 
    {

        pthread_t t;

        pthread_create(&t, NULL, &startServer, NULL);
        cout << "Hello";

        return 0;
    } 
```

我运行后唯一显示的是

> 你好

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T14:57:51.123

你不是在等待线程，主线程在服务器线程可以做任何事情之前就退出了，你需要在主线程中做一个 pthread_join，例如，在打印 hello 之后。

```
pthread_join(t, NULL); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T15:51:12.740

C++ 在 结束时立即退出进程`main`，而不管正在执行的任何其他线程。与等待所有非守护线程完成的 Java 不同，IIRC。

如果要等到其他线程完成，则需要使用`pthread_join`.

# python - 如何在 Python 中对猴子补丁进行单元测试

> ID：12822355
> 
> 赞同：4
> 
> 时间：2012-10-10T14:55:49.817
> 
> 标签：python, unit-testing, monkeypatching

我有一个行为像这样的实用程序方法

```
def my_patch_method(self):
    pass

def patch_my_lib():
    from mylib import MyClass
    MyClass.target_method = my_patch_method
    return MyClass() 
```

此测试失败：

```
self.assertEqual(my_patch_method, patch_my_lib().target_method) 
```

而这个有效：

```
self.assertEqual(my_patch_method.__name__, patch_my_lib().target_method.__name__) 
```

由于补丁方法没有相同的名称，这仍然是可以接受的证明，它`patch_my_lib()`正在做它付出的代价，但为什么第一个没有像我预期的那样工作？而且，有没有办法“修复”它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T15:05:49.910

您的第一个测试失败的原因是，一旦您将函数修补到您的类中，它就不再是同一个对象了。

```
>>> def foo(self): pass
... 
>>> class Foo: pass
... 
>>> Foo.bar = foo
>>> type(Foo.bar)
<type 'instancemethod'>
>>> type(foo)
<type 'function'>
>>> 
>>> Foo.bar is foo
False
>>> Foo.bar == foo
False 
```

事实上，原来的函数和新的方法有不同的类型。相反，让您的第一个测试检查这种情况：

```
>>> Foo.bar.im_func is foo
True 
```

所以也许是这样：`self.assertIs(my_patch_method, patch_my_lib().target_method.im_func)`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T15:05:06.530

尝试：

```
self.assertEqual(my_patch_method, patch_my_lib().target_method.im_func) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T15:01:08.823

您正在从 patch_my_lib 返回一个实例，因此将该函数与绑定方法进行比较

这样的事情应该通过

```
self.assertEqual(my_patch_method, patch_my_lib().target_method.im_func) 
```

但最好检查您正在修补的行为是否正常工作

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-10T15:02:26.070

`MyClass.target_method = my_patch_method`将您的函数设置为 的类函数`MyClass`，但您使用 . 返回该类的实例`return MyClass()`。

# http-status-code-404 - 谷歌连接错误

> ID：12822361
> 
> 赞同：1
> 
> 时间：2012-10-10T14:56:23.903
> 
> 标签：http-status-code-404

我正在尝试使用 google 帐户连接登录.. 但它显示了一个错误

```
Forbidden

You don't have permission to access /market/modules/connect/easyauth.php on this server.

Additionally, a 404 Not Found error was encountered while trying to use an ErrorDocument to handle the request.

Apache Server at dkakeen.com Port 80 
```

我联系了开发商，他说：

> 您的主机可能会阻止 url 中的某些字符串，这就是您收到 Forbidden 错误的原因。您可能会在主机帐户的错误日志中看到有关该错误的更多信息。您还可以询问您的托管支持他们是否有这样的安全措施来阻止部分网址，以及他们是否可以为您禁用它们。这是脚本试图访问的完整 url，它不能：
> 
> [http://dkakeen.com/market/modules/connect/easyauth.php?auth=google&openid.ns=http%3A%2F%2Fspecs.openid.net%2Fauth%2F2.0&openid.mode=id_res&openid.op_endpoint=https% 3A%2F%2Fwww.google.com%2Faccounts%2Fo8%2Fud&openid.response_nonce=2012-10-10T12%3A44%3A29ZJuJ_ahE5fLQx5Q&openid.return_to=http%3A%2F%2Fdkakeen.com%2Fmarket%2Fmodules%2Fconnect%2Feasyauth.php% 3Fauth%3Dgoogle&openid.assoc_handle=AMlYA9Vntq_WQ9WEb85GI5Z32JS4E47Z6sRbimCf503Eht-w7zDq_wTZ&openid.signed=op_endpoint%2Cclaimed_id%2Cidentity%2Creturn_to%2Cresponse_nonce%2Cassoc_handle%2Cns.ext1%2Cext1.mode%2Cext1.type.namePerson_first%2Cext1.value.namePerson_first%2Cext1.type.contact_email% 2Cext1.value.contact_email%2Cext1.type.namePerson_last%2Cext1.value.namePerson_last&openid.sig=qVXb27ds2obrWeehvGRgUaZYCKM%3D&openid.identity=https%3A%2F%2Fwww.google。com%2Faccounts%2Fo8%2Fid%3Fid%3DAItOawn507OyS3bO50BXsj02tgccdznijvVpyHY&openid.claimed_id=https%3A%2F%2Fwww.google.com%2Faccounts%2Fo8%2Fid%3Fid%3DAItOawn507OyS3bO50BXsj02tgccdz](http://dkakeen.com/market/modules/connect/easyauth.php?auth=google&openid.ns=http%3A%2F%2Fspecs.openid.net%2Fauth%2F2.0&openid.mode=id_res&openid.op_endpoint=https%3A%2F%2Fwww.google.com%2Faccounts%2Fo8%2Fud&openid.response_nonce=2012-10-10T12%3A44%3A29ZJuJ_ahE5fLQx5Q&openid.return_to=http%3A%2F%2Fdkakeen.com%2Fmarket%2Fmodules%2Fconnect%2Feasyauth.php%3Fauth%3Dgoogle&openid.assoc_handle=AMlYA9Vntq_WQ9WEb85GI5Z32JS4E47Z6sRbimCf503Eht-w7zDq_wTZ&openid.signed=op_endpoint%2Cclaimed_id%2Cidentity%2Creturn_to%2Cresponse_nonce%2Cassoc_handle%2Cns.ext1%2Cext1.mode%2Cext1.type.namePerson_first%2Cext1.value.namePerson_first%2Cext1.type.contact_email%2Cext1.value.contact_email%2Cext1.type.namePerson_last%2Cext1.value.namePerson_last&openid.sig=qVXb27ds2obrWeehvGRgUaZYCKM%3D&openid.identity=https%3A%2F%2Fwww.google.com%2Faccounts%2Fo8%2Fid%3Fid%3DAItOawn507OyS3bO50BXsj02tgccdznijvVpyHY&openid.claimed_id=https%3A%2F%2Fwww.google.com%2Faccounts%2Fo8%2Fid%3Fid%3DAItOawn507OyS3bO50BXsj02tgccdznij) vVpyHY&openid.ns.ext1=http%3A%2F%2Fopenid.net%2Fsrv%2Fax%2F1.0&openid.ext1.mode=fetch_response&openid.ext1.type.namePerson_first=http%3A%2F%2Faxschema.org%2FnamePerson%2Ffirst&openid。 ext1.value.namePerson_first=Classifieds&openid.ext1.type.contact_email=http%3A%2F%2Faxschema.org%2Fcontact%2Femail&openid.ext1.value.contact_email=classifiedsaddict%40gmail.com&openid.ext1.type.namePerson_last=http%3A% 2F%2Faxschema.org%2FnamePerson%2Flast&openid.ext1.value.namePerson_last=Addict&openid.ns.ext2=http%3A%2F%2Fspecs.openid.net%2Fextensions%2Fui%2F1.0&openid.ext2.mode=popup

我该如何解决？

# php - 在 Internet Explorer 中 PHP 强制文件下载失败

> ID：12822364
> 
> 赞同：0
> 
> 时间：2012-10-10T14:56:28.970
> 
> 标签：php, internet-explorer, content-type

我有一个网站，我使用以下代码强制通过 PHP 下载文件：

```
$ZipData = file_get_contents($zipFilename);
$ZipSize = filesize($zipFilename);
header("Content-type: application/octet-stream");
header("Content-disposition: attachment; filename=".$ZipTitle.".zip");
echo $ZipData; 
```

虽然这在 Chrome 和 Firefox 中运行良好，但在 Internet Explorer 中根本没有任何作用。在谷歌搜索时，我找到了一个潜在的解决方案并将代码更改为如下：

```
$ZipData = file_get_contents($zipFilename);
$ZipSize = filesize($zipFilename);
if (strstr($HTTP_USER_AGENT,"MSIE")){
    header("Pragma: public");
    header("Expires: 0");
    header("Cache-Control: must-revalidate, post-check=0, pre-check=0");
    header("Content-type: application-download");
    header("Content-Length: $ZipSize");
    header("Content-disposition: attachment; filename=".$ZipTitle.".zip");
    header("Content-Transfer-Encoding: binary");
}else{
    header("Content-type: application/octet-stream");
    header("Content-disposition: attachment; filename=".$ZipTitle.".zip");
}
echo $ZipData; 
```

但仍然没有运气。我不知道它为什么会失败，也不知道从哪里开始寻找错误或问题，这只是我不知道的一些 IE 错误吗？我应该从哪里开始尝试寻找解决方案？

注意：$ZipTitle 将始终为“TexturePacker_Pack_xxx”，其中 xxx 是递增的数字。$ZipFilename 是一个现有的 zip 文件，它在文件发送到浏览器后取消链接。

编辑：有问题的网站和代码在[http://www.texturepacker.net上运行](http://www.texturepacker.net)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T15:00:38.363

您的`Content-Length`标题似乎不正确。PHP`filesize` [需要一个字符串](http://php.net/manual/en/function.filesize.php)并返回一个 int。

更改它以实际获取磁盘上文件的大小：

```
$zipFile = "C:\ZipFile.zip";  
header("Content-Length: " . filesize($ZipFile)); 
```

# php - 如何在 SQL 中将换行符转换为 BR 后保存 Textarea 输入

> ID：12822371
> 
> 赞同：4
> 
> 时间：2012-10-10T14:57:05.460
> 
> 标签：php, sql, textarea

我在管理面板中使用 ckeditor，但在用户提交表单中使用简单的文本框，以便用户可以输入文本并提交。问题是当用户使用换行符在 textarea 中输入文本时，它会在 SQL 中保存为它。我想在 sql 的每一行之后添加 BR。

例如用户提交：

```
 ![F.R.I.E.N.D.S.:
(F)ight for you.
(R)espect you.
(I)nvolve you.
(E)ncourage you.
(N)eed you.
(D)eserve you and
(S)tand by you.][1]![SCREENSHOT oF DB SAVE][2] 
```

保存在数据库中，下一行显示在输出中。但我想在数据库中保存为：

```
 F.R.I.E.N.D.S.:<br />
(F)ight for you.<br />
(R)espect you.<br />
(I)nvolve you.<br />
(E)ncourage you.<br />
(N)eed you.<br />
(D)eserve you and<br />
(S)tand by you. 
```

我使用 nl2br，但它不适用于用户提交表单如果我在管理处理表单上使用 nl2br，那么在已经使用 ckeditor 添加的那些字段上，它会添加两个 BR 标签。

用户提交表单上使用的代码是：

```
<textarea name="content" id="content" cols="60" rows="10" class="span7"><?php if(isset($content)) { echo $content; } ?></textarea>

$content = trim($_POST["content"])
$content = mysql_real_escape_string($content);
$content = nl2br($content); 
```

在 textarea 上使用 ckeditor 的管理员批准表单上不使用任何处理。来自 DB 的文本输出在 ckeditor 的单行中出现，没有换行符。如果我在此表单上输出时使用 nl2br，它可以工作，但会在通过 ckeditor 发布的早期文本上添加双 BR。

`$content = preg_replace("/\r\n|\r/", "<br />", $content);`也按照类似问题的stackoverflow上的一些人的建议进行了尝试

请建议我为这个问题提供一些功能。

还建议如果我需要在插入 SQL 之前使用一些功能，如 htmlentities 或 stripslashes 来处理内容。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-10T15:06:00.043

只需先替换新行`\r\n, \r`，然后修剪它。

```
$content = preg_replace("/\r\n|\r/", "<br />", $_POST["content"]);
$content = trim($content]) 
```

或者：

```
$content = nl2br($_POST["content"]);
$content = trim($content) 
```

祝你好运。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-10T15:00:56.383

您需要在需要时使用 nl2br 来显示值，而不是保存它。

# perl - 在perl中将base10转换为base36

> ID：12822374
> 
> 赞同：4
> 
> 时间：2012-10-10T14:57:18.770
> 
> 标签：perl, converter

> **可能重复：**
> [在 Perl 中进行 base36 算术的最佳方法是什么？](https://stackoverflow.com/questions/2670869/whats-the-best-way-to-do-base36-arithmetic-in-perl)

您好，是否可以使用 perl 脚本将数字从 base-10 转换为 base-36 ？

这是一个例子：

```
base 10 - 1234567890123 and outcome
base 36 - FR5HUGNF 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T14:59:35.243

尝试使用[Math::Base36](http://search.cpan.org/~rhenssel/Math-Base36-0.02/Base36.pm) CPAN 库进行基本转换。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-10T15:10:16.610

查看[`Math::Base36`](https://metacpan.org/source/BRICAS/Math-Base36-0.10/lib/Math/Base36.pm)源代码可以看出进行转换是多么容易：

```
sub encode_base36 {
    my ( $number, $padlength ) = @_;
    $padlength ||= 1;

    die 'Invalid base10 number'  if $number    =~ m{\D};
    die 'Invalid padding length' if $padlength =~ m{\D};

    my $result = '';
    while ( $number ) {
        my $remainder = $number % 36;
        $result .= $remainder <= 9 ? $remainder : chr( 55 + $remainder );
        $number = int $number / 36;
    }

    return '0' x ( $padlength - length $result ) . reverse( $result );
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T16:15:23.307

编写一个子程序来执行此操作非常简单。下面的代码不进行值检查，并假定要转换的数字始终为非负数

如果您的 Perl 版本不足以支持`state`关键字，那么只需在程序开头声明`$symbols`为变量`my`

```
use strict;
use warnings;

use feature 'state';

print base36(1234567890123);

sub base36 {
  my ($val) = @_;
  state $symbols = join '', '0'..'9', 'A'..'Z';
  my $b36 = '';
  while ($val) {
    $b36 = substr($symbols, $val % 36, 1) . $b36;
    $val = int $val / 36;
  }
  return $b36 || '0';
} 
```

**输出**

```
FR5HUGNF 
```

# android - 列表视图选择器

> ID：12822375
> 
> 赞同：0
> 
> 时间：2012-10-10T14:57:19.883
> 
> 标签：android, android-layout

我有一个 State List Drawable xml

```
<item android:state_pressed="true" android:drawable="@drawable/list_selector_pressed" />
<item android:state_enabled="false" android:drawable="@drawable/list_selector_disabled" />
<item android:drawable="@android:color/transparent" /> 
```

每当我在列表视图中选择行时，我希望它显示我按下的图像，然后在它释放时显示透明背景（正常）。但是，它总是在发布后显示我禁用的图像。每当我禁用一行（灰色）时，我都需要禁用图像。任何想法我做错了什么？此外，有没有办法捕捉不同的状态（聚焦、按下、启用）以更好地了解幕后发生的事情，这可能有助于我理解正在发生的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T16:25:35.577

[这个例子](http://android-journey.blogspot.com/2009/12/android-selectors.html)应该是一个很好的帮助。

以下是 XML 的外观：

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:state_pressed="true" android:drawable="@drawable/listitem_pressed" />
    <item android:state_focused="true" android:drawable="@drawable/listitem_selected" />
</selector> 
```

# android - 膨胀视图为空

> ID：12822380
> 
> 赞同：1
> 
> 时间：2012-10-10T14:57:26.483
> 
> 标签：android, inflate, viewgroup

我尝试创建自定义**ViewGroup**类，但是当我使用方法**findViewById()**时它返回 null，但是膨胀视图是可以的。

代码是：

```
public class HorizontalListView extends ViewGroup 
{
    private int mNumber = 0;
    private ImageView mImage;
    private LinearLayout mAdapter;

    public HorizontalListView(final Context context, final AttributeSet set)
    {
        super(context, set);
        LayoutInflater.from(getContext()).inflate(R.layout.layout_horizontal_list_view, this, false);

        mAdapter = (LinearLayout) getChildAt(0);
    }

    /**Adds ImageView to LinearLayout (Adapter)
     * g
     * @param image
     */
    public void addView(final Bitmap image)
    {
        mImage = (ImageView) LayoutInflater.from(getContext())
                                    .inflate(R.layout.create_added_photo, null);
        mImage.setImageBitmap(image);
        mImage.setTag(mNumber);
        mNumber++;
        mAdapter.addView(mImage);
    }

    @Override
    protected void onLayout(boolean changed, int l, int t, int r, int b) 
    {
        // TODO Auto-generated method stub

    }

} 
```

这里**mAdapter.addView(mImage);** 我有一个 NullPointerException

xml代码：

```
<?xml version="1.0" encoding="utf-8"?>  
<HorizontalScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">

    <LinearLayout 
        android:orientation="horizontal"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:gravity="center_vertical"
        android:id="@+id/list_for_new_photos">

    </LinearLayout>

</HorizontalScrollView> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T15:27:40.170

更改您的代码如下

```
public HorizontalListView(final Context context, final AttributeSet set) {
    super(context, set);
    View view = LayoutInflater.from(getContext()).inflate(R.layout.layout_horizontal_list_view, this, false);
    mAdapter = (LinearLayout) view.getChildAt(0);
} 
```

或者

```
public HorizontalListView(final Context context, final AttributeSet set) {
    super(context, set);
    View view = LayoutInflater.from(getContext()).inflate(R.layout.layout_horizontal_list_view, this, false);
    mAdapter = (LinearLayout) view.findViewById(R.id.list_for_new_photos);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T15:04:21.117

您的 mAdapter 可能不会在 Horizo​​ntalListView 中用该`getChildAt(0);`行实例化。

在那里，您应该检查 mAdapter 是否为空，如果不可接受，则将其实例化为其他内容。

如果 mAdapter 可以为空，那么在向其添加视图之前，您必须先询问 mAdapter 是否为空。您不能将视图添加到空 mAdapter。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-18T16:24:45.947

确保在“land”和“layout”文件夹中都有布局 xml 文件。

# c# - Win8 C# Metro 调度程序和 RPC_E_WRONG_THREAD

> ID：12822392
> 
> 赞同：2
> 
> 时间：2012-10-10T14:58:03.677
> 
> 标签：c#, windows-8, microsoft-metro

我正在尝试在 Windows 8 Metro 界面中使用用于 .net 的非官方 Google 音乐 api 构建应用程序。我正在加载整个播放列表

```
foreach (GoogleMusicPlaylist p in pls.UserPlaylists)
                lbPlaylists.Items.Add(p.Title); 
```

它出现了这个错误

```
HRESULT: 0x8001010E (RPC_E_WRONG_THREAD)) 
```

我在互联网上阅读，也许我必须使用调度程序或我通常感到困惑的东西。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-10T15:36:15.310

用这个

```
Dispatcher.RunAsync(CoreDispatcherPriority.Normal, () =>
            {
                foreach (GoogleMusicPlaylist p in pls.UserPlaylists)
                {
                    lbPlaylists.Items.Add(p.Title);
                }
            }); 
```

# ruby-on-rails - 两个 Mongoid 模型存储在一个 MongoDB 集合中

> ID：12822397
> 
> 赞同：0
> 
> 时间：2012-10-10T14:58:10.613
> 
> 标签：ruby-on-rails, ruby-on-rails-3, mongoid

这是我想做的事情，但我不知道是否可能。我将有两个包含相同模块（控制台）的 Ruby 类（SuperNes 和 MegaDrive）。所以我假设会有一些共同的属性和一些特殊的属性。我想将它存储在同一个 MongoDB 集合中（使用`store_in`助手）。

例如，我将如何确保`SuperNes.all`仅返回 SuperNes 数据而不返回 MegaDrive ？

感谢您的回答和您阅读我的时间！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T15:03:04.883

也许你可以尝试在[mongoid](http://mongoid.org/en/mongoid/docs/documents.html)中继承，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T16:25:05.780

```
 class Console
  include Mongoid::Document
end

class SuperNes < Console
end

class MegaDrive < Console
end 
```

# c# - 如何为 backgroundWorker 设置_WorkerSupportsCacellation

> ID：12822399
> 
> 赞同：0
> 
> 时间：2012-10-10T14:58:14.103
> 
> 标签：c#, visual-studio-2010, backgroundworker

我的代码中有一个问题，你的 backgroundWorker 启动了两次。因此，我正在尝试 set_WorkerSupportsCacellation 以便在`backgroundWorker1.IsBusy`使用`backgroundWorker1.CancelAsync`. 但是，当我执行以下操作时：

```
this.backgroundWorker1.set_WorkerSupportsCancellation(true); 
```

我得到一个编译错误：

'System.ComponentModel.BackgroundWorker.WorkerSupportsCancellation.set'：无法显式调用运算符或访问器

有谁知道我如何将其设置为 true？

我用谷歌搜索了这个问题，但没有看到答案。到目前为止，我发现以下链接没有帮助： [取消线程](https://stackoverflow.com/questions/2383840/canceling-threads) [http://www.c-sharpcorner.com/uploadfile/Ashush/using-the-backgroundworker-component/](http://www.c-sharpcorner.com/uploadfile/Ashush/using-the-backgroundworker-component/)

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T15:02:57.490

我不确定`set_WorkerSupportsCancellation(true)`从哪里来，但电话应该是：

```
 backgroundWorker1.WorkerSupportsCancellation = true; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T15:21:44.447

在 C# 程序中，如果显式调用属性 setter/getter（编译器生成的方法）或 C# 运算符映射到的方法，则会被视为错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T17:25:47.553

我看到了。在属性窗口中，有一个 WorkerSupportsCancellation 选项，我将其设置为 true。呼！！谢谢您的帮助！

# css - Facebook 的“虚拟滚动”是如何工作的？

> ID：12822401
> 
> 赞同：0
> 
> 时间：2012-10-10T14:58:15.870
> 
> 标签：css, facebook, layout, positioning

我正在学习 css 并决定了解 Facebook 中的一些内容：右侧的 minifeed 允许在不使用框架的情况下滚动。它是如何工作的？

我怀疑我现在可能知道答案，但我找不到确切的证据。它是一个较小的固定元素，包含一个较大的元素。然后内部较大元素相对于外部较小元素的相对位置由js响应鼠标事件进行更改。这一切都没问题。现在的问题：

我找不到这个相对位置的定义位置。我正在使用 Chrome 的“检查元素”并试图找出定义此定位的位置，因此可能会被 js 更改。

我找到 ：

```
<div class="tickerActivityStories" ... 
```

是内部大元素，并且：

```
<div class="uiScrollableAreaWrap ... 
```

是第一个较小的祖先，因此将其限制为“虚拟框架”。

但我找不到第一个相对于最后一个的位置设置在哪里。我正在浏览 chrome 显示给我的样式和计算样式，但看不到任何相关的定位指令。我们将不胜感激以下类型的帮助：

*   打开facebook并检查过的人对这个具体问题的具体回答。
*   关于我可能做错了什么以找到答案的指导，以及我怎样才能做得更好

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T15:26:15.077

它与相对定位无关。该脚本根据容器的位置检查`scrollTop`容器的位置`height`。当它达到某个值时，它会触发 AJAX 调用以获取更多内容。当这些东西返回时，脚本将它放在当前容器中最后一个项目下方的 DOM 中，并更新分页值，以便下一次获取将是直观的。当更多的东西被添加到 DOM 时，滚动条会自动调整自己。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T15:56:52.477

这是我最近发现的一个回购，这可能会对你有所帮助

[http://jamesflorentino.github.com/nanoScrollerJS/](http://jamesflorentino.github.com/nanoScrollerJS/)

还有其他像“狮子棒”之类的东西，我不记得了

# symfony - Symfony2 和 RabbitMqBundle。无法发布消息

> ID：12822403
> 
> 赞同：5
> 
> 时间：2012-10-10T14:58:26.733
> 
> 标签：symfony, rabbitmq

我正在尝试[从这里使用带有 RabbitMqBundle 的syfmony2 框架](https://github.com/videlalvaro/RabbitMqBundle)

我确信我的 rabbitmq 服务器已启动并正在运行，并且我正在根据 github 上提供的文档进行配置和发布者代码。不幸的是，我无法将任何消息添加到队列中。

我确信我的 rabbitmq 服务器已经启动并正在运行。我有根据 symfony 配置文件命名的队列。

有人知道出了什么问题吗？

在此先感谢您的任何建议。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-11T09:34:37.070

好吧...试试这个简单的例子

```
# app/config.yml
old_sound_rabbit_mq:
    connections: %rabbitmq_connections%
    producers: %rabbitmq_producers%
    consumers: %rabbitmq_consumers%

parameters:
    # connection parameters
    rabbitmq_connections:
        default: { host: 'localhost', port: 5672, user: 'guest', password: 'guest', vhost: '/' }

    # define producers
    rabbitmq_producers:
        sample:
            connection:         default
            exchange_options:   {name: 'exchange_name', type: direct, auto_delete: false, durable: true}

    # define consumers
    rabbitmq_consumers:
        sample:
            connection:         default
            exchange_options:   {name: 'exchange_name', type: direct, auto_delete: false, durable: true}
            queue_options:      {name: 'sample', auto_delete: false}
            callback:           rabbitmq.callback.service 
```

那么你应该定义你的回调服务。随意放入`app/config.yml`

```
services:
    rabbitmq.callback.service:
        class: RabbitMQ\Callback\Service 
```

是的。你应该写这个回调服务。这是简单的实现。应该足以理解并检查它是否适合您。

```
namespace RabbitMQ\Callback;

use OldSound\RabbitMqBundle\RabbitMq\ConsumerInterface;
use PhpAmqpLib\Channel\AMQPChannel;
use PhpAmqpLib\Message\AMQPMessage;

class Service implements ConsumerInterface 
{
    public function execute(AMQPMessage $msg)
    {
        var_dump(unserialize($msg->body));
    }
} 
```

然后你应该启动rabbitmq服务器，运行消费者并检查是否添加了新的交换和队列。要运行测试消费者，您应该运行

```
app/console rabbitmq:consumer sample --route="sample" 
```

在你的控制器中（你想向rabbitMQ发送消息的地方放下一个代码

```
# get producer service
$producer = $this->get('old_sound_rabbit_mq.sample_producer');
# publish message
$producer->publish(serialize(array('foo'=>'bar','_FOO'=>'_BAR')), 'sample'); 
```

希望它或多或少清楚，并会帮助你使用rabbitmq。

PS：如果你有rabbitmq管理插件，调试起来会更容易。如果没有，请使用控制台命令，例如`rabbitmqctl`检查队列/交换/消费者等...

并且很高兴看到您的生产者/消费者配置。回调服务代码也是如此。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T16:15:52.290

我在使用此捆绑包发送消息时也遇到了一些问题，我建议您尝试[使用 SonataNotificationBundle](https://github.com/sonata-project/SonataNotificationBundle)。

您还可以安装[RabbitMq 管理插件](http://www.rabbitmq.com/management.html)来查看排队的消息。

# android - Android 回收Button backgroundDrawable 仍然导致OutOfMemoryError

> ID：12822409
> 
> 赞同：0
> 
> 时间：2012-10-10T14:58:37.990
> 
> 标签：android, bitmap, out-of-memory

我有一些`CustomButton`，在某些时候，背景从 base64String 绘制到 a`BitmapDrawable`中，应用于`CustomButton`. 在应用程序的整个生命周期内，这可能会发生多次。这导致了`OutOfMemoryError: bitmap size exceeds VM budget`，并且在对 StackOverflow 进行了一些挖掘之后，发生这种情况是因为`Bitmaps`没有被回收。因此，我尝试使用每次应用另一个背景时执行的一些代码来处理此问题（此代码来自`CustomButton`该类）：

```
public void recycleBackground() {
    BitmapDrawable bd = null;
    Drawable bg = getBackground();
    if (bg != null) {
        bg.setCallback(null);
        if (bg instanceof BitmapDrawable) {
            bd = (BitmapDrawable) bg;
            if (!bd.getBitmap().isRecycled()) bd.getBitmap().recycle();
    }
    bd = null;   //just precautionous
    bg = null;   //also just a precaution
} 
```

然而，内存很慢（因为背景图像并不是那么大），但肯定会被淹没。**我错过了什么或做错了什么？**我结合了来自 SO 的一些不同问题/答案的上述代码。我可以找到很多关于回收的`Bitmaps`，而不是关于回收的`Drawables`。也许这就是我做错了什么？

# java - Java - 堆上的内联初始化字符串数组内存分配？

> ID：12822413
> 
> 赞同：2
> 
> 时间：2012-10-10T14:58:51.143
> 
> 标签：java, string, heap-memory, permgen

`String[] stringArray = new String[] { "abc", "xyz" };`

执行这一行，在 PERMGEN 空间中创建了两个字符串文字“abc”和“xyz”。由于初始化有一个新的运算符，我不确定 HEAP 上是否分配了任何内存。

多谢你们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T15:00:16.313

除字符串文字外，所有对象都是在堆上创建的。从 Java 7 开始，字符串文字也在堆上创建。

理论上，逃逸分析可以防止`new`在堆上创建对象，并可能使用堆栈来代替。这在实践中很少发生 AFAIK。

* * *

在回答 EJP 问题时，我没有资助一个重要的例子，但是

来自[http://www.oracle.com/technetwork/server-storage/ts-7392-159315.pdf](http://www.oracle.com/technetwork/server-storage/ts-7392-159315.pdf)第 22 页

```
New Technology: Escape Analysis
Definition: An object escapes the thread that allocated it if
some other thread can ever see it
If an object doesn't escape, we can abuse it
• Object explosion: allocate object's fields in different places
• Scalar replacement: store scalar fields in registers
• Thread stack allocation: store fields in stack frame
• Eliminate synchronization
• Eliminate initial object zero'ing
• Eliminate GC read / write barriers
Enabled with -XX:+DoEscapeAnalysis in JDKTM version 6 
```

理论上这个特性已经存在了一段时间，但它并没有特别频繁地工作（即使找到一个人为的例子也很困难）在 Java 7 中，找到人为的例子更容易。;)

```
public class UsesWrappersMain {
    public static void main(String... args) {
        for (int j = 0; j < 10; j++) {
            long used = used(), count = 0;
            for (int i = 0; i < 2000; i++) {
                count += printSum();
            }
            // add an object to show it is working
            byte[] b = new byte[16];
            long used2 = used();
            System.out.printf("Memory used for %,d iterations was %,d bytes%n", count, used2 - used);
        }
    }

    private static int printSum() {
        int count = 0;
        for (float i = 0; i < 10000; i++) {
            // definitively not autoboxed.
            Float j = new Float(i);
            count++;
        }
        return count;
    }

    private static long used() {
        return Runtime.getRuntime().totalMemory() - Runtime.getRuntime().freeMemory();
    }
} 
```

使用 -XX:-UseTLAB 运行时打印

```
Memory used for 20,000,000 iterations was 480,888 bytes
Memory used for 20,000,000 iterations was 32 bytes
Memory used for 20,000,000 iterations was 32 bytes
Memory used for 20,000,000 iterations was 32 bytes
Memory used for 20,000,000 iterations was 32 bytes
Memory used for 20,000,000 iterations was 32 bytes
Memory used for 20,000,000 iterations was 32 bytes
Memory used for 20,000,000 iterations was 0 bytes
Memory used for 20,000,000 iterations was 0 bytes
Memory used for 20,000,000 iterations was 0 bytes 
```

如果您添加`-XX:-DoEscapeAnalysis`的不是默认值

```
Memory used for 20,000,000 iterations was 320,000,928 bytes
Memory used for 20,000,000 iterations was 320,000,032 bytes
Memory used for 20,000,000 iterations was 320,000,032 bytes
Memory used for 20,000,000 iterations was 320,000,032 bytes
Memory used for 20,000,000 iterations was 320,000,032 bytes
Memory used for 20,000,000 iterations was 320,000,032 bytes
Memory used for 20,000,000 iterations was 320,000,032 bytes
Memory used for 20,000,000 iterations was 320,000,144 bytes
Memory used for 20,000,000 iterations was 320,000,032 bytes
Memory used for 20,000,000 iterations was 320,000,032 bytes 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T15:21:23.027

执行此操作时会发生什么，您将获得：

*   permgen 中的两个字符串文字
*   堆中的两个 String 对象
*   堆中的一个字符串数组对象

即使实际的文字字符串保存在 permgen 的字符串池中，String*对象*仍然存储在堆中。

# java - 发生多个匹配时的java正则表达式首选项

> ID：12822415
> 
> 赞同：3
> 
> 时间：2012-10-10T14:59:00.157
> 
> 标签：java, regex

嗨，我想特别了解 OR 运算符“|” 在 java 正则表达式中工作。我刚开始使用它，大多数事情对我来说都不清楚。

假设我希望匹配分数和整数，即 1/2、12/25 形式的事物，以及 13、235 等形式的事物。

我试过这两种模式：

```
pattern1 = Pattern.compile("\\d+|\\d+/\\d+"))
pattern2 = Pattern.compile("\\d+/\\d+|\\d+")) 
```

在英语中，pattern1 表示“digits OR digits/digits”，而 pattern2 表示“digits/digits OR digits”。

现在考虑这个输入字符串：

```
inputStr = "blah... 231/232 blah... 4 blah... 2" 
```

对于 pattern1，我找到了这些匹配项：

```
[junit] found 231
[junit] found 232
[junit] found 4
[junit] found 2 
```

对于 pattern2，我找到了这些匹配项：

```
[junit] found 231/232
[junit] found 4
[junit] found 2 
```

现在，pattern1 和 pattern2 之间的唯一区别是其匹配元素的顺序。当然，pattern2 是我想要的，因为它似乎“更喜欢”一个真正的派系而不是将它们分开。

所以对我来说最重要的问题是：这种行为是否可靠/可预测，还是会因不同平台而有所不同？

但也只是好奇......这个问题也是：我也觉得它令人困惑，因为运算符“OR”应该关于它的论点是对称的，比如加法。当 1+2 和 2+1 带有不同的语义时，你会想象人们会担心……这里的 pattern1 和 pattern2 有什么不同的语义吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-10T15:02:47.543

`|`不只是`OR`，它的意思是“匹配第一件事，*如果失败*，匹配第二件事”。

因此，您希望将分数放在首位，因为它是首选形式。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-10T15:07:16.473

对于您的目的，一个更有用的正则表达式是`\\d+(/\\d+)?`强制检查一组数字和一个由斜线后跟数字组成的可选组。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-10T15:05:59.527

交替运算符就像一个惰性或，因为它将匹配它可以匹配的第一件事。有关该主题的其他帖子有助于澄清其行为：

[Java 正则表达式交替运算符“|” 行为似乎坏了](https://stackoverflow.com/questions/4515309/java-regex-alternation-operator-behavior-seems-broken)

[为什么在这个 RegEx 中顺序很重要？](https://stackoverflow.com/questions/10248776/why-order-matters-in-this-regex-with-alternation)

一般来说，所有正则表达式的工作方式......除了POSIX。因此，可移植性在 Java 中不应该是一个问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-10T15:04:36.317

该| 被称为交替，它提供了列出给定匹配的备选方案的能力，并将在第一个匹配的备选模式上停止，从左到右。AFAIK，这在所有 Java 版本和我使用正则表达式的编程语言/工具中都非常一致：Java、Perl、Python、PHP、sed。

# c# - CompareAttribute 用于不区分大小写的比较

> ID：12822417
> 
> 赞同：5
> 
> 时间：2012-10-10T14:59:06.623
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, c#-4.0

我正在使用`CompareAttribute`in`MVC3`并且工作正常。但我想使用不区分大小写的类代码。有没有办法让它工作

提前致谢

```
[CompareAttribute("ClassCode", ErrorMessageResourceName = "ClassCode_DontMatch", ErrorMessageResourceType = typeof(Resources.Class))]
public string ConfirmClassCode {get; set; } 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2015-10-29T19:31:43.807

`IClientValidatable`聚会有点晚了，但这是我刚刚编写的一个实现，它还包括对使用接口的客户端验证的支持。您也可以使用 Darin Dimitrov 的回答作为起点，我已经有了一些。

服务器端验证：

```
//Create your custom validation attribute
[AttributeUsage(AttributeTargets.Property, AllowMultiple = true, Inherited = true)]
public class CompareStrings : ValidationAttribute, IClientValidatable
{
    private const string _defaultErrorMessage = "{0} must match {1}";

    public string OtherPropertyName { get; set; }

    public bool IgnoreCase { get; set; }

    public CompareStrings(string otherPropertyName)
        : base(_defaultErrorMessage)
    {
        if (String.IsNullOrWhiteSpace(otherPropertyName)) throw new ArgumentNullException("OtherPropertyName must be set.");

        OtherPropertyName = otherPropertyName;
    }

    public override string FormatErrorMessage(string name)
    {
        return String.Format(ErrorMessage, name, OtherPropertyName);
    }

    protected override ValidationResult IsValid(object value, ValidationContext validationContext)
    {
        string otherPropVal = validationContext.ObjectInstance.GetType().GetProperty(OtherPropertyName).GetValue(validationContext.ObjectInstance, null) as string;

        //Convert nulls to empty strings and trim spaces off the result
        string valString = (value as string ?? String.Empty).Trim();
        string otherPropValString = (otherPropVal ?? String.Empty).Trim();

        bool isMatch = String.Compare(valString, otherPropValString, IgnoreCase) == 0;

        if (isMatch)
            return ValidationResult.Success;
        else
            return new ValidationResult(FormatErrorMessage(validationContext.DisplayName));
    } 
```

客户端验证

```
 //...continuation of CompareStrings class
    public IEnumerable<ModelClientValidationRule> GetClientValidationRules(ModelMetadata metadata, ControllerContext context)
    {
        return new[] { new ModelClientValidationCompareStringsRule(FormatErrorMessage(metadata.GetDisplayName()), OtherPropertyName, IgnoreCase) };
    }
} 
```

定义 ModelClientValidationCompareStringsRule 用于（如上）将属性的属性传递给客户端脚本。

```
public class ModelClientValidationCompareStringsRule : ModelClientValidationRule
{
    public ModelClientValidationCompareStringsRule(string errorMessage, string otherProperty, bool ignoreCase)
    {
        ErrorMessage = errorMessage;  //The error message to display when invalid. Note we used FormatErrorMessage above to ensure this matches the server-side result.
        ValidationType = "comparestrings";    //Choose a unique name for your validator on the client side. This doesn't map to anything on the server side.
        ValidationParameters.Add("otherprop", otherProperty);  //Pass the name of the property to compare to
        ValidationParameters.Add("ignorecase", ignoreCase.ToString().ToLower());  //And whether to ignore casing
    }
} 
```

Javascript：

```
(function ($) {
    //Add an adapter for our validator. This maps the data from the ModelClientValidationCompareStringsRule
    //we defined above, to the validation plugin. Make sure to use the same name as we chose for the ValidationType property ("comparestrings")
    $.validator.unobtrusive.adapters.add("comparestrings", ["otherprop", "ignorecase"],
        function (options) {
            options.rules["comparestrings"] = {
                otherPropName: options.params.otherprop,
                ignoreCase: options.params.ignorecase == "true"
            };
            options.messages["comparestrings"] = options.message;
        });

    //Add the method, again using the "comparestrings" name, that actually performs the client-side validation to the page's validator
    $.validator.addMethod("comparestrings", function (value, element, params) {
        //element is the element we are validating and value is its value

        //Get the MVC-generated prefix of element
        //(E.G. "MyViewModel_" from id="MyViewModel_CompareEmail"
        var modelPrefix = getModelIDPrefix($(element).prop("id"));

        //otherPropName is just the name of the property but we need to find
        //its associated element to get its value. So concatenate element's
        //modelPrefix with the other property name to get the full MVC-generated ID. If your elements use your own, overridden IDs, you'd have to make some modifications to allow this code to find them (e.g. finding by the name attribute)
        var $otherPropElem = $("#" + modelPrefix + params.otherPropName);

        var otherPropValue = getElemValue($otherPropElem);

        //Note: Logic for comparing strings needs to match what it does on the server side

        //Trim values
        value = $.trim(value);
        otherPropValue = $.trim(otherPropValue);

        //If ignoring case, lower both values
        if (params.ignoreCase) {
            value = value.toLowerCase();
            otherPropValue = otherPropValue.toLowerCase();
        }

        //compare the values
        var isMatch = value == otherPropValue;

        return isMatch;
    });

    function getElemValue(element){
        var value;
        var $elem = $(element);

        //Probably wouldn't use checkboxes or radio buttons with
        //comparestrings, but this method can be used for other validators too
        if($elem.is(":checkbox") || $elem.is(":radio") == "radio")
            value = $elem.prop("checked") ? "true" : "false";
        else
            value = $elem.val();

        return value;
    }

    //Gets the MVC-generated prefix for a field by returning the given string
    //up to and including the last underscore character
    function getModelIDPrefix(fieldID) {
        return fieldID.substr(0, fieldID.lastIndexOf("_") + 1);
    }
}(jQuery)); 
```

用法是标准的：

```
public string EmailAddress { get; set; }

[CompareStrings("EmailAddress", ErrorMessage = "The email addresses do not match", IgnoreCase=true)]
public string EmailAddressConfirm { get; set; } 
```

这插入了 Unobtrusive Validation 框架，因此您需要已经安装并工作。在撰写本文时，我使用的是 Microsoft.jQuery.Unobtrusive.Validation v 3.0.0。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-10T15:04:51.967

您可以编写一个自定义属性来执行不区分大小写的比较：

```
public class CaseInsensitiveCompareAttribute : System.Web.Mvc.CompareAttribute
{
    public CaseInsensitiveCompareAttribute(string otherProperty)
        : base(otherProperty)
    { }

    protected override ValidationResult IsValid(object value, ValidationContext validationContext)
    {
        var property = validationContext.ObjectType.GetProperty(this.OtherProperty);
        if (property == null)
        {
            return new ValidationResult(string.Format(CultureInfo.CurrentCulture, "Unknown property {0}", this.OtherProperty));
        }
        var otherValue = property.GetValue(validationContext.ObjectInstance, null) as string;
        if (string.Equals(value as string, otherValue, StringComparison.OrdinalIgnoreCase))
        {
            return null;
        }

        return new ValidationResult(this.FormatErrorMessage(validationContext.DisplayName));
    }
} 
```

然后用它装饰你的视图模型属性：

```
[CaseInsensitiveCompare("ClassCode", ErrorMessageResourceName = "ClassCode_DontMatch", ErrorMessageResourceType = typeof(Resources.Class))]
public string ConfirmClassCode { get; set; } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-05-15T05:03:29.927

对于客户端验证，将此代码放在下面的文档中 -

```
jQuery.validator.addMethod("ignoredCaseEqualTo", function (value, element, param) {
            return this.optional(element) || value.toLowerCase() === $(param).val().toLowerCase();
        }, "__Your Validation message___");

        $("#EmailAddress").rules("add", {
            ignoredCaseEqualTo: "#EmailAddressConfirm"
        }); 
```

此代码添加了不区分大小写比较的新验证规则。可能不是最佳方式，但这将完成您的客户端验证工作。

# java - Java Socket：在不知道服务器名称时以 Ad-hoc 方式连接两台计算机

> ID：12822418
> 
> 赞同：1
> 
> 时间：2012-10-10T14:59:08.597
> 
> 标签：java, sockets

我阅读了许多关于网络上 Java Socket 的示例，所有这些都与客户端代码的同一行：

```
sock = new Socket("localhost", PORT); 
```

因此，我们可以在同一台计算机上测试服务器和客户端。在 LAN 或 ad-hoc 中，如果客户端无法知道服务器的名称。（除了硬编码，直接输入服务器名称到客户端代码，但是这样很无效，比如我要写一个局域网游戏，所以在运行游戏之前我们无法知道服务器名称）

我有这个解决方案：当服务器创建时，它会监听**谁连接**到他们，然后发回服务器的名称。但是，我们又遇到了一个悖论：客户端无法连接到服务器来获取这些数据。

那么，如何克服这个困难的部分。（如果有使用其他java库的方法，也可以）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T15:05:17.373

不，你不能。这就是为什么存在某种“代理”，可以使用硬编码信息（例如 URL）访问的集中式组件，其中可用资源的列表可用。因此，您需要一个中央服务器，可用的游戏服务器注册到该中央服务器，并且客户端可以获取该列表。

> （除了硬编码，直接输入服务器名称到客户端代码，但是这样很无效，比如我要写一个局域网游戏，所以在运行游戏之前我们无法知道服务器名称）

为什么不直接询问用户他/她想连接到哪个服务器呢？

> 我有这个解决方案：当服务器创建时，它会监听谁连接到他们，然后发回服务器的名称。

我认为一旦客户端找到服务器，这没有任何用处。

**编辑**：我想我误读了这个问题。如果不需要在多个网段上工作（对于不在同一个 WiFi 或 LAN 上的参与者），那么关于多播的引用帖子可能是查找可用服务器的可行选项。

**EDIT2**：想添加为评论，但不适合...

我已经有 10 年或更长时间没有玩 LAN 游戏了，所以我可能对此有点不以为然，但我记得，一个玩家必须充当主持人，其他玩家加入游戏。这意味着，该播放器启动一个服务器（基本上侦听预定义的端口号），而其他播放器发送多播数据包以查找服务器。多播意味着网段上的每个人都会得到它，如果一个进程在那个端口上监听，并且有正确的软件支持，它就会响应。

因此，在这种情况下，请遵循@MichaelB 建议的指南：服务器应该打开一个 DatagramSocket，并等到有东西到达，其他玩家应该发送多播数据包。服务器应该发回一些东西，这将确定它能够在客户端告诉什么样的软件，如果它是客户端的合适服务器，或者其他东西，碰巧使用相同的端口......

发送不是，但从套接字接收 DatagramPacket 有点违反直觉：

```
byte[] buf = new byte[256];
DatagramPacket packet = new DatagramPacket(buf, buf.length);
socket.receive(packet); 
```

获得数据包后，您可以致电：

```
SocketAddress remoteHostAddress = packet.getSocketAddress(); 
```

找出你的主机的地址。

这应该会有很好的帮助：[Writing a Datagram Client and Server](http://docs.oracle.com/javase/tutorial/networking/datagrams/clientServer.html)

# javascript - iOS 自动化 JavaScript 是否支持 substring 函数？

> ID：12822419
> 
> 赞同：1
> 
> 时间：2012-10-10T14:59:11.140
> 
> 标签：javascript, ios, ios-ui-automation

只是想知道：iOS UI 自动化 JavaScript 是否支持该`substring`方法？如果是，请提供一个合适的示例，因为我收到了相同的错误响应。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T10:28:14.223

使用：substr()

```
 var str="Hello world!";
  var n=str.substr(2,3) 
```

n 的结果将是：

洛

有用。经测试。

PS如果它适合你，请接受它。

# objective-c - iOS：如何使用 MPMoviePlayerController

> ID：12822420
> 
> 赞同：30
> 
> 时间：2012-10-10T14:59:15.123
> 
> 标签：objective-c, ios, video, mpmovieplayercontroller, avfoundation

我创建了一个空白项目（iOS）并将其放在我的 viewDidLoad 中：

```
NSString *moviePath = [[NSBundle mainBundle] pathForResource:@"Movie" ofType:@"m4v"];
MPMoviePlayerViewController *playerController = [[MPMoviePlayerViewController alloc] initWithContentURL:[NSURL fileURLWithPath:moviePath]];
[self presentMoviePlayerViewControllerAnimated:playerController];
[playerController.moviePlayer play]; 
```

当应用程序启动时，我得到的只是一个**白屏，日志中有错误消息**：

```
 <Error>: CGContextSaveGState: invalid context 0x0
 <Error>: CGContextClipToRect: invalid context 0x0
 <Error>: CGContextTranslateCTM: invalid context 0x0
 <Error>: CGContextDrawShading: invalid context 0x0
 <Error>: CGContextRestoreGState: invalid context 0x0
Warning: Attempt to present <MPMoviePlayerViewController: 0x821e3b0> on <ViewController: 0x863aa40> whose view is not in the window hierarchy! 
```

...以及一堆关于禁用自动播放的行。我特别不明白视图不是层次结构的一部分，因为它是一个空白的“单视图应用程序”iOS项目，代码在 ViewController.m 中。它在视图层次结构中。

我知道电影文件本身不是问题，因为我是从 Apple 在 MPMoviePlayer 上的示例代码中获得的。尽管我（似乎）尝试了示例中编写的所有内容，但我就是无法让播放器工作。

这是另一个尝试，这次使用 MPMoviePlayerController（不是 MPMoviePlayerViewController）：

```
MPMoviePlayerController *player = [[MPMoviePlayerController alloc] initWithContentURL:url];
[player setContentURL:url];
[player setMovieSourceType:MPMovieSourceTypeFile];

[[player view] setFrame:self.view.bounds];
[player view].backgroundColor = [UIColor greenColor];

player.scalingMode = MPMovieScalingModeNone;
player.controlStyle = MPMovieControlModeDefault;
player.backgroundView.backgroundColor = [UIColor whiteColor];
player.repeatMode = MPMovieRepeatModeNone;

[self.view addSubview: [player view]];
[player play]; 
```

类似的结果，白屏和错误。请帮忙....

* * *

## 回答 #1

> 赞同：90
> 
> 时间：2012-10-18T09:06:21.253

事实证明，我们所要做的就是：

```
NSURL *movieURL = [NSURL URLWithString:@"http://example.com/somefile.mp4"];
movieController = [[MPMoviePlayerViewController alloc] initWithContentURL:movieURL];
[self presentMoviePlayerViewControllerAnimated:movieController];
[movieController.moviePlayer play]; 
```

*   `movieController``MPMoviePlayerViewController`是在 .h 文件中声明的实例。

*   **重要提示**：在定义 URL 时，`URLWithString`如果您想通过网络访问文件，请使用 NSURL 的方法；如果`fileUrlWithPath`您在本地有文件，请使用 NSURL 的方法！

*   `[movieController.moviePlayer play]` **不是必需**的，无论您是否将自动播放设置为 NO，播放器都会启动，但我观察到，如果您放入`play`它，它会启动得更快一些。这可能只是一个巧合。

*   如果您想知道**用户何时点击了完成按钮**（播放器将自动关闭），您应该知道`-viewDidAppear`在播放器关闭时出现的视图控制器上调用了该按钮。您可以`BOOL`在玩家开始时设置一个变量并检查`BOOL`您的变量，`-viewDidAppear`以便您知道因为`-viewDidAppear`玩家被解雇而被调用。或者，您可以注册`MPMoviePlayerDidExitFullScreen`通知，但这对我不起作用。

**或者，如果这不起作用，您可以执行以下操作**

```
self.moviePlayer = [[MPMoviePlayerController alloc] initWithContentURL:[NSURL fileURLWithPath:[[NSBundle mainBundle] pathForResource:@"something" ofType:@"mp4"]]];
[self.moviePlayer.view setFrame:CGRectMake(0, 0, 320, 320)];
[self.moviePlayer play];
[self.view addSubview:self.moviePlayer.view]; 
```

*   self.movi​​eplayer 是**MPMoviePlayerController**（不是 MPMoviePlayerViewController）的一个实例。根据我的经验，将其声明为属性（如下所示`@property (strong, nonatomic) MPMoviePlayerController *moviePlayer;`：）而不是简单的 ivar 很重要，因为有时如果它是 ivar，它就不起作用

*   设置帧也很重要，因为如果我们不设置，视频根本不会出现。框架可以是任何东西，只要您定义的内容在您的视图范围内

*   **重要提示**：如上所述，在定义 URL 时，`URLWithString`如果您想**通过网络**访问文件，请使用NSURL 的方法，如果您在**本地**`fileUrlWithPath`有文件，请使用 NSURL 的方法！

 *** * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-05-29T06:51:56.483

你必须试试这个......

```
NSString *path = [[NSBundle mainBundle]pathForResource:@"test" ofType:@"mp4"];
    player = [[MPMoviePlayerViewController alloc]initWithContentURL:[NSURL fileURLWithPath:path]];
    [player.view setFrame:CGRectMake(0, 0, 320, 320)];
    [self presentMoviePlayerViewControllerAnimated:player];
    [player.moviePlayer play];
     [self.view addSubview:player.view]; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-01-24T12:00:52.990

尝试这个：

```
//Hello guise :- complete process here.

//1\. add framework in .h 
MediaPlayer/MediaPlayer.h

//2.add delegate in @interface, MPMediaPickerControllerDelegate

//3.@property (retain, nonatomic) MPMoviePlayerViewController *moviePlayerController;

//4.and synthesize in .m - @synthesize moviePlayerController;

//5.IN - tableViewdelegateMethod

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath: (NSIndexPath *)indexPath{    

    //given path for song
    NSArray *paths1 = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDirectory1 = [paths1 objectAtIndex:0];
    NSString *strPath = [NSString stringWithFormat:@"%@/%@",documentsDirectory1,[movieArray objectAtIndex:indexPath.row]];
    NSLog(@"strPath %@",strPath);
    //path for song.
    //convert path in NSURL.
    NSURL *videosURL = [NSURL fileURLWithPath:strPath];
    moviePlayerController = [[MPMoviePlayerViewController alloc]initWithContentURL:videosURL];
    [self presentMoviePlayerViewControllerAnimated:moviePlayerController];
    [moviePlayerController.moviePlayer play];
}

//play song on UITableViewCell click. 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-10T15:05:58.113

尝试添加

```
[player prepareToPlay]; 
```

后

```
MPMoviePlayerController *player = [[MPMoviePlayerController alloc] initWithContentURL:url]; 
```

您可以在 Apple 文档中阅读有关 MPMoviePlayerController 的更多信息：http: [//developer.apple.com/library/ios/#documentation/mediaplayer/reference/MPMoviePlayerController_Class/Reference/Reference.html#//apple_ref/doc/c_ref/MPMoviePlayerController](http://developer.apple.com/library/ios/#documentation/mediaplayer/reference/MPMoviePlayerController_Class/Reference/Reference.html#//apple_ref/doc/c_ref/MPMoviePlayerController)**

# java - Java - 杰克逊数组映射

> ID：12822429
> 
> 赞同：4
> 
> 时间：2012-10-10T14:59:43.217
> 
> 标签：java, json, jackson, gson

给定以下 JSON

```
{
    "obj" : {
        "f1" : "blah",
        "f2" : "blah",
        "f3" : [{"z1" : "blah", "arr" : [{"m1" : "blah", "m2" : "blah"}]}]
    }
} 
```

我已经厌倦了使用`@JsonProperty`and`@JsonCreator`来映射`"m1"`和`"m2"`值，但没有运气。

随着`@JsonCreator public Card(Map<String,Object> props) { }`我得到以下错误：

```
Argument #0 of constructor [constructor for MyObj$Obj$Card, annotations: {interface com.fasterxml.jackson.annotation.JsonCreator=@com.fasterxml.jackson.annotation.JsonCreator()}] has no property name annotation; must have name when multiple-paramater constructor annotated as Creator 
```

随着`@JsonCreator public Card(@JsonProperty("m1") String m1, @JsonProperty("m2") String m2,){}`我得到以下错误：

```
Argument #0 of constructor [constructor for MyObj$Obj$Card, annotations: {interface com.fasterxml.jackson.annotation.JsonCreator=@com.fasterxml.jackson.annotation.JsonCreator()}] has no property name annotation; must have name when multiple-paramater constructor annotated as Creator 
```

如何`"arr"`使用 Jackson 注释映射字段？谢谢。

**更新**

我也尝试加入`@JsonProperty("arr") private Card[] cards;`课堂`f3`，但也无济于事。

**更新 2**

我在上面的更新中更改了数组类型，现在我没有收到错误，但它的行为不像我希望的那样（我想处理映射）。

有没有机会以一种我可以纠正的方式解释错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T15:25:28.443

如果 m1 和 m2 不是硬编码属性，则应使用 TypeReference 将 json 转换为 java map。看到这个[条目](https://stackoverflow.com/a/2525152/484894)

否则，您可以将“arr”映射到您的 Arr 类，其中包含 String m1 和 String m2 作为字段。

# visual-studio-2010 - Visual Studio Team Foundation Server 2010 分支可视化

> ID：12822430
> 
> 赞同：0
> 
> 时间：2012-10-10T14:59:43.967
> 
> 标签：visual-studio-2010, visual-studio, version-control, tfs, branch

在维护特定项目的代码分支时，我注意到源代码控制面板与项目的分支层次结构不一致，通过单击分支可视化层次结构来确认`<Context Click> | Branching and Merging | View Hierarchy`。

MSDN上的源代码浏览器图片 [- 使用 TFS 2010 代码分支](http://msdn.microsoft.com/en-us/vs2010trainingcourse_branchingandmerging_topic2.aspx)**按预期**在源代码浏览器中显示加号。

 **我还尝试创建一个新分支，将“目标分支名称”更改为`$/Net Pr/Ye/Pe/New-Branch`并收到错误：

> TF203028: 您无法在 .. .. 创建分支，因为分支已经存在。

![我的 TFS 实施 -](../Images/3003ee538ca1b9635d5bf472614ecae4.png)

- -添加 - -

如何让我的源浏览器反映分支层次结构，如 MSDN 参考中所示？

- -添加 - -

![分支层次结构。](../Images/67d8b73720490b1d8efdae9ece85be65.png)**

# sql - T-SQL：检查 24 小时内的温度

> ID：12822433
> 
> 赞同：0
> 
> 时间：2012-10-10T14:59:48.280
> 
> 标签：sql, tsql

我有一个 SQL Server 数据库，其中包含我感兴趣的两个值：

```
dtime - datetime
temperature - varchar 
```

该表由一个外部过程馈送，该过程每 30 分钟测量一次建筑物的温度。如果温度超过 80 度持续 48 个周期（24 小时），我有兴趣触发警报。

我认为这需要一个外部进程来扫描表并在满足此条件时发送警报。我正在努力编写 SQL 来做到这一点。

**编辑**

我提取的数据每周都会出现。在这周内，我需要查看 24 小时内的任何时间温度是否超过 80 度。空调可能随时出现故障并持续两天或更长时间，因此我需要在几天内进行检查。每半小时测量一次温度，因此在一周内我需要检查是否有 48 多个实例温度超过 80 度。

样本数据：

```
10/1/2012 12:00:00 AM | 70 | {ok}
10/1/2012 12:30:00 AM | 70 | {ok}
10/1/2012 1:00:00 AM | 70 | {ok}
10/1/2012 1:30:00 AM | 75 | {ok}
10/1/2012 2:00:00 AM | 75 | {ok}
10/1/2012 2:30:00 AM | 80 | {ok} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T15:07:22.107

您可以使用[`ALL`](http://msdn.microsoft.com/en-us/library/ms178543.aspx)：

```
IF 80 < ALL(
  SELECT temperature 
  FROM (
    SELECT temperature, dtime,
    RN = ROW_NUMBER() OVER (ORDER BY dtime DESC)
    FROM dbo.Temps 
  ) X
  WHERE RN <= 48
)
SELECT 'ALERT, the last 48 measurements exceeded 80 degrees!'
ELSE 
SELECT 'everything is okay'; 
```

小提琴： [http ://sqlfiddle.com/#!6/4e2c8/7/0](http://sqlfiddle.com/#!6/4e2c8/7/0)

编辑：正如 Blam 提到的，这可以通过使用来简化`TOP`

```
IF 80 < ALL(
   SELECT TOP 48 temperature 
   FROM dbo.Temps
   ORDER BY dtime DESC
)
SELECT 'ALERT, the last 48 measurements exceeded 80 degrees!'
ELSE 
SELECT 'everything is okay'; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-10T15:04:04.643

```
select 'alert'
where not exists (
    select 1 
    from MyTable
    where dtime > dateadd(day, -1, getdate())
        and cast(temperature as int) <= 80
) 
```

# ios - iPad 2 和 iPhone 4s 上不同的 UITableView 滚动性能

> ID：12822438
> 
> 赞同：2
> 
> 时间：2012-10-10T14:59:56.377
> 
> 标签：ios, performance, uitableview, scroll

**解决了**

self.view 层上有一个阴影。删除它后，tableview 平滑滚动（56-59fps）。

我遇到的问题太奇怪了。

我正在构建一个基于 UITableView 的 Twitter，例如 App。在优化了表格视图的加载和滚动后，我在 iPad 2 和 iPhone 4S 上测试了这个 App（相同的代码和相同的 UI）。在 iPad 2 上，我得到了 56-59fps 的平滑滚动动画。但在 iPhone 4S 上，我只有 43-49fps 的滚动动画，这太糟糕了。

这似乎不是由 Retina 显示屏引起的。从单元格中删除所有图像后，问题仍然存在。下面是cellForRowAtIndexPath的代码

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    // fetch note from the fetched results controller
    Note *note = [self.fetchedResultsController objectAtIndexPath:indexPath];

    if ([note.photos count] > 0) {

        static NSString *CellIdentifier = @"Photo Cell";
        PhotoCell *cell = (PhotoCell *)[tableView dequeueReusableCellWithIdentifier:CellIdentifier];

        if (cell == nil){
            cell = [[PhotoCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
        } else {
            [cell clearContents];
        }

        NSNumber *currentRowNumber = [NSNumber numberWithInt:indexPath.row];
        // check if the photos of this cell has been pre loaded
        NSDictionary *coverImages = [self.coverImagesForNotes objectForKey:currentRowNumber];

        if (coverImages == nil) {
            if (self.tableView.dragging == NO && self.tableView.decelerating == NO) {
                coverImages = [self loadCoverImagesForCell:indexPath photos:note.photos];
                [self.coverImagesForNotes setObject:coverImages forKey:currentRowNumber];
            } 
        }

        // assign contents to the cell
        [self compositeContentView:cell forNote:note rowNumber:indexPath.row];

        // refine
        unsigned textContentHeight = [[self.cellTextHeightDict objectForKey:currentRowNumber] integerValue];
        unsigned currentPageNumber = [self currentPageNumberAtRow:indexPath.row];
        [cell initPhotoVideoView:textContentHeight photos:note.photos coverImages:coverImages showPage:currentPageNumber rowNumber:indexPath.row];

        cell.delegate = self;

        return cell;

    } else {
        static NSString *CellIdentifier = @"Simple Cell";
        BaseCell *cell = (BaseCell *)[tableView dequeueReusableCellWithIdentifier:CellIdentifier];

        if (cell == nil){
            cell = [[OneViewBaseCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
        }

        // assign contents to the cell
        [self compositeContentView:cell forNote:note rowNumber:indexPath.row];

        return cell;
    }
} 
```

感谢您的回答。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T15:06:02.183

您是否在表格视图单元格中使用图像？这在视网膜显示器上会更贵。此外，如果您正在使用图像，请尝试将它们加载到后台线程中，这将减少延迟。

如果您不使用图像，那么您应该真正了解如何创建单元格，请发布`tableView:cellForRowAtIndexPath:`方法实现

# jquery - jQuery 选择器问题

> ID：12822440
> 
> 赞同：1
> 
> 时间：2012-10-10T15:00:03.473
> 
> 标签：jquery

我无法为以下内容提出正确的 jQuery 选择器。

```
$(this) 
```

相当于

```
<div class="rating-edit" title="Click to edit...">edit rating</div> 
```

**HTML**

```
<p class="r-m"><span class="s5"></span></p>

<div class="rating-edit" title="Click to edit...">edit rating</div> 
```

我想要做的是定位段落类中的`s5`跨度，但后面的数字可以是任何数字，所以我不能根据它的实际类名来定位它。`r-m``s`

这是我尝试过的：

```
$(this).siblings('.r-m').child('span').removeClass().addClass('s'+value); 
```

但它似乎不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T15:07:14.133

尝试

```
$(this).siblings('p.r-m').find('span').attr('class', '').addClass('s'+value); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T15:04:38.250

没有 jQuery `.child`。我想你的意思是`.children`。

[http://jsfiddle.net/rtgAn/](http://jsfiddle.net/rtgAn/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T15:05:19.610

```
$(this).siblings('.r-m').children().first().removeClass().addClass('s'+value); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-10T15:07:42.717

$('span', this).removeClass().addClass('s'+value);

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-10T15:07:48.777

您可以使用“开始于”选择器：

```
.find("[class^=s]") 
```

[演示](http://jsfiddle.net/H66dW/1)

# grails - 覆盖脚手架控制器中的模板方法

> ID：12822441
> 
> 赞同：2
> 
> 时间：2012-10-10T15:00:03.457
> 
> 标签：grails, controller, scaffold

我有一个 Grails 项目，我在其中使用大量定制的脚手架模板来添加`beforeUpdate`模板方法，`update`这样我就可以轻松地自定义脚手架`Controller`，而不必分别生成然后编辑每个控制器。

不幸的是，这不起作用，只能`beforeUpdate`从脚手架调用。我怀疑这与 Groovy 用于将脚手架代码注入实际的代码生成有关`Controller`，但我找不到任何确认。

我要问的是解决问题的方法或解释为什么它不起作用。

下面是脚手架代码：

```
def beforeUpdate = {
    println "beforeUpdate from scaffold"
}

def update() {
    // call before update hook
    beforeUpdate()

    def ${propertyName} = ${className}.get(params.id)
    if (!${propertyName}) {
        flash.message = message(code: 'default.not.found.message', args: [message(code: '${domainClass.propertyName}.label', default: '${className}'), params.id])
        redirect(action: "list")
        return
    }
    [...] 
```

和脚手架的控制器代码（没有被调用，虽然我相信它应该被调用）：

```
class CalendarController {
    static scaffold = Calendar

    def beforeUpdate = {
            println "beforeUpdate from controller"
    }
} 
```

我已经尝试过*grails clean* ;-)

**更新**

我最终意识到，由于 Grails 脚手架的设计方式，这简直是不可能的。关闭。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-04T10:07:14.010

[您对这个问题](https://stackoverflow.com/q/16332787/592139)有类似的问题- 基本上，脚手架的工作方式是脚手架模板生成一个单独的类，“真实”控制器委托给该类。因此，如果您希望生成的控制器调用您无法使用的真实控制器上的方法，则`this`需要获取对真实控制器对象的引用。

长话短说，使用

```
GrailsWebUtil.getControllerFromRequest(request).beforeUpdate() 
```

而不仅仅是

```
beforeUpdate() 
```

* * *

```
def update() {
    // call before update hook
    def realController = GrailsWebUtil.getControllerFromRequest(request)
    if(realController.hasProperty('beforeUpdate') &&
         realController.beforeUpdate instanceof Closure) {
      realController.beforeUpdate()
    } else {
      this.beforeUpdate()
    }

    def ${propertyName} = ${className}.get(params.id)
    if (!${propertyName}) {
        flash.message = message(code: 'default.not.found.message', args: [message(code: '${domainClass.propertyName}.label', default: '${className}'), params.id])
        redirect(action: "list")
        return
    }
    [...] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-04T06:34:52.873

我最终意识到，由于 Grails 脚手架的设计方式，这根本不可能：通过将方法动态复制/创建到脚手架控制器中而不使用继承。

# visual-c++ - GLSL 不会接受我的隐式演员表

> ID：12822442
> 
> 赞同：2
> 
> 时间：2012-10-10T15:00:04.263
> 
> 标签：visual-c++, opengl, glsl, linker-errors

我正在学习 OpenGL 3.3，使用一些教程 (http://opengl-tutorial.org)。在我正在使用的教程中，有一个顶点着色器，它执行以下操作：

**教程着色器源**

```
#version 330 core

// Input vertex data, different for all executions of this shader.
layout(location = 0) in vec3 vertexPosition_modelspace;

// Values that stay constant for the whole mesh.
uniform mat4 MVP;

void main(){

    // Output position of the vertex, in clip space : MVP * position
    gl_Position =  MVP * vec4(vertexPosition_modelspace,1);

} 
```

然而，当我尝试在我的应用程序中模拟相同的行为时，我得到以下信息：

`error: implicit cast from "vec4" to "vec3"`.

看到这个后，我不确定是不是因为我使用的是 4.2 版本的着色器而不是 3.3，所以更改了所有内容以匹配作者一直使用的内容，之后仍然收到相同的错误。

所以，我改变了我的着色器来做到这一点：

**我的（最新）来源**

```
#version 330 core

layout(location = 0) in vec3 vertexPosition_modelspace;

uniform mat4 MVP;

void main()
{
    vec4 a = vec4(vertexPosition_modelspace, 1);    

    gl_Position.xyz = MVP * a;
} 
```

当然，这仍然会产生相同的错误。

有谁知道为什么会这样，以及对此的解决方案可能是什么？我不确定它是否是我的调用代码（我已经发布了，以防万一）。

* * *

**调用代码**

```
static const GLfloat T_VERTEX_BUF_DATA[] = 
{
    // x, y z
    -1.0f, -1.0f, 0.0f,
     1.0f, -1.0f, 0.0f,
     0.0f, 1.0f, 0.0f
};

static const GLushort T_ELEMENT_BUF_DATA[] = 
{ 0, 1, 2 };

void TriangleDemo::Run(void)
{
    glClear(GL_COLOR_BUFFER_BIT);

    GLuint matrixID = glGetUniformLocation(mProgramID, "MVP");

    glUseProgram(mProgramID);

    glUniformMatrix4fv(matrixID, 1, GL_FALSE, &mMVP[0][0]); // This sends our transformation to the MVP uniform matrix, in the currently bound vertex shader 

    const GLuint vertexShaderID = 0;

    glEnableVertexAttribArray(vertexShaderID);
    glBindBuffer(GL_ARRAY_BUFFER, mVertexBuffer);
    glVertexAttribPointer(
        vertexShaderID, // Specify the ID of the shader to point to (in this case, the shader is built in to GL, which will just produce a white triangle)
        3,              // Specify the number of indices per vertex in the vertex buffer  
        GL_FLOAT,       // Type of value the vertex buffer is holding as data
        GL_FALSE,       // Normalized? 
        0,              // Amount of stride
        (void*)0 );     // Offset within the array buffer

    glDrawArrays(GL_TRIANGLES, 0, 3); //0 => start index of the buffer, 3 => number of vertices

    glDisableVertexAttribArray(vertexShaderID);
}

void TriangleDemo::Initialize(void)
{
    glGenVertexArrays(1, &mVertexArrayID);

    glBindVertexArray(mVertexArrayID);

    glGenBuffers(1, &mVertexBuffer);

    glBindBuffer(GL_ARRAY_BUFFER, mVertexBuffer);

    glBufferData(GL_ARRAY_BUFFER, sizeof(T_VERTEX_BUF_DATA), T_VERTEX_BUF_DATA, GL_STATIC_DRAW );

    mProgramID = LoadShaders("v_Triangle", "f_Triangle");

    glm::mat4 projection = glm::perspective(45.0f, 4.0f / 3.0f, 0.1f, 100.0f); // field of view, aspect ratio (4:3), 0.1 units near, to 100 units far

    glm::mat4 view  = glm::lookAt(
                                glm::vec3(4, 3, 3), // Camera is at (4, 3, 3) in world space
                                glm::vec3(0, 0, 0), // and looks at the origin
                                glm::vec3(0, 1, 0)  // this is the up vector - the head of the camera is facing upwards. We'd use (0, -1, 0) to look upside down
                            );

    glm::mat4 model = glm::mat4(1.0f); // set model matrix to identity matrix, meaning the model will be at the origin

    mMVP            = projection * view * model; 
```

}

**笔记**

*   我在 Visual Studio 2012
*   我正在使用[Shader Maker](http://cg.in.tu-clausthal.de/teaching/shader_maker/index.shtml)进行 GLSL 编辑

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T15:12:11.090

我不能说教程代码有什么问题。

不过，在“我的最新消息来源”中，有

```
gl_Position.xyz = MVP * a; 
```

这看起来很奇怪，因为您将 a 分配`vec4`给 a `vec3`。

* * *

编辑

我无法重现您的问题。

我使用了一个简单的片段着色器进行测试......

```
#version 330 core

void main()
{
} 
```

**测试“教程着色器源”**：

```
3.3.11762 Core Profile Context
Log: Vertex shader was successfully compiled to run on hardware.

Log: Fragment shader was successfully compiled to run on hardware.

Log: Vertex shader(s) linked, fragment shader(s) linked. 
```

**测试“我的最新来源”**：

```
3.3.11762 Core Profile Context
Log: Vertex shader was successfully compiled to run on hardware.
 WARNING: 0:11: warning(#402) Implicit truncation of vector from size 4 to size 3.

Log: Fragment shader was successfully compiled to run on hardware.

Log: Vertex shader(s) linked, fragment shader(s) linked. 
```

`gl_Position.xyz`替换为后警告消失`gl_Position`。

* * *

你的设置是什么？你有正确版本的 OpenGL 上下文吗？glGetError() 是静音的吗？

最后，您的 GPU 驱动程序是最新的吗？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-10T19:17:48.260

我遇到了一些 GPU（我相信是 ATi 的）在需要浮点数时不喜欢整数文字的问题。尝试改变

```
gl_Position =  MVP * vec4(vertexPosition_modelspace,1); 
```

到

```
gl_Position =  MVP * vec4(vertexPosition_modelspace, 1.0); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-10-22T21:59:51.930

我刚刚在安装了最新驱动程序的 ATI Radeon HD 7900 上遇到了此错误消息，同时编译了与“虚拟地球仪的 3D 引擎设计”一书 ( [http://www.virtualglobebook.com](http://www.virtualglobebook.com) ) 相关的一些示例代码。

这是原始片段着色器行：
`fragmentColor = mix(vec3(0.0, intensity, 0.0), vec3(intensity, 0.0, 0.0), (distanceToContour < dF));`

解决方案是将有问题的布尔表达式转换为浮点数，如下所示：
`fragmentColor = mix(vec3(0.0, intensity, 0.0), vec3(intensity, 0.0, 0.0), float(distanceToContour < dF));`

混合手册（[http://www.opengl.org/sdk/docs/manglsl](http://www.opengl.org/sdk/docs/manglsl)）指出

> 对于 a 为 genBType 的 mix 的变体，a[i] 为假的元素，该元素的结果取自 x，而 a[i] 为真，则取自 y。

*因此，由于编译器应该*接受布尔混合值而不加注释，我认为这应该归结为 AMD/ATI 驱动程序问题。

# wpf - WPF GlyphRuns 和上下文相关字符

> ID：12822443
> 
> 赞同：2
> 
> 时间：2012-10-10T15:00:08.117
> 
> 标签：wpf, text, glyph

我正在尝试在 WPF 中逐个字符地在字形级别呈现阿拉伯语文本。渲染拉丁文本很容易，每个字符都简单地转换为一个 Unicode 代码点，我使用 GlyphTypeface 的 CharacterToGlyphMap 字典来检索每个字符的 GlyphRun。

对于阿拉伯语（和其他语言），事情似乎要复杂得多：字符使用不同的字形，具体取决于它们周围的字符以及它们在单词中的位置。我想这些上下文字符形式也都有自己的 Unicode 代码点。

我的问题是： - 我将如何获得这些依赖于上下文的代码点？TextBlock 正确显示阿拉伯文本（我想），它如何知道要使用哪些字形？- 这种逐个字符的方法甚至适用于阿拉伯语，还是我应该知道更多？

# javascript - 为什么我的选择 onchange 不起作用？

> ID：12822444
> 
> 赞同：1
> 
> 时间：2012-10-10T15:00:10.297
> 
> 标签：javascript, jquery

我有这个代码：

```
 <select>
                <option onChange="filterProducts(this);">Select ...</option>
                <option onChange="filterProducts(this);">Samsung</option>
                <option onChange="filterProducts(this);">LG</option>
                <option onChange="filterProducts(this);">Sony</option>
                <option onChange="filterProducts(this);">Philips</option>
            </select> 
```

哪个应该触发一个 js 方法，但它根本不会触发：

```
function filterProducts(firedByControl){
   alert(fired);
} 
```

对于这个按钮，调用相同的 js 方法，一切正常：

```
<button type="button" class="btn" onclick="filterProducts(this)" value="LCD">LCD</button> 
```

你能告诉我我哪里错了吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T15:01:21.873

您需要对元素进行 onchange 调用。

```
 <select onChange="filterProducts(...);">
            <option>Select ...</option>
            <option>Samsung</option>
            <option>LG</option>
            <option>Sony</option>
            <option>Philips</option>
 </select> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T15:02:03.760

将 移动`onchange`到如下所示的选择，

```
<select onchange="filterProducts"> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T15:02:04.247

我认为`onchange`应该是`<select>`元素的一个属性，而不是每个`<option>`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-10T15:02:28.003

改为这样做`<select onchange="filterProducts(this);">`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-10T15:02:42.857

您需要将 onchange 属性放在 上`select`，而不是`option`.

顺便说一句，您可能应该使用 JQuery 做类似的事情：

```
$("select").onChange(filterProducts); 
```

# c# - 将 LINQ to Entities 分解为多个部分

> ID：12822446
> 
> 赞同：3
> 
> 时间：2012-10-10T15:00:12.887
> 
> 标签：c#, linq, entity-framework, lambda, linq-to-entities

我有以下代码

```
query = query.Where(device => GetDeviceDistanceFromGeocode(geocode, device) <= distanceMetres);

private static double GetDeviceDistanceFromGeocode(Geocode geocode, Device device)
{
    return Math.Pow(
        Math.Pow(device.Address.Geocode.Easting - geocode.Easting, 2) +
        Math.Pow(device.Address.Geocode.Northing - geocode.Northing, 2)
        , 0.5);
} 
```

但是它会引发异常，因为 linq 无法识别我的函数，这迫使我一次性完成整个查询表达式。

```
Exception[LINQ to Entities does not recognize the method 
'Double DistanceOfDeviceFromGeocode(Geocode, Device)' method, 
and this method cannot be translated into a store expression.] 
```

是否可以像我在这里尝试做的那样将查询表达式分成多个部分？当查询很大时，它不是很可读。

* * *

编辑：

这是评论中要求的完整查询。

```
return query.Where(device => 
            Math.Pow(
                Math.Pow(device.Address.Geocode.Easting - geocode.Easting, 2) + 
                Math.Pow(device.Address.Geocode.Northing - geocode.Northing, 2)
                , 0.5) 
                <= distanceMetres); 
```

基本上我认为这不是很可读，所以想把它分解成多个部分，但从提供的链接来看，这似乎是不可能的。

在 c++ 中，我可以将其中的一些分解成一个宏，但不幸的是，这不是 c# 的一个特性。

* * *

根据建议，我已将代码更新为此，效果非常好，并大大提高了代码的可读性！

```
 return query.Where( DevicesWithinDistanceFromGeocode(distanceMetres, geocode) );
}

public Expression<Func<Device, bool>> DevicesWithinDistanceFromGeocode(double distance, Geocode geocode)
{
    return device => (  SqlFunctions.SquareRoot(
                            SqlFunctions.Square((double)(device.Address.Geocode.Easting - geocode.Easting)) +
                            SqlFunctions.Square((double)(device.Address.Geocode.Northing - geocode.Northing))
                        ) <= distance );
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T15:08:15.397

从技术上讲[，有一些方法可以做到这一点](https://stackoverflow.com/questions/2042668/given-linq-to-entities-does-not-support-custom-methods-how-do-you-stay-dry)，但是由于 Linq 不能直接将您的自定义代码转换为 SQL，因此它们需要将所有结果返回到 Linq，然后评估自定义方法。

由于您在`Where`子句中使用它，我假设您希望检索相对较少的记录。在这种情况下，我建议在 SQL 中对您的条件进行编码，无论是在存储过程还是标量值函数中，然后在 Linq-to-Entities 查询中使用该存储过程/函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T15:43:43.673

我不太明白你在说什么；如果您只在一个地方使用此代码，并且它是查询中的唯一子句，那么将计算移至单独的方法并不会真正改变太多。

相反，如果您希望在多个地方重复使用距离计算代码并且不想重复它，或者如果您想要在一个查询中调用多个检查并且不希望该查询得到太笨重了，你可以试试例如

```
public static IQueryable<Device> WhereCloseToGeocode(
    this IQueryable<Device> source,
    Geocode geocode,
    double distanceMetres)
{
    return source.Where(device => Math.Pow(
        Math.Pow(device.Address.Geocode.Easting - geocode.Easting, 2) +
        Math.Pow(device.Address.Geocode.Northing - geocode.Northing, 2),
        0.5) <= distanceMetres);  
}

public static IQueryable<Device> OtherCondition(
    this IQueryable<Device> source, ...)
{
   ...
}

...
devices = devices
    .WhereCloseToGeocode(geocode1, 3)
    .WhereCloseToGeocode(geocode2, 7)
    .OtherCondition(...); 
```

它不如将距离计算作为自己的方法好——例如，您需要一种用于“接近”的方法和一种用于“更远”的单独方法——但它*应该*在 L2E 中工作，因为它本质上与链接您的原始`Where`条款，您说这有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T15:04:01.123

您的问题是，您正在使用`device`in 方法。Linq to Entities 必须将您的 Linqquery 转换为 SQLQuery。

您必须`device`先从数据库中全选才能成功执行此查询。

查找静态类`SqlMethods`以查找此问题的其他示例 :)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-10T15:09:18.220

这可能非常昂贵（取决于您的桌子的大小），但会起作用：

```
query = query.ToList().Where(device => GetDeviceDistanceFromGeocode(geocode, device) <= distanceMetres); 
```

在这种方法中，您首先评估查询，然后针对客户端的每条记录运行您的方法。

# tomcat - CloudFoundry 上的 Grails 应用程序不会重新启动

> ID：12822449
> 
> 赞同：0
> 
> 时间：2012-10-10T15:00:22.663
> 
> 标签：tomcat, grails, cloud-foundry

我正在使用 STS 将 Grails 应用程序部署到 CloudFoundry。一切都很顺利，进行编辑并执行“更新并重新启动”。突然之间，我开始遇到应用程序无法成功重启的问题。以下是日志显示的内容：

```
Oct 10, 2012 2:18:31 PM org.apache.coyote.http11.Http11Protocol init
INFO: Initializing Coyote HTTP/1.1 on http-6401
Oct 10, 2012 2:18:31 PM org.apache.catalina.startup.Catalina load
INFO: Initialization processed in 380 ms
Oct 10, 2012 2:18:31 PM org.apache.catalina.realm.JAASRealm setContainer
INFO: Set JAAS app name Catalina
Oct 10, 2012 2:18:31 PM org.apache.catalina.core.StandardService start
INFO: Starting service Catalina
Oct 10, 2012 2:18:31 PM org.apache.catalina.core.StandardEngine start
INFO: Starting Servlet Engine: Apache Tomcat/6.0.35
Oct 10, 2012 2:18:31 PM org.apache.catalina.startup.HostConfig deployDirectory
INFO: Deploying web application directory ROOT
Oct 10, 2012 2:18:43 PM org.apache.catalina.core.StandardContext start
SEVERE: Error listenerStart
Oct 10, 2012 2:18:43 PM org.apache.catalina.core.StandardContext start
SEVERE: Context [] startup failed due to previous errors
Oct 10, 2012 2:18:43 PM org.apache.catalina.loader.WebappClassLoader clearReferencesThreads
SEVERE: The web application [] appears to have started a thread named [net.sf.ehcache.CacheManager@2ff7ac92] but has failed to stop it. This is very likely to create a memory leak.
Oct 10, 2012 2:18:43 PM org.apache.catalina.loader.WebappClassLoader clearReferencesThreads
SEVERE: The web application [] appears to have started a thread named [com.lossless.S2Role.data] but has failed to stop it. This is very likely to create a memory leak.
Oct 10, 2012 2:18:43 PM org.apache.catalina.loader.WebappClassLoader clearReferencesThreads
SEVERE: The web application [] appears to have started a thread named [org.hibernate.cache.UpdateTimestampsCache.data] but has failed to stop it. This is very likely to create a memory leak.
Oct 10, 2012 2:18:43 PM org.apache.catalina.loader.WebappClassLoader clearReferencesThreads
SEVERE: The web application [] appears to have started a thread named [org.hibernate.cache.StandardQueryCache.data] but has failed to stop it. This is very likely to create a memory leak.
Oct 10, 2012 2:18:43 PM org.apache.catalina.loader.WebappClassLoader clearReferencesThreads
SEVERE: The web application [] appears to have started a thread named [quartzScheduler_Worker-1] but has failed to stop it. This is very likely to create a memory leak.
Oct 10, 2012 2:18:43 PM org.apache.catalina.loader.WebappClassLoader clearReferencesThreads
SEVERE: The web application [] appears to have started a thread named [quartzScheduler_Worker-2] but has failed to stop it. This is very likely to create a memory leak.
Oct 10, 2012 2:18:43 PM org.apache.catalina.loader.WebappClassLoader clearReferencesThreads
SEVERE: The web application [] appears to have started a thread named [quartzScheduler_Worker-3] but has failed to stop it. This is very likely to create a memory leak.
Oct 10, 2012 2:18:43 PM org.apache.catalina.loader.WebappClassLoader clearReferencesThreads
SEVERE: The web application [] appears to have started a thread named [quartzScheduler_Worker-4] but has failed to stop it. This is very likely to create a memory leak.
Oct 10, 2012 2:18:43 PM org.apache.catalina.loader.WebappClassLoader clearReferencesThreads
SEVERE: The web application [] appears to have started a thread named [quartzScheduler_Worker-5] but has failed to stop it. This is very likely to create a memory leak.
Oct 10, 2012 2:18:43 PM org.apache.catalina.loader.WebappClassLoader clearReferencesThreads
SEVERE: The web application [] appears to have started a thread named [quartzScheduler_Worker-6] but has failed to stop it. This is very likely to create a memory leak.
Oct 10, 2012 2:18:43 PM org.apache.catalina.loader.WebappClassLoader clearReferencesThreads
SEVERE: The web application [] appears to have started a thread named [quartzScheduler_Worker-7] but has failed to stop it. This is very likely to create a memory leak.
Oct 10, 2012 2:18:43 PM org.apache.catalina.loader.WebappClassLoader clearReferencesThreads
SEVERE: The web application [] appears to have started a thread named [quartzScheduler_Worker-8] but has failed to stop it. This is very likely to create a memory leak.
Oct 10, 2012 2:18:43 PM org.apache.catalina.loader.WebappClassLoader clearReferencesThreads
SEVERE: The web application [] appears to have started a thread named [quartzScheduler_Worker-9] but has failed to stop it. This is very likely to create a memory leak.
Oct 10, 2012 2:18:43 PM org.apache.catalina.loader.WebappClassLoader clearReferencesThreads
SEVERE: The web application [] appears to have started a thread named [quartzScheduler_Worker-10] but has failed to stop it. This is very likely to create a memory leak.
Oct 10, 2012 2:18:43 PM org.apache.catalina.loader.WebappClassLoader clearReferencesThreads
SEVERE: The web application [] appears to have started a thread named [quartzScheduler_QuartzSchedulerThread] but has failed to stop it. This is very likely to create a memory leak.
Oct 10, 2012 2:18:43 PM org.apache.catalina.loader.WebappClassLoader clearThreadLocalMap
SEVERE: The web application [] created a ThreadLocal with key of type [org.springframework.core.NamedThreadLocal] (value [Actual transaction active]) and a value of type [java.lang.Boolean] (value [true]) but failed to remove it when the web application was stopped. This is very likely to create a memory leak.
Oct 10, 2012 2:18:43 PM org.apache.catalina.loader.WebappClassLoader clearThreadLocalMap
SEVERE: The web application [] created a ThreadLocal with key of type [org.springframework.core.NamedThreadLocal] (value [Transactional resources]) and a value of type [java.util.HashMap] (value [{org.apache.commons.dbcp.BasicDataSource@19129103=org.springframework.jdbc.datasource.ConnectionHolder@1251dee1, org.hibernate.impl.SessionFactoryImpl@21faa3c5=org.springframework.orm.hibernate3.SessionHolder@3cff8f2c}]) but failed to remove it when the web application was stopped. This is very likely to create a memory leak.
Oct 10, 2012 2:18:43 PM org.apache.catalina.loader.WebappClassLoader clearThreadLocalMap
SEVERE: The web application [] created a ThreadLocal with key of type [org.springframework.core.NamedThreadLocal] (value [Current transaction name]) and a value of type [java.lang.String] (value [lossless.MarketScannerJob.execute]) but failed to remove it when the web application was stopped. This is very likely to create a memory leak.
Oct 10, 2012 2:18:43 PM org.apache.catalina.loader.WebappClassLoader clearThreadLocalMap
SEVERE: The web application [] created a ThreadLocal with key of type [org.springframework.core.NamedThreadLocal] (value [Current aspect-driven transaction]) and a value of type [org.springframework.transaction.interceptor.TransactionAspectSupport.TransactionInfo] (value [PROPAGATION_REQUIRED,ISOLATION_DEFAULT; '']) but failed to remove it when the web application was stopped. This is very likely to create a memory leak.
Oct 10, 2012 2:18:43 PM org.apache.catalina.loader.WebappClassLoader clearThreadLocalMap
SEVERE: The web application [] created a ThreadLocal with key of type [org.springframework.core.NamedThreadLocal] (value [Transaction synchronizations]) and a value of type [java.util.LinkedHashSet] (value [[]]) but failed to remove it when the web application was stopped. This is very likely to create a memory leak.
....
Stopping Tomcat because the context stopped. 
```

我尝试删除该应用程序，但没有帮助。我尝试删除应用程序和数据库，但没有帮助。昨晚终于奏效的是创建一个具有不同名称的新数据库。今天，我又回到了同样的问题。

我不确定问题何时出现，但*可能*与我添加 Quartz 插件并创建工作时有关。

显然，我无法在每次更改应用程序时都重新创建新数据库。

我该如何解决这个问题？

感谢您的任何建议！这让我发疯了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T02:23:21.993

事实证明，由于一些级联问题，我在 Bootstrap 执行期间遇到了这个异常。

```
org.hibernate.TransientObjectException: object references an unsaved transient instance - save the transient instance before flushing 
```

部分问题是我看不到错误。发现此类问题的一个非常有用的标志是 failOnError：

```
o.save(failOnError:true) 
```

一旦我将该标志添加到我的 save() 调用中，我就可以看到异常。一旦我摆脱了异常，我的应用程序又开始运行了，我现在也可以更新和重新启动了。

这是使用 CloudFoundry 的另一个方便的技巧。这些命令可让您列出日志文件：

```
vmc files <appname> logs
vmc files <appname> tomcat/logs 
```

这些命令可让您查看日志文件的内容：

```
vmc files <appname> logs/stdout.log
vmc files <appname> logs/stderr.log
vmc files <appname> tomcat/logs/localhost.2012-10-11.log
vmc files <appname> tomcat/logs/catalina.2012-10-11.log 
```

我希望这可以帮助别人。它确实帮助了我。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T15:06:43.597

我遇到了 Grails 和石英插件的问题。

当我通过命令行安装插件时`grails install quatz-plugin`，它在 grails-app 下创建了一个名为 Jobs 的文件夹，并在那里添加了它的源，但是 STS 没有将其识别为源的有效文件夹，并且每次我尝试使用时它都会使我的应用崩溃它

在我的情况下，工作文件夹下

```
grails-app/jobs 
```

未在 STS 中列为源文件夹，因此在应用程序启动时请求作业时应用程序正在死亡。

# php - 我应该在 SQL 或 JS 中为 d3 过滤我的数据吗

> ID：12822452
> 
> 赞同：1
> 
> 时间：2012-10-10T15:00:37.327
> 
> 标签：php, javascript, mysql, filtering, d3.js

我一直在考虑将这个问题作为我的 mySQL 数据库中大量数据的可视化开发。

我当前的代码在页面加载时运行 php SQL 查询，将其转换为 JSON，并将其存储在 Javascript 变量中以供 d3 以后使用以进行可视化。

在可视化期间，我需要使用该数据，但还需要过滤掉结果或执行某种量化或分箱。

在页面加载时在 php 中运行多个 SQL 查询并将结果存储到多个 Javascript 变量中是否更好（因此让 SQL 完成工作）

或者...

我是否继续我正在做的事情，并使用 for 循环在 Javascript 中运行数据，提取我需要的过滤数据。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T15:04:58.587

使用 SQL 来完成它应该为更具响应性的应用程序所做的工作，并且是 IMO 的“正确”位置。数据层而不是表示层之类的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-03T18:27:52.157

您可以查看[crossfilter.js](http://square.github.io/crossfilter/)和[dc.js](http://nickqizhu.github.io/dc.js/)。

这两个库都使用高度优化的 Javascript 在客户端进行过滤，并让您快速创建基于过滤器的交互式仪表板。

# algorithm - 谷歌图片搜索是如何实现的？

> ID：12822455
> 
> 赞同：8
> 
> 时间：2012-10-10T15:00:40.540
> 
> 标签：algorithm, search, image-processing, search-engine

我可以在谷歌中拖放任何图像并获得结果。:)

它是如何实现的？算法背后的想法是什么？

该图像数据是否转换为任何搜索或......不知道......

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-10T15:30:58.967

令人惊讶的是，我们也可以用谷歌来回答这个问题！

[Google Search by Image 使用的算法是什么](http://www.quora.com/Algorithms/What-is-the-algorithm-used-by-Google-Search-by-Image-1)

绝对没有得到证实，但我确信谷歌在识别图像时使用了许多这些技术/它们的混合

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T15:35:10.053

我认为谷歌图像使用 3 组合算法

1.  检测图像的变形（通过旋转、缩放、照明……）
2.  通过颜色检测
3.  通过视觉相似度检测

还有第四个算法，它是谷歌的秘密（例如排名）；）

（见这里-> [http://www.quora.com/Algorithms/What-is-the-algorithm-used-by-Google-Search-by-Image-1](http://www.quora.com/Algorithms/What-is-the-algorithm-used-by-Google-Search-by-Image-1)）

* * *

**2016 年更新**

我最初的答案是在 2012 年——与此同时，其他研究和研究变得越来越重要，我学到了一些新东西。;-)

在我看来，关于图像检测的主要“哲学”是三个：

1.  [机器学习](https://en.wikipedia.org/wiki/Machine_learning)算法
2.  [深度学习](https://en.wikipedia.org/wiki/Deep_learning)（一种机器学习算法）
3.  （[模式识别](https://en.wikipedia.org/wiki/Pattern_recognition)）

今天，我认为模式识别已经失去了它的重要性：在我看来，机器学习是通过图像进行搜索的正确方法。

借助机器学习，您甚至可以搜索相似匹配（例如面孔 - 它们之间显然不相等）。困难在于你将如何正确地教你的机器。可以采取不同的方法。

深度学习只是一种机器学习算法。它使用不同的层来匹配可能的图像更深入，层的一些示例可能是：

*   像素向量（颜色，强度，..）
*   形状
*   边缘
*   ...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-04-18T17:53:57.747

图像搜索是一个令人兴奋的领域。谷歌反向图像搜索结合使用了图像处理技术，例如尺度不变特征变换和基于主成分分析的尺度不变特征变换。除了深度学习技术和图像处理算法的实力之外，谷歌在大规模部署大规模大数据处理算法方面具有优势。谷歌还使用先进的散列技术创建真正有效的图像索引。有趣的是，谷歌如何为图像创建节省空间的数据结构，这些数据结构随后将用于图像搜索算法。

[反向图像搜索的基础知识](https://en.wikipedia.org/wiki/Reverse_image_search)

总的来说，谷歌图像搜索的效率不仅是因为图像处理算法。它还重新使用和重新利用 Google 文本搜索引擎的参数搜索技术。

[谷歌图片搜索算法中的因素](https://www.stanventures.com/blog/google-image-algorithm-update-2018-ranking-factors-explained/)

# sql - PostgreSQL 删除除最旧记录外的所有记录

> ID：12822457
> 
> 赞同：7
> 
> 时间：2012-10-10T15:00:45.743
> 
> 标签：sql, postgresql, duplicate-removal

我有一个 PostgreSQL 数据库，它有多个 , 多个条目`objectid`，`devicenames`但`timestamp`每个条目都有一个唯一的。该表如下所示：

```
address | devicename | objectid      |  timestamp       
--------+------------+---------------+------------------------------
1.1.1.1 | device1    | vs_hub.ch1_25 | 2012-10-02 17:36:41.011629+00
1.1.1.2 | device2    | vs_hub.ch1_25 | 2012-10-02 17:48:01.755559+00
1.1.1.1 | device1    | vs_hub.ch1_25 | 2012-10-03 15:37:09.06065+00
1.1.1.2 | device2    | vs_hub.ch1_25 | 2012-10-03 15:48:33.93128+00
1.1.1.1 | device1    | vs_hub.ch1_25 | 2012-10-05 16:01:59.266779+00
1.1.1.2 | device2    | vs_hub.ch1_25 | 2012-10-05 16:13:46.843113+00
1.1.1.1 | device1    | vs_hub.ch1_25 | 2012-10-06 01:11:45.853361+00
1.1.1.2 | device2    | vs_hub.ch1_25 | 2012-10-06 01:23:21.204324+00 
```

我想删除除每个`odjectid`and的最旧条目之外的所有条目`devicename`。在这种情况下，我想删除所有，但：

```
1.1.1.1 | device1 | vs_hub.ch1_25 | 2012-10-02 17:36:41.011629+00
1.1.1.2 | device2 | vs_hub.ch1_25 | 2012-10-02 17:48:01.755559+00 
```

有没有办法做到这一点？或者是否可以将“`objectid`和`devicename`”的最旧条目选择到临时表中？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-10T18:19:24.687

这应该这样做：

```
delete from devices
using (
   select ctid as cid, 
          row_number() over (partition by devicename, objectid order by timestamp asc) as rn
   from devices
) newest
where newest.cid = devices.ctid
and newest.rn <> 1; 
```

它创建一个派生表，该表将为（地址、设备名称、对象ID）的每个组合分配唯一编号，将最早的（具有最小值的`timestamp`那个）编号为1。然后使用此结果删除所有没有的数字 1。虚拟列`ctid`用于唯一标识这些行（它是 Postgres 提供的内部标识符）。

请注意，对于删除大量行，Erwin 的方法肯定会更快。

SQLFiddle 演示：[http ://www.sqlfiddle.com/#!1/5d9fe/2](http://www.sqlfiddle.com/#!1/5d9fe/2)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-10T16:36:21.320

为了提取所描述的结果，这可能是最简单和最快的：

```
SELECT DISTINCT ON (devicename, objectid) *
FROM   tbl
ORDER  BY devicename, objectid, ts DESC; 
```

[此相关答案中的](https://stackoverflow.com/a/7630564/939860)详细信息和解释。

从您的示例数据中，我得出结论，您将**删除原始表的大部分**。[`TRUNCATE`](https://www.postgresql.org/docs/current/sql-truncate.html)仅表（或`DROP`& 重新创建，因为无论如何您都应该添加一个代理 pk 列）并将剩余的行写入它可能会更快。这也为您提供了一个原始表，以最适合您的查询的方式隐式聚集（排序），并节省`VACUUM`否则必须执行的工作。总体上它可能仍然更快：

我还强烈建议在您的表中添加一个代理主键，最好是一[**`serial`**](https://www.postgresql.org/docs/current/datatype-numeric.html#DATATYPE-SERIAL)列。

```
BEGIN;

CREATE TEMP TABLE tmp_tbl ON COMMIT DROP AS
SELECT DISTINCT ON (devicename, objectid) *
FROM   tbl
ORDER  BY devicename, objectid, ts DESC;

TRUNCATE tbl;
ALTER TABLE tbl ADD column tbl_id serial PRIMARY KEY;

-- or, if you can afford to drop & recreate:
-- DROP TABLE tbl;
-- CREATE TABLE tbl (
--   tbl_id serial PRIMARY KEY
-- , address text
-- , devicename text
-- , objectid text
-- , ts timestamp);

INSERT INTO tbl (address, devicename, objectid, ts)
SELECT address, devicename, objectid, ts
FROM   tmp_tbl;

COMMIT; 
```

在事务中完成所有操作，以确保您不会在中途失败。

只要您的设置[`temp_buffers`](https://www.postgresql.org/docs/current/runtime-config-resource.html#RUNTIME-CONFIG-RESOURCE-MEMORY)足够大以容纳临时表，这就会很快。否则系统将开始将数据交换到磁盘并且性能会下降。您可以`temp_buffers`像这样为当前会话设置：

```
SET temp_buffers = 1000MB; 
```

因此，您不会浪费通常不需要的 RAM `temp_buffers`。必须在会话中首次使用任何临时对象之前设置。[此相关答案](https://stackoverflow.com/a/8290958/939860)中的更多信息。

此外，由于在`INSERT`事务内部， [Write Ahead Log](https://www.postgresql.org/docs/current/wal-intro.html)`TRUNCATE`将很容易- 提高性能。

考虑`CREATE TABLE AS`替代路线：

*   [是什么导致大型 INSERT 变慢和磁盘使用量激增？](https://dba.stackexchange.com/q/114856/3684)

唯一的缺点：您需要在表上使用**排他锁**。这在并发负载很重的数据库中可能是个问题。

最后，永远不要`timestamp`用作列名。它是每个 SQL 标准中的[保留字](https://www.postgresql.org/docs/current/sql-keywords-appendix.html)，也是 PostgreSQL 中的类型名称。我`ts`改用了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T15:09:08.183

从设备 D 中删除 d.timestamp = (SELECT min(timestamp) 从设备中 objectid = d.objectid 和 device = d.device)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-10T15:30:27.533

假设`address, devicename and objectid`构成唯一标识符，这应该可以工作

```
DELETE FROM tablename 
WHERE 
  address || devicename || objectid || timestamp NOT IN 
  (SELECT 
     address || devicename || objectid || min(timestamp) 
   FROM tablename 
   GROUP BY address, devicename, objectid) 
```

这使用由唯一列组成的连接字符串将选择绑定在一起。一个找到该唯一组合的最小日期，然后从表中删除这些记录。可能不是最有效的，但它应该工作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-10T15:42:56.020

我的建议是使用子查询，检查是否存在具有较旧时间戳的记录：

```
DELETE FROM tablename
WHERE EXISTS(
  SELECT * FROM tablename a
  WHERE tablenmae.address = a.address
    AND tablename.devicename = a.devicename
    AND tablename.objectid = a.objectid
    AND a.timestamp < tablename.timestamp
) 
```

选择最旧记录的查询将如下所示：

```
SELECT address, devicename, objectid, MIN(timestamp)
FROM tablename
GROUP BY address, devicename, objectid 
```

# javascript - Javascript - 在 for 循环中与变量“连接”

> ID：12822458
> 
> 赞同：2
> 
> 时间：2012-10-10T15:00:48.567
> 
> 标签：javascript, variables, loops, for-loop, concatenation

我不太确定我在标题中使用的 therm，但我们开始吧。

所以我有这样的事情：

```
for (var key in myObject) {

var GivenName = theObject.PS_1.GivenName;
var GivenName = theObject.PS_2.GivenName;
var GivenName = theObject.PS_3.GivenName;
var GivenName = theObject.PS_4.GivenName;
// and so on...

} 
```

所以很明显我不想写那样的东西，我需要使用 var Key，但我不知道我应该怎么做，我尝试了一些事情，但我每次都失败了，是的我我很糟糕，我应该感觉很糟糕。

我试过这个：

```
var GivenName = 'theObject.'+key+'.FirstName';
var GivenName = theObject.key.FirstName;
var GivenName = theObject.[key].FirstName;
var GivenName = theObject.['key'].FirstName;
var GivenName = theObject.[+key+].FirstName; 
```

顺便说一句，密钥变量包含 PS_1 然后 PS_2 然后 PS_3 ...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T15:02:20.093

```
var GivenName = theObject[key].FirstName; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T15:02:09.557

```
for (var key in myObject) {
    var value = myObject[key];
} 
```

[http://eloquentjavascript.net](http://eloquentjavascript.net)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T15:06:36.553

如果您还没有机会阅读它，那么 mozilla javascript 文档绝对很棒。 [https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Working_with_Objects](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Working_with_Objects)

即使您熟悉其中的大部分内容，它仍然会提供出色的参考信息。从文档：

> 对象属性名称可以是有效的 JavaScript 字符串，也可以是可以转换为字符串的任何内容，包括空字符串。但是，任何不是有效 JavaScript 标识符的属性名称（例如，具有空格或破折号或以数字开头的属性名称）只能使用方括号表示法访问。当要动态确定属性名称时（当直到运行时才确定属性名称时），此表示法也非常有用。示例如下：

```
var myObj = new Object(),
    str = "myString",
    rand = Math.random(),
    obj = new Object();

myObj.type              = "Dot syntax";
myObj["date created"]   = "String with space";
myObj[str]              = "String value";
myObj[rand]             = "Random Number";
myObj[obj]              = "Object";
myObj[""]               = "Even an empty string";

console.log(myObj); 
```

# node.js - 在不知道其编码的情况下逐行读取流

> ID：12822459
> 
> 赞同：2
> 
> 时间：2012-10-10T15:00:49.800
> 
> 标签：node.js, stream

我有一种情况，我需要逐行处理流中的一些数据。问题是事先不知道数据的编码；它可能是`UTF-8`或任何遗留的单字节编码（例如`Latin1`，`ISO-8859-5`等）。它*不会*是`UTF16`或像`EBCDIC`，所以我可以合理地期望`\n`它是明确的，所以理论上我可以将它分成几行。在某些时候，当我遇到空行时，我需要将流的其余部分提供给其他地方（不将其拆分成行，但仍然没有任何重新编码）；考虑 HTTP 样式的标头，后跟不透明的主体。

这是我得到的：

```
function processStream(stream) {
    var buffer = '';

    function splitLines(data) {
        buffer += data;
        var lf = buffer.indexOf('\n');
        while (lf >= 0) {
            var line = buffer.substr(0, lf - 1);
            buffer = buffer.substr(lf + 1);
            this.emit('line', line);
            lf = buffer.indexOf('\n');
        }
    }

    function processHeader(line) {
        if (line.length) {
            // do something with the line
        } else {
            // end of headers, stop splitting lines and start processing the body
            this
            .removeListener('data', splitLines)
            .removeAllListeners('line')
            .on('data', processBody);
            if (buffer.length) {
                // process leftover buffer as part of the body
                processBody(buffer);
                buffer = '';
            }
        }
    }

    function processBody(data) {
        // do something with the body chunks
    }

    stream.setEncoding('binary');
    stream
    .on('data', splitLines)
    .on('line', processHeader);
} 
```

它可以完成工作，但问题是`binary`编码已被弃用，并且将来可能会消失，让我没有那个选择。`Buffer`如果（很可能，何时）与编码不匹配，所有其他编码要么破坏数据，要么无法完全解码。相反，使用`Uint8Array`JavaScript 将意味着缓慢且不方便的 Javascript 循环数据只是为了找到换行符。

*关于如何在不*使用编码的情况下将流分割成行，同时保持编码不可知的任何建议`binary`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-16T06:10:24.657

免责声明：我不是 Javascript 开发人员。

> 在某些时候，当我遇到空行时，我需要在其他地方提供流的其余部分（不将其拆分成行，但仍然没有任何重新编码）

对。在这种情况下，听起来您*根本*不想将数据视为文本。像对待任何二进制数据一样对待它，并将其拆分为字节 0x0A。（请注意，如果它从 Windows 开始，您*可能*还想删除任何尾随的 0x0D 值。）

我知道它确实是文本，但没有任何编码信息，对数据进行任何形式的解释都是危险的。

所以你应该保持两个状态：

*   字节数组列表
*   当前缓冲区

当您接收数据时，您在逻辑上希望创建一个新数组，其中当前缓冲区位于新数据之前。（为了提高效率，您可能不想实际创建这样一个数组，但我会先这样做，直到您让它工作为止。）查找任何 0x0A 字节，并相应地拆分数组（创建一个新的字节数组为现有数组的“切片”，并将切片添加到列表中）。新的“当前缓冲区”将是您在最终 0x0A 之后留下的任何数据。

如果您连续看到两个 0x0A 值，那么您将进入仅复制数据的第二种模式。

这一切都假设 Javascript / Node 组合允许您将二进制数据*作为*二进制数据进行操作，但如果没有，我会感到震惊。重要的一点是*不要*在任何时候将其解释为文本。

# android - Android ListFragment 和lazyloader 适配器错误

> ID：12822460
> 
> 赞同：0
> 
> 时间：2012-10-10T15:00:51.983
> 
> 标签：android

我有一个由自定义适配器（延迟加载）填充的列表片段，它应该显示一些文本和图像。所以我构建了一个列表片段和一个自定义适配器来实现这一点。下面的代码但它抛出了显示的错误（Log cat )

ListFragment.java

```
@Override
 public void onActivityCreated(Bundle savedInstanceState) {
  super.onActivityCreated(savedInstanceState);

   new loadListView().execute();

 }
 protected DashBoardActivity fragmentActivity;    
 public void onAttach (DashBoardActivity activity){
     fragmentActivity = (DashBoardActivity) activity;
 }
 public class loadListView extends AsyncTask<Integer, String, String> {

        @Override
        protected void onPreExecute() {
            super.onPreExecute();
        }

        @Override
        protected String doInBackground(Integer... args) {
              motellist = new ArrayList<HashMap<String, String>>();
              JSONObject json = JSONfunctions.getJSONfromURL(URL);
              try{

                JSONArray  mot = json.getJSONArray("MOTEL");
                    for(int i=0;i<mot.length();i++){                        
                        HashMap<String, String> map = new HashMap<String, String>();        
                        JSONObject e = mot.getJSONObject(i);
                        map.put(KEY_ID, e.getString(KEY_ID));
                        map.put(KEY_NAME, e.getString(KEY_NAME));
                        map.put(KEY_PRICE, e.getString(KEY_PRICE));
                        map.put(KEY_ROOMS, e.getString(KEY_ROOMS));
                        map.put(KEY_REF, e.getString(KEY_REF));
                        map.put(KEY_PHONE, e.getString(KEY_PHONE));
                        map.put(KEY_IMAGE_URL, e.getString(KEY_IMAGE_URL));
                        motellist.add(map);
                    }       
              }catch(JSONException e)      {
                 Log.e("log_tag", "Error kupitisha data "+e.toString());
              }
                return null;
            }   

        @Override
        protected void onPostExecute(String args) {

              //list = getListView();
              adapter=new LazyAdapter (fragmentActivity, motellist);
              list.setAdapter(adapter);
            /**ArrayAdapter<String> adapter = new ArrayAdapter<String>(getActivity(),
                    android.R.layout.simple_list_item_1, values);
            setListAdapter(adapter);*/

         }
    } 
```

LazyAdapter.java

```
private Activity activity;
private ArrayList<HashMap<String, String>> data;
private static LayoutInflater inflater=null;
public ImageLoader imageLoader; 

 public LazyAdapter(Activity a, ArrayList<HashMap<String, String>> d) {
    activity = a;
    data=d;
    inflater = (LayoutInflater)activity.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    imageLoader=new ImageLoader(activity);
}

public int getCount() {
    return data.size();
}

public Object getItem(int position) {
    return data.get(position);//nilifix hapa ju am using a custom
}

public long getItemId(int position) {
    return position;
}

public View getView(int position, View convertView, ViewGroup parent) {
    View vi=convertView;
    if(convertView==null)
        vi = inflater.inflate(R.layout.list_row, null);

    TextView NAME = (TextView)vi.findViewById(R.id.name); 
    TextView PRICE = (TextView)vi.findViewById(R.id.board); 
    TextView REF= (TextView)vi.findViewById(R.id.ref); 
    TextView ROOMS = (TextView)vi.findViewById(R.id.units); 
    ImageView thumb_image=(ImageView)vi.findViewById(R.id.list_image); 

    HashMap<String, String> hash = new HashMap<String, String>();
    hash = data.get(position);

    // Setting all values in listview
    NAME.setText(hash.get(ListFragment.KEY_NAME));
    PRICE.setText("PRICE: "+hash.get(ListFragment.KEY_PRICE));
    REF.setText("REF:"+hash.get(ListFragment.KEY_REF));
    ROOMS.setText("ROOMS: "+hash.get(ListFragment.KEY_ROOMS));
    imageLoader.DisplayImage(hash.get(ListFragment.KEY_IMAGE_URL), thumb_image);
    return vi;
} 
```

日志猫：

```
0-10 17:42:30.765: E/AndroidRuntime(17557): FATAL EXCEPTION: main
10-10 17:42:30.765: E/AndroidRuntime(17557): java.lang.NullPointerException
10-10 17:42:30.765: E/AndroidRuntime(17557):    at com.symetry.myitprovider.fragment.ListFragment$loadListView.onPostExecute(ListFragment.java:92)
10-10 17:42:30.765: E/AndroidRuntime(17557):    at com.symetry.myitprovider.fragment.ListFragment$loadListView.onPostExecute(ListFragment.java:1)
10-10 17:42:30.765: E/AndroidRuntime(17557):    at android.os.AsyncTask.finish(AsyncTask.java:590)
10-10 17:42:30.765: E/AndroidRuntime(17557):    at android.os.AsyncTask.access$600(AsyncTask.java:149)
10-10 17:42:30.765: E/AndroidRuntime(17557):    at android.os.AsyncTask$InternalHandler.handleMessage(AsyncTask.java:603)
10-10 17:42:30.765: E/AndroidRuntime(17557):    at android.os.Handler.dispatchMessage(Handler.java:99)
10-10 17:42:30.765: E/AndroidRuntime(17557):    at android.os.Looper.loop(Looper.java:132)
10-10 17:42:30.765: E/AndroidRuntime(17557):    at android.app.ActivityThread.main(ActivityThread.java:4123)
10-10 17:42:30.765: E/AndroidRuntime(17557):    at java.lang.reflect.Method.invokeNative(Native Method)
10-10 17:42:30.765: E/AndroidRuntime(17557):    at java.lang.reflect.Method.invoke(Method.java:491)
10-10 17:42:30.765: E/AndroidRuntime(17557):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:844)
10-10 17:42:30.765: E/AndroidRuntime(17557):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:602)
10-10 17:42:30.765: E/AndroidRuntime(17557):    at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T15:12:28.013

使用`getActivity()`代替`fragmentActivity`（`Activity`可能在`null`中`onAttach`）。还要确保`list`在某个时候初始化。

# asp.net - 如何让 asp:Label 在分配文本之前占用空间

> ID：12822463
> 
> 赞同：0
> 
> 时间：2012-10-10T15:00:58.923
> 
> 标签：asp.net, css

我有 2 个按钮需要在表单的右侧，并且在右侧有一个标签。我遇到的问题是，一旦执行了操作，标签将显示“成功 ....”或“错误无法...”，它搞砸了我的布局。当表单第一次出现时，它搞砸了我的按钮布局，因为标签是空的，然后当执行操作时，我的标签会填充文本，然后将我的按钮推到正确的位置。有没有办法让我的按钮保持原位？

这是我的布局：

```
 <asp:UpdatePanel ID="UpdatePanel2" runat="server" UpdateMode="Conditional">
            <ContentTemplate>
                <div id="dropDownList" style="position: relative;" runat="server">
                    <label>
                        Select New File:
                    </label>
                    <asp:DropDownList runat="server" ID="ddlCaseFiles" DataSourceID="dsMyCaseFiles" DataTextField="Display"
                        DataValueField="FileID" OnPreRender="ddl_PreRender" Width="524px" OnSelectedIndexChanged="ddlCaseFiles_SelectedIndexChanged" />
                    <asp:RequiredFieldValidator ID="RequiredFieldValidator1" runat="server" ControlToValidate="ddlCaseFiles"
                        ToolTip="Casefile Required" InitialValue="-1" Text="*" Display="Dynamic" />
                    <ajaxToolkit:ListSearchExtender ID="ddlExtCaseFiles" runat="server" PromptCssClass="ListSearchExtenderPrompt"
                        TargetControlID="ddlCaseFiles" BehaviorID="ddlExtCaseFiles" Enabled="True" />
                    <br />
/////////////////////////area of interest
                    <asp:Button ID="btnCancel" runat="server" Text="Cancel" Style="position: relative;
                        float: left; margin-left: 450px;" OnClientClick="parent.$.fancybox.close();" />
                    <asp:Button ID="btnMoveCaseFile" runat="server" Text="" Style="position: relative;
                        float: right; margin-right: 63px; margin-left: -45px; top: 0px; left: 0px; width: 98px;"
                        OnClick="btnMoveCaseFile_Click" />
                    <asp:Label runat="server" ID="lblStatus"></asp:Label>
                    <br />
///////////////////////////////////////////////
                </div>
            </ContentTemplate> 
```

我试图让按钮在下拉列表下亮起，并将标签显示在与按钮相同的行但在左侧。（此代码在新行上有标签，因为我放弃了）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T15:04:04.463

您可以在表格单元格中设置控件，并固定单元格的宽度。

注意：您可以使用`css class`.

```
<table>
<tr>
<td>
    <asp:Button ID="btnCancel" runat="server" Text="Cancel" Style="position: relative;                             float: left; margin-left: 450px;" OnClientClick="parent.$.fancybox.close();" />
</td>

<td>
    <asp:Button ID="btnMoveCaseFile" runat="server" Text="" Style="position: relative;                             float: right; margin-right: 63px; margin-left: -45px; top: 0px; left: 0px; width: 98px;"
                        OnClick="btnMoveCaseFile_Click" />
</td>

<td>
    <asp:Label runat="server" ID="lblStatus"></asp:Label>                    
</td>
</tr>

</table> 
```

# html - 响应式网页设计断点？为什么要为 1280、1024、640 设计？

> ID：12822464
> 
> 赞同：4
> 
> 时间：2012-10-10T15:01:01.437
> 
> 标签：html, responsive-design, media-queries

*我在 Photoshop 中收到了三种不同分辨率的网站布局：1280、1024 和 640 像素宽。由于我在 RWD 方面的经验有些有限，我想更好地了解网页设计师应该如何考虑尺寸断点、流动性等（在撰写本文时）。*

我源于这个项目的具体问题是：

1.  鉴于该项目是一个典型的公司网站，为什么设计师会采用这 3 个解决方案？
2.  一般来说，这些解决方案是最佳解决方案还是我们应该要求其他解决方案？
    *（不是 1024、768、320 更有意义吗？或者我应该寻找“自然断点而不是规范？）*
3.  我应该如何考虑在 iPhone 3 (@320px) 和 4 (@640px) 上实现 640 布局？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-10T16:04:27.303

1.  这些似乎是更常见的**横向**分辨率，1280 是台式机的宽版本，1024 是普通台式机/横向平板电脑，而 640 是移动设备的横向分辨率。但就个人而言，我还没有看到响应式框架的这些确切解决方案。

2.  我会给你 2 个很酷的响应式框架作为参考。[Skeleton](http://www.getskeleton.com/)运行在 3 个基本级别：960px+（桌面）、768px（平板电脑）和 <480px（移动）。我认为这些是非常好的解决方案，特别是如果您不熟悉响应式并且仍然习惯于使用像素。或者，您可以使用[Goldilocks 方法](http://goldilocksapproach.com/)，该方法使用相同的原则（台式机、平板电脑、移动设备），但使用 em 而不是像素，并且在设计时考虑到了移动优先（例如，您从小版本开始设计，并为桌面添加“额外的东西”）。对于关于响应式的酷文章和内容，我也鼓励查看[This is Responsive blog](http://responsive.rga.com/)。

3.  iPhone 的设计很特别。不要将它们视为不同的分辨率。在它最薄的状态下（纵向，但即使在横向上也是相同的状态），您在 320x480（旧型号）下工作。上述框架在其移动状态中针对此。使用 Retina 的模型基本上以相同的“分辨率”工作，但每个像素加倍以获得您习惯看到的高清。您在这里设计的主要关注点是视网膜就绪图像。至于那个，[这篇 SmashingMag 文章](http://coding.smashingmagazine.com/2012/08/20/towards-retina-web/)应该把事情弄清楚！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T15:48:39.373

他们可能针对的是广泛的桌面、桌面和横向手机格式。见：[http ://astronautweb.co/2012/01/responsive-web-design-four-states/](http://astronautweb.co/2012/01/responsive-web-design-four-states/)

（我当然希望 1024 宽的设计实际上不是 1024 像素宽。）

# asp-classic - 挂在 IE6 中的 ASP 页面

> ID：12822476
> 
> 赞同：0
> 
> 时间：2012-10-10T15:01:40.517
> 
> 标签：asp-classic, internet-explorer-6

不，这不是上个世纪的帖子。
我们被 IE6 和一些使用 FRAMESET 的旧 ASP 代码困住了

*问题：*
一个 ASP 页面在表单中设置了一组值，然后将其提交到另一个 ASP 页面
第二个页面是一个带有地图和其他相关内容的 FRAMESET，它所做的第一件事是读取所有值以设置布局。

大多数时候一切都很好，但有时一切都会出错。
第一个页面调用第二个页面，但**Request.Form.Count**为**0** 并且全部失败
一旦发生这种情况，它永远不会再次工作，直到我关闭 IE6 并重新启动它。
然后当我提交**Request.Form.Count** = 29 它应该是。

关于 IE 中可能发生的事情的任何想法？

出于某种原因，从另一个页面上的链接调用初始 ASP 页面会导致它更频繁地出错，而只是将 URL 粘贴到地址栏中。
我已经尝试了所有可能的链接和重定向方法，它们都经常导致问题。

此外，它在我尝试过的所有其他浏览器中都能正常工作，但 IE6 是我们必须针对的浏览器。

肯

* * *

忘了说尝试使用 Fiddler 进行调试没有帮助，因为它永远不会出错

# c# - 将 C# Linq 转换为 VB

> ID：12822483
> 
> 赞同：0
> 
> 时间：2012-10-10T15:02:06.973
> 
> 标签：c#, vb.net, linq

我可以使用一些帮助将此 C# 代码行转换为 VB。我对 Linq 很陌生，语法有问题......

```
var rows = GridView1.Rows.Cast<GridViewRow>().Where(a => a != row).ToList(); 
```

我尝试了许多在线转换工具，但也没有一个是正确的。

更新：这是完整的代码块....

```
protected void MoveGridViewRows(object sender, EventArgs e)  {      
    Button btnUp = (Button)sender;      
    GridViewRow row = (GridViewRow)btnUp.NamingContainer;      
    // Get all items except the one selected      
    var rows = GridView1.Rows.Cast<GridViewRow>().Where(a => a != row).ToList();      
    switch (btnUp.CommandName)      
    {          
         case "Up":              
         //If First Item, insert at end (rotating positions)              
              if (row.RowIndex.Equals(0))
                  rows.Add(row);              
              else                 
                  rows.Insert(row.RowIndex - 1, row);              
                  break;          
         case "Down":              
         //If Last Item, insert at beginning (rotating positions)              
              if (row.RowIndex.Equals(GridView1.Rows.Count - 1))                  
                  rows.Insert(0, row);              
              else                 
                  rows.Insert(row.RowIndex + 1, row);              
                  break;      
         }      
         GridView1.DataSource = rows.Select(a => new     
         {          
              FirstName = ((TextBox)a.FindControl("txtFirstName")).Text,          
              LastName = ((TextBox)a.FindControl("txtLastName")).Text,      
         }).ToList();      
         GridView1.DataBind();  
} 
```

VS 编译时的具体错误是....

错误 11 重载解析失败，因为无法使用这些参数调用可访问的“Where”：扩展方法“Public Function Where(predicate As System.Func(Of System.Web.UI.WebControls.GridViewRow, Integer, Boolean)) As System。 'System.Linq.Enumerable' 中定义的 Collections.Generic.IEnumerable(Of System.Web.UI.WebControls.GridViewRow)'：嵌套函数与委托 'System.Func(Of System.Web.UI. WebControls.GridViewRow，整数，布尔值）'。扩展方法 'Public Function Where(predicate As System.Func(Of System.Web.UI.WebControls.GridViewRow, Boolean)) As System.Collections.Generic.IEnumerable(Of System.Web.UI.WebControls.GridViewRow)' 定义在“System.Linq.Enumerable”：未为“System.Web.UI”类型定义运算符“<>”。

还...

错误 12 未声明名称“a”。C:\Users\Documents\Visual Studio 2008\WebSites\vv_home\roeMgr.aspx.vb 51 46 C:\

这是迄今为止的VB代码......

```
 Protected Sub MoveGridViewRows(ByVal sender As Object, ByVal e As EventArgs)

    Dim btnUp As Button = DirectCast(sender, Button)
    Dim row As GridViewRow = DirectCast(btnUp.NamingContainer, GridViewRow)
    ' Get all items except the one selected      
    Dim rows = GridView1.Rows.Cast(Of GridViewRow)().Where(Function(a) a IsNot row).ToList()

    Select Case btnUp.CommandName
        Case "Up"
            'If First Item, insert at end (rotating positions)              
            If row.RowIndex.Equals(0) Then
                rows.Add(row)
            Else
                rows.Insert(row.RowIndex - 1, row)
            End If
            Exit Select
        Case "Down"
            'If Last Item, insert at beginning (rotating positions)              
            If row.RowIndex.Equals(GridView1.Rows.Count - 1) Then
                rows.Insert(0, row)
            Else
                rows.Insert(row.RowIndex + 1, row)
            End If
            Exit Select
    End Select
    GridView1.DataSource = rows.[Select](a >= New With { _
     .FirstName = DirectCast(a.FindControl("txtFirstName"), TextBox).Text, _
     .LastName = DirectCast(a.FindControl("txtLastName"), TextBox).Text _
    }).ToList()
    GridView1.DataBind()

End Sub 
```

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T15:03:55.377

```
Dim rows = GridView1.Rows.Cast(Of GridViewRow)().Where(Function(a) a IsNot row).ToList() 
```

对于另一个，应该是

```
GridView1.DataSource = rows.Select(Function(a) New With {_         
              .FirstName = CType(a.FindControl("txtFirstName"), TextBox).Text,_
              .LastName = CType(a.FindControl("txtLastName"), TextBox).Text_      
         }).ToList() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T15:04:31.700

在我的脑海中，我会说：

```
dim rows = GridView1.Rows.Cast(of GridViewRow)().Where(Function(a) a <> row).ToList() 
```

但我无法对此进行测试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T15:07:29.083

```
Dim rows = GridView1.Rows.Cast(Of GridViewRow)().Where(Function(a) a <> row).ToList() 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-10T15:08:54.540

根据[这个转换器](http://www.developerfusion.com/tools/convert/csharp-to-vb/)，它是

```
 Dim rows = GridView1.Rows.Cast(Of GridViewRow)().Where(Function(a) a <> row).ToList() 
```

这对我来说是正确的。

* * *

由于您发布了完整的代码块，以下是转换整个内容的结果：

```
Protected Sub MoveGridViewRows(sender As Object, e As EventArgs)
    Dim btnUp As Button = DirectCast(sender, Button)
    Dim row As GridViewRow = DirectCast(btnUp.NamingContainer, GridViewRow)
    ' Get all items except the one selected      
    Dim rows = GridView1.Rows.Cast(Of GridViewRow)().Where(Function(a) a <> row).ToList()
    Select Case btnUp.CommandName
        Case "Up"
            'If First Item, insert at end (rotating positions)              
            If row.RowIndex.Equals(0) Then
                rows.Add(row)
            Else
                rows.Insert(row.RowIndex - 1, row)
            End If
            Exit Select
        Case "Down"
            'If Last Item, insert at beginning (rotating positions)
            If row.RowIndex.Equals(GridView1.Rows.Count - 1) Then
                rows.Insert(0, row)
            Else
                rows.Insert(row.RowIndex + 1, row)
            End If
            Exit Select
    End Select
    GridView1.DataSource = rows.[Select](Function(a) New With { _
        Key .FirstName = DirectCast(a.FindControl("txtFirstName"), TextBox).Text, _
        Key .LastName = DirectCast(a.FindControl("txtLastName"), TextBox).Text _
    }).ToList()
    GridView1.DataBind()
End Sub 
```

# css - 指南针：编译样式表将“黑色”更改为“#000”

> ID：12822485
> 
> 赞同：3
> 
> 时间：2012-10-10T15:02:10.150
> 
> 标签：css, compass-sass, sass

我正在使用指南针来生成我的 CSS 样式表。

在我的样式表中，我有几个用于生成类的 mixin。许多这些类中都有“黑色”这个词。

一切正常。但是，当我编译我的 scss 样式表以进行生产时，“黑色”在最终样式表中被替换为 #000，这会破坏我的类。

我怎样才能防止这种情况？

我用来编译样式表的代码是：

```
compass compile -e production --force 
```

这是[罗盘文档](http://compass-style.org/help/tutorials/production-css/)中列出的命令。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T17:58:53.957

问题是颜色关键字被解释为颜色值，而不是字符串。您可以通过用引号将它们强制转换为字符串。例如：

```
$classname: "black";
$color: black;

.#{$classname} {
  color: #{$color};
} 
```

这样，颜色属性值将被压缩，但类名不会。

# wordpress - Nginx try_files 不会触发 index.php 的响应

> ID：12822490
> 
> 赞同：2
> 
> 时间：2012-10-10T15:02:24.503
> 
> 标签：wordpress, nginx, robots.txt, php, sitemap.xml

我遇到了一个问题，try_files 似乎没有将对不存在的文件的请求传递给最后一个指定的值，在我的例子中是 index.php。我正在使用 Wordpress 和我使用的 XML 站点地图生成器插件创建虚拟 XML 文件和由 Wordpress 处理的虚拟 robots.txt。不幸的是 try_files 似乎没有将这些文件的请求传递给 Wordpress。

这是我的服务器配置：

```
server {
        ## Web domain
        server_name christiaanconover.com;
        ## Site root
        root /var/www/christiaanconover.com;
        ## Index
        index index.php index.htm;

        ## Common Wordpress configuration
        include wp.conf;

        ## Include PHP configuration
        include php.conf;

        ## Gzip Compression
        include gzip.conf;

        ## Include W3TC configuration
        include /var/www/w3tc/christiaanconover.com;
} 
```

我在此服务器上运行多个单独的 Wordpress 站点，因此为了节省时间，我创建了一个文件 wp.conf，其中包含 Wordpress 的所有常用配置元素。这是 wp.conf 的内容：

```
location / {
        ## Prevent PHP files from being served as static assets, and fall back to index.php if file does not exist
        try_files $uri $uri/ /index.php?$args;

        ## If a file exists, serve it directly
        if (-f $request_filename) {
                break;
        }

        ## Wordpress Rewrite
        if (!-e $request_filename) {
                rewrite ^ /index.php last;
        }
} 
```

其他一切都运行良好，但 try_files 安排似乎并没有正确移交。有任何想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-10T20:08:52.127

您遇到了[http://wiki.nginx.org/IfIsEvil#Examples中描述的问题之一](http://wiki.nginx.org/IfIsEvil#Examples)

您在`ifs`中指定的`wp.conf`不需要您已经将它们覆盖在您的`try_files`中，因此您可以删除它们，从而产生：

```
location / {try_files $uri $uri/ /index.php$is_args$args;} 
```

这将：

1.  检查是否存在与 $uri 匹配的文件（相对于 root 指令指定的位置）
2.  如果不检查目录匹配是否存在
3.  否则重定向到`/index.php$is_args$args`

Where[`$is_args`](http://wiki.nginx.org/HttpCoreModule#.24is_args)评估到`?`when[`$args`](http://wiki.nginx.org/HttpCoreModule#.24args)被设置。

# java - Java Kerberos 预认证错误

> ID：12822496
> 
> 赞同：0
> 
> 时间：2012-10-10T15:02:41.187
> 
> 标签：java, kerberos, pre-authentication

我们的网络中有两个不同的应用程序，它们都使用 Kerberos 对用户进行身份验证。其中一个在最大时会出现问题。票证有效期已过。

应用程序 x 的成功请求：

```
AS-REQ =>
    <= KRB5KDC_ERR_PREAUTH_REQUIRED
AS-REQ => 
    <= AS-REP 
```

应用程序 y 的请求不成功：

```
AS-REQ =>
    <= KRB5KDC_ERR_PREAUTH_REQUIRED
AS-REQ =>
    <= KRB5KDC_ERR_PREAUTH_FAILED 
```

我们可以在网络捕获中看到的唯一区别是 app x 使用 NT-PRINCIPAL，而 app y 使用 NT-ENTERPRISE。App y 在 Java 1.6 上运行，因此不应出现早期版本的 preauth 错误。

任何想法都受到高度赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T14:03:45.737

我*认为*这个问题的解决方案是使用“/crypto All”选项重新生成我们的密钥表，但我不是 100% 确定。至少在那之后我们没有更多的抱怨。

# android - 如何在 Android 上在后台播放流式音频？

> ID：12822498
> 
> 赞同：15
> 
> 时间：2012-10-10T15:02:43.153
> 
> 标签：android, media-player

`MediaPlayer`我有一个 Android 应用程序，它使用该类播放来自 Internet 的流式音频。

> 当用户点击主页按钮运行其他应用程序时，如何让它继续在后台播放音频？

在运行其他应用程序时，我希望它继续播放音频。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-10T15:06:26.610

你必须使用一种叫做 Android 服务的东西。

从文档：

“服务是一个应用程序组件，代表应用程序希望在不与用户交互的情况下执行更长时间运行的操作，或者为其他应用程序提供功能使用。”

这是使用服务帮助您入门的优秀官方指南：http: [//developer.android.com/guide/components/services.html](http://developer.android.com/guide/components/services.html)

这是一个关于构建音频播放器的好教程： [http ://www.androidhive.info/2012/03/android-building-audio-player-tutorial/](http://www.androidhive.info/2012/03/android-building-audio-player-tutorial/)

这是构建流媒体音乐播放器的视频教程： [http ://www.youtube.com/watch?v=LKL-efbiIAM](http://www.youtube.com/watch?v=LKL-efbiIAM)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-10T15:08:51.670

您需要实现一个 Service 以便在后台播放媒体，而不会将其绑定到开始播放的 Activity。看看[这个例子](http://developer.android.com/guide/topics/media/mediaplayer.html#mpandservices)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-04-07T20:19:25.503

关键是定义[Service.START_STICKY](https://developer.android.com/reference/android/app/Service.html#START_STICKY)以继续在后台播放：

```
 public int onStartCommand(Intent intent, int flags, int startId) {
        myMediaPlayer.start();
        return Service.START_STICKY;
    } 
```

> [Service.START_STICKY](https://developer.android.com/reference/android/app/Service.html#START_STICKY)：如果该服务的进程在启动时被杀死，系统将尝试重新创建该服务。

这是执行此操作的示例：

```
import android.app.Service;
import android.content.Intent;
import android.media.MediaPlayer;
import android.os.IBinder;
import android.util.Log;
import android.widget.Toast;

/**
 * Created by jorgesys.
 */

/* Add declaration of this service into the AndroidManifest.xml inside application tag*/

public class BackgroundSoundService extends Service {

    private static final String TAG = "BackgroundSoundService";
    MediaPlayer player;

    public IBinder onBind(Intent arg0) {
        Log.i(TAG, "onBind()" );
        return null;
    }

    @Override
    public void onCreate() {
        super.onCreate();
        player = MediaPlayer.create(this, R.raw.jorgesys_song);
        player.setLooping(true); // Set looping
        player.setVolume(100,100);
        Toast.makeText(this, "Service started...", Toast.LENGTH_SHORT).show();
        Log.i(TAG, "onCreate() , service started...");

    }
    public int onStartCommand(Intent intent, int flags, int startId) {
        player.start();
        return Service.START_STICKY;
    }

    public IBinder onUnBind(Intent arg0) {
        Log.i(TAG, "onUnBind()");
        return null;
    }

    public void onStop() {
        Log.i(TAG, "onStop()");
    }
    public void onPause() {
        Log.i(TAG, "onPause()");
    }
    @Override
    public void onDestroy() {
        player.stop();
        player.release();
        Toast.makeText(this, "Service stopped...", Toast.LENGTH_SHORT).show();
        Log.i(TAG, "onCreate() , service stopped...");
    }

    @Override
    public void onLowMemory() {
        Log.i(TAG, "onLowMemory()");
    }
} 
```

**启动服务：**

```
Intent myService = new Intent(MainActivity.this, BackgroundSoundService.class);
startService(myService); 
```

**停止服务：**

```
Intent myService = new Intent(MainActivity.this, BackgroundSoundService.class);
stopService(myService); 
```

**[此示例的完整代码。](https://github.com/Jorgesys/Android-Music-in-Background)**

# javascript - 使用 jquery 显示格式化的原始 html

> ID：12822506
> 
> 赞同：1
> 
> 时间：2012-10-10T15:02:59.750
> 
> 标签：javascript, jquery, html

我有一个地方试图在文本区域中显示代码。我已经简化了这个例子，但基本上用户可以输入一些字段，单击一个按钮，代码片段会显示在下面的文本区域中，供他们根据需要进行编辑然后复制。

我终于让它工作以显示实际的代码片段。但是现在我似乎找不到一种方法来格式化它，使它缩进并且看起来不错。

```
var mySnippet =
"<div id=\"myOuterDiv\">"
    + "<div id=\"myInnerDiv\">"
    + "</div>"
    + "</div>";
$('#mySnippetArea').text(mySnippet); 
```

像这样显示在我的文本区域中。

```
<div id="myOuterDiv"><div id="myInnerDiv"></div></div> 
```

我希望将其视为：

```
 <div id="myOuterDiv">
        <div id="myInnerDiv">
        </div>
    </div> 
```

我真的很想避免使用任何 3rd 方插件，因为它的工作很难获得批准。这只是我需要格式化的 4 个小片段。

**更新** 这似乎可以按我的需要工作。

```
var mySnippet =
        "<div id=\"myOuterDiv\">\r"
            + "    <div id=\"myInnerDiv\">\r"
            + "    </div>\r"
            + "</div>\r"; 
```

输出：

```
<div id="myOuterDiv">
    <div id="myInnerDiv">
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T15:05:54.960

`\n`如果您想要一个新行，请添加

```
var mySnippet = "<div id=\"myOuterDiv\">\n"
    + "<div id=\"myInnerDiv\">\n"
    + "</div>\n"
    + "</div>\n";
$('#mySnippetArea').text(eventSnippet); 
```

**单字符转义序列：**

```
\b: backspace (U+0008 BACKSPACE)
\f: form feed (U+000C FORM FEED)
\n: line feed (U+000A LINE FEED)
\r: carriage return (U+000D CARRIAGE RETURN)
\t: horizontal tab (U+0009 CHARACTER TABULATION)
\v: vertical tab (U+000B LINE TABULATION)
\0: null character (U+0000 NULL) 
```

**示例：http:** [//jsfiddle.net/jtx7e/](http://jsfiddle.net/jtx7e/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T15:06:39.033

只需`<pre id="mySnippetArea"></pre>`根据需要的布局使用和添加 \n 和空间

编辑：

你也可以写

```
var mySnippet =
"<div id=\"myOuterDiv\">\n\
   <div id=\"myInnerDiv\">\n\
   </div>\n\
</div>"; 
```

# c - 无法确定为什么 sizeof 显示不同的值

> ID：12822509
> 
> 赞同：1
> 
> 时间：2012-10-10T15:03:09.027
> 
> 标签：c, concatenation, sizeof

我正在制作一个连接用户给出的两个字符串的程序。一切都很好，但我不知道为什么程序显示最终结果的***sizeof***是 8 位长。不管字符串有多长，它总是显示 8。我猜，它是**char**的大小，但我想知道它为什么会这样。这是代码：

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

char* concatenate(char *fir, char *sec)
{
int firLen = strlen(fir);
int secLen = strlen(sec);
int len = firLen + secLen + 1;
int i = 0,c=0;
int *wsk = &i;

char *result = (char *)malloc(len*sizeof(char));

while (fir[i]!='\0')
{
    result[i]=fir[i];
    (*wsk)++;
}

while (sec[c]!='\0')
{
    result[i]=sec[c];
    (*wsk)++;
    c++;
}

result[len-1] = '\0';
return result;
}

int main(int argc, char **argv)
{
char *first, *second, *output;
int size1, size2;

printf("How long will your first string be: ");
scanf("%d", &size1);

first = (char *) malloc ((1+size1)*sizeof(char));
if (!first)
{
    puts("\nError. Can't allocate memory!");
    abort();
}

printf("How long will your second string be: ");
scanf("%d", &size2);

second = (char *) malloc ((size2+1)*sizeof(char));
if (!second)
{
    puts("\nError. Can't allocate memory!");
    abort();
}

printf("\nPlease, type in the first string: ");
scanf("%s",first);

printf("\nPlease, type in the second string: ");
scanf("%s",second);

output = (char *)malloc((size1+size2+1)*sizeof(char));
output = concatenate(first, second);

printf("\nConcatenation of the strings: %s", output);
printf("\n%d", sizeof(output));

free(first);
free(second);
free(output);

getchar();
return 0;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-10T15:04:56.900

不要使用`sizeof`来确定*字符串长度*，请使用该`strlen`函数，就像您在程序的其他部分中所做的那样。

```
printf("\nConcatenation of the strings: %s", output);
printf("\n%d", strlen(output)); 
```

用于`sizeof`确定*数据类型*的大小，如`char`、a `struct`、数组等。

你已经提到你想用它`sizeof`来*检查内存分配是否一切正常*，但是你不能`sizeof`在分配的内存缓冲区上使用这种方式`malloc`：你只能依赖`malloc`- 你不是检查 - 了解您的分配是否成功。

您*可以*使用`sizeof`来确定数组的大小：

```
char myStr[13];
printf("%d\n", sizeof(myStr)); 
```

但这仅适用于数组，不适用于使用`malloc`.

此行还会造成内存泄漏，因为您覆盖了下一行中的指针：

```
output = (char *)malloc((size1+size2+1)*sizeof(char)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T15:05:13.493

`sizeof`*以字节*为单位给出大小，其中一个字节是 a 的大小`char`。

```
printf("\n%d", sizeof(output)); 
```

`output`是 a `char*`，所以在你的系统上`char*`s 有 8 个字节大。您必须使用`strlen`来获取以 0 结尾的字符串的长度。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T15:05:18.747

`printf("\n%d", sizeof(output));`打印指向 的指针大小`char`。您的平台似乎有 8 个字节大小的指针。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-10T15:20:35.560

第一的：

```
second = (char *) malloc ((size2+1)*sizeof(char)); 
```

不要对`malloc()`.

第二： `sizeof(char)`将是 1，一个 char 是 1 个字节，并`sizeof()`返回保存该数据类型所需的字节数。所以你不需要`*sizeof(char)`，你需要更大的类型，比如`int`.

最后：

```
printf("\nConcatenation of the strings: %s", output);    printf("\n%d", sizeof(output)); 
```

`output`是一个`char *`所以这会给你`sizeof(char *)`在你的系统上。

你在之前的评论中说： `I know the differences between strlen and sizeof, but using sizeof(output) I wanted to check if everything is fine with memory allocation`

听起来您想要的是验证您是否为两个连接的字符串分配了正确的内存量。`sizeof()`不会给你这些信息。此时处于低级细节中，您需要做一些依赖于操作系统的操作来尝试查找该信息。（例如，在 linux 内核中，如果你有`kmalloc()`记忆，你可以用`ksize()`它来准确找出你得到了多少字节）

# sql - 在 Oracle SQL Developer 中同时在多个数据库连接上运行 SQL 脚本

> ID：12822513
> 
> 赞同：2
> 
> 时间：2012-10-10T15:03:12.987
> 
> 标签：sql, oracle, oracle-sqldeveloper

我在 Oracle SQL Developer 中有 4 个不同的数据库连接。它们都具有完全相同的包和程序集。每次我更改脚本中的某些内容时，我都必须在所有连接上一个接一个地运行它。有没有办法同时在所有连接上运行它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T15:15:58.690

恐怕您只能使用 GUI 在不同的连接上执行 SQL 开发人员查询。

但是，您应该能够使用 SQLPlus 来实现您想要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T16:43:22.447

您可以使用“创建数据库链接”功能：

```
 CREATE DATABASE LINK linkDB_1
            CONNECT TO xxxx IDENTIFIED BY xxxx
            USING 'xxxxx';

            SELECT *
            FROM   tablename@linkDB_1;

            DROP DATABASE LINK linkdb_1; 
```

我在我的 SQL Navigator 上进行了测试，它可以工作。

# javascript - 设置 numberTicks 时 jqPlot 点不正确

> ID：12822514
> 
> 赞同：2
> 
> 时间：2012-10-10T15:03:14.260
> 
> 标签：javascript, jquery, jqplot

我正在尝试限制我正在设置的动态 jqplot 上的刻度数。不幸的是，当我这样做时，这些点看起来并不准确。这是它的样子：

![在此处输入图像描述](../Images/2f209d6c0735bb917eaff25c67b13e4d.png)

如您所见，例如，2012 年 5 月 10 日的点不在正确的轴上。我意识到现在这些点是估计的，但这些点在图表上必须看起来准确——尤其是当将鼠标悬停在这些点上时，它们会为您提供正确的日期和 y 轴值。

如果这有帮助，这是我的代码：

```
var datepickerBegin = $("#datepicker_start").datepicker({dateFormat: "dd/mm/yyyy"}).val();
                                var datepickerEnd = $("#datepicker_to").datepicker({dateFormat: "dd/mm/yyyy"}).val();

                                var startDiff = $("#datepicker_start").datepicker("getDate");
                                var endDiff = $("#datepicker_to").datepicker("getDate");
                                alert(startDiff)
                                alert(endDiff)

                                // Check if dates are more than a week apart
                                    if(endDiff - startDiff >= 15 * 86400 * 1000) {
                                    var plot2 = $.jqplot('chart2', jsonurl,{
                                        title: "Storage Space",
                                        dataRenderer: ajaxDataRenderer,
                                        dataRendererOptions: {unusedOptionalUrl: jsonurl},
                                        axes: {
                                            xaxis: {
                                                'numberTicks' : 15,
                                                min: datepickerBegin,
                                                max: datepickerEnd,
                                                renderer:$.jqplot.DateAxisRenderer,
                                                rendererOptions:{tickRenderer:$.jqplot.CanvasAxisTickRenderer},
                                                tickInterval: '1 day',
                                                tickOptions:{formatString:'%#m/%#d/%Y'

                                                }

                                            },
                                            yaxis: {
                                                label: "MB",
                                                tickOptions:{formatString:'%d '},
                                                min: 0
                                            }

                                        },
                                        highlighter: {
                                            show: true,
                                            sizeAdjust: 7.5
                                        }
                                    });
                                    // Somehow fix the line?
                                    plot2.redraw({});

                                } 
```

有没有人可以解决这个问题？谢谢！

# android - android在公共线程中请求http数据并将字符串返回给ui线程

> ID：12822515
> 
> 赞同：0
> 
> 时间：2012-10-10T15:03:19.080
> 
> 标签：android

我需要编写一个通用类来在后台线程中处理 http 请求..我有 4 个不同的 ui 活动，它们都希望使用同一个类来获取 web 数据并在他们的活动中更新......我的 ui 活动只想调用后台类，它不应该等待数据..后台类只需将数据发布到 ui 线程，然后 ui 线程将处理该数据......我尝试使用异步任务......但是当我在同一个 ui 类中实现时它可以工作。 ..有人可以提供更好的方法来在公共类中实现..而且我对异步任务或带有可运行线程的处理程序的处理感到困惑......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T15:13:48.830

据我了解 AsyncTask 有你需要的一切。只需将其继承者实现为独立类，然后在您的活动中使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T15:18:19.010

编写一个在后台运行并轮询服务器以获取数据的服务（使用一个`AsyncTask`或某种线程来异步执行查询）。当从服务器接收到数据时，将其插入本地数据库（例如，`ContentProvider`由 支持`SQLiteDatabase`）。然后在`Activity`需要新数据时查询本地数据库。这样做的好处是，即使您的设备处于离线状态，您仍然可以显示数据……本地数据库充当保存先前查询数据的缓存。

# symfony - VichUploaderBundle twig 无法获取文件名属性值：“图像”

> ID：12822517
> 
> 赞同：1
> 
> 时间：2012-10-10T15:03:28.980
> 
> 标签：symfony, symfony-2.1

我在使用 VichUploaderBundle 时遇到问题。正确上传文件，但是当我写

```
<td><img src="<img src="{{ vich_uploader_asset(entity, 'image') }}" alt="{{ entity.nombre }}" />"</td> 
```

显示上传的图片，我有这个错误：

```
An exception has been thrown during the rendering of a template ("Unable to get filename property value: "image"") in SuperlineaBundle:Instruccion:index.html.twig at line 21. 
```

我试图在控制器上获得帮助，它可以工作：

```
$helper = $this->container->get('vich_uploader.templating.helper.uploader_helper');
$path = $helper->asset($entities[0], 'image');
ladybug_dump( $path ); 
```

显示：字符串（25）“/images/uploads/video.png”

任何帮助或线索？

这是我的实体： http: [//pastebin.com/d8X72zK4](http://pastebin.com/d8X72zK4) 这是我的配置：

```
vich_uploader:
    db_driver: orm
    twig: true
    gaufrette: false # set to true to enable gaufrette support
    storage: vich_uploader.storage.file_system
    mappings:
        uploads:
            uri_prefix: /images/uploads
            upload_destination: %kernel.root_dir%/../web/images/uploads
            namer: ~ # specify a file namer service id for this entity, null default
            directory_namer: ~ # specify a directory namer service id for this entity, null default
            delete_on_remove: true # determines whether to delete file upon removal of entity
            inject_on_load: true # determines whether to inject a File instance upon load
        pdfs:
            uri_prefix: /images/pdf
            upload_destination: %kernel.root_dir%/../web/images/pdf
            namer: ~ # specify a file namer service id for this entity, null default
            directory_namer: ~ # specify a directory namer service id for this entity, null default
            delete_on_remove: true # determines whether to delete file upon removal of entity
            inject_on_load: true # determines whether to inject a File instance upon load 
```

这是我的树枝模板：...

```
{% for entity in entities %}
        <tr>
            <td><a href="{{ path('instruccion_show', { 'id': entity.id }) }}">{{ entity.id }}</a></td>
            <td>{{ entity.nombre }}</td>
            <td>{{ entity.foto }}<img src="<img src="{{ vich_uploader_asset(entity, 'image') } }" alt="{{ entity.nombre }}" />"</td>
            <td>{{ entity.video }}</td>
            <td>
                <ul>
                    <li>
                        <a href="{{ path('instruccion_show', { 'id': entity.id }) }}">show</a>
                    </li>
                    <li>
                        <a href="{{ path('instruccion_edit', { 'id': entity.id }) }}">edit</a>
                    </li>
                </ul>
            </td>
        </tr>
    {% endfor %} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-24T14:52:54.253

我也有这个问题。我是由我的实体加载方式引起的。我显示的实体是另一个实体的属性。

细节：

[https://github.com/dustin10/VichUploaderBundle/issues/109](https://github.com/dustin10/VichUploaderBundle/issues/109)

[https://github.com/dustin10/VichUploaderBundle/issues/28](https://github.com/dustin10/VichUploaderBundle/issues/28)

我希望这可以帮助别人！

谢谢，加夫

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-07T18:29:52.860

如果目标字段具有空值，则会发生这种情况，您需要在调用 vich_uploader_asset 之前对其进行测试。尝试这个：

```
<td>
{# foto is the uploader target field in your entity #}
{% if entity.foto %}
<img src="{{ vich_uploader_asset(entity, 'image') }}" alt="{{ entity.nombre }}" />
{% else %}
{# display nothing, or use a generic image #}
<img src='no-img.png' alt='{{ entity.nombre }}' />
{% endif %}
</td> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T18:35:55.077

更正这条线

```
<td>{{ entity.foto }}<img src="<img src="{{ vich_uploader_asset(entity, 'image') } }" alt="{{ entity.nombre }}" />"</td> 
```

你有双 img 标签

# code-snippets - pastebin 类服务的私有实例

> ID：12822519
> 
> 赞同：1
> 
> 时间：2012-10-10T15:03:51.373
> 
> 标签：code-snippets, pastebin

我在一个非常严格的防火墙后面工作。任何代码共享都是立即解雇的理由（并积极执行）。

我想为我的全球团队建立一个类似 pastebin 的环境。

我一直无法找到任何能够支持 c#、sql、python、java、html（主要）的解决方案

有谁知道我可以在本地服务器上安装仅在内部使用的任何解决方案？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T20:45:20.227

如果您在 Internet 上搜索“pastie like service”，您可以找到一些开源实现。

例如，[http://alternativeto.net/software/pastie/](http://alternativeto.net/software/pastie/)列出了很多，其中之一位于[http://hastebin.com/](http://hastebin.com/)并进行语法突出显示

*   [github上的haste-server源代码](https://github.com/seejohnrun/haste-server)
*   [github上的haste-client源代码](https://github.com/seejohnrun/haste-client)

（如果您需要帮助来托管此类服务，请告诉我）

# ios - 带有属性的 iOS XML 使用 NSXMLParser

> ID：12822530
> 
> 赞同：0
> 
> 时间：2012-10-10T15:04:11.613
> 
> 标签：ios, xml-parsing, nsxmlparser

我想解析一个 XML 文件并想在 TableView 中显示信息。

起初我的 XML 文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<machines>
<machine id="1" project="100" name="first" status="inactive" />
<machine id="115" project="101" name="second" status="alive" />
<machine id="252" project="456" name="etc" status="alive" />
</machines> 
```

这里是我的起始 Ocj-C 代码：

```
- (void)parser:(NSXMLParser *)parser didStartElement:...{

if([elementName isEqualToString:@"machine"]){
    machine =[[Machines alloc]init];
}
}

- (void)parser:(NSXMLParser *)parser foundCharacters:(NSString *)string
{
[nodecontent appendString:[string stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceAndNewlineCharacterSet]]];
NSLog(@"node content = %@",nodecontent);
}

- (void)parser:(NSXMLParser *)parser didEndElement:...
{
if([elementName isEqualToString:@"machine"]){
    machine.name=nodecontent;
    [tableArray addObject:machine];
    [machine release];
    machine = nil;
}
} 
```

1.  nodecontent 的 NSLog 没有输出。

2.  如何保存元素的属性？（有一个类“机器”，这里是 id、项目、名称和状态）

希望可以有人帮帮我 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T15:11:05.127

在`- (void)parser:didStartElement:namespaceURI:qualifiedName:attributes:`字典中为您提供此信息（请参阅属性参数）。然后由您决定保存它并随心所欲地使用它。

有关更多信息，请参阅：使用 NSXMLParser和[NSXMLParser 类参考](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSXMLParser_Class/Reference/Reference.html)[解析 XML 数据](http://wiki.cs.unh.edu/wiki/index.php/Parsing_XML_data_with_NSXMLParser)

# c# - FlourineFX rtmp ssl

> ID：12822538
> 
> 赞同：0
> 
> 时间：2012-10-10T15:04:36.307
> 
> 标签：c#, rtmps

我正在尝试`rtmps`使用 C# 和 FluorineFX 连接到服务器。

我正在使用此代码执行此操作

```
netConnection = new NetConnection();

netConnection.OnConnect += onConnect;
netConnection.NetStatus += netStatus;

netConnection.ObjectEncoding = ObjectEncoding.AMF3;
Console.WriteLine(netConnection.PlayerVersion = "WIN 10,1,85,3");
netConnection.Connect("rtmps://example.com:2099/"); 
```

example.com 正在替换此示例中的真实 url。

但是这段代码只给了我一个例外，说明：

```
System.UriFormatException: One of the identified items was in an invalid format 
```

FluorineFX 网页声明它支持 rtmps，所以我认为会是这样。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T20:20:45.807

我找到了一个 github 存储库，它将 RTMPS 支持添加到 FlourineFX

[https://github.com/epicvrvs/FluorineFXMods](https://github.com/epicvrvs/FluorineFXMods)

您需要做的就是按照顶部的说明进行编译。

# algorithm - 基于随机值输出的矩阵输入（Matlab）

> ID：12822540
> 
> 赞同：0
> 
> 时间：2012-10-10T15:04:37.423
> 
> 标签：algorithm, matlab, matrix

我希望使用随机值的输出来选择将输入到新矩阵中的列，称为 Matrix1。

我有以下内容：

```
a = [1 2 3 4; 5 3 6 2; 9 8 1 4];
n = length(a(1,:))-1;
RandomValue = round(rand()*n+1);
Matrix1 = [];
L=3;
for i=n:-1:1
    RandomValue
    if RandomValue < L
        Matrix1 = [a(:,i) Matrix1];
        a(:, i) = [];
        Matrix1
    end
end 
```

例如，如果随机值为 2，我想将 [2;3;8] 放入 Matrix1（基于第一行的值）。我怎么能修改代码，所以不是 i 而是那个 Randomvalue 数字？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T15:25:33.010

我不完全关注你，但我不明白为什么有些变体

```
Matrix1 = [a(:,round(rand()*n+1)) Matrix1] 
```

不合适。比四舍五入更好的`rand`是使用`randi`返回伪随机整数的函数，也许

```
Matrix1 = [a(:,randi(n)) Matrix1] 
```

但是，如果正如@angainor 所建议的那样，您正在尝试置换输入矩阵的列，那么请查看该`permute`函数。

# android - Android 网络摄像头流式传输

> ID：12822548
> 
> 赞同：3
> 
> 时间：2012-10-10T15:04:56.050
> 
> 标签：android, video, streaming

我找到了应用程序代码，它（理论上）接收视频流并显示在 VideoView 对象上。

```
package com.example.cameraapp;

import android.net.Uri;
import android.os.Bundle;
import android.view.View;
import android.app.Activity;
import android.view.Menu;
import android.view.MenuItem;
import android.widget.MediaController;
import android.widget.VideoView;
import android.support.v4.app.NavUtils;

public class Camera extends Activity {
public VideoView mVideoView;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_camera);

    String LINK = "192.168.1.102:9889";
    setContentView(R.layout.activity_camera);
    VideoView videoView = (VideoView) findViewById(R.id.videoView1);
    MediaController mc = new MediaController(this);
    mc.setAnchorView(videoView);
    mc.setMediaPlayer(videoView);
    Uri video = Uri.parse(LINK);
    videoView.setMediaController(mc);
    videoView.setVideoURI(video);
    videoView.start();

}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_camera, menu);
    return true;
}

} 
```

但是，当我运行 VLC 播放器 -> 流 -> Http 端口 9889 -> 转码 MPEG-2 NO SOUND 出现语句“不幸的是，无法显示此视频文件”。我尝试了 rtsp，转码 H.264，但没有帮助。有谁知道为什么它不起作用？

# sql - 使用单个查询从两个表中获取数据

> ID：12822550
> 
> 赞同：1
> 
> 时间：2012-10-10T15:04:56.803
> 
> 标签：sql

有两张表说 ABC 和 XYZ 并包含一列，这些数据在这些表中是唯一的。现在我有 id 但不知道这个 id 属于哪个表。是否可以从 ABC 或 XYZ 获取具有该 ID 的单个查询中的记录？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T15:06:36.120

> 是否可以从 ABC 或 XYZ 获取具有该 ID 的单个查询中的记录？

是的，您可以使用`UNION`（隐式不同）或`UNION ALL`（具有重复值）从两个表中获取所有 id：

```
SELECT id FROM ABC
UNION ALL
SELECT id FROM XYZ 
```

# video - gstreamer 记录

> ID：12822552
> 
> 赞同：0
> 
> 时间：2012-10-10T15:04:58.363
> 
> 标签：video, ffmpeg, audio-recording, gstreamer

我使用以下命令从我的网络摄像头录制音频和视频

```
gst-launch-0.10 v4l2src ! video/x-raw-yuv,width=640,height=480,framerate=30/1 ! \
             tee name=t_vid ! queue ! videoflip method=horizontal-flip ! \
             xvimagesink sync=false t_vid. ! queue ! \
             videorate ! video/x-raw-yuv,framerate=30/1 ! queue ! mux. \
             autoaudiosrc ! audiorate ! audio/x-raw-int,rate=48000,channels=1,depth=16 ! queue ! \
             audioconvert ! queue ! mux. avimux name=mux ! \
             filesink location=video.avi 
```

结果在流之间的同步性方面是正确的。但是 avi 文件非常大，因为那是未压缩的数据......你能告诉我如何减少记录的大小吗？请注意，我在录制后将音频和视频拆分为单独的文件进行处理。保持同步性至关重要。

*** 编辑 ***

我尝试使用 ffmpeg 使用以下命令压缩 avi 文件：

```
ffmpeg -i video.avi -vcodec msmpeg4v2 output.avi 
```

但似乎比特率是无效的（因为它的原始数据不适用？）这是输出：

```
Input #0, avi, from 'video.avi':
Duration: 00:00:00.00, start: 0.000000, bitrate: -2147483 kb/s
  Stream #0.0: Video: rawvideo, yuv420p, 640x480, 30 tbr, 30 tbn, 30 tbc
  Stream #0.1: Audio: pcm_s16le, 48000 Hz, 1 channels, s16, 768 kb/s
[buffer @ 0xef57e0] w:640 h:480 pixfmt:yuv420p
Incompatible sample format 's16' for codec 'ac3', auto-selecting format 'flt'
[ac3 @ 0xedece0] channel_layout not specified
[ac3 @ 0xedece0] No channel layout specified. The encoder will guess the layout, but it     might be incorrect.
[ac3 @ 0xedece0] invalid bit rate
Output #0, avi, to 'output.avi':
  Stream #0.0: Video: msmpeg4v2, yuv420p, 640x480, q=2-31, 200 kb/s, 90k tbn, 30 tbc
  Stream #0.1: Audio: ac3, 48000 Hz, mono, flt, 200 kb/s
Stream mapping:
  Stream #0.0 -> #0.0
  Stream #0.1 -> #0.1
Error while opening encoder for output stream #0.1 - maybe incorrect parameters such as bit_rate, rate, width or height 
```

感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T14:57:25.057

这就是你可以做的：（比如 900k 视频和 64k 音频。由于你想要 48kHz 采样，你需要提供至少 64Kbits 比特率）

```
gst-launch-0.10 v4l2src ! video/x-raw-yuv,width=640,height=480,framerate=30/1 ! \
         tee name=t_vid ! queue ! videoflip method=horizontal-flip ! \
         xvimagesink sync=false t_vid. ! queue ! \
         videorate ! video/x-raw-yuv,framerate=30/1 ! queue ! ffmpegcolorspace ! ffenc_mpeg4 bitrate=900000 ! mux. \
         autoaudiosrc ! audiorate ! audio/x-raw-int,rate=48000,channels=1,depth=16 ! queue ! \
         audioconvert ! lamemp3enc bitrate=64 target=1 ! queue !  mux. avimux name=mux ! \
         filesink location=video.avi 
```

如果您希望获得更小的尺寸并且不介意 mp4，我建议将 ffenc_mp4 替换为 x264enc，将 avimux 替换为 mp4mux。如果您将 x264enc 与任何其他多路复用器 [不是 mp4mux] 一起使用，请记住还要为 x264enc 设置属性 byte-stream=1。

获取任何元素类型的属性 gst-inspect 所以 lamemp3enc 信息可以通过执行 gst-inspect lamemp3enc 来获取。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T12:41:08.053

您可以将 lamemp3enc 插入音频分支，将 ffenc_mpeg4（或 ffenc_msmpeg4）插入视频分支。

# spring - 如何从数据库中获取spring配置

> ID：12822554
> 
> 赞同：2
> 
> 时间：2012-10-10T15:04:57.723
> 
> 标签：spring, datasource

我正在使用 Eclipse Juno、JDK 7、tomcat 7.0.29、hibernate 4.1.5 和 Spring 3.1.2。我正在尝试从数据库加载 Spring 配置信息。这是我到目前为止可以做的：

**WEB.XML**

```
<context-param>
    <param-name>contextConfigLocation</param-name>
        <param-value>
            /WEB-INF/context-beans.xml
        </param-value>
</context-param> 
```

**jdbc.properties**

```
jdbc.driver_class=com.microsoft.sqlserver.jdbc.SQLServerDriver
jdbc.url=jdbc:sqlserver://localhost;databaseName=mydbname;
jdbc.username=<my_usr>
jdbc.password=<my_pwd> 
```

**上下文-beans.xml**

```
<beans xmlns="http://www.springframework.org/schema/beans" 
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xmlns:context="http://www.springframework.org/schema/context" 
        xmlns:p="http://www.springframework.org/schema/p"
        xmlns:tx="http://www.springframework.org/schema/tx" 
        xmlns:mvc="http://www.springframework.org/schema/mvc"
        xmlns:oxm="http://www.springframework.org/schema/oxm" 
        xmlns:security="http://www.springframework.org/schema/security"
        xsi:schemaLocation="http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-3.1.xsd
                        http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
                        http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.1.xsd
                        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.1.xsd
                        http://www.springframework.org/schema/oxm http://www.springframework.org/schema/oxm/spring-oxm-3.1.xsd">

    <!-- Configure which package will contain our components -->
    <context:component-scan base-package="com.xxx" />

    <context:annotation-config />

    <mvc:annotation-driven />

    <mvc:resources mapping="/static/**" location="/static/" />

    <tx:annotation-driven />

    <bean id="entityManagerFactory" class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
        <property name="persistenceUnitName" value="appPersistenceUnit" />
    </bean>

    <bean id="transactionManager" class="org.springframework.orm.jpa.JpaTransactionManager">
        <property name="entityManagerFactory" ref="entityManagerFactory" />
    </bean>

    <bean id="dataSource" class="org.apache.tomcat.dbcp.dbcp.BasicDataSource" p:driverClassName="com.microsoft.sqlserver.jdbc.SQLServerDriver"
        p:url="jdbc:sqlserver://localhost;databaseName=appDB" p:username="theUserName" p:password="thePassword" destroy-method="close"/>

    <bean id="jdbcTemplate" class="org.springframework.jdbc.core.JdbcTemplate" lazy-init="false" >
        <property name="dataSource" ref="dataSource" />
        <property name="lazyInit" value="false" />
    </bean>

    <bean id="appProperties" class="com.xxx.web.util.MyAppPropertyPlaceholderConfigurer">
        <property name="nameColumn" value="key" />
        <property name="valueColumn" value="value" />
        <property name="tableName" value="app_params" />
        <property name="whereClause" value="param_type = 'GLOBAL'" />
        <property name="jdbcTemplate" ref="jdbcTemplate" />
    </bean>

    <!-- Files path configuration -->
    <mvc:resources mapping="/iconfiles/**" location="file:/${PATH.ICON_FILES}" />

</beans> 
```

请考虑表 app_params 包含 1 条记录，其中 key="PATH.ICON_FILES"、value="c:/temp/icons/" 和 param_type="GLOBAL"。

**MyAppPropertyPlaceholderConfigurer**

```
package com.xxx.web.util;

import java.io.IOException;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.util.Properties;

import org.springframework.beans.factory.config.PropertyPlaceholderConfigurer;
import org.springframework.jdbc.core.JdbcTemplate;
import org.springframework.jdbc.core.RowCallbackHandler;

public class MyAppPropertyPlaceholderConfigurer extends PropertyPlaceholderConfigurer {
    private JdbcTemplate jdbcTemplate;

    private String nameColumn;

    private String valueColumn;

    private String tableName;

    private String whereClause;

    public MyAppPropertyPlaceholderConfigurer() {
        super();
        setPlaceholderPrefix("${");
    }

    @Override
    protected void loadProperties(final Properties props) throws IOException {
        if (null == props) {
            throw new IOException("No properties passed by Spring framework - cannot proceed.");
        }

        String sql = String.format("SELECT [%s], [%s] FROM [%s] %s", nameColumn, valueColumn, tableName, whereClause);
        logger.info("Reading configuration properties from database. Query=" + sql);

        try {
            jdbcTemplate.query(sql, new RowCallbackHandler() {
                @Override
                public void processRow(ResultSet rs) throws SQLException {
                    String name = rs.getString(nameColumn);
                    String value = rs.getString(valueColumn);

                    if (null == name || null == value) {
                        throw new SQLException("Configuration database contains empty data. Name='" + (name == null ? "" : name)
                                + "', Value='" + (value == null ? "" : value) + "'.");
                    }

                    props.setProperty(name, value);
                }
            });
        } catch (Exception e) {
            logger.fatal("There is an error in either 'application.properties' or the configuration database.");
            throw new IOException(e);
        }

        if (props.size() == 0) {
            logger.fatal("The configuration database could not be reached or does not contain any properties in '" + tableName
                    + "'.");
        } else {
            logger.info("Application config info loaded from configuration database.");
        }
    }

    @Override
    protected String convertPropertyValue(String originalValue) {

        if (originalValue.startsWith("!!")) {
            // TODO ex: return EncryptUtil.decrypt(originalValue); see org.owasp.esapi.reference.crypto.EncryptedPropertiesUtils
            return originalValue;
        }

        return originalValue;
    }

    public void setJdbcTemplate(JdbcTemplate newJdbcTemplate) {
        this.jdbcTemplate = newJdbcTemplate;
    }

    public void setNameColumn(String newNameColumn) {
        this.nameColumn = newNameColumn;
    }

    public void setValueColumn(String newValueColumn) {
        this.valueColumn = newValueColumn;
    }

    public void setTableName(String newTableName) {
        this.tableName = newTableName;
    }

    public void setWhereClause(String newWhereClause) {
        if (newWhereClause == null || newWhereClause.trim().length() == 0) {
            this.whereClause = "";
        } else {
            if (newWhereClause.trim().toUpperCase().startsWith("WHERE ")) {
                this.whereClause = newWhereClause;
            } else {
                this.whereClause = "WHERE " + newWhereClause;
            }
        }
    }

} 
```

这样做可以按预期工作，并且我已正确解析变量 ${PATH.ICON_FILES} 。

但是，我不想让我的 dataSource bean 带有用户名、密码和所有硬编码在 XML 文件中的内容。我想从另一个属性文件加载它，优先加密。

我该怎么做？

我已经尝试通过将以下代码添加到 context-beans.xml 中来添加另一个带有 jdbc 配置的 PropertyPlaceholderConfigurer（此时为纯文本）：

```
<bean id="jdbcConfigurer" name="jdbcConfigurer" class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
    <property name="locations">
        <list>
            <value>classpath:jdbc.properties</value>
        </list>
    </property>
</bean> 
```

然后我将 dataSource bean 更改为从那里读取：

```
<bean id="dataSource" name="dataSource" class="org.apache.tomcat.dbcp.dbcp.BasicDataSource" p:driverClassName="${jdbc.driver_class}"
     p:url="${jdbc.url}" p:username="${jdbc.username}" p:password="${jdbc.password}" destroy-method="close" /> 
```

当我尝试运行时，出现以下错误：

```
[2012-10-10 11:33:48,744] WARN  (SQLErrorCodesFactory.java:227) - Error while extracting database product name - falling back to empty error codes
    org.springframework.jdbc.support.MetaDataAccessException: Could not get Connection for extracting meta data; nested exception is org.springframework.jdbc.CannotGetJdbcConnectionException: Could not get JDBC Connection; nested exception is org.apache.tomcat.dbcp.dbcp.SQLNestedException: Cannot load JDBC driver class '${jdbc.driver_class}' 
```

知道我在这里做错了什么吗？看起来它是在从常规 PropertyPlaceholderConfigurer 获取值之前实例化 MyAppPropertyPlaceholderConfigurer ...

谢谢。

# python - 如何正确读取 csv 并输入到列表中？

> ID：12822568
> 
> 赞同：0
> 
> 时间：2012-10-10T15:05:38.543
> 
> 标签：python, list, csv

我正在尝试将 .csv 文件中的一堆数据读入一个数组，格式为： [ [a,b,c,d], [e,f,g,h], ...]

运行下面的代码，当我打印带有空格（''）的条目时，我访问元素的方式不正确，因为它在第一个空格（''）处停止。例如，如果 Business、Fast Company、Youtube、fastcompany 是第 10 个条目......当我打印下面的内容时，我会在不同的行上显示：Business、Fast Company、YouTube、FastCompany

关于如何获得结果的任何建议：[ [a,b,c,d], [Business, Fast Company, Youtube, fastcompany], [e,f,g,h], ...]？

```
import csv

partners = []
partner_dict = {}
i=9
with open('partners.csv', 'rb') as csvfile:
    spamreader = csv.reader(csvfile, delimiter=' ', quotechar='|')
    for row in spamreader:
        partners.append(row)

    print len(partners)

    for entry in partners[i]:
        print entry 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T15:10:01.777

该`delimiter`参数指定使用哪个字符将文件的每一行拆分为单独的值。由于您正在传递 ' ' （一个空格），因此读者正在分割空格。

如果这确实是一个逗号分隔的文件，请使用 ',' 作为分隔符（或者只保留`delimiter`参数，它将默认为 ','）。

此外，竖线字符是引号字符的不寻常值。您的输入文件包含代替引号的管道真的是真的吗？您提供的示例数据既不包含管道*也不*包含引号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T15:41:50.323

您的代码存在一些问题：

*   迭代列表的“正确”语法是`for entry in partners:`，不是`for entry in partners[i]:`
*   您代码中的`partners_dict`变量似乎未使用，我假设您稍后会使用它，所以我暂时忽略它
*   您正在将文本文件作为二进制文件打开（使用`open(file_name, "r")`而不是`open(file_name, "rb")`
*   您对已处理数据的处理仍然在上下文管理器 ( `with ... [as ...]:`-block)内完成
*   您的输入文本似乎由 分隔`", "`，但您`" "`在解析时分隔

如果我正确理解了您的问题，那么您的问题似乎是由最后一个问题引起的。“明显的解决方案”可能是将`delimeter`参数更改为`", "`，但模块只允许单字符字符串作为分隔符。那么我们该怎么办？好吧，因为`","`它确实是“真正的”分隔符（它永远不应该在实际的未引用数据中，与空格相反），这似乎是一个很好的解决方案。但是，现在您所有的值都以`" "`可能不是您想要的开头。所以你会怎么做？好吧，所有字符串都有一个非常简洁的`strip()`方法，默认情况下会删除字符串开头和结尾的所有空格。所以，要`strip()` all the values, let's use a "list comprehension" (evaluates an expression on all items in a list and then returns a new list with the new values) which should look somewhat like `[i.strip() for i in row]` before appending it to `partners`.

In the end your code should hopefully look somewhat like this:

```
import csv

partners = []

with open('partners.csv', 'r') as csvfile:
    spamreader = csv.reader(csvfile, delimiter=',', quotechar='|')
    for row in spamreader:
        partners.append([i.strip() for i in row])

print len(partners)

for entry in partners:
    print entry 
```

# c - 如何从 C 中检查目标文件是 COFF 还是 ELF 格式？

> ID：12822570
> 
> 赞同：6
> 
> 时间：2012-10-10T15:05:43.017
> 
> 标签：c, linux, elf, coff

我希望能够从我的 C 代码中检查目标文件的格式，以便我可以根据文件是 COFF 还是 ELF 格式使用不同的函数来读取文件。

这可能吗，如果可以，我该怎么做？

顺便说一句，这是在 Linux 中，如果这有什么不同的话。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-10T15:09:51.593

读取前四个字节。如果它们等于`\x7fELF`，则它是一个 ELF 文件。否则，您应该将其解析为 COFF 并查看它是否有意义。（请注意，COFF 魔法要复杂得多；我得到不少于 42 个魔法条目`/usr/share/file/magic`）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-10T15:13:19.360

检查幻数。[ELF 幻数是 0x7f454C46](http://wiki.osdev.org/ELF) (0x7f + "ELF")，COFF[是 0x14c](http://wiki.osdev.org/COFF)。无论如何都要注意这一点，因为 COFF 有不同的幻数。

阅读这些值时要注意字节顺序。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-10T15:08:35.423

试试命令[文件](http://linux.about.com/library/cmd/blcmdl1_file.htm)。它告诉您文件的类型。

# javascript - 上传文件的 canvas toDataURL 在同一域上引发安全错误

> ID：12822576
> 
> 赞同：0
> 
> 时间：2012-10-10T15:05:57.343
> 
> 标签：javascript, html, security, canvas

因此，您通过文件输入选择图像，所选图像文件将被转换为 window.url.createobjecturl 并未经修改地传递给隐藏的“img”元素，然后将图像元素当前数据的预览呈现到画布元素中. 到目前为止，一切都很好。但是当我尝试渲染 canvas.toDataURL 时，我不断收到关于它不安全的严重安全异常。这发生在 chrome 和 firefox 上。

了解这是一个使用 html INPUT 元素而不是通过“file://” url 选择的文件 OBJECT，并且该网页是一个实际网页，并且通过“http://”而不是通过“文件：//”。

图像文件甚至还没有离开浏览器去服务器，所以不应该有任何域问题。它只是一个原始 blob 被断言为图像的源，然后它告诉画布更新其预览，它确实这样做了。之后，当尝试保存画布内容时，浏览器会触发错误。

我已经阅读了有关画布元素被污染的场景的所有规范，并且这种场景不符合任何这些场景。

我在 Mozilla 演示中看到了一个类似的示例，该示例提供代码片段来向人们展示如何做同样的事情，但我还没有看到是否有人遇到过问题。

有任何想法吗？TIA

#

=== 更新 ===

#

好的，我已经弄清楚问题是什么，但我仍然不清楚为什么会出现问题。这是设置：

1) 页面通过例如“example.com/”调用

2) 脚本通过以下方式调用：“r.example.com/script.js”

3）如果脚本从“r.example.com”加载任何图像，用于页面设计，而不是画布，它会污染整个页面。在这种情况下，我通过 javascript 绘制整个页面，因此标题图像污染了页面的其余部分。如果我将标题图像更改为来自“example.com”而不是“r.example.com”，那么抱怨不安全的画布问题就会消失，一切都很好。

我不明白为什么会这样。标题图像是从与 javascript 文件相同的位置加载的，并且，为了论证，我什至将主域和子域的 access-control-allow-origin 设置为“*”，这使得没有区别。

因此，允许从任何地方进行访问控制，标题图像来自与 javascript 文件相同的位置，并且它没有被绘制到画布（这是一个用户文件），那么为什么通过 javascript 绘制标题图像会污染 a与它无关的画布？？？此外，css 和其他媒体是从同一个子域加载的，但这不会影响页面，只要脚本没有加载它们 [o_0]。

我想将我的所有资源保存在一个单独的子域中以实现可扩展性，所以，这个问题令人沮丧，因为我不太明白为什么它仍然会发生......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T20:10:30.223

如果您希望您的图像位于单独的子域上，则必须更改图像的来源以允许所有子域，如下所示：

```
img .origin = '*.mydomain.com' 
```

我正在使用带有 kineticJS 的画布，并且自己进行了测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T14:19:45.927

看来您必须在图像对象本身上设置此属性，因为它最初没有域 [o_0]

```
img.origin = 'mydomain.com' 
```

# eclipse - Eclipse Maven 发布插件

> ID：12822581
> 
> 赞同：2
> 
> 时间：2012-10-10T15:06:03.527
> 
> 标签：eclipse, maven, plugins, release

我正在尝试使用目标版本生成一个版本：准备，但是当我在 Eclipse 上运行它时出现错误：

> 无法在项目 mwframework 上执行目标 org.apache.maven.plugins:maven-release-plugin:2.0-beta-7:prepare (default-cli)：无法运行目标清理验证：执行过程时出错。无法运行程序“mvn”（在目录“/home/gnng/Development/work-7-maven/mwframework”中）：java.io.IOException: error=2, No such file or directory -> [Help 1]

我正在使用 Eclipse Maven Embedded，我做错了什么？提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T18:00:32.430

Maven 发布插件总是派生一个子 Maven 构建。因此，您需要使用外部 Maven 安装（例如在 Eclipse 中配置它）。

# r - 具有不同数据长度_提取变量的 R 时间序列数据操作

> ID：12822582
> 
> 赞同：2
> 
> 时间：2012-10-10T15:06:13.990
> 
> 标签：r, csv, plyr

我需要一些建议来更好地设计我的问题的解决方案。

我从参数研究结果（时间序列数据）的许多 Csv 文件开始。我想分析一些参数对变量的影响。这个想法是从参数研究的每个 id 的结果表中提取一些变量，并为每个变量创建一个 data.frame，以便轻松地进行一些绘图和一些分析。

问题是一些参数改变了参数研究的时间步长，所以有一些csv要长得多。例如，一个变量是温度。是否可以保持时间步长的差异并评估变化一个参数的 Delta T？Plyr 能做到吗？或者我必须重新采样我的部分结果以使这个评估丢失部分信息？我现在做到了这一点：

```
head(data, 5)

                  names           Date.Time Tout.dry.bulb RHout TsupIn  TsupOut  QconvIn[Wm2]
1 G_0-T_0-W_0-P1_0-P2_0 2005-01-01 00:03:00             0    50     23 15.84257 -1.090683e-14
2 G_0-T_0-W_0-P1_0-P2_0 2005-01-01 00:06:00             0    50     23 16.66988  0.000000e+00
3 G_0-T_0-W_0-P1_0-P2_0 2005-01-01 00:09:00             0    50     23 13.83446  1.090683e-14
4 G_0-T_0-W_0-P1_0-P2_0 2005-01-01 00:12:00             0    50     23 14.34774  2.181366e-14
5 G_0-T_0-W_0-P1_0-P2_0 2005-01-01 00:15:00             0    50     23 12.59164  2.181366e-14
  QconvOut[Wm2] Hvout[Wm2K]  Qradout[Wm2] MeanRadTin MeanAirTin MeanOperTin
1        0.0000       17.76 -5.428583e-08         23         23          23
2     -281.3640       17.76 -1.151613e-07         23         23          23
3     -296.0570       17.76 -1.018871e-07         23         23          23
4     -245.7001       17.76 -1.027338e-07         23         23          23
5     -254.8158       17.76 -9.458750e-08         23         23          23

> str(data)
'data.frame':  1858080 obs. of  13 variables:
$ names        : Factor w/ 35 levels "G_0-T_0-W_0-P1_0-P2_0",..: 1 1 1 1 1 1 1 1 1 1 ...
$ Date.Time    : POSIXct, format: "2005-01-01 00:03:00" "2005-01-01 00:06:00" "2005-01-01 00:09:00" ...
$ Tout.dry.bulb: num  0 0 0 0 0 0 0 0 0 0 ...
$ RHout        : num  50 50 50 50 50 50 50 50 50 50 ...
$ TsupIn       : num  23 23 23 23 23 23 23 23 23 23 ...
$ TsupOut      : num  15.8 16.7 13.8 14.3 12.6 ...
$ QconvIn[Wm2] : num  -1.09e-14 0.00 1.09e-14 2.18e-14 2.18e-14 ...
$ QconvOut[Wm2]: num  0 -281 -296 -246 -255 ...
$ Hvout[Wm2K]  : num  17.8 17.8 17.8 17.8 17.8 ...
$ Qradout[Wm2] : num  -5.43e-08 -1.15e-07 -1.02e-07 -1.03e-07 -9.46e-08 ...
$ MeanRadTin   : num  23 23 23 23 23 23 23 23 23 23 ...
$ MeanAirTin   : num  23 23 23 23 23 23 23 23 23 23 ...
$ MeanOperTin  : num  23 23 23 23 23 23 23 23 23 23 ...

names(DF)
[1] "G_0-T_0-W_0-P1_0-P2_0" "G_0-T_0-W_0-P1_0-P2_1" "G_0-T_0-W_0-P1_0-P2_2"
[4] "G_0-T_0-W_0-P1_0-P2_3" "G_0-T_0-W_0-P1_0-P2_4" "G_0-T_0-W_0-P1_0-P2_5"
[7] "G_0-T_0-W_0-P1_0-P2_6" "G_0-T_0-W_0-P1_1-P2_0" "G_0-T_0-W_0-P1_1-P2_1"
[10] "G_0-T_0-W_0-P1_1-P2_2" "G_0-T_0-W_0-P1_1-P2_3" "G_0-T_0-W_0-P1_1-P2_4"
[13] "G_0-T_0-W_0-P1_1-P2_5" "G_0-T_0-W_0-P1_1-P2_6" "G_0-T_0-W_0-P1_2-P2_0"
[16] "G_0-T_0-W_0-P1_2-P2_1" "G_0-T_0-W_0-P1_2-P2_2" "G_0-T_0-W_0-P1_2-P2_3"
[19] "G_0-T_0-W_0-P1_2-P2_4" "G_0-T_0-W_0-P1_2-P2_5" "G_0-T_0-W_0-P1_2-P2_6"
[22] "G_0-T_0-W_0-P1_3-P2_0" "G_0-T_0-W_0-P1_3-P2_1" "G_0-T_0-W_0-P1_3-P2_2"
[25] "G_0-T_0-W_0-P1_3-P2_3" "G_0-T_0-W_0-P1_3-P2_4" "G_0-T_0-W_0-P1_3-P2_5"
[28] "G_0-T_0-W_0-P1_3-P2_6" "G_0-T_0-W_0-P1_4-P2_0" "G_0-T_0-W_0-P1_4-P2_1"
[31] "G_0-T_0-W_0-P1_4-P2_2" "G_0-T_0-W_0-P1_4-P2_3" "G_0-T_0-W_0-P1_4-P2_4"
[34] "G_0-T_0-W_0-P1_4-P2_5" "G_0-T_0-W_0-P1_4-P2_6" 
```

从 P1_4-P2_0 到 P1_4-P2_6 的长度是 37920 的 113760 obstand，因为时间步长从 3 分钟变为 1 分钟。

我想为每个变量分离数据库，其中我有 date.time 和列中每个名称的变量值。我该怎么做？

感谢您的任何建议

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T23:19:05.013

我强烈建议使用适合处理时间序列的数据结构。在这种情况下，[zoo 包](http://cran.r-project.org/web/packages/zoo/index.html)会很好地工作。将每个 CSV 文件加载到 zoo 对象中，使用 Date.Time 列定义数据的索引（时间戳）。例如，您可以使用 zoo() 函数来创建这些对象。

然后使用zoo的合并功能来合并对象。它将找到具有相同时间戳的观察并将它们放入一行。使用merge可以指定all=TRUE得到所有时间戳的并集；或者您可以指定 all=FALSE 来获取时间戳的交集。对于联合 (all=TRUE)，缺失的观察结果将为 NA。

read.zoo 函数可能很难用于读取数据。我建议将您对 read.zoo 的调用替换为以下内容：

```
table <- read.csv(filepath, header=TRUE, stringsAsFactors=FALSE)
dateStrings <- paste("2005/", table$Date.Time, sep="")
dates <- as.POSIXct(dateStrings)
dat <- zoo(table[,-1], dates) 
```

（我假设 Date.Time 是文件中的第一列。这就是我写 table[,-1] 的原因。）

# django - 如何重置南迁移以捕获我的 django 模型的当前状态

> ID：12822584
> 
> 赞同：8
> 
> 时间：2012-10-10T15:06:20.343
> 
> 标签：django, django-south

我有一个应用程序，目前有 35 个南迁移。这些在设置新部署时需要一段时间才能完成（我们经常创建新部署），并且应用程序在不断发展——添加更多迁移。此外，迁移包括一些潜在的复杂数据迁移和一些破坏 SQLite3 的自定义迁移（现在不是一个大问题，因为一切都在 Postgres 上，但能够建立一个快速的测试环境很好），通常只是更多可能出错的事情。

我们所有的部署和开发人员都是最新的，我想清除所有应用程序的迁移并创建一个捕获应用程序当前状态的单个初始迁移 (0001)，然后继续从那里。几年前我用一个不同的应用程序做了这个，效果很好，但是我忘记了这个过程是什么，并且忘记了解释如何做的博客文章。任何人都可以为我分解这个过程吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-10T15:30:07.440

我想通了（还不错）。要设置迁移重置，我执行以下操作：

```
rm <app-dir>/migrations/*
python manage.py schemamigration <app-name> --initial
python manage.py migrate <app-name> 0001 --fake  --delete-ghost-migrations 
```

我将更改提交到存储库，然后对于其他地方的代码的每次部署，运行：

```
python manage.py migrate <app-name> 0001 --fake --delete-ghost-migrations 
```

确保您在上次迁移到其他任何地方之间没有添加任何新内容并且您重置了内容，否则新的 0001 迁移将与架构不匹配！

注意事项：请参阅 guettli 的评论（以及我的回复）

# android - 我在 android listview 上的 java.lang.IllegalStateException 上经常随机崩溃

> ID：12822593
> 
> 赞同：0
> 
> 时间：2012-10-10T15:06:44.847
> 
> 标签：android

```
10-10 20:37:19.576: ERROR/AndroidRuntime(7619): Uncaught handler: thread main exiting due to uncaught exception
10-10 20:37:19.586: ERROR/AndroidRuntime(7619): java.lang.IllegalStateException: The content of the adapter has changed but ListView did not receive a notification. Make sure the content of your adapter is not modified from a background thread, but only from the UI thread. [in ListView(2131296396, class android.widget.ListView) with Adapter(class android.widget.HeaderViewListAdapter)]
10-10 20:37:19.586: ERROR/AndroidRuntime(7619):     at android.widget.ListView.layoutChildren(ListView.java:1432)
10-10 20:37:19.586: ERROR/AndroidRuntime(7619):     at android.widget.AbsListView.onLayout(AbsListView.java:1119)
10-10 20:37:19.586: ERROR/AndroidRuntime(7619):     at android.view.View.layout(View.java:6836)
10-10 20:37:19.586: ERROR/AndroidRuntime(7619):     at android.widget.RelativeLayout.onLayout(RelativeLayout.java:900)
10-10 20:37:19.586: ERROR/AndroidRuntime(7619):     at android.view.View.layout(View.java:6836)
10-10 20:37:19.586: ERROR/AndroidRuntime(7619):     at android.widget.RelativeLayout.onLayout(RelativeLayout.java:900)
10-10 20:37:19.586: ERROR/AndroidRuntime(7619):     at android.view.View.layout(View.java:6836)
10-10 20:37:19.586: ERROR/AndroidRuntime(7619):     at android.widget.RelativeLayout.onLayout(RelativeLayout.java:900)
10-10 20:37:19.586: ERROR/AndroidRuntime(7619):     at android.view.View.layout(View.java:6836)
10-10 20:37:19.586: ERROR/AndroidRuntime(7619):     at android.widget.FrameLayout.onLayout(FrameLayout.java:333)
10-10 20:37:19.586: ERROR/AndroidRuntime(7619):     at android.view.View.layout(View.java:6836)
10-10 20:37:19.586: ERROR/AndroidRuntime(7619):     at android.widget.FrameLayout.onLayout(FrameLayout.java:333)
10-10 20:37:19.586: ERROR/AndroidRuntime(7619):     at android.view.View.layout(View.java:6836)
10-10 20:37:19.586: ERROR/AndroidRuntime(7619):     at android.widget.FrameLayout.onLayout(FrameLayout.java:333)
10-10 20:37:19.586: ERROR/AndroidRuntime(7619):     at android.view.View.layout(View.java:6836)
10-10 20:37:19.586: ERROR/AndroidRuntime(7619):     at android.widget.FrameLayout.onLayout(FrameLayout.java:333)
10-10 20:37:19.586: ERROR/AndroidRuntime(7619):     at android.view.View.layout(View.java:6836)
10-10 20:37:19.586: ERROR/AndroidRuntime(7619):     at android.widget.FrameLayout.onLayout(FrameLayout.java:333)
10-10 20:37:19.586: ERROR/AndroidRuntime(7619):     at android.view.View.layout(View.java:6836)
10-10 20:37:19.586: ERROR/AndroidRuntime(7619):     at android.widget.LinearLayout.setChildFrame(LinearLayout.java:1119)
10-10 20:37:19.586: ERROR/AndroidRuntime(7619):     at android.widget.LinearLayout.layoutVertical(LinearLayout.java:998)
10-10 20:37:19.586: ERROR/AndroidRuntime(7619):     at android.widget.LinearLayout.onLayout(LinearLayout.java:918)
10-10 20:37:19.586: ERROR/AndroidRuntime(7619):     at android.view.View.layout(View.java:6836)
10-10 20:37:19.586: ERROR/AndroidRuntime(7619):     at android.widget.FrameLayout.onLayout(FrameLayout.java:333)
10-10 20:37:19.586: ERROR/AndroidRuntime(7619):     at android.view.View.layout(View.java:6836)
10-10 20:37:19.586: ERROR/AndroidRuntime(7619):     at android.widget.FrameLayout.onLayout(FrameLayout.java:333)
10-10 20:37:19.586: ERROR/AndroidRuntime(7619):     at android.view.View.layout(View.java:6836)
10-10 20:37:19.586: ERROR/AndroidRuntime(7619):     at android.widget.FrameLayout.onLayout(FrameLayout.java:333)
10-10 20:37:19.586: ERROR/AndroidRuntime(7619):     at android.view.View.layout(View.java:6836)
10-10 20:37:19.586: ERROR/AndroidRuntime(7619):     at android.view.ViewRoot.performTraversals(ViewRoot.java:1003)
10-10 20:37:19.586: ERROR/AndroidRuntime(7619):     at android.view.ViewRoot.handleMessage(ViewRoot.java:1640)
10-10 20:37:19.586: ERROR/AndroidRuntime(7619):     at android.os.Handler.dispatchMessage(Handler.java:99)
10-10 20:37:19.586: ERROR/AndroidRuntime(7619):     at android.os.Looper.loop(Looper.java:205)
10-10 20:37:19.586: ERROR/AndroidRuntime(7619):     at android.app.ActivityThread.main(ActivityThread.java:4409)
10-10 20:37:19.586: ERROR/AndroidRuntime(7619):     at java.lang.reflect.Method.invokeNative(Native Method)
10-10 20:37:19.586: ERROR/AndroidRuntime(7619):     at java.lang.reflect.Method.invoke(Method.java:521)
10-10 20:37:19.586: ERROR/AndroidRuntime(7619):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
10-10 20:37:19.586: ERROR/AndroidRuntime(7619):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T15:20:20.133

您收到此异常是因为您正在从后台线程更改适配器的内容。请更改您的实现，以便您仅从 UI 线程更新您的适配器。

异常本身提到了这一点：

> java.lang.IllegalStateException：适配器的内容已更改，但 ListView 没有收到通知。确保适配器的内容不是从后台线程修改的，而只是从 UI 线程修改的。

这是一个关于正确使用 ListViews 和适配器的好教程： [http ://www.vogella.com/articles/AndroidListView/article.html](http://www.vogella.com/articles/AndroidListView/article.html)

# perl - 实用的 Perl 解决方案，用于通过列表排列以获得唯一组合

> ID：12822595
> 
> 赞同：1
> 
> 时间：2012-10-10T15:06:53.333
> 
> 标签：perl, permutation, combinations

抱歉，如果这看起来像另一个问题 - 有很多解决方案，但我没有找到我想要的东西，但我很可能错过了它。如果标题不是最好的描述，也很抱歉 - 不知道如何措辞。

我有五个“特征”作为字符串，例如：

```
$height $width $depth $length $colour 
```

我想获得从 5 开始到 1的所有不同***的独特组合，例如：***

```
5: $height $width $depth $length $colour
4: $height $width $depth $length 
4: $height $width $depth $colour
4: $height $width $length $colour
4: $height $depth $length $colour
4: $width $depth $length $colour
...
and so on 
...
1: $height 
1: $width 
1: $depth 
1: $length 
1: $colour 
```

我不知道它是否有所作为，但在我计划使用的代码中`&&`and `!$string`，例如：

```
4: $height && $width && $depth && $length && !$colour 
4: $height && $width && $depth && !$length && $colour
4: $height && $width && !$depth && $length && $colour
4: $height && !$width && $depth && $length && $colour
4: !$height && $width && $depth && $length && $colour
and so on. 
```

当我有 4 个功能时，我可以手动执行此操作，但有 5 个功能太多了！我认为将变量放在哈希中可能是一个很好的起点，但至于实际算法......任何帮助表示赞赏！

编辑：刚刚意识到它可能不清楚，但我希望能够“查询”每个组合，因为它们将在 if/elsif 语句中，所以`if (h && w && !d ...)`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-10T15:13:42.853

将配置编码为 5 位整数，然后从 0 迭代到 2 ⁵ -1。

```
for ($i = 0; $i < 1<<5; $i++) {

    my @output;
    push @output,  $i & 1  ? '$height' : '!$height';
    push @output,  $i & 2  ? '$width' : '!$width';
    push @output,  $i & 4  ? '$depth' : '!$depth';
    push @output,  $i & 8  ? '$length' : '!$length';
    push @output,  $i & 16 ? '$colour' : '!$colour';

    print join(' && ', @output), "\n";
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-10T15:14:34.613

看看[Algorithm::Permute](http://search.cpan.org/perldoc?Algorithm%3a%3aPermute)

```
use Algorithm::Permute; 
my @array = ($height, $width, $depth, $length, $colour); 
Algorithm::Permute::permute { print "@array" } @array; 
```

perlfaq 中也对此进行了描述：[如何置换列表的 N 个元素？](http://search.cpan.org/perldoc?perlfaq4#How_do_I_permute_N_elements_of_a_list?)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-11T02:00:11.390

您想要独特的组合吗？试试[Math::Combinatorics](http://search.cpan.org/dist/Math-Combinatorics/)。

```
use strict;
use warnings;
use feature qw(say);
use Math::Combinatorics qw(combine);

our @primary_qualities = qw(height width depth length colour);

for my $n (1 .. @primary_qualities) {
  say "@$_" for combine($n, @primary_qualities);
} 
```

你必须自己处理退化的情况（没有高度，没有宽度，没有深度，没有长度，没有颜色）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-10T15:15:20.710

尝试[`Algorithm::Permute`](http://search.cpan.org/~edpratomo/Algorithm-Permute-0.12/Permute.pm)

```
use Algorithm::Permute;

  my $props = [$height, $width, $depth, $length, $colour];

  foreach my $n ( 1.. scalar( @$props) ){
      my $p = new Algorithm::Permute($props, $n);
     #you can create r of n objects permutation generator, where r <= n
      while (@res = $p->next) {
        print join(", ", @res), "\n";
      }
  } 
```

# javascript - 带有进度条的滑块上的 Jquery setInterval

> ID：12822597
> 
> 赞同：0
> 
> 时间：2012-10-10T15:06:54.120
> 
> 标签：javascript, jquery, css, progress-bar, setinterval

到目前为止，我已经实现了类似的东西，请查看 jsFiddler 演示：http: [//jsfiddle.net/semantic/6SaJK/1/](http://jsfiddle.net/semantic/6SaJK/1/)

我想在计时器（即）jquery setInterval 上设置它。并且还希望“**进度条**”通过定时器从 0width 移动到 100% 宽度。

这是我想要的示例：http: [//buildinternet.com/project/supersized/slideshow/3.2/slide.html](http://buildinternet.com/project/supersized/slideshow/3.2/slide.html)。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T15:09:50.077

首先想到的是使用[JQuery animate](http://api.jquery.com/animate/)为 a设置动画`div`，使用您在超时时使用的相同时间间隔从 0 宽度调整为完整大小

* * *

或者，您可以跳过该`setInterval`部分并仅使用`animate`函数的回调参数。[像这样的东西](http://jsfiddle.net/a8DxF/)

# c# - 在列表框 c# 中显示数组元素

> ID：12822598
> 
> 赞同：0
> 
> 时间：2012-10-10T15:06:56.937
> 
> 标签：c#, listbox

您好我正在尝试在列表框中查看数组的元素，我的数组在一个类中，但我不知道如何在 Windows 表单列表框中查看数组的元素。这是我的代码：

```
 NumSepaERG[0] = Convert.ToDouble(columnas[1]);
 ListBox listbox2 = new ListBox();
 listbox2.Items.Add(NumSepaERG[0]); 
```

但我知道如何查看列表框中的元素。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T15:12:15.597

您可以尝试使用此代码

```
var listbox2 = new ListBox();
foreach(var item in columnas)
{
 listbox2.Items.Add(item);
}
this.Controls.Add(listbox2 ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T15:13:50.213

[ListBox.Items通过](http://msdn.microsoft.com/en-us/library/system.windows.forms.listbox.items.aspx)[ListBox.ObjectCollection](http://msdn.microsoft.com/en-us/library/system.windows.forms.listbox.objectcollection.aspx)实现 IEnumerable，因此您可以使用 foreach 循环遍历元素。

```
foreach (var element in listBox2.Items)
{
    MessageBox.Show(element.ToString());
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T15:17:12.370

```
ListBox listBox1 = new ListBox();
// add items 
listBox1.Items.Add(NumSepaERG[0]);
// add to controls 
Controls.Add(listBox1); 
```

如果您有数组作为项目，那么您可以使用 AddRange 方法：

```
listBox1.Items.AddRange(NumSepaERG);
Controls.Add(listBox1); 
```

# 更新

创建包含数组的类的对象...

例如：

```
public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();
        ListBox listBox1 = new ListBox();
        MyClass obj = new MyClass();
        listBox1.DataSource = obj.NumSepaERG;
        Controls.Add(listBox1);
    }
}
public class MyClass
{
    public double[] NumSepaERG { get; set; }
    public MyClass()
    {
        NumSepaERG =new double[] {2.0, 5.6};
    }
} 
```

# html - 横幅包装器中的 Div 及其内容，使用窗口和移动设备调整大小

> ID：12822600
> 
> 赞同：1
> 
> 时间：2012-10-10T15:07:06.177
> 
> 标签：html, mobile, resize, wrapper

我正在使用 wordpress 模板（请继续阅读）并试图让我的新标注 div 以及其中的文本在标题“横幅包装器”中调整大小，*以及*浏览器窗口（希望也是移动友好的）。如果您有时间提供帮助，我很乐意与您分享我未发布的链接。

我一直在使用这段代码：

```
.calloutb {
    position:;
    width: 248px;
    margin-left: 752px;
    padding-top: 0px;
    padding-bottom: 0px;
    height:auto;
    border-top: 10px solid rgba(182, 182, 182, 0.04);
    border-bottom: 10px solid rgba(182, 182, 182, 0.04);
    background-color: rgba(0, 0, 0, 0.29);
    margin-top: -404px;
} 
```

理想情况下，最终产品将通过显示器或移动设备上的浏览器窗口实时调整大小。

# ruby-on-rails - 从链接预填充表单域

> ID：12822604
> 
> 赞同：4
> 
> 时间：2012-10-10T15:07:15.843
> 
> 标签：ruby-on-rails, ruby, forms

单击链接时，我正在尝试在表单中预填充字符串字段。我试过了：

```
$<%= link_to "New product", new_product_path(:product_name => "foo") %> 
```

和

```
$<%= link_to "New product", new_product_path(:name => "foo") %> 
```

两者都没有工作。有人有什么想法吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-10T15:10:06.800

试试这个， `<%= f.text_field :name,:value=>(@product.new_record? ? params[:name] : @product.name )%>` 或者在新的行动中

```
def new
@product = Product.new(:name=>params[:name])
end
<%= f.text_field :name %> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-10T15:09:57.270

您要填充的字段是当前页面还是目标页面？

如果它在当前页面上，您将需要一些 javascript 来完成此操作，如果它在目标页面上，您可能应该根据传递的参数在您的操作中设置默认值。

# asp.net-mvc - 如何将一个模型中的关系键与许多其他模型相关联？DTO？查看型号？或列表？ASP.net

> ID：12822607
> 
> 赞同：0
> 
> 时间：2012-10-10T15:07:23.103
> 
> 标签：asp.net-mvc, linq, entity-relationship

目前，用户可以将单一成分添加到配方中，但该关系键随后绑定到该配方，将其更改为新配方，删除旧链接。

我正在寻找一种方法，以便存在每种成分的单一版本，但任何配方都可以包含它

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T15:09:56.750

您应该有单独`Recipe`的`Ingredient`、 和`RecipeIngredient`表。

```
Ingredient
----------
IngredientID <-- PK
Name
...

Recipe
------
RecipeID <-- PK
Name
...

RecipeIngredient 
----------------
RecipeID     <-- PK
IngredientID <-- PK 
```

这是基本的[数据库规范化](http://en.wikipedia.org/wiki/Database_normalization)。

# c - 分叉等待 - 如何等待所有孙子完成

> ID：12822611
> 
> 赞同：6
> 
> 时间：2012-10-10T15:07:29.620
> 
> 标签：c

我正在执行一项任务以构建一个简单的 shell，并且我正在尝试添加一些尚不需要的功能，但我遇到了管道问题。

一旦我的命令被解析，我就会派生一个进程来执行它们。这个过程是一个子程序，将执行命令，如果只剩下一个，否则就分叉。父级将执行第一个命令，子级将处理其余的。管道已设置并正常工作。

然后我的主进程调用`wait()`，然后输出提示。当我执行类似的命令时`ls -la | cat`，会在 cat 的输出之前打印提示。

我尝试`wait()`为每个应该执行的命令调用一次，但是第一次调用有效并且所有后续调用都返回`ECHILD`。

如何强制我的主线程等到所有孩子，包括孩子的孩子，退出？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-10T15:13:24.553

你不能。要么让你的子进程等待它的子进程并且在它们都被等待之前不要退出，或者从同一个进程中派生所有子进程。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-10T15:13:20.137

请参阅此答案如何`wait()`处理子进程：[如何等待 fork() 调用的所有子进程完成？](https://stackoverflow.com/questions/279729/how-to-wait-untill-all-child-processes-called-by-fork-complete?rq=1)

没有办法等孙子；您需要在每个进程中实现等待逻辑。这样，每个孩子只会在其所有孩子退出后退出（然后将包括所有孙辈）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-03-21T04:06:09.517

既然你在谈论孙子，你显然是以级联的方式产生孩子。这是实现管道的一种可能方式。

但请记住，管道的返回值（`echo $?`在终端中执行时得到的值）是从最右边的命令返回的值。

这意味着您需要在此级联实现中从右到左生成子级。您不想丢失该返回值。

现在假设为了简单起见我们只讨论内置命令（没有额外调用 fork() 和 execve()），一个有趣的事实是，在某些 shell 中，如“zsh”，最右边的命令不是甚至分叉。我们可以通过一个简单的管道命令看到这一点，例如：

```
export stack=OVERFLOW | export overflow=STACK 
```

然后使用命令`env`，我们可以欣赏环境变量中溢出=堆栈的持久性。它表明最右边的命令没有在子shell中执行，而在子shell中执行了`export stack=OVERFLOW`。

注意：在像“sh”这样的 shell 中，情况并非如此。

现在让我们使用一个基本的管道命令来为这个级联实现提供一个可能的逻辑。

```
cat /dev/random | head 
```

注意：即使`cat /dev/random`据说是一个永无止境的命令，它也会在命令`head`完成读取`cat /dev/random`. 这是因为标准输入在`head`完成后关闭，并且命令`cat /dev/random`中止，因为它在损坏的管道中写入。

逻辑：

1.  父进程（你的 shell）看到有一个管道要执行。然后它将分叉两个进程。父母留在你的外壳，它会等待孩子返回，并存储返回的值。

2.  在第一代子的上下文中：（试图执行管道最右边的命令）它看到该命令不是最后一个命令，它会再次 fork() （我称之为“级联实现”）。现在 fork 已经完成，父进程将首先执行它的所有任务 ( `head -1`)，然后它会关闭它的标准输入和标准输出，然后等待它的子进程。这对于首先关闭标准输入和标准输出，然后调用 wait() 非常重要。如果在标准输入上读取，则关闭标准输出会将 EOF 发送到父级。关闭标准输入确保试图在管道中写入的孙子中止，并出现“管道损坏”错误。

3.  在孙子的上下文中：它看到它是管道的最后一个命令，它只会执行命令并返回它的值（它关闭标准输入和标准输出）。

# asp.net - 使用 SQLServer sessionState 模式在 MOSS 2007 托管的 asp.net 中会话永不过期

> ID：12822617
> 
> 赞同：1
> 
> 时间：2012-10-10T15:07:40.377
> 
> 标签：asp.net, .net, firefox, sharepoint-2007, session-cookies

我有一个使用 asp.net 身份验证和 SQL Server sessionState 模式运行的应用程序。出于某种原因，会话似乎永远不会过期我们的环境之一。

这是 web.config 文件的摘录：

```
<sessionState mode="SQLServer" timeout="1" allowCustomSqlDatabase="true" partitionResolverType="Microsoft.Office.Server.Administration.SqlSessionStateResolver, Microsoft.Office.Server, Version=12.0.0.0, Culture=neutral, PublicKeyToken=71e9bce111e9429c" sessionIDManagerType="Lanap.BotDetect.Persistence.CustomSessionIDManager, Lanap.BotDetect, Version=2.0.15.0, Culture=neutral, PublicKeyToken=74616036388b765f" /> 
```

如您所见，应用程序托管在负载平衡的 MOSS2007 实例中，因此它具有 sessionState DB 的自定义 SQL 参数。

根据我对 SO 的探索，最常见的问题似乎是禁用的 SQL Server 代理或缺少/未运行的 SQL Server 代理作业。我很肯定这里不是这种情况。我去了托管会话的 ASPStateTempSessions 表，并检查了它的行为是否一致。当我登录我的网站时，会创建一个带有会话 ID 的行，并在 1 到 2 分钟后被销毁（会话已过期）。但是，如果我随后返回我的网站并刷新它，而不是被注销，我仍然处于登录状态。如果我再次转到 ASPStateTempSessions 表，则会创建一个具有相同会话 ID 的新行。

据我所知，会话 ID 可以存活数周......重新启动浏览器所在的计算机不会改变任何内容。清除 cookie 即可。显然，浏览器中的 cookie 正在触发服务器上会话的重新创建。

另外，我很肯定我没有在无 cookie 模式下运行。首先，我可以在我的浏览器中看到 cookie，而且它转到的 URL 不包含 sessionId（我被引导理解这是一个区分标准，用于了解是否正在运行无 cookie 会话）。

我有几个环境。一个工作（我们的 Live 服务器），一个不工作（我们的演示服务器）。在比较两个 web.config 文件时，最有可能意味着的区别是：

直播服务器：

```
<authentication mode="Forms">
  <forms loginUrl="/_layouts/ClientPortal/login.aspx" />
</authentication> 
```

演示服务器：

```
<authentication mode="Forms">
  <forms loginUrl="/_layouts/ClientPortal/login.aspx" name=".ASPXAUTH" domain=".shlsolutions.net" protection="All" path="/" timeout="2880" />
</authentication> 
```

造成这种差异的原因是应用程序需要能够在演示环境中使用跨域身份验证。

我很确定必须在 web.config 文件中更改某些内容，但我真的不知道是什么。你能帮我解决这个问题吗？

编辑：cookie复制/粘贴

```
.ASPXAUTH=BDEBD7975B717219A24D8D2FB22ADF523F4E63C9619B758A9F500CC2C9967156A9CFDB057A2DFC4DF9157A1D6E0F6EA3FBBA90C3D566FEB9E7F63AA4DBBDF68A32A5518175F6073E81677069C8205D9433306DCE331921237189DEECE59B6C7494EA6369C6D1BEAE544E83295D942DCE856718C5B095D695DB42D68BF75991A5EE37246E37B96F1675547E87338B89FE669EFD2A5AB38A15F7926025791F8FC17A02882B; path=/; domain=.shlsolutions.net
ASP.NET_SessionId=pa5v0f2mnc20jybxq4bmbr20; path=/; domain=uat.central.shlsolutions.net; HttpOnly
.ASPXAUTH=D3DCB91EA8705E7350AB2BEDBDC79F37C87CB391AFF81A9F07CAE72DB7BDBFA2AA62B1EF538C7EF77C7874D84A09DCDADF186884190B9BEDA56E73E9A1EED1948A6C75E618D4FD7AA9344C234B6472E3BEEC088911112877E7A77A6E2B27CA8EF69BE20B38591EDB9706225FA9831890B1C4684B3D9075153CB22CC37140F8C05811C44853DC3E7278740B7BBDC55627E801D81ED8EE8ABC07AA8CFF1F3F59EED9606ABB; path=/; domain=uat.central.shlsolutions.net; HttpOnly
__utma=164265915.107905765.1350568100.1350661280.1350898679.7; expires=Wed, 22 Oct 2014 09:37:58 GMT; path=/; domain=.uat.central.shlsolutions.net
__utmb=164265915.1.10.1350898679; expires=Mon, 22 Oct 2012 10:07:58 GMT; path=/; domain=.uat.central.shlsolutions.net
__utmc=164265915; path=/; domain=.uat.central.shlsolutions.net
__utmz=164265915.1350568100.1.1.utmcsr=(direct)|utmccn=(direct)|utmcmd=(none); expires=Mon, 22 Apr 2013 21:37:58 GMT; path=/; domain=.uat.central.shlsolutions.net 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T16:26:46.900

ASP.Net 会话状态使用滑动过期机制，默认情况下，会话状态对象应在 60 分钟未收到创建会话的客户端的消息后过期。

存在一个已知问题，即 SharePoint 永远不会从 ASPStateTempSessions 表中清除这些会话状态记录：http: [//blogs.msdn.com/b/toddca/archive/2009/03/17/sharepoint-session-state-the-客人刚刚赢得离开.aspx](http://blogs.msdn.com/b/toddca/archive/2009/03/17/sharepoint-session-state-the-guest-that-just-won-t-leave.aspx)

希望这可以帮助？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T09:09:00.567

查看您的 web.config 看起来您有一个自定义会话 ID 管理器。文档：[http](http://captcha.biz/doc/aspnet/api/captcha-web-reference.html#BotDetect.Web.CustomSessionIdManager) ://captcha.biz/doc/aspnet/api/captcha-web-reference.html#BotDetect.Web.CustomSessionIdManager 您遇到的行为可能是由此自定义会话 ID 管理器的作用引起的。此 DLL 用于验证码，是否可以将其从 web.config 中取出并查看情况是否有所改善？

# c++ - DLL 中的实例化类在 QT 的 LoadLibrary 中引发 127 错误

> ID：12822624
> 
> 赞同：0
> 
> 时间：2012-10-10T15:07:52.747
> 
> 标签：c++, qt, dll, eclipse-cdt

我正在尝试使用 LoadLibrary（仅用于测试而不是 QLibrary）在 qt 中加载 DLL，该 dll 是在 eclipse CDT 中编译的，但奇怪的是，当我尝试在 Dll 内的任何函数中实例化任何类时，LoadLibrary 失败并出现错误 127 （使用 GetLastError），但如果我没有实例化任何 LoadLibrary 成功，为什么会发生这种情况？我的代码是下一个，标题和您的实现：

**标题：**

```
#ifndef DESKTOPWINUTILS_H_
#define DESKTOPWINUTILS_H_
#ifdef __dll__
#define DESKTOPUTILSEXP __declspec(dllexport)
#else
#define DESKTOPUTILSEXP __declspec(dllimport)
#endif  // __dll__
#include <iostream>
#include <stdio.h>
#include <string.h>
#include "ximage.h"
#include "IDesktopUtils.h"
class DesktopUtils:public IDesktopUtils{
public:
    DesktopUtils();
    ~DesktopUtils(void);
    char* sayHello();
};
extern "C" DESKTOPUTILSEXP bool create(IDesktopUtils**);
#endif /* DESKTOPWINUTILS_H_ */ 
```

**执行：**

```
#define __dll__
#include "DesktopUtils.h"

DesktopUtils::DesktopUtils(){
    sayHello();
}

char* DesktopUtils::sayHello(){
    return (char *)("I say Hello");
}

bool create(IDesktopUtils** desktoputils){
    //DesktopUtils *desktoputils = new DesktopUtils();
    if(!desktoputils)
        return false;
    *desktoputils =(IDesktopUtils*) new DesktopUtils; //if comment this the load is successful
    return true;
} 
```

在 qt 项目中，我使用它来加载 DLL，仅用于知道是否已加载，我什至没有使用 GetProcAddress：

```
typedef char*(*createInst)(void);
    HINSTANCE dll;
    dll = LoadLibrary(TEXT("libDesktopWinUtils.dll"));
    if(dll){
        message.setText("library loaded");
        message.exec();

    }else{
        char error[10];
        itoa(GetLastError(),error,10);
        message.setText(error);
        message.exec();
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T17:47:07.100

您注释掉的代码似乎创建了系统无法解决的依赖项。例如，使用的代码`new`要求 new 的系统实现要么已经加载到进程中，要么可以定位和加载提供它的 DLL。如果不能，则 LoadLibrary 调用将失败。

找出缺失依赖项的方法：

*   在记录所有加载和卸载的模块的调试器中运行程序。
*   使用依赖遍历程序。（现在 SxS 使过程复杂化了，这些情况很少见。）
*   在程序运行时运行类似 Process Monitor 的东西。这将准确显示正在搜索的 DLL 和位置。

# php - jeditable 正在更新 mysql 但在我的 php 中返回标头

> ID：12822625
> 
> 赞同：1
> 
> 时间：2012-10-10T15:07:55.743
> 
> 标签：php, mysql, jeditable

我使用以下脚本

```
$(document).ready(function() {
   $('.edit').editable('updateCat.php', {
       indicator : "Saving...",  
       submit   : 'OK'                  
 });  }); 
```

我的代码中的可编辑点是

```
while($row = mysql_fetch_array($result))
{ echo "<tr>";
echo "<td >" . $row['id_cat'] . "</td>";
echo "<td class='edit' id=".$row['id_cat'].">" . $row['title'] . "</td>";
... 
```

我的 updateCat.php 如下

```
<?php
 require_once 'base.php';
 $id = $_POST['id'];
 $newvalue =mysql_real_escape_string($_POST['value']);
 $result=mysql_query("UPDATE category_product SET title='$newvalue' WHERE id_cat='$id'") or die(mysql_error());
echo $newvalue;
 ?> 
```

当我运行我的 php 代码时，mysql 会更新，但如果我不刷新页面并尝试再次编辑，我会在我的编辑字段中得到这个：

```
 <meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>Untitled Document</title>    asd 
```

我应该只得到在上述情况下将是 asd 的编辑内容。如果我尝试在不刷新的情况下再次编辑内容，则会出现问题。此外，如果我这样做，mysql 会使用 Untitled Document 更新内容，这非常令人沮丧。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-02-26T08:16:32.067

当我遇到同样的问题时，我来到了这个老问题。mysql连接的php文件中有头文件，删除了头文件，问题就解决了。

# mysql - InnoDB 从站不更新

> ID：12822627
> 
> 赞同：2
> 
> 时间：2012-10-10T15:08:05.397
> 
> 标签：mysql, replication, innodb

我有一个主 MySQL 服务器，正在尝试为 InnoDB 数据库设置复制。
我执行主从配置，创建主站数据库的转储，在从站上恢复它并运行复制。一切看起来都很好，但没有更新反映在 Slave 上。Slave 正在运行，Master 和 Slave 上的 Read_Master_Log_Pos 相同。我什至查找了 mysql-relay-bin.00000X 文件，并且有来自 Master 的更新。但是当我运行“SELECT * FROM db.table;”时没有任何变化。
如果我将 BD 引擎更改为 MyISAM，一切正常。
我还尝试创建一个空数据库（InnoDB 引擎），将其转储并在 Slave 上从中恢复，开始复制，然后在 Master 上创建表并填充它们。在这种情况下，复制做得很好。但我还需要一种方法来复制已经创建和填充的数据库。
我应该怎么办？

我有：
my.cnf 在 Master 上：

```
[mysqld]
bind-address=0.0.0.0
port=3306
replicate-do-db=gcm_data
log-bin=/var/lib/mysql/mysql-bin
server-id=8217
datadir=/var/lib/mysql
socket=/var/lib/mysql/mysql.sock
user=mysql 
```

从站上的 my.cnf：

```
[mysqld]
bind-address=0.0.0.0
port=3306
replicate-do-db=gcm_data
relay-log-index=/var/lib/mysql/mysql-relay-bin.index
relay-log=/var/lib/mysql/mysql-relay-bin
server-id=50890
datadir=/var/lib/mysql
socket=/var/lib/mysql/mysql.sock
user=mysql 
```

显示主状态\G

```
File: mysql-bin.000001
Position: 657
Binlog_Do_DB:
Binlog_Ignore_DB: 
```

显示从属状态\G

```
Slave_IO_State: Waiting for master to send event
Master_Host: 10.0.13.52
Master_User: slave1
Master_Port: 3306
Connect_Retry: 60
Master_Log_File: mysql-bin.000001
Read_Master_Log_Pos: 657
Relay_Log_File: mysql-relay-bin.000004
Relay_Log_Pos: 251
Relay_Master_Log_File: mysql-bin.000001
Slave_IO_Running: Yes
Slave_SQL_Running: Yes
Replicate_Do_DB: gcm_data
Replicate_Ignore_DB:
Replicate_Do_Table:
Replicate_Ignore_Table:
Replicate_Wild_Do_Table:
Replicate_Wild_Ignore_Table:
Last_Errno: 0
Last_Error:
Skip_Counter: 2
Exec_Master_Log_Pos: 657
Relay_Log_Space: 551
Until_Condition: None
Until_Log_File:
Until_Log_Pos: 0
Master_SSL_Allowed: No
Master_SSL_CA_File:
Master_SSL_CA_Path:
Master_SSL_Cert:
Master_SSL_Cipher:
Master_SSL_Key:
Seconds_Behind_Master: 0
Master_SSL_Verify_Server_Cert: No
Last_IO_Errno: 0
Last_IO_Error:
Last_SQL_Errno: 0
Last_SQL_Error: 
```

在 Master 上显示 PROCESSLIST：

```
| Id | User   | Host              | db   | Command     | Time | State                                                          | Info             |
| 16 | slave1 | 10.0.13.140:54683 | NULL | Binlog Dump | 2062 | Has sent all binlog to slave; waiting for binlog to be updated | NULL             | 
```

在 Slave 上显示 PROCESSLIST：

```
| Id | User        | Host      | db   | Command | Time | State                                                                 | Info             |
| 14 | system user |           | NULL | Connect | 2203 | Waiting for master to send event                                      | NULL             |
| 15 | system user |           | NULL | Connect | 2203 | Has read all relay log; waiting for the slave I/O thread to update it | NULL             | 
```

如果这很重要，我将从虚拟 CentOS 6.0、MySQL 5.1.61 运行主站和从站。

# 更新

我实施了一个小行为测试：我在 上创建了一个空数据库`Master`，运行一个复制脚本（一切顺利 -`Master`并且`Slave`正在运行）。然后我创建了一个`InnoDB`表

```
CREATE TABLE tbl (id INT, data VARCHAR(10)) engine=InnoDB; 
```

该表出现在 Slave 上。然后我用数据填充表格

```
INSERT tbl values (1, "1"); 
```

数据已在 Slave 上更新。

然后我停止了Master（`service mysqld stop`）并且Slave IO也停止了

```
SHOW SLAVE STATUS - Slave_IO_Running: No, Slave_SQL_Running: Yes 
```

然后我在 Master 上启动 MySQL，Slave IO 也在一段时间内启动。但是由于更新在 Slave 上不可用，因此它们存在于`mysql-relay-bin.00000X`Slave 上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T13:47:46.757

嗯..我以某种方式解决了这个问题。似乎问题恰恰在于从虚拟机运行主服务器和从服务器。我在真机上运行相同的复制脚本，一切正常。
所以现在的问题是为什么它不能在 VM 上正常工作。

**更新**
前段时间在真机上提出了同样的问题。
最终我找到了这个问题的根源：
我正在使用这样的 INSERT/SELECT 命令测试我的复制：
INSERT db.table (ID, VALUE) values (ID, 2);
在 Master 上并检查：
SELECT * FROM db.table;
在奴隶上。id 没有向我显示更新。
但后来我尝试了：
USE db;
INSERT 表 (ID, VALUE) 值 (ID, 2);
并且更新在从站上可用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-12-13T07:49:31.767

1.  通过命令 show slave status\G 检查状态
2.  停止奴隶；
3.  全部重置奴隶；
4.  在从服务器显示从状态\G;
5.  停止奴隶；
6.  全部重置奴隶；
7.  删除数据库数据库名；（确保删除从数据库）
8.  创建数据库slavedb；
9.  将主数据库的备份恢复到从数据库
10.  通过命令“head -25”检查头数以从新恢复的备份文件中获取日志位置。
11.  添加二进制文件名 CHANGE MASTER TO MASTER_HOST = 'Master IP', MASTER_USER = 'user', MASTER_PASSWORD = 'password', MASTER_LOG_FILE=' **mysql-masterdb-bin.002428** ', **MASTER_LOG_POS=57508035** ;
12.  启动奴隶；

# django - Django 1.2 - 管理 - 命令 - 无法在 crontab 上运行 manage.py 命令

> ID：12822633
> 
> 赞同：0
> 
> 时间：2012-10-10T15:08:18.890
> 
> 标签：django, command, crontab, manage.py

在我的项目中，我有一个应用程序：带有管理命令的 my_app：my_command.py

在 SSH 我尝试： `my/folder/project/and/app/python2.4 manage.py`my_command 一切正常

但如果我尝试 : `python2.4 /my/folder/project/and/app/manage.py my_command`，manage.py 不知道我的命令......

我尝试在 crontab 上运行我的命令..

谢谢劳伦

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T17:20:59.363

根据我的经验，我遇到此类问题有几个原因。

我会先检查使用的 python 解释器。如果您使用的是 virtualenv 或类似的东西，您应该确保您使用的是正确的 python 可执行文件。

如果你的服务器有 selinux，你应该确保它不会拒绝 cron 读取一些文件。

我也遇到了这样的问题，因为设置文件（我使用单独的设置文件以使其不那么冗长）不存在。

# c - 按排序顺序添加到链接列表，指针有问题

> ID：12822635
> 
> 赞同：3
> 
> 时间：2012-10-10T15:08:22.037
> 
> 标签：c, pointers

我正在尝试创建一个将 char* 添加到 LinkedList 的方法，以确保 linkedList 始终按字母顺序排序。我得到了定义 LinkedItem 结构的代码：

```
// Define our list item as 'struct ListItem', and also 
// typedef it under the same name.
typedef struct ListItem {
  char *s;
  struct ListItem *p_next;
} ListItem; 
```

我还获得了一种将项目添加到列表开头的方法：

```
// Adds a new item to the beginning of a list, returning the new
// item (ie the head of the new list *)
ListItem* add_item(ListItem *p_head, char *s) {  
    // Allocate some memory for the size of our structure.
    ListItem *p_new_item = malloc(sizeof(ListItem));
    p_new_item->p_next = p_head;       // We are the new tail.
    p_new_item->s = s;     // Set data pointer. 
    return p_new_item;
} 
```

现在这是我的代码，我将在之后解释更多：

```
ListItem* addSortedItem(ListItem *p_head, char *s){         
    if(p_head==NULL)//if the list is empty, we add to the beginning
        return add_item(p_head,s);
    ListItem* p_new_item = malloc(sizeof(ListItem));
    ListItem *p_current_item = p_head; //makes a pointer to the head of the list

    while (p_current_item) {    // Loop while the current pointer is not NULL
        printf("entering while loop with current=%s\n",p_current_item->s);
        // now we want to look at the value contained and compare it to the value input     
        if(aThenB(s,p_current_item->s)!=TRUE){
            // if A goes after B, we want to go on to look at the next element
            p_current_item=p_current_item->p_next;
        } else if (aThenB(s,p_current_item->s)==TRUE) {printf("entered elseif\n");      
            p_head=add_item(p_current_item,s);
            return p_head;          
        } else {printf("WHY DID WE EVER REACH THE ELSE!?"); return p_head;}
    }
} 
```

现在，如果 A 和 B 的正确排序顺序是 A，然后是 B，则 aThenB(StringA,StringB) 返回 TRUE，否则返回 false - 相等也是一个选项，我只是没有让它工作得足够好以允许它： -)

我的测试数据（即`"sheep i"`i 从 0 到 10）发生的情况是，要么我只返回一个元素，要么我随机跳过元素，具体取决于订单输入。我可以包含更多代码，但它有点乱。

我认为我的问题源于没有完全理解指针以及它们是如何工作的——我想确保 p_head 始终指向头部，而 p_current 正在遍历列表。但是当 p_current 到达最后一个元素时，我也会遇到段错误，所以我不确定我哪里出错了。

感谢您就如何让我的代码正确返回提供任何帮助:-)

编辑： addSortedItem() 在 main 方法的以下块中调用：

```
 // The empty list is represented by a pointer to NULL.
    ListItem *p_head = NULL;
    ListItem *p_head2=NULL;
    // Now add some items onto the beginning of the list.
    int i;
    for (i=0; i<NO_ITEMS; i++) {

    // Allocate some memory for our string, and use snprintf to
    // create a formatted string (see GNU API docs) much like printf
    // but instead writing to memory rather than the screen.
    char* s = malloc(MAX_DATA_CHARS);
    snprintf(s, (size_t) MAX_DATA_CHARS, "sheep %d", i);
    p_head = addSortedItem(p_head, s);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T16:42:44.580

在链表的中间或末尾添加新元素时出错。在您的`addStoredItem`函数中，您创建了一个从 newItem 到 currentItem 的指针，但您没有考虑到从前一个元素到 newItem 的链接

调用前的初始链表`addStoredItem`

```
item1-->item2-->item4-->item5 
```

链表调用`addStoredItem`后添加**item3**

```
item1-->item2-->item4-->item5
                ^
                |
                item3 
```

**如您所见，您已经在从item4**开始的子链表的头部添加了新项目，但是您没有从**item2**链接到**item3** ， 因此我们必须保留指向前一个项目的指针才能完成链接.

该`add_item()`功能允许在头部添加项目

如果您尝试在链表的末尾添加项目，同样的事情

```
item1-->item2-->item4-->item5    NULL
                                 ^
                                 |
                                 item6 
```

**item6**已添加为单独的头，并且没有从**item5**（上一个）到 item6（新）的链接

所以你的`addStoredItem()`功能可以像这样固定

```
ListItem* addSortedItem(ListItem *p_head, char *s){         
    if(p_head==NULL)//if the list is empty, we add to the beginning
        return add_item(p_head,s);
    struct ListItem* p_new_item = malloc(sizeof(ListItem));
    ListItem *p_current_item = p_head; //makes a pointer to the head of the list
    ListItem *p_prev_item = NULL; //FIXED

    while (p_current_item) {    // Loop while the current pointer is not NULL
        printf("entering while loop with current=%s\n",p_current_item->s);
        // now we want to look at the value contained and compare it to the value input     
        if(aThenB(s,p_current_item->s)!=TRUE){
            // if A goes after B, we want to go on to look at the next element
            p_prev_item = p_current_item; //FIXED
            p_current_item=p_current_item->p_next;
        } else if (aThenB(s,p_current_item->s)==TRUE) {printf("entered elseif\n");      
            break;        
        } else {printf("WHY DID WE EVER REACH THE ELSE!?"); return p_head;}
    }

    if (p_prev_item!=NULL) //FIXED
        p_prev_item->p_next=add_item(p_current_item,s); //FIXED
    else //FIXED
        p_head=add_item(p_current_item,s);//FIXED
    return p_head; //FIXED
} 
```

固定线用`//FIXED`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T15:46:47.377

首先，您的`p_head`is `NULL`，因此当您输入`addSortedItem`函数时，您会创建列表并添加第一个字符串。没关系。
但是，在添加第二项（在您的情况下是“羊 1”）后，您进入`while (p_current_item)`循环。调用`aThenB`返回`FALSE`，然后您转到下一个元素，即.. `NULL`！确实，此时的`p_head`样子是这样的：

```
p_head {
s = "sheep 0",
p_next = NULL
} 
```

您的`while`条件不正确，您退出了函数，没有添加任何内容。
您可以在第一个条件中添加一个条件`if`：

```
if (p_current_item->next == NULL)
  p_current_item->next = addSortedItem(NULL, s);
else
  p_current_item = p_current_item->next; 
```

另外，这样说`p_head=add_item(p_current_item,s);`是不对的。假设您的列表类似于：

```
"sheep 1" -> "sheep 2" -> "sheep 4" -> "sheep 5" 
```

如果你添加“sheep 3”，你会得到这个：

```
"sheep 1" -> "sheep 2" -> "sheep 3" -> "sheep 4" -> "sheep 5"
                          ^
                          |
                          p_head 
```

您将无法再添加“sheep 0”。不要将返回值`addSortedItem`作为新的返回`p_head`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T17:14:33.040

支持的东西：

```
#define FALSE 0
#define TRUE 1
#define aThenB(a,b) (strcmp(a,b) <=0 ? TRUE : FALSE) 
```

通过修改函数的签名以接受指向指针的指针，可以避免所有特殊情况。

```
void addSortedItem(ListItem **pp_head, char *s){         
    ListItem *p_new_item ;

    for (       ;*pp_head; pp_head = &(*pp_head)->p_next) {    
        if (aThenB(s,(*pp_head)->s)==FALSE) break;
    }

    p_new_item = malloc(sizeof *p_new_item);
    p_new_item->s = s;

    p_new_item->p_next = *pp_head;
    *pp_head = p_new_item;
} 
```

调用者应该这样做：

```
ListItem *root = NULL;
addSortedItem( &root, "sheep#0"); 
```

# ios - iOS - 当一个值可以为 nil 时如何处理字符串连接？

> ID：12822642
> 
> 赞同：0
> 
> 时间：2012-10-10T15:08:54.197
> 
> 标签：ios, ios5, string-concatenation

我正在做这样的事情：

```
NSUserDefaults *standardUserDefaults = [NSUserDefaults standardUserDefaults];

NSString *var1 = [standardUserDefaults objectForKey:@"obj1"];
NSString *var2 = [standardUserDefaults objectForKey:@"obj2"]; 

EmailUtil *email_obj = [[EmailUtil alloc] initWithSubject:@"Some subject" body:[[[@"This is var1: " stringByAppendingString: var1] stringByAppendingString:@" and var2: "] stringByAppendingString: var2]]; 

[email_obj send]; 
```

其中 EmailUtil 只是我自己的发送电子邮件的实用程序类。当字符串 var1 和 var2 不为零时，此代码可以正常工作；但是，如果它们为零，则程序将崩溃。什么是优雅的解决方案或良好的做法，以确保电子邮件发送没有问题，无论值是什么？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T15:10:56.653

在您的 EmailUtil 行之前，只需添加：

```
if(var1==nil) var1 = @"";
if(var2==nil) var2 = @""; 
```

那至少应该解决崩溃。

另一种可能更好的方法是使用 NSString 的 stringWithFormat。代替：

```
[[[@"This is var1: " stringByAppendingString: var1] stringByAppendingString:@" and var2: "] stringByAppendingString: var2] 
```

做：

```
[NSString stringWithFormat:@"This is var1: %@ and var2: %@", var1,var2]; 
```

我相信它会为 nil 参数说（null）（没有测试这个）。这可能比我所拥有的更干净，你的原始代码也是如此。

参考：[字符串格式](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Strings/Articles/FormatStrings.html#//apple_ref/doc/uid/20000943 "格式化字符串")

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T15:17:04.863

我很想`NSUserDefaults`用返回保证字符串的方法创建一个类别，用 @"" 代替 nil 或者您提供的默认值。如果您唯一关心的（永远！）是两个变量，这可能是矫枉过正，但它也可能便于重用。

# android - 使用 RAILS 信息登录 Android

> ID：12822649
> 
> 赞同：0
> 
> 时间：2012-10-10T15:09:18.970
> 
> 标签：android, ruby-on-rails, web-services, login

我想知道如何使用 RAILS Web 服务在 android 应用程序上验证用户...以及如何存储他/她的凭据以供进一步使用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T15:14:59.330

标准方法是您可以使用构建 rest API 的 rails 来验证一组给定的凭据。然后，您可以使用标准 HTTP 请求调用此 API，并以多种不同的安全方式存储令牌。

这是我发现的一个很好的项目，它实现了另一种使用rails对android应用程序用户进行身份验证的方法：

[http://www.strukturedkaos.com/2011/09/19/soup-to-nuts-token-authentication-for-android-using-rails-3-devise/](http://www.strukturedkaos.com/2011/09/19/soup-to-nuts-token-authentication-for-android-using-rails-3-devise/)

这是该站点上另一个很棒的线程，讨论了另一种解决方案：

[我可以使用什么来允许 android 应用程序与 rails 应用程序通信](https://stackoverflow.com/questions/4294229/what-can-i-use-to-allow-an-android-app-to-communicate-with-a-rails-app)

# javascript - 网络音频 API 输出

> ID：12822652
> 
> 赞同：3
> 
> 时间：2012-10-10T15:09:26.943
> 
> 标签：javascript, html, api, web-audio-api

我正在开发一个基于社区的 Internet Radio，用户可以在其中录制自己的消息。

我希望我的用户能够在他们的录音中添加效果（例如 Biquad Filters、Reverb aso..）

是否可以将最终混音（包括效果）处理为单个 PCM 输出（例如音频标签`src="data:audio/wav;base64"`），以便我可以通过邮寄将混音发送到服务器？

我试过这个：

```
recorder.locals.filter1.connect(recorder.locals.filter3);
recorder.locals.filter3.connect(recorder.locals.filter2);
recorder.locals.filter2.connect(context.destination); 
recorder.locals.source.noteOn(0); 
context.oncomplete = function(e) { var buffer = e.renderedBuffer; }; 
context.startRendering(); 
```

但它没有给我任何东西。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-11T14:44:03.150

我找到了解决方案。似乎在使用时`startRendering()`，您必须在创建时提供`duration`和`samplerate`上下文。

( `new webkitAudioContext(channels, duration * samplerate, samplerate`);

这是我生成预渲染音频缓冲区并将其转换为 base64 wav 的解决方案。

```
var audioBuffer = audio.createBuffer(arrayBuffer, false), /* <- Input Audio */
    offlineContext = new webkitAudioContext(1, audioBuffer.duration * 44100, 44100);

offlineContext.oncomplete = function(event) {

    var buffer   = event.renderedBuffer;    
    var UintWave = createWaveFileData(buffer);
    var base64   = btoa(uint8ToString(UintWave));

    document.getElementById("audio").src = "data:audio/wav;base64," + base64;

};

var source  = offlineContext.createBufferSource();
source.buffer = audioBuffer;
var gain = offlineContext.createGainNode();
// Effects
var filter1 = offlineContext.createBiquadFilter();
filter1.type = 2;
filter1.frequency.value = 4000;
filter1.Q.value = 0.1;
// Connect
source.connect(filter1);
filter1.connect(gain);
gain.connect(offlineContext.destination);

source.noteOn(0);
offlineContext.startRendering(); 

function createWaveFileData(audioBuffer) {

    var frameLength = audioBuffer.length;
    var numberOfChannels = audioBuffer.numberOfChannels;
    var sampleRate = audioBuffer.sampleRate;
    var bitsPerSample = 16;
    var byteRate = sampleRate * numberOfChannels * bitsPerSample/8;
    var blockAlign = numberOfChannels * bitsPerSample/8;
    var wavDataByteLength = frameLength * numberOfChannels * 2; // 16-bit audio
    var headerByteLength = 44;
    var totalLength = headerByteLength + wavDataByteLength;

    var waveFileData = new Uint8Array(totalLength);

    var subChunk1Size = 16; // for linear PCM
    var subChunk2Size = wavDataByteLength;
    var chunkSize = 4 + (8 + subChunk1Size) + (8 + subChunk2Size);

    writeString("RIFF", waveFileData, 0);
    writeInt32(chunkSize, waveFileData, 4);
    writeString("WAVE", waveFileData, 8);
    writeString("fmt ", waveFileData, 12);

    writeInt32(subChunk1Size, waveFileData, 16);      // SubChunk1Size (4)
    writeInt16(1, waveFileData, 20);                  // AudioFormat (2)
    writeInt16(numberOfChannels, waveFileData, 22);   // NumChannels (2)
    writeInt32(sampleRate, waveFileData, 24);         // SampleRate (4)
    writeInt32(byteRate, waveFileData, 28);           // ByteRate (4)
    writeInt16(blockAlign, waveFileData, 32);         // BlockAlign (2)
    writeInt32(bitsPerSample, waveFileData, 34);      // BitsPerSample (4)

    writeString("data", waveFileData, 36);            
    writeInt32(subChunk2Size, waveFileData, 40);      // SubChunk2Size (4)

    // Write actual audio data starting at offset 44.
    writeAudioBuffer(audioBuffer, waveFileData, 44);

    return waveFileData;

}   

function writeString(s, a, offset) {
    for (var i = 0; i < s.length; ++i) {
        a[offset + i] = s.charCodeAt(i);
    }
}

function writeInt16(n, a, offset) {
    n = Math.floor(n);

    var b1 = n & 255;
    var b2 = (n >> 8) & 255;

    a[offset + 0] = b1;
    a[offset + 1] = b2;
}

function writeInt32(n, a, offset) {
    n = Math.floor(n);
    var b1 = n & 255;
    var b2 = (n >> 8) & 255;
    var b3 = (n >> 16) & 255;
    var b4 = (n >> 24) & 255;

    a[offset + 0] = b1;
    a[offset + 1] = b2;
    a[offset + 2] = b3;
    a[offset + 3] = b4;
}

function writeAudioBuffer(audioBuffer, a, offset) {
    var n = audioBuffer.length;
    var channels = audioBuffer.numberOfChannels;

    for (var i = 0; i < n; ++i) {
        for (var k = 0; k < channels; ++k) {
            var buffer = audioBuffer.getChannelData(k);
            var sample = buffer[i] * 32768.0;

            // Clip samples to the limitations of 16-bit.
            // If we don't do this then we'll get nasty wrap-around distortion.
            if (sample < -32768)
                sample = -32768;
            if (sample > 32767)
                sample = 32767;

            writeInt16(sample, a, offset);
            offset += 2;
        }
    }
}

function uint8ToString(buf) {
    var i, length, out = '';
    for (i = 0, length = buf.length; i < length; i += 1) {
        out += String.fromCharCode(buf[i]);
    }
    return out;
} 
```

如果有人想出更简单或更短的方法来做到这一点，那就太好了！

# c# - 通过 jQuery .append() 附加 ASP.Net 元素

> ID：12822657
> 
> 赞同：3
> 
> 时间：2012-10-10T15:09:38.703
> 
> 标签：c#, jquery, asp.net, append

有没有可能做这样的事情

```
$("#popupForgot").append("<asp:TextBox ID='emailTextF' runat='server' Width='200px' Text='" + $.cookie("forLogin") + "'></asp:TextBox>") 
```

我需要将一个 asp.net 元素附加到一个 div 标记，该标记将具有 cookie 值，因为它是文本。我已经尝试使用上面的代码，但它不起作用。

先感谢您

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T15:11:50.570

这是不可能的，因为`asp:TextBox`是通过服务器端呈现的，而 jQuery 在客户端工作。

但是，您可以使用控件呈现您的文本框，`asp:TextBox`然后您可以使用 jQuery 更改其值：

```
$("#emailTextF").text($.cookie("forLogin")); 
```

**更新**

事实证明，`asp:TextBox`渲染的 id 不等于`id`参数（在内部使用`asp:TextBox`），试试这个：

```
$("#<%= emailTextF.ClientID %>").text($.cookie("forLogin")); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T15:13:34.440

说到底，JQuery 只是 JavaScript 代码。Javascript 代码在客户端的浏览器中运行。

ASP 标签是一种服务器端结构；在将它们发送到客户端的浏览器之前，它们将被转换为`<input type="Text"/>`字段（或多行文本框的其他内容）。

这两个是完全独立的概念，不能真正（直接）相互交互。

如果要通过 JQuery 添加文本框，它不能是 ASP 文本框，它需要是 HTML 文本框。如果您确实需要添加一个 ASP 文本框（但从这里显示的内容来看，您似乎不需要它），那么您需要回发到服务器以添加它。（如果需要，您可以通过 AJAX 异步执行回发。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T15:13:16.767

您的代码将在浏览器中运行，这意味着您的 asp:TextBox 不会被服务器处理。所以，简而言之，没有。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-10T15:14:30.633

您不能这样做，因为 ASP.NET 标记在数据发送到客户端之前在服务器端处理。
方法是： -
之前添加这个 ASP.NET 控件，并通过 JQuery 更改它的值，
- 如果需要**动态**添加控件，使用示例 html 标签，并从表单获取服务器上的数据。

# c++ - 构造函数应该接受参数还是应该创建设置器？

> ID：12822672
> 
> 赞同：18
> 
> 时间：2012-10-10T15:10:02.730
> 
> 标签：c++, oop, class

我有两个选择。要么创建一个在其构造函数中接受许多参数的类，要么创建许多 setter 方法和一个 init 方法。我不确定哪个是首选选项，是否应该在构造函数中接受某些参数，而其他参数可以通过 setter 手动设置？还是我想太多了？

这是一个相关的问题，也是由我提出的：[Conflicts between member names and constructor argument names](https://stackoverflow.com/questions/12822975/how-to-deal-with-constructor-argument-names)。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-10-10T15:11:27.003

如果在创建对象后必须调用`set`或`init`实际使用它……嗯，这只是一个糟糕的设计。

如果对象在没有按照您希望的方式初始化某些成员的情况下可用，则可以稍后设置它们。

这里的黄金法则是——**如果你创建了一个对象，你应该能够在不进行任何其他类型的初始化的情况下使用它**。

### 扩展答案：

假设您有一个形状，它有 10 个边、10 个角、一种颜色和一个名称，可以连接到不同的形状。构造函数应如下所示：

```
 MyShape(Point c1, Point c2,...., Point c10, Color c, Name n) 
```

如您所见，我省略了连接形状，因为`NULL`如果当前对象未连接，则可以将其设置为。但是，在没有任何其他参数的情况下，对象无效，因此应在构造函数中设置它们。

可能的重载（或者默认参数）可以是：

```
 MyShape(Point c1, Point c2,...., Point c10, Color c, Name n, 
                                      MyShape* connectedShape /*=NULL*/) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-10T15:33:38.573

[您应该为保持类不变性](http://en.wikipedia.org/wiki/Class_invariant)所必需的所有成员提供构造函数参数。换句话说，对象从创建到销毁的那一刻都应该处于有效且一致的状态。其他一切都在招惹麻烦。

话虽如此，有时会做出让步，例如在需要调用虚拟方法以提供类型特定初始化的层次结构的情况下。通常，这可以通过使用模板类/方法（即[静态多态性](http://blog.aaronballman.com/2011/08/static-polymorphism-in-c/)）来避免

如果有不影响类不变量的类成员，可以稍后通过 setter 或其他方法设置它们。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-10T19:08:03.167

[构建器模式](http://en.wikipedia.org/wiki/Builder_pattern)将在这里有所帮助，还可以尝试合并参数以使它们在构建器的设置过程中有意义

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-23T12:28:53.407

根据经验，有很多构造函数参数是一个类做得太多的标志，所以先试着把它分成更小的类。

然后尝试将一些参数分组到更小的类或结构中，每个类或结构都有自己的、更简单的构造函数。

如果你有合理的默认值，你可以使用一个构造函数，它只为构造一个新对象时绝对必须给出的值提供参数，然后添加 setter，或者使用复制“starter”对象的静态函数，改变它的一部分进行中。这样，您始终拥有一致的对象（不变量 OK），以及更短的构造函数或函数调用。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-07-23T20:24:06.963

我同意[棘轮怪胎](https://stackoverflow.com/users/731620/ratchet-freak)对构建器模式的[建议](https://stackoverflow.com/a/12826567/106797)，但需要权衡的是，典型的构建器模式不提供编译时检查以确保包含所有参数，并且您最终可能会得到不完整/不正确的构建的对象。

这对我来说是一个足够大的问题，我制作了一个编译时检查版本，如果你能原谅额外的机器，它可能会为你完成这项工作。（当然也有优化）

```
#include <boost/shared_ptr.hpp>

class Thing
{
    public:

        Thing( int arg0, int arg1 )
        {
            std::cout << "Building Thing with   \n";
            std::cout << "    arg0: " << arg0 << "\n";
            std::cout << "    arg1: " << arg1 << "\n";
        }

        template <typename CompleteArgsT>
        static
        Thing BuildThing( CompleteArgsT completeArgs )
        {
            return Thing( completeArgs.getArg0(), 
                          completeArgs.getArg1() );
        }

    public:

        class TheArgs
        {
            public:
                int arg0;
                int arg1;
        };

        class EmptyArgs
        {   
            public:    
                EmptyArgs() : theArgs( new TheArgs ) {};
                boost::shared_ptr<TheArgs> theArgs;    
        };

        template <typename PartialArgsClassT>
        class ArgsData : public PartialArgsClassT
        {
            public:
                typedef ArgsData<PartialArgsClassT> OwnType;

                ArgsData() {}
                ArgsData( const PartialArgsClassT & parent ) : PartialArgsClassT( parent ) {}

                class HasArg0 : public OwnType
                {
                    public:
                        HasArg0( const OwnType & parent ) : OwnType( parent ) {}
                        int getArg0() { return EmptyArgs::theArgs->arg0; }
                };

                class HasArg1 : public OwnType
                {
                    public:
                        HasArg1( const OwnType & parent ) : OwnType( parent ) {}                    
                        int getArg1() { return EmptyArgs::theArgs->arg1; }
                };

                ArgsData<HasArg0>  arg0( int arg0 ) 
                { 
                    ArgsData<HasArg0> data( *this ); 
                    data.theArgs->arg0 = arg0;
                    return data; 
                }

                ArgsData<HasArg1>  arg1( int arg1 )
                { 
                    ArgsData<HasArg1> data( *this ); 
                    data.theArgs->arg1 = arg1;                    
                    return data; 
                }
        };

        typedef ArgsData<EmptyArgs> Args;
};

int main()
{
    Thing thing = Thing::BuildThing( Thing::Args().arg0( 2 ).arg1( 5 ) );
    return 0;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-10T15:20:38.940

这取决于你在做什么。通常最好在构造函数中设置一些东西，因为这些有助于塑造对象在其生命周期后期的使用方式。一旦创建了对象（例如计算因子或文件名），更改值也可能会产生影响，这可能意味着您必须提供重置对象的功能 - 非常混乱。

有时会提供一个在构造函数之后调用的初始化函数的参数（当调用纯虚拟函数时，很难直接从构造函数初始化），但是您必须保留对象状态的记录，这会增加更多复杂性。

如果对象是一个直接的无状态数据容器，那么访问器和修改器可能没问题，但它们会增加大量维护开销，而且很少全部使用。

我倾向于坚持在构造函数中设置你的值，然后添加访问器以及何时允许你只读访问你可能需要的参数。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-10T15:20:56.873

这取决于您的架构和工具：

如果您计划**开发/原型**化大型 OO 层次结构，如果您没有好的 IDE/编辑器，我将不愿意通过构造函数传递大量信息。在这种情况下，您可能会在每个重构步骤中完成大量工作，这可能会导致错误，而不会被编译器捕获。

如果您计划使用一**组**集成良好的对象（例如，通过强烈使用设计模式），这些对象不跨越一个大层次结构，而是具有强大的迭代，通过构造函数传递更多数据是一件好事，因为更改一个对象构造函数确实不要破坏所有子构造函数。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-10-10T19:14:22.187

如果该设置是必需的且无法赋予默认值，请在构造函数中将其设为必需。这样你就知道它实际上会被设置。

如果不需要设置并且可以给定一个默认值，请为其创建一个设置器。这使构造函数变得更加简单。

例如，如果您有一个发送电子邮件的类，则构造函数中可能需要“To”字段，但其他所有内容都可以在 setter 方法中设置。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-10-10T19:18:55.577

我的经验指出我在构造函数中使用参数而不是 getter 和 setter。如果您有很多参数，则建议可以默认可选参数，而必需/强制参数是构造函数参数。

# c# - XmlDocument 未能加载 XHTML 字符串，因为错误“引用未声明的实体 'nbsp'”

> ID：12822680
> 
> 赞同：3
> 
> 时间：2012-10-10T15:10:21.957
> 
> 标签：c#, xml

我使用以下代码将 HTTP 响应流转换为 XmlDocument。

```
HttpWebRequest request = WebRequest.Create(url) as HttpWebRequest;
HttpWebResponse response = request.GetResponse() as HttpWebResponse;
Stream responseStream = response.GetResponseStream();
StreamReader responseReader = new StreamReader(responseStream);
String responseString = responseReader.ReadToEnd();
Console.WriteLine(responseString);
Int32 htmlTagIndex = responseString.IndexOf("<html",
   StringComparison.OrdinalIgnoreCase);
XmlDocument responseXhtml = new XmlDocument();
responseString = responseString.Substring(htmlTagIndex); // MARK 1
responseString = responseString.Replace("&nbsp", " "); // MARK 2
responseXhtml.LoadXml(responseString);
return responseXhtml; 
```

**MARK 1**行是跳过 DOC Type 定义行。

**MARK 2**行是为了避免错误**Reference to undeclared entity 'nbsp'**。

有没有更好的方法来做到这一点？上面代码中的字符串操作太多了。

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-10T15:17:30.773

我会直接使用[HtmlAgilityPack](http://html-agility-pack.net/?z=codeplex)来解析 html。即使你必须将html转换为xml，你也可以使用它。

```
using (WebClient wc = new WebClient())
{
    HtmlAgilityPack.HtmlDocument doc = new HtmlAgilityPack.HtmlDocument();
    doc.LoadHtml(wc.DownloadString("http://www.google.com"));
    doc.OptionOutputAsXml = true;

    StringWriter writer = new StringWriter();
    doc.Save(writer);

    var xDoc = XDocument.Load(new StringReader(writer.ToString()));
} 
```

# xml - 如何使用 JAXB 解组一组根元素？

> ID：12822683
> 
> 赞同：3
> 
> 时间：2012-10-10T15:10:37.973
> 
> 标签：xml, serialization, collections, jaxb

从某个库中，我得到了这样一个输入字符串：

```
<link>
    <name>button1</name>
    <target>there</target>
</link>
<link>
    <name>button2</name>
    <target>there2</target>
</link> 
```

（请注意，这不是 XML 文档，因为它没有根）而且我有这个类：

```
@XmlRootElement(name = "link")
public class TableTagLinkElement {
    private String name;
    private String target;

    // getters and setters
} 
```

我怎样才能以一种通用的方式轻松地将其解组为`TableTagLinkElement`s列表，**以便我可以实现这样的方法：**

```
public <T> List<T> parseCollection(String xmlString, Class<T> rootClass) 
```

即，没有任何关于`TableTagLinkElement`类或`<link>`标签名称的先前知识？

我知道[使用 list 创建包装类的](https://stackoverflow.com/questions/2315466/how-to-use-jaxb-to-marshall-unmarshall-a-collection-of-mybean)解决方案，但我认为它们不适用于这里，是吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T15:49:01.783

如果您可以`<root>...</root>`在完整的 XML 字符串周围包装一个元素，那么您可以`XMLStreamReader`从该字符串创建一个读数，然后在阅读器上循环，随时解组每个`link`。例如（省略异常处理）

```
public <T> List<T> parseCollection(String xmlString, Class<T> rootClass) {
  XMLInputFactory inFac = XMLInputFactory.newFactory();
  XMLStreamReader reader = inFac.createXMLStreamReader(
                    new StringReader("<root>" + xmlString + "</root>"));
  reader.nextTag(); // move to the <root> tag
  reader.nextTag(); // move to the first child
  List<T> list = new ArrayList<T>();
  while(reader.getEventType() == XMLStreamConstants.START_ELEMENT) {
    list.add(declaredType.cast(unmarshaller.unmarshal(reader)));

    // unmarshal leaves the reader pointing at the event *after* the
    // closing tag, not the END_ELEMENT event itself, so we can't just
    // do nextTag unconditionally.  We may already be on the next opening
    // tag or the closing </root> but we might need to advance if there
    // is whitespace between tags
    if(reader.getEventType() != XMLStreamConstants.START_ELEMENT &&
       reader.getEventType() != XMLStreamConstants.END_ELEMENT) {
      reader.nextTag();
    }
  }
  reader.close();
  return list;
} 
```

# php - 如何将php参数传递给javascript

> ID：12822686
> 
> 赞同：0
> 
> 时间：2012-10-10T15:10:40.317
> 
> 标签：php, javascript, parameters, onclick

> **可能重复：**
> [将 php 变量值传递给 javascript](https://stackoverflow.com/questions/10437703/pass-php-variable-value-to-javascript)

我有一段php代码

```
function formLetterTabPage($redirect_url, $letter){
  $test = 123;
  foreach (range('A','Z') as $val) {
    if($val == $letter){
        echo '<li class="a" id="li_'.$letter.'" onclick="tab_click('.$letter.')">'.$letter.'</li>';
    }else{
        echo '<li class="b" id="li_'.$val.'" onclick="tab_click('.$letter.')">'.$val.'</li>';
    }
  }
} 
```

我的 javascript 函数 tab_click 非常简单：

```
function tab_click(f){
  alert(f);
} 
```

关键部分在这里：

```
echo '<li class="a" onclick="tab_click('.$letter.')">'.$letter.'</li>'; 
```

它无法解决！所以我像这样改变它：

```
$test = 123;
echo '<li class="a" onclick="tab_click('.$test .')">'.$letter.'</li>'; 
```

它工作得很好，页面显示123！我想知道为什么会这样？我检查了html代码，没问题：

```
<li class="navi_letter_leftb" id="li_A" onclick="tab_click(A)">A</li> 
```

好的，我不知道为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T15:12:55.350

您需要在 javascript 中为字符串参数添加额外的引号：

```
echo '<li class="a" onclick="tab_click(\''.$letter.'\')">'.$letter.'</li>'; 
```

在您的测试用例`$test = 123;`中，您传递的是一个整数，因此不需要引号。

**编辑**

不带引号的输出（无效的 javascript）：

```
<li class="a" onclick="tab_click(a)">a</li> 
```

带引号的输出：

```
<li class="a" onclick="tab_click('a')">a</li> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T15:17:24.783

如果你传递`$test = 123`你的 javascript 它正在工作，因为你传递的是一个整数值。

但是您的`$letter`它是一个字符串，因此生成的 html 代码是错误的：

```
<li class="navi_letter_leftb" id="li_A" onclick="tab_click(A)">A</li> 
```

你必须在引号之间包裹你的字符串`''`。所以应该是：

```
<li class="navi_letter_leftb" id="li_A" onclick="tab_click('A')">A</li> 
```

您应该将代码更改为：

```
echo '<li class="a" onclick="tab_click(\''.$letter.'\')">'.$letter.'</li>'; 
```

# hadoop - Hadoop。将结果减少到单个值

> ID：12822687
> 
> 赞同：2
> 
> 时间：2012-10-10T15:10:42.200
> 
> 标签：hadoop, mapreduce

我开始学习 Hadoop，对 MapReduce 有点困惑。对于结果本身是键值对列表的任务，一切似乎都很清楚。但我不明白我应该如何解决结果是单个值的任务（例如，输入小数平方和，或输入点的质心）。

一方面，我可以将映射器的所有结果放到同一个键上。但据我所知，在这种情况下，唯一的 reducer 将管理整个数据集（计算总和或平均坐标）。这看起来不是一个好的解决方案。

我可以成像的另一个是对映射器结果进行分组。比如说，处理示例 0-999 的映射器将产生等于 0 的键，1000-1999 将产生等于 1 的键，依此类推。只要reducer 仍然会有多个结果，就需要建立reducer 链（reducing 将重复直到只剩下一个结果）。它看起来更有效的计算，但有点复杂。

我仍然希望 Hadoop 有现成的工具来执行 reducer 的叠加，以最大限度地提高将整个数据归约为单个值的效率。虽然我没找到。

解决结果为单个值的任务的最佳实践是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T16:50:27.200

如果您能够根据可交换减少重新制定您的任务，您应该查看[Combiners](http://wiki.apache.org/hadoop/HadoopMapReduce)。无论您以何种方式查看它，它都可以显着减少要洗牌的数据量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T15:47:08.763

从我的角度来看，您从错误的角度解决问题。

请参阅需要对输入的平方求和的问题，假设您有许多大型文本输入文件，每行由一个数字组成。

然后理想情况下，您希望在映射器中并行化您的总和，然后在化简器中总结总和。

例如：

```
map: (input "x", temporary sum "s") -> s+=(x*x) 
```

在映射结束时，您将使用全局键发出每个映射器的临时总和。

在 reduce 阶段，您基本上从映射器中获取所有总和并将总和相加，请注意，与您的巨大输入文件和因此，单个 reducer 确实不是可伸缩性瓶颈。

您想减少映射器和减速器之间的通信成本，而不是将所有数据代理到单个减速器并在那里读取它，这不会并行化任何东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T15:25:55.790

我认为你对你提出的具体用例的分析是正确的。这些用例仍然属于您可以使用 hadoop 执行的相当广泛的范围，而且肯定还有其他一些事情是 hadoop 无法处理的。如果我必须解决同样的问题，除非我知道数据太大，否则我会遵循您的第一种方法，然后我会遵循您的两步方法。

# windows - 如何将 WinRT 异步任务集成到现有的同步库中？

> ID：12822694
> 
> 赞同：1
> 
> 时间：2012-10-10T15:11:06.897
> 
> 标签：windows, asynchronous, windows-8, windows-runtime

我们有一个长期建立的、非常多平台的代码库，目前正在移植到 WinRT。我们面临的挑战之一是如何处理 WinRT 的异步风格。

例如，我们不确定如何处理 WinRT 的异步文件操作。不出所料，我们代码库的 API 是同步的。一个典型的例子是我们的 File::Open 函数，它尝试打开一个文件并返回成功或失败。我们如何调用 WinRT 函数并保持函数的行为相同？

请注意，不幸的是，我们受到遗留问题的限制：我们不能简单地将 API 更改为异步。

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-10T16:42:30.080

我假设您希望重新实现库以支持 WinRT 应用程序，同时不更改 API 的定义，以便现有应用程序保持兼容。

我认为如果在调用异步方法时不包含 await 关键字，您将不会执行异步操作，它应该以同步方式执行。但是，如果该方法返回一个值（根据我的经验），它确实不起作用。

我一直在使用此代码使文件操作同步：

```
IAsyncOperation<string> contentAsync = FileIO.ReadTextAsync(file);
contentAsync.AsTask().Wait();
string content = contentAsync.GetResults(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T16:51:48.680

如果您想与不支持 async/await 的平台共享您的代码 - 您可能最好为旧平台使用不同的 API，而新平台使用类似的开关

```
#if SILVERLIGHT
#elif NETFX_CORE
#elif WPF
#endif 
```

最终，异步 API 可能会出现在较旧的平台中，并且您实际上可以将非异步调用包装到 Tasks 中，以使它们在不异步的情况下异步。强制异步方法同步工作势必会很快反击你。例如，您的 WinRT 应用程序可能会在几秒钟内无响应并被操作系统杀死。或者，您可能会在等待任务完成并阻塞他们尝试完成的线程时遇到死锁。

# spring - 是 IBM MQ 连接工厂身份验证问题的“setDirectAuth”属性解决方案（RC 2035）

> ID：12822696
> 
> 赞同：1
> 
> 时间：2012-10-10T15:11:10.240
> 
> 标签：spring, ibm-mq

我需要连接到我的应用程序中的远程队列，但是当在 MQ 场中启用安全性时，它会遇到身份验证错误（RC 2035），我被告知，当我使用 spring 配置时，它试图访问一些它不应该访问的默认队列，我遇到了 setDirectAuth 属性，它会解决这个问题吗？如果我错过了导致错误的任何属性，请告知？

错误：

```
 org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'connectionFactory' defined in class path resource [META-INF/spring.xml]: Invocation of init method failed; nested exception is javax.naming.ServiceUnavailableException: Unable to connect to the target queue manager XXXX.XXX.XXX.com:1415/xxx.SVRCONN [Root exception is com.ibm.mq.MQException: MQJE001: Completion Code '2', Reason '2035'.]
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'connectionFactory' defined in class path resource [META-INF/spring.xml]: Invocation of init method failed; nested exception is javax.naming.ServiceUnavailableException: Unable to connect to the target queue manager xxxx.xxx.xxx.com:1415/xxx.SVRCONN [Root exception is com.ibm.mq.MQException: MQJE001: Completion Code '2', Reason '2035'.]
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1455)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:519)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
        at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
        at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
        at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
        at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
        at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:567)
        at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:913)
        at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:464)
        at org.springframework.context.support.ClassPathXmlApplicationContext.<init>(ClassPathXmlApplicationContext.java:139)
        at org.springframework.context.support.ClassPathXmlApplicationContext.<init>(ClassPathXmlApplicationContext.java:83) 
```

上下文.xml

```
<Resource 
    name="jms/MQConnectionFactory" 
    auth="Container" 
    type="com.ibm.mq.jms.MQQueueConnectionFactory" 
    factory="com.ibm.mq.jms.MQQueueConnectionFactoryFactory" 
    description="JMS Queue Connection Factory for sending messages" 
    HOST="XX.XXX.XXX.XX"
    PORT="XXXX"
    CHAN="MQ.CHANNEL"
    TRAN="1" 
    QMGR="TEST01"
/> 

<Resource 
    name="jms/QueueSU" 
    auth="Container" 
    type="com.ibm.mq.jms.MQQueue" 
    factory="com.ibm.mq.jms.MQQueueFactory" 
    description="JMS Queue for status update" 
    QU="Q01" 
/> 

<Resource 
    name="jms/QueueBM" 
    auth="Container" 
    type="com.ibm.mq.jms.MQQueue" 
    factory="com.ibm.mq.jms.MQQueueFactory" 
    description="JMS Queue for bond management" 
    QU="Q02" 
/> 
```

属性文件：

```
#JMS Provider
jms.factory.initial=com.ibm.mq.jms.context.WMQInitialContextFactory
jms.provider.url=xx.xxx.xxx.com:1415/xxx.CHANNEL
destination.factory=java:/comp/env/jms/MQConnectionFactory
bm.queue=java:/comp/env/jms/QueueBM
su.queue=java:/comp/env/jms/QueueSU 
```

春天.xml

```
 <!--  JMS BEANS  -->   
    <bean id="bmMessageReceiver" class="com.jms.BMMessageReceiver"/> 
    <bean id="suMessageReceiver" class="com.jms.SUMessageReceiver"/>
    <bean id="jndiTemplate" class="org.springframework.jndi.JndiTemplate">
        <property name="environment">
            <props>
                <prop key="java.naming.factory.initial">${jms.factory.initial}</prop>
                <prop key="java.naming.provider.url">${jms.provider.url}</prop>
            </props>
        </property>
    </bean>
    <bean id="connectionFactory" class="org.springframework.jndi.JndiObjectFactoryBean">
        <property name="jndiTemplate">
            <ref bean="jndiTemplate" />
        </property>
        <property name="jndiName">
            <value>${destination.factory}</value>
        </property>
    </bean>
    <bean id="bmMessageQueue" class="org.springframework.jndi.JndiObjectFactoryBean">
        <property name="jndiTemplate">
            <ref bean="jndiTemplate" />
        </property>
        <property name="jndiName">
            <value>${bm.queue}</value>
        </property>
    </bean>
    <bean id="suMessageQueue" class="org.springframework.jndi.JndiObjectFactoryBean">
        <property name="jndiTemplate">
            <ref bean="jndiTemplate" />
        </property>
        <property name="jndiName">
            <value>${su.queue}</value>
        </property>
    </bean>
    <bean id="bmListenerContainer" class="org.springframework.jms.listener.DefaultMessageListenerContainer">
        <property name="concurrentConsumers" value="5" />
        <property name="connectionFactory" ref="connectionFactory" />
        <property name="destination" ref="bmMessageQueue" />
        <property name="messageListener" ref="bmMessageReceiver" />
        <property name="sessionTransacted" value="true" />
    </bean>
    <bean id="suListenerContainer" class="org.springframework.jms.listener.DefaultMessageListenerContainer">
        <property name="concurrentConsumers" value="5" />
        <property name="connectionFactory" ref="connectionFactory" />
        <property name="destination" ref="suMessageQueue" />
        <property name="messageListener" ref="suMessageReceiver" />
        <property name="sessionTransacted" value="true" />
    </bean>    
 <!--    JMS END   --> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T16:06:57.507

当您的应用打开本地队列时，授权配置文件与打开的队列的名称相匹配。换句话说，如果连接到的应用`LOCALQMGR`打开`SYSTEM.DEF.LOCAL.QUEUE@LOCALQMGR`授权控制列表条目，则`LOCALQMGR`必须授予应用访问`SYSTEM.DEF.LOCAL.QUEUE`.

但是，当应用程序打开`SOME.QUEUE@REMOTEQMGR`QMgr 时，会解析`REMOTEQMGR`并找到通向该 QMgr 的传输队列。在这种情况下，它打开的队列是传输队列，因此它会寻找与传输队列匹配的授权配置文件。将应用程序授权给 XMitQ 可以，但它允许应用程序将消息发送到该 QMgr 上的*任何*队列，包括例如命令队列。

很多时候，管理员不希望直接授予对传输队列的访问权限，因为它允许访问该 QMgr 上的任何队列并且他们宁愿限制它。因此，在点对点界面中，通常会在本地设置一个 QRemote 并授权该应用程序。在集群中，通常在集群队列上设置本地 QAlias 并将授权配置文件附加到该队列。

唯一会影响这一点的是应用程序用于连接请求的用户 ID。如果 QMgr 是安全的，则应用程序无法影响此连接 ID。MQ 管理员将在通道定义中设置 ID 或从 IP 地址或 SSL 证书专有名称映射它。如果由于某种原因 QMgr 不安全，则应用程序可以指定要在连接上使用的 ID 作为 API 调用的一部分：

```
connection = ConnectionFactory.createConnection(userID, password); 
```

如果 MQ 管理员未`MCAUSER`在通道上设置或映射，则 QMgr 将接受您提供的 ID，并且不检查密码。如果 MQ 管理员配置了通道出口，该出口可以针对 LDDAP、AD、本地操作系统等验证密码。但如果未安装出口，则不检查密码。

既然您知道了这一点，您也许可以回答有关`setDirectAuth`（因为我不能）效果的问题。如果该参数由连接工厂继承并由通道请求断言，它将被传递给 MQ，如果通道不安全，则将被接受。类似地，如果您使用了带有 ID 和密码的 Connection 对象构造函数，您可以肯定地声明一个 ID，如果通道不安全，QMgr 将接受该 ID。

您可以使用以下方法对此进行测试：

```
connection = ConnectionFactory.createConnection('mqm', 'doesntmatter'); 
```

如果 QMgr 位于 UNIX/Linux 上且不安全，则应用程序将以`mqm`. 我不建议这样运行，正确的反应是保护它。但这是一种测试并查看它是否安全的方法。

# playframework-2.0 - 尝试从 cloudbees 访问远程数据库时播放 2 个连接问题

> ID：12822697
> 
> 赞同：1
> 
> 时间：2012-10-10T15:11:12.747
> 
> 标签：playframework-2.0, cloudbees

有时我的 play2 应用程序可以工作，但有时不能。我怀疑它没有在开发模式下释放连接。这是错误：

```
 [error] c.j.b.h.AbstractConnectionHook - Failed to obtain initial connection Sle
eping for 0ms and trying again. Attempts left: 0\. Exception: null
[error] application -

! @6c1j5m094 - Internal server error, for request [GET /] ->

play.api.Configuration$$anon$1: Configuration error [Cannot connect to database
[default]]
        at play.api.Configuration$.play$api$Configuration$$configError(Configura
tion.scala:71) ~[play_2.9.1.jar:2.0.4]
        at play.api.Configuration.reportError(Configuration.scala:258) ~[play_2.
9.1.jar:2.0.4]
        at play.api.db.BoneCPPlugin$$anonfun$onStart$1.apply(DB.scala:249) ~[pla
y_2.9.1.jar:2.0.4]
        at play.api.db.BoneCPPlugin$$anonfun$onStart$1.apply(DB.scala:240) ~[pla
y_2.9.1.jar:2.0.4]
        at scala.collection.TraversableLike$$anonfun$map$1.apply(TraversableLike
.scala:194) ~[scala-library.jar:0.11.3]
        at scala.collection.TraversableLike$$anonfun$map$1.apply(TraversableLike
.scala:194) ~[scala-library.jar:0.11.3]
Caused by: com.mysql.jdbc.exceptions.jdbc4.MySQLSyntaxErrorException: User bestt
v already has more than 'max_user_connections' active connections 
```

这是我的配置（我只放了我添加的条目来解决这个问题，但似乎没有帮助）：

```
db.default.partitionCount=1
db.default.maxConnectionsPerPartition=5
db.default.minConnectionsPerPartition=1
db.default.acquireIncrement=1
db.default.acquireRetryAttempts=1
db.default.acquireRetryDelay=5 seconds 
```

不知道是不是跟cloudbees或者play有关。类似游戏的人说它在游戏 2 （一月）中解决了，但似乎没有..

# html - 指定字体时 HTML 输入框对于数据来说太宽了

> ID：12822701
> 
> 赞同：2
> 
> 时间：2012-10-10T15:11:43.023
> 
> 标签：html, css, forms

权力要求我们的某些表单上的输入字段具有粗体文本。问题是在样式表中这样做的天真方式：

```
input {
    font-weight: bold;
} 
```

使用这个 HTML：

```
1234567890
<input type="text" maxlength="10" size="10" value="1234567890"/> 
```

导致了一个直接的问题：现在**所有**的输入框都太宽了。

![注意多余的空格](../Images/636a386423baca4cf9abeef7519cc918.png)

我已将其范围缩小到 Yahoo 重置，它告诉输入框`font: inherit`来自父级（文档正文）。这是我想要的行为——输入框与父正文具有相同的字体。但是一旦我指定字体，或者使用继承，输入框又太宽了。这在 IE 和 Firefox 中是一样的，所以它可能不是浏览器兼容性问题。

看看它在行动：http: [//jsfiddle.net/clintp/bZChP/3/](http://jsfiddle.net/clintp/bZChP/3/)

如何为输入框指定字体，但要适当调整它们的大小？

**更新**：“适当地” [http://jsfiddle.net/clintp/bZChP/5/](http://jsfiddle.net/clintp/bZChP/5/) 右边的输入小部件的大小适合其数据，左边的不是。目标是使两个框具有相同的大小、相同的文本字体[其中一个是粗体！]，而不必逐个字段地为应用程序中的每个输入框指定框大小。（有数千个。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T16:34:22.627

实际上，除非您使用等宽空间，否则您无法可靠地调整输入字段的大小。即使对于 monopace 字体，浏览器在计算字段宽度时也存在错误。`size`如果您仅在 HTML 中使用属性设置可见宽度，并在 CSS 中设置字体大小和系列，列出似乎可以正常工作的等宽字体，则可能会获得最一致的结果。例如，

输入 { 字体：100% Lucida 控制台，等宽；}

这将解决某些浏览器上的问题，例如`<input size=10>`导致大约 12 个字符宽的字段。

关于输入框与父体字体相同的要求，那么您也需要在父体中使用等宽字体。☺ 说真的，虽然我们*也应该*能够使用比例字体设置输入字段的宽度，但事情就是行不通。即使是支持该`ch`单位的浏览器（如果它工作的话，这将是数字输入的问题）不一致且不正确地执行此操作，因此`width: 10ch`即使对于输入 0000000000，设置 eg 也不会提供正确的呈现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T15:14:34.630

创建一个调整字体大小和粗细的 CSS 类。在您希望设置样式的输入中使用该类名。

```
<input class="bold" type="text" maxlength="10" size="10" value="1234567890"/>

.bold {
    font-weight:bold;
    font-size:10px;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T15:58:27.603

为什么不对粗体输入设置固定宽度？

[http://jsfiddle.net/pBXbY/](http://jsfiddle.net/pBXbY/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-10T15:22:30.087

:) 首先，您在问题中输入的内容是什么？

只需将其添加到您的 css 中：

```
yourparent input
{
    font-weight:regular /* Just set a value like your parent of input*/;
} 
```

# haskell - 使用foldr的Haskell错误

> ID：12822704
> 
> 赞同：1
> 
> 时间：2012-10-10T15:12:04.320
> 
> 标签：haskell

我是haskell的新手，正在尝试一些练习

我不明白生成的错误是什么以及生成它的原因

```
split = foldr 
        (\x y -> y:x)
        [[]] 
```

解释器上的错误如下

```
 Occurs check: cannot construct the infinite type: a0 = [a0]
    In the first argument of `(:)', namely `y'
    In the expression: y : x
    In the first argument of `foldr', namely `(\ x y -> y : x)'
Failed, modules loaded: none. 
```

有人可以帮忙吗？提前致谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-10T15:21:04.680

foldr 的类型是

```
foldr :: (a -> b -> b) -> b -> [a] -> b 
```

所以分裂

```
split = foldr (\x y -> y:x) [[]] 
```

`y`并且`y:x`必须是相同的类型，这对任何人来说都是不可能的，`x`并且在列表`y`中`y:x`总是比`y`.

我想你想做什么`x:y`？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T15:25:08.603

回忆一下`foldr`:的类型`(a -> b -> b) -> b -> [a] -> b`。这表示`foldr`期望一个函数将列表的元素与最终结果类型的值组合，产生结果类型的新值。

对于第一个参数，您已经给出`foldr`了函数`\x y -> y:x`，其中`x`将是列表元素以及`y`右侧下一步的结果；并且应用此 lambda 的结果应与`y`.

但是 的类型`(:)`是`a -> [a] -> [a]`——也就是说，它将单个元素附加到列表的头部。在表达式`y:x`中，您使用“结果”类型的东西并将其用作用作结果的列表的元素。

因此，GHC 试图推断结果类型`b`与 type 相同`[b]`，然后当然与 type 相同`[[b]]`，`[[[b]]]`等等。因此它抱怨“无限类型”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T16:05:51.947

我之前的帖子回答了您的问题，但在您发表评论后，我可以看到您需要一个按谓词拆分列表的函数。

您可以使用 GHC.Exts 模块中的 groupWith::Ord b => (a -> b) -> [a] -> [[a]] 并在您的例子：

```
groupWith even [1,2,3,4,5,6] yields [[1,3,5],[2,4,6]] 
```

此外，一些丑陋但能达到你想要的“郊游”类型的东西是：

```
split::Eq a => (a -> Bool) -> [a] -> [[a]]
split f ls = (ls \\ rl):rl:[]
    where rl = filter f ls 
```

但是，由于您提供的二进制函数，这将始终将提供的列表分成两个列表。

# google-visualization - 谷歌运动图表的反向轴方向

> ID：12822707
> 
> 赞同：3
> 
> 时间：2012-10-10T15:12:15.183
> 
> 标签：google-visualization

我正在创建一个显示过去 5 年数据的 gvisMotionChart。我希望初始状态是最近的日期（例如 2012 年），并且图表可以及时“向后”移动。我知道如何将初始状态设置为最新日期，但这根本不会反转时间刻度，它只是在时间线的末尾开始图表。

基本上，我正在寻找 gvisMotionChart 的功能，它与谷歌散点图的“hAxis.direction”功能相同。

有谁知道如何做到这一点？

谢谢！！

# sql - SQL 按条件排序？

> ID：12822710
> 
> 赞同：1
> 
> 时间：2012-10-10T15:12:19.157
> 
> 标签：sql, sql-server-2008

直到现在我有以下查询：

```
select dl 
from Dienstleistung as dl inner join 
     dl.DienstleistungsOrte as dlo with dlo.ID = :raumID 
order by dl.Bezeichnung 
```

是否可以在有条件的情况下订购两个列？

我想要的是由 dl.Bezeichnung 和 dl.Sortierung 订购。条件应该是：

```
IF dl.Sortierung = 0 ---> order by dl.Bezeichnung
and
IF dl.Sortierung > 0 --->order by dl.Sortierung 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-10T15:14:46.360

试试这个：

```
ORDER BY 
  CASE
    WHEN dl.Sortierung = 0 THEN dl.Bezeichnung
    WHEN dl.Sortierung > 0 THEN dl.Sortierung 
  END 
```

或者：

```
ORDER BY 
  CASE
    WHEN dl.Sortierung = 0 THEN dl.Bezeichnung
    ELSE dl.Sortierung 
  END 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T15:14:38.557

如果`dl.Sortierung`可以是 < 0 或`null`，请执行以下操作：

```
order by case 
    when dl.Sortierung = 0 then dl.Bezeichnung 
    when dl.Sortierung > 0 then dl.Sortierung 
    else SomeOtherColumn 
end 
```

否则，如果`dl.Sortierung`总是 >= 0，则执行

```
order by case 
    when dl.Sortierung = 0 then dl.Bezeichnung 
    else dl.Sortierung 
end 
```

# c# - 实例化一个类 - 方法 'Subjects' 没有重载需要 '0' 参数

> ID：12822714
> 
> 赞同：0
> 
> 时间：2012-10-10T15:12:31.107
> 
> 标签：c#, asp.net

我在 Visual Studio 开发的 asp.net 2.0 网站中引用了一个 dll。提供 dll 的人说要引用它并实例化一个名为 Subjects 的类。

我已经引用了它，如果我输入：

```
Subjects mySubjects = new Subjects(); 
```

它似乎已“找到”，因为“主题”以浅蓝色文本显示。

如果我然后尝试通过编写以下代码来访问方法：

```
string ProjectSubject = mySubjects.GetSubject(ProjectID); 
```

再次，它似乎是在智能感知中“找到”的，只要您在 mySubjects 显示可调用的方法后键入句号。

到目前为止，一切都很好。但是，当我尝试运行该页面时，我得到一个编译错误，即：

方法 'Subjects' 没有重载需要 0 个参数。

我不明白。我以为你总是必须引用一个类

```
someClass myClass = new someClass(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T15:17:10.233

> 方法 'Subjects' 没有重载需要 0 个参数。

这意味着没有为`Subjects`. Intellisense 应该在您键入初始左括号时向您显示可能的选项，否则在对象浏览器中查找类以查看可能的构造函数（可能超过 1 个）。

也有可能在该类上*没有*定义公共构造函数，但是这不太可能，因为作者告诉您“实例化 Subjects 的实例”。同样，对象浏览器应该告诉你什么是可用的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T15:19:55.000

显然，Subjects 的构造函数需要一个参数。

我显然不知道您是否有任何关于您的程序集的文档。

但是您应该能够使用 Visual Studio 的“对象浏览器”功能来检查类型，并从那里找出它需要什么类型的参数。

# multithreading - 多线程地址空间

> ID：12822718
> 
> 赞同：1
> 
> 时间：2012-10-10T15:12:37.157
> 
> 标签：multithreading

线程有自己的调用栈，那么不同的线程共享什么样的内存。它们在进程的地址空间内是否有自己的堆栈内存？该内存是否足以产生 100 个线程？如果一个进程有一个对象 B，如果是 Java，它将在堆上创建。那么，该进程生成的线程如何能够访问堆上的该对象？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T19:41:33.593

> 不同线程共享的内存类型

“所有进程（用户模式）内存”在所有线程上都可用，这意味着您可以将存储在线程堆栈中的对象共享给其他线程。

> 它们在进程的地址空间内是否有自己的堆栈内存是的，每个线程都有自己的堆栈来运行。
> 
> 该内存是否足以产生 100 个线程？

是的，请检查[http://msdn.microsoft.com/en-us/library/windows/desktop/ms686774(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms686774(v=vs.85).aspx)

> 那么，该进程生成的线程如何能够访问堆上的该对象？

我想我在第一个问题中回答了这个问题

# jenkins - 将测试脚本分发给具有相同构建的从站

> ID：12822723
> 
> 赞同：12
> 
> 时间：2012-10-10T15:12:52.307
> 
> 标签：jenkins

我们当前的设置包括一个主控控制多个从机。通常，master会根据list向slave发布测试脚本。哪台机器完成脚本或空闲，它将继续列表。所有这些都针对同一个构建进行了测试。

我们正在朝着 CI 的方向发展，并希望做一些类似于我们当前计划的事情。我认为它的工作方式与主机构建的方式相同，然后分发给从机进行测试。这将如何完成？

编辑：只是为了澄清我的立场，我以前没有使用过 Jenkins，因此缺乏相关知识。在让我被遗忘之前，我只需要有人给我指出正确的方向，而不是要求用勺子喂食的解决方案。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-18T18:02:33.243

由于您不接受海德的回复，我假设您正在寻找更详细的答案。首先，如果您是 Jenkins 新手，我强烈推荐[Jenkins：权威指南](http://shop.oreilly.com/product/0636920010326.do)。Jenkins 使用起来并不难，但很难上手。这本书提供了一个很好的指导，从一开始就进入了运行 Jenkins 安装的一些更复杂的部分。现在回答你的问题。Jenkins 允许您快速尝试，而无需真正“安装”它，因此请**按照**此处进行操作。您还需要访问第二台计算机来制作临时从站（不用担心，没有真正的安装，所以只需使用同事的计算机）。

这些说明看起来很长，但这只是因为我正在走每一步。这不会花费太多时间。此外，请随时单击 Jenkins 中所有字段旁边的小问号。顺便说一句，当我引用某些内容时，请输入引号内的内容，而不是引号本身。

1.  转到[Meet Jenkins](https://wiki.jenkins-ci.org/display/JENKINS/Meet+Jenkins)并向下滚动到 Launch 按钮以启动 Jenkins，而无需安装任何东西。
2.  去`http://localhost:8080/`。看！詹金斯跑了！
3.  在左侧，单击**Manage Jenkins**，然后单击**Manage Nodes**项。
4.  在左侧，单击**新建节点**。将其命名为“Foo”，选择“Dumb Slave”，然后单击“确定”。
5.  将“# of executors”设置为 1（这是您希望此从站同时运行的构建数）。
6.  将“Remote FS root”设置为“c:\jenkins”或“/tmp”（这将在从机上创建一些文件，因此请使用具有写权限的目录）。
7.  将“标签”设置为“测试者”
8.  将“启动方法”设置为“通过 Java Web Start 启动从代理”（您可能不想在生产中这样做，但它可以让我们快速启动从代理）。
9.  点击**保存**
10.  点击左上角的**Jenkins返回主页面。**
11.  点击左侧的**新建作业。**
12.  将作业命名为“My build”并选择“free-style software project”并单击 OK。
13.  检查**Restrect 可以在哪里运行该项目**并为标签键入“master”（它甚至应该自动完成）。这使得构建只在主服务器上运行。
14.  在底部单击**Add build step**。
15.  如果你的master（当前机器）是Windows机器，选择“Execute Windows batch command”，否则选择“Execute shell”。
16.  无论哪种方式，对于命令类型“echo Building”。这不是必需的，但它可以让您看到构建确实做了您告诉它做的事情。
17.  在屏幕底部，单击**保存**。
18.  您现在应该位于“Project My Build”页面。单击左侧的**立即构建链接。**由于构建几乎没有做任何事情，它几乎立即完成。历史记录中出现一个带有蓝色圆圈的条目，表示构建成功。
19.  返回 Jenkins 主屏幕并添加一个**New Job**。
20.  将此命名为“我的测试”，使其成为另一个“自由式软件项目”，然后单击“确定”。
21.  再次，选中“限制此项目可以运行的位置”，但将标签设为“测试者”（同样，它应该自动完成）。
22.  向下滚动并再次单击**添加构建步骤**。根据**从属**计算机（例如，您同事的计算机）是什么，选择“Windows 批处理”或“shell”。
23.  输入“回声测试”
24.  点击底部的**保存。**
25.  现在是有趣的部分。转到您的另一台计算机（或告诉同事他们的前灯已打开并使用他们的计算机）。打开网络浏览器并转到 http:// *your-masters-ip-address* :8080/
26.  单击**管理 Jenkins**，然后单击**管理节点**。
27.  单击**Foo**，然后单击**启动**按钮。单击任何安全/“您确定”警告，您应该会看到一个小窗口，显示 Jenkins 已连接。现在你的奴隶正在运行。
28.  返回您的主计算机，转到您的 Jenkins 主屏幕，然后单击构建列表中的**我的测试**。
29.  在左侧，单击**立即构建**。这将需要更长的时间，因为它必须联系从属服务器并分出工作，但它应该完成并将构建添加到历史记录中。
30.  单击构建历史记录中的条目。然后，在左侧，单击**Console Output**。
31.  日志应该说构建是在 Foo 上远程执行的，并且有 echo 语句。呜呼！我们现在可以进行远程构建。
32.  最后，我们将构建链接在一起。导航回到“我的构建”，然后单击左侧的**配置。**
33.  在 Post-build Actions 部分，单击**Add post-build action**，然后选择“Build other projects”。在字段中输入“我的测试”（它应该自动完成）。单击保存。
34.  转到 Jenkins 主屏幕，然后单击“我的构建”右侧的**时钟/播放图标。**如果您仔细观察，您可能会看到作业出现在左侧的“Build Queue”或“Build Executor Status”中。
35.  等待一分钟左右，然后刷新页面，您应该会看到两个构建更新的“最后一次成功”时间。云应该散开，你应该听到天使的歌声，但暂时不要庆祝。

你现在有一个 master 做“build”，一个 slave 做“test”，一个 build 触发了测试。您可以添加更多从属服务器，只要它们具有“tester”标签，构建服务器就会自动分发。您还可以在构建之后进行许多测试，并让构建触发所有这些测试。这就是所有简单的事情，需要一些麻烦的事情是让 Jenkins 运行您的构建和测试。从小处着手，逐步向上。哦，说真的，去买我链接的那本书（它可以在死树和无 DRM 电子书中获得，不，我与 O'Reilly 或作者没有任何联系，它只是一本非常有用的书）所以你对 Jenkins 能做什么以及如何最好地适应你的系统和你想要什么有一个想法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-15T22:03:57.057

你是这个意思吗：

1.  转到从节点配置，并给从节点适当的标签，例如“unittest”。对您想要进行单元测试的所有从属重复此操作（请注意，如果需要，从属可以有许多标签）。

2.  转到作业配置，勾选“限制此作业可以运行的位置”，在此处键入“unittest”。

还要阅读这些领域的帮助文本！

对于更高级/复杂的 CI 设置，如果您想参数化作业可以运行的位置，还可以查看节点标签参数插件。

# joomla - joomla 类别列表覆盖以将 id 添加到每个列表项

> ID：12822726
> 
> 赞同：5
> 
> 时间：2012-10-10T15:12:55.477
> 
> 标签：joomla, html-lists, overriding

我正在尝试为 Joomla!s 类别列表输出中的每个列表项添加自定义样式，这给了我以下 html

```
<div class="blog">
  <div class="cat-children">    
    <ul>
      <li class="first">
        <span class="item-title"><a href="/hyt-hand-held-license-free">HYT</a>
        </span>
      </li>
      <li></li>
    </ul>
  </div>
</div> 
```

我认为我需要做的是添加如下内容：

```
<li id="myID<?php echo $this->item->catid; ?> "> 
```

问题是我找不到要覆盖的文件。我已经查看过`/templates/mytemplate/html/com_content/category/`，`/components/com_content/views/category/tmpl`但似乎没有一个文件在其中包含与`cat-chidren`.

所以我的第一个问题是我应该编辑哪个文件？我的第二个是最好的语法`this->item->[correct'Method'?]`（方法是正确的术语或变量，我对此有点动摇！）使用，以便每个列表项都有一个`id="myID[nameofarticle/subcatagory]"`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T15:45:07.720

您将在 /components/com_content/views/category/tmpl/default.php 中看到 cat-children

ul 在另一个加载的子模板 loadTemplate('children'); ?> ，即

/components/com_content/views/category/tmpl/default_children.php

如果你想修改 li 类，你可以在第 26 行粘贴这样的东西（你的覆盖不是核心文件 - 但可以只测试核心文件）

`<?php $class = ' class="cmyId' . $this->escape($child->title) . '"';?>`

这将使每个 li 显示为

所以这

```
<li<?php echo $class; ?>>
    <?php $class = ''; ?> 
```

变成这个

```
<?php $class =  ' class="cmyId' . $this->escape($child->title) . '"';?>
    <li<?php echo $class; ?>>
    <?php //$class = ''; ?> 
```

已在 2.5 安装上对其进行了测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T15:35:30.397

您应该覆盖存储在 components/com_content/views/ 中的几个文件 根据您要编辑的列表，您应该查看文件夹： - 文章 - 类别 - 类别 - 特色 在每个文件夹中，您都会看到一个名为的子文件夹'tmpl'，里面有一个'default.php'文件。这就是你要找的。

如果您想覆盖文件，请记住最佳做法是将替代文件放在模板的文件夹中，构建与原始文件所在的路径相似的路径（例如，对于文章文件夹：templates/YOURTEMPLATEFOLDER/html/com_content /article/default.php - 不需要 tmpl 文件夹，也不需要 views 文件夹）。

另一种方法，在我看来，更简单的方法可能是为每个类别设置不同的模板，然后为每个您喜欢的列表样式分配。

或者，更简单的是，您可以简单地编辑模板文件夹中的 index.php 文件，以便它根据 $catId 回显特定的 css 样式表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T15:47:33.017

当您的 HTML 代码显示您正在使用类别博客视图时，类别中的每个文章实例都由 blog_children.php 文件呈现，因为它显示 /components/com_content/views/category/tmpl/blog.php

```
<?php echo $this->loadTemplate('children'); ?> 
```

所以 /components/com_content/views/category/tmpl/blog_children.php 是您需要在模板 html 目录中编辑或覆盖的文件。

然后，您可以应用自定义样式，使用 $child->id 为每篇文章添加 id 或类。

# git - git checkout 自动合并本地修改

> ID：12822727
> 
> 赞同：8
> 
> 时间：2012-10-10T15:13:10.247
> 
> 标签：git, merge, git-checkout

我尝试在 shell 上执行以下命令

```
git init

echo "test1" > test1.txt
git add test1.txt
git commit -a -m "test1"

echo "test2" >> test1.txt

git branch test
git checkout test 
```

`text.txt`现在包含：

```
test1
test2 
```

结帐后将`test`所有本地修改从`master`获得合并分支。

为什么？

我预计由于本地更改而`git`拒绝结帐。`test`我预计 git 会要求提交或`stash`本地更改。

编辑：我使用 bash 脚本来执行这些命令。我得到以下输出：

```
r@r:/tmp/test$ ./createrepo 
Initialized empty Git repository in /tmp/test/.git/
[master (root-commit) 0407f5b] test1
 1 file changed, 1 insertion(+)
 create mode 100644 test1.txt
M       test1.txt
Switched to branch 'test' 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-10T16:15:24.683

`git`努力不丢失可能有价值的数据。在这种情况下，它实际上并没有合并分支，因为相关更改尚未提交。相反，当您执行 a 时`git checkout`，它会尝试保留新创建但尚未提交的修改，因此它会检查您请求的提交，并添加您未提交的更改。如果您真的想丢弃未提交的更改，请使用`git checkout -f`，或`git checkout`后跟`git reset --hard HEAD`. 有时，如果您尚未提交的更改无法干净地合并到您要签出的内容中，您将收到一条错误消息并且签出将失败。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T15:43:04.163

您是否在 git checkout 命令中使用过任何选项？我问是因为您描述的行为看起来像是使用“git checkout -f”时的行为。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T16:06:55.197

`git checkout` **替换**本地更改的文件。

`git merge` **合并**本地和传入的更改，提醒任何冲突。

如果这些命令不会删除传入提交中不存在的本地文件，则也不会。

只会`git reset --hard`完全清除本地更改。

# objective-c - CGContextRef 作为 OpenGL 上下文

> ID：12822736
> 
> 赞同：2
> 
> 时间：2012-10-10T15:13:34.397
> 
> 标签：objective-c, c, cocoa, opengl, cgcontextref

通常，我只会使用 NSOpenGLContext，但在这种情况下，我*必须*有一个 CGContextRef 作为 OpenGL 上下文，以支持我正在使用的其他一些框架。我的问题是：这可以做到吗？

我不能使用 glReadPixels() 来填充上下文，因为这样*做*会减慢速度。我必须在整个屏幕 (1440 x 900) 上每秒至少渲染 32 次，所以性能对我来说是一个非常重要的问题。有没有办法让 OpenGL 有效地绘制到 CGContextRef 中，还是我需要某种解决方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T03:36:52.880

由于似乎 1 个功能会导致使用 GLContext 和使用`glReadPixels()`而不是 CGContext 的问题。为什么不创建多个上下文？

[在此处](http://developer.apple.com/library/ios/#documentation/3DDrawing/Conceptual/OpenGLES_ProgrammingGuide/WorkingwithOpenGLESContexts/WorkingwithOpenGLESContexts.html)阅读有关共享上下文的信息，将 Context 专用于后台线程或操作队列，并将您的繁重操作读入其中并通过共享上下文访问它以在主线程上下文中呈现它。

如果您仍然**必须**使用 CGContextRef，您能告诉我们您正在使用的确切框架需要它吗？这里的人也许能够提供另一种解决方案

# asp.net-mvc - PetaPoco 复杂类型发布到控制器

> ID：12822737
> 
> 赞同：0
> 
> 时间：2012-10-10T15:13:36.513
> 
> 标签：asp.net-mvc, data-annotations, petapoco

根据我昨天提出的一个问题，我试图找到一种方法来动态创建更多文本框并将这些映射到我的视图模型，因此在发布到服务器时它将抓取所有动态（js）生成的文本框并发布到一个对象，例如一个列表。

举一个这个令人困惑的问题的例子：

我有一个标有“主要联系人”的文本框，工单创建者可以在此框中输入联系人姓名和电话号码。我想要做的基本上是将其切换到三个文本框。一个用于姓名、电子邮件和电话号码，而不是一个框。然后我将创建一些 javascript，它们将动态创建另外三个框以将另一个联系人添加到此列表集合中。然后，当用户提交表单以修改或创建票证时，它会将模型内的这个集合传递给控制器​​。然而，对于 petapoco，这有点令人困惑。让我向您展示控制器：

```
[HttpPost]
public ActionResult ModifyTicket(Ticket model)
{
    string userString = User.Identity.Name.Replace("ONHOLD\\", "");
    if (ModelState.IsValid)
    {
         model.CreatedDate = DateTime.Now;
         model.LastUpdateBy = Util.GetEmployeeIdByName(userString);
         model.LastUpdate = DateTime.Now;
         model.IsComplete = false;
         model.ClientString = Util.GetClientNameById(model.ClientId);
         model.LocationString = Util.GetLocationNameById(model.LocationId);

         model.Update();

        SuccessMessage = "You have successfully updated ticket number: " + model.TicketId + " for the following client: " + model.ClientString + ".";
        return RedirectToAction("Index");
    }
        ErrorMessage = "Woops! Something went wrong, please check back in a few moments, if the problem persists please contact development.";
        return RedirectToAction("Index");
} 
```

对此的简单回答是，出于这个确切原因，我的数据库模型将包含一个 List 对象。但是，我正在使用 PetaPoco，但我不完全确定它会如何完成。我可以手动将集合添加到我的数据库模型中，但是当我根据任何数据库架构更改重新生成模型时，我将丢失对文件所做的任何更改。

我还使用了一个部分类，我的视图使用 DataAnnotations 进行验证。然而，这个类与数据库模型相同，它只包含 DataAnnotations 以提供客户端验证。

如果有人理解我想要完成的工作，我将非常乐意提供更多信息来澄清任何缺失的部分。我只需要解决这个问题，因为我找不到解决这个问题的可靠方法！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T08:06:03.333

不完全确定您的意思，但是您可能已经知道[，使用 MVC 从/到列表的绑定很容易建模。](http://haacked.com/archive/2008/10/23/model-binding-to-a-list.aspx)至于保存这样的深层对象，我会使用 Ticket.List 上的 [Ignore] 属性，因此它不会被持久化并单独处理。我将联系人与 Ticket 对象分开加载，然后手动将它们添加到 Ticket 对象，或者使用连接查询并尝试一对多的方法一次性加载所有内容。

我认为您希望 Petapoco 能够同时更新所有内容？这不会发生，你需要打破它。很难从你到目前为止所写的内容中说出来。不会有很长的联系人列表（从它的声音来看），所以只需一个一个地插入或更新它们。

那么这可能会有所帮助，也可能不会。

# html - 全屏 api HTML5 和 Safari (iOS 6)

> ID：12822739
> 
> 赞同：17
> 
> 时间：2012-10-10T15:13:42.263
> 
> 标签：html, api, mobile-safari, ios6, fullscreen

我正在尝试使应用程序在 iOS 6 的 Safari 中以全屏模式（没有顶部栏）运行。代码如下：

```
var elem = document.getElementById("element_id");
if (elem.requestFullScreen) {
  elem.requestFullScreen();
} else if (elem.mozRequestFullScreen) {
  elem.mozRequestFullScreen();
} else if (elem.webkitRequestFullScreen) {
  elem.webkitRequestFullScreen();
} 
```

它在桌面浏览器上运行良好。但在 Mobile Safari (iOS) 6 中不起作用。

对这个问题有任何想法吗？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-10-10T15:36:55.990

不支持...

[http://caniuse.com/fullscreen](http://caniuse.com/fullscreen)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2018-11-04T22:08:42.880

在提出这个问题六年后......，以“webkit”为前缀的全屏 API 现在似乎可以在 iPad 上的 iOS 12.1 的移动 Safari 中工作，但不能在 iPhone 上工作。[CanIUse](https://caniuse.com/#feat=fullscreen)似乎还没有报道，到目前为止，我发现的唯一 Apple 信息是[“Safari 中的新功能”页面中](https://developer.apple.com/safari/whats-new/)有关 iOS 12 的行项目以及[发行说明](https://developer.apple.com/safari/technology-preview/release-notes/)和[推文](https://twitter.com/rmondello/status/1041739671775043596)：

昨天，我将我的 iPhone 和 iPad 从 iOS 11.x 更新到了 iOS 12.1。全屏 API 在 iPad 上的 Safari 中为我工作，但不适用于 iPhone。在 iPad 上，“alert(document.fullscreenEnabled)”显示“undefined”，但“alert(document.webkitFullscreenEnabled)”显示“true”。在 iPhone 上，两者都显示“未定义”。

使用以下脚本，我可以在 iPad 上的 Safari 中以全屏模式显示。

```
<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style>
        #target {
            width: 150px; height: 100px; padding: 50px 0 0 0;
            margin: 50px auto; text-align: center;
            background-color: tan;
        }
    </style>
</head>
<body>
    <div id="target">Click or touch me</div>
    <script>
        (function(w) {
            "use strict";
            var d = w.document;
            var t = d.getElementById("target");

            t.addEventListener("click", function() {
                d.documentElement.webkitRequestFullscreen();
                // Compare alternative to preceding line, calling
                // method on target element instead:
                // t.webkitRequestFullscreen();
                // And compare changing target's style on change:
                // t.style.width = "100%";
                // t.style.height = "100%";
            });

            // alerts "undefined" in iOS 12.1 Safari on iPad and iPhone
            alert(d.fullscreenEnabled);
            // alerts "true" in iOS 12.1 Safari on iPad, "undefined" on iPhone
            alert(d.webkitFullscreenEnabled);
        }(window));
    </script>
</body>
</html> 
```

在全屏显示时，iPad 上的 Safari 在左上角插入一个“X”的 UI 元素，用于触摸退出全屏。

[在 Site Point](https://www.sitepoint.com/use-html5-full-screen-api/)上玩2014 年全屏 API教程的[演示页面](http://blogs.sitepointstatic.com/examples/tech/full-screen/index2.html)在我的 iPad 上也运行良好。请注意，使用 2012 版 Site Point 教程的旧的、[过时的演示页面](http://blogs.sitepointstatic.com/examples/tech/full-screen/index.html "older, outdated, don't use")两次在 Safari 中冻结了我的 iPad，我不得不重新启动 iPad 才能逃脱。

在我的 iPad 上玩[screenfull.js 库](https://sindresorhus.com/screenfull.js/)的[演示页面也很有效。](https://github.com/sindresorhus/screenfull.js)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-05-10T15:37:12.390

你不能使用全屏。如果您正确设置了元标记，并将 Web 应用程序放在主屏幕上，那么您可以摆脱所有 safari 杂物，但您仍然可以使用 iOS 状态栏（连接、时钟、电池）。

```
<meta name="apple-mobile-web-app-capable"
  content="yes" />
<meta name="apple-mobile-web-app-status-bar-style"
  content="black-translucent" /> 
```

有很多资源，这是我一直在使用的资源：

[http://matt.might.net/articles/how-to-native-iphone-ipad-apps-in-javascript/](http://matt.might.net/articles/how-to-native-iphone-ipad-apps-in-javascript/)

Apple自己的文档也很好：

[http://developer.apple.com/library/safari/#documentation/AppleApplications/Reference/SafariHTMLRef/Articles/MetaTags.html](http://developer.apple.com/library/safari/#documentation/AppleApplications/Reference/SafariHTMLRef/Articles/MetaTags.html)

但是，简而言之，从 iOS 6.1 开始，您无法在 iOS 设备上部署全屏 Web 应用程序。状态栏将始终存在。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2017-03-15T08:35:51.033

[https://developer.apple.com/reference/webkitjs/htmlvideoelement](https://developer.apple.com/reference/webkitjs/htmlvideoelement)

```
if (elem.webkitEnterFullScreen) {
  elem.webkitEnterFullScreen();
} 
```

这个对我有用。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-06-20T18:48:24.940

下面滚动iOS中的状态栏。在你的 $(document).ready 中尽早调用它

```
$('body').scrollTop(1); 
```

这在目前最高版本 6.x 中有效，但似乎不适用于 iOS7 浏览器的 beta 版本。与往常一样，底部的浏览器工具栏是固定的。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-07-25T04:00:26.587

@Tom-Andraszek 部分正确。Apple 最近（截至 2019 年初）将 iPadOS 与 iOS 分离，现在`fullscreen api`仅支持 iPadOS Safari。

以下是如何为 iPadOS 12.x Safari 及更高版本的 Web 应用程序实现全屏功能：

[在 iPad Safari 上全屏显示。](https://bubblin.io/blog/going-fullscreen-with-javascript-on-ipad)

披露：在上述链接上共享的博客是我的。值得一提的是，iPadOS 上的 Chrome 和其他浏览器仍然不支持全屏 API。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-03-29T01:55:01.910

It works on iPhone (iOS 12.1.4) when you enable it:

> Settings -> Safari -> Advanced -> Experimental Features -> Fullscreen API

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-03-03T21:44:23.410

有一个非常好的 hack 可以模拟全屏模式，用户可以按照自己的意愿进入或离开它。我真的不知道它为什么可以工作，或者它是否可以在其他平台上工作，但在我的 iPhone Safari 上看起来就像预期的那样。

然而，这个解决方案有一些限制。它只能用于不使用超过屏幕所能提供的空间的 Web 应用程序，并且用户必须在页面加载后更改为横向模式。

给你的 html 和 body 100% 的高度和宽度

```
html, body {
  /* Avoid ugly scrollbars */
  overflow: hidden;
  /* Reset default browser paddings etc */
  margin: 0;
  padding: 0;
  border: 0;
  /* 100% size */
  width: 100%;
  height: 100%;
} 
```

现在是骇人听闻的部分。在顶部给你的身体 1px 边距

```
body {
  margin-top: 1px;
} 
```

您要做的最后一件事是将所有 Web 应用程序的内容放入一个额外的 div 中，位置固定，这样边距就不会影响它

```
.wrapper {
  position: fixed;
  left: 0px;
  right: 0px;
  top: 0px;
  bottom: 0px;
} 
```

等等瞧。旋转你的设备，看看这些丑陋的导航栏消失了。非常适合真正的全屏游戏。

我敢肯定，这可以以某种方式用作 polyfill，尽管不是每个人都想制作全屏游戏。

我希望它对某人有用。

达斯·穆恩

# javascript - Html，更改表格中的列顺序

> ID：12822741
> 
> 赞同：1
> 
> 时间：2012-10-10T15:13:44.807
> 
> 标签：javascript, jquery, html, knockout.js

我正在使用`knockout.js`lib 绑定​​数据。
让我们有下一个示例
[JSFiddle 示例](http://jsfiddle.net/KKhZg/364/)

我有数据表。表有列顺序 -

`Name`- `LastName`- `Middlename`-`Age`
我有 4 个功能

```
var namePosition = function()

var lastnamePosition = function()

var middlenamePosition = function()

var agePosition = function() 
```

我希望将表中列的顺序绑定到此函数返回的值。
例如
`namePosition`返回`4`
`lastnamePosition`返回`2`
`middlenamePosition`返回`1`
`agePosition`返回`3`
然后表应该有下一列顺序 -
`Middlename`- `LastName`- `Age`- `Name`。
你有什么想法，我该怎么做？（使用`knockout`或`jquery`）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T15:25:37.740

您可以使用一个简单的 JS 数组作为查找表：

```
var fields = [];
fields['Name'] = 4; 
fields['LastName'] = 2;
...etc... 
```

然后`fields['Name']`在代码中使用而不是数值。不需要函数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T16:34:58.410

Diodeus 说的是一个很好的方法。您可以使用这些函数生成订单数组：

```
var order = [];
order[namePosition()] = "name";
order[lastnamePosition()] = "last";
order[middlenamePosition()] = "middle";
order[agePosition()] = "age";

// order===["middle", "last", "age", "name"] 
```

然后将*order* observableArray 属性设置为您的对象，使用上述创建时的顺序作为初始值。

最后一件事是将单元格顺序和文本绑定到新值：

```
<table>
   <thead>  
     <tr data-bind="foreach:order">
       <td data-bind="text:$root.headers[$data]"></td>
    </tr>
 </thead>
  <tbody data-bind="foreach:users">   
    <tr data-bind="foreach:$root.order">
        <td><span data-bind="text:$parent[$data]"></span></td>
    </tr>
  </tbody>
</table> 
```

[关于 $root 和 $parent 的信息](http://knockoutjs.com/documentation/foreach-binding.html)。

使用当前方法，您可以通过如下代码动态更改列顺序：

```
model.order(["name", "last", "age", "middle"]) 
```

这里的例子：http: [//jsfiddle.net/Klaster_1/Pw2VE/1/](http://jsfiddle.net/Klaster_1/Pw2VE/1/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T15:58:05.987

我已经从表格将具有标题并且这些标题也需要重新排序的角度进行了处理。如果不是这种情况，您可能完全可以忽略这个答案。:)

我对 Knockout 一点也不熟悉——我不能确定这不是代码恐怖。

但是，这个小提琴会将列的顺序更改为您在示例中给出的顺序。但是，这些值是硬编码的（如果它是一种合适的方法）不应该（？）制定一种将它们移动到任意位置的方法太麻烦。

这里：http: [//jsfiddle.net/enhzflep/KKhZg/368/](http://jsfiddle.net/enhzflep/KKhZg/368/)

# javascript - 从纪元日期显示本地时间

> ID：12822745
> 
> 赞同：4
> 
> 时间：2012-10-10T15:13:53.607
> 
> 标签：javascript, date, timezone, epoch, timezone-offset

我正在尝试使用 javascript 纪元日期显示本地时间保存记录的时间。问题是纪元日期似乎“卡在”CDT 上。

假设我在 CDT 上午 9:18 保存记录，这作为 js 纪元日期值 1349896693626 进入数据库。我的代码如下：

```
var savedTime = 1349896693626;
var sDate = new Date();
sDate.setTime(Number(savedTime));
var offset = sDate.getTimezoneOffset();
//grabbing offset and changing it to milliseconds to adjust time
var milliOffset = offset * 60 * 1000;
var adjustedDate = Number(savedTime) - milliOffset;
var displayDate = new Date(adjustedDate);
alert("date is " + displayDate); 
```

我希望 displayDate 显示上午 9:18，如果我在 CDT，它会显示，但如果我移动到 PDT，它会显示上午 5:18，我不明白为什么。就像我必须将偏移量硬编码为 5 小时（CDT 偏移量）才能使其工作，但这没有任何意义。谁能解释发生了什么？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T16:40:11.343

To display a particular time zone string, ignore the local timezone.

You only care about the GMT time, and the correct offset for the targetted time zone.

Central time is either 6 or 5 hours behind GMT, depending on the range that DST applies.

```
// standard time offsets
Date.tzones={
    N:['Newfoundland', -210],
    A:['Atlantic', -240],
    E:['Eastern', -300],
    C:['Central', -360],
    M:['Mountain', -420],
    P:['Pacific', -480],
    AK:['Alaska', -540],
    HA_:['Hawaii-Aleutian (Aleutian)', -600],
    HA:['Hawaii-Aleutian (Hawaii)', -600, -1]
};

//find the offset, accurate for US time zones since 2006
Date.dstOff= function(d, tz){
    var off= tz[1], countstart, countend, dstart, dend;
    var y= d.getUTCFullYear();
    if(off  && tz[2]!= -1){
        countstart= 8, countend= 1,
        dstart= new Date(Date.UTC(y, 2, 8, 2)),
        dend= new Date(Date.UTC(y, 10, 1, 2));
        while(dstart.getUTCDay()!== 0) dstart.setUTCDate(++countstart);
        while(dend.getUTCDay()!== 0) dend.setUTCDate(++countend);
        dstart.setUTCMinutes(off);
        dend.setUTCMinutes(off);
        if(dstart<= d && dend>= d) off+= 60;
    }
    return off;
}
//format the result:

Date.short_months= ['Jan', 'Feb', 'Mar', 'Apr',
'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];

Date.toTZString= function(d, tzp){
    d= d? new Date(d):new Date();
    tzp= tzp || 'G';
    var h, m, apm= 'pm', off, dst,
    label= tzp+'ST', str,
    tz= Date.tzones[tzp.toUpperCase()];
    if(!tz) tz= ['Greenwich', 0];
    off= tz[1];
    if(off){
        dst= Date.dstOff(d, tz);
        if(dst!== off) label= tzp+'DT';
        d.setUTCMinutes(d.getUTCMinutes()+dst);
    }
    else label= 'GMT';
    h= d.getUTCHours();
    m= d.getUTCMinutes();
    if(h>12) h-= 12;
    else if(h!== 12) apm= 'am';
    if(h== 0) h= 12;
    if(m<10) m= '0'+m;
    var str= Date.short_months[d.getUTCMonth()]+' '+d.getUTCDate()+', ';
    return str+ h+':'+m+' '+apm+' '+label.toUpperCase();
}; 
```

**var d= new Date(1349896693626);**

alert('Central time: '+Date.toTZString(d,'C'));

returned value: (String) **Central time: Oct 10, 2:18 pm CDT**

# javascript - SlickGrid 没有从返回 JSON 的 Ajax 调用中正确填充

> ID：12822746
> 
> 赞同：1
> 
> 时间：2012-10-10T15:13:53.943
> 
> 标签：javascript, slickgrid

我有一个 slickgird 保存到数据库和计算工作。但是我的问题是从数据库返回数据以填充 slickgrid 时。我正在调用一个 Ajax 查询，它以以下格式返回数据，

```
[
{
    'HeaderService': 'ServicerReview',
    'Service': '',
    'Numberof': '',
    'at': '',
    'Charged': '',
    'Total': '',
    'Total2': '',
    'Discount': '',
    'FFO': '',
    'EC': '',
    'ECat': '',
    'ECCost': '',
    'ECCostTotal': '',
    'ECCostTotal2': '',
    'Margin': ''
},
{
    'HeaderService': '',
    'Service': 'SeniorReviewer',
    'Numberof': '1',
    'at': '@',
    'Charged': '£600.00',
    'Total': '£600.00',
    'Total2': '',
    'Discount': '',
    'FFO': '',
    'EC': '1',
    'ECat': '',
    'ECCost': '£350.00',
    'ECCostTotal': '£350.00',
    'ECCostTotal2': '',
    'Margin': ''
},    
 .. and so on.
] 
```

（。是相同结构的其他记录）。它填充了一个名为`currentData` 然后我装饰网格的变量

```
 var columns = [{ id: "HeaderService", name: "Category", field: "HeaderService", options: serviceHeaders, editor: Slick.Editors.SelectOption, width: 200 },
           { id: "Service", name: "Service", field: "Service", options: serviceActuals, editor: Slick.Editors.SelectOption, width: 150 },
           { id: "Numberof", name: "No", field: "Numberof", editor: Slick.Editors.Text, width: 50 },
           { id: "at", name: "", field: "at", width: 30 },
           { id: "Charged", name: "Per Unit", field: "Charged", editor: Slick.Editors.Text },
           { id: "Total", name: "Total", field: "Total", editor: Slick.Editors.Text },
           { id: "Total2", name: "Sub Total", field: "Total2", editor: Slick.Editors.Text },
           { id: "Discount", name: "Discount", field: "Discount", options: ",Yes", editor: Slick.Editors.SelectOption, cssClass: "greenbackground", width: 50 },
           { id: "FFO", name: "Fixed Fee", field: "FFO", editor: Slick.Editors.Text, cssClass: "greenbackground" },
           { id: "EC", name: "EC", field: "EC", editor: Slick.Editors.Text, width: 50 },
           { id: "ECat", name: "Cat", field: "ECat", editor: Slick.Editors.Text, width: 30 },
           { id: "ECCost", name: "Cost", field: "ECCost", editor: Slick.Editors.Text },
           { id: "ECCostTotal", name: "CostTotal", field: "ECCostTotal", editor: Slick.Editors.Text },
           { id: "ECCostTotal2", name: "CostTotal2", field: "ECCostTotal2", editor: Slick.Editors.Text },
           { id: "Margin", name: "Margin", field: "Margin", editor: Slick.Editors.Text }, ];

var options = {
    enableCellNavigation: true,
    enableColumnReorder: false,
    editable: true,
    cellHighlightCssClass: "changed"
};

var currentData;

$(function () {
    var json = null;
    $.ajax({
        async: false,
        global: false,
        type: 'GET',
        url: '@Url.Action("GetDetailsforQuote")',
        dataType: "json",
        success: function (data) {
            currentData = "[" + data.toString() + "]";
            debugger;
            return data;
        }
    });

    data = currentData;
    alert(data);
    grid = new Slick.Grid("#myServicesGrid", data, columns, options); 
```

但是网格随后显示在屏幕上，列很好，但有很多空行，没有数据（数据应该只有 6 条记录）。对我做错了什么有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T11:42:49.160

明白了...必须添加

```
 data = eval("[" + currentData + "]");

    grid = new Slick.Grid("#myServicesGrid", data, columns, options); 
```

感谢您的关注。

# ssl - SSL 证书错误

> ID：12822747
> 
> 赞同：1
> 
> 时间：2012-10-10T15:14:02.247
> 
> 标签：ssl, https, ssl-certificate, keytool, pkcs#12

我有一个 webstart 应用程序，我想在连接到服务器时进行客户端身份验证。我创建了使用 certmgr.exe 安装的 pkcs12 证书，它工作正常。我想为每个使用该应用程序的客户做这件事。我该怎么做？如果我分发证书

我收到一个 bad_certificate 错误。我知道证书没有问题，因为如果您使用浏览器安装证书，它将起作用。

我使用创建了公钥

`keytool -export -alias myKey -keystore abc.p12" -storetype PKCS12 -storepass mypassword -rfc -file abc.cer`

然后我将此文件导入到我的服务器的密钥库中以使用以下方式进行相互身份验证：

keytool -import -v -file abc.cer -keystore C:\apache-tomcat-7.0.26\tomcat.keystore" -storepass mypassword

在此之后，如果我在 certmgr 中安装 abc.p12 证书，它工作正常。

为了能够从 Java 中完成，我需要一个信任库。我创建了一个信任库，在其中导入公钥

`>keytool -import -keystore client-truststore.jks -file abc.cer`

如果我尝试使用访问服务器

`-Djavax.net.ssl.keyStore=abc.p12 -Djavax.net.ssl.keyStorePassword=mypassword -Djavax.net.ssl.trustStore=trustore.jks -Djavax.net.ssl.trustStorePassword=mypassword`

我不确定我是否做对了。请让我知道你的想法。

我应该做什么？请让我知道你的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T12:55:29.870

您应该已将其导入服务器的信任库，而不是其密钥库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-15T18:24:16.543

您必须将证书导入您的证书文件，在 JDK 中是 cacerts 文件。之后，您必须查看证书是否存在于文件中，并且您将在每个客户端上执行此操作。

关于信任库的事情是您创建自己的 JKS 文件。

# asp.net - Telerik.web.ui 设计错误？

> ID：12822748
> 
> 赞同：0
> 
> 时间：2012-10-10T15:14:02.243
> 
> 标签：asp.net, ajax, telerik

我在 Visual Studio 2010 中出现以下错误，在页面设计模式下的 asp.net 中，c#

> 无法创建设计器“Telerik.web.ui.RadTextBox”，Telerik.Web.UI，版本=2011.2.712.35，文化=中性，PublicKeyToken=121FAE78165BA3D4

谁能帮我解决？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T15:20:01.740

尝试升级到[最新`Telerik`版本](http://www.telerik.com/products/aspnet-ajax/whats-new/release-history/q2-2012-beta-version-2012-2-522.aspx)。

# vba - 循环直到网页元素不是什么的逻辑

> ID：12822749
> 
> 赞同：2
> 
> 时间：2012-10-10T15:14:12.777
> 
> 标签：vba

*使用带有 vba 的 HTML 对象库 *(CAS 设置为浏览器实例 (shdocvw))

```
Set HTMLDoc = CAS.document.frames("MainFrame").document 'pull the main frame    

Do Until Not HTMLDoc Is Nothing
DoEvents
Loop 
```

我认为这是不正确的，因为它只会设置一次 HTMLDoc，如果它什么都不是，它会一遍又一遍地循环自己，检查它是否存在，但因为它只被调用一次。恕我直言，更好的方法是检查元素并循环直到元素存在，因为页面可以加载，但我从数据库中提取的元素需要多半秒左右。我只是不确定如何编写循环来继续设置 htmldoc，然后继续检查其中的元素是否不是什么。（重点是即使我的等待计时器没有等待足够长的时间，它也不应该在元素存在之前继续进行）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T21:41:23.437

如果您想等待特定元素：

```
 Dim el As Object

    Do
        Set el = Nothing
        On Error Resume Next
        Set el = CAS.document.frames("MainFrame").document.getElementById("idHere")
        On Error GoTo 0
        DoEvents
    Loop While el Is Nothing 
```

不过，您可能希望建立最大等待时间，因此如果由于某种原因该元素从未出现，您就不会无休止地循环。

# objective-c - UITextField becomeFirstResponder 在 iOS6 中不起作用

> ID：12822750
> 
> 赞同：0
> 
> 时间：2012-10-10T15:14:13.603
> 
> 标签：objective-c, ios, uitextfield, ios6

我有一个 UITextField，它是 UIView 的子视图，它设置为 UITableView 的 tableHeaderView。由于某种原因，在 iOS6 中单击时文本字段不会调用键盘（在以前的操作系统中它工作得很好）。

实施非常简单。任何想法可能是什么问题？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T08:49:49.783

这是代码：

```
_tracksTableView.tableHeaderView = _tableHeaderView;  //this view contains the     _playlistNameTextField

- (IBAction)saveButtonClicked
{
    [self toggleTextField];
}

- (void)toggleTextField
{
   if (_textFieldVisible)
   {

    [_playlistNameTextField resignFirstResponder];
    [_playlistNameTextField fadeOut:0.2 delegate:self];
    [_saveAsPalylistButton fadeIn:0.2 delegate:self];
            _textFieldVisible = NO;
    }
   else 
   {
            [_playlistNameTextField setText:@""];
            [_saveAsPalylistButton fadeOut:0.2 delegate:self];
            [_playlistNameTextField fadeIn:0.2 delegate:self startSelector:nil      stopSelector:@selector(launchKeyboard)];
            UIBarButtonItem *barButton = [self barButtonItemWithTitle:NLS(@"Cancel") action:@selector(toggleTextField)];
            [barButton.customView setFrame:CGRectMake(0.0, 0.0, barButton.customView.frame.size.width, _playerTitleView.frame.size.height)];
            self.navigationItem.leftBarButtonItem = barButton;
           _textFieldVisible = YES;
    }
}

- (void)launchKeyboard
{
    [_playlistNameTextField becomeFirstResponder];
} 
```

# gwt - 如何更新 DataSource 字段值？

> ID：12822752
> 
> 赞同：0
> 
> 时间：2012-10-10T15:14:17.397
> 
> 标签：gwt, smartgwt

我需要更新 DataSourceTextField。基本上我在我的代码中这样做：

```
 DataSourceTextField partDataSourceField = new DataSourceTextField(
            partFieldName, constants.partTitle());
    partDataSourceField.setValueMap(partCodesList);

    documentsResultDataSource.setFields(partDataSourceField,
            titleDataSourceField); 
```

该代码在 DataSource 上生成一个“部分”列表，供我过滤结果。

我一直在尝试的是动态更改此列表以将其设置为仅显示结果中可用的值。我试过这个没有用：

```
 DataSourceField partField = documentsResultDataSource.getField(partFieldName);
        LinkedHashMap<String, String> partCurrentCodesList = new LinkedHashMap<String, String>();
        partCurrentCodesList.put("Test", "Test");
        partField.setValueMap(partCurrentCodesList); 
```

有可能完成我需要的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T18:38:28.007

我删除了 DataSourceTextField 然后：

> filesResultDataSource.setFields(partDataSourceField, titleDataSourceField);

这是次优但我找到的最佳解决方案。

# tridion - Tridion - 将所选出版物的“副本”创建到单独的数据库中

> ID：12822755
> 
> 赞同：2
> 
> 时间：2012-10-10T15:14:27.630
> 
> 标签：tridion

是否存在可以从数据库中提取一组出版物和相关项目等并在单独的数据库中重新创建它们的软件？

我的数据库是 203 GB，包含数百个酒吧；现在我只想在这个泥潭中与少数几家酒吧合作。删除所有内容需要一个绝对的时间，主要是由于我正在运行的 SQL 框的性能不佳（无法更改）

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-10T15:52:20.183

不是您当前问题的答案，但如果您还没有这样做，使用清除工具从数据库中删除旧版本的内容等将提高性能。

进行良好的定期数据库维护（重新索引、统计）也将提高性能。要研究的选项：

使用统计信息
进行全扫描 截断数据库（不是 Tridion 日志数据库）的 SQL 日志 从 Tridion 日志数据库
中清除记录

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-10T15:28:51.980

也许我在这里遗漏了一些东西，但你能不能只用你想要的出版物的 Content Porter 进行导出。然后使用数据库管理器创建一个新的 tridion_cm 数据库，将您的 CMS 连接到新数据库并将项目导入新系统？

# jquery - 单击锚标记时更改选择选项

> ID：12822760
> 
> 赞同：-1
> 
> 时间：2012-10-10T15:14:45.333
> 
> 标签：jquery, html, css, select, options

我要做的是在单击锚标记时**替换/更改**标记内的文本。`select`如您所见，它只更改一次。我究竟做错了什么？

**HTML**

```
<div id="navigation">
    <ul>
        <li><a id="slideOne" href="#blue">Blue Product</a></li>
        <li><a id="slideTwo" href="#red">Red Product</a></li>
    </ul>
</div>

<select>
    <option disabled="disabled" selected="selected">Select Color</option>
    <option value="blue">Blue</option>
    <option value="red">Red</option>
</select>​ 
```

**JS**

```
$('#navigation a').click(function() {
    $('select').val(this.id).change();
});​ 
```

这是我的[jsFiddle](http://jsfiddle.net/RLrbk/1/)。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T15:20:05.110

使用类名来存储您的颜色属性，然后在您的事件中使用它们。

```
<div id="navigation">
    <ul>
        <li><a id="slideOne" class="blue" href="#blue">Blue Product</a></li>
        <li><a id="slideTwo" class="red" href="#red">Red Product</a></li>
    </ul>
</div> 
```

JS：

```
$('#navigation a').click(function() {
    $('select').val($(this).attr('class'))
}); 
```

​</p>

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T15:21:47.200

您将获得与您的选项完全不匹配的锚的 ID。

你可以这样做

```
$('#navigation a').click(function() {
    $('select').val(this.href.split('#')[1]).change();
});​ 
```

[小提琴](http://jsfiddle.net/wirey00/DaVFw/)

正如@destroy 建议的那样，您也可以使用 .slice(1)

```
$('#navigation a').click(function() {
    $('select').val($(this).attr('href').slice(1)).change();
});​ 
```

[切片小提琴](http://jsfiddle.net/wirey00/pKQVc/)

或 .replace()

```
$('#navigation a').click(function() {
    $('select').val($(this).attr('href').replace('#','')).change();
});​ 
```

[更换小提琴](http://jsfiddle.net/wirey00/CT5ec/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T15:17:57.793

锚的 id 值没有与 select 中的值映射 .. 所以它们之间没有关系..

尝试改用**href**属性...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-10T15:20:48.457

您的 js 应如下所示：

```
$('#navigation a').click(function() {
    var lookup={
        'slideOne' : 'blue',
        'slideTwo' : 'red'
    }
    var target = lookup[this.id];
    $("select option[val=" + target +"]").attr("selected","selected") ;
});​ 
```

更好的选择是使用可以消除对查找对象的依赖的 href 属性

# python - python 2、matplotlib 1.1.1 中的 pylab.ion() 以及在程序运行时更新绘图

> ID：12822762
> 
> 赞同：22
> 
> 时间：2012-10-10T15:14:48.097
> 
> 标签：python, matplotlib

我想做的是让脚本计算一些东西，准备一个图并将已经获得的结果显示为 pylab.figure - 在 python 2（特别是 python 2.7）中，具有稳定的 matplotlib（即 1.1.1）。

在 python 3（带有 matplotlib git build ... 版本 1.2.x 的 python 3.2.3）中，这工作正常。作为一个简单的例子（通过 time.sleep() 模拟一个冗长的计算）考虑

```
import pylab
import time
import random

dat=[0,1]
pylab.plot(dat)
pylab.ion()
pylab.draw()    
for i in range (18):
    dat.append(random.uniform(0,1))
    pylab.plot(dat)
    pylab.draw()
    time.sleep(1) 
```

在 python 2（版本 2.7.3 vith matplotlib 1.1.1）中，代码运行干净，没有错误，但没有显示图形。python2解释器的一些试验和错误似乎建议用pylab.show()替换pylab.draw()；这样做一次显然就足够了（不像在每次更改/添加到情节后调用它）。因此：

```
import pylab
import time
import random

dat=[0,1]
pylab.plot(dat)
pylab.ion()
pylab.show()    
for i in range (18):
    dat.append(random.uniform(0,1))
    pylab.plot(dat)
    #pylab.draw()
    time.sleep(1) 
```

但是，这也不起作用。同样，它运行干净但不显示图形。似乎只有在等待用户输入时才会这样做。我不清楚这是为什么，但是当将 raw_input() 添加到循环中时，最终会显示该图

```
import pylab
import time
import random

dat=[0,1]
pylab.plot(dat)
pylab.ion()
pylab.show()    
for i in range (18):
    dat.append(random.uniform(0,1))
    pylab.plot(dat)
    #pylab.draw()
    time.sleep(1)
    raw_input() 
```

有了这个，脚本当然会在显示绘图时等待用户输入，并且在用户点击输入之前不会继续计算数据。当然，这不是本意。

这可能是由不同版本的 matplotlib（1.1.1 和 1.2.x）或不同的 python 版本（2.7.3 和 3.2.3）引起的。

有没有什么方法可以用稳定的（1.1.1）matplotlib 来完成上面的脚本（第一个）在 python 3，matplotlib 1.2.x 中所做的事情： - 计算数据（在上面的例子中需要一段时间由 time.sleep()) 在循环或迭代函数中模拟，并且 - （同时仍在计算）显示在先前迭代中已经计算的内容 - 并且不打扰用户不断按 Enter 以继续计算

谢谢; 我将不胜感激任何帮助...

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-10-10T18:48:11.587

您希望该`pause`函数让 gui 框架有机会重新绘制屏幕：

```
import pylab
import time
import random
import matplotlib.pyplot as plt

dat=[0,1]
fig = plt.figure()
ax = fig.add_subplot(111)
Ln, = ax.plot(dat)
ax.set_xlim([0,20])
plt.ion()
plt.show()    
for i in range (18):
    dat.append(random.uniform(0,1))
    Ln.set_ydata(dat)
    Ln.set_xdata(range(len(dat)))
    plt.pause(1)

    print 'done with loop' 
```

您不需要`Line2D`每次通过都创建一个新对象，您只需更新现有对象中的数据即可。

文档：

```
pause(interval)
    Pause for *interval* seconds.

    If there is an active figure it will be updated and displayed,
    and the gui event loop will run during the pause.

    If there is no active figure, or if a non-interactive backend
    is in use, this executes time.sleep(interval).

    This can be used for crude animation. For more complex
    animation, see :mod:`matplotlib.animation`.

    This function is experimental; its behavior may be changed
    or extended in a future release. 
```

一个真正过度杀戮的方法是使用`matplotlib.animate`模块。另一方面，如果需要，它为您提供了一种保存数据的好方法（摘自我对[Python-1 second plots continuous presentation](https://stackoverflow.com/questions/12679013/python-1-second-plots-continous-presentation)的回答）。

[例子](http://matplotlib.org/examples/animation/dynamic_image.html)，[api](http://matplotlib.org/api/animation_api.html)，[教程](http://jakevdp.github.com/blog/2012/08/18/matplotlib-animation-tutorial/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-03-20T02:05:59.133

正如@tcaswell 建议的那样，一些后端（根据我的经验“Qt4Agg”）需要该`pause`功能。

其他后端（根据我的经验“TkAgg”）似乎只是更新`draw()`而不需要`pause`. 所以另一个解决方案是[切换你的后端](http://matplotlib.org/faq/usage_faq.html#what-is-a-backend)，例如使用`matplotlib.use('TkAgg')`.

# ios - pathForResource 在 ios6 上不起作用

> ID：12822763
> 
> 赞同：1
> 
> 时间：2012-10-10T15:14:51.040
> 
> 标签：ios

对不起，如果这是初级的。把我的头撞到它上面。我的应用在 iOS5.1 及更低版本中运行良好，但无法访问我在 ios6 的 Supporting Files 文件夹中的 .txt 文件。它总是返回“null”。我对此进行了研究并检查了捆绑包，一切都在那里。该表列出了大约 8 位发言者。单击时，它应该拉取从 .txt 文件加载的 DetailView。

...[代码]...

```
else if (self.makeLabel.text == @"Peter Sengenberger") {
            NSString *filePath = [[NSBundle mainBundle] pathForResource:@"sengenberger" ofType:@"txt"];

            if (filePath) {
                NSString *myText1 = [NSString stringWithContentsOfFile:filePath
                                                              encoding:NSUTF8StringEncoding error:nil];
                if (myText1) {

                    textData= [[UITextView alloc] initWithFrame:CGRectMake(5,0, 280,200)]; //size.height-30 )];
                    textData.text = myText1;
                    [textData setFont:[UIFont systemFontOfSize:14]];
                    [textData setBackgroundColor:[UIColor clearColor]];
                    [textData setTextColor:[UIColor blackColor]];
                    textData.editable = NO;
                    textData.dataDetectorTypes = UIDataDetectorTypeLink;

                    [textScroll addSubview:textData];

                }

            }

        } // end if 
```

谢谢你的帮助！

# jquery - 正则表达式和 jQuery 选择“(xy)”，其中 x 和 y 是任意字母

> ID：12822767
> 
> 赞同：0
> 
> 时间：2012-10-10T15:15:02.800
> 
> 标签：jquery, regex

选择“(xy)”实例的 Javascript/jQuery 正则表达式是什么，其中 x 和 y 是字母表中的任何字母？示例：(en)、(fr)、(es)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T15:17:02.273

```
/\([a-z][a-z]\)/ 
```

或者

```
/\([a-z]{2}\)/ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T15:16:40.687

会是这样的

```
"\([a-z]{2}\)" 
```

# vb6 - 注册 COM 互操作始终在 Visual Studio 2012 中运行

> ID：12822769
> 
> 赞同：3
> 
> 时间：2012-10-10T15:15:16.083
> 
> 标签：vb6, visual-studio-2012, com-interop

我有一个已经`Register for COM Interop`检查过的几个项目的解决方案。

我有一个引用生成的 TLB 的 Visual Basic 6 项目。VB6 的一个问题是当它引用 dll/tlb 时，它会锁定该文件。

使用 Visual Studio 2010，除非我正在重新构建或对这些互操作项目之一进行更改，否则我可以构建/运行解决方案（打开 VB6 项目），而不会发现一个或多个程序集被锁定.

然而，使用 Visual Studio 2012，即使是在没有任何改变的简单构建上，显然它总是会进行 regasm，这使我无法调试我的 VB6 项目。

Visual Studio 的这个在构建时运行 regasm 的新*功能*是否可以关闭？

**编辑：请**允许我简化：

*   使用 Visual Studio 2010，我点击`Build-->Build Solution`并检查了我的一个程序集的输出，该程序集标记为`Register for COM Interop`并且文件没有更改。
*   使用 Visual Studio 2012，我`Build-->Build Solution`检查了同一个程序集，它已经更新，并且每次我点击`Build Solution`.

我希望 Visual Studio 2012 中的行为与 2010 年一样。

**编辑（再次）：** 我将此发布到[Microsoft Connect](https://connect.microsoft.com/VisualStudio/feedback/details/767965/register-for-com-interop-always-runs-in-visual-studio-2012)。如果有人在那里回答或发布解决方法，我会敦促他们也在这里发布答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T13:25:26.780

我在运行 VB6 和 VS20XX 时总是遇到这样的问题，但我总是进行重建。我的建议是停止使用 VB6 进行测试。我发现简单地创建一个测试项目并在 .NET 中对我的 .NET 代码进行所有测试要容易得多。这应该只需要少量的设置，但在我看来这是非常值得的。

我知道这不是您特定问题的答案，但它提供了替代方案。就您所描述的问题而言，我无法复制行为的变化。我一开始只打开 VS201X，重新构建完整的解决方案，打开 VB6 并添加对公开 COM DLL 的引用。我没有注意到任何意外。

1.  只要我没有更改 COM DLL 中的任何内容，构建就可以正常工作
2.  如果我在文件被锁定时更改了 COM DLL 的代码，则构建失败
3.  由于文件被锁定，重建失败

# rabbitmq - RabbitMQ 突然收不到来自 Spring AMQP 的消息

> ID：12822774
> 
> 赞同：0
> 
> 时间：2012-10-10T15:15:39.293
> 
> 标签：rabbitmq, spring-amqp, spring-rabbit

我一直在将我的开发环境从 Linux 转移到 Mac，突然间我面临着奇怪的 RabbitMQ 行为。

我有 Ubuntu 盒子，在上面运行 RabbitMQ 2.8.7-1，我在同一个盒子上做了开发工作。我一直在运行我的测试代码（如下所示），Rabbit 很高兴收到所有消息。

```
// using spring-rabbit 1.1.1.RELEASE
AmqpTemplate amqpTemplate = (AmqpTemplate) context.getBean("amqpTemplate");
amqpTemplate.convertAndSend("bar.queue", "Foo message"); 
```

现在我搬到了 Mac 机器（主机 A），我在其中运行带有 Linux 的 VirtualBox（主机 B），在该机器上运行 RabbitMQ，其配置与以前的 Linux 机器相同。我在 Mac 上运行我的开发环境，它在 VM 中调用 Rabbit :)。但是什么也没来，所以我使用 Wireshark 来追踪通信，这似乎还可以：

```
. . . .
B > A: Connection.Start
A > B: Connection.Start-Ok
B > A: Connection.Tune
A > B: Connection.Tune-Ok
A > B: Connection.Open
B > A: Connection.Open-Ok
A > B: Channel.Open
B > A: Channel.Open-Ok
A > B: Basic.Publish (bar.queue)
A > B: Content-Header (text/plain)
A > B: Content-Body (Foo message)
A > B: Channel.Close (200-OK)
B > A: [[TCP ACK for Channel.Close]]
. . . . 
```

所以看起来消息已经收到，但可能没有被代理处理？登录客户端也告诉我消息已发布。

```
17:09:37.450 [main] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'amqpTemplate'
17:09:37.576 [main] DEBUG o.s.a.r.c.CachingConnectionFactory - Creating cached Rabbit Channel from AMQChannel(amqp://guest@hostB:5672/,1)
17:09:37.611 [main] DEBUG o.s.amqp.rabbit.core.RabbitTemplate - Executing callback on RabbitMQ Channel: Cached Rabbit Channel: AMQChannel(amqp://guest@hostB:5672/,1)
17:09:37.612 [main] DEBUG o.s.amqp.rabbit.core.RabbitTemplate - Publishing message on exchange [], routingKey = [bar.queue] 
```

我完全不知道从哪里开始解决问题，为什么它以前可以工作而不是现在，问题可能出在哪里？

编辑：好的，我尝试从 RabbitMQ 教程中实现简单的发送器，它看起来像挂在 close() 上，因为应用程序仍在运行并且未到达 close() 之后的代码。

```
channel.basicPublish(exchangeName, routingKey, MessageProperties.PERSISTENT_TEXT_PLAIN, messageBodyBytes);
channel.close();
// this is never reached and app still running :-o
conn.close(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T00:50:01.957

您的 VirtualBox 上有多少可用磁盘空间？

这看起来与我的问题非常相似。我在 Windows 7 x64 下从 C# 调用 BasicPublish 方法。RabbitMQ 安装在同一台机器上。该代码与您的代码挂在同一行。当我将 BasicPublish 放在 TxSelect 和 TxCommit 方法之间时，程序在 TxCommit 处挂起。

一段时间后，我意识到我的硬盘几乎已满（不记得了，但大约有 200MB 的可用空间）。我释放了一些空间，这很有帮助。

# sql-server - 在 Windows 身份验证实体框架中选择当前用户以外的其他用户

> ID：12822775
> 
> 赞同：0
> 
> 时间：2012-10-10T15:15:44.023
> 
> 标签：sql-server, visual-studio-2010, entity-framework

当我尝试在 Visual Studio 2010 中创建实体模型时，我想连接到当前 Windows 用户无法访问的数据库，如何指定不同的登录名/密码来访问数据库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T15:20:59.797

我能想到的两种方法。

1.  使用 SQL Server 混合模式身份验证并让应用程序使用由 SQL Server 控制的用户名和密码。这样，您就可以在 SQL Server 上创建帐户，并在需要时以您喜欢的任何人的身份进行连接。

2.  让您的应用程序在不同的用户帐户下运行（运行方式...）。这样您就可以继续在 SQL Server 上使用 Windows 身份验证，而不必向其他身份验证方式开放它（即混合模式身份验证）

每个都有优点和缺点，这实际上取决于您要实现的目标。

# python - 如何使用 bash 命令“读取 -e 变量”并将变量传递给 python 变量

> ID：12822777
> 
> 赞同：4
> 
> 时间：2012-10-10T15:15:52.960
> 
> 标签：python, bash, variables, autocomplete

我想将 shell 输入传递给 python 中的变量。通常我会为此使用该`raw_input()`方法，但我想使用一些允许我“浏览”我的文件夹的东西。

在 bash 脚本中，我会使用如下内容：（-e 允许我通过 Tab 使用 shell 的“自动完成”功能。）

```
#!/bin/bash

echo Please input the path to the file:

read -e var

echo $var 
```

有谁知道如何在 Python 中解决这个问题？我看了看，`os.popen()`但`os.system()`不知道如何使用它们。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T15:21:52.743

[readline](http://docs.python.org/library/readline.html)模块可以为您提供 raw_input() 的制表符补全。

你可能想做这样的[事情](https://stackoverflow.com/a/5638688/1460976)。

# c# - 从 C# 方法，如何调用和运行 DLL，其中 DLL 名称来自 String 变量？

> ID：12822781
> 
> 赞同：5
> 
> 时间：2012-10-10T15:16:10.983
> 
> 标签：c#, .net, interop, pinvoke

我是 C#.NET 的新手。我正在编写一个需要调用和运行 DLL 文件的方法，其中 DLL 文件名来自一个字符串变量-

```
String[] spl;

String DLLfile = spl[0]; 
```

如何导入此 DLL 并从 DLL 调用函数以获取返回值？我尝试了以下方式..

```
String DLLfile = "MyDLL.dll";

[DllImport(DLLfile, CallingConvention = CallingConvention.StdCall)] 
```

但它不起作用，因为字符串应该是 'const string' 类型，而 'const string' 不支持变量。请帮我详细的程序。谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-10T15:34:52.167

对于本机 DLL，您可以创建以下静态类：

```
internal static class NativeWinAPI
{
    [DllImport("kernel32.dll")]
    internal static extern IntPtr LoadLibrary(string dllToLoad);

    [DllImport("kernel32.dll")]
    internal static extern bool FreeLibrary(IntPtr hModule);

    [DllImport("kernel32.dll")]
    internal static extern IntPtr GetProcAddress(IntPtr hModule,
        string procedureName);
} 
```

然后按如下方式使用它：

```
// DLLFileName is, say, "MyLibrary.dll"
IntPtr hLibrary = NativeWinAPI.LoadLibrary(DLLFileName);

if (hLibrary != IntPtr.Zero) // DLL is loaded successfully
{
    // FunctionName is, say, "MyFunctionName"
    IntPtr pointerToFunction = NativeWinAPI.GetProcAddress(hLibrary, FunctionName);

    if (pointerToFunction != IntPtr.Zero)
    {
        MyFunctionDelegate function = (MyFunctionDelegate)Marshal.GetDelegateForFunctionPointer(
            pointerToFunction, typeof(MyFunctionDelegate));
        function(123);
    }

    NativeWinAPI.FreeLibrary(hLibrary);
} 
```

`MyFunctionDelegate`一个在哪里[`delegate`](http://msdn.microsoft.com/en-us/library/900fyy8e%28v=vs.71%29.aspx)。例如：

```
delegate void MyFunctionDelegate(int i); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-10T15:17:36.470

您可以使用`LoadAssembly`method 和`CreateInstance`method 来调用方法

```
 Assembly a = Assembly.Load("example");
        // Get the type to use.
        Type myType = a.GetType("Example");
        // Get the method to call.
        MethodInfo myMethod = myType.GetMethod("MethodA");
        // Create an instance. 
        object obj = Activator.CreateInstance(myType);
        // Execute the method.
        myMethod.Invoke(obj, null); 
```

# javascript - jQuery Cycle 中有没有办法检索参数？

> ID：12822782
> 
> 赞同：3
> 
> 时间：2012-10-10T15:16:14.893
> 
> 标签：javascript, jquery, jquery-cycle

有没有办法在[jQuery Cycle](http://jquery.malsup.com/cycle/)中检索参数？

**例子**

```
$('#slider').cycle({speed: 750}) 
```

我如何在 Javascript/jQuery 中检索值 750？

**我试过**
`console.log( $('#slider').cycle.speed )`
`console.log( $('#slider').cycle.('speed') )`

但价值是`undefined`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-10T15:31:55.090

我没有看到任何允许您检索值的插件[命令。](http://jquery.malsup.com/cycle/options.html)但是，使用 Firebug 探索结果时，该插件似乎将其选项存储在`cycle.opts`data 属性下。如果你真的需要获得价值，你可以使用：

```
$('#pics').data("cycle.opts").speed 
```

演示：http: [//jsfiddle.net/ZWDa4/](http://jsfiddle.net/ZWDa4/)

请注意，这**不是一个理想的解决方案**，因为无法保证它将继续与未来的更新一起使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T15:26:33.827

不应该是：

```
console.log($("#slider").cycle("speed")); 
```

或者

```
var s = $("#slider").cycle();
console.log(s.speed); 
```

没有它来测试意味着我不能 100% 确定，但所有选项都在这里（你可能知道） [http://jquery.malsup.com/cycle/options.html](http://jquery.malsup.com/cycle/options.html)

最后的选择是改变方法：

```
var speed = 750
$("#slider").cycle({"speed: " + speed }); 
```

那么你有速度作为一个单独的变量吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T15:32:14.100

您可以尝试使用 jquery.data(element,key,value) 。例如：jquery.data($('#slider'),cycle,speed)

# php - CURL PHP POST 干扰 JSON

> ID：12822783
> 
> 赞同：0
> 
> 时间：2012-10-10T15:16:17.547
> 
> 标签：php, json, http, post, curl

我目前有一个返回 JSON 的 API 脚本。它一直有效，直到我尝试`curl php POST`在它之前添加一个脚本。curl 脚本自己运行，它也在 API 脚本中运行。但是 JSON 代码不会被返回。

下面的这种方法有什么根本错误吗？

提前致谢。

编辑：该`curl`脚本可以 100% 自行运行。所述脚本也在下面工作，只是`JSON`没有返回。

```
$name   = "foo";
$age    = "bar";

//set POST variables
$url = 'https://www.example.com';

$fields = array(
            'name' => urlencode($name),
            'age' => urlencode($age)
        );

//url-ify the data for the POST
foreach($fields as $key=>$value) { $fields_string .= $key.'='.$value.'&'; }
rtrim($fields_string, '&');

//open connection
$ch = curl_init();

//set the url, number of POST vars, POST data
curl_setopt($ch,CURLOPT_URL, $url);
curl_setopt($ch,CURLOPT_POST, count($fields));
curl_setopt($ch,CURLOPT_POSTFIELDS, $fields_string);

//execute post
$result = curl_exec($ch);

//close connection
curl_close($ch);    
return json_encode(
    array(
        "status" => 1,
        "message" => "Success!",
        "request" => 10
    )
); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T15:49:22.127

您需要执行以下使用，如果不是`echo`，也使用`CURLOPT_RETURNTRANSFER`输出将直接传输到页面而不是`$result`

```
$name = "foo";
$age = "bar";
$url = 'http://.../a.php';
$fields = array('name' => urlencode($name),'age' => urlencode($age));
$ch = curl_init($url);
curl_setopt($ch, CURLOPT_POST, true);
curl_setopt($ch, CURLOPT_POSTFIELDS, $fields);
curl_setopt($ch,CURLOPT_RETURNTRANSFER,true);
$result = curl_exec($ch);
curl_close($ch);

header('Content-type: application/json'); 
echo json_encode(array("status" => 1,"message" => "Success!","request" => 10)); 
```

# r - 在 R 中重新排列数据框

> ID：12822784
> 
> 赞同：3
> 
> 时间：2012-10-10T15:16:19.043
> 
> 标签：r, data-manipulation, traminer

我有一个看起来像这样的数据框：

```
created_at  actor_attributes_email      type
3/11/12 7:28    jeremy@asynk.ch         PushEvent
3/11/12 7:28    jeremy@asynk.ch         PushEvent
3/11/12 7:28    jeremy@asynk.ch         PushEvent
3/11/12 7:42    jeremy@asynk.ch         IssueCommentEvent
3/11/12 11:06   d.bussink@gmail.com     PushEvent
3/11/12 11:06   d.bussink@gmail.com     PushEvent 
```

现在我想按月/年重新排列它（仍然按时间排序，并且仍然保持行的完整性）。这应该为每个月创建 3 列，然后将与该月相关的所有数据（created_at、actor_attributes_email 和类型）放在这 3 列中，以便我得到以下标题（对于数据中存在的所有月份）：

```
april_2011_created_at april_2011_actor_attributes_email april_2011_type may_2011_created_at may_2011_actor_attributes_email may_2011_type 
```

我怎样才能在 R 中做到这一点？

包含整个数据集的 CSV 文件可以在这里找到： [https ://github.com/aronlindberg/VOSS-Sequencing-Toolkit/blob/master/rubinius_rubinius_sequencing/rubinius_6months.csv](https://github.com/aronlindberg/VOSS-Sequencing-Toolkit/blob/master/rubinius_rubinius_sequencing/rubinius_6months.csv)

这是`dput()`CSV 的第一行：

```
structure(list(created_at = structure(c(1L, 1L, 1L, 2L, 2L, 2L, 
3L, 3L, 3L, 4L, 4L, 4L, 5L, 5L, 5L, 6L, 6L, 6L, 7L, 7L, 7L, 8L, 
8L, 8L, 9L, 9L, 9L, 10L, 10L, 10L), .Label = c("2012-03-11 07:28:04", 
"2012-03-11 07:28:19", "2012-03-11 07:42:16", "2012-03-11 11:06:13", 
"2012-03-11 12:46:25", "2012-03-11 13:03:12", "2012-03-11 13:12:34", 
"2012-03-11 13:14:52", "2012-03-11 13:30:14", "2012-03-11 13:30:48"
), class = "factor"), actor_attributes_email = structure(c(3L, 
3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 2L, 2L, 2L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L), .Label = c("", 
"d.bussink@gmail.com", "jeremy@asynk.ch"), class = "factor"), 
    type = structure(c(2L, 2L, 2L, 2L, 2L, 2L, 1L, 1L, 1L, 2L, 
    2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 
    2L, 2L, 2L, 2L, 2L), .Label = c("IssueCommentEvent", "PushEvent"
    ), class = "factor")), .Names = c("created_at", "actor_attributes_email", 
"type"), class = "data.frame", row.names = c(NA, -30L)) 
```

其他一些假设是：

*   即使“PushEvent”（例如）重复 10 次，我也需要保留所有这些，因为我将使用 R 包 TraMineR 进行序列分析
*   列可以不等长
*   不同月份的列之间没有关系
*   某月内的数据应以最早的时间优先排序
*   例如，2011 年 6 月和 2012 年 6 月的数据需要在不同的列中

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T17:06:47.353

Maiasaura 提供了一种优雅的方式来使用 plyr 和 lubridate 完成工作。这是在基础 R 中实现它的稍微不那么优雅的方式。但与 Maiasaura 不同的是，这种方式最大限度地减少了`NA`行数。每个月的行数`NA`是该月的行数与任何月份的最大行数之差。

```
# split df by month
by.mon <- split(df, months(as.POSIXct(df$created_at)))

# rename the columns to include the month name
by.mon <- mapply(
    function(x, mon.name) {
        names(x) <- paste(mon.name, names(x), sep='_');
        return(x)
    }, x=by.mon, mon.name=names(by.mon), SIMPLIFY=FALSE)

# add an index column for merging on
by.mon.indexed <- lapply(by.mon, function(x) within(x, index <- 1:nrow(x)))

# merge all of the months together
results <- Reduce(function(x, y) merge(x, y, by='index', all=TRUE, sort=FALSE), 
    by.mon.indexed)

# remove the index column
final_result <- results[names(results) != 'index'] 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-10T16:08:47.897

```
library(plyr)
library(lubridate)
df$created_at <- ymd_hms(df$created_at, quiet = TRUE)
df$mname <- as.character(lubridate::month(df$created_at,label = T, abbr = T))
result <- dlply(df, .(mname), function(x){
      x <- arrange(x, created_at)
      names(x) <- paste0(unique(x$mname), "_", names(x))
      x$mname <- NULL
      x
    }, .progress = 'text')

final_result <- ldply(result, rbind.fill)[, -1] 
```

请注意，由于您希望将月份名称附加到 3 个列名称并填写适当的数据，因此所有没有数据的列都将被 s 填充`NA`（这是 的预期行为`rbind.fill`）。

# android - 在 shouldOverrideUrlLoading 触发时检查 Web/移动访问

> ID：12822791
> 
> 赞同：0
> 
> 时间：2012-10-10T15:17:02.183
> 
> 标签：android, url, webview, overriding

有没有办法可以在 shouldOverrideUrlLoading() 中放置一个 if 语句来检查网络/移动访问。然后显示一条错误消息，而不是移动 chrome 显示的讨厌的页面未找到页面。

类似的东西

```
 public boolean shouldOverrideUrlLoading(WebView view, String url) 
 {        
    if(isOnline() == false)  
        {
         AlertDialog.Builder dlgAlert  = new AlertDialog.Builder(this);
         dlgAlert.setMessage("Mobile device currnetly has no internet access.  Please try again.");
         dlgAlert.setTitle("No Connection");
         dlgAlert.setPositiveButton("OK", null);
         dlgAlert.setCancelable(true); 
         dlgAlert.setIcon(R.drawable.ic_launcher);
         dlgAlert.create().show(); 
        }

        return false;          
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T16:31:48.237

好的，我找到了解决问题的方法。首先，我将 shouldOverrideUrlLoading() 放在新的 WevViewclient 中。在我把它放在那个街区之外之前。

接下来我收到一条错误消息

```
 AlertDialog.Builder dlgAlert  = new AlertDialog.Builder(this); 
```

接下来，我将代码更改为此，使用 Toast 消息而不是 AlertDialog Builder。

@Override public boolean shouldOverrideUrlLoading(WebView view, String url) {

```
 if (isOnline() == false)
             {
                 Toast msg = Toast.makeText(MainActivity.this,"No mobile or web access, try again later.",Toast.LENGTH_LONG);
                 msg.show();
                 return true;
             }
             else
             { 
                 return false;
            }
         } 
```

# windows - 带引号的注册表值

> ID：12822801
> 
> 赞同：1
> 
> 时间：2012-10-10T15:17:28.283
> 
> 标签：windows, batch-file, registry, registrykey

我需要在批处理文件的注册表中插入一个值。该值包含引号，因此很难插入。

```
set OPENCOMMAND="\"%JAVAHOME%\bin\javaw.exe\" -jar \"%%1\" %%*\""
reg add "HKEY_LOCAL_MACHINE\SOFTWARE\Classes\jarfile\shell\open\command" /v "" /t REG_SZ /d %OPENCOMMAND% 
```

这会产生几乎正确的结果，只是该值在 reqistry 中包含围绕它的引号。

```
"C:\Program Files\Java\jre7\bin\javaw.exe" -jar "%1" %*" 
```

这就是注册表包含的内容，它应该包含的内容是

```
C:\Program Files\Java\jre7\bin\javaw.exe" -jar "%1" %* 
```

该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T15:56:56.667

该脚本应该可以工作：

```
reg add "HKEY_LOCAL_MACHINE\SOFTWARE\Classes\jarfile\shell\open\command" /v "" /t REG_SZ /d "\"%JAVAHOME%\bin\javaw.exe\" -jar \"%%1\" %%*" 
```

# ruby-on-rails-3 - Rails - 在布局中产生部分

> ID：12822802
> 
> 赞同：0
> 
> 时间：2012-10-10T15:17:29.807
> 
> 标签：ruby-on-rails-3

我认为这是一个非常简单的问题，我可能只是错误地处理它，因为我是 Rails 新手，但它就在这里......

我想要做的是使用产量在我的应用程序布局中呈现我的部分视图的结果。我的页面顶部有一个搜索栏，我希望结果显示在布局的产量中。同样，我不确定这是否是正确的方法，所以如果不是，请告诉我最好的方法。

现在，当我尝试在我的页面上使用搜索时，我收到“缺少模板事件/搜索”错误。如果我将以下代码添加到控制器，它会正确获取所有信息，但不会在应用程序布局中呈现，它只会显示部分信息：

```
render :partial => "events/search_results" 
```

以下是相关部分控制器的外观：

```
layout "application"

def search
  @events = Event.search params[:search]
end 
```

这是应用程序布局（请原谅格式，我试图使其易于阅读）：

```
 <!DOCTYPE html>
 <html lang="en">
 <head>
   <title>XXXXXXX</title>
   <!--[if lt IE 9]> <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"type="text/javascript"></script> <![endif]-->
  <%= stylesheet_link_tag    "application", :media => "all" %>
  <%= javascript_include_tag "application" %>
  <%= csrf_meta_tags %>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
 </head>
 <body>
    <div class="navbar navbar-top">
   <div class="navbar-inner">
    <div class="container">
             <%= render :partial => "events/search" %>
    </div>
   </div>
   </div>

<div class="container-fluid">
    <div class="row-fluid">
            <div class="span1">
            </br>
                <div class="well well-small">
                    <center><h3>Filters</h3></center> </br>
                    <%= render :partial => "events/left_severity_filter" %>
                    <%= render :partial => "events/left_date_filter" %>
                </div>
            </div>

        <div class="span8">
                         <%= yield %>
                    </div>
        <div class="span3">
                         <%= render :partial => "events/right_filter" %
        </div>
    </div>
</div> 
```

任何帮助将非常感激。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T15:51:57.787

视图中没有`events/search.html.erb`模板。创建此视图模板，它将显示在所在的`yield`位置。

# asp.net - 添加/设置 cookie vb.net

> ID：12822804
> 
> 赞同：2
> 
> 时间：2012-10-10T15:17:33.790
> 
> 标签：asp.net, vb.net, cookies

我知道如何在 VB.Net 中添加/设置 cookie，通常我检查它是否为空（或在 VB 中为 Nothing）如果它什么都没有我设置一个新的 cookie，如果不是那么我设置前一个 cookie 的值。我的问题是每次都像这样添加一个cookie有什么问题，或者有什么不好的地方：

```
HttpContext.Current.Response.Cookies.Add(New HttpCookie("Lat", dt(0)(1).ToString().Trim())) 
```

我希望这只会覆盖以前的 Cookie("Lat") 如果它存在，如果它不存在则设置一个新的，如果这有效，它真的会让我的代码更短，让事情变得更容易。我不明白为什么这不起作用 - 但每个在线教程和示例通常都会首先检查它是否存在。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T15:29:12.733

如果您想将 ( `duplicate`) cookie 添加到集合中，请使用`Add`方法并想要更新现有 cookie，然后调用该`Cookies.Set`方法。（参考[MSDN](http://msdn.microsoft.com/en-us/library/system.web.httpcookiecollection.set.aspx)）

# c# - 带有动态枚举的 C# 自定义控件

> ID：12822807
> 
> 赞同：1
> 
> 时间：2012-10-10T15:17:37.707
> 
> 标签：c#, .net, windows, winforms, windows-forms-designer

> **可能重复：**
> [C# 中的动态枚举](https://stackoverflow.com/questions/725043/dynamic-enum-in-c-sharp)

我不知道这在理论上是否可行。

我想创建一个自定义控件，但可通过 Visual Studio 设计器（枚举）编辑的属性之一是动态的。

目的是我有不同的项目，通过我编写的单独编辑器，导出特定于项目的枚举，并希望创建一个动态支持不同项目的小部件。

IE

```
class Widget : Panel
{
    //**********This bit to be dynamic*****************
    private EnumThatIdLikeToBeDynamic dynamicEnum = 0;

    public EnumThatIdLikeToBeDynamic DynamicEnum
    {
        get { return dynamicEnum ; }
        set { dynamicEnum = value; }
    }
    //*************************************************

    public ItemWidget()
    {
    }

    //Etc
} 
```

目前我能看到的唯一解决方案是从导出枚举的工具中以每个项目为基础导出小部件。

有没有办法只用一个小部件来实现这一点？

PS它必须是一个枚举。在小部件之外使用整数类型和强制转换是不可接受的。

# haskell - 您如何为其他人的库中定义的类型派生 Show？

> ID：12822808
> 
> 赞同：14
> 
> 时间：2012-10-10T15:17:37.137
> 
> 标签：haskell, typeclass

我正在为 OAuth 使用 Haskell 库，并且作者没有为我正在使用的类型派生 Show 并且希望能够打印出来以进行调试。我想为它派生 Show。除了构建一个函数将所有记录字段复制到派生 Show 的记录类型之外，还有什么方法可以从库外部执行此操作？

有问题的类型是来自 Network.OAuth.Consumer 的 Token：

[http://hackage.haskell.org/packages/archive/hoauth/0.3.5/doc/html/src/Network-OAuth-Consumer.html#Token](http://hackage.haskell.org/packages/archive/hoauth/0.3.5/doc/html/src/Network-OAuth-Consumer.html#Token)

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-10-10T15:20:22.190

您可以使用名为[`StandaloneDeriving`](http://www.haskell.org/ghc/docs/latest/html/users_guide/deriving.html#stand-alone-deriving).

使用此扩展，您可以编写如下表达式：

```
deriving instance Show Token 
```

要使用它，请将

```
{-# LANGUAGE StandaloneDeriving #-} 
```

在文件的顶部。

独立派生的语法本质上与语句的语法完全相同`instance`，除了前面`deriving`有子句和没有`where`子句。这意味着您可以编写更具体的实例，例如：

```
deriving instance Show a => Foo (Maybe a) 
```

您还必须明确给出实例所需的上下文。您必须像这样编写一个独立的实例：

```
deriving instance Show a => Show (Foo a) 
```

也就是说，您必须明确注意`Show a`所需的上下文。

这不应该出现在你的情况下，但要记住这一点。

# c# - 部分语音识别

> ID：12822809
> 
> 赞同：5
> 
> 时间：2012-10-10T15:17:41.770
> 
> 标签：c#, speech-recognition

我目前正在使用 Microsoft 的语音引擎进行语音识别。使用 C# 设置和使用它非常简单，并且可以用比我最初想象的更少的代码行来实现伟大的事情。

现在，关键是我真的不知道如何处理这个问题：我知道引擎需要开始聆听，然后你说一个词或一个句子，它会在字典中进行比较，看看是否能找到匹配项。如果是这样，程序会做任何你想做的事情。

我正在挠头的是，我希望引擎“检测”他的字典中的单词，在包含一个或所有这些单词的完整随机短语中。

例如，假设字典有以下单词：-“阅读”-“新闻”

我想编写一些代码来检测这些特定单词，例如：-“给我读新闻”-“你能读懂新闻吗”-“读新闻”……

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-10T15:31:02.237

此功能称为“关键字定位”。通常您无法使用语音识别引擎执行关键字定位，您需要特定的定位包。关键问题是引擎应该不断比较两个结果——找到单词和找不到单词。语音识别只寻找符合语法的单词，不考虑其他声音。发现只需要不同的算法。

有一种解决方法可以将许多可能的音节或其他声音添加到语音识别语法中，并希望引擎会找到它们而不是关键字，但与特定关键字检测器相比，这在准确性方面并不是一个很好的解决方案。

如果您与 Microsoft 的引擎没有紧密的联系，并且您需要一种通用语言，例如美国英语或法语，您可以使用开源软件工具包（如[CMUSphinx](http://cmusphinx.sourceforge.net) ）实现关键字识别，以进行语音识别。

# css - 按元素、功能和媒体查询构建 CSS（SASS、LESS）文件：3D 代码结构？

> ID：12822810
> 
> 赞同：16
> 
> 时间：2012-10-10T15:17:43.817
> 
> 标签：css, coding-style, sass, less

## 零维

每个人都从一个包含所有样式的文件开始使用 CSS。

*   `style.css`

## 一维

很快它就变得庞大了，人们决定按页面元素将 CSS 分组到多个文件中：

*   `html_elements.css`
*   `header.css`
*   `main-area.css`
*   `footer.css`

有些人可能会觉得这不够方便，并按功能对样式进行分组：

*   `typography.css`
*   `layout.css`
*   `sticky-footer.css`（包含许多元素的声明，而不仅仅是页脚）

## 二维

当一个项目有很多 CSS 时，它可能需要同时使用这两个分组。CSS 文件结构变成二维的：

`layout/`

*   `grid-system.css`
*   `header.css`
*   `sidebars.css`

`look/`

*   `typography/`
    *   `main.css`
    *   `headers.css`
    *   `lists.css`
*   `backgrounds/`
    *   `html_elements.css`
    *   `header.css`
    *   `main-area.css`
    *   `footer.css`

好吧，这个例子是捏造的，但你确实明白我的意思。

到目前为止，一切都很好。

## 输入媒体查询

这就是我的 CSS 结构被搞砸的地方。

除了上面描述的 2D 结构之外，我还必须通过媒体查询来构建我的代码：

*   我的一些风格是通用的（适用于任何地方）
*   有些仅适用于某些屏幕尺寸：
    *   小的;
    *   中等的;
    *   大的;
    *   特大。
*   有些适用于某些屏幕尺寸组：
    *   除了小型（非移动样式）之外的所有东西；
    *   小型和中型（侧边栏不在两侧）
    *   large 和 xlarge（你有侧边栏的地方）

我试图通过在现有 CSS 文件中分散媒体查询样式来解决这个问题。[断点](https://github.com/canarymason/breakpoint)Compass 扩展有很大帮助，但是样式表变得太乱了。当文件中没有描绘出某种风格时，它会带来很多痛苦。

我尝试按媒体查询分组，然后按元素和功能分组。但是文件结构是二维的，所以你不能添加新的维度，你只能添加另一个层次结构。所以，并不优雅。此外，它非常笨重。

所以我最终得到了一个二维结构，一个轴上有媒体查询，另一个轴上有元素和功能的丑陋组合。

我对此绝对不满意，但我只是未能提出一个优雅的解决方案。请推荐一个。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-10-10T16:58:47.167

CSS 已经是一种结构化语言。无论好坏，代码的顺序都会改变它的含义。因此，任何 CSS 组织方案都主要由级联决定，这一点很重要。CSS 的另一个结构方面是语义。使用它来发挥你的优势。组织关注的是保持事物的意义和可维护性。保留意义的最佳方法是展示人际关系。关系已经由语义表达。

把这些东西放在一起，你最终会得到首先按**特异性**组织的代码，然后是**语义**，但永远不会按类型与布局或屏幕大小等外部概念。这是我的命名方案：

```
base/
  - Sass imports and settings - no CSS output.
  - e.g _grid, _colors, _rhythm, etc.
general/
  - Initial CSS baseline with resets, defaults, font imports, and classes to extend.
  - e.g. _reset, _root, _fonts, _icons, _defaults, etc.
layout/
  - The rough outline of the site structure.
  - Not "layout" as a set of properties excluding type, "layout" as the overall site template which might well include typography. 
  - e.g. _banner, _nav, _main, _contentinfo, etc.
modules/
  - All the details. First by effect (classes/general), then by widget (ids/specifics).
  - e.g. _users, _admin, _product-lists etc. 
```

**媒体查询应尽可能靠近它们影响的代码。**如果可能，它们会直接内联（使用 Sass 媒体冒泡）。如果它变得庞大，它们会移出块外，但*永远不会移出 partial*。MQ 是覆盖。当您覆盖代码时，尤其重要的是您能够准确地看到被覆盖的内容。

在某些站点上，您可以更进一步地采用这种结构。我偶尔会在最后添加两个文件夹：`plugins/`管理第 3 方代码，以及`overrides/`处理不可避免的（尽量避免它们！）特定于位置的小部件覆盖。我也更深入了，`fonts/`为每个字体系列添加了一个带有部分的`users/`文件夹，或者为添加、编辑、查看等添加了一个带有部分的文件夹。细节是灵活的，但基本组织保持不变：

*   开始一般。
*   尽可能缓慢地转向细节。
*   **永远不要**根据任何外部概念（类型/布局、屏幕尺寸等）进行划分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T15:39:21.463

为什么不尝试这样的事情：

```
/root
  /modules
    /header
      /html
        header.html
      /css
        module_styles.css /*Configure which style sheets are included with @media rule in this file*/
        /at-media
          small.css
          medium.css
          large.css
      /js
        fancy-nav.js
  /site
    includes.css /*use @import to include each modules stylesheet in a file here and let each module control its own media issues*/ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T15:51:44.380

好的，所以这更多是个人品味的问题，可能并没有真正回答这个问题，但这是我的贡献：

我所做的是一个像你说的“2D”组织，文件少很多（假设我们说的是css，预处理器更少）

我发现在我正在设计的元素的同一个“less”文件中使用媒体查询更容易。

因此，例如我有 header.less 并且在同一个文件中，它的媒体查询。

```
#header {
    ...
}

//Header media queries
-----------------------

@media screen and (min-width:480px) { ... }
@media screen and (min-width:768px) { ... } 
```

现在，为什么我选择这样做呢？-> 因为（对我来说）它是一个巨大的痛苦......必须查看另一个文件（例如 responsive.less），在其中搜索媒体查询的标题，进行我的更改......等等。相反，使用这种方法，我总是知道我的媒体查询在哪里，并且它们很容易为每个元素访问/修改，这不会在代码中添加更多行。

唯一的问题是，当生成 css 时，我们最终会对遍布 css 代码的单个元素进行媒体查询。不是很漂亮！（此时 less/winless 不会自动对媒体查询进行分组。）

我结束了构建一个小应用程序来对媒体查询进行分组：http: [//nokturnalapp.com/mqhelper/](http://nokturnalapp.com/mqhelper/) 我用它来构建用于生产的 css 文件。（它还没有完成，我需要添加从媒体查询版本中剥离的代码，但看看它。）

我希望这对您有所帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-10T15:45:50.147

我最终要做的是您的 2D 解决方案（尽管我的有更多嵌套）并在需要时使用 Breakpoint 将我的媒体查询写入行中。我们需要处理的一件事是我们的输出 CSS 看起来与我们的手写代码不同，它是使用 CSS 预处理器并专门抽象周围事物的现实。很快，[Google Chrome 的开发工具将内置 Sass 部分支持](https://twitter.com/anthonyshort/status/236256012259180545)，并且有用于 Firefox 的[FireSass](https://addons.mozilla.org/en-US/firefox/addon/firesass-for-firebug/) 来帮助您找出样式的来源。

希望这些帮助！

# ios - 将对象复制到数组，然后在 Objective C 中销毁它们

> ID：12822811
> 
> 赞同：1
> 
> 时间：2012-10-10T15:17:43.940
> 
> 标签：ios, class, object

也许这是一个愚蠢的问题，我只是想不出优雅或标准的方式来做到这一点。

我有一个名为 Segment 的自定义类。在我的主程序中，我有一个名为 @currentSegment 的属性，它属于 Segment 类型。

有时我的用户会做一些事情来创建一个 Segment（这将是 self.currentSegment），然后他们需要创建一个新的 Segment，但我需要存储旧的 Segment（我猜是在 NSMutableArray 中）。我不知道用户将创建多少个细分，可能是数百个。

我是否应该在创建 Segment 后立即将每个 Segment 粘贴到 NSMutableArray 中，然后将它们称为 [segmentArray lastObject]，甚至不使用 currentSegment 是一种好的编程习惯吗？

对于简单的提问，我很抱歉，我想得很辛苦，但觉得我忽略了简单的解决方案。

# symfony - 一起管理 Smartfox 和 Symfony2 会话

> ID：12822812
> 
> 赞同：1
> 
> 时间：2012-10-10T15:17:47.630
> 
> 标签：symfony, session, unity3d, smartfoxserver

我有一个用于后台的 symfony 和用于前台的 Unity3d 应用程序。

前面是一个 3d 游戏，为了管理多用户，我们将使用 SmartFox 服务器。

我不知道如何一起使用 SmartFox 和 Symfony 服务器的会话。

大家有什么想法吗？

谢谢你的帮助。

# jquery - jQuery动画对象，然后根据新的margin-left创建其他对象

> ID：12822814
> 
> 赞同：0
> 
> 时间：2012-10-10T15:17:58.917
> 
> 标签：jquery, dynamic, jquery-animate, append, margin

所以，我有一个可以动画的对象（我们称之为 obj1）。其他对象可以在动画之前或之后动态创建，所以我希望它们的左边距位置基于 obj1 当前的左边距。

这是相关的代码片段。奇怪的是它与警报一起使用，但如果我取出警报，margin-left 将默认为样式表中的原始内容。Timeout 是为了确保在前一个 obj 完成动画到它的新位置之前不会创建新的 obj。

```
if(!rounds.match12) {
    setTimeout(function() {
    createMatchup(matchups[6].winner, matchups[7].winner, 12, false); //this creates a new matchup and appendsTo current container
    var pos = $('#matchup5').css('margin-left');
    alert(pos);
    $('#matchup12').css('margin-left' , pos);
    alert($('#matchup12').css('margin-left'));
    $('#matchup12').css('margin-left' , '-=195');
    alert($('#matchup12').css('margin-left'));
    rounds.match12 = true;
    },1500);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T15:44:29.903

如果没有看到完整的代码，我的猜测是您的超时很可能不会与动画同步触发。jQuery 动画并不总是准确的，它和你的超时时间之间存在毫秒的差异，它可能会失败或提供不一致的值。尝试使用[$.animate()](http://api.jquery.com/animate/)回调而不是超时，如下所示：

```
// replace 'fast' with a millisecond timeout if desired //
$('selector').animate(marginLeft: 'X', 'fast', function(){
    // dynamically create and position new elements here
}); 
```

我希望这有帮助！

# java - 动态更新当前显示的工具提示

> ID：12822819
> 
> 赞同：3
> 
> 时间：2012-10-10T15:18:29.763
> 
> 标签：java, swing, dynamic, tooltip

我正在尝试获得一个显示任务当前进度的工具提示。所以我希望在显示工具提示**时**工具提示文本发生变化。但是，当我调用时`setToolTipText()`，显示的文本保持不变，直到我从工具提示组件中退出鼠标并再次输入。之前调用`setToolTipText(null)`不会改变任何东西。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-10T15:37:32.323

事实上，它不会自我更新，即使在调用之间将工具提示重置为 null 也是如此。

到目前为止，我发现的唯一技巧是模拟鼠标移动事件并将其转发到 TooltipManager。这让他认为鼠标已经移动，工具提示必须重新定位。不漂亮，但相当有效。

看看这个演示代码，它以 % 显示从 0 到 100 的进度：

```
import java.awt.MouseInfo;
import java.awt.Point;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.MouseEvent;

import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.SwingUtilities;
import javax.swing.Timer;
import javax.swing.ToolTipManager;

public class TestTooltips {

    protected static void initUI() {
        JFrame frame = new JFrame("test");
        final JLabel label = new JLabel("Label text");
        frame.add(label);
        frame.pack();
        frame.setVisible(true);
        Timer t = new Timer(1000, new ActionListener() {

            int progress = 0;

            @Override
            public void actionPerformed(ActionEvent e) {
                if (progress > 100) {
                    progress = 0;
                }
                label.setToolTipText("Progress: " + progress + " %");
                Point locationOnScreen = MouseInfo.getPointerInfo().getLocation();
                Point locationOnComponent = new Point(locationOnScreen);
                SwingUtilities.convertPointFromScreen(locationOnComponent, label);
                if (label.contains(locationOnComponent)) {
                    ToolTipManager.sharedInstance().mouseMoved(
                            new MouseEvent(label, -1, System.currentTimeMillis(), 0, locationOnComponent.x, locationOnComponent.y,
                                    locationOnScreen.x, locationOnScreen.y, 0, false, 0));
                }
                progress++;
            }
        });
        t.start();
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                initUI();
            }
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-03-05T00:26:47.473

[这是Guillaume Polet](https://stackoverflow.com/a/12823177/294317)答案的简化版本，它在单一方法中是自包含的。此代码假定之前已调用`component.setToolTip("...");`过。此代码*未*显示如何定期更新工具提示以显示进度。

```
public static void showToolTip(JComponent component)
{
   ToolTipManager manager;
   MouseEvent event;
   Point point;
   String message;
   JComponent component;
   long time;

   manager = ToolTipManager.sharedInstance();
   time    = System.currentTimeMillis() - manager.getInitialDelay() + 1;  // So that the tooltip will trigger immediately
   point   = component.getLocationOnScreen();
   event   = new MouseEvent(component, -1, time, 0, 0, 0, point.x, point.y, 1, false, 0);

   ToolTipManager.
      sharedInstance().
      mouseMoved(event);
} 
```

# java - 无法为 jdbc sql server'08 连接加载 sqljdbc_auth.dll

> ID：12822820
> 
> 赞同：3
> 
> 时间：2012-10-10T15:18:30.493
> 
> 标签：java, jdbc, mssql-jdbc

我正在尝试使用 Eclipse IDE 中的 sqljdbc4.jar 连接到 SQL Server 2008。我在运行配置中提供 dll 路径，就像在 VM 参数中一样 -Djava.libary.path="C: /Users/rrpall/workspace/AnnouncmentsFilter/sqljdbc_auth"

我正在从 junit 测试用例运行我的程序，我收到以下错误：

我的junit测试用例

```
package org.nsp.announcmentsfilter.test;

import org.nsp.announcmentsfilter.dao.SqlConnection;
import junit.framework.TestCase;

public class SqlConnectionTest extends TestCase 
{
    SqlConnection sqlConnection;

    public void setUp()
    {
        sqlConnection = new SqlConnection();
    }

    public void testConnection()
    {
        sqlConnection.getSqlConnection();
        sqlConnection.setQuery("SELECT NAME FROM NSP_CONTENT_C WHERE FLEXTEMPLATEID = '1293724126089'");

    }

}

Java.lang.NoClassDefFoundError: –Djava/libary/path=C: /Users/rrpall/workspace/AnnouncmentsFilter/sqljdbc_auth
Caused by: Java.lang.ClassNotFoundException: –Djava.libary.path=C: .Users.rrpall.workspace.AnnouncmentsFilter.sqljdbc_auth
    at java.net.URLClassLoader$1.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source) 
```

并且弹出窗口说“找不到主类：”Djava.library.path = C:/Users/rrpall/workspace/AnnouncmentsFilter/sqljdbc_auth. 程序将会退出”

我的原始代码是

```
package org.nsp.announcmentsfilter.dao;

import Java.sql.*;

public class SqlConnection  
{
     String driverClassName="com.microsoft.sqlserver.jdbc.SQLServerDriver";
     String connectionUrl = "jdbc:sqlserver://KWIDBSQLD02:10432;integratedSecurity=true";
     String dbUser="root";
     String dbPwd= "";
     Connection conn = null;
    public void getSqlConnection()
    {
        try 
        {
            Class.forName(driverClassName);
            conn = DriverManager.getConnection(connectionUrl);
        }

        catch (Exception e) 
        {

            e.printStackTrace();
        }

    }

    public ResultSet setQuery(String query)
    {
        Statement statement;
        try 
        {
            statement = conn.createStatement();
            ResultSet resultSet = statement.executeQuery(query);
            return resultSet; 
        } 
        catch (SQLException e) {

            e.printStackTrace();
        }
        return null;
    }

} 
```

谁能帮我解决这个问题？

# error-handling - 页面返回错误的规范

> ID：12822821
> 
> 赞同：1
> 
> 时间：2012-10-10T15:18:31.507
> 
> 标签：error-handling, seo, canonical-link

如果由于某种原因在我的网站上发生错误，该页面将返回响应 500，并且作为内容，它将向访问者显示一些关于发生的事情以及他可以在哪里继续的信息。

例如：

/product/somebook -> 正常 HTTP 200 OK，包含关于这本书的内容

发生内部错误时：

/product/somebook -> 错误 HTTP 500 返回页面，其中包含有关现在要做什么的信息（无重定向）

如果响应为 500，该页面是否应该包含一个规范标签，例如 /error ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T16:12:20.487

错误页面，例如 500 或 404（假设它实际上是使用适当的 HTTP 状态代码提供的），不会被搜索引擎索引，并且没有 PageRank 属性，因此无需将规范链接元素应用于错误页面。

# caching - 缓存在 IIS7 环境中并非真正动态的动态数据

> ID：12822823
> 
> 赞同：0
> 
> 时间：2012-10-10T15:18:52.473
> 
> 标签：caching, iis-7, asp-classic, windows-server-2008

好的，所以我有一个旧的 ASP Classic 网站。我已经确定我可以通过每天缓存数据来减少大量的数据库调用。我们的站点数据是只读的，并且变化非常缓慢。我认为根据我们的网站使用情况，我可以通过查询字符串为每天的每次访问缓存页面，而不会影响我们的服务器。

我的第一个想法是使用输出缓存，但我马上发现的问题是直到生成第三页请求时我才获得任何性能。我使用 SQL 探查器验证了这一点，但我不确定为什么。

我的第二个想法是从[http://www.4guysfromrolla.com/webtech/032002-1.shtml](http://www.4guysfromrolla.com/webtech/032002-1.shtml)添加这个 ObjPageCache 包含文件经过一些研究后，我发现这可能会导致比它解决的问题更多的问题[http://support.microsoft .com/kb/316451](http://support.microsoft.com/kb/316451)

我希望这里有人会告诉我，自 2002 年以来，向同一服务器发送 ServerXMLHTTP 或 WinHTTP 请求的问题已由 Microsoft 解决。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T20:49:20.050

根据数据的维护方式，您可以从多种缓存方式中进行选择。

如果您的数据被更改并保存在一个地方，您可以选择生成一个 html 文件，将其保存到服务器磁盘并在链接中引用。但是，这将需要对运行您的站点的进程进行写访问（例如网络服务）。这将生成快速页面，因为服务器在不涉及任何脚本引擎的情况下为这些页面提供服务。

另一种选择是将数据读取到存储在 Application 对象中的 DomDocument 中，并在需要它的页面上引用（因此将往返保存到数据库）。您可以将两个时间戳与缓存数据一起保存（一个用于缓存时间，一个用于数据库中数据更改的时间）。时间戳将允许快速检查缓存数据的陈旧性：缓存时间戳 <> 数据库时间戳 => 刷新数据；否则使用缓存数据。关于这种方法需要注意的一点是，应用程序不接受多线程对象以外的对象，因此您必须使用 MSXML2.FreeThreadedDomDocument.6.0

就我个人而言，我更喜欢最后一个，因为它允许更动态的使用，而且我不必担心运行我的站点的进程的写访问权限（无论如何这可能会带来安全风险）。

# django - Django 中的通用关系约束

> ID：12822829
> 
> 赞同：0
> 
> 时间：2012-10-10T15:19:01.840
> 
> 标签：django, generics, django-models, django-queryset, relationships

我希望 Tag (BlogPost) 的对应对象至少有 1 个 Tag 实例，否则不应该创建它。（与 null=False 效果相同）。我尝试了很多，但无法弄清楚应用这些约束。有任何想法吗？

```
class Tag(models.Model):
    content_type = models.ForeignKey(ContentType)
    object_id = models.PositiveIntegerField()
    content_object = generic.GenericForeignKey('content_type', 'object_id')

    text = models.CharField("text", max_length=255)

    class Meta:
        unique_together = ('content_type', 'object_id', 'text',)

class BlogPost(models.Model):
    title = models.CharField("title", max_length=255)
    tags = generic.GenericRelation(Tag, verbose_name="tags")

class TagInline(generic.GenericTabularInline):
    model = Tag
    extra = 1

class BlogPostAdmin(admin.ModelAdmin):
    inlines = (TagInline,) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T22:46:50.583

如果您希望以数据库约束的形式进行此操作，那么我不确定是否存在这样的事情。

否则我会去覆盖你的模型上的`clean( self )` [功能](https://docs.djangoproject.com/en/dev/ref/models/instances/?from=olddocs#django.db.models.Model.clean)。这可用于自定义验证。

```
def clean( self ):
    # validate that this model has one or more tag 
```

# css - Firefox 正在读取 CSS 条件 IE 语句

> ID：12822831
> 
> 赞同：0
> 
> 时间：2012-10-10T15:19:22.883
> 
> 标签：css, internet-explorer, firefox, conditional, stylesheet

我有一个 CSS 困惑。

如果我这样做：

```
<!--[if gte IE 8]> <link href="/ELS_Soulard_Project-web/css/soulard_base_ie_butchery.css" rel="stylesheet" type="text/css" media="screen, projection" /> <![endif]--> 
```

该行代码显示在 IE 9 的顶部，并且未读取控制 IE 字体并提供背景渐变的 css 文件。但是...该页面在 Firefox 和 Chrome 中看起来很棒。

如果我将语句更改为：

```
<!--[if gte IE 8]><!--> blah blah blah <!--<![endif]--> 
```

品种繁多，在 IE 9 和 Chrome 中看起来很棒....但是！Firefox 最终实际上读取了该文件，并最终缩小了自己的字体并更改了行高，因此这一切看起来都像丑陋的双倍间距。我知道 Firefox 正在阅读它，因为我访问了仅适用于 IE 的文件并更改了内容，它反映在 Firefox 中。

有人可以帮我弄清楚发生了什么吗？

这是在 Glassfish 3.1.2 上运行的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T15:23:59.187

在您的第二个示例中，您已`<!-->`在条件注释中添加。这样，条件注释仍处于打开状态，但 HTML 注释已关闭，并且其间的代码由任何浏览器呈现。

与此块进行比较：

```
<!--[if IE 6]>
<html id="ie6" dir="ltr" lang="de-DE">
<![endif]-->
<!--[if IE 7]>
<html id="ie7" dir="ltr" lang="de-DE">
<![endif]-->
<!--[if IE 8]>
<html id="ie8" dir="ltr" lang="de-DE">
<![endif]-->
<!--[if !(IE 6) | !(IE 7) | !(IE 8)  ]><!-->
<html dir="ltr" lang="de-DE">
<!--<![endif]--> 
```

几个 IE 版本不包括最后一个标签，但任何非 MS 浏览器和 IE >= 9 都包含最后一个标签。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T23:35:21.497

所以这就是问题所在。我正在使用 facelets，这是在模板文件中。我没有意识到通常应用的条件语句不适用于 facelets。当由 servlet 处理时，它只会丢弃任何它没有“得到”的东西，因此所有样式表都会被读取。

如果你想在 facelets 中使用条件语句，你必须把它们放在一个元素中。它会变得丑陋。

幸运的是，名为 BalusC 的堆栈器提供了一个聪明的库，其中包含一个用于处理条件语句的标签。经过一天的尝试各种方式并到处寻找之后，我终于找到了一篇文章，其中提到了这个问题与 facelets 和条件语句。这导致了一个“Omnifaces”项目的谷歌代码页，其中记录了标签（和一堆其他有用的特性）。

该库可通过 maven（我得到它的地方）获得，但可能还有其他方式。无论如何，如果那样的话，从阅读帖子到修复代码大约需要半个小时。

*Facelets 加上 IE 条件语句 = 坏消息。*

使用 outputText 或 Omnifaces 或编写您自己的组件。

# javascript - JS如何获取元素的类

> ID：12822832
> 
> 赞同：1
> 
> 时间：2012-10-10T15:19:26.833
> 
> 标签：javascript, validation

我正在创建一个动态表单，有些元素是必需的，有些则不是。我试图找出如何获取元素，以便我可以检查它们是否具有值。

```
$('form').submit(function() {     
  $('input').each(function(){ 
    isrequired(this.id)
  });

});

function isrequired(id){ 
  if (id!=''){
      // if (it has the class 'require'){ 
      //    return true
      // }
      // return false 
  }   
} 
```

++++++++++++++++++++++++++++++++++++++++

```
$('form').submit(function() {
  $('input[type="text"]').each(function(){
    if (this.value == $(this).attr('title')){ 
     this.value = '';
    }     
  });     
  $('input').each(function(){ 
    required = isrequired(this.id)
    if (required == true){
      alert(this.id + ' ' + required)
    } 
  });
});

function isrequired(id){ 
  if (id!=''){
      x = document.getElementById(id)
      if(x.className.indexOf("required") > -1){
        return true
      }else{
        return false
      } 
  }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T15:20:30.897

要测试`id`“id”的元素是否有一个类“yourclassname”，你可以使用`$('#'+id).hasClass("yourclassname")`：

```
function isrequired(id){ 
   return  $('#'+id).hasClass('require');
} 
```

但是你没有在你的第一个循环中使用 isrequired 的结果，所以我对你的目标有点怀疑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T15:22:26.497

你也可以使用`.hasClass`函数

```
function isrequired(id)
{ 
  if ($('#'+id).hasClass(classname))
  {
  }
  else
  {
  }
} 
```

# javascript - OOJS 的问题

> ID：12822833
> 
> 赞同：2
> 
> 时间：2012-10-10T15:19:30.233
> 
> 标签：javascript, jquery, oop

我在页面上有可变数量的滑块。每个滑块包含可变数量的幻灯片，以及一对用于按顺序浏览其各自幻灯片的上一个/下一个按钮。

这是典型滑块的标记：

```
<section class="foo">
    <button class="prev"></button>

    <ul class="container slider">
        <li class="slide" id="a01"></li>
        <li class="slide" id="a02"></li>
        <li class="slide" id="a03"></li>
    </ul>

    <button class="next"></button>
</section> 
```

每个滑块都应该知道它当前显示的幻灯片的索引。这让我相信在页面加载时，我应该遍历所有`$('.slider')`元素并为每个元素实例化一个对象。如何编写定义滑块的类？它应该有一个包含当前显示的幻灯片的索引的属性，以及一个根据用户单击“下一个”还是“上一个”来增加或减少该属性的方法。我已经做到了：

```
var slider = function () {
    this.pager = 0;
    this.incrementPager = function () {
        console.log(this.pager++);      
    };
};

$(function () {
    $('.prev, .next').click(slider);
}); 
```

...但我的代码并没有做太多:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T16:16:05.683

这是制作 jQuery 插件的方法，我认为这是一种更好的方法，因为您使用的是 jQuery，这并不真正适用于基于*类*的 OO。

```
$.fn.slider = function() {
    $(this).each(function() {
        var wrapper = $(this);
        var index = 0;
        var listItems = wrapper.find('.slide');
        wrapper.find('.prev').click(function(){
            if (index > 0) {
                $(listItems[index]).removeClass('active');
                index--;
                $(listItems[index]).addClass('active');
            }
        });
        wrapper.find('.next').click(function(){
            if (index < listItems.length - 1) {
                $(listItems[index]).removeClass('active');
                index++;
                $(listItems[index]).addClass('active');
            }
        });

    });
}; 
```

你可以像这样使用它

```
$('section').slider(); 
```

**工作示例** [http://jsfiddle.net/MR8wE/](http://jsfiddle.net/MR8wE/)

如果你真的想要一些 OO，你可以执行以下操作（但我认为这与 jQuery 的工作方式背道而驰）。

```
/**
 * Adds behavior to the HTML for a slider
 */
function Slider(wrapper) {
    var me = this;
    me.wrapper = $(wrapper);
    me.index = 0;
    me.listItems = wrapper.find('.slide');
    wrapper.find('.prev').click(function(){
        me.prev(); 
    });
    wrapper.find('.next').click(function(){
        me.next();
    });                    
}

Slider.prototype.next = function() {
    this.go(1;)
}
Slider.prototype.previous = function() {
   this.go(-1);
}
Slider.prototype.go = function(steps) {
    var oldIndex = this.index;
    var newIndex =  oldIndex + steps
    if (newIndex >= 0 && newIndex < this.listItems.length ) {
        $(this.listItems[oldIndex]).removeClass('active');
        $(listItems[new]).addClass('active');
        this.index = newIndex;
    }

} 
```

然后你会像使用它一样

```
var sliders = [];
$('section').each(function(){
     sliders.push(new Slider(this));        
});

// Control the slider without user intervention
sliders[0].next();
sliders[1].go(2); 
```

**示例[http://jsfiddle.net/MR8wE/2/](http://jsfiddle.net/MR8wE/2/)**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T15:59:51.033

针对评论中的问题：

```
function Slider(elm)
{
    this.domElement = elm;
    this.pager = 0;
}
Slider.prototype.incrementPager = function()
{
    this.pager++;
};//all instances share this method ==> only 1 function object in mem.
$(function()
{
    var objectCollection = (function(elements)
    {
        var toReturn = [];
        var scanElementsFunction = function()
        {//declared in this scope, to have access to elements var
            'use strict';//avoid setting globals
             if (this.allElems === undefined)
             {
                 this.allElems = elements;
             }
             return this.allElems;
        };
        elements.each(function(idx,el)
        {
            toReturn[idx] = new Slider(el);//<-- pass DOMElement to constructor
            toReturn[idx].getAll = scanElementsFunction;//<-- reference, no new function object
        });
        return toReturn;
    }($('.prev, .next')));//this scope preserves the elements returned by jQuery selector
    console.log(objectCollection);
}); 
```

那里没有什么真正有用的东西，但我试图在保持片段尽可能短的同时加入尽可能多的技巧和技巧。如果某些代码不清楚，请告诉我，我会提供更多解释（可能需要一两个小时，因为我现在要咬一口 :)）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-10T16:18:57.850

以下方法使用更正式的构造函数和原型，使其保持轻量级，而不是堆叠外壳。构造函数是...

```
function Slider(slides, transition) {

    // Keeps a reference to the current slide index
    this._current = 0;

    // An array of slides
    this._slides = slides;

    // A transition function
    this._transition = transition;
} 
```

它接受一个幻灯片数组和一个函数，当我们在它们之间转换时将给出两张幻灯片。这意味着我们通过外部化来控制我们的过渡效果。它也与框架无关，并且不依赖于 jQuery 或任何其他框架。构造函数本身并没有做太多事情。下面的方法就是我们的肉...

```
// The function that swaps slides
Slider.prototype.goto = function(i) {

    // Do a bit of sense checking
    if(i > this._slides.length || i < 0)
        throw new Error("Slide does not exist");

    // Swap the slides by passing them to the transition function
    var currentSlide = this._slides[this._current];
    var nextSlide = this._slides[i];
    this._transition(currentSlide, nextSlide);

    // Update the current index
    this._current = i;
}; 
```

它获取幻灯片的新索引并将旧幻灯片和新幻灯片传递给过渡功能。然后它会更新用于跟踪当前幻灯片的索引。然后我们想要实现一个旋转的上一个和下一个函数，所以下面的方法描述了我们如何使用模数来做到这一点，注意我们必须添加幻灯片的长度，因为负模数不能按照我们想要的方式工作。

```
// Calculate the next index as a rotating index
Slider.prototype.getNextIndex = function() {
    return (this._current + 1) % this._slides.length;
};

// Calculate the previous index as a rotating index
Slider.prototype.getPrevIndex = function() {
    return (this._current + this._slides.length - 1) % this._slides.length;
}; 
```

然后我们加点糖...

```
// Sugar to go next and prev
Slider.prototype.next = function() {
    this.goto(this.getNextIndex());
};
Slider.prototype.prev = function() {
    this.goto(this.getPrevIndex());
}; 
```

您可能无法将 prev 和 next 按钮与其滑块关联起来。您可以在滑块元素之前和之后找到它们，或者像我在下面所做的那样将它们包含在滑块元素中。要使用 jQuery 设置滑块，您可以执行以下操作...

```
$(".slider").each(function() {
    var slider = new Slider($(this).find(".slide"), function(a, b) {
        $(a).hide();
        $(b).show();
    });
    $(this).data("slider", slider);
    $(this).find(".prev").click(function() {
        slider.prev();
    });
    $(this).find(".next").click(function() {
        slider.next();
    });
}); 
```

**编辑**这是在行动[http://jsfiddle.net/w8u69/](http://jsfiddle.net/w8u69/)

而且由于转换的逻辑是公开的，您可以很容易地添加转换效果，而无需修改原始`Slider`“类”。[http://jsfiddle.net/w8u69/1/](http://jsfiddle.net/w8u69/1/)

**编辑**只是为了展示这种方法的强大功能，无需修改原始滑块“类”，您可以添加额外的逻辑以在幻灯片之间自动移动。您可以使用装饰器或继承来完成此操作，但此示例显示了如何使用组合来完成。[http://jsfiddle.net/w8u69/4/](http://jsfiddle.net/w8u69/4/)

**最后一件事**，这可能是纯 OO 方法中最重要的一点，通过简单地更改集成代码并保持 OO“类”不变，我们可以重用我们为滑块编写的逻辑并将其插入一个完全不同的框架。这个小提琴显示它与 MooTools [http://jsfiddle.net/w8u69/5/一起使用](http://jsfiddle.net/w8u69/5/)

# android - AIDL 服务中的 java.lang.NoClassDefFoundError

> ID：12822838
> 
> 赞同：3
> 
> 时间：2012-10-10T15:19:45.563
> 
> 标签：android, service, aidl

我对一组 AIDL 服务有疑问。

我有一个 Android 应用程序，其中包含名为 es.mypackage.services 的数据包中的 AIDL 文件。这些 AIDL 文件定义明确且名称正确。此外，这个包还包含这些 AIDL 文件的实现。这些 java 实现在清单中定义为服务。编译完成后，在 gen 文件夹中创建了一个包 es.mypackage.services。

除了这个 android 应用程序之外，我还有另一个应用程序，它只是这些服务的客户端。在这个应用程序中，我有一个名为 es.mypackage.services 的包，其中包含相同的 AIDL 文件。编译完成后，在 gen 文件夹中创建了一个包 es.mypackage.services。

然后，我在设备中运行“服务器”应用程序。然后，我还在同一设备上运行“客户端”，在 LogCat 中获得以下错误：

```
java.lang.NoClassDefFoundError: es.mypackage.services.MyService
ERROR/AndroidRuntime(3499):at es.mypackage.services.MyService.onBind(MyService.java:26) 
```

好吧，第 26 行的代码是“return new IMyService.Stub()”，它在里面：

```
 @Override  
  public IBinder onBind(Intent arg0) 
  { return new IMyService.Stub()    
    { …. 
```

我不知道发生了什么。有人有同样的问题吗？提前致谢。

# java - gwt - gwt 中的继承如何工作？

> ID：12822839
> 
> 赞同：2
> 
> 时间：2012-10-10T15:19:45.750
> 
> 标签：java, gwt

如果我刚开始使用 gwt，如果我的问题太天真，请原谅我。

我创建了一个`gwt module`（比方说`Editor_A`），它有许多 DataGrid、按钮等。它在网页中运行良好。

然后我将要创建第二个 gwt 模块`Editor_B`。

它们永远不会出现在同一页面上，但是，它们`Editor_B`非常相似，`Editor_A`因为它只有一个额外的表格和一个按钮。

当然，现在我*不想将*代码从复制/粘贴`Editor_A`到`Editor_B`. 相反，**我希望重用来自 Editor_A 的代码**。

我怎样才能做到这一点？

如何从 Editor_A 继承并通过一些修改重用其大部分代码以生成 Editor_B？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T15:41:21.730

这可以解决您的问题：您可以创建一个额外的核心模块，它负责您的基本自定义小部件、客户端实用程序等。然后您应该在两个模块中继承核心模块。因此，在您的情况下，您可以创建由 使用的 Composite 小部件`Editor_A`，然后在您的后一个模块中，您可以`Editor_B`通过继承来创建您的`Editor_A`。当然，您可以从`Editor_B`类中添加一些修改。

如果您在同一个模块中使用它们，您可以创建一个 BaseEditor，在您的情况下为 Editor_A。接着：

```
public class Editor_B extends Editor_A{
    public Editor_B(){
      draw();
    }

    private void draw(){
   // here, add your extra table and button, to panel which're protected(public)
    }
} 
```

除了 Java Inheritance 一定要以适当的方式配置 GWT 模块，否则 GWT Java to Javascript 编译器将找不到相关的类。通过将模块 XML 配置修改为如下所示来执行此操作：

```
<module>
   <inherits name='com.google.gwt.user.User'/>
   <source path="widgets"/>
</module> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T18:20:48.373

最好的方法是创建可以在同一模块或不同模块中轻松重用的自定义小部件。然后，您可以：

(a) 通过添加更多子小部件和/或新功能来扩展自定义小部件（MyBigPanel 扩展 MySmallPanel），或

(b) 简单地将更多子元素添加到同一个复合小部件（前提是它可以接收它们，即您使用 LayoutPanel、FlowPanel、HtmlPanel 等作为自定义小部件的容器）。然后您只需调用 mySmallPanel.add(anotherButton)。

附注：您提到这些小部件不会在同一页面上使用。这并不意味着它们必须位于不同的模块中。它们可以在同一模块的不同视图中使用。例如，将模块视为具有不同用户的独立应用程序。在这种情况下，您可以将所有小部件抽象到不同的模块中（并在其他模块中继承它），也可以将它们放在单独的 jar 中。

# drupal - 更改 Fivestar 模块中的一些文本

> ID：12822840
> 
> 赞同：1
> 
> 时间：2012-10-10T15:19:49.413
> 
> 标签：drupal, drupal-6, drupal-modules

我在 Drupal 6 中使用 Fivestar 模块... [http://drupal.org/project/fivestar](http://drupal.org/project/fivestar)

而且，我想更改文本：

从： `Average: *****`

对此： `Rate this Article: *****`

我宁愿不破解使用字符串覆盖的模块，我希望在 template.php 文件中使用 hook_form_alter 函数或类似的东西。

这是 HTML 的样子：

```
<form action="/fall-foliage"  accept-charset="UTF-8" method="post" id="fivestar-form-node-232" class="fivestar-widget"><div>
<div class="fivestar-form-vote-232 clear-block"><input type="hidden" name="content_type" id="edit-content-type" value="node"  />
<input type="hidden" name="content_id" id="edit-content-id" value="232"  /><div class="fivestar-form-item  fivestar-average-stars fivestar-labels-hover">
<div class="form-item" id="edit-vote-wrapper">
<label for="edit-vote">Average: </label>
...etc... 
```

Fivestar.module 中的代码如下所示：

```
function theme_fivestar_summary($user_rating, $average_rating, $votes, $stars = 5, $feedback = TRUE) {
  $output = '';
  $div_class = '';
  if (isset($user_rating)) {
    $div_class = isset($votes) ? 'user-count' : 'user';
    $user_stars = round(($user_rating * $stars) / 100, 1);
    $output .= '<span class="user-rating">'. t('Your rating: <span>!stars</span>', array('!stars' => $user_rating ? $user_stars : t('None'))) .'</span>';
  }
  if (isset($user_rating) && isset($average_rating)) {
    $output .= ' ';
  }
  if (isset($average_rating)) {
    $div_class = isset($votes) ? 'average-count' : 'average';
    $average_stars = round(($average_rating * $stars) / 100, 1);
    $output .= '<span class="average-rating">'. t('Average: <span>!stars</span>', array('!stars' => $average_stars)) .'</span>';
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T16:18:47.903

在 Fivestar.module 文件中搜索 'Average' 而不是 'average' 并且可以根据您的明智更改，但不建议更改核心模块文件（每当您更新模块时，更改都会恢复）。

请创建自定义模块并实现[hook_form_alter](http://api.drupal.org/api/drupal/developer%21hooks%21core.php/function/hook_form_alter/6)

示例：函数**YourModuleName** _form_alter(&$form, $form_state, $form_id)

打印 $form 并搜索“平均”

将 $form[xyz][xyz] = 'Average' 更改为 $form[xyz][xyz] = '评价这篇文章'

如果不是表单，请使用[hook_nodeapi](http://api.drupal.org/api/drupal/developer%21hooks%21core.php/function/hook_nodeapi/6)

# javascript - IE 控制台问题

> ID：12822844
> 
> 赞同：1
> 
> 时间：2012-10-10T15:19:57.370
> 
> 标签：javascript, internet-explorer

我检查了我的 index.php 并删除了所有 console.log() 但是当我转到 IE7 时，我仍然遇到控制台错误。有趣的是，如果我在 IE9 中检查，然后将浏览器模式更改为 IE7，它可以正常工作，但是如果直接在 IE7 浏览器中测试站点，它会给出控制台错误消息。

请问如何阻止这种情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T15:39:15.437

你可能在某个地方错过了一个`console.log`电话。之所以能在IE9切换到IE7中起作用，是因为打开控制台切换版本就创建了console对象。这样在IE9的IE7仿真模式下就不会报错。

更好的解决方案是事先在您的 js 代码中包含以下内容：

```
if (!window.console){console = {log:function(){}};} 
```

现在您的所有`console.log`调用都不会引发错误，而是会被忽略。

我在开发时执行以下操作：

```
var logging = 1;
if (!window.console){console = {log:function(){}};}
function _log(a) { if(logging) { console.log(a); } } 
```

并继续使用`_log("foo")`整个代码。现在，您可以使用简单的方式切换日志记录，`logging = 0`并且可以安全地防止丢失的控制台对象。

# python - Python 和 Django 常量的最佳实践

> ID：12822847
> 
> 赞同：45
> 
> 时间：2012-10-10T15:20:08.557
> 
> 标签：python, django

我有一个依赖元组的 Django 模型。我想知道为我的 Django 程序引用该元组中的常量的最佳做法是什么。例如，在这里，我想将“ `default=0`”指定为更具可读性且不需要注释的内容。有什么建议么？

```
Status = (
    (-1, 'Cancelled'),
    (0, 'Requires attention'),
    (1, 'Work in progress'),
    (2, 'Complete'),
)

class Task(models.Model):
    status = models.IntegerField(choices=Status, default=0) # Status is 'Requires attention' (0) by default. 
```

编辑：

如果可能的话，我想完全避免使用数字。不知何故，使用字符串“需要注意”会更具可读性。

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2012-10-10T15:42:04.973

为整数值定义常量是很常见的，如下所示：

```
class Task(models.Model):
    CANCELLED = -1
    REQUIRES_ATTENTION = 0
    WORK_IN_PROGRESS = 1
    COMPLETE = 2

    Status = (
        (CANCELLED, 'Cancelled'),
        (REQUIRES_ATTENTION, 'Requires attention'),
        (WORK_IN_PROGRESS, 'Work in progress'),
        (COMPLETE, 'Complete'),
    )

    status = models.IntegerField(choices=Status, default=REQUIRES_ATTENTION) 
```

通过移动常量和`Status`模型类内部，您可以保持模块的命名空间更干净，并且作为奖励，您可以`Task.COMPLETE`在导入`Task`模型的任何位置引用。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-10-10T15:40:42.433

```
CANCELED, ATTENTION, WIP, COMPLETE = range(-1, 3)
Status = (
    (CANCELED, 'Cancelled'),
    (ATTENTION, 'Requires attention'),
    (WIP, 'Work in progress'),
    (COMPLETE, 'Complete'),
)

class Task(models.Model):
    status = models.IntegerField(choices=Status, default=CANCELED) 
```

* * *

请记住，正如其他人指出的那样，正确的方法是将这些变量放在您的 Model 类中。这也是官方 django[示例](https://docs.djangoproject.com/en/dev/ref/models/fields/#django.db.models.Field.choices)的方式。

只有一个原因，您希望将它放在类命名空间之外，并且只有当这些语义被您的应用程序的其他模型平等共享时。即您无法决定它们属于哪个*特定型号。*

尽管在您的特定示例中似乎并非如此。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2015-03-22T16:37:36.590

# Python 3.4+：`Enum`

你写*“如果可能的话，我想完全避免使用数字。”* 事实上，一个命名的表示显然更pythonic。然而，裸字符串容易出现拼写错误。

Python 3.4 引入了一个名为 [`enum`](https://docs.python.org/3/library/enum.html)提供`Enum`和`IntEnum`伪类的模块来帮助解决这种情况。有了它，您的示例可以按如下方式工作：

```
# in Python 3.4 or later:
import enum  

class Status(enum.IntEnum):
    Cancelled = -1,
    Requires_attention = 0,
    Work_in_progress = 1,
    Complete = 2

def choiceadapter(enumtype):
    return ((item.value, item.name.replace('_', ' ')) for item in enumtype)

class Task(models.Model):
    status = models.IntegerField(choices=choiceadapter(Status), 
                                 default=Status.Requires_attention.value) 
```

并且一旦 Django 团队接手`Enum`，它 `choiceadapter`甚至会被内置到 Django 中。

编辑 2021-06：在与 合作后`Enum`，我必须说我不感兴趣。在我的工作风格中（在 Django 中；你的里程可能会有所不同），抽象往往会妨碍我，我发现自己更喜欢一个松散的常量列表（通常嵌入到一个无论如何都存在的不同类中）。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-10-10T16:05:20.940

您可以使用`namedtuple`, 使用 Immutable 作为常量似乎很合适。;-)

```
>>> from collections import namedtuple
>>> Status = namedtuple('Status', ['CANCELLED', 'REQUIRES_ATTENTION', 'WORK_IN_PROGRESS', 'COMPLETE'])(*range(-1, 3))
>>> Status
Status(CANCELLED=-1, REQUIRES_ATTENTION=0, WORK_IN_PROGRESS=1, COMPLETE=2)
>>> Status.CANCELLED
-1
>>> Status[0]
-1 
```

[在这种情况下，像在Alasdair 的答案](https://stackoverflow.com/a/12823272/383793)中那样使用属性`Task`作为常量更有意义，但命名元组是不改变的字典和对象的非常便宜的替代品。如果你想在内存中有*很多*它们，特别方便。它们就像具有描述性和属性访问权的常规元组。*`__repr__`*

 ** * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-10-10T15:25:00.663

我的做法：

```
class Task(models.Model):
    STATUSES = { 'cancelled': 'Cancelled',
                 'requires attention': 'Requires attention',
                 'work in progress': 'Work in progress',
                 'complete': 'Complete' }

    status = models.CharField(choices=STATUSES.items(), default='cancelled') 
```

这使您可以编写方便的表达式：

```
tasks = Task.objects.filter(status='complete') 
```

此外，它允许您不创建不必要的全局变量。

如果你真的想使用整数字段：

```
class Task(models.Model):

   class STATUS:
      CANCELED, ATTENTION, WIP, COMPLETE = range(-1, 3)
      choices = {
        CANCELED: 'Cancelled',
        ATTENTION: 'Requires attention',
        WIP: 'Work in progress',
        COMPLETE: 'Complete'
      }

   status = models.CharField(choices=STATUSES.choices.items(), default=STATUSES.CANCELED) 
```

和：

```
tasks = Task.objects.filter(status=Task.STATUSES.COMPLETE) 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2018-11-21T10:37:21.113

一种可能的方法是使用 python **range**函数和**tuple**的组合。

```
class Task(models.Model):
    CANCELED, ATTENTION, WIP, COMPLETE = range(-1, 3)
    Status = (
        (CANCELLED, 'Cancelled'),
        (REQUIRES_ATTENTION, 'Requires attention'),
        (WORK_IN_PROGRESS, 'Work in progress'),
        (COMPLETE, 'Complete'),
    )

    status = models.IntegerField(choices=Status, default=REQUIRES_ATTENTION) 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-10-10T15:24:05.077

您可以使用字典来稍微提高清晰度：

```
Status = {
    -1: 'Cancelled',
    0: 'Requires attention',
    1: 'Work in progress',
    2: 'Complete',
}

class Task(models.Model):
    status = models.IntegerField(choices=Status.items(), default=Status[0]) 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-10-10T16:07:26.943

我不使用 Django，但我在 Pyramid 和 Twisted 下做了很多类似以下的事情......

```
def setup_mapping( pairs ):
    mapping = {'id':{},'name':{}}
    for (k,v) in pairs:
        mapping['id'][k]= v
        mapping['name'][v]= k
    return mapping

class ConstantsObject(object):
    _pairs= None
    mapping= None

    @classmethod
    def lookup_id( cls , id ):
       pass

    @classmethod
    def lookup_name( cls , name ):
       pass

class StatusConstants(ConstantsObject):
    CANCELLED = -1
    REQUIRES_ATTENTION = 0
    WORK_IN_PROGRESS = 1
    COMPLETE = 2

    _pairs= (
        (-1, 'Cancelled'),
        (0, 'Requires attention'),
        (1, 'Work in progress'),
        (2, 'Complete'),
    )
    mapping= setup_mapping(_pairs) 
```

所以本质是这样的：

*   有一个基本的“常量”类，每种类型都有另一个类。该类将关键字定义为 ALLCAPS 中的值
*   我也把明文`_pairs`扔进了课堂。为什么？因为我可能需要用它们构建一些数据库表，或者我可能希望它们用于错误/状态消息。我使用数字而不是 ALLCAPS 变量名称作为个人偏好。
*   我初始化了一个`mapping`类变量，它基本上通过在字典中预编译一堆变量来对类进行猴子补丁，因为......
*   该类派生自该基类，该基类提供类方法功能来搜索值或执行您经常需要对常量执行的其他标准操作。

这不是一种万能的方法，但我通常真的很喜欢这种方法。您可以轻松地使用字典来定义对，让“映射”函数设置一些其他属性，例如为您提供对值的元组，如 k,v 或 v,k 或您可能需要的任何奇怪格式。

我的代码可以如下所示：

```
status_id = sa.Column(sa.Integer, sa.ForeignKey("_status.id") , nullable=False , default=constants.StatusConstants.CANCELLED )

status_name = constants.StatusConstants.lookup_id(status_id)    
status_name = constants.StatusConstants.mapping['id'][status_id] 
```

每当您需要以其他方式使用常量时，您只需添加或更改基类的类方法。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-08-24T04:08:15.380

有时我必须创建一些巨大的选择列表。我不喜欢像猴子一样打字，所以我宁愿创建一个这样的函数：

```
def choices(labels):
    labels = labels.strip().split('\n')
    ids = range(1, len(labels)+1)
    return zip(ids, labels) 
```

并像这样使用：

```
my_choices = """
choice1
choice2
choice3
"""
MY_CHOICES = choices(my_choices)
print(MY_CHOICES) # ((1, choice1), (2, choice2), (3, choice3)) 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-04-02T08:38:42.827

`Final`ly 常量已通过[https://github.com/python/mypy/pull/5522添加到 python](https://github.com/python/mypy/pull/5522)

安装：

```
pip install mypy typing_extensions 
```

用法示例：

```
from typing_extensions import Final

DAYS_IN_A_WEEK: Final = 7
DAYS_IN_A_WEEK = 8  # I really want more days in a week! 
```

您需要运行 mypy 类型检查器：

```
mypy --python-version=3.6 --strict week.py
week.py:4: error: Cannot assign to final name "DAYS_IN_A_WEEK" 
```

有关更多信息，请参阅：[https ://dev.to/wemake-services/1-minute-guide-to-real-constants-in-python-2bpk](https://dev.to/wemake-services/1-minute-guide-to-real-constants-in-python-2bpk)*

# c++ - GNU GCC 编译器更新

> ID：12822851
> 
> 赞同：4
> 
> 时间：2012-10-10T15:20:22.143
> 
> 标签：c++, c++11, gnu, codeblocks

我正在使用带有 gnu gcc 编译器的代码块。但是，当我尝试为启动编译一个范围基础时，它会给出很多错误。所以我认为编译器不支持 C++0x。所以我想知道如何知道我正在使用的编译器版本以及如何将其正确更新为支持 C++0x 的版本。我正在使用 Windows XP。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T18:43:04.950

此算法可能有助于开始在 Windows 上使用 C++11 进行编程：

*   1) 访问[http://mingw.com](http://mingw.com)并下载最新的 MinGW 发行版，安装它

    2) 下载 CodeBlocks 安装程序，安装它。在安装期间它应该检测 GCC 安装并建议将其用作默认编译器，接受这个。

    3) 启动一个新的 CodeBlocks 项目，进入项目 -> 属性 -> 构建选项 -> 编译器设置 -> 编译器标志，然后设置标志“让 g++ 遵循即将到来的 C++0x ISO C++ 语言标准”

    4) 编译你的第一个 C++11 项目，玩得开心！

顺便说一句，目前最新的 MinGW g++ 版本为 4.6.1，因此它必须支持大部分 C++11 功能。

# sql - 在 SQL 开发人员中手动测试 oracle sql 中的无状态函数

> ID：12822854
> 
> 赞同：2
> 
> 时间：2012-10-10T15:20:29.417
> 
> 标签：sql, oracle, oracle-sqldeveloper

我编写了有史以来最复杂的 sql 函数：

```
function abc() RETURN 7; 
```

我想验证我的函数实际上做了我认为它做的事情：返回一个 7。

使用 sql-developer 实现这一目标的最简单方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T15:25:15.463

`function abc() RETURN 7;`这不是一个有效的函数声明。

让我们尝试这样的事情：

```
SQL> create or replace function abc
  2  return number
  3  is
  4  begin
  5    return 7;
  6  end;
  7  /

Function created 
```

要查看函数的结果，只需查询`dual`表，其中函数名称列在查询的选择部分中。使用此方法确保函数不包含任何 DML 语句。

```
SQL> 
SQL> select abc
  2    from dual
  3  /

       ABC
----------
         7 
```

# objective-c - 将uiview保存为指定大小

> ID：12822857
> 
> 赞同：1
> 
> 时间：2012-10-10T15:20:34.867
> 
> 标签：objective-c, uiview, uiimageview, retina-display

我有一个600x600`uiimageview`和`uitexview`一个 200x200 uiview 加载。

我想将其导出`uiview`为 600x600，与`uiimageview`大小相同。

但是，如果我使用下面的代码，我只能生成 400x400 的大小，即`uiview`.

有什么代码可以实现吗？

```
UIGraphicsBeginImageContextWithOptions(outputView.bounds.size, outputView.opaque, 2);
[outputView.layer renderInContext:UIGraphicsGetCurrentContext()];

UIImage *img = UIGraphicsGetImageFromCurrentImageContext();

UIGraphicsEndImageContext(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T15:53:14.923

您是否尝试过将视图的边界更改为您需要的？

```
outputView.bounds = CGRectMake(0,0,600,600);
UIGraphicsBeginImageContextWithOptions(outputView.bounds.size, outputView.opaque, 2);     [outputView.layer renderInContext:UIGraphicsGetCurrentContext()];
UIImage *img = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext();
outputView.bound = ... original bounds here ... 
```

如果内部视图设置为自动调整大小，这应该可以无缝工作。否则，您也可以更改内部视图的框架。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T15:24:45.907

您可以使用 AliSoftware 的[UIImage 类别](https://github.com/AliSoftware/UIImage-Resize)来调整它的大小

# iphone - 有什么方法可以增加 Google Analytics 为我的 iPhone 应用程序提供的异常描述文本的数量？

> ID：12822861
> 
> 赞同：1
> 
> 时间：2012-10-10T15:20:47.997
> 
> 标签：iphone, google-analytics, flurry

谷歌分析似乎限制了我在查看详细信息时收到的来自我的 iPhone 应用程序的错误文本......

有什么方法可以报告更长的错误吗？

Flurry在这方面做得更好吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T11:19:47.147

Flurry 将很快为 iOS 应用程序提供 Full Stack Trace 崩溃报告。目前，此功能可用于使用新 Flurry SDK v3.x 的 Android 应用程序。（完全披露：我在 Flurry 的支持团队工作）

# jquery-ui - 让 Angular UI 工作

> ID：12822862
> 
> 赞同：11
> 
> 时间：2012-10-10T15:20:49.477
> 
> 标签：jquery-ui, angularjs, angular-ui

我刚刚安装了**Angular UI**，但无法使其正常工作。以下是我遵循的步骤：

index.html (Angular v1.0.1, AngularUI v0.2.1)

```
<script src="scripts/vendor/angular.js"></script>
<script src="scripts/vendor/jquery-1.7.2.js"></script>
<script src="scripts/vendor/jquery-ui-1.8.18.js"></script>
<script src="scripts/vendor/bootstrap.js"></script>
<script src="scripts/vendor/angular-ui.js"></script> 
```

应用程序.js

```
var publicApp = angular.module('publicApp', ['ngResource', 'ui']) 
```

我的 html

```
<input name="dateField" class="datepicker" value="Click Here for Datepicker" ui-date> 
```

我得到这个错误：

```
TypeError: Object [[object HTMLInputElement]] has no method 'datepicker' 
```

在 chrome 中使用 JS 控制台可以正常工作：

```
$('.datepicker').datepicker() 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-10T22:10:08.307

如果我没记错的话，你需要在AngularJS / angular-ui 文件*之前包含 jQuery。*这是带有 angular-ui 日期选择器的 jsFiddle：http: [//jsfiddle.net/pkozlowski_opensource/aGpNf/6/](http://jsfiddle.net/pkozlowski_opensource/aGpNf/6/)

# php - Google Analytics API - 在 PHP 中检索配置文件的段列表

> ID：12822863
> 
> 赞同：2
> 
> 时间：2012-10-10T15:20:52.213
> 
> 标签：php, google-analytics

我在代码中有检索所有段列表的过程。

```
$SegmentArray = $service->management_segments->listManagementSegments(); 
```

我需要检索特定段的段。

如果我使用这个输出：

```
echo "results:<br><pre>".print_r($SegmentArray,true)."</pre>"; 
```

列表（JSON）是：

```
Array
(
    [kind] => analytics#segments
    [username] => nomeaccount@gmail.com
    [totalResults] => 13
    [startIndex] => 1
    [itemsPerPage] => 1000
    [items] => Array
        (
            [0] => Array
                (
                    [id] => -1
                    [kind] => analytics#segment
                    [selfLink] => https://www.googleapis.com/analytics/v3/management/segments/gaid::-1
                    [segmentId] => gaid::-1
                    [name] => All Visits
                    [definition] => 
                )
    ... 
```

我如何过滤这些数据以获取个人资料？谢谢！

# actionscript-3 - AS3 - 几何 - 点在 2D 平面上的透视投影

> ID：12822864
> 
> 赞同：7
> 
> 时间：2012-10-10T15:20:56.390
> 
> 标签：actionscript-3, math, 3d, geometry

我目前正在努力解决一个似乎远远超出我的数学能力的问题（自从我做了一些适当的数学以来已经很长时间了......），我希望能得到一些帮助。

这是我的设置：我有一些简单的形状（矩形），我将它们的底点“投影”在一条线上，来自一个原点。到目前为止，一切都很好。但是现在我想绘制扭曲的原始形状，就好像它是在平面上以某种透视投影的一样。

请考虑我的代码中与任何旋转、等距或任何 3D 或假 2D 透视无关，我只是尝试使用图形库绘制一些形状，只是为了*感受*真实的东西。

这是我正在尝试做的快速绘图：

![在此处输入图像描述](../Images/4b92598882b60014a68abf8749b8620e.png)

**我知道的 ：**

*   原点坐标
*   矩形位置和尺寸
*   红线位置
*   A & B 点坐标

**我想确定的是 C & D 点的坐标，**如果我不努力寻找“Origin bis”坐标，这很容易。

我正在尝试做的是伪造我的矩形投影在可以被视为“地板”的东西上（与我的原始矩形所在的平面相关，可以看作是一堵墙）。

*也许我把问题复杂化了，或者我看不到任何其他更简单的方法，但我在任何几何或数学方面真的不擅长了...... :-(*

非常感谢你的回答 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-07T09:36:22.310

正如您所说，您面临一个非常简单的问题：

“我想要确定的是 C&D 点的坐标，如果我不努力寻找“Origin bis”坐标的话，这很容易。”

但是这些坐标是相互关联的，所以没有一个（或另一个值，如角度），你就不能拥有另一个。如果您要在 3D 中尝试此操作，您只需允许 3D 引擎定义“Origin bis”并计算 C 和 D 本身。

因此，无论您是否需要“原始之二”，与红线或您的 Rect 相关的另一个值，用于计算 C 和 D 的位置。

我记得制作这样的东西，有时最好坚持简单，你要么自己定义一个“原始之二”（它可以是静止的，也可以随着玩家/背景移动），然后按照你得到的方式获得 C 和 D A 和 B 只是你使用比红线更低的线，或者就像我会做的那样，一旦你有了 A 和 B，简单地将你的投影从这些点向下倾斜/旋转一点，你会得到相同的东西跟随玩家的“原始之二”。这在模拟“对真实事物的感觉”方面效果很好，但遗憾的是，正如已经说过的那样，它看起来真实取决于您所描绘的内容。我们不知道红线上方或下方的区域是什么（天空/地面，地面/水）以及“Origin”和“Origin bis”是否是您的光源、消失点等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T12:42:46.213

嗯，我不知道我是否正确理解了它，但我认为您的输入参数太少：

您说提供了以下信息：

*   原点坐标
*   矩形位置和尺寸
*   红线位置
*   A & B 点坐标

我认为仅凭此信息无法获得投影的矩形。此外，我认为您的绿线和“原点之二”也没有帮助。

也许，试试这个：假设，一条穿过点 C 和 D 的蓝线也给出了。然后你可以通过将矩形的顶部投影到那条蓝线上来找到你的投影矩形。

总而言之：您定义了一个原点 + 两条平行线，一条红色和一条蓝色。然后你可以将矩形的顶部投影到蓝线上，将矩形的底部投影到红线上，产生点 A、B、C、D

我希望这有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T15:53:12.527

如果我是对的，此代码将显示您想看到的内容。

首先，我忽略了您对对象和信息的初始设置，而是专注于示例情况本身；`Matrix`“整体”的假投影阴影（任何对象都可以使用下面的示例，甚至是纹理） 我的原因是使用ActionScript 类非常容易，这是一个值得学习的方便工具。

解决方案：可以使用内置`Matrix`类对`DisplayObject`s进行倾斜变换。试试这个例子：

（“有用”的部分在于 _EF EnterFrame 处理程序；））

```
import flash.display.MovieClip;
import flash.geom.Matrix;
import flash.events.Event;
import flash.display.BitmapData;

const PIP180:Number = Math.PI / 180;
const MAX_SHADOW_HEIGHT_MULTIPLIER:Number = 0.25; // you can also calculate this from an angle, like ... = Math.sin(angle * PIP180);
const ANIM_DEG_PER_FRAME:Number = 1.0 * PIP180; // the shadow creeps at a +1 degree per frame rate

var tx:BitmapData = new MonolithTexture(); // define this BitmapData in the library
var skew:Number = -10 * PIP180; // initial 

var mono:MovieClip = new MovieClip();
mono.graphics.beginBitmapFill(tx);
// drawn that way the registration point is 0,0, so it's standing on the ground
mono.graphics.drawRect(0, -tx.height, tx.width, tx.height);
mono.graphics.endFill();

// align monolith to the "ground"
mono.x = stage.stageWidth / 2;
mono.y = stage.stageHeight - 100;
// make it be 100x300 pixel
mono.width = 100;
mono.height = 300;

var shad:MovieClip = new MovieClip();
// colored:
shad.graphics.beginFill(0x000000);
// or textured:
//shad.graphics.beginBitmapFill(tx);
shad.graphics.drawRect(0, -tx.height, tx.width, tx.height);
shad.graphics.endFill();

addChild(shad); // shadow first
addChild(mono); // then the caster object

addEventListener(Event.ENTER_FRAME, _EF);

function _EF(e:Event):void {
    // animate skew on the positive half circle
    skew = (skew + ANIM_DEG_PER_FRAME) % Math.PI;

    // Matrix takes 6 parameters: a, b, c, d, x, y
    // for this shadow trick, use them as follows:
    // a = width scaling (as mono and shad are drawn in the same way, copy mono.scaleX for a perfect fit
    // b = 0, because we don't want to project the vertical axis of transformation to the horizontal
    // c = horizontal skew
    // d = height scaling * skew * making it a bit flat using the constant
    // x = mono.x, ...
    // y = mono.y since originally mono and shad look alike, only the Matrix makes shad render differently
    var mtx:Matrix = new Matrix(mono.scaleX, 0, Math.cos(skew), mono.scaleY * Math.sin(skew) * MAX_SHADOW_HEIGHT_MULTIPLIER, mono.x, mono.y);
    shad.transform.matrix = mtx;
} 
```

现在你要知道在你的情况下使用这个，是以下N个因素：
Q1：你想从什么角度投射阴影？
A1：水平因子是`skew`变量本身，而垂直角在这里存储为常数，称为`MAX_SHADOW_HEIGHT_MULTIPLIER`

Q2：你想只“向上”投射阴影，还是随意投射？A2：如果“向上”没问题，保持`skew`在正范围内，否则让它为“向下”阴影也取负值

PS：如果您渲染它们不捕捉到 0 y 作为基点的对象的内部，您可以使它们看起来浮动/下沉，或者使用预定义的值垂直偏移两个对象，使用相反的符号。

# objective-c - 淡化 UIView 允许看到子视图

> ID：12822870
> 
> 赞同：8
> 
> 时间：2012-10-10T15:21:06.717
> 
> 标签：objective-c, ios, animation, uiview, alpha

我有一个`UIScrollView`包含各种子视图（`UIImageViews`和`UILabels`标准`UIViews`）。其中一些`UIImageViews`被其他部分覆盖`UIViews`。

但是，当我淡出 时`UIScrollView`，部分被覆盖的部分`UIImageViews`会在动画的短暂时刻暴露出来。

我希望能够在同一动画中同时淡化滚动视图及其所有内容 - 即不显示任何部分覆盖的图像。

如果不可能，我总是可以`UIView`在所有其他控件之上添加 a 并将其从 alpha 0 淡化到 1 以隐藏所有内容，但我确信有一种方法可以对视图及其所有子视图执行完全淡化。

我试过这个：

```
[UIView beginAnimations:nil context:NULL];
[scrollViewResults setAlpha:0.0f];
[UIView commitAnimations]; 
```

我试过这个：

```
- (IBAction)questionGroupChanged:(UIButton*)sender {
    [UIView beginAnimations:nil context:NULL];
    [self fadeViewHierarchy:scrollViewResults toAlpha:0.0f];
    [UIView commitAnimations];
}

- (void)fadeViewHierarchy:(UIView*)parentView toAlpha:(float)alpha {
    [parentView setAlpha:alpha];
    for (UIView *subView in parentView.subviews) {
        [self fadeViewHierarchy:subView toAlpha:alpha];
    }
} 
```

但我还没有破解它。有任何想法吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-10T15:38:00.037

发生这种情况是因为合成器的工作方式。您需要在淡入/淡出视图层时启用光栅化：

```
view.layer.shouldRasterize = YES; 
```

您可能应该只在动画期间启用它，因为它会占用一些额外的内存和图形处理时间。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-10T18:08:39.977

迈克的答案是正确的，他应该为此得到所有的赞誉。只是为了说明，它可能看起来像：

```
- (void)fadeView:(UIView*)view toAlpha:(CGFloat)alpha
{
    view.layer.shouldRasterize = YES;

    [UIView animateWithDuration:0.75
                     animations:^{
                         view.alpha = alpha;
                     }
                     completion:^(BOOL finished){
                         view.layer.shouldRasterize = NO;
                     }];
} 
```

因此，使用 your `scrollViewResults`，它将被调用为：

```
[self fadeView:scrollViewResults toAlpha:0.0f]; 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-10-10T15:35:15.163

您是否尝试过使用 UIView 类方法 +animateWithDuration:*（适用于 iOS 4 和 +）

喜欢 ：

```
- (void)fadeAllViews
{
     [UIView animateWithDuration:2
     animations:^{
         for (UIView *view in allViewsToFade)
             view.alpha = 0.0;
     }
     completion:^(BOOL finished){}
     ];
} 
```

# c# - C# 表单不呈现控件

> ID：12822871
> 
> 赞同：1
> 
> 时间：2012-10-10T15:21:08.340
> 
> 标签：c#, .net, windows, winforms

我有一个像这样的小弹出窗口：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;

namespace SQLProcWriter
{
    public partial class Progress : Form
    {
        public Progress()
        {
            InitializeComponent();
            progressBar1.Minimum = 0;
            progressBar1.Maximum = 100;
        }
    }
}

namespace SQLProcWriter
{
    partial class Progress
    {
        /// <summary>
        /// Required designer variable.
        /// </summary>
        private System.ComponentModel.IContainer components = null;

        /// <summary>
        /// Clean up any resources being used.
        /// </summary>
        /// <param name="disposing">true if managed resources should be disposed; otherwise, false.</param>
        protected override void Dispose(bool disposing)
        {
            if (disposing && (components != null))
            {
                components.Dispose();
            }
            base.Dispose(disposing);
        }

        #region Windows Form Designer generated code

        /// <summary>
        /// Required method for Designer support - do not modify
        /// the contents of this method with the code editor.
        /// </summary>
        private void InitializeComponent()
        {
            System.ComponentModel.ComponentResourceManager resources = new System.ComponentModel.ComponentResourceManager(typeof(Progress));
            this.progressBar1 = new System.Windows.Forms.ProgressBar();
            this.label1 = new System.Windows.Forms.Label();
            this.SuspendLayout();
            // 
            // progressBar1
            // 
            resources.ApplyResources(this.progressBar1, "progressBar1");
            this.progressBar1.Name = "progressBar1";
            this.progressBar1.UseWaitCursor = true;
            // 
            // label1
            // 
            resources.ApplyResources(this.label1, "label1");
            this.label1.Name = "label1";
            this.label1.UseWaitCursor = true;
            // 
            // Progress
            // 
            resources.ApplyResources(this, "$this");
            this.AutoScaleMode = System.Windows.Forms.AutoScaleMode.Font;
            this.Controls.Add(this.label1);
            this.Controls.Add(this.progressBar1);
            this.Name = "Progress";
            this.UseWaitCursor = true;
            this.ResumeLayout(false);
            this.PerformLayout();

        }

        #endregion

        public System.Windows.Forms.ProgressBar progressBar1;
        public System.Windows.Forms.Label label1;
    }
} 
```

它应该显示我正在加载和处理的文件的进度。问题是在文件完成处理之前它不会呈现进度条或标签；该表单是在主窗口的加载方法上创建的，一旦 openfiledialog 完成并显示“OK”结果，就会显示该表单。有什么帮助吗？

编辑：设置值的代码非常广泛，所以我最初选择删除它，但这里是：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.IO;
using System.Text;
using System.Windows.Forms;

namespace SQLProcWriter
{
    public partial class Form1 : Form
    {
        private string Script { get; set; }
        private List<string> File { get; set; }
        private List<string> CreateStatements { get; set; }
        private List<Table> Tables { get; set; }
        private List<string> FieldBuffer { get; set; }
        private Progress progressWindow;
        private int progressValue;

        private const string CREATE_SEPARATOR = "create table ";
        private string[] FIELD_SEPARATOR = new string[] { @"\t", @" "};

        public Form1()
        {
            InitializeComponent();
            File = new List<string>();
            FieldBuffer = new List<string>();
            Tables = new List<Table>();
            CreateStatements = new List<string>();
            progressValue = 0;
            progressWindow = new Progress();
        }

        private void aboutToolStripMenuItem_Click(object sender, EventArgs e)
        {
            About about = new About();
            about.Show();
        }

        private void Convert()
        {
            bool adding = false, nullableBuffer = false;
            string buffer = "", buffer2 = "";
            Table currentTable = new Table();
            currentTable.ForeignKeys = new List<ForeignKey>();
            currentTable.Columns = new List<Column>();
            int startIndex = 0, endIndex = 0;
            int linesDone = 0;
            int totalLines = File.Count();
            progressWindow.label1.Text = "Reading \'Create\' Statements";

            foreach (string s in File)
            {
                //Extract column names
                if (adding)
                {
                    if (s.Contains(@")") && s.Length == 1)
                    {
                        adding = false;
                        Tables.Add(currentTable);
                        currentTable = new Table();
                        currentTable.Columns = new List<Column>();
                        currentTable.ForeignKeys = new List<ForeignKey>();
                        currentTable.TableName = "";
                        currentTable.PrimaryKey = new PrimaryKey();
                    }
                    else
                    {
                        if (s != @"(")
                        {
                            if (s != "\t")
                            {
                                if (s.Contains("constraint"))
                                {
                                    //Constraint rules here
                                    if (s.Contains("primary key clustered"))
                                    {
                                        startIndex = s.IndexOf("(");
                                        startIndex++;
                                        endIndex = s.IndexOf(")");

                                        buffer = s.Substring(startIndex, (endIndex - startIndex));

                                        currentTable.PrimaryKey = new PrimaryKey(buffer, "int");
                                    }
                                    else if (s.Contains("foreign key"))
                                    {
                                        startIndex = s.IndexOf("(");
                                        startIndex++;
                                        endIndex = s.IndexOf(")");
                                        buffer = s.Substring(startIndex, (endIndex - startIndex));

                                        startIndex = s.IndexOf("references ");
                                        startIndex += 11;
                                        endIndex = s.Length;

                                        buffer2 = s.Substring(startIndex, (endIndex - startIndex));
                                        endIndex = buffer2.IndexOf(String.Format("({0}", buffer));
                                        buffer2 = buffer2.Substring(0, endIndex);

                                        currentTable.ForeignKeys.Add(new ForeignKey(buffer, buffer2));
                                    }
                                }
                                else
                                {
                                    //Regular table field
                                    buffer = s.Substring(s.IndexOf("\t") + 1, s.IndexOf(" "));

                                    startIndex = s.IndexOf(" ");
                                    startIndex++;
                                    endIndex = s.IndexOf(",");

                                    buffer2 = s.Substring(startIndex, (endIndex - startIndex));

                                    if (buffer2.Contains("not null"))
                                    {
                                        nullableBuffer = false;
                                        buffer2 = buffer2.Remove(buffer2.IndexOf(" "));
                                    }
                                    else
                                        nullableBuffer = true;

                                    currentTable.Columns.Add(new Column(buffer, buffer2, nullableBuffer));
                                }
                            }
                        }
                    }
                }

                //Extract Table Names
                if (s.Contains(CREATE_SEPARATOR))
                {
                    adding = true;
                    buffer = s;
                    currentTable.TableName = buffer.Remove(0, 13);
                }

                linesDone++;
                progressValue = (((linesDone / totalLines) * 100) / 4) + 25;
                progressWindow.progressBar1.Value = progressValue;
            }

            ProcessForeignKeys();
            ProcessPrimaryKeys();
            Tables = Utils.TrimEverything(Tables);
        }

        private void ProcessForeignKeys()
        {
            int keysDone = 0;
            int totalKeys = 0;
            progressWindow.label1.Text = "Processing Foreign Keys";

            foreach (Table t in Tables)
                foreach (ForeignKey fk in t.ForeignKeys)
                    totalKeys++;

            foreach (Table t in Tables)
                foreach (ForeignKey fk in t.ForeignKeys)
                {
                    for (int i = 0; i < t.Columns.Count; i++)
                        if (t.Columns[i].Name.Contains(fk.Name))
                        {
                            fk.DataType = t.Columns[i].DataType;
                            t.Columns.RemoveAt(i);
                        }

                    keysDone++;
                    progressValue = (((keysDone / totalKeys) * 100) / 4) + 50;
                }
        }

        private void ProcessPrimaryKeys()
        {
            int primaryKeys = 0;
            int totalKeys = Tables.Count();
            progressWindow.label1.Text = "Processing Primary Keys";

            foreach (Table t in Tables)
            {
                for (int i = 0; i < t.Columns.Count; i++)
                {
                    if (t.Columns[i].DataType.Contains("identity"))
                    {
                        t.Columns.RemoveAt(i);
                        primaryKeys++;
                        progressValue = (((primaryKeys / totalKeys) * 100) / 4) + 75;
                        progressWindow.progressBar1.Value = progressValue;
                    }
                }
            }

            progressWindow.label1.Text = "Done!";
            progressWindow.Hide();
            progressWindow.progressBar1.Value = 0;
            progressWindow.label1.Text = "";
            progressValue = 0;
        }

        private void openToolStripMenuItem_Click(object sender, EventArgs e)
        {
            OutputTextBox.Text = "";
            OpenFileDialog ofd = new OpenFileDialog();
            ofd.InitialDirectory = Environment.SpecialFolder.MyDocuments.ToString();
            ofd.Filter = "SQL Script File (.sql)|*.sql";
            ofd.Multiselect = false;
            ofd.Title = "Select an SQL Script File";

            Stream fileStream = null;

            int currentLine = 0;
            int totalLines = 0;

            if (ofd.ShowDialog() == DialogResult.OK)
            {
                progressWindow.Show();

                if ((fileStream = ofd.OpenFile()) != null)
                {
                    TextReader tr = new StreamReader(fileStream);
                    string line;
                    totalLines = System.IO.File.ReadLines(ofd.FileName).Count();

                    while ((line = tr.ReadLine()) != null)
                    {
                        File.Add(line);
                        OutputTextBox.Text += line + "\r\n";

                        currentLine++;
                        progressValue = (int)(((currentLine / totalLines) * 100) / 4);
                        progressWindow.progressBar1.Value = progressValue;
                    }

                    Convert();
                }
            }
        }

        private void CancelButton_Click(object sender, EventArgs e)
        {
            Script = string.Empty;
            OutputTextBox.Text = string.Empty;
        }

        private void quitToolStripMenuItem_Click(object sender, EventArgs e)
        {
            this.Close();
        }

        private void ConvertButton_Click(object sender, EventArgs e)
        {
            List<string> Output = new List<string>();
            progressWindow.Show();
            progressWindow.label1.Text = "Creating SQL";
            int total = Tables.Count();
            int done = 0;

            Output.Add(String.Format("--Auto-generated code (c) {0} Logic & Design", System.DateTime.Now.Year));

            foreach (Table t in Tables)
            {
                //Add a comment
                Output.Add(String.Format("--Procs for {0}", t.TableName));

                #region List
                Output.Add(String.Format("create proc {0}_List", t.TableName));
                Output.Add("as");
                Output.Add(String.Format("\tselect * from {0}", t.TableName));
                #endregion

                #region Get
                Output.Add(String.Format("create proc {0}_Get", t.TableName));
                Output.Add(String.Format("@{0} {1}", t.PrimaryKey.Name, t.PrimaryKey.DataType));
                Output.Add("as");
                Output.Add(String.Format("\tif"));
                #endregion

                #region Create
                #endregion

                #region Update
                #endregion

                #region Delete
                #endregion

                done++;
                progressValue = (done / total) * 100;
                progressWindow.progressBar1.Value = progressValue;
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T15:44:34.990

我建议你让文件异步打开。也许调用 BeginOpenFile 或类似的方法，让完成功能将进度条更新为 100% 或 99%，然后通过 Form.Invoke 或类似方法关闭它。同时，在进度表中有一个计时器，一旦给定的毫秒数（例如 100 毫秒），进度就会提高 10%。但不要让它在达到 90% 后设定进度。您无法确定打开文件需要多长时间，您只能估计。这就是为什么任何应用程序中的进度条往往不准确的原因。

注意：不确定计时器分辨率是否可以小于一秒（1000 毫秒）...

如果您需要了解 C# 中的异步操作，一个很好的资源是“CLR via C#”。如果您没有那本书，请尝试使用谷歌搜索“执行 asynchrounos IO 操作 .NET”并查看 File.BeginRead 的代码示例。

并且不要忘记 Form.Invoke 的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T15:27:38.963

Control.Invoke 在拥有控件窗口句柄的线程上执行指定的委托，因此您可以简单地调用：

```
//Indicate that the process has started
        Invoke(ShowStatusDelegate, this.toolStripStatusLabelSpinner, true, this.toolStripStatusLabelText, "In progress...", btnGo, false); 
```

假设动作是线程化的或处理的。

# php - 在命令行上使用 POST 数据和标头调用 CURL

> ID：12822879
> 
> 赞同：5
> 
> 时间：2012-10-10T15:21:49.617
> 
> 标签：php, linux, shell, curl

我正在使用 RESTAPI 与 django 服务器通信 php 客户端。我已经发布了 json 数据。php代码是

```
$arr=array("username"=>"dtthtdas45", 
          "password"=>"123456", 
          "email"=>"ramg@ram.com", 
          "is_active"=>"1", 
          "is_staff"=>"1", 
          "is_superuser"=>"1",
          "promo_code"=>"1212121",
          "gender"=>"m",
          "birth_year"=>"1991",
          "zip"=>"77707",
          "first_name"=>"john",
          "last_name"=>"doe",
          "current_state"=>"1"
          );
echo $data_string= json_encode($arr);
$ch = curl_init('http://localhost:8000/api/ecp/user/?format=json');                                                                      
curl_setopt($ch, CURLOPT_CUSTOMREQUEST, "POST");                                                                     
curl_setopt($ch, CURLOPT_POSTFIELDS, $data_string);                                                                  
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);                                                                      
curl_setopt($ch, CURLOPT_HTTPHEADER, array(                                                                          
    'Content-Type: application/json',                                                                                
    'Content-Length: ' . strlen($data_string))                                                                       
);                                                                                                                   
 $result = curl_exec($ch); 
```

如何仅使用命令行调用相同的 URL？

我尝试了以下

```
curl -H 'Content-Type: application/json' -X POST -d '{"username": "dtthtdas45", "password": "123456","email":"email@email.com","is_active":"1","is_staff":"1","is_superuser",promo_code":"1212121","gender":"m","birth_year":"1991","zip":"77707","first_name":"john","last_name":"doe","current_state":"1"}' http://localhost:8000/api/ecp/user/?format=json 
```

但没有运气，它显示以下错误

```
curl: (6) Couldn't resolve host 'application'
curl: (6) Couldn't resolve host 'dtthtdas45,'
curl: (6) Couldn't resolve host 'password:' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T15:29:39.920

> 如何仅使用命令行调用相同的 URL？

我没有写出所有数据对，但以下内容应该可以帮助您入门。我建议阅读更多[`curl`](http://curl.haxx.se/docs/httpscripting.html)

```
curl -H 'Content-Type: application/json' -X POST -d '{"username": "dtthtdas45", "password": "123456"}' http://localhost:8000/api/ecp/user/?format=json 
```

**注意：**假设您正在为更多端点执行此操作，您可能需要查看[resty 之](https://github.com/micha/resty)类的工具。

# python - 了解这种深度优先搜索算法

> ID：12822880
> 
> 赞同：3
> 
> 时间：2012-10-10T15:21:50.287
> 
> 标签：python, algorithm

我得到了一个 DFS 算法，它返回到目标节点的最短路径。它以图（包含所有节点及其路径）、起始节点、目标节点和已访问节点列表（初始化为空）作为参数。这是代码：

```
def shortestPath(graph, start, end, visited = []):
    path = str(start)
    if start == end:
        return path
    shortest = None
    for node in graph.childrenOf(start):
        if str(node) not in visited:
            visited = visited + [str(node)]
            newPath = shortestPath(graph, start, end, visited)
            if newPath = None:
                continue
            if shortest == None or len(newPath) < shortest:
                shortest = newPath
    if shortest != None:
         path = path + shortest
    else:
         path = None
    return path 
```

我理解深度优先搜索的概念，但这种递归让我大吃一惊。让我知道我的思路是否完全正确以及我在哪里出轨。

所以基本上，递归发生在 newPath 被赋值时，这当然是对 shortestPath 的调用。在这一点上，递归一直沿着图向下，直到它到达没有子节点的节点或目标节点。如果它到达一个没有子节点且不是目标的节点，则忽略基本情况，并忽略整个 for 循环，返回值为 none。那 None 然后简单地传递到递归链上。如果它到达目标节点，那么递归的底层实际上会返回一个值（路径），该值会冒泡到递归的顶部。

那时我很困惑，因为“最短”是怎么回事。因此，每次为 newPath 返回实际值时，都会为 shortest 分配该值，然后将其添加到 path 中。但是，假设我有多个通往目标节点的路径。我成功找到了第一条路径，路径等于所有新路径/最短路径的总和。但是对于成功达到目标的下一个递归，路径不只是不断添加更多的新路径吗？那么最终结果难道不是我可以访问以到达目标节点的每条路径的长列表，而不是最短路径吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T15:26:03.980

该`path`变量是函数的局部变量。每个递归调用都有自己的堆栈框架 - 它独立于其他调用）。这意味着当下一次通话开始时，一切都是全新的。

# mysql - 如何选择特定时间跨度的记录？

> ID：12822883
> 
> 赞同：2
> 
> 时间：2012-10-10T15:21:55.777
> 
> 标签：mysql, datetime

我想从位于特定时间跨度之间的表中选择记录。例如 select record_name from tbl_name where date（从现在到 10 分钟之前）？希望这个粗略的查询能解释我的问题

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T15:24:35.637

试试这个，使用[**`DATE_ADD`**](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_date-add)

```
select record_name 
from tbl_name 
where `date` BETWEEN DATE_ADD(NOW(),INTERVAL -10 MINUTE) AND NOW() 
```

# ruby-on-rails-3 - 如何在 CouchRest 模型中使用 rails-api gem

> ID：12822884
> 
> 赞同：1
> 
> 时间：2012-10-10T15:22:05.507
> 
> 标签：ruby-on-rails-3, couchdb, couchrest, rails-api

我正在尝试使用 rails-api gem [rails-api](https://github.com/spastorino/rails-api)和[couchrest model](https://github.com/couchrest/couchrest_model)设置 rails API 。使用 rails-api 去除了很多中间件和模块，我相信这就是我收到以下错误的原因：

```
Started GET "/assets" for 127.0.0.1 at 2012-10-10 16:00:36 +0100
Connecting to database specified by database.yml

ActiveRecord::ConnectionNotEstablished (ActiveRecord::ConnectionNotEstablished):
activerecord (3.2.8) lib/active_record/connection_adapters/abstract/connection_pool.rb:404:in `retrieve_connection'
activerecord (3.2.8) lib/active_record/connection_adapters/abstract/connection_specification.rb:170:in `retrieve_connection'
activerecord (3.2.8) lib/active_record/connection_adapters/abstract/connection_specification.rb:144:in `connection'
activerecord (3.2.8) lib/active_record/query_cache.rb:67:in `rescue in call'
activerecord (3.2.8) lib/active_record/query_cache.rb:61:in `call'
activerecord (3.2.8) lib/active_record/connection_adapters/abstract/connection_pool.rb:473:in `call'
actionpack (3.2.8) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
activesupport (3.2.8) lib/active_support/callbacks.rb:405:in `_run__2405051170962911444__call__2117088860059348020__callbacks'
activesupport (3.2.8) lib/active_support/callbacks.rb:405:in `__run_callback'
activesupport (3.2.8) lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
activesupport (3.2.8) lib/active_support/callbacks.rb:81:in `run_callbacks'
actionpack (3.2.8) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
actionpack (3.2.8) lib/action_dispatch/middleware/reloader.rb:65:in `call'
actionpack (3.2.8) lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
actionpack (3.2.8) lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
actionpack (3.2.8) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
railties (3.2.8) lib/rails/rack/logger.rb:26:in `call_app'
railties (3.2.8) lib/rails/rack/logger.rb:16:in `call'
actionpack (3.2.8) lib/action_dispatch/middleware/request_id.rb:22:in `call'
rack (1.4.1) lib/rack/runtime.rb:17:in `call'
activesupport (3.2.8) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
rack (1.4.1) lib/rack/lock.rb:15:in `call'
actionpack (3.2.8) lib/action_dispatch/middleware/static.rb:62:in `call'
railties (3.2.8) lib/rails/engine.rb:479:in `call'
railties (3.2.8) lib/rails/application.rb:223:in `call'
rack (1.4.1) lib/rack/content_length.rb:14:in `call'
railties (3.2.8) lib/rails/rack/log_tailer.rb:17:in `call'
rack (1.4.1) lib/rack/handler/webrick.rb:59:in `service'
/Users/jason/.rvm/rubies/ruby-1.9.2-p320/lib/ruby/1.9.1/webrick/httpserver.rb:111:in `service'
/Users/jason/.rvm/rubies/ruby-1.9.2-p320/lib/ruby/1.9.1/webrick/httpserver.rb:70:in `run'
/Users/jason/.rvm/rubies/ruby-1.9.2-p320/lib/ruby/1.9.1/webrick/server.rb:183:in `block in start_thread'

Rendered /Users/jason/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (0.9ms)
Rendered /Users/jason/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.9ms)
Rendered /Users/jason/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (8.1ms) 
```

谁能指出我需要包含哪些模块和中间件才能使其正常工作？谢谢

# c# - 在c#中绑定但不显示下拉列表中的项目

> ID：12822885
> 
> 赞同：0
> 
> 时间：2012-10-10T15:22:10.357
> 
> 标签：c#, asp.net, drop-down-menu

我在这里有个问题。

我想用以下值在 c# 中绑定一个下拉列表

```
value    text
-----    ----
1         abc
2         pqr
3         xyz
4         ppp 
```

但是我只想显示与 1,2 和 3 相关的项目。

是否可以绑定所有值但不显示所有项目

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T15:26:12.353

您可以尝试设置`Enabled = false`最后一个 ListItem 对象。我的建议可能是甚至不要将该 ListItem 包含在您要绑定的项目列表中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T15:27:59.867

尝试这个

```
list.DataSource = myDataSource;
list.DataBind();

list.Items.Remove(list.Items.FindByText("ppp")); 
```

或者

```
list.Items.Remove(list.Items.FindByValue("4")); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T15:28:05.573

您可以从 DropDownList 中删除

```
ListItem itemToRemove = myDropDown.Items.FindByValue("4");
if (itemToRemove != null)
{
    myDropDown.Items.Remove(itemToRemove);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-10T15:28:27.217

是的你可以。

在您的`DataTemplate`中，只需将对象的可见性绑定到...您的标准（它似乎是索引？）并在转换器中包含显示/隐藏逻辑。

**编辑**这样的东西：

```
<DataTemplate>
  <ContentPresenter Visibility="{Binding Index, Converter={StaticRessource IndexTovisibilityConverter}}>
    // Here your datatemplate
  </ContentPresenter>
<Datatemplate> 
```

在你的转换器里面：

```
public class IndexTovisibilityConverter: IValueConverter
{

   public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
   {
     int index= (int)value;

      if (index > 3)
        return Visibility.Collapsed;
      else
        return Visibility.Visible;
  }

  public object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture)
  {
    return null;
  }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-10T15:35:49.960

你可以在后面的代码中做到这一点。

> ```
>  ListItem l = new ListItem();
>     l.Text = "New";
>     l.Value = "new";
>     l.Attributes.CssStyle.Add("visibility", "hidden"); 
> ```

# python - 鼻子多处理插件中的个别超时

> ID：12822886
> 
> 赞同：1
> 
> 时间：2012-10-10T15:22:18.893
> 
> 标签：python, unit-testing, nose

我已经开始使用鼻子来运行测试。我发现多处理插件有一个超时，我可以在命令行上进行更改。

有没有办法延长单个测试的超时时间（在测试代码中），所以我没有大量的全局超时？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T22:47:48.760

我对多处理插件没有任何经验，但如果你用这样的方式子类化插件：

```
from nose.plugins.multiprocess import MultiProcess

PLUGIN = None

class TimeoutMultiProcess(MultiProcess):
    def configure(self, options, conf):
        global PLUGIN
        PLUGIN = self
        super(TimeoutMultiProcess, self).configure(options, conf)
        if not self.enabled:
            return 
```

然后您可以创建自己的测试运行脚本，例如：

```
import unittest

class TestA(unittest.TestCase):

    def setUp(self):
        from runtest import PLUGIN
        print PLUGIN.config.multiprocess_timeout

    def test_a(self):
        pass

    def test_b(self):
        pass

if __name__ == '__main__':
    from runtest import TimeoutMultiProcess
    import nose
    nose.main(addplugins=[TimeoutMultiProcess()], defaultTest="./test.py") 
```

您将能够`config.multiprocess_timeout`在测试中将 更改为不同的值。我不确定它是否适合你，但值得一试。

# ios - 仅将新数据从服务器推送到 iPad

> ID：12822889
> 
> 赞同：0
> 
> 时间：2012-10-10T15:22:25.583
> 
> 标签：ios, ipad, networking, push, apple-push-notifications

我正在尝试创建一个应用程序，只要数据库中有任何更改（就像邮件应用程序的工作方式一样），服务器就会将更新/新数据推送到 iPad。我认为 APNS 在这种情况下不起作用，但我可能是错的。谁能建议任何获得此功能的好方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T15:44:58.327

您可能会发现[这篇关于推送技术的维基百科文章](http://en.wikipedia.org/wiki/Push_technology#Long_polling)很有趣，特别是它处理“长轮询”的部分。您可以在[此处获得 ios 长轮询的示例实现](https://stackoverflow.com/questions/6300756/long-polling-in-objective-c)（也可以查看[其他帖子](https://stackoverflow.com/questions/1424608/nsurlconnection-timeout)）。

另一方面，您可以尝试使用 APNS，以便服务器在新数据可用时通知应用程序，然后应用程序（可能在一些用户交互之后）可以获得新数据。

# matlab - 通过取消背景检测红绿蓝

> ID：12822893
> 
> 赞同：1
> 
> 时间：2012-10-10T15:22:31.270
> 
> 标签：matlab, image-processing

我有连续的图像采集，并且在相机的背景上有一张白纸（面对相机）

由于房间中使用的灯泡，仅具有白色背景的图像会产生绿蓝色调，从而导致`GREEN`以下代码的输出

```
 green = im(:,:,2);
   red = im(:,:,1);
   if sum( green(:)) > sum(red(:))
       disp('green');
   else
       disp('red');
   end 
```

有没有办法让`CANCEL`白纸背景只处理将放在相机前面的颜色对象？

颜色对象将是红色、绿色和蓝色方块

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T15:26:53.610

您测试绿色或红色的方式存在根本缺陷——您需要使用合适的阈值来寻找主要颜色，否则您会得到误报。例如

```
threshold = 0.7;   % determine a suitable threshold empirically
blue = sum(sum(im(:,:,3)));
green = sum(sum(im(:,:,2)));
red = sum(sum(im(:,:,1)));
total = red + green + blue;
if (red / total > threshold)
    disp("red");
elseif (green / total > threshold)
    disp("green");
elseif (blue / total > threshold)
    disp("blue");
else
    disp("indeterminate colour");
end 
```

# .htaccess - 自己网站的虚荣网址

> ID：12822894
> 
> 赞同：1
> 
> 时间：2012-10-10T15:22:32.207
> 
> 标签：.htaccess, vanity-url

你好，我尝试了太多，我找不到解决方案，所以我决定在这里问，目前我正在使用 wordpress 网站，我的页面和帖子链接将是 www.mydomain.com/postname，我想让会员用户资料链接像 www .mydomain.com/user/profilename 必须重定向到 profile.php?user=Username

目前我在.htaccess中有这个代码：

```
IndexIgnore .htaccess */.??* *~ *# */HEADER* */README* */_vti*
<Limit GET POST>
order deny,allow
deny from all
allow from all
</Limit>

<Limit PUT DELETE>
order deny,allow
deny from all
</Limit>

AuthName sampcnc.com

# BEGIN WordPress
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
</IfModule> 
```

所以请帮助如何做到这一点，在此先感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T15:59:10.527

> 我想让会员用户个人资料链接像 www.mydomain.com/user/profilename 必须重定向到 profile.php?user=Username

在你的 wordpress 规则之前`# BEGIN WordPress`，添加这些：

```
RewriteEngine On
RewriteRule ^/?user/(.*)$ /profile.php?user=$1 [L,QSA] 
```

因此，当有人进入`www.mydomain.com/user/profilename`浏览器的 URL 地址栏时，他们会在`/profile.php?user=profilename`. 您只需要确保您生成的任何链接都与`/user/profilename`版本相似。

# verilog - Verilog：简单的 I2C 读取操作

> ID：12822895
> 
> 赞同：0
> 
> 时间：2012-10-10T15:22:34.937
> 
> 标签：verilog

我编写了一个程序来从 Microchip I2C EEPROM 24XX64 读取数据。最初，我能够从从站获得指示读取操作的命令字节的确认。也许，我能够在模型模拟器中看到 stL（写驱动低信号）而不是数据位。我想知道造成这种情况的原因以及必须做些什么来克服这个信号。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T17:57:07.283

要从 I2C 从机读取，通常必须先*写入*寄存器地址。读取过程如下：

*   开始
*   设备地址 + WRITE
*   寄存器地址（字节数取决于从机）
*   重复开始
*   设备地址 + 读取
*   从 ACK
*   主读取字节和 NACKs 当它有足够的时候
*   停止

您是否进行了写入以设置读取的寄存器地址？

# php - 有条件地从字符串中删除一个单词？

> ID：12822897
> 
> 赞同：3
> 
> 时间：2012-10-10T15:22:41.380
> 
> 标签：php

我找到了与我正在寻找的答案***相似的答案，但不是完全解决我的问题的答案。***

用户单击我页面上的链接，该链接将他们带到 Google 图书并进行搜索。但是，如果书名中的第一个单词包含缩略语，那么一切都会被抛弃，我的更正似乎都不起作用。

示例：我页面上的链接如下所示：

```
mysite.com/book-search?bookauthor=Lance Armstrong&booktitle=It's Not About the Bike 
```

但是，当我运行这个时：

```
$bookTitle = $_GET['booktitle'] 
```

我得到了相同的标题，但删除了“It's”中的撇号。这足以完全摆脱 Google 图书搜索并且不返回任何结果。

执行搜索的 cURL 会话中的端点如下所示：

```
https://www.googleapis.com/books/v1/volumes?q=intitle:' . $bookTitle . '+inauthor:' . $bookAuthor; 
```

自己试试——

[https://www.googleapis.com/books/v1/volumes?q=intitle:It%27s+Not_About+The+Bike+inauthor:Lance+Armstrong](https://www.googleapis.com/books/v1/volumes?q=intitle:It%27s+Not_About+The+Bike+inauthor:Lance+Armstrong)

返回完全不同的结果

[https://www.googleapis.com/books/v1/volumes?q=intitle:Its+Not_About+The+Bike+inauthor:Lance+Armstrong](https://www.googleapis.com/books/v1/volumes?q=intitle:Its+Not_About+The+Bike+inauthor:Lance+Armstrong)

你会认为，如果我对字符串进行 urlencoded，就可以解决问题。但事实并非如此。尽管如此，由于我无法理解的原因，当我这样做时：

```
$google_endpoint_a = 'https://www.googleapis.com/books/v1/volumes?q=intitle:' . urlencode($bookTitle) . '+inauthor:' . urlencode($bookAuthor); 
```

...当将 urlencoding 传递给 GoogleAPI 时，它会被剥离，我再次得到零结果搜索。

有人可以帮我解决这个问题吗？我已经尝试了我能想到的一切。

**哦 - 这是奖励**- 只有当字符串中的第一个单词包含撇号时才会发生这种情况。所以它发生在像“这不是关于自行车”和“不要眨眼”这样的书名上。换句话说，撇号似乎并不重要。（例如，作者比尔·奥莱利（Bill O'Reilly）。）

如果字符串中包含撇号，是否有一种简单的方法可以从字符串中删除第一个单词？或者，还有更好的方法？

***真正丑陋的解决方案：***

所以 PHP 通过 urldecode() 传递 $_GET 变量。因此，即使它很丑陋，这就是我最终解决问题的方法，尽管我希望有人会想出更好的方法。

在通过 URL 传递变量之前，我将撇号替换为一串乱码，如下所示：

```
$booktitle = str_replace("'", "W5x32RS97", $booktitle); 
```

然后运行这个：

```
$bookTitleTemp = $_GET('booktitle');
$bookTitle = str_replace("W5x32RS97", "'", $bookTitleTemp); 
```

突然间，一切正常。但是必须有更好的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T15:30:05.007

您没有尝试在标题字符串中替换 'by \' 吗？我的意思是，而不是：这不是关于自行车，使用这个：这不是关于自行车

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T15:36:35.870

如果没有撇号，您可以删除`intitle:`并仅使用以下字符串：

```
$google_endpoint_a = 'https://www.googleapis.com/books/v1/volumes?q=' . urlencode($bookTitle) . '+inauthor:' . urlencode($bookAuthor); 
```

[https://www.googleapis.com/books/v1/volumes?q=Its+Not_About+The+Bike&inauthor:Lance+Armstrong](https://www.googleapis.com/books/v1/volumes?q=Its+Not_About+The+Bike&inauthor:Lance+Armstrong)

**更新**

如果第一个单词有撇号，要编写要使用的条件`intitle`，您可以执行以下操作：

```
$pieces = explode(" ", $bookTitle);

if (strpos($pieces[0], "'") !== FALSE) {
    $google_endpoint_a = 'https://www.googleapis.com/books/v1/volumes?q=' . urlencode($bookTitle) . '+inauthor:' . urlencode($bookAuthor);
}
else {
    $google_endpoint_a = 'https://www.googleapis.com/books/v1/volumes?q=intitle:' . urlencode($bookTitle) . '+inauthor:' . urlencode($bookAuthor);
} 
```

我还想看看之前对变量进行编码是否可行：

```
$bookTitle = urlencode($_GET[booktitle]); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T16:04:35.173

绝望的疾病需要绝望的治疗。

```
$translation = array("aint" => "ain't", "arent" => "aren't", "cant" => "can't", "cantve" => "can't've", "cause" => "'cause", "couldve" => "could've", "couldnt" => "couldn't", "couldntve" => "couldn't've", "didnt" => "didn't", "doesnt" => "doesn't", "dont" => "don't", "hadnt" => "hadn't", "hadntve" => "hadn't've", "hasnt" => "hasn't", "havent" => "haven't", "hed" => "he'd", "hedve" => "he'd've", "hell" => "he'll", "hellve" => "he'll've", "hes" => "he's", "hows" => "how's", "Id" => "I'd", "Idve" => "I'd've", "Ill" => "I'll", "Illve" => "I'll've", "Im" => "I'm", "Ive" => "I've", "isnt" => "isn't", "itd" => "it'd", "itdve" => "it'd've", "itll" => "it'll", "itllve" => "it'll've", "its" => "it's", "lets" => "let's", "maam" => "ma'am", "mightve" => "might've", "mightnt" => "mightn't", "mightntve" => "mightn't've", "mustve" => "must've", "mustnt" => "mustn't", "mustntve" => "mustn't've", "oclock" => "o'clock", "oughtnt" => "oughtn't", "oughtntve" => "oughtn't've", "shant" => "shan't", "shantve" => "shan't've", "shed" => "she'd", "shedve" => "she'd've", "shell" => "she'll", "shellve" => "she'll've", "shes" => "she's", "shouldve" => "should've", "shouldnt" => "shouldn't", "shouldntve" => "shouldn't've", "sos" => "so's", "thats" => "that's", "thered" => "there'd", "theres" => "there's", "theyd" => "they'd", "theyll" => "they'll", "theyllve" => "they'll've", "theyre" => "they're", "theyve" => "they've", "wasnt" => "wasn't", "wed" => "we'd", "well" => "we'll", "wellve" => "we'll've", "were" => "we're", "weve" => "we've", "werent" => "weren't", "whatll" => "what'll", "whatllve" => "what'll've", "whatre" => "what're", "whats" => "what's", "whatve" => "what've", "whens" => "when's", "whenve" => "when've", "whered" => "where'd", "wheres" => "where's", "whereve" => "where've", "wholl" => "who'll", "whollve" => "who'll've", "whos" => "who's", "whove" => "who've", "whys" => "why's", "willve" => "will've", "wont" => "won't", "wontve" => "won't've", "wouldve" => "would've", "wouldnt" => "wouldn't", "wouldntve" => "wouldn't've", "yall" => "y'all", "yalldve" => "y'all'd've", "yallre" => "y'all're", "yallve" => "y'all've", "youd" => "you'd", "youdve" => "you'd've", "youll" => "you'll", "youllve" => "you'll've", "youre" => "you're", "youve" => "you've", );

$bookTitle = strtr($bookTitle, $translation); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-10T15:42:19.800

如果要删除第一个单词中的任何撇号，则只需测试撇号的字符串位置是否低于第一个空格。如果是，则将其删除。

```
if(strpos($bookTitle,"'") < strpos($bookTitle," ")){
    $bookTitle = preg_replace('/\'/', '', $bookTitle, 1);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-10T15:28:37.073

在您的链接中使用“It\'s”而不是 IT's

# jsf - 使用 JSF 警告用户电子邮件无效

> ID：12822898
> 
> 赞同：0
> 
> 时间：2012-10-10T15:22:44.180
> 
> 标签：jsf, validation

如果他的电子邮件似乎无效，我想*警告*用户，但如果他愿意，仍然允许他提交电子邮件。正如我所读到的，除了发送确认消息之外，没有简单的方法来验证电子邮件，但我仍然想警告他一些愚蠢的错误，因为忘记在 gmail 后面加上“.com”。

我正在使用 JSF，代码如下所示：

XHTML

```
<h:inputText id="email" 
    required="true" requiredMessage="Required field" 
    value="#{signupBean.email}">
 <f:ajax 
      event="valueChange" 
      listener="#{signupBean.validateEmail}"/>
</h:inputText>
<h:message for="email"/> 
```

注册豆

```
public void validateEmail(AjaxBehaviorEvent event){
    if (email != null && !email.matches(emailRegex)){
        String id = event.getComponent().getClientId();
        FacesMessage msg = new FacesMessage(FacesMessage.SEVERITY_WARN, "Your e-mail seems invalid", "Did you miss the '@' or '.com'?");
        FacesContext.getCurrentInstance().addMessage(id, msg);
    }
} 
```

实际上，消息丢失，显示为警告日志。`id`出现的是，`j_id_f:email`但如果我硬编码为`email`. 另外，我尝试过使用`action`而不是`listener`，但甚至没有调用该方法！

如果这是要走的路，或者是否有某种方法可以仅在 JSF 中进行这种“弱”验证，我想要一些建议。我正在使用纯 JSF，但会考虑使用扩展。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T16:12:07.717

您忘记更新`<h:message>`完整的 ajax 请求，因此 JSF 根本没有机会在 UI 中显示消息。

相应地修复它：

```
<f:ajax ... render="m_email" />
...
<h:message id="m_email" ... /> 
```

# javascript - 扩展权限 publish_actions

> ID：12822904
> 
> 赞同：0
> 
> 时间：2012-10-10T15:23:11.630
> 
> 标签：javascript, facebook-graph-api, facebook-javascript-sdk

我正在尝试在用户的时间轴上发布一个操作。我有 2 个用户，开发人员和普通用户（未在应用程序中注册），我可以在开发人员页面上发帖，但不能正常用户

这是我的代码

```
FB.api('/me/MYNAMESPACE:MYACTION?BYOBJECT=' + link, 'post',
   function(response) {
      var msg = 'Error occured';
      if (!response || response.error) {
         if (response.error) {
            msg += '\n\nSomething wrong \n\n' + response.error.message; 
         }
         alert(msg);
      }
      else {
         alert('Done! Please check your activity log');
      }
}); 
```

“链接”编码 url 发送框模式关闭，并检查扩展权限中的许可“publish_actions”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T15:31:22.113

如果该操作未获*批准*，您将无法作为普通用户发布。只有开发人员才能做到这一点。

提交您的操作以供批准。

# c# - 使用 ADOMD.Net 从 SSAS 获取翻译

> ID：12822906
> 
> 赞同：1
> 
> 时间：2012-10-10T15:23:19.600
> 
> 标签：c#, sql-server, ssas, adomd.net

从 SSAS 读取元数据（包括翻译）的最佳方式是什么？
到目前为止，ADOMD.Net 非常方便，但我找不到访问翻译的方法。

我需要为自定义多维数据集浏览器填充元数据，并且不能依赖 SSAS 为我进行翻译。由于我们客户的限制，客户端应用程序无法直接访问 SSAS 服务器，而是通过链接的 sql 服务器传递 MDX 查询。因此，SSAS 无法确定客户端计算机的文化设置。这就是为什么我想通过使用 SSAS 扩展将所有元数据保存到可访问的数据库中。

长话短说：如何使用 C# 访问驻留在 SSAS 中的翻译？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T15:52:38.773

这是一个奇怪的要求，我不知道它是怎么做到的，但是你能解释一下你为什么要经历所有这些麻烦来访问你的多维数据集吗？我只能想象它与安全有关。如果是这样，我可以建议您查看[此](http://msdn.microsoft.com/en-us/library/gg492140.aspx)链接，该链接解释了如何配置对 Analysis Services 的 HTTP 访问。该链接在 SQL 2012 上被标记，但它甚至在 2005 上也有效（我已经完成了）

# gwt - gwt - 如何在我的 gwt 项目中使用第 3 方 java 库？

> ID：12822907
> 
> 赞同：0
> 
> 时间：2012-10-10T15:23:20.880
> 
> 标签：gwt, jar, java

我创建了一个`Editor`gwt 项目，效果很好。

现在我想将编辑器的数据连接到一个数据库，所以我使用了一个`3rd party database helper tool`。

我将其添加`db tool jar`到我的 gwt 项目中，没有任何抱怨。我还使用这个工具编写了 db 相关代码。

但我就是无法在网页中运行我的 gwt 项目。

我的网络浏览器的 gwt 控制台中的错误信息`can't find the source/.xml for the db helper tool`至少是这样的。

我该如何管理？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T12:16:38.737

您必须在代码的服务器端使用 DB-Tool 并通过 RPC 将数据检索到客户端！

请参阅：[https ://developers.google.com/web-toolkit/doc/latest/tutorial/RPC](https://developers.google.com/web-toolkit/doc/latest/tutorial/RPC)

# sql - 在 PL/SQL 变量名称中使用下划线或大写字母

> ID：12822909
> 
> 赞同：3
> 
> 时间：2012-10-10T15:23:29.130
> 
> 标签：sql, oracle, plsql

PL/SQL 中的变量名应该使用下划线还是大写字母来分隔单词？

`this_is_my_variable`还是`thisIsMyVariable`？

我找不到明确的答案，而且我都见过。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-10T15:25:16.217

PL/SQL 使用第一种样式：`this_is_my_variable`.

它是 PL/SQL 普遍接受的编码风格。

所有文档和示例代码都是这样编写的。所有关于 PL/SQL 的 Oracle 文档和课程都使用该约定。

就像 Java 使用另一种（驼峰式）一样。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-10T16:52:58.507

我强烈建议投资[Joe Celko 的 SQL Programming Style](https://rads.stackoverflow.com/amzn/click/com/0120887975)。

基本上呼应@user1598390，你应该避免骆驼案和把所有东西混在一起。

骆驼案有很多问题，主要是：

1.  必须有一个约定的格式：upcCode、UpcCode、UPCCode。导致混淆，您最终会得到同一个变量的多个版本。
2.  研究发现它会减慢[阅读](http://psycnet.apa.org/psycinfo/1969-10728-001)和[写作](http://www.springerlink.com/content/u04750qx47586421/)的速度。

没有空间：

1.  这是对穿孔卡片的一种保留，由于列数有限，您减少了空间。
2.  我们不使用穿孔卡片。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-10T15:24:35.043

这只是为了命名方便，请使用适合您其他团队成员的任何内容。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-10T15:26:15.743

由你决定。您将看到的大多数 PL/SQL 都使用蛇形大小写（即`variables_like_this`）。就个人而言，我不喜欢这种风格，所以使用驼峰式（即，`likeThis`）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-10T16:35:30.490

遵循您的团队编码规则将是首选。

# tags - jstl 标签在 jar 中重用

> ID：12822912
> 
> 赞同：3
> 
> 时间：2012-10-10T15:23:35.787
> 
> 标签：tags, jstl, code-reuse

真的很简单，不是我以前做过的事情，但我一定错过了一些东西。

我有一个这样的工作 jstl 标签 - 缩写如下：

```
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c"%>
<%@ taglib uri="http://www.springframework.org/tags/form" prefix="form"%>
<%@ taglib uri="http://www.springframework.org/tags" prefix="spring"%>
<%@ attribute name="path" type="java.lang.Object" rtexprvalue="true" required="true"%>
<%@ attribute name="l10nprefix" type="java.lang.String" required="false"%>
<%@ attribute name="cssClass" type="java.lang.String" required="false"%>
...a bunch of code...
<form:select path="${path}" cssClass="${cssClass}">
...some more of code...
</form:select> 
```

现在我想放在一个共享位置（想一个罐子），以便我可以从各种项目中引用它。所以我可以像任何其他 taglib 一样引用它。

我可以看到您将如何做到这一点，因为您正在编写一个扩展 javax.servlet.jsp.tagext.SimpleTagSupport 的 java 类（我记得在某处看到另一个类）。很简单，可以在正确的位置创建一个*.tld*文件。

**但我看不到重用 jstl 标记代码的*标准方法。*有吗？**

我在某处读到了关于 tomcat 将 jstl 标记代码编译为类文件的信息。*大概我可以从.tld*文件中引用生成的类。但是在构建中找到并封装它似乎有点笨拙。最好用java重新编写所有代码并完成，但是下次会发生什么，当它是更复杂的代码时。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T18:59:58.550

谷歌搜索“jar 中的标记文件”会导致这个[Oracle 文档](http://docs.oracle.com/javaee/1.4/tutorial/doc/JSPTags6.html)，其中说：

> 标签文件可以打包在 /META-INF/tags/ 目录中的一个 JAR 文件中，该 JAR 文件安装在 Web 应用程序的 /WEB-INF/lib/ 目录中。放置在这里的标签通常是可重用标签库的一部分，可以在任何 Web 应用程序中轻松使用。
> 
> 捆绑在 JAR 中的标记文件需要标记库描述符。Web 容器会忽略出现在 JAR 中但未在 TLD 中定义的标记文件。

请注意，您的标记是*自定义 JSP 标记*，而不是*JSTL 标记*。JSTL 是 JSP 标准标记库，您的自定义标记不属于该标准库。

# xsd - #AnonType_Apps 中的 XSD 验证错误

> ID：12822913
> 
> 赞同：1
> 
> 时间：2012-10-10T15:23:43.883
> 
> 标签：xsd

当我尝试验证我的 XSD 时，它给出了错误

> S4s-elt-invalid-content.1：“#AnonType_Apps”的内容无效。元素“序列”无效、放错位置或过于频繁地出现。

不知道该怎么办

```
 <?xml version="1.0"?>
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema">
<xs:element name ="Apps">
   <xs:complexType>
       <xs:attribute name ="List_Type" use="required">
          <xs:simpleType>
          <xs:restriction base="xs:string">
               <xs:enumeration value="new releases"/>
               <xs:enumeration value="top rated"/>
               <xs:enumeration value="category list"/>
           </xs:restriction>
           </xs:simpleType>
          </xs:attribute>
        <xs:attribute name ="Server_IP" type="xs:string" fixed="10.144.50.55"/>
        <xs:sequence>
        <xs:element name ="App" minOccurs="1" maxOccurs="20">
           <xs:complexType>
                 <xs:attribute name ="device_type" use="optinal" >
                 <xs:simpleType>
                 <xs:restriction base="xs:string">
                       <xs:enumeration value="tablet"/>
                       <xs:enumeration value="phone"/>
                    </xs:restriction>
            </xs:simpleType>
            </xs:attribute>
                 <xs:attribute name ="app_id" type="xs:string"/>  
                 <xs:attribute name ="installed" type="xs:boolean" default="false"/>
                 <xs:sequence>
                 <xs:element name ="app_name" type="xs:string"></xs:element>
                 <xs:element name ="catogry" minOccurs="1" maxOccurs="3"></xs:element>
                 <xs:element name ="version" type="xs:string"></xs:element>
                 <xs:element name ="description" type="xs:string"></xs:element>
                 <xs:element name ="reviews" use="required">
                    <xs:complexType>
                       <xs:sequence>
                       <xs:element name ="review" minOccurs="0" maxOccurs="unbounded">
                          <xs:complexType>
                          <xs:all>
                             <xs:element name ="reviewer_name" type="xs:string"></xs:element>
                             <xs:element name ="review_date">
                                <xs:complexType>
                                   <xs:restriction base="xs:string">
                                      <xs:pattern value="\d{4}\-\d{2}\-\d{2}"/>
                                   </xs:restriction>
                                 </xs:complexType>
                             </xs:element>
                             </xs:all>
                           </xs:complexType>
                       </xs:element>
                       </xs:sequence>
                    </xs:complexType>
                </xs:element>
                <xs:element name ="review_time">
                   <xs:complexType>
                      <xs:restriction base="xs:string">
                          <xs:pattern value="\d{2}:\d{2}:\d{}"/>
                      </xs:restriction>
                   </xs:complexType>
               </xs:element>
               <xs:element name ="content" type="xs:string"></xs:element>
               <xs:element name ="rating">
                  <xs:complexType>                                
                      <xs:restriction base="xs:float">
                         <xs:minInclusive value="0" />
                         <xs:maxInclusive value="5" />
                     </xs:restriction>
                 </xs:complexType>
             </xs:element>
            </xs:sequence>
         </xs:complexType>
       </xs:element>
       </xs:sequence>
  </xs:complexType>
</xs:element>
</xs:schema> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T15:47:10.973

您的 xs:sequence 元素需要紧跟在 complexType 元素上。

您的 review_date 和 review_time 元素应该是带有限制的 simpleType。

如果你解决了这些问题，你的 xsd 似乎是有效的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T15:55:15.237

在一个`complexType`元素中，内容模型在最前面，属性声明在最后。移动最外面的`sequence`元素，使其成为复杂类型的第一个子元素。

您可能想尝试找到一个语法感知编辑器来编辑模式文档，以提醒您此类问题。

此片段中的其他语法问题：

*   其他`complexType`元素具有相同的语法错误，即把它们的属性声明放在​​首位。

*   如果您希望类型是`rating`xs:float 的限制，那么您希望它具有简单类型，而不是复杂类型。

*   `review_time`和同上`review_date`。

*   类型的模式`review_time`不是合法的正则表达式：大括号可能包含关于（匹配字符串）子表达式的最小和/或最大出现的信息，以各种形式，但它们必须包含*something*，因此`\d{}`不是合法的表达。放下空的大括号，或者`\d{1}`如果你喜欢就做，或者让它说出你想要的。

*   该`xs:element`元素没有名为`use`;的属性。我想你可能想说`<xs:element name="reviews" minOccurs="1" maxOccurs="1">`...

*   该`use`属性不接受该值`optinal`。

找编辑！

# java - 从 Android 中的套接字接收图像

> ID：12822917
> 
> 赞同：2
> 
> 时间：2012-10-10T15:23:49.477
> 
> 标签：java, android

> **可能重复：**
> [将输入流转换为位图](https://stackoverflow.com/questions/6612263/converting-input-stream-into-bitmap)

我正在尝试通过`BitmapFactory.decodeInputStream(Input Stream)`方法通过套接字接收作为字节数组发送的多个图像，但我收到错误消息：`Decoder returned false.`

这是我的代码：

```
while(true)
{   
    this.image=BitmapFactory.decodeStream(in);
    imgView.setImageBitmap(image);

    if(!notreceiving)
    {           
        pBar.setVisibility(View.GONE);
        loadingText.setVisibility(View.GONE);
        notreceiving=true;
    }           
} 
```

# ios6 - 自定义 UIActivityViewController IOS6

> ID：12822919
> 
> 赞同：3
> 
> 时间：2012-10-10T15:23:54.880
> 
> 标签：ios6

我已经创建了一个`UIActivityViewController`，并且想知道在出现 Mail-Composer 时是否可以更改导航栏的颜色？

例如，我已经尝试过：

```
activityViewController.navigationController.toolbar.barStyle = UIBarStyleBlackOpaque; 
```

但似乎没有任何效果

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T02:17:48.750

如果你想全面改变颜色，你可以做类似 [[UINavigationBar appearance] setTintColor:yourColor];

# wordpress - Wordpress 密码保护存档和自定义帖子类型的单个帖子

> ID：12822923
> 
> 赞同：4
> 
> 时间：2012-10-10T15:24:05.017
> 
> 标签：wordpress, password-protection, custom-post-type

是否有一种简单的方法来密码保护自定义帖子类型的存档和单个帖子？

我找到了这篇关于密码保护单个帖子的文章，但我仍然迷失在存档循环中。我希望它只显示密码框，直到用户登录。

[https://wordpress.stackexchange.com/questions/4952/forcing-all-posts-associated-with-a-custom-post-type-to-be-private](https://wordpress.stackexchange.com/questions/4952/forcing-all-posts-associated-with-a-custom-post-type-to-be-private)

谢谢，

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-11-18T21:50:04.243

我发现快速密码保护档案的唯一方法是创建一个模板来检索自定义帖子类型数据并将其与可以受密码保护的页面相关联。 [http://codex.wordpress.org/Page_Templates](http://codex.wordpress.org/Page_Templates)

一旦该页面受密码保护，您就可以找到将其应用于 single-{your_custom_post_type}.php 的帖子 ID，如下所示：

```
<?php
if ( !post_password_required('{protected_post_id}') ) : ?>

//protected content here

<?php else:
    //show the password form of the protected page
    echo get_the_password_form('{protected_post_id}');                 

endif; ?> 
```

这使您不必对自定义帖子类型下的每个帖子进行密码保护。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-05-17T14:40:33.013

对于单个页面，您可以编辑`single.php`并添加以下内容：

```
<?php

if ( is_user_logged_in() ) {
  // Show Post to Logged in User
} 
else {
  //Show password field
}

?> 
```

如果像您提到的那样，您使用的是自定义帖子类型或存档模板，您可以将与上述相同的方法应用于`single-[custom-post-type-name].php`或`archive.php`

# security - Salesforce - 报告权限问题数据丢失

> ID：12822924
> 
> 赞同：1
> 
> 时间：2012-10-10T15:24:09.837
> 
> 标签：security, salesforce, cloud, crm

根据用户的不同，通过仪表板查看时报告数据会丢失。

-在安全设置中，我授予了组织范围的读/写权限。
- 报告基于两个具有主/子关系的自定义数据对象（也设置为读/写。）

-报告文件夹也设置为“读/写”，所有用户都有权限。

还有什么我忘了检查的吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T22:00:14.763

您遇到什么错误？“权限不足”？或者也许报告加载正常但只显示 0 行？

在深入查看详细报告时，您需要确保

1.  查看用户在其个人资料中对主对象和子对象至少具有读取权限
2.  他还必须对报告中使用的所有字段（列和过滤器）具有读取权限。如果它们中的任何一个是公式 -> 也要检查它们的源字段）。
3.  报告是否在过滤器中使用“我的机会”？还是不切实际的日期标准？如果仪表板有一段时间没有刷新，即使日期过滤器也会让您感到悲伤。
4.  在某些情况下，角色层次结构与报表一起保存 - 如果用户与仪表板的运行用户位于角色层次结构的不同分支中，例如，您可能必须将其翻转到顶级角色。运行报告，检查角色名称的顶部，根据需要进行调整并保存。

也许最好的调试方法是以该用户身份登录并尝试从头开始重新创建此报告。如果您甚至无法选择正确的报告类型 - 这看起来像场景 1。如果缺少字段 - 2。

# php - 从不同的表中获取 ID 的名称

> ID：12822927
> 
> 赞同：2
> 
> 时间：2012-10-10T15:24:26.370
> 
> 标签：php, mysql

我有一个包含大量数据库数据的数组。在数组中，有两个名为`teameinsid`和的字段`teamzweiid`。查询是一个非常简单的查询：

```
$spiel = mysql_query("select teameinsid, teamzweiid from begegnung", $connection) or die("Keine passende Begegnung"); 
```

我需要在数据库中搜索这些 ID 的名称。名称在不同的表中。

我现在拥有的是以下内容：

```
while($tmp = mysql_fetch_array($spiel)){
 $teins = $tmp['teameinsid'];
 $tzwei = $tmp['teamzweiid'];
} 
```

所以我知道这两个ID，但我不知道在哪里保存名称。如果我尝试：

```
$name = mysql_query("select name from team where teameinsid = $teins", $con) 
```

每次都会被覆盖。我该如何管理？

编辑：

数据库方案：

Table Team : id, name Table Begegnung: id, teameinsid, teamzweiid

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T15:33:45.477

我对此进行了测试，如果您在 $speil 中的查询是这样的，它就可以工作：

```
SELECT B.*, T1.name AS teamnameeins, T2.name as teamnamezwei FROM begegnung AS B
JOIN team AS T1 ON T1.id = B.teameinsid
JOIN team AS T2 ON T2.id = B.teamzweiid 
```

[http://dev.mysql.com/doc/refman/5.0/en/join.html](http://dev.mysql.com/doc/refman/5.0/en/join.html)

您现在应该像这样使用您的代码：

```
while($tmp = mysql_fetch_array($spiel)){
 $teins = $tmp['teamnameeins'];
 $tzwei = $tmp['teamnamezwei'];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T15:34:22.383

像这样更改您的代码

```
while($tmp = mysql_fetch_array($spiel)){
     $teins[] = $tmp['teameinsid'];
     $tzwei[] = $tmp['teamzweiid'];
    } 
```

现在

```
$ids=implode ( ',' ,  $teins);

$name = mysql_query("select name from team where teameinsid in($ids)", $con) 
```

# facebook-graph-api - 在照片发布消息中添加指向您的 Facebook 应用程序的链接

> ID：12822936
> 
> 赞同：1
> 
> 时间：2012-10-10T15:25:03.280
> 
> 标签：facebook-graph-api

![在此处输入图像描述](../Images/d19a77d78e2964b8101d04045bc31528.png)

谁能告诉我这个 facebook 应用程序是如何使“MemeGen”成为这篇文章中的链接的？我有一个照片上传应用程序，一切都很好，但我不知道如何在帖子中粘贴这样的链接。

这是他们设法进入消息的标记。

```
<a href="http://www.facebook.com/apps/application.php?id=302156236502659" data-hovercard="/ajax/hovercard/application.php?id=302156236502659" aria-owns="ukp31lp1" aria-controls="ukp31lp1" aria-haspopup="true" id="js_4">MemeGen</a> 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T15:35:19.097

这显然不是普通的照片上传，而是一个 Open Graph 操作，它发布用户生成的图像 – [https://developers.facebook.com/docs/opengraph/actions/#usergenerated](https://developers.facebook.com/docs/opengraph/actions/#usergenerated)

（在那个时候，这违反了规则，因为动作只应该发布用户发布动作的那一刻用他的相机拍摄的真实照片——我怀疑这个带有文字的特定图像有资格作为这样的。）

# ios - 通过 Relay Server 连接 iOS App SAP-SUP

> ID：12822942
> 
> 赞同：2
> 
> 时间：2012-10-10T15:25:24.633
> 
> 标签：ios, sap, sup

我正在尝试通过中继服务器连接到 SAP-SUP，我遵循了[操作方法：将现有对象 API 应用程序转换为 Mobile SDK 2.1 ESD #3](http://www.sdn.sap.com/irj/scn/go/portal/prtroot/docs/library/uuid/40df7004-63a6-2f10-a29a-b626dea85bfa?QuickLink=index&overridelayout=true&55903294326891)我成功注册了应用程序，但我无法同步。我不断收到这样的错误 216 或 219：

```
(MOBILINK_COMMUNICATIONS_ERROR) %1:219 %2: %3:0Details: StreamErrorCode = 219 
```

216 代表 - 尝试解析 HTTP 标头时发生错误。标头可能格式不正确。

219 代表 - 在 HTTP 标头中读取了意外字符。标头可能格式不正确，或者另一端可能根本没有发送 HTTP。

```
SUPConnectionProfile *sp = [RHDC1RHDC1DB getSynchronizationProfile];

[sp setAsyncReplay:NO];
[sp setUser:kSUPLoginUsername];
[sp setPassword:kSUPLoginPassword];
[sp setServerName:kSUPServerName];
[sp setPortNumber:kSUPServerPort];    
[sp setNetworkProtocol:@"https"];
[sp setNetworkStreamParams:@"trusted_certificates=afaria.xpto.en.cer;compression=zlib;url_suffix=/ias_relay_server/server/rs_server.dll/SUPRBSFarm"]; 
```

NetworkStreamParameters 看起来不错。我找不到那条线上的错误！有人通过中继服务器成功连接吗？或者可以在我的代码中找到错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T10:06:46.837

事实证明，而不是服务器配置：

```
[sp setNetworkStreamParams:@"trusted_certificates=afaria.xpto.en.cer;compression=zlib;url_suffix=/ias_relay_server/server/rs_server.dll/SUPRBSFarm"]; 
```

我应该使用客户端配置：

```
[sp setNetworkStreamParams:@"trusted_certificates=afaria.xpto.en.cer;compression=zlib;url_suffix=/ias_relay_server/cliente/rs_client.dll/SUPRBSFarm"]; 
```

代码错误并没有为我指明正确的方向，但这是解决它的方法。

# c# - C# 和 XAML 中的取消按钮功能

> ID：12822943
> 
> 赞同：4
> 
> 时间：2012-10-10T15:25:25.513
> 
> 标签：c#, wpf, cancel-button

我试图散列 WPF 应用程序的取消按钮的功能。目前我主要关注两个功能：

```
 private void AnalysisClick(object sender, RoutedEventArgs e)
    {
        model.RunAnalysis();
    }
    private void CancelClick(object sender, RoutedEventArgs e)
    {

        model.RunAnalysis().Abort;  //Pseudo-code, needs help!
        MessageBox.Show("The Analysis was cancelled.", "Operation Cancelled", MessageBoxButton.YesNo);
    } 
```

'AnalysisClick' 功能由一个名为 Begin 的按钮启动。“CancelClick”按钮的目的是停止分析并提供一个对话框，通知用户测试已停止。实现这一目标的最佳方法是什么？

**编辑** 我目前正在根据用户的建议`BackgroundWorker`研究[Microsoft 异步编程模型。](http://msdn.microsoft.com/en-us/library/ms228963%28v=vs.85%29.aspx)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T17:23:20.863

我同意上面对您的问题的评论，但是如果您想快速尝试一些事情，任务是执行异步操作的好方法，并且能够取消这些任务。像这样的东西应该可以工作，或者至少让你开始：

```
private CancellationTokenSource _cancelAnalysisTask = new CancellationTokenSource();
    private Task _analysisTask;

    private void AnalysisClick(object sender, RoutedEventArgs e)
    {
        _analysisTask = Task.Factory.StartNew(() =>
            {
                if (_cancelAnalysisTask.IsCancellationRequested)
                        return;
                model.RunAnalysis();
            });
    }

    private void CancelClick(object sender, RoutedEventArgs e)
    {
        if (_analysisTask != null)
        {
            _cancelAnalysisTask.Cancel();
            _analysisTask = null;
            MessageBox.Show("The Analysis was cancelled.", "Operation Cancelled", MessageBoxButton.OK);
        }
    } 
```

这是一篇简短的文章，我建议将异步功能放入您的 ViewModel 并公开命令。UI 不应该真正知道操作的细节。然后取消任务可以写在 ViewModel 中操作的核心附近/之前，在这种情况下中止昂贵的操作/循环/等更有意义。

# sql-server - 请参阅 SQL Server Profiler 中的运行过程

> ID：12822946
> 
> 赞同：3
> 
> 时间：2012-10-10T15:25:33.623
> 
> 标签：sql-server, sql-server-2008, sql-server-profiler

如何在 SQL Server Profiler 中查看正在运行的过程？

它只显示执行完成的时间。

如果执行时间过长，我有一些程序需要我注意。完成后才知道对我来说没用

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-10T15:45:11.823

SQL Profiler 绝对可以在完成之前向您显示哪些语句、过程和批处理正在运行。

确保您在分析器中选择的模板具有[适用的事件](http://msdn.microsoft.com/en-us/library/ms190176.aspx)，以查看语句/过程何时开始，即

*   SQL:Stmt开始
*   SP：开始
*   SP:StmtStarting（查看 SPROC 中的语句）

除了`*Completed`事件。显然，持续时间、cpu、io 等指标在开始事件中不可用。

您还可以通过更改`Properties`并从`Events`选项卡中选择这些事件来选择这些事件。如果您分析一个非常繁忙的服务器，请确保您应用过滤器`DatabaseName`，`HostName`或者即使`SPID`您足够幸运能够隔离它（您可能需要选中`Show All Events`和`columns`复选框）

# abap - 从 E071K 读取配置数据

> ID：12822948
> 
> 赞同：1
> 
> 时间：2012-10-10T15:25:38.990
> 
> 标签：abap, documentation-generation, transport, sap-basis

我正在使用“配置记录器”功能，该功能将通过在 E070 中查找任务然后在 E071K 中查找密钥来记录给定的请求。

E071K 只有表和键（键由连接的键域组成）。有没有人知道 FM 或类来阅读链接到 E071K 中的密钥的表条目？

这将极大地帮助我。

干杯，T。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T17:54:00.420

...您确实意识到密钥可以是单数 *，这意味着将读取整个表格，并且在某些情况下这可能会使您的文档记录器崩溃？;-)

您还将知道，当传输以 * 结尾的条目时，目标系统中与部分键对应的条目在导入之前会被删除，因此您将无法记录真正的更改而不检查两者源和目标。我只是为了其他愿意尝试这一点的可怜人而重申这一点。

除此之外，还有一些功能模块可以在某些条件下读取涉及的表的内容 - 即`SRTT_TABLE_GET_BY_KEYLIST`- 但请注意，您必须处理各种表格异常 - 非字符字段，集群表，整个作品 - 为你自己。

# r - prop.test 迭代

> ID：12822949
> 
> 赞同：0
> 
> 时间：2012-10-10T15:25:41.643
> 
> 标签：r

我有这样的情况：首先我有一个data.frame：

> DF
> COL1 COL2
> 29 1623
> 27 1600
> 30 1617
> 8 1620

然后，我有一个像这样的向量：

> ```
>  [1]        [2]  
>  50         1602 
> ```

我需要的是将 DF 的第一行与向量绑定以具有：

输出

> [1] [2]
> 29 1623
> 50 1602

在此输出上，我想使用以下代码应用 prop.test：

> prop.test(输出[,1], 输出[,2], 正确=假)

我需要在整个 DF 上执行此操作，因此：

first：将 DF 的第一行与向量绑定第二
个：prop.test
然后再次
first：将 DF 的第二行与向量绑定第二
个：prop.test

如此反复。

请问有什么建议吗？

多谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T15:36:20.170

```
apply(DF, 1, function(x) prop.test( rbind(x, c(50, 1602) ) ,correct=FALSE ) ) 
```

# mysql - MySQL：从组中选择最后一个，但有条件

> ID：12822952
> 
> 赞同：2
> 
> 时间：2012-10-10T15:25:48.803
> 
> 标签：mysql, sql, select, group-by

我有下表：

```
name     created_for created_on            status
jen      2012-05-27  2012-02-15 12:14:09    Y
joe      2012-10-01  2012-02-15 12:22:09    Y
bob      2012-10-01  2012-02-15 12:47:09    N
jim      2012-10-01  2012-02-24 12:47:09    N
jim      2012-10-01  2012-02-29 12:47:09    Y
sam      2012-10-01  2012-03-11 12:47:09    N
sam      2012-10-01  2012-03-15 12:47:09    C
sam      2012-10-01  2012-03-22 12:47:09    Y
tom      2012-10-01  2012-04-10 12:47:09    N
tom      2012-10-01  2012-04-11 12:47:09    N 
```

我要返回的是名称的最后一行，created_on 对于每个 created_for 日期为 2012-10-01 的人，但仅当最后一个条目的状态为 N 时。所以对于上表，我想回来：

```
name     created_on
bob      2012-02-15 12:47:09
tom      2012-04-11 12:47:09 
```

状态条件是什么让我失望。我似乎无法弄清楚在哪里放置“where status ='N'”以获得正确的结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T15:29:19.313

尝试这个：

```
 SELECT t1.*
 FROM
 (
    SELECT name, MAX(created_on) MaxDate
    FROM YourTableName
    GROUP BY name
  ) t1 INNER JOIN YourTableName t2  on t1.name    = t2.name 
                                   AND t1.MaxDate = t2.created_on
 WHERE t2.created_for = '2012-10-01'
   AND t2.status = 'N' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T15:36:15.390

```
select t.*
from MyTable t
inner join (
    select name, max(created_on) max_created_on
    from MyTable
    where created_for = '2012-10-01'
    group by name
) tm on t.name = tm.name and t.created_on = tm.max_created_on
where t.status = 'N' 
```

[SQL 小提琴示例](http://sqlfiddle.com/#!2/1abd1/7)

# php - Doctrine 2.0，连接多个数据库

> ID：12822953
> 
> 赞同：2
> 
> 时间：2012-10-10T15:25:49.817
> 
> 标签：php, pdo, doctrine-orm, sql-server-2008-r2

我在一个项目上遇到了一些麻烦。

我目前正在尝试将 Doctrine 2.0 用于 PHP 项目。
供您参考，我没有安装 symphony 或 zend。

服务器是 MSSQLServer 2008 R2，我正在使用 php_pdo_sqlsrv 驱动程序。

我的问题是关于我的连接配置。

事实上，我只需要配置与服务器主机的连接，并且只在我的实体类中集成数据库名称。

对于我的测试，我使用以下代码进行连接、实例化我的 EntityManager 并获取我的实体：

```
// the connection configuration
$dbParams = array(
    'driver'   => 'pdo_sqlsrv',
    'user'     => 'my_user',
    'password' => 'my_pass',
    'dbname'   => 'dbtest',
    'host' => 'hostname'
);

$config = Doctrine\ORM\Tools\Setup::createAnnotationMetadataConfiguration($paths,     $isDevMode);
$em = EntityManager::create($dbParams, $config);

$entity = $em->find('myEntity', 1);
echo $entity->getLibelle(); 
```

下面是我的班级实体

```
/**
 * @Entity
 * @Table(name="tableEntity")
 */
class Entity
{
    /** @Id @Column(type="integer") @GeneratedValue */
    private $ID_ENTITY;

    /**
     * @Column(type="string")
     */
    private $LIBELLE;

    public function __construct($name)
    {
        $this->LIBELLE = $LIBELLE;        
    }

    public function getID_ENTITY()
    {
        return $this->ID_ENTITY;
    }

    public function getLibelle()
    {
        return $this->LIBELLE;
    }
} 
```

使用这种配置，我没有问题，并且我的“libelle”显示没有问题。
但是我想做的（也许这是一个梦想？）不是配置数据库名称，例如：

```
// the connection configuration without dbname
$dbParams = array(
    'driver'   => 'pdo_sqlsrv',
    'user'     => 'my_user',
    'password' => 'my_pass',
    'host' => 'hostname'
); 
```

并将 dbname 集成到实体中，例如：

```
/**
* @Entity
* @Table(name="DBNAME.tableEntity")
*/ 
```

有什么问题吗？非常感谢您的帮助！

# knockout.js - 在订阅相同的 observable 时获取 observable 的先前值

> ID：12822954
> 
> 赞同：86
> 
> 时间：2012-10-10T15:25:53.837
> 
> 标签：knockout.js, knockout-2.0, observable

在淘汰赛中是否有可能在订阅该 observable 之前获取 observable 的当前值，然后再接收新值？

例子：

```
this.myObservable = ko.observable();
this.myObservable.subscribe(function(newValue){
    //I'd like to get the previous value of 'myObservable' here before it's set to newValue
}); 
```

* * *

## 回答 #1

> 赞同：153
> 
> 时间：2013-08-12T09:49:54.960

```
ko.subscribable.fn.subscribeChanged = function (callback) {
    var oldValue;
    this.subscribe(function (_oldValue) {
        oldValue = _oldValue;
    }, this, 'beforeChange');

    this.subscribe(function (newValue) {
        callback(newValue, oldValue);
    });
}; 
```

像这样使用上面的：

```
MyViewModel.MyObservableProperty.subscribeChanged(function (newValue, oldValue) {

}); 
```

* * *

## 回答 #2

> 赞同：88
> 
> 时间：2012-10-10T16:24:27.087

有一种方法可以像这样订阅之前的值：

```
this.myObservable = ko.observable();
this.myObservable.subscribe(function(previousValue){
    //I'd like to get the previous value of 'myObservable' here before it's set to newValue
}, this, "beforeChange"); 
```

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2014-12-22T09:35:01.417

Beagle90 的答案变化不大。例如，始终返回订阅本身以便能够访问 dispose()。

```
ko.subscribable.fn.subscribeChanged = function (callback) {
    var oldValue;
    this.subscribe(function (_oldValue) {
        oldValue = _oldValue;
    }, this, 'beforeChange');

    var subscription = this.subscribe(function (newValue) {
        callback(newValue, oldValue);
    });

    // always return subscription
    return subscription;
}; 
```

* * *

## 回答 #4

> 赞同：18
> 
> 时间：2015-03-05T23:55:30.790

添加此功能的[拉取请求](https://github.com/knockout/knockout/issues/914)有一些不同的代码，这些代码最终比依赖使用`beforeChange`事件更好。

[迈克尔·贝斯特（ Michael Best](https://github.com/knockout/knockout/issues/914#issuecomment-66697321)）的解决方案的所有功劳

```
ko.subscribable.fn.subscribeChanged = function (callback) {
    var savedValue = this.peek();
    return this.subscribe(function (latestValue) {
        var oldValue = savedValue;
        savedValue = latestValue;
        callback(latestValue, oldValue);
    });
}; 
```

引用迈克尔的话：

> 我最初建议使用`beforeChange`来解决这个问题，但后来意识到它并不总是可靠的（例如，如果你调用`valueHasMutated()`observable）。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-04-08T15:36:54.303

我发现我可以从可写的计算 observable 中调用 peek() 来获取之前的值。

像这样的东西（见[http://jsfiddle.net/4MUWp](http://jsfiddle.net/4MUWp)）：

```
var enclosedObservable = ko.observable();
this.myObservable = ko.computed({
    read: enclosedObservable,
    write: function (newValue) {
        var oldValue = enclosedObservable.peek();
        alert(oldValue);
        enclosedObservable(newValue);
    }
}); 
```

# c# - 从列表框中添加多个数字c#

> ID：12822957
> 
> 赞同：0
> 
> 时间：2012-10-10T15:25:57.260
> 
> 标签：c#, arrays, sum, do-loops

我试图在列表框中将数字加在一起。首先，我将列表框中的数字放入数组和整数中。

我现在想将 list_box 内的所有数字相加，得到一个总数。

我打算解决这个问题的方法是循环并逐步添加每个数字。

任何帮助将不胜感激，因为我刚开始我的 HND 后真的很挣扎，所以我处于非常基础的水平，只涵盖了一些基本方法。

```
 private void rb_sum_CheckedChanged(object sender, EventArgs e)
    {

        //array is needed here at this point
        string boxnumbers = list_box.Text;
        int[] boxnumbers1 = new int[10];

        int answer;

        do
        {
            boxnumbers1 += add.answer();
        }

        while (); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T15:28:01.873

LINQ 的魔力会拯救你，试试**.Sum()**

您的代码没有多大意义，所以我会尝试清除它。我假设您在这样的列表框中有几行数字。

```
1
5
3
6 
```

假设您将其正确加载为整数列表，您可以使用以下方法获得它们的总和：

```
int sum = list_box.Items.Sum(i => (int)i.Value); 
```

如果您将其错误地加载为字符串，则需要对其进行解析：

```
int sum = list_box.Items.Sum(i => int.Parse(i.Value)); 
```

如果这不能解决您的问题，您需要进一步澄清您的问题。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-10T15:31:04.040

for 循环可能更适合您：

```
for(var i = 0; i < boxnumbers1.Count; i++)
{
     answer += boxnumbers1[i];
} 
```

# ruby - IRB 不尊重点 (.) 作为分词符

> ID：12822959
> 
> 赞同：9
> 
> 时间：2012-10-10T15:26:03.263
> 
> 标签：ruby, irb

我在 OS X 上使用 irb，当我按下选项左/右（或 META+B/F）时，光标移动到下一个/上一个单词。但 irb 不会将点 (.) 字符视为单词分隔符。

我尝试将 (.) 添加到 .irbrc，所以现在看起来像这样：

```
Readline.basic_word_break_characters = " \t\n`><=.;|&{(" 
```

但这没有任何效果。

我正在使用库存的 Mountain Lion ruby​​ 和手动编译的 1.9.3，两个版本的 irb 行为相似。点在 bash 和 pry 中也被视为分隔符，因此系统范围的设置可能没问题。

任何帮助表示赞赏，

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-11T13:01:08.777

好的，问题似乎是我的系统中根本没有安装**libreadline 。**安装最新的 readline 并重新编译 ruby​​ 解决了这个问题。

我使用`ftp://ftp.cwru.edu/pub/bash/readline-6.2.tar.gz`了 readline 6.2 from ，它是使用基本的`./configure && make && make install`.

我已经使用**ruby** ​​-build 安装了 ruby​​ 1.9.3-p194 ，并带有以下选项

```
sudo ruby-build 1.9.3-p194 /opt/ruby-1.9.3-p194 CONFIGURE_OPTS="--with-readline-dir=/usr/local" 
```

之后，IRB 开始将点、下划线和一堆其他字符视为单词分隔符。

此外，正常工作的 readline 应该返回如下内容：

```
Readline::VERSION => "6.2" 
```

行为不端的说：

```
Readline::VERSION => "EditLine wrapper" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-01-23T07:27:42.500

如果您遇到上述问题（安装失败或您只需要更多说明），这就是我为使其正常工作所做的工作。

对于使用最新 Mac OS X (10.11.2 El Capitan) 的用户：

`curl ftp://ftp.cwru.edu/pub/bash/readline-6.3.tar.gz > temp-readline.tar.gz`然后用`tar temp-readline.tar.gz`. 然后使用 . 进入该目录`cd readline-6.3`。使用 配置和安装`./configure && make && make install`，就像上面一样。

希望这可以帮助。

# javascript - KnockoutJS Sortable group observableArray 按字段和条件排序

> ID：12822961
> 
> 赞同：1
> 
> 时间：2012-10-10T15:26:03.790
> 
> 标签：javascript, jquery, knockout.js, jquery-ui-sortable

我最近使用了 RP Niemeyer 提供的一个很好的堆栈溢出答案，[KnockoutJS ObservableArray data grouping](https://stackoverflow.com/questions/9877301/knockoutjs-observablearray-data-grouping)，允许我按字段对 observableArray 中的数据进行分组。那工作得很好。问题是它不能很好地与[Knockout Sortable](https://github.com/rniemeyer/knockout-sortable)一起使用。检索 sourceParent 时出现问题。请看下面的小提琴：http: [//jsfiddle.net/mrfunnel/g6rbc](http://jsfiddle.net/mrfunnel/g6rbc)

基本上我有一个嵌套列表，其中任务被分组到路由（未计划）和另一个任务列表（计划）中。我希望能够将路线和任务拖入计划中。如果将路线拖入，则需要将其拆分为任务。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-10T16:21:05.120

该`sortable`绑定仅适用于 observableArrays，因为它需要知道如何将删除的值写回数组。对于计算出的 observable 的结果，它将无法以有意义的方式编写它。

这是您可以构建代码的另一种方法。基本上，您将构建一个 observableArray 路由，每个路由都包含一个 observableArray 任务。就像是：

```
self.tasks.subscribe(function(tasks) {
    var routes = [],
        routeIndex = {};

    ko.utils.arrayForEach(tasks || [], function(task) {
       var routeId = task.routeId(),
           routeTasks = routeIndex[routeId];

       //first time that we have seen this routeID
       if (!routeTasks) {
           //add it to the index, so we can find it without looping next time 
           routeIndex[routeId] = routeTasks = { id: routeId, tasks: ko.observableArray() };
           //add it to the array that we will eventually return
           routes.push(routeTasks);
       }

       routeTasks.tasks.push(task);
    });

    //return an array of routes that each contain an array of tasks
    self.tasksByRoute(routes);       

}); 
```

然后，您可以`beforeMove`在计划任务上使用回调来检查它是否是路由而不是单个任务，并进行如下拆分：

```
self.myDropCallback = function(arg) {
    var spliceArgs;
    //determine if this is really a route rather than an individual task
    if (arg.item && arg.item.tasks) {
       //we will handle the drop ourselves, since we have to split into tasks
       arg.cancelDrop = true;

        //build up args, since first two need to be new index and items to remove
       spliceArgs = [arg.targetIndex, null];
       //add the tasks to the args
       spliceArgs.push.apply(spliceArgs, arg.item.tasks());
       //splice in the tasks at the right index
       arg.targetParent.splice.apply(arg.targetParent, spliceArgs); 

       //remove the originals, after cancel has happened
       setTimeout(function() {
          arg.sourceParent.remove(arg.item);    
       }, 0);                
    }
}; 
```

这是一个更新的示例：http: [//jsfiddle.net/rniemeyer/BeZ2c/](http://jsfiddle.net/rniemeyer/BeZ2c/)。我不确定您是否允许在路线之间进行排序，但我在示例中禁用了它。您可以将单个任务或整个路线放入计划任务中。

# excel - VBA Excel - 提取用括号括起来的每个值

> ID：12822973
> 
> 赞同：1
> 
> 时间：2012-10-10T15:26:57.997
> 
> 标签：excel, vba, extract

我想提取括号括起来的值。

text = "{said} 和 {var2} 以及 {var3} 的人

```
openingParen = InStr(text, "{")
closingParen = InStr(text, "}")
enclosedValue = Mid(text, openingParen + 1, closingParen - openingParen - 1)

phrasevariable1.Value = enclosedValue
phrasevariable2.Value = enclosedValue
phrasevariable3.Value = enclosedValue 
```

此代码仅适用于提取第一个值，有没有办法提取每个变量，并将它们相应地放入文本框 1 -> n

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-10T15:40:42.720

您可以对未知数量的候选标记使用正则表达式；

```
Dim matches As Object
Dim Re As Object: Set Re = CreateObject("vbscript.regexp")
Dim count As Long

Re.Pattern = "{(.*?)}"
Re.Global = True
Set matches = Re.Execute("The man who {said} and also {var2} as well as {var3}")

count = matches.count
For i = 0 To count - 1
    MsgBox matches(i).submatches(0)
Next 
```

*（为Microsoft VBScript 正则表达式*添加一个引用以进行早期绑定）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-10T15:45:11.527

另一种允许任意数量匹配的方法：

```
Const stri As String = "The man who {said} and also {var2} as well as {var3}"
Dim sp

sp = Filter(Split(Replace(Chr(13) & stri, "}", "{" & Chr(13)), "{"), Chr(13), False) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T15:32:21.867

假设你总是有三对括号中的文本，只需创建一个数组变量，并`split`在你的文本字符串上使用来获取值：

```
Dim myArray
myArray = Split(text, "{")

phasevariable1.Value  = Left(myArray(1), InStr(myArray(1), "}") - 1)
phasevariable2.Value  = Left(myArray(2), InStr(myArray(2), "}") - 1)
phasevariable3.Value  = Left(myArray(3), InStr(myArray(3), "}") - 1) 
```

# google-chrome-extension - 如何在 Chrome 插件中将多个域添加到 content_security_policy？

> ID：12822974
> 
> 赞同：9
> 
> 时间：2012-10-10T15:27:02.823
> 
> 标签：google-chrome-extension, content-security-policy

我正在开发一个 Chrome 插件，其中从多个域加载外部脚本。我已经查看了有关如何允许这些域的文档和一些教程。

我检查过的文档：

*   [http://developer.chrome.com/extensions/contentSecurityPolicy.html](http://developer.chrome.com/extensions/contentSecurityPolicy.html)
*   [http://www.html5rocks.com/en/tutorials/security/content-security-policy/](http://www.html5rocks.com/en/tutorials/security/content-security-policy/)
*   [http://dvcs.w3.org/hg/content-security-policy/raw-file/tip/csp-specification.dev.html#syntax](http://dvcs.w3.org/hg/content-security-policy/raw-file/tip/csp-specification.dev.html#syntax)

一切都是一样的，我在 manifest.json 中创建了这条规则：

```
{
  // .. general settings
  "content_security_policy": "script-src 'self' https://ajax.googleapis.com http://mysite.com; object-src 'self'"
} 
```

对此 Chrome 做出以下回应：

```
Could not load extension from '/Users/itarato/Desktop/DRC Tutorial Client'. 
Invalid value for 'content_security_policy': Both 'script-src' and 'object-src' directives must be specified (either explicitly, or implicitly via 'default-src'), and both must whitelist only secure resources. 
You may include any of the following sources: "'self'", "'unsafe-eval'", "http://127.0.0.1", "http://localhost", or any "https://" or "chrome-extension://" origin. 
For more information, see http://developer.chrome.com/extensions/contentSecurityPolicy.html 
```

当然，我尝试了几种组合，但都失败了。只有当我只使用一个域时它才有效。我怎样才能添加更多？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-10T15:37:48.237

您拥有的语法很好，问题是您的`http://mysite.com`来源不安全。Chrome 错误消息中的“仅将安全资源列入白名单”部分就是指这个。您将需要使用`https://mysite.com`.

# c++ - 成员名称和构造函数参数名称之间的冲突

> ID：12822975
> 
> 赞同：8
> 
> 时间：2012-10-10T15:27:09.000
> 
> 标签：c++, class, arguments, naming-conventions

> **可能重复：**
> [C++ 中的成员与方法参数访问](https://stackoverflow.com/questions/885136/members-vs-method-arguments-access-in-c)

我有一个有一些成员的类，比如`x`、和。在它的构造函数中，我不会这样做：`y``width``height`

```
A::A(int x, int y, int width, int height)
{
    x = x;
    y = y;
    width = width;
    height = height;
} 
```

这实际上没有意义，并且当使用 g++ `x`、`y`、编译`width`时会`height`变成奇怪的值（例如`-1405737648`）。

解决这些命名冲突的最佳方法是什么？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-10T15:28:18.673

您可以使用具有相同名称的初始化列表：

```
A::A(int x, int y, int width, int height) :
    x(x),
    y(y),
    width(width),
    height(height)
{
} 
```

如果您不想使用相同的名称，另一种方法是使用不同的名称。一些匈牙利符号的变化浮现在脑海中（我可能会对此感到讨厌）：

```
//data members
int x_;
int y_;
int width_;
int height_;
//constructor
A::A(int x, int y, int width, int height) :
    x_(x),
    y_(y),
    width_(width),
    height_(height)
{
} 
```

但是第一个建议没有错。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-10T15:32:01.527

如果必须在构造函数中使用赋值（而不是使用初始化器列表，这是首选），解决此问题的特定模式是使用`this`指针，如下所示：

```
this->a = a; 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-10T15:59:54.567

如果可能的话，最好通过初始化列表设置数据成员，在这种情况下，隐藏成员名称的参数没有问题。另一种选择是`this->foo = foo;`在构造函数的主体中使用。setter 也存在类似的问题，但现在您不能使用初始化列表解决方案。你被困住了`this->foo = foo;`——或者只是对参数和成员使用不同的名称。

有些人真的很讨厌影响数据成员的论点；多个编码标准明确表示永远不要这样做。其他人认为这种阴影，至少对于构造函数和设置者来说，是猫的喵喵叫。我记得读过一两个编码标准（但我不记得是哪个）将这种阴影指定为“应该”（但不是“应该”）实践。

最后一种选择是在函数声明中使用阴影，以便向读者提示函数的作用，但在实现中使用不同的名称。

**更新：什么是“阴影”？**

```
#include <iostream>

void printi (int i) { std::cout << "i=" << i << "\n"; }

int i = 21; 

int main () {
   printi (i);
   int i = 42; 
   printi (i);
   for (int i = 0; i < 3; ++i) {
      printi (i);
      int i = 10; 
      printi (i);
   }
   printi (i);
} 
```

, 的最里面的声明遮蔽了语句中声明的变量`i`，这反过来又遮蔽了在函数范围内声明的变量，进而遮蔽了全局变量。`int i=10``i``for``i``i`

在手头的问题中，类的非默认构造函数的参数`x`、`y`、`width`和隐藏了与这些参数同名的成员数据。`height``A`

您`width=width;`什么也没做，因为参数`width`隐藏（隐藏）了 data member `width`。当您有两个或多个在不同范围内声明的具有相同名称的变量时，获胜者始终是具有最内层范围的名称。通常，获胜的总是具有最内部范围的名称。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-10T15:31:27.397

虽然您可以通过使用构造函数的初始化列表来避免该问题，但我建议遵循命名数据成员的约定，例如，尾随`_`或前导 `m_`。否则，您很可能会发生名称冲突，特别是如果您的成员名称为`x`和`y`。

```
class A
{
    public:

    A(int x, int y, int width, int height) : x_(x), y_(y), with_(width), height_(height) {}

    int x_;
    int y_;
    int width_;
    int height_;
}; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-10T15:34:27.137

您可以更改构造函数参数的名称。当你写

```
A::A(int x, int y, int width, int height)
{
    x = x;
    y = y;
    width = width;
    height = height;
} 
```

然后你将**构造函数的参数分配给自己**，而实际的**实例变量未初始化**，这就是你得到虚假值的原因。

我建议（并广泛使用）的一般解决方案是更改构造函数方法的参数名称：

```
A::A(int x_initial, int y_initial, int width_initial, int height_initial)
{
    x = x_initial;
    y = y_initial;
    width = width_initial;
    height = height_initial;
} 
```

# android - Android Twitter sendDirectMessages 不起作用

> ID：12822976
> 
> 赞同：0
> 
> 时间：2012-10-10T15:27:10.283
> 
> 标签：android, twitter4j

我正在尝试从我的 Android 应用程序发送直接消息。为此，我在 Google 上搜索并从链接中找到了以下解决方案。在那个 Twitter4j 中，我找到了代码片段。我也在我的 Android 应用程序中尝试过相同的方法，但遇到了问题：

**[http://twitter4j.org/en/code-examples.html](http://twitter4j.org/en/code-examples.html)**

```
// The factory instance is re-useable and thread safe.
    Twitter sender = new TwitterFactory().getInstance();
    DirectMessage message = sender.sendDirectMessage(recipientId, message);
    System.out.println("Sent: " message.getText() + " to @" + message.getRecipientScreenName());

Issue :
**10-10 20:04:26.440: E/AndroidRuntime(6935): java.lang.IllegalStateException: Authentication credentials are missing. See http://twitter4j.org/configuration.html for the detail.** 
```

请帮助我摆脱这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T15:40:35.933

错误消息说：

> 缺少身份验证凭据。

从 Twitter4J[代码示例](http://twitter4j.org/en/code-examples.html)页面：

> 要运行示例代码，您需要在 twitter4j.properties 中配置 OAuth 凭据。有关详细信息，请参阅[Twitter4J - 配置](http://twitter4j.org/en/configuration.html)。

除非您已登录，否则您无法在 Twitter 上发送直接消息（与其他一些功能不同，例如读取随机用户的状态更新）。您需要通过 Twitter4J 配置页面上给出的三种方法之一来配置您的身份验证凭据，然后代码示例才能运行。

# php - 从 Web 浏览器执行 Git Pull 的最佳方法/语言

> ID：12822977
> 
> 赞同：0
> 
> 时间：2012-10-10T15:27:16.380
> 
> 标签：php, git, webserver

我正在创建一项服务，允许用户使用 git 从 Web 浏览器将更新部署到服务器。例如：单击“部署”按钮并运行 git 命令。现在建议的语言是 PHP，建议的解决方案是：

```
<?php
exec('git pull origin master');
?> 
```

很简单，是的，但我不确定这是最好的方法或它的缺点是什么。所以我的问题是，我应该使用什么语言/方法来允许用户从网络浏览器下拉到他们的服务器上？与服务器交互的最佳语言是什么？这还重要吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T15:48:23.093

一点都不重要。理想情况下，它应该是您/您的团队擅长的语言。

但是做一个“exec”不是这样做的！

使用图书馆。例如试试这个：

[在没有 Git 的情况下读取 Git 存储库](https://stackoverflow.com/questions/645814/reading-a-git-repository-without-git)

# python - 意大利语检测为 iso-8859-2

> ID：12822978
> 
> 赞同：0
> 
> 时间：2012-10-10T15:27:17.910
> 
> 标签：python, encoding, chardet

我正在使用 chardet 来检测文本文件的编码，包括意大利语。问题是它始终将它们的编码检测为 iso-8859-2，而正确的检测将是 iso-8859-1。有人知道修复吗？我的本地语言设置为波兰语？会不会影响检测？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T21:30:28.777

chardet 不支持 iso-8859-1，这就是它没有检测到它的原因。有关支持的字符编码，请参阅 chardets 主页 - [http://pypi.python.org/pypi/chardet](http://pypi.python.org/pypi/chardet)。

我使用 Linux 程序“文件”来获取不同内容的字符编码，但是我不确定它有多安全，请参阅我的问题 - [Python 中的编码检测，是否使用 chardet 库？](https://stackoverflow.com/questions/13591926/encoding-detection-in-python-use-the-chardet-library-or-not). 但到目前为止，它对我来说效果很好。

顺便说一句，您的本地语言不应该影响检测。

# c# - C# 填充组合框

> ID：12822979
> 
> 赞同：0
> 
> 时间：2012-10-10T15:27:21.503
> 
> 标签：c#, combobox

如何使用我的显示成员是数组的值且值成员是数组键的数组填充 C# 中的组合框？

```
string[] RelayTypeArray = new string[4]; 
RelayTypeArray[0] = null; 
RelayTypeArray[1] = "Boiler"; 
RelayTypeArray[2] = "Valve"; 
RelayTypeArray[3] = "Pump"; 
cmb_RelayType.DataSource = RelayTypeArray; 
cmb_RelayType.DisplayMember = RelayTypeArray; 
cmb_RelayType.ValueMember = ????? 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-10T15:49:58.187

只需按原样使用您的数组...

```
string[] RelayTypeArray = new string[4]; 
RelayTypeArray[0] = null; 
RelayTypeArray[1] = "Boiler"; 
RelayTypeArray[2] = "Valve"; 
RelayTypeArray[3] = "Pump"; 
cmb_RelayType.DataSource = RelayTypeArray; 
```

如果你想要文字：`cmb_RelayType.SelectedValue`

如果你想要索引：`cmb_RelayType.SelectedIndex`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T15:44:08.860

如果你只是把 a`string[]`因为`DataSource`你不必定义 a`DataMember`或 a `ValueMember`。你可以简单地得到`myComboBox.SelectedValue`and `myComboBox.SelectedIndex`。

`DataMember`-Property 仅描述要在您设置为的类型的 ComboBox 中显示的属性`DataSource`。

例如，您设置了一个列表

```
class Test
{
    public string Name { get; set; }
    public int Id { get; set; }
} 
```

作为`DataSource`并希望该框显示`Name`您必须设置的属性

```
myComboBox.DataMember = "Name"; 
```

这`ValueMember`是 GUI 的“不可见”属性，您可以在其中存储值以供以后使用，例如：

```
myComboBox.ValueMember = "Id" 
```

因此，如果有人通过显示选择一项，`Name`您可以`Id`从.`Value``ComboBoxItem`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T15:44:16.283

使用一个类并绑定它的集合：

```
class RelayType
{
    private int m_Index;
    private string m_Value;

    public RelayType(int index, string value)
    {
        m_Index = index;
        m_Value = value;
    }

    public int Index
    {
        get { return m_Index; }
    }

    public string Value
    {
        get { return m_Value; }
    }
}

var relayTypeCol = new List<RelayType>(); 
relayTypeCol.Add(new RelayType(0, ""));
relayTypeCol.Add(new RelayType(1, "Boiler"));
relayTypeCol.Add(new RelayType(2, "Valve"));
relayTypeCol.Add(new RelayType(3, "Pump"));

cmb_RelayType.DataSource = relayTypeCol; 
cmb_RelayType.DisplayMember = "Value"; 
cmb_RelayType.ValueMember = "Index"; 
```

# android - 使用 Android MediaCodec 进行编码

> ID：12822980
> 
> 赞同：0
> 
> 时间：2012-10-10T15:27:21.407
> 
> 标签：android, hardware, media, encode, codec

我想知道是否有人可以向我提供有关使用 Android MediaCodec 库编码视频的任何链接或有用信息。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T16:07:54.463

Android 文档中的[MediaCodec](http://developer.android.com/reference/android/media/MediaCodec.html)页面是您应该开始的地方。YouTube 上还有一段来自[权威的 Google I/O 2012 会议](https://developers.google.com/events/io/sessions/gooio2012/117/)的[视频](http://www.youtube.com/watch?v=YmCqJlzIUXs)。

这些链接都来自快速谷歌搜索。另请参阅上面@mah 的评论。

# c# - 任务计划程序上的 C# 应用程序在不执行代码的情况下继续运行

> ID：12822983
> 
> 赞同：0
> 
> 时间：2012-10-10T15:27:32.403
> 
> 标签：c#, .net, scheduled-tasks

我有 ac# 程序在从 VS 调试/运行时运行良好。当它在任务调度程序上运行时，它会在我的代码中的某个点停止，然后运行并运行。我可以根据我的日志看到这一点。

这是我的代码：

```
static class Program
{
    static void Main()
    {
        try
        {
            Log.WriteLog("Email Sync invoking...");

            // task scheduler stops here
            foreach (EmailAccount account in EmailAccount.Get())
            {
                Log.WriteLog("Syncing email account " + account.Username);
                EmailAccount.Sync(12, account.Username);
            }

            Log.WriteLog("Email Sync completed.");
        }
        catch (Exception ex)
        {
            Log.WriteError(ex);
        }
    }
} 
```

任何想法为什么会发生这种情况？

# css - @media 查询 - 一条规则覆盖另一条规则？

> ID：12822984
> 
> 赞同：5
> 
> 时间：2012-10-10T15:27:36.037
> 
> 标签：css, responsive-design, media-queries

我有多个@media 查询都可以正常工作，但是一旦我输入比 1024px 更高的最大屏幕宽度，更高宽度的规则就会应用于所有内容。

```
 @media screen and (max-width: 1400px)
    {
        #wrap {
        width: 72%;
        }
    } 
@media screen and (max-width: 1024px) 
{
    #slider h2 {
    width: 100%;
    }
    #slider img {
    margin: 60px 0.83333333333333% 0 2.08333333333333%;
    }
    .recent {
    width: 45.82%;
    margin: 10px 2.08333333333334% 0 1.875%;
    }
} 
```

如您所见，1024px（以及 800px 最大宽度查询）不会更改 #wrap 宽度并且可以正常工作。一旦我添加了 1400px 最大宽度查询，它会将所有尺寸的它们更改为 72%，并对任何元素执行相同的操作 - 例如，如果我将 #slider img 设置为具有 40px 的边距，即使它会显示在所有尺寸它仅在 1400px 的最大宽度内。

我错过了一些非常明显的东西吗？在过去的两天里一直在努力解决这个问题！谢谢，约翰

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-10T15:35:22.627

我不确定我是否完全遵循，但您的`@media`规则表明这是您想要的行为。如果屏幕为 1400 像素且宽度为`#wrap`72%，这包括其他媒体查询中提到的所有其他尺寸。

如果您希望它仅适用于 1024px 和 1400px 之间，则需要将其更改为...

```
@media screen and (max-width: 1400px) and (min-width: 1024px)
{
    #wrap {
    width: 72%;
    }
} 
```

**编辑**您还必须记住，在 CSS 中排序很重要......

```
@media screen and (max-width: 1400px)
{
    #wrap {
    width: 72%;
    }
}
@media screen and (max-width: 1024px)
{
    #wrap {
    width: 100%;
    }
} 
```

对于 1024 像素以上的屏幕，宽度`#wrap`将为 72%，因为它们只会匹配第一个媒体查询。如果屏幕小于 1024 像素，则宽度`#wrap`将为 100%，尽管它会被两个媒体查询匹配。将为 1024 像素以下的屏幕呈现的 CSS 看起来像...

```
#wrap {
width: 72%;
}
#wrap {
width: 100%;
} 
```

稍后在样式表中定义的规则会覆盖之前的规则[http://www.w3.org/TR/CSS21/cascade.html#cascading-order](http://www.w3.org/TR/CSS21/cascade.html#cascading-order) 6.4.1 第 4 点。因此，如果您交换了规则的顺序。

```
@media screen and (max-width: 1024px)
{
    #wrap {
    width: 100%;
    }
}
@media screen and (max-width: 1400px)
{
    #wrap {
    width: 72%;
    }
} 
```

对于不超过 1400 像素的所有屏幕尺寸，宽度`#wrap`将为 72%，因为低于 1024 像素的屏幕将看到这两个规则，就好像它们是......

```
#wrap {
width: 100%;
}
#wrap {
width: 72%;
} 
```

超过 1024 像素的屏幕会看到...

```
#wrap {
width: 72%;
} 
```

两者的结果相同。

# android - 当 sqlite 数据库更改时自动更新 ListActivity

> ID：12822985
> 
> 赞同：1
> 
> 时间：2012-10-10T15:27:37.993
> 
> 标签：android, sqlite, service, listactivity

我有一个具有后台服务的 android 应用程序，该服务轮询 Web 服务以获取新信息并将其写入我的应用程序的 sqlite 数据库。应用程序还有一个列表活动，显示来自这个 sqlite 数据库的数据。

基本上，如果新数据从写入它的服务进入 sqlite 数据库，我希望列表在查看时自动更新。我可以只提供一个刷新按钮，但如果它会自动更新就更好了。有没有简单的方法可以做到这一点？服务是否应该触发 listactivity 订阅的事件并使适配器无效？或者有没有办法让适配器基于游标或其他东西并在底层数据更改时自动更新？只是试图从架构上考虑这一点，并想要最好的和最可维护的（并且可以快速开发）方法。我很好奇我是否错过了让这件事变得更容易的可能性。

顺便说一句，我正在使用 Mono for Android（公司政策，不是我的选择）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T16:10:05.067

> 基本上，如果新数据从写入它的服务进入 sqlite 数据库，我希望列表在查看时自动更新。

您可以在包含列表中实现动态注册`BrodcastReceiver`（在`onResume`回调中），`Activity`它可以侦听自定义广播。当它`BroadcastReceiver`接收到自定义广播时，您将更新光标，调用 notifyDataSetChanged，换句话说，引用列表。您`Service`将在接收到新值时在数据库中插入新值，并且当它完成该任务时，它可以发送一个广播，您的自定义广播以向感兴趣的观察者宣布新数据可用。`Activity`如果活动在前台，这将触发接收器。

我不知道`Mono`Android 会给你一些代码，但你应该能够从上面的想法中实现一些东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T16:32:23.493

您可以使用 Handler 类来更新您的列表。当有新数据时，您可以从后台服务向您的 Activity 发送消息，并在 Handler 类的 handleMessage() 方法中更新您的列表。

# javascript - 在 Lightbox 中的图片上添加描述？

> ID：12822998
> 
> 赞同：0
> 
> 时间：2012-10-10T15:28:00.110
> 
> 标签：javascript, jquery, html, lightbox

如何在 Lightbox 的图片下方放置图片描述？

我使用这个灯箱插件： http: [//leandrovieira.com/projects/jquery/lightbox/](http://leandrovieira.com/projects/jquery/lightbox/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T15:30:25.130

描述取自 a 标签的 title 属性。喜欢

```
<a href="image.jpg" title="Example image">
      <img src="thumb_image.jpg">
</a> 
```

所以你的描述将是**Example image**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T15:34:19.133

您必须像这样设置标题栏：

```
<a href="img.jpg" title="enter a title here">
    <img src="thumb_img.jpg" alt="no image title here" />
</a> 
```

这将完全通过 W3 认证。alt = 图像的替代文本。