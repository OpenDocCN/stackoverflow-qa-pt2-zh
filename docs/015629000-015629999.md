# StackOverflow 问答 15629000-15629999

# ios - 调试不会在 XCode 下重现的 NSNotification 崩溃

> ID：15629000
> 
> 赞同：0
> 
> 时间：2013-03-26T03:40:56.287
> 
> 标签：ios, xcode, nsnotificationcenter

我的测试版用户平均每小时看到一次以下崩溃：

```
0   libobjc.A.dylib                 0x33182f78 objc_msgSend + 16
1   Foundation                      0x3497e4f8 __57-[NSNotificationCenter addObserver:selector:name:object:]_block_invoke_0 + 12
2   CoreFoundation                  0x35530540 ___CFXNotificationPost_block_invoke_0 + 64
3   CoreFoundation                  0x354bc090 _CFXNotificationPost + 1400
4   Foundation                      0x348f23e4 -[NSNotificationCenter postNotificationName:object:userInfo:] + 60
5   Foundation                      0x348f3c14 -[NSNotificationCenter postNotificationName:object:] + 24
6   libdispatch.dylib               0x338f1c52 _dispatch_call_block_and_release + 6
7   libdispatch.dylib               0x338fce8a _dispatch_main_queue_callback_4CF$VARIANT$up + 190
8   CoreFoundation                  0x355372a6 __CFRunLoopRun + 1262
9   CoreFoundation                  0x354ba49e CFRunLoopRunSpecific + 294
10  CoreFoundation                  0x354ba366 CFRunLoopRunInMode + 98
11  GraphicsServices                0x33255432 GSEventRunModal + 130
12  UIKit                           0x32c92cce UIApplicationMain + 1074
13  Ars Logica                      0x00039ecc main (main.m:16)
14  Ars Logica                      0x00039e80 start + 32 
```

我有两个并发症：

1) 我不打电话给 NSNotificationCenter。

2）尽管付出了巨大的努力，但在使用 XCode 运行时，我从未发生过这种情况。

我找不到低内存报告和崩溃事件之间的相关性。

坦率地说，我不确定从这里去哪里。并发症 2 显然是一个大问题。

任何建议或指示将不胜感激。

* * *

作为记录，这被证明是 iAd 框架中的一次崩溃。具体来说，我按照 Apple 示例准备好整页插页式广告，但当我进入后台时，我并没有让它失效。当我从后台出来时，有时会向旧上下文发送一条通知，说明广告服务器的附件已丢失。进入后台时使广告上下文无效可以很好地解决所有问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T03:49:44.077

你最好的选择可能是使用方法调配和一个类别来替换：

```
+ addObserver:selector:name:object: 
```

在**NSNotificationCenter**中。

使用您自己的版本记录所有参数的内容，然后调用真实版本。这样，当您的测试人员看到崩溃时，他们可以查看设备日志以查看传递给该方法的最后一件事在做什么。这可能会让您有足够的洞察力来确定系统的哪个区域正在使用通知中心。

另外，您使用ARC吗？使用 ARC 如果可能发生这样的错误，我会感到非常惊讶，似乎您正在将某些东西传递到系统中，然后以某种方式在幕后附加到通知，但在系统仍有参考时被释放。

这是与您的需要相关的方法调配的一个示例（替换类级别方法）：

[如何在 iOS 上调整类方法？](https://stackoverflow.com/questions/3267506/how-to-swizzle-a-class-method-on-ios)

显然，不要将其运送到商店...

# c# - DeviceUniqueId 和 Azure 移动服务

> ID：15629002
> 
> 赞同：2
> 
> 时间：2013-03-26T03:41:09.287
> 
> 标签：c#, windows-phone-8, azure-mobile-services

**问题**

我有 Windows Phone 8 应用程序。用户可以从应用程序上传照片，然后将条目添加到表中以使用 Azure 移动服务进行处理。表中的一列是 DeviceId。这部分工作正常。

在另一个视图中，人们可以加载他们已经添加的条目列表。不幸的是，对于某些用户来说，这似乎不起作用，因为它不返回任何条目（我可以在数据库中找到他们的条目）。

请帮助，因为我无法弄清楚为什么它适用于某些用户而不适用于其他用户。

**这是我获取 DeviceUniqueId 的方法：**

```
byte[] myDeviceID = (byte[])Microsoft.Phone.Info.DeviceExtendedProperties.GetValue("DeviceUniqueId");
string DeviceIDAsString = Convert.ToBase64String(myDeviceID); 
```

**这是我添加新条目的方法：** TimelapseBatch.DeviceId（构造函数中的第一个参数是字符串）

```
var item = new TimelapseBatch(DeviceInfo.DeviceUniqueId, /*other properties go here*/);
await App.MobileService.GetTable<TimelapseBatch>().InsertAsync(item); 
```

**我如何查询服务**

```
private readonly IMobileServiceTable<TimelapseBatch> batchesTable = App.MobileService.GetTable<TimelapseBatch>();
...
batches = await batchesTable.Where(t => t.DeviceId == DeviceInfo.DeviceUniqueId).ToListAsync();

var processed = batches.Where(t => t.StatusCode == (int)BatchStatus.Processed).OrderByDescending(t => t.Processed).Select(t => new Timelapse()
{
    Page = new Uri(t.PlayerUrl),
    Thumbnail = new Uri(t.ThumbnailUrl)
}).ToList(); 
```

显然，在所有这些处理之后，即使根据数据库它应该包含任何条目。

我确实验证了当相同的用户（甚至是那些遇到问题的用户）创建多个条目时，数据库中的 DeviceId 似乎是相同的。

请帮忙，为什么它对某些用户有效，而对其他用户无效？？？

**更新**

因此，当我使用遇到问题的客户的 DeviceUniqueId 时，我可以重现该问题。

另外，如果我这样做：

```
batches = await batchesTable.Take(200).ToListAsync();
batches = batches.Where(t => t.DeviceId == DeviceInfo.DeviceUniqueId).ToList(); 
```

它按预期填充批次。但是，如果我这样做（如下），批次是空的（我指定 200 用于测试目的，因为条目较少）。

```
batches = await batchesTable.Take(200).Where(t => t.DeviceId == DeviceInfo.DeviceUniqueId).ToListAsync(); 
```

**更新 2**

如果 DeviceId 包含“+”号，似乎比较失败。如果我做

```
t.DeviceId.Substring(0,X) == DeviceInfo.DeviceUniqueId.Substring(0,X) 
```

其中 X 是 + 符号的位置，然后它按预期工作。我的天啊。现在我正在拼命寻找解决方法。

**更新 3**

类型定义：

```
public enum BatchStatus
{
    QueuedUp = 0,
    Processed = 1,
    Error = 2,
}

public class TimelapseBatch
{
    public TimelapseBatch()
    {
        TimelapseId = String.Empty;
        DeviceId = String.Empty;
        ContainerUrl = String.Empty;
        VideoMp4Url = String.Empty;
        VideoWebmUrl = String.Empty;
        ThumbnailUrl = String.Empty;
        Uploaded = new DateTime(2000, 1, 1);
        Processed = new DateTime(2000, 1, 1);
        PlayerUrl = String.Empty;
    }

    public TimelapseBatch(string deviceId, string timelapseId, string containerUrl, int photosCount, int fps):this()
    {
        DeviceId = deviceId;
        ContainerUrl = containerUrl;
        TimelapseId = timelapseId;
        PhotosCount = photosCount;
        Fps = fps;
        StatusCode = (int) BatchStatus.QueuedUp;
        Uploaded = DateTime.Now;
    }

    public int Id { get; set; }
    public int StatusCode { get; set; }

    public string TimelapseId { get; set; }
    public string DeviceId { get; set; }
    public string ContainerUrl { get; set; }
    public int PhotosCount { get; set; }
    public int Fps { get; set; }
    public DateTime Uploaded { get; set; }

    public string VideoMp4Url { get; set; }
    public string VideoWebmUrl { get; set; }
    public string ThumbnailUrl { get; set; }
    public double VideoSize { get; set; }
    public DateTime Processed { get; set; }

    public string PlayerUrl { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T04:10:34.417

现在解决方案：

```
 batches = await batchesTable.Where(t => t.DeviceId == DeviceInfo.DeviceUniqueId.Replace("+", "%2B") || t.DeviceId == DeviceInfo.DeviceUniqueId).ToListAsync(); 
```

我不得不手动转义 + 符号为 %2B。添加了额外条件，以防 Azure 团队修复该错误。

# breeze - 什么时候同时使用 DTO 和 Breeze 比较好？

> ID：15629006
> 
> 赞同：0
> 
> 时间：2013-03-26T03:41:42.400
> 
> 标签：breeze, single-page-application

我已经构建了我的 WebAPI 来为客户端提供 DTO，作为将域模型与客户端模型分离的一种方式。我现在正在开发像 Breeze 这样的客户端技术，我想知道使用 Breeze 会如何影响这种模式，以及它是否是一种非此即彼的场景。如果有的话，什么时候同时使用微风和 DTO 是个好主意？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T19:46:01.610

Breeze 并不真正关心您是要使用 DTO 还是更成熟的域模型“实体”对象。从 .NET 的角度来看，Breeze 可以将其全方位的查询服务应用于任何可以作为 IEnumerable 或 IQueryable 公开的集合。如果您不想使用查询，则可以通过带有参数的 WebApi 方法公开单个 DTO 或 DTO 集合。

您还可以选择使用带有投影的 Breeze 查询从服务器上的实体构造 DTO 对象，并且只使用客户端上的 DTO。

如果查询对您很重要，那么从您的角度来看，DTO 与域模型“实体”的主要问题是您将 DTO 公开为“可查询”对象的难易程度以及这种查询的效率可能有多高。许多 ORM 工具（如实体框架）能够转换查询，以便大部分繁重的处理由数据库引擎执行。与尝试迭代 DTO 集合以执行查询的替代方案相比，此类优化可能非常高效。

一种有趣的替代方法是使用 Entity Framework 和 WebApi 之类的东西来仅公开您希望在客户端上公开的域模型的映射子集。即你使用实体框架为你做你的 DTO 映射。所以你有两个 EF 模型，一个完整的域模型和一个 DTO 域模型。这样做的好处是您仍然可以获得查询优化的优势。

希望这可以帮助。

# java - java中的舍入值

> ID：15629011
> 
> 赞同：1
> 
> 时间：2013-03-26T03:42:12.370
> 
> 标签：java, rounding

我将如何圆

1.  1 < 值 < 1.5 到 1.5

2.  1.5 < 值 < 2 到 2

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-26T03:49:35.717

怎么样

```
double rounded = Math.ceil(number * 2) / 2; 
```

由于`Math.ceil()`已经返回一个双精度数，这里不需要除以`2.0d`。只要您处于可以表示为双精度而不会丢失精度的整数范围内，这将正常工作，但请注意您是否超出该范围。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T03:44:06.607

```
public double foo(double x){
  int res = Math.round(x);
  if(res>x) // x > .5
   return res -0.5;
  else 
   return res + 0.5;
} 
```

我还没有编译这个，但这是伪代码，应该可以工作

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-26T03:52:47.393

乘以 2，使用`Math.ceil()`，然后将该结果除以 2。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-26T04:01:10.683

```
 public double round(double num)
    {
        double rounded = (int) (num + 0.4999f);
        if(num > rounded)
            return rounded + 0.5;
        else
            return rounded;
    } 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2013-03-26T03:43:50.280

您可以使用

```
double numberGrade = 2.5;
Math.ceil(numberGrade); 
```

# hadoop - 在 Hive 中提取结构数组

> ID：15629016
> 
> 赞同：6
> 
> 时间：2013-03-26T03:42:37.570
> 
> 标签：hadoop, hive, hiveql

我在蜂巢中有一个外部表

```
CREATE EXTERNAL TABLE FOO (  
  TS string,  
  customerId string,  
  products array< struct <productCategory:string, productId:string> >  
)  
PARTITIONED BY (ds string)  
ROW FORMAT SERDE 'some.serde'  
WITH SERDEPROPERTIES ('error.ignore'='true')  
LOCATION 'some_locations'  
; 
```

表的记录可能包含以下数据：

```
1340321132000, 'some_company', [{"productCategory":"footwear","productId":"nik3756"},{"productCategory":"eyewear","productId":"oak2449"}] 
```

有谁知道是否有一种方法可以简单地从该记录中提取所有 productCategory 并将其作为 productCategories 数组返回而不使用explode。类似于以下内容：

```
["footwear", "eyewear"] 
```

或者我是否需要编写自己的GenericUDF，如果是这样，我不太了解Java（一个Ruby人），有人可以给我一些提示吗？我从 Apache Hive 阅读了一些关于 UDF 的说明。但是，我不知道哪种集合类型最适合处理数组，以及哪种集合类型最适合处理结构？

===

我通过写一个 GenericUDF 回答了这个问题，但我遇到了另外两个问题。这是在这个[SO Question](https://stackoverflow.com/questions/15694555/a-genericudf-function-to-extract-a-field-from-an-array-of-structs)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-02-29T16:04:03.850

您可以使用 json serde 或内置函数 get_json_object、json_tuple。

使用[rcongiu 的 Hive-JSON SerDe](https://github.com/rcongiu/Hive-JSON-Serde)，用法将是：

定义表：

```
CREATE TABLE complex_json (
DocId string,
Orders array<struct<ItemId:int, OrderDate:string>>) 
```

将示例 json 加载到其中（此数据必须是单行的，这一点很重要）：

```
{"DocId":"ABC","Orders":[{"ItemId":1111,"OrderDate":"11/11/2012"},{"ItemId":2222,"OrderDate":"12/12/2012"}]} 
```

然后获取订单 ID 很简单：

```
SELECT Orders.ItemId FROM complex_json LIMIT 100; 
```

它将为您返回 id 列表：

> 项目编号 [1111,2222]

经证明可以在我的环境中返回正确的结果。完整清单：

```
add jar hdfs:///tmp/json-serde-1.3.6.jar;

CREATE TABLE complex_json (
  DocId string,
  Orders array<struct<ItemId:int, OrderDate:string>>
)
ROW FORMAT SERDE 'org.openx.data.jsonserde.JsonSerDe';

LOAD DATA INPATH '/tmp/test.json' OVERWRITE INTO TABLE complex_json;

SELECT Orders.ItemId FROM complex_json LIMIT 100; 
```

在这里阅读更多：

[http://thornydev.blogspot.com/2013/07/querying-json-records-via-hive.html](http://thornydev.blogspot.com/2013/07/querying-json-records-via-hive.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-02-29T01:39:24.403

一种方法是使用`inline`or`explode`函数，如下所示：

```
SELECT 
    TS,
    customerId,
    pCat,
    pId,
FROM FOO 
LATERAL VIEW inline(products) p AS pCat, pId 
```

否则你可以写UDF。查看[这篇文章](https://stackoverflow.com/questions/28716165/how-to-query-struct-array-with-hive-get-json-object)和[这篇文章](https://stackoverflow.com/questions/15694555/a-genericudf-function-to-extract-a-field-from-an-array-of-structs)。连同以下资源：

*   [Matthew Rathbone 编写通用 UDF 的指南](http://blog.matthewrathbone.com/2013/08/10/guide-to-writing-hive-udfs.html)
*   [Mark Grover 的指导方法](http://mark.thegrovers.ca/tech-blog/how-to-write-a-hive-udf)
*   [关于通用 UDF 的baynote 博客文章](http://www.baynote.com/2012/11/a-word-from-the-engineers/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T07:20:21.363

如果数组的大小是固定的（比如 2 ）。请试试：

```
products[0].productCategory,products[1].productCategory 
```

但如果不是，UDF 应该是正确的解决方案。我想你可以在 JRuby 中做到这一点。GL！

# ios - 基于页面的应用程序和基于视图的应用程序之间的区别

> ID：15629020
> 
> 赞同：10
> 
> 时间：2013-03-26T03:42:59.527
> 
> 标签：ios, xcode4, xcode4.6

我是 iOS 开发的新手，我只是在 youtube 上关注一些教程，我对**基于页面的应用程序**模板和**基于视图的应用程序**模板感到困惑。我正在使用**xcode 4.6**，我正在遵循的教程有使用**xcode 4.0**和基于视图的应用程序的基于页面的应用程序。Xcode 4.6 没有基于视图的应用程序。

Xcode 中基于页面的应用程序和基于视图的应用程序有什么区别？他们是一样的吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-03-26T03:53:15.370

**基于页面的应用程序**和**基于视图的应用程序**只是让您的工作更轻松的**模板。**根据您的模板选择`Xcode`将自动生成一些文件并使用一些控件。没有必要从这种模板开始，您甚至可以从一个**空的应用程序**开始。您正在从头开始设计。您可以根据应用程序的类型选择模板。

为了找到不同之处，只需使用两个模板创建应用程序并运行它。**基于页面的应用程序**使用**pageViewController** 在滑动时切换页面，就像翻书一样。**单视图应用程序**创建单个视图控制器及其视图。如果您最初选择单视图应用程序，请不要担心。添加**pageViewController**并正确设计，您可以将其作为基于**Page 的应用程序**

# mysql - 获取 MySQL 查询中每个唯一键的值的总和

> ID：15629024
> 
> 赞同：1
> 
> 时间：2013-03-26T03:43:10.743
> 
> 标签：mysql, sql

我有一个带有键列表的表，每个键都与一个数值相关联。我想运行一个 SQL 查询来列出一列中的每个不同键以及在另一列中具有该不同键的所有值的总和。此过程与首先选择个体相同

```
 key   |   val
   1    |    4
   2    |    2
   1    |    6
   3    |    7
   2    |   10 
```

会返回：

```
 key   |   sum
   1    |    10
   2    |    12
   3    |    7 
```

我有：

```
SELECT DISTINCT key as ukey, SUM(value) as sum from table 
```

但这不起作用。有查询吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-26T03:45:48.820

`SELECT key, SUM(value) as sum FROM table GROUP BY key`

以下是来自mysql的参考：

[http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html)

# java - 更改文件的 Hadoop HDFS 名称

> ID：15629026
> 
> 赞同：0
> 
> 时间：2013-03-26T03:43:28.803
> 
> 标签：java, hadoop, hdfs

我想更改集群上 HDFS 块的自动保存文件名。因此，当我将文件上传到 HDFS 并将其划分为块时，它们会生成带有多个数字的名称。我搜索了代码但找不到它。

它应该在java代码的某个地方，而不是配置文件，对吧？

有人可以告诉我文件名的创建或定义发生在哪些类中？

非常感谢！

编辑：

好的，找到了。

```
FSNameSystem.randBlockId.nextLong() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T04:00:23.223

好的，找到了。

```
FSNameSystem.randBlockId.nextLong() 
```

# loops - 将 Iterate 的结果排列到 Table JSP 中

> ID：15629035
> 
> 赞同：0
> 
> 时间：2013-03-26T03:44:18.833
> 
> 标签：loops, jsp, html-table, iteration

我在类文件中有来自数据库的数据库查询：

```
List srActionList = hibernate_session.createQuery("from SrActionModal where srReportShow = 'Y' order by actDesc").list();

ArrayList dataResultList = new ArrayList();
SrActionModal status = new SrActionModal();

for (int i = 0; i < srActionList.size(); i++) {
    status = (SrActionModal) srActionList.get(i);
    status.setActDesc(status.getActDesc());
    dataResultList.add(status);
}
session.setAttribute("srActionList", dataResultList); 
```

我想将 srActionList 属性显示到表中。目前我的输出如下所示；

```
 <logic:iterate id="list" name="srActionList">
 <html:multibox property="selectedAction">
    <bean:write name="list" property='code'/>
 </html:multibox>
 <bean:write name="list" property='actDesc'/>
    </logic:iterate> 
```

我的问题是，如何将结果安排到表格中以便更好地安排？每行的限制列是 2。如果结果大小是 10，那么将有 5 行，每行包含 2 列。

```
 <table>
     <tr> 
         <td>list 1</td> <td>list 2</td>
     </tr>
     <tr> 
         <td>list 3</td> <td>list 4</td>
     </tr>
    </table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T05:00:03.430

您可以将 indexId 属性放入页面上下文变量中并测试它是否可被 2 整除；然后在奇数值上插入一个 TR 标签，在偶数值上插入一个结束 TR 标签。像这样的东西：

```
 <table>
   <logic:iterate id="list" name="srActionList" indexId="index">
      <% Integer index = (Integer) pageContext.getAttribute("index");
      /* If not divisible by 2 then insert a table row marker */
      if (index.intValue() % 2 == 1) { %>
      <tr>
      <% } %>
      <td>
         <html:multibox property="selectedAction">
         <bean:write name="list" property='code'/>
            </html:multibox>
         <bean:write name="list" property='actDesc'/>
      </td>
      <% Integer index = (Integer) pageContext.getAttribute("index");
      /* If divisible by 2 then insert a table row end marker */
      if (index.intValue() % 2 == 0) { %>
      </tr>
      <% } %>
   </logic:iterate>
   </table> 
```

# haskell - Haskell 偶函数？

> ID：15629037
> 
> 赞同：4
> 
> 时间：2013-03-26T03:44:25.723
> 
> 标签：haskell

这可能是一个相当明显的问题，但我就是想不通。

我正在尝试编写一个对列表中的偶数进行平方的函数。当我尝试运行它时，我收到一个关于我使用偶数函数的错误。我怎样才能解决这个问题？

```
module SquareEvens where

squareEvens :: [Integer] -> [Integer]

squareEvens n = [ns * ns | ns <- n, even n] 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-26T09:27:22.467

如果您更改`even n`为，代码可以正常工作`even ns`：

```
squareEvens n = [ns * ns | ns <- n, even ns] 
```

但请注意，约定是使用复数来命名列表，使用单数来命名该列表中的元素。所以交换`n`并`ns`遵循惯用的 Haskell 用法：

```
squareEvens ns = [n * n | n <- ns, even n] 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-26T12:15:38.817

如您所见，变量名很容易出错。那么为什么不这样做呢？

```
squareEvens = map (^2) . filter even 
```

我认为这比理解更清楚。您可以从右到左阅读：只保留偶数，然后将它们平方。

# jsf - JSF 1.2 刷新会话 bean

> ID：15629038
> 
> 赞同：1
> 
> 时间：2013-03-26T03:44:27.427
> 
> 标签：jsf, jsf-1.2

我有一个 JSF 1.2 应用程序，它有一个基于会话的 bean。这个 bean 用于搜索我们的数据库。在我们的主页上，我有一些 HTML 控件，它们构建了一个搜索参数的 URL，然后将浏览器 URL 设置为 JSP。由于 bean 是基于 session 的，所以第一次通过主页访问时，参数传递正确。但是，后续访问意味着参数将被忽略，因为 bean 中没有执行任何函数。强制 bean 中的 init 函数重新加载的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T11:53:37.623

这是会话范围 bean 的完全预期行为。它存储在 HTTP 会话中，并且只要 HTTP 会话存在并且不会在每个 HTTP 请求上重新创建/重新初始化，就可以重复使用。如果您打算在每个 HTTP 请求上重新创建/重新初始化 bean，那么您应该将它放在请求范围内。

但是，如果 bean 表示请求范围数据和会话范围数据的混合，那么您应该将 bean 拆分为两个单独的 bean，一个用于请求范围数据的请求范围，一个用于会话范围数据的会话范围。您可以在请求范围内使用`<managed-property>`以将会话范围一作为请求范围一的属性注入。通过这种方式，您可以将操作放在请求范围内，这将需要访问/操作会话范围内的数据。

### 也可以看看：

*   [如何选择合适的bean范围？](https://stackoverflow.com/questions/7031885/how-to-choose-the-right-bean-scope/7031941#7031941)
*   [在 JSF 中的托管组件之间传递数据](https://stackoverflow.com/questions/2126943/passing-data-between-managed-components-in-jsf/2127069#2127069)

# git - 从头开始设置 Heroku

> ID：15629040
> 
> 赞同：0
> 
> 时间：2013-03-26T03:44:37.650
> 
> 标签：git, heroku, key, fingerprint

当我尝试运行时，我不断遇到“您的带有指纹的密钥......无权访问”错误的问题`git push heroku master`。我已经尝试了删除密钥并再次添加它的多种组合。我查看了多个 stackoverflow[帖子](https://stackoverflow.com/questions/8786564/cannot-push-to-heroku-because-key-fingerprint/8803103#8803103)并尝试了所有建议。我读过的所有内容都让我觉得我在这台机器上有我不知道的旧帐户。有没有办法查看这台机器上的所有帐户？或者有没有办法取消heroku并从头开始？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T20:20:31.477

用于`heroku keys`管理与 heroku 关联的 ssh_keys。查看 heroku devcenter 上的文档以获得更多帮助。[https://devcenter.heroku.com/articles/keys](https://devcenter.heroku.com/articles/keys)

# linux - 在 zsh 中完成 Hadoop 命令

> ID：15629041
> 
> 赞同：3
> 
> 时间：2013-03-26T03:44:43.260
> 
> 标签：linux, hadoop, zsh, zshrc, zsh-completion

我喜欢 zsh 中的制表符补全功能。
但是当我使用 hadoop 命令时，它似乎不再起作用了。
那么在zsh中自动完成hadoop命令有什么想法吗？

非常感谢。

# php - 如何以 bash 在 php CLI 中的方式关闭字符串或抑制错误输出？

> ID：15629042
> 
> 赞同：0
> 
> 时间：2013-03-26T03:44:47.397
> 
> 标签：php, bash, command-line-interface, shell-exec, suppress

如果您使用以下代码创建一个简单的 php 脚本：

```
shell_exec('"'); 
```

并运行它：

```
php myscript.php 
```

它在我的 Mac 上的 bash 中给出以下错误：

```
sh: -c: line 0: unexpected EOF while looking for matching `"'
sh: -c: line 1: syntax error: unexpected end of file 
```

我已经尝试了我能想到的一切：

```
ob_start();
@shell_exec('"');
ob_end_clean();

@shell_exec('" 2> /dev/null'); 
```

但无论我怎么尝试，我都无法压制这条信息。问题是我正在创建一个单元测试来对通用工具的 $argc、$argv 和 getopt() 命令进行压力测试，并且我需要使用包含随机字符（如“”）的各种输入来调用脚本数百次=：等等。

所以我需要能够抑制错误输出，或者检测不平衡的引号并将 ' 或 " 附加到字符串的末尾。我发现这个正则表达式可以检测单引号和双引号字符串：

[PHP：正则表达式忽略引号内的转义引号](https://stackoverflow.com/questions/5695240/php-regex-to-ignore-escaped-quotes-within-quotes)

但是对于一个混合了带引号和不带引号的参数的通用 bash 命令，我无法想象如何执行此操作。是否有内置命令可以告诉我字符串是否可以接受而不会引发错误？然后我可以尝试附加“'”或“”'，我相当肯定其中一个会关闭字符串。我现在只关心防止错误消息，因为我只是在随机输入此时的脚本。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T04:19:43.297

子 shell 进程正在将错误消息写入 STDERR，它继承自父 PHP 进程。您可以在运行 shell_exec() 之前在 PHP 脚本中关闭父级的 STDERR 文件句柄。

```
<?php
fclose (STDERR);
shell_exec('"'); 
```

# php - php ping 测试和重定向

> ID：15629045
> 
> 赞同：1
> 
> 时间：2013-03-26T03:45:06.977
> 
> 标签：php, redirect, ip, ping, host

我正在尝试让一个基本的 php ping 脚本正常工作，它将 ping 我的网站 ip，如果它响应会将用户重定向到我的网站，但是如果它没有，它会将用户重定向到其他地方。我已经附上了我到目前为止所拥有的内容，但是目前它似乎没有在 ping 站点，因为它只是直接访问[http://othersite.com](http://othersite.com)，如下例所示。感谢您提供任何帮助。

```
<?php

function ping($host)
{
    exec(sprintf('ping -c 1 -W 5 %s', escapeshellarg($host)), $res, $rval);
    return $rval === 0;
}
// random host ip example
$host = '8.8.8.8';
$online = ping($host);

// if site is online, send them to the site.
if( $online ) {
       header('Location: mysite.com');
} 
// otherwise, lets go elsewhere to an online site
else {
        header('Location: http://othersite.com/');
}

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T03:55:51.027

**注意：**您的代码在 Linux 上似乎可以正常工作，但在 Windows 上却不行。进一步检查我注意到 Windows 不提供`-c`ping 选项，这导致它返回与预期不同的值并且您的 ping 失败

```
exec(sprintf('ping -c 1 -W 5 %s', escapeshellarg($host)), $res, $rval);
    return $rval === 0; 
```

这似乎假设返回值将`0`来自`exec`成功？但根据[PHP 手册](http://www.php.net/manual/en/function.exec.php)，它将是

`The last line from the result of the command. If you need to execute a command and have all the data from the command passed directly back without any interference, use the passthru() function. To get the output of the executed command, be sure to set and use the output parameter.`

看来您与返回值的比较是问题所在。包含什么价值`$rval`？

# ruby-on-rails - 原始 SQL 插入远程 ruby on rails 数据库

> ID：15629051
> 
> 赞同：1
> 
> 时间：2013-03-26T03:45:40.340
> 
> 标签：ruby-on-rails, ruby, database, database-connection

我无法将数据插入到 sqlite 开发数据库中。

我的应用程序有 2 台服务器，一台用于抓取浏览器（browserscraper），另一台用于服务客户端请求。这些中的每一个都有一个生产和发展。

我正在设置开发以将最终抓取的数据插入到我的开发客户端请求服务器中，但是我无法让插入工作。我怀疑这与正确转义内容有关，但我已经在谷歌上几个小时试图弄清楚这一点。

这是从我的抓取应用程序到我的远程客户端应用程序的插入

```
@sql_insert = "INSERT INTO #{@table} (`case_number`, `style_of_case`, `circuit`, `judge`, `location`, `disposition`, `date_filed`, `disposition_date`, `case_type`, 'lead_details', 'charge_details')"

@sql_values = " VALUES (#{self.case_number.to_blob}, #{self.style_of_case.to_blob}, #{self.circuit.to_blob}, #{self.judge.to_blob}, #{self.location.to_blob}, #{self.disposition.to_blob}, #{self.date_filed.to_blob}, #{self.disposition_date.to_blob}, #{self.case_type.to_blob},  #{self.lead_details.to_blob}, #{self.charge_details.to_blob});"

@db = SQLite3::Database::new('E:/Sites/aws/db/development.sqlite3')
@db.execute(@sql_insert + @sql_values + "COMMIT;") 
```

最终的查询看起来像这样（我知道很丑）。我插入的最后两个是 yaml

```
INSERT INTO lead_to_processes (`case_number`, `style_of_case`, `circuit`, `judge`, `location`, `disposition`, `date_filed`, `disposition_date`, `case_type`, 'lead_details', 'charge_details') VALUES (130025129, 130025129 - CITY, 1st(Jim, Counties), LOVEKAMP, KELLY LAREE, Schuyler, Plea Written, 03/19/2012, 03/19/201, Municipal Ordinance - Traffic,  ---
1-address_line_1: 6150 RICHLAND RD
1-address_line_2: ''
1-city: 'GEORGIA'
1-birth_year: '1955' 
1-is_alive: 1
, ---
1-Description: Not Available }
1-Code: '95220'
); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T04:16:07.857

您没有在 1999 年破解 PHP，因此您不应该使用字符串插值与您的数据库对话。[`SQLite3::Database#execute`](http://rubydoc.info/gems/sqlite3/SQLite3/Database%3aexecute)支持占位符，请使用；你`execute`应该看起来像这样：

```
@db.execute("insert into #{@table} (case_number, style_of_case, ...) values (?, ?, ...)", [
    self.case_number.to_blob,
    self.style_of_case.to_blob,
    ...
]) 
```

这样，数据库界面将为您处理所有引用和转义以及诸如此类的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T04:07:02.327

我不熟悉 Ruby 或 SQLite，但纯粹看您的查询，您的最后两个列名用单引号错误地引用了。'lead_details' 和 'charge_details' 不需要放在引号中，除非您像其他列名一样使用反引号。

除此之外，您插入的值也没有正确引用。大多数语言都提供了一个函数来适当地转义和引用数据库字符串。

我还建议检查插入的实际错误消息是什么，因为它应该有助于在这种情况下指出问题所在。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-26T04:07:41.663

> `INSERT INTO lead_to_processes (case_number, style_of_case, circuit, judge, location, disposition, date_filed, disposition_date, case_type, 'lead_details', 'charge_details') VALUES (130025129, 130025129 - CITY, 1st(Jim, Counties), LOVEKAMP, KELLY LAREE, Schuyler, Plea Written, 03/19/2012, 03/19/201, Municipal Ordinance - Traffic, --- 1-address_line_1: 6150 RICHLAND RD 1-address_line_2: '' 1-city: 'GEORGIA' 1-birth_year: '1955' 1-is_alive: 1 , --- 1-Description: Not Available } 1-Code: '95220' );`

看起来，从 开始`130025129 - CITY`，您的输入值没有用引号括起来，因此查询解析器无法解析它。我会用单引号将每个字符串值括起来。

# java - 在 PDF 加密期间获取 java.lang.NoClassDefFoundError: org/bouncycastle/asn1/DEREncodable

> ID：15629053
> 
> 赞同：0
> 
> 时间：2013-03-26T03:45:51.700
> 
> 标签：java, pdf, encryption, jasper-reports

我应该在类路径中包含哪个 JAR 以消除此错误消息？

```
Error exporting print... org/bouncycastle/asn1/DEREncodable
java.lang.NoClassDefFoundError: org/bouncycastle/asn1/DEREncodable 
```

我在用 ：

**产品版本**：*Jaspersoft iReport Designer 5.0.1*

**爪哇**：*1.7.0.11；Java HotSpot(TM) 客户端虚拟机 23.6-b04*

# c# - 如何在 C# 中使用回发 ？

> ID：15629054
> 
> 赞同：0
> 
> 时间：2013-03-26T03:46:15.437
> 
> 标签：c#, asp.net

在我的网页中，我想使用 IsPostBack。使用它的原因是在用户按下编辑并更新一些信息后加载带有更新详细信息的页面。有没有其他好的方法来实现它？如果您知道一些好的方法，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T04:17:31.313

我使用 IsPostback 来确保我只在`Page_Load()`. 通常，这些是我不需要或不想多次做的事情。

```
if (!IsPostback)
{
     PopulateADropDownBox();
     this.SomeTextbox.Text = "first time value";
} 
```

在这个例子中，重新填充下拉列表是没有意义的；它将在 Postbacks 中保持填充，因此我只需要执行一次。同样，可能有人更改了其中的文本`SomeTextbox`，如果我将其设置回页面加载时的原始值，我将丢弃用户的输入。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T04:18:33.833

首先阅读页面生命周期。

在插入/更新调试器时，请遵循路径 Like It go to page_load （如果您正在查看 page_load 的值）然后事件

例子 ：

正在更新网格视图...

公共 .. Page_load(....)

{

```
If(!ispostBack)
{
 setpageValue();
} 
```

}

button1_click(...)

```
{   

updateData();

} 
```

这里 ISpostBack 扮演着不同操作的重要角色；... 试试看...

# c - 返回链接列表的第 n 个节点的函数的错误返回类型

> ID：15629056
> 
> 赞同：-3
> 
> 时间：2013-03-26T03:46:18.140
> 
> 标签：c, compiler-errors

这是一个返回链表的第 n 个节点的函数，但是编译器错误总是说返回类型应该是 int。这是为什么？

```
struct Node *getNthNode(struct Node* head, int index)
{
    if (head==NULL)
        return NULL;

    struct Node *current = head;
    int count = 0;
    while (current)
    {
        if (count == index)
            return(current);
        count++;
        current = current->next;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T03:52:53.990

很可能您在声明函数之前调用了该函数，因此默认返回类型为 int。我们必须查看整个文件才能确定。查找所有编译器警告。

```
int main() {
    char* p;
    p = foo();   // Compiler assumes default int return type
    return 0;
}

char* foo() {
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T03:49:50.370

如果 while 的条件不再为真，你会返回什么？

例如，如果您的列表中有 10 个元素，并且您将 20 作为`index`参数传递。

如果您没有为这种情况提供返回声明，那可能就是问题所在。

# python - 嵌套循环显然没有在 PyOpenGL 中循环

> ID：15629059
> 
> 赞同：1
> 
> 时间：2013-03-26T03:47:41.233
> 
> 标签：python, opengl, loops, pyopengl

我很确定这是我在 Python 循环语法中的错误，但我终生无法弄清楚出了什么问题。

我在 OSX 上将 Python 与 PyOpenGL 和 GLUT 一起用于一个非常基本的程序：它旨在在 (0,0,0) 周围绘制一个 3D 网格。我已经设法在给定的高度生成了 2D 网格（所以在 y=10 从 x=-10 到 x=10 和从 z=-10 到 z=10 有一个网格），但我做不到遍历 y 坐标。

[这个屏幕截图应该有助于说明我的意思](http://i.imgur.com/zvsnv7k.png)。我的预期场景是在 y=0 上方有 10 个这些平面网格，在 y=0 下方有 10 个，形成一个立方体。稍后，我也会将它扩展到 y 轴上的线条，但我之前已经实现了半成品（与我现在遇到的问题相同）所以没什么大不了的。

有人可以让我知道我的代码有什么问题吗？这似乎是一个相当简单的问题，但我已经浪费了几个小时，非常感谢一些帮助。

几个免责声明：

我知道 GLUT 是旧技术，并且大部分代码已被弃用，但这个项目与此无关。

在某些时候，我需要检查并更改 z 坐标和 x 坐标中的“-10 到 10”常量，但是一旦我让这个 y 工作正常，该方法应该很简单。

```
from OpenGL.GL import *
from OpenGL.GLUT import *
from OpenGL.GLU import *

grid_range = 10

def DrawGLScene( ):

    i = 0
    j = 0
    fl_range = float(grid_range)

    while (j <= (grid_range*2) ): 
        while (i <= (grid_range*2) ):
            # x grid
            glColor3f( 0.0, 1.0, 0.0 )
            glBegin( GL_LINES )
            glVertex3f( grid_range - i, grid_range - j, -10 )
            glVertex3f( grid_range - i, grid_range - j, 10 )
            glEnd( )

            # z grid
            glColor3f( 0.0, 0.0, 1.0 )
            glBegin( GL_LINES )
            glVertex3f( -10, grid_range - j, grid_range - i )
            glVertex3f( 10, grid_range - j, grid_range - i )
            glEnd( )

        i += 1
    j += 1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T05:43:39.043

看起来您只需在循环中将“i”变量重置为零。您的 i+=1 和 j+=1 也可能缩进不够，但这可能只是复制/粘贴问题。为了调试这样的问题，我经常添加打印并尽可能简化代码。

这是打印 i 和 j 而不是绘制东西的代码的最小版本。
（下面的“打印”适用于 python 2.x。如果您使用的是 Python 3，请在打印行添加括号）

```
grid_range = 10

i = 0 
j = 0 

while (j <= (grid_range * 2)):

    # Reset i to 0 after completing each loop below.
    i = 0 

    while (i <= (grid_range * 2)):

        # OpenGL calls go here.

        print j, i 

        i += 1
    j += 1 
```

此外，对于您示例中的循环，使用“for”循环更简单。像这样的东西应该工作：

```
grid_range = 10

for j in range(grid_range * 2 + 1):

    for i in range(grid_range * 2 + 1):

        # OpenGL calls go here.

        print j, i 
```

如果有帮助，这里有一些关于 python 循环的额外背景：

[http://docs.python.org/2/tutorial/controlflow.html](http://docs.python.org/2/tutorial/controlflow.html)
[http://wiki.python.org/moin/ForLoop](http://wiki.python.org/moin/ForLoop)

# python - 为什么 pip 下载这么慢？（如何排除故障？）

> ID：15629061
> 
> 赞同：23
> 
> 时间：2013-03-26T03:47:41.087
> 
> 标签：python, download, pip

我可以 wget 例如[python 覆盖](https://pypi.python.org/packages/source/c/coverage/coverage-3.6.tar.gz#md5=67d4e393f4c6a5ffc18605409d2aa1ac)和 pip 在本地快速安装包，没有任何问题，但`pip install coverage`需要*永远*。在 Ubuntu 12.04 的虚拟环境中使用 pip 1.3.1。知道什么可能是滞留吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-30T15:28:39.070

正如 Donald Stufft 在[pip issue 864](https://github.com/pypa/pip/issues/864)中回答的那样，它的发生是因为`pip`爬取了很多寻找包 sdists 的页面，并且这种行为是从`easy_install`. 如果您删除该功能，某些软件包将不起作用，并且有些人开始了新的 PEP 以删除此外部链接行为：[PEP 438 - Transitioning to release-file hosting on PyPI](http://www.python.org/dev/peps/pep-0438/)

Donald 说：*“在 PEP438 实施之前，您还可以使用 Crate.io 的受限 API，pip install -i [https://restricted.crate.io/](https://restricted.crate.io/)这将只安装直接托管的版本。”*

但是正如[Marcus Smith 在 vi​​rtualenv 邮件列表中提到的那样](https://groups.google.com/forum/?fromgroups=#!topic/python-virtualenv/UDWsPHKHvjY)，您可以下载软件包及其依赖项，它们会忽略 PyPI 并使用您的下载目录：[http ://www.pip-installer.org/en/latest/cookbook.html#快速本地安装](http://www.pip-installer.org/en/latest/cookbook.html#fast-local-installs)

* * *

*[使用https://restricted.create.io](https://restricted.create.io)避免外部链接行为的示例：*

```
$ pip install -i https://restricted.crate.io/ coverage 
```

* * *

参考：

*   [https://github.com/pypa/pip/issues/864](https://github.com/pypa/pip/issues/864)
*   [http://www.python.org/dev/peps/pep-0438/](http://www.python.org/dev/peps/pep-0438/)
*   [https://groups.google.com/forum/?fromgroups=#!topic/python-virtualenv/UDWsPHKHvjY](https://groups.google.com/forum/?fromgroups=#!topic/python-virtualenv/UDWsPHKHvjY)

# javascript - 将 _this 传递给 ajax 调用

> ID：15629063
> 
> 赞同：1
> 
> 时间：2013-03-26T03:47:45.287
> 
> 标签：javascript, jquery, backbone.js

所以我不确定最好的方法是什么，目前我有一个看起来像这样的ajax调用

```
var _this = this;

        _.each(this.models, function (model) {

            model.fetch({
                success: function(model, response) {
                    if (_.has(model.attributes, "settings")) {                            
                            _this.populateSettings(_this);
                        }
                    } 
```

在 populateSettings 方法中，我需要此 Backbone 视图的某些属性。我不知道如何获取这些属性，除非传入每个特定属性，或者传入对此主干视图的引用，然后在 populateSettings 中使用该引用来填充视图。有一个更好的方法吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T04:01:29.597

一种选择是在您的视图中监听`sync`事件`model`，以便每当`model`成功与来自服务器的数据同步时，您的视图就可以运行`populateSettings`。

这可能看起来像这样：

```
model.on('sync', this.populateSettings, this) 
```

注意第三个参数，`this`。作为第三个参数传递`this`设置事件处理程序将在其中运行的上下文。来自[Backbone.js](http://backbonejs.org/#Events-on)文档：

> 要在调用回调时为此提供上下文值，请传递可选的第三个参数：`model.on('change', this.render, this)`

如果您使用这样的事件侦听器，则可以`success:`完全删除该选项。您可能还会发现`change`or`change:[attribute]`事件也很有用。

# c++ - GLM：无法再编译

> ID：15629065
> 
> 赞同：0
> 
> 时间：2013-03-26T03:47:49.220
> 
> 标签：c++, gcc, compiler-errors, clang, glm-math

有人再使用[这个库](http://glm.g-truc.net/index.html)吗？

去年对我来说很好，但现在我的代码没有编译：

（在带有 GCC 4.6.1 的 MinGW 上）：

```
In file included from ../include/glm/./core/func_packing.hpp:190:0,
                 from ../include/glm/glm.hpp:103,
                 from SmoothRenderer.cpp:11:
../include/glm/./core/func_packing.inl: In function 'glm::detail::uint32 glm::packUnorm4x8(const glm::detail::tvec4<float>&)':
../include/glm/./core/func_packing.inl:84:17: error: expected primary-expression before '(' token
../include/glm/./core/func_packing.inl:84:17: error: expected primary-expression before ')' token
../include/glm/./core/func_packing.inl:84:17: error: expected ';' before 'round'
../include/glm/./core/func_packing.inl:85:26: error: 'D' was not declared in this scope
../include/glm/./core/func_packing.inl: In function 'glm::detail::tvec4<float> glm::unpackUnorm4x8(const uint32&)':
../include/glm/./core/func_packing.inl:94:38: warning: statement has no effect [-Wunused-value]
../include/glm/./core/func_packing.inl:99:4: error: 'D' was not declared in this scope 
```

这是最新版本 0.9.4.3。

我的 Mac 上最新的 clang 出现了类似的问题：

```
In file included from SmoothRenderer.cpp:10:
In file included from ../include/glm/glm.hpp:103:
In file included from ../include/glm/./core/func_packing.hpp:190:
../include/glm/core/func_packing.inl:84:33: error: expected '(' for function-style cast or type construction
                detail::uint8 D((detail::uint8)round(clamp(v.w, 0.0f, 1.0f) * 255.0f));
                                 ~~~~~~~~~~~~~^
./util.h:330:15: note: expanded from macro 'D'
# define D(x) x
              ^
In file included from SmoothRenderer.cpp:10:
In file included from ../include/glm/glm.hpp:103:
In file included from ../include/glm/./core/func_packing.hpp:190:
../include/glm/core/func_packing.inl:85:26: error: use of undeclared identifier 'D'
                return detail::uint32((D << 24) | (C << 16) | (B << 8) | A);
                                       ^
../include/glm/core/func_packing.inl:99:4: error: use of undeclared identifier 'D'
                        D * 1.0f / 255.0f);
                        ^
../include/glm/core/func_packing.inl:94:30: warning: expression result unused [-Wunused-value]
                detail::uint32 D((p >> 24) & Mask8);
                ~~~~~~~~~~~~~~~~~~~~~~~~~~ ^ ~~~~~
./util.h:330:15: note: expanded from macro 'D'
# define D(x) x
              ^
In file included from SmoothRenderer.cpp:10:
In file included from ../include/glm/glm.hpp:108:
In file included from ../include/glm/./core/func_noise.hpp:85:
../include/glm/core/func_noise.inl:125:33: error: too many arguments provided to function-like macro invocation
                detail::tvec4<T> const D(0.0, 0.5, 1.0, 2.0);
                                              ^
../include/glm/core/func_noise.inl:125:27: error: expected ';' at end of declaration
                detail::tvec4<T> const D(0.0, 0.5, 1.0, 2.0);
                                        ^
                                        ; 
```

这是一个只有头文件的库。这样的事情不应该发生...

我只将它用于一些 4x4 矩阵乘法和求逆。由于我的应用程序的其余部分广泛使用 LAPACK，因此我不需要 glm 做任何事情。但是我讨厌当我尝试使非常便携的代码像这样随机中断时。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T03:53:04.803

是的，原来是`D`宏的问题。该死的，问了4分钟后回答了我的问题。这就是解释问题的美妙之处。一半的时间就足够了。

这是避免使用预处理器的另一个原因。疯狂的错误。虽然，值得称赞的是，clang 非常好，不仅提到在其他地方定义的宏似乎有问题，它甚至将它复制到那里给我看。

# java - 将桌面文件夹中的应用程序图标提取到应用程序

> ID：15629069
> 
> 赞同：0
> 
> 时间：2013-03-26T03:48:10.897
> 
> 标签：java, swing, icons

是否可以从计算机的桌面文件夹中读取图标并将它们显示在应用程序中？

**编辑：**我所说的“图标”是检索用于显示的图像。原因是某些程序默认不使用直接快捷方式图像，或者用户在安装程序时不创建快捷方式。因为我已经检查了我的文件夹，所以我注意到基于它们的属性（文件类型）的这些图标：

*   Safari - *.lnk
*   Photoshop - *.png
*   Visual Studio - *.exe

所有这些都以某种方式显示它们的图标（png 显然是最简单的），但是这种非图像扩展的位置并不完全清楚。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T04:52:12.797

不幸的是，没有用于检索特定于应用程序或用户替换图标的跨平台 API。对于特定平台，请查看[Windows](https://superuser.com/q/25086)和[Mac OS](https://stackoverflow.com/q/646671/230513) X。

或者，考虑[`FileSystemView`](http://docs.oracle.com/javase/7/docs/api/javax/swing/filechooser/FileSystemView.html)，它是 . 使用的“文件系统的网关” `JFileChooser`。它抽象了文件系统使用的许多特定于平台的图标。[此处](https://stackoverflow.com/a/15150756/230513)说明了使用该工具的几个示例。

# perl - Perl中单词的打印频率

> ID：15629071
> 
> 赞同：1
> 
> 时间：2013-03-26T03:48:35.260
> 
> 标签：perl

我是 Perl 的新手，我目前正在编写一个程序来显示用户输入给出的单词和单词的频率。我相信我已经正确设置了所有功能我只是无法显示单词及其频率（我相信这与我的哈希值有关）。输入的一个例子是：你好，你好吗。我希望它显示为： hello = 2 how = 1 are = 2 you = 1

```
#!usr/bin/perl -w 
 use strict;
 my @User_Input = <STDIN>;
 chomp(@User_Input);

 my $Word;
 my $Word_Count = 0;
 my %Word_Hash;

foreach $Word (@User_Input)
{
        #body of loop

         my @lines = split(/\s+/, $Word);
         $Word_Count = scalar(@lines);

        if (exists($Word_Hash{$Word}))
        {
                keys(%Word_Hash);
                my @all_words = keys(%Word_Hash);

        }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T04:14:38.753

当您不需要内存中的所有内容时，请避免使用文件，因此您`@User_Input = <STDIN>;`不是一个特别好的主意。您可以一次完美地处理这一切：

```
#!/usr/bin/env perl
use strict;
use warnings;

my %words;

while (my $line = <>)
{
    foreach my $word (split /\s+/, $line)
    {
        $words{$word}++;
    }
}

foreach my $word (keys %words)
{
    print "$word: $words{$word}\n";
} 
```

对数据进行排序有点复杂，但可以做到。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T07:42:39.180

```
perl -lane '$X{$_}++ for(@F);END{for(keys %X){print $_." ".$X{$_}}}' 
```

测试：

```
> echo "hello hello how are you you" | perl -lane '$X{$_}++ for(@F);END{for(keys %X){print $_." ".$X{$_}}}'
you 2
how 1
hello 2
are 1
> 
```

# jquery - 全屏旋转背景图片

> ID：15629072
> 
> 赞同：0
> 
> 时间：2013-03-26T03:48:36.270
> 
> 标签：jquery, image, css, fullscreen, spinning

我一直在到处寻找如何实现覆盖整个屏幕的动画旋转图像的这种效果。[喜欢这个](http://demo.readymag.com/mag/1/)。

基本上，我想要的是让它旋转并全屏显示。

这是我到目前为止得到的， http: [//losmosca.com.ar/reiki/](http://losmosca.com.ar/reiki/)

HTML：

```
<img src="img/bg.jpg" id='test' class='rotating'> 
```

CSS3：

```
#test {
position:relative;
margin:0 auto;
width:1000px;
height:1000px;
}

@-webkit-keyframes rotating {
     from{
        -webkit-transform: rotate(0deg);
     }
     to{
        -webkit-transform: rotate(360deg);
     }
}

.rotating {
    -webkit-animation: rotating 1000s linear infinite;
} 
```

如您所见，我可以让它旋转但不能全屏，这可能吗？谢谢你！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T04:07:28.503

尝试使用`width:100%;`而不是`width:1000px;`

而`height:100%`不是`height:1000px;`

顺便说一下很酷的效果，我可能要找个借口来使用那个技巧。

# .net-4.5 - 在被动情况下刷新索赔的适当策略是什么？

> ID：15629075
> 
> 赞同：2
> 
> 时间：2013-03-26T03:49:04.917
> 
> 标签：.net-4.5, wif, claims-based-identity

我有一个托管在 Windows Azure 中的 .NET 4.5 声明感知应用程序。有一个托管 MVC 站点的 Web 角色和一个在后台运行作业的辅助角色。用户可以选择保持永久登录状态。

这是我的 ClaimsAuthenticationManager 中的代码：

```
public ClaimsPrincipal LogIn(string username, bool rememberMe = false)
{
    ClaimsPrincipal principal = Authenticate(null, principalFactory.CreateFormsPrincipal(username));
    SetSessionCookie(principal, rememberMe ? TimeSpan.MaxValue : TimeSpan.FromDays(1));
    return principal;
}

public override ClaimsPrincipal Authenticate(string resourceName, ClaimsPrincipal incomingPrincipal)
{
    if (!incomingPrincipal.Identity.IsAuthenticated)
    {
        return base.Authenticate(resourceName, incomingPrincipal);
    }

    return principalFactory.Create(incomingPrincipal.Identity.Name, incomingPrincipal.Identity.AuthenticationType);
}

private static void SetSessionCookie(ClaimsPrincipal principal, TimeSpan lifetime)
{
    var sessionSecurityToken = new SessionSecurityToken(principal, lifetime)
        {
            IsReferenceMode = true
        };
    FederatedAuthentication.SessionAuthenticationModule.WriteSessionTokenToCookie(sessionSecurityToken);
} 
```

在用户在网站上执行操作（例如，购买/取消订阅）的简单刷新案例中，可以通过以下方式完成：

1.  发行新令牌并重写 cookie 或
2.  注销用户（删除 cookie）并让他们重新进行身份验证

**我需要一些指导的是，当用户的声明由于非用户发起的事件而发生变化时，如何/何时刷新用户声明。**

想象以下场景：

1.  用户指定“记住我”并成功登录。他现在有一个永不过期的cookie。然后，他通过该网站购买订阅。他的主张通过上面的选项 #1 进行了更新。一个月后，他的订阅失效了，因为他选择不续订。但是他的 cookie 仍然有效，并且与之相关的声明表明他的订阅仍然有效。

2.  一个新用户创建一个帐户并成功登录并指定“记住我”。他现在拥有一个永不过期的 cookie，其中包括一项要求对某些特殊功能进行为期一周的免费试用的声明。一周后，一项后台作业（通过 worker 角色执行）删除了底层数据存储中的免费试用记录。但是，用户的 cookie 仍然有免费试用的要求。

在这两种情况下，如果用户自己注销并重新登录，问题就会自行解决。但是，如果用户没有采取特定操作退出，他的 cookie 包含无效声明。

**您如何处理此类案件？**

当我一直在撰写这个问题时，我想到最合乎逻辑的做法是将 cookie 的到期日期设置为声明集合中生命周期最短的声明的预期生命周期。

**有更好或不同的策略吗？**

任何指导将不胜感激。

谢谢。

作为参考，我已阅读以下有关相关主题的帖子：

1.  [使用会话身份验证模块 (SAM) 时如何更新声明](https://stackoverflow.com/questions/15157841/how-to-update-a-claim-when-using-session-authentication-module-sam/15161370#15161370)
2.  [使用 ADFS 和 WIF 更新声明](https://stackoverflow.com/questions/9689597/updating-claims-with-adfs-and-wif)
3.  [http://social.msdn.microsoft.com/Forums/en-US/Geneva/thread/bc1d21df-837e-4686-84cd-f918d26720a2](http://social.msdn.microsoft.com/Forums/en-US/Geneva/thread/bc1d21df-837e-4686-84cd-f918d26720a2)
4.  [http://social.msdn.microsoft.com/Forums/en-US/Geneva/thread/70edda22-c006-4868-8483-60067cc500b1](http://social.msdn.microsoft.com/Forums/en-US/Geneva/thread/70edda22-c006-4868-8483-60067cc500b1)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-09-21T10:46:14.143

我知道这有点老了，但是我相信对这两个问题的简短回答就是在 cookie 中包含自定义声明和会话令牌。此自定义声明值将是*订阅 id*。

根据任何敏感请求，订阅 ID 将根据有效订阅列表进行检查。

换句话说，而不是

> 最合乎逻辑的做法是将 cookie 的过期日期设置为声明集合中生命周期最短的声明的预期生命周期

它应该是“不要仅仅依赖 cookie 中的会话令牌，而是根据需要经常验证权限，可能还有一些额外的声明使验证更便宜”。

# windbg - LabView 操作员 Advantech PCI-1716 卡有时会导致 Windows 崩溃

> ID：15629080
> 
> 赞同：0
> 
> 时间：2013-03-26T03:49:40.697
> 
> 标签：windbg, labview

该系统包括2个研华PCI-1716卡： http: [//www.advantech.com/products/PCI-1716/mod_86EC4C4D-F497-45C5-81DA-B8600C0EB36F.aspx](http://www.advantech.com/products/PCI-1716/mod_86EC4C4D-F497-45C5-81DA-B8600C0EB36F.aspx)

我用 NI Labview 7.1 编写了一个程序。Labview程序可以控制两个PCI 1716卡。它工作得很好。

但是大约一年后，计算机崩溃了，有时会自动重启。没有人改变软件和硬件。

我使用 WinDbg 分析了 Windows 故障转储文件，我认为我发现了一些异常。

对于 WinDbg 结果，我想可能是 PCI-1716 驱动程序坏了，所以我重新安装了它。但问题也会发生。

而且我还重新安装了我的Windows XP。同样的问题再次发生。

我不知道怎么做。

也许 PCI 1716 硬件坏了。但是如何找到哪一个，有两个PCI 1716卡。

WinDbg 结果是：

```
Loading Dump File [F:\WinDBG\Mini012313-01.dmp] Mini Kernel Dump File: Only registers and stack trace are available

Symbol search path is: srv*C:\Documents and Settings\cky\symbols*http://msdl.microsoft.com/download/symbols Executable search path is:  Windows XP Kernel Version 2600 (Service Pack 2) MP (2 procs) Free x86 compatible Product: WinNt, suite: TerminalServer SingleUserTS Built by: 2600.xpsp_sp2_rtm.040803-2158 Kernel base = 0x804d8000 PsLoadedModuleList = 0x8055d700 Debug session time: Wed Jan 23 23:09:23.250 2013 (GMT+8) System Uptime: 0 days 23:47:48.802 Loading Kernel Symbols ....................................................................................................... Loading User Symbols Loading unloaded module list ....
*******************************************************************************
*                                                                             *
*                        Bugcheck Analysis                                    *
*                                                                             *
*******************************************************************************

Use !analyze -v to get detailed debugging information.

BugCheck 1000000A, {ffdf, 2, 1, 806e5a8e}

Unable to load image ADS1716S.sys, Win32 error 0n2
*** WARNING: Unable to verify timestamp for ADS1716S.sys
*** ERROR: Module load completed but symbols could not be loaded for ADS1716S.sys Probably caused by : ADS1716S.sys ( ADS1716S+f08 )

Followup: MachineOwner
---------

0: kd> !analyze -v
*******************************************************************************
*                                                                             *
*                        Bugcheck Analysis                                    *
*                                                                             *
*******************************************************************************

IRQL_NOT_LESS_OR_EQUAL (a) An attempt was made to access a pageable (or completely invalid) address at an interrupt request level (IRQL) that is too high.  This is usually caused by drivers using improper addresses. If a kernel debugger is available get the stack backtrace. Arguments: Arg1: 0000ffdf, memory referenced Arg2: 00000002, IRQL Arg3: 00000001, bitfield :     bit 0 : value 0 = read operation, 1 = write operation   bit 3 : value 0 = not an execute operation, 1 = execute operation (only on chips which support this level of status) Arg4: 806e5a8e, address which referenced memory

Debugging Details:
------------------

WRITE_ADDRESS:  0000ffdf 

CURRENT_IRQL:  2

FAULTING_IP:  hal!KeAcquireQueuedSpinLock+42 806e5a8e 8902            mov     dword ptr [edx],eax

CUSTOMER_CRASH_COUNT:  1

DEFAULT_BUCKET_ID:  DRIVER_FAULT

BUGCHECK_STR:  0xA

PROCESS_NAME:  LabVIEW.exe

LAST_CONTROL_TRANSFER:  from 804efbb0 to 806e5a8e

STACK_TEXT:   aa286c00 804efbb0 aa286c20 804f0de4 aa286c1c hal!KeAcquireQueuedSpinLock+0x42 aa286c08 804f0de4 aa286c1c 8602dc38 806e53b8 nt!IoAcquireCancelSpinLock+0xe aa286c20 804f104a 8602dc38 00000001 aa286c58 nt!IopStartNextPacket+0x18 aa286c30 f788ef08 8602dc38 00000001 85eb0230 nt!IoStartNextPacket+0x38 WARNING: Stack unwind information not available. Following frames may be wrong. aa286c58 80575529 85eb0230 86090da0 85f32448 ADS1716S+0xf08 aa286c80 805d1cb9 85f32448 85f32448 85f32690 nt!IoCancelThreadIo+0x33 aa286d08 805d209a 00000001 85f32448 00000000 nt!PspExitThread+0x403 aa286d28 805d2275 85f32448 00000001 aa286d64 nt!PspTerminateThreadByPointer+0x52 aa286d54 8054160c 00000000 00000001 0012e810 nt!NtTerminateProcess+0x105 aa286d54 7c92eb94 00000000 00000001 0012e810 nt!KiFastCallEntry+0xfc 0012e810 00000000 00000000 00000000 00000000 0x7c92eb94

STACK_COMMAND:  kb

FOLLOWUP_IP:  ADS1716S+f08 f788ef08 ??              ???

SYMBOL_STACK_INDEX:  4

SYMBOL_NAME:  ADS1716S+f08

FOLLOWUP_NAME:  MachineOwner

MODULE_NAME: ADS1716S

IMAGE_NAME:  ADS1716S.sys

DEBUG_FLR_IMAGE_TIMESTAMP:  45b96de9

FAILURE_BUCKET_ID:  0xA_W_ADS1716S+f08

BUCKET_ID:  0xA_W_ADS1716S+f08

Followup: MachineOwner
---------

0: kd> lmvm ADS1716S start    end        module name f788e000 f7893ac0 ADS1716S T (no symbols)           
    Loaded symbol image file: ADS1716S.sys
    Image path: ADS1716S.sys
    Image name: ADS1716S.sys
    Timestamp:        Fri Jan 26 10:56:41 2007 (45B96DE9)
    CheckSum:         00010C75
    ImageSize:        00005AC0
    Translations:     0000.04b0 0000.04e0 0409.04b0 0409.04e0 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T13:21:36.183

我会运行 Memtest86+ 只是为了看看你是否有任何坏的 RAM。

之后，也许您可​​以取出 1 张卡并编写一个简单的脚本来执行一些 I/O（可能类似于您通常所做的事情）。如果需要一段时间，您可以将其放入循环并运行一段时间，看看是否可以强制崩溃。您可以在每张卡上重复测试，看看您是否对其中一张卡有任何问题。

崩溃是经常发生还是很少发生？

# matlab - 提取数据的对角线并重新组合数字

> ID：15629082
> 
> 赞同：0
> 
> 时间：2013-03-26T03:49:42.867
> 
> 标签：matlab, for-loop, matrix

我的数据如下所示：

```
for a=1:2
    for b=1:3
        m{a,b}=zeros(3,3)
    end
 end

m{1,1}=[6 1 1;1 7 1;1 1 6];
m{1,2}=[3 2 2;2 5 2;2 2 6];
m{1,3}=[5 3 3;3 9 3;3 3 7];

m{2,1}=[2 4 4;4 5 4;4 4 8];
m{2,2}=[2 1 1;1 6 1;1 1 5];
m{2,3}=[6 2 2;2 7 2;2 2 8]; 
```

我想只取每组数据的对角线并重新组合这些数字。例如，

```
%RESULT

row_1_1=[6;3;5]  %which 6 from m{1,1}(1,1), 3 from m{1,2}(1,1) and 5 from m{1,3}(1,1)

row_1_2=[7;5;9]  %which 7 from m{1,1}(2,2), 5 from m{1,2}(2,2) and 9 from m{1,3}(2,2)

row_1_3=[6;6;7]  %which 6 from m{1,1}(3,3), 6 from m{1,2}(3,3) and 7 from m{1,3}(3,3)

row_2_1=[2;2;6]  %which 2 from m{2,1}(1,1), 2 from m{2,2}(1,1) and 6 from m{2,3}(1,1) 
```

等等。

知道如何获得这些结果吗？？谢谢~

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T04:41:09.857

你可以简单地做：

```
row_result = zeros(a,b,3);
for i=1:a
    for j=1:b
        for k = 1:3
            row_result(i,k,j) = m{i,k}(j,j);
        end
    end
end 
```

对于提供的样本数据，这将产生如下结果：

```
>> row_result(1,:,1)

ans =

     6     3     5

>> row_result(1,:,2)

ans =

     7     5     9

>> row_result(1,:,3)

ans =

     6     6     7

>> row_result(2,:,1)

ans =

     2     2     6 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T04:41:29.230

我认为您在构建新矩阵时遇到了丑陋的 for 循环。

您是否出于某种原因为此使用单元数组，而不是其他数据类型，例如更高维矩阵或结构数组？单元格数组的要点是每个单元格的内容是完全相互独立的，这意味着您不能使用 ':' 访问单元格内容的内部字段。

# clojure - 在 datomic 中，如何找出可用于反向查找的键？

> ID：15629085
> 
> 赞同：2
> 
> 时间：2013-03-26T03:49:58.790
> 
> 标签：clojure, datomic

以下使用简化的 datomic 设置：

```
:account/user -> string
:account/email -> ref

:email/name -> string
:email/type -> keyword 
```

如果我有包含帐户信息的实体，很容易知道它有电子邮件信息

```
(keys <account entity>) 
;; => [:account/user :account/email]

(:account/email <account entity>) 
;; => <email entity> 
```

但另一方面，如果我查看电子邮件实体的密钥，我不知道它有关联的帐户信息。

```
(keys <email entity>) 
;; => [:email/name :email/type]

(:account/_email <email entity>) 
;; => <account entity> 
```

`:account/_email`如果没有反复试验，如何发现这是一个有效的密钥？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T16:43:21.397

要检查密钥是否有效，您可以使用：

```
(.containsKey <email entity> :account/_email)
;; => true 
```

为了获得所有有效**的实体密钥，包括反向**密钥：

```
(.touch <email entity>)
(keys (.cache <email entity>)) 
```

请注意，`(keys)`直接在实体上调用仅返回转发键。

在类似的架构上进行了测试。

旁注：除了

```
(:account/_email <email entity>) 
```

您还可以查询以获取已链接指定电子邮件的帐户：

```
(q '[:find ?a :in $ ?e :where [?a :account/email ?e] ] (db conn) (:db/id <email entity>)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T18:36:12.053

尝试以下查询（未测试）：

```
(q '[:find ?attrs
     :in $ ?e
     :where [_ ?attrs ?e]]
    my-db my-entity) 
```

# java - 从数组打印字符串

> ID：15629087
> 
> 赞同：-2
> 
> 时间：2013-03-26T03:50:04.843
> 
> 标签：java

编写一个名为 listCountriesOfOrigin 的静态方法，将其添加到 Bowl 类中，该方法传递一个 Bowl 对象数组，并在控制台的列中打印数组中每个 Bowl 对象的原产国。

这是我的代码，但不正确，我得到的唯一编译错误是“系统检测到编译错误”。所以它对我帮助不大。我在正确的道路上吗？

```
public static String listCountriesOfOrigin (Bowl[] bowls) {
  for(int i = 0; i < Bowl.length; i++) {
    String origin = bowls[i].getOrigin();
    return origin;
  }
} 
```

(.getOrigin) 已经是一个声明的方法，它从数组中返回对象的来源。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T03:52:17.883

```
for(int i = 0; i < Bowl.length; i++) // `Bowl` is the object name 
```

这不应该是

```
for(int i = 0; i < bowls.length; i++) // bowls is the name of the array of Bowl objects passed to your method. 
```

此外，`return`您的`for`. 根据您的要求，您的方法应该`print`是控制台上的那些值。

因此，让你的方法返回`void`，而不是`return`在`for`循环中，有一个`System.out.println(origin);`

# vb.net - 编辑更新 DatagridView VB.Net（无数据库）

> ID：15629088
> 
> 赞同：-3
> 
> 时间：2013-03-26T03:50:08.017
> 
> 标签：vb.net, datagridview

今天是个好日子。我在这个项目中需要你的帮助（一个没有数据库的 Visual Basic 程序。）它只包含一个 Datagridview、一个文本框和三个按钮（一个“添加”按钮、一个“编辑”和一个“更新”按钮） .

1\. 有没有办法（比如使用“for循环”）自动分配`DataGridView1.Item("item location")`给编辑和更新的那个？

2\. 或者是否可以只单击 Datagridview 中的一个项目，然后在不将其传递给文本框的情况下对其进行编辑，然后进行更新。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T14:54:51.327

感谢那些为寻找这个线程的答案做出贡献的人。我暂时没有使用您的解决方案（也许其他时间）。经过一番研究，我找到了问题 2 的答案（对用户更友好）：

> 2\. 或者是否可以只单击 Datagridview 中的一个项目，然后在不将其传递给文本框的情况下对其进行编辑，然后进行更新。

这是我所做的：在 Private Sub Form1_Load 中，只需添加：

```
yourDataGridView.EditMode = DataGridViewEditMode.EditOnEnter 
```

在 Private Sub yourDataGridView_（这里的任何事件：DoubleCellClick、CellContentClick 等）中添加：

```
DataGridView1(e.ColumnIndex, e.RowIndex).[ReadOnly] = False
DataGridView1.BeginEdit(False) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T08:17:42.627

您的 DataGridView 有多少列？
根据您填充 DataGridView 的方式，我假设只有 1.
在您的表单顶部声明它

```
Dim i as Integer 
```

在您的 btnUpdate_Click 事件中（只需将您的编辑和更新按钮合二为一）

```
SELECT CASE btnUpdate.Text
    Case "Update"
         With DataGridView1
              'Check if there is a selected row
              If .SelectedRows.Count = 0 Then
                   Msgbox "No Row Selected for Update"
                   Exit Sub
              End If
              i = .CurrentRow.Index 'Remember the Row Position
              Textbox1.Text = .item(0 ,i).value 'Pass the Value to the textbox
              .Enabled = False 'Disable DataGridView to prevent users from clicking other row while updating. 
              btnUpdate.Text = "Save"
         End With
    Case Else 'Save
         DatagridView1.Item(0,i).Value = Textbox1.Text
         btnUpdate.Text = "Update"
END SELECT 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T04:14:37.283

单元格双击事件的变量`DataGridViewCellEventArgs`（在设计者将为您生成的方法存根中）具有和属性，这些属性引用您单击的单元格的位置。`e``RowIndex``ColumnIndex`

保存这些（可能在一个类变量中，如果这就是你所需要的，则保存在一个本地变量中），然后在更新 中的单元格时引用它们`DataGridView`，可能像这样`MyDataGridView.Item(e.ColumnIndex, e.RowIndex)`或双击事件处理程序中的变量在`MyDataGridView.Rows(e.RowIndex).Cells(e.ColumnIndex)`哪里。`e`

对于你的单元格双击事件，你可以有这样的事情：

```
Private Sub DataGridView1_CellDoubleClick(sender As Object, e As DataGridViewCellEventArgs) Handles DataGridView1.CellDoubleClick

    Using myEditor As New frmCellEditor(Me.DataGridView1.Item(e.ColumnIndex, e.RowIndex).Value)
        If myEditor.ShowDialog() = DialogResult.OK Then
            Me.DataGridView1.Item(e.ColumnIndex, e.RowIndex).Value = myEditor.NewCellValue
        End If
    End Using

End Sub 
```

这将调用您的编辑器的一个新实例并从您那里获取一个值。为了这个演示的目的，我制作了一个这样的表格：

公共类 frmCellEditor

```
 Public NewCellValue As Integer

    Public Sub New(ByVal CurrentCellValue As Object)

        InitializeComponent()

        Me.TextBox1.Text = CStr(CurrentCellValue)

    End Sub

    Private Sub Button1_Click(sender As Object, e As EventArgs) Handles Button1.Click

        Me.NewCellValue = CInt(Me.TextBox1.Text)

        Me.DialogResult = DialogResult.OK

    End Sub

    Private Sub Button2_Click(sender As Object, e As EventArgs) Handles Button2.Click

        Call Me.Close()

    End Sub
End Class 
```

它只有两个按钮（`Button1`= OK，`Button2`= Cancel）。当您单击确定时，它只返回值`1`，然后将其设置为单元格的值。

这是一个非常简单的示例，但它应该为您提供您正在尝试做的事情的基础知识。

更新：

我更新了编辑器界面的代码，因此它将包括处理使用 datagridview 从表单来回传递值。

在您的项目中，创建一个名为`frmCellEditor`. 此表单必须有两个按钮和一个文本框（确保程序名称匹配！）。将代码替换为上面列出的代码。您还必须`Imports System.Windows.Forms`在类上方添加。

修改数据网格的单元格双击事件的事件处理程序，以在 `frmCellEditor`构造时传递单元格值（行`... New frmCellEditor(...)`.

# php - 如何在一天中的不同时间有不同的背景图像

> ID：15629094
> 
> 赞同：0
> 
> 时间：2013-03-26T03:51:26.670
> 
> 标签：php, css, image, background

我希望能够在一天中的不同时间拥有不同的背景颜色。php可以做到吗，还是我必须使用JavaScript？我想要做的事情是为每个季节的早上、下午、晚上和晚上制作一张背景照片，我想尝试使代码看起来像这样，但我不完全确定这种方法是否可行。

```
$ty=timeOfYear("D") 
$background=__________
$t=date("H")

if ($t>"9"[$ty>"100")
________________

elseif  
__________________ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T04:39:58.243

我认为 JavaScript 在您的情况下将是最佳选择。

从这里获得灵感

[https://github.com/beiyuu/beiyuu.github.com/blob/master/old-index.html](https://github.com/beiyuu/beiyuu.github.com/blob/master/old-index.html)

# android - 如何在 Android 中将 16 位 PCM 数据转换为电压值

> ID：15629095
> 
> 赞同：3
> 
> 时间：2013-03-26T03:51:26.597
> 
> 标签：android, android-audiorecord, android-hardware

我正在尝试计算来自 Android 中麦克风的声音的 db 值。我使用 Audio Record 类从麦克风获取 16 位 PCM 数据。

```
 //init a recorder instance
      recorder = new AudioRecord(MediaRecorder.AudioSource.MIC,ECORDER_SAMPLERATE, RECORDER_CHANNELS,RECORDER_AUDIO_ENCODING, bufferSize);                                   

      recorder.startRecording();

    // and then read 16 bit PCM data
      recorder.read(data, 0, bufferSize); 
```

此数据的值范围为 -32768 到 32767（有符号 2^16）。

我相信这些是量化值。但我想知道对应的电压值是多少。android中麦克风的电压值范围是多少？所有智能手机都差不多吗？

例如：假设麦克风输出为 0 至 +5 V，则 32767 对应于 +5 V DC。

# hadoop - 在 Eclipse Map/Reduce 位置，新的 Hadoop 位置没有响应？

> ID：15629097
> 
> 赞同：2
> 
> 时间：2013-03-26T03:52:01.993
> 
> 标签：hadoop, mapreduce, hadoop-plugins

在 Eclipse 中，我正在尝试添加新的 hadoop 位置。但是当我单击添加新的 hadoop 位置时，它没有响应。我为 hadoop 1.0.4 构建了自己的插件。

我的清单如下所示，

```
Bundle-ClassPath: classes/,
lib/hadoop-core.jar,
lib/commons-configuration-1.6.jar,
lib/commons-httpclient-3.0.1.jar,
lib/commons-cli-1.2.jar,
lib/commons-lang-2.4.jar,
lib/jackson-mapper-asl-1.8.8.jar,
lib/jackson-core-asl-1.8.8.jar 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T18:08:18.207

我在这里找到了中文解决方案，但您可以使用谷歌翻译或直接下载文件：http: [//yizhilong28.iteye.com/blog/1030536](http://yizhilong28.iteye.com/blog/1030536)。

# python - TypeError：无法连接“str”和“float”对象

> ID：15629098
> 
> 赞同：2
> 
> 时间：2013-03-26T03:52:04.053
> 
> 标签：python, typeerror

我已经搜索过，无法弄清楚这个问题是如何出现的，或者如何解决它。任何帮助表示赞赏，谢谢。

我的代码如下：

```
def main():
temperature = raw_input("Please enter an integer followed by a single space then either a F for Fahrenheit, C for Celsius, K for Kelvin, or R for Rankine: ")
    # algorithm for Farenheit to Kelvin, Celsius, and Rankine
    if temperature[-1] == "F":
    K = (temperature[:-1] + (459.67) * (5.0/9.0))
    print K
    C = (temperature[:-1] - 32) * (5.0/9.0)
    print C
    R = (temperature[:-1] + 459.67)
    print R
    # algorithm for Celsius to Kelvin, Fahrenheit, and Rankine
    elif temperature[-1] == "C":
        K = (temperature[:-1] + 273.15)
        print K
        F = (temperature[:-1] * (9.0/5.0) + 32)
        print F
        R = (temperature[:-1] + 273.15) * (9.0/5.0)
        print R
    # algorithm for Kelvin to Celsius, Fahrenheit, and Rankine
    elif temperature[-1] == "K":
        C = (temperature[:-1] - 273.15)
        print C
        F = (temperature[:-1] * (9.0/5.0) - 459.67)
        print F
        R = (temperature[:-1] * (9.0/5.0))
        print R
    # algorith for Rankine to Fahrenheit, Celsius, and Kelvin
    elif temperature[-1] == "R":
        F = (temperature[:-1] - 459.67)
        print F
        C = (temperature[:-1] - 491.67) * (5.0/9.0)
        print C
        K = (temperature[:-1] * (5.0/9.0))
        print K
main() 
```

以及输入“50 F”后的错误消息：

请输入一个整数，后跟一个空格，然后输入 F 代表华氏温度、C 代表摄氏温度、K 代表开尔文或 R 代表兰金：50 F

```
Traceback (most recent call last):
  File "/Users/Minotza/Documents/multi-unit_temperature_converter.py", line 36, in <module>
    main()
  File "/Users/Minotza/Documents/multi-unit_temperature_converter.py", line 5, in main
    K = (temperature[:-1] + (459.67) * (5.0/9.0))
TypeError: cannot concatenate 'str' and 'float' objects
>>> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T04:06:36.890

`raw_input`返回一个`string`用户输入。您正在寻找的是一个`float`. 在 Python 中，无法将 a`string`和`float`对象相加。因此，您需要做的就是将第一个输入转换为 a `float`，以便您可以对其执行数学运算。

这是我将如何做到这一点：

```
user_input = raw_input("Prompt Text...").split(' ')

temperature = float(user_input[0])
units_or_option = user_input[1] 
```

因此，该`split`方法根据用户输入的内容制作一个列表，使用空格字符来拆分条目。`temperature`包含空格前的第一件事，转换为`float`. `units_of_option`包含在数字和空格之后输入的字符。

因此，如果用户输入：

```
123.5 F 
```

变量具有以下值：

```
user_input = ["123.5", "F"]
temperature = 123.5
units_or_option = "F" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T04:03:33.067

您只需要 2 处更改：
**第 1 次：**在之后
添加，例如 ：`temperature=float(temperature.split(' ')[0]),temperature.split(' ')[1]``raw_input``temperature`

```
temperature = raw_input("Please enter an integer followed by a single space then either a F for Fahrenheit, C for Celsius, K for Kelvin, or R for Rankine: ")
temperature=float(temperature.split(' ')[0]),temperature.split(' ')[1]
##. . . . your code 
```

**第二：**
并将所有替换`temperature[:-1]`为`temperature[0]`

你的最终代码

```
def main():
    temperature = raw_input("Please enter an integer followed by a single space then either a F for Fahrenheit, C for Celsius, K for Kelvin, or R for Rankine: ")
    # algorithm for Farenheit to Kelvin, Celsius, and Rankine
    temperature=float(temperature.split(' ')[0]),temperature.split(' ')[1]
    if temperature[-1] == "F":
        K = (temperature[0] + (459.67) * (5.0/9.0))
        print K
        C = (temperature[0] - 32) * (5.0/9.0)
        print C
        R = (temperature[0] + 459.67)
        print R
    # algorithm for Celsius to Kelvin, Fahrenheit, and Rankine
    elif temperature[-1] == "C":
        K = (temperature[0] + 273.15)
        print K
        F = (temperature[0] * (9.0/5.0) + 32)
        print F
        R = (temperature[0] + 273.15) * (9.0/5.0)
        print R
    # algorithm for Kelvin to Celsius, Fahrenheit, and Rankine
    elif temperature[-1] == "K":
        C = (temperature[0] - 273.15)
        print C
        F = (temperature[0] * (9.0/5.0) - 459.67)
        print F
        R = (temperature[0] * (9.0/5.0))
        print R
    # algorith for Rankine to Fahrenheit, Celsius, and Kelvin
    elif temperature[-1] == "R":
        F = (temperature[0] - 459.67)
        print F
        C = (temperature[0] - 491.67) * (5.0/9.0)
        print C
        K = (temperature[0] * (5.0/9.0))
        print K
main() 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-26T04:02:59.643

```
temperature = raw_input("Please enter an integer followed by a single space then either a F for Fahrenheit, C for Celsius, K for Kelvin, or R for Rankine: ") 
```

`raw_input`返回一个字符串，因此您希望将字符串拆分或将其转换为每一步转换为浮点数。

将数字设置为变量而不是重复计算总是更好，所以你可以这样做

将其转换为浮点数：

```
temperature = raw_input("Please enter an integer followed by a single space then either a F for Fahrenheit, C for Celsius, K for Kelvin, or R for Rankine: ")
temp = float(temperature.split(' ')[0]) 
```

`string.split(obj)`它的作用是通过`string`将其拆分为`obj`. 例如，如果用户输入`273 K`，因此`temperature == '273 K'`，`temperature.split(' ')`通过在每个空格处拆分它来创建一个列表，它变成`['273', 'K']`。但是，这些仍然是字符串，所以我们想将第一个转换为浮点数，所以我们这样做了`float(temperature.split(' ')[0]) # we only want to convert the first element`.

您改进的代码，通过替换`temperature[:-1]`和`temp`替换`temperature[-1]`（`unit`创建变量而不是多次计算值总是更好的编程实践）：

```
def main():
    temperature = raw_input("Please enter an integer followed by a single space then either a F for Fahrenheit, C for Celsius, K for Kelvin, or R for Rankine: ")
    # algorithm for Farenheit to Kelvin, Celsius, and Rankine
    temp, unit = float(temperature.split(' ')[0]), temperature[-1] # multi-assignment
    if unit == "F":
        K = (temp + (459.67) * (5.0/9.0))
        print K
        C = (temp - 32) * (5.0/9.0)
        print C
        R = (temperature[:-1] + 459.67)
        print R
    # algorithm for Celsius to Kelvin, Fahrenheit, and Rankine
    elif unit == "C":
        K = (temp + 273.15)
        print K
        F = (temp * (9.0/5.0) + 32)
        print F
        R = (temp + 273.15) * (9.0/5.0)
        print R
    # algorithm for Kelvin to Celsius, Fahrenheit, and Rankine
    elif unit == "K":
        C = (temp - 273.15)
        print C
        F = (temp * (9.0/5.0) - 459.67)
        print F
        R = (temp * (9.0/5.0))
        print R
    # algorith for Rankine to Fahrenheit, Celsius, and Kelvin
    elif temperature[-1] == "R":
        F = (temp - 459.67)
        print F
        C = (temp - 491.67) * (5.0/9.0)
        print C
        K = (temp * (5.0/9.0))
        print K
main() 
```

# java - 解析 JSON 以配置 android 应用程序

> ID：15629099
> 
> 赞同：-1
> 
> 时间：2013-03-26T03:52:04.793
> 
> 标签：java, android, json, performance, android-intent

在我的 android 应用程序中，我必须使用来自服务器的 JSON 在应用程序中进行特定调整。我试图实现的是读取这个 json 并将所有值存储到局部变量中以在应用程序内执行操作。

JSON来自服务器：

```
[

    {
        "sett": " ",
        "glHdr": {
            "sm": [ ],
            "scleHPad": false,
            "st": "sbsm"
        },
        "colrBG": [
            23,
            105,
            184,
            100
        ],
        "colrTB": [
            0,
            0,
            0,
            0
        ],
        "colrTR": [
            255,
            255,
            255,
            100
        ],
        "glFtr": {
            "icoSz": "icoSzN",
            "sm": [ ],
            "scleHPad": false,
            "gvNR": 3,
            "gvHIT": false,
            "gvNC": 3,
            "st": "igsm"
        },
        "statBr": true
    },
    {
        "sm": [
            {
                "tbico": "b43-jeep.png",
                "t": "Welcome!",
                "w": "http://google.com/start",
                "st": "w",
                "wTBL": "wTBLN"
            },
            {
                "t": "Content screen title",
                "f": "Eltec%20Spec%20sheet%20Gim%20RD30W.pdf",
                "st": "f"
            },
            {
                "tbico": "109-chicken.png",
                "t": "Sub menu",
                "sm": [
                    {
                        "t": "Screen 1",
                        "st": "f"
                    },
                    {
                        "t": "Screen 2",
                        "w": "Http://google.com",
                        "st": "w",
                        "wTBL": "wTBLT"
                    }
                ],
                "st": "sm"
            },
            {
                "st": "f"
            }
        ],
        "st": "tbm"
    }

] 
```

为了解析这个，我创建了 Parse JSON 类，并试图想出在我的应用程序中读取和存储这个 json 值的方法。

执行此操作的函数：

```
public void doScanAppConfigJson(){

private static final String = TAG_TITLE;
private static final String = TAG_WEB_ADDRESS;
private static final String = TAG_SCREEN_TYPE;
private static final String = TAG_FILENAME;

        JSONArray appConfig = null;

        // Function for looping json object via ParseJson class.
        //Creating JSON Parser instance
        JSONParser jParser = new JSONParser();

        //Getting json strings from url
        JSONObject jsonObject = jParser.getJSONFromUrl(url);

    try{
        //Getting array of settings
        appConfig = jsonObject.getJSONArray(ConfigConstants.TABLE_VIEW_SUB_MENU_CONFIG);
        //loop throw all the objects under -sm[]
        for (int i = 0; i < appConfig.length(); i++){

            JSONObject sm = appConfig.getJSONObject(i);

            //Now store each of this json in local constant var.

            String tabTitle = sm.getString(TAG_TITLE);

            String webAddress = sm.getString(TAG_WEB_ADDRESS);

            String screenType = sm.getString(TAG_SCREEN_TYPE);

            String fileName = sm.getString(TAG_FILENAME);

        }

    }catch (JSONException e){
        e.printStackTrace();

    }

    } 
```

getJSONFromUrl 方法：

```
public JSONObject getJSONFromUrl(String url) {

        //Global authentication for link username and password.
        Authenticator.setDefault(new Authenticator() {
            protected PasswordAuthentication getPasswordAuthentication(){

            return new PasswordAuthentication("username", "password".toCharArray());   
            }

        });

        // Making HTTP request
        try {
            // defaultHttpClient
            DefaultHttpClient httpClient = new DefaultHttpClient();
            HttpPost httpPost = new HttpPost(url);

            HttpResponse httpResponse = httpClient.execute(httpPost);
            HttpEntity httpEntity = httpResponse.getEntity();
            is = httpEntity.getContent();           

        } catch (UnsupportedEncodingException e) {
            e.printStackTrace();
        } catch (ClientProtocolException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }

        try {
            BufferedReader reader = new BufferedReader(new InputStreamReader(
                    is, "iso-8859-1"), 8);
            StringBuilder sb = new StringBuilder();
            String line = null;
            while ((line = reader.readLine()) != null) {
                sb.append(line + "\n");
            }
            is.close();
            json = sb.toString();
        } catch (Exception e) {
            Log.e("Buffer Error", "Error converting result " + e.toString());
        }

        // try parse the string to a JSON object
        try {
            jObj = new JSONObject(json);
        } catch (JSONException e) {
            Log.e("JSON Parser", "Error parsing data " + e.toString());
        }

        // return JSON String
        return jObj;

    } 
```

而且我收到错误：`settingsjava.lang.NullPointException`在这个问题上，但我已经定义了变量，请有人告诉我如何在 JSON 之上解析。我在实现ans的正确轨道上吗？我的问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T04:18:26.487

当前的 json 字符串格式为：

```
[  //<<<< JSONArray

    {   //<<<< JSONObject
       // other items here...
    }

] 
```

此 Json 字符串内容`JSONArray`作为根元素而不是`JSONObject`. 你需要先转换它 JSONArray 然后从中提取 JSONObject ：

```
JSONArray jsonObject = jParser.getJSONFromUrl(url); 
```

还将`getJSONFromUrl`方法返回类型更改为`JSONArray`

# javascript - javascript访问一个json对象

> ID：15629101
> 
> 赞同：0
> 
> 时间：2013-03-26T03:52:11.233
> 
> 标签：javascript, arrays, json

这可能听起来很愚蠢，但我正在尝试显示内容的价值：我确实`console.log(teams);` 在 mozilla 上打开了 firebug，这就是我得到的：

```
 [Object { id= "50",  content= "Team 1 test" ,  date="Tue Mar 26 2013 12:00:00"}] 
```

当我这样做`alert(teams.content);`或`alert(teams[content]);` 它返回对象未定义时。请问我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T03:53:51.760

对象被包裹在一个数组中（注意`[`and `]`）

```
teams[0].content; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-26T03:54:11.680

它不仅仅是一个对象，而是一个对象数组，. 您的对象位于`0th`数组的索引处。

所以试试这个，

```
alert(teams[0].content) 
```

还有， `alert(teams[content]);`是错误的方式。这里的索引应该是一个字符串。

所以，另一种方式是，

```
alert(teams[0]['content']); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-26T03:54:12.410

团队是一个数组。

要读取一个值，您需要对其进行索引

```
teams[index].content 
```

# objective-c - 通过 AFNetworking AFHTTPClient 发布 JSON 有序值列表

> ID：15629105
> 
> 赞同：0
> 
> 时间：2013-03-26T03:52:27.627
> 
> 标签：objective-c, afnetworking

我知道我可以在将 AFHTTPClient 默认编码设置为 AFJSONParameterEncoding 然后在调用时发布 JSON 数据：

```
- (void)postPath:(NSString *)path
      parameters:(NSDictionary *)parameters
         success:(void (^)(AFHTTPRequestOperation *operation, id responseObject))success
         failure:(void (^)(AFHTTPRequestOperation *operation, NSError *error))failure 
```

在参数处，我可以填写一个翻译成 JSON 的字典。

如果我连接到请求 JSON 对象的服务器，如下所示：

[“一个漂亮的图层”]

我在顶层不需要字典，而是数组对象。但是参数决定了字典类型，我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T05:17:59.217

如果您需要一个数组作为请求的基础，您应该`NSData`使用`NSJSONSerialization`. 创建一个`NSMutableURLRequest`并`setHTTPBody:`使用该数据，然后创建一个新的`AFJSONRequestOperation`using `initWithRequest:`。将您的请求排入队列，它应该可以正常工作。

# jquery - 在 iOS 上单击和/或悬停时打开 CSS 下拉菜单

> ID：15629109
> 
> 赞同：1
> 
> 时间：2013-03-26T03:52:51.827
> 
> 标签：jquery, iphone, ios, css, ipad

我有一个悬停时打开的 CSS 下拉列表，当有人使用 iPad 或 iPhone 等 iOS 设备时会产生问题。我在这里创建了一个粗略的 jFiddle：

[http://jsfiddle.net/7vtWy/1/](http://jsfiddle.net/7vtWy/1/)

如果我使用带有 chrome 的 Android 设备，它会很好用……单击主菜单项会弹出下拉列表。在 iOS 上，什么都没有。有没有一种方法可以做到，如果有移动设备，下拉菜单将显示在主菜单点击上，因为没有悬停之类的东西？

**HTML**

```
<header>        
<nav role="navigation" class="clearfix">
        <ul id="nav-site">
            <li>
                <span class="arrow">Shop</span>
                <div class="dropdown_1column">
                    <div class="mainbox clearfix">
                        <ul>
                            <li class="main-category"><a href="new-products/">New Arrivals</a></li>
                            <li class="main-category"><a href="gifts-under-100/">Gifts Under $100</a></li>
                            <li class="main-category"><a href="staff-favorites/">Staff Favorites</a></li>
                            <li class="main-category"><a href="made-in-the-usa/">Made in the USA</a></li>
                        </ul>
                    </div>
                </div>
            </li>
        </ul>
    </nav> 
```

**CSS**

```
header nav { text-transform: uppercase; width: 980px; font-weight: 700; font-size: 15px;}
header nav a { color: #000; text-decoration: none; }
header nav li { float: left; display: block; position: relative; z-index: 999; }

header nav #nav-site { float: left; }
header nav #nav-site li { padding: 0 10px 3px 0; }
header nav .arrow:hover { cursor: pointer; }
header nav #nav-account { float: right; }
header nav #nav-account li { margin: 0 0 3px 10px; }
header nav #nav-account .cart span { font-weight: 400; font-size: 11px; padding: 2px 4px; display: block; position: absolute; top: 01px; left: 48px; -webkit-border-radius: 2px; -moz-border-radius: 2px; border-radius: 2px; background: #edeb2b; display: block; }
header nav #nav-account .cart span:hover { background: #f6f6f6; }

header nav .dropdown_1column { position: absolute; left: -999em; width: 980px; font-weight: 400; font-size: 13px; text-transform: none; letter-spacing: 1px; }
header nav li:hover .dropdown_1column {left: auto; top: auto; }
header nav .dropdown_1column .mainbox { background: #edeb2b; border: 4px solid #000; }
header nav .dropdown_1column ul { width: 161px; float: left; letter-spacing: 0; height: 235px; border-right: 1px solid #d4d220; }
header nav .dropdown_1column ul.last { border: none; }
header nav #nav-site .dropdown_1column li { float: none; margin: 0; font-size: 12px; }
header nav #nav-site .dropdown_1column li.main-category { font-weight: 700; text-transform: uppercase; font-size: 13px; }
header nav .dropdown_1column a { display: block; padding: 5px 10px; }
header nav .dropdown_1column a:hover { background: #d4d220; }
header nav #nav-site .dropdown_1column .popular { padding: 10px; }
header nav .dropdown_1column .popular a { display: inline; padding: 0; }
header nav .dropdown_1column .popular a:hover { background: #d4d220; }
header nav .dropdown_1column li.main-category a:hover { background: none; color: #363636; }

header nav .dropdown_1column_right { position: absolute; left: -999em; font-weight: 400; font-size: 13px; text-transform: none; letter-spacing: 1px; }
header nav .dropdown_1column_right span { position: absolute; right: 10px; padding: 0 4px; background: #d4d220; -webkit-border-radius: 2px; -moz-border-radius: 2px; border-radius: 2px; }
header nav li:hover .dropdown_1column_right {left: auto; right: -49px; top: auto; }
header nav .dropdown_1column_right ul {letter-spacing: 0; background: #edeb2b; border: 4px solid #000; width: 175px; }
header nav #nav-account .dropdown_1column_right li { float: none; margin: 0; }
header nav .dropdown_1column_right a { display: block; padding: 5px 10px; }
header nav .dropdown_1column_right a:hover { background: #d4d220; } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T04:23:49.397

代替悬停，我使用 jQuery 来`bind()`处理 `touchstart`and`touchend`函数。简而言之，`:hover`负责显示下拉菜单已更改为`.hover`。在您的移动环境中，这将转换为“当用户触摸您的导航项目时，将显示下拉菜单。当他们松开手指时，它会消失。”

请注意，使用户体验更好的更改可能包括“单击/点击关闭”或类似的东西。

此外，如果这也将用于桌面环境，`mouseenter`并且`mouseleave`可以正常工作。[AFIK，在 Mobile Safari 中也是如此](http://sitr.us/2011/07/28/how-mobile-safari-emulates-mouse-events.html)

### jQuery 来了

```
$(function () {
    $('header nav li').bind({
        'touchstart': function () {
            $(this).addClass('hover')
        },
            'touchend': function () {
            $(this).removeClass('hover')
        }
    });
}); 
```

> [**小提琴**：http://jsfiddle.net/gvyKB/3/](http://jsfiddle.net/gvyKB/3/)

# java - 无法获取子节点的名称属性

> ID：15629111
> 
> 赞同：2
> 
> 时间：2013-03-26T03:52:53.147
> 
> 标签：java, dom, xml-parsing

我有一个如下所示的 XML 文件：

```
<exist:result xmlns:exist="http://exist.sourceforge.net/NS/exist">
<exist:collection name="/db/RCM" created="2013-03-24T09:37:34.957+05:30" owner="admin" group="dba" permissions="rwxrwxrwx">
<exist:resource name="demo2.xml" created="2013-03-24T09:44:13.696+05:30" last-modified="2013-03-24T09:44:13.696+05:30" owner="guest" group="guest" permissions="rw-r--r--"/>
<exist:resource name="demo3.xml" created="2013-03-24T09:45:47.592+05:30" last-modified="2013-03-24T09:45:47.592+05:30" owner="guest" group="guest" permissions="rw-r--r--"/>
<exist:resource name="rcmdemo.xml" created="2013-03-25T11:36:45.659+05:30" last-modified="2013-03-25T11:36:45.659+05:30" owner="guest" group="guest" permissions="rw-r--r--"/>
<exist:resource name="rcmdemo2.xml" created="2013-03-25T11:47:03.564+05:30" last-modified="2013-03-25T11:47:03.564+05:30" owner="guest" group="guest" permissions="rw-r--r--"/>
</exist:collection>
</exist:result> 
```

我想获取 XML 文件的名称，所以输出如下所示：

```
demo2.xml
demo3.xml
rcmdemo.xml
rcmdemo2.xml 
```

我写了以下代码：

```
NodeList nodeList = doc.getElementsByTagName("exist:resource");
for (int i = 0; i < nodeList.getLength(); i++) {
    Node n = nodeList.item(i);
    Node actualNode = n.getFirstChild();
    if (actualNode != null) {
        System.out.println(actualNode.getNodeValue());
    }
} 
```

但它没有返回我想要的输出，我哪里出错了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T04:49:19.417

在此示例中，名称是节点的属性，而不是节点的名称。请查看以下问题以获取有关节点属性的信息，特别是第二个答案是我认为您正在寻找的内容。

[使用 Java 从 XML 文件中获取属性](https://stackoverflow.com/questions/6927385/get-the-the-attributes-from-an-xml-file-using-java?rq=1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T04:58:17.707

您必须从给定节点获取属性，因为您`name`是`exist:resource`.

```
NodeList nodeList = doc.getElementsByTagName("exist:resource");
        for (int i = 0; i < nodeList.getLength(); i++) {
            Node n = nodeList.item(i);
            Node actualNode = n.getFirstChild();
            if (actualNode != null) {
                // Will return node value
                System.out.println(actualNode.getNodeValue());
                // Will return the attribute value
                System.out.println(current.getAttributeValue("name")); 
            }
        } 
```

# iphone - 将 AVAssetWriter 与原始 NAL 单元一起使用

> ID：15629117
> 
> 赞同：9
> 
> 时间：2013-03-26T03:53:22.123
> 
> 标签：iphone, ios, h.264, avassetwriter, cmsamplebufferref

我在 iOS 文档中注意到，`AVAssetWriterInput`您可以通过`nil`字典`outputSettings`来指定不应重新编码输入数据。

> 用于对附加到输出的媒体进行编码的设置。传递 nil 以指定不应重新编码附加的样本。

我想利用此功能传入原始 H.264 NAL 流，但我无法将原始字节流调整为`CMSampleBuffer`可以传入 AVAssetWriterInput`appendSampleBuffer`方法的流。我的 NAL 流仅包含 SPS/PPS/IDR/P NAL（1、5、7、8）。我无法找到有关如何将预编码的 H264 数据与 AVAssetWriter 一起使用的文档或结论性答案。生成的视频文件无法播放。

如何正确地将 NAL 单元打包成`CMSampleBuffers`? 我需要使用起始代码前缀吗？长度前缀？我需要确保我只放一个 NAL`CMSampleBuffer`吗？我的最终目标是使用 H264/AAC 创建 MP4 或 MOV 容器。

这是我一直在玩的代码：

```
-(void)addH264NAL:(NSData *)nal
{
    dispatch_async(recordingQueue, ^{
        //Adapting the raw NAL into a CMSampleBuffer
        CMSampleBufferRef sampleBuffer = NULL;
        CMBlockBufferRef blockBuffer = NULL;
        CMFormatDescriptionRef formatDescription = NULL;
        CMItemCount numberOfSampleTimeEntries = 1;
        CMItemCount numberOfSamples = 1;

        CMVideoFormatDescriptionCreate(kCFAllocatorDefault, kCMVideoCodecType_H264, 480, 360, nil, &formatDescription);
        OSStatus result = CMBlockBufferCreateWithMemoryBlock(kCFAllocatorDefault, NULL, [nal length], kCFAllocatorDefault, NULL, 0, [nal length], kCMBlockBufferAssureMemoryNowFlag, &blockBuffer);
        if(result != noErr)
        {
            NSLog(@"Error creating CMBlockBuffer");
            return;
        }
        result = CMBlockBufferReplaceDataBytes([nal bytes], blockBuffer, 0, [nal length]);
        if(result != noErr)
        {
            NSLog(@"Error filling CMBlockBuffer");
            return;
        }
        const size_t sampleSizes = [nal length];
        CMSampleTimingInfo timing = { 0 };
        result = CMSampleBufferCreate(kCFAllocatorDefault, blockBuffer, YES, NULL, NULL, formatDescription, numberOfSamples, numberOfSampleTimeEntries, &timing, 1, &sampleSizes, &sampleBuffer);

        if(result != noErr)
        {
            NSLog(@"Error creating CMSampleBuffer");
        }
        [self writeSampleBuffer:sampleBuffer ofType:AVMediaTypeVideo];
    });
} 
```

请注意，在我实际尝试附加它之前，我使用我认为有效的时间调用方法`CMSampleBufferSetOutputPresentationTimeStamp`内部的示例缓冲区。`writeSampleBuffer`

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T02:34:22.427

我设法让视频播放在 VLC 中工作，但不是在 QuickTime 中。我使用与上面发布的代码类似的代码将 H.264 NAL 放入 CMSampleBuffers。

我有两个主要问题：

1.  我没有正确设置 CMSampleTimingInfo（正如我上面的评论所述）。
2.  我没有正确打包原始 NAL 数据（不确定记录在哪里，如果有的话）。

为了解决 #1，我将`timing.duration = CMTimeMake(1, fps);`fps 设置为预期帧速率。然后我设置`timing.decodeTimeStamp = kCMTimeInvalid;`的意思是样本将按解码顺序给出。最后，我`timing.presentationTimeStamp`通过计算绝对时间来设置，我也使用了`startSessionAtSourceTime`.

为了解决＃2，通过反复试验，我发现以以下形式提供我的 NAL 单位是有效的：

```
[7 8 5] [1] [1] [1]..... [7 8 5] [1] [1] [1]..... (repeating) 
```

其中每个 NAL 单元都以 32 位起始码为前缀，等于`0x00000001`.

大概出于同样的原因，它没有在 QuickTime 中播放，我仍然无法将生成的 .mov 文件移动到相册（该`ALAssetLibrary`方法`videoAtPathIsCompatibleWithSavedPhotosAlbum`失败，说明“无法播放电影。”希望有人知道什么是继续可以评论。谢谢！

# spring - 在 Spring 测试框架下运行测试用例时，@Qualifier 和 @Resource 不起作用

> ID：15629121
> 
> 赞同：1
> 
> 时间：2013-03-26T03:53:54.377
> 
> 标签：spring, testing

我有一个测试用例，它依赖于“ticketDao”，如下所示：

```
import javax.annotation.Resource;
import org.springframework.beans.factory.annotation.Qualifier;

public class LfnSaleCancellationIntegrationTest extends BaseIntegrationTest {
  //@Resource(name = "baseTicketDao")
  private BaseTicketDao ticketDao;
  ....
  public void setTicketDao(@Qualifier("baseTicketDao") BaseTicketDao ticketDao) {
    this.ticketDao = ticketDao;
  }
} 
```

和 BaseIntegrationTest 扩展自 spring 测试框架的 AbstractJpaTests，Spring 是 v3.0.5

运行此测试用例时，我遇到了类似的异常：

```
Caused by: org.springframework.beans.factory.NoSuchBeanDefinitionException: 
No unique bean of type [com.mpos.lottery.te.gamespec.sale.dao.BaseTicketDao] 
is defined: expected single matching bean but found 2: 
[baseTicketDao, extraballTicketDao] 
```

我的项目进化了很久，其实我第一次遇到这个异常的时候，@Qualifier 就解决了。直到今天这个项目已经发生了很大的变化，但我真的不知道为什么@Qaulifier 和@Resource 不再工作了。

如果我删除'ticketDao'的依赖，测试用例将通过。我想知道弹簧配置是否有一些变化会导致这个异常？或者...我google了很多，但似乎没有其他人遇到过这样的问题，请给出您的意见，非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T10:54:37.063

您正在使用`AbstractJPATests`哪个是旧弹簧测试框架的一部分和`AbstractDependencyInjectionSpringContextTests`. 默认情况下，注入不是基于注释的，但它会发现设置器和字段并尝试按类型注入。建议切换到更新的基于注释的测试，有关详细信息，请参阅 spring 文档。

作为一种解决方法，尝试更改自动连线模式。在测试构造函数中将其称为`this.setAutowireMode(AutowireCapableBeanFactory.AUTOWIRE_BY_NAME)`，将您的字段重命名为 baseTicketDao 并删除 setter。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T07:34:21.260

我知道原因。在我的新项目中，spring配置文件中有context:component-scan的声明，默认会注册4个BeanPostProcessor：

*   AutowiredAnnotationBeanPostProcessor(@Autowired)
*   RequiredAnnotationBeanPostProcessor(@Require)
*   CommonAnnotationBeanPostProcessor（JSR-250 注释，@Resource，@PostConstruct 等，@WebServiceRef）
*   PersistenceAnnotationBeanPostProcessor（@PersistenceUnit 和 @PersistenceContext）

在我的旧项目中，仅注册了默认的 BeanPostProcessor(internalAutoProxyCreator)。我的理解是 AutowiredAnnotationBeanPostProcessor 将始终按类型连接。无论如何，如果删除 context:component-scan，我的测试用例现在可以通过了。

事实上，我现在已经将我所有的测试用例迁移到 Spring 测试上下文框架中，并且必须声明 context:component-scan，否则@Autowired、@Resource 等注释将被忽略，并且您将自动获得大量 NullPointerException注入依赖。

注意：`<context:annotation-config/>`也会注册这 4 个 BeanPostProcessor。

# javascript - 我如何在这个下拉菜单中添加第二列？

> ID：15629124
> 
> 赞同：1
> 
> 时间：2013-03-26T03:54:21.573
> 
> 标签：javascript, image, drop-down-menu

如何在此下拉菜单中添加第二列？

我使用图像而不是文本。我知道我的表格和图像中的表格大小不正确等，但目前只是一个测试。如果您能想到其他改进此菜单的方法，请告诉我。我对编码几乎一无所知，也没有做到这一点。

如果您看到任何 google 可能对此不满意的内容，也请告诉我。那里有一个隐藏的价值，我不确定 seo 是否可以，因为我不明白隐藏的价值是如何运作的

```
<style>
    table.menu
    {
        font-size:100%;
        position:absolute;
        visibility:hidden;
    }
</style>

<script type="text/javascript">
    function showmenu(elmnt)
    {
       document.getElementById(elmnt).style.visibility="visible";
    }
    function hidemenu(elmnt)
    {
       document.getElementById(elmnt).style.visibility="hidden";
    }
</script>

<table border="1" cellspacing="1" width="60" height="60">
  <tr>
    <td width="60" height="60">
        <table width="60" height="60">
          <tr bgcolor="#FFFFFF">
            <td onmouseover="showmenu('Graphic Design')" onmouseout="hidemenu('Graphic Design')">
               <img src="Thumbs/plus.png" width="60" height="60"><br />
               <table class="menu" id="Graphic Design" width="60">
                   <tr>
                      <td class="menu"><a href="www.techagesite.com/meboy.htm">
                        <img src="thumbs/angry-birds-iphone-4-wallpaper-mobile-05_small.jpg" width="100"   height="150">
                      </td>
                   </tr>
                   <tr>
                      <td class="menu"><a href="www.techagesite.com/meboy.htm">
                        <img src="thumbs/angry-birds-iphone-4-wallpaper-mobile-05_small.jpg" width="100" height="150">
                      </td>
                  </tr>
               </table>
            </td>
          </td>
       </tr>
      </table>
    </td>
  </tr>
</table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T14:52:38.087

将您的图像放在 DIV 中，因为每个图像都有一个无序列表，该列表具有默认禁用的类，然后在悬停时通过 javascript 激活。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T04:00:50.173

嗯，出于某种原因不会让我发表评论。注意：这不是一个答案。

表格应该只真正用于存储表格数据，您能否提供有关您尝试做什么的更多信息。导航或显示项目的下拉菜单是什么？差异将确定适合您的方案的控件。

# java - 协助 JFrame

> ID：15629129
> 
> 赞同：0
> 
> 时间：2013-03-26T03:55:29.567
> 
> 标签：java, swing, jframe, layout-manager, grid-layout

我需要一些处理 Jframes 的任务的帮助。作业说“对于第 27 到 31 题，请考虑以下课程：

```
import javax.swing.*;
import java.awt.*;
import java.awt.event.*;

public class A extends JFrame
(
   private Container c;
   private JButton b;
   private JTextField tf;
) 
```

现在回答问题： 29.在构造函数内部，这段代码实例化了文本字段 tf; 实例化后，文本字段应为空，但有 10 个字符的空间。

30.在构造函数内部，并假设 c 已被分配内容窗格。此代码将内容窗格的布局管理器设置为 2×1 网格布局管理器。

这就是我对问题 29 的看法：

```
tf = new JTextField(10); 
```

我不确定如何做第 30 题。任何提示都会很棒！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T03:57:12.210

创建 GridLayout 的实例并将其分配给容器。

```
final GridLayout layout = new GridLayout(2,1);
c.setLayout(layout); 
```

# c++ - 为什么我的朋友功能可以访问公共内容？

> ID：15629131
> 
> 赞同：-2
> 
> 时间：2013-03-26T03:55:45.873
> 
> 标签：c++, overloading, friend

下面是我的代码。我有 3 个朋友功能：

```
#include <iostream>
#ifndef   MATRIX_H
#define  MATRIX_H
class Matrix
    {
    friend Matrix operator++(Matrix&);
    friend Matrix operator--(Matrix&);
    friend ostream& operator<<(ostream&, Matrix&);
    private:
        int dim;
        int** mat;
    public:
        Matrix(int d);
        void set(int, int, int);
        int get(int, int);
        Matrix operator+(Matrix&);
        Matrix operator-(Matrix&);
        Matrix operator*(Matrix&);
        ~Matrix();
    };

Matrix operator++(Matrix &m)
    {
    for (int i = 0; i < m.dim; i++)
        {
        for (int j = 0; j < m.dim; j++)
            {
            int val = m.get(i,j);
            m.set(i,j,++val);
            }
        }
    return m;
    }

Matrix operator--(Matrix &m)
    {
    for (int i = 0; i < m.dim; i++)
        {
        for (int j = 0; j < m.dim; j++)
            {
            int val = m.get(i,j);
            m.set(i,j,--val);
            }
        }
    return m;
    }

ostream& operator<<(ostream &os, Matrix &m)
    {
    for (int i = 0; i < m.dim; i++)
        {
        for (int j = 0; j < m.dim; j++)
            {
            os << m.get(i,j) << ' ';
            }
        os<<endl;
        }
    return os;
    }

#endif 
```

他们中的任何一个都没有抱怨“m.get（i，j）”，我认为这是一个公共功能......它抱怨“m.dim”，说它在运算符<<中不可访问，但不是在前两个。为什么？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T04:00:26.517

您只是忘记在所有位置`std::`之前添加。`ostream`

```
friend std::ostream& operator<<(std::ostream&, Matrix&); 
```

# apache - matplotlib CGI 不起作用

> ID：15629133
> 
> 赞同：1
> 
> 时间：2013-03-26T03:56:01.827
> 
> 标签：apache, web, matplotlib, cgi

我想在基于 Windows Apache Server 的网站上发布 matplotlib 生成的图。

[Scipy 示例代码](http://www.scipy.org/Cookbook/Matplotlib/Using_MatPlotLib_in_a_CGI_script)（如下）仅显示链接已损坏的小图标。

本论坛相关问题的代码也只是显示图标。

我的代码如下。我猜代码是正确的，但我可能弄乱了 Apache Server 或 matplotlib 的一些设置。欢迎任何意见。

```
#!c:/python27/python

import os, sys
import cgi
import cgitb; cgitb.enable()

os.environ['HOME'] = r'C:\temp'

import matplotlib

matplotlib.use('Agg')

import matplotlib.pyplot as plt

plt.plot([1,2,1,4,2,6,4,8])

print "Content-Type: image/png\n"

plt.savefig( sys.stdout, format='png' ) 
```

# macos - 如何在 Mac 上测试 IE10？

> ID：15629142
> 
> 赞同：22
> 
> 时间：2013-03-26T03:57:26.597
> 
> 标签：macos, internet-explorer-10

如何在 Mac 上使用 IE10 测试网站？

目前，我正在使用从[Internet Explorer Application Compatibility VPC Image](http://www.microsoft.com/en-us/download/details.aspx?id=11575)安装的 Windows 7 在 VirtualBox 中测试 IE9 。我找不到适用于 Windows 8 的类似图像[。IETester](http://my-debugbar.com/wiki/IETester/HomePage)没有 IE10 eigher。有没有简单的方法在 Mac 上测试 IE10？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-03-26T04:54:35.353

该页面似乎不再是最新的。

但是，Microsoft 的开发者网站提供了[免费下载链接](https://developer.microsoft.com/en-us/microsoft-edge/tools/vms/)，用于使用虚拟机测试[Microsoft Edge](https://www.microsoft.com/en-us/windows/microsoft-edge)和 Internet Explorer（版本 8 到 11）。[您可以使用VirtualBox](https://www.virtualbox.org/)或其他虚拟化软件工具在本地管理它们。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-04-27T06:15:09.080

1.  打开 Safari 并从菜单栏中导航到**Safari > 首选项。**
2.  单击**高级**选项卡。
3.  检查**“在菜单栏中显示开发菜单”**设置，然后关闭“首选项”窗口。
4.  **开发** **菜单**现在应该显示在您的菜单栏中。
5.  转到**开发 > 用户代理**。
6.  在这里，您必须选择不同的浏览器选项，例如***Microsoft Edge、Internet Explorer 7、8、9、10***和***11***。您也可以选择***Firefox***和***Chrome***作为**用户代理**。

*来源*：[如何在需要 Internet Explorer（或 PC）的 Mac 上查看网站](https://www.imore.com/how-view-websites-your-mac-require-internet-explorer-or-pc)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-04-19T22:27:26.447

modern.IE 链接不再起作用，但微软提供了可用于[IE 版本 8-11 和 Edge](https://developer.microsoft.com/en-us/microsoft-edge/tools/vms/)的虚拟机下载。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-07-08T18:27:45.590

很晚才听说这个很棒的软件 Sauce labs ( [https://saucelabs.com/](https://saucelabs.com/) )，它允许你跨浏览器、跨操作系统测试你的代码。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2014-04-04T16:09:51.317

您所需要的只是 virtualbox（免费）和 Windows8 的开发副本（免费）。我现在才这样做。我跟着[这个教程](https://centroy.com/blog/testing-internet-explorer-mac-its-actually-quite-easy)。1 次尝试大约需要 30 分钟。[https://centroy.com/blog/testing-internet-explorer-mac-its-actually-quite-easy](https://centroy.com/blog/testing-internet-explorer-mac-its-actually-quite-easy)

# c - 删除数组中特定字符之前的所有字符

> ID：15629146
> 
> 赞同：0
> 
> 时间：2013-03-26T03:57:39.897
> 
> 标签：c, arrays

假设我有以下代码：

```
char url[63] = {'\0'};
scanf("%s", url); 
```

并要求用户提交一个网址。我需要删除通常位于 url 开头的字符，例如 http://、ftp:// 等...

我可以使用 for 循环检查字符数组中是否存在“://”，如下所示：

```
 int i;
 for (i=0;i<strlen(url);i++) {
     if (url[i] == ':' && url[i+1] == '/' && url[i+2] == "/") {
        // Super cool code here... 
     }
 } 
```

但是说我想删除 :// 以及它之前的所有内容？我将如何做到这一点？这样如果用户输入：

> [http://www.google.com](http://www.google.com)

输出将是：

> www.google.com

如果使用 ftp:// 也会得到类似的结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T04:01:59.150

所有你需要的是：

```
int i;
 for (i=0;i<strlen(url) - 2;i++) {
     if (url[i] == ':' && url[i+1] == '/' && url[i+2] == '/') {
        // Super cool code here... 
        return &url[i+3];  
     }
 } 
```

要创建副本：

```
char* getInteresting(char* url)
{
    int i = 0;
    for (i=0;i<strlen(url) - 2;i++) {
        if (url[i] == ':' && url[i+1] == '/' && url[i+2] == '/') {
            // Super cool code here... 
            int len = strlen(url) - (i+2);
            char* copy = (char*)malloc(len + 1);
            strcpy(copy, url + i + 3);
            return copy;  
        }
    }
} 
```

另外：更多检查错误案例！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T04:02:33.717

通常，在 C 语言中执行此类操作的最简单方法是根本不实际更改原始数组，而是创建另一个`char *`指向您实际关心的字符串第一部分的指针。所以....

```
 int i;
 char *interesting_stuff;
 for (i=0;i<strlen(url);i++) {
     if (url[i] == ':' && url[i+1] == '/' && url[i+2] == "/") {
        interesting_stuff = url + i + 3;
     }
 } 
```

然后继续做事并独自`interesting_stuff`离开。`url`（请注意，它是指向同一个数组的指针，所以如果你覆盖`url`，你也会丢失`interesting_stuff`。）

顺便说一句，那个`for`循环的界限会给你带来麻烦。您可能会在字符串末尾看到两个字符，而我的修改使这个问题变得更糟。您需要首先检查字符串的长度，并确保您没有越过字符串中`://`可以找到一些有用数据的点。换句话说，您希望将循环限制为`strlen(url) - 4`除非`url`小于 4 个字符，否则要小心。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T04:09:54.670

```
const char* ssc = strstr(url, "//:");
if (ssc)
{
   const char* withoutProtocol = ssc + 3;
   // do something with withoutProtocol
} 
```

# javascript - 如何在 jQuery mobile 中处理字符串本地化？

> ID：15629150
> 
> 赞同：1
> 
> 时间：2013-03-26T03:57:51.753
> 
> 标签：javascript, jquery, html, jquery-mobile, localization

我正在使用 phonegap 和 jQuery mobile 制作一个 android 应用程序。该应用程序还可以选择以其他语言显示文本，如泰米尔语、卡纳达语和泰卢固语。我想更改用户单击这些选项以更改语言时显示的所有文本. 最好的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T04:20:27.553

我会看看[i18next](http://jamuhl.github.com/i18next/)，一个完全在浏览器中运行的 JS 库，其本地化存储在 JSON 中。它适用于 jQuery，并具有其他几个不错的功能。似乎它可以满足您的需求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T11:43:26.290

我正在运行一个支持大约 5 种欧洲语言的应用程序。我手动创建了一个格式为`JSON`. 我编写了自定义函数来在一个单独的文件中替换 UI 元素的标签，该文件在页面加载时触发。

它对我来说很好用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-23T20:13:20.873

[在 GitHub链接](https://nirus.github.com/HTMLed)上查看用于 jquery 移动本地化的 HTMLed.js 框架

# php - PHP 和 MYSQL，试图将数据发送到数据库

> ID：15629151
> 
> 赞同：0
> 
> 时间：2013-03-26T03:57:58.333
> 
> 标签：php, mysql, database

我目前正在尝试将数据从 HTML 表单 (Proform.html) 发送到 MYSQL 数据库。我不知道如何解决这个不断发生的问题，因为我是 php 新手，我不断收到的错误消息是。

> “致命错误：第 22 行 C:\xampp\htdocs\php\Proform.php 中的非对象调用成员函数 query()”

这可能是可能的，因为我使用了几个不同的参考来创建这个代码页面，我混合了两个不同的 php 版本。尽管会得到帮助，但无论如何代码如下。

```
 <?php

$dbname='*****';
$dbhost='localhost';
$dbpass='******';
$dbuser='******';

$dbhandle = mysql_connect($dbhost, $dbuser, $dbpass)
  or die("Unable to connect to MySQL");
echo "Connected to MySQL<br>";

//select a database to work with
$selected = mysql_select_db("ecig",$dbhandle)
  or die("Could not select examples");

$q = $dbhandle->query("INSERT INTO Persons (First_Name, Last_Name)

VALUES ('$_POST[First_Name]', yes)");

if (array_key_exists ('check_submit', $_POST )) 

echo "Your Name is : {$_POST['First_Name']}<br />";
echo "Your Second Name is : {$_POST['Second_Name']}<br />";
echo "Your Email Address is : {$_POST['Email_Address']}<br />";
echo "Your Password Is : {$_POST['Password']}<br />";

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T04:08:11.883

您的查询有问题

为什么要使用数据库连接字符串调用查询。

你必须这样称呼它：

```
$con=mysql_connect($dbhost,$dbuser,$dbpass,$dbname);
$res=mysql_query("INSERT INTO Persons (First_Name, Last_Name) VALUES('$_POST[First_Name]', yes)");
mysql_close(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T04:07:08.937

`mysql_connect`不返回任何对象 .... 所以它没有任何可以使用`->`operator 访问的函数或属性。它返回一个连接标识符

代替

```
$dbhandle->query("INSERT INTO Persons (First_Name, Last_Name)
VALUES ('$_POST[First_Name]', yes)");` 
```

和

```
mysql_query("INSERT INTO Persons (First_Name, Last_Name) 
VALUES ('$_POST[First_Name]', yes)") 
```

我建议您开始学习 mysqli 或 PDO，因为 mysql 功能已延迟且不再维护

# c - HPL（高性能 Linpack）代码中的 PANEL 结构

> ID：15629152
> 
> 赞同：3
> 
> 时间：2013-03-26T03:58:04.870
> 
> 标签：c, hpc, scientific-computing

最近在钻研HPL代码，试图了解HPL的底层实现机制。( [http://www.netlib.org/benchmark/hpl/](http://www.netlib.org/benchmark/hpl/) )

现在，我对 HPL_T_panel 结构中的一些参数有些困惑。（包括/hpl_panel.h）。

```
A;                  /* ptr to trailing part of A */
* WORK;                              /* work space */
* L2;                                /* ptr to L */
* L1;                /* ptr to jb x jb upper block of A */ 
lda;                 /* local leading dim of array A */ 
ldl2;                /* local leading dim of array L2 */ 
```

几个问题：

1.  “lda”和“ldl2”是什么意思？L2的前导维度和行数有什么区别？

2.  A、L1、L2的值是多少？换句话说，在面板分解的每次迭代之后，L、U 和子矩阵的确切大小是多少？我试图在迭代期间跟踪这些值，但无法分辨出模式。

例如，假设 HPL 有以下参数：

```
N   1024  (matrix size)
NB 128    (block size)
PxQ 2x2   (process grid) 
```

对于使用 (src/pgesv/HPL_pdgesv0.c) 的“循环 A 的列”，每个进程的每次迭代的 A、L1、L2 的值是多少？你能在这里给我一些统计分析吗？比如索引和剩余矩阵大小。

如果有人（熟悉 HPL 源代码）给我一些建议，我将不胜感激。

# ios - iOS - 在不解析的情况下构建电子邮件 URL

> ID：15629157
> 
> 赞同：1
> 
> 时间：2013-03-26T03:58:46.177
> 
> 标签：ios, nsurl

我想使用某个类（NSURL 或类似的）构建一个电子邮件 URL，**但**我不希望解析字符串的开销。我希望能够指定方案（`mailto`在这种情况下）和地址（`someone@somewhere.com`在这种情况下。）

我试过这段代码：

```
NSString *address = @"someone@somewhere.com";
NSString *scheme = @"mailto";

NSURL *url = [[NSURL alloc] initWithScheme:scheme host:address path:@"/"];
NSLog(@"test2: %@", [url absoluteString]); 
```

但它输出：

```
mailto://someone@somewhere.com/ 
```

这甚至不是有效的电子邮件 URL。

我有哪些选择？

ps 请不要建议使用 NSDataDetector 因为它比通常的字符串解析更昂贵。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T13:18:19.773

假设您确实只有电子邮件地址而没有其他用具，解决方案很简单：

```
- (NSURL *)mailtoURLWithEmailAddress:(NSString *)address;
{
  address = [address stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding];
  NSURL *result = [NSURL URLWithString:[@"mailto:" stringByAppendingString:address]];
  return result;
} 
```

如果有人可能指定 ASCII 字符之外的地址或包含保留的 URL 字符之一，则添加百分比转义很重要。

如需更强大的解决方案，请参阅`KSMailtoURLs`我的[KSFileUtilities](https://github.com/karelia/KSFileUtilities)存储库。它补充说：

*   处理包含收件人姓名和地址的字符串
*   电子邮件主题行的编码等。

# c++ - 从堆栈中删除数字？

> ID：15629161
> 
> 赞同：-1
> 
> 时间：2013-03-26T03:59:54.607
> 
> 标签：c++, class, linked-list, stack

```
class stack_class
{
private:

    struct stack_struct *head;

public:
    stack_class();
    ~stack_class();
    void pushNumber(int number);
    void popNumber();
    void findNumber();
    void clearStack();
    void sizeFinder();
    void printStack();

};

void stack_class::popNumber()
{
    stack_struct *pointerPop=NULL,*pointerPop2=NULL;
    int popCounter=0,i=0;
    pointerPop2=tailPointer;
    if(head==NULL)
    {
        cout<<"\nNo Member to Delete.\n";
    }
    else
    {
        while(pointerPop2)
        {
            popCounter++;
            //cout<<pointerFunc3->number<<endl;
            pointerPop2=pointerPop2->next_number;
        }
        pointerPop=tailPointer;
        while(i<(popCounter-2))
        {
            pointerPop=pointerPop->next_number;
            i++;
        }
        pointerPop->next_number=NULL;
        delete head;
        head=pointerPop;
    }

}

void stack_class::printStack()
{
    pointerFunc3=tailPointer;
    if(tailPointer==NULL)
    {
        cout<<"\nNo Members in List.\n";
    }
    else
    {
        cout<<"\n\nList Is:\n";
        while(pointerFunc3)
        {
            cout<<pointerFunc3->number<<endl;
            pointerFunc3=pointerFunc3->next_number;
        }
    }

} 
```

构造函数到类

```
stack_class::stack_class()
{
    head=NULL;
} 
```

这是我的代码，问题是，当我弹出最后一个数字并尝试打印列表时，它进入无限循环并打印垃圾。当我在列表中的所有内容都被删除后按下删除选项时，程序会冻结。有什么建议为什么会这样？？我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T05:08:27.567

堆栈旨在遵循后进先出策略。您可以删除/弹出您推入堆栈的最后一个数字。为此，您的流行音乐必须是这样的：

```
int stack_class::popNumber(){
stack_struct *pointerPop=NULL; //,*pointerPop2=NULL; //not needed
int number; //number poped
//int popCounter=0,i=0;
//pointerPop2=tailPointer;
if(head==NULL)
{
    std::cout<<"\nNo Member to POP.\n";
}
else
{
    pointerPop = head;
    number = head->number;
    delete head;
    head = pointerPop;
    return number;//control ended

    //[[this part is not neccessary
    while(pointerPop2)
    {
        popCounter++;
        //std::cout<<pointerFunc3->number<<std::endl;
        pointerPop2=pointerPop2->next_number;
    }
    pointerPop=tailPointer;
    while(i<(popCounter-2))
    {
        pointerPop=pointerPop->next_number;
        i++;
    }
    pointerPop->next_number=NULL;
    delete head;
    head=pointerPop;
    //]]
}
}

void stack_class::printStack(){
stack_struct *pointer = head;
if(head == NULL)
{
    std::cout<<"\nNo Members in List.\n";
}
else
{
    std::cout<<"\n\nList Is:\n";
    while(pointer)
    {
        std::cout<<pointer->number<<std::endl;
        pointer=pointer->next_number;
    }
}} 
```

我发现的渔获物：

1.  您从未在类中声明tailPointer，但经常使用。
2.  popNumber 函数不返回任何内容。
3.  请发布推送功能也可能是错误在那里

# linux - Bash 脚本 - 找到目录，并在其中做一些事情。或者找到一个文件，然后用它做点什么

> ID：15629162
> 
> 赞同：1
> 
> 时间：2013-03-26T04:00:13.567
> 
> 标签：linux, bash, ubuntu, command-line, terminal

这是我到目前为止所拥有的：

```
for f in 'svn ls repository_dir'; 
do 
svn checkout repository_dir/$f/trunk/dir1/dir2/dir3/dir4/needed_dir 
done 
```

这对于将 required_dir 放在正确位置的项目（其中有 100 个）非常有用。但有些项目 ($f) 的目录结构略有不同。所以“needed_dir”可能在不同的位置。

**在 do 循环**中，我怎样才能告诉我的 bash 脚本：

“找到“needed_dir”。如果找到，检查一下。”

或者

“找到“needed_file.txt”。如果找到，请查看。”

感谢您的任何帮助

编辑：对不起，这可能更像是一个 superuser.com 问题。我其实是想把它写在那里。但是，也许有人也可以在这里帮助我！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T05:28:19.610

你可以使用linux的[find](http://linux.about.com/od/commands/l/blcmdl1_find.htm)命令。

`find`将递归搜索您作为参数提供的目录名称。
假设你有一个这样的目录结构：

```
parent
-dir1
--file1
--file2
--file3
-dir2
--file4
--file5
--file6
--dir3 
```

现在执行以下命令：

```
find parent -name dir* 
```

你会得到这样的输出：

```
parent/dir1
parent/dir2
parent/dir2/dir3 
```

例如，请参见下面的代码：-

```
#!/bin/sh
parentdir=$1
tofind=$2
for i in `find $parentdir -name $tofind*`;  # * is added for regular expression..do whatever you need here
do
 #check if it is directory
 if [ -d $i ]; then
    # do what you want to do 
    echo $i
 else
    # do something else
    echo $i
 fi
done 
```

这需要输入->

1.  你的 svn 父目录
2.  要搜索的文件/目录的名称

希望这可以帮助。如果您需要进一步的输入，请告诉我。
你也可以参考这个[问题](https://stackoverflow.com/questions/245698/list-files-recursively-in-linux-with-path-relative-to-the-current-directory)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T05:51:15.657

没有深入细节（因为我现在没有时间）这里是一个简短的例子，你可以使用它。

```
#!/bin/bash

sudo updatedb
if [ ! -f testfile1.txt ];
then
filelocation=$(locate awesomeo.txt)
head -10 $filelocation
fi 
```

它的作用是更新文件数据库，如果您要查找的文件不在当前目录中，则它会定位文件的目录并显示该文件的前十行。

但在您的情况下，您可能想要做`filelocation=$(locate forloopvariable)`或正在寻找什么。这当然而不是 if 语句将是 else 语句来满足您的需求。

如果您有任何其他问题，请随时提出。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T06:15:26.790

我猜这个片段应该可以工作：

```
for f in $(svn ls repository_dir); 
do 
  find repository_dir/$f -type d -name needed_dir | xargs -r svn checkout 
done 
```

# iphone - viewDidLoad 使用持久性

> ID：15629163
> 
> 赞同：0
> 
> 时间：2013-03-26T04:00:13.927
> 
> 标签：iphone, ios, objective-c

我的 Iphone 项目在 viewDidLoad 事件中有问题，应用程序崩溃

```
NSKeyedUnarchiver *unarchiver = [[NSKeyedUnarchiver alloc] initForReadingWithData:data]; 
```

我正在尝试存储来自文本归档的信息有人可以帮助我解决问题吗

```
- (void)viewDidLoad{
    NSString *filePath = [self dataFilePath];
    if ([[NSFileManager defaultManager] fileExistsAtPath:filePath]) {
        NSArray *array = [[NSArray alloc] initWithContentsOfFile:filePath];
        for (int i = 0; i < 2; i++) {
            UITextField *theField = self.lineFields[i];
            theField.text = array[i];
        }
        NSData *data = [[NSMutableData alloc]
                        initWithContentsOfFile:filePath];
        NSKeyedUnarchiver *unarchiver = [[NSKeyedUnarchiver alloc]
                                         initForReadingWithData:data];
        BIDThreeLines *threelines = [unarchiver decodeObjectForKey:kRootKey];
        [unarchiver finishDecoding];

        for (int i = 0; i < 2; i++) {
            UITextField *theField = self.lineFields[i];
            theField.text = threelines.lines[i];
        }
    }

    UIApplication *app = [UIApplication sharedApplication];
    [[NSNotificationCenter defaultCenter]
     addObserver:self
     selector:@selector(applicationWillResignActive:)
     name:UIApplicationWillResignActiveNotification
     object:app];
}
Error 
2013-03-25 23:29:45.592 MobilePaymentsApp[1182:c07] -[__NSCFArray objectForKey:]: unrecognized selector sent to instance 0x8d0e8d0
2013-03-25 23:29:45.593 MobilePaymentsApp[1182:c07] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[__NSCFArray objectForKey:]: unrecognized selector sent to instance 0x8d0e8d0'
*** First throw call stack:
(0x1c96012 0x10d3e7e 0x1d214bd 0x1c85bbc 0x1c8594e 0x1c0ae18 0xb030e8 0x339c 0xf91c7 0xf9232 0x483d5 0x4876f 0x48905 0x51917 0x2cc5 0x15157 0x15747 0x1694b 0x27cb5 0x28beb 0x1a698 0x1bf1df9 0x1bf1ad0 0x1c0bbf5 0x1c0b962 0x1c3cbb6 0x1c3bf44 0x1c3be1b 0x1617a 0x17ffc 0x29fd 0x2925)
libc++abi.dylib: terminate called throwing an exception
(lldb) 
```

[https://github.com/a-elnajjar/MobilePaymentsApp](https://github.com/a-elnajjar/MobilePaymentsApp)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T04:17:43.200

NSKeyedArchiver 返回您存储在其中的对象。例如。如果您存储了一个数组，那么它将返回一个数组。所以在取消归档对象时要小心。

在以下示例中，我从 NSKeyedUnarchiver 读取了一个数组。

```
NSData *data = [[NSMutableData alloc] initWithContentsOfFile:filePath];
NSArray *arr = [NSKeyedUnarchiver unarchiveObjectWithData:data]; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-26T04:10:01.683

> 查看崩溃日志的堆栈跟踪以查看此调用的确切位置。
> 
> 如果您发送 -row 的变量实际上没有被键入为 NSArray，则很可能您没有遵循该变量的内存管理规则。这些相同的症状通常是由它引起的。响应 -row 的东西可能曾经存在过，因为你没有 -retain 它而被释放，然后在那个地方分配了一个 NSArray 。
> 
> 运行“构建和分析”并重新查看内存管理指南，直到您在睡梦中了解它们。

来源：[[NSCFArray 行]：无法识别的选择器发送到实例 0x3953a20](https://stackoverflow.com/a/3106401/1756131)

# php - PHP查询不理解整数

> ID：15629167
> 
> 赞同：0
> 
> 时间：2013-03-26T04:00:35.333
> 
> 标签：php, sql, integer

这是我的代码：

```
 function display_name1($s){
        global $db;
        $query1 = 'SELECT Name From Drink where P_Key = $s';
        $r = $db->prepare($query1);
        $r->execute();
        $result = $r->fetchColumn();
        return $result;

        } 
```

`$s`包含从`P_Key`自动递增的列返回的结果。我希望能够提供查询`P_Key`，它将返回我想要的该行中的任何变量。出于某种原因，这不起作用。它什么也不返回。现在，如果我 return `$s`，那么它确实会显示应有的数字，因此问题不在于`$s`变量本身。如果我`$s`从查询中取出，并用数字替换它，那么它会返回饮料的名称，所以问题不在于数据库或查询。问题似乎`$s`是被错误地解释了。

我尝试在将其放入查询之前将其转换为整数，没有骰子。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T04:04:50.520

尝试使用双引号。单引号不能解释变量。`"SELECT Name From Drink where P_Key = $s"`

参考：[PHP 字符串解析](http://www.php.net/manual/en/language.types.string.php#language.types.string.parsing)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T04:12:37.650

像这样使用

```
"SELECT Name From Drink where P_Key = ".$s."" 
```

您可以使用`echo $query1`

# actionscript-3 - 使用闪光灯记录机器的输出音量

> ID：15629169
> 
> 赞同：0
> 
> 时间：2013-03-26T04:00:55.770
> 
> 标签：actionscript-3, flash, red5

我成功创建了一个应用程序，我可以在其中使用 Flash 录制麦克风声音，然后将该流保存到名为“Red5”的服务器。

但最近我遇到了一个奇怪的要求，即从机器捕获输出音量，然后将该流保存到 red5 服务器。就像我听一首歌或一个 Skype 电话或听任何其他声音一样。我只想捕捉这些声音。

我搜索这种情况只是为了抢占先机，但我还没有找到任何解决方案以便我可以继续进行。

这里的任何人都可以为此提供启动解决方案。这可以通过闪存完成吗？或任何其他方式？

任何帮助将不胜感激。请提供建议

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T04:22:30.370

当然有办法做到这一点，但是我认为使用 Flash 是不可能的（很可能是安全问题，不希望广告任意记录人们的对话）。

像 Audacity 这样的程序能够记录计算机的 StereoMix 输出，这基本上就是您要问的。您可能会构建一个包含 ANE 的 AIR 应用程序，该 ANE 将 Audacity 的功能打包，但需要大量的移植和......以及时间。

# javascript - onchange 下拉菜单向输入框中的 url 添加参数

> ID：15629171
> 
> 赞同：0
> 
> 时间：2013-03-26T04:01:06.240
> 
> 标签：javascript, html, javascript-events

我正在设计会员计划，其中每个用户都有自己的链接代码，也就是跟踪 url。我愿意根据下拉选择添加额外的参数，这将是不同的登陆页面。

例如原始网址

```
http://www.google.com/tracker/blah1 
```

如果用户从下面选择值，则 url 应该是

```
http://www.google.com/tracker/blah1/queryid/1 
```

我正在使用此代码在设置为只读的输入框中向最终用户显示 url。

```
<input size="100" type="text" value="<?=$url;?>" readonly> &nbsp;- &nbsp;<a  target="_blank" href="<?=$url;?>">Link</a></b> 
```

会有两个像这样的下拉菜单。

```
<select name="niche">
<option value="0" label="choose one">choose one</option>
<option value="/queryid/1" label="option 1">option 1</option>
<option value="/queryid/2" label="option 2">option 2</option>
<option value="/queryid/3" label="option 3">option 3</option>
<option value="/queryid/4" label="option 4">option 4</option>
<option value="/queryid/5" label="option 5">option 5</option>
<option value="/queryid/6" label="option 6">option 6</option>
</select> 
```

通过选择**选项 1**，它应该将**/queryid/1**添加到 url 的末尾。如果没有选择，则不会有任何更改。

```
<select name="landingpage">
<option value="0" label="choose one">choose one</option>
<option value="/cid/1" label="landing 1">landing 1</option>
<option value="/cid/2" label="landing 2">landing 2</option>
</select> 
```

通过选择**landing 1**会将**/cid/1**添加到url 的末尾。如果没有选择，则不会有任何更改。

那么我该怎么做呢？

谢谢你的时间。

更新：将下拉列表的值更新为当前使用 htaccess 重写规则。

**更新：** 我正在使用“Rishi Php”演示的指定在这里[http://jsfiddle.net/g6U4a/2/](http://jsfiddle.net/g6U4a/2/)

但默认情况下它不显示**SourceUrl** 它应该在默认情况下在框中显示源 url 但是当用户更改下拉值时它会显示它。我怎样才能做到这一点？

**更新：** “Rishi Php”修复了加载默认 url 的问题。这是代码。[http://jsfiddle.net/g6U4a/3/](http://jsfiddle.net/g6U4a/3/) 感谢你们所有人。

不要忘记在标题中添加这个

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script> 
```

更换

```
var SourceUrl = "http://www.google.com/?tracker=blah1"; 
```

和

```
var SourceUrl = "<?=$url;?>"; 
```

所以每个会员都会有唯一的链接

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T07:17:04.423

试试这个......它会有所帮助。**[**更新的工作演示*](http://jsfiddle.net/g6U4a/3/)***

```
var SourceUrl = "http://www.google.com/?tracker=blah1";
var queryUrl = "";
var landingUrl = "";
$(function() {
  $('#querySelct').on('change', function () {
      if($(this).val() == 0) {
         queryUrl = "";
      } else {
          queryUrl = $(this).val();
      }
      MakeUrl();
      return false;
  });

    $('#landingSelect').on('change', function () {
      if($(this).val() == 0) {
         landingUrl = "";
      } else {
         landingUrl = $(this).val();
      }
     MakeUrl();
     return false;
  });
});

function MakeUrl() {
    var finalUrl = SourceUrl + queryUrl + landingUrl;
   $('#urlBox').val(finalUrl);
  $('#MyLink').attr('href', finalUrl);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T05:50:08.803

您可以使用 getElementById 从`<select>`字段中获取值并将它们设置到您的文本字段中。

**演示：http:** [//jsfiddle.net/g6U4a/1/](http://jsfiddle.net/g6U4a/1/)

**HTML**

```
<select id="queryid">
<option value="0" label="choose one">choose one</option>
<option value="&queryid=1" label="option 1">option 1</option>
<option value="&queryid=2" label="option 2">option 2</option>
<option value="&queryid=3" label="option 3">option 3</option>
<option value="&queryid=4" label="option 4">option 4</option>
<option value="&queryid=5" label="option 5">option 5</option>
<option value="&queryid=6" label="option 6">option 6</option>  
</select>

<br>

<select id="cid" name="landingpage">
<option value="0" label="choose one">choose one</option>
<option value="&cid=1" label="landing 1">landing 1</option>
<option value="&cid=2" label="landing 2">landing 2</option>
</select>

<input type="button" id="change" value="Create URL" onclick="createUrl()" /><br>

<input type="text" id="result" placeholder="placeholder" readonly><br> 
```

**JAVASCRIPT**

```
function createUrl() {
    var google = "http://www.google.com/";
    document.getElementById("result").value = google + document.getElementById("queryid").value +  document.getElementById("cid").value;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T04:10:26.387

你可以这样做：

```
<select id="yourSelect" name="landingpage">
<option value="" label="choose one">choose one</option>
<option value="www.yourdomain.com&cid=1" label="landing 1">landing 1</option>
<option value="www.yourdomain.com&cid=2" label="landing 2">landing 2</option>
</select>

$(function(){
  $('#yourSelect').on('change', function () {
      var url = $(this).val();
      if (url) {
          window.location = url;
      }
      return false;
  });
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-26T04:42:10.117

试试看。

```
$(function(){
        $('select').change(function() {

            var arr = new Array();
            $('select option:selected').each(function(){
                var value = $(this).val();
                if(value != "0"){
                    arr.push($(this).val());
                }
            });
            // selected value are now concatenating here.
            var str = arr.join('');
            alert(str);
        });

    }); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-26T04:23:23.147

为选择框提供选择器，例如

```
var urlToAppend1=$('#nicheId :selected').val();

originalurl='http://www.google.com/?tracker=blah1';
var url='';
url+=originalurl;
url+=urlToAppend; 
```

# php - do_shortcode() 在管理插件中不起作用

> ID：15629173
> 
> 赞同：2
> 
> 时间：2013-03-26T04:01:20.467
> 
> 标签：php, wordpress, shortcode

我创建了一个管理插件，我想在插件文件中使用短代码。我这样做了，`do_shortcode('[code id=5]');`这显然是在职位和其他应有的职位上工作。但是，不适用于插件。我的代码：

```
function applicant_new_form(){
   echo "<h3>Add new application</h3>";
   do_shortcode('[php snippet=3]');   
} 
```

任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T04:13:16.240

您没有回显代码，请检查。那应该是：

```
function applicant_new_form(){
    echo "<h3>Add new application</h3>";
    echo do_shortcode('[php snippet=3]');
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T04:05:55.490

插件是某种小部件吗？如果是这样，请尝试添加：

```
add_filter( 'widget_text', 'shortcode_unautop');
add_filter( 'widget_text', 'do_shortcode'); 
```

到主题根目录中的 functions.php 文件。

# asp.net-mvc - 未安装 mvc 4 的 Web 服务器上的 mvc 4 应用程序

> ID：15629178
> 
> 赞同：2
> 
> 时间：2013-03-26T04:01:52.303
> 
> 标签：asp.net-mvc, asp.net-mvc-4, master-pages

所以我刚刚将我的网站从 MVC 3 升级到了 MVC 4 站点。我的 Web 主机没有安装 MVC 4，但被告知我可以上传 dll，一切都会好起来的。我被定向到这个链接，显然可以在安装时应用

[http://weblogs.asp.net/scottgu/archive/2011/01/18/running-an-asp-net-mvc-3-app-on-a-web-server-that-doesn-t-have- asp-net-mvc-3-installed.aspx](http://weblogs.asp.net/scottgu/archive/2011/01/18/running-an-asp-net-mvc-3-app-on-a-web-server-that-doesn-t-have-asp-net-mvc-3-installed.aspx)

我做了以下链接上的指示，但后来我的 ViewExtensions 出现错误，显然（经过 2 小时的研究）与我的升级有关（例如[http://s77.codeinspot.com/q/2109234](http://s77.codeinspot.com/q/2109234) ) . 无论如何，这是抛出的错误。

> filterContext.Exception.Message :\hostingpath....... 错误 CS0121：以下方法或属性之间的调用不明确：'Torneyo.Infrastructure.Helpers.ViewExtensions.AccountProfile(System. Web.Mvc.ViewMasterPage)'和'Torneyo.Infrastructure.Helpers.ViewExtensions.AccountProfile(System.Web.Mvc.ViewMasterPage)'

这没有意义，因为它是相同的，它只是来自我的 viewextension 类。以下是在我的母版页上调用的部分。

```
//-----------for master pages
        static public User AccountProfile(this System.Web.Mvc.ViewMasterPage view)
        {
            return (Profile)view.ViewBag.AccountProfile;
        } 
```

因此，在虚拟主机升级之前，这些都可以正常工作。它在升级之前和之后在我的本地上完美运行。我不确定我还需要做什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T04:37:26.630

请确保您的 web.config 中有正确的绑定重定向。应用程序的某些部分可能正在引用 MVC3，而其他部分正在引用 MVC4。从 MVC3 到 MVC4 的绑定重定向会将所有内容“统一”到 MVC4。

在此处查看“升级”指南：[http ://www.asp.net/whitepapers/mvc4-release-notes#_Toc303253806](http://www.asp.net/whitepapers/mvc4-release-notes#_Toc303253806)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T16:00:39.023

终于修好了。所以我尝试清除 DLL 并重新安装它，但它仍然无法正常工作。我必须做的是删除所有内容（wwwroot 文件夹中的文件）。然后再次发布。之后一切正常。

# java - 如何在xml中写入超过30 MB的数据？

> ID：15629180
> 
> 赞同：0
> 
> 时间：2013-03-26T04:02:02.573
> 
> 标签：java, android

首先很抱歉，如果我重复这个问题，但我没有找到任何相关的解决方案来解决我的问题。

我很难找到解决以下问题的方法。

1）我面临一个场景，我必须在 xml 中写入超过 30 MB - 400 MB 的数据。当我使用**“字符串”**对象将数据附加到 xml 时，出现**“OutOfMemory”**异常。

在花了更多时间进行研发之后，我开始知道使用“Stream”可以解决这个问题。但我不确定这一点。

2) 一旦我构建了 xml，我必须使用 Android 设备将此数据发送到 DMZ 服务器。据我所知，在这种情况下使用 Http 发送大量数据很困难。在这种情况下，

```
 a) Using FTP will be helpful in this scenario?
     b) Splitting the data into chunks of data and sending will be helpful? 
```

请让我知道您的建议。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T04:08:48.713

我会考虑在 ftping 之前压缩数据。你可以使用 ZipOutputStream 。

对于内存不足异常，您可以考虑增加堆大小。检查这个：[增加Java中的堆大小](https://stackoverflow.com/questions/1565388/increase-heap-size-in-java)

您可以发布一些您尝试过的堆大小值、代码和一些异常跟踪吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T04:11:13.300

使用 StAX 或 SAX。它们可以创建任何大小的 XML，因为它们将生成的 XML 部分即时写入 OutputStream。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T04:53:54.387

你应该做的是

首先，使用 XML 解析器以 XML 格式读取和写入数据。它可以是 SAX 或 DOM。如果数据量很大，请尝试使用 CSV 格式，因为您不必存储 XML 标签，因此占用的空间更少。

其次，在创建输出文件时，请确保这些是小文件。

第三，通过网络发送时，请确保您已压缩所有内容。

看在上帝的份上，不要为这个设计吃掉用户的移动数据上限。警告用户此文件大小并建议他使用 WiFi 网络。

# ruby-on-rails - Cancan：json的能力类

> ID：15629181
> 
> 赞同：3
> 
> 时间：2013-03-26T04:02:03.590
> 
> 标签：ruby-on-rails, ruby-on-rails-3, cancan

我有带有 Cancan 1.6.9 的 Rails 3 应用程序进行授权。我想将能力类转换为 JSON。这是我的能力课程。

```
# encoding: utf-8

module Ability

  def self.for(guest)
    guest ||= User.new # guest user (not logged in)

    if guest.admin?
      AdminAbility.new(guest)
    elsif guest.assurer?
      AssurerAbility.new(guest)
    end
  end

  ##
  # Assurer
  class AssurerAbility
    include CanCan::Ability

    def initialize(user)
      cannot :manage, User
      can :read, ExchangeRate
    end
  end

  ##
  # Admin
  class AdminAbility
    include CanCan::Ability

    def initialize(user)
      can :manage, User
      can :manage, ExchangeRate
    end

  end

end 
```

当我运行时`Ability.for(User.last).to_json`，出现以下错误：

```
ActiveSupport::JSON::Encoding::CircularReferenceError: object references itself
    from /home/user/.rvm/gems/ruby-1.9.3-p392@rails-3.2.13/gems/activesupport-3.2.13/lib/active_support/json/encoding.rb:75:in `check_for_circular_references'
    from /home/user/.rvm/gems/ruby-1.9.3-p392@rails-3.2.13/gems/activesupport-3.2.13/lib/active_support/json/encoding.rb:46:in `encode'
    from /home/user/.rvm/gems/ruby-1.9.3-p392@rails-3.2.13/gems/activesupport-3.2.13/lib/active_support/json/encoding.rb:246:in `block in encode_json'
    from /home/user/.rvm/gems/ruby-1.9.3-p392@rails-3.2.13/gems/activesupport-3.2.13/lib/active_support/json/encoding.rb:246:in `each'
    from /home/user/.rvm/gems/ruby-1.9.3-p392@rails-3.2.13/gems/activesupport-3.2.13/lib/active_support/json/encoding.rb:246:in `map'
    from /home/user/.rvm/gems/ruby-1.9.3-p392@rails-3.2.13/gems/activesupport-3.2.13/lib/active_support/json/encoding.rb:246:in `encode_json'
    from /home/user/.rvm/gems/ruby-1.9.3-p392@rails-3.2.13/gems/activesupport-3.2.13/lib/active_support/json/encoding.rb:48:in `block in encode'
    from /home/user/.rvm/gems/ruby-1.9.3-p392@rails-3.2.13/gems/activesupport-3.2.13/lib/active_support/json/encoding.rb:77:in `check_for_circular_references'
    from /home/user/.rvm/gems/ruby-1.9.3-p392@rails-3.2.13/gems/activesupport-3.2.13/lib/active_support/json/encoding.rb:46:in `encode'
    from /home/user/.rvm/gems/ruby-1.9.3-p392@rails-3.2.13/gems/activesupport-3.2.13/lib/active_support/json/encoding.rb:246:in `block in encode_json'
    from /home/user/.rvm/gems/ruby-1.9.3-p392@rails-3.2.13/gems/activesupport-3.2.13/lib/active_support/json/encoding.rb:246:in `each'
    from /home/user/.rvm/gems/ruby-1.9.3-p392@rails-3.2.13/gems/activesupport-3.2.13/lib/active_support/json/encoding.rb:246:in `map'
    from /home/user/.rvm/gems/ruby-1.9.3-p392@rails-3.2.13/gems/activesupport-3.2.13/lib/active_support/json/encoding.rb:246:in `encode_json'
    from /home/user/.rvm/gems/ruby-1.9.3-p392@rails-3.2.13/gems/activesupport-3.2.13/lib/active_support/json/encoding.rb:48:in `block in encode'
    from /home/user/.rvm/gems/ruby-1.9.3-p392@rails-3.2.13/gems/activesupport-3.2.13/lib/active_support/json/encoding.rb:77:in `check_for_circular_references'
    from /home/user/.rvm/gems/ruby-1.9.3-p392@rails-3.2.13/gems/activesupport-3.2.13/lib/active_support/json/encoding.rb:46:in `encode'
... 19 levels...
    from /home/user/.rvm/gems/ruby-1.9.3-p392@rails-3.2.13/gems/activesupport-3.2.13/lib/active_support/json/encoding.rb:46:in `encode'
    from /home/user/.rvm/gems/ruby-1.9.3-p392@rails-3.2.13/gems/activesupport-3.2.13/lib/active_support/json/encoding.rb:246:in `block in encode_json'
    from /home/user/.rvm/gems/ruby-1.9.3-p392@rails-3.2.13/gems/activesupport-3.2.13/lib/active_support/json/encoding.rb:246:in `each'
    from /home/user/.rvm/gems/ruby-1.9.3-p392@rails-3.2.13/gems/activesupport-3.2.13/lib/active_support/json/encoding.rb:246:in `map'
    from /home/user/.rvm/gems/ruby-1.9.3-p392@rails-3.2.13/gems/activesupport-3.2.13/lib/active_support/json/encoding.rb:246:in `encode_json'
    from /home/user/.rvm/gems/ruby-1.9.3-p392@rails-3.2.13/gems/activesupport-3.2.13/lib/active_support/json/encoding.rb:48:in `block in encode'
    from /home/user/.rvm/gems/ruby-1.9.3-p392@rails-3.2.13/gems/activesupport-3.2.13/lib/active_support/json/encoding.rb:77:in `check_for_circular_references'
    from /home/user/.rvm/gems/ruby-1.9.3-p392@rails-3.2.13/gems/activesupport-3.2.13/lib/active_support/json/encoding.rb:46:in `encode'
    from /home/user/.rvm/gems/ruby-1.9.3-p392@rails-3.2.13/gems/activesupport-3.2.13/lib/active_support/json/encoding.rb:31:in `encode'
    from /home/user/.rvm/gems/ruby-1.9.3-p392@rails-3.2.13/gems/activesupport-3.2.13/lib/active_support/core_ext/object/to_json.rb:16:in `to_json'
    enter code here 
```

当我跑步时，`Ability.for(User.last).as_json`我得到了结果。但这不是有效的 JSON 结果。

```
{"rules"=>[#<CanCan::Rule:0xaf5e81c @match_all=false, @base_behavior=false, @actions=[:manage], @subjects=[User(id: integer, password_digest: string, created_at: datetime, updated_at: datetime, uic: string, role: string, name: string, register_no: string)], @conditions={}, @block=nil>, #<CanCan::Rule:0xaf5e72c @match_all=false, @base_behavior=true, @actions=[:read], @subjects=[ExchangeRate(id: integer, data: float, date: date, created_at: datetime, updated_at: datetime)], @conditions={}, @block=nil>]} 
```

任何想法？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-28T17:15:14.477

**TL;DR：**在模型中实现`self.as_json`方法并明确指定要转换为 JSON 的字段。在此之后，您将能够正常运行`Ability.for(User.last).to_json`。

* * *

完整解释：让我们看一下`Ability`从[源代码](https://github.com/ryanb/cancan/blob/master/lib/cancan/ability.rb)中看到的结构：

*   `Ability`实例有一个名为 的字段`@rules`。
*   每个规则都有一个名为的字段`@subject`，它是一个扁平的 ActiveRecord 类（`User`等`ExchangeRate`）。是的，*类*，而不是类实例。
*   `@subject`转换为 JSON 并`CircularReferenceError`出现。为什么？

问题是，将`User`or`ExchangeRate`类转换为 JSON 并不是一个好主意，因为它们的结构可能非常复杂。例如，如果你尝试运行`User.as_json`，结果可能是这样[的](http://pastebin.com/RLpVfb6y)。可能其中一个`User`'s 字段引用返回`User`，你得到`CircularReferenceError`。为避免这种情况，请指定哪些字段应包含在 JSON 表示中`User`（同样适用于`ExchangeRate`）：

```
class User < ActiveRecord::Base
  #...
  def self.as_json(options = {})
    { "class" => "User" }
  end
end 
```

# jquery - Firefox中的SVG偏移问题

> ID：15629183
> 
> 赞同：2
> 
> 时间：2013-03-26T04:02:10.500
> 
> 标签：jquery, svg, jquery-svg

在 Firefox 12.0 或更高版本中，`.offset()`在`.position()`SVG（根）元素上调用时返回意外值。

结果值是“左”组件的最左边子元素的 x 坐标和“顶部”组件的最顶部子元素的 y 坐标。

```
$(this.SvgObject).offset().left / $(this.SvgObject).offset().top 
```

在 Firefox 中返回非预期值。

但是当我得到父偏移量时，它给出了正确的值（即）：

```
$(this.SvgObject).parent().offset().left 
```

但这不是正确的方法。

请参阅[此错误报告](http://bugs.jquery.com/ticket/9797)。他们回答说：

> “不幸的是，我们不打算很快修复与 SVG 相关的错误：”

如何在 SVG 中解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T12:26:07.197

我遇到了同样的问题，我只是在开始绘制拉斐尔图之前创建了一个假边界，从而解决了这个问题。

```
// adding following rect just to set the boundary of svg element (firefox)
paper.rect(0,0,paperWidth,paperHeight,0).attr({stroke: "#fff"}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-18T16:17:10.677

您可以使用：

```
var svg = $(this.SvgObject),
    po = svg.offsetParent().offset(),

    left = po.left + parseInt(svg.css("left"), 10),
    top = po.top + parseInt(svg.css("top"), 10); 
```

# jquery-ui - 带有异步选择器的 JQUERY-UI 可拖动

> ID：15629185
> 
> 赞同：0
> 
> 时间：2013-03-26T04:02:23.777
> 
> 标签：jquery-ui, draggable

是否可以将可拖动的 JQUERY-UI 与使用 jquery 的 .load 函数异步导入的元素一起使用？我想我需要使用 .on 或 .bind，但无法找出可行的方法......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T04:14:48.397

我只会使用 .load 回调来分配可拖动属性：

```
$("#containerselector").load('path', function () {
    $(this).find( "elementsthatshouldbedraggableselector" ).draggable();
}); 
```

# java - Java：自定义将 1 个月添加到当前日期

> ID：15629189
> 
> 赞同：3
> 
> 时间：2013-03-26T04:02:44.623
> 
> 标签：java, date

我已经阅读过，基本上我已经发现 Calendar 对象能够将 1 个月添加到使用以下内容指定的日期：

```
Calendar cal = Calendar.getInstance();
cal.add(Calendar.MONTH, 1); 
```

尽管我不喜欢它在日期为 30 或 31 时的行为。如果我在 2012 年 1 月 31 日添加 1 个月，输出将变为 2012 年 2 月 29 日。当我再添加 1 个月时，它变为 2012 年 3 月 29 日。

无论如何我可以强制 02/29/2012 自动变为 03/01/2012 吗？

基本上这就是我想要发生的事情：

默认日期：01/31/2012

添加 1 个月：03/01/2012

再增加 1 个月：2012 年 3 月 31 日

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T04:17:27.453

您要求的是一些隐含的知识，如果开始日期是该月的最后一天，并且您添加 1 个月，则结果应该是下个月的最后一天。即属性“last-day-of-month”应该是粘性的。

这在 Java 中不是直接可用的`Calendar`，但一种可能的解决方案是`Calendar.getActualMaximum(Calendar.DAY_OF_MONTH)`在增加月份后使用重置日期。

```
Calendar cal = ...;
cal.add(Calendar.MONTH,1);
cal.set(Calendar.DAY_OF_MONTH,cal.getActualMaximum(Calendar.DAY_OF_MONTH)); 
```

你甚至可以子类化`GregorianCalendar`并添加一个方法

```
public Calendar endOfNextMonth() { ... } 
```

封装操作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-26T11:42:50.383

好吧，添加 30 天，您可以执行以下操作：

```
public static java.sql.Date sumarFechasDias(java.sql.Date fch, int days) {
    Calendar cal = new GregorianCalendar();
    cal.setTimeInMillis(fch.getTime());
    cal.add(Calendar.DATE, days);
    return new java.sql.Date(cal.getTimeInMillis());
} 
```

如果 days=30，它将返回您添加 30 天的日期。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T04:30:26.897

It looks like you want the calendar to roll up to the beginning of the next month if the date of the next month is smaller than the date of the month before it. Here's how we'd do that:

```
Calendar cal = Calendar.getInstance();
int oldDay = cal.get(DAY_OF_MONTH);
cal.add(Calendar.MONTH, 1);

// If the old DAY_OF_MONTH was larger than our new one, then
// roll over to the beginning of the next month.
if(oldDay > cal.get(DAY_OF_MONTH){
  cal.add(Calendar.MONTH, 1);
  cal.set(Calendar.DAY, 1);
} 
```

# r - 在 ggplot 中制作带有 x 轴垂直标签的条形图

> ID：15629192
> 
> 赞同：14
> 
> 时间：2013-03-26T04:03:11.070
> 
> 标签：r, ggplot2

嗨，亲爱的，我试图在 ggplot 中制作条形图，但没有得到结果。数据框是下一个：

```
z=data.frame(x1=read.table(textConnection("
Indicador
Total
Max.
                             Min.
                             Mean
                             Promedio.Aparatos
                             Promedio.Automotriz
                             Promedio.Belleza
                             Promedio.C.Internet
                             Promedio.Comp
                             Promedio.Deportes
                             Promedio.Educación
                             Promedio.Entretenimiento
                             Promedio.Gasolina
                             Promedio.C.Comerciales
                             Promedio.ATMs
                             Promedio.Hogar
                             Promedio.Libros.y.Música
                             Promedio.Moda
                             Promedio.Pagos.e.Impuestos
                             Promedio.Salud
                             Promedio.Servicios.Varios
                             Promedio.Supermercados
                             Promedio.Telefonia
                             Promedio.Viajes
                             Porcentaje.Aparatos
                             Porcentaje.Automotriz
                             PorcentajeBelleza
                             PorcentajeCompras.en.Internet
                             PorcentajeComputación
                             PorcentajeDeportes
                             PorcentajeEducación
                             PorcentajeEntretenimiento
                             PorcentajeGasolina
                             PorcentajeCentros.Comerciales
                             PorcentajeATMs
                             PorcentajeHogar
                             PorcentajeLibros.y.Música
                             PorcentajeModa
                             PorcentajePagos.e.Impuestos
                             PorcentajeSalud
                             PorcentajeServicios.Varios
                             PorcentajeSupermercados
                             PorcentajeTelefonia
                             PorcentajeViajes
                             "),header=T),
x2=read.table(textConnection("
Número
36001
35916
                             12320
                             35889
                             4487
                             2751
                             673
                             1023
                             1062
                             4602
                             824
                             4438
                             4021
                             2577
                             31845
                             5443
                             641
                             6982
                             32868
                             4696
                             1594
                             9746
                             6239
                             13170
                             3973
                             2526
                             540
                             834
                             964
                             4291
                             755
                             3627
                             3254
                             2186
                             30356
                             4855
                             488
                             6612
                             33079
                             4105
                             1314
                             9284
                             5777
                             9666
                             "),header=TRUE)) 
```

我构建了这个 data.frame，因为我想使用有序数据

```
tabla=z[order(z$Número,decreasing=TRUE),] 
```

我正在尝试使用 ggplot，但我没有得到带有与变量 Indicador 相关的垂直标签的条形图。我想在 x 轴变量 Indicador 和 y 轴变量 Número 中，但使用此代码我得到一个丑陋的情节：

```
qplot(Indicador, data = tabla, geom = "bar") 
```

x 轴上的所有标签都只有一行。感谢您的帮助，有人可以帮助我如何在条形图中添加颜色。

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2013-03-26T06:03:31.530

为更好地控制参数使用函数`ggplot()`。

`Indicador`首先，您应该根据`Número`获得有序条重新排序您的变量。前面的减号`tabla$Número`表示相反的顺序（从最高到最低）。

```
tabla$Indicador<-reorder(tabla$Indicador,-tabla$Número) 
```

然后您应该提供 x 和 y 值并`stat="identity"`在内部使用`geom_bar()`来绘制实际值。使用`theme()`和`axis.text.x=`您可以更改文本方向，还可以调整 x 轴下文本的垂直和水平位置。

```
ggplot(tabla,aes(Indicador,Número))+
  geom_bar(stat="identity")+
  theme(axis.text.x=element_text(angle=90,hjust=1,vjust=0.5)) 
```

![在此处输入图像描述](../Images/159bc11043abaf02ae63a1204b2e7e4b.png)

建议：在出版物中，最好使用类似 45 度的东西：

```
theme(axis.text.x=element_text(angle=45,hjust=1,vjust=0.5)) 
```

# c++ - C++: [VS2010]: 警告 C4396: 'stdext::hash_value' : 友元声明时不能使用内联说明符

> ID：15629198
> 
> 赞同：1
> 
> 时间：2013-03-26T04:04:32.487
> 
> 标签：c++

我正在将我的 VS2005 C++ 代码转换为 VS2010 代码。不幸的是，在 VS2010 中它给出了编译器警告，而在 VS2005 中它编译顺利。（仅供参考：我已将警告设置为错误）。

请看一下代码片段：

错误出现在朋友声明所在的行。

```
class __declspec(dllexport) MyKey
{
    friend size_t stdext::hash_value<MyKey>(const MyKey& key);  // compiler warning at this line (pls see below for the actual compiler warning)

    ubit32  m_uKey1;

};
template<> inline size_t stdext::hash_value<MyKey>(const MyKey& key)
{
    return key.m_uKey1;
} 
```

这是编译器警告，如下所示：

```
warning C4396: 'stdext::hash_value' : the inline specifier cannot be used when a friend declaration refers to a specialization of a function template 
```

请帮我解决这个错误。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T09:40:24.293

我通过在 MyKey 的类声明之前添加以下两个前向声明语句来解决此问题。

```
class MyKey;

template<> size_t stdext::hash_value<MyKey>(const MyKey& key); 
```

现在错误/警告消失了。我做得对吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-07T18:13:55.383

由于您的朋友声明没有`inline`说明符，这显然是 MSVC 编译器中的错误。您可以使用编译器选项或编译指示抑制警告：

```
#pragma warning(disable: 4396) 
```

# android - Android，自定义组件设计

> ID：15629202
> 
> 赞同：0
> 
> 时间：2013-03-26T04:05:38.230
> 
> 标签：android, custom-component

在我的应用程序中，我需要如下图所示。我有创建自定义组件的经验，我知道如何去做。但是，我不知道如何创建这种组件。当我们设计自定义评分栏时，我是否需要做类似的事情？

![在此处输入图像描述](../Images/78ccdac04848ad933783fae55c4b91b7.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T04:44:09.400

无论如何，他们有很多方法可以实现这一目标。

我看到的一种方法是使用单选组和单选按钮、垂直线和文本视图，您可以轻松实现这一点。将所有内容放入您选择的布局中，然后在您需要的地方扩展布局。之后，您只需要像这样设置单选按钮`radio1.setChecked(true)`。这是一个简单的解决方案，但可能不是最佳解决方案。

或者，您可以通过扩展视图类或其任何子类来创建自定义视图，只要您认为适合您的工作，然后覆盖其 onDraw 方法，手动完成整个操作。

# android - 向自定义警报对话框中的按钮添加侦听器会使我的应用程序崩溃

> ID：15629210
> 
> 赞同：4
> 
> 时间：2013-03-26T04:06:45.093
> 
> 标签：android, listener, android-alertdialog, onclicklistener

我的应用程序中有一个按钮，允许我打开自定义警报对话框。此警报对话框从 XML 文件中获取其内容：我在其中有一个按钮（称为 filterButton）、单选按钮和一个滑块。以编程方式，添加了另外两个按钮（确定、取消）。
当我打开对话框警报时，内容完美显示，但到目前为止没有创建任何事件。（所以打开警报对话框并显示内容没问题）

现在，我想为我的“filterButton”添加一个监听器。因此，与往常一样，我以这种方式（在我的 onCreate 中）声明了我的按钮 (Button filterButton;)、setOnClickListener：

```
filterButton = (Button) findViewById(R.id.filter_button); 
filterButton.setOnClickListener(filter_listener); 
```

然后我定义我的听众：

```
OnClickListener filter_listener = new OnClickListener() {

    @Override
    public void onClick(View v) {
//  showPopupMenu(v);
    }  }; 
```

我注释掉了里面的方法，以确保问题不是来自这个方法。因此，既然我这样做了，当我尝试运行我的应用程序时，它就会在我尝试打开打开警报对话框的按钮所在的活动时崩溃。当我取消这几行时，它又可以工作了。我不明白，这没有意义，它只是一个带有侦听器的按钮，我有几十个这样的，没问题，为什么它在我的 alertdialog 中有问题？

ps：我的logcat和往常一样没用，只是说Fatal Error和nullpointerexception，没有细节。

编辑：我按照下面的建议更改为：

```
filterButton = (Button) alertDialog.findViewById(R.id.filter_button);
filterButton.setOnClickListener(filter_listener); 
```

我把它放在这里是因为如果把它放在程序的开头，它会在红色下划线 alertDialog ，但它仍然崩溃：

```
OnClickListener dialog_listener = new OnClickListener() {

    @Override
    public void onClick(View v) {

        LayoutInflater myLayout = LayoutInflater.from(context);
        View dialogView = myLayout.inflate(R.layout.alertdialog_filter, null);

        AlertDialog.Builder alertDialogBuilder = new AlertDialog.Builder(
                context);

        Bundle bundle = getIntent().getExtras();
        int filterVariable = bundle.getInt("filterVariable");

        alertDialogBuilder.setTitle("Filter Mode");

          alertDialogBuilder.setPositiveButton("OK",
                new DialogInterface.OnClickListener() {
                    public void onClick(DialogInterface dialog, int which) {

                    }
                });

        alertDialogBuilder.setNegativeButton("Cancel",
                new DialogInterface.OnClickListener() {
                    public void onClick(DialogInterface dialog, int which) {

                    }
                });  

        // set alertdialog_filter.xml to alertdialog builder
        alertDialogBuilder.setView(dialogView);

        // create alert dialog
        AlertDialog alertDialog = alertDialogBuilder.create();

        filterButton = (Button) alertDialog.findViewById(R.id.filter_button);
        filterButton.setOnClickListener(filter_listener);

        // show it
        alertDialog.show();
    }
}; 
```

不同的是，现在当我打开活动时它不会崩溃，但是当我单击应该打开警报对话框的按钮时。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-26T04:11:05.787

您必须从对话框 XML 文件中获取按钮，如下面的代码

```
filterButton = (Button) dialog.findViewById(R.id.filter_button); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-26T04:10:57.957

您必须将必须进入的按钮`Dialog`与`Dialog`对象连接起来。这里是**对话框**。所以试试这样

```
filterButton = (Button)dialog.findViewById(R.id.filter_button); 
filterButton.setOnClickListener(filter_listener); 
```

# ruby-on-rails - 允许注册用户在不登录的情况下访问他们的帐户

> ID：15629211
> 
> 赞同：0
> 
> 时间：2013-03-26T04:06:56.813
> 
> 标签：ruby-on-rails

我正在向注册用户发送链接。当他们单击链接时，我希望他们重定向以访问

他们的帐户没有任何身份验证（登录）。但是当他们正常访问网站时，他们

应该登录。我正在使用`Digest/sha`密码加密。有人知道吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T04:17:58.063

你可以试试关注..

您必须将链接发送到他们的邮件帐户。

因此用户可以在 5 分钟内访问该帐户。

五分钟后，此链接无效。您必须通过链接传递一些唯一键。喜欢。

> www.google.com?id=12d123e33ert

您必须为用户的每个请求生成唯一链接。并存储到一张数据库表中。带有电子邮件，时间戳。如果用户在 5 分钟内没有点击此链接。

您必须使用服务器的 cron 作业功能清除时间戳大于 5 分钟的数据库。

如果 Eamil 和链接密钥与我们的商店密钥匹配，则用户可以访问该网站。否则不是。

你明白我的观点了吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T04:52:42.223

最简单的方法是使用很多与此 Railscast 中忘记密码功能相同的逻辑：

[http://railscasts.com/episodes/274-remember-me-reset-password](http://railscasts.com/episodes/274-remember-me-reset-password)

# javascript - 将数据写入JS文件并以ZIP文件格式下载

> ID：15629217
> 
> 赞同：0
> 
> 时间：2013-03-26T04:07:24.147
> 
> 标签：javascript, struts2

在我的 JSP 中，我有一个名为“下载 Zip 文件”的按钮。当我单击按钮时，我想从数据库中获取数据并将其写入 JS 文件并将其保存在文件夹中并以 ZIP 格式下载文件夹。我正在使用struts2。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T08:16:03.933

试试这个：将文件下载为 Zip 的代码

```
ServletOutputStream servletOS = null;
    String zipFileName = null;
    try {
        servletOS = response.getOutputStream();
        final ResourceResolver resolver = request.getResourceResolver();
        zipFileName = FileDownloadHelper.getDownloadZipFileName();

        response.setContentType("application/zip");
        response.addHeader("Content-Disposition", "attachment; filename=" + zipFileName);
        servletOS.write(FileDownloadHelper.prepareZipDownloadOutputStream(servletOS, documentUrls));
    } finally {
        if (servletOS != null) {
            servletOS.flush();
            servletOS.close();
        }
    }

public static byte[] prepareZipDownloadOutputStream(final ServletOutputStream outputStream,
        final List<String> docUrls) throws IOException {

    final byte[] buf = new byte[2048];

    String fileName;
    ZipOutputStream zipOutputStream = null;
    InputStream isInputStream = null;
    try {
        zipOutputStream = new ZipOutputStream(outputStream);

        for (final String docUrl : docUrls) {
            LOGGER.info("Reading file from DAM :  " + docUrl);

            // read this file as input stream
             isInputStream  = new FileInputStream(docUrl);

            if (isInputStream != null) {

                fileName = getFileNameFromDocumentUrl(docUrl);

                // Add ZIP entry to output stream.
                zipOutputStream.putNextEntry(new ZipEntry(fileName));
                int bytesRead;
                while ((bytesRead = isInputStream.read(buf)) != -1) {
                    zipOutputStream.write(buf, 0, bytesRead);
                }

                zipOutputStream.closeEntry();
            } e
        }
    } finally {
        if (zipOutputStream != null) {
            zipOutputStream.flush();
            zipOutputStream.close();
        }
        if (isInputStream != null) {
            isInputStream.close();
        }
    }
    LOGGER.info("Returning buffer to be written to response output stream");
    return buf;
}

  public static String getFileNameFromDocumentUrl(final String docUrl) {
    return docUrl
            .substring(docUrl.lastIndexOf("/") + 1, docUrl.length());
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T05:40:05.800

一种方法是从 servlet 提供二进制数据。像这样的东西：

```
byte[] zipFileBytes = ...;// generate the zip file and get the bytes
response.setContentType("application/octet-stream");
response.getOutputStream().write(zipFileBytes ); 
```

然后使用标准锚元素下载文件：

```
<a src="url to your servlet">download the file</a> 
```

您可能需要稍微尝试一下以匹配您的确切用例。

# java - java.sql.Timestamp 比较错误？

> ID：15629222
> 
> 赞同：11
> 
> 时间：2013-03-26T04:07:43.163
> 
> 标签：java, comparison, timestamp

您好，我有一个这样的代码片段：

```
Date d1 = new java.sql.Timestamp(new Date().getTime());
Thread.sleep(10);
Date d2 = new java.sql.Timestamp(new Date().getTime());
System.out.println("Date1: " + d1);
System.out.println("Date2: " + d2);
System.out.println("Comparing times d1.t < d2.t: " + (d1.getTime() < d2.getTime()));
System.out.println("Comparing dates d1.before(d2): " + (d1.before(d2))); 
```

输出如下所示：

```
Date1: 2013-03-26 11:04:01.093
Date2: 2013-03-26 11:04:01.103
Comparing times d1.t < d2.t: true
Comparing dates d1.before(d2): false 
```

**这个 java.sql.Timestamp 类有什么问题？**

是的，我看过这个：

> 注意：此类型是 java.util.Date 和单独的纳秒值的组合。只有整数秒存储在 java.util.Date 组件中。小数秒 - 纳秒 - 是分开的。Timestamp.equals(Object) 方法在传递 java.util.Date 类型的值时永远不会返回 true，因为日期的 nanos 组件是未知的。因此，Timestamp.equals(Object) 方法相对于 java.util.Date.equals(Object) 方法不是对称的。此外，hashcode 方法使用底层的 java.util.Date 实现，因此在其计算中不包括 nanos。
> 
> 由于上面提到的 Timestamp 类和 java.util.Date 类之间的差异，建议代码不要将 Timestamp 值一般视为 java.util.Date 的实例。Timestamp 和 java.util.Date 的继承关系实际上是实现继承，而不是类型继承。

但它适用于 Date <-> Timestamp 关系。

在我的示例中，我只有时间戳，但行为仍然出乎意料..

**更新：答案**

发生这种情况的原因是`before()`方法被重载，而不是在`java.sql.Timestamp`. 我期待一个“覆盖”的行为。比较时间戳的正确方法是使用时间戳变量，而不是日期。

这在 Java 核心中仍然是一个糟糕的设计决策，因为继承*应该*意味着**Timestamp is-a Date**，没有惩罚和例外。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T04:28:12.543

Try to use `Timestamp` instead of `Date` and it will work.

```
Timestamp d1 = new java.sql.Timestamp(new Date().getTime()); 
```

`Timestamp` and `Date` both have own implementation of method `before`. Check it.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-26T04:16:46.437

好吧，这似乎是一个记录不足的功能。

的`before`和`after`方法`Timestamp`似乎是比较到第二个，但没有考虑到毫秒部分。尝试运行它，直到两者`TimeStamp`都进入不同的秒数并且比较按预期工作（将睡眠增加到 500 以使其更容易）。

顺便说一句，该`compareTo`方法考虑了毫秒，因此您可以改用它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-26T04:34:29.083

如果你调用方法`Timestamp.before(Timestamp)`，你会得到预期的结果。

但显然使用 a`Timestamp`作为 a`Date`将是一个全面的混乱。您必须**静态**`Timestamp`使用as 。`Timestamp`

 *** * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-26T05:47:09.453

正如这里提到的

[时间戳是一个薄包装](http://docs.oracle.com/javase/6/docs/api/java/sql/Timestamp.html)

时间戳只是增加了保存 SQL TIMESTAMP 小数秒值的能力（在您的情况下出现问题的地方精度为纳秒）**

# symfony - Symfony2 1:M / 1:1 关系和奏鸣曲管理表格

> ID：15629225
> 
> 赞同：3
> 
> 时间：2013-03-26T04:08:00.813
> 
> 标签：symfony, doctrine-orm, symfony-sonata, sonata-admin

我已经把头撞在墙上无数个小时了，我希望能有所帮助！

我有 Retailer、Branch 和 RetailerBranches 实体，它们工作得很好，零售商可以有很多分店，一个分店只能有一个零售商。当试图让 Sonata Admin (SonataAdminBundle) 很好地处理这种关系时，困难的部分就发生了。它们最简单的形式如下所示：

**零售商实体**

```
 /**
     * @ORM\Column(name="ID", type="integer", nullable=false)
     * @ORM\Id
     * @ORM\GeneratedValue(strategy="IDENTITY")
     */
    private $id;

    /**
     * Relation
     * 
     * @ORM\OneToMany(targetEntity="RetailerBranches", mappedBy="Retailer", cascade={"persist"})
     */
    protected $branches;

    public function __construct() {
        $this->branches = new ArrayCollection();
    } 
```

**RetailerBranches 连接表**

```
 /**
     * @ORM\Column(name="ID", type="integer", nullable=false)
     * @ORM\Id
     * @ORM\GeneratedValue(strategy="IDENTITY")
     */
    private $id;

    /**
     * @ORM\JoinColumn(name="Retailer_ID", referencedColumnName="ID", nullable=false)
     * @ORM\ManyToOne(targetEntity="Retailer", inversedBy="branches")
     */
    private $retailer;

    /**
     * @ORM\JoinColumn(name="Branch_ID", referencedColumnName="ID", nullable=false, unique=true)
     * @ORM\OneToOne(targetEntity="Branch", inversedBy="retailer")
     */
    private $branch; 
```

**分公司实体**

```
 /**
     * @ORM\Column(name="ID", type="integer", nullable=false)
     * @ORM\Id
     * @ORM\GeneratedValue(strategy="IDENTITY")
     */
    private $id;

    /**
     * Relation
     * 
     * @ORM\OneToOne(targetEntity="RetailerBranches", mappedBy="branch", cascade={"persist"})
     */
    private $retailer; 
```

当尝试生成表单以允许这种关系形成时，会发生更困难的部分：

**零售商管理员**

```
protected function configureFormFields(FormMapper $formMapper)
    {
        $formMapper
            ->with('Branches')
                ->add('branches', 'sonata_type_collection', array(
                    'required' => false,
                    'by_reference' => false
                ), array(
                    'edit' => 'inline',
                    'inline' => 'table',
                ))
                ->end()
        ;
    } 
```

**零售商分支机构管理**

```
protected function configureFormFields(FormMapper $formMapper)
    {
        if ($this->hasRequest()) {
            $link_parameters = array('context' => $this->getRequest()->get('context'));
        } else {
            $link_parameters = array();
        }

        $formMapper
            ->add('succursale', 'sonata_type_model_list', array(
                'class' => 'VeloRetailerBundle:Branch',
                'required' => false,
            ), array(
                'edit' => 'inline',
                'inline' => 'table',
            ))
        ;
    } 
```

***问题：***

所有这些工作，这里有一个截图： ![在此处输入图像描述](../Images/3e8a4e6ee73bb12eab08410ea9febbde.png)

有一家零售商及其分支机构。耶。

问题 1：底部的“添加新”按钮尝试添加一个 RetailerBranches 对象，而不是一个简单的 Branch 对象，这显然不起作用。

问题 2：此方法也不允许用户修改内联分支。

我觉得我已经接近解决方案了，但我就是不能完全到达那里。任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T14:39:48.443

对于那些遇到同样问题的人，我在[GitHub 上发布了解决方案](https://github.com/sonata-project/SonataAdminBundle/issues/1254)

.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-17T21:38:03.180

当需要在 Sonata Admin 的同一页面上编辑 OneToOne 或其他关系时，您还可以为每个实体创建 Admin 类（并添加到 config.yml），然后只需将整个实体添加到主 Admin 类中的表单中，如下所示：

```
protected function configureFormFields(FormMapper $formMapper)
    $formMapper
    ->add('yourLinkedProperty', 'sonata_type_admin')
    //other form fields
    ->end() 
```

参见奏鸣曲文档[http://sonata-project.org/bundles/admin/master/doc/reference/form_types.html](http://sonata-project.org/bundles/admin/master/doc/reference/form_types.html)

# java - Android中带有微调器的Listview

> ID：15629233
> 
> 赞同：0
> 
> 时间：2013-03-26T04:08:59.240
> 
> 标签：java, android, mobile

嘿伙计们，我正在尝试使用带有下面显示的代码的列表视图创建菜单。我展示的代码将在列表中显示 Item1、Item2 和 Item3。现在我希望能够向 item1 和 item2 添加微调器。那可能吗？如果是这样，我将如何去做。

```
public class MyList extends ListActivity {

@Override

protected void onCreate(Bundle savedInstanceState) {

super.onCreate(savedInstanceState);

String[] MyList = new String[] { "Item1","Item2","Item3"};

setListAdapter(new ArrayAdapter<String>(this,

android.R.layout.simple_list_item_1, MyList));

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T04:14:34.540

对的，这是可能的。试试下面的代码。你会得到的。

```
String[] MyList = new String[] { "Item1","Item2","Item3"};
ArrayAdapter<String> adapter = new ArrayAdapter<String>(getApplicationContext(), android.R.layout.simple_list_item_1, MyList);
adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
spinner.setAdapter(adapter); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T04:14:43.697

我认为您需要为此创建自定义列表视图，您可以从以下特定教程开始：

[教程](http://www.androidhive.info/2012/02/android-custom-listview-with-image-and-text/)

此链接可能对您有所帮助：

[关联](https://stackoverflow.com/questions/9149550/android-spinners-within-a-listview-loose-their-values-when-i-add-dynamically-ne)

# javascript - JavaScript：带有函数数组的 TypeError

> ID：15629239
> 
> 赞同：3
> 
> 时间：2013-03-26T04:09:38.710
> 
> 标签：javascript, arrays, function, closures, typeerror

所以我今天开始乱用 JavaScript，遇到了一个有趣的案例，它似乎确信某个东西是一个函数，同时又确信它不是一个函数。这段代码说明了这个问题：

```
var arr1 = Array(1)
for (i = 0; i < arr1.length; i++) {
    arr1[i] = function(n) { return n + i }
}

var arr2 = Array(1)
for (j = 0; j < arr2.length; j++) {
    arr2[j] = function(n) { return arr1[j](n) }
}

typeof arr2[0] // "function"
arr2[0](2)     // TypeError: Property '1' of object [object Array] is not a function 
```

从这里，您可以将变量分配给`arr2[0]`，并且错误仍然存​​在。我不确定是否需要闭包或数组来复制它。

我的代码有什么问题吗，或者这只是那些 JavaScript 的怪事之一？这不是我特别需要回答的问题，但这有点愚蠢，所以我想知道是否有原因。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T04:14:56.493

这实际上*确实*与闭包有关。

首先，获取以下代码：

```
for (j = 0; j < arr2.length; j++) {
    arr2[j] = function(n) { return arr1[j](n) }
} 
```

该变量`j`最初保存值 0，因此`arr2[0]`设置为对函数的引用。

接下来，`j`递增，现在的值为 1。这将终止循环。

现在，**当函数被调用时**：

```
return arr1[j](n) 
```

由于闭包，`j`最终值仍然为 1。这是该数组中的无效索引。

还有一件事要指出。`for`循环不会创建新的闭包，因此如果您希望匿名函数将的值包含*在*`j`该迭代中，则该假设是错误的。`j`在声明的整个函数中将有一个实例`j`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T04:18:51.290

我认为您正在尝试在循环内使用闭包，但它不是那样工作的。

如果您想在循环的每个步骤中使用`i`and的值`j`，您可以使用匿名函数，如下所示。

```
var arr1 = Array(1)
for (i = 0; i < arr1.length; i++) {
    arr1[i] = (function(i){
        return function(n) { 
            return n + i 
        };
    })(i);
}

var arr2 = Array(1)
for (j = 0; j < arr2.length; j++) {
    arr2[j] = (function(j){
        return function(n) { 
            return arr1[j](n)
        }
    })(j);
}

typeof arr2[0] 
arr2[0](2) 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/RdqNc/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T04:13:45.797

它没有做任何奇怪的事情。

你只是在尝试一些不是函数的东西（ 的值`arr1[1]`，即`undefined`）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-26T04:14:52.733

以以下形式初始化数组可能更安全：

```
var arr1 = []; 
```

或者，如果您使用的是“数组”，您应该像这样初始化它：

```
var arr1 = new Array(); 
```

# web-applications - 如何将对象传递给 FatFractal 服务器扩展，从扩展内部访问，并将对象返回给客户端应用程序？

> ID：15629240
> 
> 赞同：2
> 
> 时间：2013-03-26T04:09:52.967
> 
> 标签：web-applications, custom-backend

我正在使用 FatFractal JavaScript SDK，并在我的 FFDL 文件中声明了一个服务器扩展，如下所示：

```
CREATE EXTENSION /ChangePassword AS javascript:require('scripts/UserAdministration').changePassword(); 
```

我正在创建一个服务器扩展以允许用户更改他们的登录密码。从我的客户端应用程序中，我想传递一个简单的对象来`/ChangePassword`包含登录用户的用户名、当前（旧）密码和新的所需密码。假设我已经填充了所述对象，那么我将如何 A）将客户端应用程序的对象传递给服务器扩展，B）获取服务器扩展中传递的对象的句柄，以及 C）返回确认对象（最好）或消息更改完成后从服务器扩展到客户端应用程序？

FFDL：

```
CREATE OBJECTTYPE ChangePasswordRequest (userName STRING, oldPassword STRING, newPassword STRING)
CREATE COLLECTION /ChangePasswordRequest OBJECTTYPE ChangePasswordRequest 
```

客户端应用JS代码：

```
 ...

    function ChangePassInfo() {
        this.userName = null;
        this.currentPassword = null;
        this.newPassword = null;
        return this;
    }

    ...

    function changePassword() {
        var uname = ff.loggedInUser().userName;
        var oldPass = $("#input-curr-pass").val();
        var newPass = $("#input-new-pass").val();

        var requestInfo = new ChangePassInfo();
        requestInfo.userName = uname;
        requestInfo.currentPassword = oldPass;
        requestInfo.newPassword = newPass;

        // pass 'requestInfo' to 'ChangePassword' extension
        // acquire handle to confirmation object/message returned from 'ChangePassword'

        ...

    } 
```

服务器扩展JS代码：

```
var ff = require('ffef/FatFractal');

...

function ChangePasswordRequest() {
    this.clazz = 'ChangePasswordRequest';
    this.createdBy = 'system';
    this.userName = null;
    this.oldPassword = null;
    this.newPassword = null;
    return this;
}

...

function changePassword() {

    var changePassReq; // instance of a 'ChangePasswordRequest' object

    // acquire handle to 'requestInfo' passed from client application to populate 'changePassReq'

    ...

    // return a confirmation message or copy of 'changePassReq' to client application

}

...

exports.changePassword = changePassword; 
```

评论部分是我要解决的问题领域。一旦这些都解决了，我应该能够填写其余的实现。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T00:17:49.607

让我们从后端开始。假设一个对象已发布到扩展程序，以下是您在函数中检索它的方法：

```
var ff = require('ffef/FatFractal');     // FatFractal module
var data = ff.getExtensionRequestData(); // Get request data
var member = data.httpContent.member     // Get 'obj' member of passed object 
```

好的，所以现在你已经做了一些事情并想要返回一些东西，这是你如何做到的：

```
var r = ff.response();  // Get response object, and populate
r.result = { member: "Something", otherMember: false, yaMember: 42 };
r.responseCode = "200";
r.statusMessage = "This message is useful";
r.mimeType = "application/json"; 
```

最后，到客户端。以下是将对象发布到扩展程序的方法：

```
var ff = new FatFractal();

// ...

ff.postObjToExtension({ member: "derp" }, "/yourExtension", ... ); 
```

希望能澄清事情！

# php - 成功交易后如何在重定向到我选择的页面之前传递变量和值

> ID：15629243
> 
> 赞同：0
> 
> 时间：2013-03-26T04:09:58.960
> 
> 标签：php, paypal, eclipse-pdt

我计划使用 PayPal 标准结帐的 PDT 功能重定向到我选择的页面，该页面带有一个用 PHP 编写的变量以隐藏显示源页面。然而，他们声称澄清此问题的手册没有任何内容，而是关于 Paypal 专业付款计划。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T13:01:45.477

我不确定我是否完全理解您的问题，但 PDT 将与 Website Payments Standard 一起使用，它不会与 Website Payments Pro 一起使用。基本上，PDT 会将信息返回到您设置的页面，然后您将 POST 回 PayPal 以验证数据。PDT 通过 GET 方法返回信息/变量。

# visual-studio-2010 - 概念类型中的成员数

> ID：15629245
> 
> 赞同：0
> 
> 时间：2013-03-26T04:10:08.030
> 
> 标签：visual-studio-2010, entity-framework

我正在使用带有实体框架的 VS 2010。我决定在一张桌子上创建一些关系。我开始收到以下消息。我一直在努力寻找答案并尝试了一些建议，但没有运气。我可以看到 MSMModel 和 MSM_Models 不匹配，我只是不明白哪个设置不能正常工作。

我可以手动同步这两个表吗？我是否需要硬着头皮升级到 VS 2012？摆脱我所有的关系？

错误信息：

> 概念类型“MSMModel.ShopPart”中的成员数量与对象端类型“MSM_Models.ShopPart”中的成员数量不匹配。确保成员数量相同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T03:18:32.357

是的，我已经尝试过了。我已删除 .edmx 中的类并再次更新。我试过清除临时文件夹。

今天，我想我会走向不同的方向。我删除了数据库中的关系并在设计器中创建它们。它实际上并没有帮助。现在想起来，我有点明白为什么它不会。错误告诉我出了什么问题。添加的导航属性未添加到我的模型中。我真的认为我有一个出发点，我必须找到它。我将不得不更深入地研究 Stackoverflow。谢谢。

# wordpress - Chrome 中的冗余输入按钮

> ID：15629254
> 
> 赞同：0
> 
> 时间：2013-03-26T04:11:02.187
> 
> 标签：wordpress, google-chrome

我在产品页面上有这个数量选择器：

```
<div class="quantity"><input type="number" step="<?php echo esc_attr( $step ); ?>" min="<?php echo esc_attr( $min_value ); ?>" max="<?php echo esc_attr( $max_value ); ?>" name="<?php echo esc_attr( $input_name ); ?>" value="<?php echo esc_attr( $input_value ); ?>" size="4" title="<?php _ex( 'Qty', 'Product quantity input tooltip', 'woocommerce' ) ?>" class="input-text qty text" maxlength="12" /></div> 
```

我刚刚发现了这个错误，似乎只发生在 Chrome 中（或者它的 Chrome 的一个功能？），除了盒子外面的加号/减号按钮之外，盒子里还有显示当前数量的小箭头。IE/Firefox 中不显示小箭头，我的源代码中也没有看到它们。不知道如何隐藏它们。有人遇到过这个吗？

![数量箭头](../Images/451457f3ea48978053f48068ba7fdae0.png)

在 Wordpress 3.5.1 中使用 Woocommerce 2.0.4

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-22T01:26:57.337

Webkit 浏览器（chrome 和 safari）会自动创建这些按钮作为用户界面体验的一部分。如果其他浏览器（IE/Firefox）在不久的将来效仿，我不会感到惊讶。

当网站已经手动添加此功能时，这会导致困难。就个人而言，我认为 woocommerce 添加的加号和减号按钮相当烦人。您会注意到许多电子商务网站不提供加号和减号按钮。例如，eBay 会让您输入您想要的金额，而亚马逊则提供下拉菜单。

在我看来，Woocommerce 做了太多假设。无论哪种情况，除了意见，您有两种选择：

1.  使用他的链接中提供的@Drawrdesign 等解决方案（[我可以隐藏 HTML5 数字输入的旋转框吗？](https://stackoverflow.com/questions/3790935/can-i-hide-the-html5-number-inputs-spin-box/4298216#4298216)）。这将意味着覆盖人们可能期望从浏览器获得的用户界面行为。

2.  更改 woocommerce 以更好地适应浏览器差异，或者：

    *   删除加号和减号按钮（不容易，因为 woocommerce 通过 javascript 添加它们并且覆盖模板文件不会删除它们；快速破解是将类添加`buttons_added`到您`div.quantity`粘贴的），因此需要您的用户在 IE/ 中手动输入金额火狐，或
    *   用一个下拉的数量完全替换输入，比如亚马逊。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-18T14:46:59.483

添加到桦树皮的答案，

您还可以使用 CSS 隐藏 javascript 生成的按钮。您还需要修复框的边框和边框半径。尝试将此添加到主题的样式表中...

```
/* hide the plus and minus buttons */

.woocommerce .quantity .plus,
.woocommerce #content .quantity .plus,
.woocommerce-page .quantity .plus,
.woocommerce-page #content .quantity .plus,
.woocommerce .quantity .minus,
.woocommerce #content .quantity .minus,
.woocommerce-page .quantity .minus,
.woocommerce-page #content .quantity .minus
{
    display: none;
}

/* removed the fixed width on its container */

.woocommerce div.product form.cart div.quantity,
.woocommerce #content div.product form.cart div.quantity,
.woocommerce-page div.product form.cart div.quantity,
.woocommerce-page #content div.product form.cart div.quantity
{
    width: auto;
}

/* make the quantity input look pretty */

.woocommerce .quantity input.qty,
.woocommerce #content .quantity input.qty,
.woocommerce-page .quantity input.qty,
.woocommerce-page #content .quantity input.qty
{
    text-align: left;
    padding: 0 5px;
    width: 50px;
    border: 1px solid #c7c0c7;
    border-radius: 2px;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-29T22:20:38.617

以下对我来说非常有效：

```
input::-webkit-outer-spin-button,
input::-webkit-inner-spin-button {
    -webkit-appearance: none;
    margin: 0;
} 
```

（根据[这篇文章](https://stackoverflow.com/questions/3790935/can-i-hide-the-html5-number-input-s-spin-box/4298216#4298216)“显示：无”上的数量输入可能会使 Chrome 崩溃）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-03-29T22:17:48.877

**火狐**

在 Firefox 中隐藏本机加号/减号使用以下 CSS：

```
input[type=number] {
    -moz-appearance: textfield;
} 
```

如果这不起作用，请尝试添加`!important`规则

```
input[type=number] {
    -moz-appearance: textfield !important;
} 
```

**铬合金**

在某些情况下，Chrome 也会显示本机加号/减号。使用这个 CSS 来隐藏它：

```
::-webkit-inner-spin-button {
    -webkit-appearance: none;
}

::-webkit-outer-spin-button { 
    -webkit-appearance: none;
} 
```

# php - 删除除具有特定类的 div 之外的所有 div？

> ID：15629256
> 
> 赞同：0
> 
> 时间：2013-03-26T04:11:08.330
> 
> 标签：php, replace, preg-match-all

如果我在网站 1 上有此设置：

```
<div class="awesomeContent">
    <div>
        Information goes here...
    </div>
    <div>
        Information goes here...
    </div>
    <div>
        Information goes here...
    </div>
</div> 
```

如果我在网站 2 上使用它：

```
<?php
$data = file_get_contents('http://website.com/hello);
preg_match_all ("/<div class=\"awesomeContent\">([^`]*?)<\/div>/", $data, $matches);
print_r($matches[0]); 
```

我希望它发布：

```
<div class="awesomeContent">
    <div>
        Information goes here...
    </div>
    <div>
        Information goes here...
    </div>
    <div>
        Information goes here...
    </div>
</div> 
```

但我得到的只是

```
<div class="awesomeContent">
    <div>
        Information goes here...
    </div> 
```

我怎样才能更好地做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T04:22:29.723

我建议您在这里使用 dom 解析，例如

```
$parsedHtml = simplexml_load_string($data);
print_r($parsedHtml)` 
```

但是您的问题的解决方案仍然是更换

```
 "/<div class=\"awesomeContent\">([^`]*?)<\/div>/" 
```

和

```
 "/<div class=\"awesomeContent\">([^`]*)<\/div>/" 
```

因为您在模式中使用了仅在第一个 div 中存在的类

# salesforce - 不能从批处理或未来方法调用 Database.executeBatch

> ID：15629259
> 
> 赞同：1
> 
> 时间：2013-03-26T04:11:15.780
> 
> 标签：salesforce, apex-code

我正在从另一个批处理类的完成方法调用批处理类并面临上述错误

**方法代码：**

```
public class BatchPublicCampaignsToGoogle 
implements Database.Batchable<SObject>, Database.Stateful, 
           Database.AllowsCallouts {

    public void finish(Database.BatchableContext BC){   
        if(newBatch == true) {           
            CalendarSettings__c c = 
                [Select Id, Name, CalendarId__c,
                 CalendarQuery__c,FieldToDisplay__c 
                 from CalendarSettings__c 
                 WHERE Name = 'Internal marketing Calendar' LIMIT 1] ;

            BatchPublicCampaign bjob = new BatchPublicCampaign();
            Database.executeBatch(bjob);
        }
    }

} 
```

但我收到以下错误：

```
Database.executeBatch cannot be called from a batch or future method. 
```

完成批处理请求后，我试图再次调用它（我必须调用它两次）。所以我称之为。

我该如何解决这个错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T11:37:30.517

Apex 批处理类 最低版本应该是 27.0 我使用的是 25.0 这就是我遇到这个问题的原因！！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T02:25:58.933

正如我在您的另一个问题[Execution Confusion in Batch class Apex](https://stackoverflow.com/questions/15595406/execution-confusion-in-batch-class-apex)中提到的，冬季 13 中引入了从 finish 方法将批处理作业链接在一起的能力。

Winter 13 对应于 API 版本 26.0，因此您的批处理类将需要使用该版本或更高版本才能使用链接。

# android - 字符串方程解析器问题

> ID：15629260
> 
> 赞同：0
> 
> 时间：2013-03-26T04:11:57.757
> 
> 标签：android, string, math

我正在编写一种解决各种方程的方法。现在我希望该方法接收一个可以采用以下形式的字符串方程：

```
ax^2+bx+c=0 
```

或者

```
*ax^2+c=0* 
```

或者

```
bx+c=0 
```

等等，顺序应该无关紧要。

我的问题是：**如何根据“x”等级解析方程？**

eq 可以包含更多相同等级的值，例如 2x^2+4x^2+3x+8=2（最大等级 x^3）。

我的方法应该将 a 值分配给`double a[]`if 在 a 的左侧或右侧有`x^2`, `double b[]`, 如果在左侧或右侧有`x`, 并且`double c[]`如果值附近没有任何`x`变量（并且应该更改值如果 therms 在***=***之后，请签名。

将字符串数字转换为双精度数很简单，但我不知道如何根据`x`描述的等级反汇编输入字符串。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T05:30:05.053

经过测试`-2x + 3x^2 - 2 + 3x = 3 - 2x^2`

```
public Double[] parseEquation(String equation)
{
    Log.d(TAG, "equation: " + equation);
    // Remove all white spaces
    equation = equation.replaceAll("[ ]", "");

    // Get the left and right sides of =    
    String[] sides = equation.split("[=]");  // should be of size 2
    boolean leftNegative = false;
    boolean rightNegative = false;
    if (sides.length != 2)
    {
        // There is no = or more than one = signs.
    }
    else
    {
        // if sides i starts with + remove the + 
        // if - we remove and put it back later
        for (int i = 0; i < 2; i++)
        {
            if (sides[i].charAt(0) == '+')
            {
                sides[i] = sides[i].substring(1);
            }
        }

        if (sides[0].charAt(0) == '-')
        {
            leftNegative = true;
            sides[0] = sides[0].substring(1);
        }
        if (sides[1].charAt(0) == '-')
        {
            rightNegative = true;
            sides[1] = sides[1].substring(1);
        }
    }
    Log.d(TAG, "left side:" + sides[0] + " right side: " + sides[1]);

    // Terms without signs need to find out later
    String[] leftTerms = sides[0].split("[+-]");
    String[] rightTerms = sides[1].split("[+-]");

    int length = leftTerms[0].length();
    if (leftNegative)
    {
        leftTerms[0] = "-" + leftTerms[0];
    }
    // put in the minus sign for the rest of the terms

    for (int i = 1; i < leftTerms.length; i++)
    {
        Log.d(TAG, "length = " + length + " " + sides[0].charAt(length));
        if (sides[0].charAt(length) == '-')
        {
            leftTerms[i] = "-" + leftTerms[i];
            length += leftTerms[i].length();
        }
        else
        {
            length += leftTerms[i].length() + 1;
        }   
    }

    length = rightTerms[0].length();
    if (rightNegative)
    {
        rightTerms[0] = "-" + rightTerms[0];
    }

    for (int i = 1; i < rightTerms.length; i++)
    {
        Log.d(TAG, "length = " + length + " " + sides[1].charAt(length));
        if (sides[1].charAt(length) == '-')
        {
            rightTerms[i] = "-" + rightTerms[i];
            length += rightTerms[i].length();
        }
        else
        {
            length += rightTerms[i].length() + 1;
        }   
    }
    //  Now we put all the factors and powers in a list
    List<ContentValues> leftLists = new ArrayList<ContentValues>();

    // left side
    for (int i = 0; i < leftTerms.length; i++)
    {
        Log.d(TAG, "leftTerm: " + leftTerms[i]);
        ContentValues contentValues = new ContentValues();
        int indexOfX = leftTerms[i].indexOf('x');
        if (indexOfX == -1)
        {
            // no x mean a constant term
            contentValues.put("factor", leftTerms[i]);
            contentValues.put("power", "0");
        }
        else
        {
            int indexOfHat = leftTerms[i].indexOf('^');
            if (indexOfHat == -1)
            {
                // no hat mean power = 1
                contentValues.put("power", "1");
                String factor = leftTerms[i].substring(0, indexOfX).trim();
                contentValues.put("factor", factor);
            }
            else
            {
                String power = leftTerms[i].substring(indexOfX + 2).trim();
                String factor = leftTerms[i].substring(0, indexOfX).trim();
                contentValues.put("factor", factor);
                contentValues.put("power", power);
            }
        }
        Log.d(TAG, contentValues.toString());
        leftLists.add(contentValues);
    }

    List<ContentValues> rightLists = new ArrayList<ContentValues>();
    for (int i = 0; i < rightTerms.length; i++)
    {           
        Log.d(TAG, "rightTerm: " + rightTerms[i]);
        ContentValues contentValues = new ContentValues();
        int indexOfX = rightTerms[i].indexOf('x');
        if (indexOfX == -1)
        {
            // no hat mean a constant term
            contentValues.put("factor", rightTerms[i]);
            contentValues.put("power", "0");
        }
        else
        {
            int indexOfHat = rightTerms[i].indexOf('^');
            if (indexOfHat == -1)
            {
                // no hat mean power = 1
                contentValues.put("power", "1");
                String factor = rightTerms[i].substring(0, indexOfX).trim();
                contentValues.put("factor", factor);
            }
            else
            {
                String power = rightTerms[i].substring(indexOfX + 2).trim();
                String factor = rightTerms[i].substring(0, indexOfX).trim();
                contentValues.put("factor", factor);
                contentValues.put("power", power);
            }
        }
        Log.d(TAG, contentValues.toString());
        rightLists.add(contentValues);
    }
    // Now add the factors with same powers.
    // Suppose we solve for cubic here the end result will be 
    // 4 terms constant, x, x^2 and x^3
    // Declare a double array of dim 4 the first will hold constant
    // the second the x factor etc...
    // You can allow arbitrary power by looping through the lists and get the max power
    Double[] result = new Double[]{0.0, 0.0, 0.0, 0.0};
    for (ContentValues c : leftLists)
    {
        switch (c.getAsInteger("power"))
        {
            case 0:
                //Log.d(TAG, "power = 0, factor = " + c.toString());
                result[0] += c.getAsDouble("factor");
                break;

            case 1:
                result[1] += c.getAsDouble("factor");
                break;
            case 2:
                result[2] += c.getAsDouble("factor");
                break;
            case 3:
                result[3] += c.getAsDouble("factor");
                break;
        }
    }

    for (ContentValues c : rightLists)
    {
        switch (c.getAsInteger("power"))
        {
            case 0:
                //Log.d(TAG, "power = 0, factor = " + c.toString());
                result[0] -= c.getAsDouble("factor");
                break;

            case 1:
                result[1] -= c.getAsDouble("factor");
                break;
            case 2:
                result[2] -= c.getAsDouble("factor");
                break;
            case 3:
                result[3] -= c.getAsDouble("factor");
                break;
        }
    }
    Log.d(TAG, "constant term = " + result[0] + ", x^1 = " + result[1]
                 + ", x^2 = " + result[2] + ", x^3 = " + result[3]);
    return result;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T04:20:23.520

如果您不受 Android 的限制，我建议您使用词法分析器和解析器。这些是代码生成器，因此它们可以在基础语言工作的任何地方工作，但它们往往会产生臃肿的代码。Android 可能不会欣赏这一点。

# sql-server-2008 - sql查询以选择最近的记录以及空记录

> ID：15629262
> 
> 赞同：0
> 
> 时间：2013-03-26T04:12:02.960
> 
> 标签：sql-server-2008

我有 2 个表..我正在将状态历史记录移动到一个表中并将其显示在另一个表中..第二个表获取最近的状态并将其显示在网页中![输出](../Images/bd68f1fac4bfd9a1bdc5833548108977.png)

像这样我需要..但我越来越

![需要的输出](../Images/f10e163bd6ff5f46f6f54a5de4eb284c.png)

我需要更新的记录以及空状态记录。我的查询是：

```
with ctr as
(
 select en.status update,ed.no,row_number()
 over (partition by ed.no order by en.update descending) as [RN], 
 ed.[conference date],ed.conference name,ed.region,ed.inquiry,
 ed.attended by,ed.doctor name,ed.hospital,ed.contact no,ed.email, ed.adds,
 CONVERT(VAR CHAR(10),en.[update], 103) as update,ed.closed,
 CONVERT(VAR CHAR(10),ed.[closing date],103) as closing date,
 ed.closed by, ed.revenue, ed.approve status, ed.Enid from inquiries_details ed
 inner join
 inquiries en on ed.Enid = en.Enid
 inner join
 staff_details SD on ed.region = SD.state
 where region = 'Maharashtra' 
)
 select * from ctr where RN = 1 
```

谁能帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T06:18:15.710

您可以尝试使用以下查询，可能是内部联接的问题.. 将其更改为左联接

```
with ctr as
(
 select en.status update,ed.no,row_number()
 over (partition by ed.no order by en.update descending) as [RN], 
 ed.[conference date],ed.conference name,ed.region,ed.inquiry,
 ed.attended by,ed.doctor name,ed.hospital,ed.contact no,ed.email, ed.adds,
 CONVERT(VAR CHAR(10),en.[update], 103) as update,ed.closed,
 CONVERT(VAR CHAR(10),ed.[closing date],103) as closing date,
 ed.closed by, ed.revenue, ed.approve status, ed.Enid from inquiries_details ed
 left join
 inquiries en on ed.Enid = en.Enid
 left join
 staff_details SD on ed.region = SD.state
 where region = 'Maharashtra' 
)
 select * from ctr where RN = 1 
```

# java - 更改目标 JSP 页面和 servlet

> ID：15629267
> 
> 赞同：0
> 
> 时间：2013-03-26T04:13:02.980
> 
> 标签：java, jsp, servlets

我是 JSP 和 Servlet 的新手，所以请耐心等待！我对 JSP 和 Servlet 之间的通信有疑问。

我正在尝试创建一个登录页面。

这是我的 LogIN 索引 JSP 页面

```
<%@page contentType="text/html"%>
<%@page pageEncoding="UTF-8"%>
<html>
    <head><title>  index.jsp</title></head>
    <body bgcolor="orange">
    <h2> <font color=white> JSP index.jsp at</font>
            <%= request.getContextPath () %>
            <font color=white>
            </font></h2><hr>

            <form action="LibrarySysServlet" method ="POST">
            <font color=navy><h3>Login</h3>
                <table>
                <tr>
                    <td> MemberId </td>
                    <td align="left"><input type="text" name="memId" length="30"/></td>
                </tr>
                <tr>
                    <td> Password </td>
                    <td align="left"><input type="text" name="password" length="30"/></td>
                </tr>
                </table>
                <br>
                <p><input type="submit" value="Submit"/></p>

                </font>
            </form>

            <br>
    </body>
</html> 
```

我真的很困惑在登录时为索引页面的表单操作放置什么，因为目的地会根据登录是否正确而发生变化。

对于我的 Servlet 方面，我尝试扫描索引页面并将其传递给一个函数以检查 logIn 是否正确并根据不同的答案重定向它。

但是，在运行时，它不会重定向，而是继续执行表单操作中指定的任何内容。

代码的简短片段（没有粘贴整个内容，因为它太长了）：

```
 RequestDispatcher dispatcher;
                ServletContext servletContext = getServletContext(); //links to index.JSP

                String page = request.getPathInfo();
                page = page.substring(1);

                if ("index".equals(page)) {
                    if (logIn(request)) {
                      dispatcher= servletContext.getRequestDispatcher("/result.jsp");
                     } else {
                     dispatcher= servletContext.getRequestDispatcher("/Menu.jsp");
                     }
                 } 
```

HELP真的很困惑！我究竟做错了什么？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T04:40:39.683

您可以利用容器并使用基于 FORM 的身份验证。在 web.xml 中：

```
 <login-config>
      <auth-method>FORM</auth-method>
      <form-login-config>
         <form-login-page>login.html</form-login-page>
         <form-error-page>login_error.html</form-error-page>
      </form-login-config>
   </login-config> 
```

然后在 login.html 中：

```
 Please log in:
   <form method="POST" action="j_security_check">
      <input type="text" name="j_username">
      <input type="password" name="j_password">
      <input type="submit" value="Login">
   </form> 
```

您必须使用 j_security_check、j_username 和 j_password 才能使其工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T04:17:32.107

```
 RequestDispatcher dispatcher;
                ServletContext servletContext = getServletContext(); //links to index.JSP

               //check here your username and password and put into a variable true or false

                    if (variable== true) {
                      dispatcher= servletContext.getRequestDispatcher("/result.jsp");
                     } else {
                     dispatcher= servletContext.getRequestDispatcher("/Menu.jsp");
                     }
             } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T04:21:44.260

最好使用 reponse.sendRedirect("{url}") 而不是调度程序。

还要测试你的登录方法，看看它是否如你所愿

# php - 开始会话的正确方法

> ID：15629268
> 
> 赞同：0
> 
> 时间：2013-03-26T04:13:11.340
> 
> 标签：php, session, codeigniter-2

在我的第一个 CodeIgniter 2 应用程序中尝试授权。了解会话，但我不明白什么时候必须为访客初始化会话？在具体行动中还是在构造函数中？众所周知，用户可以通过自己输入 URL 来调用任何操作。这是否意味着我必须有类似`before()`方法之类的东西，必须在所有操作之前调用该方法，并在其中检查会话是否可用，如果没有，则启动会话？

*   [http://on-line-teaching.com/php/sessions.htm](http://on-line-teaching.com/php/sessions.htm)
*   [http://www.myfirstsite.ru/articles/sessions-in-php](http://www.myfirstsite.ru/articles/sessions-in-php)

从这些站点我可以阅读共同的会话，但我想要一些关于 CodeIgniter 框架的示例。也许 CodeIgniter 中的授权比这些授权更具体。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T18:27:09.980

Session 类将每个用户的会话信息存储为 cookie 中的序列化（和可选加密）数据。它还可以将会话数据存储在数据库表中以增加安全性，因为这允许用户 cookie 中的会话 ID 与存储的会话 ID 相匹配。默认情况下只保存 cookie。如果您选择使用数据库选项，您需要创建会话表，如下所示。

**注意：** Session 类不使用原生 PHP 会话。它生成自己的会话数据，为开发人员提供更大的灵活性。

**注意：**即使您没有使用加密会话，也必须在配置文件中设置一个加密密钥，用于帮助防止会话数据被操纵。

会话通常会在每次页面加载时全局运行，因此会话类必须在控制器构造函数中初始化，或者可以由系统自动加载。在大多数情况下，会话类将在后台无人看管地运行，因此只需初始化该类将导致它读取、创建和更新会话。

要在控制器构造函数中手动初始化 Session 类，请使用 $this->load->library 函数：

```
$this->load->library('session'); 
```

[有关 CI 会话的更多信息，](http://ellislab.com/codeigniter/user-guide/libraries/sessions.html)您可以在 UserGuide 中阅读

非常感谢

# php - apache中的节点js

> ID：15629270
> 
> 赞同：1
> 
> 时间：2013-03-26T04:13:42.843
> 
> 标签：php, apache, serverside-javascript

我搜索了很多，发现它`node.js`不起作用`apache`。

还有其他选择吗？

这背后的主要思想是`server-side`在 Apache 上使用 javascript。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T04:24:03.180

`node.js` *是*一个网络服务器。它侦听端口，接受传入请求并提供响应。Apache 也是一个网络服务器。它侦听端口，接受传入的请求，但根据可用的处理程序，可能会将请求发送到 php、perl 或任何 cgi 以呈现输出。

但是，您可以做的是让 node.js 监听端口 8081 或其他任何端口，并让 Apache 在端口 80 上监听。`http`（端口 80）上的传入请求可以代理到 node.js 端口。

# javascript - 我可以在 Cordova 2.5 上多次收听 deviceready 吗？

> ID：15629278
> 
> 赞同：4
> 
> 时间：2013-03-26T04:14:36.687
> 
> 标签：javascript, cordova

我可以为每个 html 页面注册 'deviceready' 事件吗？我使用 Cordova 2.5 的初始化代码，它工作正常。当我将这些代码复制到一个新的 html 文件时，它总是调用 index.html 的 initialize() 函数。

```
var app = {
    // Application Constructor
    initialize: function() {
        this.bindEvents();
    },
    // Bind Event Listeners
    //
    // Bind any events that are required on startup. Common events are:
    // 'load', 'deviceready', 'offline', and 'online'.
    bindEvents: function() {
        document.addEventListener('deviceready', this.onDeviceReady, false);
    },
    // deviceready Event Handler
    //
    // The scope of 'this' is the event. In order to call the 'receivedEvent'
    // function, we must explicity call 'app.receivedEvent(...);'
    onDeviceReady: function() {
        app.receivedEvent('deviceready');
    },
    // Update DOM on a Received Event
    receivedEvent: function(id) {
        console.log('Received Event: XXX ' + id);

    }
}; 
```

=============== HTML 文件：

……

```
 <script type="text/javascript">
                app.initialize();
                </script> 
```

……

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-26T05:02:34.233

设备就绪只会触发一次。只有当应用程序被杀死并再次打开时，它才会在下次触发。

# spring - Spring + 自定义转换器 + Mongodb

> ID：15629286
> 
> 赞同：0
> 
> 时间：2013-03-26T04:15:27.533
> 
> 标签：spring, mongodb, converter

我得到了错误，不知道在哪里调试。

*ConverterNotFoundException：找不到能够从类型@javax.validation.constraints.NotNull java.util.HashMap<@javax.validation.constraints.NotNull java.lang.String，@javax.validation.constraints.NotNull java.util 转换的转换器。 Date> 键入 java.lang.String*

我已经设置了我的应用程序上下文：

```
<mongo:mapping-converter id="mongoConverter" base-package="com.app">
    <mongo:custom-converters>
      <mongo:converter>
            <bean class="com.app.util.converter.HashMapToStringConverter" />
      </mongo:converter>
        <mongo:converter>
            <bean class="com.app.util.converter.StringToHashMapConverter" />
        </mongo:converter>
    </mongo:custom-converters>
</mongo:mapping-converter> 

<bean class="org.springframework.data.mongodb.core.MongoTemplate" id="mongoTemplate">
    <constructor-arg name="mongoDbFactory" ref="mongoDbFactory"/>
    <constructor-arg name="mongoConverter" ref="mongoConverter"/>
</bean> 
```

我的转换器之一是：

```
public class HashMapToStringConverter implements Converter<HashMap<String,Date>, String>{
    @Override
    public String convert(HashMap<String,Date> map) {       
        if(map==null){
            throw new ConversionFailedException(TypeDescriptor.valueOf(HashMap.class), 
                    TypeDescriptor.valueOf(String.class), map, null);           
        }       
        StringBuilder sb = new StringBuilder();
        boolean first = true;
        for(Map.Entry<String, ?> e: map.entrySet()){             
            if(!first){ 
                sb.append(",");
                first=!first;
            }            
             sb.append(e.getKey());
             sb.append("::");
             sb.append(e.getValue());           
        }       
        return sb.toString();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-30T19:38:10.043

我有一个类似的问题，但情况完全不同。我有一个 DefaultConversionService 的自定义装饰器。

我所做的是调用方法 addConverter 并添加了我的自定义转换器。

我有类似的东西：

```
public class MyConverter<Class1, Class2> {...} 
```

在另一个代码中，我有：

```
DefaultConversionService cs = new MyDecoratorConversionService(new DefaultConversionService());

cs.addConverter(new MyConverter()); 
```

# ruby-on-rails - Rails：如何在创建时将多个属性设置为相同的值？

> ID：15629291
> 
> 赞同：2
> 
> 时间：2013-03-26T04:16:49.970
> 
> 标签：ruby-on-rails, activerecord

假设我在我的 HP 模型中跟踪角色的健康状况。

我有 HP.min、HP.max 和 HP.current，三个属性分别跟踪字符最小 HP、最大 HP 和当前 HP。

我有一个表格，允许玩家输入他们的最小和最大 HP。然后我想在创建时将 HP.current 设置为 params[:max] 的值，因为让玩家的当前和最大 HP 完全相同的值似乎超级多余。

实现这一目标的最佳方法是什么？我尝试了一些 ActiveRecord 回调（after_save、before_create），但都没有运气。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T04:26:50.850

您目前如何使用回调？也许您可以发布一些代码，以便我们查看实现是否存在问题。:)

或者，我假设表单值将传递给控制器​​，您可以`max => params[:max], current => params[:max]`在保存记录之前通过设置手动构建记录。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T04:43:58.240

在模型中执行此操作：

```
before_save { |hp| hp.current = hp.max } 
```

或者在控制器中做一些事情：

```
def update
  @hp.current = params[:max] if params[:max]
  if @hp.update_attributes(params[:hp])
    # your options here
  else
    # your options here
end 
```

# c# - 我正在尝试获取 DataGridView 中具有共同特定列的所有行。

> ID：15629292
> 
> 赞同：0
> 
> 时间：2013-03-26T04:16:59.283
> 
> 标签：c#, select, datagridview

```
private void dataGridView1_CellContentClick_1(object sender, DataGridViewCellEventArgs e)
{
    string sid;
    try
    {
        txtOut.Clear();
        sid = dataGridView1.Rows[dataGridView1.CurrentRow.Index].Cells["ServerType"].Value.ToString();
        txtOut.Text = sid;
        txtOut.Refresh();
    }
    catch(Exception)
    {
    }

    List<string> lst2 = new List<string> ();
    DataGridView dgv1 = new DataGridView();

    //load dgv1 with the rows
    foreach(DataGridViewRow r in dataGridView1.SelectedRows)
    {
        dgv1.Rows.Add(r);

        string scolumn = r.DataGridView.Columns.Equals(3).ToString();
        txtOut.Text = r.ToString();
        txtOut.Refresh();
    }

    string[] q1 = lst2.Distinct().ToArray();
    listBox1.DataSource = q1;
} 
```

# javascript - 如何以简单的方式禁用 JavaScript 的执行？

> ID：15629294
> 
> 赞同：0
> 
> 时间：2013-03-26T04:17:19.043
> 
> 标签：javascript, html, google-chrome, firefox, noscript

我想测量一些网页的 HTML 解析时间。一个困难是解析和 JavaScript 执行交替发生。

我不熟悉 html 和 javascript，有什么简单的方法可以禁用脚本的执行吗？

例如插入`<noscript>`某些地方（我不确定这是否可行）

顺便说一句，我在 Android 上做实验。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T04:30:32.503

You can disable JavaScript in Chrome developer tools. Click on settings icon on lower right of the tool then you will find the settings.

![enter image description here](../Images/eaa2c1e82cd1a4a79c27d561b9346708.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T05:15:20.917

1.  类型

    铬：//设置/内容

    在 Chrome 浏览器地址栏中。

2.  在 JavaScript 部分下选择“不允许任何站点运行 JavaScript”。
3.  单击完成。
4.  刷新页面，JavaScript 不会被执行。

# c# - 从 ASP.NET MVC Web 应用程序访问 android 活动

> ID：15629295
> 
> 赞同：2
> 
> 时间：2013-03-26T04:17:23.717
> 
> 标签：c#, java, android, asp.net-mvc

如果我有一个打开 WebView 活动以显示 ASP.NET MVC Web 应用程序的 android 应用程序，有什么方法可以访问活动或从 Web 应用程序内部启动意图？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T05:00:33.540

当然。你会想要[`WebView.addJavascriptInterface()`](http://developer.android.com/reference/android/webkit/WebView.html#addJavascriptInterface%28java.lang.Object,%20java.lang.String%29)的。这将允许您将 Android 应用程序的任何方法公开给 javaScript，而后者又可以与您的 Web 应用程序进行交互。

# iphone - 许多点击手势在视图中

> ID：15629302
> 
> 赞同：0
> 
> 时间：2013-03-26T04:17:39.463
> 
> 标签：iphone, ios, ios6, uitapgesturerecognizer

我有点击手势的问题。我的情况是： - 使用 UITapGestureRecognizer 关闭键盘的视图 - 视图上的标签，有 2 个手势。一`UITapGestureRecognizer`打开弹窗，`UITapGestureRecognizer`（触摸次数为2）快速确认弹窗。

但是当我点击标签时，`UITapGestureRecognizer`on view 总是会收到动作。如何将操作转发到`UILabel`.

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T04:22:11.060

要点击标签，您需要为该标签启用用户交互

要接收 2 次点击，您需要执行以下操作

简而言之`[tap requireGestureRecognizerToFail:dTap];`，您可以通过单击来等待一段时间以检查是否会发生双击

```
UITapGestureRecognizer *dTap = [[UITapGestureRecognizer alloc]
                                         initWithTarget:self 
                                         action:@selector(doubleTapped:)];
dTap.delegate = self;
dTap.numberOfTapsRequired = 2;
dTap.numberOfTouchesRequired = 1;
[label addGestureRecognizer:dTap];

UITapGestureRecognizer *tap = [[UITapGestureRecognizer alloc]
                                   initWithTarget:self 
                                   action:@selector(tapped:)];
tap.delegate = self;
tap.numberOfTapsRequired = 1;
tap.numberOfTouchesRequired = 1;
[label addGestureRecognizer:tap];
[tap requireGestureRecognizerToFail:dTap]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T04:22:39.473

// 它在你的 Lable 上启用用户交互，默认情况下它是 NO，所以你必须这样做。

```
[lbl setUserInteractionEnabled:YES]; 
```

# c# - 无法转换为类型库 - 错误：找不到元素

> ID：15629309
> 
> 赞同：12
> 
> 时间：2013-03-26T04:18:10.753
> 
> 标签：c#, .net, vb.net, com

[*注意：我正在回答我自己的问题，以防将来对其他人有所帮助。*]

我收到错误：

> 程序集“C:\XYZ.dll”无法转换为类型库。类型库导出器在处理“XYZ”时遇到错误。错误：未找到元素。

这是导致问题的代码：

```
[Guid("7a4e9867-96a7-43f0-9492-0327b9053853"),
ClassInterface(ClassInterfaceType.None)]
public class TimeSeriesPoint
{
    public string Date { get; set; }
    public float Value { get; set; }
}

[Guid("7a4e9867-96a7-43f0-9492-0327b9053853"),
InterfaceType(ComInterfaceType.InterfaceIsDual)]
public interface IDataHelper
{
    //RCOMServerLib.IStatConnector Connector { set; }
    string Text { set; }
    void DoCallback(); 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-03-26T04:18:10.753

我使用的是 AssemblyInfo 文件中的相同 GUID：

```
[assembly: Guid("7a4e9867-96a7-43f0-9492-0327b9053853")] 
```

您需要使用唯一的 GUID 来解决错误：

```
[Guid("C25D485B-F7DE-4F1C-99FE-FFAF5A219B77"),
ClassInterface(ClassInterfaceType.None)]
public class TimeSeriesPoint
{
    public string Date { get; set; }
    public float Value { get; set; }
}

[Guid("FA6F70DD-CDD0-4FF3-94BA-E2B94E68321D"),
InterfaceType(ComInterfaceType.InterfaceIsDual)]
public interface IDataHelper
{
    //RCOMServerLib.IStatConnector Connector { set; }
    string Text { set; }
    void DoCallback(); 
```

要在 Visual Studio 中获取唯一的 GUID，请单击工具菜单 > 创建 GUID > 选择第四个选项**注册表格式**> 复制：

![在此处输入图像描述](../Images/11b156cfb1dd49a9894c17f560d502df.png)

参考：[http ://social.msdn.microsoft.com/forums/en-US/csharpgeneral/thread/a440f695-652c-46d2-bb52-650c6227d3e9](http://social.msdn.microsoft.com/forums/en-US/csharpgeneral/thread/a440f695-652c-46d2-bb52-650c6227d3e9)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-10-13T00:44:01.447

类似的问题，但带有最终错误声明：

```
Error: Error loading type library/DLL. 
```

就我而言，有一个没有`tlb`生成的引用项目/程序集。

但是，`regasm`手动运行是有效的。它`tlb`为引用的项目/程序集和目标生成`Acme.Widgets.dll`. 并且没有明确引用`regasm`命令行中指定的相关项目：

```
@ECHO OFF

pushd "%~dp0"

%SystemRoot%\Microsoft.NET\Framework\v4.0.30319\regasm Acme.Widgets.dll /tlb Acme.Widgets.tlb /codebase 

popd

pause 
```

我最终意识到引用的项目/程序集没有在 Visual Studio 中启用**Register for COM interop设置。**认为只为目标启用它就足够了，但事实并非如此。

引用的项目/程序集开始服务于普通的 .Net 应用程序，其中 COM 不是一个因素。

# adapter - 类型错误：无法在工作灯中调用未定义的方法“调用过程”

> ID：15629323
> 
> 赞同：0
> 
> 时间：2013-03-26T04:19:37.400
> 
> 标签：adapter, ibm-mobilefirst

这是我的js函数...

```
var invocationData={
                adapter : 'Health_Care',
                procedure: 'update',
                    parameters:[uname,cp,np]
            };

            WL.Client.invokeProcedure(invocationData,
            {
                onSuccess: function(){
                     alert("Password successfully changed");
                },
                  onFailure: function(){
                      alert("failed");
                  }

            }       
            ); 
```

我的适配器是...

```
var updateStatement = WL.Server.createSQLStatement("UPDATE EMPLOYEE SET PASSWORD=? WHERE UID=? AND PASSWORD=?"); 
```

函数更新（pid，curP，newP）{

```
return WL.Server.invokeSQLStatement({
    preparedStatement : updateStatement,
    parameters : [newP,pid,curP]

}); 
```

}

当我调用适配器时，我的适配器是单独工作的......但是使用 java 脚本，我得到所有页面的上述错误......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T07:17:43.177

似乎您正在尝试在其他 HTML 页面中使用 Worklight 功能，但没有所有必需的脚本标记（`worklight.js`、`wlclient.js`等）。Worklight 面向单页应用程序，如果您想要多个 HTML 文件，请确保加载了所有正确的 JavaScript（查看本机文件夹，`www/default/[appname].html`在 head 标记中）。

这是一个示例：**native/www/default/wlapp.html**

```
<!-- Static App properties + WL namespace definition -->
<script src="wlclient/js/cordova.js"></script>
<script src="common/js/wljq.js"></script>
<script src="common/js/base.js"></script>
<script src="wlclient/js/messages.js"></script>
<script src="common/js/wlcommon.js"></script>
<script src="wlclient/js/diagnosticDialog.js"></script>
<script src="wlclient/js/deviceAuthentication.js"></script>
<script src="wlclient/js/window.js"></script>
<script src="wlclient/js/worklight.js"></script>
<script src="wlclient/js/wlclient.js"></script>
<!-- More script tags... --> 
```

定义 WL.Client.invokeProcedure 的 JavaScript 文件是`wlclient/js/wlclient.js`.

# java - Netty 4 WebSocket 应用程序、线程、同步

> ID：15629327
> 
> 赞同：0
> 
> 时间：2013-03-26T04:20:45.170
> 
> 标签：java, netty

我有一个正在开发的 websocket 应用程序。[这是 Netty 处理程序的代码。](https://github.com/robottaway/nettyfun/blob/master/src/main/java/com/blueleftistconstructor/applug/UserApplicationHandler.java)

在其中，websockets 连接到一个长时间运行的线程，该线程收集它们并传回消息。

我的问题涉及同步。因此，当 Netty 应用程序向线程添加新的 ctx 时，我使用锁来同步列表的添加/删除/迭代。我认为没有其他方法可以解决此锁定问题。

所以我的问题是有没有更好的方法来处理这种与线程的同步？

此外，执行此锁定是否有任何主要的性能缺陷？这会导致什么样的问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T05:32:24.110

I think what you want to use is the DefaultChannelGroup[1] for group channels and write to all of them. Another cool thing about it is that the Channel will get removed automatically once it close.

[1] [http://netty.io/4.0/api/io/netty/channel/group/DefaultChannelGroup.html](http://netty.io/4.0/api/io/netty/channel/group/DefaultChannelGroup.html)

# node.js - 是否可以保证在 Node.js 上使用 UDP 传递消息？

> ID：15629329
> 
> 赞同：3
> 
> 时间：2013-03-26T04:21:05.570
> 
> 标签：node.js, udp

如何保证在 Node.js 上使用 UDP 传递消息？例如，如果数据包失败，我可以重新发送数据包 - 但是有没有办法识别它何时失败？另外，丢包有多常见？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-26T05:29:13.960

如果您真正想知道的是“我如何检测丢失的数据包”？然后一般的技术是让接收者为每个发送的数据包发送一个确认。如果发送器没有收到确认，那么它必须重新发送数据包。如果接收器收到重复的数据包，那么它应该丢弃重复的数据包。

基本方案是这样的：

```
TX                               RX
 ╷           data
 ╰──────────────────────────────▶

              ack               ╷
 ◄──────────────────────────────╯

 ╷           data
 ╰────────────────────── - - -         loss of data packet
               .
               .
               . timeout
               .
 ╷       data retransmit
 ╰──────────────────────────────▶

              ack               ╷
 ◄──────────────────────────────╯

 ╷           data
 ╰──────────────────────────────▶

              ack               ╷
      - - - ────────────────────╯      loss of ack packet
               .
               . timeout
               .

 ╷       data retransmit
 ╰──────────────────────────────▶

              ack               ╷
 ◄──────────────────────────────╯ 
```

这本质上是所有形式的丢包检测的基础。可以实施一些改进来改进该技术，但基本原理通常是相同的：如果接收器没有告诉您数据包已经到达，那么数据包就会丢失。

通常对算法进行的第一个改进是检查 ack 是否真的是适当的 ack，而不仅仅是路由器或信号交叉干扰或软件错误发送的一些回声。解决方案是实现一个切换位。数据包在切换位设置为一个值的情况下传输，确认包需要以适当的值（通常是相同的值）回复。如果切换位错误，则表示 ack 数据包与最后一个数据包不匹配，这意味着它与前一个数据包匹配。这意味着最后一个数据包还没有被确认，这意味着发生了严重错误，应该重新传输数据包，直到收到正确的确认。

```
TX                               RX
 ╷           data[0]
 ╰──────────────────────────────▶

              ack[0]            ╷
 ◄──────────────────────────────╯

 ╷           data[1]
 ╰──────────────────────────────▶

              ack[0]            ╷
 ◄──────────────────────────────╯     ack mismatch!

 ╷       data[1] retransmit
 ╰──────────────────────────────▶ 
```

一些现实世界的协议使用这种技术，包括用于控制工业设备和机器人的大多数协议。

下一步实际上是对上述想法的扩展。与其发送一点，为什么不发送一个数字。这样，您可以更明确地将 ack 与数据包匹配，从而更准确地检测哪个数据包丢失并需要重新传输。这种技术通常被称为滑动窗口技术，因为在某些时候数字会滚动并滑回零。因此，在无法检测到数据包丢失之前，您可以传输的最大数据包数是滑动窗口大小。

滑动窗口技术的一大优点是您可以发送大量数据包而无需等待确认。这显着提高了吞吐量：

```
TX                             RX
 ╷           data[1]
 ╰──────────────────────────────▶
 ╷           data[2]
 ╰──────────────────────────────▶
 ╷           data[3]
 ╰──────────────────────────────▶

              ack[1]            ╷
 ◄──────────────────────────────╯
              ack[2]            ╷
 ◄──────────────────────────────╯

 ╷           data[4]
 ╰──────────────────────────────▶
 ╷           data[5]
 ╰──────────────────────────────▶

              ack[3]            ╷
 ◄──────────────────────────────╯
              ack[5]            ╷
 ◄──────────────────────────────╯     ack[4] missing!
               .
               . timeout
               .

 ╷       data[4] retransmit
 ╰──────────────────────────────▶ 
```

所以上面是对丢包检测的基本技术的一个简短总结。如果您希望所有 UDP 数据包都到达目的地，这就是您需要实现的。

您应该知道 TCP 已经实现了这一点，因此如果您不想重新发明轮子，您应该真正使用 TCP。创建 UDP 是因为在某些情况下丢包是可以的（想想音频/视频流）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T04:55:17.243

来自维基百科

> UDP 适用于不需要或在应用程序中执行错误检查和纠正的目的，避免在网络接口级别进行此类处理的开销。对时间敏感的应用程序通常使用 UDP，因为丢弃数据包比等待延迟数据包更可取，这在实时系统中可能不是一个选项。 [2] 如果在网络接口级别需要纠错功能，应用程序可以使用为此目的设计的传输控制协议 (TCP) 或流控制传输协议 (SCTP)。

如果您关心，如果数据包/消息到达那里，基本上使用 TCP。否则，在应用程序级别使用 UDP 重新发明 TCP。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T04:24:35.207

UDP 是一种无法保证交付的协议。如果你想保证，你应该在UDP之上实现一些协议。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-26T04:22:59.233

无法保证在任何平台（不仅仅是 node.js）上交付特定的 UDP 数据包。如果您正在寻找的是基于 UDP 的可靠传递机制，请寻找诸如[e-net 之](https://github.com/Memeo/enet-js)类的东西或搜索可靠的 UDP。

编辑：或使用 TCP。

# php - 如何从我的服务器获取用户午夜的时间？

> ID：15629336
> 
> 赞同：0
> 
> 时间：2013-03-26T04:22:23.980
> 
> 标签：php, datetime, timezone

我有一个使用时区的用户（例如：+7 GMT）。

在 PHP 语言中：

1.  我的服务器设置为 0-GMT 的时区。
2.  我怎么能从我的服务器知道现在是那个用户的午夜呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T04:28:47.563

Assuming you have the timezine of the user saved (I'll use `America/Los_Angeles` since that is currently GMT -7 right now)

```
$user_tz = 'America/Los_Angeles'; // get from your db
$dt = new DateTime();
$dt->setTimeZone(new DateTimeZone($user_tz))
if ($dt->format('g') == 0 && $dt->format('i') == '00')
{
    echo "it's midnight";
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T04:25:14.950

您不能使用 PHP，因为它没有在用户计算机上运行，​​另一种选择是在 javascript 中使用 getTimezoneOffset()。

# c# - 使用 c# 比较后从 list<> 添加列表项

> ID：15629344
> 
> 赞同：1
> 
> 时间：2013-03-26T04:22:40.540
> 
> 标签：c#, list

我确实有列表控件，我在其中添加项目。我有另一个用于比较的通用列表说列表，我想比较列表控件的项目，如果我找到匹配项，我不想将它包含在我的另一个列表说列表中。

```
foreach( S s1 in S_list)
{
    if (ex.Count > 0)  // If list not empmty
    {
        foreach(Ex li in ex)  // 
        {
            if (s1.Name.Equals(li.ToString()))
            {
                flag=true;
                ex.Add(s1.Name);
            }
        }
    }
    else
    {
        ex.Add(s1.Name);
    }
} 
```

问题是：

它在我的前列表中造成重复，如何完成？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T04:41:30.280

我不确定我是否理解您要实现的目标，但是这段代码对我来说看起来很可疑：

```
foreach(Ex li in ex)  // 
{
    if (s1.Name.Equals(li.ToString()))
    {
        flag=true;
        ex.Add(s1.Name);
    }
} 
```

那么，`s1.Name`每次在列表中找到相同元素时，您都添加到列表中吗？这种方式`ex`将填充等于第一个添加元素的元素。

可能这样的事情会完成这项工作：

```
foreach( S s1 in S_list)
{
    boolean foundInEx = false;
    foreach(Ex li in ex)  // 
    {
        if (s1.Name.Equals(li.ToString()))
        {
            foundInEx = true;
            break;
        }
    }
    if(!foundInEx) 
    {
        ex.Add(s1.Name); //only executed when there is no such element in ex
    }
} 
```

使用 LINQ [Count 的](http://msdn.microsoft.com/en-us/library/bb535181.aspx)更短方式：

```
foreach( S s1 in S_list)
{
    if(ex.Count(li => s1.Name.Equals(li.ToString()))>0) 
    {
        ex.Add(s1.Name); //only executed when there is no such element in ex
    }
} 
```

如果您想从列表中获取唯一元素，也可以使用 LINQ [Distinct ：](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.distinct.aspx)

```
var uniqueNames = S_list.Select(x => x.Name).Distinct(); 
```

# c# - C# - 将循环中的数组初始化为不同数组中的值

> ID：15629348
> 
> 赞同：1
> 
> 时间：2013-03-26T04:22:46.477
> 
> 标签：c#, arrays, loops

我有一个名为 str 的数组，它由一系列逗号分隔的对组成。例如，str[0] 是“比尔，约翰”。我试图遍历 str 并将逗号处的每一对拆分为名为 First 和 Second 的数组。我很难做到这一点，如果有人可以提供帮助，我将不胜感激。这是我正在使用的代码：

```
while (a < length)
{
    var Pairs = str[a].Split(',');
    Console.WriteLine(a + ": " + str[a]);
    first[a] = Pairs[0];
    second[a] = Pairs[1];
    a++;
} 
```

我遇到的问题是第一[a] 和第二[a] 行。我在弄清楚这些变量应该是什么数据类型时遇到了麻烦，似乎对于我在 while 循环之前声明它们的每种类型都有不同的错误。

以下是我在循环中的变量实现上遇到的错误：
如果我将它们声明为数组：“无法将 [] 索引应用于‘System.Array’类型的表达式”

```
Array first;
Array second;
while (a < length)
{
    var Pairs = str[a].Split(',');
    Console.WriteLine(a + ": " + str[a]);
    first[a] = Pairs[0];
    second[a] = Pairs[1];
    a++;
} 
```

as ints：“无法将 [] 索引应用于‘int’类型的表达式”

```
int first;
int second;
while (a < length)
{
    var Pairs = str[a].Split(',');
    Console.WriteLine(a + ": " + str[a]);
    first[a] = Pairs[0];
    second[a] = Pairs[1];
    a++;
} 
```

作为字符串：“不能将属性或索引器'string.this[int]'分配给-它是只读的”

```
string first;
string second;
while (a < length)
{
    var Pairs = str[a].Split(',');
    Console.WriteLine(a + ": " + str[a]);
    first[a] = Pairs[0];
    second[a] = Pairs[1];
    a++;
} 
```

as vars：“必须初始化隐式类型的局部变量”（此错误在声明中，而不是在循环本身中。如果我初始化它，它会隐式转换为上述数据类型之一并抛出与它们相关的错误我提过）

```
var first;
var second;
while (a < length)
{
    var Pairs = str[a].Split(',');
    Console.WriteLine(a + ": " + str[a]);
    first[a] = Pairs[0];
    second[a] = Pairs[1];
    a++;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T04:26:14.003

基于新编辑：

好的，从不使用 Array 类型。它是内部的。要使用数组，您需要使用方括号表示法（这看起来很奇怪，但这来自 C、C++ 和 Java。）

看起来像这样：

```
string [10] first; 
```

但是，在更现代的 C# 中，您可以使用泛型。它们只是在现代面向对象的世界中更有意义。要使用它们，您需要指定它们操作的类型。在许多方面，它们的行为就像您期望数组可以工作但具有附加功能一样。要使用它们，在您的示例中，它看起来像这样：

```
ArrayList<string> first = new ArrayList<string>();
ArrayList<string> second = new ArrayList<string>();

foreach(string a in str)
{
    var Pairs = a.Split(',');
    first.Add(Pairs[0]);
    second.Add(Pairs[1]);
} 
```

* * *

在 C# 中执行此操作的简单方法是使用 foreach 循环。

```
int index = 0;

foreach(string a in str)
{
    var Pairs = a.Split(',');
    first[index] = Pairs[0];
    second[index] = Pairs[1];
    index++;
} 
```

但是，您的代码可以工作——除了我看不到长度的来源。也许你的代码应该是这样的？

```
int a = 0;
while (a < str.Length)
{
    var Pairs = str[a].Split(',');
    Console.WriteLine(a + ": " + str[a]);
    first[a] = Pairs[0];
    second[a] = Pairs[1];
    a++;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T06:01:49.530

试试这个

```
string[] str = new string[1];

        str[0] = "Bill,John";

        string[] first = new string[1];
        string[] second = new string[1];
        string[] pairs = new string[1];

        int a = 0;
        while(a<str.Length)
        {
            pairs = str[a].Split(',');
            first[a] = pairs[0];
            second[a] = pairs[1];
            Console.WriteLine(first[a] + " - " + second[a]);
            a++;
        }

        int i = 0;
        foreach (string item in str)
        {
            pairs = item.Split(',');
            int k = pairs.Count();
            first[i] = pairs[0];
            second[i] = pairs[1];
            Console.WriteLine(first[i] + " - " + second[i]);
            i++;
        } 
```

# android - 如何存储 ArrayList > 在 SharedPreferences 中？

> ID：15629355
> 
> 赞同：2
> 
> 时间：2013-03-26T04:23:28.340
> 
> 标签：android, object, arraylist, sharedpreferences, persistent-storage

我希望在 SharedPreferences 中存储一个包含 Hashmap 的 ArrayList。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-26T06:23:25.217

您可以将您的收藏转换为 json 并将其存储在共享首选项中。每当您需要获取数据时，只需获取字符串并将 JSON 转换回您的集合即可。

```
//converting the collection into a JSON
JSONArray result= new JSONArray(collection);
SharedPreferences pref = getApplicationContext().getSharedPreferences(PREF_NAME, 0);

//Storing the string in pref file
SharedPreferences.Editor prefEditor = pref.edit();
prefEditor.putString(KEY, result.toString());
prefEditor.commit();

//Getting the JSON from pref
String storedCollection = pref.getString(KEY, null);
//Parse the string to populate your collection.
ArrayList<HashMap<String, String>> collection = new ArrayList<HashMap<String, String>>();
try {
    JSONArray array = new JSONArray(storedCollection);
    HashMap<String, String> item = null;
    for(int i =0; i<array.length(); i++){
        String obj = (String) array.get(i);
        JSONObject ary = new JSONObject(obj);
        Iterator<String> it = ary.keys();
        item = new HashMap<String, String>();
        while(it.hasNext()){
            String key = it.next();
            item.put(key, (String)ary.get(key));
        }
        collection.add(item);
    }
} catch (JSONException e) {
    Log.e(TAG, "while parsing", e);
} 
```

JSON 应如下所示：

```
[
  "{test13=yeah3, test12=yeah2, test11=yeah1}",
  "{test23=yeah3, test22=yeah2, test21=yeah1}",
  "{test32=yeah2, test31=yeah1, test33=yeah3}"
] 
```

# c++ - 使用 Init() 进行内存分配是否比构造函数更好？

> ID：15629362
> 
> 赞同：1
> 
> 时间：2013-03-26T04:24:05.580
> 
> 标签：c++, exception, memory-management, constructor

假设我有类似的东西：

```
class obj001
{
public:
    obj001() {
        std::cout << "ctor == obj001" << std::endl;
    }

    ~obj001() {
        std::cout << "dtor == obj001" << std::endl;
    }
};

class obj002
{
public:
    obj002() {
        std::cout << "ctor == obj002" << std::endl;
    }

    ~obj002() {
        std::cout << "dtor == obj002" << std::endl;
    }
};

class packet001
{
public:
    packet001(): p01(NULL), p02(NULL) {
        /*p01 = new obj001;
        p02 = new obj002;
        throw "hahaha";*/

        std::cout << "CTOR == PACKET01" << std::endl;
    }

    ~packet001() {
        delete p01;
        delete p02;

        std::cout << "DTOR == PACKET01" << std::endl;
    }

    void init() {
        p01 = new obj001;
        p02 = new obj002;
        throw "hahaha";
    }

    obj001* p01;
    obj002* p02;
}; 
```

如果我这样做：

```
try
{       
    packet001 superpack;
    superpack.init();
}
catch(char* type)
{

} 
```

然后`init()`失败了，Dtor`superpack`就会被调用。

但是如果我把内存分配放在 的 Ctor 里面`superpack`，
（当然不要执行`init()`）
那么在 Ctor 失败后，Dtor 就不会被调用，所以`p01`会`p02`被泄露。

那么，最好使用类似的东西`init()`？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T04:34:33.477

使用**两阶段构造**，普通构造后跟对`init`函数的外部调用，这意味着在构造之后你还不知道你手头是否有一个有效的对象。这意味着在任何获取此类对象作为参数的函数中，您都不知道该对象是否有效。这意味着很多额外的检查和不确定性，这反过来又意味着错误和额外的工作，因此，构造函数应该建立一个功能齐全、有效的对象。

进入“功能，有效”概念的一组假设称为**类不变量**。

所以换句话说，更学术的措辞，构造函数的工作是建立类不变量，以便知道它在构造后成立。

然后在每个外部可用操作中保持对象有效，意味着它将继续保证有效。因此不需要进一步的有效性检查。该方案并非完全 100% 适用于所有对象（反例是表示文件的对象，其中任何操作都可能导致对象变得有效无效），但大多数情况下它是一个好主意并且效果很好，而且它在哪里不能直接工作，它适用于零件。

因此，在您的构造函数中，您应该通过以下方式之一确保清理：

*   使用标准库容器（或第 3 方容器），而不是直接处理原始数组和动态分配。

*   或者使用每个只管理*一个*资源的子对象。子对象可以是数据成员或基类。如果是数据成员，则可以是**智能指针**。

*   或者在最坏的情况下，使用`try`-`catch`进行直接清理。

在技​​术上也可以使用检查返回值的 C 思想在必要时调用直接清理。但上面的列表是按易用性和安全性递减的顺序排列的。C 风格的编码超出了该列表的底部。

* * *

[^(C++ 语言创建者 Bjarne Stroustrup)](http://www.stroustrup.com/3rd_safe0.html)[在他的第 3](http://www.stroustrup.com/3rd_safe0.html)[版](http://www.stroustrup.com/3rd_safe0.html)[*The C++ Programming Language的附录*](http://www.stroustrup.com/3rd_safe0.html)[*附录 E：标准库异常安全*](http://www.stroustrup.com/3rd_safe0.html)*附录中写了一些关于这个主题的文章。只需下载 PDF，然后在您的 PDF 阅读器中搜索“init(”。您应该直接进入第 §E3.5 节，关于*构造函数和不变量*；请至少阅读关于*使用的第 §E.3.5.1 节初始化（）函数*。*

 *正如 Bjarne 在那里列出的那样，……

> [...] 有一个单独的`init()`函数是一个机会
> [1] 忘记调用`init()`（§10.2.3），
> [2] 忘记测试 的成功`init()`，
> [3]`init()`多次调用，
> [4] 忘记`init()`可能会抛出一个例外，并且
> [5] 在调用`init()`.

我认为 Bjarne 的讨论非常适合初学者，整本书也是如此。

但是，请注意，根本没有提到两阶段构造的常见原因，即支持特定于**派生类的初始化，这不是 Bjarne 的图片的一部分。**这就是在许多 GUI 框架中进行两阶段初始化的原因。但是，确实存在一些具有 OK 单阶段初始化的 C++ GUI 框架，这证明这主要是一个教育问题——那些早期的 C++ 程序员根本不知道，或者不能假设他们的库用户会理解 C++ RAII。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T04:28:50.413

The best thing is to avoid these kinds of allocations altogether. You can put instances directly within a class for many things. If you really need a pointer, you can use unique_ptr and shared_ptr for automatic memory management.

In your example, this would be fine:

```
struct packet001
{
    obj001 p01;
    obj002 p02;
}; 
```

If you need them to be pointers:

```
struct packet001
{
    packet001()
      : p01(new obj001),
        p02(new obj002)
    {
    }

    std::unique_ptr<obj001> p01;
    std::unique_ptr<obj002> p02;
}; 
```

The memory will automatically be freed in the destructor, and deallocations will happen properly if an exception occurs during construction.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T04:30:23.523

Shouldn't you catch all exceptions in Ctor and clean up properly if exceptions arrive inside Ctor?

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-26T04:40:47.033

在构造函数可能多次失败并且我希望程序在失败后继续运行的情况下，我使用了两阶段构造或在构造函数清理中指出的各种其他方法；例如，试图构造一个读取文件的对象，其中文件名由用户提供。那里的构造函数可能会失败很多次，例如错误的用户输入。

但是 bad_alloc - 对于一个设计良好的程序来说应该很少见。如果内存分配失败，你到底要做什么？你的 C++ 程序很**可能**在那个时候注定要失败。为什么要在那个时候担心内存泄漏？现在您可以指出一些反例，即使在遇到错误分配后程序也可以继续运行，或者程序使用*花哨*的技术来避免错误分配，但是您的程序是其中之一吗？*

# jquery - 带翻转的暂停功能

> ID：15629365
> 
> 赞同：0
> 
> 时间：2013-03-26T04:24:34.003
> 
> 标签：jquery, delay

我有一个旋转文本和图像的脚本。我想在翻转时暂停其功能，并在推出时继续。以下是代码。请帮助或建议。

```
$(document).ready(function(e) {
function nextMsg(i) {
    if (messages.length == i) {
        i = 0;
    }
    $('#message').html(messages[i]).fadeIn(500).delay(5000).fadeOut(500, function() {
        nextMsg(i + 1);
    });
};

var messages = [
    "Hello! <img src='../images/employees/01.png' />",
    "This is a website!<img src='../images/employees/02.png' />",
    "You are now going to be redirected.<img src='../images/employees/03.png' />",
    "Are you ready?<img src='../images/employees/04.png' />",
    "You're now being redirected...<img src='../images/employees/05.png' />"
    ];

$('#message').hide();

nextMsg(0);

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T04:44:48.453

你在寻找类似的东西

```
$(document).ready(function(e) {
    var msg = 0, hoverState = false, timeout;

    function scheduleNext() {
        timeout = setTimeout(function(){
            $('#message').fadeOut(500, function() {
                nextMsg();
            });
        }, 5000);
    }

    function nextMsg() {
        if (messages.length == msg) {
            msg = 0;
        }
        $('#message').html(messages[msg++]).fadeIn(500);
        scheduleNext();
    };

    var messages = [
        "Hello! <img src='../images/employees/01.png' />",
        "This is a website!<img src='../images/employees/02.png' />",
        "You are now going to be redirected.<img src='../images/employees/03.png' />",
        "Are you ready?<img src='../images/employees/04.png' />",
        "You're now being redirected...<img src='../images/employees/05.png' />"
    ];

    $('#message').hide().hover(function(){
        if(timeout) {
            clearTimeout(timeout);
        }
    }, function(){
        scheduleNext();
    });

    nextMsg();

}); 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/QGn3c/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T04:51:16.687

我会这样做。未经测试，对不起..但希望是有道理的。

```
 var index = 0, hovered = false,
    messages = [
        "Hello! <img src='../images/employees/01.png' />",
        "This is a website!<img src='../images/employees/02.png' />",
        "You are now going to be redirected.<img src='../images/employees/03.png' />",
        "Are you ready?<img src='../images/employees/04.png' />",
        "You're now being redirected...<img src='../images/employees/05.png' />"
        ];

    $(function () {
      $(document).on('mouseenter', '#message', function () {
        hovered = true;
      })
      .on('mouseleave', '#message', function () {
        hovered = false;
      });
      window.setInterval(function () {
        if (!hovered) {
          $('#message').fadeOut(500, function () {
            $('#message').html(messages[index]).fadeIn(500);
            index = index === messages.length ? 0 : index + 1;
          });
        }
      }, 5000);

    }); 
```

# php - 如何使侧边栏和主要内容的高度一致？

> ID：15629367
> 
> 赞同：2
> 
> 时间：2013-03-26T04:24:41.987
> 
> 标签：php, html, css, wordpress

目前我正在为我的网站使用wordpress。我的侧边栏和主要内容区域的高度不对齐。如何使侧边栏的高度与主要内容一致？示例 pageA 的内容较长，但侧边栏较短，因此未使用的侧边栏区域将被空白区域填充。

下面是我的 index.php 代码。

```
<?php get_header(); ?>
  <div id="table">
      <div id="mainsidebar">
          <?php get_sidebar(); ?>
      </div>
      <div id="maincontent">
          <div valign="top">
            <?php wowslider(9); ?>
          </div>
          <div valign="bottom">
            <?php include('main-content.php'); ?>
          </div>
      </div>
  </div>
<?php get_footer(); ?>
</body> 
```

这是我上传的示例图片链接。

![http://imgur.com/uy6bOK2](../Images/a26f289805aa7fe809d22bd8f4c9e518.png)

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T04:30:52.620

If you don't mind using javascript:

```
$(function(){
    var main = $('#maincontent').height(),
        sidebar = $('#mainsidebar').height();
    if(main > sidebar){
        $('#mainsidebar').css({'min-height':main});
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T20:54:47.107

正如在[此处](https://stackoverflow.com/questions/2997767/how-do-i-keep-two-divs-that-are-side-by-side-the-same-height)发布的那样，您可以使用 CSS 执行此操作：

```
.container {
    overflow: hidden;
}
.column {
    float: left;
    margin: 20px;
    background-color: grey;
    padding-bottom: 1000px;
    margin-bottom: -1000px;
} 
```

HTML：

```
<div class="container">
    <div class="column">Some content!
        <br/>Some content!
        <br/>Some content!
        <br/>Some content!
        <br/>Some content!
        <br/>
    </div>
    <div class="column">Something</div>
</div> 
```

或尝试以下方法：

来自：[并排的两个浮动 div，高度相同](https://stackoverflow.com/questions/12556856/two-floating-divs-side-by-side-same-height)

HTML：

```
<div id="table">
    <div id="mainsidebar">
        <p>Main Sidebar Content</p>
    </div>
    <div id="maincontent">
        <p>Main Content</p>
    </div>
</div>​ 
```

CSS：

```
#table { position: relative; }

#mainsidebar { /* shorter column */
    position: absolute;
    top: 0; bottom: 0; left: 0;
    width: 38%;
    padding: 2%;
}
#maincontent { /* taller column */
    margin: 0 0 0 42%;
    width: 58%;
}​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T04:35:40.933

将`<div id="mainsidebar"></div>`and`<div id="maincontent"></div>`放入另一个 div 中。使该 div 与 div 的高度相同`maincontent`。并给`height:100%`div `mainsidebar`。

想法来自[这里](http://css-tricks.com/forums/discussion/117/sidebar-same-heightlength-as-main-content-area/p1)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-26T04:32:27.283

我为此使用[equalize.js 。](http://tsvensen.github.com/equalize.js/)超级简单的设置和出色的工作！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-04-28T11:30:29.397

您不需要使其高度相同。将表格背景设置为“白色”，看起来两者的高度相同

```
#table {background: #fff;} 
```

# java - 在浏览器上显示 java 代码的动态 Web 项目？

> ID：15629368
> 
> 赞同：1
> 
> 时间：2013-03-26T04:24:51.080
> 
> 标签：java, eclipse, swing, web-applications

我正在 Eclipse 中创建动态 web 项目。现在以下是我的java类

```
package com;

import java.awt.Color;
import java.awt.Dimension;
import java.awt.Graphics;
import java.util.LinkedHashMap;
import java.util.Map;

import javax.swing.JFrame;
import javax.swing.JPanel;

public class FirstProject extends JPanel {
    private Map<Color, Integer> bars = new LinkedHashMap<Color, Integer>();

    /**
     * Add new bar to chart
     * 
     * @param color
     *            color to display bar
     * @param value
     *            size of bar
     */
    public void addBar(Color color, int value) {
        bars.put(color, value);
        repaint();
    }

    protected void paintComponent(Graphics g) {

        int max = Integer.MIN_VALUE;
        for (Integer value : bars.values()) {
            max = Math.max(max, value);
        }

        int width = (getWidth() / bars.size()) - 2;
        int x = 1;
        for (Color color : bars.keySet()) {
            int value = bars.get(color);
            int height = (int) ((getHeight() - 5) * ((double) value / max));
            g.setColor(color);
            g.fillRect(x, getHeight() - height, width, height);
            g.setColor(Color.black);
            g.drawRect(x, getHeight() - height, width, height);
            x += (width + 2);
        }
    }

    public Dimension getPreferredSize() {
        return new Dimension(bars.size() * 10 + 2, 50);
    }

    public static void main(String[] args) {
        JFrame frame = new JFrame("Bar Chart");
        FirstProject chart = new FirstProject();
        chart.addBar(Color.red, 100);
        chart.addBar(Color.green, 8);
        chart.addBar(Color.blue, 54);
        chart.addBar(Color.black, 23);
        frame.getContentPane().add(chart);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.pack();
        frame.setVisible(true);
    }
} 
```

以下是我的 web.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" id="WebApp_ID" version="2.5">
  <display-name>com.FirstProject</display-name>
  <welcome-file-list>
    <welcome-file>com.FirstProject</welcome-file>

  </welcome-file-list>
</web-app>. 
```

现在，当我运行应用程序时，本地主机会显示浏览器上的整个代码。

如何获得所需的输出（在浏览器上显示的条形图）？我错过了什么还是我没有遵循正确的模式？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T04:31:36.873

If you want to display your output,Then you have to use the JSP, Servlet, NOT a JPANEL. JPanel cannot display data into browser.

You can use the JApplet and the display the code into browser.

You got my point?

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-04T15:01:34.633

使用[JavaFX](http://www.oracle.com/technetwork/java/javafx/overview/index.html)显示网页。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T04:56:34.880

您正在使用 JPanel.. JPanel 是为桌面应用程序开发的.. 您必须使用 Jsp 或 servlet 才能在基于 Web 的应用程序中工作.. 您必须使用 Html 标签在 Web 浏览器中显示您的设计..

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-26T04:42:51.133

我认为这不是您问题的解决方案，但这可能会帮助您解决问题。

Swing 和 JSP+Servlet 之间的显着差异

**JSP,Servlets**：它们是服务器端技术，用于生成 HTML 页面

**Swing**用于桌面应用程序（可与 JApplets 一起使用）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-10-04T14:27:57.793

正如每个人都指定的 Swing 是桌面应用程序，Jframe 不能用于 Web 应用程序。

您可以使用 jfreechart 在 Web 浏览器上仅显示静态图像。

在使用 swing 的桌面应用程序中，您可以自定义鼠标列表、键盘列表、工具提示等图表。

Jsp 只能显示静态图像文件。

# php - 在不改变任何东西的情况下将 PHP 与 Lucene 连接

> ID：15629369
> 
> 赞同：0
> 
> 时间：2013-03-26T04:24:54.377
> 
> 标签：php, zend-framework, lucene, zend-search-lucene

我正在建立一个搜索引擎。在这方面，我用 Java 构建了一个 Lucene 索引器，还用 PHP 构建了一个 Web 界面，用户将在其中提交查询。由于我的搜索是特定于地理时间的，所以通过 PHP，我跟踪了用户的当前时间和位置以及查询。现在我的问题是如何将这些值从 PHP 传递到 Java 中的 Lucene 搜索模块。

在这种情况下，我研究了 Zend。但似乎在 Zend 中我必须重写 Zend Lucene 框架中的搜索器和索引器，这与我使用的 Java Lucene 不同。我在问有没有什么方法可以用来将我的 PHP Web 界面与 Lucene 集成，而无需更改我用 Java Lucene 编写的底层索引器和搜索器。

简而言之，我想知道如何将这些 PHP 变量传递给 Java 中的底层 Lucene 搜索器，并在 PHP Web 界面中显示搜索器的输出。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T18:43:54.777

如果我了解 Zend Search，它是 Lucene for PHP 的实现（Zend 1 中的 Lucene 2.3 -- 不知道 Zend 2 的哪个 Lucene 版本）。API 不是一个直接的端口，但您可以将 Zend Search 与 vanilla Lucene 索引一起使用。谷歌“Zend 2 搜索 lucene 兼容性”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-07T14:34:21.983

Zend Framework 1 中的 Zend_Search_Lucene 和相关类是一个独立的 Lucene 实现，不依赖于任何其他库，已被 ZendSearch 替换，现在是一个[git 存储库](https://github.com/zendframework/ZendSearch)。但是，存储库不包含任何文档。**我假设Zend_Search_Lucene**的 Zend Framework 1 文档同样适用于 ZendSearch：[http](http://framework.zend.com/manual/1.12/en/zend.search.lucene.index-creation.html) ://framework.zend.com/manual/1.12/en/zend.search.lucene.index-creation.html 。我不知道为什么 ZendSearch 不是 Zend Framework 2 的一部分。

# entity-framework - 数据库中可能有 DbContext Ignore Migration/Version 数据吗？

> ID：15629370
> 
> 赞同：9
> 
> 时间：2013-03-26T04:24:55.690
> 
> 标签：entity-framework, ef-code-first

我有一个应用程序，它使用存储在单个数据库中的两个独立模型。第一个模型设置了迁移，并且是在数据库中创建迁移数据的模型。第二个是一个非常简单的模型，根本不需要模型验证——它使用的表存在并且具有适当的结构。第二个上下文在具有相同表结构的单独数据库中工作正常。

问题是在与第一个模型相同的数据库中运行时它会失败，因为它确实提供了某种模型验证。它抱怨自上次更新以来上下文已更改，但迁移数据当然不包含有关第二个上下文表的任何内容。

是否可以关闭上下文的元数据验证，并让第二个上下文按原样对表工作，因为我知道这有效？

在上下文构造函数中，但这没有效果。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-26T05:25:21.320

解决方案是使用实现一个“什么都不做”的数据库初始化程序，它基本上什么都不做。

```
public class QueueMessageManagerContextInitializer : IDatabaseInitializer<QueueMessageManagerContext>
{
    protected void Seed(QueueMessageManagerContext context)
    {            
    }

    public void InitializeDatabase(QueueMessageManagerContext context)
    {
        // do nothing
        Seed(context);
    }
} 
```

要一次性使用启动代码，请执行以下操作：

```
 [ClassInitialize()]
     public static void MyClassInitialize(TestContext testContext) 
    {
        //Database.SetInitializer<QueueMessageManagerContext>(new DropCreateDatabaseIfModelChanges<QueueMessageManagerContext>());
        Database.SetInitializer<QueueMessageManagerContext>(new QueueMessageManagerContextInitializer());
    } 
```

简单但不明显的解决方案。

**编辑：**

更简单的解决方案：只需将 NULL 传递给 SetInitializer() 方法：

```
Database.SetInitializer<QueueMessageManagerContext>(null); 
```

# javascript - 一个内容 与链接更改 - Javascript 代码冲突？

> ID：15629374
> 
> 赞同：0
> 
> 时间：2013-03-26T04:25:16.037
> 
> 标签：javascript, html, conflicting-libraries

我有一个侧边导航栏，可以更改包含我使用 JavaScript 的图片库的 div 的内容。在这个 div 中也是当前画廊集的段落描述。

我的问题不是侧边栏的 JavaScript 没有改变 div 的内容，而是画廊没有显示，而只有段落。这就是我知道我的代码正在运行的方式。

我认为侧边栏的 JS 和画廊的 JS 之间可能存在冲突。

这是画廊的代码：

```
$(function(){
    $('#myGallery').galleryView({
        panel_scale: 'fit',});
}); 
```

这是侧栏的代码：

```
 $(document).ready(function(){

            $('.options a').click(function(){
                $('#contents').load('galleries.html #' + $(this).attr('href'));
                return false;
            });

        }); 
```

HTML：

```
<div id="sidenav">
            <div>
                <ul class="ca-menu">
                    <li>
                        <span class="ca-icon">P
                        </span>
                        <div class="ca-content">
                            <h2 class="ca-main">Photography</h2>
                        </div>
                        <div class="options">
                            <a href="galleries">Nature</a><br />
                            <a href="galleries2">Quest</a><br />
                            <a href="galleries3">Forgotten</a><br />
                            <a href="galleries4">Society</a><br />
                        </div>
                    </li>
                    <li>
                        <span class="ca-icon">Y
                        </span>
                        <div class="ca-content">
                            <h2 class="ca-main">Animation</h2>
                        </div>
                        <div class="options">
                            <a href="contact1.html">Optical</a><br />
                            <a href="index1.html">Stacking</a><br />
                            <a href="works1.html">Lin</a><br />
                            <a href="works1.html">Other</a><br />
                        </div>
                    </li>
                    <li>
                        <span class="ca-icon">G
                        </span>
                        <div class="ca-content">
                            <h2 class="ca-main">Modeling</h2>
                        </div>
                        <div class="options">
                            <a href="contact1.html">First</a><br />
                            <a href="index1.html">Apartment</a><br />
                            <a href="works1.html">Still lifes</a><br />
                        </div>
                    </li>
                    <li>
                        <span class="ca-icon">O
                        </span>
                        <div class="ca-content">
                            <h2 class="ca-main">Illustration<br />Design</h2>
                        </div>
                        <div class="options">
                            <a href="contact1.html">Voice</a><br />
                            <a href="index1.html">Blocks</a><br />
                            <a href="works1.html">Design requests</a><br />
                        </div>
                    </li>
                </ul>
            </div>
        </div> 
<div id="contents">
<div class="gallerycontent">

        <ul id="myGallery">
            <li><img src="../Web Design (jp)/design final/img/photos/p1.jpg" alt="Lone Tree Yellowstone" /></li>
            <li><img src="../Web Design (jp)/design final/img/photos/p2.jpg" alt="Is He Still There?!" /></li>
            <li><img src="../Web Design (jp)/design final/img/photos/p3.jpg" alt="Noni Nectar For Green Gecko" /></li>
            <li><img src="../Web Design (jp)/design final/img/photos/p4.jpg" alt="Flight of an Eagle Owl" /></li>
            <li><img src="../Web Design (jp)/design final/img/photos/p5.jpg" alt="Winter Lollipops" /></li>
            <li><img src="../Web Design (jp)/design final/img/photos/p6.jpg" alt="Day of Youth" /></li>
            <li><img src="../Web Design (jp)/design final/img/photos/p7.jpg" alt="Sunbathing Underwater" /></li>
            <li><img src="../Web Design (jp)/design final/img/photos/p8.jpg" alt="Untitled" /></li>
            <li><img src="../Web Design (jp)/design final/img/photos/p9.jpg" alt="New Orleans Streetcar" /></li>
            <li><img src="../Web Design (jp)/design final/img/photos/p10.jpg" alt="By The Wind of Chance" /></li>
            <li><img src="../Web Design (jp)/design final/img/photos/o1.jpg" alt="Fishing on the Cloud" /></li>
            <li><img src="../Web Design (jp)/design final/img/photos/o4.jpg" alt="Blue Lagoon" /></li>
            <li><img src="../Web Design (jp)/design final/img/photos/o8.jpg" alt="Time" /></li>
        </ul> 

        <p>
Here will be all the info about the current album displayed.  Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aenean et diam eros. Nullam venenatis, augue in gravida egestas, sapien dui ornare lorem, et elementum libero libero eu lorem. Cras sollicitudin dictum massa, eu egestas dui porttitor eu.
      </p>
 </div>
 </div> 
```

谢谢你来看我。我真的不太了解 JS，所以我很高兴能够将这个问题带给专家。如果您需要更多信息，例如更多代码或在某些方面进行说明，请告诉我。

编辑：好的，这是整个 JS 部分。也许这更有用？

```
<!--GalleryView include scripts-->
<!-- First, add jQuery (and jQuery UI if using custom easing or animation -->
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js">      </script>
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.18/jquery-ui.min.js"></script>
<!-- Second, add the Timer and Easing plugins -->
<script type="text/javascript" src="js/jquery.timers-1.2.js"></script>
<script type="text/javascript" src="js/jquery.easing.1.3.js"></script> 

<!-- Third, add the GalleryView Javascript and CSS files -->
<script type="text/javascript" src="js/jquery.galleryview-3.0-dev.js"></script>
<link type="text/css" rel="stylesheet" href="css/jquery.galleryview-3.0-dev.css" /> 
<!-- Lastly, call the galleryView() function on your unordered list(s) -->
<script type="text/javascript">
$(function(){
    $('#myGallery').galleryView({
        panel_scale: 'fit'});
});
</script> 
<!--------.Load function for Gallery Navigation Bar--------->
    <script type="text/javascript" charset="utf-8">
        $(document).ready(function(){

            $('.options a').click(function(){
                $('#contents').load('galleries.html #' + $(this).attr('href'));
                return false;
            });

        });
    </script> 
```

这是点击链接之前的页面截图。画廊与段落一起存在。

[http://postimg.org/image/c8ejwcv0x/](http://postimg.org/image/c8ejwcv0x/)

然后点击链接后，新的 div 信息被加载，但只有段落是可见的，而不是画廊。

[http://postimg.org/image/uyc06bdzf/](http://postimg.org/image/uyc06bdzf/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T04:59:18.270

这里有语法错误。删除旁边的附加逗号`'fit'`。`panel_scale`是这里唯一的属性，因此您不应在其后添加逗号。逗号用于分隔多个属性。

```
$(function(){
    $('#myGallery').galleryView({
        panel_scale: 'fit',});
}); 
```

**编辑**

好，我知道了。

您应该在 load() 中添加回调以再次调用 galleryView，因为单击链接后旧内容已被删除。

```
$('#contents').load('galleries.html #' + $(this).attr('href'), '', function(){              
                $('#' + $(this).attr('href')).galleryView({panel_scale: 'fit'});
            }); 
```

# php - 将 Access SQL 转换为 MySQL

> ID：15629376
> 
> 赞同：2
> 
> 时间：2013-03-26T04:25:38.210
> 
> 标签：php, mysql, ms-access-2007

嗨，我正在尝试将一些 Access SQL 查询转换为 MySQL 查询并让它遇到问题，因为我不确定如何转换其中的一些代码。有人请帮忙。

1.

```
SELECT Notices.Promoter, 
Sum(IIf([Notices].[Notice Type]='GRANT PERMIT' Or [Notices].[Notice Type]='GRANT VARIATION' Or [Notices].[Notice Type]='GRANT PAA',1,0)) AS Granted, 
Sum(IIf([Notices].[Notice Type]='REFUSE APPLICATION',1,0)) AS Refused, 
Sum(IIf([Notices].[Permit Status]='Deemed',1,0)) AS Deemed
FROM Notices
GROUP BY Notices.Promoter; 
```

2.

```
SELECT [Notices].Promoter, 
Sum(IIf([Notices].[Notice Type]='VARIATION',1,0)) AS Variation, 
Sum(IIf([Notices].[Notice Type]='TWO HOURS AFTER',1,0)) AS [Two Hours After],
Sum(IIf([Notices].[Notice Type]='THREE MONTHS',1,0)) AS [Three Months],
Sum(IIf([Notices].[Notice Type]='THREE DAY',1,0)) AS [Three Day], 
Sum(IIf([Notices].[Notice Type]='TEN DAY',1,0)) AS [Ten Day]
FROM Notices
GROUP BY [Notices].Promoter; 
```

Access 数据库和 MySQL 数据库的标签相同，我只需要覆盖这两个数据库，以便获得相同的结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T05:10:26.380

访问转义关键字使用[]，但是mysql使用``，mysql可以使用CASE替换IIf。

```
SELECT `Notices`.Promoter, 
Sum(CASE WHEN `Notices`.`Notice Type`=`VARIATION` THEN 1 ELSE 0 END) AS Variation, 
Sum(CASE WHEN `Notices`.`Notice Type`='TWO HOURS AFTER' THEN 1 ELSE 0 END) AS `Two Hours    After`,
Sum(CASE WHEN `Notices`.`Notice Type`='THREE MONTHS' THEN 1 ELSE 0 END) AS `Three Months`,
Sum(CASE WHEN `Notices`.`Notice Type`='THREE DAY' THEN 1 ELSE 0 END) AS `Three Day`, 
Sum(CASE WHEN `Notices`.`Notice Type`='TEN DAY' THEN 1 ELSE 0 END) AS `Ten Day`
FROM Notices
GROUP BY `Notices`.Promoter; 
```

# algorithm - 使用单个旋转 kinect 的房间 360 度 3D 视图

> ID：15629377
> 
> 赞同：1
> 
> 时间：2013-03-26T04:26:08.743
> 
> 标签：algorithm, image-processing, graphics, 3d, kinect

我正在开展一个研究项目，使用放置在中心的单个旋转 kinect 构建房间的 360 度 3D 视图。

我目前的做法是使用迭代最近点算法，每旋转2到5度后，获取kinect获得的3D点云。

请注意，我们需要在 kinect 旋转时实时构建视图，因此我们需要在 kinect 小幅度旋转后捕获点云。

然而，ICP算法的计算成本很高。

我正在为上述问题寻找更好的解决方案。在这个方向上的任何帮助/指针将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T05:28:37.313

我不确定您对机器学习和计算机视觉的交叉点有多熟悉。但最近，随着机器学习的进步，一个更困难的问题得到了解决：从非结构化的图像集合中生成大面积的 3D 模型。例如，这个**“一日建成罗马”的**例子：[看这个视频，因为它可能会让你大吃一惊](http://www.youtube.com/watch?v=qYaU1GeEiR8)。

有了适当的思考，您可能想[在此视频](http://www.youtube.com/watch?v=psmCICcM-b4)中查看允许此计算有效进行的机器学习技术。

您可能想要跟进[Noah Snavely 的博士论文](http://grail.cs.washington.edu/theses/SnavelyPhd.pdf)，并查看他使用的算法以及已纳入构建此系统的其他工作。从一个旋转点重建单个房间的问题似乎是一个更容易推理的问题。再说一次，您可能只想查看[**他们软件**](http://phototour.cs.washington.edu/bundler/)中的实现:)

# c# - 如何限制每个线程的内存以避免 CPU 使用页面文件内存

> ID：15629380
> 
> 赞同：1
> 
> 时间：2013-03-26T04:26:38.823
> 
> 标签：c#, multithreading, memory

我想知道有没有办法限制每个线程的内存，这样当所有现有进程使用的内存超过可用 RAM 时，操作系统不会将虚拟地址空间移动到计算机的硬盘上，而是会等待其他线程结束并释放内存，然后只有另一个线程将启动。这样做的原因是当计算机开始使用页面文件时，它会大大减慢整个进程，它的运行速度甚至比单线程进程还要慢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T04:37:47.087

.Net 应用程序中没有“每线程”内存限制，因为内存是从共享池（每个 AppDomain）分配的。

我也相信本机进程没有这样的限制（基本上出于相同的原因 - 内存通常不会被系统用分配内存的线程标记）。

# python - 在python中附加2个十六进制值

> ID：15629382
> 
> 赞同：8
> 
> 时间：2013-03-26T04:26:52.510
> 
> 标签：python, string, hex

我试图在 python 中附加一些十六进制值，我似乎总是在数字之间得到 0x。根据我的搜索，如果不将其转换为一系列值，这是不可能的？我不知道。

```
a = 0x7b
b = 0x80000
hex(a) + hex(b) = 0x7b0x80000 
```

我不想要中间的 0x - 我需要`0x7b80000`. 有没有其他方法可以做到这一点？如果我转换为整数，我会得到两者的总和，并将其转换为十六进制是一个不同的值`0x7b80000`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-26T04:34:14.943

我认为您不想“附加”它们。使用字符串进行整数运算是个坏主意。我认为您想移位`a`到正确的位置并将它们组合在一起：

```
>>> a = 0x7B
>>> b = 0x80000
>>>
>>> hex( (a<<20) | b )
'0x7b80000' 
```

也许如果您更具体地了解这些数字是什么以及您到底想要完成什么，我可以提供一个更笼统的答案。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-26T04:50:01.190

这是一种更通用的追加`hex`//值的方式`int`。 仅适用于 的正值。`bin`
`b`

```
a = 0x7b
b = 0x80000

def append_hex(a, b):
    sizeof_b = 0

    # get size of b in bits
    while((b >> sizeof_b) > 0):
        sizeof_b += 1

    # align answer to nearest 4 bits (hex digit)
    sizeof_b += sizeof_b % 4

    return (a << sizeof_b) | b

print(hex(append_hex(a, b))) 
```

基本上你必须找到最高的设置位`b`。
将该数字与 的最高倍数对齐，`4`因为这就是`hex`字符。
将 附加`a`到之前找到的 4 的最大倍数的前面。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2020-08-03T18:12:06.483

已经 7 年了，但接受的答案是错误的，这篇文章仍然出现在谷歌搜索的首位；所以这是一个正确的答案：

```
import math

def append_hex(a, b):
 sizeof_b = 0

 # get size of b in bits
 while((b >> sizeof_b) > 0):
     sizeof_b += 1

 # every position in hex in represented by 4 bits
 sizeof_b_hex = math.ceil(sizeof_b/4) * 4

 return (a << sizeof_b_hex) | b 
```

接受的答案没有意义（您可以使用值 a=10，b=1a 来检查它）。在这个解决方案中，我们搜索最接近的 4 分频器——因为每个十六进制值都由 4 位表示——然后在这次位中移动第一个值。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-04-19T20:42:25.003

您可以在 Python 3 中使用 f 字符串格式：

```
>>> a = 0x7b
>>> b = 0x80000
>>> f'0x{a:x}{b:x}'
'0x7b80000' 
```

# opencv - 如何检索 cvPoint 值以进行进一步处理？

> ID：15629384
> 
> 赞同：1
> 
> 时间：2013-03-26T04:26:57.117
> 
> 标签：opencv

这是绘制矩形并为参数提供相应值的函数

```
void rectangle(Mat& img, Point pt1, Point pt2,const Scalar& color, int thickness=1,int lineType=8, int shift=0); 
```

用户可以使用此功能用鼠标设置 ROI，在模板匹配应用程序中在检测到的匹配上绘制矩形。我的问题是，第二个和第三个参数是这里的点。如果用户想要获得第 1 点和第 2 点的值以进行进一步处理，如何获得？！如何打印两个点值？！指向双精度或整数转换？！

任何人，清除我的疑虑。提前感谢您的帮助！

更新：

```
void mouseHandler(int event, int x, int y, int flags, void* param)

{

if (event == CV_EVENT_LBUTTONDOWN && !drag)
{
    /* left button clicked. ROI selection begins */
    point1 = Point(x,y);
    drag = 1;

}

if (event == CV_EVENT_MOUSEMOVE && drag)
{
    /* mouse dragged. ROI being selected */
    Mat img1 = mod_tempimg.clone();
    point2 = Point(x, y);
    rectangle(img1, point1, point2, CV_RGB(255, 0, 0), 1, 8, 0);
    imshow("image", img1);

}

if (event == CV_EVENT_LBUTTONUP && drag)
{

    Mat img2=mod_tempimg.clone();
    point2 = Point(x, y);
rect = Rect(point1.x,point1.y,x-point1.x,y-point1.y);
     drag = 0;
     roiImg = mod_tempimg(rect1);
    imshow("image", img2);
}

if (event == CV_EVENT_LBUTTONUP)
{
   /* ROI selected */
    select_flag = 1;
    drag = 0;
} 
```

在上面的代码中，如何从这一行检索点值？！

```
 rect = Rect(point1.x,point1.y,x-point1.x,y-point1.y); 
```

如果我知道有助于找到 rect 角度的值。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-28T10:23:15.800

即使在更新之后，我也不清楚这个问题。我不确定你到底在问什么。无论如何，据我了解，您在这里创建了一个矩形对象：

```
rect = Rect(point1.x,point1.y,x-point1.x,y-point1.y); 
```

并且您想稍后获得 rect 的角点。

`rect.tl()`给出左上角点并 `rect.br()`给出右下角点。您还可以通过以下方式获取角的 x 和 y 值：`rect.tl().x or rect.br().y`

我不知道您所说的“找到直角”是什么意思。矩形有 90 度角。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-26T04:58:20.370

当您编写用于绘制具有 2 个点的矩形的程序时，您已经掌握了这些点。

打印点：`cout << pt1`

打印点的 x 值和 y 值：`cout << pt1.x << pt1.y`

明确分配 x 值：`pt1.x = 0`

获取某个点的像素强度：`image.at<uchar>( pt1)` [用于灰度图像]

# mongodb - 存储一个可以变化很大的字符串，从很长到很短 :: Fragmentation

> ID：15629385
> 
> 赞同：2
> 
> 时间：2013-03-26T04:27:00.243
> 
> 标签：mongodb, fragmentation

好的，所以我游戏中的每个玩家在我的玩家集合中都有一个文档，每个玩家都有一个字符串，它是他们游戏状态的序列化。所以这个字符串可以很长也可以很短，并且对于每个玩家来说变化很大。

我有一个没有大量 mongo 经验的人告诉我，我应该填充集合中的每个字符串，以使它们的长度都相同。因此，就像在所有中短游戏状态字符串的末尾添加大量零一样。

所以A）这是个好主意吗？

B）我什至不完全确定如何找出游戏的最长长度，所以我不确定要填充它们多远，如果稍后游戏状态超过我的填充长度怎么办？

我的朋友说他的 mongo 集合由于碎片化而不断爆炸，当他实施填充时，他的所有问题都消失了。

哦，我怀疑这很重要，但我的代码在 php 中，显然使用了 php pecl mongo 驱动程序

感谢您的任何想法或意见！！！！

-戴夫

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T10:05:36.237

MongoDB 在创建时为文档分配空间。如果文档的大小增加，则需要将文档移动到新位置以适应更大的大小。原始空间不释放给操作系统。相反，MongoDB 最终会重用这个空间。在这种情况发生之前，可能会出现数据库过度分配或有时称为碎片的情况。

那么，你的朋友可能发生了什么：

*   插入了文件
*   当字段更新时，它们的大小有时会增加，因此文档也会增加
*   文档随着它们的增长而移动，并且数据库变得过度分配（你的朋友所说的碎片化）

通过填充文档中的字段，您的朋友能够确保文档的大小永远不会增加，因此他的数据库永远不会过度分配。

填充方法是有效的，但它也增加了应用程序的复杂性。通常，填充是针对最终将被创建的字段执行的，而不是固定值本身的大小，但想法是相同的。在您的情况下，填充听起来不是一个很好的选择，因为您无法预测字段大小。

相反，您可以考虑使用 usePowerOf2Sizes：[http ://docs.mongodb.org/manual/reference/command/collMod/](http://docs.mongodb.org/manual/reference/command/collMod/)

此配置将自动填充为文档分配的空间，并增加 MongoDB 有效重用空间的机会，代价是数据库稍大。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T09:47:52.787

> 所以A）这是个好主意吗？

要看。如果游戏文档以这样一种方式频繁更新，以至于它们会在磁盘上移动很多，那么您可能会发现填充确实有帮助，但是，考虑到莎士比亚的全部作品可以放入一个 4mb 的文档中，并留出一些空间我非常怀疑您拥有的任何字符串都会导致大量碎片；事实上，如果确实如此，我会感到非常惊讶。

理论上，可能发生的问题是，您在空闲列表中获得了大量文档，并且已删除无法重用的存储桶，从而导致出现碎片。

不仅如此，如果磁盘移动的 IO 变得持久，它可能会成为杀手。

> B）我什至不完全确定如何找出游戏的最长长度，所以我不确定要填充它们多远，如果稍后游戏状态超过我的填充长度怎么办？

那么这个想法是没用的，事实上这个想法在 90% 的时间里都是无用的，如果这是一个问题，你最好在你的文档上使用 2 大小的分配：http: [//docs.mongodb.org /manual/reference/command/collMod/#usePowerOf2Sizes](http://docs.mongodb.org/manual/reference/command/collMod/#usePowerOf2Sizes)

使用此选项将是解决碎片问题的最佳方法。

> 我的朋友说他的 mongo 集合由于碎片化而不断爆炸，当他实施填充时，他的所有问题都消失了。

我的一个朋友的朋友，一个堂兄，一个侄女也说了类似的话……你最好自己测试一下。

我敢打赌，他遇到的更大问题是索引和他执行的查询。字符串长度很少会在磁盘移动中导致如此大量的 IO 使用，以至于您实际上会使用人工填充。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T05:43:21.453

根据您的问题，我了解到这些字符串只是 blob，即它们没有以某种方式结构化以允许对其内容进行数据库查询/过滤。如果是这种情况，请将它们存储在文件中，并将文件名存储在 mongo 文档中。

# c# - 引发异常并在按钮事件中处理时，应用程序在 Real iPhone 上退出？

> ID：15629386
> 
> 赞同：1
> 
> 时间：2013-03-26T04:27:04.350
> 
> 标签：c#, mono, xamarin.ios

我有在代码中创建一个按钮（UIButton）并将其分配为子视图的代码......一切正常，除了我正在调试我的代码以记录异常，所以我创建了一个名为“创建异常”的按钮，该按钮处理程序执行真正简单的代码：

```
try
{
    object Q = null;
    Q.ToString();   
}
catch
{
    //Log.Exception ("Test", ex);   
} 
```

显然，除了获取空引用异常并捕获它之外，这不会做任何事情......并忽略它......

在模拟器中，一切都很好……在真实设备中？是的，应用程序退出时出现空引用异常！！怎么回事？

昨天更新的最新 Monotouch...

我担心我的所有异常都不会捕获并路由到 Log.Exeception() 代码...这是我首先要测试的...

这是在分配给按钮的触摸处理程序的匿名函数中。

-燧石

--- 更新，错误：

> 日期/时间：2013-03-25 22:26:59.269 -0500 操作系统版本：iPhone OS 5.1.1 (9B206) 报告版本：104
> 
> 异常类型：EXC_CRASH (SIGSEGV) 异常代码：0x00000000、0x00000000 线程崩溃：1
> 
> 线程 0 名称：调度队列：com.apple.main-thread 线程 0：0
> TestApp 0x00b5a2d8 load_method (aot-runtime.c:2661) 1 TestApp 0x00b5ae86 mono_aot_get_method (aot-runtime.c:3097) 2 TestApp 0x00b346c0 mono_jit_compile_method_with_opt (mini. c:5089) 3 TestApp
> 0x00b34c3a mono_jit_runtime_invoke (mini.c:5639) 4 TestApp
> 0x00ba2b14 mono_runtime_invoke (object.c:2790) 5 TestApp
> 0x00ba136a mono_runtime_object_init (object.c:105) 6 TestApp 0x00bdfa30
> mono_cexception:70_from.
> 0x00bdfd3e mono_get_exception_null_reference (exception.c:40) 8 TestApp 0x00b79944 mono_handle_exception_internal + 60 9 TestApp
> 0x00b7a22a mono_handle_exception (mini-exceptions.c:1894) 10 TestApp 0x00bab8f6 handle_signal_exception (exceptions-arm.c:559) 11 TestApp 0x00102794 MonoTouch_UIKit_UIControlEventProxy_Activated (UIControl.cs:30) 12 TestApp 0x009d9b14 wrapper_runtime_invoke_object_runtime_invoke_dynamic_intptr_intptr_intptr_intptr + 192 13 TestApp 0x00b34f44 mono_jit_runtime_invoke (mini.c: 5793) 14 TestApp 0x00ba2b14 mono_runtime_invoke (object.c:2790) 15 TestApp
> 0x00b2b6f0 native_to_managed_trampoline_MonoTouch_UIKit_UIControlEventProxy_Activated (:88) 16 CoreFoundation 0x355763f6 -[NSObject performSelector:withObject:withObject:] + 46 17UIKit
> 0x3306be00 -[UIApplication sendAction:to:from:forEvent:] + 56 18 UIKit 0x3306bdbc -[UIApplication sendAction:toTarget:fromSender:forEvent:] + 24 19 UIKit
> 0x3306bd9a -[UIControl sendAction:to:forEvent:] + 38 20 UIKit
> 0x3306bb0a -[UIControl(内部) _sendActionsForEvents:withEvent:] + 486 21 UIKit 0x3306c442 -[UIControl touchesEnded:withEvent:] + 470 22 UIKit
> 0x3306a924 -[UIWindow _sendTouchesForEvent:] + 312 23 UIKit
> 0x3306a312 -[UI4 UIWindow sendEvent:] + 374
> 0x3305068e -[UIApplication sendEvent:] + 350 25 UIKit
> 0x3304ff34 _UIApplicationHandleEvent + 5820

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T08:40:15.987

我认为您正在使用崩溃报告库（例如 TestFlight）。这些崩溃报告库将在 Xamarin.iOS 之前处理空引用异常，并将异常视为崩溃（从而使应用程序崩溃）。

您可以在此处阅读更好的描述：[如何防止 iOS 崩溃报告器使 MonoTouch 应用程序崩溃？](https://stackoverflow.com/questions/14499334/how-to-prevent-ios-crash-reporters-from-crashing-monotouch-apps)（这也有一个解决方案）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T08:33:54.883

正如您自己发现的那样，如果使用 抛出异常`throw new Exception ()`，它会正确地被捕获在`catch`子句中。

这里的问题在于 in和 in`null`的处理方式不同。在.NET中，对对象实例调用实例方法会引发. 调用结果为，不会产生异常或错误。`Obj-C``.NET``null``NullReferenceException``Obj-C``nil``nil`

在像您这样的某些情况下，`Xamarin.iOS`无法处理`nil`本机代码返回并崩溃。你无法捕捉到那个异常。

一些抱怨者会称这是一种泄漏的抽象，但如果你是一个积极的人，下次只需在心里记下。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T07:26:01.030

出色地...

这有效：

```
try
   {
       throw new Exception("Test Exception");
   }

catch (Exception ex)
   {
   Log.Exception ("Test", ex);  
   } 
```

这意味着通过尝试调用对象而引发的异常`ToString()`实际上`null`会占用整个应用程序！一个给编译器的人......我的测试现在可以工作了，我很高兴......

-燧石

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-26T05:48:51.157

代码是`try`块显然是不正确的。空对象不能调用`.ToString()`，并且在`catch`块中，`ex`变量来自无处。

仔细检查逻辑。

```
try {
  // crash something
} catch(Exception) {
  // caught something
} 
```

# hadoop - Hadoop Mapreduce fails with permission management enabled

> ID：15629391
> 
> 赞同：1
> 
> 时间：2013-03-26T04:27:47.857
> 
> 标签：hadoop, mapreduce, posix, hdfs

I enabled the permission management in my hadoop cluster, but I'm facing a problem sending jobs with pig. This is the scenario:

1 - I have hadoop/hadoop user

2 - I have myuserapp/myuserapp user that runs PIG script.

3 - We setup the path /myapp to be owned by myuserapp

4 - We set pig.temp.dir to /myapp/pig/tmp

But when we pig try to run the jobs we got the following error:

```
job_201303221059_0009    all_actions,filtered,raw_data    DISTINCT    Message: Job failed! Error - Job initialization failed: org.apache.hadoop.security.AccessControlException: org.apache.hadoop.security.AccessControlException: Permission denied: user=realtime, access=EXECUTE, inode="system":hadoop:supergroup:rwx------ 
```

Hadoop jobtracker requires this permission to statup it's server.

My hadoop policy looks like:

```
<property>
<name>security.client.datanode.protocol.acl</name>
<value>hadoop,myuserapp supergroup,myuserapp</value>
</property>
<property>
<name>security.inter.tracker.protocol.acl</name>
<value>hadoop,myuserapp supergroup,myuserapp</value>
</property>
<property>
<name>security.job.submission.protocol.acl</name>
<value>hadoop,myuserapp supergroup,myuserapp</value>
<property> 
```

My hdfs-site.xml:

```
<property>
<name>dfs.permissions</name>
<value>true</value>
</property>

<property>
 <name>dfs.datanode.data.dir.perm</name>
 <value>755</value>
</property>

<property>
 <name>dfs.web.ugi</name>
 <value>hadoop,supergroup</value>
</property> 
```

My core site:

```
...
<property>
<name>hadoop.security.authorization</name>
<value>true</value>
</property>
... 
```

And finally my mapred-site.xml

```
...
<property>
 <name>mapred.local.dir</name>
 <value>/tmp/mapred</value>
</property>

<property>
 <name>mapreduce.jobtracker.jobhistory.location</name>
 <value>/opt/logs/hadoop/history</value>
</property> 
```

Is there a missing configuration? How can I deal with multiples users running jobs in a restrict HDFS cluster?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T03:14:40.767

您的问题可能是暂存目录。尝试将此属性添加到 mapred-site.xml：

```
<property>
    <name>mapreduce.jobtracker.staging.root.dir</name>
    <value>/user</value>
</property> 
```

然后确保提交用户（例如'realtime'）有一个主目录（例如'/user/realtime'）并且他们拥有它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T13:10:54.173

公平调度程序旨在以用户身份运行 map reduce 作业，它为用户/组创建单独的池，但具有共享资源。乍一看，这个调度程序存在一些与某些目录权限相关的问题，不允许其他用户在作业运行所需的位置执行/写入。

因此，一种解决方案是使用容量调度程序：

```
<property>
 <name>mapred.jobtracker.taskScheduler</name>
 <value>org.apache.hadoop.mapred.CapacityTaskScheduler</value>
</property> 
```

容量调度器，使用多个命名队列，其中每个队列都有可配置数量的 map 和 reduce 槽。容量的一个好处是能够限制每个用户运行任务的百分比，以便用户共享具有配额的集群。

# winapi - I need getRTF() example for win32 api richedit control

> ID：15629393
> 
> 赞同：1
> 
> 时间：2013-03-26T04:28:39.687
> 
> 标签：winapi, richedit

I saw in MSDN that `Rich edit` control Win 32 `API` have function to get rich text format that its contents.

[http://msdn.microsoft.com/en-us/library/aa247997%28v=vs.60%29.aspx](http://msdn.microsoft.com/en-us/library/aa247997%28v=vs.60%29.aspx)

But in MSDN have no example so that I don't know how to use this function. I need get text in `Rich Edit` with full rich text format as a string. Please help me. Thanks so much.

# ruby-on-rails - Can't mass-assign, when i build a has one association

> ID：15629396
> 
> 赞同：0
> 
> 时间：2013-03-26T04:29:06.930
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

Order.rb:

```
class Order < ActiveRecord::Base
     has_one :review
end 
```

Review.rb:

```
class Review < ActiveRecord::Base
    belongs_to :order
end 
```

I need to build a review, im using this method:

```
 class OrdersController < ApplicationController
    def build_review
      @review = Review.new(:order => @order)
    end 
```

but i get this error: Can't mass-assign protected attributes: order

any ideas?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-26T04:31:30.890

You need to white list order for mass assignment via a params hash. Read [http://api.rubyonrails.org/classes/ActiveModel/MassAssignmentSecurity/ClassMethods.html](http://api.rubyonrails.org/classes/ActiveModel/MassAssignmentSecurity/ClassMethods.html)

Add this to the Review model

`attr_accessible :order`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T06:27:58.417

最好使用`@review = @order.build_review`而不是将其添加到 attr_accessible。以防万一 ;）

# .net - How does the C4.5 Algorithm handle continuous data?

> ID：15629398
> 
> 赞同：4
> 
> 时间：2013-03-26T04:29:35.357
> 
> 标签：.net, algorithm, decision-tree, continuous, c4.5

I am implementing the [C4.5 algorithm](http://en.wikipedia.org/wiki/C4.5_algorithm) in `.net`, however I don't have clear idea of how it deals "continuous (numeric) data". Could someone give me a more detailed explanation?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-26T04:51:02.153

对于连续数据，C4.5 使用阈值，其中小于阈值的所有内容都位于左侧节点，大于阈值的所有内容都位于右侧节点。问题是如何根据您提供的数据创建该阈值。诀窍是按连续变量升序对数据进行排序。然后迭代数据，在数据成员之间选择一个阈值。例如，如果属性 x 的数据是：

```
0.5, 1.2, 3.4, 5.4, 6.0 
```

您首先选择一个介于 0.5 和 1.2 之间的阈值。在这种情况下，我们可以只使用平均值：0.85。现在计算你的杂质：

```
H(x < 0.85) = H(s) - l/N * H(x<0.85) - r/N * H(x>0.85). 
```

其中l是左节点的样本数，r是右节点的样本数，N是被分裂节点的总样本数。在上面的示例中，x>0.85 作为我们的拆分，然后 l=1、r=4 和 N=5。

记住计算出的杂质差，现在计算 2 和 3 之间的分裂（即 x>2.3）。对每个拆分重复此操作（即 n-1 个拆分）。然后选择最小化 H 的分割。这意味着你的分裂应该比不分裂更纯粹。如果您不能增加结果节点的纯度，则不要拆分它。您还可以有一个最小节点大小，这样您就不会得到只包含一个样本的左侧或右侧节点。

# mysql - Insert into......table Select b as a from table2 in Mysql

> ID：15629399
> 
> 赞同：-1
> 
> 时间：2013-03-26T04:30:00.730
> 
> 标签：mysql, vb6

I migrated from `Access` to `Mysql.Codes for vb6`.

```
mobjCmd.CommandText = "INSERT INTO The123 SELECT The1 AS FirstName FROM schedule"
Set mobjRst = mobjCmd.Execute 
```

And this query is not working in Mysql.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T04:39:15.053

您需要为`The123`表格指定列

```
mobjCmd.CommandText = @"INSERT INTO The123 (FirstName) SELECT The1 AS FirstName FROM schedule"
Set mobjRst = mobjCmd.Execute 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T04:34:25.600

```
mobjCmd.CommandText = "INSERT INTO The123 VALUES("yOUR VALUES")"
MOBJCMD.COMMANDTEXT = "SELECT The1 AS FirstName FROM schedule"
Set mobjRst = mobjCmd.Execute 
```

你必须划分两个 CMD

# magento - Redirection in magento

> ID：15629405
> 
> 赞同：5
> 
> 时间：2013-03-26T04:30:52.750
> 
> 标签：magento, magento-1.7

I am working on custom module. I try to redirect my module to magento catalog category page. The link for the page is

[http://localhost/project/index.php/admin/catalog_category/index/key/cc65595b0383ca64fb245cb7de2359d8/](http://localhost/project/index.php/admin/catalog_category/index/key/cc65595b0383ca64fb245cb7de2359d8/)

I have tried following methods without success.

`$this->_redirect($this->getUrl("admin/catalog_category/"));` `$this->_redirect("admin/catalog_category/");`

Magento is removing admin from url ? final url look like that

[http://localhost/project/index.php//catalog_category/index/key/cc65595b0383ca64fb245cb7de2359d8/](http://localhost/project/index.php//catalog_category/index/key/cc65595b0383ca64fb245cb7de2359d8/)

I didn't figure out why admin is skipping from my url ? can anyone help ?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T05:15:01.193

试试下面的代码。

```
$this->_redirect("adminhtml/catalog_category"); 
```

第一个 URI（即 adminhtml）是模块名称，对于管理区域，模块名称是 adminhtml。

# javascript - redirecting site to mobile...file name?

> ID：15629406
> 
> 赞同：0
> 
> 时间：2013-03-26T04:31:11.667
> 
> 标签：javascript, html, mobile

This is my first time creating a mobile site for someone I have the javascript code all set up and when tested on my phone, it redirects it to: m.websitename.com, like I want it to. However, I have no idea what to name the file I am wanting it to redirect to? I saved the file under: mobile.html, but it isn't redirecting to it.

I don't want it to redirect saying www.websitename.com/mobile, I don't think it looks as professional.

Thanks

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T04:45:15.977

`index.html`或者`default.html`是约定。所以为什么不直接到

```
m.websitename.com/index.html 
```

并配置子域，使其`m.websitename.com`实际上指向`websitename.com/m`文件夹。这样该文件夹就可以拥有自己的索引文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T04:55:58.927

你可以有任何你喜欢的文件名。但正如 btevfik 提到的那样，要么放 index.html 要么 default.html

我推荐 index.html

您还可以在服务器配置中设置默认文件。默认情况下，大多数服务器的默认文件处理程序为 index.html。对于 Apache，它将是 index.html 或 index.php。您可以通过更改服务器配置将其更改为 mobile-handler.html 之类的内容。

因此，每当您通过[http://your-site.com](http://your-site.com)或 m.your-site.com 访问您的站点时，都会加载服务器配置中指定的默认文件。

请注意 your-site.com 和 m.your-site.com 将有不同的站点根目录，因此请求将由不同的文件处理。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T04:53:46.207

您可能希望使用您正在使用的服务器中的子域和目标设置来执行此操作（大多数网络托管公司通过他们的软件（例如 cPanel）使这很容易）。目录结构将如下所示。因此，当用户被重定向到 m.yourweb.com/ 时，它不会有 m.yourweb.com/mobie。

```
domain [directory]
      css [directory]
      js  [directory]
      index.jsp  [file]
      purchase.jsp  [file]
      ...

      subdomain [directory] <- for mobile
        css [directory]
        js  [directory]
        index.jsp  [file]
        purchase.jsp  [file] 
```

因此，当检测到移动用户时，JS 会将该用户重定向到子域（移动）而不是普通目录。另一个建议（我认为这更好）是使用与上述相同的逻辑，但是当用户被重定向到 m.yourweb.com/ 时，加载移动版 web 而不是普通 web 的 css 文件。[通过 JS 加载 css](https://stackoverflow.com/questions/574944/how-to-load-up-css-files-using-javascript)

如果您认为这很复杂，您可能有兴趣查看**CSS3 媒体查询**。这基本上会根据当前用户的屏幕更改 CSS 布局。分辨率[媒体查询教程](http://css-tricks.com/css-media-queries/)

# python - how to retrive data from odt xml file in python?

> ID：15629408
> 
> 赞同：1
> 
> 时间：2013-03-26T04:31:26.120
> 
> 标签：python

I am successfully retreving the odt xml file in python but I have no idea how to pull xml file data?

Any techniques are there for pulling the odt xml file data.

Here my code for extracting odt xml file

```
#!/usr/lib/python2.7

import sys, zipfile

if len(sys.argv) < 2:
    print "input.odt & output.xml"
    sys.exit(0)

content=""
myfile = zipfile.ZipFile(sys.argv[1])
listoffiles = myfile.infolist()
for s in listoffiles:
    if s.orig_filename == 'content.xml':
        fd = open(sys.argv[2],'w')
        content = myfile.read(s.orig_filename)
        fd.write(content)
        fd.close() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T04:54:21.417

`Any techniques are there for pulling the odt xml file data.`我假设您对解析此 xml 文件的内容感到好奇。如果是这样，我推荐[BeautifulSoup](http://www.crummy.com/software/BeautifulSoup/)。BS 用于 html 解析，但可以更改为接受 xml 数据：

BS4：

```
from bs4 import BeautifulSoup

soup = Beautifulsoup(<xml file contents>, 'xml') 
```

美丽汤3：

```
from BeautifulSoup import BeautifulStoneSoup

soup = BeautifulStoneSoup(<xml file contents>) 
```

从这里您可以根据文档（上面链接）解析数据。

# image - 如何在 WordPress 中自动在页面本身中显示页面的特色图像？

> ID：15629413
> 
> 赞同：4
> 
> 时间：2013-03-26T04:32:12.987
> 
> 标签：image, wordpress, wordpress-theming

请在以下方面需要您的帮助。

我为我的页面设置的功能图像没有显示在页面本身中。为了让我为帖子和页面设置的那些特色图像显示在相应的条目中，是否有任何插件或什么我可以做的？

任何建议都非常感谢！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-26T04:35:36.490

放：

```
<?php 
if ( has_post_thumbnail() ) {
the_post_thumbnail();
}  ?> 
```

在您希望显示特色图像的模板中。

# objective-c - 如何以编程方式找出按下的键盘向下箭头键

> ID：15629418
> 
> 赞同：0
> 
> 时间：2013-03-26T04:32:44.577
> 
> 标签：objective-c, keyboard

我知道当在键盘上按下向下箭头键时，我们可以获得键盘隐藏通知，但问题是，当我们旋转设备和键盘隐藏时，我们也会收到键盘隐藏通知，现在如何区分由于按下键而隐藏的键盘不是因为旋转。![在此处输入图像描述](../Images/81435083d989b99458ea4184a9fc6613.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T04:39:23.117

在你的 AppDelegate.m

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
      [[NSNotificationCenter defaultCenter] 
      addObserver:self selector:@selector(keyboardWillHide) 
      name:UIKeyboardWillHideNotification object:nil];
      return YES;
}

-(void) keyboardWillHide {
  NSLog(@"Bye");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T04:37:30.477

当我们点击of时，会自动调用以下`Delegate`方法。`textfield``return or arrow button``keyboard`

```
- (BOOL)textFieldShouldReturn:(UITextField *)textField 
```

# java - 嵌套循环的递归

> ID：15629419
> 
> 赞同：-4
> 
> 时间：2013-03-26T04:32:45.907
> 
> 标签：java, algorithm, recursion

j有没有办法创建以下代码的递归函数？

```
for(int i=0; i<1000000; i++){
    for(int j=0; j<1000000; j++){
        for(int k=0; k<1000000; k++){
            //Do something using i,j and k
        }
    }
} 
```

我需要它来组合每一个可能的数字序列。例如： (0,0,0) (0,0,1) (0,1,0)

通过这个循环大约需要 10 个小时，所以我必须简化它，我认为递归函数可以做到这一点。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T05:01:56.663

理论上，每个迭代循环都可以转换为递归调用（使用无限堆栈或通过[tail-call](http://en.wikipedia.org/wiki/Tail_call)），但是：

1.  递归*并不*比迭代快——时间复杂度是相同的
2.  Java 不支持[TCO](http://c2.com/cgi/wiki?TailCallOptimization)，因此不支持如此深的递归调用 - 几十个：是的，数百万个：绝对不

在这种情况下，它需要很长时间，因为它*循环了很多次*。蛮力算法是 O(n ^c )，其中 c 是 3 - 也就是说，[边界是多项式时间](http://en.wikipedia.org/wiki/Polynomial_time#Polynomial_time)（这不好），并且 n “相对较大”。这*是大量*浪费的[CPU 周期](http://4.bp.blogspot.com/-L-yq0Q3RhRs/UAQocCIoP-I/AAAAAAAAAQE/CQSUddkeBDs/s1600/4677611-burning-processor-on-motherboard.jpg)。

考虑到这么多排列*通常不适合直接使用/存储，**重新审视原始问题*并推导出具有合理时间复杂度的方法可能是有益的。例如，有一种更好的方法来计算排列..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T05:55:42.017

为什么将其转换为递归，这会使它运行得更慢..

但是你可以试试这个：

```
public static void recursiveLoop (int i, int j, int k, int w, int h, int d)
{

    /* code .. */

    /* increment i,j,k */
    if (k == d)
    {
        k = 0;
        j++;
    }

    if (j == h)
    {
        j = 0;
        i++;
    }

    if (i == w)
    {
        return; // Stop
    }

    recursiveLoop(i,j,k);

} 
```

但是编译器会把它改成这样的：

```
public static void recursiveLoop (int i, int j, int k, int w, int h, int d)
{

    do
    {

        /* code .. */

        /* increment i,j,k */
        if (k == d)
        {
            k = 0;
            j++;
        }

        if (j == h)
        {
            j = 0;
            i++;
        }

    }while (i != w);

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T05:30:56.437

考虑下面的递归，详细看这个。 [递归比循环快吗？](https://stackoverflow.com/questions/2651112/is-recursion-ever-faster-than-looping)

因此，当您标记 Java 时，递归比迭代更昂贵，因为必须分配堆栈内存。因此，如果您的意图是记录这些排列，那么最好将它们存储到文件中以备后用。这取决于您的问题陈述，可以为此指定更准确的答案。

# sql - 在 SQL 语句中使用 ABS 和十进制算术

> ID：15629422
> 
> 赞同：0
> 
> 时间：2013-03-26T04:33:16.010
> 
> 标签：sql, decimal

我有一排可以从 0 到 1 的浮点类型。我想按最接近 0.5 的结果排序。所以我尝试了：

```
SELECT * FROM a ORDER BY ABS(a.value - 0.5) desc 
```

但它不起作用。它只是返回 0，然后是 1，然后是 0（看起来是随机的）。有任何想法吗？

表 a 有一行叫做 value，例如：

```
A value = 1
B value = 0
C value = 0.5
D value = 0.3 
```

我希望它按以下顺序返回它们：

```
C (ABS(value - 0.5) = 0)
D (ABS(value - 0.5) = 0.2)
A (ABS(value - 0.5) = 0.5)
B (ABS(value - 0.5) = 0.5) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T05:23:42.267

```
 select abs((a.value-0.5)) as x from a order by x asc;
    x
    ----------
    0.0
    0.2
    0.5
    0.5 
```

这假设值的类型是浮点数而不是整数，我测试了浮点数，但不是整数。

# c - C 语言 - 如何在我的代码中修复我的二进制搜索功能？

> ID：15629425
> 
> 赞同：-2
> 
> 时间：2013-03-26T04:34:05.817
> 
> 标签：c, search, file-io, binary-search, file-read

这就是我所拥有的

```
#include <stdio.h>
#include <stdlib.h>

void print(int a[], int size);     
void sort (int a[], int size);     
void swap (int* a, int *b);     
int search(int searchValue, int a[], int size);     

int main()     
{     
    float avg = 0;     
    float sum = 0;     
    float arrayr [50];     
    int i = 0;     
    int j = 0;     
    int a;     
    int b;     
    int sid = 1;     
    int number;     
    int size = sizeof(arrayr) / sizeof(int);     
    sort(arrayr,size);     
    print(arrayr,size);     

    FILE* fp;
    fp =  fopen("A7data.txt","r");
    if(fp==0)
    {
        printf("File does not exist");
        exit(1);
    }

        for (i=0; i<50; i++)
    {
        fscanf(fp,"%d %*d %*d %*d %*d %*d %*d %*d %*d %*d %*d %*d %*d",&arrayr[i]);
    }
    sort(arrayr,50);
        //printf("%d",a[i]);
        printf("Enter student ID -> ");
        scanf("%d",&sid);
        if (sid == 0)
        {
        printf("%d is not a valid student ID\n",search(number,arrayr,size));
        }
        else
        {
        printf("%d is a valid student ID\n",search(number,arrayr,size));
        }

return 0;
}

void print (int a[], int size)
{
    int i;
    int sid = 0;
    int number;
    int arrayr;
    //for (i = 0; i < size; i++)

    //printf("\n");
}

void sort (int a[], int size)
{
    int i,j;
        for (i = 0; i < size - 1; i++)
    {
        for (j = i; j < size; j++)
    {
        if (a[j]<a[i]) swap(&a[i],&a[j]);
    }
}
}

void swap (int* a, int *b)
{
    int temp;
    temp = *a;
    *a = *b;
    *b = temp;
}

 int search(int searchValue, int a[], int size)
{
        int low, high, middle;
        int sid;
        low = 0;
        high = size-1;
        while (low <= high)
{
    middle = (low + high) / 2;
    if (searchValue < a[middle])
    {
        high = middle - 1;
    }
    else if (searchValue > a[middle])
    {
        low = middle + 1;
    }
    else
    {
        return middle;
    }
}
return sid;
} 
```

这是我的输出

```
 Enter student ID -> 20119084

 2001840454 is a valid student ID

Process returned 0 (0x0)   execution time : 2.816 s
Press any key to continue. 
```

作业指导是阅读作业 7 学生数据文件的副本。它正好有 50 条记录。将学生 ID（文件中的第 1 列）存储到一个数组中。按升序对数组进行排序。编写一个二分查找函数来演示以下内容。

56874837 是有效的学生证。56874838 不是有效的学生证。

[http://voyager.deanza.edu/~bentley/ass7data.html](http://voyager.deanza.edu/~bentley/ass7data.html) 这是我们应该读取的数据文件

我的代码没有显示正确的输出，我认为这是因为我的二进制搜索函数或我的函数中的某些东西是错误的。我不确定我做错了什么，因为我的输出没有像方向显示那样显示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T04:51:11.657

对于初学者，您传递`number`给`search`但`number`从未设置。剩下的，花点精力，使用调试器或 IDE 或`printf`语句来弄清楚你的代码在做什么......从那里你可以弄清楚如何纠正它。

# sql - 获取带有或条件的重复行

> ID：15629434
> 
> 赞同：0
> 
> 时间：2013-03-26T04:34:40.493
> 
> 标签：sql

我正在尝试查找在特定时间段内工作的员工以及他们在该时间段内的工作时间。我的查询必须将员工 id 为 pk 并使用有效日期和过期日期作为员工职位的时间度量的员工表连接到工资期 id 编号为 pk 并且还使用有效日期和到期日期的计时表。

员工表中到期日期的问题是，如果员工当前受雇，则日期为“12/31/9999”。我正在寻找在某一年工作的员工和当前员工以及他们按工资期分开的工作时间。

当我在 OR 语句中将这种情况考虑在内时，我会得到重复的员工，这些员工在我正在寻找的时间段及以后工作，以及“12/31/9999”和有效的重复记录那个时间段的员工。

这是我正在使用的查询：

```
SELECT
            J.EMPL_ID
            ,J.DEPT
            ,J.UNIT
            ,J.LAST_NM
            ,J.FIRST_NM
            ,J.TITLE 
            ,J.EFF_DT
            ,J.EXP_DT
            ,TM1.PPRD_ID
            ,TM1.EMPL_ID
            ,TM1.EXP_DT
            ,TM1.EFF_DT

            --PULLING IN THE DAILY HRS WORKED
             ,(SELECT NVL(SUM(((to_number(SUBSTR(TI.DAY_1, 1
                            ,INSTR(TI.DAY_1, ':', 1, 1)-1),99))*60)+
                (TO_NUMBER(SUBSTR(TI.DAY_1
                            ,INSTR(TI.DAY_1,':', -1, 1)+1),99))),0)
              FROM PPRD_LINE TI
              WHERE
              TI.PPRD_ID=TM1.PPRD_ID
              ) "DAY1"
             ---AND THE REST OF THE DAYS FOR THE WORK PERIOD
    FROM    PPRD_LINE TM1
    JOIN    EMPL J ON TM1.EMPL_ID=J.EMPL_ID

 WHERE
    J.EMPL_ID='some id number' --for test purposes, will need to break down to depts-
    AND
    J.EFF_DT >=TO_DATE('1/1/2012','MM/DD/YYYY')
    AND
    (
    J.EXP_DT<=TO_DATE('12/31/2012','MM/DD/YYYY')
    OR
    J.EXP_DT=TO_DATE('12/31/9999','MM/DD/YYYY') --I think the problem might be here???
    )

GROUP BY

    J.EMPL_ID
    ,J.DEPT
    ,J.UNIT
    ,J.LAST_NM
    ,J.FIRST_NM
    ,J.TITLE 
    ,J.EFF_DT
    ,J.EXP_DT
    ,TM1.PPRD_ID
    ,TM1.EMPL_ID
    ,TM1.DOC_ID
    ,TM1.EXP_DT
    ,TM1.EFF_DT

ORDER BY
    J.EFF_DT
    ,TM1.EFF_DT
    ,TM1.EXP_DT 
```

我很确定我错过了一些简单的东西，但在这一点上，我无法只见树木不见森林。那里的任何人都可以指出我正确的方向吗？

重复记录的示例：

对于 2012 年的员工 1：

```
Empl_ID Dept Unit   Last     First   Title   Eff Date Exp Date   PPRD ID Empl_ID
00001   04   012    Babbage  Charles Somejob 4/1/2012 10/15/2012 0407123 00001 

Exp Date_1 Eff Date_1
4/15/2012  4/1/2012 
```

此记录重复 3 次，并超过 2012 年的支付期，直至 2013 年的当前支付期

我用来转换时间的子查询能够将小时和分钟加在一起以进行比较。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T14:40:38.360

我会大胆猜测一下，看看这是否是你想要的，记住我无法测试，所以可能有错别字。

如果是这样，尤其是如果不是，您应该阅读常见问题解答中有关如何提出好问题的信息。如果这是您试图理解的内容，您的问题应该在大约 10 分钟内得到回答。因为不清楚你在问什么，没有人能回答你的问题。

您应该在问题中包含输入和输出以及预期输出。您提供的数据不是 select 语句的输出（它没有 DAY1 列）。

```
SELECT
   J.EMPL_ID
   ,J.DEPT
   ,J.UNIT
   ,J.LAST_NM
   ,J.FIRST_NM
   ,J.TITLE 
   ,J.EFF_DT
   ,J.EXP_DT
   ,TM1.PPRD_ID
   ,TM1.EMPL_ID
--  ,TM1.EXP_DT  Can't have these if you are summing accross multiple records.
--   ,TM1.EFF_DT
   --PULLING IN THE DAILY HRS WORKED
   ,NVL(SUM(((to_number(SUBSTR(TM1.DAY_1, 1,INSTR(TM1.DAY_1, ':', 1, 1)-1),99))*60)+
             (TO_NUMBER(SUBSTR(TM1.DAY_1,INSTR(TM1.DAY_1,':', -1, 1)+1),99))),0)
               "DAY1"
             ---AND THE REST OF THE DAYS FOR THE WORK PERIOD
FROM    PPRD_LINE TM1
JOIN    EMPL J ON TM1.EMPL_ID=J.EMPL_ID
WHERE
  J.EMPL_ID='some id number' --for test purposes, will need to break down to depts-

  AND J.EFF_DT >=TO_DATE('1/1/2012','MM/DD/YYYY')  
  AND(J.EXP_DT<=TO_DATE('12/31/2012','MM/DD/YYYY') OR J.EXP_DT=TO_DATE('12/31/9999','MM/DD/YYYY'))
GROUP BY
    J.EMPL_ID
   ,J.DEPT
   ,J.UNIT
   ,J.LAST_NM
   ,J.FIRST_NM
   ,J.TITLE 
   ,TM1.PPRD_ID
   ,TM1.EMPL_ID
   ,TM1.DOC_ID
ORDER BY
    MIN(J.EFF_DT)
   ,MAX(TM1.EFF_DT)
   ,MAX(TM1.EXP_DT) 
```

# javascript - Javascript幻灯片不会停止

> ID：15629437
> 
> 赞同：0
> 
> 时间：2013-03-26T04:34:56.120
> 
> 标签：javascript

我正在创建一个网页，其中包含通过单击按钮激活的幻灯片。当我第一次单击该按钮时，我希望在实际运行幻灯片放映之前提示用户他们希望它以多快的速度更改为下一个图像。下次单击该按钮时，我希望幻灯片停止。现在第一部分正在工作，但是当我第二次单击它时，它只会再次显示提示并且不会停止幻灯片。谁能告诉我我做错了什么？这是给定函数的代码：

```
function slideShow(){
var temp2 = 0;
  if (temp2 == 0){
    var speed = prompt("How fast would you like to the slideshow to go?");
    var timerID = setInterval("clock()",speed);
    temp2 = 1;
  }
  else if (temp2 == 1){
  clearInterval(timerID);
  temp2 = 0;
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T04:38:22.003

移动

```
var timerID 
```

到函数声明之外。

```
var timerID
function slideShow(){
var temp2 = 0;
  if (temp2 == 0){
    var speed = prompt("How fast would you like to the slideshow to go?");
    timerID = setInterval("clock()",speed);
    temp2 = 1;
  }
  else if (temp2 == 1){
  clearInterval(timerID);
  temp2 = 0;
  }
} 
```

那将是最简单的方法。每次调用该函数时，您基本上只是将那个变量扔掉。

* * *

只是其他建议。你真的不想在 setInterval 中使用字符串。

# iphone - 如何创建和使用协议，如果不止一个类实现

> ID：15629449
> 
> 赞同：-1
> 
> 时间：2013-03-26T04:37:06.357
> 
> 标签：iphone, ios, objective-c, xcode, cocoa-touch

我想在我的项目中创建一个**协议**为了符合一些参数，我要使用三个类，所以我希望这些类符合协议。

所以请帮助我。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T04:45:13.883

我只是给出了如何创建**协议的基本思路**

[另请阅读此问题](https://stackoverflow.com/questions/626898/how-do-i-create-delegates-in-objective-c)

```
#DetailViewController.h

#import <UIKit/UIKit.h>

@protocol MasterDelegate <NSObject>
-(void) getButtonTitile:(NSString *)btnTitle;
@end

@interface DetailViewController : MasterViewController

@property (nonatomic, assign) id<MasterDelegate> customDelegate; 

#DetailViewController.m

if([self.customDelegate respondsToSelector:@selector(getButtonTitile:)])
{
          [self.customDelegate getButtonTitile:button.currentTitle];    
}

#MasterViewController.m

create obj of DetailViewController

DetailViewController *obj = [[DetailViewController alloc] init];
obj.customDelegate = self;
[self.navigationController pushViewController:reportTypeVC animated:YES];

and add delegate method in MasterViewController.m for get button title.

#pragma mark -
#pragma mark - Custom Delegate  Method

-(void) getButtonTitile:(NSString *)btnTitle;
{
    NSLog(@"%@", btnTitle);

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T04:44:56.287

**正如你对一个类所做的那样，将它用于三个甚至几十个类，你的类符合多少协议并不重要。**

如您所见，我在这里随机添加了许多委托协议

```
@interface DetailViewController : UIViewController <UISplitViewControllerDelegate, NSCoding, UIAlertViewDelegate, UITableViewDataSource, UITableViewDelegate, UITextFieldDelegate>

@property (strong, nonatomic) id detailItem;

@property (weak, nonatomic) IBOutlet UILabel *detailDescriptionLabel;
@end 
```

要创建协议，请参阅[此处](https://stackoverflow.com/questions/626898/how-do-i-create-delegates-in-objective-c)

# php - 使用循环、电子邮件订阅和 PHP 输入表单数组

> ID：15629451
> 
> 赞同：1
> 
> 时间：2013-03-26T04:37:18.893
> 
> 标签：php, arrays, forms

我主要有一个表单，以便可以处理多个名称和电子邮件地址，这个其他 PHP 文件处理该表单，以便它使用 mail() 发送到这些电子邮件。我在表单上使用了循环，以便将输入字段重复到多个条目然后提交。所以表格看起来像这样：

```
<?php for ($i = 1; $i <= 10; $i++) { ?> // here's the PHP loop

<input type="text" 
  id="<?php echo 'firstname'.$i ?>" name="<?php echo 'firstname'.$i; ?>"
  value="<?php echo $_GET['firstname']; ?>" />  
      value?
<br/>
<input type="text" id="<?php echo 'lastname'.$i; ?>" 
  name="<?php echo 'lastname'.$i; ?>" 
  value="<?php echo $_GET['lastname']; ?>" />

<input type="text" id="<?php echo 'email'.$i; ?>" 
  name="<?php echo 'email'.$i; ?>" 
  value="<?php echo $_GET['email']; ?>"/>
<?php } ?> // END of loop

<input class="button" type="submit" value="Submit" name="submit" /> 
```

所以现在我对处理上述内容的第二个 PHP 文件感到两次困惑。我如何在每封电子邮件中回显一条消息，但使用上面输入字段中的值。我不确定我是否使用爆炸，因为输入的值在数组中？换句话说，每封电子邮件都必须分别向它们发送一条消息。

```
extract($_GET, EXTR_PREFIX_SAME, "get");

#construct email message
$email_message = "Name: ".$firstname." ".$lastname."
Email: ".$email;

#construct the email headers
$to = "email something";
$from = $_GET['email'];
$email_subject = "Registration Details";

#now mail
mail($to, $email_subject, $email_message, "From: ".$from);

echo "<b>Thank you ".$firstname." ".$lastname."! You are now registered.</b><br/><br/>";
echo "Here's your registration information:<br/><br/>";

echo "Email: ".$email."<br/>"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T04:55:39.687

这是概念：您需要使用数组命名输入表单以保留值，因此您可以单独发送消息。所以，你会有一个像这样的输入表单：

```
for($i = 1; $i <= 10; $i++)
{
<input name="txtname[$i]">
<input name="txtnickname[$i]">
<input name="txtemail[$i]">
} 
```

在您的 php 代码过程中，上述表格如下：

```
 for($i = 1; $i <= 10; $i++)
   {
       mail($_POST['txtemail'][$i], 'Thx' . 
            $_POST['txtnickname'][$i], 'Body' . $_POST['txtname'][$i]
   } 
```

让我知道它是否有效！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T04:45:24.880

请取一个隐藏字段名称计数，并将其中的迭代总数作为值传递。

```
<?php
extract($_GET, EXTR_PREFIX_SAME, "get");
for($i=0;$i<$count;$i++){
#construct email message
$email_message = "Name: ".$firstname.$i." ".$lastname$i."
Email: ".$email.$i;

#construct the email headers
$to = "email something";
$from = $email.$i;
$email_subject = "Registration Details";

#now mail
mail($to, $email_subject, $email_message, "From: ".$from);

echo "<b>Thank you ".$firstname.$i." ".$lastname.$i."! You are now registered.</b><br/><br/>";
echo "Here's your registration information:<br/><br/>";

echo "Email: ".$email.$i."<br/>";
}
?> 
```

# css - 页脚 CSS 定位

> ID：15629456
> 
> 赞同：-2
> 
> 时间：2013-03-26T04:37:58.303
> 
> 标签：css

我到处寻找，似乎找不到答案 - 显然我做错了什么。这是我的页脚CSS：

```
#footer { 
   position: fixed; 
   bottom: 0px;
   left: 0px;
   margin: 0px;
   width: 100%;
   height: 60px;
   padding-top : 10px;
   background-image:url(../images/bottom_bg.jpg);
   background-repeat:repeat;
   text-align:center;
   border-top: 5px solid #000;
   font-family:Verdana, Arial, Helvetica, sans-serif;
   font-size:12px;
   font-weight:bold;
   color:#FFCC66;
} 
```

[www.bevwebdev.com/examples.php](http://www.bevwebdev.com/examples.php)

*   我到底做错了什么？我试过z-index，设置高度只适用于表格，位置：绝对只是把它贴在我较短的页面中间——真是头疼！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T04:48:51.087

问题是当您向下滚动时，页脚会覆盖主容器的底部。解决方案是为`container`div 添加底部边距。

```
#container {
  margin-bottom: 100px;
} 
```

这会在 div 下方放置 100px 的空白，因此，当位于页面的最底部时，所有文本仍会显示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T04:51:34.580

如果您希望页面底部不隐藏在页脚下，请添加以下 CSS：

```
body {
    padding-bottom:100px;  
} 
```

或者一些适合你的号码。这会将正文内容向上推一点，以便您可以看到它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T04:49:21.773

如果您总是希望页脚低于其他所有内容，则应该使用`position: relative`

如果您总是希望页脚固定在浏览器的底部，您应该使用`position: fixed`

如果您总是希望页脚与另一个元素或页面顶部有一定距离，您应该使用`position: absolute`

# jquery - jQuery克隆选择的选项

> ID：15629460
> 
> 赞同：-3
> 
> 时间：2013-03-26T04:38:29.550
> 
> 标签：jquery, multi-select

我有一个多重选择，定义如下：

```
<select id="options" multiple="multiple">
  <option value="1">Opt 1</option>
  <option value="2">Opt 2</option>
  <option value="3">Opt 3</option>
</select> 
```

现在，如果我选择选项 1 和 3，我只想将选定的项目附加到另一个空的选择元素，所以从：

```
<select id="options2">

</select> 
```

我可以获得：

```
<select id="options2">
  <option value="1">Opt 1</option>
  <option value="3">Opt 3</option>   
</select> 
```

你能帮我吗？非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T05:01:00.190

尝试这个：

**HTML：**

```
<select id="dropdown" multiple="multiple">
    <option value="1">Opt 1</option>
    <option value="2">Opt 2</option>
    <option value="3">Opt 3</option>
</select>
<select id="options2"></select> 
```

**脚本：**

```
$(document).ready(function(){
    $('#dropdown').on('change',function(){
        $("#dropdown option:selected").each(function(){
            if(!$("#options2 option[value="+$(this).val()+"]").length)
               $("#options2").append($(this).clone());            
        });
    });    
}); 
```

**小提琴：http:** [//jsfiddle.net/5BU4T/3/](http://jsfiddle.net/5BU4T/3/)

# drupal-6 - drupal块variable_set不保存选择值

> ID：15629461
> 
> 赞同：0
> 
> 时间：2013-03-26T04:38:34.153
> 
> 标签：drupal-6, drupal-modules

我正在尝试创建一个从选择框中保存值的块。但是，重新加载后， variable_get 不会返回保存的值......所以 variable_set 接缝不起作用。

我在这里做错了什么？(Drupal 6)

```
function get_courses(){
   global $user;     
    $my_items_sql = 'SELECT course_node.uid, ';
                     //get the course nid
                     $my_items_sql .='course_node.nid as course_nid, ';
                     //get the course title
                     $my_items_sql .='course_node.title as course_title ';
                     $my_items_sql .=' from node as course_node where course_node.type="course" and course_node.uid = "'.$user->uid.'"';
                     $my_items_sql .=' order by course_node.nid; ';
                     $my_items_data= db_query($my_items_sql);

                     $my_courses = array();
                     while ($row = db_fetch_array($my_items_data)) {

                            //$course_node = node_load($row["course_nid"]);
                            $my_courses[$row["course_nid"]]=$row["course_title"];
                     }
                     //$variables['courses']=$my_courses;
                     //drupal_add_js(array('courses'=>$my_courses), "setting");

         return $my_courses;
}
function front_page_block($op='list',$delta = 0, $edit = array()) {

    $course_options = array();
    $courses = get_courses();
    $tmp = $courses;
    $first_course = $tmp;
    reset($first_course );
    $first_course_nid = key($first_course);

    $first_course_nid = key($first_course);
    switch($op){
        case 'list':
            $blocks[0]['info']= t('Course Data Loader');
            $blocks[0]['cache']= BLOCK_NO_CACHE;
            return $blocks;
        case 'configure':
            $form['course_to_display'] = array(
            '#type' => 'select',
            '#description' => t('Display flashcards from which deck on the front page?'),
            '#options' => $courses,
            '#default_value'=>variable_get('front_page_deck_to_load', $first_course_nid)
            );
            return $form;
        case 'save': 
            variable_set('front_page_deck_to_load', 
                $edit['front_page_deck_to_load']);

            break;

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T06:05:52.320

首先检查，在调用之前为**$edit['front_page_deck_to_load']**设置了什么值

**variable_set('front_page_deck_to_load', $edit['front_page_deck_to_load']);** 功能。

如果**$edit['front_page_deck_to_load']**的值设置正确，则 variable_set 正在工作。

现在的问题是，$ **form['course_to_display']****的**'#default_value'设置不正确。请修改**get_courses()**函数如下，然后重试：

 ****```
function get_courses(){
   global $user;     
    $my_items_sql = 'SELECT course_node.uid, ';
                     //get the course nid
                     $my_items_sql .='course_node.nid as course_nid, ';
                     //get the course title
                     $my_items_sql .='course_node.title as course_title ';
                     $my_items_sql .=' from node as course_node where course_node.type="course" and course_node.uid = "'.$user->uid.'"';
                     $my_items_sql .=' order by course_node.nid; ';
                     $my_items_data= db_query($my_items_sql);

                     $my_courses = array();
                     while ($row = db_fetch_array($my_items_data)) {

                            //$course_node = node_load($row["course_nid"]);
                            $my_courses[$row["course_title"]]=$row["course_title"];
                     }
                     //$variables['courses']=$my_courses;
                     //drupal_add_js(array('courses'=>$my_courses), "setting");

         return $my_courses;
} 
```

仅供参考：请关注 http://drupal.org/node/240783 上的评论[#](http://drupal.org/node/240783) **1******

# reporting-services - SSRS 最终用户自定义报告

> ID：15629462
> 
> 赞同：1
> 
> 时间：2013-03-26T04:38:47.323
> 
> 标签：reporting-services

我是 SSRS 新手，正在自学 SSRS，但我想知道是否可以使用 SSRS 创建报告，让最终用户（没有 SQL 技能）可以在 GUI 上自行生成报告选择多个数据源、多个表和列？我目前的想法是我可以输入一堆参数，但我认为它不是有效的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T05:14:33.333

SSRS 包含一个名为[Report Builder](http://technet.microsoft.com/en-us/sqlserver/ff660783)的功能，它基本上可以按照您的建议进行操作。它使用 Office 风格的 Ribbon 界面，使非技术用户可以相当简单地生成报告。

# dynamics-crm-2011 - 切换到 Orion 的比较表

> ID：15629469
> 
> 赞同：1
> 
> 时间：2013-03-26T04:39:23.653
> 
> 标签：dynamics-crm-2011, dynamics-crm-2013

我找不到说明 Polaris 和 Orion 版本之间的编程差异的资源。我已经在谷歌上搜索了几天了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T07:30:28.860

可能您已经阅读了 Jukka Niiranen 撰写的这篇文章

[下一个 Dynamics CRM 用户体验：Orion](http://niiranen.eu/crm/2013/03/the-next-dynamics-crm-user-experience-orion/)

我认为 Gemini 版本将带来（至少）将 Xrm javascript 与新表单一起使用的可能性（实际上，不能预填充字段或执行一些显示/隐藏逻辑真的很遗憾）并提供将替换功能区的 xml 定义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T04:41:32.973

我不确定是否有这样的文件。在我们开始使用猎户座之前，我们必须先通过双子座。鉴于迄今为止路线图与现实之间的不一致，Orion 也可能被称为 CRM-2014。

# android - 将前一个（后一个）图像按钮添加到网格视图

> ID：15629475
> 
> 赞同：0
> 
> 时间：2013-03-26T04:39:49.837
> 
> 标签：android, android-layout, android-intent, android-widget

我有我的布局 xml 文件：

```
<?xml version="1.0" encoding="utf-8"?>
 <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/relativeLayout1"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:background="@drawable/screen_background">      

 <LinearLayout
                android:id="@+id/linearLayout1"
                android:layout_width="wrap_content"
                android:layout_height="fill_parent"
                android:orientation="vertical"
                android:layout_alignBottom="@+id/linearLayout01"
                android:layout_marginBottom="55dp">

<ImageView
                  android:id="@+id/imageView1"
                  android:layout_width="fill_parent"
                  android:layout_height="50dp"
                  android:src="@drawable/tone_movies_banner"
                  android:layout_alignParentTop="true"
                  android:scaleType="fitXY"/>

<GridView
    android:id="@+id/grid_view"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:numColumns="auto_fit"
    android:columnWidth="90dp"
    android:horizontalSpacing="10dp"
    android:verticalSpacing="10dp"
    android:gravity="center"
    android:stretchMode="columnWidth" >  

</GridView>

<LinearLayout
            android:id="@+id/linearLayout01"
            android:layout_width="fill_parent"
            android:layout_height="50dp"          
            android:layout_alignParentBottom="true"
            android:layout_marginBottom="5dp">
    </LinearLayout>

</LinearLayout>
</RelativeLayout> 
```

我想在上面的布局 xml 文件中添加一个后退图像按钮？我在哪里可以添加此语句

```
<ImageButton
android:id="@+id/back_btn"
android:layout_width="30dp"
android:layout_height="190dp"
android:layout_alignParentLeft="true"
android:layout_centerVertical="true"
android:layout_marginLeft="20dp"
android:background="@drawable/button_movielist_back"
/> 
```

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T04:45:32.877

它完全取决于你（你的设计，屏幕布局）它应该出现在哪里。目前看到您的布局，您可以将其添加到您的`LinearLayout`( **id=linearLayout1** ) 上方。

另外，如果您可以降低后退按钮的高度，那就太好了。

```
android:layout_height="19dp" //instead of 190dp. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T05:51:45.987

之后添加

```
<?xml version="1.0" encoding="utf-8"?>
 <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/relativeLayout1"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:background="@drawable/screen_background"> 

 <ImageButton
android:id="@+id/back_btn"
android:layout_width="30dp"
android:layout_height="190dp"
android:layout_alignParentLeft="true"
android:scaleType="fitXY"
android:layout_marginLeft="20dp"
android:background="@drawable/button_movielist_back"
/> 
```

如果你想要它在屏幕的**左上角**

或替换`android:layout_alignParentLeft="true"`为`android:layout_alignParentRight="true"`

如果你想要它在屏幕的**右上角**

后退按钮一般只在这两个位置找到。。

休息它纯粹是主观的，你发现它给你的应用程序一个漂亮的外观

# asp.net - HttpApplicationState.RemoveAll() 线程安全吗？

> ID：15629478
> 
> 赞同：2
> 
> 时间：2013-03-26T04:39:59.343
> 
> 标签：asp.net, .net, http-caching, httpapplicationstate

在我的`asp.net`应用程序中，我想在`HttpApplicationState`.

我设置数据的代码如下所示：

```
 Application.Lock();

 Application.Set("Name", "Value");

 Application.UnLock(); 
```

当我阅读文档时，它说这`HttpApplicationState`是隐式线程安全的。`Application.Lock()`但是在许多博客上都写到我们应该`Application.Unlock()`在将数据写入`HttpApplicationState`.

另一方面，我找不到任何文档说我们应该在从`HttpApplicationState`或清除数据时使用锁（使用`Application.RemoveAll()`）方法。

我的问题是：

1.  **我们在调用时不应该注意线程安全`RemoveAll`**吗？在我的应用程序中，一个线程可能正在读取数据，`HttpApplicationState`而另一个线程可以调用`RemoveAll`.
2.  在这种情况下，当可以同时从两个不同的线程读取和清除`HttpApplicationState`时，读取是否也不是线程安全的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T08:10:39.813

如果您对应用程序状态执行多个操作，则仅需要锁定。在你的情况下，你只是做一个操作，所以没有锁是完全安全的：

```
Application.Set("Name", "Value"); 
```

如果您执行多个操作，并且它们相互依赖，则需要锁定。例如：

```
Application.Lock();

string name = Application.Get("Name");

if (name == null) {
  Application.Set("Name", "Value");
}

Application.UnLock(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T05:52:07.500

据我所知，RemoveAll 是线程安全的，因为它在内部调用 Clear 方法。Clear 方法调用 HttpApplicationStateLock.AcquireWrite 然后调用 base.BaseClear 最后释放锁。

另请查看 [HttpApplicationState - 如果它是线程安全的，为什么会存在竞争条件？](https://stackoverflow.com/questions/1524922/httpapplicationstate-why-does-race-condition-exist-if-it-is-thread-safe)

# javascript - 如何滚动到 div 中的 gridview 中的特定记录

> ID：15629479
> 
> 赞同：2
> 
> 时间：2013-03-26T04:40:09.040
> 
> 标签：javascript

我有一个 TextBox 和一个 Button，我有一个很长的 GridView（我不想分页），所以我把它放在一个启用了垂直滚动条的 Div 中。

我只想在文本框中输入搜索字符串，如果单击按钮，它应该找到字符串匹配的行并设置其背景颜色，并且应该滚动到该行。

这应该在 Javascript 中完成。我可以做所有事情，但滚动到找到的行没有运气。

javascript函数如下所示

```
function NextClinic() {

            var gvClinics = document.getElementById("<%= gvClinics.ClientID %>");
            var FindText = document.getElementById("<%= txtClinicKeywords.ClientID %>").value;
            var oRows = gvClinics.rows;
            var rawDataRows = new Array();
            var cell;
            var hdnCounterNext = document.getElementById("<%= hdnCounterNext.ClientID %>").value;
            for (var i = hdnCounterNext; i < oRows.length; i++) {
                var cell = gvClinics.rows[i].cells[3];
                if (cell.innerHTML.indexOf(FindText) !== -1) {
                    alert("found at " + i);
                    document.getElementById("<%= hdnCounterNext.ClientID %>").value = i+1
                    return false;
                }
            }
        } 
```

一个最好的建议是高度赞赏..

谢谢斯里。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T04:44:25.733

尝试获取点击的位置，然后使用 ScrollTo 选项将其移动到正确的位置。我认为 jquery 会帮助你。我认为有一些插件可以这样做，这里是其中之一：[http](http://demos.flesler.com/jquery/scrollTo/) ://demos.flesler.com/jquery/scrollTo/ 。如果可以确定元素的位置，即使您也可以使用[http://api.jquery.com/scrollTop/ 。](http://api.jquery.com/scrollTop/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T04:45:19.170

使用[scrollIntoView](https://developer.mozilla.org/en-US/docs/DOM/element.scrollIntoView)方法

```
function NextClinic() {

            var gvClinics = document.getElementById("<%= gvClinics.ClientID %>");
            var FindText = document.getElementById("<%= txtClinicKeywords.ClientID %>").value;
            var oRows = gvClinics.rows;
            var rawDataRows = new Array();
            var cell;
            var hdnCounterNext = document.getElementById("<%= hdnCounterNext.ClientID %>").value;
            for (var i = hdnCounterNext; i < oRows.length; i++) {
                var cell = gvClinics.rows[i].cells[3];
                if (cell.innerHTML.indexOf(FindText) !== -1) {
                    alert("found at " + i);
                    cell.scrollIntoView();
                    document.getElementById("<%= hdnCounterNext.ClientID %>").value = i+1
                    return false;
                }
            }
        } 
```

[例子](http://jsfiddle.net/axrwkr/35dqA)

# c++ - 我可以获得调用静态方法的类吗？

> ID：15629480
> 
> 赞同：2
> 
> 时间：2013-03-26T04:40:12.103
> 
> 标签：c++, polymorphism

这可能是不可能的，但是 c++ 之前让我感到惊讶，所以就这样吧。

我有这个基类和三个几乎相同的子类：

```
class MyBaseClass {
};

class MyClassX : public MyBaseClass {
public:
    static MyClassX *create() { return new MyClassX(); }
};

class MyClassY : public MyBaseClass {
public:
    static MyClassY *create() { return new MyClassY(); }
};

class MyClassZ : public MyBaseClass {
public:
    static MyClassZ *create() { return new MyClassZ(); }
}; 
```

我可以这样称呼他们：

```
MyClassY *myObjectY = MyClassY::create(); 
```

我想缩短它，以便基类可以完成工作，并且我不必为每个子类重复该 create() 定义。

```
class MyBaseClass {
public:
    template<typename CalledForWhichClass>
    static CalledForWhichClass *create() {
        return new CalledForWhichClass();
    }
};

class MyClassX : public MyBaseClass { };

class MyClassY : public MyBaseClass { };

class MyClassZ : public MyBaseClass { }; 
```

但是，使用此设置，我现在必须将其称为：

```
MyClassY myObjectY = MyBaseClass::create<MyClassY>(); 
```

但我想成功，所以我仍然可以像以前一样称呼他们：

```
MyClassY *myObjectY = MyClassY::create(); 
```

我希望也许有一些像这样的黑魔法：

```
class MyBaseClass {
public:
    template<typename CalledForWhichClass = __static_context__>
    static CalledForWhichClass *create() {
        return new CalledForWhichClass();
    }
}; 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T04:55:26.543

使用 CRTP 怎么样？

```
template <typename Derived>
struct BasicMyClass : MyBaseClass {
    static Derived *create() { return new Derived(); }
};

struct MyClassX : public BasicMyClass<MyClassX> {};
struct MyClassY : public BasicMyClass<MyClassY> {);
struct MyClassZ : public BasicMyClass<MyClassZ> {); 
```

您无需尝试让基类完成工作，而是使用此模板自动`create`为您创建成员函数。

# azure-sql-database - 从 Azure VM 连接到 SQL Azure - 内部 IP 或公共 VIP

> ID：15629483
> 
> 赞同：5
> 
> 时间：2013-03-26T04:40:41.150
> 
> 标签：azure-sql-database, azure-virtual-machine

我有一个 SQL Azure 数据库和一个带有连接到数据库的应用程序的 Azure 虚拟机。

*   它们位于同一个数据中心并在同一个 Azure 订阅下。

*   我将虚拟机的公共虚拟 IP 添加到管理门户的服务器配置页面中允许的 IP 地址列表中。

*   Windows Azure 服务在“允许的服务”部分标记为“是”。

尝试连接时，我收到异常：“不允许 IP 地址为‘xxxx’的客户端访问服务器。”，其中 xxxx 是 VM 的内部 IP。我对在允许的 IP 规则中使用内部 IP 犹豫不决。SQL Azure 在连接期间不应该看到 VM 的公共 IP 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T11:31:24.830

> 我对在允许的 IP 规则中使用内部 IP 犹豫不决。SQL Azure 在连接期间不应该看到 VM 的公共 IP 吗？

呼叫是通过内部网络进行的，因此永远不要真正离开数据中心。为什么不通过在 Azure 数据库上打开以下 IP 范围来添加如下规则以仅允许内部调用：

```
10.0.0.0 to 10.0.0.255 
```

在上述情况下，您无需担心 VM 上的临时 IP。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T15:03:27.537

Perhaps try looking at the azure cmdlets that allow you to manage firewall rules by script. You could add a start up job to update a specific rule with the new IP the vm should it change do to a migration or reboot.

Specificially these powershell cmdlets:

*   New-SqlAzureFirewallRule - Adds a new Sql Azure firewall rule to a server.
*   Get-SqlAzureFirewallRules - Returns the firewall rules for the specified Sql Azure server.
*   Remove-SqlAzureFirewallRule - Removes an existing Sql Azure fireall rule.

[Sql Azure Cmdlets](http://michaelwasham.com/tag/sql-azure-cmdlets/)

# java - 在不使用 SimpleDateFormat 的情况下将字符串解析为日期？

> ID：15629486
> 
> 赞同：5
> 
> 时间：2013-03-26T04:40:56.320
> 
> 标签：java, simpledateformat, date-formatting, date-parsing

我正在开发一个spring应用程序，在我的一个控制器中，我有以下几行来从字符串解析到日期并将解析的日期格式化为所需的格式。但是我再次需要在不使用任何 SimpleDateFormat 的情况下将格式化的字符串解析回日期，那么可以这样做吗？

```
SimpleDateFormat dateFormat = new SimpleDateFormat("MM-dd-yyyy");
SimpleDateFormat dateFormat2 = new SimpleDateFormat("yyyy-MM-dd");

Date pick=dateFormat.parse(request.getParameter("pickDate"));
String pick_date=dateFormat2.format(pick); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-26T04:59:08.653

**编辑：**

> 我在维基百科中发现中国的语言环境为 yyyy-MM-dd。按国家/地区设置区域设置为中国检查此参考[日期格式，](http://en.wikipedia.org/wiki/Date_format_by_country) 您将获得所需的日期格式

尝试这个

```
String d1="12-27-2010";
    Stirng[] splitdata=d1.split("-");

   int month=Integer.parseInt(splitdata[0]);
 int day=Integer.parseInt(splitdata[1]);
int year=Integer.parseInt(splitdata[2]);

Calender cal=Calender.getInstance(Locale.CHINA);
cal.set(year,month,day);
Date d=cal.getTime(); 
```

这应该工作

* * *

如果你知道你的数据格式，你就可以做到。通过使用简单的字符串操作

例如：如果您的数据格式是

> MM-dd-yyyy

然后你可以转换成`yyyy-MM-dd`这样

```
String d1="12-27-2010";
Stirng[] splitdata=d1.split("-");

String s2= splitdate[2]+"-"+splitdate[0]+"-"+splitdate[1]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T04:52:59.147

您可以为此使用连接运算符（+）

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-03-26T04:46:19.747

是的，可能；只需编写代码进行解析。应该没那么难...

# video - 如何使用 ffmpeg 剪切部分 mp4 视频而不损失质量？

> ID：15629490
> 
> 赞同：16
> 
> 时间：2013-03-26T04:41:12.193
> 
> 标签：video, ffmpeg, video-capture

大家好，我有一个使用 ffmpeg 的 mp4 视频，但现在我想剪掉这个 mp4 的一部分。例如，我只想要 40 分钟视频中的 mp4 视频的前 25 分钟。你们能告诉我我可以在 ffmpeg for windows 中使用什么命令来完成这个任务吗？

**ffmpeg 40 分钟视频.mp4**

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-03-26T06:20:11.483

```
ffmpeg -i 40minvideo.mp4 -t 1500 -acodec copy -vcodec copy 25minvideo.mp4 
```

`-t 1500`处理前 1500 秒（25 分钟 * 60 秒/分钟）

`-acodec copy`并`-vcodec copy`复制编解码器数据而不进行转码（这会导致质量损失）。

# android - android中的生命周期混乱

> ID：15629499
> 
> 赞同：0
> 
> 时间：2013-03-26T04:41:44.263
> 
> 标签：android, android-lifecycle

我正在调用一个从 onCreate 方法中的文件填充微调器的方法？根据 andriod 的生命周期，它停止后或者如果我使用其他应用程序它不应该填充微调器。但是它正在填充。你能告诉我为什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T04:47:56.700

一旦它被填充`onCreate()`，它将保持填充状态，除非您退出活动。如果您使用其他应用程序或仅按主页按钮，则活动可能不会被破坏。它可能只是在`paused`状态。一旦你回到你的活动，它就会自动回到它`resume`所处的最后一个状态，即微调器将保持填充状态。如果内存不足，Android 也可能决定终止处于暂停状态的活动。

如果您想退出应用程序，请在活动中按返回按钮。然后活动可能会被破坏，当你再次打开它时，`onCreate()`将被调用并重新填充微调器。

# javascript - JS：history.pushState 在函数中不起作用

> ID：15629500
> 
> 赞同：0
> 
> 时间：2013-03-26T04:41:44.527
> 
> 标签：javascript, jquery, html, pushstate

我试图围绕 history.pushState 功能，如果我在控制台中使用它，它会起作用，但不会在页面上的函数或 jsfiddle 中产生所需的结果。

[JSFIDDLE 链接在这里！](http://jsfiddle.net/tCQzJ/1/)

HTML：

```
<a href="#1" id="#1">Link 1</a>
<a href="#2" id="#2">Link 2</a>
<a href="#3" id="#3">Link 3</a>
<a href="#4" id="#4">Link 4</a>
<a href="#5" id="#5">Link 5</a>
<a href="#6" id="#6">Link 6</a>
<a href="#7" id="#7">Link 8</a> 
```

JS：

```
$('a').click(function (e) {
    var linkhref = $(this).attr("href");
    var base = document.location;
    var stateObj = { test: "page" };
//  alert(linkhref);     /*make sure href is link we want*/

    history.pushState(stateObj, 'New URL: '+linkhref, base+linkhref);
    e.preventDefault();
}); 
```

我也尝试过更简单的 history.pushState(stateObj, 'Test', linkhref); 同样没有结果。

我试图在[此处](https://developer.mozilla.org/en/docs/DOM/Manipulating_the_browser_history)复制 Mozilla 文档，但除了手动将 history.pushState 行粘贴到控制台之外，无法进行任何工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T05:08:27.010

我试过了，效果很好。由于某种原因，它不适用于 JSFiddle。除非其他地方有其他问题，否则我看不出它不起作用的原因。

# java - 在我的程序中找不到错误

> ID：15629504
> 
> 赞同：0
> 
> 时间：2013-03-26T04:42:22.487
> 
> 标签：java, comparable

第一个代码块在我的主程序中的一个静态方法中。
在这个主程序中，我设置了多边形，它们的区域也在我稍后打印出来的 getArea() 方法中找到，但我在打印数据后使用这个 setArea() 方法来测试 compareTo() 方法。
第二个块是我在实现可比较的 Polygon 类中覆盖的 compareTo。
**为什么 setArea() 方法不更新区域？**
我认为这可能是一个静态问题，但不确定？

```
public static void printPolyData(){

    try{

        for(int i=0;i<=poly_count-1;i++){

        System.out.println("polygon #" + (i+1)); 
        System.out.println(poly_list.get(i).getSides() + " sides");
        System.out.println(poly_list.get(i).arrayToString());
        System.out.println("Area of Polygon = " + poly_list.get(i).getArea());
        System.out.println("Area of Polygon = " + poly_list.get(i).dListToString());

        }

                poly_list.get(0).setArea(0.00090);
                poly_list.get(1).setArea(0.00094);
                poly_list.get(2).setArea(0.000901);

                System.out.println("Comparing polygon0 (Area=" 
                + poly_list.get(0).getArea() + ") with polygon1 (Area=" 
                + poly_list.get(1).getArea() + ") : " +
                + poly_list.get(0).compareTo(poly_list.get(1)));

                System.out.println("Comparing polygon1 (Area=" 
                + poly_list.get(1).getArea() + ") with polygon0 (Area=" 
                + poly_list.get(0).getArea() + ") : " +
                + poly_list.get(1).compareTo(poly_list.get(0)));

                System.out.println("Comparing polygon0 (Area=" 
                + poly_list.get(0).getArea() + ") with polygon2 (Area=" 
                + poly_list.get(2).getArea() + ") : " +
                + poly_list.get(0).compareTo(poly_list.get(2)));

    }
    catch (Exception e){

        System.out.println("error printing polygon data. " + e.getMessage());

    }

}

 @Override
    public int compareTo(Polygon otherPoly) {

        double otherPolysArea = otherPoly.getArea(); 
        final double error = 0.00005;

        // otherPoly is bigger. current polygon smaller.
        if((this.getArea() - otherPolysArea) < -error){

            return -1;
        }
        // otherPoly is smaller. current polygon bigger.
        else if((this.getArea() - otherPolysArea) > error){

            return 1;
        }
        else{return 0;} // polygons are considered same.

    }

public void setArea(double area){

    this.area = area;

} 
```

> 比较多边形0（面积=2.0）和多边形1（面积=1.0）：1
> 比较多边形1（面积=1.0）和多边形0（面积=2.0）：-1
> 比较多边形0（面积=2.0）和多边形2（面积=1.5）：1

# asp.net - 快速开发环境ASP.NET Webforms/SQL Server数据库部署

> ID：15629505
> 
> 赞同：1
> 
> 时间：2013-03-26T04:42:26.317
> 
> 标签：asp.net, sql-server, database, migration

我们快速开发 Web 应用程序，我们正在寻找分离开发和生产数据库的方法（我们目前直接在生产环境中开发……这是个坏消息）。

我们使用带有 LINQ2SQL 的 ASP.NET Webforms 和用于 CRUD 的动态数据。我们如何在本地进行数据库开发，然后将更改部署到生产环境？我见过实体框架代码优先迁移，但我不知道 LINQ2SQL 有什么等价物。我们不想切换到 EF，因为我们的 CMS 是围绕 LINQ2SQL 构建的。

我们还需要在本地提供生产数据（不是最新的，而是足够新的），以便在出现问题时使用真实数据进行调试。

这是我迄今为止提出的唯一想法，但远非理想：

1.  初始开发在本地完成，然后部署到生产环境
2.  随后对生产数据库的本地复制进行后续维护。然后我们使用某种“数据库差异”工具来确定所做的更改，并将这些更改迁移到生产环境。

这是一种可以接受的做事方式吗？我们可以使用更好的方法吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T17:03:36.430

在 SSDT 数据库项目中开发您的数据模型和程序。这保留了您希望数据库在任何时候看起来相似的完美源代码控制副本。然后让工具为您生成发布脚本。

开发人员应始终在自己的本地数据库副本上进行开发。他们可以从数据库项目中签出脚本并进行更改，然后在本地发布他们可以在签入的项目中获取最新信息，合并他们的更改，再次在本地部署，测试它，然后签入他们的更改。只有在所有内容都经过测试后，您才能将更改发布到生产环境。

您最终会将您的数据库模式非常像代码源文件一样对待。

要将生产数据下载到您的开发服务器，我会使用生产数据库的 .bacpac 或 .dacpac 并将其导入您的本地数据库。这很好用，因为您需要模式定义以及数据，因为 prod 可能是比您在 dev 中拥有的版本更旧的版本

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T16:23:08.360

是的，我认为您基本上一针见血。这是我做过的两件事。

1.  您在本地开发并签入您的 SQL 脚本以进行源代码控制。然后运行脚本进行部署。我所看到的效果很好的是删除/重新创建所有存储过程（看起来很可怕，但如果您信任这些脚本，它会非常有帮助），然后在每次部署时使用一次性脚本来进行架构更改和数据迁移。

2.  您将定期复制生产数据并在本地恢复。显然，这种同步只能在部署之后轻松发生，因为那时本地和生产将是相同的。在我目前的工作中，我们实际上是双工写入并将副本发送到较低的环境，所以我认为这是一个选择。您可以从其他地方复制生产中的数据，然后使用/编写工具将数据导入本地。

据我所见，没有简单的答案。

# html - 如何使页脚居中到页面底部？

> ID：15629511
> 
> 赞同：14
> 
> 时间：2013-03-26T04:43:17.370
> 
> 标签：html, css, web, center, footer

我无法将页脚居中到页面底部。这是我的代码

```
footer {
background-color: #FFF;
position:fixed;
bottom: 0px;
width: 400px;
text-align: center;
}
<footer align="center">
    <p>March 25, 2</p>
</footer> 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-03-26T04:54:39.937

只需将宽度设置为 100%

```
width: 100%; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-26T07:43:23.563

[Shabbir Lakdawala](https://stackoverflow.com/users/1942244/shabbir-lakdawala)答案是您的选择之一，但将您的`floated`元素包含在您`footer`只需添加“div”包装器中

html

```
<div class="footerWrap">
    <div class="footer">
      <div class="footerContent">
        <p>Lorem Ipsum dolor</p>
      </div>     
    </div>
</div> 
```

css

```
.footerWrap {
    width:100%;
    position:fixed;
    bottom: 0px;
}
.footer {
    width:400px;
    margin:auto;
}
.footerContent {
    float:left;
    width:100%;
    background-color:#555;
    padding:20px 0;
}
.footer p {float:left; width:100%; text-align:center; } 
```

工作[演示](http://jsfiddle.net/qdVbR/179/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-26T05:48:40.657

或者您可以给您的页脚一个容器并应用此代码：

HTML：

```
<footer>
    <div class="footer">
    lorem ipsum dolor
    </div>
<footer> 
```

CSS：

```
footer{
    bottom: 0;
    position: fixed;
    width: 100%;
}

.footer {
    background: blue;
    height: 100px;
    margin: auto;
    width: 400px;
    text-align:center;
    padding:10px;
    color:#ffffff;
} 
```

链接到小提琴：http: [//jsfiddle.net/qdVbR/174/](http://jsfiddle.net/qdVbR/174/)

# php - 在 txt 文件 Linux 命令行上显示 php 输出

> ID：15629512
> 
> 赞同：7
> 
> 时间：2013-03-26T04:43:21.763
> 
> 标签：php, linux, shell, command-line, centos

我目前有一个生成黑名单的*blacklist.php*文件，我需要 Linux 上的一个*blacklist.txt*文件，该文件从 PHP 文件中提取输出。

这可能吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-26T04:48:28.710

如果您的*blacklist.php*将输出写入[标准输出](https://en.wikipedia.org/wiki/Standard_streams#Standard_output_.28stdout.29)，您可以像这样运行您的 PHP 脚本

```
php blacklist.php > blacklist.txt 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T04:54:12.120

我们可以使用[file_put_contents](http://php.net/manual/en/function.file-put-contents.php)

```
<?php
file_put_contents('blacklist.txt ', file_get_contents('blacklist.php'));  
?> 
```

**另一种选择：**使用[exec()](http://php.net/manual/en/function.exec.php)

```
<?php
exec ('php blacklist.php', $output); 
file_put_contents('blacklist.txt', $output); 
?> 
```

**另一种选择**：`Output redirection to a text file using Command line`

在**Windows**中：

```
C:\xampp\php>php C:\xampp\htdocs\blacklist.php >blacklist.txt 
```

在**Linux**中：

```
$ php blacklist.php >blacklist.txt 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-26T04:48:57.427

您可以使用`file_put_contents()`：

`file_put_contents('your file', 'your data')`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-26T04:47:48.800

只需运行脚本并将其重定向到 .txt 文件即可。就像是

```
php blacklist.php > blacklist.txt 
```

# ios - 带有 EXC_BAD_ACCESS 的 IOHIDEventSystemClientScheduleWithRunLoop

> ID：15629514
> 
> 赞同：1
> 
> 时间：2013-03-26T04:43:32.297
> 
> 标签：ios, objective-c, jailbreak, iphone-privateapi, iokit

我正在尝试在我的应用程序中获取触摸事件。所以我使用 IOHIDFamily 回调来获取事件。我的代码是这样的：

```
void handle_event(void* target, void* refcon, IOHIDServiceRef service, IOHIDEventRef event)
{
    printf("Received event of type %2d from service %p.\n", 
           IOHIDEventGetType(event), service);
}

- (void)viewDidLoad
{
    [super viewDidLoad];

    void *ioHIDEventSystem = IOHIDEventSystemClientCreate(kCFAllocatorDefault);
    IOHIDEventSystemClientScheduleWithRunLoop(system, CFRunLoopGetCurrent(), kCFRunLoopDefaultMode);
    IOHIDEventSystemClientRegisterEventCallback(system, handle_event, NULL, NULL);
    CFRunLoopRun();
} 
```

执行时出现错误：

> IOHIDEventSystemClientScheduleWithRunLoop(system, CFRunLoopGetCurrent(), kCFRunLoopDefaultMode);
> 
> IOKit`IOHIDEventSystemClientScheduleWithRunLoop:
> ...
> 0x32f8fd14: cmp.w r10, #0
> 0x32f8fd18: strd r10, r11, [r4, #116] <---EXC_BAD_ACCESS(code=EXC_ARM_DA_ALIGN)
> 0x32f8fd1c: beq 0x32f8fdac; IOHIDEventSystemClientScheduleWithRunLoop + 168
> 0x32f8fd1e：ldr r1，[r4，#96]
> 0x32f8fd20：cbz r1，0x32f8fd2a；IOHIDEventSystemClientScheduleWithRunLoop + 38
> 0x32f8fd22: mov r0, r10
> ...

我是否以错误的方式使用 IOHIDFamily？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T09:36:54.817

我在发布的代码中至少看到了几个问题：

首先，你在打电话

```
CFRunLoopRun(); 
```

在`viewDidLoad`方法中，它将在主/UI线程上调用。我认为没有理由，所以只需删除该行。如果您有一个在后台线程上运行的方法，并且您需要启动后台运行循环，我通常希望看到该调用。或者，如果您直接在 中注册回调`main()`，[就像在这个答案](https://stackoverflow.com/a/15118510/119114)中一样。

然后，你有这个：

```
void *ioHIDEventSystem = IOHIDEventSystemClientCreate(kCFAllocatorDefault);
IOHIDEventSystemClientScheduleWithRunLoop(system, CFRunLoopGetCurrent(), kCFRunLoopDefaultMode); 
```

我猜第二行应该是

```
IOHIDEventSystemClientScheduleWithRunLoop(ioHIDEventSystem, CFRunLoopGetCurrent(), kCFRunLoopDefaultMode); 
```

我不知道`system`变量实际指的是什么，但它看起来不正确。

看看[这个最近的答案](https://stackoverflow.com/a/15550916/119114)，因为它似乎正确使用**了 IOKit**。

# javascript - 将原型脚本转换为 jquery 脚本

> ID：15629516
> 
> 赞同：0
> 
> 时间：2013-03-26T04:43:48.247
> 
> 标签：javascript, jquery, prototypejs

底部代码将文本输入中的数字转换为波斯语数字和镜像。

我需要将原型转换为 jquery，请帮助我

```
 String.prototype.toFaDigit = function() {
        return this.replace(/\d+/g, function(digit) {
            var ret = '';
            for (var i = 0, len = digit.length; i < len; i++) {
                ret += String.fromCharCode(digit.charCodeAt(i) + 1728);
            }

            return ret;
        });
    };

    String.prototype.toEnDigit = function() {
    return this.replace(/[\u06F0-\u06F9]+/g, function(digit) {
        var ret = '';
        for (var i = 0, len = digit.length; i < len; i++) {
            ret += String.fromCharCode(digit.charCodeAt(i) - 1728);
        }

        return ret;
    });
};
 function ChekNumLang_ChekBox(MainTextFieldName) {
    var fieldObj = document.getElementById(MainTextFieldName);
    if (document.getElementById("FarsiNum").checked) {
        fieldObj.value = fieldObj.value.toFaDigit();
    }
    else {
        fieldObj.value = fieldObj.value.toEnDigit();
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T04:50:28.793

如果由我决定，我会做类似的事情

```
StringUtils = {};

StringUtils.toFaDigit = function(string) {
    return string.replace(/\d+/g, function(digit) {
                var ret = '';
                for (var i = 0, len = digit.length; i < len; i++) {
                    ret += String.fromCharCode(digit.charCodeAt(i) + 1728);
                }

                return ret;
            });
};

StringUtils.toEnDigit = function(string) {
    return string.replace(/[\u06F0-\u06F9]+/g, function(digit) {
                var ret = '';
                for (var i = 0, len = digit.length; i < len; i++) {
                    ret += String.fromCharCode(digit.charCodeAt(i) - 1728);
                }

                return ret;
            });
};

function ChekNumLang_ChekBox(MainTextFieldName) {
    var fieldObj = $('#' + MainTextFieldName)
    if ($('#FarsiNum').is(':checked')) {
        fieldObj.val(StringUtils.toFaDigit(fieldObj.val()));
    } else {
        fieldObj.val(StringUtils.toEnDigit(fieldObj.val()));
    }
} 
```

# iphone - 位置管理器在后台运行一段时间后停止工作

> ID：15629524
> 
> 赞同：6
> 
> 时间：2013-03-26T04:44:20.347
> 
> 标签：iphone, ios, gps, location

我正在开发一个应用程序，我必须`LocationUpdate`在其中跟踪. 当我把它放回去时，它又开始了，当我在一段时间后把它放到后台时，它又停止了。`Background``Foreground``Background``Location``Foreground`

我找不到问题，请尽可能帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T04:49:17.097

您必须指定您的应用在后台时需要位置更新`plist`

![在此处输入图像描述](../Images/c381f84324be89c7b571308ad2ca2b43.png)

这是苹果文档[在后台获取位置事件](http://developer.apple.com/library/ios/#documentation/UserExperience/Conceptual/LocationAwarenessPG/CoreLocation/CoreLocation.html#//apple_ref/doc/uid/TP40009497-CH2-SW10)

这是一个[教程](http://mobile.tutsplus.com/tutorials/iphone/ios-multitasking-background-location/)。

我建议您阅读[位置感知编程指南](http://developer.apple.com/library/ios/#documentation/UserExperience/Conceptual/LocationAwarenessPG/Introduction/Introduction.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T19:13:46.843

*   disable distance filter
*   set desired Accuracy to best

*   use - (void)startUpdatingLocation

Now in ios6: there is

```
locationManager:didUpdateLocations: 
```

in ios5 there is

```
locationManager:didUpdateToLocation:fromLocation: 
```

the first delivers the locations buffered in the background and keeps your application sleeping and wakes it up with a sequence of fixes, while the ios5 method delivers the location all of the time.

# c++ - 用原始类型分配空指针后删除它

> ID：15629530
> 
> 赞同：0
> 
> 时间：2013-03-26T04:45:08.603
> 
> 标签：c++, void-pointers

可以在下面的程序中删除 void 指针吗？

```
class Sample
{
    public:
        int intVal;
        float floatVal;
};

main() {
    Sample *samObj = new Sample();
    void *vPtr = samObj;
    delete vPtr;
} 
```

这只是我编写的一个示例程序。实际上，在我的项目中，除了做类似的事情，我别无他法。这个类似的代码在 .h 接口文件中，当我包含这个文件并编译其他组件时，编译器会发出警告消息“警告：删除 'void*' 是未定义的”，但我怀疑是因为我已经分配了 void Sample 对象类型的指针，删除这个指针不安全吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T04:48:58.100

在 void 指针上调用 delete 是**未定义的行为**^([Ref])。你根本不应该这样做。您不是`delete`在调用 void 指针，而是调用类型的指针，`Sample`这很好。

[参考] **C++ 标准：第 5.3.5/3 节：**

> 在第一种选择（删除对象）中，如果操作数的静态类型与其动态类型不同，则静态类型应为操作数动态类型的基类，并且静态类型应具有虚拟析构函数或行为未定义. 在第二种选择（删除数组）中，如果要删除的对象的动态类型与其静态类型不同，则行为未定义。

脚注：

> 这意味着不能使用 void* 类型的指针删除对象，因为没有 void 类型的对象

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T05:21:53.060

代码看起来没问题。只要你记得指向`void *vPtr`null 或任何存在的东西。

当您 delete 时，真正的问题来了`void *vPtr`，因为编译器不知道您要删除什么对象，它不知道可以释放多少内存。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T04:50:21.893

不，以这种方式删除 void 指针是不安全的。编译器应该如何“知道” vPtr 指向的内容？编译器不能；运行时可以，但事实并非如此。

为什么编译器需要“知道” vPtr 指向的内容？调用析构函数并知道要释放多少内存。如果编译器在每次分配时都保留一个标准头文件，那么释放多少内存可能不是一个大问题。但我想这是留给编译器的一个细节，所以即使在这个部门，结果也会是“未定义的”。

# tsql - 层次结构数据类型的聚合

> ID：15629536
> 
> 赞同：0
> 
> 时间：2013-03-26T04:45:21.337
> 
> 标签：tsql, hierarchy, aggregation

我一直在阅读 MS SQL2012 中的层次结构数据类型。我正在尝试在每个级别存储具有值的组织数据结构。我想知道如何聚合与层次结构数据列关联的数据。

例如说我想把所有东西从层次结构的顶部总结到 3 个级别，我会用什么来做到这一点。我使用分组依据或汇总，或者是否有一些我可以在层次结构数据类型上使用的新函数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T06:39:24.427

总结最多 3 个级别的所有内容，看起来您可以按照此链接使用 GetLevel

[http://technet.microsoft.com/en-us/3b4f7dae-65b5-4d8d-8641-87aba9aa692d](http://technet.microsoft.com/en-us/3b4f7dae-65b5-4d8d-8641-87aba9aa692d) [http://msdn.microsoft.com/en-au/library/bb677197(v=sql.100).aspx](http://msdn.microsoft.com/en-au/library/bb677197(v=sql.100).aspx)

```
SELECT SUM(z)
FROM HumanResources.EmployeeOrg
WHERE OrgNode.GetLevel() BETWEEN 0 AND 2 
```

# iphone - 在我的 iPhone 应用程序中播放 iTunes 歌曲

> ID：15629539
> 
> 赞同：0
> 
> 时间：2013-03-26T04:45:38.933
> 
> 标签：iphone, itunes, avplayer, ipod, mpmediaitem

我正在开发一个基于音乐的 iPhone 应用程序。
我在我的应用程序中列出了 iPod 库中的歌曲。
但是当我尝试使用 AVPlayer 播放 iPod 库中的歌曲时，有些歌曲正在播放，有些歌曲没有播放。当我检查时，似乎未播放的歌曲是来自 iTunes 的付费歌曲。
付费歌曲播放有问题吗？请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T04:48:04.550

您需要使用媒体播放器[框架](http://developer.apple.com/library/ios/#documentation/mediaplayer/reference/MediaPlayer_Framework/_index.html)而不是 AVPlayer

# spring - Spring Batch - JdbcPagingItemReader 中的 PageSize 问题

> ID：15629540
> 
> 赞同：2
> 
> 时间：2013-03-26T04:45:52.327
> 
> 标签：spring, spring-batch

您好我们正在开发一个春季批次，它处理 SKU 表中的所有 SKU 并向库存系统发送请求以获取库存详细信息。要发送到库存详细信息，我们需要一次发送 100 个 SKI id，因此我们将 pageSize 设置为 100。

在阅读器日志中：我们看到

> SELECT * FROM (SELECT S_ID ,S_PRNT_PRD,SQ, ROWNUM as TMP_ROW_NUM FROM XXX_SKU WHERE SQ>=:min and SQ <=:max ORDER BY SQ ASC) WHERE ROWNUM <= 100]

但是我们在 WRITER 中观察到，在特定时间内发送了 100 个 SKU，而对于某些请求，仅发送了 1 个 SKU。

```
public void write(List<? extends XXXPagingBean> pItems) throws XXXSkipItemException {
if (mLogger.isLoggingDebug()) {
mLogger.logDebug("XXXInventoryServiceWriter.write() method STARTING, ItemsList size:{0}" +pItems.size());
}
....
....
} 
```

*   pageSize 和 commitInterval 设置为 100（这些假设相同吗？）
*   sortKey（SEQ_ID）应该与partitiner中使用的列相同吗？

XML 中的 Bean 配置：

```
<!-- InventoryService Writer configuration -->

<bean id="inventoryGridService" class="atg.nucleus.spring.NucleusResolverUtil" factory-method="resolveName">
<constructor-arg value="/com/XXX/gigaspaces/inventorygrid/service/InventoryGridService" />
</bean>

<bean id="inventoryWriter" class="com.XXX.batch.integrations.XXXXXX.XXXXInventoryServiceWriter" scope="step">
<property name="jdbcTemplate" ref="batchDsTemplate"></property>
<property name="inventoryGridService" ref="inventoryGridService" />
</bean>

<bean id="pagingReader" class="org.springframework.batch.item.database.JdbcPagingItemReader" xmlns="http://www.springframework.org/schema/beans" scope="step">
<property name="dataSource" ref="dataSource" />
<property name="queryProvider">
<bean id=" productQueryProvider" class="org.springframework.batch.item.database.support.SqlPagingQueryProviderFactoryBean">
<property name="dataSource" ref="dataSource" />
<property name="selectClause" value="select S_ID ,S_PRNT_PRD" />
<property name="fromClause" value="from XXX_SKU" />
<property name="sortKey" value="SEQ_ID" />
<property name="whereClause" value="SEQ_ID>=:min and SEQ_ID &lt;=:max"></property>
</bean>
</property>
<property name="parameterValues">
<map>
<entry key="min" value="#{stepExecutionContext[minValue]}"></entry>
<entry key="max" value="#{stepExecutionContext[maxValue]}"></entry>
</map>
</property>
<property name="pageSize" value="100" />
<property name="rowMapper">
<bean class="com.XXX.batch.integrations.endeca.XXXPagingRowMapper"></bean>
</property>
</bean> 
```

请建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T10:01:23.247

从 bean 定义中删除你的 whereClause`productQueryProvider`并摆脱你的`parameterValues`，它应该可以工作。`PagingQueryProvider`自动为您处理分页。无需自己手动执行此操作。

# java - JSP 和 JSTL 根据规则有条件地渲染表中的行

> ID：15629541
> 
> 赞同：1
> 
> 时间：2013-03-26T04:45:56.530
> 
> 标签：java, jsp, jstl

我在 JSP 页面中有以下内容

```
 <table border=1>
        <thead>
            <tr>
                <th>User Id</th>
                <th>First Name</th>                
                <th>DOB</th>                
                <th colspan=2>Action</th>
            </tr>
        </thead>
        <tbody>
            <c:forEach items="${users}" var="user">
                <tr>
                    <td><c:out value="${user.userid}" /></td>
                    <td><c:out value="${user.firstName}" /></td>                    
                    <td><fmt:formatDate pattern="dd-MMM-yy" value="${user.dob}" /></td>                    
                    <td><a href="UserController?action=edit&userId=<c:out value="${user.userid}"/>">Update</a></td>
                    <td><a href="UserController?action=delete&userId=<c:out value="${user.userid}"/>">Delete</a></td>
                </tr>
            </c:forEach>
        </tbody>
    </table>
<p><a href="UserController?action=insert">Add User</a></p> 
```

普通用户通过单击**添加用户**按钮只能输入 10 行，管理员可以在表格中输入任意数量的行。

管理员添加的行只能被管理员查看，其他所有由普通用户添加的行，普通用户无法查看管理员添加的行。

如何根据上述规则有条件地在 JSP 中呈现行？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T05:59:29.240

您可以使用[`<c:if>`](http://docs.oracle.com/javaee/5/jstl/1.1/docs/tlddocs/c/if.html)标签有条件地显示数据。像这样的东西：

```
<c:forEach items="${users}" var="user">
    <c:if test="${user.role != 'admin'}">
        <!-- code here -->
    </c:if>
</c:forEeach> 
```

另外，如果已添加的用户数为 10 并且用户当前用户不是管理员，我相信您将需要有条件地禁用**添加用户链接。**

# objective-c - 为什么有时先调用 viewDidLoad 有时调用后者？

> ID：15629543
> 
> 赞同：0
> 
> 时间：2013-03-26T04:46:15.480
> 
> 标签：objective-c, uiviewcontroller, viewdidload

```
-(void) tabBarController:(UITabBarController *)tabBarController didSelectViewController:(UIViewController *)viewController
{
    [[NSNotificationCenter defaultCenter] postNotificationName:ListOrMapAddReloadButton object:self]; //Add nearby buttons
} 
```

其中一个`UIViewController`是顺序

1.  `viewDidload`被叫
2.  `[[NSNotificationCenter defaultCenter] postNotificationName:ListOrMapAddReloadButton object:self];`

而且因为通知设置是在 viewDidLoad 调用的，所以我需要先调用 viewDidLoad `

1.  `-(void) tabBarController:(UITabBarController *)tabBarController didSelectViewController:(UIViewController *)viewController`

`

我怎么能做到这一点？

```
[[NSNotificationCenter defaultCenter]addObserver:self selector:@selector(addReloadButton) name:ListOrMapAddReloadButton object:nil];
[[NSNotificationCenter defaultCenter]addObserver:self selector:@selector(addNearbyButton) name:ListOrMapAddNearbyButton object:nil]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T04:51:05.750

将您的通知放在 ViewWillAppear ()

# java - 与 OAuth 2.0 中的 redirect_uri 混淆

> ID：15629544
> 
> 赞同：1
> 
> 时间：2013-03-26T04:46:19.600
> 
> 标签：java, oauth-2.0, google-analytics-api

我一直在为我[在 weebly 创建的](http://cbrokx.weebly.com)网站使用 Google Analytics 。我正在使用 Google API 以编程方式实现整个过程。

**我在 OAuth 流程中面临的问题是我收到了这个错误：**

```
Error: redirect_uri_mismatch
The redirect URI in the request:localhost:34190/Callback did not match a registered redirect URI

        Request Details
        scope=https://www.googleapis.com/auth/analytics.readonly
        response_type=code
        access_type=online
        redirect_uri=local_host:34190/Callback
        display=page
        client_id={CLIENT_ID}.apps.googleusercontent.com 
```

我的谷歌 api 控制台配置是：

```
Redirect URI: localhost/oauth2callback
JavaScript origins: localhost 
```

为什么我将它设置为`redirect_uri`：？`localhost:34190/Callback``http://mya.com/oauth2callback`

**我为 openauth 编写的代码：**

```
public static void main(String[] args) throws Exception {
    Analytics analytics = initializeAnalytics();
}

private static Analytics initializeAnalytics() throws Exception {
    Credential credential = authorize();
}

private static Credential authorize() throws Exception {
    GoogleClientSecrets clientSecrets = GoogleClientSecrets.load(
        JSON_FACTORY, Testcode.class.getResourceAsStream("/client_secrets.json"));
    FileCredentialStore credentialStore = new FileCredentialStore(
        new File(System.getProperty("user.home"), ".credentials/analytics.json"),
        JSON_FACTORY);
    GoogleAuthorizationCodeFlow flow = new GoogleAuthorizationCodeFlow.Builder(
        HTTP_TRANSPORT, JSON_FACTORY, clientSecrets,
        Collections.singleton(AnalyticsScopes.ANALYTICS_READONLY)).setCredentialStore(
            credentialStore).build();
    return new AuthorizationCodeInstalledApp(flow, new LocalServerReceiver())
                   .authorize(clientSecrets.getDetails().getClientId());
  } 
```

我怎样才能摆脱这个错误？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T11:51:59.203

因此，您的网站告诉 Google 使用`localhost:34190/Callback`重定向 URI。但是您已经对 Google 服务器说，只有当您的应用程序指定`localhost/oauth2callback`为重定向 URI 时，他才应该接受请求。

简单的解决方法是按如下方式设置 Google 控制台：

```
Redirect URI: http://localhost:34190/Callback 
```

无论如何，您正在谈论您想要重定向到`http://mya.com/oauth2callback`.

在这种情况下，您应该更改用户在您的网站上单击的链接以指定此链接

```
[...]&redirect_uri=http://mya.com/oauth2callback[...] 
```

然后在 Google Console 中进行设置：

```
Redirect URI: http://mya.com/oauth2callback 
```

# javascript - JQuery 在通话时跳过 .hide()

> ID：15629549
> 
> 赞同：0
> 
> 时间：2013-03-26T04:47:01.933
> 
> 标签：javascript, jquery, jquery-animate

所以我有 3 个 div，点击时会打开和关闭动画。我希望它同时打开单击的 div，同时保持其他两个关闭。如果单击另一个，它将打开那个，同时将其他的关闭到其原始大小。

现在我的功能大部分都在工作。它们可以正确打开和关闭，当图像为 100 x 100 时，单击时会消失，这很好。然而，有时图像不会被隐藏并且看起来很恶心。我似乎无法弄清楚为什么会发生这种情况。就像它跳过 hide() 并直接进入动画。没有引发萤火虫错误，所以我有点难过。帮助？这是代码片段。此外，还有一个链接，指向它混乱时的样子。

链接：http: [//i.imgur.com/eJ2QdiI.png](http://i.imgur.com/eJ2QdiI.png)

代码：（这是一个粗略的草稿，所以很好:)。这是我第一次在工作环境之外编写一些有趣的东西，所以任何提示也有帮助！）

忍者编辑：我都尝试过延迟（）并且没有延迟（）到极端，似乎根本没有帮助。:(

```
 function openDiv(divPosition) {
            if(divPosition == "top") {
                $("#home, #midDivContent, #botDivContent").hide().delay(1000);
                $("#topDiv").animate({"height": "500px", "width": "950px"}, "slow");
                $("#midDiv").animate({"height": "100px", "width": "100px"}, "slow");
                $("#botDiv").animate({"height": "100px", "width": "100px"}, "slow", function() {$("#contactMe, #aboutMe").show();$("#topDivContent").fadeIn("fast");});
            } else if (divPosition == "mid") {
                $("#aboutMe, #topDivContent, #botDivContent").hide().delay(1000);
                $("#midDiv").animate({"height": "500px", "width": "950px"}, "slow");
                $("#topDiv").animate({"height": "100px", "width": "100px"}, "slow");
                $("#botDiv").animate({"height": "100px", "width": "100px"}, "slow",function() { $("#home, #contactMe").show();$("#midDivContent").fadeIn("fast");});
            } else if (divPosition == "bot") {
                $("#contactMe, #topDivContent, #midDivContent").hide().delay(1000);
                $("#botDiv").animate({"height": "500px", "width": "950px"}, "slow");
                $("#topDiv").animate({"height": "100px", "width": "100px"}, "slow");
                $("#midDiv").animate({"height": "100px", "width": "100px"}, "slow",function() { $("#home,#aboutMe").show();$("#botDivContent").fadeIn("fast");});
            }
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T04:59:29.240

为了延迟动画，您需要在*该*特定元素上延迟它。

您的代码`$("#home, #midDivContent, #botDivContent").hide().delay(1000)`没有任何延迟，因为它已经隐藏了选择器中的元素。

或者，如果你这样做`$("#home, #midDivContent, #botDivContent").delay(1000).hide();`了，它会在隐藏这三个 div 之前有效地等待 1 秒。你想要的是延迟下一组元素的动画，所以这样做：

```
$("#topDiv").delay(1000).animate({"height": "500px", "width": "950px"}, "slow"); 
```

依此类推，对于您希望延迟的每个动画。

另外值得注意的是，您可以使用回调。您希望在另一个元素完成动画后执行的动画可以放在初始元素动画函数的回调中。

```
$("#home, #midDivContent, #botDivContent").delay(1000).hide(function(){
    $("#topDiv").animate({"height": "500px", "width": "950px"}, "slow");
}); 
```

特别是在这里，我建议`$("#topDiv").delay(1000)...`或指定隐藏的时间：`.hide(500, function()...`因为没有 int 的传递`hide()`使其瞬间完成。

# mysql - sql语句和子句的区别

> ID：15629550
> 
> 赞同：16
> 
> 时间：2013-03-26T04:47:02.487
> 
> 标签：mysql, sql

sql语句和子句有什么区别

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-03-26T04:54:35.110

以下声明：

```
SELECT foo FROM bar JOIN quux WHERE x = y; 
```

由以下子句组成：

*   其中 x = y
*   选择富
*   从栏
*   加入 quux

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T04:53:25.317

语句是查询，子句是语句的条件。

# c# - 在 C# 和 Bouncy Castle 中读取 RSA PrivateKey

> ID：15629551
> 
> 赞同：12
> 
> 时间：2013-03-26T04:47:09.033
> 
> 标签：c#, encryption, rsa, bouncycastle

我已成功写入 OpenSSL 格式的公钥和私钥文件。

**文件：**

```
-----BEGIN PUBLIC KEY-----
MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQCpHCHYgawzNlxVebSKXL7vfc/i
hP+dQgMxlaPEi7/vpQtV2szHjIP34MnUKelXFuIETJjOgjWAjTTJoj38MQUWc3u7
SRXaGVggqQEKH+cRi5+UcEObIfpi+cIyAm9MJqKabfJK2e5X/OS7FgAwPjgtDbZO
ZxamOrWWL8KGB+lH+QIDAQAB
-----END PUBLIC KEY-----

-----BEGIN RSA PRIVATE KEY-----
MIICXAIBAAKBgQCpHCHYgawzNlxVebSKXL7vfc/ihP+dQgMxlaPEi7/vpQtV2szH
jIP34MnUKelXFuIETJjOgjWAjTTJoj38MQUWc3u7SRXaGVggqQEKH+cRi5+UcEOb
Ifpi+cIyAm9MJqKabfJK2e5X/OS7FgAwPjgtDbZOZxamOrWWL8KGB+lH+QIDAQAB
AoGBAIXtL6jFWVjdjlZrIl4JgXUtkDt21PD33IuiVKZNft4NOWLu+wp17/WZYn3S
C2fbSXfaKZIycKi0K8Ab6zcUo0+QZKMoaG5GivnqqTPVAuZchkuMUSVgjGvKAC/D
12/b+w+Shs9pvqED1CxfvtePXNwL6ZNuaREFC5hF/YpMVyg5AkEA3BUCZYJ+Ec96
2cwsdY6HocW8Kn+RIqMjkNtyLA19cQV5mpIP7kAiW6drBDlraVANi+5AgK2zQ+ZT
hYzs/JfRKwJBAMS1g5/B7XXnfC6VTRs8AMveZudi5wS/aGpaApybsfx1NTLLsm3l
GmGTkbCr+EPzvJ5zRSIAHAA6N6NdORwzEWsCQHTli+JTD5dyNvScaDkAvbYFi06f
d32IXYnBpcEUYT65A8BAOMn5ssYwBL23qf/ED431vLkcig1Ut6RGGFKKaQUCQEfa
UdkSWm39/5N4f/DZyySs+YO90csfK8HlXRzdlnc0TRlf5K5VyHwqDkatmoMfzh9G
1dLknVXL7jTjQZA2az8CQG0jRSQ599zllylMPPVibW98701Mdhb1u20p1fAOkIrz
+BNEdOPqPVIyqIP830nnFsJJgTG2eKB59ym+ypffRmA=
-----END RSA PRIVATE KEY----- 
```

公钥当然只包含公钥部分。

使用公钥加密我的消息后。我想读取私钥文件并对其进行解密，但它不起作用。我在尝试读取私钥时遇到异常，说不能将对象转换为非对称密码。

这是我的代码：

```
public static AsymmetricKeyParameter ReadAsymmetricKeyParameter(string pemFilename)
{
    var fileStream = System.IO.File.OpenText(pemFilename);
    var pemReader = new Org.BouncyCastle.OpenSsl.PemReader(fileStream);
    var KeyParameter = (Org.BouncyCastle.Crypto.AsymmetricKeyParameter)pemReader.ReadObject();
    return KeyParameter;
}

static void Encrypt2(string publicKeyFileName, string inputMessage, string encryptedFileName)
    {   
        UTF8Encoding utf8enc = new UTF8Encoding();
        FileStream encryptedFile = null;

        try
        {
            // Converting the string message to byte array
            byte[] inputBytes = utf8enc.GetBytes(inputMessage);

            // RSAKeyPairGenerator generates the RSA Key pair based on the random number and strength of key required
            /*RsaKeyPairGenerator rsaKeyPairGnr = new RsaKeyPairGenerator();
            rsaKeyPairGnr.Init(new Org.BouncyCastle.Crypto.KeyGenerationParameters(new SecureRandom(), 512));
            Org.BouncyCastle.Crypto.AsymmetricCipherKeyPair keyPair = rsaKeyPairGnr.GenerateKeyPair();
            */

            AsymmetricKeyParameter publicKey = ReadAsymmetricKeyParameter(publicKeyFileName);

            // Creating the RSA algorithm object
            IAsymmetricBlockCipher cipher = new RsaEngine();

            // Initializing the RSA object for Encryption with RSA public key. Remember, for encryption, public key is needed
            cipher.Init(true, publicKey);

            //Encrypting the input bytes
            byte[] cipheredBytes = cipher.ProcessBlock(inputBytes, 0, inputMessage.Length);

            //Write the encrypted message to file
            // Write encrypted text to file
            encryptedFile = File.Create(encryptedFileName);
            encryptedFile.Write(cipheredBytes, 0, cipheredBytes.Length);
        }
        catch (Exception ex)
        {
            // Any errors? Show them
            Console.WriteLine("Exception encrypting file! More info:");
            Console.WriteLine(ex.Message);
        }
        finally
        {
            // Do some clean up if needed
            if (encryptedFile != null)
            {
                encryptedFile.Close();
            }
        }

    } 
```

这是解密功能。第二个是不使用 Bouncy Castle，但是，我宁愿使用 Bouncy Castle，因为稍后我还将使用 Java 进行加密和解密。

```
static void Decrypt2(string privateKeyFileName, string encryptedFileName, string plainTextFileName)
    {
        UTF8Encoding utf8enc = new UTF8Encoding();
        FileStream encryptedFile = null;
        StreamWriter plainFile = null;
        byte[] encryptedBytes = null;
        string plainText = "";

        try
        {
            // Converting the string message to byte array
            //byte[] inputBytes = utf8enc.GetBytes(inputMessage);

            // RSAKeyPairGenerator generates the RSA Key pair based on the random number and strength of key required
            /*RsaKeyPairGenerator rsaKeyPairGnr = new RsaKeyPairGenerator();
            rsaKeyPairGnr.Init(new Org.BouncyCastle.Crypto.KeyGenerationParameters(new SecureRandom(), 512));
            Org.BouncyCastle.Crypto.AsymmetricCipherKeyPair keyPair = rsaKeyPairGnr.GenerateKeyPair();
            */

            StreamReader sr = File.OpenText(privateKeyFileName);
            PemReader pr = new PemReader(sr);

            PemReader pemReader = new PemReader(new StringReader(privateKeyFileName));
            AsymmetricCipherKeyPair keyPair = (AsymmetricCipherKeyPair)pemReader.ReadObject();
            Console.WriteLine(keyPair.ToString());
            AsymmetricKeyParameter privatekey = keyPair.Private;

            Console.WriteLine(pr.ReadPemObject());
            AsymmetricCipherKeyPair KeyPair = (AsymmetricCipherKeyPair)pr.ReadObject();

            AsymmetricKeyParameter privateKey = ReadAsymmetricKeyParameter(privateKeyFileName);

            // Creating the RSA algorithm object
            IAsymmetricBlockCipher cipher = new RsaEngine();
            Console.WriteLine("privateKey: " + privateKey.ToString());

            // Initializing the RSA object for Decryption with RSA private key. Remember, for decryption, private key is needed
            //cipher.Init(false, KeyPair.Private);
            //cipher.Init(false, KeyPair.Private);
            cipher.Init(false, keyPair.Private);    

            // Read encrypted text from file
            encryptedFile = File.OpenRead(encryptedFileName);
            encryptedBytes = new byte[encryptedFile.Length];
            encryptedFile.Read(encryptedBytes, 0, (int)encryptedFile.Length);

            //Encrypting the input bytes
            //byte[] cipheredBytes = cipher.ProcessBlock(inputBytes, 0, inputMessage.Length);
            byte[] cipheredBytes = cipher.ProcessBlock(encryptedBytes, 0, encryptedBytes.Length);

            //Write the encrypted message to file
            // Write encrypted text to file
            plainFile = File.CreateText(plainTextFileName);
            plainText = Encoding.Unicode.GetString(cipheredBytes);
            plainFile.Write(plainText);
        }
        catch (Exception ex)
        {
            // Any errors? Show them
            Console.WriteLine("Exception encrypting file! More info:");
            Console.WriteLine(ex.Message);
        }
        finally
        {
            // Do some clean up if needed
            if (plainFile != null)
            {
                plainFile.Close();
            }
            if (encryptedFile != null)
            {
                encryptedFile.Close();
            }
        }
    }

    // Decrypt a file
    static void Decrypt(string privateKeyFileName, string encryptedFileName, string plainFileName)
    {
        // Variables
        CspParameters cspParams = null;
        RSACryptoServiceProvider rsaProvider = null;
        StreamReader privateKeyFile = null;
        FileStream encryptedFile = null;
        StreamWriter plainFile = null;
        string privateKeyText = "";
        string plainText = "";
        byte[] encryptedBytes = null;
        byte[] plainBytes = null;

        try
        {
            // Select target CSP
            cspParams = new CspParameters();
            cspParams.ProviderType = 1; // PROV_RSA_FULL 
            //cspParams.ProviderName; // CSP name
            rsaProvider = new RSACryptoServiceProvider(cspParams);

            // Read private/public key pair from file
            privateKeyFile = File.OpenText(privateKeyFileName);
            privateKeyText = privateKeyFile.ReadToEnd();

            // Import private/public key pair
            rsaProvider.FromXmlString(privateKeyText);

            // Read encrypted text from file
            encryptedFile = File.OpenRead(encryptedFileName);
            encryptedBytes = new byte[encryptedFile.Length];
            encryptedFile.Read(encryptedBytes, 0, (int)encryptedFile.Length);

            // Decrypt text
            plainBytes = rsaProvider.Decrypt(encryptedBytes, false);

            // Write decrypted text to file
            plainFile = File.CreateText(plainFileName);
            plainText = Encoding.Unicode.GetString(plainBytes);
            plainFile.Write(plainText);
        }
        catch (Exception ex)
        {
            // Any errors? Show them
            Console.WriteLine("Exception decrypting file! More info:");
            Console.WriteLine(ex.Message);
        }
        finally
        {
            // Do some clean up if needed
            if (privateKeyFile != null)
            {
                privateKeyFile.Close();
            }
            if (encryptedFile != null)
            {
                encryptedFile.Close();
            }
            if (plainFile != null)
            {
                plainFile.Close();
            }
        }

    } // Decrypt 
```

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-04-09T11:59:15.303

我想通了。基本上使用 BouncyCastle 和 C# 读取私有 openssl 密钥是这样的：

```
static AsymmetricKeyParameter readPrivateKey(string privateKeyFileName)
{
    AsymmetricCipherKeyPair keyPair;

    using (var reader = File.OpenText(privateKeyFileName))
        keyPair = (AsymmetricCipherKeyPair)new PemReader(reader).ReadObject();

    return keyPair.Private;
} 
```

然后可以使用此密钥来解密数据，如下所示：

```
AsymmetricKeyParameter key = readPrivateKey(pemFilename);       
RsaEngine e = new RsaEngine();      
e.Init(false, key);

byte[] decipheredBytes = e.ProcessBlock(cipheredData, 0, cipheredData.Length); 
```

# java - 用于 Java 中看起来很奇怪的显式类型参数声明语法

> ID：15629552
> 
> 赞同：14
> 
> 时间：2013-03-26T04:47:11.043
> 
> 标签：java, generics, syntax, types

我最近遇到了在调用 Java 方法时显式声明泛型类型的奇怪语法。例如：

```
Collections.<String>emptyList(); 
```

返回一个空`List<String>`。然而，这似乎很愚蠢，因为它的实现`<T> emptyList()`只是未经检查的类型转换`(List<T>) EMPTY_LIST`，因此所有结果都具有相同的类型擦除（并且是相同的对象）。此外，通常不需要这种显式类型声明，因为编译器通常可以推断类型：

```
List<String> empty = Collections.emptyList(); 
```

在进行了更多挖掘之后，我发现了另外两次你想要使用这种语法的地方，它们都是由于使用了 Guava 库并且**显然试图在一行中放置太多语句**。

1.  装饰集合，例如使用同步包装器，编译器无法推断类型。如果您取出类型声明，则以下内容不起作用`cannot convert from Set<Object> to Set<String>`：：

    ```
    Set<String> set = Collections.synchronizedSet(Sets.<String>newHashSet()); 
    ```

2.  当编译器尝试生成过于具体的类型参数时，获取不太具体的类型参数。例如，如果没有类型声明，以下语句也会抱怨`cannot convert from Map<String, String> to Map<String, Object>`：

    ```
    Map<String, Object> toJson = ImmutableMap.<String, Object>of("foo", "bar"); 
    ```

我发现具有讽刺意味的是，在第一种情况下推断的类型参数过于笼统，而在第二种情况下它们过于具体，但我认为这只是 Java 中泛型系统的产物。

[但是，除了Guava 团队发明的](http://code.google.com/p/guava-libraries/issues/detail?id=883)这些奇怪的用例之外，这种语言结构本身似乎是可以避免的。此外，在我看来，编译器**有*一种*方法可以在上述两个示例中推断类型参数**，而开发人员只是选择不这样做。是否有在 Java 编程中使用此构造的必要或有用的示例，或者它的存在仅仅是为了使编译器更简单/JDK 开发人员的生活更轻松？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-26T04:55:39.830

“关闭编译器”如何不是“必要或有用的”？我发现编译我的代码既必要*又有*用。

正如您已经发现的那样，有时无法推断出正确的类型。在这种情况下，有必要[明确指定类型参数](http://www.angelikalanger.com/GenericsFAQ/FAQSections/TechnicalDetails.html#What%20explicit%20type%20argument%20specification?)。编译器不够聪明的一些例子：

*   [为什么 javac 不能为用作参数的函数推断泛型类型参数？](https://stackoverflow.com/q/14651589/139010)
*   [泛型类型推断失败？](https://stackoverflow.com/q/4149825/139010)

如果你*真的*想深入了解类型推断的复杂性，它从 Java 语言规范开始和结束。您需要关注[JLS §15.12.2.7。根据实际参数](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.12.2.7)和[§15.12.2.8 推断类型参数。推断未解决的类型参数](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.12.2.8)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-27T19:38:08.203

我发现至少一种编译器正确推断类型的情况，并且仍然需要它：当您想将结果用作更通用的类型时。采用这种方法，它基本上`List<T>`从零个或多个`T`对象创建一个：

```
public static <T> List<T> listOf(T... items) {
    ArrayList<T> list = new ArrayList<T>();
    for (T item : items)
        list.add(item);

    return list;
} 
```

这个想法是你可以像这样使用它：

```
List<Integer> numbers = ListUtils.listOf(1, 2, 3); 
```

现在，假设您有一个可以接收的方法`List<Object>`：

```
public static void a(List<Object> objs) {
    ...
} 
```

并且您想提供通过以下`listOf()`方法构建的列表：

```
a(ListUtils.listOf(1, 2, 3)); 
```

这不会编译，因为方法参数类型是`List<Object>`并且提供的参数是`List<Integer>`. 在这种情况下，我们可以将调用更改为：

```
a(ListUtils.<Object>listOf(1, 2, 3)); 
```

正如预期的那样编译。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T05:01:30.243

Java 类型推断非常弱。唯一不需要在泛型方法中包含显式类型的情况`emptyList()`是，方法的结果定义了一个变量。如果您尝试将一个空列表作为另一个方法的参数传递（示例 1），这种情况每天都会出现在我身上（而且我还没有使用 Guava），编译器就会完全放弃类型推断。我看不出将空列表声明为本地的一次性变量是如何“在一行上放置太多语句”的。空列表是一个非常简单的子表达式，只是 Java 糟糕的类型推断使它变得复杂。与 Scala 相比，它将在 3 种不同的情况下进行推理。

# php - mysql左，右连接不返回空值

> ID：15629553
> 
> 赞同：-5
> 
> 时间：2013-03-26T04:47:28.623
> 
> 标签：php, mysql, sql, left-join, right-join

**sql代码：**

```
SELECT * from propertyfield as pf 
RIGHT JOIN property as p 
ON (pf.pfid = p.propID) 
```

不返回空值

**或者**

```
SELECT * from propertyfield as pf 
RIGHT JOIN property as p 
ON (pf.pfid = p.propID) 
where p.propID is null 
```

不返回空值

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T04:53:13.993

试试这个：使用`LEFT JOIN`

```
SELECT * from propertyfield as pf 
LEFT JOIN property as p 
ON (pf.pfid = p.propID) 
```

从你的问题来看，它说它`p.propID`有空值。所以让它`propertyfield`成为你的左表，它提供了它的所有数据。并`property`成为您的正确表，它给出相应的值，如果没有值，则为 null。

# javascript - Javascript 文件的预加载

> ID：15629555
> 
> 赞同：0
> 
> 时间：2013-03-26T04:47:55.130
> 
> 标签：javascript, html, preload

开发一个小型引擎来运行我的 HTML5 测试游戏，使用它作为深入了解 Javascript 并同时获得乐趣的好方法。成功了，顺便说一句。

然而，我刚刚发现了这个很酷的小脚本，叫做 PreloadJS ( [http://www.createjs.com/#!/PreloadJS](http://www.createjs.com/#!/PreloadJS) )。也使用了 John Resig 的经典继承类 JS。很酷，很享受。我正在尝试使用 PreloadJS 来提取我的所有引擎文件……但我似乎遇到了问题。这是我正在使用的代码（故意保持简单）：

```
var ScriptLoader = Class.extend({       // Want to add functionality to this to allow PHP or inline loading...perhaps later
  init: function() {

    this.fileList = [
        'Empty.js',
        './engine/Scene.js'
    ];

    this.preload;
  },

  loadProjectSource: function(directory) {
    if (this.preload != null) { this.preload.close(); }

    this.preload = new createjs.LoadQueue();
    this.preload.addEventListener("fileload", this.fileLoaded);
    this.preload.addEventListener("error", this.fileError);
    this.preload.setMaxConnections(5);

    this.loadAnother();

  },

  loadAnother: function() {
    var item = this.fileList.shift();
    if(this.fileList.length != 0) {
        this.preload.loadFile(item);
    }
  },

  fileLoaded: function(e) {
    debug('Loaded ' + e.item.src);
    this.loadAnother();
  },

  fileError: function(e) {
    debug('Error ' + e.item.src);
  }
} 
```

从我的引擎实例化中，我正在调用 ScriptLoader.loadProjectSource。它除了抛出错误什么都不做，而且关于错误处理（以及一般加载 JS 文件......）的文档在 PreloadJS 网站上非常稀少。它专注于预加载图像（诚然，它看起来很棒）。无论如何，是的，它会引发错误。它不可能是文件，因为我尝试加载一个完全空白的 JS 文件（如您所见）。仍然在 Empty.js 文件上抛出错误。

恼火:) 在此先感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T16:39:48.733

PreloadJS 脚本在浏览器支持的情况下使用 XHR。为了使其与本地托管的脚本一起正常运行，必须运行本地网络服务器。激活我的本地网络服务器并尝试相同的操作后，完全成功。

# c# - SqlDataSource 中的子查询导致错误（asp.net）

> ID：15629557
> 
> 赞同：1
> 
> 时间：2013-03-26T04:48:01.013
> 
> 标签：c#, asp.net, sql, gridview, subquery

错误：（使用 ASP.NET/C# 的 Microsoft Visual Studio）：

> 子查询返回超过 1 个值。当子查询跟随 =、!=、<、<=、>、>= 或子查询用作表达式时，这是不允许的。

更多细节：前面的错误是由以下代码引起的。它是一个 GridView 和关联的 SQLDataSource。

```
<asp:GridView ID="gGrid" runat="server" AutoGenerateColumns="False" 
    DataSourceID="sqlAll" AllowPaging="True" 
    onpageindexchanging="grdGrid_PageIndexChanging">
    <Columns>
        <asp:BoundField DataField="A" HeaderText="A" 
            SortExpression="A" />
        <asp:BoundField DataField="G" HeaderText="G" 
            SortExpression="PeriodCode" />
        <asp:BoundField DataField="Value" HeaderText="Value" SortExpression="Value" />
    </Columns>
</asp:GridView>

    <asp:SqlDataSource ID="sqlAll" runat="server" 
        ConnectionString="<%$ ConnectionStrings:ConnectionDB01 %>" 
        SelectCommand="SELECT [A], [G], [H] FROM [Table1] 
    WHERE [B] = 
        (SELECT [B] 
          FROM [Table2] 
            WHERE [C] = @C) 
    AND ([D] = 
        (SELECT [D] 
            FROM [Table3] 
              WHERE [E] = @E))
    AND ([A] < @A) AND ([A] > @A2)">
        <SelectParameters>
            <asp:ControlParameter ControlID="ddlBlah2" Name="AreaName" 
                PropertyName="SelectedValue" Type="String" />
            <asp:ControlParameter ControlID="ddlBlah" Name="B" 
                PropertyName="SelectedValue" Type="String" />
            <asp:ControlParameter ControlID="txtEndA" Name="A" 
                PropertyName="Text" Type="Decimal" />
            <asp:ControlParameter ControlID="txtStartA" Name="A2" 
                PropertyName="Text" Type="Decimal" />
         </SelectParameters>
    </asp:SqlDataSource>
    <br /> 
```

（@Letter 表示它们来自下拉列表参考。）

点评：很明显，代码中有子查询。但是，如何解决非子查询限制？:( 这些事情通常是如何处理的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T04:53:42.463

```
 (SELECT [B] 
      FROM [Table2] 
        WHERE [C] = @C) 
 change this query to like this
     (SELECT TOP 1[B] 
       FROM [Table2] 
        WHERE [C] = @C) 

 or use IN instead of =

     WHERE [B] IN 
      (SELECT [B] 
      FROM [Table2] 
        WHERE [C] = @C) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T06:05:43.820

您的子查询的问题是，当您尝试执行诸如 =、<、<=、>、>= 之类的操作时，它只能将一个值与另一个值进行比较，而不能将一个值与一组值进行比较。假设这样，您的子查询**SELECT [B] FROM [Table2] WHERE [C] = @C**返回多个值，它将抛出此错误。

你可以使用这个子查询，如果你确定子查询只会返回一个值（可能是因为 [C] 是主键），否则你可以使用@Devesh 答案。

# java - 在多个分隔符上标记字符串

> ID：15629560
> 
> 赞同：0
> 
> 时间：2013-03-26T04:48:12.407
> 
> 标签：java, regex, stringtokenizer

我想将字符串标记为键值对。但是键有下划线、逗号、空格等字符。键值对由 = 字符分隔

例子：

> key=value start_time="2013-03-01 03:20:40" key withspace=space1 两个withspace=space2 key=value key-key key=value key_underscore=500058 key=value-value key=value_value

所需的输出是

> key=value
> start_time="2013-03-01 03:20:40"
> key withspace=space1
> 两个withspace=space2
> key-key key=value
> key_underscore=500058
> key=value-value
> key=value_value

这有助于我在地图中填充值并将其放入表格中。

我可以使用任何现有的方法，如 StringTokenizer、Patter、String.split() 等。还是我应该编写自己的字符串解析器来获得这种类型的输出。

只想检查一些最好的方法来实现这一点

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T04:50:30.047

`String.split()`需要一个正则表达式。如果您可以输入一个正则表达式来匹配您的一组键，您可以使用它

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T05:04:26.477

带空格的键不起作用，至少在给定的规则下。`key=value - value key= value_value`是模棱两可的。最后一个键值对可以提取为`key = value_value`或`value key= value_value`。

# jboss5.x - 在 Jboss 中更改管理控制台密码

> ID：15629565
> 
> 赞同：7
> 
> 时间：2013-03-26T04:48:33.737
> 
> 标签：jboss5.x

如何使用 Web 控制台更改管理员控制台密码现在我启动我的 Jboss 并给出路径直到浏览器上的默认端口，然后我点击管理控制台它询问我用户名和密码然后我给它，但没有任何选项那里更改密码，

那我该怎么做才能更改密码？

请告诉我步骤

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2017-06-28T19:10:00.713

进入jboss安装根目录。然后导航到 bin 文件夹。启动 ./add-user.sh 然后输入现有用户名，并在警告用户已经存在后输入新密码。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-05-15T11:54:52.607

1.登录到您的服务器并打开根目录。
2.打开路径“server > default > conf >props/”并查找“jmx-console-users.properties”文件。
3.使用记事本等文本编辑器打开“jmx-console-users.properties”。您将看到格式为“username=password”的用户名和密码列表。
4.删除管理员控制台帐户的密码并输入新密码。
5.将修改后的文件上传回props文件夹

# facebook - 使用 publish_stream 权限将自定义操作发布到时间线？

> ID：15629567
> 
> 赞同：1
> 
> 时间：2013-03-26T04:48:37.817
> 
> 标签：facebook, facebook-graph-api, facebook-php-sdk

我正在尝试以下操作将自定义操作发布到我的时间线上。使用 Graph API Explorer 也实现了相同的效果。

```
 $facebook = new Facebook(array('appId' => '123456789',
                                    'secret' => '123456789',
                                    'cookie' => true));
    $access_token = $facebook->getAccessToken();

    if($access_token != "") 
    {
        $user = $facebook->getUser();

        if($user != 0)
        {
            $queries = array(array("method" => "POST", "relative_url" => "/me/namespace:action?object=http://www.mysite.com/url/parameters"));

            try 
            {
                $postResponseA = $facebook->api("?batch=".json_encode($queries), "POST");
            } catch (FacebookApiException $e) 
            {
                echo 'AF error: '.$e;
            }
        }
    } 
```

没有错误被抛出。虽然没有发布任何内容。

print_r($postResponseA) 显示以下内容：

```
Array ( [0] => Array ( [code] => 400 [headers] => Array ( [0] => Array ( [name] => Access-Control-Allow-Origin [value] => * ) [1] => Array ( [name] => Cache-Control [value] => no-store ) [2] => Array ( [name] => Connection [value] => close ) [3] => Array ( [name] => Content-Type [value] => text/javascript; charset=UTF-8 ) [4] => Array ( [name] => Expires [value] => Sat, 01 Jan 2000 00:00:00 GMT ) [5] => Array ( [name] => Pragma [value] => no-cache ) [6] => Array ( [name] => WWW-Authenticate [value] => OAuth "Facebook Platform" "invalid_request" "An active access token must be used to query information about the current user." ) ) [body] => {"error":{"message":"An active access token must be used to query information about the current user.","type":"OAuthException","code":2500}} ) ) 
```

# java - 尝试使用 servlet 和 jsp 插入 mysql 时出错

> ID：15629574
> 
> 赞同：0
> 
> 时间：2013-03-26T04:49:11.377
> 
> 标签：java, mysql, jsp, servlets, javabeans

嗨，我想在数据库中插入几个字段名，为此我正在使用 java bean、jsp 和 servlet，但我得到了错误。我尝试使用preparedStatement，然后我尝试使用语句，但在这两种情况下我都得到错误>请指出错误在哪里。我的代码如下。我使用的是eclipse juno IDE

register1.java

```
import java.io.IOException;
import java.io.PrintWriter;

import javax.servlet.ServletException;
import javax.servlet.annotation.WebServlet;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import java.sql.*;
import com.mysql.jdbc.Connection;
import com.mysql.jdbc.PreparedStatement;

import DB.DataBaseConnection;

/**
 * Servlet implementation class register
 */
@WebServlet(register1.REGISTER1)
public class register1 extends HttpServlet {
    static final String REGISTER1 = "/register1";
    private static final long serialVersionUID = 1L;

    /**
     * @see HttpServlet#HttpServlet()
     */
    public register1() {
        super();
        // TODO Auto-generated constructor stub
    }

    /**
     * @see HttpServlet#doGet(HttpServletRequest request, HttpServletResponse response)
     */
    protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        // TODO Auto-generated method stub
    }

    /**
     * @see HttpServlet#doPost(HttpServletRequest request, HttpServletResponse response)
     */
    protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        // TODO Auto-generated method stub
        PrintWriter out=response.getWriter();
        try{
        DataBaseConnection db=new DataBaseConnection();
        java.sql.Connection con= db.connet();
        String FirstName=request.getParameter("FirstName");
        String LastName=request.getParameter("LastName");
        String DOB=request.getParameter("DOB");
        String Qualification=request.getParameter("Qualification");
        String RegistrationNo=request.getParameter("RegistrationNo");
        String CountryOfRegistration=request.getParameter("CountryOfRegistration");
        String PracticeName=request.getParameter("PracticeName");
        String Phone=request.getParameter("Phone");
        String Email=request.getParameter("Email");
        String Address=request.getParameter("Address");
        String Street=request.getParameter("Street");
        String City=request.getParameter("City");
        String State=request.getParameter("State");
        String Country=request.getParameter("Country");
        String PinCode=request.getParameter("PinCode");
        String HowDoYouKnow=request.getParameter("HowDoYouKnow");
        String Comments=request.getParameter("Comments");

out.println(FirstName);

        //ps = (PreparedStatement) con.prepareStatement("insert into registration values(?,?,?)");
Statement st=con.createStatement();
st.executeUpdate("insert into registration values(v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v)");
//      PreparedStatement ps=(PreparedStatement) con.prepareStatement("insert into registration values(?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)");
//      out.println(FirstName);
//
//  ps.setString(1, FirstName);
//  out.println(FirstName);
//
//  ps.setString(2,LastName);
//  ps.setString(3,DOB);
//  out.println(FirstName);
//
//  ps.setString(4,Qualification);
//  ps.setString(5, RegistrationNo);
//  ps.setString(6, CountryOfRegistration);
//  ps.setString(7, PracticeName);
//  ps.setString(8, Phone);
//  ps.setString(9, Email);
//  ps.setString(10, Address);
//  ps.setString(11, Street);
//  ps.setString(12, City);
//  ps.setString(13, State);
//  ps.setString(14, Country);
//  ps.setString(15, PinCode);
//  ps.setString(16, HowDoYouKnow);
//  ps.setString(17, Comments);
//  ps.executeUpdate();

    }
    catch(Exception e)
    {
        e.printStackTrace();
    }

}
} 
```

爪哇豆

```
package register;
import java.sql.DriverManager;
import java.sql.ResultSet;
import java.sql.SQLException;

import com.mysql.jdbc.Connection;
import com.mysql.jdbc.PreparedStatement;
import com.mysql.jdbc.Statement;

import DB.DataBaseConnection;
public class registration {

        private String FirstName;
        private String LastName;
        private String DOB;
        private String Qualification;
        private String RegistrationNo;
        private String CountryOfRegistration;
        private String PracticeName;
        private String Phone;
        private String Email;
        private String Address;
        private String Street;
        private String City;
        private String State;
        private String Country;
        private String PinCode;
        private String HowDoYouKnow;
        private String Comments;
        public registration()
        {
            this.FirstName=FirstName;
            this.LastName=LastName;
            this.DOB=DOB;
            this.Qualification=Qualification;
            this.RegistrationNo=RegistrationNo;
            this.CountryOfRegistration=CountryOfRegistration;
            this.PracticeName=PracticeName;
            this.Phone=Phone;
            this.Email=Email;
            this.Address=Address;
            this.Street=Street;
            this.City=City;
            this.State=State;
            this.Country=Country;this.PinCode=PinCode;this.HowDoYouKnow=HowDoYouKnow;   
            this.Comments=Comments;
        }
        public void setFirstName(String FirstName)
        {
            this.FirstName=FirstName;
        }
        public String getFirstName()
        {
            return FirstName;
        }
        public void setLastName(String LastName)
        {
            this.LastName=LastName;
        }
        public String getLastName()
        {
            return LastName;
        }public void setDOB(String DOB)
        {
            this.DOB=DOB;
        }
        public String getDOB()
        {
            return DOB;
        }public void setQualification(String Qualification)
        {
            this.Qualification=Qualification;
        }
        public String getQualification()
        {
            return Qualification;
        }public void setRegistrationNo(String RegistrationNo)
        {
            this.RegistrationNo=RegistrationNo;
        }
        public String getRegistrationNo()
        {
            return RegistrationNo;
        }public void setCountryOfRegistration(String CountryOfRegistration)
        {
            this.CountryOfRegistration=CountryOfRegistration;
        }
        public String getCountryOfRegistration()
        {
            return CountryOfRegistration;
        }public void setPracticeName(String PracticeName)
        {
            this.PracticeName=PracticeName;
        }
        public String getPracticeName()
        {
            return PracticeName;
        }public void setPhone(String Phone)
        {
            this.Phone=Phone;
        }
        public String getPhone()
        {
            return Phone;
        }public void setEmail(String Email)
        {
            this.Email=Email;
        }
        public String getEmail()
        {
            return Email;
        }public void setAddress(String Address)
        {
            this.Address=Address;
        }
        public String getAddress()
        {
            return Address;
        }public void setStreet(String Street)
        {
            this.Street=Street;
        }
        public String getStreet()
        {
            return Street;
        }public void setCity(String City)
        {
            this.City=City;
        }
        public String getCity()
        {
            return City;
        }public void setState(String State)
        {
            this.State=State;
        }
        public String getState()
        {
            return State;
        }public void setCountry(String Country)
        {
            this.Country=Country;
        }
        public String getCountry()
        {
            return Country;
        }public void setPinCode(String PinCode)
        {
            this.PinCode=PinCode;
        }
        public String getPinCode()
        {
            return PinCode;
        }public void setHowDoYouKnow(String HowDoYouKnow)
        {
            this.HowDoYouKnow=HowDoYouKnow;
        }
        public String getHowDoYouKnow()
        {
            return HowDoYouKnow;
        }public void setComments(String Comments)
        {
            this.Comments=Comments;
        }
        public String getComments()
        {
            return Comments;
        }
        public String insert() throws ClassNotFoundException 
        {
            String output="";
        //public void insert(String FirstName,String LastName,String DOB) throws SQLException
        //{
        //DataBaseConnection db= new DataBaseConnection();
        //Connection con =(Connection) db.connet();
        //PreparedStatement ps=(PreparedStatement) con.prepareStatement("insert into registration values(?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)");
        //PreparedStatement ps;
        try {
            Class.forName("com.mysql.jdbc.Driver");
            Connection con=(Connection) DriverManager.getConnection("jdbc:mysql://localhost:3306/test","sukanth","");
            //ps = (PreparedStatement) con.prepareStatement("insert into registration values(?,?,?)");
            PreparedStatement ps=(PreparedStatement) con.prepareStatement("insert into registration values(?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)");

        ps.setString(1, FirstName);
        ps.setString(2,LastName);
        ps.setString(3,DOB);

        ps.setString(4,Qualification);
        ps.setString(5, RegistrationNo);
        ps.setString(6, CountryOfRegistration);
        ps.setString(7, PracticeName);
        ps.setString(8, Phone);
        ps.setString(9, Email);
        ps.setString(10, Address);
        ps.setString(11, Street);
        ps.setString(12, City);
        ps.setString(13, State);
        ps.setString(14, Country);
        ps.setString(15, PinCode);
        ps.setString(16, HowDoYouKnow);
        ps.setString(17, Comments);
        ps.executeUpdate();
        output="sucess";

        }
        catch (SQLException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
            output=e.toString();
        }
        /*public static void main(String args[]) throws SQLException
        {
            registration r=new registration();
            r.insert("s","k","n");
        }*/
        return output;
    }
//      public static void main(String args[]) throws SQLException, ClassNotFoundException
//      {
//          registration r=new registration();
//          r.insert();
//      }

} 
```

数据取自这个jsp

```
<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head><jsp:useBean id="registration" class="register.registration" scope="request">
<jsp:setProperty property="*" name="registration"/></jsp:useBean>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Insert title here</title>
</head>
<body>
<form action ="register1" method="post">
FirstName<input type="text" name="FirstName">Lastname<input type="text" name="LastName"><br>
DOB<input type="text" name="DOB">Qualification<input type="text" name="Qualification"><br>
RegistrationNo<input type="text" name="RegistrationNo">CountryOfRegistration<input type="text" name="CountryOfRegistration"><br>
PracticeName<input type="text" name="PracticeName">Phone<input type="text" name="Phone"><br>
Email<input type="text" name="Email">Address<input type="text" name="Address"><br>
Street<input type="text" name="Street">City<input type="text" name="City"><br>
State<input type="text" name="State">Country<input type="text" name="Country"><br>
PinCode<input type="text" name="PinCode">HowDoYouKnow<input type="text" name="HowDoYouKnow"><br>
Comments<input type="text" name="Comments"><br>
<input type ="submit" name ="submit">
<input type="reset" name="reset">

</form>
</body>
</html> 
```

这是错误

```
Mar 26, 2013 5:48:53 AM org.apache.catalina.core.AprLifecycleListener init
INFO: The APR based Apache Tomcat Native library which allows optimal performance in production environments was not found on the java.library.path: /usr/lib/jvm/java-1.6.0-openjdk-1.6.0.0/jre/lib/i386/client:/usr/lib/jvm/java-1.6.0-openjdk-1.6.0.0/jre/lib/i386:/usr/lib/jvm/java-1.6.0-openjdk-1.6.0.0/jre/../lib/i386:/usr/lib/jvm/java-1.6.0-openjdk-1.6.0.0/jre/lib/i386/client:/usr/lib/jvm/java-1.6.0-openjdk-1.6.0.0/jre/lib/i386::/usr/java/packages/lib/i386:/lib:/usr/lib
Mar 26, 2013 5:48:54 AM org.apache.tomcat.util.digester.SetPropertiesRule begin
WARNING: [SetPropertiesRule]{Server/Service/Engine/Host/Context} Setting property 'source' to 'org.eclipse.jst.jee.server:project1' did not find a matching property.
Mar 26, 2013 5:48:54 AM org.apache.tomcat.util.digester.SetPropertiesRule begin
WARNING: [SetPropertiesRule]{Server/Service/Engine/Host/Context} Setting property 'source' to 'org.eclipse.jst.jee.server:project2' did not find a matching property.
Mar 26, 2013 5:48:54 AM org.apache.tomcat.util.digester.SetPropertiesRule begin
WARNING: [SetPropertiesRule]{Server/Service/Engine/Host/Context} Setting property 'source' to 'org.eclipse.jst.jee.server:project3' did not find a matching property.
Mar 26, 2013 5:48:54 AM org.apache.coyote.AbstractProtocol init
INFO: Initializing ProtocolHandler ["http-bio-8080"]
Mar 26, 2013 5:48:54 AM org.apache.coyote.AbstractProtocol init
INFO: Initializing ProtocolHandler ["ajp-bio-8009"]
Mar 26, 2013 5:48:54 AM org.apache.catalina.startup.Catalina load
INFO: Initialization processed in 2844 ms
Mar 26, 2013 5:48:55 AM org.apache.catalina.core.StandardService startInternal
INFO: Starting service Catalina
Mar 26, 2013 5:48:55 AM org.apache.catalina.core.StandardEngine startInternal
INFO: Starting Servlet Engine: Apache Tomcat/7.0.37
Mar 26, 2013 5:48:55 AM org.apache.catalina.util.SessionIdGenerator createSecureRandom
INFO: Creation of SecureRandom instance for session ID generation using [SHA1PRNG] took [117] milliseconds.
Mar 26, 2013 5:48:56 AM org.apache.coyote.AbstractProtocol start
INFO: Starting ProtocolHandler ["http-bio-8080"]
Mar 26, 2013 5:48:56 AM org.apache.coyote.AbstractProtocol start
INFO: Starting ProtocolHandler ["ajp-bio-8009"]
Mar 26, 2013 5:48:56 AM org.apache.catalina.startup.Catalina start
INFO: Server startup in 1493 ms
java.lang.NullPointerException
    at register1.doPost(register1.java:77)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:647)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:728)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:222)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:171)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:936)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1004)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:589)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:312)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:679)
java.lang.NullPointerException
    at register1.doPost(register1.java:77)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:647)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:728)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:222)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:171)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:936)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1004)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:589)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:312)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:679)
java.lang.NullPointerException
    at register1.doPost(register1.java:77)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:647)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:728)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:222)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:171)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:936)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1004)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:589)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:312)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:679)
java.lang.NullPointerException
    at register1.doPost(register1.java:77)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:647)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:728)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:222)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:171)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:936)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1004)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:589)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:312)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:679) 
```

这是 DataBaseConnection 类

```
package DB;
import  java.sql.*;
public class  DataBaseConnection
{public static void main(String[] args) throws SQLException, ClassNotFoundException
    {

    DataBaseConnection db= new DataBaseConnection();
    Connection  con=db.connet();
        if(!con.isClosed())
        {
            System.out.println("connectedn");
        }
        }
public Connection connet() 
{
    Connection con=null;

    try
    {
Class.forName("com.mysql.jdbc.Driver");
con=DriverManager.getConnection("jdbc:mysql://localhost:3306/test","sukanth","");
return con;
    }
    catch(Exception e)
    {
        return  con;
    }

}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T05:20:14.360

```
java.lang.NullPointerException
    at register1.doPost(register1.java:77) 
```

该错误清楚地`NullPointerException`表明

```
protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        // TODO Auto-generated method stub
        PrintWriter out=response.getWriter();
        try{
        DataBaseConnection db=new DataBaseConnection();
        java.sql.Connection con= db.connet();
        //...... 
       //Statement st=con.createStatement(); // This may be the root cause of exception
       // check null here
      if(con!=null){
        // create statement or prepared statement
      }  
} 
```

修改DataBaseConnection.java

```
package DB;
import java.sql.*;
public class DataBaseConnection {
    public Connection connet() {
        Connection con=null;
        try
        {
            Class.forName("com.mysql.jdbc.Driver");
            con=DriverManager.getConnection("jdbc:mysql://localhost:3306/test","sukanth","");
        }
        catch(Exception e)
        {
            e.printStacktrace();
        }
        return con;
    }
} 
```

另外，请确保您`mysqljdbc.jar`的 CLASSPATH 中有。复制`mysqljdbc.jar`于`WEB-INF/lib`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T05:38:01.070

您尚未提供`Class.forName()`在 Register1.java 中加载驱动程序的方法

```
Class.forName("com.mysql.jdbc.Driver");
Connection con = DriverManager.getConnection("jdbc:mysql://localhost:3306/test","sukanth","");
Statement st=con.createStatement();
//remaining codes 
```

确保您在 JSP 页面中提供了所有值。还要确保数据库中的 DOB 字段是字符串，如果不是，将 servlet 中的 DOB 字段转换为日期格式

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T05:06:20.740

`I think you simply mixed up the code. You put the connection and insertion related logic in your`servlet 的注册类`, then what is there in DataBaseConnection class and what is its role? You are not clear with this code. Whatever`注册类 insetrt() `method is doing the same you are doing in`doPost(-,-)` 方法。

我认为不需要使用 bean 类来设置和获取表单组件值。只需使用一个包含两种方法的 bean 类，一种用于建立 DB 连接，另一种用于释放连接。在 servlet 的 doGet(-,-) 方法中创建它的对象，并像使用 request.getParameter(-) 一样读取所有表单组件值，然后使用 pstmnt.setXxx() 将这些值设置为查询的占位符，然后简单地执行查询. 执行成功后调用bean类的第二个方法释放连接。

试试这个，我希望它会有所帮助......

```
 //write a bean class in some package(p1)
    package p1;
    //import all required classes/interfaces
    public class DBConn{
    private Connection con;
    public Connection getConnection() throws SQLException{
    Class.forName("com.mysql.jdbc.Driver");
    con= DriverManager.getConnection("jdbc:mysql://host_ipaddress:port no./sid","username","password");
    return con;
    }

    public void releaseConnection() throws SQLException{

     if(con!=null)
     con.close();
      }
    }

//Take a form page(jsp/html) same as you have....

//write a servlet to insert the form page data in DB..

//import all classes and interfaces here...
public class register1 extends HttpServlet {

protected void doGet(HttpServletRequest request, HttpServletResponse response) {
  try{  
        // set content type and get an output stream...      
        response.setContentType("text/html");
        PrintWriter out=response.getWriter();

        //create bean class object and get a connection object...
        DBConn db=new DBConn();
        java.sql.Connection con= db.getConnection();

        // read all request parameter values from request...
        String FirstName=request.getParameter("FirstName");
        String LastName=request.getParameter("LastName");
        String DOB=request.getParameter("DOB");
        String Qualification=request.getParameter("Qualification");
        String RegistrationNo=request.getParameter("RegistrationNo");
        String CountryOfRegistration=request.getParameter("CountryOfRegistration");
        String PracticeName=request.getParameter("PracticeName");
        String Phone=request.getParameter("Phone");
        String Email=request.getParameter("Email");
        String Address=request.getParameter("Address");
        String Street=request.getParameter("Street");
        String City=request.getParameter("City");
        String State=request.getParameter("State");
        String Country=request.getParameter("Country");
        String PinCode=request.getParameter("PinCode");
        String HowDoYouKnow=request.getParameter("HowDoYouKnow");
        String Comments=request.getParameter("Comments");

        // get a pre-compiled query with the help of PreparedStatement ...
        PreparedStatement ps =con.prepareStatement("insert into <table name>
values(?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)");

   //set the place holder parameters values to the pre-compiled query..
    ps.setString(1, FirstName);
    ps.setString(2,LastName);
    ps.setString(3,DOB);
    ps.setString(4,Qualification);
    ps.setString(5, RegistrationNo);
    ps.setString(6, CountryOfRegistration);
    ps.setString(7, PracticeName);
    ps.setString(8, Phone);
    ps.setString(9, Email);
    ps.setString(10, Address);
    ps.setString(11, Street);
    ps.setString(12, City);
    ps.setString(13, State);
    ps.setString(14, Country);
    ps.setString(15, PinCode);
    ps.setString(16, HowDoYouKnow);
    ps.setString(17, Comments);
  int counter= ps.executeUpdate();

    if(counter>0)
    {
     out.println("Values inserted successfully...");
    db.releaseConnection();
    }
  else if(counter<=0)
   {
    out.println("Something went wrong, Values couldn't inserted in DB..");
    db.releaseConnection();
   }

    }
    catch(SQLException sqle)
    {
        sqle.printStackTrace();
    }
   catch(ServletException se)
   {
   se.printStackTrace();
    }
   catch(IOException ie)
   {
    ie.printStackTrace();
   }
   catch(Exception e)
   {
    e.printStackTrace();
   }

  }//doGet(-,-) closing.....

  protected void doPost(HttpServletRequest request, HttpServletResponse response) {
     doGet(request,response);
    }//doPost(-,-) closing...
}// servlet class closing... 
```

// 不要忘记使用 URL 映射您的 servlet，并在您的表单页面上将其用作表单标签的操作值，以及应用程序或服务器的 lib 文件夹的类路径和 lib 文件夹中的 MYSQL 相关 Connector/J jar 文件（如果将它放在应用程序的 lib 文件夹中会更好）。希望你会清楚。

# jquery - jQuery append() - 将 li-tags 放到列表中

> ID：15629578
> 
> 赞同：0
> 
> 时间：2013-03-26T04:49:54.903
> 
> 标签：jquery, html, append

我有一些 ul 上课

```
<ul class="class">

</ul> 
```

我有 jquery 脚本，它必须在 ul-tags 之间放置 li-tags：

```
$(document).ready(function() {
  $("select option").each(function () {
        var m = $( this ).text();
        $("ul.class").append("<li>", m, "</li>");
  }); 
```

但它不起作用。脚本完成后，我看到 html 如下：

```
<ul class="class">
   <li></li>
   Option 1
   <li></li>
   Option 2
   <li></li>
   Option 3
</ul> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T04:59:11.847

利用`$("ul.class").append("<li>"+m+"</li>");`

代替

`$("ul.class").append("<li>" + m + "</li>");`.

根据[文档](http://api.jquery.com/append/)，它“将由参数指定的内容插入到匹配元素集中每个元素的末尾”。语法是`.append( content [, content ] )`或者您可以使用`.append( function(index, html) )`. 追加可以采用任意数量的附加参数。

现在发生的事情是 `$("ul.class").append("<li>" + m + "</li>");`，每个参数都将作为单独的 DOM 内容附加。这就是为什么你的“ `<li></li>`”首先被附加，然后是“文本”。“文本”将被视为附加参数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T04:56:49.383

我还建议在将 LI 元素的整个列表传递给 append(..) 之前将其构建为单个字符串。限制会导致浏览器将 DOM 结构更改为单个调用的调用更有效。

在循环中构建字符串并将其传递给循环后的追加

前任：`$('ul').append('<li>option1'</li>.....<li>optionn<li>');`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-26T04:52:38.557

```
$("ul.class").append("<li>", m, "</li>"); 
```

应该

```
$("ul.class").append("<li>" + m + "</li>"); 
```

# android - Android 应用程序在执行通知代码时崩溃

> ID：15629584
> 
> 赞同：0
> 
> 时间：2013-03-26T04:50:18.640
> 
> 标签：android, notifications

这适用于模拟器，但当安装在设备上时，会导致应用程序崩溃。

```
 String frndName=getSharedData("myOnlineFriendName");
 Intent intent = new Intent(this, MainActivity.class);
 PendingIntent pIntent = PendingIntent.getActivity(this, 0, intent, 0);
 Notification noti = new Notification.Builder(this)
  .setContentTitle("Trace Me! Notification")
  .setContentText(frndName+"'s New Location:")
  .setSmallIcon(R.drawable.ic_launcher)
  .setContentIntent(pIntent)
  .addAction(R.drawable.ic_launcher, "And more", pIntent).build();

NotificationManager notificationManager = (NotificationManager)getSystemService(NOTIFICATION_SERVICE);
playSound("n");
noti.flags |= Notification.FLAG_AUTO_CANCEL;
notificationManager.notify(0, noti); 
```

我该如何解决这个问题？

日志猫：-

```
03-26 05:29:33.387: E/WVMExtractor(39): Failed to open libwvm.so
03-26 05:29:33.837: E/WVMExtractor(39): Failed to open libwvm.so
03-26 05:29:34.147: E/WVMExtractor(39): Failed to open libwvm.so
03-26 05:29:34.467: E/WVMExtractor(39): Failed to open libwvm.so
03-26 05:29:34.807: E/WVMExtractor(39): Failed to open libwvm.so
03-26 05:29:35.067: E/WVMExtractor(39): Failed to open libwvm.so
03-26 05:29:35.227: E/WVMExtractor(39): Failed to open libwvm.so
03-26 05:29:35.417: E/WVMExtractor(39): Failed to open libwvm.so
03-26 05:29:35.537: E/WVMExtractor(39): Failed to open libwvm.so
03-26 05:29:35.657: E/WVMExtractor(39): Failed to open libwvm.so
03-26 05:29:42.127: E/SurfaceFlinger(36): ro.sf.lcd_density must be defined as a build property
03-26 05:29:42.157: E/MapActivity(1016): Couldn't get connection factory client
03-26 05:29:42.697: E/WVMExtractor(39): Failed to open libwvm.so 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T05:35:12.897

您的以下代码可在`API LEVEL 11 or ABOVE`. 这就是它在 API 11 级别以下崩溃的原因。

Insted 你可以使用这种方式.. 你必须添加`android-support-v4.jar`到你的`res/lib`文件夹中并且也这样做:`your Project property ---> Build Path --> add jar.`和`your Project property ---> Build Path --> order & export --> select all`. 在此干净并运行以下代码之后。

```
String frndName = "myOnlineFriendName";
        Intent intent = new Intent(this, MainActivity.class);
        PendingIntent pIntent = PendingIntent.getActivity(this, 0, intent, 0);
        Notification noti = new NotificationCompat.Builder(this)
                .setContentTitle("Trace Me! Notification")
                .setContentText(frndName + "'s New Location:")
                .setSmallIcon(R.drawable.ic_launcher).setContentIntent(pIntent)
                .addAction(R.drawable.ic_launcher, "And more", pIntent).build();

        NotificationManager notificationManager = (NotificationManager) getSystemService(NOTIFICATION_SERVICE);
        // playSound("n");
        noti.flags |= Notification.FLAG_AUTO_CANCEL;
        notificationManager.notify(0, noti); 
```

你可以检查你的代码在我的工作`Android 2.1 Device`

![在此处输入图像描述](../Images/023e61e755a11939be3d8c7c75e0a204.png)

API 11 以上：

![在此处输入图像描述](../Images/e05bb957945a5ceb7ae0b6439c8d9b2e.png)

# asp.net-mvc-3 - 将 vm 输出分组到视图

> ID：15629585
> 
> 赞同：1
> 
> 时间：2013-03-26T04:50:19.810
> 
> 标签：asp.net-mvc-3, linq, asp.net-mvc-4, ef-code-first, entity-framework-5

我正在寻找使用 Razor (ASP.Net MVC 4) 输出以下内容的最佳/最简单方法

```
 <ul id="contacts">
            <li data-group="a">
                <a class="title">A</a>
                <ul>
                    <li>
                        <a href="#">
                            <span class="thumbnail">
                                <img alt="" src="~/backendContent/sample/p4.jpg"></span> Adam Woodward
                                                            <span style="font-size: 11px; display: block;" class="muted">Creative Director</span>
                        </a>
                    </li>
                    <li>
                        <a href="#">
                            <span class="thumbnail">
                                <img alt="" src="~/backendContent/sample/p5.jpg"></span> Aileen Espinoza
                                                            <span style="font-size: 11px; display: block;" class="muted">Creative Director</span>
                        </a>
                    </li>
                    <li>
                        <a href="#">
                            <span class="thumbnail">
                                <img alt="" src="~/backendContent/sample/p6.jpg"></span> Aimee Foley
                                                            <span style="font-size: 11px; display: block;" class="muted">Creative Director</span>
                        </a>
                    </li>
                </ul>
            </li>
            <li data-group="b">
                <a class="title">B</a>
                <ul>
                    <li>
                        <a href="#">
                            <span class="thumbnail">
                                <img alt="" src="~/backendContent/sample/p1.jpg"></span> Baker Terry
                                                            <span style="font-size: 11px; display: block;" class="muted">Creative Director</span>
                        </a>
                    </li>                        
                </ul>
            </li>
            <li data-group="c">
                <a class="title">C</a>
                <ul>
                    <li>
                        <a href="#">
                            <span class="thumbnail">
                                <img alt="" src="~/backendContent/sample/p1.jpg"></span> Cadman Mosley
                                                            <span style="font-size: 11px; display: block;" class="muted">Creative Director</span>
                        </a>
                    </li>
                    <li>
                        <a href="#">
                            <span class="thumbnail">
                                <img alt="" src="~/backendContent/sample/p2.jpg"></span> Cailin Jones
                                                            <span style="font-size: 11px; display: block;" class="muted">Creative Director</span>
                        </a>
                    </li>                        
                </ul>
            </li>
            .
            .
            . 
```

如您所见，它是一个联系人列表，将被格式化为一个漂亮的电话簿。我目前有一个 iqueryable，它按字母顺序保存所有信息。老实说，我不确定如何使用 razor 来构建上述 html。我考虑在 linq 中使用 group 函数，并想出了以下 linq 表达式：

```
 var _customers = (from c in _db.UserProfiles.Include("ParentCompanies").Include("cProfile")
                          where (c.ParentCompanies.Any(pc => pc.CompanyUsers.Any(cu => cu.UserName == userName)) && c.cProfile != null)
                         group c by c.FirstName.Substring(0, 1) into customerGroup
                         select new { FirstLetter = customerGroup.Key, Information = customerGroup }).OrderBy(letter=>letter.FirstLetter); 
```

但是我遇到了方法的返回类型（匿名类型）的一些问题，我不知道如何处理。我现在正在使用以下内容：

```
 var _customers = (from c in _db.UserProfiles.Include("ParentCompanies").Include("cProfile")
                          where (c.ParentCompanies.Any(pc => pc.CompanyUsers.Any(cu => cu.UserName == userName)) && c.cProfile != null)
                          select c).OrderBy(f=>f.FirstName); 
```

我对 asp.net MVC 世界很陌生，任何帮助都将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T05:00:00.757

您可以为您的查询声明一个自定义返回类型并将其用作您的视图模型。

```
public class GroupedCustomersViewModel
{
    string FirstLetter { get; set; }
    IEnumerable<UserProfile> Information { get; set; }
}

....

var _customers = 
    (from c in _db.UserProfiles.Include("ParentCompanies").Include("cProfile")
     where (c.ParentCompanies.Any(pc => pc.CompanyUsers.Any(cu => cu.UserName == userName)) && c.cProfile != null)
     group c by c.FirstName.Substring(0, 1).ToUpper() into customerGroup
     select new GroupedCustomersViewModel
     {
         FirstLetter = customerGroup.Key, 
         Information = customerGroup 
     })
    .OrderBy(letter=>letter.FirstLetter); 
```

在您的`.cshtml`使用中

```
@model IEnumerable<MyProject.Namespace.Models.GroupedCustomersViewModel>

...

<ul id="contacts">
    @foreach(var group in Model)
    {
    <li data-group="@group.FirstLetter.ToLower()">
        <a class="title">@group.FirstLetter</a>
        <ul>
            @foreach(var user in group.Information)
            {
            <li>
                <a href="#">
                    <span class="thumbnail">
                        <img alt="" src="@user.Thumbnail"></span> @user.Name
                                                    <span style="font-size: 11px; display: block;" class="muted">@user.Title</span>
                </a>
            </li>
            }
        </ul>
    </li>
    }
</ul> 
```

# ios - iOS5及以上在后台运行长进程

> ID：15629587
> 
> 赞同：1
> 
> 时间：2013-03-26T04:50:23.230
> 
> 标签：ios, ios5, ios6, background-process

我有一个使用 ASIHTTP 请求运行的下载队列。当用户按下主屏幕并且应用程序进入后台时，我希望此操作继续。我知道 ASIHTTP 请求可以在后台运行，但我希望运行 ASIHTTP 请求的进程也可以在后台运行。

我该怎么做？

我在 StackOverflow 看到了这个帖子：[Continuing a long running process in the background under iOS4](https://stackoverflow.com/questions/6430781/continuing-a-long-running-process-in-the-background-under-ios4)

但解决方案是在 iOS4 中。我想在iOS5及更高版本中做到这一点..

给出的解决方案：

```
UIApplication *app = [UIApplication sharedApplication];
if ([app respondsToSelector:@selector(beginBackgroundTaskWithExpirationHandler:)]) {
    backgroundTaskIdentifier = [[UIApplication sharedApplication] beginBackgroundTaskWithExpirationHandler:^{
        dispatch_async(dispatch_get_main_queue(), ^{
            if (backgroundTaskIdentifier != UIBackgroundTaskInvalid)
            {
                // you took too long - clean up what you can, then …
                [app endBackgroundTask:backgroundTaskIdentifier];
                backgroundTaskIdentifier = UIBackgroundTaskInvalid;
            }
        });
    }];
} 
```

另一个问题是我应该把这段代码放在哪里。

需要一些指导。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T05:56:29.930

您在另一个答案中找到的解决方案适用于 iOS 4.0*及更高*版本。它工作得很好，并且仍然是在移动到后台时执行扩展任务[的推荐方式。](https://developer.apple.com/library/ios/documentation/iPhone/Conceptual/iPhoneOSProgrammingGuide/ManagingYourApplicationsFlow/ManagingYourApplicationsFlow.html#//apple_ref/doc/uid/TP40007072-CH4-SW28)

此外，除非您尝试支持 iOS 3.x——这不再那么可取了——否则您不需要`respondsToSelector`检查。

# excel - 跨越多个过滤器值的 Powerpivot 数据

> ID：15629591
> 
> 赞同：0
> 
> 时间：2013-03-26T04:50:52.593
> 
> 标签：excel, excel-formula, powerpivot, dax

我在 Excel Powerpivot 中存储了中断信息。我正在尝试使用 Powerpivot 来显示和计算每月的正常运行时间可用性，但是，我对跨越两个月的中断有点卡住了。

我目前的设置：

中断表有四列：应用程序、中断开始时间、中断结束时间、持续时间。持续时间是一个计算列，它是结束时间和开始时间之间的差异。

中断开始时间连接到日期表。我每个月都有切片器，因此用户可以选择他们喜欢查看可用性数据的月份，powerpivot 表将显示该月不同应用程序的可用性。

如果中断开始时间和结束时间在同一个月内，则可用性计算是正确的。但是，例如，如果中断从 7 月底开始并在 8 月初结束，那么这仅被认为是 7 月份的中断（因为开始时间与日期表相关联）。理想情况下，我希望看到这次中断的持续时间在 7 月和 8 月分开。这可能吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T11:09:40.487

塔莉，

绝对有可能！我通过在中断表上创建 2 个计算列来解决它：

一、判断当月停电持续时间：

```
=if([End]>EOMONTH([Start],0),EOMONTH([Start],0)-[Start],[End]-[Start]) 
```

另一个确定下个月的中断：

```
=if([End]>EOMONTH([Start],0),[end]-EOMONTH([Start],0),blank()) 
```

然后它变得稍微复杂一些，我想创建一个衡量标准，该衡量标准不仅可以汇总当前月份的停机时间，还可以汇总上个月的下个月停机时间。我首先创建了一个度量，该度量分别对 2 个计算列中的每一个求和 - 这是一种很好的做法，因为它有助于建立逻辑并提高性能：

```
[Cur Month Dur] = sum(Outage[Cur Month Outage])

[Following Month Dur] = sum(Outage[Following Month Outage]) 
```

然后，我将 [Following Month Dur] 的过滤版本添加到 [Cur Month Dur]，它打开度量的过滤上下文并查看上个月的日期表（必须是数字）：

```
=[Cur Month Dur] + 
      CALCULATE([Following Month Dur],
                    FILTER(
                         ALL(dimDate),
                         dimDate[Month Number]=max(dimDate[Month Number])-1
                          )
                ) 
```

[您可以在此处](http://www.powerpivotpro.com/2011/12/the-greatest-formula-in-the-world-part-3/)找到该方法的详细说明。

我将我的作品上传到[SkyDrive](http://sdrv.ms/Ycl9Hs)，您可能会觉得这很有用。

高温高压

雅各布

# jquery - 如何修复滚动条始终位于 div 的底部？

> ID：15629599
> 
> 赞同：17
> 
> 时间：2013-03-26T04:51:38.330
> 
> 标签：jquery, css

我正在做一个简单的聊天应用程序，我想将 div 的滚动条始终固定在底部。就像这样![在此处输入图像描述](../Images/6ce26ce973bfde8f7955fbbc58010726.png)

加载索引页时，滚动条必须在底部

这是我的 style.css

```
body{
font: 0.9em monospace;
}
   .messages{
    border: 1px solid #ccc;
    width: 250px;
    height: 210px;
    padding: 10px;
    overflow-y:scroll;

}
.message{
    color: slategrey;

}
 .message p{
    margin: 5px 0;
}
.entry{
   width: 260px;
   height: 40px;
   padding: 5px;
   margin-top: 5px;
   font: 1em fantasy;

} 
```

这是我的 index.php

```
<?php
session_start();
$_SESSION['user'] = (isset($_GET['user']) === TRUE) ? (int) $_GET['user'] : 0;
?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
      <link rel="stylesheet" href="css/styles.css"></link>
  </head>
   <body>
      <div class="chat">
           <div class="messages" id="messages">
           </div>
        <textarea class="entry" placeholder="type here and press enter"></textarea>
    </div>
    <script type="text/javascript" src="js/jquery-1.8.2.min.js"></script>
    <script type="text/javascript" src="js/chat.js"> </script>
</body> 
```

我该如何设置，请帮助我..谢谢

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-03-26T05:04:52.387

试试这个jquery：

```
$(".messages").animate({ scrollTop: $(document).height() }, "slow");
  return false; 
```

这是小提琴：http: [//jsfiddle.net/EX6vs/](http://jsfiddle.net/EX6vs/)

或者是指元素的高度（很多人认为是正确的做法），如下：

```
$(".messages").animate({ scrollTop: $(this).height() }, "slow");
  return false; 
```

这是小提琴：http: [//jsfiddle.net/69vpnyu1/](http://jsfiddle.net/69vpnyu1/)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-26T04:57:30.683

你想要这样的东西，其中 box 是包含你的聊天的 div。在页面加载时调用这些。

```
var box = document.getElementById('Box');
box.scrollTop = box.scrollHeight; 
```

当您发布新聊天时也调用它。

我使用谷歌应用引擎创建了一个类似的应用程序。你可以看看这里

[http://chatter-now.appspot.com/](http://chatter-now.appspot.com/)

随意使用它作为参考。尽管您使用的是 php，但视觉方面可能会有所帮助。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-26T04:57:20.350

您可以使用`jQuery`此处的演示来执行此操作：

[http://jsfiddle.net/9S92E/](http://jsfiddle.net/9S92E/)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-06-28T17:48:52.527

```
function loadchatval(){
    $.post('loadchat.php',function(data){               
    $('#load_chat').html(data); 
    $("#load_chat").animate({ scrollTop: $(document).height() }, "slow");
    return false;
});
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-09-01T22:19:05.887

我用以下方法解决了这个问题：

```
$(document).scrollTop($(document).height()); 
```

一切都取决于您如何配置 div，然后将 div 用于文档。但这也适用于粘性页脚。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-07-22T16:41:28.493

下面的代码行滚动垂直滚动条总是在***整个页面***的底部。

```
$("html, body").animate({ scrollTop: $(document).height() }, "fast"); 
```

***下面的代码行总是在名为“ daViewerContainer*** ”的可滚动 div 容器的底部滚动垂直滚动条。

```
$("#daViewerContainer").animate({ scrollTop: $(document).height() }, "fast"); 
```

# c# - 如何在 ascx 文件中调用非静态值？（.net 框架 1.1）

> ID：15629602
> 
> 赞同：0
> 
> 时间：2013-03-26T04:52:21.537
> 
> 标签：c#, asp.net, ascx

我有这样的课：

```
namespace MYSCommon
{
   [Serializable]
   public class Cart
   {        

    // Methods
    public Cart(){
         //Code skip
    }

    public double Value{
        //Code skip
    }
   }
} 
```

我用这个方法调用aspx，报错：

编码： `<%= MYSCommon.Cart.Value %>`

错误： `Compiler Error Message: CS0120: An object reference is required for the nonstatic field, method, or property 'MYSCommon.Cart.Value'`

但我得到了另一个这样的：

```
namespace MYSCommon
{
    public class Constant
    {
        // Fields
        public static string staticValue = "Something";
    }
} 
```

并通过: 调用它`<%= MYSCommon.Constant.staticValue %>`，这是成功的。我该如何解决？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T05:08:07.693

如果没有类实例，您将无法访问实例变量。在您背后的代码中，`ascx`您可以创建一个公共实例，`Cart`例如：

ascx 后面的代码：

```
public MYSCommon.Cart myCart = new MYSCommon.Cart(); 
```

稍后您可以像这样访问它：

在`ascx`：

```
<span> <%= myCart.Value %> </span> 
```

*只需确保将`myCart`其声明为`public`和`Page`级别即可。*

# ios - Core Data 删除外部存储实体不会释放 iCloud 中的空间

> ID：15629606
> 
> 赞同：3
> 
> 时间：2013-03-26T04:52:50.440
> 
> 标签：ios, core-data, icloud

在我的应用程序中，我在 Core Data sqlite 中有这个简单的注释 <-->> 照片关系，照片是带有“允许外部存储”的二进制数据，删除规则是注释级联照片，照片无效注释。当我尝试添加一些带有照片的笔记然后删除它们时，它在 iPhone Simulator 目录中看起来很好（外部照片文件被删除）。但是，当我在我的 iPhone 上使用 iCloud 同步进行尝试时，我的应用程序的 iCloud 存储大小只会在我添加照片时不断增加，但在我删除笔记或照片后永远不会减少 - 有什么想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T16:42:14.303

您删除了照片，但交易日志仍然存在。Core Data 的 iCloud 集成基于事务——任何时候你保存更改，都会创建一个新的事务日志。事务包括创建、更新或删除数据。事务日志一直存在，直到底层 iCloud 软件决定对其进行处理。

创建照片时，您会获得一个创建对象并包含照片数据的事务日志。当您删除照片时，您会得到一个交易日志，上面写着要删除该照片。*第二个日志不会取消第一个日志*，它会添加到它。现在您拥有两个事务日志，并且照片数据仍然存在。

在某些时候，底层的 iCloud 代码会合并日志，此时照片实际上应该会消失。但是，您无法做到这一点，您必须等到它在将来的某个日期发生。

# javascript - 使用Node.js同步下载N个远程文件

> ID：15629610
> 
> 赞同：1
> 
> 时间：2013-03-26T04:53:13.743
> 
> 标签：javascript, node.js, asynchronous, express, synchronous

我正在使用 Node.js 开发一个简单的应用程序，在给定有效 URL 时需要执行以下操作

1.  检索远程页面的 HTML，将其保存在本地。
2.  爬取 HTML（使用cheerio）并记录所有 JS 和 CSS 文件引用。
3.  对每个 JS/CSS 文件进行 HTTP 请求，并按文件名保存到服务器。
4.  压缩 html、css 和 js 文件并将生成的文件流式传输到浏览器。

我有 1 和 2 工作，以及 #3 的前半部分，但我遇到了下载同步性质的问题。我的代码运行速度太快，并为 CSS 和 JS 文件生成文件名，但没有任何内容。我猜这是因为我的代码不是同步的。问题是我事先不知道可能有多少个文件，并且在生成 ZIP 文件之前所有这些文件都必须存在。

这是我的应用程序当前存在的流程。我省略了辅助方法，因为它们不会影响同步性。你们中的任何人都可以就我应该做什么提供意见吗？

```
http.get(fullurl, function(res) {
    res.on('data', function (chunk) {
        var $source = $(''+chunk),
            js = getJS($source, domain),
            css = getCSS($source, domain),
            uniqueName = pw(),
            dir = [baseDir,'jsd-', uniqueName, '/'].join(''),
            jsdir = dir + 'js/',
            cssdir = dir + 'css/',
            html = rewritePaths($source);

        // create tmp directory
        fs.mkdirSync(dir);

        console.log('creating index.html');

        // save index file
        fs.writeFileSync(dir + 'index.html', html);

        // create js directory
        fs.mkdirSync(jsdir);

        // Save JS files
        js.forEach(function(jsfile){
            var filename = jsfile.split('/').reverse()[0];
            request(jsfile).pipe(fs.createWriteStream(jsdir + filename));
            console.log('creating ' + filename);
        });

        // create css directory
        fs.mkdirSync(cssdir);

        // Save CSS files
        css.forEach(function(cssfile){
            var filename = cssfile.split('/').reverse()[0];
            request(cssfile).pipe(fs.createWriteStream(cssdir + filename));
            console.log('creating ' + filename);
        });

        // write zip file to /tmp
        writeZip(dir,uniqueName);

        // https://npmjs.org/package/node-zip
        // http://stuk.github.com/jszip/

    });
}).on('error', function(e) {
    console.log("Got error: " + e.message);
}); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-26T08:55:15.120

您通过请求模块下载文件的方式是异步的

```
request(cssfile).pipe(fs.createWriteStream(cssdir + filename)); 
```

而不是像那样下载，你需要像这样创建一个单独的函数

```
function download (localFile, remotePath, callback) {
var localStream = fs.createWriteStream(localFile);

var out = request({ uri: remotePath });
out.on('response', function (resp) {
    if (resp.statusCode === 200){
        out.pipe(localStream);
        localStream.on('close', function () {
            callback(null, localFile);
        });
    }
    else
        callback(new Error("No file found at given url."),null);
})
}; 
```

您需要使用 colan [https://github.com/caolan/async](https://github.com/caolan/async)的异步模块

```
// Save JS files
    async.forEach(js,function(jsfile,cb){
        var filename = jsfile.split('/').reverse()[0];
        download(jsdir + filename,jsfile,function(err,result){
          //handle error here

          console.log('creating ' + filename);
          cb();
        })                        
    },function(err){
     // create css directory
    fs.mkdirSync(cssdir);

    // Save CSS files
    css.forEach(function(cssfile){
        var filename = cssfile.split('/').reverse()[0];
        request(cssfile).pipe(fs.createWriteStream(cssdir + filename));
        console.log('creating ' + filename);
    });

    // write zip file to /tmp
    writeZip(dir,uniqueName);
    }); 
```

# python - 从文本文件填充字典

> ID：15629612
> 
> 赞同：0
> 
> 时间：2013-03-26T04:53:16.580
> 
> 标签：python, file, io, dictionary

我有一个文本文件，其中包含一个接一个地给出的一组餐厅的详细信息。详细信息是特定餐厅的名称、评级、价格和菜肴类型。文本文件的内容如下所示。

```
George Porgie
87%
$$$
Canadian, Pub Food

Queen St. Cafe
82%
$
Malaysian, Thai

Dumpling R Us
71%
$
Chinese

Mexican Grill
85%
$$
Mexican

Deep Fried Everything
52%
$
Pub Food 
```

我想创建一组字典，如下所示：

```
Restaurant name to rating:
# dict of {str : int}
name_to_rating = {'George Porgie' : 87,
'Queen St. Cafe' : 82,
'Dumpling R Us' : 71,
'Mexican Grill' : 85,
'Deep Fried Everything' : 52}

Price to list of restaurant names:
# dict of {str : list of str }
price_to_names = {'$'   :  ['Queen St. Cafe', 'Dumpling R Us', 'Deep Fried Everything'],
'$$'  :  ['Mexican Grill'],
'$$$' :  ['George Porgie'], 
'$$$$' : [ ]}

Cuisine to list of restaurant name:
#dic of {str : list of str }
cuisine_to_names = {'Canadian' : ['George Porgie'],
'Pub Food' : ['George Porgie', 'Deep Fried Everything'],
'Malaysian' : ['Queen St. Cafe'],
'Thai' : ['Queen St. Cafe'],
'Chinese' : ['Dumpling R Us'],
'Mexican' : ['Mexican Grill']} 
```

Python 中填充上述字典的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T05:05:44.987

初始化一些容器：

```
name_to_rating = {}
price_to_names = collections.defaultdict(list)
cuisine_to_names = collections.defaultdict(list) 
```

将您的文件读入临时字符串：

```
with open('/path/to/your/file.txt') as f:
  spam = f.read().strip() 
```

假设结构是一致的（即由双换行符分隔的 4 行块），遍历这些块并填充您的容器：

```
restraunts = [chunk.split('\n') for chunk in spam.split('\n\n')]
for name, rating, price, cuisines in restraunts:
  name_to_rating[name] = rating
  # etc .. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T05:09:15.417

对于主读取循环，您可以使用 enumerate 和 modulo 来了解一行上的数据：

```
for lineNb, line in enumerate(data.splitlines()):
    print lineNb, lineNb%4, line 
```

对于`price_to_names`和`cuisine_to_names`字典，您可以使用默认字典：

```
from collections import defaultdict
price_to_names = defaultdict(list) 
```

# android - 检查值是否存在 sqlite 错误插入

> ID：15629617
> 
> 赞同：2
> 
> 时间：2013-03-26T04:53:26.607
> 
> 标签：android

我有一种插入数据并检查代码何时存在的方法

如果存在不创建插入，如果不存在将创建插入

但是当我尝试运行数据时无法插入数据库

这是我的插入代码

```
public void processAddA(DialogWrapper wrapper)
               {
           ContentValues values = new ContentValues(2);

            values.put(DatabaseHelper.CODE, wrapper.getCode());
            values.put(DatabaseHelper.ALAMAT, wrapper.getAlamat());
            values.put(DatabaseHelper.BATAS, wrapper.getBatas());
            values.put(DatabaseHelper.LAT, wrapper.getLat());
            values.put(DatabaseHelper.LON, wrapper.getLon());
            values.put(DatabaseHelper.LUAS, wrapper.getLuas());
            values.put(DatabaseHelper.TANGGAL_AWAL, wrapper.getTglA());
            values.put(DatabaseHelper.TANGGAL_AKHIR, wrapper.getTglB());
            values.put(DatabaseHelper.USER_ID, wrapper.getUser());
            values.put(DatabaseHelper.SENT, "0");

                  open();
                  //check if value exist or not.
                  Cursor c = database.rawQuery("SELECT * FROM petak_tetap where code='"
                            + wrapper.getCode() + "'", null);
                  if(c == null)
                  {
                  //doesn't exists therefore insert record.
                      database.insert("petak_tetap", DatabaseHelper.ALAMAT,
                                values);
                  }
                  close();
               } 
```

如何解决？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-26T05:03:49.390

使用这个条件它会起作用

```
if (c!=null && c.getCount()==0) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T05:40:57.467

那么首先 c 永远不会为 null 你应该使用

`if (!c.moveToFirst())`

但是，如果您将代码列声明为`UNIQUE`，然后将`insertWithOnConflict`with`SQLiteDatabase.CONFLICT_IGNORE`作为最后一个参数使用，则会容易得多。

# clojure - 与 pred 解散

> ID：15629622
> 
> 赞同：2
> 
> 时间：2013-03-26T04:53:44.850
> 
> 标签：clojure

`(dissoc :a m)`允许我解开给定的键。但是，有没有办法使用谓词函数来解开 pred 为 true 的任何键？`(dissoc-with-pred pred? m)`

所以给定一张地图 -`{:a 2 :b 3 :c 1 :d 4}` `(dissoc-with-pred (fn [[kv]] (> v 2) m)`将返回`{:a 2 :c 1}`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T05:02:41.363

版本 1

```
(defn dissoc-with-pred [f m]
  (reduce-kv (fn [res k v] 
               (if (f k v) 
                 (assoc res k v)
                 res))
             {} m)) 
```

**编辑。**

版本 2（由 Chouser 建议）

```
(defn dissoc-with-pred [f m]
  (reduce-kv (fn [m k v]
               (if (f k v)
                 m
                 (dissoc m k)))
             m m)) 
```

版本 3

```
(defn dissoc-with-pred [f m]
  (into {} (filter (fn [[k v]] (f k v)) m))) 
```

测试

```
(dissoc-with-pred (fn [k v] (> v 2)) {:a 2 :b 3 :c 1 :d 4})
=> {:b 3, :d 4} 
```

# android - onListItemClick 在 Android 4.1.2 中不起作用

> ID：15629626
> 
> 赞同：1
> 
> 时间：2013-03-26T04:54:10.687
> 
> 标签：android, list, onclicklistener

我的项目中有一个 listView，我正在为它分配 onListitemClick 侦听器。

```
 listView = (ListView) findViewById(R.id.mylist);
    listView.setOnItemClickListener(this); 
```

我给听众的是：

```
 @Override
    protected void onListItemClick(ListView l, View v, int position, long id) {
    super.onListItemClick(l, v, position, id);
    Log.i("CLICK", "onListItemClick");

} 
```

除了 Android 4.1.2 设备外，点击操作在 Android 2.2+ 设备上运行良好。请帮我解决这个问题。提前致谢..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T05:32:11.720

Can you jut replace Listner.

use:

```
@Override
    public void onItemClick(AdapterView<?> arg0, View arg1, int arg2, long arg3) {
        Log.d("^^^^^^^", "position="+arg2);

    } 
```

Instead:

```
 @Override
    protected void onListItemClick(ListView l, View v, int position, long id) {
    super.onListItemClick(l, v, position, id);
    Log.i("CLICK", "onListItemClick");

} 
```

Another way:

it seem listview is block due to row file, use below property within row file main layout.

> android:descendantFocusability="blocksDescendants"

# servlets - 在单个页面中显示多个 blob 图像

> ID：15629628
> 
> 赞同：1
> 
> 时间：2013-03-26T04:54:20.170
> 
> 标签：servlets, oracle-sqldeveloper

嗨，我正在使用 servlet 从 oracle 数据库中读取 BLOB 图像并将其显示在 html 页面中

我的示例代码是

```
protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        // TODO Auto-generated method stub

        Connection conn = null;
        Statement stmt = null;
        ResultSet rs = null;
        String driver = "oracle.jdbc.driver.OracleDriver";
        final String url = "jdbc:oracle:thin:@//157.227.32.153:1521/DNADB5";
        final String username = "flex_user";
        final String password = "flex_user";
        int id=Integer.parseInt(request.getParameter("id"));
        String query = "SELECT img_id,MP_ID , icon FROM Account_images where MP_ID=" +id;
        ServletOutputStream out = response.getOutputStream();
        try {
            System.out.println("Getting connection");
             Class.forName(driver);
             conn = DriverManager.getConnection(url, username, password);

             stmt = conn.createStatement();
             rs = stmt.executeQuery(query);
             response.setContentType("text/html");
             if (rs.next()) {
               InputStream in = rs.getBinaryStream("icon");

               int bufferSize = 1024;
               byte[] buffer = new byte[bufferSize];
               int len=0;
               while ((len=in.read(buffer)) != -1) {
                // System.out.println("writing " + length + " bytes");
                 out.write(buffer, 0, len);
               }
               System.out.println("writed.");
               in.close();
               out.flush();
             } 
```

使用此代码，我可以显示单个图像，但我需要显示具有相同 MP_ID 的所有图像。谁能帮帮我？？

提前致谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T05:50:04.383

尝试使用“while”而不是“if”。（“如果”不是一个循环。）像......

```
 try {
        System.out.println("Getting connection");
         Class.forName(driver);
         conn = DriverManager.getConnection(url, username, password);

         stmt = conn.createStatement();
         rs = stmt.executeQuery(query);
         response.setContentType("text/html");
         /*if (rs.next()) { */ // INCORRECT
         if(!rs.isBeforeFirst()){
           /* NO DATA */
         } else {
         /* YOU HAVE DATA */
         while(rs.next()){
           InputStream in = rs.getBinaryStream("icon");

           int bufferSize = 1024;
           byte[] buffer = new byte[bufferSize];
           int len=0;
           while ((len=in.read(buffer)) != -1) {
            // System.out.println("writing " + length + " bytes");
             out.write(buffer, 0, len);
           }
           System.out.println("writed.");
           in.close();
           out.flush();
         } 
```

这将遍历结果集中的所有结果，而不仅仅是第一个。

# c# - System.DateTime.Now 在 C# 中返回什么？

> ID：15629637
> 
> 赞同：3
> 
> 时间：2013-03-26T04:55:03.173
> 
> 标签：c#, asp.net

System.DateTime.Now 在 C# 中返回的时间是什么时候？是本地机器（客户端）时间还是服务器（IIS）时间？

如果这返回客户端时间，如何获取服务器时间，反之亦然？

**编辑** 好的，对不起，我放括号是一个错误。但问题是本地时间还是服务器时间。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-26T04:59:41.300

DateTime.Now 返回服务器上的当前日期和时间，以本地时间表示

要获得客户端时间，您需要使用 javascript：

```
var now = new Date();
var hours = now.getHours();
var minutes = now.getMinutes();
//etc
var utcHours = now.getUTCHours();
var utcMinutes = now.getUTCMinutes();
//etc
//or
var utc = now.getTime();//milliseconds since 1 January 1970 00:00:00 UTC 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-26T04:59:49.180

`DateTime.Now`执行几个步骤：

*   从操作系统获取 UTC 时间
*   *从正在执行的机器*的注册表中获取时区信息
**   使用该时区信息将 UTC 解析为本地时间（同样，执行机器的本地时间）*

 *> 如果这返回客户端时间，如何获取服务器时间，反之亦然？

如果您要与多个时区的客户打交道，通常将所有日期存储为 UTC，然后存储客户的时区以用于转换目的。

JavaScript 还可用于将 UTC 日期解析为客户端时间和/或在 Web 浏览器中获取时间。

地理位置（例如检查用户的 IP）也可用于猜测用户的位置/时区，但不能保证准确。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-26T05:03:24.313

它返回托管网站/应用程序的服务器时间，因为 asp.net 是服务器端技术。

要获取客户端时间，您需要使用 javasrcipt/jQuery，这是客户端技术：

```
var now = new Date();
now.format("dd/M/yy h:mm tt"); 
```

[http://blog.stevenlevithan.com/archives/date-time-format](http://blog.stevenlevithan.com/archives/date-time-format) [http://www.w3schools.com/jsref/jsref_obj_date.asp](http://www.w3schools.com/jsref/jsref_obj_date.asp)

希望能帮助到你 ：）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-26T04:57:20.133

当代码在服务器上时，它显然会返回当前服务器时间

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-26T04:58:04.117

[DateTime.Now](http://msdn.microsoft.com/en-IN/library/system.datetime.now.aspx)返回服务器计算机上的当前日期和时间，以本地时间表示。

表示代码所在的服务器上。

但是，使用 JavaScript 从浏览器获取当前日期/时间。

```
function getDateTime()
{
    var localTime = new Date();
    var year= localTime.getYear();
    var month= localTime.getMonth() +1;
    var date = localTime.getDate();
    var hours = localTime .getHours();
    var minutes = localTime .getMinutes();
    var seconds = localTime .getSeconds();    
    //at this point you can do with your results whatever you please
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-26T05:24:24.873

它返回当前系统时间

在客户端运行：如果它正在执行客户端，则返回客户端系统时间

在服务器上运行：如果它在服务器上执行，则返回服务器时间

如果您想要服务器时间，只需编写一个在服务器上运行的方法，然后在客户端系统上调用它

请参阅从客户端调用服务器方法的参考示例[。](http://decoding.wordpress.com/2008/11/14/aspnet-how-to-call-a-server-side-method-from-client-side-javascript/)*

# c++ - Node.js 原生插件中的枚举类型

> ID：15629639
> 
> 赞同：5
> 
> 时间：2013-03-26T04:55:16.713
> 
> 标签：c++, node.js, enums, v8

是否可以在 Node.js 插件的 C++ 代码中创建一些`enum`，然后将此类型公开给 js 代码？我发现 js 中存在原生枚举类型，但没有关于它们在 v8 引擎中实现的信息。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-02-01T10:28:37.613

请注意，在[Kevin](https://stackoverflow.com/users/1746580/kevin)给出的示例中，您需要`Local<Object>`在使用它之前创建一个实例，因此请确保调用`Object::New()`.

```
Local<Object> obj = Object::New();
const char* k = "HEADERS_RECEIVED";
int v = 1;
obj->Set(v8::String::NewSymbol(k), v8::Int32::New(v), ReadOnly); // Use PropertyAttribute ReadOnly so that value won't be changed by javascript. 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-30T09:38:00.323

javascript中没有特定的枚举类型，而是使用常量int，例如在web中，属性在C++`UNSENT,OPENED, HEADERS_RECEIVED,LOADING,DONE`中`XMLHttpRequest`被定义为枚举类型。要在 v8 中为 javascript 导出这些属性，请使用如下：

```
Local<Object> obj;
const char* k = "HEADERS_RECEIVED";
int v = 1;
obj->Set(v8::String::NewSymbol(k), v8::Int32::New(v), ReadOnly); // Use PropertyAttribute ReadOnly so that value won't be changed by javascript. 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-12-21T11:18:24.120

根据最新的[v8 API ref ，这已经改变了](https://v8docs.nodesource.com/node-7.2/db/d85/classv8_1_1_object.html#a6f76b2ed605cb8f9185b92de0033a820)

```
Isolate* isolate = args.GetIsolate();
Local<Context> context = isolate->GetCurrentContext();
Local<Object> obj;
obj->DefineOwnProperty(
                       context,
                       String::NewFromUtf8(isolate,"enum"),
                       Number::New(isolate,1), v8::ReadOnly
                       ); 
```

# bash - 基于分隔符拆分字符串并使用 bash 脚本将它们放入数组中

> ID：15629646
> 
> 赞同：2
> 
> 时间：2013-03-26T04:55:40.253
> 
> 标签：bash

什么是拆分字符串并放入数组的简单方法这是我的字符串

```
aa_bb__cc_dd 
```

我想把它们放在这样的数组中：

```
array[0] = "aa"

array[1] = "bb"

array[2] = ""

array[3] = "cc"

array[4] = "dd" 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-26T05:09:19.337

```
var=aa_bb__cc_dd
oldIFS=$IFS
IFS=_
array=($var)
IFS=$oldIFS 
```

# php - 奇怪的 mysql 错误，说“期望参数”，但 mysql_error 函数什么也没返回？我迷路了

> ID：15629647
> 
> 赞同：0
> 
> 时间：2013-03-26T04:55:56.990
> 
> 标签：php, html, mysql, die

我遇到了一个奇怪的mysql错误。通过以下文本，我得到：`Warning: mysql_num_rows() expects parameter 1 to be resource, null given in /Applications/XAMPP/xamppfiles/htdocs/chatterr/lr_bootstrap/profile.php on line 70`尽管代码没有任何问题。我尝试`die("Error in query: ".mysql_error());`在上面添加，`if (mysql_num_rows($check_frnd_query) == 1 OR $user_id == $my_id) {`但没有返回任何内容。我被这个问题所困扰。我可能正在查看一些东西。你怎么看？

```
<?php 
ob_start(); 
include 'core/init.php'; 
include 'includes/overall/overall_header.php'; 

if (isset($_GET['username']) === true && empty($_GET['username']) === false) {
$username       = $_GET['username'];

if (user_exists($username) === true) {
    $my_id          = $session_user_id;
    $user_id        = user_id_from_username($username);
    $profile_data   = user_data($user_id, 'username', 'first_name', 'last_name',     'email', 'profile_img', 'bio');
    $user           = $user_id;
?>

<div class="container-fluid">
  <div class="row-fluid">
    <?php include 'includes/sidebar.php'; ?>
    <div class="span9">
      <div class="hero-unit">
        <p>
        <?php 
        if (empty($profile_data['profile_img']) === false) {

            echo '<img src="', $profile_data['profile_img'],'" alt="',     $profile_data['first_name'] ,'\'s Profile Image" class="profile">'; 
        }
        ?></p>
        <h2><?php echo $profile_data['first_name'],' ', $profile_data['last_name']; ?>    </h2>
        <p><?php echo $profile_data['bio']?></p>
        <p>

        <?php if($user_id === $session_user_id) {
        ?> <a href="settings.php">Edit Profile</a> &nbsp;&nbsp;&nbsp; <?php
        } else {
        if (logged_in() === true) {
        if($user != $my_id){
        $check_frnd_query = mysql_query("SELECT id FROM friends WHERE     (user_one ='$my_id' AND user_two='$user') OR (user_one='$user' AND user_two='$my_id')");

            if (mysql_num_rows($check_frnd_query) == 1) {
                echo "Friends | <a href='actions.php?    action=unfriend&user=$user' class='box'>Unfriend $username</a>";
            } else {
                $from_query = mysql_query("SELECT `id` FROM     `friend_req` WHERE `from`='$user' AND `to`='$my_id'");
                $to_query = mysql_query("SELECT `id` FROM `friend_req`     WHERE `from`='$my_id' AND `to`='$user'");

                if(mysql_num_rows($from_query) == 1) {
                    echo "<a href='actions.php?    action=accept&user=$user' class='box'>Accept</a> | <a href='actions.php?action=ingnore&user=$user' class='box'>Ignore</a>";
                } else if (mysql_num_rows($to_query) == 1) {
                    echo "<a href='actions.php?action=cancel&user=$user' class='box'>Cancel Request</a>";
                } else {
                    echo "<a href='actions.php?    action=send&user=$user' class='box'>Send Friend Request </a>";
                }

            }
        }
        } //logged in
        } ?>

        <!-- If friends:
        <a>My Photos</a> &nbsp;&nbsp;&nbsp;
        <a>My Friends</a> &nbsp;&nbsp;&nbsp;
        <a>Message Me</a>
        </p>
        -->
        <!--<p><a href="#" class="btn btn-primary btn-large">My Profile &raquo;</a></p> --    >
      </div>
      <div class="row-fluid">
      <?php

      if (mysql_num_rows($check_frnd_query) == 1 OR $user_id == $my_id) {
      $res=mysql_query("SELECT * FROM posts WHERE user_id=$user_id ORDER BY     timestamp DESC LIMIT 0, 3");

      while($row=mysql_fetch_assoc($res)) {
        ?>
            <div class="span4">
              <h2><?php echo $profile_data['first_name']?> said...</h2>
              <h8><?php echo $row['timestamp']; ?></h8>
              <p><?php echo $row['content']; ?></p>
              <p><a class="btn" href="#">View Reactions &raquo;</a></p>
            </div><!--/span-->

        <?php
      }
      ?>
      </div><!--/row-->

      <div class="row-fluid">
      <?php
      $res=mysql_query("SELECT * FROM posts WHERE user_id=$user_id ORDER BY timestamp DESC LIMIT 3, 6");

      while($row=mysql_fetch_assoc($res)) {
        ?>
            <div class="span4">
              <h2><?php echo $profile_data['first_name']?> said...</h2>
              <h8><?php echo $row['timestamp']; ?></h8>
              <p><?php echo $row['content']; ?></p>
              <p><a class="btn" href="#">View Reactions &raquo;</a></p>
            </div><!--/span-->

        <?php
      }
      ?>
      </div><!--/row-->

    </div><!--/span-->
  </div><!--/row-->

<?php
} else {
    echo '<h3>Whoops, you must be friends with this user to see their posts.</h3>';
}

} else {
    header('Location: 404.php');
    exit();
}
} else {
header('Location: index.php');
exit();
}

include'includes/overall/overall_footer.php'; 
?> 
```

这就是我所看到的：http: [//pbrd.co/Zo6sNb](http://pbrd.co/Zo6sNb)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T05:32:09.250

```
SELECT * FROM posts WHERE user_id=$user_id ORDER BY     timestamp DESC LIMIT 0, 3 
```

In this query, user_id has no quotes, it's numeric?

```
SELECT id FROM friends WHERE     (user_one ='$my_id' AND user_two='$user') OR (user_one='$user' AND user_two='$my_id') 
```

In this query, user_id type fields have quotes, it's a string?

Are you missing quotes in the first query?

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T05:07:47.077

您的查询可能失败并返回`FALSE`，而不是返回预期的资源标识符`mysql_num_rows`。

`mysql_query`在进一步传递之前始终检查返回值。

```
$check_frnd_query = mysql_query("SELECT id FROM friends WHERE     (user_one ='$my_id' AND user_two='$user') OR (user_one='$user' AND user_two='$my_id')");
if (!$check_frnd_query) {
    die('Invalid query: ' . mysql_error());
} 
```

# java - 递归合并排序Java程序

> ID：15629651
> 
> 赞同：1
> 
> 时间：2013-03-26T04:56:25.973
> 
> 标签：java, sorting, recursion, merge

我一直在研究合并排序递归代码，并且遇到了减速带。我已经通过互联网和我的算法本身在纸上浏览了很多次，但我似乎无法找出问题所在。

```
 public static int[] mergesort(int[] data, int low, int high)
    {
        int middle = (high+low)/2;
        if (middle==low)
        {
            int[] data2 = new int [1];
            data2[0]=data[middle];
            return data2;
        }
        else
        {
            int[] firstHalfSorted = mergesort(data, low, middle);
            int[] secondHalfSorted = mergesort(data, middle+1, high);
            return (merge(firstHalfSorted, secondHalfSorted));
        }
    }

    public static int[] merge(int[] firstHalfSorted, int[] secondHalfSorted)
    {
        int[] SortedArray = new int[firstHalfSorted.length+secondHalfSorted.length];
        int m = 0;
        int n = 0;
        int count = 0;
        while (m<firstHalfSorted.length && n<secondHalfSorted.length)
        {
            if (firstHalfSorted[m]>secondHalfSorted[n])
            {
                SortedArray[count]=secondHalfSorted[n];
                count++;
                n++;
            }
            else if (firstHalfSorted[m]<secondHalfSorted[n])
            {
                SortedArray[count]=firstHalfSorted[m];
                count++;
                m++;
            }
        }
        if (m!=firstHalfSorted.length)
        {
            while(m<firstHalfSorted.length){
                SortedArray[count]=firstHalfSorted[m];
                count++;
                m++;
            }
        }
        if (n!=secondHalfSorted.length)
        {
            while(n<secondHalfSorted.length){
                SortedArray[count]=secondHalfSorted[n];
                count++;
                n++;
            }
        }
        return SortedArray;
    } 
```

有代码。问题来自一个带有数字的文本输入文件，3,9,7,2,10,5,1,8 按此顺序排列，代码只对其他数字进行排序，分别是 3,7 和 10,1，然后是 3， 7,1,10。

根据我的所有想法，它应该排序 3,9 然后 7,2 等等，然后 3,9,7,2 和 10,5,1,8 等等，但它没有！你们能帮我吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T05:39:48.587

据我所知，有问题的代码是：

```
if (middle==low)
{
    int[] data2 = new int [1];
    data2[0]=data[middle];
    return data2;
} 
```

此代码将在 时返回一个元素数组`high-low<=1`。因此，当 for`low = 0, high=1`方法期望返回已排序的二元素数组时，它将返回第零个元素。您可以将其更改为：

```
if(low==high) //one element passed
//same here 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-16T23:42:58.193

您必须在此处更改以下两件事：

1）更改`if (middle==low)`为`if (high==low)`上一篇文章中指出的。

2) 更改`else if (firstHalfSorted[m] **<** secondHalfSorted[n])`为`else if (firstHalfSorted[m] **<=** secondHalfSorted[n])`或干脆`else`。

第二点很重要，因为目前您的代码不支持重复数字。换句话说，`if-else`从某种意义上说，您并不详尽，因为他们没有考虑两者`firstHalfSorted[m]`和`secondHalfSorted[n]`相等的情况。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T05:23:09.270

对于合并排序，您只需将数据分成两部分，对这两部分进行递归，然后合并。不要试图通过找到中间或任何你想要做的事情来划分你的数据，而是将整个列表分成两半。

例如：

```
private int[] mergesort(int[] data) {
    int[] half1 = new int[data.length / 2];
    int[] half2 = new int[(data.length % 2 == 0)? data.length / 2 : data.length / 2 + 1];
    for (int i = 0; 2 * i < data.length; i++) {
        half2[i] = data[2 * i];
        if (2 * i + 1 < data.length) half1[i] = data[2 * i + 1];
    }
    int[] firstHalfSorted = mergesort(half1);
    int[] secondHalfSorted = mergesort(half2);
    return merge(firstHalfSorted, secondHalfSorted);
} 
```

如果你想保留你当前的方法（实际上看起来应该可以工作），你只需要通过更改`if (middle == low)`来修复整数除法错误`if (high == low)`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-07-12T14:06:08.123

这是一个简单的递归合并排序代码。

```
public class solution {

 public static void merge(int[] input, int s, int e){

    int m = (s + e) / 2;

    int temp[] = new int[e - s + 1];

    int s1 = s;
    int s2 = m + 1;

    int i = s1;
    int j = s2;
    int p = 0;
    while(i <= m  && j <= e){
        if(input[i] > input[j]){
            temp[p] = input[j];
            j++;
            p++;
        }else{
            temp[p] = input[i];
            i++;
            p++;
        }
    }//end of while loop

    while(i <= m){
            temp[p] = input[i];
            p++;
            i++;
    }
    while(j <= e){
            temp[p] = input[j];
            p++;
            j++;
    }

    for(int k = 0; k < temp.length; k++){
        input[s + k] = temp[k];
    }
}

public static void callsort(int[] input, int s, int e){

    if(s >= e){
        return ;
    }

    int m = (s + e) / 2;

    callsort(input, s, m);
    callsort(input, m + 1, e);
    merge(input, s, e);

}

public static void mergeSort(int[] input){
    callsort(input , 0 , input.length - 1); 
}
} 
```

输入：5 6 3 2 1 4 输出：1 2 3 4 5 6

# visual-studio-2010 - Visual Studio 速成版

> ID：15629662
> 
> 赞同：1
> 
> 时间：2013-03-26T04:57:22.403
> 
> 标签：visual-studio-2010

我在 Visual Studio Express Edition 2010 中开发了一个应用程序。现在我想部署它。但快递版不支持“设置和部署”。那么如何进行设置呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T05:02:37.927

这是一个什么样的应用程序？如果它是简单的 exe 和一些文件，您可能只是压缩它们并要求用户解压缩它们并开始使用它。

如果您想要 zing bang - 一个向导来引导用户完成设置、程序图标、启动菜单中的图标等，那么您需要一个程序来为您“编写”msi。参见例如这个[https://stackoverflow.com/questions/3767/what-is-the-best-choice-for-building-windows-installers](https://stackoverflow.com/questions/3767/what-is-the-best-choice-for-building-windows-installers)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T05:05:28.890

您可以使用[WiX 工具集](http://wixtoolset.org/)。

> WiX——Windows Installer XML 工具集——允许开发人员为 Windows Installer（Windows 安装引擎）创建安装程序。

# java - 在动态 Jasper 报表中使用 HashMap 对象

> ID：15629663
> 
> 赞同：0
> 
> 时间：2013-03-26T04:57:28.420
> 
> 标签：java, jasper-reports, dynamic-jasper

```
 public void showApplicantCountVsJobBoardsSimpleReport(Collection<ApplicantCountVsJobBoardsDTO> applicantCountVsJobBoardsList,HttpServletRequest request) throws ColumnBuilderException,ClassNotFoundException, JRException {        
            initStyles();  
            FastReportBuilder drb = new FastReportBuilder();
            setTitleProperties(drb,"Job Board by Company and Job Title");   
            reportTitle = "Job-Board-by-Company-and-Job-Title";       
            DynamicReport dr = createApplicantCountVsJobBoardsSimpleReport(drb, applicantCountVsJobBoardsList); 
            jp = DynamicJasperHelper.generateJasperPrint(dr, new ClassicLayoutManager(), new JRBeanCollectionDataSource(applicantCountVsJobBoardsList));
            request.getSession().setAttribute("JasperPrintObject", jp);
            request.getSession().setAttribute("ReportName", reportTitle);
            displayReport(request, 0);     
        }   

        private DynamicReport createApplicantCountVsJobBoardsSimpleReport(FastReportBuilder drb, Collection<ApplicantCountVsJobBoardsDTO> applicantCountVsJobBoardsList) {
            AbstractColumn columnCompanyName = setStringColumnProperties("companyName","Company Name",100);
            drb.addColumn(columnCompanyName);

            AbstractColumn columnJobTitle = setStringColumnProperties("jobName","Job Title",200);       
            drb.addColumn(columnJobTitle);      

            AbstractColumn columnTotal = setStringColumnProperties("totalApplicantForJob","Total",100);
            drb.addColumn(columnTotal);     

            return drb.build();
        }

public class ApplicantCountVsJobBoardsDTO {

    private String companyName;
    private String jobName;
    private Integer totalApplicantForJob;
    private HashMap<String, Integer> jobBoard;

    public String getCompanyName() {
        return companyName;
    }
    public void setCompanyName(String companyName) {
        this.companyName = companyName;
    }
    public String getJobName() {
        return jobName;
    }
    public void setJobName(String jobName) {
        this.jobName = jobName;
    }   
    public Integer getTotalApplicantForJob() {
        return totalApplicantForJob;
    }
    public void setTotalApplicantForJob(Integer totalApplicantForJob) {
        this.totalApplicantForJob = totalApplicantForJob;
    }
    public HashMap<String, Integer> getJobBoard() {
        return jobBoard;
    }
    public void setJobBoard(HashMap<String, Integer> jobBoard) {
        this.jobBoard = jobBoard;
    }
} 
```

我不知道将 jobBoard 项目添加到报告中。jobBoard 对象中的每个项目都将成为我报告中的一列。请帮我。我是贾斯珀的新手。:(

我正在使用`net.sf.jasperreports`和`ar.com.fdvs.dj`罐子

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T05:54:58.087

在这种情况下，您将不得不使用 ireport 工具的子报表功能，其中您将 hashmap 作为数据源传递，然后在该报表中您决定报表的布局和设计。

# asp.net-mvc - ViewBag 或 View Model 中的 DropDownList SelectList？

> ID：15629667
> 
> 赞同：4
> 
> 时间：2013-03-26T04:57:50.823
> 
> 标签：asp.net-mvc, viewmodel, viewbag

大多数开发人员是把他们的`SelectList`对象放在强类型视图模型中还是放在`ViewBag`?

最初我尽可能多地使用视图模型，但现在在视图模型中存储一些东西没有意义。一个`SelectList`名为“Items”的项目可能与一个实际的`DBSet<Item>`名为“Items”的项目发生冲突。我已经在使用`ViewBag`页面标题，并且无法在我`Title`的每个视图模型中都放置一个属性。

另一个问题是我需要手动配置 AutoMapper 以忽略`SelectList`每个视图模型的属性，并且我还需要将它们排除在外`BindAttribute`。

如果我开始专门使用`ViewBag`for `SelectList`s，可能会出现我被迫将视图模型用于 a 的情况`SelectList`，例如在表中的行中的下拉列表中，其中项目特定于该行。你怎么看？

# php - mysql查询中未显示的行

> ID：15629668
> 
> 赞同：0
> 
> 时间：2013-03-26T04:57:51.367
> 
> 标签：php, mysql

我有一个 2 部分代码。代码的第一部分根据情况告诉我表中的记录数，代码的第二部分提取并显示实际记录信息。在下面的代码中，它显示正确的记录数为 3，但是当它尝试提取信息以显示它时，它只显示 1 条记录。

```
 $depcourselist=mysql_query("select * from organization_dep_courses odc left join course c on odc.courseid=c.id where orgid=$orgid and depid=$departmentid");
echo '<table width="100%" border="0" cellspacing="0" cellpadding="5">
<tr bgcolor="#eaeaea" height="40">
<th align="left">Course Catalog<span>('.$countdepcourses.')</span></th>
</tr>';
while($courselist=mysql_fetch_array($depcourselist) )
$coursename = $courselist['fullname'];
{
if($coursecolor==1)
{
echo "<tr bgcolor='#f1f1f1' width='100%' height='25'>
  <td align='left'>".$coursename."<a href='#'><img src='".$remove."' /></a></td>
  </tr>";
$coursecolor="2";
}
else 
{
echo '<tr bgcolor="#ffffff" height="25">
   <td align="left">'.$coursename.'<a href="#"><img src="'.$remove.'" /></a></td>
   </tr>';
$coursecolor="1";
}  
}
echo '</table>'; 
```

任何帮助找出导致记录无法正确显示的原因总是非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T05:01:38.190

更改此部分：

```
while($courselist=mysql_fetch_array($depcourselist) )
$coursename = $courselist['fullname'];
{ 
```

对此：

```
while($courselist=mysql_fetch_array($depcourselist) )
{
$coursename = $courselist['fullname']; 
```

**注意花括号 {**

并使用

```
mysql_fetch_assoc 
```

代替

```
mysql_fetch_array 
```

（最好这样做，因为它更优化你只需要关联数组，不需要数字数组）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T05:05:21.417

使用此代码，

```
 $depcourselist=mysql_query("select * from organization_dep_courses odc left join course c on odc.courseid=c.id where orgid=$orgid and depid=$departmentid");
echo '<table width="100%" border="0" cellspacing="0" cellpadding="5">
<tr bgcolor="#eaeaea" height="40">
<th align="left">Course Catalog<span>('.$countdepcourses.')</span></th>
</tr>';
while($courselist=mysql_fetch_array($depcourselist) )
{ // Changed here
$coursename = $courselist['fullname'];
if($coursecolor==1)
{
echo "<tr bgcolor='#f1f1f1' width='100%' height='25'>
  <td align='left'>".$coursename."<a href='#'><img src='".$remove."' /></a></td>
  </tr>";
$coursecolor="2";
}
else 
{
echo '<tr bgcolor="#ffffff" height="25">
   <td align="left">'.$coursename.'<a href="#"><img src="'.$remove.'" /></a></td>
   </tr>';
$coursecolor="1";
}  
}
echo '</table>'; 
```

我改变了循环，

```
 while($courselist=mysql_fetch_array($depcourselist) )
        { // Changed here
        $coursename = $courselist['fullname'];
.
.
. 
```

# c# - 第一个使用 .NET 的 Google Drive 应用程序错误

> ID：15629669
> 
> 赞同：-4
> 
> 时间：2013-03-26T04:57:57.157
> 
> 标签：c#, google-drive-api

我在这段代码中有错误。我从

[https://developers.google.com/drive/quickstart-cs#step_3_set_up_the_sample](https://developers.google.com/drive/quickstart-cs#step_3_set_up_the_sample)

```
using System;
using System.Diagnostics;
using DotNetOpenAuth.OAuth2;
using Google.Apis.Authentication.OAuth2;
using Google.Apis.Authentication.OAuth2.DotNetOpenAuth;
using Google.Apis.Drive.v2;
using Google.Apis.Drive.v2.Data;
using Google.Apis.Util;

namespace GoogleDriveSamples
{
    class DriveCommandLineSample
    {
        static void Main(string[] args)
        {
            String CLIENT_ID = "YOUR_CLIENT_ID";
            String CLIENT_SECRET = "YOUR_CLIENT_SECRET";`

            // Register the authenticator and create the service
            var provider = new NativeApplicationClient(GoogleAuthenticationServer.Description, CLIENT_ID, CLIENT_SECRET);
            var auth = new OAuth2Authenticator<NativeApplicationClient>(provider, GetAuthorization);
            var service = new DriveService(auth);

            File body = new File();
            body.Title = "My document";
            body.Description = "A test document";
            body.MimeType = "text/plain";

            byte[] byteArray = System.IO.File.ReadAllBytes("document.txt");
            System.IO.MemoryStream stream = new System.IO.MemoryStream(byteArray);

            FilesResource.InsertMediaUpload request = service.Files.Insert(body, stream, "text/plain");
            request.Upload();

            File file = request.ResponseBody;
            Console.WriteLine("File id: " + file.Id);
            Console.WriteLine("Press Enter to end this process.");
            Console.ReadLine();
        }

        private static IAuthorizationState GetAuthorization(NativeApplicationClient arg)
        {
            // Get the auth URL:
            IAuthorizationState state = new AuthorizationState(new[] { DriveService.Scopes.Drive.GetStringValue() });
            state.Callback = new Uri(NativeApplicationClient.OutOfBandCallbackUrl);
            Uri authUri = arg.RequestUserAuthorization(state);

            // Request authorization from the user (by opening a browser window):
            Process.Start(authUri.ToString());
            Console.Write("  Authorization Code: ");
            string authCode = Console.ReadLine();
            Console.WriteLine();

            // Retrieve the access token by using the authorization code:
            return arg.ProcessUserAuthorization(authCode, state);
        }
    }
} 
```

错误在[这里](http://pastebin.com/WQUT1qXs)：

```
The best overloaded method match for
Google.Apis.Drive.v2.DriveService.DriveService(Google.Apis.Services.BaseClientService.Initializer) 
has some invalid arguments

Argument 1: cannot convert from
Google.Apis.Authentication.OAuth2.OAuth2Authenticator<Google.Apis.Authentication.OAuth2.DotNetOpenAuth.NativeApplicationClient>
to Google.Apis.Services.BaseClientService.

The call is ambiguous between the following methods or properties:
Google.Apis.Util.Utilities.GetStringValue(System.Enum) and
Google.Apis.Util.Utilities.GetStringValue(System.Enum) 
```

我还在我的项目中引用了所需的 Dll。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T19:44:48.387

.NET 客户端库最近已更新，请查看[https://stackoverflow.com/a/15646014/186674](https://stackoverflow.com/a/15646014/186674)以了解您的问题的解决方案。

# scala - Scala调度：设置默认主机名验证器？

> ID：15629671
> 
> 赞同：0
> 
> 时间：2013-03-26T04:58:07.067
> 
> 标签：scala, ssl

对于我的开发机器，我想禁用对 HTTPS 连接的 SSL 主机名检查。调度代码的异常是这样的：

```
javax.net.ssl.SSLException: hostname in certificate didn't match: <localhost> != <*.mydomain.com> OR <*.mydomain.com> OR <mydomain.com>
        at org.apache.http.conn.ssl.AbstractVerifier.verify(AbstractVerifier.java:228) ~[httpclient-4.1.3.jar:4.1.3]
        at org.apache.http.conn.ssl.BrowserCompatHostnameVerifier.verify(BrowserCompatHostnameVerifier.java:54) ~[httpclient-4.1.3.jar:4.1.3]
        at org.apache.http.conn.ssl.AbstractVerifier.verify(AbstractVerifier.java:149) ~[httpclient-4.1.3.jar:4.1.3]
        at org.apache.http.conn.ssl.AbstractVerifier.verify(AbstractVerifier.java:130) ~[httpclient-4.1.3.jar:4.1.3]
        at org.apache.http.conn.ssl.SSLSocketFactory.connectSocket(SSLSocketFactory.java:397) ~[httpclient-4.1.3.jar:4.1.3]
        at org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:148) ~[httpclient-4.1.3.jar:4.1.3] 
```

我正在寻找一种方法来设置默认主机名验证器，以供调度使用。[已弃用的 HttpsURLConnection 上](http://download.java.net/jdk7/archive/b123/docs/api/javax/net/ssl/HttpsURLConnection.html#setDefaultHostnameVerifier%28javax.net.ssl.HostnameVerifier%29)有一种方法可以设置默认主机名验证程序，但整个类显然已弃用。目前有正确的方法来做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T05:37:24.313

[com.sun.net.ssl.HttpsURLConnection](http://www.docjar.com/docs/api/com/sun/net/ssl/HttpsURLConnection.html)已被弃用，取而代之的是[javax.net.ssl.HttpsURLConnection](http://docs.oracle.com/javase/7/docs/api/javax/net/ssl/HttpsURLConnection.html)；后者没有被弃用。

至于绕过此检查的方法，您可以：

*   修改证书存储（请参阅[此](https://stackoverflow.com/questions/11991284/how-to-bypass-certificate-checking-in-a-java-web-service-client)问题）
*   使用 JVM 选项（请参阅[此](https://stackoverflow.com/questions/4663147/is-there-a-java-setting-for-disabling-certificate-validation)问题）

# sql - SQLite 查询根据当前日期对即将到来的生日进行排序

> ID：15629677
> 
> 赞同：2
> 
> 时间：2013-03-26T04:58:21.250
> 
> 标签：sql, sqlite

我的日期列是整数类型：

```
myDate.getTime() //long saved in db 
```

在我研究如何最好地对即将到来的生日进行排序时，我发现了这一点： [MySQL query to sort of tomorrows based on current date](https://stackoverflow.com/questions/7343807/mysql-query-to-sort-upcoming-birthdays-based-on-current-date)

我试图将解决方案翻译成 SQLite 语法，但没有运气。有人想把我推向正确的方向吗？

例如，我什至无法获得时间戳的月份：

```
strftime('%m', birthday) //unexpected value (dec = 1, jan = 1, jan = 6)
strftime('%m', 'now') // as expected (mar = 3) 
```

任何帮助表示赞赏。

**更新** 好的，现在我真的弄得一团糟：

```
cur = db.rawQuery("SELECT "
                        + "(strftime('%Y','now') - strftime('%Y',datetime(("+BIRTHDATE+"/1000), 'unixepoch', 'localtime'))) AS age,"
                        + "date((" + BIRTHDATE + "/1000),'+' || age || ' year') AS currbirthday,"
                        + "date((" + BIRTHDATE + "/1000),'+' || age+1 || ' year') AS nextbirthday"
                    + " FROM " + TABLE
                    + " ORDER BY CASE" 
                        + " WHEN currbirthday < date('now') THEN nextbirthday"
                        + " ELSE  currbirthday" 
                    + " END", null); 
```

错误：“没有这样的列年龄”

好的，好吧，我尝试将计算“年龄”的整个表达式放在 concat 中，但结果很奇怪（年龄存储了正确的值）：

```
Log.d("bdate", contact.getFirstname() + ": currbday=" + cur.getString(1));
Log.d("bdate", contact.getFirstname() + ": nextbday=" + cur.getString(2)); 
```

> 萨曼莎：currbday=-5705--6--29
> 
> 萨曼莎：下一个生日=-5704--6--29

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T09:41:03.810

如果有人想知道，这是我的解决方案：

```
cur = db.rawQuery("SELECT "
                        + "date(strftime('%Y', 'now','localtime')||strftime('-%m-%d', datetime(("+BIRTHDATE+"/1000), 'unixepoch', 'localtime'))) as currbirthday,"
                        + "date(strftime('%Y', 'now','localtime')||strftime('-%m-%d', datetime(("+BIRTHDATE+"/1000), 'unixepoch', 'localtime')),'+1 year') as nextbirthday"
                    + " FROM " + TABLE
                    + " ORDER BY CASE" 
                        + " WHEN currbirthday < date('now') THEN nextbirthday"
                        + " ELSE  currbirthday" 
                    + " END", null); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-04-07T10:39:08.597

我找到了一个采用不同方法的解决方案，它适用于我认为的任何极端情况。它根据一年中的某一天计算剩余天数，如果生日落在下一年，则更正结果：

```
SELECT
    *, 
    strftime('%j', birthday) - strftime('%j', 'now') AS days_remaining
FROM
    person
WHERE :n_days >= CASE
    WHEN days_remaining >= 0 THEN days_remaining
    ELSE days_remaining + strftime('%j', strftime('%Y-12-31', 'now'))
    END
; 
```

# kendo-grid - 我的（剑道网格）导出的数据文件中的重复字段

> ID：15629684
> 
> 赞同：2
> 
> 时间：2013-03-26T04:59:07.670
> 
> 标签：kendo-grid

我的应用程序中有剑道网格和导出按钮。导出网格数据工作正常，但这里有些行重复，它们显示在文件的末尾。在这里我为导出的文件提供了自定义名称。谁能告诉我我的代码有什么问题。请？这是导出按钮点击代码

```
 $("#btnExport").click(function(e) {
  var dataSource=  $("#grid").data("kendoGrid").dataSource; 
  var filteredDataSource = new kendo.data.DataSource( { 
  data: dataSource.data(), 
  filter: dataSource.filter() 
 }); 
 filteredDataSource.read();
 var data = filteredDataSource.view();

    var result = "data:application/vnd.ms-excel,";

 result += "<table><tr><th>OrderID</th><th>Freight</th><th>Order Date</th><th>Ship Name</th><th>Ship City</th></tr>";

 for (var i = 0; i < data.length; i++) {
     result += "<tr>";

     result += "<td>";
     result += data[i].OrderID;
     result += "</td>";

     result += "<td>";
     result += data[i].Freight;
     result += "</td>";

     result += "<td>";
     result += kendo.format("{0:MM/dd/yyyy}", data[i].OrderDate);
     result += "</td>";

     result += "<td>";
     result += data[i].ShipName;
     result += "</td>";

     result += "<td>";
     result += data[i].ShipCity;
     result += "</td>";

     result += "</tr>";
 }

 result += "</table>";
 var dt = new Date();
    var day = dt.getDate();
    var month = dt.getMonth() + 1;
    var year = dt.getFullYear();
    var hour = dt.getHours();
    var mins = dt.getMinutes();
    var postfix = day + "." + month + "." + year + " " + hour + ":" + mins;
    var a = document.createElement('a');
  var table_div = (document.getElementById('grid').getElementsByTagName('tbody')[0]);
var table_html = table_div.outerHTML.replace( );
 a.href = result + ',' + table_html;
      a.download = 'exporteddata@'  +postfix+ '.xls';
    a.click();
 e.preventDefault();
                                                    }); 
```

这是小提琴[http://jsfiddle.net/SZBrt/35/](http://jsfiddle.net/SZBrt/35/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T07:17:44.010

将其修改为小提琴代码：

```
 for (var i = 0; i < data.length-1; i++) 
   {
       //your code
   } 
```

至

```
 for (var i = 0; i < data.length; i++) 
   {
       //your code
   } 
```

# iphone - 为什么我的完成块永远不会在 NSOperation 中被调用？

> ID：15629696
> 
> 赞同：11
> 
> 时间：2013-03-26T04:59:43.923
> 
> 标签：iphone, ios6, nsoperation

我已经子化了一个 NSOperation 并设置了我的 completionBlock，但即使操作完成，它似乎也永远不会进入。这是我的代码：

目录控制器类设置 NSOperation：

```
- (void)setupOperation {
...

    ImportWordOperation *importWordOperation = [[ImportWordOperation alloc] initWithCatalog:words];
    [importWordOperation setMainObjectContext:[app managedObjectContext]];
    [importWordOperation setCompletionBlock:^{
        [(ViewController *)[[app window] rootViewController] fetchResults];
    }];
    [[NSOperationQueue mainQueue] addOperation:importWordOperation];
    [importWordOperation release];
...
} 
```

如您所见，我正在设置完成块以在其他控制器中的主线程上执行一个方法。

然后，在`main`我的子类 NSOperation class:`ImportWordOperation.m`中，我启动了后台操作。`isFinished`为了触发完成方法，我什至覆盖了 iVar：

```
- (void)setFinished:(BOOL)_finished {
    finished = _finished;
}

- (BOOL)isFinished {
    return (self.isCancelled ? YES: finished);
}

- (void)addWords:(NSDictionary *)userInfo {
    NSError *error = nil;

    AppDelegate *app = [AppDelegate sharedInstance];

    NSManagedObjectContext *localMOC = [userInfo valueForKey:@"localMOC"];
    NSEntityDescription *ent = [NSEntityDescription entityForName:@"Word" inManagedObjectContext:localMOC];
    for (NSDictionary *dictWord in [userInfo objectForKey:@"words"]) {
        Word *wordN = [[Word alloc] initWithEntity:ent insertIntoManagedObjectContext:localMOC];

        [wordN setValuesForKeysWithDictionary:dictWord];
        [wordN release];
    }

    if (![[userInfo valueForKey:@"localMOC"] save:&error]) {
        NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
        abort();
    }
    [localMOC reset];

    [self setFinished:YES];
}

- (void)main {

    finished = NO;

    NSManagedObjectContext *localMOC = nil;
    NSUInteger type = NSConfinementConcurrencyType;
    localMOC = [[NSManagedObjectContext alloc] initWithConcurrencyType:type];
    [localMOC setUndoManager:nil];
    [localMOC setParentContext:[self mainObjectContext]];

    if (![self isCancelled]) {
        if ([self.words count] > 0) {
            [self performSelectorInBackground:@selector(addWords:) withObject:@{@"words":self.words, @"localMOC":localMOC}];
        }
    }
} 
```

如果我删除 isFinished 访问器方法，那么完成块会在`ImportWordOperation`完成之前被调用。

我已经阅读了我发现使用自己的完成块的代码，但是 NSOperation 子类中的完成块有什么用呢？

任何想法或指向类似的已解决情况将不胜感激。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-26T06:30:12.800

您在这里陷入了并发子类和非并发`NSOperation`子类之间的奇怪空间。通常，当您实施 时`main`，您的操作是非并发的，并且一旦退出就会`isFinished`更改为。`YES``main`

但是，您已经提供了自己的 实现`isFinished`，并且还对其进行了编码，以便在退出之后`isFinished`才返回。这使您的操作在许多方面开始像并发操作一样 - 至少包括需要手动发出 KVO 通知。`YES``main`

您的问题的快速解决方案是`setFinished:`使用`(will|did)ChangeValueForKey:`调用来实现。（我还更改了 ivar 名称以反映流行的命名约定）。下面是一个`NSOperation`子类，我相信它可以准确地模拟您的操作工作，以并发方式完成。

```
@implementation TestOperation {
    BOOL _isFinished;
}

- (void)setFinished:(BOOL)isFinished
{
    [self willChangeValueForKey:@"isFinished"];
    // Instance variable has the underscore prefix rather than the local
    _isFinished = isFinished;
    [self didChangeValueForKey:@"isFinished"];
}

- (BOOL)isFinished
{
    return ([self isCancelled] ? YES : _isFinished);
}

- (void)main
{
    NSLog(@"%@ is in main.",self);
    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
        sleep(1);
        [self setFinished:YES];
    });
}

@end 
```

我不熟悉您的要求，所以也许您有迫切的需求，但您的操作似乎更适合使用`start`而不是`main`. 我已经实现了一个似乎工作正常的小例子。

```
@implementation TestOperation {
    BOOL _isFinished;
    BOOL _isExecuting;
}

- (void)setFinished:(BOOL)isFinished
{
    if (isFinished != _isFinished) {
        [self willChangeValueForKey:@"isFinished"];
        // Instance variable has the underscore prefix rather than the local
        _isFinished = isFinished;
        [self didChangeValueForKey:@"isFinished"];
    }
}

- (BOOL)isFinished
{
    return _isFinished || [self isCancelled];
}

- (void)cancel
{
    [super cancel];
    if ([self isExecuting]) {
        [self setExecuting:NO];
        [self setFinished:YES];
    }
}

- (void)setExecuting:(BOOL)isExecuting {
    if (isExecuting != _isExecuting) {
        [self willChangeValueForKey:@"isExecuting"];
        _isExecuting = isExecuting;
        [self didChangeValueForKey:@"isExecuting"];
    }
}

- (BOOL)isExecuting
{
    return _isExecuting;
}

- (void)start
{
    NSLog(@"%@ is in start. isCancelled = %@", self, [self isCancelled] ? @"YES" : @"NO");
    if (![self isCancelled]) {
        [self setFinished:NO];
        [self setExecuting:YES];
        dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^ {
            sleep(1);
            [self setExecuting:NO];
            [self setFinished:YES];
        });
    }
}
@end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-06-21T07:12:55.077

我在实现`NSOperation`.

引用关键路径的 Swift 方法是使用`#keyPath`指令，所以我这样做（`_executing`并且`_finished`是我的内部变量）：

```
self.willChangeValue(forKey: #keyPath(Operation.isExecuting))
self._executing = false
self.didChangeValue(forKey: #keyPath(Operation.isExecuting))

self.willChangeValue(forKey: #keyPath(Operation.isFinished))
self._finished = true
self.didChangeValue(forKey: #keyPath(Operation.isFinished)) 
```

不幸的是，`#keyPath`上面的表达式分别解析为`"executing"`和`"finished"`，我们需要为`"isExecuting"`和抛出 KVO 通知`"isFinished"`。这就是为什么`completionBlock`没有被调用的原因。

解决方案是将它们硬编码为：

```
self.willChangeValue(forKey: "isExecuting")
self._executing = false
self.didChangeValue(forKey: "isExecuting")

self.willChangeValue(forKey: "isFinished")
self._finished = true
self.didChangeValue(forKey: "isFinished") 
```

# javascript - 如何在 endRequest 方法中获取源元素 id？

> ID：15629703
> 
> 赞同：0
> 
> 时间：2013-03-26T05:00:19.180
> 
> 标签：javascript, jquery, asp.net, ajax, asp.net-ajax

如何在 add_endRequest 中获取导致回发的元素的 ID？
示例
//连接结束请求过程，

```
Sys.WebForms.PageRequestManager.getInstance().add_endRequest(requestComplete_Handler)

    //will be called after the async request completes.
    function requestComplete_Handler(sender, args)
    {
        var panel = sender._postBackSettings.sourceElement.id;
        switch (panel)
        {
            case "<%=upSubAccount.ClientID %>":
                __doPostBack('<%=upAllocationChart.ClientID%>');
                break;
            case "<%=upAllocationChart.ClientID%>" :   
               __doPostBack('<%=upTotal.ClientID %>');
            break;
        }
    } 
```

虽然这有效，但不是每次都
`sender._postBackSettings.sourceElement.id;`
谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T05:13:54.040

您必须使用我在回答您[之前的问题](https://stackoverflow.com/questions/15608031/how-do-i-get-the-parameter-passed-in-dopostback-in-endrequest-method/15608238#15608238)时建议的相同方法。

第一个参数是事件目标。
这是触发事件的元素。
但是，您可以轻松地将其存储在您自己的变量中并稍后访问它。
您只需要将 替换为`__doPostBack`您自己的功能。

```
var orignalDoPostback = __doPostBack;
var lastEventTarget = "";
var lastEventArgument = "";
__doPostBack = function(eventTarget, eventArgument)
{
   lastEventTarget = eventTarget;
   lastEventArgument = eventArgument;
   orignalDoPostback(eventTarget, eventArgument);
} 
```

然后，您可以根据需要使用它。

# webserver - 请求不存在的图像生成自编码 404 错误页面而不是 Web 服务器响应

> ID：15629704
> 
> 赞同：0
> 
> 时间：2013-03-26T05:00:24.133
> 
> 标签：webserver, http-status-code-404

现有文件。[http://us.battle.net/d3/static/images/layout/site-bg/body-bg-1680px.jpg](http://us.battle.net/d3/static/images/layout/site-bg/body-bg-1680px.jpg)

不存在的文件。[http://us.battle.net/d3/static/images/layout/site-bg/body-bg-2500px.jpg](http://us.battle.net/d3/static/images/layout/site-bg/body-bg-2500px.jpg)

通常，Web 服务器应该给出一个错误，如：“未找到。在此服务器上未找到请求的文档。”

然而，试图找到丢失的图像会加载 Battle.net 自己的 404 页面。

他们如何处理？.ht 访问？前端控制器？自定义网络服务器配置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T05:09:54.910

这取决于所使用的网络服务器。在 apache 中有配置选项来设置错误响应的自定义路径，包括 404，例如

```
ErrorDocument 404 /somewhere/customMessage.html
ErrorDocument 500 /somewhere/differentMessage.html 
```

所以这会放在 apache 配置中，或者你可以把它放在 .htaccess 中。

# ios - sharekit 会给出关于遵从的警告。我应该忽略它吗？

> ID：15629723
> 
> 赞同：2
> 
> 时间：2013-03-26T05:02:53.070
> 
> 标签：ios, sharekit

我在以下位置获得了 sharekit 库：

[https://github.com/ShareKit/ShareKit/wiki/Installing-sharekit](https://github.com/ShareKit/ShareKit/wiki/Installing-sharekit)

我按照所有说明操作，现在当我运行我的应用程序时，我收到以下警告：

```
GTMMethodCheckMethodChecker: Class UIKeyboardCandidateUtilities does not conform to @protocol(NSObject), so won't be checked
2013-03-25 23:57:42.971 Daily Tamatar[25762:c07] GTMMethodCheckMethodChecker: Class WebMIMETypeRegistry does not conform to @protocol(NSObject), so won't be checked
2013-03-25 23:57:42.973 Daily Tamatar[25762:c07] GTMMethodCheckMethodChecker: Class SLFacebookGraphUtils does not conform to @protocol(NSObject), so won't be checked 
```

我应该担心吗？我对协议和一致性相当陌生？

谢谢

# ruby-on-rails - Rails - 在提交按钮上覆盖模型名称

> ID：15629726
> 
> 赞同：1
> 
> 时间：2013-03-26T05:03:36.567
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我想知道是否可以在创建/更新按钮上覆盖模型名称？我知道很容易覆盖提交按钮上的整个文本，即：

```
<%= f.submit "My Submit Text" %> 
```

也可以覆盖**en.yml**中更新和创建的措辞：

```
en:
  helpers:
    submit:
      create: "Custom Create %{model}"
      update: "Custom Update %{model}" 
```

但我不知道如何覆盖“模型”位，所以我有一些自定义文本（即“action”而不是“my_action”）而不是模型的名称。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-26T07:15:11.707

根据[Rails Internationalization guide](http://guides.rubyonrails.org/i18n.html#translations-for-active-record-models)，`%{model}`可以通过设置 ActiveRecord 模型的本地化键来自定义，例如：

```
activerecord:
  models:
    user: Dude 
```

您也可以覆盖该`ActiveRecord::Base.human_attribute_name(attribute)`方法，但这不仅仅是定义本地化键。

# java - 线程中的睡眠问题

> ID：15629731
> 
> 赞同：0
> 
> 时间：2013-03-26T05:04:00.007
> 
> 标签：java, android, thread-sleep

单击按钮时，我正在调用以下函数。

```
private void badButtonHandler() {
    Camera.Parameters params = mCamera.getParameters();
    params.setColorEffect(Camera.Parameters.EFFECT_NEGATIVE);
    mCamera.setParameters(params);
    if(thread != null){
        thread = null;
    }
    thread = new Thread()
    {
        @Override
        public void run() {
            try {
                while(true) {
                    sleep(5000);
                    Camera.Parameters params = mCamera.getParameters();
                    params.setColorEffect(Camera.Parameters.EFFECT_NONE);
                    mCamera.setParameters(params);
                }
            } catch (InterruptedException e) {
                e.printStackTrace();
            }
        }
    };

    thread.start();
} 
```

此功能旨在在单击按钮 5 秒后更改相机的色彩效果。第一次按下相关按钮时，它的行为与预期相同。但是对这个函数的额外调用并没有像预期的那样运行。即，第二次等待 2 秒，之后每次点击都会降低到较低的值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T06:43:06.147

您**不**应该依赖 sleep() 作为准确的计时器。它不会在指定时间自动唤醒并成为当前活动的线程，因为一个简单的事实是所有线程都受线程调度程序的支配。根据给定的JVM，这无疑会因操作系统而异。

对于这些类型的场景，我一直依赖自定义计时器功能。因此，例如：

```
myTimer(System.nanoTime());

public static void myTimer(long startTime) {
    while (startTime + 5000000000 > System.nanoTime()) { //Wait for 5 seconds
        try {
            Thread.sleep(50); //Sleep at ~50 millisecond intervals
        }
        catch (InterruptedException e) {
            e.printStackTrace();
        }
    }
} 
```

您不需要像在示例中所做的那样创建一个全新的线程，因为 Thread.sleep() 将使当前线程进入睡眠状态。此外，使用 while(true) 循环只是糟糕的编程习惯。

首选使用[nanoTime()](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/System.html#nanoTime%28%29)，因为它是 Java 中可用的最精确的系统计时器。

有关 sleep() 函数不可靠性的更多信息，请参阅[此文档](http://www.javamex.com/tutorials/threads/sleep.shtml)。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-26T07:01:06.363

尝试这个

```
Thread timer = new Thread(new Runnable() {

        @Override
        public void run() {
            // TODO Auto-generated method stub
            try {
                Thread.sleep(3000);
            } catch (InterruptedException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }finally{
                //Your desired work
            }
        }
    });
    timer.start(); 
```

# javascript - jQuery appendTo 与 html()

> ID：15629737
> 
> 赞同：0
> 
> 时间：2013-03-26T05:04:30.213
> 
> 标签：javascript, jquery, html

我有一个问题，这里提到[IE8 html select 需要两次单击才能打开 dropdown](https://stackoverflow.com/q/15571059/1823389)。我通过将 jQuery 替换`.html(...)`为`appendTo`. 有谁知道为什么会这样？

***问题总结***——

问题是当我们将 HTML `select`using`innerHTML/jQuery.html(...)`插入到其他带有单击或双击侦听器的HTML 元素（`div`或）中时，单击选择需要两次单击才能在 IE8 中打开下拉列表。`span`我正在使用`jQuery.html(…)`方法，我用`jQuery.appendTo(...)`方法替换它并且效果很好。我仍然不知道为什么在我的情况下使用 innerHTML/jQuery.html() 会出现问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T06:02:26.300

这是因为 IE8 中的 Web 加速器。

在您的示例中，当双击 DIV 时，`.html()`替换了 innerHTML，但仍然选择了组合框。（如果使用`.appendTo()`，则选择文本，而不是组合框）。在 Web 加速器模式下，第一次单击组合框将作为焦点（IE8 错误？）。

因此，要修复此错误，您可以在双击后清除选择。

```
$(function() {

    $("#click").dblclick(function(e) {
        clearSelection();// clear selection
        var options = "<select id='combobox'>"
        for ( var i = 0; i < 50; i++) {
            options += '<option value="ActionScript">Value - ' + i + '</option>';
        }
        $(this).html(options + "</select>");
    });
});

function clearSelection() {
    if(document.selection && document.selection.empty) {
        document.selection.empty();
    } else if(window.getSelection) {
        var sel = window.getSelection();
        sel.removeAllRanges();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T05:21:50.593

`.html()`就像在 dom 中替换 html 一样工作。因此 using`.html()`将擦除您的`DOM`元素及其`replace`new so new`element`并且`elements`只要您不使用`delegate`or就可能没有分配给它的事件`.on`。

`.appendTo()`作为添加子元素的工作，`DOM`因此其他`DOM`元素仍然具有之前分配的事件。但是，如果我没记错的话，您新加载的`DOM`元素仍然没有`events`分配给它们。

所以你可以使用`.on()`;

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T05:06:15.320

appendTo 将添加到现有的 DOM 元素，但 .html 将替换 DOM 元素内的所有元素

# susy-compass - 结合 Susy at-breakpoint() 和设备方向媒体查询

> ID：15629739
> 
> 赞同：1
> 
> 时间：2013-03-26T05:04:40.153
> 
> 标签：susy-compass

我对 Susy 和响应式设计比较陌生。我已经设法设置我的网格并使用 at-breakpoint()，我首先通过在调整浏览器窗口大小时对其进行测试，然后在实际的移动设备（手机和平板电脑）上对其进行测试，从而使页面完全响应. 我遇到了 iPad 的问题，因为在媒体查询中需要额外的方向规则（方向：横向）。这里的解决方法是什么，有没有办法将它包含在断点规则中，或者我必须为这种情况制作一个单独的媒体查询？

这是我的网格设置：

```
$total-columns: 4;
$column-width: 60px;
$gutter-width: 20px;
$grid-padding: $gutter-width/2;

// alternative layout breakpoints

$tablet-small: 6;
$tablet: 8;
$computer: 12; 
```

在处理侧边栏和页面正文时，首先我将它们显示为块元素以水平填充整个页面，然后在断点之后将它们表示为如下所示的列：

```
#sidebar {
    @include at-breakpoint($computer) {
        @include span-columns(3, $computer);
    }
} // sidebar

#page-body {
    @include at-breakpoint($computer) {
        @include span-columns(9 omega, $computer);
    }
} // page-body 
```

我应该如何更改代码以保留断点的变量并添加方向规则？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T05:19:06.507

如果您想针对特定设备，我认为最好指定宽度。

所以而不是`$computer: 12;`也许做`$computer: 48em 12;`

一旦`min-width: 48em;`达到，它将更改布局成为 12 列网格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T18:52:25.043

像这样的东西应该工作：

```
$device-lrg-landscape: max-device-width 480px, orientation landscape

@include breakpoint($device-lrg-landscape) 
```

# sql - Ruby NoMethodError - BlahController 的未定义方法“blah_url”

> ID：15629741
> 
> 赞同：7
> 
> 时间：2013-03-26T05:04:45.513
> 
> 标签：sql, ruby-on-rails, ruby, models

我从一个链接调用这个 js：

```
function createNewTopLevelEntry(){
var user_id = $("#user").val();
var header = prompt("Enter the name");  
$.ajax( '/users/' + user_id + '/entries', {
    data: { 
        entry: { header: header,
                 user: user_id } },
    type: 'POST',
    cache: false,
    dataType: 'json',
    success: displayTopLevelEntries
});

} 
```

它击中了这个控制器：

```
def create
  @entry = Entry.new(params[:entry])
  respond_to do |format|
    if @entry.save
      format.html { redirect_to @entry, notice: 'Entry was successfully created.' }
      format.json { render json: @entry, status: :created, location: @entry }
    else
      format.html { render action: "new" }
      format.json { render json: @entry.errors, status: :unprocessable_entity }
    end
  end
end 
```

这是服务器上的响应：

```
Started POST "/users/1/entries" for 127.0.0.1 at 2013-03-25 21:50:36 -0700
Processing by EntriesController#create as JSON
Parameters: {"entry"=>{"header"=>"Hi", "user"=>"1"}, "user_id"=>"1"}
(0.1ms)  begin transaction
SQL (0.5ms)  INSERT INTO "entries" ("completed", "created_at", "endtime", "header", "parent", "starttime", "starttimeset", "text", "totaltime", "updated_at", "user") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)  [["completed", nil], ["created_at", Tue, 26 Mar 2013 04:50:36 UTC +00:00], ["endtime", nil], ["header", "Hi"], ["parent", nil], ["starttime", nil], ["starttimeset", nil], ["text", nil], ["totaltime", nil], ["updated_at", Tue, 26 Mar 2013 04:50:36 UTC +00:00], ["user", "1"]]
(2.5ms)  commit transaction
Completed 500 Internal Server Error in 10ms

NoMethodError - undefined method `entry_url' for #<EntriesController:0x007fb22b9f7fd8>:
(gem) actionpack-3.2.11/lib/action_dispatch/routing/polymorphic_routes.rb:129:in `polymorphic_url'
(gem) actionpack-3.2.11/lib/action_dispatch/routing/url_for.rb:150:in `url_for'
(gem) actionpack-3.2.11/lib/action_controller/metal/rendering.rb:60:in `_process_options'
(gem) actionpack-3.2.11/lib/action_controller/metal/streaming.rb:208:in `_process_options'
(gem) actionpack-3.2.11/lib/action_controller/metal/renderers.rb:34:in `block in _handle_render_options' 
```

entry_url 是什么？它为什么要找它？我需要在模型中包含一些东西吗？它只有用于变量的 attr_accessors。

```
class Entry < ActiveRecord::Base
  attr_accessible :completed, :endtime, :header, :starttime, :starttimeset, :totaltime, :user, :text, :parent
end 
```

这是我的路线文件：

```
Tasks::Application.routes.draw do
  match '/users/:id/projects' => 'users#show_projects_for_user'
  authenticated :user do
    root :to => 'home#index'
  end
  root :to => "home#index"
  devise_for :users
  resources :users do 
    resources :entries
  end
end 
```

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-26T05:13:36.263

当您说 redirect_to @entry 时，entry_url 是它要求您重定向到的内容

您在路由文件中没有条目资源。您确实有一个嵌套在用户中，但是您需要像条目一样通过。

```
redirect_to [ @user, @entry ] 
```

刚刚看到你的评论 - 如果它在 JSON 路径上这样做，你需要有

```
location: [@user, @entry] 
```

基本上在您要求 rails 为条目构建 url 的任何地方，您都需要传递条目的用户，因为您在路由中的用户中嵌套了条目，而不是作为独立的资源路由。

添加编辑以响应评论，因为评论中没有格式：

是的，这将删除该位置，因为它将不再调用助手在 json 中构建该位置，但我假设你想要那个。所以试试这个让位置工作：

```
format.json { render json => { :entry => @entry, :status => created, :location => [@user, @entry] }} 
```

从您的评论中......如果这不起作用，那么让我们尝试直接调用 url helper

```
format.json { render json => { :entry => @entry, :status => created, :location => user_entry_url(@user, @entry) }} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T06:06:11.327

如果您使用的是 Rails3，这可能是因为使用 rails3，url 已成为路径

前任：

```
#rails2
entry_url

#rails3
entry_path 
```

所以尝试`entry_path`而不是`entry_url`

# java - 如何将 iReport 字体更改为参数

> ID：15629745
> 
> 赞同：2
> 
> 时间：2013-03-26T05:05:01.450
> 
> 标签：java, fonts, jasper-reports, ireport

我有生成具有自定义字体样式的报告的应用程序，例如字体系列、颜色、大小和样式（粗体、斜体、下划线）。我使用 Windows 系统中的所有字体系列。

我尝试在 .jrxml 文件中使用参数。像这样 ：
`<parameter name="fontFamily" class="java.awt.Font"/>`

在文本中：

```
<staticText>
    <reportElement uuid="3c9d8704-dbae-49ed-9787-477ff5b8742f" x="4" y="4" width="241" height="15" forecolor="#FFFFFF"/>
        <textElement verticalAlignment="Middle">
             <font fontName="$P{fontFamily}" size="11" isBold="true"/>
        </textElement>

        <text><![CDATA[Hasil Pemeriksaan PROCEDURE]]></text>
</staticText> 
```

当我在 iReport 中预览时，它会记录错误：

```
Error filling print... Font '$P{fontFamily}' is not available to the JVM. See the Javadoc for more details. 
java.lang.NoSuchMethodException: java.awt.Font.<init>(java.lang.String)      
at java.lang.Class.getConstructor0(Class.java:2730)      
at java.lang.Class.getConstructor(Class.java:1676)      
at com.jaspersoft.ireport.designer.compiler.prompt.Prompter$1.run(Prompter.java:278)      
at java.awt.event.InvocationEvent.dispatch(InvocationEvent.java:241)      
at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:727)      
at java.awt.EventQueue.access$200(EventQueue.java:103)      
at java.awt.EventQueue$3.run(EventQueue.java:688)      
at java.awt.EventQueue$3.run(EventQueue.java:686)      
at java.security.AccessController.doPrivileged(Native Method)      
at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)      
at java.awt.EventQueue.dispatchEvent(EventQueue.java:697)      
at org.netbeans.core.TimableEventQueue.dispatchEvent(TimableEventQueue.java:104)      
at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:242)      
at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:161)      
at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:150)      
at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:146)      
at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:138)      
at java.awt.EventDispatchThread.run(EventDispatchThread.java:91) 
```

请帮助我，谢谢你:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T02:49:45.510

设置以下属性

```
Markup : html
Text field expression : "<font face='" + $P{fontName} + "'>" + $F{field1} + "</font>" 
```

*将 $P{fontName} 的值设置为Monospaced*和*SansSerif*后，我可以看到差异。

# jquery - Jquery select option copy 产生不同的输出

> ID：15629746
> 
> 赞同：0
> 
> 时间：2013-03-26T05:05:05.647
> 
> 标签：jquery, html

我正在尝试从 复制`dropdown`到`one`，`another`但是当它`appends`会`options`从`previous one`. 为什么？

我的代码是：

**HTML：**

```
<select id="dropdown" multiple="multiple">
  <option value="1">Opt 1</option>
  <option value="2">Opt 2</option>
  <option value="3">Opt 3</option>
</select>
<select id="options2"></select> 
```

**脚本：**

```
$(document).ready(function(){
    $('#dropdown').on('change',function(){
        $("#dropdown option:selected").each(function(){
            $("#options2").append($(this));            
        });
    });    
}); 
```

**小提琴** [http://jsfiddle.net/5BU4T/](http://jsfiddle.net/5BU4T/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T05:10:55.127

获取元素的克隆，然后追加。

```
$("#options2").append($(this).clone()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T05:20:51.533

使用`.clone()`并记住忽略重复项。

```
 $(document).ready(function(){
    $('#dropdown').on('change',function(){
        $("#dropdown option:selected").each(function(){
            var vThis = $(this);
            // check if already added in the dropdown, dont append again
            var toAppend = true;
            $('#options2 option').each(function(){
                    if($(this).val() == vThis.val())
                    {
                        toAppend = false;
                        return;
                    }
            });

            if(toAppend == true)
                $("#options2").append(vThis.clone());     
        });
    });    
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T05:23:24.273

尝试这个 ：

```
$(document).ready(function(){
    $('#dropdown').on('change',function(){
        $("#dropdown option:selected").each(function(){
            if(!$("#options2 option[value="+$(this).val()+"]").length)
            //to remove redundancy
               $("#options2").append($(this).clone());            
        });
    });    
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-26T05:11:13.993

尝试

```
$("#options2").append("<option value='"+$(this).html()+"'>"+$(this).html()+"</option>"); 
```

# php - 使用 Pregmatch 错误检查电子邮件是否有效？

> ID：15629750
> 
> 赞同：-1
> 
> 时间：2013-03-26T05:05:25.677
> 
> 标签：php, email

您好，我想检查电子邮件是否有效，例如 blabla@blabla.com，而不仅仅是纯文本“BLbalbalba”。

我有这个功能：

```
function VerifyEmail($address) 
{
   $Syntax='#^[w.-]+@[w.-]+.[a-zA-Z]{2,5}$#';
   if(preg_match($Syntaxe,$adrdess))
      return true;
   else
     return false;
} 
```

并像这样检查它：

```
 $email = htmlentities($_POST['email']);
if (!empty($email) && !empty($password) && !empty($message) && VerifyEmail($email) === true) { 
```

收到这些错误：

```
Notice: Undefined variable: Syntaxe in C:\xampp\htdocs\recover\inc\functions.inc.php on line 20

Notice: Undefined variable: adrdess in C:\xampp\htdocs\recover\inc\functions.inc.php on line 20

Warning: preg_match() [function.preg-match]: Empty regular expression in C:\xampp\htdocs\recover\inc\functions.inc.php on line 20

Notice: Undefined variable: Syntaxe in C:\xampp\htdocs\recover\inc\functions.inc.php on line 20

Notice: Undefined variable: adrdess in C:\xampp\htdocs\recover\inc\functions.inc.php on line 20

Warning: preg_match() [function.preg-match]: Empty regular expression in C:\xampp\htdocs\recover\inc\functions.inc.php on line 20 
```

为什么会这样？我做错了什么？这是检查电子邮件是否有效的稳定方法吗？谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-26T05:07:53.350

不，它不是“稳定”，它不是“有效”，它不会做好。利用

```
filter_var($email, FILTER_VALIDATE_EMAIL) 
```

反而。相关文档：[http ://www.php.net/manual/en/function.filter-var.php](http://www.php.net/manual/en/function.filter-var.php)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-26T05:07:32.903

这里有一些拼写错误

应该

```
function VerifyEmail($address) 
{
   $Syntax='#^[w.-]+@[w.-]+.[a-zA-Z]{2,5}$#';
   if(preg_match($Syntax,$address)) 
```

# xcode - xcode“开发者”文件夹

> ID：15629752
> 
> 赞同：0
> 
> 时间：2013-03-26T05:05:32.423
> 
> 标签：xcode, cocoa-touch, xcode4, xcode4.5

我已经在 Ipad 应用程序上工作了一段时间，为了加快开发速度，我一直在使用我在 interwebz 上找到的一些控件。即 FSVerticalTabBar ，AES 加密。

就在现在，我注意到我的项目的每个文件夹中都有 2 个文件夹，这是我以前没有注意到的。这些文件夹的东西我不能用鼠标选择它们，我必须用光标突出显示它，所以我无法删除它们。想知道这是否是我应该担心的事情，或者它是否真的包含在我以前从未注意到的 xcode 中？

文件夹是：

文件夹和开发人员 ![在此处输入图像描述](../Images/95a21dfd81b603fd510a502837500371.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T05:35:15.627

我相信您在 Finder 中看到了一个错误。我偶尔也看到过同样的事情。如果您重新启动计算机，它应该会消失。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T05:07:25.847

他们可能是个问题。从您对问题的扩展解释来看，finder 似乎有问题。这可能是一个古怪的扩展或更严重的事情。考虑到您问题的严重程度，这真的很难说。

# jetty - 码头中的stackoverflow异常加载战争

> ID：15629760
> 
> 赞同：0
> 
> 时间：2013-03-26T05:06:25.837
> 
> 标签：jetty, war, stack-overflow

使用码头加载war文件，出现错误。我不知道为什么会发生这种情况。因为我在其他操作系统上没有这个问题。但是我在 Redhat Enterprise Linux 上安装后，出现了这个错误。

我猜有无限循环..在日志中，您可以在日志中看到“java.lang.ClassLoader.loadClass(ClassLoader.java:247)”。

提前致谢。

```
java.lang.StackOverflowError: null
    at java.nio.charset.CharsetEncoder.maxBytesPerChar(CharsetEncoder.java:430) ~[na:1.6.0_39]
    at java.lang.StringCoding$StringEncoder.encode(StringCoding.java:231) ~[na:1.6.0_39]
    at java.lang.StringCoding.encode(StringCoding.java:272) ~[na:1.6.0_39]
    at java.lang.String.getBytes(String.java:946) ~[na:1.6.0_39]
    at java.io.UnixFileSystem.getBooleanAttributes0(Native Method) ~[na:1.6.0_39]
    at java.io.UnixFileSystem.getBooleanAttributes(UnixFileSystem.java:228) ~[na:1.6.0_39]
    at java.io.File.exists(File.java:733) ~[na:1.6.0_39]
    at sun.misc.URLClassPath$FileLoader.getResource(URLClassPath.java:999) ~[na:1.6.0_39]
    at sun.misc.URLClassPath.getResource(URLClassPath.java:169) ~[na:1.6.0_39]
    at java.net.URLClassLoader$1.run(URLClassLoader.java:194) ~[na:1.6.0_39]
    at java.security.AccessController.doPrivileged(Native Method) ~[na:1.6.0_39]
    at java.net.URLClassLoader.findClass(URLClassLoader.java:190) ~[na:1.6.0_39]
    at java.lang.ClassLoader.loadClass(ClassLoader.java:306) ~[na:1.6.0_39]
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301) ~[na:1.6.0_39]
    at java.lang.ClassLoader.loadClass(ClassLoader.java:247) ~[na:1.6.0_39]
    at java.lang.ClassLoader.defineClass1(Native Method) ~[na:1.6.0_39]
    at java.lang.ClassLoader.defineClassCond(ClassLoader.java:631) ~[na:1.6.0_39]
    at java.lang.ClassLoader.defineClass(ClassLoader.java:615) ~[na:1.6.0_39]
    at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:141) ~[na:1.6.0_39]
    at java.net.URLClassLoader.defineClass(URLClassLoader.java:283) ~[na:1.6.0_39]
    at java.net.URLClassLoader.access$000(URLClassLoader.java:58) ~[na:1.6.0_39]
    at java.net.URLClassLoader$1.run(URLClassLoader.java:197) ~[na:1.6.0_39]
    at java.security.AccessController.doPrivileged(Native Method) ~[na:1.6.0_39]
    at java.net.URLClassLoader.findClass(URLClassLoader.java:190) ~[na:1.6.0_39]
    at java.lang.ClassLoader.loadClass(ClassLoader.java:306) ~[na:1.6.0_39]
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301) ~[na:1.6.0_39]
    at java.lang.ClassLoader.loadClass(ClassLoader.java:247) ~[na:1.6.0_39]
    at java.lang.ClassLoader.defineClass1(Native Method) ~[na:1.6.0_39]
    at java.lang.ClassLoader.defineClassCond(ClassLoader.java:631) ~[na:1.6.0_39]
    at java.lang.ClassLoader.defineClass(ClassLoader.java:615) ~[na:1.6.0_39]
    0000000at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:141) ~[na:1.6.0_39]
    at java.net.URLClassLoader.defineClass(URLClassLoader.java:283) ~[na:1.6.0_39]
    at java.net.URLClassLoader.access$000(URLClassLoader.java:58) ~[na:1.6.0_39]
    at java.net.URLClassLoader$1.run(URLClassLoader.java:197) ~[na:1.6.0_39]
    at java.security.AccessController.doPrivileged(Native Method) ~[na:1.6.0_39]
    at java.net.URLClassLoader.findClass(URLClassLoader.java:190) ~[na:1.6.0_39]
    at java.lang.ClassLoader.loadClass(ClassLoader.java:306) ~[na:1.6.0_39]
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301) ~[na:1.6.0_39]
    at java.lang.ClassLoader.loadClass(ClassLoader.java:247) ~[na:1.6.0_39]
    at java.lang.ClassLoader.defineClass1(Native Method) ~[na:1.6.0_39]
    at java.lang.ClassLoader.defineClassCond(ClassLoader.java:631) ~[na:1.6.0_39]
    at java.lang.ClassLoader.defineClass(ClassLoader.java:615) ~[na:1.6.0_39]
    at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:141) ~[na:1.6.0_39]
    at java.net.URLClassLoader.defineClass(URLClassLoader.java:283) ~[na:1.6.0_39]
    at java.net.URLClassLoader.access$000(URLClassLoader.java:58) ~[na:1.6.0_39]
    at java.net.URLClassLoader$1.run(URLClassLoader.java:197) ~[na:1.6.0_39]
    at java.security.AccessController.doPrivileged(Native Method) ~[na:1.6.0_39]
    at java.net.URLClassLoader.findClass(URLClassLoader.java:190) ~[na:1.6.0_39]
    at java.lang.ClassLoader.loadClass(ClassLoader.java:306) ~[na:1.6.0_39]
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301) ~[na:1.6.0_39]
    at java.lang.ClassLoader.loadClass(ClassLoader.java:247) ~[na:1.6.0_39]
    at java.lang.ClassLoader.defineClass1(Native Method) ~[na:1.6.0_39]
    at java.lang.ClassLoader.defineClassCond(ClassLoader.java:631) ~[na:1.6.0_39]
    at java.lang.ClassLoader.defineClass(ClassLoader.java:615) ~[na:1.6.0_39]
    at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:141) ~[na:1.6.0_39]
    at java.net.URLClassLoader.defineClass(URLClassLoader.java:283) ~[na:1.6.0_39]
    at java.net.URLClassLoader.access$000(URLClassLoader.java:58) ~[na:1.6.0_39]
    at java.net.URLClassLoader$1.run(URLClassLoader.java:197) ~[na:1.6.0_39]
    at java.security.AccessController.doPrivileged(Native Method) ~[na:1.6.0_39]
    at java.net.URLClassLoader.findClass(URLClassLoader.java:190) ~[na:1.6.0_39]
    at java.lang.ClassLoader.loadClass(ClassLoader.java:306) ~[na:1.6.0_39]
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301) ~[na:1.6.0_39]
    at java.lang.ClassLoader.loadClass(ClassLoader.java:247) ~[na:1.6.0_39]
    at java.lang.ClassLoader.defineClass1(Native Method) ~[na:1.6.0_39]
    at java.lang.ClassLoader.defineClassCond(ClassLoader.java:631) ~[na:1.6.0_39]
    at java.lang.ClassLoader.defineClass(ClassLoader.java:615) ~[na:1.6.0_39]
    at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:141) ~[na:1.6.0_39]
    at java.net.URLClassLoader.defineClass(URLClassLoader.java:283) ~[na:1.6.0_39]
    at java.net.URLClassLoader.access$000(URLClassLoader.java:58) ~[na:1.6.0_39]
    at java.net.URLClassLoader$1.run(URLClassLoader.java:197) ~[na:1.6.0_39]
    at java.security.AccessController.doPrivileged(Native Method) ~[na:1.6.0_39]
    at java.net.URLClassLoader.findClass(URLClassLoader.java:190) ~[na:1.6.0_39]
    at java.lang.ClassLoader.loadClass(ClassLoader.java:306) ~[na:1.6.0_39]
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301) ~[na:1.6.0_39]
    at java.lang.ClassLoader.loadClass(ClassLoader.java:247) ~[na:1.6.0_39]
    at java.lang.ClassLoader.defineClass1(Native Method) ~[na:1.6.0_39]
    at java.lang.ClassLoader.defineClassCond(ClassLoader.java:631) ~[na:1.6.0_39]
    at java.lang.ClassLoader.defineClass(ClassLoader.java:615) ~[na:1.6.0_39]
    at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:141) ~[na:1.6.0_39]
    at java.net.URLClassLoader.defineClass(URLClassLoader.java:283) ~[na:1.6.0_39]
    at java.net.URLClassLoader.access$000(URLClassLoader.java:58) ~[na:1.6.0_39]
    at java.net.URLClassLoader$1.run(URLClassLoader.java:197) ~[na:1.6.0_39]
    at java.security.AccessController.doPrivileged(Native Method) ~[na:1.6.0_39]
    at java.net.URLClassLoader.findClass(URLClassLoader.java:190) ~[na:1.6.0_39]
    at java.lang.ClassLoader.loadClass(ClassLoader.java:306) ~[na:1.6.0_39]
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301) ~[na:1.6.0_39]
    at java.lang.ClassLoader.loadClass(ClassLoader.java:247) ~[na:1.6.0_39]
    at java.lang.ClassLoader.defineClass1(Native Method) ~[na:1.6.0_39]
    at java.lang.ClassLoader.defineClassCond(ClassLoader.java:631) ~[na:1.6.0_39]
    at java.lang.ClassLoader.defineClass(ClassLoader.java:615) ~[na:1.6.0_39]
    at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:141) ~[na:1.6.0_39]
    at java.net.URLClassLoader.defineClass(URLClassLoader.java:283) ~[na:1.6.0_39]
    at java.net.URLClassLoader.access$000(URLClassLoader.java:58) ~[na:1.6.0_39]
    at java.net.URLClassLoader$1.run(URLClassLoader.java:197) ~[na:1.6.0_39]
    at java.security.AccessController.doPrivileged(Native Method) ~[na:1.6.0_39]
    at java.net.URLClassLoader.findClass(URLClassLoader.java:190) ~[na:1.6.0_39]
    at java.lang.ClassLoader.loadClass(ClassLoader.java:306) ~[na:1.6.0_39]
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301) ~[na:1.6.0_39]
    at java.lang.ClassLoader.loadClass(ClassLoader.java:247) ~[na:1.6.0_39] 
```

# php - 用 preg_match 检查一些单词

> ID：15629764
> 
> 赞同：0
> 
> 时间：2013-03-26T05:06:34.130
> 
> 标签：php, preg-match

我需要检查一些单词`preg_match`。如果单词包含数字 and `.`，我想回显“ok”。

可以说我想检查一下：

```
4814.84dszs  //ok
412.84.61.412  //ok
hello.4you //ok
welcome.user //not ok
481221222 // not ok 
```

我用过这个：

```
if (preg_match('/^[0-9][.]+$/', 'MY_WORD_HERE'))
{
echo 'ok';
} 
```

但它并没有给我我正在寻找的确切结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T05:22:15.970

尝试这个 ：

```
if (preg_match('/(\d+\.)|(\.\d+)/', '4814.84dszs'))
{
echo 'ok';
} 
```

`^`-> 表示在字符串的开头

`$`-> 字符串结束。

所以你的模式从头到尾都说（匹配整个字符串）

如果您删除它，它将匹配字符串中的任何位置而不是整个字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T05:24:28.747

```
$pattern = '#^([\d]{1,3})([.][\d]{1,3})([.][\d]{1,3})([.][\d]{1,3})$#'; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-26T05:13:22.230

用这个：

```
if (preg_match('/([0-9]+[\.]+|[\.]+[0-9]+)$/', 'MY_WORD_HERE'))
{
echo 'ok';
} 
```

“+”（加号）表示匹配表达式出现 1 次或多次

如果 . 并且数字没有相互跟随，中间还有其他字符：

```
if (preg_match('/([0-9]+[^0-9\.]*[\.]+|[\.]+[^0-9\.]*[0-9]+)$/', 'MY_WORD_HERE'))
{
echo 'ok';
} 
```

**说明：** 它检查是否有一个数字后跟一个点，或者是否有一个点后跟一个数字，或者即使有一个数字后跟其他字符，然后是一个点，反之亦然。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-26T05:15:02.367

尝试使用这个

```
 $pattern = '%(?=.*[0-9])(?=.*\.)%';
        if (preg_match($pattern, 'MY_WORD_HERE'))
        {
           echo 'ok';
        }

        ?> 
```

# iphone - 从 NSMutableArray 获取记录时 Indexpath.row 不起作用

> ID：15629770
> 
> 赞同：0
> 
> 时间：2013-03-26T05:07:27.290
> 
> 标签：iphone, ios, uitableview, nsmutablearray

我正在尝试加载`UITableView`来自 web 服务的数据。一切正常。但是，每当`UITableView`使用`-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath`委托方法显示记录时，我都会遇到如下异常-

![在此处输入图像描述](../Images/25048df3baac6c984309b76da1501e72.png)

这是我的代码 -

```
-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    UITableViewCell *cell; //= [[UITableViewCell alloc]initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"Reuse_Cell"];
    UILabel *label = nil;

    cell = [tableView dequeueReusableCellWithIdentifier:@"Cell"];
    cell.selectedBackgroundView = [[UIView alloc]init];
    if (cell == nil)
    {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"Cell"];

        label = [[UILabel alloc]initWithFrame:CGRectZero];
        [label setLineBreakMode:UILineBreakModeWordWrap];
        [label setNumberOfLines:1];
        [label setFont:[UIFont fontWithName:@"Trebuchet MS" size:18]];
        [label setTag:1];
        label.backgroundColor = [UIColor clearColor];
        label.textColor = [UIColor blackColor];
        [[cell contentView] addSubview:label];

    }

    if (!label)
        label = (UILabel *)[cell viewWithTag:1];

    [label setText:[[webserviceRecords objectAtIndex:indexPath.row] objectForKey:@"catName"]];
    [label setFrame:CGRectMake(10.0, 5.0, 225.0, 35.0)];

    cell.selectedBackgroundView.backgroundColor = RGBACOLOR(151.0, 191.0, 69.0, 1.0);
    cell.layer.borderWidth = 2.0f;
    cell.layer.borderColor = RGBCOLOR(214, 218, 1).CGColor;

    return cell;
} 
```

我的数组记录 -

[http://pastie.org/7120406](http://pastie.org/7120406)

自定义`init`方法

```
- (id)initwithInteger:(NSInteger )integer
{
    self = [super init];
    if (self) {
        startingpage = integer;
        webserviceRecords = [[NSMutableArray alloc]init];
    }
    return self;
} 
```

`NumberofRowsInSection`

```
-(NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    NSLog(@"Row count - %d", [webserviceRecords count]);
    return [webserviceRecords count];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T05:53:21.923

真的是一个愚蠢的错误。我已经将`JSON`数据直接解析到我`NSMutableArray`的解析中，如下所示 -

```
webserviceRecords = [NSJSONSerialization JSONObjectWithData:mutableData options:0 error:&error]; 
```

而不是这个，我已经像下面这样修复了这个 -

```
NSArray *array = nil;
array = [NSJSONSerialization JSONObjectWithData:mutableData options:0 error:&error];
webserviceRecords = [array mutableCopy]; 
```

它可以帮助我解决我的问题。感谢您回答我的问题。

干杯!

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T05:38:01.090

`selectedBackgroundView`在检查单元格是否有值之前，您正在设置单元格。在执行此操作之前，您应该先检查单元格是否为零。

附带说明一下，您可能会发现使用免费的 Sensible TableView 框架显示数组要容易得多。该框架会自动从您的数组中生成所有单元格（包括所有详细视图），如果您愿意，甚至可以直接从 Web 服务中获取数据。应该可以为您节省很多头痛和手工工作。希望这可以帮助。

# c++ - Boost.Program_Options：何时 被指定为命令行选项，什么是有效的命令行参数？

> ID：15629771
> 
> 赞同：11
> 
> 时间：2013-03-26T05:07:27.787
> 
> 标签：c++, boost, boolean, command-line-arguments, boost-program-options

给定以下 Boost.Program_Options 的简单用法：

```
boost::program_options::options_description options("Options");

options.add_options()

    ("my_bool_flag,b", boost::program_options::value<bool>(), "Sample boolean switch)")

    ; 
```

... 什么命令行参数将评估为`false`，以及什么`true`？

（即，假设程序被命名为“foo”，并在命令行上执行为： `foo -b ?` ...用问号作为其他文本的占位符：所有可能的文本选项将正确评估为`false`，以及什么`true`？ )

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-03-26T08:52:01.790

查看 $(BOOST_ROOT)/libs/program_options/src/value_semantic.cpp 你可以找到：

```
/* Validates bool value.
    Any of "1", "true", "yes", "on" will be converted to "1".<br>
    Any of "0", "false", "no", "off" will be converted to "0".<br>
    Case is ignored. The 'xs' vector can either be empty, in which
    case the value is 'true', or can contain explicit value.
*/
BOOST_PROGRAM_OPTIONS_DECL void validate(any& v, const vector<string>& xs,
                   bool*, int)
{
    check_first_occurrence(v);
    string s(get_single_string(xs, true));

    for (size_t i = 0; i < s.size(); ++i)
        s[i] = char(tolower(s[i]));

    if (s.empty() || s == "on" || s == "yes" || s == "1" || s == "true")
        v = any(true);
    else if (s == "off" || s == "no" || s == "0" || s == "false")
        v = any(false);
    else
        boost::throw_exception(invalid_bool_value(s));
} 
```

# javafx-2 - 如何在 JavaFX 中使复选框或组合框只读

> ID：15629775
> 
> 赞同：4
> 
> 时间：2013-03-26T05:07:46.487
> 
> 标签：javafx-2, readonly

如何在 javaFX 中使复选框/组合框只读但未禁用。

我尝试消费`onAction`事件，但没有奏效。

```
checkBox.setOnAction(new EventHandler<ActionEvent>() {
    @Override
    public void handle(ActionEvent event) {
        event.consume();
    }
}); 
```

使用下面代码中的所有事件都可以，但我认为这不是一个好的解决方案：

```
checkBox.addEventFilter(KeyEvent.ANY, new EventHandler<KeyEvent>() {
    @Override
    public void handle(KeyEvent event) {
        event.consume();
    }
});
checkBox.addEventFilter(MouseEvent.ANY, new EventHandler<MouseEvent>() {
    @Override
    public void handle(MouseEventevent) {
        event.consume();
    }
}); 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-01T19:13:53.763

您可以将复选框设置为禁用，但使用 CSS 设置其外观。如果您使用默认样式，您可以通过设置完全不透明度使复选框看起来“正常”。

```
checkbox.setStyle("-fx-opacity: 1"); 
```

这可能是与组合框类似的处理。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-28T12:48:47.080

`CheckBox#arm()`您可以用空的方法覆盖方法：

```
 CheckBox cb = new CheckBox("hi") {
        @Override
        public void arm() {
            // intentionally do nothing
        }
    }; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T19:06:39.667

如果不想覆盖 CheckBok 类，可以使用 selectedProperty。

```
CheckBox cb = new CheckBox("hi");
cb.selectedProperty().addListener(new NCL());

class NCL implements ChangeListener<Boolean> {

        @Override
        public void changed(ObservableValue<? extends Boolean> ov, Boolean old_val, Boolean new_val) {
            cb.setSelected(false);
        }
    } 
```

# php - 如何向 browscap.ini 文件添加更多条目？

> ID：15629779
> 
> 赞同：0
> 
> 时间：2013-03-26T05:08:09.993
> 
> 标签：php, apache, browser, browscap

那里提供的官方`browscap.ini`文件工作得很好，但它们似乎无法识别在 Win8 上运行的 Opera（*标识为“默认浏览器”，在其他版本的 Windows 上运行的 Opera 似乎被正确识别*）、Epiphany 浏览器（*标识为 Chromium*） .

如何向文件添加更多条目或获得修改后的更完整版本？还是我的问题是一个人无法解决的`browscap.ini`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T05:28:33.563

我认为最好不要依赖browscap.ini，因为您需要不断更新它，并且不能保证它包含有关所有浏览器的信息...

[更好地使用这里](http://php.net/manual/en/function.get-browser.php#101125)提到的 get_browser ....

希望对你有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T05:18:03.867

添加本身非常简单，您只需要以正确的格式添加浏览器，如下所示：

```
[IE 6.0]
browser=IE
Version=6.0
majorver=#6
minorver=#0
frames=True
tables=True
cookies=True
backgroundsounds=True
vbscript=True
javaapplets=True
javascript=True
ActiveXControls=True
Win16=False
beta=False
AK=False
SK=False
AOL=False
Update=False

[Mozilla/4.0 (compatible; MSIE 6.0; Windows 98*)]
parent=IE 6.0
platform=Win98
beta=True

[Mozilla/4.0 (compatible; MSIE 6.0; Windows NT*)]
parent=IE 6.0
platform=WinNT
beta=True

[Mozilla/4.0 (compatible; MSIE 6.0)]
parent=IE 6.0

[IE 6.0b]
browser=IE
Version=6.0
majorver=#6
minorver=#0
frames=True
tables=True
cookies=True
backgroundsounds=True
vbscript=True
javaapplets=True
javascript=True
ActiveXControls=True
Win16=False
beta=True
AK=False
SK=False
AOL=False
Update=False

[Mozilla/4.0 (compatible; MSIE 6.0b; Windows 98*)]
parent=IE 6.0
platform=Win98
beta=True

[Mozilla/4.0 (compatible; MSIE 6.0b; Windows NT*)]
parent=IE 6.0
platform=WinNT
beta=True

[Mozilla/4.0 (compatible; MSIE 6.0b)]
parent=IE 6.0b 
```

有趣的部分可能是找到您的 browscap.ini。它的位置取决于您的服务器。

在 Windows 服务器中，在 *%systemroot%\WINNT\System32\Inetsrv 文件夹中查找它。*

在 Linux 服务器中，您可能希望将其放入*/etc/extra/* 然后转到您的 php.ini 文件并像这样声明它：*browscap = /etc/extra/browscap.ini*
最后重新启动您的服务器。

如果您使用租用的服务器，您可能无法访问该文件，并且需要联系您的托管服务提供商进行任何更改。

最后，一旦您找到文件（或者如果它不存在则创建它）只需使用记事本编辑它（或者如果您是 mac 用户，则进行文本编辑）

祝你好运！我希望这有帮助。

# c++ - 静态链接 C++ 和 C 库时未定义的引用

> ID：15629780
> 
> 赞同：3
> 
> 时间：2013-03-26T05:08:16.813
> 
> 标签：c++, c, static-linking, undefined-reference

我有 3 个我正在尝试链接的库（不仅如此，但所有这些都是解释所需要的）。“根”库是 c++，它有第二个库作为它的依赖项，也是 c++。第三个库是 c 并且是第二个库的依赖项。

链接这个项目时，我得到了对从第二个库（c++）调用的第三个库（c 中）中所有方法的未定义引用。第三个库的标题正确地包含在“extern“C””中，因为它应该用于这种类型的使用。

在尝试解决这个问题时，我发现通知库它正在构建为静态的宏没有正确设置，所以我修复了这个问题，发现它改变了另一个放在所有 c 样式函数前面的宏从导出改为说“extern“C””。回顾一下，在我修复了另一个宏之后，c++ 库中的 c 样式方法在它们前面被声明为“extern“C””。当我这样做时，我在“根”库的第二个库中调用的所有 c 样式方法开始获得未定义的引用。

我认为这很奇怪，因为我没有看到其他库这样做，所以我推荐了将宏定义为“extern“C””的行部分，而不是将其留空。当我这样做时，对第二个库中 c 风格方法的未定义引用消失了，对第三个库中方法的未定义引用返回。

我自己尝试过研究，几乎每个结果都是“在括号中放一个”extern“C”！”，但是这里已经是这样了。我还认为这可能是一个链接器顺序问题，并验证了在去链接器的命令中设置的链接器顺序是合适的。所以我不知道是什么原因造成的。这似乎是一个名称混乱的事情，但我一生都无法找到这是怎么发生的或如何解决它。

我的问题：到底发生了什么？我可以探索哪些其他途径来尝试解决这个问题？

我在 Windows XP 32 位上，使用 MinGW 进行编译。如果你想看代码……那有点复杂，因为这是一个大项目，但根库是我正在开发的游戏引擎，第二个库是 cAudio，第三个库是 OpenAL soft . [这里](https://github.com/BlackToppStudios/Mezzanine)是 repo 的根目录，[这里](https://github.com/BlackToppStudios/Mezzanine/tree/master/Mezzanine/libincludes/common/caudiosrc/cAudio2.1.0)是 cAudio 的基本目录，[这里](https://github.com/BlackToppStudios/Mezzanine/tree/master/Mezzanine/libincludes/common/openalsoftsrc/openalsoft)是我们正在使用的 OpenAL 软件的基本目录。

我为这么长时间道歉，在此先感谢所有做到这一点的人！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T04:49:42.817

我设法找到了问题的原因。简短的版本是 CMake 配置错误。

长版本是当我们尝试将库构建为静态时，我们通过 CMake 手动添加了定义（这里就是这种情况）。cAudio 和 OpenAL 都有一个。当 OpenAL 编译它时，它使用了适当的 CMake 脚本部分中提供的定义。这些定义未与层次结构中的其他项目共享。因此，当 cAudio 编译导出宏的时候并没有解决为空白，而是解决了将其设置为“dllimport”。当 cAudio 进行链接时，它需要以“_ *imp* ”为前缀的符号，而编译库中的情况并非如此。从而导致我得到未定义的引用。

我通过在 cAudio CMake 中添加适当的定义解决了这个问题，以便在使用 OpenAL 包含编译 cAudio 时正确解析导入宏。

# oop - 如何使用 MATLAB 中的静态函数计算创建的实例数？

> ID：15629789
> 
> 赞同：1
> 
> 时间：2013-03-26T05:09:09.623
> 
> 标签：oop, matlab, singleton

我在 C++ 之后在 MATLAB 中学习 OOP。我正在尝试创建一个静态函数来获取为类创建的 numOfInstances。此外，一个对象的变化应该反映其他对象的变化。下面是我的代码：

```
classdef (Sealed) Student < handle

  properties (GetAccess = 'public', SetAccess = 'public')
    Name;
    ID;

  end

  methods (Access = private)
    function obj = Student

    end
  end

  methods (Static)
    function singleObj = getInstances
        persistent localObj;

        if isempty(localObj) || ~isvalid(localObj)
            localObj = Student;

        end
        singleObj = localObj;

    end
  end

  methods (Static)
    function count = getNumInstances

        persistent objCount;

        if isempty(objCount)
            objCount = 1;
        else
            objCount = objCount + 1;
        end
        count = objCount;

    end
  end
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T07:15:38.463

您需要增加构造函数中的实例数，而您目前没有这样做。这大概是我会怎么做

```
classdef cldef < handle
    methods (Static, Access = private)
        function oldValue = getOrIncrementCount(increment)
        % Private function to manage the counter
            persistent VALUE
            if isempty(VALUE)
                VALUE = 0;
            end
            oldValue = VALUE;
            if nargin > 0
                VALUE = VALUE + increment;
            end
        end
    end
    methods (Static)
        function value = getInstanceCount()
        % Public access to the counter cannot increment it
            value = cldef.getOrIncrementCount();
        end
    end
    methods
        function obj = cldef()
        % Increment the counter in the constructor
            cldef.getOrIncrementCount(1);
        end
    end
end 
```

# sql - postgres中数组聚合的算术运算

> ID：15629791
> 
> 赞同：4
> 
> 时间：2013-03-26T05:09:16.247
> 
> 标签：sql, arrays, postgresql, types, aggregate-functions

我对 postgres 中的 array_agg 有 2 个问题

1）我有一个array_agg类型的列。我需要将 array_agg 的每个元素除以一个常数值。可能吗。我检查了[http://www.postgresql.org/docs/9.1/static/functions-array.html](http://www.postgresql.org/docs/9.1/static/functions-array.html)，但找不到对 array_agg 任何算术运算的任何引用。

编辑：所需操作的示例。

```
select array_agg(value)/2 from some_table 
```

`value`在这里，我从表中创建了一个列数组，`some_table`我必须将每一列除以`4`

2) 是否可以在array_agg 中使用合并。在我的场景中，可能存在列的 array_agg 可能导致 NULL 数组的情况。我们可以为 array_agg 使用 coalesce 吗？

例子：

```
select coalsece(array_agg(value1), 0) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-26T05:20:50.307

除法可能比您想象的要简单：

```
SELECT array_agg(value/2)
FROM ... 
```

但是，`value/2`具体做什么取决于数据类型。如果 value 为`integer`，则截断小数位。要保留小数位数，请`value/2.0`改用。小数位强制计算完成[`numeric`](http://www.postgresql.org/docs/current/interactive/datatype-numeric.html)值进行计算。

`COALESCE`不会在数组*之外产生任何影响。*要么没有行，那么您根本就没有结果（“无行”），或者如果有，您会得到一个数组，可能带有`NULL`元素。但是数组本身的值永远不会`NULL`。

用 替换单个`NULL`值`0`：

```
SELECT array_agg(coalesce(value/2.0, 0))
FROM ... 
```

# oracle - Oracle中如何知道临时表空间的使用情况

> ID：15629792
> 
> 赞同：2
> 
> 时间：2013-03-26T05:09:17.477
> 
> 标签：oracle, temporary, tablespace

我正在尝试比较我的系统（Oracle 10g）中非常大的两个表。我过去比较的方式是“减号”操作。由于表很大，想实时了解临时表空间的使用情况。

我以某种方式搜索了如何使用临时表空间。但我不确定哪个是正确的。以下是三种方式：

1.从V$TEMP_SPACE_HEADER中选择TABLESPACE_NAME、BYTES_USED、BYTES_FREE；

2.从 V$TEMP_EXTEND_POOL 中选择 BYTES_USED,BYTES_CACHED

```
 What is the difference of BYTES_USED and BYTES_CACHED 
```

3.选择 USED_EXTENDS, USED_BLOCKS v$sort_segment

这三种方式真的让我很困惑，我不知道有什么区别。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T09:44:49.790

查看动态性能视图 v$sql_workarea 和 v$sql_workarea_active ——它们不仅会告诉您查询使用了多少空间，而且其中有多少可归因于执行计划中的不同阶段、哪种排序它所在的区域（哈希连接等）以及它的使用方式（单程等）。这将是一种更有效的性能调优方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-04-24T08:40:04.867

**V$SORT_SEGMENT**视图可用于获取 TEMPORARY 表空间的已用/空闲范围、已用/空闲块信息。

**V$TEMP_SPACE_HEADER**和**V$TEMP_EXTEND_POOL**视图几乎相同，它们提供使用的字节信息。但是，V$TEMP_EXTEND_POOL 是可靠的，因为前者仅在重新启动 DB 或重新创建表空间时才会更新。

**注意：**从 Oracle 11g 开始，DBA_TEMP_FREE_SPACE 视图可用于获取 TEMPORARY 表空间信息。

# java - 导致一致 GC Churn 的技术

> ID：15629794
> 
> 赞同：10
> 
> 时间：2013-03-26T05:09:24.007
> 
> 标签：java, multithreading, garbage-collection, benchmarking

我希望在处理大量正在进行的垃圾收集时对某些东西的性能进行基准测试。我之前已经对它在稳定的单线程运行中的行为进行了基准测试，现在我想在压力更大的 JVM 中进行相同的测试；本质上，我希望后台线程以相当一致的速度创建和销毁对象。

我正在寻找有关如何实现稳定但 GC 密集型操作的建议。它需要完成几个目标：

*   在 GC 上花费相当多的时间（比如 20-50%）
*   随着时间的推移，做大致一致的工作量，并为 GC 创建类似一致的工作量
*   避免堆泛滥并触发`Java heap space`错误
*   避免 GC 过载并触发[`GC overhead limit exceeded`](https://stackoverflow.com/questions/1393486/what-does-the-error-message-java-lang-outofmemoryerror-gc-overhead-limit-excee)错误

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-26T05:09:24.007

我在可能导致稳定数量的垃圾收集的事情上实现了自己的通行证。完整代码可在此处获得：[https ://gist.github.com/dimo414/5243162](https://gist.github.com/dimo414/5243162)

关键是这两种方法，它们在给定的实时时间内（与线程时间或 CPU 时间相反）构造和释放大量对象：

```
/**
 * Loops over a map of lists, adding and removing elements rapidly
 * in order to cause GC, for runFor seconds, or until the thread is
 * terminated.
 */
@Override
public void run() {
    HashMap<String,ArrayList<String>> map = new HashMap<>();

    long stop = System.currentTimeMillis() + 1000l * runFor;
    while(runFor == 0 || System.currentTimeMillis() < stop) {
        churn(map);
    }
}

/**
 * Three steps to churn the garbage collector:
 *   1\. Remove churn% of keys from the map
 *   2\. Remove churn% of strings from the lists in the map
 *      Fill lists back up to size
 *   3\. Fill map back up to size
 * @param map
 */
protected void churn(Map<String,ArrayList<String>> map) {
    removeKeys(map);
    churnValues(map);
    addKeys(map);
} 
```

该类实现`Runnable`，因此您可以在其自己的后台线程中启动它（或一次启动多个）。只要您指定它就会运行，或者如果您愿意，您可以将它作为一个守护线程启动（因此它不会阻止 JVM 终止）并指定它以`0`秒作为构造函数参数永远运行。

* * *

我对这个类做了一些基准测试，发现它花费了将近三分之一的时间阻塞（大概在 GC 上），并确定了 15-25% 的流失率和约 500 的大小的近似最佳值。每次运行持续 60 秒，下图绘制了线程时间（由 报告）`java.lang.managment.ThreadMXBean.getThreadCpuTime()`和线程分配的总字节数（由 报告）`com.sun.management.ThreadMXBean.getThreadAllocatedBytes()`。

![流失百分比基准](../Images/101a0833dd0cf121a017739242743631.png)

控制（0% 流失）本质上不应该引入任何 GC，我们可以看到它几乎没有分配任何对象，并且几乎 100% 的时间都花在线程中。从 5% 到 95% 的流失率，我们相当一致地看到大约三分之二的时间花在线程上，大概另外三分之一花在 GC 上。一个合理的百分比，我会说。有趣的是，在流失率的最高端，我们看到更多的时间花在线程上，大概是因为 GC 清理了太多，它实际上能够更有效率。似乎 20% 左右是每个周期都在搅动的大量对象。

![数据大小基准](../Images/c8f2b511e38e4409201af47244e4a1ee.png)

这描绘了线程如何在不同的目标大小下运行映射和列表，我们可以看到随着大小的增加，必须在 GC 上花费更多的时间，有趣的是我们实际上最终分配的对象更少，因为更大的数据大小意味着它无法在同一时间段内进行尽可能多的循环。由于我们对优化 JVM 必须处理的 GC 流失量感兴趣，因此我们希望它需要处理尽可能多的对象，并在工作线程中花费尽可能少的时间。因此，似乎 4-500 左右是一个不错的目标大小，因为它会生成大量对象并在 GC 中花费大量时间。

所有这些测试都是使用标准`java`设置完成的，因此使用堆可能会导致不同的行为 - 特别是，~2000 是我在堆填满之前可以设置的最大大小，我们可能会在更大的情况下看到更好的结果size 如果我们增加堆的大小。

# java - Java 数组列表和对象传递

> ID：15629797
> 
> 赞同：0
> 
> 时间：2013-03-26T05:09:33.520
> 
> 标签：java, function, object, arraylist

我的代码中有一个字符串列表。我正在将该字符串列表传递给一个函数并对其进行修改。（我正在从列表中添加/删除一些元素）。但我不希望这些更改反映在调用者函数中。更改应仅反映在被调用函数中。但是因为对象是通过引用传递的，我认为这些变化都反映在这两个函数中。我怎样才能避免这种情况。请帮忙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T05:12:59.647

在该方法中，您可以显式地制作列表的副本：

```
private void method(ArrayList<String> list) {
    ArrayList<String> copy = new ArrayList<String>(list);
    // Rest of the method
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T05:32:39.847

You have to create new list from old list manually using looping and need to pass to that method. i.e.

```
 List<String> list=new ArrayList<>();
    list.add("first");
    list.add("last");
    List<String>list2 =new ArrayList<String>();
    for(String value:list)
    {
    list2.add(new String(value));
    }
    System.out.println("list2-->"+list2); 
```

Because `new ArrayList<String>(list);` is give a new reference of list but the object still have a same reference.

**Edit:**

```
public class ArrayCopy {

    public static void main(String[] args) {

        ArrayCopy arrayCopy=new ArrayCopy();
        arrayCopy.copyData();

    }
    public void copyData()
    {
        List<Test> oldList=new ArrayList<Test>();
        oldList.add(new Test("1",10));
        oldList.add(new Test("2",45));
        List<Test> newList =new ArrayList<Test>(oldList);
        System.out.println("newList-->"+newList);

        /**
         * New Copy of Data
         */
        List<Test> newList1 =new ArrayList<Test>();
        for(Test test:newList)
        {
            newList1.add(copyProperty(test));
        }
        System.out.println("newList-->"+newList1);
    }
    private Test copyProperty(Test test)
    {
        Test newTest=new Test(test.getId(), test.getNumber());
        return newTest;
    }
    class Test{
        String id;
        int number;
        public Test(String id,int number) {
            this.id=id;
            this.number=number;
        }
        public String getId() {
            return id;
        }
        public void setId(String id) {
            this.id = id;
        }
        public int getNumber() {
            return number;
        }
        public void setNumber(int number) {
            this.number = number;
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-26T05:11:23.587

在将对象传递给函数之前，您必须对其进行复制。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-26T05:12:39.817

在 sub 方法中使用原始数组列表的新 ArrayList。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-26T05:13:13.997

你可以使用[`Clone`](http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html#clone%28%29)方法。

```
caller(ArrayList<String> a)
{
    callee((List<String>)a.clone());
}

callee(List<String> aCloned)
{

} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-26T05:17:19.237

通常`clone`不推荐该方法。看到这个[clone(): ArrayList.clone() 我认为做了一个浅拷贝](https://stackoverflow.com/questions/4592478/clone-arraylist-clone-i-thought-does-a-shallow-copy)

不过你可以试试这个方法

```
public void doOperation(List<String> list){
    List<String> duplicateList = new ArrayList(list);
    // add, or delete stuff on duplicateList
} 
```

在这里，您使用 的构造函数为`ArrayList`您提供传入列表的新副本。

# javascript - 使用 Coffeescript 计算对象中的键数

> ID：15629799
> 
> 赞同：7
> 
> 时间：2013-03-26T05:09:44.010
> 
> 标签：javascript, coffeescript

我想知道我的咖啡脚本对象中有多少键。

我可以在 js 中做到这一点：

`Object.keys(obj).length`

有没有办法在 Coffeescript 中做到这一点？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-26T05:16:50.307

```
Object.keys(obj).length 
```

它应该在咖啡脚本中以相同的方式工作

[看例子](http://coffeescript.org/#try%3aobj%20=%20%0A%20%20%20x:1%0A%20%20%20y:2%0A%20%20%20z:3%0A%20%20%20a:4%0A%0A%0A%0Aalert%28Object.keys%28obj%29.length%29)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-09-25T22:49:27.090

如果您担心旧版浏览器支持

```
Object.keys(obj).length 
```

是一个 ECMAScript 5 解决方案

但是，如果您想支持 IE8 和更早版本，这是一个相当不显眼的 Coffeescript 特定解决方案

```
(k for own k of obj).length 
```

这利用 CoffeeScript 的[Comprehension Syntax](http://coffeescript.org/#loops)来构建一个键数组

```
keys = (k for own k of obj)  # Array of keys from obj 
```

然后在该数组上调用长度

[编译后的 JavaScript 示例](http://coffeescript.org/#try:obj%20%3D%20%0A%20%20%20x%3A1%0A%20%20%20y%3A2%0A%20%20%20z%3A3%0A%20%20%20a%3A4%0A%0Aalert%20(k%20for%20own%20k%20of%20obj).length)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-05T11:13:40.060

我创建了`keys`原型函数：

```
Object.defineProperty Object.prototype, 'keys',
    enumerable  : false,
    writable    : true,
    value: ->
        return (key for own key of @) 
```

这样我就可以像这样使用它

```
nodes_Ids: ->
  return _nodes_By_Id.keys() 
```

在这个测试中使用

```
it 'add_Node',->
  visGraph = Vis_Graph.ctor()
  visGraph.add_Node('a' ).nodes.assert_Size_Is(1)
  visGraph.add_Node('a' ).nodes.assert_Size_Is(1)
  visGraph.add_Node(    ).nodes.assert_Size_Is(1)
  visGraph.add_Node(null).nodes.assert_Size_Is(1)
  visGraph.add_Node('b' ).nodes.assert_Size_Is(2)
  visGraph.nodes_Ids()   .assert_Contains     ('a' )
  visGraph.nodes_Ids()   .assert_Contains     ('b')
  visGraph.nodes_Ids()   .assert_Not_Contains ('c' ) 
```

# jquery - 使用 shift 或 control 多次选择图像后缩小图像并单击

> ID：15629806
> 
> 赞同：-1
> 
> 时间：2013-03-26T05:10:05.480
> 
> 标签：jquery, jquery-ui

嗨，我正在选择一个 div 中存在的多个图像，并正在使用 jquery ui sortable 在另一个 div 中处理该图像。当我选择多个图像时。我想使用 jquery 将图像组合或动画成单个图像效果。任何人都可以帮助我.how to do that in jquery ..Thanks.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T05:51:37.217

我使用 jquery 找到了这个漂亮的拖放插件......希望这对你有用......谢谢......

[http://dragsort.codeplex.com/](http://dragsort.codeplex.com/)

# eclipse-emf - 如何将 EMF 数据绑定用于隐式反向关系

> ID：15629807
> 
> 赞同：1
> 
> 时间：2013-03-26T05:10:24.670
> 
> 标签：eclipse-emf, eclipse-databinding

我有一个 A 类和 B 类的 Ecore 模型。这个模型不能改变。A 对 B 有一个多对一的引用。B 没有对 A 的引用。我想显示一棵树，其根为 B，叶子为 As。我想使用 EMF 数据绑定。我见过的所有示例都假设存在要观察的根的列表特征。然而，在我的场景中，这个方向没有特征（即B_to_A），只有一个反向特征。

如何创建一个观察 B 并通知 As 变化的 Observable？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T00:32:23.987

没有这样做的机制。我收到了 Tom Schindl 的回复：http: [//tomsondev.bestsolution.at/2009/06/06/galileo-emf-databinding-part-1/](http://tomsondev.bestsolution.at/2009/06/06/galileo-emf-databinding-part-1/)

> 不幸的是，没有办法。您必须定义 eOpposites

# asp.net - asp.net 捆绑如何在内部工作

> ID：15629816
> 
> 赞同：7
> 
> 时间：2013-03-26T05:11:02.683
> 
> 标签：asp.net, asp.net-mvc-3

我很想知道 asp.net 捆绑是如何工作的。

我知道我们必须将所有脚本、css 和图像添加到包中，以便浏览器将对所有资源发起单个请求。

我对页面如何从客户端浏览器引用这些捆绑资源有些困惑。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-26T06:52:30.037

让我们看看当我们在 System.Web.Optimization 中使用捆绑时会发生什么。

在此示例中，我使用了“空 ASP.NET MVC 4 模板”并从 nuget 获取了最新的“Microsoft.AspNet.Web.Optimization”包。

然后我开始注册 2 个 javascript 文件。一个用于 jquery，另一个用于引导程序。

```
public static void RegisterBundles(BundleCollection bundles)
{
    var javascriptBundle = new Bundle("~/bundles/javascripts")
        .Include("~/Scripts/jquery-{version}.js")
        .Include("~/Content/bootstrap/js/bootstrap.js");
    bundles.Add(javascriptBundle);
} 
```

现在我们已经完成了设置，让我们看看查看页面时会发生什么。

![调试视图](../Images/1cc687f2158f5ac06d51a6c690b4938f.png)

您可以看到这两个 javascript 文件都像我们通常所做的那样被包含在内。当您在 web.config 中设置了“调试”标志时，就会发生这种情况。

让我们把它变成假的，看看现在会发生什么。

![调试设置为假](../Images/0aa4f885e3fd9163360fee3fafed4d5b.png)

现在我们看到的是添加了一个参考，但具有一个非常独特的位置。通过单击它，我们看到它吐出了我们包中引用的两个 javascript 文件的缩小和组合版本。

![有趣的人物](../Images/f61699619630baf58f25d61ad5d4924b.png)

这个有趣的查询字符串参数 v=loMmcAiXrKwMoVsM8Ok8Q5jVmuFQUI3fiiRVJQC33Hs1 是对我们内容的引用，我们可以看到无论我们访问网站多少次，它都会保持不变。（即多次刷新）。

让我们看看 fiddler 对我们的 javascript 文件的引用是怎么说的。

![缓存](../Images/089998daf09f981c3b853a94e61eacd4.png)

我们可以看到响应是可缓存的。缓存过期时间已设置为“Wed, 26 Mar 2014 06:49:06 GMT”。从今天算起快一年了。

对资源的后续请求将从浏览器的缓存中读取。“此 HTTP/304 响应表明现有缓存响应保持新鲜。HTTP/304 响应上的缓存生命周期标头可用于更新缓存响应的新鲜度。”

如果您需要更多信息，另请参阅[http://www.asp.net/mvc/tutorials/mvc-4/bundling-and-minification](http://www.asp.net/mvc/tutorials/mvc-4/bundling-and-minification)

# grid - 剑道网格是否支持脚手架/自动生成列

> ID：15629819
> 
> 赞同：1
> 
> 时间：2013-03-26T05:11:12.153
> 
> 标签：grid, kendo-ui

我正在使用 MVC4，我希望能够将我的网格绑定到模型并让它在运行时生成列。我以前用 .asp 版本的控件做过这个，我是 Kendo UI 版本的新手。我读到我不应该使用 Telerik 的 MVC 版本，因为它们已经过时了。我已经寻找了一个如何在没有运气的情况下做到这一点的例子。（在他们的网站和谷歌上）

我不必使用 Kendo 网格控件，所以如果有更好的东西可以与 MVC 一起使用，我也很想知道。我最终会想使用一些高级功能，例如详细信息模板。

在此先感谢您的帮助，斯科特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-08T19:30:50.897

列工厂对象提供了这一点。例如这个：

```
.Columns(col => {
  col.Bound(c => c.columnname1);
  col.Bound(c => c.columnname2);
  col.Bound(c => c.columnname3);
  col.Bound(c => c.columnname4);
}) 
```

会变成这样：

```
.Columns(col => {
   col.AutoGenerate(true);
}) 
```

# mysql - 在mysql中使用group by选择最小值

> ID：15629826
> 
> 赞同：4
> 
> 时间：2013-03-26T05:12:19.457
> 
> 标签：mysql, sql, select

我的数据库方案，

```
CREATE TABLE `result` (
`ID` bigint(21) NOT NULL AUTO_INCREMENT,
`datetime` datetime DEFAULT NULL,
`recordnum` int(11) DEFAULT NULL,
`recordtype` int(11) DEFAULT NULL,
`minvalue` int(11) DEFAULT NULL,
`maxvalue` int(11) DEFAULT NULL,
`data1` int(11) DEFAULT NULL,
`data2` int(11) DEFAULT NULL,
`area` varchar(32) DEFAULT NULL,
PRIMARY KEY (`ID`),
UNIQUE KEY `res` (`datetime`,`recordnum`,`area`)
) ENGINE=MyISAM AUTO_INCREMENT=7 DEFAULT CHARSET=latin1; 
```

数据样本

> ```
> INSERT INTO `result` VALUES ('1', '2013-03-26 12:03:31', '2', '1', '5', '10', '100', '200','Zone1');
> 
> INSERT INTO `result` VALUES ('2', '2013-03-26 12:03:31', '2', '1', '2', '7', '20', '20','Zone2');
> 
> INSERT INTO `result` VALUES ('3', '2013-03-26 12:03:31', '5', '2', '1', '2', '8', '15','Zone2');
> 
> INSERT INTO `result` VALUES ('4', '2013-03-26 12:00:31', '2', '1', '2', '7', '100', '200','Zone1');
> 
> INSERT INTO `result` VALUES ('5', '2013-03-26 12:00:31', '2', '1', '3', '9', '100', '200','Zone2');
> 
> INSERT INTO `result` VALUES ('6', '2013-03-26 12:00:31', '5', '2', '7', '2', '4', '10', 'Zone2');
> 
> INSERT INTO `result` VALUES ('7', '2013-03-25 12:03:31', '2', '1', '5', '10', '100', '200','Zone1');
> 
> INSERT INTO `result` VALUES ('8', '2013-03-25 12:03:31', '2', '1', '2', '7', '20', '20','Zone2');
> 
> INSERT INTO `result` VALUES ('9', '2013-03-25 12:03:31', '5', '2', '1', '2', '8', '15','Zone2');
> 
> INSERT INTO `result` VALUES ('10', '2013-03-25 12:00:31', '2', '1', '2', '7', '100', '200','Zone1');
> 
> INSERT INTO `result` VALUES ('11', '2013-03-25 12:00:31', '2', '1', '3', '9', '100', '200','Zone2');
> 
> INSERT INTO `result` VALUES ('12', '2013-03-25 12:00:31', '5', '2', '7', '2', '4', '10','Zone2');
> 
> INSERT INTO `result` VALUES ('13', '2013-03-25 11:03:31', '2', '1', '3', '10', '100','200', 'Zone1');
> 
> INSERT INTO `result` VALUES ('14', '2013-03-25 11:03:31', '2', '1', '8', '7', '20', '20','Zone2');
> 
> INSERT INTO `result` VALUES ('15', '2013-03-25 11:03:31', '5', '2', '2', '2', '8', '15','Zone2');
> 
> INSERT INTO `result` VALUES ('16', '2013-03-25 11:00:31', '2', '1', '1', '7', '100', '200','Zone1');
> 
> INSERT INTO `result` VALUES ('17', '2013-03-25 11:00:31', '2', '1', '9', '9', '100', '200','Zone2');
> 
> INSERT INTO `result` VALUES ('18', '2013-03-25 11:00:31', '5', '2', '12', '2', '4', '10','Zone2'); 
> ```

我想要的是当 minvalue 对于每个**recordnum**和**area**以及**date都是最小值时查询每个值**

```
 +----+---------------------+-----------+-------+----------+----------+-------+-------+------------+
    | ID | datetime            | recordnum | area  |minvalue  | maxvalue | data1 | data2 | recordtype |
    +----+---------------------+-----------+-------+----------+----------+-------+-------+------------+
    |  2 | 2013-03-26 12:03:31 |         2 | Zone2 |        2 |        7 |    20 |    20 |          1 |
    |  3 | 2013-03-26 12:03:31 |         5 | Zone2 |        1 |        2 |     8 |    15 |          2 |
    |  4 | 2013-03-26 12:00:31 |         2 | Zone1 |        2 |        7 |   100 |   200 |          1 |
    |  8 | 2013-03-25 12:03:31 |         2 | Zone2 |        2 |        7 |    20 |    20 |          1 |
    |  9 | 2013-03-25 12:03:31 |         5 | Zone2 |        1 |        2 |     8 |    15 |          2 |
    | 16 | 2013-03-25 11:00:31 |         2 | Zone1 |        1 |        7 |   100 |   200 |          1 |
    +----+---------------------+-----------+-------+----------+----------+-------+-------+------------+ 
```

下面这个查询给出了很好的结果，但仍然显示重复记录，请帮助

```
SELECT  a.*
FROM    result a
        JOIN
        (
            SELECT  datetime as mindatetime,DATE(datetime) dateOnly,area, recordNum, MIN(minvalue) min_val
            FROM    result
            GROUP   BY dateOnly,area, recordNum
        ) b  ON a.area = b.area AND
                a.recordNUM = b.recordNum AND
                a.minvalue = b.min_val ;
+----+---------------------+-----------+------------+----------+----------+-------+-------+-------+
| ID | datetime            | recordnum | recordtype | minvalue | maxvalue | data1 | data2 | area  |
+----+---------------------+-----------+------------+----------+----------+-------+-------+-------+
|  2 | 2013-03-26 12:03:31 |         2 |          1 |        2 |        7 |    20 |    20 | Zone2 |
|  2 | 2013-03-26 12:03:31 |         2 |          1 |        2 |        7 |    20 |    20 | Zone2 |
|  3 | 2013-03-26 12:03:31 |         5 |          2 |        1 |        2 |     8 |    15 | Zone2 |
|  3 | 2013-03-26 12:03:31 |         5 |          2 |        1 |        2 |     8 |    15 | Zone2 |
|  4 | 2013-03-26 12:00:31 |         2 |          1 |        2 |        7 |   100 |   200 | Zone1 |
|  8 | 2013-03-25 12:03:31 |         2 |          1 |        2 |        7 |    20 |    20 | Zone2 |
|  8 | 2013-03-25 12:03:31 |         2 |          1 |        2 |        7 |    20 |    20 | Zone2 |
|  9 | 2013-03-25 12:03:31 |         5 |          2 |        1 |        2 |     8 |    15 | Zone2 |
|  9 | 2013-03-25 12:03:31 |         5 |          2 |        1 |        2 |     8 |    15 | Zone2 |
| 10 | 2013-03-25 12:00:31 |         2 |          1 |        2 |        7 |   100 |   200 | Zone1 |
| 16 | 2013-03-25 11:00:31 |         2 |          1 |        1 |        7 |   100 |   200 | Zone1 |
+----+---------------------+-----------+------------+----------+----------+-------+-------+-------+ 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-26T05:16:09.170

如何解决这个问题有很多变化。一种是使用单独的子查询，它`minvalue`为每个`area and recordNum`. 然后将子查询的结果连接回原始表，以便您可以获取行中的所有列。

```
SELECT  a.*
FROM    result a
        INNER JOIN
        (
            SELECT  area, recordNum, MIN(minvalue) min_val
            FROM    result
            GROUP   BY area, recordNum
        ) b  ON a.area = b.area AND
                a.recordNUM = b.recordNum AND
                a.minvalue = b.min_val 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/8270c/2)

输出

```
╔════╦══════════════════════════════╦═══════════╦════════════╦══════════╦══════════╦═══════╦═══════╦═══════╗
║ ID ║           DATETIME           ║ RECORDNUM ║ RECORDTYPE ║ MINVALUE ║ MAXVALUE ║ DATA1 ║ DATA2 ║ AREA  ║
╠════╬══════════════════════════════╬═══════════╬════════════╬══════════╬══════════╬═══════╬═══════╬═══════╣
║  2 ║ March, 26 2013 12:03:31+0000 ║         2 ║          1 ║        2 ║        7 ║    20 ║    20 ║ Zone2 ║
║  3 ║ March, 26 2013 12:03:31+0000 ║         5 ║          2 ║        1 ║        2 ║     8 ║    15 ║ Zone2 ║
║  4 ║ March, 26 2013 12:00:31+0000 ║         2 ║          1 ║        2 ║        7 ║   100 ║   200 ║ Zone1 ║
╚════╩══════════════════════════════╩═══════════╩════════════╩══════════╩══════════╩═══════╩═══════╩═══════╝ 
```

# iphone - 支持的接口方向和 shouldAutorotateToInterfaceOrientation

> ID：15629829
> 
> 赞同：0
> 
> 时间：2013-03-26T05:12:29.640
> 
> 标签：iphone, ios, objective-c

在我的项目设置中，我将支持的界面方向设置为两个横向。

我还应该在每个视图控制器中实现下面吗？

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return UIInterfaceOrientationIsLandscape(interfaceOrientation);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T05:20:02.140

iOS < 6.x

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation // Deprecated in iOS 6.x 
{
    return UIInterfaceOrientationIsLandscape(interfaceOrientation);
} 
```

iOS > 6.x

```
- (BOOL) shouldAutorotate
{
    return YES;
}

-(NSUInteger)supportedInterfaceOrientations
{
    return UIInterfaceOrientationMaskLandscape;
} 
```

希望这会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T05:14:58.707

是更好的实现，如果你在 info.plist 中实现它会更好

对于 ios>6

```
- (BOOL) shouldAutorotate
{
    return YES;
}

-(NSUInteger)supportedInterfaceOrientations
{
    return UIInterfaceOrientationMaskLandscape;
} 
```

# shell - shell 脚本的行为与 Automator 不同

> ID：15629835
> 
> 赞同：1
> 
> 时间：2013-03-26T05:13:30.997
> 
> 标签：shell, html-parsing, beautifulsoup, automator

我有几个脚本来清理一些生成的 HTML；一个使用 BeautifulSoup 的 python 脚本和一个 Ruby 脚本。这些删除不需要的标签和属性，将符号转换为 html 编码，去掉过多的换行符，并确保文件以有效的 UTF-8 编码。

我可以从命令行运行这两个脚本，它们按预期工作；我可以从命令行在这个 shell 脚本中运行它们：

```
#!/bin/bash
HTMLPath=$1

echo $HTMLPath 2>&1 >> /Users/me/Desktop/log.txt
/usr/bin/python /Users/me/DevProj/script/cleanHTML.py "$HTMLPath" 2>&1 >> /Users/me/DevProj/logs/log.txt
/Users/me/.rvm/rubies/ruby-1.9.3-p374/bin/ruby /Users/me/DevProj/script/cleanupHtml.rb "$HTMLPath" 2>&1 >> /Users/me/DevProj/logs/log.txt 
```

这也给出了预期的结果。

但是，当我从 Automator 运行它们时，它会为它们提供要处理的 html 文件列表，python 脚本会`&#x2212;`从文件中删除 html 编码（减号的 HTML 编码`-`），而我最终得到的是空白。问题是，我需要保留那些减号，最好是因为`&minus;`我需要它从 Automator 运行。

我认为这可能与 Automator shell 使用的 python 版本有关，因此我创建了 shell 脚本以确保它使用与命令行/bin/bash 相同的 bash shell。

有没有其他人遇到过这个问题？我在 Automator 上做错了吗？

在我添加的脚本中，`python --version >> log.txt`但它不会将 python 版本输出到日志中......我偷偷怀疑 Automator 正在使用它自己的旧 python 库。

**注意：**我只`&#x2212;`在输入文件中有字符串时遇到过这个问题。否则它从 Automator 运行良好。Automator 是导致问题的原因。

# node.js - HAProxy 处理 Socket.IO 请求 - 保留字段必须为空

> ID：15629840
> 
> 赞同：1
> 
> 时间：2013-03-26T05:13:56.313
> 
> 标签：node.js, socket.io, haproxy

希望有人可以帮助我。

我正在使用 NodeJS v0.8.16 Socket.ID v0.9.13 和 HAProxy 1.5-dev17。

我的设置是在 Amazon AWS 上使用 VPC，HAProxy 在面向公众的实例上，NodeJS 在通常不可公开访问的单独实例上。我确实有一个IP地址用于测试。

我有一个测试设置，它登录到 NodeJS 服务器，然后通过 Socket.IO 打开一个经过身份验证的 websocket，会话详细信息保存在 Redis 中以在它们之间共享。一旦 websocket 连接成功，就会通过 NodeJS 发出一个请求，该请求会提示一个事件被发送回客户端。

当测试直接绕过 HAProxy 引用 NodeJS 实例时，此流程可以正常工作。当它通过 HAProxy 路由时，我从 Socket.IO 得到错误

“保留字段必须为空”和“无操作码处理程序”引用随机操作码

据我所知，Socket.IO 使用位掩码解析了一个初始字节，以确定请求的目的。通过 HAProxy 路由后，yhis 值现在不是预期值并引发这些错误。

我的 HAProxy 配置来自另一个 StackOverflow 问题[HAProxy + WebSocket Disconnection](https://stackoverflow.com/questions/4360221/haproxy-websocket-disconnection)

```
global
    maxconn     4096 # Total Max Connections. This is dependent on ulimit
    nbproc      2

defaults
    mode        http
    retries 3
    option redispatch
    option http-server-close

frontend all 0.0.0.0:3000
    timeout client 5000
    default_backend www_backend
    acl is_websocket hdr(Upgrade) -i WebSocket
    acl is_websocket hdr_beg(Host) -i ws

    use_backend socket_backend if is_websocket

backend www_backend
    balance roundrobin
    option forwardfor # This sets X-Forwarded-For
    timeout server 5000
    timeout connect 4000
    server server 10.0.0.214:3000 weight 1 maxconn 1024 check

backend socket_backend
    balance roundrobin
    option forwardfor # This sets X-Forwarded-For
    timeout queue 5000
    timeout server 5000
    timeout connect 5000
    timeout tunnel 3600s
    timeout http-keep-alive 1s
    timeout http-request 15s
    server server1 10.0.0.214:3000 weight 1 maxconn 1024 check 
```

我还尝试了其他各种 HAProxy 配置，但最终得到了相同的结果。

有没有人遇到过这个问题。我不确定我做错了什么。

# javascript - 更新 ng-view 而不更新 url

> ID：15629844
> 
> 赞同：4
> 
> 时间：2013-03-26T05:14:43.337
> 
> 标签：javascript, jquery, angularjs

我正在研究 angularJS，我有一种情况，我必须通过单击按钮来加载新视图，但保持 url 相同。我对 jQuery 做了同样的事情： `$(".container").fadeOut("slow").load('page.html').hide().fadeIn();`

这怎么可能？我不想更改/路由 url，因为如果不先访问其他视图/页面，其他视图是无用的。过渡是必要的。

我也在想 ng-include 。但是是否可以将它绑定到每个包含的模板的特定控制器上，就像通过路由器一样（如下所示）？还是我应该做一些自定义指令？

```
 .when('/page', {
        controller: Controller,
        templateUrl: 'page.html'
    }) 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T02:53:55.800

如果您不想更改路径，唯一真正的选择是使用 ng-include 或自定义指令。最简单的方法是使用 ng-include。您只需将 ng-controller 添加到包含用于控制器映射的 HTML 的根元素中。

Ng-view 仅适用于路由，因此需要更改路径才能使用 ng-view。

# python - 如何返回表中最受欢迎的项目，但每个项目都是独一无二的？

> ID：15629846
> 
> 赞同：4
> 
> 时间：2013-03-26T05:14:47.413
> 
> 标签：python, django

我正在尝试找出一个棘手的 Django 查询，希望您能提供帮助。我有这个模型：

```
class ActiveVenue(models.Model):
    event = models.ForeignKey(Event)
    venue = models.ForeignKey(Venue)

class Venue(models.Model):
    name = models.CharField(max_length=200)

class Event(models.Model):
    user = models.ForeignKey(User)
    name = models.CharField(max_length=200) 
```

在我的应用程序中有很多事件，每个事件都可以有多个活动场所，因此是我当前的数据结构。我希望您的解决方案不是“将您的模型更改为 foo”，因为这已经是一个已部署的站点，我想保留当前的模型结构。

我想编写一个查询，返回最受欢迎的场所，但每个用户只计算一次场所。例如，如果我有一个用户参加四个活动，并且他们每次都使用同一个场地，那么在确定最受欢迎的场地时，我只想计算一次该场地。

为了说明这一点，假设这是我的数据：

```
event: A    user: bob   venue: The Hill
event: B    user: bob   venue: The Hill
event: C    user: bob   venue: The Hill
event: D    user: jane   venue: The Oaks
event: E    user: sarah   venue: The Pound
event: F    user: david   venue: The Pound
event: G    user: ron   venue: The Oaks
event: H    user: erica   venue: The Oaks 
```

这里流行的顺序是：

```
1\. The Oaks
2\. The Pound
3\. The Hill 
```

有什么建议我如何编写查询来执行此操作，该查询适用于 postgres 和 sqlite（换句话说，不依赖`distinct()`（在 sqlite 中不受支持））？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T06:07:07.090

这行得通吗？

```
from collections import Counter 
results = Counter([vid for vid, eid in ActiveVenue.objects.values_list("venue_id", "event_id").distinct()] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T20:44:48.580

这是我对这个问题的看法。首先，这是一个查询，它将获取与相关用户对应的 Venue id 和分数。

```
testquery = ActiveVenue.objects.values("venue").annotate(score=Count("event__user", distinct=True)).order_by("-score") 
```

结果

```
[{'score': 3, 'venue': 2}, {'score': 2, 'venue': 3}, {'score': 1, 'venue': 1}] 
```

接下来，场地 ID 将被放置在一个新列表中。

```
query_ids = [item["venue"] for item in testquery]
[2, 3, 1] 
```

接下来，必须获得相应的 Venue 对象。

```
tempresult = Venue.objects.filter(id__in=query_ids)
[<Venue: The Hill>, <Venue: The Oaks>, <Venue: The Pound> 
```

最后，将执行列表推导以根据之前获得的分数对 Venue 对象进行重新排序。

```
result = [venue for venue_id in query_ids for venue in tempresult if venue_id == venue.id]
[<Venue: The Oaks>, <Venue: The Pound>, <Venue: The Hill>] 
```

这会根据测试数据给出正确的结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T06:40:30.997

这是我的版本（完成测试）：

**模型.py**

```
class Venue(models.Model):
    name = models.CharField(max_length=200)

    def __unicode__(self):
        return self.name

    def ranking(self):
        count=0
        actives = ActiveVenue.objects.filter(
            venue__name=self.name).values(
            'event__user__username', 'venue__name').distinct()
        for active in actives:
            count += 1
        return count 
```

**视图.py**

```
def getRanking( anObject ):
    return anObject.ranking()

def myview(request):
    venues = list(Venue.objects.filter())
    venues.sort(key=getRanking, reverse=True)
    return render(request,'page.html',{'venues': venues}) 
```

**模板**

```
{% for venue in venues %}
    {{forloop.counter}}. {{venue}}<br/>
{% endfor %} 
```

**输出：**

1.  橡树
2.  英镑
3.  小山

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-26T06:30:32.210

看看这样的东西是否有效

```
ActiveVenue.objects.all().annotate(score=Count('event__user', distinct=True)).order_by('-score') 
```

# php - 如何使用 PHP 在服务器端获取版本名称/代码

> ID：15629851
> 
> 赞同：0
> 
> 时间：2013-03-26T05:15:26.677
> 
> 标签：php, android

后端现在不支持我以前的版本之一。所以，我想获取调用服务器的应用程序的版本代码/名称，以便服务器可以做出相应的响应。

在以后的版本中，我将使用标题来实现这一点。像这样：

```
httppost = new HttpPost(url);
httppost.setHeader("version", "10"); 
```

但是任何方法都可以在服务器端获取版本而无需设置标头，只需从 apk 的清单中即可。

我`PHP`在后端使用。

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T05:18:59.390

可惜没有，

HttpPost 旨在仅包含您提供的标题和数据，它不会自动添加任何内容。

您可以在新版本中添加该标头，以防标头丢失（从服务器端 PHP 脚本检查时）然后拒绝访问或要求用户安装新版本。

# c# - 中继器未在托管服务器上的 asp.net 应用程序中显示任何数据

> ID：15629853
> 
> 赞同：0
> 
> 时间：2013-03-26T05:15:36.947
> 
> 标签：c#, asp.net

我正在使用中继器，它在本地系统上工作正常，但在网络服务器上上传时不工作。从我们的本地代码连接到服务器时它也可以正常工作。以下是页面代码和背后的代码。并重复包含文本框，在运行时动态加载的下拉列表

页面代码：

```
<%@ Control Language="C#" AutoEventWireup="true" CodeFile="UC_TopicSchedulingNew.ascx.cs" Inherits="Scheduling_UC_TopicSchedulingNew" %>

<%@ Register Assembly="XtendedControls" Namespace="XtendedControls" TagPrefix="cc1" %>
<%@ Register Namespace="AjaxControlToolkit" Assembly="AjaxControlToolkit" TagPrefix="ajax" %>
<%@ Register Src="~/SelectPopup/UC_PopupDropdown.ascx" TagName="PopupSelectAny" TagPrefix="PD" %>
<script type="text/javascript">
function pageLoad() {
    $('.DatepickerInput').datepicker({ changeMonth: true, changeYear: true, yearRange: '1950:2050', dateFormat: 'dd/mm/yy', showButtonPanel: true });
}

$(document).ready(function () {
    $('.DatepickerInput').datepicker({ changeMonth: true, changeYear: true, yearRange: '1950:2050', dateFormat: 'dd/mm/yy', showButtonPanel: true });
});
</script>
<asp:UpdatePanel runat="server" ID="updtsForm">
<ContentTemplate>
    <div style="width: 100%; float: left; padding-left: 10px;">
        <div style="width: 20%; float: left; padding-left: 10px;">
            <div class="editor-label" style="font-weight: bold;">
                Branch : <b style="color: Red;">*</b>
            </div>
            <div class="editor-field">
                <asp:TextBox ID="txtBranchs" runat="server" CssClass="txt-drop-down" TabIndex="1"
                    ReadOnly="true" Width="16px"></asp:TextBox><cc1:XBranch ID="XBranch" runat="server"
                        TabIndex="-1"></cc1:XBranch>
                <ajax:PopupControlExtender ID="PopExBranchs" runat="server" TargetControlID="txtBranchs"
                    BehaviorID="exbranchClose" PopupControlID="pnlListBranchs" CommitProperty="value"
                    Position="Bottom" OffsetY="2" />
                <asp:HiddenField ID="HFBranchID" runat="server" />
            </div>
            <br />
            <div class="editor-label" style="font-weight: bold;">
                Course : <b style="color: Red;">*</b>
            </div>
            <div class="editor-field">
                <asp:TextBox ID="txtCourse" runat="server" CssClass="txt-drop-down" TabIndex="2"
                    ReadOnly="true" Width="16px"></asp:TextBox><cc1:XCourse ID="XCourse" runat="server"
                        TabIndex="-1"></cc1:XCourse>
                <ajax:PopupControlExtender ID="PopExCourse" runat="server" TargetControlID="txtCourse"
                    BehaviorID="excourseClose" PopupControlID="pnlListCourse" CommitProperty="value"
                    Position="Bottom" OffsetY="2" />
                <asp:HiddenField ID="HFCourseID" runat="server" />
            </div>
            <br />
            <div class="editor-label" style="font-weight: bold;">
                Batch :
            </div>
            <div class="editor-field">
                <asp:TextBox ID="txtBatch" runat="server" CssClass="txt-drop-down" TabIndex="44"
                    ReadOnly="true" Width="16px"></asp:TextBox><cc1:XTextBox ID="XBatch" runat="server"
                        TabIndex="-1"></cc1:XTextBox>
                <ajax:PopupControlExtender ID="PopExBatch" runat="server" TargetControlID="txtBatch"
                    BehaviorID="exBatchClose" PopupControlID="pnlListBatch" CommitProperty="value"
                    Position="Bottom" OffsetY="2" />
                <asp:HiddenField ID="HFBatchID" runat="server" Value="0" />
                <asp:HiddenField ID="HFBatchClRoom" runat="server" />
            </div>
            <br />
        </div>
        <div style="width: 20%; float: left; padding-left: 10px;">
            <div class="editor-label" style="font-weight: bold;">
                Time :
            </div>
            <div class="editor-field">
                <cc1:XTextBox ID="XTime" runat="server" TabIndex="-1" Width="149px"></cc1:XTextBox>
            </div>
            <br />
            <div class="editor-label" style="font-weight: bold;">
                Start Date :
            </div>
            <div class="editor-field">
                <cc1:XTextBox ID="XStartDate" runat="server" TabIndex="-1" Width="149px"></cc1:XTextBox>
            </div>
            <br />
            <div class="editor-label" style="font-weight: bold;">
                End Date :
            </div>
            <div class="editor-field">
                <cc1:XTextBox ID="XEndDate" runat="server" TabIndex="-1" Width="149px"></cc1:XTextBox>
            </div>
            <br />
        </div>
        <div style="width: 50%; float: left; padding-left: 10px;">
            <div class="editor-label" style="font-weight: bold;">
                Curriculum :
            </div>
            <div class="editor-field">
                <asp:TextBox ID="txtCurriculum" runat="server" CssClass="txt-drop-down" TabIndex="44"
                    ReadOnly="true" Width="16px"></asp:TextBox><cc1:XCurriculum ID="XCurriculum" runat="server"
                        TabIndex="-1"></cc1:XCurriculum>
                <ajax:PopupControlExtender ID="popExCurriculum" runat="server" TargetControlID="txtCurriculum"
                    BehaviorID="exCurriculumClose" PopupControlID="pnlListCurriculum" CommitProperty="value"
                    Position="Bottom" OffsetY="2" />
                <asp:HiddenField ID="HFCurriculumID" runat="server" Value="0" />
            </div>
            <br />
            <div class="editor-label" style="font-weight: bold;">
                Faculty :
            </div>
            <div class="editor-field">
                <asp:TextBox ID="txtFaculty" runat="server" CssClass="txt-drop-down" TabIndex="44"
                    ReadOnly="true" Width="16px"></asp:TextBox><cc1:XFaculty ID="XFaculty" runat="server"
                        TabIndex="-1"></cc1:XFaculty>
                <ajax:PopupControlExtender ID="PopExFaculty" runat="server" TargetControlID="txtFaculty"
                    BehaviorID="exFacultyClose" PopupControlID="pnlListFaculty" CommitProperty="value"
                    Position="Bottom" OffsetY="2" />
                <asp:HiddenField ID="HFFacultyID" runat="server" Value="0" />
            </div>
            <br />
            <div class="editor-label" style="font-weight: bold;">
                <asp:Button ID="btnGet" runat="server" Text="Get Topics" 
                    onclick="btnGet_Click" />
            </div>
        </div>
    </div>
    <br />
    <br />
    <b>Topics : </b>
    <br />
    <br />
    <div style="width: 100%; float: left; height: 250px; overflow: scroll; border: solid 1px gray;">
        <asp:Repeater ID="rptTopics" runat="server">
            <HeaderTemplate>
                <table class="grid-new" cellpadding="0" cellspacing="0" id="table1">
                    <thead>
                        <th class="myheadth" style="text-align: left; width: 40px;">
                            Srno.
                        </th>
                        <th class="myheadth" style="text-align: left; width: 300px;">
                            Topic
                        </th>
                        <th class="myheadth" style="text-align: left; width: 80px;">
                            Topic Date
                        </th>
                        <th class="myheadth" style="text-align: left; width: 60px;">
                            St. Time
                        </th>
                        <th class="myheadth" style="text-align: left; width: 60px;">
                            En. Time
                        </th>
                        <th class="myheadth" style="text-align: left;">
                            Classroom
                        </th>
                    </thead>
                    <tbody>
            </HeaderTemplate>
            <ItemTemplate>
                <tr>
                    <td style="text-align: left; width: 40px;">
                        <%#Container.ItemIndex+1 %>
                    </td>
                    <td style="text-align: left; width: 300px;">
                        <asp:Label ID="lblID" runat="server" Text='<%#Eval("ID")%>' Visible="false"></asp:Label>
                        <%#Eval("TopicName")%>
                    </td>
                    <td style="text-align: left; width: 80px;">
                        <div id="DatepickerDiv" class="demo">
                            <asp:TextBox ID="txtTopicDate" runat="server" CssClass="DatepickerInput" Font-Names="Verdana"
                                TabIndex="5" Font-Size="11px" Width="70px" Style="border: solid 1px gray;"></asp:TextBox>
                        </div>
                    </td>
                    <td style="text-align: left; width: 60px;">
                        <cc1:XStartTime ID="XStartTime" runat="server" Width="50px"></cc1:XStartTime>
                    </td>
                    <td style="text-align: left; width: 60px;">
                        <cc1:XEndTime ID="XEndTime" runat="server" Width="50px"></cc1:XEndTime>
                    </td>
                    <td style="text-align: left;">
                        <asp:DropDownList ID="ddlListView" runat="server">
                        </asp:DropDownList>
                    </td>
                </tr>
            </ItemTemplate>
            <FooterTemplate>
                </tbody> </table>
            </FooterTemplate>
        </asp:Repeater>
    </div>
    <div style="width:100%; float:left; padding-top:20px;">
        <asp:Button ID="btnSave" runat="server" Text="Save" Width="70px" OnClick="btnSave_Click" />
    </div>
</ContentTemplate>
</asp:UpdatePanel>
<asp:UpdatePanel runat="server" ID="updPanels">
<ContentTemplate>
    <asp:Panel ID="pnlListBranchs" runat="server" BackColor="White" ForeColor="Black"
        Width="300px" Height="250px" ScrollBars="Vertical" BorderStyle="Solid" BorderWidth="1px"
        BorderColor="Gray">
        <PD:PopupSelectAny ID="pdBranchs" runat="server" />
    </asp:Panel>
    <asp:Panel ID="pnlListCourse" runat="server" BackColor="White" ForeColor="Black"
        Width="300px" Height="250px" ScrollBars="Vertical" BorderStyle="Solid" BorderWidth="1px"
        BorderColor="Gray">
        <PD:PopupSelectAny ID="pdCourse" runat="server" />
    </asp:Panel>
    <asp:Panel ID="pnlListBatch" runat="server" BackColor="White" ForeColor="Black" Width="300px"
        Height="250px" ScrollBars="Vertical" BorderStyle="Solid" BorderWidth="1px" BorderColor="Gray">
        <PD:PopupSelectAny ID="pdBatch" runat="server" />
    </asp:Panel>
    <asp:Panel ID="pnlListCurriculum" runat="server" BackColor="White" ForeColor="Black"
        Width="300px" Height="250px" ScrollBars="Vertical" BorderStyle="Solid" BorderWidth="1px"
        BorderColor="Gray">
        <PD:PopupSelectAny ID="pdCurriculum" runat="server" />
    </asp:Panel>
    <asp:Panel ID="pnlListFaculty" runat="server" BackColor="White" ForeColor="Black"
        Width="300px" Height="250px" ScrollBars="Vertical" BorderStyle="Solid" BorderWidth="1px"
        BorderColor="Gray">
        <PD:PopupSelectAny ID="pdFaculty" runat="server" />
    </asp:Panel>
</ContentTemplate>
</asp:UpdatePanel> 
```

代码背后：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Data;

public partial class Scheduling_UC_TopicSchedulingNew : System.Web.UI.UserControl
{
delegate void dlgTsBranchs();
delegate void dlgTsClassrooms();
delegate void dlgTsCourses();
delegate void dlgTsBatches();
delegate void dlgTsCurriculums();
delegate void dlgTsFaculties();

protected void Page_Load(object sender, EventArgs e)
{
    this.pdBranchs.dlgSelectRecords += new dlgSelectRecords(pdBranchs_dlgSelectRecords);
    dlgTsBranchs dlgTsBranchs = new dlgTsBranchs(getBranchs);
    this.pdBranchs.PageMethodWithListRecords = dlgTsBranchs;

    this.pdCourse.dlgSelectRecords += new dlgSelectRecords(pdCourse_dlgSelectRecords);
    dlgTsCourses dlgTsCourses = new dlgTsCourses(getCourses);
    this.pdCourse.PageMethodWithListRecords = dlgTsCourses;

    this.pdFaculty.dlgSelectRecords += new dlgSelectRecords(pdFaculty_dlgSelectRecords);
    dlgTsFaculties dlgTsFaculties = new dlgTsFaculties(getFaculties);
    this.pdFaculty.PageMethodWithListRecords = dlgTsFaculties;

    this.pdBatch.dlgSelectRecords += new dlgSelectRecords(pdBatch_dlgSelectRecords);
    dlgTsBatches dlgAdBatches = new dlgTsBatches(getBatches);
    this.pdBatch.PageMethodWithListRecords = dlgAdBatches;

    this.pdCurriculum.dlgSelectRecords += new dlgSelectRecords(pdCurriculum_dlgSelectRecords);
    dlgTsCurriculums dlgTsCurriculums = new dlgTsCurriculums(getCurriculum);
    this.pdCurriculum.PageMethodWithListRecords = dlgTsCurriculums;

    if (!IsPostBack)
    {
        disbleEnterKeyForTextBoxes();
    }
}

public void disbleEnterKeyForTextBoxes()
{
    XTime.Attributes.Add("onkeydown", "return (event.keyCode!=13);");
}

void pdFaculty_dlgSelectRecords(object source, RepeaterCommandEventArgs e, string selval)
{
    String[] Myvals = selval.Split('\t');
    XFaculty.Text = Myvals[0].ToString();
    HFFacultyID.Value = Myvals[1].ToString();
    PopExFaculty.Cancel();
}

void pdCurriculum_dlgSelectRecords(object source, RepeaterCommandEventArgs e, string selval)
{
    String[] Myvals = selval.Split('\t');
    XCurriculum.Text = Myvals[0].ToString();
    HFCurriculumID.Value = Myvals[1].ToString();
    popExCurriculum.Cancel();
    getFaculties();
    XFaculty.Text = "";
    HFFacultyID.Value = "0";
    rptTopics.DataSource = null;
    rptTopics.DataBind();
}

void pdBatch_dlgSelectRecords(object source, RepeaterCommandEventArgs e, string selval)
{
    String[] Myvals = selval.Split('\t');
    XBatch.Text = Myvals[0].ToString();
    HFBatchID.Value = Myvals[1].ToString();
    PopExBatch.Cancel();
    Models.Batch objBatch = new BLL.Batch().OpenByID(HFBatchID.Value);
    XTime.Text = objBatch.Time;
    XStartDate.Text = objBatch.StDate;
    XEndDate.Text = objBatch.EnDate;
    HFBatchClRoom.Value = objBatch.ClassRoomID.ToString();
    getCurriculum();
    XCurriculum.Text = "";
    HFCurriculumID.Value = "0";
    XFaculty.Text = "";
    HFFacultyID.Value = "0";
    rptTopics.DataSource = null;
    rptTopics.DataBind();
}

void pdCourse_dlgSelectRecords(object source, RepeaterCommandEventArgs e, string selval)
{
    String[] Myvals = selval.Split('\t');
    XCourse.Text = Myvals[0].ToString();
    HFCourseID.Value = Myvals[1].ToString();
    PopExCourse.Cancel();
    XBatch.Text = "";
    HFBatchID.Value = "0";
    XTime.Text = "";
    XStartDate.Text = "";
    XEndDate.Text = "";
    getBatches();
    XCurriculum.Text = "";
    HFCurriculumID.Value = "0";
    XFaculty.Text = "";
    HFFacultyID.Value = "0";
    rptTopics.DataSource = null;
    rptTopics.DataBind();
}

void pdBranchs_dlgSelectRecords(object source, RepeaterCommandEventArgs e, string selval)
{
    String[] Myvals = selval.Split('\t');
    XBranch.Text = Myvals[0].ToString();
    HFBranchID.Value = Myvals[1].ToString();
    PopExBranchs.Cancel();
    getCourses();
    XCourse.Text = "";
    HFCourseID.Value = "0";
    XBatch.Text = "";
    HFBatchID.Value = "0";
    XTime.Text = "";
    XStartDate.Text = "";
    XEndDate.Text = "";
    XCurriculum.Text = "";
    HFCurriculumID.Value = "0";
    XFaculty.Text = "";
    HFFacultyID.Value = "0";
    rptTopics.DataSource = null;
    rptTopics.DataBind();
}

public void getBranchs()
{
    try
    {
        Type newClass = typeof(PopupListSelect.Branch);
        Repeater nlpListview = (Repeater)pdBranchs.FindControl("gvpbList");
        object created = Activator.CreateInstance(newClass, Session["User"].ToString(), Session["DesigID"].ToString(), nlpListview);
    }
    catch
    {

    }
}

public void getCourses()
{
    try
    {
        Type newClass = typeof(PopupListSelect.Course);
        Repeater nlpListview = (Repeater)pdCourse.FindControl("gvpbList");
        object created = Activator.CreateInstance(newClass, HFBranchID.Value, nlpListview);
    }
    catch
    {

    }
}

public void getBatches()
{
    try
    {
        if (Session["DesigID"].Equals("6") || Session["DesigID"].Equals("7"))
        {
            Type newClass = typeof(PopupListSelect.Batch);
            Repeater nlpListview = (Repeater)pdBatch.FindControl("gvpbList");
            object created = Activator.CreateInstance(newClass, HFBranchID.Value, HFCourseID.Value, Session["User"].ToString(), nlpListview);
        }
        else
        {
            Type newClass = typeof(PopupListSelect.Batch);
            Repeater nlpListview = (Repeater)pdBatch.FindControl("gvpbList");
            object created = Activator.CreateInstance(newClass, HFBranchID.Value, HFCourseID.Value, nlpListview);
        }
    }
    catch
    {

    }
}

public void getCurriculum()
{
    try
    {
        Type newClass = typeof(PopupListSelect.Curriculum);
        Repeater nlpListview = (Repeater)pdCurriculum.FindControl("gvpbList");
        object created = Activator.CreateInstance(newClass, nlpListview, HFBatchID.Value);
    }
    catch
    {

    }
}

public void getFaculties()
{
    try
    {
        Type newClass = typeof(PopupListSelect.Faculties);
        Repeater nlpListview = (Repeater)pdFaculty.FindControl("gvpbList");
        object created = Activator.CreateInstance(newClass, HFBranchID.Value, HFCurriculumID.Value, HFBatchID.Value, nlpListview);
    }
    catch
    {

    }
}

public void getTopics()
{
    try
    {
        Type newClass = typeof(PopupListSelect.Topics);
        object created = Activator.CreateInstance(newClass, HFCurriculumID.Value, rptTopics);

        String[] TimeVals = XTime.Text.Split('-');
        foreach (RepeaterItem itm in rptTopics.Items)
        {
            TextBox XStartTime = (TextBox)itm.FindControl("XStartTime");
            TextBox XEndTime = (TextBox)itm.FindControl("XEndTime");
            DropDownList ddlListView = (DropDownList)itm.FindControl("ddlListView");

            XStartTime.Text = TimeVals[0].ToString().Trim();
            XEndTime.Text = TimeVals[1].ToString().Trim();

            try
            {
                newClass = typeof(PopupListSelect.Classrooms);
                created = Activator.CreateInstance(newClass, Int32.Parse(HFBranchID.Value), ddlListView);
                ddlListView.SelectedValue = HFBatchClRoom.Value;
            }
            catch
            {
            }
        }

    }
    catch
    {

    }
}

protected void btnSave_Click(object sender, EventArgs e)
{
    DataTable dt = new DataTable();
    DataColumn dc;
    DataRow dr;

    dc = new DataColumn();
    dc.DataType = System.Type.GetType("System.Int32");
    dc.ColumnName = "BranchID";
    dc.Unique = false;
    dt.Columns.Add(dc);

    dc = new DataColumn();
    dc.DataType = System.Type.GetType("System.Int32");
    dc.ColumnName = "CourseID";
    dc.Unique = false;
    dt.Columns.Add(dc);

    dc = new DataColumn();
    dc.DataType = System.Type.GetType("System.Int32");
    dc.ColumnName = "BatchID";
    dc.Unique = false;
    dt.Columns.Add(dc);

    dc = new DataColumn();
    dc.DataType = System.Type.GetType("System.Int32");
    dc.ColumnName = "CurriID";
    dc.Unique = false;
    dt.Columns.Add(dc);

    dc = new DataColumn();
    dc.DataType = System.Type.GetType("System.Int32");
    dc.ColumnName = "TopicID";
    dc.Unique = false;
    dt.Columns.Add(dc);

    dc = new DataColumn();
    dc.DataType = System.Type.GetType("System.String");
    dc.ColumnName = "TopicDate";
    dc.Unique = false;
    dt.Columns.Add(dc);

    dc = new DataColumn();
    dc.DataType = System.Type.GetType("System.String");
    dc.ColumnName = "StartTime";
    dc.Unique = false;
    dt.Columns.Add(dc);

    dc = new DataColumn();
    dc.DataType = System.Type.GetType("System.String");
    dc.ColumnName = "EndTime";
    dc.Unique = false;
    dt.Columns.Add(dc);

    dc = new DataColumn();
    dc.DataType = System.Type.GetType("System.Int32");
    dc.ColumnName = "ClassroomID";
    dc.Unique = false;
    dt.Columns.Add(dc);

    dc = new DataColumn();
    dc.DataType = System.Type.GetType("System.String");
    dc.ColumnName = "FacultyID";
    dc.Unique = false;
    dt.Columns.Add(dc);

    foreach (RepeaterItem itm in rptTopics.Items)
    {
        TextBox XStartTime = (TextBox)itm.FindControl("XStartTime");
        TextBox XEndTime = (TextBox)itm.FindControl("XEndTime");
        DropDownList ddlListView = (DropDownList)itm.FindControl("ddlListView");
        TextBox txtTopicDate = (TextBox)itm.FindControl("txtTopicDate");
        Label lblID = (Label)itm.FindControl("lblID");
        if (!txtTopicDate.Text.Equals(""))
        {
            dr = dt.NewRow();
            dr["BranchID"] = Int32.Parse(HFBranchID.Value);
            dr["CourseID"] = Int32.Parse(HFCourseID.Value);
            dr["BatchID"] = Int32.Parse(HFBatchID.Value);
            dr["CurriID"] = Int32.Parse(HFCurriculumID.Value);
            dr["TopicID"] = Int32.Parse(lblID.Text);
            dr["TopicDate"] = new Common.GeneralFunctions().ConvertDate_MM_DD_YY(txtTopicDate.Text.Trim());
            dr["StartTime"] = XStartTime.Text;
            dr["EndTime"] = XEndTime.Text;
            dr["ClassroomID"] = Int32.Parse(ddlListView.SelectedValue);
            dr["FacultyID"] = HFFacultyID.Value;
            dt.Rows.Add(dr);
        }
    }

    TopicScheduling.ScheduledTopics.XMLSaveTopicsToSchedule(dt);
    Response.Redirect("~/Topic-Scheduling");
}

protected void btnGet_Click(object sender, EventArgs e)
{
    getTopics();
    //new BLL.Sch().Topics(Int32.Parse(HFBranchID.Value), Int32.Parse(HFCourseID.Value), Int32.Parse(HFBatchID.Value), Int32.Parse(HFCurriculumID.Value),HFFacultyID.Value,rptTopics);
    Models.ScheduledTopics obj = new Models.ScheduledTopics();
    obj.BranchID = Int32.Parse(HFBranchID.Value);
    obj.CourseID = Int32.Parse(HFCourseID.Value);
    obj.BatchID = Int32.Parse(HFBatchID.Value);
    obj.CurriID = Int32.Parse(HFCurriculumID.Value);
    List<Models.ScheduledTopics> objCollect = TopicScheduling.ScheduledTopics.ScheduledTopicsList(obj);

    foreach (RepeaterItem itm in rptTopics.Items)
    {
        TextBox XStartTime = (TextBox)itm.FindControl("XStartTime");
        TextBox XEndTime = (TextBox)itm.FindControl("XEndTime");
        DropDownList ddlListView = (DropDownList)itm.FindControl("ddlListView");
        TextBox txtTopicDate = (TextBox)itm.FindControl("txtTopicDate");
        Label lblID = (Label)itm.FindControl("lblID");
        for (int i = 0; i <= objCollect.Count - 1; i++)
        {
            if (objCollect[i].TopicID.ToString().Equals(lblID.Text))
            {
                XStartTime.Text = objCollect[i].StartTime;
                XEndTime.Text = objCollect[i].EndTime;
                txtTopicDate.Text = objCollect[i].TopicDate;
                ddlListView.SelectedValue = objCollect[i].ClassroomID.ToString();
                if (!HFFacultyID.Value.Equals(objCollect[i].FacultyID))
                {
                    txtTopicDate.Enabled = false;
                    XStartTime.Enabled = false;
                    XEndTime.Enabled = false;
                    ddlListView.Enabled = false;
                    txtTopicDate.ForeColor = System.Drawing.Color.Red;
                }
                else
                {
                    txtTopicDate.Enabled = true;
                    XStartTime.Enabled = true;
                    XEndTime.Enabled = true;
                    ddlListView.Enabled = true;
                    txtTopicDate.ForeColor = System.Drawing.Color.Green;
                }
            }

        }
    }
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T10:08:30.197

Yo mut 确保您有来自您的 Web 服务器和数据库服务器的信任连接。我建议您从您的 Web 服务器 ping 数据库服务器，

对于诊断，我建议您也从您的网络服务器读取事件日志

# memory - Tomcat6不断崩溃

> ID：15629854
> 
> 赞同：1
> 
> 时间：2013-03-26T05:15:38.253
> 
> 标签：memory, ubuntu, memory-management, nginx, tomcat6

我们在 1G RAM 的 linode（Ubuntu 10.04 32 位）上有 5 个应用程序。最近，我们将其中一个应用程序从该 linode 移至另一个 512M。该应用程序基于 Java EE 构建，并且在旧服务器上运行相当稳定。然而，在新服务器上，tomcat（两台服务器上的版本 6）时不时地崩溃，没有任何日志。新服务器上的唯一区别是我们在旧服务器上使用 nginx 作为针对 apache2 的 Web 服务器，而新服务器使用 Ubuntu 12、64 位。没有理由怀疑内存泄漏，因为应用程序在旧服务器上表现良好。是否有任何 tomcat 优化可以防止此类崩溃。我怀疑原因是否也是由于流量引起的负载（因为新服务器的 RAM 较低），因为即使在只有大约 10 个并发用户的半夜，Tomcat仍然崩溃。对这个问题的任何见解将不胜感激。

我检查了 RAM 使用情况，并且 tomcat 不断占用大约 60% 的内存，突然崩溃并变为 0。我使用了一个 bash 脚本，并在新服务器上每 5 分钟将其作为 cron 作业运行一次，以检查是否 tomcat已关闭并自动重新启动。这会导致问题吗？脚本在下面提到

```
if [ "$(/etc/init.d/tomcat6 status)" == " * Tomcat servlet engine is not running." ]; then /etc/init.d/tomcat6 start; fi 
```

请注意，我不是服务器配置方面的专家。我可以配置一个服务器来安装和运行所需的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T18:46:08.423

我将 RAM 升级到 1GB，降级到 Ubuntu 12、32 位，重新安装 JVM 32 位，现在服务器运行起来就像一个魅力。我无法将根本原因归零，但最可能的原因应该是 64 位操作系统或 64 位 JVM 占用了太多内存。谢谢你的帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T12:17:53.273

您将应用程序从 32 位 Hotspot JVM 移至 64 位 Openjdk JVM。在新服务器上，您的 RAM 更少。

首先我会尝试在新服务器上安装相同的 32 位 Hotspot JVM，看看是否仍然发生崩溃。如果他们这样做，我会开始添加更多内存，并相应地调整 xml 等。

# javascript - 这两个变量如何使用一行进行交换？

> ID：15629855
> 
> 赞同：4
> 
> 时间：2013-03-26T05:15:41.417
> 
> 标签：javascript, arrays

我不知道如何学习演示 2，因为它对我来说很难。

```
//demo1.js
var a = 1;
var b = 2;
var c;

c = b;
b = a;
a = c;

log(a);   // a = 2
log(b);   // b = 1   I can read this one.

//demo 2.js

var a = 1, b = 2;
a = [b][b = a, 0];   // why? '0' is a varible?
console.log(a,b) //output a = 2, b =1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T05:20:11.790

```
//   v---- 1\.  v---- 3.
a = [b][b = a, 0];
//      ^---^-- 2. 
```

1.  将`b`变量的值放入一个新的数组中。

2.  下一组方括号是用于获取索引的*成员运算符。*在这种情况下，该空间用于将变量的值重新分配`a`给`b`变量。可以这样做，因为`b`Array 的原始值是安全的*（从步骤 1 开始）*。

3.  用逗号分隔，`0`然后将索引用作要检索的 Array 的实际值，如果您回想一下，它就是原始`b`值。然后`a`通过线路上的第一个`=`分配分配给它。

总而言之，`b`放在数组中，并通过`0`索引检索并分配给`a`左侧，而不是之前`a`分配给`b` *（借用`[]`成员运算符的空间）*。

* * *

这也可以这样写：

```
a = [b, b = a][0]; 
```

现在唯一的区别是 Array 的第二个索引用于执行分配。大概像这样清晰一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T05:18:48.397

Javascript 中的逗号运算符计算其左操作数，将其丢弃并在计算后返回其右操作数。它的唯一用途是当左操作数有副作用（如修改变量的值）但您不想要它的结果时。

[b] 定义了一个包含 b 的数组。

[b = a, 0] 计算 b = a - 所以 b 现在包含 a 的值。然后它把它扔掉。然后它获取 [b] 的索引 0 处的元素 - 返回 b。a 现在包含存储在那里的 b 的值，而不是 b 的最新值，所以我们的交换是成功的（尽管被混淆了）。

# hadoop - Ganglia dfs.namenode.fileinfoops 中的 Hadoop 指标。这意味着什么？

> ID：15629857
> 
> 赞同：0
> 
> 时间：2013-03-26T05:15:52.840
> 
> 标签：hadoop, ganglia

我正在运行一个 3 节点 Hadoop 集群并使用 Ganglia 对其进行监控，我能够在 Ganglia 门户网站中查看所有 hadoop 指标。

我不明白`dfs.namenode.fileinfoops`度量是什么意思？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T05:55:09.197

为了使其更具可读性，指标名称为：

`dfs.namenode.FileInfoOps`

也许它是跟踪与获取/读取文件信息相关的操作的指标。FileInfoOps 是 NameNode 活动之一，您可以在此[puppet-jmxtrans](https://github.com/wikimedia/puppet-jmxtrans)自述文件中看到：

```
{
    "obj"    => "Hadoop:service=NameNode,name=NameNodeActivity",
    "attr"   => ["FileInfoOps", "FilesCreated", "FilesDeleted"],
} 
```

# objective-c - NSMutableDictionary 与 NSTimers

> ID：15629861
> 
> 赞同：0
> 
> 时间：2013-03-26T05:16:15.710
> 
> 标签：objective-c, nstimer, nsmutabledictionary

我的食谱里有好几个`CoreData`。每个配方都有属性**prepHour**和**prepMin**。我想通过点击按钮**Start Timer**开始倒计时。但是可以有几个必须同时工作的计时器（例如每个配方）

我选择了这种方式（可能是错误的）：

1.  对于计时器，我使用了单例**Timers**。
2.  通过点击我的**开始计时器**，我调用带有参数的方法（名称、prepHour、prepMin）
3.  我的**startTimer**方法创建计时器并将其放入`NSMutableDictionary`

* * *

调用方法：

```
[[Timers sharedTimers] startTimer:self.recipe.name startTimer:self.recipe.prepHour startTimer:self.recipe.prepMin]; 
```

在定时器单例中：

```
- (void)startTimer:(NSString *)timerName  startTimer:(NSNumber *)hVal startTimer:(NSNumber *)mVal
{
    NSTimer *timer = [NSTimer scheduledTimerWithTimeInterval:60.0f target:self selector:@selector(tick:) userInfo:nil repeats:YES];
    if ([timer isValid]) {
        NSArray *array = [NSArray arrayWithObjects: timer, hVal, mVal, nil];
        if (_timerDict == NULL) {
            _timerDict = [[NSMutableDictionary alloc] init];
        }
        [_timerDict setObject:array forKey:timerName];
        NSLog(@"%@", _timerDict);
    }
}

- (void)stopTimer:(NSString *)timerName
{
    NSArray *array = [_timerDict objectForKey:timerName];
    NSTimer *timer = [array objectAtIndex:0];
    if ([timer isValid]) {
        [timer invalidate];
        [_timerDict removeObjectForKey:timerName];
    }
}

- (void)tick:(NSString *)timerName
{
    NSArray *array = [_timerDict objectForKey:timerName];
    //NSTimer *timer = [array objectAtIndex:0];
    NSInteger hVal = [[array objectAtIndex:1] integerValue];
    NSInteger mVal = [[array objectAtIndex:2] integerValue];
    NSInteger sVal = 0; 
```

我应该如何为每个计时器使用**刻度**方法？我希望每个计时器都使用自己的参数（计时器、prepHour、prepMin）调用此方法

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T05:53:57.647

这可能是一个口味问题，但我不使用计时器来记住到期时间，我使用它们以一定频率脉动。对于您的应用程序，我会以最低公分母频率使用一个计时器，例如一秒。我有一个计时器，而不是单例，应用程序委托可以使应用程序无效并重新启动。

```
NSTimer *timer = [NSTimer scheduledTimerWithTimeInterval:1.0f target:self selector:@selector(tick:) userInfo:nil repeats:YES]; 
```

然后将每个到期时间保留为每个配方的一个属性。例如：

```
- (IBAction)pressedStartButtonForRecipeA:(id)sender {

    // this is a NSDate * property
    self.recipeADone = [NSDate dateWithTimeIntervalSinceNow:90*60];  // ninety minutes
}

- (void)tick:(NSTimer *)timer {

    NSDate *now = [NSDate date];
    NSTimeInterval secondsUntilAIsDone = [self.recipeADone timeIntervalSinceDate:now];

    if (secondsUntilAIsDone <= 0.0) {
        // update UI to say that A is done
    } else {
        // update UI to reduce countdown
    }

    // and so on for all recipes
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T05:39:08.517

这听起来像是对单例的不良使用。如果你想采用这种设计，我会……嗯，每个定时器一个定时器。或者，您可以有一个计时器，并且只计算每个计时器开始时的偏移量。（哪种方法有意义取决于您的特定应用程序。我通常会选择第二种，但 YMMV。）

此外，计时器不会将 NSString 传递给它们的回调；他们通过自己。要允许回调从计时器获取一些信息，您可以将信息设置为计时器的`userInfo`字典。

# excel - 创建excel宏来实时记录单元格内容的变化

> ID：15629862
> 
> 赞同：0
> 
> 时间：2013-03-26T05:16:33.443
> 
> 标签：excel, vba

我有一个单元格，它汇总通过 RSS 提要导入的数据，我想（最终）创建一个宏来绘制该单元格随时间的变化。不过，首先，我想创建一个（大概）简单的宏来记录每小时单元格中的值，例如，以列表格式记录到一个新工作表中。我似乎在互联网的任何角落都找不到这种性质的东西。也许我在寻找错误的地方。我对此很陌生。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T09:49:17.477

在 Excel 中，右键单击工作表选项卡，然后单击“**查看代码**”

并粘贴以下代码：

```
'
public rngToTest as range

Private Sub Worksheet_Change(ByVal Target As Range)
        Set rngToTest = Range("M24:P35")

        If Not Application.Intersect(rngToTest, Target) Is Nothing And Minute(Now) = 0 Then
            MsgBox "CHANGE EVENT:" & vbCrLf & Target.Address & vbCrLf & Target.Text
            call checkHourly
        End If
End Sub  

'
sub checkHourly
    ' here you store the data...
end sub 
```

此事件将在单元格被修改时触发，如果单元格地址在您的`rngToTest`变量中，则它会检查分钟以仅在小时执行，然后调用代码以保存值。

# javascript - 用于反转用户触发的 JavaScript 事件的 JavaScript 媒体查询

> ID：15629865
> 
> 赞同：0
> 
> 时间：2013-03-26T05:16:57.783
> 
> 标签：javascript, mobile, responsive-design

我是个出色的业余爱好者，我决定让网站响应。我的网站有一个侧边栏，我想我会使用媒体查询来隐藏该侧边栏并显示一个按钮以使侧边栏可以切换。我使用 jpanelmenu [http://jpanelmenu.com/](http://jpanelmenu.com/)来做到这一点。

问题是，如果您执行以下操作，一切都会崩溃

1.  将浏览器宽度缩小到手机大小
2.  侧边栏消失
3.  出现切换侧边栏的按钮
4.  按下按钮，侧边栏出现
5.  将浏览器窗口展开到正常侧
6.  现在我有两个 fricken 侧边栏（来自 jpanel 菜单的一个）和现在重新出现的原始侧边栏，因为浏览器窗口已经变大并且我的媒体查询取消隐藏它
7.  最重要的是，移动侧边栏切换按钮消失了，因为我们回到了正常宽度

显然这行不通，所以我应该使用modernizer和javascript媒体查询ala [Triggering jquery with css media queries](https://stackoverflow.com/questions/6461300/triggering-jquery-with-css-media-queries) 来修复它还是我的业余头脑没有看到更优雅的解决方案？

# iphone - 没有提供兼容 iOS 版本的预置 iOS 设备 - 提供的答案都没有帮助

> ID：15629867
> 
> 赞同：0
> 
> 时间：2013-03-26T05:17:01.883
> 
> 标签：iphone, ios, xcode, provisioning, ios-provisioning

我更新了我的开发人员许可证并发现我的私钥在我在印度的另一台笔记本电脑上，所以我创建了新证书并不小心将我的 iOS 更新到了最新版本，并且在管理器窗口中 iPhone 设备旁边没有绿灯，我得到了这个错误，我在 XCode 4.2 上 - “没有提供兼容 iOS 版本的预置 iOS 设备。将 iOS 设备与最新版本的 iOS 连接以运行您的应用程序或选择 iOS 模拟器作为目标”也没有单击设备时选择“用于开发”。

1.  我已经吊销了我的证书并制作了新证书

2.  清除证书历史记录。

3.  重新启动 XCode 和我的 iPhone。

4.  也在我的库中安装了证书

以上都没有帮助！任何线索/帮助将不胜感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T05:27:44.330

你需要更新你的 xcode 之后它才能工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T07:21:34.370

您必须将您的 Xcode 更新到 4.5（新）版本。之后要运行以前的 iOS，您必须从`Xcode > Preference > Download > Component`那里添加以前版本的 SDK，您可以看到 iOS 4.3、iOS 5.0、ios 5.1 和 iOS 6.0 的各种模拟器。下载这个模拟器，你很高兴。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-09-13T09:11:00.290

您好，解决方案很简单...您需要添加设备单击 SHIFT + CMD + 2 并添加设备

在 IOS6 中，您需要单击菜单 -> 窗口 -> 设备并添加它

. - 单击项目的左上角 - 单击信息 - 在 Deployement 目标中 - 在 IOS 开发目标中单击适用于您系统的版本

# android - 在android中列出多个单选按钮

> ID：15629868
> 
> 赞同：1
> 
> 时间：2013-03-26T05:17:10.847
> 
> 标签：android, listview, gridview, radio-button, radiobuttonlist

我正在开发一个应用程序，其中包含参与不同活动的成员列表。

一群人参加一组游戏。但是一个人只能参加一场比赛。所以我选择了`RadioButton`. 四个游戏，即 A、B、C 和 D。人物列表中列出了四个`RadioButton`，我们需要为每个人从中选择一个。

![在此处输入图像描述](../Images/7585c40044751ca75c52080db27e3811.png)

我已尝试`GridView`使用自定义行数据如下...

```
<GridView
        android:id="@+id/gridViewMarkList"
        android:layout_width="match_parent"
        android:layout_height="326dp"
        android:numColumns="1" >
</GridView> 
```

我的网格列表是一个单列，row.xml 中有以下数据

```
<?xml version="1.0" encoding="utf-8"?>
<TableLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="500dp"
android:layout_height="fill_parent"
android:padding="10dp" >

<TableRow>

    <TextView
        android:id="@+id/SNo"
        style="@style/text"
        android:layout_width="100dp"
        android:layout_height="wrap_content" />

    <TextView
        android:id="@+id/Name"
        style="@style/text"
        android:layout_width="180dp"
        android:layout_height="wrap_content" />

    <RadioGroup
        android:id="@+id/radioGroup1"
        android:layout_width="160dp"
        android:layout_height="wrap_content"
        android:orientation="horizontal" >

        <RadioButton
            android:id="@+id/A"
            android:layout_width="40dp"
            android:layout_height="wrap_content"
            android:checked="true" />

        <RadioButton
            android:id="@+id/B"
            android:layout_width="40dp"
            android:layout_height="wrap_content" />

        <RadioButton
            android:id="@+id/C"
            android:layout_width="40dp"
            android:layout_height="wrap_content" />

        <RadioButton
            android:id="@+id/D"
            android:layout_width="40dp"
            android:layout_height="wrap_content" />
    </RadioGroup>
</TableRow> 
```

现在我无法检索活动中的数据..

给我做这个过程的任何建议..！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T06:32:00.583

对于这种情况，您将需要一个自定义 ListView。使您的代码如下所示以实现它..

**行.xml**

```
<?xml version="1.0" encoding="utf-8"?>    
<RelativeLayout>

<TextView
    android:id="@+id/SNo"
    style="@style/text"
    android:layout_width="100dp"
    android:layout_height="wrap_content" />

<TextView
    android:id="@+id/Name"
    style="@style/text"
    android:layout_width="180dp"
    android:layout_height="wrap_content" />

<RadioGroup
    android:id="@+id/radioGroup1"
    android:layout_width="160dp"
    android:layout_height="wrap_content"
    android:orientation="horizontal" >

    <RadioButton
        android:id="@+id/A"
        android:layout_width="40dp"
        android:layout_height="wrap_content"
        android:checked="true" />

    <RadioButton
        android:id="@+id/B"
        android:layout_width="40dp"
        android:layout_height="wrap_content" />

    <RadioButton
        android:id="@+id/C"
        android:layout_width="40dp"
        android:layout_height="wrap_content" />

    <RadioButton
        android:id="@+id/D"
        android:layout_width="40dp"
        android:layout_height="wrap_content" />
</RadioGroup> 
```

**CustomListAdapter.java**

```
public class CustomListAdapter extends ArrayAdapter<String> {

private Context mContext = null;
private int id;
private List<String> list = null;

public CustomListAdapter(Context context, int textViewResourceId, List<String> list) {

    super(context, textViewResourceId, patientNameList);
    mContext = context;
    id = textViewResourceId;
    this.list = list;
}

@Override
public View getView(int position, View v, ViewGroup parent) {
    View mView = v;
    if (mView == null) {
        LayoutInflater inflater = (LayoutInflater) mContext
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        mView = inflater.inflate(id, null);
    }

    /* 
        here you go with your views which you gonna display
        ex. : RadioButton gameOption = (RadioButton) mView.findViewById(R.id.gameOptionRadioBtn);
     */

    return mView;
}

} 
```

**InYourActivityClass**

```
ArrayAdapter<String> adapter = new CustomListAdapter(this, R.layout.row, list);
listView.setAdapter(adapter); 
```

希望这会有所帮助:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T05:23:20.083

在您的 RadioGroup 中使用它以使可点击

> 安卓：可聚焦=“假”
> 
> 安卓：focusableInTouchMode="假"

# c# - 后面的 C# 代码中的 Javascript 确认框

> ID：15629869
> 
> 赞同：3
> 
> 时间：2013-03-26T05:17:16.643
> 
> 标签：c#, javascript

我试图在一些服务器端代码中间显示一个 javascript 确认框，并在获得用户确认后继续处理，但确认框不显示。我什至写了一些示例代码但没有成功。

经过一些服务器处理后，我需要询问用户一个问题，并在用户确认后继续一些其他服务器代码。这似乎很简单。甚至警报框工作。我该如何解决？

请注意，我不能直接从 buttonclick 调用 javascript 确认框，我需要做一些服务器端代码，如果没问题，那么我想显示一个确认框以继续。

这是代码

```
<asp:Button ID="btn_deletefromDB" runat="server" OnClick="btn_deletefromDB_Click"  Text="Delete from Datatbase);" />

protected void btn_deletefromDB_Click(object sender, EventArgs e)
{

         //Delete service from Database 
        // some server side processing code
        ScriptManager.RegisterStartupScript(Page, Page.GetType(), "confirm", "return confirm('Do you want to delete it from runtime too? Click OK to proceed.');", true);
        Label1.Text = "delete from runtime confirmed";
        // continue and delete from runtime
        //bla bla bla

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T05:31:11.510

而不是在代码隐藏中触发它，您应该将其添加到`Button1 OnClientClick`事件中，如下所示：

```
<asp:Button ID="Button1" runat="server" OnClientClick="return confirm('Do you want to delete it? Click OK to proceed.');" OnClick="Button1_Click" /> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T05:27:51.593

Web 应用程序不是这样工作的。您不能在页面的服务器端生命周期中间要求用户输入。这个问题必须在客户端询问，并且用户的响应必须作为页面提交数据的一部分到达服务器。

所做的只是对页面完成请求处理时将发送给客户端`ScriptManager.RegisterStartupScript`的最终内容做出贡献。`html`请记住，当此`html`内容到达客户端计算机时，用户可能已经关闭浏览器并回家了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-26T09:55:25.370

使用 AJAX 向服务器提交查询并制作服务器代码，以便它分两部分处理。我没有任何可行的例子，但这就是它的一般工作方式。要将数据发布到服务器，您可以使用 JS 中的本机 AJAX 对象或其他人建议的任何其他库，并且要在服务器端处理数据，您可以使用通用处理程序（ashx）而不是标准网页。

1.  向服务器发送请求。
2.  在客户端页面通过 JS 捕捉第一部分的处理。
3.  显示 JS 窗口
4.  将另一部分提交到服务器

您必须将第一部分处理的结果发送回客户端，因为默认情况下服务器将无法将第二个请求与第一个请求连接起来。

# php - 试图将表单数据添加到 MYSQL 数据库中

> ID：15629873
> 
> 赞同：1
> 
> 时间：2013-03-26T05:17:37.150
> 
> 标签：php, mysql, sql, database

我目前有一个包含各种字段的 HTML 表单，例如：

```
Please Enter First Name: <input type ="text" name="First_Name" /> <br /> 
```

我正在尝试将此表单中的信息获取到我的数据库中。但它似乎没有向数据库输入任何内容。代码如下。

```
<?php

$dbname='ecig';
$dbhost='localhost';
$dbpass='password';
$dbuser='eciguser';

$dbhandle = mysql_connect($dbhost, $dbuser, $dbpass)
  or die("Unable to connect to MySQL");
echo "Connected to MySQL<br>";

//select a database to work with
$selected = mysql_select_db("ecig",$dbhandle)
  or die("Could not select examples");

$res=mysql_query("INSERT INTO Persons (First_Name, Second_Name) VALUES('$_POST[First_Name]', yes)");
mysql_close();

if (array_key_exists ('check_submit', $_POST )) 

echo "Your Name is : {$_POST['First_Name']}<br />";
echo "Your Second Name is : {$_POST['Second_Name']}<br />";
echo "Your Email Address is : {$_POST['Email_Address']}<br />";
echo "Your Password Is : {$_POST['Password']}<br />";

?> 
```

问题是这对我的数据库没有影响，我是否缺少某些东西并需要添加到我的 SQL 代码中，以便 php 和 SQL 相互交互并输入数据？

还是我从 INSERT INTO 语句中遗漏了什么？

无论如何，我们将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T05:23:06.027

您的查询中有错误，末尾的“是”必须有引号。

尝试首先直接针对 MySQL 运行查询以确定您的语法是否正确，然后只需替换您想要的值。

您的示例应如下所示：

```
$res=mysql_query("INSERT INTO Persons (First_Name, Second_Name) VALUES ('$_POST[First_Name]', 'yes')"); 
```

一点建议，如果您从用户那里接收数据，请清理您的输入，否则您将容易受到 SQL 注入攻击。

并使用 mysqli_ 函数，因为 mysql_ 函数现在已被正式弃用。您可以在几乎任何网站（例如 w3schools.com）中阅读更多相关信息

使用 mysqli_ 插入的完整示例：http: [//www.w3schools.com/php/php_mysql_insert.asp](http://www.w3schools.com/php/php_mysql_insert.asp)

祝你好运

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T05:24:29.023

利用`mysql_real_escape_string()`

```
$res=mysql_query("INSERT INTO Persons (First_Name, Second_Name) VALUES ('".mysql_real_escape_string($_POST['First_Name'])."', '".mysql_real_escape_string($_POST[Second_Name])."')"); 
```

# php - MySql 限制每个分组查询的结果与多个连接

> ID：15629875
> 
> 赞同：0
> 
> 时间：2013-03-26T05:17:50.043
> 
> 标签：php, mysql

我有这个查询

```
select distinct 
    loc.mID, 
    loc.city, 
    loc.state, 
    loc.zip, 
    loc.country, 
    loc.latitude, 
    loc.longitude, 
    baseInfo.firstname, 
    baseInfo.lastname, 
    baseInfo.profileimg, 
    baseInfo.facebookID, 
    (((acos(sin(('37.8068406'*pi()/180)) * sin((`latitude`*pi()/180))+cos(('37.8068406'*pi()/180)) * cos((`latitude`*pi()/180)) * cos((('-121.3062367' - `longitude`)*pi()/180))))*180/pi())*60*1.1515) AS `distance`, teams.teamName, teams.leagueType, teams.teamType, teams.subcat 
FROM memb_geo_locations loc 
left join memb_friends friends on (friends.mID = loc.mID or friends.friendID = loc.mID) and (friends.mID = '100019' or friends.friendID = '100019') 
join memb_baseInfo baseInfo on baseInfo.mID = loc.mID 
join memb_teams teams on teams.mID = loc.mID
where 
    loc.primaryAddress = '1' and ((friends.mID is null or friends.friendID is null) or (friends.isactive = 2)) 
and 
    (teams.teamName like '%Buffalo Bills%' or teams.teamName like '%New England Patriots%' or teams.teamName like '%Dallas Cowboys%')
and 
    loc.mID != 100019 
having 
    `distance` < 50 
order by baseInfo.firstname asc limit 30 
```

这非常适合我的核心需求。但是，我正在尝试弄清楚如何获取查询并对其进行细化，以便

```
(teams.teamName like '%Buffalo Bills%' or teams.teamName like '%New England Patriots%' or teams.teamName like '%Dallas Cowboys%') 
```

每个团队名称将产生一个最大定义数量的结果（每个都可以减少或没有，只需寻求最大每个），同时具有在查询末尾指定的限制的最大输出。无论如何我可以改进这个查询来做我希望的事情吗？有人在最近的另一篇与此类似的帖子中告诉我，我要检查一下，`UNION`但我不确定这将如何应用于此查询？假设这是正确的方向。

# c# - ASF::Client::ClientConnectException：客户端在服务 SegmentRead 版本 1.0 端点上收到错误操作 get_segments

> ID：15629877
> 
> 赞同：0
> 
> 时间：2013-03-26T05:17:57.237
> 
> 标签：c#, asp.net, paypal

我的应用程序正在工作，但意外停止工作。甚至从 git-hub 下载的推荐的 PayPal 演示似乎也不起作用。我没有找到太多关于这个问题的信息，希望这里有人可以伸出援手。

Express Checkout 初始化并将用户转移到 PayPal 登录。登录后，PayPal 会显示以“ASF::Client::ClientConnectException: Client received error with operation get_segments on service SegmentRead version 1.0 endpoint...”开头的错误。并且交易被停止。有人遇到过这种情况么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T10:17:57.097

可能您的主机阻止了对 PayPal 的呼叫......

通常对于共享主机（没有购买/租用专用应用程序池），托管公司会阻止第三方调用，例如您的情况下的 PayPal ......

但在指责托管公司之前，请先尝试以下两件事：

a) 清除您的浏览器缓存。Paypal 开发人员部分一直在更新。您测试 Web 应用程序仍可能使用缓存中的旧 url。

b) 创建新的测试买家/卖家账户并试用。您也可以在新的贝宝开发者版本中导入旧的测试账户。

通过这两个步骤，我确信您将摆脱您所面临的问题。

在执行上述两个步骤后，我遇到了同样的错误，现在它工作正常。

# asp.net - 如何验证列表视图内的文本框，以便它在运行时不允许空值？

> ID：15629881
> 
> 赞同：-1
> 
> 时间：2013-03-26T05:18:05.773
> 
> 标签：asp.net, listview, exception

我有一个列表视图，其中包含**Taxinreal、Taxinpercent、Amount、Netamount、Datetakenplace**文本框。所有这些字段都包含在我的数据库中的**tblexpenses**表中。现在我想要的是在 listview 的插入模式下，我希望**Amount**文本框不为空，即如果用户在运行时没有在**Amount**文本框中提供任何值，那么必须出现一条消息，指出“ **Amount TextBox 不能为空”** . 我怎样才能做到这一点？？？现在，如果我没有在运行时将值放入**Amount**文本框中，则会发生以下错误。**“无法将值 NULL 插入 'Amount' 列，表 'dbbilling.dbo.tblexpenses'；列不允许空值。INSERT 失败。语句已终止。”** . （PS 在数据库中，我已将**Amount**列设置为不允许空值）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T05:36:20.810

如果要按以下方式插入，可以在表中插入空值

```
SqlCommand cmd = new SqlCommand();
cmd.CommandText = @"INSERT INTO tableName (field1, field2, field3) 
  VALUES (@p1, @p2, @p3)";
cmd.Parameters.AddWithValue("@p1", someVar ?? DBNull.Value); 
```

否则您可以在将值插入 if confition 之前进行
检查

```
 if((String.IsNullOrEmpty(txtAmount.text))
 {

 }
 else
 {

 } 
```

# java - 在 Eclipse 中为 postgres db 获取正确的驱动程序时遇到问题

> ID：15629882
> 
> 赞同：0
> 
> 时间：2013-03-26T05:18:10.257
> 
> 标签：java, eclipse, postgresql, jakarta-ee

我是企业 Java 的新手。我正在尝试让 eclipse 连接到 postgres 数据库。我已经下载`postgresql-9.2-1002.jdbc4.jar`并将`postgresql-9.2-1002.jdbc3.jar`它们都放在了eclipse的插件文件夹中。我在 pgAdmin3 (localhost:5432) 中有一个名为 person setup 的数据库。根据这些链接，我的代码似乎正确连接到数据库......

*   [http://jdbc.postgresql.org/documentation/80/connect.html](http://jdbc.postgresql.org/documentation/80/connect.html)
*   [Postgres 连接网址](https://stackoverflow.com/questions/3582552/postgres-connection-url)

我有我认为可以正确连接到数据库的代码。但它会引发如下所示的错误。堆栈跟踪说这是驱动程序问题。

我把驱动程序放在正确的位置了吗？我是否需要配置 postgres 以进行“远程”连接？我是这个环境的新手，所以我不确定下一步应该如何调试。好像我下载了正确的驱动程序并提供了正确的网址。

```
String url = "jdbc:postgresql://localhost:5432/personnel"; 
String user = "root";
String password = "secret";

 public String getDataFromDB(int personID){

       try {
            con = DriverManager.getConnection(url, user, password); //Errors out with Source not found.
                ... 
```

打印堆栈跟踪

```
 java.sql.SQLException: No suitable driver found for jdbc:postgresql://localhost:5432/personnel
at java.sql.DriverManager.getConnection(DriverManager.java:602)
at java.sql.DriverManager.getConnection(DriverManager.java:185)
at myCon.personContactInfo(myCon.java:21)
at myTestConnection.main(myTestConnection.java:7) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T07:01:21.880

我在这里看到两个问题：

*   您需要*JDBC3*或 JDBC4 驱动程序，而不是两者。如果您使用的是 JDK 5 或更早版本，请使用 JDBC3 驱动程序。对于任何更新的东西，请使用 JDBC4 驱动程序。

*   JDBC 驱动程序不是 Eclipse 插件，因此它没有安装到 Eclipse 插件目录中。您需要将其添加到应用程序的构建时和运行时类路径中。

具体如何将 PgJDBC 添加到类路径取决于项目类型。如果您使用的是自由格式的 ant 项目，那么它可能会将 jar 放在项目`lib`目录中。对于 Eclipse 项目，通过 Eclipse 项目属性来完成。对于 m2eclipse/m2e 项目，您可以`pom.xml`像其他任何项目一样添加 PgJDBC 作为 Maven 依赖项。

由于听起来您正在使用基本的 Eclipse 项目，因此您将使用*Project->Properties->Java Build Path->Libraries->Add External Jar*，就像您在上面的评论中所写的那样。

# python - Python - 使用相同长度的现有列表创建新列表？

> ID：15629883
> 
> 赞同：3
> 
> 时间：2013-03-26T05:18:10.600
> 
> 标签：python

“给定列表 list1 和 list2 的长度相同，创建一个新列表，其中包含 list1 的第一个元素，后跟 list2 的第一个元素，后跟 list1 的第二个元素，后跟 list2 的第二个元素，以及依此类推（换句话说，新列表应该由 list1 和 list2 的交替元素组成。例如，如果 list1 包含 [1, 2, 3] 而 list2 包含 [4, 5, 6]，那么新列表应该包含[1, 4, 2, 5, 3, 6]。将新列表与变量 list3 相关联。”

```
 list1 = []
    list2 = []
    list3 = []
    for i in range(len(list3)):
        list3.append(list1)
        list3.append(list2) 
```

我很确定这是完全错误的。我应该改进什么？顺便说一句，我认为这必须包括 len 和 range。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-26T05:28:17.860

```
>>> from itertools import chain
>>> list1 = [1, 2, 3]
>>> list2 = [4, 5, 6]
>>> list(chain.from_iterable(zip(list1, list2)))
[1, 4, 2, 5, 3, 6] 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-26T05:25:39.300

I would do it with a list comprehension, rather than anything with `len` or `range`. e.g.:

```
>>> list1 = [1, 2, 3]
>>> list2 = ['a', 'b', 'c']
>>> zip(list1, list2)
[(1, 'a'), (2, 'b'), (3, 'c')]
>>> [x for pair in zip(list1, list2) for x in pair]
[1, 'a', 2, 'b', 3, 'c'] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-26T06:25:18.677

```
list1 = [1, 2, 3]
list2 = [4, 5, 6]
list3 = []

for x1, x2 in zip(list1, list2):
    list3.extend([x1, x2]) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-26T05:23:34.223

请看下面的片段，也许它会有所帮助

```
>>> list1 = [1,2,3]
>>> list2 = [4,5,6]
>>> list3 = []
>>> for i in range(len(list1)):
...     list3.append(list1[i])
...     list3.append(list2[i])
...
>>> list3
[1, 4, 2, 5, 3, 6] 
```

# r - 将列中的 NA 替换为相邻列中的值

> ID：15629885
> 
> 赞同：28
> 
> 时间：2013-03-26T05:18:27.227
> 
> 标签：r, replace, missing-data, na

这个问题与标题相似的帖子有关（[用相邻值替换 R 向量中的 NA](https://stackoverflow.com/questions/13514266/replace-na-in-an-r-vector-with-adjacent-values)）。我想扫描数据框中的一列并将 NA 替换为相邻单元格中的值。在上述帖子中，解决方案不是用来自相邻向量（例如数据矩阵中的相邻元素）的值替换 NA，而是对固定值进行有条件替换。以下是我的问题的可重现示例：

```
UNIT <- c(NA,NA, 200, 200, 200, 200, 200, 300, 300, 300,300)
STATUS <-c('ACTIVE','INACTIVE','ACTIVE','ACTIVE','INACTIVE','ACTIVE','INACTIVE','ACTIVE','ACTIVE',
                    'ACTIVE','INACTIVE') 
TERMINATED <- c('1999-07-06' , '2008-12-05' , '2000-08-18' , '2000-08-18' ,'2000-08-18' ,'2008-08-18',
                        '2008-08-18','2006-09-19','2006-09-19' ,'2006-09-19' ,'1999-03-15') 
START <- c('2007-04-23','2008-12-06','2004-06-01','2007-02-01','2008-04-19','2010-11-29','2010-12-30',
                   '2007-10-29','2008-02-05','2008-06-30','2009-02-07')
STOP <- c('2008-12-05','4712-12-31','2007-01-31','2008-04-18','2010-11-28','2010-12-29','4712-12-31',
                  '2008-02-04','2008-06-29','2009-02-06','4712-12-31')
#creating dataframe
TEST <- data.frame(UNIT,STATUS,TERMINATED,START,STOP); TEST                   

  UNIT   STATUS TERMINATED      START       STOP
1    NA   ACTIVE 1999-07-06 2007-04-23 2008-12-05
2    NA INACTIVE 2008-12-05 2008-12-06 4712-12-31
3   200   ACTIVE 2000-08-18 2004-06-01 2007-01-31
4   200   ACTIVE 2000-08-18 2007-02-01 2008-04-18
5   200 INACTIVE 2000-08-18 2008-04-19 2010-11-28
6   200   ACTIVE 2008-08-18 2010-11-29 2010-12-29
7   200 INACTIVE 2008-08-18 2010-12-30 4712-12-31
8   300   ACTIVE 2006-09-19 2007-10-29 2008-02-04
9   300   ACTIVE 2006-09-19 2008-02-05 2008-06-29
10  300   ACTIVE 2006-09-19 2008-06-30 2009-02-06
11  300 INACTIVE 1999-03-15 2009-02-07 4712-12-31

#using the syntax for a conditional replace and hoping it works :/          
TEST$UNIT[is.na(TEST$UNIT)] <- TEST$STATUS; TEST 

   UNIT   STATUS TERMINATED      START       STOP
1     1   ACTIVE 1999-07-06 2007-04-23 2008-12-05
2     2 INACTIVE 2008-12-05 2008-12-06 4712-12-31
3   200   ACTIVE 2000-08-18 2004-06-01 2007-01-31
4   200   ACTIVE 2000-08-18 2007-02-01 2008-04-18
5   200 INACTIVE 2000-08-18 2008-04-19 2010-11-28
6   200   ACTIVE 2008-08-18 2010-11-29 2010-12-29
7   200 INACTIVE 2008-08-18 2010-12-30 4712-12-31
8   300   ACTIVE 2006-09-19 2007-10-29 2008-02-04
9   300   ACTIVE 2006-09-19 2008-02-05 2008-06-29
10  300   ACTIVE 2006-09-19 2008-06-30 2009-02-06
11  300 INACTIVE 1999-03-15 2009-02-07 4712-12-31 
```

结果应该是：

```
 UNIT   STATUS TERMINATED      START       STOP
1   ACTIVE   ACTIVE 1999-07-06 2007-04-23 2008-12-05
2 INACTIVE INACTIVE 2008-12-05 2008-12-06 4712-12-31
3      200   ACTIVE 2000-08-18 2004-06-01 2007-01-31
4      200   ACTIVE 2000-08-18 2007-02-01 2008-04-18
5      200 INACTIVE 2000-08-18 2008-04-19 2010-11-28
6      200   ACTIVE 2008-08-18 2010-11-29 2010-12-29
7      200 INACTIVE 2008-08-18 2010-12-30 4712-12-31
8      300   ACTIVE 2006-09-19 2007-10-29 2008-02-04
9      300   ACTIVE 2006-09-19 2008-02-05 2008-06-29
10     300   ACTIVE 2006-09-19 2008-06-30 2009-02-06
11     300 INACTIVE 1999-03-15 2009-02-07 4712-12-31 
```

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-03-26T05:24:03.643

它不起作用，因为地位是一个因素。当您将因子与数字混合时，数字的限制最少。通过强制状态为字符，您可以获得您所追求的结果，并且该列现在是一个字符向量：

```
TEST$UNIT[is.na(TEST$UNIT)] <- as.character(TEST$STATUS[is.na(TEST$UNIT)])

##        UNIT   STATUS TERMINATED      START       STOP
## 1    ACTIVE   ACTIVE 1999-07-06 2007-04-23 2008-12-05
## 2  INACTIVE INACTIVE 2008-12-05 2008-12-06 4712-12-31
## 3       200   ACTIVE 2000-08-18 2004-06-01 2007-01-31
## 4       200   ACTIVE 2000-08-18 2007-02-01 2008-04-18
## 5       200 INACTIVE 2000-08-18 2008-04-19 2010-11-28
## 6       200   ACTIVE 2008-08-18 2010-11-29 2010-12-29
## 7       200 INACTIVE 2008-08-18 2010-12-30 4712-12-31
## 8       300   ACTIVE 2006-09-19 2007-10-29 2008-02-04
## 9       300   ACTIVE 2006-09-19 2008-02-05 2008-06-29
## 10      300   ACTIVE 2006-09-19 2008-06-30 2009-02-06
## 11      300 INACTIVE 1999-03-15 2009-02-07 4712-12-31 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2016-08-31T15:28:31.417

你所要做的

```
TEST$UNIT[is.na(TEST$UNIT)] <- TEST$STATUS[is.na(TEST$UNIT)] 
```

以便该值将替换为相邻的值。否则，要替换的值的数量与替换它们的值之间存在不匹配。这将导致按行顺序替换值。它在这种情况下有效，因为被替换的两个值是前两个值。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-09-13T07:41:20.583

```
TEST$UNIT = ifelse(is.na(TEST$UNIT), paste(TEST$STATUS),paste(TEST$UNIT));TEST
       UNIT   STATUS TERMINATED      START       STOP
1    ACTIVE   ACTIVE 1999-07-06 2007-04-23 2008-12-05
2  INACTIVE INACTIVE 2008-12-05 2008-12-06 4712-12-31
3       200   ACTIVE 2000-08-18 2004-06-01 2007-01-31
4       200   ACTIVE 2000-08-18 2007-02-01 2008-04-18
5       200 INACTIVE 2000-08-18 2008-04-19 2010-11-28
6       200   ACTIVE 2008-08-18 2010-11-29 2010-12-29
7       200 INACTIVE 2008-08-18 2010-12-30 4712-12-31
8       300   ACTIVE 2006-09-19 2007-10-29 2008-02-04
9       300   ACTIVE 2006-09-19 2008-02-05 2008-06-29
10      300   ACTIVE 2006-09-19 2008-06-30 2009-02-06
11      300 INACTIVE 1999-03-15 2009-02-07 4712-12-31 
```

# c++ - 如何将ostringstream直接写入cout

> ID：15629886
> 
> 赞同：18
> 
> 时间：2013-03-26T05:18:34.913
> 
> 标签：c++

如果我有一个`std::ostringstream`名为 的对象`oss`，我知道我可以`std::cout << oss.str()`打印出字符串。但是这样做`oss.str()`会导致返回的字符串被复制。有没有办法直接打印底层`streambuf`？

提前致谢！

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-03-26T05:41:21.117

如果您使用的是[`std::ostringstream`](http://en.cppreference.com/w/cpp/io/basic_ostringstream). 无法从中读取底层缓冲区（因此`o`in `ostringstream`），因此您必须依靠实现来为您执行此操作，通过`str()`.

但是，如果您使用[`std::stringstream`](http://en.cppreference.com/w/cpp/io/basic_stringstream)（注意缺少`o`），则底层缓冲区是可读的，并且`basic_ostream`' 具有从缓冲区读取的特殊重载：

```
#include <iostream>
#include <sstream>

int main()
{
    std::stringstream ss1;
    ss1 << "some " << 111605 << " stuff" << std::flush;

    std::cout << ss1.rdbuf() << std::endl;
    std::cout << ss1.str() << std::endl;
} 
```

输出：

> 一些 111605 的东西
> 一些 111605 的东西

（[示例来自这里](https://stackoverflow.com/a/3442561/87234)。）

这直接从底层缓冲区复制，没有中间副本。

# ruby-on-rails-3 - 台风/法拉第适配器出错

> ID：15629887
> 
> 赞同：0
> 
> 时间：2013-03-26T05:18:35.867
> 
> 标签：ruby-on-rails-3, faraday, typhoeus

我的应用程序使用熊猫进行视频嵌入。我在 config 中创建了 panda.rb 初始化程序和 panda.yml 文件。我能够连接到熊猫（启动 rails 控制台）。当我执行 Panda::Profile.all 时，出现以下错误：

```
 1.8.7-p371 :001 > Panda::Profile.all
   Ethon::Errors::InvalidOption: The option: disable_ssl_peer_verification is invalid.
   Please try ssl_verifypeer instead of disable_ssl_peer_verification.
   from /home/vasu/.rvm/gems/ruby-1.8.7-p371/gems/ethon-0.5.10/lib/ethon/easy.rb:255:in 
   `set_attributes'
   from /home/vasu/.rvm/gems/ruby-1.8.7-p371/gems/ethon-0.5.10/lib/ethon/easy.rb:253:in 
   `each_pair' 
```

[基于https://github.com/typhoeus/typhoeus/issues/226#issuecomment-9919517](https://github.com/typhoeus/typhoeus/issues/226#issuecomment-9919517)上针对此错误消息建议的 typhoeus 更改

我在easy.rb（home/vasu/.rvm/gems/ruby-1.8.7-p371/gems/ethon-0.5.10/easy.rb）中添加了行需要'typhoeus/adapters/faraday'

但是，当我尝试执行 rails c 时，现在出现以下错误：

```
 /home/vasu/.rvm/gems/ruby-1.8.7-p371/gems/typhoeus-
      0.6.2/lib/typhoeus/adapters/faraday.rb:19: undefined method `supports_parallel=' 
      for Faraday::Adapter::Typhoeus:Class (NoMethodError)
      from /home/vasu/.rvm/gems/ruby-1.8.7-p371/gems/ethon-.5.10/lib/ethon/easy.rb:11:in   
      `require'
  from /home/vasu/.rvm/gems/ruby-1.8.7-p371/gems/ethon-0.5.10/lib/ethon/easy.rb:11
  from /home/vasu/.rvm/gems/ruby-1.8.7-p371/gems/ethon-0.5.10/lib/ethon.rb:9:in 
      `require' 
```

查看我的应用程序中的 gems 列表显示它正在使用以下内容：ethon (0.5.10) faraday (0.7.6) typhoeus (0.6.2)

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T11:07:15.120

将熊猫版本更改为“1.6.0”并将 api_port 80 添加到我的 panda.yml 后，我就可以正常工作了

# javascript - 使用 2 个链接为一个 jquery ajax 函数供电

> ID：15629888
> 
> 赞同：0
> 
> 时间：2013-03-26T05:18:37.390
> 
> 标签：javascript, jquery

```
$('#link1').click(function() {
   $.ajax({
    url: 'index.php?do=link1',
    type: 'POST',
    success: function(data) {
      blahblah
    },
  });
}); 
```

我怎样才能使它更普遍？

我希望有多个链接，进入一个 ajax 调用，但是 url 使用调用它的链接的 id 更改......（希望这是有道理的）

IE

```
<a href="#" id="ajax-doit1"> one </a> 
<a href="#" id="ajax-doit2"> two </a> 
```

如果 id 以“ajax-”开头，则调用 ajax，ajax 会根据“ajax-”之后的部分更改 url，因此 ajax-doit1 将具有 index.php?do=doit1 的 url

这可能吗？

抱歉，如果是愚蠢的问题，jquery 的新手。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T05:23:20.920

概括地说，您可以添加一个本身返回函数的函数：

```
function makeEvent(linkName) {
   return function() {
     $.ajax({
       url: 'index.php?do=' + linkName,
       type: 'POST',
       success: function(data) {
         blahblah
       },
     });
   }
}

$('#link1').click(makeEvent('link1'))
$('#link2').click(makeEvent('link2')) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T05:23:25.337

HTML：

```
<a href="#" class="ajax" id="ajax-doit1"> one </a> 
<a href="#" class="ajax" id="ajax-doit2"> two </a> 
```

JS：

```
$('.ajax').click(function() {
   var suffix = $(this).attr('id').substr(5);
   $.ajax({
    url: 'index.php?do='+suffix,
    type: 'POST',
    success: function(data) {
      blahblah
    },
  });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T05:27:33.760

尝试这个

```
 $('a').click(function() {
           var id = $(this).attr('id');
           var link = id.split('-');
           $.ajax({
            url: 'index.php?do='+link[1],
            type: 'POST',
            success: function(data) {
              blahblah
            },
          });
        }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-26T05:25:57.737

You could do this:

html:

```
<a href="index.php?do=link1" id="ajax-doit1"> one </a>
<a href="index.php?do=link2" id="ajax-doit2"> two </a> 
```

Script:

```
$("a[id^='ajax-']").click(function() {
   var link=this.href;
   $.ajax({
      url: link,
      type: 'POST',
      success: function(data) {blahblah},
   });
}); 
```

$("a[id^='ajax-']") selects the links with an id that starts with "ajax-".

[Update] To get the text after "ajax-" change this line:

```
var link='index.php?do='+this.id.replace(/ajax-/,""); 
```

# loops - NASM 矩阵没有给出正确的输出；使用绝望代码时也会出现段错误

> ID：15629889
> 
> 赞同：0
> 
> 时间：2013-03-26T05:18:42.647
> 
> 标签：loops, matrix, segmentation-fault, nasm, output

我有一个问题，用户需要输入他们选择的维度来确定矩阵的大小，一次读取一个数字，然后输出最大的数字。

这是我的原始代码，输入1,2,3,4时输出为12343；它声称最大的数字是最后的“3”。当我使用 4 比 1 时，它正确地给出了 4。我的观察在我看来，它可能只能找到 2 x 2 矩阵上第一行的最大数。

```
segment .bss
  num: resw 1 ;For storing a number, to be read of printed....
  nod: resb 1 ;For storing the number of digits....
  temp: resb 2
  matrix1: resw 200
  m: resw 1
  n: resw 1
  i: resw 1
  j: resw 1
buff resb 4

segment .data
  msg1: db "Enter the number of rows in the matrix : "
  msg_size1: equ $-msg1
  msg2:  db "Enter the elements one by one(row by row) : "
  msg_size2: equ $-msg2
  msg3: db "Enter the number of columns in the matrix : "
  msg_size3: equ $-msg3
  tab: db  9 ;ASCII for vertical tab
  new_line: db 10 ;ASCII for new line

segment .text

global _start

_start:
  mov eax, 4
  mov ebx, 1
  mov ecx, msg1
  mov edx, msg_size1
  int 80h

  mov ecx, 0
  call read_num  
  mov cx, word[num]
  mov word[m], cx

  mov eax, 4
  mov ebx, 1
  mov ecx, msg3
  mov edx, msg_size3
  int 80h

  mov ecx, 0
  call read_num  
  mov cx, word[num]
  mov word[n], cx

  mov eax, 4
  mov ebx, 1
  mov ecx, msg2
  mov edx, msg_size2
  int 80h

  ;Reading each element of the matrix........
  mov eax, 0
  mov ebx, matrix1  

  mov word[i], 0
  mov word[j], 0

  i_loop:
    mov word[j], 0
    j_loop:

 call read_num
mov dx , word[num]
 ;eax will contain the array index and each element is 2 bytes(1 word) long
 mov  word[ebx + 2 * eax], dx
 inc eax    ;Incrementing array index by one....

 inc word[j]
 mov cx, word[j]
 cmp cx, word[n]
 jb j_loop

    inc word[i]
    mov cx, word[i]
    cmp cx, word[m]
    jb i_loop
; read out matrix code 
    xor     esp, [matrix1]         ; esp initialized to first element in array, & is first largest value
    ;xor     edi, edi          ; edi initialized to 0, edi is loop counter

  ;Loop through the matrix, check each number if its larger than the first number in the array. AT the end print said number.

    ;Reading each element of the matrix.(Storing the elements in row major order).......
  mov ebp, 0
  mov edi, matrix1  
  mov esp, 0

  mov word[i], 0
  mov word[j], 0

  i_loop2:
    mov word[j], 0
    j_loop2:

   ;eax will contain the array index and each element is 2 bytes(1 word) long
   mov  dx, word[edi+2*ebp]   ;
   mov word[num] , dx

    mov eax, 4 ;
    mov ebx, 1
    mov ecx, [edi+2*ebp]
    add ecx, 48
    mov [buff], ecx
    mov ecx, buff
    mov edx, 4
       int 80h

 cmp esp, [edi+2*ebp] ;word[ebx + 2 * eax] ; compares current biggest number with current element iterated.
   jge   skip 
   mov esp, [edi+2*ebp] ;word[ebx + 2 * eax] ; stores new biggest number
   mov esi, ebp         ; Stores pointer to the biggest element    

   skip:
inc ebp
 inc word[j]
 mov cx, word[j]
 cmp cx, word[n]
 jb j_loop2

    inc word[i]
    mov cx, word[i]
    cmp cx, word[m]
    jb i_loop2

    ; outut
    mov eax, 4  ; system_write
    mov ebx, 1  ; stdout
    mov ecx, [edi+2*esi]    ; move biggest element to accumulator
    add ecx, 30h            ; convert to ascii representation
    mov [buff], ecx     ; move to memory
    mov ecx, buff       ; put pointer in ecx for printing
    mov edx, 4          ; size, 4 bytes
    int 80h         ; sytem call.

exit:
  mov eax, 1
  mov ebx, 0
  int 80h

;Function to read a number from console and to store that in num 
read_num:

  pusha
  mov word[num], 0

  loop_read:
    mov eax, 3
    mov ebx, 0
    mov ecx, temp
    mov edx, 1
    int 80h

    cmp byte[temp], 10
      je end_read

    mov ax, word[num]
    mov bx, 10
    mul bx
    mov bl, byte[temp]
    sub bl, 30h
    mov bh, 0
    add ax, bx
    mov word[num], ax   

    jmp loop_read 
  end_read:
  popa

ret 
```

最后在绝望的行为中，我尝试了以下方法：

```
 loop_read2:
    mov eax, 3
    mov ebx, 0
    mov ecx, temp
    mov edx, 1
    int 80h

    cmp byte[temp], 10
      je end_read2

    mov ax, word[num]
    mov bx, 10
    mul bx
    mov bl, byte[temp]
    sub bl, 30h
    mov bh, 0
    add ax, bx
    mov word[num], ax

    cmp esp, [num] ;word[ebx + 2 * eax] ; compares current biggest number with current element iterated.
   jge   skip 
   mov esp, [num] ;word[ebx + 2 * eax] ; stores new biggest number
   mov esi, ebp         ; Stores pointer to the biggest element    
   skip:
    ; outut
    mov eax, 4  ; system_write
    mov ebx, 1  ; stdout
    mov ecx, [esp]  ; move biggest element to accumulator
    add ecx, 30h            ; convert to ascii representation
    mov [buff], ecx     ; move to memory
    mov ecx, buff       ; put pointer in ecx for printing
    mov edx, 4          ; size, 4 bytes
    int 80h         ; sytem call.   

    jmp loop_read2 
  end_read2:
  popa

ret 
```

在这里，我试图同时用户输入一个数字，将其与最大的数字进行比较，然后输出该数字以进行调试。但它对我来说是段错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T06:26:05.580

好吧，不知何故我设法解决了这个问题，但我真的有点不知道为什么它会起作用。

我所做的是从我以前保存指向矩阵“索引”的指针的方法切换，我认为这不起作用，因为我认为它假设一个一维数组，而是简单地保存新的最大数进入ESP，然后输出它。它有效吗？我尽我所能用 2x2、3x3 和 5x5 进行了测试（因为 5x5 很乏味）和一些边缘情况，并且似乎有效。：欢呼：

```
segment .bss
  num: resw 1 ;For storing a number, to be read of printed....
  nod: resb 1 ;For storing the number of digits....
  temp: resb 2
  matrix1: resw 200
  m: resw 1
  n: resw 1
  i: resw 1
  j: resw 1
buff resb 4

segment .data
  msg1: db "Enter the number of rows in the matrix : "
  msg_size1: equ $-msg1
  msg2:  db "Enter the elements one by one(row by row) : "
  msg_size2: equ $-msg2
  msg3: db "Enter the number of columns in the matrix : "
  msg_size3: equ $-msg3
 msg4: db "The Largest Number is... : "
  msg_size4: equ $-msg4

  tab: db  9 ;ASCII for vertical tab
  new_line: db 10 ;ASCII for new line

segment .text

global _start

_start:
  mov eax, 4
  mov ebx, 1
  mov ecx, msg1
  mov edx, msg_size1
  int 80h

  mov ecx, 0
  call read_num  
  mov cx, word[num]
  mov word[m], cx

  mov eax, 4
  mov ebx, 1
  mov ecx, msg3
  mov edx, msg_size3
  int 80h

  mov ecx, 0
  call read_num  
  mov cx, word[num]
  mov word[n], cx

  mov eax, 4
  mov ebx, 1
  mov ecx, msg2
  mov edx, msg_size2
  int 80h

  ;Reading each element of the matrix........
  mov eax, 0
  mov ebx, matrix1  

  mov word[i], 0
  mov word[j], 0

  i_loop:
    mov word[j], 0
    j_loop:

 call read_num
mov dx , word[num]
 ;eax will contain the array index and each element is 2 bytes(1 word) long
 mov  word[ebx + 2 * eax], dx

 inc eax    ;Incrementing array index by one....

 inc word[j]
 mov cx, word[j]
 cmp cx, word[n]
 jb j_loop

    inc word[i]
    mov cx, word[i]
    cmp cx, word[m]
    jb i_loop
; read out matrix code 
    xor     esp, [matrix1]         ; esp initialized to first element in array, & is first largest value
    ;xor     edi, edi          ; edi initialized to 0, edi is loop counter

  ;Loop through the matrix, check each number if its larger than the first number in the array. AT the end print said number.

    ;Reading each element of the matrix.(Storing the elements in row major order).......
  mov ebp, 0
  mov edi, matrix1  
  mov esp, 0

  mov word[i], 0
  mov word[j], 0

  i_loop2:
    mov word[j], 0
    j_loop2:

   ;eax will contain the array index and each element is 2 bytes(1 word) long
   mov  dx, word[edi+2*ebp]   ;
   mov word[num] , dx

    cmp esp, [num] ;word[ebx + 2 * eax] ; compares current biggest number with current element iterated.
    jge   skip
    mov esp, [num] ;word[ebx + 2 * eax] ; stores new biggest number
    mov esi, ebp                ; Stores pointer to the biggest element

    skip:
;debug code
    ;mov eax, 4 ;
    ;mov ebx, 1
    ;mov ecx, esp
    ;add ecx, 48
    ;mov [buff], ecx
    ;mov ecx, buff
    ;mov edx, 4
    ;int 80h
   ;mov esp, [num] 

inc ebp
 inc word[j]
 mov cx, word[j]
 cmp cx, word[n]
 jb j_loop2

    inc word[i]
    mov cx, word[i]
    cmp cx, word[m]
    jb i_loop2

    ;outut
  mov eax, 4
  mov ebx, 1
  mov ecx, msg4
  mov edx, msg_size4
  int 80h
mov ecx, 0

    mov eax, 4  ; system_write
    mov ebx, 1  ; stdout
    mov ecx, esp    ; move biggest element to accumulator
    add ecx, 48         ; convert to ascii representation
    mov [buff], ecx     ; move to memory
    mov ecx, buff
    mov edx, 4          ; size, 4 bytes
    int 80h

exit:
  mov eax, 1
  mov ebx, 0
  int 80h

;Function to read a number from console and to store that in num 
read_num:

  pusha
  mov word[num], 0

  loop_read:
    mov eax, 3
    mov ebx, 0
    mov ecx, temp
    mov edx, 1
    int 80h

    cmp byte[temp], 10
      je end_read

    mov ax, word[num]
    mov bx, 10
    mul bx
    mov bl, byte[temp]
    sub bl, 30h
    mov bh, 0
    add ax, bx
    mov word[num], ax   

    jmp loop_read 
  end_read:
  popa

ret 
```

# php - PHP Simple HTML Dom Parser find() 在遍历空元素时崩溃

> ID：15629891
> 
> 赞同：2
> 
> 时间：2013-03-26T05:18:48.913
> 
> 标签：php, null, find, screen-scraping, simple-html-dom

我正在尝试链接[Simple HTML DOM Parser](http://simplehtmldom.sourceforge.net/) find() 以遍历 HTML，但是当其中一个孩子不存在时它似乎崩溃了。例如：

```
$obj = $page->find('#headings', 0)->find('h4', 0)->nodes[0]; 
```

如果 find('#headings', 0) 或 find('h4', 0) 返回 null（即，如果元素不在 HTML 中），将导致 PHP 死亡（），但如果所有元素都存在，则会成功.

有没有办法让上面的链简单地返回 null 而不是使 PHP 崩溃？我考虑过修改 simplehtmldom 但不确定如何修改。find() 函数如下所示：

```
// find dom node by css selector
// Paperg - allow us to specify that we want case insensitive testing of the value of the selector.
function find($selector, $idx=null, $lowercase=false)
{
    return $this->root->find($selector, $idx, $lowercase);
} 
```

**编辑：（解决方案）**

按照 user1508519 的建议，我创建了一个替代的 nfind() 函数。使用这种方法，如果一个空属性（与方法相反——find() 方法在链接时返回一个空节点）在链的下游被引用，PHP 仍然会标记一个通知，但不会像使用 find( ）。

```
// modified version of simple_html_dom->find() that will return an empty node instead of null when chained if an element is not found. simple_html_dom_node->nfind() must also be created for this to work.
function nfind($selector, $idx=null, $lowercase=false)
{
                $this->root->nfind($selector, $idx, $lowercase);
} 
```

执行查找操作的实际代码可以在 simple_html_dom_node->find() 中找到，并且应该将以下函数放在 simple_html_dom_node 中以使整个包正常工作（仅修改最后一行 - 出于某种原因包装了原始 find() 函数它并检查 is_null 似乎仍然会使 PHP 崩溃

```
//modifed version of simple_html_dom_node->find()
function nfind($selector, $idx=null, $lowercase=false)
{
    $selectors = $this->parse_selector($selector);
    if (($count=count($selectors))===0) return array();
    $found_keys = array();

    // find each selector
    for ($c=0; $c<$count; ++$c)
    {
        // The change on the below line was documented on the sourceforge code tracker id 2788009
        // used to be: if (($levle=count($selectors[0]))===0) return array();
        if (($levle=count($selectors[$c]))===0) return array();
        if (!isset($this->_[HDOM_INFO_BEGIN])) return array();

        $head = array($this->_[HDOM_INFO_BEGIN]=>1);

        // handle descendant selectors, no recursive!
        for ($l=0; $l<$levle; ++$l)
        {
            $ret = array();
            foreach ($head as $k=>$v)
            {
                $n = ($k===-1) ? $this->dom->root : $this->dom->nodes[$k];
                //PaperG - Pass this optional parameter on to the seek function.
                $n->seek($selectors[$c][$l], $ret, $lowercase);
            }
            $head = $ret;
        }

        foreach ($head as $k=>$v)
        {
            if (!isset($found_keys[$k]))
                $found_keys[$k] = 1;
        }
    }

    // sort keys
    ksort($found_keys);

    $found = array();
    foreach ($found_keys as $k=>$v)
        $found[] = $this->dom->nodes[$k];

    // return nth-element or array
    if (is_null($idx)) return $found;
    else if ($idx<0) $idx = count($found) + $idx;
    return (isset($found[$idx])) ? $found[$idx] : new simple_html_dom_node('');
} 
```

再次感谢 user1508519 帮助我找到所需的解决方案，同时提供一系列同样有效的替代方案！欢迎就解决方案/潜在副作用的有效性发表评论，或者如果有人有进一步的意见，是否有更优雅的方式来实现这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T05:26:40.433

Why would you do it in a chain? Why not check in subsequent checks if each call is null? Like the comment said, you cannot operate on a null object. If you were doing a foreach loop, it would remove the need for a null check.

```
$obj = $page->find('#headings', 0);
if (!is_null($obj)) {
   $obj = $page->find('h4', 0);
   if (!is_null($obj))
       // ...continue...
} 
```

**EDIT:**

```
function find($selector, $idx=null, $lowercase=false)
{
    if (is_null($this->root->find($selector, $idx, $lowercase)))
    {
         die("error");
         // throw exception?
    } else // whatever

} 
```

OR

Write a wrapper function of your own that internally calls simple's find.

Like

```
function wrapper($selector, $idx=null, $lowercase=false) {
    // yep 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T06:47:37.643

您可以执行以下操作：

```
$obj = ($h4 = $page->find('#headings h4', 0)) ? $h4->nodes[0] : null; 
```

# login - 如何避免liferay中同一浏览器的多次登录？

> ID：15629893
> 
> 赞同：2
> 
> 时间：2013-03-26T05:18:58.160
> 
> 标签：login, liferay, portlet, liferay-6

我正在使用 liferay 6.1 并创建了我的自定义 portlet 正在使用 liferay 登录 portlet 并且在使用以下步骤登录时我遇到了一些问题..

*   使用 user1 登录
*   现在打开具有相同 url 的不同选项卡，它将自动登录到 liferay 中的 user1 帐户
*   现在从任何选项卡中注销，然后您将从两个选项卡中注销
*   现在从两个选项卡首先在 tab1 中使用 user1 登录
*   现在从 tab2 使用 user2 登录

现在liferay将与我在同一个浏览器中使用不同选项卡的两个不同用户登录。（当我刷新页面时，它将使用最后一个用户登录帐户自动登录）现在我想要的是当同一个用户尝试使用同一个浏览器登录时它会自动登录重定向到在选项卡中首先登录的用户帐户..

任何人都可以指导我怎么做吗？

我已尝试对 portlet-ext.properties 文件进行如下更改，但没有成功

```
live.users.enabled=true
#
# Set the following to true if users are allowed to have simultaneous logins
# from different sessions. This property is not used unless the property
# "live.users.enabled" is set to true.
#
auth.simultaneous.logins=false 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T10:12:22.903

发生这种情况是因为浏览器选项卡通过 cookie 共享相同的会话。因此，您需要为 Liferay 应用程序禁用 cookie，以便使用相同的浏览器进行不同的帐户登录。您可以将以下属性设置为`false`，默认情况下它们为 true：

```
#
# Set this to false to disable all persistent cookies. Features like
# automatically logging in will not work.
#
session.enable.persistent.cookies=true

#
# Set this to true to test whether users have cookie support before allowing
# them to sign in.
#
session.test.cookie.support=true 
```

如果 cookie 被禁用，liferay 将通过附加 jsessionId 使用 url-rewriting 来维护会话。

我还没有尝试过，但我认为这应该可行。

# android - 如何在默认播放器中播放声音？

> ID：15629898
> 
> 赞同：0
> 
> 时间：2013-03-26T05:19:17.810
> 
> 标签：android, audio

我正在使用 Intent 代码播放声音。我的代码运行良好。我的设备有两个声音播放器，一个是默认的，另一个是 Google Play 音乐，所以问题是每当我尝试播放声音时，它都会向我显示一个我想播放声音的播放器的弹出窗口。下面是弹出窗口的图像。

![在此处输入图像描述](../Images/b70e8a3c8c43aa5863d3352f13cd69d7.png)

这是我播放声音的代码，

```
Uri myUri =Uri.parse("file:/"+selectedFile);
Intent intent = new Intent(android.content.Intent.ACTION_VIEW);
intent.setDataAndType(myUri, "audio/mp3"); 
startActivity(intent); 
```

我只想在默认播放器中播放声音而不显示此弹出窗口。我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T05:24:53.987

您可能需要重新考虑并允许两个玩家像现在一样弹出。毕竟，如果她愿意，用户可以随时检查“默认使用”。

如果你真的只需要谷歌播放器，那么你可能会在谷歌资源中找到它的包名并明确启动它的活动。但是他们可以在未来的版本中改变这一点，或者可能对于不同的版本已经不同了。最好重新考虑并允许两者。

# java - 如何使用 Java 创建验证码？

> ID：15629908
> 
> 赞同：-5
> 
> 时间：2013-03-26T05:20:29.400
> 
> 标签：java, jquery, jsp, captcha

实际上，在我的应用程序中，需要在文本框中输入验证码字并验证验证码...

我在 Google 中搜索了很多东西……但这些是无法理解的……

所以请帮助我如何在java中创建验证码？使用 javascript 或 jquery 或与 java 相关的任何简单技术

请建议我...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T05:26:45.873

You can use Jcaptcha and the setup is very simple

By adding a small form code and a servlet mapping will do the trick.

```
<form action="submit.action">
...
    <img src="jcaptcha.jpg" /> <input type="text" name="jcaptcha" value="" />
...
</form> 
```

[SetUp](https://jcaptcha.atlassian.net/wiki/display/general/Simple+Servlet+Integration+documentation)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T05:25:25.140

如果您的要求是**使用**Captcha，您可以在您的网站上免费使用[reCaptcha](http://www.google.com/recaptcha)。要了解更多如何在 Java 中使用它，请[查看](https://developers.google.com/recaptcha/docs/java).

# ruby-on-rails - 视图中的用户名而不是 user.id

> ID：15629910
> 
> 赞同：-2
> 
> 时间：2013-03-26T05:20:40.217
> 
> 标签：ruby-on-rails, model-view-controller

快速提问：我想在视图中显示用户名（在我的情况下是电子邮件）而不是用户 ID，我在视图中编写了以下代码：

```
<%= User.find(post.user_id).Email %> 
```

但是不要破坏我的MVC协议，我应该把这段代码移到一个模型中吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T05:24:34.177

首先，您不能像这样使用大写的电子邮件 - 您需要调用方法（小写）电子邮件而不是类名。

```
<%= User.find(post.user_id).email %> 
```

您可能想在控制器中找到 @user = User.find(@post.user_id) 然后您可以在视图中执行 @user.email ......甚至更好地在控制器中设置 @user_email 。您不应该真正从视图中调用模型。您的控制器应该与模型对话并将数据传递给视图。

所以，在控制器中是这样的：

```
@post = Post.find(params[:id])
@user_email = @post.user.email 
```

然后在视图中你可以做

```
<%= @user_email %> 
```

# php - 如果有相同的多条记录，如何从MySQL表中只选择一条记录

> ID：15629916
> 
> 赞同：0
> 
> 时间：2013-03-26T05:20:58.370
> 
> 标签：php, mysql, sql

我有 MySQL 表，其中包含我想要的类别和子类别

类别是销售，子类别是英语，再次像这样有销售和子类别中文的记录，所以有 4 个类别的子类别，所以我希望它应该从表中选择类别，但如果类别有 4 条记录销售在选择类别时，它只显示为 1 的类别。

```
$query = mysql_query("SELECT * category FROM catalog_Master"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T05:24:04.807

然后查询将是

```
$query = mysql_query("SELECT DISTINCT(category) FROM catalog_Master"); 
```

# css - 背景被限制在一定高度

> ID：15629917
> 
> 赞同：0
> 
> 时间：2013-03-26T05:21:07.667
> 
> 标签：css

我正在尝试实现下面给出的 CSS 代码，但背景高度被限制在距离顶部的某个点，而不是覆盖整个 div。一旦我删除了 float:right 或 float:left，它就会再次正确显示。

可能是什么问题？

```
 #container3 {
    background: #FE7400;
}

#third #area1 {
        float:left;
        width:550px;
    }

    #contactform {
        width:300px;
        float:right;
    } 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T05:25:14.917

你可以在你的 div 的 CSS-中试试这个

```
overflow: auto; 
```

如果它仍然不起作用，请尝试-

```
min-height: 250px; 
```

或您想提供的任何其他尺寸。可能会有所帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T05:46:34.687

我估计你的 HTML 代码如下。容器3

```
<div id="container3">
    <div id="third">
    <!-- YOUR CONTENT-->
        <div id="area1">
        <!-- YOUR CONTENT-->
        </div>
    </div>

    <div id="contactform">
    <!-- YOUR CONTENT-->
    </div>
</div> 
```

尝试将此行添加到 CSS：

```
.clear{clear:both;} 
```

然后将 html 代码更改为：

```
<div id="container3">
    <div id="third">
    <!-- YOUR CONTENT-->
        <div id="area1">
        <!-- YOUR CONTENT-->
        </div>
    </div>

    <div id="contactform">
    <!-- YOUR CONTENT-->
    </div>

    <div class="clear"></div>
</div> 
```

希望这可以解决您的问题。

# javascript - 在构造函数中将父级传递给子级

> ID：15629919
> 
> 赞同：0
> 
> 时间：2013-03-26T05:21:21.473
> 
> 标签：javascript

给定以下对象：

```
Parent = (function() {
  function Parent(child) {
    this.child = child;
  }
  return Parent;
})();

Child = (function() {
  function Child(name, parent) {
    this.name = name;
    this.parent = parent;
  }
  return Child;
})(); 
```

有没有办法在一个语句中创建父母和孩子？（孩子对父母有适当的参考）

有点像这样：

```
var parent = new Parent(new Child("john", thisThatPointsToTheNewParent)); 
```

这只是为了展示我所追求的。我知道我可以分别创建孩子和父母，然后稍后更新孩子的参考，但在我的情况下，如果我能一次性完成它会更容易。有办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T06:13:44.227

这是可能的，但您最终会得到循环引用，因为 Child 引用 Parent 和 Parent 引用 Child。这是实现您正在寻找的单线的一种方法：

```
var Parent = function (name, referenceToChild) {
    function Parent(name, child) {
        this.name = name;
        this.child = child;
        child.parent = this;
        return this;
    }
    return new Parent(name, referenceToChild);
};

var Child = function (name) {
    function Child(name) {
        this.name = name;
        this.parent = parent;
        return this;
    };
    return new Child(name);
};

var parent = new Parent("Tom", new Child("john")); 
```

结束于：

```
{                            // Parent
 name: "Tom",
 child: {                    // Child
     name: "john",
     parent: {               // Parent
         name: "Tom",
         child: {            // Child
             name: "john",
             parent: {       // Parent
                 .... 
```

# javascript - nodeJS exec 不适用于“cd” shell cmd

> ID：15629923
> 
> 赞同：41
> 
> 时间：2013-03-26T05:22:00.917
> 
> 标签：javascript, node.js, express, exec

```
var sys = require('sys'),
    exec = require('child_process').exec;

exec("cd /home/ubuntu/distro", function(err, stdout, stderr) {
        console.log("cd: " + err + " : "  + stdout);
        exec("pwd", function(err, stdout, stderr) {
            console.log("pwd: " + err + " : " + stdout);
            exec("git status", function(err, stdout, stderr) {
                console.log("git status returned " ); console.log(err);
            })
        })
    }) 
```

* * *

```
cd: null :

pwd: null : /

git status returned 
{ [Error: Command failed: fatal: Not a git repository (or any of the parent directories): .git ] killed: false, code: 128, signal: null } 
```

* * *

nodeJS exec 不适用于“cd”shell cmd。如下所示， pwd 有效， git status 正在尝试工作但失败，因为它没有在 git 目录中执行，但 cd cmd 无法阻止其他 cmd 的进一步成功执行。在 nodeJS shell 以及 nodeJS+ExpressJS 网络服务器中尝试过。

* * *

## 回答 #1

> 赞同：78
> 
> 时间：2013-03-26T05:25:46.033

Each command is executed in a separate shell, so the first `cd` only affects that shell process which then terminates. If you want to run `git` in a particular directory, just have Node set the path for you:

```
exec('git status', {cwd: '/home/ubuntu/distro'}, /* ... */); 
```

`cwd` (current working directory) is one of [many options available for `exec`](http://nodejs.org/api/child_process.html#child_process_child_process_exec_command_options_callback).

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2017-05-25T03:07:07.927

# 而不是多次调用 exec() 。对多个命令调用一次 exec()

您的外壳正在执行`cd`，但只是每个外壳在完成后都会丢弃它的工作目录。因此，您又回到了第一方。

在您的情况下，您不需要多次调用 exec() 。您可以确保您的`cmd`变量包含多个指令而不是 1。CD在这种情况下**可以工作。**

```
var cmd =  `ls
cd foo
ls`

var exec =  require('child_process').exec;

exec(cmd, function(err, stdout, stderr) {
        console.log(stdout);
}) 
```

**注意**：此代码应该在**Linux 上运行，但在 Windows 上不行**。看[这里](https://stackoverflow.com/questions/44170007/nodejs-shell-script-works-fine-in-linux-but-not-in-windows-why-wont-it-execute)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-03-26T05:25:56.833

It is working. But then it is throwing the shell away. Node creates a new shell for each `exec`.

Here are options that can help: [http://nodejs.org/api/child_process.html#child_process_child_process_exec_command_options_callback](http://nodejs.org/api/child_process.html#child_process_child_process_exec_command_options_callback)

# c# - 从 VBScript 调用 WebApi 方法

> ID：15629924
> 
> 赞同：1
> 
> 时间：2013-03-26T05:22:03.660
> 
> 标签：c#, .net, web-services, vbscript, asp.net-web-api

我的控制器中有以下 Web api 方法

```
 public HttpResponseMessage PostUpdateCardStatus(CardholderRequest cardholderRequest)
    {
        var cardId = cardholderRequest.CardId;

        switch (cardholderRequest.Action)
        {
            case "Enable":
                break;
            case "Disable":
                break;                
        }

        var cardholderResponse = new CardholderResponse(cardholderRequest.RequestId)
        {
            Status = "OK"
        };
        var response = Request.CreateResponse<CardholderResponse>(HttpStatusCode.OK, cardholderResponse);
        return response;
    } 
```

这就是我从 .NET 控制台应用程序调用它的方式

```
 using (var client = new HttpClient())
        {
            client.BaseAddress = new Uri("http://localhost:55208/");

            var request = new CardholderRequest()
            {
                RequestId = Guid.NewGuid().ToString(),
                CardId = "123456",
                Action = "Enable",
                LoginId = "tester",
                Password = "tester",
            };
            var response = client.PostAsJsonAsync("api/cardholders", request).Result;
            if (response.IsSuccessStatusCode)
            {
                var cardholderResponse = response.Content.ReadAsAsync<CardholderResponse>().Result;

            } 
```

如何使用 VBScript 进行相同的调用？

我试过谷歌搜索，但我没有遇到任何从 VB 脚本调用 web api 方法的可靠示例。

我的 web api 方法是否支持来自 VBScript 的调用？还是我需要一些调整？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-03-11T14:33:40.273

我知道这现在有点老了，但我解决了它。想我会提出一个答案，以防其他人被这个任务卡住。我需要它是因为在一份新工作中我必须使用一个名为 SmarTeam 的产品，它在 vbscript 中做了很多工作，但我们需要更多的功能。

我制作了一个标准的 ASP.Net Web API 2。按照那里的任何教程制作一个。我的非常接近这个。

[http://www.asp.net/web-api/overview/getting-started-with-aspnet-web-api/tutorial-your-first-web-api](http://www.asp.net/web-api/overview/getting-started-with-aspnet-web-api/tutorial-your-first-web-api)

接下来我制作了一个 vbscript 文件，首先我需要一些变量。我从几个不同的站点获得了大部分内容，并将它们放在一起，所以它是从几个不同的来源窃取的

```
Dim oXMLDoc ' this will hold the response data
Dim oXMLHTTP ' this is the object that will request the data
const URLBase = "http://localhost:16370/api/" ' here is where my local web api was running
const AppSinglePath = "application/get/1" ' and this is just one of the paths available in my api 
```

接下来是设置我的对象的方法，并确保 api 已准备好与我们交谈

```
Sub GetResponse
    Set oXMLHTTP = CreateObject("Microsoft.XmLHttp") ' create my request object
    Set oXMLDoc = CreateObject("MSXML2.DOMDocument") ' create my response object

    oXMLHTTP.onreadystatechange = getref("HandleStateChange") ' mode on this below, but it makes sure the API is ready
    Dim url = URLBase & AppSinglePath ' set up the URL we are going to request
    call oXMLHTTP.open("GET", url, false)
    call oXMLHTTP.setrequestheader("content-type","application/x-www-form-urlencoded")
    call oXMLHTTP.send()
End Sub 
```

现在我们需要一个方法来确保 API 准备就绪，并在准备就绪时对其进行处理。要了解不同的 ReadyState 选项，请查看此链接，但我们只关心 4 （请求已完成且响应已准备好）

[http://www.w3schools.com/ajax/ajax_xmlhttprequest_onreadystatechange.asp](http://www.w3schools.com/ajax/ajax_xmlhttprequest_onreadystatechange.asp)

```
Sub HandleStateChange
    If oXMLHTTP.readyState = 4 Then
        ' get the response
        Dim szResponse: szResponse = oXMLHTTP.responseText
        ' turn it into XML we can read
        call oXMLDoc.loadXML(szResponse)
        If oXMLDoc.parseError.errorCode <> 0 Then
            ' there was an error, tell someone
            call msgbox(oXMLDoc.parseError.reason)
        Else
            ' i was writing the response to a local file, because I wanted to see the XML
            Set oFile = CreateObject("Scripting.FileSystemObject").OpenTextFile("C:\APIResults\api.txt",2,true)
            oFile.WriteLine(oXMLDoc.xml)
            oFile.Close
            Set oFile = Nothing

            ' We need to make a query to dive into the XML with
            Dim strQuery = "/Application/ApplicationName"

            ' Now we need to rip apart the XML, and do whatever we want with it
            Set colNodes = oXMLDoc.selectNodes(strQuery)
            For Each objNode in colNodes
                WScript.Echo objNode.nodeName & ": " & objNode.text
            Next
        End If
    End If
End Sub 
```

为了完成，这里是我的 API 返回的 XML 的清理版本

```
<Application>
    <ID>1</ID>
    <ApplicationName>MyApplication</ApplicationName>
</Application> 
```

您可以通过更改路径的第二部分以及深入 XML 的 strQuery 来测试不同的 API 调用

# javascript - 用javascript改变字体大小

> ID：15629926
> 
> 赞同：0
> 
> 时间：2013-03-26T05:22:05.407
> 
> 标签：javascript, javascript-events

您好，我有这段代码可以用 3 个按钮更改段落的字体大小，我想知道我可以使用哪种方法不重复相同的行并使这段代码更紧凑，非常感谢:)

```
window.addEventListener('load', inicio, false);

function inicio(){
var boton1 = document.getElementById('boton1');
var boton2 = document.getElementById('boton2');
var boton3 = document.getElementById('boton3');

boton1.addEventListener('click', fuente10, false);
boton2.addEventListener('click', fuente13, false);
boton3.addEventListener('click', fuente20, false);
} 

function fuente10(){
var parrafo = document.getElementById('parrafo');
parrafo.style.fontSize='10px'
}

function fuente13(){
var parrafo = document.getElementById('parrafo');
parrafo.style.fontSize='13px'
}

function fuente20(){
var parrafo = document.getElementById('parrafo');
parrafo.style.fontSize='20px'
} 
```

我在考虑一个 for 循环，但我不知道该怎么做：/

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T05:31:46.237

尝试这样的事情

```
window.addEventListener('load', inicio, false);

function inicio(){
var boton1 = document.getElementById('boton1');
var boton2 = document.getElementById('boton2');
var boton3 = document.getElementById('boton3');

boton1.addEventListener('click', function() { setFont("10px");}, false);
boton2.addEventListener('click', function() { setFont("13px");}, false);
boton3.addEventListener('click', function() { setFont("20px");}, false);
} 

function setFont(value){
   var parrafo = document.getElementById('parrafo');
   parrafo.style.fontSize= value;
} 
```

**更新** 另一种方法（未经测试，但应该可以）

```
 window.addEventListener('load', inicio, false);
function inicio() {
    var fontDetails = {"boton1" : "10px" , "boton2" : "13px" , "boton3" : "20px"};
    var parrafo = document.getElementById('parrafo');
    var domElement  = "";
    var element  = "";

    for (element in fontDetails)
    {
        domElement = document.getElementById(element);
        domElement.addEventListener('click', function() { parrafo.style.fontSize= fontDetails[element]; }, false);
    }
} 
```

您还可以删除窗口加载事件处理程序和函数 inicio 并尝试像这样的自执行函数

```
(function() { //your code here } )(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T05:30:27.387

也许这种改变可以帮助你：

```
 window.addEventListener('load', inicio, false);

    var boton;

    function inicio()
    {
        modificar('boton1', 10);
        modificar('boton2', 13);
        modificar('boton3', 20);
    }

    function modificar(id, size)
    {
        boton = document.getElementById(id);
        boton.onclick=function(){fuente(size)};
        console.log(boton);
    }

    function fuente(size)
    {
        var parrafo = document.getElementById('parrafo');
        parrafo.style.fontSize=size+'px';
    } 
```

# sql - 大表范围内的高效 SQL 连接

> ID：15629932
> 
> 赞同：2
> 
> 时间：2013-03-26T05:23:00.060
> 
> 标签：sql, performance, oracle, memory-efficient

```
 table1                            table2                   
    id      number                   start    end    indicator
    11      4                         1        5        N
    22      6                         2        7        N  
    33      8                         5        12       Y
    44      10 
```

如果我希望 table1 中的行在 table2 (start,end) 范围内对应，其中两个单独条件的指示符为 Y，那么连接这些表的最有效方法是什么；

1.  table2 中只有一行会有 Y 指示符
2.  table2 中的一行或多行将有一个 Y 指示符

即（坏例子）

```
SELECT * from table1
WHERE table1.number > (SELECT start from table2 WHERE indicator = 'Y')
AND   table1.number < (SELECT end from table2 WHERE indicator = 'Y') 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T05:28:50.503

```
select t1.* 
from table1 t1, table2 t2
where t2.indicator = 'Y'
and t1.number1 > t2.start
and t1.number1 < t2.end 
```

根据您的数据，您可能有兴趣使用并行查询[http://docs.oracle.com/cd/E11882_01/server.112/e16638/optimops.htm#PFGRF94608](http://docs.oracle.com/cd/E11882_01/server.112/e16638/optimops.htm#PFGRF94608)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T05:34:25.203

```
从表 1 中选择 *
交叉连接 (
      select start, end from table2 where indicator='Y') B
其中 table1.number > B.start 和 table1.number
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T09:49:27.523

如果 table1 非常大，那么最有效的方法是将查询转换为等值连接，以便在数据集之间获得哈希连接。

```
with table2_new as (
  select     start + rownum - 1 id
  from       table1
  where      indicator = 'Y'
  connect by level <= (end - start) +1)
select
  table1.id,
  table1.number
from
  table1,
  table2_new
where
  table1.id = table2_new.id; 
```

没有测试过，但以前使用过这种技术。

# c# - 如何访问控制的事件？

> ID：15629941
> 
> 赞同：1
> 
> 时间：2013-03-26T05:23:26.733
> 
> 标签：c#, winforms, delegates, event-handling, controls

我正在尝试获取分配给控制的事件的名称例如：我有两种形式**A**和**B**。**表单 B**包含**GridControl**和 gridcontrol 有一些事件，如**gridControl1_Validating**。

我的目标只是知道分配给控件的事件是什么

我的代码如下形式 **A**

```
 public Control[] FilterControls(Control start, Func<Control, bool> isMatch)
    {
        var matches = new List<Control>();
        Action<Control> filter = null;
        (filter = new Action<Control>(c =>
        {
            if (isMatch(c))
                matches.Add(c);
            foreach (Control c2 in c.Controls)
                filter(c2);
        }))(start);

        return matches.ToArray();

    }

     static void main[]
     {

        Control[] FoundControls = null;
        FoundControls = FilterControls(TF, c => c.Name != null && c.Name.StartsWith("grid"));

        var eventinfo = FoundControls[0].GetType().GetEvent("gridControl1.Validating", BindingFlags.Public | BindingFlags.NonPublic | BindingFlags.Instance);

     } 
```

在编译时我得到了我的控制，但我在**eventinfo**中得到了 null 虽然 gridcontrol 事件在**表单 B中有这个事件**

请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T05:35:33.460

尝试`"Validating"`而不是`"gridControl1.Validating"`“

```
var eventinfo = FoundControls[0].GetType().GetEvent(
    "Validating",
    BindingFlags.Public | BindingFlags.NonPublic | BindingFlags.Instance); 
```

尽管这与您已将事件处理程序附加到事件这一事实无关。您正在获取事件本身，而不是附加的处理程序。您不能对`eventInfo`变量做任何有用的事情（除了添加和删除其他事件处理程序）。

要访问附加的处理程序（底层委托），您需要查看事件实现的代码（使用像[Reflector](http://www.red-gate.com/products/dotnet-development/reflector/)或[dotPeek](http://www.jetbrains.com/decompiler/)这样的反编译器，或使用[Microsoft Reference Source](http://referencesource.microsoft.com/)）：

```
public event CancelEventHandler Validating
{
    add
    {
        base.Events.AddHandler(EventValidating, value);
    }
    remove
    {
        base.Events.RemoveHandler(EventValidating, value);
    }
} 
```

事实证明，`Control`该类使用名为`Events`type的属性[`EventHandlerList`](http://msdn.microsoft.com/en-us/library/system.componentmodel.eventhandlerlist.aspx)来存储基于*键*（`EventValidating`在本例中为字段）的所有委托。

要检索事件的委托，我们应该从`Events`属性中读取它们：

```
public static Delegate[] RetrieveControlEventHandlers(Control c, string eventName)
{
    Type type = c.GetType();
    FieldInfo eventKeyField = GetStaticNonPublicFieldInfo(type, "Event" + eventName);
    if (eventKeyField == null)
    {
        eventKeyField = GetStaticNonPublicFieldInfo(type, "EVENT_" + eventName.ToUpper());
        if (eventKeyField == null)
        {
            // Not all events in the WinForms controls use this pattern.
            // Other methods can be used to search for the event handlers if required.
            return null;
        }
    }
    object eventKey = eventKeyField.GetValue(c);
    PropertyInfo pi = type.GetProperty("Events",
       BindingFlags.NonPublic | BindingFlags.Instance);
    EventHandlerList list = (EventHandlerList)pi.GetValue(c, null);
    Delegate del = list[eventKey];
    if (del == null)
        return null;
    return del.GetInvocationList();
}

// Also searches up the inheritance hierarchy
private static FieldInfo GetStaticNonPublicFieldInfo(Type type, string name)
{
    FieldInfo fi;
    do
    {
        fi = type.GetField(name, BindingFlags.Static | BindingFlags.NonPublic);
        type = type.BaseType;
    } while (fi == null && type != null);
    return fi;
} 
```

和

```
public static List<Delegate> RetrieveAllAttachedEventHandlers(Control c)
{
    List<Delegate> result = new List<Delegate>();
    foreach (EventInfo ei in c.GetType().GetEvents())
    {
        var handlers = RetrieveControlEventHandlers(c, ei.Name);
        if (handlers != null) // Does it have any attached handler?
            result.AddRange(handlers);
    }
    return result;
} 
```

最后一个方法将提取附加到控件事件的所有事件处理程序。这包括来自所有类的处理程序（甚至由 winforms 内部附加）。您还可以按处理程序的目标对象过滤列表：

```
public static List<Delegate> RetrieveAllAttachedEventHandlersInObject(Control c, object handlerContainerObject)
{
    return RetrieveAllAttachedEventHandlers(c).Where(d => d.Target == handlerContainerObject).ToList();
} 
```

现在您可以获得`gridControl1`定义在中的所有事件处理程序`formB`：

```
RetrieveAllAttachedEventHandlersInObject(gridControl1, formB); 
```

# c++ - 我正在尝试安装 apache qpid 在进行 make 时出现以下错误

> ID：15629946
> 
> 赞同：1
> 
> 时间：2013-03-26T05:23:58.610
> 
> 标签：c++, messagebroker, qpid

我正在尝试通过 svn checkout 安装 apache qpid，我已经安装了所有工具，同时我得到了错误

svn co [http://svn.apache.org/repos/asf/qpid/trunk](http://svn.apache.org/repos/asf/qpid/trunk)

```
qpid/sys/SocketTransport.cpp:209: error: ‘a2’ is used uninitialized in this function
/usr/include/boost/bind/bind_cc.hpp:83: note: ‘a2’ was declared here
qpid/sys/SocketTransport.cpp:209: error: ‘a2’ may be used uninitialized in this function
/usr/include/boost/bind/bind.hpp:551: note: ‘a2’ was declared here
qpid/sys/SocketTransport.cpp:209: error: ‘a2’ may be used uninitialized in this function
/usr/include/boost/bind/storage.hpp:276: note: ‘a2’ was declared here
qpid/sys/SocketTransport.cpp:209: error: ‘a2’ may be used uninitialized in this function
/usr/include/boost/bind/storage.hpp:227: note: ‘a2’ was declared here
qpid/sys/SocketTransport.cpp:209: error: ‘a2’ may be used uninitialized in this function
/usr/include/boost/bind/storage.hpp:195: note: ‘a2’ was declared here
qpid/sys/SocketTransport.cpp:209: error: ‘a2’ may be used uninitialized in this function
/usr/include/boost/bind/storage.hpp:129: note: ‘a2’ was declared here
make[3]: *** [qpid/sys/libqpidbroker_la-SocketTransport.lo] Error 1
make[3]: Leaving directory `/home/nimbus/Downloads/svn/trunk/qpid/cpp/src'
make[2]: *** [all-recursive] Error 1
make[2]: Leaving directory `/home/nimbus/Downloads/svn/trunk/qpid/cpp/src'
make[1]: *** [all] Error 2
make[1]: Leaving directory `/home/nimbus/Downloads/svn/trunk/qpid/cpp/src'
make: *** [all-recursive] Error 1 
```

# primefaces - PrimeFaces DataTable 手动选择

> ID：15629962
> 
> 赞同：0
> 
> 时间：2013-03-26T05:24:42.743
> 
> 标签：primefaces, datatable

我正在使用 PrimeFaces 3.5，并且在验证数据表中的某些字段时遇到问题。

我创建的示例取决于我的字段的[http://www.primefaces.org/showcase/ui/datatableRowEditing.jsf](http://www.primefaces.org/showcase/ui/datatableRowEditing.jsf)和 @FaceValidation。但是因为 JSF 2.0 中的 @FaceValidation 不支持 EJB，所以我决定在 onEdit 函数中进行验证（在我的 bean 中）。

这里是问题。

如果出现错误（例如“用户名已被占用”等），如何在函数 onEdit（RowEditEvent 事件）中的 bean 中手动选择某些行以进入编辑模式（就像我点击铅笔一样）？就像我有 @FaceValidation 并抛出异常一样。

我希望我很清楚:)

提前致谢。圆顶

# android - 如何使用基本适配器创建搜索

> ID：15629963
> 
> 赞同：0
> 
> 时间：2013-03-26T05:24:45.500
> 
> 标签：android, android-listview, android-searchmanager

如何使用基本适配器创建搜索选项？这是我尝试过的示例代码......请建议

```
public class ListViewAdapter extends BaseAdapter 
   {     //To create an adapter we have to extend BaseAdapter instead of Activity, or whatever.

  private Activity activity;
  private ArrayList<HashMap<String, String>> data;
  private static LayoutInflater inflater=null;

public ListViewAdapter(Activity a, ArrayList<HashMap<String, String>> d) {
    activity = a;
    data=d;
    inflater = (LayoutInflater)activity.getSystemService(Context.LAYOUT_INFLATER_SERVICE);

}

public int getCount() {   //get the number of elements in the listview
    return data.size();
}

public Object getItem(int position) {   //this method returns on Object by position
    return position;
}

public long getItemId(int position) {   //get item id by position
    return position;
}

public View getView(int position, View convertView, ViewGroup parent) {   //getView method is the method which populates the listview with our personalized rows
    View vi=convertView;
    if(convertView==null)
        vi = inflater.inflate(R.layout.layout1, null);       //every item in listview uses xml "listview_row"'s design 

    TextView id = (TextView)vi.findViewById(R.id.textView1);  //Here are two textviews in the listview_row xml file
    TextView name = (TextView)vi.findViewById(R.id.textView2);   // You can enter anything you want, buttons, radiobuttons, images, etc.
    TextView loc = (TextView)vi.findViewById(R.id.textView3);
    TextView desc = (TextView)vi.findViewById(R.id.textView4);
    TextView status = (TextView)vi.findViewById(R.id.textView5);

    HashMap<String, String> hash = new HashMap<String, String>();  //We need a HashMap to store our data for any item
    hash = data.get(position);

    id.setText(hash.get(SaActivity.KEY_ACCOUNTNUMBER));  //We personalize our row's items.
    name.setText(hash.get(SaActivity.KEY_NAME));
   loc.setText(hash.get(SaActivity.KEY_STATUS));
   desc.setText(hash.get(SaActivity.KEY_DESC));
    status.setText(hash.get(SaActivity.KEY_NAME));

    return vi;
  }

 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T05:39:20.310

首先，您必须学习有关适配器和搜索控件的基本知识，然后尝试实现您想要的。

我建议您查看[此](http://android-helper.blogspot.in/2011/03/android-search-in-listview-example.html)内容并尝试按照您的意愿实施。这仅供参考，以了解您的概念。

享受学习

# plsql - Oracle 中的管道函数

> ID：15629969
> 
> 赞同：0
> 
> 时间：2013-03-26T05:25:08.670
> 
> 标签：plsql, oracle11g

从下面的查询中，我试图插入表 SRC_PK_COLUMNS (Sequence_no,pk_key)，其中函数返回 TABLE 类型。但这期待单行。如何处理这个错误。

```
 INSERT INTO SRC_PK_COLUMNS (pk_key)
    (SELECT * 
      FROM TABLE(parse_comma_delimited(( SELECT SOURCE_COLUMNS 
                                         FROM RULES_TABLE 
                                           WHERE RULE_NAME = RULE_NAME ), ','))  ); 
```

1.  00000 - “单行子查询返回多于一行”

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T05:30:39.870

您需要使用此语法

```
insert into TAB (COL1, COL2, COL3)
select C1, C2, C3 from OTHER_TAB; 
```

也就是说，没有`select`括号中的语句。这样，每个选定的记录也将被插入，而不是带有括号的语法，实际上，只需要一个记录。

注意：插入的列和选定的列需要在数量上一致（以及“可转换”数据类型）。因此，为了填充`Sequence_no`，语句也变为

```
INSERT INTO SRC_PK_COLUMNS (sequence_no, pk_key)
    SELECT rownum, t.*
      FROM TABLE(parse_comma_delimited(( SELECT SOURCE_COLUMNS 
                                     FROM RULES_TABLE 
                                       WHERE RULE_NAME = RULE_NAME ), ',')) t; 
```

也许，您想使用序列而不是`rownum`.

# asp.net - 密码学选项

> ID：15629974
> 
> 赞同：1
> 
> 时间：2013-03-26T05:25:22.027
> 
> 标签：asp.net, asp.net-mvc, encryption

我的 ASP.NET MVC 4 网站（作为 Azure Web 角色托管）将一些敏感数据存储在 SQL Server 表中。当用户开始生成数据的工作流时，我从 Rijndael 实现中获取一个随机密钥并将其存储在会话状态中。在会话的整个生命周期中，我使用该密钥对数据库进行往返加密/解密。因此，只有在该会话中运行的代码（或至少可以访问存储在会话状态中的密钥的代码）才能解密数据。

现在我需要允许数据库记录停留一段时间并从不同的会话中访问它们。由于此会话无权访问存储在前一个会话状态中的密钥，因此在我看来，我最好、最简单的做法可能是使用嵌入到我的应用程序代码中的密钥来加密所有数据。

我应该补充一点，我正在努力不使用任何 Azure 挂钩，以便我的网站可以托管在任何 ASP.NET 主机上。

我有两个问题：

1.  如果我的会话状态方案是`<sessionState mode="StateServer" />`并且我实际上正在使用多个主机，那么我现有的方案（将我的密钥存储在会话状态中）在 Azure 上是否安全？（请善待......我仍在弄清楚整个 ASP.NET/Azure 的事情。目前我正在使用 InProc 会话状态；我什至还没有尝试让多主机工作。）

2.  与使用单个内置密钥相比，使用随机的每会话密钥似乎是一种更强大的加密方案。但是，另一方面，整个 SSL 世界的前提是所有通信都由一个嵌入 SSL 证书的私钥保护。我应该担心使用嵌入我的代码的密钥吗？有没有更好的方案 - 类似于我使用每个会话密钥所做的事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T13:29:39.777

**1.**

[保护会话状态](http://msdn.microsoft.com/en-us/library/ms178201.aspx)。不幸的是，它不会告诉你它在做什么，但会告诉你很多不该做的事情，这应该会让你产生适当的偏执。

**2.**

保护静态数据是一个非常困难的问题，你将不得不存储一个密钥，你只需要尽可能地保持它的安全并与你的数据分开。如果您需要对数据进行分段，您可以拥有使用主密钥加密的每个 x（每个用户，等等）的密钥。轮换密钥的能力确实有助于维护安全性，因此您可以超时更换密钥而不会产生任何后果。[我移植到 c#](http://jbtule.github.com/keyczar-dotnet/)的[keyczar](http://www.keyczar.org/)框架有一个简单的键轮换设计。

# solr - 增量导入期间日期/时间戳的其他替代方案

> ID：15629978
> 
> 赞同：2
> 
> 时间：2013-03-26T05:25:34.703
> 
> 标签：solr, data-import

为了在 Solr 中执行增量更新，last_index_time（存储在 dataimport.properties 中）与数​​据库中的日期/时间戳列进行比较。

是否可以在 Solr 中进行配置，以便：

> *   我们使用数据库中的其他列（比如一个**按顺序增加的“id”**）而不是日期/时间戳？
> *   **last_index_id**存储在 dataimport.properties 而不是 last_index_time ？
> *   在增量导入期间，我们可能会使用类似**“where id > dataimporter.last_index_id”**的条件？

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-30T22:49:21.333

我相信您的用例是您有一个带有自动增量主键的仅附加表。Solr DIH 似乎不支持您想要的。（尽管尝试询问 Solr 用户邮件列表。）

但是还有另一种方法，您可以尝试使用 Solr Wiki [DataImportHandlerDeltaQueryViaFullImport](https://wiki.apache.org/solr/DataImportHandlerDeltaQueryViaFullImport)中给出的示例中的想法。如果您可以将`id`Solr 索引中的最大值作为参数传递给导入请求，那么您可以在数据导入查询中使用它。

为此，您需要首先向 Solr 发出查询以获取最大的 id：

```
q=*:*&sort=id desc&rows=1&fl=id 
```

打电话给这个`MAXID`。然后，当您调用完全导入时，传递此 ID，例如：

```
/dataimport?command=full-import&id=MAXID 
```

您可以使用`${dataimporter.request.id}`. 在您的 data-config.xml 中，您的查询应如下所示：

```
<entity name="item" 
        pk="id"
        query="SELECT id, name FROM item 
                 WHERE id > '${dataimporter.request.id}'"> 
```

当然，要对所有文档进行完整的重新索引，您将通过`id=0`，假设 0 是您获得的最小键值。

我自己还没有尝试过，但是您可以进行实验并说出您的发现。

（说了这么多，显然很容易将时间戳列添加到您的表中。如果您使用的是 MySQL，您可以保留时间戳列，`DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP`甚至不必费心自己更新它。）

# r - 每个回归的循环回归提取

> ID：15629991
> 
> 赞同：0
> 
> 时间：2013-03-26T05:26:56.620
> 
> 标签：r, loops, regression, extraction

我可以看到这已经几乎完成了，但我是 R 的新手，无法弄清楚。几乎，我有一个回归循环（请不要批评数据挖掘），我需要将每个循环中的一些内容报告到一个新的列表/数据框/最合适的内容中。这是我的代码：

```
#Required packages
require(lattice)
require(plyr)

ACDn <- "ACDn.csv"
x <- as.matrix(read.csv(ACDn, colClasses = "numeric"))

#To find which columns are which, in order to split up the overall dataset.
which( colnames(X)=="H95.H30" )
which( colnames(X)=="H99" )

#Here i split all the data into their different types, i.e. LHt = Lidar Heights. Please ignore
#those that are unpopulated, as i am waiting on data to run.

Yall <- x[,c(59:79)]                            #All "True Variables" - BA, MTH, etc.
Y <- Yall[,10]                                  #Specifies which columnn is the Y variable, BA = 10,
                                                #TopHt = 11, SPH = 12, Vol_live = 13, RecovVol = 14

X <- x[,c(1:58,80:95)]                          #All Lidar metrics and combinations.
LHt <- X[,c(28:41,59:74)]
LCv <- X[,c()]
LKu <- X[,c()]
LSk <- X[,c()]
L?? <- X[,c()]

#Create List file. I 

Optmod1 <- 

#Loop Creation, need dataset sizes. The ?? are caused by not knowing the exact sizes 
#of the relative datasets yet. Somewhere in here i would like the an entry for EACH model to be
#appended to a data.frame (or list, whatever is most appropriate), which would state the variables
# i.e. 'y', 'i', 'j', 'k', 'l', 'm', and the Adj. R-squared value (which i guess can be extracted
# through using 'summary(mod)$adj.r.squared). 

For(i in 1:30) {
  For(j in 1:??) {
    For(k in 1:??) {
      For(l in 1:??){
        For(m in 1:??){
          mod <- lm(Y ~ LHt[i] + LCv[j] + LKu[k] + LSk[l] + L??[m])
        }
      }
    }
  }
} 
```

差不多了，每次运行“mod”之后，我只需要它抛出“Y”、“i”、“j”、“k”、“l”、“m”和 Adjusted.R-Squared （我猜是通过使用“summary(mod)$adj.r.squared”）到一个可提取的表格中。

抱歉，如果其中任何一个是不识字的，我对此很陌生，并且之前刚刚获得过规定的代码，因此我的基本理解是稀疏的。

谢谢你的时间！

PS随意提出任何问题 - 我会努力回答他们！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T06:14:32.260

您的问题的简短答案是

```
Answers = list()
For(i in 1:30) {
  For(j in 1:??) {
    For(k in 1:??) {
      For(l in 1:??){
        For(m in 1:??){
          mod <- lm(Y ~ LHt[i] + LCv[j] + LKu[k] + LSk[l] + L??[m])
          Answers[[length(Answers)+1]] = list(i,j,k,l,m,summary(mod)$adj.r.squared)
        }
      }
    }
  }
} 
```

它将您想要的信息存储在列表中。它的工作原理是创建一个空白列表，然后在每次循环运行回归模型时附加到该列表。但是，在循环中增长这样的列表是非常糟糕的 R 实践。

您最好先将所有可能的形式公式写入`LHt[i] + LCv[j] + LKu[k] + LSk[l] + L??[m]`列表，然后使用 lapply 进行回归......

首先用于`expand.grid`给出一个包含 5 列的数据框，每列包含来自每个类别的一个变量名称

```
LHT_names = lapply(1:30,function(i) paste("LHt[",i,"]",sep="")) #a list of names of LHT type variables for use in formula
LCv_names = lapply(1:?,function(i) paste("LCv[",i,"]",sep="")) #similar for LCv
LKu_names = ...
LSk_names = ...
L??_names = ...

temp = expand.grid(c(LHt_names, LCv_names, LKu_names, LSk_names, L??_names)) 
```

然后，使用 paste 和 lapply 获取公式列表：

```
list_of_formulas = lapply(seq_along(nrow(temp)), function(i) paste("Y~",paste(temp[i,],collapse="+"),sep = "")) 
```

然后，使用 lapply 获取回归模型列表

```
list_of_models = lapply(list_of_formulas, function(x)  lm(x) ) 
```

# php - 做一个iframe智能吗？

> ID：15629992
> 
> 赞同：2
> 
> 时间：2013-03-26T05:27:28.393
> 
> 标签：php, javascript, jquery, html, iframe

以下代码的想法是它有一个 iframe（这是必要的，因为应用程序有这个 html 结构）。当父窗口主体元素具有类“IntelligenceEnabled”时，iframe 会激活所有“a”标记名的警报操作（“我很聪明！”）；当类不存在时，iframe 上的链接将自动禁用。

问题是：代码运行良好，但有时当用户在切换（禁用/启用）后单击 iframe 中的“showMessage”链接时，这些链接会重定向到 url（facebook、yahoo、google ......）并且没有显示信息。或相反的效果，消息永远显示。

我做错了什么？（两者都在同一个域 iframe 和父窗口上）

```
<html>
<script type="tex/javascript" src="/js/jquery-1.9.1.min.js"></script>
<script>
$(document).ready( function() {

    $("body.IntelligenceEnabled #IamIntelligent").on( 'load', function() {
        $("body.IntelligenceEnabled #IamIntelligent").contents().delegate( '.showMessage', 'load', function() {
            alert("I'am intelligent");
            return false;
        });
     });

     $('#enableIntelligence').click( function() {
        $('body').addClass('IntelligenceEnabled');
        return false;
     });

     $('#disableIntelligence').click( function() {
        $('body').removeClass('IntelligenceEnabled');
        return false;
     });

});
</script>
<body>
<iframe id="IamIntelligent" src="/foo.html"></iframe>
<a href="#" id="enableIntelligence">Enable my intelligence!</a>
<a href="#" id="disableIntelligence">Make me gross!!!</a>
</body>
</html> 
```

(/foo.html)

```
<html>
<body>
<a href="http://www.google.com" class="showMessage">Google</a>
<a href="http://www.facebook.com" class="showMessage">Facebook</a>
<a href="http://www.yahoo.com" class="showMessage">Yahoo</a>
<a href="http://www.microsoft.com" class="showMessage">Microsoft</a>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T06:16:34.847

U 不能在加载时将事件委托给 iframe 内容，例如

`$("body.IntelligenceEnabled #IamIntelligent")`

这甚至没有被执行。

使用以下代码获取您的功能。

```
$("#IamIntelligent").on( 'load', function() {
    $("#IamIntelligent").contents().delegate( '.showMessage', 'click', function(e) {
        if($(document.body).hasClass("IntelligenceEnabled")) {
            alert("I'am intelligent");
            return false;
        }
    });
 }); 
```

# sharepoint - 无法加载文件或程序集“Microsoft.Office.Server.UserProfiles--Sharepoint 2010 中的 Yammer 集成”

> ID：15629996
> 
> 赞同：1
> 
> 时间：2013-03-26T05:27:43.373
> 
> 标签：sharepoint, web-parts, yammer

我正在将 yammer 与 sharepoint 集成，创建 yammer webpart。我已经在 sharepoint 2010 Foundation 中配置了它。当我创建 yammer webpart 时，它显示类似

> System.IO.FileNotFoundException：无法加载文件或程序集“Microsoft.Office.Server.UserProfiles，Version=14.0.0.0，Culture=neutral，PublicKeyToken=71e9bce111e9429c”或其依赖项之一。该系统找不到指定的文件。文件名：Yammer.SharePoint.Framework.SPUserProfileManager.GetProfile(String accountName, SPSite site) 的 Yammer.SharePoint.Framework 中的“Microsoft.Office.Server.UserProfiles，版本=14.0.0.0，Culture=neutral，PublicKeyToken=71e9bce111e9429c”。 YammerSharePointContentStore.GetUserEmail() 在 Yammer.SharePoint.Framework.DefaultYammerSettingsManager.EnsureYammerSession(String networkId) 在 Yammer.SharePoint.WebParts.YammerAppsWebPart.CreateChildControls()

我该如何解决这个问题。我是否需要加载任何程序集？或者在任何地方传递我的凭据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T09:56:39.413

我遇到过同样的问题。问题是您尚未正确部署 Yammer for SharePoint WSP。

相反，您尝试[http://success.yammer.com/integrations/sharepoint/](http://success.yammer.com/integrations/sharepoint/)此链接，其中选择在线选项

安装：：

1\. 从 success.yammer.com 下载 Web 部件。

1.  在站点操作中，单击站点设置。
2.  从图库中，单击解决方案。
3.  单击库。
4.  单击解决方案。
5.  单击上传。
6.  浏览到 Yammer for SharePoint Online wsp 文件。
7.  单击激活。

之后，您可以轻松地为 Yammer 添加 Web 部件。

先决条件：您的服务帐户需要配置 Yammer 凭据。