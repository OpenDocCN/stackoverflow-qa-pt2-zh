# StackOverflow 问答 13398000-13398999

# r - R: Apply function on specific columns preserving the rest of the dataframe

> ID：13398001
> 
> 赞同：15
> 
> 时间：2012-11-15T13:00:05.933
> 
> 标签：r, dataframe, sapply

I'd like to learn how to apply functions on specific columns of my dataframe without "excluding" the other columns from my df. For example i'd like to multiply some specific columns by 1000 and leave the other ones as they are.

Using the sapply function for example like this:

```
 a<-as.data.frame(sapply(table.xy[,1], function(x){x*1000})) 
```

I get new dataframes with the first column multiplied by 1000 but without the other columns that I didn't use in the operation. So my attempt was to do it like this:

```
 a<-as.data.frame(sapply(table.xy, function(x) if (colnames=="columnA") {x/1000} else {x})) 
```

but this one didn't work.

My workaround was to give both dataframes another row with IDs and later on merge the old dataframe with the newly created to get a complete one. But I think there must be a better solution. Isn't it?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-15T13:07:04.350

If you only want to do a computation on one or a few columns you can use `transform` or simply do index it manually:

```
# with transfrom:
df <- data.frame(A = 1:10, B = 1:10)
df <- transform(df, A = A*1000)

# Manually:
df <- data.frame(A = 1:10, B = 1:10)
df$A <- df$A * 1000 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-08-29T18:12:44.040

The following code will apply the desired function to the only the columns you specify. I'll create a simple data frame as a reproducible example.

```
(df <- data.frame(x = 1, y = 1:10, z=11:20))
(df <- cbind(df[1], apply(df[2:3],2, function(x){x*1000}))) 
```

Basically, use `cbind()` to select the columns you don't want the function to run on, then use `apply()` with desired functions on the target columns.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-08-16T19:26:43.530

In `dplyr` we would use `mutate_at` in which you can select or exclude (by preceding variable name with "-" minus sign) specific variables. You can just name a function

`df <- df %>% mutate_at(vars(columnA), scale)`

or create your own

`df <- df %>% mutate_at(vars(columnA, columnC), function(x) {do this})`

# java - 休眠 session.get 返回 null

> ID：13398002
> 
> 赞同：4
> 
> 时间：2012-11-15T13:00:07.680
> 
> 标签：java, hibernate, hibernate-session

我有这样的代码：

```
Session session = HibernateSessionFactory.sessionFactory.openSession();

    System.out.println("------------------" + session.get(User.class, (long) 10));
    System.out.println("------------------" + session.createSQLQuery("SELECT  * FROM  diploma.tbl_users Where id = 10").addEntity(User.class).uniqueResult()); 
```

第一行返回 null。
第二个返回有效记录。

但如果我换个地方：

```
System.out.println("------------------" + session.createSQLQuery("SELECT  * FROM  diploma.tbl_users Where id = 10").addEntity(User.class).uniqueResult());
    System.out.println("------------------" + session.get(User.class, (long) 10)); 
```

两行都返回正确的结果：

这是我的休眠会话工厂：

```
public class HibernateSessionFactory {

public static SessionFactory sessionFactory = new Configuration().configure("/META-INF/hibernate.cfg.xml")
        .buildSessionFactory();

 } 
```

为什么`session.get(User.class, (long) 10))`返回 null ？

**更新** 休眠配置：

```
<hibernate-configuration>
<session-factory>

    <property name="hibernate.connection.driver_class">com.mysql.jdbc.Driver</property>
    <property name="hibernate.connection.url">jdbc:mysql://localhost:3306/diploma</property>
    <property name="hibernate.connection.username">root</property>
    <property name="hibernate.connection.password">password</property>
    <property name="hibernate.dialect">org.hibernate.dialect.MySQL5InnoDBDialect</property>
    <property name="hibernate.connection.charSet">UTF-8</property>
    <property name="hibernate.hbm2ddl.auto">update</property>

    <property name="show_sql">true</property>
    <property name="format_sql">true</property>

    .........................................
    <mapping class="edu.test.entities.User" />
            ..................................

</session-factory> 
```

用户.java

```
@Entity
@Table(name = "tbl_Users")
public class User extends BaseEntity {

@NotEmpty
@Column(name = "Name")
private String name;

@NotEmpty
@Column(name = "Surname")
private String surname;

@NotEmpty
@Column(name = "Login")
private String login;

@NotEmpty
@Size(min=6, max=20)
@Column(name = "Password")
private String password;

@NotEmpty
@Column(name = "Email")
private String email;

@NotEmpty
@Column(name = "Phone")
private String phone;

@ManyToOne
@JoinColumn(name = "Role", nullable = false)
private Roles role;

    // getters and setters 
```

来自基本实体的 ID 字段

```
 @MappedSuperclass
   public class BaseEntity implements Serializable {    
    @Id
@Column(name = "id", unique = true, nullable = false)
@GeneratedValue
private Long id; 
```

**更新 2** 问题出在映射文件中`@JoinColumn(name = "Role", nullable = false) private Roles role;`，我已指定角色不能为空，并且我尝试使用 id 10 检索的记录具有空角色外键。所以我改变 `nullable = true`并且它起作用了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T13:21:12.263

Hibernate 实现了[身份映射 PoEAA 模式](http://en.wikipedia.org/wiki/Identity_map_pattern)，其中 Hibernate 会话扮演映射的角色。当您调用`.addEntity()`时，加载的实体将与 Hibernate 会话相关联。

然后，当您调用 Hibernate 会话的 get 方法时，它首先检查实体缓存并返回现有实体（如果存在）。

因此，在您调用`get`实体的第一条语句中，实体映射中还没有出现。在第二个片段中，实体正在使用`.addEntity()`方法进行缓存。

**更新**所以问题是对角色的引用是用 声明的`nullable = false`，并且数据库中没有这样的角色。

另见：[http ://martinfowler.com/eaaCatalog/identityMap.html](http://martinfowler.com/eaaCatalog/identityMap.html)

# shopify - shopify api：计算总运费

> ID：13398003
> 
> 赞同：3
> 
> 时间：2012-11-15T13:00:07.850
> 
> 标签：shopify

有一个很好的帮手 -`shipping_price`可用于液体模板（用于订购）。返回总订单运费（希望如此）。我如何通过 API 获得相同的结果？

我应该通过订单`order.shipping_lines`并总结他们`price`吗？这是正确的方法吗？

**编辑**

或者，也许，`order.subtotal_price`+ `order.total_tax`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T13:52:51.570

如果您只想要运输价格，那么将运输线价格相加是正确的方法。

目前，每个订单只有一条运输线，但它被构建为一个阵列，以适应这种情况的潜在变化。

# sql - 查找分组 SUM 的 MAX

> ID：13398005
> 
> 赞同：1
> 
> 时间：2012-11-15T13:00:11.547
> 
> 标签：sql, oracle, aggregation

我有这个代码，它给我总结了每部电影的售票座位：

```
SELECT mName, SUM(soldSeats)
FROM movie, show, prog
WHERE movie.movieID = prog.movieID
AND prog.showID = show.showID
GROUP BY mName 
```

问题是要找到售出座位数最多的电影，我试图添加这个，但只得到没有行：

```
HAVING SUM(soldseats) = (SELECT MAX(SUM(soldseats)) FROM show
GROUP BY solgteplasser) 
```

有人有建议吗？以下是表格的外观：[活动总和](https://stackoverflow.com/questions/13380512/sum-of-a-activity)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T13:13:43.057

```
Select test.* 
from 
(Select movie.mName, SUM(show.soldSeats) as soldseatsum
FROM movie, show, prog
WHere movie.movieId = prog.movieID
AND prog.showID = show.showID
Group by movie.mName
Order by soldseatsum DESC) test
Where rownum<=1 
```

通过这种方式，您可以按 SUM 降序排列您的选择，并且您仅使用 Rownum 选择第一行，这是具有最高 SUm 的行。

编辑：另外，如果你的 SUM 列中有 Null，请确保在 ORder By 之后添加一个 NULLS LAST，如下所示：

```
.....
.....
Group by movie.mName
    Order by soldseatsum DESC NULLS LAST) test
    Where rownum<=1 
```

# java - 如何在java中将Applet添加到JPanel

> ID：13398009
> 
> 赞同：1
> 
> 时间：2012-11-15T13:00:23.627
> 
> 标签：java, swing, applet

嗨，我正在做一个项目，我偶然发现了一个问题，我似乎无法将 Applet 添加到 JPanel。人们一直告诉我它是一个组件，我可以将它添加到 JPanel 但它没有显示给我。我在这方面遇到了很多麻烦，感谢您提供任何帮助:)。

如果你想要这里是代码（这个代码是例子不是我的项目）：

```
 import java.applet.Applet;
import java.awt.Color;
import java.awt.Dimension;
import java.awt.event.WindowAdapter;
import java.awt.event.WindowEvent;
import java.io.DataInputStream;
import java.io.FileOutputStream;
import java.io.IOException;
import java.io.InputStream;
import java.net.URL;
import java.net.URLClassLoader;
import java.net.URLConnection;
import java.util.regex.Matcher;
import java.util.regex.Pattern;

import javax.swing.JFrame;
import javax.swing.JPanel;

public class Main {

    public static void main(String artgs[]) throws Exception {
        String source = getPageSource(new URL(
                "http://www.runescape.com/game.ws?j=1"));
        Matcher matcher = SOURCE_PATTERN.matcher(source);
        if (matcher.find()) {
            String first = matcher.group(1);
            String frameSource = getPageSource(new URL(first));
            matcher = ARCHIVE_PATTERN.matcher(frameSource);
            Matcher codeMatcher = CODE_PATTERN.matcher(frameSource);
            if (matcher.find() && codeMatcher.find()) {
                RSStub stub = new RSStub(PARAMETER_PATTERN, frameSource);
                URL world = new URL(first.substring(0, first.indexOf("/,")));
                stub.setCodeBase(world);
                stub.setDocumentBase(world);
                String archive = matcher.group(1);
                System.out.println(world.toString() + "/" + archive);
                Download(world.toString() + "/", archive);
                URLClassLoader clazzes = new URLClassLoader(
                        new URL[] { new URL("" + world.toString() + "/"
                                + archive) });
                Class<?> clazz = clazzes.loadClass("Rs2Applet");
                final Applet applet = (Applet) clazz.newInstance();
                final JFrame frame = new JFrame();

                applet.setStub(stub);
                applet.init();
                applet.start();
                frame.addWindowListener(new WindowAdapter() {
                    @Override
                    public void windowClosing(WindowEvent e) {
                        applet.stop();
                        applet.destroy();
                        frame.dispose();
                        frame.setVisible(false);
                    }
                });
                JPanel panel = new JPanel();
                panel.setBackground(Color.black);
                panel.setPreferredSize(new Dimension());
                panel.add(applet);
                frame.add(panel);
                frame.pack();
                frame.setVisible(true);
            }
        }
    }

    private static String getPageSource(URL url) throws IOException,
            InterruptedException {
        URLConnection c = url.openConnection();
        c.addRequestProperty(
                "Accept",
                "text/xml,application/xml,application/xhtml+xml,text/html;q=0.9,text/plain;q=0.8,image/png,*/*;q=0.5"); // /By
                                                                                                                        // wyn10
        c.addRequestProperty("Accept-Charset", "ISO-8859-1,utf-8;q=0.7,*;q=0.7");
        c.addRequestProperty("Accept-Encoding", "gzip,deflate");
        c.addRequestProperty("Accept-Language", "en-gb,en;q=0.5");
        c.addRequestProperty("Connection", "keep-alive");
        c.addRequestProperty("Host", "www.runescape.com");
        c.addRequestProperty("Keep-Alive", "300");
        c.addRequestProperty("User-Agent",
                "Mozilla/5.0 (Windows NT 6.1; rv:9.0.1) Gecko/20100101 Firefox/9.0.1");
        DataInputStream di = new DataInputStream(c.getInputStream());
        byte[] tmp = new byte[c.getContentLength()];
        di.readFully(tmp);
        di.close();
        return new String(tmp);
    }

    public static void Download(String world, String archive) throws Exception {
        URLConnection jarConnection = new URL(world + archive).openConnection();
        FileOutputStream out = new FileOutputStream("./gamepack.jar");
        InputStream input = jarConnection.getInputStream();
        byte[] tmp = new byte[1024];
        int read;
        while ((read = input.read(tmp)) != -1) {
            out.write(tmp, 0, read);
        }
    }

    public static final Pattern SOURCE_PATTERN = Pattern
            .compile("src=\"(.*)\" ");

    public static final Pattern ARCHIVE_PATTERN = Pattern
            .compile("archive=(.*) ");

    public static final Pattern CODE_PATTERN = Pattern.compile("code=(.*) ");

    public static final Pattern PARAMETER_PATTERN = Pattern
            .compile("<param name=\"([^\\s]+)\"\\s+value=\"([^>]*)\">");
} 
```

## 存根

```
import java.applet.AppletContext;
import java.applet.AppletStub;
import java.net.URL;
import java.util.HashMap;
import java.util.Map;
import java.util.regex.Matcher;
import java.util.regex.Pattern;

public class RSStub implements AppletStub {

    private URL documentBase;

    private URL codeBase;

    public void setDocumentBase(URL documentBase) {
        this.documentBase = documentBase;
    }

    public void setCodeBase(URL codeBase) {
        this.codeBase = codeBase;
    }

    public String[] keys = new String[2];

    private Map<String, String> parameters = new HashMap<String, String>();

    public RSStub(Pattern parameterPattern, String frameSource) {

        Matcher param = parameterPattern.matcher(frameSource);
        while (param.find()) {
            String key = param.group(1);
            String value = param.group(2);
            parameters.put(key, value);
            if (key.equals("0") || key.equals("-1")) {
                switch (key) {
                case "0":
                    keys[0] = key;
                case "-1":
                    keys[1] = key;
                }
                System.out.println("\t-> Client Deobfucation Key " + key
                        + " is " + value);
            }
        }
    }

    public String[] getDeobfucationKeys() {
        return keys;
    }

    public URL getDocumentBase() {
        return documentBase;
    }

    public URL getCodeBase() {
        return codeBase;
    }

    public String getParameter(String name) {
        return parameters.get(name);
    }

    public AppletContext getAppletContext() {
        return null;
    }

    public void appletResize(int width, int height) {
    }

    @Override
    public boolean isActive() {
        return true;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T18:28:57.847

`JFrame`和一样`JDialog`，`JApplet`是一个 Swing[顶级容器](http://docs.oracle.com/javase/tutorial/uiswing/components/toplevel.html)。您可以利用[此处](https://stackoverflow.com/a/12449949/230513)引用的示例中显示的混合方法。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-15T13:13:57.957

如果所需的功能是将小程序添加到您的面板，那么您可以执行以下操作：

```
getContentPane().add(); 
```

但首先你必须扩展applet 或jApplet。

这应该工作。

# java - 如何理解Full GC日志？

> ID：13398010
> 
> 赞同：7
> 
> 时间：2012-11-15T13:00:27.117
> 
> 标签：java, garbage-collection

我目前在 PROD 中看到以下内容：

```
5429.779: [Full GC [PSYoungGen: 13809K->0K(505216K)] [PSOldGen: 253802K->245481K(319488K)] 267612K->245481K(824704K) [PSPermGen: 70059K->70059K(118784K)], 0.5869143 secs] [Times: user=0.59 sys=0.00, real=0.59 secs] 
```

我理解 A->B(C) 的意思是：A，在 gc 之前，B 在 gc 之后，C 没有tenured 和 perm 的堆

我不明白的是一块（在所有 []s 之外），它是`267612K->245481K(824704K)`. 它指的是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T13:45:07.843

我可以建议您使用工具而不是手动阅读日志。

试试[HPJmeter](https://h20392.www2.hp.com/portal/swdepot/displayProductInfo.do?productNumber=HPJMETER)工具

我觉得这个工具最好。休息有这么多工具。参考：[知道任何Java垃圾收集日志分析工具吗？](https://stackoverflow.com/questions/541832/know-of-any-java-garbage-collection-log-analysis-tools)

一般来说，根据我的经验，使用像上面这样简单地导入 GC 日志文件并为不同代提供详细图表的工具总是更好。如果你去手动阅读，那么你的时间将更多地投入阅读而不是性能分析。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-15T13:01:35.863

它是代的总数，表示实际内存中的组合堆使用情况和总堆大小（显示在大括号中）。

在给定的示例中，`[PSYoungGen: 13809K->0K(505216K)] [PSOldGen: 253802K->245481K(319488K)] 267612K->245481K(824704K)`：

```
13809K + 253802K = 267612K

0K + 245481K = 245481K

505216K + 319488K = 824704K 
```

# jquery - MVC4 中的 jQuery.Validate

> ID：13398013
> 
> 赞同：0
> 
> 时间：2012-11-15T13:00:42.403
> 
> 标签：jquery, asp.net-mvc, asp.net-mvc-4, jquery-validate

我想在 MVC4 项目中使用 jQUery.validate。我有一个向导设置（来自 stepy），我有 6 个步骤要完成。在每一步我都想添加验证。现在验证一直有效，直到我使用复选框。在第 2 步，我有一个复选框。然后，当我想继续执行第 3 步时，它给了我错误：无法读取未定义的属性名称。

当我删除复选框时，一切正常。此外，当我运行 HTML 时，它可以工作，但如果我将它放入 MVC 剃须刀中，它会失败。

任何帮助表示赞赏。

谢谢

这是 HTML + jQuery：

```
<!DOCTYPE html>

<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="-1">

    <title>jQuery Stepy - A Wizard Plugin</title>

    <link type="text/css" rel="stylesheet" href="css/jquery.stepy.css" />
    <script type="text/javascript" src="js/jquery-1.8.2.js"></script>
    <script type="text/javascript" src="js/jquery.validate.min.js"></script>
    <script type="text/javascript" src="js/jquery.stepy.min.js"></script>
<script type="text/javascript">
        $(function() {

            $('#custom').stepy({
                backLabel:  'Backward',
                block:      true,
                errorImage: true,
                nextLabel:  'Forward',
                titleClick: true,
                validate:   true
            });

            // Optionaly
            $('#custom').validate({
                 rules: {
                    'checked':      'required',
                }, messages: {

                    'checked':  { required:  'error' },
                             }
            });
        });
    </script>

</head>
<body>
    <div id="header">

    </div>

    <div id="content">

        <form id="custom">
            <fieldset title="Thread 1">
                <legend>description one</legend>

                <label>User:</label>
                <!-- Hidden fields are not focused.  -->
                <input type="hidden" name="hidden" />

                <!-- Disabled fields are not validated.  -->
                <input type="text" value="wbotelhos" size="40" name="user" disabled="disabled" />

                <label>E-mail:</label>
                <input type="text" size="40" name="email" />
                <input type="checkbox" name="checked" /> Checked?

                <label>Naa:</label>
                <input type="text" size="40" name="Naam" />

                <label>Newsletter?</label>
                <input type="radio" name="newsletter" /> Yep
                <input type="radio" name="newsletter" /> Nop

                <label>Password:</label>
                <input type="password" name="password" size="40" />
            </fieldset>

            <fieldset title="Thread 2">
                <legend>description two</legend>

                <label>Nick Name:</label>
                <input type="text" size="30" />

                <label>Bio:</label>
                <textarea name="bio" rows="5" cols="60"></textarea>
            </fieldset>

            <fieldset title="Thread 3">
                <legend>description three</legend>

                <label>Birthday:</label>
                <select name="day">
                    <option></option>
                    <option>23</option>
                </select>

                <select>
                    <option>10</option>
                </select>

                <select>
                    <option>1984</option>
                </select>

                <label>Site:</label>
                <input type="text" name="site" size="40" />
            </fieldset>

            <input type="submit" class="finish" value="Finish!" />
        </form><br/>

</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T20:47:19.140

问题中的代码缺少结束 div 标记。

除此之外没有任何问题。这个问题是[github 上 stepy 的一个例子，](https://github.com/wbotelhos/stepy/blob/master/index.html)它似乎确实适用于复选框。我会尝试让示例正常工作并检查您是否引用了所有 js 文件。

# javascript - 无法在鼠标输入时使用 jquery 将焦点设置为下拉列表

> ID：13398019
> 
> 赞同：5
> 
> 时间：2012-11-15T13:00:54.850
> 
> 标签：javascript, jquery, html, css, jquery-ui

这是我的html代码

```
 <div id="mnc"> hello
</div>
<div id="slpt">
    <select id="slt">
        <option value="0">Option1</option>
        <option>Option2</option>
        <option>Option3</option>
        <option>Option4</option>
        <option>Option5</option>
</select>
</div> 
```

这是我的jQuery代码

```
 $(document).ready(function(){
 $('#mnc').bind({
  mouseenter: function(e) {    
     $('#slt').attr('selected', 'Option1');        
  }
 });
}); 
```

[这是jsfiddle](http://jsfiddle.net/fzpN4/)上的工作模型

问题：在我单击下拉列表但不选择一个元素后，我将鼠标悬停在上面 div 中的 hello 文本上。我希望在鼠标悬停时将下拉列表设置为默认 Option1。但它不起作用。任何人都可以对出了什么问题有所了解。

**编辑：** 以下是我将鼠标悬停在 hello 文本上时的条件。我没有选择 Option4 ![在此处输入图像描述](../Images/eac5ce1f1110d7c5a60cc182768101e8.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T13:15:03.420

你也可以试试这段代码：

```
$(document).ready(function(){
 $('#mnc').bind({
  mouseenter: function(e) {

      $("#slt").find('option:first').attr('selected', 'selected');
  }
 });
});
​ 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-15T13:10:57.817

你可以这样做

```
$(document).ready(function(){
 $('#mnc').bind({
  mouseenter: function(e) {    
     $('#slt').val('Option1');        
  }
 });
}); 
```

[演示](http://jsfiddle.net/fzpN4/5/) ​</p>

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-15T13:06:11.687

你不穿`selected="option1"`，`<select>`你`selected="selected"`穿`<option>`

像[这样](http://jsfiddle.net/fzpN4/1/)

```
$(document).ready(function(){
 $('#mnc').bind({
  mouseenter: function(e) {    
      $('#slt option:first-child').attr('selected', 'selected');        
  }
 });
}); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-11-15T13:07:13.557

只需使用：

```
$('#slt').val('0'); 
```

选择选项。

[http://jsfiddle.net/fzpN4/4/](http://jsfiddle.net/fzpN4/4/)

```
$(document).on("mouseenter","#mnc",function(e) {
    $('#slt').val('0');
}); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-05-08T13:55:40.057

```
$(document).ready(function(){
$('#mnc').bind({
  mouseenter: function(e) {    
    $('#slt').val('0').focus(); // it will set focus on first option.        
  }
 });
}); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-11-16T08:55:54.400

好的，这是我的问题的工作模型这是 html 代码

```
 <div id="mnc"> hello
</div>
<div id="slpt">
    <select id="slt">
        <option value="0">Option1</option>
        <option>Option2</option>
        <option>Option3</option>
        <option>Option4</option>
        <option>Option5</option>
</select>
</div> 
```

这是Jquery代码

```
 $(document).ready(function(){
 $('#mnc').mouseover(function() {
            $('select').hide().blur().show();
        });
}); 
```

这是在[jsfiddle](http://jsfiddle.net/uqFHr/)

# django - Django (1.3) Admin中的自定义过滤器

> ID：13398020
> 
> 赞同：0
> 
> 时间：2012-11-15T13:00:55.817
> 
> 标签：django, django-admin

如何在 Django Admin 中添加一个过滤器，该过滤器应该在模型仪表板右侧显示的过滤器中给出过滤结果。

更清楚 ：

```
class County (models.Model):
    status = models.CharField(max_length = 255, blank = True)
    name = models.CharField(max_length = 255, blank = True)

class County_info (models.Model):
   county = models.ForeignKey(County)
   city  = models.CharField(max_length = 255, blank = True)
   state = models.CharField(max_length = 255, blank = True)
   ......
   ...... 
```

在我的 adim.py 中，我必须为状态为“生产”的字段“县”显示模型“县信息”的过滤器。

```
list_filter = ['county__name', ] # will Show all data in that table. I need onlt the data which has status= 'production' 
```

我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T18:06:36.730

几天前我遇到了同样的问题，我发现只有使用 1.4 才有可能：[Admin filter documentation](https://docs.djangoproject.com/en/dev/ref/contrib/admin/#django.contrib.admin.ModelAdmin.list_filter)

# spring - Maven/Spring：生成的WAR自动测试运行

> ID：13398021
> 
> 赞同：1
> 
> 时间：2012-11-15T13:00:57.347
> 
> 标签：spring, testing, maven, war

假设我们有一个由一些 Eclipse 项目和 Spring 3.1 组成的项目，最终结果是一个 WAR 文件。我们使用 WTP 进行开发。所有的单元测试和集成测试都在工作（我们的 Maven 会自动完成）。该项目在具有本地配置的 WTP 中运行。换句话说，一切看起来都准备好了。

现在我们要测试使用不同平台的不同配置文件集运行该 WAR 文件。测试应该只启动上下文并查看是否会导致任何问题（属性文件中缺少/拼写错误的属性，用于自动装配的太多 bean，...）。AFAIK 没有必要访问（或访问）外部世界。基本上它应该只启动上下文，关闭它并继续下一个配置。如果一个上下文失败，构建应该会中断。

我们应该怎么做？我们可以用 Maven 做到这一点吗？外部的东西？

编辑：忘了说：我们将使用 Tomcat 6 运行我们的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T19:50:50.870

听起来你在谈论集成测试。你应该看看这个故障安全插件： [http ://maven.apache.org/surefire/maven-failsafe-plugin/usage.html](http://maven.apache.org/surefire/maven-failsafe-plugin/usage.html)

> 使用 jetty 和 maven-failsafe-plugin 您需要将 jetty:run、jetty:run-exploded 或 jetty:run-war 之一绑定到 pre-integration-test 阶段，并将 deamon 设置为 true，将 failsafe:integration-test 绑定到集成测试阶段，将 jetty:stop 绑定到集成测试后阶段，最后将 failsafe:verify 绑定到验证阶段。这是一个例子：

另一种可能性是硒测试。Selenium 测试要求在运行测试之前部署和运行战争。所以有插件可以做到这一切。然后你会有一个非常简单的 selenium 测试用例，它只是向应用程序发出一个简单的 http 请求以查看它是否正在运行。

您将为要测试的每个不同配置使用不同的配置文件。

# matlab - 是否可以通过matlab查询搜索引擎？

> ID：13398024
> 
> 赞同：2
> 
> 时间：2012-11-15T13:01:01.907
> 
> 标签：matlab, yahoo

我想知道是否可以通过 matlab 查询搜索引擎。我想通过 matlab 获取某个查询的点击量。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T13:16:07.643

尝试

```
S = urlread('https://www.google.com/search?q=test'); 
```

这将在使用关键字“test”查询时返回由 Google 吐出的 HTML。然后你可以做类似的事情

```
% search engine specific filter for no. of results
results = regexpi(S, 'About [0-9_\,]* results', 'match'); 

% parse further or error out
if ~isempty(results)    
    results = textscan(results{1}, '%s'); % tokenize string
    results = str2double(results{2}); % number of results
else
    error('Something went wrong during the query.');
end 
```

请注意，这`urlread`需要运行 Java，所以显然在使用启动选项运行时您不能这样做`-nojvm`（我的第一次尝试：）

# java - HBase中二级浮点索引的排序顺序

> ID：13398025
> 
> 赞同：1
> 
> 时间：2012-11-15T13:01:14.937
> 
> 标签：java, floating-point, indexing, hbase, endianness

我正在尝试在 HBase 中实现类似搜索引擎的东西。除了这确实是一个好主意（找出这样做的原因）之外，我还需要支持对浮点值的“范围查询”。创建倒排索引将是执行此操作的默认方法，将浮点值映射到单独数据结构中的行键。然而，为了让它作为索引工作，我需要能够从范围的低点到高点发出扫描（至少，这是我目前的理论）。

当 HBase 按字节数组排序时，使用浮点数开始行键不会给我一个可用的索引，只要浮点数的字节表示中的第一个位是 1 表示负值，0 表示正值值（不符合浮点值顺序）。因此，我不知道如何创建这个索引。

我对此采取了一种愚蠢的方法，还是以下一种方法会更好？

将浮点数转换为两个整数值，一个在小数点之前，一个在小数点之后：

```
BigDecimal[] doubleValue = 
    new BigDecimal((Double) value).divideAndRemainder(BigDecimal.ONE);
byte[] valueBytes = new byte[16];
System.arraycopy(Bytes.toBytes(doubleValue[0].longValue()), 0, valueBytes, 0, 8);
System.arraycopy(Bytes.toBytes(doubleValue[1].longValue()), 0, valueBytes, 8, 8); 
```

以某种方式说服 HBase 为行键使用自定义比较器（不知道如何执行此操作）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T00:00:32.523

如果您希望 hbase 对它们进行正确排序，则需要使用不同的方法将值序列化为 byte[]。查看[https://github.com/ndimiduk/orderly](https://github.com/ndimiduk/orderly)。或者，我相信 Lily 库也可以做到这一点。

# google-play - 如何自动化 Googleplay 每月支付报告？

> ID：13398029
> 
> 赞同：3
> 
> 时间：2012-11-15T13:01:19.087
> 
> 标签：google-play, merchant-account, google-play-services

关于访问 googleplay 支付报告 api，下载每月支付报告，google 提供 api
[https://developers.google.com/checkout/developer/Google_Checkout_XML_API_Order_Report_API](https://developers.google.com/checkout/developer/Google_Checkout_XML_API_Order_Report_API)

但是这个 api 需要 Merchant key。但是在我们的商家账户中我看不到merchant_key，所以我无法下载基于上述api的支付报告。

像 Apple 的 AutoIngestion.class 一样，是否有任何 Google play Api 可以下载特定商家帐户的报告。？

我们的项目需要自动下载月度销售报告。可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-08T13:10:04.520

您是否尝试过[gsutil 工具](https://developers.google.com/storage/docs/gsutil)？据此，[它](https://support.google.com/googleplay/android-developer/answer/2482017?hl=en)用于自动下载销售和支付报告。

# java - Java SE 1.7 中的原始类型二叉搜索树问题

> ID：13398030
> 
> 赞同：2
> 
> 时间：2012-11-15T13:01:22.340
> 
> 标签：java, generics, compare, binary-search-tree

我正在尝试构建一个原始类型`BST`，使用`Comparable<T>`. 问题是我的声明做错了什么，因为我在`Node`类类型中使用`Comparable<type>`并且在`BST`类中使用错误

```
The method setParent(Node<Comparable<Comparable<type>>>) in the type
Node<Comparable<type>> is not applicable for the arguments (Node<Comparable<type>>)
BinarySearchTree.java   /lab2/src   line 22 Java Problem 
```

**`Node.java`：**

```
public class Node <type> {

    private Comparable<type> key;
    private Node <Comparable<type>> parent;
    private Node <Comparable<type>> leftChild;
    private Node <Comparable<type>> rightChild;

    public Node(Comparable<type> key, Node <Comparable<type>> leftChild, Node <Comparable<type>> rightChild) {
        this.setKey(key);
        this.setLeftChild(leftChild);
        this.setRightChild(rightChild);
    }

    public void setKey(Comparable<type> key) {
        this.key = key;
    }

    public Comparable<type> getKey() {
        return key;
    }

    public void setParent(Node<Comparable<type>> y) {
        this.parent =  y;
    }

    public Node <Comparable<type>> getParent() {
        return parent;
    }

    public void setLeftChild(Node <Comparable<type>> leftChild) {
        this.leftChild = leftChild;
    }

    public Node <Comparable<type>> getLeftChild() {
        return leftChild;
    }

    public void setRightChild(Node <Comparable<type>> rightChild) {
        this.rightChild =  rightChild;
    }

    public Node <Comparable<type>> getRightChild() {
        return rightChild;
    }
} 
```

**`BinarySearchTree.java`：**

```
import java.util.Iterator;

public class BinarySearchTree<type> implements SortedSet<type> {

    private Node <Comparable<type>> root;

    public void insert(Node <Comparable<type>> z) {

        Node <Comparable<type>> y = null;
        Node <Comparable<type>> x = root;

        while (x != null) {
            y = x;

            if (z.getKey() < x.getKey()) { // ERROR '<' is undefined for type...
                x = x.getLeftChild();      // PARAM TYPE ERROR
            } else {
                x = x.getRightChild();     // PARAM TYPE ERROR
            }
        }

        z.setParent(y);

        if (y == null) {
            root = z;
        } else if (z.getKey() < y.getKey()) {
            y.setLeftChild(z);
        } else {
            y.setRightChild(z);
        }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T14:06:30.593

考虑重构为以下代码

```
import java.util.SortedSet;

public abstract class BinarySearchTree<T extends Comparable<T>> implements SortedSet<T> {
  private Node<T> root;

  class Node<T extends Comparable<T>> {

    private T key;
    private Node<T> parent;
    private Node<T> leftChild;
    private Node<T> rightChild;

    public Node(T key, Node<T> leftChild, Node<T> rightChild) {
      this.setKey(key);
      this.setLeftChild(leftChild);
      this.setRightChild(rightChild);
    }

    public void setKey(T key) {
      this.key = key;
    }

    public T getKey() {
      return key;
    }

    public void setParent(Node<T> y) {
      this.parent =  y;
    }

    public Node <T> getParent() {
      return parent;
    }

    public void setLeftChild(Node <T> leftChild) {
      this.leftChild = leftChild;
    }

    public Node <T> getLeftChild() {
      return leftChild;
    }

    public void setRightChild(Node <T> rightChild) {
      this.rightChild =  rightChild;
    }

    public Node <T> getRightChild() {
      return rightChild;
    }
  }

  public void insert(Node<T> z) {

    Node<T> y = null;
    Node<T> x = root;

    while (x != null) {
      y = x;

      if (z.getKey().compareTo(x.getKey()) < 0) {
        x = x.getLeftChild();
      } else {
        x = x.getRightChild();
      }
    }

    z.setParent(y);

    if (y == null) {
      root = z;
    } else if (z.getKey().compareTo((T) y.getKey()) <0) {
      y.setLeftChild(z);
    } else {
      y.setRightChild(z);
    }
  }
} 
```

# android - 将 GestureLibrary 与 ScrollView 一起使用

> ID：13398036
> 
> 赞同：9
> 
> 时间：2012-11-15T13:01:43.727
> 
> 标签：android, gesture, gesture-recognition

正如我在标题中提到的，app 也有 a`ScrollView`和 a `GestureDetector`。在 ScrollView 的触摸事件之外，GestureDetector 处理从左到右和从右到左的滑动操作。他们都运作良好。

现在我想在`GestureLibrary`Activity 中添加一个 -I mean raw-。我查看了不同的来源并以某种方式正确添加。简而言之，布局如下所示：

```
<android.gesture.GestureOverlayView
    android:id="@+id/gOverlay"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <ScrollView 
        android:id="@+id/content_scroll"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:scrollbars="none">

            </ScrollView>
            <!-- Other views -->
</android.gesture.GestureOverlayView> 
```

它按照我的意愿绘制（黄线），但它没有触发任何方法。这里我是如何实现的`OnGesturePerformedListener`：

```
 /*
     * Gestures
     */
    gLibrary = GestureLibraries.fromRawResource(this, R.raw.gestures);
    if (!gLibrary.load()) { finish(); }
    GestureOverlayView gestureOverlayView = (GestureOverlayView) findViewById(R.id.gOverlay);
    gestureOverlayView.addOnGesturePerformedListener(gestureListener); 
```

这是`gestureListener`：

```
private OnGesturePerformedListener gestureListener = new OnGesturePerformedListener() {
    public void onGesturePerformed(GestureOverlayView overlay, Gesture gesture) {
        ArrayList<Prediction> predictions = gLibrary.recognize(gesture);            
        if (predictions.size() > 1) {
            for(Prediction prediction: predictions){
                Log.d("Test", "Looking for gestures");
            }
        }
    }
}; 
```

就这样。在墙上，我在不同的 Activity 中尝试了这个源代码，它没有 ScrollView 并且工作正常。

最后，我不确定是不是关于 GestureDetector，所以这就是应用程序使用检测器的方式：

```
public boolean dispatchTouchEvent(MotionEvent ev) {
    if (detector != null) {
        if (detector.onTouchEvent(ev)) {
            return true;
        }
    }
    return super.dispatchTouchEvent(ev);
} 
```

我的`SwipeDetector`：

```
private class SwipeDetector extends SimpleOnGestureListener {
    private static final int SWIPE_MIN_DISTANCE = 120;
    private static final int SWIPE_MAX_OFF_PATH = 250;
    private static final int SWIPE_THRESHOLD_VELOCITY = 200;
    public boolean onFling(android.view.MotionEvent e1, android.view.MotionEvent e2, float velocityX, float velocityY) {
        if( Math.abs( e1.getY() - e2.getY() ) > SWIPE_MAX_OFF_PATH ) { return false; }
        if( e1.getX() - e2.getX() > SWIPE_MIN_DISTANCE && Math.abs( velocityX ) > SWIPE_THRESHOLD_VELOCITY ) { return false; }
        if( e2.getX() - e1.getX() > SWIPE_MIN_DISTANCE && Math.abs( velocityX ) > SWIPE_THRESHOLD_VELOCITY ) {  filterButton.performClick();return true; }          
        return false;
    }
} 
```

我的方法有什么问题？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-19T07:51:16.917

android 中的所有触摸事件都是从孩子到父母的。因此，滚动视图处理所有触摸事件，而您的手势检测器不会接收它们。您可以在以下位置设置触摸侦听器`ScrollView`：

```
 scrollView.setOnTouchListener(new OnTouchListener() {
        @Override
        public boolean onTouch(View v, MotionEvent event) {
            if (detector != null) {
                return detector.onTouchEvent(event);
            return false;
        }
    }); 
```

您必须根据需要检查滚动是否有效，并且您没有消耗滚动事件。

# asp.net - 如何使用asp.net c#获取datgrid中列的值

> ID：13398037
> 
> 赞同：-3
> 
> 时间：2012-11-15T13:01:44.430
> 
> 标签：asp.net, sql, c#-4.0, datagrid

这是有效的代码。它在循环中删除网格中的最后一行数据，但有些我无法选择单行值来删除 Datagrid 中的特定选定行。

```
enter code here
    String Name1;
protected void DataGrid1_DeleteCommand(object source, DataGridCommandEventArgs e)
{
    DataGridItem dataGridItem;

    foreach (DataGridItem dataGridItem in DataGrid1.Items)
    {
        String Name = dataGridItem.Cells[2].Text;
        Label1.Text = Name;
        Name1=Name;
    }
    con.Open();
    SqlCommand cmd = new SqlCommand("delete from salaryentry where levelnno='" + Name1 + "'", con);

    cmd.ExecuteNonQuery();
    con.Close();
    databind();

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T18:19:20.850

使用它来选择行并打印到文本框中，并使用 delete 命令删除行：

```
private void dataGridView1_CellContentClick(object sender, DataGridViewCellEventArgs e)
{
    textBox1.Text = dataGridView1[0, e.RowIndex].Value.ToString();
} 
```

# python - 将方法输出输入到类对象中

> ID：13398038
> 
> 赞同：0
> 
> 时间：2012-11-15T13:01:46.137
> 
> 标签：python

我正在尝试将生成的数据直接输入`domeinnaamemailadres()`到特定的类对象中，例如`a`. 我希望将数据输入到 domeinnaam 属性中。我该怎么做？

```
class Customer:
    "De klasse customer"

    def __init__(self, naam, adres, woonplaats, email, domeinnaam= ""):
        self.naam = naam
        self.adres = adres
        self.woonplaats = woonplaats
        self.email = email
        self.domeinnaam = domeinnaam      

    def domeinnaamemailadres(self):
        c = self.email[self.email.find("@"):]

a = Customer('Name1', 'address', 'Utrecht', 'Email1@hotmail.com', domeinnaamemailadres)
b = Customer('Name2', 'Bonestaak', 'Maarssen', 'Bijjaapishetaltijdraakhotmail.com') 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T13:11:20.997

您不能以这种方式调用该方法，因为调用它时该实例不存在。

可能你想做类似的事情：

```
class Customer:
    "De klasse customer"

    def __init__(self, naam, adres, woonplaats, email, domeinnaam= ""):
        self.naam = naam
        self.adres = adres
        self.woonplaats = woonplaats
        self.email = email
        self.domeinnaam = domeinnaam
        if not self.domeinnaam:
            #domeinnaam not provided, build one using self.email
            self.domeinnaam = self.domeinnaamemailadres()

    def domeinnaamemailadres(self):
        return self.email[self.email.find("@"):]

a = Customer('Name1', 'address', 'Utrecht', 'Email1@hotmail.com')
b = Customer('Name2', 'Bonestaak', 'Maarssen', 'Bijjaapishetaltijdraakhotmail.com') 
```

您可以避免`if`使用三元运算符的语句：

```
self.domainnaam = domeinnaam if domeinnaam else self.domeinnaamemailadres() 
```

我想对你的代码做一些评论。

1.  首先，尝试用英文写作。所以使用英文变量名。[`name`不是`naam`等]
2.  有些名字真的很晦涩。做什么`domeinnaamemailadres`？我会称它为`domain_name_from_email_address`.
3.  文档字符串`"De klasse customer"`完全没用。它不会`class Customer`在行中添加任何信息，也不是英文的。

为什么要写英文？首先是因为如果你不这样做，你怎么能在 StackOverflow 这样的地方寻求帮助呢？在这种特定情况下，代码很简单，无论如何我都能理解，但是如果事情变得复杂，那么我将无法获得您想要做的事情。

其次，英语是计算机科学*的*语言。只要你写的东西被别人读到的可能性很小，你就必须*学习*和*使用它。*出于这个原因，我从不使用我的母语（意大利语）编写代码。即使你认为你永远不会向任何人展示代码，你可能总是会遇到一个错误并且需要向其他人询问（例如在 StackOverflow 或某些论坛/邮件列表上）并且他们*无能为力*你是因为他们一个字都不懂。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T13:13:54.553

为什么不改变这一行：

```
self.domeinnaam = domeinnaam 
```

对此：

```
self.domeinnaam = domeinnaam if domeinnaam else email[email.find("@"):] 
```

那里不需要另一个函数，您可以使用该参数，因为它仍在范围内。如果存在，这也会将参数分配`domeinnaam`给您的成员变量，否则它将使用`email`参数中的域名，从而允许您删除以下检查和功能。

# git - 如何仅获取特定分支的 Git 日志？

> ID：13398040
> 
> 赞同：6
> 
> 时间：2012-11-15T13:02:05.223
> 
> 标签：git, branch, git-branch, git-checkout, git-log

假设以下 Git 历史：

```
Branch1     B---C-------F---G
           /     \           \
Master    A-------D---E-------H 
```

执行*git log master会按照***ABCDEFGH**的顺序给出日志条目。- 但我对只有大师的历史感兴趣（即**ADEH**）

如何“摆脱”来自*Branch1*的不需要的日志条目？*我为git log*尝试了很多选项，但我找不到任何合适的...

* * *

这导致了我在这种情况下不理解的另一件事：

查看*git log master*给出的日志历史，它显示了我的分支 master 是如何演变的（**ABCDEFGH**）。

但是做一个*git checkout HEAD~1* (假设 master=HEAD) 给了我**E** (Evolution *HEAD~3* : **A** - *HEAD~2* : **D** - *HEAD~1* : **E** - *HEAD* : **H** -> **ADEH** )

这是我不明白的：看*git log的***H**的祖先是**G**，而看*git checkout的***H**的祖先是**E**。

 ********我不明白这个 - **H**的祖先是什么：**G**或**E**？...

* * *

**结论**：我想要的只是从*HEAD*到*HEAD~n的**git 日志*条目（例如上面的 n = 1...3）。如何做到这一点？有可能吗？

 *** * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-15T13:13:21.913

你正在寻找的是

```
git log --first-parent 
```

为什么这个选项被称为`--first-parent`回答你的问题

> 我不明白这个 - H：G 或 E 的祖先是什么？

答案是：**两者**。E 是第*一个 parent*，但 G 是*第二个 parent*，因为 H 是一个合并提交。合并提交是具有多个父项的提交。**********

# javascript - 如何使用动态参数在 javascript 中创建锚链接？

> ID：13398043
> 
> 赞同：1
> 
> 时间：2012-11-15T13:02:16.370
> 
> 标签：javascript, html, jsp

当用户单击另一个链接时，我正在尝试创建一个锚链接。
当我单击第一个链接时，会引发 onclick 事件并使用 JavaScript 生成另一个链接，但这不是正确生成的。

这是我在 JavaScript 中的锚链接：

```
temp="<li><a href='#' onclick='showMenu3('"+menu2[0]+"','"+menu2[2]+"')'>
      <img src='images/noImageSmall.png'/>"+menu2[2]+"</a></li>"; 
```

但它在源代码中生成如下：

```
 <li><a href="#" onclick="showMenu3(" 139','invite="" a="" friend')'="">
    <img src="images/noImageSmall.png">Invite a friend</a></li> 
```

如何使用 JavaScript 生成以下链接？

```
 <li><a href="#" onclick="showMenu3('139','invite friend')">
        <img src="images/noImageSmall.png">Invite a friend</a></li> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T13:21:14.870

我建议做更多这样的事情：

```
 function createMenuItem(menuItem) {
        var listItem = document.createElement('li');
        var link = document.createElement('a');
        var linkFunction = "showMenu3('"+menuItem[0]+"','"+menuItem[bar]+"')";
        var image = document.createElement('img');
            image.setAttribute('src', 'images/noImageSmall.png');

            listItem.appendChild(link);
            link.appendChild(image);
            link.appendChild(document.createTextNode(menuItem[2]));
            link.setAttribute('href', '#');
            link.setAttribute('onClick', linkFunction);

            return listItem;
    } 
```

您可能可以将它与类似的东西一起使用：

```
 document.getElementById('theMenu').appendChild(createMenuItem(menu2)); 
```

这可能会更长，但它也比将字符串连接在一起创建 html 更具可读性和可维护性。作为奖励，以这种方式创建无效的 html 结构也几乎是不可能的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T13:32:04.130

这将起作用：

```
var temp = '<li><a href="#" onclick="showMenu3(' + menu2[0] + ', \'' + menu2[2] + '\')"><img src="images/noImageSmall.png"/>' + menu2[2] + '</a></li>'; 
```

毫不奇怪，我同意其他人的观点，即这不是一个好习惯。它很容易出错，太容易生成无效标记（这将引入更多错误），您必须真正了解字符串连接。

我的首选方法是这样的：

```
var li = document.createElement('li'),
    a = document.createElement('a'),
    node = document.createTextNode(),
    img = document.createElement('img');
node.textContent = menu2[2];
img.src = "images/noImageSmall.png";
a.href = '#';
a.onclick = function(e) {
    var arg1 = menu2[0],
        arg2 = menu2[2];
    showMenu3(arg1, arg2);
    e = e || window.event;
    e.cancelBubble = true;
    if (e.stopPropagation) {
        e.stopPropagation();
    }
    return false;
};
a.appendChild(img);
a.appendChild(node);
li.appendChild(a);
document.body.appendChild(li); 
```

这是一个演示这两种技术的小提琴：http: [//jsfiddle.net/mLrbP/](http://jsfiddle.net/mLrbP/)

使用 DOM 检查器查看生成的标记。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T13:10:34.417

将 DOM 元素构建为字符串有时会很奇怪，您必须检查引号/双引号的扩展。

试试这个：

```
temp='<li><a href="#" onclick="showMenu3(\''+menu2[0]+"','"+menu2[2]+'\')">
      <img src="images/noImageSmall.png"/>'+menu2[2]+'</a></li>'; 
```

如果仍然不起作用，请检查 menu2 数组的字符串内容，它可能包含可能需要扩展的引号或双引号。

总之，我建议您使用 document.createElement 来构建 HTML 元素，而不是通过字符串来构建。

# scala - Scala：拥有 main 的所有实例

> ID：13398047
> 
> 赞同：0
> 
> 时间：2012-11-15T13:02:25.277
> 
> 标签：scala

在 Scala 中有一种方法可以在 main 中创建所有实例。

例如，我有以下类：作者、页面、书籍。我主要创建这三个类的实例。在 Book 的一个实例中，我放置了作者和页面。

然后我想检查是否有不属于任何书的页面。

这个例子只是解释性的，你不要太重视它们。

谢谢你们。抱歉英文翻译不好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T13:32:05.900

简短的回答：不，没有完全自动化的方法可以做到这一点。您需要遍历所有分配的对象，这是垃圾收集器可以做的事情，但程序本身不能。

以下是跟踪哪些子对象已附加到根对象的**一种**可能方法的草图。

定义允许我们区分子对象和根对象的基本特征：

```
trait Root

trait Sub {
  def register(r: Root)
  def deregister(r: Root)
  def isRegistered: Boolean
} 
```

`Book`然后我们定义一个可以添加页面的根对象：

```
class Book(val title: String) extends Root {
  private var pages: Set[Page] = Set()

  Books.books += this

  def add(p: Page) {
    pages += p
    p.register(this)
  }

  def remove(p: Page) {
    pages -= p
    p.deregister(this)
  }
} 
```

在实例化时，每本书都将自己添加到一个全局存储库中：

```
object Books {
  var books: Set[Book] = Set()
} 
```

同样对于子对象`Page`：

```
class Page(number: Int) extends Sub {
  private var owner: Option[Root] = None

  Pages.pages += this

  def register(r: Root) = owner match {
    case None =>
      owner = Some(r)
    case Some(o) =>
      sys.error("%s is already owned by %s, thus it cannot be owned by %s"
                .format(this, o, r))
  }

  def deregister(r: Root) = owner match {
    case Some(s) if r == s =>
      owner = None
    case Some(s) =>
      sys.error("%s is owned by %s, but not by %s"
                .format(this, s, r))
    case None =>
      sys.error("%s is not owned at all, thus also not by %s"
                .format(this, r))
  }

  def isRegistered = owner.nonEmpty
}

object Pages {
  var pages: Set[Page] = Set()

  def allRegistered = pages.forall(_.isRegistered)
} 
```

一些使用示例：

```
val p1 = new Page(1)
val p2 = new Page(2)
val p3 = new Page(3)

val b1 = new Book("Fahrenheit 451")
val b2 = new Book("Brave New World")

b1.add(p1)
b1.add(p2)
b2.add(p3)

println(Pages.allRegistered) // true

val p4 = new Page(4)

println(Pages.allRegistered) // false

b2.add(p4)
b2.remove(p3)

println(Pages.allRegistered) // false

b2.add(p1) // Exception: already owned 
```

**注意：**要记住的设计决策，开放式问题：

*   如果要销毁子对象，如何进行？从全局存储库中删除它？

*   一个子对象可以被多个根对象拥有吗？

*   拥有多个非全局存储库会更好吗？这可能意味着我们需要工厂来创建和注册子对象。

*   在并发设置中，我们必须同步对（全局）存储库的访问

*   我们可以将用于（取消）注册子对象的代码移动到单个特征中，然后在每个根对象中重用它吗？

**注二：**如果我们有反向指针，我们只需要一个（全局）子对象存储库。但是，我不知道任何提供内置反向指针的语言。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T13:12:00.543

不，您必须自己跟踪它们。不要认为任何语言真的可以做到这一点。当然，你可以编写你的类，让它们这样做，但这是你的责任。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-15T13:30:32.363

你可以

```
// If you use the REPL, :paste both class and object together
class Page {
  Page.everything += this
  var booked: Option[Book] = None   // Or just set to null
}
object Page {
  val everything: collection.mutable.HashSet[Page] = collection.mutable.HashSet()
}

class Book {
  var pages: Vector[Page] = Vector()
  def addPage(p: Page) { p.booked = Some(this); pages = pages :+ p }
}

// Create all your books and pages and assign them all

Page.everything.filter(_.booked.isEmpty)   // This contains all unassigned pages 
```

跟踪自己。（这是假设单线程代码；以您的专业水平，可能不值得担心如何并行执行此操作。）

或者，如果您想确保`main`方法中的所有事情都发生，您可以执行类似的操作

```
// File Page.scala
class Page(text: String)(implicit mhm: MustHaveMe) {
}

// File Main.scala
object Main {
  sealed trait MustHaveMe
  private final object YesYouHaveMe extends MustHaveMe
  def main(args: Array[String]) {
    implicit val okayHere = YesYouHaveMe
    new Page("Once upon a time")
  }
} 
```

现在，访问限制将阻止任何人`Main.scala`创建新页面，并且只有文件中的`main`方法`Main.scala`具有创建`Page`. 因此，您可以更轻松地避免在其他地方创建对象。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-16T16:05:51.757

我必须能够独立创建我的页面和书籍 我感兴趣的事情是跟踪创建的所有实例。正如你所建议的，我想我也部署了我的课本：

```
class Book(var name: String, var pages: List[Page]){
AllBook.allbook += this
}

object AllBook {
var allbook: Set[Book] = Set()
} 
```

以类似的方式还有 Page 类。作为 main 方法中的最后一条指令，使用必须控制我的约束的方法调用“验证”。

这可能没问题？有更好的解决方案吗？

注意：约束是独立的，尊重类的实现

请原谅我的英文翻译不好

# vb.net - 在一定限制后以指数形式显示数字还限制小数点后的位数

> ID：13398049
> 
> 赞同：0
> 
> 时间：2012-11-15T13:02:36.630
> 
> 标签：vb.net

我正在尝试为不同的单位制作一个转换工具，如果它们超过 1000，我想以指数形式显示数字（例如，如果 I/O 10001 然后 O/P 1.000E+04，如果 I/O 1000.1 然后 O/P 1.000E+03)。也适用于小于 1 的数字（如果 I/O 0.001 则 O/P 1.000E-03，如果 I/O 9.84203533290685E-04 则 O/P 9.842E-04。

对不起，如果问题很简单，但我是 VB .net 的新手，数学很差。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T13:18:15.267

尝试使用`String.Format`：

```
Dim numberToDisplay As Decimal = 12345.00M
Dim formattedNumber As String = String.Format("{0:E3}", numberToDisplay)
'or:
Dim formattedNumber As String = numberToDisplay.ToString("E3") 
```

然后你可以用它`formattedNumber`来显示你喜欢的地方。

更多信息：http: [//msdn.microsoft.com/en-us/library/dwhawy9k.aspx#EFormatString](http://msdn.microsoft.com/en-us/library/dwhawy9k.aspx#EFormatString)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T13:18:22.477

您通常只使用[ToString()](http://msdn.microsoft.com/en-us/library/kfsatb94.aspx)方法并传递所需的格式字符串以产生所需的结果。

格式字符串在这里：

[http://msdn.microsoft.com/en-us/library/0c899ak8.aspx](http://msdn.microsoft.com/en-us/library/0c899ak8.aspx)

# iphone - iphone CoreTelephony 和 .mm 文件

> ID：13398050
> 
> 赞同：2
> 
> 时间：2012-11-15T13:02:37.547
> 
> 标签：iphone, ios, core-telephony, ussd

我正在使用 CoreTelephony 拨打 USSD 号码（我知道它不受官方支持，但现在没关系）。我在项目中添加了一个框架，导入了所有标题：

```
#import<CoreTelephony/CTCallCenter.h>    
#import<CoreTelephony/CTCall.h>   
#import<CoreTelephony/CTCarrier.h>    
#import<CoreTelephony/CTTelephonyNetworkInfo.h> 
```

但是，当我调用`CTCallDialWithID`函数时，我得到编译器错误：“使用未声明的标识符'CTCallDialWithID'。由于我有一些 C++ 代码，我的控制器文件被声明为 .mm 文件。如果我将它重命名为 .m，调用有效很好。
为什么会发生这种情况，我该如何解决？

# iphone - 如何修改 UIDatePicker 的内容？

> ID：13398055
> 
> 赞同：0
> 
> 时间：2012-11-15T13:03:05.940
> 
> 标签：iphone, objective-c, ios, xcode, uidatepicker

有什么办法可以改变 UIDatePicker 的内容吗？我希望它显示名称，而不是显示日期或时间。（并且每个名称都有一个返回值，例如：如果用户选择名称“Alpha”，选择器将返回 1，“Bravo”将返回 2，“Charlie”等）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T13:04:20.147

您应该改用 UIPickerView 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T13:14:44.210

[您应该在此处](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIPickerView_Class/Reference/UIPickerView.html)查看文档。这是不言自明的

# inotifycollectionchanged - ObservableCollection 的 CollectionChanged 事件未触发

> ID：13398057
> 
> 赞同：2
> 
> 时间：2012-11-15T13:03:20.073
> 
> 标签：inotifycollectionchanged

我有一个`XamDataGrid`绑定到可观察集合的。由于`XamDataGrid`是可编辑的，因此可以添加/编辑/删除记录。我已经实施了`CollectionChanged`&`PropertyChanged`事件。

该`CollectionChanged`事件包含以下代码：

```
 if (e.Action == NotifyCollectionChangedAction.Remove || e.Action == NotifyCollectionChangedAction.Add)
        {
            if (e.OldItems != null)
            {
                // Detach the event handler from current instance;
                foreach (BusinessTelephone oldItem in e.OldItems)
                {
                    if (oldItem is INotifyPropertyChanged)
                    {
                        (oldItem as INotifyPropertyChanged).PropertyChanged -= new PropertyChangedEventHandler(PhoneDetails_PropertyChanged);
                    }
                }
            }

            if (e.NewItems != null)
            {
                // Attach the event handler to the new instance;
                foreach (BusinessTelephone newItem in e.NewItems)
                {
                    if (newItem is INotifyPropertyChanged)
                    {
                        (newItem as INotifyPropertyChanged).PropertyChanged += new PropertyChangedEventHandler(PhoneDetails_PropertyChanged);
                    }
                }
            }
        } 
```

所有这些工作正常。

我有一个奇怪的问题，如下所示。

当我在网格中添加一条记录并从网格中删除它时，我通过遍历集合从集合中删除该项目

> 例如：PhoneDetailsCollection.Remove(item);

现在，当我添加另一条记录时，该`CollectionChanged`事件不会被触发。

我在这里错过了什么吗？任何帮助都非常感谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T22:18:51.750

e.Action 可以是 NotifyCollectionChangedAction.Remove 或 NotifyCollectionChangedAction.Add 以外的其他内容。它可能会使用“重置”、“移动”或“替换”来引发事件。无论发生何种操作，我都会仔细检查您是否正在处理该事件。

# javascript - 允许 selectionStart 和 selectionEnd 的富文本编辑器

> ID：13398058
> 
> 赞同：1
> 
> 时间：2012-11-15T13:03:31.383
> 
> 标签：javascript, rich-text-editor

我正在尝试实现一个界面，其中有一个富文本编辑器（RTE）和一个面板，允许用户将某些代码片段引入 RTE。

我正在尝试的与[http://jsfiddle.net/timdown/wPfVn/](http://jsfiddle.net/timdown/wPfVn/)完全一样，只是我想使用 RTE 而不是纯文本区域。

问题是所有 RTE 都将 textarea 替换为 div 和 iframe 等。 textarea 的功能与检测光标位置类似`selectStart`，`selectionEnd`但不可用于检测光标位置。

是否有通过我可以使用的 API 公开此类功能的 RTE？

如果有人在某个网站上看到过类似的东西，请指出我。也许我可以 ctrl+u 并弄清楚他们使用了什么。

已解决：感谢 Magus 的回答。可以使用 TinyMCE 编辑器。它有一个 selection 和 selection.bookmarks 的概念。这是实现结果的方法。

```
tinyMCE.init({
    mode : "exact",
    elements: "notifierBody",           
});
$('.insertBtn').click(function(){
    // Stores a bookmark of the current selection
    var bm = tinyMCE.activeEditor.selection.getBookmark();
    // Restore the selection bookmark. In effect, takes the control that the bookmark
    tinyMCE.activeEditor.selection.moveToBookmark(bm);
    //Add new content right in the middle where your cursor/selection was
    tinyMCE.activeEditor.selection.setContent('Some new content');  
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T13:23:13.820

[TinyMCE](http://www.tinymce.com)获得了一些用于当前选择的 API。查看文档：[http ://www.tinymce.com/wiki.php/API3:class.tinymce.dom.Selection](http://www.tinymce.com/wiki.php/API3:class.tinymce.dom.Selection)

一个小例子：

```
tinyMce.activeEditor.selection.getContent({format : 'raw'}); // Get the selected text
tinyMce.activeEditor.selection.getStart(); // Selection start
tinyMce.activeEditor.selection.getEnd(); // Selection end 
```

我想很多RTE都提供了这个功能。您只需查看 API 文档。

# r - R 语言：计算“分组依据”或使用 ff 包拆分的问题

> ID：13398061
> 
> 赞同：1
> 
> 时间：2012-11-15T13:03:38.043
> 
> 标签：r, group-by

我对 R 几乎是新手，很抱歉，如果我提出一些基本问题，但我找不到解决这个“简单”问题的方法：拥有一个包含患者的数据库（大数据库，2500 万行，14 列），我有几个每个“id”的行，例如以下结构：

```
"id" "birth_date"  "treatment"  "date_treatment"
123   2002-01-01    2            2011-01-03
123   2002-01-01    3            2011-10-03
124   2002-01-01    6            2009-11-07
124   2002-01-01    NA           NA
...   .....         ......       ........ 
1022  2007-01-01    4            2011-01-06 
```

我必须使用 ff 包才能使用少量 RAM，因此所有进程都应该放入 ff 函数中。而且我想知道，对于每个单独的“id”，这是他/她接受治疗 = 2 或 4 时的最小“年龄”。所以，在*每个单独的 id*中，在通用代码中：

if(c(2,4) 中的治疗) 然后 min(date_treatment -birth_date)

我只想保留那些最小的“年龄”数据，也许还有 ID。

一种解决方案是：

```
age_c <- (data$date_treatment - data$birth_date)/365.25;
data$age_c <- age_c;
idx <- ffwhich( data, treatment %in% c(2,4) );
result  <- data[idx,]; 
```

这将所有进程保持在 ff 中，并且没有内存问题，但是......我仍然需要找到一种方法来为每个 id 获取这些最小年龄...... ffdfdply 似乎能够做到这一点：

```
age_fun <- function(x){ 
  min_ <- min.ff(x$age_c); 
  data.frame( age = min_);  
}

 result2 <- ffdfdply(x = data,
               split = data$id,
               FUN = function(x) age_fun(x),
               BATCHBYTES = 5000,
               trace=TRUE
 ); 
```

这需要很长时间，也给了我很多不同的错误....

有什么解决办法吗？
这是一个在 SAS 或 SQL 中很容易解决的普遍问题，但我在 R 中找不到正确的组合。所以一般问题是：

*如何在非常大的数据集中计算变量（行）的相同值（组）的行列函数？？？*

谢谢 ！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T22:31:47.113

ffdfdply 是您解决问题所需的功能，但您使用错误且效率低下。将 ffdfdply 视为进入每个 FUN，数据 R 的最大数量允许您放入 RAM，但仍确保您通过 RAM 中的每个 id 获取所有数据（或者如果它适合 RAM，则可能是多个 id）。

因此，使用 BATCHBYTES 5000 相当小（您真的只有 5 KB 的 RAM - 我猜不是 - 您是否在 90 年代的 Commodore 上安装了 R？）接下来，您的 FUN age_fun 写错了。要查看您在 FUN 中获得的内容，您可以将其打印出来。如 FUN=function(x){ print(head(x))); X}。在 FUN 中，您在 RAM 中获取数据，因此您不需要使用 min.ff，min 就可以了。

另请注意 joran 的评论：如果您的 RAM 允许，您会在每个块中获得多个 id。确保您的 FUN 执行拆分应用组合策略或在 FUN 中使用 dply。还有另一个加快速度的评论。你真的需要通过整个ffdf吗？您只需要在函数和拆分中使用的列。所以 ffdfdply(x = data[c("id","age_c","treatment")], split = ...) 会这样做，否则你会在 RAM 中获得不需要的数据。

简而言之，这样的事情就可以了

```
require(doBy)
result2 <- ffdfdply(
  x = data[c("id","age_c","treatment")], split = data$id,
  FUN = function(x) summaryBy(age_c ~ id, data=subset(x, treatment %in% c(2,4)), FUN=min)) 
```

如果您还想让您的人没有接受过治疗 2 和 4 什么的，请这样做。

```
require(doBy)
result2 <- ffdfdply(
  x = data[c("id","age_c","treatment")], split = data$id,
  FUN = function(x) {
   persons <- unique(x[, "id", drop=FALSE])
   result <- merge(
     persons,
     summaryBy(age_c ~ id, data=subset(x, treatment %in% c(2,4)), FUN=min),
     by.x="id", by.y="id", all.x=TRUE, all.y=FALSE
     )
   result
}) 
```

# itextsharp - 如何隐藏 AcroForm 中的字段？

> ID：13398062
> 
> 赞同：1
> 
> 时间：2012-11-15T13:03:41.990
> 
> 标签：itextsharp

我正在尝试执行以下代码来隐藏字段

```
 fields.SetFieldProperty("numberOfPages","setfflags", PdfAnnotation.FLAGS_INVISIBLE, null );
 or 
    fields.SetFieldProperty("slash", "setfflags", PdfAnnotation.FLAGS_HIDDEN, null); 
```

我从 Itext in Action 书中获得了代码。我正在使用 Itextsharp 4.1.6 但没有得到任何结果，也没有抛出错误。我在做什么错？顺便说一句，“setfflags”来自这本书。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-07-24T11:20:21.377

我知道这个问题是 2 年前提出的，但我在网上的任何地方都找不到答案，希望这能帮助找到这篇文章的其他人。这是我在 iTextSharp 4.1.6 中为使其工作所做的工作

```
PdfReader reader = new PdfReader(Server.MapPath("[PATH_TO_PDF.pdf]"));
using (MemoryStream ms = new MemoryStream())
{
    PdfStamper stamper = new PdfStamper(reader, ms);
    AcroFields fields = stamper.AcroFields;
    fields.SetFieldProperty("[FIELD_NAME]", "flags", PdfFormField.FLAGS_HIDDEN, null);
    stamper.FormFlattening = true;
    stamper.Close();
} 
```

我通过查看 iTextSharp 源代码找到了答案： [https ://github.com/itextsharper/iTextSharp-4.1.6/blob/master/iTextSharp/text/pdf/AcroFields.cs#L1037](https://github.com/itextsharper/iTextSharp-4.1.6/blob/master/iTextSharp/text/pdf/AcroFields.cs#L1037)

如果您查看方法注释，它会向您显示有效的属性名称以及它们的作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T09:40:18.930

您将字段属性 ( `"setfflags"`) 与注释属性 ( `"setflags"`) 混淆了。请阅读[文档，](http://itextpdf.com/book/)[因此](http://lowagie.com/itext2)请不要使用 iTextSharp 4.1.6 。

# ruby-on-rails - 使用 Rails JSON 请求创建具有嵌套模型的模型导致 MassAssignmentSecurity

> ID：13398063
> 
> 赞同：0
> 
> 时间：2012-11-15T13:03:41.670
> 
> 标签：ruby-on-rails, ruby, json, api, backbone.js

这是我的模型；

```
class Calendar <ActiveRecord::Base
attr_Accessible :email, :cal_items_attributes
has_many :cal_items
accepts_nested_attributes_for :cal_items
end

class CalItem < ActiveRecord::Base
attr_accessible :calendar_id, :name, :url
has_one :calendar
end 
```

我的网站将成为骨干应用程序，因此我向 localhost:3000/calendars.json 发出 POST 请求

```
{"calendar":
  {"email":"xxx@gmail.com",
   "cal_items": 
     [{"url":"http://www.google.com"},{"url":"http://www.yahoo.com"}]
  }
} 
```

它返回一个错误

ActiveModel::MassAssignmentSecurity::CalendarsController#create 中的错误无法批量分配受保护的属性：cal_items

我认为带有 cal_items_attributes 的 attr_accessible 说明了这一点！

谢谢，乔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T13:09:41.140

你有`attr_accessible`with `cal_items_attributes`，但你在 json 中使用了 cal_items。

尝试：

```
{"calendar":
  {"email":"xxx@gmail.com",
   "cal_items_attributes": 
     [{"url":"http://www.google.com"},{"url":"http://www.yahoo.com"}]
  }
} 
```

# java - 如果值为 null，则保留 FreeMarker 标记

> ID：13398068
> 
> 赞同：1
> 
> 时间：2012-11-15T13:04:16.097
> 
> 标签：java, nullpointerexception, freemarker

`freemarker`因此，如果提供的数据模型不包含该值，我目前正在尝试确定是否有保留标记。我知道`${VALUE!"DEFAULTVALUE"}`，但这不适用于 FreeMarker 标记。

从本质上讲，我想要做的事情是：

```
${TEST}${1}${2} 
```

如果数据模型设置如下：

```
Map root = new HashMap();
root.put("1","ONE");
root.put("2","TWO"); 
```

将此应用于 Template 对象时，`null`会引发错误，因为未定义 test。我想要发生的是如果`TEST`未定义，模板仍应处理为以下内容：

```
${TEST}ONETWO 
```

有没有办法使用`FreeMarker`库中的功能来做到这一点？我可以通过模式匹配来做到这一点，但必须有更简单的方法。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T08:20:54.890

尝试使用`?has_content`for `TEST`，也许这会有所帮助。但我不确定这是否符合您的要求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-14T17:34:44.430

FreeMarker 库允许您编写自定义异常处理程序。

不幸的是，FreeMarker 没有给出失败的确切令牌，但您可以从错误消息中解决它。

```
 cfg.setTemplateExceptionHandler(new TemplateExceptionHandler() {
        @Override
        public void handleTemplateException(TemplateException te, Environment e, Writer writer) throws TemplateException {
            try {
                String errorString = te.getFTLInstructionStack();
                int startIndex = errorString.indexOf('$');

                if (startIndex != -1) {
                    int endIndex = errorString.indexOf('}', startIndex);
                    if (endIndex != -1) {
                        writer.write(errorString.substring(startIndex, endIndex + 1));
                    }
                    else {
                        throw te;
                    }
                }
                else {
                    throw te;
                }
            }
            catch (IOException ex) {
                ex.printStackTrace();
            }
        }
    }); 
```

# php - 内爆函数返回一个附加值

> ID：13398075
> 
> 赞同：0
> 
> 时间：2012-11-15T13:04:47.527
> 
> 标签：php

所以我有：

```
$input=array($fname,$lname); 
```

然后我使用：

```
$valueString = join(",",$values);
    echo $valueString; 
```

如果我有输入`$fname = a and $lname = f` ，我会收到：

```
a,fa,f 
```

不知道为什么我得到'fa'值以及如何编辑我的代码所以我只得到一个，f

为这个可怜的问题道歉，虽然它会更简单

这是功能；

```
 function insert($coloumn, $values, $table)
{

    $valueString = join(",",$values);
    echo $valueString;
    $insert = "INSERT INTO $table ($coloumn)
        VALUES ($valueString)";
    //$query = $this->dbLocalhost->query($insert)
    //or die("could not insert:".mysql_error());

    if($this->dbLocalhost->query($insert))
    {
    header('Location: blah.php');
    }

} 
```

这是输入的页面：

```
 <?php
session_start();
require_once("database.php");
$db = new Database();
$table = "tables";
$coloumn = "firstname, lastname";
if(isset($_POST['Add']))
{

    $fname = $_POST['firstname'];
    $lname = $_POST['lastname'];

    $input=array($fname,$lname);

    $db->emptyCheck($coloumn, $input, $table);

}
?>
<html>
    <head>
        <title>Add new Record</title>
    </head>
    <body>
        <br><br><br><br><br>
        <div id ="formAlign" align="center">
        <form action="" method ="post">
            <label for="firstname"> First Name:</label>
            <input type ="text" name="firstname">
            <label for="lastname"> Last Name:</label>
            <input type="text" name="lastname">

            <input type="submit" name="Add">
        </form>
        </div>
    </body>
</html> 
```

澄清

```
$db->emptyCheck($coloumn, $input, $table); 
```

导致：

```
$this->insert($coloumn, $values, $table); 
```

被调用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T13:07:53.353

`implode()`工作正常。您正在输出`implode()`两次的结果。

```
'a,f' . 'a,f' = 'a,fa,f' 
```

**注意：**我鼓励使用 root 函数而不是别名。（例如`implode()`与`join()`）

# jquery - 丢框时调用 django.view 函数

> ID：13398077
> 
> 赞同：1
> 
> 时间：2012-11-15T13:05:27.640
> 
> 标签：jquery, django-views

我想在两个容器（#UP 和#Down）之间拖动框（类可拖动）。

每次丢弃盒子时，都应该向我的 django.view 发送一个包含有关该盒子信息（ID，丢弃时间）的请求，并在那里使用函数进行处理。

我的 HTML 代码如下所示：

```
<script src="http://code.jquery.com/jquery-1.8.2.js"></script>
<script src="http://code.jquery.com/ui/1.9.1/jquery-ui.js"></script>
<script>
    $(function() {
        $( "#Up" ).droppable();
        $( ".draggable" ).draggable({ revert: "invalid"});
        $( "#Down" ).droppable({drop: function( event, ui ) {
                        $.post("/127.0.0.1:8000/djangoproject/function/"}});
    });
 </script> 
```

我尝试在函数中调用链接到我的 django.view 函数的 URL：“drop: function (event,ui) with $.post。但是，它不起作用。

有人可以帮帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T14:48:17.177

是否因为 CSRF 保护而失败？

要使用 CSRF 安全地执行 AJAX，请参阅[https://docs.djangoproject.com/en/dev/ref/contrib/csrf/#ajax](https://docs.djangoproject.com/en/dev/ref/contrib/csrf/#ajax)

# android - 在 Varnish 中为 Android 设备选择用户代理

> ID：13398078
> 
> 赞同：0
> 
> 时间：2012-11-15T13:05:34.553
> 
> 标签：android, browser, user-agent, varnish

这是我的 Varnish 的当前状态。我的问题是，Android 设备的最佳配置是什么？

> if (req.http.User-Agent ~ "iPhone") { set req.http.User-Agent = "Mozilla/5.0 (iPhone; U; CPU iPhone OS 4_3_3 like Mac OS X; en_us) AppleWebKit/525.18.1 ( KHTML，如 Gecko)"; } else if (req.http.User-Agent ~ "iPad") { set req.http.User-Agent = "Mozilla/5.0 (iPad; U; CPU OS 4_3_2 like Mac OS X; en-us) AppleWebKit/533.17 .9 (KHTML, 像 Gecko) 版本/5.0.2 Mobile/8H7 Safari/6533.18.5"; } else if (req.http.User-Agent ~ "Android") { // 我们现在不为 Android 设备做任何事情，因为 // 不同的设备太多了。// // 我们可以缓存两个版本，一个移动版本，每个版本一个表 // Android 2.0-2.4，但是，我们尝试将其保留在现在， // 看看缓存有多大。} 其他 { 设置 req.http。User-Agent = "Mozilla/5.0 (兼容; MSIE 9.0; Windows NT 6.1; VOSA 1.0)"; } }

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T14:25:41.897

Varnish软件自己写了一个很好的devicedetect.vcl。它比它更容易使用，并且提供了更多的设备类型来增长。它对分离的平板电脑和手机也有很好的安卓检测。您可以在以下位置找到有关如何使用它的源代码和良好文档：

[https://github.com/varnish/varnish-devicedetect](https://github.com/varnish/varnish-devicedetect)

我自己使用它，并且只有很好的匹配经验。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-27T03:24:13.600

@clarence 建议使用 varnish-devicedetect 是一个很好的建议。对于像我这样喜欢简单设置和详细说明的新手。[在atomic object](http://spin.atomicobject.com/2013/02/11/varnish-cache-mobile-devices/)试用本教程。

它非常简单，直接，只需要在配置文件中添加一些 vcl 规则

# c# - 从 Active Directory 获取用户角色/组 - mvc3

> ID：13398079
> 
> 赞同：0
> 
> 时间：2012-11-15T13:05:36.040
> 
> 标签：c#, asp.net-mvc-3, active-directory

我需要能够将用户活动目录组与可接受组列表进行比较。这不是用于身份验证。

我知道我可以使用 System.DirectoryServices，但我看到很多帖子说要使用 AccountManagement，但我看到的只是 .Active Directory。

谁能在正确的方向上帮助我？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T13:40:32.137

尝试这样的事情：检查`System.DirectoryServices.AccountManagement`(S.DS.AM) 命名空间。在这里阅读所有相关信息：

*   [在 .NET Framework 3.5 中管理目录安全主体](http://msdn.microsoft.com/en-us/magazine/cc135979.aspx)
*   [System.DirectoryServices.AccountManagement 上的 MSDN 文档](http://msdn.microsoft.com/en-us/library/system.directoryservices.accountmanagement.aspx)

基本上，您可以定义域上下文并在 AD 中轻松找到用户和/或组：

```
// set up domain context
PrincipalContext ctx = new PrincipalContext(ContextType.Domain);

// find a user
UserPrincipal user = UserPrincipal.FindByIdentity(ctx, "SomeUserName");

if(user != null)
{
   PrincipalSearchResult<Principal> authgroups = user.GetAuthorizationGroups();

   // do your checking with the auth groups that the user has - against your list 
} 
```

新的 S.DS.AM 使得在 AD 中与用户和组一起玩变得非常容易！

# arrays - 动态数组与静态数组有何不同？

> ID：13398083
> 
> 赞同：1
> 
> 时间：2012-11-15T13:06:01.570
> 
> 标签：arrays, delphi, gdi+, delphi-xe2

我正在尝试使用 GDI 绘制多边形。此代码有效：

```
type
  TPolygon: Array[0..2] of TPoint;

var 
  ACanvas: TGPGraphics;
  MyBrush: TGPLinearGradientBrush;

...

procedure DrawPolygon;
var
  Polygon: TPolygon;
begin
  Polygon[0].X := 1;
  Polygon[0].Y := 5;
  Polygon[1].X := 10;
  Polygon[1].Y := 15;
  Polygon[2].X := 1;
  Polygon[2].Y := 5;

  ACanvas.FillPolygon(MyBrush, PGPPoint(@Polygon), length(Polygon));
end;

... 
```

此代码产生**GDI 值溢出**错误：

```
type
  TPolygon: Array of TPoint;

var 
  ACanvas: TGPGraphics;
  MyBrush: TGPLinearGradientBrush;

...

procedure DrawPolygon;
var
  Polygon: TPolygon;
begin
  SetLength(Polygon, 3);

  Polygon[0].X := 1;
  Polygon[0].Y := 5;
  Polygon[1].X := 10;
  Polygon[1].Y := 15;
  Polygon[2].X := 1;
  Polygon[2].Y := 5;

  ACanvas.FillPolygon(MyBrush, PGPPoint(@Polygon), length(Polygon));
end;

... 
```

唯一的区别是一个点数组是动态的，另一个是静态的。显然底层的内存值是不同的，但是以什么方式呢？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-15T13:11:56.807

您的代码无效。（首先，没有`FillPolygon`in `TCanvas`，其次，多边形至少需要三个顶点。此外，还有一些语法错误，例如 : 而不是 = 在 const 声明中。）我建议使用示例

```
Polygon[0].X := 1;
Polygon[0].Y := 1;
Polygon[1].X := 1;
Polygon[1].Y := 100;
Polygon[2].X := 100;
Polygon[2].Y := 1; 
```

这是一个很好的三角形。总之，虽然

```
Windows.Polygon(Canvas.Handle, Polygon, 3) 
```

适用于静态数组，您必须这样做

```
Windows.Polygon(Canvas.Handle, Polygon[0], 3) 
```

对于动态数组。原因是*静态*数组“就地”存储在内存中，即直接存储在`@Polygon`，就像`cardinal`存储数字（例如 ），或`ShortString`，或此类简单类型的记录一样。相反，如果`Polygon`是一个*动态*数组，那么它实际上是一个指向实际可变长度数据的指针（与普通可变长度字符串的工作方式大致相同）。也就是说，在`@Polygon`你只有一个指针， a `NativeUInt`。实际数据从这个新地址开始，您可以通过写`@Polygon[0]`.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-15T17:15:50.407

动态数组已经是一个指针，因此只需`@`在将动态数组传递给时删除运算符`FillPolygon()`：

```
ACanvas.FillPolygon(MyBrush, PGPPoint(Polygon), length(Polygon)); 
```

或者，如果您想使用适用于静态和动态数组的语法，请改为执行以下操作：

```
ACanvas.FillPolygon(MyBrush, PGPPoint(@Polygon[0]), length(Polygon)); 
```

# javascript - HTML网站的各种“模板”

> ID：13398089
> 
> 赞同：0
> 
> 时间：2012-11-15T13:06:35.767
> 
> 标签：javascript, html

我有一个网站，目前以 HTML 文件的形式存在于我的服务器文件夹中。我在每个页面上都有一些元素，并且必须相同，例如导航栏。当我向导航栏添加新链接时，如果我想让它对每个页面都有效，我必须绕过每个文件替换代码。有没有办法让代码从文件中“插入”？我知道这样的事情是可能的`<?php include() ?>`，但是如果没有服务器端脚本，我怎么能做到呢？

编辑：jQuery 和其他库都很好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T13:09:38.467

我不知道这对您的用例来说是否太多，但是有可用于 Javascript 和 HTML 模板的[handlebars.js库。](http://handlebarsjs.com/)当然，那时您需要编写 Javascript。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T13:09:57.553

形成我所理解的你需要的各种 JS 模板引擎：

[http://handlebarsjs.com/](http://handlebarsjs.com/)

是什么可能适合您的需求

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T13:10:07.507

你应该能够做到

```
<!--#include virtual="path/file.html" --> 
```

另请参阅[如何在没有框架/iframe 的情况下将 HTML 页面包含到另一个 HTML 页面中？](https://stackoverflow.com/questions/676394/how-to-include-an-html-page-into-an-html-page)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-15T13:10:52.990

当然这是可能的。例如使用 jQuery。请参阅[此处](http://api.jquery.com/load/)`.load()`的功能。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-15T13:36:49.543

没有服务器端的唯一方法是 javascript。有关 JS 模板，请参阅 Aviatrix 的帖子。

在您的情况下，并且仅当您可以接受服务器端时，我宁愿采用更通用的方法；而不是在每个文件/页面中都有导航栏，而是在单独的文件中创建一次导航栏，并在每个页面中使用它（需要 php 或其他 ssi 方法）。

# mysql - 如何在不区分大小写的上下文中选择第一个字母？

> ID：13398090
> 
> 赞同：0
> 
> 时间：2012-11-15T13:06:35.243
> 
> 标签：mysql, sorting, unicode, collation

我有一张这样的桌子：

```
id | name 
----------------
 1 | àbbot
 2 | about
 3 | zorro 
```

我想在不区分大小写的上下文中选择第一个字母，如下所示：

```
let
----------
a
z 
```

但是其中任何一个，使用任何 unicode 排序规则，都会给出相同的错误结果：

```
SELECT LOWER(SUBSTR(name,1,1)) AS let FROM t GROUP BY let

SELECT LOWER(SUBSTR(name,1,1)) AS let FROM t GROUP BY letter ORDER BY let ASC

SELECT * FROM
     (SELECT LOWER(SUBSTR(name,1,1)) AS let FROM t ORDER BY let DESC) AS x
GROUP BY let ORDER BY let ASC 
```

错误的结果：

```
let
----------
à
z 
```

有没有办法在不强制转换的情况下修复排序？（因为我也必须涵盖非拉丁语言，例如日语）。

也许我有一个旧版本的 MySQL……你能在你的环境中测试查询吗？

先感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T13:14:44.560

没关系，找到解决方案

```
SELECT UPPER(SUBSTR(name,1,1)) AS let FROM 
    (SELECT name FROM t ORDER BY name DESC) AS x
GROUP BY let ORDER BY let ASC 
```

# c# - CheckedListbox Displaymember 和 ValueMember

> ID：13398091
> 
> 赞同：5
> 
> 时间：2012-11-15T13:06:47.037
> 
> 标签：c#, checkboxlist

我的检查列表框有问题。

```
public void GetFolder()
    { 
         var dict = new Dictionary<string, string>();
         foreach (Folder folder in rootfolder.FindFolders(new FolderView(100)))
            {
             dict.Add(folder.Id.ToString(),folder.DisplayName);
            }        

       checkedListBox1.DataSource = new BindingSource(dict, null);
       checkedListBox1.DisplayMember = "Value";
       checkedListBox1.ValueMember = "Key";

    } 
```

现在我想要得到所有的 Checked List 框，

我这样做

```
 foreach (object item in checkedListBox1.CheckedItems)
        {
            lala = lala + item +"|";

        } 
```

我的 CheckedListbox 向我显示了我从目录中读取的所有文件夹的 CheckIcon 和名称，我现在想在某些设置中存储 tie folder.Id 但只有 ID 但我总是将文件夹名和 ID 放在一起。

希望有人可以帮助我，也许我的眼睛上有一些西红柿：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T13:28:28.123

我假设 lala 是您的设置字符串。

如果是这种情况，请使用：

```
lala = lala + item.Value.ToString() +"|"; 
```

这样，lala 将包含所有这样的 ID：1|2|34|567|5...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T14:05:34.307

好的，试试这个：

```
ArrayList folders=new ArrayList();
foreach (Folder folder in rootfolder.FindFolders(new FolderView(100)))
            {
             folders.Add(folder);
            }    

       checkedListBox1.DataSource = folders;
       checkedListBox1.DisplayMember = "DisplayName";
       checkedListBox1.ValueMember = "Id";

foreach (Folder item in checkedListBox1.CheckedItems)
        {
            lala += item.Id.ToString() +"|";

        } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-16T07:50:43.213

也许我有一个解决方案。

我使用 DataTable 而不是 Dictionary

```
 DataTable table = new DataTable();
        table.Columns.Add("Name",typeof(string));
       table.Columns.Add("Key", typeof(string));

       table.Rows.Add("ID1=", "Folder1");
       table.Rows.Add("ID2=", "Folder2");
       table.Rows.Add("ID3=", "Folder3");
       table.Rows.Add("ID4=", "Folder4");
       table.Rows.Add("ID5=", "Folder5");
       table.Rows.Add("ID6=", "Folder6"); 
```

现在取消单击我得到的所有选定项目

foreach (DataRowView objDataRowView in checkedListBox1.CheckedItems) { MessageBox.Show("我的值：" + objDataRowView["Name"]); }

只有我的身份证回来:)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-15T13:14:42.593

```
public void GetFolder()
    { 
         var dict = new Dictionary<string, string>();
         ArrayList arr = new ArrayList();
         foreach (Folder folder in rootfolder.FindFolders(new FolderView(100)))
            {
             dict.Add(folder.Id.ToString(),folder.DisplayName);
             arr.Add(folder.Id.ToString());
            }        

       checkedListBox1.DataSource = new BindingSource(dict, null);
       checkedListBox1.DisplayMember = "Value";
       checkedListBox1.ValueMember = "Key";

       //Do whatever to arraylist..
    } 
```

这将为您提供一个包含所有 ID 的数组列表。您可以将其绑定到源，或运行`foreach`循环以获取所有项目。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-15T13:44:39.710

在您的 foreach 中，创建一个 var 项而不是对象 - 之后您将能够访问 Value 属性。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-01-17T17:08:17.007

使用 displaymember 和 valuemember 绑定 CheckedListBOx 或任何其他控件非常简单，您只需指定控件的数据源属性以及 displaymember 和 valuemember。

以下是我测试过的工作代码 100% 为我工作：P

```
/* checkedlistbox bindig code */

    DataSet ds = new DataSet();

    string strChechboxlist = "select Subject_ID as code, SubjectName as Display from dbo.Mst_Subject_Detail";

/* filldataset() is function i have created to return dataset. */

    ds = dc.FillDataSet(strChechboxlist);
    if (ds.Tables[0].Rows.Count > 0)
    {
    checkedListBox1.DataSource = ds.Tables[0];
    checkedListBox1.DisplayMember = "Display";
    checkedListBox1.ValueMember = "code"; 

    }

/* for fetching valuemember or displaymember from checkedlistbox */

    for(int i = 0; i < checkedListBox1.CheckedItems.Count; i++)
    {

    /*Now with the following code we can get valemember and displaymember as per your requirement you can store in table. */

    DataRow r;

    r = ((DataRowView)this.checkedListBox1.CheckedItems[i]).Row;  

    string val = (r[this.checkedListBox1.ValueMember]).ToString();  

    string dis = (r[this.checkedListBox1.DisplayMember]).ToString();    

    r = null;

    } 
```

注意：-我附上代码的工作演示

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-15T13:14:13.420

**尝试这个**

```
foreach (object item in checkedListBox1.CheckedItems)
{
   DictionaryEntry de = (DictionaryEntry)item;
   string htKey = de.Key.ToString();
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-02-23T01:04:51.027

//这是一个简单的方法[我是编码新手]。

//CheckedListBox可以以DataRowView的形式检索CheckedItems

// 对于 CheckedListBox，请确保您的数据源也传递“ID”值。

// 设置 CheckedListBox 的数据源

```
 var dict = new Dictionary<string, string>();
     foreach (Folder folder in rootfolder.FindFolders(new FolderView(100)))
        {
         dict.Add(folder.Id.ToString(),folder.DisplayName);
        }        

   checkedListBox1.DataSource = new BindingSource(dict, null);
   checkedListBox1.DisplayMember = "Value"; //This will be the folders display name in the check box
   checkedListBox1.ValueMember = "Key"; // this will be the folder's ID 
```

// 创建一个列表来保存所有选定的 ID

```
List<string> ListOfCheckedIDs = new List<string>(); 
```

// 现在获取 CheckedListBox 中的所有 CheckedItems 作为 DataRowView 并使用包含文件夹 ID 的 ValueMember 将文件夹 ID 添加到 ListOfCheckedIDs

```
foreach (DataRowView drowVw in checkedListBox1.CheckedItems)

        {
            ListOfCheckedIDs.Add(drowVw[checkedListBox1.ValueMember].ToString());
        } 
```

// 现在在 ListOfCheckedIDs 上使用 string.join，这样就不会有不需要的尾随字符

```
string myStringOfIDs = string.Join("|", ListOfCheckedIDs); 
```

# objective-c - 我如何通过值获取密钥？

> ID：13398092
> 
> 赞同：-4
> 
> 时间：2012-11-15T13:06:49.547
> 
> 标签：objective-c, ios

> **可能重复：**
> [我如何在 xcode 中获取数组？](https://stackoverflow.com/questions/13397780/how-i-can-fetch-array-in-xcode)

如何通过值获取密钥？

现在我通过键获取值，如下所示：

```
NSString *valueStr = [dict objectForKey:@"Key2"]; 
```

我需要按值获取密钥。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T13:11:42.017

```
for (NSString* key in [dictionary allKeys]) {
   NSString* value = [dictionary objectForKey:key]
   if(value equalsToString:@"SearchedValue") {
      searchedValue = value;
      keyForSearchedValue = key;
} 
```

但这不是推荐的编码方式。相反，您应该按键搜索，而不是按值搜索。请不要为同一主题创建 3 个新问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T13:30:25.790

```
NSString *valueStr = ...;
NSArray *keys = [dict allKeysForObject:valueStr]; 
```

返回一个数组，其中包含字典中具有给定值的所有键。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-15T13:13:46.420

这是一项昂贵的操作，因为`NSDictionary`（与任何*地图*集合类一样）旨在通过键保存值。

但是，您可以这样做（假设 key 和 value 都是`NSString`）：

```
NSString *wantValue = @"tulips";
for (NSString *name in dict)
{
    NSString *value = [dict objectForKey:name];
    if ([value isEqualToString:wantValue])
    {
        NSLog(@"name '%@' matches", name);
    }
} 
```

# iphone - iOS6 不断开蓝牙智能/LE 外设

> ID：13398095
> 
> 赞同：2
> 
> 时间：2012-11-15T13:06:59.743
> 
> 标签：iphone, core-bluetooth, bluetooth-lowenergy, disconnect

在升级到 iOS6 之前，一切正常，但现在当我运行

```
[centralManager cancelPeripheralConnection:peripheral]; 
```

回调被触发

```
-(void) centralManager:(CBCentralManager *)central didDisconnectPeripheral:(CBPeripheral     *)peripheral error:(NSError *)error{
NSLog(@"Disconnected");
NSLog(@"Error: %@", [error localizedDescription]);
} 
```

和控制台输出

```
Disconnected
Error: (null) 
```

尽管如此，直到我在设置中打开蓝牙或打开手机（我在外围设备上处于连接状态）之前，外围设备都不会断开连接。有没有其他人发现这个 iOS6 特定的问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T23:53:54.797

我相信这是 iOS6 的一个特性（如果你愿意这样称呼它）。

这只是一种不中断可能使用该连接的其他应用程序的方法（或者它可能处于配对过程的中间）。最多可能需要 45 秒才能断开连接。

如果可能，最好的解决方案可能是触发与外围设备的断开连接，然后断开连接会立即发生。

[http://lists.apple.com/archives/bluetooth-dev/2012/Sep/msg00090.html](http://lists.apple.com/archives/bluetooth-dev/2012/Sep/msg00090.html)

# azure - Windows Azure 表存储 int 字段增量

> ID：13398097
> 
> 赞同：5
> 
> 时间：2012-11-15T13:07:02.550
> 
> 标签：azure, azure-storage, azure-table-storage

我正在考虑 Azure 表存储的巨大改进。是否可以通过特定操作向表存储提交查询，例如“通过 [PartitionKey=somestingPK] 和 [RowKey=somethingRK] 增加实体字段 [name] by [value]”？

@smarx 这个功能会可用吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-16T13:42:09.603

您可以使用启用了 ETAG 跟踪的表或页面存储来完成此操作。我使用这种技术为 Azure 表中的每个条目创建一个标识值。这个想法是这样的：

*   从 Page Blob 中读取值，启用 ETAG 跟踪

*   增加检索到的值

*   POST 检索到的值，如果存在 ETAG 冲突，请重新尝试整个操作。也许在这里使用指数退避算法来防止目标容器或分区过载。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T17:30:35.087

是的，这是可能的——但可能不完全是你的想法。您正在寻找[MERGE 操作](http://msdn.microsoft.com/en-us/library/windowsazure/hh452241.aspx)。要使用它，您必须知道您要定位的实体（即实体的分区键和行键）。您不必检索实体来更新它，但您必须通过 REST 调用或使用批处理功能（有一些限制）专门处理每个实体。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T14:12:52.977

这类似于`UPDATE`MySQL 的查询，目前无法在 Azure 表存储中执行。不确定这是否可以在这种数据库类型中实现，因为您必须首先获取整个实体，更新所需的字段，然后存储回数据库。

# android - ANDROID：按下按钮后如何延迟？

> ID：13398104
> 
> 赞同：13
> 
> 时间：2012-11-15T13:07:28.953
> 
> 标签：android, button

我有一个按钮，按下它会播放音频文件。我想在按钮上延迟 5 秒，这样用户就不会捣碎按钮并一遍又一遍地播放声音。我想我真的希望它在按下按钮后被禁用 5 秒。有谁知道如何做到这一点？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-11-15T13:11:13.787

在按钮的 onClickListener 中：

```
myButton.setEnabled(false);

Timer buttonTimer = new Timer();
buttonTimer.schedule(new TimerTask() {

    @Override
    public void run() {
        runOnUiThread(new Runnable() {

            @Override
            public void run() {
                myButton.setEnabled(true);
            }
        });
    }
}, 5000); 
```

这将在单击时禁用按钮，并在 5 秒后再次启用它。

如果单击事件是在扩展 View 的类中而不是在 Activity 中处理的，则执行相同的操作，但替换`runOnUiThread`为`post`.

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2012-11-15T13:18:47.033

您可以禁用您的按钮，然后在您的按钮上使用[postDelayed](http://developer.android.com/reference/android/view/View.html#postDelayed%28java.lang.Runnable,%20long%29)方法。

```
myButton.setEnabled(false);
myButton.postDelayed(new Runnable() {
    @Override
    public void run() {
        myButton.setEnabled(true);
    }
}, 5000); 
```

这类似于 Timer 解决方案，但它可能更好地处理配置更改（例如，如果用户旋转手机）

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-11-15T13:15:51.123

干得好。

```
((Button) findViewById(R.id.click))
    .setOnClickListener(new OnClickListener() {

    @Override
    public void onClick(View v) {
        ((Button) findViewById(R.id.click)).setEnabled(false);

        new Handler().postDelayed(new Runnable() {

            @Override
            public void run() {
                ((Button) findViewById(R.id.click))
                    .setEnabled(true);

            }
        }, 5000);

    }
}); 
```

# sql - Sql 从 SELECT 语句中引用 WITH 子句实体

> ID：13398110
> 
> 赞同：0
> 
> 时间：2012-11-15T13:07:48.717
> 
> 标签：sql, sql-server

# 概述

我有 2 组文件路径，文件路径都包含 UID 作为文件名的*一部分*。

*   **完整路径**集位于表DirFiles*中*，这些文件名会因外力而改变，但 UID 部分永远不会改变。
***   *位置*集位于作为更新目标的表BrainAttachments中**。****

 ***我必须制作一些 XML 来进行更新，所以这不是典型的表更新。我正在尝试构建一个查询。*

## 数据布局

```
-- contains various file paths, grouped as sets by uname
CREATE TABLE [dbo].[DirFiles](
    [id] [int] IDENTITY(1,1) NOT NULL,
    [uname] [varchar](50) COLLATE SQL_Latin1_General_CP1_CI_AS NOT NULL,
    [fullpath] [varchar](300) COLLATE SQL_Latin1_General_CP1_CI_AS NOT NULL
) ON [PRIMARY]

-- file attachments table, 'location' field contains a file path
CREATE TABLE [dbo].[BrainAttachments](
    [brain_guid] [uniqueidentifier] NOT NULL,
    [guid] [uniqueidentifier] NOT NULL,
    [location] [varchar](max) COLLATE SQL_Latin1_General_CP1_CI_AS NOT NULL,
  ...more...
) ON [PRIMARY] 
```

## 文件路径

DirFiles 表使用一组名为 'slickmacs' 的路径提供路径，路径采用以下形式：

```
ROOT QUALIFIER           | MODULE | SIGNATURE                     | BACKWARDS PATH                      | FILE     | UID            | EXT
C:\SlickEdit2007\macros\@\__appact\cmd appact_slickhelp()-typeless --__appact--macros--Slickedit2007--C--__appact.e.7946371600659277.#+! 
```

## 用例：重命名

除了根限定符和 UID 之外，此路径中的所有内容都可能发生更改。重命名后，我们希望找到 具有 UID 和根限定符的**BrainAttachment以进行进一步处理。**进一步处理的输入是附件 guid 和来自**DirFiles**的新的重命名路径。

## 障碍：避免分层视图，对性能非常不利。避免使用 temp_tables。所以我们使用 WITH 子句...

尝试在这里观看...

```
-- query currently executes in 2-3 secs WITHOUT the field I desire
;WITH
-- slickmacs: getting a list of all paths under 'slickmacs' and 
-- extracting the UID, aka 'zdot'
-- 7000 records under uname='slickmacs'
slickmacs(fullpath,zdot) as
(
  SELECT     fullpath,dbo.fnPathZdotPart(fullpath)
  FROM         dbo.DirFiles
  WHERE     (uname = 'slickmacs')
),
-- find attachments that qualify, but their location is not in slickmacs
-- 10,000 records in BrainAttachments WHERE 1=1
location_notin(guid,location) as
(
  SELECT     guid,location
  FROM       dbo.BrainAttachments BA
  WHERE     (NOT EXISTS
                            (SELECT     fullpath
                              FROM          slickmacs
                              WHERE      (BA.location = fullpath)))
  AND (SUBSTRING(location, 1, 26) = 'C:\SlickEdit2007\macros\@\')
  AND (SUBSTRING(dbo.fnPathFileExt(location), 1, 1) = '#')
  AND (brain_guid = dbo.GuidOfSlickKeys())
),
-- I am trying to 'float up' the fullpath here so I can 
-- get at it below in my SELECT
location_notin_fp(guid,fullpath) as
(
  select guid
                ,(select fullpath from slickmacs
                  where zdot=dbo.fnPathZdotPart(LNI.location)
                ) as fullpath
  from location_notin LNI
)
-- PROBLEM: Here for the second field, I want the fullpath
SELECT     guid

-- METHOD 1: takes 2 minutes
--                ,(select fullpath from location_notin_fp
--                  where guid=BA.guid
--                ) as fullpath

-- METHOD 2: takes 2 minutes
--                ,(select fullpath from slickmacs
--                  where zdot=dbo.fnPathZdotPart(BA.location)
--                ) as fullpath

FROM       dbo.BrainAttachments BA
-- ALTERNATE METHODS: Gets errors

-- METHOD 3: Error: identifiers not found: dbo.BrainAttachments.guid,location_notin_fp.guid
--INNER JOIN location_notin_fp LNO ON dbo.BrainAttachments.guid=location_notin_fp.guid

-- METHOD 4: Error: identifiers not found: dbo.BrainAttachments.guid
--INNER JOIN (select * from location_notin_fp ) as LNF ON dbo.BrainAttachments.guid=LNF.guid

-- METHOD 5: Error: ambiguous column name: guid
--INNER JOIN (select * from location_notin_fp ) as LNF ON BA.guid=LNF.guid

-- get where location not in fullpaths and location.zdot in fullpaths.zdot
WHERE
(EXISTS
  (SELECT *  FROM location_notin
    WHERE      (BA.guid = guid)
  )
)
AND (EXISTS
  (SELECT fullpath FROM slickmacs
    WHERE      (zdot=dbo.fnPathZdotPart(BA.location))
  )
) 
```

## 概括

所以基本上我有一个计算 f(x) 从两个表中的文件路径获取 UID，但我不想执行该函数 count(T1)*count(T2) 次，我不想使用临时表。

在英语中，“给我磁盘上所有名称已更改的附件，因为文件名的 UID 部分始终保持不变，并且快速完成”**

# mysql - Mysql计数频率

> ID：13398116
> 
> 赞同：7
> 
> 时间：2012-11-15T13:08:01.910
> 
> 标签：mysql, arrays, count, frequency

我检查了类似的问题，但对我的确切问题没有帮助。

所以，我的表是这样的：

```
id age
1  30
2  36
3  30
4  52
5  52
6  30
7  36 
```

ETC..

我需要计算年龄的频率：

```
age freq
30   2
36   3
52   2 
```

我怎样才能抓住这个频率？在此之后，我将需要处理该数据，因此可能需要使用数组？谢谢！

```
function drawChart() {

      // Create the data table.

      var data = new google.visualization.DataTable();
      data.addColumn('string', 'age');
      data.addColumn('number', 'freq');

        <?php
            while($row = mysql_fetch_row($result)) 
            {
            $frequencies[$row[0]] = $frequencies[1];
            echo "data.addRow(['{$row[0]}', {$row[1]}]);";
            }

        ?> 
```

目标是建立一个图表

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-15T13:11:10.270

您需要按共同年龄对行进行分组，然后计算每组中有多少行：

```
SELECT age, COUNT(*) AS freq FROM ages GROUP BY age 
```

要将其转换为数组，请在 PHP 中执行以下操作：

```
$frequencies = array ();
$result = mysql_query('SELECT age, COUNT(*) AS freq FROM table GROUP BY age');
if($result === false) { handle error here... }
while($row = mysql_fetch_row($result)) {
    $frequencies[$row[0]] = $row[1];
} 
```

您现在有一个名为 $frequencies 的关联数组，其中年龄作为键，频率作为值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T13:20:58.457

```
select age, name, count(*) freq from user_age group by age 
```

Sqlfiddle：[http ://sqlfiddle.com/#!2/266d5/2](http://sqlfiddle.com/#!2/266d5/2)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T13:11:24.467

```
select age, count(*) freq from mytable group by age 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-15T13:11:28.357

```
select age, count(id) as freq from table group by age 
```

# search - 网站没有被 Bing 索引

> ID：13398117
> 
> 赞同：0
> 
> 时间：2012-11-15T13:08:16.330
> 
> 标签：search, seo, indexing, search-engine, bing

仪表板截图：

图片位于此处：[http ://s8.postimage.org/uckgo85xf/bing_issue.gif](http://s8.postimage.org/uckgo85xf/bing_issue.gif)

我在让我的网站被 Bing 索引时遇到问题。到目前为止，我看不出设置有什么特别的问题，但也许有人可以帮助我。我已将站点地图提交到系统，并且已成功提交。Bing 发现了 100+ 301 个重定向，这听起来不错，但它们都没有被 Bing 索引。正如您所看到的，页面一度被索引，然后从 200+ 急剧下降到 0，下降了 -100%。

请参阅此处了解以下内容：http: [//i45.tinypic.com/20pab6a.gif](http://i45.tinypic.com/20pab6a.gif)

有什么想法吗？有没有人遇到过这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T14:00:17.703

我想到了两种可能：

1) 该网站拥有许多具有重复内容的页面（并受到 Bing 的惩罚）

2) 该站点在 robots.txt 中拥有这些行，以不为 Bing 索引站点：

```
User-agent: bingbot
Disallow: / 
```

你可以检查这两点。

# c# - 当我们有一个类和接口时如何调用事件

> ID：13398121
> 
> 赞同：0
> 
> 时间：2012-11-15T13:08:45.087
> 
> 标签：c#

这段代码由一个接口委托和一个类硬盘组成，代码运行良好，但我试图了解委托、类、接口和事件是如何工作的，坦率地说，这不是我的代码，但我想从中学习，我的问题严格说明如何调用事件以及程序员在哪里编写或在下面的代码中声明它们，如果我错了，请纠正我

这是一个类发送事件或委托，虽然我不确定

```
namespace ConsoleApplication4
{
    delegate void SendEventHandler(object sender, SendEventArgs args);
    class SendEventArgs : EventArgs
    {
        public byte[] Buf;
        public int ByteCount;
        public object whom;
        public SendEventArgs(byte[] Buf, int ByteCount, object whom)
        {
            this.Buf = Buf;
            this.ByteCount = ByteCount;
            this.whom = whom;
        }
    }
} 
```

以我自己的理解，这是一个接口名称 isata

```
interface ISata
    {
        //voltage +12В, +5В или +3.3В
        Double Voltage { get; }
        //transfer rate (bytes / sec)
        Int64 DataTransferRate { get; }
        event SendEventHandler SendEvent;
        void Send(byte[] Buf, int ByteCount, object whom);
        void OnReceive(object sender, SendEventArgs args);
        void ConnectWith(ISata Device);
        void Disconnect(ISata Device); 
```

这是一个类硬盘

```
namespace ConsoleApplication4
{
    class HardDisk : ISata
    {
        string Id = "no id";

        public Double Voltage
        {
            get
            {
                return 12;
            }
        }

        public Int64 DataTransferRate
        {
            get
            {
                return 629145600;
            }
        }

        public event SendEventHandler SendEvent;

        public HardDisk(string Id)
        {
            this.Id = Id;
        }

        public override string ToString()
        {
            return "HD{" + Id + "}";
        }

        public void ConnectWith(ISata Device)
        {
            Device.SendEvent += OnReceive;
            this.SendEvent += Device.OnReceive;            
            Console.WriteLine(this + " connected with device " + Device);
        }

        public void Disconnect(ISata ConnDev)
        {
            if (ConnDev != null)
            {
                this.SendEvent -= ConnDev.OnReceive;
                ConnDev.SendEvent -= OnReceive;
                Console.WriteLine(this + " disconnected from device " + ConnDev);                
            }            
        }

        public void Send(byte[] Buf, int ByteCount, object whom)
        {
            if (SendEvent != null)
            {
                SendEvent(this, new SendEventArgs(Buf, ByteCount, whom));
            }
        }

        public void OnReceive(object sender, SendEventArgs args)
        {
            if(args.whom == this)
                Console.WriteLine(this + " received data from " + sender);
        }
    }
} 
```

我的问题是，他在哪里宣布了这些事件以及事件是在哪里调用的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T13:17:33.203

在界面中可以看到：

```
event SendEventHandler SendEvent; 
```

那就是宣言。它说有一个事件被调用`SendEvent`，它的签名应该是`SendEventHandler` （在主文件中声明：

```
SendEventHandler(object sender, SendEventArgs args); 
```

)

通过`SendEvent(this, new SendEventArgs(Buf, ByteCount, whom));`在`Harddisk`类中使用来调用事件。

我认为你应该阅读事件。事件只是一个多播委托 ( [MSDN](http://msdn.microsoft.com/en-us/library/aa645739%28v=vs.71%29.aspx) )。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T13:17:58.990

这是声明事件的地方：

```
public event SendEventHandler SendEvent; 
```

这是订阅事件的地方；当事件发生时，将调用`Device`'s方法：`OnReceive`

```
this.SendEvent += Device.OnReceive 
```

这是取消订阅事件的地方；它会在事件发生时停止调用该方法：

```
this.SendEvent -= ConnDev.OnReceive 
```

这是事件被“调用”的地方：

```
if (SendEvent != null)
{
    SendEvent(this, new SendEventArgs(Buf, ByteCount, whom));
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T13:16:34.350

在硬盘中，他连接了`ConnectWith`. 他在`Send`. += 和 -= 运算符用于向事件添加事件处理程序。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-15T13:20:39.093

很久以前我在网上找到一本书，它是免费的，非常适合学习。

我建议你看一看，你会发现其中有很多很好的解释，包括事件处理程序/多播委托。

[http://www.programmersheaven.com/ebooks/csharp_ebook.pdf](http://www.programmersheaven.com/ebooks/csharp_ebook.pdf)

# arrays - 谁能告诉我 ada 中 Real_Matrix 的精度

> ID：13398127
> 
> 赞同：2
> 
> 时间：2012-11-15T13:09:04.020
> 
> 标签：arrays, matrix, ada

有谁知道 ada 中 Real_Matrix 的精度，使用下面的包？

```
 with Ada.Numerics.Real_Arrays 
```

有没有增加它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-15T13:37:58.463

根据[LRM](http://www.ada-auth.org/standards/12rm/html/RM-G-3-1.html#I8301)，“库包 Numerics.Real_Arrays 被声明为纯类型，并定义了与 Numerics.Generic_Real_Arrays 相同的类型和子程序，只是预定义类型 Float 系统地替换了 Real'Base。”

这意味着 Real_Matrix 值的精度将是预定义的 Float 类型的精度，可以为您的平台确定为[Float'Digits](http://www.ada-auth.org/standards/12rm/html/RM-3-5-8.html)的值。

（有趣的是，该措辞建议用文本替换所有“Real”和 Real'Base 子程序参数的“Float”，然而，GNAT GPL 2012 的 Real_Arrays 版本只是用 Float 实例化 Generic_Real_Arrays 包。）

提高精度可以通过使用精度更高的实例之一来完成：Long_Real_Arrays 或 Long_Long_Real_Arrays，或者通过定义您自己的具有所需精度的浮点类型并用它实例化 Generic_Real_Arrays。

# r - 如何附加一些文件并跳过前两行？

> ID：13398128
> 
> 赞同：0
> 
> 时间：2012-11-15T13:09:03.290
> 
> 标签：r, file

`file1.txt`例如，我有 3 个文本文件：`file2.txt`和`file3.txt`在一个目录中。所有文件都具有相同的列名（即前 2 行）。我想创建一个新的文本文件，其中包含 3 个文件的所有数据，但我不想重复列*的名称，即新文件中的列名必须只写一次，在前两行*。

我知道如何使用`read.table()`and来做到这一点`write table()`。但是还有其他选择吗？就像是...`file.append()`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T13:45:22.577

**除了**传递的第一个文件之外，没有任何预先存在的等价物`file.append()`也修剪掉所有文件的第一行。但这是 R，所以你可以编写一个函数来执行此操作，如下所示。

 **使用`readLines()`and`cat()`将输出一个看起来更像由而`file.append()`不是使用`read.table()`and生成的文件`write.table()`。对于大文件，它也会更快。

```
file.trim.append <- function(fnames, outfile) {
    ## Take header lines from first file
    cat(readLines(fnames[1], n = 2), file = outfile, sep = "\n")
    ## Append all but first two lines of each
    lapply(fnames, function(fname) {
        cat(readLines(fname)[-1:-2], file = outfile,
            sep = "\n", append = TRUE)
    })
}

## Try it out
write.table(head(mtcars), file="file1.txt")
write.table(head(mtcars), file="file2.txt")
write.table(head(mtcars), file="file3.txt")
ff <- dir(pattern = "^file[[:digit:]]*.txt")

file.trim.append(ff, "file123.txt") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T13:42:29.557

如果您的数据适合内存，最简单的方法是读取所有文件，将它们逐行追加并转储大数据帧。我会使用 plyr 来简化这个：

```
require(plyr)
big_data = ldply(c("file1", "file2", etc), read.table)
write.csv(big_data, file = "bigfile") 
```

另一种解决方案是使用 Bash 工具附加文件。参见例如头尾和>>。这当然只能在 Unix 或 Mac 下工作，或者在 windows 下使用 MinGW 或 Cygwin。可以使用系统函数从 R 中调用这些工具。**

# javascript - Live Web Audio Input 是否可以在 Ubuntu 上的 Google Chrome 中使用？

> ID：13398130
> 
> 赞同：2
> 
> 时间：2012-11-15T13:09:08.210
> 
> 标签：javascript, google-chrome, webrtc, webkitaudiocontext

根据这篇文章，以下代码应该可以在 OSX 和 Windows 上运行，但没有提到 Linux：

[http://updates.html5rocks.com/2012/09/Live-Web-Audio-Input-Enabled](http://updates.html5rocks.com/2012/09/Live-Web-Audio-Input-Enabled)

```
// success callback when requesting audio input stream
function gotStream(stream) {
    var audioContext = new webkitAudioContext();

    // Create an AudioNode from the stream.
    var mediaStreamSource = audioContext.createMediaStreamSource( stream );

    // Connect it to the destination to hear yourself (or any other node for processing!)
    mediaStreamSource.connect( audioContext.destination );
}

navigator.webkitGetUserMedia( {audio:true}, gotStream ); 
```

我下载了 Chrome Dev 版本：版本 25.0.1323.1 dev 并且它不工作。

我启用了以下标志：

```
Web Audio Input Mac, Windows, Linux, Chrome OS
Enables live audio input using getUserMedia() and the Web Audio API. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T21:37:29.753

从 chrome 版本 24.0.1312.69 和 Dartium 版本 26.0.1403.0（铬衍生物）开始，我无法在 Ubuntu 12.10 上使用 Live Input从[http://webaudiodemos.appspot.com/制作任何演示。](http://webaudiodemos.appspot.com/)我启用了正确的 chrome://flags。

对我来说，它在 MacOS 上运行良好，但在使用麦克风或 USB 摄像头的 Ubuntu 上却失败了。Ubuntu Sound Recorder 工作正常，所以我知道我的硬件工作正常。

很高兴知道它是否应该在 Linux 上运行，或者何时计划得到官方支持。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T23:52:00.910

我也可以验证这一点。在官方 Chromium 错误跟踪器上创建票证：

[http://code.google.com/p/chromium/issues/detail?id=177862](http://code.google.com/p/chromium/issues/detail?id=177862)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-15T20:23:51.687

[在https://src.chromium.org/viewvc/chrome?revision=192893&view=revision](https://src.chromium.org/viewvc/chrome?revision=192893&view=revision)中添加了 Linux 对实时音频的支持。

目前适用于 Google Chrome 版本 28.0.1500.89 测试版。在 Arch Linux 上测试。

# api - SoundCloud track id 是否保证随着时间的推移而上升？

> ID：13398134
> 
> 赞同：0
> 
> 时间：2012-11-15T13:09:14.887
> 
> 标签：api, soundcloud

我正在获取几组曲目并将它们组合成一个我想按`created_with`字段排序的单个数组，即首先是最近的曲目。

但是，由于我想要的只是这些曲目的日期顺序，因此更简单的排序是使用该`id`字段。我可以假设更高的 id 意味着更近的轨道吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T23:54:06.153

如果它很重要，那么我不会这样做，因为这在任何地方都没有定义，并且将来可能会改变。

# ios - ios中的警报视图和操作表

> ID：13398137
> 
> 赞同：-2
> 
> 时间：2012-11-15T13:09:25.023
> 
> 标签：ios, uialertview

我是 I-phone OS 的初学者。我看过操作表和警报视图。我似乎它们的功能都一样。我可以知道它们之间的确切区别吗？在此先感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T13:14:54.537

顾名思义。AlertView 主要用于提醒用户注意某事。例如“我们为您下载了一条新消息！”。

ActionSheet 用于让用户指定一个动作。比如‘你想做什么？编辑、删除、取消'

所以第一个是提醒用户，另一个是要求采取行动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T13:17:17.627

**警报会为人们提供影响他们使用应用程序（或设备）的重要信息。**

**操作表显示一组与用户启动的任务相关的选择。**

详细说明请参考苹果的[MobileHIG](http://developer.apple.com/library/ios/#documentation/userexperience/conceptual/mobilehig/UIElementGuidelines/UIElementGuidelines.html#//apple_ref/doc/uid/TP40006556-CH13-SW41)文档。

> **UIAlertView 指南**
> 
> 警报出现的频率低有助于用户认真对待它们。请务必尽量减少您的应用显示的警报数量，并确保每个警报都提供关键信息和有用的选择。
> 
> 避免创建不必要的警报。
> 
> 通常，如果出现以下情况，则不需要警报：
> 
> ```
> Merely increase the visibility of some information, especially information that is related to the standard functioning of your app.
> 
> Instead, you should design an eye-catching way to display the information that harmonizes with your app’s style.
> 
> Update users on tasks that are progressing normally.
> 
> Instead, consider using a progress view or an activity indicator to provide progress-related feedback to users (these methods of 
> ```
> 
> 反馈在“进度视图”和“活动指示器”中描述）。
> 
> ```
> Ask for confirmation of user-initiated actions.
> 
> To get confirmation for an action the user initiated, even a potentially risky action such as deleting a contact, you should use an 
> ```
> 
> 行动单。
> 
> ```
> Inform users of errors or problems about which they can do nothing.
> 
> Although it might be necessary to use an alert to tell users about a critical problem they can’t fix, it’s better to integrate such 
> ```
> 
> 如果可能，将信息写入 UI。例如，不是每次服务器连接失败时都告诉用户，而是显示上次成功连接的时间。
> 
> **UIActionSheet 指南**
> 
> 使用操作表来：
> 
> ```
> Provide alternate ways a task can be completed. An action sheet allows you to provide a range of choices that make sense in the 
> ```
> 
> 当前任务的上下文，而不是在用户界面中给这些选择一个永久的位置。
> 
> ```
> Get confirmation before completing a potentially dangerous task. An action sheet prompts users to think about the potentially dangerous 
> ```
> 
> 他们即将采取的步骤的影响，并为他们提供了一些选择。这种类型的通信在基于 iOS 的设备上尤为重要，因为有时用户会无意中点击控件。
> 
> 在 iPhone 上，将操作表背景外观与导航栏和工具栏相协调。如果您的应用使用黑色导航栏和工具栏，请使用半透明黑色背景。如果您的导航栏和工具栏是默认的蓝色，请使用默认的蓝色背景。
> 
> iPhone 应用程序中的所有操作表都应具有相同的背景颜色。
> 
> 在 iPhone 上，包括一个取消按钮，以便用户可以轻松安全地放弃任务。将取消按钮放在操作表的底部，以鼓励用户在做出选择之前通读所有备选方案。默认情况下，取消按钮的外观与操作表的背景相协调。
> 
> 在 iPad 上，选择是显示带动画还是不带动画的操作表。
> 
> ```
> Display an action sheet without animation to provide alternatives related to a task that the user initiates from outside a popover. 
> ```
> 
> 如果没有动画，动作表和它的弹出框会同时出现。当您以这种方式显示操作表时，弹出框的箭头指向用户点击以启动任务的控件或区域。
> 
> ```
> Do not include a Cancel button when the action sheet is displayed without animation, because people can tap outside the popover to 
> ```
> 
> 在不选择其他选项之一的情况下关闭操作表。
> 
> ```
> Display an action sheet with animation to provide alternatives related to a task that the user initiates from within an open popover. 
> ```
> 
> 使用动画，操作表会在打开的弹出框的内容上滑动。
> 
> ```
> An animated action sheet should include a Cancel button, because people need to be able to dismiss the action sheet without closing the 
> ```
> 
> 弹出框。

# android - 果冻豆上的 RTSP 不起作用

> ID：13398138
> 
> 赞同：4
> 
> 时间：2012-11-15T13:09:26.220
> 
> 标签：android, video-streaming, h.264, rtsp, android-4.2-jelly-bean

我对流式直播视频有疑问。我正在尝试通过 rtsp 将实时内容流式传输到 android 手机。一切正常，直到在带有 4.1.1 操作系统的三星 Galaxy 3 上测试我的应用程序。三星不是问题，因为流在​​更新之前已经工作（当操作系统是 4.0.4 时）。我的猜测是他们用 h264 编解码器搞砸了一些东西。
我使用 H264 编码的视频和音频 SPEEX 将流从 Flash 应用程序发送到服务器。在服务器上，我使用流并使用 ffmpeg 将音频编码为 AAC，现在它已准备好供 android 手机接收。
但是现在发生了什么：我们可以在从 2.2 到 4.0.4 的所有手机上看到相同的流，但在 4.1.1 视频上已损坏。音频似乎还可以......我认为他们改变了一些关于 h264 解码的东西，但我不知道是什么......
有人有同样的问题吗？或者有我的解决方案？
我在 android 上使用 videoView 播放视频，如下所示：

```
private void playStream(String url){
    try{       
            video.setVideoPath(" rtsp://xxx.xxx.xx.xx:1935/APPNAME/pprogramer");
        video.setOnPreparedListener(this);
    }catch (Exception exc) {            
        finish();
    }   
}

    @Override
    public void onPrepared(MediaPlayer mp) {
        mp.start();
    } 
```

# ios - “屏幕外” ADBannerView 会计算展示次数吗？

> ID：13398140
> 
> 赞同：1
> 
> 时间：2012-11-15T13:09:36.320
> 
> 标签：ios, iad, off-screen, impressions

我正在维护 ADBannerView 的唯一实例（如文档所建议的那样），并且存在于整个 UX 中的某些点。

但我可以看到 bannerViewDidLoadAd: 即使没有显示横幅，也会继续调用回调。

一方面这真的很好（这就是我做出这个设计的原因），但我想知道这些加载是否会在某些汇总统计信息中计为展示次数？这可能会以某种意想不到的方式影响我的收入。

会算吗？你的经验是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T14:09:43.297

**没有。** :)

隐含在另一条错误消息中，告诉我“显示了横幅视图，但没有加载广告”，左右。因此，无论发生什么，似乎框架都在跟踪横幅视图的可见性。这是... ...一点也不奇怪，只是想确定一下。

# jmeter - 如果插件 GUI 关闭会发生什么？

> ID：13398143
> 
> 赞同：2
> 
> 时间：2012-11-15T13:09:51.233
> 
> 标签：jmeter, jmeter-plugins

我正在为 JMeter 开发一个插件。

其中一项操作是每 30 秒检查一次与我们服务器的连接。为此，我在`checkConnection();`方法中启动单独的线程，并将此方法放置到侦听器的构造函数中。如果用户用我的侦听器关闭测试计划或从测试计划中删除侦听器，我想中断线程。

请给我一个建议，`interrupt();`这个线程放在哪里？
谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T23:14:55.393

在我看来，您的线程生命周期应该是侦听器生命周期的一部分，所以在我看来，在构造函数中这样做是个坏主意。

您不能在侦听器方法中这样做吗？

# c# - 活动目录权限管理系统 SDK

> ID：13398155
> 
> 赞同：1
> 
> 时间：2012-11-15T13:10:45.990
> 
> 标签：c#, .net, web-services, sdk, rms

我开发了一个 DLL 作为 RMS 服务器和他想以编程方式使用其服务的任何人之间的代理，该 DLL 工作得很好，但是当我想在 .Net Web 服务中使用这个 DLL 时出现问题，它在 DRMInitEnvironment 中给我一个错误并且错误代码`0x8004930c`与清单违规错误有关。

清单配置如下

自动引导

```
C:\\Program Files\\Microsoft SDKs\\Windows\\v7.1\\Bin
\\isvtier5appsigningprivkey.dat 
```

模块化列表请求哈希

```
C:\\Users\\administrator\\Documents\\Visual Studio 2008\\Projects
\\TestWBS\\TestWBS\\bin\\TestWBS.dll 
```

选择 NOHASH

```
C:\\Users\\administrator\\Documents\\Visual Studio 2008\\Projects\\TestWBS
\\TestWBS\\bin\\RMSPROXY.dll 
```

请求 NOHASH

```
%SYSTEMROOT%\\system32\\msdrm.dll 
```

政策列表包容性公钥

```
C:\\Program Files\\Microsoft SDKs\\Windows\\v7.1\\Bin
\\isvtier5appsigningpubkey.dat 
```

排除

笔记

1.  TestWBS.dll 是 Web 服务生成的 DLL
2.  RMSPROXY.dll 是已开发用作代理的 DLL
3.  我将清单文件作为 base64 编码字符串传递给 RMSPROXY
4.  我创建了 C# 控制台应用程序来使用 DLL，它工作得很好，C# 应用程序清单如下所示

自动引导

```
C:\\Program Files\\Microsoft SDKs\\Windows\\v7.1\\Bin
\\isvtier5appsigningprivkey.dat 
```

模块化列表请求哈希

```
C:\\Users\\administrator\\Documents\\Visual Studio 2008\\Projects
\\testLibcClient\\testLibcClient\\bin\\Debug\\testLibcClient.exe

REQ NOHASH %SYSTEMROOT%\\system32\\msdrm.dll 
```

政策列表包容性公钥

```
C:\\Program Files\\Microsoft SDKs\\Windows\\v7.1\\Bin
\\isvtier5appsigningpubkey.dat 
```

排除

我知道问题出在清单中，但我不知道是什么以及在哪里。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2014-02-15T22:25:38.013

我发现了解决方案，

1.  我需要为 w3wp.exe 创建一个清单并对其进行签名，以代表 IIS 工作者
2.  将 IIS 中的应用程序池标识更改为超级用户，该用户将充当所有受保护文档的 DR
3.  启用 IIS 模拟并分配与之前相同的标识

# debugging - Windbg 控制台日志记录

> ID：13398161
> 
> 赞同：3
> 
> 时间：2012-11-15T13:10:57.993
> 
> 标签：debugging, windbg

是否可以有条件或无条件地在 Windbg 控制台中记录某些内容。我可以更改我的源代码并这样做，但由于各种原因，包括签出 cerain 文件、编辑代码、构建和部署，这很乏味。这是非常乏味和非生产性的。我正在寻找某些东西，例如条件断点。

```
bp module!Class::funcname+0x0ff5E1 ".if(cond) {exp1;exp2 } .else {gc}" 
```

根据 cond 登录到 windbg 控制台（可能总是 cond=1）。我用过***？？***在调试时打印值的命令，但是否可以自动化，因为我需要许多值，并且 1 比 1 执行它需要 toime 并且那也没有格式化！我正在寻找类似上述条件断点或任何其他方式的东西。任何教程/示例肯定会有所帮助。

编辑：好吧，我想出的一种方法可能是

```
bp module!Class::Func+0x0FF5E1 ".if(cond) {.echo The value of variable ALPHA is; ?? ALPHA;gc} .else {.echo SomeOtherTextIfNeeded; gc;}:" 
```

这可能很长，但很好，因为我们也必须在代码中添加等效的行才能在日志中显示这些日志消息；在这里我们不更改代码。我肯定会在这里看到其他方式:)

另一种可能是使用格式化输出；最重要的是，如果它的格式和变量名可以从文件中读取，那就太好了！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T13:20:06.117

您可以以编程方式重用同一日志打开和关闭日志文件

```
bp module!Class::funcname+0x0ff5E1 ".if(cond) {.logappend c:\mylog.txt;exp2;.logclose;gc; } .else {gc}" 
```

# tortoisesvn - 在重组 SVN 存储库结构方面需要建议

> ID：13398165
> 
> 赞同：0
> 
> 时间：2012-11-15T13:11:10.637
> 
> 标签：tortoisesvn, repository

我发现了很多关于这个主题的问题，但无法从他们那里得到我的具体答案，所以希望这不是重复的。

我在 1.7 使用 Tortoise SVN（和 Visual Studio 中的 Ankh）。我现在有这个 SVN 结构：

分支
|-Branch 1
|-Branch 2（等等）
代码（我们的主干）
|-SharedStuff
|-Product #1
|-Product #2
标签
|-tagged release #1
|-tagged release #2（等等... )

我的问题是每次创建分支或标签时，我都必须将其从代码文件夹中删除。如果我对产品#1 进行分支，我需要产品#1 文件夹和SharedStuff 文件夹。同样对于产品#2 的一个分支...我需要它自己的产品代码和 SharedStuff。

我想要的是创建一个分支，其中包含该产品更新所需的内容。

问题 #1：我可以以允许我想要的方式重新组织它吗？
问题#2：还有更多我不明白的分支......我错过了重点吗？

**编辑：** 为了更清楚起见，这是我试图为给定分支实现的最终结果。

例如，当我为 Product #1 创建一个分支时，我希望最终结果是：

Branch_of_Product_#1
|-SharedStuff
|-产品#1

...或者当它是产品 #2 时：

Branch_of_Product_#2
|-SharedStuff
|-产品#2

所以，最终我*总是*需要 SharedStuff，但*只有*作为分支原因的产品。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T14:06:25.850

你错过了 Subversion 中的一个有用的特性：externals

如果**在**每个产品中都有链接到 SharedStuff 的子目录，那么您将*只标记产品*子树

# php - sed(1)：在 PHP 数组的末尾添加一行

> ID：13398171
> 
> 赞同：0
> 
> 时间：2012-11-15T13:11:26.747
> 
> 标签：php, sed

我有以下 PHP 文件：

```
<?php

use Symfony\Component\HttpKernel\Kernel;
use Symfony\Component\Config\Loader\LoaderInterface;

class AppKernel extends Kernel
{
    public function registerBundles()
    {
        $bundles = array(
            new Symfony\Bundle\FrameworkBundle\FrameworkBundle(),
            new Symfony\Bundle\SecurityBundle\SecurityBundle(),
            new Symfony\Bundle\TwigBundle\TwigBundle(),
            new Symfony\Bundle\MonologBundle\MonologBundle(),
            new Symfony\Bundle\SwiftmailerBundle\SwiftmailerBundle(),
            new Symfony\Bundle\AsseticBundle\AsseticBundle(),
            new Doctrine\Bundle\DoctrineBundle\DoctrineBundle(),
            new Sensio\Bundle\FrameworkExtraBundle\SensioFrameworkExtraBundle(),
            new JMS\AopBundle\JMSAopBundle(),
            new JMS\DiExtraBundle\JMSDiExtraBundle($this),
            new JMS\SecurityExtraBundle\JMSSecurityExtraBundle(),
        );

        if (in_array($this->getEnvironment(), array('dev', 'test'))) {
            $bundles[] = new Acme\DemoBundle\AcmeDemoBundle();
            $bundles[] = new Symfony\Bundle\WebProfilerBundle\WebProfilerBundle();
            $bundles[] = new Sensio\Bundle\DistributionBundle\SensioDistributionBundle();
            $bundles[] = new Sensio\Bundle\GeneratorBundle\SensioGeneratorBundle();
        }

        return $bundles;
    }

    public function registerContainerConfiguration(LoaderInterface $loader)
    {
        $loader->load(__DIR__.'/config/config_'.$this->getEnvironment().'.yml');
    }
} 
```

考虑到最后一行可能有也可能没有逗号，我想在最后的 $bundles 变量中添加一行。

我需要添加的行如下：

```
new FOS\\UserBundle\\FOSUserBundle() 
```

我编写了我的版本，但如果 $bundles 数组的最后一个元素中有逗号，它就不起作用。

需要稍作修改，但我不知道该怎么做。

```
sed '/bundles.=.array/,/);/ { /[^(,;]$/ s//&,\n            new FOS\\UserBundle\\FOSUserBundle()/ }' app/AppKernel.php; 
```

最终文件应如下所示：

```
<?php

use Symfony\Component\HttpKernel\Kernel;
use Symfony\Component\Config\Loader\LoaderInterface;

class AppKernel extends Kernel
{
    public function registerBundles()
    {
        $bundles = array(
            new Symfony\Bundle\FrameworkBundle\FrameworkBundle(),
            new Symfony\Bundle\SecurityBundle\SecurityBundle(),
            new Symfony\Bundle\TwigBundle\TwigBundle(),
            new Symfony\Bundle\MonologBundle\MonologBundle(),
            new Symfony\Bundle\SwiftmailerBundle\SwiftmailerBundle(),
            new Symfony\Bundle\AsseticBundle\AsseticBundle(),
            new Doctrine\Bundle\DoctrineBundle\DoctrineBundle(),
            new Sensio\Bundle\FrameworkExtraBundle\SensioFrameworkExtraBundle(),
            new JMS\AopBundle\JMSAopBundle(),
            new JMS\DiExtraBundle\JMSDiExtraBundle($this),
            new JMS\SecurityExtraBundle\JMSSecurityExtraBundle(),
            new FOS\UserBundle\FOSUserBundle(), //with comma or without

        );

        if (in_array($this->getEnvironment(), array('dev', 'test'))) {
            $bundles[] = new Acme\DemoBundle\AcmeDemoBundle();
            $bundles[] = new Symfony\Bundle\WebProfilerBundle\WebProfilerBundle();
            $bundles[] = new Sensio\Bundle\DistributionBundle\SensioDistributionBundle();
            $bundles[] = new Sensio\Bundle\GeneratorBundle\SensioGeneratorBundle();
        }

        return $bundles;
    }

    public function registerContainerConfiguration(LoaderInterface $loader)
    {
        $loader->load(__DIR__.'/config/config_'.$this->getEnvironment().'.yml');
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T08:19:46.320

不用说，如果您的文件格式偏差太大，这将失败，但对于您的情况，以下适用于 GNU sed：

*add_line.sed*

```
/bundles.=.array/ {     # When the right array is found
  : a
  N                     # Keep two lines in pattern space
  /);/bb                # Jump to b when end of array reached
  P                     # Print first line of pattern space
  s/[^\n]*\n//          # and delete it
  ba                    # Jump to a and repeat
  : b
  /,\n/! s#\n#,\n#      # Ensure comma ends the line before end of array
  s#\([ \t]*\)\([^\n]*\)\n#\1\2\n\1new FOS\\UserBundle\\FOSUserBundle()\n#
} 
```

像这样运行它：

```
sed -f add_line.sed app/AppKernel.php 
```

或作为单行：

```
sed '/bundles.=.array/ { :a; N; /);/bb; P; s/[^\n]*\n//; ba; :b; /,\n/! s#\n#,\n#; s#\([ \t]*\)\([^\n]*\)\n#\1\2\n\1new FOS\\UserBundle\\FOSUserBundle()\n#; }' app/AppKernel.php 
```

输出摘录：

```
...
    $bundles = array(
        new Symfony\Bundle\FrameworkBundle\FrameworkBundle(),
        new Symfony\Bundle\SecurityBundle\SecurityBundle(),
        new Symfony\Bundle\TwigBundle\TwigBundle(),
        new Symfony\Bundle\MonologBundle\MonologBundle(),
        new Symfony\Bundle\SwiftmailerBundle\SwiftmailerBundle(),
        new Symfony\Bundle\AsseticBundle\AsseticBundle(),
        new Doctrine\Bundle\DoctrineBundle\DoctrineBundle(),
        new Sensio\Bundle\FrameworkExtraBundle\SensioFrameworkExtraBundle(),
        new JMS\AopBundle\JMSAopBundle(),
        new JMS\DiExtraBundle\JMSDiExtraBundle($this),
        new JMS\SecurityExtraBundle\JMSSecurityExtraBundle(),
        new FOS\UserBundle\FOSUserBundle()
    );

... 
```

# android - amazon sdk android 示例代码显示异常

> ID：13398173
> 
> 赞同：2
> 
> 时间：2012-11-15T13:11:36.707
> 
> 标签：android, amazon-s3, amazon-web-services

我正在尝试在 aws-android-sdk-1.4.4 中运行示例代码。我已经编辑了文档中指定的密钥和访问密钥。但它显示以下错误：

11-15 17:22:09.835：I/AmazonHttpClient(2141)：无法执行 HTTP 请求：无法解析主机“s3.amazonaws.com”：没有与主机名关联的地址

任何人都可以帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T13:19:28.773

确保您在清单中包含以下权限。

```
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T17:40:22.583

我帮助维护适用于 Android 的 AWS 开发工具包。我们的示例应该开箱即用，因此请确保您的设备/模拟器能够通过启动 Web 浏览器或使用其他应用程序连接到 Internet。如果无法建立出站连接，您可能需要重新启动模拟器。

另外，请确保在输入访问或密钥时不要输入任何额外的空格。

**2014 年 10 月 7 日更新：**随着适用于 Android 的 AWS 开发工具包版本 2 的更新，我们决定要求将开发工具包 jar 文件导入所有示例，而不是将它们包含在存储库中。所有示例都有 README 文件，这些文件应指示开始使用该特定示例的所有必要步骤。

# x86 - x86_64 架构中多页大小的 TLB 使用情况

> ID：13398178
> 
> 赞同：2
> 
> 时间：2012-11-15T13:11:52.723
> 
> 标签：x86, x86-64, tlb, mmu

有人知道 TLB（L1 和 L2）是否支持在现代 x86_64 微处理器（Intel SandyBridge、AMD Bulldozer）中同时访问多个页面大小？x86 核心管道是否向 MMU 提供有关页面大小的信息？

最好的祝福，

亚历克斯

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-16T14:30:36.897

这不是 TLB 允许什么的问题，而是架构允许什么的问题。该体系结构表明，您可以在同一页面层次结构中混合小 (4k)、大 (2M) 和大 (1G) 页面，方法是`PS`将页面目录条目中的位设置在适当的级别。

并非所有级别的 TLB 都必须能够缓存所有大小的页面，但这不应该阻止您混合页面，如果您愿意的话。

现在，在 MMU 之前的 x86 管道中没有任何东西实际上需要有关页面大小的数据。这都是在页面层次结构本身中编码的。

* * *

关于页面拆分，如果您在 address 有一个页面边界`x`，并且您有一个开始于`x - 1`超过 1 字节宽的内存访问，它将访问两个页面。即使两个页面的大小不同，这也将起作用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-03-19T21:05:54.540

TLB 通常分为两部分：代码和数据。这些中的每一个都可以分为多个级别，但通常是 L1，也可能是 L2。每个级别可能支持单一页面大小或混合页面大小。

例如在我的处理器上，我有一个用于 2mb/4mb 页面的混合 I-L1 TLB，一个用于 2mb/4mb 页面的 D-L1 TLB，混合，一个用于 4kb 页面的 I-L1 TLB，一个用于 4kb 页面的 D-L1 TLB最后是 4kb 页面的 D-L2 TLB。

当 TLB 支持混合页面时，TLB 存储与特定虚拟地址标签相关联的页面大小。

当 TLB 级别的每个页面大小有多个单独的缓存时，由于页面大小未知，因此查找是并行执行的。

在任何一种情况下，如果 L1 TLB 未命中，则将在尝试页表遍历之前检查 L2。

既然细节已经解决了，我们终于可以回答你的问题了。您可以同时使用多个页面大小，但是它们永远不能重叠（操作系统不会让您在同一位置映射 2 个虚拟页面）。事实上，内核在内部使用多种页面大小来处理各种事情。

根据操作系统，在用户空间进程中使用多个页面大小可能很容易，也可能很痛苦。有关这方面的更多详细信息，请参阅 Linux Huge page support 和 Windows Large Pages support。其他操作系统将在其文档中对此进行详细说明。

# html - 浮动会导致 IE7 中的行之间出现不需要的空间

> ID：13398181
> 
> 赞同：0
> 
> 时间：2012-11-15T13:12:02.617
> 
> 标签：html, css, cross-browser

我有多行样式如下所示。“searchLine”类用于每种线型。这在 IE8、Chrome 和 Firefox 中运行良好。但是在**IE7**中，每行之间都有不需要的空间。当 float left 被移除时，这条不需要的线可以被移除。

1.  使用浮点数时出现这种不需要的空间的原因是什么？

注意：我知道我们可以用 overflow:auto 而不是 float:left 来修复它。但我试图了解**这种行为的原因**。

有关完整代码，请参阅[http://jsfiddle.net/Lijo/sSnGA/1/](http://jsfiddle.net/Lijo/sSnGA/1/)。

```
 .searchLine
    {
        float: left;
        width: auto;
        min-width: 700px;
        height: auto;
        margin: 1px 1px 1px 1px;
        padding: 0 0 0 0px;
        border: 1px solid Cyan;
    } 
```

参考：

1.  [使用“<select>”时，Div 行为不正确；使用“<input>”时工作正常](https://stackoverflow.com/questions/13140902/div-behave-incorrectly-when-select-is-used-works-fine-when-input-is-use)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T13:16:40.327

min-width 在 IE7 中无法正常工作，有时甚至根本无法正常工作，尽管我忘记了细节。您可能需要处理 IE 的“haslayout”来修复它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T17:48:27.117

如果从 .searchLine 类中删除“float:left”，空格就会消失。

# php - 弹窗输入密码，然后提交弹窗

> ID：13398186
> 
> 赞同：0
> 
> 时间：2012-11-15T13:12:33.450
> 
> 标签：php, javascript, jquery, mysql

我有一个包含用户名列表的网页（这是基于 PHP 的应用程序）.​​..我想通过单击一些用户名来选择一个弹出窗口来实现这一点，该窗口将打开一个密码输入字段和提交按钮。输入密码后，需要按提交...结果应该是弹出窗口将消失，主页将通过用户名和密码登录（来自弹出窗口）。

希望我能描述清楚我的问题。如果有不清楚的事情，请不要犹豫，问我。我将不胜感激任何形式的支持！预先感谢您对我们的支持！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T13:20:40.830

你可以通过多种方式做到这一点。想到的第一个（也是最简单的）是页面上开始隐藏的 DIV。当您单击用户名时，您将 div 移动到适当的位置，显示它并收集输入。DIV 具有“登录”按钮并重定向到所有相关的 FORM 位。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-15T13:21:32.950

好吧，有一种更复杂的方式和一种更简单的方式，可以进行一些以旧换新。

首先是简单的解决方案：

*   用户输入密码并按提交
*   如果密码正确，网站会设置一个 cookie，其中包含提交的弹出窗口的用户 ID
*   在主页上，您必须刷新，您的服务器会看到 cookie，您可以发送安全内容

以旧换新是您必须刷新原始页面。

现在以更复杂的方式：

*   您在服务器和主客户端页面之间有一个永久的 websocket 连接（我认为 IE 不支持这个）。
*   当用户提交表单时，服务器通过 websocket 发送一些新数据（在上一个示例的重新加载中将加载的页面）

我会选择更简单的版本，因为它有更好的支持并且更容易实现。

# windows - 注册表版本错误

> ID：13398190
> 
> 赞同：2
> 
> 时间：2012-11-15T13:12:47.630
> 
> 标签：windows, registry, directx, directx-9

我想从注册表中读取 DirectX 版本。

我在值版本下找到了 HKLM\Software\Microsoft\DirectX 的值。

我的问题：参考[Hey Scripting Guy！](http://blogs.technet.com/b/heyscriptingguy/archive/2007/01/08/how-can-i-determine-the-version-of-directx-installed-on-a-computer.aspx)我的版本“4.09.00.0904”是 9.0c，但 dxdiag 显示 DirectX 11。

如何找到合适的版本？或者有没有办法在没有注册表的情况下解决这个问题？

编辑：我正在使用 Windows 7 Professional x86

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-15T14:25:35.873

您无法从注册表中检测到任何高于 DirectX 9 的版本。它根本没有存储在那里。

对于 10 及更高版本，您应该使用 DXDiag 的 COM 接口。

1.  实例化 DXDiagProvider (CoCreateInstance( CLSID_DxDiagProvider, ... IID_IDxDiagProvider, ... )
2.  初始化它（pDxDiagProvider->Initialize）
3.  打开根容器（pDxDiagProvider->GetRootContainer）
4.  打开子容器 DxDiag_SystemInfo (rootContainer->GetChildContainer(L"DxDiag_SystemInfo", ...)
5.  读取变体 (VT_UI4) 属性`dwDirectXVersionMajor`和`dwDirectXVersionMajor`(systemInfo->GetProp( ... ))
6.  如果相关，也请阅读 VT_BSTR 属性`szDirectXVersionLetter`。

不方便？非常。一次编写，包装在一个实用函数中，永不回头。或者复制粘贴其中一种[常见的实现。](http://code.ohloh.net/search?s=getdxver.cpp&browser=Default&pp=0&fl=C%2B%2B&ff=1&filterChecked=true&mp=1&ml=1&me=1&md=1)

# python - python中的系统进程监听器

> ID：13398191
> 
> 赞同：0
> 
> 时间：2012-11-15T13:12:48.020
> 
> 标签：python

有什么方法可以通知系统进程何时启动、终止或完成。

我正在寻找一种侦听系统事件的侦听器，例如进程启动、停止等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T14:00:25.007

您可以启动`ps`命令、解析其输出并获取有关正在运行的进程的信息。我还没有找到更好的方法。如果您使用的是unix of cause。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T00:02:15.210

在 Windows 上有[`PsSetCreateProcessNotifyRoutine()`](http://www.codeproject.com/Articles/2018/Detecting-Windows-NT-2K-process-execution). 或许可以通过`ctypes`.

[`psutil`](http://code.google.com/p/psutil/)提供了 Python 中的示例`top`实现。它使用轮询来枚举正在运行的进程。

# delphi - TIdTCPClient：重新连接实现

> ID：13398196
> 
> 赞同：4
> 
> 时间：2012-11-15T13:13:09.177
> 
> 标签：delphi, delphi-2009, indy

我正在编写一个应用程序，它用于`TIdTCPClient`通过套接字与另一个应用程序通信。

我希望应用程序尝试连接到某个服务器，直到建立连接（即，直到服务器上线）。

为此，我编写了以下代码：

```
procedure SendingThread.Execute();
var
I : integer;
Test : string;
IsConnected : Boolean;
begin
    TcpClient := TIdTCPClient.Create;
    TcpClient.Host := '127.0.0.1';
    TcpClient.Port := 9999;
    TcpClient.ConnectTimeout := 60000;

    IsConnected := false;
    while not IsConnected do
        begin
        try
            TcpClient.Connect;
            IsConnected := True;
        except
            on E:EIdSocketError do
                IsConnected := false;
        end;
    end;
...
end; 
```

当我在服务器脱机的情况下运行此代码时，我得到`EIdSocketError`错误代码`10061`。之后抛出异常`TcpClient.Connect;`。

我怎样才能修改代码，以便在`except`原因中捕获此异常？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T17:11:29.857

您显示的代码是处理重新连接问题的正确方法，但您需要对其进行一点小改动。将块更改`except`为 catch`Exception`或`EIdException`代替`EIdSocketError`. `EIdSocketError`不是唯一可能`Connect()`引发的异常。例如，它可以引发`EIdConnectException`or `EIdConnectTimeout`，这两者都不是从 派生的`EIdSocketError`。

```
procedure SendingThread.Execute;
var
  ...
  IsConnected : Boolean;
begin
  ...
  IsConnected := False;
  while (not IsConnected) and (not Terminated) do
  begin
    try
      TcpClient.Connect;
      IsConnected := True;
    except
      on E: Exception do
        IsConnected := False;
    end;
  end;
  ...
end; 
```

您也可以完全删除该`on E`子句，因为它没有做任何有用的事情。引发异常时，该`IsConnected`变量已经为 False，因此无需将其重新分配给相同的值。

```
procedure SendingThread.Execute;
var
  ...
  IsConnected : Boolean;
begin
  ...
  IsConnected := false;
  while (not IsConnected) and (not Terminated) do
  begin
    try
      TcpClient.Connect;
      IsConnected := True;
    except
    end;
  end;
  ...
end; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T18:08:49.920

无需修改代码。*您的程序*已经*捕获了预期的异常。

您所看到的是*调试*器在异常被抛出后立即拦截，在您的程序有机会看到异常存在并对其执行任何操作之前。当 IDE 中断您时，它会显示一个对话框，让您可以选择继续运行。执行该选项，或在关闭对话框后按“运行”按钮。

您可以将调试器配置为忽略部分或全部异常，这在使用 Indy 时特别有用，Indy 倾向于使用异常进行正常的流控制。[如何做到这一点之前已经在这里介绍过。](https://stackoverflow.com/a/4271143/33732)

* Remy 的回答描述了您可以对代码进行的*改进以捕获其他可能的异常。*

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-06-18T22:09:38.463

此处不需要 while 循环，因为您已经在执行线程中，并且此 while 循环将始终只执行一次，如果未连接，您的线程将处于无限循环中。

# xml - 排除 sed 中的 xml 标记 - 具体情况

> ID：13398198
> 
> 赞同：0
> 
> 时间：2012-11-15T13:13:22.990
> 
> 标签：xml, bash, sed, multiline

请帮忙！我花了几个小时寻找我的解决方案，我的头撞到了墙上......我想要使用 sed 做的就是：查找包含“Number Deleted”字符串的标签，然后将其删除

输入：

```
 <Cell ss:StyleID="s128"/>
    <Cell ss:StyleID="s128"/>
   </Row>
   <Row ss:AutoFitHeight="0">
    <Cell ss:StyleID="s81"><Data ss:Type="String">Number Deleted</Data></Cell>
    <Cell ss:StyleID="s81"/>
    <Cell ss:StyleID="s81"/>
    <Cell ss:StyleID="s81"/>
    <Cell ss:StyleID="s82"><Data ss:Type="Boolean">0</Data></Cell>
    <Cell ss:StyleID="s81"/>
    <Cell ss:StyleID="s82"><Data ss:Type="Boolean">0</Data></Cell>
    <Cell ss:StyleID="s83"><Data ss:Type="String">-1</Data></Cell>
    <Cell ss:StyleID="s81"><Data ss:Type="String">&quot;Deleted:&quot;</Data></Cell>
    <Cell ss:StyleID="s81"/>
    <Cell ss:StyleID="s81"/>
    <Cell ss:StyleID="s81"/>
   </Row>
   <Row ss:AutoFitHeight="0">
    <Cell><Data ss:Type="String">Number Saved</Data></Cell>
    <Cell ss:Index="5"><Data ss:Type="Boolean">0</Data></Cell>
    <Cell ss:Index="7"><Data ss:Type="Boolean">0</Data></Cell> 
```

输出：

```
 <Cell ss:StyleID="s128"/>
    <Cell ss:StyleID="s128"/>
   </Row>

   <Row ss:AutoFitHeight="0">
    <Cell><Data ss:Type="String">Number Saved</Data></Cell>
    <Cell ss:Index="5"><Data ss:Type="Boolean">0</Data></Cell>
    <Cell ss:Index="7"><Data ss:Type="Boolean">0</Data></Cell> 
```

到目前为止，我想通了，如何查看从“删除编号”到标签末尾的 xml 排除行，但这对于 xml 完整性来说是错误的，因为标签没有关闭，这就是我所拥有的：

```
function filter_xml
{
  START="<Cell ss:StyleID="s81"><Data ss:Type="String">Number Deleted"
  END="<\/Row>"
  sed "/$START/,/$END/d" file.xml
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T13:28:30.183

使用可识别 XML 的工具。例如，[xsh](http://p3rl.org/XML%3a%3aXSH2)：

```
open file.xml ;
remove //Row[Cell/Data/text()='Number Deleted'] ;
save :b ; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T13:29:12.057

我不认为`sed`是处理 XML 文件的最佳工具。

你真的不能解析 XML 文件吗？

这是一个快速而肮脏的示例`python`：

**在 /tmp/data 文件中：**

```
<data xmlns:ss="foobar">
<Row>
<Cell ss:StyleID="s128"/>
<Cell ss:StyleID="s128"/>
</Row>
<Row ss:AutoFitHeight="0">
<Cell ss:StyleID="s81"><Data ss:Type="String">Number Deleted</Data></Cell>
<Cell ss:StyleID="s83"><Data ss:Type="String">-1</Data></Cell>
</Row>
<Row ss:AutoFitHeight="0">
<Cell><Data ss:Type="String">Number Saved</Data></Cell>
<Cell ss:Index="5"><Data ss:Type="Boolean">0</Data></Cell>
</Row>
</data> 
```

**蟒蛇代码：**

```
import xml.dom.minidom as Xml
file = "/tmp/data"
xmlDoc = Xml.parse(file)
for row in xmlDoc.getElementsByTagName("Row"):
  if "Number Deleted" not in row.toprettyxml():
    print row.toxml() 
```

**输出：**

```
<Row>
<Cell ss:StyleID="s128"/>
<Cell ss:StyleID="s128"/>
</Row>
<Row ss:AutoFitHeight="0">
<Cell><Data ss:Type="String">Number Saved</Data></Cell>
<Cell ss:Index="5"><Data ss:Type="Boolean">0</Data></Cell>
</Row> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T15:00:12.717

这可能对您有用（GNU sed）：

```
sed '/<Row /!b;:a;$bb;N;/.*\n[^\n]*<\/Row>/!ba;:b;/Number Deleted/d' file 
```

# jquery - 带有ajax功能的div幻灯片

> ID：13398199
> 
> 赞同：0
> 
> 时间：2012-11-15T13:13:31.030
> 
> 标签：jquery, animation, onclick

这与这篇文章的问题大致相同：[slide div offscreen, append content with ajax call, slide div onscreen](https://stackoverflow.com/questions/10743250/slide-div-offscreen-append-content-with-ajax-call-slide-div-onscreen)

但我不能有动画。我认为这是因为我的 div`#section`有`width:100%`.

这是我的 html 代码：

```
<div class="coda-slider" id="slider-id">  
    <div id="section" class="screen_active">
        //content of my first page with the link of the page I need
        //to load on the next div
    </div>
    <div id="section" class="screen"></div> //empty div for the ajax request
</div> 
```

这是点击事件的JS：

```
$.ajaxSetup({
    cache: false
});

$('.ei-title h2 a').click(function() {
    event.preventDefault();
    // Get the URL of the page to load
    var url = $(this).attr('href');
    $('.screen').load(url); // load the content to the second div
    $(".screen_active").animate({left: '-50%'}, 500, function() {
        $(".screen_active").css('left', '150%');
        $(".screen_active").appendTo('.screen');
    }); //animate
    $(".screen").load(url).animate({left: '50%'}, 500);
}); 
```

瞧，我的内容已完美加载，但我的 div 没有任何动画。

感谢您的帮助。

**编辑：**

我制作了这个 JS 代码：我制作了以下代码，它工作正常：` $.ajaxSetup({ cache: false });

```
$('.ei-title h2 a').click(function() {
    event.preventDefault();
    // Get the URL of the page to load
    var url = $(this).attr('href');
    $('#section2').load(url, function() { // load the content to the second div
        $("#section").animate({left: '-100%'}, 1500, function() {
            $("#section").css('left', '100%');
            $("#section").appendTo('#section2');
        }); //animate
        $('#section2').animate({left: '0%'}, 1500);
    });
});` 
```

这个CSS代码：

```
.screen_active {
    position : absolute;
    width: 100%;
    left: 0%;
}

.screen {
    position : absolute;
    width:100%;
    left: 100%;
} 
```

它工作正常:) 谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T13:24:54.980

根据[文档](http://api.jquery.com/load/)，在回调函数中设置下一个动画。在您的情况下应该是：

```
$('.ei-title h2 a').click(function() {
    event.preventDefault();
    // Get the URL of the page to load
    var url = $(this).attr('href');
    $('.screen').load(url, function() { // load the content to the second div
        $(".screen_active").animate({left: '-50%'}, 500, function() {
            $(".screen_active").css('left', '150%');
            $(".screen_active").appendTo('.screen');
        }); //animate
    });
    $(".screen").load(url, function() {
        $(this).animate({left: '50%'}, 500);
    });
}); 
```

# c - C中的十六进制数组

> ID：13398205
> 
> 赞同：1
> 
> 时间：2012-11-15T13:14:06.270
> 
> 标签：c

我正在尝试在此指令[http://41j.com/blog/2011/09/beagleboard-gpio-input-driverless/上学习处理器的扩展头配置](http://41j.com/blog/2011/09/beagleboard-gpio-input-driverless/)

我有一个我无法理解的部分

```
volatile ulong *pinconf;
pinconf = (ulong*) mmap(NULL, 0x10000, PROT_READ | PROT_WRITE, MAP_SHARED, fd, 0x48000000);
pinconf[0x2168/4] = 0x001C001C; 
```

谁能解释`pinconf`数组是如何工作的？它存储什么价值？

编辑：我真的不明白是什么`pinconf[0x2168/4]`意思。它是一个十六进制数组，它指的是什么值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T13:18:18.880

pinconf 是内存映射文件/设备。查看您的链接代码，fd 是新打开的 /dev/mem 的描述符。因此，无论您在 pinconf 数组中写入什么，实际上都是以您在数组中使用的任何偏移量直接写入 /dev/mem。我假设这就是这段代码与 GPIO 硬件“对话”的方式。如果没有 GPIO 设备的内存映射，就很难知道正在写入的地址会发生什么。

看看 / [dev/mem](http://linux.die.net/man/4/mem)是什么。

并阅读有关内存映射 i/o 的信息，这就是它正在做的事情（有点），请参阅：[http ://www.kernel.org/doc/htmldocs/uio-howto.html#userspace_driver](http://www.kernel.org/doc/htmldocs/uio-howto.html#userspace_driver)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T13:23:31.990

根据您的问题的标题，我认为您对访问数组时的十六进制表示法感到困惑。

十六进制只是另一种写数字的方式，不要让它给你太多。我可以写：

```
int a = 0xA; 
```

或者

```
int a = 10; 
```

他们的意思是一样的。所以在这种情况下：

```
pinconf[0x2168/4] = 0x001C001C; 
```

只是：

```
pinconf[8552/4] = 1835036; 
```

后者实际上更令人困惑，因为 pinconf 正在存储一个地址，该地址通常使用 4（或 8）个字节以十六进制写入，因此`00`继续处理其余的数字（`1C001C`）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-16T15:47:05.560

我是原始博客/代码作者，这就是我的意思：

为了回答您的主要观点，pinconf[0x2168/4] 指的是地址 0x48002168。pinconf 数组从地址 0x48000000 开始。它被定义为 ulong [1]，在 ARM 处理器上为 4 个字节。我知道我想访问地址 pinconf+0x2168。要将地址 0x2168 转换为 pinconf 中的索引，我需要除以 4。

* * *

从头开始浏览代码：

```
volatile ulong *pinconf; 
```

pinconf 被定义为一个 ulong (32bit int) 指针。它被定义为 volatile，这意味着我们代码之外的某些东西可能会改变它的值。它告诉编译器，每次我们使用该值时，我们都需要从内存中读取它，这会阻止编译器进行可能会搞砸的巧妙优化。

```
pinconf = (ulong*) mmap(NULL, 0x10000, PROT_READ | PROT_WRITE, MAP_SHARED, fd, 0x48000000); 
```

这会将 pinconf 设置为指向地址 0x48000000。通常，您可以执行以下操作：

```
pinconf = (ulong*) 0x48000000; 
```

使 pinconf 指向一个地址，但这不起作用。0x48000000 是一个受保护的地址，它只能被内核访问。mmap 魔法为您提供了一种从用户空间访问地址的方法。

```
pinconf[0x2168/4] = 0x001C001C; 
```

我们已经讨论过这个，但这是向地址写入一个值：0x48000000+0x2168。值 0x48002168 来自 OMAP3 数据表，用于与 GPIO 系统进行内存映射 IO。我们除以 4 将地址 0x2168 转换为 pinconf 中的索引。

[1] 老实说，我可能应该使用 uint32_t。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-15T13:16:03.727

pinconf 数组存储 ulong（无符号长）。

用`volatile ulong *pinconf;`你定义一个指向 ulong 的指针。它指向数组的第一个元素。它是易失的，这意味着它可能会被外部“事件”更改并且不会被缓存。它可以链接 C 中的任何数组。

在这种情况下，它被映射到具有文件描述符 fd 的文件/设备。

# crystal-reports - 通过某些 Crystal Reports 结果计分

> ID：13398208
> 
> 赞同：0
> 
> 时间：2012-11-15T13:14:11.013
> 
> 标签：crystal-reports

大家早上好，

谢谢你看我的问题。

首先，我对 Crystal Reports 绝对绝望，该程序从不按我的要求做 :)。如果您回复答案可以用外行的话回答，那将非常感谢。

我希望实现的是在“Pict Exists”列中具有“YES”的每个结果集中评分一条线。

请看下面的图片

这是报告的样子 ![1\. 在此输入图片描述](../Images/782715879cd707960b3120f40248cbd1.png)

这是用来让它说“是”或“否”的公式 ![在此处输入图像描述](../Images/77215ca3d46bb17765c0d646cb79ff5e.png)

这用于抑制重复的结果（确实如此） ![在此处输入图像描述](../Images/16b7eef0e7b60a86bfd23deb35ca9e68.png)

我不知道您是否需要更多信息，但除了上述图片之外，本报告没有任何异常之处。

如果您需要我回答任何问题，请尽管提出，但我认为我不会有太大帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T13:36:39.357

请执行下列操作：

*   右键单击**PicExists**列
*   选择“格式字段...”
*   转到“字体”选项卡
*   您应该在“效果”部分下看到“删除线”；单击它旁边的公式按钮
*   由于某种原因我看不到您的图像，所以我不知道您的公式名称，但`{@YourFormulaName} = "Yes"`在公式编辑器中输入（使用您的真实公式名称）并保存它。

对于“是”的任何实例，该字段现在应该有一条线穿过它。

# java - 我可以将 PriorityBlockingQueue 与多个线程一起使用吗？

> ID：13398212
> 
> 赞同：6
> 
> 时间：2012-11-15T13:14:36.160
> 
> 标签：java, multithreading, thread-safety

有几把锁`PriorityBlockingQueue`？`take`和操作是否`put`同步？我找不到有关此类队列的太多信息。我使用的是单线程`PriorityQueue`.

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-15T13:18:20.380

> PriorityBlockingQueue 有多少个锁？

这是一个无关紧要的实现细节。除非您想了解它是如何实现的，否则我只能建议您查看源代码。

> take 和 put 操作是否同步？

严格来说，它们可能不是同步的，但是该类是线程安全的，因此您可以同时将其放入多个线程中。

注意：`PriorityBlockingQueue`关于这一点的 javadoc 不是很明确，但是如果你查看[java.util.concurrent 包的 javadoc](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/package-summary.html)，你会看到：

> java.util.concurrent 中的五个实现支持扩展 BlockingQueue 接口，该接口定义了 put 和 take 的阻塞版本：LinkedBlockingQueue、ArrayBlockingQueue、SynchronousQueue、PriorityBlockingQueue 和 DelayQueue。

并[`BlockingQueue`明确指出](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/BlockingQueue.html)：

> **BlockingQueue 实现是线程安全的**。所有排队方法都使用内部锁或其他形式的并发控制以原子方式实现其效果。然而，批量收集操作 addAll、containAll、retainAll 和 removeAll 不一定以原子方式执行，除非在实现中另外指定。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T13:17:10.537

通过阅读 HotSpot Java 7 源代码，只有一个锁，称为`lock`.

不同的实现是可能的，因为这不是该类的记录要求。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T13:21:52.383

[来自PriorityBlockingQueue](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/PriorityBlockingQueue.html)的 Javadoc ：

> 使用与类 PriorityQueue 相同的排序规则并提供阻塞检索操作的无界阻塞队列。虽然此队列在逻辑上是无界的，但尝试添加可能会由于资源耗尽而失败（导致 OutOfMemoryError）。此类不允许空元素。依赖于自然排序的优先级队列也不允许插入不可比较的对象（这样做会导致 ClassCastException）。

内部实现无关紧要。

# sql - 如何在 sp_send_dbmail 查询中使用变量？

> ID：13398226
> 
> 赞同：1
> 
> 时间：2012-11-15T13:15:28.237
> 
> 标签：sql, sql-server-2008

我在尝试从 @ 查询发送变量时遇到问题，该变量由触发器发送，该变量与程序配合得很好，打印并显示我发送的内容，当我尝试将该变量发送到选择不是我取变量，只取我写的值。

如果您只写文本，邮件可以正常工作。我也从普通查询中获取数据，但如果我包含变量失败。

我选择将变量放在 select so '+ @ q +' 中并显示错误

> 消息 102，级别 15，状态 1，过程 Facturacion_Tope，第 29 行
> “+”附近的语法不正确。

并删除单引号符号`+`并且不是固定值和变量

```
USE [sistemas]
GO
/****** Object:  StoredProcedure [dbo].[Facturacion_Tope]    Script Date: 11/15/2012 07:32:29 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO

ALTER PROCEDURE [dbo].[Facturacion_Tope]
    @ENVIO INT 
AS
print @ENVIO
BEGIN

    SET NOCOUNT ON;
    Declare @q INT
    --here shows the value of consultation 
    print @ENVIO

    set @q = (select OID from sistemas..DATFACTUR_DINAMICA WHERE OID = @ENVIO)

    --here shows the value of consultation
    print @q

    EXEC msdb.dbo.sp_send_dbmail
      @profile_name = 'correo_sistemas',
      @recipients = 'diegom_montes_contratista@clinica.com.co',
      -- @execute_query_database = 'sistemas',
      @query = 'select * from sistemas..DATFACTUR_DINAMICA WHERE OID = "@q"',                       
      @query_attachment_filename = 'Consulta.txt',      
      -- @body = 'Caida en: '@query+'', 
      @body_format = 'HTML',
      @subject = 'Numero de factura';
END 
```

这是存储过程的输出。

> 209 --prints well
> 209 -prints well
> HAY VA --prints well
> 209 --prints well
> Msg 22050, Level 16, State 1, Line 0
> 格式查询错误，可能参数无效
> 第 504 行注定错误 14661，查询执行失败：Msg 137, Level 15, State 2, Server CDPALWIN01\CDPALSQL02, Line 1
> 必须声明标量变量“@q”。
> 消息 3903，级别 16，状态 1，过程 DEVDATFAC，第 180 行
> ROLLBACK TRANSACTION 请求没有相应的 BEGIN TRANSACTION。
> 该语句已终止。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T13:19:26.897

预先设置@query 参数，然后将其用作简单变量，而不是在过程参数分配中连接字符串。

```
 DECLARE @thequery nvarchar(max) = 'select * from sistemas..DATFACTUR_DINAMICA
                                    WHERE OID = ' + cast(@q as nvarchar(max));
 EXEC msdb.dbo.sp_send_dbmail
 @profile_name = 'correo_sistemas',
    @recipients = 'diegom_montes_contratista@clinica.com.co',
   -- @execute_query_database = 'sistemas',
    @query = @thequery,                     
    @query_attachment_filename = 'Consulta.txt',      
  -- @body = 'Caida en: '@query+'', 
   @body_format = 'HTML',
    @subject = 'Numero de factura'; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2017-10-18T18:09:00.903

使用单引号将变量打印为静态值。

```
declare @s_dt nvarchar(max)

set @s_dt = 'select * from database.dbo.table_name where col_name = ''' + CAST(cast(getdate() as DATE) as nvarchar(max)) + '''' 
```

# css - 似乎无法在 LESS 中连接两个变量

> ID：13398234
> 
> 赞同：0
> 
> 时间：2012-11-15T13:16:14.550
> 
> 标签：css, web, less

我正在尝试将两个变量组合成一个字符串`@a`，`@b`变量值用逗号分隔。这是我的尝试：

```
p {
    @a: inset 0 1px 1px rgba(0, 0, 0, 0.075);
    @b: 0 0 8px rgba(82, 168, 236, 0.6);
    box-shadow: ~"@{a}, @{b}";
} 
```

输出：

```
p {box-shadow: [object Object],[object Object]} 
```

预期的：

```
p {box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075), 0 0 8px rgba(82, 168, 236, 0.6)} 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T18:28:47.300

我从评论中意识到你被引导到一个有帮助的答案。只是为了澄清为什么您的原始解决方案不起作用，这是因为您没有将变量定义为字符串。你需要这个（注意你的字符串周围的引号）：

```
p {
    @a: "inset 0 1px 1px rgba(0, 0, 0, 0.075)";
    @b: "0 0 8px rgba(82, 168, 236, 0.6)";
    box-shadow: ~"@{a}, @{b}";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-31T04:39:16.780

**根据@seven-phases-max 的建议更新了**更正答案****

 **最简单的解决方案按预期工作：

```
p {
    @a: inset 0 1px 1px rgba(0, 0, 0, 0.075);
    @b: 0 0 8px rgba(82, 168, 236, 0.6);
    box-shadow: @a, @b;
} 
```

这是新的演示：

[http://codepen.io/anon/pen/wxeFg](http://codepen.io/anon/pen/wxeFg)**

# ruby-on-rails - BCrypt - “没有要加载的文件 - bcrypt”（Rails）

> ID：13398236
> 
> 赞同：1
> 
> 时间：2012-11-15T13:16:22.427
> 
> 标签：ruby-on-rails, bcrypt-ruby

正如标题所示！以下是相关文件/配置：

```
$ gem list --local

*** LOCAL GEMS ***

Ascii85 (1.0.2)
bcrypt-ruby (3.0.1)
hashery (2.0.1)
pdf-reader (1.2.0)
prawn (0.12.0)
ruby-rc4 (0.1.5)
ttfunk (1.0.3)

$ grep bcrypt Gemfile
gem 'bcrypt-ruby', '~> 3.0.0'

$ grep bcrypt Gemfile.lock 
bcrypt-ruby (3.0.1)
bcrypt-ruby 
```

任何“需要 bcrypt”都会导致错误。我已经运行捆绑安装。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T13:36:48.400

TLDR，我是个白痴。重新启动应用程序修复它。

```
$ touch tmp/restart.txt 
```

# c# - 验证加盐哈希

> ID：13398246
> 
> 赞同：9
> 
> 时间：2012-11-15T13:17:10.263
> 
> 标签：c#, hash, salt, password-hash

我是 C# 新手，这是我在这里的第一个问题，所以我提前为任何失礼道歉。

**语境：**

当用户注册时，我调用 CreateSaltedHash() 方法并将用户从文本字段中输入的密码传递给它。此方法在将密码存储在我的用户表的密码列中之前对密码进行加盐和哈希处理。

**问题：**

当用户尝试登录时，我应该如何验证密码？

如果我再次调用 CreateSaltedHash() 方法，由于随机盐，它将不匹配。

我应该将盐存放在单独的列中吗？生成加盐哈希时是否应该使用分隔符？根据加盐和散列密码验证输入密码的最安全方法是什么？

**代码：** 这是我到目前为止所拥有的。

```
public class PasswordHash
{
    public const int SALT_BYTES = 32;

    /*
     * Method to create a salted hash
     */
    public static byte[] CreateSaltedHash(string password)
    {
        RNGCryptoServiceProvider randromNumberGenerator = new RNGCryptoServiceProvider();
        byte[] salt = new byte[SALT_BYTES];
        randromNumberGenerator.GetBytes(salt);
        HashAlgorithm hashAlgorithm = new SHA256Managed();
        byte[] passwordByteArray = Encoding.UTF8.GetBytes(password);
        byte[] passwordAndSalt = new byte[passwordByteArray.Length + SALT_BYTES];
        for (int i = 0; i < passwordByteArray.Length; i++)
        {
            passwordAndSalt[i] = passwordByteArray[i];
        }
        for (int i = 0; i < salt.Length; i++)
        {
            passwordAndSalt[passwordByteArray.Length + i] = salt[i];
        }
        return hashAlgorithm.ComputeHash(passwordAndSalt);
    }

    public static bool OkPassword(string password)
    {
        //This is where I want to validate the password before logging in.
    }
} 
```

调用 Register 类中的方法。

```
User user= new User();
user.password = PasswordHash.CreateSaltedHash(TextBoxUserPassword.Text); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T13:53:43.890

你可以使用[Bcrypt.Net](http://bcrypt.codeplex.com/)；它有很多关于真正安全的建议，而且它非常易于使用。据我了解，当您创建密码时，它会自动为您生成一个唯一的盐，然后将其存储在散列密码字符串中；所以你不要单独存储盐，而是在与哈希密码相同的字段中。关键是每个密码都有自己的盐，这使得黑客破解多个密码变得更加困难（耗时）。Bcrypt 使用的算法也是 CPU 密集型的，因此需要大量的计算能力（=金钱）来破解。

Jeff Atwood（stackoverflow 版主）[推荐 Bcrypt](http://www.codinghorror.com/blog/2012/04/speed-hashing.html)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T13:20:51.840

当您第一次生成散列时，您需要存储盐和最终散列 - 然后重新使用相同的盐以供将来比较。

因此，您将更改您的`CreateSaltedHash`方法以获取密码和盐，并编写一个新`CreateSalt`方法以在创建/更改密码时生成盐，该密码与最终哈希一起存储。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-18T14:11:53.630

我建议您使用 ServiceStack 的 SaltedHash，您可以从 Nuget 安装它。只需`Install-Package ServiceStack`在 Nuget 控制台中输入，您就可以在代码中使用以下导入。

```
using ServiceStack.ServiceInterface.Auth; 
```

然后你会比以前**更容易**和**更快**地生成你的盐和哈希。只需输入以下代码：

```
class Security
{
   ...
   public void generate(string Password)
   {
   string hash, salt;
   new SaltedHash().GetHashAndSaltString(Password,out hash,out salt);
   //Store the hash and salt
   }
   ...
} 
```

**是**的，您必须**存储**哈希和盐才能运行您的 OkPassword 方法。

```
public bool OkPassword(string Password)
{
   var hash = //getStoredHash
   var salt = //getStoredSalt
   bool verify = new SaltedHash().VerifyHashString(Password, hash , salt);
   return verify ;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-15T13:22:25.740

您必须将盐与哈希一起存储。

参考这篇文章来获取一些背景信息： [http ://www.h-online.com/security/features/Storing-passwords-in-uncrackable-form-1255576.html](http://www.h-online.com/security/features/Storing-passwords-in-uncrackable-form-1255576.html)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-15T13:37:47.453

正如其他答案所述；是的，您应该存储盐或从例如用户名中派生盐。

您还应该使用[`Rfc2898DeriveBytes`](http://msdn.microsoft.com/en-us/library/system.security.cryptography.rfc2898derivebytes.aspx)它来使其更安全。

这是一篇关于该主题的好文章： [Password salt and hashing in C#](http://www.nathandavison.com/posts/view/2/password-salt-and-hashing-in-c)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-15T13:22:05.877

> 我应该将盐存放在单独的列中吗？

是的。

> 生成加盐哈希时是否应该使用分隔符？

没有必要，但只要您在验证时包含相同的分隔符，它也不会受到伤害。

> 根据加盐和散列密码验证输入密码的最安全方法是什么？

SHA512、SHA-2 或 -3 会比 SHA256 更安全，但您需要更高的安全性吗？

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-15T13:22:54.027

您可以储存盐，也可以每次都使用相同的盐。我建议存储盐，因为它比在所有用户中使用相同的盐更安全。

我的大多数表都有一列，其中包含创建行的日期时间。我使用这个值的结构体的 Ticks 属性`DateTime`来对哈希进行加盐，但你可以使用任何你喜欢的东西，只要你每次为用户使用相同的加盐。需要注意的一件事是，如果您使用此方法，并且您使用的是 SQL 类型 DateTime（而不是 DateTime2），则存在精度问题。如果您创建`DateTime`in 代码，则需要截断它（我相信是百分之一秒）。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-11-15T13:23:34.533

而对于更长的答案 -

创建的每个密码都应该是随机的。这将使它本身独一无二。由于这种“随机性”，您几乎永远无法以编程方式找到与文件关联的哈希值。

您加密密码的方式（没有哈希）应该是相同的，因此每次使用此方法的反向就足够了。
PS：（**更安全的验证方式）**您可以将加密密码反转为其原始*[Hard]*，或使用哈希加密验证密码，并确保加密密码与存储在 DB *[Preferred]*中的密码匹配。

因此，您需要将加密的密码以及与之关联的哈希值存储在数据库中。

这将是收集验证密码所需的所有信息的方法。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-11-15T13:31:40.217

因为您正在生成随机盐，所以您需要将盐存储在数据库中。这样做的问题是，如果您的数据库遭到破坏，攻击者将拥有盐和散列密码，因此他们可以更容易地确定真正的密码。理想情况下，您的代码中应该有一个静态盐，这样如果您的数据库受到损害，他们仍然没有盐，如果您的代码受到损害，他们还没有数据库。

另一种解决方案可能是使用胡椒。Pepper 类似于 salt，但您不会将其与 salt 和散列密码一起存储在数据库中。它将存储在代码中。这样你就有了一个生成的随机盐和一个单独存储的常量。为了使辣椒更加随机，您可以创建一个较大字符串的子字符串，用于根据某些变量（例如用户 ID）偏移的辣椒。这又是一个内部问题，如果攻击者设法获取您的数据，他们将不会知道。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-11-15T14:10:18.280

你应该保存消化和盐。迭代次数和摘要长度值可以是应用程序中的常量。

```
byte[] getNewSalt(Int32 size)
{
    RNGCryptoServiceProvider rng = new RNGCryptoServiceProvider();
    byte[] salt = new byte[size];
    rng.GetBytes(salt);
    return salt;
}

byte[] getPasswordDigest(byte[] value, byte[] salt, Int32 iterations, Int32 digestLength)
{
    Rfc2898DeriveBytes deriveBytes = new Rfc2898DeriveBytes(value, salt, iterations);
    return deriveBytes.GetBytes(digestLength);
} 
```

最近的文章建议，为了进一步保护密码，您可以将密码分成几部分，对各个部分进行哈希处理，然后将它们存储在数据库中的单独表中。

# database - VB .NET COMBOBOX ValueMember

> ID：13398251
> 
> 赞同：1
> 
> 时间：2012-11-15T13:17:25.007
> 
> 标签：database, vb.net, combobox, valuemember

大家好，我对 ValueMember 有疑问。看代码：

```
 conn.ConnectionString = _
"Provider=Microsoft.Jet.OLEDB.4.0;Data source=" & _
"c:\\magazyn.mdb"
    ' Try
    conn.Open()

    da2 = New OleDbDataAdapter(sql1, conn)

    da2.Fill(ds2)
    ' DataGridView1.DataSource = ds.Tables("Nazwa")
    ' DataGridView1.Update()
    ComboBox4.DataSource = Nothing

    ComboBox4.DataSource = ds2.Tables(0)

    ComboBox4.ValueMember = Nothing
    ComboBox4.DisplayMember = "Nazwa_Towaru"
    ComboBox4.ValueMember = "Kod_Towaru"

    MessageBox.Show(ComboBox4.Text + "-" + ComboBox4.ValueMember)

    ' Catch ex As Exception
    'MessageBox.Show("Brak podłączonej bazy/problem z podłączeniem do bazy")
    '  Finally
    conn.Close()
    '  End Try 
```

MessageBox 应该向我显示类似这样的内容：图形卡 - 123ASD 第一个元素是“Nazwa_Towaru”，第二个是“Kod_Towaru”，但 MB 向我显示类似这样的内容：图形卡 - “Kod_Towaru”。第一次我认为 DATASET 中的“Kod_Towaru”列是空的，但我检查了这个并且列是 data 。

我还有另一个具有相同代码的 ComboBox 并且它的工作很好，所以为什么这个不是。所有变量都是本地的，因此它们没有合并。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T15:21:17.010

我猜 ComboBox4.SelectedIndex = -1。将组合框与数据源绑定后，将所选索引设置为 0（如果组合框中有数据）

哔叽

# windows-phone-7 - Webrequest 测试中的 DivideByZeroException (WP7)

> ID：13398252
> 
> 赞同：0
> 
> 时间：2012-11-15T13:17:26.873
> 
> 标签：windows-phone-7, nunit, dividebyzeroexception

我正在使用 NUnit 来测试 WP7 应用程序（Install-Package NUnit）。我用这样的测试创建了空白的 WP Class 项目：

```
var req = WebRequest.CreateHttp("http://google.com"); 
```

本次测试有这样的错误：

> System.TypeInitializationException ：“System.Net.WebRequest”的类型初始化程序引发了异常。----> System.DivideByZeroException : 试图除以零。在 Class1.cs 中 PhoneClassLibrary1.Class1.T() 的 System.Net.WebRequest.CreateHttp(String requestUriString)：第 13 行 --DivideByZeroException 在 System.Net.WebRequest..cctor()

如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T15:45:53.110

我用 nunit 尝试了相同的代码，没有抛出异常。确保您获得了最新版本的 nunit 并与 silverlight 4 兼容。您可以查看这篇文章 => [NUnit with Windows Phone 7](https://stackoverflow.com/questions/3605942/nunit-with-windows-phone-7)

> 您正在寻找的是 nunit-silverlight。您需要引用“NUnit.Silverlight.Framework.dll”和“NUnit.Silverlight.Compatibility.dll”（SilverLight 3 版本），并将所有引用设为“本地副本”，即使是 .NET 框架。

可以解决你的问题:)

# java - 调查内存泄漏时要寻找哪一代？

> ID：13398253
> 
> 赞同：1
> 
> 时间：2012-11-15T13:17:31.697
> 
> 标签：java, memory-leaks, garbage-collection

我对可能导致我的服务器停止的潜在*内存泄漏进行了第一次调查。*我从日志中看到以下内容：

```
...
6676.590: [GC [PSYoungGen: 61432K->3902K(65408K)] 343313K->308460K(384896K), 0.0153165 secs] [Times: user=0.07 sys=0.10, real=0.02 secs] 
6684.493: [GC [PSYoungGen: 65406K->3900K(67200K)] 369964K->319251K(386688K), 0.0104186 secs] [Times: user=0.07 sys=0.04, real=0.01 secs] 
6684.503: [Full GC [PSYoungGen: 3900K->0K(67200K)] [PSOldGen: 315351K->256886K(333824K)] 319251K->256886K(401024K) [PSPermGen: 70248K->70248K(116736K)], 0.5965072 secs] [Times: user=0.60 sys=0.00, real=0.60 secs] 
6692.773: [GC [PSYoungGen: 63296K->1160K(62976K)] 320182K->258046K(396800K), 0.0043468 secs] [Times: user=0.04 sys=0.00, real=0.00 secs]
... 
```

让我困惑的是，我应该在哪一代寻找*内存泄漏*？全部？单独或同时？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T13:20:17.597

您只需要在 Full GC 之后查看 PSOldGen。保留任何时间长度的对象都将在那里。即，在寻找泄漏时，您无需担心寿命短的物体。

如果您认为自己有泄漏，`jmap -histo:live`请查看哪些对象被保留最多。您可以执行完整转储`jmap -dump:live,format=b,file={filename}`以查看保留这些对象的原因。您可以使用 VisualVM 加载此文件。（也可以使用 VisualVM 来触发堆转储）

# sql - 从 3 个内部连接中选择列 - 仍然得到笛卡尔积。小号

> ID：13398255
> 
> 赞同：0
> 
> 时间：2012-11-15T13:17:35.547
> 
> 标签：sql, database, tsql, cartesian

我有 3 张桌子。它们是内部连接的。当我选择从所有三个表中进行选择时，我得到一个笛卡尔积。

我使用了 distinct 并且我尝试过与前 1 名交叉应用。前 1 名带回了适量的记录，但它重复了该选择前 N 项中使用的字段。

基本问题。您可以从 3 个不同的表中进行选择并避免笛卡尔结果吗？我可以将所有三个表都连接起来，并且可以在没有笛卡尔坐标的情况下从两个表中获取记录。当我选择从第三个中选择时，笛卡尔就会出现。

如果这是可能的，我应该尝试哪些其他 tsql 命令/构造？ [http://imageshack.us/f/255/50353790.png/](http://imageshack.us/f/255/50353790.png/)

```
 SELECT CRT.[TransactionID]
      ,CRT.[creditrewardsID]
      ,CRT.[OwnerID]
      , CRT.[TransactionDate]
      ,CRT.[ItemID]
      ,CRT.[VALUE]
      ,CRM.First 
      ,CRM.MI 
      ,CRM.Last
      ,CTI.fn
      ,CTI.ln
  FROM [ownership].[dbo].[creditrewardsTransactions] CRT
  Join [ownership].[dbo].[creditrewardsMembers] CRM
    on CRT.creditrewardsid = CRM.[creditrewardsID]
  Join [Exchange].[dbo].[CreditTourInfo] CTI
    on CRM.CRMemberNum  = CTI.PRIMECRPNum
--where CRT.creditrewardsID = 11111 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T23:19:40.920

要回答您的“基本”问题，是的，您可以轻松加入 3 个表而不会收到笛卡尔积。但是，您需要确保具有正确的一对一或一对多连接。

上述问题可能与您在 creditrewardsMembers 和 CreditTourInfo 表中的数据有关。加入 CRMemberNum 和 PRIMECRPNum 字段可能是多对多联接，这将为您提供笛卡尔积。

您可以运行这些 SQL 语句来确认。如果它们都返回记录，那么您有一个多对多连接问题。

```
SELECT CRM.CRMemberNum, COUNT(*)
  FROM [ownership].[dbo].[creditrewardsMembers] CRM
 GROUP BY CRM.CRMemberNum
HAVING COUNT(*) > 1

SELECT CTI.PRIMECRPNum, COUNT(*)
  FROM [Exchange].[dbo].[CreditTourInfo] CTI
 GROUP BY CTI.PRIMECRPNum
HAVING COUNT(*) > 1 
```

如果这些字段实际上是要加入的正确字段，那么您可能需要像这样从查询中的一个表中选择第一条记录。

```
SELECT CRT.[TransactionID]
      ,CRT.[creditrewardsID]
      ,CRT.[OwnerID]
      ,CRT.[TransactionDate]
      ,CRT.[ItemID]
      ,CRT.[VALUE]
      ,CRM.First 
      ,CRM.MI 
      ,CRM.Last
      ,CTI.fn
      ,CTI.ln
  FROM [ownership].[dbo].[creditrewardsTransactions] CRT
  JOIN [ownership].[dbo].[creditrewardsMembers] CRM
    ON CRT.creditrewardsid = CRM.[creditrewardsID]
  JOIN (
        SELECT PRIMECRPNum, MIN(fn) as [fn], MIN(ln) as [ln]
          FROM [Exchange].[dbo].[CreditTourInfo]
         GROUP BY PRIMECRPNum
       ) CTI
    ON CRM.CRMemberNum  = CTI.PRIMECRPNum 
```

最终，这将取决于您的特定数据模型的限制以及您可能需要做出的权衡。（即仅从 [CreditTourInfo] 获取第一条记录）

# linux - 为什么在 bash 命令后附加控制字符？

> ID：13398256
> 
> 赞同：1
> 
> 时间：2012-11-15T13:17:43.687
> 
> 标签：linux, file, bash

我使用 bash 命令将几行附加到多个配置文件：

```
> for filename in *.ovpn; do
> printf 'configurationscript-security 2\nup /etc/openvpn/update-resolv-conf\ndown /etc/openvpn/update-resolv-conf' >> $filename; 
> done 
```

然而，控制字符“^M”出现在配置文件中每一行的末尾： ![在此处输入图像描述](../Images/27f40055da1bef415f4c6d6c2aa9bcb6.png)

我在 vim 中打开文件，bash 命令之前的文件如下所示： ![在此处输入图像描述](../Images/90da97a2ed9fcc1f891841da58fcd967.png)

我很好奇为什么“^M”出现在每行的末尾？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T13:21:35.643

是Windows的[回车](https://en.wikipedia.org/wiki/%5EM)，`dos2unix`用来转换文件。Vim 识别[文件格式](http://vim.wikia.com/wiki/File_format)并正确显示。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-15T13:30:09.253

如果不可用，`^M`也可以通过 in 中的正则表达式删除。`vim``dos2unix`

`:%s/^M//g`，可以输入为： ``Esc``:%s/``ctrl+V``ctrl+M``//g``

 `不知道为什么在 linux 系统上只用一个简单的 printf 命令就会发生这种情况，也许看看你正在选择正确版本的 printf。我已经在 linux 系统上进行了尝试，并且本地 printf 保持正确的行尾，正如您所期望的那样。`

# c++ - c ++中的gnuplot wxt交互性

> ID：13398259
> 
> 赞同：0
> 
> 时间：2012-11-15T13:17:48.040
> 
> 标签：c++, gnuplot, user-interaction

我需要帮助以编程方式使用 Gnuplot 绘制图形。

我有 N 个图表，我想将每个图表绘制在不同的窗口上。我目前生成一个包含 gnuplot 脚本的字符串，其中每个绘图调用都在“ `set terminal wxt n`”之后，n=0,1,...,N。

问题是活动窗口始终是第 N 个，然后在另一个 N-1 上禁用交互性。

我该怎么做才能重新获得缩放/网格控制？为什么控件不在当前焦点窗口上？非常感谢您的关注。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T13:52:43.870

根据文档（`help wxt`）：

> 活动绘图窗口（由 选择的`set term wxt <n>`）是交互式的。

重新获得`zoom`/`focus`控制第 n 个图的唯一方法是通过`set term wxt n`. 不过，您可以玩各种技巧 - 一个技巧是`bind`将窗口编号绑定到键：

```
bind 1 "set term wxt 1; raise"
bind 2 "set term wxt 2; raise" 
```

这会将焦点重新设置在给定的地块编号上。 `raise`可能有效，也可能无效（目前它似乎对我不起作用）。如果加注不起作用，请查阅有关`help raise`原因的一些想法。当然，这仅在您要创建的地块少于 11 个时才有效——如果您有更多的地块，那么您需要通过键绑定获得更多创意。

# ssh - 使用 ssh 隧道从远程 mac 上的 PGAdmin 管理 postgres

> ID：13398260
> 
> 赞同：0
> 
> 时间：2012-11-15T13:17:52.070
> 
> 标签：ssh, osx-mountain-lion, ubuntu-12.04, pgadmin

我已经在 Ubuntu 服务器上安装了 PostgreSQL，我正在尝试使用远程 macbook 上的 PGAdmin 连接到该服务器。

我创建了一个 ssh 隧道 -

```
macbook:~postgres$ ssh -L 5423:localhost:5432 postgres@mydomain.com 
```

而且我可以按预期在macbook上使用psql进行连接-

```
macbook:~ me$ psql -U postgres -p 5423 -h localhost
...
postgres=# 
```

在 PGAdminIII 的“新服务器注册”窗口中，我正在输入以下凭据

```
Name - MyServer
Host - localhost
Port - 5423
Maintenance DB - postgres
Username - postgres
Password - <remote_postgres_password> 
```

但是连接失败 -

```
Error connecting to the server: FATAL: password authentication failed for user "postgres" 
```

不确定这里发生了什么，这些似乎与我用于 psql 的凭据相同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T17:47:20.470

在您的服务器中，选择文件`md5`上的密码身份验证`pg_hba.conf`。例如：

```
host all all 12.34.67.89 255.255.255.255 md5 
```

虽然`12.34.67.89`是你的远程IP。我上周面临同样的问题。希望有帮助。

# python - 如何使用 Python 运行子进程，等待它退出并以字符串形式获取完整的标准输出？

> ID：13398261
> 
> 赞同：38
> 
> 时间：2012-11-15T13:17:52.053
> 
> 标签：python, subprocess

因此，我注意到`subprocess.call`在继续执行 python 脚本之前等待命令完成时，我无法获取标准输出，除了`subprocess.Popen`. 是否有任何替代函数调用会等到它完成？（我也试过`Popen.wait`）

注意：我试图避免`os.system`打电话

```
result = subprocess.Popen([commands...,
                        self.tmpfile.path()], stdout=subprocess.PIPE, stderr=subprocess.PIPE)
out, err = result.communicate()
print out+"HIHIHI" 
```

我的输出：

```
HIHIHI 
```

注意：我正在尝试`wine`使用它。

* * *

## 回答 #1

> 赞同：86
> 
> 时间：2012-11-15T13:22:20.403

我正在使用以下构造，尽管您可能希望避免使用`shell=True`. 这将为您提供任何命令的输出和错误消息，以及错误代码：

```
process = subprocess.Popen(cmd, shell=True,
                           stdout=subprocess.PIPE, 
                           stderr=subprocess.PIPE)

# wait for the process to terminate
out, err = process.communicate()
errcode = process.returncode 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-11-15T13:31:25.683

```
subprocess.check_output(...) 
```

调用该进程，如果其错误代码非零则引发，否则返回其标准输出。这只是一个快速的速记，所以你不必担心`PIPE`s 和其他事情。

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2012-11-15T13:24:50.667

如果您的进程提供了巨大的标准输出而没有标准错误，`communicate()`则由于内存限制可能是错误的方法。

反而，

```
process = subprocess.Popen(cmd, shell=True,
                           stdout=subprocess.PIPE, 
                           stderr=subprocess.PIPE)

# wait for the process to terminate
for line in process.stdout: do_something(line)
errcode = process.returncode 
```

可能是要走的路。

`process.stdout`是一个类似文件的对象，您可以将其视为任何其他此类对象，主要是：

*   你可以`read()`从中
*   你可以`readline()`从中和
*   你可以迭代它。

后者是我在上面所做的，以便逐行获取其内容。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-04-13T16:13:31.953

使用 Python 3.8，这对我有用。例如在 venv 中执行 python 脚本：

```
import subprocess
import sys
res = subprocess.run(
        [
          sys.executable, # venv3.8/bin/python
          'main.py', 
          '--help',
        ], 
        stdout=subprocess.PIPE, 
        text=True
)
print(res.stdout) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-10T05:27:34.553

我会尝试类似的东西：

```
#!/usr/bin/python
from __future__ import print_function

import shlex
from subprocess import Popen, PIPE

def shlep(cmd):
    '''shlex split and popen
    '''
    parsed_cmd = shlex.split(cmd)
    ## if parsed_cmd[0] not in approved_commands:
    ##    raise ValueError, "Bad User!  No output for you!"
    proc = Popen(parsed_command, stdout=PIPE, stderr=PIPE)
    out, err = proc.communicate()
    return (proc.returncode, out, err) 
```

... 换句话说，让 shlex.split() 完成大部分工作。我不会尝试解析 shell 的命令行、查找管道运算符并设置您自己的管道。如果你打算这样做，那么你基本上必须编写一个完整的 shell 语法解析器，你最终会做大量的管道工作。

当然这提出了一个问题，为什么不使用带有**shell=True**（关键字）选项的*Popen呢？*这将允许您将一个字符串（不拆分也不解析）传递给 shell，并且仍然可以收集结果以按照您的意愿进行处理。我的示例不会处理命令中可能存在的任何管道、反引号、文件描述符重定向等，它们都将作为命令的文字参数出现。因此，它仍然比使用**shell=True**运行更安全......我给出了一个愚蠢的例子，根据某种“批准的命令”字典或集合检查命令——通过将其规范化为一个更有意义的绝对路径，除非您打算要求在将命令字符串传递给此函数之前对参数进行规范化。

# android - 分配本机内存时内存不足

> ID：13398263
> 
> 赞同：5
> 
> 时间：2012-11-15T13:17:54.117
> 
> 标签：android, memory-management, opengl-es, native

我正在将许多纹理加载到（Open GL）应用程序中（数百兆字节未压缩在内存中），因此我使用 LRU 缓存并在需要时丢弃它们。在 Android 中，Open GL 纹理在本机堆中分配，因此我可以使用所有可用内存。

问题在于...

```
ActivityManager activityManager = (ActivityManager)VhbApplication.getInstance().getSystemService(Context.ACTIVITY_SERVICE);
ActivityManager.MemoryInfo memoryInfo = new ActivityManager.MemoryInfo();
activityManager.getMemoryInfo(memoryInfo);
memoryInfo.availMem 
```

在某些设备上， *availMem*报告了奇怪的数字：3.2 - 160MiB 的 Galaxy tab 10.1 和系统显示 300MiB 可用，4.0.3 的 Acer Iconia Tab A200 报告的可用内存值与系统约 400MiB 相同。第二个问题是，在 Acer 上，即使分配大小小于 200MiB 的纹理，我也会出现内存不足错误（不是可以作为异常捕获的 OutOfMemoryError 的形式。然后它只是命中 SIGSEGV）。并非总是如此，但如果应用程序运行的时间足够长，以至于从缓存中删除了一些纹理并加载了新纹理，那么应用程序可能会崩溃。

所以我不能以非常健壮的方式设置缓存大小。那些随机的 OOM 崩溃仅与宏基有关。我的其他设备，如 Galaxy tab 10.1、Nexus 7 甚至 Galaxy note（5"）我确实遇到了这些随机崩溃。我正确地删除了 Open GL 纹理。

宏碁在他们的 Android 中是否有一些限制，不仅限制了 VM 内存大小，还限制了本机堆分配？或者它是一个有问题的 Open GL 驱动程序？Acer 和 Galaxy 选项卡使用几乎相同的 Tegra 2 GPU。

如何稳健地设置缓存大小？我至少需要 100MiB。或者以任何其他方式将 100-200 MiB 的纹理稳健地分配到 Android Open GL 应用程序中？

# ios - Xcode 更改存储库

> ID：13398265
> 
> 赞同：1
> 
> 时间：2012-11-15T13:18:11.290
> 
> 标签：ios, xcode

也许有人知道如何更改存储库。

我必须继续其他公司的项目，他们的服务器上有他们的 svn 存储库。我创建了自己的 git 存储库，但文件一直提交到旧的 svn。删除管理器中的第一个存储库根本没有帮助，如果我尝试提交文件，它会重新创建......

那么如何在旧的 svn 和新的 git 存储库之间切换呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T13:23:46.190

关闭 XCode，进入终端并从文件夹层次结构中删除所有 .svn 目录，发出“git init”。在根目录中，现在重新启动 XCode。

# wpf - 使用 ComboBox 与实体框架导航属性进行数据绑定

> ID：13398267
> 
> 赞同：1
> 
> 时间：2012-11-15T13:18:15.827
> 
> 标签：wpf, data-binding, datagrid, combobox, navigation

我在数据绑定和实体框架的导航属性方面遇到了一些问题。

我有两个类，由实体框架设计器生成：

**Foo 类**：

```
id (int)
bar (Bar)
... 
```

**班级酒吧**

```
id (int)
name (string)
... 
```

使用`ObservableCollection<Foo>`，我用以下列填充了数据网格：

```
<DataGrid.Columns>
    <DataGridTextColumn Header="Id" Binding="{Binding Path=id}"/>
    <DataGridTemplateColumn Header="Bar">
        <DataGridTemplateColumn.CellTemplate>
            <DataTemplate>
                <ComboBox 
                    SelectedValuePath="Id" 
                    SelectedValue=
                        "{Binding Path=bar.Id, Mode=TwoWay,
                        UpdateSourceTrigger=PropertyChanged}"
                    DisplayMemberPath="name" 
                    ItemsSource=
                        "{Binding Path=BarList, 
                        RelativeSource={RelativeSource FindAncestor, 
                        AncestorType={x:Type Window}}}"
                    Background="White" />
            </DataTemplate>
        </DataGridTemplateColumn.CellTemplate>
    </DataGridTemplateColumn>
</DataGrid.Columns> 
```

ComboBox 填充了一个`ObservableCollection<Bar>`并且正确显示了当前的`Bar`.

当我在组合框中选择另一个项目时，问题就来了。我收到以下错误：

```
System.Windows.Data Error: 8 : Cannot save value from target back to source.

System.InvalidOperationException: The property 'Id' is part of the object's key information and cannot be modified 
```

我可以看到为什么会弹出错误，但是我该如何以不同的方式处理呢？

`Foo`编辑： and之间的关系`Bar`是 N..1，这意味着 a`Foo`有 1 或 0`Bar`而 Bar 可以有几个`Foo`s。

目前，我无法`Bar`为我`Foo`的 s 选择新的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T11:57:08.157

您必须`bar`直接绑定属性。您的代码尝试更改`Id`所选 Foo 条上的 ，但您想要更改与当前 Foo 关联的条。您还必须覆盖类`Equals`的方法`Bar`。

```
<ComboBox SelectedValue="{Binding bar, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
          DisplayMemberPath="Name"
          ItemsSource="{Binding Path=BarList, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type Window}}}" Background="White" /> 
```

在你的`Bar`课堂上：

```
public override bool Equals(object obj)
{
    if (obj is Bar)
        return ((Bar)obj).Id == Id;
    return false;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-19T20:07:43.030

如果您不想直接使用对象来执行此操作（这意味着不使用`SelectedValuePath`and`SelectedValue`而是`SelectedItem="{Binding Foo.Bar}"`直接使用，您需要指示 EF 设计器使用`generate foreign key property BarId on the Foo entity`，然后您可以绑定`SelectedValue="{Binding Foo.BarId}"`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T18:58:38.653

在我看来，实体框架的问题比 WPF 的问题更多。bar 的 id 同时是 foo 主键的一部分是否正确？至少绑定、组合框的设置和错误消息似乎暗示了这一点。

实体框架的限制之一是它不支持密钥更新。如果要更改对象的键，则基本上必须删除它，使用新键重新创建它，然后复制所有其他属性。在我目前正在处理的程序中，我决定创建一个包装类，它将 Id 作为属性公开，并在更改时在幕后进行处理。我已经看到建议只分离对象并重用它的帖子，但在我的情况下这不起作用。

# python - 如何从推文中删除日期？

> ID：13398275
> 
> 赞同：0
> 
> 时间：2012-11-15T13:18:33.087
> 
> 标签：python, regex

需要一些建议...我有一些推文

```
Mon Apr 06 22:19:45 PDT @switchfoot http://twitpic.com/2y1zl - Awww, that's a bummer. :( You shoulda got David Carr of Third Day to do it. ;D
Mon Apr 06 22:19:49 PDT is upset that he can't update his Facebook by texting it... and might cry as a result :( School today also. Blah!
Mon Apr 06 22:19:53 PDT @Kenichan I dived many times for the ball. Managed to save 50% :( The rest go out of bounds
Mon Apr 06 22:19:57 PDT my whole body feels itchy and like its on fire :( 
```

如何删除这个 Mon Apr 06 22:19:57 PDT？使用正则表达式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T13:25:13.297

如果这是一个字符串，只需在第一行拆分`PDT`：

```
for line in tweets.splitlines():
    print line.split(' PDT ', 1)[1] 
```

该行在字符第一次出现时被分割`PDT`（带有空格），并打印结果的后半部分。

但也许您可以改为阻止输出字符串的代码首先添加日期？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T13:26:15.890

```
for line in lines:
    print line[24:] 
```

如果日期/时间格式始终相同，可能会很简单。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-15T13:31:29.900

如果它们都是以相同方式存储的字符串，则可以进行拆分：

```
tweet = "Mon Apr 06 22:19:57 PDT SomeGuy Im not white enough to be excited for a new version of Windows".

tweet= tweet.split(None, 5)[-1] 
```

结果在推文中

> “SomeGuy 我不够白，不会对新版本的 Windows 感到兴奋”

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-15T14:29:48.773

似乎将其拆分为单词列表并删除前六个单词更有可能在时区更改时保持一致。

```
clean_tweets = []

for tweet in tweets:
    words = tweet.split()
    del words[0:5]
    clean_tweet = " ".join(words)
    clean_tweets.append(clean_tweet) 
```

默认情况下，[split()](http://docs.python.org/2/library/stdtypes.html#str.split)将按空格进行拆分，因此您不必指定分隔符。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-15T16:13:45.580

我假设您不能使用 PDT，因为您不能假设它们将始终是 PDT。似乎字符串中最容易识别的部分是 [0-9]+:[0-9]+:[0-9]+ - 时间。

```
/^.*[0-9]+:[0-9]+:[0-9]+\s+[A-Z]{3}\s*(.*)$/ 
```

捕获时间之后的字符串和全部大写的 3 个字母的时区。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-10-26T16:32:14.220

如果日期和时区发生变化，我会创建一个通用模式

```
 data="""Mon Apr 06 22:19:45 PDT @switchfoot http://twitpic.com/2y1zl - Awww, 
 that's a bummer. :( You shoulda got David Carr of Third Day to do it. ;D
 Mon Apr 06 22:19:49 PDT is upset that he can't update his Facebook by texting 
 it... and might cry as a result :( School today also. Blah!
 Mon Apr 06 22:19:53 PDT @Kenichan I dived many times for the ball. Managed to 
 save 50% :( The rest go out of bounds
 Mon Apr 06 22:19:57 PDT my whole body feels itchy and like its on fire :("""

for line in data.splitlines():
    pattern=r'[a-zA-Z]{3}\s[a-zA-Z]{3}\s\d{2}\s(\d{2}\:*){3}\s[a-zA-Z]{3}'
    line=re.sub(pattern,'',line)
    print("{}\n".format(line)) 
```

输出：

```
@switchfoot http://twitpic.com/2y1zl - Awww, that's a bummer. :( You shoulda got David Carr of Third Day to do it. ;D

 is upset that he can't update his Facebook by texting it... and might cry as a result :( School today also. Blah!

 @Kenichan I dived many times for the ball. Managed to save 50% :( The rest go out of bounds my whole body feels itchy and like its on fire :( 
```

# sql - 性能问题：select s.* 与 select * 之间的区别

> ID：13398277
> 
> 赞同：2
> 
> 时间：2012-11-15T13:18:48.863
> 
> 标签：sql, performance, oracle, hibernate

最近我的查询性能出现了一些问题。这里描述了事情：[与直接运行相比，Hibernate select performance 很差 - 如何调试？](https://stackoverflow.com/questions/13306548/poor-hibernate-select-performance-comparing-to-running-directly-how-debug/13398223#13398223) 经过长时间的挣扎，我终于发现带有select前缀的查询如下：

```
 SELECT sth.* FROM Something as sth... 
```

查询以这种方式开始时慢 300 倍：

```
 SELECT * FROM Something as sth.. 
```

有人可以帮助我，并回答为什么会这样？一些关于此的外部文档将非常有用。

用于测试的表是：

**SALES_UNIT**表包含一些关于销售单位节点的基本信息，例如名称等。唯一的关联是与表 SALES_UNIT_TYPE，如 ManyToOne。主键是 ID，字段 VALID_FROM_DTTM 是日期。

**SALES_UNIT_RELATION**包含销售单元节点之间的关系 PARENT-CHILD。由 SALES_UNIT_PARENT_ID、SALES_UNIT_CHILD_ID 和 VALID_TO_DTTM/VALID_FROM_DTTM 组成。与任何表没有关联。这里的PK是..PARENT_ID、..CHILD_ID和VALID_FROM_DTTM

我使用的实际查询是：

```
 SELECT s.* 
    FROM   sales_unit s LEFT JOIN sales_unit_relation r 
               on (s.sales_unit_id = r.sales_unit_child_id) 
    WHERE  r.sales_unit_child_id IS NULL

    SELECT  * 
    FROM    sales_unit s LEFT JOIN sales_unit_relation r 
               on (s.sales_unit_id = r.sales_unit_child_id) 
    WHERE   r.sales_unit_child_id  IS NULL 
```

相同的查询，都使用左连接，唯一的区别是选择。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T13:57:53.780

当然，它们是两个不同的查询。计划可以随着选择的不同而改变。即在某事中。*它可能会在左连接表上选择完整/快速完整索引扫描。而第一次它可能是全表扫描。

为了进一步帮助您，我们可以看看计划吗？最好在 SQL*PLUS 中执行此操作

```
set timing on
set autotrace on traceonly

select s.* from sales_unit s left join sales_unit_relation r on (s.sales_unit_id = r.sales_unit_child_id) where r.sales_unit_child_id is null;

select * from sales_unit s left join sales_unit_relation r on (s.sales_unit_id = r.sales_unit_child_id) where r.sales_unit_child_id is null; 
```

***编辑***

给定你的解释计划，你看到每一步都有 CARDINALITY=1 吗？当桌子空着时，你已经收集了统计数据！看到这个：

```
SQL> select s.* from sales_unit s left join sales_unit_relation r on (s.sales_unit_id = r.child_sales_unit_id) where r.child_sales_unit_id is null;

no rows selected

Elapsed: 00:00:03.19

Execution Plan
----------------------------------------------------------
Plan hash value: 1064670292

------------------------------------------------------------------------------------
| Id  | Operation          | Name          | Rows  | Bytes | Cost (%CPU)| Time     |
------------------------------------------------------------------------------------
|   0 | SELECT STATEMENT   |               |     1 |    48 |    27  (86)| 00:00:01 |
|   1 |  NESTED LOOPS ANTI |               |     1 |    48 |    27  (86)| 00:00:01 |
|   2 |   TABLE ACCESS FULL| SALES_UNIT    |     1 |    35 |     2   (0)| 00:00:01 |
|*  3 |   INDEX RANGE SCAN | SALES_REL_IX1 |     1 |    13 |    25  (92)| 00:00:01 |
------------------------------------------------------------------------------------

Predicate Information (identified by operation id):
---------------------------------------------------

   3 - access("S"."SALES_UNIT_ID"="R"."CHILD_SALES_UNIT_ID")

Statistics
----------------------------------------------------------
          1  recursive calls
          0  db block gets
     200314  consistent gets
       2220  physical reads
          0  redo size
        297  bytes sent via SQL*Net to client
        339  bytes received via SQL*Net from client
          1  SQL*Net roundtrips to/from client
          0  sorts (memory)
          0  sorts (disk)
          0  rows processed 
```

所以看到它使用了 200314 IO 并花了几秒钟。另请参阅每一步的 ROWS = 1（即完整扫描）..让我们收集统计信息：

```
SQL> begin dbms_stats.gather_table_stats(user, 'SALES_UNIT', degree=>8, cascade=>true); end;
  2  /

PL/SQL procedure successfully completed.

SQL> begin dbms_stats.gather_table_stats(user, 'SALES_UNIT_RELATION', degree=>8, cascade=>true); end;
  2  /

PL/SQL procedure successfully completed. 
```

现在重新运行： SQL> select s.* from sales_unit s left join sales_unit_relation r on (s.sales_unit_id = r.child_sales_unit_id) 其中 r.child_sales_unit_id 为空；

```
no rows selected

Elapsed: 00:00:00.84

Execution Plan
----------------------------------------------------------
Plan hash value: 2005864719

-----------------------------------------------------------------------------------------------
| Id  | Operation             | Name          | Rows  | Bytes |TempSpc| Cost (%CPU)| Time     |
-----------------------------------------------------------------------------------------------
|   0 | SELECT STATEMENT      |               |   912 | 18240 |       |  1659   (3)| 00:00:20 |
|*  1 |  HASH JOIN ANTI       |               |   912 | 18240 |  2656K|  1659   (3)| 00:00:20 |
|   2 |   TABLE ACCESS FULL   | SALES_UNIT    |   100K|  1472K|       |    88   (3)| 00:00:02 |
|   3 |   INDEX FAST FULL SCAN| SALES_REL_IX1 |   991K|  4841K|       |   618   (3)| 00:00:08 |
-----------------------------------------------------------------------------------------------

Predicate Information (identified by operation id):
---------------------------------------------------

   1 - access("S"."SALES_UNIT_ID"="R"."CHILD_SALES_UNIT_ID")

Statistics
----------------------------------------------------------
          1  recursive calls
          0  db block gets
       2537  consistent gets
          0  physical reads
          0  redo size
        297  bytes sent via SQL*Net to client
        339  bytes received via SQL*Net from client
          1  SQL*Net roundtrips to/from client
          0  sorts (memory)
          0  sorts (disk)
          0  rows processed

SQL> 
```

现在我们只使用了 2537 个获取，并且该计划显示了正确的 ROWS 和一个 HASH 连接（更好地满足我们的需要）。我的测试表可能比你真实的小，这就是时间更接近的原因

# android - 所有的渲染脚本方法都是 API 11 吗？

> ID：13398278
> 
> 赞同：0
> 
> 时间：2012-11-15T13:18:57.273
> 
> 标签：android, renderscript

我正在尝试使用 rsRand 的浮点版本，但由于调用不明确而出现错误。我有一种预感，虽然我不确定该方法可能不是 API 11。

```
float test = rsRand(5);// okay
float test2 = rsRand(5.1);// error: call to 'rsRand' is ambiguous 
```

尽管参考资料显示 rsRand 可以以整数和浮点形式使用，但第二行 (test2) 会因模棱两可而引发错误。也许我只是犯了一个愚蠢的错误？

[渲染脚本参考](http://developer.android.com/guide/topics/renderscript/reference.html)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T13:21:54.137

常量 '5.1' 的类型是*double*。如果你想要一个浮点数，写`5.1f`：

```
float test2 = rsRand(5.1f); 
```

# silverlight - Silverlight 5 无法在 Internet Explorer 9 而不是 Firefox 中打印大型文档

> ID：13398280
> 
> 赞同：0
> 
> 时间：2012-11-15T13:19:18.567
> 
> 标签：silverlight, internet-explorer, firefox, internet-explorer-9, silverlight-5.0

在 Silverlight 中，如果我尝试在 IE9 的 Silverlight 5 应用程序中打印大量控件，则打印失败。即使我尝试打印到 XPS。

这在 Firefox 中始终有效。在 Firefox 中将打印输出到 xps 文件时，它是 221MB，我知道为什么这些文件这么大。

我尝试了很多事情，包括打印到 PDF 和以管理员身份运行，但没有任何乐趣。

我都试过`PrintDocument.Print()`了`PrintDocument.PrintBitmap()`

我知道这是一个常见问题，但任何人都可以提供我以前可能没有尝试过的任何建议吗？

谢谢，

——李

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T09:59:27.677

这听起来有点密集。但看起来安装所有最新的 Windows 更新解决了这个问题。如果你有这个问题，请尝试一下。

# android - 当makefile中的“LOCAL_ARM_NEON：= true”时，我的Android手机无法运行

> ID：13398286
> 
> 赞同：1
> 
> 时间：2012-11-15T13:19:30.603
> 
> 标签：android, android-ndk, makefile, arm, neon

当我添加`LOCAL_ARM_NEON := true`android.mk 时应用程序中止，即使没有任何霓虹灯指令。一些像“-mfpu=neon”这样的词也会导致中止。

我的手机是motorola android2.2
我在Android NDK 中的配置不正确吗？还是我的手机臂不支持霓虹灯指示？我需要在手机上运行霓虹灯指令。

帮帮我！！！谢谢！！！

ps：应用程序.mk：

```
APP_STL := gnustl_static
APP_ABI := armeabi-v7a
APP_CPPFLAGS += -fexceptions
APP_MODULES := AudioEngine 
```

安卓.mk：

```
CC = $(BASE_PATH)/build/prebuilt/linux-x86/arm-eabi-4.4.0/bin/arm-eabi-gcc 
LOCAL_PATH := $(call my-dir)

include $(CLEAR_VARS)

LOCAL_ARM_NEON := true
LOCAL_MODULE    := AudioEngine
LOCAL_SRC_FILES := AudioEngine.cpp Effecter.cpp SoundTouch.cpp TDStretch.cpp RateTransposer.cpp AAFilter.cpp BPMDetect.cpp \
FIFOSampleBuffer.cpp FIRFilter.cpp mmx_optimized.cpp PeakFinder.cpp sse_optimized.cpp cpu_detect_x86.cpp fft.s\
LOCAL_LDLIBS := -L$(SYSROOT)/usr/lib -llog
LOCAL_LDLIBS := -llog

include $(BUILD_SHARED_LIBRARY) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T15:22:41.687

我使用我编写的第二个小型 .so 库来检查 CPU 是否完全支持 NEON。检查后，我决定在 java 中我必须加载哪个版本的库，一个完全支持 NEON，一个完全不支持 NEON：这是从 NDK 文档中获取的代码：

```
JNIEXPORT JNICALL int Java_xypackagename_base_detectCPU_isNeon( JNIEnv* _env, jobject thiz )
{
    uint64_t features;

    if (android_getCpuFamily() != ANDROID_CPU_FAMILY_ARM)
    {
        __android_log_write( ANDROID_LOG_INFO, "detectCPU", "Processor is NOT an ARM processor" );
        return 0;
    }

    __android_log_write( ANDROID_LOG_INFO, "detectCPU", "Processor is an ARM processor" );

    features = android_getCpuFeatures();

    __android_log_print( ANDROID_LOG_INFO, "detectCPU", "Processor features: %u", (unsigned int)features );

    if ((features & ANDROID_CPU_ARM_FEATURE_ARMv7) == 0)
    {
        __android_log_write( ANDROID_LOG_INFO, "detectCPU", "Processor is NOT an ARM v7" );
        return 0;
    }

    __android_log_write( ANDROID_LOG_INFO, "detectCPU", "Processor is an ARM v7" );

    if ((features & ANDROID_CPU_ARM_FEATURE_NEON) == 0)
    {
        __android_log_write( ANDROID_LOG_INFO, "detectCPU", "Processor has NO NEON support" );
        return 0;
    }

    __android_log_write( ANDROID_LOG_INFO, "detectCPU", "Processor has NEON support" );

    return 1;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-28T02:29:11.563

在官方的 Hello-Neon-Example 中使用了以下方法：

**安卓.mk：**

```
# inside a module:

LOCAL_SRC_FILES := helloneon.c

ifeq ($(TARGET_ARCH_ABI),armeabi-v7a)
    LOCAL_CFLAGS := -DHAVE_NEON=1
    LOCAL_SRC_FILES += helloneon-intrinsics.c.neon
endif

#... 
```

**一些 C/C++ 源文件：**

```
/* HAVE_NEON is defined in Android.mk */
#ifdef HAVE_NEON
    callNeonFunc();
#else
    callStandardFunc();
#endif 
```

# c# - 当集合中的属性发生更改时收到通知

> ID：13398287
> 
> 赞同：2
> 
> 时间：2012-11-15T13:19:47.660
> 
> 标签：c#, data-binding

我有一个`ObservableCollection<CustomClass>`. CustomClass 有一些属性。其中之一被称为`Name`字符串类型。整个事情都绑定到 WPF 数据网格。现在，当集合的任何成员的名称发生更改时，我需要得到通知。`CollectionChanged`集合的事件不会被触发。我可以实施`INotifyPropertyChanged`，但我在哪里听呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-15T13:21:43.973

## 初步答案

您确实需要在自定义类上实现 INotifyPropertyChanged，并且您需要订阅集合中所有对象的 PropertyChanged 事件。如果更新了属性，您将收到有关该单个对象更改的通知。

## 更新

如果您想查看旧值和新值是什么，那么您需要创建自己的 PropertyChanged 事件（可能将其命名为 PropertyUpdated 以防止混淆哪个是哪个）。像下面的东西。如果您实现此事件（如自定义类所示），并使用此事件而不是 INotifyPropertyChanged，那么您在处理事件时可以访问事件参数中更新属性的旧值和新值。

```
public class PropertyUpdatedEventArgs: PropertyChangedEventArgs {
    public PropertyUpdatedEventArgs(string propertyName, object oldValue, object newValue): base(propertyName) {
        OldValue = oldValue;
        NewValue = newValue;
    }

    public object OldValue { get; private set; }
    public object NewValue { get; private set; }
}

public interface INotifyPropertyUpdated {
    event EventHandler<PropertyUpdatedEventArgs> PropertyUpdated;
}

public MyCustomClass: INotifyPropertyUpdated {
    #region INotifyPropertyUpdated members

    public event EventHandler<PropertyUpdatedEventArgs> PropertyUpdated;

    private void OnPropertyUpdated (string propertyName, object oldValue, object newValue) {
        var propertyUpdated = PropertyUpdated;
        if (propertyUpdated != null) {
            propertyUpdated(this, new PropertyUpdatedEventArgs(propertyName, oldValue, newValue));
        }
    }

    #endregion
    #region Properties

    private int _someValue;
    public int SomeValue {
        get { return _someValue; }
        set {
            if (_someValue != value) {
                var oldValue = _someValue;
                _someValue = value;
                OnPropertyUpdated("SomeValue", oldValue, SomeValue);
            }
        }
    }

    #endregion  
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T13:23:56.733

您需要对 ObservableCollection 中的每个项目实施 INotifyPropertyChanged。

# android - Universal Image Loader 和 View Pager 的图像缩放问题

> ID：13398288
> 
> 赞同：6
> 
> 时间：2012-11-15T13:19:52.450
> 
> 标签：android, android-viewpager, zooming, universal-image-loader

我想在 ImagePagerActivity 中使用带有通用图像加载器的 ImageViewZoom。

我可以缩放图像，滑动到下一张图像。但是当图像处于缩放位置时，我遇到了问题。

![在此处输入图像描述](../Images/3c4d3e3c3e7adce1643906d1f56a2478.png)

如果图像被缩放并且我处于中心位置，如果我想查看同一图像的右侧部分并向左滑动，它将转到下一个图像。请帮助我这样做。

这是我的 XML 代码：

```
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:padding="1dip" >

  <it.sephiroth.android.library.imagezoom.ImageViewTouch
     android:layout_weight="1"
     android:id="@+id/image"
     android:layout_width="fill_parent"
     android:layout_height="fill_parent"
     android:scaleType="fitCenter" />

  <ProgressBar
    android:id="@+id/loading"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="center"
    android:visibility="gone" />

</FrameLayout> 
```

**编辑：**

谢谢 NOSTRA，现在我可以使用以下代码控制缩放和滑动。但是多点触控缩放的问题。我无法用两根手指进行缩放。

这是我以前的代码（用两个手指可以正常工作）：

```
public class ScaleListener extends ScaleGestureDetector.SimpleOnScaleGestureListener {

        @Override
        public boolean onScale( ScaleGestureDetector detector ) {
            Log.d( LOG_TAG, "onScale" );
            float span = detector.getCurrentSpan() - detector.getPreviousSpan();
            float targetScale = mCurrentScaleFactor * detector.getScaleFactor();
            if ( mScaleEnabled ) {
                targetScale = Math.min( getMaxZoom(), Math.max( targetScale, getMinZoom()-0.1f ) );
                zoomTo( targetScale, detector.getFocusX(), detector.getFocusY() );
                mCurrentScaleFactor = Math.min( getMaxZoom(), Math.max( targetScale, getMinZoom()-1.0f ) );
                mDoubleTapDirection = 1;
                invalidate();
                return true;
            }
            return false;
        }
    } 
```

这是修改后的：

```
public class ScaleListener extends ScaleGestureDetector.SimpleOnScaleGestureListener {
        @Override
        public boolean onScaleBegin(ScaleGestureDetector detector) {
            externalScaleListener.onScaleBegin();
                return super.onScaleBegin(detector);
        }
        @Override
        public void onScaleEnd(ScaleGestureDetector detector) {
            externalScaleListener.onScaleEnd(mCurrentScaleFactor);
        }
    } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-15T20:32:22.377

首先，您必须能够收听图像的缩放。ImageViewTouch 不支持此功能（例如，[手势图像视图](https://github.com/jasonpolites/gesture-imageview)支持它），因此您应该自己实现它。

像这样改变`ImageViewTouch.java`：

```
public class ImageViewTouch extends ImageViewTouchBase {

    ...

    private OnPageScaleListener externalScaleListener;

    public void setOnScaleListener(OnPageScaleListener onScaleListener) {
        this.externalScaleListener = onScaleListener;
    }

    public interface OnPageScaleListener {
        void onScaleBegin();

        void onScaleEnd(float scale);
    }

    @Override
    protected void onZoom(float scale) {
        super.onZoom(scale);
        if (!mScaleDetector.isInProgress()) {
            mCurrentScaleFactor = scale;
            externalScaleListener.onScaleEnd(scale);
        }
    }

    public class ScaleListener extends ScaleGestureDetector.SimpleOnScaleGestureListener {
        @Override
        public boolean onScaleBegin(ScaleGestureDetector detector) {
            externalScaleListener.onScaleBegin();
                return super.onScaleBegin(detector);
        }

        ...

        @Override
        public void onScaleEnd(ScaleGestureDetector detector) {
            externalScaleListener.onScaleEnd(mCurrentScaleFactor);
        }
    }

    ...
} 
```

然后在您的应用程序中使用下一个实现`ViewPager`：

```
import android.content.Context;
import android.support.v4.view.ViewPager;
import android.util.AttributeSet;
import android.view.MotionEvent;

/**
 * {@link ViewPager} which can be deactivated (ignore touch events)
 * 
 * @author Sergey Tarasevich
 * @created 19.07.2012
 */
public class DeactivableViewPager extends ViewPager {

    private boolean activated = true;

    public DeactivableViewPager(Context context) {
        super(context);
    }

    public DeactivableViewPager(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    public void activate() {
        activated = true;
    }

    public void deactivate() {
        activated = false;
    }

    @Override
    public boolean onInterceptTouchEvent(MotionEvent event) {
        if (activated) {
            try {
                return super.onInterceptTouchEvent(event);
            } catch (Exception e) { // sometimes happens
                return true;
            }
        } else {
        return false;
    }
    }

    @Override
    public boolean onTouchEvent(MotionEvent event) {
        try {
            return super.onTouchEvent(event);
        } catch (Exception e) {
            return true;
        }
    }
} 
```

然后在 ViewPager 的适配器中，您应该为 ImageViewTouch 设置下一个比例监听器：

```
ImageViewTouch imageView = ...;
imageView.setOnScaleListener(new OnPageScaleListener() {
    @Override
    public void onScaleBegin() {
        viewPager.deactivate();
    }

    @Override
    public void onScaleEnd(float scale) {
        if (scale > 1.0) {
            viewPager.deactivate();
        } else {
            viewPager.activate();
        }
    }
});

imageLoader.displayImage(url, imageView, ...); 
```

并且不要忘记`maxImage***ForMemoryCache`在 ImageLoader 的配置中设置大的值，这样 UIL 就不会在解码到位图期间缩小原始图像：

```
ImageLoaderConfiguration config = new ImageLoaderConfiguration.Builder(getApplicationContext())
        ...
        .memoryCacheExtraOptions(3000, 3000)
        ...
        .build(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-14T16:45:35.680

我在 viewPager 中使用预缩放图像时遇到了问题，但现在一切正常并解决了问题。

您必须在 ImageViewTouchBase 类中搜索此行：

```
protected DisplayType mScaleType = DisplayType.NONE; 
```

然后将其更改为：

```
protected DisplayType mScaleType = DisplayType.FIT_TO_SCREEN; 
```

默认情况下，DisplayType 设置为 NONE，它很简单，只需使用 FIT_TO_SCREEN，您的图像在 viewPager 中滑动时将保持默认大小。

干杯

* * *

您可以设置这些属性以使图像始终适合屏幕

```
<it.sephiroth.android.library.imagezoom.ImageViewTouch
    android:id="@+id/iv_pager_image"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:adjustViewBounds="true"
    android:contentDescription="@string/descr_image"
    android:scaleType="matrix" /> 
```

# android - 向现有联系人添加新号码时选择正确的 rawContactID

> ID：13398300
> 
> 赞同：1
> 
> 时间：2012-11-15T13:20:35.367
> 
> 标签：android, api, android-contacts, contactscontract, rawcontactid

我正在构建一个自定义电话簿应用程序。作为其中的一部分，我需要在现有联系人下添加新联系人或其他信息（电话号码或电子邮件）。虽然这在简单的测试用例下效果很好，但在某些情况下（何时不明显）我最终会遇到两个问题：

1.  创建联系人的多个副本，通常是数百个！这些都是空白的，只是与被修改的原始联系人共享相同的显示名称

2.  联系人下的多个号码（完全相同）。真正不寻常的是，这些数字在contactContracts.Data 表中具有相同的_ID，因此无法理解如何存在多个具有相同唯一ID 的实例。我检查了是否是显示问题，但似乎不是

以上两项都让我质疑我是否正确插入信息。所以我想知道的是：

1.  创建新联系人时，是否应该指定默认的 account_name 和 account_type？我目前对两者都使用 null

2.  当我向现有联系人添加新电话号码时，将数据插入到 contactContracts.Data 表中的正确方法是什么？我目前正在使用 rawContactID 作为参考 ID 插入此号码，并且通过使用我的联系人的 contactID 作为参考，我从 contactContracts.RawContacts 表中获取此 rawContactID。请注意，因为我经常得到多个原始联系人，所以我最终选择了最后一个（任意选择）来插入我的电话号码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T04:20:38.567

您可以使用 AccountManager 类获取帐户名称和帐户类型信息。

```
 final AccountManager accountTypes = AccountManager.get(getApplicationContext());
    final Account accounts[] = accountTypes.getAccounts();
    for (final Account account: accounts) {
        Log.i(TAG, account.name);
    } 
```

# ruby - 检查元素的css值？

> ID：13398301
> 
> 赞同：0
> 
> 时间：2012-11-15T13:20:36.300
> 
> 标签：ruby, watir, watir-webdriver

示例：如果 div 标签具有 css ，我可以吗？

```
div{background-color: #444444} 
```

并根据结果返回真/假？

我正在使用 watir webdriver 运行测试脚本，我需要检查 css 的值并查看是否已应用更改等。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T14:06:09.480

[`style`](http://rubydoc.info/gems/watir-webdriver/Watir/Element#style-instance_method)Watir-webdriver 有一个用于获取计算样式的内置方法。

使用以下方式获取样式：

```
div.style('background-color') 
```

这将返回一个表示计算样式值的字符串。然后，您可以将其与您的预期值进行比较。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T13:27:06.067

您需要混合使用 Nokogiri（HTML 解析器）和 CSSPool（CSS 解析器）来查找样式以及正文中带有该选择器的任何元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T13:27:33.600

你可以用 Javascript 尝试这样的事情：

```
var bg = document.defaultView.getComputedStyle(yourElement).getPropertyValue('background-color');
if (bg == '#444444'){
// do your code here
} 
```

对于较旧的浏览器，您可能需要检查此项。

# javascript - iOS6上的onClick事件问题

> ID：13398302
> 
> 赞同：1
> 
> 时间：2012-11-15T13:20:39.220
> 
> 标签：javascript, ios, ios6, dom-events

在我的 HTML 页面中，我有一个导航到下一页的 onClick 事件。当它在 iOS 5 的 UIWebView 中打开时，它可以完美运行，但这在 iOS 6 中不起作用。我无法导航到另一个页面。

我认为 iOS 6 不支持 onClick 事件，我们必须支持 onClick 事件，因为我们需要在 iOS6 和 iOS5 上完成这项工作。我创建了一个小的 JS 函数，我觉得这可以解决我的问题。

```
<img src="resources/images/arrowRight.png" id = "rightArrow" class="arrowNavRight"/>
<script>
    document.getElementById("rightArrow").onclick=function(){nextSlide()};
</script> 
```

以上是我为解决问题所做的工作。它在 Chrome 中运行良好，但在应用程序中却不行。我对使用 Javascript 非常陌生。有没有其他人遇到过这个问题？非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T15:54:34.470

如果您正在为移动设备开发，您应该使用“touchstart”而不是“onclick”。

另外，如果您使用的是 Phonegap，我建议您使用 Jquery 和 Jquery mobile。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T03:42:56.443

我还没有为它写任何脚本。我只是使用了 onTouchStart 而不是 onClick，它对我来说效果很好。直到 iOS 5 才支持 onClick，但新的 iOS 6 不支持 onClick。

```
<img src="resources/images/arrowRight.png" id = "rightArrow" class="arrowNavRight" onTouchStart = "nextSlide()"/> 
```

# asp.net - RSS 在使用 asp.net 3.5 的谷歌浏览器中不起作用

> ID：13398305
> 
> 赞同：0
> 
> 时间：2012-11-15T13:20:42.263
> 
> 标签：asp.net

我已经在 asp.net 3.5 中实现了 RSS 的代码。我可以在 Firefox 的应用程序中看到 RSS 提要。

但我无法在 Google chrome 浏览器中加载 RSS 提要。它只显示了我在代码中编写的 XML。

如何使我的代码浏览器独立？

```
<rss version="2.0">
    <channel>
    <title>Demo Site</title>
        <link>http://www.ABC.com</link>
<asp:repeater id="rptRss" runat="server">
    <ItemTemplate>
        <item>

             <% if (Global.SessionData.Language == Convert.ToInt16(Global.GlobalCls.Language.Arabic))
   {%>
    <title>
            <%# RemoveIllegalCharacters(DataBinder.Eval(Container.DataItem, "TitleAr"))%></title>

            <description><%# RemoveIllegalCharacters(DataBinder.Eval(Container.DataItem, "DescriptionAr"))%></description>
       <%}
   else
   {%> 
     <title>
            <%# RemoveIllegalCharacters(DataBinder.Eval(Container.DataItem, "Title"))%></title>

            <description><%# RemoveIllegalCharacters(DataBinder.Eval(Container.DataItem, "Description"))%></description>     
        <%}%>                     
    </item>

    </ItemTemplate>     
    </asp:repeater>
    </channel>
</rss> 
```

这是我的代码。我刚刚绑定了转发器并调用了这个函数来删除非法字符。

```
protected string RemoveIllegalCharacters(object input)
    {
        // cast the input to a string
        string data = input.ToString();
        Cache.Remove("TitleAr");
        Cache.Remove("DescriptionAr");
        Cache.Remove("Title");
        Cache.Remove("Description");
        // replace illegal characters in XML documents with their entity references
        data = data.Replace("&", "&amp;");
        data = data.Replace("\"", "&quot;");
        data = data.Replace("'", "&apos;");
        data = data.Replace("<", "&lt;");
        data = data.Replace(">", "&gt;");

        return data;
    } 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T06:35:02.163

我已将@Page 指令的 ContentType 设置为“text/xml”，以指示 rss.aspx 页面的输出是 XML 文档。它对我来说很好。

# javascript - 如何使用 XPath 在 DOM 中查找可滚动元素？

> ID：13398308
> 
> 赞同：0
> 
> 时间：2012-11-15T13:20:54.590
> 
> 标签：javascript, dom, xpath, scrollbar, element

基本上我需要找到页面上所有具有滚动条（垂直或水平）的元素

如何判断一个元素是否有滚动条并且实际上可以滚动？我[在 jsperf 上找到了这个代码片段](http://jsperf.com/jquery-scrollable/2)。是否可以将代码背后的逻辑捕获到 XPath 表达式中？或者还有其他方法可以检查滚动条吗？

添加：

只是为了解释我正在尝试做的事情：我正在开发[VimFx](https://addons.mozilla.org/en-US/firefox/addon/vimfx/) - Firefox 扩展。基本上它引入了 Vim 风格的无鼠标快捷方式（我知道有 Vimperator 和 Pentadactyl ......）。我想实现的功能之一是允许用户选择使用 j/k 键滚动的容器。这就是为什么我需要发现任何给定随机页面上的所有可滚动元素。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-26T16:48:51.720

我现在已经实现了对在 VimFx[中发现可滚动元素的支持。](https://github.com/akhodakivskiy/VimFx/commit/4a46193fea775d91968ebb3bc3c223263b741fa6)

解决这个问题的关键是使用 Mozilla 特有的事件[overflow](https://developer.mozilla.org/en-US/docs/Web/Events/overflow) 和[underflow](https://developer.mozilla.org/en-US/docs/Web/Events/underflow)。

这个概念是：

```
// The function used for the overflow event:
function(event) {
  // `window` is a reference to the current window.
  var computedStyle = window.getComputedStyle(event.target)
  // `overflow: hidden` can cause overflow, but without a scrollbar, so
  // exclude such elements
  if (computedStyle && computedStyle.getPropertyValue('overflow') == 'hidden') {
    return
  }
  // `scrollableElements` is a reference to a `WeakMap` object for the
  // current window.
  scrollableElements.set(event.target)
}

// The function used for the underflow event:
function(event) {
  scrollableElements.delete(event.target)
}

// Somewhere else in the code we can now get a suitable `scrollableElements`
// object and check if elements are present in it.
if (scrollableElements.has(someElement)) {
  // `someElement` is scrollable!
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T13:41:40.917

您可以使用 javscript 检查是否将 div 的溢出设置为“滚动”

```
document.getElementById(elementId).style.overflow == "scroll"; 
```

我会检查每一个艰难的元素。如果你所有的元素都是 divs' 然后使用这个：

```
var allElements = document.getElementsByTagName("div");
for(index in allElements) {
  var element = allElements[index];
  if (element.style.overflow == "scroll" || element.style.overflowX == "scroll" || element.style.overflowY == "scroll"){
    //do something
  }
} 
```

# c++ - 编辑控件中的位图背景

> ID：13398309
> 
> 赞同：2
> 
> 时间：2012-11-15T13:20:57.927
> 
> 标签：c++, winapi

我想在标准编辑控件中使用位图作为背景。处理 WM_CTLCOLOREDIT 只允许通过 SetBkColor设置背景*颜色。*子类化编辑控件和处理 WM_ERASEBKGND 不起作用，因为背景是（可能）在 WM_PAINT 方法中绘制的。有没有办法使用自定义位图作为背景而无需创建自己的控件？

# uml - 如何用活动图建模 N 个线程做同样的事情？

> ID：13398312
> 
> 赞同：2
> 
> 时间：2012-11-15T13:21:04.743
> 
> 标签：uml, activity-diagram

我想绘制代表我的光线跟踪器过程的 uml 正确活动图。我知道我应该使用黑色矩形来模拟 fork/join。但是在我的应用程序中，我生成了 N 个线程做同样的事情（这并不简单，将通过多个活动元素进行建模）。在不知道线程数的情况下，如何在没有相同内容的情况下绘制这样的活动图？

我的解释很差，图像可能有助于理解我想用活动图建模什么

![在此处输入图像描述](../Images/5de73730747ee2e6ed3af707ebba5482.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T18:38:14.637

您可以使用扩展区域元素。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-04-30T15:11:37.087

我不知道如何为 N 个**控制**流的分支建模，我在三本 UML2 书籍和 UML2.4.1 正式规范（[http://www.omg.org/spec/UML/2.4.1/Superstructure](http://www.omg.org/spec/UML/2.4.1/Superstructure)）。

也就是说，使用带有 'parallel' 关键字的扩展区域，您可以分叉 N 个**对象**流，并行处理 N 个对象。

但是，我对这个解决方案并不完全满意，因为我怀疑您没有创建 N 个线程，因为您有 N 个要处理的对象，而是因为您有 N 个处理器内核并且每个线程处理大量帧（或任何对象需要处理）。

当然，您可以通过将处理器内核用作对象来解决此问题。

# c++ - 这是单例模式的正确实现吗？

> ID：13398313
> 
> 赞同：3
> 
> 时间：2012-11-15T13:21:05.473
> 
> 标签：c++, templates, singleton

以下代码是我对单例模式的实现。

```
 #include <iostream>

template<class T>
class Uncopyable
{
protected:
    Uncopyable(){}
    ~Uncopyable(){}
private:
    Uncopyable(const Uncopyable<T>&);
    Uncopyable& operator=(const Uncopyable<T>&);
};

template <class T>
class Singleton : private Uncopyable<T>
{
public:
    static T* getInstancePtr()
    {
        return instance;
    }
protected:
    Singleton<T>()
    {
        if(instance == 0)
        {
            instance = new T();
        }
    };
    ~Singleton<T>()
    {

    };
private:
    static T* instance;
};
template<class T> T* Singleton<T>::instance = 0;

class Test : public Singleton<Test>
{
public:
    Test(){};
    ~Test(){};
    inline void test() const
    {
        std::cout << "Blah" << std::endl;
    }
private:
    friend class Singleton<Test>;
protected:
};

int main(int argc, char* argv[])
{
    Test* t = Test::getInstancePtr();
    Test* t2 = Test::getInstancePtr();

    t->test();
    t2->test();

    return 0;
} 
```

它以这种形式工作，但是我不确定它是否真的正确，因为 Singleton 的构造函数和析构函数受到保护而不是私有。如果我将它们声明为私有，则代码将无法编译，因为类无法访问它们。这个实现是否可以安全使用，或者我可以做些什么来改进它以确保只创建和使用一个实例。

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-15T13:32:34.270

那肯定是单例的错误实现。该实施存在太多问题。

在 C++11 中，您可以使用[`std::call_once`](http://en.cppreference.com/w/cpp/thread/call_once)和[`std::once_flag`](http://en.cppreference.com/w/cpp/thread/once_flag)实现单例模式。这是一个例子：

```
//CRTP base singleton class

template<typename TDerived>
class Singleton 
{
    static std::unique_ptr<TDerived> m_instance;
    static std::once_flag            m_once;

protected:     

    Singleton() {}

public:

    ~Singleton() { }

    static TDerived & GetInstance() 
    {
        std::call_once
        ( 
           Singleton::m_once, 
           [] (){ Singleton::m_instance.reset( new TDerived() ); }
        );
        return *m_instance;
    }
};

template<typename TDerived> 
std::unique_ptr<TDerived>  Singleton<TDerived>::m_instance;

template<typename TDerived> 
std::once_flag   Singleton<TDerived>::m_once; 
```

现在您可以从中得出：

```
class Demo : public Singleton<Demo>
{
     public:
          void HelloWorld() { std::cout << "HelloWorld" << std::endl; }
};

//call HelloWorld() function through singleton instance!
DemoSingleton::GetInstance().HelloWorld(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T13:29:09.687

您发布的代码有几处问题。

1.  该类`Uncopyable`不需要模板化
2.  该类`Singleton`不是线程安全的
3.  您的`Singleton`实例永远不会被删除

我会将您的访问器重新实现为：

```
static T& GetInstance()
{
    static T instance;
    return instance;
} 
```

然后确保调用`Singleton<T>::GetInstance()`应用程序的主线程（在初始化期间）以避免任何线程问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-15T13:33:45.147

你的析构函数私有会导致编译错误？因为当进程结束时，编译不能调用私有函数所以对象不能被删除

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-15T13:41:22.937

不，这不是单例模式的良好实现，它不起作用！示例中唯一的 Test 实例为 NULL！构造函数永远不会被调用！

您需要将 Singleton::getInstancePtr 更改为：

```
public:
    static T* getInstancePtr()
    {
        if(instance == 0)
        {
            instance = new T();
        }
        return instance;
    }
protected:
   Singleton<T>() {}; 
```

现在将调用 Test 的构造函数。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-15T13:27:24.367

通常单例对象在程序的生命周期内都存在，所以我不会那样实现它们，因为你使用动态分配，那么有人必须释放它，你返回一个指向你的单例对象的指针，然后你可能会不小心删除它，所以我将使用这样的东西：

```
template< class T >
struct Singleton : Uncopyable<T> {
public:
    static T& get_instance() {
        static T res;
        use( res ); // make sure object initialized before used
        return res;
    }
private:
    static void use( T& ) {}
}; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-15T13:32:56.023

C++ 中没有正确实现单例反模式。

这种尝试的主要问题是：

*   语义非常奇怪且容易出错；您必须`Singleton`在某处实例化才能创建实例。您的示例从不创建实例，并且`t->test()`错误地通过空指针调用函数。
*   构造不是线程安全的；如果两个未同步的线程都实例化，则可以创建两个实例`Singleton`。
*   如果实例是实际创建的，那么它就会被泄露。

错误较少的实现可能更像这样：

```
template <typename T>
T & singleton()
{
    static T instance;
    return instance;
} 
```

但这仍然存在问题：特别是，实例可能会在其他静态对象之前被销毁，这些静态对象可能会尝试在其析构函数中访问它。

# android - 在公共函数中使用意图

> ID：13398314
> 
> 赞同：0
> 
> 时间：2012-11-15T13:21:05.133
> 
> 标签：android, android-intent

我有一种方法正在进行大量计算，然后按如下方式调用意图

```
public void sampleMethod(final Context cont)
{
 .
 .
 (huge calculation [50-80 lines])
 .
 .
Intent intent = new Intent(cont, TimesheetMain.class);
            finish();
            startActivity(intent);
} 
```

这存在于活动“SampleActivity”中。当我试图通过 Activity 'B' 中的 Activity 'SampleActivity' 对象访问它时，如下所示：

```
Context context = this;
SampleActivity sa = new SampleActivity();
sa.sampleMethod(context); 
```

从活动“B”访问它时，我得到了`NullPointerException`一行代码。`startActivity`我不知道我在哪里出错了。请帮帮我

**编辑 2**

当我向它添加上下文时，这似乎有效`cont.startActivity(intent)`，但我需要知道为什么我不应该在辅助类中使用另一个类或另一个活动的功能？难道是android框架的原因？在过去的两个月左右，我一直在这样做（没有意图部分），我从未在模拟器或设备（Nextbook Professional 7 SE）中遇到任何突然的强制关闭问题；请用一个合法的例子解释它

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T13:24:20.660

您不应该像这样自己创建明确的活动实例：

`SampleActivity sa = new SampleActivity();`

请为您的问题提供更好的描述，以及您希望通过此问题的结果实现什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T13:24:31.160

尝试以下更新的代码：

```
public void sampleMethod(final Activity cont)
{
Intent intent = new Intent(cont, TimesheetMain.class);
            cont.finish();
            cont.startActivity(intent);
} 
```

还将此方法移动到 util 类并从活动中调用它并传递活动引用，如下所示

```
class ActivityB extends Activity
{
.
.
.

Util.sampleMethod(this);
} 
```

# javascript - 表单中的Javascript Onchange事件（从邮政编码获取纬度和经度）

> ID：13398315
> 
> 赞同：1
> 
> 时间：2012-11-15T13:21:10.277
> 
> 标签：javascript, onchange

我要做的是从导入的邮政编码中获取纬度和经度。只要我只坚持一个输入（第一个或第二个单独），它就可以正常工作。一旦我尝试使用它们，我就无法让它工作。我正在使用 onchange 事件..

请看一下表格：

```
<form name="latlon" action="test2a.php" method='post' onchange="return usePointFromPostcode(document.getElementById('postcode').value) && usePointFromPostcode1(document.getElementById('postcode1').value) ">
    <input id="postcode" type="text" size="10" /><br>
    <input id="postcode1" type="text" size="10"/><br>
    Latitude:<input name="lat" type="text" id="lat" size="10"/><br />
    Longitude:<input name="lon" type="text" id="lon" size="10"/><br><br>
    Latitude:<input name="lat1" type="text" id="lat1" size="10"/><br />
    Longitude:<input name="lon1" type="text" id="lon1" size="10"/>
    <input type="submit" value="Get Lat / Lon"/>
</form> 
```

在 JavaScript 中，这是我用来获取纬度和经度的：

```
function usePointFromPostcode(postcode, callbackFunction) {
    localSearch.setSearchCompleteCallback(null,

    function () {

        if (localSearch.results[0]) {
            var resultLat = localSearch.results[0].lat;
            var resultLng = localSearch.results[0].lng;
            var point = new GLatLng(resultLat, resultLng);
            document.forms['latlon'].lat.value = resultLat;
            document.forms['latlon'].lon.value = resultLng;
            callbackFunction(point);
        } else {
            alert("Postcode not found!");
        }
    });

    localSearch.execute(postcode + ", UK");
}

function usePointFromPostcode1(postcode1, callbackFunction) {

    localSearch.setSearchCompleteCallback(null,

    function () {

        if (localSearch.results[0]) {
            var resultLat = localSearch.results[0].lat;
            var resultLng = localSearch.results[0].lng;
            var point = new GLatLng(resultLat, resultLng);
            document.forms['latlon'].lat1.value = resultLat;
            document.forms['latlon'].lon1.value = resultLng;
            callbackFunction(point);
        } else {
            alert("Postcode not found!");
        }
    });

    localSearch.execute(postcode1 + ", UK");
} 
```

我完全被困在这里。我究竟做错了什么？将不胜感激任何帮助，并提前感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-10T15:49:33.180

有效，但并不完美....

```
 <input type="text" size="5"  name="postcode1" id="postcode1" maxlength="4" style="width: 32px" onchange="usePointFromPostcode(document.getElementById('postcode1').value)"  >

 <input type="text" size="5"  name="postcode2" id="postcode2" maxlength="4" style="width: 32px" onchange="usePointFromPostcode1(document.getElementById('postcode2').value)"> 
```

有什么建议么 ....

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T13:33:27.620

尝试改变

```
<form name="latlon" action="test2a.php" method='post' onchange="return usePointFromPostcode(document.getElementById('postcode').value) && usePointFromPostcode1(document.getElementById('postcode1').value) "> 
```

在

```
<form name="latlon" action="test2a.php" method='post' onchange="usePointFromPostcode(document.getElementById('postcode').value); usePointFromPostcode1(document.getElementById('postcode1').value); "> 
```

我不确定您为什么将其用作 onchange 事件的返回值。据我所知，在使用`&&`.

**编辑：** 啊，我现在看到了一些东西：您在第一个函数中设置了对 localSearch 变量的回调，并且在第二个函数中覆盖了它。这就是为什么`document.forms['latlon'].lat`并且`document.forms['latlon'].lon`永远不会改变价值。只有`lat1`和`lon1`会。（两次，可能）

您要么必须创建另一个变量，例如 localSearch，然后将其用于第二个函数。

或者很可能更好；您必须检查回调是来自第一个函数还是来自第二个函数。我不确定这是否可能。

# google-app-engine - 使用 self.request.get 查询数据存储

> ID：13398318
> 
> 赞同：-1
> 
> 时间：2012-11-15T13:21:12.133
> 
> 标签：google-app-engine, google-cloud-datastore

我正在尝试做类似的事情

```
 try:
       q = db.GqlQuery("SELECT * FROM people WHERE location = :loc", loc = location).fetch(1)
       self.render('experimentform.html', q = q)
    except:
        render('experimentform.html')
        location = self.request.get('location') 
```

允许用户使用下拉菜单查询数据存储。

它可以渲染实验表单，但是在提交位置后我收到 405 错误，不允许发布方法。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T14:14:33.337

您将表单作为 POST 提交，但您没有（通过它的声音）配置 POST 处理程序。

所以你在哪里

```
class MainPage(webapp2.RequestHandler):
    def get(self):
        do something with a get request 
```

你也需要这个：

```
 class MainPage(webapp2.RequestHandler):
        def post(self):
            *do something with a post request* 
```

或者您可以重新配置您的表单以使用 GET 而不是 POST 并保留您当前的代码：

```
<form name="input" action="website_action" method="get"> 
```

# c# - DevArt dotConnect for Oracle 在带有 EF 4.0 的字符串上具有奇怪的行为

> ID：13398322
> 
> 赞同：0
> 
> 时间：2012-11-15T13:21:20.870
> 
> 标签：c#, .net, entity-framework, devart, dotconnect

在我将我的项目更新到 DevArt 版本 7.2.114 之后，我意识到某些查询不会返回结果，尽管如果直接在 TOAD 中执行生成的 SQL 会返回结果。如果我切换回版本 7.0.25 一切正常。

我的数据库客户表如下所示：

```
SomeField  | Firstname  | CustomerNo

(null)     | John       | 12345
12345      | John       | 12345
828282     | Mark       | 12346 
```

我的查询如下所示：

```
var firstNameToSearch = "John";
var someFieldToSearch = null;
var result = from customer in context.Customers
            join someTable in context.SomeTables on customer.CustomerNo equals "12345"                            
            where someTable.SomeCondition && (someTable.SomeField == someFieldToSearch || someFieldToSearch == null) && (customer.Firstname == firstNameToSearch || firstNameToSearch == null) 
```

现在，当我执行 EF 查询时，它将产生 0 条记录，没有任何异常。但是如果我使用 SQL 命令，它将产生 2 条记录。

如果我将第 2 行中的代码更改为：

```
var someFieldToSearch = string.Empty; 
```

它将返回正确的结果。

我发现了一些指向此代码的提示：

```
Devart.Data.Oracle.Entity.OracleEntityProviderServices.HandleNullStringsAsEmptyStrings = true; 
```

但它没有任何效果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T13:39:40.297

请尝试最新 (7.2.122) 版本的 dotConnect for Oracle。如果这没有帮助，请指定以下信息： 1) 打开 dbMonitor 工具并在此处（或在[forums.devart.com/viewforum.php?f=30](http://forums.devart.com/viewforum.php?f=30)）发布生成的 SQL，使用的参数（它们的类型和值); 2) 所涉及的数据库列的确切数据类型；3）您使用的是OCI（通过Oracle客户端）还是直接连接模式？

# c# - 无法在 C# 中打开水晶报表设计器

> ID：13398323
> 
> 赞同：0
> 
> 时间：2012-11-15T13:21:26.707
> 
> 标签：c#, crystal-reports, crystal-reports-2008

如何更改 .RPT 的文件关联？因为我无法在 Visual Studio 2008 中打开 Crystal Reports。当我尝试打开它时，它似乎是二进制的。我已经重新安装了 Crystal Reports 和 Visual Studio 2008，但仍然无法打开 RPT 文件。用于打开文件的默认程序似乎存在问题。RPT，如何恢复默认值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T19:39:30.110

创建一个新的水晶报表项目，然后您应该能够将现有报表添加到项目并打开它。

# java - CORS - Access-Control-Allow-Origin 不允许来源 http://localhost。错误。

> ID：13398344
> 
> 赞同：0
> 
> 时间：2012-11-15T13:22:33.817
> 
> 标签：java, tomcat7, cors, atmosphere

我在使用大气框架 (https://github.com/Atmosphere/atmosphere) 构建的网络应用程序中启用 CORS 时遇到问题

我的请求看起来像：

```
/**
 * @constructor
 * @extends {goog.events.EventTarget}
 *
 * @param {string} id The id.
 * @param {string} url The url.
 * @param {Object} request The request options.
 */
atom.Request = function(id, url, request) {
  this.setParentEventTarget(core.inject(atom));
  this.url = url;
  this.requestOptions_ = {};
  goog.object.extend(this.requestOptions_, request);
  goog.object.extend(this.requestOptions_, {
    'url' : url,
    'onError' : goog.bind(this.onError, this),
    'onClose' : goog.bind(this.onClose, this),
    'onOpen': goog.bind(this.onOpen, this),
    'fallbackTransport' : 'jsonp',
    'onMessage' : goog.bind(this.onMessage, this),
    'onMessagePublished': goog.bind(this.onMessagePublished, this),
    'onReconnect': goog.bind(this.onReconnect, this),
    'enableXDR': 'true',
    'transport': 'streaming'
  });
  this.id_ = id;
  this.request_ = $.atmosphere.subscribe(this.requestOptions_);
};
goog.inherits(atom.Request, goog.events.EventTarget); 
```

在服务器（tomcat7.0.32）上，我的过滤器是 transactioncompany cors 过滤器（http://software.dzhuvinov.com/cors-filter.html）

网页.xml：

```
<filter>
    <filter-name>corsFilter</filter-name>
    <filter-class>com.thetransactioncompany.cors.CORSFilter</filter-class>

      <init-param>
            <param-name>cors.allowGenericHttpRequests</param-name>
            <param-value>true</param-value>
       </init-param>
        <init-param>
            <param-name>cors.allowOrigin</param-name>
            <param-value>*</param-value>
       </init-param>
        <init-param>
            <param-name>cors.supportedMethods</param-name>
            <param-value>GET, HEAD, POST, OPTIONS</param-value>
       </init-param>
        <init-param>
            <param-name>cors.supportedHeaders</param-name>
            <param-value>Origin, Content-Type, X-Requested-With, Access-Control-Allow-Origin</param-value>
       </init-param>
        <init-param>
            <param-name>cors.supportsCredentials</param-name>
            <param-value>true</param-value>
       </init-param>
        <init-param>
            <param-name>cors.maxAge</param-name>
            <param-value>3600</param-value>
       </init-param>
</filter> 
```

当我从客户端发出请求时，我会收到 `Origin http://localhost is not allowed by Access-Control-Allow-Origin.` 错误消息。

索取资料：

```
Request Headers 

Cache-Control:no-cache
Origin:http://localhost
Pragma:no-cache
Referer:http://localhost/sportsdesk/build/development/en/application.html
User-Agent:Mozilla/5.0 (X11; Linux i686) AppleWebKit/537.1 (KHTML, like Gecko) Chrome/21.0.1180.79 Safari/537.1

Query String Parameters

X-Atmosphere-tracking-id:0
X-Atmosphere-Framework:1.1
X-Atmosphere-Transport:streaming
X-Cache-Date:0
_:1352918719739 
```

在这一点上，当涉及到问题时，我真的没有想法。有人能发现吗？

干杯，迈克。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T19:07:34.203

将 cors.supportsCredentials 设置为“false”（如果您在 XHR 请求中设置 withCredentials，您可以随时重新启用它）。

# haskell - 检查子列表的所有元素是否等于另一个 nubBy

> ID：13398345
> 
> 赞同：1
> 
> 时间：2012-11-15T13:22:38.763
> 
> 标签：haskell

所以，我想用来`nubBy`从列表列表中删除所有重复项。在这种情况下`[1,2,3]==[1,3,2]==[2,3,1]`等，所以我想我需要使用`all`并`elem`询问所有元素是否都是另一个列表的元素，但我正在努力制定语法。

为了清楚起见，我有例如

```
[[1,2],[2,3],[4,5],[2,1],[2,3]] 
```

我想删除重复项以获取输出

```
[[1,2],[2,3],[4,5]] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T13:28:36.640

如果您不关心结果内部列表中元素的顺序是否与原始列表之一匹配，则可以在使用`map sort`之前对它们进行排序`nub`。否则，`nubBy ((==) `on` sort)`将以额外的成本为每个比较对内部列表进行排序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T13:47:05.087

通过昂贵的二进制操作进行排序（这里是 nubBy）的标准方法是*decorate-process-undecorate*习惯用法（又名[Schwartzian 变换](http://en.wikipedia.org/wiki/Schwartzian_transform)）：

```
import Data.List
import Data.Function

g xs = map snd . nubBy ((==)`on`fst) $ [ (sort ys,ys) | ys <- xs] 
```

# box-api - 我们是否有通过指定文件夹名称来获取文件夹 ID 的 Web 服务 API？

> ID：13398347
> 
> 赞同：2
> 
> 时间：2012-11-15T13:22:50.383
> 
> 标签：box-api

我正在使用可用于执行不同框操作的框 API。我在设计一个用户友好的 UI 来配置与框的连接时遇到问题，这样我们就可以指定文件夹的名称并将我们的文件上传到这个所需的文件夹。我找到了一个 API，它可以帮助我们通过指定文件的 id 而不是名称来将文件放入文件夹中。请让我知道这是否可能？如果这是不可能的，用户将很难指定他们想要上传文件的位置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T22:47:47.317

当前实现此类功能的方法是逐步向下导航层次结构。（基本上是爬树）使用这个 API 调用：http: [//developers.box.com/docs/#folders-get-information-about-a-folder](http://developers.box.com/docs/#folders-get-information-about-a-folder)

此调用将为您提供当前文件夹的“item_collection”，包括所有子文件夹的 ID：

```
"item_collection":
{
    "total_count":2,
    "entries":[
        {
            "type":"file",
            "id":"2305649799",
            "sequence_id":"1",
            "name":"testing.html"
        },
        {
            "type":"folder",
            "id":"2305623799",
            "sequence_id":"1",
            "name":"a child folder"
        }
    ]
} 
```

您可以从根文件夹逐步向下递归。主要技巧是要知道用户的根文件夹的 ID 始终为 0，这为您提供了起点。

例如在这个例子中，如果你正在寻找一个文件夹

> /一个子文件夹/其他东西

你的电话是：

[https://api.box.com/2.0/folders/0](https://api.box.com/2.0/folders/0)（用于根文件夹）

[https://api.box.com/2.0/folders/2305623799](https://api.box.com/2.0/folders/2305623799)（对于“子文件夹”）

这是云存储 API 最常用的接口。我现在能想到的唯一例外是 Dropbox，它的 API 根据路径工作。

# magento - Magento观察者没有被事件触发

> ID：13398349
> 
> 赞同：0
> 
> 时间：2012-11-15T13:23:10.350
> 
> 标签：magento

我正在尝试向 Magento 添加一个模块，该模块将观察者附加到 sales_order_invoice_register 事件，但无法使其正常工作。

我有一个小脚本，它只执行以下操作：

```
require_once('app/Mage.php');
Mage::app();
Mage::dispatchEvent('sales_order_invoice_register'); 
```

当我从 Magento 安装根目录中的命令行执行该脚本时，会按预期触发观察者方法，因此我认为所有内容都使用模块正确配置（在我的模块 config.xml 的全局部分中）。

但是，当我创建一个订单，然后从管理页面发货并开具发票时，我可以看到事件被调度但观察者没有被触发。这似乎是因为 Config.php 的 getEventConfig() 方法在查找 $_eventAreas['global'] 时不包含我在自己的 config.xml 中添加的条目（也不包含 sales_order_invoice_register 事件的任何其他条目）。有谁知道这是如何发生的，以及如何解决它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T13:44:39.973

对不起，我要回答我自己的问题。

已经看了几个小时了，只是把它写在上面就让我注意到了一些更强烈的东西。从命令行运行而不是通过 apache 运行时它如何工作？配置必须没问题，不幸的是文件所有权不是。我使用自己的用户而不是 Web 服务用户从命令行运行。我使用自己的用户而不是 Web 服务用户创建了模块配置文件。因此，对于扫描模块目录时的 Web 服务进程，我的新模块配置将不可见，导致它无法加载。我只是将文件 chown 给 Web 服务用户，它立即工作。

# javascript - 使用 javascript 解析带有 CDATA 部分的 xml - 防止执行脚本

> ID：13398350
> 
> 赞同：1
> 
> 时间：2012-11-15T13:23:10.997
> 
> 标签：javascript, xml, xml-parsing, xss

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<bookstore>
<book category="cooking">
<page>
<uri>http://www.somepage.com/page1.html</uri>
<content><![CDATA[<script>alert("Hello");</script>]]></content>
</page>
<title lang="en">Everyday Italian</title>
<author>Giada De Laurentiis</author>
<year>2005</year>
<price>30.00</price>
</book>
</bookstore> 
```

假设我想使用 javascript 解析 xml。

```
<!DOCTYPE html>
<html>
<body>
<script>
if (window.XMLHttpRequest)
  {// code for IE7+, Firefox, Chrome, Opera, Safari
  xmlhttp=new XMLHttpRequest();
  }
else
  {// code for IE6, IE5
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }
xmlhttp.open("GET","books.xml",false);
xmlhttp.send();
xmlDoc=xmlhttp.responseXML; 

txt=xmlDoc.getElementsByTagName("content")[0].childNodes[0].nodeValue;
document.write(txt);
</script>
</body>
</html> 
```

输出是一个带有 Hello 消息的警报框。我不希望脚本执行。

而不是 xmlDoc.getElementsByTagName("content")[0].childNodes[0].nodeValue; 我该怎么做才能得到输出：

```
<script>alert("Hello");</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T13:24:59.303

不要`document.write`这样 - 将其视为 HTML，而不是文本。

使用`createTextNode`，然后`appendChild`在 DOM 中的某处得到结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-18T08:03:51.820

我想你可能用过这个：

```
 var config = new ActiveXObject("Microsoft.XMLDOM");
    config.async = false;
    config.loadXML(xmlhttp.responseText);
    var read = config.selectNodes("//bookstore/book/page/content")[0];
    alert(read); 
```

# javascript - 在 JQuery 中搜索复杂的多维数组

> ID：13398353
> 
> 赞同：2
> 
> 时间：2012-11-15T13:23:14.407
> 
> 标签：javascript, html

我有一个非常复杂的多维数组。

每个项目都像（此代码显示了推送到数组的 var）：

```
var arrayItem = {
                'itemId': '00001',
                'itemName': 'Biscuits',
                'parentId': 'Food',
                'children': []
            }; 
```

itemId 始终是唯一的。children 数组中填充了更多`arrayItem`(s)。因此，该数组可以有很多级别（可能最多 9 个，但可能更多） - 所以基本数组有 x 个对象，每个对象可以有 y 个子对象等等......

有没有办法搜索特定的`itemId`. 我尝试了各种 .each 方法，但似乎无法搜索多维数组的所有级别。

任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-15T13:27:03.617

**编辑：**

经过几年的经验和[`Array`原型改进](https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Array/find)，这是我解决问题的方法：

```
function find(arr, id) {
    return arr.find(item => item.itemId === id) 
        || arr.reduce((found, curr) => found || find(curr.children, id), undefined)
} 
```

这将通过对象图执行广度优先搜索，`undefined`如果它不包含您要查找的 ID，则返回。

**原答案：**

```
function finder(arr, id){
    arr = [].concat(arr);
    for(var i = 0; i<arr.length; i++){
        if(arr[i].itemId == id){
            return arr[i];
        }else if(arr[i].children.length){
            var val = finder(arr[i].children, id);
            if(val){
                return val;
            }
        }
    }
    return null;        
} 
```

通过 finder 你的数组和所需的 ID，它将找到并返回具有该 ID 的数组项。

像这样使用它：

```
var arr = [{
    'itemId': '00001',
        'itemName': 'Biscuits',
        'parentId': 'Food',
        'children': [{
        'itemId': '00002',
            'itemName': 'Sweet',
            'parentId': 'Biscuits',
            'children': [{
            'itemId': '00004',
                'itemName': 'Chocolate',
                'parentId': 'Sweet',
                'children': []
        }]
    }, {
        'itemId': '00003',
            'itemName': 'Salty',
            'parentId': 'Biscuits',
            'children': []
    }]
}];

var chocolate = finder(arr,"00004"); 
```

在这里演示：http: [//jsfiddle.net/mVyha/](http://jsfiddle.net/mVyha/)

# date - “for”命令的语法：以下批处理文件中的第 10 行有什么问题？

> ID：13398354
> 
> 赞同：2
> 
> 时间：2012-11-15T13:23:15.033
> 
> 标签：date, batch-file

```
 1 echo off
   2 
   3 echo Please enter a date
   4 set /p a=
   5 echo %a%
   6 for /D %%d in (M:\Serienbriefauftrag\*) do (
   7 if not exist %%d\Erledigt\*.bat echo %%d
   8 )
   9 pause
  10 for /d %%b in (dir M:\Serienbriefauftrag\%%d /T:C) 
  11 echo %%b
  12 pause 
```

代码在第 10 行（语法错误）之前工作正常，目的是获取文件夹的创建日期，将其与“%a%”进行比较，如果它低于输入的日期“%a%”，则应移动文件夹. 但不知何故...

找到了一种获取创建日期的方法

```
if not exist %%d\Erledigt\*.bat echo %%~td|findstr /i /l 
```

新任务是使​​输出“可计算”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T14:39:30.713

两件事情：

1) 第 10 行`%%d`未定义（空），因为第一个循环的范围（定义它的位置）留在第 8 行。您可以设置另一个变量，`%%d`以便在循环结束后能够使用它，但要小心. 批量使用`set`in`for`循环有点[棘手](http://www.robvanderwoude.com/variableexpansion.php)。为了避开延迟变量扩展的可怕使用，我建议您在工作时留在循环内部。

```
@echo off
set /p a=Please enter a date: 
for /d %%d in (M:\Serienbriefauftrag\*) do (
    if not exist %%d\Erledigt\*.bat (
        :: Do whatever you want with %%d in here
        echo "%%d"
    )
)
pause 
```

2）你的第二个循环的语法是错误的。您缺少`do`循环体之前的循环体，并`/d`让循环遍历指定目录中的所有文件夹。`dir M:\Serienbriefauftrag\%%d /T:C`不是目录而是命令。如果要遍历该命令的输出，则必须使用`/f`括号的内容并将其放在单引号中，例如`('dir M:\Serienbriefauftrag\%%d /T:C')`.

# sql - SQL 如果在相似日期未找到数据，则获取最后日期

> ID：13398356
> 
> 赞同：4
> 
> 时间：2012-11-15T13:23:24.783
> 
> 标签：sql, sql-server

我有一张`[Price]`这样的桌子

> 日期 项目 价格
> 
> ```
> 1-1-2012 Potion 500
> 1-1-2012 Elixir 5000
> 1-10-2012 Potion 600 
> ```

桌子`[Transaction]`

> 日期 项目 金额
> 
> 1-1-2012 药水 1
> 1-5-2012 药水 1

我需要加入这些表，价格和交易并排。规则是如果在 [Price] 中没有找到日期，则使用最新价格

因此，2012 年 1 月 5 日药水将花费 500

结果应该是这样的

> 日期 项目 金额 价格
> 
> 1-1-2012 药水 1 500
> 1-5-2012 药水 1 500

所以，我不知道如何做到这一点，如果你知道解决方案，请帮助。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T13:36:29.570

一个简单的标量子查询就可以了。

```
select t.date, t.item, t.amount,
       (select top(1) price
          from price
         where t.item=p.item and p.date <= t.date
      order by p.date desc) price
  from [transaction] t; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T13:38:37.000

这应该有效：

```
 SELECT 
    t.Date, 
    t.Item, 
    t.Amount,
    ISNULL(
       p.Price, 
       (
          SELECT TOP 1 p1.Price FROM [Price] p1 
          WHERE p1.Item = t.Item 
          ORDER BY Date DESC
       ) [Price]
 FROM 
     [Transaction] t 
     LEFT OUTER JOIN
         [Price] p
         ON 
         t.Date = p.Date
         AND
         t.Item = p.Item 
```

# spring - 如何在 Spring 配置文件中嵌套 Spring 表达式语言中的静态方法调用？

> ID：13398363
> 
> 赞同：1
> 
> 时间：2012-11-15T13:23:49.090
> 
> 标签：spring, guava, spring-el

我想将番石榴[谓词](http://google-collections.googlecode.com/svn/trunk/javadoc/com/google/common/base/Predicate.html)注入到我的 bean 中，它应该是[not](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/base/Predicates.html#not%28com.google.common.base.Predicate%29)内的[equalto](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/base/Predicates.html#equalTo%28T%29)。

我试过这个：

```
<bean id="bla" class="something">
    <property name="indexPredicate" value="#{T(com.google.common.base.Predicates).not(T(com.google.common.base.Predicates).equalTo(145028) )}" />
</bean> 
```

但它抛出异常：

> 引起：org.springframework.expression.spel.SpelParseException: EL1049E:(pos 36): '.' 之后的意外数据：'not(!)'

***春天 3.0.5，番石榴 11.0.2***

我怎样才能让它工作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T14:29:46.473

显然 SpEL 认为你的意思[是 Operator`not`](http://static.springsource.org/spring/docs/current/spring-framework-reference/html/expressions.html#expressions-operators)。但是，我在文档中看不到任何逃避或消除歧义的方法。也许您需要为此提交功能请求。

或者，这里是 3.0 之前的工厂方法方法。我知道，这很可怕，但在您的情况下，这可能是一个可以接受的解决方法：

```
<property name="indexPredicate">
    <bean class="com.google.common.base.Predicates" factory-method="not">
        <constructor-arg>
            <bean class="com.google.common.base.Predicates"
                  factory-method="equalTo">
                <constructor-arg>
                    <bean class="java.lang.Integer" factory-method="valueOf">
                        <constructor-arg value="145028" />
                    </bean>
                </constructor-arg>
            </bean>
        </constructor-arg>
    </bean>
</property> 
```

# mysql - 给定条件连接 2 列

> ID：13398365
> 
> 赞同：2
> 
> 时间：2012-11-15T13:23:54.237
> 
> 标签：mysql

我有以下情况：我有一张表可以说`X`字段在哪里

```
 -------------------------
 | City      | Country   |
 ------------------------|
 | Melbourne | Australia |
 | Phoenix   | USA       |
 | Manchester| USA       |
 | Manchester| UK        |
 | Phoenix   | USA       |
 | Pune      | India     |
 ------------------------ 
```

我试图仅在相同且不同时更新`city`列。我试过做`city``country`

> UPDATE X SET ( `City`) = CONCAT( `CITY`, `COUNTRY`) WHERE = ?

where子句应该是什么？

**编辑：**

输出应该看起来像

```
 ------------------------------
 | City           | Country   |
 -----------------------------|
 | Melbourne      | Australia |
 | Phoenix        | USA       |
 | Manchester, USA| USA       |
 | Manchester, UK | UK        |
 | Phoenix        | USA       |
 | Pune           | India     |
 ------------------------------ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T13:33:49.477

```
UPDATE X inner join X X_1 on X.city = X_1.city
SET X.City=CONCAT(X.city, ', ', X.Country)
WHERE X.country <> X_1.country 
```

这会将城市名称设置为`CONCAT(X.city, ', ', X.Country)`仅在多个国家/地区存在相同城市名称的情况下。

**编辑：**我想我更喜欢这个其他版本：

```
UPDATE
  X inner join
  (select city from X group by city having count(*)>1) X_dup
  on X.city = X_dup.city
SET X.City=CONCAT(X.city, ', ', X.Country) 
```

我正在使用所有这些奇怪的连接，因为如果您在子查询中引用它，MySql 不允许您更新表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T13:36:42.660

```
UPDATE X SET (City) = CONCAT(CITY,', ',COUNTRY) 
WHERE CITY IN 
    ( 
    SELECT tmp.City FROM 
        (SELECT DISTINCT x2.City, x2.Country FROM X AS x2) AS tmp 
    GROUP BY tmp.City HAVING COUNT(1) > 1 
    ) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T13:43:02.477

您可以`City`通过如下查询获取所有重复的城镇：

```
SELECT City, COUNT(City) AS Count
FROM X
GROUP BY City
HAVING Count > 1 
```

`IN`在条件（只有一列）中最容易使用，因此将封装它：

```
SELECT City
FROM (
    SELECT City, COUNT(City) AS Count
    FROM X
    GROUP BY City
    HAVING Count > 1
) AS t1 
```

现在我们必须将所有数据推送到临时表中，因为当您在更新同一个表时尝试使用嵌套表选择时 mysql 不起作用：

```
CREATE TEMPORARY TABLE tmp (VARCHAR(255) city);
INSERT INTO tmp (
    SELECT City
    FROM (
        SELECT City, COUNT(City) AS Count
        FROM X
        GROUP BY City
        HAVING Count > 1
    ) AS t1
) 
```

现在我们可以启动更新：

```
UPDATE X SET (City) = CONCAT(CITY,COUNTRY)
WHERE `City` IN (SELECT City FROM tmp); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-15T13:44:06.920

尝试使用：

```
GROUP_CONCAT() 
```

返回一个字符串结果，其中包含来自组的连接的非 NULL 值

[http://www.mysqlperformanceblog.com/2006/09/04/group_concat-useful-group-by-extension/](http://www.mysqlperformanceblog.com/2006/09/04/group_concat-useful-group-by-extension/)

# android - 如何解决列表视图滚动期间的内存不足错误？

> ID：13398367
> 
> 赞同：2
> 
> 时间：2012-11-15T13:23:56.543
> 
> 标签：android

> **可能重复：**
> [Android Out of Memory error with Lazy Load images](https://stackoverflow.com/questions/5082703/android-out-of-memory-error-with-lazy-load-images)
> [Outofmemory error during快速滚动列表视图](https://stackoverflow.com/questions/13376899/outofmemory-error-during-scrolling-the-listview-fastly)

我正在使用 listview 显示图像，来自 facebook api 的名称。我可以正确显示图像。我的问题是当我快速滚动列表时我得到

```
 11-15 18:41:29.841: E/dalvikvm-heap(32303): 786432-byte external allocation too large for this process.
11-15 18:41:29.887: I/dalvikvm-heap(32303): Clamp target GC heap from 32.095MB to 32.000MB
11-15 18:41:29.887: E/GraphicsJNI(32303): VM won't let us allocate 786432 bytes
11-15 18:41:29.887: D/dalvikvm(32303): GC_FOR_MALLOC freed 0K, 51% free 4380K/8903K, external 23826K/25864K, paused 31ms
11-15 18:41:29.887: D/skia(32303): --- decoder->decode returned false
11-15 18:41:29.887: W/dalvikvm(32303): threadid=18: thread exiting with uncaught exception (group=0x40018560)
11-15 18:41:29.887: E/AndroidRuntime(32303): FATAL EXCEPTION: Thread-29
11-15 18:41:29.887: E/AndroidRuntime(32303): java.lang.OutOfMemoryError: bitmap size exceeds VM budget
11-15 18:41:29.887: E/AndroidRuntime(32303):    at android.graphics.BitmapFactory.nativeDecodeStream(Native Method)
11-15 18:41:29.887: E/AndroidRuntime(32303):    at android.graphics.BitmapFactory.decodeStream(BitmapFactory.java:470)
11-15 18:41:29.887: E/AndroidRuntime(32303):    at com.beerbro.utils.ImageLoader.decodeFile(ImageLoader.java:156)
11-15 18:41:29.887: E/AndroidRuntime(32303):    at com.beerbro.utils.ImageLoader.getBitmap(ImageLoader.java:99)
11-15 18:41:29.887: E/AndroidRuntime(32303):    at com.beerbro.utils.ImageLoader$PhotosLoader.run(ImageLoader.java:214) 
```

但是当我慢慢滚动这个列表视图时，我没有收到任何错误。

这是我的适配器类，我在其中调用 Imageloader 类的 displayImage 方法将我的 url 转换为位图并将其设置为 imageview。

```
 public class MySimpleArrayAdapter extends ArrayAdapter<String> {
    private Activity context;
    ArrayList<String> namear,msgar,idar,profimage,postimage,commentsnum,objectid,urlString;

  ImageLoader imageLoader;
  Bitmap[] bitdata;

  public MySimpleArrayAdapter(Activity c,int i,ArrayList<String> postpic, ArrayList<String> names,ArrayList<String> msg,ArrayList<String> id,ArrayList<String> proimg,Bitmap[] bit,ArrayList<String> comment,ArrayList<String> objid,ArrayList<String> web) {

      super(c, i, names);
    Log.e("adapter","adap");
    this.context = c;
    this.namear = names;
    this.msgar = msg;
    this.idar = id;
    this.profimage=proimg;
    this.postimage=postpic;
    this.bitdata=bit;
    this.commentsnum=comment;
    this.objectid=objid;
    this.urlString=web;
   this.imageLoader = new ImageLoader(context);
  }

  @Override
  public View getView(final int position, View convertView, ViewGroup parent) {
      View rowView=convertView ;
      LayoutInflater inflator =   getLayoutInflater();
      rowView = inflator.inflate(R.layout.walldata, null);

      TextView name1 = (TextView) rowView.findViewById(R.id.name);
      TextView message1 = (TextView) rowView.findViewById(R.id.msg);
      ImageView profimg= (ImageView) rowView.findViewById(R.id.profile_pic);
      ImageView postimg= (ImageView) rowView.findViewById(R.id.picpost);
  TextView comments = (TextView) rowView.findViewById(R.id.comment);

     Log.e("user",idar.get(position));

    Log.e("adapter","adap");
   name1.setText(namear.get(position));
    if(msgar.get(position)!=""){
    message1.setText(msgar.get(position));

    }
    else
    {
        message1.setVisibility(View.GONE);
    }
    if(!postimage.get(position).equals(""))
    {try{
         imageLoader.DisplayImage(postimage.get(position).replace(" ", "%20"), postimg) ;

    }
    catch(Exception e){
        e.printStackTrace();
    }
    }
    else
    {
        postimg.setVisibility(View.GONE);
    }
    try{
      imageLoader.DisplayImage(profimage.get(position).replace(" ", "%20"), profimg) ;

    }
    catch(Exception e){
       e.printStackTrace();
    }

       comments.setText(commentsnum.get(position)+"\t"+"Comments");
       comments.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {
            Intent myintent=new Intent(Wall.this,Comments.class);
            myintent.putExtra("name", namear.get(position));
            myintent.putExtra("profimg", profimage.get(position));
            myintent.putExtra("message", msgar.get(position));
            myintent.putExtra("postpic", postimage.get(position));
            myintent.putExtra("objectid", objectid.get(position));
            myintent.putExtra("commentsnum",commentsnum.get(position));
            myintent.putExtra("webservice", urlString.get(position));
            startActivity(myintent);

        }
    });

    return rowView;
  } 
```

这是我的 Imageloader 类

```
 public class ImageLoader {

    MemoryCache memoryCache=new MemoryCache();
    FileCache fileCache;
    private Map<ImageView, String> imageViews=Collections.synchronizedMap(new WeakHashMap<ImageView, String>());

    public ImageLoader(Context context){

        photoLoaderThread.setPriority(Thread.NORM_PRIORITY-1);

        fileCache=new FileCache(context);
    }

    public void DisplayImage(String url,ImageView imageView)
    {
        imageViews.put(imageView, url);

        Bitmap bitmap=memoryCache.get(url);

        if(bitmap!=null)
        {
            imageView.setBackgroundDrawable(new BitmapDrawable(bitmap));

            System.gc();
        }
        else
        {
            queuePhoto(url, imageView);

        }    
    }

    private Bitmap createScaledBitmap(Bitmap bitmap, int i, int j, int k) {
        return null;
    }

    private void queuePhoto(String url, ImageView imageView)
    {
        //This ImageView may be used for other images before. So there may be some old tasks in the queue. We need to discard them. 
        photosQueue.Clean(imageView);
        PhotoToLoad p=new PhotoToLoad(url, imageView);
        synchronized(photosQueue.photosToLoad){
            photosQueue.photosToLoad.push(p);
            photosQueue.photosToLoad.notifyAll();
        }

        //start thread if it's not started yet
        if(photoLoaderThread.getState()==Thread.State.NEW)
            photoLoaderThread.start();
    }

   public Bitmap getBitmap(String url) 
    {
        File f=fileCache.getFile(url);

        //from SD cache
        Bitmap b = decodeFile(f);
        if(b!=null)
            return b;

        //from web
        try {
            Bitmap bitmap=null;
            URL imageUrl = new URL(url);
            HttpURLConnection conn = (HttpURLConnection)imageUrl.openConnection();
            conn.setConnectTimeout(30000);
            conn.setReadTimeout(30000);
            InputStream is=conn.getInputStream();
            OutputStream os = new FileOutputStream(f);
            Utils.CopyStream(is, os);
            os.close();
            bitmap = decodeFile(f);
            return bitmap;
        } catch (Exception ex){
           ex.printStackTrace();
           return null;
        }
    }//Lalit

    //decodes image and scales it to reduce memory consumption
    private Bitmap decodeFile(File f){
        try {
            //decode image size
            BitmapFactory.Options o = new BitmapFactory.Options();
            o.inJustDecodeBounds = true;
            BitmapFactory.decodeStream(new FileInputStream(f),null,o);

            //Find the correct scale value. It should be the power of 2.

            final int REQUIRED_SIZE=Wall.width;
            final int REQUIRED_SIZE1=Wall.height;

            int width_tmp=o.outWidth, height_tmp=o.outHeight;
            int scale=1;

            while(true){
                if((width_tmp/2<REQUIRED_SIZE)&&(height_tmp/2<REQUIRED_SIZE1))
                    break;
                width_tmp/=2;
                height_tmp/=2;
                scale*=2;
            }

            //decode with inSampleSize
            BitmapFactory.Options o2 = new BitmapFactory.Options();
            o2.inJustDecodeBounds = true;
            BitmapFactory.decodeStream(new FileInputStream(f), null, o2);
            o2.inSampleSize=scale;
            o2.inJustDecodeBounds = false;

            return BitmapFactory.decodeStream(new FileInputStream(f), null, o2);

        } catch (FileNotFoundException e) {}
        return null;
    }

    //Task for the queue
    private class PhotoToLoad
    {
        public String url;
        public ImageView imageView;
        public PhotoToLoad(String u, ImageView i){
            url=u; 
            imageView=i;
        }
    }

    PhotosQueue photosQueue=new PhotosQueue();

    public void stopThread()
    {
        photoLoaderThread.interrupt();
    }

    //stores list of photos to download
    class PhotosQueue
    {
        private Stack<PhotoToLoad> photosToLoad=new Stack<PhotoToLoad>();

        //removes all instances of this ImageView
        public void Clean(ImageView image)
        {
            for(int j=0 ;j<photosToLoad.size();){
                if(photosToLoad.get(j).imageView==image)
                    photosToLoad.remove(j);
                else
                    ++j;
            }
        }
    }

    class PhotosLoader extends Thread {
        public void run() {
            try {
                while(true)
                {
                    //thread waits until there are any images to load in the queue
                    if(photosQueue.photosToLoad.size()==0)
                        synchronized(photosQueue.photosToLoad){
                            photosQueue.photosToLoad.wait();
                        }
                    if(photosQueue.photosToLoad.size()!=0)
                    {
                        PhotoToLoad photoToLoad;
                        synchronized(photosQueue.photosToLoad){
                            photoToLoad=photosQueue.photosToLoad.pop();
                        }
                        Bitmap bmp=getBitmap(photoToLoad.url);
                        memoryCache.put(photoToLoad.url, bmp);
                        String tag=imageViews.get(photoToLoad.imageView);
                        if(tag!=null && tag.equals(photoToLoad.url)){
                            BitmapDisplayer bd=new BitmapDisplayer(bmp, photoToLoad.imageView);
                            Activity a=(Activity)photoToLoad.imageView.getContext();
                            a.runOnUiThread(bd);
                        }
                    }
                    if(Thread.interrupted())
                        break;
                }
            } catch (InterruptedException e) {
                //allow thread to exit
            }
        }
    }

    PhotosLoader photoLoaderThread=new PhotosLoader();

    //Used to display bitmap in the UI thread
    class BitmapDisplayer implements Runnable
    {
        Bitmap bitmap;
        ImageView imageView;
        public BitmapDisplayer(Bitmap b, ImageView i){bitmap=b;imageView=i;}
        public void run()
        {
            if(bitmap!=null)
                imageView.setBackgroundDrawable(new BitmapDrawable(bitmap));

        }
    }

    public void clearCache() {
        memoryCache.clear();
        fileCache.clear();
    }
    public static Bitmap getRoundedCornerBitmap(Bitmap bitmap, int pixels,int width,int height) {

        Bitmap output = Bitmap.createBitmap(width,height, Config.ARGB_8888);
        Canvas canvas = new Canvas(output);

        final int color = 0xff424242;
        final Paint paint = new Paint();
        final Rect rect = new Rect(0, 0, bitmap.getWidth(), bitmap.getHeight());
        final RectF rectF = new RectF(rect);
        final float roundPx = pixels;

        paint.setAntiAlias(true);
        canvas.drawARGB(0, 0, 0, 0);
        paint.setColor(color);
        canvas.drawRoundRect(rectF, roundPx, roundPx, paint);

        paint.setXfermode(new PorterDuffXfermode(Mode.SRC_IN));
        canvas.drawBitmap(bitmap, rect, rect, paint);

        return output;
    } 
```

我将图像缩放到我的设备屏幕尺寸，即 480*854，你可以在 imageloader 类中找到它，我也在这里提到以便于理解

```
 final int REQUIRED_SIZE=Wall.width;
            final int REQUIRED_SIZE1=Wall.height;

            int width_tmp=o.outWidth, height_tmp=o.outHeight;
            int scale=1;

            while(true){
                if((width_tmp/2<REQUIRED_SIZE)&&(height_tmp/2<REQUIRED_SIZE1))
                    break;
                width_tmp/=2;
                height_tmp/=2;
                scale*=2;
            }
    } 
```

通过查看错误我可以理解内存不足以加载位图，我不知道如何在运行时释放内存。请帮助我我提到了stackoverflow和其他人中的许多链接，但无法解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T16:32:28.503

好吧，我能想到的解决问题的一种方法是使用`onScrollListener`, 并向适配器添加一个可由侦听器设置的标志。

当列表滚动时（标志 = true），让适配器跳过加载图像。当列表停止滚动（标志 = false）时，让适配器加载图像。您可以通过调用`notifyDataSetChanged()`适配器来触发图像加载。

如果我们调用适配器中的标志`isScrolling`，您的监听器可能如下所示：

```
listView.setOnScrollListener(new OnScrollListener() {   
    public void onScroll(AbsListView view, int firstVisible,   
    int visibleCount, int total) {   
        public void onScrollStateChanged(AbsListView view, int scrollState) {   
            if (scrollState != 0)   
                listView.getAdapter()).isScrolling = true;   
            else {   
                listView.getAdapter().isScrolling = false;  
                listView.getAdapter().notifyDataSetChanged();  
            }  
        }  
    }); 
```

在您的适配器中，只需使用以下内容围绕您的图像加载代码：

```
if (!isScrolling) {
    // code to load images
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T13:56:13.423

您的问题可能有两个原因。首先，您没有重用已创建的列表视图项目的距离。我看到你的代码，为什么你记下这些代码。当您滚动列表视图太快时，虚拟机将无法足够快地创建即时，因此内存不足。而且，您最好使用缓冲区。第二，你的bitmap太大，当你滚动的太快时，vm承受不住压力。解决这些，你可以减小bitmap的大小。希望我的回答可以为你做点什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T13:29:16.037

我不太确定，但在初始化图像组件后添加这些行

```
 BitmapDrawable bd = (BitmapDrawable) imgView.getDrawable();
            if (bd != null)
            {
                bd.getBitmap().recycle();
                imgView.setImageBitmap(null);
            } 
```

# javascript - 简单的 ascii 替换 - Javascript

> ID：13398369
> 
> 赞同：3
> 
> 时间：2012-11-15T13:24:05.217
> 
> 标签：javascript, regex

我正在寻找一个 javascript 函数，它接受一个字符串参数并检查低于 32 的 ascii 字符，将它们替换为空字符串->“”。我是 javascript 新手，所以我想知道是否有人能指出我正确的方向？

在此先感谢您的时间。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-15T13:34:35.303

试试这个：

```
var replaced = string.replaceAll("[^ -~]", ""); 
```

使用`^`否定字符类，并且由于空格是 ASCII 表中的字符 32 并且 ~ 是最后一个可打印字符，因此您基本上是在说“所有不是可打印字符”。

要简单地删除 0-31 中的所有字符，请使用：

```
var replace = string.replaceAll("\x00-\x1F", ""); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T13:29:10.327

如果我正确理解您的问题，您正在寻找与 .replace 一起使用的正则表达式...

要替换任何可打印的 ascii 字符，您可以使用此正则表达式：

```
/[ -~]/ 
```

您可能需要调整范围。我建议更改 tilder，因为它是最后一个可打印的字符。

**对不起，我明白你的意思了！我认为你不能匹配不可打印的字符，除非使用它们的特殊符号：即 \b \s \n 等。**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-15T13:34:48.093

```
function keepCharsAbove(inStr, charCode) {
  var goodChars = [];
  for(var x = 0; x < inStr.length; x++) {
      if(inStr.charCodeAt(x) > charCode) {
          goodChars.push(inStr.charAt(x));
      }
  }

  return goodChars.join("");
} 
```

​ 用途：

```
keepCharsAbove("foo \t bar",32); // returns 'foobar' 
```

# css - WP 中最后一个菜单项的 CSS

> ID：13398370
> 
> 赞同：3
> 
> 时间：2012-11-15T13:24:11.477
> 
> 标签：css, wordpress, menu

一段时间以来，我已经多次阅读该网站。它对很多事情总是很有帮助的。所以谢谢你们！

我遇到了一个我无法解决的问题。我一直在深入研究 stackoverflow 中的其他帖子（真的），但即使我得到的信息很清楚而且解决方案看起来很简单，我无法让它工作，抱歉。

基本上我有一个使用主菜单导航栏创建的 Wordpress 网站。元素通过使用`<?php wp_list_pages('title_li='); ?>`然后使用 CSS 来显示，我为所有元素设置了样式，以便在元素之间显示垂直分隔线。

问题是我不能让最后一个项目与其他项目不同（我不希望它显示垂直分隔线，因为它是最后一个）我按照您的建议尝试了很多选项，但没有奏效所以我确实从所有失败的尝试中删除了代码。

任何帮助将非常感激。

这是我的代码：

```
<div id="cssmenu">
            <ul class="nav" id="primary-nav">
                <?php if (is_page()) { $highlight = "page_item"; } else {$highlight = "page_item current_page_item"; } ?>
                <li class="<?php echo $highlight; ?>"><a href="<?php bloginfo('url'); ?>">WELCOME</a></li>
                <?php wp_list_pages('title_li='); ?>
            </ul>
            </div> 
```

CSS可以在这里找到：

```
 #cssmenu {
    height:37px;
    display:block;
    padding:0;
    margin:0 auto; 
    border: 1px solid #444758;
    border-bottom: 1px solid #bbbdc5;
    -webkit-border-radius: 4px;
    -moz-border-radius: 4px;
    border-radius: 4px;
    -webkit-box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.4), inset 0 20px 20px rgba(255, 255, 255, 0.12), 0 1px 1px #9c9c9c, inset 0 -1px 0 #343746;
    -moz-box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.4), inset 0 20px 20px rgba(255, 255, 255, 0.12), 0 1px 1px #9c9c9c, inset 0 -1px 0 #343746;
    box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.5), inset 0 20px 20px rgba(255, 255, 255, 0.14), inset 0 -1px 0 #343746;
}

#cssmenu > ul {list-style:inside none; padding:0; margin:0;} 
#cssmenu > ul > li {list-style:inside none; padding:0; margin:0; float:left; display:block; position:relative;} 
#cssmenu > ul > li > a{ outline:none; display:block; position:relative; padding:9px 37px; font-size: 15px; letter-spacing: 0; text-align:center; text-decoration:none; text-shadow:0 -1px 0 #000 !important; text-transform: uppercase; }
#cssmenu > ul > li.last-item > a{ padding-right:34px; }
#cssmenu > ul > li:first-child > a{border-radius:4px 0 0 4px;} 
#cssmenu > ul > li > a:after{ content:''; position:absolute; border-right:1px solid; top:0; bottom:0; right:-2px; z-index:99; }
#cssmenu > ul > li.last-item > a:after{ border:none; } 
#cssmenu ul li.has-sub:hover > a:after{top:0; bottom:0;} 
#cssmenu > ul > li.has-sub > a:before{ content:''; position:absolute; top:18px; right:6px; border:4px solid transparent; border-top:4px solid #fff; } 
#cssmenu > ul > li.has-sub:hover > a:before{top:19px;} 
#cssmenu ul li.has-sub:hover > a{ background:#3f3f3f; border-color:#3f3f3f; padding-bottom:13px; padding-top:13px; top:-1px; z-index:999; } 
#cssmenu ul li.has-sub:hover > ul, #cssmenu ul li.has-sub:hover > div{display:block;} 
#cssmenu ul li.has-sub > a:hover{background:#3f3f3f; border-color:#3f3f3f;} 
#cssmenu ul li > ul, #cssmenu ul li > div{ display:none; width:auto; position:absolute; top:38px; padding:10px 0; background:#3f3f3f; border-radius:0 0 4px 4px; z-index:999; } 
#cssmenu ul li > ul{width:200px;} 
#cssmenu ul li > ul li{display:block; list-style:inside none; padding:0; margin:0; position:relative;} 
#cssmenu ul li > ul li a{ outline:none; display:block; position:relative; margin:0; padding:8px 20px; font:10pt Arial, Helvetica, sans-serif; color:#fff; text-decoration:none; text-shadow:1px 1px 0 rgba(0,0,0, 0.5); } 

#cssmenu, #cssmenu > ul > li > ul > li a:hover {
    background: #3e4151;
    background-repeat: repeat-x;
    background-image: -khtml-gradient(linear, left top, left bottom, from(#838796), to(#3e4151));
    background-image: -moz-linear-gradient(top, #838796, #3e4151);
    background-image: -ms-linear-gradient(top, #838796, #3e4151);
    background-image: -webkit-gradient(linear, left top, left bottom, color-stop(0%, #838796), color-stop(100%, #3e4151));
    background-image: -webkit-linear-gradient(top, #838796, #3e4151);
    background-image: -o-linear-gradient(top, #838796, #3e4151);
    background-image: linear-gradient(top, #838796, #3e4151);
    filter:progid:DXImageTransform.Microsoft.gradient( startColorstr='#838796', endColorstr='#3e4151',GradientType=0 );
}

#cssmenu{border-color:#353749;} 
#cssmenu > ul > li > a{border-right:1px solid #4e5262; color:#fff !important;}
#cssmenu > ul > li > a.last-item{border:none;}
#cssmenu > ul > li > a:after{border-color:#a6a9b4;} 
#cssmenu > ul > li > a:hover {
    background: #2666c3;
    background-repeat: repeat-x;
    background-image: -khtml-gradient(linear, left top, left bottom, from(#1c356b), to(#2666c3));
    background-image: -moz-linear-gradient(top, #1c356b, #2666c3);
    background-image: -ms-linear-gradient(top, #1c356b, #2666c3);
    background-image: -webkit-gradient(linear, left top, left bottom, color-stop(0%, #1c356b), color-stop(100%, #2666c3));
    background-image: -webkit-linear-gradient(top, #1c356b, #2666c3);
    background-image: -o-linear-gradient(top, #1c356b, #2666c3);
    background-image: linear-gradient(top, #1c356b, #2666c3);
    filter:progid:DXImageTransform.Microsoft.gradient( startColorstr='#1c356b', endColorstr='#2666c3',GradientType=0 );
    -webkit-box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.4), inset 0 20px 20px rgba(255, 255, 255, 0.12), 0 1px 1px #9c9c9c, inset 0 -1px 0 #343746;
    -moz-box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.4), inset 0 20px 20px rgba(255, 255, 255, 0.12), 0 1px 1px #9c9c9c, inset 0 -1px 0 #343746;
    box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.5), inset 0 20px 20px rgba(255, 255, 255, 0.14), inset 0 -1px 0 #343746;
}

#cssmenu ul li .current_page_item a,#cssmenu ul li .current_page_item a:hover{
    background: #2666c3;
    background-repeat: repeat-x;
    background-image: -khtml-gradient(linear, left top, left bottom, from(#2666c3), to(#1c356b));
    background-image: -moz-linear-gradient(top, #2666c3, #1c356b);
    background-image: -ms-linear-gradient(top, #2666c3, #1c356b);
    background-image: -webkit-gradient(linear, left top, left bottom, color-stop(0%, #2666c3), color-stop(100%, #1c356b));
    background-image: -webkit-linear-gradient(top, #2666c3, #1c356b);
    background-image: -o-linear-gradient(top, #2666c3, #1c356b);
    background-image: linear-gradient(top, #2666c3, #1c356b);
    filter:progid:DXImageTransform.Microsoft.gradient( startColorstr='#2666c3', endColorstr='#1c356b',GradientType=0 );
    -webkit-box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.4), inset 0 20px 20px rgba(255, 255, 255, 0.12), 0 1px 1px #9c9c9c, inset 0 -1px 0 #343746;
    -moz-box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.4), inset 0 20px 20px rgba(255, 255, 255, 0.12), 0 1px 1px #9c9c9c, inset 0 -1px 0 #343746;
    box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.5), inset 0 20px 20px rgba(255, 255, 255, 0.14), inset 0 -1px 0 #343746;
}

#cssmenu ul li.current_page_item a{
    background: #2666c3;
    background-repeat: repeat-x;
    background-image: -khtml-gradient(linear, left top, left bottom, from(#2666c3), to(#1c356b));
    background-image: -moz-linear-gradient(top, #2666c3, #1c356b);
    background-image: -ms-linear-gradient(top, #2666c3, #1c356b);
    background-image: -webkit-gradient(linear, left top, left bottom, color-stop(0%, #2666c3), color-stop(100%, #1c356b));
    background-image: -webkit-linear-gradient(top, #2666c3, #1c356b);
    background-image: -o-linear-gradient(top, #2666c3, #1c356b);
    background-image: linear-gradient(top, #2666c3, #1c356b);
    filter:progid:DXImageTransform.Microsoft.gradient( startColorstr='#2666c3', endColorstr='#1c356b',GradientType=0 );
    -webkit-box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.4), inset 0 20px 20px rgba(255, 255, 255, 0.12), 0 1px 1px #9c9c9c, inset 0 -1px 0 #343746;
    -moz-box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.4), inset 0 20px 20px rgba(255, 255, 255, 0.12), 0 1px 1px #9c9c9c, inset 0 -1px 0 #343746;
    box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.5), inset 0 20px 20px rgba(255, 255, 255, 0.14), inset 0 -1px 0 #343746;
} 
```

**谢谢**你们，我真的很感谢你们的帮助:)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-15T13:27:50.880

您是否尝试过获得最后一项？

```
#cssmenu ul li:last-child {} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-05T10:34:47.093

你应该使用“+”选择器，它来自 CSS 2.0 并且非常强大，即使对于 IE 7 也是如此。

# cssmenu ul li{border:none}

# cssmenu ul li+li{border-left:1px solid #colorcode;}

这将使每个“li”在左侧都有垂直线（而不是在右侧使用线），除了第一个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T13:31:53.763

你可以使用

```
#cssmenu ul li:last-child { border: none; } 
```

或者

```
#css menu ul li:last-of-type { border: none; } 
```

如果你有“子项目”或“子菜单”（`<ul><ul><li>`），“最后一个类型”很好，因为它无论如何都会工作，但它与浏览器的兼容性较差......你也可以用多个“最后一个孩子”指出规则……

检查您的 CSS 特异性。有时你可能需要使用更高的特异性来获得你想要的东西。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-15T13:29:38.620

我想您将不得不添加此规则

```
#cssmenu > ul > li > a:last-of-type:after {border: none} 
```

# java - Spring mvc 类别树

> ID：13398373
> 
> 赞同：0
> 
> 时间：2012-11-15T13:24:18.337
> 
> 标签：java, spring, jsp, spring-mvc

我有类别树。我的类别有 n 个子类别。如何在 jsp 上列出递归类别？

```
List<Category> categories = categoryService.findAll();
modelMap.put("categories",categories) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T13:28:38.377

使用 JSTL，尝试这样的事情：

**简单的物品清单**

```
<c:forEach var="category" items="${categories}">
   ${category.id} -> ${category.name}
</c:forEach> 
```

**嵌套项目列表**

如果您有嵌套类别，请尝试以下自定义标签。

```
public class CategoryDisplayTag extends TagSupport
{
   public int doStartTag() throws JspException
   {
      Category rootCategory = new Category();

      printEachCategory(rootCategory);

      return SKIP_BODY;
   }

   private void printEachCategory(Category category)
   {
      JspWriter out = pageContext.getOut();

      try
      {
         out.write("Category: " + category.getName());

         for (Category c : category.getCategories())
         {
            out.write("Sub-category: " + c.getName());
            printEachCategory(c);
         }
      }
      catch (IOException e1)
      {
         throw new RuntimeException(e1);
      }

   }  
} 
```

# objective-c - Objective C在多列上排序二维数组？

> ID：13398375
> 
> 赞同：0
> 
> 时间：2012-11-15T13:24:21.210
> 
> 标签：objective-c, arrays

我有一个这样的数据数组。

```
{
"first_name"="John",
"last_name"="Lock"
};
{
"first_name"="John",
"last_name"="Lee"
};
{
"first_name"="Melinda",
"last_name"="Abman"
}; 
```

我能够像这样按名字排序：

```
NSArray *sortedArray = [tablearray sortedArrayUsingDescriptors:[NSArray arrayWithObject:[NSSortDescriptor sortDescriptorWithKey:@"first_name" ascending:YES]]]; 
```

但是有没有一种简单的方法来按名字然后姓氏排序？基本上相当于`SELECT * FROM users ORDER BY first_name ASC, last_name ASC`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T13:34:40.910

[sortedArrayUsingDescriptors:](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSArray_Class/NSArray.html#//apple_ref/doc/uid/20000137-BBCJGCJI)接受一个 's 数组，`NSSortDescriptor`因此您可以简单地继续添加 sortDescripters。

```
NSArray *sortDescriptors = @[
  [NSSortDescriptor sortDescriptorWithKey:@"first_name" ascending:YES],
  [NSSortDescriptor sortDescriptorWithKey:@"last_name" ascending:YES]
];

NSLog(@"%@", [array sortedArrayUsingDescriptors:sortDescriptors]); 
```

# jquery - 先停 可拖动

> ID：13398376
> 
> 赞同：4
> 
> 时间：2012-11-15T13:24:24.857
> 
> 标签：jquery, jquery-ui, draggable, jquery-ui-draggable

这是我的演示：http: [//jsfiddle.net/michelejs/PeS2D/560/](http://jsfiddle.net/michelejs/PeS2D/560/)

我怎样才能阻止第一个`<li>`被拖动？

```
$(document).ready(function(e) {
$('li').removeClass('ui-corner-bottom');
$('ul')
    .addClass('ui-corner-top')
    .removeClass('ui-corner-all')
    .sortable({
        'containment': 'parent',
        'opacity': 0.6,
        update: function(event, ui) {
            alert("dropped");
        }
    });
});​ 
```

非常感谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-15T13:36:14.490

`items`您可以在`.sortable()`小部件方法中使用该选项。结合 jQuery 选择器`gt()`，您可以轻松获得所需的内容。

这对我有用（[jsFiddle 示例](http://jsfiddle.net/PeS2D/563/)）：

```
$(document).ready(function(e) {
    $('li').removeClass('ui-corner-bottom');
    $('ul')
        .addClass('ui-corner-top')
        .removeClass('ui-corner-all')
        .sortable({
            'items': '>li:gt(1)',
            'containment': 'parent',
            'opacity': 0.6,
            update: function(event, ui) {
                alert("dropped");
            }
        });
});​ 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-15T13:33:42.603

您可以使用该`items`属性：

```
$(document).ready(function(e) {
    $('li').removeClass('ui-corner-bottom');
    $('ul')
        .addClass('ui-corner-top')
        .removeClass('ui-corner-all')
        .sortable({
            items: 'li:not(:first)',
            'containment': 'parent',
            'opacity': 0.6,
            update: function(event, ui) {
                console.log(ui)

            }
        });
}); 
```

[http://jsfiddle.net/ppRJL/](http://jsfiddle.net/ppRJL/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-15T13:29:20.957

尝试这个。 [http://jsfiddle.net/PeS2D/561/](http://jsfiddle.net/PeS2D/561/)

我在第一个 li 中添加了一个名为 header 的额外类，然后[有一个名为`cancel`](http://api.jqueryui.com/sortable/#option-cancel)

节省人们的点击：

[取消] 如果您从匹配选择器的元素开始，则阻止排序。代码示例：使用指定的取消选项初始化可排序：

```
$( ".selector" ).sortable({ cancel: "a,button" }); 
```

初始化后获取或设置取消选项：

```
// getter
var cancel = $( ".selector" ).sortable( "option", "cancel" );

// setter
$( ".selector" ).sortable( "option", "cancel", "a,button" ); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-15T13:29:27.687

只需阅读文档：[http ://api.jqueryui.com/sortable/#option-items](http://api.jqueryui.com/sortable/#option-items)

该`items`选项允许您为可排序元素指定选择器。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-15T13:33:24.743

小提琴：http: [//jsfiddle.net/PeS2D/562/](http://jsfiddle.net/PeS2D/562/)

你可以设置成这样

```
$(document).ready(function(e) {
  $('li').removeClass('ui-corner-bottom');
  $('ul')
    .addClass('ui-corner-top')
    .removeClass('ui-corner-all')
    .sortable({
        'containment': 'parent',
        'opacity': 0.6,
        update: function(event, ui) {
            alert("dropped");
        },
    items: 'li[id!=heading]'  
    });
});​ 
```

然后添加一个`id`到你的第一个 li

```
 <li data-role="list-divider" role="heading" id="heading">Re-order</li> 
```

# symfony-1.4 - Symfony 1.4 + propel 和 postgresql - 如何一起使用它们

> ID：13398381
> 
> 赞同：1
> 
> 时间：2012-11-15T13:24:46.737
> 
> 标签：symfony-1.4, propel

我正在为一个项目使用 Sf 1.4。由于技术原因，我想从 mySQL 切换到 PostgreSQL（我已经编写了一些数据库扩展，我需要在我的查询中访问它们）。

我已经在网上搜索过，但似乎找不到任何有关如何解决此问题的信息。到目前为止，我已经通过修改 database.yml dsn 条目来修改我的 database.yml 文件，如下所示：

**从：**

```
dsn:        mysql:dbname=##PROJECT_NAME##;host=localhost 
```

**至：**

```
dsn:        postgres:dbname=##PROJECT_NAME##;host=localhost 
```

我还注释掉了 propel.ini 中的 mysql 特定条目

但是，当我运行 ./symfony propel:build-sql 并检查生成的 SQL 时，我注意到生成的 SQL 是 MySQL 方言而不是 PostgreSQL。

我如何告诉 Symfony 为 PostgreSQL 生成 SQL？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-20T15:15:14.237

由于OP不会发布他自己的答案并接受它......

PostgreSQL 的 DSN 必须以 开头`pgsql:`，而不是`postgres:`。

# android - 安卓 ADT 21.0.0。图形布局中的内存泄漏

> ID：13398385
> 
> 赞同：9
> 
> 时间：2012-11-15T13:24:54.547
> 
> 标签：android, android-layout, memory-leaks, adt

我在 eclipse 4.2.1 上运行 ADT 21.0.0.v201210310015-519525，每次我开始处理图形布局时，eclipse 慢慢开始变得无响应。像这样打开〜5个文件后，它实际上无法使用，需要重新启动。

其他人有这些问题吗？

我已经在 Eclipse 中将我的 .ini 设置为增加内存和 java 1.6，就像某些解决方案中提到的那样，但问题仍然存在。

```
-Dosgi.requiredJavaVersion = 1.6
-Xms128m
-Xmx1024m 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T10:50:38.443

实际上，当您尝试在 Eclipse 中加载非常重的布局时，就会出现此问题。我所说的繁重布局是指，如果您尝试在布局中加载繁重的图形，或者您尝试在布局中使用自定义控件。

当您尝试在 Eclipse 中打开布局（可视化）时，它实际上会尝试编译和运行自定义控件类并尝试呈现视图。

由于 Eclipse 的堆大小非常小，因此会出现这种崩溃问题。我建议您将这种类型的布局检查到模拟器或设备中，而不是在 Eclipse 上进行测试，即避免加载这种类型的布局并尝试在 XML 中工作并在模拟器中运行它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T16:22:42.867

我遇到了这个问题，我不得不将 eclipse 和 ADT 都升级到 nightly build，因为它解决了这个问题

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T15:27:28.463

我遇到了这个问题并更新了所有内容，现在问题似乎已解决。我在 Eclipse 版本：Indigo Service Release 2 中运行版本：21.1.0.v201302060044-569685。希望这会有所帮助。

# javascript - Aptana Studio 3 中的 javascript 代码助手

> ID：13398388
> 
> 赞同：1
> 
> 时间：2012-11-15T13:25:07.867
> 
> 标签：javascript, aptana, content-assist

版本 - Aptana Studio 3，内部版本：3.2.2.201208201020

项目是由文件 -> 新建 -> PHP 项目创建的。

这是 index.html 的内容：

```
<html>
  <head>
    <script>
      function addOption() {
        var option = document.createElement("div");
        document.getElementById("answersList").appendChild(option);
      }
    </script>
  </head>
  <body>
    <button onclick="addOption();">Add option</button>
  </body>
</html> 
```

文档的完成列表中没有 createElement 和 getElementById 方法。

如何获得代码完成？

* * *

**更新：**

似乎代码完成对于纯 JavaScript 文件 (*.js) 效果很好。

# objective-c - restoreCompletedTransactions 从不调用 StoreKit 中的 updatedTransactions

> ID：13398392
> 
> 赞同：7
> 
> 时间：2012-11-15T13:25:23.950
> 
> 标签：objective-c, ios, in-app-purchase, sandbox, storekit

这几天我一直在用头撞墙，因为以前一切正常，但是现在我已经搬到`Mountain Lion`, `XCode 4.5`and `iOS5.1`and `iOS6`，这个问题出现了，我认为它可能与配置有关转变。

我打电话`[[SKPaymentQueue defaultQueue] restoreCompletedTransactions]`，片刻之后`paymentQueueRestoreCompletedTransactionsFinished`被调用，但没有任何调用的迹象`updatedTransactions`。就像请求在太空中丢失了一样。

我也有一个可能与购买有关的问题。如果我尝试使用 makePurchase 重新购买商品，据我了解，这也应该导致 SKPaymentTransactionStateRestored，我会收到一条消息，后面跟着错误代码 2`"Already purchased.. download"`的可怕消息。什么是错误代码 2？`"Cannot connect to iTunes store..."``"PaymentTransactionStateFailed"`

该项目是普通的非消耗性应用内购买，并且在测试`StoreKit`沙盒模式时会发生这种情况。

我在这个论坛上看到其他人有类似的问题，唯一的答复是这是 StoreKit 中的一个间歇性错误。这仍然是最合理的情况吗？

任何有关这方面的消息将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-24T12:22:13.520

`paymentQueue:updatedTransactions:`仅在事务状态发生变化时调用。

如果没有先前的事务`[[SKPaymentQueue defaultQueue] restoreCompletedTransactions]`将不会改变这些事务的状态（因为没有）所以`paymentQueueRestoreCompletedTransactionsFinished`被调用而不调用`paymentQueue:updatedTransactions:`

> 我也有一个可能与购买有关的问题。如果我尝试使用 makePurchase 重新购买商品，据我了解，这也应该导致 SKPaymentTransactionStateRestored，我收到“已购买..下载”消息，然后是可怕的“无法连接到 iTunes 商店...”，并带有“ PaymentTransactionStateFailed”错误代码2。什么是错误代码2？

您需要`[[SKPaymentQueue defaultQueue] finishTransaction:]`在处理成功的事务后调用。

# android - 如何使用光传感器

> ID：13398393
> 
> 赞同：0
> 
> 时间：2012-11-15T13:25:33.293
> 
> 标签：android, android-sensors

我想用光传感器来检测手机更换的环境，然后保护手机不被盗。但我不知道，如果屏幕关闭，传感器是否仍然工作。而且，任何人都可以提出一些建议，我该如何实现这个目标？如果我在服务中注册一个传感器，我会成功吗？

我知道，使用 context.getSystemService(SENSOR_SERVICE)，我可以获取传感器管理器、注册传感器并实现 SensorEventListener。通过sensorevent.value我可以得到lightsensor的值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T13:32:40.080

是的，您实际上可以在这里使用传感器 API。即使屏幕未激活，传感器仍然可以工作。但要小心，以免它持续很长时间。因为这会消耗大量电池电量并缩短电池寿命。

“始终确保禁用您不需要的传感器，尤其是在您的活动暂停时。不这样做可能会在几个小时内耗尽电池。请注意，当屏幕关闭时，系统不会自动禁用传感器。”

“为了优化我们的应用程序的性能，最好在应用程序处于运行状态时获取通知。”

# c# - C# 数学、碰撞检测、xna

> ID：13398394
> 
> 赞同：1
> 
> 时间：2012-11-15T13:25:36.263
> 
> 标签：c#, math, xna, collision-detection

我在游戏中进行碰撞检测。所有的表面都是正交的，所以我只需要确定我的移动物体与障碍物的哪个面相撞。我有一个矩形，它定义了两个对象的交点和表示移动对象速度和移动方向的向量。

我想我需要沿着我的移动对象矢量平移相交矩形，直到相交变成一条线，然后我就会知道哪个面与第一个相撞。

我不知道如何以数学方式或编程方式做到这一点 ![在此处输入图像描述](../Images/0bc1537c3664280311bbe551599b3b23.png)

![在此处输入图像描述](../Images/19e72d9698b56977dfefa4a232f77f96.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T13:29:52.113

计算从（对象内部障碍物的角）到（对象内部障碍物的角）的向量。无论您的运动矢量位于该矢量的哪个“边”，都会给出最先触及的“边”。如果它们的角度相同，则首先接触角。

例如，这里您的运动矢量大约是 260 度，然后计算出的矢量大约是 240 度。从计算到运动的逆时针方向是20度，顺时针方向是340度。因此，逆时针方向（底部）首先碰撞。

您需要能够分辨出哪两个方面有问题，哪个是“顺时针”和“逆时针” - 我希望这是微不足道的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T13:45:22.330

您可以将速度矢量的[纵横](http://en.wikipedia.org/wiki/Aspect_ratio)比与相交矩形的纵横比进行比较。

对于这个特定的例子，如果速度矢量比相交矩形更陡（即定义了一个更高和更窄的矩形），那么碰撞发生在底面上。

如果速度矢量较浅，则碰撞发生在移动矩形的左侧。

如果速度矢量与相交矩形的纵横比相同（即速度位于相交矩形的对角线上），则它们在拐角处发生碰撞。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-15T13:45:44.590

其实我可能已经想通了...

*   在相交矩形上找到不在对象矩形上的点

*   从那里沿向量方向画一条线

*   它相交的任何一侧都是第一次碰撞的一侧

# mapreduce - Quartz 等待一组作业完成

> ID：13398395
> 
> 赞同：2
> 
> 时间：2012-11-15T13:25:37.070
> 
> 标签：mapreduce, quartz.net

我们有一个 quatz 作业，它进行大量计算并且需要一段时间才能完成。为了加快速度，我们希望拆分主要作业以启动多个较小的作业来进行计算并返回结果。在所有小工作完成后，我们需要一个将小计汇总在一起的最终工作。

目前的想法是每个小作业都将写入存储，并且在创建最终作业时，我们使用 MapData 将所有小作业名称传递给它。最终作业将查找这些作业并重新安排（如果找到），否则将计算总数。

有没有更好的方法在石英中实现这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T21:07:24.130

这不一定是回答问题，但恐怕我不认为 Quartz 是这里工作的工具。它是一个调度程序，而不是一种负载平衡机制。您可以考虑将 Quartz 与 NServiceBus 或 MassTransit 结合使用。该作业可以为小型作业触发多条消息，甚至可能使用相同的消息类型和[Distributor](http://docs.particular.net/nservicebus/scalability-and-ha/distributor/ "NServiceBus 分发器文档")并使用[Saga](http://docs.particular.net/nservicebus/sagas/ "NServiceBus Saga 文档")将所有内容重新组合在一起。

# android - Android 蓝牙无法连接到具有固定端口的医疗设备# - 使用 Java 反射？

> ID：13398397
> 
> 赞同：4
> 
> 时间：2012-11-15T13:25:43.190
> 
> 标签：android, reflection, bluetooth

我正在尝试使用蓝牙 SPP 为医疗设备开发 Android 应用程序。我的 Android 应用程序用作蓝牙服务器。问题是医疗设备 (UA-767PBT) 可能不符合 SDP 流程并使用固定端口号进行连接。因此，只有在重新启动 Android 设备后才能连接。

我正在寻找使用 Java 反射创建具有特定 rfcomm 通道/端口# 的蓝牙服务器端套接字的方法。

我发现一些代码使用 Java 反射做类似的事情：

1.  创建具有特定端口#的蓝牙客户端套接字。

    ```
    //Instead of using createRfcommSocketToServiceRecord 
    Method m = mmDevice.getClass().getMethod("createRfcommSocket", new Class[]{int.class});

    // using port#1 / channel #1
    clientSocket = (BluetoothSocket)m.invoke(mmDevice, Integer.valueOf(1)); 
    ```

2.  检查蓝牙服务器端套接字中使用的端口号。

    ```
    BluetoothServerSocket serverSocket;
    BluetoothSocket socket;
    int port;

    serverSocket = mBluetoothAdapter.listenUsingRfcommWithServiceRecord(SERVICE_NAME, DEVICE_UUID);

    Field mSocketField = BluetoothServerSocket.class.getDeclaredField("mSocket");
    mSocketField.setAccessible(true);
    socket = (BluetoothSocket) mSocketField.get(serverSocket);
    mSocketField.setAccessible(false);

    Field mPortField = BluetoothSocket.class.getDeclaredField("mPort");
    mPortField.setAccessible(true);
    port = (Integer) mPortField.get(socket); 
    mPortField.setAccessible(false);

    Log.d("BT Server:", "The random port#: " + port);

    socket = serverSocket.accept(); 
    ```

创建具有特定端口号的蓝牙服务器端套接字。如何？

我还为这个连接问题寻求其他解决方案。

# class - Div 中的类，只工作一次

> ID：13398398
> 
> 赞同：1
> 
> 时间：2012-11-15T13:25:47.170
> 
> 标签：class, html

论坛的新手，因为这是我第一次无法使用搜索来解决我的问题，也许是我的措辞。我希望你们中的一个可以帮助我。

我有一个问题，我为我的导航栏编写了一个类，我也想将其应用于所有链接。我有一个 3 列布局，全部包裹在一个容器中（所以我可以有一个粘性页脚）。我标题中的课程有效，但对于我的生活，我无法弄清楚为什么它不会应用侧边栏导航。页面的每个部分（页眉、col1、col2、col3 和页脚）都有一个 ID，在其中我告诉它应用我的导航类，但无济于事。

对不起，如果你没有得到我，但任何帮助将不胜感激。

问候

更新......它在这里工作，

```
<div id="header">
</br>
<img src="images/banner.gif" href="index.html" width="60%"
alt="RedHotPolka">
<br/>
<div class="nav1">
<a href="index.html">Home</a>
<a href="shop.html">Shop</a>
<a href="about.html">About</a>
<a href="contact.html">Contact</a>
</div>
</div> 
```

但不是这里...

```
<div id="rcol" align="right">
<div class="nav1">
<br/><br/><br/><br/>
<a href="featured.html">What's hot?</a><br/><br/>
<a href="sale.html">Sale</a><br/><br/>
</div>  
</div> 
```

我正在使用的CSS..

```
.nav1
a:link {text-decoration:none; color:#000000; font-size:22px; padding:4px;}
a:visited {text-decoration:none; color:#000000;}
a:active {text-decoration:none; color:#ff0000;}
a:hover {text-decoration:none; color:#ff0000;} 
```

和

```
*{margin:0;padding:0;}

html, body {height: 100%;}

#container
{
    min-height: 80%;
overflow:auto;
margin-bottom: 100px;
}

#footer
{
position:relative;
margin-top: -100px;
height: 100px;
clear: both;
}

#header
{
margin-bottom: 10px
}

#lcol
{
float: left;
width: 20%;
margin-left: 0%;
display: inline;
}

#mcol
{

float: left;
width: 48%;
margin-left: 6%;
}

#rcol
{

float: right;
width: 20%;
margin-left: 6%;
} 
```

谢谢

# asp.net - ISAPI 重写 - ReverseProxy 不处理图像

> ID：13398402
> 
> 赞同：0
> 
> 时间：2012-11-15T13:26:04.947
> 
> 标签：asp.net, .htaccess, url-rewriting, isapi-rewrite

我在 ASP.NET / IIS 7 下使用 ISAPI Rewrite 3。

我的`.htaccess`文件很短：

```
RewriteEngine On
RewriteProxy ^(forum|events|support|_css|css|_js)(.*) http://othersite/$1$2 
```

`http://mysite/events/page1.aspx`像, 或的请求`http://mysite.com/css/site.css`，一切都很好。但是，ISAPI Rewrite 显然没有处理图像请求`http://mysite/images/smurf.gif`，并且我收到 404 错误。

错误页面还引用了一个奇怪的 url。例如，如果我请求`/images/smurf.png`，错误页面将显示`/images/smurf.png.rwhp`。我认为`.rwhp`代表“RewriteHelper”，似乎来自 ISAPI Rewrite 本身。这表明处理程序*正在*处理请求，但正在做一些非常奇怪的事情。

我怎样才能解决这个问题？为什么这只发生在图像上？

# php - 文本到xml的转换

> ID：13398404
> 
> 赞同：-2
> 
> 时间：2012-11-15T13:26:14.710
> 
> 标签：php, xml, codeigniter

我有一个问题，我必须将文本（字符串）转换为 XML。文本文件中的格式未定义。但是一个文件包含类似格式的数据。格式将文件更改为文件。所以 php 代码应该能够识别格式并将文件转换为 xml。

文件以逗号/制表符/空格分隔也不是预定义的。

有codeigniter的支持吗？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T14:41:39.533

您希望代码将我们看不到的输入以及您所说的未定义格式的输入转换为有用的东西吗？你在错误的网站 - 你想要一个变戏法的论坛。

# android - platform/android-8 的编译错误不会与 android-3 一起退出

> ID：13398407
> 
> 赞同：2
> 
> 时间：2012-11-15T13:26:25.773
> 
> 标签：android

我正在尝试使用 Android 工具链中的 gcc 编译文件。由于某种原因，当包含 android-ndk-r8//platforms/android-3/arch-arm/usr/include 时，它​​会被编译。但是，当使用 andriod-8 android-ndk-r8//platforms/android-8/arch-arm/usr/include 时，它​​给了我这个错误：错误：取消引用指向不完整类型的指针问题是关于 struct tm 的引用字段. IE

```
struct tm *t;
t->tm_hour; 
```

有任何想法吗？谢谢

# python - 如果文件已经存在，Python会跳过一个函数

> ID：13398408
> 
> 赞同：1
> 
> 时间：2012-11-15T13:26:29.753
> 
> 标签：python, function

我需要在 python 中创建一个跳过函数，如果文件已经存在，它会跳过我的下载代码。

函数应该如何工作：（如果文件存在，则无需运行此代码，只需跳到下一个代码。如果它不存在，则运行此代码，然后运行下一个代码）

```
 Filecheck = os.path.join(OUTPUT_FOLDER,"test"+version+"exe")
    print Filecheck

    if not os.path.exists(Filecheck):

     base_url = urlJoin(LINK, + version + "_multi.exe")
     print base_url

     filename2 = "%s_%s_.exe" % (software.capitalize(),version)
     original_filename = os.path.join(OUTPUT_FOLDER, filename2)

     if writeFile(original_filename, httpRequestFile(base_url), "wb") and os.path.exists(original_filename):
        print "Download done" 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T13:29:13.053

```
if not os.path.exists(<path-to-file>):
    download_file() 
```

* * *

我猜这就是你的意思，虽然很难说。

```
filename = "%s_%s_.exe" % (software.capitalize(),version)
if not os.path.exists(os.path.join(OUTPUT_FOLDER, filename)):
    base_url = urlJoin(LINK, + version + "_multi.exe")
    writeFile(original_filename, httpRequestFile(base_url), "wb") 
```

仅供参考，如果您使用`requests`不需要`httpRequestFile`，因此您可以将代码简化为：

```
import requests
from urllib2 import urljoin
filename = "%s_%s_.exe" % (software.capitalize(),version)
if not os.path.exists(os.path.join(OUTPUT_FOLDER, filename)):
    with open(filename, "wb") as fp:
        fp.write(requests.get(urljoin(LINK, version + "_multi.exe")).content) 
```

# android - 鼠标右键映射到可用于在 Jelly Bean 中遍历

> ID：13398409
> 
> 赞同：3
> 
> 时间：2012-11-15T13:26:38.907
> 
> 标签：android

我们更改了`framework/base/services/input/inputreader.cpp 中的部分代码，以使鼠标右键单击可以返回。

```
case BTN_RIGHT:
    mBtnRight = rawEvent->value;
    break; 
```

至

```
case BTN_RIGHT:                       
    mBtnBack = rawEvent->value;
    break; 
```

它正在接收所有鼠标事件。当我单击鼠标右键时，它正在接收运动事件以及按键事件。但它无法调度按键事件。

它给出的错误：

* * *

```
D/InputDispatcher( 1229): dispatchKey - eventTime=1352984476958100000, deviceId=2, source=0x2002, policyFlags=0x42000000, action=0x1, flags=0x0, keyCode=0x4, scanCode=0x0, metaState=0x0, repeatCount=0, downTime=1352984476958100000
D/InputDispatcher( 1229): Waiting for application to become ready for input: AppWindowToken{41294900 token=Token{411c0f90 ActivityRecord{41301e68 com.android.calculator2/.Calculator}}} - Window{413ff3c0 com.android.calculator2/com.android.calculator2.Calculator paused=false}.  Reason: Waiting because the focused window has not finished processing the input events that were previously delivered to it.
D/InputDispatcher( 1229): findFocusedWindow finished: injectionResult=-1, timeSpentWaitingForApplication=0.0ms 
```

* * *

它是果冻豆中的错误吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T10:03:49.507

要使鼠标 Right_click 用作后退按钮，请执行以下更改。它对我有用。

```
 in function reset(InputDevice* device) {

            replace mBtnRight = device->isKeyPressed(BTN_RIGHT); line to

                    mBtnBack =  device->isKeyPressed(BTN_RIGHT);

             and 
  in function process(const RawEvent* rawEvent) {

              remove  3 lines   case BTN_RIGHT:
                                mBtnRight = rawEvent->value;
                                break;
                     and Add "case BTN_RIGHT:" before case BTN_BACK:" as shown below

                     case BTN_RIGHT:
                     case BTN_BACK:                       
                     mBtnBack = rawEvent->value;
                     break; 
```

/*这就是它为我工作的全部。*/

# mysql - 从mysql中具有一些Null值的多个表中获取数据

> ID：13398416
> 
> 赞同：0
> 
> 时间：2012-11-15T13:27:20.043
> 
> 标签：mysql

我有 3 张桌子

1.  牛奶供应（id、日期、数量）
2.  库存（id、日期、item_id、数量）
3.  项目（id，item_name）

我想要实现的是：

1.计算每月的牛奶总量，每天添加库存

库存和项目之间存在关系，但牛奶供应表是单独的。任何人告诉我它是怎么回事？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T13:45:43.807

您可以使用日期加入 Milksupply

在 Milksupply.date=Inventory.date 加入 Milksupply

（确保日期也有索引 - 否则会很慢）

然后你可以根据需要进行统计 - SUM 和 GROUP BY 一些日期函数可能： [http ://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html)

# c# - WCF basicHttpBinding 中的线程

> ID：13398424
> 
> 赞同：0
> 
> 时间：2012-11-15T13:28:10.883
> 
> 标签：c#, wcf, windows-services

> **可能重复：**
> [WCF Windows 服务 - 长操作/回调调用模块](https://stackoverflow.com/questions/2400263/wcf-windows-service-long-operations-callback-to-calling-module)

我有一个托管在 Windows 服务上的 WCF 应用程序。我必须使用 basicHttpBinding。在应用程序中，我对数据进行长期分析，然后将其转化为客户。

是否可以调用 WCF 创建一个将进行分析的线程（该线程的 Id 将发送给客户端）？

客户端应该能够使用传输的 ID 与主题进行通信，并且如果它接收到数据准备就绪的信息，则应该能够下载它。反过来，这将释放线程。

我怎样才能实现这个功能？

好的。有用。客户端方法调用会创建一个线程，即使在支付 guid 之后也会在后台运行并保存操作结果。如何最好地存储这些结果？由于该服务正在运行 Per Call 字典，因此每次调用该服务时都会重置。声明静态数据可以被覆盖，但我认为这不是一个好主意。有任何想法吗？

```
namespace WCFRiskService
{
    [ServiceContract]
    public interface IRiskService
    {
        // return Thread ID
        [OperationContract]
        int GetAnalysis(AnalysisId);

        [OperationContract]
        string GetAnalysisData(int ThreadId);
    }

    public class Analysis
    {
        public GenerateAnalysis()
        {
            Thread.Sleep(20000);
            Analysis = "Generated Data";
        }
    }

    public class RiskService : IRiskService
    {
        // How can I change this, to use non-static objects ?
        static string AnalysisData = "";

        public string GetAnalysisData(int ThreadId);
        {
            return AnalysisData;
        }

        public int GetAnalysis(AnalysisId);
        {
            Analysis AObject = new Analysis();
            AObject.Tree = AnalysisTree;
            Thread workerThread = new Thread(AObject.GenerateAnalysis);
            int managedThreadId = workerThread.ManagedThreadId;

            workerThread.Start();
            while (!workerThread.IsAlive) ;

            return managedThreadId;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T14:06:08.370

您可以为每个作业创建一个作业 ID ( `Guid`) 并将其传递回客户端。然后在服务中，将作业 ID 存储在 a 上`ConcurrentDictionary<Guid, AnalysisResult>`，当客户端询问结果时，您返回`AnalysisResult`与作业 ID 对应的 。客户端将需要检查`AnalysisResult`操作返回的值是否不为空等。

请注意，轮询不是最好的方法。

如果您可以替换`basicHttpBinding`为，`wsDualHttpBinding`请查看允许两个端点发送消息的[双工服务。](http://msdn.microsoft.com/en-us/library/ms731064.aspx)这样，服务器可以随时向客户端发送消息。您可以为进度报告创建一个回调接口。

# ios - 将分享按钮添加到导航栏

> ID：13398425
> 
> 赞同：0
> 
> 时间：2012-11-15T13:28:11.680
> 
> 标签：ios, webview, share

我想在 web 视图的导航栏中添加一个共享按钮，按下该按钮时，可以选择在 Safari 中打开链接、通过电子邮件发送链接、在 Facebook 上分享、推特。谁能指出我如何解决这个问题的正确方向？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T13:40:01.590

尝试[BCDShareSheet](https://github.com/jmacmullin/BCDShareSheet)。它包括与电子邮件、Twitter 和 Facebook 的共享，但它缺少在 Safari 中的打开，但添加它应该是微不足道的。

# c# - C# != 运算符无法正常工作

> ID：13398426
> 
> 赞同：1
> 
> 时间：2012-11-15T13:28:13.723
> 
> 标签：c#, operators

当它运行时：

```
if (Title != "") {
     Server.s.Log("title found: " + Title);
     if (TitleColor != "") {
         NameTitle = "[" + TitleColor + Title + NameColor + "]";
     } else {
         NameTitle = "[" + Title + "]";
     }
 } else {
     NameTitle = "";
 } 
```

它认为标题有价值，而实际上标题肯定只是“”，请帮帮我？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-15T13:29:18.173

您可能会将空字符串与空值混淆。试试这个：

```
if (!string.IsNullOrEmpty(Title)) 
```

或这个：

```
if (!string.IsNullOrWhitespace(Title)) 
```

取决于你的需要。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T13:29:30.797

你确定它是一个空字符串而不是空字符串吗？那些是不同的。如果可以，您可以使用[String.IsNullOrEmpty()](http://msdn.microsoft.com/en-us/library/system.string.isnullorempty.aspx)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-15T13:30:24.870

我相信标题是字符串。

尝试..

```
if(!string.IsNullOrEmpty(Title)) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-15T13:30:49.637

使用： [String.IsNullOrEmpty(yourString))](http://msdn.microsoft.com/en-us/library/system.string.isnullorempty.aspx)

# mysql - 那时用例

> ID：13398430
> 
> 赞同：0
> 
> 时间：2012-11-15T13:28:30.100
> 
> 标签：mysql, sql

我有以下片段：

```
COUNT (DISTINCT CASE WHEN (a.FIRST_ORDER_DAY = b.ORDER_DAY) THEN a.CUSTOMER_ID END) AS new_customer 
```

我想复制与选择函数而不是计数函数完全相同的行为。由于我不太了解该功能，因此我不知道如何：

即事先结果是“x 个新客户”

现在我想要一个结果，那就是

```
new customers:
123 (customer ID)
234 (another customer iD) 
```

等等。

我会很感激你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T13:34:53.073

据我了解，您只需要一个新客户 ID 的列表。

为此，您根本不需要 CASE 语句......

```
SELECT DISTINCT
  a.CustomerID
FROM
  ???
WHERE
  a.FIRST_ORDER_DAY = b.ORDER_DAY 
```

`???`应该替换为您拥有的任何连接*（但未包含在您的问题中）*。

# cakephp - CakePHP saveAll 函数重定向不起作用

> ID：13398433
> 
> 赞同：0
> 
> 时间：2012-11-15T13:28:33.050
> 
> 标签：cakephp, redirect

我在 cakePHP 中的重定向功能有问题。当我使用 saveAll

```
if($this->Invoice->save($this->request->data)){
        $this->Session->setFlash('Factuur is opgeslagen.');
        $this->redirect(array('controller'=>'Clients','action'=>'index')); 
```

saveAll 有效，但是当他重定向时，我得到一个白页。有人有答案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T13:17:56.577

试试这个： $this->redirect('/Clients/index');

# asp.net - Asp.Net隐藏文件的url

> ID：13398438
> 
> 赞同：1
> 
> 时间：2012-11-15T13:28:40.347
> 
> 标签：asp.net

我有一个显示 PDF/Word/Excel 文件的 Asp.NET 站点，但我想隐藏文件的位置，即如果用户通过链接请求文件而不是显示路径，只需打开文件名，我已经在其他网站上看到了一些其他帖子，但由于它们很旧，所以它们不会炒锅。

任何帮助表示赞赏。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T13:36:01.433

使用[ASP.NET ASHX 处理程序](http://www.dotnetperls.com/ashx)

一些 ASP.NET 文件是动态生成的。它们是使用 C# 代码或磁盘资源生成的。这些文件不需要 Web 表单。相反，ASHX 通用处理程序是理想的。它可以从查询字符串动态返回图像、写入 XML 或任何其他数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T13:33:51.653

解决这个问题的一种方法是编写一个自定义的 .ashx 处理程序，它实现了 IHttpHandler。

实现 ProcessRequest(..) 方法，并在响应中通过管道输出文件（这是我不久前编写的应用程序的一个示例：

```
 Public Sub ProcessRequest(ByVal context As HttpContext) Implements IHttpHandler.ProcessRequest

        Dim inline As Boolean = Boolean.Parse(context.Request.QueryString("Inline"))
        Dim fileName As String = context.Request.QueryString("fileName")
        If (fileName.Contains("\")) Then Throw New Exception(String.Format("Invalid filename {0}.  Looks like a path was attempted", fileName))

        Dim filePath = ConfigurationManager.AppSettings("FileDirectory") + "\" + fileName
        With context.Response
            .Buffer = True
            .Clear()

            If inline Then
                .AddHeader("content-disposition", "inline; ; filename=" & IO.Path.GetFileName(filePath))
            Else
                .AddHeader("content-disposition", "attachment; ; filename=" & IO.Path.GetFileName(filePath))
            End If

            .WriteFile(filePath)

            If fileName.ToUpper.EndsWith(".PDF") Then
                .ContentType = "application/pdf"
            ElseIf fileName.EndsWith(".htm") Or fileName.EndsWith(".html") Then
                .ContentType = "text/html"
            ElseIf fileName.EndsWith(".tif") Then
                .ContentType = "image/tiff"
            ElseIf fileName.EndsWith(".jpeg") Or fileName.EndsWith(".jpg") Then
                .ContentType = "image/jpeg"
            End If

            .End()
        End With 
```

# php - PHP / MySQL：如果不存在则插入，否则更新

> ID：13398440
> 
> 赞同：0
> 
> 时间：2012-11-15T13:28:47.603
> 
> 标签：php, mysql, csv

> **可能重复：**
> [如果它不存在则创建一个mysql记录，否则更新它](https://stackoverflow.com/questions/8666569/create-a-mysql-record-if-it-doesnt-exist-else-update-it)

我创建了一些 PHP，它从 CSV 获取数据并更新数据库表以匹配 CSV 的数据。

我的下一个任务是，根据唯一列 (sku) 检查记录是否存在。如果确实存在，则根据更改更新数据库表。否则，如果该 SKU 列不匹配，请执行 INSERT。

我目前拥有的代码正在运行，但是我遇到的问题是，如果创建了一个新项目，它似乎会通过现有记录运行更新。

我的代码可以在[Pastebin上找到](http://pastebin.com/8XGf2499)

或者也在这里...

```
<?php

$con = mysql_connect("localhost", "root", "");

if(!$con)
{
 die('Could not connect' . mysql_error());
}

mysql_select_db("db_lemonstand", $con);

class csvIterator extends LimitIterator
{
public function __construct($path)
{
    $csv = new SplFileObject($path);
    $csv->setFlags(SplFileObject::READ_CSV);
    parent::__construct($csv, 1);
}
}
 foreach (new csvIterator('data/catalogue.csv') as $entry) {

$name = $entry[23];

/* Replace Strings To Make URL Name */
$search_array = array(" ", "/", "+");
$replace_array = array("-");
$url_name = strtolower($name);
$url_name = str_replace($search_array, $replace_array, $url_name);

$long_desc = $entry[9];
$short_desc = $entry[23];
$manufacturer = $entry[11];
$price = $entry[15];
$sku = $entry[2];
$weight = $entry[29];
$width = $entry[30];
$height = $entry[5];
$enabled = '1';
$created_at = date('Y-m-d H:i:s');
$product_type_id = '1';
$tax_class_id = '1';

echo '<pre>';
print_r($entry);
echo '</pre>';

// Check see if products' SLU already exists or not
$product_exists = "SELECT sku FROM shop_products WHERE sku = '$sku'";
$result = mysql_query($product_exists, $con);

$exists = mysql_num_rows($result);

if($exists == 0 )
{
    $insert = "INSERT INTO shop_products (name, description, short_description, url_name, price, sku, weight, width, height, enabled, created_at, tax_class_id, product_type_id) VALUES ('$name', '$long_desc', '$short_desc', '$url_name', '$price', '$sku', '$weight', '$width', '$height', '$enabled', '$created_at', '$tax_class_id', '$product_type_id')";
    $insert_data = mysql_query($insert, $con);
}
else
{
    $update = "UPDATE shop_products SET name = '$name', description = '$long_desc', short_description = '$short_desc', url_name = '$url_name', price = '$price', sku = '$sku', weight = '$weight', height = '$height', enabled = '$enabled', created_at = '$created_at', tax_class_id = '$tax_class_id', product_type_id = '$product_type_id'";
    $update_data = mysql_query($update, $con);

    if (!mysql_query($update,$con))
    {
        die('Error: ' . mysql_error());
    }
}

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T13:31:38.897

您可以使用

```
INSERT INTO mytable on DUPLICATE KEY UPDATE... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T13:33:31.693

您必须为表（一个或多个字段）设置唯一键，然后才能使用此功能。在我的示例中，我有唯一键（模板、日期）

```
$sql = 'INSERT INTO myTable
        (`template`,`date`,`count`) VALUES
        ("' . $template . '","' . $curDate . '", 1)
        ON DUPLICATE KEY UPDATE count = count + 1'; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-15T13:36:05.520

将您的字段存储在 var 中作为 $fields 或您想要的任何其他内容并执行此查询，您需要一个字段作为参考，这就是我包含 $Id 的原因

**INSERT INTO table_name SET id = '$Id', $fields ON DUPLICATE KEY UPDATE $fields**

# android - Zxing 导致应用停止&退出

> ID：13398441
> 
> 赞同：2
> 
> 时间：2012-11-15T13:28:52.177
> 
> 标签：android, barcode, zxing, barcode-scanner

我正在尝试将 zxing 作为库添加到我的 android 应用程序中 - 它必须处于脱机状态，因此将 Intent 用于外部应用程序是不好的，因为许多人没有条形码扫描仪。我有 Zxing 作为库，名称是“zxingLib”，并在我的应用程序中添加了“IntentIntegrator”和“IntentResult”+ core.jar。

在我的应用程序中，我通过按钮调用 zxing：

```
public void scanNow(View view){

    IntentIntegrator integrator = new IntentIntegrator(this);
    integrator.initiateScan();
} 
```

并获得结果：

```
public void onActivityResult(int requestCode, int resultCode, Intent intent) {
      IntentResult scanResult = IntentIntegrator.parseActivityResult(requestCode, resultCode, intent);
      if (scanResult != null) {
          intent.putExtra("com.tajchert.kolejrogowska.SCAN.SCAN_MODE", "QR_CODE_MODE");
          String contents = intent.getStringExtra("SCAN_RESULT");
          String format = intent.getStringExtra("SCAN_RESULT_FORMAT");
          Toast toast = Toast.makeText(this, "Content:" + contents + " Format:" + format , Toast.LENGTH_LONG);
          toast.setGravity(Gravity.TOP, 25, 400);
          toast.show();
      }
    } 
```

按下它后显示消息以安装条形码阅读器（表单谷歌播放） - 我做错了什么？但是如果我的手机上已经有条形码，它就会停止（应用程序和条形码阅读器）。日志猫：

```
11-15 14:26:50.132: I/Process(29283): Sending signal. PID: 29283 SIG: 9
11-15 14:27:50.194: E/Trace(29345): error opening trace file: No such file or directory (2)
11-15 14:27:50.202: V/ActivityThread(29345): com.google.zxing.client.android white listed for hwui
11-15 14:27:50.389: I/a(29345): Using implementation class com.google.zxing.client.android.common.executor.HoneycombAsyncTaskExecInterface of interface com.google.zxing.client.android.common.executor.AsyncTaskExecInterface for SDK 11
11-15 14:27:50.491: I/a(29345): Using implementation class com.google.zxing.client.android.camera.open.GingerbreadOpenCameraInterface of interface com.google.zxing.client.android.camera.open.OpenCameraInterface for SDK 9
11-15 14:27:50.491: I/GingerbreadOpenCamera(29345): Opening camera #0
11-15 14:27:51.116: I/CameraConfiguration(29345): Screen resolution: Point(854, 480)
11-15 14:27:51.116: I/CameraConfiguration(29345): Supported preview sizes: 1280x720 848x480 640x480 352x288 320x240 176x144 
11-15 14:27:51.116: I/CameraConfiguration(29345): Found best approximate preview size: Point(1280, 720)
11-15 14:27:51.116: I/CameraConfiguration(29345): Camera resolution: Point(1280, 720)
11-15 14:27:51.155: I/CameraConfiguration(29345): Initial camera parameters: rotation-values=0,90,180,270;mot-postview-mode=on;zoom=0;mot-video-size=640x480;mot-sensor-display-orientation-support-values=off,on;mot-face-track-frame-skip=15;zoom-supported=true;mot-flip-mode-values=off;whitebalance=auto;mot-face-track-mode=off;scene-mode=auto;jpeg-quality=85;preview-format-values=yuv420sp,yuv422i-yuyv;rotation=0;mot-picture-iso-values=auto;jpeg-thumbnail-quality=75;preview-format=yuv420sp;mot-zoom-step=0.5;mot-sensor-display-orientation=0;video-size-values=;mot-video-stabilization-values=off;mot-image-stabilization-values=off;preview-size=848x480;focal-length=3.92;mot-max-picture-continuous-zoom=6;flash-mode-values=off,on,auto,torch;preview-frame-rate-values=10,15,20,24,25,30;mot-image-stabilization=off;mot-exposure-offset-values=-3,-2.67,-2.33,-2,-1.67,-1.33,-1,-0.67,-0.33,0,0.33,0.67,1,1.33,1.67,2,2.33,2.67,3;preview-frame-rate=24;mot-face-detect-num-faces=4;mot-max-face-detect-num-faces=9;focus-mode-values=auto,macro,infinity,off;jpeg-thumbnail-width=320;scene-mode-values=auto,portrait,landscape,action,night-portrait,sunset,steadyphoto;preview-fps-range-values=(10000,30000),(10000,25000),(10000,20000),(10000,24000),(10000,15000),(10000,10000);mot-face-track-mode-values=off;jpeg-thumbnail-size-values=0x0,320x240;zoom-ratios=100,200,300,400;mot-zoom-speed=50;preview-size-values=176x144,320x240,352x288,640x480,848x480,1280x720;picture-size-values=320x240,640x480,1280x960,1600x1200,2048x1536,2592x1456,2592x1936;preview-fps-range=10000, 30000;min-exposure-compensation=-9;antibanding=auto;mot-video-size-values=176x144,320x240,352x288,640x480;vertical-view-angle=40;horizontal-view-angle=53;mot-sensor-display-orientation-support=off;jpeg-thumbnail-height=240;cam-mode=0;smooth-zoom-supported=false;mot-picture-iso=auto;mot-continuous-zoom-step-values=1,0.5,0.25;max-video-continuous-zoom=6;focus-mode=on;mot-video-stabilization=off;mot-flip-mode=off;mot-sensor-display-orientation-values=0,90;video-frame-format=yuv422i-yuyv;picture-format-values=jpeg;mot-areas-to-focus=0;max-exposure-compensation=9;mot-postview-modes=off,on;exposure-compensation=0;exposure-compensation-step=0.3333333333333;mot-max-areas-to-focus=1;flash-mode=off;effect-values=none,mono,sepia,negative,solarize,red-tint,green-tint,blue-tint;picture-size=2592x1936;mot-timestamp-mode=off;max-zoom=3;effect=none;mot-timestamp-mode-values=off,on;mot-exposure-offset=0;whitebalance-values=auto;picture-format=jpeg;jpeg-thumbnail-size=320x240;antibanding-values=auto
11-15 14:27:51.155: I/CameraConfiguration(29345): Supported values: [off, on, auto, torch]
11-15 14:27:51.155: I/CameraConfiguration(29345): Settable value: off
11-15 14:27:51.155: I/CameraConfiguration(29345): Supported values: [auto, macro, infinity, off]
11-15 14:27:51.155: I/CameraConfiguration(29345): Settable value: auto
11-15 14:27:51.218: I/a(29345): Using implementation class com.google.zxing.client.android.common.executor.HoneycombAsyncTaskExecInterface of interface com.google.zxing.client.android.common.executor.AsyncTaskExecInterface for SDK 11
11-15 14:27:51.225: I/a(29345): Current focus mode 'on'; use auto focus? false
11-15 14:27:51.225: I/Choreographer(29345): Skipped 52 frames!  The application may be doing too much work on its main thread.
11-15 14:27:51.257: D/e(29345): Calculated framing rect: Rect(127, 60 - 727, 420)
11-15 14:27:51.530: W/dalvikvm(29345): threadid=13: thread exiting with uncaught exception (group=0x40a9f300)
11-15 14:27:51.530: E/AndroidRuntime(29345): FATAL EXCEPTION: Thread-358
11-15 14:27:51.530: E/AndroidRuntime(29345): java.lang.ArrayIndexOutOfBoundsException: src.length=610560 srcPos=610750 dst.length=485460 dstPos=347913 length=899
11-15 14:27:51.530: E/AndroidRuntime(29345):    at java.lang.System.arraycopy(Native Method)
11-15 14:27:51.530: E/AndroidRuntime(29345):    at com.google.zxing.m.a(Unknown Source)
11-15 14:27:51.530: E/AndroidRuntime(29345):    at com.google.zxing.b.j.a(Unknown Source)
11-15 14:27:51.530: E/AndroidRuntime(29345):    at com.google.zxing.c.a(Unknown Source)
11-15 14:27:51.530: E/AndroidRuntime(29345):    at com.google.zxing.g.a.a(Unknown Source)
11-15 14:27:51.530: E/AndroidRuntime(29345):    at com.google.zxing.i.b(Unknown Source)
11-15 14:27:51.530: E/AndroidRuntime(29345):    at com.google.zxing.i.a(Unknown Source)
11-15 14:27:51.530: E/AndroidRuntime(29345):    at com.google.zxing.client.android.h.handleMessage(Unknown Source)
11-15 14:27:51.530: E/AndroidRuntime(29345):    at android.os.Handler.dispatchMessage(Handler.java:99)
11-15 14:27:51.530: E/AndroidRuntime(29345):    at android.os.Looper.loop(Looper.java:137)
11-15 14:27:51.530: E/AndroidRuntime(29345):    at com.google.zxing.client.android.i.run(Unknown Source) 
```

知道该错误的原因是什么吗？在一个示例中，我看到我的活动应该扩展 ActivityCapture insted 的 Activity 但如果我这样做，则将其标记为错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T13:36:06.007

> 我正在尝试将 zxing 作为库添加到我的 android 应用程序

ZXing团队不支持这个，上次我查了一下。

> 它必须是离线的，所以使用 Intent 到外部应用程序是不好的，因为很多人没有条形码扫描仪

据推测，他们在安装您的应用程序时在线。因此，大概他们在安装 Barcode Scanner 时可以在线。

> 并在我的应用程序中添加了“IntentIntegrator”和“IntentResult”+ core.jar。

`IntentIntegrator`用于与*Barcode Scanner 应用程序*集成。您说您不想与 Barcode Scanner 应用程序集成。

> 按下它后显示消息以安装条形码阅读器（表单谷歌播放） - 我做错了什么？

您正在使用`IntentIntegrator`，它正在尝试与 Barcode Scanner 应用程序集成。

> 知道该错误的原因是什么吗？

这似乎是条码扫描仪应用程序中的一个问题。尝试从启动器运行 Barcode Scanner，看看它是否也会崩溃。如果是这样，则条码扫描仪和您的设备之间存在一些不兼容。

# facebook - Facebook php-sdk 错误

> ID：13398450
> 
> 赞同：-1
> 
> 时间：2012-11-15T13:29:01.610
> 
> 标签：facebook, facebook-php-sdk

Facebook 在 php-sdk 前一天发生了变化，现在我遇到了问题。当我尝试登录时，出现以下错误：

```
An error occurred. Please try again later.

API Error Code: 100
API Error Description: Invalid parameter
Error Message: Please migrate to OAuth2 and use new /dialog/oauth endpoint. return_session is no longer available. 
```

我的 php 连接文件是：

```
<?php

class JO_Api_Facebook_Connect {

  /**
   * Version.
   */
  const VERSION = '2.1.2';

  /**
   * Default options for curl.
   */
  public static $CURL_OPTS = array(
    CURLOPT_CONNECTTIMEOUT => 10,
    CURLOPT_RETURNTRANSFER => true,
    CURLOPT_TIMEOUT        => 60,
    CURLOPT_USERAGENT      => 'facebook-php-2.0',
  );

  /**
   * List of query parameters that get automatically dropped when rebuilding
   * the current URL.
   */
  protected static $DROP_QUERY_PARAMS = array(
    'session',
    'signed_request',
  );

  /**
   * Maps aliases to Facebook domains.
   */
  public static $DOMAIN_MAP = array(
    'api'      => 'https://api.facebook.com/',
    'api_read' => 'https://api-read.facebook.com/',
    'graph'    => 'https://graph.facebook.com/',
    'www'      => 'https://www.facebook.com/',
  );

  /**
   * The Application ID.
   */
  protected $appId;

  /**
   * The Application API Secret.
   */
  protected $apiSecret;

  /**
   * The active user session, if one is available.
   */
  protected $session;

  /**
   * The data from the signed_request token.
   */
  protected $signedRequest;

  /**
   * Indicates that we already loaded the session as best as we could.
   */
  protected $sessionLoaded = false;

  /**
   * Indicates if Cookie support should be enabled.
   */
  protected $cookieSupport = false;

  /**
   * Base domain for the Cookie.
   */
  protected $baseDomain = '';

  /**
   * Indicates if the CURL based @ syntax for file uploads is enabled.
   */
  protected $fileUploadSupport = false;

  /**
   * Initialize a Facebook Application.
   *
   * The configuration:
   * - appId: the application ID
   * - secret: the application secret
   * - cookie: (optional) boolean true to enable cookie support
   * - domain: (optional) domain for the cookie
   * - fileUpload: (optional) boolean indicating if file uploads are enabled
   *
   * @param Array $config the application configuration
   */
  public function __construct($config) {
    $this->setAppId($config['appId']);
    $this->setApiSecret($config['secret']);
    if (isset($config['cookie'])) {
      $this->setCookieSupport($config['cookie']);
    }
    if (isset($config['domain'])) {
      $this->setBaseDomain($config['domain']);
    }
    if (isset($config['fileUpload'])) {
      $this->setFileUploadSupport($config['fileUpload']);
    }
  }

  /**
   * Set the Application ID.
   *
   * @param String $appId the Application ID
   */
  public function setAppId($appId) {
    $this->appId = $appId;
    return $this;
  }

  /**
   * Get the Application ID.
   *
   * @return String the Application ID
   */
  public function getAppId() {
    return $this->appId;
  }

  /**
   * Set the API Secret.
   *
   * @param String $appId the API Secret
   */
  public function setApiSecret($apiSecret) {
    $this->apiSecret = $apiSecret;
    return $this;
  }

  /**
   * Get the API Secret.
   *
   * @return String the API Secret
   */
  public function getApiSecret() {
    return $this->apiSecret;
  }

  /**
   * Set the Cookie Support status.
   *
   * @param Boolean $cookieSupport the Cookie Support status
   */
  public function setCookieSupport($cookieSupport) {
    $this->cookieSupport = $cookieSupport;
    return $this;
  }

  /**
   * Get the Cookie Support status.
   *
   * @return Boolean the Cookie Support status
   */
  public function useCookieSupport() {
    return $this->cookieSupport;
  }

  /**
   * Set the base domain for the Cookie.
   *
   * @param String $domain the base domain
   */
  public function setBaseDomain($domain) {
    $this->baseDomain = $domain;
    return $this;
  }

  /**
   * Get the base domain for the Cookie.
   *
   * @return String the base domain
   */
  public function getBaseDomain() {
    return $this->baseDomain;
  }

  /**
   * Set the file upload support status.
   *
   * @param String $domain the base domain
   */
  public function setFileUploadSupport($fileUploadSupport) {
    $this->fileUploadSupport = $fileUploadSupport;
    return $this;
  }

  /**
   * Get the file upload support status.
   *
   * @return String the base domain
   */
  public function useFileUploadSupport() {
    return $this->fileUploadSupport;
  }

  /**
   * Get the data from a signed_request token
   *
   * @return String the base domain
   */
  public function getSignedRequest() {
    if (!$this->signedRequest) {
      if (isset($_REQUEST['signed_request'])) {
        $this->signedRequest = $this->parseSignedRequest(
          $_REQUEST['signed_request']);
      }
    }
    return $this->signedRequest;
  }

  /**
   * Set the Session.
   *
   * @param Array $session the session
   * @param Boolean $write_cookie indicate if a cookie should be written. this
   * value is ignored if cookie support has been disabled.
   */
  public function setSession($session=null, $write_cookie=true) {
    $session = $this->validateSessionObject($session);
    $this->sessionLoaded = true;
    $this->session = $session;
    if ($write_cookie) {
      $this->setCookieFromSession($session);
    }
    return $this;
  }

  /**
   * Get the session object. This will automatically look for a signed session
   * sent via the signed_request, Cookie or Query Parameters if needed.
   *
   * @return Array the session
   */
  public function getSession() {
    if (!$this->sessionLoaded) {
      $session = null;
      $write_cookie = true;

      // try loading session from signed_request in $_REQUEST
      $signedRequest = $this->getSignedRequest();
      if ($signedRequest) {
        // sig is good, use the signedRequest
        $session = $this->createSessionFromSignedRequest($signedRequest);
      }

      // try loading session from $_REQUEST
      if (!$session && isset($_REQUEST['session'])) {
        $_REQUEST['session'] = html_entity_decode($_REQUEST['session']);
        $session = json_decode(
          get_magic_quotes_gpc()
            ? stripslashes($_REQUEST['session'])
            : $_REQUEST['session'],
          true
        );
        $session = $this->validateSessionObject($session);
      }

      // try loading session from cookie if necessary
      if (!$session && $this->useCookieSupport()) {
        $cookieName = $this->getSessionCookieName();
        if (isset($_COOKIE[$cookieName])) {
        $_COOKIE[$cookieName] = html_entity_decode($_COOKIE[$cookieName]);
          $session = array();
          parse_str(trim(
            get_magic_quotes_gpc()
              ? stripslashes($_COOKIE[$cookieName])
              : $_COOKIE[$cookieName],
            '"'
          ), $session);
          $session = $this->validateSessionObject($session);
          // write only if we need to delete a invalid session cookie
          $write_cookie = empty($session);
        }
      }

      $this->setSession($session, $write_cookie);
    }

    return $this->session;
  }

  /**
   * Get the UID from the session.
   *
   * @return String the UID if available
   */
  public function getUser() {
    $session = $this->getSession();
    return $session ? $session['uid'] : null;
  }

  /**
   * Gets a OAuth access token.
   *
   * @return String the access token
   */
  public function getAccessToken() {
    $session = $this->getSession();
    // either user session signed, or app signed
    if ($session) {
      return $session['access_token'];
    } else {
      return $this->getAppId() .'|'. $this->getApiSecret();
    }
  }

  /**
   * Get a Login URL for use with redirects. By default, full page redirect is
   * assumed. If you are using the generated URL with a window.open() call in
   * JavaScript, you can pass in display=popup as part of the $params.
   *
   * The parameters:
   * - next: the url to go to after a successful login
   * - cancel_url: the url to go to after the user cancels
   * - req_perms: comma separated list of requested extended perms
   * - display: can be "page" (default, full page) or "popup"
   *
   * @param Array $params provide custom parameters
   * @return String the URL for the login flow
   */
  public function getLoginUrl($params=array()) {
    $currentUrl = $this->getCurrentUrl();
    return $this->getUrl(
      'www',
      'login.php',
      array_merge(array(
        'api_key'         => $this->getAppId(),
        'cancel_url'      => $currentUrl,
        'display'         => 'page',
        'fbconnect'       => 1,
        'next'            => $currentUrl,
        'return_session'  => 1,
        'session_version' => 3,
        'v'               => '1.0',
      ), $params)
    );
  }

  /**
   * Get a Logout URL suitable for use with redirects.
   *
   * The parameters:
   * - next: the url to go to after a successful logout
   *
   * @param Array $params provide custom parameters
   * @return String the URL for the logout flow
   */
  public function getLogoutUrl($params=array()) {
    return $this->getUrl(
      'www',
      'logout.php',
      array_merge(array(
        'next'         => $this->getCurrentUrl(),
        'access_token' => $this->getAccessToken(),
      ), $params)
    );
  }

  /**
   * Get a login status URL to fetch the status from facebook.
   *
   * The parameters:
   * - ok_session: the URL to go to if a session is found
   * - no_session: the URL to go to if the user is not connected
   * - no_user: the URL to go to if the user is not signed into facebook
   *
   * @param Array $params provide custom parameters
   * @return String the URL for the logout flow
   */
  public function getLoginStatusUrl($params=array()) {
    return $this->getUrl(
      'www',
      'extern/login_status.php',
      array_merge(array(
        'api_key'         => $this->getAppId(),
        'no_session'      => $this->getCurrentUrl(),
        'no_user'         => $this->getCurrentUrl(),
        'ok_session'      => $this->getCurrentUrl(),
        'session_version' => 3,
      ), $params)
    );
  }

  /**
   * Make an API call.
   *
   * @param Array $params the API call parameters
   * @return the decoded response
   */
  public function api(/* polymorphic */) {
    $args = func_get_args();
    if (is_array($args[0])) {
      return $this->_restserver($args[0]);
    } else {
      return call_user_func_array(array($this, '_graph'), $args);
    }
  }

  /**
   * Invoke the old restserver.php endpoint.
   *
   * @param Array $params method call object
   * @return the decoded response object
   * @throws JO_Api_Facebook_Exception
   */
  protected function _restserver($params) {
    // generic application level parameters
    $params['api_key'] = $this->getAppId();
    $params['format'] = 'json-strings';

    $result = json_decode($this->_oauthRequest(
      $this->getApiUrl($params['method']),
      $params
    ), true);

    // results are returned, errors are thrown
    if (is_array($result) && isset($result['error_code'])) {
      throw new JO_Api_Facebook_Exception($result);
    }
    return $result;
  }

  /**
   * Invoke the Graph API.
   *
   * @param String $path the path (required)
   * @param String $method the http method (default 'GET')
   * @param Array $params the query/post data
   * @return the decoded response object
   * @throws JO_Api_Facebook_Exception
   */
  protected function _graph($path, $method='GET', $params=array()) {
    if (is_array($method) && empty($params)) {
      $params = $method;
      $method = 'GET';
    }
    $params['method'] = $method; // method override as we always do a POST

    $result = json_decode($this->_oauthRequest(
      $this->getUrl('graph', $path),
      $params
    ), true);

    // results are returned, errors are thrown
    if (is_array($result) && isset($result['error'])) {
      $e = new JO_Api_Facebook_Exception($result);
      switch ($e->getType()) {
        // OAuth 2.0 Draft 00 style
        case 'OAuthException':
        // OAuth 2.0 Draft 10 style
        case 'invalid_token':
          $this->setSession(null);
      }
      throw $e;
    }
    return $result;
  }

  /**
   * Make a OAuth Request
   *
   * @param String $path the path (required)
   * @param Array $params the query/post data
   * @return the decoded response object
   * @throws JO_Api_Facebook_Exception
   */
  protected function _oauthRequest($url, $params) { 
    if (!isset($params['access_token'])) {
      $params['access_token'] = $this->getAccessToken();
    }

    // json_encode all params values that are not strings
    foreach ($params as $key => $value) {
      if (!is_string($value)) {
        $params[$key] = json_encode($value);
      }
    }
    return $this->makeRequest($url, $params);
  }

  /**
   * Makes an HTTP request. This method can be overriden by subclasses if
   * developers want to do fancier things or use something other than curl to
   * make the request.
   *
   * @param String $url the URL to make the request to
   * @param Array $params the parameters to use for the POST body
   * @param CurlHandler $ch optional initialized curl handle
   * @return String the response text
   */
  protected function makeRequest($url, $params, $ch=null) {
    if (!$ch) {
      $ch = curl_init();
    }

    $opts = self::$CURL_OPTS;
    if ($this->useFileUploadSupport()) {
      $opts[CURLOPT_POSTFIELDS] = $params;
    } else {
      $opts[CURLOPT_POSTFIELDS] = http_build_query($params, null, '&');
    }
    $opts[CURLOPT_URL] = $url;

    // disable the 'Expect: 100-continue' behaviour. This causes CURL to wait
    // for 2 seconds if the server does not support this header.
    if (isset($opts[CURLOPT_HTTPHEADER])) {
      $existing_headers = $opts[CURLOPT_HTTPHEADER];
      $existing_headers[] = 'Expect:';
      $opts[CURLOPT_HTTPHEADER] = $existing_headers;
    } else {
      $opts[CURLOPT_HTTPHEADER] = array('Expect:');
    }

    curl_setopt_array($ch, $opts);
    $result = curl_exec($ch);

    if (curl_errno($ch) == 60) { // CURLE_SSL_CACERT
      self::errorLog('Invalid or no certificate authority found, using bundled information');
      curl_setopt($ch, CURLOPT_CAINFO,
                  dirname(__FILE__) . '/fb_ca_chain_bundle.crt');
      $result = curl_exec($ch);
    }

    if ($result === false) {
      $e = new JO_Api_Facebook_Exception(array(
        'error_code' => curl_errno($ch),
        'error'      => array(
          'message' => curl_error($ch),
          'type'    => 'CurlException',
        ),
      ));
      curl_close($ch);
      throw $e;
    }
    curl_close($ch);
    return $result;
  }

  /**
   * The name of the Cookie that contains the session.
   *
   * @return String the cookie name
   */
  protected function getSessionCookieName() {
    return 'fbs_' . $this->getAppId();
  }

  /**
   * Set a JS Cookie based on the _passed in_ session. It does not use the
   * currently stored session -- you need to explicitly pass it in.
   *
   * @param Array $session the session to use for setting the cookie
   */
  protected function setCookieFromSession($session=null) {
    if (!$this->useCookieSupport()) {
      return;
    }

    $cookieName = $this->getSessionCookieName();
    $value = 'deleted';
    $expires = time() - 3600;
    $domain = $this->getBaseDomain();
    if ($session) {
      $value = '"' . http_build_query($session, null, '&') . '"';
      if (isset($session['base_domain'])) {
        $domain = $session['base_domain'];
      }
      $expires = $session['expires'];
    }

    // prepend dot if a domain is found
    if ($domain) {
      $domain = '.' . $domain;
    }

    // if an existing cookie is not set, we dont need to delete it
    if ($value == 'deleted' && empty($_COOKIE[$cookieName])) {
      return;
    }

    if (headers_sent()) {
      self::errorLog('Could not set cookie. Headers already sent.');

    // ignore for code coverage as we will never be able to setcookie in a CLI
    // environment
    // @codeCoverageIgnoreStart
    } else {
      setcookie($cookieName, $value, $expires, '/', $domain);
    }
    // @codeCoverageIgnoreEnd
  }

  /**
   * Validates a session_version=3 style session object.
   *
   * @param Array $session the session object
   * @return Array the session object if it validates, null otherwise
   */
  protected function validateSessionObject($session) {
    // make sure some essential fields exist
    if (is_array($session) &&
        isset($session['uid']) &&
        isset($session['access_token']) &&
        isset($session['sig'])) {
      // validate the signature
      $session_without_sig = $session;
      unset($session_without_sig['sig']);
      $expected_sig = self::generateSignature(
        $session_without_sig,
        $this->getApiSecret()
      );
      if ($session['sig'] != $expected_sig) {
        self::errorLog('Got invalid session signature in cookie.');
        $session = null;
      }
      // check expiry time
    } else {
      $session = null;
    }
    return $session;
  }

  /**
   * Returns something that looks like our JS session object from the
   * signed token's data
   *
   * TODO: Nuke this once the login flow uses OAuth2
   *
   * @param Array the output of getSignedRequest
   * @return Array Something that will work as a session
   */
  protected function createSessionFromSignedRequest($data) {
    if (!isset($data['oauth_token'])) {
      return null;
    }

    $session = array(
      'uid'          => $data['user_id'],
      'access_token' => $data['oauth_token'],
      'expires'      => $data['expires'],
    );

    // put a real sig, so that validateSignature works
    $session['sig'] = self::generateSignature(
      $session,
      $this->getApiSecret()
    );

    return $session;
  }

  /**
   * Parses a signed_request and validates the signature.
   * Then saves it in $this->signed_data
   *
   * @param String A signed token
   * @param Boolean Should we remove the parts of the payload that
   *                are used by the algorithm?
   * @return Array the payload inside it or null if the sig is wrong
   */
  protected function parseSignedRequest($signed_request) {
    list($encoded_sig, $payload) = explode('.', $signed_request, 2);

    // decode the data
    $sig = self::base64UrlDecode($encoded_sig);
    $data = json_decode(self::base64UrlDecode($payload), true);

    if (strtoupper($data['algorithm']) !== 'HMAC-SHA256') {
      self::errorLog('Unknown algorithm. Expected HMAC-SHA256');
      return null;
    }

    // check sig
    $expected_sig = hash_hmac('sha256', $payload,
                              $this->getApiSecret(), $raw = true);
    if ($sig !== $expected_sig) {
      self::errorLog('Bad Signed JSON signature!');
      return null;
    }

    return $data;
  }

  /**
   * Build the URL for api given parameters.
   *
   * @param $method String the method name.
   * @return String the URL for the given parameters
   */
  protected function getApiUrl($method) {
    static $READ_ONLY_CALLS =
      array('admin.getallocation' => 1,
            'admin.getappproperties' => 1,
            'admin.getbannedusers' => 1,
            'admin.getlivestreamvialink' => 1,
            'admin.getmetrics' => 1,
            'admin.getrestrictioninfo' => 1,
            'application.getpublicinfo' => 1,
            'auth.getapppublickey' => 1,
            'auth.getsession' => 1,
            'auth.getsignedpublicsessiondata' => 1,
            'comments.get' => 1,
            'connect.getunconnectedfriendscount' => 1,
            'dashboard.getactivity' => 1,
            'dashboard.getcount' => 1,
            'dashboard.getglobalnews' => 1,
            'dashboard.getnews' => 1,
            'dashboard.multigetcount' => 1,
            'dashboard.multigetnews' => 1,
            'data.getcookies' => 1,
            'events.get' => 1,
            'events.getmembers' => 1,
            'fbml.getcustomtags' => 1,
            'feed.getappfriendstories' => 1,
            'feed.getregisteredtemplatebundlebyid' => 1,
            'feed.getregisteredtemplatebundles' => 1,
            'fql.multiquery' => 1,
            'fql.query' => 1,
            'friends.arefriends' => 1,
            'friends.get' => 1,
            'friends.getappusers' => 1,
            'friends.getlists' => 1,
            'friends.getmutualfriends' => 1,
            'gifts.get' => 1,
            'groups.get' => 1,
            'groups.getmembers' => 1,
            'intl.gettranslations' => 1,
            'links.get' => 1,
            'notes.get' => 1,
            'notifications.get' => 1,
            'pages.getinfo' => 1,
            'pages.isadmin' => 1,
            'pages.isappadded' => 1,
            'pages.isfan' => 1,
            'permissions.checkavailableapiaccess' => 1,
            'permissions.checkgrantedapiaccess' => 1,
            'photos.get' => 1,
            'photos.getalbums' => 1,
            'photos.gettags' => 1,
            'profile.getinfo' => 1,
            'profile.getinfooptions' => 1,
            'stream.get' => 1,
            'stream.getcomments' => 1,
            'stream.getfilters' => 1,
            'users.getinfo' => 1,
            'users.getloggedinuser' => 1,
            'users.getstandardinfo' => 1,
            'users.hasapppermission' => 1,
            'users.isappuser' => 1,
            'users.isverified' => 1,
            'video.getuploadlimits' => 1);
    $name = 'api';
    if (isset($READ_ONLY_CALLS[strtolower($method)])) {
      $name = 'api_read';
    }
    return self::getUrl($name, 'restserver.php');
  }

  /**
   * Build the URL for given domain alias, path and parameters.
   *
   * @param $name String the name of the domain
   * @param $path String optional path (without a leading slash)
   * @param $params Array optional query parameters
   * @return String the URL for the given parameters
   */
  protected function getUrl($name, $path='', $params=array()) {
    $url = self::$DOMAIN_MAP[$name];
    if ($path) {
      if ($path[0] === '/') {
        $path = substr($path, 1);
      }
      $url .= $path;
    }
    if ($params) {
      $url .= '?' . http_build_query($params, null, '&');
    }
    return $url;
  }

  /**
   * Returns the Current URL, stripping it of known FB parameters that should
   * not persist.
   *
   * @return String the current URL
   */
  protected function getCurrentUrl() {
    $protocol = isset($_SERVER['HTTPS']) && $_SERVER['HTTPS'] == 'on'
      ? 'https://'
      : 'http://';
    $currentUrl = $protocol . $_SERVER['HTTP_HOST'] . $_SERVER['REQUEST_URI'];
    $parts = parse_url($currentUrl);

    // drop known fb params
    $query = '';
    if (!empty($parts['query'])) {
      $params = array();
      parse_str($parts['query'], $params);
      foreach(self::$DROP_QUERY_PARAMS as $key) {
        unset($params[$key]);
      }
      if (!empty($params)) {
        $query = '?' . http_build_query($params, null, '&');
      }
    }

    // use port if non default
    $port =
      isset($parts['port']) &&
      (($protocol === 'http://' && $parts['port'] !== 80) ||
       ($protocol === 'https://' && $parts['port'] !== 443))
      ? ':' . $parts['port'] : '';

    // rebuild
    return $protocol . $parts['host'] . $port . $parts['path'] . $query;
  }

  /**
   * Generate a signature for the given params and secret.
   *
   * @param Array $params the parameters to sign
   * @param String $secret the secret to sign with
   * @return String the generated signature
   */
  protected static function generateSignature($params, $secret) {
    // work with sorted data
    ksort($params);

    // generate the base string
    $base_string = '';
    foreach($params as $key => $value) {
      $base_string .= $key . '=' . $value;
    }
    $base_string .= $secret;

    return md5($base_string);
  }

  /**
   * Prints to the error log if you aren't in command line mode.
   *
   * @param String log message
   */
  protected static function errorLog($msg) {
    // disable error log if we are running in a CLI environment
    // @codeCoverageIgnoreStart
    if (php_sapi_name() != 'cli') {
      error_log($msg);
    }
    // uncomment this if you want to see the errors on the page
    // print 'error_log: '.$msg."\n";
    // @codeCoverageIgnoreEnd
  }

  /**
   * Base64 encoding that doesn't need to be urlencode()ed.
   * Exactly the same as base64_encode except it uses
   *   - instead of +
   *   _ instead of /
   *
   * @param String base64UrlEncodeded string
   */
  protected static function base64UrlDecode($input) {
    return base64_decode(strtr($input, '-_', '+/'));
  }

}

?> 
```

如何迁移到 OAuth 2.0 以及如何解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T13:37:47.337

更新您的 SDK [https://github.com/facebook/facebook-php-sdk/](https://github.com/facebook/facebook-php-sdk/)，它将使用新的端点。

# python - 使用更改的模块路径对 python 对象进行 unpickling

> ID：13398462
> 
> 赞同：25
> 
> 时间：2012-11-15T13:29:26.700
> 
> 标签：python, import, pickle

我正在尝试将`Project A`同事构建的项目集成到另一个 python 项目中。现在这位同事没有在他的代码中使用相对导入，而是使用了

```
from packageA.moduleA import ClassA
from packageA.moduleA import ClassB 
```

并因此用`cPickle`. 为了整洁，我想隐藏他 ( `Project A`) 在我的项目中构建的包。然而，这会改变定义在`packageA`. 没问题，我将使用重新定义导入

```
from ..packageA.moduleA import ClassA
from ..packageA.moduleA import ClassB 
```

但现在取消腌制课程失败并显示以下消息

```
 with open(fname) as infile: self.clzA = cPickle.load(infile)
ImportError: No module named packageA.moduleA 
```

那么为什么`cPickle`显然看不到模块defs。我需要将根目录添加`packageA`到系统路径吗？这是解决问题的正确方法吗？

该`cPickled`文件看起来像

```
ccopy_reg
_reconstructor
p1
(cpackageA.moduleA
ClassA
p2
c__builtin__
object
p3
NtRp4 
```

旧的项目层次结构是这样的

```
packageA/
    __init__.py
    moduleA.py
    moduleB.py
packageB/
    __init__.py
    moduleC.py
    moduleD.py 
```

我想把所有这些都放在一个`WrapperPackage`

```
MyPackage/
.. __init__.py
.. myModuleX.py
.. myModuleY.py
WrapperPackage/
.. __init__.py
.. packageA/
   .. __init__.py
   .. moduleA.py
   .. moduleB.py
.. packageB/
   .. __init__.py
   .. moduleC.py
   .. moduleD.py 
```

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-11-15T13:41:33.583

您需要为 pickle 导入创建一个别名才能工作；以下到包的`__init__.py`文件`WrapperPackage`：

```
from .packageA import * # Ensures that all the modules have been loaded in their new locations *first*.
from . import packageA  # imports WrapperPackage/packageA
import sys
sys.modules['packageA'] = packageA  # creates a packageA entry in sys.modules 
```

不过，您可能需要创建其他条目：

```
sys.modules['packageA.moduleA'] = moduleA
# etc. 
```

现在 cPickle 将在他们`packageA.moduleA`的`packageA.moduleB`旧位置再次找到。

之后您可能需要重新编写 pickle 文件，届时将使用新的模块位置。上面创建的附加别名应确保有问题的模块具有新的位置名称，`cPickle`以便在再次编写类时获取。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-15T20:34:27.613

除了@MartinPieters 的回答之外，另一种方法是定义类的`find_global`方法`cPickle.Unpickler`，或者扩展`pickle.Unpickler`类。

```
def map_path(mod_name, kls_name):
    if mod_name.startswith('packageA'): # catch all old module names
        mod = __import__('WrapperPackage.%s'%mod_name, fromlist=[mod_name])
        return getattr(mod, kls_name)
    else:
        mod = __import__(mod_name)
        return getattr(mod, kls_name)

import cPickle as pickle
with open('dump.pickle','r') as fh:
    unpickler = pickle.Unpickler(fh)
    unpickler.find_global = map_path
    obj = unpickler.load() # object will now contain the new class path reference

with open('dump-new.pickle','w') as fh:
    pickle.dump(obj, fh) # ClassA will now have a new path in 'dump-new' 
```

可以在[此处](http://nadiana.com/python-pickle-insecure)`pickle`找到有关这两个过程的更详细说明。`cPickle`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-03-15T20:02:22.857

一种可能的解决方案是直接编辑 pickle 文件（如果您有权访问）。我遇到了更改模块路径的同样问题，并且我将文件保存为 pickle.HIGHEST_PROTOCOL 所以理论上它应该是二进制的，但是模块路径以纯文本形式位于 pickle 文件的顶部。因此，我只是对旧模块路径的所有实例进行了查找替换，使用新的，瞧，它们正确加载。

我确信这个解决方案并不适合所有人，特别是如果你有一个非常复杂的腌制对象，但它是一个快速而肮脏的数据修复，对我有用！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-04-20T17:59:12.180

这是我灵活解酸的基本模式——通过一个明确且快速的转换图——因为除了与酸洗相关的原始数据类型之外，通常只有几个已知的类。这也可以保护 unpickling 免受错误或恶意构造的数据的影响，毕竟这些数据可以在简单的`pickle.load()`（有或没有容易出错的 sys.modules 摆弄）上执行任意 python 代码（！）。

蟒蛇 2 和 3：

```
from __future__ import print_function
try:    
    import cPickle as pickle, copy_reg as copyreg
except: 
    import pickle, copyreg

class OldZ:
    a = 1
class Z(object):
    a = 2
class Dangerous:
    pass   

_unpickle_map_safe = {
    # all possible and allowed (!) classes & upgrade paths    
    (__name__, 'Z')         : Z,    
    (__name__, 'OldZ')      : Z,
    ('old.package', 'OldZ') : Z,
    ('__main__', 'Z')       : Z,
    ('__main__', 'OldZ')    : Z,
    # basically required
    ('copy_reg', '_reconstructor') : copyreg._reconstructor,    
    ('__builtin__', 'object')      : copyreg._reconstructor,    
    }

def unpickle_find_class(modname, clsname):
    print("DEBUG unpickling: %(modname)s . %(clsname)s" % locals())
    try: 
        return _unpickle_map_safe[(modname, clsname)]
    except KeyError:
        raise pickle.UnpicklingError(
            "%(modname)s . %(clsname)s not allowed" % locals())
if pickle.__name__ == 'cPickle':  # PY2
    def SafeUnpickler(f):
        u = pickle.Unpickler(f)
        u.find_global = unpickle_find_class
        return u
else:  # PY3 & Python2-pickle.py
    class SafeUnpickler(pickle.Unpickler):  
        find_class = staticmethod(unpickle_find_class)

def test(fn='./z.pkl'):
    z = OldZ()
    z.b = 'teststring' + sys.version
    pickle.dump(z, open(fn, 'wb'), 2)
    pickle.dump(Dangerous(), open(fn + 'D', 'wb'), 2)
    # load again
    o = SafeUnpickler(open(fn, 'rb')).load()
    print(pickle, "loaded:", o, o.a, o.b)
    assert o.__class__ is Z
    try: 
        raise SafeUnpickler(open(fn + 'D', 'rb')).load() and AssertionError
    except pickle.UnpicklingError: 
        print('OK: Dangerous not allowed')

if __name__ == '__main__':
    test() 
```

# javascript - markdowndeep图片上传

> ID：13398464
> 
> 赞同：2
> 
> 时间：2012-11-15T13:29:27.487
> 
> 标签：javascript, jquery, twitter-bootstrap, markdown, wmd

我正在使用[MarkDownDeep](http://www.toptensoftware.com/markdowndeep/)。它具有与 SO 类似的“插入图像”功能。

我想扩展此功能以使用[引导模式](http://twitter.github.com/bootstrap/javascript.html#modals)，该模式将允许用户上传自己的图像或至少让[输入](http://twitter.github.com/bootstrap/javascript.html#typeahead)工作正常，以便用户可以选择从另一个页面上传的内容。

我尝试使用回调函数代替下面的提示，但它`str`不像原始函数那样插入到文本框中。

```
pub.cmd_img = function (ctx) {
    ctx.TrimSelection();
    if (!ctx.CheckSimpleSelection())
        return false;

    imagePopUp(function(results) {

        $("#" + ctx.m_textarea.id).focus();

        var url = results;

        if (url === null)
            return false;

        var alttext = ctx.getSelectedText();
        if (alttext.length == 0) {
            alttext = "Image Text";
        }

        var str = "![" + alttext + "](" + url + ")";

        ctx.ReplaceSelection(str);
        ctx.m_selectionStart += 2;
        ctx.m_selectionEnd = ctx.m_selectionStart + alttext.length;
        return true;
    });
    return false; 
```

`uploadImageUrl`是一个持有变量，因为目前我在模态框内使用 iframe，以便用户可以上传，然后 iframe 设置`parent.uploadImageUrl`

```
uploadImageUrl = "baz"; 
function imagePopUp(callback) {
    $('#imageUpload').modal('show');

    $('#confirmTrue').click(function () {
        $('#imageUpload').modal('hide');

        if (callback) callback(uploadImageUrl);
    });
} 
```

**原来的**

```
 pub.cmd_img = function (ctx) {
        ctx.TrimSelection();
        if (!ctx.CheckSimpleSelection())
            return false;

        var url = prompt("Enter the image URL"); //need to change what this does

        if (url === null)
            return false;

        var alttext = ctx.getSelectedText();
        if (alttext.length == 0) {
            alttext = "Image Text";
        }

        var str = "![" + alttext + "](" + url + ")";

        ctx.ReplaceSelection(str);
        ctx.m_selectionStart += 2;
        ctx.m_selectionEnd = ctx.m_selectionStart + alttext.length;
        return true;
    }; 
```

你可以看到我[没用的小提琴](http://jsfiddle.net/Eonasdan/fVpSW/1/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T13:19:33.933

这应该可以解决问题：

```
pub.cmd_img = function(ctx){

   ctx.TrimSelection();
   if (!ctx.CheckSimpleSelection())
      return false;

   //call popup
   imagePopUp(function(results){

      $("#" + ctx.m_textarea.id).focus();

      var url = results;
      if (url === null)
         return false;

      var alttext = ctx.getSelectedText();
      if (alttext.length == 0){
         alttext = "Image Text";
      }

      var str = "![" + alttext + "](" + url + ")";
      var editor = $(ctx.m_textarea).data("mdd");

      editor.cmd_img_core = function(state){
         state.ReplaceSelection(str);
         state.m_selectionStart += 2;
         state.m_selectionEnd = state.m_selectionStart + alttext.length;
         return true;
      };

      editor.InvokeCommand("img_core");
      delete editor.cmd_img_core;
   });             
   return false;
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-13T10:12:22.853

我对这段代码有一些问题，当我尝试将第二张图片插入编辑器时，它会插入 URL 两次，第三张图片插入三次，依此类推。它似乎运行 imagePopup 回调的次数与插入的图像数量相同。我通过以下更改解决了这个问题。不完美但有效：

```
var isImageInserted = false; 
pub.cmd_img = function (ctx) {
    ctx.TrimSelection();
    if (!ctx.CheckSimpleSelection())
        return false;

    isImageInserted = false;
    //call popup
    imagePopUp(function (results) {

        $("#" + ctx.m_textarea.id).focus();

        var url = results;
        if (url === null)
            return false;

        var alttext = ctx.getSelectedText();
        if (alttext.length == 0) {
            alttext = "Image Text";
        }
        var str = "";
        if (!alttext.indexOf(url) > -1) {
            str = "![" + alttext + "](" + url + ")";
        } else {
            str = alttext;
        }

        var editor = $(ctx.m_textarea).data("mdd");
        if (!isImageInserted) {
            editor.cmd_img_core = function (state) {
                state.ReplaceSelection(str);
                state.m_selectionStart += 2;
                state.m_selectionEnd = state.m_selectionStart + alttext.length;
                isImageInserted = true;
                return true;
            };

            editor.InvokeCommand("img_core");
            delete editor.cmd_img_core;
        }

    });
    return false;

} 
```

希望这对其他人有帮助，因为几乎每个 markdowndeep 搜索似乎都在这里。

# android-viewpager - 我的 Android 应用的 ViewPager 中 PagerTabStrip 的自定义字体颜色

> ID：13398471
> 
> 赞同：5
> 
> 时间：2012-11-15T13:29:46.087
> 
> 标签：android-viewpager

我需要在我的 Android 应用程序的 ViewPager 中更改 PagerTabStrip 的字体颜色。这是相同的 xml 布局。有什么办法可以做到这一点吗？

```
<android.support.v4.view.ViewPager
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_below="@id/head"
    android:id="@+id/myfivepanelpager">

        <android.support.v4.view.PagerTabStrip
         android:id="@+id/pgstrip"
        android:layout_width="fill_parent"
        android:background="@color/strip"
        android:layout_height="@dimen/pagerstripht"
        android:layout_gravity="top"
        />

    </android.support.v4.view.ViewPager> 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-24T07:15:46.727

在您的代码中：

```
<android.support.v4.view.PagerTabStrip
         android:id="@+id/pgstrip"
        android:layout_width="fill_parent"
        android:background="@color/strip"
        android:layout_height="@dimen/pagerstripht"
        android:layout_gravity="top"
        /> 
```

我认为添加 android:textColor="#000" 会改变文本颜色。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-12-13T08:52:54.420

如果您还没有发现，代码如下

```
PagerTabStrip pagerTabStrip = (PagerTabStrip) findViewById(R.id.pager_title_strip);
pagerTabStrip.setDrawFullUnderline(true);
pagerTabStrip.setTabIndicatorColor(Color.RED); 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-12-06T14:28:40.407

获取 PagerTabStrip 的子视图并检查它是否是 TextView 的实例。如果是，设置文本颜色：

```
PagerTabStrip mPagerTabStrip = (PagerTabStrip) findViewById(R.id.pgstrip);
for (int i = 0; i < mPagerTabStrip.getChildCount(); ++i) {
    View nextChild = mPagerTabStrip.getChildAt(i);
    if (nextChild instanceof TextView) {
        TextView textViewToConvert = (TextView) nextChild;
        textViewToConvert.setTextColor(getResources().getColor(R.color.primary_text_color_dark_gray));
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-06-26T15:29:33.040

你为什么不使用：

```
pagerTabStrip.setTextColor(int color); 
```

[![在此处输入图像描述](../Images/536567b7d274999cfff2c67f97ff799a.png)](https://i.stack.imgur.com/M68Xk.png)

# java - 如何使用 Maven 和 Tycho 构建 Eclipse RCP

> ID：13398472
> 
> 赞同：1
> 
> 时间：2012-11-15T13:29:46.797
> 
> 标签：java, eclipse, maven, rcp, tycho

我遇到了以下情况： 一个 Eclipse rcp 项目，它需要另一个包（其中包含一些 jar）才能运行。当我从 Eclipse 启动它时，它运行得很好。现在我想**用 maven 和 tycho**创建一个可运行的 jar （这很重要）。

eclipse rcp项目中的pom.xml长这样

```
<properties>
        <tycho-version>0.16.0</tycho-version>
    </properties>

    <repositories>
        <repository>
            <id>helios</id>
            <layout>p2</layout>
            <url>http://download.eclipse.org/releases/helios</url>
        </repository>
        <repository>
            <id>galileoTest</id>
            <layout>p2</layout>
            <url>http://download.eclipse.org/eclipse/updates/3.6-JUnit-Tests/</url>
        </repository>
    </repositories>

    <build>
        <plugins>
            <plugin>
                <groupId>org.eclipse.tycho</groupId>
                <artifactId>tycho-maven-plugin</artifactId>
                <version>${tycho-version}</version>
                <extensions>true</extensions>
            </plugin>

            <plugin>
                <groupId>org.eclipse.tycho</groupId>
                <artifactId>target-platform-configuration</artifactId>
                <version>${tycho-version}</version>
                <configuration>
                    <environments>
                        <environment>
                            <os>linux</os>
                            <ws>gtk</ws>
                            <arch>x86</arch>
                        </environment>
                        <environment>
                            <os>linux</os>
                            <ws>gtk</ws>
                            <arch>x86_64</arch>
                        </environment>
                        <environment>
                            <os>win32</os>
                            <ws>win32</ws>
                            <arch>x86</arch>
                        </environment>
                        <environment>
                            <os>win32</os>
                            <ws>win32</ws>
                            <arch>x86_64</arch>
                        </environment>
                        <environment>
                            <os>macosx</os>
                            <ws>cocoa</ws>
                            <arch>x86_64</arch>
                        </environment>
                    </environments>
                </configuration>
            </plugin>
        </plugins>
    </build> 
```

构建过程“成功”，但生成的 jar 为 olny 74kb（必须超过 15mb）并且不可执行（未找到主类）。

# asp.net-mvc - 嵌入 Flash 媒体服务 (Red5) 和授权

> ID：13398483
> 
> 赞同：1
> 
> 时间：2012-11-15T13:30:25.150
> 
> 标签：asp.net-mvc, flash, security, architecture, red5

一个建筑问题。

我的网站需要允许用户录制视频并将其上传到“网站”。我一直在闲逛，看来我*必须*使用某种媒体服务器来实现这一目标。当我将此辅助服务器引入系统时（我试图将驻留在此服务器上的 Flash 应用程序嵌入到站点提供的 HTML 中），我突然想到这大大拓宽了安全范围。让我害怕的是攻击者试图自己嵌入 Flash 应用程序或试图冒充客户端（或其他我还没有想到的东西！）。

因此，我想知道人们如何使用这样的架构来保护他们的应用程序。[当然我可以按照这里](https://stackoverflow.com/a/13006632/1143)的建议做，现在是一个不错的创可贴，但是 afaik 域信息在技术上可以被客户伪造。

我可以分离出站点的身份验证，给我一个 WebServer、一个 AuthServer 和一个 MediaServer，使 MediaServer 能够单独进行身份验证。让用户登录这两个站点显然很繁重，并且绕过用户的登录凭据并保护所有连接听起来很丑陋，并且反对最佳实践。

据我所知，我最好的选择是身份验证服务器创建的某种临时令牌。因此，网站在登录后会启动身份验证服务器以生成令牌，然后该站点可以将其传递给媒体服务器（作为闪存变量的一部分），并且媒体服务器本身可以用来对身份验证服务器进行双重检查。

我对 Red5、Flash 和 web 安全性比较陌生，所以我想知道以下内容是否合理、安全和/或必要。此外，如果有人知道可用于此类身份验证系统的体面工具，以及是否已经在 ASP.NET 身份验证中为此目的进行了一些活动。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T10:22:49.437

您的链接中提供的解决方案...您应该阅读我的第二条评论。第一个关于虚拟主机是错误的！我的评论实际上确实告诉了您（至少一个）保护您的应用程序的解决方案。

例如，您可以将连接方法中的 SESSION_ID 传递给 Red5。用户将在调用记录或回放方法之前从另一个 Web 服务调用中获取 SESSION_ID。

SESSION_ID 甚至可能是某种临时令牌，它仅在 15 分钟内有效，并且只能针对该视频使用一次。你实现它的程度取决于你的机制需要有多安全。

塞巴斯蒂安

# asp.net-mvc - 在 ASP.NET MVC 4 中获取嵌套级别的视图

> ID：13398485
> 
> 赞同：2
> 
> 时间：2012-11-15T13:30:27.957
> 
> 标签：asp.net-mvc, asp.net-mvc-4, asp.net-mvc-partialview, nested-views

我一直在寻找一种方法来确定视图的“嵌套级别”。我发现：在 stackoverflow.com 上[确定视图“嵌套级别” 。](https://stackoverflow.com/questions/4982588/determine-view-nesting-level)但这仅适用于`RenderAction`并且仅说明它是否为子视图。

我想要的是布局具有级别 0，在布局中呈现的视图（例如 with `@RenderBody()`）具有级别 1，在该视图中呈现的视图（例如 with `@Html.Partial(...)`）具有级别 2。

例如：

*   _Layout.cshtml (0)
    *   _LoginPartial.cshtml (1)
    *   索引.cshtml (1)
        *   数据表.cshtml (2)
            *   数据头.cshtml (3)
            *   数据行.cshtml (3)

有人对此有解决方案吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-18T21:42:53.947

经过一番调查，我发现了一个`System.Web.WebPages.TemplateStack`在执行视图时使用的静态类，在执行前将模板推入堆栈并在执行后弹出，因此堆栈的大小可用于确定级别。没有计数变量或任何公共属性/方法来获取实际堆栈。但是有一个私有方法`GetStack(HttpContextBase)`。

我通过使用反射和扩展方法解决了它：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.Mvc;
using System.Web.WebPages;
using System.Reflection;
using System.Collections;

namespace Mollwe.Helpers
{
    public static class TemplateStackLevelAccessor
    {
        private static MethodInfo _getStackMethod;

        public static int GetTemplateLevel(this HtmlHelper htmlHelper)
        {
            return GetTemplateLevel(htmlHelper.ViewContext);
        }

        public static int GetTemplateLevel(this ViewContext viewContext)
        {
            return GetTemplateLevel(viewContext.HttpContext);
        }

        public static int GetTemplateLevel(this HttpContextBase httpContext)
        {
            if (_getStackMethod == null)
            {
                _getStackMethod = typeof(TemplateStack).GetMethod("GetStack", BindingFlags.NonPublic | BindingFlags.Static);
            }

            var stack = _getStackMethod.Invoke(null, new object[] { httpContext }) as Stack<ITemplateFile>;

            return stack.Count - 1;
        }
    }
} 
```

也许不是最好的方法，但它有效。由于堆栈在视图的执行中使用，它只能在视图或从视图调用的代码中工作。

依赖于`System.Web.WebPages.WebPageBase`的实现`ExecutePageHierarchy()`在派生类型`System.Web.Mvc.WebViewPage`中被调用，在`RazorView.RenderView(...)`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-07T04:29:03.380

对于希望在 ASP.Net Core 中执行此操作的任何人，您需要实现自己的`ViewResultExecutor`. 您可以拦截所有嵌套的“ExecuteAsync()”调用，从而允许构建自己的嵌套级别。

有关更多详细信息，请参见此处：[挂钩到 ASP.Net Core 的 razor 页面执行](https://stackoverflow.com/questions/43267839/hooking-into-razor-page-execution-for-asp-net-core/43269630#43269630)

# actionscript-3 - AS3 - 使用中/右键拖动滚动 ScrollPane

> ID：13398490
> 
> 赞同：0
> 
> 时间：2012-11-15T13:30:46.620
> 
> 标签：actionscript-3, mouse, drag, scrollpane

我知道可以让用户`ScrollPane`在 using中拖动内容`scrollDrag`，这样他们就不必使用滚动条。但是，使用 时`scrollDrag`，它仅适用于鼠标左键。我想要做的几乎相同，但是对于中间（鼠标滚轮）或鼠标右键。这样用户就可以使用左键执行其他功能。

有人知道我可能错过的可以做到这一点的功能或自定义方法吗？请注意，我不想要[这个](https://stackoverflow.com/questions/13253041/middle-button-click-to-scroll)，我只想要`scrollDrag`其他鼠标按钮。

# c# - 如何在 c# .Net 中进行 URLDecode，但排除某些字符？

> ID：13398493
> 
> 赞同：-5
> 
> 时间：2012-11-15T13:30:52.193
> 
> 标签：c#, .net, urldecode

我想urldecode，除了`%20`字符。我该如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T13:36:54.190

您是否考虑过在解码后进行字符串替换？例如

```
string decoded = HttpServerUtility.UrlDecode(input).Replace(" ", "%20"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T13:32:16.827

使用方法`HttpUtility.HtmlDecode(myEncodedString, myWriter);`

# .net - 从 XML 反序列化 DD/MM/YYYY hh:mm:ss.fff 格式的日期字符串

> ID：13398494
> 
> 赞同：1
> 
> 时间：2012-11-15T13:30:53.827
> 
> 标签：.net, c#-4.0, xml-serialization

我的程序以 XML 格式从设备接收数据。设备以 DD/MM/YYYY hh:mm:ss.fff 格式的字符串返回日期时间。`DateTime`即使本地机器设置为美国英语文化，我如何将其反序列化为对象？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T13:34:27.647

您可以使用[`DateTime.ParseExact`](http://msdn.microsoft.com/en-us/library/w2sa9yss.aspx)

```
DateTime.ParseExact(s, "dd/MM/yyyy HH:mm:ss.fff",
                    System.Globalization.CultureInfo.InvariantCulture) 
```

请注意，案例很重要

*   `MM`： 月
*   `mm`： 分钟
*   `HH`: 小时（24 小时）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T13:33:53.173

使用[DateTime.ParseExact](http://msdn.microsoft.com/en-us/library/w2sa9yss.aspx)方法

```
var date = DateTime.ParseExact(text, "dd/MM/yyyy hh:mm:ss.fff",      
                               CultureInfo.InvariantCulture); 
```

此外，您应该使用小写`dd`的日子和`yyyy`年份。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T13:34:17.040

使用[`ParseExact`](http://msdn.microsoft.com/en-us/library/system.datetime.parseexact.aspx)or[`TryParseExact`](http://msdn.microsoft.com/en-us/library/system.datetime.tryparseexact.aspx)与该格式字符串 - 这应该产生一个`DateTime`实例。

两者的主要区别在于，`ParseExact`如果不成功将抛出异常，并`TryParseExact`返回一个布尔值，指示解析是否成功。

# powershell - 在 Powershell 中断开特定的服务器映射

> ID：13398496
> 
> 赞同：0
> 
> 时间：2012-11-15T13:31:08.107
> 
> 标签：powershell, powershell-2.0

我们遇到了一个问题，即服务器组推出了不正确的驱动器映射，导致多个连接（具有不同的驱动器号）到同一台服务器。该问题已通过包含以下内容的批处理文件得到解决：

```
for /f "tokens=2,3" %%a in ('net use') do if .%%b==.\\Ncprolawapp01\ProLaw net use %%a /Delete
for /f "tokens=2,3" %%a in ('net use') do if .%%b==.\\Ncatsqlapp01\ProLaw net use %%a /Delete
net use R: \\NCPROLAWAPP01\PROLAW 
```

我现在要做的是将其放入 Powershell 脚本中，以便它在未来图像的首次用户设置时运行。我没有时间查找太多，但我知道上面的行在 Powershell 中不起作用。只是在寻找一些建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T13:44:34.667

您可以使用 wmi 检查是否已经有一个驱动器映射到您的服务器，如下所示：

```
PS>get-wmiObject "win32_logicalDisk" |where-object {$_.ProviderName -eq "\\Ncprolawapp01\ProLaw"}

DeviceID     : Z:
DriveType    : 4
ProviderName : \\Ncprolawapp01\ProLaw
FreeSpace    : 298465705984
Size         : 644245090304
VolumeName   : 
```

您可以使用旧的“net use /d”断开驱动器

```
PS>gwmi "win32_logicalDisk" |? {$_.ProviderName -eq "\\Ncprolawapp01\ProLaw"} |%{ net use $_.DeviceID /delete}
Z: a été supprimé. 
```

# android - 以纵向模式拍摄的 Android 视频无法以纵向模式播放

> ID：13398511
> 
> 赞同：0
> 
> 时间：2012-11-15T13:32:12.693
> 
> 标签：android, video, media

在我的应用程序中，我以纵向模式捕获视频，但默认情况下，当我播放视频时，视频会变为横向。

我试过`mCamera.setDisplayOrientation(90)`在 Android 4.0 设备上工作，但不是在 2.3 设备上工作。我的应用目标是 2.3

我还注意到一件事，当我去画廊并通过默认媒体播放器播放它时，它会在 Portait 模式下播放。:-(

尝试各种选项，我环顾四周，但找不到任何解决方案。如果您遇到过同样的问题，请有人指导我。

这是我的代码

```
mMediaRecorder = new MediaRecorder();

    mCamera.unlock();
    mCamera.setDisplayOrientation(90);
    mMediaRecorder.setCamera(mCamera);

    mMediaRecorder.setAudioSource(MediaRecorder.AudioSource.MIC);
    mMediaRecorder.setVideoSource(MediaRecorder.VideoSource.CAMERA);
    mMediaRecorder.setOutputFormat(MediaRecorder.OutputFormat.MPEG_4);
    mMediaRecorder.setAudioEncoder(MediaRecorder.AudioEncoder.AAC);
    mMediaRecorder.setVideoEncoder(MediaRecorder.VideoEncoder.H264);
    mMediaRecorder.setVideoFrameRate(30); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T12:35:34.003

它似乎无法以风景以外的其他方式录制视频。根据文档，您的 mCamera.setDisplayOrientation(90) 正在影响预览。

# diff - 检测网页内容的变化

> ID：13398512
> 
> 赞同：2
> 
> 时间：2012-11-15T13:32:13.423
> 
> 标签：diff, web-crawler

我正在寻找一种方法（不是库或框架，因为我似乎找不到）来检测网页内容的变化。我查看了类似于[Tracking changes to web page content](https://stackoverflow.com/questions/12612668/tracking-changes-to-web-page-content)和白皮书 ( [http://shodhganga.inflibnet.ac.in/bitstream/10603/2415/14/14_chapter%205.pdf](http://shodhganga.inflibnet.ac.in/bitstream/10603/2415/14/14_chapter%205.pdf) ) 的帖子，但有很难找到一个好的方法。

我不相信页面内容的 md5 是有用的，因为大多数页面的内容会根据您的请求时间而略有变化（例如，如果他们对当天的日期进行硬编码）。

此外，我想找出一种方法来确定哪些内容实际发生了变化（例如，对被视为不同的内容运行差异就足够了，但我首先需要弄清楚哪些内容不同）。

[http://www.changedetection.com/](http://www.changedetection.com/)似乎在这方面做得很好。任何方法或想法或链接将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-16T13:40:32.493

HTTP Last-Modified 和[ETag](https://en.wikipedia.org/wiki/HTTP_ETag)标头可能是一种方法。但是，如果您爬取的网页没有实现它们，则剩下的就是文本相似性检测。

# outlook - Outlook 2012 签名，带图像，不带附件

> ID：13398513
> 
> 赞同：4
> 
> 时间：2012-11-15T13:32:14.713
> 
> 标签：outlook, signature

我正在尝试在 Outlook 2010 中创建嵌入公司徽标的电子邮件签名。

当我正在努力解决这个问题时，我发现包含的图像作为附件发送非常奇怪。

它不会在 Outlook 上显示为其他用户的附件。但它可以在 Mac、hotmail 等上运行。

我已经尝试通过 HTML 包含它，因此将图像放在 FTP 上并从那里加载它，并且我尝试通过签名编辑器包含它，两者都无法使其工作.. 有没有代码可以做到这一点功能？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-15T13:49:10.360

为什么您觉得图片作为附件包含在内很奇怪？没有它，收件人就无法查看图像，因为电子邮件本身只是文本。我想它没有在 Outlook 中显示为附件的唯一原因是因为 Outlook 足够聪明，知道它本身不是“真正的附件”，而只是签名。即便如此，我记得在旧版本的 Outlook 中收到签名图像作为附件。

也就是说，应该可以在您的签名中使用链接图像。[此链接](http://www.msoutlook.info/question/538)说明了如何执行此操作。

> 使用 Internet 上的图像或图片创建 Outlook 签名需要更改 Outlook 在如何处理链接图像以及以特定方式添加图像的行为。插入图像后，您可以使用签名编辑器将图像转换为网站的超链接。
> 
> **将 Outlook 设置为链接到图片而不是嵌入图片**
> 
> 第一步是改变 Outlook 处理链接图片的行为。默认情况下，Outlook 会将它们与邮件一起嵌入，但这意味着您的图片将反映您创建邮件的时间，而不是收件人正在阅读（甚至重新阅读）您的邮件的时间。
> 
> 根据您更改图片的频率，这可能不是问题，但这也意味着每次都会添加图片，从而使每条消息都变得更大。在某些情况下，这也可能导致您的图片被添加为附件和/或显示带有回形针图标的消息。这些都是您应该避免的事情；如果不是为了你，那么绝对是为了接受者。
> 
> 在 Outlook 2003 和以前的版本中，您可以通过以下方式更改此行为；工具-> 选项...-> 选项卡邮件格式-> 按钮 Internet 格式-> 选项：当 HTML 邮件包含位于 Internet 上的图片时，发送图片的副本而不是对其位置的引用。
> 
> 在 Outlook 2007 和 2010 中，只能通过注册表更改此行为。
> 
> 键：HKEY_CURRENT_USER\Software\Microsoft\Office\\Outlook\Options\Mail 值名称；发送带有文档值的图片：0
> 
> 有关此注册表项的更多信息，请参阅；Outlook 2007/2010 中的“HTML 选项”在哪里？
> 
> **将图片作为链接** 插入 将图片插入到您的签名中时，您必须再次确保图片已链接。如果您不这样做，则当前图像将被下载并保存在您的签名中，并且在您在线更改时不会更新。
> 
> **Outlook 2003** 在签名编辑器中右键单击（不要使用高级编辑）并选择；插入图片... 当提示输入图片源时，输入图片的完整 Internet 地址 (URL)。点击确定
> 
> **Outlook 2007 和 Outlook 2010** 单击签名编辑器中的图片图标 作为文件名，输入图像的完整 Internet 地址 (URL)。不要单击插入，而是单击插入按钮上的小向下箭头并选择；链接到文件
> 
> **创建超链接**
> 
> 添加图像后，您可以使其可点击并通过超链接功能将其指向网站。
> 
> **展望 2003**
> 
> 右键单击插入的图像并选择；编辑超链接 Outlook 2007 和 Outlook 2010 选择图像并单击超链接图标

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T13:56:08.277

似乎更多的是客户端如何显示它的问题。不同的客户端将以不同的方式处理图像，尤其是从安全角度来看。您是否尝试过直接从 Web 链接到图像？

以下是一些附加信息：

[http://www.howto-outlook.com/faq/imagesignature.htm](http://www.howto-outlook.com/faq/imagesignature.htm)

# visual-studio-2012 - 在 Visual Studio 2012 中调试 WCF 服务

> ID：13398522
> 
> 赞同：0
> 
> 时间：2012-11-15T13:32:51.007
> 
> 标签：visual-studio-2012, remote-debugging, w3wp

如何判断我的哪些服务是我要调试的服务？

使用 Visual Studio 2010 调试器，我只需查找在运行我的服务的应用程序池用户名下运行的 w3wp（或者不管它是什么）。

但是现在在我的附加到进程窗口中，我有 3 个 msvmnon.exe 进程并且我没有看到任何 wcf 服务正在运行？我错过了什么？

![在此处输入图像描述](../Images/501a8c028bae30a007f346e1e2f11236.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T12:42:28.220

我没有做的是检查所有用户的显示过程。

![我是个白痴](../Images/0ee934cbd34d9a557724ff1afe3daca9.png)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-15T13:38:34.313

在 VS 2010 中将您的 WCF 服务项目设置为启动。然后运行该项目，您将看到一个窗口，其中定义了左侧的所有服务。单击您要执行的服务并传递参数（如果有）

# c# - 无法将手动匿名项添加到 IQueryable

> ID：13398526
> 
> 赞同：1
> 
> 时间：2012-11-15T13:33:21.123
> 
> 标签：c#, linq, iqueryable

从我有这个 linq 查询来从 IQueryable 构建一个 json（字符串和布尔值？）：

```
var ret = from c in results select new { country = c.EN, schengen = c.Schengen }; 
```

我想手动添加新项目：（伪代码）

```
ret = ret /* add this -> */ { country = "some new country", schengen = true } 
```

我试过这样做：

```
//End up with cannot convert from AnonymousType#2 to AnonymousType#1
var listRet = ret.ToList();
listRet.Add(new { country ="", schengen = true }); 
```

由于它是我构建的匿名类型，我找不到添加它的方法。我总是以转换错误告终

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T13:36:59.453

很明显。泛型是不变的。所以另一种类型不适合。您可以使用`List<object>`或命名类来存储值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T13:46:46.933

匿名类型仍然是静态类型的，C# 编译器为每个匿名类型定义出现生成一个单独的类。在这种情况下，您需要一个命名类。无论如何，对于数据传输对象来说，这是一个很好的做法。我使用这样的 JSON DTO，使用数据注释和 DataContractJsonSerializer。

```
[DataContract]
public class CountryInfo
{
    [DataMember(Name = "country")]
    public string Country { get; set; }

    [DataMember(Name = "schengen", EmitDefaultValue = false)
    public bool? Schengen { get; set; }
} 
```

这样我就有了一个有据可查的 JSON“协议”，它在序列化之前也使用 C# 命名约定，但之后使用 JS 命名约定。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-15T13:39:57.570

如果要手动更改结果，则需要将其转换为静态类型而不是动态类型。创建一个具有字符串 country 和 bool schengen 的类（如果适用，您甚至可以在当前类中创建该类以将其隐藏在应用程序的其余部分中），将您的 linq 结果转换为该类，然后添加到它。

# vba - 我使用 if 函数创建了一个宏，但它似乎不起作用。我错过了什么？

> ID：13398527
> 
> 赞同：1
> 
> 时间：2012-11-15T13:33:21.943
> 
> 标签：vba, excel

我创建了一个宏来显示以下内容：

`If (I3<>0,I3*G3,H3*G3)``N3, R3, V3, Z3`这对于单元格等会重复。

```
Option Explicit 
Sub Eg() 
    Range("J3, N3,R3, V3,Z3,AD3,AH3,AL3,AP3,AT3,Ax3,BB3,XF3,BJ3").Formula = "=IF(RC[-1]<>0,RC[-1]*RC[-3],RC[-2]*RC[-3])" 
End Sub 
```

但是，这似乎不起作用。
让我再解释一下这应该如何工作：

此报告需要从应用程序下载。
宏需要附加到此报告，以便当我下载报告时，宏会自动在相应的列中运行此公式。

此外，我还必须使用此公式为所有行填充电子表格。

公式应该所在的列不是空白的，但是一旦运行宏，就需要在报告中自动满足这一点。

我在这里想念什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T22:07:15.443

当您使用`Range.Formula = formulaAsString`，并且该范围引用多个单元格时，您指定（仅）该范围中的第一个单元格所需的确切公式字符串，同时适当地使用相对与绝对单元格引用，因为分配给多个（后续）单元格将就像您将范围中的第一个单元格粘贴到其他单元格一样，就像您在没有 VBA 的情况下完成了复制和粘贴一样——您使用绝对寻址 A1 vs. A$1 vs. $A$1 vs. $A1 等...根据需要实现对后续单元格的公式的正确更改。

例如，

```
Range ("A1, C1, E1").Formula = "=A2+$A2" 
```

将有相同的结果

```
Range ( "A1" ).Formula = "=A2+$A2"
Range ( "C1" ).Formula = "=C2+$A2"
Range ( "E1" ).Formula = "=E2+$A2" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T20:31:10.053

你混在一起`.Formula`了`.FormulaR1C1`！您的字符串是 R1C1 样式，但您将其分配给 A1 样式公式。

因此，只需将其更改为：

```
Range("J3, N3,R3, V3,Z3,AD3,AH3,AL3,AP3,AT3,Ax3,BB3,XF3,BJ3").FormulaR1C1 = _
    "=IF(RC[-1]<>0,RC[-1]*RC[-3],RC[-2]*RC[-3])" 
```

或者

```
Range("J3, N3,R3, V3,Z3,AD3,AH3,AL3,AP3,AT3,Ax3,BB3,XF3,BJ3").Formula = _
    "=IF(I3<>0,I3*G3,H3*G3)" 
```

正如埃里克在他的回答中指出的那样，后者也将以相同的方式工作并调整每个单元格的公式（这在 R1C1 中不是必需的，因为公式无论如何都保持不变......）

# java - 如何中断我当前正在运行的线程？

> ID：13398530
> 
> 赞同：1
> 
> 时间：2012-11-15T13:33:24.697
> 
> 标签：java, multithreading, thread-safety

我的谷歌技能似乎让我失望了，如果这是一个简单的问题，我深表歉意。

我只是想中断（我猜是“杀死”它）我当前正在运行的线程。

我的类实现了 Runnable，并且在 run() 方法中，如果满足某个条件，我希望线程中断。

干杯! :)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T13:38:34.807

另一种选择取决于上下文。Thread.interrupt 可能会更好，但是通过在你的类中引入一个取消布尔值，这个也可能很有用。

```
public class MyLongRunningTask implements Runnable
{
   private volatile boolean cancelled;

   public void run() {
      while (!cancelled) {
         System.out.println("Do something...");
      }
   }

   public void setCancelled(boolean cancelled) {
      this.cancelled = cancelled;
   }
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-15T14:08:38.650

你有两个选择：

`return;`

最正确和最推荐的

`Thread.currentThread().interrupt();`

# javascript - Magento 自定义选项上的 JS 警报单击

> ID：13398536
> 
> 赞同：2
> 
> 时间：2012-11-15T13:33:45.130
> 
> 标签：javascript, magento, prototypejs

我有一个带有 3 个选项的单选按钮自定义选项。例如，在选择选项 2 时，我希望一个简单的 JS`alert()`弹出有关此选择的消息，而不是所有选项，只有一个。

我发现的问题是，为了使其与所有具有 JS 生成的 ID 和类名的产品兼容，因此几乎没有什么模式可以遵循以确保我的代码适用于所有产品。

我可以通过仅寻找该元素并使用 获得第二个元素来做到这一点`getElementByTag()`，但是我想要一种对 Magento 友好的方式来做到这一点，因为我将在接下来的几个月中获得认证，并希望确保我的实践保持在-与 Magento 保持一致，而不是“解决”它。

示例代码（Magento 动态生成的 ID、类和名称）

```
<dd class="last">
    <ul id="options-54765-list" class="options-list">
        <li>
            <input type="radio" class="radio  validate-one-required-by-name product-custom-option" onclick="opConfig.reloadPrice()" name="options[54765]" id="options_54765_2" value="210674" />
            <span class="label"><label for="options_54765_2">Colour Edge </label></span>
            <script type="text/javascript">$('options_54765_2').advaiceContainer = 'options-54765-container';$('options_54765_2').callbackFunction = 'validateOptionsCallback';</script>
        </li>
        <li>
            <input type="radio" class="radio  validate-one-required-by-name product-custom-option" onclick="opConfig.reloadPrice()" name="options[54765]" id="options_54765_3" value="210673" />
            <span class="label"><label for="options_54765_3">Gallery Wrap </label></span>
            <script type="text/javascript">$('options_54765_3').advaiceContainer = 'options-54765-container';$('options_54765_3').callbackFunction = 'validateOptionsCallback';</script>
        </li>
        <li>
            <input type="radio" class="radio  validate-one-required-by-name product-custom-option" onclick="opConfig.reloadPrice()" name="options[54765]" id="options_54765_4" value="210672" />
            <span class="label"><label for="options_54765_4">White Edge </label></span>
            <script type="text/javascript">$('options_54765_4').advaiceContainer = 'options-54765-container';$('options_54765_4').callbackFunction = 'validateOptionsCallback';</script>
        </li>
    </ul>
</dd> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T23:16:25.330

为此，在该产品的设计选项卡中，添加自定义块，如下所示：

```
<reference name="before_body_end">
    <block type="your_module/product" name="option.select.js" template="path/to/template.phtml" />
</reference> 
```

在你的新块中，抓住`Mage::registry('current_product');`，然后调用`getProductOptions()`。根据任何标准对其进行过滤。现在，最好的可能是，根据是否需要重复使用，`Catalog_Model_Product_Option_Value`在数据库中的表中添加一列，并扩展管理模板，以便您选中一个框，或使用下拉菜单，或输入一些文本得到确认弹出。

然后，在`protected function _toHtml() {}`函数中，为确认框输出您的 JS。

我就是这样做的。

# android - Eclipse 无法在非 root Mac 用户上下载 Android SDK 平台

> ID：13398540
> 
> 赞同：0
> 
> 时间：2012-11-15T13:33:49.523
> 
> 标签：android, eclipse, android-sdk-tools

我正在使用最新的 OS X Mountain Lion 运行 Mac。

我之前没有这个问题，但是后来我需要启用root用户。从那时起（只是假设，因为它可能是由其他原因引起的）我无法从 Android SDK 管理器下载任何内容。它失败并显示一条消息（权限被拒绝）。我可以从 root 用户进行更新。这有点问题。我能做些什么呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-23T12:58:33.323

通过 Eclipse Preferences 找出您的 Android SDK 的安装位置。将该文件夹的权限更改为全局可访问`chmod -R o+rwx <folder path>`（或至少使其可访问您的用户帐户）

您可能需要 sudo 进行该 chmod 调用。

更安全的选择是将整个文件夹复制到您自己的主目录中，并将其用作 Eclipse 中的 Android SDK 路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T15:14:50.203

我不得不删除 eclipse，重新下载并在我的标准帐户上安装所有内容。然后它起作用了

# ios - iOS 为所有视图控制器 self.view 设置背景颜色

> ID：13398544
> 
> 赞同：18
> 
> 时间：2012-11-15T13:34:05.597
> 
> 标签：ios, view, uiviewcontroller

有没有办法为所有视图设置相同的背景图像？

`viewDidLoad:`在所有方法中设置相同的背景。这不酷。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-06-26T20:22:08.890

你可以创建一个自定义类，我们称之为 TemplateView，它是 UIView 的子类。然后使用 xib/storyboards 选择控制器视图和身份检查器将 Class 属性更改为“TemplateView”。

随后使用 UIAppearance 将模板视图的背景颜色更改为所需的颜色。

```
 [[TemplateView appearance]setBackgroundColor:[UIColor blueColor]]; 
```

这将改变项目中每个模板视图的背景颜色。我认为这是更好的解决方案

```
[[UIView appearance] setBackgroundColor:[UIColor redColor]]; 
```

因为我们不会改变一切的背景，只是我们的自定义类。希望它会有所帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T13:49:20.303

是的，[`UIAppearance`](https://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIAppearance_Protocol/Reference/Reference.html)在 iOS5+ 中使用：

```
[[UIView appearance] setBackgroundColor:[UIColor redColor]]; 
```

*注意：`UIView`符合协议，但由于某种原因`<UIAppearance, UIAppearanceContainer>`没有标记任何属性。`UI_APPEARANCE_SELECTOR`*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T13:50:00.883

我认为这不是一个好主意，但如果你真的想这样做，你可以这样做：

```
- (void)setBGColor:(UIColor *)color forAllSubviewsOf:(UIView *)view
{
    [view setBackgroundColor:color];
    for (UIView *sub in view.subviews)
        [self setBGColor:color forAllSubviewsOf:sub];
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-05-01T08:10:23.717

我想你可以使用 Method Swizzling 的一些功能来更改所有视图的颜色或图像设置。

检查以下

[https://wiredcraft.com/blog/method-swizzling-ios/](https://wiredcraft.com/blog/method-swizzling-ios/)

# windows - Windows批处理文件中的字符串处理：如何用前导零填充值？

> ID：13398545
> 
> 赞同：29
> 
> 时间：2012-11-15T13:34:06.627
> 
> 标签：windows, batch-file

在 Windows cmd 批处理文件 (.bat) 中，我如何填充数值，以便将 0..99 范围内的给定值转换为“00”到“99”范围内的字符串。即我想为低于 10 的值设置前导零。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-11-15T13:43:29.493

您可以使用两个阶段的过程：

```
REM initial setup
SET X=5

REM pad with your desired width - 1 leading zeroes
SET PADDED=0%X%

REM slice off any zeroes you don't need -- BEWARE, this can truncate the value
REM the 2 at the end is the number of desired digits
SET PADDED=%PADDED:~-2% 
```

现在`TEMP`保存填充值。如果 的初始值有`X`可能超过 2 位，您需要检查您是否不小心截断了它：

```
REM did we truncate the value by mistake? if so, undo the damage
SET /A VERIFY=1%X% - 1%PADDED%
IF NOT "%VERIFY%"=="0" SET PADDED=%X%

REM finally update the value of X
SET X=%PADDED% 
```

**重要的提示：**

此解决方案创建或覆盖变量`PADDED`和`VERIFY`. 任何设置变量值的脚本在它终止后不打算保留，都应该放在里面`SETLOCAL`，并`ENDLOCAL`声明以防止这些更改从外部世界可见。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-11-15T15:49:41.180

如果您确信原始数字中的位数始终 <= 2，那么

```
set "x=0%x%"
set "x=%x:~-2%" 
```

如果数字可能超过 2 位，并且您想填充到 2 位，但不截断大于 99 的值，则

```
setlocal enableDelayedExpansion
if "%x%" equ "%x:~-2%" (
  set "x=0%x%"
  set "x=!x:~-2!"
) 
```

或者没有延迟扩展，使用中间变量

```
set paddedX=0%x%
if "%x%" equ "%x:~-2%" set "x=%paddedX:~-2%" 
```

上述算法的好处是可以将填充扩展到任意宽度是微不足道的。例如，要填充到宽度 10，只需在前面加上 9 个零并保留最后 10 个字符

```
set "x=000000000%x%"
set "x=%x:~-10%" 
```

防止截断

```
set paddedX=000000000%x%
if "%x%" equ "%x:~-10%" set "x=%paddedX:~-10%" 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2015-04-25T12:09:33.747

单行

```
IF 1%Foo% LSS 100 SET Foo=0%Foo% 
```

将在您指定的范围内为您提供所需的数字。如果它们已经是单填充的，它不会更改子集 0-9 中的值。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-11-16T05:55:05.987

以前的答案已经解释了所有现有的用左零填充值的方法；我只是想添加一个我以前用更简单的方式来做的小技巧。以前的答案中没有提到的是，在大多数情况下，*将被填充的值在循环内递增*，并且填充的值*仅用于显示它*（或类似的任务，如重命名）。例如，要显示从 00 到 99 的值：

```
set x=0
:loop
   rem Pad x value, store it in padded
   set padded=0%x%
   set padded=%padded:~-2%
   rem Show padded value
   echo %padded%
   set /A x+=1
if %x% leq 99 goto loop 
```

如果是这种情况，则变量的值可用于控制循环*和*显示其填充值，如果其限制被适当地转换，则无需修改。例如，要显示从 00 到 99 的值：

```
set x=100
:loop
   rem Show padded value
   echo %x:~-2%
   set /A x+=1
if %x% leq 199 goto loop 
```

此方法也适用于要填充的任意数量的左零。

安东尼奥

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2016-11-06T05:56:11.120

好的，伙计们，我找到了一个解决方案，尽可能简单地压缩它。

```
@echo off
title pad numbers
set num=0
set zero= 000
:loop
@set /a num=%num%+1
if /i %num% GTR 9 set zero= 00
if /i %num% GTR 99 set zero= 0
if /i %num% GTR 999 set zero= 
echo %zero%%num%
goto loop 
```

这将使用 4 位数字显示您的计数。但代码可以更改为使用 2 位数字，如下所示。

```
@echo off
title pad numbers
set num=0
set zero= 0
:loop
@set /a num=%num%+1
if /i %num% GTR 9 set zero= 
echo %zero%%num%
goto loop 
```

如果要将其设置为可显示的单个变量...

```
@echo off
title pad numbers
set num=0
set zero= 0
:loop
@set /a num=%num%+1
if /i %num% GTR 9 set zero= 
set %zero%%num%=number
echo %number%
goto loop 
```

如果你想让它在几秒钟内计数......

```
@echo off
title pad numbers
set num=0
set zero= 0
:loop
@set /a num=%num%+1
if /i %num% GTR 9 set zero= 
set %zero%%num%=number
echo %number%
ping localhost -n 2 >nul
goto loop 
```

我希望这是一个很大的帮助^^

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-11-15T13:46:51.137

这个例子使用了一个`for`循环来演示，但是即使你在没有循环的情况下使用它，逻辑也是一样的。如果数字小于 10，就`echo`在前面。`0`

```
setlocal enabledelayedexpansion
for /l %%a in (1,1,40) do (
set n=%%a
if !n! lss 10 (
echo 0!n!
) else (
echo !n!
)
)
pause >nul 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-03-14T20:06:38.663

```
@echo off
rem .
rem   counter example - with and without padding (up to 260 leading 0s which should be enough for most filenames)
rem .
rem   we assume values given are valid
rem   additional error checking could be done to make sure they are numbers
rem   and to ensure that starting is less than ending
rem   and that the number of ending digits is not greater than the number of padding digits
rem .
if "%2"=="" (
  echo.
  echo usage:   %~nx0 [starting number] [ending number] [pad]
  echo example: %~nx0  0  19        will output numbers 0 to 19 each on a new line
  echo example: %~nx0  3  12  8     will output numbers 3 to 12 each on a new line padded to 8 digits
  echo.
  goto end
  )
rem .
setlocal enabledelayedexpansion
if "%3"=="" (
  for /l %%x in (%1, 1, %2) do (
    echo.%%x
  )
) else (
  set "mynum="
  for /l %%x in (%1, 1, %2) do (
    call set "mynum=00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000%%x"
    call set "mynum=%%mynum:~-%3%%"
    call echo.%%mynum%%
  )
)
:end 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-05-06T13:59:41.063

这要容易得多：

```
set build_b=00%your_value%
set padded_value=%build_b:~-2% 
```

# android - android ListView onOverScroll 永远不会被调用

> ID：13398547
> 
> 赞同：2
> 
> 时间：2012-11-15T13:34:22.390
> 
> 标签：android, listview, overscroll

谁能告诉我为什么我不能在下面的代码中调用 onOverScrolled：

```
 public class KasOverScrollListenableListView extends ListView {

    public interface OverScrollListener{
        void onOverScroll(int scrollx, int scrollY,boolean clampedX, boolean clampedY );
    }
    private OverScrollListener mOverScrollListener= null;
    public KasOverScrollListenableListView(Context context, AttributeSet attrs,
            int defStyle) {
        super(context, attrs, defStyle);
    }

    public KasOverScrollListenableListView(Context context, AttributeSet attrs){
        this(context,attrs,0);
    }

    public KasOverScrollListenableListView(Context context){
        this(context,null,0);
    }

    protected void onOverScroll(int scrollX, int scrollY, boolean clampedX, boolean clampedY){
         Log.i("overScrolling", "overScrolling is " + scrollY);
        // if the version of the system higher than 2.3 then do the following things.
        if(Build.VERSION.SDK_INT >= Build.VERSION_CODES.GINGERBREAD){
//          super.onOverScrolled(scrollX, scrollY, clampedX, clampedY);
            if(null != mOverScrollListener ){
                mOverScrollListener.onOverScroll(scrollX, scrollY, clampedX, clampedY);
            }
        }

    }

    public void setOnOverScrollListener(OverScrollListener listener){
        mOverScrollListener = listener;
    }
} 
```

我永远无法输出日志，这意味着从未调用过此函数，而此列表视图实际上已过度滚动。听到您的想法，我将非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-08T09:14:51.513

不确定这是否会有所帮助，但以下链接中的示例调用 super.overScrollBy(...)。我可以使用此代码访问 onOverScroll 。希望能帮助到你...

[OverScroll ListView 示例代码](http://code.google.com/p/techbooster/source/browse/trunk/overscrolledActivity/src/org/jpn/techbooster/sample/overscrolledActivity/OverScrollListView.java?spec=svn345&r=345)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-06T06:12:16.333

只是……如果它需要某人。[我在Github](https://github.com/Suvitruf/Android-sdk-examples/tree/master/OverScrollListView)上分享了工作示例。

在 2.3+ 上运行良好

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-01T17:15:06.717

方法是`onOverScrolled`，不是`onOverScroll`。

`@Override`您可以通过将方法签名放在上面来检测这些错误。编译器会让你知道你是否真的覆盖了一个方法。

# printing - 在反面打印模板

> ID：13398549
> 
> 赞同：0
> 
> 时间：2012-11-15T13:34:31.357
> 
> 标签：printing

我有一个打印机设置，我经常打印合同等，我需要它能够在背面打印一个包含所有条款和条件的模板。

我不知道从哪里开始，这把我难住了......

提前感谢任何可以提供任何建议的人。

问候

亨利

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T13:39:15.163

如果您的打印机具有双面打印功能，您可以尝试在相应页面中插入条款和条件，然后从打印对话框中选择双面打印。如果不这样做，并且您的条款和条件在您打印的合同中没有变化，您可以打印一批条款和条件，然后在需要打印合同时加载这些页面。

# qt - x11 限制鼠标移动

> ID：13398553
> 
> 赞同：4
> 
> 时间：2012-11-15T13:34:42.150
> 
> 标签：qt, ubuntu, x11

我尝试将鼠标光标移动锁定在屏幕的左半部分。我有以下屏幕设置：

左侧是大小为 1120x1080 的 Qt 窗口，右侧是大小为 800x1080 的 GL 窗口。

我在 Ubuntu 12.10 下使用 Openbox 窗口管理器。窗口布局保持固定。

我需要将鼠标移动限制在 Qt 窗口中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-06T22:11:58.753

要让鼠标停留在窗口中，请使用以下命令启用鼠标移动：

```
setMouseTracking(true); 
```

并覆盖`void QWidget::mouseMovement( QMouseEvent * event )`

```
void TheWindow::mouseMoveEvent ( QMouseEvent * event )
{
    // get window size without frame
    QRect s = geometry();

    // get current cursor position
    int x = event->globalX();
    int y = event->globalY();

    bool reset = false;

    // Check cursor position relative to window
    if (event->x() < 0) 
    {
        x -= event->x();
        reset = true;
    }
    else if (event->x() >= s.width())
    {
       x += s.width() - event->x() - 1;
       reset = true;
    }

    if (event->y() < 0)
    {
        y -= event->y();
        reset = true; 
    }
    else if (event->y() >= s.height())
    {
        y += s.height() - event->y() - 1;
        reset = true;
    }

    // if reset needed move cursor  
    if (reset) QCursor::setPos(x,y);

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-24T08:05:45.797

这涉及到`QGraphicsItem::itemChange()`。如果您有一个想要限制在某个区域的项目，那么重新实现`itemChange()`该项目并监控`QGraphicsItem::ItemPositionHasChanged`更改以查看这些项目是否要放置在您感兴趣的区域之外，并通过从该区域内返回一个位置来防止这种情况发生。例如：

```
QVariant QGraphicsItem::itemChange(GraphicsItemChange change, const QVariant &value)
{
    switch (change) {
    case ItemPositionHasChanged:
        if(x() < -200 || y() < -200 || x() > 200 || y() > 200)
            setPos(0, 0);
        graph->itemMoved();
        break;
    default:
        break;
    };

    return QGraphicsItem::itemChange(change, value);
} 
```

# android - Android Canvas：仅绘制预先计算的路径的一部分

> ID：13398558
> 
> 赞同：2
> 
> 时间：2012-11-15T13:35:00.480
> 
> 标签：android, android-canvas

是否可以只绘制路径的一部分？假设我的 Path 是从 x = 0 到 x = 2000，整个 Path 是在 start 时计算的，Canvas 放在 Horizo​​ntalScrollView 上。当滚动 x = 500 时，我只想绘制该路径的 500 到 1000；当 x = 0 时，绘制 0 到 1000，当 x = 1500 时，绘制 1000 到 1500，当 x = 2000 时，绘制 1000 到 2000。

路径是贝塞尔曲线，因此如果需要一直进行计算，则会损害性能。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2018-11-15T14:23:51.813

您可以`getSegment`为此目的使用方法，如下所示（Kotlin）：

```
private fun getSubPath(path: Path, start: Float, end: Float): Path {
    val subPath = Path()
    val pathMeasure = PathMeasure(path, false)
    pathMeasure.getSegment(start * pathMeasure.length, end * pathMeasure.length, subPath, true)
    return subPath
} 
```

用法：

```
val subPath = getSubPath(path = originalPath, start = 0.2f, end = 0.8f) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T20:54:19.413

我可能会给你一个答案。

Picture 类用于存储不改变的图片，然后将它们写入画布。

例如，您可以有 4 个不同的图片对象，每个对象都有部分贝塞尔曲线，然后在需要时编写它们。

一些代码可能看起来像这样：

```
Picture b1 = new Picture();
Canvas c1 = b1.beginRecording(500, height);
// draw
b1.endRecording();
Picture b2 = new Picture();
Canvas c2 = b2.beginRecording(500, height);
c2.translate(-500, 0);
// draw
b2.endRecording();
Picture b3 = new Picture();
Canvas c3 = b3.beginRecording(500, height);
c3.translate(-1000, 0);
// draw
b3.endRecording();
Picture b4; = new Picture();
Canvas c4 = b4.beginRecording(500, height);
c4.translate(-1500, 0);
// draw
b4.endRecording();

(if x < 500) {
    // draw c1
}
... 
```

可能有一种方法只画一次，而不是 4 次，但我只是发布我知道的作品。如果你能找到划分画布的方法，那么你只需要绘制一次。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-16T06:47:48.347

通过绘制整条线得到解决方案，然后计算 Rect 在其上绘制，以隐藏可见部分上的特定部分。

![在此处输入图像描述](../Images/8123549ded36fe40eaff8f9b92c26223.png)

这是为了演示我是如何做到这一点的，我正在绘制整个路径，为了得到它的剪辑，我在它的顶部画了一个矩形到屏幕的正确位置，所以看起来路径正在剪辑。

# java - 使用 ADT 在 Eclipse 上开发 Android 应用程序。停止进程（应用程序）的最快方法？

> ID：13398559
> 
> 赞同：1
> 
> 时间：2012-11-15T13:35:04.170
> 
> 标签：java, android, eclipse, adt

我是 Android 开发的新手。当我在 Java 透视图中运行我的应用程序时，我单击菜单栏上的默认运行按钮。要停止它，我需要单击 DDMS 透视图，单击设备选项卡上名称列表中的应用程序，然后单击停止进程按钮。

所以3点击！

有没有更简单的方法来做到这一点，理想情况下涉及一次点击/动作？

我正在使用带有 Android 4.1 的 Eclipse 3.8.1。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T13:44:58.460

这有帮助吗？

那些发现在视角之间切换以停止程序很乏味的人（就像我一样），您可以通过选择以当前视角查看设备窗口

Windows > 显示视图 > 其他... > Android > 设备

来自这篇文章 -[如何停止在 Eclipse 下运行的程序？](https://stackoverflow.com/questions/4972699/android-how-to-stop-running-program-under-eclipse)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T13:37:57.330

> 有没有更简单的方法来做到这一点，理想情况下涉及一次点击/动作？

至少，您需要指明您希望终止的进程，然后指明您希望终止它。欢迎您在其他视角（例如，Java）中使用 Devices 视图，以节省您转移到 DDMS 视角的时间。

唯一的“单击/操作”解决方案是开发机器上的电源按钮。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T13:47:23.657

当然有。

在您的模拟器中安装其中一个任务杀手（永远不应该使用 IRL）。在您的主屏幕上添加他们的小部件并配置它以在您单击它时终止您的进程。

# compact-framework - 为智能设备复制 logmein.com 行为

> ID：13398563
> 
> 赞同：4
> 
> 时间：2012-11-15T13:35:34.690
> 
> 标签：compact-framework, windows-ce, remote-access

我有几个运行 Windows CE5 的智能设备，我们的应用程序是用 .NETCF 3.5 编写的。智能设备通过集成的 GPRS 调制解调器连接到互联网。我的客户想要远程支持选项，但 VNC 和类似工具似乎无法完成这项工作。我发现 VNC 存在几个问题以使其正常工作。首先，它在智能设备上运行时存在严重的性能问题。第二个问题是互联网提供商有一个防火墙，如果它们不是来自智能设备本身，它会阻止所有传入的请求。因此，我无法启动与智能设备的远程桌面会话，因为请求并非来自智能设备。

我们可以得到自己的 APN，但是它们太贵了，而且对于我们部署的智能设备的数量来说，每月的成本也太高了。如果我们可以将开发成本添加到初始产品成本中，对我们来说更经济，因为我们的客户不喜欢高昂的每月成本，而是预先支付大笔费用。远程支持解决方案还可以让我们最大限度地减少现场支持。

这就是我们或多或少决定推出我们自己的远程桌面解决方案的原因。我们有用于在智能设备上捕获图像的代码，并且只获取自上一个周期以来发生变化的数据。我们需要做一个像logmein.com（不支持WinCE5）这样的通信解决方案，其中智能设备连接到服务器，然后我们可以将数据流式传输到支持人员的客户端。基本上，智能设备会启动与我们服务器的连接，并在服务器请求时开始传送屏幕数据。支持客户端连接到服务器并获取可用流的列表，然后选择一个进行监听。

考虑到我们必须在智能设备上使用 .NETCF 3.5 中的解决方案，有什么建议吗？除了简单的肥皂网络服务，我们的交流经验有限。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T05:22:03.680

既然你在寻求建议，我会建议这个：

不要重新发明。尽可能重复使用。您可以使用 SSH 执行隧道，因此通过智能设备上的 GPRS 建立 SSH 连接（例如，PuTTY 或 plink 的端口，在循环内）；将远程端口转发到本地端口，绑定到 SSH 服务器的本地地址 (127.0.0.1 (sshd):4567 => localhost (smart_device_01):4567)。您的客户端连接到您的 SSH 服务器并访问为每个设备分配的端口。

话虽如此，这可能不是您要寻找的答案。下面 - 您可能正在寻找的答案。

* * *

根据我对 LogMeIn 工作原理的分析，您需要创建一个 HTTPS 或 TLS 服务器，您的智能设备将在其中推送数据。我们称它为您的隧道服务器。

您可能希望生成一个新线程，该线程反复尝试与隧道服务器建立连接（根据您指定的要求，从智能设备到服务器的**出站连接）。**使用像 BEEP/BXXP 这样的协议，您可以封装和多路复用面向消息或面向流的会话。将 BXXP/BEEP 封装到 TLS 中，并通过隧道连接到您的隧道服务器。BEEP 允许您将流多路复用到一个连接上——如果您想要内部 LogMeIn 解决方案的全部功能，您将需要使用类似的东西。

建立连接后，进行新的 BEEP 会话。使用新会话，告诉隧道服务器您的系统标识信息（设备名称、设备身份验证签名）。将心跳数据（定期时间戳）写入此新会话。

设置与您的 BEEP 控制会话接口的回调（或另一个线程）。注意请求服务的消息。当这样的请求进来时，产生所需的线程来从您的自定义远程显示协议中复制数据，并通过同一通道将这些数据推回。

这为您的智能设备程序奠定了基本前提。您可以根据需要为此添加功能，例如，匹配 LMI 的 IT Reach 订阅提供的功能（远程注册表、安全隧道 Telnet、远程文件系统、远程打印、远程声音......你明白了）

我会假设您知道如何正确保护所有这些东西，以便为您的客户端进行身份验证和授权（是否允许用户 foo 访问智能设备栏？）。

在您的隧道服务器上，启动一个服务器套接字（侦听**入站连接**，或从智能设备的角度来看，智能设备**出站连接**）来解复用连接和会话。打开连接后，启动 BEEP 并注册回调/启动线程以等待身份验证/心跳会话。对智能设备执行 AAA 所需的检查——这些设备是否被允许、是否已知、费用多少等。 **您的隧道服务器代表您的智能设备转发数据。** 对于每个 BEEP 会话，在 AAA 过程成功后，为 BEEP 会话附加一个名称（设备名称）；失败时，关闭连接并让 AAA 机制知道（以阻止攻击者）。您的隧道服务器还应该设置与前端交互所需的内容——也就是说，它应该具有与 BEEP 交互的代码，以解复用远程显示数据的流。

在您的前端服务器（可以是与隧道服务器相同的框）上，安装 AAA 例程——检查用户是否已知、是否允许用户、应向用户收取多少费用等。一旦所有检查通过，建立从前端服务器到隧道服务器的安全连接。获取隧道服务器知道允许用户访问的设备名称。此时，您应该能够从隧道服务器获取基于设备名称的“纯文本”流。将此流转发回用户（例如，通过 TLS，或再次通过 TLS 上的 BEEP），或发送远程显示客户端所需的配置，以使用所需参数连接到隧道服务器，以访问远程显示协议的流。

# language-agnostic - 通用代码重复检测工具

> ID：13398565
> 
> 赞同：33
> 
> 时间：2012-11-15T13:35:47.800
> 
> 标签：language-agnostic, duplicates, code-analysis, static-analysis, code-duplication

我正在寻找一种与语言无关的代码复制工具。很容易找到特定于语言的代码复制工具（用于 Java、C、PHP 等），但我想以自定义语法对模板运行一些代码复制分析。

我不关心语法的高级解析，只是基于直线的原始字符串比较就可以了。空格不敏感匹配将是一个加号，但不是必需的。（我自己规范化/消除空格并不难。）

有谁知道可以（误）用于此类事情的工具？

谢谢。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-15T13:40:31.543

看看[Simian](http://www.harukizaemon.com/simian/)，你可以将它用于 Java、C#、C、C++、COBOL、Ruby、JSP、ASP、HTML、XML、Visual Basic、Groovy 源代码甚至纯文本文件。

[另外，这里](https://stackoverflow.com/questions/191614/how-to-detect-code-duplication-during-development)有一个类似的问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-06-10T14:38:40.577

你也可以看看 Sonar [http://www.sonarsource.org/](http://www.sonarsource.org/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-11-06T06:47:12.420

看看这个[https://siderlabs.com/](https://siderlabs.com/)

目前支持 C、C++、Cuda 等 Python、PHP、Java、Javascript 即将推出

# javascript - 如何使用 Javascript 创建拓扑图

> ID：13398572
> 
> 赞同：1
> 
> 时间：2012-11-15T13:36:05.477
> 
> 标签：javascript, extjs

我需要创建一个拓扑（网络）图，它将与我的`extJS`应用程序集成。有没有人熟悉一些带有 API 的 Javascript 包来创建这样的图表，注意：在图表中定位节点、缩放和拖动节点？

此外，我想为图中的节点使用一些自定义图标。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T14:26:44.187

您可能会查看 yEd/yFiles ( [https://www.yworks.com/products/yed](https://www.yworks.com/products/yed) ) 它是 Java，而不是 JavaScript，但它肯定会作为小程序运行，因为它是从他们的站点作为演示执行的。如果这是为了将 Intranet 嵌入到 ExtJS 面板的中间，可能会起作用。否则，如果您打算自己编写代码，我建议您阅读并重新阅读 ExtJS 的拖放 API 并查看它们的源代码。同样来自谷歌搜索：

[https://github.com/jgraph](https://github.com/jgraph) （商业）

[https://www.jointjs.com/](https://www.jointjs.com/) （麻省理工学院许可证）

# android - Android 字符串哈希码（按设备）

> ID：13398573
> 
> 赞同：1
> 
> 时间：2012-11-15T13:36:08.597
> 
> 标签：android, hashcode

是否可以从不同设备上的相同字符串中获取不同的哈希码？（我只有一个设备，所以我无法测试它）或者 android sdk 从不同设备上的相同字符串获取相同的 int 值？（我已经有一个关于 .net compact fw 的案例，并且 .net fw 为相同的字符串返回不同的哈希码）

例如：

```
int hash = "Enter text".hashCode();

hash == 123445564 on Samsung S3
hash == -16644335 on HTC Desire 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T13:41:50.290

只要哈希函数保持不变（据我所知，它在不同的 SDK 版本中保持不变），结果应该是相同的。

但是，如果您从中获取字符串`strings.xml`并且您有字符串的本地化版本，那么您可能会获得相同的不同哈希值`getString(R.string.mystring)`

问候，路易斯

# internet-explorer-8 - Disqus 使 IE8 进入兼容模式“硬断言”。有什么修复吗？

> ID：13398574
> 
> 赞同：6
> 
> 时间：2012-11-15T13:36:11.567
> 
> 标签：internet-explorer-8, disqus, ie8-compatibility-mode

经过测试，我发现 Disqus 使 IE8 进入兼容模式“硬断言”。当我删除它时，它会停止行为并保持在标准模式。由于 IE8 是 Windows XP 的潮流，IE8 将在一段时间内出现。值得修复。有人知道解决这个问题吗？我已经联系了 Disqus 支持。我不希望快速回复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T10:26:53.710

如果您不想使用 CC 来针对 IE8 Disqus，只需说...

```
#disqus_thread {
display:none; /* IE8 */
}
:root #disqus_thread {
display:block;
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-15T04:27:14.177

事实并非如此。删除 css 删除问题。

# css - CSS 过度定位元素

> ID：13398577
> 
> 赞同：0
> 
> 时间：2012-11-15T13:36:26.193
> 
> 标签：css, html, positioning

我有这个代码：

```
<div class="thumbnail">
    <div class="image_thumbnail">
        <div class="category"></div>
        <div class="category2"></div>
    </div>
    <div class="info_thumbnail"></div>
    <div class="footer_thumbnail">
        <div class="stars_empty"></div>
    <img class="views" src="images/views.png">10
    </div>
</div> 
```

我如何在 css 上工作才能产生这样的效果？绿色`div`应该是类别`div`

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T13:57:35.980

```
​&lt;div id="container">
    <div class="box"></div>
   <div class="tab"></div>
</div>​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​

​#container{
position:relative;
}

​.​box{
position:relative;
left:10px;
top:10px;
height:150px;
width:100px;
border-radius:8px;
border:2px solid #666;
background-color:#DDD;
z-index:5;
}

.tab {
position:absolute;
left:105px;
top:35px;
width:25px;
height:40px;
background-color:green;
border-radius:5px;
box-shadow: 3px 3px 3px #888;
} 
```

​演示：http: [//jsfiddle.net/Q7RkR/](http://jsfiddle.net/Q7RkR/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T13:39:13.547

你想做什么不是很清楚。无论如何，要处理过度位置，您应该为每个缩略图都有一个主容器；设置位置：相对于主容器，设置位置：绝对每个子层元素。

# visual-studio-2010 - 什么是不在错误分支中工作的好方法？

> ID：13398583
> 
> 赞同：0
> 
> 时间：2012-11-15T13:36:42.040
> 
> 标签：visual-studio-2010, version-control

因此，您的源代码有 3 个分支（Prod、Test 和 Dev）。日常的业务让你经常在同一天开2家分店。

**乍一看，您发现了哪些技巧来区分您的不同配置？**

我想有一些方法可以将视觉线索链接到您当前正在使用的版本......

*注意：这个问题以 Visual Studio 2010 为中心，但也许你的技巧是跨 IDE，所以也许任何人都可以回答。*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T15:09:11.230

如果您遇到问题并最终在“错误的分支”上工作，请使用不同的工作区来帮助[了解 Team Foundation Server 工作区和工作文件夹](http://msdn.microsoft.com/en-us/library/gg490753%28v=vs.100%29.aspx)

# javascript - 无法将多个 AdSense 代码添加到一页

> ID：13398584
> 
> 赞同：3
> 
> 时间：2012-11-15T13:36:44.313
> 
> 标签：javascript, adsense

我正在尝试将 2 个 adsense 代码添加到一页。当我这样做时，只显示一个（第一个定义的）并且页面似乎在无限加载。

这是带有示例插槽和客户端 ID 的代码。

```
<body>
    <script type="text/javascript"><!--
        google_ad_client = "ca-pub-xxxxxxxxx"; 
        google_ad_slot = 111111111;
        google_ad_width = 160;
        google_ad_height = 600;
        //-->
    </script>
    <script type="text/javascript"
            src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
    </script>
    <script type="text/javascript"><!--
        google_ad_client = "ca-pub-xxxxxxxxx"; //the same like the first one client
        google_ad_slot = 222222222;
        google_ad_width = 336;
        google_ad_height = 280;
        //-->
    </script>
    <script type="text/javascript"
            src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
    </script>
</body> 
```

如果我删除这些 adSense 代码之一，它就会起作用。我怎样才能使它与这两个代码一起工作？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-16T11:17:23.337

终于经过近 2 小时的谷歌搜索，我想通了。我唯一要做的就是为**google_ad_slot 变量添加引号**（哦，我的...）。所以工作代码如下所示：

```
<body>
<script type="text/javascript"><!--
    google_ad_client = "ca-pub-xxxxxxxxx"; 
    google_ad_slot = "111111111"; // see the quotes
    google_ad_width = 160;
    google_ad_height = 600;
    //-->
</script>
<script type="text/javascript"
        src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
<script type="text/javascript"><!--
    google_ad_client = "ca-pub-xxxxxxxxx"; //the same like the first one client
    google_ad_slot = "222222222";
    google_ad_width = 336;
    google_ad_height = 280;
    //-->
</script>
<script type="text/javascript"
        src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script> 
```

如果只有一个 adSense 代码，则作为整数的广告位可以正常工作。如果**添加另一个，则必须将所有插槽定义为 strings**。

干杯!

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T13:45:13.723

首先，不需要两次 show-ad.js 文件。其次，show-ad.js 似乎查看了一些设置的全局变量

```
 google_ad_client = "ca-pub-xxxxxxxxx"; 
    google_ad_slot = 111111111;
    google_ad_width = 160;
    google_ad_height = 600; 
```

当您第二次定义它们时，第一个值将被删除，并且仅显示第一个值，因为第二次加载脚本会干扰第一次。

# unit-testing - CommonDomain - 如何对聚合根进行单元测试

> ID：13398588
> 
> 赞同：2
> 
> 时间：2012-11-15T13:36:51.993
> 
> 标签：unit-testing, cqrs, event-sourcing, neventstore, commondomain

我有一个使用 Jonathan Oliver 的**CommonDomain**和**EventStore**的小系统。

***如何对聚合根进行单元测试以验证是否引发了正确的事件？***

考虑以下聚合根：

```
public class Subscriber : AggregateBase
{
        private Subscriber(Guid id)
        {
            this.Id = id;
        }

        private Subscriber(Guid id, string email, DateTimeOffset registeredDate)
            : this(id)
        {
            this.RaiseEvent(new NewSubscriberRegistered(this.Id, email, registeredDate));
        }

        public string Email{ get; private set; }
        public DateTimeOffset RegisteredDate { get; private set; }

        public static Subscriber Create(Guid id, string email, DateTimeOffset registeredDate)
        {
            return new Subscriber(id, email, registeredDate);
        }

        private void Apply(NewSubscriberRegistered @event)
        {
            this.Email = @event.Email;
            this.RegisteredDate = @event.RegisteredDate;
        }
} 
```

我想写一个以下测试：

```
 // Arrange
    var id = Guid.NewGuid();
    var email = "test@thelightfull.com";
    var registeredDate = DateTimeOffset.Now;

    // Act
    var subscriber = Subscriber.Create(id, email, registeredDate);

    // Assert
    var eventsRaised = subscriber.GetEvents();  <---- How to get the events?
    // Assert that NewSubscriberRegistered event was raised with valid data 
```

我可以使用内存持久性和同步调度程序设置整个 EventStore，连接模拟事件处理程序并存储任何已发布的事件以进行验证，但这似乎有点矫枉过正。

CommonDomain中有一个接口`IRouteEvents`。看起来我可以模拟它以直接从中获取事件，`AggregateBase`但我实际上如何将它传递给我的`Subscriber`班级？我不想用与测试相关的代码“污染”我的领域。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-15T19:00:30.503

我发现`AggregateBase`显式实现了`IAggregate`接口，它公开了`ICollection GetUncommittedEvents();`方法。

所以单元测试看起来像这样：

`var eventsRaised = ((IAggregate)subscriber).GetUncommittedEvents();`

并且不需要对 EventStore 的依赖。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-03-07T17:37:06.270

我只是用我在各个地方收集的代码（[StackOverflow](https://stackoverflow.com/a/15826944/32117)、[Documently](https://github.com/haf/Documently)、[Greg Young's Skillcast ）推了](https://skillsmatter.com/skillscasts/1947-talk-from-greg-young)[NEventStoreExample](https://github.com/luizdamim/NEventStoreExample)。

这是一个非常基本的实现`NEventStore`，用于`CommonDomain`重建聚合状态和一个`EventSpecification`基测试类来测试聚合行为。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-19T00:42:58.217

这是一个相当简单的测试夹具，它使用 NUnit 和 ApprovalTests 来测试 CommonDomain 聚合根。（不需要 ApprovalTests - 只是让生活变得简单）。

假设是 1) 固定装置被实例化为一个聚合（可能已经设置为某个状态）以及一系列要应用的“给定”事件。2) 然后测试将调用特定的命令处理程序作为 TestCommand 方法的一部分 - 当前期望是一个返回被处理命令的 Func 3) 聚合快照、命令和事件都包含“丰富”的 ToString 方法

然后，TestCommand 方法将聚合中的预期交互与批准的交互进行比较。

```
 public class DomainTestFixture<T>
        where T : AggregateBase
    {
        private readonly T _agg;
        private readonly StringBuilder _outputSb = new StringBuilder();

        public DomainTestFixture(T agg, List<object> giveEvents)
        {
            _agg = agg;
            _outputSb.AppendLine(string.Format("Given a {0}:", agg.GetType().Name));

            giveEvents.ForEach(x => ((IAggregate) _agg).ApplyEvent(x));

            _outputSb.AppendLine(
                giveEvents.Count == 0
                    ? string.Format("with no previously applied events.")
                    : string.Format("with previously applied events:")
                );
            giveEvents.ForEach(x => _outputSb.AppendLine(string.Format(" - {0}", x)));

            ((IAggregate) _agg).ClearUncommittedEvents();

            var snapshot = ((IAggregate) _agg).GetSnapshot();
            _outputSb.AppendLine(string.Format("which results in the state: {0}", snapshot));
        }

        public void TestCommand(Func<T, object> action)
        {
            var cmd = action.Invoke(_agg);
            _outputSb.AppendLine(string.Format("When handling the command: {0}", cmd));

            _outputSb.AppendLine(string.Format("Then the {0} reacts ", _agg.GetType().Name));
            var raisedEvents = ((IAggregate) _agg).GetUncommittedEvents().Cast<object>().ToList();

            _outputSb.AppendLine(
                raisedEvents.Count == 0
                    ? string.Format("with no raised events")
                    : string.Format("with the following raised events:")
                );

            raisedEvents.ForEach(x => _outputSb.AppendLine(string.Format(" - {0}", x)));

            var snapshot = ((IAggregate) _agg).GetSnapshot();
            var typ = snapshot.GetType();

            _outputSb.AppendLine(string.Format("and results in the state: {0}", snapshot));

            Approvals.Verify(_outputSb.ToString());

            Assert.Pass(_outputSb.ToString());
        }
    } 
```

和一个示例用法

```
 [Test]
    public void Test_Some_Aggregate_Handle_Command()
    {
        var aggId = Guid.Empty;
        var tester = new DomainTestFixture<PartAggregate>(
            new PartAggregate(aggId, null),
            new List<object>()
            {
                new PartOrdered(),
                new PartReceived()
            }
            );
        tester.TestCommand(
            (agg) =>
                {
                    var cmd = new RejectPart();
                    agg.Handle(cmd);
                    return cmd;
                });
    } 
```

# jmeter - 使用 JMeter 为每个测试片段生成自己的日志文件

> ID：13398590
> 
> 赞同：0
> 
> 时间：2012-11-15T13:36:55.513
> 
> 标签：jmeter, performance-testing

我正在做性能测试，我的测试由几个不同的测试片段组成。例如，一个片段处理登录，几个不同的片段，每个片段在应用程序的不同部分中导航，等等。

问题是我需要来自每个不同片段的日志以进行报告。管理层有兴趣看到相同功能之间随时间的变化。

JMeter 的“简单数据写入器”是否能够生成多个日志文件？或者实现这种功能的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T11:56:10.663

好的，我将尝试回答，因为评论没有回复：

根据您组织“测试片段”的方式，您可以为每个片段附加单独的数据写入，并使用不同的文件名记录到不同的日志中。例如，如果您有一个线程组模拟一个用例，另一个模拟另一个用例，您将向每个线程组添加一个简单数据写入器并使用不同的文件名\路径，以便您了解生成的日志文件的作用。您可以对 Samplers 和 Beanshell 脚本执行相同的操作。

JMeter 文档中有更多信息：

[http://jmeter.apache.org/usermanual/component_reference.html#Simple_Data_Writer](http://jmeter.apache.org/usermanual/component_reference.html#Simple_Data_Writer)

希望这会有所帮助，但如果没有更具体的例子，很难更具体。

编辑：我现在意识到测试片段是 JMeter 中的特定控制器元素。只需为每个片段添加一个简单数据写入器，每个片段都会生成一个日志文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-17T16:56:29.560

关于以下方法的一个警告。
之前我发现脚本中有很多数据编写器，因为 Jmeter 及其各种组件都会在测试运行时对您的系统施加很小的负载。
如果你有很多数据编写者，你可能会引入足够多的额外负载来弄乱你自己的结果。
我的方法是在构建测试脚本时包含它们，然后在实际运行测试时禁用它们。
如果需要，您始终可以有选择地重新启用它们，以跟踪错误和问题。

# python - 使用 CherryPy 的“致命 Python 错误：无法创建 autoTLSkey 映射”

> ID：13398594
> 
> 赞同：5
> 
> 时间：2012-11-15T13:37:01.070
> 
> 标签：python, cherrypy

我有一个 CherryPy webapp，它曾经在 Ubuntu Lucid (Python 2.6.5) 上运行良好，但现在在 Ubuntu Precise (Python 2.7.3) 上它会在启动时退出，并显示以下内容：

```
Listening for SIGHUP.
Listening for SIGTERM.
Listening for SIGUSR1.
Bus STARTING
Started monitor thread '_TimeoutMonitor'.
Fatal Python error: Couldn't create autoTLSkey mapping
Aborted (core dumped) 
```

奇怪的是，这*确实*可以在另一台装有 Ubuntu Precise 的机器上工作，所以我猜这是一个配置问题。[看起来](http://groups.google.com/group/modwsgi/browse_thread/thread/0d6f929486f4eeb1/5af5795aed10a2f6?show_docid=5af5795aed10a2f6)这与线程有关，但我无法弄清楚我错过了什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T13:40:35.133

我发现了一些看起来像罪魁祸首的东西：我有一个配置参数，在启动时限制 webapp 内存使用

```
resource.setrlimit(resource.RLIMIT_AS, (megs * 1048576L, -1L)) 
```

如果我删除呼叫或将“megs”设置为足够高的值（在我的测试中为 1100），错误就会消失。

# facebook - 嵌入 facebook 群组供稿

> ID：13398596
> 
> 赞同：0
> 
> 时间：2012-11-15T13:37:17.437
> 
> 标签：facebook, api, feed, facebook-group

我正在尝试将 Facebook 群组的提要嵌入网页中。按照 API 参考，我希望在请求“提要”时得到这个

我在 Graph API explorer 上试过了，但是提要是空的？ [http://developers.facebook.com/tools/explorer?method=GET&path=40147298084%3Ffields%3Dfeed](http://developers.facebook.com/tools/explorer?method=GET&path=40147298084%3Ffields%3Dfeed)

任何人都可以指导我如何从 facebook 组获取提要，顺便说一句，这是一个开放组。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T17:22:36.273

这可能是权限问题。确保您传递了一个有效`access_token`的令牌，并且该令牌已通过身份验证以查看您要查看的内容。

它有时会让人绊倒，但重要的是要记住，即使一段内容是完全公开的，在某些情况下你需要一个令牌才能查看它。

# c - 如何在 Visual Studio 2012 中创建 ANSI C 文件？

> ID：13398602
> 
> 赞同：3
> 
> 时间：2012-11-15T13:37:26.277
> 
> 标签：c, visual-studio

就像标题中一样 - 如何在 Visual Studio 2012 中创建单个 ANSI C 源文件？我在 file->new file 选项中没有看到任何合适的 ansi c 文件选择。

还有一件事 - 有没有编译和运行的捷径？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-15T14:16:45.643

没有直接的方法可以做你想做的事（即使在旧的 Visual Studio 版本中）。C++ 源文件通常具有相同的目的，但使用纯 C 文件当然是有正当理由的。不用担心，我什至不会争论，因为我仍然必须维护几个 C 代码库，这是有充分理由的（尽管并非在所有地方都出于相同的原因）。

例如，如果您确实需要多次执行此操作并且无法使用某些工具从现有源文件构建项目，则可以这样做：

1.  以管理员身份打开文件管理器（特权用户）
2.  在文件夹`C:\Program Files (x86)\Microsoft Visual Studio 11.0\VC\vcprojectitems`中获取现有`newc++file.cpp`的副本并命名副本`newcfile.c`（您也可以自定义此“骨架文件”）。
3.  现在找到文件并添加我在下面列出的行`NewItems.vsdir`。`C:\Program Files (x86)\Microsoft Visual Studio 11.0\VC\VCNewItems`
4.  启动/重新启动 Visual Studio，您应该会在 Visual C++ 类别下看到它

完毕。

```
..\VCProjectItems\NewCFile.c|{1B027A40-8F43-11D0-8D11-00A0C91BC942}|C files (.c)|10|Creates a file containing C source code|{1B027A40-8F43-11D0-8D11-00A0C91BC942}|9031|4096|#1077 
```

笔记：

*   您仍然会看到带有 的图标`++`，但那是化妆品。它必须是`#<number>`定义它的资源标识符之一。
*   GUID 指向包含资源的二进制文件。如果您不需要它们，据我所知，将字段留空（但必须是一个空格）是合法的。GUID，您填写 find（注册表搜索）指向`.\VC\vcpackages\vcpkg.dll`...，因此您可能可以浏览那里的资源，如果您愿意，可以找到更合适的东西。
*   原来 9031 也是一个资源 ID。这些项目可能`#<number>`特别指的是字符串资源。您可以选择 9033 作为您的图标（更中性）。[IconsExt](http://www.nirsoft.net/utils/iconsext.html)可以帮助找到合适的资源。
*   显然，您*可能*需要调整路径名，具体取决于您的语言环境。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T13:56:38.827

创建一个 C++ 文件，然后给它一个 .c 扩展名。在至少某些版本的 MSVC 编译器的 Windows 上，这将导致它使用 C 编译。

这是 ANSI C 的某个版本——你不会得到过去十年左右现代 C 实现的任何细节。

坦率地说，我会使用 C++ 和 C99 的任何子集，你可以使用，并使用 C++ 编译器。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-15T13:52:34.523

您可以在创建 C 源文件之前构建一个项目，这似乎是 MSVS 系列的惯例。希望对您有所帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-15T13:56:26.660

[此](http://support.microsoft.com/kb/829488/en-us)MS Support 链接包含对您的问题有用的信息；不幸的是，我不确定这是否适用于新的 VS 2012。

让我知道这是否解决了！再见！

# iphone - 在推送视图控制器后将数组添加到 NSMutablearray

> ID：13398604
> 
> 赞同：-1
> 
> 时间：2012-11-15T13:37:36.357
> 
> 标签：iphone, ios, xcode, nsarray

我有：

```
NSMutableArray *arr1 = [NSMutableArray arrayWithObjects:[customArray objectAtIndex:0], [customArray objectAtIndex:1], nil]; 
```

我需要 otherArray 在每次推送后收集 arr1 数组。所以 otherArray 将包含一些 arr1 数组。我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T14:16:33.570

你问什么不清楚？下次清楚。因为你的休闲是解决方案之一。

试试下面的例子

这是我的 FirstViewController.h

```
#import <UIKit/UIKit.h>
#import "SecondViewController.h"

@interface FirstViewController : UIViewController
{

    NSArray *first_Array;
}
-(IBAction)nextViewController:(id)sender;
@end

This is my FirstViewController.m .Call nextViewcontroller method with a button

#import "ViewController.h"

@interface ViewController ()

@end

@implementation ViewController

- (void)viewDidLoad
{
    [super viewDidLoad];
first_Array=[[NSArray alloc] initWithObjects:@"one",@"two",@"three",@"four",@"five",@"six",@"seven",@"eight",@"nine",@"ten", nil];

}
-(IBAction)nextViewController:(id)sender
{
    SecondViewController *obj=[[SecondViewController alloc] initWithNibName:@"SecondViewController" bundle:nil];
    [self.navigationController pushViewController:obj animated:YES];
    [obj receivingArrayFromFirstViewController:first_Array];

}
- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

@end

This is my SecondViewController.h

#import <UIKit/UIKit.h>

@interface SecondViewController : UIViewController
{

}
-(void)receivingArrayFromFirstViewController:(NSArray*)array;

@end

This is my SecondViewController.m

#import "SecondViewController.h"

@interface SecondViewController ()

@end

@implementation SecondViewController

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view from its nib.
}
-(void)receivingArrayFromFirstViewController:(NSArray*)array
{
    NSMutableArray *arr=[NSMutableArray arrayWithArray:array];
    NSLog(@"The received array %@",arr);
}
- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

@end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T13:43:54.157

```
NSMutableArray *otherArray=[NSMutableArray array]; 
```

每次推送后：

```
[otherArray addObject:[NSMutableArray arrayWithArray:arr1]]; 
```

# magento - 使用magento是否可以按产品表运费？

> ID：13398605
> 
> 赞同：0
> 
> 时间：2012-11-15T13:37:36.800
> 
> 标签：magento, product

我找到了它的扩展，但它的成本太高......任何替代或修改可能吗？

[http://www.magentocommerce.com/magento-connect/webshopapps/extension/1357/webshopapps-product-matrix-shipping](http://www.magentocommerce.com/magento-connect/webshopapps/extension/1357/webshopapps-product-matrix-shipping)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T13:42:19.667

你可以编写一个自定义的运输方式模块（看看这里[http://inchoo.net/ecommerce/magento/custom-shipping-method-in-magento](http://inchoo.net/ecommerce/magento/custom-shipping-method-in-magento)）但是花在它上面的时间可能很重要（Magento 使用非常先进的 MVC范式）并购买它可能会花很多钱

# android - 未为 Drive.Builder Android 类型定义方法 setJsonHttpRequestInitializer

> ID：13398607
> 
> 赞同：3
> 
> 时间：2012-11-15T13:37:38.683
> 
> 标签：android, google-drive-api, google-api-java-client

我正在创建一个在 Android 上使用 Google Drive 的应用程序。

我在互联网上搜索了一些示例，但它们都是相同的。我收到以下错误：

```
Object Drive.Builder does not have method setJsonHttpRequestInitializer. 
```

我已经用谷歌驱动 API V1 和 V2 进行了测试，但没有运气。

问题出在哪里？

资源：

```
private Drive getDriveService(String accountName) {

   HttpTransport ht = AndroidHttp.newCompatibleTransport();                     
   JacksonFactory jf = new JacksonFactory();          
   Credential credential = new Credential(BearerToken.authorizationHeaderAccessMethod()).setAccessToken(accountName);           

        Drive.Builder b = new Drive.Builder(ht, jf, null);
        b.setJsonHttpRequestInitializer(new JsonHttpRequestInitializer() {

            @Override
            public void initialize(JsonHttpRequest request) throws IOException {
                DriveRequest driveRequest = (DriveRequest) request;
                driveRequest.setPrettyPrint(true);
                driveRequest.setOauthToken(accountName);
                driveRequest.setKey(API_KEY);
            }
        });
        return b.build();
} 
```

如果使用 google-api-java-client-1.12.0-beta 发现 setJsonHttpRequestInitializer 方法未定义

下载并导入 google-api-java-client-1.11.0-beta

但现在得到：使用客户端 ID 安装应用程序：客户端 ID。

```
com.google.api.client.http.HttpResponseException: 403 Forbidden
 {
  "error": {
   "errors": [
    {
     "domain": "usageLimits",
     "reason": "accessNotConfigured",
     "message": "Access Not Configured"
    }
   ],
   "code": 403,
   "message": "Access Not Configured"
  }
 } 
```

使用简单 API 访问：API 密钥

```
Exceptioncom.google.api.client.googleapis.json.GoogleJsonResponseException: 401 Unauthorized
{
  "code" : 401,
  "errors" : [ {
    "domain" : "global",
    "location" : "Authorization",
    "locationType" : "header",
    "message" : "Invalid Credentials",
    "reason" : "authError"
  } ],
  "message" : "Invalid Credentials"
} 
```

以下是项目来源：

[http://www.sendspace.com/file/an6xxy](http://www.sendspace.com/file/an6xxy)

出了什么问题，也许是证书指纹（SHA1）？

尝试谷歌的 calendar-android-sample。

看起来我在 google api 控制台中注册应用程序有问题。

在哪里放置我在样本中获得的客户 ID？

在 android 中以调试模式运行示例后，得到“访问未配置”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T17:01:46.527

在 Android 上，最佳做法是为 OAuth 2.0 使用 Google Play 服务。从库的 1.12.0-beta 版开始，您应该使用[GoogleAccountCredential](http://javadoc.google-api-java-client.googlecode.com/hg/1.12.0-beta/com/google/api/client/googleapis/extensions/android/gms/auth/GoogleAccountCredential.html)来完成此操作。

请使用我编写的示例[calendar-android-sample](http://samples.google-api-java-client.googlecode.com/hg/calendar-android-sample/instructions.html)作为 Android 上 OAuth 2.0 最佳实践的指南。请仔细阅读说明。请注意，您必须首先在[Google API 控制台](https://code.google.com/apis/console/)中注册您的应用程序才能使其正常工作。示例中的代码片段：

```
@Override
public void onCreate(Bundle savedInstanceState) {
  super.onCreate(savedInstanceState);
  ...
  // Google Accounts
  credential = GoogleAccountCredential.usingOAuth2(this, CalendarScopes.CALENDAR);
  SharedPreferences settings = getPreferences(Context.MODE_PRIVATE);
  credential.setSelectedAccountName(settings.getString(PREF_ACCOUNT_NAME, null));
  // Calendar client
  client = new com.google.api.services.calendar.Calendar.Builder(
      transport, jsonFactory, credential).setApplicationName("Google-CalendarAndroidSample/1.0")
      .build();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T00:35:15.533

您可能使用的是较旧版本的 Java 库。

无论如何，您可以将`GoogleCredential`对象的实例用作`HttpRequestInitializer`，如以下代码所示：

```
private Drive getDriveService(String token) {
  Credential credential = new GoogleCredential().setAccessToken(token);
  Drive.Builder b = new Drive.Builder(
      AndroidHttp.newCompatibleTransport(), new JacksonFactory(), credential)
      .setHttpRequestInitializer(credential);
  return b.build();
} 
```

# jquery - jQuery 正在删除元素

> ID：13398608
> 
> 赞同：3
> 
> 时间：2012-11-15T13:37:40.490
> 
> 标签：jquery, html-table

我遇到了 jQuery 的问题。我需要复制一些代码，附加在其他地方。

我喜欢复制的来源是这样的：

```
<div id="copyCode" style="display: none">
    <div class="ofPagedataTable">
        <tr class="page copy">
            <td class="id"><input type="text" /></td>
            <td class="sprache"><input type="text" /></td>
            <td class="description"><input type="text" /></td>
            <td class="title"><input type="text" /></td>
            <td class="keywords"><input type="text" /></td>
        </tr>
    </div>
</div> 
```

我正在使用的 jQuery 是这样的：

```
$('.addPageToPagedata').click(function(){
    html = $("#copyCode").children(".ofPagedataTable").html();
    target = $('.pagedata tbody').children(':last');    
    $(html).appendTo(target);
    }); 
```

这是一种工作，但jQuery正在拿走`<tr>`和`<td>`元素，它只是附加：

```
<input type="text">
<input type="text">
<input type="text">
<input type="text">
<input type="text"> 
```

我不知道该怎么办。如果有人可以给我一个如何解决这个问题的建议，那就太好了。

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-15T13:40:10.127

我不认为 jQuery 删除任何东西。您的 html 无效。你不能把`td`and放在`tr`这里。您的浏览器只会自行删除这些元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T13:41:34.617

尝试包装`tr`in`<table>`标签，以使 html 有效。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-15T13:41:51.220

这不起作用，因为您的标记无效 -`tr`只能在`table`标签内。当浏览器看到您的无效标记时，它会尝试自动修复它，因此它只是删除所有您的`tr`和`td`元素。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-15T13:45:45.040

jquery 是基于标签 tbody 工作的，但是你这里没有表。如果没有表， tr 和 td 没有任何意义，因为基本上你是在尝试对列和行进行操作，而它们甚至不存在。因此，将它们包装在一张桌子上。只有这样才能奏效。

# post - 在 Symfony2 中访问多个同名请求参数

> ID：13398609
> 
> 赞同：2
> 
> 时间：2012-11-15T13:37:40.450
> 
> 标签：post, symfony, request

我将以下值发布到 Symfony2 网页：

> code=-1&tracking=SRG12891283&description=错误&code=0&tracking=SRG19991283&description=标签打印。

请注意重复项 - 可能有任意数量的代码/跟踪/描述“对”。

在 Symfony 中，当我执行以下操作时，它只输出最后一组值：

```
foreach($request->request->all() as $key => $val){
    $this->m_logger->debug($key . ' - ' .$val);
} 
```

IE

> 代码 = 0 跟踪 = SRG19991283 描述 = 打印标签。

我假设这是因为请求类将参数存储在键/值对中，因此后续参数只是覆盖了以前的参数。

知道如何访问所有这些值吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T14:43:33.147

$_REQUEST、$_POST 和 $_GET 数组中的 PHP 将用变量的最后定义覆盖重复的变量名称。结果，Symfony2 表现出相同的行为。

例如给出代码。

```
<?php
echo "<pre>";
var_dump($_GET);
var_dump($_POST);
var_dump($_REQUEST);
echo "</pre>";
?>
<form method="post">

<input type="text" name="test1" value="1"/>
<input type="text" name="test2" value="2"/>
<input type="text" name="test2" value="3"/>
<input type="submit"/>
</form> 
```

提交表单后，输出为

```
array(0) {
}
array(2) {
  ["test1"]=>
  string(1) "1"
  ["test2"]=>
  string(1) "3"
}
array(2) {
  ["test1"]=>
  string(1) "1"
  ["test2"]=>
  string(1) "3"
} 
```

使用查询字符串调用页面，`?test1=1&test2=2&test2=3`结果为：

```
array(2) {
  ["test1"]=>
  string(1) "1"
  ["test2"]=>
  string(1) "3"
}
array(0) {
}
array(2) {
  ["test1"]=>
  string(1) "1"
  ["test2"]=>
  string(1) "3"
} 
```

自己解决此问题的唯一方法是将变量作为查询字符串 (GET) 传递，在这种情况下，您可以检索查询字符串并自己解析它。如果您正在处理用户输入，这可能不合适。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-10T15:30:43.210

如果你在参数中使用“类数组”语法，Symfony 应该做你想做的事。

例如，考虑一个查询字符串`?code[0]=a&code[1]=b&code[2]=c`。

`$request->query->get('code');`在 Symfony 中会返回一个像这样的数组： `[ 0 => "a", 1 => "b", 2 => "c", ]`

...我认为这是你想要的？（尽管这是一个更简单的例子。）

# php - fpdf - 在移动设备上查看不起作用

> ID：13398621
> 
> 赞同：2
> 
> 时间：2012-11-15T13:38:23.943
> 
> 标签：php, pdf, mobile, fpdf

我用 fpdf 在 php 中创建 pdf 文件。到目前为止一切正常，但无法在移动设备上查看这些 pdf。

android 上的 acrobat 阅读器正在关闭并显示文件已损坏的消息。一位客户知道，在 iPad 上打开 pdf 文件没有任何反应……我已经尝试创建一个空的 pdf，但行为相同。在带有 Acrobat Reader 和 foxit 的 Windows 上，一切正常。

我需要一些想法如何找到原因。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T16:29:00.247

devOp 在他的评论[link](https://docs.google.com/file/d/0Bx-FBWhqcXXBdk5SVU41UzR4dE0/edit)中提供的文件实际上是一个损坏的 PDF，因为它在强制性 %PDF 行之前以一些垃圾开头（参见 PDF 规范[ISO 32000-1:2008](http://www.adobe.com/content/dam/Adobe/en/devnet/acrobat/pdfs/PDF32000_2008.pdf)）：

```
524.41 102.05 48.19 -11.34 re S
%PDF-1.3
3 0 obj
<</Type /Page 
[...]
>>
startxref
556
%%EOF 
```

由于“524.41 102.05 48.19 -11.34 re S”这一行，任何 PDF 查看器都可能将文件视为损坏而拒绝。但是，一些查看器并不要求 %PDF 标记是文档的第一行，而是允许在其前面放置有限数量的垃圾。例如，Windows 上的 Acrobat Reader 仅要求标记位于前一千字节左右。

顺便说一句，垃圾线实际上看起来像一个用于定义矩形的 PDF 运算符（仅在流对象内部有效，不像这里那样独立存在）。在正确打开或创建 PDF 对象之前，可能有一些命令在您的代码中定义了一个矩形？

# wordpress - CakePHP 重定向问题

> ID：13398622
> 
> 赞同：0
> 
> 时间：2012-11-15T13:38:24.407
> 
> 标签：wordpress, .htaccess, cakephp, cakephp-1.3, cakephp-2.0

我用 CakePHP 建立了一个网站，它工作得很好。现在我在文件夹中放置了另一个`wordpress`构建的博客。`app/webroot`

认为：

`example.com`(cakephp 网站)

并且需要`example.com/myblog`

我将所有文件都放在了`app/webroot/myblog`. 但是当我第二次点击网址时，它会将我重定向到

`example.com/app/webroot/myblog`有`404 NOT FOUND`错误。

现在我能做些什么来摆脱这个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T13:07:22.890

请把它放在主根目录/.htaccess
RewriteCond %{REQUEST_URI} !^/blog.*
RewriteCond %{REQUEST_URI} !-f
RewriteRule ^$ app/webroot/ [L]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T14:48:07.660

您可以将其添加到您的 htaccess 中：（确保这在任何其他重写规则之前）

```
RewriteEngine on
RewriteBase /
RewriteRule ^myblog(/.*)?$ - [L] 
```

# android - Android：LocationManager 构造函数的循环器

> ID：13398626
> 
> 赞同：2
> 
> 时间：2012-11-15T13:38:34.793
> 
> 标签：android, location, locationmanager, looper

可以使用以下方法开始从 LocationManager 检索通知：

```
requestLocationUpdates(String provider, long minTime, float minDistance, LocationListener listener, Looper looper) 
```

文档用这些词解释属性：

```
provider    the name of the provider with which to register
minTime     minimum time interval between location updates, in milliseconds
minDistance minimum distance between location updates, in meters
listener    a LocationListener whose onLocationChanged(Location) method will be called for each location update
looper      a Looper object whose message queue will be used to implement the callback mechanism, or null to make callbacks on the calling thread 
```

如果我想开始使用这种方法接收更新，我不能很好地理解类（looper）的行为。

此外，我正在围绕类 LocationManager 创建一个库，并且在执行正常行为之前，我需要做一些其他工作。我需要的是开始接收库的 LocationListener 更新，而不是仅在验证某些条件后才执行正常行为。

为了做到这一点，如果用户开始使用上述方法接收更新，我需要知道如何模拟具有 LocationManager 的行为。

我希望我很清楚。有人能帮我吗？谢谢！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2014-11-03T14:09:20.293

Looper 基本上是一个在后台运行的线程，只要它从 Handler 对象接收到消息或可运行，它就会工作。主循环器是 UI 线程的一部分。其他looper通常是通过构造new HandlerThread然后调用thread.start()，然后调用thread.getLooper()来创建的。

LocationManager 允许您使用特定的 Looper 或在主 Looper（UI 线程）上请求位置。

```
requestLocationUpdates(String provider, long minTime, float minDistance, LocationListener listener, Looper looper) 
```

或致电

```
requestLocationUpdates(String provider, long minTime, float minDistance, LocationListener listener) 
```

在 Android 位置管理器内部，它设置了一个 ListenerTransport 对象来为提供的 looper 创建一个处理程序，如果没有提供，则在主线程上创建一个处理程序。此处理程序从 LocationManager 提供程序接收侦听器事件。

通常，当您想在 AsyncTask 中处理位置管理器事件或想要在侦听器中执行长时间运行的操作并避免阻塞 UI 线程时，您将使用 Looper 请求更新侦听器。一个简单的例子如下：

```
HandlerThread t = new HandlerThread("my handlerthread");
t.start();
locationManager.requestLocationUpdates(locationManager.getBestProvider(), 1000l, 0.0f, listener, t.getLooper()); 
```

在您的 LocationListener 内

```
Handler MAIN_HANDLER = new Handler(Looper.getMainLooper());
@Override
public void onLocationChanged(Location location) {
     final MyPojoResult result = doSomeLongRuningOperation(location);
     MAIN_HANDLER.post( new Runnable() { 
        @Override
        public void run() {
           doSomeOperationOnUIThread(result):
        }
     });
} 
```

# c++ - 为什么 C++ int 和 long 类型都是 4 个字节？

> ID：13398630
> 
> 赞同：19
> 
> 时间：2012-11-15T13:38:42.793
> 
> 标签：c++, cpu-architecture

[包括Microsoft](http://msdn.microsoft.com/en-us/library/s3f49ktz%28v=vs.80%29.aspx)在内的许多来源都将 int 和 long 类型引用为 4 个字节，并且具有（有符号）-2,147,483,648 到 2,147,483,647 的范围。如果长原始类型实际上不提供更大范围的值，那么它有什么意义呢？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-11-15T13:45:30.733

关于整数类型的唯一保证是：

1.  `sizeof(char) == 1`
2.  `sizeof(char) <= sizeof(short)`
3.  `sizeof(short) <= sizeof(int)`
4.  `sizeof(int) <= sizeof(long)`
5.  `sizeof(long) <= sizeof(long long)`
6.  `sizeof(char) * CHAR_BIT >= 8`
7.  `sizeof(short) * CHAR_BIT >= 16`
8.  `sizeof(int) * CHAR_BIT >= 16`
9.  `sizeof(long) * CHAR_BIT >= 32`
10.  `sizeof(long long) * CHAR_BIT >= 64`

其他事情是实现定义的。感谢 (4)，两者`long`和`int`可以具有相同的大小，但它必须至少为 32 位（感谢 (9)）。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-11-15T13:42:14.723

`long`C++ 标准仅指定*至少与 一样大*，`int`因此当它*完全一样大*时，在场景中没有任何犯罪：它完全是实现定义的。在不同的平台上，尺寸可能很重要，例如我现在在我的 Linux 机器上`int`的尺寸为 4 和`long`8。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-11-15T14:00:35.597

正如其他人指出的那样，问题背后的假设只是部分正确，即不适用于某些平台。如果你真的想了解我们是如何走到现在这种情况的， J. Mashey[的《通往 64 位的漫漫长路》](http://queue.acm.org/detail.cfm?id=1165766)会让你很好地了解存在的各种力量以及它们是如何相互作用的。

快速总结一下，C 以`char`（8 位）和`int`（16 位）开头。然后添加`short`（16 位）和`long`（32 位），而`int`可能是 16 位或 32 位，具体取决于平台上的自然情况和向后兼容的压力。当 64 位出现时，`long long`被添加为 64 位类型，并且在 64 位平台上对较小的类型进行了一些调整。事情稳定在 32 位`int`，但`long`保留了各种定义，一些 64 位平台具有 64 位`long`，而其他（可能只有 Windows？）保持`long`为 32 位，可能是由于向后兼容的不同压力（Unix 长期以来一直假设`long`由于与指针大小相同，Windows 在其 API 中的残余量更多`int`是 16 位，因此`long`是唯一的 32 位类型）。顺便说一句，添加了 typedef ( `intXX_t`, `intptr_t`) 以帮助使意图更清晰，`intXX_t`但实际上并不需要家族强制恒定大小的风险。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-11-15T13:39:42.730

不，在某些平台上只有 4 个字节。C++ 标准将大小保留为实现定义。

在其他平台上，它可能是不同的大小。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-11-15T13:44:52.250

它不一定要更大。`long`例如，当我在我的机器上使用GCC 时，它通常必须定义为 8 个字节。该标准的措辞通常说这些类型“需要至少为 X 大小”（例如，查看[finally-standardized `long long`in C++11](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2005/n1811.pdf)。

本质上，只要满足要求，任何人都可以自由地做他们想做的事。根据标准，有人可以制作`long long`256 位，这是完全合法的。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-11-15T13:45:47.120

C++ 语言规范简单地指出 a 的大小`long`必须至少是 a 的大小`int`。

它曾经是标准的有`int`= 2 个字节和`long`= 4 个字节。出于某种原因`int`，长大并`long`保持不变（至少在 Windows 编译器上）。我只能推测**出于向后兼容性的原因**`long`保持不变......

 *** * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-11-15T16:08:38.777

没有人回答你的实际问题，也许除了 AProgrammer。

C/C++ 标准定义为 Griwes 所描述的。这允许在编译器供应商可以定义对计算机体系结构最方便的大小的情况下实现 C 和 C++ 语言。有一段时间，（对于 Windows 3.1 及之前，即 Windows 95 之前），Windows 的 C 代码具有 16 位 int，而许多 UNIX 平台，如 Solaris、HPUX 和 AIX 具有 32 位 int。

但是，现代微型计算机（自 386 起）具有完整的 32 位寄存器，并且与 32 位对齐的寻址存储器比访问 16 位增量要快得多。因此，使用 32 位 int 的代码比使用 16 位 int 的代码效率更高，尤其是对于 int 数组。

要在 32 位寄存器中模拟 16 位整数，还必须在第 16 位而不是第 32 位溢出。因此，使用 32 位 int 会更容易，即使您只有 32 位可以长期使用。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-11-15T13:43:09.040

我认为这取决于实现。它们可能会有所不同，但由供应商提供。但是，一些供应商只是简单地使其在语法上得到“支持”（即：您可以将它们放入您的代码中，它们将编译，但没有区别）。每隔一段时间，您就会遇到这样的语言功能。**

# vim - 在 Vim 中始终保持光标居中

> ID：13398631
> 
> 赞同：14
> 
> 时间：2012-11-15T13:38:45.607
> 
> 标签：vim

我想随时保持光标居中。

[由于此 Vim 提示页面](http://vim.wikia.com/wiki/Keep_your_cursor_centered_vertically_on_the_screen)`scrolloff`中提到的高值，我设法在光标周围有线条时使其居中，但当光标靠近第一行或最后一行时，我无法使 Vim 以这种方式运行。是否可以让 Vim 添加“波浪号”行来替换“真实行”？`~`

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-15T13:47:47.507

你可以试试这个映射：

```
:nnoremap j jzz
:nnoremap k kzz 
```

如果您经常使用`G`跳转到文件末尾，您可能还想要

```
:nnoremap G Gzz 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T22:49:22.437

究竟是什么让 kev 但如果（像我一样）你是一个愚蠢的全键盘用户，你可以添加

```
:nnoremap j jzz
:nnoremap k kzz
:nnoremap <Down> jzz
:nnoremap <Up> kzz 
```

感谢@kev

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-08-09T12:05:30.823

[kev](https://stackoverflow.com/a/13398805/8096230)建议的映射适用于普通模式下的基本导航，但不适用于搜索等更复杂的动作。他们也不会在插入模式下为您做任何事情，这是我个人花费大部分时间的地方：在文件的底部写入！

我拥有的一个简单但笨拙的解决方案是

```
:autocmd CursorMoved,CursorMovedI * call CentreCursor() 
```

使用用户定义的函数

```
function! CentreCursor()
    let pos = getpos(".")
    normal! zz
    call setpos(".", pos)
endfunction 
```

它保存当前光标位置，使视图居中，然后恢复光标位置（我最初尝试`autocmd`使用 just `* zz`，但这似乎打破了附加到行尾）。

顾名思义，只要光标在 Normal 或 Visual (Insert) 模式下移动， [CursorMoved(I)](https://vimhelp.org/autocmd.txt.html#CursorMoved)就会触发，因此这应该涵盖所有基础。它显然经常被触发，因此将其用作钩子可能不是一个好主意。我还没有注意到性能下降；您的里程可能会有所不同（理想情况下会有`LineMoved`事件或类似事件，但没有）。

以上给出了在 vim 中我期望`:set scrolloff=999`做的事情。它不会在文件顶部做任何事情，因为那里没有`~`行。如果你坚持让光标居中，即使打开一个新文件，一个（非常）粗略的解决方法是在`BufRead`. 您可能还想删除 then on`BufLeave`或类似内容。我之前没有做过任何 vimscript，但如果你愿意，可以开始。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-15T14:17:50.897

我只能猜测你的动机，但如果你想要一个带有编辑前端和中心的单一、整洁的窗口，我可以推荐[vimroom 插件](http://projects.mikewest.org/vimroom/)。虽然它没有将光标固定在中间，但它使用`'scrolloff'`并在所有侧面都清空填充窗口，以避免光标过多地漂移到编辑器边框。

# erlang - 创建现有 ram 表的 mnesia disk_copies

> ID：13398632
> 
> 赞同：3
> 
> 时间：2012-11-15T13:38:47.730
> 
> 标签：erlang, mnesia

我有一个完整的 mnesia ram_copies-only 数据库，但在将 disk_copy 表添加到节点时遇到问题。目前我这样做：

1.  创建我所有的 ram_copy 表/节点

2.  在 disk_copy-to-be 节点上启动 mnesia。

3.  使用创建一个新模式（我没有为 ram_copy 表创建一个模式）`mnesia:create_schema([Node])`
4.  复制我希望成为disk_copy的表，使用`mnesia:add_table_copy(table, Node, disk_copy)`
5.  然后我等待创建表

一切似乎都按计划进行（没有运行时错误），但是当我转到 pwd() 时。目录并检查，没有反映我刚刚创建的表的文件。此外，当我`mnesia:info()`在节点上调用时，没有 disk_copy 表，只有 ram_copy 模式。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T14:19:06.113

您能否检查“运行数据库节点”字段是否列出了您已启动的两个节点？可能是您没有将第二个节点添加到 mnesia 集群。

因此，如果您的第二个节点称为 BNode，那么在第一个节点上您将按以下顺序运行这些命令：

```
1) mnesia:change_config(extra_db_nodes, [BNode]).  
2) mnesia:add_table_copy(table, BNode, disc_copies). 
```

第二：我认为您应该在 disk_copy-to-be 节点上启动 mnesia 之前创建模式（步骤 3）（步骤 2）。

这就是我为创建您需要的模式所做的：
假设您有 2 个节点 NodeA 和 NodeB。
确保在开始之前没有 Mnesia 目录。

```
%% From NodeA, setup the A node
erl -sname a -setcookie cookie
mnesia:start().
mnesia:create_table(mytable, [{attributes, [field1, field2]}]).

%% From NodeB, setup the B node
erl -sname b -setcookie cookie
net_adm:ping(NodeA).
mnesia:create_schema([node()]).
mnesia:start().

%% From NodeA, Add the NodeB to the mnesia cluster
[BNode | _] = nodes().
mnesia:change_config(extra_db_nodes, [BNode]).

%% From NodeA, add NodeB as a disc copy
mnesia:add_table_copy(mytable, BNode, disc_copies). 
```

# ios - NSNotificationCenter 观察者没有收到通知

> ID：13398633
> 
> 赞同：8
> 
> 时间：2012-11-15T13:38:52.860
> 
> 标签：ios, nsnotificationcenter, nsnotifications

我知道为什么没有收到通知的标准原因：

*   释放或取消注册的对象。
*   作为观察者移除对象。
*   未注册为观察员。
*   注册错误通知或发布错误通知。

我可以很高兴地说，我非常确定这些都不会发生。我想最有可能的是该对象在某个时候被无效并重新创建，但它在初始化时注册了通知。

这是我注册的地方：

```
/**
 *  initialises an object with a unique file url
 *
 *  @param  url                         the url to set as the file url
 */
- (id)initWithFileURL:(NSURL *)url
{
    if (self = [super initWithFileURL:url])
    {
        self.entries                    = [[NSMutableArray alloc] init];

        //  we want to be notified when a note has changed
        [[NSNotificationCenter defaultCenter] addObserver:self
                                                 selector:@selector(noteChanged)
                                                     name:@"com.andbeyond.jamesvalaitis.notesChanged"
                                                   object:self];

        NSLog(@"Just registered for 'com.andbeyond.jamesvalaitis.notesChanged'");
    }

    return self;
} 
```

这是我发布通知的地方：

```
/**
 *  save the note content
 */
- (void)saveNote
{
    if (_isChanged)
    {
        //  save to the text view to the note's contents
        self.note.noteContent           = self.noteView.text;

        //  post a notification that we changed the notes
        [[NSNotificationCenter defaultCenter] postNotificationName:@"com.andbeyond.jamesvalaitis.notesChanged" object:nil];

        NSLog(@"Just posted 'com.andbeyond.jamesvalaitis.notesChanged'");

        //  make sure we know it's already saved
        _isChanged                          = NO;
    }
} 
```

这是未被调用的方法：

```
/**
 *  called when a note has changed
 */
- (void)noteChanged:(NSNotification *)notification
{
    NSLog(@"Just received for 'com.andbeyond.jamesvalaitis.notesChanged'");

    //  save the notes
    [self saveToURL:self.fileURL forSaveOperation:UIDocumentSaveForOverwriting completionHandler:^(BOOL success)
    {
        if (success)
            NSLog(@"Note updated.");
    }];
} 
```

这是控制台，说明我注册并发布通知：

> 2012-11-15 13:27:50.958 iCloud 自定义 [11269:907] 刚刚注册 'com.andbeyond.jamesvalaitis.notesChanged'
> 
> 2012-11-15 13:28:24.184 iCloud 自定义 [11269:907] 刚刚发布“com.andbeyond.jamesvalaitis.notesChanged”

[整个项目可以在这里找到。](https://dl.dropbox.com/u/25868753/iCloud%20Custom.zip)

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-11-15T14:16:11.300

我想我已经找到了答案。您正在`UIDocument`名为的文件中创建通知`NotesDocument.m`。因此，当您创建观察者时，您将对象设置为`self`. 这意味着 NotesDocument 对象。但是当您发送对象时`post the notification`，您将对象发送为`nil`. 所以`it wont observe the notification`根据文档。**克服这个问题的简单方法是您需要`nil`在创建通知时设置对象。否则你需要通过一个`NotesDocument Object`.**

查看下图和参数详细信息，了解 addObserver 通知方法。

![在此处输入图像描述](../Images/b90b94165f466df09970ec235443199a.png)

查看`notificationSender`参数。观察者想要接收其通知的对象；也就是说，**只有这个发送者发送的通知才会传递给观察者。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T13:45:33.313

更改以下内容：

```
...
selector:@selector(noteChanged:) 

...
- (void) noteChanged:(NSNotification *) notification
... 
```

* * *

## 回答 #3

> 赞同：-5
> 
> 时间：2012-11-15T13:44:14.910

以下网址将解决您的问题。

[http://mobile.tutsplus.com/tutorials/iphone/ios-sdk_nsnotificationcenter](http://mobile.tutsplus.com/tutorials/iphone/ios-sdk_nsnotificationcenter)

# excel - Excel 根据查找填充行

> ID：13398636
> 
> 赞同：1
> 
> 时间：2012-11-15T13:39:11.080
> 
> 标签：excel, vba

我有一个 excel 列作为下拉列表。我想要实现的是：

当用户从下拉列表中选择一个值时，它应该用另一组值填充该行。

例如单元格 A1 - 用户选择水果，应根据查找列表填充单元格 A2、A3、A4 等，这将导致：

A1 - 水果，A2 - 苹果，A3 - 香蕉，A4 - 橙子

另一个例子

A1 - 汽车, A2 - 宝马, A3 - 本田, A4 - 铃木, A5 - 奔驰, A6 - 奥迪

每个项目的数量不同。

没有VBA这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T14:02:44.487

1.  在 A1 上使用数据验证。见[黛布拉的网站](http://www.contextures.com/xlDataVal01.html#Delimited)
2.  通过引用您的数据范围包含您的类别和值，使用简单`Index`的`Match`组合`A2:A6`返回分配给 A1 的值

![在此处输入图像描述](../Images/a468c82d1344611800feacb49c5a3459.png)

# java - J2ME BOSH 客户端到 ejabberd

> ID：13398638
> 
> 赞同：1
> 
> 时间：2012-11-15T13:39:12.440
> 
> 标签：java, java-me, xmpp, ejabberd

我正在编写一个必须通过 BOSH 连接到 XMPP 服务器的 J2ME 客户端。我使用的服务器是 ejabberd。

我还有两个通过 BOSH 成功连接到服务器的应用程序。一个是 flash（xiff 库），另一个是 javascript（strophe）。

我的 J2ME 代码设法完成所有操作，直到它必须使用带有 restart="true" 属性的 body 标记重新启动流。

ejabberd 服务器此时未能发回流启动消息，而是发送了 internal-server-error。

我拥有的 java 代码生成与上述两个库相同的消息。从我在 ejabberd 代码中看到的内容来看，流重新启动 BOSH 消息和流功能消息正在分别发送以响应我的流重新启动请求，而它同时从其他两个库发送。

有没有人见过这种行为？我错过了什么？

以下是 BOSH 对话相关部分的简短日志。

```
[0][OUT] <body rid='1367396715' sid='fe67e7de6f99df688caa5b1977428f59a23bbb9b' xmlns='http://jabber.org/protocol/httpbind'><response xmlns='urn:ietf:params:xml:ns:xmpp-sasl'/></body>
[1][IN ] <body xmlns='http://jabber.org/protocol/httpbind'><success xmlns='urn:ietf:params:xml:ns:xmpp-sasl'/></body>
---SUCCESS!
Restarting stream
[1][OUT] <body rid='1367396716' sid='fe67e7de6f99df688caa5b1977428f59a23bbb9b' xmlns='http://jabber.org/protocol/httpbind' xml:lang='en' xmpp:restart='true' xmlns:xmpp='urn:xmpp:xbosh' to='test.wildeboom.com'/>
[0][IN ] <body xmlns='http://jabber.org/protocol/httpbind'/>
[1][IN ] <body type='terminate' condition='internal-server-error' xmlns='http://jabber.org/protocol/httpbind'/> 
```

ejabberd 日志文件具有以下流重新启动消息。请注意，它没有附加流功能。流特征消息单独排队但发送失败。对于其他库，此消息附加了一个流特征元素。

```
D(<0.741.0>:ejabberd_http_bind:927) : ===[BIND]prepare_response OutPacket: 
[{xmlstreamstart,
"stream:stream",
[{"version",
  "1.0"},
 {"xml:lang",
  "en"},
 {"xmlns",
  "jabber:client"},
 {"xmlns:stream",
  "http://etherx.jabber.org/streams"},
 {"id",
  "1974251422"},
 {"from",
  "test.wildeboom.com"}]}] 
```

# monitoring - 包括最后几行登录监视警报

> ID：13398641
> 
> 赞同：1
> 
> 时间：2012-11-15T13:39:18.720
> 
> 标签：monitoring, alert, monit

我目前正在使用 Monit 监控 Node.JS 实例。它工作得很好，但是当出现问题时，我想添加 Node.JS 实例日志的最后 10 行。这甚至可能吗？

这是我格式化邮件的方式：

```
set mail-format { 
from: email@email
reply-to: donotreply@email.eu
subject: Alert: Amos instance $HOST -- $EVENT
message: $EVENT for service $SERVICE
        Date:       $DATE
        Action:     $ACTION
        Host:       $HOST
        Description:    $DESCRIPTION

This alert was made possible by Monit & this guy. 
```

}

# android - ACE 值未显示

> ID：13398644
> 
> 赞同：0
> 
> 时间：2012-11-15T13:39:30.800
> 
> 标签：android, achartengine

使用 achartengine，我需要在时间表上显示值。根据我放置命令行的位置，不会显示任何值或错误的值。我想这是因为在库中使用 List 的方式（排序），但我不知道如何处理。

这是代码：

```
public GraphicalView getViewTime(Context context, int spinnerSelection, List<myObject> myDataSrc) {

    // *********************
    // SET Graphical objects
    // *********************
    XYMultipleSeriesRenderer mRenderer = new XYMultipleSeriesRenderer();
    XYMultipleSeriesDataset mDataSet = new XYMultipleSeriesDataset();

    // **************
    // AUTOSCALING
    // **************
    AutoScaling<E> AutoScaled = new AutoScaling<E>(spinnerSelection, myDataSrc);

    // *************
    // mdataset
    // *************
    List<Date[]> X_serie = AutoScaled.getXserie();
    List<double[]> Y_serie = AutoScaled.getYserie();

    String[] titles = new String[] { ""/* spinnerSelection */};
    mDataSet = buildDateDataset(titles, X_serie, Y_serie);

    // **************
    // mRenderers
    // **************
    // LEGENDS
    String ChartTitle = getTitle(context, spinnerSelection);
    //mRenderer.setDisplayChartValues(true);

    setChartSettings(mRenderer, ChartTitle, XlegendText, YlegendText, AutoScaled.getFirstRecordDate(), AutoScaled.getLastRecordDate(), 0.0, AutoScaled.getYmax(),
                Color.GRAY, Color.LTGRAY);

    // if command line is here, no values are shown
    // mRenderer.setDisplayChartValues(true);

    // LABELS
    mRenderer.setYLabels(YlabelsCount);
    mRenderer.setXLabels(XlabelsCount);
    mRenderer.setShowLabels(true);
    mRenderer.setXLabelsAlign(Align.RIGHT);
    // renderer.setXLabelsAngle(270L);
    mRenderer.setYLabelsAlign(Align.RIGHT);

    // COLORS
    int[] Colors = new int[] { curveColors[spinnerSelection] };
    mRenderer = buildRenderer(Colors, styles);

     // Shows values at the wrong "place", like random because of List I guess
    // mRenderer.setDisplayChartValues(true);

    // ZOOM
    double[] panLimits = AutoScaled.getPanLimits();
    mRenderer.setZoomEnabled(XenabledZoom, YenabledZoom);
    mRenderer.setZoomButtonsVisible(showZoomButtons);
    mRenderer.setZoomRate(ZoomRate);
    mRenderer.setPanLimits(panLimits);
    mRenderer.setZoomLimits(panLimits);

    // SHOW ONLY last WEEK even after Zoom reset
    mRenderer.setXAxisMin( AutoScaled.getDateOneWeekAgo() );
    mRenderer.setInitialRange(AutoScaled.getXYRange());

    // GRID
    mRenderer.setShowGrid(showGrid);

    // VIEW
    GraphicalView BasicView = ChartFactory.getTimeChartView(context, mDataSet, mRenderer, DateFormat);

    return BasicView;
} 
```

编辑：即使在显示值的情况下，如果我向左滑动图表，我也会收到这个致命错误：

> 11-15 14:55:54.746: E/AndroidRuntime(1555): java.lang.ArrayIndexOutOfBoundsException: length=135; index=-82 11-15 14:55:54.746: E/AndroidRuntime(1555): 在 java.util.ArrayList.get(ArrayList.java:306) 11-15 14:55:54.746: E/AndroidRuntime(1555) : 在 org.achartengine.util.IndexXYMap.getYByIndex(IndexXYMap.java:80) 11-15 14:55:54.746: E/AndroidRuntime(1555): 在 org.achartengine.model.XYSeries.getY(XYSeries.java:169 ) 11-15 14:55:54.746: E/AndroidRuntime(1555): 在 org.achartengine.chart.XYChart.drawChartValuesText(XYChart.java:539) 11-15 14:55:54.746: E/AndroidRuntime(1555):在 org.achartengine.chart.XYChart.drawSeries(XYChart.java:502) 11-15 14:55:54.746: E/AndroidRuntime(1555): 在 org.achartengine.chart.XYChart.draw(XYChart.java:286) 11-15 14:55:54.746：E/AndroidRuntime(1555)：在 org.achartengine。

编辑 2：代码中使用的值

```
int XlabelsCount = 7;
int YlabelsCount = 10;
float ZoomRate = 1.20f;
String DateFormat = "dd MMM yy\n HH:mm";

11-16 15:46:34.935: I/TwoAxisVsTime(2316): LIST DUMP X_serie (94 datas in total): 
11-16 15:46:34.935: I/TwoAxisVsTime(2316): i=0 =>Thu Oct 25 20:16:06 UTC+02:00 2012,
11-16 15:46:34.935: I/TwoAxisVsTime(2316): i=1 =>Sun Oct 28 10:53:41 UTC+01:00 2012,
11-16 15:46:34.935: I/TwoAxisVsTime(2316): i=2 =>Wed Nov 07 13:06:43 UTC+01:00 2012,
11-16 15:46:34.935: I/TwoAxisVsTime(2316): i=3 =>Wed Sep 26 16:42:39 UTC+02:00 2012,
11-16 15:46:34.935: I/TwoAxisVsTime(2316): i=4 =>Sun Sep 30 16:49:00 UTC+02:00 2012,
11-16 15:46:34.935: I/TwoAxisVsTime(2316): i=5 =>Mon Oct 29 12:14:59 UTC+01:00 2012,
11-16 15:46:34.935: I/TwoAxisVsTime(2316): i=6 =>Sun Oct 28 14:54:21 UTC+01:00 2012,
11-16 15:46:34.935: I/TwoAxisVsTime(2316): i=7 =>Thu Nov 01 20:24:32 UTC+01:00 2012,
11-16 15:46:34.935: I/TwoAxisVsTime(2316): i=8 =>Sat Oct 27 20:22:26 UTC+02:00 2012,
11-16 15:46:34.935: I/TwoAxisVsTime(2316): i=9 =>Wed Nov 14 15:16:10 UTC+01:00 2012,
11-16 15:46:34.935: I/TwoAxisVsTime(2316): i=10 =>Wed Nov 14 12:04:38 UTC+01:00 2012,

11-16 15:46:34.945: I/TwoAxisVsTime(2316): DUMP Y_serie (94 datas in total): 
11-16 15:46:34.945: I/TwoAxisVsTime(2316): 152.0,
11-16 15:46:34.945: I/TwoAxisVsTime(2316): 81.0,
11-16 15:46:34.945: I/TwoAxisVsTime(2316): 178.0,
11-16 15:46:34.945: I/TwoAxisVsTime(2316): 120.0,
11-16 15:46:34.945: I/TwoAxisVsTime(2316): 89.0,
11-16 15:46:34.945: I/TwoAxisVsTime(2316): 329.0,
11-16 15:46:34.945: I/TwoAxisVsTime(2316): 63.0,
11-16 15:46:34.945: I/TwoAxisVsTime(2316): 68.0,
11-16 15:46:34.945: I/TwoAxisVsTime(2316): 85.0,
11-16 15:46:34.945: I/TwoAxisVsTime(2316): 252.0,

11-16 15:46:34.965: I/TwoAxisVsTime(2316): _________________
11-16 15:46:34.965: I/TwoAxisVsTime(2316): getFirstRecordDate
11-16 15:46:34.965: I/TwoAxisVsTime(2316): 1.34747055E12
11-16 15:46:34.965: I/TwoAxisVsTime(2316): _________________
11-16 15:46:34.965: I/TwoAxisVsTime(2316): getLastRecordDate
11-16 15:46:34.965: I/TwoAxisVsTime(2316): 1.35304991E12
11-16 15:46:34.965: I/TwoAxisVsTime(2316): ____________________
11-16 15:46:34.965: I/TwoAxisVsTime(2316): AutoScaled.getYmax()
11-16 15:46:34.965: I/TwoAxisVsTime(2316): 442.0
11-16 15:46:34.965: I/TwoAxisVsTime(2316): ___________
11-16 15:46:34.965: I/TwoAxisVsTime(2316): panLimits
11-16 15:46:34.965: I/TwoAxisVsTime(2316): ARRAY DUMP : 
11-16 15:46:34.965: I/TwoAxisVsTime(2316): 1.34747055E12,
11-16 15:46:34.965: I/TwoAxisVsTime(2316): 1.35304991E12,
11-16 15:46:34.965: I/TwoAxisVsTime(2316): 0.0,
11-16 15:46:34.965: I/TwoAxisVsTime(2316): 442.0,
11-16 15:46:34.965: I/TwoAxisVsTime(2316): _______________________
11-16 15:46:34.965: I/TwoAxisVsTime(2316): AutoScaled.getXYRange()
11-16 15:46:34.965: I/TwoAxisVsTime(2316): ARRAY DUMP : 
11-16 15:46:34.965: I/TwoAxisVsTime(2316): 1.35244511E12,
11-16 15:46:34.965: I/TwoAxisVsTime(2316): 1.35304991E12,
11-16 15:46:34.965: I/TwoAxisVsTime(2316): 0.0,
11-16 15:46:34.965: I/TwoAxisVsTime(2316): 442.0, 
```

# ruby-on-rails - rack-rewrite 将所有子域重定向到根域（根域除外）

> ID：13398645
> 
> 赞同：2
> 
> 时间：2012-11-15T13:39:33.150
> 
> 标签：ruby-on-rails, ruby, rack-rewrite

如何做到这一点：

```
RewriteCond %{HTTP_HOST} ^www\.(.*)$ [NC]
RewriteRule ^(.*)$ http://%1/$1 [R=301,L] 
```

在机架重写语法中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T14:44:11.040

您可以为此创建一个新的中间件

```
class SubdomainToWwwMiddleware
  def initialize(app)
    @app = app
  end

  def call(env)
    request = Rack::Request.new(env)
    if !request.host.starts_with?("www.")
      [301, { "Location" => request.url.gsub(/\/\/([^\.]*)/, "//www") }, self]
    else
      @app.call(env)
    end
  end
end 
```

这是未经测试的，但应该让你朝着正确的方向前进。您可能希望添加一个条件来不仅检查，`www.example.com`而且检查`example.com`. 在这种情况下，上面的中间件目前可能会爆炸。

你可以把它放进去`/lib/middleware/subdomain_to_www_middleware.rb`，添加

```
config.autoload_paths += %W( #{ config.root }/lib/middleware ) 
```

到你的`config/application.config`, 和

```
config.middleware.use "SubdomainToWwwMiddleware" 
```

给你的`config/environments/production.rb`

# php - 如何在6列中找到最大值

> ID：13398646
> 
> 赞同：1
> 
> 时间：2012-11-15T13:39:32.857
> 
> 标签：php, mysql

我有一张这样的桌子。

```
+-------------+-------+-------+-------+-------+-------+
| studentCode | term1 | term2 | term3 | term4 | term6 |
+-------------+-------+-------+-------+-------+-------+ 
```

我想返回每行中术语的最大值。

像这样：

```
SELECT studentCode, maxterm FROM my_tbl 
```

如何用我的最大值填充 maxterm。
谢谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T13:44:43.787

尝试：

```
SELECT studentCode, GREATEST(term1, term2, term3, term4, ... ) FROM my_tbl 
```

[来源](http://dev.mysql.com/doc/refman/5.0/en/comparison-operators.html#function_greatest)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T13:45:15.663

使用[GREATEST()](http://dev.mysql.com/doc/refman/5.5/en/comparison-operators.html#function_greatest)

```
select studentCode,
       greatest(term1, term2, term3, term4, term5, term6)
from my_tbl; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T13:44:05.160

对于只有几列，您可以使用 if 子句。

```
SELECT IF(`col_1` > `col_2`, `col_1`, `col_2`) AS max FROM `my_table` 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-15T13:51:16.840

尝试使用 GREATEST：

```
SELECT studentCode, GREATEST( term1, term2, term3, term4, term5, term6 )
FROM my_tbl 
```

# git - Git：反向忽略（.gitignore）

> ID：13398648
> 
> 赞同：23
> 
> 时间：2012-11-15T13:39:45.760
> 
> 标签：git

我为我的主文件夹创建了一个存储库。这是我的`.gitignore`文件：

```
!.vim/plugin/*
!.vim/doc/*
.*
*
.viminfo
.vim/.netrwhist
.vim-fuf-data/file/stats
bin/dwm/dwm 
```

所以当我在里面创建一个新文件时，`.vim/plugin`我希望在`git status`显示这个文件之后，但是没有..为什么？

**编辑**：经过一对答案后，我在下面以这种方式更改了反向忽略线的位置，但问题是一样的：我在`.vim/plugin`文件夹中创建的新文件没有显示在`git status`..

```
.*
*
.viminfo
.vim/.netrwhist
.vim-fuf-data/file/stats
bin/dwm/dwm
!.vim/plugin/*
!.vim/doc/* 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-11-15T13:51:52.717

在第 4 行中，您使用`*`. 这会覆盖先前的否定模式。从[手册页](http://www.kernel.org/pub/software/scm/git/docs/gitignore.html)：

> 在一个优先级内，最后一个匹配模式决定结果

其中“优先级”表示忽略模式的不同来源，例如`.gitignore`和`$GIT_DIR/info/exclude`。

如果您想忽略除以您开头的模式之外的所有内容，则应`!`将`*``.gitignore`

* * *

**编辑**

[我在 SO 上的另一个问题](https://stackoverflow.com/questions/9162919/git-whitelisting-files-in-a-complex-directory-structure)的帮助下找到了解决方案：

```
*
!*/
!.vim/plugin/* 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T13:51:14.810

尝试将否定行（以 开头的行`!`）移动到文件底部`.gitignore`。

请参阅[此处的示例部分](http://www.kernel.org/pub/software/scm/git/docs/gitignore.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-03-14T14:12:21.900

另一种方法是仅忽略顶级文件和目录，并在白名单目录中根据需要执行相同操作，如[相关问题的此答案](https://stackoverflow.com/questions/5738204/cant-understand-how-gitignore-ignores-the-folders/5740857#5740857 "回答相关问题")

例如我的 .gitignore 现在看起来像这样

```
/*
!.gitignore
!.vimrc
!.bashrc
!.vim/
.vim/.netrwhist
!.gconf/
.gconf/apps/*
!.gconf/apps/gnome-terminal
!bin/ 
```

Deve 的回答让 git 很慢，因为它会搜索你的 homedir 下的所有目录。（在将 git 用于 homedir 中的设置的特定情况下）

# php - 使用包含语句，并且 ?view - ?view 重定向到错误的包含

> ID：13398651
> 
> 赞同：0
> 
> 时间：2012-11-15T13:39:48.897
> 
> 标签：php, sql, view, include

我在以下方面遇到了一些问题。

本质上，我正在使用 php/sql 构建登录系统。

根文件夹 (www) 包含 css 样式、index.php 和一些其他不相关的 php 文件。

在此文件夹中还有一个名为 views 的文件夹。在“视图”中还有 2 个文件夹：主文件夹和布局文件夹。

Layout 文件夹包含大量 php 文件，其中仅包含 1 行。例如

```
<h1> You have logged in! </h1> 
```

(loginconfirm.php)，或

```
<h1> Log in failed </h1> 
```

（登录失败.php）。

主文件夹包含 2 个 php 文件，“layout”和“loggedinlayout”。

在我的索引文件中，最后 - 我有这个：

```
include 'views/main/'.$controller.'.php'; 
```

这个想法是，当用户登录时，我将 $controller 从 = layout 更改为 = loggedinlayout。这将导致加载新布局。

实际上，这不起作用，因为我无法让包含行工作，它只会继续使用它以前使用过的东西。

```
 <?php
    // occasional bugs bring up notices, this ignores them
    error_reporting(E_ALL ^ E_NOTICE);
    // includes the database and cart functions
    include('db_function.php');
    session_start();

   // defaults to index view unless a different view is requested
   $view = empty($_GET['view']) ? 'welcome' : $_GET['view'];

   function validateUser()
   {
   session_regenerate_id (); //this is a security measure
   $_SESSION['valid'] = 1;
   $_SESSION['userid'] = $userid;
   }

   function isLoggedIn()
   {
   if(isset($_SESSION['valid']) && $_SESSION['valid'])
    return true;
   return false;
   }

   function logout()
   {
     $_SESSION = array(); //destroy all of the session variables
      session_destroy();
   }

   switch($view) {
   case "logout";
logout();
$controller='layout';
//$_SERVER['DOCUMENT_ROOT'];
header('Location:index.php');
break;

    case "login";
    $user = ($_POST['username']); 
    $pw = ($_POST['password']); 

    session_start(); //must call session_start before using any $_SESSION variables
    //connect to the database here
    db_connect();
    $qry = "SELECT userid FROM user WHERE username='$user' AND password='$pw'"; 
    $result = mysql_query($qry);
    if(mysql_num_rows($result) < 1) //no such user exists
    {
    header('Location: ?view=loginfailed');
    die();
    }
    else
    {
    validateUser(); //sets the session data for this user
    }
    //redirect to another page or display "login success" message
     header('Location: ?view=loginconfirm');
     break;
     }

    //used for layout
    // the layout folder is where we put all the different views php files,
    // such as the index (first page displayed, even though there is another index)
    // or view players for example
     if(isset($_SESSION['valid']) && $_SESSION['valid']) 
     {
    $controller = 'loggedinlayout';
     }
     $controller = 'layout';

     // KEEP THIS HERE ALWAYS - THIS IS OUT OF THE CASE/VIEW SECTION

    include 'views/main/'.$controller.'.php';

     ?> 
```

大家有什么建议吗？

问题是 - 当我登录时，它应该将我重定向到登录确认页面，使用“loggedinlayout”作为布局，而不是“布局”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T15:57:32.277

您的`$controller` `if/else`语句缺少，因此即使返回`else`，它也会始终将其设置为。尝试改变这个 -`$controller = 'layout';``(isset($_SESSION['valid']) && $_SESSION['valid'])``TRUE`

```
if(isset($_SESSION['valid']) && $_SESSION['valid']) 
 {
$controller = 'loggedinlayout';
 }
 $controller = 'layout'; 
```

对此——

```
if(isset($_SESSION['valid']) && $_SESSION['valid']) 
 {
$controller = 'loggedinlayout';
 }
else
 {
 $controller = 'layout';
 } 
```

# ios - 如何将代码回调同步到音轨的播放时间？

> ID：13398655
> 
> 赞同：0
> 
> 时间：2012-11-15T13:40:09.133
> 
> 标签：ios, synchronization, core-audio, avaudioplayer, openal

我有一个在 iPhone 应用程序中播放的演示音轨，我想在特定的播放时间显示特定的交互式“幻灯片”。我不能使用视频的原因是幻灯片是交互式的（不仅仅是照片）。

一位开发人员最近表示，您不能相信开始播放音轨然后显示由计时器触发的内容。曲目越长，计时器就会越多，因为媒体播放的实际播放长度会有所不同。

是否有我可以收到的回调，例如“到达播放时间 X:Y”或每播放一秒触发的回调？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T14:05:29.940

AudioUnit 有一个回调属性，您可以设置它在 AURenderCallbackStruct 中传递。该回调将有一个时间戳。

```
OSStatus YourAURenderCallack (
   void                        *inRefCon,
   AudioUnitRenderActionFlags  *ioActionFlags,
   const AudioTimeStamp        *inTimeStamp,
   UInt32                      inBusNumber,
   UInt32                      inNumberFrames,
   AudioBufferList             *ioData
); 
```

# php - PHP + Facebook：如何获取 access_token + 60 天访问令牌？

> ID：13398663
> 
> 赞同：0
> 
> 时间：2012-11-15T13:40:35.633
> 
> 标签：php, facebook, facebook-graph-api, access-token, facebook-access-token

我试图以这种方式得到它：

```
https://graph.facebook.com/oauth/access_token?             
    client_id=APP_ID&
    client_secret=APP_SECRET&
    grant_type=fb_exchange_token&
    fb_exchange_token=EXISTING_ACCESS_TOKEN 
```

url 地址中的所有变量都已正确设置，但是当我将此 url 放入浏览器时，我得到：

```
{
   "error": {
      "message": "No user access token specified",
      "type": "OAuthException",
      "code": 1
   }
} 
```

一遍又一遍地。我究竟做错了什么？

**编辑：**

我当前的设置：脚本的地址：`www.domain.com/folder/index.php`

这`$my_url = "www.domain.com"`

在 Facebook: `namespace`: my_namespace

**应用程序域**：domain.com

**网站网址**：`http://www.domain.com/`

这是我的设置，但仍然出现相同的错误

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T13:44:27.793

您是否向他们发送现有的访问令牌？您首先应该有一个 access_token，您应该将其发回以获取扩展的到期访问令牌。

从错误中，我可以理解的是，您没有向他们发送令牌。

这是我在其他问题中回答的代码。它在 FB 文档中明确给出。这个获取短期令牌，将其发送回以扩展它，并获取长期访问令牌。

```
<?php

//read more : https://developers.facebook.com/docs/howtos/login/server-side-login/
session_start();
   $app_id = "xxxxxxxxxxxxxx";
   $app_secret = "xxxxxxxxxxxxxxxx";
   $my_url = "www.stackoverflow.com/";  // redirect url

    $code = $_REQUEST["code"];

   if(empty($code)) {
     // Redirect to Login Dialog
     $_SESSION['state'] = md5(uniqid(rand(), TRUE)); // CSRF protection
     $dialog_url = "https://www.facebook.com/dialog/oauth?client_id=" 
       . $app_id . "&redirect_uri=" . urlencode($my_url) . "&state="
       . $_SESSION['state'] . "&scope=publish_stream,read_friendlists,email";

     echo("<script> top.location.href='" . $dialog_url . "'</script>");
   }
if($_SESSION['state'] && ($_SESSION['state'] === $_REQUEST['state'])) {
     $token_url = "https://graph.facebook.com/oauth/access_token?"
       . "client_id=" . $app_id . "&redirect_uri=" . urlencode($my_url)
       . "&client_secret=" . $app_secret . "&code=" . $code;

     $response = file_get_contents($token_url);
     $params = null;
     parse_str($response, $params);
     $longtoken=$params['access_token'];

//save it to database    
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T13:45:41.327

您不能在那里放置 App 令牌。它必须是*用户*访问令牌。请使用现有的*用户*访问令牌。

# r - 将变量名称分配给 R 中的输出图

> ID：13398665
> 
> 赞同：4
> 
> 时间：2012-11-15T13:40:47.737
> 
> 标签：r, variables, graph, filenames, assign

我是 R 统计的新用户。我有一个巨大的`for`循环，包含多个大量文件，循环最终给了我一个图表的结果。

一切正常，除了输出文件名。我到底想做什么？

我在用

```
data1 <- read.csv("filepath/filename", header=TRUE, sep=",")
data2 <- read.csv("filepath/filename", header=TRUE, sep=",")
data3 <- read.csv("filepath/filename", header=TRUE, sep=",") 
```

等等...阅读我的文件。

我希望输出图形文件名包含生成它的数据文件和列的名称。例如：

```
graph1-data1-data3-columnE.pdf 
```

**重要提示：**我正在阅读的所有文件都具有完全相同的列名和编号。

我应该使用什么命令来执行此操作？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-15T14:28:45.297

您可以使用`paste`@EDi 指出的方法来解决它，`paste0`或者`sprintf`. 我更喜欢后者，因为它的语法非常简洁。在以下示例`%i`中（对于整数）被替换为 的值`i`，`d1`并且`d2`（`%s`对于字符串）被替换为 的值`col`。

```
for(i in 1:n){
    ...
    d1 <- 1    # Index of the first data file
    d2 <- 3    # Index of the second data file
    col <- "E" # Column name
    ...
    outfile <- sprintf("Graph%i-data%i-data%i-column%s.pdf", i, d1, d2, col)
    pdf(outfile)
    ...
    dev.off()
} 
```

### 一些一般性建议

每当您发现自己创建了名为`data1`、`data2`等的对象`data3`时，您实际上就是在伪造一个对象列表。相反，制作一个适当的列表，您的语法将更紧凑，更易于阅读和编写。

```
# List all files named `data###.csv`, where ### is a number
my.files <- dir(".", "data[0-9]+\\.csv")

# Load all files in one go
my.data <- lapply(my.files, read.csv, header=TRUE, sep=",")

# Calculate the thing you are interested in        
n <- length(my.files)
for(i in 1:n){
    for(j in 1:n){
        # Do stuff
        pdf(sprintf("Graph-%i-%i.pdf", i, j))
        plot(my.data[[i]], my.data[[j]])
        dev.off()
    }
} 
```

# java - 等待 - 通知工作？

> ID：13398666
> 
> 赞同：0
> 
> 时间：2012-11-15T13:40:48.797
> 
> 标签：java, multithreading

这是我编写的代码，用于测试`wait()`and的工作`notify()`。现在我有一堆疑问。

```
class A extends Thread {
  public void run() {
    try {
      wait();
      for (int i = 1; i <= 5; i++) {
        System.out.println(i);
        sleep(500);
      }
    } catch (Exception e) {
    }
    System.out.println("End Of Thread");
  }
}

class ThreadWaitNotify {
  public static void main(String args[]) {
    try {
      A t = new A();
      t.start();
      t.wait();
      t.notify();
      t.join();
      System.out.println("End Of Main");
    } catch (Exception e) {
    }
  }
} 
```

我的问题是：

1.  当我在 main 中写入`t.wait()` 时，main 不会进一步执行，并且我无法进一步恢复它。怎么做？
2.  其次，我也写`wait()`在线程中，因为它只打印“线程结束”，而不是循环？即使我`notify()`来自主要与否...
3.  现在，如果我在 main 中写入`notify()`，它不会完成执行。在评论该行时，它完成执行并打印“End Of Main”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T14:08:23.037

> *我的问题是：*
> 
> *当我在 main 中编写 t.wait() 时，main 不会进一步执行，并且我无法进一步恢复它。怎么做？*

运行 main 的线程在`t`调用`t.wait()`. 正如您将在 JavaDoc 中看到的[wait()](http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html#wait())：

> **抛出**： IllegalMonitorStateException - 如果当前线程不是对象监视器的所有者。

因此，您对 wait() 的调用导致抛出 IllegalMonitorStateException。您的空 catch 块只是丢弃错误，这使得调试变得困难。您可以使用`ex.printStackTrace()`;显示错误 或者您可以将其作为未经检查的异常重新抛出：

```
 throw new RuntimeException(ex); 
```

要修复 wait() 调用，您需要在 t 上进行同步：

```
synchronized (t) {
    t.wait();
} 
```

当您调用 notify() 时，您还需要持有相同的锁。

> *其次，我也在线程中编写了 wait() ，因此它只打印“线程结束”，而不是循环？即使我从 main 通知（）...*

同样的事情在这里发生，但在不同的线程中。您创建的新线程不拥有 t 上的锁，因此`wait()`调用会引发异常。同样，您正在丢弃异常，因为没有正确处理它。

> *现在，如果我在 main 中编写 notify() ，它不会完成执行。在评论该行时，它完成执行并打印“End Of Main”。*

我假设您的意思是“注释掉对 wait() 和 notify() 的调用”。这是意料之中的。run() 方法已完成，即：它捕获了抛出的 IllegalMonitorStateException 并继续到方法的末尾。当线程完成执行时，join() 方法返回。这几乎立即发生，因为 wait() 调用立即引发异常。

# jquery - jQuery 任何滑块：幻灯片内容更新后滑块未调整大小

> ID：13398667
> 
> 赞同：2
> 
> 时间：2012-11-15T13:40:52.027
> 
> 标签：jquery, anythingslider

我使用 resizeContents:false 选项设置了一个 AnythingSlider，因此内容在滑块内是正常大小。它适用于来自页面加载的内容（内容是图像和包含在 div 中的文本字段）。但是当我尝试在 Javascript 中更新幻灯片的内容时，它没有调整大小。

JS部分：

```
$('#media-slider').anythingSlider({
    buildStartStop: false,
    infiniteSlides: false,
    hashTags: false,
    resizeContents: false,
    enableKeyboard: false,
    stopAtEnd: true
});
$('#add-button').click(function() {
    var current_index = $('#media-slider').data('AnythingSlider').currentPage;
    $('#media-slider li:nth-child(' + current_index + ')').removeClass('empty-slide-item');
    $('#media-slider li:nth-child(' + current_index + ') .slide-picture img').unbind('load').load(function() {
        $('#media-slider').anythingSlider();
    });
    $('#media-slider li:nth-child(' + current_index + ') .slide-picture img').attr('height', 320).attr('src', 'http://dummyimage.com/350x320');
});​ 
```

HTML部分：

```
<link rel="Stylesheet" type="text/css" href="http://css-tricks.com/examples/AnythingSlider/css/anythingslider.css" />

<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7/jquery.min.js"></script>

<script type="text/javascript" src="http://css-tricks.com/examples/AnythingSlider/js/jquery.anythingslider.js"></script>

<ul id="media-slider">
  <li class="media-slide empty-slide-item">
    <div class="empty-slide"> 
      <input type="button" id="add-button" value="Set image" />
    </div>
    <div class="slide-content">
      <div class="slide-picture">
        <img width="350" height="" src="" />
      </div>
      <div class="slide-text">
        <input type="text" value="new image" />
      </div>
    </div>
  </li>
  <li>
    <div class="slide-content">
      <div class="slide-picture">
        <img width="350" height="420" src="http://dummyimage.com/350x420" />
      </div>
      <div class="slide-text">
        <input type="text" value="image 1" />
      </div>
    </div>
  </li>
  <li>
    <div class="slide-content">
      <div class="slide-picture">
        <img width="350" height="280" src="http://dummyimage.com/350x280" />
      </div>
      <div class="slide-text">
        <input type="text" value="image 2" />
      </div>
    </div>
  </li>
</ul>​ 
```

CSS部分：

```
.media-slide .slide-content{display:block;}
.media-slide .empty-slide{display:none;}
.media-slide.empty-slide-item{height:230px;}
.media-slide.empty-slide-item .slide-content{display:none;}
.media-slide.empty-slide-item .empty-slide{display:block; width:300px; height:200px;}​ 
```

我设置了一个 jsfiddle 来说明：http: [//jsfiddle.net/YEmM5/](http://jsfiddle.net/YEmM5/)。

幻灯片 2 和 3 都可以。

在幻灯片 1 中，如果您单击按钮，它会伪造图像上传并将图像放置在幻灯片中（它还会使用图像大小伪造服务器响应，因此它是明确设置的），它不会像其他人一样调整大小.

我试图等待加载图像以调用 AnythingSlider 更新，但没有任何反应。

我应该以另一种方式更新滑块还是一个错误？

谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T14:12:13.530

根据[文档](https://github.com/CSS-Tricks/AnythingSlider/wiki)（其中很多似乎是 jsFiddle 演示），您可以*使用内部下拉菜单调整任何滑块的高度*。该[**演示**](http://jsfiddle.net/Mottie/ycUB6/70/)展示了使用单独的函数来重新计算高度。

因此，将此功能添加到您的演示中：

```
adjustHt = function(tar) {
    // animate the slider height to match the accordion height
    var panel = tar.closest('.panel'),
        newHt = 0,
        // target page index
        num = panel.index(),
        // calculate height of all visibile panel contents
        hts = panel.children().children(':visible').map(function(i, e) {
            return (newHt += $(e).outerHeight(true));
        }).get();
    // change height for plugin to prevent height jumping when changing slides
    $('#media-slider').data('AnythingSlider').panelSize[num][3] = newHt;
    // animate height of slider and panel
    $('.anythingSlider, .panel:eq(' + num + ')').animate({
        height: newHt
    }, 600);
}; 
```

并通过删除`unbind/load`（这是不必要地重新初始化 AnySlider）并调用高度调整函数来调整您的点击处理程序

```
$('#add-button').click(function() {
    var current_index = $('#media-slider').data('AnythingSlider').currentPage;
    $('#media-slider li:nth-child(' + current_index + ')').removeClass('empty-slide-item');
    $('#media-slider li:nth-child(' + current_index + ') .slide-picture img').attr('height', 320).attr('src', 'http://dummyimage.com/350x320');
    adjustHt($('.empty-slide'));
    return false;
});​ 
```

创建所需的效果 - 参见[**演示**](http://jsfiddle.net/YEmM5/1/)。

# jquery - jQuery Mobile 复选框刷新不起作用

> ID：13398670
> 
> 赞同：1
> 
> 时间：2012-11-15T13:40:56.470
> 
> 标签：jquery, checkbox

我正在尝试使用以下代码更改我的 jQuery Mobile 复选框的状态：

```
$('#_inputcb_Q801').prop('checked', false); 
```

我还在 jQuery Mobile 上找到了以下解决方案：

```
$('#_inputcb_Q801').prop('checked', false).checkboxradio('refresh'); 
```

但它给出了这个错误：

> 运行时错误 Microsoft JScript：无法在初始化之前调用 checkboxradio 上的方法；试图调用方法“刷新”

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-23T08:01:07.003

try it.

*   checkbox

    `$('.ui-checkbox input').attr('checked', false).checkboxradio('refresh');`

*   selectbox

    `$('.ui-select select').val('').selectmenu('refresh');`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T10:20:36.030

找到了解决方案，我把它贴在下面可能对某人有帮助：

```
 $('#_bQ801').click(function(){
        $.mobile.changePage('#Question_09_01', 'slide', false, false);
        $('#_inputcb_Q901').attr('checked', false);
        $('#_inputcb_Q901').checkboxradio('refresh');} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-15T14:05:44.900

尝试这个

```
$('#_inputcb_Q801').attr('checked', false); 
```

# iphone - iphone，coredata，nsfetchedresults 控制器，删除对象，删除 uitableviewcell 不起作用

> ID：13398671
> 
> 赞同：0
> 
> 时间：2012-11-15T13:41:02.337
> 
> 标签：iphone, ios, core-data

我正在尝试`Core Data`使用 nefetched results controller 删除对象`UITableView`，对象被删除但单元格未被删除并且 tablecelldeleteanimation 无法正常工作

```
objtableview.delegate = otherdelegateobject; 
objtableview.datasource = otherdatasourceobject; 
```

在表视图编辑样式数据源方法中，我正在删除 coredata 对象，因此调用了 nsfetchedresults 控制器委托方法...

```
- (void)controller:(NSFetchedResultsController *)controller didChangeObject:(id)anObject atIndexPath:(NSIndexPath *)indexPath forChangeType:(NSFetchedResultsChangeType)type newIndexPath:(NSIndexPath *)newIndexPath { 
switch(type) { 
case NSFetchedResultsChangeDelete: 
[self.tblRecentSearch reloadData]; 
```

（见全文）它删除核心数据对象，但调用 tableview 重新加载数据不起作用看起来可能是线程相关的问题，可能是我试图从另一个线程重新加载表..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T10:23:50.687

该`reloadData`方法仅在您*保存*更改后才有效。委托回调的全部目的是手动修改行，因此可以对更改进行动画处理。

```
case:NSFetchedResultsChangeDelete:
    [self.tblRecentSearch deleteRowsAtIndexPaths:@[indexPath];
                                withRowAnimation: UITableViewRowAnimationFade]; 
```

# android - 为什么为带有动画的视图设置可见性失败？

> ID：13398673
> 
> 赞同：3
> 
> 时间：2012-11-15T13:41:08.300
> 
> 标签：android, android-animation, android-view

An`ImageView`使用旋转动画进行动画处理：

```
import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.view.animation.Animation;
import android.view.animation.LinearInterpolator;
import android.view.animation.RotateAnimation;
import android.widget.ImageView;

public class Test extends Activity implements View.OnClickListener {
    private ImageView mIcon;
    private Animation mRotate;
    private boolean mShown = true;

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        mIcon = new ImageView(this);
        mIcon.setImageDrawable(
              getResources().getDrawable(android.R.drawable.ic_dialog_alert)
              );
        mIcon.setOnClickListener(this);

        setContentView(mIcon);

        mRotate = new RotateAnimation(
                  0f,360f,
                  getWindowManager().getDefaultDisplay().getWidth()/2,
                  getWindowManager().getDefaultDisplay().getHeight()/2
                  );
        mRotate.setDuration(2000);
        mRotate.setRepeatMode(Animation.RESTART);
        mRotate.setRepeatCount(Animation.INFINITE);
        mRotate.setInterpolator(new LinearInterpolator());

        mIcon.setAnimation(mRotate);
    }

    @Override
    public void onClick(View view) {
        if(mShown){
            mRotate.cancel();
            mIcon.setVisibility(View.GONE);
        }else {
            mIcon.setVisibility(View.VISIBLE);
            mRotate.reset();
            mRotate.start();
        }
        mShown = !mShown;
    }
} 
```

该部分`mProgress.setVisibility(GONE);` 不起作用。`ImageView`根本不隐藏。如果我不设置`Animation`它，它工作得很好。

我的问题是：**为什么动画视图的可见性没有改变？**

更新：将 View 包装在 a`FrameLayout`和 setting`FrameLayout`的可见性中。但是，这仍然是一个丑陋的解决方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T13:52:47.527

我认为它应该起作用。让我解释。这里重要的是**您**的`ImageView`动画效果。如果您使用例如`TranslateAnimation`（我想这是您的情况），那么您制作动画的视图实际上并没有改变位置，它只会移动到屏幕上的其他位置，例如，如果您以这种方式制作按钮并想要单击它，您仍然必须单击其先前的位置。所以在这种情况下，我认为你`ImageView`是`GONE`，但你只看到动画制作的绘图。使用`ObjectAnimator`应该可以解决这个问题，因为与其他动画相反，它实际上会移动视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T15:50:42.357

尝试

mProgress.setVisibility(View.GONE);

代替

mProgress.setVisibility(GONE);

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-20T10:21:11.987

在将可见性设置为 GONE 之前尝试执行 mIcon.clearAnimation()。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-15T15:56:04.237

尝试设置 mRotate.setFillAfter(false)。您的视图可见性确实消失了，但动画的最终状态保持其位置。

# c++ - Cuda - 从设备全局内存复制到纹理内存

> ID：13398674
> 
> 赞同：6
> 
> 时间：2012-11-15T13:41:09.093
> 
> 标签：c++, memory, cuda, textures

我正在尝试使用 Cuda 和 C++ 在 GPU 上执行两个任务（分成 2 个内核）。作为输入，我采用 NxM 矩阵（作为浮点数组存储在主机的内存中）。然后，我将使用一个内核对该矩阵执行一些操作，使其成为 NxMxD 矩阵。然后我有第二个内核，它在这个 3D 矩阵上执行一些操作（我只是读取值，我不必向它写入值）。

对于我的任务来说，在纹理内存中操作似乎要快得多，所以我的问题是是否可以在内核 1 之后从设备上的全局内存中复制我的数据，并将其直接传输到内核 2 的纹理内存而不将其带回主机?

**更新**

我添加了一些代码来更好地说明我的问题。

这是两个内核。第一个现在只是一个占位符，将 2D 矩阵复制到 3D。

```
__global__ void computeFeatureVector(float* imData3D_dev, int imX, int imY, int imZ) {

//calculate each thread global index  
int xindex=blockIdx.x*blockDim.x+threadIdx.x; 
int yindex=blockIdx.y*blockDim.y+threadIdx.y;     

#pragma unroll
for (int z=0; z<imZ; z++) { 
    imData3D_dev[xindex+yindex*imX + z*imX*imY] = tex2D(texImIp,xindex,yindex);
}
} 
```

第二个将采用这个 3D 矩阵，现在表示为纹理并对其执行一些操作。暂时空白。

```
__global__ void kernel2(float* resData_dev, int imX) {
//calculate each thread global index  
int xindex=blockIdx.x*blockDim.x+threadIdx.x; 
int yindex=blockIdx.y*blockDim.y+threadIdx.y;     

resData_dev[xindex+yindex*imX] = tex3D(texImIp3D,xindex,yindex, 0);

return; 
} 
```

那么代码主体如下：

```
// declare textures
texture<float,2,cudaReadModeElementType> texImIp; 
texture<float,3,cudaReadModeElementType> texImIp3D; 

void main_fun() {

// constants
int imX = 1024;
int imY = 768;
int imZ = 16;

// input data
float* imData2D  = new float[sizeof(float)*imX*imY];        
for(int x=0; x<imX*imY; x++)
    imData2D[x] = (float) rand()/RAND_MAX;

//create channel to describe data type 
cudaArray* carrayImIp; 
cudaChannelFormatDesc channel; 
channel=cudaCreateChannelDesc<float>();  

//allocate device memory for cuda array 
cudaMallocArray(&carrayImIp,&channel,imX,imY);

//copy matrix from host to device memory  
cudaMemcpyToArray(carrayImIp,0,0,imData2D,sizeof(float)*imX*imY,cudaMemcpyHostToDevice); 

// Set texture properties
texImIp.filterMode=cudaFilterModePoint;
texImIp.addressMode[0]=cudaAddressModeClamp; 
texImIp.addressMode[1]=cudaAddressModeClamp; 

// bind texture reference with cuda array   
cudaBindTextureToArray(texImIp,carrayImIp);

// kernel params
dim3 blocknum; 
dim3 blocksize;
blocksize.x=16; blocksize.y=16; blocksize.z=1; 
blocknum.x=(int)ceil((float)imX/16);
blocknum.y=(int)ceil((float)imY/16);    

// store output here
float* imData3D_dev;        
cudaMalloc((void**)&imData3D_dev,sizeof(float)*imX*imY*imZ); 

// execute kernel
computeFeatureVector<<<blocknum,blocksize>>>(imData3D_dev, imX, imY, imZ); 

//unbind texture reference to free resource 
cudaUnbindTexture(texImIp); 

// check copied ok
float* imData3D  = new float[sizeof(float)*imX*imY*imZ];
cudaMemcpy(imData3D,imData3D_dev,sizeof(float)*imX*imY*imZ,cudaMemcpyDeviceToHost);     
cout << " kernel 1" << endl;
for (int x=0; x<10;x++)
    cout << imData3D[x] << " ";
cout << endl;
delete [] imData3D;

//
// kernel 2
//

// copy data on device to 3d array
cudaArray* carrayImIp3D;
cudaExtent volumesize;
volumesize = make_cudaExtent(imX, imY, imZ);
cudaMalloc3DArray(&carrayImIp3D,&channel,volumesize); 
cudaMemcpyToArray(carrayImIp3D,0,0,imData3D_dev,sizeof(float)*imX*imY*imZ,cudaMemcpyDeviceToDevice); 

// texture params and bind
texImIp3D.filterMode=cudaFilterModePoint;
texImIp3D.addressMode[0]=cudaAddressModeClamp; 
texImIp3D.addressMode[1]=cudaAddressModeClamp; 
texImIp3D.addressMode[2]=cudaAddressModeClamp;
cudaBindTextureToArray(texImIp3D,carrayImIp3D,channel); 

// store output here
float* resData_dev;
cudaMalloc((void**)&resData_dev,sizeof(float)*imX*imY); 

// kernel 2
kernel2<<<blocknum,blocksize>>>(resData_dev, imX); 
cudaUnbindTexture(texImIp3D);

//copy result matrix from device to host memory   
float* resData  = new float[sizeof(float)*imX*imY];
cudaMemcpy(resData,resData_dev,sizeof(float)*imX*imY,cudaMemcpyDeviceToHost); 

// check copied ok
cout << " kernel 2" << endl;
for (int x=0; x<10;x++)
    cout << resData[x] << " ";
cout << endl;

delete [] imData2D;
delete [] resData;
cudaFree(imData3D_dev);  
cudaFree(resData_dev);
cudaFreeArray(carrayImIp); 
cudaFreeArray(carrayImIp3D); 

} 
```

我很高兴第一个内核工作正常，但 3D 矩阵 imData3D_dev 似乎没有正确绑定到纹理 texImIp3D。

**回答**

我使用 cudaMemcpy3D 解决了我的问题。这是主函数第二部分的修改代码。imData3D_dev 包含来自第一个内核的全局内存中的 3D 矩阵。

```
 cudaArray* carrayImIp3D;
cudaExtent volumesize;
volumesize = make_cudaExtent(imX, imY, imZ);
cudaMalloc3DArray(&carrayImIp3D,&channel,volumesize); 
cudaMemcpy3DParms copyparms={0};

copyparms.extent = volumesize;
copyparms.dstArray = carrayImIp3D;
copyparms.kind = cudaMemcpyDeviceToDevice;  
copyparms.srcPtr = make_cudaPitchedPtr((void*)imData3D_dev, sizeof(float)*imX,imX,imY); 
cudaMemcpy3D(&copyparms);

// texture params and bind
texImIp3D.filterMode=cudaFilterModePoint;
texImIp3D.addressMode[0]=cudaAddressModeClamp; 
texImIp3D.addressMode[1]=cudaAddressModeClamp; 
texImIp3D.addressMode[2]=cudaAddressModeClamp;

cudaBindTextureToArray(texImIp3D,carrayImIp3D,channel); 

// store output here
float* resData_dev;
cudaMalloc((void**)&resData_dev,sizeof(float)*imX*imY); 

kernel2<<<blocknum,blocksize>>>(resData_dev, imX); 

    // ... clean up 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T17:15:39.567

当第一次提出这个问题时，各种 cudaMemcpy 例程的命名有些令人费解，但此后已被 Nvidia 清理。

要在 3D 阵列上操作，您需要使用[`cudaMemcpy3D()`](https://docs.nvidia.com/cuda/cuda-runtime-api/group__CUDART__MEMORY.html#group__CUDART__MEMORY_1gfec7ee5257d48c8528a709ffad48d208)which（在其他阵列之间）能够将线性内存中的 3D 数据复制到 3D 阵列中。
[`cudaMemcpyToArray()`](https://docs.nvidia.com/cuda/cuda-runtime-api/group__CUDART__MEMORY__DEPRECATED.html#group__CUDART__MEMORY__DEPRECATED_1g15b5d20cedf31dd13801c6015da0e828)曾经是将线性数据复制到二维数组所需的函数，但已被弃用，取而代之的是命名更一致的[`cudaMemcpy2D()`](https://docs.nvidia.com/cuda/cuda-runtime-api/group__CUDART__MEMORY.html#group__CUDART__MEMORY_1g3a58270f6775efe56c65ac47843e7cee).

如果您使用的是计算能力 2.0 或更高版本的设备，则您不想使用任何`cudaMemcpy*()`功能。而是使用一个[表面](http://docs.nvidia.com/cuda/cuda-c-programming-guide/index.html#texture-and-surface-memory)，它允许您直接写入纹理，而无需在内核之间复制任何数据。（尽管就像现在一样，您仍然需要将读取和写入分开到两个不同的内核中，因为纹理缓存与表面写入不一致，并且仅在内核启动时失效）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T13:50:34.253

`cudaMemcpyToArray()`接受`cudaMemcpyDeviceToDevice`作为它的*种类*参数，所以它应该是可能的。

# extjs - Sencha Touch 2 改变 store 的 root 属性

> ID：13398675
> 
> 赞同：3
> 
> 时间：2012-11-15T13:41:20.580
> 
> 标签：extjs, touch, store

我有一个带有几个下拉菜单（选择字段）的表单和一个带有多个数组的商店。如何为每个选择字段设置不同的根属性？

有没有办法将 data.quality 用于一个选择字段，将 data.quantity 用于另一个？

我可以创建六个不同的商店，但唯一的区别是 root 属性，我宁愿触发一个更大的 ajax 请求而不是六个小请求。这也意味着更少的代码和更少的文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T09:00:54.703

我完全了解您想要什么...另一种方法是使用[Ext.Ajax.request()](http://docs.sencha.com/touch/2-0/#!/api/Ext.Ajax)并获取所有数据，然后使用将必要的数据加载到每个选择字段`selectfield.setOptions()`

希望能帮助到你...

# django - 我可以判断一个表单是否是模板中的“编辑”表单吗？

> ID：13398677
> 
> 赞同：9
> 
> 时间：2012-11-15T13:41:23.370
> 
> 标签：django, django-forms, django-templates

我有一个页面，其中包含我想用于编辑和添加的表单。我还想根据表单是用于编辑还是添加来更改此页面上的副本。

当用于编辑现有对象时，我只是用`form = MyForm(instance=existingObject)`.

我尝试使用`{% if form.instance %}`，但即使对于用于添加的表单（使用创建`form = MyForm()`）也是如此。

有什么方法可以从模板中判断表单中是否包含现有对象？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-15T13:42:46.313

提交问题后立即想到了这一点：

`{% if form.instance.id %}`仅适用于“编辑”表单。

# php - 将 Web 应用程序连接到多个 Windows odbc 数据库

> ID：13398678
> 
> 赞同：1
> 
> 时间：2012-11-15T13:41:24.397
> 
> 标签：php, windows, soap, remote-access

我有一个用 PHP 编写的基于 Web 的应用程序，它需要与许多 Windows pc 或网络服务器进行通信，这些服务器上具有符合 odbc 的数据库。具体来说，我需要从基于 Web 的应用程序中读取/写入每个 odbc 数据库。最好的方法是什么？使用套接字、HTTP 侦听器等？另外，你能指出我的资源来帮助我开始吗？预先感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T13:51:27.643

有很多方法可以剥那只猫的皮。

顺便说一句，您可以记住两件事：在您的项目中，一些连接需要持久化，而另一些连接则不需要。

默认情况下泛化持久数据库连接是一个很大的错误，乍一看它并不明显，但是在执行您的 php 脚本后持久连接不会关闭，因此它被管理并保留以备将来重用。

如果您开始您的项目，一个不错的选择是带有 ODBC 的 PDO。

[http://php.net/manual/en/ref.pdo-odbc.connection.php](http://php.net/manual/en/ref.pdo-odbc.connection.php)

# android - 如何从不同的活动接收对单个活动的多个意图？

> ID：13398682
> 
> 赞同：1
> 
> 时间：2012-11-15T13:41:33.710
> 
> 标签：android, android-intent

我是android开发的新手。在我的应用程序中，我有一个广播接收器 R 和 4 个其他活动，比如 A、B、C、D。当 R 收到 SMS 时，R 使用意图向 A、B 和 C 活动发送一些数据。为这 3 个活动发送数据可以正常工作。将发送的数据用于 A、B 和 C 活动，他们执行自己的任务并产生一些结果。现在，这些 A、B 和 C 活动中的每一个都应该将生成的结果发送到活动 D。我使用意图来实现这一点，并且数据作为包发送。我期望的是活动 D 从 A、B 和 C 收集所有发送的数据（结果），并在单个文本视图中显示这些数据。但是在 Text 视图上显示的是，只有 Activity C 生成的结果和两个空值。所以，如果你知道如何克服这个问题，请帮助我。将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T14:35:43.370

正如评论中指出的那样，也许您使用了错误的方法。

无论如何，如果您确定自己在做什么（并且如果我正确理解了您的问题），您可以将您的活动声明为*singleInstance*或*singleTask*
请参阅此处的 android:launchMode 了解更多详细信息：[https ://developer.android.com/guide /topics/manifest/activity-element.html](https://developer.android.com/guide/topics/manifest/activity-element.html)

我想强调文档本身说

> 其他模式——singleTask 和 singleInstance——**不适用于大多数应用程序**，因为它们会导致用户可能不熟悉的交互模型，并且与大多数其他应用程序非常不同。

* * *

编辑：

阅读您的代码后：有两种可能的方法来解决这个问题

如果你**不需要**用户交互，你应该使用 AsyncTask (https://developer.android.com/reference/android/os/AsyncTask.html)：你不需要活动来执行计算，你不应该使用它们这样。如果您想确保在继续之前已完成每项任务，您可能需要使用 Executor。添加任务 ( `new AsyncTaskClassX().executeOnExecutor(executor, params);`)，然后，如果您想等待结果：

```
executor.shutdown();
try {
    executor.awaitTermination(Long.MAX_VALUE, TimeUnit.NANOSECONDS);
} catch (InterruptedException e) {
    //something
} 
```

这将导致系统在继续之前等待所有任务完成。

如果您**需要**用户交互，那么您可以考虑使用

```
startActivityForResult(intent, 0); 
```

使用此方法，您启动第一个活动（控制屏幕），当活动使用类似的东西完成其操作时

```
Intent intent=new Intent();
setResult(RESULT_OK, intent);
finish(); 
```

您可以收集结果覆盖`onActivityResult`并检查您可以建立刚刚完成的活动的请求代码。此时启动 B 然后 C 并使用它们的结果。

*请注意：您应该编辑您的问题以添加代码而不是添加评论。这样可以避免在阅读“复杂”问题时产生混淆，并将所有内容保存在一个地方（这也是我编辑答案但没有添加另一个答案的原因）。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T02:33:21.350

活动通常与 UI 相关联。您不能同时运行 3 个活动，因为当另一个活动处于顶部时它们会暂停。

如果三个（A、B、C）活动正在执行的过程不需要 UI，我会将其移动到服务或线程，并使用广播意图将其报告回 D 活动。

如果确实需要 UI，则必须按顺序执行以确保该活动不会被您自己的其他活动打断。所以，启动活动A，用它的结果填充一个新的意图，然后启动活动B。然后B会计算自己的东西，把它和A的结果放在一个新的意图a开始C。和C活动一样，直到它交付活动 D 的所有结果。

我肯定会建议您通读活动生命周期文档。

祝你好运

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T01:56:02.827

```
Bundle b = new Bundle();
splitMsg = smsMsg.split("\\n");

for(int i=0; i<splitMsg.length; i++)
{
  if(!(splitMsg[i].equalsIgnoreCase("null")))
  {
     splitFeatures = splitMsg[i].split(":");               

     if(splitFeatures[0].equals("SomethingToA"))
     {

       String valueA = splitFeatures[1];
       b.clear();
       b.putString("keyA", valueA);

       Intent ia = new Intent(context, A.class);
       iaContactName.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
       iaContactName.putExtras(b);
       context.startActivity(ia);  
     } 

     if(splitFeatures[0].equals("somethingToB"))
     {
       String valueB = splitFeatures[1];
       b.clear();
       b.putString("keyB", valueB);   
       Intent ib = new Intent(context, B.class);
       ib.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);

       ib.putExtras(b);
       context.startActivity(ib);
     } 

     if(splitFeatures[0].equals("SomethingToC"))
     {
       String valueC = splitFeatures[1];
       b.clear();
       b.putString("keyC", unreadSms);

       Intent ic = new Intent(context, C.class);
       ic.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
       ic.putExtras(b);
       context.startActivity(ic);
     } 
   }
 } 
```

现在上面的代码片段是我用来将数据从 R 接收器发送到活动 A、B 和 C 的部分。这 3 个活动中的每一个都接收已发送给它们的适当意图，并将提取捆绑的数据并使用这些数据来生成一些结果。

然后生成的结果将被捆绑并发送到活动 D。这就是它的完成方式。

```
Bundle b = new Bundle();
 b.putString("keyD", valueD);
 Intent id = new Intent(A.this,D.class);
 id.putExtras(b);
 startActivity(id); 
 Each of A,B and C activities send results to D as in the above. Then D will try to  
 extract data from intents as like this, 

   Bundle extras = getIntent().getExtras();

if(extras != null)
   {
      String fromA = extras.etString("keyA");           
      String fromB = extras.etString("keyB");           
      String fromC = extras.etString("keyC");       
      // some code goes here to append fromA, fromB, fromC together and set it into a 
         Text view. 
     } 
```

但在文本视图中，它显示类似这样的内容，“活动 C 产生的 null null 结果”

而不是“活动 A 产生的结果

活动 B 产生的结果

活动C产生的结果"

# clojure - Clojure 中的简单 if-else 分支逻辑

> ID：13398684
> 
> 赞同：4
> 
> 时间：2012-11-15T13:41:40.807
> 
> 标签：clojure

在过去的 30 分钟里，我一直在用头撞墙，试图弄清楚为什么这个简单的代码不起作用。它所做的只是检查是否至少指定了一个命令行参数。

```
(defn check_args []
    (if (first *command-line-args*)
        println "value is not nil"
        println "value is nil"))

(check_args) 
```

当我运行代码时，我最终得到一个运行时异常，它说：

```
java.lang.RuntimeException: Too many arguments to if 
```

我确信这很简单，但是对于我的生活，我无法弄清楚问题出在哪里。将第一项从序列中拉出的代码返回序列中的第一项，如果不存在则返回 nil，因此看起来非常简单。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-15T13:44:34.810

你失去了括号 - 常见的错误。

试试这个

```
(defn check_args []
    (if (first *command-line-args*)
        (println "value is not nil")
        (println "value is nil"))) 
```

# findbugs - FindBugs 中是否有一个类注释来忽略文件中的所有警告

> ID：13398685
> 
> 赞同：11
> 
> 时间：2012-11-15T13:41:45.177
> 
> 标签：findbugs

FindBugs 中有一个注释可以忽略一组错误，例如：

```
import edu.umd.cs.findbugs.annotations.SuppressWarnings;
@SuppressWarnings(value="DLS_DEAD_LOCAL_STORE", justification="...") 
```

有没有办法使用注释忽略java文件的所有类型的错误？

我知道可以从命令行或配置文件中排除文件：http: [//findbugs.sourceforge.net/manual/filter.html](http://findbugs.sourceforge.net/manual/filter.html)

但是对于这种特殊情况，我需要定义这个排除只修改那个 java 文件。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-18T21:40:19.950

`value`对属性使用带有空字符串的标准注释。

```
@SuppressWarnings(value = "") 
```

如果您使用`@SuppressFBWarnings`而不是`@SuppressWarnings`避免混淆`java.lang.SuppressWarnings`并允许 IDE 中的自动导入工作，您甚至可以`value`完全省略该属性。

```
@SuppressFBWarnings 
```

# android - 是否可以区分（在代码中）apk 是通过播放还是手动安装的？

> ID：13398688
> 
> 赞同：4
> 
> 时间：2012-11-15T13:41:56.557
> 
> 标签：android, google-play

> **可能重复：**
> [如何知道应用程序是从 google play 还是侧载安装的？](https://stackoverflow.com/questions/10809438/how-to-know-an-application-is-installed-from-google-play-or-side-load)

我们有一个可在多个移动平台之间移植的应用程序。它提供了自己的更新机制，用于获取应用程序使用的相当大的数据。现在这种机制还可以下载应用程序的更新版本。如果用户手动安装了 .apk，我们希望通过这种机制向他们发送新版本，但如果他们从 android 市场（或任何其他市场）安装它，市场应用程序将负责升级并自行完成会与之冲突。

那么是否可以从应用程序内部检测该应用程序是否是通过市场安装的？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-15T13:45:06.477

从 Google Play 安装时，您将`com.android.vending.INSTALL_REFERRER`在安装过程中收到广播。只需为此[创建一个广播接收器](http://n3vrax.wordpress.com/2011/07/15/listen-for-install-referrer-broadcast-message-get-referrer-on-install/)`SharedPreferences`，并在您的行中有一个布尔值，`fromGooglePlay`您可以在接收器中将其设置为 true。

但是，我认为您无法为其他应用商店（如亚马逊）提供类似的接收器。

**编辑1：**

正如@zapl 在评论中指出的那样，这不适用于 Android 3.0 及更高版本，因为至少没有启动一次的应用程序没有资格接收广播等。

但是，您可以尝试另一种解决方案：

在您的应用程序中，在某处有一个常量布尔值，例如`GOOGLE_PLAY_BUILD`. 在为 Google Play 构建 apk 时，将其设置为`true`，在构建用于手动分发的 apk 时，将其设置为`false`。然后只需在运行时检查它的值，并采取相应的行动。

**编辑2：**

为了解决您对分发应用程序的根设备的担忧，这里有一个更复杂的系统。

每个设备都有一个唯一的 ANDROID_ID（尽管文档说什么，4.2 上的多个用户显然有多个）。本质上，您只需要一个唯一的设备 ID，因此即使是 MAC 地址也可以。

在网络服务器上有一个表来存储唯一 ID，无论您是否收到 Google Play 广播和 Google Play 标志的值。首次启动应用程序时，将该设备的这些详细信息添加到表中。

之后启动应用程序时，只需检查所有三个详细信息是否与本地存储的副本匹配。如果用户从 root 用户那里获取应用程序并安装它，Google Play 标志似乎匹配，但安装引用部分不匹配。可悲的是，这仅适用于预蜂窝设备。

或者在基于信任的系统中，您可以简单地询问用户是手动安装还是从 Google Play 安装的。如果您提到它是选择更新方法，而不是起诉他们从 Google Play 外部安装它，我感觉他们会很乐意说实话。

**编辑 3**

正如@Jan 在评论中指出的那样，PackageManager 中似乎有一个[getInstallerPackageName()](http://developer.android.com/reference/android/content/pm/PackageManager.html#getInstallerPackageName%28java.lang.String%29)方法可用于此目的。

# unit-testing - Grails 2.0：如何在单元测试中正确使用模拟

> ID：13398689
> 
> 赞同：1
> 
> 时间：2012-11-15T13:41:59.980
> 
> 标签：unit-testing, grails

我是否必须在 2.0 中将域类保存到这样的模拟表中：

```
def jdoe = new User(name:"John Doe", role:"user")
def suziq = new User(name:"Suzi Q", role:"admin")
def jsmith = new User(name:"Jane Smith", role:"user")

mockDomain(User, [jdoe, suziq, jsmith])

def test = User.get(1) //correct ? 
```

或者仅仅使用 @Mock 和 @TestFor 就足够了吗？

```
@TestFor(MyController)
@Mock([User,Role])
{...

def jdoe = new User(name:"John Doe", role:"user")
def suziq = new User(name:"Suzi Q", role:"admin")
def jsmith = new User(name:"Jane Smith", role:"user")

def test = User.get(1) //will this work ?
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T20:54:20.620

在单元测试中对域对象和 mixin 使用刷新！

```
@TestFor(MyController)
@Mock([User,Role])
@TestMixin(DomainClassUnitTestMixin)
{...

    def jdoe = new User(name:"John Doe", role:"user").save(flush:true)
    def suziq = new User(name:"Suzi Q", role:"admin").save(flush:true)
    def jsmith = new User(name:"Jane Smith", role:"user").save(flush:true)

    def test = User.get(1) //will this work ?
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T13:53:04.593

您的第二次尝试`@Mock`应该有效。

# wpf - WPF XamlReader.Parse 动态 UI xml 命名空间

> ID：13398690
> 
> 赞同：0
> 
> 时间：2012-11-15T13:42:02.063
> 
> 标签：wpf, xaml, xamlparseexception, xamlreader

我有一个在 xaml 中描述的动态 WPF UI。

可以在下面看到 xaml。我的问题是我的自定义命名空间没有自动解析，

要加载 xaml，我必须将**每个**程序集及其命名空间设置为解析器上下文，如下所示

```
var context = new ParserContext();
context.XamlTypeMapper = new XamlTypeMapper(new string[] { });      

context.XmlnsDictionary.Add("Custom","http://myCompany.de");
context.XamlTypeMapper.AddMappingProcessingInstruction("http://myCompany.de","FooNamespace","FooAssemblyName"); 
```

没有更好的方法吗？我需要这个动态。而且我不想扫描应用程序域。

这是如何在普通的“System Xaml Reader”中完成的？

```
<UserControl
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
    xmlns:Custom="http://myCompany.de"
    x:Class="Foo.Container" 
    mc:Ignorable="d" 
    d:DesignHeight="300" d:DesignWidth="300">
    <UserControl.DataContext>
        <Custom:FooViewModel/>
    </UserControl.DataContext>
    <Grid>

    </Grid>
</UserControl> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T15:04:05.070

```
Clr-Namespace URI's without an assembly mentioned only work as compiled Xaml. 
```

但是，如果您为`";assembly=AssemblyName"`您的 Uri 提供带有命名空间的程序集，例如 - 后缀，它将被成功解析。

但是在您的情况下`xmlns:Custom="http://myCompany.de"`，您不能添加程序集引用。所以，我认为唯一的出路是为这种情况手动添加映射。

对于属于您的项目的自定义命名空间，您可以使用`assembly`后缀来解析它们。

# jinja2 - How to compare float numbers in Jinja2?

> ID：13398694
> 
> 赞同：1
> 
> 时间：2012-11-15T13:42:16.633
> 
> 标签：jinja2

How could I compare two strings which are actually floating numbers? Something like `"0.1234" < "0.2345"`. Unfortunately, I can't use `float` on the strings since this function does not exist in jinja.

The problem that I try to solve is that I want to present only values above a threshold.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2017-05-16T22:53:45.377

Use `{{ var1|float() < var2|float()}}`

[http://jinja.pocoo.org/docs/2.9/templates/#float](http://jinja.pocoo.org/docs/2.9/templates/#float)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-16T09:23:35.510

I solved the problem by returning a float from the server. Then, comparison works as expected.

# python - 比较两个制表符分隔的文件

> ID：13398697
> 
> 赞同：0
> 
> 时间：2012-11-15T13:42:32.900
> 
> 标签：python, perl, bash, bioinformatics

这是与生物信息学相关的问题，但仍然是一个非常编程的问题。我没有为下面给出的问题在 bash 中建立一些衬里，并想在这里问它。请帮忙。

问题：我有两个文件（制表符分隔）。文件 A 看起来像

```
chr1    17050255    234916798
chr1    36688211    36840408
chr1    153961765   154156955
chr1    154128722   154194653
chr1    154130378   154156872
chr1    207493679   207819735 
```

这是基因组坐标的列表。

文件 B 在其前 3 列中还包含基因组坐标，在第四列中它有一个名称。

```
chr1    1709155 1709324 MMM3
chr1    1709155 1709324 Sk-20
chr1    1709608 1709727 ZdaA
chr1    1709608 1709727 ZdaA
chr1    1709608 1709727 ZA
chr1    1709629 1709727 E-1
chr1    1709629 1709727 E-1
chr1    1709629 1709727 E-1 
```

我想要文件 B 的区域（连同第四列）与文件 A 重叠并像这样打印

```
ChrA   StrtA    stpA    ChrB  SrtB  StpB       Name 
```

文件 A 中的区域首先出现，然后是文件 B 中与它重叠的区域以及文件 B 中第四列的值。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T14:35:28.900

使用**床具**intersectBed：[http ://code.google.com/p/bedtools/wiki/Usage#intersectBed](http://code.google.com/p/bedtools/wiki/Usage#intersectBed)

（你也可以问[http://www.biostars.org/](http://www.biostars.org/)）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T13:57:41.920

我绝对建议看[pandas](http://pandas.pydata.org/)来做这样的事情。将两者加载到单独的 DataFrame 中，然后您应该能够以您希望看到的格式将它们合并在一起。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-15T14:47:15.963

您可以使用[DBD::CSV](https://metacpan.org/module/DBD%3a%3aCSV)以 SQL 方式处理您的问题：

```
#!/usr/bin/env perl
use strict;
use utf8;
use warnings 'all';

use Data::Printer;
use DBI;

my $dbh = DBI->connect('dbi:CSV:', undef, undef, {
    f_encoding      => 'utf8',
    csv_quote_char  => undef,
    csv_escape_char => undef,
    csv_sep_char    => "\t",
    csv_eol         => "\n",
    csv_quote_space => 0,
    csv_quote_null  => 0,
    csv_tables      => {
        fileA       => { file => 'fileA.tsv' },
        fileB       => { file => 'fileB.tsv' },
    },
    RaiseError      => 1,
    PrintError      => 1,
}) or die "DBI/DBD::CSV error: " . $DBI::errstr;

my $sth = $dbh->prepare(<<SQL_QUERY);
    SELECT *
    FROM fileA
    JOIN fileB ON
        (StrtA <= StpB) OR (StrtB <= StpA)
    WHERE Name IS NOT NULL
SQL_QUERY

$sth->execute;
while (my $row = $sth->fetchrow_arrayref) {
    p $row;
}
$sth->finish;
$dbh->disconnect; 
```

（不过，我不确定我是否理解您的重叠条件）

# html - AWS S3 托管站点的基本 HTTP 身份验证，类似于 .htaccess

> ID：13398698
> 
> 赞同：10
> 
> 时间：2012-11-15T13:42:34.090
> 
> 标签：html, amazon-s3, amazon-web-services, http-authentication

我有一个托管在 Amazon S3 上的静态 HTML 站点。

理想情况下，我希望能够以与 .htaccess/.htpasswd 文件相同的方式限制对暂存站点的访问。

我知道可以使用存储桶策略来限制访问（我已经使用了一个来使存储桶内容可公开访问），但我看不到任何限制访问的方法。

在理想情况下，我想要一个身份验证提示 - 但将令牌附加到 URL 也可以。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-17T13:33:18.643

是的，这是可能的：结帐[s3auth](http://www.s3auth.com/)（无从属关系）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-12-07T23:03:26.700

我认为[适用于 Javascript 的 AWS 开发工具包](http://aws.amazon.com/developers/getting-started/browser/)正是您正在寻找的。它允许您使用 Facebook、Google 或 Amazon 登录。这是使用 AWS 登录 的[另一个资源。](https://medium.com/aws-activate-startup-blog/dynamic-websites-using-the-aws-sdk-for-javascript-in-the-browser-b3dd90c25b1e#.w9c1341es)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T17:24:12.340

您可以尝试操作 AWS ACL，否则，您需要将其克隆到私有服务器上的存储库或其他东西上。从阅读描述来看，S3 提供静态页面的能力似乎非常有限，并且设计得更多是为了方便而不是功能服务器。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-15T17:19:29.933

您可以使用标准 AWS 令牌密钥进行身份验证吗？您需要一些 JavaScript 或类似的东西来将密钥应用于页面内的所有资产/内部链接，这会导致加载略有延迟，但理论上应该可以工作。

# silverlight - 在silverlight中获取虚拟目录路径

> ID：13398700
> 
> 赞同：0
> 
> 时间：2012-11-15T13:42:40.057
> 
> 标签：silverlight

这是来自 Silverlight 的新手。我有一个托管在 ASP.NET 应用程序中的 Silverlight 应用程序。我需要的是在 XAML 文件后面的代码中获取虚拟目录路径。在 ASP.NET 中，`HttpRuntime.AppDomainAppVirtualPath`已经完成了必要的工作。如何在 SL 中实现相同的目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T15:58:06.097

无法完全获取虚拟路径，但找到了可接受的解决方法。`Application.Current.Host.Source`将始终在 ClientBin 文件夹中提供我的 .xap 文件的来源。如果有的话，这个 Uri 也会有虚拟目录。因此，我通过从 ClientBin 部分开始切掉部分并将所需资源的相对 Uri 附加到子字符串中，从中获得了一个子字符串。

# kill - 为什么 kill [pid] 不起作用？

> ID：13398701
> 
> 赞同：-3
> 
> 时间：2012-11-15T13:42:43.960
> 
> 标签：kill, pid

我在尝试杀死 pid 时遇到问题。我有一个 ruby​​ pid，我试图杀死它，但没有任何反应。

```
lsof -i   (service list) 
```

RUBY 282 XXX 3U IPV4 0xFFFFFFFFFFFFFFFFFFFFF580111F4C20 0T0 TCP LOCALHOST：49206（收听）Ruby 282 XXX 9U IPV4 0XFFFFFFFFFAFA29C20 0T0 TCP *：HBCI（HBCI）

```
kill 282 
```

一样的东西

```
ps -A | grep ruby 
```

282 ?? 0:24.54 /xxx/.rvm/gems/ruby-1.9.2-p320/gems/ruby-debug-ide-0.4.17.beta14/bin/rdebug-ide
324 ttys000 0:00.00 grep ruby

```
kill 282 
```

依然没有。

可能有人已经面临这个问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T13:51:03.673

kill -9 pid 应该可以工作。Kill 需要发送一个信号（-9 = SIGKILL）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T13:46:21.577

有关“kill”命令的用法，请参见[THIS](http://www.cyberciti.biz/faq/howto-kill-unix-process-with-kill-command/)。您必须向 PID ID 发送一个信号，告诉它关闭的原因。另外，请确保您以 root 身份进行杀戮。

# javascript - 用于去除二级域的 API（或 CSV 或任何格式的完整列表）

> ID：13398703
> 
> 赞同：-1
> 
> 时间：2012-11-15T13:42:47.673
> 
> 标签：javascript, networking, dns, network-programming, web-development-server

我在哪里可以找到从 URL中*去除 www*和*二级域名*的代码（最好是 JavaScript） ？

**例子：**

> ```
> www.ynet.co.il -> ynet (stripped 'co.il' - two tokens)
> www.nike.com -> nike (stripped 'com' - one token) 
> ```

ETC

作为次优 - 二级域的完整列表（最好是 CSV 或任何其他格式）也将受到欢迎。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T13:53:44.370

如果您使用 Java，[Guava](https://code.google.com/p/guava-libraries/)可以在这里为您提供帮助。

你可以[`InternetDomainName.topPrivateDomain()`](http://docs.guava-libraries.googlecode.com/git-history/release/javadoc/com/google/common/net/InternetDomainName.html#topPrivateDomain%28%29)一起使用[`publicSuffix()`](http://docs.guava-libraries.googlecode.com/git-history/release/javadoc/com/google/common/net/InternetDomainName.html#publicSuffix%28%29)来解决你的问题。

Guava（以及 Mozilla/Firefox、Chrome 和 Opera）为此功能使用[公共后缀列表（](http://publicsuffix.org/)[原始数据在此处](https://mxr.mozilla.org/mozilla-central/source/netwerk/dns/effective_tld_names.dat?raw=1)）。

[tld.js](https://github.com/oncletom/tld.js)也是一个使用该数据的 JavaScript 库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T13:48:10.567

[https://gist.github.com/2428561](https://gist.github.com/2428561)是这样的吗？在谷歌中搜索“javascript url parser”

# php - 用于 SOAP Web 服务的 PHP 客户端

> ID：13398704
> 
> 赞同：0
> 
> 时间：2012-11-15T13:42:51.723
> 
> 标签：php, soap, jax-ws, soap-client

我有 Java 代码可以做到这一点：

```
// Create a "Service" instance
Dispatch<SOAPMessage> dispatch = createDispatch();
// Build a SOAP request
SOAPMessage request = buildMessage(username, password);
// Invoke the request
SOAPMessage response = dispatch.invoke(request); 
```

我想用 PHP 代码做同样的事情。我是 PHP 新手，遇到了一个标准的 SoapClient 类，但它似乎适用于 WSDL 文件。我需要的是在代码中构建具有各种属性的 SOAP 消息，然后给出服务端口名称等。

我应该使用什么 PHP 库？（类似于用于 XML Web 服务的 Java API）我可以使用标准的 SoapClient PHP lib 类来完成这项工作吗？

我需要有经验的 PHP 用户的帮助。谢谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T14:29:36.503

是的，您可以使用内置的 SoapClient 来做到这一点。请参阅有关 SoapClient::__soapCall() [http://www.php.net/manual/en/soapclient.soapcall.php的文档](http://www.php.net/manual/en/soapclient.soapcall.php)

从该页面上的示例：

```
$client = new SoapClient(null, array('location' => "http://localhost/soap.php",
                                     'uri'      => "http://test-uri/"));
$client->__soapCall("SomeFunction", array($a, $b, $c)); 
```

# c# - 将身份密钥分配给非身份密钥

> ID：13398707
> 
> 赞同：0
> 
> 时间：2012-11-15T13:42:56.560
> 
> 标签：c#, sql-server, sql-server-2008, entity-framework

我有一张表`table1`，主键是`Pkey`。它是一个标识列。我有另一个`table2`没有主键和标识列的表。

我想将 的值插入`Pkey`的列。`table1``id``table2`

```
obj2.id = obj1.Pkey; 
```

我得到一个例外：

> *无法将值 NULL 插入列“id”、表“table2”；列不允许空值。插入失败。*

谢谢提示。系统是否要将标识属性分配给 id？

**更新：**

最初 table2 是空的，我从实体框架创建了新记录。

```
BDetail obj2= iContext.DetailsRecords.Create();
obj2.id = obj1.Pkey;
iContext.BDetail.Add(obj2);
iContext.SaveChanges(); // exception here 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T13:53:57.330

可能尚未创建 obj1 吗？因此，来自主键的 NULL 值（如果该行存在，则永远不能为 NULL）。

# javascript - Safari iOS 6 操作错误

> ID：13398712
> 
> 赞同：0
> 
> 时间：2012-11-15T13:43:12.690
> 
> 标签：javascript, ios6

我有以下问题。我目前正在为 Facebook 开发一款在线游戏。它是用 HTML5 画布制作的，我使用的是 melonJS Javascript 引擎。

突然我的游戏对象不再可见，我什至找到了原因。引擎在每个对象上设置一个标志，指示该对象是否可见。因此，引擎会检查视口（表示为矩形对象）是否包含对象（也表示为矩形对象）。

这是所描述函数的代码（'this' 是对象，'r' 在这种情况下是视口）：

```
/**
 * check if this rectangle is intersecting with the specified one
 * @param  {me.Rect} rect
 * @return {boolean} true if overlaps
 */
overlaps : function(r) {
return (this.left < r.right && r.left < this.right && this.top < r.bottom && r.top < this.bottom);
} 
```

我知道这听起来很奇怪，但由于某种原因，即使它应该返回“true”，这个函数也会返回“false”！但这不是引擎中的错误，也不是我游戏中的错误。此错误仅出现在最新的 Safari 版本（Mac 版本未知和 iPad 上的 iOS6）上。

出于某种原因，如果显示开发人员控制台，则不会出现此错误。如果它被隐藏，错误会立即出现。

有谁知道这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T23:54:19.627

如果这仍然是一个问题，您可以在 melonJS 问题跟踪器上提交错误报告：[https ://github.com/melonjs/melonJS/issues](https://github.com/melonjs/melonJS/issues)

它可能与自提出此问题以来已更改的某些代码有关（自 melonJS 0.9.5 以来，“可见”和“在视口中”现在被视为单独的事物）

# java - Solr DIH 无效提取大小

> ID：13398713
> 
> 赞同：1
> 
> 时间：2012-11-15T13:43:14.470
> 
> 标签：java, database, ms-access, solr

当我尝试使用 solr DIH 访问我的访问数据库时，它给了我一个错误：

```
 java.sql.SQLException: Invalid Fetch Size 
```

我的配置和requesthandler 和dataconfig。我使用文件中的 2007 访问数据库。我已经将我的 java 版本更改为 32 位以与 32 位驱动程序进行通信。所以我认为这与此无关。

```
<dataConfig>
  <dataSource type="JdbcDataSource" 
              driver="sun.jdbc.odbc.JdbcOdbcDriver"
              url="jdbc:odbc:test"
              batchSize="-1"
                convertType="true"/>
  <document>
    <entity name="id" 
            query="select ID from myTest">
    </entity>
  </document>
</dataConfig>

  <requestHandler name="/dataimport" class="org.apache.solr.handler.dataimport.DataImportHandler">
    <lst name="defaults">
      <str name="config">data-config.xml</str>
    </lst>
  </requestHandler> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T15:17:51.677

尝试将您的设置`batchSize="-1"`为`batchSize="1"`或`0`。将 batchSize 设置为 -1 是默认值，因此 DIH 将其设置为默认值 500，某些驱动程序无法处理。

您可以在此处阅读更多信息[DIH 常见问题解答](http://wiki.apache.org/solr/DataImportHandlerFaq)

至于您遇到其他错误，您能否发布该错误是什么？

# r - 如何计算R中列表元素的交集

> ID：13398715
> 
> 赞同：0
> 
> 时间：2012-11-15T13:43:19.197
> 
> 标签：r, reduce, intersect

我有 10 个名为 : `Thre1`, `Thre2`, `Thre3`, `...`, 的列表`Thre10`。

我的输出也应该是一个列表，输出的第 i 个元素应该与`i`我的输入列表的第 th 个元素相交，例如：

```
output[[1]] = Reduce(intersect, 
                     list=(Thre1[[1]],Thre2[[1]],Thre3[[1]],...,Thre10[[1]]) 
```

如何编写代码以防止`Threi[[j]]`手动重复输入？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T14:16:40.707

假设所有列表的长度相同：

```
lapply(1:length(Thre1), function(i)
   Reduce(intersect, list(Thre1[[i]], ..., Thre10[[i]]))) 
```

# git - 使用 Github for Windows 多次克隆同一个存储库

> ID：13398722
> 
> 赞同：15
> 
> 时间：2012-11-15T13:43:51.020
> 
> 标签：git, github, github-for-windows

是否可以使用 Github for Windows 多次克隆同一个存储库？我问的原因是我想多次克隆 Laravel 框架，对于我使用它的每个项目一次。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-20T13:02:12.113

有可能，而且很简单

在 git bash 中：

```
git clone <repo> <directory>
git clone <repo> <directory_2>
.............................
git clone <repo> <directory_N-1>
git clone <repo> <directory_N> 
```

Repo 是您的存储库 URL，所有这些目录 [N] 都是您想要的目录名称

另外，为什么不将已经克隆的 repo 复制到另一个目录呢？

# jquery - 为 Sharepoint 2010 增强型富文本框设置默认值

> ID：13398723
> 
> 赞同：2
> 
> 时间：2012-11-15T13:43:52.393
> 
> 标签：jquery, sharepoint-2010

我正在尝试将默认值设置为 sharepoint 2010 中列表的“增强型富文本框”。此处正在回答类似的问题[Update a rich text column in Sharepoint using jquery](https://stackoverflow.com/questions/8334225/update-a-rich-text-column-in-sharepoint-using-jquery)

找到此代码（[https://stackoverflow.com/a/13158954/1826736](https://stackoverflow.com/a/13158954/1826736)）

```
$('td.ms-formbody').each(function(i, item) {
item = $(item);
if (item.html().indexOf('FieldName="' + fieldName + '"') > -1) {
    item.find("div[contenteditable='true']").html(newValue);
    //break
    return false;
}
}); 
```

上面的代码在 2010 环境中巧妙地完成了这项工作，但不知何故，默认值会在几分之一秒内出现然后消失。我的猜测是，一旦出现用于增强富文本框控件的“编辑工具”，它们就会清除其默认内容。我正在 Document.ready 中执行此代码。请帮我解决问题。类似的代码在 sharepoint 2007 中运行良好，但不确定为什么 Sharepoint 2010 会这样。

# c# - 使用 .NET 监控服务器的性能

> ID：13398729
> 
> 赞同：0
> 
> 时间：2012-11-15T13:44:05.230
> 
> 标签：c#, .net, performance

我有一个客户请求编写一个软件（控制台应用程序或服务），它将在服务器上运行并监控一般性能（cpu 使用情况、内存使用情况和磁盘使用情况）并报告任何长时间的高使用情况。

这在 C#/.NET 中可行吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T13:47:11.660

您可以使用[`System.Management`](http://msdn.microsoft.com/en-us/library/system.management.aspx)命名空间来发出[WMI](http://en.wikipedia.org/wiki/Windows_Management_Instrumentation)查询并报告结果。

> 提供对一组丰富的管理信息和管理事件的访问，这些管理信息和管理事件与检测到 Windows Management Instrumentation (WMI) 基础结构的系统、设备和应用程序有关。应用程序和服务可以使用从 ManagementObjectSearcher 和 ManagementQuery 派生的类来查询有趣的管理信息（例如磁盘上剩余多少可用空间、当前 CPU 利用率是多少、某个应用程序连接到哪个数据库等等） ，或使用 ManagementEventWatcher 类订阅各种管理事件。可访问的数据可以来自分布式环境中的托管和非托管组件。

另请参阅此 MSDN 杂志文章：

[WMI 和 .NET：System.Management 让您在托管代码中利用 WMI API](http://msdn.microsoft.com/en-us/magazine/cc302051.aspx)

# php - php ftp_get 在失败时删除本地文件

> ID：13398730
> 
> 赞同：4
> 
> 时间：2012-11-15T13:44:04.377
> 
> 标签：php, ftp

例子：

```
ftp_get($ftp, 'movies.txt', 'MO'.date('md').'.txt', FTP_ASCII); 
```

如果在删除服务器上`ftp_get`找不到文件并且该文件存在于本地服务器上，则最终将其删除。这是预期的行为吗？`MO1115.txt``movies.txt`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T13:53:03.970

这是我在[http://php.net/manual/en/function.ftp-get.php上找到的](http://php.net/manual/en/function.ftp-get.php)

*零大小的文件不是副作用。当 ftp_get 启动时，它做的第一件事就是创建 inode/文件，它也将流式传输数据，这是一个零大小的文件，其 nname 为您为本地文件指定的名称。当下载失败时，它会保留文件。 *

所以我猜想处理这个问题的最好方法是使用一个临时文件，然后检查它是否被写入。如果是，则复制旧文件，如果不是，则简单地删除临时文件

# ruby-on-rails - 在 ActionMailer 邮件定义中使用辅助方法

> ID：13398744
> 
> 赞同：2
> 
> 时间：2012-11-15T13:44:43.687
> 
> 标签：ruby-on-rails

我想`mailer_helper`在课堂上使用我的方法`UserMailer`。我已经添加了`helper :mailer_helper`，这对视图文件很有用。但是，它们在 UserMailer.rb 中的实际邮件定义中不起作用。

例如，我在定义邮件主题时不能使用辅助方法：

```
mail(to: my_email,
    reply_to: someones_email,
     subject: "#{helper_method "something"}: Hello!") 
```

我怎样才能让它工作？

# 笔记

这似乎与我最近提出的一个问题相似，但完全不同。在这个问题中，我问的是如何使用在我已经在邮件程序视图中成功使用的帮助文件中定义的帮助方法。另一个问题是关于使用控制器中定义的辅助方法。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-15T13:48:58.403

您可以手动将您的助手包含在您拥有的 ActionMailer 类中。

```
class UserMailer
  include YourHelper

  #here you can use the method of your helper
end 
```

# php - 来自联系表单的 html 电子邮件在 gmail 中的显示方式不同？你需要声明 doctypes 吗？

> ID：13398748
> 
> 赞同：1
> 
> 时间：2012-11-15T13:44:53.293
> 
> 标签：php, html, email, gmail, html-email

我们最近将电子邮件从在“部落”上运行更改为在 gmail 应用程序上运行以进行业务，在我们的网站上，我们有一个联系表格，可以向我们发送包含在一些 html 中的消息，以便我们可以对其进行格式化。

当电子邮件使用旧系统通过时，它们可以正常通过，但是当它们通过 gmail 传递时，它们会以未格式化的方式通过，并显示所有 html 标签。

您是否需要声明一个 doctype 才能使其正常工作，还是其他原因？

我附上了一份用于发送电子邮件的 php im 的副本

```
<?php $name = $_POST['name'];
$email = $_POST['email'];
$phone = $_POST['phone'];
$message = $_POST['message'];
$formcontent="

<html>
<head>
<title>Message</title>

<style>
       h1   {font-weight:bold; font-size:14px; margin-top:20px;}
       p    {font-size:14px; margin-top:20px;}
</style> 

</head>
<body>
<h1>From :</h1> $name \n <h1>Email :</h1> $email \n <h1>Phone :</h1> $phone \n <h1>Message :</h1> $message
</body>
</html>
";

$recipient = "studio@mydomain.co.uk";
$subject = "Contact Form";
$mailheader = "MIME-Version: 1.0" . "\r\n";
$mailheader .= "Content-type:text/html;charset=iso-8859-1" . "\r\n";
$mailheader .= "From: $email \r\n";
mail($recipient, $subject, $formcontent, $mailheader) or die("Error!");

echo("<p>Thanks for getting in touch, we'll get back to you shortly..</p>");
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T13:54:56.587

GMail 不支持`<style>`标签，您必须将它们内联，`<h1 style="">`等等。

查看[此表](http://www.campaignmonitor.com/css/)以获取有关不同电子邮件客户端所支持内容的指南。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T13:53:50.563

如果给定选项，GMail 会选择非 html 电子邮件。

[参考](http://www.bennadel.com/blog/188-GMail-Chooses-ONLY-Non-HTML-Mail-If-Given-The-Option.htm)

你在这里做什么：

```
$mailheader .= "Content-type:text/html;charset=iso-8859-1" . "\r\n"; 
```

# javascript - 在javascript中压缩包含音频PCM数据的blob

> ID：13398751
> 
> 赞同：1
> 
> 时间：2012-11-15T13:45:02.140
> 
> 标签：javascript, html, audio, compression, client-side

但是，我制作了一个程序，该程序使用新的 HTML5 从录音中生成 blob（包含 PCM 数据）`getusermedia api`；这些录音可能会变得很大，我希望可以在将文件发送到服务器之前对其进行压缩。我知道这`mp3/ogg compression`超出了浏览器可以处理的范围（我认为），所以我在别处寻找。

有些人谈论`http compression`（也将使用 Gzip）但在设置通信时这不是浏览器服务器的决定吗？

我找到了[https://github.com/olle/lz77-kit](https://github.com/olle/lz77-kit)；它有一个用于客户端的 javascript 实现和一个用于服务器的 php，但这甚至可以制作音频传感器吗？

有没有人有在客户端压缩音频的经验（不使用闪存）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T14:05:07.740

由于您使用的是`getUserMedia`，我想您想从用户的麦克风录制语音。

特定于音频的压缩算法应该比一般的数据压缩算法更有效。音频代码（例如 MP3）的缺点是它们是有损的。

现在，[Speex](http://en.wikipedia.org/wiki/Speex)对您来说可能是一个不错的编解码器。碰巧的是，有一个完整的 JavaScript Speex 编码器/解码器，并附有示例：[speex.js](https://github.com/jpemartins/speex.js)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T18:04:48.530

原始（或压缩）音频很难压缩，我强烈建议您编写一个压缩音频的浏览器插件或在服务器端进行。通用的压缩算法、zip、gz 等将无法为您节省任何有价值的带宽。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-03-08T15:53:59.223

我知道我回答得很晚，这是我在不使用闪存的情况下进行客户端音频压缩的尝试：[https](https://github.com/Mido22/recordOpus) ://github.com/Mido22/recordOpus ，

我正在通过套接字使用 opus 数据包将编码的 opus 数据包发送到服务器（nodejs），在那里我将其转换为用户请求的任何格式并向他提供链接......

# grails - Grails，从 div 标签的 onclick 启动一个模态框

> ID：13398752
> 
> 赞同：0
> 
> 时间：2012-11-15T13:45:03.590
> 
> 标签：grails, html, modal-dialog

我对grails很陌生...

我可以使用以下命令创建一个启动模式框的 txt 链接：

```
modalbox:createLink url="sample.gsp" title="Hello Grails!" width="600" linkname="This is the Link" 
```

我现在要做的是通过单击 div 容器启动模式。

```
<div onclick=modalboxblahblah>

</div> 
```

那是行不通的。有没有更好的解决方案

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-25T00:58:15.550

在 div 周围使用一个。例如：

```
<modalbox:createLink url="form" title="Test" width="600" linkname="">
    <div>
        Place Anything here
    </div>
</modalbox:createLink> 
```

# c# - 如何使用泛型集合实现自定义类型安全集合？

> ID：13398755
> 
> 赞同：3
> 
> 时间：2012-11-15T13:45:12.360
> 
> 标签：c#, collections, generic-collections, collectionbase, custom-collection

我使用了从类派生的强类型集合，`CollectionBase`现在我想将其更改为从类型安全的泛型集合继承。有些建议继承自`List<T>`，有些建议使用`Collection<T>`。我想做的是：

1）我有一个自定义类，我正在创建一个仅包含该自定义类实例的集合。

2) 我有一些我希望自定义集合类具有的属性和方法。例如，它应该有一个`Id`属性，或者它应该有一个`IsBlahBlah()`方法。

我应该如何处理这个？当我从`CollectionBase`类派生时，我使用该`InnerList`属性来访问元素。如果我选择使用，我应该使用该`Items`物业`Collection<T>`吗？

正在做类似的事情：

```
public class MyCustomCollection : Collection<MyCustomClass>
{
    public int ExtraProperty { get; set; }

    public bool IsFortyTwo(MyCustomClass) { }
} 
```

正确的方式？它会在不干扰 中的方法的情况下开箱即用地正常工作`Collection<T>`吗？

额外问题：当我在 Google 上搜索“强类型集合”时，它总是显示包含`CollectionBase`该类的结果。*强类型集合*和类型*安全集合*有什么区别？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T13:50:12.273

**我认为它需要像这样实施**

```
public class MyCustomCollection
{
    private Collection<MyCustomClass> _collection = new Collection<MyCustomClass>();
    public int ExtraProperty { get; set; }
    public bool IsFortyTwo(MyCustomClass) { }
} 
```

# php - 使用 PHP 变量在数组中搜索一个值，然后将其删除

> ID：13398758
> 
> 赞同：0
> 
> 时间：2012-11-15T13:45:16.447
> 
> 标签：php, arrays

嘿伙计们，我正在尝试在数组中搜索一个值，然后将其删除。但是我用一个 php 变量搜索，这似乎是问题所在。所以这就是我到目前为止所拥有的：

```
if(isset($_REQUEST['Admin'])){
    $arr = array('HAUGMA1', 'sdasd', 'dasdasda', 'sadasd');
    $key=array_search($_REQUEST['Admin'],$arr);
    if($key!==false) 
        unset($arr[$key]);
    print_r($arr);
} 
```

`$_REQUEST`检索值但是当`HAUGMA1`我打印出数组时它没有`HAUGMA1`从中删除。我究竟做错了什么？当我使用这个时：

```
$key=array_search('HAUGMA1',$arr); 
```

这是工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T13:59:29.940

我认为问题与来自`$_REQUEST`变量的值有关。
我进行了以下测试以显示两个问题：

```
//Array definition
$arr = array('HAUGMA1', 'sdasd', 'dasdasda', 'sadasd');
//Search
$admin = 'dasdasda';

/* First sample */

$time = microtime();

$arr = array_filter($arr, function($key) use($admin) {
    return $key != $admin;
});

print_r($arr);
echo '<br>Execution time: '.(microtime()-$time).'<br>';

/* Second sample */

$time = microtime();

$key = array_search($admin, $arr);
if($key !== false)
    unset($arr[$key]);

print_r($arr);
echo '<br>Execution time: '.(microtime()-$time).'<br>'; 
```

**第一：**使用`array_search`比 快大约 4 倍`array_filter`。

**第二：**您的脚本的方式是，从数组中删除该项目没有问题。尝试调试来自变量的值`$_REQUEST`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T13:46:59.407

array_search 区分大小写。使用 strtoupper 和 trim 以使传入变量符合数组中的值。trim() 将去掉尾随空格和其他不需要的字符。

```
if(isset($_REQUEST['Admin'])){
    $arr = array('HAUGMA1', 'SDASD', 'ETC');
    $key = array_search(strtoupper(trim($_REQUEST['Admin'])), $arr);
    if($key !== false){ 
        unset($arr[$key]);
    }
    print_r($arr);
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T13:48:40.450

试试这个（关闭 PHP >= 5.3）

```
$admin = $_REQUEST['Admin'];

$arr = array_filter($arr, function($key) use($admin) {
    return $key != $admin;
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-15T13:52:12.317

当我手动设置`$_REQUEST['Admin']`为“HAUGMA1”时，它正在工作。您确定字符串的开头或结尾没有空格吗？

试试这个：

```
$key = array_search(trim($_REQUEST['Admin']), $arr); 
```

# ruby-on-rails - 如何使用带有 rails gem 的 Shopify API 访问客户组中的客户

> ID：13398762
> 
> 赞同：2
> 
> 时间：2012-11-15T13:45:25.420
> 
> 标签：ruby-on-rails, shopify

我在我的 rails 应用程序中使用 Shopify API gem 来访问客户和订单。

我可以像下面这样很好地下拉客户组，并且一切正常。

```
ShopifyAPI::CustomerGroup.find 
```

我知道想要访问客户组中的客户，使用 API 调用 **/admin/customer_groups/#{id}/customers.json**

如何以与组相同的格式执行此操作（即使用 Shopify API gem）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T14:33:30.920

更新：[shopify_api gem](https://rubygems.org/gems/shopify_api)的 3.0.3 版向 CustomerGroup添加了一个`customers`方法，用于获取该组的所有客户。

您现在可以执行以下操作：

```
 group = ShopifyAPI::CustomerGroup.find(123)
  customers = group.customers 
```

--

现在你必须这样做：

```
Customer.find(:all, :params => {:customer_group_id => customer_group.id}) 
```

其中 customer_group 是您从之前的通话中检索到的那个。

然而。我刚刚向 shopify_api 存储库添加了一个拉取请求，该存储库将此调用直接封装在资源上的`customers`方法中。`CustomerGroup`一旦获得批准，您就可以访问`.customers`您拥有的任何客户群，它会为您提供所有客户。

这是供参考的拉取请求：[https ://github.com/Shopify/shopify_api/pull/40](https://github.com/Shopify/shopify_api/pull/40)

# azure - 如何/我可以增加我的 azure 共享网站的文件存储大小？

> ID：13398772
> 
> 赞同：1
> 
> 时间：2012-11-15T13:45:51.990
> 
> 标签：azure

我对共享网站配置的速度和数据库大小非常满意。但我需要更多的文件存储空间。目前是 1gb，我需要大约 8gb

干杯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T14:00:59.653

我不认为你可以增加它（至少现在）。您可以做的是开始为您的网站使用 Blob 存储而不是文件存储，这样您的网站可能会远远超过 8 GB。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T02:54:54.033

如果您迁移到预留实例模型，那么您将获得 10 GB 存储空间（由所有站点共享）。否则我会跟随 Gaurav，使用 Blob Storage。

# opencl - 使用 OpenCL 进行 FFT 和流式操作

> ID：13398776
> 
> 赞同：0
> 
> 时间：2012-11-15T13:46:18.230
> 
> 标签：opencl, gpgpu

这是我认为可能是一个奇怪的问题。

有谁知道 OpenCL 中 1D FFT 的快速实现，它不是并行的。

这就是为什么我想要一个像这样实现的版本。

我有一个当前执行处理的任务：

1.  接受 64 个值。
2.  对此数据执行 FFT
3.  对 FFT 的输出进行更多分析
4.  生成大约 6 个值并返回。

这在输入的不同值上重复了大约 1-4 百万次。每组输入相互独立。

由于输入对于单个操作来说太大了，我想要么将输入分成组或某种流。

有谁知道做类似事情的示例代码。

我正处于学习 OpenCL 的早期阶段，但是这个任务要提前一点。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T18:23:12.563

一些库（例如 cufft）提供“批处理”模式 fft - 就像在不同数据上并行执行许多较短的 fft。

对于固定大小 64，您几乎可以展开顺序 radix-2 或 radix-4 fft（请参阅[http://cnx.org/content/m12027/latest/](http://cnx.org/content/m12027/latest/)），前两个阶段仅包含和和差，以及一些复杂的在后续阶段进行乘法运算。如果输入数据是实值（没有虚部），则可以进行进一步优化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-29T15:48:13.583

如果您想要一个非并行版本并且仍然打算使用 GPU，为什么不从您的主机程序和内核内部启动单个线程，使用循环进行蝶形计算和阶段。我曾经实现这个东西只是为了好玩。

# c# - 在 Unity3D (C#) 中将相机冻结 3 秒

> ID：13398777
> 
> 赞同：4
> 
> 时间：2012-11-15T13:46:18.397
> 
> 标签：c#, time, camera, unity3d

当玩家向左或向右滚动时，我试图让相机冻结 3 秒。只要您将鼠标移回，我的代码就可以向后滚动，但必须有 3 秒的延迟。这是我得到的：

```
using UnityEngine;
using System.Collections;

public class CamCont : MonoBehaviour {
public float LockedY = 1;
public float LockedZ = -7;
public GameObject player;

private bool edgeRightMouse = false;
private bool edgeLeftMouse = false;
private float backLeft = -0.3f;
private float backRight = 0.3f;
private bool backLStrife = false;
private bool backRStrife = false;
private float freezeOn = 0.0f;
private float freezeUntil = 3.0f;
private float plusSpeed = 0.1f;
private float minusSpeed = -0.1f;

public float sensitivityX = 1f;
public float horizontalMouseRight = 1014;
public float horizontalMouseLeft = 10;
public float moveRightUntil = 20;
public float moveLeftUntil = -20;

float mHdg = 0f;
float mPitch = 0f;

void Start() {
    //:P
}

void Update() {
    if (Input.mousePosition.x > horizontalMouseRight) {
        if (transform.position.x < moveRightUntil) {
            Strafe (plusSpeed);
            edgeRightMouse = true;
        }
    }
    else edgeRightMouse = false;

    if (transform.position.x > player.transform.position.x && !edgeRightMouse) {
        /*if (backLStrife == false) {
            freezeOn >= Time.deltaTime;
            if (freezeOn >= freezeUntil) {
                backLStrife = true;
            }
        }*/
        if (backLStrife == false)    backLStrife = true;
        if (backLStrife == true)    Strafe (backLeft);
        if (transform.position.x - player.transform.position.x < backRight)
            backLStrife = false;
    }

    if (Input.mousePosition.x < horizontalMouseLeft) {
        if (transform.position.x > moveLeftUntil) {
            Strafe (minusSpeed);
            edgeLeftMouse = true;
        }
    }
    else edgeLeftMouse = false;

    if (transform.position.x < player.transform.position.x && !edgeLeftMouse) {
        if (backRStrife == false && freezeOn >= freezeUntil)    backRStrife = true;
        if (backRStrife == false)    backRStrife = true;
        if (backRStrife == true)    Strafe (backRight);
        if (transform.position.x + player.transform.position.x > backLeft)
            backRStrife = false;
    }

    if (!backLStrife && !backRStrife && !edgeLeftMouse && !edgeRightMouse && freezeOn > 0)
        transform.position = new Vector3(player.transform.position.x, LockedY, LockedZ);
    Debug.Log (Input.mousePosition);
}

void Strafe(float aVal) {
    transform.position += aVal * transform.right;
}

void ChangeHeading(float aVal) {
    mHdg += aVal;
    WrapAngle(ref mHdg);
    transform.localEulerAngles = new Vector2(mPitch, mHdg);
}

public static void WrapAngle(ref float angle) {
    if (angle < -360f)
    angle += 360f;
    if (angle > 360f)
    angle -= 360f;
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T14:27:24.457

尝试使用[MonoBehaviour](http://docs.unity3d.com/Documentation/ScriptReference/MonoBehaviour.StartCoroutine.html)中的 StartCoroutine 函数和[WaitForSeconds 指令：](http://docs.unity3d.com/Documentation/ScriptReference/WaitForSeconds.html)

```
...
StartCorountine(WaitForUnfreezeCamera());
...

IEnumerator WaitForUnfreezeCamera()
{
    yield return new WaitForSeconds(3f);
    // your code to unfreeze the camera.
} 
```

# excel - 当 xlCoerce 返回一个值时，它会再次计算单元格中的公式吗？

> ID：13398781
> 
> 赞同：2
> 
> 时间：2012-11-15T13:46:29.727
> 
> 标签：excel, user-defined-functions, excel-interop, excel-dna

使用 ExcelDna 在 C# 中制作简单的 UDF 时遇到问题

该函数使用这个：

```
 var reference = XlCall.Excel(XlCall.xlfCaller);
  string oldValue = ((ExcelReference)reference).GetValue().ToString(); 
```

除非我指定，否则它将导致循环引用错误（`GetValue`尝试通过再次调用 UDF 重新评估单元格）`IsMacroType=true`，这会将函数标记为类 2（添加`#`到公式中）。

我不知道它将如何连接到循环错误。但我想`ExcelReference.GetValue()`有时会评估细胞，有时不会？

看来2级只影响`xlfCaller`，

后来查了源码`ExcelReference`，原来是调用了xlCoerce。

另外，我注意到当我在单元格上按 F2 时，`GetValue()`无论单元格是什么，都返回 0。而当我按下 Ctrl+Alt+F9 强制重新计算所有，`GetValue()`返回之前的计算值。

有人可以进一步详细说明我吗？无论如何，xlCoerce 如何处理单元格值/公式以及第 2 类将如何影响它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T12:06:14.857

`xlCoerce`只是获取引用中包含的值的标准方法。就其本身而言，使用 ExcelReference 进行此调用不应导致单元格重新计算。

如果您的函数注册为宏表等效函数（通过添加[Excel-DNA](http://exceldna.codeplex.com)`IsMacroType=true`的声明），那么它将能够在计算时读取表上的任何值，包括调用单元格的先前值。在您使用 F2 编辑公式的情况下，这不仅仅是重新计算，而是整个单元格内容的重新输入，因此与强制重新计算相比，这具有不同的行为是有道理的。

它可能无法直接回答您的问题，但 Charles Williams 在这里对 Excel 计算过程进行了很好的描述：http: [//www.decisionmodels.com/calcsecretsc.htm](http://www.decisionmodels.com/calcsecretsc.htm)。

# ebay-api - eBay Trading API：获取时间范围内所有修改过的物品

> ID：13398787
> 
> 赞同：2
> 
> 时间：2012-11-15T13:46:50.717
> 
> 标签：ebay-api

我们有一个 ebay 商店。我们的支持人员通过标准的 ebay 界面添加项目。当他们这样做以添加新项目时，我可以通过`GetSellerList`-call 获取该项目。但是当他们只更改文本中的某些内容或以其他方式修改项目时，`GetSellerList`-call 将无法通知我。我需要这些修改，因为我们在文章文本中包含了我们的 SKU，这是一些东西，我们的支持会调整。有人遇到类似的问题并找到了解决方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T12:42:41.467

我认为您可以选择所有修改过的项目并过滤它们。让我解释一下我在想什么。我会使用输出选择器来限制每次调用的结果。我只会返回有趣的数据，例如 itemID、SKU（以及接下来我要讨论的两个字段，您还需要什么）。然后我会使用 `ItemArray.Item.ReviseStatus.ItemRevised`if is true 过滤答案，而不是之前修改过的项目，所以我会放入数组中。

从文档

```
 If true, indicates the item was revised since the listing became active. 
    Output only. 
```

我肯定会将所有返回的数据存储在一个表中，这样我就可以检查新条目/新修订。当找到/更新新条目时，您可以做任何您需要的事情，例如给自己发电子邮件以了解哪些项目已被修改。

可以为您提供修订详细信息的字段是`ItemArray.Item.ReviseStatus.ItemRevised`

来自文档：

```
 An output value only, indicates whether an item has been revised since the 
    listing became active and, if so, which among a subset of properties have 
    been changed by the revision. 
```

我希望这会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-15T06:15:44.647

我认为您可以使用[GetSellerEvents](http://developer.ebay.com/DevZone/XML/docs/Reference/ebay/GetSellerEvents.html#GetSellerEvents)而不是 GetSellerList - 您可以在那里指定 ModTimeFrom 和 ModTimeTo 输入属性

我会检查它是如何工作的:)

# css - 十六进制颜色计算器：更改 twitter 引导按钮的颜色

> ID：13398788
> 
> 赞同：6
> 
> 时间：2012-11-15T13:46:56.643
> 
> 标签：css, button, colors, twitter-bootstrap, cross-browser

好的，我正在尝试重写 Twitter Bootstrap 按钮的颜色（例如 for `.btn-primary`）。

据我所知，为 .btn-primary 定义了几种颜色，因此它们对所有浏览器都有所有修复。

我看到它为 .btn-primary 编写所有颜色并将它们“移动”到与新基本颜色相同的差异的最简单方法与 btn-primary 的基本颜色不同，这实际上`#006dcc`是我从 .btn-primary 中看到的`bootstrap.css`。

是否有计算器可以轻松更改颜色，例如：

```
newcolor=(006ecc-006dcc)+aaaaaa=aaabaa 
```

这样我就不应该将每种颜色分成 3 个十六进制数字并找到每种颜色每 3 对的差异？

或者，有没有更简单的正确方法来改变颜色，保持渐变、悬停、修复所有浏览器的 Twitter Bootstrap 按钮？先感谢您。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-15T14:44:41.007

该站点目前似乎已关闭，但我发现它非常方便（当它工作时）：[http ://charliepark.org/bootstrap_buttons/](http://charliepark.org/bootstrap_buttons/)

希望网站只是临时问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-05T18:29:46.333

试试[http://twitterbootstrapbuttons.w3masters.nl/?color=%23006dcc](http://twitterbootstrapbuttons.w3masters.nl/?color=#006dcc)您可以输入您的 html 颜色代码（十六进制）并获得三种按钮（深色、浅色、旋转）。

# mysql - 有人可以帮我理解为什么我应该或不应该将我的所有列从 latin1_swedish_ci 转换为 utf8_unicode_ci 吗？

> ID：13398794
> 
> 赞同：1
> 
> 时间：2012-11-15T13:47:06.083
> 
> 标签：mysql, encoding, utf-8, type-conversion, latin1

我知道这已经被问过很多次了，但我很难理解整理和编码的区别。

好的，所以我们有一个 MySQL 数据库（实际上是几个），其中包含混合排序规则的表。现在，有些列`utf8_unicode_ci`是`latin1_swedish_ci`. 从那以后，我们将其`utf8_unicode_ci`用作默认值。但是我们在 latin1 中有很多“遗留”列。

我们喜欢一致性，并希望将所有列转换为 utf8。幸运的是，我们 99.9% 的数据是英文的，其中（字面上）有几条记录有西班牙地址（波浪号）。对我们来说非常简单的东西，但我们希望以“正确的方式”做到这一点并完全支持任何语言。因此，utf8_unicode。

我们宁愿不必遍历每个表中的每一列并进行更改。是否有一个简单的脚本可以将每一列转换为`utf8_unicode_ci`?

另外，我们需要寻找哪些陷阱？我的意思是，如果我错了，并且有我不知道的俄语或日语记录，那么我会有问题吗？

也许这应该是一个附带问题，但对于编码，UTF8 更好，因为它可以存储任何语言，对吗？例如，每个字符将有 2 或 4 个字节来表示它在数千个字符的“全局”字母表中应该是什么？对不起，如果这个类比听起来很愚蠢但试图理解。排序规则就是我查询时它们的排序方式。因此，如果字符像`A8 9F`字母`H`和`B3 2E`字母一样存储，`e`那么`H`将首先出现，因为`A8`出现在前面`B3`？

哈，我现在头晕。抱歉，如果这似乎是三个不同的问题，但是当我去管理层说我需要转换列时，这就是为什么....

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T16:16:54.203

想到的最简单的方法是：

1.  创建备份数据库`create database olddb like dbname`；
2.  将所有数据和结构导出到转储：`mysqldump dbname > dbname.sql`
3.  将所有内容导入备份：`mysql -D olddb < dbname.sql`
4.  只导出表结构：`mysqldump --no-data olddb > structure.sql`
5.  使用您选择的文本编辑器打开 structure.sql 并将所有内容替换`latin1_swedish_ci`为`utf8_unicode_ci`
6.  删除数据库：`drop database dbname`轻松清除所有表。
7.  使用 utf8 重新创建数据库： `create schema dbname default character set utf8 collate utf8_swedish_ci`
8.  将您更改的结构导入新数据库：`mysql -D dbname < structure.sql`. 此时，您应该在 olddb 中拥有整个旧数据库，并在 dbname 中拥有一个完全为 utf8 的空数据库。
9.  对于数据库中的每个表，使用`insert into dbname.tbl select * from olddb.tbl`. 如果有很多表，您可以通过导出输出`show tables from olddb`并在其周围添加插入 sql 来生成一个 sql 脚本来执行此操作。
10.  检查结果，如果您满意，`drop database olddb`

这个过程可能会更短一些，不幸的是 MySQL 不再支持数据库重命名。

# javascript - 如何访问类函数中的类变量？

> ID：13398795
> 
> 赞同：1
> 
> 时间：2012-11-15T13:47:07.870
> 
> 标签：javascript, typescript

我有以下代码，我尝试用一​​个名为 Modal 的类替换 createModal。然而，当我尝试这个打字稿给我错误并说“当前范围内不存在链接”时：

```
module Admin.MyAccount.Access {

    export function createModal(link: Link) {
        link.Modal.$Modal = $.modal({
            resizeOnLoad: true
        });
        link.Modal.$Modal.applyTemplateSetup()
    }

    export class Modal {
        link: Link;
        constructor (link: Link) {
            this.link = link;
        }
        create() {
            link.Modal.$Modal = $.modal({      // < Error here
                resizeOnLoad: true
            });
            link.Modal.$Modal.applyTemplateSetup() // < Error here
        }

    }

} 
```

当我使用该函数时，我这样调用该函数：

```
 createModal(link); 
```

我在这里做错了吗？为什么我无法访问 create() 内部的链接？我也可以用静态函数来做到这一点。这会更容易吗，因为我不必调用 new 来创建 Modal 的新实例？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T14:01:03.460

您需要添加`this`到调用中，因为您需要访问类范围。

* * *

至于选择使用或不使用`static`归结为您如何使用该对象。您是否有对象的多个实例，但始终只需要它的 1 个副本？如果是这样，请使用`static`.

这意味着您的所有模态都将链接在一起，并且始终只能有一个。

[在javascript中使用静态](http://justjs.org/js-oop/static-methods-in-javascript/)

> 静态函数（即无论您创建多少对象，该函数只有一个副本）对于实用程序函数非常方便。

# django - 排除查询集对象的字段

> ID：13398801
> 
> 赞同：0
> 
> 时间：2012-11-15T13:47:24.420
> 
> 标签：django, list

**问题陈述：**在 Django API 中进行以下查询。

表：产品

领域：

```
id  int   primary_key

class_id   int

class_content    CharField 
```

每个 class_id 都有多个类内容。

对于两个不同的类 id，有相同和不同的 class_content。

我想列出两个class_id之间的区别：

以下是我如何在原始 SQL 中创建查询：

例如：在 class_id = 1 和 class_id =2 之间产生差异

**询问：**

```
SELECT * FROM Product 

WHERE class_id = 1 && class_content NOT IN

(SELECT class_content FROM Product WHERE class_id = 2); 
```

此查询工作正常，并给出了 class_id 1 和 2 之间的区别。我希望在 django 中执行此查询，我无法从 django API 中得出相同的结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T13:51:06.120

这应该有效：

```
Product.objects.filter(class_id=1).exclude(class_content__in=Product.objects.filter(class_id=2).values_list('class_content', flat=True)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T13:51:28.977

```
lista = Product.objects.values('class_content').filter(class_id=2)
Product.objects.filter(class_id = 1).exclude(class_content__in=lista) 
```

# c# - 带有 NAudio 和 WPFSoundVisualizationLib 的频谱分析仪

> ID：13398802
> 
> 赞同：6
> 
> 时间：2012-11-15T13:47:27.673
> 
> 标签：c#, audio, fft, naudio

我正在开发 C#4.0/WPF 实时频谱分析仪（作为另一个项目的基础）。我使用 NAudio 最新版本在声卡上获取实时音频输出，并使用 WPFSoundVisualizationLib (http://wpfsvl.codeplex.com/) 获取 Spectrum Analyzer WPF Control。有了这个神奇的工具，工作几乎完成了，但它不能正常工作:-(

我有一个功能性 Spectrum，但信息不是权利，我不明白问题出在哪里......（我已经将我的 Spectrum 与 Equalify 进行了比较，Equalify 是 Spotify 的 Spectrum/均衡器，但我没有相同的行为）

这是我的主要课程：

```
using System;
using System.Windows;
using WPFSoundVisualizationLib;

namespace MySpectrumAnalyser
{
    public partial class MainWindow : Window
    {
        private RealTimePlayback _playback;
        private bool _record;

        public MainWindow()
        {
            InitializeComponent();
            this.Topmost = true;
            this.Closing += MainWindow_Closing;
            this.spectrum.FFTComplexity = FFTDataSize.FFT2048;
            this.spectrum.RefreshInterval = 60;
        }

        private void MainWindow_Closing(object sender, System.ComponentModel.CancelEventArgs e)
        {
            if (this._record)
            {
                this._playback.Stop();
            }
        }

        private void Button_Click_1(object sender, RoutedEventArgs e)
        {
            if (this._playback == null)
            {
                this._playback = new RealTimePlayback();
                this.spectrum.RegisterSoundPlayer(this._playback);
            }

            if (!this._record)
            {
                this._playback.Start();
                this.Dispatcher.Invoke(new Action(delegate
                {
                    this.btnRecord.Content = "Stop";
                }));
            }
            else
            {
                this._playback.Stop();
                this.Dispatcher.Invoke(new Action(delegate
                {
                    this.btnRecord.Content = "Start";
                }));
            }

            this._record = !this._record;
        }
    }
} 
```

还有我的环回分析器（它实现了 ISpectrumPlayer 以与 WPFSoundVisualizationLib Spectrum 控件一起使用）。

LoopbackCapture 继承 NAudio.CoreAudioApi.WasapiCapture。

从 Wasapi 接收的数据是一个字节数组（32 位 PCM，44.1kHz，2 通道，每个样本 32 位）

```
using NAudio.Dsp;
using NAudio.Wave;
using System;
using WPFSoundVisualizationLib;

namespace MySpectrumAnalyser
{
    public class RealTimePlayback : ISpectrumPlayer
    {
        private LoopbackCapture _capture;
        private object _lock;
        private int _fftPos;
        private int _fftLength;
        private Complex[] _fftBuffer;
        private float[] _lastFftBuffer;
        private bool _fftBufferAvailable;
        private int _m;

        public RealTimePlayback()
        {
            this._lock = new object();

            this._capture = new LoopbackCapture();
            this._capture.DataAvailable += this.DataAvailable;

            this._m = (int)Math.Log(this._fftLength, 2.0);
            this._fftLength = 2048; // 44.1kHz.
            this._fftBuffer = new Complex[this._fftLength];
            this._lastFftBuffer = new float[this._fftLength];
        }

        public WaveFormat Format
        {
            get
            {
                return this._capture.WaveFormat;
            }
        }

        private float[] ConvertByteToFloat(byte[] array, int length)
        {
            int samplesNeeded = length / 4;
            float[] floatArr = new float[samplesNeeded];

            for (int i = 0; i < samplesNeeded; i++)
            {
                floatArr[i] = BitConverter.ToSingle(array, i * 4);
            }

            return floatArr;
        }

        private void DataAvailable(object sender, WaveInEventArgs e)
        {
            // Convert byte[] to float[].
            float[] data = ConvertByteToFloat(e.Buffer, e.BytesRecorded);

            // For all data. Skip right channel on stereo (i += this.Format.Channels).
            for (int i = 0; i < data.Length; i += this.Format.Channels)
            {
                this._fftBuffer[_fftPos].X = (float)(data[i] * FastFourierTransform.HannWindow(_fftPos, _fftLength));
                this._fftBuffer[_fftPos].Y = 0;
                this._fftPos++;

                if (this._fftPos >= this._fftLength)
                {
                    this._fftPos = 0;

                    // NAudio FFT implementation.
                    FastFourierTransform.FFT(true, this._m, this._fftBuffer);

                    // Copy to buffer.
                    lock (this._lock)
                    {
                        for (int c = 0; c < this._fftLength; c++)
                        {
                            this._lastFftBuffer[c] = this._fftBuffer[c].X;
                        }

                        this._fftBufferAvailable = true;
                    }
                }
            }
        }

        public void Start()
        {
            this._capture.StartRecording();
        }

        public void Stop()
        {
            this._capture.StopRecording();
        }

        public bool GetFFTData(float[] fftDataBuffer)
        {
            lock (this._lock)
            {
                // Use last available buffer.
                if (this._fftBufferAvailable)
                {
                    this._lastFftBuffer.CopyTo(fftDataBuffer, 0);
                    this._fftBufferAvailable = false;
                    return true;
                }
                else
                {
                    return false;
                }
            }
        }

        public int GetFFTFrequencyIndex(int frequency)
        {
            int index = (int)(frequency / (this.Format.SampleRate / this._fftLength / this.Format.Channels));
            return index;
        }

        public bool IsPlaying
        {
            get { return true; }
        }

        public event System.ComponentModel.PropertyChangedEventHandler PropertyChanged;
    }
} 
```

WPF 控件每 60 毫秒调用一次 GetFFTData 以更新 Spectrum。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-07-16T16:36:18.550

我可能回答这个问题有点晚了，但我们到了。

你快到了。您只需要提供 FFT 返回的复数的幅度而不是 X 值。

所以在 for 循环中，而不是这个：

```
this._lastFftBuffer[c] = this._fftBuffer[c].X; 
```

做这个：

```
float amplitude = (float)Math.Sqrt(this._fftBuffer[c].X * this._fftBuffer[c].X + this._fftBuffer[c].Y * this._fftBuffer[c].Y);
this._lastFftBuffer[c] = amplitude; 
```

干杯!

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-27T08:02:32.317

[我有一个使用另一个问题](https://stackoverflow.com/a/20414331/2167850)的代码的工作频谱分析仪。这是一个非常粗糙的版本，但您只需稍作修改即可使用它。

我不知道您的代码实际上有什么问题，但至少提供的代码对我有用。如果您在使用它时仍然有不正确的光谱，则问题出在其他地方。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T16:47:57.930

> 你的输入波格式肯定是 IEEE 浮点数吗？如果它是 32 位 int 怎么办？

我猜这是一个 IEEE 浮点数......这在[MSDN 中没有解释 这里](http://msdn.microsoft.com/en-us/library/windows/desktop/dd370859%28v=vs.85%29.aspx)

我试图将我的字节数组转换为 Int32 数组（以浮点数形式），但结果最差：

```
private float[] ConvertByteToFloat(byte[] array, int length)
{
    int samplesNeeded = length / 4;
    float[] floatArr = new float[samplesNeeded];

    for (int i = 0; i < samplesNeeded; i++)
    {
        floatArr[i] = (float)BitConverter.ToInt32(array, i * 4);
    }

    return floatArr;
} 
```

# c# - 为什么这里不支持隐藏

> ID：13398809
> 
> 赞同：1
> 
> 时间：2012-11-15T13:48:11.490
> 
> 标签：c#, scope

见下面的代码：

```
public static int Main()
{
    int j = 20;
    for (int i=0; i < 10; i++)
    {
        int j = 30;    //can't do this
        Console.WriteLine(j + i);
    }
    return 0;
} 
```

C# 中发生错误，因为这里它不进行变量隐藏并给出错误：

**不能在此范围内声明名为“j”的局部变量，因为它会给已在“父或当前”范围中使用的“j”赋予不同的含义。**

如果我们在 c++ 中运行上面的程序，它可以工作，在 c++ 中它支持在这种情况下隐藏变量。

现在我的问题是，这背后的原因是什么？
为什么 C# 开发者决定不支持隐藏在这里。？
为什么 C++ 允许隐藏在这里？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T13:49:52.843

C++ 保留这样的内容是为了与 C 兼容。这在 C 中是允许的，因此在 C++ 中也是允许的。

C# 没有也不需要兼容性。所以这个“隐藏”被淘汰了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T13:50:32.037

这些事情的答案总是一样的：因为没有人评估、指定、设计、实施、测试、记录、交流、翻译和支持该功能。在这种情况下，我会想象只是因为没有明显的好处（您可以只使用不同的变量名称，从而避免所有歧义问题），并且由于遗留原因而没有预先存在的需要具有该功能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T13:54:26.973

理由是认为在同一个函数中有两个变量可能会造成混淆并且没有必要。

# android - 地图视图安卓 4.1.2

> ID：13398812
> 
> 赞同：2
> 
> 时间：2012-11-15T13:48:14.627
> 
> 标签：android, maps

我是 Android 新手，我正在尝试创建 MapView（Android 4.1.2），但是当我启动模拟器时，它只显示灰色网格。我有很多错误：

```
11-15 14:04:42.916: E/MapActivity(691): Couldn't get connection factory client 
```

和很多这些错误：

```
 11-15 13:57:04.186: W/System.err(691):  at android_maps_conflict_avoidance.com.google.googlenav.datarequest.DataRequestDispatcher$DispatcherServer.run(DataRequestDispatcher.java:1702) 
```

当我创建密钥时，我的指纹在 SHA1 中，而不是在 MD5 中。我将 SHA1 翻译成 MD5 并使用它。指纹在 SHA1 中的事实可能有害吗？

我能做些什么？

这是我写的。

AndroidManifest

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="it.alcos"
android:versionCode="1"
android:versionName="1.0" >
    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
    <uses-permission android:name="android.permission.ACCESS_LOCATION" />
    <uses-permission android:name="android.permission.ACCESS_GPS" />

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="16" />

<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >

    <uses-library android:name="com.google.android.maps" />

    <activity
        android:name="it.alcos.MapsActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application> 
```

我创建 mapView 的布局。我确实插入了地图键，我把它藏起来了：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:id="@+id/LinearLayout1"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical"
tools:context=".MapsActivity" >

<com.google.android.maps.MapView
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/map_view"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:apiKey="********myKey*********"
    android:clickable="true"
    android:enabled="true" /> 
</LinearLayout> 
```

类.java。我在地图上添加了缩放，仅此而已。

```
public class MapsActivity extends MapActivity {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_maps);
    MapView mapview = (MapView) findViewById(R.id.map_view);
    mapview.setBuiltInZoomControls(true);
}

protected boolean isRouteDisplayed() {
    return false;
} 
```

}

# csv - 如何使用 GnuPlot 从存储在带有双引号的单独列中的 CSV 文件日期和时间绘制时间序列图？

> ID：13398814
> 
> 赞同：4
> 
> 时间：2012-11-15T13:48:20.420
> 
> 标签：csv, gnuplot

我想用 x 数据绘制数据作为时间值。csv 文件如下所示

```
"","12/09/29","00:19:43","  1787","    12","12"
"","12/09/29","00:19:48","  1787","    12","12"
"","12/09/29","00:19:53","  1785","    13","12"
"","12/09/29","00:19:58","  1785","    12","12" 
```

这里的问题是双引号的使用。我试过这个

```
set timefmt '"%y/%m/%d","%H:%M:%S"'
set datafile separator ","
plot 'myFile.csv' using 2:3:4 with lines 
```

但它不识别时间格式。

如何使用双引号和逗号分隔符从两个分隔列中识别时间值？

谢谢您的帮助。

托马斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T14:09:09.630

如果引号是问题所在，并且您在启用管道的 posix 系统上，则可以轻松删除它们：

```
plot '< sed -e s/\"//g test.dat' using 2:4:5 
```

请注意，`using`规范也发生了变化（`2:4:5`而不是`2:3:4`），因为您的时间格式需要**2 列**。

* * *

请注意，我认为引号没有问题：

```
set datafile sep ','
set xdata time
set timefmt '%y/%m/%d,%H:%M:%S'  #no quotes in timefmt -- Gnuplot removes them when parsing the datafile.
plot 'test.dat' using 2:4:5 with lines 
```

为我工作。

所以我真的认为问题在于您使用规范指向第三列（包含时间信息）而不是第四列。最后，您可以使用`using 2:4`-- 您实际上从未将第 5 列用于此处的任何内容来制作相同的图。

# git - 在 Git 中查找提交 ID 的提交日志

> ID：13398819
> 
> 赞同：96
> 
> 时间：2012-11-15T13:48:43.597
> 
> 标签：git

我想按 ID 查看提交。例如，我想知道为该 ID 提交的代码，例如：

```
git log <commit_id> 
```

这将显示与此 ID 对应的已提交代码和提交消息。

* * *

## 回答 #1

> 赞同：176
> 
> 时间：2012-11-15T13:52:04.573

```
git show <commit_id> 
```

可能是您正在寻找的机器人。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2018-12-08T17:36:57.270

@SethRobertson 的解决方案对我有用，但它显示了差异。我想看到它就像`git log`展示它一样。所以添加`--no-patch`：

```
git show <commit_id> --no-patch 
```

我从 - [https://stackoverflow.com/a/31448684/1828637学到了这一点](https://stackoverflow.com/a/31448684/1828637)

# actionscript-3 - 弹性树文件夹的图标

> ID：13398820
> 
> 赞同：1
> 
> 时间：2012-11-15T13:48:46.670
> 
> 标签：actionscript-3, apache-flex, flex3

我有一个弹性树，我有一些文件夹中没有任何子文件夹。

结果是它们显示为叶项。有什么办法可以避免这种情况并让它们显示为文件夹？他们也不应该显示打开/关闭图标。

```
<mx:Tree borderThickness="0" defaultLeafIcon="{leafIcon}" folderClosedIcon="{folderClosedIcon}" folderOpenIcon="{folderOpenIcon}" height="100%" id="testTree"
                                     itemClick="test.entityChecked();" itemClose="test.removeEntities(event)" itemOpen="test.addEntityChildren(event)" variableRowHeight="true"
                                     verticalScrollPolicy="off" width="100%" x="0" y="0"/> 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T15:59:19.983

您可以使用 setItemIcon() 强制文件夹正确显示。唯一的事情是你必须创建一个回调来检查树是否有空文件夹，然后相应地设置它。

# linux - 为什么客户端在 TCP 握手期间发送 RST 数据包？

> ID：13398830
> 
> 赞同：1
> 
> 时间：2012-11-15T13:49:19.580
> 
> 标签：linux, networking, tcp, network-programming, ubuntu-12.04

我对我的客户端程序无法与远程 Web 服务器建立 TCP 连接的问题感到困惑。

[**场景**]

基于 ubuntu server 12.04 LTS 的客户端程序。

192.168.1.118（客户端程序）<--------TCP---------> sync.oncecode.com（网络服务器）

[**现象**]

客户端发送 SYN，Web 服务器回复 SYN/ACK，客户端立即发送 RST。我在 TCP/IP 标头中看不到任何异常。有人可以告诉我这里可能发生的事情吗？我已经没有想法了......

[ **Tcpdump 日志**]

```
21:31:31.622576 IP 192.168.1.118.51441 > sync.oncecode.com.http: Flags [S], seq 3468888759, win 5360, options [mss 536,sackOK,TS val 40855676 ecr 0,nop,wscale 7], length 0

        0x0000:  4500 003c 537d 4000 4006 ee75 c0a8 0176  E..<S}@.@..u...v
        0x0010:  2a79 0c32 c8f1 0050 cec3 0ab7 0000 0000  *y.2...P........
        0x0020:  a002 14f0 f8f7 0000 0204 0218 0402 080a  ................
        0x0030:  026f 687c 0000 0000 0103 0307            .oh|........

21:31:31.690808 IP sync.oncecode.com.http > 192.168.1.118.51441: Flags [S.], seq 1535159088, ack 3468888760, win 5792, options [mss 1440,sackOK,TS val 971694021 ecr 40830368,nop,wscale 6], length 0

        0x0000:  4500 003c 0000 4000 3606 4bf3 2a79 0c32  E..<..@.6.K.*y.2
        0x0010:  c0a8 0176 0050 c8f1 5b80 ab30 cec3 0ab8  ...v.P..[..0....
        0x0020:  a012 16a0 6d6e 0000 0204 05a0 0402 080a  ....mn..........
        0x0030:  39ea dfc5 026f 05a0 0103 0306            9....o......
21:31:31.690826 IP 192.168.1.118.51441 > sync.oncecode.com.http: Flags [R], seq 3468888760, win 0, length 0

        0x0000:  4500 0028 0000 4000 4006 4207 c0a8 0176  E..(..@.@.B....v
        0x0010:  2a79 0c32 c8f1 0050 cec3 0ab8 0000 0000  *y.2...P........
        0x0020:  5004 0000 145a 0000 
```

[**附加**] 防火墙似乎已关闭，我检查了它

```
olele@ubuntu:~$ sudo iptables -L

Chain INPUT (policy ACCEPT)

target     prot opt source               destination

Chain FORWARD (policy ACCEPT)

target     prot opt source               destination

Chain OUTPUT (policy ACCEPT)

target     prot opt source               destination 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T10:13:39.230

tihuBird，如果我误解了以下任何内容，请纠正我：

数据包捕获显示客户端的`SYN`Timestamp[选项](https://www.rfc-editor.org/rfc/rfc1323#page-12)值为 ，`40855676`而服务器的`SYN+ACK`回复包含 的 Timestamp Echo Reply `40830368`。

查询的第一行必须是服务器已经回复了一个`SYN`不是数据包捕获中的那个。

> 正确的 TCP 协议栈会在握手期间检查 TSecr 是否有效？

并非完全不合理：回显回复已返回过去的时间戳值。

> 谁能给点建议，为什么重启路由器后问题仍然存在。但是重启了客户端服务器，问题就解决了。是什么原因导致Web Server 响应缓慢。

因此，您重新启动了正在为客户端执行 NAT 的路由器（？），问题仍然存在。您重新启动客户端并解决问题？

我会建议您在路由器的客户端和面向 Internet 的一侧运行数据包捕获。如果没有这些证据，其他任何事情都只是猜测，您将不得不等到问题再次出现。

我怀疑服务器的响应速度可能并不慢，并且客户端计算机上的网络接口卡/驱动程序存在问题。客户端+路由器的数据包捕获应该能够反驳这个假设。

请记住，大多数现代网卡都有各种与性能相关的 TCP“卸载”选项，可能其中一个被巧妙地破坏了，重新启动可以清除这种情况。禁用卸载功能（并让操作系统管理更多 TCP 细节）可能也解决了问题，并证明 NIC 是原因。

# redmine - 将来自一个 Redmine 安装的数据集成到另一个

> ID：13398832
> 
> 赞同：1
> 
> 时间：2012-11-15T13:49:28.620
> 
> 标签：redmine, data-migration

将旧 Redmine 实例中的票证和其他内容集成到另一个实例中的最佳方法是什么？我有一个 Redmine 实例，其中已经有很多数据。现在我想将另一个集成到这个安装中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T11:43:19.203

看看[这个插件](https://github.com/leovitch/redmine_importer)。它可能会帮助你。

否则，我建议你写一个`rake`任务来完成这项工作。你可以从这个任务中得到启发`lib/tasks/migrate_from_mantis.rake`。您将面临的主要问题是外国 id（用户、跟踪器、...）的正确映射，因为您的旧 redmine 的 id 将与您的新 id 重叠。

*   首先集成您的参考资料（用户，...）以获取新 ID。
*   导出您的票证，无需参考 ID（即 user_id，...），但带有标签或其他字段（如果是用户的登录名或电子邮件），您可以使用 activerecord 方法 ( ) 轻松找到`find_by_xxx`。
*   整合您的门票。

我希望它能给你一个好的起点......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T19:44:45.890

另一种选择是使用任务适配器应用程序，它可以传输任务（但不能传输评论或附件）：[http ://www.taskadapter.com/](http://www.taskadapter.com/)

# java - 广度优先搜索Java最短距离

> ID：13398834
> 
> 赞同：0
> 
> 时间：2012-11-15T13:49:44.220
> 
> 标签：java

我写了一个 bfs 算法，但我知道我必须找出两点之间的最短距离。我可以在我的代码中以某种方式实现它吗？

```
public static void bfsearch(Graph<Vertex, Edge<Vertex>> G, Vertex S){

        State[] color = new State [G.getNumberVertices()];
        int[] dist = new int [G.getNumberVertices()];
        Vertex[] pred = new Vertex [G.getNumberVertices()];
        Vertex temp;

        for(int i=0; i<color.length; i++){
            color[i] = State.WHITE;
            dist[i] = Integer.MAX_VALUE;
            pred[i] = null;
        }
        color[S.getId()] = State.GREY; dist[S.getId()] = 0; pred[S.getId()] = null;     
        Queue<Vertex> Q = new LinkedList<Vertex>();
        Q.add(S);
        while(!Q.isEmpty()){
            temp = Q.remove();
            for(Vertex x:G.getNeighbours(temp)){
                if(color[x.getId()] == State.WHITE ){
                    color[x.getId()] = State.GREY;
                    dist[x.getId()] = dist[temp.getId()] + 1;
                    pred[x.getId()] = temp;
                    Q.add(x);
                }
            }
            color[temp.getId()] = State.BLACK;
            System.out.println("(Node "+temp+", "+"Pred="+pred[temp.getId()]+" Distance="+dist[temp.getId()]+")");
        }
    } 
```

# r - which() - 序列上的命令找不到模式

> ID：13398840
> 
> 赞同：1
> 
> 时间：2012-11-15T13:50:20.523
> 
> 标签：r

> **可能重复：**
> [为什么这些数字不相等？](https://stackoverflow.com/questions/9508518/why-are-these-numbers-not-equal)

在 Gnu R 中：

```
which(seq(0, 1600, 0.05) == 0.3) returns
integer(0) 
```

但是这个：

```
which(round(seq(0, 1600, 0.05),2) == 0.3) returns
[1] 7 
```

函数会发生什么`seq()`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-15T14:03:28.133

这本质上是关于浮点数比较的 R FAQ 7.31——导致著名的“每个计算机科学家都应该了解浮点数的知识”。

简而言之，use`identical()`和其他辅助函数相对于一个小值 \epsilon 进行比较，因为浮点类型不能具有完全相等。

# php - 制作 FFmpeg 缩略图？

> ID：13398842
> 
> 赞同：2
> 
> 时间：2012-11-15T13:50:29.690
> 
> 标签：php, ffmpeg

我是 FFmpeg 的新手，但作为一个学习一些 mysql 数据库的项目，我正在尝试创建一个视频上传网站。

当我尝试使用此代码制作缩略图时：

shell_exec("/usr/local/bin/ffmpeg -i anim.flv -an -ss 00:00:03 -an -r 1 -vframes 1 -y test.jpg");

没有任何反应，没有图像出现在与 anim.flv 相同的目录中，代码是否有问题或可能是什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T13:55:55.137

这对我有用：`ffmpeg -ss 00:00:10 -i $file -y -an -vframes 1 $dir/$name.png`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T14:02:19.913

试试这个命令：

```
$infile = 'anim.flv';
$outfile = 'test.jpg';
exec("/usr/local/bin/ffmpeg -i " . escapeshellarg($infile) . " -an -ss 00:00:03 -an -r 1 -vframes 1 -y " . escapeshellarg($outfile) . " 2>&1", $output, $returnValue);
if (!file_exists($outfile)) {
     die("Could not generate thumbnail. ffmpeg output: \n\n" . implode("\n", $output));
} 
```

这样，当 ffmpeg 不起作用时，您将从 ffmpeg 获得一些详细的输出（“2>&1”将 ffmpeg 的错误输出重定向到标准输出；否则您将无法检索它）。

我有 2 条建议可以解决您的命令；首先，在指定输出文件之前添加参数“-vcodec mjpeg -f rawvideo”，其次，对输入和输出使用绝对路径，这样您就不必担心脚本的当前工作目录在哪里。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-14T11:06:51.387

试试这个代码

```
$flvfile = 'clock.flv';
$imagefile = 'test.jpg';
exec('ffmpeg  -i ' . $flvfile . ' -f mjpeg -vframes 1 -s 150x150 -an ' . $imagefile . ''); 
```

# maven - 通过 slf4j 作为单独的 osgi 包进行 logback

> ID：13398847
> 
> 赞同：0
> 
> 时间：2012-11-15T13:50:46.490
> 
> 标签：maven, logging, osgi, slf4j, apache-karaf

我们有`osgi`应用程序，`karaf`并希望在 bundle jar 中有日志记录属性，以将日志记录配置保存在源中（目前它们在`karaf/etc/org.ops4j.pax.logging.cfg`）

更新：事实上，现在我们将日志配置保存在 Karaf CM 管理服务中，这是一个问题，因为在每个版本中，我们都应该向我们的操作团队编写特殊说明，以进行任何微小的日志更改。此外，我们有多个 karaf 节点（约 10 个），并且为每个节点重复这些操作是一项复杂且容易出错的任务。当然我们可以安装`Cellar`到每个 karaf 节点，但它会使 osgi 环境复杂化并且需要一些支持，所以最简单的方法就是将配置保存在源代码中

我已经搜索了[最简单的方法来创建一个单独的包](http://blog.kornr.net/index.php/2008/12/18/osgi-logging-putting-it-all-together#c115)，其中包含所有依赖项（logback、slf4j、config）的实际日志记录内容，然后`org.slf4`从它们中导出。

我试过这个`pom.xml`：

```
<build>
    <plugins>
        <plugin>
            <groupId>org.apache.felix</groupId>
            <artifactId>maven-bundle-plugin</artifactId>
            <configuration>
                <unpackBundle>true</unpackBundle>
                <instructions>
                    <Embed-Dependency>*;groupId=!junit|org.springframework|log4j|javax.jms|javax.mail</Embed-Dependency>
                    <Embed-Transitive>false</Embed-Transitive>
                    <Embed-Directory>target/dependency</Embed-Directory>
                    <Embed-StripGroup>true</Embed-StripGroup>
                    <Export-Package>org.slf4j</Export-Package>
                    <Import-Package>
                        *
                    </Import-Package>
                </instructions>
            </configuration>
        </plugin>
        <plugin>
            <artifactId>maven-dependency-plugin</artifactId>
            <executions>
                <execution>
                    <id>copy-dependencies</id>
                    <phase>package</phase>
                    <goals>
                        <goal>copy-dependencies</goal>
                    </goals>
                    <configuration>
                        <excludeGroupIds>junit,org.springframework,log4j</excludeGroupIds>
                    </configuration>
                </execution>
            </executions>
        </plugin>
    </plugins>
</build>

<dependencies>
    <dependency>
        <groupId>org.slf4j</groupId>
        <artifactId>slf4j-api</artifactId>
        <version>${slf4j.version}</version>
    </dependency>

    <dependency>
        <groupId>ch.qos.logback</groupId>
        <artifactId>com.springsource.ch.qos.logback.classic</artifactId>
        <version>0.9.15</version>
    </dependency>

    <dependency>
        <groupId>ch.qos.logback</groupId>
        <artifactId>com.springsource.ch.qos.logback.core</artifactId>
        <version>0.9.15</version>
    </dependency> 
```

但它会捆绑清单很多额外的依赖项，例如`javax.mail/jms`：

```
Import-Package: javax.jms,javax.mail,javax.mail.internet,javax.management,javax.naming,javax.servlet,javax.servlet.http,javax.sql,javax.xml.parsers,org.codehaus.janino,org.slf4j;version="1.6",org.xml.sax,org.xml.sax.helpers,sun.reflect 
```

当然，将所有这些不必要的东西部署到 karaf 以解决它们并不是一个好方法。

出了什么问题或如何构建一个包含所有日志依赖项的单个包？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T08:06:26.437

实际上，我认为没有必要创建这样的捆绑包。Pax Logging[通过 Configuration Admin Service 接收其配置](http://www.ops4j.org/projects/pax/logging/reference/configuration.html)。因此，您可以从任何捆绑包中更新该配置。无需重新包装。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-18T10:51:39.423

只需在指定位置（例如 /configuration/configuration.json 中的 JSON 文件）创建一个包含配置数据的包。然后制作一个扩展程序，在更改捆绑包并更新配置管理员时读取此数据。

我写了这样一个扩展器，你可以找到它[http://jpm4j.org/#!/p/osgi/aQute.configurer?tab=readme](http://jpm4j.org/#!/p/osgi/aQute.configurer?tab=readme)

源代码包含在 JAR 中：[http ://repo.jpm4j.org/rest/bundle/51C83986E4B06EF1574B84F7/c9256d19f155d699ed0d18559bbb80441ac68ff7](http://repo.jpm4j.org/rest/bundle/51C83986E4B06EF1574B84F7/c9256d19f155d699ed0d18559bbb80441ac68ff7)

# sql-server - 从服务器接收结果时发生传输级错误。错误：18 - 连接已被对等方关闭

> ID：13398849
> 
> 赞同：1
> 
> 时间：2012-11-15T13:50:58.537
> 
> 标签：sql-server

我在尝试执行“`SqlDataReader sdr = command.ExecuteReader();` 这是一个复杂的（对我而言）”程序时遇到上述异常，在抛出此异常之前需要几个小时才能运行。我认为这是因为可能存在未关闭的连接，但是当我查看数据库时，只有 1 个活动连接。而@@MAX_CONNECTIONS = 32767。

当我查看 SQL 日志文件时，它显示“新连接被拒绝，因为已达到会话 ID 52 上的最大连接数。”

关于可能导致问题的任何其他想法？这是 SQL Server 2008 R2，我通过 C#.Net 在本地访问数据库。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T19:58:17.520

果然，我找到了一个`SqlDataReader sdr = command.ExecuteReader();`不在`using`街区或从未关闭的地方。现在一切都很好:-)。谢谢，弗雷德，你的帮助！

# javascript - 创建原型时引用方法

> ID：13398854
> 
> 赞同：1
> 
> 时间：2012-11-15T13:51:09.607
> 
> 标签：javascript, prototype

我觉得有点丢脸，但我对 JavaScript 中的原型设计有些东西我不理解（甚至不知道它是否可能）。
我想在创建伪类的原型时使用一种方法：

```
var Class = function() {}
Class.prototype = {
    a: function() {
        return 'ok'
    }
  , z: Class.prototype.a() // I tried with `this`/`constructor`/etc.
} // TypeError: Object [object Object] has no method 'a' the rest isn't evaluated
var test = new Class()
test.z 
```

我知道我可以这样做，但我想知道我是否仍然可以，但`Class.prototype`声明中的所有方法/属性：

```
var Class = function() {}
Class.prototype.a = function() {
    return 'ok'
}
Class.prototype.z = Class.prototype.a()
var test = new Class()
test.z // "ok" 
```

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T13:53:07.477

不，你不能。就像在定义它们的语句结束之前您不能引用任何对象属性一样：

```
var x = {
    y: 10,
    z: x.y + 5 // TypeError, cannot read property `y` of undefined
}; 
```

该变量`x`没有值（它*被*声明，因为声明被提升，但它的值是`undefined`），直到整个赋值表达式被评估。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T13:59:28.393

是的你可以。您可以这样分配`Class`：

```
var Class = function() {
 if (!Class.prototype.a){
  var proto = Class.prototype;
  proto.a = function() {
     return 'ok';
  };
  proto.z = proto.a();
 }
}

var test = new Class;
console.log(test.z); //=> "ok" 
```

另一种选择可能是使用单例来创建原型属性/方法：

```
var Class = function(){};
Class.prototype = function(){
  function a(){return 'ok';}
  return {a: a, z: a()};
}();
var test = new Class;
console.log(test.z); //=> "ok" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-15T14:09:55.497

如果您只有一个额外的属性要添加，您可以这样做：

```
(Class.prototype = {
    a: function() {
        return 'ok'
    }
}).z = Class.prototype.a(); 
```

* * *

或者您可以采用这种方法，它使用匿名函数作为临时构造函数：

```
Class.prototype = new function() {
    this.a = function() {
        return 'ok'
    }
    this.z = this.a()
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-15T14:21:21.360

首先：接受的答案是错误的。你可以。

第二：见过下面的模式吗？

```
Class.prototype = {
    constructor: Class
}; 
```

`constructor`如果要使用 访问当前对象，则该属性是必需的`this`。

第三：如果您不在属性函数中，则上下文是`window`, （`undefined`在严格模式下），而不是对象。

第四：这就是你要找的：

```
function Class() {}

Class.prototype = {
    constructor: Class, // required!

    a: function() {
        return 'ok';
    },

    z: function() {
        // 'this' is the object *in* the function
        return this.a();
    }
};

var o = new Class();
console.log(o.z()); // "ok" 
```

# objective-c - 带有objective-c的xlsx解析器

> ID：13398855
> 
> 赞同：3
> 
> 时间：2012-11-15T13:51:14.663
> 
> 标签：objective-c, xlsx

我找到了一些解析库，但它们是使用 python 或 perl 编写的。我试图翻译成objective-c，但由于我的技能包括objective-c，我无法做到。

[https://github.com/staale/python-xlsx](https://github.com/staale/python-xlsx)

[https://github.com/typester/Data-XLSX-Parser](https://github.com/typester/Data-XLSX-Parser)

如果您对制作解析器有任何提示，请与我分享。谢谢

## 修复了问题

1.  解压缩 .xlsx 文件。
2.  解析 xl/workbook.xml 以获取工作表的名称。
3.  解析 xl/sharedStrings.xml 以获取字符串。
4.  解析 xl/worksheets/sheetXXX.xml 以获取单元格的位置和值。

我使用“ZipArchive”，但我收到了一些警告，例如不推荐使用的错误。

我使用 NSXMLParser 但我不知道使用 SAX 解析器是否是最好的方法。我只使用三种方法来解析。

1.  -（布尔）解析；
2.  -(void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURIqualifiedName:(NSString *)qName 属性:(NSDictionary *)attributeDict
3.  -(void)parser:(NSXMLParser *)parser foundCharacters:(NSString *)string

# gwt - 在 gwt 客户端运行 .exe 文件

> ID：13398860
> 
> 赞同：-2
> 
> 时间：2012-11-15T13:51:20.893
> 
> 标签：gwt

在 gwt 客户端中有任何方法可以从服务器下载 exe 文件并在 gwt 客户端运行该 exe。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T14:07:07.973

不。

与其他 Javascript 方法相比，至少它不是特定于 GWT 的。那就是：如果有办法做到这一点，那么这就是浏览器中的一个巨大的错误和安全漏洞。您会在计算机媒体上全面阅读此内容，浏览器供应商会在数小时内修复（希望如此）。

您可以提供文件供下载并让用户执行它。但我怀疑这不是你想要的，特别是它没有在客户端 GWT 代码的上下文中运行。

# c++ - 使用 graphviz 绘制自定义 BGL 图

> ID：13398865
> 
> 赞同：4
> 
> 时间：2012-11-15T13:51:35.603
> 
> 标签：c++, boost, graphviz, boost-graph

我是 Boost 图形库的新手，我尝试使用 graphviz 绘制图形。

```
#include <boost/graph/adjacency_list.hpp>
#include <boost/graph/graphviz.hpp>
#include <boost/utility.hpp>                // for boost::tie
#include <iostream>
#include <utility>                          // for std::pair

using namespace boost;
using namespace std;

class V {};
class C {};

void draw_test(){
    typedef boost::adjacency_list<boost::listS, boost::listS, boost::bidirectionalS, V, C > MyGraph;
        typedef boost::graph_traits<MyGraph>::vertex_descriptor vertex_descriptor;
    MyGraph g;
    vertex_descriptor a = add_vertex(V(), g);
    vertex_descriptor b = add_vertex(V(), g);
    add_edge(a, b, g);
    write_graphviz(std::cout, g);
}

int main() {
    draw_test();

    return 0;
} 
```

但我收到以下错误：

[http://pastebin.com/KmTyyUHh](http://pastebin.com/KmTyyUHh)

我会非常感谢任何帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T17:57:31.050

[您可以在此问题 ( 1](https://stackoverflow.com/questions/7935417/how-provide-a-vertex-index-property-for-my-graph) , [2](https://stackoverflow.com/questions/5781301/why-cant-i-use-boost-graph-write-graphviz-with-outedgelist-lists-and-vertexlist) )中找到完全相同的问题。问题是 write_graphviz 需要一个顶点索引属性映射（就像许多其他 Boost.Graph 函数一样）。默认情况下，以 listS 作为 VertexList 的 adjacency_list 没有。除非你真的需要在你的第二个模板参数中`listS`简单地使用。`vecS`您可以在第一个链接答案中找到的另一种选择是创建和初始化外部顶点索引属性映射，然后使用`write_graphviz`允许您显式传递它的重载。`listS`当您需要使用或`setS`在图表中使用时，这对于多种算法非常有用。

# asp.net - 如何禁用无 cookie 的 URL？

> ID：13398867
> 
> 赞同：3
> 
> 时间：2012-11-15T13:51:49.860
> 
> 标签：asp.net, asp.net-mvc, iis-7, forms-authentication

我将我的 asp.net 应用程序从 mvc2 升级到 mvc4 并将其从 IIS6 移动到 IIS7。之后我注意到 mvc 路由生成的奇怪 url。经过一番调查，我发现这些 urls - Forms Authentication ticket。

此票证应在 url 中，仅当无法使用 cookie 时。但是在 70% 的情况下，在不同的机器（浏览器 Chrome，不确定其他）上，甚至在我没有登录的情况下，我的 url 中都有这些票证。其他用户也报告了同样的问题。

所以我尝试在 web.config 中配置 cookieless

```
<sessionState cookieless="UseCookies" /> 
```

或者

```
<sessionState cookieless="false" /> 
```

也试过

```
<forms cookieless="UseCookies" 
```

但没有任何成功。当我清除浏览器中的所有 cookie 时，它​​会在短时间内有所帮助。

有人知道如何完全禁用它，或者如何以另一种方式解决我的问题吗？

# namespaces - 使用自定义反射服务更改 WCF 数据服务中显示的实体命名空间

> ID：13398870
> 
> 赞同：0
> 
> 时间：2012-11-15T13:52:01.150
> 
> 标签：namespaces, entity, wcf-data-services

我试图让我的 WCF 数据服务在生成的 xml 中与实体的真实命名空间显示不同的实体命名空间。

考虑这个 Netflix OData 服务[http://odata.netflix.com/v2/Catalog/Languages?$select=Name](http://odata.netflix.com/v2/Catalog/Languages)

每个条目看起来像这样

```
<entry>
    ...
    <category term="Netflix.Catalog.v2.Language" .../>
    ...
</entry> 
```

在我自己的代码中，“类别术语”值是我的实体类的命名空间，它不像我想要的那样干净。事实上，它是*OurProductName.CustomerName* .Web.RestApi.v2.Entities.Entityname。

是否可以通过在实体上设置属性或其他方式来更改它？

问候， 马蒂亚斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T18:12:08.607

如果您使用的是反射提供程序，则目前无法更改。可以编写自定义提供程序，在这种情况下您可以重命名任何内容，但工作量要大得多。

# c# - 在 ASP.net 代码隐藏中打开一个新窗口

> ID：13398871
> 
> 赞同：2
> 
> 时间：2012-11-15T13:52:03.997
> 
> 标签：c#, asp.net, response

我有以下代码：

```
protected void Page_Load(object sender, EventArgs e)
{
        byte[] buffer = null;
        buffer = File.ReadAllBytes("C:\\myfile.pdf");
        HttpContext.Current.Response.ContentType = "application/pdf";
        HttpContext.Current.Response.OutputStream.Write(buffer, 0, buffer.Length);
        HttpContext.Current.Response.End();
} 
```

我想在当前页面旁边为 pfd 文件打开第二个窗口，页面加载来自哪里。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T13:56:58.567

无法从代码隐藏文件打开新窗口。触发此 Page_Load 事件的页面的链接必须具有`target="_blank"`在新窗口中打开它的属性。例如：

`<a href="DownloadPdf.aspx" target="_blank">Download PDF<a>`

附带说明一下，如果这是 ASPX 文件的唯一功能，您可能需要考虑改用 HttpHandler。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T14:00:41.273

为此，您需要将 PDF 上传到应用程序中可以呈现给用户的路径，然后注册一些 javascript 以在新窗口中打开 PDF：

```
protected void Page_Load(object sender, EventArgs e)
{
    byte[] buffer = null;
    buffer = File.ReadAllBytes("C:\\myfile.pdf");
    //save file to somewhere on server, for example in a folder called PDFs inside your application's root folder
    string newFilepath = Server.MapPath("~/PDFs/uploadedPDF.pdf");
    System.IO.FileStream savedPDF = File.Create(newFilepath);
    file.Write(buffer, 0, buffer.Length);
    file.Close();

    //register some javascript to open the new window
    Page.ClientScript.RegisterStartupScript(this.GetType(), "OpenPDFScript", "window.open(\"/PDFs/uploadedPDF.pdf\");", true);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T13:56:17.027

你不能从响应中做到这一点。

如果您可以控制*导致*此页面加载的超链接，您可以给它一个 attrbute `target="_blank"`，它会要求浏览器在新窗口中打开该链接。

# c# - 在VS2010中打开Silverlight后出现异常

> ID：13398873
> 
> 赞同：1
> 
> 时间：2012-11-15T13:52:09.917
> 
> 标签：c#, visual-studio-2010, silverlight, exception

我在 vs2010 中打开 silverlight 应用程序，silverlight 版本 = 3，选择在新网站中托管 silverlight 应用程序的单选按钮。

然后页面在设计器视图中加载异常。

异常是：System.NullReferenceException 对象引用未设置为对象的实例。

请建议如何解决这个错误？![在此处输入图像描述](../Images/e6b1172c755e36b1df2247460212502b.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T19:32:53.210

您似乎收到了错误，因为未安装 Silverlight 3 Developer Runtime。

确保您已下载并安装以下内容：

[Silverlight 3 SDK](http://www.microsoft.com/downloads/details.aspx?displaylang=en&FamilyID=d09b6ecf-9a45-4d99-b752-2a330a937bc4)
[Silverlight 3 开发人员运行时](http://go.microsoft.com/fwlink/?LinkID=143433)

致谢：这些链接取自[Karine Bosch 的这篇博客文章](http://karinebosch.wordpress.com/2009/09/27/visual-studio-2010-and-silverlight-3/)。

# maven - 无法在测试罐中实例化类

> ID：13398877
> 
> 赞同：1
> 
> 时间：2012-11-15T13:52:20.463
> 
> 标签：maven, cmd, testng

我有一个项目，它只包含所有从一个抽象基类扩展的测试类。测试在 intellij 中运行良好，并且在使用指定的正确配置文件运行 mvn clean install 时。

我想要做的是创建一个测试 jar 并从命令行运行测试，所以我使用这些命令：

```
mvn -DoutputDirectory=target -f pom.xml dependency:copy-dependencies 
```

第一个命令是获取所有依赖项并将它们放在目标文件夹中创建的测试 jar 旁边。

```
java -cp .;target/* org.testng.TestNG -testjar target/my-test-jar.jar -xmlpathinjar sanity.xml 
```

我明白了：

```
[TestNG] [ERROR]
Cannot instantiate class com.myPackage.MyTestClass 
```

该类肯定存在，我可以从 intellij 内部运行 sanity.xml。

最奇怪的是我可以从我的项目中删除java文件，然后把这个：

```
public static void main(String[] args){
    args = new String[4]
    args[0] = "-testjar"
    args[1] = "target/my-test-jar.jar"
    args[2] = "-xmlpathinjar"
    args[3] = "sanity.xml"
    org.testng.TestNG.main(args)
} 
```

在我项目的另一个测试类中，它将设法从 jar 文件中实例化 MyTestClass。

有人对此有任何想法吗？我没有得到任何堆栈跟踪或日志文件，只是它无法实例化类的简单事实。我希望有人以前遇到过这个问题并且知道如何解决它。

干杯，大卫

[编辑 - 添加部分 pom 文件]

```
 <profiles>
    <profile>
        <id>buildOnly</id>
        <activation>
            <activeByDefault>true</activeByDefault>
        </activation>
        <build>
            <plugins>
                <plugin>
                    <groupId>org.apache.maven.plugins</groupId>
                    <artifactId>maven-surefire-plugin</artifactId>
                    <configuration>
                        <skipTests>true</skipTests>
                    </configuration>
                </plugin>
                <plugin>
                    <groupId>org.apache.maven.plugins</groupId>
                    <artifactId>maven-compiler-plugin</artifactId>
                    <configuration>
                        <source>1.6</source>
                        <target>1.6</target>
                    </configuration>
                </plugin>
                <plugin>
                    <groupId>org.apache.maven.plugins</groupId>
                    <artifactId>maven-jar-plugin</artifactId>
                    <executions>
                        <execution>
                            <goals>
                                <goal>jar</goal>
                                <goal>test-jar</goal>
                            </goals>
                        </execution>
                    </executions>
                </plugin>
                <plugin>
                    <groupId>org.codehaus.mojo</groupId>
                    <artifactId>build-helper-maven-plugin</artifactId>
                    <version>1.7</version>
                    <executions>
                        <execution>
                            <id>add-test-source</id>
                            <phase>generate-test-sources</phase>
                            <goals>
                                <goal>add-test-source</goal>
                            </goals>
                            <configuration>
                                <sources>
                                    <source>src/test/groovy</source>
                                </sources>
                            </configuration>
                        </execution>
                        <execution>
                            <id>add-resource</id>
                            <phase>generate-resources</phase>
                            <goals>
                                <goal>add-resource</goal>
                            </goals>
                            <configuration>
                                <resources>
                                    <resource>
                                        <directory>src/test/resources</directory>
                                        <targetPath>resources</targetPath>
                                    </resource>
                                </resources>
                            </configuration>
                        </execution>
                    </executions>
                </plugin>
                <plugin>
                    <groupId>org.codehaus.gmaven</groupId>
                    <artifactId>gmaven-plugin</artifactId>
                    <version>1.4</version>
                    <extensions>true</extensions>
                    <configuration>
                        <source>1.6</source>
                        <providerSelection>1.8</providerSelection>
                    </configuration>
                    <dependencies>
                        <dependency>
                            <groupId>org.codehaus.gmaven.runtime</groupId>
                            <artifactId>gmaven-runtime-1.8</artifactId>
                            <version>1.4</version>
                        </dependency>
                    </dependencies>
                    <executions>
                        <execution>
                            <goals>
                                <goal>testCompile</goal>
                            </goals>
                            <configuration>
                                <providerSelection>1.8</providerSelection>
                                <sources>
                                    <fileset>
                                        <directory>${pom.basedir}/src/test/groovy</directory>
                                        <includes>
                                            <include>**/*.groovy</include>
                                        </includes>
                                    </fileset>
                                </sources>
                            </configuration>
                        </execution>
                    </executions>
                </plugin>
            </plugins>
        </build>
    </profile>
    <profile>
        <id>integrationTest</id>
        <activation>
            <activeByDefault>false</activeByDefault>
        </activation>
        <build>
            <plugins>
                <plugin>
                    <groupId>org.apache.maven.plugins</groupId>
                    <artifactId>maven-compiler-plugin</artifactId>
                    <configuration>
                        <source>1.6</source>
                        <target>1.6</target>
                    </configuration>
                </plugin>
                                    <plugin>
                    <groupId>org.apache.maven.plugins</groupId>
                    <artifactId>maven-jar-plugin</artifactId>
                    <executions>
                        <execution>
                            <goals>
                                <goal>jar</goal>
                                <goal>test-jar</goal>
                            </goals>
                        </execution>
                    </executions>
                </plugin>
                <plugin>
                    <groupId>org.codehaus.mojo</groupId>
                    <artifactId>build-helper-maven-plugin</artifactId>
                    <version>1.7</version>
                    <executions>
                        <execution>
                            <id>add-test-source</id>
                            <phase>generate-test-sources</phase>
                            <goals>
                                <goal>add-test-source</goal>
                            </goals>
                            <configuration>
                                <sources>
                                    <source>src/test/groovy</source>
                                </sources>
                            </configuration>
                        </execution>
                        <execution>
                            <id>add-resource</id>
                            <phase>generate-resources</phase>
                            <goals>
                                <goal>add-resource</goal>
                            </goals>
                            <configuration>
                                <resources>
                                    <resource>
                                        <directory>src/test/resources</directory>
                                        <targetPath>resources</targetPath>
                                    </resource>
                                </resources>
                            </configuration>
                        </execution>
                    </executions>
                </plugin>

                <plugin>
                    <groupId>org.codehaus.gmaven</groupId>
                    <artifactId>gmaven-plugin</artifactId>
                    <version>1.4</version>
                    <extensions>true</extensions>
                    <configuration>
                        <source>1.6</source>
                        <providerSelection>1.8</providerSelection>
                    </configuration>
                    <dependencies>
                        <dependency>
                            <groupId>org.codehaus.gmaven.runtime</groupId>
                            <artifactId>gmaven-runtime-1.8</artifactId>
                            <version>1.4</version>
                        </dependency>
                    </dependencies>
                    <executions>
                        <execution>
                            <goals>
                                <goal>testCompile</goal>
                            </goals>
                            <configuration>
                                <providerSelection>1.8</providerSelection>
                                <sources>
                                    <fileset>
                                        <directory>${pom.basedir}/src/test/groovy</directory>
                                        <includes>
                                            <include>**/*.groovy</include>
                                        </includes>
                                    </fileset>
                                </sources>
                            </configuration>
                        </execution>
                    </executions>
                </plugin>
                <plugin>
                    <groupId>org.apache.maven.plugins</groupId>
                    <artifactId>maven-surefire-plugin</artifactId>
                    <version>2.10</version>
                    <configuration>
                        <testFailureIgnore>true</testFailureIgnore>
                        <suiteXmlFiles>
                            <suiteXmlFile>${testng.xml.file}</suiteXmlFile>
                        </suiteXmlFiles>
                        <properties>
                            <property>
                                <name>usedefaultlisteners</name>
                                <value>false</value>
                            </property>
                            <property>
                                <name>listener</name>
                                <value>org.testng.reporters.TestHTMLReporter,org.testng.reporters.JUnitXMLReporter,org.testng.reporters.SuiteHTMLReporter,org.testng.reporters.FailedReporter,org.testng.reporters.EmailableReporter,org.testng.reporters.JUnitReportReporter</value>
                            </property>
                        </properties>
                        <systemProperties>
                            <property>
                                <name>isCI</name>
                                <value>${isCI}</value>
                            </property>
                            <property>
                                <name>browser</name>
                                <value>${browser}</value>
                            </property>
                            <property>
                                <name>remote</name>
                                <value>${remote}</value>
                            </property>
                            <property>
                                <name>port</name>
                                <value>${port}</value>
                            </property>
                            <property>
                                <name>environment</name>
                                <value>${environment}</value>
                            </property>
                            <property>
                                <name>subDomain</name>
                                <value>${subDomain}</value>
                            </property>
                        </systemProperties>
                    </configuration>
                </plugin>
            </plugins>
        </build>
    </profile>
</profiles> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T17:05:46.910

消息说“无法实例化”，而不是“找不到”。

TestNG 可以找到你的类但不能实例化它。在您的问题中提供的第一条信息将是 的来源`MyTestClass`，但即使没有，我猜您也没有定义一个简单的无参数构造函数：

```
public MyTestClass() {} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T14:18:16.030

如果您的测试正确位于[src/test/java](http://maven.apache.org/guides/introduction/introduction-to-the-standard-directory-layout.html)并根据[单元测试命名约定](http://maven.apache.org/surefire/maven-surefire-plugin/test-mojo.html#includes)正确命名，那么您的测试可以简单地通过命令行运行

```
mvn test 
```

但看起来你的测试命名不同，这会导致你的问题。

# math - 概括路线坐标

> ID：13398879
> 
> 赞同：0
> 
> 时间：2012-11-15T13:52:23.137
> 
> 标签：math, geolocation, coordinates

我得到了一个坐标列表（纬度和经度），当它们相互连接时，会在地图上创建一条路线。但是我发现这些坐标非常多，因为路线的创建者非常准确，并创建了一条有很多曲线的路线。

我想通过删除大部分坐标来简化这条路线，这样路线看起来更像直线。有人可以提示我从哪里开始吗？

# macos - 本地主机没有正确显示文件然后页面崩溃，然后工作（图片）

> ID：13398882
> 
> 赞同：0
> 
> 时间：2012-11-15T13:52:37.123
> 
> 标签：macos, terminal, localhost, port, jekyll

我在本地主机上运行我的 jeykll 网站。这是我的终端

`jekyll --server $4000 --auto`

虽然某些原因当我在浏览器中输入 localhost:4000 时它不起作用，但我必须转到 337。有人知道为什么吗？

无论如何，当我第一次加载它时，它会按原样显示。

[http://cl.ly/image/390e033s160I](http://cl.ly/image/390e033s160I)

然后我刷新页面

[http://cl.ly/image/11470G2z1s15](http://cl.ly/image/11470G2z1s15)

另一个刷新带来了这个

[http://cl.ly/image/3G2m0O3w1Y3x](http://cl.ly/image/3G2m0O3w1Y3x)

而且每次都会转一圈。

该网站可以在这里找到：joshhornby.co.uk

好的，快速浏览一下 chrome 开发工具告诉我：加载资源失败`http://localhost:337/stylesheets/style.css` 但是为什么？它有时会加载？很困惑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T01:12:03.103

直接的解决方案是命令行应该是

```
jekyll --server 4000 --auto 
```

4000 不是环境变量，所以不需要 $。

我通常将端口放在 _config.yml 中——这可能是 337 的来源。其他问题可能与权限相关 - 使用低于 1000 的端口号意味着需要管理员访问权限，这可能会在重新生成文件时导致问题。

# transactions - 尽管我使用相同的连接字符串，但将 TransactionScope 提升到 MSDTC

> ID：13398883
> 
> 赞同：4
> 
> 时间：2012-11-15T13:52:37.107
> 
> 标签：transactions, sql-server-2008-r2, transactionscope, entity-framework-4.3, msdtc

我有两个存储库指向同一个 SQL Server 2008 R2 (10.50.2550.0) 数据库。一个存储库基于实体框架，另一个使用常规 SqlConnection。我需要执行一个涉及两者的操作，所以我使用 a`TransactionScope`将它们保持在同一个事务中：

```
using (TransactionScope scope = new TransactionScope(TransactionScopeOption.RequiresNew, new TransactionOptions() { IsolationLevel = IsolationLevel.RepeatableRead }))
{
   _repoA.DoStuff();
   _repoB.DoStuff();
} 
```

由于我在两者中使用相同的连接字符串：

```
"Data Source=(local);Initial Catalog=mydb;User Id=myid;Password=mypass;Asynchronous Processing=true" 
```

我期待[SQL Server 2008 R2 可以使用多个连接而无需扩展](https://stackoverflow.com/questions/1690892/transactionscope-automatically-escalating-to-msdtc-on-some-machines). 不幸的是，我得到一个例外说：

> System.Data.SqlClient.SqlException 在服务器“MyComputer”上发生 Message=MSDTC 不可用。Source=.Net SqlClient Data Provider
> ErrorCode=-2146232060 Class=16 LineNumber=1 Number=8501
> Procedure="" Server=(local) State=2 StackTrace: at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection )

可能是什么问题呢？

干杯。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-15T14:46:52.063

好的，我找到了原因。实体框架正在将我的连接字符串修改为：

```
"Data Source=(local);Initial Catalog=mydb;User Id=myid;Password=mypass;Asynchronous Processing=true;Application Name=EntityFrameworkMUE" 
```

这就是升级到 MSDTC 的原因！

为了避免这种情况，我在连接字符串中设置了自己的[“应用程序名称” ，它现在可以工作了。](http://www.connectionstrings.com/Articles/Show/use-application-name-sql-server)

干杯。

# java - 通过参数调用不同的方法

> ID：13398885
> 
> 赞同：1
> 
> 时间：2012-11-15T13:52:38.427
> 
> 标签：java, reflection, methods

我得到了一个应用程序，它应该根据参数的输入调用不同的方法。到目前为止，我的想法基本上是，我创建一个 Switch 并按情况分别调用这些方法。例子：

```
switch (methodName)
{
    case "method1":
        method1();
        break;
    case "method2":
        method2();
        break;
    default:
        System.out.println(methodName + " is not a valid method!");
} 
```

我正在考虑通过给定字符串调用该方法的选项，如this question中所提供：

[将方法名称作为字符串给出时，如何调用 Java 方法？](https://stackoverflow.com/questions/160970/)

但后来我从一个答案中读到，它不安全。你们有什么感想？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T14:03:32.840

如果您需要从字符串转到方法调用，反射可能是您的最佳选择。没有涉及很大的安全问题，特别是如果您限制允许调用的方法集。使用 a`Map<String, Method>`是实现它的一种方法，它具有提高性能的好处，因为主要瓶颈不是反射方法调用，而是方法查找。

如果没有反射，您可以使用 a 来实现这一点，您可以`Map<String, Callable>`在其中`Callable`为每个方法调用使用匿名类实例。更多样板代码，但“类型安全”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T14:10:12.783

您可以使用命令设计模式实现与反射相同的功能。它将动作包装到对象中，因此可以使用通用接口查找和调用它们。

在这里阅读更多：[http ://en.wikipedia.org/wiki/Command_pattern](http://en.wikipedia.org/wiki/Command_pattern)

# jsf - 将 HashMap 编辑到数据表中

> ID：13398887
> 
> 赞同：1
> 
> 时间：2012-11-15T13:52:42.793
> 
> 标签：jsf, primefaces

为了管理购物车，我创建了一个 HashMap，并使用此方法将其转换为列表以显示为 PrimeFaces 数据表：

```
public List<Map.Entry<Livre, Integer>> getPanier() {
      Set<Map.Entry<Livre, Integer>> panierSet = panier.entrySet();
      return new ArrayList<Map.Entry<Livre, Integer>>(panierSet); 
} 
```

显示列表后，我希望使用 inputText 直接在数据表中更新数量。

但我不知道这是否可能？或者如果我需要在 ArrayList 中转换 HashMap 来做这个特征。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T08:48:04.673

你可以在你的桌子上使用这样的东西

```
<h:inputText value="#{myMap[someVarUsedInDatatable.keyOfThatRow]}"/> 
```

这将允许您读取和修改相关键中的相关值...

# node.js - form.parse() 方法未在 node.js 中调用

> ID：13398890
> 
> 赞同：8
> 
> 时间：2012-11-15T13:52:46.677
> 
> 标签：node.js, formidable

我正在使用强大的包来上传文件。这是我的服务器端代码。

```
var formidable = require('formidable'),
    http = require('http'),
    util = require('util');
    app.post('/admin/uploads', function(req, res) {
         console.log(req.files, req.fields);//It prints
         var form = new formidable.IncomingForm(); 
         form.parse(req, function(err, fields, files) {
        console.log("Inside form parse.");//its not printing
        console.log(err, fields, files);//its not printing
         });
    form.on('file', function(name, file) {console.log('file='+file);});//its not printing
    form.on('error', function(err) { console.log(err); });//its not printing
    form.on('aborted', function() { console.log('Aborted'); });//its not printing
    console.log(form);//it prints

  }); 
```

上述代码中，form.parse()方法没有被调用，请给出解决方案。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-22T13:22:36.743

可能是您需要删除正文解析器

```
delete app.use(express.bodyParser()); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2021-08-30T18:28:00.307

将 Next.js API 路由与 Formidable 一起使用时，我遇到了同样的问题。就像接受的答案指出的那样，您必须删除正文解析器。在 Next.js 中，您可以导出`config`对象并禁用正文解析。

```
// /pages/api/form.js
import { IncomingForm } from "formidable";

export default function handler(req, res) {
  // formidable logic
}

// VV important VV
export const config = {
  api: {
    bodyParser: false,
  },
}; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-01-10T11:00:40.640

`form.parse(...)`在所有`on(...)`事件之后调用。

```
app.post('/admin/uploads', function(req, res) {
    var form = new formidable.IncomingForm(); 
    form.on('file', function(name, file) { });
    form.on('error', function(err) { });
    form.on('aborted', function() { });
    form.parse(req, function(err, fields, files) { });
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-15T14:13:24.130

请添加错误处理程序并发送错误消息，否则很难得到答案。

```
form.on('error', function(err) { console.log(err); });
form.on('aborted', function() { console.log('Aborted'); }); 
```

请参阅`formidable`文档：[文档](https://github.com/felixge/node-formidable)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-03-23T20:57:07.777

我忘了将 enctype="multipart/form-data" 添加到我的 html 表单中，也许这会对某人有所帮助:)

# php - PHP / MySQL - 外键问题

> ID：13398893
> 
> 赞同：3
> 
> 时间：2012-11-15T13:52:51.757
> 
> 标签：php, mysql

我目前正在关注一个教程，并学习如何在我现有的网站中构建一些东西。

该教程告诉我，我需要对我的数据库运行它

```
ALTER TABLE posts ADD FOREIGN KEY(post_by) REFERENCES users(user_id) ON DELETE RESTRICT ON UPDATE CASCADE; 
```

我收到一个错误，说它不能创建表。

“用户”表来自我现有的数据库，其他一切都是新的。

本教程为我提供了一些更改命令来运行，它们都很完美，除非我尝试使用“用户”表。

我完全坚持这一点，任何帮助将不胜感激。

干杯

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-15T13:54:34.090

检查您的表类型。应该是`InnoDB`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T14:15:43.850

看看[http://dev.mysql.com/doc/refman/5.1/en/alter-table.html](http://dev.mysql.com/doc/refman/5.1/en/alter-table.html)，每个引擎都有哪些选项非常清楚。

看看描述的部分：

> InnoDB 存储引擎支持 FOREIGN KEY 和 REFERENCES 子句

和：

> 对于其他存储引擎，这些子句被解析但被忽略。

正如 h2ooooooo 所说，您可以通过以下方式更改引擎：

```
ALTER TABLE table ENGINE = INNODB 
```

# html - 用于剪贴板访问的 HTML5 API 是否可用？以及如何使用它？

> ID：13398895
> 
> 赞同：4
> 
> 时间：2012-11-15T13:52:57.857
> 
> 标签：html, clipboard

我正在尝试使用[ZeroClipboard](http://code.google.com/p/zeroclipboard/)将图像复制到剪贴板并将它们粘贴到 Outlook（或任何地方）。它不工作。我阅读[了这个链接](http://pivotallabs.com/users/mrushakoff/blog/articles/2215-you-can-t-yet-programmatically-copy-an-image-to-the-clipboard-from-a-javascript-web-app)，根据它，[HTML5 API](http://www.w3.org/TR/clipboard-apis/)是使用 JS 将图像复制到剪贴板的唯一方法。我想知道如何使用它，或者是否有任何浏览器实际上支持这个？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-07T16:15:03.440

无论如何，对于 Webkit 浏览器来说，Apple 提供[了一篇](https://developer.apple.com/library/safari/documentation/AppleApplications/Conceptual/SafariJSProgTopics/WebKitJavaScript.html)名为“Using the Pasteboard From JavaScript”的文章。我想通过使用该`setData`方法，您还可以设置图像数据和文本。我希望这可以帮助你。

# php - PHP将平面数组转为多维关系数组

> ID：13398896
> 
> 赞同：0
> 
> 时间：2012-11-15T13:53:00.920
> 
> 标签：php, arrays, recursion, multidimensional-array, foreach

> **可能重复：**
> [从数据库结果生成多维数组的递归函数](https://stackoverflow.com/questions/8587341/recursive-function-to-generate-multidimensional-array-from-database-result)

考虑以下数组。

```
 Array
(
    [0] => Array
        (
            [Parent_ID] => 0
            [Child_ID] => 0
            [0] => string:val

        )

    [1] => Array
        (
            [Parent_ID] => 0
            [Child_ID] => 1
            [0] => string:val

        )

    [2] => Array
        (
            [Parent_ID] => 1
            [Child_ID] => 2
            [0] => string:val

        )

    [3] => Array
        (
            [Parent_ID] => 0
            [Child_ID] => 3
            [0] => string:val

        ) 
```

我需要把它变成如下内容。

```
 Array
(
    [0] => Array
        (
            [Parent_ID] => 0
            [Child_ID] => 0
            [0] => string:val

        )

    [1] => Array
        (
            [Parent_ID] => 0
            [Child_ID] => 1
            [0] => string:val

                [2] => Array
                   (
                    [Parent_ID] => 1
                    [Child_ID] => 2
                    [0] => string:val

                    ) 
                   )

    [3] => Array
        (
            [Parent_ID] => 0
            [Child_ID] => 3
            [0] => string:val

        ) 
```

除此之外，孩子们也可以拥有无​​限的孩子​​。并不是每个索引都有相同数量的键和值。但是所有人都会有一个父子键/值。

我从这里和其他地方尝试了许多解决方案，但似乎无法做到正确。

# visual-studio-2010 - 缺少程序集参考 Visual Studio 2012

> ID：13398897
> 
> 赞同：2
> 
> 时间：2012-11-15T13:53:01.583
> 
> 标签：visual-studio-2010, visual-studio-2012, .net-assembly

我安装了 Visual Studio 2012 Ultimate，但遇到了痛苦的构建问题。解决方案无法构建，因为

```
错误 12 命名空间“Framework”中不存在类型或命名空间名称“TypeName”（您是否缺少程序集引用？）       

```

该程序集肯定存在并被引用 - 唯一的变化是新的 VS - 以前我使用过 VS 2010 Ultimate。组装和解决方案的目标框架也是相同的（4.0.3）。

有什么解决办法吗？

先感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T13:58:12.113

确保包含此行：

```
using System.Web.UI.WebControls; 
```

如果这没有帮助，此链接可能：http: [//msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.objectdatasource.typename.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.objectdatasource.typename.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-28T10:06:22.010

dll项目及其引用的windows/console项目应该在两个独立的文件夹中。如果这些文件夹重叠，就会出现上述问题。这意味着一个项目文件夹不应该在另一个项目文件夹中。这个问题只出现在vs2012和vs2013中

# ssl - 带有ssl的wireshark

> ID：13398904
> 
> 赞同：0
> 
> 时间：2012-11-15T13:53:11.480
> 
> 标签：ssl, wireshark

JKJS

即使数据包的版本为 0x0301 (TLS v1)，wireshark 也会在协议列中显示 SSL 而不是 TLSv1。

我自己已经构建了一个 TLS 握手包。

可能是什么原因？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T16:49:16.653

这是因为它大致相同。SSLv3 和 TLS 1.x 实际上是相同的协议，但版本号不同。SSLv3 的版本号是`{ 3, 0 }`，它是`{ 3, 1 }`TLS 1.0 的。

（SSLv2 会有更多不同的数据包。）

# c# - 优化双 foreach 循环

> ID：13398909
> 
> 赞同：0
> 
> 时间：2012-11-15T13:53:16.507
> 
> 标签：c#, dictionary

我有一个双 foreach 循环，并希望通过使其成为一个循环而不是两个循环来加速它。

这个想法是它从字典中获取一个元素并将其与字典中的所有元素进行比较

```
foreach (KeyValuePair<Int64, string> kvp in originCounts)
{
    foreach (KeyValuePair<Int64, string> testkvp in originCounts)
    {
    //Run Comparison on testkvp ad kvp
    }
} 
```

我想把它变成一个循环，有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T15:29:06.267

您可以使用[`Enumerable.All`](http://msdn.microsoft.com/en-us/library/bb548541.aspx)检查所有元素是否相同：

```
var firstID = originCounts.First().Value.UserID;
bool allEquals = originCounts.Skip(1).All(o => o.Value.UserID == firstID); 
```

看来这就是你真正想要的。

我刚刚在[重复的问题](https://stackoverflow.com/questions/13400536/optimizing-foreach-loop-that-compares-multiple-things)中挑选了你班级的一个字段，听起来是一个合理的标识符。

```
public class MyObject 
{
    public string FirstName{ get; set; }
    public string LastName{ get; set; }
    public int UserID { get; set; }
    public string Address { get; set; }
} 
```

**编辑**：根据您的评论，您想确定是否*有任何*对象的字段与另一个对象的同一字段不同。

```
var first = originCounts.First().Value;
bool allEquals = originCounts.Skip(1).All(o =>
                o.Value.FirstName == first.FirstName
             && o.Value.LastName  == first.LastName
             && o.Value.UserID    == first.UserID
             && o.Value.Address   == first.Address); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T14:05:54.087

您可以尝试使用 linq 语法并比较性能

例如

```
foreach(KeyValuePair<long, string> kvp1 in originCounts.SelectMany(kvp1 => originCounts.Select(testkvp => kvp1), (kvp1, kvp) => kvp1)) {

} 
```

或者

```
foreach(KeyValuePair<long, string> kvp1 in from kvp1 in originCounts
                                                 from kvp in originCounts.Select(testkvp => kvp1)
                                                 select kvp1) {
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T14:11:34.277

[您可以创建实现IComparable](http://msdn.microsoft.com/en-us/library/system.icomparable.aspx)接口的可比较字符串键值类。

```
public class ComparableString : IComparable
{
    public Int64 Key { get; set; }

    public string Value { get; set; }

    public int CompareTo(object obj)
    {
        if (obj == null) return 1;

        string otherString = obj as ComparableString;

        if (otherString != null)
        {
            // PLACE YOUR COMPARE LOGIC HERE
            return this.Value.CompareTo(otherString.Value);
        }
        else
        {
            throw new ArgumentException("Object is not a Comparable String");
        }
    }
} 
```

之后，您可以创建一个链表并运行 .sort 方法

```
var originCounts= new List<ComparableString>();
// Logic to fill your list
originCounts.Sort(); 
```

.Sort 方法的平均复杂度为 O(n(log n))，最坏的情况为 O(n^2)，请参阅[http://msdn.microsoft.com/en-us/library/b0zbh7b6.aspx](http://msdn.microsoft.com/en-us/library/b0zbh7b6.aspx)了解更多信息信息。

一旦你调用了 .Sort() 方法，你就会知道你的项目索引之前的任何值都小于或等于你的项目的值，并且任何大于你所在索引的索引都大于或等于您的物品的价值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-15T14:28:52.450

也许我误解了这个问题而过度简化了这一点，但如果您只是想在字符串中查找重复的值，您可以使用 Dictionary 的 Values 属性，并对它们进行区分。

使用您的字典示例：

```
 Dictionary<Int64, string> originalCounts = new Dictionary<Int64, string>();
    for (Int64 i = 0; i < 10; i++)
    {
        originalCounts.Add(i, i.ToString());
    }
    originalCounts[5] = originalCounts[3];

    foreach (var kvp in originalCounts)
    {
        Console.WriteLine("{0}  {1}", kvp.Key, kvp.Value);
    }

    Console.WriteLine();

    foreach (var value in originalCounts.Values.Distinct())
    {
        Console.WriteLine("{0}", value);
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-15T15:47:55.043

如果我理解正确，获取不同的对象（不实现 IComparable 或覆盖 Equals 和 GetHashcode）：

```
var noDups = originCounts
                                 //Any Prop. you want to compare
              .GroupBy(o => new { o.FirstName, o.LastName, o.UserID, o.Address })
              .Select(g => g.First())
              .ToList(); 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-11-15T14:01:51.457

为什么要将字典条目与同一字典中的其他条目进行比较？你在检查重复项吗？如果是这样，您可以使用`originCounts.Distinct()`.

编辑：您需要`IEqualityComparer`为该`Distinct`方法指定一个，否则它只会比较键（在 a 中总是不同的`Dictionary`），而不是值。

# oracle - 如何将用户与数据库的多个方案相关联？

> ID：13398910
> 
> 赞同：1
> 
> 时间：2012-11-15T13:53:16.383
> 
> 标签：oracle

我有一个具有多个架构的数据库，我想创建一个可以登录我的数据库的不同方案的用户。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T14:01:58.020

您可以使用[代理功能](http://docs.oracle.com/cd/E11882_01/server.112/e26088/statements_4003.htm#i2058312)使用户能够以另一个用户/模式连接：

> proxy_clause 允许您控制企业用户 [..] 在更改数据库用户时连接的能力。

给定 schemas`A`和`B`and 用户`USR`，你可以：

```
ALTER USER A GRANT CONNECT THROUGH USR;
ALTER USER B GRANT CONNECT THROUGH USR; 
```

这将允许 USR 使用他的标识符作为 A 或 B 连接，如[以下 askTom 线程](http://asktom.oracle.com/pls/asktom/f?p=100:11:0%3a%3a%3a%3aP11_QUESTION_ID:83012348058#408884400346292168)所示：

```
CONNECT USR[A]/PASSUSR 
```

这将使`USR`他能够像他一样连接`A`。

# blackberry-10 - Blackberry 10 SDK 的电池信息

> ID：13398911
> 
> 赞同：-1
> 
> 时间：2012-11-15T13:53:19.617
> 
> 标签：blackberry-10, battery

我试过这段代码：

```
battery_info_t **pointer=NULL;
battery_get_info(pointer);
return battery_info_get_time_to_empty(*pointer); // needs simple pointer (*pointer) 
```

我的问题是：如何将 **pointer 转换为 *pointer

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T14:09:15.340

在这种用法中，battery_info_... 函数调用采用指向 battery_info_t 类型的指针，因此您可以将指针声明为该类型并将其用作这些调用的参数。要将指针设置为正确的值，请将指向它的指针传递给 battery_get_info()。完成后，您还必须释放分配给指针的内存：

```
battery_info_t    *pointer = NULL;
battery_get_info(&pointer);
int t = battery_info_get_time_to_empty(pointer);
battery_free_info(&pointer);
return t; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T14:04:30.710

这有效：

```
battery_info_t *pointer=NULL;     
battery_get_info(&pointer);    
return battery_info_get_time_to_empty(pointer); 
```

但是`65535`在模拟器上返回，所以我不知道它是否有效，因为我没有BB10 ...

# macos - 如何确定进程是否在网络内核扩展中具有 root 权限？

> ID：13398912
> 
> 赞同：2
> 
> 时间：2012-11-15T13:53:19.810
> 
> 标签：macos, kernel-extension, xnu

我正在编写一个套接字过滤器 kext，我想忽略以 root 身份建立的任何连接。在 OS X Lion 之前，以下代码可以完美运行：

```
static boolean_t is_root() {
    proc_t p = proc_self();
    boolean_t isRoot = proc_suser(p);
    proc_rele(p);
    return isRoot;
} 
```

但现在使用 Lion 和 Mountain Lion，该`is_root()`函数始终返回 true。在 Snow Leopard 中，它按我想象的那样工作。

这是我如何在套接字过滤器事件处理程序中测试函数的示例：

```
int debugPid = proc_selfpid();
if (is_root()) {
    printf("%u (root)\n", debugPid);
} else {
    printf("%u (user)\n", debugPid);
} 
```

但输出总是显示“root”，例如：

```
2012-11-15 3:48:00.000 PM kernel[0]: 29879 (root) 
```

建立连接的应用程序是 Twitter（通过 PID 确认）。Twitter 以常规用户权限运行，而不是 root。

是否有更好/正确的方法来确定套接字连接背后的进程是否具有 root 权限？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T14:14:34.773

根据`bsd/sys/proc.h`（[链接](http://opensource.apple.com/source/xnu/xnu-2050.18.24/bsd/sys/proc.h)）：

```
/* this routine returns error if the process is not one with super user privileges */
int proc_suser(proc_t p); 
```

因此，返回`0`意味着该进程具有 root 权限，否则为非零。

你要：

```
static boolean_t is_root() {
    proc_t p = proc_self();
    int error = proc_suser(p);
    proc_rele(p);
    return error == 0;
} 
```

# java - jnlp 中的 Java Web Start 和数据库详细信息

> ID：13398919
> 
> 赞同：2
> 
> 时间：2012-11-15T13:53:47.253
> 
> 标签：java, mysql, database, java-web-start

是否可以在`jnlp`-file 中隐藏数据库详细信息？我的应用程序使用`jws`和-`MySQL`数据库。在`jnlp`-file 中，我定义了数据库连接详细信息（用户名、密码、主机名）。

像这样：

```
property name="dbuser" value="username" 
```

是否有任何替代方法来定义数据库详细信息？细节必须易于更改！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T14:02:19.680

查看[JnlpDownloadServlet 指南：替换](http://docs.oracle.com/javase/7/docs/technotes/guides/javaws/developersguide/downloadservletguide.html#substitutions)。

> `JnlpDownloadServlet`在您的 JNLP 文件中进行方便的替换。当客户端请求 JNLP 文件时，servlet 读取原始文件、替换值并返回结果。

* * *

> 是否可以在 jnlp 文件中隐藏数据库详细信息？

不，不适合高级用户。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T13:58:52.497

除非您信任所有用户，否则该应用程序可能不应该直接与数据库对话。相反，您应该将数据库隐藏在服务之后，例如 REST 服务。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T09:46:16.827

永远不要相信客户。用户可以修改您的程序以执行他们想要的操作，并且他们可以读取您存储在他们系统上的任何内容或通过网络发送的任何内容。即使您使用加密，如果在他们的计算机上解密，他们也可以读取它。

将秘密隐藏在某人的计算机上并希望他们看不到它不是一个好主意。当你的程序经常读取这个秘密时，更不用说它的位置了。

您应该假设在某处您有一个恶意用户修改了您的程序（在他们的计算机上运行）来执行他们的命令，并且他们知道您发送到他们的计算机的所有信息。

您可以为每个用户创建一个数据库用户，并且仍然让他们直接连接到您的数据库，而他们的数据库用户的访问权限非常有限。我认为这也是一个坏主意。数据库通常没有最好的安全性。

相反，防火墙关闭您的数据库，只让您的内部系统直接访问它。您的用户（通过您的 java 应用程序）可以改为访问 Chris 建议的 Web 服务。这为您提供了更小的攻击面，更容易保护。

# mysql - 使用自定义函数的mysql触发器

> ID：13398923
> 
> 赞同：1
> 
> 时间：2012-11-15T13:53:56.200
> 
> 标签：mysql, function, triggers

我正在尝试编写一个 MySQL 触发器，在更新一行时，它将调用一个自定义函数（在触发器之外可以正常工作）并更新触发器所在的表中的列。

```
BEGIN  
UPDATE candles 
       SET can_materials_cost = (SELECT calculateMaterialCost(NEW.can_id)  
       WHERE candles.can_id = NEW.can_id);  
END 
```

我编写了基本的审计风格触发器，在更新时将旧值保存到不同的表中，但由于某种原因，在尝试使用我的自定义函数时，我收到一条错误消息：

您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以了解在 'WHERE candles.can_id = NEW.can_id) 附近使用的正确语法；
END' 在第 4 行

自定义函数执行：

```
BEGIN
-- This function assumes that the raw wax cost is for 20kg bags only - BEWARE!
DECLARE result DECIMAL(10,2);
SET result = (
    (select calculateWaxCost(_can_id))
    +
    (select calculateDyeCost(_can_id))
    +
    (select calculateScentCost(_can_id)));
RETURN result;
END 
```

# asp.net-mvc - 查询中列表/表的位置

> ID：13398926
> 
> 赞同：0
> 
> 时间：2012-11-15T13:54:06.657
> 
> 标签：asp.net-mvc, html-select, multi-select

如何在列表或表格的查询中执行 where ？

解释一下，我有一个多选列表框，用户可以在其中选择一个或多个传递给我的操作的值。之后，我将所有这些值都放在一个列表中，我想在上面做一个 Where ：

```
List<string> CondCR = new List<string>();
foreach (var testCR in SubCR)
{
CondCR.Add(testCR);
}

ViewBag.CondCR = CondCR;

var query = (from i in items
where i.Field<String>("TIMING").Contains(GetTIMING) && i.Field<String>("CD_CR").Equals(CondCR)
select new Suivi{CD_CR = i.Field<String>("CD_CR"), CD_APPLI = i.Field<String>("CD_APPLI"), CD_TRT = i.Field<String>("CD_TRT"), LB_TRT = i.Field<String>("LB_TRT"), 
                PERIODE = i.Field<Int64>("PERIODE"), CD_JOB = i.Field<String>("CD_JOB"), LB_JOB = i.Field<String>("LB_JOB"), CD_TYP_TRT = i.Field<String>("CD_TYP_TRT"),
                CD_TRT_SSIS = i.Field<String>("CD_TRT_SSIS"), DT_DEB = i.Field<DateTime>("DT_DEB"), DT_FIN = i.Field<DateTime>("DT_FIN"), DUREE = i.Field<String>("DUREE"),
                TIMING = i.Field<String>("TIMING")
}).ToList();

return View(query); 
```

SubCR 包含用户在列表框中选择的值，SubCR 的类型为 string[]。

我试图在我的列表 CondCR 上做一个 where 但它什么也没返回，我不知道它是来自我的查询还是来自其他东西。

你有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T09:09:18.683

好的，我找到了答案，我只需要在我的查询中这样做：

```
where CondCR.Contains(i.Field<String>("CD_CR").Trim()) && CondAppli.Contains(i.Field<String>("CD_APPLI").Trim()) 
```

# sql - 删除 TSQL 中的一列

> ID：13398927
> 
> 赞同：0
> 
> 时间：2012-11-15T13:54:08.757
> 
> 标签：sql, sql-server, tsql, sql-server-2012

```
SELECT VendorName, COUNT(*) as Total_Invoices
FROM   Invoices JOIN Vendors ON Invoices.VendorID = Vendors.VendorID
WHERE  Vendors.VendorName = 'IBM'
GROUP BY VendorName
ORDER BY Total_Invoices DESC 
```

它会带来

```
VendorName  Total_Invoices
IBM                2 
```

我想做，所以它只是说

```
Total_Invoices
     2 
```

未显示 IBM VendorName 但仍计算 IBM 的总发票

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T13:55:04.567

您可以安全地删除`VendorName`这种情况。

```
SELECT COUNT(*) as Total_Invoices
FROM   Invoices JOIN Vendors ON Invoices.VendorID = Vendors.VendorID
WHERE  Vendors.VendorName = 'IBM'
GROUP BY VendorName
ORDER BY Total_Invoices DESC 
```

`select`另一方面，也称为*投影*。您可以安全地移除它而不会受到任何伤害。但是在`GROUP BY`子句中删除它已经是非常不同的事情了。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-15T13:55:12.973

您只需`VendorName`从`Select`. 在这种情况下你不需要使用`GROUP BY`or`ORDER BY`

```
SELECT COUNT(*) as Total_Invoices
FROM   Invoices JOIN Vendors ON Invoices.VendorID = Vendors.VendorID
WHERE  Vendors.VendorName = 'IBM' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-15T13:55:08.730

从 SELECT 中删除 VendorName。

# django - Django distinct 不工作

> ID：13398935
> 
> 赞同：4
> 
> 时间：2012-11-15T13:54:52.350
> 
> 标签：django, postgresql, duplicates, distinct

我在从查询中过滤掉重复项时遇到问题。我正在使用 Django 1.4 和 Postgres 8.4.13

我在我的模型对象上使用这个查询（它是一个 jquery 自动完成）

```
term = request.GET.get('term')
field = request.GET.get('field') 
filter = field + '__' + 'icontains'
model_results = teilnehmer.objects.filter(**{filter: term}).order_by().distinct()
results = [ getattr(x, field) for x in model_results ]
output = simplejson.dumps(results) 
```

它工作得很好，给我模型的任何领域的任何搜索词的结果。但它显示了每一次点击。因此，如果名称“Smith”在表中出现 10 次，它会给我一个包含 10 次“Smith”的数组。它应该作为一个建议工具。我读到了 distinct 并尝试使用它（如上所述），但它不起作用。

有任何想法吗？

提前致谢。

康拉德

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T14:02:02.940

将字段名称传递给`distinct`函数：

```
model_results = teilnehmer.objects.filter(**{filter: term}).order_by().distinct(field) 
```

此外，您的方法非常不安全，因为您应该`GET`在将值传递给`QuerySet`. 也许使用 django 表单？

[还可以在此处](https://docs.djangoproject.com/en/dev/ref/models/querysets/#django.db.models.query.QuerySet.distinct)阅读有关`distinct`功能的文档

# c# - C# StreamReader 无法读取行

> ID：13398944
> 
> 赞同：1
> 
> 时间：2012-11-15T13:55:16.920
> 
> 标签：c#, file, text, streamreader, lines

我正在创建一个银行程序，我希望能够读取我的帐户文本文件并将它们添加到列表中。我的问题是，它只读取 1 行，之后，它会收到一个错误，说该行为空，但这不应该是因为第二个喜欢应该是年龄。

我希望它不断地通过将数据添加到列表中的帐户，每个帐户由一个空行分隔。

代码：

```
 StreamReader FileToRead = new StreamReader(@"C:\Users\...\Accounts.txt");
        Account NewAccount = new Account();

        string line;

        do
        {
            NewAccount.Name = FileToRead.ReadLine();
            NewAccount.Age = int.Parse(FileToRead.ReadLine());
            NewAccount.Balance = int.Parse(FileToRead.ReadLine());
            NewAccount.Address.Country = FileToRead.ReadLine();
            NewAccount.Address.City = FileToRead.ReadLine();
            NewAccount.Address.FirstLine = FileToRead.ReadLine();
            NewAccount.Address.SecondLine = FileToRead.ReadLine();
            NewAccount.Address.PostCode = FileToRead.ReadLine();
            NewAccount.AccountNumber = int.Parse(FileToRead.ReadLine());
            Accounts.Add(NewAccount);
        } while ((line = FileToRead.ReadLine()) != null); 
```

文本文件：[http ://pastebin.com/raw.php?i=1r9TEUPx](http://pastebin.com/raw.php?i=1r9TEUPx)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T14:02:13.597

尝试使用您的文件，代码在第二个循环而不是第一个循环中失败。
这是因为末尾的“空白线”触发了第二个循环，但没有更多数据可供读取。

如果您确定每个“记录”都由空行分隔，那么您可以简单地在循环末尾添加另一个读取

```
 do
    {
        NewAccount = new Account();

        NewAccount.Name = FileToRead.ReadLine();
        NewAccount.Age = int.Parse(FileToRead.ReadLine());
        NewAccount.Balance = int.Parse(FileToRead.ReadLine());
        NewAccount.Address.Country = FileToRead.ReadLine();
        NewAccount.Address.City = FileToRead.ReadLine();
        NewAccount.Address.FirstLine = FileToRead.ReadLine();
        NewAccount.Address.SecondLine = FileToRead.ReadLine();
        NewAccount.Address.PostCode = FileToRead.ReadLine();
        NewAccount.AccountNumber = int.Parse(FileToRead.ReadLine());

        FileToRead.ReadLine(); // here to absorb the empty line between 'records'

        Accounts.Add(NewAccount);
    } while ((line = FileToRead.ReadLine()) != null); 
```

现在，当您到达文件末尾时，while 循环将正确退出.....

**编辑：看到 Eric 的答案——为每个循环添加了新帐户的正确初始化**

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-15T14:02:31.533

好吧，我可以立即看到的唯一真正错误是您没有创建 Account 的新实例-因此您要做的是更改单个帐户上的值并将其读取到列表中-您只会结束与存储的文件中的最后一个帐户一致。您需要为循环的每次迭代创建一个新帐户。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T14:12:17.877

如果您包含有效数据，您的代码可能会在以下位置引发异常：

```
NewAccount.Address.Country = FileToRead.ReadLine(); 
```

看起来你有某种地址类。您必须在 Account 构造函数或循环中实例化此属性：

```
do
        {
            ...
            NewAccount.Balance = int.Parse(FileToRead.ReadLine());
            NewAccount.Address = new Account.AddressClass();
            NewAccount.Address.Country = FileToRead.ReadLine();
            ...
        } while ((line = FileToRead.ReadLine()) != null); 
```

我还假设您之前实例化了其他变量，例如

```
Account NewAccount = new Account();
List<Account> Accounts = new List<Account>(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-15T14:09:39.800

另一种方法：

```
string[] lines = System.IO.File.ReadAllLines(@"C:\Users\...\Accounts.txt");

         if (lines != null && lines.Length > 0)
         { 
         Account NewAccount = new Account();
         NewAccount.Name = lines[0].ToString();
         NewAccount.Age = lines[1].ToString();
         NewAccount.Balance = lines[2].ToString();
         NewAccount.Address.Country = lines[3].ToString();
         NewAccount.Address.City = lines[4].ToString();
         NewAccount.Address.FirstLine = lines[5].ToString();
         NewAccount.Address.SecondLine = lines[6].ToString();
         NewAccount.Address.PostCode = lines[7].ToString();
         NewAccount.AccountNumber = lines[8].ToString();
         Accounts.Add(NewAccount);
         } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-15T14:10:07.760

如果您在使用 Streamreader 时遇到此类问题，请考虑`File.ReadAllLines`改用：

```
var lines = File.ReadAllLines(path);
var NewAccount = new Account();
NewAccount.Name = lines.First();
NewAccount.Age = int.Parse(lines.ElementAt(1));
NewAccount.Balance = int.Parse(lines.ElementAt(2));
NewAccount.Address.Country = lines.ElementAt(3);
NewAccount.Address.City = lines.ElementAt(4);
NewAccount.Address.FirstLine = lines.ElementAt(5);
NewAccount.Address.SecondLine = lines.ElementAt(6);
NewAccount.Address.PostCode = lines.ElementAt(7);
NewAccount.AccountNumber = int.Parse(lines.ElementAt(8)); 
```

# java - 八皇后算法

> ID：13398945
> 
> 赞同：5
> 
> 时间：2012-11-15T13:55:24.097
> 
> 标签：java, backtracking

我之前问过一个关于使用 Java 解决八皇后问题的问题。我有一个回溯算法来解决这个问题。

我尝试使用此算法，但我不知道我的代码有什么问题。它最多只能放置 7 个皇后。

这里是女王级：

```
 public class Queen {
    //Number of rows or columns
    public static final int BOARD_SIZE = 8;

    boolean[][] board;
    //Indicate an empty square
    public static final boolean EMPTY = false;
    //Indicate a square which containing a queen
    public static final boolean QUEEN = true;
    //Number of moves
    public static final int MOVES = 4;
    //Horizontal moves
    int[] horizontal;
    //Vertical moves
    int[] vertical;

    public int queens = 0;

    public Queen() {
        //Constructor creates an empty board
        board = new boolean[BOARD_SIZE][BOARD_SIZE];
        for (int row = 0; row < board.length; row++) {
            for (int col = 0; col < board[row].length; col++) {
                board[row][col] = EMPTY;
            }
        }

        horizontal = new int[MOVES];
        vertical = new int[MOVES];
        // up right
        horizontal[0] = -1;
        vertical[0] = 1; 
        // down left
        horizontal[1] = 1;
        vertical[1] = -1;
        // up left
        horizontal[2] = -1;
        vertical[2] = -1;
        // down right
        horizontal[3] = 1;
        vertical[3] = 1;
    }

    public boolean placeQueens (int column) {
        if (column > BOARD_SIZE) {
            return true;
        }
        else {
            boolean queenPlaced = false;
            int row = 1;

            while (!queenPlaced && row < BOARD_SIZE) {
                if (isUnderAttack(row, column)) {
                    ++row;
                }// end if
                else{
                    setQueen(row, column);
                    queenPlaced = placeQueens(column + 1);
                    if (!queenPlaced) {
                        removeQueen(row,column);
                        ++row;
                    }// end if
                }// end else
            }// end while
            return queenPlaced;
        }// end else
    }

    private void removeQueen(int row, int column) {
        board[row][column] = EMPTY;
        System.out.printf("queen REMOVED from [%d][%d]\n", row, column);
    --queens;
    }

    private void setQueen(int row, int column) {
        board[row][column] = QUEEN;
        System.out.printf("queen PLACED in [%d][%d]\n", row, column);
        ++queens;
    }

    public boolean isUnderAttack(int row, int col) {
        boolean condition = false;
        // check row
        for (int column = 0; column < BOARD_SIZE; column++) {
            if ((board[row][column] == true)) {
                condition = true;
            }
        }

        // check column
        for (int row_ = 0; row_ < board.length; row_++) {
            if (board[row_][col] == true) {
                        condition = true;
            }
        }

        // check diagonal
        for (int row_ = row, col_ = col; row_ >= 0 && col_ < 8; row_ += horizontal[0], col_ += vertical[0]) {
            if (board[row_][col_] == true) {
                condition = true;
            }
        }
        for (int row_ = row, col_ = col; row_ < 8 && col_ >= 0; row_ += horizontal[1], col_ += vertical[1]) {
            if (board[row_][col_] == true) {
                condition = true;
            }
        }
        for (int row_ = row, col_ = col; row_ >= 0 && col_ >= 0; row_ += horizontal[2], col_ += vertical[2]) {
            if (board[row_][col_] == true) {
                condition = true;
            }
        }
        for (int row_ = row, col_ = col; row_ < 8 && col_ < 8; row_ += horizontal[3], col_ += vertical[3]) {
            if (board[row_][col_] == true) {
                condition = true;
            }
        }

        return condition;
    }

    public void displayBoard () {
        int counter = 0;
        for (int row = 0; row < board.length; row++) {
            for (int col = 0; col < board[row].length; col++) {
                if (board[row][col] == true) {
                    System.out.printf("|%s|", "x");
                    counter++;
                }
                else {              
                    System.out.printf("|%s|", "o");
                }
            }
            System.out.println();
        }

        System.out.printf("%d queens has been placed\n", counter);
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-15T13:59:19.747

在 Java 中，数组是[0-indexed](http://en.wikipedia.org/wiki/Zero-based_numbering)，这意味着第一项在索引 0 处。您似乎还没有完全掌握这个关键事实，这导致您编写的代码中出现了许多[不合时宜的错误](http://en.wikipedia.org/wiki/Off-by-one_error)。

这里有一个问题：

```
int row = 1; 
```

它应该是：

```
int row = 0; 
```

* * *

第二个问题在这里：

```
if (column > BOARD_SIZE) {
    return true;
} 
```

应该是这样的：

```
if (column >= BOARD_SIZE) {
    return true;
} 
```

* * *

您尚未发布其余代码，但我敢打赌，当您调用该`placeQueens`方法时，您的代码中存在第三个错误。如果我知道你是什么样的人，那么你可能是这样做的：

```
queen.placeQueens(1); 
```

但应该是这样的：

```
queen.placeQueens(0); 
```

* * *

通过所有这些更改，它可以按预期工作。最终结果是：

```
|x||o||o||o||o||o||o||o|
|o||o||o||o||o||o||x||o|
|o||o||o||o||x||o||o||o|
|o||o||o||o||o||o||o||x|
|o||x||o||o||o||o||o||o|
|o||o||o||x||o||o||o||o|
|o||o||o||o||o||x||o||o|
|o||o||x||o||o||o||o||o|
已放置 8 个皇后

```

在线查看它：[ideone](http://ideone.com/8iamUa)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-07-16T02:45:19.700

isUnderAttack 方法中有一些硬编码：

// 使用 BOARD_SIZE 检查对角线使用 8 的地方

采用：

```
col_ < BOARD_SIZE 
```

代替

```
col_ < 8 
```

最好使 BOARD_SIZE 不是静态的，而是将其作为输入参数，以使代码更通用并测试 boardSize = 4 或 12

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2018-07-15T04:11:02.870

我写了一个通用代码，它适用于任何数量的皇后区。

结果用 0 或 1 表示。1 是皇后，0 - 是空方格。

```
static int[][] setupEightQueens(int queensNum) {
    if (queensNum <= 0)
        return new int[][] { {} };
    int[][] chessField = new int[queensNum][queensNum];
    int n = chessField.length;
    int startJ = 0;
    for (int i = 0; i < n; i++) {
        for (int j = startJ; j < n; j += 2) {
            chessField[j][i] = 1;
            i++;
        }
        i--;
        startJ++;
    }
    return chessField;
} 
```

测试的 4、8、11 个皇后的输出：

__________________________
皇后：4
1 0 0 0
0 0 1 0
0 1 0 0
0 0 0 1
__________________________
皇后：8
1 0 0 0 0 0 0 0
0 0 0 0 1 0 0 0
0 1 0 0 0 0 0 0 0
0 0 0 0 1 0 0
0 0 1 0 0 0 0 0 0
0 0 0 0 0 1 0
0 0 0 1 0 0 0 0 0
0 0 0 0 0 0 1
__________________________
皇后：11
1 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 1 0 0 0 0
0 1 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 1 0 0 0
0 0 1 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 1 0 0
0 0 0 1 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 1 0
0 0 0 0 1 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 1
0 0 0 0 0 1 0 0 0 0 0

* * *

# jsf - JSF 播放视频文件

> ID：13398946
> 
> 赞同：3
> 
> 时间：2012-11-15T13:55:25.587
> 
> 标签：jsf, video, desktop-application

我想从我的网络应用程序播放视频文件。我使用 JSF。我想知道我们如何在客户端系统中安装的任何视频播放器的帮助下打开视频文件。我知道如何以同样的方式打开 pdf 文件。但我想知道如何打开视频文件。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-15T20:10:11.807

对此没有标准的 JSF 组件。然而，它与您在纯 HTML 中所做的并没有什么不同。只需将视频文件放到公共 web 内容中（以便它可以通过 URL 访问）并使用 HTML`<embed>`和/或`<object>`指向视频文件 URL 的元素。基本上就是这样。请注意，您只能在模板文本中使用 EL。`<embed src="#{bean.videoURL}">`因此，只要它以您想要的方式生成 HTML 代码（在浏览器中打开页面，右键单击并*查看源代码*以查看它） ， eg就可以正常工作。

如何创建和参数化 HTML`<embed>`或`<object>`标签的方式又取决于视频格式（MPEG、MOV、FLV 等）。您基本上需要查阅视频格式供应商的文档以了解如何使用它的详细信息。由于您没有提及视频文件的格式，我们无法为您提供更详细的帮助。然而，用谷歌搜索聪明的方式应该会产生足够的例子。例如“[在 html 中嵌入 mpeg](http://google.com/search?q=embed%20mpeg%20in%20html) ”。

然而，PrimeFaces 有一个[`<p:media>`](http://www.primefaces.org/showcase/ui/media.jsf)组件，它可以让那些懒于谷歌搜索示例和/或计算浏览器特定不协调的开发人员更容易；）它将彻底生成所提供视频格式所需的正确 HTML 代码。

### 也可以看看：

*   [如何使用 Servlet 流式传输 MP3、MP4、AVI 等音频/视频文件](https://stackoverflow.com/questions/13588149/how-to-stream-audio-video-files-such-as-mp3-mp4-avi-etc-using-a-servlet)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-17T05:03:29.127

这适用于支持 HTML5 的浏览器。

```
<video controls="controls">
  <source src="resources/myVideo.mp4" type="video/mp4"/>
</video> 
```

# delphi - 如何使用引用泛型类型的复杂类型

> ID：13398947
> 
> 赞同：1
> 
> 时间：2012-11-15T13:55:36.670
> 
> 标签：delphi, generics, fpc

考虑以下类型

```
type
  TRecs = array[0..100000] of TRec;
  PRecs = ^TRecs;

  TRecObject = class
  private
    fRecs: PRecs;
  public
    constructor Create;
    property    Recs: PRecs read fRecs;
  end; 
```

我想让 TRec 成为通用参数。问题是我需要放在课程范围之外。因为像

```
 T<MyType>Object = class
 private
   fRecs: ^array[0..100000] of MyType;
 public
    property    Recs: ^array[0..100000] of MyType read fRecs
 end 
```

不可能。

将 PRecs 作为参数也不是一种选择，因为在我的实际对象中有与 TRec 相关的代码。

现代 Object Pascal 中有解决方案吗？如果没有，只是好奇是否有任何其他支持泛型的语言可以解决这样的问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T14:02:09.057

我不完全确定我理解你的问题，但我认为你正在寻找这样的东西：

```
type
  TMyObject<T> = class
  public
    type
      PArr = ^TArr;
      TArr = array[0..100000] of T;
  private
    fRecs: PArr;
  public
    property Recs: PArr read fRecs
  end; 
```

也就是说，我看不出那堂课的意义。你可以只使用`TList<T>`from `Generics.Collections`。

如果你需要一个数组，那么你可以使用一个动态数组：`TArray<T>`或者`array of T`，你喜欢。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T14:04:44.700

你的通用语法有点混乱。试试这个：

```
 TRecArray<T> = array[0..100000] of T;

  TGenericRecObject<T> = class
  private
    FRecs: TRecArray<T>;
  public
    property Recs: TRecArray<T> read FRecs;
  end; 
```

# jquery-mobile - Java 脚本问题 $(document).on/live/bind 不起作用

> ID：13398950
> 
> 赞同：2
> 
> 时间：2012-11-15T13:55:46.193
> 
> 标签：jquery-mobile, page-init

我正在尝试在通过 ajax 调用加载的页面上实现随机答案。我正在使用 jquery 移动包容性布局。因此，我在 div data-roll 容器中添加了一个简单的 java 脚本，并通过 $(document).live 或 $(document).on 或 $(document).bind 对其进行了初始化，就像它应该根据这里的许多答案或建议一样. 当我使用正常的警报功能时，一切正常。像这样

```
<script>
    $(document).live('pageinit', "#answerPage", function (event) {
               alert("Page Initialized");
         });
</script> 
```

当我将它添加到普通的 html 页面时，我的脚本也可以正常工作。

因此，当我改为使用警报时，我使用函数 getanswer() 它不起作用。我在这里做错了什么？谢谢你的帮助。

```
<!DOCTYPE html> 
<html> 
    <head> 
    <title>Title</title> 

    <meta name="viewport" content="width=device-width, initial-scale=1"> 

    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.min.css" />
    <script src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
    <script src="http://code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.min.js"></script>

    </head> 
<body>

<div data-role="page" id="answerPage" data-theme="b" data-add-back-btn="true">

     <script>
    $(document).on("pageinit", "#answerPage", function(event) {
            function getanswer() {
                    var r_text = new Array ();
                        r_text[0] = "A";
                        r_text[1] = "B";
                        r_text[2] = "C";
                        r_text[3] = "D";
                        r_text[4] = "E";
                        r_text[5] = "F";
                        r_text[6] = "G";
                    var i = Math.floor(7*Math.random());
                    document.getElementById("ShowAnswer").innerHTML = r_text[i];
                    };

          });
     </script>

     <div data-role="header" data-position="fixed" data-theme="b">
         <div id="ShowAnswer"> </div>   

     </div>
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T14:25:22.457

你忘了调用你的函数`getanswer()`......
见[工作示例](http://jsfiddle.net/eaxMN/)：

```
<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Test</title>
  <link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
  <script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
  <script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script>
</head>

<body>
  <div data-role="page" id="answerPage" data-theme="b" data-add-back-btn="true">
     <div data-role="header" data-position="fixed" data-theme="b">
       <div id="ShowAnswer"></div>
     </div>
  </div>

  <script>
    $(document).on("pageinit", "#answerPage", function(event) {
      getanswer();
    });

    function getanswer() {
      var r_text = new Array ();
      r_text[0] = "A";
      r_text[1] = "B";
      r_text[2] = "C";
      r_text[3] = "D";
      r_text[4] = "E";
      r_text[5] = "F";
      r_text[6] = "G";
      var i = Math.floor(7*Math.random());
      document.getElementById("ShowAnswer").innerHTML = r_text[i];
    };
   </script>
</body>
</html> 
```

# php - PDO 没有按照教程所说的方式插入行

> ID：13398957
> 
> 赞同：2
> 
> 时间：2012-11-15T13:56:12.050
> 
> 标签：php, mysql, pdo

我以前从未使用过 PDO，但最终决定将安全性放在首位，我必须从熟悉的内置 mysql 语句切换到更安全的语句。dbconn.php 中的 db_connect() 函数工作得很好，几乎是从 PDO 教程中复制和粘贴的，并成功地使用多个 SELECT 语句进行了测试。

```
 include "dbconn.php";

    db_connect();

    //INSERT INTO  `a4331098_VAtest`.`VA_GPS` (`gID` , 'gtruck' , `gLat` , `gLong` , `gAlt` , `gTime`) VALUES (NULL , '434' , '47.558',  '-76.557',  '543',  '0111588448');
    $pTruck = $_POST['gTruck'];
    $pLat = $_POST['gLat'];
    $pLong = $_POST['gLong'];
    $pAlt = $_POST['gAlt'];
    $pTime = $_POST['gTime'];

    //echo $pTruck . "<br />" . $pLat . "<br />" . $pLong . "<br />" . $pAlt . "<br />" . $pTime . "<br /><br />";

    $stmt = $dbconn->prepare("INSERT INTO a4331098_VAtest.VA_GPS VALUES (NULL , ':fTruck' , ':fLat' , ':fLong' , ':fAlt' , ':fTime')");
    $stmt->execute(array(':fTruck' => $pTruck , ':fLat' => $pLat , ':fLong' => $pLong , ':fAlt' => $pAlt , ':fTime' => $pTime));
    $affected_rows = $stmt->rowCount();
    echo $affected_rows; 
```

我知道正确的值被传递给脚本（注释掉的回声告诉我）但由于某种原因 $affected_rows 一直返回 0。数据库的结构是 gID（被传递为 NULL，因为它自动递增）、gTruck、gLat ，gLong，gAlt，gTime。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-15T14:00:44.687

尝试删除语句中变量周围的引号。PDO 将根据值的类型插入或不插入它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T14:04:24.430

您不必在 PDO :variables 中使用简单的引号。如果你这样做，pdo 将寻找一个名为的列`':variable'`并且不会使用分配的值。

试试这个 ：

```
 $stmt = $dbconn->prepare("INSERT INTO a4331098_VAtest.VA_GPS VALUES (NULL , :fTruck , :fLat , :fLong , :fAlt , :fTime)"); 
```

告诉我们发生了什么`$stmt->errorInfo()`

祝你好运

**编辑**：

不要忘记，默认情况下，PDO 的变量是用引号插入的，因此它可以防止任何 sql 注入风险并保护您的数据库。

这就是为什么您不需要自己插入引号。

# emacs - 文本处理以连接行（即删除行尾字符）

> ID：13398959
> 
> 赞同：0
> 
> 时间：2012-11-15T13:56:15.187
> 
> 标签：emacs

我有一个这样的行列表：

```
a+
b+
c+
d+
e+
f+
... you get the idea... 
```

我想以 a+b+c+d+e 等结尾

我正在尝试使用 emacs，但无法弄清楚如何做这样的事情。有人有什么想法吗？

起作用的一件事是 cm-% [在一行 + 之后选择粘贴到下一行的开头] [无]

必须有一些东西要插入回车？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T14:07:23.823

简单地用任何东西替换 EOL 怎么样？

`M-%``C-q C-j``RET``RET`

解释：

*   `M-%`: 查询替换
*   `C-q`: 引用下面的字符
*   `C-j`: 行尾字符
*   首先`RET`：验证搜索字符串
*   第二`RET`：验证（空）替换字符串

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T14:03:33.980

你有一个包含这些行的缓冲区吗？在这种情况下，您可以创建一个简单的宏：

```
F3  ;; record macro
C-e ;; end of line
C-d ;; delete newline
F4  ;; save macro 
```

然后重复按 F4 直到完成，或者一口气完成`C-0 F4`所有操作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-15T17:00:59.430

你试过 'Mq' 吗？间距是不同的，如果你有很多这样的东西，它会使用几行，但除此之外，它似乎是一个有趣的选择。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-15T14:13:21.650

```
M-x
replace-regexp
RET
C-q C-j
RET
RET 
```

# bash - 如果字符串在文件中出现一次，则删除所有出现的字符串

> ID：13398961
> 
> 赞同：0
> 
> 时间：2012-11-15T13:56:22.297
> 
> 标签：bash, shell, sed, grep

我有一个日志文件，其中记录了调用堆栈。

例如

```
Call stack: [thread 0xb0468000]: | thread_start | _pthread_start | __NSThread__main__ | -[NSThread main] | -[AggregatorObjCWorkQueue newThreadMainLoop] | -[NSRunLoop(NSRunLoop) runMode:beforeDate:] | CFRunLoopRunInMode | CFRunLoopRunSpecific | __CFRunLoopRun | __CFRunLoopDoSources0 | __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE0_PERFORM_FUNCTION__ | __NSThreadPerformPerform | -[NSObject performSelector:withObject:] | -[AggregatorTask run] | -[ComAppAggregatorApiSystemClientWorkerFactory_$4_$1 run] | -[ComAppAggregatorFrameworkClientSubscriptionSyncer startWithComAppAggregatorApiClient:] | -[ComAppAggregatorSyncClientSyncSubscriptionRegistry addSubscriptionWithComAppAggregatorQueryQueryXML_Subscription:] | -[ComAppAggregatorSyncClientSyncSubscriptionRegistry newSyncAndPostWithComAppAggregatorQueryQueryXML_QueryKey:] | -[ComAppAggregatorSyncClientSyncSubscriptionRegistry writeUpdateWithComAppAggregatorQueryQueryXML_QueryKey:] | -[ComAppAggregatorSyncClientSyncSubscriptionRegistry writeSubscriptions] | -[JavaUtilTreeMap putWithId:withId:] TreeMap.m:371 | -[JavaUtilTreeMap createNodeWithId:withId:] TreeMap.m:634 | -[JavaUtilTreeMap_Node init] TreeMap.m:1463 | -[IOSObjectArray initWithLength:type:] IOSObjectArray.m:42 | calloc | malloc_zone_calloc 
```

目标是创建一个具有唯一调用堆栈的文件，即将此堆栈的第一次出现复制到另一个文件并忽略所有其他文件。

对于不同性质的调用堆栈也是如此。

限制是我需要使用 shell 脚本来完成这项工作。任何指针？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T14:20:51.290

只需使用以下`-u`选项（唯一）`sort`：

```
sort -u logfile.log 
```

# vb.net - 打开 Option Strict - 陷阱？

> ID：13398965
> 
> 赞同：0
> 
> 时间：2012-11-15T13:56:49.083
> 
> 标签：vb.net, option-strict

我正在我新继承的 VB.NET 应用程序中的所有项目上打开 Option Strict。我主要是添加很多 CStr、CBool​​、CType 语句来消除所有编译错误。

```
Dim x As String = someObject
dim val As SomeEnumType = 1 
```

变成

```
Dim x As String = CStr(someObject) ' Not .ToString() because someObject could be Nothing
Dim val As SomeEnumType = CType(1, SomeEnumType) 
```

等等

我几乎每次都用手做一个错误，并且有一个测试应用程序来测试Nothing，...bordercases。

但是有没有可能我遗漏了一些会在运行时产生异常的东西？由于 Option Strict 会生成什么样的代码？只是要添加一些转换，还是 OptionStrict 还会做其他事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T14:04:39.760

Option Strict On 不会**生成**任何额外的代码，它只是告诉编译器在您的 vb.net 语句依赖于隐式类型转换时生成错误。就像将对象分配给字符串一样。您在代码段中编写的内容正是编译器对 Option Strict Off 所做的事情，因此您的类型转换运算符不会生成额外的代码。

但是，当然，您使用错误的转换并破坏现有代码的可能性总是非零。当你对代码进行更改时，你必须做总是需要做的事情，你必须重新测试它。

# ios - 警告：尝试呈现

> ID：13398971
> 
> 赞同：4
> 
> 时间：2012-11-15T13:57:16.037
> 
> 标签：ios, storyboard, warnings, call, hierarchy

我的问题是当我调用函数时：

```
[self performSegueWithIdentifier: @"FinalPlayPT" sender: self]; 
```

它有效，但我有这个警告：

> 警告：尝试呈现不在窗口层次结构中的视图！

我正在使用故事板、xcode 4.5.2 和 iOS6，有什么想法吗？谢谢。

顺便说一句，如果我使用 UIButton 进行 segue，则没有警告，但我需要以编程方式进行。

我一直在尝试调用另一个 VC 并且总是发出相同的警告。

我不知道该怎么办。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-04T14:20:54.463

这听起来像你试图在你的视图控制器出现在屏幕上之前执行你的 segue。将您的呼叫移至`viewDidAppear:`或稍后。

# javascript - 将项目动态添加到手风琴布局

> ID：13398972
> 
> 赞同：3
> 
> 时间：2012-11-15T13:57:18.357
> 
> 标签：javascript, extjs, accordion

我创建了一个带有手风琴布局的面板。我无法在面板中添加动态项目。的值`items`是静态的，如下所示。请帮我解决这个问题。

下面是代码：

```
var panel = new Ext.panel{
  scroll: "vertical"
  layout{
     type: "accordian"
   }

   items: [{xtype:"panel", title:"123", html:"123"}]
} 
```

如何在基于 JSON 的项目中包含动态值？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T14:04:32.000

您可以通过以下方式将项目动态添加到任何给定容器：

```
var panel = Ext.create('Ext.panel.Panel', {
  title: 'Hello World',
  layout{ type: 'accordion' },
  renderTo: Ext.getBody()
});
var items = [{title:"123", html:"123"},{title:"456", html:"456"}];

panel.add(items); 
```

**编辑：**
查看[Touch1.1 文档](http://docs.sencha.com/touch/1-1/#!/api/Ext.Container-method-add)以获取更多示例。

Ext Touch 1.1 示例：

```
var cnt = new Ext.Container({});
var items = [{title:"123", html:"123"},{title:"456", html:"456"}];

cnt.render(document.body);
cnt.add(items);
cnt.doLayout(); 
```

# c++ - boost::any 的访问者模式

> ID：13398976
> 
> 赞同：5
> 
> 时间：2012-11-15T13:57:38.850
> 
> 标签：c++, boost, visitor-pattern, boost-any

我找到了这个[https://gist.github.com/2945472](https://gist.github.com/2945472)但我需要一个不依赖于 c++11 的实现。我尝试将其转换为仅使用 boost，但我遇到了一些麻烦。

这是我想出的：

```
#include <boost/any.hpp>
#include <boost/function.hpp>
#include <boost/bind.hpp>
#include <boost/lambda/lambda.hpp>
#include <boost/unordered_map.hpp>

struct type_info_hash {
    std::size_t operator()(std::type_info const & t) const {
        return t.hash_code();
    }
};

struct equal_ref {
    template <typename T> bool operator()(boost::reference_wrapper<T> a,boost::reference_wrapper<T> b) const {
        return a.get() == b.get();
    }
};
struct any_visitor {
    boost::unordered_map<boost::reference_wrapper<std::type_info const>, boost::function<void(boost::any&)>, type_info_hash, equal_ref> fs;

    template <typename T> void insert_visitor(boost::function<void(T)> f) {
        try {
            fs.insert(std::make_pair(boost::ref(typeid(T)), boost::bind(f, boost::any_cast<T>(boost::lambda::_1))));
        } catch (boost::bad_any_cast& e) {
            std::cout << e.what() << std::endl;
        }
    }

    bool operator()(boost::any & x) {
        boost::unordered_map<boost::reference_wrapper<std::type_info const>, boost::function<void(boost::any&)>, type_info_hash, equal_ref>::iterator it = fs.find(boost::ref(x.type()));
        if (it != fs.end()) {
            it->second(x);
            return true;
        } else {
            return false;
        }
    }
};

struct abc {};

void fa(int i) { std::cout << "fa(" << i << ")" << std::endl; }
void fb(abc) { std::cout << "fb(abc())" << std::endl; }

int main() {
    any_visitor f;
    f.insert_visitor<int>(fa);
    f.insert_visitor<abc>(fb);

    std::vector<boost::any> xs;
    xs.push_back(1);
    xs.push_back(abc());
    xs.push_back(1.5);

    for (auto & x : xs) {
        if (!f(x)) std::cout << "no visitor registered" << std::endl;
    }
} 
```

插入地图时，我得到了 bad_any_cast。不应该 any_cast 仅由 it->second(x) 调用吗？我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T14:06:22.883

您不能强制`_1`转换为`T`（在绑定表达式时）。

你需要一个懒惰的演员。也许定义一个函数并使用嵌套的绑定表达式，或者将 Boost Phoenix 与自定义`any_cast`角色一起使用。

这是嵌套绑定方法：

```
#include <boost/any.hpp>
#include <boost/function.hpp>
#include <boost/bind.hpp>
#include <boost/lambda/lambda.hpp>
#include <boost/unordered_map.hpp>

struct type_info_hash {
    std::size_t operator()(std::type_info const & t) const {
        return 42; // t.hash_code();
    }
};

struct equal_ref {
    template <typename T> bool operator()(boost::reference_wrapper<T> a,boost::reference_wrapper<T> b) const {
        return a.get() == b.get();
    }
};
struct any_visitor {
    boost::unordered_map<boost::reference_wrapper<std::type_info const>, boost::function<void(boost::any&)>, type_info_hash, equal_ref> fs;

    template <typename T> static T any_cast_f(boost::any& any) { return boost::any_cast<T>(any); }

    template <typename T> void insert_visitor(boost::function<void(T)> f) {
        try {
            fs.insert(std::make_pair(boost::ref(typeid(T)), boost::bind(f, boost::bind(any_cast_f<T>, boost::lambda::_1))));
        } catch (boost::bad_any_cast& e) {
            std::cout << e.what() << std::endl;
        }
    }

    bool operator()(boost::any & x) {
        boost::unordered_map<boost::reference_wrapper<std::type_info const>, boost::function<void(boost::any&)>, type_info_hash, equal_ref>::iterator it = fs.find(boost::ref(x.type()));
        if (it != fs.end()) {
            it->second(x);
            return true;
        } else {
            return false;
        }
    }
};

struct abc {};

void fa(int i) { std::cout << "fa(" << i << ")" << std::endl; }
void fb(abc) { std::cout << "fb(abc())" << std::endl; }

int main() {
    any_visitor f;
    f.insert_visitor<int>(fa);
    f.insert_visitor<abc>(fb);

    std::vector<boost::any> xs;
    xs.push_back(1);
    xs.push_back(abc());
    xs.push_back(1.5);

    for (auto it=xs.begin(); it!=xs.end(); ++it)
        if (!f(*it)) std::cout << "no visitor registered" << std::endl;
} 
```

打印输出：

```
fa(1)
fb(abc())
no visitor registered 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T11:43:34.953

尝试使用可扩展的任何 [https://sourceforge.net/projects/extendableany/?source=directory](https://sourceforge.net/projects/extendableany/?source=directory)。

```
struct f_method
{
    typedef void (boost::mpl::_1::* signature) () const;

    template <typename T>
    struct wrapper
        : public T
    {
        void f() const
        {
            return this->call(f_method());
        }
    };

    struct implementation
    {
        void operator() (int i) const
        {
           std::cout << "fa(" << i << ")" << std::endl;
        }

        void operator() (abc) const
        {
           std::cout << "fb(abc())" << std::endl;
        }

        template <typename T>
        void operator() (const T& t) const
        {
            std::cout << "Errr" << std::endl;
        }
    };
};

typedef xany<boost::mpl::list<f_method> > any;

int main() {
    std::vector<any> xs;
    xs.push_back(1);
    xs.push_back(abc());
    xs.push_back(1.5);

    for (auto it=xs.begin(); it!=xs.end(); ++it)
        (*it).f();
} 
```

# apache - 虚拟主机无法正确解析

> ID：13398978
> 
> 赞同：0
> 
> 时间：2012-11-15T13:57:40.517
> 
> 标签：apache, vhosts

我有以下虚拟主机配置：

```
<VirtualHost *:80>
    DocumentRoot "C:/xampp/htdocs/projects/mycheck.il"
    ServerName mobile.mycheck
    ErrorLog "logs/mobile.mycheck.log"
</VirtualHost>
<VirtualHost *:80>
    DocumentRoot "C:/xampp/htdocs/projects/api.il"
    ServerName api.mycheck
    ErrorLog "logs/api.mycheck.log"
</VirtualHost>
<VirtualHost *:80>
    DocumentRoot "C:/xampp/htdocs/projects/admin"
    ServerName front.mycheck
    ErrorLog "logs/front.mycheck.log"
</VirtualHost>
<VirtualHost *:80>
    DocumentRoot "C:/xampp/htdocs"
    ServerName localhost
    ErrorLog "logs/localhost.log"
</VirtualHost> 
```

并使用 Windows，我有以下主机文件

```
127.0.0.1       localhost
127.0.0.1       mobile.mycheck
127.0.0.1       api.mycheck
127.0.0.1       front.mycheck 
```

但是，无论我尝试在浏览器中放入什么虚拟主机，我总是解析到同一个目录`(projects/mycheck.il)`，知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T14:00:20.347

尝试在您的 VirtualHost 声明之前添加以下行：

```
NameVirtualHost *:80 
```

# xpages - XSP 部分刷新

> ID：13398980
> 
> 赞同：1
> 
> 时间：2012-11-15T13:57:42.080
> 
> 标签：xpages, lotus, xpages-ssjs

我正在尝试从锚链接向服务器发送值，并从从锚链接调用的函数中调用以下代码。虽然我能够触发部分刷新，但我得到一个错误......请任何指针......

```
var refreshId=dojo.query('[id$="testPanel"]')[0];
      alert(refreshId.innerHTML)
        alert(refreshId.id)
    var mySubmitValue='whatYouWantToSendHere';
    XSP.partialRefreshGet(refreshId, {
         params: {
          '$$xspsubmitvalue': mySubmitValue
         },
         onStart: function () {
               alert('starting');
         },
         onComplete: function () {
               alert('Complete');
         },
         onError:'myErrHandler( arguments[0], arguments[1] )'

    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T14:33:40.720

您正在将对象发送到服务器。使用元素的**id**代替：

```
XSP.partialRefreshGet(refreshId.id, { 
```

# vb.net - 通过线程访问 ProgressBar

> ID：13398982
> 
> 赞同：2
> 
> 时间：2012-11-15T13:57:50.587
> 
> 标签：vb.net, multithreading

这听起来可能很愚蠢，但我无法访问另一个线程中的进度条。是的，我已经调用了它。看看这个：

```
Delegate Sub ProgressBarCallback(ByVal value As Integer, ByVal max As Integer)

Sub updateProgressBarCurrent(ByVal value As Integer, ByVal max As Integer)

    If Me.progressBar_currentState.InvokeRequired = True Then
        Dim d As New ProgressBarCallback(AddressOf updateProgressBarCurrent)
        Me.progressBar_currentState.Invoke(d, New Object() {value, max})
    Else
        progressBar_currentState.Maximum = max
        If value < max Then
            progressBar_currentState.Value = value
            progressBar_currentState.Refresh()
        End If
    End If

End Sub 
```

我正在从类中的方法调用 updateProgressBarCurrent()。看看调试器：

![调试器截图](../Images/0ebacc34c9e5f44ee582be7f081bbd99.png)

ProgressBar 只是不做任何事情。这是因为我从我的 databaseHandler 类中的方法调用子 updateProgressBarCurrent 吗？我怎样才能解决这个问题？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T14:17:35.847

您是否使用表单的“默认实例”功能？多线程应用程序中的一种禁止使用！每个线程都有一个默认实例。因此，如果您`Form1.DoSomething`从另一个线程调用，您不会调用“您的”Form1，而是调用 Form1 的新（不可见，未显示）实例。

# html - 垂直拉伸 DIV

> ID：13398984
> 
> 赞同：0
> 
> 时间：2012-11-15T13:57:54.123
> 
> 标签：html, css

我在这里创建了一个小提琴：http: [//jsfiddle.net/mupersan82/xAgHg/2/](http://jsfiddle.net/mupersan82/xAgHg/2/)

HTML：

```
 <div class="incidentRow">
                <div class="incidentCellLeft">
                    <span class="incidentCellTopLeft incidentId">206 805</span>
                    <span class="incidentCellBottomLeft incidentReferences">15</span>
                </div>
                <div class="incidentCellTopRight incidentSubject">Anders Buch Lassen</div>
                <div class="incidentCellBottomRight incidentDescription ">
                    <span class="multilineEllipseText">Knokler, knokler, knokler! 
                        Burde gå i seng. Burde gå i seng. Burde gå i seng.
                    Burde gå i seng.Burde gå i seng.Burde gå i seng.
                    Burde gå i seng.Burde gå i seng.Burde gå i seng.</span></div>
            </div> 
```

我希望左侧的灰色框向下延伸到包装器 div 底部的蓝色边框。随着更多内容添加到右下角的框中，它应该会继续拉伸。如何做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T14:04:40.377

```
.incidentCellLeft
{
    max-height:200px;
    width: 50px;
    display: block;
    float:left;
    text-align: center;
    background-color: #E6E6E6;
    vertical-align: bottom;
    height:100%;
    position: absolute;
} 
```

`height:100%;`并`position: absolute;`添加。在这里演示：http: [//jsfiddle.net/xAgHg/5/](http://jsfiddle.net/xAgHg/5/)

`max-height:200px;`此外，如果你希望它被拉伸到超过 200px 的高度，你应该删除它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T14:09:00.207

你不需要改变任何东西的高度。只需将`background-color`容器的设置为灰色，并将右侧单元格的背景颜色设置为白色：

[演示](http://jsfiddle.net/xAgHg/9/)

# intellij-idea - 通过 IntelliJ IDEA 构建后上传 flash

> ID：13398986
> 
> 赞同：1
> 
> 时间：2012-11-15T13:58:10.897
> 
> 标签：intellij-idea

通过flex在IntelliJ IDEA中构建后如何配置生成的flash文件的自动上传？

在使用 IntelliJ IDEA 之前，我使用了一个简单的 shell 命令来编译和上传文件。现在我想要 IntelliJ IDEA 中的类似过程。

```
mxmlc -debug=true -static-link-runtime-shared-libraries=true   -output flash.swf flash.as 2>&1 && scp flash.swf user@server:/var/www/ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-20T20:28:15.613

我建议将 maven 用于围绕 Flex 项目的许多事情。在这种情况下，您可以使用以下插件之一：

[Maven FTP](http://maven.apache.org/plugins/maven-deploy-plugin/examples/deploy-ftp.html)

或者

[货物](http://cargo.codehaus.org/Maven2+plugin)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T14:04:21.220

您可以配置外部工具，详细说明参见[在线帮助](http://www.jetbrains.com/idea/webhelp/external-tools.html)

# java - 如何在eclipse中的可执行jar的类路径中获取我的外部jar？

> ID：13398988
> 
> 赞同：0
> 
> 时间：2012-11-15T13:58:15.277
> 
> 标签：java, eclipse, maven

我在 pom.xml 中添加了一个指定 mainClass 的部分，并允许它实质上创建一个可执行的 jar。我还包含了一些 Maven 管理的依赖项。它编译，如果我不带任何选项运行程序，它执行得很好，显示使用信息。但是，如果我实际传入参数，它会失败并显示 NoClassDefFoundError: com/sas/isd/midasapi/ParticipantDetailExt，它位于我作为外部 jar 包含的 jar 中。我很困惑它编译并运行以显示使用信息，但是由于 ParticipantDetailExt 是一个导入的类，所以它无法找到该类。不会 它是否确定在编译期间未找到它？如何获取它以便在我运行可执行 jar 时看到带有 ParticipantDetailExt 的 on jar？除了将 jar 添加为外部 jar 之外，我还需要做类路径或 pom 的事情吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T15:29:33.037

我假设您正在运行 mvn clean package 或 mvn clean install 来创建您的 jar。默认情况下，由 maven 项目创建的 jar 不包含该 jar 中的依赖项。

选项 1# create a jar-with-dependencies，请参阅：[How can I create an executable JAR with dependencies using Maven?](https://stackoverflow.com/questions/574594/how-can-i-create-an-executable-jar-with-dependencies-using-maven) .

选项 2# 如果您只是想将依赖项复制到 lib 文件夹，请参阅：[http ://maven.apache.org/plugins/maven-dependency-plugin/copy-dependencies-mojo.html](http://maven.apache.org/plugins/maven-dependency-plugin/copy-dependencies-mojo.html)

# string - 使用 perl 拆分逗号分隔的字符串和文本限定符

> ID：13398989
> 
> 赞同：2
> 
> 时间：2012-11-15T13:58:24.323
> 
> 标签：string, perl, split

我需要使用 perl 拆分下面的字符串，详细信息如下。我需要将数据从 CSV 文件加载到表中。字符串变量用“”括起来。请给我一个想法，我是 perl 脚本的新手。

细绳 ：`"February 6, 2012","","","1","02/06/12","","",1,1,0`

输出 ：

```
February 6, 2012
<BLANK VALUE>
<BLANK VALUE>
1
02/06/12
<BLANK VALUE>
<BLANK VALUE>
1
1
0 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-15T14:00:26.713

这看起来很像 CSV。如果是，那么请帮自己和我们一个忙，并为它使用适当的模块而不是正则表达式。有优秀的[Text::CSV_XS](http://search.cpan.org/~hmbrand/Text-CSV_XS-0.92/CSV_XS.pm)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T14:27:10.150

```
#!/usr/bin/perl
use strict;
use warnings;

my $ac = qq("February 6, 2012","","","1","02/06/12","","",1,1,0);

$ac=~s/\"//ig;
my @arr = split(',', $ac);
$arr[0] .= $arr[1];
print $arr[0] . "\n"; # the date is February 6, 2012

# print other elements
for (my $i=2; $i < @arr; $i++) {
    if ($arr[$i] eq '') {print "<BLANK VALUE>\n";}
    else {print $arr[$i] . "\n";}
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T14:18:10.517

您可以使用正则表达式对其进行拆分。您要拆分的每个项目都应包装在一个组中，如下所示

```
^\"(.*?)\",\"\",\"\",\"(.*?)\",\"(.*?)\",\"\",\"\",(\d),(\d),(\d) 
```

括号中的表达式是一个组，然后您可以在代码中获取组。

# r - 使用 R 计算矩阵中值的标准化差

> ID：13398992
> 
> 赞同：0
> 
> 时间：2012-11-15T13:58:29.300
> 
> 标签：r, matrix

我有一个由 116 列和 4700 行组成的大矩阵。

对于每一行，我想计算以下形式的标准化差异：

```
(((a2-a1)/a1)*100)+100, where a1 is the previous value and a2 is the next value. 
```

在 R 中，我使用以下代码：

```
for i in (1:116)

a[i]=(((a[i]-a[i-1])/a[i-1])*100)+100 
```

但是我收到以下错误：

```
Error in Ops.data.frame(a[i], a[i - 1]) : 
- only defined for equally-sized data frames 
```

我猜问题在于它没有考虑第一个值，其中不存在要减去的第一个值 1。

我怎么解决这个问题？

这是数据的一个子集：[https ://dl.dropbox.com/u/22681355/su.csv](https://dl.dropbox.com/u/22681355/su.csv)

请记住，我想单独计算每一列！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T14:14:22.087

您的问题可以使用可[重现的示例](https://stackoverflow.com/q/5963269)来使其更清楚。例如，您说您有一个矩阵，但随后显示与数据框相关的错误。在不知道您的数据是什么样子的情况下，我们无法知道答案是否正确。

但无论如何，我认为你可以在没有循环的情况下做到这一点，如下所示。

```
# Example data:
foo <- data.frame(A = 1:10, B = rnorm(10))

# Compute standardized differences:
(foo[-1,] - foo[-nrow(foo),]) / foo[-nrow(foo),] * 100 + 100 
```

# eclipse - MercurialEclipse 分支

> ID：13398993
> 
> 赞同：0
> 
> 时间：2012-11-15T13:58:29.737
> 
> 标签：eclipse, mercurial, mercurialeclipse

如何在 MercurialEclipse 插件中将更改从一个分支拉到另一个分支？我找不到任何信息。我也看到了几个选项：变基和合并，但我害怕使用它们，因为我从事商业项目。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T04:16:13.177

这不是一个真正的 MercurialEclipse 问题——简单的 mercurial 的答案也是有效的。简短的回答是使用合并。合并会将在另一个分支上所做的所有更改应用于自上次合并以来的当前分支（如果之前从未合并过，则从分支点开始）。

Rebase 删除源变更集，因此通常不适合将更改从一个命名分支应用到另一个。

第三种选择是使用移植。这使您可以选择特定的变更集以应用于当前分支。

# python - Apache SSL 与 Python 简单 HTTP 服务器 SSL 安全问题

> ID：13398996
> 
> 赞同：5
> 
> 时间：2012-11-15T13:58:49.160
> 
> 标签：python, apache, security, ssl, webserver

在创建基于 SSL 的网站时，我一直使用 Apache Webserver。如果您拥有证书，Python HTTP Server 库似乎也可以处理基于 SSL 的服务。我不确定 Python 网络服务器能否提供与 Apache 一样安全的服务，但由于我无法找到更多关于它的质量的信息，我想知道我是否在浪费时间尝试使用它在我的 web2py 框架中。

在安全性方面，使用 Python HTTP Server SSL 与 Apache SSL 的优缺点是什么？

**注意：**我不关心性能和承重

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-18T00:44:45.137

Apache 和 Python 都使用 OpenSSL 库，因此仅从这一非常简单的功能来看，它们应该几乎相同。（有点奇怪的问题......你为什么不考虑这个变化的所有其他安全影响？）

话虽如此，HTTP 守护进程非常复杂，而且这些 HTTP 守护进程的安全性也大相径庭。Apache 仍然由大多数网站运行，并且那里有最多的黑客查看它，并且通过扩展，它删除的漏洞可能比任何其他 HTTP 守护程序都多。就个人而言，我不会将 Apache 以外的任何东西用于安全关键应用程序。

相比之下，Python 的 HTTP 服务器没有被广泛使用，它遭受了非常愚蠢的漏洞，比如[忘记设置内容类型](http://www.ubuntu.com/usn/usn-1592-1/)，这使得几乎不可能阻止 XSS。Python 的 HTTP 守护进程中可能还有更多愚蠢的漏洞尚未被发现。