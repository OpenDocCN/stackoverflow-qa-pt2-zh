# StackOverflow 问答 16006000-16006999

# java - 从排序对象数组到 ArrayList I had this: Comparator<Item> ignoreLeadingThe = new Comparator<Item>() { public int compare(Item a, Item b) { String newA = a.name.replaceAll("(? 问问题 问问题 2013-04-15T00:38:09.177 162 次 This question shows research effort; it is useful and clear 3 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. I had this: Comparator<Item> ignoreLeadingThe = new Comparator<Item>() { public int compare(Item a, Item b) { String newA = a.name.replaceAll("(?i)^the\\s+", ""); String newB = b.name.replaceAll("(?i)^the\\s+", ""); return newA.compareToIgnoreCase(newB); } }; Array.sort(MyItemArrayOfObjects, ignoreLeadingThe); I stopped using Arrays and am now using ArrayList. So when I do this: Collections.sort(MyItemArrayListOfObjects, ignoreLeadingThe); I can't even figure out the pattern that it is now sorting by. Can I do a clean switch like this? (It is entirely possible I broke this with something not mentioned above, if this is right, then that's all I need to know) Note: Originally, with the Arrays I was simply trying to alphabetize a list and ignore the leading "The". It's for an Android app. Each List row Item data was wrapped in an Object that I am passing to an ArrayAdapter. I simply wanted to take an ArrayList inside that object and alphabetize it. So essentially, it's an ArrayList with a few ArrayList inside it. Your comparator looks good The bad news is that it does not cache the resulting strings. So your sorting will create o(N*log(N)) Pattern's, Matcher's and String's objects not talking about the fact creation of some of them is not super fast. UPD It's advisable to use @Override on the methods you implement for interfaces and override in subclasses. javaandroidarraysarraylist 4 2 回答 2 This answer is useful 1 It would work perfectly well for Collections.sort, I only suggest to improve the Comparator Comparator<Item> ignoreLeadingThe = new Comparator<Item>() { Pattern pattern = Pattern.compile("(?i)^the\\s+"); public int compare(Item a, Item b) { String newA = pattern.matcher(a.name).replaceAll(""); String newB = pattern.matcher(b.name).replaceAll(""); return newA.compareToIgnoreCase(newB); } }; 于 2013-04-15T03:38:15.563 回答 This answer is useful 1 你的比较器看起来不错 坏消息是它不会缓存结果字符串。因此，您的排序将创建o(N*log(N))Pattern's、Matcher's 和 String's 对象，而不是谈论其中一些对象的创建速度不是很快的事实。 UPD 建议在为接口实现的方法上使用 @Override 并在子类中覆盖。 于 2013-04-15T00:48:34.927 回答 Related 1 c# - 将隐藏模型列表添加到 Razor 表单 1 jquery - jquery, 图片幻灯片效果 3 ruby-on-rails - 单击 ruby on rails 应用程序中的链接时显示路由错误没有路由匹配错误 2 ruby-on-rails - 通过翻译属性全球化3订单记录并考虑回退 2 syntax - OCaml 文字负数？ 1 python-2.7 - Python ReportLab - 带有 X of Y 页码的可点击目录 1 background-image - 带背景图像的 div，没有内容不显示百分比声明 5 jquery - 根据每个图像名称添加带有 jquery 的标题标签 7 python - Python：将列表转换为生成器 2 php - 如何使用 Amazon Feed API 上传 TSV 亚马逊订单文件？ Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：16006003
> 
> 赞同：3
> 
> 时间：
> 
> 标签：java, android, arrays, arraylist

I had this:

```
Comparator<Item> ignoreLeadingThe = new Comparator<Item>() {
                public int compare(Item a, Item b) {
                    String newA = a.name.replaceAll("(?i)^the\\s+", "");
                    String newB = b.name.replaceAll("(?i)^the\\s+", "");
                    return newA.compareToIgnoreCase(newB);
                }
            };

Array.sort(MyItemArrayOfObjects, ignoreLeadingThe); 
```

I stopped using Arrays and am now using ArrayList. So when I do this:

```
Collections.sort(MyItemArrayListOfObjects, ignoreLeadingThe); 
```

I can't even figure out the pattern that it is now sorting by. Can I do a clean switch like this? *(It is entirely possible I broke this with something not mentioned above, if this is right, then that's all I need to know)*

Note: Originally, with the Arrays I was simply trying to alphabetize a list and ignore the leading "The". It's for an Android app. Each List row Item data was wrapped in an Object that I am passing to an ArrayAdapter. I simply wanted to take an ArrayList inside that object and alphabetize it. So essentially, it's an ArrayList with a few ArrayList inside it.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T03:38:15.563

It would work perfectly well for Collections.sort, I only suggest to improve the Comparator

```
 Comparator<Item> ignoreLeadingThe = new Comparator<Item>() {
        Pattern pattern = Pattern.compile("(?i)^the\\s+");
        public int compare(Item a, Item b) {
            String newA = pattern.matcher(a.name).replaceAll("");
            String newB = pattern.matcher(b.name).replaceAll("");
            return newA.compareToIgnoreCase(newB);
        }
    }; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T00:48:34.927

你的比较器看起来不错

坏消息是它不会缓存结果字符串。因此，您的排序将创建`o(N*log(N))`Pattern's、Matcher's 和 String's 对象，而不是谈论其中一些对象的创建速度不是很快的事实。

**UPD**

建议在为接口实现的方法上使用 @Override 并在子类中覆盖。

# java - java中关于迭代加深深度优先搜索的问题

> ID：16006008
> 
> 赞同：2
> 
> 时间：2013-04-15T00:38:43.690
> 
> 标签：java, search, tree, iterative-deepening

我正在查看 Wikipedia 上的伪代码，并尝试使用它在 java 中编写算法。我的问题在于返回结果的方式有所不同。在维基百科上，返回一个结果，这超出了搜索范围。在我的情况下，每次找到相关节点时，都会将其添加到列表中，并且在处理完树后返回该列表。我将如何检测树的末端以打破并返回列表？

维基百科：

```
IDDFS(root, goal)
{
  depth = 0
  repeat
  {
    result = DLS(root, goal, depth)
    if (result is a solution)
      return result
    depth = depth + 1
  }
}

DLS(node, goal, depth) 
{
  if (depth == 0 and node == goal)
    return node
  else if (depth > 0)
    for each child in expand(node)
      DLS(child, goal, depth-1)
  else
    return null
} 
```

矿：

```
 public List<String> dfid(Tree t, String goal)
    {
        List<String> results = new ArrayList<String>();
        String result;

        int depth = 0;
        while (true) //obviously not the way to go here
        {
            result = dls(t.root, goal, depth);
            if (result.contains(goal))
                results.add(result);
            depth += 1;
        }
        return results; //unreachable return
    }

    public String dls(Node node, String goal, int depth)
    {
        if (depth == 0 && node.data.contains(goal))
        {
            return node.data;
        }
        else if (depth > 0)
        {
            for(Node child : node.children)
            {
                dls(child, goal, depth-1);
            }
        }
        return null;
    } 
```

编辑：更改后：

```
//depth first iterative deepening
        //control variables for these methods
        boolean maxDepth = false;
    List<String> results = new ArrayList<String>();

    public List<String> dfid(Tree t, String goal)
    {
        int depth = 0;

        while (!maxDepth)
        {
            maxDepth = true;
            dls(t.root, goal, depth);
            depth += 1;
        }
        return results;
    }

    public void dls(Node node, String goal, int depth)
    {
        if (depth == 0 && node.data.contains(goal))
        {
            //set maxDepth to false if the node has children
            maxDepth = maxDepth && children.isEmpty();
            results.add(node.data);
        }
        for(Node child : node.children)
        {
            dls(child, goal, depth-1);
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T00:46:20.080

我认为您可以使用`boolean maxDepth = false`实例变量来完成此操作。在您的 while 循环的每次迭代中，如果`maxDepth == true`然后退出，则设置`maxDepth = true`。在`dls`你到达`depth == 0`then set时`maxDepth = maxDepth && children.isEmpty()`，即如果节点有任何子节点，则将 maxDepth 设置为 false。

另外，更改`dls`为 void 方法。替换`return node.data`为`results.add(node.data)`, where `results`is an`ArrayList`或`HashSet`取决于您是否要过滤掉重复项。

如果你总是想访问树中的每个节点，那么修改`dls`如下

```
public void dls(ArrayList<String> results, Node node, String goal)
{
    if (node.data.contains(goal))
    {
        results.add(node.data);
    }
    for(Node child : node.children)
    {
        dls(child, goal, depth-1);
    }
} 
```

# javascript - JSON上的jQuery $.each

> ID：16006009
> 
> 赞同：0
> 
> 时间：2013-04-15T00:39:05.873
> 
> 标签：javascript, jquery, html, json, parsing

尽管阅读了谷歌首页上几乎所有关于此的文章，但我似乎无法让它发挥作用：

```
[ { "comment" : "Resources to learn the basics of financial markets and economic concepts",
    "id" : "1",
    "name" : "Basics of Finance"
  },
  { "comment" : "Pictures of colourful artwork to uplift the mood.",
    "id" : "2",
    "name" : "Colourful Artwork"
  }
] 
```

这是我想用 jQuery/javascript 解析并使用的 JSON 文件。这就是我目前正在尝试的：

```
$.ajax({ 
      url: 'yourcurations.php', 
      data: '', 
      dataType: 'json', 
      success: function(data){
        $.each($.parseJSON(data), function(i, item) {
        alert(item.name);
        });​
      }
    }); 
```

其中“数据”是上面粘贴的 JSON，但它不起作用。任何人都可以帮忙吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T00:52:06.073

返回的 JSON 数据已经被解析，因为您已经声明它是 JSON。即使没有说明返回类型，jQuery 也会“猜测”返回的数据类型并相应地对其进行解析。因此，`data`已经是一个数组，你不需要再解析了。

另外，`console.log`调试时使用。它为您提供有关该值的更多详细信息。

```
success: function(data){
  $.each(data, function(i, item) {
    console.log(item.name);
  });​
} 
```

# c# - 如何更新 RadCartesianChart / ObservableCollection

> ID：16006012
> 
> 赞同：0
> 
> 时间：2013-04-15T00:39:17.437
> 
> 标签：c#, data-binding, telerik, windows-runtime, observablecollection

在我的 Windows 8 应用程序中，我有一个如下所示的 RadCartesianChart：

```
<telerikChart:LineSeries ItemsSource="{Binding GraphData, Mode=TwoWay}" ShowLabels="True">
    <telerikChart:LineSeries.CategoryBinding>
        <telerikChart:PropertyNameDataPointBinding PropertyName="Category" />
    </telerikChart:LineSeries.CategoryBinding>
    <telerikChart:LineSeries.ValueBinding>
        <telerikChart:PropertyNameDataPointBinding PropertyName="Value" />
    </telerikChart:LineSeries.ValueBinding>
</telerikChart:LineSeries> 
```

它绑定到这个集合：

```
public ObservableCollection<Data> GraphData
{
    get { return _graphData; }
    set
    {
        if (_graphData != value)
        {
            _graphData = value;
            RaisePropertyChanged(() => GraphData);
        }
    }
} 
```

包含这些对象：

```
public class Data : ViewModelBase
{
    private string _category;
    private int _value;

    public string Category
    {
        get { return _category; }
        set
        {
            if (_category != value)
            {
                _category = value; 
                RaisePropertyChanged(() => Category);
            }
        }
    }

    //etc
} 
```

RadCartesianChart 绑定到一些默认数据，但我想在运行时替换这些数据。但不知何故我无法让这个工作......我已经尝试过简单地做一些类似的事情：

```
GraphData = new ObservableCollection<Data>(someData); 
```

我试着做这样的事情：

```
GraphData.Clear();
GraphData.Add(object1);
GraphData.Add(object2);
//etc 
```

但图表不会更新。我意识到这可能是一个 ObservableCollection 问题，但我无法让它工作。

我正在使用 MVVM Light`ViewModelBase`顺便说一句。有没有人有办法解决吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T13:06:35.537

当可观察集合发生更改时，它会引发 RadChart 侦听的集合更改事件，并且它将更新其 UI。我为您准备了一个示例，该示例引用了我们的 Q1 2013 SDK。你可以在这里找到它 - [https://www.dropbox.com/s/1zv32gqsx1vryen/RadChartObsCollection.zip](https://www.dropbox.com/s/1zv32gqsx1vryen/RadChartObsCollection.zip)

您能否澄清一下这是否也适用于您，如果不是 - 您使用的是我们的控件版本吗？

# php - 填写存储在会话变量中的多个表单

> ID：16006013
> 
> 赞同：0
> 
> 时间：2013-04-15T00:39:19.560
> 
> 标签：php, session

我只是对这里的最佳实践感到好奇......

我有一个用户填写的多页表单。目前，我将表单数据存储在会话变量中。

如果用户打开一个新选项卡来填写相同的表单，但细节略有不同，则 2 个选项卡会相互冲突。

我的想法是在填写表单的新请求时生成一个 uniqueid，然后将其保存在`?id=uniqueid`URL 中的 var 中，以便我可以跟踪他们填写的表单。

然后在PHP中，根据...添加/编辑/修改会话数据`$_SESSION[uniqueid]['formdata']`...

只是想知道是否有人对此有任何其他解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T01:27:15.827

可能会根据表单阶段分配一个 ID，以防止用户无意中篡改 URL。

```
$_SESSION['form1'] = $_POST; 
```

如果用户打开一个新选项卡，或稍后返回表单，您可以根据设置的会话密钥将他们带到表单的正确阶段。或者，如果您使用多维数组：

```
$_SESSION['form']['form1'] = ...;
...
$_SESSION['form']['form2'] = ...; 
```

您可以计算会话表单数组以获取他们填写的最新阶段。

```
if (isset($_SESSION['form']))
{
    $currentFormId = 'form' . count($_SESSION['form']);
} 
```

根据表单的用途，您可能希望在提交最后阶段时取消设置会话表单键。

# ruby-on-rails - 使用 Ruby/Rails 将链接从字符串转换为可点击的链接

> ID：16006016
> 
> 赞同：5
> 
> 时间：2013-04-15T00:39:28.697
> 
> 标签：ruby-on-rails, ruby

使用 Ruby/Rails 是否有人知道如何获取可能包含一些 HTML 元素的大字符串并将它们变成链接？

这是一个例子：

```
"Check out my video on you tube http://youtu.be/OkCcD6cOKgs" 
```

我正在寻找可以将 HTML 转换为有效的可点击链接`<a href ...`但也保留其他文本不变的东西，就像这个问题一样。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2018-02-09T07:47:16.003

我知道为时已晚，但是如果有人仍然有这个问题，那么他可以这样做。

```
text = "Check out my video on you tube http://youtu.be/OkCcD6cOKgs"
html_text = text.gsub(URI.regexp, '<a href="\0">\0</a>').html_safe 
```

这是我从这里[Ruby 找到的最好方法：使纯文本链接](https://coderwall.com/p/0ktfmw/ruby-make-plain-text-links-clickable)到现在为止可点击。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2019-11-26T16:51:08.247

Rails 曾经有一个内置的“auto_link”功能，现在可以作为一个['autolink' gem](https://github.com/tenderlove/rails_autolink)引入。这也会进行其他字符串清理。

或者，[“锚定”宝石](https://github.com/neighborland/anchored)更专注于这一任务。

没有宝石，这是我使用的红宝石代码：

```
 url_regexp = %r{
    (?:(?:https?|ftp|file):\/\/|www\.|ftp\.)
    (?:\([-A-Z0-9+&@#\/%=~_|$?!:,.]*\)|
         [-A-Z0-9+&@#\/%=~_|$?!:,.])*
    (?:\([-A-Z0-9+&@#\/%=~_|$?!:,.]*\)|
          [A-Z0-9+&@#\/%=~_|$])
  }ix

  text = text.gsub(url_regexp, '<a href="\0">\0</a>').html_safe 
```

我建议您使用任何解决方案仔细测试一些边缘情况。环顾四周寻找答案，您会发现有人推荐核心库`URI.regexp`或`URI::DEFAULT_PARSER`，但这无法通过非常简单的测试。尝试在文本中包含一个单词，后跟一个冒号 ':' 字符。您不希望它成为链接！（我真的不知道*为什么*这个内置的解决方案这么差。我猜它更多的是用于验证而不是*查找*类似 URL 的子字符串）

所以我上面的解决方案是一个基于[这个答案](https://stackoverflow.com/a/29288898/338265)的正则表达式，并转换为更红宝石。但是当你开始寻找时，那里有*许多*不同的 URL 正则表达式。您可以玩寻找任何给定正则表达式失败的尴尬边缘情况的游戏。通常较长的正则表达式会捕获更多的边缘情况。但是将其转换为在 ruby​​ 中工作也存在挑战。该网站提供了许多语言解决方案，包括一个（相当长的）ruby 示例：[http ://urlregex.com](http://urlregex.com)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T01:15:50.100

按最后一个分隔符拆分：[如何通过拆分字符的最后一次出现将字符串拆分为两部分？](https://stackoverflow.com/questions/12192343/how-to-split-a-string-into-only-two-parts-by-the-last-occurrence-of-the-split-c)

```
text, uri = "Check out my video on you tube http://youtu.be/OkCcD6cOKgs".split(/ (?=\S+$)/)

<%= link_to text, uri %> 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-15T00:43:28.737

您可以将字符串标记为`html_safe`. 我相信你需要做的就是`string.html_safe`。

这是如果您询问当字符串中已经存在 HTML 元素时如何正确显示字符串中的 HTML 元素。

如果您想将 URL 更改为 HTML 链接，您始终可以使用辅助方法检查字符串中是否存在 http(s)，并相应地添加 HTML 元素。

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2013-04-15T00:46:12.570

HTML 可能更容易。在您看来：

```
<h2>    <!--Or whatever tag you're using-->
  Check out my video on  
  <a href="http://http://youtu.be/OkCcD6cOKgs/">YouTube</a>
</h2> 
```

# git - 如何确定 git merge 是否是错误的方式

> ID：16006020
> 
> 赞同：3
> 
> 时间：2013-04-15T00:39:51.090
> 
> 标签：git, merge

所以我们有一个分支结构，其中命名的分支合并到下一个版本中，就像这样......

```
version1 -> version2 => version3 -> etc 
```

因此，任何一个特定版本都是其祖先的超集和后代的子集。

有时，有人意外地“向后”合并，我们发现很难准确判断它发生在哪里（即什么是向后合并）

我们怎样才能轻松应对这种情况。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T07:41:26.667

一种简单的方法是简单地查看合并的提交消息。通常，默认提交消息会很好地提示发生了什么。不幸的是，这并不可靠，因为您可以自由地手动更改消息，并且本地分支名称不必与远程分支名称相同。

我能想到的最好方法是在每个分支的第一次提交上引入一个开始标签。在这种情况下，一个分支的起始标签永远不能从任何较低的分支到达。您可以编写一个推送挂钩，拒绝任何违反该规则的合并。

# sql - 我正在尝试拉出尚未提交 7 月份报告的“导师”。iSQLPLUS

> ID：16006021
> 
> 赞同：0
> 
> 时间：2013-04-15T00:39:57.170
> 
> 标签：sql, select

我想看看这是否有效：

```
SELECT TO_CHAR (TutorReport.Month, 'MONTH') MONTH, TutorReport.MatchID, MatchHistory.MatchID, MatchHistory.Tutor.ID
FROM TutorReport, MatchID
WHERE TutorReport.MatchID=MatchHistory.MatchID
AND NOT (TutorReport.Month=‘JULY’); 
```

表：

**TutorReport：** MatchID、月份、小时、课程

**MatchHistory** MatchID、TutorID、主题、学生 ID、StartDate EndDate

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T00:44:40.187

您可以使用加入表格`LEFT JOIN`，

```
SELECT  a.*
FROM    MatchHistory a
        LEFT JOIN TutorReport b
            ON  a.MatchID = b.MatchID AND
                TO_CHAR(b.Month, 'Month') = 'JULY'
WHERE   b.MatchID IS NULL 
```

# eclipse - 如何在 Eclipse + GlassFish 3 中使用 DEBUG？

> ID：16006027
> 
> 赞同：2
> 
> 时间：2013-04-15T00:40:36.240
> 
> 标签：eclipse, debugging, jsf, glassfish, glassfish-3

这是我真的不明白为什么有时不起作用，有时却起作用的事情。这把我吓坏了！我需要帮助，请。

我在 JSF 项目中有带有 GlassFish 的 Eclipse Juno Java EE x86_64（版本 glassfish-3.1.2.2），有时我需要调试我的代码，所以我启动 Eclipse，*在服务器上调试*然后设置断点。然后我转到我的页面，执行用户在我的项目中执行的操作，当断点应该被激活时，什么都没有发生，eclipse 只是弹出但仅此而已。

更奇怪的是，有时这个程序有效，最重要的是，它没有..我真的需要知道这里发生了什么。我必须是我的设置或其他东西，但我知道它是什么..

我的`debug`标签：

![调试](https://i.stack.imgur.com/knDFs.jpg)

，我敢打赌，问题在于调试将“localhost(1)”作为服务器，但我没有任何“localhost(1)”，只有“localhost”，你们可以在这里看到：

![在此处输入图像描述](https://i.stack.imgur.com/HD20P.jpg)

为什么是`creating`另一个`localhost`？这与为什么我的`debug`工作不正常有关？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T00:52:22.633

对于那些遇到这个问题的人，我遇到了这个问题，直到我注意到我使用的是 JDK 1.7，所以我将我的 JDK 更改为 1.6。这个建议对我有用，我下载了 Eclipse Juno，使用 Revo Uninstaller 卸载了 JDK 1.7（以确保 Java 将从我的计算机中完全删除以避免任何并发症）并使用 Glassfish 3.1.2 安装 JDK 1.6，现在它工作正常！见鬼！=]谢谢你们！

# git - 如何永久删除 git 存储库中的子模块？

> ID：16006029
> 
> 赞同：0
> 
> 时间：2013-04-15T00:40:51.083
> 
> 标签：git, dvcs

几天前，我使用了 git 的子模块功能并添加了很多存储库，但是我现在将它们全部删除（`git submodule list`不返回任何内容；而且，`.git/config`相关`.gitmodules`不包含任何存储库信息）。但是 git**确实**保留了它们：它们仍然在目录的**`.git/modules`**目录中！让我烦恼的是，即使我根本不需要它们，它们也会占用磁盘空间（而且我相信我可以随时将它们重新添加为子模块）。

那么我该如何处理呢？我可以简单地删除目录`.git/modules`吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T01:39:54.917

是的，你可以`rm -rf .git/modules/XXX`。

# php - 使用 Ghostscript 时禁止旋转 PDF 中的页面

> ID：16006036
> 
> 赞同：6
> 
> 时间：2013-04-15T00:41:25.547
> 
> 标签：php, pdf, rotation, orientation, ghostscript

我正在使用 GhostScript 使用 exec() 函数从 PHP 更改 DPI 和调整 PDF 文件的大小。我的命令行代码如下所示：

```
gs  -o out.pdf  -sDEVICE=pdfwrite  -dDEVICEWIDTHPOINTS=800 -dDEVICEHEIGHTPOINTS=1000 -dPDFFitPage -dPDFSETTINGS=/ebook in.pdf 
```

但是在此处理之后，我的一个 PDF 第一页被旋转和裁剪。如果我添加`-dFixedMedia`参数，它仍然会旋转但不会被裁剪。但在这种情况下，其他一些页面将被旋转。

我也尝试过......并且`-dOrient1=false`......这一切都没有奏效......也许我没有正确使用它......`-dOrient1=true``-dAutoRotatePages=/None`

是否可以防止/禁止所有 PDF 页面的任何类型的旋转？

* * *

附言

初始 PDF 的第一页：

![最初的](https://i.stack.imgur.com/r97pQ.png)

处理后的 PDF 第一页没有`-dFixedMedia`： ![之后1](https://i.stack.imgur.com/Kzm6c.png)

处理后的 PDF 的第一页 WITH `-dFixedMedia`： ![之后2](https://i.stack.imgur.com/xSUnU.png)

* * *

**更新：**

这是指向这一页 PDF 文件的链接： [PDF-File](http://www.sendspace.com/file/atvdft)

* * *

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T06:55:20.260

如果不查看示例文件，就不可能知道发生了什么。通常 pdfwrite 将保留输入文件中的各种框，尤其是 MediaBox。

如果是我，我会先从命令行中删除 -dPDFSETTINGS，这会设置*很多*选项。我会单独设置我想要的选项。请注意，因为您在命令行中有最后一个，它可能会覆盖任何先前的设置。

如果将 AutoRotatePages 设置为 false，则 pdfwrite 不会尝试对输出进行任何类型的旋转。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-09-17T13:26:34.533

`dPDFFitPage`缩放和旋转以最适合设备尺寸。

请参阅`dPSFitPage`此处的选项[https://www.ghostscript.com/doc/current/Use.htm](https://www.ghostscript.com/doc/current/Use.htm)

# node.js - 对单个请求的阻塞操作是否会从一开始就阻塞所有其他请求？

> ID：16006040
> 
> 赞同：0
> 
> 时间：2013-04-15T00:41:56.453
> 
> 标签：node.js

我刚开始浏览 node.js 初学者指南

[http://www.nodebeginner.org](http://www.nodebeginner.org)

并且想知道如果对单个请求的阻塞操作会阻止其他请求的启动，是否有任何示例或方法可以让我亲身体验。本质上，我想打开两个不同的浏览器并从一个浏览器触发阻止操作，然后访问另一个浏览器并观察我被阻止直到第一个请求完成。

也适用于这个代码片段

```
var http = require("http");
function onRequest(request, response) {
  response.write("Hello World");
  response.end();
}
http.createServer(onRequest).listen(8888); 
```

`onRequest`如果要调用该函数，它不应该接受参数吗？

```
http.createServer(onRequest(request, response)).listen(8888); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T00:44:42.753

对于标题中的问题，是的。你可以试试，比如说，有这样的东西：

```
function onRequest(req, res) {
    if(req.url === '/block') {
        while(true) {}
    }else{
        res.end("Still accepting requests…");
    }
} 
```

然后`http://localhost:8888/block`在一个浏览器和另一个浏览器`http://localhost:8888/`中访问。后一个请求不会产生响应。（就此而言，第一个也不会。）

对于您的另一个问题，不；您不是调用`onRequest`并将返回值传递给`createServer`，而是将函数本身传递给`createServer`.

在 JavaScript 中，函数是一等的，也就是说它们和其他对象一样是对象：您可以将它们作为参数传递，将它们放入变量或其他对象中，等等。如果您习惯 C，您可以认为它就像一个函数指针，除了可能带有一个隐含的上下文参数，以携带对其封闭词法范围的变量的引用。

# ruby-on-rails - 启动 Rails Server 后，命令行消失

> ID：16006042
> 
> 赞同：0
> 
> 时间：2013-04-15T00:42:10.857
> 
> 标签：ruby-on-rails, ruby

Ruby 和 Rails 的新手，如果这非常简单，请原谅我，但我正在学习 Hartl 教程，一切正常，直到我在第一章中启动以下命令：User-Name-Macbook-Pro:first_app username $ 导轨服务器

它做了它应该做的事情（提供服务器信息并启动）但是在命令完成后，终端没有给我“用户名-Macbook-Pro：first_app username$”来输入更多命令。相反，它现在只是一个空白行，我不知道如何继续。

请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T00:45:13.463

如果您看到以下内容，则一切正常：

```
rails server
=> Booting WEBrick
=> Rails 3.2.13 application starting in development on http://0.0.0.0:3000
=> Call with -d to detach
=> Ctrl-C to shutdown server
[2013-04-13 19:46:14] INFO  WEBrick 1.3.1
[2013-04-13 19:46:14] INFO  ruby 2.0.0 (2013-02-24) [x86_64-darwin12.3.0]
[2013-04-13 19:46:14] INFO  WEBrick::HTTPServer#start: pid=27467 port=3000 
```

除非您使用 ctrl-C 退出服务器或应用程序崩溃，否则不会返回命令行

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T00:47:02.393

`rails server`启动您的服务器。您可以使用 CTRL + C 终止此过程。因此，请查看您的 rails 应用程序，进入`localhost:3000`您首选的（当然是 Chrome）浏览器。

# jquery - 如何使用 Ajax 从哈佛 GSD 获取日历？

> ID：16006043
> 
> 赞同：1
> 
> 时间：2013-04-15T00:42:45.650
> 
> 标签：jquery, ajax, calendar

我正在尝试通过 Ajax 进行设置，这就是我目前所拥有的。我一直试图弄清楚这一点，但似乎无法点击。

```
function getFunction()
{
$(".cals").click(function()
{
    $.get("http://events.cs50.net/api/1.0/calendars?campus=GSD&output=json", function(data, status) 
    {

        var response = "<h3>GSD Calenders</h3>\n";

        response = response + '<ul data-role="listview" data-inset="true" data-filter="true">\n';

        var jsonObject = JSON.parse(data);
        for (var i = 0; i < jsonObject.length; i++) {
            var calendar = jsonObject[i].calname;
            response = response
                + '<li><a href="#item">'
                + calendar
                + '</a></li>\n'; }

        response = response + '</ul>';

        $('#calendars').html(response);
    });
});
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T02:50:10.400

这是一个工作小提琴：http: [//jsfiddle.net/rW9gx/1/](http://jsfiddle.net/rW9gx/1/)

我已将 js 更改为：

```
$(function() {

    $("#cals").click(function()
    {
        $.getJSON("http://events.cs50.net/api/1.0/calendars?campus=GSD&output=json", function(data, status) 
        {

        var response = "<h3>GSD Calenders</h3>\n";
        response = response + '<ul data-role="listview" data-inset="true" data-filter="true">\n';

            for (var i = 0; i < data.length; i++) {
                var calendar = data[i].calname;
                response = response
                    + '<li><a href="#item">'
                    + calendar
                    + '</a></li>\n'; 
            }
            response = response + '</ul>';
            $('#calendars').html(response);
        });
    });

}); 
```

一些东西：

您已将 click 事件处理程序包装在一个函数 ( `getFunction`) 中，这意味着该处理程序仅在触发后才会应用。我不知道这是否有意，或者您的代码示例是否已满，但在小提琴中，我已将其删除并将 js 包装在一个文档就绪函数中，以便在 DOM 有时应用它加载。

我将 json 更改`$.get`为 a `$.getJSON`，这只是`dataType: "json"`在`$.ajax`or`$.get`调用中编写的快捷方式。这意味着您不必将返回数据解析为 Json，因为这是您所期望的。

否则它工作得很好。

# qt - OpenGL 内部的 If 语句

> ID：16006045
> 
> 赞同：1
> 
> 时间：2013-04-15T00:43:12.010
> 
> 标签：qt, opengl

我正在创建一个 OpenGL 项目，该项目在单击 OpenGL 视图时绘制一个正方形。

这是我在单击鼠标时创建正方形的逻辑：

```
 if (mouseXPosition != 0 && mouseYPosition != 0 ){
glBegin(GL_POLYGON);
    glVertex2f(mouseXPosition, (mouseYPosition + 30));
    glVertex2f((mouseXPosition + 30), mouseYPosition);
    glVertex2f(mouseXPosition, (mouseYPosition - 30));
    glVertex2f((mouseXPosition) -30, mouseYPosition);
glEnd();
 } 
```

我认为这里不需要我的其余代码，但如果需要，我会添加它。mouseXPosition 和 mouseYPostion 只是包含 OpenGL 视图内位置的浮点数。每当单击视图以显示新位置时，它们都会更改。我知道这些位置是正确的，因为每当单击视图时我都会将它们打印出来。

当我运行我的代码时，没有编译错误，但是单击鼠标时没有绘制正方形。在 OpenGL 的绘图中是否有禁止 if 语句的东西？如果没有，有人可以向我解释我做错了什么。

添加信息：

我用于这个项目的窗口系统是 Qt，我认为这不会影响这个项目的结果。对于那些 Qt 大师：我在设置变量时确实调用了 updateGL()，因此 OpenGL 内部的变量应该是最新的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T00:52:12.643

您只能在 update() 函数的 opengl 上下文中进行 opengl 调用 - 在鼠标处理程序中，您需要设置某种标志，然后将此 if 语句放入 update()

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T06:49:43.460

```
bool isClicked = false;

update()
{
    if (mouse_was_clicked)
      isClicked = true;
    if (mouse_was_released)
      isClicked = false;
}

render() {
    ...
    if (isClicked == true) {
         // your code for drawing rectangle...
    }
    ...
} 
```

要检测鼠标是否被单击或释放，请使用您的 Gui 库、一些函数回调或消息处理程序。

# c# - 将事件分配给另一个 wpf 窗口

> ID：16006050
> 
> 赞同：0
> 
> 时间：2013-04-15T00:44:17.547
> 
> 标签：c#, wpf, events

我阅读了 WPF4 unleashed book 的事件部分，但没有找到我要找的东西。

例如我有**两个窗口**（**都已经打开**）。

我在第一个按钮上有一个**按钮，在第二个按钮上有一个****文本框**（以**数字**作为内容）。

每次单击按钮时，我都希望文本框的数量**增加而无需再次打开第二个窗口**。期待您的帮助和建议！

我从主窗口打开了 2 个窗口，并在第一个窗口的按钮 click_event 上尝试了此代码：

```
 private void b_Click(object sender, RoutedEventArgs e)
    {
        int i = int.Parse(WpfApplication22.Window2.textbox.Text);
        i++;
        WpfApplication22.Window1.textbox.Text = i.ToString();            
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T01:40:27.297

我建议您使用自己的自定义事件处理程序来做这种事情。对于您的问题所需要的内容，这可能有点矫枉过正，但它有更多的用途和更多的可扩展性。WPF 也应该使用一种 MVVM 模式来实现，这意味着您只需要让 ViewModel 相互交谈。出于本示例的目的，我将假设每个窗口都有一个关联的 ViewModel。

首先创建您自己的事件参数，如下图所示。

```
public class MyCustomEventArgs : EventArgs {

} 
```

然后编写自己的事件处理程序类，如下所示。

```
public class CustomEventHander {
  static public event EventHandler CustomEvent;

  static public void RaiseMyCustomEvent(object sender, EventArgs args) {
    if (CustomEvent != null) CustomEvent(sender,args);
  }
} 
```

然后你只需要把它连接起来。

在您的第一个 Windows ViewModel 上，您需要将事件处理程序放在您的构造函数中。

```
CustomEventHandler.CustomEvent += handleCustomEvent; 
```

其次，您通过编写 handleCustomEvent 方法来编写事件的句柄。这是您增加所需数字的地方。

```
private void handleCustomEvent(object sender, EventArgs e) {
  if (e is MyCustomEventArgs) {
    this.IntValue += 1;
  }
} 
```

到目前为止，我们可以处理事件，引发事件，但我们需要触发事件。

在第二个 Windows 控制器中，将 ICommand 连接到按钮并将以下代码放入方法中。

```
CustomEventHandler.RaiseMyCustomEvent(this, new MyCustomEventArgs()); 
```

我希望这回答了你的问题。当然，我已经假设使用 MVVM 并且属性 IntValue 被绑定到第一个窗口上的文本框。但是此代码应该有望满足您的需求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T01:47:43.093

您可以将`DataContext`第二个分配`Window`给第一个`Window`并使用 a`DependancyProperty`绑定您想要的值

## 例子：

**窗口1代码：**

```
public partial class MainWindow : Window
{
    public MainWindow()
    {
        InitializeComponent();
    }

    public int Count
    {
        get { return (int)GetValue(CountProperty); }
        set { SetValue(CountProperty, value); }
    }
    public static readonly DependencyProperty CountProperty =
        DependencyProperty.Register("Count", typeof(int), typeof(MainWindow), new UIPropertyMetadata(0));

    private void Button_Click(object sender, RoutedEventArgs e)
    {
        //SetBinding windows DataContext to this window
        new PopupWindow { DataContext = this }.Show();
    }
} 
```

**Window1 Xaml：**

```
<Window x:Class="WpfApplication10.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="325" Width="422" Name="UI">
    <Grid DataContext="{Binding ElementName=UI}">
        <StackPanel>
            <TextBox Text="{Binding Count, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}" />
            <Button Content="Open Window 2" Click="Button_Click" />
        </StackPanel>
    </Grid>
</Window> 
```

**窗口2代码：**

```
public partial class PopupWindow : Window
{
    public PopupWindow()
    {
        InitializeComponent();
    }
} 
```

**Window2 Xaml：**

```
<Window x:Class="WpfApplication10.PopupWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:local="clr-namespace:WpfApplication10"
        Title="PopupWindow" Height="300" Width="300">
    <Grid>
        <TextBlock Text="{Binding Path=Count}" />
    </Grid>
</Window> 
```

**结果：**

![在此处输入图像描述](https://i.stack.imgur.com/ooAj9.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T01:03:55.710

您的第一个窗口需要对第二个窗口的引用。

```
abc = New Window2
abc.Show() 
```

然后，当您的按钮的单击事件触发时，您可以执行此操作。

```
abc.TextBox1.Text = CStr(CInt(abc.TextBox1.Text) + 1) 
```

# c - 你能以与字节序无关的方式获得指向低字节的指针吗？

> ID：16006051
> 
> 赞同：5
> 
> 时间：2013-04-15T00:44:30.417
> 
> 标签：c, embedded, endianness

我有一个 16 位变量`data`，即：

```
volatile uint16_t data; 
```

我需要根据外部传感器上两个 8 位寄存器的内容来填充这个值。这些通过 I2C/TWI 访问。

我的 TWI 例程是 async*，并且具有以下签名：

```
bool twi_read_register(uint8_t sla, uint8_t reg, uint8_t *data, void (*callback)(void)); 
```

`reg`这会将on的值读`sla`入`*data`，然后调用`callback()`。

如果我知道`uint16_t`在内存中被安排为 ，`MSB LSB`那么我可以这样做：

```
twi_read_register(SLA, REG_MSB, (uint8_t *)&data, NULL);
twi_read_register(SLA, REG_LSB, (uint8_t *)&data + 1, NULL); 
```

但是，我不喜欢在我的代码中加入对字节序的依赖。有没有办法以独立于字节序的方式实现这一目标？

（旁注：我目前的实际解决方法涉及使用结构，即：

```
typedef struct {
    uint8_t msb;
    uint8_t lsb;
} SensorReading; 
```

但我很好奇我是否可以用一个简单的方法做到这一点`uint16_t`）

编辑

（*我所说的异步是指分阶段，`*data`即将在将来的某个时间设置，此时`callback`如果请求，将通过函数通知被调用者）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T01:04:31.440

以下不工作吗？

```
uint8_t v1, v2;
twi_read_register(SLA, REG_MSB, &v1, NULL);
twi_read_register(SLA, REG_LSB, &v2, NULL);
data = ((uint16_t)v1<<8)|v2; 
```

或者是`data`如此易变以至于`twi_read_register`需要编写它。在那种情况下，我认为您会遇到依赖字节序的代码。

正如您在下面指出的那样，`data`确实是不稳定的，因为还有另一个设备正在读取它。因此，在字节序可能不同的两个设备之间建立了内存映射连接。这意味着你被字节序依赖的代码困住了。

您提到该结构是一种解决方法，但这是一种处理此问题的标准方法。

```
#ifdef BIGENDIAN
typedef struct
{       uint8_t  msb, lsb;
} uint16_as_uint8_t;
#else
typedef struct
{       uint8_t  lsb, msb;
} uint16_as_uint8_t;
#endif 
```

最重要的是，你可以放一个`union`

```
union
{       uint16_as_uint8_t  as8;
        uint16_t           as16;
}; 
```

请注意，后者违反了 C89 标准，因为您的明确意图是写入一个字段`union`并从另一个字段读取，这会导致未指定的值。从 C99 开始，这是（幸运的）支持的。在 C89 中，人们将使用指针转换来`(char*)`以可移植的方式执行此操作。

请注意，上述内容似乎以可移植的方式隐藏了字节顺序，结构包装也可能因目标而异，并且可能仍会在某些目标上中断。对于上面的例子，这不太可能，但周围有一些奇怪的目标。我想说的是，可能无法在此设备级别上进行可移植编程，最好接受这一点并努力将所有细节隐藏在紧凑的目标界面中，因此为目标更改一个头文件足以支持它。然后代码的其余部分可以看起来独立于目标。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T11:56:45.870

这样的事情怎么样？

```
uint16_t myValue = ...;
uint8_t LSB = (uint8_t)(myValue % 256);
uint8_t MSB = (uint8_t)(myValue / 256); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T04:02:45.993

```
 volatile uint16_t data;  
  uint16_t v = 1;
  twi_read_register(SLA, REG_MSB, (uint8_t *)&data + *((uint8_t *)&v), NULL);
  twi_read_register(SLA, REG_LSB, (uint8_t *)&data + *((uint8_t *)&v + 1), NULL); 
```

# shell - shell脚本没有执行

> ID：16006059
> 
> 赞同：3
> 
> 时间：2013-04-15T00:45:13.967
> 
> 标签：shell, ksh

我正在尝试在 unix 上运行一个 shell 脚本，但我收到一个错误，指出它无法执行。

**命令**

```
Unix> Abc.ksh
ksh: Abc.ksh: cannot execute 
```

也试过

```
pcasvs17 >  ./Abc.ksh
ksh: ./Abc.ksh: cannot execute 
```

脚本以

```
 #!/bin/ksh 
```

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-15T00:46:24.300

`chmod +x Abc.ksh`然后再试一次`./Abc.ksh`

# javascript - 使用 jQuery 从另一个页面获取 href

> ID：16006061
> 
> 赞同：1
> 
> 时间：2013-04-15T00:45:35.757
> 
> 标签：javascript, jquery, href

我正在尝试创建一个函数，该函数从另一个页面获取链接列表并将它们推送到一个数组中，但我被困在成功函数之后要做什么。

```
$('#button').click(function() {
  var array = [];
    $.get('links.html',function(data) {
      //here's where I'm stuck
        $('#photo a').each(function(){
          array.push($(this).attr('href'));
    });
}); 
```

链接.html

```
<html>
  <body>
    <div id="photo">
    <a href="link1.html">...
    <a href="link2.html">... 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T00:48:49.113

尝试这个。

```
$('#button').click(function() {
  var array = [];
    $.get('links.html',function(data) {
      //here's where I'm stuck
        $(data).find('#photo a').each(function(){
          array.push($(this).attr('href'));
        });
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T00:49:38.923

```
$(data).find('#photo a') 
```

您需要在 ajax 调用返回的数据中搜索链接。

# android - 偏好单选框 Android

> ID：16006065
> 
> 赞同：1
> 
> 时间：2013-04-15T00:46:23.013
> 
> 标签：android, sharedpreferences, android-preferences

我已经创建了一个偏好对话框来选择如何在活动中对我的数组进行排序.. 一切正常。首先我需要按下设置，这将带我进入带有“排序”按钮的新活动，然后当我按下它时，我会得到对话框。但问题是我希望当我按下设置按钮时对话框直接出现......

在我的 setting.java 中，我一直保持这种方式：

```
public class Setting extends PreferenceActivity {

    SharedPreferences sp;

    @SuppressLint("NewApi")
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        //setContentView(R.layout.activity_setting);
        addPreferencesFromResource(R.xml.preferences);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_setting, menu);
        return (super.onPrepareOptionsMenu(menu));
    }   
} 
```

我的`preference.xml`样子是这样的：

```
<ListPreference android:defaultValue="1"
    android:entries="@array/listArray"
    android:entryValues="@array/listValues"
    android:key="type"
    android:title="Sorting!" /> 
```

值/array.xml

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <string-array name="listArray">
        <item>Name</item>
        <item>Country</item>
    </string-array>
    <string-array name="listValues">
        <item>1</item>
        <item>2</item>
    </string-array>
</resources> 
```

我该怎么做才能在按下设置按钮时直接显示我的两个选项？

# jface - 我可以使用 Jface 构建一个编辑器来插入我的应用程序吗？

> ID：16006070
> 
> 赞同：0
> 
> 时间：2013-04-15T00:46:51.137
> 
> 标签：jface

我想创建一个像 Eclipse 编辑器一样的编辑器，并且想将该编辑器插入我的 JSP 页面。

使用 JFace 可以做到这一点吗？

我查看了以下示例，但不确定这是否会帮助我获得想要的东西。

[http://www.realsolve.co.uk/site/tech/jface-text.php](http://www.realsolve.co.uk/site/tech/jface-text.php)

请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T11:06:58.713

不，如果您想在网页中使用 JFace（以及 JFace 所基于的 SWT），则必须使用[RAP](http://eclipse.org/rap/)而不是 JSP。

# java - 服务器如何获取客户端的 IP 和端口号 TCP？

> ID：16006072
> 
> 赞同：1
> 
> 时间：2013-04-15T00:47:23.980
> 
> 标签：java, tcp

在 UDP 中，我使用：

```
InetAddress IPAddress = receivePacket.getAddress(); 

int port = receivePacket.getPort(); 

System.out.println ("From: " + IPAddress + ":" + port);
System.out.println ("Message: " + sentence); 
```

我对 TCP 感到困惑。服务器如何使用 TCP 获取客户端的 IP 和端口号？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T00:52:16.543

看[`Socket.getInetAddress()`](http://docs.oracle.com/javase/7/docs/api/java/net/Socket.html#getInetAddress%28%29)和[`Socket.getPort()`](http://docs.oracle.com/javase/7/docs/api/java/net/Socket.html#getPort%28%29)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T00:54:30.600

他们使用套接字。

例子：

```
Socket server = new ServerSocket(6666)
Socket connection = server.accept();
System.out.println("Connection received from " + connection.getInetAddress().getHostName()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T00:55:54.070

源和目标 IP 地址和端口存在于每个 TCP 段或 UDP 数据报中。

# android - 旋转后更改 texview 的文本取消我的动画

> ID：16006074
> 
> 赞同：0
> 
> 时间：2013-04-15T00:47:28.890
> 
> 标签：android, android-animation, android-2.2-froyo

我需要在旋转后更改文本视图的文本。我执行此代码来旋转我的文本视图

```
RotateAnimation textAnim = new RotateAnimation(90, deg, text.getWidth() / 2, text.getHeight() / 2);
textAnim.setDuration(DURATION); 
textAnim.setFillAfter(true); 
text.startAnimation(textAnim); 
```

之后，我需要更改 textview 的文本，因此我在 textView 上使用 setText。

当我执行 setText 时，我的旋转被取消。我的文本视图就像我旋转它之前一样。

你知道为什么以及如何解决它吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T04:51:25.527

在您的代码中使用 **AnimationListener 。**

并在**onAnimationEnd()**中更改 textview 的文本。例如

```
@Override
public void onAnimationEnd(Animation arg0) {
    textview.settext(" Your text");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T01:03:44.653

您可以在动画中添加一个 animationListener 并更改 textview inside`onAnimationEnd`方法中的文本

```
anim.setAnimationListener(new Animation.AnimationListener(){
@Override
public void onAnimationStart(Animation arg0) {
}           
@Override
public void onAnimationRepeat(Animation arg0) {
}           
@Override
public void onAnimationEnd(Animation arg0) {
} 
```

});

# leaflet - 加载后查找传单图块的边界

> ID：16006077
> 
> 赞同：0
> 
> 时间：2013-04-15T00:48:10.913
> 
> 标签：leaflet

我有一张传单地图，我试图在加载新图块时从服务器动态加载一些信息，以创建叠加层。

为了测试这一点，我尝试的第一件事是在 onTileLoad 事件中简单地创建一个与加载的图块大小相同的透明矩形。我这样做是通过从加载的 URL 中拉出图块 X/Y，然后使用此页面中的代码：[http](http://wiki.openstreetmap.org/wiki/Slippy_map_tilenames#Derivation_of_tile_names) ://wiki.openstreetmap.org/wiki/Slippy_map_tilenames#Derivation_of_tile_names将其转换为纬度/经度。

奇怪的是，我能够使多边形出现在正确位置的唯一方法是使用以下代码：

```
function onTileLoad(e) {
    var tile=e.url.split("/");
    var z=tile[tile.length-3];
    var x=tile[tile.length-2];
    var y=tile[tile.length-1].split(".")[0];
    //console.log("x:"+x+"y"+y+"z"+z);

    var southWest = new L.LatLng(tile2lat(y, z), tile2long(x-(-1.0), z)), 
        northEast = new L.LatLng(tile2lat(y-(-1.0), z), tile2long(x, z)),
        bounds = new L.LatLngBounds(southWest, northEast);

    //console.log("southwest: "+southWest+" northEast: "+northEast);

    L.rectangle(bounds, {color: "#ff7800", weight: 1}).addTo(map); 
```

您会注意到东北角是由以下创建的：y-(-1.0)

如果我改为 (y+1.0)，这应该是同一件事，它会在错误的坐标中加载矩形，重叠已经加载的图块。

所以我的问题是：

1) 为什么 y - (-1.0) 与 (y+1.0) 不一样？2）有没有更好的方法来获取新加载的瓷砖的边界？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-23T15:32:46.610

你用

> (float.pasre(y)+float.pasre(1.0))?2)

，它会工作的。

# android - 尝试在我的项目中添加 OpenGl，但我在 setcontentview() 中遇到错误

> ID：16006079
> 
> 赞同：0
> 
> 时间：2013-04-15T00:48:16.287
> 
> 标签：android, android-layout

我的主要游戏活动课程：

```
import android.app.Activity;
import android.os.Bundle;
import android.util.Log;

public class SFGame extends Activity{

    SFGameView gameview;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);

        gameview= new SFGameView(this);
        Log.d("ashwin", "wrong");
        setContentView(gameview);
    }

} 
```

我的 SFGameView 类代码：

```
import android.content.Context;
import android.opengl.GLSurfaceView;

public class SFGameView extends GLSurfaceView{

    public SFGameView(Context context) {
        super(context);
        // TODO Auto-generated constructor stub
    }

} 
```

`setContentView(gameview)`当我尝试从类中调用时，我发现错误正在发生`SFGameView`。

是否有必要`class SFGameView extends GLSUrfaceView`在类似服务的清单中添加它？如果是，那怎么办？

清单

```
<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name="com.ku.starfighter.MainActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity android:name="Sfmainmenu"
        android:screenOrientation="portrait"></activity>
     <activity android:name="SFGame"
        android:screenOrientation="portrait"></activity>
    <service android:name="SFMusic"></service>
</application> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T01:56:06.087

为 GLSurfaceView 设置渲染器。

[http://developer.android.com/reference/android/opengl/GLSurfaceView.html](http://developer.android.com/reference/android/opengl/GLSurfaceView.html)

```
GLSurfaceView.setRenderer(renderer); 
```

实现`Renderer`类将处理所有与绘图相关的活动。

已编辑：无需在清单文件中添加任何内容

# php - 使用数组值将行插入数据库

> ID：16006085
> 
> 赞同：0
> 
> 时间：2013-04-15T00:49:02.497
> 
> 标签：php, database, wordpress

我无法将下面函数中的最后一个数组插入表中。我猜是语法问题，但我没有找到它，需要帮助。该函数在 Wordpress 安装上激活插件时插入数据库值：

```
function my_plugin_install_function() {
global $wpdb;
$table_name = $wpdb->prefix . "revslider_sliders";
$wpdb->insert( $table_name, array( 
           'title' => 'test',
           'alias' => 'test2',
           'params' => array (
                'title' => 'Homepage Slider',
                'alias' => 'homepage-slider',
                'shortcode' => '[rev_slider homepage-slider]',
                'slider_type' => 'fixed',
                'width' => 875,
                'height' => 350,
                'responsitive_w1' => 'NULL',
                'responsitive_sw1' => 'NULL', 
                'responsitive_w2' => 'NULL', 
                'responsitive_sw2' => 'NULL',
                'responsitive_w3' => 'NULL',
                'responsitive_sw3' => 'NULL',
                'responsitive_w4' => 'NULL',
                'responsitive_sw4' => 'NULL',
                'responsitive_w5' => 'NULL',
                'responsitive_sw5' => 'NULL',
                'responsitive_w6' => 'NULL',
                'responsitive_sw6' => 'NULL',
                'delay' => 8000,
                'touchenabled' => 'on',
                'stop_on_hover' => 'on',
                'shuffle' => 'off',
                'load_googlefont' => 'true',
                'google_font' => 'PT+Sans',
                'stop_slider' => 'off', 
                'stop_after_loops' => 0, 
                'stop_at_slide' => 2, 
                'position' => 'center', 
                'margin_top' => 0, 
                'margin_bottom' => 0,
                'margin_left' => 0, 
                'margin_right' => 0, 
                'shadow_type' => 3, 
                'show_timerbar' => 'false', 
                'timebar_position' => 'top',
                'background_color' => '#fff', 
                'padding' => 5, 
                'show_background_image' => 'true', 
                'background_image' => 'NULL', 
                'navigation_type' => 'bullet', 
                'navigation_arrows' => 'verticalcentered', 
                'navigation_style' => 'navbar-old', 
                'nav_offset_hor' => 0, 
                'nav_offset_vert' => 20, 
                'navigaion_always_on' => 'false', 
                'hide_thumbs' => 200, 
                'thumb_width' => 100, 
                'thumb_height' => 50, 
                'thumb_amount' => 5, 
                'hide_slider_under' => 0, 
                'hide_defined_layers_under' => 0, 
                'hide_all_layers_under' => 0,
                'jquery_noconflict' => 'on',
                'js_to_body' => 'false', 
                'output_type' => 'none',
                )
         ), array('%s', '%s', '')
   ); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T02:29:11.373

文档[http://codex.wordpress.org/Class_Reference/wpdb](http://codex.wordpress.org/Class_Reference/wpdb)说：

> 可能的格式值：%s 作为字符串；%d 为十进制数；和 %f 作为浮点数。

您无法将 Array() 添加到数据库。这对我和函数 $wpdb->insert() 没有意义，因为第三个参数的`array('%s', '%s', '')`第三个值：''需要是以下之一：%s、%d 或 %f

我有两个建议

## 方法一

您可以更改数据库结构（示例列）：

```
title, alias, params_title, params_alias, params_shortcode, ... , params_output_type 
```

并像这样单独保存参数：

```
$wpdb->insert( $table_name, array( 
           'title' => 'test',
           'alias' => 'test2',
           'params_title' => 'Homepage Slider',
           'params_alias' => 'homepage-slider',
           'params_shortcode' => '[rev_slider homepage-slider]', //(...)
            ), array('%s', '%s', '%s', '%s', '%s') // Add as many %s or %d as needed
           ); 
```

## 方法二

或者保存参数 array(); 像这样的字符串（见那些“”字符）`"array (/* ... */)"`

```
$wpdb->insert( $table_name, array( 
           'title' => 'test',
           'alias' => 'test2',
           'params' => "array (
                'title' => 'Homepage Slider',
                'alias' => 'homepage-slider',
                'shortcode' => '[rev_slider homepage-slider]',
                /* ... */
           )"
         ), array('%s', '%s', '%s')
   ); 
```

在 PHP 代码上，您可以从数据库中获取这些代码，使用类似这样的东西

```
eval("\$params = \"{$row['params']}\";"); 
```

该 eval() 将 $params-variable 设置为：

```
$params = array (
                'title' => 'Homepage Slider',
                'alias' => 'homepage-slider',
                'shortcode' => '[rev_slider homepage-slider]',
                /* ... */
                ); 
```

知道了 ：）？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T01:40:42.850

出现了一个疯狂的猜测：

```
'params' => array (//...
    'output_type' => 'none',
) 
```

在后面去掉最后一个逗号 ( `,`)`'none'`

线变成

```
'output_type' => 'none' 
```

我不熟悉 WP 函数，但这是一个常见的语法错误。这确实显示了一个 PHP 错误。

# ios - iOS`stringByAppendingPathComponent：`不工作

> ID：16006088
> 
> 赞同：1
> 
> 时间：2013-04-15T00:49:17.267
> 
> 标签：ios, objective-c, nsstring

我有一个奇怪的问题，当这样做时

```
NSLog(@"%@", [self.pat stringByAppendingPathComponent:[tableView cellForRowAtIndexPath:indexPath].textLabel.text]); 
```

记录这个

```
/var/mobile/Applications/C6E7B405-5A68-4729-AFA9-910E17AFE825/Documents/Downloads 
```

就是这样`self.pat`，没有附加字符串。这是我的`tableView:cellForRow:atIndexPath:`方法，并且在我执行此操作之前正在设置表格视图单元格的文本，并且显示正确。`self.pat`被声明为`@property (strong, nonatomic) NSString *pat`，我像这样设置单元格的文本

```
cell.textLabel.text = [files objectAtIndex:indexPath.row]; 
```

我设置`self.pat`和。`viewDidAppear:animated:``viewDidLoad:`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T01:00:29.050

您需要做的第一件事是`[tableView cellForRowAtIndexPath:indexPath]`在您尝试在此处使用它的上下文中获取值。我的猜测是它是`nil`（因为要么 要么`tableView`是`indexPath`）`nil`。

**更新：**

正如 maddy 在评论中指出的那样，不能`nil`传递给这种情况，`-stringByAppendingPathComponent:`因为它会引发异常。而且我认为我们需要看看发生了什么`-cellForRowAtIndexPath:`才能真正了解这一点。

但是，实际上，这里更令人不安的是您正在从视图中获取数据。在 MVC 设计中，你所有的数据都应该来自模型。因此，实际上，您应该从用于填充单元格的同一模型中获取值，而不是使用单元格标签的内容生成此路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T01:03:20.323

测试这个之后

```
[self.pat stringByAppendingPathComponent:[files objectAtIndex:indexPath.row]; 
```

它有效，所以我猜 textLabel 的设置速度不够快。

# c - 参数数量与原型不匹配等

> ID：16006092
> 
> 赞同：0
> 
> 时间：2013-04-15T00:49:51.243
> 
> 标签：c

我正在尝试编译应该是工作代码的代码。我收到几个错误；

```
joystick.c: In function ‘open_joystick’:
joystick.c:14:1: error: number of arguments doesn’t match prototype
joystick.h:45:12: error: prototype declaration
joystick.c: In function ‘get_joystick_status’:
joystick.c:57:16: error: ‘struct wwvi_js_event’ has no member named ‘stick1_x’
joystick.c:59:16: error: ‘struct wwvi_js_event’ has no member named ‘stick1_y’
joystick.c:61:16: error: ‘struct wwvi_js_event’ has no member named ‘stick2_x’
joystick.c:63:16: error: ‘struct wwvi_js_event’ has no member named ‘stick2_y’
joystick.c: In function ‘open_joystick’:
joystick.c:21:1: warning: control reaches end of non-void function [-Wreturn-type] 
```

这是代码

操纵杆.h：

```
/* 
    (C) Copyright 2007,2008, Stephen M. Cameron.

    This file is part of wordwarvi.

    wordwarvi is free software; you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation; either version 2 of the License, or
    (at your option) any later version.

    wordwarvi is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with wordwarvi; if not, write to the Free Software
    Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA  02110-1301  USA

 */
#include <stdio.h>
#ifndef __JOYSTICK_H__
#define __JOYSTICK_H__

#define JOYSTICK_DEVNAME "/dev/input/js0"

#define JS_EVENT_BUTTON         0x01    /* button pressed/released */
#define JS_EVENT_AXIS           0x02    /* joystick moved */
#define JS_EVENT_INIT           0x80    /* initial state of device */

struct js_event {
    unsigned int time;  /* event timestamp in milliseconds */
    short value;   /* value */
    unsigned char type;     /* event type */
    unsigned char number;   /* axis/button number */
};

struct wwvi_js_event {
    int button[11];
    int stick_x;
    int stick_y;
};

extern int open_joystick(char *joystick_device);
extern int read_joystick_event(struct js_event *jse);
extern void set_joystick_y_axis(int axis);
extern void set_joystick_x_axis(int axis);
extern void close_joystick();
extern int get_joystick_status(struct wwvi_js_event *wjse);

#endif 
```

操纵杆.C：

```
#include <stdio.h>
#include <sys/types.h>
#include <sys/stat.h>
#include <fcntl.h>
#include <unistd.h>
#include <stdlib.h>
#include <string.h>

#include "joystick.h"

static int joystick_fd = -1;

int open_joystick()
{
    joystick_fd = open(JOYSTICK_DEVNAME, O_RDONLY | O_NONBLOCK); /* read write for force feedback? */
    if (joystick_fd < 0)
        return joystick_fd;

    /* maybe ioctls to interrogate features here? */

    return joystick_fd;
}

int read_joystick_event(struct js_event *jse)
{
    int bytes;

    bytes = read(joystick_fd, jse, sizeof(*jse)); 

    if (bytes == -1)
        return 0;

    if (bytes == sizeof(*jse))
        return 1;

    printf("Unexpected bytes from joystick:%d\n", bytes);

    return -1;
}

void close_joystick()
{
    close(joystick_fd);
}

int get_joystick_status(struct wwvi_js_event *wjse)
{
    int rc;
    struct js_event jse;
    if (joystick_fd < 0)
        return -1;

    // memset(wjse, 0, sizeof(*wjse));
    while ((rc = read_joystick_event(&jse) == 1)) {
        jse.type &= ~JS_EVENT_INIT; /* ignore synthetic events */
        if (jse.type == JS_EVENT_AXIS) {
            switch (jse.number) {
            case 0: wjse->stick1_x = jse.value;
                break;
            case 1: wjse->stick1_y = jse.value;
                break;
            case 2: wjse->stick2_x = jse.value;
                break;
            case 3: wjse->stick2_y = jse.value;
                break;
            default:
                break;
            }
        } else if (jse.type == JS_EVENT_BUTTON) {
            if (jse.number < 10) {
                switch (jse.value) {
                case 0:
                case 1: wjse->button[jse.number] = jse.value;
                    break;
                default:
                    break;
                }
            }
        }
    }
    // printf("%d\n", wjse->stick1_y);
    return 0;
}

#if 0
/* a little test program */
int main(int argc, char *argv[])
{
    int fd, rc;
    int done = 0;

    struct js_event jse;

    fd = open_joystick();
    if (fd < 0) {
        printf("open failed.\n");
        exit(1);
    }

    while (!done) {
        rc = read_joystick_event(&jse);
        usleep(1000);
        if (rc == 1) {
            printf("Event: time %8u, value %8hd, type: %3u, axis/button: %u\n", 
                jse.time, jse.value, jse.type, jse.number);
        }
    }
}
#endif 
```

谁能告诉我错误的原因是什么，我已经尝试调试了半个小时，但无济于事。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T00:55:38.913

错误消息非常简单：

```
joystick.c:14:1: error: number of arguments doesn’t match prototype
joystick.h:45:12: error: prototype declaration 
```

您的函数原型`open_joystick`具有与实现不同的函数签名。在您的`.h`文件中，您的原型具有签名：

```
int open_joystick(char *joystick_device); 
```

但是在您的`.c`文件中，您的函数定义具有签名：

```
int open_joystick() 
```

签名**不匹配**- 因此错误告诉您它们不匹配。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-15T00:56:12.093

看起来很简单——例如，这个声明：

```
struct wwvi_js_event {
    int button[11];
    int stick_x;
    int stick_y;
}; 
```

这个语句，给定`wjse`的是 type `struct wwvi_js_event*`，

```
wjse->stick1_x = jse.value; 
```

确实会结合产生这个错误：

> joystick.c:57:16：错误：“struct wwvi_js_event”没有名为“stick1_x”的成员</p>

您的头文件和文件之间必须存在版本不匹配`.c`。

# python - Sympy 的 ImportError

> ID：16006099
> 
> 赞同：0
> 
> 时间：2013-04-15T00:50:30.617
> 
> 标签：python, python-2.7, sympy

我正在尝试导入模块 sympy.physics.quantum.sho1d，但每次都会导致

```
ImportError: No module named sympy.physics.quantum.sho1d 
```

是因为`__init__`文件中没有描述吗？如果是这样，我需要做什么才能正确导入。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T22:16:26.263

确保您的安装正常。`import sympy.physics.quantum.sho1d`对我来说很好。

# jquery - jQuery 动画：fadeIn() 隐藏 div，不显示内容

> ID：16006100
> 
> 赞同：3
> 
> 时间：2013-04-15T00:50:48.317
> 
> 标签：jquery, jquery-animate

我有一个 id 为“start_game”的按钮，它有一个附加的点击函数和一个回调来淡出按钮，然后淡入当前由 css 设置为 display:none 的 div。

当我单击按钮时，我看到包含所有这些内容的外部容器 div 展开，好像为要显示的 div 腾出空间，但是我从未看到其中的内容。

这是当前代码：

```
$("#start_game").click(function () {
        $(this).fadeOut();
        $(".input-append").fadeIn();
    }); 
```

和html

```
<div class="hero-unit">
        <div id="container">
            <p>Shall we?</p>
            <button class="btn-primary btn-large" id="start_game">Play!</button>
            <div class="input-append hidden">
                <p>How many players?</p>
                <input class="span2" id="appendedInputButton" type="text" />
                <button class="btn" type="button">Go!</button>
            </div>
        </div>
    </div> 
```

这是唯一的自定义 css，另一个 css 文件是 twitter bootstrap

```
.hidden {
display: none;
} 
```

现在我尝试了很多方法。我尝试过fadeIn，我尝试过将show() 或hide() 或toggle() 或fadeToggle() 的几种不同组合链接在一起。我还尝试将隐藏 div 的所有子元素的迭代附加到回调中，并对它们逐个执行fadeIn()，似乎没有任何效果。

我正在 Google Chrome 26 和 IE10 中进行测试。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-07-29T23:57:46.703

我刚刚遇到了同样的情况。如果我最初将 twitter bootstrap 控制组标记为隐藏，然后使用`show()`控制组的外部 div 方法，它确实会显示，但该控制组 div 的内容仍然是隐藏的。

原因是引导 CSS 会寻找`.hidden`类以将可见性 CSS 规则添加到内部 div，但 JQuery show() 方法不会删除隐藏类。它直接操作 CSS，将隐藏类留在原处。

你可以用它`removeClass('hidden')`来解决这个问题。

现在有一个额外的问题：我们如何为过渡*设置动画？*

答案是：`fadeIn().removeClass('hidden');` 不是很直观，但是嘿，它有效:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-11-21T13:18:48.370

尝试这个

```
$("#start_game").click(function () {
    $(this).fadeOut();
    $(".input-append").fadeIn("slow").removeClass('hidden');
}); 
```

# python - 如何找到 access_output 库使用的 DLL 的路径？

> ID：16006103
> 
> 赞同：5
> 
> 时间：2013-04-15T00:50:58.950
> 
> 标签：python, accessibility

我是一名盲人程序员，我正在尝试开发一个应用程序来自动检索 Winamp 上当前正在播放的歌曲中的歌词，并以一种可访问的方式将其呈现给屏幕阅读器。我正在使用accessible_output，这是一个使活动屏幕阅读器与用户交谈的过程更容易的库。你可以在这里找到它： [https ://pypi.python.org/pypi/accessible_output/0.7.5#id3](https://pypi.python.org/pypi/accessible_output/0.7.5#id3) 它需要屏幕阅读器中的 DLL 才能工作。在我的测试中，NVDA 屏幕阅读器需要 NVDA32controller.dll。从命令行运行时，它运行良好，但是用py2exe创建一个.exe文件后，它找不到dll，所以屏幕阅读器不再说话......有什么想法如何解决这个问题？我查看了lib的源代码，也许lib正在寻找的路径在从命令行执行时才有效，但是当它是.exe文件时，它会改变......但我不知道为什么。也许我应该添加另一条路径，但它应该是什么路径？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T18:42:10.417

这里的文章似乎描述了一个类似的问题和解决方案（打包有问题的DLL）：[http ://eli.thegreenplace.net/2008/10/09/packaging-dlls-with-executable-made-by-py2exe/](http://eli.thegreenplace.net/2008/10/09/packaging-dlls-with-executable-made-by-py2exe/)

此外，独立于上述文章，IIRC Windows 在程序的安装目录中查找 DLL。将屏幕阅读器的 DLL 复制到 py2exe 程序所在的目录可能会起作用。该解决方案虽然部署得不太好，但上面的解决方案虽然类似，但可能会更好。

# actionscript-3 - 如何优化我的 Actionscript3 代码

> ID：16006105
> 
> 赞同：0
> 
> 时间：2013-04-15T00:51:21.780
> 
> 标签：actionscript-3, flash

我是Actionscript3的初学者，正在做一个小游戏的功课，这是符合条件的最终效果：http: [//neowudesign.com/Ex03_hw.html](http://neowudesign.com/Ex03_hw.html)。在这个游戏中，蝴蝶会避免被用户的光标触及。虽然我已经完成了工作，但由于我没有多少编码经验，所以代码很尴尬。所以我想知道如何有效地改进我的代码。这是我的原始代码：

```
import flash.geom.Rectangle;
import flash.geom.Point;
var rx:Number = 15;
var ry:Number = 15;
var rwidth:Number = 285;
var rheight:Number = 185;
var rect1:Rectangle = new Rectangle(rx,ry,rwidth,rheight);
var velx = 5;
var vely = 5;

stage.addEventListener(MouseEvent.MOUSE_MOVE, avoidMe);

function avoidMe(mouseEvent:MouseEvent):void
{
trace("mouseX: "+ mouseX);
trace("mouseY: "+ mouseY);
var point_1:Point = new Point(mouseX,mouseY);
var point_2:Point = new Point(myButterfly.x,myButterfly.y);
var distanceBetween:Number = Point.distance(point_1,point_2);
trace(distanceBetween);// 10

if (distanceBetween < 20 && myButterfly.x >= 15 && myButterfly.x <= 285 && myButterfly.y >= 15 && myButterfly.y <= 185)
{
    if (mouseX < myButterfly.x)
    {
        myButterfly.x +=  velx;
        trace("x is moving left");
    }
    else
    {
        myButterfly.x -=  velx;
        trace("x is moving right");
    }

    if (mouseY < myButterfly.y)
    {
        myButterfly.y +=  vely;
        trace("x is moving down");
    }
    else
    {
        myButterfly.y -=  vely;
        trace("x is moving up");
    }
}

if (myButterfly.x > 285)
{
    myButterfly.x = myButterfly.x - 40;
    trace("hit the right");
}

if (myButterfly.x < 15)
{
    myButterfly.x = myButterfly.x + 40;
    trace("hit the left");
}

if (myButterfly.y > 185)
{
    myButterfly.y = myButterfly.y - 40;
    trace("hit the bottom");
}

if (myButterfly.y < 15)
{
    myButterfly.y = myButterfly.y + 40;
    trace("hit the top");
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T03:11:56.543

如果你想压缩你的代码，你可以试试这个：

```
if (distanceBetween < 20 && myButterfly.x >= 15 && myButterfly.x <= 285 && myButterfly.y >= 15 && myButterfly.y <= 185)
{
    myButterfly.x += (mouseX < myButterfly.x) ? velx : velx * -1;

    myButterfly.y += (mouseY < myButterfly.y) ? vely : vely * -1;

    // (expression) ? if expression true : if expression false; 
}

if (myButterfly.x > 285)
{
    myButterfly.x -= 40;
    trace("hit the right");
}

if (myButterfly.x < 15)
{
    myButterfly.x += 40;
    trace("hit the left");
} 
```

等等...

运算符参考：[http ://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/operators.html#conditional](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/operators.html#conditional)

输入你的变量也许是个好主意： var velx:Number = 5; var vely: 数字 = 5;

希望有所帮助。

# ruby-on-rails - 获取facebook页面GEM考拉列表

> ID：16006109
> 
> 赞同：1
> 
> 时间：2013-04-15T00:52:17.147
> 
> 标签：ruby-on-rails, facebook, koala

我有一个帮手。获取 facebook fanpage 的列表。前几天上班，突然停了。我在拍了一张粉丝专页后就停下来了。我收到此错误：

```
type: OAuthException, code: 100, message: (#100) Invalid Connection [HTTP 400] 
```

这是我的帮手

```
 def self.download_fanpages(user_id)

#API Facebook
@graph = Koala::Facebook::API.new(Client.find(user_id).access_token.to_s) 

#download list of fanpage
for facebook_page in @graph.get_object("me/accounts/page")
  @graphs = Koala::Facebook::API.new(facebook_page["access_token"]) 
  @url = @graphs.get_object("me") 
  if @url['link'].index("facebook")    
    if !Fanpage.find_by_uid_and_user(facebook_page["id"],user_id)
      @fb = Fanpage.new
      @fb.user = user_id
    else
      @fb = Fanpage.find_by_uid(facebook_page["id"])
    end
    @fb.name = facebook_page["name"]
    @fb.access_token = facebook_page["access_token"]
    @fb.uid = facebook_page["id"]
    @fb.url = @url['link']

    #install or not install
    if @graphs.get_object("me/tabs/"+APP_ID.to_s).count > 0
      @fb.install = 1
    else
      @fb.install = 0
    end
    @fb.save
  end
end
end 
```

有没有其他人有类似的问题。如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T05:15:29.970

听起来您的访问令牌已过期。它们不会持续很长时间。我猜你几天前把它保存在你的数据库中，它工作了一段时间，但后来过期了。您几乎需要在每个会话中获取一个新的访问令牌，并在您的数据库中更新它。

# c# - C# 类库不会自动更新

> ID：16006111
> 
> 赞同：1
> 
> 时间：2013-04-15T00:52:39.740
> 
> 标签：c#, class, dll, reference

我有 2 个类库 (`ClassA`和`ClassB`)，它们被另一个库 ( `ClassX`) 引用。`Web Project`这些库在( `Web01`) 中被引用。

最初，只有`ClassA`和`ClassB`被用于`Web01`. 当我使用`ClassX`in 时`Web01`，它会自动修改我对`ClassA`and的引用`ClassB`。我注意到这一点是因为每当我更改`ClassA`or`ClassB`和 build`Web01`时，`ClassA.dll`日期`ClassB.dll`都不会更新。它们的日期与 相同`ClassX.dll`。`ClassA.dll`和`ClassB.dll`的 日期 只会 在 我 建立 之前 更新`ClassX`.

有没有办法解决这个问题，这样我就不必在`ClassX`每次对`ClassA`and进行一些更改时都进行构建`ClassB`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T01:15:24.653

正如上面评论中提到的，如果项目驻留在同一个解决方案中，则构建应该是级联的。

如果它们驻留在不同的解决方案中，那么据我所知，将需要一个自定义构建脚本来确保所有内容都被编译/重新编译并遵循正确的构建顺序。

同样，这只是据我所知。可能还有其他选择。

还有一点需要注意，以防万一：如果您在任何引用的程序集中有常量值并且常量被更改，请记住重新编译引用该程序集的所有内容，因为常量在编译时得到解析并直接替换为文字值在二进制文件中。

# .net - 解析 csv 数据：TextFieldParser vs Split

> ID：16006113
> 
> 赞同：1
> 
> 时间：2013-04-15T00:53:15.713
> 
> 标签：.net, text, csv, split

VB2005。[因此，只需进行一些测试并在使用 TextFieldParser http://connect.microsoft.com/VisualStudio/feedback/details/679596/textfieldparser-does-not-respect-consecutive-line-breaks-](http://connect.microsoft.com/VisualStudio/feedback/details/679596/textfieldparser-does-not-respect-consecutive-line-breaks-in-the-middle-of-a-field)解析我的 CSV 数据时遇到了这个奇怪的问题[in-the-middle-of-a-field](http://connect.microsoft.com/VisualStudio/feedback/details/679596/textfieldparser-does-not-respect-consecutive-line-breaks-in-the-middle-of-a-field)无法识别字段中重复的换行符。请注意，这与跳过空白字段不同。无论如何，我正在测试另一种获取数据的方法。我正在尝试普通的旧拆分函数，但该函数无法处理像 TextFieldParser 这样的字段中的嵌入逗号。有没有解决这个问题的方法？

例如，源数据字段读取：

```
"this is line 1
this is line 2

this is line 3

this is line 4
this is line 5" 
```

在我用 TextFieldParser 解析它之后，我得到一个输出：

```
this is line 1
this is line 2
this is line 3
this is line 4
this is line 5 
```

似乎任何空白行都会被忽略。如果我有一个包含多个段落的备忘录，这将把它们混在一起，中间没有空格。还有其他人看到这种行为吗？

更新：使用来自 Code 项目[http://www.codeproject.com/Articles/9258/A-Fast-CSV-Reader](http://www.codeproject.com/Articles/9258/A-Fast-CSV-Reader)的 CSV 阅读器，效果很好。不修剪空行上的内部换行符。

# ruby - 为数据库存储“代理”捕获 $stderr 和 $stdout

> ID：16006115
> 
> 赞同：0
> 
> 时间：2013-04-15T00:53:24.960
> 
> 标签：ruby, ruby-on-rails-3, mongoid, delayed-job

我正在尝试将`stderr`and存储`stdout`在我们的数据库中，以便我们的后台进程将来进行调试。我还希望捕获像代理一样透明，我的意思是我希望仍然拥有`stderr`和`stdout`输出到常规记录器以及我们的数据库之一。

我有这样的代码：

```
class Message

  include Mongoid::Document

  field :stdout
  field :stderr

  def enable_capture_output
    @previous_stderr, $stderr = $stderr, StringIO.new
    @previous_stdout, $stdout = $stdout, StringIO.new
  end

  def disable_and_save_captured_output
    self.stdout = $stdout.string
    self.stderr = $stderr.string
    $stderr = @previous_stderr
    $stdout = @previous_stdout
  end

end 
```

但它的效果并不好。:(

使用：带有 DelayedJob 的 Rails 3.2.11 和 Mongoid 3.0.23

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T18:33:36.713

从您的评论中，听起来您的问题是您没有看到正在发生的结果流到数据库。但是除了最后，您也不会将文档保存到数据库中。所以......如果您想在流程结束之前查看数据库中的结果，则必须在流程结束之前逐步写入数据库。

我建议查看 mongo 的[`$push`运算符](http://docs.mongodb.org/manual/reference/operator/push/)，您可以使用它来有效地将更多结果添加到文档中，而无需重写整个文档。您可以将它与`update`可以通过mongoid 基础的 moped[使用的命令一起使用。](http://mongoid.org/en/moped/docs/driver.html)

[或者，您可以使用logentries](http://logentries.com)或[loggly](http://loggly.com/)等日志聚合器服务为自己节省大量工作。

# javascript - 如何将javascript滚动条附加到textarea？

> ID：16006116
> 
> 赞同：5
> 
> 时间：2013-04-15T00:53:37.117
> 
> 标签：javascript, jquery, css, scroll

我有一个替换普通 webkit/mozilla 滚动条的 javascript 滚动条。只需输入 div 名称“.element”，它就可以在我的所有其他 div 上工作，但是我不确定如何让滚动条应用于文本区域？有谁知道我会怎么做，谢谢任何人的帮助。

JAVASCRIPT：

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7/jquery.min.js"></script>
<script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/jquery-ui.min.js"></script>
<script src="assets/js/scroll/jquery.mousewheel.min.js"></script>
<script src="assets/js/scroll/jquery.mCustomScrollbar.js"></script>

<script>
    (function($){
        $(window).load(function(){
            $(".bio textarea").mCustomScrollbar();
        });
    })(jQuery);
</script> 
```

HTML：

```
<form action="includes/changebio.php" method="post" id="form1">         
 <textarea id="bio" style="width: 442px; 
    margin-top:3px;
    text-align:left;
    margin-left:-2px;
    height: 120px;
    resize: none; 
  outline:none;
    border: hidden;" textarea name="bio" data-id="bio" maxlength="710"><?php echo stripslashes($profile['bio']); ?></textarea>
<input type="image" src="assets/img/icons/save-edit.png"class="bio-submit" name="submit" value="submit" id="submit"/>
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T00:58:20.340

该脚本将帮助您设置 tex 区域的样式；[http://studio.radube.com/html-textarea-custom-scrollbar](http://studio.radube.com/html-textarea-custom-scrollbar)。它可以使用您自己的图像和 CSS 进行自定义。

还可以查看这个 jQuery 插件：

[http://www.kelvinluck.com/assets/jquery/jScrollPane/jScrollPane.html](http://www.kelvinluck.com/assets/jquery/jScrollPane/jScrollPane.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T04:26:53.440

更改脚本如下：

```
<script>
    (function($){
        $(window).load(function(){
            $("textarea#bio").mCustomScrollbar();
        });
    })(jQuery);
</script> 
```

因为，您的文本区域没有“bio”类的父元素。您的选择器是错误的。更改选择器“textarea#bio”，将解决您的问题。

接受答案，如果它解决了您的问题。

# java - 将 Android 数据发布到服务器：始终导致发布值“0”

> ID：16006117
> 
> 赞同：0
> 
> 时间：2013-04-15T00:54:19.513
> 
> 标签：java, android, parsing, service, alarmmanager

我试图每隔几秒钟从我的应用程序中捕获和发布（带宽）数据，但是每次我解析它显示为 0 的数据时。我能够成功地查看我正在寻找的值在 android 设备的屏幕上更改实时（发送和接收的数据量）但是当我尝试将它们解析到服务器时。我不断地发布一个零值 - 而不是当前发送或接收的数据量的值。起初我以为我可能使用了不正确的长值（mStartTX），但是即使我将其更改为“txBytes”，它仍然显示为零值。

我只需要帮助来解析当前发送和接收的字节的值——但我似乎做不到。

mStartTX 的初始值为 0，但我认为我应该能够通过使用 txBytes 来捕获它的值——但两者在到达服务器时都显示为零值——即使它们在屏幕上显示为动态变化的值（其中我正在尝试捕捉。）

我想我向服务器发送了错误的值 - 但我真的不确定。

PS我也尝试过发送其他值：

```
testObject.put("DataO", String.valueOf(textRssi));
  testObject.put("DataI", String.valueOf(textSpeed)); 
```

但是，它们显示为 null 而不是零。由于某种原因，我似乎无法发布任何动态变化的数据......而且我不明白为什么。

服务器截图：

[https://docs.google.com/file/d/0B7v2rXEILF-aWnRUUlZEMkxQRm8/edit?usp=sharing](https://docs.google.com/file/d/0B7v2rXEILF-aWnRUUlZEMkxQRm8/edit?usp=sharing)

来源：Service_class.java

```
public class Service_class extends Service {
  TextView textSsid, textSpeed, textRssi;

  public Handler mHandler = new Handler();
    public long mStartRX = 0;
  public long mStartTX = 0;
  public long txBytes;

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate();

  textSsid = (TextView) findViewById(R.id.Ssid);
  textSpeed = (TextView) findViewById(R.id.Speed);
  textRssi = (TextView) findViewById(R.id.Rssi);
  Long.toString(mStartTX);
  Long.toString(mStartRX);
  Long.toString(txBytes);

   mStartRX = TrafficStats.getTotalRxBytes();
     mStartTX = TrafficStats.getTotalTxBytes();
     if (mStartRX == TrafficStats.UNSUPPORTED || mStartTX == TrafficStats.UNSUPPORTED) {
      AlertDialog.Builder alert = new AlertDialog.Builder(this);
          alert.setTitle("Uh Oh!");
          alert.setMessage("Your device does not support traffic stat monitoring.");
          alert.show();
     } else {
      mHandler.postDelayed(mRunnable, 1000);
     }
  }

 private TextView findViewById(int speed) {=
      return null;
  }

private final Runnable mRunnable = new Runnable() {
     public void run() {
      TextView RX = (TextView)findViewById(R.id.RX);
      TextView TX = (TextView)findViewById(R.id.TX);
      long rxBytes = TrafficStats.getTotalRxBytes()- mStartRX;
      RX.setText(Long.toString(rxBytes));
      long txBytes = TrafficStats.getTotalTxBytes()- mStartTX;
      TX.setText(Long.toString(txBytes));
      mHandler.postDelayed(mRunnable, 1000);
      ParseObject testObject = new ParseObject("TestObject");
      testObject.put("DataOut", String.valueOf(txBytes));
      testObject.put("DataIn", String.valueOf(mStartRX));
      testObject.put("DataRSSI", String.valueOf(textRssi));
      testObject.put("DataSpeed", String.valueOf(textSpeed));
      testObject.saveInBackground();

      final Chronometer myChronometer = (Chronometer)findViewById(R.id.chronometer);
      myChronometer.start();

      DisplayWifiState();
      this.registerReceiver(this.myWifiReceiver, new IntentFilter(
              ConnectivityManager.CONNECTIVITY_ACTION));
  }

  private Chronometer findViewById(int chronometer) {
      return null;
  }

  private void registerReceiver(BroadcastReceiver myWifiReceiver2,
              IntentFilter intentFilter) {
      }

      private BroadcastReceiver myWifiReceiver = new BroadcastReceiver() {

      @Override
      public void onReceive(Context arg0, Intent arg1) {
          NetworkInfo networkInfo = (NetworkInfo) arg1
                  .getParcelableExtra(ConnectivityManager.EXTRA_NETWORK_INFO);
          if (networkInfo.getType() == ConnectivityManager.TYPE_WIFI) {
              DisplayWifiState();
          }
      }
  };

  public void DisplayWifiState() {

      ConnectivityManager myConnManager = (ConnectivityManager) getSystemService(CONNECTIVITY_SERVICE);
      NetworkInfo myNetworkInfo = myConnManager
              .getNetworkInfo(ConnectivityManager.TYPE_WIFI);
      WifiManager myWifiManager = (WifiManager) getSystemService(Context.WIFI_SERVICE);
      WifiInfo myWifiInfo = myWifiManager.getConnectionInfo();

      if (myNetworkInfo.isConnected()) {
          textSsid.setText(myWifiInfo.getSSID());
          textSpeed.setText(String.valueOf(myWifiInfo.getLinkSpeed()) + " "
                  + WifiInfo.LINK_SPEED_UNITS);
          textRssi.setText(String.valueOf(myWifiInfo.getRssi()));
      } else {
          textSsid.setText("---");
          textSpeed.setText("---");
          textRssi.setText("---");
         }}};

    @Override
    public IBinder onBind(Intent arg0) {
        return null;
    }

    @Override
    public int onStartCommand(Intent intent, int flags, int startId) {
        Toast.makeText(this, "Hello World", Toast.LENGTH_LONG).show();
        Log.d(TAG, "starting service");
        ParseObject testObject = new ParseObject("TestObject");
      testObject.put("DataOut", String.valueOf(txBytes));
      testObject.put("DataIn", String.valueOf(mStartRX));
      testObject.put("DataRSSI", String.valueOf(textRssi));
      testObject.put("DataSpeed", String.valueOf(textSpeed));
      testObject.saveInBackground();
        return START_STICKY;
    }

    @Override
    public void onDestroy() {
        super.onDestroy();
        Toast.makeText(this, "Service Stopped", Toast.LENGTH_LONG).show();
    }

    @Override
    public void onCreate() {
        super.onCreate();
    }
} 
```

数据以下列方式出现在服务器中：

```
DataIn: Appears as 0 every 12 seconds
DataOut Appears as 0 every 12 seconds
DataRSSI Appears as null every 12 seconds
DataSpeed Appears as null every 12 seconds 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T01:20:52.367

我相信您需要在 Runnable 的 run() 方法中添加对 ParseObject.saveXX() 的另一个调用。

onStartCommand() 仅在服务启动时运行，而不是在可运行对象的每次“迭代”之后运行

# angularjs - 编写 Jasmine Test (BDD) 时在“describe”中包含多个“it”

> ID：16006119
> 
> 赞同：2
> 
> 时间：2013-04-15T00:54:36.000
> 
> 标签：angularjs, jasmine, karma-runner

我目前正在 Jasmine 中编写一个测试，使用 Karma 作为 JS 运行器。“描述”中是否可以有多个“它”，如下所示：

```
describe('PhoneCat controllers', function() {

  describe('PhoneListCtrl', function(){

    it('should create "phones" model with 3 phones', function() {
      var scope = {},
          ctrl = new PhoneListCtrl(scope);

      expect(scope.phones.length).toBe(2);

    it('should create "greetings" models with 3 greeting', funciton(){
      var scope = {},
        ctrl = new PhoneListCtrl(scope);

      expect(scope.greetings.length).toBe(3);

    });
    });
  });
}); 
```

它目前失败了，但是你如何编写一个没有冗余的测试（在这种情况下，必须描述同一个控制器，两次）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T01:34:35.267

使用该`beforeEach`功能创建通用设置。它可以添加到任何级别。

```
describe('PhoneCat controllers', function() {
  describe('PhoneListCtrl', function(){
    beforeEach(function() {
      this.scope = {};
      this.ctrl = new PhoneListCtrl(scope);
    });

    it('should create "phones" model with 3 phones', function() {
      expect(this.scope.phones.length).toBe(2);
    });

    it('should create "greetings" models with 3 greeting', funciton(){
      expect(this.scope.greetings.length).toBe(3);
    });
  });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-02T21:08:53.200

我知道这个问题很古老，但 OP 说“这个测试失败了”。

无论是否需要 ForEach()，这可能是因为：

```
 expect(scope.phones.length).toBe(2); 
```

应该：

```
 expect(scope.phones.length).toBe(**3**); 
```

# android-maps-v2 - 如何使用 Android Map v2 API 显示旋转的“地图图像”

> ID：16006120
> 
> 赞同：1
> 
> 时间：2013-04-15T00:54:43.077
> 
> 标签：android-maps-v2

作为背景...我正在使用**Android Google Map v2开发****本机 Android 应用程序**。我的要求如下：

 ****要求 #1：**显示由两个 LatLng 限定的特定地理区域的卫星图像。请注意，这些 LatLng 代表我要显示的矩形地图区域的“中心线端点”（与地图区域的东北角和东南角相反）。为清楚起见，我要显示的地图区域是高尔夫球场上的一个洞，我拥有的两个 LatLngs 代表特定高尔夫球洞的 Tee 位置和 Pin/hole 位置。

这没有问题......这部分的解决方案似乎很简单。我使用以下代码来显示具有适当边界的地图：

```
public void onCameraChange(CameraPosition arg0) {
// Determine the bounds and then move camera
LatLngBounds bounds = new LatLngBounds.Builder()
  .include(TPS_PIN)
  .include(TPS_HOLE)            
  .build();
googleMap.moveCamera(CameraUpdateFactory.newLatLngBounds(bounds, 10)); 
```

**要求#2：**旋转地图图像，以便在纵向模式下，Tee 位置位于手机屏幕底部，而 Pin/hole 位置位于手机屏幕顶部。

虽然有一种方法可以旋转地图图像（CameraPosition.Builder 使用它的“轴承”参数），但显然你不能将它与 LatLngBounds 方法（如上所述）结合使用来实现我的目标（绑定和旋转地图图像）。还有另一个 StackOverflow 帖子（[Android maps V2 newLatLngBounds with bearing](https://stackoverflow.com/questions/14631334/android-maps-v2-newlatlngbounds-with-bearing)），作者有类似的目标，但不幸的是，提供的答案并没有解决问题。但是，如果响应者建议的答案不起作用（并且不起作用），则响应者建议采用以下方法：

> “您可能需要自己计算目标并使用投影进行缩放，因此您可以将边界设置为上面第一个 moveCamera() 调用的一部分。”

不幸的是，没有提供更多细节。我看过投影，但看不到实现目标的方法。

有没有人看到实现我的目标的方法（绑定和旋转）？也许有一种方法可以使用投影来做到这一点？请记住，我只有两个 LatLng 点可供我使用（Tee 位置的 LatLng 和 Pin/孔位置）。我需要确保整个孔都适合屏幕。

正如我上面提到的，我需要确定如何旋转图像，以便当手机处于 Potrait 模式时，Tee 位于手机屏幕的底部，而 Hole/Pin 位置位于屏幕的顶部。再次需要确保整个孔（三通和销/孔）适合屏幕。有没有办法将一个特定的 LatLng “固定”到屏幕底部，将另一个 LatLng “固定”到手机屏幕的顶部？

重申一下，我需要一个适用于 Android Maps v2 api 的解决方案。

任何建议将不胜感激......即使它们是高级“定向”建议。这就是说希望“定向”建议将有足够的细节让我连接点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T17:40:45.980

在这里回答我自己的问题。我不确定这是否是实现我的目标的最佳方式（即，以适当的缩放级别显示绑定的旋转图像（至 90 度））..如果有更好的方法来做到这一点，我很想听听他们.

在高层次上，这是我所做的：

1.  使用 LatLngBounds 首先获取包含我的两个 LatLng 坐标的地图图像。
2.  得到该地图图像的投影以提取/计算其他属性（目标、缩放级别、坡度/方位），然后用于显示图像。
3.  然后我使用 CameraPosition.Builder() 和上述提取/计算的参数来构建和显示最终的地图图像。

所以这行得通，但我不确定这是实现我的目标的最有效方式。例如，我使用“LatLngBounds”，然后使用“moveCamera(CameraUpdateFactory.newLatLngBounds(bounds, 25)”生成地图，以便提取缩放级别。不幸的是，使用“moveCamera”方法会生成“临时”地图图像并在生成和显示最终旋转的地图图像之前临时显示（至少在模拟器中）。除了第一张图像的残差短暂出现在屏幕上的视觉“故障”之外，似乎生成临时地图以获取关键属性最终地图所需的方法是一种低效的方法。

也许有一种方法可以在不实际生成图像的情况下获得 zoomLevel？顺便说一句，在我的应用程序中，将 zoomLevel 设置为可能的最大级别，同时仍然显示整个洞是至关重要的。因为任何高尔夫球洞的长度可能会有很大差异，所以 zoomLevel 在各个洞之间可能会有很大差异，因此我不可能将 zoomLevel 设置为“X”并期望它适用于每个洞。此外，我的解决方案需要与世界上任何 40K+ 高尔夫球场配合使用，因此我无法为每个高尔夫球洞存储适当的缩放级别。**

# javascript - 为什么这个简单的代码不起作用？

> ID：16006132
> 
> 赞同：-5
> 
> 时间：2013-04-15T00:56:36.737
> 
> 标签：javascript

我有一个无法工作的简单 js

我需要为每个变量显示相应的值 ie 玩具总动员 3 显示喜剧精彩选择等等

问题似乎出在 if else 语法中

```
<!doctype html>
<html>
<head>
<meta charset="UTF-8">
<title>help</title>
</head>

<body>
<script type="text/javascript">

var movie = prompt("Select your favorite movie").toLowerCase();

if(movie =="toy story 3","kung fu Panda","RIO");
{
document.write("<p>Comedy splendid choice</p>")
}
else if(movie ="sex in the city","the backup plan","twilight");
{
document.write("<p>Chick flicks are always fun</p>")
}
else if(movie ="fast 5" || movie=="the karate kid");
{
document.write("<p>Action is satisfaction/p>")
}
else
{
document.write("<p>I’m sure it’s a good movie I just don’t know about it/p>")
}

</script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T01:02:00.347

首先，`;`在 end`if else`语句中删除。

二、使用`||`创造或逻辑表达。

第三，您的输入是小写的，因此也将您的输入`movie`与小写文字进行比较。

第四，`==`在比较相等时使用。`=`用于变量赋值

尝试这个：

```
var movie = prompt("Select your favorite movie").toLowerCase();

if(movie =="toy story 3" || movie == "kung fu panda" || movie=="rio")
{
   document.write("<p>Comedy splendid choice</p>");
}
else if(movie =="sex in the city" || movie == "the backup plan" || movie == "twilight")
{
   document.write("<p>Chick flicks are always fun</p>");
}
else if(movie =="fast 5" || movie=="the karate kid")
{
   document.write("<p>Action is satisfaction/p>");
}
else
{
   document.write("<p>I’m sure it’s a good movie I just don’t know about it/p>");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T00:58:41.873

您需要创建一个或：

```
if(movie =="toy story 3" || movie == "kung fu Panda" || movie == "RIO")
{
document.write("<p>Comedy splendid choice</p>")
}
.
.
. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T01:03:35.393

“不工作”是什么意思？你能详细说明一下吗？

如果您的意思没有显示，请检查您的代码：

```
<script type="text/javascript">
    var movie = prompt("Select your favorite movie").toLowerCase();

    if(movie =="toy story 3","kung fu Panda","RIO")
    {
        document.write("<p>Comedy splendid choice</p>");
    }
    else if(movie ="sex in the city","the backup plan","twilight")
    {
        document.write("<p>Chick flicks are always fun</p>");
    }
    else if(movie ="fast 5" || movie=="the karate kid")
    {
        document.write("<p>Action is satisfaction/p>");
    }
    else
    {
        document.write("<p>I’m sure it’s a good movie I just don’t know about it/p>");
    }
</script> 
```

您错过了分号 (;)。您应该在语句的末尾加上分号，而不是在 if case 之后。

应该：

```
if ( condition == true) 
{
    document.write("Hey, it's true!");
} 
```

不是：

```
if ( condition == true); // Semi-colon here means, it's the end of the statement
                         // the code after won't be executed
{
    document.write("Hey, it's true!"); // Semi-colon should be here
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-15T01:05:18.240

使用 switch 语句而不是多个 if then else...

```
switch(movie)
{
    case "Toy story":
        document.write("<p>Comedy splendid choice</p>");
        break;

    case "fast 5":
        document.write("<p>Action is satisfaction/p>");
        break;
} 
```

# javascript - 在放置时获取元素 id jquery

> ID：16006133
> 
> 赞同：0
> 
> 时间：2013-04-15T00:56:46.210
> 
> 标签：javascript, html

我找到[了关于 w3schols 的教程](http://www.w3schools.com/html/html5_draganddrop.asp)，它帮助我进行拖放，但我有一个菜鸟问题：如何`ev.target.id`从`drag(ev)`函数中获取？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T01:01:50.753

**拖：**

您可以将元素本身作为参数发送：

```
<img id="drag1" src="img_logo.gif" draggable="true" ondragstart="drag(event, this)" width="336" height="69"> 
```

在 JS 中：

```
function drag(ev, obj)
{
    alert(obj.id);
} 
```

**降低：**

```
<div id="div1" ondrop="drop(event)" ondragover="allowDrop(event, this)"></div> 
```

和JS：

```
function allowDrop(ev, obj)
{
    alert(obj.id);
} 
```

# c++ - 使用模板手动实现 List 和 Stack

> ID：16006134
> 
> 赞同：0
> 
> 时间：2013-04-15T00:57:16.747
> 
> 标签：c++, templates, stack

我的数据结构老师给了我们手动实现列表和堆栈的任务，它工作得很好，但是我们不得不重新实现它以使用模板接受任何类型的参数。从那时起，我一直面临着许多不同的错误。现在，我遇到了 c2019 错误，但我看不出我的代码有什么问题。试过这个：`pilha.getTopo<int>();`，这个：`Lista<int> lista;`，这个：`typedef Lista<int> Lista_int;`，但没有运气。

现在，我的代码：

######UPDATE：下面的代码正在工作

Listas.h

```
#pragma once

#include "stdafx.h"
#include <iostream>

using namespace std;

/*============================Node================================*/
template <typename N>
class Node
{
    N value;
    Node *next, *prev;

public:
    Node(void) {};
    Node(N _value){
        this->value = _value;
        this->prev = NULL;
        this->next = NULL;
    };
    ~Node(void) {};

    void setValue(int _value) { this->value = _value; }
    void setNext(Node *_next) { this->next = _next; }
    void setPrev(Node *_prev) { this->previous = _prev; }

    int getValue() { return this->value; }
    Node *getNext() { return this->next; }
    Node *getPrev() { return this->prev; }
};

/*===========================List===============================*/
template <typename T>
class List
{
    Node<T> *begin, *end;
    int list_size;

public:
    List(void){
        this->begin = NULL;
        this->end = NULL;
        this->list_size = 0;
    };
    ~List(void) {};

    template <typename T> void insertBegin(Node<T> node){
        Node<T> *newNode = new Node<T>;

        *newNode = node;

        if(this->list_size == 0){
            this->begin = this->end = newNode;
            this->list_size += 1;
        }else{
            newNode->setNext(begin);
            this->begin = newNode;
            this->list_size += 1;
        }
    };
    template <typename T> void removeBegin(Node<T> node){
        Node<T> *newNode = new Node<T>;

        *newNode = node;

        if(this->list_size == 0){
            this->begin = this->end = NULL;
            this->list_size = 0;
        }else{
            if(begin == end)
                this->end = NULL;

            this->begin = newNode->getNext();
            newNode = begin;
            newNode->setPrev(NULL);
            this->list_size -= 1;
        }
    };
    template <typename T> void insertEnd(Node<T> node){
        Node<T> *newNode = new Node<T>;

        *newNode = node;

        if(this->list_size == 0){
            this->begin = this->end = newNode;
            this->list_size += 1;
        }else{
            newNode->setPrev(end);
            this->end = newNode;
            this->list_size += 1;
        }
    };
    template <typename T> void removeEnd(Node<T> node){
        Node<T> *newNode = new Node<T>;

        *newNode = node;

        if(this->list_size == 0){
            this->begin = this->end = NULL;
            this->list_size = 0;
        }else{
            if(begin == end)
                this->end = NULL;

            this->end = newNode->getPrev();
            newNode = end;
            newNode->setNext(NULL);
            this->list_size -= 1;
        }
    };
    template <typename T> void exibeList(){
        Node<T> *node;

        cout << "Begin: " << begin << endl
                << "End: " << end << endl
                << "Size: " << list_size << endl << endl;

        if(begin != NULL){
            node = begin;

            do{
                cout << "Mem. adress: " << &node << endl
                     << "Value: " << node->getValue() << endl
                     << "Previous: " << node->getPrev() << endl
                     << "Next: " << node->getNext() << endl
                     << endl;
                node = node->getNext();
            }while(node != NULL);
        }
    };
};

/*===========================Stack==============================*/
template <typename T>
class MyStack
    //: public List<T>
{
    Node<T> *top, *next;
    int my_stack_size;

public: 
    MyStack<T>(void){
        this->my_stack_size = 0;
        this->top = NULL;
        this->next = NULL;
    };
    ~MyStack<T>(void) {};
    template <typename T> void insertTop(Node<T> node){
        Node<T> *newNode = new Node<T>;

        *newNode = node;

        if(this->my_stack_size == 0){
            this->top = this->next = newNode;
            this->my_stack_size += 1;
        }else{
            newNode->setNext(top);
            this->next = top;
            this->top = newNode;
            this->my_stack_size += 1;
        }
    };
    template <typename T> void removeTop(){
        Node<T> *node;

        if(this->my_stack_size > 0){
            node = top;
            this->top = next;
            delete node;
            this->my_stack_size -= 1;
        }else
            cout << "Stack underflow." << endl;
    };
    template <typename T> void getTop(){
        Node<T> *node = new Node<T>;

        node = top;

        if(node->getPrev() == NULL)
            cout << node->getValue() << endl;
        else
            cout << "Error. Node isn't the first." << endl;
    };
    template <typename T> void show(){
        Node<T> *node;

        cout << "Top: " << top << endl
                << "Next: " << next << endl
                << "Size: " << my_stack_size << endl << endl;

        if(top != NULL){
            node = top;

            do{
                cout << "Mem. adress: " << &node << endl
                     << "Value: " << node->getValue() << endl
                     << "Previous: " << node->getPrev() << endl
                     << "Next: " << node->getNext() << endl
                     << endl;
                node = node->getNext();
            }while(node != NULL);
        }
    };
}; 
```

最后，Lista.cpp

```
// Lista.cpp : Defines the entry point for the console application.
//

#include "stdafx.h"
#include "Listas.h"
#include <iostream>

using namespace std;

int _tmain(int argc, _TCHAR* argv[])
{
        /* ERROR C2019
    //typedef Pilha<int> Pilha_int;
    //typedef Nodo<int> Nodo_int;
        //
    //Lista_int lista;
    //Pilha_int pilha;
    //Nodo_int nodo(25), nodo2(40), nodo3(55), nodo4(70);
    */

        /* C2019
    Pilha<int> pilha;
    Nodo<int> nodo(25), nodo2(40);

        /*error C2955: use of class template requires template argument list
        //Pilha pilha;
    //Nodo nodo(25), nodo2(40), nodo3(55), nodo4(70);

    pilha.insereTopo(nodo);
    pilha.getTopo(); //C2783
    pilha.insereTopo(nodo2);
    pilha.getTopo(); //C2783

    pilha.exibe();  //error C2783: could not deduce template argument for 'T'
    pilha.exibe<int>(); //C2019

    system("pause");
    return 0;
} 
```

提前致谢。

# ruby-on-rails - 嵌套资源的 Rails 部分

> ID：16006137
> 
> 赞同：0
> 
> 时间：2013-04-15T00:57:35.173
> 
> 标签：ruby-on-rails, ruby

我有一个名为`Contest`. A`Contest`可以包含 的许多实例`Athlete`。这在`Contest`模型中定义为：

```
def athletes
  team.athletes
end 
```

在这种情况下，`Contest`还定义`belongs_to :team`.

在比赛视图中，我想显示一个循环遍历所有运动员的部分。我试过这样的事情：

`<%= render :partial => 'athletes', :collection => @contest.athletes %>`

它将部分列为丢失，因为它正在检查顶级视图/应用程序目录。

有没有更好的方法来定义我的 Contests <-> Athletes 之间的关系并在 Contest 视图中呈现部分？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T01:13:24.287

这里有一些未经测试的代码：

```
# Models
class Team < ActiveRecord::Base
  has_many :athletes

class Contest < ActiveRecord::Base
  belongs_to :team
  has_many :athletes, :through => team
end

# View
<%= render(@contest.athletes) %>

# or 
<%= render :partial => "contest/athlete", :collection => @contest.athletes %> 
```

`Contest#athletes`您可以使用`has_many :through`Rails的而不是自己定义。

当您使用部分时，您甚至可以定义存储部分的路径。例如，如果您的比赛在特殊情况下呈现为运动员，您可能希望将 parial 存储在此位置：`app/views/contests/_athlete.html.erb`

你可以像上面的代码一样渲染它。（注意！代码中没有“_”，但在文件名中）

# gstreamer - 在 Windows 中使用 GStreamer SDK 播放 .AVI 文件

> ID：16006142
> 
> 赞同：0
> 
> 时间：2013-04-15T00:58:28.500
> 
> 标签：gstreamer

我想在 Windows 7 中使用 GStreamer 播放 .AVI 文件。 GStreamer SDK 已按照此[链接](http://docs.gstreamer.com/display/GstSDK/Installing+on+Windows)中给出的方式安装。然后创建了一个 GStreamer SDK 项目，并将以下代码添加到 C 文件中，因为给出的是带有建议更正的此[链接。](https://stackoverflow.com/questions/8396127/gstreamer-code-for-playing-avi-file-is-hanging)项目属性 -> 配置属性 -> 调试 -> 工作目录更改为“$(GSTREAMER_SDK_ROOT_X86)\bin”，并按照上面给出的安装链接中的建议将其添加到 Windows PATH 变量中。运行代码时，它只是退出而不播放视频，输出的最后几行如下所示。请注意，我在 64 位 Windows 7 上安装了 32 位 Gstreamer SDK。

代码：

```
#include<stdio.h>
#include<gst/gst.h>
#include<glib.h>

//Function to process message on bus of pipeline
gboolean process_message(GstBus *bus, GstMessage *msg,gpointer data);

//Function to add pad dynamically for ogg demux
void dynamic_addpad(GstElement *element, GstPad *pad, gpointer data);        
void dynamic_decodepad (GstElement* object, GstPad* arg0, gboolean arg1,gpointer user_data);

GstElement *source, *demuxer, *audio_decoder, *video_decoder, *audio_convertor,*video_convertor, *audio_sink,*video_sink,*audioqueue,*videoqueue;//*audio_demuxer, *video_demuxer,

int main(int argc,char* argv[]){
    GstPipeline *pipeline;
    GstBin *Bin;
    GstBus *bus;
    GMainLoop *Mainloop;

    gst_init (&argc,&argv);

    Mainloop = g_main_loop_new(NULL,FALSE);//NULL to use the current context and False to tell its not in running state

    GstElement *pipeline = gst_pipeline_new("PIPELINE");
    Bin = GST_BIN(pipeline);
    bus = gst_pipeline_get_bus(GST_PIPELINE(pipeline));

    source = gst_element_factory_make("filesrc","file-source");
    g_object_set(G_OBJECT(source), "location", "file:///C:/Video.avi", NULL);

    demuxer = gst_element_factory_make("avidemux","avi-demuxer");
    audioqueue = gst_element_factory_make("queue","Queue for audio");
    videoqueue = gst_element_factory_make("queue","Queue for video");
    audio_decoder = gst_element_factory_make("decodebin","a_decodebin");
    video_decoder = gst_element_factory_make("decodebin","decoderbin");//"Vorbis audio decoder","vorbis");
    audio_convertor = gst_element_factory_make("audioconvert","audio convertor");//"Audio converter","audioconvert");
    video_convertor = gst_element_factory_make("videoscale","video convertor");//"Audio converter","audioconvert");
    audio_sink = gst_element_factory_make("autoaudiosink","Auto audio sink");
    video_sink = gst_element_factory_make("xvimagesink","XV video sink ");

    if(!source || !demuxer || !audioqueue || !videoqueue || !video_decoder ||!audio_convertor || ! video_convertor || !audio_sink || !video_sink  ){   
        g_print("Could not not create element\n");
        return 0;
    }
    gst_bin_add(Bin,source);
    gst_bin_add_many(
        Bin,
        demuxer,
        audioqueue,videoqueue,
        audio_decoder,audio_convertor,
        video_decoder,video_convertor,
        audio_sink,video_sink,
        NULL);

    gst_element_link(source,demuxer);
    gst_element_link_many(audioqueue,audio_decoder,NULL);
    gst_element_link_many(audio_convertor,audio_sink,NULL);
    gst_element_link_many(videoqueue,video_decoder,NULL);
    gst_element_link_many(video_convertor,video_sink,NULL);

    g_signal_connect(demuxer,"pad-added",G_CALLBACK(dynamic_addpad),NULL);//demuxer and decoder are passed as instance and data as pads of both the elements are linked in dynamic_addpad

    g_signal_connect(audio_decoder,"new-decoded-pad",G_CALLBACK(dynamic_decodepad),NULL);
    g_signal_connect(video_decoder,"new-decoded-pad",G_CALLBACK(dynamic_decodepad),NULL);//demuxer and decoder are passed as instance and data as pads of both the elements are linked in dynamic_addpad
    gst_bus_add_watch(bus,process_message,Mainloop); //Mainloop is passed as user data as in the process_message actions are taken on the loop
    g_object_unref(bus);
    g_print("In playing state\n");
    gst_element_set_state(pipeline, GST_STATE_PLAYING);//Pipeline is also a bin and bin is also an element at abstract level and hence gst_element_set_state call is used to set state of pipeline.

    g_main_loop_run(Mainloop);
    g_print("In playing state2\n");
    gst_element_set_state(pipeline, GST_STATE_NULL);
    g_object_unref(G_OBJECT(pipeline));
}

//Function to process message on bus of pipeline
gboolean process_message(GstBus *bus, GstMessage *msg,gpointer data){
    GError *error;
    gchar *debug;
    GMainLoop *loop = (GMainLoop *)data;

    g_print(" In process message msg->type : %d\n",GST_MESSAGE_TYPE(msg));
    switch(GST_MESSAGE_TYPE(msg)){
        case   GST_MESSAGE_UNKNOWN :
            g_print("GST_MESSAGE_UNKNOWN \n");
            break;
        case   GST_MESSAGE_EOS     :
            g_print("GST_MESSAGE_EOS \n");
            g_main_loop_quit(loop);
            break;
        case   GST_MESSAGE_ERROR   :
            g_print("GST_MESSAGE_ERROR \n");
            gst_message_parse_error (msg, &error, &debug);
            g_free(debug);
            //if(!error)
            {
                g_print("GST_MESSAGE_ERROR message : %s \n",error->message);
            }
            g_main_loop_quit(loop);
            break;
        case   GST_MESSAGE_WARNING :
            g_print("GST_MESSAGE_WARNING  \n");
            break;
        case   GST_MESSAGE_INFO    :
            g_print("GST_MESSAGE_INFO \n");
            break;
        case   GST_MESSAGE_TAG     :
            g_print("GST_MESSAGE_TAG \n");
            break;
        case   GST_MESSAGE_BUFFERING:
            g_print("GST_MESSAGE_BUFFERING \n");
            break;
        case   GST_MESSAGE_STATE_CHANGED:
            g_print("GST_MESSAGE_STATE_CHANGED \n");
            break;
        default : 
            g_print("default \n");
            break;
    }
    return TRUE; //returns true always as it has to be always registered returning false will deregister the function
}

void dynamic_addpad(GstElement *element, GstPad *pad, gpointer data) {
    char* pad_name = gst_pad_get_name(pad);
    g_print(" In dynamic ADDING PAD %s\n", pad_name);

    if (g_str_has_prefix(pad_name,"audio")) {
        GstPad *audiodemuxsink = gst_element_get_static_pad(audioqueue,"sink");
        gst_pad_link(pad,audiodemuxsink );
    }
    else if (g_str_has_prefix(pad_name,"video")) {
        GstPad *videodemuxsink = gst_element_get_static_pad(videoqueue,"sink");
        gst_pad_link(pad,videodemuxsink );
    }
    g_free (pad_name);
}

void dynamic_decodepad (GstElement* object, GstPad* pad, gboolean arg1,gpointer user_data) {
    GstPad* videoconvertsink = gst_element_get_static_pad(video_convertor,"sink");
    if (gst_pad_can_link(pad,videoconvertsink)) {
        gst_pad_link(pad,videoconvertsink);
    }

    GstPad* audioconvertsink  = gst_element_get_static_pad(audio_convertor,"sink");
    if (gst_pad_can_link(pad,audioconvertsink)) {
        gst_pad_link(pad,audioconvertsink);
    }
} 
```

输出：

```
The thread 'Win32 Thread' (0x19c4) has exited with code 0 (0x0).
The thread 'Win32 Thread' (0x2370) has exited with code 0 (0x0).
The thread 'Win32 Thread' (0x2040) has exited with code 0 (0x0).
The program '[5368] GstProject2.exe: Native' has exited with code 0 (0x0). 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T09:49:19.433

最后，我能够使用以下代码播放 AVI 文件，该代码基于Gstreamer SDK 网站中的[此](http://docs.gstreamer.com/display/GstSDK/Basic+tutorial+3%3a+Dynamic+pipelines)示例。

在命令提示符下：选项 1：

```
gst-launch-0.10 filesrc location=C:\\Video.avi ! decodebin2 name=dec ! queue ! ffmpegcolorspace ! autovideosink dec. ! queue ! audioconvert ! audioresample ! autoaudiosink 
```

选项 2：

```
gst-launch-0.10 filesrc location=C:\\Video.avi ! decodebin2 name=dec ! ffmpegcolorspace ! autovideosink dec. ! audioconvert ! audioresample ! autoaudiosink 
```

选项 3：

```
gst-launch-0.10 uridecodebin uri=file:///C:/Video.avi name=dec ! ffmpegcolorspace ! autovideosink dec. ! audioconvert ! autoaudiosink 
```

在 Visual Studio 中：

```
#include <gst/gst.h>

/* Structure to contain all our information, so we can pass it to callbacks */
typedef struct _CustomData {
  GstElement *pipeline;
  GstElement *source;
  GstElement *convert;
  GstElement *audio_sink;
  GstElement *colorspace;
  GstElement *video_sink;
} CustomData;

/* Handler for the pad-added signal */
static void pad_added_handler (GstElement *src, GstPad *pad, CustomData *data);

int main(int argc, char *argv[]) {
  CustomData data;
  GstBus *bus;
  GstMessage *msg;
  GstStateChangeReturn ret;
  gboolean terminate = FALSE;

  /* Initialize GStreamer */
  gst_init (&argc, &argv);

  /* Create the elements */
  data.source = gst_element_factory_make ("uridecodebin", "source");
  data.convert = gst_element_factory_make ("audioconvert", "convert");
  data.audio_sink = gst_element_factory_make ("autoaudiosink", "audio_sink");
  data.colorspace = gst_element_factory_make ("ffmpegcolorspace", "colorspace");
  data.video_sink = gst_element_factory_make ("autovideosink", "video_sink");

  /* Create the empty pipeline */
  data.pipeline = gst_pipeline_new ("test-pipeline");

  if (!data.pipeline || !data.source || !data.convert || !data.audio_sink || !data.colorspace || !data.video_sink) {
    g_printerr ("Not all elements could be created.\n");
    return -1;
  }

  /* Build the pipeline. Note that we are NOT linking the source at this
   * point. We will do it later. */
  gst_bin_add_many (GST_BIN (data.pipeline), data.source, data.convert , data.audio_sink, data.colorspace, data.video_sink, NULL);
  if (!(gst_element_link (data.convert, data.audio_sink) && gst_element_link (data.colorspace, data.video_sink))) {
    g_printerr ("Elements could not be linked.\n");
    gst_object_unref (data.pipeline);
    return -1;
  }

  /* Set the URI to play */
  g_object_set (data.source, "uri", "file:///C:/Video.avi", NULL);

  /* Connect to the pad-added signal */
  g_signal_connect (data.source, "pad-added", G_CALLBACK (pad_added_handler), &data);

  /* Start playing */
  ret = gst_element_set_state (data.pipeline, GST_STATE_PLAYING);
  if (ret == GST_STATE_CHANGE_FAILURE) {
    g_printerr ("Unable to set the pipeline to the playing state.\n");
    gst_object_unref (data.pipeline);
    return -1;
  }

  /* Listen to the bus */
  bus = gst_element_get_bus (data.pipeline);
  do {
    msg = gst_bus_timed_pop_filtered (bus, GST_CLOCK_TIME_NONE, GST_MESSAGE_STATE_CHANGED | GST_MESSAGE_ERROR | GST_MESSAGE_EOS);

    /* Parse message */
    if (msg != NULL) {
      GError *err;
      gchar *debug_info;

      switch (GST_MESSAGE_TYPE (msg)) {
        case GST_MESSAGE_ERROR:
          gst_message_parse_error (msg, &err, &debug_info);
          g_printerr ("Error received from element %s: %s\n", GST_OBJECT_NAME (msg->src), err->message);
          g_printerr ("Debugging information: %s\n", debug_info ? debug_info : "none");
          g_clear_error (&err);
          g_free (debug_info);
          terminate = TRUE;
          break;
        case GST_MESSAGE_EOS:
          g_print ("End-Of-Stream reached.\n");
          terminate = TRUE;
          break;
        case GST_MESSAGE_STATE_CHANGED:
          /* We are only interested in state-changed messages from the pipeline */
          if (GST_MESSAGE_SRC (msg) == GST_OBJECT (data.pipeline)) {
            GstState old_state, new_state, pending_state;
            gst_message_parse_state_changed (msg, &old_state, &new_state, &pending_state);
            g_print ("Pipeline state changed from %s to %s:\n",
                gst_element_state_get_name (old_state), gst_element_state_get_name (new_state));
          }
          break;
        default:
          /* We should not reach here */
          g_printerr ("Unexpected message received.\n");
          break;
      }
      gst_message_unref (msg);
    }
  } while (!terminate);

  /* Free resources */
  gst_object_unref (bus);
  gst_element_set_state (data.pipeline, GST_STATE_NULL);
  gst_object_unref (data.pipeline);
  return 0;
}

/* This function will be called by the pad-added signal */
static void pad_added_handler (GstElement *src, GstPad *new_pad, CustomData *data) {
  GstPad *sink_pad_audio = gst_element_get_static_pad (data->convert, "sink");
  GstPad *sink_pad_video = gst_element_get_static_pad (data->colorspace, "sink");
  GstPadLinkReturn ret;
  GstCaps *new_pad_caps = NULL;
  GstStructure *new_pad_struct = NULL;
  const gchar *new_pad_type = NULL;

  g_print ("Received new pad '%s' from '%s':\n", GST_PAD_NAME (new_pad), GST_ELEMENT_NAME (src));

  ///* If our converter is already linked, we have nothing to do here */
  //if (gst_pad_is_linked (sink_pad)) {
  //  g_print ("  We are already linked. Ignoring.\n");
  //  goto exit;
  //}

  /* Check the new pad's type */
  new_pad_caps = gst_pad_get_caps (new_pad);
  new_pad_struct = gst_caps_get_structure (new_pad_caps, 0);
  new_pad_type = gst_structure_get_name (new_pad_struct);
  if (!g_str_has_prefix (new_pad_type, "audio/x-raw")) {
    g_print ("  It has type '%s' which is raw video. Connecting.\n", new_pad_type);
    /* Attempt the link */
    ret = gst_pad_link (new_pad, sink_pad_video);
    if (GST_PAD_LINK_FAILED (ret)) {
    g_print ("  Type is '%s' but link failed.\n", new_pad_type);
    } else {
    g_print ("  Link succeeded (type '%s').\n", new_pad_type);
    }
    goto exit;
  }

  /* Attempt the link */
  ret = gst_pad_link (new_pad, sink_pad_audio);
  if (GST_PAD_LINK_FAILED (ret)) {
    g_print ("  Type is '%s' but link failed.\n", new_pad_type);
  } else {
    g_print ("  Link succeeded (type '%s').\n", new_pad_type);
  }

exit:
  /* Unreference the new pad's caps, if we got them */
  if (new_pad_caps != NULL)
    gst_caps_unref (new_pad_caps);

  /* Unreference the sink pad */
  gst_object_unref (sink_pad_audio);
  gst_object_unref (sink_pad_video);
} 
```

# c - ld：未定义对符号“log2@@GLIBC_2.2.5”的引用

> ID：16006145
> 
> 赞同：35
> 
> 时间：2013-04-15T00:58:49.290
> 
> 标签：c, mpi, linker-errors

有什么问题

```
for (level = 1; level <= log2((double)size); level++)
                         ^ 
```

似乎它来自使用`log2()`，但有什么问题？我实际上将它与 OpenMPI 代码一起使用，但评论这一行可以解决问题。

**[完整来源](http://pastie.org/7559178)( [http://pastie.org/7559178](http://pastie.org/7559178) )**见第 40 行

```
[jiewmeng@JM Assign3]$ mpicc -o cpi cpi.c && mpirun -np 16 cpi
/usr/bin/ld: /tmp/cca9x4he.o: undefined reference to symbol 'log2@@GLIBC_2.2.5'
/usr/bin/ld: note: 'log2@@GLIBC_2.2.5' is defined in DSO /usr/lib/libm.so.6 so try adding it to the linker command line
/usr/lib/libm.so.6: could not read symbols: Invalid operation
collect2: error: ld returned 1 exit status 
```

似乎`log2(4)`可以工作，但我不能传入变量？

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2013-04-15T02:05:51.337

为了链接`libm`，您需要添加`-lm`参数，如本文档；[数学系Linux下的MPI](https://userpages.umbc.edu/~gobbert/mpi.html)说：

> 如果您的代码包含数学函数（如 exp、cos 等），则需要链接到数学库 libm.so。就像串行编译一样，这是通过在编译命令的末尾添加 -lm 来完成的，也就是说，
> 
> mpicc -o 示例 sample.c -lm

# android - Android 蓝牙服务器客户端应用程序

> ID：16006151
> 
> 赞同：0
> 
> 时间：2013-04-15T00:59:34.737
> 
> 标签：android, bluetooth, client-server

我正在尝试为 Android 手机编写服务器客户端蓝牙应用程序。我还指的是 SDK 中存在的 BluetoothChat 示例代码。

应用程序“服务器”将通过蓝牙连接向应用程序“客户端”发送一些数据。现在，在客户端没有任何用户干预的情况下，我想在我的客户端服务中处理这些数据并对其执行一些任务。我的问题是如何让客户端服务知道通过蓝牙接收的数据是为此服务的并处理它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T04:04:43.057

如果您检查 BluetoothChat 应用程序的代码，它具有唯一的 UUID 来侦听接受传入连接和建立传出连接。对于传入/传出连接，此 UUID 相同。MY_UUID = UUID.fromString("fa87c0d0-afac-11de-8a39-0800200c9a66");

# c++ - 无需借位的快速减法

> ID：16006153
> 
> 赞同：1
> 
> 时间：2013-04-15T01:00:16.703
> 
> 标签：c++, gcc, assembly

硬件或软件中是否有一种无需借位即可快速减去的方法？IE。`9 - 11 = 98` 我想在 C++ 中实现它，但内联汇编是一种选择。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T01:10:30.703

我想你想要`abs((X % 10) - (Y % 10))`

# perl - Perl 未初始化的警告

> ID：16006156
> 
> 赞同：2
> 
> 时间：2013-04-15T01:00:35.897
> 
> 标签：perl, unix

我有我的程序`keymap`（它实际上还没有映射任何键，目前只打印出它在十六进制中看到的内容）在这里：

```
#!/usr/bin/env perl

use strict;
use warnings;

use Term::ReadKey;
ReadMode 4;
END {
    ReadMode 0; # Reset tty mode before exiting
}

if ($ARGV[0] ~~ ["h", "-h", "--help", "help"]) {
    print "Usage: (h|-h|--help|help)|(code_in codes_out [code_in codes_out]+)\nNote: output codes can be arbitrary length";
    exit;
}

$#ARGV % 2 or die "Even number of args required.\n";

$#ARGV >= 0 or warn "No args provided. Output should be identical to input.\n";

my $interactive = -t STDIN;

my %mapping = @ARGV;

{
    local $| = 1;
    my $key;
    while (ord(($key = ReadKey(0))) != 0) {
        printf("saw \\x%02X\n",ord($key));
        if ($interactive and ord($key) == 4) {
            last;
        }
    }
} 
```

这是发生的事情：

```
slu@new-host:~/util 20:50:20
❯ keymap a b
saw \x61
saw \x62
saw \x04 
```

我在键盘上打字`a``b``Ctrl+D`。

```
slu@new-host:~/util 20:50:24
❯ echo "^D^Da" | keymap
No args provided. Output should be identical to input.
saw \x04
saw \x04
saw \x61
saw \x0A
Use of uninitialized value $key in ord at /Users/slu/util/keymap line 30. 
```

我想知道这是什么意思。这仅仅是Perl“不计算”循环条件作为“设置”的情况`$key`吗？我可以做些什么来抑制这里的警告吗？我知道`no warnings "uninitialized";`，我不想那样。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T01:06:35.790

有一个已知的错误，循环的条件表达式发出的警告`while`可能被错误地归因于在 while 条件之前评估的循环中的语句。

发出警告的代码实际上是`while`循环的条件，`ord(($key = ReadKey(0))) != 0`.

`ReadKey(0)`正在返回`undef`，而您正在尝试获取`ord`or 它。

```
while (1) {
    my $key = ReadKey(0);
    last if !defined($key) || ord($key) == 0;

    printf("saw \\x%02X\n",ord($key));

    last if $interactive and ord($key) == 4;
} 
```

# python - 使用 Python 镜像图像

> ID：16006157
> 
> 赞同：2
> 
> 时间：2013-04-15T01:00:38.260
> 
> 标签：python, opencv, image-processing

我需要水平翻转图片，**不使用反向功能**，我以为我做对了，但返回的图像只是图片的右下角，它没有翻转。

我的代码是

```
def Flip(image1, image2):
    img = graphics.Image(graphics.Point(0, 0), image1)
    X = img.getWidth()
    Y = img.getHeight()
    for y in range(Y):
        for x in range(X):
            A = img.getPixel(x,y)
            r = A[0]
            g = A[1]
            b = A[2]
            color = graphics.color_rgb(r,g,b)
            img.setPixel(X-x,y,color)
    img = graphics.Image(graphics.Point(0,0), image2)
    win = graphics.GraphWin(image2, img.getWidth(), img.getHeight())
    img.draw(win) 
```

我哪里做错了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T01:25:03.110

这里有一些我认为可以改进的地方：

```
def Flip(image1, image2):
    img = graphics.Image(graphics.Point(0, 0), image1)
    X = img.getWidth()
    Y = img.getHeight()
    for y in range(Y):
        for x in range(X):
            A = img.getPixel(x,y)
            r = A[0]
            g = A[1]
            b = A[2]
            color = graphics.color_rgb(r,g,b) 
```

这个任务可能更*pythonic*：

```
 r, g, b = img.getPixel(x,y)
            color = graphics.color_rgb(r,g,b)

            img.setPixel(X-x,y,color) 
```

`img`现在图像被翻转了一半。发生这种情况是因为您在同一图像源上编写内容，任何时候都会丢失旧内容，直到您到达中间。（请注意，这`X-x`会将图像大小增加 1 个像素。如果图像宽度为 100，在第一次迭代中`X-x = 100 - 0 = 100`，因为它从 0 开始，所以图像会变宽 1 个像素。）然后，您开始复制回来。此外，您不使用该内容是因为：

```
 img = graphics.Image(graphics.Point(0,0), image2) 
```

这就是问题所在：您只是覆盖了 的内容而`img`没有给予任何使用。之后：

```
 win = graphics.GraphWin(image2, img.getWidth(), img.getHeight())
    img.draw(win) 
```

这似乎与函数的目的（翻转图像）无关。我会做的是：

```
import graphics
import sys

def Flip(image_filename):
    img_src = graphics.Image(graphics.Point(0, 0), image_filename)
    img_dst = img_src.clone()
    X, Y = img_src.getWidth(), img_src.getHeight()
    for x in range(X):
        for y in range(Y):
            r, g, b = img_src.getPixel(x, y)
            color = graphics.color_rgb(r, g, b)
            img_dst.setPixel(X-x-1, y, color)

    return img_dst

if __name__ == '__main__':
    input = sys.argv[1] or 'my_image.ppm'
    output = 'mirror-%s' % input
    img = Flip (input)
    img.save(output) 
```

请注意，该功能`Flip`只负责翻转图像，在功能之外您可以做任何您需要图像的事情，正如您在“主”程序中看到的那样。

如果您只想使用一张图像，则可能且效率更高。为此，您可以使用相同的原则在变量之间交换值：

```
def Flip(image_filename):
    img = graphics.Image(graphics.Point(0, 0), image_filename)
    X, Y = img.getWidth(), img.getHeight()
    for x in range(X/2):
        for y in range(Y):
            r_1, g_1, b_1 = img.getPixel(x, y)
            color_1 = graphics.color_rgb(r_1, g_1, b_1)

            r_2, g_2, b_2 = img.getPixel(X-x-1, y)
            color_2 = graphics.color_rgb(r_2, g_2, b_2)

            img.setPixel(X-x-1, y, color_1)
            img.setPixel(x, y, color_2)

    return img 
```

# matlab - MATLAB - 将绘图像素化并制作成热图

> ID：16006158
> 
> 赞同：3
> 
> 时间：2013-04-15T01:00:42.013
> 
> 标签：matlab, heatmap

我有一个矩阵，其中包含 x 和 y 坐标以及每个数据点的温度值。当我在散点图中绘制它时，一些数据点会掩盖其他数据点，因此，该图不会真实表示我的数据集中温度如何变化。

为了解决这个问题，我想降低图形的分辨率并创建代表像素区域内所有数据点的平均温度的像素。另一种思考问题的方法是，我需要在当前绘图上放置一个网格并平均网格每个段内的值。

我找到了这个线程 - [Generate a heatmap in MatPlotLib using a scatter data set](https://stackoverflow.com/questions/2369492/generate-a-heatmap-in-matplotlib-using-a-scatter-data-set) - 它展示了如何使用 python 来实现我想要的最终结果。但是，我当前的代码在 MATLAB 中，即使我尝试了不同的建议，例如 heatmap、contourf 和 imagesc，我也无法得到我想要的结果。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-15T02:15:40.557

[您可以使用accumarray](http://www.mathworks.com.au/help/matlab/ref/accumarray.html)来“降低数据的分辨率”，您可以在其中指定每个点应该进入哪个输出“bin”，并指定您希望对该 bin 中的所有点取平均值。

一些示例数据：

```
% make points that overlap a lot
n = 10000
% NOTE: your points do not need to be sorted.
% I only sorted so we can visually see if the code worked,
% see the below plot
Xs = sort(rand(n, 1));
Ys = rand(n, 1);
temps = sort(rand(n, 1));

% plot
colormap("hot")
scatter(Xs, Ys, 8, temps) 
```

![绘制的原始点](https://i.stack.imgur.com/61XiF.jpg)

（我只是为了得到上面的条纹图案而排序，`Xs`以便`temps`我们可以直观地验证“降低分辨率”是否有效）

`0.05`现在，假设我想通过在 X 和 Y 方向上每单位只获得一个点来降低数据的分辨率，这是该正方形中所有点的平均值（所以由于我的`X`和`Y`从 0 到 1，我会得到共 20*20 分）。

```
% group into bins of 0.05
binsize = 0.05;

% create the bins
xbins = 0:binsize:1;
ybins = 0:binsize:1; 
```

我用来[`histc`](http://www.mathworks.com.au/help/matlab/ref/histc.html)计算每个 X 和 Y 所在的箱子（注意 - 在这种情况下，因为箱子是常规的，我也可以这样做`idxx = floor((Xs - xbins(1))/binsize) + 1`）

```
% work out which bin each X and Y is in (idxx, idxy)
[nx, idxx] = histc(Xs, xbins);
[ny, idxy] = histc(Ys, ybins); 
```

然后我用在每个 bin 内[`accumarray`](http://www.mathworks.com.au/help/matlab/ref/accumarray.html)做一个平均值：`temps`

```
% calculate mean in each direction
out = accumarray([idxy idxx], temps', [], @mean); 
```

（注意 - 这意味着 in 的点`temps(i)`属于行列处的“像素”（我们的输出矩阵）`idxy(1)`。`idxx(1)`我这样做`[idxy idxx]`是为了`[idxx idxy]`让结果矩阵有 Y == 行和 X == 列））

你可以像这样绘制：

```
% PLOT
imagesc(xbins, ybins, out)
set(gca, 'YDir', 'normal') % flip Y axis back to normal 
```

![分箱数据](https://i.stack.imgur.com/W9lYb.png)

或者像这样的散点图（我在“像素”的中点绘制每个点，并将原始数据点也画在上面进行比较）：

```
xx = xbins(1:(end - 1)) + binsize/2;
yy = ybins(1:(end - 1)) + binsize/2;
[xx, yy] = meshgrid(xx, yy);
scatter(Xs, Ys, 2, temps);
hold on;
scatter(xx(:), yy(:), 20, out(:)); 
```

![覆盖](https://i.stack.imgur.com/O0ryG.png)

# c - REDIS 无法查询特定条件

> ID：16006160
> 
> 赞同：1
> 
> 时间：2013-04-15T01:00:47.860
> 
> 标签：c, linux, redis

我要存储以下值：

```
subId 10 Recipient 999999999999 file /home/sach/ status 1. 
```

我使用 REDIS 来存储这些值。前任：

```
HMSET 1 subId 10 Recipient 999999999999 file /home/sach/ status 1 
```

但是对于 REDIS，我无法查询特定条件，因为 REDIS 只能使用关键字段进行查询。例如，我只需要查询`Recipient 988888888888`，但 REDIS 缺少这种查询。

除了 Mongo 和 Mysql 之外，还有其他简单的数据库可以存储这些类型的值吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T07:37:41.573

使用 Redis，您只需通过维护集合或哈希对象来手动处理二级索引。

添加对象时，通过管道处理以下查询：

```
HMSET 1 subId 10 Recipient 999999999999 file /home/sach/ status 1
SADD subId:10 1
SADD Recipient:999999999999 1
SADD file:/home/sach/ 1
SADD status:1 1 
```

如果您需要查询给定 subId 和收件人的项目：

```
SINTER subId:10 Recipient:999999999999 
```

然后你只需要一个额外的往返来获取与返回的 id 对应的数据。

实际上，许多分布式 NoSQL 存储，除了纯键/值存储（例如 memcached），可以处理二级索引（手动或自动）：Couchbase、CouchDB、Cassandra、Riak、Neo4j、OrientDB、Hyperdex、ArrangoDB 等。 ..

# ms-access - 与 MSAccess DB 的连接无法执行多个查询

> ID：16006162
> 
> 赞同：1
> 
> 时间：2013-04-15T01:01:02.260
> 
> 标签：ms-access, iis, windows-7, asp-classic, odbc

很长一段时间以来，我一直在新机器上设置我的第一个本地托管网站，老实说，我对现在配置的所有手动设置并不是很熟悉。我最后一次设置是在 Windows XP 机器上，当我启用 IIS 时它似乎“正常工作”。这次不是这样。

我最新的问题是连接到 MSAccess 数据库。我有一个非常基本的页面，其中包含一个输入的表单。我检查数据库以确保它尚未包含该值，如果没有，则将该值写入数据库。我收到以下错误：

```
Provider error '80004005'
Unspecified error
/trips/admin_add_hotel.asp, line 22 
```

我在网上进行了研究，一切似乎都表明这是一个权限问题。但是，我可以删除代码的第二部分（写作），页面将返回正常。如果我尝试再次运行页面或刷新，我会收到错误消息。这对我来说说用户具有读取权限。现在，我可以稍等片刻，删除代码的第一部分，然后写入数据库，它会正常工作。同样，对我来说，这意味着用户具有写访问权限。但是，如果我尝试再次运行它......同样的错误。

这是 ASP 代码：

```
<!--#include file="includefile.asp"-->
<%
if Request("action") = "submit" then
    'make sure hotel name is filled in
    if Request("fhotel") <> "" then
        fhotel = Request("fhotel")

        'make sure hotel doesn't already exist in DB
        sql = "SELECT hotel_id FROM hotels WHERE hotel_name = '" & Replace(fhotel, "'", "''") & "'"
        RS.Open sql, ConnectString
            if NOT RS.EOF then
                Session("msg") = "Hotel already exists"
            End if
        RS.Close

        'add hotel to DB
        if Session("msg") = "" then
            sql = "INSERT INTO hotels (hotel_name) VALUES ('" & Replace(fhotel, "'", "''") & "')"

            Conn.Open ConnectString
            Conn.Execute sql
            Conn.Close

            Session("msg") = "Hotel added successfully"
            fhotel = ""
        End if
    Else
        Session("msg") = "Hotel left blank"
    End if

    Set RS = Nothing
    Set Conn = Nothing

End if
%> 
```

我的包含文件是：

```
<%  
ConnectString = "DSN=ConnectionDSN; Uid=username; Pwd=password"

Set RS = Server.CreateObject("ADODB.Recordset")
Set Conn = Server.CreateObject("ADODB.Connection")
%> 
```

我的数据库有 1 个包含两列的表：

*   hotel_id [AUTONUMBER]
*   酒店名称 [文本 (255)]

这是我的系统详细信息：

*   Windows 7 Pro 64 位（尽管根据我在网上找到的内容已为 32 位设置了连接）
*   IIS 7.5

只是为了确保这不是权限问题，我暂时允许“所有人”用户完全访问该文件夹。

任何帮助表示赞赏。我相信这是我必须完全启动和运行的最后一个障碍。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T01:44:38.623

一些东西：

*   32 位与 64 位：绝对确保您的应用程序明确设置为 x86，而不是 AnyCPU。还要确保如果您使用的是较新的版本`.accdb`，则安装了 Access 数据库引擎驱动程序。

*   权限：正如 Dan Matheus 所说，确保运行 IIS 的进程对该文件夹具有写权限。*将其设置为Everyone*可能还不够，请确保您的 Web 应用程序实际上可以在该文件夹中创建一个文件（在您的代码中测试此假设）。

*   确保访问文件的连接字符串明确提及共享访问，而不是独占访问，否则，如果不同的进程具有

*   始终保持与数据库的连接打开，以避免快速创建/删除锁定文件时出现问题。
    Jet/ACE 数据库驱动程序需要在您每次访问文件时创建锁定文件（如果它处于共享模式）。当您的应用程序快速访问/释放数据库文件并且过于频繁地创建/删除锁定文件时，就会出现问题。
    首先它会大大降低你的性能，其次你会得到奇怪的错误。
    只需保持与数据库的连接打开，并在您的应用程序关闭时将其关闭。

有关上述要点的更多信息，请参见：

*   [OleDB 连接到 Microsoft Access 数据文件的间歇性“超出系统资源”异常](https://stackoverflow.com/questions/13484298/intermittent-system-resource-exceeded-exception-for-oledb-connection-to-micros/13485162#13485162)

# c - 为什么在函数调用中丢弃 volatile 限定符会发出警告？

> ID：16006165
> 
> 赞同：15
> 
> 时间：2013-04-15T01:01:46.997
> 
> 标签：c, warnings, volatile

（在我开始之前：我知道关于这个主题存在[现有](https://stackoverflow.com/questions/12163969/how-to-eliminate-the-discard-qualifier-warning) [问题](https://stackoverflow.com/questions/3303660/volatile-variables-as-argument-to-function)，但我没有找到答案*为什么*这是一个问题。我经常这样做，并想知道我是否正在制造潜在的问题。）

我很好奇为什么在函数调用中丢弃 volatile 限定符会引起编译器警告。

情况如下：

```
volatile uint8_t thingy;
void awesome_function(uint8_t *arg);

awesome_function(&thingy); << warning 
```

现在，我的理解是，`volatile`限定符将变量标记为可能以编译器无法控制的方式发生变化的变量。某些优化（最重要的是，根据我的经验，删除“未使用”变量）因此被禁用。

但是，如果我将变量标记为`volatile`，我会担心在*此范围内*阻止优化。如果我将变量传递给函数，我通常很乐意在该函数中应用标准优化。*

即使编译器想要从函数中删除变量（我通常试图避免的优化），情况也是如此，因为即使这样做，它也不影响我在*这个范围内*使用它；函数本身的（结果）是我感兴趣的序列点（和左值）。

那么，为什么丢弃与函数调用有关的限定符会发出警告，因为它不会在当前范围内启用重新排序？这是因为在被调用函数的范围内可能会重新排序，而变量不允许这样做`volatile`？如果是这样，为什么这是当前范围的问题？

(* 这通常是因为这样的调用用于启动异步操作，最终将在传递给函数的指针上进行操作。该函数可以对指针做任何它喜欢的事情，只要它最终按要求更新它。`volatile`限定符就在那里提醒编译器局部变量将异步更改。）

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-04-15T01:05:03.060

这里的警告是因为编译器假定当您拥有指向`volatile`指针对象的指针时，您真诚地相信指针值可能会从外部源更改。当您将此指针传递给请求指向非`volatile`对象的指针的函数时，编译器会警告您该函数调用可能会以无法正确考虑对象可能更改的事实的方式进行优化。

您肯定知道这样做是可以的这一事实意味着您可能想要放入一个可移除的显式强制转换`volatile`，例如这个：

```
awesome_function((uint8_t*) &thingy); 
```

这明确地告诉编译器“我知道我要`volatile`在这里删除，所以不要警告我。” 毕竟，警告的重点是您可能没有注意到这一点。

一个很好的类比是考虑`const`. 如果你有一个指向`const`对象的指针，你保证不会通过指针修改那个对象。如果您尝试将此指针传递给一个带有指向非`const`对象的指针的函数，您会收到警告，因为编译器注意到您可能会意外地通过函数更改值。进行显式强制转换是告诉编译器“是的，我知道这个指针不应该用来修改东西，但我保证我知道我在做什么”的一种方式。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-15T01:05:11.137

*原因*`volatile`不是为了防止优化。这是对 volatile 变量可能会*做的事情之一，但**原因*是向编译器表明该变量可能会在 C“虚拟机”的控制之外发生变化，因此它不应该对它做出太多假设.

为此，它是变量本身的属性，而不是所述变量的范围。

如果一个变量是易失的，传递一个指向该变量的指针并不会神奇地使它成为非易失的，它只是给你易失变量的地址。这是应该的。

如果您只想根据变量的范围选择优化，`volatile`则不是该工作的工具。您必须找到其他一些（可能是非标准的）方式，例如在演员阵容期间禁用该特定警告`#pragma warning`- 这当然取决于您的环境。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-06-26T22:03:56.913

`volatile`最初旨在防止优化或重新排序 I/O 读/写。

例如，如果一个循环将一个字节序列写入一个内存映射的 UART 发送寄存器，编译器默认显示为一个指定大小的内存位置，就像任何其他的一样：

*   如果这些写入不进入 I/O 寄存器，那么（通常）优化循环并**仅**将最后一个字节复制到该内存位置会非常有意义。或者，如果该位置没有外部可见性或读取访问权限，则完全优化写入。
*   然而，由于这**是**一个 I/O 寄存器，为了正确操作，需要写入每个字节**并且**写入按原始顺序进行。`"Test!"`“优化” to的串行输出`"!"`或重新排序 to不会有帮助`"!tseT"`。

另一个示例：在“等待时间 X”函数中读取实时时钟寄存器。如果允许编译器优化多次读取，它可以将 RTC 时间值读入寄存器一次，然后对于您的`waitUntilTime()`函数，它将永远是例如下午 1:00:04。

有关更多信息，请参阅[https://en.cppreference.com/w/cpp/language/cv](https://en.cppreference.com/w/cpp/language/cv)或 [https://en.cppreference.com/w/c/language/volatile](https://en.cppreference.com/w/c/language/volatile)

# hash - 方案高阶函数

> ID：16006167
> 
> 赞同：0
> 
> 时间：2013-04-15T01:01:54.010
> 
> 标签：hash, lisp, scheme

给定一个函数的骨架：

```
(define gen-hash-division-method (lambda (size))) 
```

也：

```
(define hash-1 (gen-hash-division-method 701)) 
```

我编码的内容：

```
(define gen-hash-division-method 
  (lambda (size)
   (lambda (w) 
    (modulo key(flip(w)) size)))) 
```

key(flip(w)) 接受一个列表 w 并返回一个整数。

并调用：

```
(hash-1 '(h e l l o)) 
```

我不断收到此错误：

```
procedure application: expected procedure, given: (h e l l o) (no arguments) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-15T01:21:19.223

您收到错误是因为在 Scheme 中`(w)`期望`w`是一个函数。但`w`只是一个符号列表。

在你的情况下，你有`key(flip(w))`这在计划土地上没有意义。

*一切都被括号包围*

你要`(key (flip w))`

记住 lisp 的口头禅：`(function args ...)`

# javascript - Jumpy Tweet 按钮和 Like 按钮 - 隐藏直到满载？

> ID：16006173
> 
> 赞同：0
> 
> 时间：2013-04-15T01:02:16.860
> 
> 标签：javascript, jquery, html, facebook, twitter

[http://screencast.com/t/qDxr1p7bFp](http://screencast.com/t/qDxr1p7bFp)

社交按钮跳来跳去，直到满载。

此影片剪辑显示了社交按钮在加载时的跳跃行为。这发生在最新版本的 Chrome、Firefox 和 IE 上。通过 bootstrap-sass gem 使用 Twitter 引导 css。

无论如何要隐藏它们直到它们完成加载？

```
<div class="social-bar">
 <div class="container">
   <ul class="social-buttons">
        <li class="fb-button">
            <fb:like send="false" layout="button_count" width="450" show_faces="false"></fb:like>
        </li>
        <li class="tw-button">
            <a href="https://twitter.com/share" class="twitter-share-button" data-via="adtechkyushu" data-hashtags="adtech9" data-dnt="true">Tweet</a>
        </li>
   </ul>
  </div>
</div> 

<script src="http://code.jquery.com/jquery-latest.js"></script>
<script src="http://netdna.bootstrapcdn.com/twitter-bootstrap/2.1.1/js/bootstrap.min.js" type="text/javascript"></script>
<script src="http://connect.facebook.net/en_GB/all.js#xfbml=1"></script>
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T01:06:31.653

尝试将它们隐藏在 CSS ( `.social-buttons { opacity: 0; }`) 中，并添加以下内容：

```
$(document).load(function() {
    $(".social-buttons").css("opacity", "1");
}); 
```

它将等到所有元素都加载并再次显示社交按钮。`display: none;`您也可以尝试在 CSS 和jQuery 中摆弄`show()`，尽管第二种方式可能会导致您的页面布局在执行该函数后发生变化。

# iphone - 我网站上的提交按钮在 iphone/ipad 上不起作用

> ID：16006174
> 
> 赞同：1
> 
> 时间：2013-04-15T01:02:20.297
> 
> 标签：iphone, button, submit

我似乎无法让我的提交按钮在 iphone/ipad 上工作。它以前工作过，有人知道他们是否更改了安全设置吗？

任何建议都会很棒：

```
input type=submit value="Send In" onClick="MM_validateForm('Points','','RinRange1:999');return document.MM_returnValue"> 
```

# html - 强制开始页面或单个入口点

> ID：16006189
> 
> 赞同：0
> 
> 时间：2013-04-15T01:04:13.167
> 
> 标签：html

我有一个 Web 应用程序，我想强制用户登录，然后才能访问任何其他页面。我已经设置了登录并且它正在工作，但我无法弄清楚如何通过在后续访问中传递登录来阻止它们。

例如，他们保存了指向 main.html 的链接，所以我没有对他们进行身份验证。想法？？

谢谢约翰

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T01:10:06.923

出于身份验证的目的，您永远不应该只进行客户端验证。在客户端，您无能为力，因为用户可以进入并更改您的代码。

处理此问题的正确方法是结合设置 cookie 进行服务器端检查（使用 PHP、ASP.NET...）

请让我们知道您在服务器端使用的技术（如果有）

# java - 看不懂 CYK 算法伪代码

> ID：16006194
> 
> 赞同：5
> 
> 时间：2013-04-15T01:04:35.313
> 
> 标签：java, algorithm, parsing, cyk

我正在阅读有关[CYK 算法](https://en.wikipedia.org/wiki/CYK_algorithm)的内容，其中一部分伪代码我无法理解。整个伪代码是：

```
let the input be a string S consisting of n characters: a1 ... an.
let the grammar contain r nonterminal symbols R1 ... Rr.
This grammar contains the subset Rs which is the set of start symbols.
let P[n,n,r] be an array of booleans. Initialize all elements of P to false.
for each i = 1 to n
  for each unit production Rj -> ai
    set P[i,1,j] = true
for each i = 2 to n -- Length of span
  for each j = 1 to n-i+1 -- Start of span
    for each k = 1 to i-1 -- Partition of span
      for each production RA -> RB RC
        if P[j,k,B] and P[j+k,i-k,C] then set P[j,i,A] = true
if any of P[1,n,x] is true (x is iterated over the set s, where s are all the indices for Rs) then
  S is member of language
else
  S is not member of language 
```

这些部分是我感到困惑的：

```
 for each production RA -> RB RC
      if P[j,k,B] and P[j+k,i-k,C] then set P[j,i,A] = true 
```

有人会对这些伪代码给出一些提示吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T01:10:01.260

伪代码

> 对于每个产生式 R [A] → R [B] R [C]：
> 
> 如果 P[j,k,B] 和 P[j+k,ik,C] 则设置 P[j,i,A] = true

应按以下方式解释。假设 P[j, k, B] 为真。这意味着由从位置 j 开始的 k 个字符组成的字符串可以从非终结符 R [B]派生。如果 P[j + k, i - k, C] 也是如此，则从位置 j + k 开始的 i - k 个字符形成的字符串可以从非终结符 R [C]导出。因此，由于 R [A] → R [B] R [C]是一个产生式，因此从位置 j 开始的 i 个字符组成的字符串可以从 R [A]导出。

我认为将伪代码解释为

> 对于每个产生式 R [A] → R [B] R [C]：
> 
> 如果 P[j,k,B] == true 且 P[j+k,ik,C] == true，则设置 P[j,i,A] = true

希望这可以帮助！

# sql-server - 如何在 SQL Server 中获取子字符串？

> ID：16006195
> 
> 赞同：4
> 
> 时间：2013-04-15T01:04:55.993
> 
> 标签：sql-server, tsql, substring

我有下一张表，如何在点（。）特殊字符之前和之后获取子字符串？

```
MyTable
------------------------------
Id    Description
------------------------------
 1   [Hugo].[date].[Subtotal]
 2   [Juan].[date].[Subtotal]
 3   [7/23/2013].[SubTotal]
 4   [7/25/2013].[Total] 
```

我正在寻找以下结果

```
 MyResultTable
    ------------------------
    MyTableId Description    depth
    -----------------------
      1       [Hugo]           1
      1       [date]           2
      1       [Subtotal]       3
      2       [Juan]           1
      2       [date]           2
      2       [Subtotal]       3
      3       [7/23/2013]      1
      3       [SubTotal]       2
      4       [7/25/2013]      1
      4       [Total]          2 
```

我想将点（。）之后的单词分开并将单词列出如下表我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T01:16:01.727

您将希望根据`.`. 您可以使用递归 CTE 来拆分数据并返回深度：

```
;with cte (id, DescriptionItem, Description, depth) as
(
  select id,
    cast(left(Description, charindex('.',Description+'.')-1) as varchar(50)) DescriptionItem,
         stuff(Description, 1, charindex('.',Description+'.'), '') Description,
    1 as depth
  from MyTable
  union all
  select id,
    cast(left(Description, charindex('.',Description+'.')-1) as varchar(50)) DescriptionItem,
    stuff(Description, 1, charindex('.',Description+'.'), '') Description,
    depth+1
  from cte
  where Description > ''
) 
select id, DescriptionItem, depth
from cte
order by id, depth; 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/70da9/1)

或者您可以使用拆分数据的 UDF 函数：

```
create FUNCTION [dbo].[Split](@String varchar(MAX), @Delimiter char(1))       
returns @temptable TABLE (items varchar(MAX), depth int)       
as       
begin      
    declare @idx int       
    declare @slice varchar(8000) 
    declare @depth int = 1

    select @idx = 1       
        if len(@String)<1 or @String is null  return       

    while @idx!= 0       
    begin       
        set @idx = charindex(@Delimiter,@String)       
        if @idx!=0       
            set @slice = left(@String,@idx - 1)       
        else       
            set @slice = @String       

        if(len(@slice)>0)  
            insert into @temptable(Items, depth) values(@slice, @depth)       

        set @String = right(@String,len(@String) - @idx) 
        set @depth = @depth +1
        if len(@String) = 0 break       
    end   
return 
end; 
```

然后当你调用该函数时，你会使用`CROSS APPLY`类似这样的：

```
select t.id, c.items description,
  c.depth
from mytable t
cross apply dbo.split(t.description, '.') c
order by t.id, c.depth; 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/0f595/3)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T02:42:52.547

```
 USE tempdb;
     GO
     IF OBJECT_ID('dbo.csv_split','U') IS NOT NULL DROP TABLE dbo.csv_split;
     CREATE TABLE dbo.csv_split
     (
     Id INT NOT NULL PRIMARY KEY
     ,Description VARCHAR(100)
     )
     INSERT INTO dbo.csv_split(Id,Description)
     VALUES
     (1,'[Hugo].[date].[Subtotal]')
    ,(2,'[Juan].[date].[Subtotal]')
    ,(3,'[7/23/2013].[SubTotal]')
    ,(4,'[7/25/2013].[Total]');

    WITH cte_xml AS
    (
    Select  csv.Id
            ,CONVERT(XML,'<desc>'
            + REPLACE(csv.Description,'.','</desc><desc>')
            + '</desc>') AS xml_desc
    From    dbo.csv_split csv
    )

    ,cte_shred_xml AS
    (
    Select      t.Id
                ,xml_desc_nodes.value('(.)','varchar(50)') AS Description
                ,ROW_NUMBER() OVER(PARTITION BY t.Id ORDER BY t.Id ) AS Depth
    From        cte_xml t
    CROSS APPLY t.xml_desc.nodes('/desc') AS t2(xml_desc_nodes)
    )

    Select  *
    From    cte_shred_xml 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T01:42:23.753

这是一个简单的例子。我将您的表创建为@test，并在游标中使用了游标和循环。

```
DECLARE @test TABLE ( id INT, NAME VARCHAR(MAX) )

INSERT  @test
VALUES  ( 1, '[Hugo].[date].[Subtotal]' )
INSERT  @test
VALUES  ( 2, '[Juan].[date].[Subtotal]' )
INSERT  @test
VALUES  ( 3, '[7/23/2013].[SubTotal]' )
INSERT  @test
VALUES  ( 4, '[7/25/2013].[Total]' ) 

DECLARE @id INT ,
    @name VARCHAR(MAX)
DECLARE @values TABLE
(
  MyTableId INT ,
  Description VARCHAR(MAX) ,
  Depth INT
)

DECLARE @v VARCHAR(2000) ,
@i INT ,
@depth INT

DECLARE @MyTableList CURSOR 
SET 
@MyTableList = CURSOR FOR SELECT id, name FROM @test
OPEN @MyTableList 
FETCH NEXT FROM @MyTableList INTO @id, @name
WHILE @@FETCH_STATUS = 0 
BEGIN
    SET @depth = 1      
    SET @i = PATINDEX('%.%', @name)
    WHILE @i > 0 
        BEGIN
            INSERT  @values
            VALUES  ( @id, SUBSTRING(@name, 1, @i - 1), @depth )
            SET @name = SUBSTRING(@name, @i + 1, LEN(@name) - @i)
            SET @i = PATINDEX('%.%', @name)         
            SET @depth = @depth + 1 
        END
    INSERT  @values
    VALUES  ( @id, @name, @depth )
    FETCH NEXT FROM @MyTableList INTO @id, @name
END

SELECT  MyTableId ,
    Description ,
    Depth
FROM    @values 
```

你的输出应该是这样的。

```
MyTableId   Description Depth
1   [Hugo]  1
1   [date]  2
1   [Subtotal]  3
2   [Juan]  1
2   [date]  2
2   [Subtotal]  3
3   [7/23/2013] 1
3   [SubTotal]  2
4   [7/25/2013] 1
4   [Total] 2 
```

# ios - 在数字类型的输入中使用货币符号和逗号

> ID：16006202
> 
> 赞同：3
> 
> 时间：2013-04-15T01:05:15.910
> 
> 标签：ios, validation, keyboard, mobile-safari

用于输入美元货币值的最佳 iOS 键盘（如下图所示）包括数字 0-9、十进制符号、逗号符号和美元符号。据我所知，在 Mobile Safari 上*获取*此键盘的唯一方法是使用`<input type="number">`.

`number`不幸的是，iOS 目前有对输入类型的内置验证，可以屏蔽逗号和美元符号。由于此验证“功能”嵌入在浏览器中，而 Mobile Safari 尚未实现该`novalidate`指令，因此目前无法手动进行此验证。

使用`<input type="text">`显然可以解决验证问题，但它也会调出常规的字母键盘，这对于我当前的项目（财务计算器）来说是不可接受的。

我即将做一些疯狂的事情，比如使用 JavaScript在接收焦点后快速切换`type`from 。我在这里抓着稻草。有任何想法吗？`number``text``input`

![在此处输入图像描述](https://i.stack.imgur.com/eycpY.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T06:29:09.857

目前，JavaScript 是唯一的解决方案。这是最简单的方法（使用 jQuery）：

**HTML**

```
<input type="text"> 
```

**JavaScript**

```
$('input[type="text"]').on('touchstart', function() {
  $(this).attr('type', 'number');
});

$('input[type="text"]').on('keydown blur', function() {
  $(this).attr('type', 'text');
}); 
```

这个想法很简单。输入以 开始并以 结束`type="text"`，但它短暂地变为`type="number"`事件`touchstart`。这会导致出现正确的 iOS 键盘。一旦用户开始输入任何输入或离开该字段，输入就会`type="text"`再次变为，从而绕过验证。

这种方法有一个缺点。当用户返回到已填写的输入时，输入将丢失（如果未验证）。这意味着用户将无法返回并编辑以前的字段。在我的情况下，这并不是那么糟糕，因为用户可能希望一遍又一遍地使用不同的值的计算器，因此自动删除输入将节省他们几个步骤。但是，这可能并非在所有情况下都是理想的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T02:32:10.490

您可以`pattern`将输入字段的属性用作文本。这指示移动 Safari 调出数字键盘。尝试以下方式：

```
<input type="text" pattern="\d*" /> 
```

只需将您的模式正则表达式更改为您想要的。

这是[有关模式属性的更多信息](http://www.w3.org/TR/html-markup/input.text.html#input.text.attrs.pattern)

**更新** 阅读[Apple 的关于在 Webviews 中管理文本的文档](https://developer.apple.com/library/ios/#documentation/StringsTextFonts/Conceptual/TextAndWebiPhoneOS/KeyboardManagement/KeyboardManagement.html#//apple_ref/doc/uid/TP40009542-CH5-SW12)后，您似乎不走运了。你将不得不做一些 javascript 魔术来做你想做的事。

# javascript - 在 HTML5 中使用 drawImage

> ID：16006210
> 
> 赞同：0
> 
> 时间：2013-04-15T01:07:25.060
> 
> 标签：javascript, html, html5-canvas

事实：以下代码是有效的。

```
var img = new Image();
img.onload = function() {
    context.drawImage(img, 32, 32);
};
img.src = "example.png"; 
```

第一次观察：以下内容不会绘制到画布上。

```
var img = new Image();
img.src = "example.png";
context.drawImage(img, 32, 32); 
```

第二次观察：以下将绘制到画布（最终）......

```
var img = new Image();
img.src = "example.png";
setInterval(function() {context.drawImage(img, 32, 32);}, 1000); 
```

* * *

为什么我需要在回调中调用 drawImage 函数？如果是这样，为什么嵌套在 setInterval 函数中时它最终会起作用？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-15T01:09:58.980

当您设置`src`图像对象的 时，浏览器开始下载它。但是您可能会也可能不会在浏览器执行下一行代码时加载该图像。这就是您绘制“空白”图像的原因，因为它尚未加载。

您需要放置一个`onload`处理程序以了解图像何时完成加载。只有这样你才能将它绘制到画布上：

```
var img = new Image();             //create image object
img.onload = function(){           //create our handler
  context.drawImage(img, 32, 32);  //when image finishes loading, draw it
}
img.src = "example.png";           //load 'em up! 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T01:10:43.793

您只能在加载后将图像绘制到画布上，这就是从 onload 回调中执行此操作的原因。它与 setInterval 一起工作，因为在一定时间后，它最终会完全加载。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T01:10:07.077

我相信这是因为加载图像不是即时的，它需要时间。加载图像后，可以将其绘制到画布上

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-15T01:12:55.353

这是必需的，因为浏览器需要“读取”并最终下载图像（onload 事件）以正确处理图像加载。使用 setInterval 来模拟这种行为是行不通的，例如在慢速连接上加载大图像......所以最好的方法是：

```
var img = new Image():
img.src = "image.jpeg";
img.onload = function() {
    // Now you can play with your image.
} 
```

# apache-flex - 如何完全退出 Flex 4.6 Air 移动 Android 应用程序？

> ID：16006213
> 
> 赞同：1
> 
> 时间：2013-04-15T01:07:43.577
> 
> 标签：apache-flex, flex4.6, flex-mobile

我一直在尝试添加一个按钮以正确退出使用 Flex 4.6 构建的 Android 应用程序。我使用了命令**NativeApplication.nativeApplication.exit();** 这似乎在模拟器上工作，并杀死了模拟器。

当我在设备上运行它时，它并没有退出，它实际上似乎进入了应用程序的启动（我的登录屏幕），这有点奇怪。

我假设系统范围内的某些东西正在使应用程序处于进程中或重新启动它。有人有这方面的经验吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-15T19:42:14.407

该代码应该可以工作。我在我的 android flex 应用程序中使用它没有问题。应用程序正确退出，我回到主屏幕。你用的是什么版本的安卓？当我这样做时，我使用的是 2.3。如果您让它在调试模式下运行，您是否看到任何错误输出到控制台？使用调试器还可以让您查看它是否没有正确退出或在退出时重新启动（如果是这种情况，您会再次看到启动屏幕）

# c# - 玩家和敌人子弹之间的碰撞？

> ID：16006214
> 
> 赞同：1
> 
> 时间：2013-04-15T01:07:46.757
> 
> 标签：c#, xna, xna-4.0, visual-c#-express-2010

我正在编写一种子弹地狱游戏，我编写了代码来检测碰撞，它确实有效，但我认为有一种更简单的方法可以做到这一点。让我解释。

在代码中，有一个 GameScreen，它创建了 Player Class 和 Enemy Class 的实例。

那个 Enemy 类创建了一个 Bullet Pattern 类的实例，而 Bullet Pattern 是实例化子弹的类。不使用敌人类生成它们的原因是一个敌人可以有多个模式。

因此，Bullet Pattern 类是包含屏幕上的项目符号列表的类。因此，为了检查碰撞，GameScreen 有一个方法，它获取玩家位置（和碰撞器半径）并调用与敌人的碰撞检查，如果没有与敌人碰撞，则调用碰撞检查模式，它检查与子弹的碰撞。

游戏画面检查碰撞：

```
private void CheckCollision()
{
    Vector2 playerPos = player.GetPosition();
    float colSize = player.GetColliderSize();
    bool isColliding = testEnemy.CheckCollision(playerPos, colSize);
    if (isColliding) //If collides, the player do what it should do.
    {
        player.Collide();
    }
} 
```

Enemy CheckCollision，它检查它是否与敌人发生碰撞，如果没有，则调用模式方法：

```
 public bool CheckCollision(Vector2 playerPos, float colSize)
    {
        float distance = Game1.DistanceBetween(playerPos, position);
        float minDistance = colSize + colliderSize;
        bool collision = distance <= minDistance;
        if (collision)
        {
            return collision;
        }
        collision = patterns[actualPattern].CheckCollision(playerPos, colSize);
        return collision;
    } 
```

模式检查碰撞：

```
 public bool CheckCollision(Vector2 playerPos, float colSize)
    {
        //The pattern can have Sub Patterns, wich is the same pattern class...
        for (byte i = 0; i < subPatterns.Count; i++)
        {
            subPatterns[i].CheckCollision(playerPos, colSize);
        }
        for (int i = 0; i < bullets.Count; i++)
        {
            Vector2 bulletPos = bullets[i].GetPosition();
            float bulletSize = bullets[i].GetColliderSize();
            float distance = Game1.DistanceBetween(playerPos, bullets[i].position);
            float minDistance = colSize + bulletSize;
            if (distance <= minDistance)
            {
                return true;
                break;
            }
        }
        return false;
    } 
```

正如我所说，它确实有效，但我知道有一种更简单的方法可以做到这一点......所以问题实际上是两个：

1.  有没有更简单的方法来进行碰撞检查？
2.  有没有办法让 GameScreen 直接从模式中访问项目符号列表？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T02:06:25.710

有很多方法可以检测碰撞，而无需遍历每个游戏对象。

1.  四叉树 ( [http://en.wikipedia.org/wiki/Quadtree](http://en.wikipedia.org/wiki/Quadtree) )
2.  基于网格的碰撞检查，游戏被划分为多个网格，整个碰撞检测是通过迭代不同的网格来完成的。

还有其他我不知道的方法。除此之外，您还需要确定碰撞检测是`continuous`还是`discrete`，特别是在使用子弹时，因为它们是快速移动的物体。

至于 GameScreen 访问这些子弹的方式，请使用 GameObjectManager 来跟踪游戏中的所有对象。将该类作为单例实例保存在游戏注册表中，以便轻松跟踪需要不断更新的元素。

# apache - error.log 中列出的缺失文件

> ID：16006217
> 
> 赞同：0
> 
> 时间：2013-04-15T01:08:40.850
> 
> 标签：apache, http, web, server-side, dreamhost

今天我在我的网络主机上偶然发现了一个名为“error.log”的文件夹。我想我会看看。

我看到多个“文件不存在”错误 - 条目分为三种类型：

*   机器人.txt
*   缺少.html
*   苹果触摸图标precomposed.png

我对这些文件的用途有一些猜测，但想明确知道：

*   有问题的文件是什么？
*   我应该将它们添加到我的服务器吗？
*   什么提示要为这些写入错误日志？是有人明确要求他们吗？如果是这样，谁以及如何？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T01:58:52.143

网络`robots.txt`爬虫/机器人读取文件以允许/禁止它在您的服务器上抓取资源。然而，机器人读取这个文件不是强制性的，但是好的机器人可以。[在http://en.wikipedia.org/wiki/Robots.txt](http://en.wikipedia.org/wiki/Robots.txt)有一些进一步的示例示例文件可能看起来像并且将驻留在 Web 根目录中：

```
User-agent: *   # All robots
Disallow: /     # Do not enter website 
```

或者

```
User-Agent: googlebot   # For this robot
Disallow: /something    # do not enter 
```

`apple-touch-icon-precomposed.png`解释[https://stackoverflow.com/a/12683605/722238](https://stackoverflow.com/a/12683605/722238) _

我相信`missing.html`某些人将其用作定制的 404 页面。机器人可能被配置为抓取此文件，因此请求它。

如果你想控制机器人从你的服务器上刮下的资源，你应该添加一个 robots.txt 文件。如前所述，机器人读取此文件不是强制性的。

但是，如果您想添加其他两个文件以删除错误消息，那么我认为没有必要。没有什么可以说 joe_random 不会在您的服务器上发出请求，`/somerandomfile.txt`在这种情况下，您将收到另一个不存在的另一个文件的错误消息。然后，您可以将它们重定向到自定义的 404 页面。

# yii - 如何更改 yiibooster yiibootsrap 固定容器宽度

> ID：16006218
> 
> 赞同：0
> 
> 时间：2013-04-15T01:08:52.377
> 
> 标签：yii

我在 yii 框架中使用 yiibooster 和 yiibootsrap。我不希望网站响应，所以我将响应设置为 false。问题是默认容器宽度太小，940px。我想将其更改为 1045 像素。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T09:38:07.983

您可以在此处更改`width`设置：`protected/extensions/bootstrap/assets/css/bootstrap.css`

```
.container,
.navbar-static-top .container,
.navbar-fixed-top .container,
.navbar-fixed-bottom .container {
  width: 940px;
} 
```

或者，这就是我目前正在做的事情，您可以覆盖布局中的 CSS。在我`protected/views/layouts/main.php`的容器中，我添加了这种样式，`div`如下所示：

```
<div class="container" id="page" style="width:99%;"> 
```

希望其中一个选项对您有用...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-24T12:02:16.053

CSS 位于 \protected\extensions\bootstrap\assets\bootstrap\css\bootstrap.no-responsive.css

如果你仔细看css，你会发现css中有几个940px被硬编码的地方。这就是您获得 940 像素的方式。

您可以编辑它，但出于两个原因，我强烈反对这样做。首先，非常不鼓励破解标准代码。最好用你的主题 css 覆盖它。其次，还有其他 css 元素与 940px 相关联。更改容器 css 中的 940px 可能会破坏其他 css。为了克服这个问题，打开响应式css，即\protected\extensions\bootstrap\assets\bootstrap\css\bootstrap.css

搜索单词@media

继续搜索直到找到@media (min-width: 1200px) {

大括号中包含的是与容器大小相关的 css 元素。复制它们并将它们放在非响应文件的末尾（或者更好地放在主题 css 中）。

谢谢

# asynchronous - 使用 Windows Phone 的地理定位，等待错误

> ID：16006219
> 
> 赞同：0
> 
> 时间：2013-04-15T01:08:52.723
> 
> 标签：asynchronous, geolocation, windows-phone-8, async-await

我正在尝试获取用户的当前位置，但代码显示错误...

```
// try get user location
Geolocator geo = new Windows.Devices.Geolocation.Geolocator();
geo.DesiredAccuracyInMeters = 10;
try {
    Geoposition position = await geo.GetGeopositionAsync();
} catch (Exception e) { } 
```

我的问题是编译器在`await geo.GetGeopositionAsync();`

> 'await' 运算符只能在其包含方法或 lambda 表达式用 'async' 修饰符标记时使用。

但据我所见，这与[微软显示的代码相同](http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj206956%28v=vs.105%29.aspx)

我已经重新启动了 VS12 和 pc（这是一个 VM，但仍然存在）并且错误仍然在这里......出了什么问题？

我也试试这个，仍然得到同样的错误：

```
 Geoposition position = await geo.GetGeopositionAsync().asTask<Geoposition>(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T01:11:53.853

您需要使用异步标记您的方法：

```
void **async** themethod()
    {
    // try get user location
    Geolocator geo = new Windows.Devices.Geolocation.Geolocator();
    geo.DesiredAccuracyInMeters = 10;
    try {
        Geoposition position = await geo.GetGeopositionAsync();
    } catch (Exception e) { }
} 
```

# java - 在 JSP 中格式化 HTML

> ID：16006220
> 
> 赞同：3
> 
> 时间：2013-04-15T01:09:22.850
> 
> 标签：java, html, jsp, jakarta-ee

我对 Java 很陌生，如果我的措辞不正确，我提前道歉。我有一个小代码片段，它有多个开始和结束分隔符，因为我有一些与 JSP 混合的 HTML。如果没有 HTML，这可以在几行代码中完成，但我需要 HTML 来呈现，它会导致几乎双倍的代码行。我想知道是否有更好的方法来做到这一点，而不是有这么多的打开和关闭分隔符。我知道我可以使用模板库，但我试图远离它，并希望尽可能在 JSP（而不是单独的类）中执行此操作。谢谢您的帮助！

```
<%
try {
  List<Page> children = properties.getPath("getChild", "");    
%>    
  <ul>       
<%      
  for (Page children : e) {
    if (children != null) {         
%>
   <li><a href="#">Show a link</a></li>
<%
   }//end if statement
  }//end for loop
%>
  <li><a href="<%= currentPage.getPath() %>" href="<%= currentPage.getPath() %>">Another link goes here</a></li>    
  </ul>
<% 
} catch (NullPointerException e){
%>
//show some content here
<% } %> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T01:37:02.517

使用 JSTL 而不是 JSP 中的所有 Java 代码。您可以在此处阅读 JSTL - [http://docs.oracle.com/javaee/5/tutorial/doc/bnakc.html](http://docs.oracle.com/javaee/5/tutorial/doc/bnakc.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-15T01:37:05.023

我认为这种问题可以通过使用模板库或框架的包含视图约定来真正解决。

创建这些库是为了解决这类问题并将视图组织为一个整体。它不仅会清除您视图中的混乱，而且还会遵循 MVC 模式。

例如，在struts中，我们会做这样的事情：

```
<s:textfield name="myParameter" /> 
```

和这个：

```
<html:link page="/linkoutput.jsp" paramId="id" paramName="name"/> 
```

**有关您应该**使用模板或框架的更多原因，请访问[此问题](https://stackoverflow.com/questions/3168559/why-would-i-use-a-templating-engine-jsp-include-and-jstl-vs-tiles-freemarker)。正如戴夫牛顿所说：

> 试图在 jsp 中完成这一切恰恰是错误的做法。

希望这可以清除它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-15T01:33:29.620

1.  永远不要仅仅为了赶上 NPE 而赶上 NPE。

2.  考虑使用 JSTL [http://jstl.java.net/getStarted.html](http://jstl.java.net/getStarted.html) 它为迭代等提供了大量的标签。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-16T08:18:46.123

使用 JSF 之类的东西会更好。就像 JSP 一样，它也包含在 Java EE 中。

# javascript - 钛启动和停止声音

> ID：16006226
> 
> 赞同：1
> 
> 时间：2013-04-15T01:10:06.420
> 
> 标签：javascript, titanium, titanium-mobile

我有这个在 Javascript 中工作，但似乎无法让它在 Titanium 上工作。

这是代码：

```
var index = 0;
var i = 0;

// Filename
var wordSoundArray = [];

wordSoundArray.push('audio/the.mp3');
wordSoundArray.push('audio/of.mp3');
wordSoundArray.push('audio/and.mp3');
wordSoundArray.push('audio/a.mp3');
wordSoundArray.push('audio/to.mp3');
wordSoundArray.push('audio/in.mp3');
wordSoundArray.push('audio/is.mp3');
wordSoundArray.push('audio/you.mp3');
wordSoundArray.push('audio/that.mp3');
wordSoundArray.push('audio/it.mp3');
wordSoundArray.push('audio/he.mp3');
wordSoundArray.push('audio/was.mp3');
wordSoundArray.push('audio/for.mp3');
wordSoundArray.push('audio/on.mp3');
wordSoundArray.push('audio/are.mp3');

newWordBtn.addEventListener("click", function(e){
    wordLabel.text = newWordArray[i++];
    if (i === newWordArray.length)
            i = 0;

    var snd = Titanium.Media.createSound({url:wordSoundArray[index++]});
    if (index === wordSoundArray.length)
            index = 0;
    if (snd.isPlaying()) {
        snd.stop();
        snd.play();
    } else {
        snd.play();
    }

}); 
```

当用户按下按钮时，他们会得到一个新单词以及与该单词相关的声音。但是，如果用户在声音完成之前按下按钮，它只会启动新声音并且它们相互重叠。这就是代码的 snd.isPlaying 部分出现的地方。我很确定我的错误在那里。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T03:02:21.307

所以你实际上在这里有死代码：

```
var snd = Titanium.Media.createSound({url:wordSoundArray[index++]}));
...
// You just created the sound, so it will never be playing right off the bat
if (snd.isPlaying()) { 
    // This will never be called
    snd.stop();
    snd.play();
} else {
    // This will happen every time the user clicks the button
    snd.play();
} 
```

我认为在开始执行之前预加载所有声音资产是一种很好的做法，所以可以尝试用`wordSoundArray`以下形式的条目替换你的：

```
wordSoundArray.push(Titanium.Media.createSound({url:'audio/the.mp3'}); 
```

完成此操作后（我们所有的声音资源都已预加载，这对记忆也有好处）我们可以将侦听器更改为以下内容：

```
newWordBtn.addEventListener("click", function(e){
    wordLabel.text = newWordArray[i++];
    if (i === newWordArray.length)
            i = 0;

    // Instead of creating the sound, just fetch it!
    var snd = wordSoundArray[index++];

    if (index === wordSoundArray.length)
            index = 0;
    // Now this will work, but maybe you want to make sure all the sounds are off instead?
    if (snd.isPlaying()) {
        snd.stop();
        snd.play();
    } else {
        snd.play();
    }
}); 
```

但是，查看您的代码，您似乎想停止播放上一个声音，然后开始播放下一个声音，因此您需要将侦听器更改为：

```
newWordBtn.addEventListener("click", function(e){
    wordLabel.text = newWordArray[i++];
    if (i === newWordArray.length)
            i = 0;
    // Stop the last sound from playing
    if(index > 0) {
            var lastSound = wordSoundArray[index-1];
            lastSound.stop();
    }

    // Instead of creating the sound, just fetch it!
    var nextSound = wordSoundArray[index++];

    if (index === wordSoundArray.length)
            index = 0;
    // Play the next sound
    nextSound.play();
}); 
```

# c# - 如何防止 MVC4 中的两个组合属性出错

> ID：16006234
> 
> 赞同：0
> 
> 时间：2013-04-15T01:11:25.180
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-4

我对 MVC4 相当陌生。我有一个从服务器到客户端交换大量数据的应用程序。所有方法都通过 jQuery AJAX 调用执行。为了降低时间/带宽，我实现了一个自定义属性来处理我的控制器方法上的压缩：

```
public class CompressFilter : ActionFilterAttribute
{
    public override void OnActionExecuting(ActionExecutingContext filterContext)
    {
        HttpRequestBase request = filterContext.HttpContext.Request;

        string acceptEncoding = request.Headers["Accept-Encoding"];

        if (string.IsNullOrEmpty(acceptEncoding)) return;

        acceptEncoding = acceptEncoding.ToUpperInvariant();

        HttpResponseBase response = filterContext.HttpContext.Response;

        if (acceptEncoding.Contains("GZIP"))
        {
            response.AppendHeader("Content-encoding", "gzip");
            response.Filter = new GZipStream(response.Filter, CompressionMode.Compress);
        }
        else if (acceptEncoding.Contains("DEFLATE"))
        {
            response.AppendHeader("Content-encoding", "deflate");
            response.Filter = new DeflateStream(response.Filter, CompressionMode.Compress);
        }
    }
} 
```

相当标准，工作正常。但是，我现在还尝试添加一个自定义属性来检查会话是否仍然存在，如果不存在则重定向到登录页面（通过注销功能）。第二个属性如下：

```
public class SessionExpireFilter : ActionFilterAttribute {

    public override void OnActionExecuting( ActionExecutingContext filterContext )
    {
        HttpContext ctx = HttpContext.Current;

        // check if session is supported
        if ( ctx.Session != null ) {

            // check if a new session id was generated
            if ( ctx.Session.IsNewSession ) {

                // If it says it is a new session, but an existing cookie exists, then it must
                // have timed out
                string sessionCookie = ctx.Request.Headers[ "Cookie" ];
                if ( ( null != sessionCookie ) && ( sessionCookie.IndexOf ( "ASP.NET_SessionId" ) >= 0 ) ) {

                    ctx.Response.Redirect ( "~/Home/Logout" );
                    //filterContext.Result = new RedirectResult("~/Home/Logout");
                }
            }
        }

        base.OnActionExecuting ( filterContext );
    }
} 
```

问题是这会产生以下错误：

“发送 HTTP 标头后，服务器无法附加标头。”

我试过用 替换`ctx.Response.Redirect......`，`filterContext.Result = new RedirectResult("~/Home/Logout")`这消除了错误，但没有告诉客户端实际重定向。

我试过在网上搜索但没有运气，我已经无法解决了。谁能指出我正确的方向，或者建议一种更好的方法来处理上述一个或另一个？

# python - 来自 gda94 的 affine_transform xy 坐标

> ID：16006237
> 
> 赞同：3
> 
> 时间：2013-04-15T01:12:17.750
> 
> 标签：python, numpy, scipy, gdal

我试图弄清楚如何将坐标在空间参考 GDA94（EPSG 4283）中的多边形转换为 xy 坐标（反仿射变换矩阵）。

以下代码有效：

```
import sys

import numpy as np

from osgeo import gdal
from osgeo import gdalconst

from shapely.geometry import Polygon
from shapely.geometry.polygon import LinearRing

# Bounding Box (via App) approximating part of QLD.
poly = Polygon(
    LinearRing([
        (137.8, -10.6),
        (153.2, -10.6),
        (153.2, -28.2),
        (137.8, -28.2),
        (137.8, -10.6)
    ])
)

# open raster data
ds = gdal.Open(sys.argv[1], gdalconst.GA_ReadOnly)

# get inverse transform matrix
(success, inv_geomatrix) = gdal.InvGeoTransform(ds.GetGeoTransform())
print inv_geomatrix

# build numpy rotation matrix
rot = np.matrix(([inv_geomatrix[1], inv_geomatrix[2]], [inv_geomatrix[4], inv_geomatrix[5]]))
print rot

# build numpy translation matrix
trans = np.matrix(([inv_geomatrix[0]], [inv_geomatrix[3]]))
print trans

# build affine transformation matrix
affm = np.matrix(([inv_geomatrix[1], inv_geomatrix[2], inv_geomatrix[0]],
                  [inv_geomatrix[4], inv_geomatrix[5], inv_geomatrix[3]],
                  [0, 0, 1]))
print affm

# poly is now a shapely geometry in gd94 coordinates -> convert to pixel
# - project poly onte raster data
xy = (rot * poly.exterior.xy + trans).T  # need to transpose here to have a list of (x,y) pairs

print xy 
```

这是打印矩阵的输出：

```
(-2239.4999999999995, 20.0, 0.0, -199.49999999999986, 0.0, -20.0)
[[ 20\.   0.]
 [  0\. -20.]]
[[-2239.5]
 [ -199.5]]
[[  2.00000000e+01   0.00000000e+00  -2.23950000e+03]
 [  0.00000000e+00  -2.00000000e+01  -1.99500000e+02]
 [  0.00000000e+00   0.00000000e+00   1.00000000e+00]]
[[ 516.5   12.5]
 [ 824.5   12.5]
 [ 824.5  364.5]
 [ 516.5  364.5]
 [ 516.5   12.5]] 
```

有没有办法用`scipy.ndimage`'s`affine_transform`功能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T23:32:39.457

有几个选项。并不是所有的空间变换都在线性空间中，所以它们不能都使用仿射变换，所以不要总是依赖它。如果您有两个 EPSG SRID，则可以使用 GDAL 的 OSR 模块进行通用空间变换。[不久前我写了一个例子](https://stackoverflow.com/questions/10384971/rectangles-from-points-using-python/10698262#10698262)，可以改编。

* * *

否则，仿射变换具有基本数学：

```
 / a  b xoff \ 
[x' y' 1] = [x y 1] | d  e yoff |
                    \ 0  0   1  /
or
    x' = a * x + b * y + xoff
    y' = d * x + e * y + yoff 
```

可以在 Python 中通过点列表实现。

```
# original points
pts = [(137.8, -10.6),
       (153.2, -10.6),
       (153.2, -28.2),
       (137.8, -28.2)]

# Interpret result from gdal.InvGeoTransform
# see http://www.gdal.org/classGDALDataset.html#af9593cc241e7d140f5f3c4798a43a668
xoff, a, b, yoff, d, e = inv_geomatrix

for x, y in pts:
    xp = a * x + b * y + xoff
    yp = d * x + e * y + yoff
    print((xp, yp)) 
```

[`shapely.affinity.affine_transform`这与 Shapely函数](https://github.com/sgillies/shapely/blob/master/shapely/affinity.py)中使用的基本算法相同。

```
from shapely.geometry import Polygon
from shapely.affinity import affine_transform

poly = Polygon(pts)

# rearrange the coefficients in the order expected by affine_transform
matrix = (a, b, d, e, xoff, yoff)

polyp = affine_transform(poly, matrix)
print(polyp.wkt) 
```

最后，值得一提的是，该[`scipy.ndimage.interpolation.affine_transform`函数](http://docs.scipy.org/doc/scipy/reference/generated/scipy.ndimage.interpolation.affine_transform.html#scipy.ndimage.interpolation.affine_transform)适用于图像或栅格数据，而不是矢量数据。

# php - 在 css 中运行 php 代码

> ID：16006238
> 
> 赞同：1
> 
> 时间：2013-04-15T01:12:22.583
> 
> 标签：php, css, echo

我正在将一些 php 添加到 css 文件中，但 php 似乎没有运行，而我只是看到打印了整个 php 代码..

```
.large {
width: 175px; 
height: 175px;
position: absolute;
border-radius: 100%;
box-shadow: 0 0 0 7px rgba(255, 255, 255, 0.85), 
0 0 7px 7px rgba(0, 0, 0, 0.25), 
inset 0 0 20px 2px rgba(0, 0, 0, 0.25);
background: url('http://www.tahara.es/images/LargeImage/<?php echo $row2[imageLarge]; ?>.jpg') no-repeat;
} 
```

我做错什么了吗？或者在 CSS 中运行 PHP 是不是很疯狂？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-15T01:17:55.203

默认情况下，大多数 Apache 安装只会解释实际 .php 文件中的 PHP 代码。PHP 处理器不会在不重新配置 Apache（或您正在运行的任何网络服务器）的情况下处理其他文件类型，并且默认情况下，它们将呈现给浏览器，就像该文件类型的默认值一样。

但是，通过 PHP，您可以生成任何类型的内容。大多数 PHP 新手在考虑 PHP 将生成什么时都会想到 HTML，但这仅仅是开始：

```
<?php header('Content-Type:text/css'); ?>
<? /* php code defining $row2 */ ?>
.large {
    width: 175px; 
    height: 175px;
    position: absolute;
    border-radius: 100%;
    box-shadow: 0 0 0 7px rgba(255, 255, 255, 0.85), 
    0 0 7px 7px rgba(0, 0, 0, 0.25), 
    inset 0 0 20px 2px rgba(0, 0, 0, 0.25);
    background: url('http://www.tahara.es/images/LargeImage/<?php echo $row2[imageLarge]; ?>.jpg') no-repeat;
 } 
```

使用这种技术，您可以生成 HTML、JavaScript、CSS、XML、JSON 和其他类型的内容。

现在，当将此服务器生成的 CSS 注入您的网页时，链接标签将如下所示：

```
<link rel="stylesheet" type="text/css" href="myDynamicCSS.php" /> 
```

请注意，扩展名是.php，而不是.css，作为最终产品发送到浏览器的内容是“text/css”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-15T01:20:42.357

是的，您当然*可以*让 PHP 解析您的 CSS，从而动态生成它。完成此操作的最简单方法是将浏览器指向 PHP 脚本——记住，它并不关心扩展名是什么。它只是更喜欢响应是*text/css*。

在您的 HTML 中：

```
<link type='text/css' rel='stylesheet' href='/styles/default.php' /> 
```

在您的顶部`/styles/default.php`：

```
header('Content-type: text/css'); 
```

您还可以配置您的 HTTP 守护程序/服务以`.css`通过 PHP 解析器运行所有文件。但是，您*必须*通过解析器运行所有`.css`文件——在大多数情况下，这是不必要的性能损失。

但是，在正常情况下，最好将样式表简单地定义为足够灵活以适应所有页面。理想情况下，您的样式表“永不”过期，而客户端“永不”必须多次下载它们。如果您正在动态生成样式，我怀疑您错过了重点。动态生成的规则*通常*应该嵌入到页面中。

（当然，规则也有例外......）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-15T01:14:03.237

编辑：重写答案。

您**可以**在 CSS 文件中运行 PHP，在一种情况下：

您的服务器通过 PHP 管道发送对 *.CSS 文件的请求。

通常这不是一个好主意，因为这将使用 PHP 处理所有通常为静态的 CSS 文件，这是性能损失。

更好的选择是将您的 *.css 文件重命名为 PHP，然后将 PHP 文件链接起来，就好像它是 CSS 文件一样

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-15T01:17:00.747

不，这并不疯狂，你只需要给你的 css 文件一个`.php`扩展名（不是`.css`），这样你的 web 服务器就知道将它作为 PHP 脚本执行，并在顶部添加几行以确保浏览器知道它是CSS 不是 HTML 或原始文本。这些行将是：

```
<?php

header('Content-Type: text/css');

?> 
```

# f# - 如何按值进行递归区分联合？

> ID：16006239
> 
> 赞同：0
> 
> 时间：2013-04-15T01:12:22.987
> 
> 标签：f#

在 F# 中是否可以同时基于类型和值来区分联合？

这是在不知道语法应该是什么样子的情况下表达这一点的尝试。

```
type Foo =
    | A of int * Foo
    | B of string where B.name = "1" * Foo
    | C of string where C.name = "2" * Foo
    | Empty 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-15T02:30:42.373

我不完全确定您要达到的目标。但是，如果你想创建一个类型，`name`当它是“1”，`B`当它是“2” `C`，那么你可以添加一个成员：

```
type Foo =
  | A of int * Foo
  | B of Foo
  | C of Foo
  | Empty
  member x.Name = 
    match x with
    | B _ -> "1"
    | C _ -> "2"
    | _ -> failwith "Name is not available!" 
```

如果您希望在模式匹配中使用数字，那么您可以定义一个活动模式。假设你有一个只有`A`or的类型`B`（它有一个名字）：

```
type Foo = 
  | A of int
  | B of string * Foo 
```

`A`现在您可以编写一个活动模式，让您区分`B`名称为“1”和`B`名称为“2”的 ：

```
let (|A|B1|B2|) x = 
  match x with
  | A n -> A n
  | B("1", foo) -> B1 foo
  | B("2", foo) -> B1 foo
  | _ -> failwith "Invalid B" 
```

如果你现在有一个 value `foo`，你可以对这三种情况进行模式匹配：

```
match foo with
| A n -> ...
| B1 subfoo -> ...
| B2 subfoo -> ... 
```

# android - 无法编辑“/sys/devices/virtual/sound/timer/dev”文件

> ID：16006241
> 
> 赞同：0
> 
> 时间：2013-04-15T01:12:38.503
> 
> 标签：android

```
public class MainActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
    }

    private static final String SYSFS = "/sys/devices/virtual/sound/timer/dev";
    public void Place1() throws IOException {
        // Open the sysfs file for writing and write "116:33/34" to it.  
        PrintWriter outStream = new PrintWriter(new FileWriter(SYSFS));
        outStream.write("116:34");
        outStream.close();
    } 

} 
```

我是 Java 和 Android 开发的新手，所以我正在编写这个简单的代码来更改**开发**文件，但它似乎不起作用。**dev**文件具有所有 -rw 权限。我尝试了几种方法，但每次都不成功。

**注意**：我的手机已root。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T13:27:55.953

```
public class MainActivity extends Activity {

private static final String SYSFS = "/sys/devices/platform/omap3epfb.0/graphics/fb0/fmode"; 

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    try {
            File file = new File(SYSFS);
            FileWriter fw = new FileWriter(file.getAbsoluteFile());
            BufferedWriter bw = new BufferedWriter(fw);
            bw.write("1");
            bw.close();

        } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

} 
```

这很好用。也许是*PrintWriter*的问题

# python - 如何使用 PyEphem 计算正确的经度和行星星座

> ID：16006244
> 
> 赞同：2
> 
> 时间：2013-04-15T01:12:57.620
> 
> 标签：python, astronomy, pyephem

我试图使用 PyEphem 计算太阳纬度和经度，但我不明白的是当我计算太阳经度和星座时

```
>>> sun = ephem.Sun()
>>> sun.compute('2011/05/04')
>>> print ephem.Ecliptic(sun).lon
43:02:58.8 
```

所以 43:02:58.8 是 13.02 Taurus 但是当我尝试获取星座时

```
>>> print ephem.constellation(sun)
('Ari', 'Aries') 
```

它说白羊座出了什么问题我不明白请帮忙

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T15:00:18.820

好问题！

有两个原因导致您得到的答案与您预期的不同。

首先，天文学家目前使用的星座边界是根据 1875 年黄道恰好所在的位置确定的。此后，黄道上的“零经度”点随着地轴的进动而不断移动，因此你得到的答案会偏离几度。要真正了解 1875 坐标中的经度，您必须这样问：

```
import ephem
sun = ephem.Sun()
sun.compute('2011/05/04')
print "Today's coordinates:", ephem.Ecliptic(sun).lon
sun.compute('2011/05/04', epoch='1875')
print "In 1875 coordinates:", ephem.Ecliptic(sun).lon 
```

运行此脚本时，我得到输出：

```
Today's coordinates: 43:02:58.8
In 1875 coordinates: 41:18:14.1 
```

这样可以从您的结果中消除一个错误来源。请注意，PyEphem`constellation()`函数会在其星座边界表中查找天空位置之前自动将坐标转换为 1875，前提是您提供的物体作为其参数，其参数`epoch`与 1875 不同。

您遇到的另一个问题是，官方星座边界标记了天空中实际的恒星群，这些恒星群构成了公羊（金牛座）、天秤座（天秤座）等的形象。碰巧的是，这些数字甚至不接近每个横跨黄道的 30°（正如您可能已经预料到的，因为您从返回的角度减去 30°？）。如果你打印出沿着黄道的每个角度的星座，你会 (a) 发现星座的宽度变化很大，并且 (b) 你会发现有 13 个而不是 12 个星座穿过黄道，因为蛇夫座的一部分位于沿着 1875 年的黄道。

以下是一些可能有用的参考资料：

[http://en.wikipedia.org/wiki/Constellation#IAU_constellations](http://en.wikipedia.org/wiki/Constellation#IAU_constellations)

[http://en.wikipedia.org/wiki/Precession](http://en.wikipedia.org/wiki/Precession)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-21T17:40:23.307

它在白羊座。这是我使用*Beta Ari*作为参考的计算：

```
>>> sun = e.Sun()
>>> sun.compute('2011/05/04')
>>> e.Ecliptic(sun).lon
43:02:58.8
>>> beta_ari = e.readdb('Sheratan,f|S|A5,01:54:38.5|98.74,28:48:28.9|-110.41,2.65,2000,0')
>>> beta_ari.compute('2011/05/04')
>>> e.Ecliptic(beta_ari).lon
36:53:55.2
>>> e.Ecliptic(sun).lon - e.Ecliptic(beta_ari).lon
0.10735523133236013
>>> e.degrees(e.Ecliptic(sun).lon - e.Ecliptic(beta_ari).lon)
6:09:03.6 
```

黄道线上的太阳距离 Beta Ari 为 6:09 度，所以它仍在白羊座。我还使用该日期与其他程序仔细检查了这个结果，结果是一样的。

# c# - 没有使用“Autofac.Core.Activators.Reflection.DefaultConstructorFinder”找到任何构造函数

> ID：16006248
> 
> 赞同：33
> 
> 时间：2013-04-15T01:13:13.477
> 
> 标签：c#, autofac

当我尝试使用 Xml 配置设置参数时，出现以下错误：

> *无法使用可用服务和参数调用类型为“LM.AM.Core.Services.EmailService”的“Autofac.Core.Activators.Reflection.DefaultConstructorFinder”的构造函数：无法解析参数“System.String testSmtp”构造函数'Void .ctor（System.String）'。*

以下是相关文件：

**网络配置**

```
 <configSections>
    <section name="autofac" type="Autofac.Configuration.SectionHandler, Autofac.Configuration" />
  </configSections>

  <autofac>
    <components>
      <component type="LM.AM.Core.Services.EmailService , LM.AM.Core" service="LM.AM.Core.Infrastructure.Services.IEmailService , LM.AM.Core.Infrastructure">
        <parameters>
          <parameter name="testSmtp" value="abc" />
        </parameters>
      </component>
    </components>
  </autofac> 
```

**服务等级**

```
public class EmailService : IEmailService
{
    public string _testSmtp;

    public EmailService (string testSmtp)
    {
        _testSmtp = testSmtp;
    }
} 
```

**登记**

```
builder.RegisterType<EmailService>().As<IEmailService>().SingleInstance(); 
```

**全球.asax**

```
var builder = new ContainerBuilder();
builder.RegisterModule(new ConfigurationSettingsReader("autofac"));

builder.RegisterModule<Core.ModuleInstaller>();

builder.RegisterControllers(typeof(MvcApplication).Assembly);
AutofacContainer.Container = builder.Build();

var emailSvc = AutofacContainer.Container.Resolve<IEmailService>(); 
```

我已经检查了容器是否知道 xml 参数，并且我已经尽可能地关注 Wiki，但是由于某种原因，该参数没有在唯一的构造函数上解析，并且我收到了上述错误。

这应该很容易上手。任何人都可以就我可以尝试使其正常工作提供一些建议吗？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-04-15T05:43:49.450

你已经注册了你的`EmailService` **两次。**

一次在 web.config 和一次

```
builder.RegisterType<EmailService>().As<IEmailService>().SingleInstance(); 
```

如果您有上面的行，`Core.ModuleInstaller`那么**它将覆盖 web.config 配置。**而且因为这里你没有指定参数 Autofac 会抛出异常。

所以要解决这个问题，只需从模块**中删除`EmailService`注册。**`Core.ModuleInstaller`

如果您使用`Core.ModuleInstaller`多个地方并且需要在`EmailService`那里进行注册，那么您需要更改模块加载的顺序：

```
var builder = new ContainerBuilder();
builder.RegisterModule<Core.ModuleInstaller>();
builder.RegisterModule(new ConfigurationSettingsReader("autofac")); 
```

或者告诉`Autofac`不要覆盖`EmailService`它是否已经存在的注册`PreserveExistingDefaults`：

```
builder.RegisterType<EmailService>().As<IEmailService>()
       .SingleInstance().PreserveExistingDefaults(); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2016-03-17T08:44:03.567

我创建了一个之前没有的构造函数并将其设为私有，因此有默认构造函数，所以我收到了这个错误。不得不公开我的构造函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-07-22T15:06:10.490

我的注册都很好，但是我在构造函数中引用了具体类而不是接口 - 错过了“我”。希望这个答案可以帮助某人每天节省 5 分钟的精力。

# ruby - eventmachine memcache 和 heroku

> ID：16006249
> 
> 赞同：1
> 
> 时间：2013-04-15T01:13:13.180
> 
> 标签：ruby, heroku, memcached, eventmachine, goliath

我正在尝试在我的 goliath 驱动的 Web 应用程序中使用内置于 memcache 客户端（带有 em-synchrony）的 eventmachine。它在本地运行得很好，但是当我部署到 Heroku 时，我无法连接。这是我用来打开连接的内容：

```
cache = EM::P::Memcache.connect 
```

有没有办法让它工作，还是我必须使用不同的客户端，比如 Dalli？还有其他基于 eventmachine 的 memcache 客户端吗？为任何帮助而欢呼

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T03:04:27.780

我发现 EventMachine memcache 客户端不支持 SASL 身份验证，这是 heroku（和其他一些托管的 memcache 服务器）需要的。我最初避免使用 Dalli gem，因为我认为它缺乏异步支持，但是您只需要`async => true`在实例化客户端时进行设置，它就可以很好地工作

# java - 我正在尝试使用文件中的数据创建一个数组

> ID：16006251
> 
> 赞同：2
> 
> 时间：2013-04-15T01:13:32.540
> 
> 标签：java

这是我到目前为止所拥有的......

```
/**
 * @param args
 */
public static void main(String[] args) {
    final String DATA_FILE = "payroll_problem.txt";
      Scanner scan = null;
      try
      {
       scan = new Scanner(new File(DATA_FILE));
      }
      catch (FileNotFoundException e)
      {
       System.err.printf("Could not open file \"%s\".\n", DATA_FILE);
      }
    int [] arr = new int[scan.nextInt()];
    for(int i = 0; i < arr.length; i++)
    {
        arr[i] = scan.nextInt();
        System.out.print(arr[i]);
    }   

    scan.close();
} 
```

我不断收到错误代码

```
Exception in thread "main" java.util.InputMismatchException
at java.util.Scanner.throwFor(Unknown Source)
at java.util.Scanner.next(Unknown Source)
at java.util.Scanner.nextInt(Unknown Source)
at java.util.Scanner.nextInt(Unknown Source)
at fvse.main(fvse.java:22) 
```

这五个整数代表这个人从周一到周五工作了多少小时。这是数据文件。

```
Mohnan  Maria        8 8 8 9 8 10.01
Blue   Shelly        8 10 8 8 6  10.00
Black  8 8 8 8 8 23.0
Fortuna Jorge   5 5 5 5 5 10.10
Jones Mitchel   10 5.5 10 10 10 15.05
Olafson Sven    10 10 10 10 10  10.00
Cruz Astrid 1 1 1 1 1 20.50.3
Adler Irene 10 12 8 8 8  22.50 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T01:22:41.977

问题发生是因为您调用`scan.nextInt()`但您的输入文件实际上包含字符串/字符。

在输入文件顶部添加指示行数的整数，或更改按行读取的代码（例如：使用`BufferredReader.readLine()`）

如果您选择前者，请确保您还使用两次调用读取名字和姓氏`scan.next()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T01:19:08.057

您正在读取文件中的整数，但该文件很可能充满了字符串或字符。

编辑：尝试扫描行或字符，或者仅使用 FileInputStream，然后在加载数据后解析数据。

编辑：既然我已经看到了您的数据文件，我将使用标准文件输入实践读取文件（如果您需要教程，请查看[http://www.javapractices.com/topic/TopicAction.do?Id=42](http://www.javapractices.com/topic/TopicAction.do?Id=42)在那）。然后根据空格拆分字符串，并遍历新字符串数组中的每个字符串并处理数据。前 2 个字符串是名称，然后是整数，直到您获得另一个名称或字符串的结尾。

# ios - ios：如何获得 CLLocationCoordinate2D

> ID：16006254
> 
> 赞同：0
> 
> 时间：2013-04-15T01:14:24.807
> 
> 标签：ios, cllocationmanager

获得 CLLocationCoordinate2D 的正确方法是什么？

在.h中：

```
@property (nonatomic, readonly) CLLocationCoordinate2D coordinate; 
```

在.m

```
//Called when the location can be obtained
- (void)locationManager:(CLLocationManager *)manager didUpdateLocations:(NSArray *)locations{

    //Get the latitude and longitude location
    CLLocation *lastLocation = [locations lastObject];
    _latitude = [[NSString alloc] initWithFormat:@"%f", lastLocation.coordinate.latitude];
    _longitude = [[NSString alloc] initWithFormat:@"%f", lastLocation.coordinate.longitude];
} 
```

是不是这个：

```
_coordinate = lastLocation.coordinate; 
```

或这个：

```
_coordinate = manager.location.coordinate; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T06:11:47.403

首先阅读评论中已经说明的文档，因为这是位置编程必须知道的。
其次请注意，这不是您从委托获得的第一个数据，因为它可能是缓存数据（您需要检查时间戳）或无效数据（水平精度小于零）。
您可以使用该代码：

```
- (void)locationManager:(CLLocationManager *)manager didUpdateLocations:(NSArray *)locations{
    CLLocation * newLocation = [locations lastObject];
    if (newLocation.horizontalAccuracy < 0) {
        return;
    }
    NSTimeInterval interval = [newLocation.timestamp timeIntervalSinceNow];
    if (abs(interval)>5) {
        return;
    }
   //YOUR CODE HERE
} 
```

希望这会有所帮助，安德里亚

# python - 使用python重命名服务器上的文件

> ID：16006255
> 
> 赞同：1
> 
> 时间：2013-04-15T01:14:35.290
> 
> 标签：python, file-upload

我有这段代码允许将文件上传到我网站上的特定目录，但是，我希望上传的每个文件（只会是 .txt 文件）重命名为“equations.txt”，然后下载到我的计算机，然后从服务器中删除。

例如，如果有人上传了一个名为“test.txt”的文件，我需要上传它，然后在我的服务器上将其重命名为“equations.txt”。

到目前为止，我已经上传了它，但是当我添加该行时：

> os.renames('/home/xxxx/public_html/xxxx.com/test/uploads/' + fn, 'equations.txt')

它实际上完全删除了`/uploads/`目录，而不是将目录中的文件重命名为“equations.txt”......这是代码：

```
#! /usr/bin/python

import cgi, os
import cgitb; cgitb.enable()

form = cgi.FieldStorage()

# Get filename here.
fileitem = form['filename']

# Test if the file was uploaded
if fileitem.filename:
   # strip leading path from file name to avoid 
   # directory traversal attacks
   fn = os.path.basename(fileitem.filename)
   open('/home/xxxx/public_html/xxxx.com/test/uploads/' + fn, 'wb').write(fileitem.file.read())
   message = "The file " + fn + " was uploaded successfully"
   os.renames('/home/xxxx/public_html/xxxx.com/test/uploads/' + fn, 'equations.txt') ## Error line

else:
   message = "No file was uploaded"

print ("""\
Content-type: text/html\n\n
<html>
<body>
   <p>%s</p>
</body>
</html>
""") % (message) 
```

如果没有在代码上方添加该行，则可以正常工作并将文件上传到`/uploads/`目录。所以在我可以继续下一步之前，我需要重命名才能正常工作，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T01:20:21.933

你试过`os.rename`代替`os.renames`吗？

另外，尝试为 dest 设置绝对路径。所以这：

```
dest_dir = '/home/xxxx/public_html/xxxx.com/test/uploads/'
os.rename(dest_dir + fn, dest_dir + 'equations.txt') 
```

而不是这个：

```
os.renames('/home/xxxx/public_html/xxxx.com/test/uploads/' + fn, 'equations.txt') 
```

# c++ - 使用没有新的 QThread

> ID：16006258
> 
> 赞同：1
> 
> 时间：2013-04-15T01:15:01.230
> 
> 标签：c++, qt, qthread

所以我在下面有一些示例代码。

```
workerThread = new QThread();
m_worker->moveToThread( workerThread );
connect( workerThread , SIGNAL( started() ), m_worker, SLOT( createObject() ) );
connect( m_worker, SIGNAL( created() ), this, SLOT( objectReceived() ) );
workerThread->start(); 
```

它目前通过用 new 初始化 QThread 来使用它。如果这是它使用的唯一上下文，我不能只使用“QThread workerThread”，引用它的地址进行连接，然后就完成了吗？这将使程序免于将线程放在堆上。我注意到如果我不使用 new 并使用我列出的方式，我会收到以下错误“QThread: Destroyed while thread is still running”。除了我列出的更改之外，代码中没有任何更改。如果我使用 new 我不会收到此错误。有显着差异吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T01:26:21.653

[http://qt-project.org/doc/qt-4.8/objecttrees.html](http://qt-project.org/doc/qt-4.8/objecttrees.html)

如果将东西放在堆上，Qt 确实可以更好地清理和更好地进行育儿。

> 当 QObjects 在堆上创建（即用 new 创建）时，可以以任何顺序从它们构造一棵树，然后，可以以任何顺序销毁树中的对象。当树中的任何 QObject 被删除时，如果该对象有父对象，则析构函数会自动从其父对象中删除该对象。如果对象有子对象，析构函数会自动删除每个子对象。没有 QObject 被删除两次，无论销毁顺序如何。

然后，文档继续说明如果仅将其放在堆栈上，它会如何失败。

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T01:52:05.703

`QThread`老实说，在函数返回（并且线程被销毁）之前，您可以将 a 放在堆栈上并使用它做一些有用的事情的情况并不多。也许如果你阻塞主线程并等待额外的线程，但这......不知何故违背了使用额外线程的目的。如果你要阻塞主线程等待额外的线程，你还不如在主线程中完成工作。

这可能适用的另一种情况是，如果您将`QThread`用作类成员而不是`QThread *`- 在这种情况下它会起作用，但是您会失去对线程生命周期的控制，这可能并不理想。如果你有一个更静态的使用场景 - 你可以这样做并为自己节省动态内存分配的可怕开销......

无论如何，`QThread`动态分配单个的开销可以忽略不计，不应引起关注。

# c# - 找不到文本文件

> ID：16006265
> 
> 赞同：1
> 
> 时间：2013-04-15T01:15:54.370
> 
> 标签：c#, xna, stream, .net

我正在尝试从我的 XNA 游戏中的文本文件中读取一些整数。现在，当我在控制台应用程序中尝试此方法时，它工作得很好。

但是，当我在我的 XNA 游戏中尝试此操作时，我收到以下错误：

```
 'Could not find file 'C:\Users\Lee\Documents\Visual Studio 2010\Projects\Version01\V1SpaceKillers\V1SpaceKillers\V1SpaceKillers\bin\x86\Debug\positions.txt'.' 
```

首先是显而易见的......大声笑是的，该文件位于调试文件夹中。

```
 public void ReadPositions(string path)
     {
        using (StreamReader reader = new StreamReader(path))
        {

            for (int i = 0; i < PositionList.Length; i++)
            {
                Vector2 placeHolder;
                placeHolder.X = float.Parse(reader.ReadLine());
                placeHolder.Y = float.Parse(reader.ReadLine());
                PositionList[i] = placeHolder;

            }

        }
    } 
```

当我称之为：

```
 ReadPositions("positions.txt"); 
```

关于为什么找不到它的任何建议？我是初学者，所以任何帮助将不胜感激。

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T01:19:50.340

尝试在文件路径中使用下划线而不是空格。编程不喜欢空格。Visual Studio 2010 虽然是由 Visual Studio 制作的，但实际上可能需要 Visual_Studio_2010。

# python - Python MVC 路由

> ID：16006267
> 
> 赞同：3
> 
> 时间：2013-04-15T01:16:26.180
> 
> 标签：python, google-app-engine, model-view-controller, python-2.7, webapp2

我有同样的问题；——从来没有回答过。

我希望能够以与 ASP.net MVC 类似的方式路由我的请求。

例如地址 /Home/Index/query-string/ 应该将请求映射到 HomeController 并调用 Index 方法。

我为此做了一个实现并且它有效，但我想知道一个更好的方法来做到这一点。我刚开始第一次使用 Google App Engine 和 Python，我没有太多开发网站和 Web 应用程序的经验。

这是我的实现

Yaml 文件：

```
- url: /.*
script: router.app 
```

路由配置：

```
def StartUp():
    sys.path.append(os.path.join(os.getcwd(), 'System'))
    sys.path.append(os.path.join(os.getcwd(), 'Controllers'))
    sys.path.append(os.path.join(os.getcwd(), 'Models'))
    app.run()

app = webapp2.WSGIApplication([webapp2.Route('/', handler=Router, name='Default', defaults={'handler': 'home', 'method': 'index', 'query': ''}, build_only=False, handler_method='map'),
                            webapp2.Route('/<query>', handler=Router, name='DefaultC', defaults={'handler': 'home', 'method': 'index'}, build_only=False, handler_method='map'),
                            webapp2.Route('/<handler>/', handler=Router, name='DefaultCS', defaults={'method': 'index', 'query': ''}, build_only=False, handler_method='map'),
                            webapp2.Route('/<handler>/<query>', handler=Router, name='DefaultCA', defaults={'method': 'index'}, build_only=False, handler_method='map'),
                            webapp2.Route('/<handler>/<method>/', handler=Router, name='DefaultCAS', defaults={'query': ''}, build_only=False, handler_method='map'),
                            webapp2.Route('/<handler>/<method>/<query>', handler=Router, name='DefaultAll', build_only=False, handler_method='map'),
                            webapp2.Route('/<handler>/<method>/<query>/', handler=Router, name='DefaultAllS', build_only=False, handler_method='map')],
                            debug=True)

if __name__ == '__main__':
    StartUp() 
```

路由器

```
class Router(webapp2.RequestHandler):

    def getControllerName(self, handler):
            handler = handler.lower()
            if(len(handler) == 0):
                    """ Error - redirect to error page """
                    return webapp2.redirect('/Error/')
            if len(handler) == 1:
                    handler = handler[0].capitalize()
            else:
                    handler = handler[0].capitalize() + handler[1:]

            handler = handler + 'Controller'

            return handler

    def getActionName(self, method):
            method = method.lower()
            if(len(method) == 0):
                    """ Error - redirect to error page """
                    return webapp2.redirect('/Error/')
            if len(method) == 1:
                    method = method[0].capitalize()
            else:
                    method = method[0].capitalize() + method[1:]

            requestType = self.request.method.lower()
            requestType = requestType[0].capitalize() + requestType[1:]

            return method

    def loadController(self, controllerName):
            """ Load the controller """
            try:
                    fileName, pathName, description = imp.find_module(controllerName, None)
                    module = imp.load_module(controllerName, fileName, pathName, description)

                    # Add checking if class was found
                    controllerRef = getattr(module, controllerName)
                    return controllerRef

            except ImportError, args:
                    logging.error('Error importing controller. ' + pprint.saferepr(args))
            except Exception, args:
                    logging.error('Exception. ' + pprint.saferepr(args))
            finally:
                    fileName.close()

    def loadAction(self, controller, actionName):
            try:
                    actionRef = getattr(controller, actionName)
            except Exception, args:
                    logging.error('Exception. ' + pprint.saferepr(args))
            return actionRef

    def callController(self, controllerName, actionName, query):
            try:
                    """ Load the controller """
                    controllerRef = self.loadController(controllerName)
                    controller = controllerRef(self, query)
                    actionRef = self.loadAction(controller, actionName)
                    actionRef()
            except Exception, args:
                    logging.error('Exception. ' + pprint.saferepr(args))

    def map(self, handler, method, query):
            query = query.lower()
            """ Create Names for Controller and Action"""
            controllerName = self.getControllerName(handler)
            actionName = self.getActionName(method)

            self.callController(controllerName, actionName, query) 
```

这是我的家庭控制器：

```
class HomeController(MVC.Controller):

    def Index(self):

            path = os.path.join(os.path.dirname('Views/Home/'), 'home.html')
            self.Request.response.out.write(template.render(path, None)) 
```

# xml - WCF 参数始终为空

> ID：16006268
> 
> 赞同：0
> 
> 时间：2013-04-15T01:16:29.273
> 
> 标签：xml, wcf, web-services

我最近继承了一个似乎接受 SOAP 的 WCF Web 服务 (LeadService.svc)。到目前为止，我正在尝试将 XML 文件中的数据推送到服务的方法 TestLead() 中，但没有成功。

以下代码触发了服务方法，但在服务端传入的值（lead）始终为null。为了测试它，我运行了两个 Visual Studio 实例，一个运行服务，另一个运行正在使用的测试代码。我已经对此进行了一段时间的研究，但似乎无法弄清楚如何成功地将值传递到服务方法中。在 Fiddler 中编写 POST 产生了相同的结果（lead 为空值）。我应该注意，在这种情况下，修改服务代码本身不是一个选项。

所有代码都来自服务，除了下面的第一部分，它是客户端代码。

任何意见是极大的赞赏。

* * *

**客户**

```
using (var client = new WebClient())
{
    var data = File.ReadAllText(Server.MapPath("~/App_Data/data.xml"));
    client.Headers.Add("Content-Type", "text/xml;charset=utf-8");
    client.Headers.Add("SOAPAction", "\"http://tempuri.org/ILeadService/TestLead\"");
    client.Encoding = Encoding.UTF8;

    try
    {
        var response = client.UploadString("http://localhost:54881/LeadService.svc/", data);
        Response.Write(response);
    }
    catch (Exception ex)
    {
        Response.Write(ex.Message);    
    }
} 
```

**数据**

```
<?xml version="1.0" encoding="utf-8"?>
<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xmlns:xsd="http://www.w3.org/2001/XMLSchema"
xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
    <soap:Body>
        <TestLead xmlns="http://tempuri.org/">
            <firstName>test</firstName>
        </TestLead>
    </soap:Body>
</soap:Envelope> 
```

**服务**

```
ServiceResponse TestLead(SimpleLead lead) // this is always null
{
    // ...

    return sr;
} 
```

**WSDL**

```
<wsdl:definitions name="LeadService" targetNamespace="http://tempuri.org/">
<wsdl:types>
<xsd:schema targetNamespace="http://tempuri.org/Imports">
  <xsd:import schemaLocation="http://localhost:54881/LeadService.svc?xsd=xsd2" namespace="http://tempuri.org/"/>
  <xsd:import schemaLocation="http://localhost:54881/LeadService.svc?xsd=xsd0" namespace="http://schemas.microsoft.com/2003/10/Serialization/"/>
  <xsd:import schemaLocation="http://localhost:54881/LeadService.svc?xsd=xsd1" namespace="http://schemas.datacontract.org/2004/07/123Services"/>
</xsd:schema>
</wsdl:types>
<wsdl:message name="ILeadService_TestLead_InputMessage">
<wsdl:part name="parameters" element="tns:TestLead"/>
</wsdl:message>
<wsdl:message name="ILeadService_TestLead_OutputMessage">
<wsdl:part name="parameters" element="tns:TestLeadResponse"/>
</wsdl:message>
<wsdl:portType name="ILeadService">
<wsdl:operation name="TestLead">
  <wsdl:input wsaw:Action="http://tempuri.org/ILeadService/TestLead" message="tns:ILeadService_TestLead_InputMessage"/>
  <wsdl:output wsaw:Action="http://tempuri.org/ILeadService/TestLeadResponse" message="tns:ILeadService_TestLead_OutputMessage"/>
</wsdl:operation>
</wsdl:portType>
<wsdl:binding name="BasicHttpBinding_ILeadService" type="tns:ILeadService">
<soap:binding transport="http://schemas.xmlsoap.org/soap/http"/>
<wsdl:operation name="TestLead">
  <soap:operation soapAction="http://tempuri.org/ILeadService/TestLead" style="document"/>
  <wsdl:input>
    <soap:body use="literal"/>
  </wsdl:input>
  <wsdl:output>
    <soap:body use="literal"/>
  </wsdl:output>
</wsdl:operation>
</wsdl:binding>
<wsdl:service name="LeadService">
<wsdl:port name="BasicHttpBinding_ILeadService" binding="tns:BasicHttpBinding_ILeadService">
  <soap:address location="http://localhost:54881/LeadService.svc"/>
</wsdl:port>
</wsdl:service>
</wsdl:definitions> 
```

**合同**

```
namespace 123Services
{

    [ServiceContract]
    public interface ILeadService
    {
        [OperationContract]
        ServiceResponse TestLead(SimpleLead lead);
    }

    [DataContract]
    public class SimpleLead
    {
        [DataMember]
        public string FirstName { get; set; }
    }
} 
```

**网页配置**

```
<system.serviceModel>
<serviceHostingEnvironment multipleSiteBindingsEnabled="true" />
<bindings>
  <wsHttpBinding>
    <binding name="123Services.LeadService">
      <security mode="None">
        <message clientCredentialType="UserName"/>
      </security>
    </binding>
  </wsHttpBinding>
</bindings>
<services>
  <service name="123Services.LeadService" behaviorConfiguration="123Services.LeadServiceBehavior">
    <endpoint address="" binding="basicHttpBinding" contract="123Services.ILeadService">
      <identity>
        <dns value="localhost"/>
      </identity>
    </endpoint>
  </service>
</services>
<behaviors>
  <serviceBehaviors>
    <behavior name="123Services.LeadServiceBehavior">
      <serviceMetadata httpGetEnabled="true" />
      <serviceDebug includeExceptionDetailInFaults="false" />
    </behavior>
    <behavior name="">
      <serviceMetadata httpGetEnabled="true" />
      <serviceDebug includeExceptionDetailInFaults="false" />
    </behavior>
  </serviceBehaviors>
</behaviors> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T01:25:32.177

我使用soap ui 来调试服务调用。我不知道提琴手的正确设置。如果您在 Visual Studio 中启动服务项目，那么您只需要端口即可。该值应类似于 http://localhost:5301/myservice.svc。从那里在 fiddler 或 soap ui 中输入 dev url，然后输入有效负载并调用您正在调试的过程。这应该允许您设置断点并调试到您的服务中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T03:34:53.613

如我所见，您的服务方法参数不匹配：在 def. 您期望 TestLead 类型的参数，inethod - SimpleLead。

参数名称和类型应该匹配。在其他情况下，您将收到 null。

此类问题通常可以通过 SvcTraceViewer.Exe 找到

# vim - 在vimscript中将字符串转换为键码

> ID：16006275
> 
> 赞同：0
> 
> 时间：2013-04-15T01:17:35.193
> 
> 标签：vim

有什么方法可以将字符串转换为在 Vimscript 中动态`<C-a>`呈现的关键代码？`\<C-a>`我想创建`<C-a>`一个用户可以为绑定指定的选项，但`\<C-a>`在运行时通过检查 getchar() 的结果来检测。这可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T03:11:13.830

我不明白，有什么问题`getchar()`？如果你需要字符串，你通常会写一些类似的东西

```
let char=getchar()
if type(char)==type(0)
    let char=nr2char(char)
endif 
```

并像往常一样进行比较：

```
if char is# "\<C-a>"
    …
endif 
```

. 如果您需要比较的右侧是一些用户定义的变量，这不是问题，只需告诉用户使用`let g:var="\<C-a>"`. `let g:var="<C-a>"`尽管也可以使用后者：以下技巧将转换`"<C-a>"`为`"\<C-a>"`：

```
let string=eval('"'.escape(string, '\"<').'"') 
```

# wordpress - 在将商品添加到购物车之前，有没有办法连接到 WooCommerce

> ID：16006276
> 
> 赞同：3
> 
> 时间：2013-04-15T01:17:38.630
> 
> 标签：wordpress, woocommerce

有谁知道在使用 WooCommerce 将商品插入购物车之前可以应用过滤器或挂钩来插入功能？我有一个与这篇文章类似的问题：

[WordPress。电子商务。添加到购物车之前的操作挂钩](https://stackoverflow.com/questions/14428248/wordpress-woocommerce-action-hook-before-adding-to-cart)

但是 OP 的评论似乎不起作用或太模糊，我无法让它们起作用，而且我找不到有关 woocommerce_before_add_to_cart 的文档。

我要做的只是显示一个错误，一旦我可以挂钩正确的操作，我将添加逻辑：

```
function checkProd(){
global $woocommerce;
$woocommerce->add_error( __('ERROR', 'woocommerce') );
return;
}
add_action( 'woocommerce_variable_add_to_cart', 'checkProd'); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T19:21:32.747

我为 woocommerce 钩子找到的最佳资源实际上是存储库本身，它们具有非常好的注释代码，非常易读。

[https://github.com/woocommerce/woocommerce/blob/master/includes/wc-template-hooks.php](https://github.com/woocommerce/woocommerce/blob/master/includes/wc-template-hooks.php)

我确信您在这些部分之一中尝试解决的问题存在解决方案：

```
/**
 * Product Add to cart
 *
 * @see woocommerce_template_single_add_to_cart()
 * @see woocommerce_simple_add_to_cart()
 * @see woocommerce_grouped_add_to_cart()
 * @see woocommerce_variable_add_to_cart()
 * @see woocommerce_external_add_to_cart()
 */
add_action( 'woocommerce_single_product_summary', 'woocommerce_template_single_add_to_cart', 30 );
add_action( 'woocommerce_simple_add_to_cart', 'woocommerce_simple_add_to_cart', 30 );
add_action( 'woocommerce_grouped_add_to_cart', 'woocommerce_grouped_add_to_cart', 30 );
add_action( 'woocommerce_variable_add_to_cart', 'woocommerce_variable_add_to_cart', 30 );
add_action( 'woocommerce_external_add_to_cart', 'woocommerce_external_add_to_cart', 30 );

/**
* Cart Actions
*
* @see woocommerce_update_cart_action()
* @see woocommerce_add_to_cart_action()
* @see woocommerce_load_persistent_cart()
*/
add_action( 'init', 'woocommerce_update_cart_action' );
add_action( 'init', 'woocommerce_add_to_cart_action' );
add_action( 'wp_login', 'woocommerce_load_persistent_cart', 1, 2 ); 
```

如果您在使用上述动作挂钩时仍然遇到问题，请随时向我提供更多细节，我可以尝试引导您完成。祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-14T12:08:08.457

在添加到购物车之前我需要做一些操作，所以我这样做了

```
add_action('init', function(){
    //if user clicked http://example.com/shop/?add-to-cart=42
    if(!is_admin() && isset($_REQUEST['add-to-cart'])){
        //do something
    }
}); 
```

$_REQUEST 用于处理 GET 和 POST 请求。

# haskell - 如何使用应用程序链接任意长度的原子解析器系列？

> ID：16006279
> 
> 赞同：4
> 
> 时间：2013-04-15T01:18:00.600
> 
> 标签：haskell, functional-programming, functor, applicative, alternative-functor

假设我有这种解析器类型：

```
newtype Parser a = Parser { runParser :: String -> Maybe (a, String) } 
```

这个原子解析器单元：

```
satisfy :: ( Char -> Bool ) -> Parser Char
satisfy g = Parser $ \stream -> case stream of
    (x:xs) | g x -> Just ( x, xs )
    otherwise    -> Nothing 
```

解析器实现了这三个接口：

```
instance Functor Parser where
    fmap g ( Parser p ) = Parser $ \xs0 -> p xs0 >>= \(x,xs) -> return ( g x, xs )

instance Applicative Parser where
    pure a                      = Parser $ \xs0 -> Just ( a, xs0 )
    (Parser p1) <*> (Parser p2) = Parser $ \xs0 -> do
        (x1, xs1) <- p1 xs0
        (x2, xs2) <- p2 xs1
        return ( x1 x2, xs2 )

instance Alternative Parser where
    empty                        = Parser $ const Nothing
    (Parser p1) <|> (Parser p2)  = Parser $ \ss -> let ss1 = p1 ss in case ss1 of
        Nothing  -> p2 ss
        _        -> ss1 
```

`satisfy`现在据我了解，我现在可以通过使用应用程序接口进行链接来弹出更高级别的抽象并构建更复杂的解析器。例如：

```
-- | A parser that parses the first two chars in the stream if they are upper case
uParser = satisfy isUpper
parser1 = ( (:) <$> uParser ) <*> ( (\x -> [x]) <$> uParser )
runParser parser1 "HEllo" = Just ("HE","llo")
runParser parser1 "Hello" = Nothing 
```

太好了，现在如果我想构造一个计算，以便解析器解析流中的所有大写字母，直到遇到小写字母，该怎么办？用例：

```
runParser idealParser "hello"             = Nothing
runParser idealParser "HEllo"             = Just ("HE","llo")
runParser idealParser "HELLOIAMnotincaps" = Just ("HELLOIAM", "notincaps") 
```

我如何表达这种不确定长度的概念？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-15T01:29:30.697

由于您有一个`Alternative`实例，您可以简单地使用[`Control.Applicative.some`](http://www.haskell.org/ghc/docs/latest/html/libraries/base/Control-Applicative.html#v:some)来匹配一个或多个事件的列表。

```
> runParser (some uParser) "hello"
Nothing
> runParser (some uParser) "HEllo"
Just ("HE","llo")
> runParser (some uParser) "HELLOIAMnotincaps"
Just ("HELLOIAM","notincaps") 
```

要手动实现它，您可以使用两个相互递归的解析器，例如

```
zeroOrMore = oneOrMore <|> pure []
oneOrMore  = (:) <$> uParser <*> zeroOrMore 
```

# php - 通过 PHP head() 在重定向之前调用 URL？

> ID：16006280
> 
> 赞同：1
> 
> 时间：2013-04-15T01:18:01.303
> 
> 标签：php, cookies, http-headers, apache2, http-redirect

我需要有 3 个域：

*   a.com - 我们的脚本（如下）将驻留的位置。
*   b.com - 有一个我们想要触发的跟踪脚本
*   c.com - 是我们的最终目的地，就像一个登陆页面

因此，可以将广告广告素材链接到[http://a.com/track.php?id=1004&r=c.com](http://a.com/track.php?id=1004&r=c.com)，其中 1004 是我的会员 ID。调用此脚本时，我需要它执行以下操作：

```
<?php
setcookie('affid', $_GET['id'],time()+60*60*24*365, '/');
head('X-Something: http://b.com/track?id=' . $_GET['id']);
head('Location: http://' . $_GET['r']); 
```

...其中 X-Something 只是 Apache 在进行页面重定向之前理解并尝试连接的一些标头。

问题是——我什至不知道什么 HTTP 标头字段会允许这样做。可能吗？

最终，会员可以将他的广告创意链接到以下内容：

[http://a.com/track.php?id=1004&r=c.com](http://a.com/track.php?id=1004&r=c.com)

它会在 a.com 上放置一个 cookie，在 b.com 上触发一个脚本，然后重定向到 c.com。那可能吗？如果是这样，我需要使用什么标题来代替我创建的名为 X-Something 的虚构标题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T01:25:11.423

我不知道这样的 HTTP 标头是否存在。

相反，另一种解决方案是让 PHP 请求跟踪脚本。这可以通过`file_get_contents()`. 该方法将返回该 URL 上可用的任何内容，但在这种情况下您不需要它，因此可以忽略它的返回值。

```
<?php
setcookie('affid', $_GET['id'],time()+60*60*24*365, '/');
file_get_contents('http://b.com/track?id=' . $_GET['id'] );
head('Location: http://' . $_GET['r']); 
```

# objective-c - Objective-C：如何从表中的选定行中获取数据？

> ID：16006281
> 
> 赞同：1
> 
> 时间：2013-04-15T01:18:02.147
> 
> 标签：objective-c, nstableview

我需要从**表中选定行的数据**中检索字符串，以将其与字符串进行比较。

我打电话

```
NSArray *values = [self.tableArrayController selectedObjects]; 
```

获取选定行的对象。但是，值的对象计数仅为 1，并且一切似乎都是我所有值的一大长串。我无法搜索这些值，因为我并不总是知道要搜索什么。我需要一个特定的值（它们按列组织）。

我希望该数组具有一定的计数，并且我可以根据字符串对象的索引来检索字符串。

我应该如何获取选定行的所有不同值（按列组织）？

编辑：

我填充了一个 NSDictionary （比这更多的值，这只是一个例子）。字符串值是列标识符。该对象是我要添加的对象，我想出现在桌子上。下面的这部分已经按照我的意愿工作了：

```
NSDictionary *dict =[NSDictionary dictionaryWithObjectsAndKeys:
                         object1, @"column",                      
                         object2, @"column2",
                         nil];
[self.tableArrayController addObject:dict]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T01:24:31.470

从表中获取数据的另一种方法是查看`NSTableView`“方法”`selectedRow` “& `selectedColumn`”。

有了这些信息，您可以直接通过数组控制器获取您想要的值，或者您可以使用 NSTableViewDataSource 方法“ `tableView:objectValueForTableColumn:row:`”将您想要获取的任何值的 NSString 值传回给您。

# c - C语言，分段错误在哪里？

> ID：16006283
> 
> 赞同：-1
> 
> 时间：2013-04-15T01:18:09.003
> 
> 标签：c, function, segmentation-fault, strcmp

这是我得到分段错误的函数

```
void searchcity()
{
    struct city *ptr=citylist;
    printf("Which city would you like me to search?: ");
    scanf("%s",searchedcity);
    //  printf("%s",searchedcity);
    while(ptr)
    {
        if(!strcmp(searchedcity,ptr->name))
            printf("name= %s, statecode = %s,population = %s,region = %s,zipcode =     %s\n",ptr->name,ptr->statecode,ptr->population,ptr->region,ptr->zipcode);
        else
            printf("sorry, couldnt find that city");
        ptr=ptr->next;
    }   
} 
```

不知道是什么导致这种情况发生。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T01:28:22.890

根据该代码^((a))，您至少需要检查以下内容：

*   这`searchedcity`有足够的空间用于输入^((b))。
*   `citylist`链表中保存的所有字符串均正确构造（以空结尾）。
*   *结构中*的所有这些字段实际上都是字符数组（或等效指针）而不是整数（例如人口）。
*   列表本身是正确构建的（没有悬空或无效指针）。

您确实还有*另一个*问题，尽管与段错误无关。

您的代码将为列表中与您的城市不匹配的每个节点打印，因此，如果您有`"sorry, couldnt find that city"`,*和*`New York`，`Moscow`并且`London`您查找`London`，您将在找到之前打印两次该消息。

一个更好的解决方案（许多变体之一）是这样的：

```
struct city *ptr = citylist;
while (ptr != NULL)
  if (strcmp (searchedcity, ptr->name) == 0)
    break;

if (ptr == NULL)
  printf ("Sorry, couldnt find that city.\n");
else
  printf ("%s, state = %s, pop = %s,r egion = %s, zip = %s\n",
    ptr->name, ptr->statecode, ptr->population, ptr->region, ptr->zipcode); 
```

这样，循环负责找到正确的指针或将其设置为 NULL。*循环之后*是决定应该打印什么的正确时间。

* * *

^((a))除了危险之外，该代码本身似乎还可以，`scanf`但它确实依赖于许多其他未显示的内容。

^((b))事实上，`scanf`无界`%s`是代码中的一个严重漏洞，很容易导致缓冲区溢出。有关详细信息和解决方案，请参见[此处](https://stackoverflow.com/questions/4023895/how-to-read-string-entered-by-user-in-c/4023921#4023921)。在任何情况下，`scanf("%s")`都不是扫描带有空格的字符串的好方法，因为类似的东西`Los Angeles`最终会变成`Los`:-)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-15T01:47:58.367

下面的代码有效，我做了一些小的改动，你可以通过它。您犯的几个小错误是您的 ptr->next 由于缺少括号而从未执行。其余的我写在代码中。

谢谢希望我们有所帮助。

```
#include <stdio.h>
struct city {
    char name[100];
    char  statecode[100];
    char  population[100];
    char region[100];
    char zipcode[100];
    struct city* next;
};

int main() // this is your searchcity function
{
    char searchedcity[100]; // make sure you initialize this. YOu haven't done it in the code you gave us.
        // Assume citylist is in your main function or initialized as a global var
        // I initialized it here for simplicity
    struct city* citylist = (struct city*) malloc(sizeof( struct city));
    strcpy(citylist->statecode,"statecode");
    strcpy(citylist->population,"population");
    strcpy(citylist->region,"region");
    strcpy(citylist->zipcode,"zipcode");
    citylist->next = NULL;
//end of citylist
    struct city *ptr = citylist;
    printf("Which city would you like me to search?: ");
    scanf("%s",searchedcity);
//  printf("%s",searchedcity);
    while(ptr)  {
        printf("while \n");
        if(!strcmp(searchedcity,ptr->name)){
               printf("name= %s, statecode = %s,population = %s,region = %s,zipcode =     %s\n",ptr->name,ptr->statecode,ptr->population,ptr->region,ptr->zipcode);
        }else{
                printf("sorry, couldnt find that city");
                ptr=ptr->next;
        }
    }
    return 0;
} 
```

# c# - 解析半格式文件

> ID：16006284
> 
> 赞同：2
> 
> 时间：2013-04-15T01:18:28.837
> 
> 标签：c#, parsing, text

我一直在尝试找到一种解析我经常查看的文本文件的好方法。问题不在于解析简单的一行部分，而是那些跨越多行并偶尔包含诸如`:`. 第二个问题是，在下一节之前偶尔会有一个随机行，它不能用作值：密钥对。

我的想法（虽然我还没有想出如何编码），因为 SECTION 值是已知的，它们可以在 a 中提供`List<string>`，这将允许解析通过一个部分，直到到达另一个值`List<string>`. 到目前为止，这就是我试图用我的代码做的事情。

我需要帮助的主要是找出多行问题，然后将所有内容存储在字典列表（`List<Dictionary>`）中以将每个部分存储在自己的字典中（或者如果有人有更好的主意，无论如何）。

**示例文本：**

```
Lorem ipsum dolor sit amet, consectetur adipisicing
elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut
enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut
aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in
voluptate velit esse cillum dolore eu fugiat nulla pariatur.

SECTION1
  VALUE1: incididunt ut labore
  VALUE2: nostrud
  VALUE3: eiusmod tempor 
  VALUE4: Excepteur sint occaecat cupidatat non proident, sunt in
culpa qui officia deserunt mollit anim id est laborum. Lorem ipsum dolor
sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut
labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud
exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.
  VALUE5: Duis aute irure dolor in reprehenderit in voluptate
velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat
cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id
est laborum.

Lorem ipsum dolor sit amet, consectetur adipisicing
elit, sed do eiusmod tempor incididunt ut labore et dolore magna
aliqua.
SECTION2
  VALUE1: incididunt ut labore
  VALUE2: nostrud
  VALUE3: eiusmod tempor 
  VALUE4: Excepteur sint occaecat cupidatat non proident, sunt in
culpa qui officia deserunt mollit anim id est laborum. Lorem ipsum dolor
sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut
labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud
exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.
  VALUE5: Duis aute irure dolor in reprehenderit in voluptate
velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat
cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id
est laborum. 
```

**示例代码：**

```
 bool Sec1 = false;
                        bool Sec2 = false;

                        for (int i = 0; i < lines.Length; i++)
                        {

                            if (lines[i].Equals("SECTION1") || Sec1 == true)
                            {
                                if (lines[i + 1].StartsWith("  "))
                                {
                                    MessageBox.Show(lines[i + 1].Trim());
                                    Sec1 = true;
                                }
                                else
                                {
                                    Sec1 = false;
                                }
                            }
                            else if (lines[i].Equals("SECTION2") || Sec2 == true)
                            {
                                if (lines[i + 1].StartsWith("  "))
                                {
                                    MessageBox.Show(lines[i + 1].Trim());
                                    Sec2 = true;
                                }
                                else
                                {
                                    Sec2 = false;
                                }
                            }
                        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T02:35:43.853

我认为这应该对你有用。至少它应该给你一个提示：

```
private void Parse()
{
    var Dictionary = new List<List<string>>();
    var Section = new List<string>();

    using (var sr = new StreamReader(this.fileName))
    {
        while (sr.Peek() > -1) 
        {
            var line = sr.ReadLine().Trim();

            if (line.StartsWith("SECTION") && Section.Count > 0)
            {
                Dictionary.Add(Section); //// Store previous section
                Section = new List<string>();
            }

            if (line.StartsWith("VALUE"))
            {
                line = line.Remove(0, line.IndexOf(' '));
                Section.Add(line.Trim());
            }
        }

        if (Section.Count > 0)
        {
            Dictionary.Add(Section); //// Store last section
        }
    }
} 
```

# css - 环境 Dart 中的 height 属性

> ID：16006289
> 
> 赞同：3
> 
> 时间：2013-04-15T01:19:20.557
> 
> 标签：css, dart

我正在学习 Dart，但我一直在改变`<div>`. 任何帮助表示赞赏。

```
<div id="sample_container_id">
    <p id="sample_text_id"></p>
</div> 
```

```
import 'dart:html';
void main() 
{
  DivElement div = query('#sample_container_id');
  div.style.height = "40000";
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T04:36:48.200

正如@richthepanda 在评论中所指出的那样，您使用 Dart 代码正确设置了元素的`height`属性`div`，但您将其设置为无效的[高度](https://developer.mozilla.org/en-US/docs/CSS/height)字符串，只要让浏览器执行您想要的操作。添加预期的单位解决了这个问题：

```
 div.style.height = "40000px"; 
```

# c# - 线程同步 c#

> ID：16006292
> 
> 赞同：3
> 
> 时间：2013-04-15T01:19:44.307
> 
> 标签：c#, multithreading, thread-safety

我有一个多线程应用程序。

我正在尝试同步/线程安全

```
static void Main(string[] args)
{
   Thread t = new Thread(()=>Met1(x));
   Monitor.Enter(t);
   t.start();
   Monitor.Exit(t);

   Thread t2 = new Thread(()=>Met2(x,y));
   Monitor.Enter(t2);
   t2.start();
   Monitor.Exit(t2);
} 
```

但是，应用程序不是线程安全/同步的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T01:25:15.750

`Monitor.Enter`and的调用`Monitor.Exit`必须由线程自己完成。在您的代码中，这是由主线程在设置两个线程的过程中完成的。此外，这需要是同一对象的监视器，而不是像您的情况那样的两个不同对象。

要解决此问题，您需要将`Enter`/`Exit`移到线程中的委托中，并为监视器添加一个公共对象，如下所示：

```
object mon = new object();
Thread t = new Thread(()=>{
    Monitor.Enter(mon);
    Met1(x);
    Monitor.Exit(mon);
});
Thread t2 = new Thread(()=>{
    Monitor.Enter(mon);
    Met2(x,y);
    Monitor.Exit(mon);
});
t.start();
t2.start(); 
```

现在`t`线程将无法在运行时调用`Met1`，`Met2`反之亦然。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T01:26:46.857

您正在使用两个不同的显示器。如果要同步，请使用相同的监视器。我还建议在线程以外的对象上使用监视器（例如，一个新对象本身作为锁）。此外，考虑在 C# 中使用 lock 语句，它为您包装相同的代码并处理其他问题（例如异常）。

```
object synchronizationLock = new object();
lock (synchronizationLock)
{
    // Place logic here
} 
```

# c# - 使用 X 和 Y 坐标移动窗口位置

> ID：16006302
> 
> 赞同：0
> 
> 时间：2013-04-15T01:21:06.440
> 
> 标签：c#, button, textbox, location

我有 2 个文本框，一个用于 X 坐标，一个用于 Y 坐标。我想要用户在 X 和 Y 中插入值的位置，当他们按下按钮时，它将窗口移动到该位置。

我添加了这个：

```
this.Location = new System.Drawing.Point(1000, 500); 
```

到这里：

```
private void button1_Click(object sender, EventArgs e)
{
    this.Location = new System.Drawing.Point(500, 900);
} 
```

当我按下按钮时，它会完美地移动窗口。

如何使窗口移动到文本框中输入的位置，这样用户可以输入 X 和 Y 坐标，当他们点击按钮时，它将窗口移动到他们指定的位置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T01:24:34.110

在按钮单击处理程序中，您可以从文本框中获取文本并将字符串转换为整数。由于文本来自用户输入，因此最好使用`TryParse`而不是仅仅`Parse`这样您就不会抛出异常：

```
int windowX, windowY;

if (Int32.TryParse(txtX.Text, out windowX) &&
    Int32.TryParse(txtY.Text, out windowY))
{
    this.Location = new System.Drawing.Point(windowX, windowY);
}
else
{
    // Tell the user they didn't enter a valid number
} 
```

# java - 在哪里可以找到 DatastoreViewerServlet - GAE？

> ID：16006307
> 
> 赞同：1
> 
> 时间：2013-04-15T01:22:01.137
> 
> 标签：java, google-app-engine, guice

我的应用程序 JAX-RS/Guice 映射覆盖了 GAE SDK 管理映射。所以我需要通过 Guice 服务模块明确地“服务”它

```
 serve("_ah/admin/datastore*").with(DatastoreViewerServlet.class); // does not work
    serve("/appstats/*").with(AppstatsServlet.class); // works! 
```

`DatastoreViewerServlet`我面临的问题是我在 GAE SDK 类路径中找不到这个。我是 GAE SDK 1.7.5 版

试过这个：

```
com.google.apphosting.utils.servlet.DatastoreViewerServlet 
```

但它不在那里。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T20:56:18.163

servlet 位于 GAE SDK 文件夹下的以下 jar 中。

> lib/shared/appengine-local-runtime-shared.jar

将 jar 复制到您的 WEB-INF/lib 并将其添加到您的构建路径中至少可以让您引用它。至于之后是否按预期工作，我希望你是幸运的。

# php - 来自json响应的PHP中未定义的偏移错误

> ID：16006309
> 
> 赞同：1
> 
> 时间：2013-04-15T01:22:11.740
> 
> 标签：php

我编写的代码应该做两件事：1- 显示来自 twitter 用户的最新帖子 2- 搜索特定关键字。对于第一部分，它工作得很好，但在“搜索”选项的情况下，它会通过转储此错误消息而失败：

> PHP 注意：未定义的偏移量：

我以这种格式运行代码：

```
$ php script.php search keyword number 
```

这是代码：

```
 $result = file_get_contents("http://search.twitter.com/search.json?q=$argv[2]&rpp=$argv[3]&include_entities=true&result_type=mixed");
    $decoded = json_decode($result,true);
    for($j=0; $j<$argv[3]; $j++)
    {

    echo ($decoded[$j]['text']);

   } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T01:43:09.117

我检查了 Twitter 响应，它与您尝试访问的数组的格式不匹配。您不能`$decoded[$j]['text']`仅仅因为响应中不存在数据而访问数据。

你的意思是：

```
$decoded[results][$j]['text'] 
```

我已经检查过了，这似乎工作正常。

从响应中摘录（print_r 格式），你明白它为什么会发生。

> ```
> Array (
>   [completed_in] => 0.015
>   [max_id] => 322818055665225728
>   [max_id_str] => 322818055665225728
>   [page] => 1
>   [query] => testsearch
>   [refresh_url] => ?since_id=322818055665225728&q=testsearch&result_type=mixed&include_entities=1
>   [results] => Array
>     (
>       [0] => Array
>         (
>           [created_at] => Fri, 12 Apr 2013 21:06:36 +0000
>           [entities] => Array 
> ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T01:36:10.257

如果用户输入 '10' 但查询仅返回 9 个结果，则 for 循环的第 10 次迭代将返回该通知（因为 $decoded[9] 不存在）。

也许尝试这样的事情

```
$limit = $argv[3];

if (count($decoded) < $limit)
{
    $limit = count($decoded);
}

for ($j = 0; $j < $limit; $j++)
{
...
} 
```

# javascript - 未知的提供者：$resourceProvider <- AngularJS 的 $resource

> ID：16006313
> 
> 赞同：5
> 
> 时间：2013-04-15T01:23:03.603
> 
> 标签：javascript, angularjs

我在 app.js 中声明了以下内容

```
angular.module('adminApp', ['ngGrid','ngResource']); 
```

在 data.js 中

```
angular.module('adminApp', [])
.factory('testAccountService', function ($http) {
    var TestAccount = { 
```

在 GridCtrl.js

```
angular.module('adminApp',[])
    .controller('GridCtrl', function ($scope, $http, $resource, testAccountService) {
        $scope.selectedTestAccount = null; 
```

我正在像这样加载我的脚本：

```
<script src="~/Scripts/jquery-1.9.1.min.js"></script>
<script src="~/Scripts/angular.min.js"></script>  
<script src="~/Scripts/angular-resource.min.js"></script>
<script src="~/App/admin/services/Data.js"></script>
<script src="~/App/admin/controllers/GridCtrl.js"></script> 
```

当我运行它时，它给了我一个错误消息：

```
Error: Unknown provider: $resourceProvider <- $resource
at Error (<anonymous>)
at http://127.0.0.1:81/Scripts/angular.js:2682:15
at Object.getService [as get] (http://127.0.0.1:81/Scripts/angular.js:2810:39)
at http://127.0.0.1:81/Scripts/angular.js:2687:45 
```

我这样做的方式有问题吗？我对如何设置服务感到困惑，但我看不出有什么问题：

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-04-15T01:34:38.283

`$resource`不是 AngularJS 核心的一部分。

您必须包括：**[`angular-resource.js`](http://code.angularjs.org/1.2.16/angular-resource.js)**.

* * *

从[文档](http://docs.angularjs.org/api/ngResource.$resource)：

> 要使用`$resource`，请确保您已包含`angular-resource.js`Angular 包中的内容。您还可以在 Google CDN、bower 以及[code.angularjs.org](http://code.angularjs.org/)上找到此文件。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-04-15T01:51:12.967

在您的 data.js 和 GridCtrl.js 中，您需要`[]`从`angular.module('adminApp', [])`调用中删除 。

像这样： `angular.module('adminApp')`

另外，请确保首先加载您的 app.js。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2016-01-25T07:59:38.707

您还需要在模块定义中包含角度资源模块定义 'ngResource' angular.module('adminApp', ['ngResource'])

# jakarta-ee - 在 DB 中搜索时 EntityManager null 和 NullPointerException

> ID：16006320
> 
> 赞同：0
> 
> 时间：2013-04-15T01:24:39.627
> 
> 标签：jakarta-ee, jpa, netbeans-7

我真的是java ee的菜鸟

我想查询以验证电子邮件是否唯一

在我在网上搜索后，我很生气，我得出的结论是我的 EntityManeger 是空的

这是我的**实体 Customer**并且是一个查询**Customer.findByEmail**这是我的关注点

```
@Entity
@Table(name = "customer")
@NamedQueries({
@NamedQuery(name = "Customer.findAll", query = "SELECT c FROM Customer c"),
@NamedQuery(name = "Customer.findById", query = "SELECT c FROM Customer c WHERE c.id = :id"),
@NamedQuery(name = "Customer.findByName", query = "SELECT c FROM Customer c WHERE c.name = :name"),
@NamedQuery(name = "Customer.findByEmail", query = "SELECT c FROM Customer c WHERE c.email = :email"),
(...) 
```

我有一个**名为 CutomerFacade 的会话**

```
@Stateless
public class CustomerFacade extends AbstractFacade<Customer> {
@PersistenceContext(unitName = "AffableBeanPU")
public EntityManager em;

public List<Customer> GetPorEmail(String match){
   return  em.createNamedQuery("Customer.findByEmail").setParameter("email", match).getResultList();
} 
```

**在实体管理器**中避免 null 的解决方案是什么

 *** * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T13:09:59.497

确保您在 Java EE 服务器中运行并通过容器访问 SessionBean。

你在什么服务器上运行？您如何访问 SessionBean？**

# asp.net-mvc - POST 请求的表单身份验证失败，.Net MVC

> ID：16006321
> 
> 赞同：0
> 
> 时间：2013-04-15T01:24:41.240
> 
> 标签：asp.net-mvc, forms-authentication

在我的 .Net MVC 应用程序中，我有默认控制器，任何人都应该可以访问（因为它包含欢迎页面、注册、登录、密码重置方法等）。所有其他控制器都继承自具有授权属性的控制器。

我可以浏览到默认/索引和默认/注册页面（即任何 GET 类型的请求）。但是对默认控制器操作的任何 POST 请求都需要授权。例如，当用户输入电子邮件/密码并单击登录时，它会向 default/login 发出 POST 请求。

我尝试在 webconfig 中设置位置路径，但仍然没有运气。我注意到每个 POST 请求都返回值为空的表单授权 cookie，而 GET 请求不发送回 auth cookie。知道我错过了什么吗？

提前非常感谢:)

阿奴鲁达

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-27T15:19:04.363

你可以试试这个

```
[HttpPost]
[AllowAnonymous]
public ActionResult Index()
{
    //...
} 
```

# objective-c - 从 xib 自动调整子视图大小

> ID：16006322
> 
> 赞同：0
> 
> 时间：2013-04-15T01:24:42.640
> 
> 标签：objective-c, macos, cocoa

在我的应用程序中，window.contentView 大小为 700*500，我从 xib 初始化了一个名为 view1 的视图，大小为 480*300，将 view1 添加为 window.contentView 的子视图后，我需要自动将 view1 的大小调整为 700*500，我设置了 autoresizingMask 但它不起作用。

```
- (void)applicationDidFinishLaunching:(NSNotification *)aNotification
{
    self.rootViewController = [[TrendRootViewController alloc] initWithNibName:@"TrendRootViewController" bundle:[NSBundle mainBundle]];
    NSView *view1 =  self.rootViewController.view;
    [self.contentView addSubview:view1];
    NSLog(@"view1 frame %@",NSStringFromRect(view1.frame));
} 
```

view1 xib ![在此处输入图像描述](https://i.stack.imgur.com/XZ7cu.png)

我的应用程序：（红色视图是 view1） ![在此处输入图像描述](https://i.stack.imgur.com/NAFus.png)

奇怪的是 view1 的框架是“view1 frame {{0, 0}, {480, 300}}”，但如下图所示，view1 不在左上角位置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T01:37:55.083

您可以通过更改 IB 中调整大小框正上方的 Origin 框中的箭头位置来做到这一点。只需单击原点框的左上角，您的视图就会出现在左上角。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T18:36:16.033

> “很奇怪 view1 的框架是“view1 frame {{0, 0}, {480, 300}}”，但如下图所示，view1 不在左上角。”

OS X 不是 iOS，AppKit 也不是 UIKit。

iOS 中基于 UIKit 的视图的默认坐标系是左上原点 (ULO)，而 OS X 中基于 AppKit 的视图的默认坐标系是左下原点 (LLO)。

所以红色视图的框架是有意义的`{{0, 0}, {480, 300}}`，因为它的原点是在`{0, 0}`窗口的左下角`contentView`。

`UIViewController`与iOS中的某些s 不同，`NSViewController`它不会自动调整其视图的大小以适应窗口的大小。如果您希望视图的框架与窗口的框架相匹配，您有几个不同的选项。

一种选择是在将视图作为子视图添加到窗口之前自己设置视图的框架`contentView`：

```
NSView *redView = self.rootViewController.view; // force view to load
[redView setFrame:NSMakeRect(0.0, 0.0, NSWidth(self.window.frame),
                                       NSHeight(self.window.frame))];
[self.window.contentView addSubview:redView]; 
```

或者，在 Interface Builder 中，您可以添加一个`NSBox`与窗口内容视图大小相同的窗口。在 IB 中，将框的 Title Position 设置为`None`，Box Type 设置为`Custom`，Border Type 设置为`None`。将其“弹簧和支柱”（自动调整大小的掩码）设置为与 view1.xib 中的视图相同（这样当您调整窗口大小时，框也会随之调整大小）。然后为盒子创建一个`IBOutlet`，而不是将视图控制器`view`作为子视图添加到窗口中`contentView`，调用并传递视图控制器`NSBox`的`setContentView:`视图：

```
[self.box setContentView:self.rootViewController.view]; 
```

如`NSBox`'s[`setContentView:`](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/ApplicationKit/Classes/NSBox_Class/Reference/Reference.html#//apple_ref/occ/instm/NSBox/setContentView%3a)方法中所述，您传入的视图“...已调整大小以适应框的当前内容区域，并且框被标记为重新显示。” 换句话说，框会自动处理将视图调整为适合您的大小。

# python - 如何在给定html文件的情况下确定html表格的大小（以像素为单位）

> ID：16006331
> 
> 赞同：0
> 
> 时间：2013-04-15T01:25:35.630
> 
> 标签：python, node.js

我有一个 html 文件，其中包含各种 html 标签。这个 html 里面还有一堆表格。我正在使用 python 处理这个文件。当它由浏览器（最好是chrome或firefox）呈现时，如何找出大小（以像素为单位的长x宽）？

当您在浏览器上执行“检查元素”时，我本质上是在寻找信息，并且您能够看到各种元素的大小。我想在我的 python 代码中访问这个大小。

我正在使用 lxml 来解析我的 html，如果需要可以使用 selenium。

编辑：添加#node.js 以防我可以使用它在 shell 脚本中吐出所有表的大小，我可以在 python 中获取它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T10:57:08.567

您将要使用[Selenium WebDriver](http://docs.seleniumhq.org/docs/03_webdriver.jsp)在运行 Python 代码的计算机上安装的实际浏览器中打开 HTML 文件。

我不确定您将如何使用 Selenium WebDriver API 来找出渲染表的高度，但[该`value_of_css_property`方法](https://stackoverflow.com/a/15117720/20578)可能会做到。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T23:48:58.117

**如果**你可以调用 shellscript，**并且**可以使用 Node.js，我假设你也可以安装和使用[PhantomJS](http://phantomjs.org/)，它是一个*无头*WebKit 端口。（即一个真正诚实的 WebKit 渲染器，它不需要窗口即可工作。）这将让您使用 Javascript 和熟悉的 Web 库来操作文档。例如，以下为您获取徽标元素朝向 Stack Overflow 站点左上角的宽度：

```
page = require('webpage').create(); // create a new "browser"

page.open('http://stackoverflow.com/', function() {
  // callback when loading completes
  var logoWidth = page.evaluate(function() {
    // This runs in the rendered page and uses the version of jQuery that SO loads.
    return $('#hlogo').width();
  });

  console.log(logoWidth); // prints 250, the same as Chrome.

  phantom.exit(); // for some reason you need to exit manually
}); 
```

PhantomJS 的文档将告诉您更多关于您可以使用它做什么以及如何使用它的信息。

但是需要注意的是，加载页面需要一段时间，因为它需要获取 CSS 和脚本，并且通常会完成浏览器所做的一切。我不确定 PhantomJS 是否以及如何进行任何缓存，如果这样做，对同一站点的多个抓取重用相同的进程可能是有意义的。

# django - 我在 Django 模板中使用条件有什么问题？

> ID：16006338
> 
> 赞同：0
> 
> 时间：2013-04-15T01:26:26.667
> 
> 标签：django, django-templates

我在[我的 Django 模板使用 if 有什么问题？](https://stackoverflow.com/questions/16005757/what-is-wrong-with-my-django-templating-use-of-ifs)到目前为止，每一个回应都是，“这就是你如何为我给出的样本编写更多的 Python 代码。他们没有做的甚至暗示为什么我的条件是错误的并且可以改进。

"{% if ":" not in url.url %}" 和 "{% if time_zone.0 == entity.time_zone %}" 都出现了“'if' statement wrongly formatted”错误。这是什么？如何调整条件以使其不会崩溃。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T01:37:55.530

这只是一个猜测，但听起来您可能使用的是旧版本的 Django (<1.2)，其中尚不支持这些构造。在 Django <1.2 中，您必须使用（例如）`{% ifequal time_zone.0 entity.time_zone %}`而不是`{% if time_zone.0 == entity.time_zone %}`.

如果这确实是问题所在，如果可能的话，您可以升级 Django，或者您可以使用[这个 smartif templatetag](http://djangosnippets.org/snippets/1350/)，它实现了 Django >= 1.2 中的比较操作。该链接包含有关如何使用它的说明。不过，您可能需要执行自定义过滤器或其他方法来获得该`not in`功能，因为它看起来不像 smart_if 实现了该功能。

# javascript - 在 Twitter Bootstrap 的 Carousel 中触发事件

> ID：16006344
> 
> 赞同：2
> 
> 时间：2013-04-15T01:27:30.437
> 
> 标签：javascript, jquery, twitter-bootstrap

轮播滑动后，我想在 ID 之外的输入中添加一个值`myCarousel`。

轮播滑动后实现事件的函数如下：

```
$('#myCarousel').bind('slid', function() {
  $('input[name=linkOnly]').val('Test')
} 
```

一旦特定幻灯片滑动，我想触发一个事件。我试过类似的东西，`$('#myCarousel li[data-slide-to=1]').bind('slid', function() ...`但它没有注册。

任何帮助表示赞赏，谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T02:04:20.653

您可以在适当的事件上设置一个事件处理程序，然后根据幻灯片是`.current`. 例如，要在滑动 1 循环时触发一些 javascript：

```
$(document).on("slid", function(event) {
  if ($(event.target).find(".active").data("slide-to") == 1) {
    // do stuff
  }
}); 
```

从快速测试来看，这似乎不起作用，除非它附加到旋转木马上方的元素（如果你有多个旋转木马，你还需要稍微改变一下）。

**编辑**：快速浏览后，如果绑定到轮播本身，上述内容不起作用的原因是，直到事件触发`active`后才立即添加类`slid`（似乎如果将处理程序添加到父元素，当事件冒泡时，`active`该类被添加）。`slid`您可以通过使用`setTimeout`延迟触发的行为来解决此问题（即使超时也有效`0`）：

```
$("#myCarousel").on("slid", function(event) {
  var carousel = $(event.target);
  setTimeout(function() {
    if (carousel.find(".carousel-indicators .active").data("slide-to") === 1) {
      // do stuff
    }
  }, 0);
}); 
```

额外的代码是否值得取决于您，尽管它可能会更稳定一些。甚至可能值得稍微延迟（而不是`0`），以确保事情按您期望的方式工作。

# python - python需要if函数的帮助

> ID：16006353
> 
> 赞同：0
> 
> 时间：2013-04-15T01:29:15.347
> 
> 标签：python

我希望这个函数去测试 3 个语句并返回适当的响应。这三个陈述是，他们的预期反应是

'' - 得到响应“空格”，
'hello' - 得到响应“single word”，
'world' - 得到响应“another word”

问题是“世界”也给出了“单个词”而不是“再次单个词”的响应。python有什么方法可以检测到之前的响应是“单个词”，所以如果在第一个词之后输入另一个词，它会给出“再次单个词”的语句？

```
def return_statement(statement):
    if statement == (''):
        response = "blank space"
        return response
    if ' ' not in statement
        response = "single word"
        return response
    if ' ' not in statement and response == "single word":
        response = 'single word again'
        return response 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T01:32:40.083

在函数`return_statement`中，`response`是一个局部变量。这意味着在函数执行结束并返回后，`response`不再存在——我们说它的作用域就是它所在的函数。当你离开一个变量的作用域时，它就消失了。

以下是您可以采取的一些方法：

1) 使从它返回的`return_statement`keep的调用者周围，并且当它调用它时，除了. 这使得调用者负责。`response``response``statement``return_statement`

2）做`response`一个全局变量，所以它的范围是不确定的。

3）`response`创建一个类的实例变量。只要您继续使用相同的类实例，它的值`response`就会在调用之间持续存在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T01:39:53.517

要存储先前响应的状态，您可以向函数添加属性。我只是在不修改太多逻辑的情况下添加到您的功能。

```
def return_statement(statement):
    // Check if has attribute, otherwise init
    if not hasattr(return_statement, "prev"):
         return_statement.prev = ''
    if statement == (''):
        response = "blank space"
        // Store answer before returning
        return_statement.prev = response
        return response
    // Fix logic
    if ' ' not in statement:
        if "single word" in return_statement.prev:
            response = "single word again"
        else:
            response = "single word"
            // Store answer
            return_statement.prev = response
        return response 
```

# c# - ASP.NET FormsAuthentication：重新启动应用程序时必须再次登录

> ID：16006354
> 
> 赞同：2
> 
> 时间：2013-04-15T01:29:27.527
> 
> 标签：c#, asp.net, forms-authentication

我有一个使用 FormsAuthentication 的 ASP.NET 应用程序。每当我重新启动应用程序或 Web 服务器时，我的身份验证令牌都是无效的，我必须重新登录。怎么了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T01:29:27.527

默认情况下，FormsAuthentication 通过让客户端存储数据的加密副本来验证每个请求的身份验证数据。加密密钥存储在`Machine.config`. 使用的具体密钥在`<machineKey decryptionKey="YOUR KEY HERE">`.

如果您不提供解密密钥，则会在应用程序启动时自动生成一个。由于是随机生成的，所以每次重启应用都会有所不同。在验证阶段，FormsAuthentication 尝试解密身份验证数据并失败。然后用户不再登录。

有两种方法可以解决这个问题。

*   提供 machineKey in`Machine.config`将为 FormsAuthentication 提供一个一致的密钥以供使用，因此验证将通过先前应用程序运行的加密 cookie 成功。
*   在 Web.config 中使用`<forms protection="None" ... />`将禁用身份验证数据加密和验证。这是不安全的，只适合开发，因为用户互相模仿是微不足道的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T01:41:42.897

除非您另外指定，否则 asp.net 中的默认会话状态模式是进程内（缓存在内存中）。当应用程序关闭时，内存被清除，进程内会话缓存因此丢失。

@dhasenan 只有当应用程序部署在网络场或云中时，机器密钥配置才会成为问题。覆盖 Machinekey 元素的机器级配置的想法是确保多台机器使用完全相同的密钥。

因此，机器密钥应该不是问题，因为如果在应用程序级别未提供机器密钥，则将使用 machine.config 中的机器密钥，它是持久的和静态的，因此不会在会话之间重新生成。

# jquery - 如果选定值 = 'all'，则从过滤器中排除属性

> ID：16006356
> 
> 赞同：0
> 
> 时间：2013-04-15T01:29:28.257
> 
> 标签：jquery, filter, custom-data-attribute

下面的功能允许用户按数据属性过滤产品，并通过创建所选值的数组来同时按多个值进行过滤。我需要显示与任何过滤器匹配的所有结果，因此我使用`OR`语句构造了函数。如何修改它的响应方式，`checked.filter(".all")`以便它不显示所有产品，而只是不按该数据属性进行过滤？

我在这里发布了一个带有功能示例的小提琴：http: [//jsfiddle.net/chayacooper/hSwcr/1/](http://jsfiddle.net/chayacooper/hSwcr/1/)如果选中“无袖”+“红色”，则显示所有“无袖”或“红色”的项目. 如果用户随后选中“所有颜色”，我想忽略颜色过滤器*( `data-color="All"`)*并仅应用样式过滤器*( `data-style="Sleeveless"`)* - 以便它显示 2 个项目而不是所有项目。

```
 var selected = { color: [], style: [] };   
    $('.filterOptions').on("change", ":checkbox", function (e) {
        var type = $(e.delegateTarget).data("type");
        var $this = $(this);
        var attrValue = $this.data(type);
        if ($this.parent().hasClass("active")) {
            $this.parent().removeClass("active");
            selected[type].splice(selected[type].indexOf(attrValue),1);
        }
        else {
            $this.parent().addClass("active");
            selected[type].push(attrValue);
        }            
        var checked = $(":checked", ".filterOptions");            
        // show all of the available options if...
        if (checked.length == 0 || checked.filter(".all").length > 0) {
            $('#content').find('*').show();
        } 
        else {
            $("#content").find("*").hide();
            for (var key in selected) {
                $.each(selected[key], function(index,item) {
                    $('#content').find('[data-' + key + ' *="' + item + '"]').show();
                });
            }
        }
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T01:54:05.680

如何改变`if`逻辑：

```
 if (checked.length == 0 // ...no boxes are checked
            || // ...or...
            checked.filter(".all").length > 0) 
```

类似于：

```
 if (checked.not(".all").length == 0) 
```

这允许单个过滤器覆盖“全部”逻辑。

# ruby - 在 ruby 中使用 Savon gem 发送 SOAP 请求的问题

> ID：16006364
> 
> 赞同：3
> 
> 时间：2013-04-15T01:31:45.133
> 
> 标签：ruby, ruby-on-rails-3, soap, soapui, savon

我正在使用 Savon gem 与一家名为 vertex 的税务公司的肥皂 api 进行通信。api 端点可以在这里找到[https://sandbox.ondemand.vertexinc.com/vertex-ws/listVertexServices.jsp](https://sandbox.ondemand.vertexinc.com/vertex-ws/listVertexServices.jsp)。

由于一些 SSL 问题，我不得不切换 http 适配器以使用遏制。以下是我试图提出的请求的代码：

```
class Tax
  HTTPI.adapter = :curb

  def self.lookup_tax_areas
    client = Savon.client(wsdl: "https://sandbox.ondemand.vertexinc.com:443/vertex-ws/services/LookupTaxAreas60?wsdl")
    response = client.call(:lookup_tax_areas60, xml: LOOKUPTAX)
  end

end 
```

我收到以下错误消息：

```
Tax.lookup_tax_areas

  HTTPI GET request to sandbox.ondemand.vertexinc.com (curb)
  SOAP request: https://sandbox.ondemand.vertexinc.com/vertex-ws/services/LookupTaxAreas60
  SOAPAction: "LookupTaxAreas60", Content-Type: text/xml;charset=UTF-8, Content-Length: 676
<?xml version='1.0' encoding='UTF-8'?>
<!-- Sample Request for the Tax Areas Lookup Web Service -->
  <VertexEnvelope xmlns='urn:vertexinc:o-series:tps:6:0'
   xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance'>
<Login>
  <UserName>name</UserName>
    <Password>password</Password>
</Login>
<TaxAreaRequest>
<TaxAreaLookup asOfDate='2008-01-01'>
  <PostalAddress>
    <City>HUNTSVILLE</City>
    <MainDivision>AL</MainDivision>
    <SubDivision>MADISON</SubDivision>
    <PostalCode>35801</PostalCode>
    <Country>USA</Country>
  </PostalAddress>
 </TaxAreaLookup>
</TaxAreaRequest>
</VertexEnvelope>

HTTPI POST request to sandbox.ondemand.vertexinc.com (curb)
SOAP response (status 500)
<?xml version='1.0' encoding='UTF-8'?><S:Envelope  xmlns:S="http://schemas.xmlsoap.org/soap/envelope/">

<S:Body><S:Fault xmlns:ns4="http://www.w3.org/2003/05/soap-envelope">
<faultcode>S:Client</faultcode>  <faultstring>Couldn't create SOAP message due to 
exception: unexpected XML tag. expected: 
{http://schemas.xmlsoap.org/soap/envelope/}Envelope but found: {urn:vertexinc:o-
series:tps:6:0}VertexEnvelope</faultstring></S:Fault></S:Body></S:Envelope>
Savon::SOAPFault: (S:Client) Couldn't create SOAP message due to exception: unexpected 
XML tag. expected: {http://schemas.xmlsoap.org/soap/envelope/}Envelope but found: 
{urn:vertexinc:o-series:tps:6:0}VertexEnvelope
from /lib/savon/response.rb:70:in `raise_soap_and_http_errors!'
from /lib/savon/response.rb:13:in `initialize'
from /lib/savon/operation.rb:53:in `new'
from /lib/savon/operation.rb:53:in `call'
from /lib/savon/client.rb:36:in `call'
from /app/models/tax.rb:7:in `lookup_tax_areas' 
```

使用 SOAP UI，我得到的请求消息相当长，但这是一个缩减版本：

```
 <soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/"  xmlns:urn="urn:vertexinc:o-series:tps:6:0">
<soapenv:Header/>
<soapenv:Body>
  <urn:VertexEnvelope>
     <urn:Login>
        <!--Optional:-->
        <urn:UserName>test</urn:UserName>
        <!--Optional:-->
        <urn:Password>test</urn:Password>
        <!--Optional:-->
        <urn:TrustedId>?</urn:TrustedId>
     </urn:Login>
     <!--You have a CHOICE of the next 46 items at this level-->
     <urn:AccrualRequest documentNumber="?" postingDate="?" locationCode="?" returnAssistedParametersIndicator="?" returnGeneratedLineItemsIndicator="?" deliveryTerm="?" documentDate="?" transactionId="?" transactionType="?" simplificationCode="?" recoverableDate="?" postToJournal="true">
        <!--Optional:-->
        <urn:Currency isoCurrencyName="?" isoCurrencyCodeAlpha="?" isoCurrencyCodeNum="?"/>
        <!--Optional:-->
        <urn:OriginalCurrency isoCurrencyName="?" isoCurrencyCodeAlpha="?" isoCurrencyCodeNum="?"/>
        <!--Optional:-->
        <urn:Buyer isTaxExempt="false" exemptionReasonCode="?">
           <!--Optional:-->
           <urn:Company>?</urn:Company>
           <!--Optional:-->
           <urn:Division>?</urn:Division>
           <!--Optional:-->
           <urn:Department>?</urn:Department>
           <!--Optional:-->
           <urn:Recipient>
              <urn:RecipientCode classCode="?" isBusinessIndicator="?">?</urn:RecipientCode>
              <!--Zero or more repetitions:-->
              <urn:TaxRegistration isoCountryCode="?" mainDivision="?" hasPhysicalPresenceIndicator="?">
                 <!--Optional:-->
                 <urn:TaxRegistrationNumber>?</urn:TaxRegistrationNumber>
                 <!--0 to 4 repetitions:-->
                 <urn:NexusOverride locationRole="?" country="?" mainDivision="?" subDivision="?" city="?" district="?"/>
                 <!--Zero or more repetitions:-->
                 <urn:PhysicalLocation taxAreaId="?">
                    <!--Optional:-->
                    <urn:StreetAddress1>?</urn:StreetAddress1>
                    <!--Optional:-->
                    <urn:StreetAddress2>?</urn:StreetAddress2>
                    <!--Optional:-->
                    <urn:City>?</urn:City>
                    <!--Optional:-->
                    <urn:MainDivision>?</urn:MainDivision>
                    <!--Optional:-->
                    <urn:SubDivision>?</urn:SubDivision>
                    <!--Optional:-->
                    <urn:PostalCode>?</urn:PostalCode>
                    <!--Optional:-->
                    <urn:Country>?</urn:Country>
                 </urn:PhysicalLocation>
              </urn:TaxRegistration>
           </urn:Recipient>
           <!--Optional:-->
           <urn:Destination taxAreaId="?" locationCustomsStatus="?" locationCode="?" externalJurisdictionCode="?">
              <!--Optional:-->
              <urn:StreetAddress1>?</urn:StreetAddress1>
              <!--Optional:-->
              <urn:StreetAddress2>?</urn:StreetAddress2>
              <!--Optional:-->
              <urn:City>?</urn:City>
              <!--Optional:-->
              <urn:MainDivision>?</urn:MainDivision>
              <!--Optional:-->
              <urn:SubDivision>?</urn:SubDivision>
              <!--Optional:-->
              <urn:PostalCode>?</urn:PostalCode>
              <!--Optional:-->
              <urn:Country>?</urn:Country>
              <!--Optional:-->
              <urn:CurrencyConversion isoCurrencyName="?" isoCurrencyCodeAlpha="?" isoCurrencyCodeNum="?">?</urn:CurrencyConversion>
           </urn:Destination>
           <!--Optional:-->
           <urn:AdministrativeDestination taxAreaId="?" locationCustomsStatus="?" locationCode="?" externalJurisdictionCode="?">
              <!--Optional:-->
              <urn:StreetAddress1>?</urn:StreetAddress1>
              <!--Optional:-->
              <urn:StreetAddress2>?</urn:StreetAddress2>
              <!--Optional:-->
              <urn:City>?</urn:City>
              <!--Optional:-->
              <urn:MainDivision>?</urn:MainDivision>
              <!--Optional:-->
              <urn:SubDivision>?</urn:SubDivision>
              <!--Optional:-->
              <urn:PostalCode>?</urn:PostalCode>
              <!--Optional:-->
              <urn:Country>?</urn:Country>
              <!--Optional:-->
              <urn:CurrencyConversion isoCurrencyName="?" isoCurrencyCodeAlpha="?" isoCurrencyCodeNum="?">?</urn:CurrencyConversion>
           </urn:AdministrativeDestination>
           <!--Optional:-->
           <urn:ExemptionCertificate exemptionCertificateNumber="?">?</urn:ExemptionCertificate>
           <!--Zero or more repetitions:-->
           <urn:TaxRegistration isoCountryCode="?" mainDivision="?" hasPhysicalPresenceIndicator="?">
              <!--Optional:-->
              <urn:TaxRegistrationNumber>?</urn:TaxRegistrationNumber>
              <!--0 to 4 repetitions:-->
              <urn:NexusOverride locationRole="?" country="?" mainDivision="?" subDivision="?" city="?" district="?"/>
              <!--Zero or more repetitions:-->
              <urn:PhysicalLocation taxAreaId="?">
                 <!--Optional:-->
                 <urn:StreetAddress1>?</urn:StreetAddress1>
                 <!--Optional:-->
                 <urn:StreetAddress2>?</urn:StreetAddress2>
                 <!--Optional:-->
                 <urn:City>?</urn:City>
                 <!--Optional:-->
                 <urn:MainDivision>?</urn:MainDivision>
                 <!--Optional:-->
                 <urn:SubDivision>?</urn:SubDivision>
                 <!--Optional:-->
                 <urn:PostalCode>?</urn:PostalCode>
                 <!--Optional:-->
                 <urn:Country>?</urn:Country>
              </urn:PhysicalLocation>
           </urn:TaxRegistration>
        </urn:Buyer>
        <!--Optional:-->
           <!--Zero or more repetitions:-->
           <urn:TaxRegistration isoCountryCode="?" mainDivision="?" hasPhysicalPresenceIndicator="?">
              <!--Optional:-->
              <urn:TaxRegistrationNumber>?</urn:TaxRegistrationNumber>
              <!--0 to 4 repetitions:-->
              <urn:NexusOverride locationRole="?" country="?" mainDivision="?" subDivision="?" city="?" district="?"/>
              <!--Zero or more repetitions:-->
              <urn:PhysicalLocation taxAreaId="?">
                 <!--Optional:-->
                 <urn:StreetAddress1>?</urn:StreetAddress1>
                 <!--Optional:-->
                 <urn:StreetAddress2>?</urn:StreetAddress2>
                 <!--Optional:-->
                 <urn:City>?</urn:City>
                 <!--Optional:-->
                 <urn:MainDivision>?</urn:MainDivision>
                 <!--Optional:-->
                 <urn:SubDivision>?</urn:SubDivision>
                 <!--Optional:-->
                 <urn:PostalCode>?</urn:PostalCode>
                 <!--Optional:-->
                 <urn:Country>?</urn:Country>
              </urn:PhysicalLocation>
           </urn:TaxRegistration>
        </urn:Vendor>
        <!--1 or more repetitions:-->
        <urn:LineItem lineItemNumber="?" taxDate="?" isMulticomponent="?" locationCode="?" deliveryTerm="?" postingDate="?" costCenter="?" departmentCode="?" generalLedgerAccount="?" materialCode="?" projectNumber="?" usage="?" usageClass="?" vendorSKU="?" countryOfOriginISOCode="?" modeOfTransport="?" natureOfTransaction="?" intrastatCommodityCode="?" netMassKilograms="?" lineItemId="?" recoverableDate="?" titleTransfer="?" chainTransactionPhase="?">
           <!--Optional:-->
           <urn:Buyer isTaxExempt="false" exemptionReasonCode="?">
              <!--Optional:-->
              <urn:Company>?</urn:Company>
              <!--Optional:-->
              <urn:Division>?</urn:Division>
              <!--Optional:-->
              <urn:Department>?</urn:Department>
              <!--Optional:-->
              <urn:Recipient>
                 <urn:RecipientCode classCode="?" isBusinessIndicator="?">?</urn:RecipientCode>
                 <!--Zero or more repetitions:-->
                 <urn:TaxRegistration isoCountryCode="?" mainDivision="?" hasPhysicalPresenceIndicator="?">
                    <!--Optional:-->
                    <urn:TaxRegistrationNumber>?</urn:TaxRegistrationNumber>
                    <!--0 to 4 repetitions:-->
                    <urn:NexusOverride locationRole="?" country="?" mainDivision="?" subDivision="?" city="?" district="?"/>
                    <!--Zero or more repetitions:-->
                    <urn:PhysicalLocation taxAreaId="?">
                       <!--Optional:-->
                       <urn:StreetAddress1>?</urn:StreetAddress1>
                       <!--Optional:-->
                       <urn:StreetAddress2>?</urn:StreetAddress2>
                       <!--Optional:-->
                       <urn:City>?</urn:City>
                       <!--Optional:-->
                       <urn:MainDivision>?</urn:MainDivision>
                       <!--Optional:-->
                       <urn:SubDivision>?</urn:SubDivision>
                       <!--Optional:-->
                       <urn:PostalCode>?</urn:PostalCode>
                       <!--Optional:-->
                       <urn:Country>?</urn:Country>
                    </urn:PhysicalLocation>

     <urn:TaxAreaRequest>
        <!--Optional:-->
        <urn:TaxAreaLookup asOfDate="2008-01-01" lookupId="?">
           <!--You have a CHOICE of the next 3 items at this level-->
           <urn:TaxAreaId>?</urn:TaxAreaId>
           <urn:PostalAddress>
              <!--Optional:-->
              <urn:StreetAddress1>?</urn:StreetAddress1>
              <!--Optional:-->
              <urn:StreetAddress2>?</urn:StreetAddress2>
              <!--Optional:-->
              <urn:City>HUNTSVILLE</urn:City>
              <!--Optional:-->
              <urn:MainDivision>AL</urn:MainDivision>
              <!--Optional:-->
              <urn:SubDivision>MADISON</urn:SubDivision>
              <!--Optional:-->
              <urn:PostalCode>35801</urn:PostalCode>
              <!--Optional:-->
              <urn:Country>USA</urn:Country>
           </urn:PostalAddress>
           <urn:ExternalJurisdiction>
              <urn:ExternalJurisdictionCode>?</urn:ExternalJurisdictionCode>
              <urn:Country>?</urn:Country>
           </urn:ExternalJurisdiction>
        </urn:TaxAreaLookup>
     </urn:TaxAreaRequest>
     <urn:TaxAreaResponse>
        <!--Zero or more repetitions:-->
        <urn:TaxAreaResult taxAreaId="?" asOfDate="?" confidenceIndicator="?">
           <!--Zero or more repetitions:-->
           <urn:Jurisdiction jurisdictionLevel="?" jurisdictionId="?" effectiveDate="?" expirationDate="?" externalJurisdictionCode="?">?</urn:Jurisdiction>
           <!--Zero or more repetitions:-->
           <urn:PostalAddress>
              <!--Optional:-->
              <urn:StreetAddress1>?</urn:StreetAddress1>
              <!--Optional:-->
              <urn:StreetAddress2>?</urn:StreetAddress2>
              <!--Optional:-->
              <urn:City>?</urn:City>
              <!--Optional:-->
              <urn:MainDivision>?</urn:MainDivision>
              <!--Optional:-->
              <urn:SubDivision>?</urn:SubDivision>
              <!--Optional:-->
              <urn:PostalCode>?</urn:PostalCode>
              <!--Optional:-->
              <urn:Country>?</urn:Country>
           </urn:PostalAddress>
           <!--Zero or more repetitions:-->
           <urn:Status lookupResult="?">?</urn:Status>
        </urn:TaxAreaResult>
     </urn:TaxAreaResponse>
     <urn:FindTaxAreasRequest>
        <!--1 or more repetitions:-->
        <urn:TaxAreaLookup asOfDate="?" lookupId="?">
           <!--You have a CHOICE of the next 3 items at this level-->
           <urn:TaxAreaId>?</urn:TaxAreaId>
           <urn:PostalAddress>
              <!--Optional:-->
              <urn:StreetAddress1>?</urn:StreetAddress1>
              <!--Optional:-->
              <urn:StreetAddress2>?</urn:StreetAddress2>
              <!--Optional:-->
              <urn:City>?</urn:City>
              <!--Optional:-->
              <urn:MainDivision>?</urn:MainDivision>
              <!--Optional:-->
              <urn:SubDivision>?</urn:SubDivision>
              <!--Optional:-->
              <urn:PostalCode>?</urn:PostalCode>
              <!--Optional:-->
              <urn:Country>?</urn:Country>
           </urn:PostalAddress>
           <urn:ExternalJurisdiction>
              <urn:ExternalJurisdictionCode>?</urn:ExternalJurisdictionCode>
              <urn:Country>?</urn:Country>
           </urn:ExternalJurisdiction>
        </urn:TaxAreaLookup>
     </urn:FindTaxAreasRequest>
     <urn:FindTaxAreasResponse>
        <!--Zero or more repetitions:-->
        <urn:TaxAreaLookupResult lookupId="?">
           <!--Zero or more repetitions:-->
           <urn:TaxAreaResult taxAreaId="?" asOfDate="?" confidenceIndicator="?">
              <!--Zero or more repetitions:-->
              <urn:Jurisdiction jurisdictionLevel="?" jurisdictionId="?" effectiveDate="?" expirationDate="?" externalJurisdictionCode="?">?</urn:Jurisdiction>
              <!--Zero or more repetitions:-->
              <urn:PostalAddress>
                 <!--Optional:-->
                 <urn:StreetAddress1>?</urn:StreetAddress1>
                 <!--Optional:-->
                 <urn:StreetAddress2>?</urn:StreetAddress2>
                 <!--Optional:-->
                 <urn:City>?</urn:City>
                 <!--Optional:-->
                 <urn:MainDivision>?</urn:MainDivision>
                 <!--Optional:-->
                 <urn:SubDivision>?</urn:SubDivision>
                 <!--Optional:-->
                 <urn:PostalCode>?</urn:PostalCode>
                 <!--Optional:-->
                 <urn:Country>?</urn:Country>
              </urn:PostalAddress>
              <!--Zero or more repetitions:-->
              <urn:Status lookupResult="?">?</urn:Status>
           </urn:TaxAreaResult>
           <!--Optional:-->
           <urn:LookupException>
              <!--Optional:-->
              <urn:ExceptionType>?</urn:ExceptionType>
              <!--Optional:-->
              <urn:RootCause>?</urn:RootCause>
           </urn:LookupException>
        </urn:TaxAreaLookupResult>
     </urn:FindTaxAreasResponse>
     <urn:VersionRequest/>
     <urn:VersionResponse>
        <!--Optional:-->
        <urn:ProductVersions>
           <!--1 or more repetitions:-->
           <urn:ProductVersion productName="?">?</urn:ProductVersion>
        </urn:ProductVersions>
        <!--Optional:-->
        <urn:LibraryVersions>
           <!--1 or more repetitions:-->
           <urn:LibraryVersion libraryName="?" libraryOwner="?">?</urn:LibraryVersion>
        </urn:LibraryVersions>
        <!--Optional:-->
        <urn:DatabaseVersions>
           <!--1 or more repetitions:-->
           <urn:DatabaseVersion logicalName="?">
              <urn:SchemaVersion>?</urn:SchemaVersion>
              <urn:PlatformVersion vendorName="?">?</urn:PlatformVersion>
              <urn:DriverVersion driverName="?">?</urn:DriverVersion>
              <!--Optional:-->
              <urn:DataContentVersions>
                 <!--1 or more repetitions:-->
                 <urn:DataContentVersion contentName="?">?</urn:DataContentVersion>
              </urn:DataContentVersions>
           </urn:DatabaseVersion>
        </urn:DatabaseVersions>
        <!--Optional:-->
        <urn:ConfigurationVersion>?</urn:ConfigurationVersion>
        <!--Optional:-->
        <urn:MessageResourceVersion>?</urn:MessageResourceVersion>
        <!--Optional:-->
        <urn:OperatingSystemVersion operatingSystemName="?">?</urn:OperatingSystemVersion>
        <!--Optional:-->
        <urn:JavaVirtualMachineVersion jvmName="?">?</urn:JavaVirtualMachineVersion>
     </urn:VersionResponse>
     <!--Optional:-->
     <urn:ApplicationData>
        <!--Optional:-->
        <urn:Sender>?</urn:Sender>
        <!--Optional:-->
        <urn:MessageLogging returnLogEntries="?">
           <!--Zero or more repetitions:-->
           <urn:OverrideLoggingThreshold thresholdScope="?">?</urn:OverrideLoggingThreshold>
        </urn:MessageLogging>
        <!--Zero or more repetitions:-->
        <urn:LogEntry logLevel="?" instanceId="?" threadId="?" className="?">
           <urn:Message>?</urn:Message>
           <!--Optional:-->
           <urn:Exception>?</urn:Exception>
        </urn:LogEntry>
        <!--Optional:-->
        <urn:ResponseTimeMS>?</urn:ResponseTimeMS>
     </urn:ApplicationData>
  </urn:VertexEnvelope> 
```

我得到它的工作谢谢！

正确的格式是：

```
 "<soapenv:Envelope xmlns:soapenv='http://schemas.xmlsoap.org/soap/envelope/' xmlns:urn='urn:vertexinc:o-series:tps:6:0'>
 <soapenv:Header/>
 <soapenv:Body>
  <urn:VertexEnvelope>
     <urn:Login>
        <urn:UserName>test</urn:UserName>
        <urn:Password>test</urn:Password>
     </urn:Login>
     <urn:TaxAreaRequest>
        <urn:TaxAreaLookup asOfDate='2008-01-01' >
           <urn:PostalAddress>
              <urn:City>HUNTSVILLE</urn:City>
              <urn:MainDivision>AL</urn:MainDivision>
              <urn:SubDivision>MADISON</urn:SubDivision>
              <urn:PostalCode>35801</urn:PostalCode>
              <urn:Country>USA</urn:Country>
           </urn:PostalAddress>
        </urn:TaxAreaLookup>
     </urn:TaxAreaRequest>
  </urn:VertexEnvelope>
  </soapenv:Body>
</soapenv:Envelope>" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T15:59:28.780

```
 "<soapenv:Envelope xmlns:soapenv='http://schemas.xmlsoap.org/soap/envelope/' xmlns:urn='urn:vertexinc:o-series:tps:6:0'>
<soapenv:Header/>
<soapenv:Body>
 <urn:VertexEnvelope>
 <urn:Login>
    <urn:UserName>test</urn:UserName>
    <urn:Password>test</urn:Password>
 </urn:Login>
 <urn:TaxAreaRequest>
    <urn:TaxAreaLookup asOfDate='2008-01-01' >
       <urn:PostalAddress>
          <urn:City>HUNTSVILLE</urn:City>
          <urn:MainDivision>AL</urn:MainDivision>
          <urn:SubDivision>MADISON</urn:SubDivision>
          <urn:PostalCode>35801</urn:PostalCode>
          <urn:Country>USA</urn:Country>
       </urn:PostalAddress>
    </urn:TaxAreaLookup>
 </urn:TaxAreaRequest>
 </urn:VertexEnvelope>
 </soapenv:Body>
</soapenv:Envelope>" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-27T21:32:53.027

您是否尝试过将 CalculateTaxString 与 Vertex 一起使用？我想知道它是否应该看起来像这样。任何帮助都会很棒。

```
"<soapenv:Envelope xmlns:soapenv='http://schemas.xmlsoap.org/soap/envelope/' xmlns:urn='urn:vertexinc:o-series:tps:6:0'>
<soapenv:Body>
 <urn:VertexEnvelope>
 <urn:Login>
    <urn:UserName>Dmainc</urn:UserName>
    <urn:Password>Monday1</urn:Password>
 </urn:Login>
 <urn:QuatationRequest documentDate='2008-01-01' transactionType="SALE">
    <urn:Currency/>
      <urn:Customer>
       <urn:CustomerCode classCode="2002"/>
       <urn:Destination>
          <urn:City>Huntsville</urn:City>
          <urn:MainDivision>AL</urn:MainDivision>
          <urn:SubDivision>Madison</urn:SubDivision>
          <urn:PostalCode>35801</urn:PostalCode>
          <urn:Country>USA</urn:Country>
       </urn:Destination>
      </urn:Customer>
      <urn:LineItem lineItemNumber="1" lineItemId="1" isMulticomponent="false">
        <urn:Product productClass="product class attribute value">product code value</urn:Product>
        <urn:Quantity>1.0</urn:Quantity>
        <urn:Freight>0</urn:Freight>
        <urn:UnitPrice>1000</urn:UnitPrice>
        <urn:ExtendedPrice>1000</urn:ExtendedPrice>
      </urn:LineItem> 
 </urn:QuatationRequest>
</urn:VertexEnvelope>
</soapenv:Body>
</soapenv:Envelope>" 
```

# groovy - 在 Application.groovy 问题中更改启动 MVC 组

> ID：16006365
> 
> 赞同：1
> 
> 时间：2013-04-15T01:31:45.940
> 
> 标签：groovy, intellij-idea, griffon

我使用 IntelliJ 创建了新的 Groffin 模块。系统提示我使用 create-app 命令。创建一个模块很好，正如您所知，默认情况下，当您运行应用程序时，它会显示带有默认内容“内容在此处”的小程序。

接下来，我在 Application.groovy 中添加了第二个**登录**MVC 组：

```
application {
    title = 'Soms'
    startupGroups = ['login']

    // Should Griffon exit when no Griffon created frames are showing?
    autoShutdown = true

    // If you want some non-standard application class, apply it here
    //frameClass = 'javax.swing.JFrame'
}
mvcGroups {
    // MVC Group for "soms"
    'soms' {
        model      = 'soms.SomsModel'
        view       = 'soms.SomsView'
        controller = 'soms.SomsController'
    }

    // MVC Group for "login"
    'login' {
        model       = 'soms.LoginModel'
        view        = 'soms.LoginView'
        controller  = 'soms.LoginController'
    }

} 
```

我还创建了：

1.  LoginModel.groovy（groovy 类）
2.  LoginController.groovy (groovy 类)
3.  LoginView.groovy (groovy 脚本)

在相应的文件夹中。

当我运行项目时，它给出了错误：

> 基本目录：D:\work\griffon\soms 运行脚本 C:\Griffon-1.2.0\scripts\RunApp.groovy 解决依赖关系... 依赖关系在 633 毫秒内解决。环境设置为开发解决框架插件依赖关系...框架插件依赖关系在 1114 毫秒内解决。解决插件依赖关系...插件依赖关系在 741 毫秒内解决。[griffonc] 将 1 个源文件编译到 d:\Users\akarasaev.griffon\1.2.0\projects\soms\classes\main 正在启动应用程序... 2013-04-15 10:26:44,788 [main] INFO griffon.swing .SwingApplication - 初始化所有启动组：[登录] 2013-04-15 10:26:46,311 [AWT-EventQueue-0] 错误 org.codehaus.griffon.runtime.builder.UberBuilder - 构建 soms.LoginView@ 时出错34a083f2 groovy.lang.MissingPropertyException：没有这样的属性：类的中心：org.codehaus。

当我尝试从命令提示符运行时，也会发生同样的错误。

环境：

1.  赢 7 专业版，64 位
2.  IntelliJ IDEA 12.1 版
3.  Griffon-1.2.0 JDK 1.6

**登录模型.groovy**：

```
package soms

import groovy.beans.Bindable
import griffon.transform.PropertyListener
import static griffon.util.GriffonNameUtils.isBlank

@Bindable
@PropertyListener(enabler)
class LoginModel {
    String login
    String password
    boolean submitEnabled
    boolean resetEnabled

    private enabler = { e ->
        submitEnabled = !isBlank(login) && !isBlank(password)
        resetEnabled =  !isBlank(login) || !isBlank(password)
    }
} 
```

**登录视图.groovy**：

```
package soms

application(title: 'Login',
        preferredSize: [320, 240],
        pack: true,
        locationByPlatform: true
)

borderLayout()
panel(constraints: CENTER, border: emptyBorder(6)) {
    gridLayout(rows:3, columns:2, hgap:6, vgap:6)

    label: 'login:'
    textField columns: 20, text: bind(target: model, 'login', mutual: true)

    label: 'password:'
    textField columns: 20, text: bind(target: model, 'password', mutual: true)
}

panel(constraints: SOUTH){
    gridLayout(rows:1, cols:2, hgap:6, vgap:6 )
    button('reset', actionPerformed: controller.reset, enabled: bind{model.resetEnabled})
    button('submit', actionPerformed: controller.reset, enabled: bind{model.submitEnabled})
} 
```

**登录控制器.groovy**：

```
package soms

class LoginController {
    def model
    def view
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T02:29:54.240

我发现我的 LoginController.groovy 不完整。现在它正在工作并且正确的 LoginController.groovy 如下：

```
package soms

import griffon.transform.Threading

class LoginController {
    def model
    def view

    @Threading(Threading.Policy.SKIP)
    def reset = {
        model.login = ''
        model.password = ''
    }
    def submit = {
        println "Login: ${model.login}"
        println "Password: ${model.password}"
    }
} 
```

# c++ - 如何在 C++ 中将两个 10x10 数组相乘？

> ID：16006370
> 
> 赞同：2
> 
> 时间：2013-04-15T01:32:26.500
> 
> 标签：c++, arrays, multidimensional-array, matrix-multiplication

我目前正在尝试编写一个程序，该程序使用一个函数，该函数将 3 个不同的 10x10 数组作为参数，并用前 2 个数组的乘积填充第三个数组。

我已经在网上搜索并尝试自己解决问题，但到目前为止，我只想到了这个：

（我用 2 填充第一个数组，用 3 填充第二个数组）

```
#include <iostream>

using std::cout;
using std::cin;
using std::endl;

/************************************************
** Function: populate_array1
** Description: populates the passed array with 2's
** Parameters: 10x10 array
** Pre-Conditions:
** Post-Conditions:
*************************************************/
void populate_array1(int array[10][10])
{
  int i, n;
  for (i = 0; i<10; i++)
  {
    for (n = 0; n<10; n++)
    {
      array[i][n] = 2;
    }
  }
}

/************************************************
** Function: populate_array2
** Description: populates the passed array with 3's
** Parameters: 10x10 array
** Pre-Conditions:
** Post-Conditions:
*************************************************/
void populate_array2(int array[10][10])
{
  int i, n;
  for (i = 0; i<10; i++)
  {
    for (n = 0; n<10; n++)
    {
      array[i][n] = 3;
    }
  }
}

/************************************************
** Function: multiply_arrays
** Description: multiplies the first two arrays,
and populates the 3rd array with the products
** Parameters: 3 10x10 arrays
** Pre-Conditions:
** Post-Conditions:
*************************************************/
void multiply_arrays(int array1[10][10], int array2[10][10], int array3[10][10])
{
  int i, n, j;
  for (i = 0; i<10; i++)
  {
    for (n = 0; n<10; n++)
    {
      for (j = 0; j<10; j++)
      {
        array3[i][n] += array1[i][j]*array2[j][n];
      }
    }
  }
}

int main()
{
  int array1[10][10];
  int array2[10][10];
  int array3[10][10];

  populate_array1(array1); // Fill first array with 2's
  populate_array2(array2); // Fill second array with 3's

  multiply_arrays(array1, array2, array3);

  cout << array1[5][2];
  cout << endl << array2[9][3];
  cout << endl << array3[8][4];

  return 0;
} 
```

据我了解，这应该有效，但是每当我打印第三个数组中的任何单元格时，我都没有得到 60，如下所示：

![代码输出](https://i.imgur.com/a32yvUv.jpg)

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-15T01:36:10.193

您需要将 array3 中的所有值初始化为 0。它不是为您完成的。如果您不这样做，那么您将使用随机值作为初始值。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-15T01:46:47.803

将 array3 初始化为的另一个选项`zero`是

```
int array3[10][10] = {{}}; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-15T01:36:28.467

你没有初始化`array3`，所以你最终得到随机值`array3`，尝试添加这个函数：

```
void populate_array3(int array[10][10])
{
  int i, n;
  for (i = 0; i<10; i++)
  {
    for (n = 0; n<10; n++)
    {
      array[i][n] = 0;
    }
  }
} 
```

并调用它`main`：

```
populate_array3(array3); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-15T01:36:22.947

您需要在向其中添加内容之前初始化 array3，即在该计算函数中执行 += 之前

```
int i, n;
for (i = 0; i<10; i++)
{
   for (n = 0; n<10; n++)
   {
       array3[i][n] = 0;
   }
} 
```

# javascript - 给定包含文本的图像，有哪些字符隔离技术？

> ID：16006375
> 
> 赞同：-2
> 
> 时间：2013-04-15T01:32:56.423
> 
> 标签：javascript, image, image-processing, ocr

例如，假设您获得了具有白色背景和黑色文本的图像。我正在尝试找到一种方法来分隔单词中的每个字符，也许每个字符的边界矩形就足够了。我希望它足够清楚，否则我可以发布示例。那里的任何技术，在谷歌还没有找到太多。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T00:43:21.927

如果执行[Tesseract](http://code.google.com/p/tesseract-ocr/wiki/TrainingTesseract3)训练命令来制作盒子文件，输出文件将包含每个字符的边界框坐标。

```
tesseract someimage.tif output batch.nochop makebox 
```

# javascript - 传递对象数组 - 意外的令牌 [

> ID：16006377
> 
> 赞同：0
> 
> 时间：2013-04-15T01:32:58.867
> 
> 标签：javascript, jquery

```
function showConfirm(reArray) {

    var theHTML = '';
    var optionArray = ["Option 1", "Option 2", "Option 3", "Option 4", "Option 5", "Option 6", "Option 7"]; 
    var myButtons = {};
    var j = 1;

    for(var i = 0; i < reArray.length; i++){

                theHTML  +='<div style="text-align:center">' 
                         + '<span>'+j+'.</span>&nbsp;&nbsp;&nbsp;&nbsp;'
                         + '<span>'+reArray[i].RoadNo+'</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'
                         + '<span>'+compass_image(reArray[i].Bearing)+'</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'
                         + '</div><br/>'    

                j++;
        }

    for(i = 0; i < reArray.length; i++){

    ERROR HERE -----> var placeFunction = function(reArray[i]){

                                plotRoadInfo(reArray[i]);
                                $(this).dialog("close");
                            };

                            myButtons[optionArray[i]] = placeFunction;
    }

    $( "#dialog-modal" ).dialog({
      height: 300,
      modal: true,
      buttons: myButtons

    });

    $('#multipleRE').append(theHTML);
} 
```

因此，该函数获得了一个对象数组（reArray），然后它为一个 jquery 对话框创建了一个按钮数组（myButtons）。我试图将 reArray[i] 传递给每个按钮将使用的函数，即执行 plotRoadInfo(reArray[i]);

我不断收到“Unexpected token [”，我无法弄清楚为什么我的生活。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T01:34:42.527

您无需在 JavaScript 中指定参数的类型，只需使用名称，然后将其用作函数中的数组即可。

```
var placeFunction = function(reArray){
    plotRoadInfo(reArray[i]);
    $(this).dialog("close");
}; 
```

我认为你甚至不需要指定它，因为你指的是内部函数可以访问的数组。

```
var placeFunction = function() {
    plotRoadInfo(reArray[i]);
    $(this).dialog("close");
}; 
```

正如 Pointy 指出的那样，这将遇到`i`共享变量的问题，因此每个函数都会引用，`reArray[reArray.length]`因为循环将在`i === reArray.length`. 解决此问题的一种常见方法是调用一个接受`i`作为参数的函数，该参数将返回一个函数。

```
var placeFunction = (function (item) {
    return function() {
        plotRoadInfo(item);
        $(this).dialog("close");
    };
}(reArray[i])); 
```

阅读闭包以更深入地了解其工作原理。[这是发生这种情况的另一个例子](https://stackoverflow.com/a/1331796/1156119)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-15T01:38:14.497

您的语法不正确。

我相信你想要做的是以下几点：

```
var placeFunction = 
    (function(arrayitem){
        return function(){
                   plotRoadInfo(arrayitem);
                   $(this).dialog("close");
               };

     })(reArray[i]);

myButtons[optionArray[i]] = placeFunction; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-15T01:33:48.903

为什么参数有索引？

```
function(reArray[i]) 
```

你的意思

```
function(reArray) 
```

# windows - Windows Mobile 中 DataGrid 的列宽

> ID：16006380
> 
> 赞同：0
> 
> 时间：2013-04-15T01:33:30.370
> 
> 标签：windows, vb.net, mobile

我在编辑 datagridview 的宽度时遇到问题。它没有改变宽度。这是我的源代码。

```
 oDotNet.SqlDb.strCommand = "SELECT TOP 1 ItemCode, ItemName FROM [" & oAPP.oSQLDatabase & "]..OITM"
        dgMain.DataSource = oDotNet.SqlDb.Ds.Tables(0).DefaultView

        Dim oTableStyle As New DataGridTableStyle
        oTableStyle.MappingName = oDotNet.SqlDb.Ds.Tables(0).DefaultView.GetType().Name
        Dim oTextBoxColumn As New DataGridTextBoxColumn
        oTextBoxColumn.Width = 400
        oTextBoxColumn.MappingName = "ItemName"
        oTextBoxColumn.HeaderText = "ItemName"
        oTableStyle.GridColumnStyles.Add(oTextBoxColumn)
        dgMain.TableStyles.Clear()
        dgMain.TableStyles.Add(oTableStyle) 
```

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-20T13:29:21.170

删除下面的行并执行它的工作：

```
 oTableStyle.MappingName = oDotNet.SqlDb.Ds.Tables(0).DefaultView.GetType().Name 
```

# java - Tomcat 服务器错误

> ID：16006381
> 
> 赞同：0
> 
> 时间：2013-04-15T01:33:45.497
> 
> 标签：java, tomcat

启动应用程序时出现以下错误：

```
SEVERE: Exception starting filter CSRF
java.lang.ClassNotFoundException: org.apache.catalina.filters.CsrfPreventionFilter
    at java.net.URLClassLoader$1.run(URLClassLoader.java:202) 
```

试图找到罐子，`org.apache.catalina.filters.CsrfPreventionFilter`但`findjar.com`找不到任何东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T01:44:43.600

您应该检查您的 tomcat 安装，因为这是一个 tomcat 类。

[http://tomcat.apache.org/tomcat-6.0-doc/config/filter.html#CSRF_Prevention_Filter](http://tomcat.apache.org/tomcat-6.0-doc/config/filter.html#CSRF_Prevention_Filter)

# c# - C# Data Loss between windows

> ID：16006382
> 
> 赞同：1
> 
> 时间：2013-04-15T01:33:45.990
> 
> 标签：c#, wpf, listbox, nullreferenceexception

In order to navigate my application you are presented with the Mainwindow on load up. There is a button that you can click that opens the TeacherTools window. From here you are able to add new students to the list. On this window I have a back button that will return you to the MainWindow and I can confirm that the information is still usable here. I'm having an issue whereby I open a 3rd window which is a Exam window in which students are presented with questions afterwards and their score should be added to the currently loaded Student visa his name.

```
private List<Student> studentList = new List<Student>();

public partial class MainWindow : Window
{
    TeacherTools teachTools = new TeacherTools();
    Learning myLearning = new Learning();

    private void teachAdmin_Click(object sender, RoutedEventArgs e)
    {
        this.Hide();
        teachTools.ShowDialog();
        this.Show();
    }

    private void Selection_Click(object sender, RoutedEventArgs e)
    {
        this.Hide();
        myTest.studentName.Text = studentsList.SelectedValue.ToString();
        myTest.ShowDialog();
        this.Show();
    }

}

//Exam Window
public partial class Test : Window
{
    //I'm sure its not this
    Student loadedStudent = new Student();
    TeacherTools teachTools = new TeacherTools();

    public void(private void finishTest()
    {

        loadedStudent = teachTools.Kids.Find(delegate(Student s) { return s.Name == studentName.Text; }); //This line 
        loadedStudent.Attempted = true;
        loadedStudent.Score = score;
    }
} 
```

As such i'm getting a "Object reference not set to an instance of an object. - NullReferenceException". I'm not sure why this is happening because I can make modifications to a Student object from the MainWindow.

Edit: TeacherTools Class

```
public partial class TeacherTools : Window
{
    private List<Student> studentList = new List<Student>();

    public TeacherTools()
    {
        InitializeComponent();
    }

    public List<Student> Kids
    {
       get { return studentList; }
       //set { studentList = value; }
    }

    private void newStudentClick(object sender, RoutedEventArgs e)
    {
        Student student = new Student();
        student.Name = nameBox.Text;
        studentList.Add(student);
        studentData.ItemsSource = studentList;
        studentData.Items.Refresh();
        //nameBox
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T01:41:34.603

In your window named "Test" you are using the object teachTools but you haven't created this anywhere.

You do have a similarly named object in your MainWindow, but this is not shared with the Test-window. You should also create a new instance in the Test-window

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T02:49:08.673

Either studentList contains an item that is null (which would cause the s.Name part to throw), or studentName is null (which would cause the studentName.Text part to throw).

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-15T03:39:17.927

It appears that when you open the `Test` window you are creating a new instance of the `TeacherTools` window, which means there are no elements in the `Kids` list. If this is the way you wanted to accomplish this, you could set the `TeacherTools` instance in the `Test` window as a public property and pass the object from the main window, like so:

```
//Test Window
public partial class Test : Window
{
    Student loadedStudent = new Student();
    public TeacherTools teachTools { get; set; }
    ...
}

//Main Window
public partial class MainWindow : Window
{
    ...

    private void Selection_Click(object sender, RoutedEventArgs e)
    {
        this.Hide();
        myTest.teachTools = this.teachTools;
        myTest.ShowDialog();
        this.Show();
    }
} 
```

Note that I haven't tested this, but I think this is the approach you are looking for. I will also say that you could be playing a dangerous game by passing the different windows between each other instead of using a class to handle this.

# django - Django 测试 DeleteView

> ID：16006401
> 
> 赞同：5
> 
> 时间：2013-04-15T01:36:22.773
> 
> 标签：django, unit-testing

所以在 DeleteView 中，GET 请求返回一个确认页面，一个简单的 POST 请求除了`csrf_token`实际获取 DeleteView 来删除对象之外没有其他字段，然后用户被重定向到`success_url`.

如何测试此功能？在我的`myclass_confirm_delete.html`文件中，我基本上有：

```
<form action="{% url 'remove_myclass' object.id %}" method="post">
{% csrf_token %}
    <p>Are you sure you want to remove {{ object.name }}?</p>
    <input type="submit" value="Yes" class="btn btn-primary" />
</form> 
```

`{% url 'remove_myclass' object.id %}`相同页面的 URL 在哪里。它适用于我的浏览器。当我单击“是”时，它会将我重定向到成功页面，并且该`myclass`对象已从数据库中删除。

现在我正在尝试使用单元测试自动测试它。我基本上试试

```
response = self.client.get(reverse('remove_myclass', args=(myobject.id,)), follow=True)
self.assertContains(response, 'Are you sure you want to remove') # THIS PART WORKS
self.client.post(reverse('remove_myclass', args=(myobject.id,)), follow=True)
self.assertRedirects(response, reverse('myclass_removed'), status_code=302) # FAILS; status code is 200 
```

如果我尝试`print response`，我会得到与使用 GET 请求时完全相同的响应。

似乎在单元测试时，无论我尝试在 POST 请求中发送什么样的数据，它仍然被视为 GET 请求......

我基于班级的观点：

```
class MyclassDelete(DeleteView):
    model = myclass
    success_url = '/myclass-removed/' 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-15T07:45:08.453

是的，这是因为您忘记将`post`请求分配给`response`，所以您检查了两次相同的响应。

```
response = self.client.get(reverse('remove_myclass', args=(myobject.id,)), follow=True)
self.assertContains(response, 'Are you sure you want to remove') # THIS PART WORKS

post_response = self.client.post(reverse('remove_myclass', args=(myobject.id,)), follow=True)
self.assertRedirects(post_response, reverse('myclass_removed'), status_code=302) 
```

这应该可以解决问题。

此外，只是一个提示，尝试在每个单元测试中多次断言在单元测试时被认为是不好的做法。而是尝试将其分解，以便一个测试测试.`GET`和一个测试测试`POST`.

```
from django.test import TestCase

class TestDifferentRequestMethods(TestCase):

    def test_my_get_request(self):
        response = self.client.get(reverse('remove_myclass', args=(myobject.id,)), follow=True)
        self.assertContains(response, 'Are you sure you want to remove') # THIS PART WORKS

    def test_my_post_request(self):
        post_response = self.client.post(reverse('remove_myclass', args=(myobject.id,)), follow=True)
        self.assertRedirects(post_response, reverse('myclass_removed'), status_code=302) 
```

这使得调试更容易，并且有时可以在遇到这些麻烦时节省！

**UPDATE**意识到我还没有完成包含测试的好课程。

# python - 如何在列表中找到最常见的元素，如果有平局，最后出现的那个是第一个？

> ID：16006404
> 
> 赞同：5
> 
> 时间：2013-04-15T01:36:38.690
> 
> 标签：python

基本上如果给出一个列表

```
events = [123,123,456,456,456,123] 
```

我希望它*返回* **456**，因为最后一次看到 456 早于最后一次看到 123。

我制作了由初始数字列表的计数和索引组成的列表。我还制作了一个字典，其中键是事件（原始部分）中的元素，hte 值是键的元素`.count()`。

我真的不知道从这里去哪里，可以使用一些帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-15T01:56:37.263

# 方法

查找最常出现的项目 (Counter.most_common)。然后在那些具有最小索引的候选中找到项目（枚举到索引字典中，{index: key}.iteritems() 的最小值）。

# 代码

从@gnibbler 和@Jeff 大量窃取：

```
from collections import Counter

def most_frequent_first(events):
    frequencies = Counter(events)
    indexes = {event: i for i, event in enumerate(events)}
    most_frequent_with_indexes = {indexes[key]: key for key, _ in frequencies.most_common()}
    return min(most_frequent_with_indexes.iteritems())[1]

events = [123,123,456,456,456,123, 1, 2, 3, 2, 3]
print(most_frequent_first(events)) 
```

# 结果

```
>>> print(most_frequent_first(events))
456 
```

# 代码

一段更好的代码会为您提供频率和索引，向您显示代码工作正常。这是一个使用 named_tuple 的实现：

```
from collections import Counter, namedtuple

frequent_first = namedtuple("frequent_first", ["frequent", "first"])

def most_frequent_first(events):
    frequencies = Counter(events)
    indexes = {event: i for i, event in enumerate(events)}
    combined = {key: frequent_first(value, indexes[key]) for key, value in frequencies.iteritems()}
    return min(combined.iteritems(), key=lambda t: (-t[1].frequent, t[1].first))

events = [123,123,456,456,456,123, 1, 2, 3, 2, 3]
print(most_frequent_first(events)) 
```

# 结果

```
>>> print(most_frequent_first(events))
(456, frequent_first(frequent=3, first=4)) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-15T01:40:55.263

利用`collections.counter`

```
>>> import collections

>>> events = [123,123,456,456,456,123]
>>> counts = collections.Counter(events)
>>> print counts
Counter({456: 3, 123: 3})
>>> mostCommon = counts.most_common()
>>> print mostCommon
[(456, 3), (123, 3)] 
```

那是困难的部分。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-15T01:47:53.437

```
>>> from collections import Counter
>>> events = [123,123,456,456,456,123]
>>> c = Counter(events)
>>> idxs = {k: v for v,k in enumerate(events)}
>>> sorted(c.items(), key=lambda (k,v): (-v, idxs[k]))
[(456, 3), (123, 3)] 
```

# javascript - DurandalJS 路由行为

> ID：16006405
> 
> 赞同：4
> 
> 时间：2013-04-15T01:36:40.043
> 
> 标签：javascript, knockout.js, single-page-application, durandal

**我有的**

试图了解正在发生的事情以及如何控制它。对于尚未通过身份验证的用户，我有一个“公共”视图，对于经过身份验证的用户，我有一个“主页”视图。这是我的路线配置：

```
app.start().then(function() {
        //Replace 'viewmodels' in the moduleId with 'views' to locate the view.
        //Look for partial views in a 'views' folder in the root.
        viewLocator.useConvention();

        //configure routing
        router.useConvention();

        router.mapRoute('home', 'viewmodels/home', 'Test App', true);
        router.mapRoute('public', 'viewmodels/public', 'Test App', true);
        router.mapRoute('set/:id', 'viewmodels/set', 'Set');
        router.mapRoute('folder/:id', 'viewmodels/folder', 'Folder');
        router.mapRoute('api', 'viewmodels/api', 'API Reference');
        router.mapRoute('error', 'viewmodels/error', 'Error', false);
        app.adaptToDevice();

        //Show the app by setting the root view model for our application with a transition.

        if (dataservice.isAuthenticated() === true) {
            app.setRoot('viewmodels/shell', 'entrance');
            router.navigateTo('home');
        } else {
            app.setRoot('viewmodels/public');
            router.navigateTo('#/public');
        }

        router.handleInvalidRoute = function (route, params) {
            logger.logError('No route found', route, 'main', true);
            router.navigateTo('#/error');
        };
    }); 
```

**问题**

当我第一次运行该应用程序时，我没有通过身份验证，并且出现错误：

```
Uncaught TypeError: Cannot call method 'lookupRoute' of undefined 
```

源于`'router.navigateTo('#/public');'`一线。

然后，当我尝试单击登录按钮时，我得到了同样的错误：

```
define(['durandal/app', 'durandal/plugins/router', 'services/dataservice'], function (app, router, dataservice) {
   var publicViewModel = function () {
        self.logIn = function () {
            app.setRoot('viewmodels/shell');
            router.navigateTo('#/home');
        }; 
```

但内容正确加载。当我通过单击导航到特定页面时，比如说 /folder/2，然后将 url 更改为 /folders/2（无效），我的日志中出现“找不到路由”，正如预期的那样，但我遇到了其他几个问题：

1.  我没有收到错误页面或任何错误（我认为我应该按照我的 handleInvalidRoute）
2.  如果我单击其他内容，则 url 不会更改，并且不会加载新内容，再次没有错误。

我想我以某种方式破坏了路由，但我不确定如何。我该如何纠正上述问题？

屏幕：

![在此处输入图像描述](https://i.stack.imgur.com/HyrdS.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T02:02:56.353

我怀疑由于某种原因，在您所在的位置调用 navigateTo 可能为时过早。要测试此理论，请尝试移动此代码。

```
 if (dataservice.isAuthenticated() === true) {
        app.setRoot('viewmodels/shell', 'entrance');
        router.navigateTo('home');
    } else {
        app.setRoot('viewmodels/public');
        router.navigateTo('#/public');
    } 
```

进入您的 publicviewmodel 上的“激活”方法，并在 main.js 中保留以下内容：

```
app.setRoot('viewmodels/public'); 
```

**编辑：旧建议**

我相信在你的根视图模型上你需要一个路由器属性。因此，修改您的公共视图模型以添加一个：

```
define(['durandal/app', 'durandal/plugins/router', 'services/dataservice'], function (app, router, dataservice) {
   var publicViewModel = function () {
        self.router = router;
        self.logIn = function () {
            app.setRoot('viewmodels/shell');
            router.navigateTo('#/home');
        }; 
```

（你在哪里定义自我？）

# ruby-on-rails - Ruby Rails 多个虚拟属性单个数据库字段

> ID：16006406
> 
> 赞同：0
> 
> 时间：2013-04-15T01:36:56.620
> 
> 标签：ruby-on-rails, validation, attributes, virtual

编写一个 ROR 应用程序，其中单个数据库字段（经度）将显示为多个屏幕字段（long_degrees、long_minutes、long_seconds、long_direction）。我目前正在尝试在没有 scuccees 的情况下向模型添加编辑。

我正在使用 gem geo_position 来存储经度和纬度。

我得到的具体错误是我无法访问模型中的屏幕字段。在下面显示的代码中，将显示（注释为导致错误）我如何尝试访问模型中的字段。我尝试了各种 IF 语句，但均未成功。

MVC

1- 模型 - 钻头

```
 class Drill < ActiveRecord::Base
    include ActiveModel::ForbiddenAttributesProtection
    ...
    validate :validate_longitude

    def validate_longitude
       # if self.long.degrees > 180
       # if long.degrees > 180
       # if 
       #   line above causes error
       #   errors.add(self.lat.degrees, "Degrees must be between 0 and 180")
       # end
    end 
```

使用第一行“如果测试测试我得到以下错误 undefined method `long' for #

2- 视图 - _form

```
 ....
    <%= "Longitude - degrees " %>
    <% if @drill.longitude%>
      <%= f.fields_for :long do |m| %>
        <%= m.input_field :degrees, as: :integer, value: longitude(@drill).degrees %>
        <%= "minutes "%>
        <%= m.input_field :minutes, as: :integer, value: longitude(@drill).minutes %>
        <%= "seconds "%>
        <%= m.input_field :seconds, as: :decimal, value: longitude(@drill).seconds %>
        <%= "direction "%>
        <%= m.input_field :direction, collection: %w{W E}, as: :select, selected: longitude(@drill).direction, include_blank: false %>
      <% end %>
    <% else %>
      <%= f.fields_for :long do |m| %>
      <%= m.input_field :degrees, as: :integer, value: '' %>
      <%= "minutes "%>
      <%= m.input_field :minutes, as: :integer, value: '' %>
      <%= "seconds "%>
      <%= m.input_field :seconds, as: :decimal, value: '' %>
      <%= "direction "%>
      <%= m.input_field :direction, collection: %w{W E}, as: :select, include_blank: false %>
    <% end %> 
```

在 Controller 类中 DrillsController < ApplicationController before_filter :load_drill，除了：[:index, :new, :create]

```
 def index
     @drills = Drill.all
     respond_to do |format|
       format.html # index.html.erb
       format.json { render json: @drills }
    end
  end

  ...
  private

    def drill_params
    params.require(:drill).permit(:name, :country_id,:state_id, :basin_id, 
          :directional_offset_metres, :ground_level_elevation_metres,
          :rotary_table_elevation_metres, :lat, :long, :sub_basin_structure_ids=>[]  )
    end
    ... 
```

非常感谢皮埃尔

数据库虚拟属性是名称 long（一个也用于纬度），数据库列称为经度。数据库列存储为 longitude = "19 deg 19' 19.19" W" 并显示为经度 - 度 19 分 19 秒 19.19 方向 W

# c# - 带有方法的 GUI

> ID：16006408
> 
> 赞同：0
> 
> 时间：2013-04-15T01:37:01.167
> 
> 标签：c#, methods

我从我的控制台应用程序中获取了这段代码，并试图让它与 GUI 一起工作。我没有正确调用这些方法还是什么？我想单击确定按钮并在 3 个标签上分别显示数字的和、差和乘积。使困惑。请帮忙。

```
 using System;
    using System.Collections.Generic;
    using System.ComponentModel;
    using System.Data;
    using System.Drawing;
    using System.Linq;
    using System.Text;
    using System.Windows.Forms;

    namespace Numbers2GUI
    {
public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();
    }

    private void okButton_Click(object sender, EventArgs e)
    {
        int num1 = 5;
        int num2 = 3;

        Sum(num1, num2);
        Difference(num1, num2);
        Product(num1, num2);

    }

    public static void Sum(int num1, int num2)

    {
        addLabel.Text = ("The sum of the numbers is {0}.", num1 + num2);
    }

    public static void Difference(int num1, int num2)
    {
        differenceLabel.Text = ("The difference of the numbers is {0}.", num1 - num2);
    }
    public static void Product(int num1, int num2)
    {
        double multiply = num1 * num2;
        productLabel.Text = ("The product of the numbers is {0}.", multiply);
    }
} 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T01:52:22.133

我看到两个大问题：

1.  使用该[`string.Format`](http://msdn.microsoft.com/en-us/library/system.string.format.aspx)方法格式化标签中的结果。
2.  如果要更新表单上的元素，`Sum`则不*应将*`Difference`、 和`Product`方法声明为。*`static`*

 *尝试这个：

```
public void Sum(int num1, int num2)
{
    addLabel.Text = string.Format("The sum of the numbers is {0}.", num1 + num2);
}

public void Difference(int num1, int num2)
{
    differenceLabel.Text = string.Format("The difference of the numbers is {0}.", num1 - num2);
}

public void Product(int num1, int num2)
{
    double multiply = num1 * num2;
    productLabel.Text = string.Format("The product of the numbers is {0}.", multiply);
} 
```*

# wget - wget下载URL列表并设置不同的文件路径

> ID：16006411
> 
> 赞同：2
> 
> 时间：2013-04-15T01:37:05.160
> 
> 标签：wget

我在这里读到[http://www.thegeekstuff.com/2009/09/the-ultimate-wget-download-guide-with-15-awesome-examples/](http://www.thegeekstuff.com/2009/09/the-ultimate-wget-download-guide-with-15-awesome-examples/)如果我想下载多个 URL，我可以将它们保存在像这样的文本文件

```
$ cat > download-file-list.txt
URL1
URL2
URL3
URL4 
```

并像这样使用 wget

```
$ wget -i download-file-list.txt 
```

但是，假设我希望将每个 URL 保存在我的驱动器上它自己的目录中，如下所示：

```
URL1 -> Users/Downloads/Tech
URL2 -> Users/Downloads/Fashion
URL3 -> Users/Downloads/Cooking
URL4 -> Users/Downloads/News 
```

我该如何做到这一点？是否可以手动设置文本文件中每个 URL 的目录并让 wget 读取并自动知道每个文件的保存位置？还有其他方法可以实现我的需要吗？我稍后会尝试使用 cronjobs 设置和自动下载过程。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-11-27T19:09:53.197

这是一个可以执行此操作的批处理脚本，提供了这样的列表：

```
$ cat > urllist.txt
URL1 file1
URL2 file2
URL3 file3
URL4 file4

$ while read url file; do 
    wget -c -O "$file" "$url"
done < urllist.txt 
```

URL 中不应有任何空格（它们可以用 %20 表示），但是文件名中可以​​有空格。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T01:41:50.997

那你就不能用那个方法了。最好的方法是使用 bash、perl 或 python 脚本以某种格式读取文件（可能是“URL 目录”）并将每个 url 下载到指定目录。但是您需要在 wget 之外添加一些技巧才能获得这种行为。

# actionscript-3 - 声音缺失 Flash AS3

> ID：16006413
> 
> 赞同：0
> 
> 时间：2013-04-15T01:37:11.723
> 
> 标签：actionscript-3, flash, audio

我需要压缩 Flash SWF，但是当我重新定位 swf 时，我的声音和视频不显示。我正在使用 ULRrequest，但我可以使用什么来代替？我真的需要帮助！！

代码：

```
import flash.media.Sound;
import flash.net.URLRequest;
var req3:URLRequest = new URLRequest("lady.mp3");
var lady: Sound = new Sound();
lady.load(req3); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T09:04:55.503

1.  sound.play() 在哪里？称呼 ？

2.  查看 ActionScript 帮助页面 [http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/media/Sound.html#includeExamplesSummary中的示例](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/media/Sound.html#includeExamplesSummary)

3.  你的错误处理在哪里。如果声音/视频文件的路径错误怎么办？

    包 { 进口 flash.display.Sprite; 导入 flash.events.*；导入 flash.media.Sound；导入 flash.media.SoundChannel；导入 flash.net.URLRequest；

    ```
    public class SoundExample extends Sprite {
        private var url:String = "MySound.mp3";
        private var song:SoundChannel;

        public function SoundExample() {
            var request:URLRequest = new URLRequest(url);
            var soundFactory:Sound = new Sound();
            soundFactory.addEventListener(Event.COMPLETE, completeHandler);
            soundFactory.addEventListener(Event.ID3, id3Handler);
            soundFactory.addEventListener(IOErrorEvent.IO_ERROR, ioErrorHandler);
            soundFactory.addEventListener(ProgressEvent.PROGRESS, progressHandler);
            soundFactory.load(request);
            song = soundFactory.play();
        }

        private function completeHandler(event:Event):void {
            trace("completeHandler: " + event);
        }

        private function id3Handler(event:Event):void {
            trace("id3Handler: " + event);
        }

        private function ioErrorHandler(event:Event):void {
            trace("ioErrorHandler: " + event);
        }

        private function progressHandler(event:ProgressEvent):void {
            trace("progressHandler: " + event);
        }
    } 
    ```

    }

    希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T01:39:56.823

您的代码意味着声音必须与 SWF 位于同一位置。您总是可以将声音嵌入到 FLA 中，以便将它们全部包含在内，或者您可以将声音文件托管在某个地方并从那里获取它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T08:48:53.297

如果您使用的是 Flash IDE (Flash Proffesional)，那么要将您的项目包含在 1 个文件中，您需要将所有文件嵌入其中。为此，请按 Ctrl+R 并附加文件。请记住更改调用 .mp3 文件的方式：在库中设置 AS Linkage 和

```
var lady:Sound = new YourASLinkage(); 
```

# iphone - 无法比较我的 UIPickerView 中的值

> ID：16006424
> 
> 赞同：0
> 
> 时间：2013-04-15T01:38:39.070
> 
> 标签：iphone, ios, objective-c, xcode

我正在尝试根据我的第一个和第二个选择输出某个数字`UIPickerView`。我这里有这段代码。

```
-(void)pickerView:(UIPickerView *)pickerView didSelectRow:(NSInteger)row inComponent:(NSInteger)component
{
    if([[list objectAtIndex:[pickerView selectedRowInComponent:0]] isEqual: @"1 Gallon"] && [list2 objectAtIndex:[pickerView selectedRowInComponent:1] isEqual: @"Grams"])
        output.text = @"1 GALLON GRAMS";
    if([[list objectAtIndex:[pickerView selectedRowInComponent:0]] isEqual: @"2 Gallons"] && [list2 objectAtIndex:[pickerView selectedRowInComponent:1] isEqual: @"Ounces"])
        output.text = @"2 GALLONS OUNCES";
} 
```

但是我不断收到 No visible @interface for `NSMutableArray`Declarations the selectors的错误`objectAtIndex:isequal`

我应该如何比较这两个值返回的内容？像`IF comp(0) == 3 and comp(1) ==2`，输出 3.4 到我的标签。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T01:40:16.400

那是因为 NSMutableArray 没有 "objectAtIndex: isEqual" 选择器。

您需要从您的选择器视图中获取 NSString，然后将其与您存储在 NSMutableArray 对象中的字符串（可能是名为“ `list`”和“ `list2`”）的字符串进行比较。

例如

```
NSString * stringPointedToFromPicker = (NSString *)[list objectAtIndex: [pickerView selectedRowInComponent: 0]];
if([stringPointedToFromPicker isEqual: @"1 Gallon"]) // okay for now, but do you want
    output.text = @"1 GALLON GRAMS";        // hard coded, non-localized strings like this? 
```

# ios - ios：当我在模拟器中关闭应用程序时出现 lldb 错误

> ID：16006425
> 
> 赞同：0
> 
> 时间：2013-04-15T01:39:15.987
> 
> 标签：ios, xcode, main, lldb

在模拟器中：

(1) 运行应用程序 - 一切运行良好

(2) 最小化应用程序

(3) 双击主页按钮

(3) 用鼠标按住应用程序直到它晃动

(4) 点击红色“-”按钮

(5) lldb错误

我想我可能没有正确释放所有资源。这是主要原因还是模拟器错误？

它在这里中断：

```
int main(int argc, char *argv[])
{
@autoreleasepool {
    return UIApplicationMain(argc, argv, nil, NSStringFromClass([AppDelegate class]));
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T01:44:11.743

它发生是因为这是它应该做的:)

当您仍在调试时，您正在强制应用程序退出，它会将其检测为意外崩溃（实际上是调试器）

# python - Python GtkBuilder 无法从 Glade 3.14 导入 Box 小部件

> ID：16006428
> 
> 赞同：1
> 
> 时间：2013-04-15T01:39:41.650
> 
> 标签：python, glade, gtk3

在我的布局中，我使用了大量的盒子布局。在我看过的大多数教程中，人们会使用`HBox`and `VBox`'s. 我没想到a`Box`会有那么大的不同。

每当我在 Glade 文件中有布局时，GtkBuilder 都会悲惨地窒息`Box`，给我以下错误消息：

`Gtk:ERROR:/build/buildd/gtk+3.0-3.6.0/./gtk/gtknotebook.c:1235:gtk_notebook_buildable_add_child: assertion failed: (page != NULL)`

我查过这个，他们得到的最好的回应是恢复到 Glade 3.8。我不想这样做，因为 Glade 3.8 是为 GTK+ 2 设计的，而我想为 GTK+ 3 开发（我真的很喜欢 Gnome shell 界面）。因此，我试图坚持使用 3.14。

是否有其他版本`GtkBuilder`支持新`Box`布局？`GtkBuilder`Glade 开发人员会在不更新相应对象的情况下打破他们的支持，这似乎很奇怪。

这是创建接口的 Python 代码：

```
from gi.repository import Gtk

class MainWindow(object):

    def __init__(self):
        self.builder = Gtk.Builder()
        self.builder.add_from_file('main-window.glade')

        self.window = self.builder.get_object('mainWindow')

        self.builder.connect_signals(self) 
```

非常感谢任何帮助或建议！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T02:28:22.023

感谢 gpoo 帮助我解决了这个问题：

**请务必阅读您的错误消息！**我有一个`GtkNotebook`空白页，这引起了`GtkBuilder`抱怨。所以没有空白页。

此外，`GtkBox`在所有排列中都可以正常工作（至少 Python 接口，无论如何）。

# ios - 向 App Store 提交增强现实 iOS 应用程序

> ID：16006429
> 
> 赞同：1
> 
> 时间：2013-04-15T01:39:48.743
> 
> 标签：ios, app-store, augmented-reality

我正在为一系列玩具开发适用于 iOS 的 AR 应用程序。它的概念本质上是在物理玩具上是相机将检测并覆盖3D场景的标记。

我的问题是关于向 App Store 提交 AR 应用程序。为 App Store 审批者提供用于测试的 AR 标记有哪些要求？

问候，丹尼尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T04:40:20.647

您可以将图像标记器放入任何 Web 服务器，然后您可以在 Review notes 中为 Apple 提供链接。Apple 需要演示标记才能访问其功能。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-15T05:45:21.093

我开发了一个包含图像检测功能的 AR 应用程序。我所做的是，我在图像托管服务器上放置了一些示例图像，并在填写元数据时向审阅者提供了与审阅注释相同的链接。

如果您想知道我开发了哪个应用程序，请点击链接：[Alive TOI](https://itunes.apple.com/us/app/alive-toi/id561048342?ls=1&mt=8)。

自从我第一次上传应用程序以来，这些图像就一直处于活动状态。

不幸的是，我无法透露这些图像，但这是经过验证的方法。证明是我在应用商店有一个批准的应用。

希望这可以帮助。

# actionscript-3 - 错误 #1009 .....（做了一些研究仍然没有解决方案！）

> ID：16006435
> 
> 赞同：0
> 
> 时间：2013-04-15T01:40:02.007
> 
> 标签：actionscript-3, flash, actionscript, flash-cs5, flash-cs4

所以这是一个项目的延续... [1021: Duplicate function definition in my action Script](https://stackoverflow.com/questions/16000556/1021-duplicate-function-definition-in-my-action-script)

我正在制作一个交互式 Flash 项目......它有 17 个独立的场景......

介绍场景“Main_Sequence” 15 个单独的标题歌曲页面....

介绍场景播放，然后默认（无编码）跳转到“Main_Sequence”..

在“Main_Sequence”中，有一个动画应该播放（之前工作正常），然后整个序列应该在它被钓到后“停止”（不确定在哪里实现`stop();`，所以它不会进入下一个场景)

然后，当您将鼠标悬停在屏幕上的每个音符上时，它就会产生鼠标悬停效果....当您单击歌曲标题时，您应该“跳转”到标记为该歌曲的特定场景，而该场景又带有主页按钮你回...

感谢@George Profenza 帮助我获取按钮工作的代码（？）......我说（？）因为当我去测试电影时，它会加载并播放介绍......跳转到主要序列然后播放动画的前两部分，然后冻结并显示以下输出错误**TypeError: Error #1009: Cannot access a property or method of a null object reference。在 music_Sheet_project_15_fla::MainTimeline/frame91()[music_Sheet_project_15_fla.MainTimeline::frame91:18]**

我了解以下关于 1009 的内容，这主要意味着有代码试图访问一个不再存在或尚不存在的对象......唯一的问题是我除了两个补间动画之外什么都没有框架......并且在我的操作代码中没有引用 91 帧/这些图层上没有代码...... [http://s22.postimg.org/qdoja6xnl/Untitled_picture3.png](http://s22.postimg.org/qdoja6xnl/Untitled_picture3.png)我需要的第一帧访问按钮（歌曲标题是在所有动画加载后，即帧#525）

...最后是那个主要场景的代码

```
 var buttonMap:Dictionary = new Dictionary();
  buttonMap["TD_g"] = "Tweedlee_Dee";
  buttonMap["s_g"] = "Sincerely";
  buttonMap["ats_g"] = "Ain’_that_a_shame";
  buttonMap["iyk_g"] = "I_hear_you_knocking";
  buttonMap["hms_g"] = "Hearts_made_of_stone";
  buttonMap["tf_g"] = "Tutti_fruiti";
  buttonMap["hd_g"] = "Hound_Dog";
  buttonMap["ld_g"] = "Little_darlin";
  buttonMap["ll_g"] = "Louie_Louie";
  buttonMap["ts_g"] = "Twist_and_shout";
  buttonMap["ipsy_g"] = "I_put_a_spell_on_you";
  buttonMap["ysm_g"] = "You_shook_me";
  buttonMap["ihm_g"] = "I_can_hear_music";
  buttonMap["iss_g"] = "I_shot_the_sheriff";
  buttonMap["tl_g"] = "Tainted_love";

  TD_g.addEventListener(MouseEvent.MOUSE_DOWN, mouseDownHandler);
  s_g.addEventListener(MouseEvent.MOUSE_DOWN, mouseDownHandler);
  ats_g.addEventListener(MouseEvent.MOUSE_DOWN, mouseDownHandler);
  iyk_g.addEventListener(MouseEvent.MOUSE_DOWN, mouseDownHandler);
  hms_g.addEventListener(MouseEvent.MOUSE_DOWN, mouseDownHandler);
  tf_g.addEventListener(MouseEvent.MOUSE_DOWN, mouseDownHandler);
 hd_g.addEventListener(MouseEvent.MOUSE_DOWN, mouseDownHandler);
 ld_g.addEventListener(MouseEvent.MOUSE_DOWN, mouseDownHandler);
 ll_g.addEventListener(MouseEvent.MOUSE_DOWN, mouseDownHandler);
 ts_g.addEventListener(MouseEvent.MOUSE_DOWN, mouseDownHandler);
 ipsy_g.addEventListener(MouseEvent.MOUSE_DOWN, mouseDownHandler);
 ysm_g.addEventListener(MouseEvent.MOUSE_DOWN, mouseDownHandler);
 ihm_g.addEventListener(MouseEvent.MOUSE_DOWN, mouseDownHandler);
 iss_g.addEventListener(MouseEvent.MOUSE_DOWN, mouseDownHandler);
 tl_g.addEventListener(MouseEvent.MOUSE_DOWN, mouseDownHandler);

function mouseDownHandler(event:MouseEvent):void {
gotoAndStop(1, buttonMap[event.currentTarget.name]);
} 
```

是否有可能是因为歌曲标题按钮是位图并且仅成为“按钮”@Frame 525 导致错误。如果是这种情况，为什么它不会为前两个也仅成为按钮的歌曲标题提供错误@Frame525 ?

如果我无法通过输出错误，我将无法测试按钮的功能.. 一些帮助/建议将不胜感激！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T02:58:58.150

所以看起来，通过将动作脚本放置在第 525 帧的自己的图层中，而不是将其放在@Frame 1 的图层中......问题现在解决了......但是 30 个按钮中有 5 个不起作用我将排除故障....从中得出的结论是，您的 Actionscript 在时间轴中的位置至关重要！

# c# - Quartz.net windows服务核心概念

> ID：16006438
> 
> 赞同：2
> 
> 时间：2013-04-15T01:40:30.807
> 
> 标签：c#, .net, asp.net-mvc-3, quartz.net

我想在 Internet 上进行作业调度和浏览，我发现 Quartz.Net 是一个不错的选择。许多博客表明必须初始化 Windows 服务，我的问题是：是否总是需要启动 Windows 服务并嵌入它来运行作业调度程序？有没有办法在不使用 Windows 服务的情况下运行作业调度程序，我问这个是因为我可以访问只有一个 Web 面板的主机，而且我认为它不会让启动 Windows 服务。

谢谢阅读

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T02:12:13.583

好吧，如果您对要配置的计算机具有管理权限，则可以使用内置的 Windows 任务调度程序来替代编写简单的 Windows 服务。要在任务计划程序中配置任务，请查看以下[Microsoft 文章](http://windows.microsoft.com/en-sg/windows7/schedule-a-task)

使用 Windows 服务也很简单，一个好的起点如下所示

[演练：在组件设计器中创建 Windows 服务应用程序](http://msdn.microsoft.com/en-us/library/zt39148a%28v=vs.100%29.aspx)

我曾在 Quartz.NET 上工作过，并强烈推荐它。我在使用 Quartz 时使用的最佳资源在以下[SO Post](https://stackoverflow.com/a/15353584/1012641)中给出。

Quartz 也可用于 ASP.NET Web 应用程序

*   [如何在 ASP.NET 中使用 Quartz.net](https://stackoverflow.com/q/1356789/1012641)
*   [在 asp.net 网站中设置 Quartz.net](https://stackoverflow.com/q/3245975/1012641)

# php - 如何使用 PHP 回显链接及其来自抓取页面的文本

> ID：16006445
> 
> 赞同：-4
> 
> 时间：2013-04-15T01:41:30.667
> 
> 标签：php, string, parsing, hyperlink, echo

所以我需要回显链接的代码行，以便 $text 是链接的文本，而 $href 是 href 值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T01:42:28.270

```
echo "<a href='$href'>$text</a><br />\n"; 
```

# arrays - 如何从Java中的数组中打印出随机字符串

> ID：16006449
> 
> 赞同：1
> 
> 时间：2013-04-15T01:41:49.567
> 
> 标签：arrays, string, random

嗨，我一直在尝试制作我的第一款游戏，但遇到了困难。我想从字符串数组中提取一个随机字符串，然后将其打印出来，但我的代码中有错误。我已经看遍了，但我找不到解决方案。这是代码：（我已经声明了 currentRoom 变量）

```
 int currentRoom;
String [][] rooms = {{"Start", "Treasure Room1"}, {"Goblin Home1", "Spider Nest1"}};

Random rand = new Random()
currentRoom = rooms [rand.nextInt( rooms.length)];

System.out.println(currentRoom); 
```

我在第 6 行的 currentRoom 变量上有一个错误，我认为这把一切都搞砸了，但我不知道所以错误可能在任何地方。

任何帮助表示赞赏:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T01:51:19.793

你必须改变两件事：

1.  currentRoom 应该是字符串数组
2.  打印字符串数组应该使用 Arrays.toString

    ```
     String[] currentRoom;
         String [][] rooms = {{"Start", "Treasure Room1"}, {"Goblin Home1", "Spider Nest1"}};

         Random rand = new Random();

         currentRoom = rooms [rand.nextInt(rooms.length)];

         System.out.println(Arrays.toString(currentRoom)); 
    ```

样本输出

```
[Goblin Home1, Spider Nest1] 
```

希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T01:56:49.760

为什么需要二维字符串数组？我认为您可以改为使用一维数组进行管理。

```
String currentRoom;
String[] rooms = {"Start", "Treasure Room1", "Goblin Home1", "Spider Nest1"};
Random rand = new Random();
currentRoom = rooms [rand.nextInt( rooms.length)];

System.out.println(currentRoom); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T01:49:19.897

```
String currentRoom;
String [][] rooms = {{"Start", "Treasure Room1"}, {"Goblin Home1", "Spider Nest1"}};

Random rand = new Random();
int rnd = rand.nextInt( rooms.length);
currentRoom = rooms [rnd][0] + ":"+ rooms [rnd][1];

System.out.println(currentRoom); 
```

# objective-c - UITableViewCell 原型在同一视图控制器中的两个 UITableView 之间重用

> ID：16006453
> 
> 赞同：2
> 
> 时间：2013-04-15T01:42:15.303
> 
> 标签：objective-c, uitableview, uistoryboard

从一个表中提取 UITableViewCell 原型并在另一个表中使用它们是否安全？

当我想在另一个 UITableView 中显示 UITableViewCell 时，我只是 dequeueReusableCellWithIdentifier 来自指定原型类型单元格的表中的可重用单元格。也就是说，不是它们将在其中显示的 UITableView。

它似乎工作正常，我没有注意到日志中有任何错误，但我担心它可能会导致奇怪的问题，因为我以前没有见过它。

我应该简单地为每个单元格使用单独的笔尖来实现吗？或者这种方法是好的、不好的做法还是危险的？

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
if (self.prototypesTableView == tableView) {
        cell = [self.prototypesTableView dequeueReusableCellWithIdentifier:cellType];
    }
    else if (self.otherTableView == tableView) {
        cell = [self.otherTableView dequeueReusableCellWithIdentifier:cellType] ?: [self.prototypesTableView dequeueReusableCellWithIdentifier:cellType];
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T01:58:42.140

我很确定内存中的每个表视图都有自己的表视图单元队列。

当表视图（以及承载它的视图）消失时，与其关联的所有对象都将被释放（假设此处为 ARC）。有两个表的一个视图应该无关紧要：每个表都有自己的单元格集合来出列。

在我自己的代码中，我经常在`UITableViewCell`一张桌子到另一张桌子上重复使用相同的自定义“”。要注册一个自定义 UITableView 单元格（这将是 XIB 文件中的唯一对象），我这样做：

```
UINib * nib = [UINib nibWithNibName: @"SomeVeryCustomCell" bundle: nil];
if(nib)
{
    [myTableView registerNib: nib forCellReuseIdentifier:@"SomeVeryCustomCell"];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-16T11:13:39.217

这段代码现在在生产中运行，我没有看到由于从一个表中出列可重用单元格并在另一个表中使用它们而造成的不良影响。为了确保正确重用，我总是从“otherTableView”中出列，如果没有可用的 UITableCell，则从“prototypesTableView”中出列。

尽管为了方便起见我这样实现它，但我建议以 Michael 建议的方式实现它是更好的做法，因为它提供了在视图控制器之间共享单元格的更大能力。

# mongodb - 使用集合之间的间接关系查询 MongDB

> ID：16006456
> 
> 赞同：1
> 
> 时间：2013-04-15T01:42:26.490
> 
> 标签：mongodb, mongoose

在我的模型设计中，场地和门票之间没有直接的关联。Venues 与 Deals 是一对多的关系，而 Deals 与门票是一对多的关系。

场地 -> 优惠 -> 门票

这可能是一个愚蠢的问题，但我想要一个 Tickets.findByVenueId() 操作。查询并确保这一切都发生在服务器端的最有效方法是什么？我是否需要在 Ticket 模型中对 VenueId 进行某种引用？

我在节点上使用 MongooseJS。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T01:47:07.063

我肯定会在每张票中有一个 VenueId。这是能够按场地查询门票的唯一“理智”方式。

虽然这可以被认为是非规范化，但有时您必须在 NoSQL 数据库中执行此操作，在这种情况下，无论如何它都不是“麻烦”的非规范化，因为该字段不应该有任何更新（门票不会改变场地发行后），因此无需担心过时的副本和数据完整性。

根据您的需要，您甚至可以在票证中包含其他场地数据（例如城市名称或场地容量），以方便更复杂的查询。显然，这使您远离“规范化”数据库，因此仅在需要时应用。我要画的第一条大线是在需要更新这些复制的字段时，因为这可能会涉及很多。

# vb.net - 将行添加到绑定的 datagridview1

> ID：16006462
> 
> 赞同：0
> 
> 时间：2013-04-15T01:43:53.190
> 
> 标签：vb.net

我有一个 datagridview1，它通过 BindingSource 数据绑定到数据集

```
dim dt as datatable
dim bsData as bindingsource

bsData.DataSource = dt
DataGridView1.DataSource = bsData 
```

我还`dt5`需要将另一个数据表中的行添加到 datagridview1 数据表中

我下面的代码在名为 datagridview1 的新列中创建了一个新列，`Objectives`但它没有添加来自的行值（H1）`dt5`

任何想法 ？赞赏

```
Dim dt5 As New DataTable
        dt5.Load(cmd.ExecuteReader)
        Dim mybindingsource As BindingSource = CType(DataGridView1.DataSource, BindingSource)
        Dim dtts As DataTable = CType(mybindingsource.DataSource, DataTable)
        dtts.Columns.Add("Objectives")
        Dim newrow As DataRow
        For i = 0 To (dt5.DefaultView.Count - 1)
            newrow = dtts.NewRow

            newrow.Item("Objectives") = dt5.Rows.Item(i).Item("H1")
            dtts.Rows.Add(newrow)
        next 
```

# c++ - 在一个目录中保存多个文件名（win32 c++）

> ID：16006472
> 
> 赞同：0
> 
> 时间：2013-04-15T01:44:44.120
> 
> 标签：c++, file, winapi

我想在同一个目录中保存多个文件名。但是，它似乎只保存了数组中的最后一个文件。这是我的代码：

```
hFind = FindFirstFile("*.bin", &FindFileData);

if(hFind == INVALID_HANDLE_VALUE) {

  printf("Not founded");
}
 else {
  printf("Found: %s", FindFileData.cFileName);
}
 if(hFind != INVALID_HANDLE_VALUE) {

do
 {
  if (FindFileData.dwFileAttributes & FILE_ATTRIBUTE_DIRECTORY)
  {

    printf("\nFound: %s\n", FindFileData.cFileName);
  }
  else
  {

     filesize.LowPart = FindFileData.nFileSizeLow;
     filesize.HighPart = FindFileData.nFileSizeHigh;
     count++;
     filesize.QuadPart += filesize.QuadPart;
     printf("%s %ld bytes", FindFileData.cFileName, filesize.QuadPart);
     printf("count number:%s\n", FindFileData.cFileName);
     files[count] = FindFileData.cFileName;
     printf("\nfiles array:%s", files[count]);

  }
}
 while (FindNextFile(hFind, &FindFileData) != 0);
 //when I'm printing the file[3], it is showing the last file
printf("file in 3:%s", files[3]); 
```

所以问题是整个数组只填充了最后一个文件。每次转到下一个文件时，整个数组都会被最后一个文件替换。不知道是win32问题还是其他问题。需要你的见解。提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T08:36:28.423

这条线

```
files[count] = FindFileData.cFileName; 
```

不复制字符串，它只是地址的副本。这是一个指针赋值。所以 in 中的每个元素都`files[]`指向同一个内存块，即字符数组`FindFileData.cFileName`。因此，对于所有索引，复制到的最后一个值自然`FindFileData.cFileName`是您在查看时看到的值。`files[]`

如果要复制字符串，则需要使用`strcmp`. 而且您几乎可以肯定没有为`char*`指针分配任何内存，`files[]`因此您也需要这样做。使用`malloc()`和`strlen()`。

但是，由于您将其标记为 C++，我将放弃使用原始数组、C 字符串等，并切换到 C++ 标准容器。在这种情况下，您似乎想要`vector<string>`.

像这样声明容器：

```
vector<string> files; 
```

然后添加这样的项目：

```
files.push_back(FindFileData.cFileName); 
```

并像这样遍历容器：

```
for(vector<string>::iterator it = files.begin(); it != files.end(); ++it) {
    // do something with *it
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T08:37:11.923

问题出在这一行：

文件[计数] = FindFileData.cFileName;

它将 FindFileData.cFileName 的地址复制到 files[count] 中。由于地址始终相同，因此 files 数组中的所有数组项将始终包含相同的值。

您必须复制整个字符串而不仅仅是一个指针。将文件变量声明为：

字符文件[MAC_FILE_COUNT][MAX_PATH]；

然后将“files[count] = FindFileData.cFileName”行替换为：

strcpy(files[count], FindFileData.cFileName);

# php - 在php中获取输入标签的值

> ID：16006477
> 
> 赞同：0
> 
> 时间：2013-04-15T01:45:52.380
> 
> 标签：php, html

我试图通过单击按钮来获取输入的值。我能够获取文本框的值，但不能获取下拉列表和数字框（输入类型=数字）。

我该怎么做呢？

下面是我的代码：

```
 <div class=accountMain>
            <div align=left>
            <table>
                <tr>
                    <td>Product Code:</td>
                    <td>EX00001</td>
                </tr>
                <tr>
                    <td>Product Name:</td>
                    <td><input type=text name=productName value=$productName></td>
                </tr>

                <tr>
                    <td>Description:</td>
                    <td><input type=text name=productDesc value=$productDesc></td>
                </tr>

                <tr>
                    <td>Price: SGD$</td>
                    <td><input type=text name=unitPrice value=$unitPrice></td>
                </tr>

                <tr>
                    <td>Quantity Available:</td>
                    <td><input type=text name=qty value=$qty></td>
                </tr>

                <tr>
                    <td>Size <br>
                    (Only applicable for T-Shirt):</td>
                    <td><select>
                    <option value=N>NIL</option>
                    <option value=S>S</option>
                    <option value=M>M</option>
                    <option value=L>L</option>
                    <option value=XL>XL</option>
                    </select></td>
                </tr>

                <tr>
                    <td>Product Image:</td>
                    <td><input type=file name=imgfile></td>
                </tr>

                <tr>
                    <td>Category: Exclusive</td>
                </tr>

                <tr>
                    <td></td>
                    <td><input type=submit name=insert value=Insert></td>
                </tr>

            </table>
            </div>

    </td>
    </tr>

    </div>

 echo("<tr><td></td>
                        <td></td>
                        <td><font style=title><b>In Stock : ".$row["qty"]."</b></br></br></br></br>
                        <b><form>Purchase Qty : <input type=number name=qty min=1 max=5></form></b></br></br>
                        </br></font></td>

                        </tr>");

                echo("<tr><td></td>
                        <td></td>
                        <td><a href=shoppingbag.php><img src=images/addToCartBtn.png width=150></a></td></tr>"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T01:55:06.640

更改以下内容：

```
<select>
    <option value=N>NIL</option>
    <option value=S>S</option>
    <option value=M>M</option>
    <option value=L>L</option>
    <option value=XL>XL</option>
</select> 
```

至：

```
<select name="size">
    <option value=N>NIL</option>
    <option value=S>S</option>
    <option value=M>M</option>
    <option value=L>L</option>
    <option value=XL>XL</option>
</select> 
```

并使用它：

```
<?php $_POST["size"]; ?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T01:47:39.507

你`<select>`需要一个名称属性

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T02:17:47.883

由于这也标记在 PHP 下，我想您想将这些值发送到 PHP 页面？

如果是这样，除非您动态提交值（通过脚本），否则您需要将输入和选择元素包装在`<form>`开始和结束标记中。然后你可以设置方法属性（*post,put,get,delete*）和动作属性（*PHP页面的路径来处理值*）。

```
<form method="post" action="path-to/my-php-page.php">
...
</form> 
```

提示：根据您的 HTML 的结构方式，您可能希望用 form 标记包裹整个最内层的表格。

# ios - 如何在“允许这些应用程序使用您的帐户”为我的应用程序关闭的情况下解决“com.facebook.sdk 错误 2”

> ID：16006479
> 
> 赞同：0
> 
> 时间：2013-04-15T01:46:21.550
> 
> 标签：ios, facebook, login

我正在使用最新的 FB SDK 进行本机登录的 iOS 应用程序。当我在设置中的“允许这些应用程序使用您的帐户”中关闭我的应用程序时，预计会出现错误“com.facebook.sdk 错误 2”来。

我想知道即使“允许这些应用程序使用您的帐户”对我的应用程序关闭，是否有任何优雅的方法可以解决此错误？我已经搜索了解决方案，但所有答案都说您需要打开该选项。但我认为更好的方法是，如果用户关闭该选项，我们仍然可以让他登录，无缝回退到快速应用切换方式，就像他根本没有在他的设备上登录 Facebook 一样。如何在最新的 FB SDK 中做到这一点？谢谢！

=====================================更新============ ============================ 我使用已弃用的函数 openActiveSessionWithPermissions:allowLoginUI:completionHandler 解决它

首先我们需要检查用户是否关闭了这个选项：

```
 self.useAccountAllowed = true;
    ACAccountStore *accountStore;
    ACAccountType *accountTypeFB;
    if ((accountStore = [[ACAccountStore alloc] init]) &&
        (accountTypeFB = [accountStore accountTypeWithAccountTypeIdentifier:ACAccountTypeIdentifierFacebook] ) ){

        NSArray *fbAccounts = [accountStore accountsWithAccountType:accountTypeFB];
        id account;
        if (!fbAccounts)
        {
            //do not log into FB on the device
        }
        else if ([fbAccounts count] == 0) {
            [FBSession.activeSession closeAndClearTokenInformation];
            self.useAccountAllowed = false;  //user switch this option off
        } 
```

然后在 openSession 函数中，如果 self.useAccountAllowed 为 false，则使用已弃用的函数：

```
if (self.useAccountAllowed) {
        [FBSession openActiveSessionWithReadPermissions:nil allowLoginUI:YES completionHandler:^(FBSession* session, FBSessionState status, NSError* error){
            [self sessionStateChanged:session state:status error:error];}];
    }
    else {
        NSArray* lPermission = FBSession.activeSession.permissions;
        [FBSession openActiveSessionWithPermissions:lPermission allowLoginUI:YES completionHandler:^(FBSession* session, FBSessionState status, NSError* error){
            [self sessionStateChanged:session state:status error:error];}]; 
```

不确定这是否是正确的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T04:18:44.430

这就是我解决它的方法。在 AppDelegate 实现文件的方法中，使用FB SDK 文档推荐`applicationDidBecomeActive`的常规方法。**另外**，在设置中添加一个检查用户权限的新方法（我在下面的示例中调用了该方法）：`[FBSession.activeSession handleDidBecomeActive]`**`checkPermissionSettings`**

 **```
- (void)applicationDidBecomeActive:(UIApplication *)application
{
    NSLog(@"applicationDidBecomeActive: in NHOCAppDelegate");
    //
    // The flow back to your app may be interrupted (for ex: if the user clicks the Home button
    // while if authenticating via the Facebook for iOS app).
    // If this happens, the Facebook SDK can take care of any cleanup that may include starting a fresh session.
    //
    [FBSession.activeSession handleDidBecomeActive];
    [self checkPermissionSettings];
}

//
// Verify if the user pressed the Home Button, went to Settings and deauthorized the app via "Allow These Apps to Use Your Account..."
// If so, redirect him to the login screen (this happens automagically, see below).
//
- (void)checkPermissionSettings
{
    NSLog(@"checkPermissionSettings: in NHOCAppDelegate");
    //
    // Now 'startForMeWithCompletionHandler' may return 'FBSessionStateClosed' (meaning that the user probably unauthorized the app in Settings).
    //
    // If that is the case:
    //
    //  - Hide the 'logged' View Controller
    //  - Remove it (NHOCLoggedVC) from the Notification Center
    //  - Show the 'login' View Controller
    //  - And finally add it (NHOCLoginVC) to the Notification Center, closing the loop
    //
    // Check the console for further info.
    //
    [FBRequestConnection startForMeWithCompletionHandler:^(FBRequestConnection *connection, id<FBGraphUser> user, NSError *error) {

        if (!error) {
            //
            // Everything went fine... The app is in good shape.
            // Notice that 'user.location' requires user_location permission
            //
            NSLog(@"user.location: %@: ", [user.location objectForKey:@"name"]);
        }
    }];
} 
```

为了使其按设计工作，我还使用通知中心。您可以在此处查看整个示例：

[FB SDK + 带有发布到 Feed 的情节提要](https://github.com/backslash-f/fb-sdk-storyboards)

我希望它有所帮助。**

# python - 为什么这个寻路功能会崩溃？

> ID：16006482
> 
> 赞同：1
> 
> 时间：2013-04-15T01:46:48.337
> 
> 标签：python, pygame, a-star

我有一个 A* 搜索算法，由于内存错误导致程序崩溃，我不知道为什么。这些是相关的代码位：

```
def __init__(self, graph):
    self.graph = graph

def search(self, start, end):
    openset = set()
    closedset = set()
    current = start
    openset.add(current)
    while openset:
        print current
        current = min(openset, key=lambda o:o.g + o.h)
        if current == end:
            path = []
            while current.parent:
                path.append(current)
                current = current.parent
            path.append(current)
            return path[::-1]
        openset.remove(current)
        closedset.add(current)
        for node in self.graph[current]:
            if node in closedset:
                continue
            if node in openset:
                new_g = current.g + current.move_cost(node)
                if node.g > new_g:
                    node.g = new_g
                    node.parent = current
            else:
                node.g = current.g + current.move_cost(node)
                node.h = self.heuristic(node, start, end)
                node.parent = current
                openset.add(node)
    return None 
```

传递给它的图形是在程序开始时生成的：

```
def make_graph(self, size, impassable):
    nodes = [[astar_gridnode(x, y) for y in range(size)] for x in range(size)]
    graph = {}
    for x, y in product(range(size), range(size)):
        node = nodes[x][y]
        graph[node] = []
        for i, j in product([-1, 0, 1], [-1, 0, 1]):
            # Check that we are inside the grid area.
            if not (0 <= x + i < size): continue
            if not (0 <= y + j < size): continue
            # Check if the target area is impassable.
            if (x + i, y + j) in impassable: continue
            # All looks good. Add target space as reachable from current (x, y) space.
            graph[nodes[x][y]].append(nodes[x+i][y+j])
    return graph, nodes 
```

以下是搜索的调用方式：

```
def find_path(self, agent, target_coords, impassable, graph, nodes):
    paths = astar_grid(graph)
    start = nodes[agent.grid_pos[0]][agent.grid_pos[1]]
    end = nodes[target_coords[0]][target_coords[1]]
    path = paths.search(start, end) 
```

这一切都像第一次完成搜索时那样工作，如果搜索是使用开始、结束变量和不与前一个路径相交的路径完成的，它就会工作。如果在每次搜索之前生成一个新图形，它也可以工作，但这是不可能的，因为图形对象很大，并导致程序在创建时冻结几秒钟。

如果进行的搜索与先前的路径相交，程序会冻结一分钟，我会收到以下错误：

```
File "C:\...\pathfinding.py", line 16, in find_path
path = paths.search(start, end)
  File "C:\...\astar.py", line 19, in search
current = current.parent
MemoryError 
```

崩溃的原因是什么，我们该如何解决？我不明白为什么它会崩溃，因为在我看来，原始图没有在搜索中被修改，并且每次调用搜索时都会创建一个新的搜索对象，这让我对它为什么工作感到困惑当它工作时，它会崩溃。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T15:45:21.657

我同意hughdbrown的观点——你很可能在父链中有一个循环，`current`在你分配之前立即打印出来`current = current.parent`可能会告诉你这是否属实。

你说原始图在搜索中没有被修改，但*它是*。您正在修改`.parent`指针。起初，所有`.parent`指针都设置为`None`，但在您运行搜索之后，其中一些指针是非`None`。因为它应该是`None`而它不是，所以`while current.parent:`条件未能找到路径的终点，并且它正在分支到先前计算的路径。

尝试`start.parent = None`在搜索开始时设置。或者在搜索完成后清除父指针（更昂贵但更干净）（您只需为`openset`and中的内容清除它们`closedset`）。

# android - Try/Catch 在自定义类 NPE 中不起作用

> ID：16006486
> 
> 赞同：0
> 
> 时间：2013-04-15T01:47:31.397
> 
> 标签：android, nullpointerexception, try-catch

相当简单。`class`我的主要项目有一个很大的，它变得“笨拙”。所以今天我决定尝试制作我的`own class`，所以我可以简化一些`code`大的`class`。所以这是我的“小” `class`，我用的`Data storage`。该`TRY/CATCH`语句`floating`在 BIG 类中单独起作用。不过，在小班上，它抛出了一个 NPE。当我制作`own class`. 关于为什么的任何想法？

`file_in = openFileInput("array_saved");`

由 Logcat 调用。

...这是课程：

```
package com.eai.thepicker;

import java.io.FileInputStream;
import java.io.FileNotFoundException;
import java.io.FileOutputStream;
import java.io.IOException;
import java.io.ObjectInputStream;
import java.io.ObjectOutputStream;
import java.util.ArrayList;    
import android.app.Activity;

public class DataHandler extends Activity {

    FileOutputStream file_out;
    FileInputStream file_in;
    ObjectOutputStream obj_out;
    ObjectInputStream obj_in;
    ArrayList<String> retrieved_data;

    public DataHandler(){
    }

    @SuppressWarnings("unchecked")
    public ArrayList<String> retrieveData(){

        try {   
            file_in = openFileInput("array_saved");
            obj_in = new ObjectInputStream(obj_in);
            if(obj_in.available() > 0){
            retrieved_data = (ArrayList<String>) obj_in.readObject();
            }
            else{
                retrieved_data = new ArrayList<String>();
               }

            obj_in.close();
            file_in.close();
        } catch (FileNotFoundException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        } catch (ClassNotFoundException e) {
            e.printStackTrace();
        }

        return retrieved_data;

    }

    public void saveData(ArrayList<String> data_out){
        try {
            file_out = openFileOutput("array_saved", 0);
            obj_out = new ObjectOutputStream(file_out);
            obj_out.writeObject(data_out);
            obj_out.close();
            file_out.close();
        } catch (FileNotFoundException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }   
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T02:04:49.437

我相信问题在于您正在尝试调用此方法

```
openFileInput() 
```

没有给它`context`它需要的东西。我仍然认为您不需要`extend Activity`通过删除`extends Activity`. `Activity`当您在调用中需要它时创建此类的实例

```
DataHandler data = DataHandler (this);  // give context
data.retrieveData(); 
```

类似的东西来调用该方法。然后在类中创建一个构造函数

```
ublic class DataHandler extends Activity {

FileOutputStream file_out;
FileInputStream file_in;
ObjectOutputStream obj_out;
ObjectInputStream obj_in;
ArrayList<String> retrieved_data;
Context mContext;   // add Context variable

public DataHandler(Context context){
mContext = context;   assign context
} 
```

然后在你的方法中使用

```
 public ArrayList<String> retrieveData(){

    try {   
        file_in = mContext.openFileInput("array_saved");
        obj_in = new ObjectInputStream(obj_in);
        if(obj_in.available() > 0){
        retrieved_data = (ArrayList<String>) obj_in.readObject();
        }
        else{
            retrieved_data = new ArrayList<String>();
            }

        obj_in.close();
        file_in.close();
    } catch (FileNotFoundException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    } catch (ClassNotFoundException e) {
        e.printStackTrace();
    }

    return retrieved_data;

} 
```

我相信这样的事情应该会有所帮助。该方法`openFileInput()`期望在这一点`Context`上是a `null`，因此`NPE`. 将a 传递`Context`给类将解决此问题，因为它将具有当前`Activity Context`

[文档](http://developer.android.com/reference/android/content/Context.html#openFileInput%28java.lang.String%29)

# appcelerator - 使用 Trigger.io 将照片上传到 Appcelerator ACS 时出错

> ID：16006493
> 
> 赞同：1
> 
> 时间：2013-04-15T01:48:06.343
> 
> 标签：appcelerator, trigger.io

我正在尝试使用 Trigger.io 将照片上传到 Appcelerator 云服务 (ACS) 存储。

我无法弄清楚用于文件对象的正确语法。我收到一个错误“错误：语法错误，无法识别的表达式：#[object Object]”

这是我的相关代码：

```
$("#photograph-record").on("click", function(){
    forge.file.getImage({source:"camera", width: 280, height: 280},function(file) {

    var data = {
          photo: file  //the ID of file input control
        };

    sdk.sendRequest('photos/create.json', 'POST', data, callback);
    });
}); 
```

这是 ACS Photo 类的文档 - [http://cloud.appcelerator.com/docs/api/v1/photos/create](http://cloud.appcelerator.com/docs/api/v1/photos/create)

必需参数 - photo：附加的二进制文件

因为它需要是二进制文件，所以我尝试了“照片：forge.file.string(file)”（[http://docs.trigger.io/en/v1.4/modules/file.html#modules-file](http://docs.trigger.io/en/v1.4/modules/file.html#modules-file)），但是在 Appcelerator 端出现错误“照片上传所需的照片参数”。

我使用 forge.file.url 将图像传递到我的应用程序页面视图中没有问题，所以我知道文件对象没有问题，它只是找出正确的语法将其作为二进制文件传递给 sdk.sendRequest 调用。

关于我需要传递数据变量以使其正常工作的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T10:02:50.543

Appcelerator 文档在这里非常好 - 看起来他们期待一个名为 POST 的参数`photo`，其中包含二进制图像数据。

[使用我们的请求模块](http://docs.trigger.io/en/v1.4/modules/request.html)来做到这一点：

```
$("#photograph-record").on("click", function(){
    forge.file.getImage({source:"camera", width: 280, height: 280},function(file) {
        file.name = 'photo'; // the magic    
        forge.request.ajax({
            url: 'https://api.cloud.appcelerator.com/v1/photos/create.json',
            files: [file],
            success: function () { ... },
            error: function () { ... }
        });
    });
}); 
```

我在这里看不到使用他们的 JS 库的方法，因为他们希望您传递 HTML 表单元素的 id 以从中获取数据，但我们正在直接与相机或画廊交互......

# matlab - 范围内的元素和两点之间的距离

> ID：16006497
> 
> 赞同：0
> 
> 时间：2013-04-15T01:48:14.093
> 
> 标签：matlab, loops, matrix, range, element

我有一个带有 x、y 和 z 坐标的 53534x3 矩阵。我想在范围内找到矩阵的元素，如下所示：

```
% coordinate range;
x1(x<-25|x>0);
x2(x<0|x>25);
y1(y<-40|y>0);
y2(y<0|y>40);
z1(z<45|z>17);
z2(z<17|z>82); 
```

并将它们插入到一个新矩阵中，使其变为

```
point1=[x1, y1, z1];
point2=[x2, y2, z2]; 
```

我需要找到两点之间的距离。

```
% define points;
xd=x2-x1;
yd=y2-y1;
zd=z2-z1;
Distance=sqrt(xd*xd+yd*yd+zd*zd); 
```

循环更有效吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T02:03:01.637

你不需要循环。MATLAB 非常有效地处理整个向量和矩阵。

如果您的矩阵是`a`：

```
point1 = a( (a(:,1)<-25 | a(:,1)>0) & ...
            (a(:,2)<-40 | a(:,2)>0) & ...
            (a(:,3)< 45 | a(:,3)>17) ,:);

point2 = a( (a(:,1)< 0 | a(:,1)>25) & ...
            (a(:,2)< 0 | a(:,2)>40) & ...
            (a(:,3)<17 | a(:,3)>82) ,:); 
```

`point1`如果和中的点数`point2`相等并且您需要点之间的距离以便它们出现在矩阵中，您可以执行以下操作：

```
xd = point2(:,1)-point1(:,1);
yd = point2(:,2)-point1(:,2);
zd = point2(:,3)-point1(:,3);
Distance=sqrt(xd.^2+yd.^2+zd.^2); 
```

在一般情况下，如果您需要所有点之间的距离`point1`，`point2`您可以使用 PDIST2 函数：

```
Distance = pdist2(point1, point2, 'euclidean'); 
```

# html - 固定位置 DIV 不能与单独 DIV 中的 iframe 一起使用

> ID：16006498
> 
> 赞同：1
> 
> 时间：2013-04-15T01:48:36.603
> 
> 标签：html, css

我有一个出于娱乐和学习目的而正在开发的网页。这是一个两列布局。我的左栏是固定的，右栏是滚动的。在右栏中，我有一个嵌入视频的 iframe。一切都很好，直到我播放视频然后左栏中的固定位置中断。继承人 js 小提琴对不起图像不起作用。

[http://jsfiddle.net/pqY3q/](http://jsfiddle.net/pqY3q/)

它在 Firefox 中也可以正常工作，但 Safari 和 Chorome 会中断。

继承人的HTML

```
<div id="main">

    <div id= "main-right">

        <div id="banner">
             <img src="images/banner.gif" alt="Zombie Apocalypse Survival Guide">
        </div>

        <div id="right_col">
             <h1>Overview of Zombies & the Zombie Apocalypse</h1>
             <hr style="border-color: #000000" id="zombie">
             <h2>What is a Zombie</h2>
             <hr>
             <div class="content">
                <h3>ZOM-BIE: (Zom'be) n. also ZOM-BIES pl.</h3>
                <ul>
                    <li>An animated corpse that feeds on living human flesh.</li>
                    <li>A voodoo spell that raises the dead.</li>
                    <li>A Voodoo snake god.</li> 
                    <li>One who moves or acts in a daze "like a zom- bie." [a word of West African origin]</li> 
                </ul>

                <p><img class="contentImage" src="images/Zombie.jpg" alt="Zombie Picture">A zombie is the recently reanimated corpse of a human. This reanimation is  unexplained and for our purpose we      don't really care about  why. We just need to deal with the result.  They are slow moving and mindless but determined. There only goal is to feed.  We really have no idea why they crave flesh.  Taken one or two at a time they pose no problem to an armed and prepared individual. In groups of four or more, problems can begin to arise. Zombies show no fear, feel no pain, and will never stop, there is not a more determined foe on the face planet. This is what makes them so dangerous, oh and the fact that they can be riddled with bullets and not die.</p>  
                <p>To kill a zombie you must completely destroy the brain, or  sever the spinal cord from the head. Be aware that this method leaves the head still capable of functioning. Meaning if you get close enough it can still bit you and infect you. No amount of damage to other parts of the body will kill a zombie. You can make them almost safe by dismembering them and removing the jaw but if you are going to go to that much effort just end them.
                </p>

                <h3>How to Kill a Zombie</h3>
                <iframe src="http://video.vulture.com/video/Walking-Dead-Kills/player?layout=compact&amp;read_more=1" width="416" height="322" frameborder="0" scrolling="no"></iframe>
             </div>

             <hr id="zombieApoc" style="border-color: #000000" >
             <h2>What is the Zombie Apocalypse</h2>
             <hr>
             <div class="content">
                 <p><img src="images/zombie-apocalypse.jpg" alt="Zombie Apocalypse Picture" class="contentImage">This basically means that a zombie plague has taken over the world and society as we know it has collapse on a global scale. Humans are no longer the top of the food chain.   All of the modern conveniences like cell phones, electricity, and well, with the failure of electricity that ends of most of the other modern day conveniences. Survival has become the main priority. Over time and with proper planning basic survival may not need to be such a high priority.</p> 
                 <p>Human kind is isolated and in small groups scattered through out the world. In this world people have to be wary of roaming zombies as well as other people. Wealth is no longer contingent on how much money you have, but on what kind of supplies you have. Food, weapons, and location are now what makes you rich. With this there will be groups of people that will want what you have. You will have to be almost as weary of the stranger you meet as of the zombie. If you are part of a group you need to be prepared to defend what you have at all costs. It is a ruff world and no one knows How long it will last for. See <a href="extendedSurvival.htm#duration">Extended Survival</a> for more information regarding the duration of the Zombie Apocalypse.</p>
            </div>
             <div id="footer">
                <div id="footerNav">
                    <a href="index.htm" style="color: #000000; background: #ffffff;">Home</a>&nbsp; &mdash; &nbsp;
                    <a href="surviveFirstNight.htm">Surviving First Night</a>&nbsp; &mdash; &nbsp;
                    <a href="extendedSurvival.htm">Extended Survival</a>&nbsp; &mdash; &nbsp;
                    <a href="weapons.htm">Weapons</a>&nbsp; &mdash; &nbsp;
                    <a href="humanElement.htm">Human Element</a>&nbsp; &mdash; &nbsp;
                    <a href="refMaterial.htm">Reference / Contact</a>
                </div>
                <a href="images/imageCitation.pdf">Image Citation</a><br>
                Copyright &copy; 2013 Per Larsen<br>
                <a href="mailto:jokerfwb@yahoo.com">Per Larsen</a>  
            </div>  
        </div>
    </div>

   <div id="main-left">
        <div id="leftLogo">
            <img src="images/zombieSurvival.png" alt= "Zombie Survival">
        </div>
        <div id="left_col">
             <div class="menu">
                <ul>
                     <li><a href="index.htm" style="color: #ffffff">Home</a>
                         <div class="subMenu">
                             <ul>
                                 <li><a href=index.htm#zombie>What is a Zombie</a></li>
                                 <li><a href=index.htm#zombieApoc>What is the Zombie Apocalyspe</a></li>
                             </ul>
                             <br>
                         </div>
                     </li>

                     <li><a href="surviveFirstNight.htm">Surviving First Night</a>
                         <div class="subMenu">
                             <ul>
                                 <li><a href=surviveFirstNight.htm#firstNight>What is First Night</a></li>
                                 <li><a href=surviveFirstNight.htm#prepared>Prepare/Planning</a></li>
                                 <li><a href=surviveFirstNight.htm#survivalKit>Zombie Survival Kit</a></li>
                                 <li><a href=surviveFirstNight.htm#group>Form a Group</a></li>
                             </ul>
                             <br>
                         </div>
                     </li>

                     <li><a href="extendedSurvival.htm">Extended Survival</a>
                         <div class="subMenu">
                             <ul>
                                 <li><a href=index.htm#zombie>What is a Zombie</a></li>
                                 <li><a href=index.htm#zombieApoc>What is the Zombie Apacolyspe</a></li>
                             </ul>
                             <br>
                         </div>
                     </li>

                     <li><a href="weapons.htm">Weapons</a>
                         <div class="subMenu">
                             <ul>
                                 <li><a href=weapons.htm#melee>Melee Weapons</a></li>
                                 <li><a href=weapons.htm#firearms>Firearms</a></li>
                                 <li><a href=weapons.htm#projectile>Projectile Weapons</a></li>
                                 <!--<li><a href=weapons.htm#explosives>Explosives</a></li> -->
                             </ul>
                             <br>
                         </div>
                     </li>

                     <li><a href="humanElement.htm">Human Element</a>
                         <br>
                     </li>

                     <li><a href="refMaterial.htm">Reference / Contact</a>
                         <div class="subMenu">
                             <ul>
                                <li><a href=refMaterial.htm#refer>Reference Material</a></li>
                                 <li><a href=refMaterial.htm#contact>Contact           Info</a></li>
                             </ul>
                             <br>
                         </div>
                     </li>
                </ul>

             </div>
        </div>
   </div>
</div> 
```

这是设置我的布局的 CSS

```
/* DIV set up*/
#main
{
width: 90%;
min-width: 700px;
margin-left: auto;
margin-right: auto;
opacity: .88;
}

#main-right
{
width: 79%;
position: relative;  
float: right;
}

 #main-left
{
width: 19%;
position: fixed;
float: left;
}

#left_col
{
width: 17.5%;
min-width: 135px;
width: 95%;
padding: 10px 0px 0px 0px;
text-align: center;

/*
opacity: .99;
background-color: #663333;
 border: 3px solid #000000;
-webkit-border-radius: 0px 0px 6px 6px;
-moz-border-radius: 0px 0px 6px 6px;
border-radius: 0px 0px 6px 6px;
*/
}

#right_col
{
width: 95%;
background-color: #663333;
float: left;
padding: 10px 0px 0px 0px;
border: 3px solid #000000;
-webkit-border-radius: 0px 0px 6px 6px;
-moz-border-radius: 0px 0px 6px 6px;
border-radius: 0px 0px 6px 6px;
}

.content
{
width: 90%;
color: #000000;
padding: 1px 15px 5px 10px;
background-color: #B8B8B8;
margin-left: auto;
margin-right: auto;

-webkit-border-radius: 2px 2px 2px 2px;
-moz-border-radius: 2px 2px 2px 2px;
border-radius: 2px 2px 2px 2px;

-webkit-box-shadow: 3px 3px #181818;
-moz-box-shadow: 3px 3px #181818;
box-shadow: 3px 3px #181818;

}

.contentImage
{
float:left;
margin-right: 5px;
width: 40%;

}

#footer
{
width: 80%;
margin-left: auto;
margin-right: auto;
font-size: .80em;
font-style: italic;
text-align: center;
border: 3px solid #000000;
-webkit-border-radius: 0px 0px 6px 6px;
-moz-border-radius: 0px 0px 6px 6px;
border-radius: 0px 0px 6px 6px;
clear: both;
}

#footerNav
{
font-size: 1em;
font-style: normal;
text-align: center;
color: #000000; 
}
#footerNav a
{
text-decoration: none;
color: #ffffff;
padding: 0px 3px 0px 3px;

-webkit-border-radius: 2px 2px 2px 2px;
-moz-border-radius: 2px 2px 2px 2px;
border-radius: 2px 2px 2px 2px;
}
#footerNav a:visited
{
color: #ffffff;
}
#footerNav a:hover
{
background: #000000;
}

#leftLogo
{
width: 100%;
min-width: 135px;
height: 115px;

}

#leftLogo img
{

min-width: 135px;
width: 95%;
height: auto;
margin-top: 30px;
} 
```

# java - 蛮力 BigInteger 分解

> ID：16006507
> 
> 赞同：0
> 
> 时间：2013-04-15T01:51:05.260
> 
> 标签：java, primes, biginteger, brute-force, factorization

从标题可以看出，我正在努力尝试对因数为 2 个素数的大整数进行因式分解。我想知道是否有一种方法可以为此在 for 循环中使用 for 循环。我知道这是一种可怕的方法，但我还是想这样做。（我打算使用 fermats 因式分解定理，但如果没有一些额外的方法/库，你就不能 sqrt BigIntegers，我不能这样做）所以试着看看你是否能帮助我做我正在做的事情。大致上是这样的：

```
BigInteger n = new BigInteger("270653957405596110781");  // this is what i need the factors of
BigInteger TWO = new BigInteger("2");
for( BigInteger i = new BigInteger("1"); i < n.divide(TWO); i.nextProbablePrime() ){
    for( BigInteger k = new BigInteger("1"); k < n.divide(TWO); k.nextPossiblePrime){
        if(i.Multiply(k) = n){
            //i and k are the factors, and return them
        }
     }
 } 
```

显然那太糟糕了，我知道你不能通过说 i.nextPossiblePrime() 来增加下一个素数，你需要它说 i = i.nextpossible prime，我只是向你展示了我希望它如何工作; 但这就是我问的原因，因为我想知道这样的事情是否可能！

请让我知道这条路线是否可行，以及我如何修复这个糟糕的代码以像我想象的那样运行！

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T01:59:26.160

我拒绝“只是帮助你做你正在做的事情”。它行不通。

我谦虚地在我的博客上推荐了一篇关于[*素数编程的文章。*](http://programmingpraxis.com/essays)那里讨论的 pollard-rho 算法将毫无困难地考虑您的数字。包括使用 BigInteger 的 java 实现。

顺便说一句，270653957405596110781 = 7588940707 * 35664260383。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T07:23:06.950

我对计算机科学还很陌生（8 个月），这是我第一次回答问题，如果我没有太多帮助，很抱歉。如果我错了，请纠正我（说真的，我正在努力学习），但我认为你正在寻找的是二次筛。[http://en.wikipedia.org/wiki/Quadratic_sieve](http://en.wikipedia.org/wiki/Quadratic_sieve)您似乎比我更先进，但我能够通过一天的工作来实现它。它在分解大量数字方面非常有效。

我对 Fermat 的因式分解方法一无所知，但是您不能将 BigInteger 继承到一个新类中并自己实现它，并使用平方根函数完成吗？我不知道您需要什么样的准确性，但您始终可以将其基于 BigDecimal。

希望这会有所帮助

编辑：我猜你没有测试你的代码。您不能将 < 之类的运算符与 BigInteger 一起使用。您需要使用 BigInteger.compareTo(BigInteger)

# windows-phone-8 - 如何在 Windows Phone 8 上截取系统托盘的屏幕截图？

> ID：16006508
> 
> 赞同：0
> 
> 时间：2013-04-15T01:51:09.073
> 
> 标签：windows-phone-8

我在我的应用程序中截屏，但图片中没有系统托盘，如何截屏？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T05:28:15.930

`WriteableBitmap`如果您使用这种方法，我不确定您是否可以。如果您使用 Windows 硬件键和电源键在设备上进行手动捕获（或在模拟器中进行捕获），*则会*捕获系统托盘。

# java - 使用 JDBC 读取和更新每一行

> ID：16006511
> 
> 赞同：4
> 
> 时间：2013-04-15T01:51:20.700
> 
> 标签：java, mysql, jdbc

我能够很好地读取查询的每一行，但我也想在读取字段时更新它们。

当我添加两个 rs.update 行时，以下代码会中断。

```
Connection con = DriverManager.getConnection(url, user, pass);
stmt = con.createStatement(ResultSet.TYPE_SCROLL_SENSITIVE,
                           ResultSet.CONCUR_UPDATABLE)
ResultSet rs = stmt.executeQuery(query);
while (rs.next()) {
  amount = rs.getInt("amount");
  username = rs.getString("username");

  rs.updateString("processed", "true");
  rs.updateRow();
} 
```

看来我已经找到了答案：

[严重] com.mysql.jdbc.NotUpdatable：结果集不可更新（引用的表没有主键）。此结果集必须来自使用 ResultSet.CONCUR_UPDATABLE 结果集类型创建的语句，查询必须仅选择一个表，不能使用函数，必须从该表中选择所有主键。有关更多详细信息，请参阅 JDBC 2.1 API 规范，第 5.6 节。

将主键添加到我的数据库不会有什么坏处，这可能是正确的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T02:20:02.830

我在我的数据库中添加了主键，它工作得很好。

谢谢！

# ruby-on-rails - 如何理解 Rails 中的运行时布局？

> ID：16006513
> 
> 赞同：0
> 
> 时间：2013-04-15T01:51:27.137
> 
> 标签：ruby-on-rails, layout

```
class ProductsController < ApplicationController
  layout :products_layout

  def show
    @product = Product.find(params[:id])
  end

  private
    def products_layout
      @current_user.special? ? "special" : "products"
    end

end 
```

这里什么时候`products_layout`执行方法？我看不到调用该方法的任何地方，`products_layout`那么如何`:products_layout`定义符号？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T02:27:51.577

Rails 有隐式渲染，所以在方法“show”的最后，因为你没有告诉 Rails 做任何不同的事情，它会渲染 app/views/products/show.html.erb 模板。

此外，它会查看您指定的布局。在这里，您为布局指定了一个符号，Rails 将其理解为“执行此方法名称以找出我应该使用的布局”

# oracle - 使用对象将变量数组插入嵌套表

> ID：16006514
> 
> 赞同：0
> 
> 时间：2013-04-15T01:51:29.223
> 
> 标签：oracle, plsql, nested-table

我有一系列我定义的表和对象。我有一个对象嵌套表，我试图将值插入其中。这些值采用变量数组的形式，但我不知道如何插入它们。我的表格和代码如下。

### 表 wu.classes

```
crn number(5)     
department varchar2(8)  
title carchar2(25) 
```

### 表wu.students

```
student_id char(11)  
name varchar2(10)  
dept varchar2(8)  
advisor varchar(10)  

classes wu.classes_va  

wu.classes_va varray(5) of number (5)  

create type classes_ty as object(crn varchar2(5),department varchar2(8), coursetitle varchar2(25)  

create table classes_ot of classes_ty;  

insert into classes_ot select crn,department,title from wu.classes;  

create or replace type classes_ref_ty as table of ref classes_ty;  

create table student_plus(student# varchar2(11),student_name varchar2(10),major varchar2(8), advisor (10), enrolled classes_ref_ty) nested table enrolled store as classes_ref_ty_tab; 
```

这里的问题（我需要循环填写表格，但我只需要知道如何为一个值执行此操作，其余的我可以弄清楚）：

```
begin  
insert into student_plus values('700-123-948','Hooker','CS','VanScoy',classes_ref_ty();  

insert into table(select enrolled from student_plus where student#='700-123-948')  
select ref(c) from classes_ot c where ???    
end;   
/ 
```

我不知道如何访问变量数组并将其与 classes_ref_ty 一起使用。

# c++ - C++ windows 二进制文件：与 MinGW 一起使用的条件

> ID：16006515
> 
> 赞同：2
> 
> 时间：2013-04-15T01:51:31.520
> 
> 标签：c++, windows, linker, mingw32, binaries

我是 C++ 新手，现在正在努力编译和链接。最近我一直在使用 cmake 和 make 重新编译一个使用 Boost 的库（mlpack）（[Cmake 找不到 boost 1.51（windows 8）](https://stackoverflow.com/questions/15921656/cmake-does-not-find-boost-1-51-windows-8)）。

在第一次尝试中，我下载了 Windows 的预编译二进制文件。这没有很好地工作，我已经解释过我使用的二进制文件是用于 MSVC，而不是 MinGW，因此很麻烦。事实上，在使用 MinGW 重新编译 boost 之后，一切正常。

在这里，我只想直观地了解 MSVC 和 MinGW 的二进制文件之间的区别。我（天真地？）认为二进制文件是特定于操作系统/处理器的。MSVC 的二进制文件包含哪些使 MinGW 无法使用它们？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T02:00:56.573

只要它们导出纯 C API，组合由 MSVC 和 MinGW 生成的工件（静态/共享库）（这通常适用于其他 C 编译器）相对容易。这使得 C API 非常便携，这也是为什么这么多流行的库仍然喜欢使用纯 C API 的主要原因之一。

C++ 的故事完全不同。不同 C++ 编译器生成的工件之间正确互操作性的最臭名昭著的障碍是[名称修饰](http://en.wikipedia.org/wiki/Name_mangling)和[应用程序二进制接口](http://en.wikipedia.org/wiki/Application_binary_interface)(ABI) 的差异。这通常适用于所有 C++ 编译器，而不仅仅是 MinGW 和 MSVC。如果你想了解更多关于 MSVC 和 MinGW 之间的互操作性陷阱，我鼓励你阅读以下文章：

1.  [不同编译器品牌创建的库的互操作性](http://www.mingw.org/wiki/Interoperability_of_Libraries_Created_by_Different_Compiler_Brands)
2.  [二进制兼容的 C++ 接口](http://chadaustin.me/cppinterface.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T01:58:17.877

简单点。

Windows 会说话`French`。
MinGW 说`French`,`German`和`English`.
Unix系统说话`German`。

* * *

MSVC 二进制文件是用`French`.
MinGW 二进制文件是用`FrenchAngloGerman`.
UNIX 二进制文件是用`German`.

* * *

Windows 需要 MinGW 翻译一些`German`and `English`to`French`才能理解所有内容。

* * *

MinGW 与其他程序不同。它基本上是一个介于 Windows 和 Linux 之间的迷你操作系统。所以大多数情况下，它需要修改形式的二进制文件才能正常工作。您在 MinGW 上的 Windows 上开发程序这一事实并不意味着它们将在纯 Windows 上运行而没有任何问题。您仍然需要发布或分发您在程序中使用的 MinGW 库和可执行文件。

# django - 应用名称在 url 中出现两次 | 姜戈

> ID：16006516
> 
> 赞同：0
> 
> 时间：2013-04-15T01:51:39.387
> 
> 标签：django

在我的主页上，我有一个指向注册页面的链接。

在我的浏览器中，主页位于`127.0.0.1:8000/app_name/`

当我单击链接进行注册时，它会将我带到`127.0.0.1:8000/app_name/app_name/register/`，这会导致 404 错误。

但它应该带我到`127.0.0.1:8000/app_name/register/`，它显示正确的 html。

在我的views.py中，对于注册页面，我有：

`return render(request, 'app_name/register.html', {'form': form})`

在我的应用程序 urls.py 中，对于注册页面，我有：

`url(r'^register/$', views.register, name='register'),`

为什么我的网址中出现重复的 app_name？

更新：

这是我的项目 urls.py：

```
from django.conf.urls import patterns, include, url

from django.contrib import admin

admin.autodiscover()

urlpatterns = patterns('',
    url(r'^app_name/', include('app_name.urls')),
    url(r'^admin/', include(admin.site.urls)),
) 
```

这是我的 app_name urls.py：

```
from django.conf.urls import patterns, url

from app_name import views

urlpatterns = patterns('',
    url(r'^$', views.index, name='index'),
    url(r'^register/$', views.register, name='register'),
) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T01:56:25.000

您是在应用程序 urls.py 或项目中声明 url 吗？（我想知道它经历了多少模式声明）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T06:14:54.157

请在您的项目目录中添加模板目录并在 settings.py 中添加此路径（您可以添加绝对路径和相关路径）在此模板文件夹中添加您的 html 页面

[阅读我的答案](https://stackoverflow.com/questions/13927643/how-to-give-the-path-for-template-directory/13929894#13929894)以在 settings.py 中添加路径

并在您的 html 中链接到注册页面

```
<a href="/app_name/register/">Sign Up</a> 
```

你的看法

```
return render(request, 'register.html', {'form': form}) 
```

# asp.net - 评估页面是否是来自特定页面的推荐结果

> ID：16006517
> 
> 赞同：0
> 
> 时间：2013-04-15T01:51:39.843
> 
> 标签：asp.net, vb.net, ms-access, postback

我有一个编辑个人资料页面，它允许用户更改他们的信息 - 目前它只允许在“userprofiles”表中有记录的用户编辑他们的信息。我希望新注册的用户也能够编辑他们的个人资料。

目前，我正在使用 ASP.NET 会员系统和 Access 数据库中的适当 asp.net_ 表来存储用户凭据。'userprofiles' 表是一个单独的表，其中包含更多个人信息。两个表之间没有链接

这是我背后的代码：

> ```
> Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
> 
>     If IsCrossPagePostBack Then
>         SeparateNewUserFunction()
>         Return
>     End If
>     If Not IsPostBack Then
>         DisplayData()
>         SaveConfirmation.Visible = False
>     End If
> End Sub 
> ```

如果有人对它的作用感兴趣，这是我的 DisplayData() 函数：

> ```
>  Protected Sub DisplayData()
>     Dim conn As OleDbConnection = New OleDbConnection(ConfigurationManager.ConnectionStrings("BookMeetConnString").ConnectionString)
>     Dim sql = "SELECT * FROM userprofiles WHERE TravellerName=@f1"
>     Dim cmd = New OleDbCommand(sql, conn)
>     cmd.Parameters.AddWithValue("@f1", User.Identity.Name)
>     conn.Open()
>     Dim profileDr = cmd.ExecuteReader()
>     profileDr.Read()
>     Dim newEmailAddress = ""
>     Dim newDescription = ""
>     If Not IsDBNull(profileDr("EmailAddress")) Then newEmailAddress = profileDr.Item("EmailAddress")
>     If Not IsDBNull(profileDr("Description")) Then newDescription = profileDr.Item("Description")
>     If Not IsDBNull(profileDr("AvatarURL")) Then ProfilePic.ImageUrl = profileDr.Item("AvatarURL")
>     description.Text = newDescription
>     email.Text = newEmailAddress
>     conn.Close()
> 
> End Sub 
> ```

而不是检查“userprofiles”表中是否存在与当前用户的 User.Identity.Name 匹配的记录，我认为评估用户是否刚刚从 Register.aspx 页面重定向会更容易. （如果这个评估是真的，那么正如你在上面看到的，一个单独的“新用户”函数将被调用）。

这是我的逻辑，但我不知道 VB.NET 是否有“referrer”或“isReferred”表达式？（正如你所看到的，我认为 isCrossPagePostback 可能是正确的，但没有运气！）

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T03:13:19.900

您需要检查记录是否存在并以此为基础。这是唯一正确的方法。如：

1.  如果您引入一个新页面来处理注册怎么办？这个逻辑断了。
2.  如果有一天你退休了，而下一个人决定重命名 Register.aspx 页面怎么办？这个逻辑断了。
3.  如果用户点击返回按钮并再次点击注册按钮怎么办？这个逻辑可能会被打破。

您还应该考虑该表的外键和唯一约束，以及使用 UserId 而不是 TravellerName。TravellerName 可以更改，UserId 不会。

...是的，您可以使用[HttpRequest.ServerVariables](http://msdn.microsoft.com/en-us/library/system.web.httprequest.servervariables.aspx)来引用页面，它会为您提供[IIS 服务器变量](http://msdn.microsoft.com/en-us/library/ms524602.aspx)列表。

# git - 如何在 git 分支上更改作者姓名

> ID：16006518
> 
> 赞同：4
> 
> 时间：2013-04-15T01:52:00.413
> 
> 标签：git, branching-and-merging, git-amend

前几天我分支了我的 github 项目以创建静态页面，但搞砸了我的作者姓名

[https://github.com/ronaldsuwandi/le-simplepage/commits/gh-pages](https://github.com/ronaldsuwandi/le-simplepage/commits/gh-pages)

如何为分支的第一次提交重命名作者？

我试过了

*   [在 Git 中更改多个提交的作者和提交者名称和电子邮件](https://stackoverflow.com/questions/750172/how-do-i-change-the-author-of-a-commit-in-git)
*   [在一个特定的提交处更改提交作者](https://stackoverflow.com/questions/3042437/change-commit-author-at-one-specific-commit)

但没有运气 - 我对 git 还是很陌生..

[编辑：如果我想更改第一次提交， Amber](https://stackoverflow.com/a/3042512/364569)给出的答案不起作用（例如，如果我的提交历史是`A-B-C-D`并且我想更改`B`I can do的提交历史`git rebase -i A`。但我不确定如果我该怎么做想改变自己的提交历史`A`。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-15T03:06:21.057

```
git checkout gh-pages
git reset --hard 02bd
git commit --amend --author 'Ronald Suwandi <ronald@ronaldsuwandi.com>'
git cherry-pick 02bd..origin/gh-pages
git push -f 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-15T03:03:51.513

就像在现实生活中一样，改变历史并不是一件小事。;)

在 git 中，提交包括（除其他外）作者姓名和父提交。因此，您不能简单地更改提交作者等属性。您唯一能做的就是丢弃旧的提交并创建一个新的固定提交。但是由于下一个提交确实包含作为父级的原始提交，因此您也必须更改该提交。- 但是你不能这样做，但你需要更换旧的，等等。

可以`git rebase`帮助您解决这种丑陋的事情：它需要一系列提交并创建一个具有更改历史的全新提交。由于 git 中的分支只是指向单个提交的指针，因此变基只是将该指针从旧历史记录更改为新历史记录。

```
X-A-B-C-D <- "old master"
 `a-b-c-d <- "new master" 
```

只要您在本地存储库上工作，就可以随意更改历史记录。一旦您通过将提交推送到 github 之类的共享存储库来发布提交，事情就会发生变化。如果您已经发布了旧的历史记录，现在又发布了新的历史记录，那么这两个版本都已发布，并且如果其他人也在该存储库上工作，那么旧版本很可能会回到您的历史记录中。

因此，一旦您发布了历史，通常就不要更改它。但是，如果您确定没有其他人在您的远程存储库上工作，您无论如何都可以这样做：在本地修复您的历史记录并强制将其推送到存储库。

在本地更改历史记录很容易`git rebase -i`。不幸的是，对于您的存储库的根提交来说，这有点棘手。请参阅[使用 Git 更改项目的首次提交？](https://stackoverflow.com/q/2246208/1870481)详情。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-12-02T11:07:13.283

Git Tower 有一个非常有用的页面，详细介绍了更改作者的几种不同方法

您可以在命令行上使用以下脚本来修复 repo 中不正确的作者姓名。

```
$ git filter-branch --env-filter '
WRONG_EMAIL="wrong@example.com"
NEW_NAME="New Name Value"
NEW_EMAIL="correct@example.com"
if [ "$GIT_COMMITTER_EMAIL" = "$WRONG_EMAIL" ]
then
    export GIT_COMMITTER_NAME="$NEW_NAME"
    export GIT_COMMITTER_EMAIL="$NEW_EMAIL"
fi
if [ "$GIT_AUTHOR_EMAIL" = "$WRONG_EMAIL" ]
then
    export GIT_AUTHOR_NAME="$NEW_NAME"
    export GIT_AUTHOR_EMAIL="$NEW_EMAIL"
fi
' --tag-name-filter cat -- --branches --tags 
```

[https://www.git-tower.com/learn/git/faq/change-author-name-email](https://www.git-tower.com/learn/git/faq/change-author-name-email)

# c - 与不同线程共享数据的最快方法？

> ID：16006520
> 
> 赞同：0
> 
> 时间：2013-04-15T01:52:07.460
> 
> 标签：c, multithreading, openmp, race-condition

考虑以下使用 Open MP 的场景：

我们有一个指针`A`指向内存中的一个非常大的缓冲区，并且我们有几个线程，一个线程（我们称之为线程#1）不断更新其中的内容，`A`而另一个线程基于由 #1 控制的信号处理存储在`A`.

这是确保最快的方法（假设告诉其他线程正确复制时间的信号`A`是原子的，所以那里没有竞争条件）：

1.  处理数据的线程将始终使用更新的数据（例如，不会有某些数据被缓存在寄存器中的风险等）。

2.  很棒的表演。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T01:56:20.740

你可以试试读写锁。线程#1 持有写锁，其他线程持有读锁。这样所有其他线程都可以并行读取，只有读取和写入是互斥的。

# sql - 检索哪个字段值不以空格结尾的记录

> ID：16006521
> 
> 赞同：0
> 
> 时间：2013-04-15T01:52:15.320
> 
> 标签：sql, sql-server, sql-server-2008

有问题的数据库是 MS SQL。我有这个表和这个 varchar 数据类型的字段。

该字段包含以下值：

> ```
> 1\. " ABC DEF"
> 2\. "ABC DEF "
> 3\. " ABC DEF "
> 4\. " CCC DEF "
> 5\. " CCC DEF" 
> ```

双引号仅用于显示值中的空格。

现在，如何检索该字段不以空格结尾的所有记录？我认为下面的 SQL 应该可以工作，但事实并非如此！

```
 SELECT * FROM MyTable WHERE MyField like '%DEF' 
```

它检索所有上述记录。一个有效的 SQL 应该只检索记录 1 和 5。

任何帮助深表感谢。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T02:26:46.423

你可以用这个，

```
SELECT * FROM MyTable WHERE PATINDEX('%[ ]',[MyField]) = 0 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T02:22:20.753

关于什么

```
 SELECT * FROM yourTable where yourField LIKE "% " 
```

或者`NOT LIKE`，如果这就是你想要的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T01:56:59.060

LEN(RTRIM(myField)) = LEN(myField)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-15T17:31:00.543

len 函数会忽略末尾的空格，因此您需要执行一些操作，例如添加 . 在最后。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-15T02:08:43.893

尝试这个，

```
SELECT * FROM MyTable WHERE '.' + LTRIM(MyField) + '.' = '.' + RTRIM(LTRIM(MyField)) + '.' 
```

我想这不是正确的方法，但这会给出预期的输出

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-15T17:54:01.050

```
SELECT * FROM MyTable where LEN(MyField) = DATALENGTH(MyField) 
```

[LEN 和尾随空格](http://www.sql-tutorial.ru/en/book_function_len_trailing_spaces_and_uniqueness.html)

# powershell - 获取定义 PowerShell 函数的文件的路径

> ID：16006525
> 
> 赞同：6
> 
> 时间：2013-04-15T01:52:29.163
> 
> 标签：powershell, powershell-3.0

我试图找出一种方法来获取定义PowerShell*函数*的文件路径（例如Test1或Test2），而不是*调用者的*路径，这可以通过`$PSScriptRoot`自动变量轻松获得。

考虑以下文件夹结构：

```
c:\Scripts\Test.ps1
c:\Scripts\Test1\Test1.ps1
c:\Scripts\Test2\Test2.ps1 
```

**测试.ps1**

```
Set-Location $PSScriptRoot;
. .\Test1\Test1.ps1;
. .\Test2\Test2.ps1;

Test1;
Test2; 
```

**测试1.ps1**

```
function Test1 {
    [CmdletBinding()]
    param (
    )
    Write-Host -Object "Entering Test1";
    Write-Host -Object "Exiting Test1";
} 
```

**测试2.ps1**

```
function Test2 {
    [CmdletBinding()]
    param (
    )
    Write-Host -Object "Test2";
    Write-Host -Object "Exiting Test2";
} 
```

我尝试在`$PSCmdlet`和`$MyInvocation`自动变量上使用各种属性，但似乎无法找到一种方法来获取定义函数的文件的路径，而不是调用者所在的位置。

以不同的方式问，我如何`C:\Scripts\Test1\Test1.ps1`从`Test1`函数内部获取路径，当它被调用时`Test.ps1`？`Test2.ps1`脚本和`Test2`函数也是如此。我如何`C:\Scripts\Test2\Test2.ps1`从`Test2`函数内部获取路径？

这是不可能的，因为我正在使用`.`呼叫操作员将函数导入当前会话吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-15T06:32:08.943

这是另一种方法，使用函数的 scriptblock File 属性获取包含该函数的文件：

```
${function:Test1}.File 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-15T02:19:21.403

我认为 $PSCommandPath 有你正在寻找的东西。

# java - 如何在从 JComboBox 创建的按钮上放置标签？

> ID：16006526
> 
> 赞同：0
> 
> 时间：2013-04-15T01:52:30.103
> 
> 标签：java, swing, jbutton, jcombobox

我正在创建电梯，并从 JComboBox 制作了一些按钮，但是我似乎无法在它们上贴上标签。最多可以创建 8 个按钮，并且这些按钮必须从下到上命名。所以添加的最后一个按钮应该是一楼。

如何在从 JComboBox 创建的按钮上制作标签？

```
[-------floor N-------]
[-------floor 3-------]
[-------floor 2-------]
[-------floor 1-------] 
```

这是我的一些代码...

```
//The main class
public class Elevator_Simulation extends JFrame implements ActionListener {

public JLabel state; //The current state of the elevator being displayed
public ButtonPanel control; //The button control panel
private Elevator elevator; //The elevator area
String[] floorStrings = {"Select one", "1", "2", "3", "4", "5", "6", "7", "8"};    
JComboBox floorList = new JComboBox(floorStrings); //The combo box
JButton go = new JButton();
public JPanel buttons;
//private int counter;

//constructor
public Elevator_Simulation() {        

    //Setting up layout and content pane
    this.setSize(500, 500);
    this.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    this.setLocation(100, 100);
    this.getContentPane().setLayout(new BorderLayout(1, 1));

    buttons = new JPanel(new GridLayout(8, 1));
    add(buttons);

    //Panel creation
    JPanel centerpanel = new JPanel();
    centerpanel.setLayout(new FlowLayout());

    //Adds the button panel to the BorderLayout
    this.getContentPane().add(buttons, BorderLayout.EAST);

    // adds the title to the top of p3
    p3.add(title, BorderLayout.NORTH);
    // adds floorlist to the top right of p3
    p3.add(floorList, BorderLayout.NORTH);
    // adds the start button to the panel
    p3.add(go, BorderLayout.NORTH);
    go.setText("Start");
    go.addActionListener(this);
    // adds p2 to the right of the container
    this.getContentPane().add(p3, BorderLayout.NORTH);

//Main method
public static void main(String[] args) {
    Elevator_Simulation eSim = new Elevator_Simulation();
    eSim.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    eSim.setVisible(true);
}

//start of the actionPerformed
@Override
public void actionPerformed(ActionEvent e) {
    int count = floorList.getSelectedIndex();
    //buttons.removeAll();
    for (int index = 0; index < count; index++) {
        buttons.add(new JButton("F" + String.valueOf(index)));
    }
    buttons.revalidate();

    elevator = new Elevator(this);
    this.getContentPane().add(elevator, BorderLayout.CENTER);

}
//end of the actionPerformed 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T03:00:21.037

更改顺序，`floorStrings`使楼层按您期望的顺序显示。

![在此处输入图像描述](https://i.stack.imgur.com/w6NqS.png)

```
import java.awt.BorderLayout;
import java.awt.EventQueue;
import java.awt.GridBagLayout;
import javax.swing.JComboBox;
import javax.swing.JFrame;
import javax.swing.UIManager;
import javax.swing.UnsupportedLookAndFeelException;

public class TestComboBox08 {

    public static void main(String[] args) {
        new TestComboBox08();
    }

    public TestComboBox08() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                JComboBox cb = new JComboBox(new String[]{"Select one", "8", "7", "6", "5", "4", "3", "2", "1"});

                JFrame frame = new JFrame("Testing");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new GridBagLayout());
                frame.add(cb);
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

} 
```

**更新了简单地反转选择索引的能力......**

所以，现在我们颠倒了顺序，所以我们颠倒了选择索引（项目`8`不在位置`1`）。

我可以看到解决此问题的最简单方法是使用`Arrays.asList(floorsList).indexOf(...)`它将返回`floorsList`数组中所选值的位置...

```
import java.awt.BorderLayout;
import java.awt.EventQueue;
import java.awt.GridBagLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.util.Arrays;
import javax.swing.JComboBox;
import javax.swing.JFrame;
import javax.swing.UIManager;
import javax.swing.UnsupportedLookAndFeelException;

public class TestComboBox08 {

    public static void main(String[] args) {
        new TestComboBox08();
    }

    private String[] floorsList = new String[]{"Select one", "8", "7", "6", "5", "4", "3", "2", "1"};

    public TestComboBox08() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                final JComboBox cb = new JComboBox(floorsList);

                JFrame frame = new JFrame("Testing");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new GridBagLayout());
                frame.add(cb);
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);

                cb.addActionListener(new ActionListener() {
                    @Override
                    public void actionPerformed(ActionEvent e) {
                        String value = (String)cb.getSelectedItem();
                        int index = Arrays.asList(floorsList).indexOf(value);
                        System.out.println("Item at " + index + " = " + floorsList[index]);
                    }
                });
            }
        });
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T02:22:43.950

使用 a`ListCellRenderer`来控制项目在组合框中的显示方式。

[http://docs.oracle.com/javase/6/docs/api/javax/swing/ListCellRenderer.html](http://docs.oracle.com/javase/6/docs/api/javax/swing/ListCellRenderer.html)

编辑：

实施`ListCellRenderer`是更好的表达方式

# javascript - 在按键上更改形状的坐标

> ID：16006529
> 
> 赞同：1
> 
> 时间：2013-04-15T01:53:44.493
> 
> 标签：javascript, canvas, keypress

我有一个`<canvas/>`, 和一个形状渲染。我正在尝试在按键上更改形状的坐标，但没有运气。

这是我的来源：

```
var canvas = document.getElementById('game');
var context = canvas.getContext('2d');
var radius = 35;

var xPos = 0;

context.beginPath();
context.arc(xPos, 0, radius, 0, 2 * Math.PI, false);
context.fillStyle = 'green';
context.fill();
context.lineWidth = 5;
context.strokeStyle = '#003300';
context.stroke(); 

$(document).keypress(function(event) {
    if (event.which == 100) {
        xPos++;
    }
}); 
```

我遇到的另一个问题是弄清楚什么键是什么数字？某处有图表吗？我在不同的网站上看到了两个相互冲突的价值观。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T02:11:25.823

以下文章[http://atomicrobotdesign.com/blog/htmlcss/move-objects-around-the-canvas-using-the-keyboard-and-jquery/](http://atomicrobotdesign.com/blog/htmlcss/move-objects-around-the-canvas-using-the-keyboard-and-jquery/)详细介绍了使用 jQuery 引用 Canvas 对象然后对其进行操作目的。

它还检查了如何调整 Canvas 对象的位置以响应用户输入的击键。

希望有帮助。

# c# - 突出显示文本中的关键字

> ID：16006531
> 
> 赞同：4
> 
> 时间：2013-04-15T01:54:07.417
> 
> 标签：c#, sql, vb.net

我有一个 SQL Server 2008 数据库，它有一个带有 varchar(1000) 字段的表，其中包含一堆关于书籍的用户输入。我有另一个包含一堆关键字的表。当我呈现用户关于书籍的信息时，我想在这些关键字上突出显示（或最终创建超链接）。我正在寻找有关扫描文本和匹配关键字的最有效方法的建议。我不确定是否有办法在 SQL 中正确执行此操作，或者是否需要在代码中。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T13:47:07.563

我建议在代码中进行。它是业务逻辑，此外还减轻了数据库的负载 - 因此，如果数据库位于运行应用程序的服务器之外的机器中，则您不会占用该机器的资源。

我认为正则表达式会为您解决问题 - 它是有史以来最有效的文本匹配方法，并且大多数技术（不仅是 .NET）的内部实现几乎是您可以获得的最好的。如果你试图想出别的东西，你充其量只是在重新发明轮子。

所以我会这样做：将每个关键字放在哈希表或字典中 - 它具有切断重复项的好处，然后遍历它。然后，对于正文中关键字的每个匹配项，您可以获得匹配项的第一个和最后一个索引，并将其包装为突出显示和链接的标记。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T15:17:05.933

这是我编写的一个快速 LINQPad 程序，它将用与键匹配的字典值替换字符串中的值。让我知道这是否是您想要的。

旁注：我同意其他所有人的观点，出于各种原因，您应该在应用程序层执行此操作。

```
void Main()
{
    Dictionary<string, string> links = new Dictionary<string, string>();
    links.Add("awesome", "link-to-awesome");
    links.Add("okay", "link-to-okay");

    string text = "This is some text about an okay book review of an otherwise awesome book.";

    string result = links.Aggregate(text, (current, kvp) => current.Replace(kvp.Key, kvp.Value));
    text.Dump();
    result.Dump();
} 
```

结果：

```
This is some text about an okay book review of an otherwise awesome book. 
This is some text about an link-to-okay book review of an otherwise link-to-awesome book. 
```

编辑：这不是一个完美的例子。对于最终版本，您必须去掉标点符号和其他东西。希望这能让你走上正确的轨道。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T15:19:43.767

如果链接是固定的，那么我个人会在写入数据库时​​执行此操作，因为它只会执行一次，那么它不需要额外的努力来显示。

# installation - WiX 多实例安装错误（错误代码为 2755。参数为：1639）

> ID：16006532
> 
> 赞同：1
> 
> 时间：2013-04-15T01:54:14.203
> 
> 标签：installation, wix, instance, multiple-instances, wix3.6

我一直在为我的安装创建多个实例，这是我到目前为止的代码 注意：明显的数据已被删除。我让 UI 出现，我一直到安装阶段，就在它点击进度对话框时，我收到一条错误消息。

我知道这不是我的 msiexec 版本或服务，因为我已经检查了所有内容。谁能告诉我到底是什么导致了这个问题？

```
<!--Multi-instance-->
<InstanceTransforms Property="INSTANCEID">
  <Instance Id="Inst1" Inst1PProductductCode="**GUID**" Inst1PProductductName="Inst1PProductductInst1"/>
  <Instance Id="Inst1Stage" Inst1PProductductCode="**GUID**" Inst1PProductductName="Inst1PProductductInst1Stage"/>
  <Instance Id="Inst3" Inst1PProductductCode="**GUID**" Inst1PProductductName="Inst1PProductductInst3"/>
  <Instance Id="Inst4" Inst1PProductductCode="**GUID**" Inst1PProductductName="Inst1PProductductInst4"/>
  <Instance Id="Other" Inst1PProductductCode="**GUID**" Inst1PProductductName="Inst1PProductductOther"/>
  <Instance Id="Other2" Inst1PProductductCode="**GUID**" Inst1PProductductName="Inst1PProductductOther2"/>
  <Instance Id="Other3" Inst1PProductductCode="**GUID**" Inst1PProductductName="Inst1PProductductOther3"/>
</InstanceTransforms>

<!--Registering Multiple Instances-->
<Property Id="Inst1INSTALLEDInst1PProductductCODE">
  <RegistrySearch Id="Inst1Inst1PProductductCodeLookUp" Key="$(var.RegKeyDir)\Inst1" Name="**GUID**" Productot="HKLM" Type="raw"/>
</Property>
<Property Id="Inst1STAGEINSTALLEDInst1PProductductCODE">
  <RegistrySearch Id="Inst1StageInst1PProductductCodeLookUp" Key="$(var.RegKeyDir)\Inst1Stage" Name="**GUID**" Productot="HKLM" Type="raw"/>
</Property>
<Property Id="Inst3INSTALLEDInst1PProductductCODE">
  <RegistrySearch Id="Inst3Inst1PProductductCodeLookUp" Key="$(var.RegKeyDir)\Inst3" Name="**GUID**" Productot="HKLM" Type="raw"/>
</Property>
<Property Id="Inst4INSTALLEDInst1PProductductCODE">
  <RegistrySearch Id="Inst4Inst1PProductductCodeLookUp" Key="$(var.RegKeyDir)\Inst4" Name="**GUID**" Productot="HKLM" Type="raw"/>
</Property>
<Property Id="OTHERINSTALLEDInst1PProductductCODE">
  <RegistrySearch Id="OtherInst1PProductductCodeLookUp" Key="$(var.RegKeyDir)\Other" Name="**GUID**" Productot="HKLM" Type="raw"/>
</Property>
<Property Id="OTHER2INSTALLEDInst1PProductductCODE">
  <RegistrySearch Id="Other2Inst1PProductductCodeLookUp" Key="$(var.RegKeyDir)\Other2" Name="**GUID**" Productot="HKLM" Type="raw"/>
</Property>
<Property Id="OTHER3INSTALLEDInst1PProductductCODE">
  <RegistrySearch Id="Other3Inst1PProductductCodeLookUp" Key="$(var.RegKeyDir)\Other3" Name="**GUID**" Productot="HKLM" Type="raw"/>
</Property>

<!--Installation Files-->
<Directory Id="TARGETDIR" Name="SourceDir">
  <Directory Id="PProductgramFilesFolder" Name="PProductgramFiles">
    <Directory Id="INSTALLDIR" Name="Inst1PProductduct">
      <Directory Id="Inst1PProductductWEB"> <!--Name="Inst1PProductduct(Inst1) Web"-->
        <!--RegCompCode-->

        <!--IISWebPoolCode-->
        <Component Id="IISWebPool" Guid="$(var.IISWebPoolCode)" Win64="no" MultiInstance="yes" Permanent="yes">
          <iis:WebAppPool Id="Inst1PProductduct" Name="Inst1PProductductAppPool" ManagedRuntimeVersion="[NET_VER]" IdleTimeout="0" RecycleMinutes="0" ManagedPipelineMode="integrated"/>
          <CreateFolder />
        </Component>

        <!--IISWebRegCode-->
        <Component Id="IISWebReg" Guid="$(var.IISWebRegCode)" KeyPath="yes" MultiInstance="yes">
          <iis:WebVirtualDir Id="ProductVirtualDir" Alias="[SHORTCUT]" Directory="Inst1PProductductWEB" WebSite="DefaultWebSite" >
            <iis:WebApplication Id="ProductWebApp" Name="[SHORTCUT]" WebAppPool="Inst1PProductduct" />
            <iis:WebDirPProductperties Id="ProductWebDir" AnonymousAccess="yes" WindowsAuthentication="yes" />
          </iis:WebVirtualDir>
          <CreateFolder />
        </Component>

        <!--WebDataFilesCode-->
        <Component Id="WebDataFiles" Guid="$(var.WebDataFilesCode)" MultiInstance="yes">              
          <File Id="clientaccesspolicy.xml" Source="$(var.Inst1PProductductWebFiles)\clientaccesspolicy.xml" Vital="yes" DiskId="1"/>
          <File Id="Default.aspx" Source="$(var.Inst1PProductductWebFiles)\Default.aspx" Vital="yes" DiskId="1"/>
          <File Id="Global.asax" Source="$(var.Inst1PProductductWebFiles)\Global.asax" Vital="yes" DiskId="1"/>
          <File Id="Global.asax.cs" Source="$(var.Inst1PProductductWebFiles)\Global.asax.cs" Vital="yes" DiskId="1"/>
          <File Id="Help.aspx" Source="$(var.Inst1PProductductWebFiles)\Help.aspx" Vital="yes" DiskId="1"/>
          <File Id="Help.aspx.cs" Source="$(var.Inst1PProductductWebFiles)\Help.aspx.cs" Vital="yes" DiskId="1"/>
          <File Id="Print.aspx" Source="$(var.Inst1PProductductWebFiles)\Print.aspx" Vital="yes" DiskId="1"/>
          <File Id="Report.aspx" Source="$(var.Inst1PProductductWebFiles)\Report.aspx" Vital="yes" DiskId="1"/>
          <File Id="Inst1PProductductHelp.aspx" Source="$(var.Inst1PProductductWebFiles)\Inst1PProductductHelp.aspx" Vital="yes" DiskId="1"/>
          <File Id="Silverlight.js" Source="$(var.Inst1PProductductWebFiles)\Silverlight.js" Vital="yes" DiskId="1"/>
          <File Id="WcfPortal.svc" Source="$(var.Inst1PProductductWebFiles)\WcfPortal.svc" Vital="yes" DiskId="1"/>
          <File Id="WcfSecurePortal.svc" Source="$(var.Inst1PProductductWebFiles)\WcfSecurePortal.svc" Vital="yes" DiskId="1"/>
          <File Id="Web.sample.config" Source="$(var.Inst1PProductductWebFiles)\Web.sample.config" Vital="yes" DiskId="1"/>
          <File Id="WpfWcfPortal.svc" Source="$(var.Inst1PProductductWebFiles)\WpfWcfPortal.svc" Vital="yes" DiskId="1"/>
          <File Id="Web.config" KeyPath="yes" Source="$(var.Inst1PProductductWebFiles)\Web.config" Vital="yes" />
          <util:XmlFile Id="SetConn" Action="setValue" ElementPath="/configuration/connectionStrings/add[\[]@name='Inst1PProductductConnectionString'[\]]/@connectionString"
                        Value="Data Source=[SERVERNAME];Initial Catalog=[DBNAME];Password=&quot;encrypted:kUrWr7n47L3akvAu89Evew==&quot;;User ID=Productster;"
                        File="[#Web.config]" SelectionLanguage="XPath" Sequence="1" />
        </Component>

        <!--RegisterFolderCode-->
        <!--<Component Id="RegisterFolder" Guid="$(var.RegisterFolderCode)">
          <RegistryValue Id="AppAlias" Name="AppAlias" Productot="HKLM" Key="SOFTWARE\Inst1PProductduct\Inst1PProductductWeb(Inst1)" Type='string' Value="[SHORTCUT]" KeyPath='yes'/>
          <RegistryValue Id="VirtualDir" Name='VirtualDir' Productot='HKLM' Key='SOFTWARE\Inst1PProductduct\Inst1PProductductWeb(Inst1)' Type='string' Value='[SHORTCUT]'/>
        </Component>-->

        <!--Registering Individual Instances-->
        <Component Id="Registry_Inst1" Guid="$(var.RegInst1Comp)">
          <Condition><![CDATA[INSTANCEID = "Inst1"]]></Condition>
          <RegistryKey Productot="HKLM" Key="$(var.RegKeyDir)\[INSTANCEID]" >
            <RegistryValue Id="Presence_Inst1" Action="write" Name="Inst1Inst1PProductductCode" Value="[Inst1PProductductCode]" Type="string" KeyPath="yes" />
          </RegistryKey>
        </Component>
        <Component Id="Registry_Inst1Stage" Guid="$(var.RegInst1StageComp)">
          <Condition><![CDATA[INSTANCEID = "Inst1Stage"]]></Condition>
          <RegistryKey Productot="HKLM" Key="$(var.RegKeyDir)\[INSTANCEID]" >
            <RegistryValue Id="Presence_Inst1Stage" Action="write" Name="Inst1StageInst1PProductductCode" Value="[Inst1PProductductCode]" Type="string" KeyPath="yes" />
          </RegistryKey>
        </Component>
        <Component Id="Registry_Inst3" Guid="$(var.RegInst3Comp)">
          <Condition><![CDATA[INSTANCEID = "Inst3"]]></Condition>
          <RegistryKey Productot="HKLM" Key="$(var.RegKeyDir)\[INSTANCEID]" >
              <RegistryValue Id="Presence_Inst3" Action="write" Name="Inst3Inst1PProductductCode" Value="[Inst1PProductductCode]" Type="string" KeyPath="yes" />
          </RegistryKey>
        </Component>
      </Directory>
    </Directory>
  </Directory>
</Directory>

<!--Create web applicaton under Default Website-->
<iis:WebSite Id="DefaultWebSite" Description="[SHORTCUT]" Directory="Inst1PProductductWEB">
  <iis:WebAddress Id="AllUnassigned" Port="80" />
</iis:WebSite>

<Feature Id="$(var.Feature)Install" 
         Title="$(var.InstallName) Installer" 
         Description="$(var.InstallName) Setup Wizard"
         Display="expand" 
         Level="1" 
         ConfigurableDirectory="Inst1PProductductWEB">
  <Feature Id="$(var.Feature)" Title="$(var.InstallName)" Description="$(var.InstallName)" Level="1">
    <ComponentRef Id="IISWebPool" />
    <ComponentRef Id="IISWebReg" />
    <ComponentRef Id="WebDataFiles" />
    <ComponentRef Id="BinFiles" />
    <ComponentRef Id="ClientBinFiles" />
    <ComponentRef Id="Registry_Inst1" />
    <ComponentRef Id="Registry_Inst1Stage" />
    <ComponentRef Id="Registry_Inst3" />
  </Feature>
</Feature>

<!--UI-->
<UI Id="Installer_UI">
  <UIRef Id="WixUI_Mondo"/>
  <Property Id="WIXUI_INSTALLER" Value="TARGETDIR"/>

  <DialogRef Id="InstallerUIDlg"/>
  <DialogRef Id="InstallDlg"/>
  <DialogRef Id="InstallPProductgressDlg"/>

  <Publish Dialog="ExitDialog" ContProductl="Finish" Event="EndDialog" Value="Return" Order="999"></Publish>
  <Publish Dialog="LicenseAgreementDlg" ContProductl="Next" Event="NewDialog" Value="InstallerUIDlg" Order="2">LicenseAccepted = "1"</Publish>
  <Publish Dialog="SetupTypeDlg" ContProductl="Back" Event="NewDialog" Value="InstallerUIDlg" Order="2">1</Publish>
  <Publish Dialog="PProductgressDlg" ContProductl="Next" Event="NewDialog" Value="InstallerUIDlg" Order="2">1</Publish>

</UI>
<UIRef Id="WixUI_Common"/>

<!--Custom Actions-->
<CustomAction Id="SetInst1PProductductName" Property="Inst1PProductductName" Value="[[Inst1PProductductNameProperty][INSTANCEID]]" />
<CustomAction Id="SetInstanceDirectory" Property="Inst1PProductductWEB" Value="[INSTALLDIR][INSTANCEID]\"/>
<CustomAction Id="SetTransforms" Property="TRANSFORMS" Value="{:[INSTANCEID];}[TRANSFORMS]" />
<CustomAction Id="SetNewInstance" Property="MSINEWINSTANCE" Value="1" />

<CustomAction Id="SetInstance_Inst1" Property="INSTANCEID" Value="Inst1" />
<CustomAction Id="SetInstance_Inst1Stage" Property="INSTANCEID" Value="Inst1Stage" />
<CustomAction Id="SetInstance_Inst3" Property="INSTANCEID" Value="Inst3" />
<CustomAction Id="SetInstance_Inst4" Property="INSTANCEID" Value="Inst4" />
<CustomAction Id="SetInstance_Other" Property="INSTANCEID" Value="Other" />
<CustomAction Id="SetInstance_Other2" Property="INSTANCEID" Value="Other2" />
<CustomAction Id="SetInstance_Other3" Property="INSTANCEID" Value="Other3" />

<InstallExecuteSequence>
  <Custom Action="SetInst1PProductductName" Before="ValidateInst1PProductductID" />
  <Custom Action="SetInstanceDirectory" Before="CostFinalize"><![CDATA[Inst1PProductductWEB = ""]]></Custom>
  <RemoveExistingInst1PProductducts Before="InstallInitialize" />
</InstallExecuteSequence>

<InstallUISequence>
  <Custom Action="SetInstance_Inst1" Before="SetTransforms"><![CDATA[ACTION = "INSTALL" AND INSTANCEID = "Default" AND Inst1INSTALLEDInst1PProductductCODE = ""]]></Custom>
  <Custom Action="SetInstance_Inst1Stage" After="SetInstance_Inst1"><![CDATA[ACTION = "INSTALL" AND INSTANCEID = "Default" AND Inst1STAGEINSTALLEDInst1PProductductCODE = ""]]></Custom>
  <Custom Action="SetInstance_Inst3" After="SetInstance_Inst1Stage"><![CDATA[ACTION = "INSTALL" AND INSTANCEID = "Default" AND Inst3INSTALLEDInst1PProductductCODE = ""]]></Custom>
  <Custom Action="SetInstance_Inst4" After="SetInstance_Inst3"><![CDATA[ACTION = "INSTALL" AND INSTANCEID = "Default" AND Inst4INSTALLEDInst1PProductductCODE = ""]]></Custom>
  <Custom Action="SetInstance_Other" After="SetInstance_Inst4"><![CDATA[ACTION = "INSTALL" AND INSTANCEID = "Default" AND OTHERINSTALLEDInst1PProductductCODE = ""]]></Custom>
  <Custom Action="SetInstance_Other2" After="SetInstance_Other"><![CDATA[ACTION = "INSTALL" AND INSTANCEID = "Default" AND OTHER2INSTALLEDInst1PProductductCODE = ""]]></Custom>
  <Custom Action="SetInstance_Other3" After="SetInstance_Other2"><![CDATA[ACTION = "INSTALL" AND INSTANCEID = "Default" AND OTHER3INSTALLEDInst1PProductductCODE = ""]]></Custom>

  <Custom Action="SetTransforms" Before="ExecuteAction"><![CDATA[ACTION = "INSTALL"]]></Custom>
  <Custom Action="SetNewInstance" Before="ExecuteAction"><![CDATA[ACTION = "INSTALL"]]></Custom>

</InstallUISequence> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T04:48:45.477

我的理解是您必须在启动 MSI 包之前设置`TRANSFORMS`和`MSINEWINSTANCE`值。MSI SDK 在主题中展示了它：[使用实例转换安装多个实例](http://msdn.microsoft.com/en-us/library/windows/desktop/aa369528%28v=vs.85%29.aspx)。您*可以*按原样通过自定义操作进行设置`MSINEWINSTANCE`，但我很确定`TRANSFORMS`必须在 Windows 安装程序打开 MSI 包之前设置该属性，因为在打开 MSI 包时应用了转换。

基本上，您需要某种引导程序或记录在案的命令行过程来正确设置这些。由于这些类型的问题，Windows Installer 中的多个实例包具有挑战性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T21:52:21.533

我会先尝试从命令行进行测试/故障排除，以消除 UI 的复杂性。

在安装实例时，您应该始终传递您的转换并始终从命令行指定 MSINEWINSTANCE=1。

```
msiexec /i App.msi TRANSFORMS=:Inst1 MSINEWINSTANCE=1
msiexec /i App.msi TRANSFORMS=:Inst1Stage MSINEWINSTANCE=1
msiexec /x App.msi TRANSFORMS=:Inst1
msiexec /x App.msi TRANSFORMS=:Inst1Stage 
```

我在想如果您可以通过命令行验证事情是否正确，那么您可以确认您的问题特定于 GUI 和与设置实例相关的 CA。

# cakephp - 带有额外字段的 CakePHP 2.x HABTM 连接表

> ID：16006533
> 
> 赞同：1
> 
> 时间：2013-04-15T01:54:14.203
> 
> 标签：cakephp, cakephp-2.0, cakephp-2.1

在一个 CakePHP 2.3.1 项目中，我在两个类之间有一个典型的 HABTM 关系，但我想在连接表中添加一个额外的字段。在 Cakephp 文档[http://book.cakephp.org/2.0/en/models/saving-your-data.html#saving-habtm](http://book.cakephp.org/2.0/en/models/saving-your-data.html#saving-habtm)中。它说这是可能的，但没有说明如何：

> 另请注意，如果您想向联接添加更多字段（创建时或元信息），这可以使用 HABTM 联接表...

（我不想使用不适合我的情况的 hasmany 解决方案，因为我需要在我的表单中具有多选的可能性）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T05:03:25.383

是的，你可以在 CakePHP 2.X 的 HABTM Relationship 中添加字段

查看以下示例 HABTM 关系：

```
var $hasAndBelongsToMany = array(
    'Category' => array(
        'className' => 'Category',
        'joinTable' => 'user_categories',
        'foreignKey' => 'user_id',
        'associationForeignKey' => 'category_id',
        'with' => 'UserCategory',
        'unique' => 'true',
        'fields' => 'User.name',
        'order' => '',
        'limit' => '',
        'offset' => '',
        'finderQuery' => '',
        'deleteQuery' => '',
        'insertQuery' => ''
    )

); 
```

在上面的“字段”选项中，您可以提及您的加入字段（如果有），它会起作用。

# xml - 如何使用 xsl 转换具有属性而不是标签的 xml 站点地图？

> ID：16006539
> 
> 赞同：5
> 
> 时间：2013-04-15T01:55:02.383
> 
> 标签：xml, xslt

我有一个简单的站点地图，其代码如下：

```
<?xml version="1.0" encoding="utf-8"?>
<urlset xmlns="http://www.sitemaps.org/schemas/sitemap/0.9">
<url>
    <loc>home page link</loc>
    <title>East Randolph Cabinet Shop</title>
    <level>level-1</level>
</url>
.
.
</urlset> 
```

我可以使用以下 xsl 轻松转换以在网页上显示我想要的方式：

```
<xsl:stylesheet
version="1.0"
xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
xmlns:sm="http://www.sitemaps.org/schemas/sitemap/0.9">

<xsl:template match="/">
<h2>Sitemap</h2>
<p>You can use our sitemap to easily navigate to any section of our website. If you still cannot find the information you need don't hesitate to <a href="contact.php">contact</a> us.</p>
<ul>
    <xsl:for-each select="sm:urlset/sm:url">
        <li class="{sm:level}">
            <a href="{sm:loc}"><xsl:value-of select="sm:title"/></a>
        </li>
    </xsl:for-each>
</ul>
</xsl:template>

</xsl:stylesheet> 
```

问题是，当我用谷歌测试我的站点地图时，它会给我所有无法识别的标签（标题和级别）的警告。我可以重写 xml 以使用每个属性而不是无法识别的标签到它看起来像这样的位置：

```
<?xml version="1.0" encoding="UTF-8"?>
<urlset xmlns="http://www.sitemaps.org/schemas/sitemap/0.9">
<url>
    <loc title='East Randolph Cabinet Shop' level='level-1'>home page link</loc>
</url>
.
.
</urlset> 
```

我已经用谷歌对此进行了测试，没有收到任何警告或错误。我的问题是如何将 xsl 重写为它在 html 中以与以前相同的方式显示的位置？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-15T02:17:01.397

**这是对提供的转换的一个小调整**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
 xmlns:sm="http://www.sitemaps.org/schemas/sitemap/0.9">

 <xsl:template match="/">
    <html>
        <h2>Sitemap</h2>
        <p>You can use our sitemap to easily navigate to any section of our website. If you still cannot find the information you need don't hesitate to <a href="contact.php">contact</a> us.</p>
        <ul>
            <xsl:for-each select="sm:urlset/sm:url/sm:loc">
                <li class="{@level}">
                    <a href="{.}"><xsl:value-of select="@title"/></a>
                </li>
            </xsl:for-each>
        </ul>
    </html>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于提供的“符合 google 的”站点地图 XML 文档时：**

```
<urlset xmlns="http://www.sitemaps.org/schemas/sitemap/0.9">
    <url>
        <loc title='East Randolph Cabinet Shop' level='level-1'>home page link</loc>
    </url>
.
.
</urlset> 
```

**产生了想要的正确结果：**

```
<html xmlns:sm="http://www.sitemaps.org/schemas/sitemap/0.9">
   <h2>Sitemap</h2>
   <p>You can use our sitemap to easily navigate to any section of our website. If you still cannot find the information you need
      don't hesitate to <a href="contact.php">contact</a> us.
   </p>
   <ul>
      <li class="level-1"><a href="home page link">East Randolph Cabinet Shop</a></li>
   </ul>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-08-04T18:27:55.990

我知道这个答案与问题间接相关，但如果你有一个非常基本的谷歌站点地图结构，那么这对我有用：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
 xmlns:sm="http://www.sitemaps.org/schemas/sitemap/0.9">

 <xsl:template match="/">
    <html>
        <h2>Sitemap</h2>
          <ul>
            <xsl:for-each select="sm:urlset/sm:url">
                <li>
                    <a href="{sm:loc}"><xsl:value-of select="sm:loc"/></a>
                </li>
            </xsl:for-each>
        </ul>
    </html>
 </xsl:template>
</xsl:stylesheet> 
```

# iphone - XCode：单个 ViewController 转到多个 ViewController

> ID：16006545
> 
> 赞同：0
> 
> 时间：2013-04-15T01:55:47.283
> 
> 标签：iphone, ios, objective-c, xcode, viewcontroller

我见过一堆主题，其中多个 ViewController 转到一个 ViewController，但不是相反。

我正在制作一个游戏，您从 Game_select.m 中选择一个游戏，它需要输出到 6 个视图控制器之一。我试过使用故事板并对其进行硬编码，但都没有为我工作。

我已经将 Game1.h 和 Game2.h 导入到 Game_select.m 中。当我运行我的代码时，它总是转到 Game1 ViewController。这是我正在尝试的代码：

```
 if(getGame1) {
    //go to game1
    Game1 *game1 = [[Game1 alloc] init];
        [self.navigationController pushViewController:game1 animated:YES];
    }

    if(getGame2) {
    //go to game2
    Game2 *game2 = [[Game2 alloc] init];
        [self.navigationController pushViewController:game2 animated:YES];
    } 
```

感谢您的帮助。干杯。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T04:19:00.500

我个人不会在这种情况下使用导航控制器。使您的所有 viewControllers 子类 (the normal) `UIViewController`，然后使用此代码来呈现您的 viewControllers 之一：

请注意，此代码仅在您以编程方式设置视图或使用 xib（不是情节提要）时才有效，那么如果您使用`initWithNibName: bundle:`而不是使用，这也将有效`init`

```
if(getGame1) {
    //go to game1
    Game1 *game1 = [[Game1 alloc] init];
    [self presentViewController:game1 animated:YES completion:nil];
}

if(getGame2) {
    //go to game2
    Game2 *game2 = [[Game2 alloc] init];
    [self presentViewController:game2 animated:YES completion:nil];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T15:33:24.050

创建从主视图控制器到其他视图控制器的手动 segues。首先，单击*要显示*的 viewController 。确保您选择了 viewController 本身，而不是其中一个视图：

![在此处输入图像描述](https://i.stack.imgur.com/tq5aG.png)

然后单击 segues 选项卡（在最右侧）并从“Manual Segue”圆圈拖动到要从中*进行 segue*的 viewController 。

![在此处输入图像描述](https://i.stack.imgur.com/nO8og.png)

然后单击 segues 并在选项卡中为它们赋予不同的名称，如下所示：

![在此处输入图像描述](https://i.stack.imgur.com/0Xbnv.png)

然后，在您的代码中，您将有这样的一行：

```
[self performSegueWithIdentifier:@"showAlternate" sender:nil]; 
```

您将使用它来显示“showAlternate”标识符的 viewController。您将拥有多个带有“Game1”和“Game2”等标识符的 segue。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T04:51:25.080

仔细检查`getGame1`and`getGame2`是`BOOL`值，而不是某种对象，如果其非零，则评估为 YES。我多次犯过这个错误：

```
NSNumber* booleanValue = @NO;
if (booleanValue) {
    // this code will run
}

if ([booleanValue boolValue]) {
    // this code will not run - as expected
} 
```

说真的，我犯过这个错误很多次了。

# java - 在java中将元素从网页添加到ArrayList

> ID：16006551
> 
> 赞同：0
> 
> 时间：2013-04-15T01:56:37.357
> 
> 标签：java, url, arraylist, webpage

我目前正在从事一个项目，该项目涉及分析来自各个机场和气象站的天气信息。我需要做的是显示来自 url 的基本天气信息（例如：[http](http://w1.weather.gov/xml/current_obs/KFHB.xml) ://w1.weather.gov/xml/current_obs/KFHB.xml ）。我需要以某种基本格式显示温度、能见度等的地方。我在想一个数组列表。

谁能告诉我该怎么做？如何将网页中的元素显示到 Java 应用程序上？我应该研究哪些类（方法或其他程序）？有没有什么好的模板呢？任何帮助，将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T02:25:39.780

您可以像阅读文件一样阅读 url 的内容，执行以下操作：

```
URL url = new URL(link);
            BufferedReader in = new BufferedReader(new InputStreamReader(url.openStream())); 
```

您还可以从该气象站捕获 RSS 提要。如果您想了解如何解析 RSS 提要的示例，请阅读本文： [http ://www.vogella.com/articles/RSSFeed/article.html](http://www.vogella.com/articles/RSSFeed/article.html)

# java - 我的 CYK 代码有问题

> ID：16006553
> 
> 赞同：3
> 
> 时间：2013-04-15T01:56:40.400
> 
> 标签：java, algorithm, parsing, cyk

我写了一些实现[CYK 算法](http://en.wikipedia.org/wiki/CYK_algorithm)的代码。我的代码有一些问题，但我不知道我做错了什么。我还[询问了 CYK 算法的伪代码](https://stackoverflow.com/questions/16006194/cannot-understand-cyk-algorithm-pseudo-code)。

你能帮我处理这段代码吗：

```
import java.util.ArrayList;

public class cyk {

    public static int findIndex(ArrayList<String[]> Grammar, String symbol) {
        for (int i = 0; i < Grammar.size(); i++) {
            String[] rule = Grammar.get(i);
            if (rule.length == 2) {
                if (symbol.equals(Grammar.get(i)[0]))
                    return i;
            }
        }
        for (int i = 0; i < Grammar.size(); i++) {
            if (symbol.equals(Grammar.get(i)[0]))
                return i;
        }
        return -1;

    }

    public static boolean cyk(String S, ArrayList<String[]> Grammar) {
        int n = S.length();
        int r = Grammar.size();

        boolean P[][][] = new boolean[n][n][r];
        initializeP(P, n, r);

        for (int i = 0; i < n; i++) {
            for (int j = 0; j < r; j++) {
                String[] rule = (String[]) Grammar.get(j);
                if (rule.length == 2) {
                    if (rule[1].equals(String.valueOf(S.charAt(i)))) {
                        P[i][0][j] = true;

                        //System.out.println(S.charAt(i));
                    }
                }
            }
        }

        for (int i = 1; i < n; i++) {
            for (int j = 0; j < n - i + 1; j++) {
                for (int k = 0; k < i - 1; k++) {
                    // for each production RA -> RB RC
                    for (int m = 0; m < r; m++) {
                        String[] rule = Grammar.get(m);
                        if (rule.length > 2) {
                            int A = findIndex(Grammar, rule[0]);
                            int B = findIndex(Grammar, rule[1]);
                            int C = findIndex(Grammar, rule[2]);
                            if (P[i][k][B] && P[j + k][i - k][C])
                                P[j][i][A] = true;
                        }
                    }
                }
            }
        }

//       for (int i = 0; i < n; i++) {
//       for (int k = 0; k < r; k++) {
//       System.out.print(P[1][i][k] + " ");
//       }
//       System.out.println();
//       }
        for (int i = 0; i < r; i++) {
            if (P[0][n-1][i])
                return true;
        }
        return false;
    }

    public static void initializeP(boolean P[][][], int n, int r) {
        for (int i = 0; i < n; i++) {
            for (int j = 0; j < n; j++) {
                for (int k = 0; k < r; k++) {
                    P[i][j][k] = false;
                }
            }
        }
    }

    public static void main(String args[]) {
        /*
         * If size of production is >2 its not unit production
         */
        String input = "aabb";
        ArrayList<String[]> Grammar = new ArrayList<String[]>();
        String[] rule = { "A", "a" };
        Grammar.add(rule);
        String[] rule1 = { "A", "A", "A" };
        Grammar.add(rule1);
        String[] rule2 = { "B", "B", "B" };
        Grammar.add(rule2);
        String[] rule5 = { "B", "b" };
        Grammar.add(rule5);
        String[] rule3 = { "S", "A", "B" };
        Grammar.add(rule3);
        System.out.println(cyk(input, Grammar));

    }
} 
```

感谢你们！

编辑：

调试代码一段时间后，我发现代码的一部分不起作用。

它是：</p>

```
for (int i = 1; i < n; i++) {
                for (int j = 0; j < n - i + 1; j++) {
                    for (int k = 0; k < i - 1; k++) {
                        // for each production RA -> RB RC
                        for (int m = 0; m < r; m++) {
                            String[] rule = Grammar.get(m);
                            if (rule.length > 2) {
                                int A = findIndex(Grammar, rule[0]);
                                int B = findIndex(Grammar, rule[1]);
                                int C = findIndex(Grammar, rule[2]);
                                if (P[i][k][B] && P[j + k][i - k][C])
                                    P[j][i][A] = true;
                            }
                        }
                    }
                }
            } 
```

我怀疑这个错误与我遇到的第一个问题有关。很可能是关于我对 AB 和 C 索引的解释方式。有人可以看看 findIndex 是否是查找索引的正确方法吗？

# knockout.js - 在编辑输入后更新其 value 属性绑定到可观察对象的输入

> ID：16006558
> 
> 赞同：0
> 
> 时间：2013-04-15T01:57:04.887
> 
> 标签：knockout.js

[这是 jsFiddle 上的一个示例。](http://jsfiddle.net/n6sHt/)

我有一些带有 Knockout 绑定的 HTML，可以将值显示`x`为 an 的值和标签`input`中的文本。`p`

```
<p data-bind="text: x"></p>
<p><input id="x" data-bind="attr: {value: x}"></p>
<button id="update">Update</button> 
```

我想要做的是在`input`按下更新按钮时取值，将其四舍五入到最接近的整数，并让它在两个地方都显示这个四舍五入的值。我试过这个：

```
var vm = {
    x: ko.observable(1)
};

ko.applyBindings(vm);

$('#update').click(function () {
    vm.x(Math.round($('#x').val()));
}); 
```

[这里又是 jsFiddle 链接。](http://jsfiddle.net/n6sHt/)

`1`当你加载它时，两个地方都会显示的初始值。如果更改`input`to中的值`2`并单击“更新”按钮，那么两个地方都会显示`2`。精彩的。这适用于任何整数。

现在尝试一些不是整数的东西。输入`5.3`并按“更新”。`p`正确更新显示，`5`但`input`仍然显示`5.3`。

[一些进一步的调查](http://jsfiddle.net/n6sHt/2/)似乎表明 Knockout 很乐意更新 ，`input`直到我手动编辑 中的值`input`，此时它停止对`input`. 我可以理解为什么在某些情况下这可能是可取的，以防止用户输入被覆盖......但这不是我想要的行为。更新视图模型时，如何让它更新两个显示的值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T04:01:13.407

如果你改变你的小提琴来使用`data-bind="value: x"`它`data-bind="attr: {value: x}"`，它将完美地工作。

# math - 归一化向量的方向

> ID：16006560
> 
> 赞同：0
> 
> 时间：2013-04-15T01:57:44.843
> 
> 标签：math

我想这更像是一个数学问题，但请多多包涵:)

我有一个向量定义如下：

```
 var direction:b2Vec2 = new b2Vec2(_target.x - this.x, _target.y - this.y);
 direction.Normalize(); 
```

我用的

```
 _body.SetLinearVelocity(new b2Vec2(direction.x*2, direction.y*2)); 
```

将身体向前推向目标。

我的问题是我如何才能找到我身体*的相对位置。*例如，从那个归一化的向量中，我如何判断目标是在右边、左边、上还是下？

我想使用归一化的方向向量来获得我的身体相对于目标的“位置”。这怎么可能？

顺便说一句，我只需要将相对位置归一化为四个基本方向。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T02:11:33.590

让我们考虑一些案例，并尝试形成一个直观的理解——

1) 相对于全局坐标，目标位于 (2, 2)，身体位于 (-1, 1)

你的方向向量是 (3, 1)。由于两个分量都是正的，所以目标是身体的右侧和上方。

1) 相对于全局坐标，目标位于 (2, -2)，身体位于 (-1, 1)

你的方向向量是 (3, -3)。由于 x 分量为正，因此目标位于身体右侧。由于 y 分量为负，因此目标位于身体下方。

如果您在 2D 轴上绘制这些点并计算方向向量，这些对您来说将变得显而易见。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T02:12:28.430

这里的矩阵变换：

```
 _target.y-this.y   _target.x-this.x
 - _target.x-this.x   _target.y-this.y 
```

会将您的向量（并按 x^2 + y^2 缩放，但这没关系）旋转到 x 轴。对身体的位置应用相同的变换，然后使用两个坐标的符号来确定它相对于原始矢量位于哪个象限。

# objective-c - 下载时 CFURL 不提供完整数据

> ID：16006568
> 
> 赞同：0
> 
> 时间：2013-04-15T01:58:29.100
> 
> 标签：objective-c, c, macos, core-foundation

我正在尝试使用 CFHTTP 编写一个小型下载器。不幸的是，我不能使用非常简单的 NSURL。我基本上想要一种异步方式来下载数据并将其存储在文件中。我还没有找到如何执行异步方式，但我有一些使用同步方式的代码，但效果不佳。问题是下载器没有下载完整的字节。我看到一些数据丢失导致最终文件损坏。这是我到目前为止的代码。

```
#include <stdio.h>
#include <string.h>
#include <CoreFoundation/CoreFoundation.h>
#include <CFNetwork/CFNetwork.h>
#include <CFNetwork/CFHTTPStream.h>

int main(int argc, const char * argv[])
{

    // insert code here...
    const char *data;
    FILE *fp;
    CFShow(CFSTR("Hello, World!\n"));

    CFURLRef cfUrl = CFURLCreateWithString(kCFAllocatorDefault, CFSTR("http://the.earth.li/~sgtatham/putty/0.62/x86/putty.zip"), NULL);
    CFHTTPMessageRef cfHttpReq = CFHTTPMessageCreateRequest(kCFAllocatorDefault, CFSTR("GET"), cfUrl, kCFHTTPVersion1_1);

    CFReadStreamRef readStream = CFReadStreamCreateForHTTPRequest(kCFAllocatorDefault, cfHttpReq);
    CFReadStreamOpen(readStream);

    CFHTTPMessageRef cfHttpResp = CFHTTPMessageCreateEmpty(kCFAllocatorDefault, TRUE);
    CFIndex numBytesRead;

    do {
        const int nBuffSize = 1024;
        UInt8 buff[nBuffSize];
        numBytesRead = CFReadStreamRead(readStream, buff, nBuffSize);
        if( numBytesRead > 0 )
        {
            CFHTTPMessageAppendBytes(cfHttpResp, buff, numBytesRead);
        }
        else if( numBytesRead < 0 )
        {
            CFStreamError error = CFReadStreamGetError(readStream);
            printf ("Error %d", error.error);
        }
    } while ( numBytesRead > 0 );
    CFStringRef myStatusLine = CFHTTPMessageCopyResponseStatusLine(cfHttpReq);
    CFReadStreamClose(readStream);
    CFDataRef cfResp = CFHTTPMessageCopyBody(cfHttpResp);
    CFIndex length = CFDataGetLength(cfResp);
    printf ("%lu\n", length);
    CFShow(myStatusLine);
    data = (const char*)CFDataGetBytePtr(cfResp);
    fp = fopen("/var/tmp/Update.zip", "w");
    if (fp == NULL) {
        printf("ACnnot be opened\n");
    } else {
        fwrite(data, length, 1, fp);
        fclose(fp);
    }
    printf ("Download done\n");
    CFRelease(cfUrl);
    CFRelease(cfHttpReq);
    CFRelease(readStream);
    CFRelease(cfHttpResp);
    CFRelease(cfResp);

    return 0;
} 
```

我得到的长度小于我实际下载的文件。我不明白这段代码有什么问题。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T23:02:40.307

我仍然不知道这段代码出了什么问题。但我通过更换解决了我的问题

//CFHTTPMessageRef cfHttpResp = CFHTTPMessageCreateEmpty(kCFAllocatorDefault, TRUE); CFMutableDataRef cfResp = CFDataCreateMutable(kCFAllocatorDefault, 0); 我现在使用 MutableDataRef 而不是 CFHTTPMessageRef。我将在这里更新新代码。

```
int main(int argc, const char * argv[])
{

    // insert code here...
    const char *data;
    FILE *fp;
    CFShow(CFSTR("Hello, World!\n"));

    CFURLRef cfUrl = CFURLCreateWithString(kCFAllocatorDefault, CFSTR("http://the.earth.li/~sgtatham/putty/0.62/x86/putty.zip"), NULL);
    CFHTTPMessageRef cfHttpReq = CFHTTPMessageCreateRequest(kCFAllocatorDefault, CFSTR("GET"), cfUrl, kCFHTTPVersion1_1);

    CFReadStreamRef readStream = CFReadStreamCreateForHTTPRequest(kCFAllocatorDefault, cfHttpReq);
    CFReadStreamOpen(readStream);

    //CFHTTPMessageRef cfHttpResp = CFHTTPMessageCreateEmpty(kCFAllocatorDefault, TRUE);
    CFMutableDataRef cfResp = CFDataCreateMutable(kCFAllocatorDefault, 0);
    CFIndex numBytesRead;

    do {
        const int nBuffSize = 1024;
        UInt8 buff[nBuffSize];
        numBytesRead = CFReadStreamRead(readStream, buff, nBuffSize);
        if( numBytesRead > 0 )
        {
            CFDataAppendBytes(cfResp, buff, numBytesRead);
            //CFHTTPMessageAppendBytes(cfHttpResp, buff, numBytesRead);
        }
        else if( numBytesRead < 0 )
        {
            CFStreamError error = CFReadStreamGetError(readStream);
            printf ("Error %d", error.error);
        }
    } while ( numBytesRead > 0 );

    CFReadStreamClose(readStream);
    //CFDataRef cfResp = CFHTTPMessageCopyBody(cfHttpResp);
    CFIndex length = CFDataGetLength(cfResp);
    printf ("%lu\n", length);

    data = (const char*)CFDataGetBytePtr(cfResp);
    fp = fopen("/var/tmp/Update.zip", "w");
    if (fp == NULL) {
        printf("ACnnot be opened\n");
    } else {
        fwrite(data, length, 1, fp);
        fclose(fp);
    }
    printf ("Download done\n");
    CFRelease(cfUrl);
    CFRelease(cfHttpReq);
    CFRelease(readStream);
    CFRelease(cfResp);

    return 0;
} 
```

希望这可以帮助。如果有人可以指出原始代码出了什么问题，它仍然很有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-17T01:17:24.557

我知道这很晚，但是您的代码确实帮助了我（很难找到直接、完整的使用 CFNetworking API 获取响应正文字节的示例）。

无论如何，我认为错误是最后一个参数应该是 FALSE（响应消息），而不是 CFHTTPMessageCreateEmpty 行中的 TRUE（请求消息）。

```
CFHTTPMessageRef cfHttpResp = CFHTTPMessageCreateEmpty(kCFAllocatorDefault, FALSE); 
```

# java - 在 Java JFrame 中查看“.xml”或“.dot”文件类型的模型

> ID：16006570
> 
> 赞同：0
> 
> 时间：2013-04-15T01:58:42.037
> 
> 标签：java, xml, swing, graphviz

我想知道如何生成一个 JFrame，它可以直观地显示以“.xml”或“.dot”格式格式化的模型。

我知道 Graphviz 通常使用 .dot 格式来查看创建的图形，但是有没有办法在 Java 中使用 Graphviz 来查看 JFrame 中的模型

到目前为止，我可以创建 .xml 和 .dot 格式的模型并使用 Graphviz 软件查看它们。

我关心的只是在 Java 程序中直观地生成 .xml 和 .dot 文件，最好是在 JFrame 中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T05:03:13.723

如果您愿意尝试新库，请查看[http://jgraphviz.sourceforge.net/](http://jgraphviz.sourceforge.net/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T05:08:18.247

对于一些大学项目，我曾经有工作代码将点文件呈现给 graphviz。关键成分是匹配所使用的字体并解析 dot 的文本输出以生成基于此的 Java 绘图指令。因此，对于 dot 的完全布局输出，这已经足够好了。

对于 XML，您必须更具体地说明您想到的 XML 类型以及您期望的呈现类型。一个简单的文档树应该相当容易。

# python - 在 matplotlib 中绘制不同的颜色

> ID：16006572
> 
> 赞同：68
> 
> 时间：2013-04-15T01:58:44.977
> 
> 标签：python, matplotlib

假设我有一个 for 循环，我想用不同的颜色绘制点：

```
for i in range(5):
 plt.plot(x,y,col=i) 
```

如何在 for 循环中自动更改颜色？

* * *

## 回答 #1

> 赞同：117
> 
> 时间：2013-04-15T02:45:38.017

@tcaswell 已经回答了，但我正在输入我的答案，所以我会继续发布它......

有许多不同的方法可以做到这一点。首先，`matplotlib`将自动循环显示颜色。默认情况下，它会在蓝色、绿色、红色、青色、洋红色、黄色、黑色之间循环：

```
import matplotlib.pyplot as plt
import numpy as np

x = np.linspace(0, 1, 10)
for i in range(1, 6):
    plt.plot(x, i * x + i, label='$y = {i}x + {i}$'.format(i=i))
plt.legend(loc='best')
plt.show() 
```

![在此处输入图像描述](https://i.stack.imgur.com/KO1kx.png)

如果要控制 matplotlib 循环使用的颜色，请使用`ax.set_color_cycle`：

```
import matplotlib.pyplot as plt
import numpy as np

x = np.linspace(0, 1, 10)
fig, ax = plt.subplots()
ax.set_color_cycle(['red', 'black', 'yellow'])
for i in range(1, 6):
    plt.plot(x, i * x + i, label='$y = {i}x + {i}$'.format(i=i))
plt.legend(loc='best')
plt.show() 
```

![在此处输入图像描述](https://i.stack.imgur.com/yi93O.png)

如果您想明确指定将使用的颜色，只需将其传递给`color`kwarg（接受 html 颜色名称，rgb 元组和十六进制字符串也是如此）：

```
import matplotlib.pyplot as plt
import numpy as np

x = np.linspace(0, 1, 10)
for i, color in enumerate(['red', 'black', 'blue', 'brown', 'green'], start=1):
    plt.plot(x, i * x + i, color=color, label='$y = {i}x + {i}$'.format(i=i))
plt.legend(loc='best')
plt.show() 
```

![在此处输入图像描述](https://i.stack.imgur.com/jzQUP.png)

最后，如果您想从[现有颜色](https://matplotlib.org/examples/color/colormaps_reference.html)图中自动选择指定数量的颜色：

```
import matplotlib.pyplot as plt
import numpy as np

x = np.linspace(0, 1, 10)
number = 5
cmap = plt.get_cmap('gnuplot')
colors = [cmap(i) for i in np.linspace(0, 1, number)]

for i, color in enumerate(colors, start=1):
    plt.plot(x, i * x + i, color=color, label='$y = {i}x + {i}$'.format(i=i))
plt.legend(loc='best')
plt.show() 
```

![在此处输入图像描述](https://i.stack.imgur.com/GPFpt.png)

* * *

## 回答 #2

> 赞同：58
> 
> 时间：2017-08-28T09:54:38.160

[Joe Kington](https://stackoverflow.com/users/325565/joe-kington)的[出色回答](https://stackoverflow.com/a/16006929/2749397)已经有 4 年历史了，Matplotlib 已经发生了增量变化（特别是`cycler`模块的引入），新的主要版本 Matplotlib 2.0.x 引入了从以下角度来看很重要的风格差异默认使用的颜色。

### 个别线条的颜色

单条线的颜色（以及不同绘图元素的颜色，例如散点图中的标记）由`color` 关键字参数控制，

```
plt.plot(x, y, color=my_color) 
```

`my_color`或者是

*   表示 RGB 或 RGBA 的浮点元组（如[）](https://matplotlib.org/api/colors_api.html)`(0.,0.5,0.5)`，
*   一个[RGB/RGBA 十六进制字符串](https://matplotlib.org/api/colors_api.html)（如`"#008080"`(RGB) 或`"#008080A0"`），
*   [0, 1] 中浮点值的字符串表示，包括灰度级（例如，'0.6'），
*   一个[简短的颜色名称](https://matplotlib.org/api/colors_api.html)（ `"k"`对于黑色，可能的值在 中`"bgrcmykw"`），
*   一个[长的颜色名称](https://www.w3.org/TR/css3-color/#svg-color)（as `"teal"`）---又名*HTML 颜色名称*（在[文档](https://matplotlib.org/api/colors_api.html)中也是*X11/CSS4 颜色名称*），
*   [来自 xkcd 颜色调查](https://xkcd.com/color/rgb/)的名称，[前缀为`'xkcd:'`](https://matplotlib.org/api/colors_api.html)（例如，`'xkcd:barbie pink'`），
*   [默认](https://github.com/vega/vega/wiki/Scales#scale-range-literals)[分类调色板](https://github.com/vega/vega/wiki/Scales#scale-range-literals)[中 Tableau 颜色](https://matplotlib.org/api/colors_api.html)中的一种颜色，（例如，、）、[`'T10'`](https://github.com/vega/vega/wiki/Scales#scale-range-literals)`'tab:blue'``'tab:olive'`
*   对*当前颜色循环*的颜色的[引用](https://matplotlib.org/api/colors_api.html)（如，即 中的字母后跟单个数字）。*`"C3"``"C"``"0-9"`*

 *### 颜色*循环*

默认情况下，不同的线使用不同的颜色绘制，这些颜色默认定义并以循环方式使用（因此名称为 *颜色循环*）。

颜色循环是`axes`对象的一个​​属性，在旧版本中只是一系列有效的颜色名称（默认情况下是一个字符颜色名称的字符串，`"bgrcmyk"`），您可以将其设置为

```
my_ax.set_color_cycle(['kbkykrkg']) 
```

（如[评论中所述，](https://stackoverflow.com/questions/16006572/plotting-different-colors-in-matplotlib#comment74786762_16006929)此 API 已被弃用，稍后会详细介绍）。

在 Matplotlib 2.0 中，默认的颜色循环是`["#1f77b4", "#ff7f0e", "#2ca02c", "#d62728", "#9467bd", "#8c564b", "#e377c2", "#7f7f7f", "#bcbd22", "#17becf"]`Vega [category10 调色板](https://github.com/vega/vega/wiki/Scales#scale-range-literals)。

[![在此处输入图像描述](https://i.stack.imgur.com/tSS9n.png)](https://i.stack.imgur.com/tSS9n.png)

[（图片是来自[https://vega.github.io/vega/docs/schemes/](https://vega.github.io/vega/docs/schemes/)的截图）]

### *循环*器模块：可组合循环

以下代码显示颜色循环概念已被弃用

```
In [1]: from matplotlib import rc_params

In [2]: rc_params()['axes.color_cycle']
/home/boffi/lib/miniconda3/lib/python3.6/site-packages/matplotlib/__init__.py:938: UserWarning: axes.color_cycle is deprecated and replaced with axes.prop_cycle; please use the latter.
  warnings.warn(self.msg_depr % (key, alt_key))
Out[2]: 
['#1f77b4', '#ff7f0e', '#2ca02c', '#d62728', '#9467bd',
 '#8c564b', '#e377c2', '#7f7f7f', '#bcbd22', '#17becf'] 
```

现在相关的属性是`'axes.prop_cycle'`

```
In [3]: rc_params()['axes.prop_cycle']
Out[3]: cycler('color', ['#1f77b4', '#ff7f0e', '#2ca02c', '#d62728', '#9467bd', '#8c564b', '#e377c2', '#7f7f7f', '#bcbd22', '#17becf']) 
```

以前，`color_cycle`是有效颜色面额的通用序列，现在默认情况下，它是`cycler`包含标签 ( `'color'`) 和有效颜色面额序列的对象。与前一个界面相比，前进的一步是不仅可以循环线条的颜色，还可以循环其他线条属性，例如，

```
In [5]: from cycler import cycler

In [6]: new_prop_cycle = cycler('color', ['k', 'r']) * cycler('linewidth', [1., 1.5, 2.])

In [7]: for kwargs in new_prop_cycle: print(kwargs)
{'color': 'k', 'linewidth': 1.0}
{'color': 'k', 'linewidth': 1.5}
{'color': 'k', 'linewidth': 2.0}
{'color': 'r', 'linewidth': 1.0}
{'color': 'r', 'linewidth': 1.5}
{'color': 'r', 'linewidth': 2.0} 
```

正如您所看到的，`cycler`对象是*可组合*的，当您迭代组合时，您`cycler`在每次迭代中得到的都是一个关键字参数字典`plt.plot`。

`axes`您可以在每个对象的比率上使用新的默认值，

```
my_ax.set_prop_cycle(new_prop_cycle) 
```

或者您可以临时安装新的默认值

```
plt.rc('axes', prop_cycle=new_prop_cycle) 
```

或完全更改默认编辑`.matplotlibrc`文件。

最后一种可能性，使用上下文管理器

```
with plt.rc_context({'axes.prop_cycle': new_prop_cycle}):
    ... 
```

在一组不同的图中使用新`cycler`的，在上下文结束时恢复为默认值。

函数的文档字符串`cycler()`很有用，但关于`cycler`模块和`cycler()`函数的（不是那么多）血腥细节以及示例，可以[在精美的文档](https://matplotlib.org/cycler/)中找到。

* * *

## 回答 #3

> 赞同：30
> 
> 时间：2013-04-15T02:30:14.810

```
for color in ['r', 'b', 'g', 'k', 'm']:
    plot(x, y, color=color) 
```*

# delphi - 如何在 Delphi 7 中创建一个包含两列（隐藏一列）的组合框？

> ID：16006577
> 
> 赞同：7
> 
> 时间：2013-04-15T01:59:37.117
> 
> 标签：delphi, combobox, delphi-7

如何创建一个包含两列的*TComboBox*，其中一列隐藏，以便它可以保留一个 id 值以及其中的实际项目？然后如何以编程方式获得该 id 值？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-21T07:01:03.243

这里不需要两列。

您可以利用这样一个事实，即`TComboBox.Items`（与 Delphi 中的许多其他东西一样，如`TStringList`、`TMemo.Lines`和`TListBox.Items`）都来自`TStrings`，它同时具有`Strings`和`Objects`属性。`Objects`存储任何大小的 a `TObject`，它是一个指针。

这意味着您可以通过在添加整数时简单地将其类型转换为*TObject*并在检索时将其类型转换回*Integer来存储整数值。*

像这样的东西应该工作：

```
procedure TForm1.FormCreate(Snder: TObject);
var
  i: Integer;
  sItem: String;
begin
  for i := 0 to 9 do
  begin
    sItem := Format('Item %d', [i]);
    ComboBox1.Items.AddObject(sItem, TObject(i));
  end;
end; 
```

要检索值：

```
procedure TForm1.ComboBox1Click(Sender: TObject);
var
  Idx: Integer;
  Value: Integer;
begin
  Idx := ComboBox1.ItemIndex;
  if Idx <> -1 then
  begin
    Value := Integer(ComboBox1.Items.Objects[Idx]);
    // Do something with value you retrieved
  end;
end; 
```

请注意，由于*Objects*属性实际上是用来存储*对象*的，因此这为您提供了很大的灵活性。这是一个将客户的联系信息存储在关联对象实例中并在选择列表框中的项目时将其显示在标签中的示例（故意非常简单）。

```
unit Unit1;

interface

uses
  Windows, Messages, Variants, Classes, Graphics, Controls, 
  Forms, Dialogs, StdCtrls;

type
  TCustomer=class
  private
    FContact: string;
    FPhone: string;
  public
    constructor CreateCustomer(const AContact, APhone: string);
    property Contact: string read FContact write FContact;
    property Phone: string read FPhone write FPhone;
  end;

  TForm1 = class(TForm)
    ListBox1: TListBox;
    Label1: TLabel;
    Label2: TLabel;
    Label3: TLabel;
    lblContact: TLabel;
    lblPhone: TLabel;
    procedure FormCreate(Sender: TObject);
    procedure FormClose(Sender: TObject; var Action: TCloseAction);
    procedure ListBox1Click(Sender: TObject);
  private
    { Private declarations }
  public
    { Public declarations }
  end;

var
  Form1: TForm1;

implementation

{$R *.dfm}

{ TCustomer }

constructor TCustomer.CreateCustomer(const AContact, APhone: string);
begin
  inherited Create;
  FContact := AContact;
  FPhone := APhone;
end;

procedure TForm1.FormClose(Sender: TObject; var Action: TCloseAction);
var
  i: Integer;
begin
  for i := 0 to ListBox1.Items.Count - 1 do
    ListBox1.Items.Objects[i].Free;
end;

procedure TForm1.FormCreate(Sender: TObject);
begin
  lblContact.Caption := '';
  lblPhone.Caption := '';

  // Create some customers. Of course in the real world you'd load this
  // from some persistent source instead of hard-coding them here.
  ListBox1.Items.AddObject('N Company', TCustomer.CreateCustomer('Nancy', '555-3333'));
  ListBox1.Items.AddObject('B Company', TCustomer.CreateCustomer('Brad', '555-1212'));
  ListBox1.Items.AddObject('A Company', TCustomer.CreateCustomer('Angie', '555-2345'));
end;

procedure TForm1.ListBox1Click(Sender: TObject);
var
  Cust: TCustomer;
begin
  if ListBox1.ItemIndex <> -1 then
  begin
    Cust := TCustomer(ListBox1.Items.Objects[ListBox1.ItemIndex]);
    lblContact.Caption := Cust.Contact;
    lblPhone.Caption := Cust.Phone;
  end;
end;

end. 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-04-15T08:02:34.457

ComboBox 控件不支持列，并且无论如何您都不需要隐藏列来完成您需要的操作。

`TComboBox.Items`财产是`TStrings`后代。它可以同时保存字符串值和关联的用户定义数据值，但用户只能在 UI 中看到字符串值。使用`Items.AddObject()`方法将字符串+ID 值添加到列表中，然后`Items.Objects[]`在需要时使用属性检索 ID 值。

或者，您可以将 ID 值存储在与 ComboBox 具有相同元素数量的单独数组中，然后使用 ComboBox 项索引来访问数组值。如果您需要存储 -1 的值，这一点尤其重要，因为正如 Rob 所说，由于 getter 方法的实现方式，该特定值无法从`Objects[]`a 的属性中检索到。`TComboBox`

# c++ - 运算符重载问题

> ID：16006580
> 
> 赞同：0
> 
> 时间：2013-04-15T01:59:55.857
> 
> 标签：c++, visual-studio-2012

在 person.h 中，在名为 person 的类的公共部分下，我有这个：

```
bool operator < (person& currentPerson); 
```

在 person.cpp 我有这个：

```
bool person::operator < (person& currentPerson)
{
   return age < currentPerson.age;
} 
```

当我编译它时，我得到一个链接器错误，但前提是我实际使用了运算符。有人可以告诉我我做错了什么吗？

这是错误消息。

```
1>FunctionTemplates.obj : error LNK2019: unresolved external symbol "public: bool __thiscall person::operator<(class person const &)" (??Mperson@@QAE_NABV0@@Z) referenced in function "class person __cdecl max(class person &,class person &)" (?max@@YA?AVperson@@AAV1@0@Z)
1>c:\users\kenneth\documents\visual studio 2012\Projects\FunctionTemplates\Debug\FunctionTemplates.exe : fatal error LNK1120: 1 unresolved externals 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T02:03:08.463

在您的代码中的某处，使用 function 时`max`，您正在将一个人与一个临时人进行比较。为此，您需要使用 const 参考。

```
bool operator < (const person& currentPerson)  const;
                 ^^^^                          ^^^^^^ //This wont hurt too 
```

和

```
bool person::operator < (const person& currentPerson)
//                       ^^^^^
{
   return age < currentPerson.age;
} 
```

# c++ - 在类中广泛使用函数类型定义是一种糟糕的编程习惯吗？

> ID：16006581
> 
> 赞同：0
> 
> 时间：2013-04-15T02:00:40.900
> 
> 标签：c++, function, typedef

这个一般概念会被认为是“坏的”吗？使用函数 typedef 来预先计算哪个函数更好地优化以处理存储的数据的概念？还是我应该坚持使用 if 和 switch 语句来防止其他程序员畏缩？除了对这个组合示例中的名称感到畏缩之外：

```
#ifndef __PROJECT_CIMAGE_H_
#define __PROJECT_CIMAGE_H_

#define FORMAT_RGB 0
#define FORMAT_BGR 1

typedef unsigned char ImageFormat;

class CImage
{
    protected:
        // image data
        Components* data;
        ImageFormat format;

        // typedef the functions
        typedef void(*lpfnDeleteRedComponentProc)();
        typedef void(*lpfnDeleteGreenComponentProc)();
        typedef void(*lpfnDeleteBlueComponentProc)();

        // specify the different functions for each supported format
        void DeleteRedComponentRGB();
        void DeleteGreenComponentRGB();
        void DeleteBlueComponentRGB();

        void DeleteRedComponentBGR();
        void DeleteGreenComponentBGR();
        void DeleteBlueComponentBGR();

        // Add in references to which functions to use.
        lpfnDeleteRedComponentProc   DRC;
        lpfnDeleteGreenComponentProc DGC;
        lpfnDeleteBlueComponentProc  DBC;
    public:
        Image();  // Allocate some basic data
        ~Image(); // Deallocate stored data

        // change the image format
        void SetImageFormat(ImageFormat format)
        {
            // shift through the data and adjust it as neccissary.

            switch (format)
            {
                case FORMAT_RGB:
                    // use functions specially suited for the RGB format
                    DRC = DeleteRedComponentRGB;
                    DGC = DeleteGreenComponentRGB;
                    DBC = DeleteBlueComponentRGB;
                    break;
                case FORMAT_BGR:
                    // use functions specially suited for the BGR format
                    DRC = DeleteRedComponentBGR;
                    DGC = DeleteGreenComponentBGR;
                    DBC = DeleteBlueComponentBGR;
                    break;
            }
        }

        // Set's the specifyed component to 0 throughout the entire image
        void DeleteRedComponent()   { DRC(); }
        void DeleteGreenComponent() { DGC(); }
        void DeleteBlueComponent()  { DBC(); }

        // more, similarly pourposed, functions here...
};

#endif // __PROJECT_CIMAGE_H_ 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-15T02:40:57.350

上面的代码有很多问题。

你`#define`没用，`typedef`你应该有一个`enum`

```
enum class ImageFormat:unsigned char { // unsigned char optional
  FORMAT_RGB, // =0 optional
  FORMAT_BGR // =1 optional
}; 
```

其次，你有一个`virtual`行为集群，你想在一个集群中交换出来。这怎么不对你尖叫接口类？

```
struct ChannelSpecific {
  virtual void DeleteGreen( CImage* ) = 0;
  virtual void DeleteBlue( CImage* ) = 0;
  virtual void DeleteRed( CImage* ) = 0;
  // etc
};
template< ImageFormat format >
struct ChannelSpecificImpl;
template<>
struct ChannelSpecificImpl<FORMAT_RGB>:ChannelSpecific {
  void DeleteGreen( CImage* ) final { /* etc...*/ }
  // etc...
};
template<>
struct ChannelSpecificImpl<FORMAT_BGR>:ChannelSpecific {
  // etc...
}; 
```

调用上述`virtual`函数的开销略高于函数指针（由于 vtable 不太可能在缓存中），但如果您连续执行一大堆操作，您可以找到格式和显式地强制转换工作程序并调用`final`没有函数指针或虚拟表开销的方法（直到并包括允许内联方法）。

作为第二个优势，您想要在通道上执行的一大堆操作最终会非常统一，而只是每个通道的偏移量是多少。所以我可以通过简单地这样做来消除上述两个专业：

```
enum class Channel { Red, Green, Blue };

template<ImageFormat, Channel> struct channel_traits;
template<> struct channel_traits<FORMAT_RGB, Red>:std::integral_constant< size_t, 0 > {};
template<> struct channel_traits<FORMAT_RGB, Green>:std::integral_constant< size_t, 1 > {};
template<> struct channel_traits<FORMAT_RGB, Blue>:std::integral_constant< size_t, 2 > {};
template<> struct channel_traits<FORMAT_BGR, Red>:std::integral_constant< size_t, 2 > {};
template<> struct channel_traits<FORMAT_BGR, Green>:std::integral_constant< size_t, 1 > {};
template<> struct channel_traits<FORMAT_BGR, Blue>:std::integral_constant< size_t, 0 > {}; 
```

现在我可以编写我的`ChannelSpecificImpl<ImageFormat>`没有专业化的东西——我只需要访问上面的特征类，我可以编写一次代码，并多次使用它。

在里面`CImage`我存储了一个`ChannelSpecific`指针，它不保存数据，只保存算法。当我换出图像格式时，`ChannelSpecific`指针被换出。`ChannelSpecific`如果我发现由于 vtable 开销过多而导致我的使用方式出现瓶颈，我将进行重构并在其中放入一个宏功能。

如果我讨厌我一直在传递的事实，`CImage`我可以给内部`ChannelSpecific`指针的状态`CImage`，现在代码可以`this->cimage`用来访问`CImage`.

另一方面，像你上面写的那样的代码有它的位置。我认为它比大量`case` `switch`声明更好。

请注意，上面的一些代码是 C++11 特定的（`enum class`带有`enum`存储说明符的`final`），但如果您放弃这些功能，该解决方案仍然可行。

另请注意，您的`switch`陈述最终看起来像：

```
switch (format) {
  case FORMAT_RGB:
    channelSpecific.reset(new ChannelSpecificImpl<FORMAT_RGB>());
  case FORMAT_BGR:
    channelSpecific.reset(new ChannelSpecificImpl<FORMAT_BGR>()); 
```

维护起来要少得多，也不太可能包含错误。如果您讨厌免费商店（更具体地说，发现格式更改很常见，以至于`::new`调用对性能造成影响），请`boost::variant`为`union`每个可能的`ChannelSpecificImpl`. ( `std::unique_ptr<ChannelSpecific> channelSpecific`, 或`std::shared_ptr`, 取决于各种情况——`unique_ptr`默认使用。)

最后，如果您厌倦了维护该`switch`语句（正如我倾向于维护的那样），`if`通过模板元编程制作一个基于级联的魔术开关并不难——甚至是一个函数指针工厂数组，它们生成一个`ChannelSpecific*`和一个显式数组查找打电话给其中一个。（遗憾的是，没有产生实际 switch 语句的可变模板扩展，但编译器可能会将链式顺序 if 优化为相同的结构）。

如果您从上述代码中一无所获，重要的部分是您不想手写每个零函数。您不想重复自己，只需编写一次，将格式之间的差异分解为特征类，并让格式和通道上的模板函数生成完成工作并编写一次的函数。如果您不这样做，您将不得不通过宏生成代码并产生不可调试的混乱，通过其他方法生成代码（并且无法调试生成器，只能调试生成的代码），或者您将只有在对您的 QA 将错过的某些特定频道执行某些特定操作时才会出现一些极端情况错误。也许不是今天，也许不是明天，

我正在攻击一个旧的每通道成像库，该库是在这个“虚拟 C 风格的函数指针交换”中完成的，几乎完全按照你的提议，并且我接触的每个函数都使用上述技术重写。我通过大量减少代码量，提高可靠性，有时甚至提高性能。为什么？因为我能够检查常见的假设——pixelstride 等于像素打包，pixelstride in source 和 dest 相等——并为这种情况生成一个较少分支的版本，并为极端情况回退到更多分支，然后应用一下子就实现了无数不同的像素迭代代码。在现有的微优化之上使用这种微优化来维护 N 个不同的像素迭代代码将是昂贵的：

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T02:36:00.043

Typedef 是使代码更具可读性的好方法。如果您对 typedef 有疑问，则意味着它对代码的可读性没有帮助。只需更改 typedef 名称即可解决问题，但您需要在现有代码库中的任何地方更改它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T02:47:04.507

@Yakk 关于使用虚拟而不是函数指针的评论很划算；以及更好的解决方案也提供。

鉴于对此处设计的保留，值得注意的是：

```
 // typedef the functions
  typedef void(*lpfnDeleteRedComponentProc)();
  typedef void(*lpfnDeleteGreenComponentProc)();
  typedef void(*lpfnDeleteBlueComponentProc)(); 
```

为每个组件创建不同的新类型名称，即使它们具有相同的签名。如果我沿着这条路走，我将有一个单一的类型名称，它可以明确预期的常见行为。

# javascript - 在 javascript 中捕获 ctrl+z 组合键

> ID：16006583
> 
> 赞同：107
> 
> 时间：2013-04-15T02:00:57.810
> 
> 标签：javascript, combinations, ctrl

我正在尝试使用以下代码在 javascript中捕获`ctrl`+组合键：`z`

```
<html>
<head>
    <title>Untitled Document</title>
</head>
<body>

    <script type='text/javascript'>
        function KeyPress(e) {
            var evtobj = window.event? event : e

            //test1 if (evtobj.ctrlKey) alert("Ctrl");
            //test2 if (evtobj.keyCode == 122) alert("z");
            //test 1 & 2
            if (evtobj.keyCode == 122 && evtobj.ctrlKey) alert("Ctrl+z");
        }

        document.onkeypress = KeyPress;
    </script>

</body>
</html> 
```

如果我按住`ctrl`键并按任何其他键，注释行“test1”会生成警报。

如果我按下键，注释行“test2”会生成警报`z`。

按照“test 1 & 2”之后的行将它们放在一起，按住`ctrl`键然后按下`z`键不会按预期生成警报。

代码有什么问题？

* * *

## 回答 #1

> 赞同：115
> 
> 时间：2013-04-15T02:04:22.843

1.  使用`onkeydown`（或`onkeyup`），而不是`onkeypress`
2.  使用`keyCode`90，而不是 122

在线演示：http: [//jsfiddle.net/29sVC/](http://jsfiddle.net/29sVC/)

澄清一下，**键码与字符码不同。**

字符代码用于文本（它们因编码而异，但在很多情况下，0-127 仍然是 ASCII 代码）。键码映射到键盘上的键。例如，在 unicode 字符中 0x22909 表示好。没有多少键盘（如果有的话）实际上有这个键。

操作系统负责使用用户配置的输入法将击键转换为字符代码。结果被发送到按键事件。（而 keydown 和 keyup 响应用户按下按钮，而不是输入文本。）

* * *

## 回答 #2

> 赞同：83
> 
> 时间：2019-05-23T00:11:17.807

对于偶然发现这个问题的未来人，这是完成工作的更好方法：

```
document.addEventListener('keydown', function(event) {
  if (event.ctrlKey && event.key === 'z') {
    alert('Undo!');
  }
}); 
```

使用[`event.key`](https://developer.mozilla.org/en-US/docs/Web/API/KeyboardEvent/key)大大简化了代码，删除了硬编码的常量。它支持 IE 9+。

此外，使用[`document.addEventListener`](https://developer.mozilla.org/en-US/docs/Web/API/EventTarget/addEventListener)意味着您不会将其他侦听器破坏到同一事件。

最后，没有理由使用[`window.event`](https://developer.mozilla.org/en-US/docs/Web/API/Window/event). 它被积极劝阻，并可能导致脆弱的代码。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-07-28T16:11:23.520

`Ctrl`+`t`也是可能的...只需使用 84 之类的键码

```
if (evtobj.ctrlKey && evtobj.keyCode == 84) 
 alert("Ctrl+t"); 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2015-11-09T12:40:23.120

```
$(document).keydown(function(e){
  if( e.which === 89 && e.ctrlKey ){
     alert('control + y'); 
  }
  else if( e.which === 90 && e.ctrlKey ){
     alert('control + z'); 
  }          
}); 
```

[演示](http://jsfiddle.net/ba54W/258/)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2014-08-01T12:48:55.697

90 是`Z`关键，这将进行必要的捕获...

```
function KeyPress(e){
     // Ensure event is not null
     e = e || window.event;

     if ((e.which == 90 || e.keyCode == 90) && e.ctrlKey) {
         // Ctrl + Z
         // Do Something
     }
} 
```

根据您的要求，您可能希望`e.preventDefault();`在 if 语句中添加一个专门执行您的自定义功能的语句。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2020-12-04T22:41:24.663

```
document.onkeydown = function (e) {
    var special = e.ctrlKey || e.shiftKey;
    var key = e.charCode || e.keyCode;
  console.log(key.length);
  if (special && key == 38 || special && key == 40 ) { 
    // enter key do nothing
    e.preventDefault();
  }        
} 
```

这是一种阻止两个键的方法，无论是 shift+ 还是 Ctrl+ 组合键。

&& 有助于组合键，没有组合，它会阻止所有 ctrl 或 shift 键。

* * *

## 回答 #7

> 赞同：-4
> 
> 时间：2017-07-06T14:36:24.927

我制作的这个插件可能会有所帮助。

[插入](https://codepen.io/dhruvsinghal/pen/ZyjMJQ?editors=0011)

您可以使用此插件，您必须提供要像这样运行的关键代码和功能

```
simulatorControl([17,90], function(){console.log('You have pressed Ctrl+Z');}); 
```

在代码中，我展示了如何执行 for `Ctrl`+ `Z`。您将在链接上获得详细文档。插件位于 Codepen 上我的笔的 JavaScript 代码部分。

* * *

## 回答 #8

> 赞同：-4
> 
> 时间：2017-09-28T20:20:13.157

将此代码用于`CTRL`+ `Z`。in keypress 的键码`Z`是 122，`CTRL`+`Z`是 26。在控制台区域检查此键码

```
 $(document).on("keypress", function(e) {
       console.log(e.keyCode);
       /*ctrl+z*/
       if(e.keyCode==26)
       {
          //your code here
       }
    }); 
```

# azure - VS 发布到 azure 使用调试而不是发布

> ID：16006585
> 
> 赞同：0
> 
> 时间：2013-04-15T02:01:15.590
> 
> 标签：azure, build

只是我，还是带有最新更新的 Visual Studio 2012，在发布时打包当前环境版本，而不是发布设置中指定的版本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T23:36:55.123

更新：要强制它以发布模式构建，我必须根据这个 SO 问题更新构建定义： [如何强制我的 TFS 2010 构建构建解决方案中的所有项目以在调试或发布模式下构建？](https://stackoverflow.com/questions/3498224/how-do-i-force-my-tfs-2010-build-to-build-all-projects-in-the-solution-to-be-bui)

不知道为什么我突然不得不强制执行这个标志？

不只是你——我已经看到同样的事情大约一个星期了，但无法弄清楚。当我远程访问我的 Azure 虚拟机时，我看到它发布的 web.config 只是调试文件——哎呀！也许它没有运行 web.config 转换或什么？

# c# - 是否可以在 C# 中处理单个位？尝试实现 SHA256 生成器

> ID：16006588
> 
> 赞同：0
> 
> 时间：2013-04-15T02:01:51.280
> 
> 标签：c#, algorithm, hash, sha

这样做只是为了好玩，我正在阅读[维基百科上的伪代码](https://en.wikipedia.org/wiki/SHA-2#Pseudocode)，它说在预处理时将位“1”附加到消息中，然后将足够的“0”位附加到生成的消息长度模数 512 为 448。然后将消息的长度（以位为单位）附加为 64 位大端整数。

好的。我不确定如何只附加一个“1”位，但我认为可以只附加 128（1000 0000），但如果没有所有的消息长度模数 512 已经是 448，这将不起作用那些额外的 0。在这种情况下，我不确定如何仅附加一个 1，因为我至少需要处理字节。在 C# 中可能吗？

另外，是否有一种内置的方法来附加一个大端整数，因为我相信我的系统默认是小端的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T02:08:32.353

它的定义方式是，如果消息是偶数字节，则只需要处理字节。如果消息长度 (mod 64) 为 56，则附加一个字节 0b10000000，后跟 63 0 字节，然后是长度。否则，追加 0b10000000 的一个字节，然后是 0 到 62 0 个字节，然后是长度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T02:10:51.167

您可以查看 System.Collections 中的[BitArray](http://msdn.microsoft.com/en-us/library/system.collections.bitarray.aspx)类。其中一个 ctor 重载采用字节数组等。

# php - 拆分字符串，同时将分隔符和字符串保留在外部

> ID：16006590
> 
> 赞同：1
> 
> 时间：2013-04-15T02:02:06.600
> 
> 标签：php, string, split, delimiter

我正在尝试做一些必须非常简单的事情，但我对 PHP 还很陌生，我正在努力解决这个问题。我想要的是拆分包含 0、1 或多个定界符（大括号）的字符串，同时将定界符和字符串之间的字符串和字符串保持在外面。

例如：“你好 {F}{N}，你好吗？” 将输出：

```
Array ( [0] => Hello 
        [1] => {F}
        [2] => {N} 
        [3] => , how are you? ) 
```

到目前为止，这是我的代码：

```
$value = 'Hello {F}{N}, how are you?';
$array= preg_split('/[\{\}]/', $value,-1, PREG_SPLIT_DELIM_CAPTURE | PREG_SPLIT_NO_EMPTY);
print_r($array); 
```

哪个输出（缺少大括号）：

```
Array ( [0] => Hello 
        [1] => F
        [2] => N 
        [3] => , how are you? ) 
```

我也试过：

```
preg_match_all('/\{[^}]+\}/', $myValue, $array); 
```

哪些输出（有大括号，但外面的文本已刷新）：

```
Array ( [0] => {F} 
        [1] => {N} ) 
```

我很确定我在 preg_split 的良好轨道上，但使用了错误的正则表达式。谁能帮我这个？或者告诉我，如果我离开了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T02:06:26.177

您没有捕获分隔符。将它们添加到捕获组：

```
/(\{.*?\})/ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T02:06:36.440

您需要在要捕获的表达式部分周围加上括号：

```
preg_split('/(\{[^}]+\})/', $myValue, -1, PREG_SPLIT_DELIM_CAPTURE); 
```

请参阅[`preg_split()`](http://www.php.net/manual/en/function.preg-split.php).

# c# - 项目在错误的目录中查找文件（流）

> ID：16006591
> 
> 赞同：0
> 
> 时间：2013-04-15T02:02:17.020
> 
> 标签：c#, xna, stream, directory

在过去的几天里，我一直在构建游戏。在我达到某些里程碑后，我会将项目文件夹 C&P 到我的保管箱文件夹中，然后在我的 Visual Studio 文件夹中创建一个新文件夹。

我现在遇到了一个问题，但是当我尝试从文件中读取时，streamreader 正在尝试从以前的文件夹目录中读取。

例如，在“Project2”中，阅读器试图从“Project1”中的文件中读取。我怎样才能改变这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T02:12:46.720

首先，您很可能指定了一个绝对目录（ "C:\Blah\BlahBlahblah..." ），或者您将工作目录设置到了错误的位置。

使用***相对路径***或始终将数据存储在固定位置（如今的约定是将数据存储为[APPDATA](https://stackoverflow.com/questions/867485/c-sharp-getting-the-path-of-appdata)。将其存储在像 Program Files 这样的地方是一个可怕的约定。当你发布你的程序时不要这样做）。用 XNA 标记后，您的根目录也应该指定到一个相对位置（“内容”、“数据”等），这样当可执行文件启动时，它会查看可执行文件的位置，+ 在文件夹“内容”或“数据”。这将使使用内容加载器更容易。

现在，一般建议。您***永远***不必完全创建一个新项目来进行版本控制。您*实际上是*在做任何好的[免费版本控制系统](https://www.bitbucket.org/)（[或类似这个](https://github.com/)）的工作。版本控制将使您不那么痛苦。

最后，SO 的最后一个提示：描述您的问题很酷，但比所有这些组合更好的是发布引发错误的代码。这样做可以让我们弄清楚到底出了什么问题，因为 SO 的熟练专业人员（我正努力成为其中之一）已经处理并知道如何处理多种异常和编译错误（或者我们的 Google-傅先生气势汹汹）。

# animation - 动画不统一播放

> ID：16006595
> 
> 赞同：2
> 
> 时间：2013-04-15T02:02:46.783
> 
> 标签：animation, unity3d, blender

这似乎是一个常见问题，由于谷歌或论坛搜索中的噪音量，几乎不可能找到我的具体案例的答案。

我已将对象从搅拌机导入统一。这些物体里面有更小的物体。那些较小的物体上有动画，这是统一创建的。如果我打开动画窗口（Window->Animation）并按下播放 - 我可以看到对象的正确移动。动画设置为在检查器中自动播放，剔除类型始终为动画。但是，如果我玩游戏，则不会播放动画。为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-13T07:16:14.587

将动画添加到主要对象，然后为较小的对象设置动画...

您必须将动画组件放到主要对象上，然后为小部分设置动画...

这很重要...

它应该工作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-07T17:24:51.127

I know it's kinda late, but this is for others having this same issue.

Animations in Unity have types (2 of which I know). Type 1 can be attached to an object using the Animation Component. Type 2 can only be used in Animators (Mechanim).

Animations imported with FBX files are type 2 (and as far as I know, animation type in FBX files can NOT be changed), so they will usually not work when attached directly to an object with "Animation". They should be used with Animators and Animator Controllers. Just create a New Controller and add the animation. It will become the default animation state and play automatically.

If you want it to loop, click on the FBX asset, and in the Animation tab, choose Loop Time and click Apply.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T08:39:38.997

我找不到任何基于统一检查员的答案。目前，我最好的选择是创建新脚本，并在 update() 检查动画是否正在播放。如果没有，那就玩吧。非常低效，所以对于将来可能偶然发现这篇文章的人，我建议您尝试添加`this.animation.play()`设置部分脚本。

# ajax - 没有“IEnumerable”类型的 ViewData 项 ' 具有键 'print_ad_option_id'

> ID：16006598
> 
> 赞同：1
> 
> 时间：2013-04-15T02:03:03.820
> 
> 标签：ajax, asp.net-mvc

所以我有我做一些ajax的方法：

```
function prodChange() {
    console.log(this.value);

    // ajax
    var url = '@Url.Action("GetAdvProdList", "Contract")' + '?prod_id=' + this.value;
    $.ajax({
        url: url,
        type: 'GET',
        success: showAdvProd,
        error: function() {
            console.log("FAILSHAKUREHKGAHH");
        }
    });  
} 
```

ajax 成功返回并调用此控制器方法。

```
public ActionResult GetAdvProdList(int prod_id) { // product id
        // get advertising products for this product
        OutlookMediaEntities1 db = new OutlookMediaEntities1();

        var advsList = from printAdOption in db.print_ad_option
                        where printAdOption.print_product_id == prod_id
                        select printAdOption;

        List<SelectListItem> adv_list = new List<SelectListItem>(); // list of ads
        List<print_ad_option> advs = advsList.ToList(); // list from db
        foreach (print_ad_option av in advs)
        {
            SelectListItem temp_item = new SelectListItem();
            temp_item.Text = av.name;
            temp_item.Value = av.print_ad_option_id.ToString();
            adv_list.Add(temp_item);
        }
        ViewData["advproducts"] = new SelectList((IEnumerable<SelectListItem>)adv_list.ToList(), "Value", "Text");

        return null;
    } 
```

我正在返回 null，因为如果我返回 View 或 PartialView，它就不起作用，而且我认为我不希望它返回这些东西。我想要的只是要设置的视图数据。

在我添加代码以使用视图数据之前，ajax 运行良好。不幸的是，当我尝试在 ajax 成功方法中使用新的 ViewData 时，我收到此错误：“没有具有键 'print_ad_option_id' 的 'IEnumerable' 类型的 ViewData 项目”问题是我第一次收到此错误加载页面，因此它似乎试图在调用 showAdvProd 函数之前评估“@Html.DropDownListFor...”：

```
// called when the ajax returns a list of adv prods in a viewdata
function showAdvProd() {
    // add drop down
    $("#drdn1").append('@Html.DropDownListFor(m => m.print_ad_option_id, ViewData["advproducts"] as SelectList)');
} 
```

当从（不同的）下拉菜单中选择一个项目时，会调用执行 ajax 的函数，但是由于此错误，页面甚至不会加载，因此显然永远不会调用 ajax 函数，因此永远不会调用控制器方法。所以当然它不会识别视图数据......

我同样在表单的另一部分创建了一个下拉菜单，使用 viewdata 但没有 ajax，它工作正常。所以我认为我的 ajax 或我的控制器方法有问题，而不是我使用 viewdata 的方式。

预先感谢您的任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T03:16:34.770

`@`问题是在您的初始页面加载时，视图引擎将评估所有代码块 -前面带有“”符号的任何内容。因此，它会在它存在之前尝试查找名为*advproducts*的 ViewData 项，即使该引用位于尚未调用的 javascript 函数中。请记住 - 代码块（例如在`@Html.blahblahblah()`服务器端评估，而您希望 ajax 在客户端运行，在页面发送到客户端之后。

几个选项：返回部分视图应该可以。您可以返回一个包含下拉列表的部分视图并从 ViewBag 中填充它。看起来像这样：

初始页面：

```
...
<div id="advProductsSection"></div>
... 
```

您的 ajax 将调用相同的函数，但会返回部分视图：

```
public ActionResult GetAdvProdList(int prod_id) { // product id
...
ViewData["advproducts"] = new SelectList((IEnumerable<SelectListItem>)adv_list.ToList(), "Value", "Text");
return View("_AdvProducts");
} 
```

然后是局部视图（这里命名为`_AdvProducts.cshtml`）：

```
@Html.DropDownList("className", (IEnumerable<SelectListItem>) ViewBag["advproducts"]) 
```

您的 ajax 函数需要更改以将 div 替换为新的部分：

```
success: function (result) {
    $('#advProductsSection').html(result);
} 
```

或类似的东西..

第二种选择是从 Action Method 返回 JSON 并用它填充下拉列表。

你的控制器：

```
...
return JSON(adv_list.ToList());
} 
```

然后在你的 ajax 成功函数中：

```
success: function(list) {
    // states is your JSON array
    var $dropdown = $('#Dropdown');
    $.each(list, function(i, product) {
        $('<option>', {
            value: list.Value
        }).html(list.Text).appendTo($dropdown);
    });
} 
```

`prodchange`调用时，您需要再次清除下拉列表。

# ios - ios：调试自定义位置不起作用

> ID：16006600
> 
> 赞同：0
> 
> 时间：2013-04-15T02:03:15.350
> 
> 标签：ios, xcode, debugging, ios-simulator

在模拟器中，我设置了调试->位置->自定义位置纬度和经度。

然后在代码中我有：

```
- (void)updateMap{
    MKCoordinateSpan span;
    span.latitudeDelta = .6;//The amount of north-to-south distance (measured in degrees) to display on the map
    span.longitudeDelta = .6;//The amount of east-to-west distance (measured in degrees) to display for the map region

    MKCoordinateRegion region;
    region.center = _ls.coordinate;
    region.span = span;
    [mapView setRegion:region animated:TRUE];
} 
```

在另一个文件中，我获得 @property (nonatomic, readonly) CLLocationCoordinate2D 坐标；

```
- (void)locationManager:(CLLocationManager *)manager didUpdateLocations:(NSArray *)locations{

    //Get the latitude and longitude location
    CLLocation *lastLocation = [locations lastObject];
    _latitude = [[NSString alloc] initWithFormat:@"%f", lastLocation.coordinate.latitude];
    _longitude = [[NSString alloc] initWithFormat:@"%f", lastLocation.coordinate.longitude];
    _coordinate = lastLocation.coordinate;//manager.location.coordinate;
    } 
```

当我运行该应用程序时，模拟器一直显示旧金山。任何想法为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T06:40:48.673

得到它的工作：

(1)我只需要关闭 xcode 和模拟器并重新加载程序。现在它加载了我的位置。:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T05:35:08.873

它是模拟器的默认位置。要模拟位置，请使用 Xcode 窗口中的下拉菜单来设置位置或“路径”来模拟运动。

# python - 无法在 Python 3 中导入 cProfile

> ID：16006602
> 
> 赞同：17
> 
> 时间：2013-04-15T02:03:51.060
> 
> 标签：python, cprofile

我正在尝试将 cProfile 模块导入 Python 3.3.0，但出现以下错误：

```
Traceback (most recent call last):
  File "<pyshell#7>", line 1, in <module>
    import cProfile
  File "/.../cProfile_try.py", line 12, in <module>
    help(cProfile.run)
AttributeError: 'module' object has no attribute 'run' 
```

完整代码（`cProfile_try.py`）如下

```
import cProfile
help(cProfile.run)

L = list(range(10000000))
len(L)
# 10000000

def binary_search(L, v):
    """ (list, object) -> int

    Precondition: L is sorted from smallest to largest, and
    all the items in L can be compared to v.

    Return the index of the first occurrence of v in L, or
    return -1 if v is not in L.

    >>> binary_search([2, 3, 5, 7], 2)
    0
    >>> binary_search([2, 3, 5, 5], 5)
    2
    >>> binary_search([2, 3, 5, 7], 8)
    -1
    """

    b = 0
    e = len(L) - 1

    while b <= e:
        m = (b + e) // 2
        if L[m] < v:
            b = m + 1
        else:
            e = m - 1

    if b == len(L) or L[b] != v:
        return -1
    else:
        return b

cProfile.run('binary_search(L, 10000000)') 
```

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2017-03-06T18:46:57.603

如评论中所述，很可能意外存在一个名为 的文件`profile.py`，可能在当前目录中。无意中使用了此文件`cProfile`，从而掩盖了 Python 的`profile`模块。

建议的解决方案是：

```
mv profile.py profiler.py 
```

接下来，为了更好的衡量，

如果使用 Python 3：

```
rm __pycache__/profile.*.pyc 
```

如果使用 Python 2：

```
rm profile.pyc 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2021-10-24T08:04:25.277

尝试使用“将配置文件导入为 cProfile”

# html - html代码在wordpress中不起作用

> ID：16006603
> 
> 赞同：0
> 
> 时间：2013-04-15T02:03:59.213
> 
> 标签：html, wordpress

以下代码属于 wordpress 自定义插件“上传”。它基本上创建了一个按钮来打开文件浏览器以选择一个文件。

```
<form class="file_input_uploadform" id="uploadform_2" name="uploadform_2" method="post" enctype="multipart/form-data">
                            <input align="center" type="button" id="input_2" value="Select File" class="file_input_button_hover">
                            <input type="file" accept=".$params[" pid"]="" "="" class="file_input_hidden" name="uploadedfile_2" id="upfile_2" tabindex="1" onchange="javascript: document.getElementById('fileName_2').value = this.value.replace(/c:\\fakepath\\/i, '');" onmouseout="javascript: document.getElementById('input_2').className = 'file_input_button'" onmouseover="javascript: document.getElementById('input_2').className = 'file_input_button_hover'" onclick="javascript: document.getElementById('messagelabel_2').innerHTML = ''; document.getElementById('inline_upload_message_2').style.display='none'; this.value = ''; document.getElementById('fileName_2').value = '';">
                            <input type="hidden" id="hiddeninput_2" name="hiddeninput_2" value="">
                        </form> 
```

如果我们把它放在一个 html 编辑器中，它就可以正常工作 --- 点击按钮会弹出文件浏览器。

但是，如果我们把它放在 wordpress 中

```
....
[upload uploadId="0"]
[upload uploadId="1"]
.... 
```

第一个不起作用（没有打开文件浏览器），而第二个起作用（打开文件浏览器）。

是否有任何调试方式，或者是否有任何原因会发生这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T02:12:23.513

在插件的代码中搜索`upload`，您应该会找到如下内容：

```
add_shortcode( 'upload', 'upload_function' ); 
```

然后搜索`upload_function`（或任何函数名称）。然后检查函数接受哪些参数以及它是如何工作的。

这样你就会发现为什么这个函数不`0`接受`uploadId`.

有关简码的更多信息：[Wordpress 简码 API](http://codex.wordpress.org/Shortcode_API)

# customization - 安装 shield 2012 专业皮肤定制套件失败

> ID：16006604
> 
> 赞同：0
> 
> 时间：2013-04-15T02:04:00.883
> 
> 标签：customization, installshield, skin

我继承了一个使用 2010 的安装盾项目。我升级到**2012 IS 专业版。**

我还下载了皮肤定制工具包，遇到以下问题。我正在尝试使用此自定义工具包生成新的皮肤文件

```
CreateSkinFile.exe C:\MySkinFilesSrc C:\CustomizedSkins\setup.isn 
```

它会立即打开和关闭。当它打开一个新窗口并在亚秒内关闭时，无法读取它显示的错误。没有日志，也没有关于它到底在抱怨什么的踪迹。

有没有办法解决这个问题，看看问题是什么？该**ini**文件按照定制工具包指南进行排序。

顺便说一句：我想确保我在做正确的事情。我拿了他们的一个小丑示例并尝试使用它生成皮肤。这也以类似的方式失败。除此之外，我使用皮肤定制工具包提取并使用相同的精确工具来制作皮肤，但也失败了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T22:37:16.293

这是我发现的，希望对其他人有所帮助。

该套件编写得非常糟糕，因为它没有任何详细或适当的错误报告。它打开和关闭的速度如此之快，以至于人类无法阅读。话虽如此，我发现：

1.  客户代表给我的套件是 2012 年春季的。一旦我纠正了这一点，问题仍然存在。

2.  根本原因是，皮肤文件中的图像之一不存在。我有很多图像，我不仔细看每一张。一旦我检查并确保目录中存在每个图像，CreateSkinFile 就会继续并成功生成 ISN 文件。

希望它可以帮助别人。

# java - Spring/JPA 数据保留在单元测试中但不在应用程序中

> ID：16006609
> 
> 赞同：0
> 
> 时间：2013-04-15T02:04:28.877
> 
> 标签：java, spring, jpa

我无法通过调用我的 userService 在我的 Spring/JPA/Tomcat 应用程序中保存数据，但是当我从单元测试中调用它时，数据被写入数据库。从我的控制器调用服务时也没有抛出任何异常。

控制器类：

```
@Controller
@RequestMapping("/")
public class AccessManagementController {

    @Autowired
    private UserService userService;

    @Autowired
    private ApplicationProperties applicationProperties;

    @RequestMapping(method = RequestMethod.GET, value = "/register")

        :
        :
        :

        userService.createNewUser(username, password);

        model.addAttribute("loginMessage", "Registration successful; you can now login");
        return "/access";
    }
} 
```

工作单元测试：

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(locations = {
        "classpath:/spring/applicationContext.xml",
        "classpath:/spring/securityContext.xml",
        "classpath:/spring/jpaContext.xml"
})
public class UserServiceTest {

    @Autowired
    private UserService userService;

    @Test
    public void userServiceSaveUserTest() {

        String testUsername = (new Date()).toString();

        userService.createNewUser(testUsername, "password");
        User findUser = userService.findByUsername(testUsername);
        Assert.assertNotNull(findUser);
        Assert.assertEquals(findUser.getUsername(), testUsername);
    }
} 
```

应用程序上下文.xml：

```
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:context="http://www.springframework.org/schema/context"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:mvc="http://www.springframework.org/schema/mvc"
       xsi:schemaLocation="http://www.springframework.org/schema/beans
            http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
            http://www.springframework.org/schema/context
            http://www.springframework.org/schema/context/spring-context-3.0.xsd
            http://www.springframework.org/schema/mvc
            http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd">

    <context:component-scan base-package="com.bytediary"/>

    <bean id="applicationProperties" class="com.bytediary.util.ApplicationProperties">
        <property name="location" value="classpath:application.properties"/>
    </bean>

    <bean class="org.springframework.web.servlet.view.InternalResourceViewResolver">
        <property name="prefix" value="/jsp/" />
        <property name="suffix" value=".jsp" />
    </bean>

    <bean class="org.springframework.orm.hibernate4.HibernateExceptionTranslator"/>

    <mvc:annotation-driven/>
    <mvc:resources mapping="/resources/**" location="/resources/"/>

</beans> 
```

jpaContext.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:jpa="http://www.springframework.org/schema/data/jpa"
       xmlns:context="http://www.springframework.org/schema/context"
       xmlns:tx="http://www.springframework.org/schema/tx"
       xsi:schemaLocation="http://www.springframework.org/schema/beans
                           http://www.springframework.org/schema/beans/spring-beans.xsd
                           http://www.springframework.org/schema/data/jpa
                           http://www.springframework.org/schema/data/jpa/spring-jpa.xsd
                           http://www.springframework.org/schema/context
                           http://www.springframework.org/schema/context/spring-context.xsd
                           http://www.springframework.org/schema/tx
                           http://www.springframework.org/schema/tx/spring-tx-3.0.xsd">

    <bean id="dataSource" class="org.springframework.jdbc.datasource.SimpleDriverDataSource">
        <property name="driverClass" value="${jdbc.driver}"/>
        <property name="url" value="${jdbc.url}"/>
        <property name="username" value="${jdbc.username}"/>
        <property name="password" value="${jdbc.password}"/>
    </bean>

    <context:annotation-config />
    <context:component-scan base-package="com.bytediary.entity" />

    <jpa:repositories base-package="com.bytediary.repository"/>

    <bean id="transactionManager" class="org.springframework.orm.jpa.JpaTransactionManager">
        <property name="entityManagerFactory" ref="entityManagerFactory" />
    </bean>

    <bean id="entityManagerFactory" class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
        <property name="persistenceUnitName" value="default"/>
        <property name="dataSource" ref="dataSource" />
        <property name="packagesToScan" value="com.bytediary.entity" />
        <property name="persistenceXmlLocation" value="classpath:/jpa/persistence.xml" />
        <property name="jpaVendorAdapter">
            <bean class="org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter">
                <property name="showSql" value="true"/>
                <property name="database" value="MYSQL" />
                <property name="generateDdl" value="true" />
            </bean>
        </property>
    </bean>

    <bean class="org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor"/>

    <tx:annotation-driven proxy-target-class="true" transaction-manager="transactionManager" />

</beans> 
```

持久性.xml

```
<persistence xmlns="http://java.sun.com/xml/ns/persistence"
             xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
             xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd"
             version="2.0">
    <persistence-unit name="default" transaction-type="RESOURCE_LOCAL">
        <class>com.bytediary.entity.User</class>
    </persistence-unit>

</persistence> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T02:22:56.243

1\. 你不需要

```
<bean class="org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor"/> 
```

这里的解释：

[http://static.springsource.org/spring/docs/2.5.6/api/org/springframework/orm/jpa/support/PersistenceAnnotationBeanPostProcessor.html](http://static.springsource.org/spring/docs/2.5.6/api/org/springframework/orm/jpa/support/PersistenceAnnotationBeanPostProcessor.html)

> 注意：默认的 PersistenceAnnotationBeanPostProcessor 将由“context:annotation-config”和“context:component-scan”XML 标签注册。如果您打算指定自定义 PersistenceAnnotationBeanPostProcessor bean 定义，请删除或关闭那里的默认注释配置。

2\. 尝试将@Transactional 添加到 UserService.createNewUser()。

# python - 在 python 中传入 le 或 ge 符号

> ID：16006612
> 
> 赞同：0
> 
> 时间：2013-04-15T02:04:58.027
> 
> 标签：python, mysql

我希望以前没有问过这个问题，我不确定要使用什么关键字。

假设我想编写一个可以采用小于或等于语句进行查询的函数......

```
import MySQLdb

def query1(date,le):
  '''
  query1('2013-01',<= )
  >>> 10
  '''

  query = '''
  select * 
  from   table 
  where  number {x} 1
         and date = {dt}
  '''.format(dt=date,x=le)

  cursor.execute(query)
  rslt = cursor.fetchall()

  return rslt 
```

那么最好的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T02:11:25.043

您可以将比较运算符作为字符串传递给您的函数：

```
query1('2013-01', '<=') 
```

这会将运算符的字符串插入到查询中，从而导致

```
select * 
from   table 
where  number <= 1
     and date = 2013-01 
```

请注意，通过插入字符串直接构建 SQL 查询是 SQL 注入的潜在载体。如果您允许用户提供自己的日期字符串，则用户可能会注入一些 SQL 代码并运行恶意代码。查看查询参数化以获取更多信息。

如果您想防范 SQL 注入，您应该执行以下操作。允许的操作员列表被仔细列入白名单，因此只能使用有效且安全的操作员。这用于构建查询。`cursor.execute()`然后通过命令将日期注入到查询中。`MySQLdb`然后处理从您的数据构建安全查询，并且不允许恶意用户注入他们自己的 SQL 来代替日期字符串。

```
import MySQLdb

def query1(date, comp):
    query = '''
    select * 
    from   table 
    where  number {comp} 1
           and date = %s
    '''.format(comp=sql_comp_operator(comp))

    cursor.execute(query, (date, ))
    return cursor.fetchall()

def sql_comp_operator(comp):
     operators = {
         'lt': '<',
         'lte': '<',
         'gt': '>',
         'gte': '>=',
     }
     if comp in operators:
         return operators[comp]
     else:
         raise ValueError("Unknown comparison operator '{}'".format(comp))

query1('2013-01', 'lte') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T02:20:31.743

理想情况下，您希望使用 ORM 来防止 SQL 注入攻击（我更喜欢[SQLAlchemy](http://www.sqlalchemy.org/) / [Elixir](http://elixir.ematia.de/trac/wiki)），它可以让您执行以下操作：

```
q = session.query(User).\
    filter(User.id <= 1).\
    filter(User.date_of_birth == date) 
```

听起来您希望“le”成为您可以传入的函数/lambda，但我不知道有什么方法可以将该 lambda 转换为字符串以放入您的查询中。例如，您可以这样称呼它：

```
query1('2013-01-01', lambda x,y: x <= y) 
```

但是我不知道将您的查询中的它转换为“<=”的真正方法。但是，如果您将其作为字符串传入，则可以将 format 与命名块一起使用，方法是传入具有与这些块相同名称的键的字典，如下所示：

```
sql = """
select * 
  from   table 
  where  number {operation} 1
         and date = '{date}'
"""

data = {
    "operation": "<=",
    "date": "2013-01-01"
}

query = sql.format(**data) 
```

# java - Guice ServeContextListener 不启动

> ID：16006617
> 
> 赞同：1
> 
> 时间：2013-04-15T02:05:21.740
> 
> 标签：java, guice

我正在尝试`@Named`为 中的绑定 String 进行注入`ServeContextListener`，但是我总是知道 String 不是绑定异常。所以我猜`ServeContextListener`它不会启动。

这是我的**web.xml**配置：

```
<!-- GAE-Shiro -->

<context-param>
   <param-name>user-base-url</param-name>
   <param-value>/user/admin</param-value>
</context-param>

<context-param>
    <param-name>static-base-url</param-name>
    <param-value></param-value>
</context-param>

<filter>
    <filter-name>guiceFilter</filter-name>
    <filter-class>com.google.inject.servlet.GuiceFilter</filter-class>
</filter>

<filter-mapping>
    <filter-name>guiceFilter</filter-name>
    <url-pattern>/*</url-pattern>
    <dispatcher>REQUEST</dispatcher>
    <dispatcher>FORWARD</dispatcher>
    <dispatcher>INCLUDE</dispatcher>
</filter-mapping>

<listener>
    <listener-class>org.apache.shiro.web.env.EnvironmentLoaderListener</listener-class>
</listener>

<listener>
    <listener-class>org.jboss.errai.ui.demo.server.guice.ServeContextListener</listener-class>
</listener>

<mime-mapping>
    <extension>manifest</extension>
    <mime-type>text/cache-manifest</mime-type>
</mime-mapping>

<welcome-file-list>
    <welcome-file>index.html</welcome-file>
</welcome-file-list>   

<!-- JBoss Resteasy -->

<context-param>
    <param-name>resteasy.guice.modules</param-name>
    <param-value>org.jboss.errai.ui.demo.server.guice.ServeModule</param-value>
</context-param>

<listener>
    <listener-class>
        org.jboss.resteasy.plugins.guice.GuiceResteasyBootstrapServletContextListener
    </listener-class>
</listener>

<context-param>  
    <param-name>resteasy.servlet.mapping.prefix</param-name>  
    <param-value>/</param-value>  
</context-param>

<servlet>
    <servlet-name>Resteasy</servlet-name>
    <servlet-class>
        org.jboss.resteasy.plugins.server.servlet.HttpServletDispatcher
    </servlet-class>
</servlet>

<servlet-mapping>
    <servlet-name>Resteasy</servlet-name>
    <url-pattern>/*</url-pattern>
</servlet-mapping> 
```

实际绑定在`ServeLogic`：

```
@Override
protected Injector getInjector() {
    return Guice.createInjector(new ServeLogic(userBaseUrl, staticBaseUrl), new ServeModule(userBaseUrl));
} 
```

唯一受到约束的是那些在`resteasy.guice.modules`：

```
org.jboss.errai.ui.demo.server.guice.ServeModule 
```

这是为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T00:45:50.560

我已经通过以下方式解决了这个问题：

*   扩展 GuiceResteasyBootstrapServletContextListener 并将 ServeContextListener 结合到它。
*   这样，应用程序只有一个上下文侦听器，即 GuiceResteasyBootstrapServletContextListener

因此我只有这个听众：

```
<listener>
    <listener-class>
        org.jboss.errai.ui.demo.server.guice.CustomGuiceResteasyBootstrapServletContextListener
    </listener-class>
</listener> 
```

# java - 覆盖 Paint 方法，无法向窗口添加任何控件

> ID：16006621
> 
> 赞同：0
> 
> 时间：2013-04-15T02:06:27.547
> 
> 标签：java, swing, jpanel, transparency

我有以下代码：

```
import javax.swing.*;
import javax.swing.ImageIcon;
import javax.swing.JOptionPane;
import java.awt.*;
import java.awt.Image;
import java.awt.Toolkit;
import java.awt.image.BufferedImage;
import java.awt.image.BufferedImageOp;
import java.awt.image.ConvolveOp;
import java.awt.image.Kernel;

import java.awt.image.ColorModel;
import java.awt.image.Raster;
import java.awt.image.WritableRaster;
import java.awt.GraphicsConfiguration;
import java.awt.Transparency;
import java.awt.Graphics;
import java.awt.GraphicsEnvironment;
import java.awt.Graphics2D;
import java.awt.RenderingHints;
import java.io.IOException;
import java.net.URL;
import javax.imageio.ImageIO;

import java.io.IOException;

public class sutff extends JWindow
{
    private BufferedImage bi;

    public sutff() {
        try {
            bi = GraphicsUtilities.loadCompatibleImage(getClass().getResource("window1.png"));
            setBackground(new Color(0,0,0,1));
            setSize(bi.getWidth(),bi.getHeight());
            setLocationRelativeTo(null);
            show();

            JPanel j = new JPanel();
            j.setBackground(Color.BLACK);
            j.setSize(20,20);
            add(j);
            j.setVisible(true);
            repaint();
            revalidate();
        }
        catch(Exception exception) { exception.printStackTrace(); }
    }

    //Paint transparent image onto JWindow
    public void paint(Graphics g) {
        bi = getGaussianBlurFilter(4,true).filter(bi,null);
        g.drawImage(bi,0,0,null);
    }

    public static ConvolveOp getGaussianBlurFilter(int radius,
            boolean horizontal) {
        if (radius < 1) {
            throw new IllegalArgumentException("Radius must be >= 1");
        }

        int size = radius * 2 + 1;
        float[] data = new float[size];

        float sigma = radius / 3.0f;
        float twoSigmaSquare = 2.0f * sigma * sigma;
        float sigmaRoot = (float) Math.sqrt(twoSigmaSquare * Math.PI);
        float total = 0.0f;

        for (int i = -radius; i <= radius; i++) {
            float distance = i * i;
            int index = i + radius;
            data[index] = (float) Math.exp(-distance / twoSigmaSquare) / sigmaRoot;
            total += data[index];
        }

        for (int i = 0; i < data.length; i++) {
            data[i] /= total;
        }

        Kernel kernel = null;
        if (horizontal) {
            kernel = new Kernel(size, 1, data);
        } else {
            kernel = new Kernel(1, size, data);
        }
        return new ConvolveOp(kernel, ConvolveOp.EDGE_NO_OP, null);
    }
    public static void main(String[]args)
    {
        sutff tss=new sutff();
    }
}

/**
 * <p><code>GraphicsUtilities</code> contains a set of tools to perform
 * common graphics operations easily. These operations are divided into
 * several themes, listed below.</p>
 * <h2>Compatible Images</h2>
 * <p>Compatible images can, and should, be used to increase drawing
 * performance. This class provides a number of methods to load compatible
 * images directly from files or to convert existing images to compatibles
 * images.</p>
 * <h2>Creating Thumbnails</h2>
 * <p>This class provides a number of methods to easily scale down images.
 * Some of these methods offer a trade-off between speed and result quality and
 * shouuld be used all the time. They also offer the advantage of producing
 * compatible images, thus automatically resulting into better runtime
 * performance.</p>
 * <p>All these methodes are both faster than
 * {@link java.awt.Image#getScaledInstance(int, int, int)} and produce
 * better-looking results than the various <code>drawImage()</code> methods
 * in {@link java.awt.Graphics}, which can be used for image scaling.</p>
 * <h2>Image Manipulation</h2>
 * <p>This class provides two methods to get and set pixels in a buffered image.
 * These methods try to avoid unmanaging the image in order to keep good
 * performance.</p>
 *
 * @author Romain Guy <romain.guy@mac.com>
 */
class GraphicsUtilities {
    private GraphicsUtilities() {
    }

    // Returns the graphics configuration for the primary screen
    private static GraphicsConfiguration getGraphicsConfiguration() {
        return GraphicsEnvironment.getLocalGraphicsEnvironment().
                    getDefaultScreenDevice().getDefaultConfiguration();
    }

    /**
     * <p>Returns a new <code>BufferedImage</code> using the same color model
     * as the image passed as a parameter. The returned image is only compatible
     * with the image passed as a parameter. This does not mean the returned
     * image is compatible with the hardware.</p>
     *
     * @param image the reference image from which the color model of the new
     *   image is obtained
     * @return a new <code>BufferedImage</code>, compatible with the color model
     *   of <code>image</code>
     */
    public static BufferedImage createColorModelCompatibleImage(BufferedImage image) {
        ColorModel cm = image.getColorModel();
        return new BufferedImage(cm,
            cm.createCompatibleWritableRaster(image.getWidth(),
                                              image.getHeight()),
            cm.isAlphaPremultiplied(), null);
    }

    /**
     * <p>Returns a new compatible image with the same width, height and
     * transparency as the image specified as a parameter.</p>
     *
     * @see java.awt.Transparency
     * @see #createCompatibleImage(int, int)
     * @see #createCompatibleImage(java.awt.image.BufferedImage, int, int)
     * @see #createCompatibleTranslucentImage(int, int)
     * @see #loadCompatibleImage(java.net.URL)
     * @see #toCompatibleImage(java.awt.image.BufferedImage)
     * @param image the reference image from which the dimension and the
     *   transparency of the new image are obtained
     * @return a new compatible <code>BufferedImage</code> with the same
     *   dimension and transparency as <code>image</code>
     */
    public static BufferedImage createCompatibleImage(BufferedImage image) {
        return createCompatibleImage(image, image.getWidth(), image.getHeight());
    }

    /**
     * <p>Returns a new compatible image of the specified width and height, and
     * the same transparency setting as the image specified as a parameter.</p>
     *
     * @see java.awt.Transparency
     * @see #createCompatibleImage(java.awt.image.BufferedImage)
     * @see #createCompatibleImage(int, int)
     * @see #createCompatibleTranslucentImage(int, int)
     * @see #loadCompatibleImage(java.net.URL)
     * @see #toCompatibleImage(java.awt.image.BufferedImage)
     * @param width the width of the new image
     * @param height the height of the new image
     * @param image the reference image from which the transparency of the new
     *   image is obtained
     * @return a new compatible <code>BufferedImage</code> with the same
     *   transparency as <code>image</code> and the specified dimension
     */
    public static BufferedImage createCompatibleImage(BufferedImage image,
                                                      int width, int height) {
        return getGraphicsConfiguration().createCompatibleImage(width, height,
                                                   image.getTransparency());
    }

    /**
     * <p>Returns a new opaque compatible image of the specified width and
     * height.</p>
     *
     * @see #createCompatibleImage(java.awt.image.BufferedImage)
     * @see #createCompatibleImage(java.awt.image.BufferedImage, int, int)
     * @see #createCompatibleTranslucentImage(int, int)
     * @see #loadCompatibleImage(java.net.URL)
     * @see #toCompatibleImage(java.awt.image.BufferedImage)
     * @param width the width of the new image
     * @param height the height of the new image
     * @return a new opaque compatible <code>BufferedImage</code> of the
     *   specified width and height
     */
    public static BufferedImage createCompatibleImage(int width, int height) {
        return getGraphicsConfiguration().createCompatibleImage(width, height);
    }

    /**
     * <p>Returns a new translucent compatible image of the specified width
     * and height.</p>
     *
     * @see #createCompatibleImage(java.awt.image.BufferedImage)
     * @see #createCompatibleImage(java.awt.image.BufferedImage, int, int)
     * @see #createCompatibleImage(int, int)
     * @see #loadCompatibleImage(java.net.URL)
     * @see #toCompatibleImage(java.awt.image.BufferedImage)
     * @param width the width of the new image
     * @param height the height of the new image
     * @return a new translucent compatible <code>BufferedImage</code> of the
     *   specified width and height
     */
    public static BufferedImage createCompatibleTranslucentImage(int width,
                                                                 int height) {
        return getGraphicsConfiguration().createCompatibleImage(width, height,
                                                   Transparency.TRANSLUCENT);
    }

    /**
     * <p>Returns a new compatible image from a URL. The image is loaded from the
     * specified location and then turned, if necessary into a compatible
     * image.</p>
     *
     * @see #createCompatibleImage(java.awt.image.BufferedImage)
     * @see #createCompatibleImage(java.awt.image.BufferedImage, int, int)
     * @see #createCompatibleImage(int, int)
     * @see #createCompatibleTranslucentImage(int, int)
     * @see #toCompatibleImage(java.awt.image.BufferedImage)
     * @param resource the URL of the picture to load as a compatible image
     * @return a new translucent compatible <code>BufferedImage</code> of the
     *   specified width and height
     * @throws java.io.IOException if the image cannot be read or loaded
     */
    public static BufferedImage loadCompatibleImage(URL resource)
            throws IOException {
        BufferedImage image = ImageIO.read(resource);
        return toCompatibleImage(image);
    }

    /**
     * <p>Return a new compatible image that contains a copy of the specified
     * image. This method ensures an image is compatible with the hardware,
     * and therefore optimized for fast blitting operations.</p>
     *
     * @see #createCompatibleImage(java.awt.image.BufferedImage)
     * @see #createCompatibleImage(java.awt.image.BufferedImage, int, int)
     * @see #createCompatibleImage(int, int)
     * @see #createCompatibleTranslucentImage(int, int)
     * @see #loadCompatibleImage(java.net.URL)
     * @param image the image to copy into a new compatible image
     * @return a new compatible copy, with the
     *   same width and height and transparency and content, of <code>image</code>
     */
    public static BufferedImage toCompatibleImage(BufferedImage image) {
        if (image.getColorModel().equals(
                getGraphicsConfiguration().getColorModel())) {
            return image;
        }

        BufferedImage compatibleImage =
                getGraphicsConfiguration().createCompatibleImage(
                    image.getWidth(), image.getHeight(),
                    image.getTransparency());
        Graphics g = compatibleImage.getGraphics();
        g.drawImage(image, 0, 0, null);
        g.dispose();

        return compatibleImage;
    }

    /**
     * <p>Returns a thumbnail of a source image. <code>newSize</code> defines
     * the length of the longest dimension of the thumbnail. The other
     * dimension is then computed according to the dimensions ratio of the
     * original picture.</p>
     * <p>This method favors speed over quality. When the new size is less than
     * half the longest dimension of the source image,
     * {@link #createThumbnail(BufferedImage, int)} or
     * {@link #createThumbnail(BufferedImage, int, int)} should be used instead
     * to ensure the quality of the result without sacrificing too much
     * performance.</p>
     *
     * @see #createThumbnailFast(java.awt.image.BufferedImage, int, int)
     * @see #createThumbnail(java.awt.image.BufferedImage, int)
     * @see #createThumbnail(java.awt.image.BufferedImage, int, int)
     * @param image the source image
     * @param newSize the length of the largest dimension of the thumbnail
     * @return a new compatible <code>BufferedImage</code> containing a
     *   thumbnail of <code>image</code>
     * @throws IllegalArgumentException if <code>newSize</code> is larger than
     *   the largest dimension of <code>image</code> or &lt;= 0
     */
    public static BufferedImage createThumbnailFast(BufferedImage image,
                                                    int newSize) {
        float ratio;
        int width = image.getWidth();
        int height = image.getHeight();

        if (width > height) {
            if (newSize >= width) {
                throw new IllegalArgumentException("newSize must be lower than" +
                                                   " the image width");
            } else if (newSize <= 0) {
                 throw new IllegalArgumentException("newSize must" +
                                                    " be greater than 0");
            }

            ratio = (float) width / (float) height;
            width = newSize;
            height = (int) (newSize / ratio);
        } else {
            if (newSize >= height) {
                throw new IllegalArgumentException("newSize must be lower than" +
                                                   " the image height");
            } else if (newSize <= 0) {
                 throw new IllegalArgumentException("newSize must" +
                                                    " be greater than 0");
            }

            ratio = (float) height / (float) width;
            height = newSize;
            width = (int) (newSize / ratio);
        }

        BufferedImage temp = createCompatibleImage(image, width, height);
        Graphics2D g2 = temp.createGraphics();
        g2.setRenderingHint(RenderingHints.KEY_INTERPOLATION,
                            RenderingHints.VALUE_INTERPOLATION_BILINEAR);
        g2.drawImage(image, 0, 0, temp.getWidth(), temp.getHeight(), null);
        g2.dispose();

        return temp;
    }

    /**
     * <p>Returns a thumbnail of a source image.</p>
     * <p>This method favors speed over quality. When the new size is less than
     * half the longest dimension of the source image,
     * {@link #createThumbnail(BufferedImage, int)} or
     * {@link #createThumbnail(BufferedImage, int, int)} should be used instead
     * to ensure the quality of the result without sacrificing too much
     * performance.</p>
     *
     * @see #createThumbnailFast(java.awt.image.BufferedImage, int)
     * @see #createThumbnail(java.awt.image.BufferedImage, int)
     * @see #createThumbnail(java.awt.image.BufferedImage, int, int)
     * @param image the source image
     * @param newWidth the width of the thumbnail
     * @param newHeight the height of the thumbnail
     * @return a new compatible <code>BufferedImage</code> containing a
     *   thumbnail of <code>image</code>
     * @throws IllegalArgumentException if <code>newWidth</code> is larger than
     *   the width of <code>image</code> or if code>newHeight</code> is larger
     *   than the height of <code>image</code> or if one of the dimensions
     *   is &lt;= 0
     */
    public static BufferedImage createThumbnailFast(BufferedImage image,
                                                    int newWidth, int newHeight) {
        if (newWidth >= image.getWidth() ||
            newHeight >= image.getHeight()) {
            throw new IllegalArgumentException("newWidth and newHeight cannot" +
                                               " be greater than the image" +
                                               " dimensions");
        } else if (newWidth <= 0 || newHeight <= 0) {
            throw new IllegalArgumentException("newWidth and newHeight must" +
                                               " be greater than 0");
        }

        BufferedImage temp = createCompatibleImage(image, newWidth, newHeight);
        Graphics2D g2 = temp.createGraphics();
        g2.setRenderingHint(RenderingHints.KEY_INTERPOLATION,
                            RenderingHints.VALUE_INTERPOLATION_BILINEAR);
        g2.drawImage(image, 0, 0, temp.getWidth(), temp.getHeight(), null);
        g2.dispose();

        return temp;
    }

    /**
     * <p>Returns a thumbnail of a source image. <code>newSize</code> defines
     * the length of the longest dimension of the thumbnail. The other
     * dimension is then computed according to the dimensions ratio of the
     * original picture.</p>
     * <p>This method offers a good trade-off between speed and quality.
     * The result looks better than
     * {@link #createThumbnailFast(java.awt.image.BufferedImage, int)} when
     * the new size is less than half the longest dimension of the source
     * image, yet the rendering speed is almost similar.</p>
     *
     * @see #createThumbnailFast(java.awt.image.BufferedImage, int, int)
     * @see #createThumbnailFast(java.awt.image.BufferedImage, int)
     * @see #createThumbnail(java.awt.image.BufferedImage, int, int)
     * @param image the source image
     * @param newSize the length of the largest dimension of the thumbnail
     * @return a new compatible <code>BufferedImage</code> containing a
     *   thumbnail of <code>image</code>
     * @throws IllegalArgumentException if <code>newSize</code> is larger than
     *   the largest dimension of <code>image</code> or &lt;= 0
     */
    public static BufferedImage createThumbnail(BufferedImage image,
                                                int newSize) {
        int width = image.getWidth();
        int height = image.getHeight();

        boolean isWidthGreater = width > height;

        if (isWidthGreater) {
            if (newSize >= width) {
                throw new IllegalArgumentException("newSize must be lower than" +
                                                   " the image width");
            }
        } else if (newSize >= height) {
            throw new IllegalArgumentException("newSize must be lower than" +
                                               " the image height");
        }

        if (newSize <= 0) {
            throw new IllegalArgumentException("newSize must" +
                                               " be greater than 0");
        }

        float ratioWH = (float) width / (float) height;
        float ratioHW = (float) height / (float) width;

        BufferedImage thumb = image;

        do {
            if (isWidthGreater) {
                width /= 2;
                if (width < newSize) {
                    width = newSize;
                }
                height = (int) (width / ratioWH);
            } else {
                height /= 2;
                if (height < newSize) {
                    height = newSize;
                }
                width = (int) (height / ratioHW);
            }

            BufferedImage temp = createCompatibleImage(image, width, height);
            Graphics2D g2 = temp.createGraphics();
            g2.setRenderingHint(RenderingHints.KEY_INTERPOLATION,
                                RenderingHints.VALUE_INTERPOLATION_BILINEAR);
            g2.drawImage(thumb, 0, 0, temp.getWidth(), temp.getHeight(), null);
            g2.dispose();

            thumb = temp;
        } while (newSize != (isWidthGreater ? width : height));

        return thumb;
    }

    /**
     * <p>Returns a thumbnail of a source image.</p>
     * <p>This method offers a good trade-off between speed and quality.
     * The result looks better than
     * {@link #createThumbnailFast(java.awt.image.BufferedImage, int)} when
     * the new size is less than half the longest dimension of the source
     * image, yet the rendering speed is almost similar.</p>
     *
     * @see #createThumbnailFast(java.awt.image.BufferedImage, int)
     * @see #createThumbnailFast(java.awt.image.BufferedImage, int, int)
     * @see #createThumbnail(java.awt.image.BufferedImage, int)
     * @param image the source image
     * @param newWidth the width of the thumbnail
     * @param newHeight the height of the thumbnail
     * @return a new compatible <code>BufferedImage</code> containing a
     *   thumbnail of <code>image</code>
     * @throws IllegalArgumentException if <code>newWidth</code> is larger than
     *   the width of <code>image</code> or if code>newHeight</code> is larger
     *   than the height of <code>image or if one the dimensions is not &gt; 0</code>
     */
    public static BufferedImage createThumbnail(BufferedImage image,
                                                int newWidth, int newHeight) {
        int width = image.getWidth();
        int height = image.getHeight();

        if (newWidth >= width || newHeight >= height) {
            throw new IllegalArgumentException("newWidth and newHeight cannot" +
                                               " be greater than the image" +
                                               " dimensions");
        } else if (newWidth <= 0 || newHeight <= 0) {
            throw new IllegalArgumentException("newWidth and newHeight must" +
                                               " be greater than 0");
        }

        BufferedImage thumb = image;

        do {
            if (width > newWidth) {
                width /= 2;
                if (width < newWidth) {
                    width = newWidth;
                }
            }

            if (height > newHeight) {
                height /= 2;
                if (height < newHeight) {
                    height = newHeight;
                }
            }

            BufferedImage temp = createCompatibleImage(image, width, height);
            Graphics2D g2 = temp.createGraphics();
            g2.setRenderingHint(RenderingHints.KEY_INTERPOLATION,
                                RenderingHints.VALUE_INTERPOLATION_BILINEAR);
            g2.drawImage(thumb, 0, 0, temp.getWidth(), temp.getHeight(), null);
            g2.dispose();

            thumb = temp;
        } while (width != newWidth || height != newHeight);

        return thumb;
    }

    /**
     * <p>Returns an array of pixels, stored as integers, from a
     * <code>BufferedImage</code>. The pixels are grabbed from a rectangular
     * area defined by a location and two dimensions. Calling this method on
     * an image of type different from <code>BufferedImage.TYPE_INT_ARGB</code>
     * and <code>BufferedImage.TYPE_INT_RGB</code> will unmanage the image.</p>
     *
     * @param img the source image
     * @param x the x location at which to start grabbing pixels
     * @param y the y location at which to start grabbing pixels
     * @param w the width of the rectangle of pixels to grab
     * @param h the height of the rectangle of pixels to grab
     * @param pixels a pre-allocated array of pixels of size w*h; can be null
     * @return <code>pixels</code> if non-null, a new array of integers
     *   otherwise
     * @throws IllegalArgumentException is <code>pixels</code> is non-null and
     *   of length &lt; w*h
     */
    public static int[] getPixels(BufferedImage img,
                                  int x, int y, int w, int h, int[] pixels) {
        if (w == 0 || h == 0) {
            return new int[0];
        }

        if (pixels == null) {
            pixels = new int[w * h];
        } else if (pixels.length < w * h) {
            throw new IllegalArgumentException("pixels array must have a length" +
                                               " >= w*h");
        }

        int imageType = img.getType();
        if (imageType == BufferedImage.TYPE_INT_ARGB ||
            imageType == BufferedImage.TYPE_INT_RGB) {
            Raster raster = img.getRaster();
            return (int[]) raster.getDataElements(x, y, w, h, pixels);
        }

        // Unmanages the image
        return img.getRGB(x, y, w, h, pixels, 0, w);
    }

    /**
     * <p>Writes a rectangular area of pixels in the destination
     * <code>BufferedImage</code>. Calling this method on
     * an image of type different from <code>BufferedImage.TYPE_INT_ARGB</code>
     * and <code>BufferedImage.TYPE_INT_RGB</code> will unmanage the image.</p>
     *
     * @param img the destination image
     * @param x the x location at which to start storing pixels
     * @param y the y location at which to start storing pixels
     * @param w the width of the rectangle of pixels to store
     * @param h the height of the rectangle of pixels to store
     * @param pixels an array of pixels, stored as integers
     * @throws IllegalArgumentException is <code>pixels</code> is non-null and
     *   of length &lt; w*h
     */
    public static void setPixels(BufferedImage img,
                                 int x, int y, int w, int h, int[] pixels) {
        if (pixels == null || w == 0 || h == 0) {
            return;
        } else if (pixels.length < w * h) {
            throw new IllegalArgumentException("pixels array must have a length" +
                                               " >= w*h");
        }

        int imageType = img.getType();
        if (imageType == BufferedImage.TYPE_INT_ARGB ||
            imageType == BufferedImage.TYPE_INT_RGB) {
            WritableRaster raster = img.getRaster();
            raster.setDataElements(x, y, w, h, pixels);
        } else {
            // Unmanages the image
            img.setRGB(x, y, w, h, pixels, 0, w);
        }
    }
} 
```

代码块真的很长，我给它以防万一有人需要它，但大部分操作实际上是在前 54 行的顶部完成的。

无论如何，问题是透明图像被绘制到表单上，我看到了一个透明表单，如下所示：

![在此处输入图像描述](https://i.stack.imgur.com/spELg.png)

但是，JPanel 没有出现。我不明白我做错了什么。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-15T02:11:07.560

这是一个很好的理由，为什么（我们一再）建议您不要覆盖`paint`，尤其是在顶级容器上！

正如我在您[之前的问题](https://stackoverflow.com/questions/15982431/java-swing-transparent-png-permanently-captures-original-background/15983717#15983717)中所建议的那样（因为您未能提供完整的上下文而被责骂；））

`paint`负责调用`paintChildren`，奇怪的是，它绘制了所有子组件。现在你没有打电话，`super.paint`什么都没有画。

您遇到的问题是，在顶级容器上没有任何地方可以实际在孩子下方进行绘画。

相反，您应该自己创建一个自定义组件，例如 a`JPanel`并覆盖它的`paintComponent`方法并在那里渲染图像。然后将您的组件添加到其中。

别忘了打电话`super.paintComponent`

**更新链接**

确保您已阅读[AWT 和 Swing中的](http://www.oracle.com/technetwork/java/painting-140037.html)[自定义绘画](http://docs.oracle.com/javase/tutorial/uiswing/painting/)和绘画以了解更多详细信息

**更新了示例**

![在此处输入图像描述](https://i.stack.imgur.com/bE2CR.png)

```
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Dimension;
import java.awt.EventQueue;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.GridBagLayout;
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;
import java.awt.image.BufferedImage;
import java.io.IOException;
import javax.imageio.ImageIO;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.UIManager;
import javax.swing.UnsupportedLookAndFeelException;

public class TransparentWindow01 {

    public static void main(String[] args) {
        new TransparentWindow01();
    }

    public TransparentWindow01() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame("Testing");
                frame.setUndecorated(true);
                frame.setBackground(new Color(0, 0, 0, 0));
//                Java 6...
//                AWTUtilities.setWindowOpaque(frame, true);
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new TestPane());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

    public class TestPane extends JPanel {

        private BufferedImage image;

        public TestPane() {

            try {
                image = ImageIO.read(getClass().getResource("/5UNGbsr.png"));
            } catch (IOException ex) {
            }
            setOpaque(false);

            addMouseListener(new MouseAdapter() {
                @Override
                public void mouseClicked(MouseEvent e) {
                    if (e.getClickCount() == 2) {
                        System.exit(0);
                    }
                }
            });

            setLayout(new GridBagLayout());
            add(new JLabel("Look Ma, no hands!"));
        }

        @Override
        public Dimension getPreferredSize() {
            Dimension size = image == null ? super.getPreferredSize() : new Dimension(image.getWidth(), image.getHeight());
            System.out.println(size);
            return size;
        }

        @Override
        protected void paintComponent(Graphics g) {
            super.paintComponent(g);
            if (image != null) {
                Graphics2D g2d = (Graphics2D) g.create();
                int x = (getWidth() - image.getWidth()) / 2;
                int y = (getHeight() - image.getHeight()) / 2;
                g2d.drawImage(image, x, y, this);
                g2d.dispose();
            }
        }
    }
} 
```

# html - 为什么我页面中的隐藏链接仍然出现在 noscript 标签中？

> ID：16006622
> 
> 赞同：1
> 
> 时间：2013-04-15T02:06:34.570
> 
> 标签：html, noscript

我一直在制作一个简单的网站（目前只有一页）来显示一些基本信息。该站点还包含多个链接，可将用户引向可下载的内容（2 个指向 PDF 的链接和一个指向 zip 文件的链接）。

这些链接，就像我的大部分页面一样，`display:none`如果用户无法运行 JavaScript，则使用 CSS 属性隐藏，这是网站的几个功能所必需的。然后在`<noscript>`标签中显示一条消息，通知用户他们为什么看不到脚本内容。当我在我的个人计算机上预览文件而不托管它们时，这一切都运行良好。

我的问题是在 GoDaddy.com 上的网站上托管后出现的。现在，无论何时`<noscript>`调用（无论浏览器如何），我网站的每个链接都会被拉出并推到用户可以看到的左上角。CSS 样式似乎不会影响这些链接，我无法弄清楚如何摆脱它们。

我该如何解决这个问题？最重要的是，除非我再次将它们设置为可见，否则如何使链接消失？

这是我的`<noscript>`标签，在页面底部：

```
<noscript>
    <div class="scriptError">
        <h1>Javascript is disabled!</h1>
        <div id="noScriptNotice">
            <p>This site works best with Javascript enabled. A 'noscript-friendly' version is currently in progress, but for now please enable Javascript to view the contents.</p>
        </div>
    </div>
</noscript> 
```

其他所有内容（包括链接）都在此 div 内：

```
<div class="scriptedContent" style="display: none;">
<script>
    //If scripting is enabled, display the site.
    $(".scriptedContent").css("display", "block");
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T02:17:01.593

如果它在您自己的本地主机上运行，​​而不是在 Godaddy.com 上运行，您应该首先尝试提交支持票以查看是否提供任何帮助。

重新出现的链接，看看您是否可以将此 CSS 样式应用于您尝试隐藏的链接：

```
font-size: 0;
text-decoration: none; 
```

这应该可以隐藏链接，也就是说，如果您的 CSS 完全影响它们。如果没有，请尝试在页面的“右键>查看源”，然后查看并与您自己的源进行比较。

**如果这不起作用，则另一种方法：** 尝试使您的链接（在 HTML 代码中）类似于以下内容：

```
<a href="#" style="display:none;"> Text </a> 
```

并查看这是否会阻止它们覆盖您的样式。

# simulation - RTL 模拟与 Delta 循环模拟

> ID：16006624
> 
> 赞同：0
> 
> 时间：2013-04-15T02:06:40.877
> 
> 标签：simulation, verilog, register-transfer-level, asic

有人可以详细说明一下“RTL 模拟比 delta-cycle 模拟快，但不能在所有情况下都使用”？不知道什么Delta循环模拟

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T10:20:41.250

在 Verilog 模拟中，增量周期是模拟器用来计算下一个值的周期。

进入组合部分时，模拟器将使用许多增量周期来解决答案所需的依赖关系。如果您的组合循环没有被触发器分解，则模拟器可能会卡住不断重复循环以尝试解决依赖关系，由于循环，这是不可能的。如果你得到一个只是挂起的模拟，这通常是原因。

非阻塞赋值 ( `<=`) 使用 delta 循环，通过解析右侧的值（可能有许多 delta 循环），然后一个 delta 循环稍后将这些分配给左侧。

```
a<=b;
b<=a; 
```

在上面的简单情况下，b 和 a 被复制到临时位置（想想 next_a next_b）。然后一个增量周期，a 被分配给 next_a，b 被分配给 next_b。

还有其他零时间结构不使用测试台中经常使用的增量周期进行建模。我没有这些经验，希望另一个答案可以描述那里的用途。

# javascript - Javascript中这个Coffescript代码的等价物是什么？

> ID：16006625
> 
> 赞同：-2
> 
> 时间：2013-04-15T02:07:05.917
> 
> 标签：javascript, coffeescript

```
phantom = require 'phantom'

phantom.create (ph) ->
  ph.createPage (page) ->
    page.open "http://www.google.com", (status) ->
      console.log "opened google? ", status
      page.evaluate (-> document.title), (result) ->
        console.log 'Page title is ' + result
        ph.exit() 
```

我尝试使用这个网站，但它似乎不是很准确。它到处都有回报。 [http://js2coffee.org/#coffee2js](http://js2coffee.org/#coffee2js)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T02:10:27.303

**更新：**再看一遍，其中一些回报似乎是虚假/冗余的。那是因为 Coffeescript 总是返回函数中最后一条语句的结果（以便您可以保存`return`关键字），即使在您不会在 Javascript 中返回任何内容的情况下（编译器在这里无法知道您的意图）。这可能是不必要的，但如果没有人使用返回值，它也没有什么害处。如果返回“无”很重要，您也可以明确地这样做。

* * *

你可以编译它，看看它会产生什么结果：

```
var phantom;

phantom = require('phantom');

phantom.create(function(ph) {
  return ph.createPage(function(page) {
    return page.open("http://www.google.com", function(status) {
      console.log("opened google? ", status);
      return page.evaluate((function() {
        return document.title;
      }), function(result) {
        console.log('Page title is ' + result);
        return ph.exit();
      });
    });
  });
}); 
```

* * *

> 它到处都有回报。

好吧，您在那里定义的每个函数都有一个返回值。

Coffeescript 的主要动机之一是能够用更少的样板编写所有这些回调函数。

无论哪种方式，编译器都是“准确的”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T02:11:49.913

```
var phantom = require('phantom');

phantom.create(function(ph)) {

    ph.createPage(function(page) {

        page.open("http://www.google.com", function(status) {

            console.log("opened google? ", status);

            page.evaluate(function() { return document.title; }, function() {

                console.log('Page title is ' + result);
                ph.exit()

            }
        });
    });
}); 
```

# authentication - 您如何在 /auth/basic 中从 servicestack 基本身份验证请求会话？

> ID：16006627
> 
> 赞同：3
> 
> 时间：2013-04-15T02:07:39.153
> 
> 标签：authentication, servicestack, basic-authentication

我已经使用第一个示例设置了具有基本身份验证的 servicestack 服务，这里： [https ://github.com/ServiceStack/ServiceStack/wiki/Authentication-and-authorization](https://github.com/ServiceStack/ServiceStack/wiki/Authentication-and-authorization)

这会自动设置一个路由：/auth/basic 但是，我找不到任何关于如何格式化对该 URL 的请求的信息或示例（变量/GET/POST/Auth Header 等）。

我能够使用基本身份验证凭据访问一个简单的服务，因此它们是活动且正确的。

我没有插入自定义身份验证，只是基本身份验证。

我努力了：

*   使用 JsonServiceClient 通过 GET 或 Json POST 将 UserName 和 Password 变量发送到 /auth/basic，带有和不带有也包含用户和密码的 Auth 标头。

*   使用浏览器发送带有用户/密码的 URL 参数的 GET 请求，或者作为`http://user:pass@localhost:123/auth/basic`

我总是得到“HTTP/1.1 401 Invalid BasicAuth credentials”。

我能找到的唯一示例涉及某种自定义身份验证，然后访问 /auth/credentials，但我想使用 /auth/basic

我查看了代码，看起来它读取了一个 Auth 标头，但该服务不接受一个。

我实际上是在尝试让它工作，所以我可以禁用它并验证它是否被禁用（我想对每个请求都要求基本身份验证）。

**问题是：**

*   调用 /auth/basic 服务的正确方法是什么？我将采用 servicestack 客户端 API 示例、规范甚至是原始 http 请求！

*   您如何完全禁用 /auth 服务？

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T04:00:12.127

**调用 /auth/basic 服务的正确方法是什么？我将采用 servicestack 客户端 API 示例、规范甚至是原始 http 请求！**

```
var client = new JsonServiceClient("http://localhost:56006/api");
var resp = client.Post(new Auth() { UserName = "TestUser", Password = "Password" }); 
```

*   这假设您还注册了一个`ICacheClient`和`IAuthUserRepository`（并添加了一个用户帐户）

如果您调用 JSON 格式，则如下所示`/auth/basic?format=json`

```
{
  "UserName": "admin",
  "Password": "test"
  "RememberMe": true
} 
```

**您如何完全禁用 /auth 服务？**

不要将`AuthFeature`插件添加到配置中。

您还可以[删除插件](https://github.com/ServiceStack/ServiceStack/wiki/Plugins#plugin-api)

```
Plugins.RemoveAll(x => x is AuthFeature); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-15T05:08:52.360

将以下内容放入 apphost 配置中似乎可以解决问题。

```
//Disable most things, including SOAP support, /auth and /metadata routes
SetConfig(new EndpointHostConfig()
{
    EnableFeatures = Feature.Json | Feature.Xml
}); 
```

我有点怀疑这对 /auth 有什么影响，因为它返回一个空响应，而大多数路由返回 404。

那么，这真的会禁用 /auth 功能吗？例如，如果有人对 /auth/credentials 提出了正确的请求，它还会返回一个空响应吗？

# internet-explorer - A4J reRender 在 IE9 上不起作用 [在 IE8 上工作]

> ID：16006629
> 
> 赞同：0
> 
> 时间：2013-04-15T02:08:03.847
> 
> 标签：internet-explorer, web, richfaces, ajax4jsf, rerender

这个想法是`store combobox`基于在`customer combobox`. 这是一个代码片段：

客户组合框：

```
<rich:comboBox directInputSuggestions="true" width="220"
      listStyle="text-align:left;" enableManualInput="false"
      id="customerList" value="#{gpsReport.selectedCustomer}" >

      <a4j:support actionListener="#{gpsReport.selectCustomer}"
            event="onchange" reRender="storeList"
            ajaxSingle="true" limitToList="true" />

      <f:selectItems value="#{gpsReport.customers}" />

</rich:comboBox> 
```

存储组合框：

```
<rich:comboBox directInputSuggestions="true" width="220"
      listStyle="text-align:left;" enableManualInput="false"
      id="storeList" value="#{gpsReport.selectedStore}">

      <a4j:support actionListener="#{gpsReport.selectStore}"
             event="onchange"
             ajaxSingle="true" limitToList="true" />

      <f:selectItems value="#{gpsReport.stores}" />

</rich:comboBox> 
```

这实际上适用于 IE8。但是，在 IE9 上，更改 Customer Combobox 的值会删除 Stores Combobox。我想知道发生了什么。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T12:02:43.967

RichFaces 3.x 不支持 IE9。有关更多详细信息，请参阅此答案： [https ://stackoverflow.com/a/7326359/854386](https://stackoverflow.com/a/7326359/854386)

# python - 如何在消除重复项的同时按出现频率和字母顺序（如果出现平局）组织列表？

> ID：16006630
> 
> 赞同：8
> 
> 时间：2013-04-15T02:08:07.847
> 
> 标签：python, frequency

基本上，如果给出一个列表：

```
data = ["apple", "pear", "cherry", "apple", "pear", "apple", "banana"] 
```

我正在尝试创建一个返回如下列表的函数：

```
["apple", "pear", "banana", "cherry"] 
```

我试图让返回列表首先按最常出现的单词排序，同时通过按字母顺序排列它们来打破平局。我也试图消除重复。

我已经列出了每个元素的计数和数据中每个元素的索引。

```
x = [n.count() for n in data]
z = [n.index() for n in data] 
```

我不知道从这一点开始。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-15T02:16:12.500

你可以这样做：

```
from collections import Counter

data = ["apple", "pear", "cherry", "apple", "pear", "apple", "banana"]

counts = Counter(data)
words = sorted(counts, key=lambda word: (-counts[word], word))

print words 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-15T02:17:37.380

对于您可以使用的按频率排序元素，请参阅[此处](http://docs.python.org/2/library/collections#collections.Counter.most_common)`collections.most_common`的文档，例如

```
from collections import Counter

data = ["apple", "pear", "cherry", "apple", "pear", "apple", "banana"]
print Counter(data).most_common()
#[('apple', 3), ('pear', 2), ('cherry', 1), ('banana', 1)] 
```

感谢@Yuushi，

```
from collections import Counter

data = ["apple", "pear", "cherry", "apple", "pear", "apple", "banana"]
x =[a for (a, b) in Counter(data).most_common()]

print x
#['apple', 'pear', 'cherry', 'banana'] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T02:45:43.377

这是一个简单的方法，但它应该有效。

```
data = ["apple", "pear", "cherry", "apple", "pear", "apple", "banana"]

from collections import Counter
from collections import defaultdict

my_counter = Counter(data)

# creates a dictionary with keys
# being numbers of occurrences and
# values being lists with strings
# that occured a given time
my_dict = defaultdict(list)
for k,v in my_counter.iteritems():
    my_dict[v].append(k)

my_list = []

for k in sorted(my_dict, reverse=True):
    # This is the second tie-break, if both
    # strings showed up the same number of times
    # and correspond to the same key, we sort them
    # by the alphabetical order
    my_list.extend(sorted(my_dict.get(k))) 
```

结果：

```
>>> my_list
['apple', 'pear', 'banana', 'cherry'] 
```

# c# - 如何根据listitem对arraylist进行排序

> ID：16006631
> 
> 赞同：2
> 
> 时间：2013-04-15T02:08:14.427
> 
> 标签：c#, asp.net, .net

我有 arraylist，其中 listitem 包含日期和一些字符串。我想根据日期对这个 Arraylist 进行排序。我有以下数组列表项的伪代码。

```
ArrayList _arListDAte = new ArrayList();
//foreach loop for DAtatable rows
ListItem lstitem = new ListItem();
//here is condition for assigning text to lstitem
//if condition match
lstitem.Text = Today.Date() + ' - Allowed'
//else
lstitem.Text = Today.Date() + ' - Not allowed'

listitem.value = datarow[id]+'-M'; 
```

所以最后我的 Arraylist 包含以下数据
Text VALue
11-04-2013 - 允许 120-M
5-01-2013 - 允许 101-M
2-02-2013 - 允许 121-M
8-8-2012 - 不允许 126-NM

我想按日期升序对这个数组列表进行排序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T02:31:50.353

定义一个自定义比较器：

```
public class DateComparer: IComparer  {

int IComparer.Compare( Object x, Object y )  {
    String a = (x as ListItem).Text;
    String b = (y as ListItem).Text;

    DateTime aDate = DateTime.Parse(a.split(null)[0]);
    DateTime bDate = DateTime.Parse(b.split(null)[0]);
    return DateTime.Compare(aDate, bDate);        
  }
} 
```

并在您的代码之后调用它：

```
IComparer comp = new DateComparer();
arListDAte.Sort(comp); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T03:00:42.340

如果您定义一个具有 DateTime 成员的自定义类而不是使用 ListItem 类，它会变得更简单。这可以避免在处理保存为字符串的 DateTime 值时出现任何与文化相关的问题。

```
static void Main()
{
    ArrayList _arListDAte = new ArrayList();
    CustomListItem listItem = new CustomListItem();
    bool condition = true;
    DateTime date = new DateTime(2013, 04, 15);
    if(condition)
    {
       listItem.Text = date + " - Allowed";
       listItem.Date = date;
    }
    else
    {
       listItem.Text = date + " - Allowed";
       listItem.Date = date;
    }
    _arListDAte.Add(listItem);

    listItem = new CustomListItem();
    date = new DateTime(2013, 04, 13);
    if (condition)
    {
       listItem.Text = date + " - Allowed";
       listItem.Date = date;
    }
    else
    {
       listItem.Text = date + " - Allowed";
       listItem.Date = date;
    }
    _arListDAte.Add(listItem);

    listItem = new CustomListItem();
    date = new DateTime(2013, 04, 18);
    if (condition)
    {
       listItem.Text = date + " - Allowed";
       listItem.Date = date;
    }
    else
    {
       listItem.Text = date + " - Allowed";
       listItem.Date = date;
    }
    _arListDAte.Add(listItem);

    _arListDAte.Sort();

 }

 public class CustomListItem : IComparable
 {
     public string Text { get; set; }
     public string Value { get; set; }
     public DateTime Date { get; set; }

     //Sort Ascending Order
     public int CompareTo(object obj)
     {
         CustomListItem customListItem = obj as CustomListItem;
         if (customListItem != null)
             return this.Date.CompareTo(customListItem.Date);
         return 0;
     }

     // Uncomment for descending sort
     //public int CompareTo(object obj)
     //{
     //    CustomListItem customListItem = obj as CustomListItem;
     //    if (customListItem != null)
     //        return customListItem.Date.CompareTo(this.Date);
     //    return 0;
     //}
 } 
```

# model-view-controller - 将值传递到强类型 MVC 2 视图中？

> ID：16006632
> 
> 赞同：0
> 
> 时间：2013-04-15T02:08:25.093
> 
> 标签：model-view-controller, asp.net-mvc-2, view, model, controller

全部。

我对微软新的模型视图控制器实现比较陌生。我正在 MVC 2 中创建一个应用程序。

我有一个名为“CreateAlbum”的强类型视图，它与名为“Album”的模型类相关联。该视图中显示的所有信息都来自“相册”模型。我需要在“CreateAlbum”视图中显示来自两个列表（不在“Album”模型中）的数据。

这两个列表的内容是在名为“CreateAlbum()”的 Action 方法中创建的。

*   如何将在操作方法中创建的两个列表传递给强类型视图？
*   一旦我将这两个列表传递到强类型视图中，我需要将每个列表中的信息绑定到一个下拉列表。我该怎么做？

同样，请注意这是 MVC 2。我看到的答案都是特定于 MVC 3。任何帮助将不胜感激。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-12T10:29:48.613

一种可能的解决方案是创建一个 AlbumViewModel 类，该类将保存 Album 模型作为属性和两个填充列表的函数，无需其他操作方法。

您的视图 CreateAlbum 将获取 AlbumViewModel 作为其模型，并在 CreateAlbum 的 [post] 操作中指定一个 Bind Prefix，以便您在控制器操作中拥有一个相册：

```
public ActionResult CreateAlbum([Bind(Prefix = "AlbumData")] Album) 
```

# android - 使用 Android 连接到 SQL Azure

> ID：16006634
> 
> 赞同：0
> 
> 时间：2013-04-15T02:08:35.813
> 
> 标签：android, azure-sql-database

任何帮助将不胜感激。我正在尝试连接到 SQL Azure 数据库以从表中提取数据。我一直在寻找一个很好的例子，但找不到一个。我找到了这篇文章[Connecting SQL Azure with Android](https://stackoverflow.com/questions/9799567/connecting-sql-azure-with-android) and try，但是当它尝试连接时它崩溃了。

我们在 SQL Azure 中有几个表，每个表中有大约 500 条记录。我需要从 Android 设备连接到它并将数据提取到本地数据库（SQLite）中。有没有人有一个很好的例子来说明如何连接到 SQL Azure 来提取数据？我尝试使用在 ASYNCTASK 函数下编写的 JDBC，但它不起作用。它在尝试建立连接时崩溃。

你能给我一些建议什么是最好的方法：JDBC、Azure 移动服务或其他方法。如果你有例子，我将不胜感激。

谢谢，

蒂姆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T06:19:00.250

通常直接连接不是一个好主意。您是否考虑过实现一个 API 来同步。同步框架也可能有帮助[http://msdn.microsoft.com/en-US/sync](http://msdn.microsoft.com/en-US/sync)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T12:46:00.907

我建议您查看[Azure 移动服务](http://www.windowsazure.com/en-us/develop/mobile/tutorials/get-started-android/)

这样，您不必打开 Azure SQL 并直接连接到它。

# php - Wordpress XMLRPC API post (html) 错误解析错误格式不正确

> ID：16006640
> 
> 赞同：2
> 
> 时间：2013-04-15T02:09:33.913
> 
> 标签：php, xml, wordpress, xml-rpc

我正在使用 Wordpress 的 XMLRPC API 和 WP API 的 IXR_Library php 类。如果我在帖子的正文/内容中使用纯文本或仅简单文本，wp.newPost 工作正常，但是当我发布自动创建的完整 html/短代码内容时，它总是给我这个错误

```
Array ( [faultCode] => -32700 [faultString] => parse error. not well formed ) 
```

我要发布的内容是我通常在 WP 中使用短代码的帖子内容，但我想使用 API 通过 php 发布它，因为我正在尝试自动化我的博客。
您可以查看我尝试在下面发布的正文/内容
[http://pastebin.com/U94XVZGT](http://pastebin.com/U94XVZGT)
这就是以 XML 调试模式显示的内容（可能似乎已经 html 编码）
下面是通过调试返回的完整 XML 调用和响应，已从中删除用户/密码
[http://pastebin.com/26Nyx97K](http://pastebin.com/26Nyx97K)

我真的很感激任何可能的帮助，我已经尝试过 php 的 htmlentities 和 htmlspecialchar 函数来编码我的身体，甚至尝试用 str_replace 替换 [] 括号，因为它们可能会导致它

同样，这当然是由于内容代码，因为我尝试了一个 Hello World 纯内容并且它有效 ----------------------------- -------------------------------
一个更新，刚才我是使用 $_POST 从 textarea 获取 html 内容我尝试在同一个变量中使用相同的内容，但在内容主体周围使用了 ' ' 单引号，现在发布作品，但出现错误

`Warning: strpos(): Empty delimiter in wp-includes/class-wp-xmlrpc-server.php on line 4338`

所以如果我使用 $body=$_POST['body']; 它不起作用并给出主要错误，但直接使用 $body=' htmlcontent inside '; 有效，但给出了上述 strpos 错误

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2017-07-27T06:49:48.020

请尝试添加**xml 包：**

> sudo apt-get 安装 php-xml

，这解决了我的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T17:14:55.387

对于其他遇到此问题的人，我已解决。最后，问题似乎是由于错误的字符编码，我需要传递 UTF8，但内容是以其他一些字符编码（Windows 1）传递的，使得一些文本和其他语言无法解析，我修改了我的代码以使它UTF 8，现在它可以工作了

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-02-03T15:35:03.663

我已将密码更改为不包含任何符号，它解决了这个问题。

我仍然不确定最初是什么破坏了一切，但您不妨尝试更改它并重试，看看是否适合您。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-06T02:01:39.240

对于遇到此问题的其他任何人，它也可能与 WordPress 错误 #18310 有关。

[在http://core.trac.wordpress.org/attachment/ticket/18310/18310-3.diff](http://core.trac.wordpress.org/attachment/ticket/18310/18310-3.diff)上有一个 WordPress 补丁

[在http://core.trac.wordpress.org/ticket/18310](http://core.trac.wordpress.org/ticket/18310)上查看关于他们的 trac 安装的 WordPress 错误报告

# java - 对话框只有第一个选项有效

> ID：16006641
> 
> 赞同：0
> 
> 时间：2013-04-15T02:09:50.990
> 
> 标签：java, android, dialog

我正在尝试从列表视图 onItemLongCLick 激活一个 SingleChoiceItems 对话框，该对话框通过单选按钮 1.View Profile 2.Send Message 3.Delete Friends 有 3 个选项，从我设置它的方式来看，只有第一个选项 toast 适用于所有3个选项。我如何让选项 2 和 3 执行他们的操作而不是执行选项 1 的操作？

这是我的对话框的代码，

```
@Override
public Dialog onCreateDialog(int id) {
    String[] items = { "View Profile", "Send Message", "Remove Friend" };
    final DBAdapter db = new DBAdapter(this);
    db.open();

    switch (id) {
    case 0:
        return new AlertDialog.Builder(this)
                .setIcon(R.drawable.icon)
                .setTitle("Select a option")
                .setSingleChoiceItems(items, id,
                        new DialogInterface.OnClickListener() {

                            @Override
                            public void onClick(DialogInterface dialog,
                                    int which) {
                                int choice = 0;
                                // TODO Auto-generated method stub
                                mChoice = choice;
                            }
                        })

                .setPositiveButton("OK", new OnClickListener() {

                    @Override
                    public void onClick(DialogInterface dialog, int choice) {
                        // TODO Auto-generated method stub
                        if (mChoice == 0) {
                            Toast.makeText(getBaseContext(), "Test 1",
                                    Toast.LENGTH_SHORT).show();
                        } else if (mChoice == 1) {
                            Toast.makeText(getBaseContext(), "Test2",
                                    Toast.LENGTH_SHORT).show();
                        } else if (mChoice == 2) {
                            TextView friends = (TextView) findViewById(R.id.textview_friends);
                            String deletedfriend = friends.getText()
                                    .toString();
                            db.DeleteFriends(deletedfriend);
                            Toast.makeText(getBaseContext(),
                                    "Friend Removed", Toast.LENGTH_SHORT)
                                    .show();
                        }
                    }
                }

                )

                .setNegativeButton("Cancel", new OnClickListener() {
                    @Override
                    public void onClick(DialogInterface dialog, int choice) {

                    }
                })

                .create();

    }
    return null;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T02:25:44.560

删除选择 = 0;

```
.setSingleChoiceItems(items, id,
                    new DialogInterface.OnClickListener() {

                        @Override
                        public void onClick(DialogInterface dialog,
                                int which) {

                            mChoice = which;
                        }
                    }) 
```

# java - 在 JPanel 上显示格式化字符串

> ID：16006645
> 
> 赞同：4
> 
> 时间：2013-04-15T02:10:14.037
> 
> 标签：java, swing, user-interface, jlabel

我有一个方法返回一个格式如下的字符串：

```
myString += "1\. Hello\n" +
            "2\. Goodbye\n"; 
```

我正在尝试将其显示为 JLabel 但它正在出现

```
1\. Hello 2\. Goodbye 
```

除了用 HTML 格式化字符串之外，还有没有办法用换行符显示字符串，或者除了 JLabel 之外还有其他方法可以正确显示信息吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T02:23:58.940

对于列表数据，请改用 a [`JList`](http://docs.oracle.com/javase/tutorial/uiswing/components/list.html)。

如果这确实是文本数据，请使用 (noneditable) [`JTextArea`](http://docs.oracle.com/javase/tutorial/uiswing/components/textarea.html)。

# xcode - 有没有办法让 XCode 构建设置根据构建操作（例如清理、重建）而变化？

> ID：16006648
> 
> 赞同：6
> 
> 时间：2013-04-15T02:10:39.953
> 
> 标签：xcode, scons, xcodebuild

我正试图弄清楚它们是如何`schemes`工作的`xcode`以及它们的用途。我有一个使用外部构建系统 ( `scons`) 在 OS X 上构建的跨平台产品。我希望能够从**构建/调试**它`Xcode`，主要是因为符号搜索和调试器。我一直在使用`eclipse CDT`其中大部分效果很好，但有一些怪癖。

我可以通过创建一个空项目并添加一个**“外部构建系统”**目标来实现这一点。然后，作为目标**“信息”**的一部分，我将**“构建工具”**指定为**/usr/local/bin/scons**，**“参数”**是我发送给 scons 的构建参数。基本上，我调用了以下构建变量`$(TARGET)`，这些变量`$(BUILD_TYPE)`根据构建是调试还是发布而有所不同，因此可以将它们指定为有条件**的 'Build Settings'**。

问题是我想`Menu->Project->Clean`工作。看起来像`Xcode/xcodebuilder`使用`$(ACTION)`变量来传递它 - **'build'**，**'clean'**`$(ACTTION)`或其他一些构建操作在哪里。请参阅[xcodebuild 操作](https://developer.apple.com/library/mac/#documentation/DeveloperTools/Reference/XcodeBuildSettingRef/1-Build_Setting_Reference/build_setting_ref.html#//apple_ref/doc/uid/TP40003931-CH3-SW45)。Scons 有点不同 - 它有一个内置的清理操作，可以在命令行上调用. 所以我的第一个想法是使用有条件**的“构建设置”**来传递此参数，但事实证明，有条件**的“构建设置”**似乎不会因构建而异——只是构建架构和 SDK。****`scons -c`****`ACTION`********

 ******是否可以将表达式添加到**“构建设置”**中`Xcode/xcodebuilder`？还有另一种好方法可以让我**“干净”**地`Xcode`与 scons 一起工作吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-15T02:51:14.563

为 编写一个包装脚本`SCons`，并将其放入您的项目中。例如：

### 外部构建工具配置

*   构建工具：`$(PROJECT_DIR)/scons-xcode-wrapper.sh`
*   论据：`$(ACTION)`

### 包装脚本

从一个实验来看，它看起来`$(ACTION)`在构建时是空的，并且`clean`在清洁时设置为。

```
#!/bin/sh
cd "$PROJECT_DIR"
case $1 in
  clean)
    scons -c
    ;;
  *)
    scons
    ;;
esac 
```

不要忘记`chmod +x`你的脚本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T12:44:15.483

使用 SCons，您可以以*编程*`SetOption()`方式设置构建以使用该函数执行清理。[此处](http://www.scons.org/doc/production/HTML/scons-user/c2092.html#sect-command-line-option-strings)`clean`列出了可以设置的选项和其他选项。

问题是 SCons 将非“--option”或“option=value”形式的命令行选项视为目标。所以它不可能导致像`scons clean`执行清洁这样的事情。我使用 Alias() 函数进行了测试，但无法使其正常工作。

如果您可以选择将 xcode 用于的字符串更改为`$(ACTION)`类似`clean=1`的内容，那么您可以通过以下方式以*编程*方式进行清理：

```
env = Environment()

if ARGUMENTS.get('clean') == '1':
    print "Setting clean"
    env.SetOption('clean', True)

print env.GetOption('clean')
... 
```

这将导致一个干净的：

```
scons clean=1 
```

您也可以考虑`AddOption()`, 但这仅允许带有`--`前缀的选项

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-05-27T14:07:49.587

将您的“参数”参数设置为以：

```
--$(ACTION) 
```

这将转化为：

```
scons [all your arguments] --clean 
```

[如果您在此处](http://www.scons.org/doc/1.0.0/HTML/scons-user/c1965.html#sect-command-line-option-strings)查看 scons 的文档，您会发现它`--clean`的效果与`-c`

清洁是唯一有效的方法，但其他构建操作总是空白。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-05-03T16:57:33.173

您可以使用上述答案的组合，即：

1.  将您的论点设置为类似`--xcode-action=$(ACTION)`.

2.  像这样将代码放入您的 SConstruct 中：

    ```
    env.AddOption('--xcode-action',
                  dest='xcode_action',
                  type='string',
                  action='store',
                  default='',
                  help='The action Xcode wishes to perform')

    if GetOption('xcode_action') == 'clean':
        SetOption('clean', True) 
    ```

这基本上是我在[scons-xcode](https://bitbucket.org/al45tair/scons-xcode)中使用的解决方案。******

# jquery - 如何使 Paypal 按钮发布异步？

> ID：16006649
> 
> 赞同：0
> 
> 时间：2013-04-15T02:10:40.023
> 
> 标签：jquery, paypal

我想使用 jquery Ajax 将表单值发送到贝宝。我不希望 Paypal 打开一个显示购物车的窗口，因为我只是将一个项目添加到购物车中。稍后我将使用查看购物车按钮显示购物车。

```
<form name="_xclick" target="paypal" action="https://www.paypal.com" method="get">
<input type="hidden" name="cmd" value="_cart">
<input type="hidden" name="business" value="XXXXXXXXXXXXXX">
<input type="hidden" name="currency_code" value="USD">
<input type="hidden" name="item_name" value="HTML book">
<input type="hidden" name="amount" value="24.99">
<input type="image" src="http://www.paypal.com/en_US/i/btn/btn_cart_LG.gif" border="0"      name="submit" alt="Make payments with PayPal - it's fast, free and secure!">
<input type="hidden" name="add" value="1">
</form> 
```

这是我尝试使用的 jquery：

```
var a=$('_xclick').serialize();
$.ajax({
    type:'get',
    url:'https://www.paypal.com'
    }

}); 
```

这仍然会打开一个新的贝宝窗口，显示他们的购物车。有没有解决的办法 ？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T13:03:35.140

使用添加到购物车按钮时，每次向其中添加商品时，它都会打开购物车窗口。如果您不希望发生这种情况，您可能需要使用购物车上传方法而不是添加到购物车按钮。购物车上传方法是 3rd 方购物车使用的方法。购物车或您的网站会跟踪买家添加到购物车的内容，然后在结帐时买家准备付款时，您会将他们重定向到 PayPal，并将购物车中的所有商品发送到 PayPal . [您可以在此处](https://www.x.com/developers/paypal/documentation-tools/paypal-payments-standard/integration-guide/cart_upload)找到有关购物车上传命令的更多信息。

# command-line - 如何使用 cmd ( 命令行 ) 创建 windows phone 项目？

> ID：16006650
> 
> 赞同：1
> 
> 时间：2013-04-15T02:10:40.297
> 
> 标签：command-line, cmd, windows-phone, new-project

如何使用 cmd ( 命令行 ) 创建 windows phone 项目？

# iphone - 用 NSArray 填充 UITableView 第 0 行静态和其余部分

> ID：16006661
> 
> 赞同：0
> 
> 时间：2013-04-15T02:12:00.280
> 
> 标签：iphone, ios, objective-c, uitableview

在我的应用程序的一个部分中，我有一个`UITableView`现在工作正常。我想将行设置`0` `cell.textLabel.text`为`@"Some string"`. 设置行`0`后，我想从数组中加载其余行。目前在加载我的数组填充表格视图，但我正在尝试将 row 设置`0`为*sticky*。我能想到的最接近的例子是一个论坛主题，它被设置为保持在顶部。我的数组由 Web 服务调用返回的数据构成。

自从我弄乱表格视图以来已经有一段时间了，我对此一无所知。表格视图是 1 部分，我通过计算数组中的元素来获取行。因为我想创建一个额外的单元格（行`0`），所以我会调用`[array count] + 1`. 我不知道这种方法是否是最好的方法，这就是我在这里接触社区的原因。

在这一点上，任何洞察力或朝着正确方向推进都会很棒。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T02:15:54.863

你在正确的轨道上：

```
-(NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
    return [array count]+1;
}

-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath    *)indexPath {
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"Cell"];
    if ([indexPath row] == 0) {
        // Code for first
        [[cell  textLabel] setText:@"First cell"];
    } else {
        [[cell textLabel] setText:[array objectAtIndex:[indexPath row]-1]];
    }
    return cell;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T02:15:11.637

如果您希望表格的顶部是“粘性的”，为什么不考虑使用该字符串作为部分标题或标题？在这种情况下，标题始终可见，直到下一部分（例如，如果您有两个部分）完全显示在屏幕上。

无论如何，在我当前的一个项目中，我需要做与您正在做的事情大致相同的事情，并且我在第 0 行中返回了一个静态字符串（当表格视图向下滚动时，它会从屏幕顶部滚动）。

在我的 UITableViewDataSource 方法中，我总是将静态单元格添加到我的数组中的对象数中，在我的“ `cellForRowAtIndexPath:`”方法中，当 indexPath.row 不为零时，我将行加一。如果它为零，我返回我的静态字符串。

dark_knight 提供了一些很好的示例代码来说明我向您描述的内容。所以给他/她+1。

# jquery - Twitter Bootstrap：希望警报不会将页面的其余部分向下移动

> ID：16006666
> 
> 赞同：4
> 
> 时间：2013-04-15T02:12:45.253
> 
> 标签：jquery, ruby-on-rails, twitter-bootstrap

所以说在我的用户注册（使用设计）中，我在注册页面的最顶部收到了错误消息。

```
<% if @user.errors.any? %>
  <div class="alert alert-error">
    <button type="button" class="close" data-dismiss="alert">&times;</button>
    <%= devise_error_messages! %>
  </div>
<% end %>

<div><%= f.label :email %><br />
<%= f.email_field :email %></div>

<div><%= f.submit "Sign up" %></div> 
```

但是，当我什么都不输入，尝试注册并得到错误时，页面的其余部分将向下移动。我试图让错误只出现在页面上方，然后有表单，这样我就可以关闭它并且那里什么都没有（关闭时页面没有移动）。

例如在 Twitter.com，尝试在没有信息的情况下登录，Twitter 会在一个不会向下移动页面的黑色弹出框中询问您是否是人类。

我不知道如何让引导程序来做到这一点。

我说的是：http: [//i.imgur.com/UUYLkax.jpg](http://i.imgur.com/UUYLkax.jpg)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-15T02:16:14.287

Twitter 有一个 div 可以`position: fixed;`为他们解决问题，然后他们有一个 div 和 div`message`里面的`alert-messages`类。

```
.alert-messages {
  position: fixed;
  top: 47px;
  left: 0;
  right: 0;
  z-index: 7000;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-15T02:16:12.337

尝试使用模式： http: [//getbootstrap.com/javascript/#modals](http://getbootstrap.com/javascript/#modals)

```
<!-- Button to trigger modal -->
<a href="#myModal" role="button" class="btn" data-toggle="modal">Launch demo modal</a>

<!-- Modal -->
<div id="myModal" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-header">
    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
    <h3 id="myModalLabel">Modal header</h3>
  </div>
  <div class="modal-body">
    <p>One fine body…&lt;/p>
  </div>
  <div class="modal-footer">
    <button class="btn" data-dismiss="modal" aria-hidden="true">Close</button>
    <button class="btn btn-primary">Save changes</button>
  </div>
</div> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-03T19:52:32.760

实际上找到了最好的方法来做到这一点。

首先，在[Nijikokun 的 bootstrap-notify](https://github.com/Nijikokun/bootstrap-notify)下载文件并将它们放入您的项目中。

然后，在 application.html.haml 文件（我使用的，可能是 .html.erb）的底部添加将显示您的 flash 的代码片段。我的看起来像（在 HAML 中）：

```
- flash.each do |key, value|
  .notifications.top-center
    %div{class: "alert alert-#{key} in fade"}
      %button.close{"data-dismiss" => "alert", type: "button"} &times;
      -if value.is_a?(String)
        = value
      -else
        -if value.nil?
          = devise_error_messages
        -else
          - value.each do |msg|
            %li
              = msg 
```

基本上，这将做什么，是通过它并检查是否除了常规字符串之外还有其他内容。如果它只是**一个**字符串（意思是，它不是一个字符串数组），请发布它。然后，如果它不是字符串，则需要检查它是否为 nil，如果是，它将是设计错误消息（如果你有设计）。如果您没有设计或不想要设计错误消息，只需跳过该`- if value.nil?`部分并转到每个数组的值是什么，然后将它们与其他所有内容一起发布`- value.each do |msg|`。

现在，如果您希望它出现在顶部中心（就像我目前所做的那样），您需要将其添加到 bootstrap-notify 的 CSS 文件中：`.notifications.top-center{top:40px;left:0;width:100%;}.notifications.top-center>div{margin:5px auto;width:20%;text-align:center;}`

之后，它应该像我上面想要的那样工作！

# c++ - 取消初始化对象是什么意思？

> ID：16006669
> 
> 赞同：0
> 
> 时间：2013-04-15T02:13:23.633
> 
> 标签：c++

在 C++ 中，为特定对象调用析构函数，析构函数首先取消初始化该对象，然后删除该对象。

我不明白 _de_initialize 对象的含义。这是什么意思，会发生什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T02:15:47.823

想象一下你正在重写`std::string`。它正在管理一个`char`动态分配的数组。当字符串对象被删除时，您希望`char`数组也被释放。析构函数就是这样做的地方。

或者，您可能正在制作一些东西来表示 Windows`HANDLE`或 UNIX 文件描述符。当您的对象被删除时，您可能想要关闭该句柄或文件描述符。同样，析构函数是这样做的地方。

通常，析构函数是释放与该对象关联的资源的地方，无论这些资源可能是什么。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-15T02:16:56.277

标准中从未提及去初始化这个词。至于这意味着什么，这意味着该对象释放任何文件句柄，释放资源等。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-15T02:31:10.540

我认为混淆可能是由于一些库具有`init()`由 API 强制执行的方法，通常在构造函数的最后一行调用，在处理所有动态数据和可能的连接之后。

IMO，这只是对象构造的一部分，该`init()`方法主要是一种清理代码的方法，因为没有人喜欢构造函数的代码墙。我经常创建`initGUI()`和`initConnections()`保持构造函数清洁的方法。

如果需要取消初始化，最好以相反的顺序进行。我的意思是，如果初始化是构造函数的最后一行，它很可能也应该是析构函数的第一行：

```
Instantiation
   Constructor 
      Initialization
         Usage
      De-initialization
   Destructor
Deletion 
```

# r - 获取列表的次要元素

> ID：16006670
> 
> 赞同：1
> 
> 时间：2013-04-15T02:13:38.927
> 
> 标签：r

如何获取列表的次要元素和第二次要元素？有什么功能可以做到吗？

例子：

```
a <- c(3,2,1)
minor(a)
1
sminor(a)
2 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T02:15:59.670

最小值？

```
> min(a)
[1] 1 
```

还有亚军：

```
> min(a[a!=min(a)])
[1] 2 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-15T02:41:12.153

怎么用`sort`？

```
# slightly less confusing test values
x <- c(2,7,5)

# get the second smallest value
sort(x)[2]
[1] 5 
```

或者要获取第二小数字的索引而不是值，请使用`order`：

```
order(x)[2]
[1] 3 
```

...您可以在其中返回值

```
x[order(x)[2]]
[1] 5 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-15T02:32:20.113

如果您想要稍微不同的行为（在重复值的情况下）：

```
min(a)

min(a[-which.min(a)]) 
```

# knockout.js - 使用其他变量在 ko 函数中检索 event.target

> ID：16006674
> 
> 赞同：1
> 
> 时间：2013-04-15T02:13:47.860
> 
> 标签：knockout.js, knockout-2.0

好的，所以在我的视图模型中，我经常创建诸如

```
self.updateSomething = function(data, event){

    var theElem = $(event.target); 

    //do stuff with the elem

} 
```

效果很好，没有问题。我遇到的问题是我还想将一个值传递给我的函数。

```
self.updateSomething = function(myVar, data, event){

    var theElem = $(event.target); 

    //do stuff with the theElem AND myVar

} 
```

但这不起作用。看起来很简单，我确定这只是一个语法问题，但我无法弄清楚，GOogle 让我失望了。有人想给我扔骨头吗？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T08:39:19.570

您是否尝试使用该`.bind`功能？

例如，在您的 .html

```
<span data-bind="text: test, click: updateSomething.bind($data,'a variable','another variable') "></span> 
```

在您的视图模型中：

```
var vm = function () {
    var self = this;
    self.test = ko.observable('ciao');

    self.updateSomething = function (myVar1, myVar2, data, event) {

        var theElem = $(event.target);

        //do stuff with the theElem AND myVar

    }
} 
```

* * *

我还建议您使用另一种方法，使用自定义绑定处理程序：

在您的 html 中：

```
 <span data-bind="myHandler : {var1:'variable1', var2:'variable2'}"></span> 
```

在你的 js 文件中：

```
ko.bindingHandlers.myHandler =   {

    update: function (element, valueAccessor, allBindingsAccessor, viewModel, bindingContext) {
        var theElem = $(element);
        var variables =valueAccessor();
        var var1 =  variables.var1;

    }
} 
```

第二种方法允许您编写更具可读性和可重用性的代码；此外，我个人更喜欢在自定义绑定处理程序中保留对 DOM ( ) 的所有访问`$(...)`，以便更好地分离关注点。在这里你可以找到一个例子：[jsfiddle](http://jsfiddle.net/fpezzato/YDDDf/)

# javascript - 在字符串中配对字符的优雅方法是什么？

> ID：16006675
> 
> 赞同：3
> 
> 时间：2013-04-15T02:13:49.260
> 
> 标签：javascript, string, algorithm

例如，如果初始字符串`s`是`"0123456789"`，则所需的输出将是一个数组`["01", "23", "45", "67", "89"]`。

在 JavaScript 中寻找优雅的解决方案。

我在想（非常不优雅）是通过拆分空字符串并使用 Array.forEach 方法来遍历字符串，并在每两个字符后插入一个分隔符，然后按该分隔符拆分。这*不是*一个好的解决方案，但这是我的起点。

*编辑：已发布 RegExp 解决方案。我很想看看是否还有其他方法。*

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-15T02:18:19.607

怎么样：

```
var array = ("0123456789").match(/\w{1,2}/g); 
```

在这里，我们使用[`.match()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/match)您的字符串来匹配任何两个或单个 ( `{1,2}`) 单词字符 ( `\w`) 并返回结果数组。

* * *

关于您对非正则表达式解决方案的编辑；你可以像这样做一个不太优雅的功能：

```
String.prototype.getPairs = function()
{
    var pairs = [];
    for(var i = 0; i < this.length; i += 2)
    {
        pairs[pairs.length] = this.substr(i, 2);
    }

    return pairs;
}

var array = ("01234567890").getPairs(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-15T02:35:00.313

如果您想使用拆分（为什么不），您可以执行以下操作：

```
s.split(/([^][^])/).filter(function(x){return x}) 
```

哪个使用两个连续字符作为*分隔符*进行拆分（但因为它们在捕获组中，所以它们也是拆分结果的一部分。使用标识函数过滤它可以消除空字符串（在“分隔符”之间）。注意在奇数个字符的情况下，最后一个字符将作为拆分输出，而不是分隔符，但这没关系，因为它仍然会测试真实性。

（如果你真的想匹配任何字符，你`[^]`是如何`.`用 javascript 拼写的。我必须查一下。）

# facebook - 如何使用开放图向 Facebook 发表评论

> ID：16006677
> 
> 赞同：0
> 
> 时间：2013-04-15T02:13:57.420
> 
> 标签：facebook

我可以使用[https://graph.facebook.com/comments/?ids=id](https://graph.facebook.com/comments/?ids=id)检索我的 fb 评论，但我无法将评论发回 fb，下面是我的代码，请给我一些指导

```
$accessToken = 'xxxxxxxxxxxxxxxxxx';
$facebook = new Facebook(array(
       'appId' => 'xxxxxxxxxxx',
       'secret' => 'xxxxxxxxxx',
));

$ret_obj = $facebook->api('/appid/comments', 'POST',
       array(
    'access_token' => $accessToken,
    'message' => $comemnts
    )
);

echo 'success...'; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T03:23:29.310

这是错误的

`$facebook->api('/appid/comments', 'POST',`

应该是这样的

```
api('xxxxxxxxxxxx_xxxxxxxxxxxx_xxxxxxxxxxxx', 'POST 
```

在哪里

*   3 个 xxx 部分中的第一个是 facebook 页面的 id，
*   第二个是帖子的id
*   3ed 是您要评论的评论的 ID。

# java - Android 应用后台资源加载 1/4 分辨率和缩放像素化

> ID：16006679
> 
> 赞同：0
> 
> 时间：2013-04-15T02:14:07.600
> 
> 标签：java, android

这里的第一个问题，但我已经对这个特定问题进行了广泛的搜索，似乎无法获得正确的关键字或其他东西......因为我看不到其他人有这个问题。

我正在努力完成一个其他人使用来自相应视网膜 iPad 应用程序的资源构建的 Android 应用程序端口。我们在垃圾收集器方面遇到了一些问题，我预计这部分是由于作为背景加载的超大资源 (2048x1536)。

该应用程序实际上仅适用于平板电脑，因此，我在 Photoshop 中将背景缩小到更小的 1280x752（本机测试平板电脑的分辨率为 1280x800）。然而，当它们被加载到应用程序中时，它们看起来像是被加载为 640x326 图像，然后被放大了 - 因此它们是模糊/像素化的，即使它们是屏幕的本机分辨率。

我能做些什么来保持这些图像正确加载，而不会用我需要的 4 倍大小的图像完全炸毁内存？

======

这是清单中的相关信息：

```
<uses-sdk
    android:minSdkVersion="12"
    android:targetSdkVersion="12" />

<supports-screens
    android:anyDensity="true"
    android:largeScreens="true"
    android:normalScreens="false"
    android:smallScreens="false"
    android:xlargeScreens="true" /> 
```

这是一个 LinearLayout XML 的片段，其中加载了其中一个背景：

```
android:orientation="vertical"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:background="@drawable/edit_background"
android:weightSum="1.0" 
```

我已经尝试将资源放在不同的可绘制文件夹中以确认，并且我已经禁用`xlarge`了清单的支持屏幕部分中的所有屏幕......并且没有任何帮助。

我什么也找不到。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T04:03:20.893

西蒙是对的：res/drawable-nodpi 成功了

# php - 来自下拉列表 html 的值

> ID：16006681
> 
> 赞同：0
> 
> 时间：2013-04-15T02:14:31.920
> 
> 标签：php, html

试图从下拉列表中传递值，但无法得到它。

```
 <tr>
                    <td>Size <br>
                    (Only applicable for T-Shirt):</td>
                    <td><select name=size>
                    <option value=N>NIL</option>
                    <option value=S>S</option>
                    <option value=M>M</option>
                    <option value=L>L</option>
                    <option value=XL>XL</option>
                    </select></td>
                </tr>

                <tr>
                    <td></td>
                    <td><a href= manageProduct.php?size=$_GET[size]>Insert</a></td>
                </tr> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T02:53:10.580

试试这个：（*只是一个例子*）。

```
<form action="<?php $_SERVER['PHP_SELF']?>" method="GET">
<table>
<tr>
<td nowrap>Size:
(Only applicable for T-Shirt):</td>
<td><select name="size">
<option value="N">NIL</option>
<option value="S">S</option>
<option value="M">M</option>
<option value="L">L</option>
<option value="XL">XL</option>
</select></td>
</tr>

<tr>
<td><p align="right"></p></td>
<td><input type="submit" value="Insert" />
</td>
</tr>
</table>
</form>

<?php

$size = $_GET['size'];

if($_GET['size']=="N")
{
echo "you chose NOTHING, make another choice.";
}

else {

echo "Your choice of size is: $size";
}

?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T02:34:10.537

**html**

```
<form action="manageProduct.php" method="POST">
    <table>
       <tr>
            <td>Size <br>
            (Only applicable for T-Shirt):</td>
            <td><select name=size>
            <option value=N>NIL</option>
            <option value=S>S</option>
            <option value=M>M</option>
            <option value=L>L</option>
            <option value=XL>XL</option>
            </select></td>
        </tr>

        <tr>
            <td></td>
            <td><input type="submit" value="Insert" /></td>
        </tr>
    </table>
</form> 
```

**PHP**

```
$size = $_POST['size']; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T02:32:58.117

您需要使用 GET 操作的表单，然后您可以获取变量。假设这个页面是 manageProduct.php：

```
 <!--GET your data from the submitted form OR do something depending on what size returns in the url-->
    <?php

    if($_GET['size']=="SIZE"){ echo whatever or do whatever}
    ?>

        <td><a href

="manageProduct.php?size=<? echo $_GET['size'] ?>">Whatever you're trying to do</a></td>

        <form id="form" method="get" action="manageProduct.php">
            <tr>
                            <td>Size <br>
                            (Only applicable for T-Shirt):</td>
                            <td><select name="size">
                            <option value="N">NIL</option>
                            <option value="S">S</option>
                            <option value="M">M</option>
                            <option value="L">L</option>
                            <option value="XL">XL</option>
                            </select></td>
                        </tr>

                            <tr>
                                <td></td>
    <td><input type="submit" name="Submit" value="Insert" /></td>
    <br />
    </form>

                            </tr> 
```

# css - jmenu - 子菜单元素的透明度

> ID：16006682
> 
> 赞同：0
> 
> 时间：2013-04-15T02:14:32.710
> 
> 标签：css, jmenu

我正在使用 jmenu.js 并将子菜单元素设置为具有透明度。问题是具有透明度的子元素显示父（即主菜单栏）的背景。我想要的是在显示到页面背景的子菜单上具有透明度。CSS是：

```
.jMenu {
    display: table;
    margin: 0 0 0 50px;
    padding: 0;
}

/* First level */
.jMenu li {
    display: table-cell;
    background: url('../images/tile_gray.png');
    margin: 0;
}

.jMenu li a {
    padding: 10px;
    padding-right:55px;
    display: block;
    background-color: transparent;
    color: white;
    text-transform: uppercase;
    margin-top:2px;
    cursor: pointer;
    font-size: 14px;
    font-family: Myriad Pro, Lucida Sans, Segoe UI, Calibri, sans serif;
    font-weight: bold;
    text-shadow: 1px 1px 1px rgba(0,0,0,0.5);
}

/* Lower levels */
.jMenu li ul {
    display: none;
    position: absolute;
    z-index:9999;
    padding: 0;
    margin: 0;
}

.jMenu li ul li {
    background-color: #fff;
    display: block;

    padding: 0;
}

.jMenu li ul li.arrow {
    background: url('../images/tile_pink.png');
    padding: 0;
    border-bottom: none;
    padding-bottom: 5px;
    margin-top: 10px;
}

.jMenu li ul li a {

    font-size: 13px;
    text-shadow: 0px 0px 0px rgba(0,0,0,0);
    text-transform: none;
    padding: 7px;
    display: block;
    border-top: 1px solid transparent;

        text-decoration: none;
}

.tran {
    background: rgba(120, 120, 120, .2);
}

.jMenu li ul li a.isParent {
   background: url('../images/tile_darker.png');
}

.jMenu li ul li a:hover {
    background: url('../images/tile_green.png');

} 
```

**更新**

我将css更改为使背景透明，而不是在锚上而是在li上：

```
.jMenu li ul li {
    background-color: #fff;
    display: block;
    background: rgba(0, 0, 0, .4);
    padding: 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T04:42:20.897

看起来您在 all 上都有背景图像`.jMenu li`。即使您认为您只是将此背景（'.../images/tile_gray.png'）应用于第一层，它也会泄漏到`<li>`内部

尝试添加`background-image: none;`到您的孩子 li：

```
.jMenu li ul li {
    background-color: #fff;
    background-image: none;
    display: block;    
    padding: 0;
} 
```

这可能有效，但如果没有看到它在运行中并且没有您的 HTML，就很难说出到底发生了什么。

# linux - 如何将一长串参数读入 GDB/DDD

> ID：16006684
> 
> 赞同：1
> 
> 时间：2013-04-15T02:14:57.010
> 
> 标签：linux, bash, unix, gdb

我编写了这个 C++ 程序，它有一个相当长的参数列表，我在 BASH 命令行中提供这些参数。

`run param1 param2 ....`但是，对于使用 GDB 进行调试，在 GDB 命令提示符下键入以调试我的可执行文件是很痛苦 的。

那么有没有办法将这个冗长的列表存储到一个文本文件中，并告诉 GDB 查看这个文本文件中的参数，以便为我的**a.out**提供参数。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-15T03:11:59.457

> 那么有没有办法将这个冗长的列表存储到一个文本文件中，并告诉 GDB 查看这个文本文件中的参数，以便为我的 a.out 提供参数

将其放入文本文件中：

```
set args foo bar baz ... 
```

进而

```
(gdb) source commands.txt 
```

或者：

```
gdb --args ./a.out foo bar baz ...
(gdb) run 
```

# sql-server - TSQL - 需要比较记录表中两个最近行的值

> ID：16006685
> 
> 赞同：0
> 
> 时间：2013-04-15T02:15:02.970
> 
> 标签：sql-server, tsql, sql-server-2005

我有一张表`INDICATORS`，其中存储了性能指标的详细信息和当前分数。我有另一个表`IND_HISTORIES`存储指标分数的历史值。数据按设定的时间段（即每季度）存储`INDICATORS`，`IND_HISTORIES`以建立评分/评级趋势。

`IND_HISTORIES`具有类似于此的列结构-

```
pk_IndHistId  fk_IndId  Score  DateSaved 
```

还定义了评级级别，这意味着 1 到 3 的得分值是低，4 到 6 是平均，7 到 9 是高。

`IND_HISTORIES`我正在尝试构建一个警报功能，如果最近的评分级别（基于 中的最近分数）大于它的第二最近评分级别（基于中的第二最近分数） ，则将返回一条记录`IND_HISTORIES`。

我正在使用下面的代码来构建一个临时表，将分值转换为评级级别阈值......

```
-- opt_IND_ScoreValues = 1;2;3;4;5;6;7;8;9
DECLARE @tblScores TABLE (idx int identity, val int not null)
INSERT INTO @tblScores (val) SELECT IntValue FROM dbo.fn_getSettingList('opt_IND_ScoreValues')

-- opt_IND_RatingLevels = Low;Low;Low;Avg;Avg;Avg;High;High;High
DECLARE @tblRatings TABLE (idx int identity, txt nvarchar(128))
INSERT INTO @tblRatings (txt) SELECT TxtValue FROM dbo.fn_getSettingList('opt_IND_RatingLevels')

-- combine two tables above using a common index
DECLARE @tblRatingScores TABLE (val int, txt nvarchar(128))
INSERT INTO @tblRatingScores SELECT s.val, r.txt FROM @tblScores s JOIN @tblRatings r ON s.idx = r.idx

-- reduce table rows above to find score thresholds for each rating level
DECLARE @tblRatingBands TABLE (idx int identity, score int not null, rating nvarchar(128))
INSERT INTO @tblRatingBands
SELECT rs.val, rs.txt FROM @tblRatingScores rs
INNER JOIN (SELECT MIN(val) as val FROM @tblRatingScores GROUP BY txt) AS x ON rs.txt = x.txt AND rs.val = x.val
ORDER BY val 
```

**问题：**我可以对`IND_HISTORIES`表运行一个优雅的查询，该查询将返回最近的评分水平`INDICATOR`高于第二最近的评分水平的记录？

**更新：**为了澄清，`INDICATORS`在计算中不使用 - 它是一个父表，包含性能度量和当前“易失”分数的一般信息。分数会`IND_HISTORY`定期保存 - 这提供了数据的时间点“快照”，有助于建立分数趋势。

我正在查询该`IND_HISTORY`表，以查找指标的最新“快照”值高于其第二近的“快照”值的位置。（如上所述，在确定过程中，最好也加入 Rating Levels 表，以便仅在分数增加导致 Rating Level 增加时才返回行。）

任何解决方案都应该与 SQL Server 2005 兼容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T05:51:27.253

我已经实现了以下，这似乎工作。但我很想听听任何优化或整合的建议。

首先，我意识到我不需要`@tblRatingBands`上面构建的最后一个临时表。相反，我只是从`@tblRatingScores`下面的第一个查询集中选择匹配的文本评级。

然后在最后的查询中，我检查分数值是否增加以及评级文本是否发生变化——这表明趋势得分增加并导致评级水平发生变化。

```
DECLARE @tblTrendScores TABLE (indId int not null, ih_date datetime, rowNo int, ih_score int, rating nvarchar(128));

WITH LastTwoScores AS (
  SELECT fk_IndId,
         DateSaved,
         ROW_NUMBER() OVER (PARTITION BY fk_IndId ORDER BY DateSaved DESC) AS RowNo,
         Score
  FROM Ind_History
)
INSERT INTO @tblTrendScores
SELECT *,
       (SELECT txt FROM @tblRatingScores WHERE val = Score)
FROM LastTwoScores
WHERE RowNo BETWEEN 1 AND 2
ORDER BY fk_IndId, RowNo

SELECT a.indId,
       a.ih_date,
       CASE  WHEN ((a.ih_score > IsNull(b.ih_score, 0)) AND (a.rating <> IsNull(b.rating, 'none'))) THEN 'Up'
             WHEN ((a.ih_score < IsNull(b.ih_score, 0)) AND (a.rating <> IsNull(b.rating, 'none'))) THEN 'Down'
             ELSE 'no-change'
       END AS TrendRatingChange
FROM @tblTrendScores a
  JOIN @tblTrendScores b ON a.indId = b.indId AND b.rowNo = 2
WHERE a.rowNo = 1 
```

# python - python如何检查和替换字符串中的单词？

> ID：16006687
> 
> 赞同：0
> 
> 时间：2013-04-15T02:15:11.700
> 
> 标签：python

我是 python 新手，我正在尝试制作一个能够检测字符串是否包含“I”、“I'm”、“My”、“Was”、“Our”、“me”的函数" 将其替换为“You”、“You're”、“Your”、“Were”、“Your”和“You”，如果它没有以任何标点符号结尾，则在末尾添加一个问号。到目前为止我有代码

```
if ' ' in statement and statement[-1].isalpha() is True:
       response = statement
       response = response + "?"

       return response 
```

但我不确定如何使函数搜索这些词并用它们的反义词替换。例如，如果陈述是“我的狗说我很高兴”，它的反应应该是“你的狗说你很高兴？”

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-15T02:23:06.097

创建一个字典映射并对其进行迭代，就像这样

```
d = {"I": "You", "I'm": "You're".....}
for k,v in d.iteritems():
    statement = statement.replace(k, v) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T02:28:56.147

这已经被问过[很多](https://stackoverflow.com/questions/919056/python-case-insensitive-replace)[很多](https://stackoverflow.com/questions/9208786/best-way-to-do-a-case-insensitive-replace-but-match-the-case-of-the-word-to-be-r)次了。您需要使用`replace`Python[标准库](http://docs.python.org/3/library/)中的方法的一些变体。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-15T02:23:36.510

查看python的[`replace`](http://docs.python.org/2/library/stdtypes.html#str.replace)函数，它在字符串中替换......

例如

```
x = "My dog said I'm happy"
x.replace("My", "Your") # "Your dog said I'm happy" 
```

您可以列出`old`要替换的单词列表和要替换的列表`new`，然后依次替换。

请注意，您应该在较短的单词之前替换较长的单词。

例如，如果您将上面的“I”替换为“You”，您将得到“Your dog said You'm happy”。*因此，您应该在“I”之前*替换“I'm ”。

# c++ - 使用 lambda 启动 pthread

> ID：16006688
> 
> 赞同：2
> 
> 时间：2013-04-15T02:15:20.033
> 
> 标签：c++, c++11, pthreads, std-function, stdbind

由于我无法控制的原因，我必须使用堆栈大小减小的 pthread。但是，我仍然可以访问 C++11，所以我想写一些类似的东西`std::async`，让我在分离状态下启动一个 pthread，并运行任何函数，而不返回未来。本质上，std::async 用于返回 void 的函数。

我想出了以下代码，但它真的很难看，我想知道是否有更好的方法来解决这个问题。

```
static void* thread_start(void* args) {
    // Get the actual function
    std::function<void()>* f_ptr = static_cast<std::function<void()>*>(args);
    // Run the actual function
    (*f_ptr)();
    // Delete the function from the heap
    delete f_ptr;
    // Return nullptr, since we're not dinking around with futures
    return nullptr;
}

template<typename Function, typename... Args>
void async(Function&& f, Args&&... args) {
    static size_t kStackSize = 1024*1024;
    // Allocate a std::function on the heap, so that we can call it safely after this stack frame is destroyed.
    std::function<void()>* f_no_args = new std::function<void()>;
    // Bind Args to Function, so that we have a void function
    *f_no_args = std::bind(f, args...);
    // Set up a new pthread with a smaller stack, and detached
    pthread_attr_t attr;    
    pthread_attr_init(&attr);
    pthread_attr_setstacksize(&attr, kStackSize);
    pthread_attr_setdetachstate(&attr, PTHREAD_CREATE_DETACHED);
    pthread_t thread;
    pthread_create(&thread, &attr, &thread_start, f_no_args);
} 
```

# internet-explorer - IE8正在点击一个div，为什么？

> ID：16006696
> 
> 赞同：0
> 
> 时间：2013-04-15T02:16:01.553
> 
> 标签：internet-explorer, internet-explorer-8, z-index

在这里查看：

如果您单击“创建帐户”或“登录”，并尝试在 IE8 中填写表格（忽略占位符不起作用的事实......这将很快修复），您会注意到您保留单击 div 到下面的链接，几乎不可能填写表格。

我一直在查找 IE z-index 问题，但我没有尝试任何工作。这是怎么回事？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T02:47:10.043

固定的！输入上的“背景：无”行导致了这种情况。该死的IE。我只是将背景设置为与周围 div 相同的颜色，因此看起来相同。

# javascript - 正确的语法以使用原型保留 javascript 上下文

> ID：16006701
> 
> 赞同：0
> 
> 时间：2013-04-15T02:16:26.183
> 
> 标签：javascript

所以我知道我可以在下面使用这个答案来修复我的模块类`bind`的[范围](https://stackoverflow.com/a/1441692/148998)。

唯一的问题是我为我的模块使用了稍微不同的语法，我不太确定如何应用它？

那么我的问题是，如何正确地将绑定应用到我的函数，以便上下文`this`是我的模块？

代码：

```
var module = (function () {

    var module = function (name) {

        this.getName= function() {
            return name;
        }

    };

    module.prototype = {

        something: function () {
            // my function needs to access getName from here...
        }
    };

    return module;
})(); 
```

用法：

```
var foo = module('nameValue');
foo.something(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T03:57:01.850

您确定在这种情况下使用**apply**而不是**bind**不是更好的实现吗？

如果您只想在模块化设置中使类属性可供访问，则需要在类函数声明中公开它们。然后，它们将可供使用这些方法的公共访问。

```
var module = (function () {

    function module (name) {

        // public method exposing *name* variable with "privileged" access
        this.getName= function() {
            return name;
        }

        // publicly exposing *name* variable itself (ahh! It's naked!)
        // this.name = name; // use only for read+write access to variable

    };

    // only setting one prototype parameter here so let's save some lines...
    module.prototype.something =  function () {

            return this.getName(); // or
            // return this.name // for direct variable exposure

    };

    return module;
})(); 
```

然后你可以创建你的实例：

```
var mod1 = new module("bar");
var mod2 = new module("foo");
var mod3 = new module("win"); 
```

稍后应用绑定...

虽然通过使用**apply**，您可以这样做：

```
var getNameOfModule = function(){ return this.getName(); }
getNameOfModule.apply(mod1); // bar
getNameOfModule.apply(mod2); // foo
getNameOfModule.apply(mod3); // win 
```

这将完全取决于您的设置结构。

* * *

此外，最好以大写开头的类名（如**Module** vs. module）。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-15T02:44:29.800

您可能希望首先创建一个匿名函数，然后设置其他函数，然后使用对模块对象的自引用调用 getName()。

```
var module = function () {

    var module = function(){};

    module.getName = function (name) {
        return name;
    };

    var self = module;

    module.prototype.something = function () {
        alert(self.getName('myName'));
    };

    return module;
};

var myMod = module();
myMod.prototype.something(); 
```

这是现场示例[http://jsfiddle.net/ybfjB/](http://jsfiddle.net/ybfjB/)

# mongodb - 忘记mongodb数据路径

> ID：16006703
> 
> 赞同：1
> 
> 时间：2013-04-15T02:16:36.363
> 
> 标签：mongodb

我们有一个使用了几年的 mongodb 数据库。现在开发商走了。服务器重启后，我们找不到他指定的数据路径在哪里。它不是默认值`/data/db/`。我们的服务器是 CentOS。有什么命令可以搜索吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T03:10:11.317

连接到 shell 并运行以下命令：

```
> db.adminCommand('getCmdLineOpts') 
```

你会看到类似的东西：

```
{
    "argv" : [
        "mongod",
        "--fork",
        "--logpath",
        "/data/logs/24rc2.log",
        "--dbpath",
        "/data/foobar"
    ],
    "parsed" : {
        "fork" : true,
        "dbpath" : "/data/foobar",
        "logpath" : "/data/logs/24rc2.log"
    },
    "ok" : 1
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T03:06:34.900

在 中查找`dbpath`配置行 `/etc/mongodb.conf`。

# cakephp - 在 CakePhp 中保护 Json 获取请求

> ID：16006705
> 
> 赞同：0
> 
> 时间：2013-04-15T02:16:42.073
> 
> 标签：cakephp

ng-grid（AngularUi 网格组件）的所有示例都使用 GET 请求。

我正在使用 CakePhp 并且在返回 json 的控制器中有一个 Action 函数。

有没有办法保护对该 Action 功能的 GET 请求？我是否使用 CakePhp 的内置安全性来限制对该控制器的访问？

目前，我可以在浏览器中加载到它的路线供全世界查看。这并不理想。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T03:31:03.350

这就是我正在寻找的 - SecurityComponent::$csrfCheck Found at [the security component part of the API](http://book.cakephp.org/2.0/en/core-libraries/components/security-component.html)。

我应该更努力地看。谢谢！

# java - 在 Android Activity 中的 Google 地图上显示位置

> ID：16006712
> 
> 赞同：0
> 
> 时间：2013-04-15T02:17:15.067
> 
> 标签：java, android, google-maps, arraylist, coordinates

我正在开发一个 Android 项目，在该项目中我需要在 Google 地图上显示各个机场的位置。我已经有一个纬度/经度坐标列表。我的问题是：

如何在 Android Activity 上将这些坐标显示为 Google 地图中的位置？我应该考虑哪些类或其他方法？有没有我可以看的模板或教程？非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T05:38:17.980

如果您已经为所有需要的地方设置了纬度/经度，您可以在循环中使用它来获取所有坐标：

```
 LatLng loc = new LatLng(latitude,longitude);
  map.addMarker(new MarkerOptions().position(loc).title("locationName")); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T02:33:30.423

我认为您需要在 mapView 上使用标记

[在这里](https://developers.google.com/maps/documentation/android/)您可以找到google map api的官方文档，您会发现在地图上添加标记非常容易。

如果您还需要使用当前位置，我建议您也阅读[此](http://developer.android.com/guide/topics/location/strategies.html)。

# c# - 按住某个键一段时间，释放该键后无法删除待处理的按键/按键消息

> ID：16006713
> 
> 赞同：1
> 
> 时间：2013-04-15T02:17:20.667
> 
> 标签：c#, .net

**我对C#**`PeekMessage`中的方法使用有疑问。

 **这是我的情况：我按住一个键（例如 Enter 或 F8）一会儿。按住键时，代码会继续执行某些操作。

我试图创建代码以在释放密钥后立即停止做这些事情，但我遇到了一些困难。

我所做的是覆盖`ProcessKeyPreview`方法来确定一个键是否被按住一段时间以生成多个按键和/或按键事件。如果是这种情况，一旦释放键，我就 `PeekMessage`用来删除以下挂起的消息，并希望它会停止处理那些累积的按键/按键消息，但它没有用。

1.  WM_CHAR
2.  WM_SYSCHAR
3.  WM_IME_CHAR
4.  WM_KEYDOWN
5.  WM_SYSKEYDOWN

任何帮助，将不胜感激。

部分代码片段如下所示：

```
[DllImport("user32.dll", CharSet = CharSet.Auto)]
private static extern bool PeekMessage([In, Out] ref MSG msg, HandleRef hwnd, int msgMin, int msgMax, int remove);

//----------------------------------------------
// Define the PeekMessage API call
//----------------------------------------------
[Serializable, StructLayout(LayoutKind.Sequential)]
private struct MSG
{
    public IntPtr hwnd;
    public int message;
    public IntPtr wParam;
    public IntPtr lParam;
    public int time;
    public int pt_x;
    public int pt_y;
}

/// <summary> 
/// Trap any keypress before child controls get hold of them
/// </summary>
/// <param name="m">Windows message</param>
/// <returns>True if the keypress is handled</returns>
protected override bool ProcessKeyPreview(ref Message m)
{
    const int WM_KEYDOWN = 0x100;
    const int WM_KEYUP = 0x101;
    const int WM_CHAR = 0x102;
    const int WM_SYSKEYDOWN = 0x104;
    const int WM_SYSKEYUP = 0x105;
    const int WM_SYSCHAR = 0x106;
    const int WM_IME_CHAR = 0x286;

    KeyEventArgs e = null;

    if ((m.Msg != WM_CHAR) && (m.Msg != WM_SYSCHAR) && (m.Msg != WM_IME_CHAR))
    {
        e = new KeyEventArgs(((Keys)((int)((long)m.WParam))) | ModifierKeys);

        if ((m.Msg == WM_KEYUP) || (m.Msg == WM_SYSKEYUP))
        {
            //If the key is held down for a while to generate multiple WM_KEYDOWN messages
            if (mRepeatCount > 1)
            {                        
                e.Handled = true;
                e.SuppressKeyPress = true;
            }

            mRepeatCount = 0;
        }

        // Remove any WM_CHAR type messages if supresskeypress is true.
        if (e.SuppressKeyPress)
        {
            this.RemovePendingMessages(WM_KEYDOWN, WM_KEYDOWN);
            this.RemovePendingMessages(WM_SYSKEYDOWN, WM_SYSKEYDOWN);
            this.RemovePendingMessages(WM_CHAR, WM_CHAR);
            this.RemovePendingMessages(WM_SYSCHAR, WM_SYSCHAR);
            this.RemovePendingMessages(WM_IME_CHAR, WM_IME_CHAR);
        }

        if (e.Handled)
        {
            return true;
        }
    }

    return base.ProcessKeyPreview(ref m);
}

private void RemovePendingMessages(int msgMin, int msgMax)
{
    if (!this.IsDisposed)
    {
        MSG msg = new MSG();
        IntPtr handle = this.Handle;
        while (PeekMessage(ref msg, new HandleRef(this, handle), msgMin, msgMax, 1))
        {
        }
    }
} 
```**

# java - 查询时间慢 SQL/Java

> ID：16006714
> 
> 赞同：0
> 
> 时间：2013-04-15T02:17:32.363
> 
> 标签：java, mysql, sql, database, join

我正在查询一个包含数千行的相当大的数据库。它大约需要 5 分钟，而应该需要大约 5 秒。

```
 ResultSet rs = st.executeQuery("SELECT flights.airline, flights.flight_num,"
            + "origin_airport_code, destination_airport_code,"
            + "ticket.date, ticket.bought_date, ticket.price "
            + "FROM flights JOIN flightinfo JOIN ticket"); 
```

我应该使用某种特定类型的 join JOIN 语句吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T02:21:03.607

目前，您的查询所做的是获取表的笛卡尔积，因为您尚未指定它们的连接条件或定义表如何相互关联。

您需要在`ON`每个连接语句中添加一个条件或子句，例如

```
SELECT  flights.airline, 
        flights.flight_num,
        origin_airport_code, 
        destination_airport_code,
        ticket.date, 
        ticket.bought_date, 
        ticket.price 
FROM    flights 
        INNER JOIN flightinfo 
            ON flights.colName = flightinfo.colname  -- << 1
        INNER JOIN ticket
            ON table.ColName = ticket.colName        -- << 2 
```

在哪里：

```
1 >> Colname >> how the two tables:flights and flightinfo, are related
2 >> table >> I don't know where the table ticket will be joined, it is 
              either flights or flightinfo. 
```

要进一步了解有关联接的更多信息，请访问以下链接：

*   [SQL 连接的可视化表示](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T02:40:19.310

你的问题在最后一行

```
FROM flights JOIN flightinfo JOIN ticket 
```

你应该向内或向左加入他们。

您应该注意的另一件事是，如果每个航班有很多票，您将获得重复航班。

如果可能没有航班机票，那么如果使用 INNER join，您将无法获得航班。

我猜航班信息总是存在的，并且与航班是 1:1 的。

所以最终的解决方案是（基于我的假设）：

*   内联飞行信息
*   左加入票
*   解析时请记住，每张机票都会重复航班

如果门票是您的主表，并且您不需要没有机票的航班，那么请在`FROM ticket`内部加入其他表。

# postgresql - PostgreSQL tsvector 解析在搜索中包含 xml 标签

> ID：16006726
> 
> 赞同：3
> 
> 时间：2013-04-15T02:19:13.530
> 
> 标签：postgresql, indexing, gwt-gin, tsvector

我们将“损坏的”xml 存储在表格的文本字段中。目前无法修复 xml，因此正常的使用模式是在 where 子句中使用 ~* E'my_regex' 来搜索它。挑战在于桌子的尺寸非常非常大。

我正在尝试使用 gin 索引来加快查询速度。问题是在将文本解析为 tsvector 时，解析器会忽略 xml 标签。
例如，我正在寻找包含单词“file”的记录。该词可能是 xml 标签的一部分，也可能不是标签的一部分。这是我尝试过的：

```
select to_tsvector ( 'simple', '<file mode="blah"><value>bar</value>' ) @@ to_tsquery('simple','file');  
?column?  
f 
```

我究竟做错了什么？如何将分隔符指定为 <>&=,./ 之一？先感谢您

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T08:40:57.627

如果您只对搜索单词/标记名等感兴趣，那么在创建 tsvector 时使用正则表达式删除所有标记：

```
select to_tsvector( 'simple', 
    regexp_replace('<file mode="blah"><value>bar</value>', E'[^A-Za-z0-9]', ' ', 'g')
) @@ to_tsquery('simple','file'); 
```

# c# - 想要 hp 继承 Stat 并拥有 current 和 max 而不是手动创建 currenthp 和 maxhp？

> ID：16006729
> 
> 赞同：0
> 
> 时间：2013-04-15T02:19:28.293
> 
> 标签：c#, unity3d, inspector

```
using UnityEngine;
using System.Collections;

public class BaseStats : MonoBehaviour {
[System.Serializable]
public class baseStats {
    public string name;
    public int currentLevel;
    public int targetLevel;
    Stat currentHp = new Stat();
    public int maxHp;
    public int currentAp;
    public int maxAp;

    public int strength;
    public int toughness;
    public int agility;
    public int intelligence;
    public int willPower;
    public int luck;

    public int attack;
    public int hitPercentage;
    public int defence;
    public int evasionPercentage;
    public int abilityAttack;
    public int abilityDefence;
    public int abilityDefencePercentage;

    public int currentExp;
    public int targetExp;

        public baseStats(string Name, int CurrentLevel, int TargetLevel, Stat    CurrentHp,    int MaxHp, int CurrentAp, int MaxAp, int Strength, int Toughness, int Agility, int Intelligence, int WillPower, int Luck, int Attack, int HitPercentage, int Defence, int     EvasionPercentage, int AbilityAttack, int AbilityDefence, int        AbilityDefencePercentage, int        CurrentExp, int TargetExp) {    

        name = Name;
        currentLevel = CurrentLevel;
        targetLevel = TargetLevel;
        currentHp = CurrentHp;
        maxHp = MaxHp;
        currentAp = CurrentAp;
        maxAp = MaxAp;

        strength = Strength;
        toughness = Toughness;
        agility = Agility;
        intelligence = Intelligence;
        willPower = WillPower;
        luck = Luck;

        attack = Attack;
        hitPercentage = HitPercentage;
        defence = Defence;
        evasionPercentage = EvasionPercentage;
        abilityAttack = AbilityAttack;
        abilityDefence = AbilityDefence;
        abilityDefencePercentage = AbilityDefencePercentage;

        currentExp = CurrentExp;
        targetExp = TargetExp;

    }   
public class Stat{
    public int current;
    public int max;}
}

public baseStats mainChar;
void Start() {

    mainChar = new baseStats(
        "Truth",
        98,
        99,
        ,
        9999,
        754,
        999,
        255,
        255,
        255,
        255,
        255,
        255,
        255,
        255,
        255,
        100,
        255,
        255, 
        100,
        7773473,
        7777777);

    print(mainChar.currentHp);

}

  } 
```

这是我的代码，我一直试图在 hp 在电流和最大值的检查器中下降的地方得到它。如果你知道的话，我正在关注 insurgent 的 rpg tut，问题是他是在 unityscript 中做的，我需要我在 c# 中的。任何帮助，将不胜感激！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T09:13:29.977

你在寻找这样的东西吗？

`Stat hp = new Stat() { current = currentHP, max = maxHP };`

你的问题非常令人困惑。您想*继承*Stat，但没有可以继承任何东西的 HP 类。很难理解你到底想要达到什么目的。

# php - 为在另一个网页中加载的网页添加后退按钮

> ID：16006730
> 
> 赞同：2
> 
> 时间：2013-04-15T02:19:35.873
> 
> 标签：php, javascript, jquery

我有`index.php`两个主要部分：the`navbar`和`main-content`. `navbar`包含将`main-content`通过此`jQuery`代码加载另一个网页的链接：

```
jQuery('#main-content').load('sampleurl'); 
```

其中一些网页包含指向另一个网页的链接，所以我想添加一个后退按钮。我尝试使用`history.back()`and 和`history.go(-1)`the `$_SERVER['HTTP_REFERER']`，但在我的情况下它们并没有真正起作用。

在这种情况下如何添加后退按钮？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T02:28:54.650

您应该将上次查看的页面保存在 JavaScript 变量或隐藏输入的值中，然后您只需要添加按钮

```
jQuery('#main-content').load(old_url); 
```

当您通过以下方式加载下一页时，您必须始终更新您的变量`jQuery('#main-content').load('sampleurl');`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T02:35:44.230

结合 Charlie 和 Michael 的回答，由于您已经在使用 jQuery，另一种选择是包含[jQuery Address plugin](http://www.asual.com/jquery/address/)。

您可以通过创建一个函数来读取散列路径以加载新内容来实现这个想法。在此之后，可以通过内置的后退 + 前进按钮导航内容。我预见到这个实现的唯一挑战是将新内容与哈希路径相关联。

祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T02:26:17.223

只是一个想法：在加载页面时向 Url 添加哈希；然后你可以使用`history.back()`

```
$(function(){
  if(window.location.hash === 'sampleurl'){
    jQuery('#main-content').load('sampleurl', function(){
      window.location.hash = 'sampleurl'; //<<-- match with your loaded page;
    });
  }
}); 
```

祝你好运 ！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-15T02:30:44.023

尝试操作 javascript 位置或 location.hash

[https://developer.mozilla.org/en-US/docs/DOM/window.location](https://developer.mozilla.org/en-US/docs/DOM/window.location)

当然，您还需要能够将您的 URL 转换回相关的页面内容。

# jquery - 表单和 .append 问题

> ID：16006731
> 
> 赞同：1
> 
> 时间：2013-04-15T02:19:57.423
> 
> 标签：jquery, forms, append

这种形式有困难。

我在 html 中使用#message div 标签。

我可以让名字和姓氏出现，但如果我忘记输入名字，我无法获得“请输入你的名字和姓氏以出现”。我尝试了各种方法，但没有运气。有人知道我错过了什么吗？

```
var getName = function()
{ 
var fullName;
if(document.getElementById("FirstName").value == "" &&    document.getElementById("LastName").value == "")
{
    //fullName = "Please enter your first and last name";
     $("#message").empty().append(fullName = "Please enter your first and last    name");
}
else
{

    $("#message").empty().append (fullName  =  document.getElementById("FirstName").value + " " + document.getElementById("LastName").value); 
}
return  $("#message").empty().append(fullName);
}
  var displayName = function()
  {

$(document).ready(function() {

    $("#message").empty().append(Hello);
});
  } 
```

这是html

```
<div id="message"></div>

<form name="form" id="form" method="post" action="">  

<p class="FirstName">  
    <label for="FirstName">First Name:</label>
  </p>
    <p>
    <input name="FirstName" type="text" id="FirstName" />  

</p>  

<p class="LastName">  
    <label for="LastName">Last Name:</label></p>
    <p>
    <input name="LastName" type="text" id="LastName" />  

</p>

<p class="submit">  
    <input name="submitButton" type="button" id="submitButton" value="Get Name" onClick="getName()" />
</p>  
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T02:24:55.770

`fullName = ...`是一个赋值，它返回`undefined`，所以你要附加一个`undefined`值，删除`fullName =`. 此外，您应该为字符串使用引号，更改`Hello`为`"Hello"`并建议不要将 Vanilla JavaScript 与 jQuery 混合使用。

```
$(document).ready(function() {
   $("#message").text('Hello *');

   $('form').on('submit', function(event){
      var first = $('#FirstName').val(),
          last = $('#LastName').val();
      if (first === '' || last === '') {
         event.preventDefault();
         $("#message").html("Please enter your bloody first and last name");
      }
   });
}); 
```

使用`onClick`不是一个好习惯，特别是当你使用 jQuery 时，你可以`submit`使用 jQuery 方法来监听事件`on`，还要注意`append`返回一个 jQuery 对象并且一个对象在 JavaScript 中是一个真值，所以`return $("#message").empty().append(fullName); === return true;`.

# xml - 解析 XML 以获取节点值

> ID：16006732
> 
> 赞同：2
> 
> 时间：2013-04-15T02:20:02.267
> 
> 标签：xml, vb.net, xml-parsing

我想像这样解析 XML 字符串：

`<Folk id="4630" country="US" name="Marry" />`

（放置在富文本框编辑器中）

并获取`id`, `country`,`name`值。

**我尝试了什么：**

```
 Dim content As String = Me.RichTextBox1.Text
 Dim doc As New System.Xml.XmlDocument

 Try
      doc.LoadXml(content)
 Catch ex As Exception
      Label2.Text = "No XML Elements!!!!"
 End Try

 Dim items = doc.GetElementsByTagName("Folk")

 For Each item As System.Xml.XmlElement In items
     Dim id As String = item.ChildNodes(0).InnerText()
     MsgBox(id) 'Try to prompt a message box containing the id=""
 Next 
```

它最终会出现一个错误：`NullReferenceException was unhandled.`- 它没有找到`id`那里，所以我不处理这个错误，首先我想得到正确的回报，然后如果没有找到，我会处理。那么为什么它不返回`Folk` `id=""`呢？访问节点是否调用错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T02:35:30.127

问题是您在解析 XML 后尝试引用它的方式。

尝试更改此行：

```
Dim id As String = item.ChildNodes(0).InnerText() 
```

到以下：

```
Dim id As String = item.Attributes(0) 
```

`country`并且`name`将是：

```
Dim country As String = item.Attributes(1)
Dim name As String = item.Attributes(2) 
```

**编辑：**对不起，我同时在说 c# 和 vb.net。现在修复了。

# cuda - Cuda 无效文档

> ID：16006735
> 
> 赞同：0
> 
> 时间：2013-04-15T02:20:31.297
> 
> 标签：cuda

```
__constant__ float constData[256];
float data[256];
cudaMemcpyToSymbol(constData, data, sizeof(data));
cudaMemcpyFromSymbol(data, constData, sizeof(data));
__device__ float devData;
float value = 3.14f;
cudaMemcpyToSymbol(devData, &value, sizeof(float));
__device__ float* devPointer;
float* ptr;
cudaMalloc(&ptr, 256 * sizeof(float));
cudaMemcpyToSymbol(devPointer, &ptr, sizeof(ptr)); 
```

这是取自 nvidia 网站的示例。根据同一个站点， cudaMemcpyToSymbol 的签名将指针作为第一个参数。变量 devData 不是一个指针，仍然被用来代替一个指针。这怎么可能？我也意识到签名已经改变，但为什么这在任何情况下都有意义？作为新函数的符号，这也是一个有效的参数吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T02:31:16.693

查看[cudaMemcpyToSymbol() 的 C++ 版本](http://docs.nvidia.com/cuda/cuda-runtime-api/index.html#group__CUDART__HIGHLEVEL_1g0c15b63c7b065fda8998713831edcbc7)的文档。

# c - 在 Y86 汇编中如何为多个数组分配空间？

> ID：16006737
> 
> 赞同：0
> 
> 时间：2013-04-15T02:20:36.973
> 
> 标签：c, assembly, y86

我正在尝试将 C 代码转换为 Y86 汇编代码。

如果您有多个数组声明，例如：

```
int a[100], b[100]; 
```

假设每个整数是 4 个字节。你怎么知道在内存中指向 pos 的位置。指令，这样你就不会浪费任何空间？

```
<Assembly code begins here>

...

halt

# Array initialization begins here
.pos ?
A:
.long 0

.pos ?   
B:
.long 0 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T07:09:11.223

让汇编器担心偏移量。
一种可能性是定义一个包含局部变量的结构

```
struc Locals
    a dd ? dup 100
    b dd ? dup 100
ends Locals

sub esp, sizeof Locals ;; or perhaps sizeof struc Locals
mov ebp, esp           ;; take a copy of stack ptr

mov eax, [ebp + offset a] ;;  
mov ebx, [ebp + offset b] ;; 
```

在 gcc 中，'struct' 的含义是修改当前段的绝对位置，而不引入可链接代码：

```
.file "temp.c"
    .struct 0
a:  .struct a + 4*100
b:  .struct b + 4*100
c:               ;; c will contain expression for the size
    .struct 0    ;; you can start a new struct here
a2: .struct a2 + 4   ;; this struct would be  'int a2;'
b2: .struct b2 + 8   ;;  'double b2'
c2:                  ;; sizeof struct #2

.text  
    sub c, %rsp
    mov $13, a(%rsp)   ;; a[0] = 13
    mov $2,  b(%rsp)   ;; b[0] = 2 
```

# php - 与 LDAP 服务器的安全连接

> ID：16006739
> 
> 赞同：3
> 
> 时间：2013-04-15T02:20:54.183
> 
> 标签：php, security, ldap, security-by-obscurity

我正在使用哈希来加密和解密我发送到 cass 构造的密码。示例如下：

```
 public static function HashPassword ($Password){
        $salt = self::$Salt;
        return trim
            (base64_encode(mcrypt_encrypt(MCRYPT_RIJNDAEL_256, $salt, $Password, MCRYPT_MODE_ECB, mcrypt_create_iv(
            mcrypt_get_iv_size(MCRYPT_RIJNDAEL_256, MCRYPT_MODE_ECB), MCRYPT_RAND))));
    }//Get hashed Password 
```

然后解密在一个`protected static function`

```
 protected static function DecryptPassword($Password){
        $salt = self::$Salt;
        return trim
                (mcrypt_decrypt(MCRYPT_RIJNDAEL_256, $salt,base64_decode($Password), MCRYPT_MODE_ECB, mcrypt_create_iv(
                mcrypt_get_iv_size(MCRYPT_RIJNDAEL_256, MCRYPT_MODE_ECB), MCRYPT_RAND)));
    } // Decrypt the password 
```

然后我通过以下方式调用连接：

```
$Connection = LDAP::Connect('LDAPSERVER','LDAPLOGIN','onVidHn5r4WNyxzlDHD8TvUY9AjyiHg+ZC5PoOhIXkU='); 
```

出于安全原因，我使用了一个虚拟密码并隐藏了我的服务器凭据。

连接功能：

```
 public static function Connect($Host,$Username,$Password){
        self::$Host = $Host;
        self::$Admin = $Username;
        //Assign to global variables to be used throughout this framework
            $Password = self::DecryptPassword($Password);
        self::$Password = $Password; // Assign the decrypted password

        $LDAPServer = ldap_connect($Host);
        $Connect = ldap_bind($LDAPServer,$Username,$Password);
        if (!$Connect){
            die ("Cannot Connect To LDAP Server");
        }
    } 
```

我的总体问题是，这是一种将带有秘密盐的密码传输到我的 API 的有效安全方法吗？

我不喜欢以纯文本形式输入密码：

```
ldap_bind('host','user@server','PlainTextPassword'); 
```

以上是一个例子，在我看来，这是我不能接受的。

那么这是使用 TCP 协议安全连接到我的 LDAP 服务器的有效方法吗？

> 虽然这个问题的外观，但我可以确认我可以成功连接到我的 LDAP 服务器，只要输入正确的凭据；所以这不是问题。我只是从安全方面询问，没有我的安全知识，我不希望以任何形式或形式损害数据或服务器，因此为什么这是在生产阶段并且只有我自己的一个用户可以访问。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T15:29:52.060

恐怕这完全没有意义。

在建立与服务器的连接方面，这不会为您提供任何额外的安全性，因为密码仍以其解密形式传输到服务器。这样做的唯一一件事就是混淆源代码中的密码——我说的是“混淆”而不是“加密”，因为将密码解密为源文本的所有必要信息也包含在源代码中。

> 那么这是使用 TCP 协议安全连接到我的 LDAP 服务器的有效方法吗？

不可以。如果您想要安全连接，则需要使用 LDAP over SSL。

# c# - Windows 窗体 listbox.selecteditem 显示“System.Data.DataRowView”而不是实际值

> ID：16006741
> 
> 赞同：2
> 
> 时间：2013-04-15T02:21:09.360
> 
> 标签：c#, asp.net

我正在 Visual Studio 2010 中创建一个 Windows 表单应用程序。我有一个 Access 数据库，其中有一个表“ResearcherInfo”。

在我的 Windows 窗体中，我有一个列表框，其中填充了该表的列名“研究人员姓名”的内容。

但是，当我尝试获取此文本框的选定项目时，它只返回一个空值或有时 System.Data.DataRowView 取决于我如何访问它

我努力了

```
 string name = projectmembers_lst.SelectedItem.ToString(); 
```

当我将鼠标悬停在 'projectmembers_lst' 单词上进行调试时，它正确显示了我 projectmembers_lst = {SelectedItem = "Jerome"}

但是在将鼠标悬停在字符串“名称”上时，它会显示“名称 = “System.Data.DataRowView””

我什至尝试复制到数组

```
 foreach (Object selecteditem in projectmembers_lst.SelectedItems)
    {

        object[] objCollection = new object[projectmembers_lst.SelectedItems.Count];

        projectmembers_lst.SelectedItems.CopyTo(objCollection, 0);

        MessageBox.Show(objCollection[0] as string);
    } 
```

没有什么能让我选择项目。我不确定这里有什么问题。

**填充列表框：**

1) 我添加了访问表“ResearcherInfo”。作为 Web 表单应用程序的数据源。

2）在列表框的属性中，在数据源选项卡下，我已链接此表，并将列表框的显示成员和值成员属性作为表的列名“研究人员姓名”。

所以基本上我的列表框显示研究人员信息表中的研究人员姓名。附上一张快照。![在此处输入图像描述](https://i.stack.imgur.com/ISIwk.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T02:45:09.067

没有看到你是如何填充它的，很难猜到。

尝试 ((objCollection[0] as DataViewRow)[0] as string

# c++ - VxWorks 中的成员函数指针

> ID：16006743
> 
> 赞同：1
> 
> 时间：2013-04-15T02:21:20.600
> 
> 标签：c++, vxworks, member-function-pointers

我正在为 VxWorks 应用程序编写 C++。由于 VxWorks 是基于 C 的，将函数指针作为参数的函数与 C++ 的成员函数指针不兼容。

我有一个类 ( `SomeClass`)，它使用 30 多个成员函数进行了多次实例化，我希望能够将它们传递给`taskSpawn`. *我知道这可以*实现的两种方法，但我不是特别喜欢这两种传统的解决方案：

1.  使用静态函数调用特定对象上的 C 函数指针：

    ```
    static void CallFunction1(SomeClass *objectToCallFunction1On);
    static void CallFunction2(SomeClass *objectToCallFunction2On);
    ...
    static void CallFunction30(SomeClass *objectToCallFunction30On);

    void Function1();
    void Function2();
    ...
    void Function30(); 
    ```

2.  使用整数或枚举类型指定函数以调用特定对象：

    ```
    static void CallFunction(SomeClass *objectToCallFunctionOn, int functionToCall);

    void Function1();
    void Function2();
    ...
    void Function30(); 
    ```

我真的，*真的*不喜欢这两种解决方案。**有没有一个干净，简单的解决方案来解决这个问题？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T02:34:06.133

第一个选项是使用函数指针数组。

```
static void (*functionArray[30])(SomeClass *) = {
    Function1,
    Function2,
    Function3,
    Function4
    //
};

static void CallFunction(SomeClass *objectToCallFunctionOn, int functionToCall) {
   functionArray[functionToCall](objectToCallFunctionOn);
} 
```

* * *

另一种选择是对非类型模板参数做同样的事情。但我认为第一个选项公平地解决了这个问题。

# java - 为什么我的价格字符串没有显示在应用程序中

> ID：16006745
> 
> 赞同：2
> 
> 时间：2013-04-15T02:21:37.480
> 
> 标签：java, swing

所以我正在制作一个简单的小程序，它会在订购时计算披萨的价格。披萨有小号、中号或大号可供选择，还可以提供 2 种配料，但需额外付费（意大利辣香肠 1.25 美元，蘑菇 1.10 美元）。我创建了我的总变量并将成本放入要计算的程序中，但我的程序在我预期的总数中出现了空白。有任何想法吗？

![在此处输入图像描述](https://i.stack.imgur.com/l48uc.png)

```
import java.awt.BorderLayout;
import java.awt.Font;
import java.awt.GridLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import javax.swing.ButtonGroup;
import javax.swing.JButton;
import javax.swing.JCheckBox;
import javax.swing.JComboBox;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.JRadioButton;
import javax.swing.border.EtchedBorder;
import javax.swing.border.TitledBorder;

public class Test extends JFrame
{
    double total = 0;
    String totalPrint="$" + Double.toString(total);

   public Test()
   {  

      sampleField = new JLabel(totalPrint);
      add(sampleField, BorderLayout.CENTER);

      class ChoiceListener implements ActionListener
      {  
         public void actionPerformed(ActionEvent event)
         {  
            setSampleFont();
         }
      }

      listener = new ChoiceListener();

      createControlPanel();
      setSampleFont();
      setSize(FRAME_WIDTH, FRAME_HEIGHT);
   }

   public void createControlPanel()
   {
      JPanel sizeGroupPanel = createCheckBoxes();
      JPanel styleGroupPanel = createRadioButtons();

      JPanel controlPanel = new JPanel();
      controlPanel.setLayout(new GridLayout(2, 1));

      controlPanel.add(sizeGroupPanel);
      controlPanel.add(styleGroupPanel);

      add(controlPanel, BorderLayout.SOUTH);
   }

   public JPanel createCheckBoxes()
   {
      pCheckBox = new JCheckBox("Pepperoni");
      pCheckBox.addActionListener(listener);

      mCheckBox = new JCheckBox("Mushrooms");
      mCheckBox.addActionListener(listener);

      JPanel panel = new JPanel();
      panel.add(pCheckBox);
      panel.add(mCheckBox);
      panel.setBorder
         (new TitledBorder(new EtchedBorder(), "Toppings"));

      return panel;
   }

   public JPanel createRadioButtons()
   {
      smallButton = new JRadioButton("Small");
      smallButton.addActionListener(listener);

      mediumButton = new JRadioButton("Medium");
      mediumButton.addActionListener(listener);

      largeButton = new JRadioButton("Large");
      largeButton.addActionListener(listener);
      largeButton.setSelected(true);

      ButtonGroup group = new ButtonGroup();
      group.add(smallButton);
      group.add(mediumButton);
      group.add(largeButton);

      JPanel panel = new JPanel();
      panel.add(smallButton);
      panel.add(mediumButton);
      panel.add(largeButton);
      panel.setBorder
            (new TitledBorder(new EtchedBorder(), "Size"));

      return panel;
   }

   public void setSampleFont()
   {  

      if (pCheckBox.isSelected()) 
         total = total + 1.25;
      if (mCheckBox.isSelected()) 
         total = total + 1.10;

      double size = 0;
      double style = 0;

      final double SMALL_SIZE = 5.25;
      final double MEDIUM_SIZE = 7.55;
      final double LARGE_SIZE = 9.35;

      if (smallButton.isSelected()) 
         total = total + SMALL_SIZE;
      else if (mediumButton.isSelected()) 
          total = total + MEDIUM_SIZE;
      else if (largeButton.isSelected()) 
          total = total + LARGE_SIZE;

    sampleField.setFont(new Font(totalPrint, (int) style, (int) size));      
      sampleField.repaint();
   }

   private JLabel sampleField;
   private JCheckBox pCheckBox;
   private JCheckBox mCheckBox;
   private JRadioButton smallButton;
   private JRadioButton mediumButton;
   private JRadioButton largeButton;
   private ActionListener listener;

   private static final int FRAME_WIDTH = 300;
   private static final int FRAME_HEIGHT = 400;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T02:30:09.600

在这个星球上的任何地方都没有一种名为`"$" + Double.toString(total)`...的字体...

```
new Font(totalPrint, (int) style, (int) size) 
```

第一个参数应该是您要使用的字体的名称，而不是文本！

在修复此问题时，字体大小`0`将同时产生空白结果。

**更新了示例**

![在此处输入图像描述](https://i.stack.imgur.com/8rrKm.png)

```
public void setSampleFont() {

    if (pCheckBox.isSelected()) {
        total = total + 1.25;
    }
    if (mCheckBox.isSelected()) {
        total = total + 1.10;
    }

    // !! Supply a positive font size //
    double size = 64;
    // A nice style //
    double style = Font.BOLD;

    final double SMALL_SIZE = 5.25;
    final double MEDIUM_SIZE = 7.55;
    final double LARGE_SIZE = 9.35;

    if (smallButton.isSelected()) {
        total = total + SMALL_SIZE;
    } else if (mediumButton.isSelected()) {
        total = total + MEDIUM_SIZE;
    } else if (largeButton.isSelected()) {
        total = total + LARGE_SIZE;
    }

    // Use the JLabel's default font...
    Font font = UIManager.getFont("Label.font");
    // Derive a new font at the required size and style...
    font = font.deriveFont((int)style, (int)size);

    sampleField.setText(totalPrint);
    sampleField.setFont(font);
//        sampleField.repaint();
} 
```

在旁注中。您无需在每次想要更新价格时都执行此操作。在构造函数中设置一次字体...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-15T02:32:24.423

随着字体名称无效，字体大小应大于零才能看到：

```
double size = 0; // hello? 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-15T02:39:02.203

您应该使用[NumberFormat 的 getCurrencyInstance 方法](http://docs.oracle.com/javase/tutorial/i18n/format/numberFormat.html)，如以下代码片段所示：

```
 Double currencyAmount = new Double(9876543.21);
    Currency currentCurrency = Currency.getInstance(currentLocale);
    NumberFormat currencyFormatter = 
        NumberFormat.getCurrencyInstance(currentLocale);

    System.out.println(
        currentLocale.getDisplayName() + ", " +
        currentCurrency.getDisplayName() + ": " +
        currencyFormatter.format(currencyAmount)); 
```

# c# - 出现主表单时如何关闭登录表单？

> ID：16006746
> 
> 赞同：2
> 
> 时间：2013-04-15T02:22:00.703
> 
> 标签：c#, forms, login

我创建了一个两个表单`loginform`，`mainform`登录表单是我的启动程序，它验证用户名和密码是否正确然后它将打开主表单但问题是在主表单打开后登录表单仍然在主表单的后面.

在我 `btnSubmit_Click`的中，我`loginform`尝试了不同的命令`this.Hide()`，，，，也在加载时的主窗体中，我也执行这些命令来关闭它，`this.Close()`但它仍然存在，我无法移动它或手动关闭它。`this.Disposed()``loginform`

`loginform`是我的启动程序。

```
static class Program
    {
        /// <summary>
        /// The main entry point for the application.
        /// </summary>
        [STAThread]
        public static void Main()
        {
            Application.EnableVisualStyles();
            Application.SetCompatibleTextRenderingDefault(false);
            Application.Run(new frmLog());
        } 
```

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T02:37:10.467

一个简单的解决方案是将您的登录表单设置为变量并使用登录结果设置公共属性，然后在您的主表单上执行另一个 Application.Run，​​就在您的 Application.Run 在您的登录表单上。您要么必须在登录表单上调用 close 方法，要么设置 dialogresult 属性以关闭登录表单并移至主表单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T02:41:01.217

如果您要再次使用登录表单，那么您应该只隐藏登录表单。

```
mainform mf = new mainform();
mf.Tag = this;
mf.Show();
this.Hide(); 
```

并再次显示登录表单

```
var log = this.Tag as frmLog;
log.Show(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-15T02:51:55.543

只需在验证用户凭据后创建一个新对象并隐藏前一个对象，如下所示：

```
private void btnLogin_Click(object sender, EventArgs e)
{
    //after successfull validation 
    mainform objMainform = new mainform();
    objMainform.Show();
    this.Hide();
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-12-05T12:04:34.580

我认为 hide 不是这种工作的好命令..试试这个..

这是为 PROGRAM.CS

```
static void Main()
        {
            Application.EnableVisualStyles();
            Application.SetCompatibleTextRenderingDefault(false);
            FrmMain mainForm = new FrmMain();
            FrmUsername us = new FrmUsername();
            if (us.ShowDialog() != DialogResult.OK)
                return;
            Application.Run(mainForm);
        } 
```

这用于用户名表单中的输入按钮..

```
private void btm_Enter_Click(object sender, EventArgs e)
        {
            SqlCommand cmd = new SqlCommand("select count(*) from Tbl_Username where Username='" + txt_Username.Text + "' and Password='" + txt_Password.Text + "'", _sqlcon);
            _sqlcon.Open();
            int count = 0;
            count = (int)cmd.ExecuteScalar();
            if (count > 0)
            {
                DialogResult = System.Windows.Forms.DialogResult.OK;
            }
            else
            {
                DialogResult = System.Windows.Forms.DialogResult.None;
                MessageBox.Show("UserName or password is wrong", "ENTER", MessageBoxButtons.OK, MessageBoxIcon.Error, MessageBoxDefaultButton.Button1);
            }

            _sqlcon.Close();
        } 
```

# shell - 如何用unix中的字符串替换一行中的最后一个逗号

> ID：16006747
> 
> 赞同：0
> 
> 时间：2013-04-15T02:22:08.500
> 
> 标签：shell, unix

我试图在除了文件中的第一行和最后一行之外的每一行中插入一个字符串，但无法完成它，任何人都可以提供一些线索如何实现？提前致谢。

如何使用unix将一行中的最后一个逗号替换为字符串xxxxx（第一行和最后一行除外）

原始文件

```
00,SRI,BOM,FF,000004,20120808030100,20120907094412,"GTEXPR","SRIVIM","8894-7577","SRIVIM@GTEXPR."
10,SRI,FF,NMNN,3112,NMNSME,U,NM,GEB,,230900,02BLYPO
10,SRI,FF,NMNN,3112,NMNSME,U,NM,TCM,231040,231100,01
10,SRI,FF,NMNN,3112,NMNSME,U,NM,UPW,231240,231300,01
10,SRI,FF,NMNN,3112,NMNSME,U,NM,UFG,231700,231900,01
10,SRI,FF,NMNN,3112,NMNSME,U,NM,FTG,232140,232200,01
10,SRI,FF,NMNN,3112,NMNSME,U,NM,BOR,232340,232400,01
10,SRI,FF,NMNN,3112,NMNSME,U,NM,BAY,232640,232700,01
10,SRI,FF,NMNN,3112,NMNSME,U,NM,RWD,233400,,01
10,SRI,FF,BUN,0800,NMJWJB,U,NM,CCL,,101400,02CHLSU
10,SRI,FF,BUN,0800,NMJWJB,U,NM,PAR,101540,101700,01
10,SRI,FF,BUN,0800,NMJWJB,U,NM,MCE,101840,101900,01
10,SRI,FF,BUN,0800,NMJWJB,U,NM,SSS,102140,102200,09
10,SRI,FF,BUN,0800,NMJWJB,U,NM,FSS,102600,,01
10,SRI,FF,BUN,0802,NMJWJB,U,NM,CCL,,103700,01CHLSU
10,SRI,FF,BUN,0802,NMJWJB,U,NM,PAR,103940,104000,01
10,SRI,FF,BUN,0802,NMJWJB,U,NM,MCE,104140,104200,01
10,SRI,FF,BUN,0802,NMJWJB,U,NM,SSS,104440,104500,09
10,SRI,FF,BUN,0802,NMJWJB,U,NM,FSS,105000,,01
10,SRI,FF,BUN,3112,NMNSME,U,NM,GEB,,230900,02BLYSU
10,SRI,FF,BUN,3112,NMNSME,U,NM,TCM,231040,231100,01
10,SRI,FF,BUN,3112,NMNSME,U,NM,UPW,231240,231300,01
10,SRI,FF,BUN,3112,NMNSME,U,NM,UFG,231700,231900,01
10,SRI,FF,BUN,3112,NMNSME,U,NM,FTG,232140,232200,01
10,SRI,FF,BUN,3112,NMNSME,U,NM,BOR,232340,232400,01
10,SRI,FF,BUN,3112,NMNSME,U,NM,BAY,232640,232700,01
10,SRI,FF,BUN,3112,NMNSME,U,NM,RWD,233400,,01
99,SRI,FF,28 
```

预期文件

```
00,SRI,BOM,FF,000004,20120808030100,20120907094412,"GTEXPR","SRIVIM","8894-7577","SRIVIM@GTEXPR."
10,SRI,FF,NMNN,3112,NMNSME,U,NM,GEB,,230900,xxxxx02BLYPO
10,SRI,FF,NMNN,3112,NMNSME,U,NM,TCM,231040,xxxxx231100,01
10,SRI,FF,NMNN,3112,NMNSME,U,NM,UPW,231240,xxxxx231300,01
10,SRI,FF,NMNN,3112,NMNSME,U,NM,UFG,231700,xxxxx231900,01
10,SRI,FF,NMNN,3112,NMNSME,U,NM,FTG,232140,xxxxx232200,01
10,SRI,FF,NMNN,3112,NMNSME,U,NM,BOR,232340,xxxxx232400,01
10,SRI,FF,NMNN,3112,NMNSME,U,NM,BAY,232640,xxxxx232700,01
10,SRI,FF,NMNN,3112,NMNSME,U,NM,RWD,233400,,xxxxx01
10,SRI,FF,BUN,0800,NMJWJB,U,NM,CCL,,101400,xxxxx02CHLSU
10,SRI,FF,BUN,0800,NMJWJB,U,NM,PAR,101540,101700,xxxxx01
10,SRI,FF,BUN,0800,NMJWJB,U,NM,MCE,101840,101900,xxxxx01
10,SRI,FF,BUN,0800,NMJWJB,U,NM,SSS,102140,102200,xxxxx09
10,SRI,FF,BUN,0800,NMJWJB,U,NM,FSS,102600,,xxxxx01
10,SRI,FF,BUN,0802,NMJWJB,U,NM,CCL,,103700,xxxxx01CHLSU
10,SRI,FF,BUN,0802,NMJWJB,U,NM,PAR,103940,104000,xxxxx01
10,SRI,FF,BUN,0802,NMJWJB,U,NM,MCE,104140,104200,xxxxx01
10,SRI,FF,BUN,0802,NMJWJB,U,NM,SSS,104440,104500,xxxxx09
10,SRI,FF,BUN,0802,NMJWJB,U,NM,FSS,105000,,xxxxx01
10,SRI,FF,BUN,3112,NMNSME,U,NM,GEB,,230900,xxxxx02BLYSU
10,SRI,FF,BUN,3112,NMNSME,U,NM,TCM,231040,231100,xxxxx01
10,SRI,FF,BUN,3112,NMNSME,U,NM,UPW,231240,231300,xxxxx01
10,SRI,FF,BUN,3112,NMNSME,U,NM,UFG,231700,231900,xxxxx01
10,SRI,FF,BUN,3112,NMNSME,U,NM,FTG,232140,232200,xxxxx01
10,SRI,FF,BUN,3112,NMNSME,U,NM,BOR,232340,232400,xxxxx01
10,SRI,FF,BUN,3112,NMNSME,U,NM,BAY,232640,232700,xxxxx01
10,SRI,FF,BUN,3112,NMNSME,U,NM,RWD,233400,,xxxxx01
99,SRI,FF,28 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T02:49:57.093

`awk`对于操作像这样的数据文件非常有用。这是一个或多或少你想要的单线。它将字符串“xxxxx”添加到每个至少有十二个字段的输入行的第十二个字段。

```
$ awk 'BEGIN{FS=OFS=","}NF>11{$12="xxxxx"$12}{print}' 16006747.txt 
00,SRI,BOM,FF,000004,20120808030100,20120907094412,"GTEXPR","SRIVIM","8894-7577","SRIVIM@GTEXPR."
10,SRI,FF,NMNN,3112,NMNSME,U,NM,GEB,,230900,xxxxx02BLYPO
10,SRI,FF,NMNN,3112,NMNSME,U,NM,TCM,231040,231100,xxxxx01
10,SRI,FF,NMNN,3112,NMNSME,U,NM,UPW,231240,231300,xxxxx01
10,SRI,FF,NMNN,3112,NMNSME,U,NM,UFG,231700,231900,xxxxx01
10,SRI,FF,NMNN,3112,NMNSME,U,NM,FTG,232140,232200,xxxxx01
10,SRI,FF,NMNN,3112,NMNSME,U,NM,BOR,232340,232400,xxxxx01
10,SRI,FF,NMNN,3112,NMNSME,U,NM,BAY,232640,232700,xxxxx01
10,SRI,FF,NMNN,3112,NMNSME,U,NM,RWD,233400,,xxxxx01
10,SRI,FF,BUN,0800,NMJWJB,U,NM,CCL,,101400,xxxxx02CHLSU
10,SRI,FF,BUN,0800,NMJWJB,U,NM,PAR,101540,101700,xxxxx01
10,SRI,FF,BUN,0800,NMJWJB,U,NM,MCE,101840,101900,xxxxx01
10,SRI,FF,BUN,0800,NMJWJB,U,NM,SSS,102140,102200,xxxxx09
10,SRI,FF,BUN,0800,NMJWJB,U,NM,FSS,102600,,xxxxx01
10,SRI,FF,BUN,0802,NMJWJB,U,NM,CCL,,103700,xxxxx01CHLSU
10,SRI,FF,BUN,0802,NMJWJB,U,NM,PAR,103940,104000,xxxxx01
10,SRI,FF,BUN,0802,NMJWJB,U,NM,MCE,104140,104200,xxxxx01
10,SRI,FF,BUN,0802,NMJWJB,U,NM,SSS,104440,104500,xxxxx09
10,SRI,FF,BUN,0802,NMJWJB,U,NM,FSS,105000,,xxxxx01
10,SRI,FF,BUN,3112,NMNSME,U,NM,GEB,,230900,xxxxx02BLYSU
10,SRI,FF,BUN,3112,NMNSME,U,NM,TCM,231040,231100,xxxxx01
10,SRI,FF,BUN,3112,NMNSME,U,NM,UPW,231240,231300,xxxxx01
10,SRI,FF,BUN,3112,NMNSME,U,NM,UFG,231700,231900,xxxxx01
10,SRI,FF,BUN,3112,NMNSME,U,NM,FTG,232140,232200,xxxxx01
10,SRI,FF,BUN,3112,NMNSME,U,NM,BOR,232340,232400,xxxxx01
10,SRI,FF,BUN,3112,NMNSME,U,NM,BAY,232640,232700,xxxxx01
10,SRI,FF,BUN,3112,NMNSME,U,NM,RWD,233400,,xxxxx01
99,SRI,FF,28 
```

# css - 不添加边距的框阴影

> ID：16006748
> 
> 赞同：0
> 
> 时间：2013-04-15T02:22:10.763
> 
> 标签：css

是否可以在不添加“边距”的情况下添加框阴影？基本上，我有一个包装 div，我不希望 box-shadow 创建一个边距。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T02:25:59.107

是的，这是可能的，事实上，添加 a`box-shadow` *并不会*隐式添加边距。

[一个简单的例子](http://jsfiddle.net/uXCRw/)证明了这一点：s 之间的间距`span`是由源中的空间引起的；那不是边距，也没有添加边距。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T14:29:33.267

好的，我发现我没有进行 CSS 重置并修复了它。

# c# - 使用Unity调用静态注入方法

> ID：16006752
> 
> 赞同：1
> 
> 时间：2013-04-15T02:22:36.140
> 
> 标签：c#, dependency-injection, unity-container

我们有一个类（实际上有很多），它有一个静态初始化函数，它需要在依赖注入容器中的一个对象上执行（使用 Unity）。

```
public class MyClass
{
    public static void InitializeMappings(IMapper mapper)
    {
        // Do stuff to mapper
    }
} 
```

我希望`InitializeMappings`每当 Unity 容器实例化一个新的 IMapper 实例时调用该函数。

我需要帮助：

*   `InitializeMappings`从容器调用函数
*   解析`mapper`函数调用的参数
*   将调用连接`InitializeMappings`到 IMapper 实现的生命周期

我将如何实施/定义这个？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-17T19:55:51.947

这是糟糕的设计；为什么不让映射器实现直接在其构造函数中调用 setup 函数？

您可以通过扩展或使用注入工厂来让容器执行此操作。像这样的东西：

```
container.RegisterType<IMapper>(
    new WhateverLifetimeYouWant(),
    new InjectionFactory(
        c => {
            var mapper = c.Resolve<IMapper>("RealMapper");
            MyClass.InitializeMappings(mapper);
            return mapper;
        }
)
.RegisterType<IMapper, ActualMapper>("RealMapper"); 
```

然后，无论何时你这样做`container.Resolve<IMapper>()`，它都会运行那一小段代码。

这仅适用于 API，而不适用于配置文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-16T06:08:42.103

在 WPF 中，我相信您可以执行以下操作

```
container.RegisterType<Mapper, Mapper>();
container.Register<IMapper>(
    new InjectionFactory(c => {
        var mapper = c.Resolve<Mapper>(); 
        MyClass.InitializeMappings(mapper);
        return mapper;
    })
); 
```

至于“将调用连接到 IMapper 的生命周期”，我不明白你的意思。当映射器对象存在时，任何创建并仅由映射器对象引用的对象都将被垃圾收集。

# windows-8 - WinRT 在页面导航之间存储会话状态

> ID：16006755
> 
> 赞同：1
> 
> 时间：2013-04-15T02:22:55.093
> 
> 标签：windows-8, windows-runtime, session-state

我是 WinRT 的新手，并且正在玩会话状态。我正在导航到一个页面以收集数据，然后想要返回主页。就在导航之前，我正在使用：

```
SuspensionManager.SessionState["CurrentState"] = someObject; 
```

该对象包含其他轻度复杂对象的列表等...一切似乎都在工作，但这是使用暂停管理器的正确方法吗？

我查看了有关该主题的其他帖子，有人报告说有必要对所有序列化的类使用 [DataContract] 和 [DataMember] 属性。我省略了它们，它仍然有效（跨页面获取数据）。那么推荐的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T03:40:08.007

我可能对您的问题的某个方面阅读过多，但是*如果*应用程序在暂停时实际终止，则`SuspensionManager`and的作用`SessionState`是存储足够的信息以将您的应用程序带回用户离开它的位置。

 *在[Windows 8 应用程序生命周期](http://msdn.microsoft.com/en-us/library/windows/apps/Hh986968.aspx)中，如果另一个应用程序出现在前台，您的应用程序将被“暂停”。当您的应用程序暂停时，其所有状态都保留在内存中，如果重新激活（您翻转回它），一切*都会“免费”恢复。

但是，暂停的应用程序也可能被操作系统终止（例如内存压力的 b/c），并且没有机会在您的应用程序中对这种情况做出反应，因此您真正要做的`SessionState`是存储**必要**的内容如果应用程序实际终止，则“重新创建”用户所在的最后一个位置。它本质上是一份保险单：如果应用程序只是暂停，`SessionState`则不是真正需要的。

“什么是必要的”是灰色区域，我*可以*存储有关正在进行的用户配置文件的所有信息，或者我可以只保存索引到所有用户配置文件数据的持久存储中的用户 ID。我通常有更多的极简主义观点，并且会尽可能少地保留`SessionState`- 我打个比方，我不需要记住所有内容，我只需要记住如何/从哪里获取/找到所有内容。

您的问题也暗示您`SessionState`用于在应用程序的页面之间传递信息，而这并不是真正的意图。应用程序的每个页面通常都与视图模型相关联，当您与该应用程序的页面交互时，您将更新视图模型并通过视图模型中已有的更改驱动额外的屏幕和体验。离开你的应用程序的一个屏幕并返回主屏幕也意味着你已经保存了你收集的任何信息 - 当然是视图模型，但也保存到数据库或本地存储等持久化的东西。当您重新访问该页面时，您会将数据从视图模型（或该持久存储）中拉回；主页不需要这些信息，为什么还要坚持呢？

最后，由于您提到是 WinRT 新手，您可能需要查看[App Builder](http://aka.ms/8in30SO)，它以可消耗的块的形式汇集了许多资源，以引导您在 30 天内构建应用程序（尽管所有材料都可用，所以你可以以任何你想要的速度消费:)) 与你的问题密切相关的生命周期管理的讨论出现在该序列的第 17 天。

*“一切都免费恢复”并不一定意味着当应用程序退出暂停状态时您没有任何工作要做。可能存在需要刷新的陈旧数据，并且可能需要刷新/重新创建连接或其他临时或短期实体。*

# mongodb - 如何管理 GridFS MongoDB 数据库的磁盘大小？

> ID：16006758
> 
> 赞同：0
> 
> 时间：2013-04-15T02:23:16.327
> 
> 标签：mongodb, gridfs

我有一个`GridFS MongoDB`需要管理其大小的数据库。它自创建以来一直运行良好，但直到现在我才真正查看过它的磁盘大小。

从`db.stats()`命令的输出来看

```
> db.stats()
{
    "db" : "documents",
    "collections" : 4,
    "objects" : 10967,
    "avgObjSize" : 52491.573994711405,
    "dataSize" : 575675092,
    "storageSize" : 595255296,
    "numExtents" : 24,
    "indexes" : 4,
    "indexSize" : 686784,
    "fileSize" : 2080374784,
    "nsSizeMB" : 16,
    "ok" : 1
} 
```

似乎数据库本身大约有 600MB。这个大小对我来说很有意义，因为它与我从中获得的数据库备份大小相同`mongodump`。但是文件大小要大得多，当我查看数据目录本身时，它会变得更糟`/var/lib/mongodb`：

```
root@deathstar:/var/lib/mongodb# ls -la
total 2474036
drwxr-xr-x  5 mongodb mongodb       4096 Apr 15 09:28 .
drwxr-xr-x 62 root    root          4096 Mar  4 07:48 ..
drwxr-xr-x  2 mongodb mongodb       4096 Apr 13 11:48 documents
-rw-------  1 mongodb mongodb   67108864 Apr 15 09:16 documents.0
-rw-------  1 mongodb mongodb  134217728 Apr 13 11:48 documents.1
-rw-------  1 mongodb mongodb  268435456 Apr 13 11:48 documents.2
-rw-------  1 mongodb mongodb  536870912 Apr 15 09:16 documents.3
-rw-------  1 mongodb mongodb 1073741824 Apr 13 11:50 documents.4
-rw-------  1 mongodb mongodb   16777216 Apr 15 09:16 documents.ns
drwxr-xr-x  2 mongodb mongodb       4096 Apr 13 11:50 journal
-rwxr-xr-x  1 mongodb mongodb          5 Apr 13 11:46 mongod.lock
drwxr-xr-x  2 mongodb mongodb       4096 Apr 15 09:28 _tmp
-rw-------  1 mongodb mongodb   67108864 Apr 15 09:28 -v.0
-rw-------  1 mongodb mongodb   67108864 Apr 15 09:28 v.0
-rw-------  1 mongodb mongodb  134217728 Apr 15 09:28 -v.1
-rw-------  1 mongodb mongodb  134217728 Apr 15 09:28 v.1
-rw-------  1 mongodb mongodb   16777216 Apr 15 09:28 -v.ns
-rw-------  1 mongodb mongodb   16777216 Apr 15 09:28 v.ns 
```

这在`/var/lib/mongodb/journal`：

```
root@deathstar:/var/lib/mongodb/journal# ls -la
total 3145752
drwxr-xr-x 2 mongodb mongodb       4096 Apr 13 11:50 .
drwxr-xr-x 5 mongodb mongodb       4096 Apr 15 09:28 ..
-rw------- 1 mongodb mongodb 1073741824 Apr 15 09:28 j._2
-rw------- 1 mongodb mongodb         88 Apr 15 09:28 lsn
-rw------- 1 mongodb mongodb 1073741824 May  5  2012 prealloc.1
-rw------- 1 mongodb mongodb 1073741824 May  5  2012 prealloc.2 
```

如果我错了，现在纠正我，但我基本上是在查看 600MB 数据库的 5.5GB 磁盘大小。那是相当低效的。

如何减小磁盘大小？是否有与`OPTIMIZE TABLE`in类似的命令`MySQL`？

我不知道它是否`GridFS`与常规数据库不同，但我尝试运行[compact](http://docs.mongodb.org/manual/reference/command/compact/)但它对磁盘大小没有任何影响。

日志文件呢？我可以以某种方式减小所有日志文件的磁盘大小吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T05:31:31.257

大文件的问题并非特定于 GridFS。

日志可以提供持久性，MongoDB 总是在需要文件之前预先分配文件。我建议不要在此处更改任何内容 - 即继续使用日志来保护您的文件，以防服务器意外崩溃。

您使用 mongodump 会看到小得多的文件，因为您没有获得预分配的数据文件或日志文件。

如果您想拥有更小的数据库目录，我建议您查看mongod 的选项`--smallfiles`。`--noprealloc`两者都会影响分配空间的时间以及一次分配多少空间。

# sql - 选择语句语法错误中的子查询

> ID：16006762
> 
> 赞同：0
> 
> 时间：2013-04-15T02:23:40.410
> 
> 标签：sql, oracle

我正在尝试运行以下查询，但我不断收到错误消息：`**ORA-01756: quoted string not properly terminated**`

```
SELECT
    InnerTable."Cycle ID",
    (
    SELECT REPLACE(SYS_CONNECT_BY_PATH(CF_ITEM_NAME,'//'),'//','/')
            AS "Path1"
            FROM CYCL_FOLD
            START WITH CF_FATHER_ID = InnerTable."Cycle ID"
            CONNECT BY PRIOR CF_ITEM_ID = CF_FATHER_ID
    ) as "path1",
    InnerTable."CSR/RCQ Name",
    TEST.TS_DESCRIPTION as "Test Case Description",
FROM
(-- few conditions here
) InnerTable INNER JOIN TEST  ON InnerTable."Test Case ID" = TEST.TS_TEST_ID 
```

任何人都可以告诉我语法有什么问题..非常感谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T02:32:59.540

此错误意味着您有奇数个单引号。

您发布的代码段仅包含平衡的引号对 - 在 REPLACE(SYS_CONNECT_BY_PATH(CF_ITEM_NAME() 链中。所以问题必须出在查询的删除部分：

```
-- few conditions here 
```

编辑是否包含任何字符串文字？如果是这样，请检查它们。

使用支持 SQL 语法突出显示的 IDE 很容易发现此错误。

* * *

> “我没有发现单引号或双引号有任何错误”

我也不。嗯。

有可能`/`以某种方式转义引用。这将取决于您的客户端设置。在 SQL*Plus 中，ESCAPE 默认是关闭的，除了默认的转义字符是`\`. 所以你的陈述将适用于我的设置......

```
SQL> sho escape
escape OFFSQL> select '//' from dual
  2  /

'/
--
//

SQL> c.//./
  1* select '/' from dual
SQL> r
  1* select '/' from dual

'
-
/

SQL> set escape on
SQL> r
  1* select '/' from dual

'
-
/

SQL> 
```

...但无论如何都要检查您的客户端设置。

# php - 计算平方欧几里得距离

> ID：16006763
> 
> 赞同：2
> 
> 时间：2013-04-15T02:23:44.860
> 
> 标签：php, mysql, euclidean-distance

我有一个 exe，它返回一个包含 16 个元素的数组。我必须使用 php 将此数组传递给 Mysql 来计算欧几里德距离。我在 MySQL 中的表是这种形式。

```
 id |img_id | features_1|features_2|features_3|features_4|features_5|features_6|features_7|...upto features_16
     1   1        0.389       0.4567     0.8981      0.2345
     2   2        0.9878      0.4567     0.56122     0.4532        
     3   3        
     4   4        
     ...................... 
```

所以我为每个图像有 16 个特征，现在我有 30,000 个图像，img_id 最多为 30,000。我必须从通过 php 传递的 exe 中计算数组的欧几里德距离，并返回欧几里德距离最小的 6 个图像的 img_id。即假设我有一个来自 exe A[0.458,0.234,0.4567,0.2398] 的数组，我必须用这个数组计算每个 img_id 的距离，即对于 img_id=1，距离将为 ((0.458-0.389)^2+(0.234- 0.4567)^2+(0.4567-0.8981)^2+(0.2398-0.2345)^2) 我必须对所有 30,000 张图像重复此过程并返回距离最短的 6 个 img_id。什么是计算它的有效和快速的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T16:07:41.427

由于 php 很慢，您应该直接在 SQL 中执行此操作，如下所示：

```
SELECT * FROM tablename 
ORDER BY ABS(f1 - :f1) + ABS(f2 - :f2) + ... DESC
LIMIT 6; 
```

请注意，我使用绝对范数而不是欧几里德范数，如果您对实际值不感兴趣（因为在具有有限维数的向量空间中，所有范数都是等价的），这没有区别。用于示例的 sqlite 不提供该`SQUARE`功能，并且一直编写`(f1 - :f1) * (f1 - :f1)`很烦人，所以我想这是一个不错的解决方案。

# jquery - Mockjax 干扰 X 可编辑更新 (AJAX)

> ID：16006764
> 
> 赞同：0
> 
> 时间：2013-04-15T02:23:53.967
> 
> 标签：jquery, mysql, ajax, mockjax

```
$(function(){

            //enable / disable
            $('#enable').click(function() {
                $('#user .editable').editable('http://domain.com/update.php');
            });    

            //modify buttons style
            $.fn.editableform.buttons = 
            '<button type="submit" class="btn btn-success editable-submit btn-mini"><i class="icon-ok icon-white"></i></button>' +
            '<button type="button" class="btn editable-cancel btn-mini"><i class="icon-remove"></i></button>';  

            //editables 
            $('.remarks').editable({
                url: 'http://domain.com/update.php',
                display: function(value, response) {
                //render response into element
                $(this).html(response);
                }
            });

            //ajax emulation. 
            $.mockjax({
                url: 'http://domain.com/update.php',
                responseTime: 400,
                response: function(settings) {
                this.responseText = settings.data.value;
                }
            });

        }); 
```

在不使用**Mockjax**的情况下，MySQL 行更新正在工作，但 html 页面中的元素未更新。

如果我使用**Mockjax**，则 html 页面中的元素会更新，但 MySql 行不会更新。

有什么解决方法吗？

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T18:47:34.590

你为什么使用mockjax？据我了解，mockjax 仅用于模拟目的，您应该使用 ajax。像这样：

```
 $('#a').editable({
    validate: function(value) {
        if($.trim(value) == '') return 'This value is required.';
    },
    type: 'text',
    url: '/post',
    pk: '123', // id of the row in your db...
    title: 'Enter Value',
    params: function(params) {
        var data = {};
        data['id'] = line;
        data['field'] = params.name;
        data['value'] = params.value;
        return data;
    },
    ajaxOptions: {
        dataType: 'json'
    },
    display: function(value, response) {
        $(this).text(response.new_value_from_server);
    },
    success: function(response, newValue) {
        // output what ever you want here if the submit was successfull...
    }
}); 
```

# java - 使用 Java 验证格式棘手的文件

> ID：16006766
> 
> 赞同：0
> 
> 时间：2013-04-15T02:24:00.473
> 
> 标签：java, parsing, validation

我需要解析和验证一个格式有点棘手的文件。

基本上该文件采用以下格式：

```
 \n -- just to make clear it may have empty lines
   CLIENT_ID
   A_NUMERIC_VALUE
   ONE_LINE_OF_SOME_RANDOM_COMMENT_ABOUT_THE_CLIENT
   ANOTHER_LINE_OF_SOME_RADOM_COMMENT_ABOUT_THE_CLIENT
   \n
   \n
   CLIENT_ID_2
   A_NUMERIC_VALUE_2
   ONE_LINE_OF_SOME_RANDOM_COMMENT_ABOUT_THE_CLIENT_2
   ANOTHER_LINE_OF_SOME_RADOM_COMMENT_ABOUT_THE_CLIENT_2
   OHH_THIS_ONE_HAS_THREE_LINES_OF_COMMENTS 
```

该文件很少会很大（10 mb 可能是我见过的最大的文件 - 通常它们大约有 900kb-1mb）。

所以我有两个问题：

1）如何有效地验证文件的格式？使用正则表达式 + 扫描仪？（如果我可以将每个客户端条目仅转换为一个字符串，我认为这是一个非常可行的选择 - 所以我可以在其上应用正则表达式）。

2）我需要将文件中的每个条目转换为客户端对象。我应该在将整个文件转换为 Java 对象之前对其进行验证吗？还是应该在继续将其条目转换为 Java 对象时验证该文件？（请记住，如果任何客户端条目无效，处理将立即停止并引发异常 - 因此创建的任何对象都将被丢弃）。

我真的很想看到您对问题 #1 的建议。问题 #2 更让我好奇你将如何处理这种情况。如果愿意，请忽略 #2，但请回答 #1 =)

有谁知道任何框架可以帮助我顺便处理文件？

谢谢。

**更新：**

我看到了这个[问题](https://stackoverflow.com/questions/8659698/txt-file-format-validation-in-java)，问题与我的非常相似，但我不确定正则表达式是否是解决这个问题的最佳方法。整个文件中可能有相当多的“\n”，每个客户端条目的注释数量和可选 ID 的数量不同 - 因此正则表达式必须非常复杂。这就是为什么我在问题 #1 中提到将每个条目转换为一行的原因，因为这种方式会更容易创建一个正则表达式来验证......然而，这个解决方案在我看来并不是很优雅:(

干杯。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T04:57:54.733

如果您打算在发现任何部分无效时使批处理失败，请先验证文件。

有几个优点。一是验证和处理不必同步。例如，如果您每天处理批次，但全天都接收文件，您可以全天验证它们并在计划处理之前通知纠正问题。另一个是验证文件是否格式正确的速度非常快。

一个简短的、简单的 perl 脚本肯定可以完成这项工作。如果我正确理解了模式，则无需转换数据，并且都是向前读的。

```
read past any newlines
read and validate a client id
read and validate a numeric value
read and validate one or more comments until a blank line is found
repeat the above four steps until EOF or invalid data detected 
```

# jquery - Filepicker 按钮无法正确显示通过 jQuery 和 Rails 附加的 div

> ID：16006768
> 
> 赞同：0
> 
> 时间：2013-04-15T02:24:37.797
> 
> 标签：jquery, ruby-on-rails, filepicker.io, filepicker

我的应用程序允许用户创建帖子。每个帖子都有许多评论，并且帖子的 HTML 允许用户创建新评论。这是一篇文章的 HTML：

```
<div id="post_2_main_comments_thoughts" class="">
                    <form accept-charset="UTF-8" action="/posts/53/comments" class="new_comment" id="new_comment" method="post"><div style="margin:0;padding:0;display:inline"><input name="utf8" type="hidden" value="✓"><input name="authenticity_token" type="hidden" value="private="></div>
                        <div id="post_2_main_comments_thoughts_author_pic" style="display: inline-block; vertical-align: top; padding: 3px; border: 1px solid #ddd; background-color: rgba(204, 204, 204, 0.2); border-radius: 100px; -webkit-border-radius: 100px; -moz-border-radius: 100px;">
                            <a href="/users/59" style="display: inline-block; text-indent: -9999px; width: 42px; height: 42px; background-image: url('/system/users/avatars/000/000/059/small/stringio.txt?1365876613'); background-repeat: none; border: 1px solid white; border-radius: 35px; -webkit-border-radius: 35px; -moz-border-radius: 35px;">Ryan</a>
                        </div>
                  <input class="new_comment_input" id="comment_content" name="comment[content]" onblur="if(this.value=='')this.value=this.defaultValue;" onfocus="if(this.value==this.defaultValue)this.value='';" size="30" type="text" value="thoughts?">
<button type="button" class="thoughts_attachment">Pick File</button><input data-fp-apikey="private" data-fp-button-class="thoughts_attachment" data-fp-button-text="Pick File" data-fp-drag-text="Or drop files here" data-fp-option-multiple="false" data-fp-option-services="" id="comment_attachment_url" name="comment[attachment_url]" size="30" type="filepicker" style="display: none;"> 

                  <input name="commit" style="visibility: hidden;" type="submit" value="Create Comment">
</form>             </div> 
```

这是生成此 HTML 的 erb：

```
<div id="post_2_main_comments">
            <% post.comments.each do |comment| %>
                <%= render partial: 'comments/comment', locals: {comment: comment} %>
            <% end %>
            <div id="post_2_main_comments_thoughts" class="">
                <%= form_for [post, Comment.new] do |f| %>
                    <div id="post_2_main_comments_thoughts_author_pic" style="display: inline-block; vertical-align: top; padding: 3px; border: 1px solid #ddd; background-color: rgba(204, 204, 204, 0.2); border-radius: 100px; -webkit-border-radius: 100px; -moz-border-radius: 100px;">
                        <a href="<%= user_path(@current_user) %>" style="display: inline-block; text-indent: -9999px; width: 42px; height: 42px; background-image: url('<%= current_user.avatar.url(:small) %>'); background-repeat: none; border: 1px solid white; border-radius: 35px; -webkit-border-radius: 35px; -moz-border-radius: 35px;"><%= @current_user.name %></a>
                    </div>
              <%= f.text_field :content, class: "new_comment_input", value: "thoughts?", :onfocus => "if(this.value==this.defaultValue)this.value='';", :onblur => "if(this.value=='')this.value=this.defaultValue;" %>

              <%= f.filepicker_field :attachment_url, button_class: "thoughts_attachment" %> 

              <%= f.submit style: "visibility: hidden;"%>
            <% end %>
            </div>
        </div> 
```

当我通过 HTML 创建帖子时，评论表单会正确呈现。但是，如果我通过 Ajax 创建帖子，然后通过 jQuery 将帖子附加到页面，它会错误地呈现文件选择器部分。也就是说，它不会呈现按钮，也不会将 style="display: none;") 添加到文件选择器输入字段。请参阅下面的区别。

```
<input data-fp-apikey="private" data-fp-button-class="thoughts_attachment" data-fp-button-text="Pick File" data-fp-drag-text="Or drop files here" data-fp-option-multiple="false" data-fp-option-services="" id="comment_attachment_url" name="comment[attachment_url]" size="30" type="filepicker"> 
```

如果我在 jQuery 添加的代码部分上手动添加按钮和文件选择器输入表单的附加 HTML，它可能看起来与 HTML 查询创建的帖子相同，但单击按钮不会欺骗文件选择器对话框。如果我刷新页面，将正确呈现有问题的评论表单。

如何让评论表单通过 jQuery 正确呈现我的按钮？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T02:59:41.387

查看`filepicker.constructWidget`调用，它将执行您正在查找的操作。请参阅[https://developers.filepicker.io/docs/web/#widgets-programming](https://developers.filepicker.io/docs/web/#widgets-programming)

# django - Django / WSGI 空白页

> ID：16006769
> 
> 赞同：0
> 
> 时间：2013-04-15T02:24:41.887
> 
> 标签：django, apache, wsgi

我试图让 Django 使用 WSGI 与 Apache 一起工作。问题是它只是返回一个空页面（200 OK 或 203 未修改）。

在重新启动或访问 error.log 或 django-error.log 中的页面时，我找不到任何错误。不过 django-access.log 中有一个条目。

```
WSGIPythonPath /web/django/dtest/
<VirtualHost *:80>
    ServerAdmin webmaster@localhost
    DocumentRoot /web/django
    ServerName django.markv.nl
    <Directory />
        Options FollowSymLinks Includes
        AllowOverride All
    </Directory>
    WSGIScriptAlias /wsgi-scripts/ /web/django/dtest/dtest/wsgi.py
    LogLevel info
    ErrorLog ${APACHE_LOG_DIR}/django-error.log
    CustomLog ${APACHE_LOG_DIR}/django-access.log common
</VirtualHost> 
```

*   我尝试使用`manage.py runserver`，在这种情况下它工作正常，所以这确实是一个 apache/wsgi 问题。
*   我尝试禁用 mod_php5 没有结果（除了 PHP 停止工作）。

任何线索是什么问题或我在哪里可以找到错误？这可能是微不足道的，但我找不到它......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T07:02:56.333

您正在为您的应用程序提供服务`/wsgi-scripts/`，这似乎是一件奇怪的事情，因此您需要访问该 URL 才能看到它。

请注意，您绝对不想将 DocumentRoot 设置为 Django 文件的位置，尽管这不是问题的根源。

# css - 我的自制导航的 CSS 过渡

> ID：16006771
> 
> 赞同：0
> 
> 时间：2013-04-15T02:24:47.510
> 
> 标签：css, menu, transition, nav

我自己为我的网站创建了一个导航菜单，我不是专家，但我认为菜单效果很好......我希望我的菜单打开速度比即时慢一点，也许有 0.5 秒的过渡...... .我试图实现自己，但我似乎无法弄清楚....我创建了一个jsfiddle来显示我的导航栏...我希望有人可以告诉我如何拥有一个如果可能的话，过渡到所有的下拉菜单......谢谢

jsfiddle： http: [//jsfiddle.net/vRdEp/](http://jsfiddle.net/vRdEp/) （这里有点破）我的网站：www.curious-howto.com

我的CSS：

```
ul#navitemul {
border-radius: 0px 20px 20px 20px;
margin:0px!important;
width:500px;
}

.belownav {
top:0px;
left:183px;
position:absolute;
z-index:100;
box-shadow: 0 0 10px #000 inset;
border-radius: 5px 0px 0px 5px;
padding:20px!important;
background:#282828!important;
}

.navitem a {
margin-right: 10px;
border: 1px solid #424242!important;
text-overflow:ellipsis;
display:block;
overflow:hidden;
border-radius:5px;
width:200px!important;
padding:0px!important;
float:left;
height:40px;
background:#424242!important;
}

.navitem a:hover {
border:1px solid #585858!important;
background:#000!important;
}

img.fl {
float:left;
}

span.marleft {
letter-spacing:1px;
font-size:12px!important;
text-decoration:none;
color:white!important;
margin-left:15px!important;
line-height:38px;
}

li.marright{
float:left!important;
margin-bottom:10px!important;
margin-right:10px!important;
}

.ontop{
color:white;
font-size:28px!important;
margin-bottom:20px!important
}

ul#loginmenu {
border-radius:0px 0px 30px 30px;
z-index:1000;
left:200px;
width:500px!important;
overflow:auto;
max-height:600px;
left:-100px!important;
}

li.logo {
margin:0px!important;
line-height:10px!important;
border-radius: 30px 0px 0px 0px;
padding:10px 40px 10px 40px!important
}

span#navlogo {
font-size:20px;
}

#menu{
position:relative;
top:10px;
width:80%;
max-width:750px;
min-width:660px;
height:47px;
border-radius: 30px 30px 0px 0px;
background-color:#172322;
margin:0px;
padding:0px;
list-style:none;
color:#fff;
display:inline-block;
float:right;
z-index:1000;
}

#menu a {
color:#fff;
text-decoration:none;
}

#menu > li {
transition:width 2s, height 2s;
-webkit-transition:width 2s, height 2s, -webkit-transform 2s;
/* Safari */padding: 13px 0px;
background:#172322 none repeat scroll 0 0;
cursor:pointer;
float:left;
position:relative;
}

#menu > li a:hover {
color:#B0D730;
}

#menu .logo {
background-color: #7cb7e3;
width:87px;
padding:0px;
}

/* sub-menus*/ 
#menu ul {
padding:0px;
margin:0px;
display:block;
display:inline;
}

#menu li ul {
position:absolute;
left:-24px;
top:0px;
margin-top:45px;
line-height:16px; 
background-color:#172322;
color:#0395CC;
/* for IE */ display:none;
}

#menu li:hover ul {
display:block;
}

#menu li ul li{
display:block;
margin:5px 20px;
padding: 5px 0px;
list-style-type:none; 
}

#menu li ul li:first-child {
border-top: none;
}

#menu li ul li a {
display:block;
color:#0395CC;
}

#menu li ul li a:hover {
color:#7FCDFE;
}

/* main submenu */ 
#menu #main li {
text-align:center;
margin:10px 10px 10px 10px!important
}

#menu #main {
border-radius: 0px 0px 30px 30px;
width:167px;
left:0px;
top:-20px;
padding-top:20px;
background-color:#7cb7e3;
color:#fff;
z-index:999;
}

/* search */ 
.searchContainer div {
background-color:#fff;
display:inline;
padding:5px;
}

.searchContainer input[type="text"] {
border:none;
}

.searchContainer ul {
vertical-align:middle;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T02:43:30.030

问题是当属性发生变化时，转换会为该属性设置动画。例如，如果我有一个 100 像素宽的 div，然后添加一个类将其切换为 300 像素宽，您可以设置`transition: width 3s`它会在 3 秒内增长。在你的情况下，所有正在改变的是`display:block`/`display:hidden` 为了让它过渡，你需要改变一些东西，而不是用 隐藏它，而是`display:hidden`通过将它缩小到非常小并且不断增长，或者改变不透明度来隐藏它， ETC。

# function - 有人知道以下代码的功能吗？（哈斯克尔）

> ID：16006778
> 
> 赞同：-4
> 
> 时间：2013-04-15T02:25:47.463
> 
> 标签：function, haskell, case

有人知道以下代码的功能吗？这是代码：

```
data Cases a = Case_A | Case_B | Case_C | Case_D

test_list :: Eq a => [a] -> [a] -> Cases a
test_list list_left list_right = case (list_left, list_right) of
  ([], []) -> Case_A
  ([], _) -> Case_B
  (_, []) -> Case_C
  (x:xs, y:ys)
       | (x==y) -> test_list xs ys
       | otherwise -> Case_D (x, y) 
```

谁喜欢告诉我它的功能是什么？谢谢XD

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T02:49:11.757

它应该是这种类型`Case`：

```
data Cases a = Case_A | Case_B | Case_C | Case_D (a, a) 
```

这四种情况的意思是：

*   `Case_A`: 两个列表是相等的
*   `Case_B`: 第一个列表是第二个列表的前缀
*   `Case_C`: 第二个列表是第一个列表的前缀
*   `Case_D`：两个列表有一个元素不匹配，它返回不匹配的元素。

# php - 通过js按id显示div

> ID：16006779
> 
> 赞同：0
> 
> 时间：2013-04-15T02:25:47.550
> 
> 标签：php, javascript, html

是否可以更改它以显示稍后在文档中加载的元素：

```
function tracksinfox_{$page_trackid}()
{
    document.getElementById('tracksinfoxshow_{$page_trackid}').innerHTML = 'get stuff here';
} 
```

在“在这里获取东西”的地方，我想按 id 显示一个 div，但是 div 是稍后在使用 PHP 加载页面时创建的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T02:37:40.230

使用 jQuery 的 on()，您可以将事件处理程序添加到稍后添加到文档中的元素。[http://api.jquery.com/on/](http://api.jquery.com/on/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T02:39:26.037

您可以通过 document.onreadystatechange 使函数在文档准备好后执行：

```
document.onreadystatechange=function() { 
    if(document.readyState == 'complete'){ 
        tracksinfox_{$page_trackid}();
    }
} 
```

或者只是简单地使用 window.onload 事件；

```
window.onload = tracksinfox_{$page_trackid}; 
```

但还有一件事你必须知道，如果你想在文档准备好后执行两个或更多功能，你可以这样做：

```
run_after_document_ready( tracksinfox_{$page_trackid} );
run_after_document_ready( somethingelse );
run_after_document_ready( somethingelse2 );

function run_after_document_ready( callback ) {
    callback_saver = window.onload;
    window.onload = function (){
        if ( typeof callback_saver == "function" ){
            callback_saver();
        }
        callback();
    }
} 
```

或者只使用 jQuery

```
$(document).ready(tracksinfox_{$page_trackid});
$(document).ready(somethiselse);
$(document).ready(somethiselse2); 
```

注意：window.onload 和document.ready 有一点不同，更多信息，你应该找到关于window.onload、document.onreadystatechange 和jquery 文档准备好的文档。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T03:01:05.803

如何使用 jQuery 并执行以下操作。`id="info"`它建立了一个回调方法，当一个新元素添加到 DOM时将调用该方法，然后它添加一个新的 DIV with `id="info"`，这会导致回调函数被执行。回调函数注销自身（因此它只会被调用一次），然后`update-me`根据新的 DIV 设置 DIV 的文本。

```
<html>
    <head>
        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
    </head>
    <body>
        <div id="update-me">I will be updated.</div>

        <script language="javascript">
        jQuery(function ($) {

            $("body").on("DOMNodeInserted", "#info", function(e){
                $("body").off("DOMNodeInserted", "#info");
                $("#update-me").text( $(e.target).text() );
            });

            $("body").append("<div id='info'>I have changed.</div>");                

        });
        </script>
    </body>
</html> 
```

# ruby-on-rails - Rails ajax：成功回调未在生产中触发

> ID：16006784
> 
> 赞同：0
> 
> 时间：2013-04-15T02:26:36.483
> 
> 标签：ruby-on-rails, ajax

我的 ajax 回调没有在我的生产环境中触发。但是，它们在没有错误的情况下在开发中触发。为了讨论，我会简化一些事情。

假设我有一个使用的链接`remote: true`：

```
<%= link_to "Add Foo", new_foo_path, remote: true, id: 'new-foo' %> 
```

**foos_controller.rb**

```
class FoosController < ApplicationController
  def new
    @foo = Foo.new
    render partial: 'form' if request.xhr?
  end
end 
```

使用 Chrome 的控制台，我绑定到`ajax:success`：

```
$(document).on("ajax:success", "#new-foo", function() { console.log("success!"); }); 
```

在开发中，这工作正常；我得到了“成功！” Chrome 控制台中的消息。

然而，在生产中，它没有。正在发出请求，响应是`form`部分的，但不会触发回调。

有任何想法吗？

PS。以下*也*不起作用。

```
$("#new-foo").bind("ajax:success", function() { console.log("success!"); }) 
```

没有任何变化`config/environments/production.rb`。

**编辑**：事实证明 ajax:error 当我单击生产中的链接时被触发。

```
$(document).on("ajax:error", "#new-foo", function() { console.log("error"); }); 
```

我的生产日志没有显示任何错误，并且 Chrome 开发人员工具中的网络选项卡显示以`200 OK`部分作为正文的响应。

**但是，Content-Type 标头正在`text/javascript`生产中，但`text/html`正在开发中。**为什么`text/javascript`在生产中响应相同的代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T12:56:30.277

问题是浏览器试图将响应正文作为 JavaScript 执行，因为返回的 Content-Type 标头是`text/javascript`而不是`text/html`.

有很多方法可以解决这个问题。我选择使用 jQuery 的`$.ajax`函数来设置我*所有*`dataType`的ajax 调用。这将要求服务器发回.*`text/html`*

 *```
$.ajaxSetup
  dataType: 'html' 
```

但是，还有其他几种方法可以向服务器请求特定响应。[有关详细信息，请参阅此 StackOverflow 答案](https://stackoverflow.com/questions/11021991/how-do-i-use-the-rails-remote-true-parameter-with-json/11023770#11023770)。

不过，仍有一个挥之不去的问题。为什么相同的代码`text/html`在开发中发回但`text/javascript`在生产中？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-02T20:30:13.110

如果 Google 将您带到这里（就像它对我所做的那样），因为`ajax:success`在稍微不同的情况下不适合您 - 当您使用`button_to`而不是 时`link_to`，这可能会为您省去一些麻烦。

假设您有这个修改后的 ERB：

```
<%= button_to "Add Foo", new_foo_path, remote: true, class: 'new-foo' %> 
```

这个 JS 不起作用：

```
$(document).on("ajax:success", ".new-foo", function() { console.log("success!"); }); 
```

这不起作用，因为类`new-foo`是在`input`标签上呈现的，而`data-remote="true"`是在标签上呈现的`form`。结果，该`ajax:success`事件在`form`标签上触发 - 而不是子`input`标签，这就是`console.log`永远不会调用的原因。

要解决此问题，请将 ERB 中的更改`class`为：`form_class`

```
<%= button_to "Add Foo", new_foo_path, remote: true, form_class: 'new-foo' %> 
```*

# javascript - 如果存在 js/ajax 导航功能，则停止链接导航

> ID：16006788
> 
> 赞同：0
> 
> 时间：2013-04-15T02:27:40.077
> 
> 标签：javascript, jquery

所以这是我的链接

```
 <a href="www.site.com/get_myinfo" onclick="check_navigation_exist('info');" >
 my info </a> 
```

这就是我要的

```
 function check_navigation_exist(wher_togo){

            if(typeof(navigator) != 'undefined'
               && 
            $.isFunction(navigator))
            {
                navigator(wher_togo);
                    return false ;
            }
            else
            return ;

        }

  function navigator(where)
    {
        $('#profile_main').html('<img src="'+image_url+'loader.gif" />');
        $.post(base_url+'profile/'+where , function(data){
            $('#profile_main').html(data);
            if(where != 'get_edit')
            odd();
        })  
    }

    function odd(color){
         color = typeof(color) == 'undefined' ? '#DCEABB' : color ;
         $('tr:odd').css('background-color' , color  );
    } 
```

但它不会阻止链接导航

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T02:32:09.380

您收到该错误是因为`e`不在您的参数列表中。通常您可以使用`e.preventDefault()`，但由于您调用的是函数`onclick`而不是分配函数，因此您将需要另一种方法，因为您无权访问该事件。

尝试返回`false`以防止默认操作，并在您的`onclick`事件中返回函数调用的结果。

```
<a href="www.site.com/get_myinfo" onclick="return check_navigation_exist('info');">my info </a> 
```

JS

```
function check_navigation_exist(wher_togo){

    if (typeof(navigator) != 'undefined' && 
        $.isFunction(navigator))
    {
        navigator(wher_togo);
        return false;
    }
} 
```

# iphone - 为什么具有相同 setPosition 点的精灵会显得相距甚远？

> ID：16006791
> 
> 赞同：0
> 
> 时间：2013-04-15T02:28:01.877
> 
> 标签：iphone, ios, cocos2d-iphone

给定以下代码，为什么圆形和矩形图像显示的距离如此之远？

```
CGPoint center = ccp(winSize.width/2, winSize.height/2);
[rectangle setPosition:center];
[circle setPosition:ccp(winSize.width/2, winSize.height/2)]; 
```

这是用于创建矩形的代码：

```
glEnable(GL_LINE_SMOOTH);
glColor4ub(255, 255, 255, 255);
glLineWidth(2);
CGPoint vertices2[] = { ccp(79,299), ccp(134,299), ccp(134,229), ccp(79,229) };
ccDrawPoly(vertices2, 4, YES); 
```

![在此处输入图像描述](https://i.stack.imgur.com/A07h4.png)

```
-(id) init {
if((self = [super init])) {
    CGSize winSize = [CCDirector sharedDirector].winSize;

    [CCTexture2D setDefaultAlphaPixelFormat:kCCTexture2DPixelFormat_RGB565];
    background = [CCSprite spriteWithFile:@"blue-shooting-stars.png"];
    background.anchorPoint = ccp(0,0);
    [CCTexture2D setDefaultAlphaPixelFormat:kCCTexture2DPixelFormat_Default];
    Circle *circle = [[Circle alloc] init];
    [circle setPosition:ccp(winSize.width/2.0f, winSize.height/2.0f)];

    CGPoint center = ccp(winSize.width/2.0f, winSize.height/2.0f);

    Rectangle *rectangle = [[Rectangle alloc] init];
    [rectangle setPosition:center];

    [self addChild:circle];
    [self addChild:rectangle];
}
return self; 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T12:21:48.957

您将矩形的位置设置为屏幕的中心。然后用坐标 (79.f, 299.f) 绘制第一个顶点。所以它在右上角绘制。因为它是相对于 Rectangle 的实例位置绘制的。

# php - Mod_Rewrite 文件夹目录到 PHP 文件

> ID：16006792
> 
> 赞同：0
> 
> 时间：2013-04-15T02:28:07.880
> 
> 标签：php, mod-rewrite, redirect, directory

我一直在研究，但没有找到与我正在尝试做的完全一样的事情。大多数都比我想要完成的更先进。所以基本上我想将一个文件夹重定向到一个实际的 .php 文件。

例如：() = 文件夹

```
(site)
  events.php
  (events)
    category.php
    (category) 
```

我不希望用户能够转到文件夹级别并重定向到实际的 php 文件。当他们键入 www.site.com/events 时，它会重定向到 www.site.com/events.php

有输入吗？

# navigation - HTML：滚动时自动更新树形视图侧边栏导航

> ID：16006793
> 
> 赞同：0
> 
> 时间：2013-04-15T02:28:19.363
> 
> 标签：navigation, treeview

访问[此站点](http://www.dbarnes.info/jWizard/#ChangeLog)后，我非常喜欢自动更改的侧边栏导航。

滚动页面时，侧边栏树视图会自动更改。

我想知道如何实现这一目标。

有人知道吗？或者该网站使用什么插件来做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T02:32:18.063

看起来他们正在使用[Twitter Bootstrap](http://twitter.github.io/bootstrap/)。

这是特定 Twitter Bootstrap 插件 ScrollSpy的更直接[链接。](http://twitter.github.io/bootstrap/javascript.html#scrollspy)

# html - 如果在特定窗口大小之间，引导表动作很奇怪

> ID：16006795
> 
> 赞同：0
> 
> 时间：2013-04-15T02:28:23.350
> 
> 标签：html, css, twitter-bootstrap

我正在使用 Bootstrap 2.2.1 版。我创建了一个带有表格的网页。该表占容器的整个宽度 (100%)。但是，在不同大小的窗口之间，表格的反应不同。

请参阅附图以了解我的问题。

![在此处输入图像描述](https://i.stack.imgur.com/P8jGg.jpg)

这是表格的代码

```
<table id="item-table" class="table table-striped">
    <thead>
        <tr>
            <th style="text-align: center; vertical-align: middle; width: 4%;"></th>
            <th style="text-align: center; vertical-align: middle; width: 14%;">Product</th>
            <th style="text-align: center; vertical-align: middle; width: 11%;">Source Type</th>
            <th style="text-align: center; vertical-align: middle; width: 17%;">Source Location</th>
            <th style="text-align: center; vertical-align: middle; width: 7%;">Rental Quantity</th>
            <th style="text-align: center; vertical-align: middle; width: 7%;">Consigned Quantity</th>
            <th style="text-align: center; vertical-align: middle; width: 11%;">Destination Type</th>
            <th style="text-align: center; vertical-align: middle; width: 17%;">Destination Location</th>
            <th style="text-align: center; vertical-align: middle; width: 12%;">Price</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td style="text-align: center;"><input class="specs-value" type="hidden" name="specs[]" value=""><a class="trigger-remove_item" href="javascript:void();"><i class="icon-adt_trash"></i></a></td>
            <td>
                <select name="model_id[]" class="trigger-model_id span12">
                    <option value="" selected="selected">Select a product in the list</option>
                </select>
            </td>
            <td>
                <select name="source_type[]" class="trigger-source_destination_type span12" data-action_type="0"><option value="0">T.B.D.</option><option value="1" selected="selected">Warehouse</option><option value="2">Show</option></select>
            </td>
            <td>
                <select name="source_id[]" class="span12">
                    <option value="2" selected="selected">High Tech Handling</option>
                    <option value="1">Montreal</option>
                </select>
            </td>
            <td>
                <input name="quantity_rental[]" type="text" value="0" class="span12"></td><td><input name="quantity_consigned[]" type="text" value="0" class="span12"></td><td><select name="destination_type[]" class="trigger-source_destination_type span12" data-action_type="1"><option value="0">T.B.D.</option><option value="1" selected="selected">Warehouse</option><option value="2">Show</option></select>
            </td>
            <td>
                <select name="destination_id[]" class="span12">
                    <option value="2" selected="selected">High Tech Handling</option>
                    <option value="1">Montreal</option>
                </select>
            </td>
            <td><input name="price[]" type="text" value="0.00" class="span12"></td>
        </tr>
        <tr>
            <td colspan="9"><a class="item-add" href="javascript:void();">Add an item to the contract</a></td>
        </tr>
    </tbody>
</table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-15T10:51:39.627

```
span12 
```

我猜什么都没做。尝试删除它们，然后可能会强制表扩展`th %`它。

我会`span2`在一些较小的数字框中添加或 4。

在这里做了一些改变......试试看，告诉我它是否能解决问题。 [http://jsfiddle.net/TWQ4S/3/](http://jsfiddle.net/TWQ4S/3/)

# php - 在 PHP 中添加时间结果不正确

> ID：16006798
> 
> 赞同：-1
> 
> 时间：2013-04-15T02:28:30.000
> 
> 标签：php, time, add

我在添加时间时遇到问题，这是不正确的。示例：00:00 + 00:35 = 11:13

它应该是 00:35 而不是 11:13

这是我上面的代码：

```
echo date('H:i',$total).' + '.$telat2.' = ';

if($telat2 == '00:00'){
    $total = $total;}
else{
    $total = ($total) + strtotime($telat2);}

echo date('H:i',$total).' '; 
```

我希望这里的每个人都可以帮助我..

提前致谢..

**更新 1**

我刚刚得到了正确的代码！这是代码：

```
$total_unix = strtotime(date('Y-m-d').' '.$total.':00');

$telat2_unix = strtotime(date('Y-m-d').' '.$telat2.':00');

$begin_day_unix = strtotime(date('Y-m-d').' 00:00:00');

$total = date('H:i', ($total_unix + ($telat2_unix - $begin_day_unix))); 
```

我想知道这怎么会发生？

有人可以向我解释一下吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T03:16:55.880

为原始客户制作了一个工作代码：

```
 <?php

    function AddTime($telat1,$telat2)
    {
        $telat1 = date_parse_from_format("H:i", $telat1);
        $telat2 = $timeToAdd;
        $telat2 = date_parse_from_format("H:i", $telat2);

        $totalHours = $telat1['hour'] + $telat2['hour'];
        $totalMinutes = $telat1['minute'] + $telat2['minute'];
        if($totalMinutes >= 60)
        {
            $totalHours += 1;
            $totalMinutes -= 60;
        }
        if($totalHours >= 24)
        {
            $totalHours -= 24;
        }

        // Setting the leading zeros

        if(strlen($totalMinutes) < 2)
        {
            $totalMinutes = "0" . $totalMinutes;
        }
                if(strlen($totalHours) < 2)
        {
            $totalHours = "0" . $totalHours;
        }

        $total = $totalHours . ":" . $totalMinutes;

        return $total;
   }
   $timeNow = date('H:i'); // Base time
   $timeToAdd = '12:12'; // 12 hours 12 minutes to be added to $timeNow
   $total = AddTime($timeNow, $timeToAdd);
   echo $total;
    ?> 
```

# c++ - 如何真正删除向量

> ID：16006799
> 
> 赞同：8
> 
> 时间：2013-04-15T02:28:47.790
> 
> 标签：c++, memory-management, vector, memory-leaks

我对 C++ 内存管理很陌生，因为与 C 不同，释放所有内存有更多障碍。

我正在尝试成功删除指向任何类型向量的指针（即向量 * 数据）

```
/** 
 * We test the program in accessing vectors
 * with dynamic storage
**/
#include <iostream>
#include <vector> // you must include this to use vectors

using namespace std;

int main (void){
    // Now let's test the program with new and delete
    // for no memory leaks with vectors (type safe)
    // however, just calling delete is not enough to free all memory
    // at runtime
    vector <int> * test_vect = new vector <int> (10,5);

    // Print out its size
    cout << "The size of the vector is " << test_vect->size()
         << " elements" << endl;

    // run through vector and display each element within boundary
    for (long i = 0; i < (long)test_vect->size(); ++i){
        cout << "Element " << i << ": " << test_vect->at(i) << endl;
    }

    delete test_vect;
    return EXIT_SUCCESS;
} 
```

但是，使用 valgrind 后出现内存泄漏

```
==2301== HEAP SUMMARY:
==2301==     in use at exit: 4,184 bytes in 2 blocks
==2301==   total heap usage: 4 allocs, 2 frees, 4,248 bytes allocated
==2301== 
==2301== LEAK SUMMARY:
==2301==    definitely lost: 0 bytes in 0 blocks
==2301==    indirectly lost: 0 bytes in 0 blocks
==2301==      possibly lost: 0 bytes in 0 blocks
==2301==    still reachable: 4,096 bytes in 1 blocks
==2301==         suppressed: 88 bytes in 1 blocks 
```

如何使用指向向量的指针（即在运行时）摆脱所有内存泄漏痕迹？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-04-15T02:43:37.827

首先，我不相信有泄漏。您是否正确阅读了`Leak Summary`您为该计划发布的内容？：

```
==2301== LEAK SUMMARY:
==2301==    definitely lost: 0 bytes in 0 blocks
==2301==    indirectly lost: 0 bytes in 0 blocks
==2301==      possibly lost: 0 bytes in 0 blocks
==2301==    still reachable: 4,096 bytes in 1 blocks
==2301==         suppressed: 88 bytes in 1 blocks 
```

您在 0 个块中丢失了 0 个字节。`valgrind`找不到任何明确的、间接的或可能的泄漏。你的程序很好。

***顺便说一句：*** 你......真的不应该使用`new`或`delete`在这种情况下使用该向量。C++ 与 C 完全一样，如果您将它们声明为常规变量，则会在堆栈中进出范围。以下代码完全实现了您在问题中所做的事情，而无需使用 new 和 delete：

```
int main (void){
    // Now let's test the program with new and delete
    // for no memory leaks with vectors (type safe)
    // however, just calling delete is not enough to free all memory
    // at runtime (ThePhD: it is, actually!)
    vector <int>  test_vect(10,5);

    // Print out its size
    cout << "The size of the vector is " << test_vect.size() 
         << " elements" << endl;

    // run through vector and display each element within boundary
    for (long i = 0; i < (long)test_vect.size(); ++i){
        cout << "Element " << i << ": " << test_vect.at(i) << endl;
    }

    // ( ThePhD: Look ma, no deletions! )
    return EXIT_SUCCESS;
} 
```

堆栈会神奇地自行清理，因为 std::vector 有一个析构函数，可以在超出范围时清理其资源。您无需将其设为动态并将其放在程序内存的堆/空闲存储区域中，此时堆栈就可以了。

另外，听起来你来自 C，所以我会花时间说：欢迎使用 C++。:D

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-15T02:41:00.557

我想这可能是答案。就 C++ 而言，这里没有泄漏。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-15T02:45:53.610

这些容器类的全部目的是为您进行内存管理、分配、重新分配和释放。您将容器放在堆栈上，它在内部保持其内容动态分配，并且当容器实例被删除时，它会自动删除动态分配的数据。

容器本身的动态实例化违背了目的并且几乎总是完全没有意义的。

是的，在你的情况下，向量真的被删除了。

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2013-04-15T02:47:55.637

我想你需要打电话

```
if(test_vect != 0)
{
   if(!test_vect->empty())
      test_vect->clear();
} 
```

在删除之前

# android - android中Urbanairship的丰富推送

> ID：16006806
> 
> 赞同：0
> 
> 时间：2013-04-15T02:29:31.097
> 
> 标签：android, push-notification, urbanairship.com

我正在我的项目中实现 Android 推送通知。我正在实施urbanairship GCM 推送通知。当我浏览urbanairship 站点时，我注意到在消息选项卡下，有一个“TEST RICH PUSH”选项。我已经通过从选项卡消息下的“TEST PUSH”发送推送消息完成了简单推送的测试。现在我的问题是在“TEST RICH PUSH”中，有两个新字段“USER”和“ALIAS”。Is Rich push 用于仅向当前使用应用程序的特定用户发送推送通知。或者它有任何其他目的。另外请让我知道如何在他们的新网站中启用“RICH PUSH”。（之前它是明确的。现在我查看了他们的整个网站，但我找不到线索）。非常感谢任何帮助。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-15T17:33:21.610

Rich Push 自动成为 Urban Airship 库的一部分（至少从 3.0.0 版本开始，可能在此之前也是如此，但我不确定哪个版本号）。您只需在代码中做几件事即可启动并启动它。

1.  在您的 airshipconfig.properties 文件中添加“richPushEnabled = true”行（不带引号）。
2.  在您的清单文件中添加一个名为“com.urbanairship.richpush.RichPushUpdateService”的服务以及 PushService/PushWorkerService 等。

你应该很高兴去！如果不让我知道我可能忘记了什么。

要发送推送，您必须使用此处的 curl 命令（在 Rich Push -> Rich Push 广播下）：[https://support.urbanairship.com/customer/portal/articles/1069013-helpful-curl-examples](https://support.urbanairship.com/customer/portal/articles/1069013-helpful-curl-examples)在观众下做“所有”，一旦 UA 初始化，将此值吐出到某个地方的日志中：RichPushManager.shared().getRichPushUser().getId() (import com.urbanairship.richpush.*;) 并确保 MasterSecret 参数是不是您的 api 密码，而是您在 UA 开发人员仪表板上的 API 密钥中找到的主密码。

我把所有东西都写出来是因为 Urban Airship 的 Android Rich Pushes 文档 DNE，这绝对是可怕的。他们有一个示例项目，仅此而已。

# code-generation - 如何从图形模型生成代码到特定的 api？

> ID：16006807
> 
> 赞同：0
> 
> 时间：2013-04-15T02:29:39.883
> 
> 标签：code-generation, antlr, xtext, eclipse-gef, emf

我正在构建一个用于操作图形元素的编辑器，每个元素必须代表 API 规范中的一种元素。

API的元素基本上是一些类和接口，它们有一定的使用限制，比如元素A不能是元素B的子元素，或者不能与元素C连接等等……

编辑器应该允许您根据绘制的内容生成代码，并且生成的代码必须是与您绘制的内容相对应的 API 的实现。

我（在实践中）对模型驱动架构以及如何从图形模型生成代码到某些实现一无所知。

我不想将图形模型（包含大小和坐标等图形信息）与实现 API 规范的业务模型混合。

我正在使用 eclipse GEF 来构建编辑器，这是我面临的问题：

由于图形模型和业务模型是分开的，我正在考虑定义一个 emf 模型，编辑器将是该 emf 模型的编辑器。那么是否可以将编辑器中绘制的模型（使用 emf 模型作为基本构造元素）转换为 API 规范的相应实现？

我知道，因为图形模型和业务模型是分开的，所以我必须实现某种语法分离，使用限制非常适合我想做的事情（谈到代码生成和语法）或者我应该使用[xtext](http://www.antlr.org/) ?

什么 Eclipse 框架工具可以帮助我做我想做的事？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T11:44:30.307

如果您已经有一个图形编辑器，那么似乎几乎没有必要创建一个较低级别的文本模型格式（例如使用 antlr/Xtext）来执行代码生成。特别是，如果您的模型已经在 EMF 中。

EMF 模型有多种代码生成器技术（例如 Acceleo 或 Xtend 也可用于此）；这些生成器将使用 EMF 模型作为输入，并提供特定于您似乎正在使用的 API 的输出代码。在这两种工具中，您必须通过定义模板手动组装输出文件，然后序列化这些模板的结果。这种序列化在 Acceleo 中是自动的，或者您可以在 Xtend 中使用类似 Java 的 API 来完成。

如果您的模型现在不在 EMF 中，您仍然可以直接使用 Xtend - 但是，我相信 Acceleo 在这种情况下不会有用。

# python - 在 Mac 10.6.8 上更改 Python 2.6 使用的 SQlite3 版本

> ID：16006812
> 
> 赞同：0
> 
> 时间：2013-04-15T02:30:34.290
> 
> 标签：python, macos, sqlite, osx-snow-leopard

我正在编写一个从 sqlite3 数据库中获取数据的简单 Python 脚本。我遇到以下错误：

```
sqlite3.DatabaseError: file is encrypted or is not a database 
```

我发现这个错误是由sqlite3的版本问题引起的。在 Mac (10.6.8) 上，我现在需要使用 SQLite 版本是 3.6.12。我下载了 SQLite 3.7.16.2 并且可以使用该版本打开数据库。但是我怎样才能告诉 Python 在该脚本中使用非标准 SQLite 版本呢？

我在用

```
Python 2.6.1 (r261:67515, Jun 24 2010, 21:47:49) 
[GCC 4.2.1 (Apple Inc. build 5646)] on darwin 
```

最终我将使用 Ubuntu 进行该项目，但出于测试目的，我需要在该特定 Mac 配置上运行脚本。感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T03:29:57.413

另一种选择是安装更新的 Python。例如，当前的 python.org Python 2.7.4 安装程序（可[在此处](http://www.python.org/download/)获得）附带 SQLite 3.7.13。

```
$ /usr/local/bin/python2.7
Python 2.7.4 (v2.7.4:026ee0057e2d, Apr  6 2013, 11:43:10)
[GCC 4.2.1 (Apple Inc. build 5666) (dot 3)] on darwin
Type "help", "copyright", "credits" or "license" for more information.
>>> import sqlite3
>>> sqlite3.sqlite_version_info (3, 7, 13) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T02:48:26.800

您可以使用`DYLD_LIBRARY_PATH`环境变量将替换 sqlite .dyld 的目录放在搜索路径的前面。见`man dyld`。这类似于`LD_LIBRARY_PATH`在 Linux 上。

# angularjs - 使用简单的返回从 AngularJS 工厂发回数据是否有效？

> ID：16006814
> 
> 赞同：1
> 
> 时间：2013-04-15T02:30:39.550
> 
> 标签：angularjs

我有以下两种方法，它们似乎都有效：

```
angular.module('adminApp')
.factory('TestAccount', function ($http) {
    return {
        get: function (applicationId) {
            return $http({
                method: 'GET',
                url: '/api/TestAccounts/GetSelect',
                params: { applicationId: applicationId }
            });
        }
    }
});

//angular.module('adminApp')
//.factory('TestAccount', function ($http) {
//    var TestAccount = {};
//    TestAccount.get = function (applicationId) {
//        return $http({
//            method: 'GET',
//            url: '/api/TestAccounts/GetSelect',
//            params: { applicationId: applicationId }
//        });
//    };
//    return TestAccount;
//}); 
```

第二种方法来自对我在 stackoverflow 上提出的问题的回答。第一种方法是我对其进行了一些更改。

有人可以告诉我哪种方式更传统，这两者之间是否有任何区别。对我来说，第一种方式似乎更干净一些，但我不确定我是否错过了使用它的某些功能。

在这两种情况下，我都使用以下方法调用服务：

```
 TestAccount.get(3).then(function (result) {
        $scope.testAccounts = result.data;
    }, function (result) {
        alert("Error: No data returned");  
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T02:35:32.750

这两种方法同样有效。我更喜欢第一个变体。当您可以只返回具有属性的对象时，无需从空对象开始，设置属性并返回对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-04T03:44:55.637

正如布赖恩所说，它们都同样有效。

第二种方式更通用。它使您可以编写具有多个功能的服务，其中一些功能调用其他功能，以一种相对容易推理的方式。

在完全在`.factory`方法中定义的服务中使用该功能可能不是一个好主意，在这种情况下您也不需要它。但是，如果您有一项服务确实需要这种多功能性，那么将这种风格用于所有服务可能是值得的。

# asp.net-mvc - 为什么不能覆盖 AuthorizeAttribute 的 OnAuthorization()？

> ID：16006817
> 
> 赞同：2
> 
> 时间：2013-04-15T02:30:56.477
> 
> 标签：asp.net-mvc, asp.net-mvc-3, asp.net-mvc-4

# c++ - 何时释放动态分配的 QObject

> ID：16006821
> 
> 赞同：1
> 
> 时间：2013-04-15T02:31:44.793
> 
> 标签：c++, qt, qobject

我的程序似乎没有泄漏，所以我对此很好奇。如果我用 new 初始化了一个子类 QObject 并且我没有给该对象一个父对象，那么它什么时候被销毁？它似乎违背了 C++ 的规范，但也许 qt 元编译器正在幕后做一些事情。

更具体地说，我正在使用 QThread 并在没有父对象的对象上使用 moveToThread（线程的含义强制没有父对象）。当主程序完成时，线程下的对象似乎被破坏了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T02:38:10.433

没有生命周期管理的动态分配数据将“存活”，直到应用程序终止。

如果您担心您的工作对象泄漏，您可以`deleteLater()`在他们的工作完成后调用它们，并且由于它是一个插槽，您也可以将信号连接到它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T15:08:33.443

好吧，我会以不同的方式回答。您不应该将 Qt 视为改变您一般 C++ 设计概念的魔术工具。实际上，它可以处理作为任何其他 QObject 的子级的 QObject，并且它们的生存时间仅限于父母的生存时间。但一般来说，由开发人员决定 C++ 对象何时创建以及它们何时死亡。在应用程序退出时，所有 QObjects 都会在某个时候死掉这一事实是非常*糟糕的做法。*具有大量 QObject 的复杂应用程序在填充一定数量的 QObject 后可能会受到严重的性能影响。

回答您的问题，任何现代操作系统都会在退出后立即删除特定进程的所有分配区域。但是在应用程序中存在您不控制您创建的对象的路径无论如何都会给您带来麻烦。

# jquery - 如何按字母顺序对可排序的 JQuery UI 进行排序？

> ID：16006826
> 
> 赞同：8
> 
> 时间：2013-04-15T02:32:11.920
> 
> 标签：jquery, jquery-ui, jquery-ui-sortable

我想知道是否可以让 JQuery UI 可排序默认值按字母顺序排序。如果是这样，如果我将项目添加到可排序中，是否也可以实时按字母顺序排序？下面是我的代码：

```
// Adds item to sortable list
$(".addButton").click(function(e) {
    e.preventDefault();
    // set var item to be the string inputted by the user
    var item = $("input[name='brewItem']").val();
    // parses input string, splitting at commas into liArray containing substrings as elements
    var liArray = item.split(", ");
    // for loop to add each brew to the sortable list (length-1 because last element in array is empty string)
    for (var i = 0; i < liArray.length-1; i++) {
        // sets var $li to the string in the ith index of liArray
        var $li = $("<li class='ui-state-default'/>").text(liArray[i]);

        // adds var $li to gui
        $("#sortable").append($li);
    };
    // refreshes the page so var $li shows up
    $("#sortable").sortable("refresh");
}); 
```

我不太确定在哪里或如何实现这一点。任何帮助表示赞赏，谢谢！

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-15T04:50:07.827

您需要对其进行调整以使其按需要排序。

试试这个：-[小提琴](http://jsfiddle.net/phd2vp33/)

使用自定义排序方法

```
 function sort() {
    var sortableList = $('#sortable');
    var listitems = $('li', sortableList);

    listitems.sort(function (a, b) {

        return ($(a).text().toUpperCase() > $(b).text().toUpperCase())  ? 1 : -1;
    });
    sortableList.append(listitems);

} 
```

在您的可排序的创建事件`Create`和按钮单击中调用它

```
$("#sortable").sortable({
    create: function (event, ui) {
        sort();
    }
}); 
```

或扩展 jquery ui 可排序小部件以包含您的自定义排序逻辑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T03:59:52.847

实例化可排序

```
var $sortable =$("#sortable").sortable(options); 
```

不要因为对 dom 的不必要访问而使浏览器不堪重负

在事件处理程序之前，缓存您的输入

```
var $brew=$("input[name='brewItem']"); 
```

通过创建一个 html 字符串来优化您的附加

你可以在你的处理程序的一行中使用 join & do it

```
$('<li>'+ $brew.val().split(", ").join('</li><li>')+'</li>').appendTo($sortable) ; 
```

注意：如果 li 集被包装，性能会更好，但在你的情况下，你需要在之后解包......不能说哪个会更快

```
$sortable.sortable('refresh') 
```

# apache-flex - 检查 Adob e Air SQLite Db 是否损坏

> ID：16006832
> 
> 赞同：1
> 
> 时间：2013-04-15T02:32:58.310
> 
> 标签：apache-flex, sqlite, air, adobe, corruption

我的应用程序中有一个 Adob​​e Air SQLite 数据库。我想知道如果数据库打开，我是否有任何方法可以测试腐败？不允许使用 PRAGMA 语句，所以这是不可能的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T07:24:59.273

[PRAGMA 完整性](http://www.sqlite.org/pragma.html#pragma_integrity_check)检查是唯一合理的方法。

您可以尝试从数据库中读取所有数据，但这不会找到所有错误。

# ios - 仅更改函数调用的方向

> ID：16006835
> 
> 赞同：1
> 
> 时间：2013-04-15T02:33:27.393
> 
> 标签：ios, objective-c, cocoa-touch

这个问题的大部分内容都在它的标题中。我似乎无法找到任何有关此的信息。我只想在函数调用中更改（在纵向和横向之间）方向，而不是通过持有设备的用户。有没有办法在IOS中做到这一点？如果未调用该函数，则无论如何方向都应保持不变。

我也希望在单个视图控制器上使用它。如果用户切换到另一个视图控制器，则应恢复正常功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T02:55:48.397

你不能做这个。有一些私有 api 可以让这种情况发生，但使用它们会导致 App Store 被拒绝

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T04:08:37.530

嗨，jab，您可以，但是如果没有设备方向，我们无法更改状态栏，只有视图中可用的 ui 组件可以通过更改其 CGRect 值（帧值）来更改。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T04:52:02.133

由于您仅在当前视图中需要它，因此您可以使用[UIView 转换](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIView_Class/UIView/UIView.html) 属性。例如：如果你想将视图旋转 90 度，使用这个，

```
view.transform = CGAffineTransformMakeRotation( M_PI / 2 ); 
```

# joomla - 禁用 Joomla 帐户详细信息电子邮件（给用户）

> ID：16006845
> 
> 赞同：0
> 
> 时间：2013-04-15T02:34:37.077
> 
> 标签：joomla, joomla1.5

尝试从 Joomla 1.5 禁用“站点名称用户的帐户详细信息”电子邮件。我注释掉了以下代码行，它**仍在**发送：

组件/com_user/controller.php:519

```
JUtility::sendMail($mailfrom, $fromname, $email, $subject, $message); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T08:34:25.007

那是为了前端注册。如果您想在从后端注册用户时禁用这些电子邮件，则必须在`administrator/components/com_user/controller.php:189`

遗憾的是，在 1.5 中实现此目的的唯一方法是破解核心文件......

# emacs - 如何在 SLIME 中突出显示当前参数

> ID：16006847
> 
> 赞同：2
> 
> 时间：2013-04-15T02:34:49.683
> 
> 标签：emacs, slime

我在 Arch Linux 上使用 sbcl 和 GNU Emacs 24.3.1 和 2012-04-14 版的 SLIME 来编写一些 Common Lisp 代码。例如，在编写表达式时，如果我键入

```
(if 
```

小缓冲区将显示

```
(if TEST THEN &OPTIONAL ELSE) 
```

是否有模式或 SLIME 设置可以使我当前正在编辑的参数在 minibuffer 中突出显示？例如，如果我输入

```
(if (> x y) 
```

如果

```
(if TEST *THEN* &OPTIONAL ELSE) 
```

或类似的东西显示在小缓冲区中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T16:48:11.123

奇怪的是，您在 minibuffer 中有具有此配置的文档。也许您的发行版也从不同的位置加载它。

请尝试此配置：

```
(setq inferior-lisp-program "/usr/bin/sbcl")
(add-to-list 'load-path "~/.emacs.d/slime-2012-04-14/")
(require 'slime)
(require 'slime-autoloads)
(slime-setup '(slime-autodoc)) 
```

它告诉 Emacs 加载和使用`slime-autodoc`显示文档和 minibuffer 的模块，并按照您的意愿突出显示它。

也许您还想更新到更新的 SLIME 版本（ELPA 中的当前版本是 20130402）。

# php - 无法在codeIgniter中使用Tank_auth的注销功能

> ID：16006851
> 
> 赞同：0
> 
> 时间：2013-04-15T02:35:19.143
> 
> 标签：php, codeigniter

我已经彻底搜索了这个问题但没有得到解决方案，最后我发布了这个问题。登录，注册新用户，在 Tank_auth 中工作正常，但注销功能对我来说似乎无法正常工作。它显示以下错误

```
A PHP Error was encountered
Severity: Notice
Message: Undefined index: session_id
Filename: libraries/Session.php
Line Number: 272

A PHP Error was encountered
Severity: Notice
Message: Undefined index: ip_address
Filename: libraries/Session.php
Line Number: 272

A PHP Error was encountered
Severity: Notice
Message: Undefined index: user_agent
Filename: libraries/Session.php
Line Number: 272

A PHP Error was encountered
Severity: Notice
Message: Undefined index: last_activity
Filename: libraries/Session.php
Line Number: 272

A PHP Error was encountered
Severity: Notice
Message: Undefined index: session_id
Filename: libraries/Session.php
Line Number: 288

A PHP Error was encountered
Severity: Notice
Message: Undefined index: last_activity
Filename: libraries/Session.php
Line Number: 289

A PHP Error was encountered
Severity: Warning
Message: Cannot modify header information - headers already sent by (output started at C:\xampp\htdocs\CodeIgniter\system\core\Exceptions.php:185)
Filename: libraries/Session.php
Line Number: 675

A PHP Error was encountered
Severity: Warning
Message: Cannot modify header information - headers already sent by (output started at C:\xampp\htdocs\CodeIgniter\system\core\Exceptions.php:185)
Filename: helpers/url_helper.php
Line Number: 542 
```

有人告诉我在身份验证控制器功能 logout() 中修改注销功能

```
{
    $this->tank_auth->logout();
    $this->session->sess_create();//modified.....
    $this->_show_message($this->lang->line('auth_message_logged_out'));
    //redirect('','refresh');
} 
```

它工作正常，但是当我刷新页面时，它会将我重定向到用户注销的上一个页面，然后我再次搜索并在 tank_auth 类中将这一行修改为 unset_userdata .....

```
this->ci->session->unset_userdata(array('user_id' => '', 'username' => '', 'status' => '')); 
```

这就是我到目前为止所做的，急切地等待帮助..

# mysql - SQL 错误代码：1215。无法添加外键约束，未添加外键

> ID：16006855
> 
> 赞同：0
> 
> 时间：2013-04-15T02:35:41.660
> 
> 标签：mysql, mysql-workbench

我有一个我一直在处理的数据库，我正在尝试创建另一个表，但是它一直给我 1215 错误，即使我没有添加外键。即使是一个简单的查询，如：

```
CREATE TABLE `mydb`.`Assignment` (

  `SomeNumber` INT NULL

) 
```

会给我这个结果。保存和重新启动以及删除所有表都不起作用...建议？

# objective-c - NSXMLNode textWithStringValue 与实体

> ID：16006861
> 
> 赞同：0
> 
> 时间：2013-04-15T02:36:35.380
> 
> 标签：objective-c, xml, macos

使用字符串创建 NSXMLNode：

```
NSXMLNode *node1 = [NSXMLNode textWithStringValue:@"<"];
NSLog(@"node1=%@",node1);
NSXMLNode *node2 = [NSXMLNode textWithStringValue:@">"];
NSLog(@"node2=%@",node2); 
```

产生以下输出：

```
node1=&lt;
node2=> 
```

1.  为什么“<”字符被转义（即转换为`"&lt;"`）而“>”字符不是？
2.  这是一个错误吗？
3.  哪个节点处理正确？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T03:44:06.200

1.  引用[XML Spec](http://www.w3.org/TR/xml/#syntax)：

    > & 符号 (&) 和左尖括号 (<) 不得以其文字形式出现，除非用作标记分隔符，或者在注释、处理指令或 CDATA 部分中。[...] 右尖括号 (>)**可以**使用字符串“>”表示，并且为了兼容性，必须使用“>”或出现在字符串“]] 中的字符引用进行转义> " 在内容中，当该字符串未标记 CDATA 部分的结尾时。

    简而言之，在某些情况下 > 不必转义，例如它出现在属性中。

2.  不。

3.  两者都是。

如果您要求提供[规范格式](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSXMLNode_Class/Reference/Reference.html)的字符串，这两个字符都将被转义：

```
NSXMLNode *node3 = [NSXMLNode textWithStringValue:@">"];
NSLog(@"node3=%@",[node3 canonicalXMLStringPreservingComments:NO]); 
```

输出：

```
node3=&gt; 
```

# c++ - C++11“自动”到非 C++11 编译器

> ID：16006864
> 
> 赞同：1
> 
> 时间：2013-04-15T02:37:02.230
> 
> 标签：c++, c++11, g++

我已经从

[http://matt.eifelle.com/2012/07/17/just-a-small-example-of-numerical-optimization-in-c/](http://matt.eifelle.com/2012/07/17/just-a-small-example-of-numerical-optimization-in-c/)

并尝试在不知道以下源的 auto 的 g++ 4.4.6 中编译：

```
 auto optimizer = Optimization::Local::build_simplex( 
  fun,
  Optimization::Local::make_and_criteria(Optimization::Local::IterationCriterion(max_iterations),
      Optimization::Local::RelativeValueCriterion<float>(ftol))); 
```

阅读网页，我知道这是因为 C++11 支持 auto，所以我尝试搜索我下载的源代码，有一个 simplex.h，它具有以下源代码：

```
template<class Function, class Criterion>
static Simplex<typename Function::DataType, typename Function::ParameterType, Function, Criterion> build_simplex(const Function& fun, const Criterion& criterion)
{
  return Simplex<typename Function::DataType, typename Function::ParameterType, Function, Criterion>(criterion);
} 
```

然后我改变

```
auto optimizer 
```

至

```
Simplex<typename Function::DataType, typename Function::ParameterType, Function, Criterion> optimizer 
```

或者

```
Optimization::Simplex<typename Function::DataType, typename Function::ParameterType, Function, Criterion> optimizer 
```

没有人会通过编译器！

我不太了解 c++ 的模板用法，除了获得 c++11 编译，我应该为这个 auto 做什么返回的数据类型修改？

更新 ：

感谢您的帮助，我修改`int optimizer`并编译，我得到 `test_rosenbrock_simplex.cpp:44: error: cannot convert Optimization::Local::Simplex<float, Eigen::Matrix<float, 2, 1, 0, 2, 1>, Rosenbrock, Optimization::Local::AndCriteria<Optimization::Local::IterationCriterion, Optimization::Local::RelativeValueCriterion<float> > >` ：`int`初始化

然后我将代码更改为：

`Optimization::Local::Simplex<float, Eigen::Matrix<float, 2, 1, 0, 2, 1>, Rosenbrock, Optimization::Local::AndCriteria<Optimization::Local::IterationCriterion, Optimization::Local::RelativeValueCriterion<float> > > optimizer`

有用 ！！！！！

g++ -O2 -march=native -msse2 -m64 -DEIGEN_NO_DEBUG test_rosenbrock_simplex.cpp -I/home/usrA/tools/eigen-eigen-5097c01bcdc4 -o test_rosenbrock_simplex.exe

./test_rosenbrock_simplex.exe

```
-2.75  -0.5     0
2.1875 1.125     0
Starting point: 10
10
Starting value: 8181
Best point: 1
1
Best value: 5.68434e-14 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-15T02:46:00.613

您必须替换实际的模板参数，只是声明的返回类型不会削减它。

正如 Drew 在评论中提到的，您可以说服编译器告诉您这一点。

简单地写

```
int optimizer = .....; 
```

并检查产生的错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T02:48:29.913

Boost 有一个实现 c++11 自动相似的宏。它被称为[`BOOST_AUTO`](http://www.boost.org/doc/libs/1_53_0/doc/html/typeof/refe.html#typeof.auto)。

它看起来像：

```
BOOST_AUTO(optimizer, Optimization::Local::build_simplex(
    fun,
    Optimization::Local::make_and_criteria(Optimization::Local::IterationCriterion(max_iterations),
    Optimization::Local::RelativeValueCriterion<float>(ftol))); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-03T20:34:21.903

实际上，要么使用 Boost 宏，要么自己编写完整类型。很抱歉我没有把所有的东西都放好，但我只会用 C++11 编译器来编码。否则，坚持使用非模板代码。（我是博客作者）。

# java - SQLException：executeQuery 方法不能用于更新

> ID：16006868
> 
> 赞同：14
> 
> 时间：2013-04-15T02:37:33.727
> 
> 标签：java, mysql, sql, servlets

我正在尝试使用 java servlet 类将从注册表中获取的用户信息插入 Derby DB。

在用户单击填写了用户信息的提交按钮后，我立即连接到 NetBeans 上的数据库。然后它应该运行这个方法：

```
public void insertNewUser(String userName, String passWord, String lastName, String firstName, String age, char sex, String email) {
    try {
        stmt = conn.createStatement();
        String insertNewUserSQL = "INSERT INTO " + studentsTable + " VALUES ('" + userName + "', '" + passWord + "', '" + lastName + "', '" + firstName + "', " + age + ", '" + sex + "', '" + email + "')";
        System.out.println(insertNewUserSQL);
        stmt.executeQuery(insertNewUserSQL);
        stmt.close();
    } catch(SQLException sqlExcept) {
        sqlExcept.printStackTrace();
    }
} 
```

但我不断收到以下异常：

```
java.sql.SQLException: executeQuery method can not be used for update. 
```

这到底是什么意思？

SQL 命令是正确的，因为我可以在 NetBeans SQL 命令窗口中手动执行它。

servlet 是否有限制或我不知道的东西？

提前致谢！

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-04-15T02:42:09.617

由于您要插入记录，因此您应该使用`executeUpdate()`not `executeQuery()`。

以下是一些通常被误用的方法：

* * *

布尔执行（）

> 执行此 PreparedStatement 对象中的 SQL 语句，该对象可以是任何类型的 SQL 语句。

结果集执行查询（）

> 在此 PreparedStatement 对象中执行 SQL 查询，并返回查询生成的 ResultSet 对象。

**诠释执行更新（）**

> 执行此 PreparedStatement 对象中的 SQL 语句，该语句必须是 SQL INSERT、UPDATE 或 DELETE 语句；或不返回任何内容的 SQL 语句，例如 DDL 语句。

* * *

还有一件事，您的查询很弱，因为它很容易受到`SQL Injection`. 请使用 进行参数化`PreparedStatement`。

示例代码片段：

```
String insertNewUserSQL = "INSERT INTO " + studentsTable + " VALUES (?, ?, ?, ?, ?, ?, ?)";
PreparedStatement pstmt = con.prepareStatement(insertNewUserSQL);
pstmt.setString(1, userName);
// ... repeat this step until the last parameter ....
pstmt.setString(7, email);
pstmt.executeUpdate(); 
```

*   [Java PreparedStatement](http://docs.oracle.com/javase/6/docs/api/java/sql/PreparedStatement.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T02:43:02.937

要更新值，您需要使用可更新的 ResultSet，如下所示：

```
ResultSet res = preparedStatement.executeQuery(ResultSet.TYPE_SCROLL_INSENSITIVE, ResultSet.CONCUR_UPDATABLE);
res.first();
res.updateInt("id", 2);
res.updateRow(); 
```

或者，您可以使用语句的 executeUpdate 方法，如下所示： `statement.executeUpdate("update table set id = 2");`

# wpf - wpf ListView - 禁用标题鼠标悬停效果

> ID：16006870
> 
> 赞同：2
> 
> 时间：2013-04-15T02:37:45.757
> 
> 标签：wpf, listview, gridview

我有一个简单的 1 列 ListView，我需要禁用 GridViewColumnHeader 的鼠标悬停效果。

我尝试从这里获取样式：http: [//msdn.microsoft.com/en-us/library/ms788747.aspx](http://msdn.microsoft.com/en-us/library/ms788747.aspx)

然而，这给了我的标题一个紫色渐变，所以我猜这是错误的样式。我注意到它有一个

```
<VisualState x:Name="MouseOver"> 
```

但我不知道如何在没有找到并包含正确的 GridViewColumnHeader 样式然后将其删除的情况下删除它。

我尝试了以下方法，但它没有做任何事情（VisualState 覆盖？）并且无论如何都不会工作，因为将背景设置为 null 不是我想要的。

```
 <Style x:Key="hcs" TargetType="{x:Type GridViewColumnHeader}">
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Background" Value="{x:Null}" />
                    <Setter Property="BorderBrush" Value="{x:Null}" />
                </Trigger>
            </Style.Triggers>
        </Style> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T11:52:07.503

问题是，就像您自己说的那样，处于 MouseOver 视觉状态及其情节提要。我认为摆脱冗余功能比以后尝试覆盖它更好。所以我们基本上只需要相同的风格，但没有故事板。至少我们需要有以下东西（可以通过您提供的链接在 MSDN 上找到）：

```
 <Color x:Key="BorderLightColor">#FFCCCCCC</Color>
 <Color x:Key="BorderDarkColor">#FF444444</Color>

 <Style x:Key="GridViewColumnHeaderGripper"
           TargetType="Thumb">
      <!-- Full GridViewColumnHeaderGripper style here  -->
 </Style>

 <Style TargetType="GridViewColumnHeader">
     <Setter Property="Template">
        <Setter.Value>
          <ControlTemplate TargetType="GridViewColumnHeader">
              <!-- Standard template but with redundant Storyboard removed -->
          </ControlTemplate>
        </Setter.Value>
     </Setter>
  </Style> 
```

最后一个样式没有键，因此它适用`GridViewColumnHeader`于页面\应用程序上的所有内容（取决于它的定义位置）。或者您可以设置密钥并仅在特定网格中使用它。

这是最低限度的，因此对于更可定制的方法，最好也复制默认样式的其他部分。

# c# - 使用 XNA 和 C# 在 X 和 Y 轴上的 2D 视差背景

> ID：16006874
> 
> 赞同：2
> 
> 时间：2013-04-15T02:37:58.830
> 
> 标签：c#, background, xna, 2d, parallax

我正在使用 XNA 开发一款太空射击游戏，并遵循多个教程来创建视差背景。到目前为止，我可以让它沿着 X 或 Y 轴移动，但不能同时沿着两个轴移动。我有一个跟随玩家的相机类，玩家移动它（而不是“世界”），因为我认为移动玩家比移动玩家周围的其他一切更容易。

到目前为止，背景跟不上玩家，也无法同时理解两个轴。我想过一个平铺引擎，但这不会让我在不同的图层上产生视差，对吗？

谁能帮我理解我需要做什么，或者推荐一个可以同时做两个轴的教程？这次我似乎无法自己找到答案。

这是我的背景类的代码：

```
class Background
{
    // Textures to hold the two background images
    Texture2D spaceBackground, starsParallax;

    int backgroundWidth = 2048;
    int backgroundHeight = 2048;

    int parallaxWidth = 2048;
    int parallaxHeight = 2048;

    int backgroundWidthOffset;
    int backgroundHeightOffset;

    int parallaxWidthOffset;
    int parallaxHeightOffset;

    public int BackgroundWidthOffset
    {
        get { return backgroundWidthOffset; }
        set
        {
            backgroundWidthOffset = value;
            if (backgroundWidthOffset < 0)
            {
                backgroundWidthOffset += backgroundWidth;
            }
            if (backgroundWidthOffset > backgroundWidth)
            {
                backgroundWidthOffset -= backgroundWidth;
            }
        }
    }

    public int BackgroundHeightOffset
    {
        get { return backgroundHeightOffset; }
        set
        {
            backgroundHeightOffset = value;
            if (backgroundHeightOffset < 0)
            {
                backgroundHeightOffset += backgroundHeight;
            }
            if (backgroundHeightOffset > backgroundHeight)
            {
                backgroundHeightOffset -= backgroundHeight;
            }
        }
    }

    public int ParallaxWidthOffset
    {
        get { return parallaxWidthOffset; }
        set
        {
            parallaxWidthOffset = value;
            if (parallaxWidthOffset < 0)
            {
                parallaxWidthOffset += parallaxWidth;
            }
            if (parallaxWidthOffset > parallaxWidth)
            {
                parallaxWidthOffset -= parallaxWidth;
            }
        }
    }

    public int ParallaxHeightOffset
    {
        get { return parallaxHeightOffset; }
        set
        {
            parallaxHeightOffset = value;
            if (parallaxHeightOffset < 0)
            {
                parallaxHeightOffset += parallaxHeight;
            }
            if (parallaxHeightOffset > parallaxHeight)
            {
                parallaxHeightOffset -= parallaxHeight;
            }
        }
    }

    // Constructor when passed a Content Manager and two strings
    public Background(ContentManager content,
                      string sBackground, string sParallax)
    {
        spaceBackground = content.Load<Texture2D>(sBackground);
        backgroundWidth = spaceBackground.Width;
        backgroundHeight = spaceBackground.Height;

        starsParallax = content.Load<Texture2D>(sParallax);
        parallaxWidth = starsParallax.Width;
        parallaxHeight = starsParallax.Height;
    }

    public void Draw(SpriteBatch spriteBatch)
    {
        // Draw the background panel, offset by the player's location
        spriteBatch.Draw(
            spaceBackground,
            new Rectangle(-1 * backgroundWidthOffset,
                          -1 * backgroundHeightOffset, 
                          backgroundWidth,
                          backgroundHeight),
            Color.White);

        // If the right edge of the background panel will end 
        // within the bounds of the display, draw a second copy 
        // of the background at that location.
        if (backgroundWidthOffset > backgroundWidth)
        {
            spriteBatch.Draw(
                spaceBackground,
                new Rectangle(
                  (-1 * backgroundWidthOffset) + backgroundWidth, 0,
                  backgroundWidth, backgroundHeight),
                Color.White);
        }
        else //(backgroundHeightOffset > backgroundHeight - viewportHeight)
        {
            spriteBatch.Draw(
                spaceBackground,
                new Rectangle(
                  0, (-1 * backgroundHeightOffset) + backgroundHeight,
                  backgroundHeight, backgroundHeight),
                Color.White);
        }

        // Draw the parallax star field
        spriteBatch.Draw(
            starsParallax,
            new Rectangle(-1 * parallaxWidthOffset,
                            0, parallaxWidth,
                            parallaxHeight),
            Color.SlateGray);
        // if the player is past the point where the star 
        // field will end on the active screen we need 
        // to draw a second copy of it to cover the 
        // remaining screen area.
        if (parallaxWidthOffset > parallaxWidth)
        {
            spriteBatch.Draw(
                starsParallax,
                new Rectangle(
                    (-1 * parallaxWidthOffset) + parallaxWidth,
                    0,
                    parallaxWidth,
                    parallaxHeight),
                Color.White);
        }
    }
} 
```

然后主游戏与玩家一起移动背景。

```
background.BackgroundWidthOffset -= 2;
background.ParallaxWidthOffset -= 1; 
```

从视觉上看，背景有点跳跃，似乎随机跳过或重叠背景图块。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T11:20:13.597

我过去使用过这种方法，效果很好：

[http://www.david-gouveia.com/scrolling-textures-with-zoom-and-rotation/](http://www.david-gouveia.com/scrolling-textures-with-zoom-and-rotation/)

它使用着色器来完成效果，从而实现快速实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T12:10:32.673

[这里](http://msdn.microsoft.com/en-us/library/dd254919%28v=xnagamestudio.31%29.aspx)有一个完整的例子。

# mysql - 这个 SQL 语法有什么错误？

> ID：16006880
> 
> 赞同：1
> 
> 时间：2013-04-15T02:39:25.977
> 
> 标签：mysql, sql, join

我创建了这个 SQL 语句：

```
SELECT * 
    FROM forum_question 
        LEFT JOIN forum_answer ON (
            forum_question.id = forum_answer.question_id) 
    ORDER BY a_datetime DESC GROUP BY forum_question.id; 
```

有谁知道这个问题？forum_question 和 forum_answer 以及 'id' 列由 by 存在。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T02:40:24.487

`GROUP BY`子句应该在`ORDER BY`子句之前。换个试试看

```
GROUP BY forum_question.id
ORDER BY a_datetime DESC 
```

# php - PHP mysql 查询填充条形图 The Last 7 days

> ID：16006883
> 
> 赞同：0
> 
> 时间：2013-04-15T02:39:40.423
> 
> 标签：php, mysql, sql

我有一个要填充的条形图，需要 7 和 1 为一周中的每一天，周一 - 周日。

星期一是工作周的开始，星期日是一周的最后一天。

数据库中的数据如下所示。

```
user1|2013-04-13 16:53:55|1
user1|2013-03-13 16:53:55|1
user1|2013-03-13 15:53:55|1
user1|2013-02-13 09:53:55|1
user1|2013-04-13 07:53:55|1
user2|2013-03-13 15:53:55|1 
```

行数是每个用户的总和

这是一种找出星期几的方法。

```
 //find day of week 
    $dayofweek = date('l', strtotime(date("Y-m-d H:i:s")));

    $dates = array(); 
    if ($dayofweek == "Monday") {
      $dates['monday']['morning'] = date( 'Y-m-d 00:00:01', strtotime( 'Monday last week' ));
      $dates['monday']['evening']= date( 'Y-m-d 23:59:59', strtotime( 'Monday last week' ));
      $dates['tuesday']['morning'] = date( 'Y-m-d 00:00:01', strtotime( 'Tuesday this week' ));
      $dates['tuesday']['evening'] = date( 'Y-m-d 23:59:59', strtotime( 'Tuesday this week' ));
      $dates['wednesday']['morning'] = date( 'Y-m-d 00:00:01', strtotime( 'Wednesday this week' ));
      $dates['wednesday']['evening'] = date( 'Y-m-d 23:59:59', strtotime( 'Wednesday this week' ));
      $dates['thursday']['morning'] = date( 'Y-m-d 00:00:01', strtotime( 'Thursday this week' ));
      $dates['thursday']['evening'] = date( 'Y-m-d 23:59:59', strtotime( 'Thursday this week' ));
      $dates['friday']['morning'] = date( 'Y-m-d 00:00:01', strtotime( 'Friday this week' ));
      $dates['friday']['evening'] = date( 'Y-m-d 23:59:59', strtotime( 'Friday this week' ));
      $dates['saturday']['morning'] = date( 'Y-m-d 00:00:01', strtotime( 'Saturday this week' ));
      $dates['saturday']['evening'] = date( 'Y-m-d 23:59:59', strtotime( 'Saturday this week' ));
      $dates['sunday']['morning'] = date( 'Y-m-d 00:00:01', strtotime( 'Sunday this week' ));
      $dates['sunday']['evening'] = date( 'Y-m-d 23:59:59', strtotime( 'Sunday this week' ));     
    }
    elseif ($dayofweek == "Tuesday") {
      $dates['monday']['morning'] = date( 'Y-m-d 00:00:01', strtotime( 'Monday last week' ));
      $dates['monday']['evening']= date( 'Y-m-d 23:59:59', strtotime( 'Monday last week' ));
      $dates['tuesday']['morning'] = date( 'Y-m-d 00:00:01', strtotime( 'Tuesday last week' ));
      $dates['tuesday']['evening'] = date( 'Y-m-d 23:59:59', strtotime( 'Tuesday last week' ));
      $dates['wednesday']['morning'] = date( 'Y-m-d 00:00:01', strtotime( 'Wednesday this week' ));
      $dates['wednesday']['evening'] = date( 'Y-m-d 23:59:59', strtotime( 'Wednesday this week' ));
      $dates['thursday']['morning'] = date( 'Y-m-d 00:00:01', strtotime( 'Thursday this week' ));
      $dates['thursday']['evening'] = date( 'Y-m-d 23:59:59', strtotime( 'Thursday this week' ));
      $dates['friday']['morning'] = date( 'Y-m-d 00:00:01', strtotime( 'Friday this week' ));
      $dates['friday']['evening'] = date( 'Y-m-d 23:59:59', strtotime( 'Friday this week' ));
      $dates['saturday']['morning'] = date( 'Y-m-d 00:00:01', strtotime( 'Saturday this week' ));
      $dates['saturday']['evening'] = date( 'Y-m-d 23:59:59', strtotime( 'Saturday this week' ));
      $dates['sunday']['morning'] = date( 'Y-m-d 00:00:01', strtotime( 'Sunday this week' ));
      $dates['sunday']['evening'] = date( 'Y-m-d 23:59:59', strtotime( 'Sunday this week' ));      
    } 
    elseif ($dayofweek == "Wednesday") {
      $dates['monday']['morning'] = date( 'Y-m-d 00:00:01', strtotime( 'Monday last week' ));
      $dates['monday']['evening']= date( 'Y-m-d 23:59:59', strtotime( 'Monday last week' ));
      $dates['tuesday']['morning'] = date( 'Y-m-d 00:00:01', strtotime( 'Tuesday last week' ));
      $dates['tuesday']['evening'] = date( 'Y-m-d 23:59:59', strtotime( 'Tuesday last week' ));
      $dates['wednesday']['morning'] = date( 'Y-m-d 00:00:01', strtotime( 'Wednesday last week' ));
      $dates['wednesday']['evening'] = date( 'Y-m-d 23:59:59', strtotime( 'Wednesday last week' ));
      $dates['thursday']['morning'] = date( 'Y-m-d 00:00:01', strtotime( 'Thursday this week' ));
      $dates['thursday']['evening'] = date( 'Y-m-d 23:59:59', strtotime( 'Thursday this week' ));
      $dates['friday']['morning'] = date( 'Y-m-d 00:00:01', strtotime( 'Friday this week' ));
      $dates['friday']['evening'] = date( 'Y-m-d 23:59:59', strtotime( 'Friday this week' )); 
      $dates['saturday']['morning'] = date( 'Y-m-d 00:00:01', strtotime( 'Saturday this week' ));
      $dates['saturday']['evening'] = date( 'Y-m-d 23:59:59', strtotime( 'Saturday this week' ));
      $dates['sunday']['morning'] = date( 'Y-m-d 00:00:01', strtotime( 'Sunday this week' ));
      $dates['sunday']['evening'] = date( 'Y-m-d 23:59:59', strtotime( 'Sunday this week' ));     
    }
    elseif ($dayofweek == "Thursday") {
      $dates['monday']['morning'] = date( 'Y-m-d 00:00:01', strtotime( 'Monday last week' ));
      $dates['monday']['evening']= date( 'Y-m-d 23:59:59', strtotime( 'Monday last week' ));
      $dates['tuesday']['morning'] = date( 'Y-m-d 00:00:01', strtotime( 'Tuesday last week' ));
      $dates['tuesday']['evening'] = date( 'Y-m-d 23:59:59', strtotime( 'Tuesday last week' ));
      $dates['wednesday']['morning'] = date( 'Y-m-d 00:00:01', strtotime( 'Wednesday last week' ));
      $dates['wednesday']['evening'] = date( 'Y-m-d 23:59:59', strtotime( 'Wednesday last week' ));
      $dates['thursday']['morning'] = date( 'Y-m-d 00:00:01', strtotime( 'Thursday last week' ));
      $dates['thursday']['evening'] = date( 'Y-m-d 23:59:59', strtotime( 'Thursday last week' ));
      $dates['friday']['morning'] = date( 'Y-m-d 00:00:01', strtotime( 'Friday this week' ));
      $dates['friday']['evening'] = date( 'Y-m-d 23:59:59', strtotime( 'Friday this week' ));
      $dates['saturday']['morning'] = date( 'Y-m-d 00:00:01', strtotime( 'Saturday this week' ));
      $dates['saturday']['evening'] = date( 'Y-m-d 23:59:59', strtotime( 'Saturday this week' ));
      $dates['sunday']['morning'] = date( 'Y-m-d 00:00:01', strtotime( 'Sunday this week' ));
      $dates['sunday']['evening'] = date( 'Y-m-d 23:59:59', strtotime( 'Sunday this week' ));      
    } 
    elseif ($dayofweek == "Friday") {
      $dates['monday']['morning'] = date( 'Y-m-d 00:00:01', strtotime( 'Monday last week' ));
      $dates['monday']['evening']= date( 'Y-m-d 23:59:59', strtotime( 'Monday last week' ));
      $dates['tuesday']['morning'] = date( 'Y-m-d 00:00:01', strtotime( 'Tuesday last week' ));
      $dates['tuesday']['evening'] = date( 'Y-m-d 23:59:59', strtotime( 'Tuesday last week' ));
      $dates['wednesday']['morning'] = date( 'Y-m-d 00:00:01', strtotime( 'Wednesday last week' ));
      $dates['wednesday']['evening'] = date( 'Y-m-d 23:59:59', strtotime( 'Wednesday last week' ));
      $dates['thursday']['morning'] = date( 'Y-m-d 00:00:01', strtotime( 'Thursday last week' ));
      $dates['thursday']['evening'] = date( 'Y-m-d 23:59:59', strtotime( 'Thursday last week' ));
      $dates['friday']['morning'] = date( 'Y-m-d 00:00:01', strtotime( 'Friday last week' ));
      $dates['friday']['evening'] = date( 'Y-m-d 23:59:59', strtotime( 'Friday last week' ));
      $dates['saturday']['morning'] = date( 'Y-m-d 00:00:01', strtotime( 'Saturday this week' ));
      $dates['saturday']['evening'] = date( 'Y-m-d 23:59:59', strtotime( 'Saturday this week' ));
      $dates['sunday']['morning'] = date( 'Y-m-d 00:00:01', strtotime( 'Sunday this week' ));
      $dates['sunday']['evening'] = date( 'Y-m-d 23:59:59', strtotime( 'Sunday this week' ));      
    } 
    elseif ($dayofweek == "Saturday") {
      $dates['monday']['morning'] = date( 'Y-m-d 00:00:01', strtotime( 'Monday last week' ));
      $dates['monday']['evening']= date( 'Y-m-d 23:59:59', strtotime( 'Monday last week' ));
      $dates['tuesday']['morning'] = date( 'Y-m-d 00:00:01', strtotime( 'Tuesday last week' ));
      $dates['tuesday']['evening'] = date( 'Y-m-d 23:59:59', strtotime( 'Tuesday last week' ));
      $dates['wednesday']['morning'] = date( 'Y-m-d 00:00:01', strtotime( 'Wednesday last week' ));
      $dates['wednesday']['evening'] = date( 'Y-m-d 23:59:59', strtotime( 'Wednesday last week' ));
      $dates['thursday']['morning'] = date( 'Y-m-d 00:00:01', strtotime( 'Thursday last week' ));
      $dates['thursday']['evening'] = date( 'Y-m-d 23:59:59', strtotime( 'Thursday last week' ));
      $dates['friday']['morning'] = date( 'Y-m-d 00:00:01', strtotime( 'Friday last week' ));
      $dates['friday']['evening'] = date( 'Y-m-d 23:59:59', strtotime( 'Friday last week' ));
      $dates['saturday']['morning'] = date( 'Y-m-d 00:00:01', strtotime( 'Saturday last week' ));
      $dates['saturday']['evening'] = date( 'Y-m-d 23:59:59', strtotime( 'Saturday last week' ));
      $dates['sunday']['morning'] = date( 'Y-m-d 00:00:01', strtotime( 'Sunday this week' ));
      $dates['sunday']['evening'] = date( 'Y-m-d 23:59:59', strtotime( 'Sunday this week' ));      
    }
    elseif ($dayofweek == "Sunday") {
      $dates['monday']['morning'] = date( 'Y-m-d 00:00:01', strtotime( 'Monday last week' ));
      $dates['monday']['evening']= date( 'Y-m-d 23:59:59', strtotime( 'Monday last week' ));
      $dates['tuesday']['morning'] = date( 'Y-m-d 00:00:01', strtotime( 'Tuesday last week' ));
      $dates['tuesday']['evening'] = date( 'Y-m-d 23:59:59', strtotime( 'Tuesday last week' ));
      $dates['wednesday']['morning'] = date( 'Y-m-d 00:00:01', strtotime( 'Wednesday last week' ));
      $dates['wednesday']['evening'] = date( 'Y-m-d 23:59:59', strtotime( 'Wednesday last week' ));
      $dates['thursday']['morning'] = date( 'Y-m-d 00:00:01', strtotime( 'Thursday last week' ));
      $dates['thursday']['evening'] = date( 'Y-m-d 23:59:59', strtotime( 'Thursday last week' ));
      $dates['friday']['morning'] = date( 'Y-m-d 00:00:01', strtotime( 'Friday last week' ));
      $dates['friday']['evening'] = date( 'Y-m-d 23:59:59', strtotime( 'Friday last week' ));
      $dates['saturday']['morning'] = date( 'Y-m-d 00:00:01', strtotime( 'Saturday last week' ));
      $dates['saturday']['evening'] = date( 'Y-m-d 23:59:59', strtotime( 'Saturday last week' ));
      $dates['sunday']['morning'] = date( 'Y-m-d 00:00:01', strtotime( 'Sunday last week' ));
      $dates['sunday']['evening'] = date( 'Y-m-d 23:59:59', strtotime( 'Sunday last week' ));      
   } 
```

我应该为一周中的每一天创建七个查询 1 吗？

```
SELECT myDateTime FROM `mylog` WHERE myDateTime >= $dates['monday']['morning'] AND myDateTime <= $dates['monday']['evening'] 
```

还是有更简单更有效的方法？

谢谢。

=========================编辑1======================== ====

这是我到目前为止所拥有的。

```
SELECT date( myDateTime ) , sum( myValue )
FROM mylog
GROUP BY date( myDateTime ) 
```

如何像星期一一样指定我想要的日期？

有没有办法把它变成 1 个查询而不是 7 个？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-25T22:19:36.240

我想你想要的可能是这个。虽然我可能错了

```
SELECT user, DAYOFWEEK(myDateTime) as day_of_week, SUM(myValue) as total
FROM mylog
WHERE myDateTime >= DATE_FORMAT(NOW() - INTERVAL 1 WEEK, "%Y-%m-%d")
GROUP BY user, DAYOFWEEK(myDateTime) 
```

希望这是相当不言自明的？WHERE 子句为您提供上周的所有记录，GROUP BY 将首先按用户分组，然后是星期几（1 = 星期日）。这些东西的手册是[http://dev.mysql.com/doc/refman/5.1/en/date-and-time-functions.html#function_dayofweek](http://dev.mysql.com/doc/refman/5.1/en/date-and-time-functions.html#function_dayofweek)。所以你应该最终得到类似的东西

```
user  |  day_of_week  |  total
------+---------------+-------
user1 | 1             | 23
user1 | 2             | 14
...
user1 | 7             | 65
user2 | 1             | 12
user2 | 2             | 78 
```

等等。这似乎是你一开始就问的？

# jquery - 手机上的html div格式问题html5 jquerymobile

> ID：16006885
> 
> 赞同：0
> 
> 时间：2013-04-15T02:40:11.720
> 
> 标签：jquery, html, jquery-mobile

我的 HTML 代码中有以下 DIV

```
<div id="page3" data-role="page">
<div data-role="content" style="height: 60px; top: 50%;" >  
    <table border="0" width="100%">
      <tr>
        <td>
            <img id="advImageMap" style="float:left; margin-top:0px;" width="40" height="40" >
            <p id="mapText" style="display: inline-block; margin-left:10px; margin-top:5px;"></p>
            <img id="popupMap" src="icons/ico_navi.png" class="ui-btn-right" style="float:right; margin-top:1px" />
        </td>
      </tr>
    </table>
</div> 
```

这段代码打算做的是，在最左边放置一个图标，然后是一些文本，然后是另一个图像。这些图像通常是缩略图或非常小的图像。我在这里看到的问题是，当这个页面显示在手机上时，有时当文本很长时，最后一张图片'popupMap'一直到最后，最后一张图片溢出到下一行，拧紧格式化。我在某处读到可以使用 jQuery ellipsis 库将 ... 添加到文本中，但我不知道如何为我的移动设备配置它。对于平板电脑来说，它看起来不错。非常感谢任何建议或帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T07:41:41.320

既然您已经在使用表格，为什么不将每个预期的列放在一个`<td>`?

我已经删除了你的浮动，因为我不知道你的#popupMap 的尺寸，所以我假设为 32x32 像素（和紫色背景：D）

```
<div id="page3" data-role="page">
<div data-role="content" style="height: 60px; top: 50%;">  
    <table border="0" width="100%"><tbody>
      <tr>
        <td style="width: 40px;">
            <img id="advImageMap" style="margin-top:0px;" width="40" height="40">
        </td>
        <td>
            <p id="mapText" style="margin-left:10px; margin-top:5px;">Lorem ipsum im a gummibear because gummibears are freaking awesome!</p>
        </td>
        <td style="width: 32px;">
            <img id="popupMap" src="icons/ico_navi.png" class="ui-btn-right" style="margin-top:1px; width: 32px; height: 32px;background-color: purple;">
        </td>
      </tr>
    </tbody></table>
</div>
</div> 
```

# android - UsbManager.getDeviceList() 返回空

> ID：16006889
> 
> 赞同：5
> 
> 时间：2013-04-15T02:40:38.540
> 
> 标签：android, usb

我想`UsbManager`通过编写以下代码来使用 API：

在活动代码中：

```
 UsbManager manager = (UsbManager) getSystemService(Context.USB_SERVICE);

        HashMap<String, UsbDevice> deviceList = manager.getDeviceList();

        Log.d(TAG, "size =" + deviceList.size()); 
```

在清单中：

```
<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="17" />

    <permission android:name="android.hardware.usb.host" >

</permission>

<uses-feature android:name="android.hardware.usb.host" android:required="true" /> 
```

我也跟着[这个问题](https://stackoverflow.com/questions/11183792/android-usb-host-and-hidden-devices)，检查了我的 Galaxy SII 9100G。它确实具有`/system/etc/permissions/android.hardware.usb.host.xml`, 和正确的权限。

但是`manager.getDeviceList()`当我尝试闪存驱动程序和鼠标时，总是返回零。

谁能给我任何建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-11-04T06:15:45.260

你的问题没有共同的答案。这在很大程度上取决于您的设备。模拟器根本不支持 USB 主机，有些设备需要 root 才能做到，有些设备有正确的 USB 主机支持开箱即用。

**编辑**

我最近完成了对设备 TF-MID1007G 的这个问题的调查。可能这对以后的人有帮助。有一个很棒的应用程序可以对设备的 USB 主机功能进行诊断 - [USB 主机诊断](https://play.google.com/store/apps/details?id=eu.chainfire.usbhostdiagnostics)（非常感谢作者，你真的拯救了我的一天）。此应用程序显示有关设备的 USB 主机支持的判断，在我的情况下，它是内核支持的 USB 主机，但仅限于第三方应用程序。幸运的是，这个应用程序还可以（仅在有根设备上）修复您的设备系统以添加与 USB 主机一起使用的功能。即使在重置设备后，此修复程序仍然存在。在此修复后，我的应用程序可以枚举 USB 主机设备、请求权限等，如标准 android API 中所述。如此简短的操作列表，可在此设备上启用正常的 USB 主机支持

*   带有 VRoot 或百度 Root 的 root 设备（我用的是最后一个，因为我附近没有任何窗口）
*   安装[USB 主机诊断](https://play.google.com/store/apps/details?id=eu.chainfire.usbhostdiagnostics)
*   开始diagnosic，失败后请求root权限并确认修复系统，同意
*   修复后，确保 VERDICT 部分包含第 3 行应用程序 - 完整
*   毕竟我重置了我的设备以删除根（这通常很危险，百度根总是要求安装一些英国媒体报道）

现在此设备已准备好与 USB 设备一起使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T04:22:49.407

这段代码对我来说很好。尽管您的代码看起来很相似，但您可以重新检查。

```
 UsbManager usbManager = (UsbManager) getSystemService(USB_SERVICE);
  HashMap<String, UsbDevice> map = usbManager.getDeviceList();
  Iterator<UsbDevice> it = map.values().iterator();

  while(it.hasNext()) {
    UsbDevice device = it.next();
    // use device info
  } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-04T10:44:09.390

可能您正在尝试通过 android 模拟器运行，但是.....根据模拟器的 Android 规范：http: [//developer.android.com/tools/devices/emulator.html#limitations](http://developer.android.com/tools/devices/emulator.html#limitations)

模拟器的功能限制包括：

```
No support for USB connections 
```

所以，只有在真机上才能测试 UsbManager

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-05-10T21:35:52.470

我在运行 Android Pie 的华为 Mate 20 Pro 上遇到过这个问题。相同的程序可以在 Android 5 或 7 设备上完美运行。有一些证据表明这是一个 Android Pie 问题： [https ://issuetracker.google.com/issues/121435921](https://issuetracker.google.com/issues/121435921)

# c++ - 在给定 remote_endpoint 对象和套接字的情况下向客户端发送数据包？

> ID：16006894
> 
> 赞同：0
> 
> 时间：2013-04-15T02:41:03.433
> 
> 标签：c++, boost-asio, send, packet

[`remote_endpoint`](http://www.boost.org/doc/libs/1_53_0/doc/html/boost_asio/reference/basic_stream_socket/remote_endpoint/overload1.html)有没有办法向知道对象在哪里使用`endpoint.address`和使用的客户端发送数据包`endpoint.port`？

**编辑**：我添加了`async_write`免费功能，但我仍然不知道如何指定`socket_`要发送`data_`到（客户端）的 IP 地址或端口。更改是 boost 异步服务器示例的第 44-49 行。

```
#include <cstdlib>
#include <iostream>
#include <boost/bind.hpp>
#include <boost/asio.hpp>

using boost::asio::ip::tcp;

class session
{
public:
  session(boost::asio::io_service& io_service)
    : socket_(io_service)
  {
  }

  tcp::socket& socket()
  {
    return socket_;
  }

  void start()
  {
      std::cout<<"start(): "<<std::endl;
          socket_.async_read_some(boost::asio::buffer(data_, max_length),
          boost::bind(&session::handle_read, this,
          boost::asio::placeholders::error,
          boost::asio::placeholders::bytes_transferred));
  }
void read_handler(const boost::system::error_code& ec, std::size_t bytes_transferred);

private:
  void handle_read(const boost::system::error_code& error,
      size_t bytes_transferred)
  {
      std::cout<<"handle read: bytes_transferred"<<bytes_transferred<<std::endl;
    if (!error)
    {
          data_ = {'0','1','2','3','4','5','6','7','8','9'};
          /*read_handler(error, bytes_transferred);
          boost::asio::async_write(socket_,boost::asio::buffer(data_, bytes_transferred),
                boost::bind(&session::handle_write, this,
                            boost::asio::placeholders::error));*/
          boost::system::error_code ec;
          boost::asio::ip::tcp::endpoint endpoint = socket_.remote_endpoint(ec);
          std::cout<<"ip address: "<<endpoint.address()<<std::endl;
          std::cout<<"port: "<<endpoint.port()<<std::endl;
          //how to get the socket to send data to specific port, ip-address e.g. changing the ip-address and port by editing it?
          async_write(socket_, boost::asio::buffer(data_, max_length), boost::bind(&session::writeHandler, this, boost::asio::placeholders::error, boost::asio::placeholders::bytes_transferred));
    }
    else
    {
      delete this;
    }
  }
  void writeHandler(const boost::system::error_code& errorCode, size_t bytesTransferred)
  {
        std::cout << "DEBUG> Transfered " << bytesTransferred << " bytes to " << socket_.remote_endpoint().address().to_string() << std::endl;
  }
  void handle_write(const boost::system::error_code& error)
  {
      std::cout<<"handle write: "<<std::endl;

    if (!error)
    {
            std::cout<<"before: "<<data_<<std::endl;

            socket_.async_read_some(boost::asio::buffer(data_, max_length),
            boost::bind(&session::handle_read, this,
            boost::asio::placeholders::error,
            boost::asio::placeholders::bytes_transferred));

            std::cout<<"after: "<<data_<<std::endl;
    }
    else
    {
      delete this;
    }
  }

  tcp::socket socket_;
  enum { max_length = 1024 };
  char data_[max_length];
};
void session::read_handler(const boost::system::error_code& ec, std::size_t bytes_transferred)
{
      std::cout<<bytes_transferred<<std::endl;
}

class server
{
public:
  server(boost::asio::io_service& io_service, short port)
    : io_service_(io_service),
      acceptor_(io_service, tcp::endpoint(tcp::v4(), port))
  {
    start_accept();
  }

private:
  void start_accept()
  {
    session* new_session = new session(io_service_);
    acceptor_.async_accept(new_session->socket(),
        boost::bind(&server::handle_accept, this, new_session,
          boost::asio::placeholders::error));
  }

  void handle_accept(session* new_session,
      const boost::system::error_code& error)
  {
    if (!error)
    {
      new_session->start();
    }
    else
    {
      delete new_session;
    }

    start_accept();
  }

  boost::asio::io_service& io_service_;
  tcp::acceptor acceptor_;
};

int main()
{
  try
  {
    boost::asio::io_service io_service;
    server s(io_service, 4000);

    io_service.run();
  }
  catch (std::exception& e)
  {
    std::cerr << "Exception: " << e.what() << "\n";
  }

  return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T02:44:31.450

假设 TCP 套接字，因为这是您在文档中链接到的，不，那是不可能的。您需要一个套接字对象来发送数据，而不仅仅是一个端点。使用`async_write()`free 函数、它的许多重载之一或任何套接字类方法来发送数据。

# html - HTML5 与原生

> ID：16006899
> 
> 赞同：0
> 
> 时间：2013-04-15T02:41:46.333
> 
> 标签：html, native

我在这里读过文章，但它可以追溯到 2012 年 5 月 [HTML5 vs Native App：选择哪个？](https://stackoverflow.com/questions/10648459/html5-vs-native-app-which-to-choose)

所以我想知道此刻是否有任何变化..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T02:55:48.557

这**取决于**. 你不能在这里有赢家。两者都有优缺点，所以你必须决定这些因素，什么最适合你，当然还有你最熟悉的编程语言。

**本机应用程序优点**

*   更好的性能和用户体验
*   不绑定浏览器
*   完整的移动功能访问（相机、麦克风、联系人等）

**HTML5（网络应用程序）优点**

*   多平台支持（单个应用程序）
*   易于维护
*   可扩展

但我不明白为什么[HTML5 与 Native App ：选择哪个？](https://stackoverflow.com/questions/10648459/html5-vs-native-app-which-to-choose)没有覆盖你。据我所知，没有任何改变，所选答案非常有用。

# java - 查找数组中不同的重复项

> ID：16006901
> 
> 赞同：0
> 
> 时间：2013-04-15T02:42:01.837
> 
> 标签：java, arrays, methods

我正在尝试编写一种方法来查找数组中的重复值，并在这种情况发生两次时返回 true（否则返回 false）。

我有一些东西，但由于某种原因，它在某些情况下无法正常工作：

```
public static boolean twoDuplicates(int[] values) {

    boolean twoDuplicate = false;
    int counter = 0;

    for(int i = 0; i < values.length; i++){
        for(int z = i + 1; z <= values.length - 1; z++){
            if(i != z && values[i] == values[z])
                counter++;
        }
    }
    if(counter == 2)
        twoDuplicate = true;
    return twoDuplicate;
} 
```

现在，我测试了它，当值为 [3,3,3,6,6] 时它不起作用。有什么原因吗？

编辑：我忘了提到重复项必须是不同的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T02:58:59.310

在您现有的代码中，您正在计算对的数量而不是查找重复项。您应该为每个“i”分别检查计数器。

```
public static boolean twoDuplicates(int[] values) {

boolean twoDuplicate = false;

for(int i = 0; i < values.length; i++){
int counter = 0;
for(int z = i + 1; z <= values.length - 1; z++){
        if(i != z && values[i] == values[z])
            counter++;
    }
   if(counter == 2) // or if(counter > 1) if finding three duplicates is also fine
      return true;
}

return false;
} 
```

或者

```
public static boolean twoDuplicates(int[] values) 
{
    for(int i = 0; i < values.length; i++)
    {
       int counter = 0;
       for(int z = i + 1; z <= values.length - 1; z++)
       {
            if(values[i] == values[z])
            {
                counter++;
                if(counter == 2) // check here if you want 2 or more duplicates
                   return true;
            }
        }
        // check here if you want exactly two duplicates
    }

    return false;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T02:49:26.527

看起来您只是在计算匹配的总数。即，您将匹配 3 两次（现在 counter = 3）和 z 一次，总共 4。当我使用数组运行此代码时，我得到 counter = 4;

我认为下面的代码将返回不同重复的数量（重复的数字，无论它发生多少次）。这将为测试数组返回 2。它首先对数组进行排序，然后查找重复项，忽略已经计算过的重复项。

```
public static boolean twoDuplicates(int[] values) {

        boolean twoDuplicate = false;
        int counter = 0;
        Arrays.sort(values);
        int old = values[0];
        boolean numberSeen = false;
        for(int i = 0; i < values.length; i++){
            if(values[i] == old){
                if(!numberSeen){
                    counter++;
                    numberSeen = true;
                }
            }else{
                numberSeen = false;
                old = values[i];
            }
        }
        if(counter == 2)
            twoDuplicate = true;
        return twoDuplicate;
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T02:48:14.013

根据你的逻辑，如果你有超过2个重复，函数会返回false，也许你应该用“counter>1”来判断，计数器定义应该放在外部迭代中。而且我认为算法不够聪明。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-15T02:54:59.877

1\. 您需要记住找到的第一个重复对的值。

否则，连续 3,3,3 - 你会发现 3 两次。所以存储第一个重复值并比较这不是它。

```
int firstDuplicate;

if(i != z && values[i] == values[z]) {

     if (counter == 0) {

          counter++;
          firstDuplicate = values[i];

     } else if (counter == 1 && values[i] != firstDuplicate) {

          counter++;
     }
} 
```

2\. `z <= values.length - 1`应该是`z < values.length`。正如你在第一个`for`.

3\. `{ }`即使块是单行的，也始终使用。

**UPD**

4\. `break;`当你找到你需要的东西时，使用它来停止迭代。

```
for(){
    for(){

    }
    if(counter == 2) {
        twoDuplicate = true;
        break;
    }
} 
```

或更好

```
for(int i = 0; i < values.length && counter < 2; i++;){
    for(){

    }
}

return counter >= 2; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-15T02:53:29.083

情况是这样的：

第一个循环读取第一个 3。第二个循环读取第二个和第三个 3。计数器变为 2。第一个循环读取第二个 3。第二个循环读取第三个 3。计数器变为 3。第一个循环读取第三个 3。第二个循环找不到任何东西。计数器为 3。第一个循环读取第一个 6。第二个循环读取第二个 6。计数器为 4。第一个循环读取第二个 6。第二个循环找不到任何东西。计数器为 4。

你需要做的是把它放在`if( counter == 2 )`第二个循环之后。这将解决您的问题。

`if( counter == 2 ) return true;`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-15T03:13:37.177

这就是我只需一个循环就可以做到的方式

```
 public static boolean twoDuplicates(int[] values) {
    HashSet<Integer> map = new HashSet<Integer>();
    int cont = 0;
    for (int i = 0; i < values.length; i++) {
        if (map.contains(values[i])){
            cont++;
            if (cont == 2) 
                return true;
        }           
        else
            map.add(values[i]);

    }
    return false;
} 
```

# php - 如何在 codeigniter 中使用 img_library 调整多个图像的大小

> ID：16006902
> 
> 赞同：2
> 
> 时间：2013-04-15T02:42:09.100
> 
> 标签：php, html, mysql, css, codeigniter

我上传了一张图片，我想将其重新调整为 200x200、70x70、40x40 的大小，每次调整大小时，它只会给我 2 张原始图片和 1 张拇指图片 200x200。我该怎么做呢？这是我的代码：

```
public function resize($path, $file)
{
    $data = array(200, 70, 40);
    foreach($data as $d) : 
    $config['image_library']    = 'gd2';
    $config['source_image']     = $path;
    $config['create_thumb']     = true;
    $config['maintain_ratio']   = true;
    $config['width']            = $d;
    $config['height']           = $d;   
    $config['new_image']        = './uploads/' . $d . $file;

    $this->load->library('image_lib', $config);
    $this->image_lib->resize();
    $this->image_lib->clear();
    endforeach;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-15T03:27:23.260

我建议在循环中调用以下内容：

`$this->image_lib->initialize($config);`

我认为可能发生的情况是，当您加载库时，初始化程序只被调用一次。您需要清除旧参数，并在每次要进行更改时调用初始化程序。

另外，我只会在视图文件中使用简码。坚持使用类文件中的标准大括号。

前任。循环代码：

```
foreach($data as $d)
{
  // statements to loop through here
} 
```

把它们放在一起...

```
public function resize($path, $file)
{
    $sizes = array(200, 70, 40);

    $this->load->library('image_lib');

    foreach($sizes as $size)
    { 
       $config['image_library']    = 'gd2';
       $config['source_image']     = $path;
       $config['create_thumb']     = true;
       $config['maintain_ratio']   = true;
       $config['width']            = $size;
       $config['height']           = $size;   
       $config['new_image']        = './uploads/' . $size . $file;

       $this->image_lib->clear();
       $this->image_lib->initialize($config);
       $this->image_lib->resize();
    }
} 
```

# cross-domain - 带有隐藏 jquery 选项卡的转发域 - jQuery1.9.1：-错误：访问对象的权限被拒绝

> ID：16006904
> 
> 赞同：1
> 
> 时间：2013-04-15T02:42:27.293
> 
> 标签：cross-domain, jquery-tabs

我有一个域被转发到godaddy中的子域（如果重要，则为dk）。每个浏览器都会以不同的方式在框架中呈现这些内容。Chrome 和 Safari 呈现 jquery 选项卡并且没有错误，但 IE 9 和 Firefox 20。不呈现 jquery 选项卡，Firefox firebug 中的错误是：

```
Error: Permission denied to access object
[Break On This Error]   
class2type[ core_toString.call(obj) ] || "object" : 
```

我在其中一个选项卡中的 javascript 幻灯片播放正常。我已经看到了一些对 x-frame 选项的参考，但这并不是都在同一台主机上，所以我看不出设置它们会有什么帮助。

url 是 pop67theshow.com - 文件的实际位置在 pop67.equatorproductions.net 并且没有域隐藏没有问题。

有人吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-07T01:13:16.793

我使用 JavaScript 检测屏幕尺寸时遇到了类似的问题。

访问 www.example.com/mypage.html 工作正常，但是当网站被隐藏时（www.what-the-user-sees.com --> www.example.com/mypage.html），它不能获取用户的系统详细信息，并将桌面大小的页面呈现给所有设备。

检查您是否正在访问客户端上的任何对象，因为它们可能被隐藏起来。

现在查看页面，也许您已经找到了解决方法/这不是问题。无论如何，以下是（某些）提供商的伪装在客户端浏览器中的样子：

```
<html>
<frame src="http://www.domain.com/mypage.html">
<noframes>
<body>
        <script language="JavaScript" type="text/JavaScript">
        <!--
        document.location.href = 'http://www.domain.com/mypage.html'
        //-->
        </script>
</body>
</noframes>
</html> 
```

# search - 如何在arraylist中查找对象的多个实例？

> ID：16006905
> 
> 赞同：0
> 
> 时间：2013-04-15T02:42:30.457
> 
> 标签：search, loops, arraylist

因此，我通常使用 for each 循环来查找数组列表中某些内容的匹配项，但是一旦找到匹配项，循环就会停止，如何让它继续搜索并找到所有匹配项，甚至可能将匹配项存储在新的数组列表中?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T02:44:18.900

遍历整个集合 - 将匹配的对象推入“经过审查”的数组列表（或向量？）并且在第一次匹配时不终止 for 循环的处理？

# json - Uncaught SyntaxError：意外的字符串（第 5 行）

> ID：16006911
> 
> 赞同：0
> 
> 时间：2013-04-15T02:43:09.977
> 
> 标签：json

在这个对象的创建中，出现了意外的字符串错误。这个声明不正确吗？

```
var all_coupons = {
    "merchant" : hostName ,
    "coupons" : [
        0 : {
                "coupon_code" : coupon_file.coupon[0].coupon ,
                "coupon_valid" : false ,
                "coupon_status" : false
            } ,

        1 : {
                "coupon_code" : coupon_file.coupon[1].coupon ,
                "coupon_valid" : false ,
                "coupon_status" : false
            }
    ]
}
console.log(all_coupons); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T02:49:32.970

删除`0:`和`1:`索引 - 在 JSON 数组中无法分配索引。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T02:51:13.867

```
var all_coupons = {
    "merchant" : hostName ,
    "coupons" : [
        {
                "coupon_code" : coupon_file.coupon[0].coupon ,
                "coupon_valid" : false ,
                "coupon_status" : false
            } ,    
        {
                "coupon_code" : coupon_file.coupon[1].coupon ,
                "coupon_valid" : false ,
                "coupon_status" : false
            }
    ] } console.log(all_coupons); 
```

尝试删除优惠券数组的索引。或者

```
var all_coupons = {
    "merchant" : hostName ,
    "coupons" : {
        0 : {
                "coupon_code" : coupon_file.coupon[0].coupon ,
                "coupon_valid" : false ,
                "coupon_status" : false
            } ,

        1 : {
                "coupon_code" : coupon_file.coupon[1].coupon ,
                "coupon_valid" : false ,
                "coupon_status" : false
            }
    }
}
console.log(all_coupons); 
```

将优惠券数组变成地图。

# cocos2d-iphone - 多个 CCNode 的一项操作

> ID：16006919
> 
> 赞同：0
> 
> 时间：2013-04-15T02:44:48.393
> 
> 标签：cocos2d-iphone

我正在创建这样的动作

```
id action = [CCRepeatForever actionWithAction:
                [CCSequence actions:
                    [CCMoveTo actionWithDuration:TIMESPEED position:POINT_TOP],
                              [CCMoveTo actionWithDuration:TIMESPEED position:POINT_START],
                              nil]]; 
```

我想在几个节点上运行它

```
 for (Myitem* bonusitem in self.bonusitems) {
                    [bonusitem runAction:action];
                } 
```

这崩溃了。如果我`[bonusitem runAction:[action copy]]`每次都这样做，但我认为我也有责任释放该动作。但是，这样做也总是会崩溃。所以我只是让那些未发布并且它有效但是AFAIK现在这会违反复制规则，不是吗？（复制的操作永远不会被释放，从而导致内存泄漏）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T12:45:22.177

您可以检查任何动作子类的代码。您将看到该操作的副本作为自动释放对象返回。所以你可以自由地使用它的副本。您不能多次使用任何操作。

# java - 更改数组的索引值

> ID：16006922
> 
> 赞同：0
> 
> 时间：2013-04-15T02:45:13.700
> 
> 标签：java, arrays, indexing

我想知道是否可以更改 java 数组用作其索引的类型的值，而不是

```
Fruit[0] = orange 
```

你可以有

```
Fruit[orange] = orange 
```

?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-15T02:46:42.457

这类似于Perl 等语言中的[关联数组](http://en.wikipedia.org/wiki/Associative_array)表示法。在 Java 中，它们表示为`Maps`：

```
Map<String, String> fruitMap = new HashMap<>();
fruitMap.put("orange", "orange"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T02:55:00.520

实际上java只接受（非负）整数作为其索引，要实现“字符串”，可以使用Map。这是使用 Map 的示例：[使用 Map](https://stackoverflow.com/questions/6943588/can-java-use-string-as-an-index-array-key-ex-arraya-1)。或者如果还想使用数组，可以使用枚举：[java enum tutorial](http://javarevisited.blogspot.com/2011/08/enum-in-java-example-tutorial.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-15T02:55:22.497

（我假设这`orange`是一个字符串或枚举或其他一些对象类型......）

> 我想知道是否可以更改 java 数组用作其索引的值...

不，这是不可能的

Java 数组的索引类型是`int`. 这从根本上“融入”了 Java 语言设计和 JVM 设计。`long`在 Java 8 及以下版本中，即使使用值作为数组索引或数组大小也是不可能的。

仅更改 Java 以允许`long`数组索引将是一项艰巨的任务。而且我认为如果不破坏大量现有应用程序就无法做到这一点。例如，可能有数百万行已部署的 Java 代码假定`array.length`可以分配给`int`.

* * *

幸运的是，Java 以 Map 接口及其实现类的形式提供了等价物。唯一缺少的是使 Map 访问看起来像常规 Java 数组访问的“语法糖”。

# ember.js - Ember 数据未加载属于使用夹具的关系

> ID：16006923
> 
> 赞同：3
> 
> 时间：2013-04-15T02:45:16.560
> 
> 标签：ember.js, ember-data

我正在开发一个非常基本的 ember 应用程序，但我似乎无法让它显示 belongsto 模型。

我的用户模型：

```
News.User = DS.Model.extend({
    username: DS.attr('string'),
    items: DS.hasMany('News.Item')
});

News.User.FIXTURES = [
    {
        "id": 1,
        "username": "Bobba_Fett",
        "items": [1,2]
    }] 
```

我的商品型号：

```
'use strict';

News.Item = DS.Model.extend({
    title: DS.attr('string'),
    url: DS.attr('string'),
    domain: DS.attr('string'),
    points: DS.attr('number'),
    comments: DS.hasMany('News.Comment'),
    user: DS.belongsTo('News.User')
});

News.Item.FIXTURES = [
    {
        "id": 1,
        "title": "This is story 1",
        "url": "http://google.com",
        "domain": "google.com",
        "points": 45,
        "comments": [1,2,3],
        "user_id": 1
    }, 
    {
        "id": 2,
        "title": "This is another story",
        "url": "http://yahoo.com",
        "domain": "yahoo.com",
        "points": 30,
        "comments": [1,2,3],
        "user_id": 1
    }
] 
```

我的 html （问题是用户名没有显示，它只是空白），其他一切都显示正常：

```
<script type="text/x-handlebars" data-template-name="items">
        <div class="row">
            <ul>
                {{#each itemList}}
                    <a href="upvote">&#x25B2;</a><a {{bindAttr href="url"}}>{{title}}</a> ({{domain}})<br />
            <small>{{points}} Ups -- submitted by {{user.username}}</small><br />
                {{/each}}
            </ul>
        </script> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-15T08:12:56.960

问题出在`News.Item.FIXTURES`声明中，`"user_id"`应该命名为 just `"user"`，因为这是**模型**定义中关系属性的名称。

这应该有效：

```
News.Item.FIXTURES = [
    {
        id: 1,
        title: "This is story 1",
        url: "http://google.com",
        domain: "google.com",
        points: 45,
        comment": [1,2,3],
        user: 1
    }, 
    {
        id: 2,
        title: "This is another story",
        url: "http://yahoo.com",
        domain: "yahoo.com",
        points: 30,
        comments: [1,2,3],
        user: 1
    }
]; 
```

编辑：我不知道你是否还在研究这个，但这是你的代码的一个工作小提琴，请注意我必须添加一个空模型`News.Comments = DS.Model.extend({});`才能工作：

[http://jsfiddle.net/Mftye/1/](http://jsfiddle.net/Mftye/1/)

希望这有帮助！

# javascript - 加载外部下划线模板

> ID：16006924
> 
> 赞同：1
> 
> 时间：2013-04-15T02:45:24.783
> 
> 标签：javascript, backbone.js, underscore.js

我无法在我的主干应用程序中加载外部下划线模板。内联模板（注释掉）工作得很好，但外部没有。

```
$.app.ObservationSummaryView = Backbone.View.extend({
    tagName: 'div',
    className: 'observation_summary_view',
    // template: _.template('ID: <%= id %><p>Comments:<%= comments.length %>'),
    template: _.template($('#tpl_observation_summary').html()),
    initialize: function(){
        _.bindAll(this, 'render', 'on_click');
        this.model.bind('change', this.render);
    },
    render: function(){
        return $(this.el).html(this.template(this.model.toJSON()));
    },
    on_click: function(e){
        $.app.app.navigate('observation/' + this.model.get('id') + '/', {trigger: true});
    }
}); 
```

HTML/模板：

```
<script type="text/template" id="tpl_observation_summary">
<%= id %>
</script>
<script type="text/javascript">
    $(document).ready(function() {
    (function($) {
    $.app.bootstrap();
})(jQuery);
});
</script> 
```

错误：

```
Uncaught TypeError: Cannot call method 'replace' of undefined underscore.js:1131
Uncaught TypeError: Object #<Object> has no method 'bootstrap' 
```

我猜这与我的应用程序在一个函数中有关，但我不确定如何解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T20:34:55.353

在你调用的那一刻`$('#tpl_observation_summary').html()`，DOM 似乎还没有准备好，你得到`null`了 的第一个参数`_.template`，因此导致 underscoreJS 无法处理不是一个字符串。

然后`bootstrap`无法定义该方法，因此不能作为 的函数调用`$.app`。

模板初始化可以包含在`initialize`Backbone 视图的第一次调用中。

# c - 将 16 位有符号整数表示为 0-100 之间的值

> ID：16006928
> 
> 赞同：1
> 
> 时间：2013-04-15T02:45:37.453
> 
> 标签：c, math

我对编程比较陌生，而且数学一直很糟糕。我有一个带 16 位符号的程序`INT` `-32,768 +32,768`我想将这些值表示为`1-100`正面和`-1 - -100`负面，以便它们更容易使用。所以基本上 100 等于 32,768；50 等于 16,384；等等。我怎样才能轻松地做到这一点？我正在用 C 编程，尽管我认为这更像是一个数学问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T02:54:30.537

您的要求似乎很奇怪，因为如果您尝试制作整数，那么您可以在 16 位整数值（通常是 a `short`）中使用范围 [-100, 100] 并且......好吧，就这样吧。

如果您还希望它包含*十进制*值，那么您需要考虑它无法以非常好的方式表示 [-100, 100] 的范围......如果您要求存储来自另一个 16 位整数值的 16 位整数值，你可以这样做它会非常混乱：

```
int16_t normalized = ( rawvalue / 327 ); // <--- scaled, rawvalue is int16_t 
```

但是，您正在失去精度，并且在某些值范围内存在混叠，因此这似乎不太好。如果您可以存储 a`float`或 a `double`，或者可以更好地保存值 [-100, 100] ：

```
double normalized = ( rawvalue * ( 32768.0 / 100.0 ) );
// float normalized = /*... */ Append "f" for "float" math instead on those constants 
```

您的要求似乎……很奇怪，但您就是这样做的。祝你好运！

编辑：

作为最后的建议，我会说，除非您的程序的另一部分要求 100 -> -100，否则如果您正在使用`float`或`double`使用范围 [-1.0, 1.0]，那么使用范围会**无限**好，并且可以更强大当做诸如缩放数字之类的事情时，进入其他输入和输出，包括将进入服务器的原始整数值。(INT16)(0.75 * MAX_MOTOR_VALUE) 比使用 100 到 -100 的方法要好得多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T02:54:06.217

16 位整数最多只能有 2 ^(16) =65536 个不同的值，从 -32767 到 +32767（以非 2 的补码表示）或从 -32768 到 +32767（以 2 的补码表示）。所以，你真的希望 32767 等于 100 并且 -32767 等于 -100。

这是你可以做的：

```
int int2fixed(int x)
{
  return x * 32767LL / 100;
}

int fixed2int(int x)
{
  return x * 100LL / 32767;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T02:53:34.400

将其除以最大值，乘以 100，然后截断为整数。例如（将最大值除和乘以 100 为 1 步）：

```
int normalize(int a)
{
    assert(a >= -32768 && a <= 32767)
    return (int)ceil(a / 327.68);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-15T10:00:36.997

她忘记了所有答案，我们需要将结果平均分布在 1..100 之间。而这些答案永远不会达到 100。

```
int normalize(int a)
{

    return (int)(a*101L/ 32769);
} 
```

# java - Java中的构造函数问题

> ID：16006935
> 
> 赞同：0
> 
> 时间：2013-04-15T02:47:02.260
> 
> 标签：java, constructor, this

我对 Java 很陌生，我似乎无法弄清楚为什么我的代码不起作用。理论上，它应该打印出 (0.0) 和我插入类中的任何内容之间的距离。有人可以帮帮我吗？

```
public class Homework61 {
    double x;
    double y;

    Homework61(double q, double r) {
        double x = q;
        double y = r;
    }

    Homework61() {
        x = 0.0;
        y = 0.0;
    }

    public String toString() {
        String a = "(" + x + "," + y + ")";
        return a;
    }

    public double distanceFromOrigin()

    {
        double z = Math.sqrt(Math.pow(x, 2) + Math.pow(y, 2));
        return z;
    }

    public static void main(String[] args) {
        // TODO Auto-generated method stub
        Homework61 p = new Homework61();
        System.out.println(p.toString() + " Is this far from origin: "
                + p.distanceFromOrigin());
        p = new Homework61(3, 4);
        p.x = 3;
        p.y = 4;
        System.out.println(p.toString() + " Is this far from origin: "
                + p.distanceFromOrigin());
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T02:49:08.000

```
Homework61(double q, double r) {
    double x = q;
    double y = r;
} 
```

创建 2 个局部变量 x 和 y 然后对它们不做任何事情。你大概是说

```
Homework61(double q, double r) {
    this.x = q;
    this.y = r;
} 
```

另外，您只在填充对象之前打印距离（x 和 y 始终为 0）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T02:58:20.720

```
double x;
double y;

Homework61(double q, double r) {
        double x = q;
        double y = r;
    } 
```

在上述情况下，即使您有 x 和 y 类变量，在构造函数 Homework61 中再次使用相同的名称创建 x 和 y 局部变量，其生命将在构造函数大括号的末尾退出。

如果您希望在声明的 x 和 y 类变量中初始化接收参数值，请使用***`this`***指针。

***`this`***指针用于区分局部变量和类变量，即***`it prevents the ambiguity between local variables and class variables`***

因此你必须像这样初始化它

```
Homework61(double q, double r) {
    this.x = q;
    this.y = r;
} 
```

# css - 关于使用 CSS 应用的百分比

> ID：16006940
> 
> 赞同：1
> 
> 时间：2013-04-15T02:47:26.463
> 
> 标签：css

我想知道 CSS 语言使用的百分比到底是什么。我有两个问题要理解这个过程：

为什么我们必须更改不同设备分辨率的值（例如，如果我想在屏幕中间放置一个元素，为什么它不适`margin-top: 50%;`用于每种情况）？

有没有办法在`%`对孩子应用 a 时使用容器作为参考（如`position relative`and`absolute`过程）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T03:00:12.520

答案：

1.  % 值是相对于父宽度的；`margin-top: 50%;`对于 1024 x 768 表示距离顶部 512，`margin-top: 50%;`对于 800 x 600 表示距离顶部 400。它绝对不同于不同的分辨率。

2.  ％ 为了什么？高度还是宽度？如果它的宽度已经引用了父（容器）。如果它的高度，你可以使用javascript。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T03:05:41.187

CSS 中 % 值的有趣之处在于它完全与父元素相关。这样想：

**HTML**

```
<div id="container">
    <div id="content">Hello</div>
</div> 
```

**CSS**

```
#container, #content { width: 50%; } 
```

该`#container`元素将具有 50% 的宽度，我们看到可以假设父元素是`body`标签，因为我没有明确声明父元素。这个容器是浏览器窗口宽度的 50%。同时`#content`，它的内部`#container`将有 50% 的宽度到父元素 ( `#container`)，这已经是浏览器宽度本身的 50%。`#content`因此，与整个浏览器相比的总宽度为25%（50% 的 50%）。

如果你想知道 CSS 中百分比的像素值，简短的回答是......*你不能*. 如果你想以百分比的形式确定这个值，那么你将需要使用 Javascript。但这并不全是坏事，但您也应该明白，通过 Javascript 应用样式并不是真正的最佳实践。这应该以创建 CSS 类的方式完成，然后使用 Javascript 添加或删除这些类以更改样式。但是，如果您只是希望获得该像素值而不相应地更改任何 CSS 样式，那么我刚才提到的内容并不重要。数字是一天结束时的数字，但 CSS 的重点从来不是做算术，它是一种将样式应用于最初继承浏览器定义的样式的 HTML 元素的简单方法。Javascript 是作为一种在前端分析数据并为网站创建动态存在的方法而发明的。CSS 从来没有为此目的而创建，并且符合当今的编码标准。

# javascript - 如何从全局访问隐藏在对象中的变量？

> ID：16006941
> 
> 赞同：1
> 
> 时间：2013-04-15T02:47:29.480
> 
> 标签：javascript

我一遍又一遍地读到全局变量和函数是不好的，必须不惜一切代价避免它们。但我一直无法做到这一点。我敢肯定这个问题已经被问过很多次了，我已经在 SO 上阅读过它们，但我仍然不完全理解。

我有一个对象，它有几个需要在特定事件上调用的方法（例如按钮单击）。我可以在匿名函数中隐藏所有内容，但是一旦这样做，我就不能再从外部调用对象内的方法。避免这种情况的唯一方法是将对象暴露给全局空间，以便它可以调用对象内的方法。

她的就是我的意思。

JavaScript

```
(function () { // using anonymous function to conceal variables/functions
    function Ninja (name) {
        this.name = name;

        this.hide = function () {
            alert("Find me if you can!");
        };

        this.kill = function (target) {
            alert(name + " killed " + target + ".");
        };
    }

    this.myNinja = new Ninja (""); // ... but I need to expose the object to global space
})(); 
```

HTML

```
<button onclick="myNinja.hide()">Click Me</button> 
```

如何防止事情走向全球，但仍然能够调用定义隐藏对象的方法？这甚至可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T03:51:22.287

为了防止全球化你的对象，你应该在闭包内定义你的事件监听器：

```
(function () { // using anonymous function to conceal variables/functions
    // Ninja declaration
    var ninja = new Ninja('');

    document.getElementsByTagName('button')[0]
        .addEventListener('click', function() {
            ninja.hide();
        }, false);
})(); 
```

附加事件处理程序的确切方法因浏览器而异，这应该适用于大多数现代浏览器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T02:49:01.017

改变

`this.myNinja = new Ninja ("");`

至

`window.myNinja = new Ninja ("");`

# shell - 在 shell 脚本中为命令添加答案

> ID：16006943
> 
> 赞同：1
> 
> 时间：2013-04-15T02:48:06.433
> 
> 标签：shell

我想知道如何在 shell 脚本中为命令添加答案。我知道这不是很清楚，因为我不知道如何描述它。例如：

```
$> su
$> Password: <automatically_fill_in_the_password_here> 
```

如何自动填写密码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T04:40:10.220

`expect`就是你要找的。

请允许我引用[此页面](http://bash.cyberciti.biz/security/expect-ssh-login-script/)，因为它在解释方面做得很好`expect`：

> **Expect**是一个 Unix 和 Linux 自动化和测试工具。它适用于交互式应用程序，例如`telnet`, `ftp`, `passwd`, `fsck`, `rlogin`, `tip`, `ssh`, 和许多其他应用程序。它使用 Unix 伪终端透明地包装子进程，允许通过终端访问的任意应用程序的自动化。

下面是一个简单的期望脚本，用于为远程 ssh 服务器提供 OpenSSH 根/管理员密码并执行 Unix / Linux / BSD 命令。（首先，您需要[按照这些说明安装 expect 工具](http://www.cyberciti.biz/tips/execute-commands-on-multiple-hosts-using-expect-tool-part-iii.html)。）

```
#!/usr/bin/expect -f
# Expect script to supply root/admin password for remote ssh server 
# and execute command.
# This script needs three argument to(s) connect to remote server:
# password = Password of remote UNIX server, for root user.
# ipaddr = IP Addreess of remote UNIX server, no hostname
# scriptname = Path to remote script which will execute on remote server
# For example:
#  ./sshlogin.exp password 192.168.1.11 who 
# ------------------------------------------------------------------------
# Copyright (c) 2004 nixCraft project <http://cyberciti.biz/fb/>
# This script is licensed under GNU GPL version 2.0 or above
# -------------------------------------------------------------------------
# This script is part of nixCraft shell script collection (NSSC)
# Visit http://bash.cyberciti.biz/ for more information.
# ----------------------------------------------------------------------
# set Variables
set password [lrange $argv 0 0] 
set ipaddr [lrange $argv 1 1]   
set scriptname [lrange $argv 2 2] 
set arg1 [lrange $argv 3 3] 
set timeout -1   
# now connect to remote UNIX box (ipaddr) with given script to execute
spawn ssh root@$ipaddr $scriptname $arg1
match_max 100000
# Look for passwod prompt
expect "*?assword:*"
# Send password aka $password 
send -- "$password\r"
# send blank line (\r) to make sure we get back to gui
send -- "\r"
expect eof 
```

如果一个人没有阅读脚本的评论（你真的应该），这里是如何使用它：

```
./sshlogin.exp password 192.168.1.11 who 
```

# ruby-on-rails - 具有良好曝光的嵌套属性上的重复条目

> ID：16006945
> 
> 赞同：2
> 
> 时间：2013-04-15T02:48:11.840
> 
> 标签：ruby-on-rails, simple-form, cocoon-gem

**这是对上一篇文章的重新编辑**

我以前认为这个问题与茧有关，但现在我不这么认为，因为下面的代码甚至没有调用茧

每次我更新包含嵌套属性的表单时，嵌套记录的数量都会翻倍。据我所知，在调用表单时会发生这种情况，因为在我做任何事情之前我会立即看到更新，并且表单显示有重复的条目

我在下面的 HAML 中有我的视图的相关代码 -

```
 %h3 Household Members
    = f.simple_fields_for :neighbors   do  |neighbor|
    = render 'neighbor_fields', :f => neighbor 
```

我在控制器上使用了像样的曝光，所以控制器看起来像这样：

```
class HouseholdsController < ApplicationController

  expose(:households)
  expose(:household, strategy: StrongParametersStrategy)

  def create
    if household.save
      redirect_to households_path, notice: 'Household was successfully created.'
   else
     render 'new'
   end
 end

def update
  if household.save
    redirect_to households_path, notice: 'Household was successfully updated.'
  else
    render 'edit'
  end
end

def destroy
  household.destroy

redirect_to households_path, notice: 'Household deleted.'
end 
```

如何防止嵌套属性加倍？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-11-17T03:14:45.863

我以前从未使用过像样的曝光，但是我在使用嵌套形式时遇到了同样的问题，无论有无茧，两种情况下的原因都是相同的。它与强参数有关，而不是`:id`嵌套属性的白名单。

我不确定我是否完全明白你想要做什么，所以我会给出一个经典的帖子/评论示例。如果您有一个帖子表单，并且想要动态添加评论字段，那么控制器中的强参数将如下所示。

```
params.require(:post).permit(:content, comments_attributes: [:id, :content, :_destroy]) 
```

您需要将 , 和嵌套字段具有的任何其他属性列入白`:id`名单`:_destroy`。如果评论没有`:id`关联，则 rails 认为这是一条新评论并为其创建新记录。当您将 列入白名单时`:id`，rails 知道它是现有对象，然后更新它。

# c# - ListView 虚拟化需要 RetrieveVirtualItem 事件或 OnRetrieveVirtualItem 方法提供有效的 ListViewItem

> ID：16006952
> 
> 赞同：0
> 
> 时间：2013-04-15T02:48:52.547
> 
> 标签：c#

有人可以清除我在此代码中的错误...我知道`listView1_RetrieveVirtualItem`方法存在问题，但我无法纠正。我收到此错误：

> ListView 虚拟化需要 RetrieveVirtualItem 事件或 OnRetrieveVirtualItem 方法提供有效的 ListViewItem。

这是我的代码：

```
 public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();
        _fileInfoCollection = new Queue<ListViewFileInfo>();
    }

    private void GetFileInformation(string drive)
    {
        _fileInfoCollection.Clear();
        var directory = new DirectoryInfo(drive);
        var files = directory.GetFiles("*.*", SearchOption.TopDirectoryOnly);

        foreach (var file in files)
        {
            _fileInfoCollection.Enqueue(new ListViewFileInfo() { FileName = file.Name, FilePath = file.FullName });
        }
    }

    private void listView1_RetrieveVirtualItem(object sender, RetrieveVirtualItemEventArgs e)
    {
        if (_fileInfoCollection.Count > 0)
        {
            ListViewFileInfo fileInfo = _fileInfoCollection.Dequeue();
            var listViewItem = new ListViewItem();
            listViewItem.Text = fileInfo.FileName;

            var listViewSubItem = new ListViewItem.ListViewSubItem();
            listViewSubItem.Text = fileInfo.FilePath;
            listViewItem.SubItems.Add(listViewSubItem);
            e.Item = listViewItem;
        }
    }

    private void comboBoxDrive_SelectedIndexChanged(object sender, EventArgs e)
    {
        GetFileInformation(comboBoxDrive.Text);
    }

    private Queue<ListViewFileInfo> _fileInfoCollection;

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T03:54:15.617

您使用 ListView 虚拟模式的代码仍然缺少一些重要信息。首先，我们需要为 ListView的**VirtualListSize属性设置值。**其次，我们需要设置一个缓存值来正确检索 ListItem。

我们应该记住 RetrieveVirtualItem 事件**总是需要返回一个 ListViewItem**。

您可以在这里参考：http: [//msdn.microsoft.com/en-us/library/system.windows.forms.listview.virtualmode%28v=vs.90%29.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.listview.virtualmode%28v=vs.90%29.aspx)

我已经根据我的假设修改了你的代码，你可以按照你的想法修改它。希望这有帮助。

```
public partial class Form1 : Form
{
    private ListViewItem[] myCache; //array to cache items for the virtual list 
    private int firstItem; //stores the index of the first item in the cache

    public Form1()
    {
        InitializeComponent();
        _fileInfoCollection = new Queue<ListViewFileInfo>();
    }

    private void GetFileInformation(string drive)
    {
        _fileInfoCollection.Clear();
        var directory = new DirectoryInfo(drive);
        var files = directory.GetFiles("*.*", SearchOption.TopDirectoryOnly);
        myCache = new ListViewItem[files.Length];
        int temp = 0;
        foreach (var file in files)
        {

            _fileInfoCollection.Enqueue(new ListViewFileInfo() { FileName = file.Name, FilePath = file.FullName });

            ListViewFileInfo fileInfo = _fileInfoCollection.Dequeue();
            var listViewItem = new ListViewItem();
            listViewItem.Text = fileInfo.FileName;

            var listViewSubItem = new ListViewItem.ListViewSubItem();
            listViewSubItem.Text = fileInfo.FilePath;
            listViewItem.SubItems.Add(listViewSubItem);
            myCache[temp] = listViewItem;
            temp++;
        }

        listView1.VirtualListSize = myCache.Length;
    }

    private void listView1_RetrieveVirtualItem(object sender, RetrieveVirtualItemEventArgs e)
    {
        if (myCache != null && e.ItemIndex >= firstItem && e.ItemIndex < firstItem + myCache.Length)
        {
            //A cache hit, so get the ListViewItem from the cache instead of making a new one.
            e.Item = myCache[e.ItemIndex - firstItem];
        }
        else
        {
            //A cache miss, so create a new ListViewItem and pass it back. 
            e.Item = new ListViewItem();
        }
    }

    private void comboBoxDrive_SelectedIndexChanged(object sender, EventArgs e)
    {
        GetFileInformation(comboBoxDrive.Text);
    }

    private Queue<ListViewFileInfo> _fileInfoCollection;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-03-29T12:04:06.540

我遇到过几次这个问题，对于像我一样使用 ObjectListView (FastObjectListView) 开源库的任何人，或者只是使用带有数据源的 Virtual ListView，我发现问题不在于列表或数据本身，它与数据的来源有关。

很难从使用虚拟列表时给出的错误中诊断出来，但是当我将 FastObjectListView 更改为 ObjectListView （基本上删除了虚拟功能）时，我能够看到导致异常的实际错误，并且它是一个视图我的实体框架模型上不再存在曾经存在的东西。

希望这对某人有所帮助，因为它让我挠头并从谷歌上搜索出那个无用的错误消息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T14:40:25.367

这是完整的代码..

```
 /// <summary>
    /// Required method for Designer support - do not modify
    /// the contents of this method with the code editor.
    /// </summary>
    private void InitializeComponent()
    {
        this.listView1 = new System.Windows.Forms.ListView();
        this.columnHeaderIndex = ((System.Windows.Forms.ColumnHeader)(new System.Windows.Forms.ColumnHeader()));
        this.columnHeaderInformation = ((System.Windows.Forms.ColumnHeader)(new System.Windows.Forms.ColumnHeader()));
        this.comboBoxDrive = new System.Windows.Forms.ComboBox();
        this.SuspendLayout();
        // 
        // listView1
        // 
        this.listView1.Columns.AddRange(new System.Windows.Forms.ColumnHeader[] {
        this.columnHeaderIndex,
        this.columnHeaderInformation});
        this.listView1.Dock = System.Windows.Forms.DockStyle.Bottom;
        this.listView1.Location = new System.Drawing.Point(0, 24);
        this.listView1.Name = "listView1";
        this.listView1.Size = new System.Drawing.Size(551, 249);
        this.listView1.TabIndex = 0;
        this.listView1.UseCompatibleStateImageBehavior = false;
        this.listView1.View = System.Windows.Forms.View.Details;
        this.listView1.VirtualListSize = 500;
        this.listView1.VirtualMode = true;
        this.listView1.RetrieveVirtualItem += new System.Windows.Forms.RetrieveVirtualItemEventHandler(this.listView1_RetrieveVirtualItem);
        // 
        // columnHeaderIndex
        // 
        this.columnHeaderIndex.Text = "Index";
        // 
        // columnHeaderInformation
        // 
        this.columnHeaderInformation.Text = "Information";
        this.columnHeaderInformation.Width = 400;
        // 
        // comboBoxDrive
        // 
        this.comboBoxDrive.FormattingEnabled = true;
        this.comboBoxDrive.Items.AddRange(new object[] {
        "C:",
        "D:"});
        this.comboBoxDrive.Location = new System.Drawing.Point(-4, 0);
        this.comboBoxDrive.Name = "comboBoxDrive";
        this.comboBoxDrive.Size = new System.Drawing.Size(121, 21);
        this.comboBoxDrive.TabIndex = 2;
        this.comboBoxDrive.SelectedIndexChanged += new System.EventHandler(this.comboBoxDrive_SelectedIndexChanged);
        // 
        // Form1
        // 
        this.AutoScaleDimensions = new System.Drawing.SizeF(6F, 13F);
        this.AutoScaleMode = System.Windows.Forms.AutoScaleMode.Font;
        this.ClientSize = new System.Drawing.Size(551, 273);
        this.Controls.Add(this.comboBoxDrive);
        this.Controls.Add(this.listView1);
        this.Name = "Form1";
        this.Text = "Form1";
        this.ResumeLayout(false);

    }

    #endregion

    private System.Windows.Forms.ListView listView1;
    private System.Windows.Forms.ColumnHeader columnHeaderInformation;
    private System.Windows.Forms.ColumnHeader columnHeaderIndex;
    private ComboBox comboBoxDrive; 
```

我是否错过了代码中的其他内容。请 ！核实。我很好奇看到输出。

# binary - 了解二进制补码加法

> ID：16006954
> 
> 赞同：0
> 
> 时间：2013-04-15T02:49:05.533
> 
> 标签：binary, addition, twos-complement

我使用 4、1 位全加器构建了一个四位加法器/减法器，输入和输出是二进制补码。

如果`X=0111 and Y=1000`它们的总和显然是 1111。

在十进制中，这相当于 7 + 8 因此 15 这是总和的结果。

但是，我很困惑，如果这个结果需要通过翻转位并加一个来转换回“常规”二进制文件？所以答案将是 0001 代表十进制的 1。翻译前的十进制 Y 实际上是 0110 代表 6 从而产生以下二进制`7-6 = 1`。如果有人能指出我正确的方向，我将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T03:20:40.583

看来您的 Y 转换错误。Y = 1000 [2] = -8 [10]。

为了表示 -6，你取 0110，翻转位得到 1001 并加一，所以 Y = 1010。（如你所料，0111 + 1010 = 0001。）

要返回，翻转 1010 = 0101 的位并加一，得到 0110 = 6。

编辑以回答您的后续问题：

让：

```
X = 0111
Y = 1100

X + Y = 0011 (ignoring overflow) 
```

所以无论我们添加什么，它都等于 3。我们知道 X = 7。

```
Y = 1100 => 0011 + 1 = (negative)0100 = -4 
```

7 + (-4) = 3

无需翻译，只需正确表示正数和负数即可。我认为您的困惑来自这样一个事实，即我们正在“否定”负数以找到该数字的绝对值并在其前面加上一个负号，就像上面 Y 的转换一样。这是因为 2 的补码中的负数不像正数那样可读，但 0100 仍然是 +4 并且 1100 仍然是 -4。

# c++ - Masking floating point cv::Mat without looping

> ID：16006957
> 
> 赞同：0
> 
> 时间：2013-04-15T02:49:12.150
> 
> 标签：c++, opencv

At a point in my code I have a `cv::Mat` with the type `CV_8U` and a `cv::Mat` with the type `CV_64f`. I want to know if there is a clever way to masking the floating point image with the char image without having to loop through the images and do it explicitly.

I realize this isn't a terribly pressing issue to just write, I'm just curious if it is possible to help with readability succinctness in my code.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T02:57:15.203

I realized I was thinking about the operation the wrong way. Masking the floating point image is the same as an element-wise matrix multiplication of a binary image. An easy way to do this operation is

```
cv::Mat result = floatImg.mul(mask); 
```

`cv::Mat.mul()` can be found in the documentation [here](http://docs.opencv.org/modules/core/doc/basic_structures.html#matrix-expressions).

# mysql - SQL Server 上的函数 TO_DAYS mysql

> ID：16006959
> 
> 赞同：0
> 
> 时间：2013-04-15T02:49:17.537
> 
> 标签：mysql, sql, sql-server

这个 mysql 语法如何在 SQL 服务器上运行：

```
SELECT TO_DAYS('2013-04-14') 
```

`TO_DAYS`函数如何在 SQL Server 上运行？

谢谢..

最后，我使用

```
SELECT CAST(CAST('2013-04-14' as datetime) as integer)
```

感谢您之前的回答

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T07:27:48.427

鉴于我们的日历中没有第 0 年，我认为该`TO_DAYS`功能定义不明确。

但假设您使用的是 SQL Server 2008 或更高版本，以下应该可以工作：

```
select 366+DATEDIFF(day,'00010101','20130414') 
```

无法避免“软糖”因素，因为 SQL Server 不接受从 0 年开始的有效日期。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T02:58:53.413

编辑：我将原始问题阅读为 TO_DATE，修改为 TO_DAYS

我看到 MySQL 中的 TO_DAYS 函数给出了第 0 年和日期参数之间的天数。

SQL Server 中的一个基本等价物是使用 DateDiff 例如

```
select Datediff(d,'1900-01-01', '2013-04-14') 
```

# html - wordpress 容器不在 IE 中居中

> ID：16006964
> 
> 赞同：0
> 
> 时间：2013-04-15T02:49:42.707
> 
> 标签：html, css, wordpress, internet-explorer

我在我网站的一页上使用 WP，由于某种原因，内容没有居中；在 IE 以外的所有浏览器中它都可以工作，但由于某种原因在 IE 中它不能。我一直在看代码很长时间，我知道它很简单，但无法弄清楚它是什么。[这是有问题的网站](http://clairekhoury.com/selection/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T02:58:32.580

正如**@j08691**指出[的那样，问题在于](http://validator.w3.org/check?uri=http%3A%2F%2Fclairekhoury.com%2Fselection%2F&charset=%28detect+automatically%29&doctype=Inline&group=0)您的文档类型之前有一个`<div>`元素，这导致 IE 以[Quirks Mode](http://msdn.microsoft.com/en-us/library/ie/hh869300%28v=vs.85%29.aspx)显示。除了在正文中，您不能将 div 放置在任何地方。

只是改变：

```
<div id="container">
<!DOCTYPE HTML> 
```

至：

```
<!DOCTYPE html> 
```

*任何东西都不*应该在你的文档类型之前，甚至是空白

# spring-mvc - Spring handlerMapping vs struts ActionMapping

> ID：16006971
> 
> 赞同：0
> 
> 时间：2013-04-15T02:50:49.320
> 
> 标签：spring-mvc, struts, spring-portlet-mvc

我来自 struts 背景，正在尝试使用我的 struts 知识作为基础来学习 Spring MVC。他们在这里解释处理程序映射： [http](http://static.springsource.org/spring/docs/3.2.x/spring-framework-reference/html/portlet.html#portlet-handlermapping) ://static.springsource.org/spring/docs/3.2.x/spring-framework-reference/html/portlet.html#portlet-handlermapping 现在在struts中，我们有一个定义的xml动作映射，它基本上说明了哪个动作 url 映射到哪个控制器。说 Spring 中的 Handler Mapping 和 struts 中的 Action 映射是一样的公平吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T05:17:02.680

**`Hanler Mapping and ActionMapping take the same role in 2 MVC framworks`**. 他们将不同的 URL 导航到控制器甚至方法。作为 Spring MVC 的爱好者，在你的项目中它比 Struts 更容易使用。Spring Fellow“ `convention over configuration`”给了你一个默认的Handler Mapping，所以你不需要在配置中指定它，它也提供`@HandlerMapping and Handler Adapter`了帮助你做导航。

# java - 无法解决 R 无法解决变量问题

> ID：16006972
> 
> 赞同：0
> 
> 时间：2013-04-15T02:50:52.820
> 
> 标签：java, android, google-cloud-messaging

我将 Android GCM 服务的代码添加到现有代码中，该代码在此之前运行良好。然后我发现错误“R无法解析为变量”。我清理后构建项目。但它仍然无法正常工作。布局文件或其他 xml 文件中没有显示错误。

你能给我一些解决这个问题的想法吗？

太感谢了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T04:45:06.413

从源文件夹中删除 R.java 文件。现在清理你的项目

也试试这个。

右键单击您的**项目名称**>> **Android 工具**>>**修复项目属性**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T03:46:31.247

您支持的 api 级别是多少？如果它低于 8 则尝试查看菜单 xml 并删除`android:showasAction`字段。当没有创建 R.java 时，它总是在 xml 文件中出现一些错误。所以还要查看`androidmanifest`文件和样式 xml。基本上根据您的最小 api 搜索每个 xml 的错误。

编辑：确保您没有导入 android.R。如果它在那里删除它，然后尝试所有答案直到现在。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-15T03:50:45.720

试试这些

1.  关闭项目，退出 Eclipse，重新打开 Eclipse 并清理项目
2.  在“问题”选项卡中，选择所有错误并将其删除。再次清理项目。
3.  如果您使用的是 ubuntu，请运行`chmod 777 <project folder>`
4.  从文件资源管理器中删除 bin 文件夹

让我知道哪个有效。

# ios - 保存前在 iOS 中预览 PDF 文档

> ID：16006973
> 
> 赞同：0
> 
> 时间：2013-04-15T02:50:56.310
> 
> 标签：ios, pdf, nsdocumentcontroller

我正在构建一个将生成 PDF 的应用程序。我可以很好地生成 PDF，但它是构建和保存 PDF 的一键式操作。我想做的是将其更改为显示 PDF 的预览，然后提供编辑内容或将其保存到 Documents 文件夹的选项。我该怎么做呢？这是我所拥有的保存它的东西。

```
- (IBAction)generatePdfButtonPressed:(id)sender
{
    pageSize = CGSizeMake(792, 612);
    NSString *fileName = @"Demo.pdf";
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDirectory = [paths objectAtIndex:0];
    NSString *pdfFileName = [documentsDirectory stringByAppendingPathComponent:fileName];

    [self generatePdfWithFilePath:pdfFileName];
}
- (void) generatePdfWithFilePath: (NSString *)thefilePath
{
    UIGraphicsBeginPDFContextToFile(thefilePath, CGRectZero, nil);

    BOOL done = NO;
    do
    {

        UIGraphicsBeginPDFPageWithInfo(CGRectMake(0, 0, pageSize.width, pageSize.height), nil);

         [self drawImage];

        [self drawText];
        [self drawText2];
        [self drawText3];
        [self drawText4];

        done = YES;
    }
    while (!done);

    // Close the PDF context and write the contents out.
    UIGraphicsEndPDFContext();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T02:54:15.467

创建一个带有 UIWebview 的视图。然后您可以简单地将您保存的 PDF 文档加载到 webview 中

# python - 如何在 Python 中读取输入文件？

> ID：16006974
> 
> 赞同：8
> 
> 时间：2013-04-15T02:51:11.510
> 
> 标签：python, list

如果我问的是一个愚蠢的问题，请原谅我，但我相信我有问题。

我最近开始学习 Python，并尝试解决一些基于算法的问题。但是一个问题是每个算法挑战都带有一些输入文件。它通常由一些测试用例计数、测试用例等组成，例如

```
4 #cases

1 2 5 8 4 #case 1
sadjkljk kjsd #case 2
5845 45 55 4 # case 3
sad sdkje dsk # case 4 
```

现在开始解决您需要控制输入数据的问题。我已经看到，在 python 中，开发人员大多使用`Lists`来保存他们的输入数据。

我试过了：

```
fp = open('input.txt')
    for i, line in enumerate(fp.readlines()):
        if i == 0:
            countcase = int(i)
            board.append([])
        else:
            if len(line[:-1]) == 0:
                currentBoard += 1
                board.append([])
            else:
                board[currentBoard].append(line[:-1])
    fp.close() 
```

但我不认为这是解析任何给定输入文件的最佳方式。

解析输入文件的最佳实践是什么？我可以遵循任何具体的教程或指导吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-15T03:03:14.670

不知道您的案例是整数还是字符串，所以我将它们解析为字符串：

```
In [1]: f = open('test.txt')

In [2]: T = int(f.readline().strip())

In [3]: f.readline()
Out[3]: '\n'

In [4]: boards = []

In [5]: for i in range(T):
   ...:     boards.append(f.readline().strip().split(' ')) 
   ...:     

In [7]: for board in boards: print board
['1', '2', '5', '8', '4']
['sadjkljk', 'kjsd']
['5845', '45', '55', '4']
['sad', 'sdkje', 'dsk'] 
```

## 编辑

如果[列表](http://docs.python.org/2/tutorial/datastructures.html#list-comprehensions)推导对您来说很舒服，请尝试：

```
boards = [f.readline().strip().split(' ') for i in range(T)] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-15T04:01:05.367

使用固定分隔符（如空格），您还可以使用：

```
#!/usr/bin/python
# -*- coding: utf-8 -*-

import csv

with open("input.txt") as file: 
    reader = csv.reader(file, delimiter=' ')
    for row in reader:
        print row 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-15T03:14:49.337

尽管在 Python 中你总是会发现各种巧妙的技巧和节省时间的方法（事实上，真正推荐用于实际项目的一种节省时间的方法是`with`语句），但我建议在你真正熟悉文件 I/O 之前，您应该坚持以下内容：

```
infile = open("input.txt", "r") # the "r" is not mandatory, but it tells Python you're going to be reading from the file and not writing

numCases = int(infile.readline())
infile.readline() #you had that blank line that doesn't seem to do anything
for caseNum in range(numCases):
    # I'm not sure what the lines in the file mean, but assuming each line is a separate case and is a bunch of space-separated strings:
    data = infile.readline().split(" ")
    # You can also use data = list(map(int, infile.readline.split(" "))) if you're reading a bunch of ints, or replace int with float for a sequence of floats, etc.
    # do your fancy algorithm or calculations on this line in the rest of this for loop's body

infile.close() # in the case of just reading a file, not mandatory but frees memory and is good practice 
```

也可以选择这样做（如果您不阅读大量数据，则完全取决于您自己的喜好）：

```
infile = open("input.txt", "r")
lines = infile.read().strip().split("\n") # the .strip() eliminates blank lines at beginning or end of file, but watch out if a line is supposed to begin or end with whitespace like a tab or space
# There was the (now-redundant) line telling you how many cases there were, and the blank following it
lines = lines[2:]
for line in lines:
    # do your stuff here
infile.close() 
```

# ios - tcp_connection_destination_fail net_helper_connect_fail 失败（iOS 模拟器中的 meteorjs 和 phonegap）

> ID：16006978
> 
> 赞同：1
> 
> 时间：2013-04-15T02:51:26.743
> 
> 标签：ios, cordova, ios6, meteor

我在 iOS 模拟器中（所有软件的当前最新版本，iphone 6.0 模拟器），我正在监视我的应用程序的系统日志。

我遇到了一些非常奇怪的错误，我在基本搜索中找不到任何关于...

```
Apr 14 22:42:31 AlanMacBook MyApp[12051]: Finished load of: http://localhost:3000/
Apr 14 22:42:31 AlanMacBook MyApp[12051]: tcp_connection_destination_fail net_helper_connect_fail failed 
```

我想知道这是否与流星的长轮询 sockjs 连接有关？

我在加载资产等时出现断断续续的问题。

知道是什么导致了错误，我是否应该担心？

# php - 在 wordpress 中创建可编辑的自定义字段表

> ID：16006982
> 
> 赞同：0
> 
> 时间：2013-04-15T02:52:07.253
> 
> 标签：php, mysql, wordpress

我想为房地产网站创建一个表格，该表格将在 wordpress 中显示用户的属性。它们可以有零到多个属性，每个属性都有特定的字段，其中一些不需要输入（“网站字段”）。

我一直在搞乱自定义字段和自定义帖子类型，但我正在寻找用户可以轻松管理/编辑/删除/添加等的东西。这是我正在寻找的基本功能的示例。

[http://d7j863fr5jhrr.cloudfront.net/wp-content/uploads/2012/12/child-form.png](http://d7j863fr5jhrr.cloudfront.net/wp-content/uploads/2012/12/child-form.png)

[http://wp-types.com/documentation/user-guides/creating-groups-of-repeating-fields-using-fields-tables/](http://wp-types.com/documentation/user-guides/creating-groups-of-repeating-fields-using-fields-tables/)

理想情况下，可以做到这一点的插件会很棒。每个用户也会有他们“自己的”属性列表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-04T12:52:36.277

尝试高级自定义字段插件。它允许用户/管理员输入详细信息。他们将能够轻松地编辑、删除、修改自定义帖子类型的内容和自定义字段。

管理自定义字段 -**高级自定义字段 (ACF)** 创建自定义帖子类型 -**自定义 ost 类型生成器**

# arrays - 影片剪辑在添加到 DisplayList 之前是否正常工作？

> ID：16006986
> 
> 赞同：0
> 
> 时间：2013-04-15T02:52:31.790
> 
> 标签：arrays, actionscript-3

我必须将对象列表添加到数组中，以便稍后访问它们，但由于某种原因，我之前添加的对象播放，我将它们添加到显示列表中。这是代码：

添加列表的框架：

```
sunny.addEventListener(MouseEvent.CLICK, sunny_choice);

function sunny_choice(E:MouseEvent)
{
    var sunny_walkcycle: Sunny_Walkcycle = new Sunny_Walkcycle ();
    var sunny_busstop : Sunny_BusStop = new Sunny_BusStop ();
    var sunny_opening: Teacher_Opening_Sunny = new Teacher_Opening_Sunny ();

    clothingArray.push( sunny_walkcycle);
    clothingArray.push( sunny_busstop);
    clothingArray.push( sunny_opening);

    trace("Sunny");
    cleaner();
//cleaner just removes the event listener and asks it to go to the next frame
} 
```

下一帧：

```
clothingArray [0].scaleX = -1;

addChild (clothingArray [0]);
clothingArray[0].x = 633;
clothingArray[0].y = 174;
clothingArray [0].stop ();
clothingArray [0].addEventListener (MouseEvent.CLICK, transforming);

function transforming (e:MouseEvent) {
    if (clothingArray [0].currentFrame == clothingArray [0].totalFrames) {
        clearall2 ();

    }
    else{
    clothingArray  [0].nextFrame();
    moving_background.nextFrame ();
    }

}
function clearall2 () {
    clothingArray [0].removeEventListener (MouseEvent.CLICK, transforming);
    removeChild (clothingArray [0]);

    gotoAndStop (3);
} 
```

有问题的一：

```
addChild (clothingArray [1]);
clothingArray[1].addEventListener (Event.ENTER_FRAME , busstop);
trace ("The Current Frame is " + clothingArray [1].currentFrame);
function busstop (d:Event) {
        if (clothingArray [1].currentFrame == clothingArray  [1].totalFrames) {
        clearall3 ();

    }
}

function clearall3 () {
    removeChild (clothingArray [1]);
    clothingArray[1].removeEventListener (Event.ENTER_FRAME , busstop);

    } 
```

所以它的确切作用是第 3 帧中的电影剪辑在它添加到显示列表之前开始播放，我不确定是什么原因造成的......我不能在这一帧单独添加变量，因为第 1 帧中有其他选项这导致我制作一个数组。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T03:35:17.557

假设 Sunny_Walkcycle、Sunny_BusStop、Teacher_Opening_Sunny 是 MovieClip，为什么不在内存分配后直接使用 stop() 呢？

```
 var sunny_walkcycle:Sunny_Walkcycle = new Sunny_Walkcycle ();
  var sunny_busstop:Sunny_BusStop = new Sunny_BusStop ();
  var sunny_opening:Teacher_Opening_Sunny = new Teacher_Opening_Sunny ();

  sunny_walkcycle.stop();
  sunny_busstop.stop();
  sunny_opening.stop(); 
```

确保您的 MovieClip 内帧中没有代码会与您的控制代码混淆。就像一个 play()... 隐藏在某个地方。

您也可以在推入数组后尝试（对于 Sunny_busstop）：

```
clothingArray[1].stop(); 
```

或者

```
clothingArray[1].gotoAndStop(1); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T03:35:33.413

是的，MovieClip 将在创建后开始播放。无需添加到显示列表即可激活。这是非常重要的细节，需要理解。

显示列表仅确定显示对象是否连接到阶段层次结构。

解决方案... 创建后调用该`stop()`方法，然后在`play()`将它们添加到显示列表时调用该方法。

如果您在从显示列表中删除时不调用该`stop()`方法，它将继续消耗 cpu 周期。如果您有许多带有补间等的 MovieClip，这可能非常重要。

# javascript - 使用 node-soap 在 Node.js 中通过 Soap 发送参数

> ID：16006988
> 
> 赞同：6
> 
> 时间：2013-04-15T02:52:42.447
> 
> 标签：javascript, node.js, object, soap

我刚刚开始使用 NodeJS，并且正在深入研究使用[milewise 的 node-soap](https://github.com/milewise/node-soap#readme)与 SOAP 服务进行通信。我使用一个基本的电子邮件地址验证 SOAP API 作为我的测试用例。

我似乎不明白格式化参数列表的正确方法。

我的 SOAP 客户端代码：

```
 var url = "http://www.restfulwebservices.net/wcf/EmailValidationService.svc?wsdl";
soap.createClient(url, function(err, client){
    console.log(client.describe().EmailValidationService.BasicHttpBinding_IEmailValidationService.Validate);
    client.Validate({result:"my@emailaddress.com"}, function(err, result){
            console.log(result);
    });
}); 
```

client.describe() 命令告诉我 API 如何对其输入进行格式化，以及它将如何返回其输出。这就是说：

`{ input: { 'request[]': 'xs:string' }, output: { 'ValidateResult[]': 'xs:boolean' } }`

但是，当我将参数作为对象发送时：`{request:"my@emailaddress.com"}`

我觉得我的问题在于我如何定义参数对象......括号中的`request[]`意思是什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-05-04T08:23:08.887

如果您在请求参数上添加命名空间，它应该可以工作。这是一个示例代码。

```
var soap = require('soap');

var url = "http://www.restfulwebservices.net/wcf/EmailValidationService.svc?wsdl";

var args = {"tns:request":"my@emailaddress.com"};

soap.createClient(url, function(err, client){
    client.EmailValidationService.BasicHttpBinding_IEmailValidationService.Validate(args, function(err, result){
            if (err) throw err;
            console.log(result);
    });
}); 
```

但是，它返回“访问被拒绝”。

我使用soapUI 来测试这个Web 服务，它返回相同的结果。

我尝试了另一个网络服务，它可以工作。

```
var soap = require('soap');

var url = "http://www.restfulwebservices.net/wcf/StockQuoteService.svc?wsdl";

var args = {"tns:request":"GOOG"};

soap.createClient(url, function(err, client){

    client.StockQuoteService.BasicHttpBinding_IStockQuoteService.GetStockQuote(args, function(err, result){
            if (err) throw err;
            console.log(result);
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-29T20:34:33.547

`ValidateResult`接受一个数组请求。这就是什么`request[]`意思。如果它是一个对象，它应该只是请求。因此，如果您尝试 args 如下，它可能会起作用：

```
var args = {request[]: ["my@emailadress.com", "another email adress if you
want"]}; 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2017-10-31T13:26:27.877

```
I have similar situation where i have accountId[] , i need to pass multiple accountID, when i pass like "tns:accountId[]": [2321,2345325], it failing saying incorrect request parameter, it comes as <tns:accountId[]>2321</tns:accountId[]>
<tns:accountId[]>2345325</tns:accountId[]>.

I need to get <tns:accountId>2321</tns:accountId>
<tns:accountId>2345325</tns:accountId>. When i tried removing "[]", it comes as <accountId> only and  it is failing. Can someone please help me? 
```

# c++ - 像这样使用 delete[] 会导致内存泄漏吗？

> ID：16006989
> 
> 赞同：1
> 
> 时间：2013-04-15T02:52:43.747
> 
> 标签：c++, memory-management, dynamic-memory-allocation

我确定以前有人问过这个问题，但是对于我的具体情况，搜索词让我失望了。
本质上，我正在创建一个 2D 平铺引擎。为了整体效率并减少一些开销，我决定实现自己的简单内存管理容器......

以下代码是我用来这样做的：

**`Tile.h`：**

```
//Tile class
class CTile
{
public:
    CTile();
    ~CTile();
    unsigned int row;
    unsigned int column;
};

//Container class
class CTileLayer
{
public:
    CTileLayer(unsigned int nRows, unsigned int nCols, float w, float h);
    ~CTileLayer();

protected:
    CTile** m_tiles;
    unsigned long count;

    void Allocate(unsigned int nRows, unsigned int nCols, float w, float h);
    void Free();
}; 
```

**`Tile.cpp`：**

```
#include "Tile.h"

CTile::CTile() : row(0), column(0)
{
}

CTile::~CTile()
{
}

CTileLayer::CTileLayer(unsigned int nRows, unsigned int nCols, float w, float h) : m_tiles(NULL)
{
    Allocate(nRows, nCols, w, h);
}

CTileLayer::~CTileLayer()
{
    if(m_tiles != NULL) Free();
}

void CTileLayer::Allocate(unsigned int nRows, unsigned int nCols, float w, float h)
{
    unsigned int column = 0, row = 0;

    if(m_tiles != NULL) Free();
    m_tiles = new CTile*[count = (nRows * nCols)];

    for( unsigned long l = 0; l < count; l++ ) {
        m_tiles[l] = new CTile[count];
        m_tiles[l]->column = column + 1;
        m_tiles[l]->row = row + 1;
        //
        //...
        //
        if(++column > nCols) {
            column = 0;
            row++;
        }
    }
}

void CTileLayer::Free()
{
    delete [] *m_tiles;
    delete [] m_tiles;
    m_tiles = NULL;
    count = 0;
} 
```

因此，通过查看每个图块是如何分配/释放的，是否可以肯定地说这不会产生任何内存泄漏？

如果可以，在确保调用每个对象的析构函数的同时释放这个数组的最合适方法是什么？我应该遍历数组，手动删除每个对象吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T03:01:10.620

为什么不这样做：

```
CTile* m_tiles;

m_tiles = new CTile[nRows*nColumns];

delete[] m_tiles; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-15T02:55:01.380

您调用`new CTile[count]`了 count 次，每次调用一次`m_tiles[l]`。

因此，您需要`delete[]`为每个`m_tiles[l]`.

* * *

然而，目前尚不清楚有什么`count`好处。您应该对数组的两层使用`nRows`and 。`nColumns`现在你有分配的`nRows * nRows * nColumns * nColumns`实例`CTile`，这可能太多了。

而是尝试

```
m_tiles = new CTile*[nRows]; 
```

```
m_tiles[l] = new CTile[nColumns]; 
```

# android - 在 WebView 中保持滚动位置

> ID：16006991
> 
> 赞同：2
> 
> 时间：2013-04-15T02:53:08.277
> 
> 标签：android, webview, scroll

在我的应用程序中，我在 WebView 中加载了一个 HTML 页面。我正在实现一个 switchView 按钮，它加载相同的页面但使用不同的语言。我想在切换语言时保持 WebView 的滚动位置。在对 SO 进行了一些研究之后，我实现了以下内容。

这是第一个 WebView

```
 switchB = (Button)findViewById(R.id.button1);
        webView = (WebView) findViewById(R.id.page1);
        webView.loadUrl("file:///android_asset/try.html");

        switchB.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {
                Intent mIntent = new Intent (MainActivity.this, SwitchedView.class);
                mIntent.putExtra("scroll", calculateProgression(webView));
                startActivity(mIntent);             
            }
        });
    }

private float calculateProgression(WebView content) {
        float positionTopView = content.getTop();
        float contentHeight = content.getContentHeight();
        float currentScrollPosition = content.getScrollY();
        float percentWebview = (currentScrollPosition - positionTopView) / contentHeight;
        return percentWebview;
    } 
```

有了这个，我将 Scroll 传递给下一个 Activity，这是一个加载同一页面的 WebView。

```
 Intent i = getIntent();
        Bundle extras = i.getExtras();
        float scrollp = extras.getFloat("scroll");

        WebView webView = (WebView) findViewById(R.id.page2);
        webView.loadUrl("file:///android_asset/try2.html");

        float webviewsize = webView.getContentHeight() - webView.getTop();
        float positionInWV = webviewsize * scrollp;
        int positionY = Math.round(webView.getTop() + positionInWV);
        webView.scrollTo(0, positionY); 
```

这不是将滚动位置设置为传递的滚动位置。难道我做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T03:01:59.127

webView.loadUrl("file:///android_asset/try2.html"); 是异步的，所以 scrollTo 将在页面加载之前执行。所以你必须在页面加载成功后才调用 scrollTo。您可以通过以下代码段实现此目的。

```
webView.setWebViewClient(new WebViewClient() {
    @Override  
    public void onPageFinished(WebView view, String url) {
        super.onPageFinished(view, url);
         webView.scrollTo(0, positionY);
    }  

    @Override
    public void onReceivedError(WebView view, int errorCode, String description, String failingUrl) {
       //error
    }
}); 
```

# java - 关闭各种 JDBC 对象的正确顺序

> ID：16006997
> 
> 赞同：0
> 
> 时间：2013-04-15T02:54:03.143
> 
> 标签：java, oracle, jdbc, cursor

我有以下代码示例：

```
try {
    conn = this.jdbcTemplate.getDataSource().getConnection();
    stm = conn.prepareCall("{? =" + query + "}");
    stm.registerOutParameter(1, OracleTypes.CURSOR);
    if (params != null) {
        for (int i = 0; i < params.length; i++)
            stm.setString(i + 2, params[i]);
    }
    //getting result set from cursor
    stm.execute();
    res = (ResultSet) stm.getObject(1);
    return DatabaseLayerUtils.getResultSetData(res);
} finally {
    //closing cursor
    if (res != null) res.close();
    if (stm != null) stm.close();
    if (conn != null) conn.close();
} 
```

部分中的元素顺序是否`finally`重要？

是以下代码：

```
 if (res != null) res.close();
 if (stm != null) stm.close(); 
```

等于：

```
 if (stm != null) stm.close();
 if (res != null) res.close(); 
```

或不？

在我的同事正在进行的一个项目中，有很多结构，例如：

```
 if (stm != null) stm.close();
 if (res != null) res.close(); 
```

我需要了解这是否是正确的语法，或者我是否需要如图所示进行修复：

```
 if (res != null) res.close();
 if (stm != null) stm.close(); 
```

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T03:10:17.417

如果关闭 Connection，则不需要显式关闭 ResultSet 和 Statement。据我所知，所有 JDBC 驱动程序现在都可以正确处理这个问题。

如果要连续显式关闭它们，则需要以与创建相反的顺序关闭它们：ResultSet、Statement、Connection。

此外，您需要将每个 close 包装到 try/catch 中，因为据我记得它们会引发异常。

更好的是，如果您有一些带有`close(ResultSet rs)`,`close(Statement stmnt)`和`close(Connection cnn)`方法的实用程序类。

**UPD**

现在还有一种新的（已经有两年历史了，呵呵）方法来关闭 JDBC（不限于 JDBC）的东西。

Java7 引入了名为“try-with-resources”的新功能[http://docs.oracle.com/javase/tutorial/essential/exceptions/tryResourceClose.html](http://docs.oracle.com/javase/tutorial/essential/exceptions/tryResourceClose.html)

教程（上面的链接）是不言自明的，所以我认为现在注意到这个特性就足够了。

出于 JDBC 资源的目的，您可以在 try-with-resources 中注册 Statement 并跳过关闭 ResultSet （在之后像往常一样声明它`try .. {`），因为正如我在第一部分中描述的那样，这将自动发生。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T04:07:07.443

> finally 部分中的元素顺序是否重要？

是的。如果您先关闭连接，则其他关闭是多余的，可以省略。如果您想关闭所有内容，您应该按照获取的相反顺序进行操作。

为了获得最大的清晰度和灵活性，我这样做：

```
Connection conn = ...;
try
{
  PreparedStatement ps  = ...;
  try
  {
    // ps.setXXXXX() ...
    ResultSet rs = ps.executeQuery();
    try
    {
      // ...
    }
    finally
    {
      rs.close();
    }
  }
  finally
  {
    ps.close();
  }
}
finally
{
  conn.close();
} 
```

然后我可以在晚上睡觉，知道没有逃脱;-) 也不需要空测试。