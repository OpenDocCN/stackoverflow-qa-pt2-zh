# StackOverflow 问答 14405000-14405999

# php - 在 PHP 中使用 count() 计算 PDO 的结果？

> ID：14405003
> 
> 赞同：1
> 
> 时间：2013-01-18T18:10:58.170
> 
> 标签：php, mysql, pdo, count

我正在将一个旧的 mysql_X 站点转换为使用 PDO，到目前为止，一切都很好（我认为）。但是，我对计算查询结果的可靠性有疑问。

目前，我的一切都是这样的（我已经删除了 try / catch 错误代码以使其更易于阅读）：

```
$stm = $db->prepare("SELECT COUNT(*) FROM table WHERE somevar = '1'");
$stm->execute();
$count = $stm->fetchColumn();

if ($count > 0){
    $stm = $db->prepare("SELECT * FROM table WHERE somevar = '1'");
    $stm->execute();
    $result = $stm->fetchAll();
} 
```

这样做可能会出现愚蠢的问题，如果有的话，我邀请您告诉我，但我的问题实际上是关于减少数据库查询。我注意到，如果我删除第一个语句，自行运行第二个语句，然后使用 PHP 的 count() 来计算结果，我似乎仍然可以获得可靠的行数，只有一个查询，如下所示：

```
$stm = $db->prepare("SELECT * FROM table WHERE somevar = '1'");
$stm->execute();
$result = $stm->fetchAll();

$count = count($result);
if ($count > 0){
    //do whatever
} 
```

这样做有什么陷阱吗？它可靠吗？我的 PDO 中是​​否有任何明显的愚蠢错误？谢谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T18:25:23.170

最好在 MySQL 中进行计数，特别是如果计数值是您感兴趣的唯一结果。将您的版本与等效问题“杂货店有多少巧克力棒库存？”进行比较。

1）在数据库中数：`SELECT count(*) ....`开车去商店，数巧克力棒，记下数字，开车回家，从纸条上读出数字

2) 在 PHP 中计数：`SELECT * ...`. 开车去商店。购买所有的巧克力棒。用卡车把他们送回家。在客厅地板上数一数。将结果写在一张纸上。**扔掉巧克力棒**。从纸上读出数字。

哪一个更高效/成本更低？如果您的数据库/表只有几条记录，这没什么大不了的。当您开始达到数千/数百万条记录时，版本 2) 绝对是可笑的，并且可能会消耗您的带宽，炸毁您的 PHP 内存限制，并将您的 CPU 使用率推高。

话虽如此，运行两个查询是没有意义的，一个只是计算您可能获得多少记录。这样的系统容易受到竞争条件的影响。例如，您进行计数并获得（例如）1 条记录。当您运行第二个查询并获取该记录时，其他一些并行进程已经插入另一条记录，或者删除了您想要的记录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T18:13:08.073

在第一种情况下，您使用 MYSQL 进行计数，在第二种情况下，您使用 PHP 进行计数。两者本质上是相同的结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T18:13:22.320

您对查询的使用是正确的。使用 LIMIT 时会出现唯一的问题，因为 COUNT(*) 和 count($result) 会不同。

COUNT(*) 将计算查询将返回的所有行（假设计数查询相同且不使用 LIMIT）

count($result) 将只计算返回的行，所以如果你使用 LIMIT，你只会得到给定限制的结果。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-18T18:14:05.120

是的，在这个用例中它是可靠的！

# objective-c - 为什么活动指示器不适用于 Web 视图？

> ID：14405004
> 
> 赞同：0
> 
> 时间：2013-01-18T18:11:04.927
> 
> 标签：objective-c, xcode, uiwebview, uiactivityindicatorview

我正在尝试加载一个网络视图（称为小部件）并设置一个指示器（称为指示器）以显示该视图正在加载（网页不大于 www.google.com）。小部件可以正常加载（我没有包含该代码），但是应该将 startAnimating 发送到 UIActivityIndi​​catorView 的这个片段不起作用（没有动画甚至外观）。故事板中的所有内容都已连接，并且**始终记录“未加载”**。这让我觉得我使用 UIWebView 的加载属性有问题。

```
sleep(2);
[super viewDidLoad];
[indicator setHidesWhenStopped:YES];
if (widget.loading == YES) {
    NSLog(@"loading");
    [indicator startAnimating];
} else {
    NSLog(@"not loading");
    [indicator stopAnimating];
}
[UIApplication sharedApplication].networkActivityIndicatorVisible = NO; 
```

有什么想法吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T18:19:30.983

尝试将您的开始和停止动画放在 webview 的委托方法中：

```
- (void)webViewDidFinishLoad:(UIWebView *)webView {
    [indicator stopAnimating];
}

- (void)webViewDidStartLoad:(UIWebView *)webView {
    [indicator startAnimating];
} 
```

确保您设置了 webview 的委托并在您的界面中符合 UIWebViewDelegate。

# regex - DevExpress XtraEditors TextEdit 掩码完全替换精确字符串？

> ID：14405013
> 
> 赞同：2
> 
> 时间：2013-01-18T18:11:25.303
> 
> 标签：regex, devexpress

我有一个从数据库中检索到的确切字符串。为了论证，让我们以此为例：

```
string dataText = "set of characters"; 
```

我需要能够用其他一些文本替换该文本，这些文本也使用掩码从数据库中检索。为了论证起见，让我们以这个替换文本为例。

```
string replacementText = "this string is private!"; 
```

我需要完成这一行，但我无法弄清楚我需要用来强制掩码用replacementText替换dataText的正则表达式

```
textEditSomething.Properties.Mask.EditMask = ??? 
```

我该怎么做呢？

# xpages - 将@Now 与日期/时间字段进行比较？

> ID：14405015
> 
> 赞同：0
> 
> 时间：2013-01-18T18:11:27.977
> 
> 标签：xpages

如何将@Now 与文档中的数据/时间值进行比较？这就是我所拥有的

```
 var ProjectActiveTo:NotesDateTime = doc.getItemValueDateTimeArray("ProjectActiveTo")[0];

    var ProjectExpired;

    var d1:Date  = @Now();

    if (d1 > ProjectActiveTo.toJavaDate())      
    {
        dBar.info("Today: " + d1 + " > " + ProjectActiveTo.toJavaDate());
        ProjectExpired = true;
    }
    else
    {
        dBar.info("Today: " + d1 + " < " + ProjectActiveTo.toJavaDate());
        ProjectExpired = false;
    } 
```

但这似乎总是返回错误。我打印了一些诊断信息。

今天：2013 年 1 月 18 日下午 6:02 < 2013 年 1 月 20 日下午 5:00

显然今天大于 2001 年 1 月 20 日，但这是我测试的结果。为什么？

我进行了一些搜索，发现可能使用了 compare 成员函数，但它为我返回了一个错误，并且 compare 不在设计编辑器的智能感知（或 Lotus 所称的任何东西）中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T18:21:05.873

在网上找到了这个小片段 - 它应该为您指明正确的方向

```
var doc:NotesDocument = varRowView.getDocument();
var d:NotesDateTime = doc.getItemValue("BidDueDate")[0];
var t:NotesDateTime = session.createDateTime("Today");
if (d.timeDifference(t) > 0 ) {
return "Overdue";
}else{
return "";
} 
```

# java - 检索组成 SequenceInputStream 的每个不同的 InputStream

> ID：14405018
> 
> 赞同：0
> 
> 时间：2013-01-18T18:11:51.703
> 
> 标签：java, file, stream, inputstream

当客户端单击下载按钮时，我正在尝试使用 Java 将文件从 Sybase 数据库流式传输到我的应用程序的表示层。

从数据库流式传输文件是可以的。但我想一次性将所有`InputStream`与我的 DAO 不同的东西传递给我的控制器。

我看到我们可以`SequenceInputStream`用于连接多个`InputStream`（使用`Enumeration`）。问题是我确实想处理每个单独的`InpuStream`组合`SequenceInputStream`（将它们连接成一个 PDF 文件）。

我也试过了`List<InputStream>`，但我遇到了序列化问题。

有没有一种简单的方法（或最好的方法）来做到这一点？

# sql - 重构查询以避免重复代码

> ID：14405022
> 
> 赞同：0
> 
> 时间：2013-01-18T18:12:02.853
> 
> 标签：sql, sql-server, sql-server-2008, sql-view

我的 SQL 视图查询有一些问题。我有几个重复的查询，我认为它不应该是这样的。这只是更大的一部分：

```
 WITH auditlogs ([AuditLogId], [OperationCode], [Operation], [Table], [RowId], [Timestamp], [UserUid], [UserName], [IpAddress], [OperationSet], [ContextUid], [Field], [OldValue], [NewValue]) AS
    (
        SELECT
            al.[Id] AS [AuditLogId],
            al.[Operation] as [OperationCode],
            CASE al.[Operation]
                WHEN 0 THEN 'New'  
                WHEN 1 THEN 'Update'  
                WHEN 2 THEN 'Delete'  
                ELSE 'Warning'  
            END  AS [Operation],
            al.[EntityName] AS [Table],
            CASE al.[EntityId] 
                WHEN -1 THEN NULL
                ELSE al.[EntityId] 
            END AS [RowId],
            al.[Timestamp],
            al.[UserUid],
            al.[UserName],
            al.[IpAddress],
            al.[OperationSet],
            al.[ContextUid],
            alf.[Name],
            alf.[OldValue],
            alf.[NewValue]
        FROM [AuditLog] AS al
            INNER JOIN [AuditLogField] AS alf ON alf.AuditLogId = al.Id
    )
    SELECT [AuditLogId], --- ATTACHUSERS
        [OperationCode], [Operation], [Table], [RowId], [Timestamp], alx.[UserUid], [UserName], 
        [IpAddress], [OperationSet], [ContextUid], 'User' AS [Field], null, u.[FirstName] + ' ' + u.[LastName], s.Id
    FROM (
        SELECT [AuditLogId],
            [OperationCode], [Operation], [Table], [RowId], [Timestamp], [UserUid], [UserName], 
            [IpAddress], [OperationSet], [ContextUid],
            MAX(case when [Field] = 'UserUid' then [NewValue] end) AS AddedUserUid,
            MAX(case when [Field] = 'TenantId' then [NewValue] end) TenantId
        FROM [auditlogs] AS al
        WHERE al.[Table] = 'TenantUser' AND OperationCode = 0
        GROUP BY [AuditLogId], [OperationCode], [Operation], [Table], [RowId], [Timestamp], al.[UserUid], [UserName], 
            [IpAddress], [OperationSet], [ContextUid]
    ) AS alx
    INNER JOIN [User] AS u ON u.[Uid] = CAST(alx.AddedUserUid AS uniqueidentifier) 
    INNER JOIN [Tenant] AS t ON alx.TenantId = t.Id
    INNER JOIN [Subscription] AS s ON s.TenantId = t.id
UNION ALL
    SELECT al.[AuditLogId], --- DETTACHUSERS
        al.[OperationCode], al.[Operation], al.[Table], al.[RowId], al.[Timestamp], al.[UserUid], al.[UserName], 
        al.[IpAddress], al.[OperationSet], al.[ContextUid], 'User' AS [Field], null, u.[FirstName] + ' ' + u.[LastName], s.Id
    FROM [auditlogs] AS al
    INNER JOIN (
        SELECT TOP 1 * 
        FROM (
            SELECT [AuditLogId],
                [OperationCode], [Operation], [Table], [RowId], [Timestamp], [UserUid], [UserName], 
                [IpAddress], [OperationSet], [ContextUid],
                MAX(case when [Field] = 'UserUid' then [NewValue] end) AS AddedUserUid,
                MAX(case when [Field] = 'TenantId' then [NewValue] end) TenantId
            FROM [auditlogs] AS al
            WHERE al.[Table] = 'TenantUser' AND OperationCode = 0
            GROUP BY [AuditLogId], [OperationCode], [Operation], [Table], [RowId], [Timestamp], al.[UserUid], [UserName], 
                [IpAddress], [OperationSet], [ContextUid]
        ) AS added
        ORDER BY [Timestamp] DESC
    ) AS alx ON alx.RowId = al.RowId AND al.OperationCode = 2
    INNER JOIN [User] AS u ON u.[Uid] = CAST(alx.AddedUserUid AS uniqueidentifier) 
    INNER JOIN [Tenant] AS t ON alx.TenantId = t.Id
    INNER JOIN [Subscription] AS s ON s.TenantId = t.id 
```

我知道我的视图可以由其他人组成，我的意思是，将其拆分为几个较小的视图，以便重用它们并避免重复的部分。但是我想知道这是否是一种好方法，或者是否有另一种更好的方法。

拆分它，这是最好的解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T18:43:21.287

CTE 是在查询中重构代码的一种非常好的方法。

只有一个警告：这不会影响性能。SQL Server 仍然单独优化每个引用，无论好坏（在我看来）。这是微软的一个已知问题，他们甚至编写了有关它的白皮书。 例如，[这里是对此优化的正式请求。](https://connect.microsoft.com/SQLServer/feedback/details/218968/provide-a-hint-to-force-intermediate-materialization-of-ctes-or-derived-tables)

作为第二条评论，通常当您将表连接到自身的摘要时，窗口函数会更有效。您的查询相当复杂，所以我不确定这是否会有所帮助。

是的，您可以拥有多个 cte。这是一个基本示例：

```
with digits as (select 0 as digit union all select 1 as digit),
     digits2 as (select d1.digit + d2.digit*10 as num from digits d1 cross join digits d2)
select *
from digits2 
```

顺便说一句，这与您可以用来在 SQL Server 中生成数字序列的想法相同。

# python - Python：动态运行外部程序

> ID：14405023
> 
> 赞同：0
> 
> 时间：2013-01-18T18:12:10.337
> 
> 标签：python, command-line

> **可能重复：**
> [在 Python 中调用外部命令](https://stackoverflow.com/questions/89228/calling-an-external-command-in-python)

我想从我的 Python 脚本中调用各种程序，比如二进制程序，还有其他 perl/python/ruby 脚本，比如 wget、sqlmap 和自定义脚本。

问题是我希望用户能够更改底层程序的参数。我们以 wget 为例。假设我正在调用这个程序（请注意，所有三个参数都是动态输入到命令中的）：

```
wget www.google.com --user=user --password=pass 
```

但我也希望用户在 wget 命令中添加自定义参数。我想最好的方法是直接从文件中获取，但我想知道是否存在这样的东西，这样我就不会手动重新编程所有内容。

还要记住，这不仅仅是 1 个程序，它可能多达 100 个程序，甚至更多。它需要是可扩展的，并且用户更改起来不太复杂。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T18:20:43.330

一个简单的例子使用`subprocess.check_output`

```
program = 'wget'
default_args = ['www.google.com']
user_args = []
subprocess.check_output(program + default_args + user_args) 
```

对此要非常小心，在允许任何用户向命令添加参数之前进行所有安全检查。

您可能还需要[shlex.split](http://docs.python.org/2/library/shlex.html#shlex.split)在将用户提供的参数添加到子进程调用之前对其进行拆分

如果您想在外部文件中使用默认值，您可以执行以下操作：

```
with open('wget_defaults.txt') as i:
    default_args = i.read().split(',') 
```

希望能帮助到你

# c# - 打印到手动进纸 MS Interop Word

> ID：14405027
> 
> 赞同：1
> 
> 时间：2013-01-18T18:12:27.040
> 
> 标签：c#, .net, wpf, office-interop

我正在尝试从手动进纸打印 MS Word 文档（以便打印到信封）我发现 Envelope.PrintOut 方法有一个 FeedSource 属性可以帮助定义这个， http: [//msdn.microsoft.com /en-us/library/office/ff197594.aspx](http://msdn.microsoft.com/en-us/library/office/ff197594.aspx)

但是我很难使用它...这是我用来打印有效文档的功能，如果 fromFeed 为假（常规打印）但如果它为真...当然我尝试了不同的类型WdPaperTray 值...

```
 public void PrintDocument(bool fromFeed)
    {
        this.doc = this.ap.Documents.Open(this.pathToNewFile, ReadOnly: false, Visible: false);
        //if (fromFeed)
       //     this.doc.Envelope.FeedSource = WdPaperTray.wdPrinterManualFeed;
        object copies = "1";
        object pages = "";
        object range = WdPrintOutRange.wdPrintAllDocument;
        object items = WdPrintOutItem.wdPrintDocumentContent;
        object pageType = WdPrintOutPages.wdPrintAllPages;
        object oTrue = true;
        object oFalse = false;
        object missing = System.Type.Missing;
        this.doc.Activate();
        if (fromFeed)
            this.doc.Envelope.PrintOut(missing, missing, missing, missing, missing, missing, missing, missing, missing, missing, missing, WdPaperTray.wdPrinterManualFeed, missing, missing, missing, missing, missing, missing, missing, missing, missing, missing, missing, missing, missing, missing, missing, missing);
        else
            this.doc.PrintOut(ref oTrue, ref oFalse, ref range, ref missing, ref missing, ref missing,
            ref items, ref copies, ref pages, ref pageType, ref oFalse, ref oTrue,
            ref missing, ref oFalse, ref missing, ref missing, ref missing, ref missing);
        this.ap.Documents.Close(SaveChanges: false, OriginalFormat: false, RouteDocument: false);
    } 
```

比我发现这个： http: [//msdn.microsoft.com/en-us/library/microsoft.office.interop.word.envelope.feedsource (v=office.11​​).aspx](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.word.envelope.feedsource(v=office.11).aspx)

它说：“如果您在将信封添加到文档之前使用此属性，则会发生错误”

所以也许我只需要在文件中添加一个信封？但是 MS Word 文档中的信封是什么？

顺便说一句，我正在将其开发为 WPF。并且此时代码抛出此异常：对​​象值超出范围异常

任何帮助都将受到欢迎。

# ios - 将 iOS CIDetector（人脸检测）坐标从 aspectRatioThumbnail 缩放到 fullScreenImage

> ID：14405030
> 
> 赞同：2
> 
> 时间：2013-01-18T18:12:32.040
> 
> 标签：ios, core-image

*（忽略下面的大量代码块。它只是供参考/资源，以防其他人想一起玩）*

CoreImage 中的人脸检测例程自然在较小的图像上工作得更快，所以我一直在研究使用 来生成人`aspectRatioThumbnail`脸数据，并计划将其放大以利用`fullScreenImage`表示。我这样做的原因是我可能要处理 20-30 张图像，所以我想减少任务时间。

这可能是一个简单的数学问题，但我试图将一个图像中的点映射到另一个图像时得到不准确的结果。

90 x 120 图像 - CGPoint(64, 50) rightEyePosition

至

480 x 640 图像 - CGPoint(331, 303) rightEyePosition

**(480 /90) * 64 = 341.333** - 但应该是 331，是吗？我做错了吗？

**更新**- 稍后再进行一些测试。那么也许只是因为图像分辨率不同，人脸数据结果略有不同？这是有道理的：数据结果之间没有可扩展的关系。不过我仍然想知道：*我上面的缩放数学是错误的吗？*

* * *

```
Using CIDetectorAccuracyHigh     
useImageOptions:     0
------------ aspectRatioThumbnail   90.000000  120.000000 orientation: 0
2013-01-18 12:33:30.378 SeqMeTestBed[9705:907] aspectRatioThumbnail: features {
    bounds = "{{23, 16}, {56, 56}}";
    hasLeftEyePosition = 1;
    hasMouthPosition = 1;
    hasRightEyePosition = 1;
    leftEyePosition = "{43, 59}";
    mouthPosition = "{51, 31}";
    rightEyePosition = "{64, 50}";
}
------------ fullScreenImage   480.000000  640.000000 orientation: 0
2013-01-18 12:33:33.029 SeqMeTestBed[9705:907] fullScreenImage: features {
    bounds = "{{135, 81}, {298, 298}}";
    hasLeftEyePosition = 1;
    hasMouthPosition = 1;
    hasRightEyePosition = 1;
    leftEyePosition = "{228, 321}";
    mouthPosition = "{290, 156}";
    rightEyePosition = "{331, 303}";
}
------------ fullResolutionImage   640.000000  480.000000 orientation: 0
2013-01-18 12:33:35.745 SeqMeTestBed[9705:907] fullResolutionImage: features {
    bounds = "{{195, 105}, {366, 366}}";
    hasLeftEyePosition = 1;
    hasMouthPosition = 1;
    hasRightEyePosition = 1;
    leftEyePosition = "{356, 411}";
    mouthPosition = "{350, 201}";
    rightEyePosition = "{455, 400}"; 
```

// 使用的代码 //

```
- (void)detectFacialFeatures
{

    NSDictionary *detectorOptions = [[NSDictionary alloc] initWithObjectsAndKeys:CIDetectorAccuracyHigh, CIDetectorAccuracy, nil];
    CIDetector* faceDetector = [CIDetector detectorOfType:CIDetectorTypeFace context:nil options:detectorOptions];

    NSDictionary *imageOptions = nil;

    UIImage *tmpImage;
    NSNumber* orientation; 
    CIImage *ciImage;
    NSArray *array;
    NSMutableDictionary* featuresDictionary;

    Boolean useImageOptions = NO;

    printf("Using CIDetectorAccuracyHigh     \n");
    printf("useImageOptions:     %d\n", useImageOptions);

    //-----------------aspectRatioThumbnail
    tmpImage = [[UIImage alloc] initWithCGImage:self.asset.aspectRatioThumbnail];
    orientation = [NSNumber numberWithInt:tmpImage.imageOrientation];

    printf("------------ aspectRatioThumbnail   %f  %f orientation: %d\n", tmpImage.size.width, tmpImage.size.height, [orientation integerValue]);
    ciImage = [CIImage imageWithCGImage:tmpImage.CGImage];
    if (ciImage == nil) printf("----------!!!aspectRatioThumbnail: ciImage is nil    \n");

    imageOptions = [NSDictionary dictionaryWithObjectsAndKeys:orientation, CIDetectorImageOrientation,
                    CIDetectorAccuracyHigh, CIDetectorAccuracy, nil];

    if (useImageOptions) {
        array = [faceDetector featuresInImage:ciImage];
    } else {
        array = [faceDetector featuresInImage:ciImage options:imageOptions];
    }

    featuresDictionary = [self convertFeaturesToDictionary:array];
    NSLog(@"aspectRatioThumbnail: features %@", featuresDictionary);

   //-----------------fullScreenImage
    tmpImage = [[UIImage alloc] initWithCGImage:self.asset.defaultRepresentation.fullScreenImage];
    orientation = [NSNumber numberWithInt:tmpImage.imageOrientation];
    printf("------------ fullScreenImage   %f  %f orientation: %d\n", tmpImage.size.width, tmpImage.size.height, [orientation integerValue]);

    ciImage = [CIImage imageWithCGImage:tmpImage.CGImage];
    if (ciImage == nil) printf("----------!!!fullScreenImage: ciImage is nil    \n");

    imageOptions = [NSDictionary dictionaryWithObjectsAndKeys:orientation, CIDetectorImageOrientation,
                    CIDetectorAccuracyHigh, CIDetectorAccuracy, nil];

    if (useImageOptions) {
        array = [faceDetector featuresInImage:ciImage];
    } else {
        array = [faceDetector featuresInImage:ciImage options:imageOptions];
    }

    featuresDictionary = [self convertFeaturesToDictionary:array];
    NSLog(@"fullScreenImage: features %@", featuresDictionary);

    //-----------------fullResolutionImage
    tmpImage = [[UIImage alloc] initWithCGImage:self.asset.defaultRepresentation.fullResolutionImage];
    orientation = [NSNumber numberWithInt:tmpImage.imageOrientation];

    printf("------------ fullResolutionImage   %f  %f orientation: %d\n", tmpImage.size.width, tmpImage.size.height, [orientation integerValue]);

    ciImage = [CIImage imageWithCGImage:tmpImage.CGImage];
    if (ciImage == nil) printf("----------!!!fullResolutionImage: ciImage is nil    \n");

    imageOptions = [NSDictionary dictionaryWithObjectsAndKeys:orientation, CIDetectorImageOrientation,
                    CIDetectorAccuracyHigh, CIDetectorAccuracy, nil];

    if (useImageOptions) {
        array = [faceDetector featuresInImage:ciImage];
    } else {
        array = [faceDetector featuresInImage:ciImage options:imageOptions];
    }

    featuresDictionary = [self convertFeaturesToDictionary:array];
    NSLog(@"fullResolutionImage: features %@", featuresDictionary);

}

- (NSMutableDictionary*)convertFeaturesToDictionary:(NSArray*)foundFaces
{
    NSMutableDictionary * faceFeatures = [[NSMutableDictionary alloc] init];

    if (foundFaces.count) {

        CIFaceFeature *face = [foundFaces objectAtIndex:0];
        NSNumber* hasMouthPosition = [NSNumber numberWithBool:face.hasMouthPosition];
        NSNumber* hasLeftEyePosition = [NSNumber numberWithBool:face.hasLeftEyePosition];
        NSNumber* hasRightEyePosition = [NSNumber numberWithBool:face.hasRightEyePosition];

        [faceFeatures setValue:hasMouthPosition forKey:@"hasMouthPosition"];
        [faceFeatures setValue:hasLeftEyePosition forKey:@"hasLeftEyePosition"];
        [faceFeatures setValue:hasRightEyePosition forKey:@"hasRightEyePosition"];

        NSString * boundRect = NSStringFromCGRect(face.bounds);
       // NSLog(@"------------boundRect %@", boundRect);
        [faceFeatures setValue:boundRect forKey:@"bounds"];

        if (hasMouthPosition){
            NSString * mouthPosition = NSStringFromCGPoint(face.mouthPosition);
            [faceFeatures setValue:mouthPosition forKey:@"mouthPosition"];
        }

        if (hasLeftEyePosition){
            NSString * leftEyePosition = NSStringFromCGPoint(face.leftEyePosition);
            [faceFeatures setValue:leftEyePosition forKey:@"leftEyePosition"];
        }

        if (hasRightEyePosition){
            NSString * rightEyePosition = NSStringFromCGPoint(face.rightEyePosition);
            [faceFeatures setValue:rightEyePosition forKey:@"rightEyePosition"];
        }

    }
    return faceFeatures;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-18T16:03:19.503

基于缩略图保留检测所需的所有面部数据的假设，您的数学是正确的。

这个假设不成立，因为在缩略图中，即使是人类也更难识别一张脸。

因此，对于更高分辨率的图像，引擎应该返回更准确的面部位置，该位置应该更紧密地绑定到实际面部。通过简单地缩放缩略图图像中的值，它通常仍应与检测到的人脸匹配，但您绝对应该期望较低的准确度。

# java - 报警管理器日期问题

> ID：14405032
> 
> 赞同：0
> 
> 时间：2013-01-18T18:12:50.433
> 
> 标签：java, android

我正在尝试设置警报管理器类，因此在指定日期（由日期选择器设置），将在指定日期向用户显示 toast 样式消息，基本上告诉他们他们的约会是那天。

到目前为止，我有一个切换按钮，它调用一个单独的类来设置警报管理器，其中包含发送到构造函数的日期、月份和年份变量。

目前我收到以下错误：

我是否需要设置活动意图以在 XML 布局上显示消息？

```
01-18 17:32:05.672: E/AndroidRuntime(271): FATAL EXCEPTION: main
01-18 17:32:05.672: E/AndroidRuntime(271): java.lang.NullPointerException
01-18 17:32:05.672: E/AndroidRuntime(271):  at com.example.flybase2.alarmset.set(alarmset.java:32)
01-18 17:32:05.672: E/AndroidRuntime(271):  at com.example.flybase2.addAppointment.onClick(addAppointment.java:68)
01-18 17:32:05.672: E/AndroidRuntime(271):  at android.view.View.performClick(View.java:2408)
01-18 17:32:05.672: E/AndroidRuntime(271):  at android.widget.CompoundButton.performClick(CompoundButton.java:99)
01-18 17:32:05.672: E/AndroidRuntime(271):  at android.view.View$PerformClick.run(View.java:8816)
01-18 17:32:05.672: E/AndroidRuntime(271):  at android.os.Handler.handleCallback(Handler.java:587)
01-18 17:32:05.672: E/AndroidRuntime(271):  at android.os.Handler.dispatchMessage(Handler.java:92)
01-18 17:32:05.672: E/AndroidRuntime(271):  at android.os.Looper.loop(Looper.java:123)
01-18 17:32:05.672: E/AndroidRuntime(271):  at android.app.ActivityThread.main(ActivityThread.java:4627)
01-18 17:32:05.672: E/AndroidRuntime(271):  at java.lang.reflect.Method.invokeNative(Native Method)
01-18 17:32:05.672: E/AndroidRuntime(271):  at java.lang.reflect.Method.invoke(Method.java:521)
01-18 17:32:05.672: E/AndroidRuntime(271):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
01-18 17:32:05.672: E/AndroidRuntime(271):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
01-18 17:32:05.672: E/AndroidRuntime(271):  at dalvik.system.NativeStart.main(Native Method) 
```

这是我的类调用“警报集”类：

```
package com.example.flybase2;

import java.sql.Date;
import java.util.ArrayList;
import java.util.List;

import android.app.Activity;
import android.os.Bundle;
import android.text.format.DateFormat;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.ArrayAdapter;
import android.widget.Button;
import android.widget.DatePicker;
import android.widget.Spinner;
import android.widget.TimePicker;
import android.widget.ToggleButton;

 public class addAppointment extends Activity implements OnClickListener {

Spinner typeSpinner;
Button bAddAppointment;
ToggleButton balarmButton;
TimePicker setTime;
DatePicker setDate;
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.addappointment);

    Spinner typeSpinner = (Spinner) findViewById(R.id.spinner1);
    List<String> list = new ArrayList<String>();
    list.add("-");
    list.add("Medical");
    list.add("Business");
    list.add("Family");
    list.add("Other");
    ArrayAdapter<String> dataAdapter = new ArrayAdapter<String>(this, android.R.layout.simple_spinner_item, list);
        dataAdapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
    typeSpinner.setAdapter(dataAdapter);

    balarmButton = (ToggleButton) findViewById(R.id.toggleButton1);
    bAddAppointment = (Button) findViewById(R.id.btnAddAppointment);
    setTime = (TimePicker) findViewById(R.id.timePicker1);
    setDate = (DatePicker) findViewById(R.id.datePicker1);

    balarmButton.setOnClickListener(this);
    bAddAppointment.setOnClickListener(this);

}

@Override
public void onClick(View clickedOption) {
    switch(clickedOption.getId()){

    case (R.id.toggleButton1):

    Integer dobYear = setDate.getYear();
    Integer dobMonth = setDate.getMonth();
    Integer dobDate = setDate.getDayOfMonth();

    alarmset setDate = new alarmset(dobYear, dobMonth, dobDate);

    setDate.set();

    break;

    case (R.id.btnAddAppointment):  

    break;

    } 
```

还有alarmset类：

```
package com.example.flybase2;

import java.sql.Date;
import android.app.AlarmManager;
public class alarmset {
    Integer yearSet;
    Integer monthSet;
    Integer dateSet;

    AlarmManager am;

    public alarmset(Integer dobYear, Integer dobMonth, Integer dobDate) {
        yearSet = dobYear;
        monthSet = dobMonth;
        dateSet = dobDate;
    }

    public void set() {
        Date set;
        set = new Date(yearSet - 1900, monthSet, dateSet);
        am.set(AlarmManager.RTC_WAKEUP, set.getTime(), null);   
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T19:55:11.360

在您的 alarmset 类中，您有以下行：

```
am.set(AlarmManager.RTC_WAKEUP, set.getTime(), null); 
```

**你永远不会实例化变量`am`。**当你到达我提到的那一行时，它总是为 null，所以你会抛出一个`NullPointerException`. 您需要通过传入和分配值，或者通过`new AlarmManager()`或其他相关的构造函数来实例化它。

此外，作为风格问题，类名应该大写。例如。Alarmset 或 AlarmSet 而不是 alarmset。

# android - 自动缩放 iphone/android 上的网页，使文本框水平填充屏幕

> ID：14405035
> 
> 赞同：1
> 
> 时间：2013-01-18T18:13:07.733
> 
> 标签：android, iphone, web, 4d-database

我们有一个基于 4D 的大型专有 MRP 系统。

我们正在创建一个由 4D 提供的非常简单的网页，其中包含一个文本框。

如何说服 iphone 和 android 使文本框成为屏幕的宽度，这样用户就不必手动缩放？

```
<!DOCTYPE html>
<HTML>
<HEAD>
<style type="text/css">
</style>
</HEAD>
<META NAME="GENERATOR" CONTENT="4th Dimension - 4D">
<TITLE> Real Time Collection
</TITLE>

<BODY>
<FONT size="5";bold>    
<FORM ACTION="/ProcessJobHours" METHOD=POST>
    Employee ID#<BR>
    <INPUT TYPE=TEXT NAME=Emp VALUE="" style="height: 48px; width: 250px;
                    font-size: 24pt;"><BR>      
    <!-- OK is a particular case-->
    <INPUT TYPE=SUBMIT NAME=WEBOK VALUE="Ok">
</FORM>
</BODY>
</HTML> 
```

我得到的是： ![在此处输入图像描述](../Images/7b0f62689e20bcf5f2b893a49b7b9d8a.png)

我想要的是： ![在此处输入图像描述](../Images/6c977d170af712c4890ba4b150c2bec5.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T19:55:46.010

我认为 Alex B 的视口建议是一个好的开始。尝试将此添加到您的 HTML 部分。

```
<meta name="viewport" content="width=device-width, initial-scale=1"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T18:20:20.977

我相信您在网页的移动渲染上寻找的东西称为视口。我认为这篇博文很好地阐明了这一点。

[http://bravenewmethod.wordpress.com/2011/08/28/html5-canvas-layout-and-mobile-devices/](http://bravenewmethod.wordpress.com/2011/08/28/html5-canvas-layout-and-mobile-devices/)

# ruby - 在ruby中推拉到rabbitmq json

> ID：14405037
> 
> 赞同：1
> 
> 时间：2013-01-18T18:13:08.800
> 
> 标签：ruby, hash, rabbitmq, json

我正在尝试将哈希对象推送到 rabbitmq 。这就是我推动的方式：

```
msg[:gateway] = "gat1"

    msg[:params] =  {
        :status => "2",
        :token_id => "SADF3434FG2FG",
        :mb_tranaction_id => "1235ABC",
        :random_num => "#{2*rand(155)}"
    }

    AmqpClient.instance.publish("#{RABBIT_MQ_CONFIG['ipn_queue']}", msg.to_json) 
```

在输出上它看起来像这样：

```
{\"gateway\":\"gat1\",\"params\":{\"status\":\"2\",\"token_id\":\"SADF3434FG2FG\",\"mb_tranaction_id\":\"1235ABC\",\"random_num\":\"62\"}} 
```

当我拉动时，我试图将其解码回哈希对象，如下所示：

```
 msg = JSON.parse(msg)
  p "worker: #{msg.inspect}" 
```

输出是：

```
"worker: {\"gateway\"=>\"skrill\", \"params\"=>{\"status\"=>\"2\", \"token_id\"=>\"SADF3434FG2FG\", \"mb_tranaction_id\"=>\"1235ABC\", \"random_num\"=>\"62\"}}" 
```

但是当我尝试通过键（网关）访问其中一个值时，`msg[:gateway]` 我得到一个空白字符串......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T18:15:36.670

在 JSON 格式中，键被表示为字符串 - 所以`msg[:gateway]`不会起作用 - 但`msg["gateway"]`会。

或者，您可以使用 Rails`[with_indifferent_access][1]`来通过符号访问散列。

# jquery - 将单击的 li 的边距推到水平列表的中心

> ID：14405038
> 
> 赞同：0
> 
> 时间：2013-01-18T18:13:13.040
> 
> 标签：jquery, math, jquery-animate

我想通过给第一个 li 一个边距偏移量来将点击的 li 推到中心（或足够接近）。我的问题是我不完全确定如何进行算术运算。

我试过的是将 li 的总数除以 2，然后乘以 li 的宽度。我认为这会给我中心点。它没有相应地工作。

我难住了。

```
// set .active class when an li is clicked and push that li to the centre (or close enough.)
$('body').on("click", ".date li", function () {

  var self = $(this),
    li = $('.date li');

  li.removeClass('active');
  self.addClass('active');

  var num = self.index(),
    w = self.width(),
    t = w * (num / 2);

    t = t + 'px';

  // push the margin of the first li
  $('.date li:first-child').animate({ 'margin-left': t });

}); 
```

这是一个问题：http: [//jsfiddle.net/vLQgy/1/](http://jsfiddle.net/vLQgy/1/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T18:22:03.257

```
var num = self.index(),
liwidth = self.width(),
  total_width = $('.date').width(),

half = num / 2.0,
t = total_width / 2 - 84 * num - liwidth / 2;

t = t + 'px'; 
```

我开始`t`使用这段代码。

这是jsfiddle。[http://jsfiddle.net/vLQgy/2/](http://jsfiddle.net/vLQgy/2/)

# javascript - 当填充更改时，如何让 Chrome 调整此 div 的大小？

> ID：14405043
> 
> 赞同：1
> 
> 时间：2013-01-18T18:13:25.920
> 
> 标签：javascript, css, google-chrome

**更新**：在小提琴上添加 css 过渡以使其更清晰

当通过 javascript 从此 div 中删除填充时，Chrome 不会调整内容的大小以适应（即，红色 div 不会覆盖黄色，它保持相同的大小）：http: [//jsfiddle.net/XDchs/ 4/](http://jsfiddle.net/XDchs/4/)

同样，如果添加了填充，则将内容推送到 div 之外：http: [//jsfiddle.net/XDchs/3/](http://jsfiddle.net/XDchs/3/)

Firefox 按照我的预期调整大小。有谁知道为什么，以及如何解决它？

HTML：

```
<div id="outer">
  <div id="inner">
    <div id="content">blah</div>
  </div>
</div> 
```

CSS：

```
#outer {
  background-color:blue;
  width:300px;
  margin:0 auto;
}
#inner {
  padding-left:100px;
  margin:2px;
  background-color:yellow;
  -webkit-transition:padding-left 2s;
  -moz-transition:padding-left 2s;
}
#inner.no-padding {
  padding-left:0;
} 
#content {
  background-color:red;
} 
```

JavaScript：

```
$(document).ready(function() {
  $("#inner").addClass("no-padding");
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T18:30:25.290

我不知道为什么 Chrome 的行为似乎不正确，但您可以通过重置宽度来解决：

```
#inner.no-padding {
    padding-left:0;
    width: 100%;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T16:51:51.430

在添加 CSS 类后，我通过 javascript 将内容的宽度设置为 100%，最终解决了这个问题：http: [//jsfiddle.net/XDchs/6/](http://jsfiddle.net/XDchs/6/)

```
$("#content").width("100%"); 
```

我找不到完全有效的 CSS 解决方案。

另外，我将此作为 Chrome 错误提交：[https ://code.google.com/p/chromium/issues/detail?id=171060](https://code.google.com/p/chromium/issues/detail?id=171060)

# javascript - 如何使用纯 Javascript 将元素添加到嵌入式 SVG？

> ID：14405046
> 
> 赞同：2
> 
> 时间：2013-01-18T18:13:30.200
> 
> 标签：javascript, html, svg

我写了一个小[示例页面](http://fuz.su/~fuz/igo)，如下所示：

```
<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="content-type" content="text/html; charset=utf-8" />
        <title>IGO&nbsp;&ndash;&nbsp;IRC Go</title>
        <link rel="stylesheet" type="text/css" href="igo.css" />
        <script type="text/javascript" src="igo.js"></script>
    </head>
    <body>
        <h1 onclick="makeCircle()">IGO&nbsp;&ndash;&nbsp;IRC Go</h1>
        <svg xmlns="http://www.w3.org/2000/svg" version="1.1" id="board" 
            width="4" height="4" viewBox="0 0 4 4">
        <!-- content will be generated by script -->
        </svg>
        <div id="foo"></div>
    </body>
</html> 
```

`igo.js`看起来像这样的地方：

```
function makeCircle() {
    var circle = document.createElement("circle");
    var board = document.getElementById("board");
    circle.cx = 4;
    circle.cy = 4;
    circle.r  = 4;
    circle.fill = "lime";
    board.appendChild(circle);
} 
```

问题是：它不起作用；圆圈不显示。你能帮助我吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T18:16:54.817

请查看以下 URL： [http ://blog.blazingcloud.net/2010/09/17/svg-scripting-with-javascript-part-1-simple-circle/](http://blog.blazingcloud.net/2010/09/17/svg-scripting-with-javascript-part-1-simple-circle/)

您应该使用如下代码：

```
var c2 = document.createElementNS("http://www.w3.org/2000/svg", "circle");
c2.setAttribute("cx", "250");
c2.setAttribute("cy", "100");
c2.setAttribute("r", "60");
c2.setAttribute("fill", "#996699");
c2.setAttribute("stroke", "#AA99FF");
c2.setAttribute("stroke-width", "7");
mySvg.appendChild(c2); 
```

您当前正在编辑 DOM 对象，而不是浏览器使用的属性。

现场示例：http: [//jsfiddle.net/CJrrz/](http://jsfiddle.net/CJrrz/)

# linux - xargs 不一致的行为和 -n1 参数

> ID：14405047
> 
> 赞同：1
> 
> 时间：2013-01-18T18:13:33.857
> 
> 标签：linux, shell, xargs

我有一个 shell 脚本

```
find . -name "*.java" -print0 | xargs -0 grep -Lz 'regular_expression' 
```

它以这种方式输出与正则表达式不匹配的文件名：

```
file1.java
file2.java
... 
```

据我了解，它的工作原理如下：`find`找到所需的文件并将它们的名称与`\0`. 然后`xargs`拆分`find`with的输出`\0`并将它们`grep`一一提供。

然后我想再添加一个阶段并只获取`basename`文件。我修改了脚本：

```
find . -name "*.java" -print0 | xargs -0 grep -LzZ 'regular_expression' | xargs -0 basename 
```

但出现错误。我开始调查并做了一个临时输出：

```
find . -name "*.java" -print0 | xargs -0 grep -LzZ 'regular_expression' | xargs -0  echo basename 
```

得到了这个：

```
basename ./file1.java ./file2.java ./subdir/file1.java ./subdir/file2.java 
```

因此，文件名没有被`\0`. 我不明白为什么在`xargs`使用 with`grep`和不使用`xargs`with的情况下将它们分开`basename`。

我通过`-n1`在后者中使用得到了解决方法`xargs`。但是我仍然不明白为什么我需要它（鉴于我没有在`xargs`with中使用`grep`）以及这个参数的作用。

希望您能向我解释`-n1`在后一种用法中我需要它的作用以及为什么我在前一种用法中不需要它`grep`。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-18T18:23:13.393

`-n1`告诉***每个参数运行一次***`xargs`给*定的命令。*

 **所以如果你有类似的东西

```
echo file1 file2 file2 | xargs basename 
```

这相当于

```
basename file1 file2 file2 
```

但如果你这样做

```
echo file1 file2 file2 | xargs -n1 basename 
```

这将导致 xargs 运行：

```
basename file1 
basename file2 
basename file2 
```

至于`xargs`'s`-0`标志，这是选项的别名，`--null`它告诉`xargs`拆分`\0`而不是默认空格。你需要它，`find`因为 find 放入了`\0`with `-print0`，但结果`grep`是纯空格分隔的标记。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T18:23:20.177

文件*名*由`\0`. 不同之处在于您使用的命令。 `xargs`通常采用其标准输入，将其分解为一个列表（这里，通过在 NUL 上拆分），然后将该列表作为额外参数传递给您的命令。所以当你这样做时：

```
find . -name "*.java" -print0 | xargs -0 grep -Lz 'regular_expression' 
```

实际运行的是这样的：

```
grep -Lz 'regular_expression' file1.java file2.java file3.java... 
```

在这里，这`-z`无关紧要，因为它只影响`grep`读取标准输入的方式，并且您不会向其标准输入发送任何内容。

因此，当您添加另一个`xargs`运行时`basename`，您会得到：

```
basename file1.java file2.java file3.java... 
```

但是虽然`grep`会接受任意数量的文件名参数，*`basename`但只接受一个*而忽略其他的。

这就是`-n 1`进来的地方：它告诉`xargs`将其参数列表分成块（1个），并多次运行该命令。所以现在运行的是：

```
basename file1.java
basename file2.java
basename file3.java
... 
```

并且所有输出都连接到标准输出上。**

# php - 没有 Suhosin 的 php 5.4 是否安全？

> ID：14405053
> 
> 赞同：24
> 
> 时间：2013-01-18T18:13:49.123
> 
> 标签：php, suhosin

我目前正在开发一个最终将在商业上可用的 PHP CMF，我想使用特征。然而问题在于，trait 是 PHP 5.4 的一个特性，而且很明显流行的 Suhosin 安全补丁与 PHP 5.4 不兼容。

所以我的问题是：在没有 Suhosin 安全补丁的情况下运行 PHP 网站是否安全？如果不是，我会给自己和其他使用我的 CMF 的人留下哪些漏洞？

**注意：**我不关心共享主机。预计使用我的 CMF 的任何人都可以对其 Web 服务器进行管理控制。

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-01-19T07:25:34.033

Suhosin 是一个 PHP 强化补丁。它没有修补任何明确的安全漏洞——它只是使 PHP 脚本中的一些漏洞更难被利用。

Suhosin 所做的一些更改最终被纳入 PHP。例如，Suhosin 对输入中空字节的各种保护层在 PHP 5.3.4 中变得不必要了，这使得文件名中的空字节总是抛出错误（而不是在空字节处静默截断文件名）。

在没有 Suhosin 的情况下，PHP 5.4 通常被认为是相当安全的。展望未来，只要您的应用程序支持它，您最好使用更新的（5.4+）版本的 PHP，而不是使用带有 Suhosin 补丁的旧版本。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-05-07T21:24:14.817

如果您不能禁用 eval()（一种语言结构，而不是函数）或在 eval 中有一个黑名单来禁用 eval 中的大部分黑客工具箱，那么您正在运行的带宽负载对于寻找带宽的黑客来说是无法抗拒的运行他们的有效载荷。理想情况下，不能总是将什么列入黑名单，因为 3rd 方模块编写者甚至框架核心依赖于 eval() 上下文中的一些函数：

```
suhosin.executor.eval.blacklist=include,include_once,require,require_once,curl_init,fpassthru,file,base64_encode,base64_decode,mail,exec,system,proc_open,leak,pfsockopen,shell_exec,ini_restore,symlink,stream_socket_server,proc_nice,popen,proc_get_status,dl,pcntl_exec,pcntl_fork, pcntl_signal, pcntl_waitpid, pcntl_wexitstatus, pcntl_wifexited, pcntl_wifsignaled, pcntl_wifstopped, pcntl_wstopsig, pcntl_wtermsig, socket_accept, socket_bind, socket_connect, socket_create, socket_create_listen, socket_create_pair,link,register_shutdown_function,register_tick_function,create_function,passthru,p_open,proc_close,proc_get_status,proc_terminate, allow_url_fopen,allow_url_include,passthru,popen,stream_select 
```

如果您无法过滤这些功能，则缺少安全性的主要组成部分。

以下是一些远程管理工具 (RATS) 的示例，它们会通过任何易受攻击的第三方模块或站点用户帐户感染您的站点。

RAT 可以采用多种形式，其中一些很容易 grep：

```
<?php error_reporting(0); eval(gzuncompress(base64_decode('eF5Tcffxd3 ...

<?php preg_replace("/.*/e","\x65\x76\x61\x6C\x28\ ... 
```

有些更专业和混淆，并且无法真正被 grep 寻找，除非 suhosin 提示您他们执行了，否则无法找到：

```
<?php $_0f4f6b="\x70\x72\x65\x67\x5f\x72\x65\x70\x6c\x61\x63\x65";$_0f4f6b("\x7 ...

<?php require "./.cache/.%D59C%49AA%73A8%63A1%9159%0441"; ?> 
```

（注意在这种情况下，CACHE 目录不能在源代码控制中，因此也不能被跟踪）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-15T01:59:05.663

恕我直言，上面来自duskwuff 的声明，没有Suhosin 一切都会好起来的既不是权威也不一定是正确的（特别是考虑到自那时以来较新的PHP 版本出现的关键漏洞数量）。

在我看来，如果 Suhosin 可用于当前的 PHP 版本，那肯定会更好 - 从安全 POV 来看。当然，事实并非如此，停留在旧的（最终未维护的）PHP 版本也不是一个解决方案。

一般来说，PHP，尤其是 PHP 应用程序以存在安全问题而闻名……所以问题不是“没有 Suhosin 的新 PHP 版本是否安全”……

# jquery - 使用 jQuery .post 方法将数据发送到 Django 服务器但收到错误 500？

> ID：14405056
> 
> 赞同：0
> 
> 时间：2013-01-18T18:14:07.570
> 
> 标签：jquery, python, django

我是 Django 的新手，我正在制作一个有 10x10 板的游戏，如果点击它，它将被标记为“X”。在我的一个模型上，我有一个属性来存储每个板单元的值，并且它们默认设置为空白。我可以用jquery标记板。但是，我想将数据发送到服务器端，让它知道我单击的单元格已被标记。这样，当我退出游戏并稍后重新访问时，棋盘将显示带有“X”的标记单元格。

这是嵌入在我的 HTML 页面中的 jquery 代码：

```
<script>
$(document).ready(function(){ 
    $('.target_cell').click(function(){ 
        if ($(this).text() != "X" && $(this).text() != "H"){
            $(this).text("X");
            var spot = $(this).attr('name'); //Cell index number like in an array
            $.post("/play_game/{{game.id}}/", spot);
        }
        else{
            alert("Spot already taken!");
        }
    });
});
</script> 
```

这是我的 jquery .post 方法正在访问的视图的代码：

```
def play_game(request, game_id):
    game = fetch_game(request.user, game_id)
    if request.method == 'POST':
        spot = request.POST['spot']
        game.creator_target_board[int(spot)] = "X"
    variables = RequestContext(request, {
        'game': game,
        'set_board': game.creator_ship_board,
        'target_board': game.creator_target_board
    })
    return render_to_response('battleship/play_game.html', variables) 
```

我目前在我的视图上使用 csrf_exempt 只是为了测试。当我单击我的板单元时，它被标记为“X”，但我的服务器日志显示 500 错误。有想法该怎么解决这个吗？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T18:34:58.737

你的 urls.py 是什么样的？

我建议通过执行以下操作来使用 ajax 而不是 post：

在 urls.py 中添加：

```
url(r'^target_spot/(?P<game_id>\d+)/(?P<spot>\d+)/$', target_spot, name='target_spot'), 
```

在您的 javascript 调用中：

```
$.ajax("/target_spot/{{game.id}}/" + spot); 
```

在您的意见中添加：

```
def target_spot(request, game_id, spot):
    if request.is_ajax():
        game = fetch_game(request.user, game_id)
        game.creator_target_board[int(spot)] = "X" 
```

这种方法的优点是您可以分离您的逻辑，使您的代码更简洁，并且速度更快，因为服务器不会在每次发布请求时都提供页面

# c# - 为什么我的解密文本中出现随机字符？

> ID：14405057
> 
> 赞同：11
> 
> 时间：2013-01-18T18:14:16.330
> 
> 标签：c#, cryptography, aes, aescryptoserviceprovider

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T19:14:38.853

Thanks to Hans Passant I found the solution. The problem was that I was using `Encoding.GetString()` or `Encoding.GetBytes()` when I was encrypting and decrypting, when I should have been using `Convert.ToBase64String()` or `Convert.FromBase64String()`.

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2018-01-10T20:06:32.667

I had the same problem of extra output. For me it was not encoding-problem, because I was passing it as byte array in BCrypt library. As it is plain-text, I would use space-character as padding before encryption and trim after decryption.

```
int padding = BLOCK_SIZE - (input_len+1)%BLOCK_SIZE;
if(padding && (input_len+padding) <= buf_size)
{
   memset(buf+input_len, ' ', padding);
   input_len += padding;
} 
```

For `128` bit encryption, the block-size is `16`. Note that the `buf_size` should be multiple of the `block-size` to make it work all the time. As we padded the input already, we do not need the padding algorithm in decryption.

```
tdsAlg.Padding = PaddingMode.None; 
```

And at the end of decryption, I would trim the output.

# c# - 将数组中的值与数据库中我的数据的 id 进行比较并显示在数据网格中

> ID：14405061
> 
> 赞同：0
> 
> 时间：2013-01-18T18:14:36.853
> 
> 标签：c#, sql-server, arrays, datagrid

我是 C# 的新手，我有一个具有不同值的数组，如下所示

```
int[] array = { 1, 2, 3, 4, 5, 6 }; 
```

我需要做的是在Sqlserver中将数组的值与我数据库中数据的id相关联，例如，我的数组的第一个值是1，我的数据id的值也是1，我需要显示在一个 DataGrid 这个 id 持有的名称或信息。

**数据库示例：**

*   id 1 ，名称 Francisco，序列号 1234

*   id 2 ，名称 Claudio，序列号 4321

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T18:24:24.373

只需根据存储在数组中的值查询数据库。

```
int[] array = { 1, 2, 3, 4, 5, 6 };
string sql = "";

foreach (int id in array)
{
   // append your ids to variable sql seperated by commas
} 
```

现在您的查询应该是例如：

```
"Select * from Table1 WHERE ID in (" + sql + ")" 
```

PS：不要接受这个查询的用户输入，因为这将是一个潜在的 SQL 注入 :-)

# java - JFreeChart中XYPlot图表下的渐变填充？

> ID：14405062
> 
> 赞同：1
> 
> 时间：2013-01-18T18:14:37.983
> 
> 标签：java, jfreechart, gradient

我可以`XYPlot`在 JFreeChart 中的图表中添加渐变填充吗？

下面的例子：

![图像](../Images/d1e384e0351a282f9c08a57945b7141f.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T19:27:58.220

我没有尝试过，但是[`org.jfree.chart.renderer.xy.StackedXYAreaRenderer`](http://www.jfree.org/jfreechart/api/javadoc/org/jfree/chart/renderer/xy/StackedXYAreaRenderer.html)有一个[`setSeriesFillPaint()`](http://www.jfree.org/jfreechart/api/javadoc/org/jfree/chart/renderer/AbstractRenderer.html#setSeriesFillPaint%28int,%20java.awt.Paint%29)方法并`java.awt.GradientPaint`实现了`Paint`接口。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-08T12:45:37.840

我发现这适用于`XYAreaRenderer`

```
plot.getRenderer().setSeriesPaint(seriesIndex, new GradientPaint(0.0f, 0.0f, new Color(255, 0, 0), 0.0f, 0.0f, new Color(0, 255, 255))); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-10-24T21:26:35.017

只需共享工作代码 - 修复其他公开可用代码中的错误。

```
package gui;

/* ===========================================================
 * JFreeChart : a free chart library for the Java(tm) platform
 * ===========================================================
 *
 * (C) Copyright 2000-2005, by Object Refinery Limited and Contributors.
 *
 * Project Info:  http://www.jfree.org/jfreechart/index.html
 *
 * This library is free software; you can redistribute it and/or modify it
 * under the terms of the GNU Lesser General Public License as published by
 * the Free Software Foundation; either version 2.1 of the License, or
 * (at your option) any later version.
 *
 * This library is distributed in the hope that it will be useful, but
 * WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY
 * or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Lesser General Public
 * License for more details.
 *
 * You should have received a copy of the GNU Lesser General Public
 * License along with this library; if not, write to the Free Software
 * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301,
 * USA.
 *
 * [Java is a trademark or registered trademark of Sun Microsystems, Inc.
 * in the United States and other countries.]
 *
 * ---------------------
 * MyXYAreaRenderer.java
 * ---------------------
 * (C) Copyright 2005, by Object Refinery Limited.
 *
 * Original Author:  David Gilbert (for Object Refinery Limited);
 * Contributor(s):   -;
 *
 * $Id: XYAreaRenderer.java,v 1.12.2.5 2005/12/22 15:53:05 mungady Exp $
 *
 * Changes:
 * --------
 * 22-Dec-2005 : Version 1 (DG);
 *
 *
 */

import model.Globals;
import org.jfree.chart.axis.ValueAxis;
import org.jfree.chart.labels.XYToolTipGenerator;
import org.jfree.chart.plot.CrosshairState;
import org.jfree.chart.plot.PlotOrientation;
import org.jfree.chart.plot.PlotRenderingInfo;
import org.jfree.chart.plot.XYPlot;
import org.jfree.chart.renderer.xy.XYAreaRenderer;
import org.jfree.chart.renderer.xy.XYItemRendererState;
import org.jfree.chart.ui.GradientPaintTransformer;
import org.jfree.chart.ui.StandardGradientPaintTransformer;
import org.jfree.chart.urls.XYURLGenerator;
import org.jfree.data.xy.XYDataset;
import org.jfree.util.ShapeUtilities;

import java.awt.*;
import java.awt.geom.Line2D;
import java.awt.geom.Rectangle2D;

/**
 * Custom renderer.
 */
public class GraphAreaRenderer extends XYAreaRenderer {

    /**
     * A state object used by this renderer.
     */
    static class XYAreaRendererState extends XYItemRendererState {

        /**
         * Working storage for the area under one series.
         */
        public Polygon area;

        /**
         * Working line that can be recycled.
         */
        public Line2D line;

        /**
         * Creates a new state.
         *
         * @param info the plot rendering info.
         */
        public XYAreaRendererState(PlotRenderingInfo info) {
            super(info);
            this.area = null;  //new Polygon();
            this.line = new Line2D.Double();
        }

    }

    /**
     * Constructs a new renderer.
     */
    public GraphAreaRenderer() {
        this(AREA);
    }

    /**
     * Constructs a new renderer.
     *
     * @param type the type of the renderer.
     */
    public GraphAreaRenderer(int type) {
        this(type, null, null);
    }

    /**
     * Constructs a new renderer.
     * <p>
     * To specify the type of renderer, use one of the constants: SHAPES, LINES,
     * SHAPES_AND_LINES, AREA or AREA_AND_SHAPES.
     *
     * @param type             the type of renderer.
     * @param toolTipGenerator the tool tip generator to use
     *                         (<code>null</code> permitted).
     * @param urlGenerator     the URL generator (<code>null</code> permitted).
     */
    public GraphAreaRenderer(int type, XYToolTipGenerator toolTipGenerator,
                             XYURLGenerator urlGenerator) {

        super(type, toolTipGenerator, urlGenerator);
    }

    /**
     * Initialises the renderer and returns a state object that should be
     * passed to all subsequent calls to the drawItem() method.
     *
     * @param g2       the graphics device.
     * @param dataArea the area inside the axes.
     * @param plot     the plot.
     * @param data     the data.
     * @param info     an optional info collection object to return data back to
     *                 the caller.
     * @return A state object for use by the renderer.
     */
    public XYItemRendererState initialise(Graphics2D g2, Rectangle2D dataArea,
                                          XYPlot plot, XYDataset data, PlotRenderingInfo info) {
        XYAreaRendererState state = new XYAreaRendererState(info);
        return state;
    }

    /**
     * Draws the visual representation of a single data item.
     *
     * @param g2             the graphics device.
     * @param state          the renderer state.
     * @param dataArea       the area within which the data is being drawn.
     * @param info           collects information about the drawing.
     * @param plot           the plot (can be used to obtain standard color information
     *                       etc).
     * @param domainAxis     the domain axis.
     * @param rangeAxis      the range axis.
     * @param dataset        the dataset.
     * @param series         the series index (zero-based).
     * @param item           the item index (zero-based).
     * @param crosshairState crosshair information for the plot
     *                       (<code>null</code> permitted).
     * @param pass           the pass index.
     */
    public void drawItem(Graphics2D g2, XYItemRendererState state,
                         Rectangle2D dataArea, PlotRenderingInfo info, XYPlot plot,
                         ValueAxis domainAxis, ValueAxis rangeAxis, XYDataset dataset,
                         int series, int item, CrosshairState crosshairState, int pass) {

        Globals.LogManager().logDbg(String.format("Item %d ", item));

        if (!getItemVisible(series, item))
            return;

        assert (plot.getOrientation() == PlotOrientation.VERTICAL);

        XYAreaRendererState areaState = (XYAreaRendererState) state;

        // get the data point...
        double x1 = dataset.getXValue(series, item);
        double y1 = dataset.getYValue(series, item);

        if (Double.isNaN(y1))
            y1 = 0.0;

        double transX1 = domainAxis.valueToJava2D(x1, dataArea,
                plot.getDomainAxisEdge());
        double transY1 = rangeAxis.valueToJava2D(y1, dataArea,
                plot.getRangeAxisEdge());

        // get the previous point and the next point so we can calculate a
        // "hot spot" for the area (used by the chart entity)...
        int itemCount = dataset.getItemCount(series);
        double x0 = dataset.getXValue(series, Math.max(item - 1, 0));
        double y0 = dataset.getYValue(series, Math.max(item - 1, 0));

        if (Double.isNaN(y0))
            y0 = 0.0;

        double transX0 = domainAxis.valueToJava2D(x0, dataArea,
                plot.getDomainAxisEdge());
        double transY0 = rangeAxis.valueToJava2D(y0, dataArea,
                plot.getRangeAxisEdge());

        double x2 = dataset.getXValue(series, Math.min(item + 1,
                itemCount - 1));
        double y2 = dataset.getYValue(series, Math.min(item + 1,
                itemCount - 1));

        if (Double.isNaN(y2))
            y2 = 0.0;
/*
        double transX2 = domainAxis.valueToJava2D(x2, dataArea,
                plot.getDomainAxisEdge());
        double transY2 = rangeAxis.valueToJava2D(y2, dataArea,
                plot.getRangeAxisEdge());
 */

        double transZero = rangeAxis.valueToJava2D(0.0, dataArea,
                plot.getRangeAxisEdge());
/*
        Polygon hotspot = null;

        hotspot = new Polygon();
        hotspot.addPoint((int) ((transX0 + transX1) / 2.0),
                (int) transZero);
        hotspot.addPoint((int) ((transX0 + transX1) / 2.0),
                (int) ((transY0 + transY1) / 2.0));
        hotspot.addPoint((int) transX1, (int) transY1);
        hotspot.addPoint((int) ((transX1 + transX2) / 2.0),
                (int) ((transY1 + transY2) / 2.0));
        hotspot.addPoint((int) ((transX1 + transX2) / 2.0),
                (int) transZero);
 */

        if (state.getFirstItemIndex() == item) {  // create a new area polygon for the series
            areaState.area = new Polygon();
            // the first point is (x, 0)
            double zero = rangeAxis.valueToJava2D(0.0, dataArea,
                    plot.getRangeAxisEdge());
            areaState.area.addPoint((int) transX1, (int) zero);
            Globals.LogManager().logDbg(String.format("addPoint1 %d %d", (int) transX1, (int) zero));
        }

        // Add each point to Area (x, y)
        areaState.area.addPoint((int) transX1, (int) transY1);
        Globals.LogManager().logDbg(String.format("addPoint2 %d %d", (int) transX1, (int) transY1));

        PlotOrientation orientation = plot.getOrientation();
        Paint paint = getItemPaint(series, item);
        Stroke stroke = getItemStroke(series, item);
        g2.setPaint(paint);
        g2.setStroke(stroke);

        Shape shape = null;
        if (getPlotShapes()) {
            shape = getItemShape(series, item);
            shape = ShapeUtilities.createTranslatedShape(shape, transX1, transY1);
            g2.draw(shape);
        }

        if (getPlotLines()) {
            if (item > 0) {
                areaState.line.setLine(transX0, transY0, transX1, transY1);
                g2.draw(areaState.line);
            }
        }

        // Check if the item is the last item for the series.
        // and number of items > 0\.  We can't draw an area for a single point.
        if (getPlotArea() && item > 0 && state.getLastItemIndex() == item) {

            areaState.area.addPoint((int) transX1, (int) transZero);
            Globals.LogManager().logDbg(String.format("addPoint3 %d %d", (int) transX1, (int) transZero));

            Paint fillPaint = getItemFillPaint(series, item);
            if (fillPaint instanceof GradientPaint) {
                GradientPaint gp = (GradientPaint) fillPaint;
                GradientPaintTransformer t = new StandardGradientPaintTransformer();
                fillPaint = t.transform(gp, areaState.area.getBounds());
            }
            g2.setPaint(fillPaint);
            g2.fill(areaState.area);

            for(int i=0;i<areaState.area.npoints;i++)
                Globals.LogManager().logDbg(String.format("Polygon:  %d %d ", areaState.area.xpoints[i], areaState.area.ypoints[i]));

            // draw an outline around the Area.
            if (isOutline()) {
                g2.setStroke(getItemOutlineStroke(series, item));
                g2.setPaint(getItemOutlinePaint(series, item));
                g2.draw(areaState.area);
            }

        }

        //updateCrosshairValues(  crosshairState, x1, y1, transX1, transY1, orientation );

        // collect entity and tool tip information...
       /* if (state.getInfo() != null) {
            EntityCollection entities = state.getEntityCollection();
            if (entities != null && hotspot != null) {
                String tip = null;
                XYToolTipGenerator generator
                        = getToolTipGenerator(series, item);
                if (generator != null) {
                    tip = generator.generateToolTip(dataset, series, item);
                }
                String url = null;
                if (getURLGenerator() != null) {
                    url = getURLGenerator().generateURL(dataset, series, item);
                }
                XYItemEntity entity = new XYItemEntity(hotspot, dataset,
                        series, item, tip, url);
                entities.add(entity);
            }
        }

        */

    }

} 
```

# python - 如何查看 pytest 运行期间创建的正常打印输出？

> ID：14405063
> 
> 赞同：631
> 
> 时间：2013-01-18T18:14:38.833
> 
> 标签：python, logging, output, pytest

有时我只想在我的代码中插入一些打印语句，然后看看我在执行它时会打印出什么。我常用的“锻炼”方法是使用现有的 pytest 测试。但是当我运行这些时，我似乎看不到任何标准输出（至少在我的 IDE PyCharm 中）。

有没有一种简单的方法可以在 pytest 运行期间查看标准输出？

* * *

## 回答 #1

> 赞同：817
> 
> 时间：2013-01-19T12:22:57.527

该[`-s`开关](https://docs.pytest.org/en/latest/capture.html#setting-capturing-methods-or-disabling-capturing)禁用每次测试捕获（仅当测试失败时）。

`-s`相当于`--capture=no`。

* * *

## 回答 #2

> 赞同：175
> 
> 时间：2019-12-03T12:03:38.613

pytest captures the stdout from individual tests and displays them only on certain conditions, along with the summary of the tests it prints by default.

[Extra summary info](http://doc.pytest.org/en/latest/usage.html) can be shown using the '-r' option:

```
pytest -rP 
```

shows the captured output of passed tests.

```
pytest -rx 
```

shows the captured output of failed tests (default behaviour).

The formatting of the output is prettier with -r than with -s.

* * *

## 回答 #3

> 赞同：60
> 
> 时间：2016-06-26T05:58:13.403

在对已[接受答案的](https://stackoverflow.com/a/14414325/2809027)[赞成评论](https://stackoverflow.com/questions/14405063/how-can-i-see-normal-print-output-created-during-pytest-run#comment47203398_14414325)中，[乔](https://stackoverflow.com/users/1741414/joe)问道：

> 有什么方法可以打印到控制台*并*捕获输出以便它显示在 junit 报告中？

在 UNIX 中，这通常称为[teeing](http://linux.die.net/man/1/tee)。理想情况下， py.test 的默认设置是发球而不是捕获。非理想情况下，py.test 和任何现有的第三方 py.test 插件（*我知道，无论如何*）都不支持 teeing——尽管 Python 微不足道地支持 teeing [out-of-the-box](http://shallowsky.com/blog/programming/python-tee.html)。

Monkey-patching py.test 做*任何*不受支持的事情都是不平凡的。为什么？因为：

*   Most py.test functionality is locked behind a private `_pytest` package *not* intended to be externally imported. Attempting to do so without knowing what you're doing typically results in the public `pytest` package raising obscure exceptions at runtime. ^(*Thanks alot, py.test. Really robust architecture you got there.*)
*   Even when you *do* figure out how to monkey-patch the private `_pytest` API in a safe manner, you have to do so *before* running the public `pytest` package run by the external `py.test` command. You *cannot* do this in a plugin (e.g., a top-level `conftest` module in your test suite). By the time py.test lazily gets around to dynamically importing your plugin, any py.test class you wanted to monkey-patch has long since been instantiated – and you do *not* have access to that instance. This implies that, if you want your monkey-patch to be meaningfully applied, you can no longer safely run the external `py.test` command. Instead, you have to wrap the running of that command with a custom setuptools `test` command that (in order):
    1.  Monkey-patches the private `_pytest` API.
    2.  Calls the public `pytest.main()` function to run the `py.test` command.

This answer monkey-patches py.test's `-s` and `--capture=no` options to capture stderr but *not* stdout. By default, these options capture neither stderr nor stdout. This isn't quite teeing, of course. But every great journey begins with a tedious prequel everyone forgets in five years.

Why do this? I shall now tell you. My py.test-driven test suite contains slow functional tests. Displaying the stdout of these tests is helpful and reassuring, preventing [leycec](https://stackoverflow.com/users/2809027/cecil-curry) from reaching for `killall -9 py.test` when yet another long-running functional test fails to do anything for weeks on end. Displaying the stderr of these tests, however, prevents py.test from reporting exception tracebacks on test failures. Which is completely unhelpful. Hence, we coerce py.test to capture stderr but *not* stdout.

Before we get to it, this answer assumes you already have a custom setuptools `test` command invoking py.test. If you don't, see the [*Manual Integration*](https://pytest.org/latest/goodpractices.html#manual-integration) subsection of py.test's well-written [*Good Practices*](https://pytest.org/latest/goodpractices.html) page.

Do *not* install [pytest-runner](http://pypi.python.org/pypi/pytest-runner), a third-party setuptools plugin providing a custom setuptools `test` command also invoking py.test. If pytest-runner is already installed, you'll probably need to uninstall that pip3 package and then adopt the manual approach linked to above.

Assuming you followed the instructions in [*Manual Integration*](https://pytest.org/latest/goodpractices.html#manual-integration) highlighted above, your codebase should now contain a `PyTest.run_tests()` method. Modify this method to resemble:

```
class PyTest(TestCommand):
             .
             .
             .
    def run_tests(self):
        # Import the public "pytest" package *BEFORE* the private "_pytest"
        # package. While importation order is typically ignorable, imports can
        # technically have side effects. Tragicomically, that is the case here.
        # Importing the public "pytest" package establishes runtime
        # configuration required by submodules of the private "_pytest" package.
        # The former *MUST* always be imported before the latter. Failing to do
        # so raises obtuse exceptions at runtime... which is bad.
        import pytest
        from _pytest.capture import CaptureManager, FDCapture, MultiCapture

        # If the private method to be monkey-patched no longer exists, py.test
        # is either broken or unsupported. In either case, raise an exception.
        if not hasattr(CaptureManager, '_getcapture'):
            from distutils.errors import DistutilsClassError
            raise DistutilsClassError(
                'Class "pytest.capture.CaptureManager" method _getcapture() '
                'not found. The current version of py.test is either '
                'broken (unlikely) or unsupported (likely).'
            )

        # Old method to be monkey-patched.
        _getcapture_old = CaptureManager._getcapture

        # New method applying this monkey-patch. Note the use of:
        #
        # * "out=False", *NOT* capturing stdout.
        # * "err=True", capturing stderr.
        def _getcapture_new(self, method):
            if method == "no":
                return MultiCapture(
                    out=False, err=True, in_=False, Capture=FDCapture)
            else:
                return _getcapture_old(self, method)

        # Replace the old with the new method.
        CaptureManager._getcapture = _getcapture_new

        # Run py.test with all passed arguments.
        errno = pytest.main(self.pytest_args)
        sys.exit(errno) 
```

To enable this monkey-patch, run py.test as follows:

```
python setup.py test -a "-s" 
```

Stderr but *not* stdout will now be captured. Nifty!

Extending the above monkey-patch to tee stdout and stderr is left as an exercise to the reader with a barrel-full of free time.

* * *

## 回答 #4

> 赞同：53
> 
> 时间：2016-02-04T17:26:38.360

运行测试时使用该`-s`选项。运行测试时，所有打印语句都`exampletest.py`将打印在控制台上。

```
py.test exampletest.py -s 
```

* * *

## 回答 #5

> 赞同：37
> 
> 时间：2017-01-08T13:38:22.430

According to [pytest documentation](http://doc.pytest.org/en/latest/capture.html#accessing-captured-output-from-a-test-function), version 3 of pytest can temporary disable capture in a test:

```
def test_disabling_capturing(capsys):
    print('this output is captured')
    with capsys.disabled():
        print('output not captured, going directly to sys.stdout')
    print('this output is also captured') 
```

* * *

## 回答 #6

> 赞同：24
> 
> 时间：2020-04-10T22:09:15.310

`pytest --capture=tee-sys` was recently added ([v5.4.0](https://docs.pytest.org/en/stable/changelog.html#features)). You can capture as well as see the output on stdout/err.

* * *

## 回答 #7

> 赞同：22
> 
> 时间：2017-12-14T15:01:07.523

* * *

Try **`pytest -s -v test_login.py`** for more info in console.

**`-v`** it's a short **`--verbose`**

**`-s`** means 'disable all capturing'

* * *

* * *

* * *

## 回答 #8

> 赞同：8
> 
> 时间：2020-06-22T13:31:44.260

You can also enable [live-logging](https://docs.pytest.org/en/stable/logging.html#live-logs) by setting the following in `pytest.ini` or `tox.ini` in your project root.

```
[pytest]
log_cli = True 
```

Or specify it directly on cli

```
pytest -o log_cli=True 
```

* * *

## 回答 #9

> 赞同：6
> 
> 时间：2020-10-01T13:25:23.170

```
pytest test_name.py -v -s 
```

Simple!

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2019-02-06T03:47:38.127

If you are using PyCharm IDE, then you can run that individual test or all tests using Run toolbar. The Run tool window displays output generated by your application and you can see all the print statements in there as part of test output.

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2021-03-08T14:27:22.073

I would suggest using -h command. There're quite interesting commands might be used for. but, for this particular case: **-s** *shortcut for --capture=no.* is enough

```
pytest <test_file.py> -s 
```

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2021-05-05T02:01:22.317

If you are using `logging`, you need to specify to turn on logging output in addition to `-s` for generic stdout. Based on [Logging within pytest tests](https://stackoverflow.com/questions/4673373/logging-within-pytest-tests), I am using:

`pytest --log-cli-level=DEBUG -s my_directory/`

# jquery - $.post 到 php 页面的 jQuery 错误“this”未定义

> ID：14405070
> 
> 赞同：0
> 
> 时间：2013-01-18T18:15:12.000
> 
> 标签：jquery, .post

我对以下代码有同样的问题：

```
function getpgisdata() {
    sdata = ads.d;
    var send = $.post("csqcity.php", { variable:sdata }, function pgisquery(data) {
          alert("success");
       })
         .success(function() { alert("second success"); })
         .error(function() { alert("error"); })
         .complete(function() { alert("complete"); });
    send.complete(function(){ alert("second complete");
}); 
```

该函数由以下方式调用：

```
<div class="wrapSearch">
    <div>
        <input id="searchTextField" type="text" size="50" placeholder="Enter an address...">
        <input type="submit" name="search" id="search1" onclick="getpgisdata()">
    </div>
 <div class="listWrap" id="listWrap1">
    <ul class="searchList" id="searchList1">
    </ul>
 </div> 
```

错误是：使用 Firebug

```
 TypeError: this is undefined

...n!a?l:Sd(this.lat(),a.lat())&&Sd(this.lng(),a.lng())};P[H].equals=P[H].b;P[H].la...
{main,places}.js (line 11) 
```

与谷歌

```
Uncaught TypeError: Cannot call method 'lat' of undefined
                                                                %7Bmain,places%7D.js:11 
```

csqcity.php 包含：

index.html 中引用了以下库：

```
<script src="https://maps.googleapis.com/maps/api/js?v=3.exp&sensor=false&libraries=places"></script>
<link rel="stylesheet" type="text/css" href="http://dev.openlayers.org/releases/OpenLayers-2.12/theme/default/style.css"/>
<link rel="stylesheet" type="text/css" href="http://dev.openlayers.org/releases/OpenLayers-2.12/examples/style.css"/>
<script type="text/javascript" src="http://dev.openlayers.org/releases/OpenLayers-2.12/OpenLayers.js"></script>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
<script src="//ajax.googleapis.com/ajax/libs/jqueryui/1.9.2/jquery-ui.min.js"></script> 
```

我还有另外 2 个功能。一个是 Google Autocompleter，另一个绘制 Openlayers 地图。该错误与谷歌库有关，因此我还附上了自动完成器代码：

```
function initialize() {
    input = document.getElementById('searchTextField');
    var options = {
        componentRestrictions: {country: 'us'},
        //componentrestrictions: {administrative_area2: 'tx'}
    };
    autocomplete = new google.maps.places.Autocomplete(input, options);
    google.maps.event.addListener(autocomplete, 'place_changed', function() {
      //var place = autocomplete.getPlace();
      var place = autocomplete.getPlace();
      ads.d = place.geometry.location;
    });
  }
  google.maps.event.addDomListener(window, 'load', initialize); 
```

有人有什么想法吗？先感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T15:04:49.683

在我检查了“this”值之后，我设法让代码工作。在我的代码中，这是 DOM 文档。因此，首先，我将 $.post 包含在触发它的 HTML 输入提交元素中，以将 this 作为 HTML 输入，并使用自动完成器的关联输入文本的值。我犯的另一个错误是将所需的数据存储在全局变量中，这触发了“这是未定义的”错误。所以我调用了与 HTML 输入提交相关的 HTML 输入文本（在我的例子中就是这样）。

函数的代码变成了：

```
 $(document).ready(function () {
      $('#search1').click(function(){
           sdata = $('#searchTextField').val();
        if( sdata == undefined || sdata == 'Enter an address...' || sdata < 4 ){
        alert('Please insert or choose an address to proceed.');
        } else {
      $.post(
            'csqcity.php',
            { 'variable' : sdata },
            function( r_data ){
                alert(r_data);
            }       
        );
        }
      });
  }); 
```

$.post 成功了！

感谢您的建议！他们帮助我理解了这个问题。

# sas - 为 Jedit 编写插件的基础知识

> ID：14405075
> 
> 赞同：1
> 
> 时间：2013-01-18T18:15:41.120
> 
> 标签：sas, jedit

谁能指导我学习为 Jedit 编写插件的教程？我有一个使用 Jedit 作为 SAS 编辑器的梦想。目前，它会进行语法高亮，但我觉得通过更好地充实这些想法，它已经或可以变得更好。

几个问题：

1.  你可以在 Jedit 中启用制表符补全吗？
2.  你能指定以某种语法开始和结束的“环境”吗？（例如，“保持”这个词在两​​行之间有意义`data xxx;`，`run;`但在`proc sort data=xxx;`和之间没有意义。`run;`因此，突出显示它对没有经验的编码人员会产生反指导作用。
3.  您能否将变量存储在工作场所并从下拉菜单中引用它们（例如数据集中的变量名称）
4.  您可以从 shell/终端执行代码并将 .log 文件返回到 Jedit 消息窗口吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T20:12:12.773

1.  您是在谈论微软的智能感知或自动完成功能吗？如果是这样，一个穷人对自动完成的近似是在输入部分单词后使用键盘快捷键`ctrl`+ 。`b`它将根据所有打开的缓冲区中的所有单词完成单词。 [有关自动完成的更多信息，请参阅此问题。](https://stackoverflow.com/questions/4661051/intellisense-in-jedit)

2.  在语法高亮中，您可以为不同的代码块创建委托语法，以便根据不同的规则突出显示。grep 在您的 jedit`mode`目录中查找“委托”。

3.  不完全确定您想要什么，但 jedit 确实会跟踪您从文本中获取的一堆最新副本。Emacs 将其称为“kill ring”。对于我的jedit设置，我必须`Paste Previous...`绑定到`ctrl`++ 。我相信这是默认的快捷方式绑定。这将显示您最近的约 20 个文本块副本，您可以选择要使用的副本文本块。`e` `ctrl``v`

4.  是的，您可以在 shell 中执行任务并将它们传送回 jedit。 [看到这个问题。](https://stackoverflow.com/questions/2007425/get-output-from-a-process) 以下是我如何执行`bk edit`并重新加载缓冲区。它不会从 shell 获得输出，但会执行 shell 命令：

    ```
    import javax.swing.JOptionPane;
    import java.io.File;
    File f = new File(buffer.getPath());
    String SCCS_path = f.getParent()+"/SCCS";
    String bk_path =  "/usr/local/bin/bk";
    if ( !new File(SCCS_path).exists()) {
        bk_path = "/usr/bin/bk";
    }
    Runtime.getRuntime().exec(
        bk_path+ " edit "+
        buffer.getPath());
    Thread.currentThread().sleep(2000);
    buffer.reload(view); 
    ```

顺便说一句，宏在 jedit 中非常强大。`Macros`您可以使用->记录您在 jedit 中所做的事情，`Record Macro...`它将生成等效的脚本。

# objective-c - 10.8 上的 WebKit：如何以编程方式设置 input[type=file] 字段的值？

> ID：14405077
> 
> 赞同：4
> 
> 时间：2013-01-18T18:15:43.397
> 
> 标签：objective-c, cocoa, webkit, osx-mountain-lion, forms

**设置**：

*   Mac OS X 10.8.2

*   链接到操作系统提供的 WebKit 框架版本的普通 Cocoa 应用程序。具体来说，内容`/System/Library/Frameworks/WebKit.framework/Versions/A/Resources/version.plist`有：

```
    <plist 版本="1.0">
    <字典>
        <key>构建版本</key>
        <string>5</string>
        <key>CFBundleShortVersionString</key>
        <string>8536</string>
        <key>CFBundleVersion</key>
        <string>8536.26.14</string>
        <key>项目名称</key>
        <string>WebKit</string>
        <key>来源版本</key>
        <string>7536026014000000</string>
    </dict>
    </plist>

```

* * *

我有一个基于 WebKit 的 Cocoa 应用程序，它在 WebView 中加载包含普通 HTML 表单的 HTML 文档。HTML 表单包含一个文件选择器输入字段，如下所示：

```
<form name="foo">
    <input type="file" name="bar">
</form> 
```

我想以编程方式设置这个文件选择器的值（如果可能，从 Objective-C，但我会做任何工作）。

据我所知，这种方法从未奏效：

```
DOMHTMLInputElement *inputEl = ... // fetch input element
[inputEl setValue:@"some/file.txt"]; 
```

我假设 WebKit 中有一些安全限制/策略阻止它工作。我认为这是 WebKit 中有意的安全功能，而不是错误。

* * *

然而，在 OS X 10.7 Lion 中，我**可以**通过一些 hack 来解决这个限制。

在 Lion 中，您可以通过编程方式**单击**该`input`元素：

```
#pragma mark -
#pragma mark WebFrameLoadDelegate

- (void)webView:(WebView *)wv didFinishLoadForFrame:(WebFrame *)frame {
    if (frame != [wv mainFrame]) return;

    DOMAbstractView *win = (id)[frame windowObject];
    DOMDocument *doc = [win document];
    DOMHTMLFormElement *formEl = (id)[[doc forms] namedItem:@"foo"];
    DOMHTMLInputElement *inputEl = (id)[[formEl elements] namedItem:@"bar"];
    [inputEl click];
} 
```

这会产生对`-[WebUIDelegate webView:runOpenPanelForFileButtonWithResultListener:]`. 然后，您可以实现该委托方法以立即以编程方式设置结果侦听器的值：

```
#pragma mark -
#pragma mark WebUIDelegate

- (void)webView:(WebView *)wv runOpenPanelForFileButtonWithResultListener:(id<WebOpenPanelResultListener>)listener {
    [listener chooseFilename:@"some/file.txt"];
} 
```

虽然这是一个丑陋的黑客，但它工作得很好。`input`它具有立即设置文件上传元素值的预期效果。屏幕上不会出现“打开面板”。

* * *

恐怕 WebKit 已停止在 10.8 附带的版本中允许这样做。改变的部分是：

```
[inputEl click]; 
```

这不再在 10.8 附带的 WebKit 中的元素上产生点击事件。

我尝试了其他在 10.7 上有效的点击方法，但在 10.8 上不再有效：

```
DOMUIEvent *evt = (id)[doc createEvent:@"UIEvents"];
[evt initUIEvent:@"click" canBubble:YES cancelable:YES view:win detail:1];
[inputEl dispatchEvent:evt]; 
```

这些方法在 10.7 中有效，但在 10.8 中无效。

* * *

**那么**，有什么方法可以在 10.8 中以编程方式设置此文件选择器的值？

**注意**：我不想在我的应用程序中发布自定义版本的 WebKit **。**除此之外，我愿意接受任何建议（ObjC 或 JS 或其他）。

如何在 10.8 附带的 WebKit 中以编程方式设置文件选择器的值？

我在这里有一个示例测试项目（简化的测试用例）供您使用：http: [//tod.nu/FileUploadTest.zip](http://tod.nu/FileUploadTest.zip)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-18T21:02:04.440

如果您通过 AppKit 事件系统调度事件，这将起作用。就像是：

```
NSView *docView = [[[webView mainFrame] frameView] documentView];
NSRect docFrame = [docView frame];

NSPoint point = [el boundingBox].origin;
point.y = docFrame.size.height - point.y;

NSEvent *evt = [NSEvent mouseEventWithType:NSLeftMouseDown location:point modifierFlags:0 timestamp:[[NSDate date] timeIntervalSinceReferenceDate] windowNumber:[self.webView.window windowNumber] context:0 eventNumber:0 clickCount:1 pressure:0];
[self.webView.window sendEvent:evt];

evt = [NSEvent mouseEventWithType:NSLeftMouseUp location:point modifierFlags:0 timestamp:[[NSDate date] timeIntervalSinceReferenceDate] windowNumber:[self.webView.window windowNumber] context:0 eventNumber:0 clickCount:1 pressure:0];
[self.webView.window sendEvent:evt]; 
```

可能有更好的方法来进行坐标系转换，但这并不是真正重要的部分。

# html - 如果我使用引导程序，为什么我会得到错误的对齐？

> ID：14405078
> 
> 赞同：1
> 
> 时间：2013-01-18T18:15:46.517
> 
> 标签：html, css, twitter-bootstrap, css-float

如果我使用引导程序，它会弄乱我页面上的对齐方式。成员名称应该出现在图标旁边，但使用 Bootstrap，它们会与图标重叠。
我怎样才能解决这个问题？

![在此处输入图像描述](../Images/4d9ee6d5fa469ba166d8eab5376b248d.png)

此外，当浏览器窗口变小时，方形线也会变得混乱。当窗口很小时，我希望数据有边框。

所以我不希望它看起来像这样：

![在此处输入图像描述](../Images/ae8842f7197e397b8e86a1ebed4d9620.png)

而是像这样：

![在此处输入图像描述](../Images/d8a7cf7cb0f4027b6c00c99d2d71c631.png)

如果可能的话，我想要这些图标，并且名字在中间而不是在顶部。

**演示** [http://jsfiddle.net/sbq7X/](http://jsfiddle.net/sbq7X/)

**HTML**

```
 <div class="store_row">
    <div class="store_left">
        <div class="store_title">walmart</div>
        <div class="store_location">Located in California</div>
    </div>

    <div class="store_right">
        <div class="store_icon">
                <img class="img-polaroid" src="http://www.miraiha.net/wpblog/wp-content/uploads/2010/10/designreviver-free-twitter-social-icon-300x266.jpg" />
        </div>
        <div class="introduction">
            <div class="name1">John Tailor</div>
            <div class="name2">Mike Smith</div>
            <div class="name3">Jessica Swan</div>
        </div>
    </div>

</div>

    <div class="store_row">
    <div class="store_left">
        <div class="store_title">walmart</div>
        <div class="store_location"><span class='text-error'>Located in California</span></div>
    </div>

    <div class="store_right">
        <div class="store_icon">
                <img class="img-polaroid" src="http://media-cache-ec1.pinterest.com/avatars/walmarthub-1349815045_600.jpg" />
        </div>
        <div class="introduction">
            <div class="name1">John Tailor</div>
            <div class="name2">Mike Smith</div>
            <div class="name3">Jessica Swan</div>
        </div>
    </div> 
```

**CSS**

```
div.store_row{
    min-width: 300px;
    margin-bottom: 20px;
    margin-left: 10px;
    margin-right: 10px;
    border:1px solid;
    display:table;
}

div.store_left{
    width: 300px;
    display:inline-block;
    vertical-align:top;    
}

div.store_right{
    width: 300px;   
    display:inline-block;
    vertical-align:top;
    background-color: #FFFFFF;
}

div.store_title{
    background-color: #000000;
    color: #FFFFFF;
    height: 35px;
    padding:5px;
}

div.store_location{
    height: 35px;  
    border-right:1px solid;
    background-color: #FFFFFF;
    padding:5px;
}

div.store_icon{
    width: 70px;
    height: 70px;
    display:inline-block;
}

div.store_icon img{
    width:100%;
    height:100%;
}

div.introduction{
    display:inline-block;
    vertical-align:top;
    width:200px;
    text-align: left;
}

.... and bootstrap 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T19:50:49.613

`img-polaroid`类有 4px 填充，它会导致问题：

```
.img-polaroid {
  padding: 4px;
  background-color: #fff;
  border: 1px solid #ccc;
  border: 1px solid rgba(0, 0, 0, 0.2);
  -webkit-box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
  -moz-box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
} 
```

查看它被移除的[小提琴。](http://jsfiddle.net/uzYBN/)

编辑：对齐工作也很好。所有元素都有静态宽度，它们对于小提琴来说太宽了。我已经减小了它们的大小，所以它们现在是内联的。

# php - 如何从 mysql 数据库中检索和更新单选按钮的数据？

> ID：14405079
> 
> 赞同：0
> 
> 时间：2013-01-18T18:15:49.283
> 
> 标签：php, mysql, insert, radio-button, edit

代码正在尝试：

```
<input type="radio" name="type" value="Male" <?php if ($type == 'Male') echo 'checked="checked"'; ?>"> Male 
```

或者

```
 <input type="radio" name="gender" value="<?php echo $gender ?>"/>Female 
```

这个对吗？？

我在 SO 中引用了 2 个链接，但我没有正确使用单选按钮 .... 建议总是欢迎 ...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T18:17:32.443

第一个是正确的：

```
<input type="radio" name="type" value="Male" <?php if ($type == 'Male') echo 'checked="checked"'; ?>"> Male 
```

# svn - 将文件夹移动到另一个存储库

> ID：14405083
> 
> 赞同：2
> 
> 时间：2013-01-18T18:15:55.860
> 
> 标签：svn, tortoisesvn, springloops

我有一个结构如下的 SVN 存储库：

根

*   代码
*   数据
*   网络

但是，似乎我的 WEB 文件夹是与结构的其余部分分开的存储库，这意味着它下面有自己的 .svn 文件夹（WEB/.svn），当我签入 ROOT 文件夹时，它不包括 WEB 文件夹.

我想将 .svn 文件夹从 WEB 下移动并将其放在 ROOT 下（或将它与现在下面的文件夹合并），或者以某种方式将该 WEB 文件夹加入到 ROOT 存储库中，以便当我签入时，我可以签入一次完成所有事情，而不必每次都进行 2 次签到。

有没有办法在不丢失 WEB 文件夹的签入历史的情况下做到这一点？

我在 Windows 上为我的客户端使用 Tortoise SVN 1.7.10（升级到 1.7 是首先导致这个问题的原因）

我正在为我的服务器使用 Springloops (www.slsapp.com)。不知道我有多少访问权限在那里运行命令 - 有人知道吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T23:58:25.597

**前言**：不要混入混杂的存储库和工作副本中。`/.svn`dir 是 Working Copy 的属性，你可以从Repository的**任何树的子树中获取。**顺便说一句，有问题**的真实**URL 和路径将有助于更轻松地调试问题

好的，我会试着敏感一些时间并重建 sutuation。修正我的假设，如果它们在某个地方是错误的——不知何故

*   您有带有目录的存储库（直接在根目录下，而不是主干？） /code + /data + /web
*   `URL/web`你从路径检查你的厕所
*   现在你想让你的 WC 链接到`URL`

如果以上都是正确的，你有两种方法

*   a) 从当前 WC 提交本地更改 b) 将新工作副本从 / c) 签出到新位置 c) 删除旧 WC 并使用新 WC
*   您可以*尝试*（没有保证，我懒得测试）将当前 WC 切换到 Repository 内的新挂载点：`svn switch ^/`并在切换后更新您的 WC ( `svn up`)，以便从存储库中获取完整更新的树

第一种方式更快、更简单、更省事

# ios - 触摸控件时取消UITableView的滚动

> ID：14405084
> 
> 赞同：0
> 
> 时间：2013-01-18T18:15:59.663
> 
> 标签：ios, uitableview, uiscrollview

我有一个 UITableView，顶部有一个分段的 UIBarButtonItem，我用它来切换列表的范围。范围可以是成分或配方，并且范围会切换列表的内容。

我想在两个范围内独立保留滚动位置，以便在来回切换时，列表保持其位置。`tableView.contentOffset`我通过在切换时保存和恢复值来实现这一点。

我要解决的问题与滚动动量有关：如果用户“快速”滚动然后切换范围，则滚动的动量将转移到另一个列表，这意味着该列表恢复滚动。

切换范围时如何取消滚动？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T18:50:50.017

看看[这个问题](https://stackoverflow.com/questions/3410777/how-can-i-programmatically-force-stop-scrolling-in-a-uiscrollview)。它是关于如何杀死 UIScrollView 滚动的，但 UITableView 只是 UIScrollView 的一个子类，所以它也应该可以工作。

# silverlight - 在 MVVM 样式的 Windows Phone 应用程序中绑定用户控件依赖项属性

> ID：14405089
> 
> 赞同：0
> 
> 时间：2013-01-18T18:16:16.277
> 
> 标签：silverlight, windows-phone-7, wpf-controls, windows-phone-8, windows-phone

我现在在 Windows Phone 应用程序中绑定一些自定义控件时遇到了一些问题。通常这从来都不是问题，但显然我今天无法理解这一点。

所以我正在做一个很好的 MVVM 样式设置。我的页面有一个视图和一个视图模型。现在在 WebClient 回调中，我将视图的 dataContext 分配给我的 ViewModel 中的模型列表，到目前为止非常简单......现在在我的视图中，我在数据模板中创建了一个带有自定义控件的 ListBox，它基本上是一个单元格名单。我再次将我的用户控件 dataContext 设置为绑定，并将所有模型值绑定到常规 UI 元素没有问题。

这是一个示例：

```
<Grid Grid.Column="0">
            <Image Source="{Binding SmallPath}" VerticalAlignment="Top"/>
        </Grid>

        <Grid Grid.Column="1">
            <StackPanel Margin="12,0,0,0">
                <TextBlock x:Name="MemberId_TextBlock" Text="{Binding MemberId}" FontSize="28"
                           Margin="0,-8,0,0"
                           Foreground="{StaticResource PhoneForegroundBrush}"/>
                <StackPanel Orientation="Horizontal" Margin="0,-11,0,0">
                    <TextBlock Text="{Binding DaysReported}" FontSize="42"
                               Margin="0,0,0,0"
                               Foreground="{StaticResource PhoneAccentBrush}"/>
                    <TextBlock Text="days" FontSize="24"
                               Margin="3,19,0,0"
                               Foreground="{StaticResource PhoneSubtleBrush}"/>
                </StackPanel>
            </StackPanel>
        </Grid> 
```

那在我的用户控件中，这是用户控件所在的视图：

```
<Grid x:Name="LayoutRoot" Background="Transparent">
    <ListBox Name="TopSpotter_ListBox" ItemsSource="{Binding}">
        <ListBox.ItemTemplate>
            <DataTemplate>
                <StackPanel>
                    <!--<TextBlock Text="{Binding MemberId}"/>-->
                    <controls:TopSpotterItemControl DataContext="{Binding}"/>
                    <Grid Height="18"/>
                </StackPanel>
            </DataTemplate>
        </ListBox.ItemTemplate>
    </ListBox>
</Grid> 
```

现在这已经足够好了，但是我想要在我的视图中做的是从我的模型中设置数据，比如布尔值，确定我是否应该显示某些网格等。所以如果我尝试在我的控件中显式设置依赖属性，它会触发并例如，将在 Getter/Setters 中运行逻辑。但是，如果我尝试从绑定源设置这些自定义对象，它实际上不会设置。

这是有效的：

```
<controls:TopSpotterItemControl ChampVisibility="True"> 
```

这种方式将触发 ChampVisibility 属性，然后在用户控件后面的代码中我可以设置可见性。

这是失败的，但我想工作：

```
<controls:TopSpotterItemControl ChampVisibility="{Binding IsChamp"> 
```

此外，我仍然可以将 DataContext 设置为 {Binding} 并且结果将保持不变。

在这种情况下，IsChamp 是我的模型的一部分，我想绑定到这个用户控件，我猜它来自 viewModel 的视图上设置的 dataContext。我不确定我能做些什么来让绑定工作等，而不必设置自定义属性。

最后，这是我的用户控件：

```
public partial class TopSpotterItemControl : UserControl
{
    public string MemberId
    {
        get
        {
            return this.MemberId_TextBlock.Text;
        }
        set
        {
            this.MemberId_TextBlock.Text = value;
        }
    }

    public bool ChampVisibility {
        set
        {
            if (value)
            {
                this.Champ_Grid.Visibility = System.Windows.Visibility.Visible;
            }
        }
    }

    public static readonly DependencyProperty MemberNameProperty =
        DependencyProperty.Register("MemberId", typeof(string), typeof(TopSpotterItemControl), new PropertyMetadata(null));

    public static readonly DependencyProperty ChampVisibilityProperty =
        DependencyProperty.Register("ChampVisibility", typeof(bool), typeof(TopSpotterItemControl), new PropertyMetadata(null));

    public TopSpotterItemControl()
    {
        InitializeComponent();
    }
} 
```

有点啰嗦，我希望我在这个问题上说清楚了。到目前为止，我的一个主要问题是，我想通过在 xaml 中显式设置的依赖属性将尽可能多的控制抽象到用户控件，而不是在其 xaml 中设置依赖于模型知识的绑定。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T21:04:55.843

您的 DependencyProperty 格式错误。（我也没有在您的课程或 XAML 中看到 Champ_Grid 定义，但我认为这是一个遗漏）

在代码中设置 ChampVisibility = true 有效，因为它与 DependencyProperty 无关。

您可以轻松判断，因为您的 DP 的默认值无效。它将编译，但如果实例构造函数被调用，它将通过异常。

> 新的属性元数据（空）

bool = null = 异常

如果您从某个地方调用 GetValue(TopSpotterItemControl.ChampVisibilityProperty)，您可以确认以上所有内容。

您应该对属性更改处理程序中的实例字段进行更改，并如下声明该属性，它将起作用： 请注意，该属性必须更改（不仅仅是设置）才能引发事件。

```
public bool ChampVisibility
{
    get { return (bool)GetValue(ChampVisibilityProperty); }
    set { SetValue(ChampVisibilityProperty, value); }
}

public static readonly DependencyProperty ChampVisibilityProperty =
    DependencyProperty.Register("ChampVisibility ", typeof(bool), typeof(TopSpotterItemControl), new PropertyMetadata(true, (s, e) =>
{
    TopSpotterItemControl instance = s as TopSpotterItemControl;
    instance.Champ_Grid.Visibility = instance.ChampVisibility ? System.Windows.Visibility.Visible : System.Windows.Visibility.Collapsed;
})); 
```

顺便说一句，您的 MemberId DependencyProperty 也是完全错误的，无法正常工作。

注意：TextBox 上的绑定有效，因为它绑定到 DataContext（您的模型），因此它可能显示正确的值。但是永远不会设置 UserControl 中的 Dependency 属性。

在 Visual Studio 中使用 propdp 代码片段，这样您就不必担心依赖属性声明的复杂性。

另[请查看此](http://msdn.microsoft.com/en-gb/library/ms752914.aspx)内容以获取有关依赖属性的更多信息

# ruby-on-rails - 命名路由作为参数，例如 rspec 中的组

> ID：14405092
> 
> 赞同：2
> 
> 时间：2013-01-18T18:16:26.953
> 
> 标签：ruby-on-rails, rspec2, helpers

我是测试和使用 RSpec 的新手，需要一些帮助：

我分享了示例组：

```
shared_examples_for 'request which do something' do |opts = {}|
  respond.should redirect_to(opts[:redirect_to])
end 
```

在我的规范文件中：

```
describe "behavior" do
  it_should_behave_like 'request which do something', :redirect_to => root_path
end 
```

看起来不错，但我收到此错误：

```
Exception encountered: #<NameError: undefined local variable or method `root_path' for #<Class:0x000000069e2838>> 
```

它与'it_should_behave_like ...'一致

我试图在 spec_helper 中包含**Rails.application.routes.url_helper**，但它无论如何都不起作用。

顺便说一句，它可以从这样的示例中完美运行：

```
describe "behavior" do
  it "should redirect" do
    response.should redirect_to(root_path)
  end
end 
```

（即使没有明确包括 url_helpers）

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T18:35:23.973

您不能在示例组中使用路径助手，但有一种解决方法。看到这个答案：

[将命名路由传递给 RSpec 中的控制器宏](https://stackoverflow.com/questions/14305293/passing-a-named-route-to-a-controller-macro-in-rspec)

有了这个，你可以传递一个符号并使用`send`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-06-02T07:30:17.707

在示例组中，编写`Rails.application.routes.url_helpers.root_path` 而不是仅`root_path`. 您可以创建自己的辅助方法来缩短重复调用。

# html-lists - Mootools addClass 每 4 li

> ID：14405094
> 
> 赞同：1
> 
> 时间：2013-01-18T18:16:32.840
> 
> 标签：html-lists, mootools, addclass

我正在寻找关于如何为每个 4 LI 元素使用 addClass 的解决方案，如下所示：

```
<ul>
<li>Element 1</li>
<li>Element 2</li>
<li>Element 3</li>
<li class="newclass">Element 4</li>
<li>Element 5</li>
<li>Element 6</li>
<li>Element 8</li>
<li class="newclass">Element 8</li>
</ul> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T19:29:58.430

两种方式。

# CSS 选择器：http: [//jsfiddle.net/at9CJ/1/](http://jsfiddle.net/at9CJ/1/)

```
document.getElements('ul > li:nth-child(4n+4)').addClass('new'); 
```

# 模组儿童：

```
document.getElements('ul > li').each(function(el, i){
    (i+1) % 4 === 0 && el.addClass('new');
}); 
```

# html - 表格中的换行符

> ID：14405096
> 
> 赞同：2
> 
> 时间：2013-01-18T18:16:40.047
> 
> 标签：html, css, html-table, line-breaks

我的网页分为左右两列。在右栏中，我有一个水平很长的表格，所以它不适合屏幕（见下图 3）。我唯一能想到的就是将表格分成几行（见下图 2）。

*因此，我希望在第 4次*和*td*之后，在这张表的中间换行。

在第 5 个和 td 单元格之后用 tr 拆分并不能解决问题，因为它会将 ths 堆叠在彼此下方，并在它们下方堆叠 tds（参见下图 1）。

### 插图 1：

```
th1 th2 th3 th4
th5 th6 th7 th8
td1 td2 td3 td4 <- tds
td5 td6 td7 td8 <- tds 
```

### 图2（我想要的）：

```
th1 th2 th3 th4
td1 td2 td3 td4 <- tds

th5 th6 th7 th8
td5 td6 td7 td8 <- tds 
```

### 插图 3：

**问题：**

```
---------------------------------------------
|                    :                      |
|                    :                      |
|                    :   Header1  Header2   Header3   Header4
|                    :     1        12      | 40         5
|                    :                      |
|                    :                      |
|                    :                      |
|                    :                      |
|                    :                      |
|                    :                      |
|                    :                      |
|                    :                      |
|                    :                      |
|                    :                      |
--------------------------------------------- 
```

**期望的输出：**

```
---------------------------------------------
|                    :                      |
|                    :                      |
|                    :   Header1  Header2   |
|                    :     1        12      |
|                    :                      |
|                    :   Header3   Header4  |
|                    :     40         5     |
|                    :                      |
|                    :                      |
|                    :                      |
|                    :                      |
|                    :                      |
|                    :                      |
|                    :                      |
--------------------------------------------- 
```

当然，我可以使用两个单独的表，但由于几个原因，这在我的情况下不起作用。

**编码：**

```
<table>
    <thead>
        <tr>
            <th>Header 1</th>
            <th>Header 2</th>
            <th>Header 3</th>
            <th>Header 4</th> // Line break
            <th>Header 5</th>
            <th>Header 6</th>
            <th>Header 7</th>
            <th>Header 8</th>
       </tr>
    </thead>
    <tbody>
        <tr>
            <td>Foo 1</td>
            <td>Foo 2</td>
            <td>Foo 3</td>
            <td>Foo 4</td> // Line break
            <td>Foo 5</td>
            <td>Foo 6</td>
            <td>Foo 7</td>
            <td>Foo 8</td>
        </tr>
    </tbody>
</table> 
```

怎样才能做到这一点？

[这是一个可以玩的小提琴](http://jsfiddle.net/HV7BH/)<-------- ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T16:48:24.690

`float: left`像这样使用 div ：

```
<div class="column">
    <div class="header">
        header 1
    </div>
    <div class="item">
        row 1, col 1
    </div>
    <div class="item">
        row 2, col 1
    </div>
</div>
<div class="column">
    <div class="header">
        header 2
    </div>
    <div class="item">
        row 1, col 2
    </div>
    <div class="item">
        row 2, col 2
    </div>
</div>
<div class="column">
    <div class="header">
        header 3
    </div>
    <div class="item">
        row 1, col 3
    </div>
    <div class="item">
        row 2, col 3
    </div>
</div> 
```

CSS：

```
.column {
    float: left;
    width: 100px;
}
.column>.header {
    font-weight: bold;
} 
```

# perl - 为什么我的 getpwent() 调用返回错误的用户？

> ID：14405101
> 
> 赞同：3
> 
> 时间：2013-01-18T18:17:04.857
> 
> 标签：perl

我总是忘记如何在 Perl 中做到这一点。这是我的脚本：

```
#!/usr/local/bin/perl -w
use strict;
use Data::Dumper;

my @got = getpwent();
my $username    = ${[getpwent()]}[0];

print Dumper( @got );
print "username is [$username]\n"; 
```

...这是它产生的输出...

```
$VAR1 = 'root';
$VAR2 = 'xxxxxxxxxxxxxxxxxx';
$VAR3 = 0; 
$VAR4 = 0;
$VAR5 = ''; 
$VAR6 = '';
$VAR7 = 'myhost root';
$VAR8 = '/root';
$VAR9 = '/bin/bash';
username is [bin] 
```

...我的问题是，为什么用户名等于“bin”而不是“root”？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-18T18:33:00.683

它迭代用户；您调用它两次，并获取两个用户的信息。

```
$ perl -E 'say $foo while $foo = getpwent()'
root
daemon
bin
sys
sync
... 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-18T18:33:04.933

重复调用以`getpwent`返回密码文件（或`getpwent`正在使用的任何用户信息源）中的不同行。

`root`是密码文件中列出的第一个用户，`bin`是第二个。

调用`endpwent`重置迭代器并将您之前的调用复制到`getpwent`：

```
for (0..2) {
    print scalar getpwent(), "\n";
}
print "-- reset --\n";
endpwent();
for (0..3) {
    print scalar getpwent(), "\n";
} 
```

输出 (YMMV)

```
SYSTEM
LocalService
NetworkService
-- reset --
SYSTEM
LocalService
NetworkService
Administrators 
```

# logging - 应该如何处理内部 web api 错误？

> ID：14405102
> 
> 赞同：1
> 
> 时间：2013-01-18T18:17:11.830
> 
> 标签：logging, error-handling, asp.net-web-api

在我们的应用程序中，我们有一组相当简单的日志记录钩子（MVC 和 API 控制器上的 IExceptionFilters 和 Application_Error() 中的一个额外的 catch-all），但是有一整类错误不会触发任何一个。如果从 WebAPI 本身或内部使用的某些东西（例如由依赖解析器创建的类的类型初始化程序）抛出异常，我得到的只是一个 500 响应被发送到客户端。

我发现捕获错误详细信息的唯一方法是使用 HttpConfiguration.IncludeErrorDetailPolicy 来配置应用程序以发出错误详细信息 - 但是，将错误详细信息广播到世界是一种明显的不良做法，所以我宁愿转这完全关闭，或将其设置为有条件的（例如，仅限本地。）..但这意味着远程进入运行应用程序的服务器并使用可以检查响应的工具（如 IE 或 Google）在本地调用 API Chrome），以便弄清楚发生了什么。

我在这里看到了另一个类似的问题（[这里](https://stackoverflow.com/questions/10284727/exception-handling-asp-net-mvc-web-api "这里")），但是提出的解决方案（使用 DelegatingHandler 来检查响应）不能满足我们的需求，我们认为。真的没有我可以挂钩的事件、我可以使用的扩展点或类似的东西来捕获发生的实际异常吗？

（顺便说一句，我想我可以将我的 IncludeErrorDetailPolicy 更改为 Always 并使用另一个线程中提供的解决方案来捕获 MessageHandler 中的错误详细信息，记录它们，并从发送到客户端的响应中手动清除它们，但是将是一个讨厌的黑客。）

想法？：/

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T15:57:04.977

我们向 Microsoft 合作伙伴网络提出了支持请求，他们返回了我认为更好的答案。

这个想法是用一个将默认控制器创建行为与任何其他所需行为包装起来的实现替换平台的默认 IHttpControllerActivator 实现。

在我们的例子中，这意味着使用 try/catch/throw 结构和对我们的日志服务的调用来包装 DefaultHttpControllerActivator 的 Create 方法。这可能无法提供 100% 的覆盖率，但我们遗漏的大多数例外都与控制器的创建有关，因此它应该会有很大帮助。

我真的很想能够在 HttpControllerDispatcher 中挂钩 HandleException 方法，但它既是私有的又是静态的，所以嗯。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T20:25:41.917

好的，我明白你想要做什么。感谢您的澄清。WebAPI 有一个模型，错误响应不一定是由异常引起的。例如，任何人都可以返回带有 400 的 HttpResponseMessage，而不会实际抛出异常。在许多情况下，内置框架错误以相同的方式工作而不会引发异常。

现在，我认为你的建议对我来说听起来不错。您可以将 ErrorDetailPolicy 设置为 Always，并实现一个消息处理程序来记录错误并使用仅包含消息的不同 HttpError。下面是它的样子：

```
public class ErrorHandlingMessageHandler : DelegatingHandler
{
    protected async override Task<HttpResponseMessage> SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
    {
        HttpResponseMessage response = await base.SendAsync(request, cancellationToken);
        HttpError error;
        if (response.TryGetContentValue(out error))
        {
            LogError(error)
            // Use an HttpError that doesn't leak internal information
            (response.Content as ObjectContent).Value = new HttpError(error.Message);
        }

        return response;
    }
} 
```

请注意，我们没有清除现有错误。我们正在创建一个新的以降低信息泄露的风险。消息应该始终可以安全地发回。这不包括发回模型状态，但如果您需要，您可以随时将其复制到新错误中。

考虑这一点的一种方法是，您可以记录您将发送到本地客户端的响应，然后仍然向远程客户端发送不包含错误详细信息的安全消息。

# backbone.js - 没有调用主干（'add'）

> ID：14405106
> 
> 赞同：1
> 
> 时间：2013-01-18T18:17:23.493
> 
> 标签：backbone.js

我在我的集​​合上定义了**添加**处理程序：

```
var BookmarksCollection = Backbone.Collection.extend({
    initialize: function() {
        this.on('add', function(obj) {
            console.log(obj.get('title') + ' added');
        });
    },
    url: '/bookmarks',
    model: Bookmark   
}); 
```

它是从我的一种观点中调用的：

```
var AddView = Backbone.View.extend({
    el: $('#entry'),
    events: {
        'click #submit': 'submitHandler'
    },
    submitHandler: function(event) {
        if($('input').val()) {
            var newBookmark = new Bookmark;
            newBookmark.set({url: $('input').val()});
            console.log('Save!');
            newBookmark.save({
                success: function(newBookmark) {    
                    console.log('Success!');                
                    myBookmarks.add(newBookmark);
                    myBookmarks.trigger('add', newBookmark);
                }
            });
        }
    }
}); 
```

但是，我的集合上的添加处理程序永远不会被触发。事实上，甚至视图中的**成功**函数似乎都没有被调用。

但是 newBookmark 无论如何都会被保存，所以不会发生错误。

我错过了什么？

发布新书签时，NodeJS 会返回**201（已创建） 。**

也许骨干预计**200 (OK)**触发成功？

**编辑：**我尝试从成功函数之外触发事件并且它有效。如何调整主干以对**201 (Created)**做出反应？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T18:40:19.280

我认为问题在于他的第一个论点`save`应该是您要保存的数据。第二个是可以包含`success`和`error`回调的选项。

```
newBookmark.save({dataiwanttosave: "hi"}, {
  success: function(newBookmark) {    
    console.log('Success!');                
    myBookmarks.add(newBookmark);
    myBookmarks.trigger('add', newBookmark);
  } 
```

});

# javascript - 在运行时将 CSS 类附加到 head 标签

> ID：14405107
> 
> 赞同：0
> 
> 时间：2013-01-18T18:17:31.187
> 
> 标签：javascript, jquery, css3pie

在以下函数中，我一直在尝试附加`gradClass`以在运行时将渐变背景应用于 div。

```
function applyGradient(upto) {

    var gradStyle = "background: -webkit-linear-gradient(left, #ff1a00 20%,#ffffff 30%);"
                    + "behavior: url(PIE-1.0.0/PIE.htc);"
                    + "-pie-background: linear-gradient(#ff1a00 20%, #ffffff 30%);";

    var newPercent = Math.floor(upto / end * 100);
    gradStyle = gradStyle.replace(/20/gi, newPercent);
    gradStyle = gradStyle.replace(/30/gi, "100");
    gradClass = ".gradClass{" + gradStyle + "}";

    //method 1
    //jQuery('head').append($('<style>').text(gradClass));
    //error: IE8 some known issue in jQuery library

    //method 2
    //var styleTag = document.createElement('style');
    //styleTag.type = "text/css";
    //styleTag.appendChild(document.createTextNode(gradClass));

    //method 3
    document.getElementsByTagName('style')[0].innerHTML += gradClass;
    // Unknown runtime error in IE8.

    jQuery("#container").addClass("gradClass");
} 
```

代码在 Chrome 中运行良好，但在 IE8 中失败。由于未能使用`method 1`jQuery 应用该类，我也尝试了其他两种方法。

我究竟做错了什么 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T18:34:00.607

```
var $css = $('<style/>');
$css.appendTo('head');
$css.append("\n\
.hello { color:black; }\n\
.world { color:red;   }"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T18:22:09.143

您应该尝试使用 JQuery 的 CSS 函数：

[http://api.jquery.com/css/](http://api.jquery.com/css/)

```
$("div").click(function () {
  var color = $(this).css("background-color");
  $("#result").html("That div is <span style='color:" +
                     color + ";'>" + color + "</span>.");
}); 
```

# php - 了解phpexcel RATE函数

> ID：14405108
> 
> 赞同：0
> 
> 时间：2013-01-18T18:17:31.453
> 
> 标签：php

公式要求变量。我已经看遍了，找不到这些变量是什么以及它们应该代表什么值。

```
RATE($nper, $pmt, $pv, $fv = 0.0, $type = 0, $guess = 0.1) 
```

有人熟悉这个功能吗？你知道变量代表什么值吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T18:19:45.270

从 Excel 帮助文件：

> ```
> RATE(nper,pmt,pv,fv,type,guess) 
> ```
> 
> 有关参数 nper、pmt、pv、fv 和 type 的完整描述，请参阅 PV。
> 
> *   Nper - 是年金中的支付期总数。
> *   Pmt - 是每期支付的款项，在年金的整个生命周期内不能改变。通常，pmt 包括本金和利息，但不包括其他费用或税款。如果省略 pmt，则必须包含 fv 参数。
> *   Pv - 是现值 - 一系列未来付款现在价值的总金额。
> *   Fv - 是您希望在最后一次付款后获得的未来价值或现金余额。如果省略 fv，则假定为 0（例如，贷款的未来价值为 0）。
> *   类型 - 是数字 0 或 1，表示付款的到期时间。
>     
>     
>     
>     如果付款到期，则设置类型等于以下内容：
>     
>     
>     *   0 或省略 - 在期末
>     *   1 - 期初
> *   猜测 - 是您对费率的猜测。
>     
>     
>     
>     如果省略猜测，则假定为 10%。
>     如果 RATE 不收敛，请尝试不同的猜测值。如果guess 在 0 和 1 之间，RATE 通常会收敛。
>     
>     
> 
> ## 评论
> 
> 确保您对用于指定guess 和nper 的单位保持一致。如果您以 12% 的年利率每月支付四年期贷款，请使用 12%/12 进行猜测，使用 4*12 进行 nper。如果您每年支付同一笔贷款，请使用 12% 进行猜测，使用 4 进行 nper

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-10-26T12:11:40.260

我不知道你是否需要实现这个功能，但无论如何，我查看了这个算法是如何构建的，即使我无法访问 excel 源代码（或谷歌工作表），我发现这不是一个简单的计算。关于这个数学，可以在这里阅读更多内容：

[https://brownmath.com/bsci/loan.htm#Eq8](https://brownmath.com/bsci/loan.htm#Eq8)

PHP 中的函数可能是这样的：

```
function rate($nprest, $vlrparc, $vp, $guess = 0.25) {
    $maxit = 100;
    $precision = 14;
    $guess = round($guess,$precision);
    for ($i=0 ; $i<$maxit ; $i++) {
        $divdnd = $vlrparc - ( $vlrparc * (pow(1 + $guess , -$nprest)) ) - ($vp * $guess);
        $divisor = $nprest * $vlrparc * pow(1 + $guess , (-$nprest - 1)) - $vp;
        $newguess = $guess - ( $divdnd / $divisor );
        $newguess = round($newguess, $precision);
        if ($newguess == $guess) {
            return $newguess;
        } else {
            $guess = $newguess;
        }
    }
    return null;
} 
```

# inversion-of-control - 提供类型化工厂方法的实现

> ID：14405115
> 
> 赞同：1
> 
> 时间：2013-01-18T18:18:02.677
> 
> 标签：inversion-of-control, castle-windsor

我有一个类型化的工厂接口，如下所示：

```
public interface ILogMessageFactory
{
    ILogMessage Create(LogMessageType logMessageType, String text);
} 
```

我正在注册这一切：

```
public void Install(IWindsorContainer container, IConfigurationStore store)
{
    container.AddFacility<TypedFactoryFacility>();

    container.Register(
        Component.For(typeof(ConsolePrompter)),
        Component.For<ILogger>().ImplementedBy<ConsoleLogger>().LifeStyle.Transient,
        Component.For<ILogMessageFactory>().AsFactory(),
        Component.For<ILogMessage>().ImplementedBy<LogMessage>().LifeStyle.Transient
        );
} 
```

问题是我想自己实现这个`ILogMessageFactory.Create`方法，在我返回之前设置一些东西。

我已经尝试了明显的幼稚解决方案，但没有任何成功：

```
 Component.For<ILogMessageFactory>().ImplementedBy<LogMessageFactory>().AsFactory() 
```

我接近这个错误吗？我应该将所有初始化都保留在给定对象的构造函数中吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T09:43:15.333

`ITypedFactoryComponentSelector`如果这是真正属于工厂的东西，请使用。或者`.OnCreate()`在工厂解析的组件上使用

# bash - 如何使用 shell 脚本替换具有字符的行中的单词

> ID：14405119
> 
> 赞同：1
> 
> 时间：2013-01-18T18:18:11.250
> 
> 标签：bash, shell

我有一个文件，它的内容是这样的

```
#Time value
2.5e-5 1.3
5e-5 2.7
7.5e-5 1.1
0.0001 5.9
0.000125 5.8
0.00015 3
...... 
```

如何替换其中带有字母的行`e`（科学记数法），以便最终文件为

```
#Time value
0.000025 1.3
0.00005 2.7
0.000075 1.1
0.0001 5.9
0.000125 5.8
0.00015 3
...... 
```

shell脚本能做到这一点吗？

```
for (any word that is using scientific notation)
{
    replace this word with decimal notation
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T18:21:56.297

如果您熟悉[`printf()`](http://www.cplusplus.com/reference/cstdio/printf/)C 中的函数，则有一个类似的内置 shell 命令：

```
$ printf '%f' 2.5e-5
0.000025
$ printf '%f' 5e-5
0.000050 
```

要在脚本中使用它，您可以执行以下操作：

```
while read line; do
    if [[ $line = \#* ]]; then
        echo "$line"
    else
        printf '%f ' $line
        echo
    fi
done < times.txt 
```

跳过`#Time value`评论会遇到一些麻烦。如果你可以摆脱那条线，那么它会更简单：

```
while read a b; do printf '%f %f\n' $a $b; done < times.txt 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T19:57:34.987

与`awk`：

```
$ awk '$1~/e/{printf "%f %s\n", $1,$2}$1~!/e/{print}' file
0.000025 1.3
0.000050 2.7
0.000075 1.1
0.0001 5.9
0.000125 5.8
0.00015 3 
```

# windows-8 - Win 8如何从rs232获取数据

> ID：14405120
> 
> 赞同：-2
> 
> 时间：2013-01-18T18:18:15.360
> 
> 标签：windows-8, serial-port

win 8 中是否有任何应用程序可以从 rs232 获取数据并将其保存为 xml 文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T18:44:29.300

串行端口支持问题对于 Windows 8 应用程序来说当然不是一个新问题。您没有说明您是否指的是商店应用程序。如果你这样做了，答案就在这里：[http](http://blog.jerrynixon.com/2012/05/metro-answers-can-i-use-serial-port.html) ://blog.jerrynixon.com/2012/05/metro-answers-can-i-use-serial-port.html如果你不是指商店应用程序，那么该技术有自 Windows 7 以来未更改。这是在代码中完成的，没有本机应用程序。

# jquery - jquery parseInt比较不起作用

> ID：14405122
> 
> 赞同：0
> 
> 时间：2013-01-18T18:18:26.117
> 
> 标签：jquery

我在 jquery 中有两个数字。例如：45 和 55。我在 parseInt 中传递这些数字。但是当要比较最大数量时，它总是返回 false。

```
var data = parseInt(data);
var quantity = parseInt(quantity);

console.log(data < quantity); and
console.log(data > quantity); 
```

两者都返回假。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T18:19:43.127

如果您将不以数字开头的字符串传递给`parseInt`，它将返回`NaN`。

```
NaN < NaN 
```

将始终为假（即使其中只有一个是 ，也是如此`NaN`）。

* * *

您必须检查变量以确保它们不是`NaN`：

```
var data = parseInt(data);
var quantity = parseInt(quantity);

if ( isNaN(data) ) data = 0;
if ( isNaN(quantity) ) quantity = 0; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T18:28:13.193

一切都取决于你在那个变量中有什么！

我尝试分别分配 45 和 55，一个为真，另一个为假。但是，如果您尝试相同的数字，那么两者都是错误的。

# sharepoint - 分布式缓存服务不会启动

> ID：14405123
> 
> 赞同：0
> 
> 时间：2013-01-18T18:18:26.133
> 
> 标签：sharepoint, caching, service, distributed, sharepoint-2013

我已经为 SharePoint 2013 设置了一个开发环境。我已经创建了一个两台服务器的 vm 设置，其中一台是 SQL，另一台是 wfe 和应用程序。我从 SharePoint 运行状况分析器收到一条消息，指出分布式缓存服务已关闭。我去启动它，但得到一个错误，说 cacheHostInfo 为空。在谷歌上找不到任何可以帮助我的东西。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-02-05T20:32:32.453

我和你有同样的错误，这就是我修复它的方法

[http://rakasatria.wordpress.com/2013/02/04/sharepoint-2013-spdistributedcacheserviceinstance-cachehostinfo-is-null/](http://rakasatria.wordpress.com/2013/02/04/sharepoint-2013-spdistributedcacheserviceinstance-cachehostinfo-is-null/)

希望能帮到你！！

问候

拉卡

# android - Android - 一个线程正在破坏应用程序

> ID：14405127
> 
> 赞同：1
> 
> 时间：2013-01-18T18:18:38.723
> 
> 标签：android, multithreading

我创建了一个简单的应用程序。

当用户触摸“开始..”按钮时，按钮标签上会显示“加载动画”。

我在我的 PC 上创建了应用程序（例如桌面应用程序），效果很好。

Android的应用程序代码：

```
package com.example.threaddot;
import android.os.Bundle;
import android.app.Activity;
import android.app.AlertDialog;
import android.view.Menu;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.SeekBar;
import android.widget.TextView;

public class MainActivity extends Activity {

    SeekBar pointSpeed, numPoint;
    Button startButton, detailsButton;
    Thread count;
    boolean started = false;

    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        // my vars
        startButton = (Button) findViewById(R.id.button_start);
        detailsButton = (Button) findViewById(R.id.button_details);
        numPoint = (SeekBar) findViewById(R.id.seekBar_numpoints);
        pointSpeed = (SeekBar) findViewById(R.id.PointSpeedSeekBar);

        count = new Thread(new Runnable() {

            @Override
            public void run() {
                setDots();
            }
        });

        startButton.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                count.start();
            }
        });

        detailsButton.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                showAlert("Info",
                        String.format("Current: %s, %d points, and shown per %d m/s.", !started ? "working" : "suspend", 
                                numPoint.getProgress(), pointSpeed.getProgress()));             
            }
        });
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

    public void setDots() {
        int counter = 0, numPoints = numPoint.getProgress();
        while(true) {
            if(counter++ < 10) {
                startButton.setText(startButton.getText() + ".  ");
            }

            else {
                counter = 0;
            }

            try {
                Thread.sleep(200);
            } catch (InterruptedException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }           
    }

    void showAlert(String title, String msg) {
        AlertDialog alertDialog;
        alertDialog = new AlertDialog.Builder(this).create();
        alertDialog.setTitle(title);
        alertDialog.setMessage(msg);
        alertDialog.show();
    }
} 
```

当我按下“开始..”按钮时，它被粉碎了。

换句话说，

```
startButton.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            count.start();
        }
    }); 
```

使应用程序崩溃。为什么？

日志猫：

```
01-18 20:07:43.453: W/dalvikvm(29186): threadid=10: thread exiting with uncaught exception (group=0x40018578)
01-18 20:07:43.500: E/AndroidRuntime(29186): FATAL EXCEPTION: Thread-11
01-18 20:07:43.500: E/AndroidRuntime(29186): android.view.ViewRoot$CalledFromWrongThreadException: Only the original thread that created a view hierarchy can touch its views.
01-18 20:07:43.500: E/AndroidRuntime(29186):    at android.view.ViewRoot.checkThread(ViewRoot.java:3055)
01-18 20:07:43.500: E/AndroidRuntime(29186):    at android.view.ViewRoot.invalidateChild(ViewRoot.java:649)
01-18 20:07:43.500: E/AndroidRuntime(29186):    at android.view.ViewRoot.invalidateChildInParent(ViewRoot.java:675)
01-18 20:07:43.500: E/AndroidRuntime(29186):    at android.view.ViewGroup.invalidateChild(ViewGroup.java:2511)
01-18 20:07:43.500: E/AndroidRuntime(29186):    at android.view.View.invalidate(View.java:5279)
01-18 20:07:43.500: E/AndroidRuntime(29186):    at android.widget.TextView.checkForRelayout(TextView.java:5782)
01-18 20:07:43.500: E/AndroidRuntime(29186):    at android.widget.TextView.setText(TextView.java:2824)
01-18 20:07:43.500: E/AndroidRuntime(29186):    at android.widget.TextView.setText(TextView.java:2685)
01-18 20:07:43.500: E/AndroidRuntime(29186):    at android.widget.TextView.setText(TextView.java:2654)
01-18 20:07:43.500: E/AndroidRuntime(29186):    at com.example.threaddot.MainActivity.setDots(MainActivity.java:66)
01-18 20:07:43.500: E/AndroidRuntime(29186):    at com.example.threaddot.MainActivity$1.run(MainActivity.java:32)
01-18 20:07:43.500: E/AndroidRuntime(29186):    at java.lang.Thread.run(Thread.java:1019)
01-18 20:10:49.632: W/ActivityThread(29426): Application com.example.threaddot is waiting for the debugger on port 8100...
01-18 20:10:49.648: I/System.out(29426): Sending WAIT chunk
01-18 20:10:49.859: I/System.out(29426): Debugger has connected
01-18 20:10:49.859: I/System.out(29426): waiting for debugger to settle...
01-18 20:10:50.054: I/System.out(29426): waiting for debugger to settle...
01-18 20:10:50.257: I/System.out(29426): waiting for debugger to settle...
01-18 20:10:50.460: I/System.out(29426): waiting for debugger to settle...
01-18 20:10:50.664: I/System.out(29426): waiting for debugger to settle...
01-18 20:10:50.867: I/System.out(29426): waiting for debugger to settle...
01-18 20:10:51.062: I/System.out(29426): waiting for debugger to settle...
01-18 20:10:51.265: I/System.out(29426): waiting for debugger to settle...
01-18 20:10:51.468: I/System.out(29426): waiting for debugger to settle...
01-18 20:10:51.671: I/System.out(29426): waiting for debugger to settle...
01-18 20:10:51.875: I/System.out(29426): waiting for debugger to settle...
01-18 20:10:52.085: I/System.out(29426): waiting for debugger to settle...
01-18 20:10:52.281: I/System.out(29426): waiting for debugger to settle...
01-18 20:10:52.500: I/System.out(29426): waiting for debugger to settle...
01-18 20:10:52.695: I/System.out(29426): waiting for debugger to settle...
01-18 20:10:52.898: I/System.out(29426): waiting for debugger to settle...
01-18 20:10:53.101: I/System.out(29426): debugger has settled (1476)
01-18 20:12:48.117: W/dalvikvm(29426): threadid=10: thread exiting with uncaught exception (group=0x40018578)
01-18 20:12:48.195: E/AndroidRuntime(29426): FATAL EXCEPTION: Thread-10
01-18 20:12:48.195: E/AndroidRuntime(29426): android.view.ViewRoot$CalledFromWrongThreadException: Only the original thread that created a view hierarchy can touch its views.
01-18 20:12:48.195: E/AndroidRuntime(29426):    at android.view.ViewRoot.checkThread(ViewRoot.java:3055)
01-18 20:12:48.195: E/AndroidRuntime(29426):    at android.view.ViewRoot.invalidateChild(ViewRoot.java:649)
01-18 20:12:48.195: E/AndroidRuntime(29426):    at android.view.ViewRoot.invalidateChildInParent(ViewRoot.java:675)
01-18 20:12:48.195: E/AndroidRuntime(29426):    at android.view.ViewGroup.invalidateChild(ViewGroup.java:2511)
01-18 20:12:48.195: E/AndroidRuntime(29426):    at android.view.View.invalidate(View.java:5279)
01-18 20:12:48.195: E/AndroidRuntime(29426):    at android.widget.TextView.checkForRelayout(TextView.java:5782)
01-18 20:12:48.195: E/AndroidRuntime(29426):    at android.widget.TextView.setText(TextView.java:2824)
01-18 20:12:48.195: E/AndroidRuntime(29426):    at android.widget.TextView.setText(TextView.java:2685)
01-18 20:12:48.195: E/AndroidRuntime(29426):    at android.widget.TextView.setText(TextView.java:2654)
01-18 20:12:48.195: E/AndroidRuntime(29426):    at com.example.threaddot.MainActivity.setDots(MainActivity.java:66)
01-18 20:12:48.195: E/AndroidRuntime(29426):    at com.example.threaddot.MainActivity$1.run(MainActivity.java:32)
01-18 20:12:48.195: E/AndroidRuntime(29426):    at java.lang.Thread.run(Thread.java:1019)
01-18 20:14:52.031: D/AndroidRuntime(29761): Shutting down VM
01-18 20:14:52.031: W/dalvikvm(29761): threadid=1: thread exiting with uncaught exception (group=0x40018578)
01-18 20:14:52.062: E/AndroidRuntime(29761): FATAL EXCEPTION: main
01-18 20:14:52.062: E/AndroidRuntime(29761): java.lang.IllegalThreadStateException: Thread already started.
01-18 20:14:52.062: E/AndroidRuntime(29761):    at java.lang.Thread.start(Thread.java:1227)
01-18 20:14:52.062: E/AndroidRuntime(29761):    at com.example.threaddot.MainActivity$2.onClick(MainActivity.java:40)
01-18 20:14:52.062: E/AndroidRuntime(29761):    at android.view.View.performClick(View.java:2485)
01-18 20:14:52.062: E/AndroidRuntime(29761):    at android.view.View$PerformClick.run(View.java:9080)
01-18 20:14:52.062: E/AndroidRuntime(29761):    at android.os.Handler.handleCallback(Handler.java:587)
01-18 20:14:52.062: E/AndroidRuntime(29761):    at android.os.Handler.dispatchMessage(Handler.java:92)
01-18 20:14:52.062: E/AndroidRuntime(29761):    at android.os.Looper.loop(Looper.java:130)
01-18 20:14:52.062: E/AndroidRuntime(29761):    at android.app.ActivityThread.main(ActivityThread.java:3687)
01-18 20:14:52.062: E/AndroidRuntime(29761):    at java.lang.reflect.Method.invokeNative(Native Method)
01-18 20:14:52.062: E/AndroidRuntime(29761):    at java.lang.reflect.Method.invoke(Method.java:507)
01-18 20:14:52.062: E/AndroidRuntime(29761):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:867)
01-18 20:14:52.062: E/AndroidRuntime(29761):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:625)
01-18 20:14:52.062: E/AndroidRuntime(29761):    at dalvik.system.NativeStart.main(Native Method)
01-18 20:15:35.492: W/ActivityThread(29953): Application com.example.threaddot is waiting for the debugger on port 8100...
01-18 20:15:35.734: I/System.out(29953): Sending WAIT chunk
01-18 20:15:35.937: I/System.out(29953): Debugger has connected
01-18 20:15:35.937: I/System.out(29953): waiting for debugger to settle...
01-18 20:15:36.140: I/System.out(29953): waiting for debugger to settle...
01-18 20:15:36.343: I/System.out(29953): waiting for debugger to settle...
01-18 20:15:36.546: I/System.out(29953): waiting for debugger to settle...
01-18 20:15:36.742: I/System.out(29953): waiting for debugger to settle...
01-18 20:15:36.945: I/System.out(29953): waiting for debugger to settle...
01-18 20:15:37.148: I/System.out(29953): waiting for debugger to settle...
01-18 20:15:37.359: I/System.out(29953): waiting for debugger to settle...
01-18 20:15:37.554: I/System.out(29953): waiting for debugger to settle...
01-18 20:15:37.757: I/System.out(29953): waiting for debugger to settle...
01-18 20:15:37.960: I/System.out(29953): waiting for debugger to settle...
01-18 20:15:38.164: I/System.out(29953): waiting for debugger to settle...
01-18 20:15:38.367: I/System.out(29953): debugger has settled (1495)
01-18 20:16:13.609: W/dalvikvm(29953): threadid=9: thread exiting with uncaught exception (group=0x40018578)
01-18 20:16:13.679: E/AndroidRuntime(29953): FATAL EXCEPTION: Thread-10
01-18 20:16:13.679: E/AndroidRuntime(29953): android.view.ViewRoot$CalledFromWrongThreadException: Only the original thread that created a view hierarchy can touch its views.
01-18 20:16:13.679: E/AndroidRuntime(29953):    at android.view.ViewRoot.checkThread(ViewRoot.java:3055)
01-18 20:16:13.679: E/AndroidRuntime(29953):    at android.view.ViewRoot.invalidateChild(ViewRoot.java:649)
01-18 20:16:13.679: E/AndroidRuntime(29953):    at android.view.ViewRoot.invalidateChildInParent(ViewRoot.java:675)
01-18 20:16:13.679: E/AndroidRuntime(29953):    at android.view.ViewGroup.invalidateChild(ViewGroup.java:2511)
01-18 20:16:13.679: E/AndroidRuntime(29953):    at android.view.View.invalidate(View.java:5279)
01-18 20:16:13.679: E/AndroidRuntime(29953):    at android.widget.TextView.checkForRelayout(TextView.java:5782)
01-18 20:16:13.679: E/AndroidRuntime(29953):    at android.widget.TextView.setText(TextView.java:2824)
01-18 20:16:13.679: E/AndroidRuntime(29953):    at android.widget.TextView.setText(TextView.java:2685)
01-18 20:16:13.679: E/AndroidRuntime(29953):    at android.widget.TextView.setText(TextView.java:2654)
01-18 20:16:13.679: E/AndroidRuntime(29953):    at com.example.threaddot.MainActivity.setDots(MainActivity.java:66)
01-18 20:16:13.679: E/AndroidRuntime(29953):    at com.example.threaddot.MainActivity$1.run(MainActivity.java:32)
01-18 20:16:13.679: E/AndroidRuntime(29953):    at java.lang.Thread.run(Thread.java:1019)
01-18 20:21:29.492: D/AndroidRuntime(30489): Shutting down VM
01-18 20:21:29.492: W/dalvikvm(30489): threadid=1: thread exiting with uncaught exception (group=0x40018578)
01-18 20:21:29.632: E/AndroidRuntime(30489): FATAL EXCEPTION: main
01-18 20:21:29.632: E/AndroidRuntime(30489): java.lang.IllegalThreadStateException: Thread already started.
01-18 20:21:29.632: E/AndroidRuntime(30489):    at java.lang.Thread.start(Thread.java:1227)
01-18 20:21:29.632: E/AndroidRuntime(30489):    at com.example.threaddot.MainActivity$2.onClick(MainActivity.java:40)
01-18 20:21:29.632: E/AndroidRuntime(30489):    at android.view.View.performClick(View.java:2485)
01-18 20:21:29.632: E/AndroidRuntime(30489):    at android.view.View$PerformClick.run(View.java:9080)
01-18 20:21:29.632: E/AndroidRuntime(30489):    at android.os.Handler.handleCallback(Handler.java:587)
01-18 20:21:29.632: E/AndroidRuntime(30489):    at android.os.Handler.dispatchMessage(Handler.java:92)
01-18 20:21:29.632: E/AndroidRuntime(30489):    at android.os.Looper.loop(Looper.java:130)
01-18 20:21:29.632: E/AndroidRuntime(30489):    at android.app.ActivityThread.main(ActivityThread.java:3687)
01-18 20:21:29.632: E/AndroidRuntime(30489):    at java.lang.reflect.Method.invokeNative(Native Method)
01-18 20:21:29.632: E/AndroidRuntime(30489):    at java.lang.reflect.Method.invoke(Method.java:507)
01-18 20:21:29.632: E/AndroidRuntime(30489):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:867)
01-18 20:21:29.632: E/AndroidRuntime(30489):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:625)
01-18 20:21:29.632: E/AndroidRuntime(30489):    at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T18:25:00.967

如日志：

> CalledFromWrongThreadException：只有创建视图层次结构的原始线程才能接触其视图。

意味着您将需要[runOnUiThread()](http://developer.android.com/reference/android/app/Activity.html#runOnUiThread%28java.lang.Runnable%29)以更新以从 Thread 访问 Ui 元素：

```
 MainActivity.this.runOnUiThread(new Runnable() {

        @Override
        public void run() {
            // update textview here

        }
    }); 
```

将您的 setDots() 方法更改为：

```
public void setDots() {
        int counter = 0, numPoints =0;
                MainActivity.this.runOnUiThread(new Runnable() {
                   @Override
                   public void run() {
                    numPoints = numPoint.getProgress();
                 }
               });
          while(true) {
            if(counter++ < 10) {
                MainActivity.this.runOnUiThread(new Runnable() {
                   @Override
                   public void run() {
                     startButton.setText(startButton.getText() + ".  ");
                 }
               });
            }

            else {
                counter = 0;
            }

            try {
                Thread.sleep(200);
            } catch (InterruptedException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }           
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T18:34:10.230

除了“主”线程之外​​，您不能修改任何线程上处理 UI 的任何内容。您应该考虑使用能够定期报告信息并在完成后更新的 AsyncTask。“快速而肮脏”的方式是创建一个处理程序（它必须在 UI 线程上创建，因此初始化为您的活动或 oncreate、onXXX 等的实例变量）并在您需要时将其发布到 UI 线程更新。

这必须在 UI 线程上创建。

```
Handler handler = new Handler(); 
```

这个处理程序可以传递给你的后台线程并像这样发布更新：

```
handler.post(new Runnable()
{
    public void run() {
    //UI UPDATES HERE.
    }
}); 
```

你真的应该通读 android 文档，它很详尽，并且非常详细地涵盖了所有这些。

# c# - 如何根据用户角色和权限在母版页中显示或隐藏菜单选项？

> ID：14405128
> 
> 赞同：0
> 
> 时间：2013-01-18T18:18:40.227
> 
> 标签：c#, asp.net, session, user-roles

用户登录后，我正在尝试根据用户角色和权限控制菜单选项。我将用户保存在会话中，然后从数据库中获取角色和权限，然后我想显示主页面，它是带有菜单选项的主页面，我如何在不使用 javascript 的情况下做到这一点，我使用的是 c#asp。网。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T18:20:04.523

```
if(Roles.IsUserInRole(roleName))
{
    // show controls accordingly
}
else
{
    // hide controls accordingly
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T18:22:32.007

尝试这个

```
if(User.IsInRole("Admin"))
{
   //show menu
}
else
{
   //hide menu
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T18:22:51.310

您可以使用 .aspx 端的服务器标记来处理此问题。

```
<% if (User.IsRole("Administrator")) { %>
    <div>Admin Stuff</div>
<% } %> 
```

或者您可以在服务器端处理它并将内容包装在 PlaceHolders 中并相应地显示/隐藏它们

```
<asp:PlaceHolder id="AdminPlaceHolder" runat="server">
    <div>Admin Stuff</div>
</asp:PlaceHolder> 
```

* * *

```
AdminPlaceHolder.Visible = User.IsRole("Administrator"); 
```

# flyway - 将流或字符串传递给 Flyway API 而不是位置

> ID：14405130
> 
> 赞同：1
> 
> 时间：2013-01-18T18:18:56.873
> 
> 标签：flyway

我想知道 Flyway 是否有办法接受实际的 SQL 迁移作为字符串或流，而不是在类路径上搜索它？我正在使用 Java 构建 SQL 迁移，并希望调用 Flyway API 并将迁移作为参数传递。请让我知道这是否可能。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T09:57:04.097

没有**可用的 API**。

但是，如果您动态构建 SQL，那么肯定可以一次构建**一条语句**。然后可以使用`Connection`您在 a 中获得的参数执行每个语句`JdbcMigration`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T18:41:57.023

不完全是您所要求的，但看起来[*基于 Java 的迁移*](http://flywaydb.org/documentation/migration/java.html)可能是一个解决方案。

基本上，而不是`V1_0__script.sql`您编写`V1_0__script.java`实现[`JdbcMigration`](http://flywaydb.org/documentation/javadoc/com/googlecode/flyway/core/api/migration/jdbc/JdbcMigration.html). 在该类中，您可以访问 JDBC `Connection`：

```
class V1_0__script implements JdbcMigration {
  public void migrate(Connection connection) throws Exception {
    //...
  }
} 
```

`migrate()`您可以自由运行您的自定义 SQL 查询。

# android - Android 自定义视图代码在 Jelly Bean 4.2 中停止正常工作

> ID：14405132
> 
> 赞同：2
> 
> 时间：2013-01-18T18:19:07.623
> 
> 标签：android, android-custom-view, android-4.2-jelly-bean

下面的代码是一个自定义视图 - 它绘制一个圆圈，根据比例添加凹口并添加比例文本。这源自 Mind The Robot 关于创建老式温度计的优秀教程。[http://mindtherobot.com/blog/272/android-custom-ui-making-a-vintage-thermometer/](http://mindtherobot.com/blog/272/android-custom-ui-making-a-vintage-thermometer/)

此代码在运行至 Jelly Bean 4.1.2 的设备上运行良好，但在 4.2 上中断。在 4.2 上，数字不再围绕圆圈绘制，但似乎遍布整个屏幕。代码在 Nexus 7 上运行良好，直到它获得 4.2 更新，所以它不可能是设备问题。我已经在运行 4.1.2 的 Nexus S 和运行 4.2 的 Nexus 4 上对其进行了测试，它在 Nexus S 上运行良好，但在 Nexus 4 上运行良好。

不幸的是，作为一个新用户，我无法发布屏幕截图，我将尝试描述它：数字在表盘的前半部分正确显示，其余数字分散在屏幕上。

我查看了 4.2 更改日志，但看不到任何会导致这种情况发生的事情。我在网上寻找过类似的问题，但这些似乎都与硬件加速有关——我尝试了在清单中设置硬件加速的各种组合，但没有任何影响。

我真的很感激任何可能导致这种情况发生的输入。

```
import android.content.Context;
import android.graphics.Bitmap;
import android.graphics.Canvas;
import android.graphics.Color;
import android.graphics.Paint;
import android.graphics.RectF;
import android.graphics.Typeface;
import android.util.AttributeSet;
import android.view.View;

public class AneroidView extends View {

    // drawing tools
    private RectF rimRect;

    private RectF faceRect;

    private Paint scalePaint;
    private RectF scaleRect;

    private Paint backgroundPaint; 
    // end drawing tools

    private Bitmap background; // holds the cached static part

    private int totalNotches = 130;
    private int incrementPerLargeNotch = 10;
    private int incrementPerSmallNotch = 1;
    private float degreesPerNotch = 360.0f / totalNotches;  

    private int scaleCenterValue = 1000; // the one in the top center (12 o'clock)
    private int scaleMinValue = 935;
    private int scaleMaxValue = 1065;

    public AneroidView(Context context) {
        super(context);
        init(context, null);
    }

    public AneroidView(Context context, AttributeSet attrs) {
        super(context, attrs);
        init(context, attrs);
    }

    public AneroidView(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
        init(context, attrs);
    }

    private void init(Context context, AttributeSet attrs) {

        rimRect = new RectF(0.1f, 0.1f, 0.9f, 0.9f);

        float rimSize = 0.02f;
        faceRect = new RectF();
        faceRect.set(rimRect.left + rimSize, rimRect.top + rimSize, 
                 rimRect.right - rimSize, rimRect.bottom - rimSize);        

        scalePaint = new Paint();
        scalePaint.setStyle(Paint.Style.STROKE);
        scalePaint.setColor(Color.rgb(49, 79, 79));
        scalePaint.setStrokeWidth(0.005f);
        scalePaint.setAntiAlias(true);

        scalePaint.setTextSize(0.045f);
        scalePaint.setTypeface(Typeface.SANS_SERIF);
        scalePaint.setTextScaleX(0.8f);
        scalePaint.setTextAlign(Paint.Align.CENTER);        

        // The scale rectangular is located .10 from the outer rim.
        float scalePosition = 0.10f;

        scaleRect = new RectF();
        scaleRect.set(faceRect.left + scalePosition, faceRect.top + scalePosition,
                      faceRect.right - scalePosition, faceRect.bottom - scalePosition);

            }

    private void drawScale(Canvas canvas) {
        // Draw a large notch every large increment, and a small
        // notch every small increment.

        canvas.drawOval(scaleRect, scalePaint);

        canvas.save(Canvas.MATRIX_SAVE_FLAG);
        for (int i = 0; i < totalNotches; ++i) {
            float y1 = scaleRect.top;
            float y2 = y1 - 0.015f;
            float y3 = y1 - 0.025f;

            int value = notchToValue(i);

            if (i % (incrementPerLargeNotch/incrementPerSmallNotch) == 0) {
                if (value >= scaleMinValue && value <= scaleMaxValue) {
                    // draw a nick
                    canvas.drawLine(0.5f, y1, 0.5f, y3, scalePaint);

                    String valueString = Integer.toString(value);
                    // Draw the text 0.15 away from y3 which is the long nick.
                    canvas.drawText(valueString, 0.5f, y3 - 0.015f, scalePaint);
                }
            }
            else{
                if (value >= scaleMinValue && value <= scaleMaxValue) {
                    // draw a nick
                    canvas.drawLine(0.5f, y1, 0.5f, y2, scalePaint);
                }
            }

            canvas.rotate(degreesPerNotch, 0.5f, 0.5f);
        }
        canvas.restore();       
    }

    private int notchToValue(int value) {
        int rawValue = ((value < totalNotches / 2) ? value : (value - totalNotches)) * incrementPerSmallNotch;
        int shiftedValue = rawValue + scaleCenterValue;
        return shiftedValue;
    }

    private void drawBackground(Canvas canvas) {
        if (background != null)         
            canvas.drawBitmap(background, 0, 0, backgroundPaint);
    }

    @Override
    protected void onDraw(Canvas canvas) {      

        drawBackground(canvas);

        float scale = (float) getWidth();       
        canvas.save(Canvas.MATRIX_SAVE_FLAG);
        canvas.scale(scale, scale); 

        canvas.restore();

    }

    @Override
    protected void onSizeChanged(int w, int h, int oldw, int oldh) {
        regenerateBackground();
    }

    private void regenerateBackground() {
        // free the old bitmap
        if (background != null) {
            background.recycle();
        }

        background = Bitmap.createBitmap(getWidth(), getHeight(), Bitmap.Config.ARGB_8888);
        Canvas backgroundCanvas = new Canvas(background);
        float scale = (float) getWidth();       
        backgroundCanvas.scale(scale, scale);

        drawScale(backgroundCanvas);
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T20:01:31.737

添加`scalePaint.setLinearText(true);`

它会更好，但文本间距可能看起来很糟糕。

请参阅下面的线程：

[Nexus 7 上的 Android 4.2：canvas.drawText() 无法正常工作](https://stackoverflow.com/questions/13941270/android-4-2-on-nexus-7-canvas-drawtext-not-working-correctly)

[Android 4.2.1 错误的字距调整（间距）](https://stackoverflow.com/questions/13974129/android-4-2-1-worng-character-kerning-spacing)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T21:50:12.633

我设法通过使用 scalePaint.setLinearText(true) 在一个地方绘制文本字符，设置 textSize > 1.0f 来解决字距调整问题，然后使用 canvas.scale(float, float) 来解决这个问题使字体大小合适。这很丑陋而且很痛苦，但它对我有用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-12T04:03:22.417

这是针对`kerning issue`. `drawTextOnPath`工作如此...

替换这个：
`//canvas.drawText("Smushed text.", 0.5f, 0.7F, myTextPaint);`

有了这个：

```
private Path strightPath; <br>
strightPath = new Path(); <br>
strightPath.moveTo(0.1f, 0.5f);<br>
strightPath.lineTo(0.9f, 0.5f); <br>
canvas.drawTextOnPath("This text is not smushed together.", strightPath, 0.0f, 0.2f, myTextPaint); 
```

# c++ - C++ Builder XE3, IntraWeb, 显示 SQL Server 数据库查询结果

> ID：14405133
> 
> 赞同：1
> 
> 时间：2013-01-18T18:19:12.443
> 
> 标签：c++, sql, c++builder, delphi-xe3, intraweb

我们公司正在开始开发需要访问我们的 SQL Server 数据库的 IntraWeb 应用程序。我正在尝试创建一个非常基本的应用程序来从我们的数据库中获取一列数据并以任何可能的方式显示它。我曾多次尝试这样做，但只看到失败。据我所知，我什至无法获得查询结果。我正在使用 C++ Builder XE3。这就是我正在做的...

*   创建 IntraWeb 应用程序向导（独立）
*   将#include "UserSessionUnit.h" 添加到 Unit1.cpp
*   将 IWServerController->ComInitialization 设置为 ciMultiThreaded
*   将 TADOConnection 拖到 UserSessionUnit
*   使用 builder 设置 ADOConnection1->ConnectionString (Microsoft OLE DB Provider for SQL Server)
*   将 TADOQuery 拖到 UserSessionUnit
*   将 ADOQuery1->Connection 设置为 ADOConnection1
*   将 ADOQuery1->SQL 设置为“SELECT Column1 FROM Table1”
*   将 TDataSource 拖到 UserSessionUnit
*   将 DataSource1->DataSet 设置为 ADOQuery1
*   将 TIWDBGrid 拖到 Unit1
*   将 IWDBGrid1->DataSource 设置为 IWUserSession.DataSource1
*   创建 IWForm1 时运行查询...

`void __fastcall TIWForm1::IWAppFormCreate(TObject *Sender) { UserSession()->ADOQuery1->Open(); }`

我想这应该可行。应用程序构建和运行没有错误，但只显示一个空网格...我在 C++ Builder VCL 表单应用程序中复制了这个场景，它没有问题（当然使用 TDBGrid 而不是 TIWDBGrid）。我已经尝试了几个“TIWDB”组件，但无济于事。

# java - java异常：ResultSet关闭后不允许操作

> ID：14405134
> 
> 赞同：0
> 
> 时间：2013-01-18T18:19:14.270
> 
> 标签：java, sql

我有以下例外： ![在此处输入图像描述](../Images/46f64e2125b19e004c58d65dca980f0a.png)

这是相关的代码部分：Server.Proxy.update_allLogOut:（第 65 行是 while 括号）

```
 public void update_allLogOut ()
{
    try 
    {
        ResultSet rs;
        stmt = conn.createStatement();
        rs = stmt.executeQuery("SELECT * FROM sysuser WHERE login=1");
        while(rs.next())
        {
            stmt.executeUpdate("UPDATE sysuser SET login=0");
        }
        rs.close();
    } catch (SQLException e) {e.printStackTrace();}

} 
```

服务器.服务器.:

```
 public Server(int port) 
 {
    super(port);
    func.update_allLogOut();
  } 
```

主要的：

```
Server sv = new Server(5555); 
```

我必须指出，它在 99% 的情况下都没有异常运行。但有几次我得到这个异常，我无法弄清楚它为什么会发生。有任何想法吗？很明显，有些事情做错了，但在这种情况下，这里所有类似的主题都没有给出答案......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T18:22:12.860

您正在使用`stmt`循环的结果`SELECT`和`UPDATE`循环内的结果进行迭代。这不起作用，因为在您执行 的那一刻`UPDATE`，与 关联的结果集`SELECT`被关闭。

要修复，请使用两个单独的`Statement`对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T18:22:52.513

我不确定，这个块：

```
 stmt = conn.createStatement();
    rs = stmt.executeQuery("SELECT * FROM sysuser WHERE login=1");
    while(rs.next())
    {
        stmt.executeUpdate("UPDATE sysuser SET login=0");
    }
    rs.close(); 
```

是个好主意。为什么不只执行简单的查询：`UPDATE sysuser SET login=0 WHERE login=1`？

此外，使用相同的`stmt`内部`while`循环 - 这是一个严重的错误。

# php - 单击将 JSON 数据放入 DIV

> ID：14405138
> 
> 赞同：0
> 
> 时间：2013-01-18T18:19:40.103
> 
> 标签：php, jquery-ui, jquery

单击时，我试图通过 URL 从 JSON 获取数据到`<div>`.

我的 JSON 返回一个 id 和我试图将内容放入 div 的内容`#west-container`。

有人可以告诉我我做错了什么吗？

我在 url 找到的 JSON =`[{"id":"2","title":"Generic Overview","content":"This is content here"}]`

```
$('#jqxTree').bind('select', function (event) {
var loadPages = jQuery.parseJSON(
        jQuery.ajax({
            url: 'university/article/3', 
            async: false,
            dataType: 'json'
        }).responseText
    );

for(i=0; i < loadPages.length ; i++){
    var current = loadPages;
    $("#west-container").load(current.content);
}
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T18:39:31.177

你可以试试这个：

```
 $('#jqxTree').bind('select', function (event) {
   jQuery.ajax({
       url: 'university/article/3',
       async: false,
       dataType: 'json',
       success:function(data){
           $.each(data, function(i, item){
               $("#west-container").html(item.content);
           });        //-----------------^^^^^^^^^^^^---This will fetch you the
       }              //--------------------------------content from json
   });                //-------------------------"content":"This is content here"
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T18:27:13.043

```
$.getJSON( 'university/article/3', function(data) {
 // Do stuff here

 var oDiv = $( 'west-container' ).html( '' );

 for( var i in data ) {
  oDiv.append( data[i].content );
 }
} ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T18:31:33.417

采用

```
 $.ajax({
        url: "url",
        type: 'POST',
        contentType: 'application/json; charset=utf-8',
        data:json,
        dataType:'text',
        async: false,
    }).done(function( data1 ) {
        data=jq.parseJSON(data1);
    }); 
```

为了使用数据，请使用“data.id，data.title”等。

为了将数据推送到 div，请使用

```
$('#DivId').test(data.id); 
```

# java - 在非 Web 项目中使用 Java Web 框架有意义吗？

> ID：14405140
> 
> 赞同：1
> 
> 时间：2013-01-18T18:19:42.347
> 
> 标签：java, spring

我正在开发一个机器学习库，我需要一个秒表来测量方法的执行时间。事实证明 Spring 有一个不错的选择，但是将 Spring 用于非 Web 项目是否有意义？好的一面当然是重用代码，但有什么缺点吗？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-18T18:32:09.337

`Spring`不仅仅是为 Web 应用程序而设计的。`Spring MVC`是您通常用于 Web 应用程序的基于请求的框架。现在，如果您只想要`stopwatch`实用程序，没有什么能阻止您只`spring-core`在项目中包含 jar。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T18:37:56.333

Spring 不是一个 Web 框架。Spring MVC 子项目是。Spring 还支持多种其他 Web 框架。

话虽如此，您可以在桌面独立应用程序中自由使用 Spring IoC、AOP、持久性等。我每天都这样做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T18:40:01.103

我已经看到一些 Apache 项目从其他 Apache 项目中克隆了一些方法（或类），只是为了避免在需要非常特定的功能时添加 jar 依赖项。

包含 spring 的替代方法可能是使用更通用的库。[这里](https://stackoverflow.com/questions/8255738/is-there-a-stopwatch-in-java)提出的两个建议是 Google Guava 和 Apache Commons Lang。我两者都用，在这些项目中找到其他有用的通用实用程序的几率很高。

# windows - SetupDiGetClassDevs 列出 SCSI 驱动器失败，错误代码为 13 (ERROR_INVALID_DATA)

> ID：14405147
> 
> 赞同：0
> 
> 时间：2013-01-18T18:20:15.677
> 
> 标签：windows, visual-c++, setupapi

我有一个相当有趣的问题，我无法找到解决方案。我正在使用 Setup API 列出系统中的驱动器。将枚举器设置为“IDE”时，使用下面列出的代码没有问题。当枚举器值设置为“SCSI”时，我会感到焦虑。重现此问题的代码如下：

```
#include <iostream>
#include <Windows.h>
#include <SetupAPI.h>
#include <cfgmgr32.h>
#include <devguid.h>

int main() {
    std::cout << "Looking for only SCSI disks" << std::endl;
    HDEVINFO hDevs(SetupDiGetClassDevs(&GUID_DEVCLASS_DISKDRIVE, "SCSI", NULL, DIGCF_PRESENT));
    if(INVALID_HANDLE_VALUE == hDevs) {
        DWORD error(GetLastError());
        std::cout << "Handle returned is invalid. Error code: " << error << std::endl;
        return 1;
    }

    SP_DEVINFO_DATA sp = {sizeof(SP_DEVINFO_DATA)};
    char buff[256];
    memset(buff, 0, 256);
    DWORD index(0);

    std::cout << "The handle is valid, listing drives now" << std::endl;
    while(SetupDiEnumDeviceInfo(hDevs, index++, &sp)) {
        CM_Get_Device_ID(sp.DevInst, buff, 256, 0);
        std::cout << buff << std::endl;
        memset(buff, 0, 256);
    }

    SetupDiDestroyDeviceInfoList(hDevs);
    return 0;
} 
```

如您所见，这段代码没有什么特别之处。问题是，在某些笔记本电脑上，此代码在 SetupDiGetClassDevs() 处出错。检查 GetLastError() 表明它因 ERROR_INVALID_DATA (0xd) 而失败。我不明白为什么。这个完全相同的程序，以我的用户（具有管理员权限）和非特权用户的身份在我的开发盒上运行，无论是否存在 SCSI 驱动器都可以正常工作。

我知道使用的 GUID 是正确的。它在 devguid.h 中定义。“SCSI”是一个有效的 PnP 枚举器，正如在此[MSDN 页面](http://msdn.microsoft.com/en-us/library/windows/hardware/ff551069%28v=vs.85%29.aspx)上引用的那样，并且还通过检查设备管理器中的“枚举器”属性。第三个参数可能是 NULL，第四个是这个函数的有效定义标志。我知道这一点是因为，除了这些笔记本电脑之外，它适用于我曾经尝试过的所有系统（在我的组织中，这种系统相当多）。我希望这里的某个人可能知道在这些条件下会导致 SetupDiGetClassDevs() 因此错误而失败的原因，或者至少可以为我指明正确的方向。我不是 Windows 专家，我可能会遗漏系统配置或权限方面的某些内容（尽管错误并未暗示）。

我希望很清楚，我已经在一台笔记本电脑上运行了这段代码，我可以同时以具有管理员权限的用户和管理员用户的身份对其进行测试：两者都具有相同的结果。笔记本电脑是运行 Windows 7 64 位 Service Pack 1 的 HP EliteBook 8460p。以 32 位或 64 位编译此代码没有区别。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T18:56:32.910

我将发布我从 MSDN 支持论坛上的一位同事那里得到的答案，以帮助可能对同一问题感到困惑的人。显然，这是 Windows 7 的预期行为。如果系统从未见过具有为 SetupDiGetClassDevs() 指定的枚举器的硬件，则发生故障并且预期会出现此错误代码。

作为参考，我问这个问题的线程在[这里](http://social.msdn.microsoft.com/Forums/en-US/wdk/thread/0c22d477-7fe9-40f9-9bf0-1c5b5d295c78/#08072b63-4fc9-4399-a46a-fc3d6f7d9423)链接。

# tuples - 通过从 ML 中的另一个元组中删除第一个元素来创建一个元组

> ID：14405148
> 
> 赞同：0
> 
> 时间：2013-01-18T18:20:16.473
> 
> 标签：tuples, sml, ml

使用 ML 作为编程语言，我们有列表和元组，在列表的情况下，我们可以通过从原始列表中删除或附加元素来从另一个列表中形成一个列表，例如，如果我们有：

```
val x = [7,8,9] : int list 
```

在 REPL 中，我们可以进行如下操作：

```
- hd x;
val it = 7 : int
- tl x;
val it = [8,9] : int list 
```

现在如果我们有一个元组让我们说：

```
val y = (7,8,9) :int*int*int 
```

现在的问题是，我们可以通过从原始元组中删除第一个元素来获得一个更小的元组吗？换句话说，如何以与我们在 list 情况下类似的方式 删除`(#1 y)`和拥有新元组。`(8,9)`

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T18:55:26.557

元组与列表非常不同。对于列表，大小不需要在编译时知道，但对于元组，不仅在编译时知道元素的数量，每个元素的类型都独立于其他元素。

取 的类型签名`tl`：

```
- tl;
val it = fn : 'a list -> 'a list 
```

它是`'a list -> 'a list`- 换句话说，`tl`接受一个并返回另一个。为什么我们没有一个用于元组的呢？假设我们想要类似的东西`list``'a`

```
y = (1,2,3);
tail y;        (* returns (2,3) *) 
```

为什么这没有意义？想想`tail`. 那会是什么？在这种情况下，显然是

```
'a * 'b * 'c -> 'b * 'c 
```

获取a 、 `'a`a`'b`和`'c`a 的乘积并返回 a 和 a 的`'b`乘积`'c`。在 ML 中，定义的所有函数都必须具有静态确定的类型签名。不可能有一个**处理所有可能的元组大小**`tail`的元组函数 ，因为每个元组大小本质上是*不同的类型*。

 ***```
'a list 
```

可以是多种列表的类型：`[1,2,3,4]`, or `["A", "short", "sentence"]`, or [true, false, false, true, false]。在所有这些情况下，类型变量的值`'a`都绑定到不同的类型。（整数、字符串和布尔值）。并且`'a list`可以是任意大小的列表。

但是采取元组：

```
(1, true, "yes");   (* (int * bool * string) *)
("two", 2)          (* (string, int) *)
("ok", "two", 2)    (* (string, string, int) *) 
```

与列表不同，这些都是不同的类型。`'a list`因此，虽然所有列表的类型签名都很简单（

所以你必须这样做：

```
y = (7, 8, 9);
(a, b, c) = y; 
```

是你的头，`a`你可以用 . 重新创建尾巴`(b,c)`。或者创建自己的尾巴：

```
fun tail (a,b,c) = (b, c) 
```

这也让我们直观地理解为什么这样的函数没有意义：如果不可能定义一个`tail`用于所有元组类型的单一函数：

```
fun tail (a,b) = (b)
  | tail (a,b,c) = (b, c)  (* won't compile *) 
```

您还可以使用`#`速记来获取元组的某些元素：

```
#1 y;   (* returns 7 *) 
```

但请注意，这`#1`不是函数，而是编译时的简写。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T19:03:18.557

列表和元组是不可变的，因此没有像从中删除元素这样的事情。

您可以通过分解原始元组来构造一个新的元组。在 SML 中，首选方法是使用模式匹配：

```
fun getLastTwo (x, y, z) = (y, z) 
```

如果你喜欢`#n`函数，你也可以使用它们：

```
val xyz = (7, 8, 9)
val yz = (#2 xyz, #3 xyz) (* (8, 9) *) 
```***

# php - 如何限制glob返回的文件数量以节省内存？

> ID：14405150
> 
> 赞同：2
> 
> 时间：2013-01-18T18:20:20.620
> 
> 标签：php, glob

我制作了程序来偶尔扫描目录，然后删除旧的缓存文件。

通常缓存文件的数量非常大，我得到了内存不足的错误。

```
glob(cacheme_directory()."*"); 
```

如何使 glob 返回有限数量的文件？先说 50000。然后我们将删除它们，然后在下一个会话中我们可以再次删除，等等。

这与[限制全局目录/文件夹列表的结果数量不同](https://stackoverflow.com/questions/5471935/limit-number-of-results-for-glob-directory-folder-listing)

我需要减少使用的内存量。因此加载整个东西然后删除东西是行不通的。

这是完整的程序

```
if (mt_rand(0,1000)==0)
{

    $files = glob(cacheme_directory()."*");
    foreach($files as $file)
    {
        $filemtime=filemtime ($file);
        if (is_file($file) && time()-$filemtime>= $cacheAge)
        {
            unlink($file);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T18:28:38.957

[用DirectoryIterator](http://php.net/manual/en/class.directoryiterator.php) ( *PHP >= 5* )试试：

```
$i = new DirectoryIterator( cacheme_directory() );
foreach ($i as $val) {
    if ($val->isFile()) {
        echo "{$val->getFilename()} ({$val->getMTime()})\n";
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-18T18:24:02.110

Glob 将返回整个目录的数组，您无法更改。

要仅将有限数量的文件读入内存，请检查 PHP 中的[opendir](http://php.net/manual/en/function.opendir.php)函数，它让您可以在资源上编写自己的循环。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-18T18:22:10.873

你不能用 glob 做到这一点。但是，您可以使用一些通配符技巧。像

```
glob(cacheme_directory()."1*"); 
```

如果文件的名称仅以数字开头，这将返回大约十分之一的文件。如果它们只包含字母字符，您可以使用它`a*`来获取文件名的二十六分之一。

你可以循环播放。

```
for($i=0;$i<10;$i++){
    glob(cacheme_directory()."$i*");
} 
```

或者

```
for($i=ord('a');$i<=ord('z');$i++){
    glob(cacheme_directory().chr($i)."*");
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-18T18:33:13.547

就像@Dutow 说的：glob 会返回整个目录的数组，你不能改变它。

使用 PHP 循环遍历目录的另一种方法是简单地发出 shell 命令，例如：

```
find /path/to/cache/dir/ -type f -delete 
```

这将删除给定目录中的所有文件。或者您可以匹配某些名称，例如：

```
find /path/to/cache/dir/ -type f -name 'cache*' -delete 
```

这假设您可以访问`shell()`or`shell_exec()`命令，但不需要大量内存，并且可以通过`&`在命令末尾添加操作员来进行后台处理。

# php - mySQLi 未正确选择数据

> ID：14405151
> 
> 赞同：1
> 
> 时间：2013-01-18T18:20:20.747
> 
> 标签：php, mysql, mysqli

我正在从 mysql_ 转换为 mysqli。做一些教程。尽管阅读和谷歌搜索该主题，但并没有取得太大的成功。我尝试了一个准备好的语句，但它一直输出 0 个结果（即 now_rows =0 ）。当我手动查询 mySQL 表时，会返回许多结果。

mySQLI 5.0.96 已启用

```
<?
include("conn.php");
// SELECT sql query
$sql = "SELECT id, rotation, assignedRad FROM sched_main WHERE thedate = ?"; 
// perform the query and store the result
$query = $conn->prepare($sql);
$thedate='2013-01-02';
$query->bind_param('s', $thedate);
$query->execute();
// if the $query contains at least one row
if ($query->num_rows > 0) {
  // output data of each row from $query
  while($row = $query->fetch_assoc()) {
    echo '<br /> id: '. $row['id']. ' - name: '. $row['rotation']. ' - pass: '.     $row['assignedRad'];
  }
  $query->free();
}
else {
  echo '0 results';
}
?> 
```

问题2：有没有简单的方法来调试mysqli？使用 mysql_query 我会简单地回显 $sql; 看看 SELECT 语句在我的调试过程中是什么样子的。提前致谢

更新：

这是更新代码的片段，如下所示：

```
$query->bind_param('s', $thedate);
if (!$query->execute()) {
  die($conn->error);
}
$query->store_result();
// if the $query contains at least one row
if ($query->num_rows > 0) {
  // output data of each row from $query
  while($row = $query->fetch()) {
    echo '<br /> id: '. $row['id']. ' - name: '. $row['rotation']. ' - pass: '. $row['assignedRad'];
  }
  $query->mysqli_free();
}
else {
  echo '0 results';
} 
```

现在它以数组 $row 值作为无值输出：

```
id: - name: - pass: 
id: - name: - pass: 
id: - name: - pass: 
```

.. ETC...

我也收到致命错误：调用未定义的方法 mysqli_stmt::mysqli_free()

当我尝试 free() 时，我得到：致命错误：调用未定义的方法 mysqli_stmt::free()

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T19:41:13.403

我不确定调试部分，但您可能需要在调用之前存储 DB 执行调用的结果`$query->num_rows`。此外，您可能需要检查准备和执行是否成功。

```
...
if (!$query = $conn->prepare($sql)) {
  die($conn->error);
}
$thedate='2013-01-02';
$query->bind_param('s', $thedate);
if (!$query->execute()) {
  die($conn->error);
}
$query->store_result();
if ($query->num_rows > 0) {
  ...
} 
```

[`num_rows`](http://php.net/manual/en/mysqli-stmt.num-rows.php)有关更多信息，请参阅 PHP 文档[`error`](http://php.net/manual/en/mysqli.error.php)

# asp.net - 在后面的代码中调用 UpdatePanel

> ID：14405154
> 
> 赞同：0
> 
> 时间：2013-01-18T18:20:28.807
> 
> 标签：asp.net, ajax

我有一个包含文本框和一些标签的更新面板，这些标签包含在自定义用户控件中，这是向导控件中步骤的一部分。当用户在步骤上输入文本框时，更新面板会在用户单击文本框时触发。但是，我想要做的是在步骤加载时执行更新面板，因为从上一步开始填充文本框值。

是否会在页面加载方法上自动执行更新面板？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T18:30:10.913

您可以在后面的代码中调用 Update() 方法，但前提是您将 UpdateMode 设置为 Conditional。还要检查 ChildrenAsTriggers 是否设置为 false。

# mysql - 在 RDS 上，我可以在只读副本中创建 Master 上不存在的表吗？

> ID：14405163
> 
> 赞同：9
> 
> 时间：2013-01-18T18:20:55.817
> 
> 标签：mysql, master-slave, rds

我们有一个单独的 RDS 实例来处理会话状态表，但是发现会话数据库负载非常低。如果我们可以将实例处理会话转换为主数据库的只读副本，那么我们可以将其用于只读任务，即使副本中有很大的滞后也是安全的。

有没有人在 RDS 上做过这样的事情（是否可能且安全）？我应该注意任何严重的副作用吗？任何有助于更好地理解这一点的链接或帮助都会有所帮助。

[http://aws.amazon.com/rds/faqs/#95](http://aws.amazon.com/rds/faqs/#95)试图回答这个问题，但我正在寻找更多的见解。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2017-05-26T22:36:37.663

对的，这是可能的。`RDS`对于本地缓存的特定情况，我使用 , 成功使用它。

您需要将`read_only`副本上的参数设置为`0`. 我必须重新启动服务器才能使该参数起作用。

如果使用不同的表名，它会很好地工作，因为 RDS 不允许您设置：`replicate-ignore-table`参数。

请记住，主<>从之间不能有任何数据冲突。如果有一个语句在 上运行正常`MASTER`，但在 上失败`SLAVE`，那么你刚刚破坏了你的复制。这可能会发生，例如，当您`SLAVE`首先创建表，然后在一段时间后将该表添加到`MASTER`. 该`CREATE`语句将在 上正常工作`MASTER`，但在 上失败`SLAVE`，因为表已经存在。

假设，您需要非常小心，允许您的应用程序写入`SLAVE`. 如果您忘记/或犯了错误并开始为其他一些数据写入只读副本，最终您可能会丢失数据或遇到难以调试的问题。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-06-24T14:15:28.387

没有太多要添加的东西——在纯只读副本上真正有意义的唯一正常情况是添加一些索引等，如果它主要用于报告或其他读取密集型的东西。

如果您尝试预先计算大量数据并以其他方式修改只读副本上的内容，您需要*非常*小心，您不会更改数据——如果读取不再一致，那么您就有麻烦了：）

如果您对更改从属设备上的数据而主设备尝试更新它时会发生什么感到好奇，那么恕我直言，您已经走错了路。

TL；DR 除非您*真的*知道自己在做什么并且了解所有后果，否则不要这样做。

*   坦率地说，根据我的经验，MySQL 复制可能很古怪，所以即使知道*应该*发生什么以及*如果*主试图将更新的数据写入从属时会发生什么，你也已经更新了......谁知道呢。

# node.js - 使用会话验证用户的工作聊天示例 socket.io express node.js

> ID：14405164
> 
> 赞同：0
> 
> 时间：2013-01-18T18:20:56.863
> 
> 标签：node.js, session, express, socket.io

是否有任何工作示例存储会话并将该会话用于所有打开的窗口以让一个用户只连接到一个房间一次？

这个应用程序将获取 phpsessions 作为 node.js 会话，但我不知道如何只让一个人访问这个聊天应用程序一次

```
//define what we need
    var express = require('express'),
        app = express(),
        memcache = require("memcache"),
        http = require('http'),
        server = http.createServer(app),
        io = require('socket.io').listen(server),
        co = require("./cookie.js"),
        php = require('phpjs'),
        codein = require("node-codein");

    // answer all request from users and send them back index.html for root access
    app.get('/', function (req, res) {
      res.sendfile(__dirname + '/index.html');
      var cookieManager = new co.cookie(req.headers.cookie);

      //using memcache as our session store
      var client = new memcache.Client(11211, "localhost");
      //connect to memcache client
      client.connect();
      //get our cookie sessions
        user = client.get("sessions/"+cookieManager.get("sec_session_id"), function(error, result){
                var session = JSON.parse(result);
                            //get just username from sessions(sessions store name and family and chat username in this case)
                user = JSON.parse(session.name);
                user = user.username;
                            //use this function to pass our chat username to our function
                storeUsername(user);
        });

    });

    function storeUsername(user){
    // usernames which are currently connected to the chat

    var usernames = {};
    io.sockets.on('connection', function (socket) {
        usernames[socket.id] = socket;
        // when the client emits 'sendchat', this listens and executes
        socket.on('sendchat', function (data) {
            // we tell the client to execute 'updatechat' with 2 parameters
            io.sockets.emit('updatechat', socket.username, data);
        });

        // when the client emits 'adduser', this listens and executes
        socket.on('adduser', function(username){
            // we store the username in the socket session for this client
            socket.username = user;
            // add the client's username to the global list
            // echo to client they've connected
            if(php.in_array(socket.username,usernames)){
                delete usernames[socket.username];
            }else{
                usernames[user] = user;
                console.log('not exist');
            socket.emit('updatechat', 'SERVER', 'you have connected');
            // echo globally (all clients) that a person has connected
            socket.broadcast.emit('updatechat', 'SERVER', username + ' has connected');
            // update the list of users in chat, client-side
            io.sockets.emit('updateusers', usernames);
            }
        });

        // when the user disconnects.. perform this
        socket.on('disconnect', function(){
            // remove the username from global usernames list
            delete usernames[socket.username];
            // update list of users in chat, client-side
            io.sockets.emit('updateusers', usernames);
            // echo globally that this client has left
            socket.broadcast.emit('updatechat', 'SERVER', socket.username + ' has disconnected');
        });
    });
    }
    server.listen(3000); 
```

一切正常，并且定义了发送数据的用户，但是当我在另一个选项卡中访问此站点时，我将再次连接到 socket.io 服务器

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T20:07:56.343

您的意思是在浏览器选项卡之间共享 websocket 吗？

[跨浏览器选项卡共享 websocket？](https://stackoverflow.com/questions/9554896/sharing-websocket-across-browser-tabs)

但是为什么需要共享套接字呢？我为论坛开发了一个 node.js 聊天，我们不关心用户有多少个套接字。我们只有一个包含套接字列表的“用户”对象。我们不在乎套接字是否来自 Firefox，来自 android 应用程序......这不是问题。当我们需要向用户发送信息时，我们将其发送到每个套接字。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T18:19:21.730

你可以试试这个。它正在使用 express 和 socket.io [https://github.com/gravityonmars/Balloons.IO](https://github.com/gravityonmars/Balloons.IO)

# android - 从我的第一个活动中检索并显示我选择的 ImageView 到我的第二个活动

> ID：14405168
> 
> 赞同：1
> 
> 时间：2013-01-18T18:21:09.680
> 
> 标签：android, android-intent, imageview

我是 Android 开发的新手，我阻止了一点。我已经执行了一个 Android 教程，一切都很好，但我想`ImageView`在我的第二个`Activity`.

这是我的第一个`Activity` `hotel.java`：

```
public class hotel extends Activity implements View.OnClickListener
{
    final String EXTRA_LOGIN = "user_login";
    final String EXTRA_PASSWORD = "user_password";

    Button button;

    int image_index = 0;
    private static final int MAX_IMAGE_COUNT=8;

    private Integer[]mImageIds ={
            R.drawable.image1,
            R.drawable.image2,
            R.drawable.image3,
            R.drawable.image4,
            R.drawable.image5,
            R.drawable.image6,
            R.drawable.image7,
            R.drawable.image8,
    };

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.hotel);
        ImageView imgView = (ImageView) findViewById(R.id.pictogramme);
        imgView.setImageResource(mImageIds[image_index]);

        BitmapFactory.Options opt = new BitmapFactory.Options();
        opt.inScaled = false;
        opt.inSampleSize = 1;
        opt.inDither = true;
        Bitmap bitmap = BitmapFactory.decodeResource(getResources(),mImageIds[image_index] ,opt);
        ByteArrayOutputStream baos = new ByteArrayOutputStream();
        bitmap.compress(Bitmap.CompressFormat.PNG, 100, baos);
        final byte[]b = baos.toByteArray();

        final EditText login = (EditText)findViewById(R.id.user_email);
        final EditText pass = (EditText)findViewById(R.id.user_password);

        final Button loginButton = (Button) findViewById(R.id.connect);
        loginButton.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                Intent intent = new Intent(hotel.this, hoteldisplay.class);

                intent.putExtra("picture", b);
                intent.putExtra(EXTRA_LOGIN, login.getText().toString());

                intent.putExtra(EXTRA_PASSWORD,pass.getText().toString());

                startActivity(intent);
            }
        });

        Intent intent = getIntent();

        Button next = (Button)findViewById(R.id.button_next);
        next.setOnClickListener(this);

        Button previous = (Button)findViewById(R.id.button_previous);
        previous.setOnClickListener(this);

        showImage();
    }

    private void showImage() {
        ImageView imgView = (ImageView) findViewById(R.id.pictogramme);
        imgView.setImageResource(mImageIds[image_index]);
    }

    @Override
    public void onClick(View v) 
    {
        switch(v.getId())
        {
        case (R.id.button_previous):
            image_index--;

            if (image_index == -1){
                image_index = MAX_IMAGE_COUNT -1;
            }
            showImage();
            break;

        case (R.id.button_next):
            image_index++;

            if (image_index == MAX_IMAGE_COUNT){
                image_index = 0;
            }

            showImage();
        break;
        }

    } 

} 
```

我的第二个`Activity` `hoteldisplay.java`：

```
public class hoteldisplay extends Activity {

    final String EXTRA_LOGIN = "user_login";
    final String EXTRA_PASSWORD = "user_password";

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.login_display);

        Intent intent = getIntent();

        Bundle extras = getIntent().getExtras();
        byte[] b = extras.getByteArray("picture");

        Bitmap bmp = BitmapFactory.decodeByteArray(b, 0, b.length);
        ImageView image = (ImageView) findViewById(R.id.image_display);

        TextView loginDisplay = (TextView) findViewById(R.id.email_display);
        TextView passwordDisplay = (TextView) findViewById(R.id.password_display);

        if (intent != null) {
           loginDisplay.setText(intent.getStringExtra(EXTRA_LOGIN));
           passwordDisplay.setText(intent.getStringExtra(EXTRA_PASSWORD));
           image.setImageBitmap(bmp);
        }

    } 

} 
```

目前我正确检索了我的`ImageView`，但它是索引中的第一个，我想要选择好的图像。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T18:42:34.457

通过意图传递二进制对象是一种 hack。有一种更简单（虽然也很粗略）的方法来传递对象，即使用`Application`类的实例来保存`Global Variables`.

您不必手动创建`Globals`. 它会在您的第一个活动开始时自动创建。

例如：

```
/*  Globals.java   */
public class Globals extends Application {
    ImageView img;
}

/*  Hotel.java   */
public class Hotel extends Activity {
    public void storeImageView() {
        Globals globals = (Globals) getApplicationContext();
        globals.img = myImgView;    // save a ptr to your ImageView
        myImgView = null       //  **see note below
    }
}

/*  HotelViewer.java   */
public class HotelViewer extends Activity {
    public void retrieveImageView() {
        Globals globals = (Globals) getApplicationContext();
        ImageView image = globals.img;    // retrieve ImageView
    }
} 
```

**注意：如果你想`Garbage Collector`清理你的`Hotel`活动，你不能有一个指向`Global`对象的活动指针。

# python - python字符串删除字符串中的1个选项卡

> ID：14405171
> 
> 赞同：1
> 
> 时间：2013-01-18T18:21:18.197
> 
> 标签：python, string

我有一个字符串

```
 "This is a small \t\t world" 
```

假设字符串在单词“small”和“world”之间有 2 个制表符。如何修剪其中一个制表符空格，以便获得：

```
 "This is a small \t world" 
```

“小”和“世界”这两个词在句子中只能出现一次。基本上给定两个特定的词，我想修剪它们之间的额外标签

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T18:24:11.863

使用`re`...

```
import re

s = b"This is        a small         world"

s = re.sub(r'(.*\bsmall *)\t+( *world\b.*)', r'\1\t\2', s)

print s 
```

输出：

```
>>> 
This is          a small     world 
```

这将保留两者前后的所有空格`tabs`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T18:37:19.573

```
def remove_tab(st, word1, word2):
    index1 = st.find(word1)
    index2 = st[index1:].find(word2)
    replacement = st[index1:index2].replace('\t\t', '\t')
    return st[:index1] + replacement + st[index2:] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-18T18:41:50.703

使用`regex`：

```
In [114]: def func(st,*words):
    rep=" \t ".join(words)
    reg="\b%s\s?\t{1,}\s?%s\b"%(words[0],words[1])
    return re.sub(reg,rep,st)
   .....: 

In [118]: strs='This is \t\t\t a small\t\t\tworld, very small world?'

In [119]: func(strs,"small","world")
Out[119]: 'This is \t\t\t a small \t world, very small world?'

In [120]: func(strs,"is","a")
Out[120]: 'This is \t a small\t\t\tworld, very small world?' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-18T18:28:10.140

您可以使用 Python re 模块来使用正则表达式：

```
import re

s = "This is \t\t a small \t\t world"

s1 = re.sub(r'(?<=small +)\t+(?= +world)', '\t', s) 
```

这将在and`\t`之间连续找到一个或多个 ，并将整个's 序列替换为单个.`"small "``" world"``\t``\t`

# java - Wsimport 生成的类和我的原始 Web 服务类中的名称冲突

> ID：14405176
> 
> 赞同：0
> 
> 时间：2013-01-18T18:21:30.243
> 
> 标签：java, web-services, class, duplicates, wsimport

我有一个简单的 Web 服务类，定义如下：

```
package com.me.basiccalcws;

import javax.jws.WebService;

@WebService
public class Calculator {
    public int add(int a, int b) {
        return a + b;
    }
} 
```

我使用*wsgen*工具生成一个*wsdl*：

```
wsgen -classpath ..\bin -wsdl -s src -r wsdl -d bin com.me.basiccalcws.Calculator 
```

然后我使用*wsimport*生成客户端存根：

```
wsimport -s src ..\_wsgen\wsdl\CalculatorService.wsdl 
```

*运行wsimport*后生成的文件如下：

```
Add.java
AddResponse.java
Calculator.java
CalculatorService.java
ObjectFactory.java
package-info.java 
```

并且所有这些文件都具有与我原来的 Web 服务类 (com.me.basiccalcws) 相同的命名空间。

当我将这些文件导入到我的 Eclipse 项目中时，会出现名称冲突。我原来的类名是 Calculator，但是*wsimport*工具在同一个命名空间中创建了另一个名为 Calculator 的类。

如何防止这种命名空间/名称冲突（或者是故意的）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T22:27:56.890

您可以做的最简单的事情是`targetNamespace`在`javax.jws.WebService`注释中提供类似的东西。

```
package com.me.basiccalcws;

import javax.jws.WebService;

@WebService(targetNamespace = "http://client.basiccalcws.me.com/")
public class Calculator {
    public int add(int a, int b) {
        return a + b;
    }
} 
```

如果您没有在 中提供`-p`选项[`wsimport`](http://docs.oracle.com/javase/6/docs/technotes/tools/share/wsimport.html)，这`targetNamespace`就是命运包。

# jquery - 更新到 Jquery 1.9.0 时 jquery.unobtrusive-ajax 插件损坏

> ID：14405178
> 
> 赞同：15
> 
> 时间：2013-01-18T18:21:34.330
> 
> 标签：jquery, jquery-validate, unobtrusive-ajax

> **可能重复：**
> [jQuery 1.7 - 将 live() 变成 on()](https://stackoverflow.com/questions/8021436/jquery-1-7-turning-live-into-on)

//解决方案：我只是替换了四个匹配项，例如建议的已批准答案，并且不显眼的 ajax 插件已启动并再次使用 jquery 1.9.0

更新//观察底部标记的答案的注释，这是解决此问题的最佳方法。

//原来的帖子：我升级到 jQuery 1.9.0 但后来不显眼的 ajax 插件因为他们弃用了 live 方法而失败了。我试图像这样替换它，因为升级为我修复了另一个错误。但是，它不起作用。我只是像这样将 live 替换为 on：

```
$("a[data-ajax=true]").on("click", function (evt) {
        evt.preventDefault();
        asyncRequest(this, {
            url: this.href,
            type: "GET",
            data: []
        });
    });

    $("form[data-ajax=true] input[type=image]").on("click", function (evt) {
        var name = evt.target.name,
            $target = $(evt.target),
            form = $target.parents("form")[0],
            offset = $target.offset();

        $(form).data(data_click, [
            { name: name + ".x", value: Math.round(evt.pageX - offset.left) },
            { name: name + ".y", value: Math.round(evt.pageY - offset.top) }
        ]);

        setTimeout(function () {
            $(form).removeData(data_click);
        }, 0);
    });

    $("form[data-ajax=true] :submit").on("click", function (evt) {
        var name = evt.target.name,
            form = $(evt.target).parents("form")[0];

        $(form).data(data_click, name ? [{ name: name, value: evt.target.value }] : []);

        setTimeout(function () {
            $(form).removeData(data_click);
        }, 0);
    });

    $("form[data-ajax=true]").on("submit", function (evt) {
        var clickInfo = $(this).data(data_click) || [];
        evt.preventDefault();
        if (!validate(this)) {
            return;
        }
        asyncRequest(this, {
            url: this.action,
            type: this.method || "GET",
            data: clickInfo.concat($(this).serializeArray())
        });
    }); 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-18T18:27:46.003

`live`使用`on`（委托）的等价物是：

```
$(document).on("click","a[data-ajax=true]", function (evt) {...}); 
```

你可以在这里找到 jquery 的`.on()`方法文档：

[**>>** http://api.jquery.com/on/ **<<**](http://api.jquery.com/on/)

> .on() 方法将事件处理程序附加到 jQuery 对象中当前选定的元素集。从 jQuery 1.7 开始，.on() 方法提供了附加事件处理程序所需的所有功能。有关从旧 jQuery 事件方法转换的帮助，请参阅**.bind()**、 **.delegate()**和**.live()**。
> 
> **要删除与 .on() 绑定的事件**，请参阅 .off( **)**。要附加**仅运行一次**然后自行删除的事件，请参阅**.one()**

# javascript - 如何使用 vanilla JavaScript 滚动到顶部？

> ID：14405180
> 
> 赞同：3
> 
> 时间：2013-01-18T18:21:49.123
> 
> 标签：javascript, scroll, offset

我试图`scrollTop`在 vanilla JS 中模仿（jQuery），所以单击它会滚动到一个元素。这很好用 - 除非您已经滚动过元素。所以它不会以相反的方式滚动。我的公式应该包含`window.pageYOffset`吗？

```
var moves = function(scrollz) {
    var scrollPos = document.getElementById(scrollz).offsetTop - ((document.documentElement.clientHeight - document.getElementById(scrollz).offsetHeight) / 2);

    var timerID = setInterval(function() {
        window.scrollBy(0, speed);
        if (window.pageYOffset >= scrollPos) {
            clearInterval(timerID);
        }
    }, 13);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T18:38:13.603

scrollBy 将从“实际位置”滚动到“定义的像素数”我想你可以看看[scrollTo](https://developer.mozilla.org/en-US/docs/Web/API/Window/scrollTo)

# java - NullPointerException 从方法返回数组

> ID：14405183
> 
> 赞同：-2
> 
> 时间：2013-01-18T18:22:03.303
> 
> 标签：java, mysql, arrays

我的数据库上有一个 2x2 表（2 列和 2 行填充），我试图将整个表放到我的数组中，但是当我尝试在控制台上打印结果时，我得到*NullPointerException*。我无法弄清楚我错过了什么。

主要代码：

```
public static void main(String[] args) {
    mySQLManager Manager = new mySQLManager();
    Manager.Connect();
    String[] Dispositivos = null;
    Dispositivos = Manager.GetDevices();
    for (int i = 0; i < Dispositivos.length; i++){
        System.out.println(Dispositivos[i]);
    }
    Manager.Disconnect();
} 
```

方法：

```
public String[] GetDevices(){
    String[] Devices = null;
    String query = "SELECT * FROM devices";
    int index = 0;
    try {
        statement = connection.createStatement();
        resultSet = statement.executeQuery(query);
        while(resultSet.next()){
            Devices[index + 0] = resultSet.getString(1);
            Devices[index + 1] = resultSet.getString(2);
            index+=2;
        }
    } catch (SQLException ex) {
        System.out.println("\nNão foi possivel ler os dispositivos do database");
        System.out.print(ex.getMessage());

    }
    return Devices;
} 
```

我得到的错误：

> 在 logictesting.LogicTesting.main(LogicTesting.java:29) Java 结果中的 logictesting.mySQLManager.GetDevices(mySQLManager.java:130) 线程“main”java.lang.NullPointerException 中的异常结果：1

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T18:23:37.927

问题`Devices`在于`null`：

```
 Devices[index + 0] = resultSet.getString(1);
        Devices[index + 1] = resultSet.getString(2); 
```

最简单的解决方法可能是`Devices`变成一个，`ArrayList`从那时起它很容易动态增长。

```
public String[] GetDevices(){
    List<String> Devices = new ArrayList<String>();
    String query = "SELECT * FROM devices";
    try {
        statement = connection.createStatement();
        resultSet = statement.executeQuery(query);
        while(resultSet.next()){
            Devices.add(resultSet.getString(1));
            Devices.add(resultSet.getString(2));
        }
    } catch (SQLException ex) {
        System.out.println("\nNão foi possivel ler os dispositivos do database");
        System.out.print(ex.getMessage());

    }
    return Devices.toArray(new String[0]);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T18:24:18.367

在向其中插入元素之前初始化**Devices数组。**

```
public String[] GetDevices(){
    String[] Devices = new String[size]; 
```

如果在插入元素之前不知道数组的大小，最好选择动态数组，例如 ArrayList

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-18T18:25:14.850

两个数组（设备是空指针的当前原因和数组 Dispositivos 也需要初始化）都是空的；在使用它们之前初始化你的数组。

此外，我建议将您的两个字符串值包装到一个对象中，然后使用该对象的列表 - 代码看起来会更干净。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-18T18:31:09.207

`String[] Devices = null;`你没有初始化设备。并将值插入 null `Devices[index + 0]`throws `NullPointerException`。更好的是你可以试试这个。因为数组是固定的。

```
public String[] GetDevices(){
    List<String> Devices = new ArrayList<String>();
    String query = "SELECT * FROM devices";
    try {
        statement = connection.createStatement();
        resultSet = statement.executeQuery(query);
        while(resultSet.next()){
            Devices.add(resultSet.getString(1));
            Devices.add(resultSet.getString(2));
        }
    } catch (SQLException ex) {
        System.out.println("\nNão foi possivel ler os dispositivos do database");
        System.out.print(ex.getMessage());

    }
    return Devices.toArray(new String[Devices.size()]);
} 
```

# c++ - 引用容器/不可为空的指针

> ID：14405191
> 
> 赞同：7
> 
> 时间：2013-01-18T18:22:24.397
> 
> 标签：c++, pointers, reference, type-systems

当我不想`NULL`成为可能时，我通常使用引用而不是指针。既然我们不能有引用容器，那么只包含非空指针的容器应该是什么类型？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-18T18:23:49.750

如果要使用指针容器，则只需使用指针容器，不要在其中放置任何 NULL 指针，然后继续。

但是，如果*您*使用[`std::reference_wrapper`](http://en.cppreference.com/w/cpp/utility/functional/reference_wrapper). 例如：

```
#include <vector>
#include <iostream>
#include <functional>

int main()
{
    int x = 5;

    std::vector<std::reference_wrapper<int>> v;
    v.push_back(std::reference_wrapper<int>(x));

    x = 6;

    std::cout << v[0];  // 6
} 
```

## [现场演示](https://ideone.com/yBmBok)

# jquery - 超大的 Jquery 进度图标不走

> ID：14405195
> 
> 赞同：0
> 
> 时间：2013-01-18T18:22:40.510
> 
> 标签：jquery, supersized

我在我的页面中添加了 Supersized Jquery 代码，一切正常，除了不会显示的进度图标 (gif)。我已经在很多浏览器中进行了测试。请注意，我谈论的是进度图标 (progress.gif) 而不是进度条。

**CSS：**

```
#supersized-loader {
position:absolute; top:50%; left:50%; z-index:0; width:60px; height:60px;      margin:-30px 0 0 -30px; text-indent:-999em; background:url(img/progress.gif) no-repeat center center;}

#supersized {
position:fixed; left:0; top:0; overflow:hidden; z-index:-999; height:100%; width:100%; }

#supersized img{
width:auto; height:auto; position:relative; outline:none; border:none; }

#supersized a {
z-index:-30; position:fixed; overflow:hidden; top:0; left:0; width:100%; height:100%; background:#111; display:block; }

#supersized a.image-loading {
background:#111 url(img/progress.gif) no-repeat center center; width:100%; height:100%; } 
```

**查询：**

```
jQuery(function($){

$.supersized({
slides  :  [ {image : 'img/backgroung001.png'} ]
});
}); 
```

我想知道我是否必须在 Jquery 代码中调用它（progress.gif）。帮助！谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T20:04:49.513

你的选择器是错误的。

您必须使用`$(".supersized")`来应用 jQuery 函数。

# javascript - 如何在使用 jQuery 悬停时提高效率/速度？

> ID：14405201
> 
> 赞同：0
> 
> 时间：2013-01-18T18:22:55.337
> 
> 标签：javascript, jquery, performance, hover

在我正在编写的 Web 应用程序中，我有一系列创建网格的 div。网格是 X div x Y div，基于用户输入。使用jQuery悬停功能，我想改变一定距离内所有周围div的背景颜色。基本上，如果我将鼠标悬停在一个 div 上，则 4 行 4 列内的所有 div 也应该改变它们的背景颜色。我可以正常运行，但是当网格变为 32 x 128 div 时，就会出现真正的性能问题，并且悬停效果明显滞后于鼠标。我几乎可以肯定这是因为 DOM 中有大量类似的 div，因为当网格是 30 x 30 时，问题就不存在了。

这是我的html的基本结构：

```
<div class="table_area">
    <div class="table_row" id="row-0">
        <div class="cap" data-row="0" data-column="0"></div>
        <div class="cap" data-row="0" data-column="1"></div>
        ...
    </div>
    <div class="table_row" id="row-1">
        <div class="cap" data-row="1" data-column="0"></div>
        <div class="cap" data-row="1" data-column="1"></div>
        ...
    </div>
    ...
</div> 
```

为了加快 DOM 的搜索速度，我将每一行添加到一个数组中。因此，`$('div.table_row[data-row="0"]')`将在`arr[0]`. 因此，当`div`第 8 行中的 a 悬停时，我只检查必要`arr[4]`的`arr[12]`div。

我认为这会大大加快这个过程，因为我消除了大量的搜索，但悬停仍然有一个非常明显的滞后。

我的设置方式有什么明显的错误吗？如果这很重要，我正在使用最新版本的 Chrome。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T18:25:47.617

按**类名**选择是浏览器原生的，而按元素内的数据选择取决于 jQuery 内的循环。

使用类名来标记你的行和列，你的选择器会更快。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T20:07:26.703

如果你为每个 caps 添加一个类，你就可以动态构建一个巨大的选择器：

```
 var sel = "";
$(".cap").hover(function () {
    var row  = $(this).data("row");
    var col = $(this).data("column");
    sel = "";
    for(var i=row-2; i<=row+2; i++)
    {
      for(var j=col-2; j<=col+2; j++)
      {
        sel += ".r" + i + ".c" + j + ",";
      }
    }
  sel = sel.slice(0,-1);
  $(sel).css("background-color","blue");
},function () {
    $(sel).css("background-color","white");
  });
}); 
```

示例：http: [//jsbin.com/izeyal/38/edit](http://jsbin.com/izeyal/38/edit)

由于我是动态创建行和列的，因此我还为每一行添加了 id，如果需要，可以通过更改选择器生成代码来进行测试：

```
 sel += "#r" + i + "c" + j + ","; 
```

为了完整起见，我用来生成网格的代码：

```
 for(i=0; i<128; i++)
  {
    var newRow = $('<div/>', {
    id: 'row-' + i
}).appendTo('.table_area');
    for (j=0; j<32; j++)
    {
      var rowid= "r" +i + "c" + j;
      $('<div/>', {id: rowid }).data("row",i).data("column",j).addClass("cap r" + i + " c" + j).appendTo(newRow);  
    }
  } 
```

# c# - 如何使用 Lucene.Net 查询集合中的术语，类似于 SQL 的 IN 运算符？

> ID：14405203
> 
> 赞同：3
> 
> 时间：2013-01-18T18:23:03.737
> 
> 标签：c#, .net, lucene.net

我们正在尝试搜索文档是否在可能值的集合中具有特定的字段值，

```
field:[value1, value2, value3, ..., valueN] 
```

如果它与任何输入值匹配，它将返回元素，类似于 SQL 的`IN()`运算符。

这类似于`range`查询，但元素不一定描述范围。

使用 Lucene.Net API 的一个例子是，

```
var query = new QueryParser(version, "FieldName", analyzer).In("value1", "value2", "value3"); 
```

这在 Lucene.Net 中可行吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T18:56:29.677

`field:value1 field:value2 ....`应该做的伎俩。默认情况下，所有术语都是`OR`ed。

以编程方式，您可以尝试，

```
public static Query In(string fieldName, IEnumerable<string> values)
{
    var query = new BooleanQuery();
    foreach (var val in values)
    {
        query.Add(new TermQuery(new Lucene.Net.Index.Term(fieldName, val)), BooleanClause.Occur.SHOULD);
    }
    return query;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T13:39:37.703

正如@I4V 提到的，Lucene`OR`的默认条款，所以这应该会给你想要的结果，

```
public Query In(string propertyName, IEnumerable<string> collection)
{
    var query = new QueryParser(version, propertyName, analyzer).Parse(string.Join(" ", collection));

    return query;
} 
```

基于，

```
field:value1, value2, value3, ..., valueN 
```

将返回集合中至少有一个值的任何文档。

# php - Magento Checkout Continue 按钮在子目录中不起作用

> ID：14405206
> 
> 赞同：1
> 
> 时间：2013-01-18T18:23:10.700
> 
> 标签：php, magento, checkout, subdirectory

我正在使用 magento 1.7.0.2。并安装了 ultimo 主题。我们设置了子目录，并且这些子目录的任何其他区域都没有问题。

在子目录和结帐时。我们以访客身份输入帐单信息，然后单击“继续”按钮。此时没有任何反应，继续按钮消失并且没有进展。它只是坚持。

萤火虫想出了这个错误：

```
TypeError: descendants[k] is undefined
[Break On This Error]   

descendants[k].disabled = isDisabled; 
```

opcheckout.js（第 81 行）

我只是运行了两次，对于一个子目录它工作正常（但之前没有工作），而对于另一个子目录它根本没有工作。

非常欢迎任何帮助！谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-28T10:05:25.993

我今天刚遇到这个问题。

我将 skin/frontend/base/default/js/opcheckout.js 中的 l.81 从：

```
descendants[k].disabled = isDisabled; 
```

至 ：

```
if(typeof(descendants[k]) != 'undefined') descendants[k].disabled = isDisabled; 
```

似乎可行...我想更好的方法是将 opcheckout.js 复制到您自己的皮肤目录中并对此进行更改。

# java - Javascript 继续或取消提交按钮

> ID：14405209
> 
> 赞同：0
> 
> 时间：2013-01-18T18:23:29.880
> 
> 标签：java, javascript

我的jsp有这个代码：

```
<input type="submit" value="Transfer ULD" onclick="doSomething();" name="_eventId_transferULDTransition"/> 
```

`doSomething()`是一个javascript方法

```
function doSomething() {    
    var transferType = document.getElementById('equipmentType').value;
    if(${uldSelector.baseLoadToUse.uldEquipType} == 02 && 
        (transferType == 01 || transferType == 13 || transferType == 07)){
        var r = confirm("Still want to tranfer Air Container?");
        if (r == true) {
            return true;
        } else {
            return false;
        }
    }
} 
```

我在方法中有 4 到 5 个条件..

当用户点击“确定”时，它应该继续，而点击“取消”时，它不应该......

但是，它在这两种情况下都提交......使用 spring webflow、spring MVC 和 Java。

任何建议表示赞赏！谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T18:25:28.437

onclick 函数需要返回。像

```
<input type="submit" value="Transfer ULD" onclick="return doSomething();" name="_eventId_transferULDTransition"/> 
```

现在你在你的函数中返回 false 。但实际上 onclick 方法没有返回值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T18:25:12.297

您没有点击操作的回报

```
onclick="doSomething(); 
```

需要是

```
onclick="return doSomething(); 
```

但是最好使用 onsubmit 在表单级别执行此操作。

```
<form onsubmit="return doSomething(); > 
```

为什么在表格上？因为可以在不点击按钮的情况下提交表单。在文本框中输入键将提交它。

# java - 动态命名 log4j 日志文件 - 有效，但 setFile() 并非没有例外

> ID：14405212
> 
> 赞同：2
> 
> 时间：2013-01-18T18:23:37.450
> 
> 标签：java, logging, log4j

我有一个为个人客户运行的程序。每个客户都有一个帐户代码（我们称之为起始代码）。帐户代码通过命令行参数传递给程序。我收到了以下异常，顺便说一句，它不会导致程序崩溃，它会顺利进行。我想按客户帐户分开记录，这似乎有效。我的日志文件将被创建为“Balancer_990004.log”，并且日志消息肯定会建立到创建 Balancer_990004.log.7 的点，但是，并非没有这个例外。在这个上挠头。我已经包含了 log4j.properties 位和代码位。

```
log4j:ERROR setFile(null,true) call failed.
java.io.FileNotFoundException:  (A file or directory in the path name does not exist.)
 at java.io.FileOutputStream.openAppend(Native Method)
 at java.io.FileOutputStream.<init>(FileOutputStream.java:203)
 at java.io.FileOutputStream.<init>(FileOutputStream.java:127)
 at org.apache.log4j.FileAppender.setFile(FileAppender.java:294)
 at org.apache.log4j.RollingFileAppender.setFile(RollingFileAppender.java:207)
 at org.apache.log4j.FileAppender.activateOptions(FileAppender.java:165)
 at org.apache.log4j.config.PropertySetter.activate(PropertySetter.java:307)
 at org.apache.log4j.config.PropertySetter.setProperties(PropertySetter.java:172)
 at org.apache.log4j.config.PropertySetter.setProperties(PropertySetter.java:104)
 at org.apache.log4j.PropertyConfigurator.parseAppender(PropertyConfigurator.java:809)
 at org.apache.log4j.PropertyConfigurator.parseCategory(PropertyConfigurator.java:735)
 at org.apache.log4j.PropertyConfigurator.parseCatsAndRenderers(PropertyConfigurator.java:639)
 at org.apache.log4j.PropertyConfigurator.doConfigure(PropertyConfigurator.java:504)
 at org.apache.log4j.PropertyConfigurator.doConfigure(PropertyConfigurator.java:547)
 at org.apache.log4j.helpers.OptionConverter.selectAndConfigure(OptionConverter.java:483)
 at org.apache.log4j.LogManager.<clinit>(LogManager.java:127)
 at java.lang.J9VMInternals.initializeImpl(Native Method)
 at java.lang.J9VMInternals.initialize(J9VMInternals.java:200)
 at org.apache.log4j.Logger.getLogger(Logger.java:117)
 at Balancer.<init>(Balancer.java:292)
 at Balancer.main(Balancer.java:2370)

*** Sample bit from log4j.properties.  The name of the Java program in question is "Balancer" ***

log4j.rootLogger=debug, devnull        
log4j.logger.Balancer=info, BalancerLog

log4j.appender.BalancerLog=org.apache.log4j.RollingFileAppender
log4j.appender.BalancerLog.File=${balancer.log}                
log4j.appender.BalancerLog.MaxFileSize=10000KB                                
log4j.appender.BalancerLog.MaxBackupIndex=10                                  
log4j.appender.BalancerLog.layout=org.apache.log4j.PatternLayout              
log4j.appender.BalancerLog.layout.ConversionPattern=%5p %d [%t] (%F:%L) - %m%n

*** How I'm building my log filename and initializing the Logger ***

public class Balancer {
    static Logger log = null;
    ....

// In constructor...

StringBuilder logName = new StringBuilder("Balancer_");
logName.append(startCode.toString());
logName.append(".log");

// Hopefully in log4j.properties our appender section contains this line:
// log4j.appender.BalancerLog.File=${balancer.log}.  This ${} bit means to get a system property to set the log file
// name.  We set that system property here, then initialize the Logger object.
System.setProperty("balancer.log", logName.toString()); 

// This is line 292 in the exception trace.
log = Logger.getLogger(Balancer.class); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T19:13:52.467

我发现了为什么我从 setFile() 中得到了异常。也许 .properties log4j 配置不支持这并且我必须使用 XML 方法，但是如果我使用推荐的语法设置“.File”属性以使用系统属性，我会收到错误（即使它发生了前进并且无论如何都可以工作）。例如：

```
log4j.appender.BalancerLog=org.apache.log4j.RollingFileAppender
log4j.appender.BalancerLog.File=${balancer.log}
log4j.appender.BalancerLog.MaxFileSize=10000KB
log4j.appender.BalancerLog.MaxBackupIndex=10
log4j.appender.BalancerLog.layout=org.apache.log4j.PatternLayout
log4j.appender.BalancerLog.layout.ConversionPattern=%5p %d [%t] (%F:%L) - %m%n 
```

给我错误。回到标准：

```
log4j.appender.BalancerLog=org.apache.log4j.RollingFileAppender
log4j.appender.BalancerLog.File=Balancer.log
log4j.appender.BalancerLog.MaxFileSize=10000KB
log4j.appender.BalancerLog.MaxBackupIndex=10
log4j.appender.BalancerLog.layout=org.apache.log4j.PatternLayout
log4j.appender.BalancerLog.layout.ConversionPattern=%5p %d [%t] (%F:%L) - %m%n 
```

和“alle ist klar herr kommissar”。所以，我暂时使用这个代码块，直到找到更好的解决方案。目前，配置将依赖于该程序的附加名称“BalancerLog”。

```
// We are dynamically building the name of our log file, if the log4j.properties file is set correctly.
// Should look like "Balancer_997232.log" or any other startcode.  Log file will be created in whatever the current
// IFS directory is when the job gets kicked off.
StringBuilder logName = new StringBuilder("Balancer_");
logName.append(startCode.toString());
logName.append(".log");

// This isn't perfect I guess and am sure it will see revisions in the future.
// What I'm doing here is asking the log object if it has an appender called BalancerLog. Look in 
// the log4j.properties file.  You should see a line similiar to :
// log4j.logger.Balancer=info, BalancerLog
// We're getting the the appender object and setting it's file name to be what was built above.
// We don't want to use the default log file name.  You'll see it in the log4j.properties file like:
// log4j.appender.BalancerLog.File=Balancer.log
try {
    Appender appender = log.getAppender("BalancerLog");
    if (appender != null && appender instanceof org.apache.log4j.FileAppender) {
        FileAppender roll = (FileAppender) appender;
        roll.setFile(logName.toString());
        roll.activateOptions();
    }
}
catch (Exception e) {
    System.out.println(e);
} 
```

随意挑选它并提出任何建议。顺便说一句，在这里使用 log4j 1.2。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T08:37:51.370

如果你可以切换到 logback，我建议你改用[SiftingAppender](http://logback.qos.ch/manual/appenders.html)。这种使用 log4j 的调整是不自然的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-12-18T19:29:59.400

看起来您正在尝试在设置环境变量之前访问日志。

此代码将在不进行单个日志调用的情况下失败：

```
class Whatever {
    private static Logger log = Logger.getLogger(Whatever.class)
    public Whatever() {
        System.setProperty("balancer.log","C:\\log.txt")
    }
} 
```

所以这样做：

```
class Whatever {
    private static Logger log = null
    public Whatever() {
        System.setProperty("balancer.log","C:\\log.txt")
        log = Logger.getLogger(Whatever.class)
    }
} 
```

*基本思想是在*正确设置环境变量之前对日志系统不做任何事情。

# redis - 使用 redis pub/sub 连接 Tornado 进程

> ID：14405215
> 
> 赞同：1
> 
> 时间：2013-01-18T18:23:54.757
> 
> 标签：redis, tornado, publish-subscribe, interprocess

我有两个 Tornado 进程`X`和`Y`. 中的处理程序`X`处理 post 请求，当这样的请求到达时，除了`X`对`Y`.

我想使用`Redis`'s PUB/SUB 来做到这一点。很明显，在 的处理程序中`X`，我需要向“Y”订阅的频道发布消息。

这个订阅`Y`应该是长时间运行的，所以每当一条消息发布到频道时，里面的东西`Y`应该会自动更新内存中的变量。但是，我不清楚如何在 中实现此订阅以及由此产生的更新`Y`，因为它不能是正常的处理程序。我计划为此使用异步 redis 客户端`tornado-redis`，如果这有什么不同的话。

一些例子会很有帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T20:40:48.400

这不是 Redis PUB/SUB 解决方案，而是替代方案。如果您的堆栈中已经有 Redis，那么您不妨使用它（或者更好的是消息队列）。

1.  最简单的方法是`tornado.web.RequestHandler`在 Y 中为此设置一个。当 X 需要进行更改时，让 X 向 Y 发送一个 HTTPRequest。有效负载可以是 JSON、表单编码、二进制。

2.  在 Y 中创建一个套接字，绑定它并`IOLoop.add_handler`在该套接字上添加监听`callback`以运行。当 X 需要进行更改时，让它连接到那个套接字。（有效载荷可以是 JSON，二进制）。如果您需要发送消息，这将需要一个小套接字接受和读取。

不用说，两者都应该在防火墙后面。

# c# - 如何从我的数据库中获取多条记录？

> ID：14405223
> 
> 赞同：-4
> 
> 时间：2013-01-18T18:24:27.127
> 
> 标签：c#, asp.net-mvc, entity-framework

所以据我所知，我需要能够从我的数据库模型中返回所有记录：

```
 public class Resort
{
    public int ID { get; set; }
    public String Name { get; set; }
    public int BlackDiamond { get; set; }
    public int BlueSquare { get; set; }
    public int GreenCircle { get; set; }
    public int TerrainPark { get; set; }
}
public class ResortDBContext : DbContext
{
    public DbSet<Resort> Resorts { get; set; }
} 
```

我正在使用实体框架、C# 和 Asp.Net。我需要能够将所有这些记录返回到`List<>`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T18:36:11.540

像这样的东西怎么样：

```
 using (var YourContext = new YourEntities())
        {
            List<Resort> resorts = (from resorts in YourContext.Resort
                                    select resorts).ToList();

            foreach (Resort resort in resorts)
            {
                //Do something here
            }
        } 
```

# java - java jersey rest server 与 main 方法？

> ID：14405224
> 
> 赞同：5
> 
> 时间：2013-01-18T18:24:31.317
> 
> 标签：java, api, rest, jersey

我需要实现一个 http 服务器作为我的应用程序的一部分。我喜欢球衣的工作方式，而且我很擅长它的编码。有什么方法可以实现这种独立的服务器，并且只从主要方法运行，我可以将它用作球衣

```
@GET
@Path("/{screen_name}")
@Produces(MediaType.TEXT_PLAIN) 
```

ETC..

有没有办法实现它或者已经有一些好的实现？

我找了 2 个月，但我找不到任何东西

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T10:41:11.823

我使用了 Perceptions 的答案，与灰熊、 [带有嵌入式服务器的 JAX-RS完美配合](https://stackoverflow.com/questions/8277409/jax-rs-with-embedded-server)

非常感谢你

# android - 是否有任何用于雅虎信使集成的库，如 asmack

> ID：14405229
> 
> 赞同：-1
> 
> 时间：2013-01-18T18:24:41.737
> 
> 标签：android, yahoo-messenger

android中是否有任何用于雅虎信使集成的库

任何链接或代码都会对我有很大帮助

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T18:32:34.560

得到了我使用 openymsg 库的解决方案，下面是我的代码

```
public class SimpleYahoo extends Activity implements SessionListener{
/** Called when the activity is first created. */

        private Session session = new Session();
        Button sendButton;
        boolean isLoginsuccess;
        ListView resultTextView;
        EditText editText;
        Handler handler;
        ArrayList<String> replymessage;
        String reply;
        @Override
        protected void onCreate(Bundle savedInstanceState) {
            // TODO Auto-generated method stub
            super.onCreate(savedInstanceState);
            setContentView(R.layout.activity_main);
            replymessage=new ArrayList<String>();
             try {
                session.login("yahooid", "password");
            } catch (AccountLockedException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (IllegalStateException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (LoginRefusedException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (FailedLoginException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
                session.addSessionListener(this);
            sendButton=(Button) findViewById(R.id.button);
            resultTextView=(ListView) findViewById(R.id.result);
            editText=(EditText) findViewById(R.id.input);
            sendButton.setOnClickListener(new OnClickListener() {

                @Override
                public void onClick(View v) {
                    // TODO Auto-generated method stub
                    doLogin();
                }
            });
            handler=new Handler()
            {
                @Override
                public void handleMessage(Message msg) {
                    // TODO Auto-generated method stub
                    super.handleMessage(msg);
                    if(msg.what==0)
                    {
                        replymessage.add(reply);
                        setListAdapter();
                    }
                }
            };

        }

        private void doLogin() {
            try {

                session.sendMessage("targetyahooid", editText.getText().toString());

            } catch (Exception e) {
                Log.e(e.getMessage(), e.getMessage());

            }
        }

        @Override
        public void dispatch(FireEvent fe) {
            // TODO Auto-generated method stub
             ServiceType type = fe.getType();
                SessionEvent sessionEvent = fe.getEvent();

                if (type == ServiceType.MESSAGE) {
                    try {
                        // log request message
                        reply=sessionEvent.getMessage();
                        Log.i("message","message from " + sessionEvent.getFrom() + " \nmessage " + sessionEvent.getMessage() );

                        // give an automatic response
                   // session.sendMessage(sessionEvent.getFrom(), "hi, you are sending " + sessionEvent.getMessage());
                   // session.
                    handler.sendEmptyMessage(0);
                    } catch (Exception e) {
                        Log.e(e.getMessage(), e.getMessage());
                    }
                }

        }
        public void setListAdapter()
        {
            ArrayAdapter<String> arrayAdapter=new ArrayAdapter<String>(this,R.layout.multi_line_list_item,replymessage);
            resultTextView.setAdapter(arrayAdapter);
            resultTextView.setSelection(replymessage.size()-1);

        } 
```

}

像魅力一样工作:)

# ruby - 通过覆盖向方法添加功能，但仍调用原始方法

> ID：14405233
> 
> 赞同：2
> 
> 时间：2013-01-18T18:24:47.080
> 
> 标签：ruby

> **可能重复：**
> [当猴子修补方法时，您可以从新实现中调用覆盖的方法吗？](https://stackoverflow.com/questions/4470108/when-monkey-patching-a-method-can-you-call-the-overridden-method-from-the-new-i)

所以我希望通过覆盖它来简单地向方法添加一些条件检查，但是我希望调用原始方法。如何在红宝石中做到这一点？

IE。

方法存在

```
def fakeMethod(cmd)
  puts "#{cmd}"
end 
```

我想添加

```
if (cmd) == "bla"
  puts "caught cmd"
else
  fakeMethod(cmd)
end 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-18T18:33:16.083

```
alias :old_fake_method :fake_method
def fake_method(cmd)
  if (cmd) == "bla"
    puts "caught cmd"
  else
    old_fake_method(cmd)
  end
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T18:33:10.143

为什么不使用继承。这是一个经典的例子，被覆盖的方法增加了额外的逻辑：

```
class Foo
  def foo(cmd)
    puts cmd
  end
end

class Bar < Foo
  def foo(cmd)
    if cmd == "hello"
      puts "They want to say hello!"
    else
      super
    end
  end
end

Foo.new.foo("bar")   # => prints "bar"
Bar.new.foo("hello") # => prints "They want to say hello" 
```

当然，此解决方案仅在您有机会实例化子类实例时才有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T18:28:09.207

为此，ruby 中有[alias_method_chain](http://apidock.com/rails/ActiveSupport/CoreExtensions/Module/alias_method_chain)和[alias_method 。](http://apidock.com/ruby/Module/alias_method)

（alias_method_chain 不在 ruby​​ 中，但在 ActiveSupport::CoreExtensions 中，所以如果这不是 rails 应用程序，您可能需要要求）

# r - 在 R 中使用嵌套的 mlogit 函数 - 有内存问题？

> ID：14405237
> 
> 赞同：1
> 
> 时间：2013-01-18T18:25:02.500
> 
> 标签：r

`mlogit`我正在尝试使用该函数在 R 中建模决策树。该模型的目的是描述海峡群岛划船者的选择。我们想要建立我们的模型的方式是使用两个决策层。首先，个人选择一项活动（例如潜水、浮潜或皮划艇）。其次，基于该活动，他们根据对该活动有利的该地点的属性（海带覆盖物、无脊椎动物、鱼类等）选择岛上的一个地点进行访问。我们相信这是一个嵌套结构，首先选择活动，然后选择站点。该模型有 4 种不同的活动，31 个不同的站点可供选择，共有 124 个独特的“活动选择”选项。我们有来自 111 个人的数据，他们每个人都根据各个站点的属性做出了特定的决定。

对于 R 代码，我们首先描述我们的巢。我们接下来使用 mlogit.data 函数读入并准备数据，最后使用 mlogit 函数运行模型。但是，运行代码后，我们得到以下信息

```
error: "Error in model.matrix.default(formula, data: allocMatrix: too many elements specified". 
```

这是内存问题吗？有没有更有效的方法来解决问题？还是我们完全错了？

这是我们的代码。

```
library(mlogit)
data.raw = read.csv("final_R_rum.csv",header=T)
underwater = c(1.1,2.1,3.1,4.1,5.1,6.1,7.1,8.1,9.1,10.1,11.1,12.1,13.1,14.1,15.1,16.1,17.1,18.1,19.1,20.1,21.1,22.1,23.1,24.1,25.1,26.1,27.1,28.1,29.1,30.1,31.1)
surface = c(1.2,2.2,3.2,4.2,5.2,6.2,7.2,8.2,9.2,10.2,11.2,12.2,13.2,14.2,15.2,16.2,17.2,18.2,19.2,20.2,21.2,22.2,23.2,24.2,25.2,26.2,27.2,28.2,29.2,30.2,31.2)
consumptive = c(1.3,2.3,3.3,4.3,5.3,6.3,7.3,8.3,9.3,10.3,11.3,12.3,13.3,14.3,15.3,16.3,17.3,18.3,19.3,20.3,21.3,22.3,23.3,24.3,25.3,26.3,27.3,28.3,29.3,30.3,31.3)
land = c(1.4,2.4,3.4,4.4,5.4,6.4,7.4,8.4,9.4,10.4,11.4,12.4,13.4,14.4,15.4,16.4,17.4,18.4,19.4,20.4,21.4,22.4,23.4,24.4,25.4,26.4,27.4,28.4,29.4,30.4,31.4)

data.logit = mlogit.data(data.raw,shape="long",choice="choice",alt.var="site_activity")
results=mlogit(formula=choice~fish_abun|total_TC_water_land,nests = list(underwater, surface, consumptive, land), data=data.logit)
summary(results) 
```

# windows-8 - Sql Compact 同步和迁移到 Windows 8

> ID：14405241
> 
> 赞同：0
> 
> 时间：2013-01-18T18:25:21.127
> 
> 标签：windows-8, sql-server-ce, sync

这是我们当前的场景： 客户端应用程序 - C# .Net Windows Forms 应用程序在防火墙后面的总部使用 .Net 3 和 SQL Compact SQL 数据库 客户端计算机不在域上，并不总是连接到 Internet

当前流程是用户将数据输入到应用程序中，数据存储在 SQL Compact 中，SQL 报告服务用于打印发送进来的报告。

我们希望设置同步，以便将来自每个用户的数据上传到服务器，从而不再需要报告。

我们已成功设置同步，以便在防火墙后面的网络上将用户数据复制到服务器。但是我们的用户会在现场断开连接。

我们还在考虑将来将该应用程序迁移到 Windows 8。不一定是 RT，但我们希望它能够在 Windows 8 Pro 上原生运行。

我们应该坚持使用 SQL Compact 吗？我在哪里可以看到通过防火墙或 Web 服务设置同步的好例子？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T18:42:57.117

您说“同步”，但我想知道您是否指的是 SQL 复制。如果是这样，那么是的。SQL CE 仍然是一个出色的小型本地数据库，适用于桌面应用程序（任何版本的 Windows）。SQL CE 也是利用 SQL 复制的最佳（如果不是唯一的话）解决方案。

现在让我们假设您不是指 SQL 复制。答案仍然是肯定的。SQL CE 是用于桌面应用程序的出色数据库。无论您可能指的是什么同步，显然您已经在工作了。而且，它将继续工作。

因为你说`not necessarily RT`你是绝对安全的。CE 适用于所有版本的 Windows、Windows Mobile（已弃用）、Phone 7（不是 8），我也听说了即将推出的 Embedded Windows。

为此，RT 没有 SQL CE 支持（现在，如果有的话）。RT 解决方案（您将编写的类型，以便您可以利用 ARM 和新的 Win 8 功能）将 SqlLite 作为本地存储选项。Phone 8 + 也是如此。毫无疑问，这部分是因为它们旨在成为连接的应用程序，而不是本地存储应用程序。不一样的野兽。

希望这可以帮助。

# java - 如何在我的 Eclipse Java 项目中导入 org.apache.commons.lang.time.StopWatch？

> ID：14405244
> 
> 赞同：1
> 
> 时间：2013-01-18T18:25:25.823
> 
> 标签：java, eclipse, classpath, apache-commons

如何`StopWatch`从 apache commons 使用？我应该下载/安装什么来在我的项目中使用这个类？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T18:28:47.290

如果您没有构建系统，例如 Ant、Maven 等，在 Eclipse 中您应该使用：*项目属性 -> Java 构建路径 -> 库 -> 添加外部 Jar -> 选择已下载的[Apache Common Jar](http://commons.apache.org/lang/)*。此选项会将您的 jar 添加到项目的类路径中。这意味着当您在代码中引用此类时，Java 编译器和 JVM 知道在哪里找到类。如果你有巨大的 jar 文件，它不会在运行时产生额外的成本，因为只会加载那些需要执行代码的类（所有你从你的代码中引用并由库代码引用的）。

此外，您可以下载源文件以附加到 IDE 中的 jar。在您能够在 IDE 中查看库源代码和 javadoc 之后。

此外，如果你的类路径中已经有这个，你可以考虑[Guava秒表实现。](http://code.google.com/p/guava-libraries/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T18:32:14.810

下载包含您要使用的类的 jar。在 Eclipse 中，右键单击您的项目并选择 properties-java build path-libraries 选项卡。从那里添加您下载的 jar 文件。

# python - 我怎样才能在营业时间刮美国银行？

> ID：14405246
> 
> 赞同：3
> 
> 时间：2013-01-18T18:25:31.267
> 
> 标签：python, web-scraping, screen-scraping, beautifulsoup

嗨，我想知道如何使用beautifulsoup 来为它的时间刮美国银行。例如，如果网址是 (Shattuck_Ave_94704_BERKELEY_CA/bank_branch_locations/">http://locators.bankofamerica.com/locator/locator/2129_Shattuck *_Ave_94704_BERKELEY_CA* /bank_branch_locations/) 我怎样才能只提取小时数？下面是我最初的尝试，但它似乎什么也没返回。

```
page = urllib2.urlopen(url)
soup = BeautifulSoup(page.read())
hours = soup.find_all("div", class_="lobbyHours")
print hours 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-18T21:35:51.467

该网址重定向，这就是为什么`soup.find_all("div", class_="lobbyHours")`不返回任何内容。您要重定向到的页面上没有`div`该类。

通过使用 Firefox 的[Firebug](https://getfirebug.com/)监控网络流量，我发现您请求的 url 实际上返回了一个`301 Moved Permanently`状态码。幸运的是，即使是 301 状态码，在响应标头中也提供了`Location`标头。在这种情况下：

```
'http://locators.bankofamerica.com/locator/locator/LocatorAction.do?shouldTest=true' 
```

这是分支定位器页面。您必须从该页面开始，以编程方式“搜索”您想要的位置，找到适当的链接，然后执行第三个请求。

该站点还使用 cookie，因此请查看[cookielib](http://docs.python.org/2/library/cookielib.html)。

# javascript - 如何让 elevateZoom 将镜头定位在鼠标光标中心？

> ID：14405250
> 
> 赞同：1
> 
> 时间：2013-01-18T18:26:07.853
> 
> 标签：javascript, css, position

如何让 elevateZoom ( [http://www.elevateweb.co.uk/image-zoom](http://www.elevateweb.co.uk/image-zoom) ) 将镜头定位在鼠标光标中心？问题是当我将主图像悬停时，镜头似乎偏离了我的光标。ElevateZoom 将以下两个 div 插入到位于左侧的 DOM 中：86px 和顶部：178px。但我希望 div zoomContainer 和 zoomLens 位于左侧：0 顶部：0。

```
<div class="zoomContainer" style="position: absolute; left: 86px; top: 178px; height: 574px; width: 453px;">
    <div class="zoomLens" style="background-position: 0px 0px; float: right; overflow: hidden; z-index: 999; opacity: 0.4; width: 201.333px; height: 200.875px; background-color: white; cursor: default; border: 1px solid black; background-repeat: no-repeat; position: absolute; left: 0px; top: 0px; display: none;"> 
</div> 
```

下面是我的代码

**HTML**

```
<div id="images">
    <div class="image current">
        <span>
            <img id="zoom_01" src="img/product1_small.jpg" data-zoom-image="img/product1.jpg">
            <div class="zoomContainer" style="position: absolute; left: 86px; top: 178px; height: 574px; width: 453px;">
                <div class="zoomLens" style="background-position: 0px 0px; float: right; overflow: hidden; z-index: 999; opacity: 0.4; width: 201.333px; height: 200.875px; background-color: white; cursor: default; border: 1px solid black; background-repeat: no-repeat; position: absolute; left: 0px; top: 0px; display: none;">
                </div>
            </div>
        </span>
    </div>
    <div id="zoomBox"></div>
</div> 
```

**JS**

```
$("#zoom_01").elevateZoom({
    zoomWindowWidth: 400,
    zoomWindowHeight: 400,
    zoomType: 'window',
    zoomWindowPosition: 'zoomBox'
}); 
```

**CSS**

```
#zoomBox{
    position: absolute;
    width: 400px; height: 400px;
    right: -100%;
    border: 5px solid #000;
}
.image{
    display: table;
    position: absolute;
    left: 100%;
}
.image.current{
    left: 0;
}
.image span{
    display: table-cell;
    height: 100%;
    text-align: center;
    vertical-align: middle;
} 
```

# directory - CVS添加目录/错误“这里没有版本；先做`cvs checkout'”

> ID：14405251
> 
> 赞同：7
> 
> 时间：2013-01-18T18:26:15.457
> 
> 标签：directory, add, cvs

每当我尝试在项目中添加目录时使用终端（在 Mac OSX 10.8.x 上）

```
project_root jacob$ cvs add foo/
project_root jacob$ cvs add ./shared/foo/
project_root jacob$ cvs add /full/path/foo/ 
```

CVS 抱怨：

```
cvs add: in directory `.':
cvs [add aborted]: there is no version here; do `cvs checkout' first 
```

另外，我听说 cvs 不喜欢创建空目录，也不喜欢创建一个只有目录的目录（没有直接的子文件），所以里面`foo/`只是一个名为`blank.txt`.

跑步`cvs checkout project`没有帮助。

这个消息很荒谬；显然没有版本——这就是为什么它被称为`add`!

PS 升级到 svn/Git 很遗憾，目前不是一个选择。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-18T18:37:20.937

OMG，cvs 是一个可怕的笑话：当前工作目录必须是正在添加的目录的直接父级：

```
project_root jacob$ cd shared/
project_root jacob$ cvs add foo/
Directory /…/foo added to the repository 
```

[来源](http://drupal.org/node/353813#comment-1185079)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-15T03:04:38.383

需要先将父文件夹添加到存储库中。这是来自 cvs 可执行文件的标准错误消息。

# javascript - Javascript - 变量值是另一个变量的名称

> ID：14405252
> 
> 赞同：0
> 
> 时间：2013-01-18T18:26:16.820
> 
> 标签：javascript, variables

我有一组定义的变量。我动态地将一个值设置为另一个变量，该变量最终成为其他已定义变量之一的名称。我想这样做，所以我知道何时在页面上使用哪个设置变量。

```
var mwm = "blah"
var vp = "bleh"
var am = "bluh"

var mwm720 = "some link 1"
var mwm717 = "some link 2"
var vp720 = "some link 3"
var vp717 = "some link 4"
... 
```

然后我运行了一些其他脚本，并根据条件将变量值设置为其他变量之一的名称。

```
var myClass = $(this).attr("class").split(' ')[1];
var currDiv = "div." + myClass;
var currVersion = $(this).parent().attr("id");
var linkVers = myClass + currVersion; 
```

linkVers 变量值总是以“mwm720”、“mwm717”、“vp720”等结束。这就是我知道*何时*使用 mwmw720 或 mwm717（等）变量的方式。

### 期望的行为

如何获得警报/调用以使用存储在动态变量中的变量名称的值？

假设`alert(linkVers);`返回“mwm720”。如何`$(currDiv).html(linkVers);`插入 mwm720 变量的*值*（即“某些链接 1”），而不是变量的名称？

如果有更好的方法来尝试完成此行为，我当然会考虑其他解决方案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-18T18:29:22.583

您应该将所有变量放在 1 个对象中。像：

```
var messsages = {
    wm : "blah",
    p : "bleh",
    m : "bluh",

    wm720 : "some link 1",
    wm717 : "some link 2",
    p720 : "some link 3",
    p717 : "some link 4"
} 
```

然后在您的功能中，您可以使用

```
alert(messages[linkVers]); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T18:29:56.413

最好不要在窗口命名空间中塞满一堆变量。使用一个对象。

```
var myProps = {
    mwm720 : "some link 1",
    mwm717 : "some link 2",
    vp720 : "some link 3",
    vp717 : "some link 4"
}; 
```

比你能做的

```
var foo = "mwm720";
console.log(myProps[foo]); 
```

如果您真的想按照自己编写的方式进行操作，则可以使用带有括号符号的窗口。

```
var foo = "mwm720";
console.log(window[foo]); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T18:30:24.147

我认为您正在寻找的是`eval`：

```
var myvar = "mvm720";
var mvm720 = "some link 1";

console.log(myvar);  // prints mvm720
console.log(eval(myvar));  //prints "some link" 
```

所以在你的特殊情况下：

```
eval ( $(currDiv).html(linkVers) ); 
```

是你要找的

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-18T18:47:10.253

一种更灵活的方法是按版本对变量进行分组。这样，您甚至不必担心将名称与版本连接起来。

```
var messsages = {
    720: {
        wm: "some link 1",
        p: "some link 3",
    },
    717: {
        wm: "some link 2",
        p: "some link 4",
    }
}; 
```

然后，您可以获得正确版本的链接文本：

```
var linkVers = messages[currVersion][myClass]; 
```

由于在`currVersion`脚本的整个生命周期内都不会更改（因为您停留在同一页面上），您还可以在开始时缓存当前版本的消息。这样，您就不需要经常查找父母的`id`：

```
// In some high scope
var currMessages;

// At startup (e.g. DOM ready)
// You probably need to slightly adjust this
// depending on what $(this).parent() actually signifies
var currVersion = $(this).parent().attr("id");
currMessages = messages[currVersion];

// When retrieving the link text
var linkVers = currMessages[myClass]; 
```

# android - Android 库问题

> ID：14405253
> 
> 赞同：0
> 
> 时间：2013-01-18T18:26:19.160
> 
> 标签：android, sdk, android-library

我正在开发一个应用程序，我总是在我的 nexus 7 上运行，在 api 17 上使用 min SDK 和 SDK 目标。

从现在开始，它总是有效的。但是今天我尝试在 4.0 的手机上测试我的应用程序。

在我的手机上编译和安装它是不可能的，我有那个日志：

> 错误：在包“android”中找不到属性“parentActivityName”的资源标识符

谷歌搜索后，我发现这是因为 parentActivityName 仅在 API 16 及更高版本上受支持。我读到在安装支持库时仍然可以使其在较低的 api 设备上工作。

所以我下载了 android 支持库 v13 jar，将它放在我的文件夹 Workspace\MyApp\libs 中，然后我从 eclipse 构建路径，但我的应用程序仍然无法运行。

使用 min SDK 14（在我的手机上尝试）、目标 17 和路径上的支持库（能够将“parentActivityName”与支持库 V 13 一起使用），无法编译！

有任何想法吗 ？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T18:36:18.733

确保添加所需的`meta-data`标签。以下是涵盖此内容的[Android 教程](http://developer.android.com/training/basics/firstapp/starting-activity.html#CreateActivity)的清单：

```
<application ... >
    ...
    <activity
        android:name="com.example.myfirstapp.DisplayMessageActivity"
        android:label="@string/title_activity_display_message"
        android:parentActivityName="com.example.myfirstapp.MainActivity" >
        <meta-data
            android:name="android.support.PARENT_ACTIVITY"
            android:value="com.example.myfirstapp.MainActivity" />
    </activity>
</application> 
```

# .net - vb.net错误使用界面

> ID：14405255
> 
> 赞同：5
> 
> 时间：2013-01-18T18:26:26.990
> 
> 标签：.net, asp.net-mvc, vb.net, interface

我收到此错误

> “错误 19 类 'LegacyRouteHandler' 必须为接口 'System.Web.Routing.IRouteHandler' 实现 'Function GetHttpHandler(requestContext As RequestContext) As IHttpHandler'。”

从此代码：

```
Public Class LegacyRouteHandler
    Implements IRouteHandler
    Public Function GetHttpHandler(requestContext As RequestContext) As IHttpHandler
        Return New LegacyHandler(requestContext)
    End Function
End Class 
```

我显然正在实施`GetHttpHandler`，有什么想法为什么会出现此错误？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-18T18:29:39.930

您需要`Implements`在函数原型之后添加一个子句。

```
...) As IHttpHandler Implements IRouteHandler.GetHttpHandler
'                    ^ 
```

VB.NET 不会像 C# 那样自动将函数连接到它们的接口定义。

# wordpress - 本地化 Wordpress 发布日期

> ID：14405256
> 
> 赞同：1
> 
> 时间：2013-01-18T18:26:28.150
> 
> 标签：wordpress, localization, gettext

我目前正在使用 gettext 函数在 wordpress 网站上使用多种语言的 po 文件翻译字符串。目前一切都很好，除了我似乎无法弄清楚发布日期。主要是根据用户选择的语言来翻译月份时出现问题。

这是我到目前为止所拥有的：

```
<?php get_the_date(__('F j, Y', 'theme_name')) ?> 
```

'theme_name' 是我的主题名称。我的问题也不会只是格式化日期的显示方式而不是实际翻译月份吗？任何人都必须这样做，我看到网上有人在谈论它，但它主要只针对一种语言，而我正在根据他们存储的 cookie 翻译多种语言。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T10:53:16.237

通常，这只会更改顺序，但不会翻译任何月份的名称。幸运的是，只要您为 WordPress 安装了相应的 .mo 文件，Wordpress 就会检查月份并进行翻译。不幸的是，Wordpress 并没有涵盖所有的翻译，所以如果你真的想要多语言，strftime 是一个更好的解决方案。

处理多种语言的日期非常烦人，特别是如果有多个位置来配置它。我建议您将多语言部分留给那里的多语言插件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-15T04:52:22.007

date_i18n() 根据时间戳以本地化格式检索日期。您需要在 functions.php 文件中添加一个函数，以将拉丁数字替换为您的本地语言，如下所示：

```
// Converts Latin digits to Benglai
function latin_to_bengali($number) {
  $latin = array('0', '1', '2', '3', '4', '5', '6', '7', '8', '9'); 
  $bengali = array('০', '১', '২', '৩', '৪', '৫', '৬', '৭', '৮', '৯');
  return str_replace($latin, $bengali, $number);
} 
```

然后添加如下过滤器：

```
// Translates digits of numbers
add_filter('date_i18n', 'latin_to_bengali', 10, 1); 
```

而已。您可以在此处查看详细信息：[如何在 WordPress 中本地化数字/数字](http://codecanal.com/localize-numberdigit-wordpress)

# asp.net-mvc - 如何从我的模型中的剑道编辑器中获取价值

> ID：14405264
> 
> 赞同：3
> 
> 时间：2013-01-18T18:27:11.907
> 
> 标签：asp.net-mvc, razor, editor, kendo-ui

我正在尝试在我的 ASP.NET MVC 应用程序中使用 Kendo UI Editor 控件。直到现在都没有成功，因为我无法将编辑器中的值返回到控制器中的模型。

我的模型非常简单（在我的网站上编辑一个 html 页面）：

```
public class EditedPage
{
public string Name { get; set; }
public string Title { get; set; }

[AllowHtml]
public string Content { get; set; }
} 
```

我的观点包括以下代码：

```
@model Page

<h2>@Model.Title</h2>
@using (Html.BeginForm())
{
    @Html.HiddenFor(m => m.Name)
    @Html.HiddenFor(m => m.Title)

    @(Html.Kendo().EditorFor(m => m.Content)
    .Name("Editor")
    .HtmlAttributes(new { style = "width:800px;height:600px;margin-left:20px;" })
    )

    <div>
        <input type="submit" value="@Resources.StringResources.Save" class="k-button"/>
    </div>
} 
```

我期待控制器中的 post 方法来填充模型。如果我为名称和标题添加简单的编辑器（在示例代码中它们被隐藏）它工作正常，但内容总是返回为空。

这是我的控制器方法：

```
[HttpPost]
public ActionResult EditPage(Page page)
{
if (!ModelState.IsValid)
 return View(page);

//save content in a file

return View("CustomPages");
} 
```

我错过了什么？我想我需要一些 javascript 来从编辑器中获取值，但我不知道如何实现它。

欢迎任何帮助。谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-18T19:49:59.750

将您的编辑器命名为“内容”。真的。:)

### 编辑

```
@model Page

<h2>@Model.Title</h2>
@using (Html.BeginForm())
{
    @Html.HiddenFor(m => m.Name)
    @Html.HiddenFor(m => m.Title)

    @(Html.Kendo().EditorFor(m => m.Content)
    .Name("Content")
    .HtmlAttributes(new { style = "width:800px;height:600px;margin-left:20px;" })
    )

    <div>
        <input type="submit" value="@Resources.StringResources.Save" class="k-button"/>
    </div>
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-13T16:34:34.363

我遇到了同样的问题，在使用和 EditorFor 时解决这个问题的唯一方法是根本不填充 Name 属性。

# javascript - 谷歌地图回声纬度。& 页面上多个标记的经度。

> ID：14405268
> 
> 赞同：0
> 
> 时间：2013-01-18T18:27:29.013
> 
> 标签：javascript, google-maps

我有一张地图，当您单击地图时，它会在地图上放置一个标记并打印出或回显到 html 的纬度和经度以及地址。这是我想要做的我想在每次添加新标记时回显纬度和经度和地址，但将前一个标记留在页面上以供查看。我正在尝试使用 for 循环来做到这一点。我让它工作了，但是警报窗口一直说对象对象，而不是回显新标记的纬度和经度以及地址。这是我的代码。

```
 <html>
<head>
<meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script>
<script type="text/javascript">
    var poly;
    var map;
    var markers = [];
    var infowindow = null;
    var path = new google.maps.MVCArray;
    var geocoder = new google.maps.Geocoder();

    function geocodePosition(pos) {
      geocoder.geocode({
        latLng: pos
      }, function(responses) {
        if (responses && responses.length > 0) {
          updateMarkerAddress(responses[0].formatted_address);
        } else {
          updateMarkerAddress('Cannot determine address at this location.');
        }
      });
    }

    function updateMarkerStatus(str) {
      document.getElementById('markerStatus').innerHTML = str;
    }

    function updateMarkerPosition(latLng) {
      document.getElementById('info').innerHTML = [
        latLng.lat(),
        latLng.lng()
      ].join(', ');

    }

    function updateMarkerAddress(str) {
      document.getElementById('address').innerHTML = str;
    }

    function initialize() {
        var latLng = new google.maps.LatLng(41.2844783, -84.3558012);
        map = new google.maps.Map(document.getElementById("mapCanvas"), {
            zoom: 14,
            center: latLng,
            mapTypeId: google.maps.MapTypeId.SATELLITE
        });

        poly = new google.maps.Polygon({
            strokeWeight: 3,
            fillColor: '#5555FF'
        });
        poly.setMap(map);
        poly.setPaths(new google.maps.MVCArray([path]));

        google.maps.event.addListener(map, 'click', addPoint);

        infowindow = new google.maps.InfoWindow({   content: "holding..."
    });
    }

    var markers=[];
            for (var i=0;i<markers.length;i++){

     function addPoint(event) {
        path.insertAt(path.length, event.latLng);
        var marker = new google.maps.Marker({
            position: event.latLng,
            map: map,
            draggable: true,
        }); 
            markers.push(marker);
            marker.setTitle("#" + path.length);

        // Add dragging event listeners.

        google.maps.event.addListener(marker, 'dragstart', function() {
            updateMarkerAddress('Dragging...');
        });

        google.maps.event.addListener(marker, 'drag', function() {
            updateMarkerStatus('Dragging...');
            updateMarkerPosition(marker.getPosition());
        });

        google.maps.event.addListener(marker, 'dragend', function() {
            updateMarkerStatus('Drag ended');
            geocodePosition(marker.getPosition());
        });

        google.maps.event.addListener(marker, 'click', function() {
            marker.setMap(null);
            for (var i = 0, I = markers.length; i < I && markers[i] != marker; ++i);
                markers.splice(i, 1);
            path.removeAt(i);
        });

        google.maps.event.addListener(marker, 'dragend', function() {
            for (var i = 0, I = markers.length; i < I && markers[i] != marker; ++i);
                path.setAt(i, marker.getPosition());
        });

        updateMarkerPosition(marker.getPosition());
        geocodePosition(marker.getPosition());

        alert(markers.join("\n"));
     }

    }
    // Onload handler to fire off the app.
    google.maps.event.addDomListener(window, 'load', initialize);

</script>
</head>
<body>
      <style>
      #mapCanvas {
        width: 700px;
        height: 600px;
        float: left;
      }
      #infoPanel {
        float: left;
        margin-left: 10px;
      }
      #infoPanel div {
        margin-bottom: 5px;
      }
    </style>

      <div id="mapCanvas"></div>
      <div id="infoPanel">
        <b>Marker status:</b>
        <div id="markerStatus"><i>Click and drag the marker.</i></div>
        <b>Current position:</b>
        <div id="info"></div>
        <b>Closest matching address:</b>
        <div id="address"></div>
      </div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T19:13:17.327

如果您只是想调试，请尝试改用 console.log。在大多数支持调试实用程序的浏览器中，它将为您提供更多详细信息。如果您不知道我的意思，只需搜索您正在使用的任何浏览器的调试工具。当您尝试在标记变量上调用“join”时，将调用 toString 或数组中的每个元素，然后再通过“\n”连接它们。大多数复杂对象的默认 toString() 非常无用。将警报替换为以下内容：

```
console.log(markers); 
```

如果您不尝试调试，我会查看与警报框不同的信息呈现方式。

# ios - 预加载 nsmanagedobjects 的最佳方法

> ID：14405272
> 
> 赞同：0
> 
> 时间：2013-01-18T18:27:35.287
> 
> 标签：ios, nsmanagedobject

我想存储一些托管对象以便以后更轻松地进行搜索，最好的方法是什么？（以便它在退出应用程序后仍然存在）

我在考虑用户默认值（但我不确定您是否可以存储这样的托管对象）

还是某种缓存？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T17:50:32.310

所以，虽然我不确定这是最好的方法，但这是我解决这个问题的方法。我正在寻找一种方法来预加载将通过启动持续存在的结果列表。

为此，我创建了一个 NSMangedObject，将其命名为 HistoryObject，并向我想要存储的对象添加了一个关系（对多）。我将这些对象添加到这个对象（基本上是一个 NSManagedObject 对象数组），并在我想加载子对象时检索这个对象......

# memory-address - 需要有关如何以十 六进制计算地址大小的帮助

> ID：14405275
> 
> 赞同：0
> 
> 时间：2013-01-18T18:27:48.657
> 
> 标签：memory-address

我做了 cat /proc/meminfo 然后我找到
000a0000-000bffff ：这里的视频 RAM 区域大小为 20000 这是如何计算的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T18:31:50.203

计算是

```
 000bffff
-
 000a0000
 --------
    1ffff 
```

十进制为 131071（十六进制小于 20000）。

你的意思是 20000 是一个十六进制数字吗？

# javascript - 如何始终使页面内容显示在导航栏下方？

> ID：14405276
> 
> 赞同：0
> 
> 时间：2013-01-18T18:27:49.703
> 
> 标签：javascript, html, css, layout, positioning

我想让我的页面内容始终显示在导航栏下方，类似于此页面的工作方式：

[http://www.google.com/intl/en/enterprise/apps/business/products.html#calendar](http://www.google.com/intl/en/enterprise/apps/business/products.html#calendar)

您可以在内容中向下或向上滚动，但导航栏永远不会消失。

为此，我习惯`position:fixed`将导航栏固定在页面顶部。这可行，但是当我希望内容始终被推到导航栏下方时，我仍然可以上下滚动内容，使其“通过”并越过导航栏。

关于如何做到这一点的任何想法？`<ul id='navigation'>`这是包含导航的我的CSS代码：

```
#navigation
{
    text-align: center; 
    position: fixed; 
    float: left;    
    margin: 0;
    padding: 0;
    top: 0;
    left: 0;
    list-style-type: none;
}

#navigation li
{
    display: inline-block; 
    width: 150px;
    height: 110px;
    cursor: pointer;
} 
```

`<div id="container">`这是下面显示`#navigation`并包含所有页面内容主体的 css ：

```
#container
{
    position: absolute;
    margin-top: 180px;
    font-size: 25px;
    width: 90%;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T18:29:40.917

它通过的原因是因为您没有为导航栏设置背景颜色。试试看。

编辑：查看了您的源代码。将 style.css 文件中的导航 CSS 替换为：

```
#navigation
{
    text-align: center; 
    position: fixed; 
    float: left;    
    margin: 0;
    padding: 0;
    top: 0;
    left: 0;
    list-style-type: none;
    background-color: #FFFFFF;
    z-index:999;
} 
```

问题是z-index。将其置于 999 会将导航栏置于所有其他元素之上。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T18:30:26.883

您可以使用属性 z-index:xxx，您尝试过吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-18T18:32:41.457

几年前，我创建了具有相同功能的网站。我选择了 Server Side Includes，它工作得很好。我创建了一个导航链接的“页眉”和一个包含在每个页面上的“页脚”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-18T18:35:24.347

你试过添加`data-role="header"`吗？

```
<div data-role="header" data-position="fixed"> 
```

# javascript - Javascript alert if value is empty and delete confirmation if it isn't

> ID：14405289
> 
> 赞同：0
> 
> 时间：2013-01-18T18:28:48.677
> 
> 标签：javascript

I have a form that deletes a a value once the user has confirmed the action via a javascript confirm. This works well but I would also like the script to alert the user if the value was empty therefore stopping the script from running altogether.

```
<script>
    function delete_confirm() {
        var msg = confirm('Are you sure you want to delete the selected audit');
        if (msg == false) {
            return false;
        }
    }
</script>

<form id="audit_control_form" method="post" 
    action="<?php echo $_SERVER['PHP_SELF']; ?>">
    <select id="audit_id_select" name="audit_id_select" style="width:150px">
        <option value="">Please select</option>
        <? while ($row = mysqli_fetch_assoc($result)) {
            if ($row['dateEnd'] == '0000-00-00') {
                $dateEnd = 'Present';
            } else {
                $dateEnd = date('d-m-Y', strtotime($row['dateEnd']));
            }
            echo '<option value="'.$row['auditID'].'">'.$row['auditName']
                .' (' . date('d-m-Y', strtotime($row['dateStart'])) 
                .' - '.$dateEnd . ')</option>';
        } ?>
    </select>
    <input type="submit" name="audit_delete_submit" 
        onClick="return delete_confirm()" value="Delete" />
</form> 
```

I am not sure what is the best way to implement this (I'm fairly new to javascript).

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T18:34:13.670

You can test the dropdowns selected value like this:

```
function delete_confirm() {

    if(document.getElementById("audit_id_select").value == "")
    {
        alert("Please select an option");
        return false;
    }

    var msg = confirm('Are you sure you want to delete the selected audit');
    if(msg == false) {
        return false;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T18:34:45.397

Simply check of the form element has a value, and branch accordingly.

```
if (document.getElementById("audit_id_select").value) {
  // select box has a selected value
} else {
  // select box has no selected value
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T18:35:22.977

For your select box, you can check if the user has not selected a value by testing if the `selectedIndex` property of the checkbox is 0\. So first you will get a reference to the `<select>` element with `document.getElementById` and then test that property:

```
function delete_confirm() {
    var selectBox = document.getElementById('audit_id_select');
    if (selectBox.selectedIndex === 0) {
        alert("No value selected");
        return false;
    }

    var msg = confirm('Are you sure you want to delete the selected audit');
    if (msg == false) {
        return false;
    }
} 
```

# javascript - 如何使用事件对象来显示有关 DOM 元素的信息

> ID：14405291
> 
> 赞同：0
> 
> 时间：2013-01-18T18:28:58.103
> 
> 标签：javascript, events, alert

我希望能够在网页中单击一个框（这些框是通过代码创建的，并从表单中接收值）并显示有关该框的信息。我正在开发一个 display() 函数，该函数使用事件对象和警报来显示有关框的信息。到目前为止，我在尝试执行此操作时遇到了多次奇怪的失败，这让我相信我没有正确访问对象属性。我是初学者，所以这可能非常明显，但感谢您的帮助。

构造函数：

```
function Box (counter, name, color, number, coordinates) {  
    this.counter = counter;
    this.name = name;
    this.color = color;
    this.number = number;
    this.coordinates = coordinates; 
} 
```

全局变量：

```
var boxes = []; 
var counter = 0; 
```

初始化函数：

```
function init() {     
    var generateButton = document.getElementById("generateButton");
    generateButton.onclick = getBoxValues;

    var clearButton = document.getElementById("clearButton");
    clearButton.onclick = clear;
} 
```

从表单中获取值的函数：

```
function getBoxValues() {
    var nameInput = document.getElementById("name");  
    var name = nameInput.value; 

    var numbersArray = dataForm.elements.amount;
    for (var i = 0; i < numbersArray.length; i++) {
        if (numbersArray[i].checked) {
            number = numbersArray[i].value;
        }
    }  

    var colorSelect = document.getElementById("color");  
    var colorOption = colorSelect.options[colorSelect.selectedIndex];  
    var color = colorOption.value;                       

    if (name == null || name == "") {                    
        alert("Please enter a name for your box");
        return;
    } else {
        var newbox = new Box(counter, name, color, number, "coordinates");  
        boxes.push(newbox);
        counter++;
        /*for(m = 0; m < boxes.length; m++) {
            counter.newbox = boxes[m];
        }*/
    }

    addBox(newbox);

    var data = document.getElementById("dataForm");               
    data.reset();
} 
```

将属性分配给框的函数：

```
function addBox(newbox) {  
    for (var i = 0; i < newbox.number; i++) {                            
        var scene = document.getElementById("scene");              
        var div = document.createElement("div");                  
        div.className += " " + "box"; 
        div.innerHTML += newbox.name; 
        div.style.backgroundColor = newbox.color; 
        var x = Math.floor(Math.random() * (scene.offsetWidth-101));
        var y = Math.floor(Math.random() * (scene.offsetHeight-101));
        div.style.left = x + "px";
        div.style.top = y + "px"; 
        scene.appendChild(div); 
        div.onclick = display; 
        //console.log(newbox); 
        //shows all of the property values of newbox in the console
        //console.log(div); shows that it is an object in the console  
        //console.log(div.hasAttribute(number));  says false               
    }                  
} 
```

显示功能：

```
function display(e) {
    // alert(e.target);  says its an html object
    //alert(e.target.className); works - says "box"
    //alert(e.target.hasAttribute(name)); says false
} 
```

我已经在评论中包含了一些我发现的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T19:11:45.700

The event object only gives you the name not a reference to the element. So... a couple of things.

First if you want to be browser agnostic you want something like (e.srcElement is for IE):

```
 var x = e.target||e.srcElement; 
```

Then get a reference to the element and do what you want:

```
 var refToElement = document.getElementById(x.id); 
```

# java - 大型阵列 - 内存不足错误

> ID：14405295
> 
> 赞同：3
> 
> 时间：2013-01-18T18:29:31.280
> 
> 标签：java, android, arrays, out-of-memory, ram

我正在为单个特定手机（只需要在我的个人手机上运行）编写一个 Android 应用程序，我需要使用以下大数组，我想用它来有效地将 RGB 颜色转换为 HSV：

`RainbowTable = new float[256*256*266][3];`

这个数组的总大小应该是 256*256*256*3*4B = 201326592B = 192MB。`out of memory exception`根据 Android 任务管理器的说法，当我调试该应用程序时，我得到了一个.，尽管在它执行之前仍有大约 300MB 的 RAM 是空闲的。

我已经在清单文件中将`large-heap`-option设置为。`true`

我可以做些什么来防止此错误并保留所需的 RAM 量？

编辑：我的手机已经植根，所以也许有可能增加每个应用程序的内存堆大小。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T18:36:27.507

每个设备都有每个应用程序的最大 RAM 上限。如果清单中的此调用不能缓解您的问题：

```
android:largeHeap="true" 
```

那么您唯一的其他选择是使用 NDK 编写代码。但这是一个非常重要的事情，所以我会先尝试找出一个替代方案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T18:37:28.130

最大堆大小取决于设备，目前 192MB 可能超过设备允许的限制。

但是，[此答案](https://stackoverflow.com/a/11275719/1517648)表明您可以使用[NDK](http://developer.android.com/tools/sdk/ndk/index.html)分配更多内存。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-18T18:33:01.710

如果您已经尝试过**largeHeap=true**，我怀疑是否有可行的解决方案，通常单个内存堆的大小可以最大为 24 - 48 mb，具体取决于设备

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-18T18:45:50.523

您可以使用字节缓冲区

```
ByteBuffer byteBuffer = ByteBuffer.allocate( bigSize); 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2013-01-18T18:36:45.817

是的，当应用程序使用大内存时会发生此内存问题。调用 System.gc(); 这将明确清除垃圾收集器。android 中的每个应用程序都使用有限的内存量，大约为 16mb。所以试试这个。

# php - 我无法解决的 T_CONSTANT_ENCAPSED_STRING 错误

> ID：14405297
> 
> 赞同：-6
> 
> 时间：2013-01-18T18:29:32.517
> 
> 标签：php, syntax-error

这段代码：

```
 $current_user = get_currentuseinfo();
foreach ($alleds as $ed) {
    $checked = (in_array($ed->ID,(array)$currenteds)) ? ' checked="checked"' : '';
    $disabled = (!current_user_can('administrator') && $current_user->ID !== $ed->ID) ? ' disabled="disabled" : '';
    echo '<input type="checkbox" name="currenteds[]" value="' . $ed->ID . '"' .$checked . '" '.$disabled.' /><label for="ratings[]">'.$ed->user_nicename.'</label>';
} 
```

给我这个错误：

```
Parse error: syntax error, unexpected T_CONSTANT_ENCAPSED_STRING 
```

现在，我一直试图弄清楚为什么会收到此错误，但我无法弄清楚。问题可能就在`echo`一线。你知道问题是什么以及我如何解决它吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-18T18:30:36.420

您缺少一个*结束单引号*：

```
$disabled = (!current_user_can('administrator') && $current_user->ID !== $ed->ID) ? ' disabled="disabled" : ''; 
```

应该：

```
$disabled = (!current_user_can('administrator') && $current_user->ID !== $ed->ID) ? ' disabled="disabled"' : ''; 
```

查看您的问题或您的编辑器中突出显示的语法，它应该会为您弹出。

# design-patterns - 比较两个未排序的文件并打印每个文件的唯一元素

> ID：14405300
> 
> 赞同：0
> 
> 时间：2013-01-18T18:29:40.260
> 
> 标签：design-patterns, unix, grep, ksh, matching

文件1：

```
1 2 3 4
5 6 7 8
9 10 11 12
13 14 15 16
17 18 19 20 
```

文件2：

```
9 10 11 12
21 22 23 24
1 2 3 4
17 18 19 20 
```

我是 unix 新手，我正在尝试从每个文件中获取唯一的行并将它们输出到一个新文件中，而不是打印重复项，文件是未排序的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T18:33:50.733

你想要`sort -n`并且`uniq -u`：

```
$ sort -n file1 file2 | uniq -u

5 6 7 8
13 14 15 16
21 22 23 24

# Redirect to file3
$ sort -n file1 file2 | uniq -u > file3 
```

**编辑：**

```
$ awk '{u[$0]++}END{for(k in u)if(u[k]==1)print k}' file1 file2

5 6 7 8
21 22 23 24
13 14 15 16 
```

这`u`是关联数组的名称，您可以将其命名为任何名称*（我选择 u 表示唯一）*。数组中的键*(k)*是文件中的行，因此每次看到重复行时计数都会增加。数组构建完成后，我们循环遍历数组，只打印只看到一次的键，这段代码应该有助于清除它：

```
$ awk '{uniq[$0]++}END{for (key in uniq)print uniq[key]": "key}' file1 file2
2: 9 10 11 12
1: 5 6 7 8
1: 21 22 23 24
1: 13 14 15 16
2: 17 18 19 20
2: 1 2 3 4 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T18:32:53.370

假设您想要两个文件中的一组唯一行*作为一个整体*：

```
sort -u File1 File2 > File3 
```

UPD：`-u`可能特定于 GNU coreutils。如果您的排序不支持它，请参阅@sudo_O 的答案。

UPD2：事实证明@sudo_O 对问题的解释不同：我认为应该包含一次重复的行，他认为应该删除它们。如果我是对的，`sort|uniq`那就是 non-GNU 的替代方案`sort`。否则，`sort|uniq -u`是迄今为止最好的解决方案。

# java - 覆盖方法：如何“注入”到超方法中？

> ID：14405303
> 
> 赞同：0
> 
> 时间：2013-01-18T18:30:04.003
> 
> 标签：java, overriding, method-invocation

假设三个类，一个是另一个的子类。每个覆盖父母的方法。

```
public class BaseClass {

    public void doStuff() {
        performBaseTasks();
    }

}

public class MiddleClass extends BaseClass {

    // {BaseClass} Overrides

    public void doStuff() {
        performMiddleTasks();
        super.doStuff();
    }

}

public class FinalClass extends MiddleClass {

    // {BaseClass} Overrides

    public void doStuff() {
        performFinalTasks();
        super.doStuff();
    }

} 
```

调用时`new FinalClass().doStuff()`，会导致方法调用顺序如下：

1.  `performFinalTasks();`
2.  `performMiddleTasks();`
3.  `performBaseTasks();`

我想带上 `perfomFinalTasks()`和。我怎样才能做到这一点？`performMiddleTasks()``performBaseTasks()`

1.  `performMiddleTasks();`
2.  `performFinalTasks();`
3.  `performBaseTasks();`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T18:34:22.757

在最终类 doStuffDifferently() 中编写一个公共方法并按此顺序调用这些方法。我不确定是否可以通过 doStuff() 方法中的任何其他技巧来做到这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T18:38:20.757

一种可能的方法，如果你可以使中产阶级抽象：

```
public abstract class MiddleClass extends BaseClass {

    // {BaseClass} Overrides
    public void doStuff() {
        performMiddleTasks();
        doProxyExec();
        super.doStuff();
    }

    public abstract void doProxyExec();
} 
```

您覆盖子类中的代理方法：

```
public class FinalClass extends MiddleClass {

    // {BaseClass} Overrides
    public void doStuff() {
        super.doStuff();
    }

    // {MiddleClass} Overrides
    public void doProxyExec(
        performFinalTasks();
    }
} 
```

方法调用链接的一种不是很多态的方式，但话说回来，原来的设计有点……奇怪。

# matlab - 在 Matlab 中更改默认输出文件处理程序

> ID：14405304
> 
> 赞同：0
> 
> 时间：2013-01-18T18:30:05.253
> 
> 标签：matlab, stdout, printf

我认为这会很有用，至少我觉得有用，我搜索但没有找到任何合适的东西。

假设您有一组使用标准输出的行，或者这些行包含在一个函数中。然后我需要将输出流更改为文件。但不是 diary() 等。

例子：

```
ShowResults(...)   % this is a function containing a lot of fprintf('asdasdasd', ...)
                   % which by default shows messages on monitor 
```

那么我需要类似的东西：

```
ShowResults(...)   % this will now output to monitor
setOutputHandler(my_file_pointer); % setup redirection
ShowResults(...)   % this will now output to the file
setOutputHandler(stdout); 
```

甚至更好的是：

```
setOutputHandler(stdout, my_file_pointer);
ShowResults(...)   % this will now output to the file and monitor at the same time
setOutputHandler(stdout); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T19:18:07.947

特别是如果你使用`fprintf`在函数中使用，最简单的方法是定义一个额外的输入，您将在每次调用时将其用作第一个参数`fprintf`

默认情况下，附加输入将设置为 0，这意味着`fprintf`打印到屏幕。`fopen`或者，您可以传递由to创建的文件标识符`showResults`创建的文件标识符，以便`fprintf`写入文件。

如果这不可行，您可以随时使用`capturedOutput = evalc('showResults(...)')`，它将捕获数组中的所有输出，您将从该数组中写入文件。

# visual-c++ - 使用 Kinect 跟踪头顶

> ID：14405307
> 
> 赞同：0
> 
> 时间：2013-01-18T18:30:12.383
> 
> 标签：visual-c++, kinect, openni

我想知道是否有一个现有的 API 可以用 Kinect 跟踪人的头顶。例如，Kinect 从天花板朝下。

如果没有，我怎么能用它的深度数据来实现这样的事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T20:50:41.650

不会。Kinect 期望面对站立（或坐着，给定适当的旗帜）的人。所有具有骨架跟踪概念的 API（官方或第 3 方）都期望这一点。

如果您希望从上面跟踪某人，则需要使用诸如[OpenCV](http://opencv.willowgarage.com/wiki/)（或[EmguCV](http://www.emgu.com/wiki/index.php/Main_Page)，用于 C# 开发）之类的库。好吧，您不必这样做*，*但他们提供实用程序来帮助计算机视觉和图像处理。这些库不关心您使用的是 Kinect 还是普通的 RGB 相机。

使用上面的 Kinect，您可以使用深度数据来帮助定位和跟踪 blob。让 Kinect 与地板相距已知距离，让几个人在它下面走，看看你从中得到什么 z 坐标——然后你可以假设在某个 z 坐标范围内的任何东西都是一个人走过屏幕（与猫或其他东西相比）。

您将需要使用标准图像处理技术（参见上面的 OpenCV 参考）来初步找到图像中的斑点。一旦找到，来自 Kinect 的深度数据可能会很有用，但我认为如果你只是看着人们走过地板，你会发现它最终不是必需的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T01:40:02.703

我们构建了一种由 Kinect 驱动的体验，其中传感器必须指向下方才能检测到沿墙行走的用户。我们使用 openTSPS 完成所有工作，包括获取相机输入、进行 blob 检测并将跟踪的“人”移交给（在我们的例子中）处理应用程序。它对我们非常有效。

[http://opentsps.com/](http://opentsps.com/)

# sql - 如何使用包含字母值的 sql 搜索值

> ID：14405309
> 
> 赞同：2
> 
> 时间：2013-01-18T18:30:19.340
> 
> 标签：sql, sql-server, sql-server-2008

我目前正在使用 SQL Server 2008，并且我有一个数字列表。有些与字母相关联，我只想提取与这些值相关联的数字。我认为一个正确的陈述可能会奏效，但我有点菜鸟，并且无法找到一种有效的方法。

例如：

```
columnName
==============
12                         
13                         
122b 
11a
10z
9
609 
```

我想查看：

```
Result
==============
122b
11a
10z 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T18:34:49.193

SQL Server 2008 不直接支持正则表达式（它需要 CLR 扩展），但它的[模式匹配](http://msdn.microsoft.com/en-us/library/ms187489%28SQL.90%29.aspx)支持范围：

```
WHERE column LIKE '%[a-zA-Z]%' 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-18T18:36:25.773

试试这个：

```
WHERE YourColumn like '%[a-z]' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T18:31:59.907

```
SELECT *
FROM tableName
WHERE ISNUMERIC(columnName) = 0 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!3/41187/1)

其他来源

*   [数字](http://msdn.microsoft.com/en-us/library/ms186272%28v=sql.100%29.aspx)

# python - 如何使用 Django 将字符串解析为日期时间对象

> ID：14405314
> 
> 赞同：2
> 
> 时间：2013-01-18T18:30:28.777
> 
> 标签：python, django

所以我有一个这样的字符串：

```
2012-01-01T00:00:00Z 
```

我可以将其转换为可以保存在模型中的对象，该对象具有以下字段：

```
start_date = models.DateTimeField() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T19:14:03.387

只需将此字符串解析为日期时间对象。

答案在这里： [如何解析 ISO 8601 格式的日期？](https://stackoverflow.com/questions/127803/how-to-parse-iso-formatted-date-in-python)

所以你可以使用`dateutil.parser`或`iso8601`模块。

# java - JSP：构造变量名称

> ID：14405317
> 
> 赞同：0
> 
> 时间：2013-01-18T18:30:42.530
> 
> 标签：java, jsp

在 JSP 中，我需要以编程方式构造要访问的变量名，例如

变量列表

*   `${变量1}`
*   `${变量2}`
*   `${变量3}`
*   `${变量4}`

使用`<c:forEach>`with是`${variable + i}`不够的，因为`i`它是变量的总和。有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T20:40:56.383

使用`<jsp:useBean class="java.util.HashMap">`技巧。

```
<jsp:useBean id="variables" class="java.util.HashMap" />
<c:forEach items="${items}" var="item" varStatus="loop">
    <c:set target="${variables}" property="variable${loop.index}" value="some" />
    ...
</c:forEach> 
```

这基本上在页面范围内创建 a`HashMap`并将给定的变量作为映射键。您可以自由选择相关的地图值。您甚至可以在其中使用 EL。

为了访问它，只需使用`${variables['variable1']}`通常的方式等等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T19:36:03.290

使用以“i”为索引的数组。

# exchangewebservices - EWS 更新将时区更改为 UTC

> ID：14405324
> 
> 赞同：2
> 
> 时间：2013-01-18T18:31:32.503
> 
> 标签：exchangewebservices, exchange-server-2010

我在网上看到这个问题问了好几次，但找不到答案。

当我使用托管 EWS 2.0 创建约会（会议）时，邀请电子邮件正确显示时间和时区。当我更新会议时，新的邀请电子邮件会显示 UTC 时区的时间。这是 UTC 的正确时间，但应该显示在太平洋。

我在创建服务连接时尝试设置区域，但这使得初始邀请也将时区显示为 UTC，以及任何更新。

我尝试设置 StartTimeZone 和 EndTimeZone 属性，并在绑定约会以进行修改时将这些属性包含在属性集中。

是否有其他属性可以控制 Exchange 在发送邀请时如何格式化时间？这是一些显示我如何执行更新的代码：

```
 Dim EWS As ExchangeService = GetEWSConnection(UserEmailAddress)
        Dim meeting As Appointment = Appointment.Bind(EWS, New ItemId(CalendarEvent.ItemKey), New PropertySet(BasePropertySet.IdOnly, AppointmentSchema.Start, AppointmentSchema.End, AppointmentSchema.ReminderDueBy, AppointmentSchema.StartTimeZone, AppointmentSchema.EndTimeZone, AppointmentSchema.TimeZone, AppointmentSchema.Subject, AppointmentSchema.Location, AppointmentSchema.Body))
        Dim timeZone As TimeZoneInfo = TimeZoneInfo.FindSystemTimeZoneById(LocalTimeZoneID)
        With meeting
            .Subject = CalendarEvent.Subject
            .Location = CalendarEvent.Location
            .Body = CalendarEvent.Body
            .Start = CalendarEvent.StartTime
            .End = CalendarEvent.EndTime
            .StartTimeZone = timeZone
            .EndTimeZone = timeZone
            '  snip  (removed attendee add/remove)
            .Update(ConflictResolutionMode.AlwaysOverwrite, SendInvitationsOrCancellationsMode.SendToChangedAndSaveCopy)
        End With 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T04:33:35.463

我意识到这是一个令人沮丧的答案，但我相信这是一个 Exchange 错误。无论您如何调整 API 公开的各种时区属性，这种行为仍然会发生。据我所知，也没有任何服务器级设置会影响这一点，尽管我承认我还没有仔细研究过所有这些设置。

就我而言，附加的 UTC 时间似乎伴随着消息在更新时从其原始 HTML 更改为纯文本版本。该错误 ( [http://support.microsoft.com/kb/2689810](http://support.microsoft.com/kb/2689810) ) 已修复，但我的组织尚未应用该补丁。我想，当另一个错误被修复时，这个错误可能已经过时了。如果可以选择在 Exchange 服务器上安装更新，那么这可能值得一试。

# java - JavaFX TabPane 取消选项卡更改

> ID：14405328
> 
> 赞同：1
> 
> 时间：2013-01-18T18:31:53.677
> 
> 标签：java, javafx-2

使用 JavaFX 2.2 我有一个窗口，它主要由一个带有 4 个选项卡的 TabPane 组成。用户可以更改任何选项卡中显示的数据，如果他们这样做，我想确保他们在保存/取消/更新数据之前不会离开该选项卡。特别是我想确保他们没有选择不同的选项卡。如果他们试图退出或执行某些菜单项，我可以捕捉到，但我似乎无法找到中断选项卡更改的方法。当他们单击新选项卡 (onSelectionChanged) 时，我可以捕捉到，并询问他们是否真的想放弃他们的编辑，但无论如何都会发生选项卡更改。非常感谢帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T18:36:15.630

您可以禁用其他选项卡，直到用户单击“保存”或“取消”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T21:18:26.640

获取选项卡窗格的选择模型，监视其 selected index 属性的更改，当您检测到更改时询问您的选项卡是否可以立即更改 - 如果没有，请将所选索引设置回当前选定的选项卡，覆盖选择更改为新选项卡。

# ios - 启动图像后 iPhone 屏幕变黑

> ID：14405330
> 
> 赞同：0
> 
> 时间：2013-01-18T18:31:57.460
> 
> 标签：ios, error-handling, xcode4.5

所以一切都很顺利，我的应用程序几乎完成了，直到发生这种情况。除了尝试在 iOS 模拟器中运行它之外，没有进行任何更改。当我打算再次在我的 iPhone 上尝试它时，启动图像后屏幕变黑了！！而且我在 xcode 中没有任何错误。

我试图清理我的项目，重置 iOS 模拟器（只是为了好玩），重新启动我的 Macbook，重新启动 iPhone，从主屏幕删除应用程序并重新安装。

在我的 iPhone 5 上为 iOS 6 构建。

AppDelegate.h

```
//
//  AppDelegate.h
//  
//
//  Created by Øyvind Larsen Runestad on 13.01.13.
//  Copyright (c) 2013 Øyvind Larsen Runestad. All rights reserved.
//

#import <UIKit/UIKit.h>

@interface AppDelegate : UIResponder <UIApplicationDelegate> {

IBOutlet UITabBarController *tabBarController;
}
@property (strong, nonatomic) UIWindow *window;

@property(nonatomic, readonly) UITabBarController *moreNavigationController;

@end 
```

AppDelegate.m

```
//
//  AppDelegate.m
//  
//
//  Created by Øyvind Larsen Runestad on 13.01.13.
//  Copyright (c) 2013 Øyvind Larsen Runestad. All rights reserved.
//

#import "AppDelegate.h"

@implementation AppDelegate

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    // Override point for customization after application launch.
    return YES;
}

- (void)applicationWillResignActive:(UIApplication *)application
{
    // Sent when the application is about to move from active to inactive state. This can occur for certain types of temporary interruptions (such as an incoming phone call or SMS message) or when the user quits the application and it begins the transition to the background state.
    // Use this method to pause ongoing tasks, disable timers, and throttle down OpenGL ES frame rates. Games should use this method to pause the game.
}

- (void)applicationDidEnterBackground:(UIApplication *)application
{
    // Use this method to release shared resources, save user data, invalidate timers, and store enough application state information to restore your application to its current state in case it is terminated later. 
    // If your application supports background execution, this method is called instead of applicationWillTerminate: when the user quits.
}

- (void)applicationWillEnterForeground:(UIApplication *)application
{
    // Called as part of the transition from the background to the inactive state; here you can undo many of the changes made on entering the background.
}

- (void)applicationDidBecomeActive:(UIApplication *)application
{
    // Restart any tasks that were paused (or not yet started) while the application was inactive. If the application was previously in the background, optionally refresh the user interface.
}

- (void)applicationWillTerminate:(UIApplication *)application
{
    // Called when the application is about to terminate. Save data if appropriate. See also applicationDidEnterBackground:.
}

@end 
```

有人有解决这个问题的方法吗？

最好的问候，Øyvind Larsen Runestad。

**编辑：解决了！**

> > 好的，我整理好了。项目中的 Main Storyboard 设置为空白。我所要做的就是将其更改为 MainStoryboard。
> > 
> > 毕竟@H2CO3 似乎我的 AppDelegate 还可以；）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T18:37:09.730

如果这**确实**是您的实际代码，那么问题如下：您没有在应用程序启动时创建密钥窗口。

# javascript - 将 JSON 编码为 Backbone.Model.save 的 URL 参数（patch = true）

> ID：14405332
> 
> 赞同：5
> 
> 时间：2013-01-18T18:32:05.943
> 
> 标签：javascript, ajax, backbone.js

我在正确形成 Backbone.Model.save 调用时遇到了一些麻烦。我正在调用的 Web 服务使用 URL 参数，但我在 Javascript 中拥有的是已更改字段的对象。例如，我有 object `{foo: 'bar', yar: 'har'}`，我希望 Backbone.Model.save 将补丁请求发送到类似的 URL`http://server/path/to/service?foo=bar&yar=har`

听起来很简单，对吧？无论如何，这给我带来了很多麻烦。这是我到目前为止所得到的（这不起作用；我也有成功/错误回调，但我认为这些对于这个问题并不重要）：

```
object = 
    foo: 'bar', 
    yar: 'har'

model.save object,
    patch: true 
```

我也尝试了其他一些选择：

```
model.save object,
    patch: true
    emulateJSON: true 
```

这将 contentType 设置为“application/x-www-form-urlencoded”，这很好，但是 Backbone.sync 在 ajax 请求中发送的数据是： {model: "{"foo": "bar", "yar" ：“哈”}”。该服务得到了这一点，并且不知道如何处理“模型”属性。

```
model.save object,
    patch: true
    contentType: "application/x-www-form-urlencoded" 
```

这只是编码`object`为字符串并将其填充到`options.data`. 同样，该服务不知道如何处理它。

关于如何使其符合我的服务规范的任何其他想法？我可以自己调用 ajax 并自己更新模型（及其所属的集合），但我真的不想这样做。对我有用的 ajax 请求是：

```
$.ajax
    url: "http://server/path/to/service"
    type: "PATCH"
    data: object 
```

**更新：**我之前的两个选项不起作用的原因在 Backbone.js 本身中很清楚：

```
// Ensure that we have the appropriate request data.
if (options.data == null && model && (method === 'create' || method === 'update' || method === 'patch')) {
  params.contentType = 'application/json';
  params.data = JSON.stringify(options.attrs || model.toJSON(options));
}

// For older servers, emulate JSON by encoding the request into an HTML-form.
if (options.emulateJSON) {
  params.contentType = 'application/x-www-form-urlencoded';
  params.data = params.data ? {model: params.data} : {};
} 
```

看着这个，我想也许如果我将对象塞进对象`options.data`中并发送空属性，也许它会起作用：

```
model.save {},
    patch: true
    data: object 
```

显然，这试图修补选项“[object Object]”。我猜它确实对对象进行了字符串化......某处......但这可能接近正确答案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T20:58:25.457

看起来我正在寻找的`processData`是`jQuery.ajax`. `Backbone.sync`默认情况下执行以下操作：

```
// Don't process data on a non-GET request.
if (params.type !== 'GET' && !options.emulateJSON) {
  params.processData = false;
} 
```

因此，它并没有将对象处理为我的 URL 参数。[（jQuery API）](http://api.jquery.com/jQuery.ajax/)

因此，一段工作代码将是：

```
model.save {},
    patch: true
    data: object
    processData: true 
```

事实上，我可能总体上没有正确使用 Backbone.Model ......但是，至少它正在工作。:P

# php - PHP 从两个不同的文件重新声明了类

> ID：14405333
> 
> 赞同：0
> 
> 时间：2013-01-18T18:32:07.633
> 
> 标签：php, google-api, adsense, google-analytics-api, fatal-error

我有下面的代码。当我运行它时，我得到错误：

```
Fatal error: Cannot redeclare class Google_Account in
   /var/www/vhosts/example.com/httpdocs/google-api-php-client  
  /src/contrib/Google_AnalyticsService.php on line 379 
```

这是因为“ **Google_AdsenseService.php** ”和“ **Google_AnalyticsService.php** ”文件都有一个名为`Google_Account`. Google_Account 类的成员变量和函数在这些文件中是不同的。

我需要同时获取 Adsense 和 Analytics 数据。所以我需要同时使用这两种服务。我找不到取消声明类的方法。如何同时使用这两项服务？

```
include_once APP.'Vendor/google-api-php-client/src/Google_Client.php';
$client1 = new Google_Client();
$client1->setApplicationName('aaa');
$client1->setDeveloperKey('1234');
$client1->setRedirectUri('http://example.com/');

include_once APP.'Vendor/google-api-php-client/src/contrib/Google_AdsenseService.php';
$client1->setClientId('2345');
$client1->setClientSecret('4444');
$service1 = new Google_AdsenseService($client1);
// some code that gets data from "$service1"

$client2 = new Google_Client();
$client2->setApplicationName('aaa');
$client2->setDeveloperKey('1234');
$client2->setRedirectUri('http://example.com/');

include_once APP.'Vendor/google-api-php-client/src/contrib/Google_AnalyticsService.php';
$client2->setClientId('4567');
$client2->setClientSecret('5555');
$service2 = new Google_AnalyticsService($client2);
// some code that gets data from "$service2" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T18:41:13.903

您可以在 contrib 目录中每个文件的顶部添加不同的命名空间。例如在顶部`Google_AdsenseService.php`添加文件。`namespace Google\AdsenseService;`

```
// Google_AdsenseService.php file
namespace Google\AdsenseService; 
```

只要文件内容仅引用同一文件中的内容，它就可以工作。只有当您访问它时，您才能通过命名空间访问。像这样，

```
$service1 = new Google\AdsenseService\Google_AdsenseService($client1); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T18:40:11.330

你有两个选择：

1.  对于 PHP 5.3+，您可以在文件开头添加命名空间。在此之后，您需要修复修改后的类对其他类的引用（异常将变为 ::Exception 等）

2.  您可以在文本编辑器中重命名该类，这可能会更容易。只需在您喜欢的文本编辑器中打开文件，然后使用全部替换。将 Google_Client 更改为其他内容。有一个很好的改变，lib 不会使用动态类构造和其他有趣的东西，所以你快速重构的代码可以工作。

# scala - 是否可以使用 Cucumber-jvm Scala 避免可变状态？

> ID：14405345
> 
> 赞同：7
> 
> 时间：2013-01-18T18:32:45.590
> 
> 标签：scala, cucumber-jvm

在 Cucumber 测试中，一个表示为 和 的特性`Given`通常`When`被`Then`实现为三个独立的方法。这些方法通常需要共享值，而可变变量似乎就是这样做的方法。

举个简单的例子：

一个特征：

```
Given the digit 2
When it is multiplied by 3
Then the result is 6 
```

和黄瓜方法：

```
class CucumberRunner extends ScalaDsl with EN with ShouldMatchers {

  var digitUnderTest: Int = -1

  Given("""^the digit (\d)$""") { digit: Int =>
    digitUnderTest = digit
  }

  When("""^it is multiplied by 3$""") {
    digitUnderTest = digitUnderTest * 3
  }

  Then("""^the result is (\d)$""") { result: Int =>
    digitUnderTest should equal (result)
  }
} 
```

有什么办法，大概是内置在 Scala 测试或 Scala 的 Cucumber-jvm 中，允许我不表达`digitUnderTest`为可变变量？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T21:51:47.227

查看[java](https://github.com/cucumber/cucumber-jvm/blob/master/examples/java-calculator/src/test/java/cucumber/examples/java/calculator/DateStepdefs.java)和[scala](https://github.com/cucumber/cucumber-jvm/blob/master/examples/scala-calculator/src/test/scala/cucumber/examples/scalacalculator/RpnCalculatorStepDefinitions.scala)`cucumber-jvm`中的示例，我怀疑它提供了一种逐步传递数据的方法，而无需将其临时存储在变量中。

由于您无法`val`在 Scala 中重新分配 a，因此我能想到的最接近您摆脱可变变量`var`的方法是拥有一个包含临时测试数据的全局映射。

```
class CucumberRunner extends ScalaDsl with EN with ShouldMatchers {

  Given("""^the digit (\d)$""") { digit: Int =>
    GlobalTestData.save("my_unique_key_1", digit)
  }

  When("""^it is multiplied by 3$""") {
    GlobalTestData.load("my_unique_key_1") match {
      case Some(obj) => {
        val result = obj.asInstanceOf[Int] * 3
        GlobalTestData.save("my_unique_key_2", result)
      }
      case None => // throw exception or fail test
    }
  }

  Then("""^the result is (\d)$""") { result: Int =>
    GlobalTestData.load("my_unique_key_2") match {
      case Some(obj) => obj.asInstanceOf[Int] should equal (result)
      case None => // throw exception or fail test
    }
  }
} 
```

然后是`GlobalTestData`：

```
object GlobalTestData {
  val map = scala.collection.mutable.Map.empty[String, Any];

  def save(key: String, value: Any) {
    map.put(key, value)
  }

  def load(key: String): Option[Any] = map.get(key)
} 
```

在这种情况下，您需要仔细生成密钥，以便它们在各个步骤中相同。当然，你可以使用一些`val`s 来保存这些键的值。

同样在这个特定的功能中，为什么不结合`Given`和`When`步骤：

```
When the digit 2 is multiplied by 3
Then the result is 6 
```

这样您就可以在`GlobalTestData`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-09T14:27:11.077

尽管在 CucumberJVM 的 ScalaDSL 中，一个步骤是一个函数`f:List[Any] => Any`，但[当前的实现](https://github.com/cucumber/cucumber-jvm-scala/blob/master/scala/sources/src/main/scala/cucumber/runtime/scala/ScalaStepDefinition.scala#L76 "ScalaStepDefinition#执行")丢弃了每一步执行的结果，这意味着您无法在下一步中使用上一步的结果。

目前，共享一步结果的唯一方法是通过一些共享状态，无论是在步骤定义类还是像子浩宇建议的更全局的上下文（顺便说一句，我们在大型项目中也使用共享可变映射方法）

# android - Android Button Set Button Invisible without click

> ID：14405346
> 
> 赞同：0
> 
> 时间：2013-01-18T18:32:48.157
> 
> 标签：android, button, visible, invisible

这似乎是一个非常简单的问题，但由于某种原因，我发现自己找不到任何合适的答案。我所拥有的是 2 个按钮，其中一个在框架布局中堆叠在另一个上，当单击 Button1 时，它变得不可见并且 Button2 出现。我想要发生的是几秒钟后 Button2 自动变为不可见，而 Button1 再次可见。这是我的一小段代码。任何帮助将不胜感激！

```
button1 = (Button)findViewById(R.id.button1);
button2 = (Button)findViewById(R.id.button2);

        button1.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub 

                button1.setVisibility(Button.GONE);
                button2.setVisibility(Button.VISIBLE);

            }
        }); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T18:53:10.510

比这里提出的许多更简单的解决方案如下：

```
button1 = (Button)findViewById(R.id.button1);
button2 = (Button)findViewById(R.id.button2);

button1.setOnClickListener(new View.OnClickListener() {

    @Override
    public void onClick(View v) {
        button1.setVisibility(Button.GONE);
        button2.setVisibility(Button.VISIBLE);
        button1.postDelayed(new Runnable() {
            @Override
            public void run() {
                button1.setVisibility(View.VISIBLE);
                button2.setVisibility(View.GONE);
            }
        }, 2000);
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T18:48:23.743

这可以是您的 Activity 的内部类。

```
public class SleepTask extends AsyncTask<Void, Void, Void>
{

    final Button mOne, mTwo;

    public OnCreateTask(final Button one, final Button two) {  
          mOne = one;
          mTwo = two;
    }

    protected Void doInBackground(Void... params)
    {
         //Surround this with a try catch, I don't feel like typing it....
         Thread.sleep(2000);
    }

    protected void onPostExecute(Void result) {
         //This keeps us from updating a no longer relevant UI thread.
         //Such as if your acitivity has been paused or destroyed.
         if(!isCancelled())
         {
              //This executes on the UI thread.
              mOne.setVisible(Button.VISIBLE);
              mTwo.setVisible(Button.GONE);
          }
     }
} 
```

在您的活动中

```
 SleepTask mCurTask;

   onPause()
   {
       super.onPause();
       if(mCurTask != null)
           mCurTask.cancel();
   } 
```

在你的 onClick

```
 if(mCurTask == null)
   {
       button1.setVisibility(Button.GONE);
       button2.setVisibility(Button.VISIBLE);
       mCurTask = new SleepTask;
       mCurTask.execute();
   } 
```

我从头顶上做了所有这一切，所以可能必须通过日食来让它快乐。请记住，所有生命周期调用（onCreate、onDestroy）都是在 UI 线程上完成的，如果你想让它安全，你应该只在 UI 线程上访问 mCurTask。

AsyncTasks 使用起来非常好，这对于您的特定场景可能会过度杀戮，但它是 Android 中常见的一种模式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T18:41:45.633

有很多方法可以做到这一点。

您应该在您的活动中实现一个[处理程序](http://developer.android.com/reference/android/os/Handler.html)（链接到 UI 线程）并从一个新线程发布一个 sendMessageDelayed

**编辑：** Scott W. 有权利：在相同的逻辑中，您可以使用命令

`PostDelayed(Your_runnable, time_to_wait)`

# c# - C# 在表单中执行方法

> ID：14405348
> 
> 赞同：3
> 
> 时间：2013-01-18T18:32:51.287
> 
> 标签：c#, forms, user-interface

如何在 C# 中创建执行以下操作的程序： 1\. 创建一个带有按钮和标签的 WindowsForm 2\. 当按下按钮时，标签应从“False”变为“True”，反之亦然

我希望根据布尔变量的状态显示标签的消息。

```
bool Light1 = false; 
```

当我按下按钮时，我想`Light1`变成 True，如果我再次按下它应该变成 False。

标签显示**True**或**False**消息，具体取决于`Light1`;

我面临的问题是根据`Light1`. 当我按下按钮时执行的代码是：

```
private void button1_Click(object sender, EventArgs e)
{
    if (parametri.Light1 == false)
    {
        parametri.Light1 = true;
    }
    else
    {
        parametri.Light1 = false;
    }
} 
```

`parametri`是一个包含一个`Light1`初始化为 False 的公共 bool 变量的类。

如果有人能向我解释如何在标签和 Light1 变量之间建立联系，我将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T18:34:04.037

```
private void button1_Click(object sender, EventArgs e)
{
    // No need of IF Statements to reverse a Boolean
    parametri.Light1 = !parametri.Light1;
    label1.Text = parametri.Light1.ToString();
} 
```

如果您希望第一个字母为大写（True、False），只需执行以下操作：

```
private void button1_Click(object sender, EventArgs e)
{
    // No need of IF Statements to reverse a Boolean
    parametri.Light1 = !parametri.Light1;

    Char[] characters = parametri.Light1.ToString().ToCharArray();
    characters[0] = Char.ToUpper(characters[0]);

    label1.Text = new String(characters);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T18:38:11.660

`Text`您可以通过属性在标签中设置布尔值：

```
private void button1_Click(object sender, EventArgs e)
{
    // invert the bool value with the not operator. In C# is equals Java "!"
    parametri.Light1 == !parametri.Light1;

    // print the bool value in your label.
    Label1.Text = parametri.Light1.ToString();
} 
```

# events - 当用户在 Joomla 2.5 中退出网站时执行代码

> ID：14405351
> 
> 赞同：0
> 
> 时间：2013-01-18T18:32:58.533
> 
> 标签：events, joomla, web, joomla2.5

我是 Joomla 2.5 的新手。

当用户关闭网站时，我想从用户定义的表中删除一行。我不知道在哪里可以找到当一个人退出 Joomla Web 应用程序时执行的代码。

在 asp.net 中，这很容易，因为您需要扩展`OnApplicationExit()`事件处理程序。我在 Joomla 2.5 中找不到类似的事件。甚至可以在 joomla 2.5 中做到这一点吗？

或者，当用户会话超时时，我也可以从表中删除一行，但我不知道该怎么做。请提供建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T13:44:53.133

您需要编写系统或用户插件，您要查找的事件是`onUserLogout`

[http://docs.joomla.org/Plugin/Events/User](http://docs.joomla.org/Plugin/Events/User)

# c++ - 如何使用特定于应用程序的密钥加密目录？

> ID：14405356
> 
> 赞同：4
> 
> 时间：2013-01-18T18:33:03.523
> 
> 标签：c++, windows, security, filesystems, encrypting-file-system

我正在开发一个 C++ 应用程序，该应用程序通过多个类、数据库库等在单个目录中的多个文件中存储（并经常访问）其数据。我想开始使用由管理的密钥加密磁盘上的所有这些数据应用。

**在 Windows 上，如果**应用程序可以直接设置加密密钥而不是使用基于登录用户密码的加密密钥，那么以编程方式为目录启用 EFS 将是完美的。这似乎不可能。

因为代码中有很多地方可以读取/写入文件，其中一些具有完全随机访问权限，所以在没有直接 OS 支持的情况下，导出类似于 OS 文件操作 API 的库将是最简单的。

Windows 是最大的用户群，但在 Mac 和 Linux 上可用的东西将是一大优势。

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T23:20:20.503

将应用程序配置为作为服务帐户运行，仅供其使用。然后，配置 EFS。由于应用程序的服务帐户将拥有这些文件，其用户特定密钥应该是它唯一有效的 EFS 密钥，因此只有应用程序（这将是唯一在这个新服务帐户下运行的东西）才能访问文件.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T09:56:31.370

我不是专家，但我有一些建议，
（“用户”在这里被认为是男性）

在 Windows 中，当用户登录时，他将拥有操作属于他的文件或文件夹的所有权限。
但是，如果他试图操纵属于其他用户的文件或文件夹，则不允许他这样做。所以，他不能操纵其他用户的文件。
如果用户是管理员，他将拥有操作文件的所有权限。
在您的情况下，我相信用户不是管理员。

所以，**我建议**你：
为这个应用程序创建一个用户，比如说 Bob（Bob 不是要使用这个应用程序的用户）。
然后您创建一个文件夹来存储您的文件并仅将所有权限授予 Bob（和管理员）。
对于所有其他人，没有对该文件夹执行任何操作的权限。
**您的应用程序必须由管理员安装**。

当您启动时，您的应用程序向当前用户询问 Bob 的密码。
如果密码正确，
使用您的应用程序允许当前用户完全访问文件夹权限。然后应用程序可以按您的意愿工作。
如果用户退出应用程序，请
删除当前用户的所有权限，以便在退出此应用程序后其他人无法访问该内容。
但管理员仍然可以访问此内容。

这类似于 Linux 用户管理。
当您获得外壳时，您可以`su username`在完成工作并且他退出外壳时更改用户使用，然后其他人无法使用这些文件。但是 root 用户可以在 Linux 中做任何事情。

**但是有一个问题**。
管理员可以获得完整的内容和访问权限，因为他可以修改权限。
要禁止这种情况，请使用任何技术压缩并使用密码来保存文件。该密码只有使用它的用户知道。在将文件保存到文件夹之前，请使用密码对其进行压缩。在使用该文件之前，请使用密码将其解压缩。

如果压缩密码与用户密码相同，则有问题。
管理员可以将用户密码重置为某些东西并打开他的帐户。
为了防止这种情况，您可以使用以下技术：
使用 zip 密码作为用户密码的反向，这样如果他的密码是 1234，则压缩密码是 4321，或者使用用户密码的哈希值作为压缩密码。
如果 zip 密码是 MD5 哈希或 SHA-1 之类的哈希值，那么由于密码长度的原因，对 zip 文件的暴力破解将不起作用。
我不知道这是否是一个可行的解决方案，或者这是否可以实施。
但是，如果您认为其中有一些好的想法，您可以从中汲取一些想法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-28T10:05:43.613

除非我在您的问题中遗漏了某些内容，否则[TrueCrypt](http://www.truecrypt.org/)似乎是您的理想解决方案。

它将允许：

1.  利用现有的 OS 文件 API（因为挂载的卷的行为就像常规卷一样）
2.  以编程方式管理访问密钥（密码）
3.  限制对已安装卷的访问（通过操作系统机制）
4.  在所有平台（Windows、Mac、Linux）上使用相同的原则

或者，如果您愿意，您可以使用它加密/解密单个文件。

有很多关于如何使用它的例子。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-18T18:38:19.123

您是否考虑将文件存储在加密存档中，例如 zip 文件？不知道您正在使用哪种语言，很难给出更具体的答案。

# objective-c - 通过 NSMutableArray 的 ref 或值 - (void)addObjectsFromArray？

> ID：14405358
> 
> 赞同：2
> 
> 时间：2013-01-18T18:33:09.693
> 
> 标签：objective-c

您不能从 NSArray 添加/删除对象，因为它是不可变的。但是您可以更新其中一个对象。

相比之下，NSMutableArray 可以添加/删除对象，并且有一个 addObjectsFromArray 方法，该方法接受一个 NSArray 作为参数。

现在 NSMutableArray 中的对象最初是通过引用还是值在 NSArray 中？

这意味着如果我更新之前传递给 NSMutableArray 的 NSArray 中对象的属性，NSMutableArray 中的对象是否会看到该更改，反之亦然？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T18:40:14.297

`NSArray`或`NSMutableArray`存储对象的引用。
在您的情况下，**是**的更改将反映为`NSArray`并且`NSMutableArray`具有相同对象的引用。

# php - HTML 电子邮件中的外来字符

> ID：14405360
> 
> 赞同：0
> 
> 时间：2013-01-18T18:33:10.127
> 
> 标签：php, html, email, modx

我编写了一个脚本，它从网页中获取 HTML 输入并将其作为 HTML 电子邮件发送出去。由于某种原因，在到达我们收件箱的电子邮件中出现了输入中不存在的外来字符，通常是感叹号。我检查了隐藏字符，没有。输入不是被复制和粘贴，而是直接输入。这是一个前后的例子。

输入：

```
<p>Katherine Kemler, LSU flute professor, will perform at 7:30 p.m. Feb. 1 in Wattenbarger Auditorium. The performance is free and open to the public.</p> 
```

输出： http: [//img42.com/LKEou](http://img42.com/LKEou) 您可以看到 2 月和 1 日之间以及瓦特之后的错误字符。我不认为是电子邮件客户端，因为我检查过的每个客户端都是一样的。

我在这里阅读了一些其他问题，这些问题促使我尝试使用 UTF-8 编码而不是 ISO-8859-1，在主体上使用 base64_encode()，将内容传输编码设置为 8 位，但没有这已经奏效了。我读过一些关于在 998 个字符后需要换行的内容，但是这些感叹号并没有以对我来说暗示的方式出现。在我上面的例子中，一个接一个地只跟随十个字符。这是我的脚本：

```
<?php

if(!isset($_GET["id"])) return "<span class=\"text-error\">No ID specified.</span>"; //this should never happen

$id = $_GET["id"];
$ok = false;
$students = //redacted
$facstaff = //redacted
$studentsBCC = //redacted
$facstaffBCC = //redacted
$subject = "Tech Times for ".date("m/d");
$headers = "From: \"Tennessee Tech University\" <techtimes@tntech.edu>\r\n".
    "Reply-to: no-reply@tntech.edu\r\n".
    "MIME-Version: 1.0\r\n".
    "Content-Transfer-Encoding: 8bit\r\n".
    "Content-type: text/html; charset=UTF-8\r\n".//iso-8859-1\r\n".
    "X-Mailer: PHP/".phpversion();

$resource = $modx->getObject("modResource", $id);
if(is_null($resource)) return "<span class=\"text-error\">Failed to get Resource $id</span>"; //this should never happen either

//get the template and insert the content
$body = $modx->getChunk("techtimes", array("copy"=>$resource->getContent(), "headerimg"=>$resource->getTVValue("headerImg")));

//check to see if this is a test run and if so reassign destination email address and empty BCCs
if(isset($_GET["email"])){
    $facstaff = $_GET["email"];
    $students = $_GET["email"];
    $studentsBCC = "";
    $facstaffBCC = "";
}

switch($id){
    case 50:    $ok = mail($facstaff,$subject,$body,$headers."\r\nBcc:".$facstaffBCC); break;
    case 51:    $ok = mail($students,$subject,$body,$headers."\r\nBcc:".$studentsBCC); break;
    default:    return "<span class=\"text-error\">Invalid or no ID specified for Tech Times.</span>"; //this, too, should never happen
}

if($ok){
    $output = "<span class=\"text-success\">Tech Times for <strong>".(($id == 50) ? "Fac/Staff" : "students")." ($id)</strong> has been sent to <strong>".(($id == 50) ? $facstaff : $students)."</strong></span>.";
}else{ //this could happen if something goes wrong with the mailer
    $error = error_get_last();
    var_dump($error);
    $output = "<span class=\"text-error\">Failed to send Tech Times!</span>";
}

return $output;
?> 
```

我正在使用 MODx Revolution 来格式化输出。我难住了。帮助？谢谢！

# design-patterns - 用于构建包含其他对象的对象的模式，这些对象包含其父对象

> ID：14405361
> 
> 赞同：1
> 
> 时间：2013-01-18T18:33:10.613
> 
> 标签：design-patterns

这个问题很难说清楚，但这里有：

我有一组具有以下关系的类：

[![图表](../Images/d26b41f51aa2ca78f28f436fe046c538.png)](https://i.stack.imgur.com/1a4rU.png)

当我尝试访问数据时，问题就出现了。我正在尝试尽可能有效地做到这一点。用户应该能够查找课程及其部分、教授及其部分、部分及其学生（暗示教授/学生关系）、部分及其教授（一个部分不超过一位教授）。此外，部分不关心他们属于哪些课程，但课程确实关心他们的部分。

例如，我应该可以说`professorA.listSections()`；或`professorA.listSections()`等等。

老实说，我不确定如何以有效的方式进行此操作（如果有的话）。任何设计模式或想法将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T18:43:22.370

看起来您已经绘制出了大部分内容，现在您所要做的就是在实体之间进行连接：

*   每个教授对象都应该有一个他教授的课程列表。
*   每个学生对象都应该有一个他学习的课程列表。

但是在学生案例中 - 他应该有一些“额外”的东西：因为每门课程都可以由不止一位教授教授，所以学生需要一种方法来“知道”哪个教授教授他所学的课程（另一个“额外”领域） .

我不确定我是否理解这些部分的内容 - 但可以以相同的方式完成。

# php - 如何在 Joomla 2.5 中运行 CodeIgniter 应用程序？

> ID：14405363
> 
> 赞同：-1
> 
> 时间：2013-01-18T18:33:11.277
> 
> 标签：php, codeigniter, joomla2.5

我们在 CodeIgniter 的单个安装中开发了一些应用程序，其中每个控制器都是不同的应用程序。

我们需要让它在加载某个 Joomla 2.5 文章时运行 CodeIgniter 应用程序，从中获取生成的 html，并将其显示在将加载该文章的 Joomla 2.5 站点上。

一些更有用的信息：这些应用程序包含表单，这些表单通过邮寄工作。

更新：我尝试`<iframe src="localhost/myapp/mycontroller/"></iframe>`在文章 html 编辑器中打开一个，但似乎不允许这样做。iframe 就消失了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-17T13:14:45.070

JED 中有大量插件。这里是一个例子： [http ://extensions.joomla.org/extensions/style-a-design/popups-a-iframes/16450?qh=YTo0OntpOjA7czo2OiJpZnJhbWUiO2k6MTtzOjc6ImlmcmFtZXMiO2k6MjtzOjc6ImlmcmFtZWQiO2k6MztzOjgt6ImtSm](http://extensions.joomla.org/extensions/style-a-design/popups-a-iframes/16450?qh=YTo0OntpOjA7czo2OiJpZnJhbWUiO2k6MTtzOjc6ImlmcmFtZXMiO2k6MjtzOjc6ImlmcmFtZWQiO2k6MztzOjg6ImlmcmFtZSdzIjt9)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T19:49:16.120

好的，所以我找到了解决方案。一点也不优雅也不方便，但它让我可以做我想做的事。

我在 Joomla 文章中使用了以下代码：

```
<h1>Hello</h1>
<iframe src="http://localhost/" name="myiframe" width="600px" height="400px"></iframe> 
```

但是，内置的 Joomla 编辑器不允许在文章中使用 iframe。它只是删除它们。为了解决这个问题，我使用 phpMyAdmin 浏览 Joomla 数据库。

我在 prefix_content 表中搜索了我想要的文章，并手动编辑了该文章的行，在其中输入了 html 代码。

生成的 iframe 现在可以保留 CodeIgniter 的所有功能，并且很好地隔离到 iframe 中。

就像我说的那样，这不是一个优雅的解决方案，因为我需要直接更改数据库，但可能有一个 Joomla 扩展允许使用 iframe。

# java - Eclipse 播放时 JAR 文件不播放声音

> ID：14405364
> 
> 赞同：3
> 
> 时间：2013-01-18T18:33:13.250
> 
> 标签：java, embedded-resource

我有一个想要导出为 jar 文件的项目。该软件应该在某个时间点播放声音。但是，问题在于 JAR 文件在到达该时间点时不播放声音文件。当我从 Eclipse IDE 运行同一个项目时，它确实如此。

这是显示我如何设置声音播放功能的代码：

```
public void setupSoundPlayback(){
        try{
            buzzer = AudioSystem.getClip();

            in = AudioSystem.getAudioInputStream(BatteryBeeper.class.
                    getResourceAsStream("/sound/boing_x.wav"));

            buzzer.open(in);
        }catch(Exception e){
            e.printStackTrace();
        }

    } 
```

后来，我调用了对象的`play()`方法。`Clip`虽然我使用该`getResourceAsStream()`方法播放嵌入的声音，但 JAR 不播放声音。

* * *

![在此处输入图像描述](../Images/1064122724ba0d3eccaa316922675783.png)

当我被告知要提取并查看声音文件是否在正确的位置时，我做到了。这是我得到的。声音文件夹位于根目录中。并且`boing3_x.wav`在声音文件夹中（不在图片中）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T18:53:01.537

由于您正在使用 call `getResourceAsStream("/sound/boing_x.wav");`，因此应确保 .wav 文件包含在 JAR 中的正确位置。

由于路径的开头有一个“/”，因此 .wav 文件需要位于*JAR*中您指定的路径中，使用绝对路径（即声音目录需要位于 JAR 的根目录中， boing_x.wav 需要位于声音目录中）。

我建议您将 JAR 文件解压缩到特定目录，并确保在解压缩 JAR 时看到`/sound/boing_x.wav`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T18:35:30.877

当资源（在您的情况下为 .wav 文件）未嵌入到构建的 .jar 文件中或嵌入到错误的位置时，就会发生这种情况。

另请注意，您正在尝试播放“/sound/ **boing_x.wav** ”，但您还提到在 jar 中，在 /sound 中您有**boing** *3* **_x.wav**，因此文件名的名称中有一个额外的***3***。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-09T14:03:57.667

这是我在 jar 中播放循环声音文件的功能，对我来说效果很好。

似乎`getResourceAsStream()`不适用于罐子。但是，`getResource()`确实如此。

```
public synchronized void alarm() {
    try {
        crit = AudioSystem.getClip();
        AudioInputStream inputStream1 = AudioSystem.getAudioInputStream(this.getClass().getResource("critical.wav"));
        crit.open(inputStream1);
        crit.loop(Clip.LOOP_CONTINUOUSLY);

    } catch (Exception e) {
        System.err.println(e.getMessage());
        }
} 
```

# java - Spring 3.1：从属性文件中提取字符串

> ID：14405369
> 
> 赞同：0
> 
> 时间：2013-01-18T18:33:31.510
> 
> 标签：java, spring, spring-mvc, properties

我正在使用/学习 Spring 3.1。我正在尝试从 *.properties 文件中提取字符串。谷歌周围我找不到一个完整的例子。我设法将所有这些拼凑在一起。它编译和乐趣，但我没有得到任何价值。关于我缺少什么的任何线索？

我的messages.properties 文件名为**messages.properties** ，位于**war/WEB-INF/classes**

```
test = From Messages Properties File 
```

我的应用程序上下文文件名为**acme-servlet.xml**

```
<beans xmlns="http://www.springframework.org/schema/beans"
  xmlns:context="http://www.springframework.org/schema/context"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xmlns:mvc="http://www.springframework.org/schema/mvc"
  xmlns:util="http://www.springframework.org/schema/util"
  xsi:schemaLocation="http://www.springframework.org/schema/mvc
        http://www.springframework.org/schema/mvc/spring-mvc-3.1.xsd
        http://www.springframework.org/schema/beans     
        http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
        http://www.springframework.org/schema/context 
        http://www.springframework.org/schema/context/spring-context-3.1.xsd
        http://www.springframework.org/schema/util
        http://www.springframework.org/schema/util/spring-util-3.1.xsd">

  <context:component-scan base-package="gov.noaa.acme.controller" />

  <mvc:resources mapping = "/**" location = "/,file:/apps1/bea/user_projects/domains/SDB/common/"/>
  <mvc:annotation-driven/>

  <!-- define the properties file to use -->
  <util:properties id = "messages" location="classpath:/messages.properties" />

  <bean
    class="org.springframework.web.servlet.view.InternalResourceViewResolver">
    <property name = "prefix" value = "/jsp/"/>
    <property name = "suffix" value = ".jsp"/>
  </bean>

  <bean name="af" class="gov.noaa.acme.controller.security.AuthenticationFilter"/>

  <!-- Configure the multipart resolver -->
  <bean id="multipartResolver" class="org.springframework.web.multipart.commons.CommonsMultipartResolver">
    <!-- one of the properties available; the maximum file size in bytes -->
    <property name="maxUploadSize" value="100000000"/>
  </bean>

</beans> 
```

**我的控制器类**（简化）

```
package com.acme.controller;

import java.security.Principal;
import javax.servlet.http.*;

import org.springframework.beans.factory.annotation.Value;
import org.springframework.stereotype.Controller;
import org.springframework.validation.*;
import org.springframework.ui.ModelMap;
import org.springframework.web.servlet.ModelAndView;
import org.springframework.web.bind.annotation.RequestParam;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestMethod;
import org.springframework.web.bind.annotation.ModelAttribute;
import org.springframework.web.bind.annotation.SessionAttributes;

import org.apache.log4j.Logger;

@Controller
public class LoginController {

    @Value("#{messages['messages.test']}") private String test;
    private static final Logger logger  = Logger.getLogger(LoginController.class);

    @RequestMapping({"/","home"})
    public String home(ModelMap model,HttpSession session,HttpServletRequest request) {

        model.put("test",test);
        return "login";
    }

}// end class LoginController 
```

**我的 log.jsp 文件：（**简化）

```
<%@ page language = "java" session = "true" import = "java.util.*, java.text.*" %>
<%@ taglib prefix = "c" uri = "http://java.sun.com/jsp/jstl/core"%>
<%@ taglib prefix = "f" uri="http://www.springframework.org/tags/form"%>

test: ${test} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T19:00:01.867

你应该使用：

```
@Value("#{messages['test']}") 
```

代替 ：

```
@Value("#{messages['messages.test']}") 
```

如果您只有一个属性文件，您还可以使用：

```
@Value("#{test}") 
```

# dynamics-crm-2011 - 如何设置添加到现有实体的字段的默认值？

> ID：14405371
> 
> 赞同：1
> 
> 时间：2013-01-18T18:33:38.707
> 
> 标签：dynamics-crm-2011, dynamics-crm

我正在向实体及其表单添加 4 个新复选框。已经在生产中创建了该实体的实例。我需要将这些复选框默认为选中这些现有实体实例。我设置了该字段的默认值，但显然这仅在创建实体的新实例时使用。有没有一种简单的方法可以在所有现有实例上设置这些？

我可以使用一次性工作流，但我不知道该实体有多少个实例，并且由于审核要求，我无法访问生产环境。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T18:46:08.043

您可以在表单加载时创建执行一些 JavaScript。当然，这不会更新数据库中的所有值，但它会在用户能够查看之前更新它。您需要默认数据库中的所有值，还是 java 脚本可以工作？

## 编辑

您最好的选择是更新倍数（您可以将高级查找返回的记录数增加到每页 250 条记录）并继续手动更新所有记录，或者执行批量更新。请参阅[这个相关的 SO 问题](https://stackoverflow.com/questions/8531185/dynamics-crm-2011-bulk-update)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-03T11:38:21.020

您可以通过导出记录并更改字段的值然后重新导入来执行此操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T22:15:30.747

还有另一种方法。您可以编写一个连接到您的服务器的控制台应用程序（如果您以前做过并且不必使其通用，那就不难了）。然后，您只需对服务执行更新，获取所有现有实体并在进行更改后更新它们。

正如@Daryl 所说，可能也有一种方法可以从 GUI 中做到这一点，但真正的程序员很难做到这一点。:)

我当然是在开玩笑。我就是喜欢打码，呵呵。更何况——一旦你开始编码，你就可以完全自由地以**任何你需要的方式影响数据，永远**。

# shell - 在两个 Zsh 会话之间同步当前目录

> ID：14405372
> 
> 赞同：1
> 
> 时间：2013-01-18T18:33:40.097
> 
> 标签：shell, unix, zsh

我有两个运行 zsh 的 iTerm 窗口：一个用于 vim 中的文档；另一个我用来执行shell命令。我想同步两个会话的当前工作目录。`~/.cwd`我想我可以通过每次更改目录时将新目录输出到文件来做到这一点

```
alias cd="cd; pwd > ~/.cwd" 
```

并创建一个 shell 脚本`~/.dirsync`来监控`~/.cwd`每秒的内容，如果另一个 shell 更新了目录，则更改目录。

```
#!/bin/sh
echo $(pwd) > ~/.cwd
alias cd="cd; echo $(pwd) > ~/.cwd"
while true
do
  if [[ $(pwd) != $(cat ~/.cwd) ]]
  then
    cd $(cat ~/.cwd)
  fi
  sleep 1
done 
```

然后，我会将以下代码行附加到`~/.zshrc`.

```
~/.dirsync & 
```

但是，它没有用。然后我发现shell脚本总是在它自己的子shell中执行。有谁知道使这项工作的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T18:38:14.160

**警告购买者：**我在 Ubuntu 10.04 上使用 gnome-terminal 执行此操作，但它应该可以在任何运行`zsh`.

我也稍微改变了一下。我没有混合使用“pwd”和“cwd”，而是到处使用“pwd”。

## 记录当前工作目录

如果您想每次都运行一个函数`cd`，首选的方法是使用该[`chpwd`函数或更可扩展的`chpwd_functions`数组](http://www.refining-linux.org/archives/42/ZSH-Gem-8-Hook-function-chpwd/)。我更喜欢`chpwd_functions`，因为您可以从中动态附加和删除函数。

```
# Records $PWD to file 
function +record_pwd {
    echo "$(pwd)" > ~/.pwd
}

# Removes the PWD record file
function +clean_up_pwd_record {
    rm -f ~/.pwd
}

# Adds +record_pwd to the list of functions executed when "cd" is called
# and records the present directory
function start_recording_pwd {
    if [[ -z $chpwd_functions[(r)+record_pwd] ]]; then
        chpwd_functions=(${chpwd_functions[@]} "+record_pwd")
    fi
    +record_pwd
}

# Removes +record_pwd from the list of functions executed when "cd" is called
# and cleans up the record file
function stop_recording_pwd {
    if [[ -n $chpwd_functions[(r)+record_pwd] ]]; then
        chpwd_functions=("${(@)chpwd_functions:#+record_pwd}")
        +clean_up_pwd_record
    fi
} 
```

`+`在`+record_pwd`and函数名称中添加 a`+clean_up_pwd_record`是一种将其从正常使用中隐藏起来的黑客方式（类似地，VCS_info 挂钩通过在所有内容前加上前缀来做到这一点`+vi`）。

使用上述方法，您只需`start_recording_pwd`在每次更改目录时调用即可开始记录当前工作目录。同样，您可以调用`stop_recording_pwd`以禁用该行为。`stop_recording_pwd`还会删除`~/.pwd`文件（只是为了保持清洁）。

通过这种方式，可以很容易地选择加入同步（因为您可能不希望您运行的每个 zsh 会话都这样做）。

## 第一次尝试：使用`preexec`钩子

与@Celada 的建议类似，`preexec`钩子在执行命令之前运行。这似乎是获得所需功能的一种简单方法：

```
autoload -Uz  add-zsh-hook

function my_preexec_hook {
    if [[-r ~/.pwd ]] && [[ $(pwd) != $(cat ~/.pwd) ]]; then
        cd "$(cat ~/.pwd)"
    fi
}
add-zsh-hook preexec my_preexec_hook 
```

这工作......有点。由于`preexec`钩子在每个命令之前运行，它会在运行下一个命令之前自动更改目录。然而，在那之前，提示停留在最后一个工作目录中，所以它为最后一个目录完成制表符，等等。（顺便说一句，空行不算作命令。）所以，它有点工作，但这并不直观。

## 第二次尝试：使用信号和陷阱

为了让终端自动`cd`重新打印提示，事情变得更加复杂。

经过一番搜索，我发现`$$`（shell的进程ID）在子shell中没有变化。因此，子外壳（或后台作业）可以轻松地向其父外壳发送信号。[将此与 zsh 允许您捕获信号](http://zsh.sourceforge.net/Doc/Release/Functions.html#Trap-Functions)这一事实相结合，并且您可以`~/.pwd`定期轮询：

```
# Used to make sure USR1 signals are not taken as synchronization signals
# unless the terminal has been told to do so
local _FOLLOWING_PWD

# Traps all USR1 signals
TRAPUSR1() {
    # If following the .pwd file and we need to change
    if (($+_FOLLOWING_PWD)) && [[ -r ~/.pwd ]] && [[ "$(pwd)" != "$(cat ~/.pwd)" ]]; then
        # Change directories and redisplay the prompt
        # (Still don't fully understand this magic combination of commands)
        [[ -o zle ]] && zle -R && cd "$(cat ~/.pwd)" && precmd && zle reset-prompt 2>/dev/null
    fi
}

# Sends the shell a USR1 signal every second
function +check_recorded_pwd_loop {
    while true; do
        kill -s USR1 "$$" 2>/dev/null
        sleep 1
    done
}

# PID of the disowned +check_recorded_pwd_loop job
local _POLLING_LOOP_PID

function start_following_recorded_pwd {
    _FOLLOWING_PWD=1
    [[ -n "$_POLLING_LOOP_PID" ]] && return

    # Launch signalling loop as a disowned process
    +check_recorded_pwd_loop &!
    # Record the signalling loop's PID
    _POLLING_LOOP_PID="$!"
}

function stop_following_recorded_pwd {
    unset _FOLLOWING_PWD
    [[ -z "$_POLLING_LOOP_PID" ]] && return

    # Kill the background loop
    kill "$_POLLING_LOOP_PID" 2>/dev/null
    unset _POLLING_LOOP_PID
} 
```

如果您调用`start_following_recorded_pwd`，这将`+check_recorded_pwd_loop`作为不承认的后台进程启动。这样，当您关闭 shell 时，您就不会收到烦人的“暂停作业”警告。循环的 PID 被记录（通过`$!`），因此可以稍后停止。

循环只是`USR1`每秒向父 shell 发送一个信号。此信号被 捕获，如有必要`TRAPUSR1()`，它将重新打印提示。`cd`我不明白必须同时调用`zle -R`and `zle reset-prompt`，但这是对我有用的神奇组合。

还有`_FOLLOWING_PWD`国旗。由于每个终端都`TRAPUSR1`定义了函数，因此除非您实际指定了该行为，否则这会阻止它们处理该信号（和更改目录）。

与记录当前工作目录一样，您可以调用`stop_following_posted_pwd`来停止整个自动操作`cd`。

将两半放在一起：

```
function begin_synchronize {
    start_recording_pwd
    start_following_recorded_pwd
}

function end_synchronize {
    stop_recording_pwd
    stop_following_recorded_pwd
} 
```

最后，您可能想要这样做：

```
trap 'end_synchronize' EXIT 
```

这将在您的终端退出之前自动清理所有内容，从而防止您意外留下孤立的信号循环。

# html - CSS 空白：nowrap

> ID：14405374
> 
> 赞同：1
> 
> 时间：2013-01-18T18:33:52.807
> 
> 标签：html, css

问题`vertical-align: top`没有解决

**CSS**

```
ul { 
     width: 160px;
    display: block;
    white-space: nowrap;
     overflow: auto; 
    vertical-align: top;
     }
li { 
     width: 80px;
     display: inline-block;
     } 
```

**HTML**

```
<div>
   <ul>
       <li>one</li><li>two</li><li>three</li><li>four<br />Test</li>
   </ul>
 </div> 
```

我需要像四个一样在顶部制作一，二，三。请帮忙

这里的例子[http://jsfiddle.net/Y7PhV/](http://jsfiddle.net/Y7PhV/)

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T18:39:18.920

垂直对齐您的 LI 而不是 UL

```
li {vertical-align:top;} 
```

[http://jsfiddle.net/Y7PhV/88/](http://jsfiddle.net/Y7PhV/88/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T18:40:00.817

这个css应该可以工作......

`ul {
width: 80px;
display: block;
/*white-space: nowrap;*/
/*overflow: auto;*/
}
li {
background: papayaWhip;
height: 40px;
width: 80px;
display: inline-block;
}`

# java - 关于数据提供者

> ID：14405376
> 
> 赞同：0
> 
> 时间：2013-01-18T18:33:55.403
> 
> 标签：java, testng

我创建了两个类。`first.java`和`second.java`。在`first.java`中，我定义了一些 2 到 3 个方法。在中`second.java`，我想通过创建实例来使用这些方法`first.java`。我的场景如下：

1.  在第一种方法中单击signbutton
2.  使用 dataprovider 想要迭代，即在第二种方法中参数化
3.  注销第三种方法。

在这里，第一种和第三种方法，即 @Test 应该运行一次，第二种方法 @Test(dataProvider) 应该迭代所有依赖

有没有办法在全局范围内声明或创建另一个类的实例？这样我就可以在所有方法中使用`second.java`还是有其他方法？

我正在使用`TestNG`,`Ecplise`和`Webdriver`执行。

这就是正在做的事情：

```
@Test(dataProvider = "DP1")
  public void enteruserdetails(String username, String pass)
  {
           Spage spage = new Spage(driver);
           spage.clicksign();
           spage.enterdetails(username,pass);
           spage.signout(); 
  } 
```

我想将此测试分为三个，以便：

```
1) spage.clicksign() will be done only once  
2) spage.enterdetails(username,pass) will use DataProvider for iteration
3)  spage.signout() will be done only once. 
```

那么如何创建类的实例`Spage spage = new Spage(driver)`；我必须在所有地方都这样做，`@Before, @After and also in @Test`或者有没有办法在全球范围内声明它？这里`spage.java`用于`sfirst.java`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T07:08:39.673

您可以考虑将您的设置方法放在 BeforeXXX 方法中，将拆卸放在 AfterXXX 方法中。在您的情况下，您可以在使用 beforeclass 注释的方法中登录，类似地在使用 afterclass 注释的方法中注销。

```
@BeforeClass
public void signin(){
//clicksign
}

@Test
//the enter details and verifications

@AfterClass
public void signOut(){
//clicksignout
} 
```

# git - 赶上主分支的强大工作流程？

> ID：14405379
> 
> 赞同：2
> 
> 时间：2013-01-18T18:34:06.190
> 
> 标签：git

假设我正在开发一个重要的功能分支，该分支遵循一个具有相当多活动的项目的“主”分支。这通常使我处于一种情况，为了保持理智，我必须稍微落后于“头脑”，以便弄清楚如何使某些事情发挥作用。

这通常会导致我的分支在 master 分支后面有几千次提交 - 伴随着所有有趣的事情，例如相关模块被重构或类似。一旦我决定开始“追赶”，这给我留下了一个棘手的任务：单片合并是不可能的，因为：

1.  几乎不可能同时考虑所有“我的”更改乘以所有“主”更改。我尝试了几次，我犯了很多错误，最终不得不退出。

2.  由此产生的合并将是如此巨大，以至于隐藏在其中的所有魔法都将是一场文档噩梦。

因此，我最终采用的方法是进行“分阶段”合并：不是直接与 master 合并，而是选择性地与 master 历史中的“有趣”点合并。这通常是关于可能有“棘手”冲突的模块的提交。这样做的最大好处是我有实际可构建的中间点，我可以推理和测试，因此使整个过程更易于管理。

然而，这种方法似乎有缺点......也就是说，如果合并中出现错误，我稍后才会注意到。我尝试使用`git rebase -i -p`以将修复压缩到历史中，但发现这似乎不是人们所设想的那种用法。再具体一点

*   在合并之间插入更改似乎会导致变基过程因或多或少复杂的冲突而摆脱困境，并且

*   将常规提交压缩为合并提交似乎会使新提交成为非合并，失去对合并提交的引用

现在我正在使用一些或多或少花哨的 shell 脚本来解决所有这些问题，但我很想知道我是否错过了一些可以帮助我处理这种情况的 Git 功能。到目前为止，我能想到的最好的想法是使用 rerere 手动重做所有合并。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-23T02:31:38.833

以更简单的方式，您不会`git merge`（或`git cherry-pick`）从 master 到您的功能分支进行任何更改。你总是`git rebase`在你的特性分支之后移动你的更改。

如果你经常保持 git rebase 并保持 git rebase 小，生活会更容易。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T19:06:26.957

我发现将主题分支重新定位到 master 被证明是一个更容易/更易于管理的过程。

所以代替这个

```
A--B--C--D--E--F--M
       \         /
        X--Y--Z- 
```

做这个

```
 A--B--C--D--E--F
                 \
                  X'--Y'--Z' 
```

[**参考**](http://github.com/dchelimsky/rspec/wiki/Topic-Branches)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T19:18:33.213

`git rebase`如果操作得当，这是一个很棒的功能。

我不确定您是否尝试过您的情况，但我会做以下事情。

结帐主分支确保其与原点保持同步。签出您的功能分支 `git rebase master`

如果有任何冲突允许您随时解决冲突，并且如果您遇到任何奇怪的事情，您总是可以做，它几乎会指导您`git rebase --abort`

假设你确实遇到了问题，你修复了文件然后做`git add <some file>`，`git rebase --continue`rebase 将继续做它的工作。

请确保如果您的功能分支已被推送到远程并由其他人处理，则不要使用 rebase。

# c# - 如何在单个 Combobox 中分配 Datacontext 和静态值

> ID：14405384
> 
> 赞同：2
> 
> 时间：2013-01-18T18:34:39.877
> 
> 标签：c#, wpf

我想`datacontext`在单个`Combobox`. 我试过这样

```
this.courseList.DataContext = ldc.Courses.OrderBy(x => x.CourseID);
this.courseList.Items.Add("All");
this.courseList.Items.Add("Others"); 
```

但是，这`InvalidOperationException was Unhandeled`表明`Items collection must be empty before using ItemsSource.`

然后我就这样试了

```
this.courseList.Items.Add("All");       
foreach (var items in ldc.Courses.OrderBy(x => x.CourseID))
 {
   this.courseList.Items.Add(items);
 }
this.courseList.Items.Add("Others"); 
```

它像这张图片一样工作 ![在此处输入图像描述](../Images/5b8e99cd8bd3d92ebdf3811793008924.png) 因为我在 XAML 设计中为此使用了 ItemTemplate，`Combobox`所以它并没有完全按照我的方式显示这两个值`All`和`Others`.

这里是`ItemTemplate`

```
 <DataTemplate x:Key="CourseTemplate">
        <StackPanel Orientation="Horizontal">
            <TextBlock Text="{Binding Path=CourseID}"/>
            <TextBlock Text=" : "/>
            <TextBlock Text="{Binding Path=CourseName}"/>
        </StackPanel>
    </DataTemplate>

...
 <ComboBox Name="courseList" VerticalAlignment="Top" SelectionChanged="courseList_SelectionChanged" IsSynchronizedWithCurrentItem="True" ItemsSource="{Binding}" ItemTemplate="{StaticResource CourseTemplate}"/> 
```

我希望它根据 DataTemplate 查看数据库条目和简单字符串，以及`All`分别`Others`如下图所示。 `All``Others`![在此处输入图像描述](../Images/a5f81df4dcd36d059c01588877301a2a.png)

有什么建议么。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T18:55:07.027

正如错误所说，您只能直接使用 ItemsSource 或 Items，而不是两者的混合。由于您本质上有两种不同类型的数据要以不同方式显示，您可以将它们全部添加到单个绑定集合中，然后让模板完成以不同方式呈现它们的工作。第 1 步是构建单个集合：

```
this.courseList.ItemsSource = new object[] { "All" }.Concat(ldc.Courses.OrderBy(x => x.CourseID)).Concat(new[] { "Others" }); 
```

您现在在集合中有 2 种类型的数据：字符串和您的对象，我假设它是 Course。字符串将根据需要显示，无需任何额外工作，但您只需将 DataTemplate 应用于 Course 对象。最简单的方法就是将您的 x:Key 替换为 DataType：

```
<DataTemplate DataType="{x:Type data:Course}">
    <StackPanel Orientation="Horizontal">
        <TextBlock Text="{Binding Path=CourseID}"/>
        <TextBlock Text=" : "/>
        <TextBlock Text="{Binding Path=CourseName}"/>
    </StackPanel>
</DataTemplate> 
```

其中数据 xmlns 对应于 Course 对象的命名空间。

接下来只需从您的 ComboBox 中删除 ItemTemplate 属性，您应该会得到您要查找的内容。

如果您在同一范围内有其他地方也绑定了 Course 对象，但希望它们以不同方式显示，您可以将 DataType 模板的范围更本地化（即 Grid.Resources）或在 ComboBox 上使用 DataTemplateSelector。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T18:48:42.657

由于`ldc.Courses`设置为`DataContext`, 并且您拥有`ItemsSource="{Binding}"`这意味着组合框直接绑定到您的集合。当您尝试像以前那样添加字符串时，这会产生一个问题，因为现在该集合既有字符串又有 Course 对象。

我认为这可能是最容易理解的解决方案。从您的第二种方法开始：

```
this.courseList.Items.Add("All");       
foreach (var items in ldc.Courses.OrderBy(x => x.CourseID))
 {
   this.courseList.Items.Add(items.CourseID.ToString() + " : " + items.CourseName);
 }
this.courseList.Items.Add("Others"); 
```

这将使您的组合框绑定到一个简单的字符串列表而不是对象，因此只要您在后台不需要其他信息，这将更容易消化，如果不尝试混合字符串和对象的其他答案之一进入同一个集合。这也意味着您不需要设置`DataContext`、`ItemsSource`或`DataTemplate`，因此请删除所有这些。

如果您想保留模板以添加更多控制，您可能需要再次查看其他一些答案。另一种选择是在您的课程对象上创建一个父类，该类也可以采用更一般的`ALL`和`OTHER`案例，并在它们周围创建实际对象，这可能是最灵活的。这样您就不会以字符串和对象的集合结束，这将导致您在任何时候操作集合时都必须创建特殊的代码案例。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-18T18:51:37.923

您可以通过结合使用 ItemTemplate 和转换器来解决此问题。

模板：

```
<ComboBox.ItemTemplate>
    <DataTemplate>
        <TextBlock Text="{Binding Converter={StaticResource ComboBoxItemConverter}}" /> 
    </DataTemplate>
</ComboBox.ItemTemplate> 
```

转换器：

```
public class ComboBoxItemConverter : IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        if (value is Courses)
        {
            var course = value as Courses;
            return course.CourseID + " : " + course.CourseName;
        }
        else
        {
            return value.ToString();
        }
    }

    public object ConvertBack(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        throw new NotImplementedException();
    }
} 
```

# mysql - 将对root MySQL帐户的访问限制为root UNIX帐户？

> ID：14405387
> 
> 赞同：0
> 
> 时间：2013-01-18T18:34:54.270
> 
> 标签：mysql

我想知道是否可以将对 MySQL 根帐户的访问限制为 UNIX 根帐户。我想这个问题可以推广到非根案例，所以你的数据库专家可以随意扩展！

谢谢和欢呼

# windows - 使用缓存的 Windows 凭据访问网站

> ID：14405390
> 
> 赞同：0
> 
> 时间：2013-01-18T18:35:06.050
> 
> 标签：windows, active-directory, authorization, credentials

我在一家公司工作，该公司使用 Intranet 站点作为通往许多其他本地站点的门户。公司中未经授权的人员一直在访问它，因此我们希望保护它。用户第一次访问网站时必须输入用户名和密码。如果他们在 Active Directory 中的某个组中，他们将被授予访问权限并存储他们的凭据，这样他们就不需要再次输入他们的用户名/密码。我研究过 NTML、ASP.NET，但不知道如何继续。

非常感谢任何想法/想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T22:18:26.863

转储您的解决方案。在 IIS 中使用集成 Windows 身份验证，即 Kerberos。它会自动将所有凭据传递给您的服务器。请注意，每个参与者都*必须*是您的 AD 域的一部分。

# html - 更改 Bootstrap 下拉项的文本颜色

> ID：14405398
> 
> 赞同：6
> 
> 时间：2013-01-18T18:35:31.873
> 
> 标签：html, css, twitter-bootstrap

我正在尝试更改下拉菜单元素的颜色。下拉列表由以下 HTML 组成：

```
<div class="btn-group">
    <a class="btn">Confirm</a>
    <a href="#" id="drop_thought" role="button" class="dropdown-toggle btn white-text" data-toggle="dropdown">v</a>
    <ul class="dropdown-menu white-text" id="tools_drop" role="menu" aria- labelledby="drop_thought">
        <li><a class="btn btn-success white-text">Okay</a></li>
        <li><a class="btn btn-warning">Unload</a></li>
        <li><a class="btn btn-danger">Quarantine</a></li>
        <li class="divider"></li>
        <li><a class="btn btn-primary">Permanent</a></li>
    </ul>
</div> 
```

为了便于阅读，我删除了 ID。

我做了一个如下的 CSS 类：

```
.white-text {
    color: #FFFFFF; !important
} 
```

我以为`!important`会自动将 Okay 变成白色，但它仍然是黑色的。我在 Chrome 的开发者控制台下查看了封闭的`<li><a>...</a></li>`元素，`white-text`它似乎`.dropdown-menu a`是它继承的类。出于某种原因， my`white-text`被忽略并被删除。

使用以下 CSS，我能够将文本颜色更改为白色，但我在另一个地方使用下拉菜单，所以我不能使用它：

```
.dropdown-menu a{
    color: #FFFFFF; !important
} 
```

这是根据 Chrome 的继承链：

```
.dropdown-menu li > a:hover, .dropdown-menu li > a:focus, .dropdown-submenu:hover > a - #ffffff
.btn-success:hover, .btn-success:active, .btn-success.active, .btn-success.disabled, .btn-success[disabled] - #ffffff
.btn:hover - #333333
.btn:hover, .btn:active, .btn.active, .btn.disabled, .btn[disabled] - #333333 .dropdown-menu a - #333333
a:hover - #005580
.white-text - #FFFFFF
.btn-success - #ffffff
.btn - #333333
a - #0088cc
.white-text - #FFFFFF
body - #333333 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-18T18:42:47.707

分号在!important 之后，否则它不会包含在该属性中（CSS 不处理空格/返回）。

正确使用：

```
.dropdown-menu a{
    color: #FFFFFF !important;
} 
```

[http://css-tricks.com/when-using-important-is-the-right-choice/](http://css-tricks.com/when-using-important-is-the-right-choice/)

# python - 将 Python 2.4 升级到 2.6 或 3.0

> ID：14405401
> 
> 赞同：0
> 
> 时间：2013-01-18T18:35:55.647
> 
> 标签：python, python-3.x, python-2.7

我在 Redhat Linux 5 上运行 Python 2.4。

知道如何升级到 Python 2.6 或 3.0 吗？

在此先感谢，总和

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2018-04-05T06:51:19.347

1.  看之前升级版本是2.x

    ```
    python --version
    Python 2.7.5 
    ```

2.  使用以下命令将您的 python 升级到 3.x 版本-

    **百胜安装python3x**

    将**x**替换为您想要的版本号。

    即用于安装 python 3.6 执行

    ```
    yum install python36 
    ```

3.  之后，如果您想将此 python 设置为默认版本，则在**bashrc**文件中添加

    vi ~/.bashrc

    ```
    alias python='python3.6' 
    ```

4.  执行 bash 命令以应用设置

    ```
    bash 
    ```

5.  现在你可以看到下面的版本

    ```
    python --version
    Python 3.6.3 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T18:37:35.460

与 Linux 上的所有软件一样，第一个调用端口应该是包管理器，大多数时候使用它会给您带来相对轻松的体验。

在 Red Hat 的情况下，即`yum`，所以你可能想要类似的东西：

```
yum update python 
```

如果手头没有软件的包，那么您可以下载源代码并构建它，但请注意，这通常是一条更难的路线 - 首先它需要更多的工作，其次包维护人员会小心确保软件正常运行在发行版上，因此它们更有可能运行良好并与系统的其余部分进行良好的交互。

值得注意的是，您可以并排安装 2.x 和 3.x，并且大多数发行版将它们单独打包。因此，要获得 3.x，您可能需要执行以下操作：

```
yum install python3 
```

（注意我不使用 Red Hat，所以我不确定这是正确的包名称）。

最后一点 - 2.4、2.6 和 3.0 都是过时的版本。你真的想要 Python 2.7.2（最新的 2.x 版本）或 Python 3.3（最新的 3.x 版本）。

# c# - 无法创建未知类型的 clr 命名空间：仅在一个“TFS 构建代理”上

> ID：14405405
> 
> 赞同：1
> 
> 时间：2013-01-18T18:36:08.967
> 
> 标签：c#, visual-studio-2010, tfs, visual-studio-2012

我们的一台 TFS Build 服务器发生了一些奇怪的事情

这是场景：

我有一个控制器和两个构建服务器，每个服务器有两个代理

*   如果我将任何构建排入队列，强制它在我的构建服务器 01 上运行，构建成功

*   如果我在我的构建服务器 02 上排队相同的构建，构建失败

错误如下：

> 无法创建未知类型“{clr-namespace:MyNamespace;assembly=MyAssembly}MyClassName”。

这是一个自定义的 MSBuild 程序集，它以 .Net Framework 4.5 为目标，在 TFS 控制版本上签入，控制器指向 TFS 上的正确路径。

DLL 在 6 个月内没有更新

我不明白为什么会这样。更令人不安的是，这个构建服务器昨天工作正常，团队中的任何人都对服务器做了任何事情，他们甚至没有访问权限。

我认为错误是在执行构建工作流之前发生的，**这意味着由于某种原因无法加载构建模板**，这是有道理的，因为无法解析类型

到目前为止我所做的事情：

*   昨天早上构建服务器02运行顺利

*   我确定我在两个构建服务器上使用相同的构建运行它。这让我认为构建模板没有问题

*   我确定我的构建服务器 02 上的任何构建都会失败并出现相同的错误

*   我测试过的所有构建都在 01 上运行，没有问题

*   两个构建服务器都在网络上启用、可用和可访问

*   两个构建服务器都配置了用于运行构建的域帐户

*   两台服务器都可以访问工作文件夹，并且 TFS 用户可以访问这些服务器

*   域帐户属于两个构建服务器上的管理员组

*   我仔细检查了，这些程序集不在两个构建服务器上的 GAC 中（我不想将它们放在 GAC 上，而且我的构建服务器 01 可以正常工作，而无需将 DLL 放在 GAC 上）

*   我比较了 Windows 更新历史，两台服务器都在 3 个月前的同一日期更新

这是我发现的

**在我的构建服务器 01**上，我发现用于构建的自定义构建 DLL 位于正确的位置：

```
C:\Users\MyTFSServiceAccount\AppData\Local\Temp\BuildAgent\24\Assemblies

C:\Users\MyTFSServiceAccount\AppData\Local\Temp\BuildAgent\25\Assemblies 
```

以前的路径具有所需的所有程序集

**在我的构建服务器 02**上，该文件夹仅包含一个 DLL，由于某些原因，没有复制 DLL，我检查了文件夹权限，一切看起来都很好，tfsservice 帐户对文件夹具有权限，并且它是盒子上的管理员

这些是我的构建服务器 02 上的路径

```
C:\Users\MyTFSServiceAccount\AppData\Local\Temp\BuildAgent\22\Assemblies

C:\Users\MyTFSServiceAccount\AppData\Local\Temp\BuildAgent\23\Assemblies 
```

好吧，我认为手动复制 DLL 可以暂时解决问题....我错了 =( 我复制了 DLL 但我收到了同样的错误

你们能指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T20:16:54.293

贾亚

这就是我讨厌 TFS 的原因，这就是我喜欢成为一名软件工程师的原因

在这个问题上花了几乎一整天并验证了我脑海中闪过的所有东西之后，最后，似乎最简单的方法总是有效的......

我刚刚重新启动了 TFS 服务，神奇地一切又开始工作了......

# ruby - 如何使用 Ruby 将文档附加到 Excel 列？

> ID：14405412
> 
> 赞同：1
> 
> 时间：2013-01-18T18:36:26.393
> 
> 标签：ruby, ruby-1.9.3

我有如下要求：

我有 100 个文件夹 - 即`74555Attachment`，`55874Attachment`像这样。现在每个文件夹最多包含 5-6 个文件（.pdf、.csv 等）。现在我想将它们附加到文件夹中的 excel 到 excel 列中。

```
TicketNumber               file1           file2

 74555                    abc.pdf          tt.csv
 55874                     ab.pdf          tt.docx 
```

可以使用 Ruby 完成吗？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T13:46:25.423

您可以使用 ruby​​ 文件操作轻松完成此操作

或像“电子表格”、“CSV”这样的宝石来处理 excel 文件。您需要使用正则表达式将数字与文件名分开。

# python - 定义 __init__ 辅助方法的 Pythonic 方法？

> ID：14405414
> 
> 赞同：1
> 
> 时间：2013-01-18T18:36:29.523
> 
> 标签：python, oop, class, coding-style

请原谅，我是 Python 新手，正在尝试学习 Pythonic 方法。我正在设计一个基本上从许多不同来源（文件）初始化其状态的类。我已将此行为隔离到单个实例方法中，`_load_from_file(file)`. 它在 中被多次调用`__init__`，但我通常喜欢将我的构造函数放在类定义的开头，并将我的内部帮助方法放在最后。

但是，如果我要采用这种方法，则在我想使用它的地方`_load_from_file`没有定义。`__init__`你们pythonistas如何解决这种情况？

详细说明：

```
class Thing(object):
    def __init__(self, file_path):
        f = open('file_path')
        _load_from_file(self,"someData",f) # ISSUES!
        _load_from_file(self,"moreData",f) # WRONG!
        f.close()

    # Interface
    #     ...

    # Internal - Where do you guys put this stuff?
    def _load_from_file(self,thingToLoad,file):
        # logic 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-18T18:38:43.230

你确定它不会按照你已经使用的顺序工作吗？请记住，您没有使用 C。被调用的方法不必在调用代码之前出现在类定义中，只要它在被调用时已经定义。

但是，我会改变这一点：

```
_load_from_file(self) 
```

对此：

```
self._load_from_file() 
```

您遇到的任何 name-not-defined 错误不是因为您的方法调用位于比方法定义更早的文件位置，而是因为您尝试像全局函数一样调用它，而不是通过定义方法的对象来调用它。

# html - 如何在只有一个属性的表单中更改多个按钮的边框颜色？

> ID：14405416
> 
> 赞同：1
> 
> 时间：2013-01-18T18:36:31.260
> 
> 标签：html, css

我想知道如何在只有一个属性的表单中更改多个按钮的边框颜色，我的意思是这样的：

代替：

```
<form name="form">
    <input type="button" name="button1" value="1" style="border-color: red">
    <input type="button" name="button2" value="2" style="border-color: red">
    <input type="button" name="button3" value="3" style="border-color: red">
</form> 
```

我想要类似的东西：

```
<form name="form" style="border-color: red">
    <input type="button" name="button1" value="1">
    <input type="button" name="button2" value="2">
    <input type="button" name="button3" value="3">
</form> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-18T18:45:42.817

一种方法是使用 CSS 选择器

```
form input[type=button]
{
    border-color: red;
} 
```

您也可以使用 ID：

```
#myForm input[type=button]
{
    border-color: red;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T18:38:18.537

HTML：

```
<form class=red> ... 
```

CSS：

```
form.red input[type=button] {
   border-color:red;
} 
```

# ios - 使用 iOS 一次获取多个网页的大小

> ID：14405417
> 
> 赞同：0
> 
> 时间：2013-01-18T18:36:44.937
> 
> 标签：ios

我想创建一个应用程序来检查某些网站是否可用并直接访问它们。

我已经做了一个主/详细应用程序。在主视图中，我有我想要检查的所有网站的列表，如果我点击一个，我将被发送到`Web View`该站点上的详细视图。

它工作得很好。

但我想在表格视图的每一行上显示网站主页的大小。

我已经尝试并设法使用 and`NSURLConnection`方法获取网页的大小。`didReceiveData``didFinishLoading`

但是我怎么能同时启动几个`NSURLConnection`来抓取所有尺寸呢？或者也许 NSURLRequest 有更简单的方法？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T18:46:27.317

子类化`NSOperation`并将每个操作排队到`NSOperationQueue`，将每个下载 url 操作添加到 OperationQueue。

* * *

或者

使用[AFNetworking](https://github.com/AFNetworking/AFNetworking)库

* * *

或者`[NSURLConnection sendSynchronousRequest:returningResponse:error:]`

# c# - 一个或多个参数没有价值？

> ID：14405419
> 
> 赞同：0
> 
> 时间：2013-01-18T18:36:48.347
> 
> 标签：c#, asp.net, oledbexception

我在 gridview 中有一个按钮字段，当我按下该按钮时，它从第一列获取 id 值，我在 select 语句中使用该 id 从表中获取数据，但我收到此错误“No Value Give For One或更多参数”

```
protected void grdData_SelectedIndexChanged(object sender, EventArgs e)
{
    GridViewRow row = grdData.SelectedRow;
    string id = row.Cells[1].Text;           

    try
    {
        conn.ConnectionString = conn_string;

        conn.Open();

        mySQLCommand.Connection = conn;
        mySQLCommand.CommandText = "Select [Movie_Description],[Movie_Image] from Movie_tbl where Movie_ID = @Movie_ID";
        mySQLCommand.Parameters.Add("@Movie_ID", OleDbType.VarChar).Value = id;

        myDataReader = mySQLCommand.ExecuteReader();

        if (myDataReader.Read())
        {

            txtDescription.Text = myDataReader["Movie_Description"].ToString();

        }
        else
        {
            txtDescription.Text = "No Such Movie";

        }

    }
    catch (Exception ex)
    {

        throw ex ;
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T20:42:53.303

我没有经常使用 mySQL，但我很确定您不需要`OleDbType.VarChar`参数。我还没有看到在 MS Access 之外使用过。尝试：

```
mySQLCommand.Parameters.AddWithValue("@Movie_ID", id); 
```

如果失败，也许试试

```
mySQLCommand.Parameters.Add(new MySqlParameter("@Movie_ID", id)); 
```

`mySQLCommand``MySqlCommand`是您的代码中的类型，对吗？

# c# - 我不明白我两次分配同一个变量背后的逻辑

> ID：14405420
> 
> 赞同：0
> 
> 时间：2013-01-18T18:37:00.823
> 
> 标签：c#, .net, ado.net

我第一次在这个网站上问一个问题。我在 Visual C# 2008 中创建了一个简单的 windows 窗体，我将两个文本框中的值添加到 access 2010 数据库中的两个字段中。数据库称为TestDatabase.accdb，表是TestTable。两个变量 FirstName 和 Address 分配给 txt.FirstName 和 txt.Address 的 textbox.text 值。在我看来，我还在为 OleDBCommand 类添加参数的语句中将值添加到这两个变量中：

```
myCommand.Parameters.Add("@FirstName", OleDbType.VarChar).Value = txtName.Text; 
```

所以基本上它正在工作，但我不明白逻辑，因为它似乎不需要使用

```
FirstName = txtName.Text; 
```

或者

```
Address = txtAddress.Text; 
```

陈述。如果我从 TextChanged 事件中删除代码，我会收到一些警告。

这是代码：

```
namespace Test
{
    public partial class Form1 : Form
    {
        private string FirstName;
        private  string Address;

        private void cmdAdd_Click(object sender, EventArgs e)
        {
            string strSQL = "INSERT INTO TestTable(Name1, Address) VALUES(@FirstName, '@Address')";
            // represents an open connection to a data source.  Is a class
            OleDbConnection myConnection = new OleDbConnection("Provider=Microsoft.ACE.OLEDB.12.0;Data Source=C:\\TEMP\\TestDatabase.accdb");
            // represents an SQL statement or stored procedure to execute against a data source
            //( takes care of passing queries to the database).  Is a class.
            OleDbCommand myCommand = new OleDbCommand(strSQL, myConnection);
            myCommand.Parameters.Add("@FirstName", OleDbType.VarChar).Value = txtName.Text;
            myCommand.Parameters.Add("@Address", OleDbType.VarChar).Value = txtAddress.Text;

            try
            {
                myConnection.Open();
                myCommand.ExecuteNonQuery();
            }
            catch (Exception)
            {
                MessageBox.Show("Something went wrong");
            }
            finally
            {
                myConnection.Close();
            }
        }

        private void txtName_TextChanged(object sender, EventArgs e)
        {
            //IsNullOrEmpty indicates whether the string is null ot an Empty string
            //true if the value parameter is null or an empty string(""); otherwise, false
            if (string.IsNullOrEmpty(txtName.Text))
            {
                //has no value
            }
            else
            {
                FirstName = txtName.Text;
            }
        }

        private void txtAddress_TextChanged(object sender, EventArgs e)
        {
            if (string.IsNullOrEmpty(txtAddress.Text))
            {
                //has no value
            }
            else
            {
                Address = txtAddress.Text;
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T18:46:25.467

欢迎来到 SO，凯文！

只是为了澄清一下，您本身并没有在这里设置两次值。

```
 private void txtName_TextChanged(object sender, EventArgs e)
    {
        if (string.IsNullOrEmpty(txtName.Text))
        {
            //has no value
        }
        else
        {
            FirstName = txtName.Text;
        }
    }

    private void txtAddress_TextChanged(object sender, EventArgs e)
    {
        if (string.IsNullOrEmpty(txtAddress.Text))
        {
            //has no value
        }
        else
        {
            Address = txtAddress.Text;
        }
    } 
```

您正在上面的代码中**设置**值。

```
 private void cmdAdd_Click(object sender, EventArgs e)
    {
        string strSQL = "INSERT INTO TestTable(Name1, Address) VALUES(@FirstName, @Address)";
        OleDbConnection myConnection = new OleDbConnection("Provider=Microsoft.ACE.OLEDB.12.0;Data Source=C:\\TEMP\\TestDatabase.accdb");
        OleDbCommand myCommand = new OleDbCommand(strSQL, myConnection);
        myCommand.Parameters.Add("@FirstName", OleDbType.VarChar).Value = txtName.Text;
        myCommand.Parameters.Add("@Address", OleDbType.VarChar).Value = txtAddress.Text;

        try
        {
            myConnection.Open();
            myCommand.ExecuteNonQuery();
        }
        catch (Exception)
        {
            MessageBox.Show("Something went wrong");
        }
        finally
        {
            myConnection.Close();
        }
    } 
```

在上面的代码中，您将值**重新分配给***参数*，或者换句话说，将值*参数*化。这是一个使用和理解的好习惯，因为它可以帮助保护您免受[SQL 注入](http://en.wikipedia.org/wiki/SQL_injection)攻击。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T18:44:16.673

我想他想知道为什么他有 TextChanged 方法来填充私有变量而不使用它们？

```
myCommand.Parameters.Add("@FirstName", OleDbType.VarChar).Value = FirstName;
myCommand.Parameters.Add("@Address", OleDbType.VarChar).Value = Address; 
```

使用它们，因此您可以设置它们，操纵它们等。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-18T18:41:07.360

您的 sql 文本中有错误

```
string strSQL = "INSERT INTO TestTable(Name1, Address) VALUES(@FirstName, '@Address')"; 
```

你应该写

```
string strSQL = "INSERT INTO TestTable(Name1, Address) VALUES(@FirstName, @Address)"; 
```

全局变量 Address 和 FirstName 并不是真正需要的，除非有其他代码将它们用作外部代码可用的表单属性——

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-18T18:42:55.003

```
// Trailing ' To Be Removed
String strSQL = "INSERT INTO TestTable(Name1, Address) VALUES(@FirstName, @Address)";

// Incorrect Parameters To Be Fixed
myCommand.Parameters.AddWithValue("@FirstName", txtName.Text);
myCommand.Parameters.AddWithValue("@Address", txtAddress.Text); 
```

# google-maps - 异步显示多个谷歌地图

> ID：14405422
> 
> 赞同：1
> 
> 时间：2013-01-18T18:37:04.893
> 
> 标签：google-maps, google-maps-api-3, asynchronous

我目前有一个显示搜索**结果**的页面。当用户单击结果时，使用 ajax 获取**详细信息**并加载到页面中。在这些细节中，有一张谷歌地图。

以前，我在详细信息页面中有带有回调的 Gmaps 脚本。但是我遇到了这个问题，如果用户单击多个结果，则 Gmaps 脚本会被多次插入。

现在，我在结果页面中加载脚本，详细信息页面在传递所有必要参数的同时调用初始化函数。但我得到一个`undefined is not a function`错误。

所以我的问题是：如何构造 Gmaps 脚本、回调和异步初始化两个页面之间的映射（结果和详细信息）？

**结果页面**

```
<script src="https://maps.googleapis.com/maps/api/js?v=3.exp&sensor=false&key=[key]"></script>

function initialize(params) {
var directionsService, directionsDisplay, map;  

directionsService = new google.maps.DirectionsService();
directionsDisplay = new google.maps.DirectionsRenderer();

// your typical gmaps stuff

} 
```

**详情页面**

```
<div id="map_canvas"></div>

initialize(params); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T04:28:18.490

您可以通过检查添加到 DOM 的“google”全局变量来查看 Google 地图的脚本是否已经加载。

[完整的 jsfiddle 示例在这里：http://jsfiddle.net/gavinfoley/yD8Qt/](http://jsfiddle.net/gavinfoley/yD8Qt/)。

```
 // dom ready
    $(function () {
        if (typeof google === "undefined") {
            alert("Lazy loading Google maps");
            lazyLoadGoogleMaps();
        } else {                
            alert("Google Maps is already loaded");
            googleMapsLoaded();
        }
    });

    function lazyLoadGoogleMaps() {
        // Note the callback function name 
        $.getScript("http://maps.google.com/maps/api/js?sensor=true&callback=googleMapsLoaded")
        .done(function (script, textStatus) {            
            alert("Google maps loaded successfully");
        })
        .fail(function (jqxhr, settings, ex) {
            alert("Could not load Google Maps: ", ex);
        });
    }

    // This function name is passed in to the Google maps script load above
    // and will be called once Google maps has loaded
    function googleMapsLoaded() {           
        alert("Done!");
    }
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
```

# python - 在 Python 中使用 polib 修改/更新 po 文件中的条目

> ID：14405425
> 
> 赞同：4
> 
> 时间：2013-01-18T18:37:15.660
> 
> 标签：python, translation, gettext, po

[polib](https://github.com/izimobil/polib/)似乎是在 Python 中处理 gettext/po 文件的首选库。[文档](http://polib.readthedocs.org/en/latest/api.html)展示了如何遍历消息字符串、保存 po 和 mo 文件等。但是，我不清楚，如何编辑特定条目？

比方说，我遍历现有 po 文件中的所有消息，并以带有 textareas 的 HTML 表单显示它们。通过提交表单，我得到 - 例如 - 原始 *msgid = "Hello World"* 和 via textarea 翻译的 *msgstr = "Hallo Welt"*

po 文件中的原始部分可能如下所示：

```
#: .\accounts\forms.py:26 .\accounts\registration\forms.py:48
msgid "Hello World"
msgstr "" 
```

或设置模糊标志：

```
#: .\accounts\forms.py:26 .\accounts\registration\forms.py:48
#, fuzzy
msgid "Hello World"
msgstr "Hallo" 
```

现在我如何在实际的 po 文件中更新这个特定的翻译？如果这条消息被标记为“模糊”，我该如何删除这个标志？

任何帮助表示赞赏...

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-18T20:53:56.020

好的，通读了polib的源码后，发现是这样实现的，我想要的：

```
entry = po.find('Email address')
if entry:
    entry.msgstr = 'E-Mail-Adresse'
    if 'fuzzy' in entry.flags:
        entry.flags.remove('fuzzy') 
```

这似乎是要走的路...

在多元化的情况下 - 仅作为一个例子：

```
entry = po.find('%s hour ago')
if entry and entry.msgid_plural:
    entry.msgstr_plural['0'] = 'Vor %s Stunde'
    entry.msgstr_plural['1'] = 'Vor %s Stunden' 
```

polib 的文档应该明确更新。否则很棒的工具。

# ruby - 使用 God Gem 设置流程启动顺序

> ID：14405426
> 
> 赞同：1
> 
> 时间：2013-01-18T18:37:15.800
> 
> 标签：ruby, redis, god, sidekiq

**有没有可能让上帝依次启动两个过程？**

我正在使用依赖 Redis 的 Sidekiq。我想启动 Redis，然后启动 Sidekiq，我设置了两个独立的手表，它们可以独立工作，但是当我运行时：

`$ god -c "./config.god" -D`

似乎上帝试图同时启动两者，导致 Sidekiq 出错，因为它可以t 连接到 Redis 服务器。

我给上帝的配置文件如下：

```
# config.god
PROJECT_ROOT = ENV['PROJECT_ROOT'] || "/Path/to/app"

God.watch do |w|
  w.name = "redis-server"
  w.group = 'conversion-api'
  w.interval = 30.seconds
  w.start = "/usr/local/Cellar/redis/2.4.16/bin/redis-server"
end

God.watch do |w|
  w.name = "sidekiq"
  w.group = 'conversion-api'
  w.interval = 20.seconds
  w.dir = ENV['PROJECT_ROOT'] 
  w.start = "bundle exec sidekiq -v -C #{PROJECT_ROOT}/config.yml -r #{PROJECT_ROOT}/app.rb -c 10"
  w.stop = "bundle exec sidekiqctl stop #{PROJECT_ROOT}/tmp/pids/sidekiq.pid 5"
  w.keepalive
  # Don't pass in a pid file location. Let God handle things. Leaving a pid file location in
  # the sidekiq config.yml seems to be harmless though and it lets us force stop sidekiq independently 
  # of God.
  # w.pid_file = File.join(PROJECT_ROOT, 'tmp/pids/sidekiq.pid')
  w.log = "./log/god_sidekiq.log"
  w.behavior(:clean_pid_file)
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T15:57:20.543

我也想知道控制启动顺序。我开始研究在 sidekiq 监视对象上使用监视转换方法并检查 redis 进程是否正在运行的可能性：可能通过 God.watches["redis"].state == :up 然后启动 sidekiq。时间用完了，只放了一个“sleep 5”；在 sidekiq 启动之前和 redis 关闭之前。

# jquery - 使用 jquery addclass 将 css 添加到表中

> ID：14405427
> 
> 赞同：0
> 
> 时间：2013-01-18T18:37:17.790
> 
> 标签：jquery, css

当有人单击它时，我试图突出显示表中的一行。这是我的桌子：

```
<table class="pretty">
    <tr>
        <td onclick="DoNav('<?php echo $url; ?>');">Name</td>
        <td onclick="DoNav('<?php echo $url; ?>');">Time</td>
        <td onclick="DoNav('<?php echo $url; ?>');">Size</td>
        <td onclick="DoNav('<?php echo $url; ?>');">Length<td>
        <td><input type="checkbox" value="<?php echo $this->result_videos[$i]["video_name"]; ?>" title="Mark this video for deletion" /></td>
    </tr>
... 
```

我根据这篇[文章](https://stackoverflow.com/questions/877351/click-event-on-table-row-only-trigger-if-nothing-else-is-clicked)尝试了一些事情：

```
jQuery("table tr").click(function(){
       var row = jQuery(this);
       var hasClass = row.hasClass("highlight");
       jQuery("table tr").removeClass("highlight");
       if(!hasClass){
         row.addClass("highlight");
         alert("Do I get here?");
       }
}); 
```

我的CSS。**编辑**：添加了完整的 css，这可能是问题：

```
table.pretty {
width: 100%;
border-collapse: collapse;
font-family: "Lucida Sans Unicode","Lucida Grande",Sans-Serif;
clear: both;
}

/* Header cells */
table.pretty thead th {
background: none repeat scroll 0 0 #808184;
border-bottom: 1px solid #2B3D61;
border-top: 4px solid #2B3D61;
color: #ffffff;
font-size: 14px;
font-weight: normal;
padding: 8px;
text-shadow: 0 1px 0 rgba(0, 0, 0, 0.4);
text-align: center;
}

/* Body cells */
table.pretty tbody th {
background: none repeat scroll 0 0 #808184;
border-bottom: 1px solid #2B3D61;
border-top: 4px solid #2B3D61;
color: #ffffff;
font-size: 14px;
font-weight: normal;
padding: 8px;
text-shadow: 0 1px 0 rgba(0, 0, 0, 0.4);
}

table.pretty tbody td {
background: none repeat scroll 0 0 #eeeeee;
border-bottom: 1px solid #2B3D61;
border-top: 1px solid transparent;
color: #333333;
padding: 8px;
text-align: center;
}

table.pretty tbody tr {
cursor: pointer;
}

/* Footer cells */  
table.pretty tfoot th {
background: none repeat scroll 0 0 #808184;
border-bottom: 1px solid #2B3D61;
border-top: 4px solid #2B3D61;
color: #ffffff;
font-size: 14px;
font-weight: normal;
padding: 8px;
text-shadow: 0 1px 0 rgba(0, 0, 0, 0.4);
text-align: left;
}

table.pretty tfoot td {
background: none repeat scroll 0 0 #808184;
border-bottom: 1px solid #2B3D61;
border-top: 4px solid #2B3D61;
color: #ffffff;
font-size: 14px;
font-weight: normal;
padding: 8px;
text-shadow: 0 1px 0 rgba(0, 0, 0, 0.4);
text-align: center;
}

.highlight{
background-color: #a8cb17;
} 
```

由于某种原因，行颜色不会改变。我尝试将 jquery 代码（减去单击）放在 DoNav 函数中，当您单击该行时，该函数只会启动一个视频。

我究竟做错了什么。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T18:43:14.567

您所拥有的应该可以工作，但是不必要地复杂。这是同一段代码，但要短得多：

```
var $rows = jQuery("table tr");
$rows.click(function() {
    $rows.removeClass('highlight');
    jQuery(this).addClass('highlight');
}); 
```

这是小提琴：http: [//jsfiddle.net/gkxNa/](http://jsfiddle.net/gkxNa/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T20:02:19.310

关于你的 CSS

```
table.pretty tbody td {
   background: none repeat scroll 0 0 #eeeeee;
   ...
} 
```

将所有表格单元格设置为浅灰色。

```
.highlight{
   background-color: #a8cb17;
} 
```

将任何突出显示的背景设置为浅绿色。

*您正在突出显示行，但绿色行中的每个单元格仍然是灰色*的，即使该行本身是绿色的。

要解决此问题，请改为覆盖单元格颜色。还要注意特异性问题：

```
table.pretty tbody .highlight,
table.pretty tbody .highlight > td{
   background-color: #a8cb17;
} 
```

请注意，这`.highlight>td`还不够，因为`.highlight>td`（一个类，一个标签）没有`table.pretty tbody td`（一个类，三个元素）那么具体。

# security - 计划任务无法运行

> ID：14405433
> 
> 赞同：9
> 
> 时间：2013-01-18T18:37:34.760
> 
> 标签：security, scheduled-tasks, windows-server-2003

我有几个运行 VBS 脚本的计划任务。它曾经被设置为“运行为”离开我们公司的人。显然，在他的帐户被删除后，我不得不更改任务以作为另一个用户运行。

我们有一个 AD 帐户，我设置它用于为每个任务“运行”。通过运行它来测试任务，安排它从现在开始运行 2-3 分钟，它工作。因此，我将任务安排为每天在特定时间运行。第二天任务失败并出现以下错误：

> 尝试登录与任务关联的帐户失败，因此任务未运行。
> 
> 具体错误是：0x80070569：登录失败：用户在这台计算机上没有被授予请求的登录类型。验证任务的运行方式名称和密码是否有效，然后重试。

所以，我进去看到“运行方式”登录保持不变，所以我重新输入密码并再次测试任务。它运行良好，这告诉我它可以识别“运行方式”属性中使用的登录名和密码。第二天又失败了。

有什么建议，建议看什么？

谢谢大家！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-20T00:23:42.463

您的计划任务正在运行的帐户需要具有“作为批处理作业登录”的权限。使用组策略编辑器 (gpedit.msc) 将该权限添加到相关帐户。向下导航到计算机配置 -> Windows 设置 -> 安全设置 -> 本地策略 -> 用户权限分配，然后找到作为批处理作业登录。然后，将相关帐户添加到该策略中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-10-16T17:01:59.957

如果它对其他人有帮助，我必须将 GPO 设置为强制执行。

# ios - CoreData 关系没有从一个 MOC 合并到另一个

> ID：14405440
> 
> 赞同：4
> 
> 时间：2013-01-18T18:38:00.150
> 
> 标签：ios, core-data, merge, relationship, nsmanagedobjectcontext

我一直用这个虫子把头撞在墙上。基本上关系没有正确地从一个上下文合并到另一个上下文。

假设我的模型中有两种实体类型，学生和教师。一个学生只能有一个老师，一个老师显然可以有很多学生。我在我的 xcdatamodel 类中正确设置了它。

因为我正在从服务器同步这些实体，所以我有 2 个托管对象上下文 - 一个调用`uiContext`它的并发类型设置为`NSMainQueueConcurrencyType`，另一个调用`backgroundContext`它的并发类型设置为`NSPrivateQueueConcurrencyType`.

我还使用设置了一个嵌套结构`[self.uiContext setParentContext:self.backgroundContext];`

所以这就是我正在做的事情：

1) 从服务器获取教师

2）为他们创建托管对象`backgroundContext`

`save` 3 )调用`backgroundContext`

4）我听`NSManagedObjectContextDidSaveNotification`，并执行以下代码：

> ```
> [self.uiContext performBlock:^(void) {
>    [self.uiContext mergeChangesFromContextDidSaveNotification:notif];
> }]; 
> ```

到目前为止，这工作得很好。我的 uiContext 获得了教师管理的对象，我的 UI 也相应地更新。

但是，当我执行以下操作时，它会崩溃：

5）从服务器获取学生数据

6）为他们创建托管对象，`backgroundContext`并**设置从学生到适当老师的关系。**

`save` 7 )打电话`backgroundContext`

8）因为我正在收听`NSManagedObjectContextDidSaveNotification`通知，所以这个保存应该合并到`uiContext`

但是，这是我开始遇到问题的地方。即使学生对象被`uiContext`正确地合并到了，教师与学生之间的关系并没有被设置。从学生到老师的关系是正确设置的，但不是相反。具体来说，`[someTeacherObject.students count] == 0`但是`someStudentObject.teacher != nil`

关系在`backgroundContext`和持久存储（已验证）中设置正确。只是不在`uiContext`.

任何想法可能会发生什么？知道如何更好地调试吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T10:15:21.107

据我所知，一旦您为背景上下文设置了 parentContext，您就不再需要监听更改并手动合并它们。但是，您确实需要在主上下文上执行额外`saveContext:`的操作以将更改保存到存储中。

[有关更多信息，请参阅本文关于多上下文核心数据](http://www.cocoanetics.com/2012/07/multi-context-coredata/)的“父/子上下文”部分。

*编辑*

取自那篇文章，代码如下所示：

```
[backgroundContext performBlock:^{
// do something that takes some time asynchronously using the bg context

   // push to parent
   NSError *error;
   if (![backgroundContext save:&error])
   {
       // handle error
   }

   // save parent to disk asynchronously
   [mainMOC performBlock:^{
        NSError *error;
        if (![mainMOC save:&error])
        {
           // handle error
        }
    }];
}]; 
```

# c# - 为什么 XName.Get 会为以“{”开头的名称抛出 ArgumentException 而不是 XmlException？

> ID：14405446
> 
> 赞同：2
> 
> 时间：2013-01-18T18:38:19.277
> 
> 标签：c#, xml, linq-to-xml, argumentexception, xmlexception

我一直在 .NET 中对 XML 进行一些测试，发现[很多有效的名称字符是不允许的](https://stackoverflow.com/q/14384666/866022)。在几乎所有情况下，我都会在看似有效的字符上收到 XmlException。

XmlException 是从 System.Xml.dll 引发的，带有以下堆栈跟踪：

> 在 System.Xml.XmlConvert.VerifyNCName(String name, ExceptionType exceptionType) 在 System.Xml.Linq.XName..ctor(XNamespace ns, String localName) 在 System.Xml.Linq.XNamespace.GetName(String localName) 在 System。 Xml.Linq.XName.Get（字符串扩展名）

但是，在名称以“{”字符（十六进制值 0x7B）开头的情况下，我会从 System.Xml.Linq.dll 获得 ArgumentException，并带有以下堆栈跟踪：

> 在 System.Xml.Linq.XName.Get（字符串扩展名）

奇怪的是，这只适用于“{”是名称中的*第一个*字符时。如果它稍后出现在名称中，我会得到与所有其他“无效”字符相同的异常和堆栈跟踪。

由于我试图专门捕获这些异常来包装并抛出我自己的异常，所以我希望（我认为是合理的）它们都会抛出相同的异常。

为什么这会引发 ArgumentException 而不是 XmlException？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T18:50:37.197

查看[MSDN](http://msdn.microsoft.com/en-us/library/bb357369.aspx)`XName.Get`文档：

> *扩展名*
> 
> > 类型：[System.String](http://msdn.microsoft.com/en-us/library/system.string.aspx)包含格式为 的扩展 XML 名称
> > 的[字符串](http://msdn.microsoft.com/en-us/library/system.string.aspx)`{namespace}localname`。

当您以“{”开始字符串参数时，它会以不同的方式处理名称，因为它需要一个命名空间。

这是该方法的来源，通过反射器：

```
public static XName Get(string expandedName)
{
    if (expandedName == null)
    {
        throw new ArgumentNullException("expandedName");
    }
    if (expandedName.Length == 0)
    {
        throw new ArgumentException(Res.GetString("Argument_InvalidExpandedName",
            new object[] { expandedName }));
    }
    if (expandedName[0] != '{')
    {
        return XNamespace.None.GetName(expandedName);
    }
    int num = expandedName.LastIndexOf('}');
    if ((num <= 1) || (num == (expandedName.Length - 1)))
    {
        throw new ArgumentException(Res.GetString("Argument_InvalidExpandedName",
            new object[] { expandedName }));
    }
    return XNamespace.Get(expandedName, 1, num - 1).GetName(expandedName, num + 1,
        (expandedName.Length - num) - 1);
} 
```

# ruby-on-rails - 仅在有更改时才显示创建按钮是否有意义

> ID：14405449
> 
> 赞同：0
> 
> 时间：2013-01-18T18:38:28.230
> 
> 标签：ruby-on-rails, user-interface

我们有一个用于创建新`Article`对象的简单表单，它几乎没有需要填充的属性。仅在填充任何属性时才显示创建是否有意义？是否有任何 Rails 应用程序以这种方式运行

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T18:45:29.380

我认为在正确输入所有信息之前禁用创建按钮是相对常见的，但请确保在字段顶部、需要编辑的字段旁边或两者都包含有用的消息。您希望用户清楚您禁用该按钮的原因。

但是，完全隐藏创建按钮可能会造成混淆。我认为有充分的理由不这样做，而且我不记得在野外看到过这种情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T19:49:03.970

这取决于具体情况，但我宁愿做额外的验证而不是隐藏显示按钮，因为它会使人们感到困惑。创建按钮只是告诉页面的用途。

# python - Django 模型查询未通过

> ID：14405452
> 
> 赞同：0
> 
> 时间：2013-01-18T18:38:40.023
> 
> 标签：python, django, django-models, django-views

我正在构建一个非常简单的应用程序，它要求用户将城市名称添加到投票中，然后创建输入城市的频率分布。出于某种原因，我的观点不是按名称（主键）从数据库中检索 City 对象。具体来说，`try:`根据我的跟踪语句，之后的第一个分配没有通过。由于我是新手，因此必须忽略一些非常明显的东西。请指教。

模型.py：

```
from django.db import models

class City(models.Model):
    name = models.CharField(max_length='20', primary_key=True)
    count = 0 
```

视图.py：

```
def save(request):
name = request.POST['city_name']
try:
    city = City.objects.get(pk=name)
    print 'city does exist'
    city.count += 1
except City.DoesNotExist:
    print 'city does not exist'
    city = City()
    city.name = name
    city.count += 1
city.save()
return render_to_response('thanks.html', {'city_name':name}) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T18:44:06.633

`city.save()`更改后需要打电话`city.count`

您将需要在`try`块和`except`块中执行此操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T19:28:22.257

你的模型应该是

```
class City(models.Model):
    name = models.CharField(max_length='20', primary_key=True)
    count = models.IntegerField(default=0) 
```

作为旁注，（[https://docs.djangoproject.com/en/1.4/ref/models/querysets/#get-or-create](https://docs.djangoproject.com/en/1.4/ref/models/querysets/#get-or-create)）可能有助于清理一些东西。

编辑：

# php - 如何将字符串从引号替换为引号？

> ID：14405454
> 
> 赞同：1
> 
> 时间：2013-01-18T18:38:46.493
> 
> 标签：php, replace

我有问题，能帮帮我吗？我有文本，我想将它从“替换为”。

```
<span>new var[128]; format(var, sizeof(var), "something %s %f", "Stuneris", 1589.0587); SendClientMessage(playerid, 0xFFFFFFFF, var);</span> 
```

我想要`"something %s %f"`并`"Stuneris"`替换`<span class="numb">"something %s %f"</span>`为`<span class="numb">"Stuneris"</span>`

另一个问题是将十六进制代码从 替换`0xFFFFFFFF`为`<span class="numb">0xFFFFFFFF</span>`。

我需要做什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T18:49:25.443

你可以用[preg_replace](http://php.net/manual/en/function.preg-replace.php)做到这一点：

```
preg_replace('/"([^"]*)"/', '<span class="numb">"\1"</span>', $string); 
```

要匹配十六进制代码：

```
preg_replace('/0x([0-9A-Fa-f]*)/', '<span class="numb">\1</span>', $string); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T18:50:51.020

替换十六进制代码很容易：

```
$text = preg_replace('/(0x[0-9a-f]+)/i','<span class="numb">$1</span>',$text); 
```

替换引号内的字符串有点棘手。主要问题是 inlcude `"something %s %f"`，但 exclude `", "`（它分隔带引号的字符串，但也看起来像带引号的字符串）。如果您可以确定任何字符串中都不会有逗号，您可以使用：

```
$text = preg_replace('/("[^",]+")/i','<span class="numb">$1</span>',$text); 
```

如果您必须允许逗号，这将排除所有以逗号开头的字符串：

```
$text = preg_replace('/("(?!,)[^"]+")/i','<span class="numb">$1</span>',$text); 
```

# ubuntu - 无法在 RdOnly 上挂载

> ID：14405455
> 
> 赞同：-1
> 
> 时间：2013-01-18T18:38:53.510
> 
> 标签：ubuntu, mount, wubi

这个 /etc/fstab 用来工作：

> UUID=some# /media/win7 ntfs ro,auto,noexec,nosuid 0 0
> media/win7/ubuntu/disks/root.disk /media/ubuntu ext4 loop,ro,noexec 0 0

要在 ubuntu vol 上设置标签，我必须将 RdOnly 标志更改为 RdWr。

```
e2label /media/win7/ubuntu/disks/root.disk oldUbuntu 
```

仅当我保留 RdWr 标志时，ubuntu 磁盘才会挂载。我不确定为什么。我需要将 vol 挂载为 RdOnly。我删除了标签`e2label /media/win7/ubuntu/disks/root.disk ""`。我仍然无法将 ubuntu vol 安装为 RdOnly。win7 和 ubuntu vol 都必须是 RdWr 才能安装 ubuntu vol。 `dmesg | tail`说：
EXT4-fs（loop0）：INFO：只读文件系统需要恢复
EXT4-fs（loop0）：写访问不可用，无法继续

我做错了什么？我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T19:32:10.433

`gedit /etc/fstab` 注释掉 ubuntu 卷。再次设置我的标签：`e2label /media/win7/ubuntu/disks/root.disk oldUbuntu` 重新启动机器。将 ubuntu vol 挂载为 RW：`mount -t ext4 -o loop /media/win7/ubuntu/disks/root.disk /media/ubuntu` 重新编辑 fstab，将 ubuntu vol 恢复为 RdOnly。重启。
手动将 vol 挂载为 RW，解决了这个问题。

# javascript - 样式提要条目列表中的最后一项（谷歌提要 api）

> ID：14405460
> 
> 赞同：0
> 
> 时间：2013-01-18T18:39:30.917
> 
> 标签：javascript, rss, feed

我正在使用 Google Feed API 从 RSS 提要中提取四个项目。我想将列表中最后一项（第四项）的样式与前三个不同。似乎必须有一个简单的方法 - 但我似乎无法弄清楚。这是我所拥有的：

```
google.load("feeds", "1");

function initialize() {
    var feed = new google.feeds.Feed("http://the-url-of-my-feed");
    feed.load(function(result) {
        if (!result.error) {
            var container = document.getElementById("joes-teaser");
            for (var i = 0; i < result.feed.entries.length; i++) {
                var entry = result.feed.entries[i];
                var li = document.createElement("li");
                li.innerHTML = '<a href="' + entry.link + '" target="_blank">' 
                    + entry.title + '<span>More &raquo;</span></a>';
                container.appendChild(li);
            }
        }
    });
}
google.setOnLoadCallback(initialize); 
```

这给了我一个很好的四个 li 项目的列表，但我希望最后一个，也只有最后一个，有一个其他东西的 css id——也许是 joes-teaser-last 或其他什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T18:46:42.653

在您的循环中，您可以`i`通过将其与条目的长度进行比较来检查是否是最后一个。

```
for (var i = 0; i < result.feed.entries.length; i++) {
    var entry = result.feed.entries[i];

    var li = document.createElement("li");
    if (i == result.feed.entries.length - 1) {
        li.className = "lastLi";
    }
    li.innerHTML = '<a href="' + entry.link + '" target="_blank">' + entry.title + '<span>More &raquo;</span></a>';
    container.appendChild(li);
} 
```

# java - 将 KeyStroke 添加到 JCheckBox

> ID：14405464
> 
> 赞同：0
> 
> 时间：2013-01-18T18:39:50.333
> 
> 标签：java, swing, keylistener, jcheckbox, keystrokes

我想将 KeyStrokes 添加到 CheckBoxes 组，所以当用户点击 1 时，击键将选择/取消选择第一个 JCheckBox。

我已经制作了这部分代码，但它不起作用，有人能指出我正确的方向吗？

```
 for (int i=1;i<11;i++)
     {
           boxy[i]=new JCheckBox();
           boxy[i].getInputMap().put(KeyStroke.getKeyStroke((char) i),("key_"+i));  
           boxy[i].getActionMap().put(("key_"+i), new AbstractAction() {  
                 public void actionPerformed(ActionEvent e) {  
                     JCheckBox checkBox = (JCheckBox)e.getSource();  
                     checkBox.setSelected(!checkBox.isSelected());  
         }});
          pnlOdpovede.add(boxy[i]);
       } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T16:48:12.767

问题是您使用 WHEN_FOCUSED 类型的 checkBox 的 inputMap 注册了绑定：它们仅对在 keyPressed 时聚焦的特定 checkBox 有效。

假设您想要独立于 focusOwner 切换选定状态，另一种方法是使用复选框的父容器注册 keyBindings 并添加一些逻辑来查找要切换其选择状态的组件：

```
// a custom action doing the toggle
public static class ToggleSelection extends AbstractAction {

    public ToggleSelection(String id) {
        putValue(ACTION_COMMAND_KEY, id);
    }

    @Override
    public void actionPerformed(ActionEvent e) {
        Container parent = (Container) e.getSource();
        AbstractButton child = findButton(parent);
        if (child != null) {
            child.setSelected(!child.isSelected());
        }
    }

    private AbstractButton findButton(Container parent) {
        String childId = (String) getValue(ACTION_COMMAND_KEY);
        for (int i = 0; i < parent.getComponentCount(); i++) {
            Component child = parent.getComponent(i);
            if (child instanceof AbstractButton && childId.equals(child.getName())) {
                return (AbstractButton) child;
            }
        }
        return null;
    }

}

// register with the checkbox' parent
for (int i=1;i<11;i++)  {
       String id = "key_" + i;
       boxy[i]=new JCheckBox();
       boxy[i].setName(id);
       pnlOdpovede.getInputMap(WHEN_ANCESTOR_OF_FOCUSED_COMPONENT)
           .put(KeyStroke.getKeyStroke((char) i), id);  
       pnlOdpovede.getActionMap().put(id, new ToggleSelection(id));
       pnlOdpovede.add(boxy[i]);
 } 
```

顺便说一句：假设您的复选框具有操作（它们应该 :-)，则 ToggleAction 可以触发这些操作，而不是手动切换选择。在最近的一个线程中使用了这种[方法](https://stackoverflow.com/a/12989403/203657)

# php - 在 HTML/PHP 中运行 python 脚本

> ID：14405468
> 
> 赞同：1
> 
> 时间：2013-01-18T18:40:05.013
> 
> 标签：php, python, html

我正在尝试在我的网页中运行一个 python 脚本，该脚本创建了这个我后来使用 PHP 读取的文本文件。如果我自己制作一个文本文件，则读取文本文件的 PHP 脚本可以完美运行。但是，如果我尝试先运行 python 脚本（它应该创建文本文件然后读取它），它就不起作用。这是我的代码。我检查了权限和路径，但这似乎不是问题。

```
<html>
<body>
<form method="post" enctype="multipart/form-data" action = "abc.php">
<?php
  //creates or updates info.txt        
  shell_exec("/usr/bin/python /xyz/getinfo.py");

  $file = fopen("/xyz/info.txt", "r");
  //Output a line of the file until the end is reached
  while(!feof($file))
  {
    $f = fgets($file);
      echo $f . "<br>";
  }
  fclose($file);
?>
<input type="submit" name="submit" value="Submit" />
</form>
</body>
</html> 
```

# unicode - 我如何使用单个字节和二进制文件！Rebol 3 中的字节数组？

> ID：14405471
> 
> 赞同：2
> 
> 时间：2013-01-18T18:40:14.637
> 
> 标签：unicode, utf-8, bytearray, rebol, rebol3

在 Rebol 2 中，可以`to char!`用来产生有效的单字节，您可以在二进制操作中使用，例如 append：

```
>> buffer: #{DECAFBAD}
>> data: #{FFAE}
>> append buffer (to char! (first data))
== #{DECAFBADFF} 
```

似乎很明智。但是在 Rebol 3 中，你会得到一些不同的东西：

```
>> append buffer (to char! (first data))
== #{DECAFBADC3BF} 
```

那是因为它没有将单个字符建模为单个字节（由于 Unicode）。所以 (255) 的整数值`first data`被翻译成一个两字节的序列：

```
>> to char! 255
== #"ÿ"
>> to binary! (to char! 255)
== #{C3BF} 
```

鉴于 CHAR！不再等同于 Rebol 3 中的一个字节，也没有 BYTE！添加了数据类型*（使得 BINARY! 可以被视为一系列这些 BYTE！就像 STRING！是一系列 CHAR！）*，对于这种情况该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T19:15:07.533

使用 an `integer!`，这是我们目前在 R3 中表达一个字节的最接近的匹配项。

请注意，在 a 的上下文中将整数用作字节时会进行范围检查`binary!`：

```
>> append #{} 1024
** Script error: value out of range: 1024
** Where: append
** Near: append #{} 1024 
```

对于您的第一个示例，您实际上将一个系列的一个元素附加到另一个相同类型的系列。在 R3 中，您可以用最明显和最直接的方式表达这一点：

```
>> append #{DECAFBAD} first #{FFAE}
== #{DECAFBADFF} 
```

因此，就此而言，a`binary!`是一系列范围受限`integer!`的 s。

不幸的是，这在 R2 中不起作用，因为它是二进制的！模型只是在许多微小的方面被打破，包括上述。虽然在概念上是二进制！在 R2 中可以被认为是一系列 char!s，这个概念并没有得到一致的实现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T01:56:52.563

```
>> buffer: #{DECAFBAD}
== #{DECAFBAD}

>> data: #{FFAE}
== #{FFAE}

>> append buffer data/1
== #{DECAFBADFF} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T19:13:17.630

对于 Rebol 2 和 Rebol 3 中的问题，最简单的解决方法是使用 COPY/PART。这样，您无需尝试将内容减少为字节值，而是将其保留为二进制系列类型。您只是附加一个长度为 1 的二进制序列：

```
>> append buffer (copy/part data 1)
== #{DECAFBADFF} 
```

看起来，为了完整起见，Rebol 3 会有一个 BYTE！类型，称之为“整数系列！” 显然不符合STRING的先例！

它是[开源](https://github.com/rebol/r3)的，所以你（嗯，我？）可能会尝试添加它并查看完整的后果。:-)

# javascript - 如果发生故障，如何让 Jenkins 发送 JsUnit 报告？

> ID：14405476
> 
> 赞同：0
> 
> 时间：2013-01-18T18:40:35.403
> 
> 标签：javascript, maven, jenkins, jsunit

下面是 Jankins 运行的 pom.xml 段，但它没有在电子邮件中发送发生的错误。有没有人让这个工作。

```
<plugin>
            <groupId>de.berlios.jsunit</groupId>
            <artifactId>jsunit-maven2-plugin</artifactId>
            <executions>
                <execution>
                    <id>test</id>
                    <configuration>
                        <sourceDirectory>./WebContent/jsunit</sourceDirectory>
                        <sources>
                            <source>blah.js</source>

                        </sources>
                        <testSourceDirectory>./WebContent/jsunit</testSourceDirectory>
                        <reportsDirectory>${project.build.directory}/surefire-reports</reportsDirectory>
                        <testSuites>
                            <testSuite>
                                <name>SampleSuite</name>
                                <type>TESTCASES</type>
                                <includes>
                                    <include>blah_test.js</include>
                                </includes>
                            </testSuite>
                        </testSuites>
                    </configuration>
                    <goals>
                        <goal>jsunit-test</goal>
                    </goals>
                </execution>
            </executions>
        </plugin> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T19:17:20.023

默认情况下，Jenkins 不会这样做，但如果您使用[扩展电子邮件插件](https://wiki.jenkins-ci.org/display/JENKINS/Email-ext+plugin)，您可以配置您的构建电子邮件以包含您喜欢的来自控制台输出的任何数据。您可能还想查看[这些使用 Jelly 模板格式化电子邮件的示例](http://software-engineer-tips-and-tricks.blogspot.com/2011/10/jenkins-jelly-examples.html)。

# php - 基于 AJAX 的无限滚动器，带有 jQ uery、PHP 和 mySQL

> ID：14405478
> 
> 赞同：0
> 
> 时间：2013-01-18T18:40:43.427
> 
> 标签：php, jquery, mysql, ajax, scroller

我正在尝试使用 jQuery、PHP 和 mySQL 构建一个基于 AJAX 的无限滚动器。

非常简单，主页面中有一个 div，其中包含常规内容 (#theContent)。当窗口滚动到底部时，会自动调用外部 PHP 页面 (articles.php) 来查询 mySQL 数据库，然后将新的 PHP 内容附加到主页面中 div#theContent 的末尾。只要记录集中有新内容，这将持续，使用从主页面传递到外部页面的偏移量变量。

我让它部分工作，但可以使用一些关于偏移量的建议。在下面的代码片段中（来自主页），您将看到“articles.php?offset=10” - 我想在每次附加页面时增加“偏移”值（当它滚动到底部时），所以每次调用 .append(data) 时都会更新偏移值。这就是我卡住的地方。

在主页面的头部（此滚动有效，并执行对数据库的初始调用）：

```
<script>
$(window).scroll(function () {
   if ($(window).scrollTop() >= $(document).height() - $(window).height() - 10) {

    $.get('articles.php?offset=10', function(data) {
        $('#theContent').append(data);
    });

       }
});
</script> 
```

在articles.php（单独工作）

```
$offset = $_GET["offset"]; // gets from primary page  

the SQL call:
    "Select blah from blah order by blah limit 50,$offset"; 
```

总结一下：每次调用 .append 时，如何在主页中增加偏移量变量？

谢谢阅读。

* * *

编辑：我编辑了 Ohgodwhy 的片段，将偏移量增量器移到 $.get 之外。太好了 - 现在循环相同的记录问题已经消失了。所做的编辑：

```
 var offset = 10;
$(window).scroll(function () {

    if ($(window).scrollTop() >= $(document).height() - $(window).height() - 200) {

        $.get('articles.php?offset='+offset, function(data) {
            $('#theContent').append(data);

        });

  offset += 10;
        }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T18:47:29.697

```
var offset = 10;
$(window).scroll(function () {
    if ($(window).scrollTop() >= $(document).height() - $(window).height() - 10) {

        $.get('articles.php?offset='+offset, function(data) {
            $('#theContent').append(data);
            offset += 10;
        });

        }
}); 
```

# jquery - 选择列表文本在 IE 中使用 jQuery 更改后显示旧值

> ID：14405480
> 
> 赞同：0
> 
> 时间：2013-01-18T18:40:52.733
> 
> 标签：jquery, ajax

我有 2 个下拉列表，用于类别，一个用于子类别。当类别下拉列表更改时，子类别下拉列表将使用 jQuery/ajax 更新以显示新的子类别。它在 Chrome 中运行良好，但 IE 在通过 jQuery 更新后不显示新值。奇怪的是，在选择新选项后，会显示正确的文本，但是当我下拉列表时，它会显示旧文本。

这就是我在类别更改时清空和重新填充子类别下拉列表的方式：

```
 $('#testselectsubcat').empty().append(new Option("Pick a subcategory", 0));

   $.each(subcategories, function (index, subcat) {
       $('#testselectsubcat').append(new Option(subcat.name, subcat.id));
   }); 
```

编辑：忘记这部分，可能很重要。该问题仅发生在页面加载后使用 jQuery 添加的下拉列表中。我使用 .append() 将类别下拉列表添加到页面，使用 .after() 将子类别下拉列表添加到页面。

如何让它在 IE 中工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T18:47:26.210

好吧，你必须清除子类别下拉，像这样

```
// C#:
subcategories.Items.Clear();
// and loaded with new data
 ....

// or clear or empty it using jQuery
 $('#subcategories').chilren().remove();
  $('#subcategories').empty(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T19:12:29.263

Apparently [IE doesn't work using the append method with `new Option()`](http://bugs.jquery.com/ticket/1641)

You could try to append `$('<option/>').text(x).val(y)` like:

```
$('#testselectsubcat').empty().append(
    $('<option/>').val(0).text("Pick a subcategory")
);

$.each(subcategories, function (index, subcat) {
    $('<option/>').val(subcat.id).text(subcat.name).appendTo('#testselectsubcat');
}); 
```

or [see here](http://www.electrictoolbox.com/jquery-add-option-select-jquery/) for other ways using `new Option()` to work around IE

# css - CSS 计数器重置和增量

> ID：14405482
> 
> 赞同：0
> 
> 时间：2013-01-18T18:41:06.557
> 
> 标签：css

我想修复我的 CSS 计数器，以便在每次出现 OL 或 UL 顶级父级时重置。嵌套的 OL 不应重置计数器，而应仅针对顶级 OL 或 UL 的每个实例进行重置。

可能是问题的css：

```
section.post-content ol {
    counter-reset: item;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T22:13:22.197

您不能专门针对顶级元素（我认为）。

相反，针对所有 ol （正如您已经拥有的那样），并避免在非顶级 ol 上重置计数器，创建另一个规则：

```
ul ul {counter-reset: none}
ol ul {counter-reset: none} 
```

看结果：

[http://jsfiddle.net/rjqgz/](http://jsfiddle.net/rjqgz/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T00:08:41.627

**编辑解决方案：http: [//jsfiddle.net/rjqgz/2/](http://jsfiddle.net/rjqgz/2/)**

这是列表（等）中样式数字和彩色项目符号的 CSS。我包括了 html 部分，因为这将在 Wordpress 中用于创建大纲编号，并且因为它更容易设置内容列表的样式并取消所有其余部分的样式。

```
section.post-content ol, section.post-content ul {
    counter-reset: item;
}
section.post-content ul ol {counter-reset: none}
section.post-content ol ul {counter-reset: none}

section.post-content li {
    display: block;
}
section.post-content ol > li {
position:relative;
list-style:none; }

section.post-content ol li:before {
    counter-increment: item;
    content: counters(item, ".") " ";

    position:absolute;
    top:-.05em;
    left:-3.7em;

    width:3em;
    height:.9em; line-height:1em;
    /* Some space between the number and the content in browsers that support
       generated content but not positioning it (Camino 2 is one example) */
    margin-right:8px;
    padding:4px;

    font-style:italic; font-size:1.02em;  font-weight:bold;
    font-family: Cambria, Cochin, serif;
    opacity:.5;
    text-align:right;
}
section.post-content ul > li {
    position:relative;
    list-style:none;
}
section.post-content ul > li:before { /* Position and style the bullet */
    content:'\00B0'; /* CSS Special Character Converter: http://www.evotech.net/articles/testjsentities.html */

    position:absolute;
    top:-.1em;
    left:-.75em;
    width:.6em; height:1em; line-height:1em;

    margin-right:8px;
    padding:4px;

    font-size:2.08em;
    font-family: Cambria, Cochin, serif;
    opacity:.4;  /* If you want to change color instead, place in header.php */
    text-align:center;
}

/* MARGINS */

/*mobile*/
section.post-content ol, section.post-content ul, section.post-content li { /*children indent*/
    margin:0; padding:0; }
section.post-content ol > li, section.post-content ul > li {
    margin:0 0em .3em 1em; }

@media only screen
    and (min-width : 700px) {
        section.post-content ol, section.post-content ul { /*children indent*/
        margin:0; padding:0;
        margin-left:2em;
        }
        section.post-content > ol, section.post-content > ul { /*parent*/
        margin-left:0; padding-left:0; }

        section.post-content ol > li, section.post-content ul > li {
        margin:0 0em .3em 2em;
        }
    } 
```

# mysql - MySQL导出到outfile并覆盖

> ID：14405484
> 
> 赞同：4
> 
> 时间：2013-01-18T18:41:08.203
> 
> 标签：mysql, export, overwrite

我有兴趣将 mysql select 语句导出到 samba 共享上的文件中。在我尝试更新文件之前一切正常。例如，我将 mysql 导出到 outfile peachtree.csv 中，当数据更改时，我希望它用新数据覆盖旧文件，但是，我收到错误：ERROR 1086 (HY000): File '/srv/samba /share/peachtree.csv' 已经存在。是否有一个选项或开关可以放入语句中以强制或使其覆盖现有文件？

```
SELECT * FROM peachtree,
INTO OUTFILE '/srv/samba/share/peachtree.csv'
FIELDS TERMINATED BY ','
ENCLOSED BY '"'
LINES TERMINATED BY '\n'; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-07-04T18:03:54.013

你不能。这是一项安全功能。否则，您也许可以选择进入 /etc/password 或 /etc/shells 等文件。

从手册：

SELECT ... INTO OUTFILE 'file_name' 形式的 SELECT 将选定的行写入文件。该文件是在服务器主机上创建的，因此您必须具有 FILE 权限才能使用此语法。file_name 不能是现有文件，这可以防止诸如 /etc/passwd 和数据库表之类的文件被破坏。

[http://dev.mysql.com/doc/refman/5.0/en/select.html](http://dev.mysql.com/doc/refman/5.0/en/select.html)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2019-07-02T19:23:46.863

此解决方案使用动态 SQL 并写入 Windows 文件系统。

```
Select Now() Into @Now;                                              # get DateTime
Set @Now = Replace(@Now, ':', '-');                                  # format DateTime for the filesystem

# set Destination filename using formatted DateTime
Set @FilNam = Concat("'", 'd:/Folder/qrySelectToFile ', @Now, '.TXT', "'");
#Select @FilNam;                                                     # debug

# build query to execute, one clause at a time, for encoding purposes
Set @Sel     =  'Select * From vewViewName Into OutFile '    ; # Select From Into
Set @FldsTrm = ' Fields Terminated By ","'                         ; # Fields Terminated
Set @FldsEnc = Concat(" Enclosed By '", Char(34 Using utf8), "'")  ; #        Enclosed. 'Using' clause is to avoid a blob of 34 spaces.
Set @LinsTrm = " Lines Terminated By '\\r\\n'"                     ; # Lines  Terminated
Set @Qry = Concat(@Sel, @FilNam, @FldsTrm, @FldsEnc, @LinsTrm, ';'); # all together now

Prepare            Stmt From @Qry;                                   # Prepare
Execute            Stmt          ;                                   # Execute
Deallocate Prepare Stmt          ;                                   # Done 
```

[MySQL INTO OUTFILE 的](https://stackoverflow.com/questions/960627/mysql-into-outfile-override-existing-file)其他答案会覆盖现有文件吗？

# reporting-services - 保留组行然后开始下一组

> ID：14405488
> 
> 赞同：0
> 
> 时间：2013-01-18T18:41:25.027
> 
> 标签：reporting-services, reportingservices-2005

想象3张桌子：

```
Tickets
Comments
Attachments 
```

关系是一张票有 0 到多个评论同样一张票可以有多个（0 到多个）附件

例子：

```
Ticket 1
  1 Comment
  2 Comment
  3 Comment
  1 Attachment
Ticket 2
  1 Comment
Ticket 3
  1 Attachment 
```

我正在使用报告服务，并创建了一个包含 3 个组的表格布局报告。工单组、评论组和附件组 只要有附件，就会在每个评论之后显示该问题。例如，从报告上方的示例中查看 Ticket 1 最终会如下所示：

```
Ticket 1
  Comment 1
  Attachment 1
  Comment 2
  Attachment 1
  Comment 3
  Attachment 1 
```

但我希望它显示：

```
Ticket 1
  Comment 1
  Comment 2
  Comment 3
  Attachment 1 
```

那就是将整个组的行保持在一起，然后开始下一组。RS 只是显示所有组并返回到原始组。我尝试了几件事，例如创建一个组并合并所有单元格并在其中放置一个表格并将评论字段放置在该表格中。然后我添加了另一个组并为附件等插入了一个表格。当我运行报告时，它出现了同样的问题。如何显示一个组的所有数据，然后让它进入下一个组？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T23:32:44.387

我认为数据的性质意味着您不能在一个对象中轻松做到这一点，因为评论和附件似乎没有直接关系，那里没有自然的层次结构。

我将创建一个包含工单组和三个组标题行的表，一个包含工单详细信息，两个包含嵌入在每一行中的子报表；一个用于评论，一个用于附件。每个子报表都将工单作为参数（以及任何其他父报表参数），并分别显示与该工单关联的评论和附件。

这不是最优雅的解决方案，但它应该很容易上手，并且肯定会解决问题。

# iphone - 当前的 ChildView 控制器

> ID：14405490
> 
> 赞同：2
> 
> 时间：2013-01-18T18:41:31.427
> 
> 标签：iphone, ios, objective-c, xcode

我正在尝试在我的视图控制器上实现 SwipeGesture。

我目前面临的问题是我无法确定当前显示的子视图控制器是什么。

swipeGesture 被添加到容器视图控制器中。然后必须确定当前显示的VC是什么父子关系，然后向右或向左移动。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-19T05:48:35.383

如果您正在谈论自定义容器视图控制器，那么容器控制器的工作就是跟踪这一点。因此，您可能拥有自己的`@property`设备来跟踪您正在使用的设备，并根据您`transitionFromController`的滑动进行调整。因此，您可能有一个数字属性，当您向右移动时会增加，向左移动时会减少。

一般来说（如果你只是想跟踪你传递给哪个“来自”控制器`transitionFromViewController`），有两种方法。*View Controller Programming Guide的*[添加子控制器](http://developer.apple.com/library/ios/featuredarticles/ViewControllerPGforiPhoneOS/CreatingCustomContainerViewControllers/CreatingCustomContainerViewControllers.html#//apple_ref/doc/uid/TP40007457-CH18-SW13)中的清单 14-3 暗示了一种方法。

 *在这种情况下，在`viewDidLoad`您执行`addChildViewController`第一个视图控制器时。不过，在这种情况下，此时您不需要加载其他子视图控制器`addChildViewController`，而是让执行转换的方法来处理它（如清单 14-3 所示）。

如果你这样做，你可以抓住`[self.childViewControllers lastObject]`，这将是你的“当前”子控制器。所以，这可能看起来像：

```
@interface ViewController ()

@property (nonatomic) NSInteger currentIndex;

@end

@implementation ViewController

- (void)viewDidLoad
{
    [super viewDidLoad];

    UIViewController *initialController = ... // set your initial controller

    [self addChildViewController:initialController];
    initialController.view.frame = self.containerView.bounds;
    [self.containerView addSubview:initialController.view];
    [initialController didMoveToParentViewController:self];

    UISwipeGestureRecognizer *gesture;

    gesture = [[UISwipeGestureRecognizer alloc] initWithTarget:self action:@selector(handleSwipe:)];
    gesture.direction = UISwipeGestureRecognizerDirectionRight;
    [self.containerView addGestureRecognizer:gesture];

    gesture = [[UISwipeGestureRecognizer alloc] initWithTarget:self action:@selector(handleSwipe:)];
    gesture.direction = UISwipeGestureRecognizerDirectionLeft;
    [self.containerView addGestureRecognizer:gesture];

}

- (void) handleSwipe:(UISwipeGestureRecognizer *)gesture
{
    if (gesture.direction == UISwipeGestureRecognizerDirectionLeft && self.currentIndex < (kMaxIndex - 1))
    {
        self.currentIndex++;

        UIViewController *newController = ... // set your new controller
        UIViewController *oldController = [self.childViewControllers lastObject];

        [self cycleFromViewController:oldController
                     toViewController:newController
                            direction:gesture.direction];

    }
    else if (gesture.direction == UISwipeGestureRecognizerDirectionRight && self.currentIndex > 0)
    {
        self.currentIndex--;

        UIViewController *newController = ... // set your new controller
        UIViewController *oldController = [self.childViewControllers lastObject];

        [self cycleFromViewController:oldController
                     toViewController:newController
                            direction:gesture.direction];
    }
}

- (void) cycleFromViewController:(UIViewController*) oldController
                toViewController:(UIViewController*) newController
                       direction:(UISwipeGestureRecognizerDirection)direction
{
    [oldController willMoveToParentViewController:nil];
    [self addChildViewController:newController];

    newController.view.frame = oldController.view.frame;

    UIViewAnimationOptions options;

    if (direction == UISwipeGestureRecognizerDirectionRight)
        options = UIViewAnimationOptionTransitionFlipFromLeft;
    else if (direction == UISwipeGestureRecognizerDirectionLeft)
        options = UIViewAnimationOptionTransitionFlipFromRight;

    [self transitionFromViewController:oldController
                      toViewController:newController
                              duration:0.33
                               options:options
                            animations:^{
                                [oldController removeFromParentViewController];
                            }
                            completion:^(BOOL finished) {
                                [newController didMoveToParentViewController:self];
                            }];
} 
```

我见过一些人做的另一个模型是通过`addChildViewController`in加载所有潜在的子控制器`viewDidLoad`。我个人不喜欢这种方法，但我知道人们这样做并且效果很好。

但是如果你这样做，你就不能再依赖于`childViewControllers`知道哪个控制器是当前的控制器了。在这种情况下，您必须为`currentChildController`. 所以它可能看起来像：

```
@interface ViewController ()

@property (nonatomic, strong) UIViewController *currentChildController;
@property (nonatomic) NSInteger currentIndex;

@end

@implementation ViewController

- (void)viewDidLoad
{
    [super viewDidLoad];

    [self addChildViewController:[self.storyboard instantiateViewControllerWithIdentifier:@"ChildOne"]];
    [self addChildViewController:[self.storyboard instantiateViewControllerWithIdentifier:@"ChildTwo"]];
    [self addChildViewController:[self.storyboard instantiateViewControllerWithIdentifier:@"ChildThree"]];

    self.currentChildController = self.childViewControllers[0];

    self.currentChildController.view.frame = self.containerView.bounds;
    [self.containerView addSubview:self.currentChildController.view];

    for (UIViewController *controller in self.childViewControllers)
        [controller didMoveToParentViewController:self];

    UISwipeGestureRecognizer *gesture;

    gesture = [[UISwipeGestureRecognizer alloc] initWithTarget:self action:@selector(handleSwipe:)];
    gesture.direction = UISwipeGestureRecognizerDirectionRight;
    [self.containerView addGestureRecognizer:gesture];

    gesture = [[UISwipeGestureRecognizer alloc] initWithTarget:self action:@selector(handleSwipe:)];
    gesture.direction = UISwipeGestureRecognizerDirectionLeft;
    [self.containerView addGestureRecognizer:gesture];
}

- (void) cycleFromViewController:(UIViewController*) oldController
                toViewController:(UIViewController*) newController
                       direction:(UISwipeGestureRecognizerDirection) direction
{
    self.currentChildController = newController;

    newController.view.frame = oldController.view.frame;

    UIViewAnimationOptions options;

    if (direction == UISwipeGestureRecognizerDirectionRight)
        options = UIViewAnimationOptionTransitionFlipFromLeft;
    else if (direction == UISwipeGestureRecognizerDirectionLeft)
        options = UIViewAnimationOptionTransitionFlipFromRight;

    [self transitionFromViewController:oldController
                      toViewController:newController
                              duration:0.33
                               options:options
                            animations:^{
                            }
                            completion:nil];
}

- (void) handleSwipe:(UISwipeGestureRecognizer *)gesture
{
    if (gesture.direction == UISwipeGestureRecognizerDirectionLeft && self.currentIndex < (kMaxIndex - 1))
    {
        self.currentIndex++;

        UIViewController *oldController = self.currentChildController;
        UIViewController *newController = self.childViewControllers[self.currentIndex];

        [self cycleFromViewController:oldController
                     toViewController:newController
                            direction:gesture.direction];

    }
    else if (gesture.direction == UISwipeGestureRecognizerDirectionRight && self.currentIndex > 0)
    {
        self.currentIndex--;

        UIViewController *oldController = self.currentChildController;
        UIViewController *newController = self.childViewControllers[self.currentIndex];

        [self cycleFromViewController:oldController
                     toViewController:newController
                            direction:gesture.direction];
    }
} 
```

这是两种合乎逻辑的方法。

顺便说一句，第一种方法并不排除拥有自己的类属性来知道你在哪个控制器上，有时这很有用（例如，如果你使用的动画类型取决于你是否要去“正确的”或“左”），但除非是这种情况，否则您只需查看`[self.childViewControllers lastObject]`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T00:01:16.447

在我正在处理的项目中，我有许多视图控制器，每个视图控制器都将自己的导航控制器添加到父视图控制器中。我知道最初的条目孩子，但我执行以下操作来查找当前显示的孩子的孩子：

```
[myKnownViewController.childViewControllers objectAtIndex:0].navigationController.topViewController 
```*

# mysql - applescript mysql mamp

> ID：14405491
> 
> 赞同：0
> 
> 时间：2013-01-18T18:41:32.077
> 
> 标签：mysql, applescript, mamp

我想使用 Applescript 在本地 mysql 数据库中插入值。我正在使用 MAMP。

我为连接找到了这个，但它不起作用：（错误号 -60007）

```
set mysql_db to "my_database"
set mysql_user to "root"
set mysql_host to "localhost"
set mysql_pw to "root"
set mysql_table to "my_table"

tell application "Finder"
    # Start MAMP's Apache server
    do shell script "/Applications/MAMP/bin/startApache.sh &" password mysql_pw user name mysql_user with administrator privileges          
    # Start MAMP's MySQL server
    do shell script "/Applications/MAMP/bin/startMysql.sh > /dev/null 2>&1"
end tell 
```

如何在我的数据库中插入一些值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T20:47:58.033

您可以使用 AppleScript 的语句直接调用**mysql 。**`do shell script`

`do shell script`让您可以像从终端输入命令一样执行命令脚本。然后调用**mysql**并向其发送命令：

（因为服务器正在运行）

```
do shell script "/Applications/MAMP/Library/bin/mysql -u root --password=the_password \"INSERT INTO TABLE your_table (field_1, field_2) VALUES ('foo', 'bar');\" your_data_base_name" 
```

* * *

另一个（不是免费的）解决方案是使用**Navicat for mySql**软件， 它允许从 GUI 前端轻松高效地管理 mySql 数据库。它也是 Apple 可编写脚本的。

# wpf - 在 WPF 中不会触发 WindowsFormsHost 托管视频上的鼠标事件

> ID：14405492
> 
> 赞同：1
> 
> 时间：2013-01-18T18:41:37.070
> 
> 标签：wpf, mouseevent, windowsformshost

我有一个 WPF 应用程序使用 WindowsFormsHost 托管一个 ActiveX 对象流视频。由于 activeX 对象始终呈现在应用程序之上，因此我无法处理鼠标事件，因为 activeX 对象正在吞噬这些事件，而不是提升它们以供主机处理。

有没有办法捕捉鼠标事件？

# php - 如何在 PHP 中访问已过滤 mongoDB 中父字段的内部字段？

> ID：14405494
> 
> 赞同：0
> 
> 时间：2013-01-18T18:41:41.313
> 
> 标签：php, mongodb

我在 mongoDB 中有一组具有这种结构的文档：

```
{
    _id: ObjectId("50f970caaa070bb8150000ae"),
    名词：“阿根廷”，
    poblacion: 1000,
    省：[
        {
            名称：“布宜诺斯艾利斯”，
            gobernador：“豪尔赫·路易斯”，
            cantMedicos: 2,
            _id: ObjectId("50f970caaa070bb8150000a9")
        },
        {
            名称：“卡塔马卡”，
            gobernador：“罗德里戈·内拉”，
            cantMedicos: 5,
            _id: ObjectId("50f970caaa070bb8150000aa")
        }
    ]
}
```

我想从父母的“名词”等于“阿根廷”的所有“省”中打印字段“gobernador”。但我找不到在 PHP 中实现这一点的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T19:14:39.140

第一步是`{ nombre: "Argentina" }`通过[MongoCollection::find()](http://php.net/manual/en/mongocollection.find.php)选择所有文档。这应该返回一个可迭代的[MongoCursor](http://php.net/manual/en/class.mongocursor.php)并允许您访问所有匹配的文档。

每个文档都是一个数组，因此您可以像上面评论中提到的 Sammaye 一样访问相应的字段。

您还可以选择在匹配文档中包含`find()` [项目](http://docs.mongodb.org/manual/core/read-operations/#projection)特定字段，如果您的文档非常大并且您希望减少 (a) 从 MongoDB 传递到驱动程序的数据量和/或 (b)处理返回的文档所消耗的内存量。查询预测是通过第二个参数控制的，`MongoCollection::find()`并记录在上述链接中。

# xml - 远程服务器返回错误：(500) httprequest 上的内部服务器错误

> ID：14405499
> 
> 赞同：1
> 
> 时间：2013-01-18T18:41:52.943
> 
> 标签：xml, vb.net, soap, httprequest

伙计，我正在开发一个 api，我必须使用soap请求将请求发送到基于xml的服务器，但服务器向我显示以下错误：远程服务器返回错误：（500）内部服务器错误，非常感谢帮助

我的代码是这样的：

```
 Dim s = ""
    s = s & "<?xml version=""1.0"" encoding=""UTF-8""?>" & vbCrLf

    s = s & "<soapenv:Envelope xmlns:soapenv=""http://schemas.xmlsoap.org/soap/envelope/"" xmlns:xsd=""http://www.w3.org/2001/XMLSchema"" xmlns:xsi=""http://www.w3.org/2001/XMLSchema-instance"">" & vbCrLf

    s = s & "<soapenv:Body>" & vbCrLf

    s = s & "<OTA_AirLowFareSearchRQ EchoToken=""0"" SequenceNmbr=""0"" TransactionIdentifier=""0"" AvailableFlightsOnly="""" DirectFlightsOnly="""" xmlns=""http://www.opentravel.org/OTA/2003/05"">" & vbCrLf
    s = s & "<POS xmlns=""http://www.opentravel.org/OTA/2003/05"">" & vbCrLf
    s = s & "<Source AgentSine="""" PseudoCityCode="""" TerminalID=""1"">" & vbCrLf
    s = s & "<RequestorID ID=""AFFILIATE""/>" & vbCrLf
    s = s & "</Source>" & vbCrLf

    s = s & "<YatraRequests>" & vbCrLf
    s = s & "<YatraRequest DoNotHitCache=""false"" DoNotCache=""false"" YatraRequestTypeCode=""SMPA"" Description="""" MidOfficeAgentID=""28737"" AffiliateID=""TRAVELPARTNER"" />" & vbCrLf
    s = s & "</YatraRequests>" & vbCrLf
    s = s & "</POS>" & vbCrLf
    s = s & "<TravelerInfoSummary>" & vbCrLf
    s = s & "<AirTravelerAvail>" & vbCrLf
    s = s & "<PassengerTypeQuantity Code=""ADT"" Quantity=""" & drAdult.SelectedValue & """/>" & vbCrLf
    s = s & "<PassengerTypeQuantity Code=""CHD"" Quantity=""" & drpChil.SelectedValue & """/>" & vbCrLf
    s = s & "<PassengerTypeQuantity Code=""INF"" Quantity=""" & drpInfant.SelectedValue & """/>" & vbCrLf

    s = s & "</AirTravelerAvail>" & vbCrLf
    s = s & "</TravelerInfoSummary>" & vbCrLf
    s = s & "<SpecificFlightInfo>" & vbCrLf
    s = s & "<Airline Code=""""/>" & vbCrLf
    s = s & "</SpecificFlightInfo>" & vbCrLf
    s = s & "<OriginDestinationInformation>" & vbCrLf
    s = s & "<DepartureDateTime>" & txtDeparture.Text & "</DepartureDateTime>" & vbCrLf
    s = s & "<OriginLocation CodeContext=""IATA"" LocationCode=""" & drpFrom.SelectedValue & """>" & drpFrom.SelectedValue & "</OriginLocation>" & vbCrLf
    s = s & "<DestinationLocation CodeContext=""IATA"" LocationCode=""" & drpTo.SelectedValue & """>" & drpTo.SelectedValue & "</DestinationLocation>" & vbCrLf
    s = s & "</OriginDestinationInformation>" & vbCrLf
    s = s & "<TravelPreferences>" & vbCrLf
    s = s & "<VendorPref Code=""SG""/>" & vbCrLf
    s = s & "<VendorPref Code=""DN""/>" & vbCrLf
    s = s & "<CabinPref Cabin=""" & drpClass.SelectedValue & """/>" & vbCrLf
    s = s & "</TravelPreferences>" & vbCrLf
    s = s & "</OTA_AirLowFareSearchRQ>" & vbCrLf
    s = s & "</soapenv:Body>" & vbCrLf
    s = s & "</soapenv:Envelope>" & vbCrLf

    Dim url = "http://203.189.91.127:9090/services/spm/spm"

    Dim doc As New XmlDocument()

    doc.LoadXml(s)

    Dim req As HttpWebRequest = WebRequest.Create(url)
    req.Headers.Add("SOAPAction", "")

    req.ContentType = "text/xml;charset=""utf-8"""
    req.Accept = "text/xml"
    req.Method = "POST"
    Dim stm As Stream = req.GetRequestStream()
    doc.Save(stm)
    stm.Close()
    Dim resp As WebResponse = req.GetResponse()
    stm = resp.GetResponseStream()
    Dim r As StreamReader = New StreamReader(stm)
    'process SOAP return doc here. For now, we'll just send the XML out to the browser ...
    Response.Write(r.ReadToEnd()) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T18:44:58.140

正如它所说，HTTP 错误代码 500 是内部服务器错误。您的联系人可能需要查看他的日志并向您报告错误是什么，因为这是他的结果，而不是您的错误。

如果您的请求格式与他的预期格式不匹配并引发错误，则需要在他端正确处理，而不是报告错误 500。

所以....基本上它不在你的手中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T09:46:39.647

获取窗口的应用程序日志会很有帮助。转到开始 -> 运行 -> 事件查看器（单击 Enter）-> Windows 日志 -> 应用程序 -> 检查日志。有关详细信息，请参阅[http://support.microsoft.com/kb/308427](http://support.microsoft.com/kb/308427)。或 [http://www.dotnetnoob.com/2012/03/iis-500-errors-leave-clues-in-log.html](http://www.dotnetnoob.com/2012/03/iis-500-errors-leave-clues-in-log.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-11T10:16:53.690

先评论这件事

's = ?xml 版本=""1.0"" 编码=""UTF-8""?"

然后添加此代码它的工作正常我尝试

```
 Dim Parameters As String = GetRq()
        Dim request As WebRequest = WebRequest.Create(url)
        request.Credentials = CredentialCache.DefaultNetworkCredentials
        request.ContentType = "application/x-www-form-urlencoded"
        request.Method = "POST"
        request.Headers.Add("SOAPAction", url)
        Dim byteArray As Byte() = Encoding.UTF8.GetBytes(Parameters)
        request.ContentType = "text/xml"

        request.ContentLength = byteArray.Length

        Dim dataStream As Stream = request.GetRequestStream()
        dataStream.Write(byteArray, 0, byteArray.Length)
        dataStream.Close()

        Dim response As WebResponse = request.GetResponse()
        dataStream = response.GetResponseStream()

        Dim reader As New StreamReader(dataStream)
        Dim responseFromServer As String = reader.ReadToEnd()

        reader.Close()
        dataStream.Close()
        response.Close() 
```

谢谢

马路莫格雷

# asp.net - 如何旋转位图并添加到另一个未旋转的图像（GDI+、图形）

> ID：14405503
> 
> 赞同：0
> 
> 时间：2013-01-18T18:41:59.767
> 
> 标签：asp.net, gdi+, system.drawing

我有一个基本图像 (baseImage.jpg)，我想向它添加另一个图像 (addImage.jpg)，但我想先旋转 addImage.jpg。因为用户可以更改 addImage 的位置和旋转，所以我需要 addImage 的旋转基于自身的中心点，而不是基于 baseImage.jpg 的大小/点。

问题是，我该怎么做？我可以将 addImage 放入它自己的图形对象中 - 但是如何将它放回原始 baseImage 图形对象中？我真的不想保存它（因为会有数千次迭代）。这是一些示例代码：

```
Dim addImage As Bitmap = New Bitmap("addImage.jpg")
Dim x As Matrix

x = New Matrix()
'rotates in the center of the addImage.jpg
x.RotateAt(rotation, New PointF(addImage.width / 2, (addImage.height / 2))

Dim rGraphic As Graphics
rGraphic = Graphics.FromImage(addImage)

rGraphic.Transform = x

'Now my addImage.jpg is rotated - but how do I add it to my baseImage.jpg?

Dim baseImage As Bitmap = New Bitmap("baseImage.jpg")
oGraphic = Graphics.FromImage(baseImage)

'Is there a way to add the output of rGraphic to oGraphic without saving it off to disk? 
```

# ios - iOS：在 alloc 和 init 之后返回 *nil description* 的对象

> ID：14405504
> 
> 赞同：1
> 
> 时间：2013-01-18T18:42:01.717
> 
> 标签：ios, objective-c

让我先说我认为这是我的内存管理错误。我似乎无法弄清楚为什么会这样。

我有一个视图控制器和一个名为`Part`.

```
#import <Foundation/Foundation.h>

@interface Part : NSObject

@property (nonatomic, strong) NSString *name;
@property (nonatomic, strong) NSString *partType;
@property (nonatomic, strong) NSString *description;
@property (nonatomic, strong) NSNumber *price;

- (id)initWithName:(NSString *)name AndType:(NSString *)type;

@end 
```

在视图控制器中，我有一个属性设置如下：

```
@property (nonatomic, strong) Part *part; 
```

在我创建一些静态数组并从中创建对象的功能`init`中：`ViewController`

```
- (id)init {
    self = [super init];

    self.partList = [[NSMutableArray alloc] init];

    NSArray *inputArray = @[@"Part1",
    @"Part2",
    @"Part3",
    @"Part4",
    @"Part5",
    @"Part6",
    @"Part7",
    @"Part8"];

    NSString *tempType = @"PartCategory";

    // Add dummy static data
    for (int i = 0; i < [inputArray count]; i++) {
        Part *partInput = [[Part alloc] initWithName:[inputArray objectAtIndex:i] AndType:tempType];
        //partInput.name = [inputArray objectAtIndex:i];
        //partInput.partType = tempType;
        NSLog(@"Inserting Part %@", partInput);
        [self.partList addObject:partInput];
    }

    return self;
} 
```

我在该`NSLog`循环中调用`Inserting Part *nil description*`的每个部分都会返回。我只是无法追踪这里发生的事情。

编辑：这是控制器使用的`initWithName`方法`Part`：

```
- (id)initWithName:(NSString *)name AndType:(NSString *)type {
    if(self = [super init]) {
        self.name = name;
        self.partType = type;
    }

    return self;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-18T19:00:01.783

当`%@`用于打印 NSObject 时，它`debugDescription`默认调用该`description`对象的方法，并且您的`Part`对象总是有`nil`描述。

您最好通过将`description`属性名称更改为其他名称来解决此问题，因为它`description`与`NSObject`.

参见：[NSObject 描述和 debugDescription](https://stackoverflow.com/questions/9379633/nsobject-description-and-debugdescription)

# ios - 如何创建允许分页和缩放 UIImageViews 的 UIScrollView？

> ID：14405505
> 
> 赞同：4
> 
> 时间：2013-01-18T18:42:02.193
> 
> 标签：ios, uiscrollview, uiimageview, paging, zooming

我试图制作一个 UIScrollView，它允许对各种 UIImageView 进行分页并缩放每个图像。我的第一个想法是创建一个 UIScrollView 以进行分页，然后为每个 UIImageView 创建一个 UIScrollView 以允许我缩放该图像。

我知道 Apple 有一个 PhotoScroller Demo，但它非常复杂，我真的不需要 Tiles 功能。

你知道任何关于这个的教程吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T18:58:05.697

有一个非常棒的 WWDC 2010 视频，Designing Apps with Scroll Views，伴随着 PhotoScroller 代码。前半部分描述你想要什么，后半部分是关于平铺的。看上半场。

打开[Apple Developer Video Archive](https://developer.apple.com/videos/archive/)，然后选择视频 5，会话 104，“Designing Apps with Scroll Views”。

（需要开发者登录）

# xcode - Xcode 重新加载完成 UITableViewController

> ID：14405507
> 
> 赞同：0
> 
> 时间：2013-01-18T18:42:08.717
> 
> 标签：xcode, uitableview

我有`tableviewcontroller`一些可以折叠和展开的部分。也可以在我的表格视图中添加新部分。

但是新添加的部分只有在关闭并重新打开 tableview 后才可见。

不知何故，我需要在添加一个部分后重新加载整个 tableview。
[tableview reloadData] 不起作用。

那么如何在不关闭并重新打开窗口的情况下手动重新加载完整的 tableview 呢？（或者至少用户不应该注意到关闭和重新打开操作）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T20:28:19.183

我认为这应该有效：

```
- (IBAction)refreshButton: (id)sender {
     [self.tableView reloadData];
} 
```

或者可能是这个

```
- (IBAction)refreshButton: (id)sender {
     [self reloadTableData];
} 
```

希望它有效！

# javascript - 无需安装即可使用 AjaxMin

> ID：14405508
> 
> 赞同：1
> 
> 时间：2013-01-18T18:42:10.650
> 
> 标签：javascript, css, visual-studio, ajaxmin

我正在尝试使用 AjaxMin 而不安装它。从这个链接（[http://ajaxmin.codeplex.com/wikipage?title=AjaxMinTask](http://ajaxmin.codeplex.com/wikipage?title=AjaxMinTask)）我认为 UsingTask 标签可以让我这样做，但我一直收到这个错误：

> E:......csproj (487)：无法从“E:...\libraries\AjaxMinTask.dll”实例化“AjaxMin”任务。System.IO.FileNotFoundException：无法加载文件或程序集“AjaxMin，版本=4.79.4762.18504，文化=中性，PublicKeyToken=21ef50ce11b5d80f”或其依赖项之一。该系统找不到指定的文件。文件名：Microsoft.Ajax.Minifier.Tasks.AjaxMin..ctor() 上的“AjaxMin，Version=4.79.4762.18504，Culture=neutral，PublicKeyToken=21ef50ce11b5d80f”警告：程序集绑定日志记录已关闭。要启用程序集绑定失败日志记录，请将注册表值 [HKLM\Software\Microsoft\Fusion!EnableLog] (DWORD) 设置为 1。注意：与程序集绑定失败日志记录相关的一些性能损失。要关闭此功能，请删除注册表值 [HKLM\Software\Microsoft\Fusion! 启用日志]。E:......Web.csproj (487)：“AjaxMin”任务声明或使用不正确，或在构建过程中失败。检查任务名称和程序集名称的拼写。

我也试过这个（[无法加载文件或程序集 App_Licenses](https://stackoverflow.com/questions/3831287/could-not-load-file-or-assembly-app-licenses)），但它仍然不起作用。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T18:22:20.857

仅供参考 - 添加 dll 作为参考不起作用。我们最终将 AjaxMin dll 和 exe 添加到存储库中，创建了 manifest.xml，然后添加以下内容作为预构建步骤：

"$(SolutionDir)\libraries\AjaxMin" -clobber -xml "$(ProjectDir)\AjaxMin\manifest.xml"

我们还将缩小的文件添加到存储库中，以便将它们复制到发布区域。不是最优雅的解决方案，但它适用于我们的情况。

# css - 100% 窗口高度 | 100% 父 div 宽度

> ID：14405515
> 
> 赞同：0
> 
> 时间：2013-01-18T18:42:53.567
> 
> 标签：css, scroll, height, width

我想创建一个 HTML 页面：

*   水平居中显示
*   在窗口的整个高度上都有白色背景
*   包含固定的标题和可滚动的内容

我有两个与 {width: 100%} 和 {height: 100%} 有关的问题。

我的页眉是页面宽度的 100%，而我期望它是其父宽度的 100%。背景出现在窗口高度的 100% 处，但随后会随着内容向上滚动。

我将不胜感激在这两种情况下 CSS 如何处理 100% 值的任何帮助。我不是在寻求解决方法：我已经有了。我要求深入了解 CSS 的思维方式。

提前谢谢了，

詹姆士

[这是该问题的演示](http://dev.lexogram.com/tests/100percent/)

这是准系统 HTML：

```
<!DOCTYPE html>
<head>
<title>Width & Height 100%</title>

<style>
html {
    height:100%;
}

body {
    background: #666;
    height: 100%;
    margin: 0;
}

#container {
    position: relative;
    height:100%;
    background: white;
    width: 400px;
    margin: 0 auto;
    padding: 0 0;
}

#header {
    position:fixed;
    z-index:100;
    background:#ffe;
    /* width:760px; */
    width:100%;
    height:64px;
}

#content {
    position: absolute;
    left:20px;
    width:360px;
    height:360px;
    margin:64px 0 0 0;
    background:#efe;
}
</style>
</head>

<body>
<div id="container">
    <div id="header">
        Fixed header
    </div>

    <div id="content">
        Scrollable content
    </div>
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T18:45:26.733

**修复标题**
将标题位置更改`fixed`为位置`absolute`

**修复内容高度**

```
* {
    margin: 0;
}
html, body {
    height: 100%;
}
#container{
    min-height: 100%;
    height: auto !important;
    height: 100%;
    background:#efe;
}
#content {
    padding: 64px 20px 0;
} 
```

**固定位置的实时示例**
[http://jsfiddle.net/qB4sD/1/](http://jsfiddle.net/qB4sD/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T20:01:26.877

所有这些固定位置都会让你头疼。

关于宽度：盒子模型通常是问题所在。我开始每个 CSS 时将 body 高度和宽度设置为 100%，然后重置我的盒子模型，使其在浏览器之间匹配，并将我的所有填充应用到盒子的内部而不是外部：

```
/* Set box models to match across browsers. */
* {
 box-sizing:border-box;
 -moz-box-sizing:border-box;
 webkit-box-sizing:border-box;
 max-width:100%;
} 
```

然后使用填充在容器上设置宽度，首先是移动宽度，然后是要覆盖的屏幕宽度：

```
#container {
    padding: 0px 10px;
}
        @media only screen
        and (min-width : 700px) {

            #container {
            padding: 0% 30%;
            }

        } 
```

如需完整布局，您可以访问我的网站：http: [//instancia.net/fluid-sticky-footer-layout/](http://instancia.net/fluid-sticky-footer-layout/)

我可能应该将移动位添加到该页面。:)

# python - 系统路径中的多个 Python 安装

> ID：14405520
> 
> 赞同：2
> 
> 时间：2013-01-18T18:43:16.280
> 
> 标签：python, windows, command-line, path, executable

我的 Windows 7 64 位工作站上有两个 Python 安装。我有 32 位 Python 2.7 和 64 位 Python 2.7。特定应用程序需要每次安装。我目前的系统路径中只有 32 位 Python 安装。但是，我也想将 64 位版本添加到路径中。

现在，如果我`python`在 Windows 命令提示符中输入，它将打开 Python 2.7 win32。我想做的是输入`python32`32 位版本或`python64`64 位版本。

我意识到我可以将每个`python.exe`文件重命名为`python32.exe`and `python64.exe`，但这会破坏特定应用程序寻找的硬编码路径。是否有可能将每个`python.exe`命名为`python.exe`但在命令提示符下给它一个不同的命令？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T18:52:37.150

您可以为每个添加批处理文件

python32.bat

```
@C:\python32\python.exe %* 
```

python64.bat

```
@C:\python64\python.exe %* 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T19:02:17.590

以下是我如何在我的系统上处理多个版本的 Python。它甚至与 depot_tools 中捆绑的 Google 的 python 兼容。

1.  在通用文件夹中下载并安装任何版本的 Python，例如默认的`C:\Python`.
2.  将该文件夹重命名为特定的名称，例如`c:\Python.2.7.32bits`
3.  使用您每次重命名的相同安装文件夹下载并安装您需要的任何其他版本。

这是为了直接获取注册表设置，因为某些应用程序需要它。

现在[下载 Junction](http://technet.microsoft.com/en-us/sysinternals/bb896768.aspx)并将其解压缩到路径中的某个位置。要从一个 Python 切换到另一个 Python，请使用以下命令：

```
junction -d c:\python & junction c:\python c:\python.2.7.32bits 
```

在批处理文件中，它看起来像这样：

```
@echo off
junction -d c:\python & junction c:\python c:\python.%1
echo Now using
python -V
where python 
```

你会把它放在你的路上并用它打电话

```
switch-python 2.7.32bits 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-01T12:42:25.363

我使用 ixe013 的 junction 方法。我遇到的一个问题是 enthoughts enpkg 安装程序没有“读取”符号连接...我丢失了详细信息，但它破坏了符号链接，然后声称安装目录为空...

因此，如果您使用 ixe013s 方法，我建议在更新时使用以下方法

删除交界处：交界处-dc:\python

将 c:\python.2.7.32bits 重命名为 c:\python

运行 enpkg 然后返回：将 c:\python 重命名为 c:\python.2.7.32bits

结 -dc:\python & 结 c:\python c:\python.2.7.32bits

# session - 会话和表单 cookie 授权

> ID：14405521
> 
> 赞同：1
> 
> 时间：2013-01-18T18:43:19.480
> 
> 标签：session, cookies, asp.net-mvc-4

我们开发了一个带有表单 cookie 授权的 MVC 4 Web 应用程序。一个好的方法是一起使用会话变量和身份验证cookie吗？谢谢你。

我会知道cookie和会话超时之间是否可能进行一些同步。根据我的研究，由于其不同的生命周期，这是有问题的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T19:06:47.160

.NET 4.5 已将 Windows Identity Foundation (WIF) 纳入框架的核心部分，并将基于声明的安全性作为其不可或缺的一部分。借助基于声明的安全性，可以轻松地将自定义信息作为新声明添加到用户的身份中。Dominick Baier 在 PluralSight 中有一个很棒的培训课程，名为[Introduction to Identity and Access Control in .NET 4.5](http://pluralsight.com/training/courses/TableOfContents?courseName=iac-intro&highlight=dominick-baier_iac-intro-m2-principles-identity%2a8#iac-intro-m2-principles-identity)。您可以注册[免费试用](https://pluralsight.com/training/Subscribe/Step1?isTrial=True)以查看此课程。您还可以在[Dominick Baier 的博客](http://leastprivilege.com/)上获得有关 .NET 安全性的良好信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T12:29:22.937

好的，这就是我的回答。经过一些研究和代码测试，最好的解决方案总是从 auth cookie 中读取信息。同时使用 Session 和 cookie 身份验证由于其不同的生命周期而难以控制。例如，如果我们有一个有效的 cookie 身份验证和一个超时会话，那么在下一个请求中，我们将有一个没有任何用户信息的更新会话。

# ios - Xcode 在更改时重建`

> ID：14405524
> 
> 赞同：0
> 
> 时间：2013-01-18T18:43:26.020
> 
> 标签：ios, xcode

当我保存对文件的更改时，如何使 Xcode 自动构建？

如果我需要再次按下那个愚蠢的播放按钮/伸手去拿鼠标，我可能不得不停止为苹果开发。

我非常绝望，我什至考虑使用 Java.robots 在 git 提交时为我点击屏幕

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T18:45:55.430

看看詹金斯——这正是你想要的。第一次设置它有点麻烦，但从长远来看，它会为你节省几个小时。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T18:53:55.333

默认情况下，您可以通过点击 (CMD+B) 来构建而不运行。IDE 的默认行为是在构建时保存修改过的文件，所以如果您只想一直保存和构建，只需点击构建，它会为您完成。

如果您真的想通过打开 XCode 首选项（默认为 Cmd+，或者转到左上角的“XCode”菜单并选择首选项），您甚至可以将 build 的快捷键修改为 cmd+s，然后转到键绑定部分并将“构建”操作键绑定更改为 cmd+s

# vb.net - 套接字客户端和服务器不工作

> ID：14405532
> 
> 赞同：1
> 
> 时间：2013-01-18T18:44:23.507
> 
> 标签：vb.net, sockets, client

```
**Server Code**

Dim serverSocket As Socket
Dim clientSocket As Socket
Dim PubIP as String = "82.XX.XX.XX"
Dim LocalIP as String = "192.XX.XX.XX"

Dim byteData(1023) As Byte

Private Sub Form1_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load
    Dim host As String = Dns.GetHostName
    Dim ip As IPHostEntry = Dns.GetHostEntry(host)
    serverSocket = New Socket(AddressFamily.InterNetwork, SocketType.Stream, ProtocolType.Tcp)
    Dim IpEndPoint As IPEndPoint = New IPEndPoint(System.Net.IPAddress.Parse(PubIP), 8080) 
    Me.Text = IpEndPoint.ToString
    serverSocket.Bind(IpEndPoint) 'it can't bind public ip but i need public ip to run the client from other pc and connect to server for chating.
    serverSocket.Listen(5)
    serverSocket.BeginAccept(New AsyncCallback(AddressOf OnAccept), Nothing)
End Sub

**Client Code**

Dim clientSocket As Socket
Dim byteData(1023) As Byte

Dim PubIP as String = "82.XX.XX.XX"
Dim LocalIP as String = "192.XX.XX.XX"

Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click
    clientSocket = New Socket(AddressFamily.InterNetwork, SocketType.Stream, ProtocolType.Tcp)
    Dim ipAddress As IPAddress = ipAddress.Parse(PubIP)
    Dim ipEndPoint As IPEndPoint = New IPEndPoint(ipAddress, 8080)
    clientSocket.BeginConnect(ipEndPoint, New AsyncCallback(AddressOf OnConnect), Nothing)
End Sub 
```

当我使用 localip 运行服务器时，它运行良好，我只能从我的计算机（服务器运行的地方）连接客户端。如果我尝试从另一台计算机运行客户端，它将无法连接到服务器。

所以我分配了公共 IP，但是当我运行程序时 Visual Studio 显示此错误：请求的地址在其上下文中无效。

所以我被困在这里。如果从我的电脑运行，我只能连接客户端，但我需要将客户端从我的朋友电脑连接到我电脑中的服务器。

欢迎任何替代方式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T19:24:59.757

使用[`IPAddress.Any`](http://msdn.microsoft.com/en-us/library/system.net.ipaddress.any.aspx)而不是特定的 IP 地址来使您的服务器接受所有接口上的连接。

除此之外，由于您提到“本地”和“公共”IP 地址，您需要了解[网络地址转换](http://en.wikipedia.org/wiki/NAT)和[端口转发](http://en.wikipedia.org/wiki/Port_forwarding)。

# java - 本机应用程序获取电池电量

> ID：14405534
> 
> 赞同：1
> 
> 时间：2013-01-18T18:44:28.747
> 
> 标签：java, android, android-ndk, battery

我想在不使用 java 的情况下读取本机应用程序中的当前电池电量。Java中的等价物是：

```
BroadcastReceiver batteryReceiver = new BroadcastReceiver() {
    int scale = -1;
    int level = -1;
    int voltage = -1;
    int temp = -1;
    @Override
    public void onReceive(Context context, Intent intent) {
        level = intent.getIntExtra(BatteryManager.EXTRA_LEVEL, -1);
        scale = intent.getIntExtra(BatteryManager.EXTRA_SCALE, -1);
        temp = intent.getIntExtra(BatteryManager.EXTRA_TEMPERATURE, -1);
        voltage = intent.getIntExtra(BatteryManager.EXTRA_VOLTAGE, -1);
        Log.e("BatteryManager", "level is "+level+"/"+scale+", temp is "+temp+", voltage is "+voltage);
    }
};

IntentFilter filter = new IntentFilter(Intent.ACTION_BATTERY_CHANGED);
registerReceiver(batteryReceiver, filter); 
```

仅使用本机代码怎么可能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T20:44:33.663

请参阅有关 dumpsys 实用程序的主题可能以编程方式运行并读取 IO 输出缓冲区。我发现你要寻找的 C++ 源代码很少。运行 dumpsys 可能需要 root 权限。

[什么是 Android ADB shell“dumpsys”工具，它有什么好处？](https://stackoverflow.com/questions/11201659/android-adb-shell-dumpsys-tool)

[http://source.android.com/tech/input/dumpsys.html](http://source.android.com/tech/input/dumpsys.html)

[http://code.metager.de/source/xref/android/4.1.1/frameworks/base/services/java/com/android/server/BatteryService.java](http://code.metager.de/source/xref/android/4.1.1/frameworks/base/services/java/com/android/server/BatteryService.java)

[http://code.metager.de/source/xref/android/4.1.1/frameworks/native/cmds/dumpsys/dumpsys.cpp](http://code.metager.de/source/xref/android/4.1.1/frameworks/native/cmds/dumpsys/dumpsys.cpp)

[http://code.metager.de/source/xref/android/4.1.1/frameworks/base/services/jni/com_android_server_BatteryService.cpp](http://code.metager.de/source/xref/android/4.1.1/frameworks/base/services/jni/com_android_server_BatteryService.cpp)

[http://code.metager.de/source/xref/android/4.1.1/frameworks/base/services/jni/onload.cpp](http://code.metager.de/source/xref/android/4.1.1/frameworks/base/services/jni/onload.cpp)

如果我是对的，C++ 源代码读取 /sys/class/power_supply 虚拟目录，但随后会发生什么，有人可能会告诉您更多有关 Linux 系统内部细节的信息。大多数代码似乎是 JNI 接口的东西，更新 BatteryService.java 类中的私有成员字段。OnLoad 类注册 jni<->java 钩子，但这不是你需要知道的，仅供参考。

# ruby - 安装 RVM 时出错。错误：需要 BASH 3.2.25（您有 3.1.0(1)-release）

> ID：14405536
> 
> 赞同：1
> 
> 时间：2013-01-18T18:44:31.837
> 
> 标签：ruby, windows, bash, heroku, rvm

我的目标是将本地数据库的内容推送到 Heroku。使用

```
heroku db:push --app my-app 
```

我得到与这个问题相同的错误：[将数据推送到 Heroku 时出错：时区位移超出范围](https://stackoverflow.com/questions/8151571/error-when-pushing-data-to-heroku-time-zone-displacement-out-of-range)

> Taps服务器错误：PGError：错误：时区位移超出范围：“2012-12-19 12:00:00.000000+5895074400”

在上述问题中被广泛接受的解决方案是：

> 使用 Ruby 1.9.2-p290 而不是 1.9.3-p0

为了实施此解决方案并更改我的 Ruby 版本，我正在尝试安装 RVM。当我按照安装说明进行操作时：

> curl -L [https://get.rvm.io](https://get.rvm.io) | bash -s 稳定 --ruby

我收到以下错误：

> 需要 BASH 3.2.25（你有 3.1.0(1)-release）

如何在 Windows 上更新到 Bash 3.2.25？我已经搜索并尝试更新 git、git bash、win-bash。我的 bash.exe 文件显示今天 1/18/13 已修改，但启动后的版本显示为 3.1。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T13:44:16.707

经过更多的搜索、反复试验，我联系了几个推荐 Cygwin 的经验丰富的开发人员。Cygwin 的初始安装和设置并不顺利。有人建议可能与我机器上的现有设置存在冲突。我决定从全新安装 Windows 7 开始，从头开始安装 Cygwin、Ruby、Rails 等。我现在有一个安装了 RVM 的功能齐全的开发环境。喜欢赛格温。

# mysql - mySQL - 如何防止同时访问记录？

> ID：14405539
> 
> 赞同：1
> 
> 时间：2013-01-18T18:44:45.417
> 
> 标签：mysql, concurrency, locking

我正在数据库中创建称为“会话”的记录。我的应用程序的用户将能够找到一个会话，然后连接到它。我想确保没有 2 个用户会尝试连接到同一个会话。我目前的流程是：

1.  搜索符合条件的可用会话。
2.  如果找到，用用户的信息更新数据库中的记录并标记为“不可用”，这样在搜索过程中就找不到了。

我担心的是多个用户可能同时搜索会话，这两个用户都会被告知会话可用，然后只有最后一个用户才能正确连接到会话。

一旦在搜索中找到记录，我如何“锁定”记录，以便任何并发搜索都无法找到它？

# python - 在带有 MultiIndex 列的 pandas 数据框中添加一个字段

> ID：14405544
> 
> 赞同：10
> 
> 时间：2013-01-18T18:45:20.587
> 
> 标签：python, dataframe, pandas, time-series, multi-index

我一直在寻找这个问题的答案，因为它看起来很简单，但还没有找到任何东西。抱歉，如果我错过了什么。我有 pandas 0.10.0 版，我一直在试验以下形式的数据：

```
import pandas
import numpy as np
import datetime
start_date = datetime.datetime(2009,3,1,6,29,59)
r = pandas.date_range(start_date, periods=12)
cols_1 = ['AAPL', 'AAPL', 'GOOG', 'GOOG', 'GS', 'GS']
cols_2 = ['close', 'rate', 'close', 'rate', 'close', 'rate']
dat = np.random.randn(12, 6)
cols = pandas.MultiIndex.from_arrays([cols_1, cols_2], names=['ticker','field'])
dftst = pandas.DataFrame(dat, columns=cols, index=r)
print dftst

ticker                   AAPL                GOOG                  GS          
field                   close      rate     close      rate     close      rate
2009-03-01 06:29:59  1.956255 -2.074371 -0.200568  0.759772 -0.951543  0.514577
2009-03-02 06:29:59  0.069611 -2.684352 -0.310006  0.730205 -0.302949 -0.830452
2009-03-03 06:29:59  2.077130 -0.903784  0.449857 -1.357464 -0.469572 -0.008757
2009-03-04 06:29:59  1.585358 -2.063672  0.600889 -1.741606 -0.299875  0.565253
2009-03-05 06:29:59  0.269123  0.226593  1.132663  0.485035  0.796858 -0.423112
2009-03-06 06:29:59  0.094879 -1.040069  0.613450 -0.175266 -0.065172  3.374658
2009-03-07 06:29:59 -1.255167 -0.326474  0.437053 -0.231594  0.437703 -0.256811
2009-03-08 06:29:59  0.115454 -1.096841 -1.189211 -0.208098 -0.807860  0.158198
2009-03-09 06:29:59  2.142816  0.173878 -0.160932  0.367309 -0.449765 -0.325400
2009-03-10 06:29:59  0.470669 -0.346805  1.152648  0.844632  1.031602 -0.012502
2009-03-11 06:29:59 -1.366954  0.452177  0.010713 -1.331553  0.226781  0.456900
2009-03-12 06:29:59  2.182409  0.890023 -0.627318 -1.516574 -1.565416 -0.694320 
```

如您所见，我正在尝试表示 3d 时间序列数据。所以我有一个时间序列索引和 MultiIndex 列。我对切片数据很满意。如果我只想要收盘数据的尾随平均值，我可以执行以下操作：

```
pandas.rolling_mean(dftst.ix[:,::2], 5)

ticker                   AAPL      GOOG        GS
field                   close     close     close
2009-03-01 06:29:59       NaN       NaN       NaN
2009-03-02 06:29:59       NaN       NaN       NaN
2009-03-03 06:29:59       NaN       NaN       NaN
2009-03-04 06:29:59       NaN       NaN       NaN
2009-03-05 06:29:59  0.410966 -0.412356  0.722951
2009-03-06 06:29:59 -0.103187 -0.497165  0.137731
2009-03-07 06:29:59  0.000194 -0.645375 -0.298504
2009-03-08 06:29:59 -0.074036 -0.541717 -0.035906
2009-03-09 06:29:59 -0.391863 -0.671918 -0.554380
2009-03-10 06:29:59 -0.336397 -0.411845 -0.992615
2009-03-11 06:29:59 -0.251645 -0.289512 -0.458246
2009-03-12 06:29:59 -0.138925  0.244572 -0.230743 
```

我不能做的是创建一个新字段，例如 avg_close 并分配给它。理想情况下，我想做以下事情：

dftst[:,'avg_close'] = pandas.rolling_mean(dftst.ix[:,::2], 5)

即使我交换 MultiIndex 的级别，我也无法使其工作：

```
dftst = dftst.swaplevel(1,0,axis=1)
print dftst['close']

ticker                   AAPL      GOOG        GS
2009-03-01 06:29:59  1.178557 -0.505672 -0.336645
2009-03-02 06:29:59  0.234305  0.581429 -0.232252
2009-03-03 06:29:59 -0.734798  0.117810  1.658418
2009-03-04 06:29:59 -1.555033 -0.298322  0.127408
2009-03-05 06:29:59  0.244102 -1.030041 -0.562039
2009-03-06 06:29:59 -0.297454  1.150564 -1.930883
2009-03-07 06:29:59  0.818910 -0.905296  1.219946
2009-03-08 06:29:59  0.586816  0.965242  0.928546
2009-03-09 06:29:59 -0.357693  0.071455  0.072956
2009-03-10 06:29:59  0.651803 -0.685937  0.805779
2009-03-11 06:29:59  0.569802 -0.062447 -1.349261
2009-03-12 06:29:59 -1.886335  0.205778 -0.864273

dftst['avg_close'] = pandas.rolling_mean(dftst['close'], 3)

----> 1 dftst['avg_close'] = pandas.rolling_mean(dftst['close'], 3)

/usr/local/lib/python2.7/dist-packages/pandas/core/frame.pyc in
__setitem__(self, key, value)    2041         else:    2042             # set column

-> 2043             self._set_item(key, value)    2044     2045     def _boolean_set(self, key, value):

/usr/local/lib/python2.7/dist-packages/pandas/core/frame.pyc in
_set_item(self, key, value)    2077         """    2078         value = self._sanitize_column(key, value)
-> 2079         NDFrame._set_item(self, key, value)    2080     2081     def insert(self, loc, column, value):

/usr/local/lib/python2.7/dist-packages/pandas/core/generic.pyc in
_set_item(self, key, value)
    544 
    545     def _set_item(self, key, value):
--> 546         self._data.set(key, value)
    547         self._clear_item_cache()
    548 

/usr/local/lib/python2.7/dist-packages/pandas/core/internals.pyc in set(self, item, value)
    951         except KeyError:
    952             # insert at end

--> 953             self.insert(len(self.items), item, value)
    954 
    955         self._known_consolidated = False

/usr/local/lib/python2.7/dist-packages/pandas/core/internals.pyc in insert(self, loc, item, value)
    963 
    964         # new block

--> 965         self._add_new_block(item, value, loc=loc)
    966 
    967         if len(self.blocks) > 100:

/usr/local/lib/python2.7/dist-packages/pandas/core/internals.pyc in
_add_new_block(self, item, value, loc)
    992             loc = self.items.get_loc(item)
    993         new_block = make_block(value, self.items[loc:loc+1].copy(),
--> 994                                self.items)
    995         self.blocks.append(new_block)
    996 

/usr/local/lib/python2.7/dist-packages/pandas/core/internals.pyc in make_block(values, items, ref_items)
    463         klass = ObjectBlock
    464 
--> 465     return klass(values, items, ref_items, ndim=values.ndim)
    466 
    467 # TODO: flexible with index=None and/or items=None

/usr/local/lib/python2.7/dist-packages/pandas/core/internals.pyc in
__init__(self, values, items, ref_items, ndim)
     30         if len(items) != len(values):
     31             raise AssertionError('Wrong number of items passed (%d vs %d)'
---> 32                                  % (len(items), len(values)))
     33 
     34         self._ref_locs = None

AssertionError: Wrong number of items passed (1 vs 3) 
```

如果我的列不是 MultiIndex，我可以指定执行以下操作：

```
start_date = datetime.datetime(2009,3,1,6,29,59)
r = pandas.date_range(start_date, periods=12)
cols = ['AAPL', 'GOOG', 'GS']
dat = np.random.randn(12, 3)
dftst2 = pandas.DataFrame(dat, columns=cols, index=r)
print dftst2

                         AAPL      GOOG        GS
2009-03-01 06:29:59  2.476787  2.386037 -0.777566
2009-03-02 06:29:59 -0.820647  1.006159 -0.590240
2009-03-03 06:29:59  0.433960  0.104458  0.282641
2009-03-04 06:29:59  0.300190 -0.300786 -1.780412
2009-03-05 06:29:59 -0.247919  1.616572  1.145594
2009-03-06 06:29:59 -0.779130  0.695256  0.845819
2009-03-07 06:29:59  0.572073  0.349394 -3.557776
2009-03-08 06:29:59  2.019885  0.358346  1.350812
2009-03-09 06:29:59  0.472328 -0.334223 -0.605862
2009-03-10 06:29:59 -1.570479  0.410808  0.616515
2009-03-11 06:29:59  1.177562 -0.240396 -2.126951
2009-03-12 06:29:59  0.311566 -1.743213  0.382617 
```

要添加一个字段，基于另一个字段，我可以执行以下操作：

```
dftst2['GOOG_avg'] = pandas.rolling_mean(dftst2['GOOG'], 3)
print dftst2

                         AAPL      GOOG        GS  GOOG_avg
2009-03-01 06:29:59  2.476787  2.386037 -0.777566       NaN
2009-03-02 06:29:59 -0.820647  1.006159 -0.590240       NaN
2009-03-03 06:29:59  0.433960  0.104458  0.282641  1.165551
2009-03-04 06:29:59  0.300190 -0.300786 -1.780412  0.269944
2009-03-05 06:29:59 -0.247919  1.616572  1.145594  0.473415
2009-03-06 06:29:59 -0.779130  0.695256  0.845819  0.670347
2009-03-07 06:29:59  0.572073  0.349394 -3.557776  0.887074
2009-03-08 06:29:59  2.019885  0.358346  1.350812  0.467666
2009-03-09 06:29:59  0.472328 -0.334223 -0.605862  0.124506
2009-03-10 06:29:59 -1.570479  0.410808  0.616515  0.144977
2009-03-11 06:29:59  1.177562 -0.240396 -2.126951 -0.054604
2009-03-12 06:29:59  0.311566 -1.743213  0.382617 -0.524267 
```

我曾尝试使用 Panel 对象，但到目前为止还没有找到一种快速的方法来添加我有 MultiIndex 列的字段，理想情况下，其他级别的列将被广播。如果有其他帖子回答了这个问题，我深表歉意。任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-09T20:01:59.210

如果您不想使用面板，您也可以（作为一种解决方法，因为没有真正的 API 可以完全满足您的需求）考虑一些重塑功能。不过，我不建议在庞大的数据集上使用它：为此使用面板。

```
In [30]: df = dftst.stack(0)

In [31]: df['close_avg'] = pd.rolling_mean(df.close.unstack(), 5).stack()

In [32]: df
Out[32]: 
field                          close      rate  close_avg
                    ticker                               
2009-03-01 06:29:59 AAPL   -0.223042  0.554996        NaN
                    GOOG    0.060127 -0.333992        NaN
                    GS      0.117626 -1.256790        NaN
2009-03-02 06:29:59 AAPL   -0.513743 -0.402661        NaN
                    GOOG    0.059828 -0.125288        NaN
                    GS     -0.336196 -0.510595        NaN
2009-03-03 06:29:59 AAPL    0.142202 -1.038470        NaN
                    GOOG   -1.099251 -0.892581        NaN
                    GS      1.698086  0.885023        NaN
2009-03-04 06:29:59 AAPL   -1.125821  0.413005        NaN
                    GOOG    0.424290  1.106983        NaN
                    GS      0.047158  0.680714        NaN
2009-03-05 06:29:59 AAPL    0.470050  1.845354  -0.250071
                    GOOG    0.132956 -0.488800  -0.084410
                    GS      0.129190  0.208077   0.331173
2009-03-06 06:29:59 AAPL   -0.087360 -2.102512  -0.222934
                    GOOG    0.165100 -0.134886  -0.063415
                    GS      0.167720  0.082480   0.341192
2009-03-07 06:29:59 AAPL   -0.768542 -0.176076  -0.273894
                    GOOG    0.417694  2.257074   0.008158
                    GS     -1.744730 -1.850185   0.059485
2009-03-08 06:29:59 AAPL   -0.297363 -0.633828  -0.361807
                    GOOG   -1.096703 -0.572138   0.008667
                    GS      0.890016 -2.621563  -0.102129
2009-03-09 06:29:59 AAPL    1.038579  0.053330   0.071073
                    GOOG   -0.614050  0.607944  -0.199001
                    GS     -0.882848  0.596801  -0.288130
2009-03-10 06:29:59 AAPL   -0.255226  0.058178  -0.073982
                    GOOG    1.761861  1.841751   0.126780
                    GS     -0.549998 -1.551281  -0.423968
2009-03-11 06:29:59 AAPL    0.413522  0.149089   0.026194
                    GOOG   -2.964163  1.825312  -0.499072
                    GS     -0.373303  1.137001  -0.532173
2009-03-12 06:29:59 AAPL   -0.924776  1.238546  -0.005053
                    GOOG   -0.985956 -0.906590  -0.779802
                    GS     -0.320400  1.239681  -0.247307 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T18:30:24.757

我不知道如何进行您想要的广播，但对于严格的分配，这应该这样做：

```
dftst[(('GOOG', 'avg_close'))] = 7 
```

更具体地说，但仍然没有广播：

```
for tic in cols_1:
   dftst[(tic, 'avg_close')] = pandas.rolling_mean(dftst[(tic, 'close')],5) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-09-21T14:33:24.027

这是十年前的事，但我遇到了完全相同的问题。这是一种 1 行的方式来做你正在寻找的东西。pandas 0.18 已经引入，所以滚动平均值现在有点不同，但你明白了。

```
avg_close = dftst.xs('close', axis=1, level=1).rolling(5).mean()   
dftst[zip(avg_close.columns, ['avg_close']*len(avg_close.columns))] = avg_close 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-01T05:41:32.477

对于这个特定问题，似乎使用 Panel 对象是可行的。我做了以下事情（从我的原始帖子中获取 dftst）：

```
pn = dftst.T.to_panel()
print pn

Out[83]: 
<class 'pandas.core.panel.Panel'>
Dimensions: 12 (items) x 3 (major_axis) x 2 (minor_axis)
Items axis: 2009-03-01 06:29:59 to 2009-03-12 06:29:59
Major_axis axis: AAPL to GS
Minor_axis axis: close to rate 
```

如果我通过执行以下操作将 ('close', 'rate') 移动到项目：

```
pn = pn.transpose(2,0,1)
print pn

Out[91]: 
<class 'pandas.core.panel.Panel'>
Dimensions: 2 (items) x 12 (major_axis) x 3 (minor_axis)
Items axis: close to rate
Major_axis axis: 2009-03-01 06:29:59 to 2009-03-12 06:29:59
Minor_axis axis: AAPL to GS 
```

现在我可以进行时间序列操作并将其作为字段添加到 Panel 对象中：

```
pn['avg_close'] = pandas.rolling_mean(pn['close'], 5)
print pn

Out[93]: 
<class 'pandas.core.panel.Panel'>
Dimensions: 3 (items) x 12 (major_axis) x 3 (minor_axis)
Items axis: close to avg_close
Major_axis axis: 2009-03-01 06:29:59 to 2009-03-12 06:29:59
Minor_axis axis: AAPL to GS

print pn['avg_close']

Out[94]: 
ticker                   AAPL      GOOG        GS
2009-03-01 06:29:59       NaN       NaN       NaN
2009-03-02 06:29:59       NaN       NaN       NaN
2009-03-03 06:29:59       NaN       NaN       NaN
2009-03-04 06:29:59       NaN       NaN       NaN
2009-03-05 06:29:59  0.303719 -0.129300 -0.037954
2009-03-06 06:29:59 -0.006839  0.206331  0.336467
2009-03-07 06:29:59  0.128299  0.174935  0.698275
2009-03-08 06:29:59  0.471010 -0.137343  0.671049
2009-03-09 06:29:59 -0.279855 -0.033427  0.848610
2009-03-10 06:29:59 -0.516032  0.260944  0.373046
2009-03-11 06:29:59 -0.456213  0.164710  0.910448
2009-03-12 06:29:59 -0.799156  0.544132  0.862764 
```

我实际上对 Panel 对象还有一些其他问题，但我会将这些问题留到另一篇文章中。

# javascript - 你如何实现一个由 JavaScript 中的时钟解析的 monad 承诺？

> ID：14405549
> 
> 赞同：1
> 
> 时间：2013-01-18T18:45:34.660
> 
> 标签：javascript, monads

在观看[Douglas Crokfrod 关于 monads 和 promises 的演讲时，](http://www.youtube.com/watch?feature=player_embedded&v=dkZFtimgAcM#t=52m44s)我对 52:40 提出的一个问题感兴趣。如何使用 Monads 实现看门狗计时器，以便在调用失败函数之前，可以保持承诺或仅在未决状态中存在一段可定义的时间长度。这种模式是否有一个普遍接受的名称？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T21:57:47.890

不是，杰森。查看 Crockford 在 GitHub 上的实现，它没有适合该行为的钩子。

也就是说，在典型的 Promise 范式中，有比 Crockford 代码授予的选项更多的选项。

查看 AJAX 库。尽管很多人不知道，但很多 AJAX 库（包括 jQuery）都会返回 Promise。

要在他的代码中执行此操作，您可以挂钩一个子句，该子句具有一个计时器，该计时器`.break`是基于与承诺的参数一起提交的时间。

否则，您可以执行以下操作：

```
var vow = VOW.make(),

    last_promise = vow.when()
                      .when()
                      .when()
                      .when() /*...*/;

(function () {
    var vow = VOW.make(),
        time_over = false,
        time_limit = 30 * 1000,
        timer_handle,

        success = function (value) {
            if (time_over) { vow["break"]("Time's up!"); }
            else {
                clearInterval(timer_handle);
                vow.keep(value);
            }
        };

    trailing_promise.when(success, /* fail */);

    return vow.promise;

}()).when(/* ... */)
    .when()
    .when(); 
```

我认为，类似的东西应该适用于那里给出的东西。

就个人而言，在看过演讲并阅读了他的实现之后，我认为我更喜欢承诺保留他们的线性队列功能（`done`，`fail`或`success/fail`或`ready/fail`或其他），但我见过的大多数库都制作了时间队列（`when`，，`next`等）与诺言分开。

所以这里有两个相互竞争的队列，真的。一个订阅事件的地方（比如`.addEventListener`：当动作发生时，所有的监听器同时被调用），一个订阅下一个结果的最终返回（比如收听正在订阅的东西）一个事件列表器）。

在 Crockford 的最小实现中，更像是只能有一个监听器，然后订阅者监听前一个订阅者的最后一个订阅者...

...并且将多个指令链接到同一队列中的唯一方法是缓存返回：

```
var level_0 = VOW.make(),
    level_1 = level_0.when(/* ... , ... */),
    level_2 = level_1.when(/* ... , ... */);

level_1.when(/* more stuff */);
level_1.when(/* even more  */);

level_2.when()
       .when()
       .when();

// ...eventually.......

level_0.keep("stuff"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T21:58:37.463

我一直在玩 jQuery 的 Deferred 方法（虽然我找不到语句，但我认为它是单子的），看起来这会起作用（[演示](http://jsfiddle.net/3kKBc/)）（这看起来太容易了）

```
function watchdog(promise, time) {
    setTimeout(function() {
        promise.abort();
    }, time);
}; 
```

使用JSFiddle中的[Ajax 测试挂钩的示例：](http://doc.jsfiddle.net/use/echo.html)

```
console.log("Waiting 2,000ms for something we think will take 3,000ms to return");
watchdog(
  $.post('/echo/html/', { delay: 3 })
   .done(function() {console.log("Got It!");})
   .fail(function() {console.log('took too long (but I knew that)!');})
   .always(function() {console.log('Cleaning up no matter what');})
  , 2000);

console.log("Waiting 3,000ms for something we think will take 2,000ms to return");
watchdog(
  $.post('/echo/html/', { delay: 2 })
   .done(function() {console.log("Got It (but I knew that)!");})
   .fail(function() {console.log('took too long!');})
   .always(function() {console.log('Cleaning up no matter what');})
  , 3000); 
```

这是生成的日志：

```
Waiting 2,000ms for something we think will take 3,000ms to return
Waiting 3,000ms for something we think will take 2,000ms to return

took too long (but I knew that)!
Cleaning up no matter what
Got It (but I knew that)!
Cleaning up no matter what 
```

# ios - iOS：错误的身份验证数据，来自 Twitter 的代码 215

> ID：14405550
> 
> 赞同：2
> 
> 时间：2013-01-18T18:45:38.927
> 
> 标签：ios, oauth, twitter

我正在我的 iPhone 4 上开发和测试一个应用程序，它很棒。我测试了我的推特代码，它运行良好。我会检索用户的帐户，然后关注某个帐户。

今天，我尝试在另外两台设备上安装和测试该应用程序，*但它无法正常工作*！

响应：

```
{"errors":[{"message":"Bad Authentication data","code":215}]} 
```

编码：

```
- (void)followApp {
    if (!self.account) {
        [self _signInWithHandler:^{
            [self followApp];
        }];
        return;
    }

    NSURL *feedURL = [NSURL URLWithString:@"https://api.twitter.com/1.1/friendships/create.json"];
    NSDictionary *parameters = @{
    @"follow" : @"true",
    @"screen_name" : [MCAppManager sharedManager].applicationTwitterHandle
    };

    TWRequest *twitterFeed = [[TWRequest alloc] initWithURL:feedURL
                                                 parameters:parameters
                                              requestMethod:TWRequestMethodPOST];

    twitterFeed.account = self.account;
    // Perform the twitter request
    [twitterFeed performRequestWithHandler:^(NSData *responseData, NSHTTPURLResponse *urlResponse, NSError *error) {
        if (!error) {
            NSLog(@"response: %@", [[NSString alloc] initWithData:responseData encoding:NSUTF8StringEncoding]);
        } else {
            dispatch_async(dispatch_get_main_queue(), ^{
                self.isFollowing = NO;
                MCAlertError([error localizedDescription]);
            });
        }
    }];

    self.isFollowing = YES;
} 
```

* * *

**编辑：**

好的，似乎原因是其他设备上的 Twitter 帐户是在没有密码的情况下添加的。我去了设置应用程序，账户就在那里，没有密码。

这并不是真正的最终答案，但至少它解释了错误的来源。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-10T14:27:53.200

似乎没有记录的方法可以首先执行凭证检查。

如果出现授权错误，您必须检查结果并通知用户。

```
//[...]
[twitterFeed performRequestWithHandler:^(NSData *responseData, NSHTTPURLResponse *urlResponse, NSError *error) {

    if (error == nil) {

        NSError *jsonError = nil;

        id data = [NSJSONSerialization JSONObjectWithData:responseData
                                                  options:NSJSONReadingMutableLeaves
                                                    error:&jsonError];
        if ([urlResponse statusCode] == 200) {

            if (data) {

                NSLog(@"response: %@", data);
            } else {

                dispatch_async(dispatch_get_main_queue(), ^{
                    self.isFollowing = NO;
                    MCAlertError([jsonError localizedDescription]);
                });
            }
        } else if ([urlResponse statusCode] == 400) {

            //Bad authorization data
            if ([[[[data objectForKey:@"errors"] objectAtIndex:0] objectForKey:@"code"] intValue] == 215) {

                dispatch_async(dispatch_get_main_queue(), ^{
                    self.isFollowing = NO;
                    MCAlertError(@"To use this feature you need a twitter account properly authenticated in your iOS settings");
                });
                self.account = nil;
            } else {

                dispatch_async(dispatch_get_main_queue(), ^{
                    self.isFollowing = NO;
                    MCAlertError(@"Generic service error");
                });
            }
        } else {

            dispatch_async(dispatch_get_main_queue(), ^{
                self.isFollowing = NO;
                MCAlertError(@"Generic service error");
            });
        }
    } else {
        dispatch_async(dispatch_get_main_queue(), ^{
            self.isFollowing = NO;
            MCAlertError([error localizedDescription]);
        });
    }
}];
//[...] 
```

# jquery - 默认链接颜色保持活动状态，直到鼠标单击另一个链接

> ID：14405552
> 
> 赞同：-1
> 
> 时间：2013-01-18T18:45:45.727
> 
> 标签：jquery, html, css

当您进入站点时，我的默认链接颜色处于活动状态，但是当鼠标单击另一个链接并且新的当前页面现在处于活动状态时，我似乎无法将其删除。这是我的代码。

JS

```
$("a").on("click", function() { 
    $(".active").removeClass("active"); 
}); 
```

CSS

```
.active{ 
    color: #ffff00 
    !important; 
}

a { 
    text-decoration: none; 
    z-index: 5; 
    font-family: arial, "Trebuchet MS"; 
    cursor: pointer; 
    color: #2777A3; 
} 
```

HTML

```
<a href="http://www.pro.com/" target="_self" class="active">Home</a>` 
```

![默认情况下主页处于活动状态，但是当单击另一个链接时，新链接不显示活动颜色](../Images/84950b7ceed1ddabf912e73bca7d602a.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T18:52:17.983

```
$("a").click(function() {
    $(".active").removeClass("active");
    $(this).addClass("active");
}); 
```

[http://jsfiddle.net/UbVVH/1/](http://jsfiddle.net/UbVVH/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T18:50:57.790

这是你想要的吗？

```
$('a').click(function(){
    if ( $(this).hasClass('active') ) {
        $(this).removeClass('active')
    } else {
        $(this).addClass('active')
    }

}) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-18T18:58:31.793

如果你只有 HTML、CSS 和 JQuery，你只需要`active`在每个页面的正确链接上设置类。您不需要使用 JQuery 删除类。

似乎正在发生的事情是，当用户单击链接时，页面会重新加载，这会重置 CSS 并将`active`类`Home`再次放在链接上。每次用户点击，页面都会刷新并重置类。

因此，JQuery 将有效地删除该类，但随后单击链接会将浏览器发送到新页面并重置 CSS。

例子：

家

```
<a href="http://www.pro.com/" target="_self" class="active">Home</a>
<a href="http://www.pro.com/products" target="_self">Products</a>
<a href="http://www.pro.com/solutions" target="_self">Solutions</a> 
```

其他第 1 页

```
<a href="http://www.pro.com/" target="_self">Home</a>
<a href="http://www.pro.com/products" target="_self" class="active">Products</a>
<a href="http://www.pro.com/solutions" target="_self">Solutions</a> 
```

其他第 2 页

```
<a href="http://www.pro.com/" target="_self">Home</a>
<a href="http://www.pro.com/products" target="_self">Products</a>
<a href="http://www.pro.com/solutions" target="_self" class="active">Solutions</a> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-18T18:53:08.180

好吧，如果您单击一个链接，我猜它会打开一个新页面，因此活动链接会在每次页面加载时重置。因此，您可能想要做的是检查您是否在每个链接的当前页面上。

所以也许在php中：

```
<a href="http://www.pro.com/" target="_self" class="<?php echo ($page === 'home' ?  'active' : ''; ?>">Home</a> 
```

如果你想做纯 JavaScript：

```
$(document).ready(function()
{
    var path = window.location.pathname.toString().split('/')[0];

    $("a.active").removeClass("active");
    $("a." + path).addClass("active");

}); 
```

确保您的链接具有根据路径映射到的名称：

```
<a href="http://www.pro.com/" target="_self" class="home">Home</a>` 
```

# c# - LINQ 错误初始化器成员声明器无效

> ID：14405553
> 
> 赞同：1
> 
> 时间：2013-01-18T18:45:45.777
> 
> 标签：c#, asp.net-mvc, linq

我是一个相当初级的 C# 开发人员，如果这是微不足道的，请原谅，但我在下面指出的代码行中提出了这个错误“无效的初始化程序成员声明器”。

有人可以解释这意味着什么，我该如何解决/实现这个结果？我所有的数据注释都已经在 PODetail 中应用过一次，这就是我不想在这里也重复这些属性的原因。

```
public class PODetailsListViewModel : IViewModelList<PODetail, PODetailsListViewModel>, IEntity
    {
        public int Id { get; set; }

        public string EntityDescription
        {
            get
            { return this.Id.ToString(); }
        }

        public PODetail PODetail { get; set; }

        public IEnumerable<PODetailsListViewModel> ConvertClassToViewModel(IEnumerable<PODetail> poDetails)
        {
            IEnumerable<PODetailsListViewModel> contactGrid =
                from l in poDetails.ToList()
                select new PODetailsListViewModel()
                {
                    Id = l.Id,
                    PODetail.POHeaderId = l.POHeaderId, <===== ERROR on this Line
                    ....
                };

            return contactGrid;
        } 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-18T18:48:26.120

您无法在这样的类初始化程序中访问复杂的对象属性（当您尝试使用该`PODetail.POHeaderId`属性时）。您可能必须实施一个小解决方法：使用您已有的信息创建一个匿名对象的集合，然后立即重建一个具体的`PODetailsListViewModel`s 列表：

```
var contactGrid = from l in poDetails.ToList()
                  select new {
                  {
                       Id = l.Id,
                       POHeaderId = l.POHeaderId
                       ...
                  }; 
```

然后您可以手动重新创建您要查找的内容：

```
var someNewCollection = New List(Of PODetailsListViewModel);
foreach (var item in contactGrid)
    var model = new PODetailsListViewModel()
    {
         Id = item.Id
    };
    model.PODetail = new PODetailModel() /* replace with actual class name */
    {
        POHeaderId = item.POHeaderId
    };
    someNewCollection.Add(model);
}
return someNewCollection; 
```

**编辑**：或者你可以嵌套初始化器：

```
var contactGrid = from l in poDetails.ToList()
                  select new PODetailsListViewModel() {
                  {
                       Id = l.Id,
                       PODetail = new PODetailModel()
                       {
                           POHeaderId = l.POHeaderId
                       },
                       ...
                  }; 
```

# android - 停止在 Android 中通过 Zxing 扫描条码

> ID：14405554
> 
> 赞同：0
> 
> 时间：2013-01-18T18:45:48.553
> 
> 标签：android, timer, qr-code, zxing, scanning

我正在开发一个使用 Zxing 库来读取二维码的 Android 应用程序。现在我差不多完成了，只剩下一个问题。

我需要应用程序在某些事件后停止扫描 10 秒。我已经让线程休眠 10 秒，这不是我想要的方式。我想应用一切正常。但它不应该让用户知道它没有扫描任何东西。

你能解释一下如何做到这一点。我可以使用计时器方法。但是我应该在 Zxing 中的哪个方法停止 10 秒？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T18:55:32.743

检查文件**InactivityTimer.java**，有这一行：

```
private static final int INACTIVITY_DELAY_SECONDS = 5 * 60; 
```

在那里您可以看到超时设置为 5 分钟。只需修改这个值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T13:59:56.147

我让它按预期工作。所有的解码都是通过`handleDecode`Capture 活动类中的方法完成的。所以我在里面初始化了一个布尔变量`onCreate`，

```
boolean isTensecondsFinished = ture; 
```

然后我检查`isTensecondsFinished`解码二维码的变量。像这样，

```
public void handleDecode(Result rawResult, Bitmap barcode) {
    inactivityTimer.onActivity();
    lastResult = rawResult;
    ResultHandler resultHandler = ResultHandlerFactory.makeResultHandler(
            this, rawResult);

    boolean fromLiveScan = barcode != null;
    if (fromLiveScan) {
        // historyManager.addHistoryItem(rawResult, resultHandler);
        // Then not from history, so beep/vibrate and we have an image to
        // draw on
        if (isTenSecondsFinished) {
            isTenSecondsFinished = false;
            Timer tenSecondsTimer = new Timer();
            tenSecondsTimer.schedule(new TimerTask() {

                @Override
                public void run() {
                    isTenSecondsFinished = true;

                }
            }, 10 * 1000);
                            //Do the decoding stuff here then.
                    }
            }
} 
```

我认为这是最简单的解决方案。

# tfs - TFS 中错误的自定义工作流程

> ID：14405556
> 
> 赞同：0
> 
> 时间：2013-01-18T18:45:50.580
> 
> 标签：tfs, tfs-2012

我在 tfs 2012 中更新了模板中的错误，以反映我们的错误跟踪的自定义工作流程。一切正常，直到设置关闭日期字段的最终转换被击中。发生此转换时，我收到错误消息：TF237165：由于服务器上的验证错误，Team Foundation 无法更新工作项。这可能是因为工作项类型已被修改或...

注释掉字段分配代码允许该过程完成而不会出错。将更改后的工作流程与开箱即用的工作流程进行比较时，我没有看到任何明显的东西。

这是自定义工作流程的 xml：

```
<WORKFLOW>
  <STATES>
    <STATE value="New">
      <FIELDS>
        <FIELD refname="Microsoft.VSTS.Common.ClosedDate">
          <EMPTY />
        </FIELD>
      </FIELDS>
    </STATE>
    <STATE value="Approved">
      <FIELDS>
        <FIELD refname="Microsoft.VSTS.Common.ClosedDate">
          <EMPTY />
        </FIELD>
      </FIELDS>
    </STATE>
    <STATE value="Fixed in Dev">
      <FIELDS>
        <FIELD refname="Microsoft.VSTS.Common.ClosedDate">
          <EMPTY />
        </FIELD>
      </FIELDS>
    </STATE>

    <STATE value="Deployed">
      <FIELDS>
        <FIELD refname="Microsoft.VSTS.Common.ClosedDate">
          <EMPTY />
        </FIELD>
      </FIELDS>
    </STATE>

    <STATE value="Verified">
      <FIELDS>
        <FIELD refname="Microsoft.VSTS.Common.ClosedDate">
          <EMPTY />
        </FIELD>
      </FIELDS>
    </STATE>

    <STATE value="Resolved">
      <FIELDS>
        <FIELD refname="Microsoft.VSTS.Scheduling.Effort">
          <READONLY />
        </FIELD>
      </FIELDS>
    </STATE>                
  </STATES>

  <TRANSITIONS>
    <TRANSITION from="" to="New">
      <REASONS>
        <DEFAULTREASON value="New defect reported" />
              <REASON value="Build Failure" />
      </REASONS>         
    </TRANSITION>
    <TRANSITION from="New" to="Fixed in Dev">
      <REASONS>
        <DEFAULTREASON value="Bug fixed" />
      </REASONS>
    </TRANSITION>
    <TRANSITION from="Fixed in Dev" to="Deployed">
      <REASONS>
        <DEFAULTREASON value="Fix deployed to test" />
      </REASONS>
    </TRANSITION>
    <TRANSITION from="Deployed" to="Verified">
      <REASONS>
        <DEFAULTREASON value="Fix is verified in test" />
      </REASONS>          
    </TRANSITION>
    <TRANSITION from="Verified" to="Resolved">
      <REASONS>
        <DEFAULTREASON value="Bug resolved" />
      </REASONS>
      <FIELDS>
        <FIELD refname="Microsoft.VSTS.Common.ClosedDate">
          <SERVERDEFAULT from="clock" />
        </FIELD>
      </FIELDS>
    </TRANSITION>        
  </TRANSITIONS>
</WORKFLOW> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T12:22:08.147

我猜`<EMPTY>`在：

```
<STATE value="Verified">
  <FIELDS>
    <FIELD refname="Microsoft.VSTS.Common.ClosedDate">
      <EMPTY />
    </FIELD>
  </FIELDS>
</STATE> 
```

与分配冲突。

尝试将您`<EMPTY>`的 's 移动到转换而不是状态。这样当有人移动到一个状态时，该字段仍然会被清空，你会得到相同的结果，只是实现不同。

# iphone - 知道 MFMailComposeViewController 何时消失

> ID：14405562
> 
> 赞同：2
> 
> 时间：2013-01-18T18:46:20.937
> 
> 标签：iphone, ios, ipad

有没有办法知道 MFMailComposeViewController 何时被解雇？

发送电子邮件时控制器会自动消失。

我曾尝试使用 mailComposeController:didFinishWithResult:error: 但是当触发此方法时，控制器仍然可见。

我试图添加一个 viewWillDisappear 方法，但 MFMailComposeViewController 没有触发它。

我怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-18T18:56:01.307

```
- (void)mailComposeController:(MFMailComposeViewController*)controller didFinishWithResult:(MFMailComposeResult)result error:(NSError*)error
{

 [self dismissViewControllerAnimated:YES completion:^{
    NSLog(@"Here You van Get CallBack as MailComposer Has Dissmissed");
 //So do whatever you want......
}];
} 
```

`Cancel,save or Send`每当单击邮件按钮时都会调用此方法。来自 Apple 文档：-

您对此方法的实现应该关闭邮件撰写视图。此方法的实现是可选的，但在意料之中。

如果用户选择发送由该接口创建的电子邮件，则该电子邮件应在调用此方法时在用户的 Mail 程序中排队。如果在排队电子邮件消息时发生错误，则错误参数包含一个错误对象，指示发生的故障类型。

[查看详细信息](http://developer.apple.com/library/ios/#documentation/MessageUI/Reference/MFMailComposeViewControllerDelegate_protocol/Reference/Reference.html)

# entity-framework - 无法将 IBM DB2 实体提供程序与 F# TypeProviders 一起使用

> ID：14405566
> 
> 赞同：4
> 
> 时间：2013-01-18T18:46:28.183
> 
> 标签：entity-framework, f#, db2, type-providers

我正在尝试测试新的 F# 类型提供程序，但我无法让它与我们的 DB2 数据库很好地配合使用。这是我的建设者：

```
SqlEntityConnection<ConnectionString="Server=<host>:<port>;Database=<db>;UID=<uid>;PWD=<pwd>", Provider="IBM.Data.DB2"> 
```

所有适当的库似乎都已安装和配置，但我一直收到错误

```
Error reading schema. error 7001: Failed to find or load the registered .Net Framework Data Provider. 
```

我不知道在这里做什么。我在我的项目中引用了 IBM.Data.DB2、IBM.Data.DB2.Entity 和 IBM.Data.Informix。我尝试了[这个问题](https://stackoverflow.com/questions/979473/does-net-framework-4-0-have-features-for-connecting-to-db2/2009262#2009262)中的建议来修复我的 machine.config 并将其应用于 app.config 。似乎没有任何效果。我在这里想念什么？

# ember.js - 为模型对象预取关系的最佳方法是什么？（非延迟加载）

> ID：14405569
> 
> 赞同：1
> 
> 时间：2013-01-18T18:46:53.173
> 
> 标签：ember.js, ember-data

我有一个模型

```
App.User = DS.Model.extend({
    email: DS.attr('string'),
    first_name: DS.attr('string')
    });

App.Profile = DS.Model.extend({
    user: DS.belongsTo('App.User'),
    language: DS.belongsTo('App.Language')
    });

App.Language = DS.Model.extend({
    name: DS.attr('string')
    }); 
```

在控制器中为用户获取语言的正确方法是什么？例如，我想保存一个项目并将语言设置为当前用户语言。

```
var lang = currentUser.get('profile').get('language')
App.Album.createRecord({
        'name': data.get('name'),
        'language': null
    }); 
```

第一次失败了 但是如果我下次调用 currentUser.get('profile').get('language') - 它会显示结果。

是否有非延迟加载或预取之类的东西？做

```
var lang = currentUser.get('profile').get('language') 
```

工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T22:05:20.163

我认为您正在寻找侧载。这在 Ember 指南中有所介绍：http: [//emberjs.com/guides/models/the-rest-adapter/#toc_sideloaded-relationships](http://emberjs.com/guides/models/the-rest-adapter/#toc_sideloaded-relationships)

# python - 是否可以用 Python 编写 VLC 插件？

> ID：14405572
> 
> 赞同：10
> 
> 时间：2013-01-18T18:47:21.490
> 
> 标签：python, vlc

是否可以用 Python 编写 VLC 插件？如果是这样，您将如何处理？

我看过[vlc.py](https://wiki.videolan.org/Python_bindings#Download)文件，我只能说你可以编写一个具有 VLC 功能的应用程序，但是你真的可以编写一些你可以在 VLC 中打开的东西来添加额外的功能，而无需进入 C 代码和重新编译一切？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T19:51:22.810

根据 VLC 插件（或在 VLC 中称为模块）[作者指南](http://wiki.videolan.org/Documentation%3aHacker%27s_Guide/Module_Writers_Guide)：

> 至少在理论上可以使用不同的编程语言。（主要的 VLC 代码库仅使用 C、C++ 和 Lua，并且在 MacOS 目标 C 上。）

所以，看起来完全有可能。现在，根据[相同的资源](http://wiki.videolan.org/Documentation%3aHacker%27s_Guide/Module_Writers_Guide)，您还可以创建“树外”模块，这意味着要将它们添加到 VLC 的功能中，您*不必*重新编译 VLC。

如果您想了解更多信息，或了解如何制作这些模块，我强烈建议您查看该链接。

你提到了[VLC.py](http://wiki.videolan.org/Python_bindings)文件。如果您要使用这些 Python 绑定，请查看这些[示例](http://git.videolan.org/?p=vlc/bindings/python.git;a=tree;f=examples;hb=HEAD)。

# javascript - 使用 Javascript 获取当前文档

> ID：14405578
> 
> 赞同：2
> 
> 时间：2013-01-18T18:47:43.563
> 
> 标签：javascript, google-chrome, google-chrome-extension

我有一个 Chrome 扩展程序，当您单击该图标时，它会显示一个文本字段和一个按钮，用于搜索。显示的内容基本上是从清单中调用的 HTML 文档，如下所示：

```
"browser_action": {
    "default_popup": "popup.html"
 } 
```

现在，问题是如何使用 javascript 访问浏览器中加载的当前文档？因为我想从文本字段中提取问题，然后去当前文档中查找答案。

谢谢！

**编辑1：**

代码：

清单.json

```
{
  "name": "SmartSearch",
  "version": "1.0",
  "manifest_version": 2,
  "description": "Smart Search extension for Google Chrome.",
  "content_scripts": 
  [
  {
    "matches": ["<all_urls>"],
    "js": ["smartsearch.js"]
  }
  ],
  "browser_action": {
     "default_icon": "icon.png",
"default_popup": "popup.html"
  }

} 
```

智能搜索.js

```
SmartSearch() = function (){

    var x = document.title;
    alert(x);
}
window.onload = SmartSearch; 
```

popup.html

```
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <title>Smart Search</title>
    <script type="application/javascript" src="smartsearch.js"></script>
  </head>
  <body>
    <p>Smart Search</p>
    <form>
      <input type="text" id="search_text_field"></input>
      <input type="button" id="search_button" value="Search"/>
    </form>
  </body>
</html> 
```

现在，我要做的就是在按下扩展图标时显示当前加载页面的标题，只是为了检查我是否可以访问 DOM。问题是我得到了弹出窗口的标题。解决方案是什么？

**EDIT2：** 我看到如果我转到一个页面，在加载时确实会出现带有页面标题的警报（有一些例外，比如 youtube 页面），但是当我按下扩展程序的图标时我想这样做.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T19:08:00.583

您需要使用可以在清单中声明的[​​内容脚本，如下所示：](http://developer.chrome.com/extensions/content_scripts.html)

```
 {
  "name": "My extension",
  ...
  "content_scripts": [
    {
      "matches": ["http://www.google.com/*"],
      "css": ["mystyles.css"],
      "js": ["jquery.js", "myscript.js"]
    }
  ],
  ...
} 
```

`matches`您将在其中使用脚本的域在哪里。这样css和js就在文档本身里面。但是如果您需要将数据从文档发送到您的插件，则需要使用[Message Passing](http://developer.chrome.com/extensions/content_scripts.html)。这里有一个示例，说明如何从内容脚本向插件发送消息。

```
 chrome.extension.sendMessage({greeting: "hello"}, function(response) {
      console.log(response.farewell);
  }); 
```

然后你必须使用`chrome.extension.onMessage.addListener`来接收消息。例子：

```
 chrome.extension.onMessage.addListener(function(request, sender, sendResponse) {
          console.log(sender.tab ?
              "from a content script:" + sender.tab.url :
              "from the extension");
          if (request.greeting == "hello")
              sendResponse({farewell: "goodbye"});
  }); 
```

另一方面，如果您想从插件向您必须使用的内容脚本发送消息。

```
chrome.tabs.getSelected(null, function(tab) {
  chrome.tabs.sendMessage(tab.id, {greeting: "hello"}, function(response) {
    console.log(response.farewell);
  });
}); 
```

和以前一样`chrome.extension.onMessage.addListener`接收对方的消息。

[这](http://developer.chrome.com/extensions/getstarted.html)是一个非常好的入门资源。

**编辑： content_scripts 初始化的工作示例**

清单：

```
 {
    "name": "Intervention",
    "version" : "1.0",
    "content_scripts": [
    {
      "matches": ["http://*/**"],
      "js": ["action.js"]
    }

   ],

  "manifest_version" : 2
} 
```

JS

```
var element = document.title;
alert(element); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T19:05:23.807

您希望在页面上运行[内容脚本](http://developer.chrome.com/extensions/content_scripts.html)并使用[消息传递](http://developer.chrome.com/extensions/messaging.html)在扩展程序和选项卡之间进行交互。

内容脚本从您的扩展中获取请求，在页面上进行计算（您将有权访问 DOM，因此您应该能够在页面上执行任何操作）。

然后，内容脚本会将响应发送回您的扩展程序，您可以在弹出窗口中显示该响应。

# c++ - 通过 map.equal_range 发出 interator

> ID：14405582
> 
> 赞同：0
> 
> 时间：2013-01-18T18:47:57.760
> 
> 标签：c++, iterator, key, multimap

当我使用 map.equal_range() 时，我在迭代地图时遇到问题 ..我的编译器说 's_it = Krange.std::pair<> 中的 'operator=' 不匹配，'operator !=' 不匹配?? 我很困惑，无法弄清楚为什么以下是我的代码

```
void Pdb2Cluster_test
(
    multimap <string, unsigned> & pigAccmap,
    multimap <unsigned, proteininfo> & map2
)
{
    // CArgs args = GetArgs();
    //AnsiString v = diff_b;
    multimap<string , unsigned>::iterator imp;

    multimap<string,proteininfo>::iterator s_it;
    multimap<string, pdbbinfo>::iterator ip;
    // set<string>::iterator idp;
    unsigned pig_b;
    int start, stop;
    // int mststar, mstto;
    unsigned cluster, domgi;
    string pdb_ele;

    pdb_ele = "3ST9A";

    imp = pigAccmap.find(pdb_ele);
    if (imp != pigAccmap.end())
    {    pig_b = imp->second;

        std::pair<multimap<unsigned, proteininfo>::iterator, multimap<unsigned,proteininfo>::iterator> Krange;
        Krange  = map2.equal_range(pig_b);
        for (s_it = Krange.first; s_it != Krange.second; s_it++)
        {
            domgi= s_it->second.domgi;
            start= s_it->second.seqstar;
            stop= s_it->second.seqstop;
            cout<<"\t"<<cluster<<"\t"<<pdb_ele<<"\t" <<pig_b<<"\t"<<domgi<<"\t"<<start<<"\t"<<stop<<endl;
            //   myfile<<cluster<<"\t"<<pdb_ele<<"\t" <<domgi<<"\t"<<start<<"\t"<<stop<<endl;

        }
        imp++;
    }
} 
```

我只需要迭代第二个多图，所以忽略我提到的第一个循环的 map.find() [http://www.cplusplus.com/reference/map/multimap/equal_range/](http://www.cplusplus.com/reference/map/multimap/equal_range/) ....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T18:55:02.673

的类型`map2`是`std::multimap<unsigned, proteininfo>`。

的类型`s_it`是`std::multimap<std::string, proteininfo>::iterator`。

这些不匹配。

你可以通过使用一些 typedef 来节省一些麻烦，比如

```
typedef std::multimap<std::string, proteininfo> protein_map_type; 
```

# command-line - 如何在远程主机上访问和运行白痴的命令行？

> ID：14405583
> 
> 赞同：1
> 
> 时间：2013-01-18T18:48:00.687
> 
> 标签：command-line

我没有太多命令行功能，但我需要将 PHP 扩展下载到远程主机上。（奇怪的是，我只是用谷歌搜索并没有找到太多帮助）。

我在 OSX 上 .. 有 iTerm .. 但到目前为止，我只是将它用于基本的 localhost 内容，并剪切'n'粘贴了任何模糊的高级内容。

那么有人可以给我一个快速的谈话吗？如果我的站点是 mysite.com，我如何通过 CLI 访问它？

我认为这可能会做到>

```
ssh username@mysite.com  
-or-
ssh -l username xx.xx.xx.xxx 
```

但事实并非如此。只是超时“端口：22：操作超时”

有人可以告诉我我做错了什么吗？主机是否可能甚至不允许连接？我会收到不同的错误消息吗？我该怎么说？

而且我知道，从我假设连接的角度来看，所有命令都将像我在遥控器上一样运行，直到我结束会话，对吗？

# ios - 如何避免将从相机胶卷中挑选的图像保存到相机胶卷？[iOS]

> ID：14405586
> 
> 赞同：0
> 
> 时间：2013-01-18T18:48:05.833
> 
> 标签：ios, objective-c, uiimagepickercontroller, photo-gallery, alasset

我可以轻松地将用相机拍摄的图像保存到相机胶卷中。但是如果从相机胶卷中选择图像，我不想保存图像，因为它会创建一个副本。

如何执行以下操作并有选择地保存到相机胶卷？

编辑 1：正如 rmaddy 所说，我可以：仅当 picker.sourceType 等于 UIImagePickerControllerSourceTypeCamera 时才保存到相机胶卷。

但如果我这样做，我将无法获得所选图像的信息，主要是文件名。

```
-(void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info {
NSString *mediaType = [info objectForKey:UIImagePickerControllerMediaType];

if ([mediaType isEqualToString:(NSString *)kUTTypeImage]) {
    UIImage *image = [info objectForKey:UIImagePickerControllerOriginalImage];

    [self.myImageView setImage: image];
    [self.myImageView setContentMode:UIViewContentModeScaleAspectFit];
    ALAssetsLibrary *al=[[ALAssetsLibrary alloc] init];

    // ------> Saving to Camera Roll <------------

    [al writeImageToSavedPhotosAlbum:[image CGImage] metadata:nil completionBlock:^(NSURL *assetURL,NSError *error) { 

            ALAssetsLibraryAssetForURLResultBlock resultblock = ^(ALAsset *myAsset) {
                ALAssetRepresentation *rep = [myAsset defaultRepresentation];
                NSString *fileName = [rep filename];
                ImageInfo *imgInfo = [[ImageInfo alloc] initWithEventId:0 name:fileName image:UIImageJPEGRepresentation(image, 1.0)];
                imgInfo.isDirty = YES;
                [self.imagesArray addObject:imgInfo];
                [self dismissViewControllerAnimated:YES completion:nil];
                NSLog(@"Image from Camera %@ added to imageArray",fileName);
            };

            ALAssetsLibrary *assetsLibrary = [[ALAssetsLibrary alloc]init];
            [assetsLibrary assetForURL:assetURL
                           resultBlock:resultblock
                          failureBlock:nil];

     }];
}
else if ([mediaType isEqualToString:(NSString *)kUTTypeMovie])
{
    // Code here to support video if enabled
} 
```

编辑2：

SOLVED WITH THIS MOD: （我知道有一点代码重复，我会在以后尝试改进它）

```
if (newMedia){
        ALAssetsLibrary *al=[[ALAssetsLibrary alloc] init];
        [al writeImageToSavedPhotosAlbum:[image CGImage] metadata:nil completionBlock:^(NSURL *assetURL,NSError *error)
        {                
            ALAssetsLibraryAssetForURLResultBlock resultblock = ^(ALAsset *myAsset)
            {
                ALAssetRepresentation *rep = [myAsset defaultRepresentation];
                //NSString *fileName = [rep filename];
                NSString *imgUrl = [[rep url] absoluteString];
                ImageInfo *imgInfo = [[ImageInfo alloc] initWithEventId:0 imgUrl:imgUrl image:UIImageJPEGRepresentation(image, 1.0)];
                imgInfo.isDirty = YES;
                [self.imagesArray addObject:imgInfo];
                [self dismissViewControllerAnimated:YES completion:nil];
                NSLog(@"Image from Camera %@ added to imageArray",imgUrl);
            };

            ALAssetsLibrary *assetsLibrary = [[ALAssetsLibrary alloc]init];
            [assetsLibrary assetForURL:assetURL
                           resultBlock:resultblock
                          failureBlock:nil];
        }];
} else {
        NSString* imgUrl = UIImagePickerControllerReferenceURL;
        ImageInfo *imgInfo = [[ImageInfo alloc] initWithEventId:0 imgUrl:imgUrl image:UIImageJPEGRepresentation(image, 1.0)];
        imgInfo.isDirty = YES;
        [self.imagesArray addObject:imgInfo];
        NSLog(@"Image from Camera Roll %@ added to imageArray",imgUrl);
        [self dismissViewControllerAnimated:YES completion:nil];
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T19:20:56.973

`picker.sourceType`仅当等于时才保存到相机胶卷`UIImagePickerControllerSourceTypeCamera`。

# powershell - Powershell 强制 bool 始终为真

> ID：14405587
> 
> 赞同：9
> 
> 时间：2013-01-18T18:48:10.707
> 
> 标签：powershell, parameters, casting

我有一个包含以下设置的脚本，如果我使用强制参数屏幕，则会返回不正确的结果。感觉好像它没有对我的输入进行某种类型验证或强制转换。我该如何解决？

```
param ( [Parameter(Mandatory=$true)] [bool]$autoinstall )

if ( $autoinstall  ) 
{
    echo "Autoinstall true"
}
else
{
    echo "Autoinstall false"
} 
```

如果我使用 .\myscript.ps1 -autoinstall $false 调用它，这将非常有效，但如果我使用强制密码提示并输入“$false”，则无论我通过什么，$autoinstall 变量始终为真。

编辑：

使用开关对我不起作用。我真的需要让它既可编写脚本又是用户快捷方式的强制参数函数，以便即时使用。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-18T21:08:30.853

出现此问题是因为输入被解释为字符串，并且您看到 PowerShell 将字符串强制转换为 bool 的结果，例如：

```
59> [bool]'0'
True

60> [bool]'false'
True

61> [bool]'False'
True

62> [bool]'$false'
True 
```

要获得“假”路径来执行，只需在提示您输入参数时按 Enter 键，即：

```
63> [bool]''
False 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-18T18:59:04.720

为什么不直接使用开关？试试这个：

```
param ( [switch]$autoinstall )

if ( $autoinstall  ) 
{
    echo "Autoinstall true"
}
else
{
    echo "Autoinstall false"
} 
```

输出：

```
[20:40:46] PS-ADMIN C:\Users\Graimer\Desktop> .\Untitled4.ps1
Autoinstall false
[20:42:36] PS-ADMIN C:\Users\Graimer\Desktop> .\Untitled4.ps1 -autoinstall
Autoinstall true
[20:42:38] PS-ADMIN C:\Users\Graimer\Desktop> .\Untitled4.ps1 -autoinstall:$true
Autoinstall true
[20:42:41] PS-ADMIN C:\Users\Graimer\Desktop> .\Untitled4.ps1 -autoinstall:$false
Autoinstall false 
```

# backbone.js - 如何将参数传递给骨干木偶复合视图模板

> ID：14405592
> 
> 赞同：12
> 
> 时间：2013-01-18T18:48:39.130
> 
> 标签：backbone.js, marionette

有没有办法在木偶复合视图模板中获取参数？我认为无论我用什么参数初始化视图都可以在模板中使用，但它似乎不起作用。

```
Views.myView = Marionette.CompositeView.extend({
  template: '#myView',
  otherstuff...
});

var collection = new App.Collection(); 
App.main.show(new Views.myView({
  collection: collection,
  isMine: true
})); 
```

模板：

```
<%= isMine %> 
```

并且当模板被渲染`isMine`是未定义的：

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-11-11T15:58:38.383

您可以为此使用 templateHelpers 函数。例如，我有一个在渲染时填充不同区域的布局。

```
onRender: function () {
            var contactInfo = this.model.get('contactInfo');

            this.contactInfoRegion.show(new ContactInfoView(
                {
                    model: contactInfo,
                    travelerNumber: this.travelerNumber,
                    numberOfTravelers: this.numberOfTravelers
                }
            ));
}

var ContactInfoView = Backbone.Marionette.ItemView.extend({
        model: ContactInfoModel,
        template: Backbone.Marionette.TemplateCache.get(contactInfoTemplate),
        templateHelpers:function(){

            return {
                numberOfTravelers: this.options.numberOfTravelers,
                travelerNumber: this.options.travelerNumber
            }
        }
    }); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-18T20:51:19.900

在 freenode 聊天室中从 brian-mann 那里得到了一些帮助来解决这个问题。`serializeData`我将值传递给视图，但我需要通过覆盖该方法将其作为属性发送到实际模板。

我还进行了检查以将默认值设置为 true，因此如果我不想传递值，我就不必传递该值。

```
Views.myView = Marionette.CompositeView.extend({
  template: '#myView',
  serializeData: function() {
      var viewData = {};
      viewData.isMine = this.options.isMine === undefined ? true : this.options.isMine;
      return viewData;
    },
  otherstuff...
}); 
```

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2013-01-19T12:17:33.567

您可以设置视图“模型：{isMine:true}”的模型属性

# java - 多边形触摸检测 Google Map API V2

> ID：14405593
> 
> 赞同：14
> 
> 时间：2013-01-18T18:48:42.183
> 
> 标签：java, android, coordinates, google-maps-android-api-2, point-in-polygon

我试图弄清楚如何最好地做到这一点，我有一张地图，`Polygon`上面画了一张。由于 Google Maps API V2 似乎没有在多边形上进行触摸检测。我想知道是否可以检测到触摸点是否在多边形内部？如果是这样，那么如何，我的主要目标是在地图上勾勒出一个状态，当用户点击该状态时，它将在自定义视图中显示更多详细信息。到目前为止，我能够捕获`MapOnClick`地图，但是当用户在里面点击时，`Polygon`我想要`polygon.getID()`在`Toast`. 我是新手，所以如果我不够清楚，我很抱歉。

```
googleMap.setOnMapClickListener(new OnMapClickListener() 
    {
        public void onMapClick(LatLng point) 
        {
        boolean checkPoly = true;

        Toast.makeText(MainActivity.this,"The Location is outside of the Area", Toast.LENGTH_LONG).show();
        }    
     });
     }
     }
   catch (Exception e) {
         Log.e("APP","Failed", e);
     } 
```

好的，这就是我到目前为止的半工作

```
 private boolean rayCastIntersect(LatLng tap, LatLng vertA, LatLng vertB) {

    double aY = vertA.latitude;
    double bY = vertB.latitude;
    double aX = vertA.longitude;
    double bX = vertB.longitude;
    double pY = tap.latitude;
    double pX = tap.longitude;
     if (aY > bY) {
            aX = vertB.longitude;
            aY = vertB.latitude;
            bX = vertA.longitude;
            bX = vertA.latitude;
        }
    System.out.println("aY: "+aY+" aX : "+aX);
    System.out.println("bY: "+bY+" bX : "+bX);

     if (pX < 0) pX += 360;
        if (aX < 0) aX += 360;
        if (bX < 0) bX += 360;

        if (pY == aY || pY == bY) pY += 0.00000001;
        if ((pY > bY || pY < aY) || (pX > Math.max(aX, bX))) return false;
        if (pX < Math.min(aX, bX))

            return true;
//  }

    double m = (aX != bX) ? ((bY - aY) / (bX - aX)) : aX;
    double bee = (aX != pX) ? ((pY - aY) / (pX - aX)) : aX;
    double x = (pY - bee) / m;

    return x > pX;
} 
```

}

我遇到的问题是每个多边形左侧的触摸都是真实的，直到它到达另一个多边形。我的算法有什么问题会导致这个问题？任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-01-18T19:12:23.427

The problem you're trying to solve is the [Point in Polygon](http://en.wikipedia.org/wiki/Point_in_polygon) test.

> To help visualize the concept of Ray Casting:
> 
> Draw a Polygon on a piece of paper. Then, starting at any random point, draw a straight line to the right of the page. If your line intersected with your polygon an odd number of times, this means your starting point was inside the Polygon.

So, how do you do that in code?

Your polygon is comprised of a list of vertices: `ArrayList<Geopoint> vertices`. You need to look at each `Line Segment` individually, and see if your `Ray` intersects it

```
private boolean isPointInPolygon(Geopoint tap, ArrayList<Geopoint> vertices) {
    int intersectCount = 0;
    for(int j=0; j<vertices.size()-1; j++) {
        if( rayCastIntersect(tap, vertices.get(j), vertices.get(j+1)) ) {
            intersectCount++;
        }
    }

    return (intersectCount%2) == 1); // odd = inside, even = outside;
}

private boolean rayCastIntersect(Geopoint tap, Geopoint vertA, Geopoint vertB) {

    double aY = vertA.getLatitude();
    double bY = vertB.getLatitude();
    double aX = vertA.getLongitude();
    double bX = vertB.getLongitude();
    double pY = tap.getLatitude();
    double pX = tap.getLongitude();

    if ( (aY>pY && bY>pY) || (aY<pY && bY<pY) || (aX<pX && bX<pX) ) {
        return false; // a and b can't both be above or below pt.y, and a or b must be east of pt.x
    }

    double m = (aY-bY) / (aX-bX);               // Rise over run
    double bee = (-aX) * m + aY;                // y = mx + b
    double x = (pY - bee) / m;                  // algebra is neat!

    return x > pX;
} 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2015-05-11T14:48:10.030

Google 地图支持库现在有一个静态方法可以为您执行此检查：

```
PolyUtil.containsLocation(LatLng point, List<LatLng>polygon, boolean geodesic); 
```

虽然文档没有在指南中明确提到它，但方法就在那里

[地图支持库文档](https://developers.google.com/maps/documentation/android/utility/)

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2015-12-22T15:04:24.363

随着[Google Play Services 8.4.0 的发布](http://android-developers.blogspot.com/2015/12/google-play-services-84-sdk-is-available_18.html)，Maps API 支持[`OnPolygonClickListener`](https://developers.google.com/android/reference/com/google/android/gms/maps/GoogleMap.OnPolygonClickListener)向多边形添加一个。[多边形](https://developers.google.com/maps/documentation/android-api/shapes#polygon_events)、[折线](https://developers.google.com/maps/documentation/android-api/shapes#polyline_events)和[叠加](https://developers.google.com/maps/documentation/android-api/groundoverlay#handle_ground_overlay_events)都支持类似的事件。

您只需要调用[`GoogleMap.setOnPolygonClickListener(OnPolygonClickListener listener)`](https://developers.google.com/android/reference/com/google/android/gms/maps/GoogleMap.html#setOnPolygonClickListener%28com.google.android.gms.maps.GoogleMap.OnPolygonClickListener%29)来设置它，并相应地为其他侦听器（`setOnPolylineClickListener`, &c）：

```
map.setOnPolygonClickListener(new GoogleMap.OnPolygonClickListener() {  
    @Override  
    public void onPolygonClick(Polygon polygon) {  
        // Handle click ...  
    }  
}); 
```

虽然有点晚了，但它很好地解决了这个用例。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-08-13T12:37:04.447

虽然 user1504495 在我使用它时已经简短地回答了。但不要使用整个[地图实用程序库](https://developers.google.com/maps/documentation/android/utility/)，而是使用此方法。

从您的活动课程中相应地传递参数：

```
if (area.containsLocation(Touchablelatlong, listLatlong, true))
                isMarkerINSide = true;
            else
                isMarkerINSide = false; 
```

并将以下内容放在单独的类中：

```
/**
     * Computes whether the given point lies inside the specified polygon.
     * The polygon is always cosidered closed, regardless of whether the last point equals
     * the first or not.
     * Inside is defined as not containing the South Pole -- the South Pole is always outside.
     * The polygon is formed of great circle segments if geodesic is true, and of rhumb
     * (loxodromic) segments otherwise.
     */
    public static boolean containsLocation(LatLng point, List<LatLng> polygon, boolean geodesic) {
        final int size = polygon.size();
        if (size == 0) {
            return false;
        }
        double lat3 = toRadians(point.latitude);
        double lng3 = toRadians(point.longitude);
        LatLng prev = polygon.get(size - 1);
        double lat1 = toRadians(prev.latitude);
        double lng1 = toRadians(prev.longitude);
        int nIntersect = 0;
        for (LatLng point2 : polygon) {
            double dLng3 = wrap(lng3 - lng1, -PI, PI);
            // Special case: point equal to vertex is inside.
            if (lat3 == lat1 && dLng3 == 0) {
                return true;
            }
            double lat2 = toRadians(point2.latitude);
            double lng2 = toRadians(point2.longitude);
            // Offset longitudes by -lng1.
            if (intersects(lat1, lat2, wrap(lng2 - lng1, -PI, PI), lat3, dLng3, geodesic)) {
                ++nIntersect;
            }
            lat1 = lat2;
            lng1 = lng2;
        }
        return (nIntersect & 1) != 0;
    }

    /**
     * Wraps the given value into the inclusive-exclusive interval between min and max.
     * @param n   The value to wrap.
     * @param min The minimum.
     * @param max The maximum.
     */
    static double wrap(double n, double min, double max) {
        return (n >= min && n < max) ? n : (mod(n - min, max - min) + min);
    }

    /**
     * Returns the non-negative remainder of x / m.
     * @param x The operand.
     * @param m The modulus.
     */
    static double mod(double x, double m) {
        return ((x % m) + m) % m;
    }

    /**
     * Computes whether the vertical segment (lat3, lng3) to South Pole intersects the segment
     * (lat1, lng1) to (lat2, lng2).
     * Longitudes are offset by -lng1; the implicit lng1 becomes 0.
     */
    private static boolean intersects(double lat1, double lat2, double lng2,
                                      double lat3, double lng3, boolean geodesic) {
        // Both ends on the same side of lng3.
        if ((lng3 >= 0 && lng3 >= lng2) || (lng3 < 0 && lng3 < lng2)) {
            return false;
        }
        // Point is South Pole.
        if (lat3 <= -PI/2) {
            return false;
        }
        // Any segment end is a pole.
        if (lat1 <= -PI/2 || lat2 <= -PI/2 || lat1 >= PI/2 || lat2 >= PI/2) {
            return false;
        }
        if (lng2 <= -PI) {
            return false;
        }
        double linearLat = (lat1 * (lng2 - lng3) + lat2 * lng3) / lng2;
        // Northern hemisphere and point under lat-lng line.
        if (lat1 >= 0 && lat2 >= 0 && lat3 < linearLat) {
            return false;
        }
        // Southern hemisphere and point above lat-lng line.
        if (lat1 <= 0 && lat2 <= 0 && lat3 >= linearLat) {
            return true;
        }
        // North Pole.
        if (lat3 >= PI/2) {
            return true;
        }
        // Compare lat3 with latitude on the GC/Rhumb segment corresponding to lng3.
        // Compare through a strictly-increasing function (tan() or mercator()) as convenient.
        return geodesic ?
                tan(lat3) >= tanLatGC(lat1, lat2, lng2, lng3) :
                mercator(lat3) >= mercatorLatRhumb(lat1, lat2, lng2, lng3);
    }

    /**
     * Returns tan(latitude-at-lng3) on the great circle (lat1, lng1) to (lat2, lng2). lng1==0.
     * See http://williams.best.vwh.net/avform.htm .
     */
    private static double tanLatGC(double lat1, double lat2, double lng2, double lng3) {
        return (tan(lat1) * sin(lng2 - lng3) + tan(lat2) * sin(lng3)) / sin(lng2);
    }

    /**
     * Returns mercator Y corresponding to latitude.
     * See http://en.wikipedia.org/wiki/Mercator_projection .
     */
    static double mercator(double lat) {
        return log(tan(lat * 0.5 + PI/4));
    }

    /**
     * Returns mercator(latitude-at-lng3) on the Rhumb line (lat1, lng1) to (lat2, lng2). lng1==0.
     */
    private static double mercatorLatRhumb(double lat1, double lat2, double lng2, double lng3) {
        return (mercator(lat1) * (lng2 - lng3) + mercator(lat2) * lng3) / lng2;
    } 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-07-09T23:09:52.163

这是一个完整的工作示例，可以了解是否在多边形上发生了触摸。有些答案比他们需要的更复杂。此解决方案使用“android-maps-utils”

```
// compile 'com.google.maps.android:android-maps-utils:0.3.4'
private ArrayList<Polygon> polygonList = new ArrayList<>();

private void addMyPolygons() {
    PolygonOptions options = new PolygonOptions();
    // TODO: make your polygon's however you want
    Polygon polygon = googleMap.addPolygon(options);
    polygonList.add(polygon);
}

@Override
public void onMapClick(LatLng point) {
    boolean contains = false;
    for (Polygon p : polygonList) {
        contains = PolyUtil.containsLocation(point, p.getPoints(), false);
        if (contains) break;
    }
    Toast.makeText(getActivity(), "Click in polygon? "
            + contains, Toast.LENGTH_SHORT).show();
}

@Override
protected void onMapReady(View view, Bundle savedInstanceState) {
    googleMap.setOnMapClickListener(this);
    addMyPolygons();
} 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-09-05T11:17:11.707

只是为了保持一致性 - 当用户点击多边形（或其他叠加层）时不会调用 onMapClick，它在 javadoc 中有所提及。

我做了一个解决方法，在 MapFragment 处理它们之前拦截点击事件，并将点投影到地图坐标并检查该点是否在任何多边形内，如其他答案中所建议的那样。

[在此处](https://stackoverflow.com/questions/18445191/android-google-map-polygon-click-event)查看更多详细信息

# zlib - Linux Makefile：未定义对“gzbuffer”的引用（其中 LIB = -lz）

> ID：14405596
> 
> 赞同：2
> 
> 时间：2013-01-18T18:48:46.730
> 
> 标签：zlib, vcftools

我正在尝试安装一个程序（[vcftools](http://vcftools.sourceforge.net/)），其 Makefile 内容如下：

```
# Make file for vcftools
# Author: Adam Auton
# ($Revision: 230 $)

# Compiler
CPP = g++
# Output executable
EXECUTABLE = vcftools
# Flag used to turn on compilation of PCA routines
ifndef VCFTOOLS_PCA
        VCFTOOLS_PCA = 0
endif
# Compiler flags
CPPFLAGS = -O2 -Wall -Wextra -D_FILE_OFFSET_BITS=64
#CPPFLAGS = -g 
# Included libraries (zlib)
#LIB = -lz 
LIB = -lz -I/usr/local/include/ -L/usr/local/lib/

OBJS = vcftools.o vcf_file.o vcf_entry.o \
                vcf_entry_getters.o vcf_entry_setters.o \
                vcf_file_filters.o vcf_file_output.o \
                vcf_file_format_convert.o \
                vcf_file_diff.o parameters.o \
                vcf_file_index.o \
                output_log.o 
```

我无法让这个 Makefile 正确运行，而是得到一个错误，内容如下：

```
vcf_file.cpp:(.text+0xe72): undefined reference to `gzbuffer'
collect2: ld returned 1 exit status
make[1]: *** [vcftools] Error 1
make[1]: Leaving directory `/home/Public/Packages/vcftools_0.1.10/cpp'
/bin/sh: 2: cd: can't cd to perl
make: *** [install] Error 2 
```

我认为部分问题是与我的 zlib 安装路径相关的错误。我尝试更改 -I 和 -L 路径以匹配我的 zlib 安装，但没有任何运气（有很多文件夹似乎包含 zlib 文件）。

此外，通过搜索与该程序相关的其他论坛（[此处](http://sourceforge.net/mailarchive/forum.php?set=custom&viewmonth=&viewday=&forum_name=vcftools-help&style=nested&max_rows=50&submit=Change%20View)），似乎我可能需要 zlib1g-dev。zlib1g-dev 在我的电脑上（它显示在我的 ubuntu 软件中心），但是当我进入时没有显示：

```
root@root:/home/Public/Packages/vcftools_0.1.10/cpp# whereis zlib1g-dev
zlib1g-dev:
root@root:/home/Public/Packages/vcftools_0.1.10/cpp# which zlib1g-dev 
```

我考虑过删除并重新安装 zlib，但看起来有几个程序依赖于它。尝试运行安装或删除时，我收到以下消息：

sudo apt-get install zlib-devel

```
Reading package lists... Done
Building dependency tree       
Reading state information... Done
E: Unable to locate package zlib-devel 
```

我不确定问题是否出在我的计算机上安装 zlib 的位置、安装中的错误，或者其他完全在我脑海中的问题。任何建议将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-15T00:48:07.803

在我的系统（Ubuntu 12.04.3 LTS）上，这是一个库位置问题。
确保安装了 zlib1g-dev。
在 vcftools_whatever/cpp/Makefile 中，更改

```
LIB = -lz 
```

至

```
LIB = -L/usr/local/lib/ -lz 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-01T08:05:35.357

在该区域的 obuntu 中有一个错误，其中特定库的声明必须出现在库路径的声明之后。

在你的makefile中，`-lz`只能放在*后面* `-L/usr/local/lib/`

我建议将 LIB 声明更改为以下声明 - 这应该可以解决问题

```
LIB = -I/usr/local/include/ -L/usr/local/lib/ -lz 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-10-24T07:59:57.707

我想你错过了开发包。它不像您尝试的那样被称为 zlib-devel，

> sudo apt-get install zlib-devel

但是zlib1g-dev。所以你要运行的命令是：

`sudo apt-get install zlib1g-dev`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-03-19T21:13:59.317

对于vcftools不得不修改，配置后：

1.  生成文件

2.  源/生成文件

3.  src/cpp/Makefile

在每个中，转到 LIBS 并输入：

`LIBS = -L/tools/hpclib/zlib-1.2.8/lib -lz -lgomp`

这是在上面特定位置编译的带有 zlib 的 centos 上。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-10-03T18:52:39.477

这对我有用，把它放在我的 Makefile 中：

顺便说一句，我花了 10 分钟让它不起作用，因为我在这一行的末尾离开了 lib 并且只有根路径。

LIBS = -L/tools/hpclib/zlib-1.2.8/lib -lz -lgomp（工作）

LIBS = -L/tools/hpclib/zlib-1.2.8 -lz -lgomp（没用）

希望对某人有所帮助。它用于编译一个名为 stacks 2.41 的程序

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-09-24T15:10:22.607

我通过搜索对 gzbuffer var 的未定义引用找到了这一点。在 CentOS-6.6 Linux 机器上从源代码编译 ImageMagick 时出现错误。我必须做两件事：1）根据建议重新。Ubuntu，通过 travc，您编辑 Makefile，查找“LIBS =”（在我的情况下为空白），并将其更改为“LIBS = -L/usr/local/lib -lz”。这让我得到了一个干净的编译。运行“make install”来安装这个东西，它在运行时失败了。2) 修复方法是 cd 到 /usr/local/lib 并从命令行运行“ldconfig”。“ldconfig”更新动态链接器运行时绑定（详细信息请阅读“man”页面。）您可以通过在 X-windows 的命令行中运行“display”来确认 ImageMagick 安装正常。（如果您安装了 ImageMagick 以便“显示”prgm 工作，

# java - 反编译的 Java 类产生不同的输出

> ID：14405597
> 
> 赞同：3
> 
> 时间：2013-01-18T18:48:48.203
> 
> 标签：java, decompiler

出于好奇，我刚刚使用**DJ Java Decompiler**以及**CAVAJ Java Decompiler** （Java 版本为 1.7）反编译了下面的代码，这是正常的源代码：

* * *

```
 byte a = 10;
    a = (byte) (a +1);

    byte b = 10;
    b = b++;

    byte c = 10;
    c +=c;

    System.out.printf("a=%d \t b=%d \t c=%d\n",a,b,c); 
```

其中显示输出为：**a=11 b=10 c=20**

* * *

* * *

这是反编译的：

```
 byte a = 10;
    a++;
    byte b = 10;
    b++;
    b = b;
    byte c = 10;
    c += c;
    System.out.printf("a= %d \t b = %d \t c = %d\n", new Object[] {
        Byte.valueOf(a), Byte.valueOf(b), Byte.valueOf(c)
    }); 
```

其中作为源代码输出为：**a=11 b=11 c=20**

* * *

`byte`更清楚地说，这与发生的同样事情无关`int`，我什至在在线编译器[IDEONE](http://ideone.com/NQ13U2)中检查了上述代码，并给出了与我相同的输出。

那么，反编译器是产生错误的代码还是别的什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T18:52:22.680

我会给你一个简短的回答：是的，似乎*反编译器产生了错误的代码*。因为这个：

```
byte b = 10;
b = b++; 
```

具有强烈的预测行为（`b`不会改变）。

**UPD：**此外，没有一个反编译器可以 100% 保证生成的反编译代码的正确性。

**UPD-2：**您确定您向我们提供了您的代码的实际版本吗？因为这个：

```
byte aa = 10;
a = (byte) (a +1); 
```

当然是一个错误。它甚至不会编译:)

**UPD-3**好吧，我需要说，那个`Jad`反编译器（用于 Intel 平台上的 Windows 9x/NT/2000 的 Jad 1.5.8g）产生相同的代码：

```
 byte b = 10;
    b++;
    b = b; 
```

...

```
 java.lang.System.out.printf("a=%d \t b=%d \t c=%d\n", new java.lang.Object[] {... 
```

**但这**并不奇怪：**Cavaj Java 反编译器使用 Jad 作为其 Java 反编译引擎**。

**结论：**将此行为视为`Jad`反编译器的功能/错误，这远非完美。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-01-18T19:26:30.110

这与反编译器无关。当您使用 java 编译器编译代码时，在某些情况下，编译器会更改您的代码并将其优化为另一个不会更改结果的代码。你的代码是：

```
byte a = 10;
a = (byte) (a + 1); 
```

在这种情况下，java 编译器知道不需要在字节和字节之间进行类型转换，因此，编译器会尝试删除您的类型转换，并且在此过程中，它会用它可以理解的最接近的代码替换您的代码。这是编译器输出：

```
byte a = 10;
a++; 
```

因此，这与反编译过程无关。Java 编译器会更改您的代码。

# c - gnu 科学库 (cblas) 符号查找错误

> ID：14405601
> 
> 赞同：0
> 
> 时间：2013-01-18T18:48:59.083
> 
> 标签：c, gsl

我在运行 gsl（gnu 科学库）的 cblas 部分时遇到问题。

下面的示例（来自 gsl 手册）完美地编译了链接，但是在运行时会出错。这是在 Ubuntu 12.04 下。

> gcc linsys.c -lgsl -lcblas -lm
> 
> ./a.out：符号查找错误：/usr/lib/libgsl.so.0：未定义符号：cblas_dtrsv

```
 #include <stdio.h>
 #include <gsl/gsl_linalg.h>

 int
 main (void)
 {
   double a_data[] = { 0.18, 0.60, 0.57, 0.96,
                       0.41, 0.24, 0.99, 0.58,
                       0.14, 0.30, 0.97, 0.66,
                       0.51, 0.13, 0.19, 0.85 };

   double b_data[] = { 1.0, 2.0, 3.0, 4.0 };

   gsl_matrix_view m 
     = gsl_matrix_view_array (a_data, 4, 4);

   gsl_vector_view b
     = gsl_vector_view_array (b_data, 4);

   gsl_vector *x = gsl_vector_alloc (4);

   int s;

   gsl_permutation * p = gsl_permutation_alloc (4);

   gsl_linalg_LU_decomp (&m.matrix, p, &s);

   gsl_linalg_LU_solve (&m.matrix, p, &b.vector, x);

   printf ("x = \n");
   gsl_vector_fprintf (stdout, x, "%g");

   gsl_permutation_free (p);
   gsl_vector_free (x);
   return 0;
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T19:26:29.910

在我的 ubuntu 系统上，库名称是`gslcblas`，完整路径是`/usr/lib/libgslcblas.so`. 我用这个库尝试了你的代码，它编译为：

```
gcc gl.c -lgsl -lgslcblas -lm 
```

你能检查你是否有这个库并用它编译吗？如果没有，您也可以安装它：

`sudo apt-get install libgsl0-dev`

* * *

链接和输出的库：

```
$ ldd a.out 
    linux-gate.so.1 =>  (0xb771d000)
    libgsl.so.0 => /usr/lib/libgsl.so.0 (0xb74e5000)
    libgslcblas.so.0 => /usr/lib/libgslcblas.so.0 (0xb74a7000)
    libc.so.6 => /lib/i386-linux-gnu/libc.so.6 (0xb72fc000)
    libm.so.6 => /lib/i386-linux-gnu/libm.so.6 (0xb72d0000)
    /lib/ld-linux.so.2 (0xb771e000)

$ ./a.out 
x = 
-4.05205
-12.6056
1.66091
8.69377
$ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T11:57:07.427

@KingsIndian。非常感谢您的输出，它帮助我找到并解决了那个烦人的问题。

解决方案：“apt-get remove binutils-gold”并重新编译/链接。

原因：ld.gold 没有添加 libgslcblas，而标准的 linke 会添加。

我的可执行文件的 ldd 输出：

```
> ldd a.out 
> linux-vdso.so.1 =>  (0x00007fffb67ff000)
> libgsl.so.0 => /usr/lib/libgsl.so.0 (0x00007f0819468000)
> libc.so.6 => /lib/x86_64-linux-gnu/libc.so.6 (0x00007f08190a9000)
> libm.so.6 => /lib/x86_64-linux-gnu/libm.so.6 (0x00007f0818dac000)
> /lib64/ld-linux-x86-64.so.2 (0x00007f08198cd000) 
```

我们看到了 libgslcblas 的明显遗漏！我将我的代码复制到另一个 ubuntu 系统（它也运行 12.04.1 lts 并编译它。瞧，同一个程序在使用相同的编译器开关编译后运行！

*   比较 gcc 的版本表明它们在两个系统上完全相同（gcc 版本 4.6.3 (Ubuntu/Linaro 4.6.3-1ubuntu5)）。
*   安装的 gsl.so 文件也是相同的，这需要两个相同版本的更新系统。

也许链接器不同？

在我的“问题系统”上：

> ld -v GNU gold (Ubuntu 2.22 的 GNU Binutils) 1.11

在“好系统”上：

> ld -v GNU ld（用于 Ubuntu 的 GNU Binutils）2.22

删除binutils gold并重新编译测试程序，并且..成功！

底线：链接器问题，已解决。

# php - 如果未定义翻译，gettext 使用标识符而不是英文

> ID：14405604
> 
> 赞同：2
> 
> 时间：2013-01-18T18:49:01.467
> 
> 标签：php, translation, gettext

我对 gettext 有疑问，如果用户以西班牙语访问我的网站并且该语言的翻译不可用，则显示标识符而不是英文翻译？

有没有办法避免这种情况？

这是我的代码的一些相关部分：

```
$lc = 'es_ES.utf8';
putenv('LC_ALL='.$lc);
setlocale(LC_ALL, $lc);

$languageFileName = 'default';
bindtextdomain($languageFileName, ROOT_PATH.'/locale');
bind_textdomain_codeset($languageFileName, 'UTF-8');
textdomain($languageFileName); 
```

这是我的树状：

```
-en_US
--LC_MESSAGES
---default.mo
---default.po
-es_ES
--LC_MESSAGES
---default.mo
---default.po
-fr_FR
--LC_MESSAGES
---default.mo
---default.po 
```

请注意，我使用的是 PHP 5.4，并且我的系统是法语的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T11:44:39.150

我可能会检查所需的翻译是否可用，如果没有，请设置某个默认语言环境（可能是 en_US）。

另一种方法是使用默认语言消息（即英语）作为标识符本身。每当系统显示“标识符”时，用户将自动看到英文文本。

（添加于 2013 年 1 月 31 日：）

**设置语言环境**：

```
$locale = "en_US";

putenv("LANG=$locale");
putenv("LC_MESSAGES=$locale");
putenv("LC_NUMERIC=$locale");
putenv("LC_ALL=$locale");

$setlocale = setlocale(LC_MESSAGES, $locale);
$setlocale = setlocale(LC_TIME, $locale);
$setlocale = setlocale(LC_NUMERIC, $locale);
$setlocale = setlocale(LC_ALL, $locale); 
```

# powershell - powershell GCI递归跳过文件夹和某些文件类型

> ID：14405606
> 
> 赞同：1
> 
> 时间：2013-01-18T18:49:12.167
> 
> 标签：powershell, directory, file-extension, get-childitem

目前我正在使用这一行来收集某个路径（及以后）中的所有文件

```
$files = Get-ChildItem -Path $loc -Recurse | ? { !$_.PSIsContainer } 
```

但是现在我一直要求生成此列表，同时排除（例如）所有“docx”和“xlsx”文件......以及名为“scripts”的文件夹及其内容

我想将这些文件扩展名和目录名从 txt 文件读入一个数组并简单地使用该数组。

速度也很重要，因为我将在这些文件上执行的功能需要足够长的时间，我不需要这个过程减慢我的脚本 10 完整（有点可以）

非常感谢您的任何意见

失败的尝试：

```
gi -path H:\* -exclude $xfolders | gci -recurse -exclude $xfiles | where-object { -not $_.PSIsContainer } 
```

我认为这有效，但仅在 H:\ 驱动器的根目录排除文件夹

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T19:29:13.263

像这样的东西？我只比较实际路径（来自 $loc 的路径），以防`$loc`包含要忽略的文件夹名称之一。

```
$loc = "C:\tools\scripts\myscripts\"
$files = Get-ChildItem -Path $loc -Recurse -Exclude *.docx, *.xlsx | ? { !$_.PSIsContainer -and !($_.FullName.Replace($loc,"") -like "*scripts\*") } 
```

多个文件夹（这很难看）：

```
#Don't include "\" at the end of $loc - it will stop the script from matching first-level subfolders
$loc = "C:\tools\scripts\myscripts"
$ignore = @("testfolder1","testfolder2");

$files = Get-ChildItem -Path $loc -Recurse -Exclude *.docx, *.xlsx | ? { !$_.PSIsContainer } | % { $relative = $_.FullName.Replace($loc,""); $nomatch = $true; foreach ($folder in $ignore) { if($relative -like "*\$folder\*") { $nomatch = $false } }; if ($nomatch) { $_ } } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-13T17:18:51.790

我也在尝试这样做，而[Graimer](https://stackoverflow.com/users/702944/graimer)的答案没有奏效（也太复杂了），所以我想出了以下内容。

```
$ignore = @("*testfolder1*","*testfolder2*");
$directories = gci $loc -Exclude $ignore | ? { $_.PSIsContainer } | sort CreationTime -desc 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T19:29:50.160

如果我理解了这个问题，那么您就走在了正确的道路上。要排除 *.docx 文件和 *.xlsx 文件，您需要将它们作为过滤字符串数组提供给 -exclude 参数。

```
$files = Get-ChildItem -Path $loc -Recurse -Exclude @('*.docx','*.xlsx') | ? { !$_.PSIsContainer } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-08-22T05:18:22.887

在 PowerShell 版本 3 中，我们可以告诉 Get-ChildItem 仅显示文件，如下所示：

```
PS> $files = Get-ChildItem -File -Recurse -Path $loc 
```

如果您只想收集某些文件名（例如 abc*.txt），您还可以使用过滤器：

```
PS> $files = Get-ChildItem -File -Recurse -Path $loc -Filter abc*.txt 
```

# ruby-on-rails - 控制器规范中的 RSpec 存根辅助方法

> ID：14405609
> 
> 赞同：10
> 
> 时间：2013-01-18T18:49:16.893
> 
> 标签：ruby-on-rails, rspec, rspec-rails

发现了类似的问题，但令人惊讶的是，我发现没有，给出一个简单的答案......

试图在我的控制器规范中存根辅助方法；不太确定需要加倍的对象是什么？

控制器调用此方法：

```
#app/helpers/sessions_helper.rb

def signed_in?
  current_user.present?
end 
```

我想在规范中存根它以返回真/假。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-01-18T19:07:04.767

您可以从控制器规范中存根它：

```
controller.stub!(:signed_in?).and_return(true) # emulate signed in user
controller.stub!(:signed_in?).and_return(false) # emulate unsigned user 
```

对象“控制器”是在控制器规范中预定义的。

**更新：**

使用 RSpec 3 语法：

```
allow(controller).to receive(:signed_in?).and_return(true)
allow(controller).to receive(:signed_in?).and_return(false) 
```

感谢@jakeonrails 的提醒。

# ruby - 如何始终使用记录器记录 IP？

> ID：14405610
> 
> 赞同：0
> 
> 时间：2013-01-18T18:49:20.027
> 
> 标签：ruby, logging, sinatra

> **可能重复：**
> [在 Sinatra 中获取客户端的 IP 地址？](https://stackoverflow.com/questions/1319331/get-clients-ip-address-in-sinatra)

我将 Sinatra 与 Apache 和Passenger 一起使用。

我目前正在使用以下记录器`config.ru`：

```
LOGGER = Logger.new("logs/sinatra.log") 
```

我可以使用以下方法在我的应用程序中记录内容：

```
LOGGER.error "Log msg" 
```

示例日志条目如下所示：

```
E, [2013-01-18T19:43:41.857146 #19412] ERROR -- : Log msg 
```

如何将当前用户的 IP 放入日志中，它可能如下所示：

```
E, [2013-01-18T19:43:41.857146 #19412] ERROR -- : <127.0.0.1> Log msg 
```

我可以写：

```
LOGGER.error "<#{request.ip}> Log msg" 
```

但是，我想在每条日志消息上都有它，所以总是手动添加 IP 似乎是错误的方式。如何`LOGGER`配置为`request.ip`自动解析并将其放入日志中？

* * *

我按照一些答案中的建议尝试了以下方式：

配置.ru：

```
configure do
    LOGGER = Logger.new("logs/sinatra.log")
    original_formatter = Logger::Formatter.new
    LOGGER.formatter = proc { |severity, datetime, progname, msg|
        original_formatter.call(severity, datetime, progname, "#{ip} #{msg.dump}")
    }
end 
```

应用程序.rb：

```
helpers do
    def ip
        request.ip
    end
end

get '/' do
    LOGGER.info 'test'
end 
```

这是结果：

```
NameError: undefined local variable or method `ip' for #<Rack::Builder:0x00000001821c60> 
```

* * *

**更新**基于 theTinMan 的回答，我想出了以下帮手：

```
helpers do
    def log(call,msg = '')
        severity = Logger.const_get(call.upcase)
        return if LOGGER.level > severity

        msg = yield if block_given?
        LOGGER.send(call, "<#{request.ip}> #{msg}")
    end
end 
```

所以我可以这样做：

```
log :info, 'msg'
log(:debug) { very.expensive.operation } 
```

这看起来像我想要的解决方案。有没有改进的余地？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T05:56:53.700

请参阅“ [Sinatra 中简单而理想的日志记录](https://stackoverflow.com/questions/9644753/simple-and-ideal-logging-in-sinatra?rq=1)”：

我倾向于使用类似的东西：

```
require 'sinatra'
use Rack::Logger

def log(msg)
  logger.info('%s: %s' % [request.ip, msg])
end

get '/' do
  log("Request for '/'")
  '<html><body>psych</body></html>'
end 
```

哪个输出：

```
我，[2013-01-18T23:39:42.049072 #81011] INFO -- : 127.0.0.1: 请求“/”
127.0.0.1 - - [2013 年 1 月 18 日 23:39:42] “GET / HTTP/1.1” 200 31 0.0034

```

我可以继承 Logger 或对其进行修补，但我更喜欢将 logger 调用包装在本地方法中。我们在工作中的几个应用程序中使用它，并且效果很好。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-18T19:25:55.273

您可以覆盖 Logger 的格式化程序。有关示例，请参见[http://www.ruby-doc.org/stdlib-1.9.3/libdoc/logger/rdoc/Logger.html 。](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/logger/rdoc/Logger.html)您可以创建一个 sinatra 辅助方法来返回请求 IP，以便可以从格式化程序 proc 调用它。

# php - 将数字加到 PHP 中的变量中

> ID：14405611
> 
> 赞同：0
> 
> 时间：2013-01-18T18:49:24.980
> 
> 标签：php, if-statement

我有一个相当简单的问题，我相信我可以在这个论坛上找到一个简单的解决方案。我的代码在这里：

```
<?php
    $tekst = $_POST['tekst'];
    $billeder = $_POST['billeder'];
    $kørende = $_POST['kørende'];
    $cms = $_POST['cms'];
    $funktioner = $_POST['funktioner'];
    $select = $_POST['select'];
    $pris = 0;

    if (isset($_POST['submit'])) {
        if ($select >= 1) {
            $pris + 100;
        }
        if ($select >= 2) {
            $pris + 100;
        }
        echo $pris;
    }
    ?> 
```

因此，如果用户在下拉复选框菜单中选择“1”，则变量“$pris”将为 100。如果用户在下拉复选框菜单中选择“2”，则变量“$pris”将为 200。通过他们两个。但是，“$pris”现在什么都不返回，因为它没有正确设置。但是有没有一种我不知道的好方法呢？在这种情况下，请告诉我。

我的新更新代码：

```
 if (isset($_POST['submit'])) {
        if ($select >= 1) {
            $pris = $pris + 100;
        }
        if ($select >= 2) {
            $pris = $pris + 100;
        }
        echo $pris;
    }
    ?> 
```

但是，我想知道您使用“+=”是什么意思。你可以解释吗？

更新：

我刚刚得到了答复，非常感谢，我现在将继续我的工作。:-)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-18T18:50:51.773

`$pris + 100` 如果您不将其分配到某个地方，则毫无意义。使用**`+=`**或`$pris = $pris + 100;`

```
<?php
    $tekst = $_POST['tekst'];
    $billeder = $_POST['billeder'];
    $kørende = $_POST['kørende'];
    $cms = $_POST['cms'];
    $funktioner = $_POST['funktioner'];
    $select = $_POST['select'];
    $pris = 0;

    if (isset($_POST['submit'])) {
        if ($select == 1) {
            $pris += 100;
        }
        if ($select == 2) {
            $pris += 200;
        }
        echo $pris;
    }
    ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T18:55:41.503

您可能想将 echo 移到 之外`if`，这可能就是没有打印出来的原因。

```
$pris = 0;

if (isset($_POST['submit'])) {
    if ($select == 1) {
        $pris += 100;
    }
    else if ($select == 2) {
        $pris += 100;
    }

    //echo here will output nothing here if $_POST["submit"] is not set
}

echo $pris;  //this should output 0 if any condition above was not met 
```

# cocos2d-x - Cocos2dX，资产在构建或运行时被删除（Eclipse Juno，Android C++ 项目）

> ID：14405613
> 
> 赞同：6
> 
> 时间：2013-01-18T18:49:57.183
> 
> 标签：cocos2d-x, cocos2d-android

有人可以建议在哪里以及如何将资产添加到 Android Cocos2D-X 项目。我已经尝试过将资产链接到 Eclipse 中的“资产文件夹”，以及通过项目所在的文件系统将资产的副本物理放置在资产文件夹中。但是当我在 Eclipse 中构建或运行项目时，这些资产会被删除。我也尝试过运行“build_native.sh”，然后在 Eclipse 中运行 projectt，正如该站点上的其他帖子所建议的那样，但在所有情况下，资产都会被删除。

我是否需要在另一个位置放置我的资产。我还需要手动将它们添加到项目内的配置文件中（例如：清单文件）。

我的系统：Mac OS Lion Eclipse Juno Cocos2D-X v2.1 Beta 3

请指教。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-19T05:09:39.447

正如您在 HelloCpp 或任何示例项目中看到的那样，您的文件夹结构中有 Resources 文件夹。那就是您必须放置图像等的地方。

至于资产，你不需要做任何事情，只需运行 build_native.sh，Assets 文件夹将在 proj.android 文件夹中由它自己生成。

要了解更多信息，只需打开 build_native.sh，其中有三行表示将资源复制到资产文件夹

我希望你得到你的答案祝你好运：如果有进一步的疑问，请随时询问。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-01T05:21:09.917

详细解释。您需要将要使用的图像文件放入您正在运行的 Cocos2DX 项目的“Resources”文件夹中。然后你需要从 Cygwin 程序运行 ./build_native.sh。

示例：您正在构建一个名为 cppgame 的游戏。您使用 Cocos2DX 文件夹中的 Create-android-project.bat 文件创建一个名为 cppgame 的项目。现在你在 c: 盘 (c:/cocos2dx/cppgame/) 上有了一个 cppgame 项目文件夹。在该文件夹中，您还创建了一个“资源文件夹”（c:/cocos2dx/cppgame/Resources/）。

1.  将要使用的所有图像文件（sprite.png、*.png）放在“资源文件夹”中。
2.  以管理员身份打开 Cygwin 并导航到 c:/cocos2dx/cppgame/proj.android/ 文件夹。
3.  在 Cgywin 提示符（“$”）中键入“./build_native.sh”。

这应该将所有图像文件放入项目的资产文件夹中，现在您可以使用它们来创建精灵！

说明： build_native.sh 文件将图像文件复制到 assets 文件夹并设置一些特殊权限，以便在您运行程序时它们不会被删除。如果对cygwin编码有更好理解的人可以更好地解释它，我将不胜感激。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-22T09:08:49.437

它是一个简单的批处理脚本（batch_native.py），将资源从多平台“Resource”文件夹（用于 cocos2d-x 模板）复制到 Android 上使用的 assets 文件夹。

一步解决方案：只需将所有 imageName-sd.png、imageName-hd.png 等复制到资源文件夹即可。

快乐编程:)

batch_native.py 将文件复制到 android assets 文件夹。

```
# copy resources
for file in "$APP_ROOT"/Resources/*
do
if [ -d "$file" ]; then
cp -rf "$file" "$APP_ANDROID_ROOT"/assets 
fi
if [ -f "$file" ]; then cp "$file" "$APP_ANDROID_ROOT"/assets
fi
done 
```

# c# - 如何在 C# 中重定向

> ID：14405618
> 
> 赞同：1
> 
> 时间：2013-01-18T18:50:17.690
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3

在使用 C# 的 MVC 3 中，我想重定向某些未经验证的方法。但是，这似乎不起作用：

```
 private ActionResult m_VerifyLogin()
    {
        if (Session["isLogged"] == null || (int)Session["isLogged"] != 1)
        {
            return RedirectToAction("Index", "Home");
        }

        return View();
    } 
```

有谁知道我能做什么？即使我创建了一个 ActionFilterAttribute 我希望它非常简单！

- 编辑 -

感谢您的所有回答。我们尝试了您提出的一些问题，然后在测试后提出了这个问题：

**自定义 ActionFilterAttribute：**

```
public class IsLoggedAttribute : ActionFilterAttribute
{

    public override void OnActionExecuting(ActionExecutingContext filterContext)
    {
        if (filterContext.HttpContext.Session["isLogged"] == null || (int) filterContext.HttpContext.Session["isLogged"] != 1)
        {
            filterContext.HttpContext.Response.RedirectToRoute(new { controller = "Home" });
        }

        base.OnActionExecuting(filterContext);
    }

} 
```

我可以将 [IsLogged] 抛出到路由方法之上。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-18T18:53:51.460

制定你的行动方法`public`。您的代码看起来不错，因为要重定向到另一个动作/控制器，动作方法可以通过`RedirectToAction`Controller 基类的方法返回。

```
public ActionResult m_VerifyLogin()
{
    if (Session["isLogged"] != null || (int)Session["isLogged"] != 1)
    {
        return RedirectToAction("Index", "Home");
    }
    return View();
} 
```

你的`if`说法也有点奇怪。您检查会话中的值是否为空，并使用`OR`逻辑运算符将其强制转换（可能为空）以使用值进行测试。你可以尝试做这样的事情：

```
//If session value is not null then try to cast to int and check if it is not 1.
if (Session["isLogged"] != null || (int)Session["isLogged"] != 1) 
```

如果控制器中的`Index`操作已应用并且当前用户无效，您将获得重定向到表单身份验证配置中定义的登录页面。您还可以使用具有更好名称的操作方法名称来获取友好的 url，例如.`Home``ActionFilterAttribute``VerifyLogin`

```
public ActionResult VerifyLogin()
{
    if (Session["isLogged"] != null || (int)Session["isLogged"] != 1)
    {
        return RedirectToAction("Index", "Home");
    }
    return View();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T18:57:42.467

`RedirectToAction()`返回一个对象，当您**从您的操作**`RedirectToRouteResult`返回时，该对象告诉 MVC 发送重定向。

 **调用方法而不使用它的返回值不会做任何事情。

您需要从操作本身返回私有方法的结果。**

# c - C 删除列表中的第一个元素

> ID：14405626
> 
> 赞同：0
> 
> 时间：2013-01-18T18:50:56.620
> 
> 标签：c, list, struct

我有一个结构：

```
struct Node {
    int value;
    struct Node *next;
};

typedef struct Node List; 
```

而且我已经实现了将项目添加到列表中，但是当它是给定列表中的第一个元素时，我从列表中删除元素时遇到问题，我的函数：

```
void removeItem(List *ptr, int i)
{
    List *current = ptr;
    List *prev = NULL;
while (current != NULL)
{
    if (current->value == i)
    {
                    //it's first element
        if (prev == NULL)
        {
            List *replace = ptr->next;
            free(current);
            ptr = replace;
            current = replace;
        }
        else
        {
            prev->next = current->next;
            free(current);
            current = prev->next;
        }
    }
    else
    {
        prev = current;
        current = current->next;
    }
}
} 
```

当我的清单是这样的：

> 1、2、3、4、5

使用*removeItem(list, 1)*后，它是：

> 0、2、3、4、5

*0*不应该在那里。

另一个问题是，当 typedef 不同时，我也应该实现这些功能：

```
typedef struct Node *List; 
```

但是后来我得到了大量的“错误的参数类型”/“在不是结构或联合的东西中请求成员'值'”错误。我能找到一些应该如何处理的例子吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T19:02:19.210

您的问题是您传入 ( `list`) 的变量不会被您的删除代码修改。因此，当`Node`您`List`删除.`Node``List`

原因是这样的：

当您调用 时`removeItem(list, 1)`，您传递的是 的值`list`。在这种情况下，它是类型为 的数据地址`List`。在`removeItem`函数内部，该值由`ptr`变量携带。当您输入函数时，`ptr`变量是您的地址，您`List`可以使用它进行工作。在该行`ptr = replace`中，您所做的只是更改`ptr`. 它不影响被调用`list`范围内的值。`removeItem`

最简单的做法是`removeList`返回一个指向结果列表头部的指针。对于大多数呼叫，它将与来电相同`ptr`；只有当removed`Node`位于 的头部时`List`，结果指针才会不同。

或者，您可以进行更改`removeList`，使其需要一个指向 a 的指针`List`，然后将其称为 as `removeList(&list, 1)`，这将允许您直接修改 in 的值`list`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T19:02:56.000

这看起来像一个家庭作业问题，所以我不想直接回答，但有两个线索：

*   如果您的目标是更改函数调用中列表指向的`removeItem()`内容，那么第一个参数的类型`removeItem()`需要是什么？

*   如果我告诉您，在某些实现中，`free()`将指针变量清零以帮助调试该变量指向的空间，这会帮助您理解所获得的输出吗？

当你得到这个工作时，请随时发布你自己问题的答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-20T16:33:24.657

所有答案都有帮助，这是最终功能：

```
void removeItem(List *ptr, int i)
{
    while ((*ptr) != NULL)
    {
        if ((*ptr)->value == i)
        {
            List tmp = *ptr;
            *ptr = (*ptr)->next;
            free(tmp);
        }
        else
        {
            ptr = &((*ptr)->next);
        }
    }
} 
```

正常工作：

```
List ptr = malloc(sizeof(List));

//add items to list:
//1, 1, 2, 3, 4, 4, 5, 5,

removeItem(&ptr, 5);
removeItem(&ptr, 2);
removeItem(&ptr, 1);

//print and clean
//3, 4, 4, 
```

# python - QT：如何在点击事件上展开/折叠文本（qtextbrowser，qwebview，...）

> ID：14405630
> 
> 赞同：2
> 
> 时间：2013-01-18T18:51:21.693
> 
> 标签：python, qt, pyqt, qwebview, qtextbrowser

我必须在 python/QT UI 中显示大量文本。此文本表示测试仪发送的模式（数字信号）。

例子：

```
// Command 1
0x002045A85
0x002045A84
0x002045A83
...
// Command 2
0x002045A85
0x002045A84
0x002045A83
... 
```

我只会在 UI 上显示模式中包含的注释。如果用户单击注释行，文本将展开，一些十六进制代码将写入单击的行下方。如果用户再次单击同一注释行，十六进制行将被折叠。

如果用户单击十六进制线，将弹出带有数字信号的图形。

我不知道该怎么做。

拜托，有人可以给我一个可以帮助我发展的例子吗？

贝努瓦

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T21:45:10.777

使用`QTreeWidget`：“Command N”行是您的第一级，可以展开以显示十六进制数字项。`QTreeWidget`有一个`clicked()`信号可以为您提供单击的项目，因此实现显示信号图形的单击事件应该很容易。

这种方法的唯一缺点是`QTreeWidget`需要您一次创建整个树结构。如果您的数据非常大并且内存使用成为问题，您可以稍后将此 UI 扩展为`QTreeView`具有自定义模型的自定义模型，该模型可以延迟加载二级数据。

# java - Java双括号初始化总是有效吗？

> ID：14405631
> 
> 赞同：15
> 
> 时间：2013-01-18T18:51:25.530
> 
> 标签：java, initializer, double-brace-initialize

我知道这段代码：

```
Set<String> set = new HashSet<String>() {{
  add("test1");
  add("test2");
}}; 
```

是真的：

```
Set<String> set = new HashSet<String>() {
  {//initializer
    add("test1");
    add("test2");
  }
}; 
```

初始化程序块在构造程序块**之前执行。**在上面的例子中， add("test1") 在构造函数被执行之前被调用。构造函数可能正在初始化许多实例字段，以便此类可以工作。我想知道为什么在构造函数之前调用**.add()**会起作用？有没有导致问题的案例？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-18T19:04:07.773

您遗漏了一个细节来解释这一点。

首先，让我们回顾一下[初始化过程](http://docs.oracle.com/javase/specs/jls/se7/html/jls-12.html#jls-12.5)的第 3 步到第 5 步（总结）：

3\. 调用超类构造函数
4\. 调用实例初始化器
5\. 调用构造函数体

您遗漏的细节是您的表达式不仅仅是创建`HashSet`类的新实例，它实际上是创建匿名子类的新实例`HashSet`。（我相信这是在[第 15.9.1 节](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.9.1)中指定的。）

由于您没有声明构造函数，因此使用默认构造函数。但在此之前，超类的构造函数`HashSet`已经完成。

因此，总而言之，`HashSet`构造函数在初始化程序块运行之前完成。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-18T18:56:24.467

这个假设是错误的：

> 初始化程序块在构造程序块之前执行。

因为在这种特殊情况下，初始化块***是***构造器块的一部分。

文档[明确](http://docs.oracle.com/javase/tutorial/java/javaOO/initial.html)指出

> Java 编译器将初始化程序块复制到每个构造函数中。因此，这种方法可用于在多个构造函数之间共享代码块。

我认为您对静态初始化程序感到困惑。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-18T18:59:16.630

实例初始化器在对象被构造后立即执行。您基本上是在创建 HashSet 的内联扩展，然后在创建它之后“立即”向其中添加两个项目。

这是用于测试的模拟对象中的常见使用模式，例如在 JMock 中，但也有其他方便的用途。

希望这可以帮助。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-01-18T19:00:16.280

我认为这是一种不好的做法，因为它会创建毫无意义的子类，这些子类会影响应用程序的内存使用和性能。无论如何，该程序是正确的，因为在实例初始化程序之前调用了超类构造函数。因此，当您的初始化程序运行时，`HashSet`构造函数已运行，因此调用`add`将起作用。

# c# - 什么是双 [*,*]？

> ID：14405633
> 
> 赞同：3
> 
> 时间：2013-01-18T18:51:45.990
> 
> 标签：c#

我目前尝试将 .mat 文件转换为 XML。对于这个任务，我必须使用一个库，它给了我一个动态对象。我知道 .mat 文件的结构，所以我可以从中获取数据。我将这些数据存储在一个对象中。.mat 文件的值之一是 MATLAB-type `<1701x256 double>`。我以为会这样`double[][]`。但是当我尝试分配值时，我得到：

```
Unbehandelte Ausnahme: Microsoft.CSharp.RuntimeBinder.RuntimeBinderException: Der 
double[*,*]-Typ kann nicht in double[][] konvertiert werden.
   bei CallSite.Target(Closure , CallSite , Object )
   bei System.Dynamic.UpdateDelegates.UpdateAndExecute1[T0,TRet](CallSite site,T0 arg0)
   bei CameraParser.Program.Main(String[] args) in c:\myProject\Program.cs:Zeile 44. 
```

什么是`double[*,*]`类型？我为其赋值的对象的属性应该属于哪种类型？

我试过了

```
double[][] myAttribute; 
```

和

```
double[] myAttribute; 
```

和

```
double** myAttribute; 
```

最后一个给了

```
Error   6   Pointers and fixed size buffers may only be used in an unsafe context 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T19:21:49.237

类型名称中的`*`表示您返回了不符合要求的数组类型。特别是与 COM 服务器很常见，它们倾向于使用 1 作为下限。您不能将此类数组转换为 C# 数组类型，它仅支持下限为 0 的数组。但您可以将其转换为`Array`.

使用 Array 方法访问数组。就像 Array.GetLowerBound() 告诉你从哪里开始索引，GetUpperBound() 找出停止的地方。使用 Array.GetValue() 读取数组元素。您将需要采用 int[] 的重载，因为这是一个二维数组而不是锯齿状数组。

# wordpress - 知道要挂钩哪个 wordpress 事件的最佳方法是什么？

> ID：14405636
> 
> 赞同：1
> 
> 时间：2013-01-18T18:52:00.310
> 
> 标签：wordpress, action, hook

比如说，您想在创建新帖子时单击发布帖子按钮时执行一些操作。举个例子，假设您希望在每次创建帖子时自动向某人发送一封电子邮件。

问题是什么是了解哪些核心功能可以挂钩的最佳方式 - 执行电子邮件。

还是您猜到了——严格依赖于您的 WordPress API 内存？例如，您可能会认为，由于此操作与创建帖子有关，您应该在包含单词的插件/操作 codex 页面中搜索函数名称，`post`然后通过扫描它们可能会找到诸如 wp_insert_post 之类的项目， wp_update_post、save_post、post_X、X_post 等？这是常态吗？

对于这种特殊情况，您可能会以 wp_insert_post 或 save_post 结束。但我的问题很笼统。这是解决问题的正确方法吗？

或者..是否有另一种或更有效的方式（可能是插件）让我知道哪些（可挂钩）核心功能在当前或上一个请求中运行？这样，我可以获得所有相关函数的明确列表，供我选择或阅读**哪些直接处理我感兴趣的当前请求**。没有更多的猜测工作......

请注意，由于标头重定向，当前请求可能无法切断它，您需要能够获取上一个请求中所有可挂钩函数的列表。（在遇到重定向代码之前刚刚运行的那个）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T20:49:49.927

我找出可用钩子的方法很简单；我使用本地 Apache/MySQL 安装 WordPress 的副本，然后使用[PhpStorm](http://www.jetbrains.com/phpstorm/) + [Zend 调试器](https://www.jetbrains.com/phpstorm/webhelp/configuring-zend-debugger.html)并跟踪代码并查看触发的钩子。从那里我只是根据我的需要的上下文决定哪个钩子最好，通常如果有几个潜在的钩子，那么使用哪个是很明显的。

还有其他方法，例如[检测钩子列表，](https://wordpress.stackexchange.com/questions/307/where-can-i-find-a-list-of-wordpress-hooks/339#339)并且可能有一些方法可以使用调试栏（附加组件）来获取该信息，但根据我的经验，所有这些方法都像是在黑暗中摸索着寻找光明转变。如果您使用调试器，就像打开电灯开关一样，您可以毫不费力地看到电灯开关的确切位置。

# .net - 通过 SSRA 从数据库中提取数据时如何自动超链接字段？

> ID：14405637
> 
> 赞同：0
> 
> 时间：2013-01-18T18:52:01.713
> 
> 标签：.net, reporting-services, report

我正在制作一份 SSRS 报告。我试图以这样一种方式提取数据，如果字段（我在报告中提取）是一个超链接，那么它将在报告页面中显示为一个活动的超链接。

我正在从 VarChar 中提取数据，并且该列包含一些数据，例如“这是带有[http://www.stackoverflow.com](http://www.stackoverflow.com)的列，它应该在报告页面中处于活动状态”。

我在想任何超链接都应该在任何浏览器中自动激活，但事实并非如此。

有人可以帮忙吗。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T20:41:28.710

选择单元格值>右键单击>单击属性>左窗格上的选择操作>选择“转到 URL”>在“选择 URL：”下确保使用具有正确 varchar 链接位置的列。

# quartz-scheduler - Quartz .NET 配置可执行位置

> ID：14405638
> 
> 赞同：0
> 
> 时间：2013-01-18T18:52:06.673
> 
> 标签：quartz-scheduler, config

我正在设置一组新的作业和触发器。有没有办法通过添加元素的路径将应用程序文件放入 Quartz.Server 配置文件的不同目录或子目录中？我在配置文件中尝试了几种变体，但没有成功：

例如：

而不是这个：

```
<job-type>MyNameSpace.MyApp, MyAppExectableFile</job-type> 
```

做这样的事情：

```
 <job-type>MyNameSpace.MyApp, programs\daily\MyAppExectableFile</job-type> 
```

谢谢...安东

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T00:58:19.143

我相信您必须编写自己的 JobFactory 来处理您的工作，如果您将任何 IoC 用于您的 Job 实现，您可能需要它。参考：

[http://jayvilalta.com/blog/2012/07/02/quartz-net-ijobfactory-interface/](http://jayvilalta.com/blog/2012/07/02/quartz-net-ijobfactory-interface/) [http://jayvilalta.com/blog/2012/07/16/configuring-quartz-net-to-use- a-custom-job-factory/](http://jayvilalta.com/blog/2012/07/16/configuring-quartz-net-to-use-a-custom-job-factory/) [http://jayvilalta.com/blog/2012/07/23/creating-a-custom-quartz-net-jobfactory/](http://jayvilalta.com/blog/2012/07/23/creating-a-custom-quartz-net-jobfactory/)

然后，您可以使用[AppDomain.AssemblyResolve](http://msdn.microsoft.com/en-us/library/system.appdomain.assemblyresolve.aspx)在其他位置获取您的程序集。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-04-12T15:20:26.507

我真的迟到了。

但我想分享我的解决方案，所以也许其他人会发现它有用。

在调度程序项目的 App.Config 中添加`probing paths`作业所在的路径（带有 ）：

```
<runtime>
    <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
        <probing privatePath="Test1;Test2" />
        ...
    </assemblyBinding>
</runtime> 
```

在此示例中，您可以在执行目录中有 2 个文件夹，其中包含 2 个作业。

工作定义仍然：

```
<job-type>MyNameSpace.TestApp1, MyAppExectableFile</job-type> 
```

并且**您不需要**修改路径，例如：`Test1/MyAppExectableFile`.

这个解决方案可以解决另一个（在我看来）你可以使用 Quartz.net 找到的大麻烦：不同工作中的不同版本的 dll。

# c++ - 如何使用范围 [0,1] 切换矩阵中的元素？

> ID：14405640
> 
> 赞同：2
> 
> 时间：2013-01-18T18:52:10.973
> 
> 标签：c++, opencv

我有这个矩阵，

```
0 1 0
1 0 1
0 1 0 
```

我想将每个 1 值元素切换为 0，反之亦然：

```
1 0 1
0 1 0
1 0 1 
```

如果我使用[按位补码运算符](http://docs.opencv.org/modules/core/doc/basic_structures.html#matrix-expressions)，即`dst = ~src`我得到了这个结果

```
255 254 255
254 255 254
255 254 255 
```

当然，我可以通过一些算术和循环得到我想要的结果。但是有什么简单的方法可以在 OpenCV 中实现我想要的矩阵吗？谢谢。

**更新：**

这是代码片段：

```
#include <opencv2/imgproc/imgproc.hpp>
#include <iostream>

int main()
{
    cv::Mat a = (cv::Mat_<uchar>(3,3) << 0, 1, 0,
                                         1, 0, 1, 
                                         0, 1, 0 );
    cv::Mat b = ~a;
    std::cout << b << std::endl;

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T19:26:43.090

如果你只有`ones`and `zeros`，你可以这样做：

`cv::Mat b = 1 - a;`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-18T19:27:46.380

另一种选择是

```
dst = 1 - src; 
```

尽管如果您最终得到数组中不在 [1, 0] 中的任何内容，这将失败。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-18T19:02:20.267

尝试这个：

```
dst = src ? 0 : 1; 
```

这会将`src`值隐式转换为`bool`.
请注意，任何其他`src`值`1`也将设置为`0`使用该语句。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-18T19:23:26.913

这是另一个解决方案

```
dst = !src 
```

它可以节省您输入的一些字母

# java - 如何在 Eclipse 中自动修复“声明的包不匹配...”错误？

> ID：14405644
> 
> 赞同：1
> 
> 时间：2013-01-18T18:52:24.800
> 
> 标签：java, eclipse

我在 Eclipse 中有许多 Java 文件，它们的顶部当前有错误的包。但是，它们位于正确的目录中。我想一次修复所有错误（阅读：不是手动）。

我尝试了以下方法：

*   如果我转到问题视图并尝试快速修复，我一次只能做一个。如果我选择一些子集并尝试快速修复（所有这些都带有“声明的包”错误），它表明它们没有任何共同点。

*   我也尝试过使用 Source -> Clean Up 但它也不能解决我的错误。

*   我最后的希望是搜索和替换，但我真的想要一些更自动化的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T19:52:32.593

看起来这里有一个答案：

[Eclipse - 如何在整个项目中“将包声明更改为 ....”](https://stackoverflow.com/questions/6865694/eclipse-how-to-change-package-declaration-to-across-an-entire-project)

并引用答案：

“不幸的是，没有办法一次性解决多个单元的问题；你必须对每个问题应用快速修复。”

# javascript - 如何从 javascript 中返回的对象中引用私有方法？

> ID：14405645
> 
> 赞同：0
> 
> 时间：2013-01-18T18:52:27.793
> 
> 标签：javascript, reference, closures

从 javascript 中返回的对象中引用私有方法的最佳方法是什么？我给你留下一些示例代码：

```
var HelloWorld = (function(){
    var hello = function(){
        console.log("hello")
    },
    return{
        addToList: function(){
            //how can i reference hello from here dynamically like:
                            //this["hello"] or this["hell" + "o"]
        }       
    }
})() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T18:55:40.560

因为 return 仍在闭包内，所以你可以直接调用`hello`。所以：

```
hello(); 
```

正如其他答案所建议的那样，要使其“动态”，您需要保存`hello`一些内容。如果您想将它附加到`this`而不是另一个对象，您只需要存储一个引用，`this`以便以后可以访问它。

```
var HelloWorld = (function(){
  var self = this;
  this.hello = function(){
    console.log("hello")
  };
  return {
    addToList: function(){
        self["hello"]();
    }       
  }
})(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T19:01:28.697

照原样，您不能`hello`像示例代码的注释中提到的那样“动态地”引用该函数。（我假设您对“动态”的定义是给定一个包含单词“hello”的字符串，并以某种方式使用它来引用函数`hello`。）

但是，您可以将 hello 移动到一个对象中，并使用方括号表示法从该对象中引用它：

```
var HelloWorld = (function () {
    var privateCode = {
        hello: function () {
            console.log('hello');
        }
    };

    return {
        addToList: function () {
            // access via `privateCode['hello']()`
        }       
    };
}()); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-18T19:09:39.503

你不能使用`this`，因为你还没有把它变成对象的一部分。

```
var HelloWorld = (function () {

    var hello = function () { console.log("hello"); };

    return {
        addToList : function () { hello(); }
    };

}()); 
```

那会很好用。

如果您需要使用字符串来访问它，那么您需要 make `hello`，那么您有两种选择：

1）创建一个公共函数，你可以用一个字符串调用它，它调用`hello`

```
return {
    command : function (string) { if (this[string]) { this[string](); },
    sayHello : function () { hello(); }
}; 
```

2）创建一个私有对象，它存储你的方法（然后你可以用字符串调用它）：

```
var private_actions = {
    hello : function () { console.log("hello"); }
};

return {
    command : function (string) {
        if (private_actions[string]) { private_actions[string](); }
    }
}; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-18T18:57:26.010

`hello()`不是一种方法。它只是闭包中的一个函数。所以，你可以从你的`addToList()`方法中调用它。

如果您希望该`hello`函数的行为类似于`this`设置为对象实例的方法，则必须像本示例中那样将实例传递给它。

```
var HelloWorld = (function(){
    var hello = function(){
        console.log("hello")
    },
    return{
        addToList: function(){
            //how can i reference hello from here dynamically like:
            hello.call(this);
        }       
    }
})() 
```

* * *

如果您真正想做的是通过字符串引用访问 hello 函数，那么您将无法轻松地通过字符串名称访问局部变量。如果您想这样做，您可能必须将 hello 函数放入本地对象中，如下所示：

```
var HelloWorld = (function(){
    var locals = {
        hello: function(){
            console.log("hello")
        }
    };
    return{
        addToList: function(){
            //how can i reference hello from here dynamically like:
            locals["hello"].call(this);
        }       
    }
})() 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-18T19:23:02.877

由于`hello`只存在于匿名 IIFE 的范围内，因此您需要将其存储一些中间对象，以便能够`hello`从公共方法动态访问：

```
var HelloWorld = (function(){
    var privates = {
        hello: function (){
            console.log("hello")
        }
    };

    return {
        addToList: function (){
            privates['hello']();
        } 
    }
})();

HelloWorld.addToList(); 
```

[工作示例](http://jsfiddle.net/CqZ2G/)

# c# - 使用 C# 更改文件夹权限似乎不起作用

> ID：14405648
> 
> 赞同：0
> 
> 时间：2013-01-18T18:52:50.207
> 
> 标签：c#, permissions, acl

当谈到许可时，我真的超出了我的舒适区。但我想创建一个文件夹并让所有用户完全控制它。

```
DirectoryInfo NewDir = Directory.CreateDirectory(@"C:\Test");
DirectorySecurity dSecur = NewDir.GetAccessControl();
FileSystemAccessRule fAccess =
    new FileSystemAccessRule("Users", FileSystemRights.FullControl,AccessControlType.Allow);
dSecur.AddAccessRule(fAccess);
NewDir.SetAccessControl(dSecur); 
```

但是下图显示用户仍然没有完全控制权。

![在此处输入图像描述](../Images/cd9aed639f1a4ebfd1029d275ee5646b.png)

我错过了什么吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T18:55:21.590

如果您想要完全控制，那么您需要同时传递`ContainerInherit`和`ObjectInherit`。`InheritanceFlags`

```
new FileSystemAccessRule(
    User, 
    FileSystemRights.FullControl, 
    InheritanceFlags.ContainerInherit | InheritanceFlags.ObjectInherit,
    PropagationFlags.InheritOnly, 
    AccessControlType.Allow
) 
```

并确保在具有足够权限的用户下运行以授予其他用户完全控制权。

# r - R中带有十进制数字的茎叶图

> ID：14405649
> 
> 赞同：0
> 
> 时间：2013-01-18T18:52:51.527
> 
> 标签：r

我对茎和叶绘图功能有疑问。一个例子：我想阻止我的荟萃分析的相关系数。这里我只有 2 个相关系数（0,056 和 -0,022）。我尝试了以下功能：

```
y<-c(0.056, -0.022)
stem(y) 
```

我得到以下结果：

```
 -2 | 2
   -0 | 
    0 | 
    2 | 
    4 | 6 
```

但这不是正确的结果，它必须是：

```
 0 | 6
   -0 | 2 
```

所以我不明白我必须使用哪个函数来获得正确的结果。如果有人可以帮助我，我将非常感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T19:02:42.097

查看`help(stem)`并更改`scale`参数以控制茎图的长度：

```
R > stem(y, scale = 2)

  The decimal point is 2 digit(s) to the left of the |

  -2 | 2
  -1 | 
  -0 | 
   0 | 
   1 | 
   2 | 
   3 | 
   4 | 
   5 | 6 
```

这更有意义吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T22:36:45.057

我最接近您的输出的是：

```
stem(y, scale=0.5, atom=0.1) 
```

但它在顶部而不是底部有负数。

您显示的第一个是正确答案（0.04 和 0.05 词干组合在一起）即使不是所需的答案。

# c - getenv() Linux/Ubuntu 返回 NULL

> ID：14405651
> 
> 赞同：5
> 
> 时间：2013-01-18T18:52:59.090
> 
> 标签：c, linux, unix, ubuntu-12.04

我正在尝试使用 获取用户主目录`getenv("$HOME")`，但它返回 NULL。我究竟做错了什么？

```
int main(void)
{
    char * path;
    path = getenv("$HOME");
    printf ("The current path is: %s",path);

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-18T18:55:29.293

离开`$`环境变量名称。当在 shell 中使用时，`$`它不是名称的一部分，而是向 shell 发出一个变量名的信号，它应该替换它的值。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-18T18:54:18.480

```
getenv("PATH"); // This is what you really want 
```

并且，可选地，编译`-Wall`并以这样的方式结束。（经测试...）

```
#include <stdio.h>
#include <stdlib.h>

int main(void) {
  char *path;
  path = getenv("PATH");
  if(path)
    printf("The current path is: %s\n", path);
  return 0;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-18T18:54:58.940

不应该这样`getenv("PATH")`吗？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-18T19:53:23.597

对于主目录，您可以使用

```
char* homedir = getenv("HOME"); 
```

或者你可以使用

```
char* homedir = NULL;
struct passwd *pw = getpwuid(getuid());
if (pw)
   homedir = pw->pw_dir; 
```

按用途`PATH`使用`execvp``getenv("PATH")`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-04-05T03:40:15.247

由于 HOME 是一个环境变量，因此您不应在其前面加上 $ 符号。

```
char *value,name[20];
scanf("%s",name);
value=getenv(name);
if(value == NULL)
   printf("Not found");
else
   print("value = %s",value); 
```

确保您已包含 unistd.h 和所有相关的头文件。

# c# - C#需要在多行texbox中使用回车键向下移动一行，而不是离开texbox

> ID：14405653
> 
> 赞同：1
> 
> 时间：2013-01-18T18:53:05.893
> 
> 标签：c#, winforms, textbox, multiline

在 C# 中，我有一个多行文本框，用户可以在其中输入案例注释。但是，当他们输入文本框并按 Enter 键时，它会离开文本框并跳转到下一个字段，例如选项卡按钮。有什么方法可以克服这种行为并使返回键向下移动？我不需要在整个表单上禁用返回键行为，只需在一个多行文本框中即可。

谢谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-18T18:54:14.293

您需要设置属性

```
 textBox.AcceptsReturn = true; 
```

如果没有此属性，您可以使用它`CTRL+ENTER`来启动换行符。
有时，如果您需要在表单上设置默认的 AcceptButton，这很有用。

[请参阅 MSDN 文档](http://msdn.microsoft.com/en-us/library/system.windows.forms.textbox.acceptsreturn%28v=VS.85%29.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T18:53:41.287

将[`AcceptsReturn`属性](http://msdn.microsoft.com/en-us/library/system.windows.forms.textbox.acceptsreturn.aspx)设置为 true。

# xml - RESTful POST 问题 (GWT)：application/x-www-form-urlencoded 而不是 application/xml

> ID：14405657
> 
> 赞同：2
> 
> 时间：2013-01-18T18:53:17.057
> 
> 标签：xml, rest, gwt, post, jetty

我正在写一个 GWT 客户端。我需要发送一个发布请求来调用我服务器上的 REST 服务。

```
RequestBuilder builder = new RequestBuilder(RequestBuilder.POST, url);
builder.setHeader("Content-Type", "application/xml");
builder.setHeader("Accept", "application/xml"); 
```

我将一些序列化数据发送为 XML 格式，但在服务器端接收

> 应用程序/x-www-form-urlencoded

**服务器端的服务**

```
@POST
@Path("/connexion")
@Consumes("application/xml")
@Produces("application/xml")
public Response test(A a){
// ...
} 
```

我不明白发生了什么。谢谢

# image-processing - 使用单应性描述两个图像之间的非线性变换

> ID：14405659
> 
> 赞同：7
> 
> 时间：2013-01-18T18:53:29.260
> 
> 标签：image-processing, computer-vision, robotics, camera-calibration, projective-geometry

两个图像上的蓝点之间已经建立了一对一的匹配。image2 是 image1 的变形版本。失真模型似乎是鱼眼镜头失真。问题是：有没有办法计算一个描述这种转变的变换矩阵。实际上是将第一张图像上的蓝点转换为第二张图像上对应的蓝点的矩阵？这里的问题是我们不知道焦距（意味着图像未校准），但是我们确实在两张图像上的大约 200 个点之间完美匹配。 ![图像1（原始）](../Images/1d7dd15f6cfed01306525375a88d5ec1.png) 扭曲的图像： ![图像2](../Images/16b094f21a6874d2374e9c066c648ae3.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-22T13:52:46.433

我认为您尝试做的事情可以被视为失真校正问题，而不需要其他经典相机校准。

矩阵变换是一种线性变换，线性变换总是将直线映射成直线（[http://en.wikipedia.org/wiki/Linear_map](http://en.wikipedia.org/wiki/Linear_map)）。从图中可以明显看出，变换是非线性的，因此您无法用矩阵运算来描述它。

也就是说，您可以使用 OpenCV（[http://docs.opencv.org/doc/tutorials/calib3d/camera_calibration/camera_calibration.html](http://docs.opencv.org/doc/tutorials/calib3d/camera_calibration/camera_calibration.html)）使用的镜头畸变模型，并且获得系数应该不是很困难。以下是您可以在 Matlab 中执行的操作：

调用 (x, y) 原始点的坐标（上图）和 (xp, yp) 失真点的坐标（下图），两者都移动到图像的中心并除以缩放因子（对于x 和 y) 所以它们或多或少位于 [-1, 1] 区间内。变形模型为：

```
x = ( xp*(1 + k1*r^2 + k2*r^4 + k3*r^6) + 2*p1*xp*yp + p2*(r^2 + 2*xp^2));
y = ( yp*(1 + k1*r^2 + k2*r^4 + k3*r^6) + 2*p2*xp*yp + p1*(r^2 + 2*yp^2)); 
```

在哪里

```
r = sqrt(x^2 + y^2); 
```

您有 5 个参数：用于径向和切向失真的 k1、k2、k3、p1、p2 和 200 对点，因此您可以求解非线性系统。

确保工作区中存在 x、y、xp 和 yp 数组并将它们声明为全局：

```
global x y xp yp 
```

编写一个函数来评估给定一组任意失真系数的均方误差，比如它被称为“dist”：

```
function val = dist(var)

global x y xp yp

val = zeros(size(xp));

k1 = var(1);
k2 = var(2);
k3 = var(3);
p1 = var(4);
p2 = var(5);

r = sqrt(xp.*xp + yp.*yp);
temp1 = x - ( xp.*(1 + k1*r.^2 + k2*r.^4 + k3*r.^6) + 2*p1*xp.*yp + p2*(r.^2 + 2*xp.^2));
temp2 = y - ( yp.*(1 + k1*r.^2 + k2*r.^4 + k3*r.^6) + 2*p2*xp.*yp + p1*(r.^2 + 2*yp.^2));
val = sqrt(temp1.*temp1 + temp2.*temp2); 
```

用“fsolve”求解系统：

```
[coef, fval] = fsolve(@dist, zeros(5,1)); 
```

'coef' 中的值是您要查找的失真系数。要纠正原始集合中不存在的新点 (xp, yp) 的失真，请使用以下等式：

```
r = sqrt(xp.*xp + yp.*yp);
x_corr = xp.*(1 + k1*r.^2 + k2*r.^4 + k3*r.^6) + 2*p1*xp.*yp + p2*(r.^2 + 2*xp.^2);
y_corr = yp.*(1 + k1*r.^2 + k2*r.^4 + k3*r.^6) + 2*p2*xp.*yp + p1*(r.^2 + 2*yp.^2); 
```

结果将移动到图像的中心，并按您上面使用的因子进行缩放。

笔记：

*   坐标必须移动到图像的中心，因为失真相对于它是对称的。
*   没有必要对区间 [-1, 1] 进行归一化，但这样做很常见，因此获得的失真系数或多或少处于同一数量级（使用像素的 2、4 和 6 次幂）坐标需要非常小的系数）。
*   这种方法不需要图像中的点在一个统一的网格中。

# ruby-on-rails-3 - 如何在 Twitter Bootstrap 中使用 LESS

> ID：14405660
> 
> 赞同：1
> 
> 时间：2013-01-18T18:53:33.597
> 
> 标签：ruby-on-rails-3, twitter-bootstrap, less

我正在尝试在 Twitter Bootstrap 中使用 LESS 变量，但似乎无法让它们在我的 application.css 文件中呈现

所以当我设置引导程序时，我安装了

```
rails generate bootstrap:install --less 
```

这给了我我的

```
bootstrap_and_overrides.css.less 
```

所以我的理解是在这个文件中我可以像这样设置我的LESS变量

```
@white:#FFFFFF; 
```

然后在我的css文件中我可以像这样调用它们

```
color: @white; 
```

在我的 bootstrap.less 文件中，我称之为

```
@import "twitter/bootstrap/bootstrap";
@import "twitter/bootstrap/responsive";
@import "twitter/bootstrap/variables.less"; 
```

在我的 application.css 文件中，我调用 bootstrap 文件

```
*= require bootstrap_and_overrides 
```

宝石文件

```
gem 'less-rails' 
```

这不起作用，我的变量没有被应用

谁能看到我做错了什么？

任何帮助表示赞赏

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T19:57:14.837

> ...我可以像这样设置我的 LESS 变量
> 
> @白：#FFFFFF；
> 
> 然后在我的css文件中我可以像这样调用它们颜色：@white;

嗨，我对在 Rails 中使用 LESS 不是很熟悉，如果我离开这里，我很抱歉。

我只能在将要编译的文件中使用较少的变量。例如，我可以
在 variables.less 文件中设置 @white:#FFFFFF

也许在 custom.less 文件中我有
.light{
color:@white; }

编译完所有内容后，我可以在我的 CSS中使用**.light类**

因此，为了解决上面的引用，您可以设置像
@white:#ffffff这样的 less 变量
，然后您可以在另一个将被编译的 less 文件中使用该变量，但不能直接在 CSS 文件中使用。

# java - 如何保护 SDCard 中的视频 (android)

> ID：14405662
> 
> 赞同：-1
> 
> 时间：2013-01-18T18:53:42.050
> 
> 标签：java, android, security, android-sdcard

> **可能重复：**
> [视频文件加密？](https://stackoverflow.com/questions/9496447/encryption-of-video-files)

我开始新项目，需要将大量视频存储在 sdcard 中，但我不希望用户可以访问或共享它，因为这是付费应用程序我读到了关于字符串的 des 加密我可以为视频进行加密吗？请你给我关于这个主题的提示或教程

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T19:07:49.113

`CipherInputStream`是的，您可以使用和加密任何文件`CipherOutputStreamin`

您可以在这篇文章中找到这些密码方法的示例：[视频文件加密？](https://stackoverflow.com/q/9496447/1720391)

# sql-server - 使用实体框架迁移编写初始迁移脚本

> ID：14405670
> 
> 赞同：1
> 
> 时间：2013-01-18T18:54:41.827
> 
> 标签：sql-server, entity-framework, migration, entity-framework-5, entity-framework-migrations

我无法自动将 Entity Framework 更新到最新的迁移（SimpleMembership 和 EF 数据模型之间的冲突），所以我决定编写每个迁移到 SQL 的脚本，然后应用它。

但是，我在引入第一次迁移时遇到了问题。我在通过运行生成的项目中进行了完整迁移，`Add-Migration <migration name>`现在我想使用`Update-Database -Script`. 但是，当我运行该命令时，EF 检查我的代码和开发数据库，​​发现一切都是最新的，并且没有编写新的迁移脚本。我以为我可以使用该`-SourceMigration`开关，但这似乎需要在您想要到达的那个*之前进行迁移。*

我可以简单地删除开发数据库，​​编写迁移脚本，然后重新运行 Add-Migration，但我觉得我在使用迁移的方式上一定是错误的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-20T18:40:58.337

它并不是真正的无证：参见[http://msdn.microsoft.com/en-us/data/jj591621](http://msdn.microsoft.com/en-us/data/jj591621)或[EF Migration migrate to 0 call initial created down](https://stackoverflow.com/questions/9996576/ef-migration-migrate-to-0-call-initial-creates-down)

对于更短的语法，正确的用法应该类似于“Update-Database –SourceMigration:$InitialDatabase ...”或“Update-Database –SourceMigration:0”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T19:30:49.227

我刚刚找到了一个未记录的解决方案。而不是传递迁移名称来`-SourceMigration`简单地传递 0 ，您将从初始迁移之前获得迁移。

# c# - 查找所有没有任务的项目

> ID：14405671
> 
> 赞同：-1
> 
> 时间：2013-01-18T18:54:49.790
> 
> 标签：c#, asp.net, linq, linq-to-sql

我正在使用 LINQ to SQL。

我有一个项目表。我也有一个任务表。一个任务可以有一个项目。

我想要一个可以返回没有任何任务的项目列表的查询。

以下是我如何找到项目的所有任务：

```
 public static IEnumerable<Task> GetAllByProject(int? projectID)
   {
         KezberPMDBDataContext db = new KezberPMDBDataContext();
         return from p in db.Tasks
                where p.ProjectID == projectID
                select p;
   } 
```

现在我需要找到上述查询没有返回任何内容的所有项目。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T19:02:09.463

```
return db.Projects.Where(p=>!p.Tasks.Any()) 
```

假设 Project 和 Task 之间存在 FK 关系，并且是一对多的。否则，让我们从所有任务中找到项目 id，然后找到这些 id 之外的项目。

```
var taskProjectIds = db.Tasks.Select(t=>t.ProjectId).Distinct();
return db.Projects.Where(p=>!taskProjectIds.Any(p.Id)) 
```

# java - Eclipse 插件：检索丢失的 HelloWorld.actionSet

> ID：14405672
> 
> 赞同：0
> 
> 时间：2013-01-18T18:54:57.997
> 
> 标签：java, eclipse, eclipse-plugin, eclipse-juno, eclipse-pde

使用 Juno 和 Eclipse PDE。尝试创建一个简单的插件（使用模板*Hello, World Command）*。当我运行它时，日志中会出现以下消息：

!MESSAGE 找不到动作集：HelloWorld.actionSet

正如[Q: Eclipse Missing Action Set](https://stackoverflow.com/questions/11535784/eclipse-missing-action-set)中所建议的那样，我创建了一个新工作区，重新创建了项目并重新安装了 PDE。这些都没有任何效果。

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T16:29:07.587

您应该列出您正在运行的 Eclipse 版本（Help > About）

您创建的 hello world 操作是否显示在 UI 中？

您是否以某种方式修改了插件？带有命令模板的 hello world 不提供操作集，仅提供命令/处理程序/绑定/菜单。如果您有旧的操作处理程序贡献，您将收到您描述的消息。

检查您的扩展（plugin.xml）中有什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T12:12:30.820

运行时会创建一个名为 runtime-EclipseApplication 的文件夹。您可以尝试删除它。

# vb.net - 查找大型 sql server 表的最佳解决方案

> ID：14405682
> 
> 赞同：0
> 
> 时间：2013-01-18T18:55:30.877
> 
> 标签：vb.net, sql-server-2008, hashtable

我有一个大的用户 ID 表和另一个用户记录表，其中包含带有用户 ID 的用户帖子。该过程是每当检索到新的提要帖子时，我都会向用户 id 表请求一个标记为非活动的 id（我有该字段 ACTIVE，因为我有另一个进程创建这些 id 并将其连续插入到表 1 中）并且当请求一个 id 时，它被标记为非活动状态。然后我检查用户表（表 2）中是否存在用户，如果存在则返回与该用户关联的用户 ID。

有人告诉我，我可以加快这个过程，但创建一个哈希表来查找表 2。我什至不知道如何开始这个，任何链接或示例将不胜感激。我还需要运行一个单独的进程来清理表 1 并删除所有非活动用户 ID。

当我调用插入表 2 的过程时，我传递了从表 1 中检索到的用户 ID。

```
CREATE TABLE [dbo].[userforums]
  (
     [userid]       [VARCHAR](16) NOT NULL  CONSTRAINT [PK_forumssiteid] PRIMARY KEY CLUSTERED ,
     [forumname]    [VARCHAR](500) NOT NULL,
     [exported]     [INT] NULL,
     [lastcrawled]  [DATETIME] NULL,
     [priority]     [INT] NULL,
     [origin]       [VARCHAR](50) NULL,
     [queryid]      [VARCHAR](25) NULL,
     [dateinserted] [DATETIME] NULL DEFAULT (getdate()) 
   ) 
```

第二张桌子

```
CREATE TABLE [dbo].[userids]
  (
     [userid] [NVARCHAR](20) NOT NULL CONSTRAINT [PK_userids] PRIMARY KEY CLUSTERED,
     [active] [NVARCHAR](20) NULL  CONSTRAINT [IX_userids] UNIQUE NONCLUSTERED 
  ) 
```

获取用户id存储过程

```
BEGIN TRANSACTION

SELECT TOP 1 @id = userid
FROM   userids WITH (UPDLOCK, HOLDLOCK)
WHERE  active = 'Y'
        OR active IS NULL

UPDATE userids
SET    active = 'N'
WHERE  userid = @id

COMMIT TRANSACTION 
```

检查用户标识是否存在

```
CREATE PROC Foo @forumname VARCHAR(500),
                @userid    VARCHAR(16),
                @origin    VARCHAR(50),
                @queryid   VARCHAR(25)
AS
    SET NOCOUNT ON;

    DECLARE @cnt INT
    DECLARE @serverip VARCHAR(16)
    DECLARE @mincnt INT
    DECLARE @siteservercnt INT

    SELECT @cnt = COUNT(*)
    FROM   userforums
    WHERE  forumname = @forumname

    IF @cnt = 0
      BEGIN
          INSERT INTO userforums
                      (forumname,
                       userid,
                       exported,
                       origin,
                       queryid)
          VALUES     (@forumname,
                      @userid,
                      1,
                      @origin,
                      @queryid)

          SELECT @siteservercnt = COUNT(*)
          FROM   siteserverip
          WHERE  userid = @userid

          IF @siteservercnt = 0
            BEGIN
                SELECT TOP 1 @mincnt = COUNT(*),
                             @serverip = serverip
                FROM   siteserverip
                GROUP  BY serverip
                ORDER  BY COUNT(*)

                SELECT TOP 1 @mincnt = sitecount,
                             @serverip = serverip
                FROM   serveripcounts
                ORDER  BY sitecount

                INSERT INTO siteserverip
                VALUES     (@siteid,
                            @serverip)

                UPDATE serveripcounts
                SET    sitecount = sitecount + 1
                WHERE  serverip = @serverip
            END
      END

    SELECT userid
    FROM   userforums
    WHERE  forumname = @forumname

    RETURN 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T21:00:43.970

您现有的出列查询可以改进。代替

```
DECLARE @id INT

SELECT TOP 1 @id = userid
FROM   userids WITH (UPDLOCK, HOLDLOCK)
WHERE  active = 'Y'
        OR active IS NULL

UPDATE userids
SET    active = 'N'
WHERE  userid = @id 
```

您可以执行哪两个操作（聚集索引扫描后跟索引查找）

```
UPDATE TOP (1) userids  
WITH (ROWLOCK, READPAST)
SET  active = 'N'
OUTPUT INSERTED.userid
WHERE  active <> 'N' 
```

这是一项操作，并给出了一个具有两个范围搜索的计划。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-18T20:07:36.577

哈希表 #TableName 是 tempdb 中用作表的临时对象。它们通常被称为“临时表”。如果这种情况很常见，我不会将它们用作即时检索数据的第一个解决方案。相反，我会创建一个索引，看看这是否能证明您的需求。通常，哈希表用于密集操作，您希望获取一组可能会或可能不会被索引的事物，然后将其与其他事物相关联，并且您希望将其保存在内存中。

我会创建一个索引，这应该会提高速度。此外，如果您发现速度很慢，则哈希表不会加快该部分的速度，它只会将其集合放入源中以与主表分开重用。

```
create index IX_[yourtableName]_[TableColumn(s)] on [Tablename]([Column(s)] 
```

除非必要，否则我不会创建更多对象。通常，如果您的 UserId 是有效的整数，您可以非常快速地搜索它们。

# php - MySQL选择查询，通过在搜索栏中输入多个单词从多个列中检索数据

> ID：14405688
> 
> 赞同：0
> 
> 时间：2013-01-18T18:55:42.597
> 
> 标签：php, mysql

好的，这是交易，我有一个数据库，假设有 2 列：“name”和“lastname”

当我在输入框中输入像“John”这样的名字时，它会从“name”列中检索所有 John 的名字。当我输入像“Doe”这样的姓氏时，它会从“lastname”列中检索所有 Doe。这按预期工作。

但是我希望它在我输入“John Doe”时也从两列中检索数据，所以它会返回所有 John Doe 的数据。在搜索栏中输入一个单词时，它可以正常工作，但是当我在空格后输入另一个单词时，它不会做我想要的，因为我不知道我应该如何正确地形成查询。

这是query.php的代码：

```
 <?php
    require_once("config.php");
    // Fetch the data
    $searchbar = $_POST['searchbar'];

    $querymilion = "SELECT * from lms.customers where `lastname` LIKE '%$searchbar%' OR `name` LIKE '%$searchbar%'";
    mysql_query('SET NAMES \'utf8\'');
    $resultmilion = @mysql_query($querymilion);

    // Return the results, loop through them and echo
    if($fraza) {
    while($rowmilion = mysql_fetch_array($resultmilion))
    {
    ?>
    <a href="javascript:klientid()" onClick="klientid()">
    <table id="tablesz" >
    <tr>
    <td style="font-weight:bold; width: 160px; text-align:right;">ID:</td>
    <td style="width:200px;" id="getidfromsearch"><?php echo $rowmilion['id']; ?></td>
    <td style="font-weight:bold; width: 50px; text-align:right;">PESEL:</td>
    <td style="width:200px;"><?php echo $rowmilion['ssn']; ?></td>
    </tr>
    <tr>
    <td style="font-weight:bold;width: 160px; text-align:right;">Nazwisko i Imię:</td>
    <td style="width:200px;"><?php echo $rowmilion['lastname']; ?> <?php echo   $rowmilion['name']; ?></td>
    <td style="font-weight:bold;width: 50px; text-align:right;">Dow.os.:</td>
    <td style="width:200px;"><?php echo $rowmilion['icn']; ?></td>
    </tr>
    <tr>
    <td style="font-weight:bold; width: 160px; text-align:right;">Adres instalacji</td>
    <td style="width:200px;"><?php echo $rowmilion['address']; ?></td>
    <td style="font-weight:bold; width: 50px; text-align:right;">Miasto:</td>
    <td style="width:200px;"><?php echo $rowmilion['zip']; ?> <?php echo $rowmilion['city']; ?>
    </td>
    </tr>
    </table>
    </a>
    <?php

    }
    }
    ?> 
```

这是搜索栏：

```
 <div id="szukaj">
    <table id="tablesz" >
    <tr>
<td class="naglowek">Szukaj klienta</td>
    </tr>
    <tr>
<td>
<form id="myForm" enctype="multipart/form-data" action="query.php" method="post"  name="myForm">
<input type="text" name="searchbar" value="" />
<input type="submit" value="Szukaj" /> 
</form>
</td>
    </tr>
    <tr>
<td>
<span id="error"></span>
<span id="result"></span>
</td>
    </tr>
    </table>
    </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T19:06:36.387

问题是你的代码，

如果要进行搜索，例如`John Doe`需要将每个单词分开并放入谎言中，当然会降低查询速度。

IE：

```
$querymilion = "SELECT * from lms.customers 
where (`lastname` LIKE '%$John%' OR `name` LIKE '%$John%')
and (`lastname` LIKE '%$Doe%' OR `name` LIKE '%$Doe%')"; 
```

这将为您提供与`John Doe`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T19:29:09.623

```
SELECT * 
FROM  `actor` 
WHERE CONCAT( firstname,  ' ', lastname ) LIKE  "%$searchbar%" 
```

当您的桌子增加时，这可能会变得非常慢。但它有效。如果您还希望将 firstname lastname 的顺序切换到 lastname firstname，只需将其添加到查询中：

```
OR CONCAT( lastname,  ' ', firstname ) LIKE  "%$searchbar%" 
```

# matlab - matlab矩阵中点的随机移动

> ID：14405689
> 
> 赞同：1
> 
> 时间：2013-01-18T18:55:55.887
> 
> 标签：matlab, vector, matrix, coordinates

我有一个零和一的矩阵。每个具有一个值的单元格表示一个非空单元格。带有这些的单元格保存在带有坐标的向量中。我正在遍历列表并将每个元素随机移动到其空闲的相邻单元格之一。

有没有办法通过矢量运算来做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T07:41:50.933

这是一种尝试，不是最优雅或最有效的尝试，但它仍然应该有效。

首先我假设你有你的非空单元格的 x,y 坐标，比如

```
c=[x y]; 
```

二维数组中 8 个最近邻 (nn) 的相对位置由下式给出：

```
nn=[1 1;1 -1;-1 1;0 -1;-1 0;0 1;1 0;-1 -1]; 
```

让我们`c`在其 nn 周围对每个 x,y 坐标进行所有可能的排列

```
permc=bsxfun(@plus,repmat(c,[1 8]),nn(:)'); 
```

现在为每个 x,y 坐标从 8 个选项中设置一个随机 nn 向量：

```
ri=randi(8,numel(x), 1); 
```

并用它来选择随机的新坐标

```
new_c= [ permc(sub2ind(size(permc), (1:numel(x))', 2*ri-1 )) , ...
         permc(sub2ind(size(permc), (1:numel(x))', 2*ri))]; 
```

问题：

*   `c`该代码不检查是否有一个不免费的 nn ，不难解决`permc`手头的信息。

*   代码不关心点是否在数组的边缘，因此它可以选择比数组大小大 0 或 1 的坐标。同样，`permc`有处理这种情况的信息，并且可以通过多种方式单独处理。

就是这样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T19:07:23.133

可能，但我认为写起来会很棘手。您必须小心防止两个“点”同时移动到同一个空白位置。

循环遍历向量并一次处理一个点似乎要容易得多。你想用向量运算来做这件事的原因是什么？如果您希望使您的代码更快，请发布您的代码并寻求建议。

# node.js - 在 Expressjs 应用程序中使用集群

> ID：14405693
> 
> 赞同：16
> 
> 时间：2013-01-18T18:56:05.580
> 
> 标签：node.js, express

我在我的第一个节点项目上做了一点 OJT，虽然我可以建立一个简单的服务器，但应用程序会受到重创，所以使用集群似乎是个好主意。我拼凑了一些在各种搜索（包括 SO）中找到的代码片段，但服务器无法启动。我确信我对节点的缺乏经验让我做了一些愚蠢的事情，但我没有看到它。

```
var express = require( 'express' );
var cluster = require( 'cluster' );
var path    = require( 'path' );

var cCPUs   = require( 'os' ).cpus().length;
var port    = 3000;
var root    = path.dirname( __dirname );

if( cluster.isMaster ) {
    for( var i = 0; i < cCPUs; i++ ) {
      cluster.fork();
    }

    cluster.on( 'death', function( worker ) {
      console.log( 'Worker ' + worker.pid + ' died.' );
    });
}
else {
    // eyes.inspect( process.env );
    console.log( 'Worker: %s', process.env.NODE_WORKER_ID );

    var app = express();
    var routes  = require( './routes' )( app );
    app
      .use( cluster.repl( root + 'cluster.repl' ) )
      .use( cluster.stats({ connections: true, requests: true }) )
      .use( cluster.reload( root ) )
      .listen( port );
} 
```

结果：

```
TypeError: Object #<Cluster> has no method 'repl' 
```

如果我删除`use`呼叫，工作人员会正确启动，但是`process.env.NODE_WORKER_ID`是`undefined`. 检查`process.env`表明它绝对没有定义。也许我使用的片段来自旧版本，但我不确定如何以任何其他方式识别工作线程。

如果有人能解读我炒过的任何东西，我将不胜感激。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-01-21T13:30:25.230

对于以后搜索的任何人，这就是我最终得到的结果：

```
const cluster = require('cluster');
const express = require('express');
const path = require('path');

const port = 3000;
const root = path.dirname(__dirname);
const cCPUs = require('os').cpus().length;

if (cluster.isMaster) {
    // Create a worker for each CPU
    for (let i = 0; i < cCPUs; i++) {
        cluster.fork();
    }
    cluster.on('online', function (worker) {
        console.log('Worker ' + worker.process.pid + ' is online.');
    });
    cluster.on('exit', function (worker, code, signal) {
        console.log('worker ' + worker.process.pid + ' died.');
    });
} else {
    const app = express();
    const routes = require('./routes')(app);
    app.use(express.bodyParser()).listen(port);
} 
```

我仍然处于节点学习曲线的早期阶段，但是服务器启动并且似乎在每个核心上都在运行。感谢 JohnnyH 让我走上正轨。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-08-28T20:37:10.950

这是我的 Cluster.js 类草稿。请注意，当您启动主进程时，我们应该捕获端口冲突。

```
/*jslint indent: 2, node: true, nomen: true, vars: true */

'use strict';

module.exports = function Cluster(options, resources, logger) {
  var start = function () {
    var cluster = require('cluster');

    if (cluster.isMaster) {
      require('portscanner').checkPortStatus(options.express.port, '127.0.0.1', function (error, status) {
        if (status === 'open') {
          logger.log.error('Master server failed to start on port %d due to port conflict', options.express.port);
          process.exit(1);
        }
      });

      // Each core to run a single process.
      // Running more than one process in a core does not add to the performance.
      require('os').cpus().forEach(function () {
        cluster.fork();
      });

      cluster.on('exit', function (worker, code, signal) {
        logger.log.warn('Worker server died (ID: %d, PID: %d)', worker.id, worker.process.pid);
        cluster.fork();
      });
    } else if (cluster.isWorker) {
      var _ = require('underscore');
      var express = require('express');
      var resource = require('express-resource');

      // Init App

      var app = express();

      // App Property

      app.set('port', process.env.PORT || options.express.port);
      app.set('views', options.viewPath);
      app.set('view engine', 'jade');
      app.set('case sensitive routing', true);
      app.set('strict routing', false);

      // App Middleware

      app.use(express.favicon(options.faviconPath));
      app.use(express.logger({ stream: logger.stream() }));
      app.use(express.bodyParser());
      app.use(express.methodOverride());
      app.use(express.responseTime());
      app.use(app.router);
      app.use(require('stylus').middleware(options.publicPath));
      app.use(express['static'](options.publicPath));

      if (options.express.displayError) {
        app.use(express.errorHandler());
      }

      // App Format

      app.locals.pretty = options.express.prettyHTML;

      // App Route Handler

      if (!_.isUndefined(resources) && _.isArray(resources)) {
        _.each(resources, function (item) {
          if (!_.isUndefined(item.name) && !_.isUndefined(item.path)) {
            app.resource(item.name, require(item.path));
          }
        });
      }

      // Start Server

      var domain = require('domain').create();

      domain.run(function () {
        require('http').createServer(app).listen(app.get('port'), function () {
          logger.log.info('Worker server started on port %d (ID: %d, PID: %d)', app.get('port'), cluster.worker.id, cluster.worker.process.pid);
        });
      });

      domain.on('error', function (error) {
        logger.log.error(error.stack);
      });
    }
  };

  return {
    start: start
  };
}; 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-01-21T14:35:22.283

还要看看[cluster2](https://github.com/ql-io/cluster2)。它被 eBay 使用，并有一个明确的例子

```
var Cluster = require('cluster2'),
    express = require('express');

var app = express.createServer();

app.get('/', function(req, res) {
  res.send('hello');
});

var c = new Cluster({
  port: 3000,
});

c.listen(function(cb) {
  cb(app);
}); 
```

# powershell - 尝试在 Powershell 中运行任务列表并遇到多个 IP/输出问题

> ID：14405695
> 
> 赞同：0
> 
> 时间：2013-01-18T18:56:23.280
> 
> 标签：powershell

我已经进行了几次迭代，但我似乎无法让它给我输出，甚至无法关闭循环。我是新手，即使是中级水平的人也可能很简单......但我在这里失去了理智。

这是脚本

```
$i =124

$Ip = "166.112.76."

$Ip4th = $Ip + $i

echo $TASKLIST = Start "c:\windows\system32\tasklist.exe /s $ip4th /v /FI 'IMAGENAME eq 

caffeine.exe' >>c:\caffeine\results.txt"

echo    Do {{$TASKLIST; $i++}

echo     While ($IP4th -le "166.112.76.128")}

AND HERE'S WHAT POWERSHELL GIVES BACK...NO OUTPUT FILE CREATED EITHER

PS C:\Users\jwalke22\Documents> C:\caffeine\caff4.ps1

=
Start

c:\windows\system32\tasklist.exe /s 166.112.76.124 /v /FI 'IMAGENAME eq caffeine.exe' 

>>c:\caffeine\results.txt

Do

{$TASKLIST; $i++}

echo     While ($IP4th -le "166.112.76.128") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T19:24:37.713

您似乎正在尝试获取远程计算机上正在运行的进程的列表？如果是这样，你想要： Get-Process [[-Name] ] [-ComputerName ]

如：

```
for ($i = 0; $i -le 255; $i++) {
    $server = "166.112.76.$i"
    Get-Process -ComputerName $server
} 
```

您会发现 PowerShell 可以直接执行许多此类管理进程。您的预期解决方案失败，因为您没有“接收”您创建的任务列表窗口的输出。你可以通过几种方式做到这一点，但它们都有点技术性。更容易熟悉 PowerShell 已经为您所做的事情。

# java - 使用 JMX 调用线程

> ID：14405704
> 
> 赞同：0
> 
> 时间：2013-01-18T18:56:42.213
> 
> 标签：java, multithreading, jmx

如何使用 JMX 调用使用 jConsole 或 jManage 的线程？

我想最初创建 5 个线程。让他们跑。然后当其中一个卡住时，我想创建一个新线程来继续操作。

在未处理完整数据/直到真正需要之前，我不想终止进程。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T19:13:19.593

你的问题似乎有点含糊；一般来说线程总是运行一些逻辑，所以你应该在这里做一些开发。

基本上，JMX 提供了一种安装组件（称为 MBean）并与 JVM 进程一起运行的方法。

Java 允许与 JVM 进程一起启动 JMX 服务器，为此，您应该为进程提供一些属性。然后你可以使用这个服务器来安装你自己的 MBean，它可以做任何你想做的事情，当然也可以运行线程。

一旦您部署了 mbean 组件并且您的 jvm 进程启动并运行，您就可以使用 jConsole，您应该会看到您的 mbean 等。然后只需调用该方法。

[这里](http://docs.oracle.com/javase/tutorial/jmx/index.html)有一个非常好的教程

希望这可以帮助

# android - 如何在 Andengine 的 Base Game Activity 上启用声音？

> ID：14405708
> 
> 赞同：2
> 
> 时间：2013-01-18T18:56:51.283
> 
> 标签：android, andengine

我正在使用 Andengine 开发游戏，我正在使用`Base Game Activity`具有多个场景的游戏。我想在其中加载背景音乐。**但是我不知道如何在**使用时在引擎`Base Game Activity`中启用声音。我在网络中找到了这段代码来启用声音。

`return new Engine(new EngineOptions(true, ScreenOrientation.LANDSCAPE, new RatioResolutionPolicy(CAMERA_WIDTH, CAMERA_HEIGHT), camera).setNeedsMusic(true));`

但是这个是写的 `onLoadScene()`，我不知道如何在基本游戏活动`onLoadScene()`中暗示。我可以 `onLoadScene()`在基本游戏活动中覆盖还是有任何其他方法可以实现这一点，请帮助我......

任何建议对我都是有效的，感谢所有的先进......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T19:25:55.867

尝试类似的东西

```
final EngineOptions engineOptions = new EngineOptions(true, ScreenOrientation.LANDSCAPE_FIXED,
        new RatioResolutionPolicy(CAMERA_WIDTH, CAMERA_HEIGHT), mCamera);
engineOptions.getAudioOptions().setNeedsSound(true); 
```

和/或

```
engineOptions.getAudioOptions().setNeedsMusic(true); 
```

# mysql - MYSQL 查询将我的日期字段作为 unixtimestamps 返回。

> ID：14405709
> 
> 赞同：-2
> 
> 时间：2013-01-18T18:56:51.927
> 
> 标签：mysql

SIM 是编码新手，但我有一个 MYSQL 查询，它返回所需的信息，除了它将我的日期字段（d.timestart 和 d.timefinish）作为 unixtimestamps 返回。我知道我可能需要使用 From Unixtime () 但我不知道如何插入它。

这是我的代码，它工作正常:)

```
SELECT g.quiz       AS'Quiz Number', 
       g.userid     AS'User Number', 
       g.grade      AS'Grade Percentage Achieved', 
       u.firstname  AS' First Name', 
       u.lastname   AS'Last Name', 
       c.name       AS'Assessment Name', 
       d.attempt    AS'Number of Attempts', 
       d.state      AS'Assessment Progress', 
       d.timestart  AS'Assessment Started', 
       d.timefinish AS'Assessment Finished' 
FROM   mdl_quiz_grades g 
       JOIN mdl_user u 
         ON u.id = g.userid 
       JOIN mdl_quiz c 
         ON c.id = g.quiz 
       JOIN mdl_quiz_attempts d 
         ON d.id = g.userid 
```

谢谢加里

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T18:59:44.353

你会使用`FROM_UNIXTIME`：

```
SELECT g.quiz                      AS'Quiz Number', 
       g.userid                    AS'User Number', 
       g.grade                     AS'Grade Percentage Achieved', 
       u.firstname                 AS' First Name', 
       u.lastname                  AS'Last Name', 
       c.name                      AS'Assessment Name', 
       d.attempt                   AS'Number of Attempts', 
       d.state                     AS'Assessment Progress', 
       From_unixtime(d.timestart)  AS'Assessment Started', 
       From_unixtime(d.timefinish) AS'Assessment Finished' 
FROM   mdl_quiz_grades g 
       JOIN mdl_user u 
         ON u.id = g.userid 
       JOIN mdl_quiz c 
         ON c.id = g.quiz 
       JOIN mdl_quiz_attempts d 
         ON d.id = g.userid 
```

如果您想格式化该日期，您将使用`DATE_FORMAT`和说明符从[文档](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_date-format)中格式化它。

```
DATE_FORMAT(FROM_UNIXTIME(d.timestart), '%b %d %Y %h:%i %p') AS ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T19:03:26.560

要格式化 unix 时间戳，您可以尝试

```
SELECT FROM_UNIXTIME(unix_timestamp, '%m/%d/%Y') FROM myTable; 
```

其中第二部分是格式字符串。

要格式化任何类型的日期和时间，您可以尝试该`DATE_FORMAT`功能，例如

`SELECT DATE_FORMAT(date, '%m/%d/%Y') FROM myTable;`

无论如何看看
[http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_from-unixtime](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_from-unixtime)
和
[http://dev.mysql.com/doc/refman /5.5/en/date-and-time-functions.html#function_date-format](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_date-format)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T19:00:18.607

[MySQL 文档](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_from-unixtime)中有示例。

```
SELECT g.quiz       AS'Quiz Number', 
       g.userid     AS'User Number', 
       g.grade      AS'Grade Percentage Achieved', 
       u.firstname  AS' First Name', 
       u.lastname   AS'Last Name', 
       c.name       AS'Assessment Name', 
       d.attempt    AS'Number of Attempts', 
       d.state      AS'Assessment Progress', 
       FROM_UNIXTIME(d.timestart)  AS'Assessment Started', 
       FROM_UNIXTIME(d.timefinish) AS'Assessment Finished' 
FROM   mdl_quiz_grades g 
       JOIN mdl_user u 
         ON u.id = g.userid 
       JOIN mdl_quiz c 
         ON c.id = g.quiz 
       JOIN mdl_quiz_attempts d 
         ON d.id = g.userid 
```

# c++ - 为什么 lpstrFile 返回内存中的地址而不是 OPENFILENAMEW 结构中的 char 数组？

> ID：14405711
> 
> 赞同：0
> 
> 时间：2013-01-18T18:57:11.687
> 
> 标签：c++, winapi, buffer

此代码应该编译没有错误，您应该`-lcomdlg32`为对话框链接。程序返回：`0x22fcd8`或者`68`如果我使用指针。并且应该（我认为）在对话框中返回文件用户类型的名称。

```
#include <windows.h>
#include <iostream>

int main() {
  wchar_t szFileName[MAX_PATH] = {0};
  OPENFILENAMEW ofn;
  ZeroMemory(&ofn, sizeof(ofn));
  ofn.lStructSize = sizeof(OPENFILENAME);
  ofn.nMaxFile = MAX_PATH;
  ofn.lpstrFile = szFileName;
  GetSaveFileNameW(&ofn);

  using namespace std;
  cout << szFileName << endl;
  cout << *szFileName << endl; // also a number not a string
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-18T18:59:55.707

`wcout`如果要将数组输出`wchar_t`为以空字符结尾的宽字符串，则必须使用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T19:46:14.080

`cout`不支持`wchar_t`or `wchar_t*`，但支持`int`and `void*`。编译器最终将 转换`wchar_t`为 int，并将 降级`wchar_t*`为`void*`. 这就是为什么您会看到`cout`打印 的数值`wchar_t`和 的内存地址的原因`wchar_t*`。

改为使用`wcout`。它支持`wchar_t`and `wchar_t*`，因此它可以打印实际数据：

```
wcout << szFileName << endl;
wcout << *szFileName << endl; 
```

# php - 用于获取 WordPress 版本的正则表达式

> ID：14405713
> 
> 赞同：-1
> 
> 时间：2013-01-18T18:57:19.160
> 
> 标签：php, regex, wordpress, parsing

我想是否有人可以帮助我使用正则表达式或 PHP 中的任何方法在 readme.html 文件中获取 WordPress 版本，如下所示：

```
<h1 id="logo" style="text-align: center">
<img alt="WordPress" src="wp-admin/images/wordpress-logo.png" />
<br /> Version 2.8.1
 </h1> 
```

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T18:58:46.817

### 纯正则表达式

```
preg_match("/Version\s+([\d.]+)/", $html, $match);
$version = $match[1]; 
```

### 使用 DOMDocument

```
$doc = new DOMDocument;
$doc->loadHTML($html);
$text = trim($doc->getElementsByTagName("h1")->item(0)->textContent);
$index = strrpos($text, " ");
$version = substr($text, $index+1); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T19:02:07.053

你不需要那个。而是使用`get_bloginfo('version');`

`get_bloginfo('version')`- 返回您使用的 WordPress 版本。该数据是从 wp-includes/version.php 中设置的“$wp_version”变量中检索的。 [http://codex.wordpress.org/Function_Reference/get_bloginfo](http://codex.wordpress.org/Function_Reference/get_bloginfo)

# vba - 将 Excel 打印区域复制到 Word

> ID：14405717
> 
> 赞同：0
> 
> 时间：2013-01-18T18:57:44.433
> 
> 标签：vba, excel, ms-word

我想将 Excel 中横向的打印区域复制到我运行代码的 Word 文档中。

我在用

```
wb.Sheets("Sheet1").Range("A1:N33").Copy 
```

复制该区域，但随着列宽的变化，它是没用的。

更新：

我正在使用它来计算 Word 文档中的可用尺寸

```
With ActiveDocument.PageSetup
      UsableWidth = .PageWidth - .LeftMargin - .RightMargin
      UsableHeight = .PageHeight - .TopMargin - .BottomMargin
End With 
```

我试图缩放我的图像以适应：

```
Selection.PasteSpecial Link:=False, DataType:=wdPasteMetafilePicture, Placement:=wdInLine, DisplayAsIcon:=False
Selection.ShapeRange.Height = UsableHeight
Selection.ShapeRange.Width = UsableHeight 
```

它并不完全做到这一点。最好的方法是在复制*之前设置图像范围。*

更新2：

```
Dim objExcel As New Excel.Application
Dim wb As Excel.Workbook
Dim ws As Excel.Worksheet
Set wb = objExcel.Workbooks.Open("C:\test.xlsx")
Set ws = wb.Sheets("Sheet1") 
```

这给出了一个错误：

```
Set rngTemp = ws.Range("A1") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T10:24:16.153

You can retrieve the print area information using this code:

```
Sub GetPrintArea()

Dim rngPrintArea As Range

'Put print area into range variable
Set rngPrintArea = Sheet1.Range(Sheet1.PageSetup.PrintArea)

'Perform operations on range - shows up in Immediate window:
Debug.Print rngPrintArea.Height
Debug.Print rngPrintArea.Width
Debug.Print rngPrintArea.Cells(rngPrintArea.Rows.Count, rngPrintArea.Columns.Count).Address

End Sub 
```

This does not work if a print area is not already set - can you confirm if the Excel sheets are already set to landscape with a print area defined? If not, you'll need to find the paper dimensions and loop through cells until you find those which share the same Left and Top values (I think). You can set the PrintArea like this:

```
'Set print area
Sheet1.PageSetup.PrintArea = "$A1:$N33" 
```

* * *

EDIT - This should do what you need now we know that the source dimensions are predefined - you'll need to set UseableWidth and UseableHeight in Word and either bring them into this sub using ByVal or a public variable:

```
Sub FindRange()

Dim rngTemp As Range, rngCopy As Range, rngTest As Range
Dim iCol As Integer, iRow As Integer

Set rngTemp = Sheet1.Range("A1")

'Get closest column
Do Until rngTemp.Left >= UseableWidth
        Set rngTemp = rngTemp.Offset(0, 1)
Loop
iCol = rngTemp.Column

'Get closest row
Do Until rngTemp.Top >= UseableHeight
        Set rngTemp = rngTemp.Offset(1, 0)
Loop
iRow = rngTemp.Row

Set rngCopy = Sheet1.Range("A1", Sheet1.Cells(iRow, iCol))

'Copy rngCopy into Word as you were before

End Sub 
```

# c++ - OpenMP 并行化以提高构造性能

> ID：14405720
> 
> 赞同：0
> 
> 时间：2013-01-18T18:58:03.637
> 
> 标签：c++, for-loop, parallel-processing, openmp, collapse

第一种方法（并行化内循环）：

```
for(j=0; j<LATTICE_VW; ++j) {
    x = j*DX + LATTICE_W;
    #pragma omp parallel for ordered private(y, prob)
        for(i=0; i<LATTICE_VH; ++i) {
            y = i*DY + LATTICE_S;
            prob = psi[i][j].norm();

            #pragma omp ordered
                out << x << " " << y << " " << prob << endl;
        }
} 
```

第二种方法（并行化外循环）：

```
#pragma omp parallel for ordered private(x, y, prob)
    for(j=0; j<LATTICE_VW; ++j) {
        x = j*DX + LATTICE_W;
        for(i=0; i<LATTICE_VH; ++i) {
            y = i*DY + LATTICE_S;
            prob = psi[i][j].norm();

            #pragma omp ordered
                out << x << " " << y << " " << prob << endl;
        }
    } 
```

第三种方法（并行化折叠循环）

```
#pragma omp parallel for collapse(2) ordered private(x, y, prob)
    for(j=0; j<LATTICE_VW; ++j) {
        for(i=0; i<LATTICE_VH; ++i) {
            x = j*DX + LATTICE_W;
            y = i*DY + LATTICE_S;
            prob = psi[i][j].norm();

            #pragma omp ordered
                out << x << " " << y << " " << prob << endl;
        }
    } 
```

如果我要猜测，我会说方法 3 应该是最快的。

然而，方法 1 是最快的，而第二种和第三种方法都需要大约相同的时间，就好像没有并行化一样。为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T00:09:24.323

看看这个：

```
for(int x = 0; x < 4; ++x)
  #pragma omp parallel for ordered
  for(int y = 0; y < 4; ++y)
    #pragma omp ordered
    cout << x << ',' << y << " (by thread " << omp_get_thread_num() << ')' << endl; 
```

你有：

```
0,0 (by thread 0)
0,1 (by thread 1)
0,2 (by thread 2)
0,3 (by thread 3)
1,0 (by thread 0)
1,1 (by thread 1)
1,2 (by thread 2)
1,3 (by thread 3) 
```

每个线程只需要等待一些`cout`所有的工作才能并行完成。但是有：

```
#pragma omp parallel for ordered
for(int x = 0; x < 4; ++x)
  for(int y = 0; y < 4; ++y)
    #pragma omp ordered
    cout << x << ',' << y << " (by thread " << omp_get_thread_num() << ')' << endl; 
```

和

```
#pragma omp parallel for collapse(2) ordered
for(int x = 0; x < 4; ++x)
  for(int y = 0; y < 4; ++y)
    #pragma omp ordered
    cout << x << ',' << y << " (by thread " << omp_get_thread_num() << ')' << endl; 
```

情况是：

```
0,0 (by thread 0)
0,1 (by thread 0)
0,2 (by thread 0)
0,3 (by thread 0)
1,0 (by thread 1)
1,1 (by thread 1)
1,2 (by thread 1)
1,3 (by thread 1)
2,0 (by thread 2)
2,1 (by thread 2)
2,2 (by thread 2)
2,3 (by thread 2)
3,0 (by thread 3)
3,1 (by thread 3)
3,2 (by thread 3)
3,3 (by thread 3) 
```

所以`thread 1`必须等待`thread 0`完成所有工作，才能`cout`第一次完成，几乎没有什么可以并行完成。

尝试添加`schedule(static,1)`到 collapse-version 中，它应该至少与第一个版本一样好。

# session - 使用 Dart 进行用户身份验证的教程

> ID：14405724
> 
> 赞同：3
> 
> 时间：2013-01-18T18:58:11.860
> 
> 标签：session, authentication, cookies, dart

我正在准备使用 Dart 为服务器和客户端开发一个 Web 应用程序。

任何人都知道是否存在使用 Dart 库（Http Server、Session、Cookie）中包含的功能实现用户身份验证的教程？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-15T08:09:00.597

我相信您可以使用[rikulo 安全插件](http://docs.rikulo.org/stream/latest/Add-ons/Rikulo_Security/)。
你可以在[这里](https://github.com/rikulo/security/tree/master/example/hello)找到一个很好的例子。

# android - 在 Android 服务中使用 BroadcastReceiver 获取电池电量

> ID：14405726
> 
> 赞同：3
> 
> 时间：2013-01-18T18:58:14.480
> 
> 标签：android, service, battery, batterylevel

我有一个代码，我需要获取我的 Android 设备的电池电量，但我有一个大问题。我有一个 Android 服务，我可以在其中获取电池电量并通过 UDP 发送。

这是我的服务代码：

```
public class Servico extends Service {

String bateria = "Nada";

/*
 * Recupera nível de bateria
 */
private BroadcastReceiver BatInfoReceiver = new BroadcastReceiver() {
    @Override
    public void onReceive(Context arg0, Intent intent) {
        int level = intent.getIntExtra(BatteryManager.EXTRA_LEVEL, 0);
        bateria = String.valueOf(level);
    }
};

public void onCreate() {
    super.onCreate();
    this.registerReceiver(this.BatInfoReceiver, new IntentFilter(Intent.ACTION_BATTERY_CHANGED));
}

@Override
public int onStartCommand(Intent intent, int flags, int startId) {
    Toast.makeText(getApplicationContext(), "Command=" + bateria + "%", Toast.LENGTH_LONG).show();
    stopSelf();
    return START_STICKY;
}

@Override
public void onDestroy() {
    super.onDestroy();
    unregisterReceiver(BatInfoReceiver);
}

@Override
public IBinder onBind(Intent arg0) {
    // TODO Auto-generated method stub
    return null;
}

} 
```

我的问题是：我无法获得关卡！我在 BatInfoReceiver 中的 onReceive 方法中放置了一个 BreakPoint，但此代码仅在执行 onStartCommand 后执行，并且需要将电池电量的值用于 onStartCommand。

我该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T19:12:29.687

您是否将以下权限添加到您的主要文件中：

```
<uses-permission android:name="android.permission.READ_PHONE_STATE"/> 
```

并将您的 onReceived 方法更改为：

```
private BroadcastReceiver batteryReceiver = new BroadcastReceiver() {
        @Override
        public void onReceive( Context context, Intent intent )
            {
                int level = intent.getIntExtra( "level", 0 );
                bat= String.valueOf(level) + "%" ;
            }
    }; 
```

并获取电池级别使用这行代码：

```
registerReceiver( batteryReceiver, new IntentFilter(Intent.ACTION_BATTERY_CHANGED) ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T19:54:31.680

看看这个，它将为您提供所需的电池电量，以便您开始服务。只需`BatteryManager.EXTRA_LEVEL`用作从意图中获取关卡的关键

[http://developer.android.com/training/monitoring-device-state/battery-monitoring.html](http://developer.android.com/training/monitoring-device-state/battery-monitoring.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-21T11:57:38.757

我的问题的解决方案是 tyczj 的答案，我刚刚适应了我的问题。

我的新代码：

```
public void onCreate() {
    super.onCreate();

    //registerReceiver(BatInfoReceiver, new IntentFilter(Intent.ACTION_BATTERY_CHANGED));

    IntentFilter ifilter = new IntentFilter(Intent.ACTION_BATTERY_CHANGED);
    Intent batteryStatus = getApplicationContext().registerReceiver(null, ifilter);

    // Are we charging / charged?
    int status = batteryStatus.getIntExtra(BatteryManager.EXTRA_LEVEL, -1);
    bateria = String.valueOf(status);

} 
```

# c - 最佳缓冲区大小

> ID：14405727
> 
> 赞同：3
> 
> 时间：2013-01-18T18:58:20.570
> 
> 标签：c, performance, memory-management, buffer

我想这是一个性能计算问题。我正在用 C 编写一个程序，它产生大量的输出，远远超过通常可以完全存储在 RAM 中的输出。我打算简单地将输出写入`stdout`；所以它可能只是进入屏幕，或者可能被重定向到文件中。我的问题是如何为将存储在 RAM 中的数据选择最佳缓冲区大小？

输出数据本身并不是特别重要，所以我们可以说它正在生成大量随机整数列表。

我打算有 2 个线程：一个产生数据并将其写入缓冲区，另一个将该缓冲区写入`stdout`. 这样，我可以在前一个缓冲区仍在写入时开始生成下一个输出缓冲区`stdout`。

需要明确的是，我的问题不是关于如何使用等函数`malloc()`。`pthread_create()`我的问题纯粹是关于如何为最佳缓冲区大小选择多个字节（512、1024、1048576），这将提供最佳性能？

理想情况下，我想找到一种可以动态选择最佳缓冲区大小的方法，以便我的程序可以适应当时正在运行的任何硬件。我试图寻找这个问题的答案，虽然我发现了一些关于缓冲区大小的线程，但我找不到任何与这个问题特别相关的东西。因此，我只是想把它作为一个问题发布，希望我能得到一些不同的观点，并提出比我自己更好的东西。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-18T19:04:06.370

混合设计和优化是浪费时间。这被认为是[最典型的错误之一。](http://en.wikipedia.org/wiki/Program_optimization#When_to_optimize)它可能会损坏您的设计，并且实际上不会进行太多优化。

让您的程序正常工作，如果有迹象表明存在性能问题，则对其进行分析并考虑分析真正导致问题的部分。

我认为这尤其适用于复杂的架构优化，例如多线程应用程序。对单个图像进行多线程处理是您从未真正*想做*的事情：无法测试，容易出现无法重现的错误，在不同的执行环境中失败的方式不同，还有其他问题。但是，对于某些程序，多线程并行执行是功能所必需的，或者是获得必要性能的一种方式。它得到了广泛的支持，本质上它有时是一种必要的邪恶。

如果没有确凿的证据表明像您这样的程序需要它，这不是您在初始设计中想要的东西。

几乎任何其他的并行方法（消息传递？）都将更容易实现和调试，而且无论如何你都会在你的操作系统的 I/O 系统中得到很多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T19:05:03.993

**简短的回答：测量它。**

长答案：根据我的经验，这太依赖于难以提前预测的因素。另一方面，您不必在开始之前就做出承诺。只需实施一个通用解决方案，完成后，进行一些性能测试并获得最佳结果的设置。分析器可以帮助您专注于程序中的性能关键部分。

据我所见，那些产生最快代码的人通常首先尝试最简单、直接的方法。比普通程序员做得更好的是，他们拥有编写良好性能测试的非常好的技术，这远远不是微不足道的。

如果没有经验，很容易陷入某些陷阱，例如，忽略缓存效果，或者（可能在您的应用程序中？！）低估 IO 操作的成本。在最坏的情况下，您最终会挤压程序中对整体性能毫无贡献的部分。

**回到你原来的问题：**

在您描述的场景中（一个 CPU 密集型生产者和一个 IO 密集型消费者），其中一个很可能会成为瓶颈（除非生产者生成数据的速率变化很大）。取决于哪个更快，整个情况会发生根本性的变化：

让我们首先假设，IO 绑定消费者是您的瓶颈（无论它是写入标准输出还是写入文件）。可能的后果是什么？

优化生成数据的算法不会提高性能，相反，您必须最大限度地提高写入性能。但是，我假设写入性能不会在很大程度上取决于缓冲区大小（除非缓冲区太小）。

在另一种情况下，如果生产者是限制因素，则情况相反。在这里，您必须分析生成代码并提高算法的速度，并可能提高读取器和写入器线程之间的数据通信。但是，缓冲区大小仍然无关紧要，因为无论如何缓冲区大部分时间都是空的。

当然，情况可能比我描述的要复杂。但是，除非您确实确定自己不是处于极端情况之一，否则我不会投资调整缓冲区大小。只要保持可配置，你应该没问题。我认为以后将其改装到其他硬件环境应该不是问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-18T21:45:44.593

我个人认为你是在浪费时间。

第一次运行`time ./myprog > /dev/null`

现在，使用 `time dd if=/dev/zero of=myfile.data bs=1k count=12M`.

`dd`是一个尽可能简单的程序，它会很快地写入文件。但是写入几千兆字节仍然需要一点时间。（我的机器上 12G 大约需要 4 分钟 - 这可能不是世界上最快的磁盘 - 与 /dev/null 相同大小的文件大约需要 5 秒）。

您可以在组合产生的位置尝试一些不同的数字，`bs=x count=y`与测试运行的程序输出大小相同。但我只发现如果你制作非常大的块，它实际上需要更长的时间（每次写入 1MB - 可能是因为操作系统需要先复制 1MB 才能写入数据，然后将其写出然后复制下一个 1MB，其中较小的块（我测试了 1k 和 4k），复制数据所需的时间要少得多，实际上“磁盘旋转在我们写入之前没有做任何事情”的情况更少）。

将这两个时间与您的程序运行时间进行比较。写入文件所需的时间是否`dd`比程序写入文件的时间短得多？

如果没有太大差异，请查看使用您的程序写入 /dev/null 所需的时间 - 这是部分或全部差异的原因吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-18T19:06:52.833

大多数现代操作系统都擅长将磁盘用作 RAM 的后备存储。我建议您将启发式方法留给操作系统，并要求尽可能多的内存，直到遇到性能瓶颈。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-18T19:37:18.107

无需使用缓冲，操作系统会在必要时自动将页面交换到磁盘，您无需对其进行编程。如果您不需要保存数据，最简单的方法是让您留在 RAM 中，否则您可能最好在生成数据后保存它，因为它对磁盘 i/o 更好。

# spring - 从 JNDI 树中提取 jndi 值

> ID：14405730
> 
> 赞同：1
> 
> 时间：2013-01-18T18:58:35.053
> 
> 标签：spring, jboss, weblogic, jndi

我正在使用 spring 3.0，在我们的 JBoss 应用程序服务器中，我对远程 WebLogic 应用程序服务器执行 JNDI 查找。连接到 WebLogic JNDI 服务器的属性包含在名为**soa.properties**的属性文件中。这是**spring-config.xml**初始化**JndiTemplate** bean的样子

```
 <bean class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
    <property name="locations">
      <list>
        <value>classpath:app.properties</value>
        <value>classpath:soa.properties</value>
      </list>
    </property>
  </bean>
  <bean id="soaJndiTemplate" class="org.springframework.jndi.JndiTemplate">
    <property name="environment">
        <props>
            <prop key="java.naming.factory.initial">${soa.provider.initial}</prop>
            <prop key="java.naming.provider.url">${soa.provider.url}</prop>
            <prop key="java.naming.security.principal">${soa.security.principal}</prop>
            <prop key="java.naming.security.credentials">${soa.security.credentials}</prop>
        </props>
    </property>
  </bean> 
```

这可以很好地将我的值从**soa.properties**文件中提取出来，但我更愿意将 WebLogic JNDI 连接值从 JBoss JNDI 树中提取出来。

我的问题似乎与需要属性进行初始化的 InitialContext 对象的初始化有关。

我将所有用于 WebLogic JNDI 连接的 JNDI 字符串值放入 JBoss JNDI。下面是我用来提取值并初始化**JndiTemplate** bean 的代码。

```
<bean id="soaUrl" class="org.springframework.jndi.JndiObjectFactoryBean">
  <property name="jndiName"       value="soa/provider/url" />
</bean>
<bean id="soaFactory" class="org.springframework.jndi.JndiObjectFactoryBean">
  <property name="jndiName"       value="soa/provider/connection/factory" />
</bean>
<bean id="soaInitial" class="org.springframework.jndi.JndiObjectFactoryBean">
  <property name="jndiName"       value="soa/provider/initial" />
</bean>
<bean id="soaPrincipal" class="org.springframework.jndi.JndiObjectFactoryBean">
  <property name="jndiName"       value="soa/security/principal" />
</bean>
<bean id="soaCredential" class="org.springframework.jndi.JndiObjectFactoryBean">
  <property name="jndiName"       value="soa/security/credential" />
</bean>
<bean id="testsoaJndiTemplate" class="org.springframework.jndi.JndiTemplate">
  <property name="environment">
    <map>
      <entry key="java.naming.factory.initial"  value-ref="soaUrl" />
      <entry key="java.naming.provider.url"     value-ref="soaFactory" />
      <entry key="java.naming.provider.initial" value-ref="soaInitial" />
      <entry key="java.security.principal"      value-ref="soaPrincipal" />
      <entry key="java.security.credential"     value-ref="soaCredential" />
    </map>
  </property>
</bean> 
```

我的应用程序提出了这些创建的 bean，但是当我使用带有**soaConnectionFactory的****testoaJndiTemplate**时，它​​会爆炸。

```
<bean id="soaConnectionFactory" class="org.springframework.jndi.JndiObjectFactoryBean">
    <property name="jndiTemplate"   ref="testsoaJndiTemplate" />
    <property name="jndiName"       value="${soa.provider.connection.factory.name}" />
</bean> 
```

这个错误是如此神秘，它确实有意义。谢谢

# ios - UITableViewController reloadData 不起作用

> ID：14405733
> 
> 赞同：0
> 
> 时间：2013-01-18T18:59:02.437
> 
> 标签：ios, objective-c

我有一个 UITableViewController 不断从数据库中获取数据。而且我想在每次更改时显示数据。

```
- (void)setMyArray:(NSArray *)myArray{
    if (_myArray!=myArray) {
        _myArray=myArray;
        [self.tableView reloadData];
    }
} 
```

从调试中，我注意到当 reloadData 被调用时， numberOfRowsInSection:(NSInteger)section 被调用。但是 cellForRowAtIndex 没有被触及。如果我移动我的表格视图，则会调用 cellForRowAtIndex。如何以编程方式重新加载数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T19:33:50.990

我会检查两件事，你正在正确初始化`_myArray`，以及`numberOfRowsInSection`通过执行 NSLog 返回的值。只有大于 0`cellForRowAtIndexPath`才会被调用。`numberOfRowsInSection`

# android - 外部存储安卓

> ID：14405735
> 
> 赞同：0
> 
> 时间：2013-01-18T18:59:08.783
> 
> 标签：外部存储是什么？, android, storage

谁能解释一下android中的[外部存储是什么？](/questions/tagged/external-storage "显示标记为“外部存储”的问题")我以为我们指的是 sd 卡，但是在我卸载卡后，我仍然可以将图像存储在外部存储中！我正在使用的代码如下：

```
File path = new File(
                Environment
                        .getExternalStoragePublicDirectory(Environment.DIRECTORY_PICTURES)
                        + File.separator + album); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T19:30:32.237

根据[文档](http://developer.android.com/guide/topics/data/data-storage.html#filesExternal)：

> 使用内部存储分区作为外部存储的设备也可能提供 SD 卡插槽。在这种情况下，SD 卡不是外部存储的一部分，您的应用无法访问它（额外的存储仅用于系统扫描的用户提供的媒体）。

因此，您不能保证“外部存储”是指“在 SD 卡上”。

# c - fwrite 动态大小

> ID：14405738
> 
> 赞同：0
> 
> 时间：2013-01-18T18:59:24.167
> 
> 标签：c, curl, fwrite

我正在尝试打印 cURL 返回的动态下载图像，如下所示：

```
 char *raw_image = malloc(1024);

    raw_image = doCurl("GET", img_url, NULL, NULL);

    printf("Content-Type: image/png\n\n");

    fwrite(raw_image, sizeof(raw_image), 20000, stdout); 
```

如果我的尺寸小于 20000 - 图像会被剪切。如何使该数字动态化？我不想写入文件 - stdout 是最好的选择。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T19:09:46.733

[与语言无关的小型评论：您确定将原始 PNG 数据写入标准输出是最好的吗？]

此外，您似乎正在使用`libcurl`该图像。好吧，如果您没有为 CURL 句柄设置自定义回调函数，那么它将直接写入标准输出。

但是，如果这不是您打算做的，您可能需要查看[`realloc()`](http://pubs.opengroup.org/onlinepubs/009696899/functions/realloc.html).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T19:10:11.093

理想情况下，您需要一种方法来了解正在下载的文件（图像）的大小。

首先使用 libcurl 获取标头并获取大小。

假设您将大小存储在**s**

当您分配缓冲区时，您应该这样做

```
char *raw_image = malloc(s); 
```

因为**s**是您必须保存的数据的大小，而**不是 1024 字节！**

下载文件并将其存储在**raw_image**

然后

```
fwrite(raw_image, 1, s, stdout); 
```

请注意，**sizeof(raw_image)**是指向缓冲区的指针的大小，因此在 64 位硬件架构中为 8 个字节。**这不是文件的大小！**

-

但....

-

您正在获取图像，并将其放在标准输出上。

你为什么不做一个简单的调用**curl**？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T19:10:43.497

您告诉 fwrite 写入 20000 个指针大小的对象。这是因为 sizeof(raw_image) 返回 raw_image 的大小，它是一个指针，因此在大多数 32 位机器上为 4 个字节，在大多数 64 位机器上为 8 个字节。它不*返回*raw_image 指向的缓冲区的大小。

我不知道如何确定要下载的图像的大小，但您需要以某种方式确定该大小。一旦你这样做了，你的 fwrite 调用应该如下所示：

```
fwrite(raw_image, 1, sizeOfTheImageInBytes, stdout) 
```

# javascript - jquery image fade animate() 和多个鼠标事件

> ID：14405739
> 
> 赞同：0
> 
> 时间：2013-01-18T18:59:25.263
> 
> 标签：javascript, jquery, jquery-animate, jquery-hover

JavaScript 相当新，jQuery 也很新。有人可以看看下面的代码，看看我哪里出错了。

这是 jQuery 代码的主要部分：

```
$(document).on("hover", ".crrightcontainer img", function() { /* trigger event on hover on an img in class crrightcontainer */
    var src = $(this).attr('src'); // get full path and filename from thumbnail
    var index = src.lastIndexOf('/') + 1; // get index to last occurrenace of file path delimiter "/"
    var fullsizeimgname = src.substr(index); // get actual filename only i.e. "cs1.jpg"
    fullsizeimgname = "/painted/fp-images/" + fullsizeimgname; // add path to give full path to the full sized image.
    $('.crleftcontainer img').animate({opacity: 0.0},1000); // fade out old full size image
    $('.crleftcontainer img').attr("src",fullsizeimgname).animate({opacity: 1.0},1000); // set full size image in browser and fade in
 }); 
```

[http://jsfiddle.net/deanflyer/CfxyJ/1](http://jsfiddle.net/deanflyer/CfxyJ/1)

它有效，它似乎只是触发了多个鼠标事件。只需在缩略图上移动鼠标几次，你就会明白我的意思，给出了多个淡入淡出。

我尝试使用 animate() 在主图像上使用 .stop() 但这只会停止一切。

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T19:27:08.310

是这样的你的要求试试这个：http: [//jsfiddle.net/CfxyJ/13/](http://jsfiddle.net/CfxyJ/13/)

```
 $('.crrightcontainer img').css('opacity', 0.7); 

$('.crrightcontainer img').mouseenter(function () { 
    $(this).stop().animate({opacity: 1.0}, 600);
    var src = $(this).attr('src'); 
    var index = src.lastIndexOf('/') + 1; 
    var fullsizeimgname = src.substr(index);
    fullsizeimgname = "http://thepaintedtree.co.uk/fp-images/" + fullsizeimgname;  
    $('.crleftcontainer img').fadeOut('slow', function(){
        $('.crleftcontainer img').attr("src", fullsizeimgname).fadeIn('slow');
    });
});

$('.crrightcontainer img').mouseleave(function () { //fadeout
    $(this).stop().animate({
        opacity: 0.7
    }, 600);

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T19:11:04.740

尝试使用`mouseenter`事件。请参阅更新的小提琴[http://jsfiddle.net/CfxyJ/25/](http://jsfiddle.net/CfxyJ/25/)。是你要找的吗？

# php - php中的html5正则表达式

> ID：14405741
> 
> 赞同：1
> 
> 时间：2013-01-18T18:59:30.700
> 
> 标签：php, regex, html

对于仅字母数字字符，我使用如下内容：

```
<input type="text" pattern="[a-zA-Z0-9]+" /> 
```

当数据到达服务器时，我需要再次验证。所以我做了

```
preg_match("[a-zA-Z0-9]+", $value); 
```

但是 PHP 说警告：preg_match() [function.preg-match]: Unknown modifier '+'

你不能在html5和PHP中使用相同的表达式吗？

编辑：我有一个 JSfiddle 显示以下建议不起作用：http: [//jsfiddle.net/EY3hc/](http://jsfiddle.net/EY3hc/)

我想要实现的是 1 个正则表达式，我可以在 html 和 preg_match 中用作模式。html 是由 PHP 生成的，所以我想有一个地方来维护验证代码。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-18T19:00:50.473

您需要在表达式中添加分隔符。您还应该匹配行的开头和结尾：

```
preg_match("/^[a-zA-Z0-9]+$/", $value); 
```

如果没有`^`and `$`，输入 like`somewords!@#`将验证。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T19:00:48.933

您需要指定分隔符！尝试

```
preg_match("/[a-zA-Z0-9]+/", $value); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T19:00:52.290

您需要在 PHP 中对该表达式使用分隔符。

```
preg_match("/[a-zA-Z0-9]+/", $value); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-18T19:01:06.150

您必须在 php.ini 中使用分隔符。

```
preg_match("/[a-zA-Z0-9]+/", $value); 
```

# javascript - 如何动态分配 javascript 对象的新成员？

> ID：14405743
> 
> 赞同：0
> 
> 时间：2013-01-18T18:59:35.577
> 
> 标签：javascript, object, properties

假设我有一个如下所示的 javascript 类：

```
var Person = {
    //Private members

    getXmlRequestObj : function() {
            if (window.XMLHttpRequest) {
                return new XMLHttpRequest();
            } else if(window.ActiveXObject) {
                return new ActiveXObject("Microsoft.XMLHTTP");
            } else {
                return "Your Browser needs an upgrade";
            }
        },

initialize: function() {
        Person.importHTML = Person.getXmlRequestObj();
    },

    //Set up the global content retrieval object
    //called importHTML
    //importHTML:  new ActiveXObject("Microsoft.XMLHTTP"),

    _status:'',

    getAjaxList:function(sWhat,sUrl) {
        if (Person.importHTML.readyState == 4 || Person.importHTML.readyState == 0) {
            Person.importHTML.open("GET", sUrl, false);// make it wait for the response
            Person._sWhat = sWhat;
            Person.importHTML.onreadystatechange = Person.handleListArrived; 
            Person.importHTML.send(null);
        }       
    },
     handleListArrived: function() {
        if (Person.importHTML.readyState == 4) {
            if(Person._sWhat=="units")
                Person._unitList = Person.importHTML.responseText;
            if(Person._sWhat=="ranks")
                Person._rankList = Person.importHTML.responseText;
        }
    }
} 
```

而不是使用此代码：

```
 if(Person._sWhat=="units")
                Person._unitList = Person.importHTML.responseText;
            if(Person._sWhat=="ranks")
                Person._rankList = Person.importHTML.responseText; 
```

我希望它使用任何 Person._sWhat 来成为 Person 的新成员。换句话说，我如何动态地分配 Person 的新成员？从而使代码看起来像这样：

Person.something 的效果 Person._sWhat = Person.importHTML.responseText;

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T19:11:13.507

```
getAjaxList:function(sWhat,sUrl) {
    if (Person.importHTML.readyState == 4 || Person.importHTML.readyState == 0) {
        Person.importHTML.open("GET", sUrl, false);// make it wait for the response
        Person.importHTML.onreadystatechange = Person.handleListArrived.bind(Person.importHTML, sWhat); //bind is supported in IE9+
        Person.importHTML.send(null);
    }       
},
handleListArrived: function(sWhat) {
    if (this.readyState == 4) {
        Person[sWhat] = this.responseText;
    }
} 
```

或者，自 ecmascript 1.3 起支持以下内容：

```
getAjaxList:function(sWhat,sUrl) {
    if (Person.importHTML.readyState == 4 || Person.importHTML.readyState == 0) {
        Person.importHTML.open("GET", sUrl, false);// make it wait for the response
        Person.importHTML.onreadystatechange = function(){ 
            Person.handleListArrived.call(Person.importHTML, sWhat); 
        };
        Person.importHTML.send(null);
    }       
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T19:11:44.870

点表示法在 JavaScript 中是一种方便的方式，相当于方括号表示法：

```
Foo.xyz === Foo['xyz'] 
```

所以，在你的情况下

```
Person[Person._sWhat+"List"] = Person.importHTML.responseText 
```

就足够了，但对于`"s"`您所在`_sWhat`领域的尾随。如果您可以在其他地方删除它，那将是理想的。或者：

```
Person[Person._sWhat.slice(0,-1)+"List"] = Person.importHTML.responseText 
```

# java - 从创建失败的 JUint 测试调用方法

> ID：14405744
> 
> 赞同：-1
> 
> 时间：2013-01-18T18:59:37.187
> 
> 标签：java, selenium, junit, automation

从我的 JUnit 测试中我想调用这个方法，它允许我调用它，但是即使它应该导致错误它通过测试而不是失败。

```
public void handleErrors(String string, boolean b) {
    System.out.println(string + ", " + b);
    if(b == false){
        collector.addError(new Throwable(string + ", " + b));
    }   
} 
```

如果我通过这个应该会导致测试失败，它应该会失败，但不会。

```
@Test
public void test() throws InterruptedException {
    handleErrors("Button was found", false);
} 
```

为什么 JUint 不报告失败？

编辑：

```
package com.selenium.tests;
import org.junit.After;
import org.junit.Before;
import org.junit.Rule;
import org.junit.Test;
import org.openqa.selenium.By;
import org.junit.rules.ErrorCollector;
import com.selenium.AbstractScreenTest;
public class test1 extends AbstractScreenTest{

@Rule
public ErrorCollector collector= new ErrorCollector();

@Before
public void initialize() {
createTest();
}

@Test
public void test() throws InterruptedException {
handleErrors("Button was found", false);
}

public void handleErrors(String string, boolean b) {
System.out.println(string + ", " + b);
if(b == false){
collector.addError(new Throwable(string + ", " + b));
}   
}

@After
public void tearDown(){
closeTest();
}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T19:05:16.693

我想你没有用@Rule 注释收集器。它应该是ErrorCollector。API文档中有一个示例：

```
public static class UsesErrorCollectorTwice {
    @Rule
    public ErrorCollector collector= new ErrorCollector();

    @Test
    public void example() {
            collector.addError(new Throwable("first thing went wrong"));
            collector.addError(new Throwable("second thing went wrong"));
            collector.checkThat(getResult(), not(containsString("ERROR!")));
            // all lines will run, and then a combined failure logged at the end.
    }
} 
```

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T19:22:42.247

修复了这个。我没有移动

```
@Rule public ErrorCollector collector= new ErrorCollector(); 
```

线。

# c# - 序列化多个对象

> ID：14405747
> 
> 赞同：0
> 
> 时间：2013-01-18T18:59:47.717
> 
> 标签：c#, .net, windows-8

```
class AppDataManager
{
    public static async Task SaveAsync<T>(T data, string fileName)
    {
        StorageFile file = await ApplicationData.Current.LocalFolder.CreateFileAsync(fileName, 
            CreationCollisionOption.GenerateUniqueName);
        var stream = await file.OpenStreamForWriteAsync();
        var serializer = new DataContractSerializer(typeof(T));
        serializer.WriteObject(stream ,data);
        await stream.FlushAsync();
    }

    public static async Task<T> RestoreAsync<T>(string fileNa me)
    {
        try
        {
            var file = await ApplicationData.Current.LocalFolder.GetFileAsync(fileName);

            var instream = await file.OpenStreamForReadAsync();
            var serializer = new DataContractSerializer(typeof(T));
            return (T)serializer.ReadObject(instream);
        }
        catch (Exception)
        {
            return default(T);
        }
    }
}

    protected async override void OnNavigatedTo(NavigationEventArgs e)
    {
        await AskUserToLocalDataAsync();

        if (useLocalData)
        {
           SomethingGoesHere  = await AppDataManager.RestoreAsync<UserData>(fileName);
        }
    } 
```

代码工作正常，但它只返回一个对象，我想编写多个对象并将其作为 observableCollection 检索以将其绑定到 GridView。GenerateUniqueName 是附加多个对象赖特？

怎么存放呢？以及如何检索它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T19:07:05.957

创建一个具有将保存您的集合的属性的类。然后序列化该类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T19:13:32.687

我建议`Collection`为您的对象创建一个类。

例如一个`Widget`对象：

```
[DataContract]
public class Widget
{
  [DataMember]
  public string Name { get; set; }

  [DataMember]
  public int Value { get; set; }
} 
```

然后你可以`WidgetCollection`上课：

```
[DataContract]
public class WidgetCollection
{
  [DataMember]
  public List<Widget> Widgets { get; set; }
} 
```

您可以序列化/反序列化`WidgetCollection`，然后`foreach`通过并添加到`ObservableCollection<Widget>`.

`IDisposable`此外，将您的对象（如`IRandomAccessStream`）包装在`using`语句中，以便正确处理它们。

# php - 打包和解包 64 位整数

> ID：14405751
> 
> 赞同：7
> 
> 时间：2013-01-18T19:00:04.453
> 
> 标签：php

我有以下代码：

```
$packed = pack('i',PHP_INT_MAX);
echo unpack('i', $packed)[1]; 
```

结果我得到`-1`

我正在使用`PHP 5.4.6-1ubuntu1.1 (cli) (built: Nov 15 2012 01:18:34)` ，我`PHP_INT_MAx`的等于`9223372036854775807`

有什么方法可以处理`pack`函数和 64 位整数？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-18T19:16:38.263

将其另存为两个 32Bit：

```
$value = PHP_INT_MAX;
$highMap = 0xffffffff00000000; 
$lowMap = 0x00000000ffffffff; 
$higher = ($value & $highMap) >>32; 
$lower = $value & $lowMap; 
$packed = pack('NN', $higher, $lower); 

list($higher, $lower) = array_values(unpack('N2', $packed)); 
$originalValue = $higher << 32 | $lower; 
```

*   算法取自： http: [//php.net/pack#109328](http://php.net/pack#109328)
*   示例：[http ://codepad.viper-7.com/UuLmor](http://codepad.viper-7.com/UuLmor)

# localization - 如何在 Sencha Touch 2 中刷新应用而不退出应用本地化

> ID：14405752
> 
> 赞同：0
> 
> 时间：2013-01-18T19:00:04.557
> 
> 标签：localization, refresh, sencha-touch-2, tabpanel

当用户在设置屏幕中选择不同的语言时，我希望应用程序重新启动，以便导航和内容被刷新-重新加载。我目前正在通过处理每个类的 show 方法来强制执行此操作，这并不理想且高度重复。这种方法不适用于刷新始终存在的选项卡面板，并且没有可以触发重新加载其内容的事件（至少我不理解）。

理想情况下，一旦用户选择了不同的语言，我希望整个应用程序重新加载并处于初始启动后的状态。有没有简单的方法来实现这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T03:56:52.170

对我有用的是：

```
window.location.reload(); 
```

它将重新加载整个应用程序，而无需用户从主屏幕重新启动应用程序。假设您在 web 视图中工作，所有`window`命令都像在浏览器中一样工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-06T09:35:48.590

设置超时（函数（）{

```
 window.location = 'index.html'; 
            }, 1800); 
```

1800时间线重启

# c++ - 在 c++0x 中发生什么以及如何发生之前

> ID：14405753
> 
> 赞同：3
> 
> 时间：2013-01-18T19:00:07.060
> 
> 标签：c++, multithreading

您能否解释一下在两个线程之间共享的原子上的“发生前”排序？考虑线程“Read”和线程“write”，它们都共享一个原子布尔变量 x。读线程简单地读取 x 的值，而写线程简单地将值写入 x。鉴于调度程序可以以任何顺序运行这些线程，c++ 如何确保两个线程之间的顺序一致？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T19:05:23.313

规则是，如果一个线程写入原子变量，而另一个线程读取该变量**并**看到写入的值，则您有一个发生前的关系。这反过来意味着在写入原子变量之前写入第一个线程中的值在第二个线程读取原子变量并看到写入的值之后对第二个线程可见。

要使用原子变量进行同步，您必须执行以下操作：

```
int i = 0;
atomic<bool> ready;

// thread 1:
i = 3;
ready = true;

// thread 2:
while (!ready)
    ;  /* busy wait */
std::cout << i << '\n'; // writes "3" to cout 
```

# android - Seekbar 问题（防止拇指移动）

> ID：14405757
> 
> 赞同：1
> 
> 时间：2013-01-18T19:00:16.830
> 
> 标签：android, scrollbar, progress, seekbar

我正在根据进度条增加textview的字体......而textview的宽度<=设备宽度，字体随着进度条增加......当达到限制时......字体停止增加。

问题是拇指，它可以自由移动。当我将它从位置 0 快速移动到最大值时......条件被忽略（文本视图宽度变得大于设备宽度）。

任何人都知道如何防止搜索栏拇指在某个位置后移动？

例如：seekbar.max(10)...当进度达到 4 时，我不希望拇指移动。

有人知道吗？

# php - 如何在动态表中设置列名？

> ID：14405761
> 
> 赞同：-1
> 
> 时间：2013-01-18T19:00:31.670
> 
> 标签：php, mysqli

我正在从列名所在的数据库中检索结果`script_id`，`script_name`等等，现在我正在做的是在从表中获取结果之后说我获取了 2 列，例如`script_id`，`script_name`所以我保存了用逗号分隔的名称并使用循环，但是如果我不知道用户选择了多少参数，又会返回多少呢？例如在做什么

```
<table>
  <tr>
   <?php
    $columns = explode(',', $fetch_column_list);
    foreach($columns as $throw_names) {
         echo '<td>'.$throw_names.'</td>';
     }
   ?>
  </tr>
 //And here I loop the results
</table> 
```

但是如果我有一个带有不同参数的表单来选择所以在这里我不能有我定义的列名的预定义列表，因为用户可能选择了也可能没有选择该列

那么如何在前端使用 MY DEFINED COLUMN HEADERS 动态生成表

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T20:18:08.637

你不需要知道你有多少列。您必须使用字段名称而不是数字

```
<?
$trans = array (
    'script_name'  => 'Fancy script name field header',
    'script_value' => 'Fancy script value  field header',
}
$data = $db->getAll("SELECT * FROM table");
$keys = array_keys($data[0]);
?>
<table>
  <tr>
<? foreach ($keys as $k): ?>
    <td><?=$trans[$k]?></td>
<? endforeach ?>
  </tr>
<? foreach ($data as $row): ?>
  <tr>
<?     foreach ($row as $one): ?>
    <td><?=$one?></td>
<?     endforeach ?>
  </tr>
<? endforeach ?>
</table> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T19:04:17.280

你如何获取你的数据？

如果你使用类似[mysqli_fetch_assoc](http://php.net/manual/en/mysqli-result.fetch-assoc.php)的函数，你可以使用

```
$row = mysqli_fetch_assoc( ... );
$columns = array_keys($row) 
```

# php - HTML 图像刷新工作正常，但添加 PHP 会破坏一些东西

> ID：14405764
> 
> 赞同：0
> 
> 时间：2013-01-18T19:00:44.520
> 
> 标签：php, javascript

我有这个运行良好的 HTML。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>

<script language="JavaScript"><!--
    function refreshIt() {
        if (!document.images) return;
        var myImage = document.getElementById('signals');
        myImage.src = 'http://lessthanrandom.com/screencast/signals.jpg?' + Math.random();
        setTimeout('refreshIt()', 900000); // refresh every 60 seconds
        //setTimeout('refreshIt()', 1800000); // refresh every 1/2 hour
    }
//--></script>

<style>
*{margin:0;padding:0}
html, body {height:100%;width:100%;overflow:hidden}
table {height:100%;width:100%;table-layout:static;border-collapse:collapse}
iframe {height:100%;width:100%}

.header {border-bottom:1px solid #000}
.content {height:100%}
</style>
</head>
<body onLoad="setTimeout('refreshIt()', 900000)">
<table>
  <tr><td class="content">
    <img src="http://lessthanrandom.com/screencast/signals.jpg" width="100%" id="signals" name="signals"></td></tr>
</table>
</body>
</html> 
```

如果我在上面添加以下 PHP 并更改为 PHP 文件，图像会显示，但不会刷新。我是 PHP 和 Javascript 的新手。

```
 <?php
include_once "/home/lesadmin/public_html/wp-load.php";
if (current_user_can("access_s2member_level1"))
{ 
}
else
    exit("Must have a valid membership to view this content.");
?> 
```

# windows-phone-7 - 如何将音频从麦克风传输到扬声器？

> ID：14405771
> 
> 赞同：2
> 
> 时间：2013-01-18T19:01:17.490
> 
> 标签：windows-phone-7, audio, windows-phone-8, windows-phone, microphone

我希望将音频直接从麦克风流式传输到默认音频输出介质，无论是扬声器还是 3.5 毫米插孔。

我发现播放音频的机制似乎取决于提供静态字节数以在 SoundEffect 中播放，如下所示：

```
SoundEffect sound = new SoundEffect(stream.ToArray(), microphone.SampleRate, AudioChannels.Mono);
soundInstance = sound.CreateInstance();
soundIsPlaying = true;
soundInstance.Play(); 
```

我可以连续播放 500 毫秒或更短的 SoundEffects 来实现我的目标，但我想知道是否有更复杂的方法涉及麦克风不断写入 MemoryStream，音频播放控件可以连续读取。

感谢您的任何帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T03:36:49.253

我通过使用麦克风向 MediaElement Player 提供样本的类扩展 MediaStreamSource 类来解决这个问题。

如果对这段代码有任何需求，我会很乐意将其发布到某个地方。现在，如果您尝试做同样的事情，这里有一个代码片段可以帮助您：

```
// Provides audio samples from AudioSampleProvider property.
//  (MediaStreamType parameter will always equal Audio.)
protected override void GetSampleAsync(MediaStreamType mediaStreamType)
{
    // start the microphone capture if it's not started yet
    if (microphone.State == MicrophoneState.Stopped)
    {
        microphone.Start();
    }
}

// gets called back when the microphone's buffer is ready
private void microphone_BufferReady(object sender, EventArgs e)
{
    // Retrieve audio data
    microphone.GetData(buffer);

    // Reset MemoryStream object
    memoryStream.Seek(0, SeekOrigin.Begin);

    // Write the newly acquired data into the memory stream
    memoryStream.Write(buffer, 0, buffer.Length);

    // Send out the sample
    ReportGetSampleCompleted(new MediaStreamSample(mediaStreamDescription,
                                                    memoryStream,
                                                    0,
                                                    buffer.Length,
                                                    0, 
                                                    mediaSampleAttributes));
} 
```

基本上，只要返回麦克风缓冲区，您就可以报告样本已准备就绪。这导致流畅的播放。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-27T00:03:18.080

尼科

在尝试您的 MegaPhone 项目时，我遇到了以下错误“对象引用未设置为对象的实例。”。你能看看吗？谢谢

在 MS.Internal.XcpImports.CheckHResult(UInt32 hr) 在 MS.Internal.XcpImports.MediaStreamSource_OnGetSampleCompleted(MediaElement mediaElement, Int32 streamIndex, StreamInteropWrapper streamWrapper, InternalStreamWrapper internalStream, Int64 offset, Int64 count, Int64 timeInHundredNanoseconds, Int64 durationInHundredNanoseconds, Int32 属性[ ] 属性长度，StringBuilder 属性）在 System.Windows.Controls.MediaElement.MediaSourceReportGetSampleCompleted(MediaStreamSample mediaStreamSample) 在 System.Windows.Media.MediaStreamSource.ReportGetSampleCompleted(MediaStreamSample mediaStreamSample) 在 Microsoft 的 Megaphone.MicrophoneSource.microphone_BufferReady(Object sender, EventArgs e)。 Microsoft.Xna.Framework.Audio.MicrophoneCollection 上的 Xna.Framework.Audio.Microphone.OnBufferReady(EventArgs args)。Microsoft.Xna.Framework.FrameworkDispatcher.Update() 处的 OnBufferReady(UInt32 句柄) Megaphone.MainPage.dt_Tick(Object sender, EventArgs e)

# java - 使用 javax.swing.Timer 在 Java 中制作倒数计时器

> ID：14405773
> 
> 赞同：2
> 
> 时间：2013-01-18T19:01:19.633
> 
> 标签：java, swing, netbeans, countdowntimer, javax.swing.timer

> **可能重复：**
> [有条件的停止计时器只能在第一次工作？](https://stackoverflow.com/questions/14391299/stop-timer-with-conditional-only-works-first-time)

我对如何使用 swing 而不是 util timer 制作计时器感到非常困惑。

我正在制作一个游戏，用户必须在 30 秒的时间内回答问题。我有一个显示时间的 PlayFrame，还有一个名为 startTimer 的 PlayFrame 内的方法，其中包含所有计时器内容。

```
public static void startTimer() {

    int elapsedSeconds = 0;
    javax.swing.Timer myTimer = new javax.swing.Timer(1000, new MyTimerActionListener());
    elapsedSeconds++;

    if (elapsedSeconds == 30) {
        myTimer.stop();
        timerLabel.setText("0");
        wrong();
    } else {
        String text = String.format("f", 30 - elapsedSeconds);
        timerLabel.setText(text);
    }

    if (myTimer != null && myTimer.isRunning()) {
        myTimer.stop();
        myTimer = null;
        timerLabel.setText("0");
    } else {
        elapsedSeconds = 0;
        myTimer = new javax.swing.Timer(1000, new MyTimerActionListener());
        myTimer.start();
        String text = String.format("t", 30);
        timerLabel.setText(text);
    }
} 
```

我想要这个方法做的是有一个计时器，从 30 开始倒计时，直到问题被正确回答。如果答案回答不正确，我希望计时器停止。

对于一个答案，也许是一些伪代码（或真实代码）让我朝着正确的方向前进。这是供个人使用的，不是家庭作业或任何东西。

请记住，这是我整个代码的一部分，它需要与它的其他部分一起使用。我会根据要求提供更多信息，谢谢！

编辑：新的 startTimer() 方法*注意*所有 System.out.print 仅用于测试：

```
 public static void startTimer() {
    class TimerListener implements ActionListener {
        Timer timer = new Timer(1000, new TimerListener());
        int elapsedSeconds = 30;
        String seconds = Integer.toString(elapsedSeconds);

        @Override
        public void actionPerformed(ActionEvent evt) {
            timer.start();
            if (elapsedSeconds == 0) {
                //System.out.print("here");
                timer.stop();
                PlayFrame.wrong();
            }
            else{
                //System.out.print("hersfde");
                elapsedSeconds--;
            PlayFrame.timerLabel.setText(seconds);
            }
            //System.out.println(elapsedSeconds);
        }
    }
    //System.out.print("l");
} 
```

什么都不做，也不知道为什么。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-18T19:23:53.020

这就是我制作倒数计时器的方式：

```
Timer timer = new Timer(1000, new TimerListener());

class TimerListener implements ActionListener{
    int elapsedSeconds = 30;

    public void actionPerformed(ActionEvent evt){
        elapsedSeconds--;
        timerLabel.setText(elapsedSeconds)
        if(elapsedSeconds <= 0){
            timer.stop();
            wrong()
            // fill'er up here...
        }
    }

} 
```

# php - 为什么我的 PHP 搜索结果输出中只出现一列？

> ID：14405778
> 
> 赞同：0
> 
> 时间：2013-01-18T19:01:33.067
> 
> 标签：php

我有一个 search.php 页面，它成功搜索了一个名为“sixcols”的数据库并显示了正确数量的结果。但突然间，它只显示每个结果第一列的信息。无论我在代码中首先列出的六种类型的列中的哪一种，都只会出现该列。我不知道为什么所有6个都没有出现。

我知道 mysql_fetch_array 正在被弃用，但我发誓这在今天早上有效，我不知道我改变了什么。

我已经搜索了 2 个小时来寻找错字或解释，但我无法弄清楚。任何帮助深表感谢！

这是代码：

```
<?php

error_reporting(E_ALL);
ini_set('display_errors', '1');

$search_output = "";
if(isset($_POST['searchquery']) && $_POST['searchquery'] != ""){
$searchquery = preg_replace('#[^a-z 0-9?!]#i', '', $_POST['searchquery']);
$sqlCommand = "SELECT Subcategory, Type, Author, Summary, Date, Source FROM sixcols WHERE Author LIKE '%$searchquery%' OR Summary LIKE '%$searchquery%'";

        include_once("connect.php");

$query = mysql_query($sqlCommand) or die(mysql_error());

$count = mysql_num_rows($query);
if($count > 1){
$search_output .= "<hr />$count results for <strong>$searchquery</strong><hr />";
while($row = mysql_fetch_array($query)){

            $Subcategory = $row["Subcategory"];
            $Type = $row["Type"];
            $Author = $row["Author"];
            $Summary = $row["Summary"];
            $Date = $row["Date"];
            $Source = $row["Source"];
   $search_output .= '<br/> <span class="subcategory">' . $Subcategory . '</span>'; '<span class="type">' . $Type . '</span>'; '<span class="author">' . $Author . '</span>'; '<span class="summary">' . $Summary . '</span>'; '<br/> <span class="date">' . $Date . '</span>'; '<span class="source">' . $Source . '</span>';
                } // close while
} else {
$search_output = "<hr />0 results for <strong>$searchquery</strong><hr />$sqlCommand";
}
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T19:04:25.007

您有一个语法问题，您停止附加到`$search_output`. 您应该打开错误报告以捕获这些错误。

```
$search_output .= '<br/> <span class="subcategory">' . $Subcategory . '</span>'; 
$search_output .= '<span class="type">' . $Type . '</span>';
$search_output .= '<span class="author">' . $Author . '</span>';
$search_output .= '<span class="summary">' . $Summary . '</span>';
$search_output .= '<br/> <span class="date">' . $Date . '</span>';
$search_output .= '<span class="source">' . $Source . '</span>'; 
```

您还需要停止使用`mysql_`函数。它们不再被维护[并被正式弃用](https://wiki.php.net/rfc/mysql_deprecation)。看到[**红框**](http://j.mp/Te9zIL)了吗？改为了解[*准备好的语句*](http://j.mp/T9hLWi)，并使用[PDO](http://php.net/pdo)或[MySQLi](http://php.net/mysqli) -[本文](http://j.mp/QEx8IB)将帮助您决定使用哪个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T19:06:50.740

因此，您会得到一列：

```
$search_output .= '<br/> <span class="subcategory">' . $Subcategory . '</span>'; 
```

分号之后的任何内容都不会附加到`$search_output`字符串中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T19:07:44.927

```
$search_output .= '<br/> <span class="subcategory">' . $Subcategory . '</span> <span class="type">' . $Type . '</span> <span class="author">' . $Author . '</span> <span class="summary">' . $Summary . '</span> <br/> <span class="date">' . $Date . '</span>  <span class="source">' . $Source . '</span>'; 
```

# performance - 内部功能的表现

> ID：14405779
> 
> 赞同：0
> 
> 时间：2013-01-18T19:01:34.627
> 
> 标签：performance, fortran

有没有理由相信 fortran 内部函数会比外部函数执行得更好？

例如

```
subroutine foo(x,y)
   real :: x
   x = bar(y)
   return
   contains
   real function bar(x)
      real :: x
      bar = x*x
      return
   end function bar
end subroutine foo 
```

对比

```
subroutine foo(x,y)
   real :: x
   real :: bar
   x = bar(y)
   return
end subroutine foo

real function bar(x)
   real :: x
   bar = x*x
   return
end function bar 
```

例如，内部单元是否允许编译器像某种宏一样内联该代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T19:14:47.560

我不相信有任何*普遍的理由*相信 Fortran 内部函数会比外部函数执行得更好。*一般来说*，我的意思是适用于所有平台上所有符合 Fortran 标准的编译器。因此，我不相信人们可以基于性能来表达对内部功能而非外部功能的一般（在相同意义上）偏好。

我会更进一步，我认为语言标准（其中任何一个）中没有太多内容可以很好地支持关于实现相同功能的变体方法的相对性能的论点。因此，再举一个例子，我认为该标准不会允许人们争论显式`do`循环应该优于等效的基于数组语法的表达式。或者反驳。

但我确实相信，可能存在特定于编译器版本和/或平台的原因，出于性能考虑，一种方法优于另一种方法。例如，上次我在英特尔处理器上的 MS Windows 上测试英特尔 Fortran 编译器（可能是 v11.something）时，我得出结论，显式`do`循环通常优于等效的数组语法表达式。

由于性能通常是 Fortran 程序员关注的一个关键问题，因此我们有必要在编译器的开发过程中监控各种方法的性能，而不是陷入过时的性能想法。

在这个游戏中，硬数据总是胜过争论。程序性能是一门实验科学。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T20:15:53.730

对于可能有争议的事情......这暗示内部程序“执行”比标准中的外部程序更好，但不是您（可能）的意思。

内部过程和模块过程获得自动显式接口。这要求编译器检查每个过程引用的某些方面，并使大多数半体面的编译器能够检查许多其他方面。使用外部程序实现相同级别的检查需要手动提供接口，这很容易出错。

在一般情况下，由自动显式接口产生的程序健壮性好处（很大程度上是一种性能形式）**消除**了任何“执行速度”性能考虑，这些天充其量归结为“它取决于”/“你”对于任何体面的编译器，都需要测量以找出“/“可能没有区别”。

在这种情况下，将 bar（和 foo）作为模块过程可能会更好 - 因为它消除了变量与 foo 的意外主机关联，并启用了 bar 的独立测试。

程序类型的选择应基于源代码的技术要求（在现代 Fortran 代码库中仍然存在编写外部程序的正当理由，但它们是非典型的），然后是在健壮性和清晰性之间进行权衡生成的源代码可能由模块提供，而不是内部过程。如果您需要在此决定中考虑执行速度性能，那么您的编译器就会损坏。

# javascript - 获取“无法设置属性 'src' of null”但元素存在

> ID：14405780
> 
> 赞同：1
> 
> 时间：2013-01-18T19:01:46.170
> 
> 标签：javascript, null, document, getelementbyid

我有这个函数试图改变 img 的 src 属性。这是Javascript：

```
function transition(){
    document.getElementById("firstfirst").src = marray[currArrayValue];
    currArrayValue++;
    if(currArrayValue == array.length-1){
        currArrayValue = 0;
    }
    setTimeout(transition(), 1000);
} 
```

我的谷歌浏览器控制台说 document.getElementById("firstfirst") 不存在，但它确实存在。这是HTML：

```
<div id="banners-container">
    <div id="banners">
        <img src="images/banners/top-banner-one.png" id="firstfirst" alt="Subscribe now to get access to thousands of vintage movies!" border="0">
    </div>
</div> 
```

是什么赋予了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T19:05:58.953

Javascript 在解析后立即执行。

如果您的 JS 包含在`<head>`您的网页中，它将在文档正文被解析并构建 DOM 之前执行。

因此，您需要对代码进行工程设计，使其在加载 DOM 之前不会执行。您可能想查看有关 DomContentLoaded 事件的[MDN 文档。](https://developer.mozilla.org/en-US/docs/Mozilla_event_reference/DOMContentLoaded_%28event%29?redirectlocale=en-US&redirectslug=DOM%2FDOM_event_reference%2FDOMContentLoaded)或者，您可以使用众多 JavaScript 库之一，这些库为您完成了这一工作。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-18T19:08:15.763

如果 chrome 说该元素为 null，则为 null。也许您在元素加载到 DOM 之前调用函数。就像在元素标签之前调用头标签中的函数一样。

所以尝试这样的事情。

```
<html>
   <head>
   <script>
      function F () { /*reach element*/ }
   </script>
</head>
<body>
   //The element
</body>
<script>
   F ();
</script>
</html> 
```

# git - Git以编程方式从远程存储库中获取单个文件

> ID：14405782
> 
> 赞同：11
> 
> 时间：2013-01-18T19:01:53.293
> 
> 标签：git, protocols

我会预先说这个问题本质上与[this](https://stackoverflow.com/questions/1125476/git-retrieve-a-single-file-from-a-repository)相似。有一个关键的区别使它与众不同：我想使用原始的 git 协议（如果您不熟悉基本的包网络协议，请参阅[此处](http://git-scm.com/book/en/Git-Internals-Transfer-Protocols)和[此处）。](https://raw.github.com/git/git/master/Documentation/technical/pack-protocol.txt)

我正在使用 Scala 和 JGit 编写一个将连接到匿名 git 存储库的应用程序。我想请求一个 blob（想想“/path/to/file.txt”@“refs/heads/branch1”）。最终，我的目标是以编程方式从远程存储库中检索单个文件。似乎是一件非常有用的事情。

不管怎样，我一直在研究这个协议的内部结构。看起来这个的基本版本是“我想要这些对象，我有这些对象”——而且 bam，有一个包含所有你没有的东西的包文件。我的问题的核心是：如何以**非递归**方式向 git-upload-packfile 询问单个对象？我可以下载单个提交对象，然后请求树，然后是子树，然后是另一个子树，最后是 blob 本身。速度在这里并不太重要，主要是我想节省带宽。但似乎根本没有办法告诉 git-upload-packfile，“请只给我我要求的一个对象”。

是的，有“拥有”列表，它基本上将对象排除在外，但是这需要对存储库内容的先验知识（记住，我没有本地存储库）。我可以生成所有可能的 sha1 列表并发送所有可能的 sha1，但我想要的除外，但这太荒谬了（耗时、消耗带宽，并且对各地程序员的犯罪行为）

我一直在研究的另一个可能的解决方案是在远程端使用 git-upload-archive，尽管我承认我还没有花太多时间研究它。

如果涉及到这一点，我非常愿意重写 JGit，所以请不要把它读作“我如何让 JGit 做......”。我只想知道协议本身是否能够做到这一点。我觉得有一些非常聪明的方法可以滥用协议来实现我想要的。有什么想法吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-30T17:47:57.677

回答我自己的问题。我找到了一个可接受的（虽然几乎没有记录）答案。我不得不通过大量的 C 代码来解决这个问题。

首先，使用无法实现上述要求，`git-upload-packfile`因为这根本不是程序设计的目的。我怀疑的正确答案是`git-upload-archive`。可悲的是，该协议几乎没有记录。所以这是我的笔记，以防其他人有类似的要求。

基本上我在这里（在scala中）试图模拟的是以下命令：

```
git archive --format=tar --remote=ssh://dave@ssh.mycompany.com/cornballer.git \
  > master plans/documents/cornballer-blueprint.pdf | tar -x 
```

除了在软件中，希望使用 JGit。遗憾的是，JGit （还）不支持 git archive 命令。所以这里有一个关于如何添加支持的非常高级的概述（我可能会分叉 JGit 并在以后添加它）。

让我们看一下协议（来自 Documentation/technical/pack-protocol.txt）：

```
git-proto-request = request-command SP pathname NUL [ host-parameter NUL ]
request-command   = "git-upload-pack" / "git-receive-pack" /
                    "git-upload-archive"   ; case sensitive
pathname          = *( %x01-ff ) ; exclude NUL
host-parameter    = "host=" hostname [ ":" port ] 
```

所以协议的第一部分是这样的：

1.  与远程建立传输（ssh 然后运行`git-upload-archive`或使用匿名 git 协议）
2.  发送`git-upload-archive /cornballer.git\0host=ssh.mycompany.com\0`（作为数据包线路）

至此，连接建立。如果该命令不受支持或存在任何问题，Git 可能会返回错误。我还没有弄清楚如何检查这个。

接下来是未记录的部分。我们基本上通过网络发送命令行参数`git-archive`。它们与命令完全相同，但`git-archive`有一个例外：它们都以 . 为前缀`argument[SPACE]`。每个参数都写成（至少在参考实现中）作为单独的数据包行。所以对于上面的例子：

1.  发送`argument --format=tar`（作为数据包线路）
2.  发送`argument master`（作为数据包线路）
3.  发送`argument plans/documents/cornballer-blueprint.pdf`（作为数据包线路）
4.  发送一个刷新数据包 ( `0000`)

至此，我们已经为远程 git-archive 进程提供了整个命令。现在我们阅读响应。我们从服务器读回一个数据包行，这将是以下响应之一：

1.  `ACK`（意思是成功——准备发送存档）
2.  `NACK [message]`-- 某种错误，只找到了一个使用实例 -- “无法生成子进程”
3.  `ERR [message]`-- 发生错误

如果`ACK`发送了 an ，后面会跟着一个刷新数据包 ( `0000`)，然后是原始 tar 数据。此时，您重复读取来自边带#1（主数据通道）的数据包行。当你到达一个刷新数据包时，你停止阅读。很简单。

所以现在你有了远程文件，但是如果你想做一些巧妙的缓存呢？我如此热衷于使用的一个原因`git-upload-packfile`是它可以让我记录提交 ID，从而将其缓存在本地，并且只在需要时刷新。tar 文件不会告诉我们这些信息，对吧？错误的！

从 git-archive 的手册页：

> 此外，如果使用 tar 格式，则提交 ID 存储在全局扩展 pax 标头中；它可以使用 git get-tar-commit-id 提取。在 ZIP 文件中，它被存储为文件注释。

嗯，这是个好消息！这就是我想要的一切。如果您想知道标头是什么样的，这里有一个示例（不，我不会剖析 pax 标头）：

```
pax_global_header00006660000000000000000000000064121002672560014513gustar00rootroot0000000000000052 comment=326756f834865880c9832b64238e7665632e9b67 
```

所以从我的角度来看，我只需要设置一个管道来自动运行上述步骤，通过一个 untar 步骤（以编程方式）运行它来执行所需的“从 git 获取单个文件”功能。

# wordpress - 如何将自定义查询字符串添加到单个 WordPress 导航菜单项？

> ID：14405784
> 
> 赞同：1
> 
> 时间：2013-01-18T19:01:58.707
> 
> 标签：wordpress, menu

我正在尝试将查询字符串添加到 WordPress 菜单中的特定菜单项中。我需要读取一个 cookie，比如说 sessionID，然后在我的导航菜单中的单个链接上的查询字符串中传递该键/值对。我可以通过 JS/jQuery 尝试此操作，但需要通过 PHP 进行。我已经搜索过，但在他的论坛中没有发现任何有用的信息。

使用 WordPress 3.5

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-12-06T19:40:13.590

尝试这个：

```
function wpse_14405784( $items, $menu = 'your_menu_slug', $args ) {

    foreach( $items as $item ) {

        if ( $item->post_title == 'your_link_title'  {

            $item->url = add_query_arg( 'your_key', 'your_value', $item->url );
        }
    }
    return $items;
}
add_filter( 'wp_get_nav_menu_items','wpse_14405784', 11, 3 ); 
```

# wpf - ListBox 中的水平单选按钮

> ID：14405788
> 
> 赞同：4
> 
> 时间：2013-01-18T19:02:15.663
> 
> 标签：wpf, mvvm

在 WPF 中，我试图将单选按钮绑定到 ViewModel 中的属性，例如这个 SO 答案[https://stackoverflow.com/a/2285732](https://stackoverflow.com/a/2285732)

一切正常，除了按钮是垂直堆叠的。现在，这似乎很容易解决，只需修改 ItemsPanelTemplate。

这是我的代码：

```
<ListBox ItemsSource="{Binding ItemOptions}" SelectedItem="{Binding SelectedOption}">
     <ListBox.ItemsPanel>
          <ItemsPanelTemplate>
               <StackPanel Orientation="Horizontal" IsItemsHost="True" />
          </ItemsPanelTemplate>
     </ListBox.ItemsPanel>
     <ListBox.ItemContainerStyle>
          <Style TargetType="{x:Type ListBoxItem}">
               <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="{x:Type ListBoxItem}"  >
                            <RadioButton Content="{TemplateBinding Content}" 
                                 IsChecked="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=IsSelected}"/>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
           </Style>
     </ListBox.ItemContainerStyle>
</ListBox> 
```

但是，这些项目保持垂直堆叠。任何想法为什么这对 ListBox 的方向没有影响？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T19:11:42.403

Try this:

```
<ListBox.Template>
      <ControlTemplate TargetType="{x:Type ListBox}">
          <ScrollViewer x:Name="scrollviewer" 
                        HorizontalScrollBarVisibility="Visible" CanContentScroll="False">
            <StackPanel IsItemsHost="True" Orientation="Horizontal" />
          </ScrollViewer>
      </ControlTemplate>
 </ListBox.Template> 
```

I tried to get this working with the ItemsPanelTemplate, as you did, without success. This worked great for me. Regards

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-11-07T16:12:33.940

这是一个没有样式的基本示例。请注意，`WrapPanel`处理布局。

```
 <ListBox Margin="0,10,0,0"        
             ItemsSource="{StaticResource Orders}">
        <ListBox.ItemsPanel>
            <ItemsPanelTemplate>
                <WrapPanel HorizontalAlignment="Stretch"/>
            </ItemsPanelTemplate>
        </ListBox.ItemsPanel>
        <ListBox.ItemTemplate>
            <DataTemplate>
                <RadioButton Content="{Binding CustomerName}" />
            </DataTemplate>
        </ListBox.ItemTemplate>
    </ListBox> 
```

具有在后面代码中定义的模型的数据。

```
<Page.Resources>
    <model:Orders x:Key="Orders">
        <model:Order CustomerName="Alpha"
                    OrderId="997"
                    InProgress="True" />
        <model:Order CustomerName="Beta"
                    OrderId="998"
                    InProgress="False" />
        <model:Order CustomerName="Omega"
                    OrderId="999"
                    InProgress="True" />
        <model:Order CustomerName="Zeta"
                    OrderId="1000"
                    InProgress="False" />
    </model:Orders>
</Page.Resources> 
```

结果

[![在此处输入图像描述](../Images/b7caebb5713399672a1eecbb9112515e.png)](https://i.stack.imgur.com/3WO74.png)

# c++ - 迭代器和反向迭代器的区别

> ID：14405794
> 
> 赞同：4
> 
> 时间：2013-01-18T19:02:25.523
> 
> 标签：c++, algorithm, stl, comparison, stable-sort

以下两个代码片段有什么区别。

```
vector<int> a;
// initialization code
sort( a.rbegin(), a.rend() ); 
```

和

```
vector<int> a;
// same initialization as above
sort(a.begin(), a.end(), comp); 
```

其中 comp 是下面给出的布尔函数

```
bool comp( int i, int j)
{
    return i>j;
} 
```

为了说明，下面的代码给出了[WA](http://ideone.com/cpYRbH)，而这段代码给出了 SPOJ 问题[XMAX的](http://www.spoj.com/problems/XMAX/)[AC](http://ideone.com/l0StTQ)。[AC](http://ideone.com/l0StTQ)和[WA](http://ideone.com/cpYRbH)之间的唯一区别是使用的 sort() 版本。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-18T19:31:23.873

这两个函数调用**没有**给出相同的答案，因为[`std::sort`](http://en.cppreference.com/w/cpp/algorithm/sort)它**不是一个稳定的算法**，即它不会在它们的相对顺序中保持相同的元素。下面是一个示例，其中的元素`std::pair<int, int>`按其第一个元素排序。使用反向比较功能进行排序和反向排序不会产生相同的序列。做同样的事情[`std::stable_sort`](http://en.cppreference.com/w/cpp/algorithm/stable_sort)确实会产生相同的结果。

```
#include <algorithm>
#include <iostream>
#include <ios>
#include <vector>

int main()
{
    typedef std::pair<int, int> Element;
    std::vector<Element> v;

    v.push_back( Element(1,1) );
    v.push_back( Element(-1,1) );
    v.push_back( Element(1,2) );
    v.push_back( Element(-1,2) );
    v.push_back( Element(1,3) );
    v.push_back( Element(-1,3) );
    v.push_back( Element(1,4) );
    v.push_back( Element(-1,4) );
    v.push_back( Element(1,5) );
    v.push_back( Element(-1,5) );
    v.push_back( Element(1,6) );
    v.push_back( Element(-1,6) );
    v.push_back( Element(1,16) );
    v.push_back( Element(-1,16) );
    v.push_back( Element(1,22) );
    v.push_back( Element(-1,22) );
    v.push_back( Element(1,33) );
    v.push_back( Element(-1,33) );
    v.push_back( Element(1,44) );
    v.push_back( Element(-1,44) );
    v.push_back( Element(1,55) );
    v.push_back( Element(-1,55) );
    v.push_back( Element(1,66) );
    v.push_back( Element(-1,66) );

    for (auto it = v.begin(); it != v.end(); ++it) {
        std::cout << "(" << it->first << "," << it->second << ")" << " ";
    }
    std::cout << "\n";

    auto w1 = v;
    std::sort(w1.begin(), w1.end(), [](Element const& e1, Element const& e2){ 
       return e1.first < e2\. first;
    });
    auto w2 = v;
    std::sort(w2.rbegin(), w2.rend(), [](Element const& e1, Element const& e2) {
       return e1.first > e2.first;
    });
    std::cout << std::boolalpha << std::equal(w1.begin(), w1.end(), w2.begin()) << "\n";

    auto w3 = v;
    std::stable_sort(w3.begin(), w3.end(), [](Element const& e1, Element const& e2){ 
       return e1.first < e2\. first;
    });
    auto w4 = v;
    std::stable_sort(w4.rbegin(), w4.rend(), [](Element const& e1, Element const& e2) {
       return e1.first > e2.first;
    });
    std::cout << std::boolalpha << std::equal(w3.begin(), w3.end(), w4.begin()) << "\n";

} 
```

[LiveWorkSpace](http://liveworkspace.org/code/2vqzo0%2425)上的输出

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-18T19:17:22.373

反向迭代器简单地在正常迭代器的相反方向上进行迭代。

因此，两个片段都会按升序对范围 [first, last] 内的所有内容进行排序。不同之处在于第一个它将使用 < 运算符进行比较，第二个是您给定的函数。

详细地说，第一个实际上是按非升序排序，但由于您也反转了比较，所以它再次反转，这抵消了效果。

注意：相互比较相等的元素不能保证保持它们原来的相对顺序。

有用的参考资料：[`std::sort`](http://en.cppreference.com/w/cpp/algorithm/sort), [`std::vector::begin`](http://en.cppreference.com/w/cpp/container/vector/begin), [`std::vector::end`](http://en.cppreference.com/w/cpp/container/vector/end), [`std::vector::rbegin`](http://en.cppreference.com/w/cpp/container/vector/rbegin), [`std::vector::rend`](http://en.cppreference.com/w/cpp/container/vector/rend)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-18T19:07:00.750

顾名思义，反向迭代器以相反的顺序访问集合。如果您要求 STL`sort()`算法对 from `a.begin()`to的范围进行排序`a.end()`，它会将结果值按照这些迭代器定义的顺序放置在...范围 from `a.begin()`to中。`a.end()`

那么如果你要求它对范围从`a.rbegin()`to进行排序会发生什么`a.rend()`？它将结果按照*这些*迭代器定义的顺序放在...范围 from `a.rbegin()`to中。`a.rend()`

 ** * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-18T19:08:24.853

迭代器从第一个到最后一个运行，反向迭代器从最后一个到第一个运行。因此`sort(a.begin(), a.end())`，将 [first, last) 范围内的元素按顺序排列；`sort(a.rbegin(), a.rend())`将 [last, first) 范围内的元素按顺序排列，产生与第一个版本相反的顺序。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-18T19:07:04.727

`rbegin`为您提供一个指向列表末尾的迭代器，并在您要求它向前移动时向后移动。同样， `rend`为您提供列表开头的迭代器。

```
sort(a.begin(), a.end(), comp); 
```

这里的第三个参数用来定义自己的排序顺序。如果您不指定一个，则将使用该对象的默认值。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-18T19:07:31.603

他们都完成了同样的事情。在第一个版本中，您颠倒迭代器的顺序以获得从高到低的排序。在第二个版本中，您颠倒了比较的意义，也得到了从高到低的排序。*

# android - 拦截对 GoogleMap 的内置 myLocation-Button 的点击

> ID：14405803
> 
> 赞同：2
> 
> 时间：2013-01-18T19:03:10.063
> 
> 标签：android, geolocation, google-maps-markers, android-maps-v2

有什么方法可以拦截/捕获对 GoogleMap（API v2）上 myLocation-Button 的点击？我需要这个的原因是：

我计算到我的地图标记的距离。这些计算的默认参考位置是用户位置。但是一旦用户搜索到一个地址，这个搜索结果就会被用作距离计算的参考。我想拦截对 myLocation 按钮的单击，以告诉我的应用它应该再次使用用户位置来计算距离。

我可以在布局中的任何位置实现我自己的“goToMyLocation”按钮，但我更喜欢 GoogleMap 的 Android 风格按钮来实现一致的 Android 体验。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T19:42:19.167

无法拦截此按钮的点击事件。你需要实现你自己的

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-30T07:03:41.987

使用 Google Play Services 3.2 的新 API`onMyLocationButtonClick()`时，只要单击 myLocation-Button，就会调用一个方法。从[Javadoc](http://developer.android.com/reference/com/google/android/gms/maps/GoogleMap.OnMyLocationButtonClickListener.html)：

> 如果侦听器已经消费了事件，则为 true（即不应发生默认行为），否则为 false（即应发生默认行为）。默认行为是相机移动，使其以用户位置为中心。

# php - 使用 PHP PDO 的 SQL 查询

> ID：14405806
> 
> 赞同：0
> 
> 时间：2013-01-18T19:03:19.123
> 
> 标签：php, sql, pdo, percona

我正在尝试使用 PHP 创建一个 SQL 查询，在该查询中它检查是否已经使用相同的日期和用户名提交/设置了一行。如果没有，它会插入一个新行。如果确实找到匹配项，则改为更新该行。

我可以很好地插入新行，但是当我使用预先存在的日期和名称时，我的任何日志中都没有收到错误，并且查询似乎运行没有任何问题。但是在检查数据库时，我注意到该行实际上没有设置 UPDATES。当我在 SQL 中手动运行更新命令时，它似乎工作正常。

没有日志/错误数据可以继续，我希望在这里得到一些建议。我敢肯定这里一定有我遗漏的东西。这是我目前正在使用的：

```
require_once 'db-conn.php';

$name = $_POST['name'];
$email = $_POST['email'];
$date = $_POST['date'];
$var1 = $_POST['var1'];
$var2 = $_POST['var2'];
$var3 = $_POST['var3'];
$var4 = $_POST['var4'];

$conn = db_connect (); 
$sqlq = "SELECT * FROM tbl WHERE date = '$date' AND name = '$name'"; 
$nRows = $conn->query("$sqlq")->fetchColumn();

if ($nRows==0) {
try {
  $sqli = "INSERT INTO tbl (name,email,date,var1,var2,var3,var4) VALUES (:name,:email,:date,:var1,:var2,:var3,:var4)";
   $sql = $conn->prepare("$sqli");
   $sql->execute(array(':name' => $name, ':email' => $email, ':date' => $date, ':var1' => $var1, ':var2' => $var2, ':var3' => $var3 ':var4' => $var4));
 } catch(PDOException $e) {
   die ('SQL Error');
   }
 }
else {
 try {
  $sqli = "UPDATE tbl SET email='$email', notes='$notes', var1='$var1', var2='$var2', var3='$var3' WHERE date='$date' AND name='$name'";
  $sql = $conn->prepare("$sqli");
  $sql->execute(array($name, $email, $date, $var1, $var2, $var3, $var4));
} catch(PDOException $e) {
  die ('SQL Error');
} 
```

}

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T19:06:12.183

您没有正确的绑定变量：

```
$sqli = "UPDATE tbl SET email=:email, notes=:notes, var1=:var1, var2=:var2, var3=:var3 WHERE date=:date AND name=:name";
$sql = $conn->prepare("$sqli");
$sql->execute(array(':name' => $name, ':email' => $email, ':date' => $date, ':var1' => $var1, ':var2' => $var2, ':var3' => $var3, ':notes'=>$notes)); 
```

您在插入语句中正确，但在更新中没有正确。

不知道你从哪里得到`$notes`。

另外不确定它是否是故意的，但您没有在更新查询中更新 var4。

# .htaccess - 简单的 mod_rewrite 重定向规则有问题

> ID：14405808
> 
> 赞同：0
> 
> 时间：2013-01-18T19:03:23.400
> 
> 标签：.htaccess

我有 mod_rewrite 在开发环境中工作。
此测试域在 .htaccess 文件中使用这些规则：

```
Options +FollowSymLinks
Options +Indexes
RewriteEngine on

 # deal with potential pre-rewrite spidered / bookmarked urls
RewriteRule ^clothes/index.php?pg=([0-9]+)$ /clothes/index$1.php [R=301,L] 

 # deal with actual urls
RewriteRule ^clothes/[0-9a-z-]+-pr([0-9]+).php$ /clothes/product.php?pid=$1 [L] 
```

**第二条规则工作正常。** 输入 http ://testdomain.dev/clothes/shirt-pr32.php 是从 http ://testdomain.dev/clothes/product.php?pid=32 静默传送的内容......这是预期和预期的！

但是，假设这被应用于一个活动站点，一个最初使用路径的站点，例如：http://testdomain.dev/clothes/product.php?pid=32，我想重定向任何传入的请求跟随旧的新网址的模式......这是**第一条规则的目的**。

我的问题是我的**测试服务器似乎忽略了第一条规则**并按要求提供页面（页面加载但地址栏仍位于 http://testdomain.dev/clothes/product.php?pid=32）

任何帮助或启蒙都将被最亲切地接受！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T19:10:32.830

您无法匹配重写规则中的查询字符串，您需要在条件中使用 `%{QUERY_STRING} 变量并使用**%**来反向引用分组。所以而不是：

```
RewriteRule ^clothes/index.php?pg=([0-9]+)$ /clothes/index$1.php [R=301,L] 
```

你需要：

```
RewriteCond %{QUERY_STRING} ^pg=([0-9]+)
RewriteRule ^clothes/index.php$ /clothes/index%1.php? [R=301,L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T19:08:07.873

您需要匹配 RewriteCond 中的查询字符串，然后从规则中反向引用该 RewriteCond。RewriteRule 只匹配路径，而不是查询字符串。

这是我之前回答过类似请求的相关帖子：[Mod_rewrite rewrite example.com/page.php?v1=abc&v2=def to example.com/abc/def](https://stackoverflow.com/questions/14363132/mod-rewrite-rewrite-example-com-page-phpv1-abcv2-def-to-example-com-abc-def/)

# mysql - Mysql Distinct 给出语法错误 - 删除重复结果

> ID：14405809
> 
> 赞同：0
> 
> 时间：2013-01-18T19:03:24.167
> 
> 标签：mysql, sql

在 Stackoverflow 上的某个人的帮助下，我几乎达到了完美查询的地步。我需要一些帮助来调整查询以满足我的需要，我希望有人可以再次帮助我。

情况就是这样，我有以下 2 个表：

```
Tweet 
```

和

```
Tweet_tags 
```

每条推文都有一个标签，一条推文可以有更多相同的标签。我想计算自发布推文以来的一周内有多少推文具有相同的标签。

这是现在的查询：

```
SELECT t.id
     , s.tag
     , ( SELECT COUNT(1)
           FROM twitter.tweet_tags r
           JOIN twitter.tweet q
             ON q.id = r.tweet_id
          WHERE r.tag = s.tag
            AND q.date >= t.date
            AND q.date <= t.date + INTERVAL 7 DAY
       ) AS cnt
  FROM twitter.tweet t 
  JOIN twitter.tweet_tags s 
    ON s.tweet_id = t.id
 ORDER
    BY cnt DESC 
```

此查询的结果是：

```
 | ID |     Tag      | Cnt |
-------------------------------
  | 1  |  Testtag     | 2   |
  | 2  |  Testtag     | 1   |
  | 3  |  tweettag3   | 1   |
  | 4  |  tweettag2   | 1   | 
```

我的数据库中有 2 次 testtag，所以第一个结果是正确的，tweettag3 和 tweettag2 在我的数据库中有 1 次，所以这也很好，但是当我再次添加它们时，它们可能也会显示多个结果。我尝试使用`DISTINCT`on`s.tag`来消除重复的结果，但这给了我一个语法错误。

所以我希望它是：

```
 | ID |     Tag      | Cnt |
-------------------------------
  | 1  |  Testtag     | 2   |
  | 2  |  tweettag3   | 1   |
  | 3  |  tweettag2   | 1   | 
```

有人可以帮我解决这个问题吗？如果您需要更多信息，请说出来！

谢谢 ！！

编辑 ：

这是表格的外观：

```
Tweet
---------------
ID
Message
users_id
Date

Tweet_tags
---------------
id
tag
tweet_id 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T19:14:51.007

您可以只使用`select distinct`，因此查询将是：

```
SELECT distinct s.tag
     , ( SELECT COUNT(1)
           FROM twitter.tweet_tags r
           JOIN twitter.tweet q
             ON q.id = r.tweet_id
          WHERE r.tag = s.tag
            AND q.date >= t.date
            AND q.date <= t.date + INTERVAL 7 DAY
       ) AS cnt
  FROM twitter.tweet t 
  JOIN twitter.tweet_tags s 
    ON s.tweet_id = t.id
 ORDER
    BY cnt DESC 
```

只需从选择中删除 id 字段即可。

如果你想要一个id，那么你可以使用隐藏列的MySQL特性来拥有：

```
select t.id, s.tag, . . .

group by tag
order by cnt desc 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T19:16:13.210

试试这个查询

```
SELECT 
    t.id , 
    s.tag , 
    s.count
FROM twitter.tweet t 
JOIN (
    SELECT
        COUNT(id) as count,
        tweet_id,
        tag
    FROM tweet_tags
    GROUP BY tweet_id
) as s ON s.tweet_id = t.id
        AND  t.tag = s.tag
ORDER BY cnt DESC 
```

# .net - 使用 Azure 表存储 1.8 检查行是否存在

> ID：14405811
> 
> 赞同：1
> 
> 时间：2013-01-18T19:03:38.633
> 
> 标签：.net, azure, azure-table-storage

Azure Table Storage .NET 客户端使用 SDK 1.8 进行了全面重新设计。使用新的 SDK，我如何检查一行是否存在？

[以下是SDK 文档](http://www.windowsazure.com/en-us/develop/net/how-to-guides/table-services/)中有关如何检索单个项目的示例：

```
TableResult retrievedResult = table.Execute(retrieveOperation);

// Print the phone number of the result.
if (retrievedResult.Result != null)
   Console.WriteLine(((CustomerEntity)retrievedResult.Result).PhoneNumber);
else
   Console.WriteLine("The phone number could not be retrieved."); 
```

根据示例，如果未找到任何行，retrieveedResult.Result 应该为 null。但实际上**情况并非如此，因为 table.Execute 如果没有找到任何行就会抛出异常。**

旧 SDK 也是如此：如果未找到行，则会引发异常。但是有一个属性将其关闭：

```
TableServiceContext.IgnoreResourceNotFoundException = true 
```

但是这个选项隐藏在新 SDK 的什么地方呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-19T04:28:19.900

如果您使用的是[TableEntity](http://msdn.microsoft.com/en-us/library/microsoft.windowsazure.storage.table.tableentity.aspx)概念，您可以尝试以下代码：

```
 CloudTable table = cloudTableClient.GetTableReference(tableName);
        TableOperation retrieveOperation = TableOperation.Retrieve<YourEntity>(partitionKey, rowKey);
        TableResult retrievedResult = table.Execute(retrieveOperation);
        YourEntity fetchedEntity = retrievedResult.Result as YourEntity; 
```

如果实体不存在，您将 fetchedEntity 设为 null。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T19:23:10.347

它在我的 SDK 1.8 中似乎一直在同一个位置，但它已经移到了存储 API 的 2.0 版本中。那是你用的吗？

[Microsoft.WindowsAzure.StorageClient.TableServiceContext](http://msdn.microsoft.com/en-us/library/windowsazure/ee758694.aspx)已移至[Microsoft.WindowsAzure.Storage.Table.DataServices.TableServiceContext](http://msdn.microsoft.com/en-us/library/windowsazure/jj733141.aspx)。

[您正在寻找](http://msdn.microsoft.com/en-us/library/windowsazure/system.data.services.client.dataservicecontext.ignoreresourcenotfoundexception.aspx)的房产似乎仍然在那里可用:)

# javascript - 禁用按钮/删除 ... 有人点击提交按钮后（为所有人删除）

> ID：14405815
> 
> 赞同：-1
> 
> 时间：2013-01-18T19:04:17.143
> 
> 标签：javascript, web

1）无论如何我可以做类似的事情

onclick=#remove 一个特定的 div 类/禁用 div 类的按钮#使用 javascript（对其他建议开放，我真的不知道任何其他选项）。

例子：

```
<div class="well" id = 73909><b>This is what i'm trying to do</b>
    <br><form name="Cart" method="post" action="/Cart.cfm">
            <input class="btn btn-primary" id="73909-button" 
                onclick="remove this.div"
                type="submit" value="ADD TO CART">
        </form>
</div> 
```

2) 相关

无论如何，我是否可以检查我从提交表单中得到的响应（在单击按钮后），并且只有在符合特定标准的情况下才执行有问题的任务（1）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T19:13:46.100

两者都是，您可以使用 javascript 从元素中删除类以及禁用按钮。这是一个使用 jquery 的示例：

```
var onBtnClick = function(){
  $('#divWithClass').removeClass('classToRemove');
  $('#btnToDisable').attr('disabled', 'disabled');
} 
```

那里有许多验证库，jquery 验证就是其中之一，您可以使用它们来验证特定条件的表单。HTML5 也将其中许多作为属性内置到表单字段中[HTML5 验证示例](http://www.the-art-of-web.com/html/html5-form-validation/#.UPmelidQUww)

[更新] 如果您想为每个人删除它，您需要让每个客户端轮询，或使用 websockets 推送数据以不断更新。如果您正在使用轮询，您将需要验证购物车项目仍然存在以被删除，因为它可能在几秒钟前被其他人删除。根据您的负载以及您正在尝试做的事情，这听起来像是 websockets 的一个很好的候选者。

# ios - 由于 FlurryAds，iOS 应用程序崩溃

> ID：14405817
> 
> 赞同：4
> 
> 时间：2013-01-18T19:04:23.680
> 
> 标签：ios, cocoa-touch, flurry

我遇到了一个难以调试的问题。我的程序崩溃了，因为一条消息被发送到一个释放的对象。使用 Zombie Objects，我发现了导致它崩溃的原因，但不知道如何修复它。当我的视图消失时，我将 FlurryAds 委托设置为 nil，并在该视图出现时将其设置为视图。当我在后台运行我的应用程序并在此视图中时，我立即崩溃了。Flurry中是否有错误？

这是打印到控制台的消息：

```
2013-01-18 14:04:44.626 Purdue Course Sniper[19212:c07] *** -[FlurryAd space]: message sent to deallocated instance 0xa6ac490 
```

我不会在任何地方发送此消息^^。为什么还是要发送此消息？代表被设置为零..

![乱舞图像](../Images/de36c3f5b744dc054407f8285c2ddf85.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T16:48:16.253

我为 Flurry 工作，我很乐意提供帮助。我需要更多地了解您的集成。即，更多关于“当我的视图消失时，我将 FlurryAds 委托设置为 nil，并在该视图出现时将其设置为视图”的更多信息。什么视图正在消失和出现？这是全屏广告吗？了解 Flurry 帐户的详细信息也将有所帮助。您可以发送电子邮件至 support@flurry.com 以便我们访问您的帐户吗？谢谢，很抱歉您遇到问题。

（全面披露：我在 Flurry 的支持团队工作）

# php - 如何使用 php 将单选按钮的数据更新到 mysql 数据库？

> ID：14405819
> 
> 赞同：0
> 
> 时间：2013-01-18T19:04:25.973
> 
> 标签：php, mysql, radio-button, edit

代码正在尝试：

更新单选按钮的逻辑呢？这个可以吗 ？？

```
 if(isset($_POST['btnSubmit']))
{   
    $book_save = $_POST['book_title'];
    $author_save = $_POST['author_name'];
    $gender_save = $_POST['gender'];

    mysql_query("UPDATE bookss SET book_title ='$book_save',author_name ='$author_save',gender='$gender_save' WHERE ID = '$id'")
                or die(mysql_error()); 
```

我在 SO 中引用了 2 个链接，但我没有正确使用单选按钮 .... 建议总是受欢迎的 ...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T19:22:20.907

我同意以上所有人的观点，您是否对单选按钮值进行了硬编码？如果是这样，我不确定 SQL 注入将如何影响单选按钮条目。无论如何，如果你坚持这种结构，我至少会做这样的事情： `$book_save = mysql_real_escape_string($_POST['book_title']);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T19:06:53.150

你在做什么是正确的。不过，我建议您转义您的数据。您对 sql 注入持开放态度。我也会考虑使用[PDO](http://php.net/manual/en/book.pdo.php)，因为不推荐使用 mysql 函数。

# ruby - 红宝石定义？检查定义的属性时返回 nil？

> ID：14405820
> 
> 赞同：0
> 
> 时间：2013-01-18T19:04:43.487
> 
> 标签：ruby

我有一个类 Deal < ActiveResource，它有一个从资源绑定的属性选项。我确认 options 在 rails 控制台中返回一个数组。但是，defined?(options) 返回 nil。虽然我注意到 defined?(:options) 返回 true，但我仍然不明白为什么在前面的示例中返回 nil。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T19:14:13.393

我怀疑这`defined?(options)`是调用 options 方法并将结果传递给`defined?`. `defined?(:options)`是你可能想要的。提供代码片段可能有助于更准确地回答。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T19:07:55.990

据我所知，ActiveResource 使用该`method_missing`方法发挥了它的作用。所以实际上你不应该期望`options`定义方法。您可以查看[实现](https://github.com/rails/rails/blob/c2193c11ad215d3a2d7d35960630b3e1902a5082/activeresource/lib/active_resource/base.rb#L1456)以了解其工作原理。

# java - 如何在java中进行替换打印？

> ID：14405830
> 
> 赞同：-1
> 
> 时间：2013-01-18T19:05:33.260
> 
> 标签：java

> **可能重复：**
> [Java 输出格式](https://stackoverflow.com/questions/4417856/java-output-formatting)

有没有办法在 Java 中进行替换打印，就像在 c++ 中一样，其中 ("Number %d", 5) 用于打印“Number 5”。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T19:06:13.993

是的，使用`System.out.printf`. 与 C 版本有一些细微差别。

*   [Javadoc](http://docs.oracle.com/javase/6/docs/api/java/io/PrintStream.html#printf%28java.lang.String,%20java.lang.Object...%29)
*   [格式说明符](http://docs.oracle.com/javase/6/docs/api/java/util/Formatter.html#syntax)

你的例子字面意思是：

```
System.out.printf("Number %d", 5); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T19:07:07.097

让您的字符串包含`%s`，然后使用该`String.format`方法。每个参数将按照字符串中出现的顺序被替换。

例子：

```
String base = "This %s a %s";
String yourString = String.format(base, "is", "String"); 
```

在`yourString`出现`%s`时首先被“is”替换，然后被“String”替换。结果是`This is a String`；

*编辑：*正如 MouseEvent 正确指出的那样，您的问题与数字有关。对于数字，`%d`在您的字符串 insterad 和数字参数中使用：

```
String base = "This %d a seven";
String yourString = String.format(base, 7); 
```

# java - Java 线程完成事件

> ID：14405835
> 
> 赞同：2
> 
> 时间：2013-01-18T19:05:56.037
> 
> 标签：java, multithreading

我正在制作一个 Swing 应用程序，并且我有一个`Runnable`运行线程的类，并且该线程发出一个 HTTP 请求，知道线程何时完成的最佳方法是什么？

```
private void loginMouseClicked(java.awt.event.MouseEvent evt) {
    login.setEnabled(false);
    loading.setVisible(true);

    DoLogin log = new DoLogin(user.getText(), pass.getPassword().toString());
    Thread t = new Thread(log);
    t.start();

    loading.setVisible(false);
    login.setEnabled(true);
} 
```

我想将该方法的最后两行移到另一个在线程完成时触发的方法。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T19:12:46.160

使用[SwingWorker](http://docs.oracle.com/javase/6/docs/api/javax/swing/SwingWorker.html)。在`doInBackground()`方法中进行登录，并将其他两行代码放入`done()`方法中。

这样做很重要，而不是简单地将要执行的附加操作添加到登录线程的末尾，或者为它们生成另一个线程，因为它们会更新您的 UI，因此您希望在 Swing UI 上执行它们线。`SwingWorker`的`done()`方法将在 Swing UI 线程上调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T19:09:48.520

您将一个任务 - 一个可运行的实现传递给要处理的线程。线程在处理此任务时完成。

您可以将回调侦听器传递给您的任务，它将在任务完成之前通知。

在 Do login 的构造函数中传递以下接口的实现

```
interface ICompletionListener {
void onCompletion();
} 
```

在可运行的实现中调用该对象的 onCompletion；并在此接口的实现中执行代码的最后两行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T19:11:01.440

您`DoLogin` `Runnable`可以实现一个侦听器，该侦听器将在该过程完成时执行。

有关如何创建自己的侦听器的更多详细信息，请参阅[此答案。](https://stackoverflow.com/questions/14243657/is-it-possible-to-write-your-own-objects-that-give-out-actionevents/14244393#14244393)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-18T19:12:09.830

好吧，以这种方式将您的包装`DoLogin`成新`Runnable`的：

```
Runnable r = new Runnable() {
    public void run() {
          DoLogin log = new DoLogin(user.getText(), pass.getPassword().toString());
          log.run();

          // placing here finishing stuff
          loading.setVisible(false);
          login.setEnabled(true);
    }
}
Thread t = new Thread(r);
t.start(); 
```

# c++ - 寿命延长和条件运算符

> ID：14405837
> 
> 赞同：20
> 
> 时间：2013-01-18T19:06:00.800
> 
> 标签：c++, c++11, rvalue-reference, object-lifetime, temporary-objects

local lvalue references-to-const 和 rvalue references 可以延长临时对象的生命周期：

```
const std::string& a = std::string("hello");
std::string&& b = std::string("world"); 
```

当初始化器不是一个简单的表达式而是使用条件运算符时，这是否也有效？

```
std::string&& c = condition ? std::string("hello") : std::string("world"); 
```

如果其中一个结果是临时对象，而另一个不是呢？

```
std::string d = "hello";
const std::string& e = condition ? d : std::string("world"); 
```

当条件为假时，C++ 是否要求延长临时的生命周期？

在回答[这个](https://stackoverflow.com/q/14404904/252000)关于不可复制对象的问题时出现了这个问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-18T19:26:46.440

这两个都很好。

§5.16 说（特别删节）：

> 2 如果第二个或第三个操作数的类型为 void

没有。

> 3 否则，如果第二个和第三个操作数有不同的类型

没有。

> 4 如果第二个和第三个操作数是相同值类别的glvalues

没有。（在第一个中，两个都是纯右值，在第二个中是一个左值，一个是纯右值。）

> 5 否则，结果为纯右值

好的，所以这两个结果都是纯右值。所以绑定很好，但是绑定到什么？

> 6 左值到右值 (4.1)、数组到指针 (4.2) 和函数到指针 (4.3) 标准转换在第二个和第三个操作数上执行。

好的，如果它们还不是，那么它们现在都是右值。

> 6（续） 在这些转换之后，应满足以下条件之一：
> 
> 第二个和第三个操作数的类型相同；结果就是那种类型。如果操作数具有类类型，则结果是结果类型的临时纯右值，根据第一个操作数的值从第二个操作数或第三个操作数复制初始化。

好的，所以它是`std::string(first_operand)`or `std::string(second_operand)`。

无论如何，条件表达式的结果是一个新的临时纯右值，它是通过绑定到您的引用而扩展的值。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-18T19:16:41.757

```
std::string d = "hello";
const std::string& e = condition ? d : std::string("world"); 
```

> 当条件为假时，C++ 是否要求延长临时的生命周期？

这将是。条件是一个右值表达式，当与`const`引用绑定时，编译器将创建一个未命名的对象并将引用绑定到它。我不能 100% 确定的是，延长寿命的临时对象`std::string("world")`是否是（在概念上）制作（并被删除）的副本。

# javascript - 在 Web 浏览器控制应用程序中从 C++ 取消脚本脚本执行

> ID：14405839
> 
> 赞同：1
> 
> 时间：2013-01-18T19:06:07.147
> 
> 标签：javascript, browser

我正在设计一个托管 IE 的 Web 浏览器控件的应用程序。它将在网页中运行大量 javascript。写得不好的 javascript 可以很容易地挂起整个应用程序。假设我可以检测到脚本引起的挂起。我可以调用任何 C++ COM 方法来取消脚本执行吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T19:10:17.753

我不相信你可以从应用程序（c++）中停止 JavaScript（在浏览器中运行），很确定你只能用 JavaScript 停止 JavaScript 的执行。此外，当 JavaScript 挂起或导致浏览器无响应时，不会触发任何事件，因此检测这将非常困难。

# ruby-on-rails - 自动保存在关联的数据表中

> ID：14405840
> 
> 赞同：0
> 
> 时间：2013-01-18T19:06:10.753
> 
> 标签：ruby-on-rails

> **可能重复：**
> [在 Rails 中设置默认值的正确方法](https://stackoverflow.com/questions/1186400/correct-way-to-set-default-values-in-rails)

我有两个数据表：

1) 用户

2）个人资料（具有字段user_id）

它们通过以下方式关联：

*   用户 has_one 个人资料
*   个人资料 belongs_to 用户

每次创建新用户时，是否可以在配置文件表中保存一些默认值？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T19:10:15.277

您可以使用 ActiveRecord[回调](http://api.rubyonrails.org/classes/ActiveRecord/Callbacks.html)创建默认配置文件。

只需创建一个方法，并将其用作 :after_create

```
class User < ActiveRecord::Base

  has_one :profile

  after_create :create_default_profile

  def create_default_profile
    profile = build_profile
    # set parameters
    profile.save
  end

end 
```

build_profile 构建并链接 Profile 的实例，但不保存它。create_profile 相同，但它也保存对象。有关完整说明，请参阅[ActiveRecord 文档](http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html#method-i-belongs_to)。

您可以将属性添加到 build_ 和 create_profile 作为哈希，因此您可能可以将 create_default_profile 减少到一行：

```
def create_default_profile
  profile = create_profile :some => 'attirbute', :to => 'set'
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T19:11:19.147

是的，您可以为配置文件添加默认值。

我正在为用户设置一些配置文件的值`member_standing`和`points`属性。

在为用户控制器创建操作

```
def create
  @user = User.new(params[:user])
  profile = @user.profiles.build(:member_standing => "satisfactory", :points => 0)
  if @user.save
    redirect_to @user
  else
    render "new"
  end
end 
```

# php - require_once "../../file/config.php" 是在现代标准（2013）中隐藏我的配置文件的最安全方法吗？

> ID：14405846
> 
> 赞同：1
> 
> 时间：2013-01-18T19:06:24.970
> 
> 标签：php, mysql, security

那里有很多信息，我正试图将所有这些因素考虑到 php 中的单页 Web 应用程序中。不试图进入辩论，只是在现代网站中寻找标准，或者如果意见分歧，只是这个和其他选项带来的一些风险。

此外，我的数据库连接位于域根目录中的 connect.php 文件中，并且还考虑移回一个级别。

```
<?php require_once "../../folder/config.php";
session_start();
ob_start();
$access = 'my_value'; 
// ...
if($connectDatabase == TRUE) {
  $action=TRUE;
  include('connect.php');
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T19:15:30.347

只要所有`*.php`文件都通过 PHP 解释器提供，那么它们的内容 [介于`<?php`和`?>`] 就与您的应用程序一样安全。旧的命名风格包括类似`dbinfo.inc`导致的问题，因为`*.inc`如果您知道扩展名，文件只是作为文本提供。对于目录列表中的逻辑分组，我更喜欢 inc.dbinfo.php、class.mysql_db.php、view.news.php 等，但只要它们以`.php`.

一旦有人能够执行代码注入，或者在您的服务器上/从您的服务器上放置/检索原始文件，那么您的数据库信息存储在 Web 根目录之上多少层都无关紧要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T19:09:25.900

它应该是安全的，但我建议禁止在您的网站上建立索引。这将不允许人们去那个目录查看 php 文件，如果他们尝试去 connect.php 他们将看不到任何东西

[http://www.ducea.com/2006/06/26/apache-tips-tricks-disable-directory-indexes/](http://www.ducea.com/2006/06/26/apache-tips-tricks-disable-directory-indexes/)

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-01-18T19:13:38.847

将配置文件移到公用文件夹之外，使其无法通过 URL 访问。或者，使用 .htaccess 文件来保护包含文件夹

```
deny from all 
```

或者

```
<Files config.php>
    Order Deny
    Deny From All
</Files> 
```

# dialog - 何时使用“setBlockOnOpen”，它究竟做了什么？

> ID：14405860
> 
> 赞同：2
> 
> 时间：2013-01-18T19:07:04.727
> 
> 标签：dialog, jface

我的应用程序有一个从 OTB 应用程序打开的基本对话框。然后我有 4 个对话框，可通过单击基本对话框中的按钮打开。

我正在尝试决定是否需要使用 setBlockOnOpen，但我并不是 100% 完全符合它的功能。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T19:18:50.167

`setBlockOnOpen(true)`应该在方法之后停止处理`open()`并等到Dialog关闭才能继续处理。

`setBlockOnOpen(false)`允许您的代码在该方法之后继续处理`open()`。

# android - FontRenderer 缓存已用尽

> ID：14405864
> 
> 赞同：1
> 
> 时间：2013-01-18T19:07:16.660
> 
> 标签：android, android-widget

我正在尝试确定我们的应用程序中 UI 间歇性滞后的原因，并且已经完成了[Romain Guy](http://www.curious-creature.org/2012/12/01/android-performance-case-study/)概述的各个步骤。我已将其范围缩小到调用`android.view.GLES20Canvas.drawDisplayList`及其对应`android.view.GLES20Canvas.nDrawDisplayList`的内容，这告诉我这与我的观点有关。我知道我有很多视图 (213) 并且我正在努力减少它，但是当我分析 GPU 渲染时，我在缓存部分注意到 FontRenderer 的内存使用量最大，而其他内存消耗量适中。这个缓存究竟负责什么，它是否已满会导致一些间歇性滞后？我在下面包含了该部分。我也不应该认为这个问题在 Nexus 10 上变得更加明显。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T20:04:25.227

字体缓存被最大化是完全正常的。这不会是您减速的原因。

# ruby-on-rails - Rails 通过捆绑程序加载我的 gem 时获取 Gemfile 的路径

> ID：14405877
> 
> 赞同：1
> 
> 时间：2013-01-18T19:08:12.833
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, gem

我已经构建了一个带有开发依赖项、生成器和供我个人使用的东西的小 Rails 开发工具包。我希望能够在加载 gem 时配置一些东西。对于像 pry-rails 这样的 gem，初始化器执行得太晚了。

所以在项目根目录中使用配置文件会很酷。虽然 Rails 是在我的 gem 加载时定义的，但 Rails.root 返回 nil。如何获得项目根目录？它可以是骇人听闻的东西，它只适用于某些人。

这是我的“初始化程序”，在绝对解决一个项目的配置时效果很好：

```
class MyDevkit < MonkeyDevkit
  # =======
  # = Pry =
  # =======
  # disable pry components completely
  #disable :pry

  # do not make pry rails default console
  #disable :pry, :console

  # ========
  # = Mail =
  # ========
  # disable mail components completely
  #disable :mail

  # disable letter opener
  #disable :mail, :letter_opener

  # ========
  # = Misc =
  # ========
  #disable :rack_profiler
  #disable :better_errors
  #disable :quiet_assets

  # comment to (temporary) disable the devkit completely
  kitify!
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T20:40:34.560

can you try using `Dir.getwd` to get current working directory (note: current working dir does not mean your gem's directory. it is a directory that ruby executable was called from), which should be same what you would get from Rails.root (unless some gem changes working dir)

# c# - 从 2 个不同的字典构建 Json 字符串？

> ID：14405883
> 
> 赞同：2
> 
> 时间：2013-01-18T19:08:35.987
> 
> 标签：c#, .net, asp.net-web-api, json.net

我正在使用 json.net(newtonsoft)，我想构建一个 json 请求，但我有 2 个不同的字典，不知道如何加入它们。

```
 Dictionary<string, HttpStatusCode> code = new Dictionary<string, HttpStatusCode>();
   code.Add("Message", statusCode);

Dictionary<string, IErrorInfo> modelState = new Dictionary<string, IErrorInfo>();
// some code to add to this modelState 
```

**编辑**

IErrorInfo 只是有一些属性

```
public interface IErrorInfo
    {
        SeverityType SeverityType { get; set; }
        ValidationType ValidationType { get; set; }
        string Msg { get; set; }
    } 
```

我试图去的结果是这样的

```
{
  "Message": 400, // want this to be text but not sure how to do that yet (see below)
  "DbError":{
        "SeverityType":3,
        "ValidationType":2,
        "Msg":"A database error has occurred please try again."
        }
} 
```

我基本上是在努力实现[这一](http://www.asp.net/web-api/overview/web-api-routing-and-actions/exception-handling)目标。

```
HttpError and Model Validation

For model validation, you can pass the model state to CreateErrorResponse, to include the validation errors in the response:

public HttpResponseMessage PostProduct(Product item)
{
    if (!ModelState.IsValid)
    {
        return Request.CreateErrorResponse(HttpStatusCode.BadRequest, ModelState);
    }

    // Implementation not shown...
}

This example might return the following response:

HTTP/1.1 400 Bad Request
Content-Type: application/json; charset=utf-8
Content-Length: 320

{
  "Message": "The request is invalid.",
  "ModelState": {
    "item": [
      "Required property 'Name' not found in JSON. Path '', line 1, position 14."
    ],
    "item.Name": [
      "The Name field is required."
    ],
    "item.Price": [
      "The field Price must be between 0 and 999."
    ]
  }
} 
```

我不使用这个内置方法的原因是因为我有一个单独的内置类库，其中包含我所有的业务逻辑。我想保留它，使其不依赖于 web 内容或 mvc 内容（如 modelState）。

这就是为什么我创建了自己的模型状态，其中包含一些额外的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T20:05:06.480

您应该能够只使用一个字典并将两个字典中的项目添加到此字典中。Json.NET 应该像你期望的那样序列化它。

# css - CSS边框半径出血与深色

> ID：14405885
> 
> 赞同：3
> 
> 时间：2013-01-18T19:08:44.060
> 
> 标签：css

我有一个包含框，`border-radius`然后我在容器中有一个元素，它也有一个`border-radius`集合，它与框的边缘对接。

包含框在内框的边缘周围“流血”：

![在此处输入图像描述](../Images/8a489382a2e0b908d4ba9e0cf62b5c11.png)

你可以在这里看到它的作用：http: [//jsfiddle.net/Shpigford/RUAMx/](http://jsfiddle.net/Shpigford/RUAMx/)

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-18T19:16:03.963

为容器边框设置更大的半径很容易：

```
div {
    background:white;
    border-radius: 5px 8px 8px 5px;
} 
```

见这里[http://jsfiddle.net/RUAMx/2/](http://jsfiddle.net/RUAMx/2/)

此外，您不必再使用 -webkit 和 -moz 前缀，对border-radius 的支持已经[足够好了](http://caniuse.com/#feat=border-radius)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T19:16:34.560

解决方案之一只是稍微移动锚标记，就像这样[http://jsfiddle.net/RUAMx/3/](http://jsfiddle.net/RUAMx/3/)

```
a {
    color:white;
    float:right;
    display:block;
    background:#201f23;
    padding:10px 20px;
    -webkit-border-top-right-radius: 5px;
    -webkit-border-bottom-right-radius: 5px;
    -moz-border-radius-topright: 5px;
    -moz-border-radius-bottomright: 5px;
    border-top-right-radius: 5px;
    border-bottom-right-radius: 5px;
    margin-right: -5px;
} 
```

并在锚点上补偿这个 -5px 使用 5px 到 div 容器

```
div {
    background:white;
    -webkit-border-radius: 5px;
    -moz-border-radius: 5px;
    border-radius: 5px;
    margin-right: 5px;
} 
```

# ajax - ElasticSearch 没有失败但返回不正确的结果

> ID：14405886
> 
> 赞同：0
> 
> 时间：2013-01-18T19:08:44.550
> 
> 标签：ajax, elasticsearch, amplifyjs

我在我的应用程序中使用 ajax 切换到 POST 搜索，这样我就可以开始使用日期范围了。但是，似乎无论我发布什么，它都会在我的索引中返回前 10 个结果。真实结果在 30k 范围内。

```
 amplify.request.define("searchPostRequest", "ajax", {
        url: "http://leServer:9200/people/person/_search",
        type: "POST",
        dataType: 'jsonp',
        contentType: 'application/json'
    });
    self.advancedSearchPostQuery = {
        query: {
           term: {
               locationNumber:479
            }
        }
    };
    console.log(self.advancedSearchPostQuery);
    amplify.request({
        resourceId: "searchPostRequest",
        data: JSON.stringify(self.advancedSearchPostQuery),
        success: function (data) {
            console.log(data.hits.hits.length);
        }
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T00:37:31.807

如果这是您的实际代码，那么您的问题可能只是您 `advancedSearchPostQuery`的 JSON 无效。

您需要应用引号：

```
advancedSearchPostQuery = {
    "query": {
        "term": {
            "locationNumber": 479
        }
    }
} 
```

而且我不确定您是否需要`stringify`该对象，但我不熟悉 amplifyJS，所以如果 amplifyjs 需要一个对象或一个字符串，请仔细检查一下。

如果这无助于检查从命令行通过 curl 运行时查询是否返回正确的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T13:28:32.450

在进行更多调试后，我发现该请求是作为 GET 发送的，即使我已明确将其设置为发布。将数据类型从 jsonp 移动到 json，让请求作为 POST 发送，从而解决了问题。但是，这会在 IE 中导致一个问题，即由于请求被发送到另一个域，因此根本没有发送请求。

```
 amplify.request.define("searchPostRequest", "ajax", {
        url: "http://leServer:9200/people/person/_search",
        type: "POST",
        dataType: 'json',
        contentType: 'application/json'
    }); 
```

# java - static { // some code } 是什么意思？

> ID：14405890
> 
> 赞同：2
> 
> 时间：2013-01-18T19:08:54.363
> 
> 标签：java

> **可能重复：**
> [静态初始化块](https://stackoverflow.com/questions/2420389/static-initialization-blocks)

以下在java中是什么意思？

```
static {                                        
  WritableComparator.define(IntPair.class, new Comparator());
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-18T19:09:19.920

这意味着将在类加载时执行的[静态初始化块。](http://docs.oracle.com/javase/tutorial/java/javaOO/initial.html)

> 如果初始化需要一些逻辑（例如，错误处理或填充复杂数组的 for 循环），简单的赋值是不够的。实例变量可以在构造函数中初始化，其中可以使用错误处理或其他逻辑。为了为类变量提供相同的功能，Java 编程语言包括静态初始化块。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T19:11:27.750

这意味着该块中的代码将在加载类型时运行一次，在调用任何构造函数之前，但在运行任何字段初始化程序之后。

请注意，您不能在静态块中设置任何实例字段。`this`就像在任何其他静态方法中一样，那里没有概念。

# python - 生成正确的 excel xls 格式

> ID：14405891
> 
> 赞同：3
> 
> 时间：2013-01-18T19:08:54.327
> 
> 标签：python, windows, excel, ms-office, xls

我在 python 中创建了一个小脚本来生成一个与 excel 兼容的 xml 文件（以 xls 扩展名保存）。该文件是从零件数据库生成的，因此我可以使用提取的数据下订单。

在订购零件的网站上，您可以导入 excel 文件，以便自动填写订单。这里的问题是，每次我想下订单时，我都必须打开 excel 并使用类型为 MS Excel 97-2003 的 xls 扩展名保存文件才能使导入工作。excel 文档看起来完全一样，但是当用记事本打开时，我们看不到 xml，只有二进制转储。

有没有办法通过运行 bat 文件或在我的 python 脚本中添加一些行以便将其转换为正确的格式来自动化这个过程？

（我知道以前有人问过这个问题，但从来没有回答过）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-18T21:14:12.097

对此有两种基本方法。

您询问了第一个问题：自动化 Excel 以打开和保存文件。实际上有两种方法可以做到*这一点*。第二种是使用 Python 工具，无需 Excel 的帮助就可以直接在 Python 中创建文件。所以：

## 1a：通过其自动化界面自动化 Excel。

Excel 旨在通过 COM 自动化由外部应用程序控制。Python 在[`pywin32`](http://sourceforge.net/projects/pywin32/). 不幸的是，`pywin32`关于 Excel 的 COM 自动化接口的所有文档都是为 JScript、VB、.NET 或 C 中的原始 COM 编写的。幸运的是，该站点上有许多关于使用`win32com`to驱动 Excel，比如[这个](https://stackoverflow.com/questions/5305297/excel-win32com-programming-with-python-passing-parameters-to-function)，所以你可能可以自己弄清楚。它看起来像这样：

```
import win32com.client
excel = win32com.client.Dispatch('Excel.Application')
spreadsheet = excel.Workbooks.Open('C:/path/to/spreadsheet.xml')
spreadsheet.SaveAs('C:/path/to/spreadsheet.xls', fileformat=excel.xlExcel8) 
```

这没有以任何方式进行测试，因为我手边没有带有 Excel 的 Windows 框。而且我隐约记得从 win32com 访问文件格式名称时遇到问题，只是在查找和查找等效数字时遇到了问题（“fileformat xlExcel8”的​​快速谷歌显示等效数字为 56，并确认这是 97-2003 的正确格式二进制文件）。

当然，如果你不需要在 Python 中做，MSDN 中充满了 JScript、VBA 等方面的优秀示例。

您需要的文档都在[MSDN](http://msdn.microsoft.com)上（因为[Excel 的 Office Developer Network](http://msdn.microsoft.com/en-US/office/understanding/excel/)已合并到 MSDN，然后显然变成了 404 页面）。Excel 的顶级页面是[Welcome to the Excel 2013 developer reference](http://msdn.microsoft.com/en-us/library/office/ee861528.aspx)（如果您想要不同的版本，请单击上面导航中的“Office 客户端开发”并选择不同的版本），您最关心的是[对象模型参考](http://msdn.microsoft.com/en-us/library/office/ff194068.aspx)。您还可以在 Excel 的内置帮助中找到相同的文档（通常链接到完全相同的网页）。例如，你会发现[`Application`](http://msdn.microsoft.com/en-us/library/office/ff198091.aspx)对象有一个`Workbooks`属性，它是一个[`Workbooks`](http://msdn.microsoft.com/en-us/library/office/ff820765.aspx)对象，它有`Open`和`Add`方法返回一个[`Workbook`](http://msdn.microsoft.com/en-us/library/office/ff835568.aspx)对象，它有一个`SaveAs`方法，该方法接受一个可选`FileFormat`参数 type [`XlFileFormat`](http://msdn.microsoft.com/en-us/library/office/ff198017.aspx)，其值为`xlExcel8`= `56`。

`xlExcel8`正如我之前暗示的那样，由于某种我不再记得的原因，您可能无法访问枚举值，但您可以在 MSDN 上查找该值（或只是谷歌它）并输入数字 56。

其他文档（此处和 MSDN 中的其他地方）通常要么是您自己猜到的东西，要么是与`win32com`. 不幸的是，已经很稀少的`win32com`文档希望您已经阅读过该文档——但幸运的是，这些示例足以让您在除了对象模型之外的几乎所有内容中一头雾水。

## 1b：通过其 GUI 自动化 Excel。

在 Windows 上自动化 GUI 是一个巨大的痛苦，但有许多工具可以让它变得更容易，例如[`pywinauto`](http://code.google.com/p/pywinauto/). 您也许可以只使用为您[`swapy`](http://code.google.com/p/swapy/)编写`pywinauto`脚本。

如果您不需要在 Python 中执行此操作，那么单独的脚本系统（如[`AutoIt`](http://www.autoitscript.com/site/autoit/)拥有更大的用户群和更多示例）可以让您的生活更轻松。

## 2：全部用 Python 完成。

`xlutils`，[python-excel](http://www.python-excel.org)的一部分，也许可以做你想做的事，根本不用接触 Excel。

# r - 从 4 列中创建 2 列

> ID：14405892
> 
> 赞同：0
> 
> 时间：2013-01-18T19:08:54.783
> 
> 标签：r, dataframe

假设我有一个如下所示的 data.frame：

```
structure(list(HUGO.Int1 = c("AATF", "AATF", "AATF", "ABHD16A", 
"ABHD16A", "ABHD16A"), Mut.Int1 = c(0, 0, 0, 0, 0, 0), HUGO.Int2 = c("DAPK3", 
"PAWR", "CHEK1", "RNF5", "ATP5G3", "HM13"), Mut.Int2 = c(0, 0, 
0, 0, 0, 0)), .Names = c("HUGO.Int1", "Mut.Int1", "HUGO.Int2", 
"Mut.Int2"), row.names = c(12223L, 15033L, 31655L, 11280L, 11463L, 
14106L), class = "data.frame") 
```

我想要`HUGO.Int2`并且`Mut.Int2`在*下面* `HUGO.Int1`并且`Mut.Int1`

我试过了

```
data.frame(rbind(c(plots$HUGO.Int1, plots$Mut.Int1), 
           c(plots$HUGO.Int2, plots$Mut.Int2))) 
```

但后来我只得到 2 列，`Hugo.int1`并且`Mut.int1`. 我想知道如何正确地将第 3 列和第 4 列粘贴到第 1 列和第 2 列下方。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T19:17:33.600

问题是你卡`rbind`在那里，有点随意。这就是您的尝试可能应该看起来的样子：

```
dat <- structure(list(HUGO.Int1 = c("AATF", "AATF", "AATF", "ABHD16A", 
+ "ABHD16A", "ABHD16A"), Mut.Int1 = c(0, 0, 0, 0, 0, 0), HUGO.Int2 = c("DAPK3", 
+ "PAWR", "CHEK1", "RNF5", "ATP5G3", "HM13"), Mut.Int2 = c(0, 0, 
+ 0, 0, 0, 0)), .Names = c("HUGO.Int1", "Mut.Int1", "HUGO.Int2", 
+ "Mut.Int2"), row.names = c(12223L, 15033L, 31655L, 11280L, 11463L, 
+ 14106L), class = "data.frame")
> data.frame(col1 = c(dat[,1],dat[,3]),col2 = c(dat[,2],dat[,4]))
      col1 col2
1     AATF    0
2     AATF    0
3     AATF    0
4  ABHD16A    0
5  ABHD16A    0
6  ABHD16A    0
7    DAPK3    0
8     PAWR    0
9    CHEK1    0
10    RNF5    0
11  ATP5G3    0
12    HM13    0 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T19:27:56.383

其他方式：

```
names(x) <- chartr('12', 'XX', names(x)) # replaces 1s and 2s in names with 'X'
rbind(x[1:2], x[3:4]) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-18T19:16:37.100

不确定这是否是您想要的，但它有效：

```
data1 <- structure(list(HUGO.Int1 = c("AATF", "AATF", "AATF", "ABHD16A", 
"ABHD16A", "ABHD16A"), Mut.Int1 = c(0, 0, 0, 0, 0, 0), HUGO.Int2 = c("DAPK3", 
"PAWR", "CHEK1", "RNF5", "ATP5G3", "HM13"), Mut.Int2 = c(0, 0, 
0, 0, 0, 0)), .Names = c("HUGO.Int1", "Mut.Int1", "HUGO.Int2", 
"Mut.Int2"), row.names = c(12223L, 15033L, 31655L, 11280L, 11463L, 
14106L), class = "data.frame")

data2 <- cbind(data1$HUGO.Int2, data1$Mut.Int2)
data1$HUGO.Int2 <- NULL
data1$Mut.Int2 <- NULL
colnames(data2) <- colnames(data1)
data3 <- rbind(data1,data2)

> data3 
      HUGO.Int1 Mut.Int1
12223      AATF        0
15033      AATF        0
31655      AATF        0
11280   ABHD16A        0
11463   ABHD16A        0
14106   ABHD16A        0
7         DAPK3        0
8          PAWR        0
9         CHEK1        0
10         RNF5        0
11       ATP5G3        0
12         HM13        0 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-18T19:21:27.457

```
df <- structure(list(HUGO.Int1 = c("AATF", "AATF", "AATF", "ABHD16A", 
"ABHD16A", "ABHD16A"), Mut.Int1 = c(0, 0, 0, 0, 0, 0), HUGO.Int2 = c("DAPK3", 
"PAWR", "CHEK1", "RNF5", "ATP5G3", "HM13"), Mut.Int2 = c(0, 0, 
0, 0, 0, 0)), .Names = c("HUGO.Int1", "Mut.Int1", "HUGO.Int2", 
"Mut.Int2"), row.names = c(12223L, 15033L, 31655L, 11280L, 11463L, 
14106L), class = "data.frame")

df2 <- df[,1:2]
df2[7:12,1:2] <- df[,3:4] 
```

# iphone - 导航堆栈中左右动画的CATransition？

> ID：14405896
> 
> 赞同：0
> 
> 时间：2013-01-18T19:09:31.120
> 
> 标签：iphone, objective-c, core-animation

我需要调用两个不同的 CATransitionFromRight 函数之一（我已创建），一个执行 kCATransitionFromRight，另一个执行 kCATransitionFromLeft，是的，完成后我将组合该函数。

但是，我的导航堆栈中有一个视图，深度为 1 个视图。根据您是从堆栈上方还是下方的视图进入或离开视图，我需要使用左侧或右侧。

```
First view => problem view, transition left.
Problem view => first view, transition right.

Problem view => third view, transition left.
Third view <= problem view, transition right. 
```

我目前调用 viewWillAppear 中的函数。

但是，我不知道如何告诉函数使用哪个方向。

我知道我可以使用应用程序委托变量、单例或 nsuserdefault 设置，我只是想知道是否有一种我没有考虑过的方法更合适？

我知道我可以在后退按钮等中调用该函数，但是 viewWillAppear 中的调用会覆盖它。

```
+ (void)transitionFromRight:(UIViewController*)view {

    CATransition *navTransition = [CATransition animation];
    navTransition.duration = 0.65;
    navTransition.timingFunction = [CAMediaTimingFunction 
          functionWithName:kCAMediaTimingFunctionEaseInEaseOut];
    [navTransition setType:kCATransitionReveal];
    [navTransition setSubtype:kCATransitionFromRight];
    [view.navigationController.navigationBar.layer 
          addAnimation:navTransition forKey:nil];

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T21:44:59.413

我假设您使用的是`UINavigationController`.

您建议的所有选项都不合适，因为它们都是全局数据访问点概念的变体，您不需要这样的东西。

这是一个更好的方法：

[`UINavigationControllerDelegate`](http://developer.apple.com/library/ios/#documentation/uikit/reference/UINavigationControllerDelegate_Protocol/Reference/Reference.html)为您创建一个`UINavigationController.`您将听到有关通过委托方法之一将新视图推送/弹出到导航堆栈的信息，例如`navigationController:willShowViewController:animated:`. 在适当的委托方法中，您可以在自定义 UIViewController 上设置一个属性，以便它知道在 viewWillAppear 等中使用哪个动画。

# ruby - 将 Rally 设置为 Jira 连接器时遇到问题

> ID：14405902
> 
> 赞同：1
> 
> 时间：2013-01-18T19:09:58.733
> 
> 标签：ruby, xml, methods, jira, rally

我正在使用 Jira/Rally 和 Ruby 连接器。我被派去测试连接器，并确保它能满足我们的一切需求。我必须承认，这不是我的专业领域，我无法在 Rally 网站上找到相关帮助，并且这里之前的主题与不同的问题相关。

我遇到的错误是：

```
[2013-01-18 15:21:38 Z] DEBUG : Finding method getIssuesFromJqlSearch
[2013-01-18 15:21:39 Z] ERROR : ConnectorRunner.rescue in run_services - Unexpected exception occurred
[2013-01-18 15:21:39 Z] ERROR : ConnectorRunner.exception - Message undefined method `key' for nil:NilClass
[2013-01-18 15:21:39 Z] ERROR : ConnectorRunner.exception - Stack Trace 
```

我连接到这两个服务都很好（在解决了一些有趣的代理问题之后），并且正在处理连接器附带的基本 jira_config.xml。我只更改了必填字段，即 UN/PW/URL/Project/Workspace

相关xml代码：

```
<RallyConnection>
        <Url>rally1.rallydev.com</Url>
        <WorkspaceName>CMSJiraIntegrationTestWorkspace</WorkspaceName>
        <Projects>
            <Project>Sample Project</Project>
        </Projects>
        <User>***************</User>
        <Password>encoded-T-i-F-j-b-2-x-l-M-j-A-=-</Password>
        <ArtifactType>Defect</ArtifactType>
        <ExternalIDField>JiraDefectKey</ExternalIDField>
        <CrosslinkUrlField>JiraLink</CrosslinkUrlField>
    </RallyConnection>
    <JiraConnection>
        <Url>http://10.34.10.175:8080</Url>
        <User>***************</User>
        <Password>encoded-a-m-F-t-Z-X-M-u-Y-m-V-p-b-n-M-=-</Password>
        <ArtifactType>Bug</ArtifactType>
        <Project>SP</Project>
        <ExternalIDField>RallyID</ExternalIDField>
        <CrosslinkUrlField>RallyURL</CrosslinkUrlField>
        <CopySelectors>
          <CopySelector>Status != Closed</CopySelector>
        </CopySelectors>
    </JiraConnection> 
```

有没有人知道为什么这会失败？

非常感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T12:09:51.480

你确定你启用了 JIRA 远程 API 吗？它似乎在寻找 SOAP 方法“getIssuesFromJqlSearch”之后就崩溃了。

您能否发布从连接器启动到崩溃时生成的完整日志文件？

# c# - 简单的程序不起作用

> ID：14405904
> 
> 赞同：1
> 
> 时间：2013-01-18T19:10:02.147
> 
> 标签：c#, .net, console-application

这是我第一次在 C# 和 ASP.NET 上工作，我正在阅读在 c# 2010 中开始 ASP.NET 4，但我从未使用过面向对象的编程。（我是网络管理员，所以我知道基本编程）。

尽管如此，我还是无法使用一个简单的程序

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
namespace ConsoleApplication2 {
    class Program {
        static void Main(string[] args) {
            int i;
            string[] nomi = new string[7];
            string[] cognomi = new string[7];
            for (i = 0; i = 6; i++) {
                Console.WriteLine("Inserisci il", i + 1, "° nome");
                nomi[i] = (Console.ReadLine);
            }

            for (i = 0; i = 6; i++) {

                Console.WriteLine("Inserisci il", i + 1, "° cognome");
                nomi[i] = (Console.ReadLine);
            }

            for (i = 0; i = 6; i++) {
                Console.WriteLine(nomi[i], " ", cognomi[i]);
            }
        }
    }
} 
```

* * *

问题不在于算法，而在于声明部分。我无法显示错误日志，因为我有意大利语的 VS。

我哪里错了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T19:13:06.110

没有错误消息很难提供帮助（也许您可以翻译它们，因为您显然知道两种语言）。

当然，您的`for`循环语法不正确。这：

```
for (i = 0; i = 6; i++) 
```

应该：

```
for (i = 0; i < 6; i++)  // Or <=, or whatever 
```

查看[MSDN 上的 for loop 文档](http://msdn.microsoft.com/en-us/library/ch45axte.aspx)。

另外`Console.ReadLine` [是一个方法，而不是一个属性](http://msdn.microsoft.com/en-us/library/system.console.readline.aspx)：

```
nomi[i] = Console.ReadLine(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T19:13:17.740

你的`for`循环不正确。他们应该是

```
for (int i = 0; i < 7; i++)
{
} 
```

或更好，

```
for (int i = 0; i < nomi.Length; i++)
{
} 
```

这就是说`i`应该从 开始`0`，继续循环，直到 if 的值`i`不再小于`7`（或 的值`nomi.Length`）并且`i`每个循环应该增加 1（`i++`）。

此外，与循环无关，它应该是`Console.ReadLine();`. 这`()`表明它是一种不带参数的方法，而没有参数，`nomi.Length`因为`()`它是 a `property`，而不是 a `method`。

您的数组也需要是静态的。

```
static string[] nomi = new string[7];
static string[] cognomi = new string[7]; 
```

`static`只是为了澄清一下，声明变量时并不总是需要使用。您在这里需要它的原因是您从静态方法 ( `static void Main(string[] args)`) 中调用它们。

编辑 - 正如评论中提到的，这假设变量在`Main`导致错误的方法之外被声明`An object reference is required for the nonstatic field, method, or property 'member'`。如果不是，那么这些变量不必是静态的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T19:13:10.923

你的 for 循环没有任何意义`for (i = 0; i = 6; i++)`

语法是`for (initialization, condition, iteration)`

现在你的条件是一个任务，所以它总是正确的。我想你希望它是`for (i = 0; i **<** 6; i++)`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-18T19:15:34.810

在编写 for 循环时，您应该始终在 for 循环的声明范围内创建一个 int 变量

例子：

```
for (int i = 0; i < 10; i++)
{
    body code goes here
} 
```

应该在循环范围内声明整数并消失。

希望有帮助

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-18T19:29:08.330

我更正了您的`for`and`Console.WriteLine`语法并使您的代码更具可读性。这应该可以指导你。

```
const int length = 7;
string[] nomi = new string[length];
string[] cognomi = new string[length];

for (int i = 0; i < length; i++)
{
    Console.WriteLine("Inserisci il {0} ° nome", i + 1);
    nomi[i] = (Console.ReadLine());
}

for (int i = 0; i < length; i++)
{
    Console.WriteLine("Inserisci il {0} ° cognome", i + 1);
    cognomi[i] = (Console.ReadLine());
}

for (int i = 0; i < length; i++)
{
    Console.WriteLine("nomi: {0} cogomi: {1}", nomi[i], cognomi[i]);
} 
```

# c++ - 在线程 C++ 中使用 system()

> ID：14405905
> 
> 赞同：1
> 
> 时间：2013-01-18T19:10:04.303
> 
> 标签：c++, system-calls

我想在 C++ 的（非主）线程（pthread）中使用方法 system()。例如，

```
system("/path/to/some/script.sh"); 
```

这是允许的吗？如果是这样，它是否安全，我应该采取什么预防措施？

我问的原因是我从代码审查员那里得到了以下评论：

“规则是 system() 只能从单线程进程中调用。我认为您需要将新代码移动到单独的应用程序中。”

评论的第一句话有效吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-18T19:29:32.077

在 GNU/Linux 实现中`system`，它会在命令执行期间修改*进程*信号掩码。在多线程程序中，我们会遇到令人讨厌的意外，例如，如果另一个线程`fork`同时存在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T19:34:45.173

出于各种不同的原因，我不会这样做，信号掩码的问题就是其中之一。

一般来说，`fork`线程是一个棘手的组合，需要小心处理。现有的库函数可能没有考虑到多线程程序。

# file-upload - Carrierwave 在 EC2 实例上使用 :fog 或 :s3 缓慢上传/保存

> ID：14405908
> 
> 赞同：2
> 
> 时间：2013-01-18T19:10:11.010
> 
> 标签：file-upload, amazon-s3, amazon-ec2, carrierwave

我关注了 Ryan Bates railscasts 并且在我使用的任何配置中所有上传都非常慢（：fog，：s3）。

我在 EC2 中型实例上并在同一区域使用 s3。根据日志，从 ec2 到 s3 的传输速度很快。但是，任何其他上传到实例的工作都以正常速度工作（我也上传 zip 文件用于其他目的）。

确实是在使用载波时才出现缓慢。如果我保存一个没有头像照片的用户，它也保存得很快。一旦我上传一张图片（40k 或 400k），保存/更新并生成 2 个较小版本的缩略图大约需要 6/7 秒。我还尝试删除拇指创建，同样的事情（6/7 秒）（Rails 3.1.10，mongoid 3.0，carrierwave 0.5.8，fog 1.3.1）

有什么线索可以在这里发生吗？感谢您的任何意见。

# php - 将具有特定值的数组元素移动到数组顶部

> ID：14405909
> 
> 赞同：4
> 
> 时间：2013-01-18T19:10:15.070
> 
> 标签：php

我有一个看起来与此类似的数组：

```
Array
(
  [0] => stdClass Object
    (
      [Leasing] => 12939.74
      [Name] => Jeremy
      [Rental] => 0
      [Sales] => 56603.13
      [Total] => 69542.87
    )
  [1] => stdClass Object
    (
      [Leasing] => 0
      [Name] => Shaun
      [Rental] => 0
      [Sales] => 58590
      [Total] => 58590
    )
  [2] => stdClass Object
    (
      [Leasing] => 0
      [Name] => Lindsay
      [Rental] => 0
      [Sales] => 22951.97
      [Total] => 22951.97
    )
  [3] => stdClass Object
    (
      [Leasing] => 0
      [Name] => Sally
      [Rental] => 1200
      [Sales] => 21624.9
      [Total] => 22824.9
    )
  [4] => stdClass Object
    (
      [Leasing] => 0
      [Name] => House
      [Rental] => 0
      [Sales] => 16235.81
      [Total] => 16235.81
    )
  [5] => stdClass Object
    (
      [Leasing] => 5298.85
      [Name] => Bill
      [Rental] => 1200
      [Sales] => 0
      [Total] => 6498.85
    )
) 
```

目前，该数组使用以下方式按总计排序：

```
usort($data, function ($a, $b) {
    return $b->Total - $a->Total;
}); 
```

现在，我需要能够始终将人`[Name] => House`放在阵列的顶部。我的想法是我可以将其排序`Total`（因为我仍然需要这种方式），然后将具有 House 值的元素放在数组的开头。我可以取一个特定的 KEY 并将其放在顶部，但 KEY 可能会根据谁的总数最高而改变。我怎样才能始终将命名的人放在`House`数组的顶部？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-18T19:25:27.380

这应该有效：

```
usort($data, function ($a, $b) {
    if ($a->Name != "House" && $b->Name == "House") {
        return 1;
    } elseif ($a->Name == "House" && $b->Name != "House") {
        return -1;
    } else {
        return $b->Total - $a->Total;
    }
}); 
```

来自[PHP：usort - 手册](http://php.net/manual/en/function.usort.php)：

> 如果认为第一个参数分别小于、等于或大于第二个参数，则比较函数必须返回小于、等于或大于零的整数。

在这种情况下，return`1`告诉排序函数`House`大于任何其他值，并且`-1`小于`House`任何其他值。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2020-01-26T23:18:00.390

您的要求：

1.  按`Name`列排序——将有值行置于`House`无值行之前`House`。
2.  按`Total`DESC 列排序。

从 PHP7 开始，宇宙飞船运算符 ( `<=>`) 通过评估规则数组（从左到右读取元素）使排序规则的脚本非常干净。

要首先对行进行排序`House`，请评估每个对象的`Name`字符串是否与 相同`House`。 `false`评估将被视为`0`，`true`评估将被视为`1`。`$b`通过在运算符左侧写入数据，实现降序排序。该`House`对象将是唯一评估为 的对象`true`，并且由于它是第一个排序条件，因此它将优先作为对象数组中的第一个对象。

对于不包含 的其他对象，将`House`评估第二个排序条件。通过在左侧写入`$b`' 的值并在右侧写入 ' 的值，再次使用降序排序 - 这将具有较高总计的对象放在具有较低总计的对象之前。`Total``$a``Total`

代码：（[演示](https://3v4l.org/D2uWq)）

```
usort($objects, function($a, $b) {
   return [$b->Name === 'House', $b->Total] <=> [$a->Name === 'House', $a->Total];
}); 
```

输出：

```
array (
  0 => 
  (object) array(
     'Leasing' => 0,
     'Name' => 'House',
     'Rental' => 0,
     'Sales' => 16235.81,
     'Total' => 16235.81,
  ),
  1 => 
  (object) array(
     'Leasing' => 12939.74,
     'Name' => 'Jeremy',
     'Rental' => 0,
     'Sales' => 56603.13,
     'Total' => 69542.87,
  ),
  2 => 
  (object) array(
     'Leasing' => 0,
     'Name' => 'Shaun',
     'Rental' => 0,
     'Sales' => 58590,
     'Total' => 58590,
  ),
  3 => 
  (object) array(
     'Leasing' => 0,
     'Name' => 'Lindsay',
     'Rental' => 0,
     'Sales' => 22951.97,
     'Total' => 22951.97,
  ),
  4 => 
  (object) array(
     'Leasing' => 0,
     'Name' => 'Sally',
     'Rental' => 1200,
     'Sales' => 21624.9,
     'Total' => 22824.9,
  ),
  5 => 
  (object) array(
     'Leasing' => 5298.85,
     'Name' => 'Bill',
     'Rental' => 1200,
     'Sales' => 0,
     'Total' => 6498.85,
  ),
) 
```

# css - 将 div 缩小到具有百分比高度的图像

> ID：14405911
> 
> 赞同：11
> 
> 时间：2013-01-18T19:10:15.523
> 
> 标签：css, image, containers, jsfiddle

我想让容器宽度缩小到图像的大小。高度以相对于浏览器窗口的百分比给出。

```
.img
{
    width: auto;
    height:100%;
}
.container
{
    height:100%;
    width:auto;
} 
```

这是小提琴：

[http://jsfiddle.net/EdgKr/68/](http://jsfiddle.net/EdgKr/68/)

`display:table`，就像在类似的情况下不起作用，因为作为表格单元格，图像始终显示其原始大小的 100%。

[http://jsfiddle.net/EdgKr/67/](http://jsfiddle.net/EdgKr/67/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-19T11:15:43.440

自从我提出这个问题后，我取得了一些进展，解决方案非常简单：只需添加 float:left。

```
* {
    -webkit-box-sizing: border-box;
    -moz-box-sizing: border-box;
    box-sizing: border-box;
}

html,
body {
    height:100%;
    width:100%;
}

.container {
    background: green;
    float: left;
    height: 100%;
}

.img {
    width:auto;
    height:100%;
} 
```

即使图像具有百分比高度，容器也会按预期缩小。 [http://jsfiddle.net/EdgKr/74/](http://jsfiddle.net/EdgKr/74/)

但它很容易被打破，例如，如果你添加填充。 [http://jsfiddle.net/EdgKr/72/](http://jsfiddle.net/EdgKr/72/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-20T18:15:37.103

我想我可以更好地解决这个问题。请检查我的代码：

```
<!DOCTYPE HTML>
<html>
    <head>
        <title>Knowledge is Power</title>
        <style type="text/css">
            * {
                -webkit-box-sizing: border-box; /* Android = 2.3, iOS = 4 */
                -moz-box-sizing: border-box; /* Firefox 1+ */
                box-sizing: border-box; /* Chrome, IE 8+, Opera, Safari 5.1 */
            }
            html, body
            {
                height:100%;
                width:100%;
                padding:10px;
            }
            .container {
                padding:0;
                background:green;
            }
            .img {
                display: inline;
                height:100%;
            }
        </style>
    </head>
    <body>
       <span class="container">  
            <img class="img" src="a.jpg"/>
        </span>
    </body>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T19:30:04.013

我知道（或此刻能想到的）使容器与其内容的大小匹配的唯一方法是通过`float`ing 它。如果这是一个选项，那可能会得到你想要的。（这是您更新的小提琴，已`float:left;`添加到`.vertainer` [http://jsfiddle.net/EdgKr/61/](http://jsfiddle.net/EdgKr/61/)）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-18T19:35:20.590

如果你只是想让容器匹配图像的高度和宽度，也就是收缩包装，有几个选项：

浮动：左/右，显示：内联块，显示：表格，位置：绝对；

如果没有指定宽度，每一个都会导致收缩包装效果。

我建议为此使用 inline-block。

此外，似乎 display:table 工作得很好：

[http://jsbin.com/isayar/1/edit](http://jsbin.com/isayar/1/edit)

但是 IE7 不支持它，所以我个人会使用 inline-block 代替。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-05-23T22:44:50.793

非常简单

添加`display: inline-block`到`.container`

它在你的小提琴上显示绿色的原因是显示块使它适合整个宽度

[http://jsfiddle.net/z7CT6/](http://jsfiddle.net/z7CT6/)

# c# - 使用 WebAPI，如何使用 CustomCreationConverter 为接口参数绑定返回 Castle DictionaryAdapter？

> ID：14405914
> 
> 赞同：1
> 
> 时间：2013-01-18T19:10:33.760
> 
> 标签：c#, json, wcf, asp.net-web-api, castle-dictionaryadapter

我正在使用 Json.NET 序列化程序使用 Microsoft WebAPI，并且正在尝试使用控制器参数绑定将 Castle DictionaryAdapter 实例化为 JSON 的反序列化对象。（这将允许我们检测某些属性是否在 JSON 中设置为 null，或者它们是否默认为 null，因为它们不在 JSON 中，而不必放弃内置的解析和绑定机制。）

但它不起作用，因为新对象在创建和传递给控制器​​之间消失了。

控制器使用接口参数声明：

```
 public interface IMessageModel
  {
      string Message { get; set; }
  }
.
.
.
  public HttpResponseMessage Patch(IMessageModel model) 
```

我希望反序列化器实例化一个实现 IMessageModel 的 Castle DictionaryAdapter。

为此，我创建了 CustomCreationConverter 的子类，该子类由 DictionaryAdapterFactory 构造并覆盖 Create() 方法以返回动态 Castle 对象：

```
 public class MessageModelConverter
      : CustomCreationConverter<IMessageModel>
  {
      private DictionaryAdapterFactory m_adapterFactory;
      public MessageModelConverter(DictionaryAdapterFactory adapterFactory)
      {
          m_adapterFactory = adapterFactory;
      }
      public override IMessageModel Create(Type objectType)
      {
          IMessageModel model = m_adapterFactory
              .GetAdapter<IMessageModel>(new Hashtable());
          return model;
      }
  } 
```

然后我向 HttpConfiguration 对象添加一个格式化程序，如下所示：

```
 DictionaryAdapterFactory adapterFactory = new DictionaryAdapterFactory();
  config.Formatters.JsonFormatter.SerializerSettings.Converters
      .Add(new MessageModelConverter(adapterFactory)); 
```

逐步调试调试器，我可以确认使用了 MessageModelConverter，调用了 Create()，并为实现 IMessageModel 的模型创建并返回了 Castle 代理。但是，当调用控制器时，模型参数为空。不知何故，实例化的类在转换器中的创建和控制器中的使用之间消失了。

但是，如果我将 Create 更改为使用实现 IMessageModel 的具体类，则一切正常，并且模型显示在控制器上：

```
 public class MessageModel : IMessageModel
  {
      public string Message { get; set; }
  }
.
.
.
      public override IMessageModel Create(Type objectType)
      {
          IMessageModel model = new MessageModel();
          return model;
      } 
```

或者，我可以声明一个实现 IMessageModel 并将所有调用委托给另一个接口对象的包装器，如下所示：

```
 public class MessageModelWrapper : IMessageModel
  {
      public IMessageModel ContainedModel;
      public MessageModelWrapper(IMessageModel containedModel)
      {
          ContainedModel = containedModel;
      }
      public string Message
      {
          get { return ContainedModel.Message; }
          set { ContainedModel.Message = value; }
      }
  } 
```

然后我像这样实现 Create()：

```
 public override IMessageModel Create(Type objectType)
  {
      IMessageModel model = m_adapterFactory
          .GetAdapter<IMessageModel>(new Hashtable());
      model = new MessageModelWrapper(model);
      return model;
  } 
```

这让我可以在 Castle DictionaryAdapter 中走私，而且效果也很好。模型包装器到达控制器，我可以提取字典适配器代理。

但是当我直接创建并返回 Castle DictionaryAdapter 时，控制器仍然只是得到一个空值。

知道为什么 WebAPI 讨厌 Castle DictionaryAdapter 吗？

# php - 显示缓存头

> ID：14405916
> 
> 赞同：2
> 
> 时间：2013-01-18T19:10:52.260
> 
> 标签：php, symfony, header

Symfony 2 正在显示缓存头，我想知道如何隐藏这些

例子

```
HTTP/1.0 200 OK Cache-Control: no-cache Content-Type: text/html Date: Fri, 18 Jan 2013 19:07:08 GMT HTTP/1.0 200 OK Cache-Control: no-cache Date: Fri, 18 Jan 2013 19:07:08 GMT X-Debug-Token: 50f99d5cba4da 
```

我在我的代码中使用它

```
return new Response($this->renderView('Shout/view/default.html.twig')); 
```

被调用

```
$httpKernel = $this->container->get('http_kernel');
        $response = new Response;
        $response->SetContent($httpKernel->forward('MyBundle:Module/'.$module.'/'.$module.':index'));
        $response->headers->set('Content-Type', 'text/html');
        return $response; 
```

在树枝扩展中

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-09-17T16:04:06.063

添加 ->getContent() 以结束。

[http://api.symfony.com/2.0/Symfony/Component/HttpFoundation/Response.html](http://api.symfony.com/2.0/Symfony/Component/HttpFoundation/Response.html)

```
 $response = $this->forward("MyBundle:Module:$module", array(
            'customer_id'  => $customer_id
    ))->getContent();

    return $response; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T19:39:14.497

标头是HttpFoundation中[Response 类的一部分。](http://api.symfony.com/2.0/Symfony/Component/HttpFoundation/Response.html)您可以使用 headers 属性来管理它们，这与您在代码中使用的属性相同。该属性是[ResponseHaderBag 类](http://api.symfony.com/2.0/Symfony/Component/HttpFoundation/ResponseHeaderBag.html)的一个实例，它具有删除功能。

您要删除的标头名为“Cache-Control”，因此如果您编写：

```
$response->headers->remove('Cache-Control'); 
```

它将删除该标题。但是如果你检查 Response 的来源，你会发现它的一些功能依赖于这个 header，所以我不确定删除它是否真的是一个好主意。

默认情况下，此标头没有任何错误，只是返回“no-cache”，这意味着浏览器不会缓存您的页面。但是您将无法缓存没有此标头的页面。

如果您的目标是自己手动发送缓存控制标头，请考虑使用[Symfony2 的内置功能](http://symfony.com/doc/2.0/book/http_cache.html)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-19T14:06:09.657

对于正在寻找答案的每个人，我继续上面的帖子并尝试使用 twig 的渲染功能，但使用我的自定义模块

这是我得到的，它工作正常:)

```
return $this->container->get('templating.helper.actions')->render('MyBundle:Module/'.$module.'/'.$module.':index', $attributes, $options); 
```

# java - 业务代表与服务定位器

> ID：14405919
> 
> 赞同：2
> 
> 时间：2013-01-18T19:11:00.667
> 
> 标签：java, jakarta-ee, design-patterns, ejb

Business Delegate和Service Locator有什么区别。Do都负责封装查找和创建机制。如果Business Delegate使用Service Locator来隐藏查找和创建机制，那么Business Delegate是什么意思，Service Locator不能代替Business Delegate .

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T19:25:53.180

我不知道你是否已经[检查](http://corej2eepatterns.com/Patterns2ndEd/BusinessDelegate.htm)过了，但这是一个好的开始。

> 使用业务委托来封装对业务服务的访问。Business Delegate 隐藏了业务服务的实现细节，例如查找和访问机制。

服务定位器封装了基于通用注册表搜索和/或获取特定服务的位置、限制和必填字段所需的逻辑。业务代表封装了一组相关服务，并以一种内聚的方式公开它们，以防止服务客户不得不搜索和访问与特定功能相关的所有服务。

此外，您还可以防止客户必须真正了解服务定位器及其应使用的服务，而将其留给特定的业务代表。客户端只需要该委托来执行一组相关任务或依赖于各种服务的任务。

* * *

**例子**

业务代表实际上并不封装一组服务定位器。它在服务定位器之上提供了一个抽象层，以提供一个内聚的服务子集。通常只有一个 Service Locator 实例，多个实例需要一个额外的映射，您应该知道哪个 Service Locator 提供了 Service X，把它想象成您需要一个*Service Locator Locator*。

一个例子应该有助于澄清事情。

考虑用户帐户管理。查找注册服务以注册用户，然后`UserBusinessDelegate`查找身份验证服务以允许登录。客户端只需要一个业务代表即可访问这些服务，并且他不需要知道这两个服务的 ID。

这些服务 id 被封装在`UserBusinessDelegate`避免声明 id 和在任何地方使用服务定位器的需要中。想一想，如果一个服务 id 发生变化会发生什么？

在这种情况下，负责的业务代表会更新，避免对客户产生直接影响。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T14:37:15.590

这些模式有一个共同点，因此这个问题很有意义。

它们都帮助客户使用服务。

假设我们将服务公开为 EJB、WS 或 POJO。客户端可以直接使用服务定位器访问此类服务。（允许在此组件中封装一些复杂性）这改进了客户端的代码，但客户端仍然负责了解服务的公开方式。（他必须为特定服务选择正确的服务定位器）。

此解决方案的一个缺点是客户端将与服务高度耦合。例如： a) 如果明天作为 EJB 公开的服务更改为 WS，我们必须更改客户端的代码（使用另一个服务定位器）。b) 如果我们想使用模拟服务测试客户端的代码，我们必须更改代码。

业务代表上门降低耦合度。现在客户端与业务代表进行交互（在更高的抽象级别），因此他不需要了解有关服务实现细节的任何其他信息。

当然，由于业务代表与他交互，服务定位器仍然有用。

以最简单的方式，我喜欢将 Business Delegate 视为接口（改进解耦），将 Service Locator 视为助手（封装与基础设施相关的行为）

# entity-framework - 在实体框架 5 POCO 之上构建业务逻辑

> ID：14405920
> 
> 赞同：2
> 
> 时间：2013-01-18T19:11:00.613
> 
> 标签：entity-framework, design-patterns, poco, .net-4.5, object-oriented-analysis

我有 ADO.NET 背景，这是我第一次在一个严肃的项目中使用实体框架，所以我继续使用 VS2012 并使用 .NET 4.5 和实体框架 5。

我采用数据优先方法并创建了数据库，生成了 .edmx 并使用此方法将 POCOS 从上下文中分离出来：http: [//allen-conway-dotnet.blogspot.co.uk/2013/01 /separating-entity-framework-poco.html](http://allen-conway-dotnet.blogspot.co.uk/2013/01/separating-entity-framework-poco.html)

所以我的解决方案如下所示：

```
Data.Access (where I access the EF context and return POCOS to Business Layer)
Data.Model (where the POCOs are)
Data.Repository (where the context sites)
Presentation.Admin.Website 
```

现在说我在数据库/ POCO 类中有下表（只是一个例子 - 不是真实的）

```
 namespace Data.Model
            {
                using System;
                using System.Collections.Generic;

                public partial class Car
                {
                    public Car()
                    {
                       this.Parts= new HashSet<Parts>();
                    }

                    public int ID { get; set; }
                    public string Manufacturer { get; set; }
                    public string Model{ get; set; }
                    public Nullable<bool> Enabled { get; set; }

                   public virtual ICollection<Parts> Parts{ get; set; }
                }
            } 
```

现在假设数据库中的所有汽车都有一个 Web 服务，甚至只是一个指向返回 XML 并给我可用部件列表的 URL 的链接。每辆车检索零件数据的方式都不同（一些是 REST，一些是 WCF，一些来自 CSV 文件等）。

所以我想定义扩展 Car 的类并定义一个“GetParts()”方法，该方法将具有特定的业务逻辑来获取该特定汽车的零件。

我还希望能够从数据库中获取所有汽车并循环它们，为每辆汽车调用 GetParts 方法来检索数据。

我在想我需要定义一个接口或抽象类 ICar 来声明 GetParts 方法并以某种方式合并 Car POCO，但对如何进行编码感到困惑。

谁能简要解释一下我如何构建我的代码来完成这项工作，也许建议一种设计模式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T03:01:00.070

> 我采用数据优先的方法
> 
> 每辆车检索零件数据的方式都不同（一些是 REST，一些是 WCF，一些来自 CSV 文件等）。

考虑到您的数据存储类型是可变的，并且您可能想要一个可重用的模型，那么我认为首先使用 EF 数据库的选择对您来说不是一个好选择。最好先使用[代码](http://msdn.microsoft.com/en-us/data/jj590134)。

> 所以我想定义扩展 Car 的类并定义一个“GetParts()”方法，该方法将具有特定的业务逻辑来获取该特定汽车的零件。

您的模型应该对持久性无知。如果这是您所追求的，我不会考虑扩展或硬编码特定于数据存储的 GetParts()。

> 也许建议一种设计模式？

也许考虑使用[存储库](http://martinfowler.com/eaaCatalog/repository.html)为您的数据映射提供一个抽象层。

# linux - 在 Linux 上安装 jBPM

> ID：14405936
> 
> 赞同：1
> 
> 时间：2013-01-18T19:12:09.140
> 
> 标签：linux, jboss, jbpm

我一直在使用以下内容在远程机器（linux）上设置 jBPM/JBoss 服务器

[http://docs.jboss.org/jbpm/v5.1/userguide/ch03.html](http://docs.jboss.org/jbpm/v5.1/userguide/ch03.html)

上面的链接在我的 Windows 盒子上本地运行良好，没有任何故障。但是，我在启动/关闭服务器时遇到了许多错误，并且 drools-guvnor 页面完全运行（或 localhost:8080 上的 JBoss AS 启动页面之外的任何其他页面）。这应该在 linux 上也能正常工作，还是我可以寻求其他参考？另外，我不想安装 eclipse，只是为了让 jBPM 设计器运行。

还是我最好尝试将 jBPM 加载到单独的 JBoss 安装中？

运行 Red Hate Enterprise Linux Server 5.8 版

感谢您的时间

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T15:56:31.633

我无法让 jBPM 安装程序演示（与 jboss 一起打包）工作。相反，我单独安装了 jBPM 和 JBoss，并在 build.xml 文件中设置了 JBoss 主目录。然后使用 guvnor 和 Designer 进行单独安装

ant install.guvnor.into.jboss ant install.designer.into.jboss

仍然有错误，但设计器/管理员已启动并运行，现在是数据库问题:(

# mysql - 从表 A 中获取项目，该表通过表 B 链接到表 C。三重连接？

> ID：14405943
> 
> 赞同：0
> 
> 时间：2013-01-18T19:12:30.003
> 
> 标签：mysql, database, pdo

假设一个网站根据发布的媒体格式对热门故事进行分类。其数据库由以下表格组成：

![故事表](../Images/8d0578ce83d87fd1256c67dc41afe51b.png)

![链接表](../Images/4ee4fccf3691eba6de6eb3d2b6ff05f0.png)

![在此处输入图像描述](../Images/ccfccd78ee362a20729f2236cd702d98.png)

**应该使用什么样的查询来检索以电影形式发布的所有故事标题？**

我想过做这样的事情，但怀疑有更好的方法：

```
SELECT `story_id`
FROM `links` INNER JOIN `media`
  ON `links`.`medium_id` = `media`.`medium_id`
  WHERE `media`.`medium_name` = :medium_name"

for every retrieved story_id
{
    SELECT `story_summary` FROM `stories` WHERE `story_id` = :story_id
} 
```

任何帮助将非常感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T19:15:04.773

尝试使用此查询（我添加了第三行和最后一行）：

```
SELECT `story_id` FROM `links` 
INNER JOIN `media` ON `links`.`medium_id` = `media`.`medium_id`
inner join stories on stories.story_ID=links.story_id
 WHERE `media`.`medium_name` = :medium_name
and `story_summary`.`story_id` in (:all_the_story_id) 
```

: **all_the_story_id**里面放了所有story_id，看看[mysql里面](http://www.tutorialspoint.com/mysql/mysql-in-clause.htm)

如果您进行额外加入，您将获得所需的所有信息，并且您无需为每个结果进行查询

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T19:22:25.740

```
SELECT
    s.story_title
FROM MEDIA as m
LEFT JOIN LINKS as l ON l.medium_id = m.medium_id
LEFT JOIN STORIES as s ON s.story_id = l.story_id
WHERE m.medium_name = 'movie' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T19:49:09.927

```
select s.story_title
from stories s, links l, media m
where m.medium_name = 'movie' and
s.story_id = l.story_id and
l.medium_id = m.medium_id 
```

这基本上与 raheel 发布的查询相同，只是语法不同。故事和中表没有直接连接是否有原因？您的查询和数据库可以简化。

# php - TYPO3：在 FE 控制器的操作中获取内容 UID？

> ID：14405944
> 
> 赞同：1
> 
> 时间：2013-01-18T19:12:41.150
> 
> 标签：php, typo3

> **可能重复：**
> [获取 tt_content uid](https://stackoverflow.com/questions/10447983/get-tt-content-uid)

当插件（我的扩展）插入页面时，有没有办法从控制器的操作中知道内容的 UID？

就像是。

```
class Tx_myextension_Controller_GalleryController extends Tx_Extbase_MVC_Controller_ActionController {
   public function showImageAction() {
      $this->initializeAction();
      $UID=some_method_to_get_the_tt_content_uid;
      $this->view->assign("var1", "Content UID: $UID");
   }
} 
```

当我没有想法时，我不知道在哪里继续搜索:(

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-18T19:59:49.480

使用此技巧查找所有`tt_content's`属性：

```
$this->contentObj = $this->configurationManager->getContentObject();
debug($this->contentObj->data, "current tt_content's data"); 
```

这是一个数组，因此您的解决方案是：

```
$UID = $this->contentObj->data['uid']; 
```

[前段时间有人问过这个问题...](https://stackoverflow.com/a/10448347/1066240)

# android - 在android中删除jpegs元数据

> ID：14405955
> 
> 赞同：0
> 
> 时间：2013-01-18T19:13:06.710
> 
> 标签：android, image, compression, metadata, android-2.2-froyo

我必须在 android 应用程序中压缩图像（jpeg）。在压缩图像时，它会自动去除元数据吗？如果没有，有没有办法删除元数据？恶意元数据是否还有任何安全问题？

# css - IE7 CSS 宽度：100% 问题

> ID：14405965
> 
> 赞同：0
> 
> 时间：2013-01-18T19:13:32.810
> 
> 标签：css, internet-explorer

我正在为基于 % 的响应式网格开发 CSS 模板。我想我早些时候让它与 IE7 一起工作并且做了一些愚蠢的事情，现在它不工作了。

[http://danmathisen.com/lightbase-css/](http://danmathisen.com/lightbase-css/)

目前如何运作：

列是基于百分比的。所以 1/3 宽度的列 ( `.col-1-3`) 将是`width:32%`+ `margin-left:1%`+ `padding:1%`。这在很大程度上基于 Chris Coyier 的[Don't Overthink It Grids](http://css-tricks.com/dont-overthink-it-grids/)。

在现代浏览器中，填充不会影响 div 的宽度。但在 IE7 中确实如此。所以我有 IE 类 ( `.lt-ie8`) 可以容纳 1% 的填充。`.lt-ie8 .col-1-3 { width: 30%; }`. 所以 30% 宽度 + 1% margin-left + 2% padding left/right * 3 - 1% :first-child = 100%。正确的？为什么这在 IE7 中不起作用？

解决方案：

我可以使用`behavior: url(/scripts/boxsizing.htc)`，但希望在没有的情况下使其可行。

或者使用JS计算宽度然后减去1px。我认为这可行，但并不理想。

或以 99% 的宽度解决。也不理想。

我想要一个纯 CSS 的解决方案。有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T19:27:48.007

我没有对此进行测试，但也许你可以尝试将一个 div 放在另一个 div 中，并在内部 div 中使用填充或边距？像这样的东西：

```
<div style="width:33%;padding:0;margin:0;">
<div style="padding:3%;margin:3%;">
Content here
</div>
</div> 
```

同样，不确定这是否可行，但值得一试。

# java - 在 Android 应用程序中进行远程服务器调用

> ID：14405967
> 
> 赞同：-1
> 
> 时间：2013-01-18T19:13:44.567
> 
> 标签：java, android, thrift

我已经制作了一个 apache thrift 服务器，并且我有一个包含多个功能的服务。我试图弄清楚从我的 android 应用程序调用远程服务器的最佳方式是什么。

我的问题是我无法从 MainActivity 线程（主线程）进行调用 - 我需要在我的主要活动方法中使用大多数远程函数。

我试图用一个名为“Server”的静态成员创建一个静态类等于服务器对象，然后我将它设置在另一个线程中，然后我尝试在主线程（主活动类）中调用它 - 但我有错误因为从一个线程跳到另一个线程..

为了更具体，我想要这样的东西：

```
public class MainActivity extends Activity {
  private service.Client myService;

  @Override
  protected void onCreate(Bundle savedInstanceState) {
    ..
    ... Some stuff that define myService (In a new thread ofcourse) ...
  }

  ...

  private void MyFunc1() {
    myService.Method1();
  }

  private void MyFunc2() {
    myService.Method2();
  }

  private void MyFunc3() {
    myService.Method3();
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T19:33:44.003

我有一个用于与 REST API 对话的库。随意切片、切块和重用：[https ://github.com/nedwidek/Android-Rest-API](https://github.com/nedwidek/Android-Rest-API)

代码是 BSD 或 GPL。

这是我如何使用我所拥有的（我已经稍微修剪了 MainActivity，希望不会太多）：

```
package com.hatterassoftware.voterguide.api;

import java.util.HashMap;

public class GoogleCivicApi {
    protected final String baseUrl = "https://www.googleapis.com/civicinfo/us_v1/";

    protected String apiKey = "AIzaSyBZIP5uY_fMF35SVVrytpKgHtppBbj8J0I";

    public static final String DATE_FORMAT = "yyyy-MM-dd";

    protected static HashMap<String, String> headers;

    static {
        headers = new HashMap<String, String>();
        headers.put("Content-Type", "application/json");
    }

    public String createUrl(String uri, HashMap<String, String> params) {

        String url = baseUrl + uri + "?key=" + apiKey;

        if (params != null) {
            for (String hashKey: params.keySet()) {
                url += hashKey + "=" + params.get(hashKey) + "&";
            }

            url = url.substring(0, url.length());
        }

        return url;
    }
}

package com.hatterassoftware.voterguide.api;

import android.util.Log;

import com.google.gson.Gson;
import com.google.gson.GsonBuilder;
import com.google.gson.JsonElement;
import com.google.gson.JsonObject;
import com.google.gson.JsonParser;
import com.hatterassoftware.restapi.GetTask;
import com.hatterassoftware.restapi.HttpReturn;
import com.hatterassoftware.restapi.RestCallback;
import com.hatterassoftware.voterguide.api.callbacks.ElectionCallback;
import com.hatterassoftware.voterguide.api.models.Election;

public class ElectionsQuery extends GoogleCivicApi implements RestCallback {

    GetTask getTask;
    ElectionCallback callback;
    final String TAG = "ElectionQuery";

    public ElectionsQuery(ElectionCallback callback) {

        String url = this.createUrl("elections", null);

        this.callback = callback;

        Log.d(TAG, "Creating and executing task for: " + url);
        getTask = new GetTask(url, this, null, null, null);
        getTask.execute();
    }

    @Override
    public void onPostSuccess() {
        Log.d(TAG, "onPostSuccess entered");
    }

    @Override
    public void onTaskComplete(HttpReturn httpReturn) {
        Log.d(TAG, "onTaskComplete entered");

        Log.d(TAG, "httpReturn.status = " + httpReturn.status);
        if (httpReturn.content != null) Log.d(TAG, httpReturn.content);
        if (httpReturn.restException != null) Log.d(TAG, "Exception in httpReturn", httpReturn.restException);

        JsonParser parser = new JsonParser();
        JsonElement electionArrayJson = ((JsonObject)parser.parse(httpReturn.content)).get("elections");

        Log.d(TAG, electionArrayJson.toString());

        Gson gson = new GsonBuilder().setDateFormat(GoogleCivicApi.DATE_FORMAT).create();
        Election[] elections = gson.fromJson(electionArrayJson.toString(), Election[].class);

        callback.retrievedElection(elections);
    }

}

package com.hatterassoftware.voterguide;

import java.util.Calendar;
import java.util.List;

import com.actionbarsherlock.app.SherlockFragmentActivity;
import com.hatterassoftware.voterguide.api.ElectionsQuery;
import com.hatterassoftware.voterguide.api.VoterInfoQuery;
import com.hatterassoftware.voterguide.api.callbacks.ElectionCallback;
import com.hatterassoftware.voterguide.api.callbacks.VoterInfoCallback;
import com.hatterassoftware.voterguide.api.models.Election;
import com.hatterassoftware.voterguide.api.models.VoterInfo;

import android.location.Address;
import android.location.Geocoder;
import android.location.Location;
import android.location.LocationManager;
import android.os.Bundle;
import android.app.AlertDialog;
import android.content.Context;
import android.content.DialogInterface;
import android.content.Intent;
import android.content.SharedPreferences;
import android.content.res.Resources;
import android.text.Editable;
import android.text.Html;
import android.text.TextWatcher;
import android.text.method.LinkMovementMethod;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.View;
import android.widget.ArrayAdapter;
import android.widget.Button;
import android.widget.EditText;
import android.widget.ImageButton;
import android.widget.ProgressBar;
import android.widget.Spinner;
import android.widget.TextView;
import android.widget.Toast;

public class MainActivity extends SherlockFragmentActivity implements ElectionCallback, VoterInfoCallback {

    private ProgressBar mProgressBar;
    public Button submit;
    public Spinner state;
    public Spinner election;
    public EditText address;
    public EditText city;
    public EditText zip;

    private int count=0;
    private Object lock = new Object();

    private static final String TAG = "MainActivity";
    public static final String VOTER_INFO = "com.hatterassoftware.voterguide.VOTER_INFO";

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        mProgressBar = (ProgressBar) findViewById(R.id.home_progressBar);

        Resources res = getResources();

        SharedPreferences mPrefs = getApplicationSharedPreferences();
        ImageButton gpsButton = (ImageButton) findViewById(R.id.locate);
        try {
            LocationManager manager = (LocationManager) getSystemService( Context.LOCATION_SERVICE );

            if (!manager.isProviderEnabled(Context.LOCATION_SERVICE)) {
                gpsButton.setClickable(false);
            }
        } catch(Exception e) {
            Log.d(TAG, e.getMessage(), e);
            gpsButton.setClickable(false);
            gpsButton.setEnabled(false);
        }

        submit = (Button) findViewById(R.id.submit);
        submit.setClickable(false);
        submit.setEnabled(false);

        state = (Spinner) findViewById(R.id.state);
        election = (Spinner) findViewById(R.id.election);
        address = (EditText) findViewById(R.id.streetAdress);
        city = (EditText) findViewById(R.id.city);
        zip = (EditText) findViewById(R.id.zip);

        submit.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                doSubmit();             
            }           
        });

        gpsButton.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                doLocate();
            }
        });

        // Let's check for network connectivity before we get down to business.
        if (Utils.isNetworkAvailable(this, true)) {

            // Show the disclaimer on first run.
            if(mPrefs.getBoolean("firstRun", true)) {
                AlertDialog alert = new AlertDialog.Builder(this).create();
                alert.setCancelable(false);
                alert.setTitle(res.getString(R.string.welcome));
                LayoutInflater inflater = (LayoutInflater) this.getSystemService(LAYOUT_INFLATER_SERVICE);
                View layout = inflater.inflate(R.layout.custom_dialog, null);

                TextView alertContents = (TextView) layout.findViewById(R.id.custom_dialog_text);
                alertContents.setMovementMethod(LinkMovementMethod.getInstance());
                alertContents.setText(Html.fromHtml(res.getString(R.string.welcome_dialog_text)));
                alert.setView(alertContents);
                alert.setButton(AlertDialog.BUTTON_POSITIVE, "OK", new DialogInterface.OnClickListener() {

                    @Override
                    public void onClick(DialogInterface dialog, int which) {
                        SharedPreferences mPrefs = getApplicationSharedPreferences();
                        SharedPreferences.Editor editor = mPrefs.edit();
                        editor.putBoolean("firstRun", false);
                        editor.commit();
                        dialog.dismiss();
                        retrieveElections();
                    }
                });
                alert.show();
            } else {
                retrieveElections();
            }
        }

    }

    @Override
    public void onResume() {
        super.onResume();
        // Let's check for network connectivity before we get down to business.
        Utils.isNetworkAvailable(this, true);

        LocationManager manager = (LocationManager) getSystemService( Context.LOCATION_SERVICE );
        if (!(manager.isProviderEnabled(LocationManager.GPS_PROVIDER) 
                || manager.isProviderEnabled(LocationManager.NETWORK_PROVIDER))) {
            Toast.makeText(this, "GPS is not available", 2).show();
            ImageButton gpsButton = (ImageButton) findViewById(R.id.locate);
            gpsButton.setClickable(false);
        }
    }

    public SharedPreferences getApplicationSharedPreferences() {
        Context mContext = this.getApplicationContext();
        return mContext.getSharedPreferences("com.hatterassoftware.voterguide", MODE_PRIVATE);      
    }

    private void showSpinner() {
        synchronized(lock) {
            count++;
            mProgressBar.setVisibility(View.VISIBLE);
        }
    }

    private void hideSpinner() {
        synchronized(lock) {
            count--;
            if(count < 0) {  // Somehow we're trying to hide it more times than we've shown it.
                count=0;
            }
            if (count == 0) {
                mProgressBar.setVisibility(View.INVISIBLE);
            }
        }
    }

    public void retrieveElections() {
        Log.d(TAG, "Retrieving the elections");

        showSpinner();

        ElectionsQuery query = new ElectionsQuery(this);
    }

    @Override
    public void retrievedElection(Election... elections) {
        Log.d(TAG, "Retrieved the elections");

        hideSpinner();

        for (int i=0; i<elections.length; i++) {
            Log.d(TAG, elections[i].toString());
        }

        ArrayAdapter arrayAdapter = new ArrayAdapter(this, android.R.layout.simple_spinner_item, elections);
        arrayAdapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);

        Spinner spinner = (Spinner) this.findViewById(R.id.election);
        spinner.setAdapter(arrayAdapter);

    }
} 
```

# javascript - 覆盖 HTML 结果 jQueryUI Spinner

> ID：14405970
> 
> 赞同：0
> 
> 时间：2013-01-18T19:14:02.443
> 
> 标签：javascript, jquery, html, jquery-ui

我正在尝试使用 jQuery Spinner，但是我想覆盖 HTML 结果。

基本上改变了跟随按钮的html结构：

```
<a class="ui-spinner-button ...>
    <span class="ui-button-text">
        <span class="ui-icon ui-icon-triangle-1-n">?</span>
    </span>
</a> 
```

经过：

```
<button type="button" class="ui-spinner-up" tabindex="-1"></button> 
```

有什么办法做到这一点，而不改变原来的脚本（jquery.spinner.js）？

问候， 乔尔瓦尼

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-03-12T17:02:33.250

我知道这个问题已经得到解答，但是如果有人感兴趣，您现在可以使用小部件工厂覆盖 _buttonHtml 类（呈现按钮）。这很简单。

您可以使用以下语法来执行此操作：

```
//Overriding the default buttons with our own classes
$.widget("ui.spinner", $.ui.spinner, {
    _buttonHtml: function () {
        return "" +
            "<button type='button' class='ui-spinner-up' tabindex='-1'></button>";
    }
});

//To call it, we simply instantiate like normal:
$("#myElement").spinner(); 
```

与往常一样，您可以使用通常可以通过的任何选项进行实例化

```
$("#myElement").spinner({min: '1', max: '10', numberFormat: 'n0'}); 
```

要调用自定义命名空间，您可以使用：

```
$.widget("custom.myExtension", $.ui.spinner, {
    red: function() {
        this.element.css( "color", "red" );
    }
});

//Instantiate it like so:
$("myElement").myExtension("red"); 
```

轻松活泼的。在此示例中，我将覆盖 jQuery UI 微调器的默认行为。第一个参数是您的自定义名称。文档建议您在自定义命名空间中命名它。所以像“custom.myButton”（无论你喜欢什么）这样的东西在这里都是可以接受的。第二个参数是您尝试覆盖的基本小部件。在我们的例子中，它是 ui.spinner。然后你提供被覆盖的方法；如果您查看微调器的源代码，您可以看到该方法当前存在于源代码中，我们只是覆盖了默认行为。正如您在第二个示例中所看到的，我使用自己的命名空间扩展了 ui.spinner。希望这可以帮助同一条船上的任何人。

资料来源：

[http://learn.jquery.com/jquery-ui/widget-factory/extending-widgets/](http://learn.jquery.com/jquery-ui/widget-factory/extending-widgets/) [http://api.jqueryui.com/spinner/#method-_buttonHtml](http://api.jqueryui.com/spinner/#method-_buttonHtml)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T19:36:36.767

```
$("#spin")
    .spinner()                         //init the spinner
    .parent()                          //grab the spinner wrapper
    .find(".ui-spinner-button")        //grab each button
    .empty()                           //remove their children
    .append("<div>Custom HTML</div>"); //add custom html 
```

或者这个：http: [//jsfiddle.net/smwMv/](http://jsfiddle.net/smwMv/)

```
$("#spin")
    .spinner()
    .parent()
    .find(".ui-spinner-button")
    .replaceWith(function(){
        return $("<input>", {
            type:'button',
            'class':this.className, // preserve classNames
            tabindex:-1
        });
    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T19:27:54.293

我不完全遵循您想要进行的 HTML 更改，但您可以使用`<spinner>.parent().find(...)`.

例如，这是一个小提琴，显示将向上箭头更改为具有丑陋的红色边框：http: [//jsfiddle.net/W7ayu/](http://jsfiddle.net/W7ayu/)

摘抄：

```
$("#spin")
    .spinner()
    .parent()
    .find(".ui-spinner-up")
    .css("border", "solid 1px red"); 
```

它还显示输出的 HTML。

# python - 如何对两个 Pandas DataFrame 对象进行 SQL 风格的不相交或设置差异？

> ID：14405975
> 
> 赞同：7
> 
> 时间：2013-01-18T19:14:12.460
> 
> 标签：python, pandas

我正在尝试使用 Pandas 解决一个白痴 DBA 没有备份现在崩溃的数据集的问题，所以我试图找出两列之间的差异。由于我不会进入的原因，我使用的是 Pandas 而不是数据库。

我想做的是，给定：

```
Dataset A = [A, B, C, D, E]  
Dataset B = [C, D, E, F] 
```

我想找到不相交的值。

```
Dataset A!=B = [A, B, F] 
```

在 SQL 中，这是标准集逻辑，根据方言的不同实现不同，但它是一个标准功能。如何在 Pandas 中优雅地应用它？我很想输入一些代码，但我所拥有的一切都不是正确的。在这种情况下，我不知道我不知道什么..... Pandas 为交集和联合设置了逻辑，但没有为不相交/设置差异设置逻辑。

谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-18T19:21:58.893

您可以使用以下`set.symmetric_difference`功能：

```
In [1]: df1 = DataFrame(list('ABCDE'), columns=['x'])

In [2]: df1
Out[2]:
   x
0  A
1  B
2  C
3  D
4  E

In [3]: df2 = DataFrame(list('CDEF'), columns=['y'])

In [4]: df2
Out[4]:
   y
0  C
1  D
2  E
3  F

In [5]: set(df1.x).symmetric_difference(df2.y)
Out[5]: set(['A', 'B', 'F']) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-12T09:02:49.397

这是一个多列的解决方案，可能效率不高，我很想得到一些反馈，让这更快：

```
input = pd.DataFrame({'A': [1, 2, 2, 3, 3], 'B': ['a', 'a', 'b', 'a', 'c']})
limit = pd.DataFrame({'A': [1, 2, 3], 'B': ['a', 'b', 'c']})

def set_difference(input_set, limit_on_set):
    limit_on_set_sub = limit_on_set[['A', 'B']]
    limit_on_tuples = [tuple(x) for x in limit_on_set_sub.values]
    limit_on_dict = dict.fromkeys(limit_on_tuples, 1)

    entries_in_limit = input_set.apply(lambda row:
        (row['A'], row['B']) in limit_on_dict, axis=1)

    return input_set[~entries_in_limit]

 >>> set_difference(input, limit)

  item  user
1    a     2
3    a     3 
```

# asp.net - 如何从数据库向 Site.Master 添加动态元标记？

> ID：14405981
> 
> 赞同：0
> 
> 时间：2013-01-18T19:14:44.830
> 
> 标签：asp.net, sql-server

我们的数据库中有一系列元标记值，需要根据所服务的站点传递给 Site.master。如何在我的页面加载事件中包含 BingMetaTag 数据库字段值？我们需要将内容属性值从数据库传递到母版页中的元标记。

Page_Load 如下：

```
 public partial class Site : System.Web.UI.MasterPage {
    protected DealerInformation objDealerInformation = null;
    protected DealerSite objDealerSite = null;
    protected ConnectionStringConfig dbConfig = null;

    protected void Page_Load(object sender, EventArgs e) {
        dbConfig = Session["DBConfig" + Request.Url.Host] as ConnectionStringConfig;
        objDealerInformation = CommonFunctions.GetDealerInformation(dbConfig);
        objDealerSite = Session["DealerSite" + Request.Url.Host] as DealerSite;

        try {
            imgGoogleAdServices.Src = string.Format(@"//googleads.g.doubleclick.net/pagead/viewthroughconversion/{0}/?value=0&amp;label={1}&amp;guid=ON&amp;script=0;", objDealerSite.GoogleConversionID, objDealerSite.GoogleConversionLabelRemarketing);
        } catch {
            imgGoogleAdServices.Src = "";
        }
        try {
            WebEntitiesModel context = new WebEntitiesModel(dbConfig["WebConnection"]);
            String aspPage = HttpContext.Current.Request.Url.AbsolutePath.ToString().ToLower();
            MetaTag pageMetaTag = (from m in context.MetaTags
                                   where m.Page == aspPage
                                   select m).Single();

            Page.Title = (pageMetaTag.PageTitle != null ? pageMetaTag.PageTitle : "");
            Page.MetaKeywords = (pageMetaTag.MetaKeywords != null ? pageMetaTag.MetaKeywords : "");
            Page.MetaDescription = (pageMetaTag.MetaDescription != null ? pageMetaTag.MetaDescription : "");
        } catch {
            Page.Title = "";
            Page.MetaKeywords = "";
            Page.MetaDescription = "";
        } 
```

请注意，我们已经从另一个数据库表中引入了标题、元关键字和元描述。我们只需要将 BingMetaTag 的值添加为单独的元标记条目。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T19:27:45.727

听起来您使用的是 WebForms 而不是 MVC，这实际上使这更容易一些。

在您的 Site.master 文件中：

```
<head>
    <meta id="someMeta" runat="server" name="something" value="" />
</head> 
```

在您的 Site.master.cs 文件的类中：

```
protected HtmlGenericControl someMeta;

public String SomeMetaValue {
    get { return this.someMeta.Attributes["value"]; }
    set { this.someMeta.Attributes["value"] = value; }
} 
```

在您页面的班级中

```
public void Page_Load(Object sender, EventArgs e) {

    SiteMaster master = (SiteMaster)this.Master;
    master.SomeMetaValue = "someValueFromDatabase";
} 
```

如果您的项目中有多种类型的母版页，则此代码将失败，因此请根据需要添加适当的保护和检查。

# c# - 将具有大列的数据表按列拆分为子数据表，并固定一列

> ID：14405988
> 
> 赞同：0
> 
> 时间：2013-01-18T19:15:07.167
> 
> 标签：c#, .net, linq, datatable, linq-to-dataset

我有至少 50 列的大型数据表。

> 第一列包含行数据的描述

即在第一列，行数据是行的标题，所以

> 我想保留第一栏

大数据表必须在每 10 列维护第一列值后拆分为子数据表

> 父布局的第一列必须保留在所有子数据表中

. 请提出最佳解决方案。谢谢。

# maven - Maven依赖项是否添加到类路径中？

> ID：14405992
> 
> 赞同：0
> 
> 时间：2013-01-18T19:15:18.933
> 
> 标签：maven, jar, classpath

我有两个独立的项目 A 和 B 都是使用 maven 构建的。B项目更像是一个资源项目。我正在使用 maven 为这个项目打包 jar。

**现在对于项目 A，我将项目 B 的 jar 添加为依赖项。我将如何能够在项目 A 中的一些 java 文件中访问项目 B 的 jar 中的资源文件。**

我已经确认项目 B 的 jar 已安装在 Maven 的本地存储库中。

我搜索了很多，但似乎没有一个答案有帮助。

以下是目录结构

src |_ main |_ 资源 |_ dir1 |_ dir2 |_ dir3 |_ Some_config_file.txt

我想从项目 A 访问这个 Some_config_file.txt，我怎样才能找到相对于类路径的路径

任何帮助/建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T19:25:04.210

是的，来自的所有文件`src/main/resources`都是最终 JAR 的一部分，并且它们与类位于相同的路径中。换句话说，您将降落在已编译的课程`_Some_config_file.txt`旁边。`_dir1._dir2._dir3.Foo.class`

所有这些项目都放置在平面 CLASSPATH 上，即每个 JAR 的内容在 CLASSPATH 上共享相同的名称空间。为了读取此类文件，您需要使用`ClassLoader`：

```
getClass().getResourceAsStream("/_dir1/_dir2/_dir3/_Some_config_file.txt`); 
```

# c# - 我的 AIF Web 服务对 SalesAgreementHeader [AX 2012] 的更新失败

> ID：14405993
> 
> 赞同：1
> 
> 时间：2013-01-18T19:15:22.773
> 
> 标签：c#, web-services, axapta, dynamics-ax-2012, aif

您好，我创建了一个只有`SalesAgreementHeader`as 表的查询。然后我使用向导创建了一个文档 aif webservice。网络服务工作正常，但更新总是报告“ `Invalid xml document.`”错误。`moveToNextElement`该错误是由类中的方法引发的`AxdBaseCreate`。

例外的原因是，

```
reader.fieldName() = AgreementClassification 
```

和

```
_expectedElementName = AgreementRelationType. 
```

我怎样才能解决这个问题？或者有什么好的方法来调试这个？

在我创建查询之前，`SalesAgreementHeader`我有一个更复杂的查询并且有同样的错误。然后我创建了一个新的并将其缩减为仅`SalesAgreementHeader`.

**更新：** A 还没有解决问题，但我认为问题可能是因为`SalesAgreementHeader`扩展`AgreementHeader`和字段`RelationType`在 AOS 中不可见，但如果您直接查看数据库。

**更新 2：** 这是调用堆栈：

[s] \Classes\AxdBaseCreate\moveToNextElement 9

[s] \Classes\AxdBaseCreate\readSurrogateForeignKeyValue 37

[s] \Classes\AxdBaseCreate\readProperty 14

[s] \Classes\AxdBaseCreate\readProperties 122

[s] \Classes\AxdBaseUpdate\deserializeTopEntity 25

[s] \Classes\AxdBaseUpdate\deserializeDocument 131

[s] \Classes\AxdBaseUpdate\updateDocumentList 42

[s] \Classes\AxdBase\updateList 64

[s] \Classes\AifDocumentService\updateList 34

[s] \Classes\SalesAgreementService\update 4

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-20T09:46:56.317

您能否提供您正在使用的代码？

我有一个假设（基于 AgreementRelationType 的名称，它看起来像 Enim ）您正在尝试基于枚举更新字段。如果是这种情况，那么我希望我能帮助你。

当您需要更新枚举时，请使用以下方法：

```
//here is an example how to change Status on SalesTable
//as you may see when you change the value of enum you have to set boolean autogenerated field to "true". 
//Name of such fields ends with suffix "Specified"
salesTable.SalesStatus = AxdEnum_SalesStatus.Invoiced;
salesTable.SalesStatusSpecified = true; 
```

提前我想建议你（如果你没有这样做）使用下面的 try..catch 块。这将使您的生活更轻松。

```
try
{
    //your code here
}
catch (System.ServiceModel.FaultException<SalesOrderDelete.SalesOrderDeleteTcpNet.AifFault> aifFaults) // This code catches error messages even when "Logging mode = Logging is disabled" on Inbound port
{
    SalesOrderDelete.SalesOrderDeleteTcpNet.InfologMessage[] infologMessageList = aifFaults.Detail.InfologMessageList;

    foreach (SalesOrderDelete.SalesOrderDeleteTcpNet.InfologMessage infologMessage in infologMessageList)
    {

        Console.WriteLine("Exception: " + infologMessage.Message + "\n");
    }

    Console.WriteLine("\nPress any key to quit.\n");
    Console.ReadKey();
    cl.Abort();
} 
```

# php - 应用 PHP 函数仅显示价格而不更改购物车价格

> ID：14405996
> 
> 赞同：0
> 
> 时间：2013-01-18T19:15:39.037
> 
> 标签：php, magento

在 Magento 中，我想将自定义 PHP 函数应用于前端价格的显示，而不更改后端/购物车上的实际数字价格。

具体来说，当价格中没有美分时，我想删除显示价格上的小数点。例如，19.00 美元将显示为 19 美元，但 19.99 美元将显示为 19.99 美元。

我在 PHP.net 上找到了一个 PHP 函数，它将为我执行此更改：

```
// formats money to a whole number or with 2 decimals; includes a dollar sign in front
    function formatMoney($number, $cents = 1) { // cents: 0=never, 1=if needed, 2=always
      if (is_numeric($number)) { // a number
        if (!$number) { // zero
          $money = ($cents == 2 ? '0.00' : '0'); // output zero
        } else { // value
          if (floor($number) == $number) { // whole number
            $money = number_format($number, ($cents == 2 ? 2 : 0)); // format
          } else { // cents
            $money = number_format(round($number, 2), ($cents == 0 ? 0 : 2)); // format
          } // integer or decimal
        } // value
        return $money;
      } // numeric
    } // formatMoney 
```

我不想更改 Magento 模板来应用此功能，因为价格到处都是。更新所有模板将是一场噩梦。

我想知道是否有一个地方我可以使用这个功能来格式化全球价格的显示，这样它就可以从一个地方影响所有价格的显示。

我已经花了几个小时浏览各种 Magento 文件，包括：

app/code/core/Mage/Directory/Model/Currency.php

public function format <-- 这个函数改变的是实际价格，而不是价格的显示。

app/code/core/Mage/Catalog/Model/Product.php：

public function getFormatedPrice <-- 这个函数看起来很有希望，但对我没有任何作用。

我还查看了这些文件，没有任何明显的地方跳出来：

app/code/core/Mage/Catalog/Block/Product.php

app/code/core/Mage/Catalog/Block/Product/Price.php

app/code/core/Mage/Catalog/Block/Product/View.php

你认为有可能在 Magento 中找到一个地方，我可以破解我的自定义 PHP 函数来显示价格（而不是购物车中的实际数字价格）吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T19:54:33.247

您可以为此使用观察者`catalog_product_get_final_price`：

配置.xml：

```
<config>
    <frontend>
        <events>
            <catalog_product_get_final_price>
                <observers>
                    <catalogrule>
                        <class>myextension/observer</class>
                        <method>processFrontFinalPrice</method>
                    </catalogrule>
                </observers>
            </catalog_product_get_final_price>
        </events>
    </frontend>
</config> 
```

在你的观察者课上：

```
<?php
public function processFrontFinalPrice($observer)
{
    $product    = $observer->getEvent()->getProduct();
    $finalPrice = 123.45;   //modify your price here
    return $this;
} 
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T20:22:49.143

我不确定 catalog_product_get_final_price 是否会按您的意愿工作，因此我建议的另一个解决方案是`formatTxt`从`Mage_Directory_Model_Currency`

在该功能中，您可以检查价格是否有小数，并设置选项`$options['precision']=0;`是否希望该价格没有小数（如 xx.00）。

例如：

```
public function formatTxt($price, $options=array())
{
  if(is_numeric( $price ) && floor( $price ) == $price){
     $options['precision']=0;
  }
  return parent::formatTxt($price, $options);
} 
```

# python - Python 蒙特卡罗模拟循环

> ID：14405997
> 
> 赞同：3
> 
> 时间：2013-01-18T19:15:49.467
> 
> 标签：python, loops, random, simulation, montecarlo

我正在编写一个简单的 Monte-Carlo 模拟脚本，稍后我将扩展该脚本以用于更大的项目。该脚本是一个基本的爬虫，试图在网格中从 A 点到达 B 点。A点的坐标是（1,1）（这是左上角），B点的坐标是（n，n）（这是右下角，n是网格的大小）。

一旦爬虫开始移动，有四个选项，它可以向左、向右、向上或向下（不允许对角线移动）。如果这四个选项中的任何一个满足以下条件：

1.  新点仍应在 nxn 网格的边界内
2.  以前不应访问新点

新点将在剩余的有效选项中随机选择（据我所知，Python 使用 Mersenne Twister 算法来选择随机数）。

我想运行模拟 1,000,000 次（下面的代码只运行 100 次），并且每次迭代都应该终止：

1.  爬虫卡住（没有有效的移动选项）
2.  爬虫到达网格上的最终目的地 (n,n)。

我以为我正确地实现了算法，但显然出了点问题。无论我运行模拟多少次（100 次或 1,000,000 次），我只获得 1 个成功事件，而爬虫设法到达终点，其余尝试（99 次或 999,999 次）均不成功。

我敢打赌，我错过了一些简单的东西，但由于某种原因看不到它。有任何想法吗？

非常感谢！

编辑：文本中的一些错别字已更正。

```
import random

i = 1 # initial coordinate top left corner
j = 1 # initial coordinate top left corner
k = 0 # counter for number of simulations
n = 3 # Grid size

foundRoute = 0 # counter for number of cases where the final point is reached
gotStuck = 0 # counter for number of cases where no valid options found
coordList = [[i, j]]

while k < 100:
    while True:
        validOptions = []

        opt1 = [i - 1, j]
        opt2 = [i, j + 1]
        opt3 = [i + 1, j]
        opt4 = [i, j - 1]

        # Check 4 possible options out of bound and re-visited coordinates are
        # discarded:

        if opt1[0] != 0 and opt1[0] <= n and opt1[1] != 0 and opt1[1] <= n:
            if not opt1 in coordList:
                validOptions.append(opt1)

        if opt2[0] != 0 and opt2[0] <= n and opt2[1] != 0 and opt2[1] <= n:
            if not opt2 in coordList:
                validOptions.append(opt2)

        if opt3[0] != 0 and opt3[0] <= n and opt3[1] != 0 and opt3[1] <= n:
            if not opt3 in coordList:
                validOptions.append(opt3)

        if opt4[0] != 0 and opt4[0] <= n and opt4[1] != 0 and opt4[1] <= n:
            if not opt4 in coordList:
                validOptions.append(opt4)

        # Break loop if there are no valid options
        if len(validOptions) == 0:
            gotStuck = gotStuck + 1
            break

        # Get random coordinate among current valid options
        newCoord = random.choice(validOptions)

        # Append new coordinate to the list of grid points visited (to be used
        # for checks)
        coordList.append(newCoord)

        # Break loop if lower right corner of the grid is reached
        if newCoord == [n, n]:
            foundRoute = foundRoute + 1
            break

        # If the loop is not broken, assign new coordinates
        i = newCoord[0]
        j = newCoord[1]
    k = k + 1

print 'Route found %i times' % foundRoute
print 'Route not found %i times' % gotStuck 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T19:29:37.940

您的问题是您永远不会清除您访问过的位置。将打破内部循环的块更改`while`为如下所示：

```
 if len(validOptions) == 0:
     gotStuck = gotStuck + 1
     coordList = [[1,1]]
     i,j = (1,1)
     break 
```

您还需要更改成功的块：

```
if newCoord == [n, n]:
    foundRoute = foundRoute + 1
    coordList = [[1,1]]
    i,j = (1,1)
    break 
```

或者，您可以简单地将这段代码放在您的内部`while`循环之前。您的代码的开头将如下所示：

```
k = 0 # counter for number of simulations
n = 3 # Grid size  
foundRoute = 0 # counter for number of cases where the final point is reached
gotStuck = 0 # counter for number of cases where no valid options found
while k < 100:
    i,j = (1,1) 
    coordList = [[i,j]]
    while True:
        #Everything else 
```