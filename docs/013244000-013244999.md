# StackOverflow 问答 13244000-13244999

# objective-c - 在 nsindexset 中查找第 n 个条目

> ID：13244001
> 
> 赞同：0
> 
> 时间：2012-11-06T03:37:38.100
> 
> 标签：objective-c, ios, xcode, nsarray, nsindexset

假设我有一个`NSIndexSet`电话`aSet`号码在 26-89 之间。

`[aSet firstIndex]`给我 26

`[aSet lastIndex]`给我89

什么方法会给出第三个索引（29）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T03:46:51.670

我不认为`NSIndexSet`可以用来访问那样。您需要遍历它。例如 -

```
int indexIwantToFind = 2;
int valueAtThisIndex = [aSet firstIndex];
for(int i = 0; i < indexIwantToFind; i++){
    valueAtThisIndex = [aSet indexGreaterThanIndex:valueAtThisIndex];
}
NSLog(@"%d", valueAtThisIndex); //This will give you 39 
```

# sql-server-2008 - 一个表中没有数据时需要在加入两个表时抛出异常

> ID：13244007
> 
> 赞同：1
> 
> 时间：2012-11-06T03:38:24.703
> 
> 标签：sql-server-2008, sql-server-2008-r2

假设有两个表`test1`，`test2`我使用连接从两个表中选择值。

我的要求是这样的：当我加入两个表时，如果`test1`里面有数据但没有找到对应的数据`test2`，那么查询应该抛出异常。

如何实现？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T03:51:48.550

你需要[RAISEERROR](http://msdn.microsoft.com/en-us/library/ms178592.aspx)

进行左连接并选择右侧为空的位置。如果计数 > 0 则抛出异常。

```
DECLARE @count INT

SELECT 
   @count = COUNT(*)
FROM
  test1 t1
LEFT JOIN test2 t2 
  ON t1.t1_join_col = t2.t2_join_col
WHERE 
  t2.t2_join_col IS NULL -- find where we have test1 data but not test2 data

-- Check if I need to raise an error
IF @count <> 0 
    RAISERROR (N'<<%7.3s>>', -- Message text.
           10, -- Severity,
           1, -- State,
           N'abcde'); -- First argument supplies the string.
    -- The message text returned is: <<    abc>>. 
```

如果您需要返回不匹配的结果，则添加以下 ELSE

```
ELSE

SELECT 
  ... cols you want
FROM
  test1 t1
LEFT JOIN test2 t2 
  ON t1.t1_join_col = t2.t2_join_col 
```

您总是可以将结果放入临时表中并对其进行计数，然后如果您希望只执行一次查询，也可以将其返回。

# css - 有什么方法可以只使用变换在中间产生一段文本凸起？

> ID：13244009
> 
> 赞同：3
> 
> 时间：2012-11-06T03:38:59.070
> 
> 标签：css

指向小提琴的链接在底部。

有没有办法通过将变换样式应用到它的父容器来凸出一个文本节点？

**HTML**

```
<span class='manual-labor-1'>e</span>
<span class='manual-labor-2'>s</span>
<span class='manual-labor-3'>c</span>
<span class='manual-labor-4'>h</span>
<span class='manual-labor-5'>e</span>
<span class='manual-labor-6'>w</span>

<br/><br/><br/>

<span class='just-css-3'>eschew</span> 
```

**CSS**

```
.just-css-3 {
    /* ultimate troll wonders if there is a way to do create the same effect using just css3 (tansform?) */
}

    /* begin this is all garbage */
    color:red;
    display:inline-block;
    transform:rotate(-180deg);
    -ms-transform:rotate(-180deg); 
    -moz-transform:rotate(-180deg); 
    -webkit-transform:rotate(-180deg); 
    -o-transform:rotate(-180deg);
    /* end this is all garbage */
}

.manual-labor-1{ font-size:20px; }
.manual-labor-2{ font-size:50px; }
.manual-labor-3{ font-size:90px; }
.manual-labor-4{ font-size:90px; }
.manual-labor-5{ font-size:50px; }
.manual-labor-6{ font-size:20px; }​ 
```

[http://jsfiddle.net/uyCZj/3/](http://jsfiddle.net/uyCZj/3/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T21:51:38.273

不幸的是，似乎还没有。直到我们得到 ::nth-letter() 伪选择器。

[呼吁 ::nth-everything](http://css-tricks.com/a-call-for-nth-everything/)
[CSS :nth-letter()](http://www.bram.us/2012/04/13/css-nth-letter/)

同时，您可以尝试使用[Lettering.js](http://letteringjs.com)，一个用于排版的 jQuery 插件。

# openedge - 进度数据库的管理员帐户

> ID：13244012
> 
> 赞同：1
> 
> 时间：2012-11-06T03:39:17.403
> 
> 标签：openedge, progress-db

我正在尝试通过 ODBC 连接到全新安装的 Progress DB。知道我应该使用什么用户名/密码吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T03:45:28.927

你试过了吗 ：

-user 系统进度 -password 123

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T07:30:13.090

开箱即用，您有两个选项可以使用授予 DBA 权限的帐户访问数据库：

1.  您在其下创建数据库的操作系统帐户的凭据。
2.  您可以使用 4GL 数据管理工具手动创建或修改特殊用户 SYSPROGRESS，如果它已经存在的话。您无法更改它的密码，但如果您拥有 4GL 引擎上有权执行此操作的帐户的凭据，则可以使用您选择的密码删除并重新创建它。

两个用户都将拥有 DBA 权限。

# cube - iOS Cube上下旋转开关视图控制器

> ID：13244017
> 
> 赞同：1
> 
> 时间：2012-11-06T03:39:38.867
> 
> 标签：cube

Cube上下旋转切换视图控制器不要用苹果私有API？有什么好的方法吗？</p>

# java - 使用 Spring Security 3.1.3 记住我 - 已弃用的默认构造函数

> ID：13244020
> 
> 赞同：3
> 
> 时间：2012-11-06T03:40:09.443
> 
> 标签：java, spring, dependency-injection, spring-security, deprecated

我正在使用 Spring Security 3.1 进行登录，但我收到了已弃用的警告并且我无法删除，看来此配置适用于 3.0 版

```
<?xml version="1.0" encoding="UTF-8"?>
<beans:beans xmlns="http://www.springframework.org/schema/security"
    xmlns:beans="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.springframework.org/schema/beans 
                    http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
                    http://www.springframework.org/schema/security 
                    http://www.springframework.org/schema/security/spring-security-3.1.xsd">

    <http auto-config="true" use-expressions="true">
        <intercept-url pattern="/pages/admin/**" access="hasRole('ROLE_ADMIN')" />
        <intercept-url pattern="/**" access="permitAll"/>
        <form-login login-page="/pages/login.jsf"/>
        <remember-me key="jsfspring-sec" services-ref="rememberMeServices"/>
        <logout
            invalidate-session="true"
            delete-cookies="JSESSIONID,SPRING_SECURITY_REMEMBER_ME_COOKIE"
            logout-success-url="/pages/login.jsf"/>
    </http>

    <authentication-manager alias="authenticationManager">
        <authentication-provider ref="rememberMeAuthenticationProvider">
        </authentication-provider>
        <authentication-provider>
            <user-service id="userDetailsService">
                <user authorities="ROLE_ADMIN" name="admin" password="admin" />
            </user-service>
        </authentication-provider>
    </authentication-manager>

    <beans:bean id="rememberMeServices"
        class="org.springframework.security.web.authentication.rememberme.TokenBasedRememberMeServices">
        <beans:property  name="key" value="jsfspring-sec" />
        <beans:property  name="userDetailsService" ref="userDetailsService" />
        <beans:property  name="alwaysRemember" value="true" />
        <beans:property  name="tokenValiditySeconds" value="60" />
    </beans:bean>

    <beans:bean id="rememberMeAuthenticationProvider"
        class="org.springframework.security.authentication.RememberMeAuthenticationProvider">
        <beans:property name="key" value="jsfspring-sec"/>
    </beans:bean>

    <beans:bean id="rememberMeFilter"
        class="org.springframework.security.web.authentication.rememberme.RememberMeAuthenticationFilter">
        <beans:property name="rememberMeServices" ref="rememberMeServices"/>
        <beans:property name="authenticationManager" ref="authenticationManager" />
    </beans:bean>

</beans:beans> 
```

我找不到如何使用 Spring 3.1 来做到这一点。有人能帮我吗？最后三个 bean 已弃用，我将不胜感激。这是 GitHub 中存储库的 url：[https ://github.com/wmanriques/spring_template](https://github.com/wmanriques/spring_template)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T07:19:24.583

默认构造函数已被弃用，因为 Spring Security 最近已在几个类中转移到构造函数注入。

```
/**
* @deprecated Use constructor injection
*/ 
```

现在需要注入所需的组件`constructor-arg`：

```
<beans:bean id="rememberMeServices"
            class="org.springframework.security.web.authentication.rememberme.TokenBasedRememberMeServices">
    //First two with constructor - required elements
    <beans:constructor-arg value="jsfspring-sec"/>
    <beans:constructor-arg ref="userDetailsService"/>

    //Last two with properties
    <beans:property name="alwaysRemember" value="true"/>
    <beans:property name="tokenValiditySeconds" value="60" />
</beans:bean> 
```

与接下来的 2 个 bean 相同：

```
<beans:bean id="rememberMeAuthenticationProvider"
            class="org.springframework.security.authentication.RememberMeAuthenticationProvider">
    <beans:constructor-arg value="jsfspring-sec"/>
</beans:bean>

<beans:bean id="rememberMeFilter"
            class="org.springframework.security.web.authentication.rememberme.RememberMeAuthenticationFilter">
    <beans:constructor-arg ref="authenticationManager"/>
    <beans:constructor-arg ref="rememberMeServices"/>
</beans:bean> 
```

# mysql - 如何使用 Django 按日期分页？

> ID：13244023
> 
> 赞同：0
> 
> 时间：2012-11-06T03:40:14.500
> 
> 标签：mysql, django, pagination

我查看了如何使用 Django 的内置分页，在某些情况下它看起来不是很有可扩展性。就我而言，我正在爬一个日志表，所以我想做的是这样的：

```
Page 1:
SELECT ... FROM log WHERE date > '2012-11-04 00:00:00' LIMIT 10;
Page 2:
SELECT ... FROM log WHERE date > '#LAST_VALUE_FROM_PAGE_1' LIMIT 10;
Page 3:
SELECT ... FROM log WHERE date > '#LAST_VALUE_FROM_PAGE_2' LIMIT 10;
... 
```

换句话说，我想爬上一个索引，而不是抓取整个结果集并对其进行迭代。假设日期是索引的，这应该让事情变得非常高效，同时仍然产生几乎相同的结果，因为无论如何我总是按日期排序。

我很好奇的是这是否已经完成并且是一种模块化的方式，就像 Django 的内置分页方法是如何工作的，或者我是否需要单独编写自己的方法？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-06T04:15:47.820

我认为您想要的是跨多个请求的缓存查询集。很少有模块可以用于此。

其中几个是：

*   [智能缓存查询集](http://jeffelmore.org/2010/09/25/smarter-caching-of-django-querysets/)
*   [查询集缓存](http://packages.python.org/johnny-cache/queryset_cache.html)

虽然，我个人没有使用过，所以没有第一手经验。

# azure - JFolder::create: 无法创建目录警告：移动文件失败！（Joomla + Windows Azure）

> ID：13244025
> 
> 赞同：0
> 
> 时间：2012-11-06T03:41:00.080
> 
> 标签：azure, joomla2.5

我在 Windows Azure 上的网站上安装了 Joomla。尝试更新 Joomla 版本或上传新模板后，我收到以下错误

```
JFolder::create: Could not create directory
Warning: Failed to move file! 
```

对我来说，很明显问题出在权限上，所以问题是，如何解决？

由于 Azure 架构（基本上是复制）使您很难仅更改文件夹的权限，并且无法使用 FTP 修改 Windows 服务器上的文件夹权限，我觉得我走上了死胡同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T08:31:42.923

这绝对应该是可能的。安装组件时，会多次调用 JFolder::create。

我认为您在实际调用中传递了错误的路径或其他东西。您是否尝试过使用本机 mkdir() 进行简单测试？

# inheritance - 团队成员系统 - UML 继承问题

> ID：13244027
> 
> 赞同：0
> 
> 时间：2012-11-06T03:41:17.660
> 
> 标签：inheritance, uml

![UML 类图](../Images/cc7e7669c1d6e4c466267a429170948f.png)

这是我的 UML 类图。我意识到我的学生、团队成员和团队联络员的设置方式存在问题。

学生可以成为系统的一部分，然后加入团队，从而成为团队成员。团队成员也可以是团队联络员（可以批准加入团队的请求的团队领导）。

我意识到将学生变为 TeamMember 是一个问题，但我不确定如何处理它。

谢谢大家的建议！~

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T18:45:08.433

我发现在系统中处理人员及其角色时，最好有一个 Role 类，其中 Person 有 Roles。

因此，Person 有零个或多个角色。学生是角色，教授是角色，...

对于团队，我将有一个包含零个或多个 TeamMembers 的 Team 类。TeamMember 或 TeamMember 类型（如与项目关联的 ProjectTeamMember）也可以是人员的角色。

这种设计允许同一个人在不同的时间扮演不同的角色，同时保持细节的清晰和独立。例如，如果你有一个人“Joe Blow”，Joe 可能是一个学生（并且有像 ClassSection 这样的对应关系），一个项目的成员（在那里你可以找到 Joe 团队中的其他人），......

在此处阅读更多内容： [UML 2 类图](http://www.agilemodeling.com/artifacts/classDiagram.htm)

# cygwin - cygwin新手编译运行c程序文件

> ID：13244029
> 
> 赞同：-1
> 
> 时间：2012-11-06T03:41:45.477
> 
> 标签：cygwin

我刚刚安装了最新版本的cygwin。想编译和运行一个简单的文件。当我打开 cygwin 终端并输入任何命令时：gcc,cc,g++ 它说找不到命令。我在这里想念什么

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T07:46:26.583

您缺少`gcc`、`cc`和`g++`命令。

并非所有软件包都默认安装。您需要`setup.exe`再次运行并选择`gcc`和`gcc-g++`进行安装。您会在`Devel`（开发）类别下找到它们。

# payment-gateway - 将商家详细信息添加到“买家”帐户

> ID：13244032
> 
> 赞同：3
> 
> 时间：2012-11-06T03:42:17.137
> 
> 标签：payment-gateway, balanced-payments

我正在使用带有 C# 的 REST API，所以我不确定如果我分享我的代码会有多大帮助。

我有一个`account`唯一`role`的，`buyer`并且只有一张信用卡链接。

我想通过链接银行账户和必要的商家信息来添加这个`merchant`角色。`account`

如果我有以下情况`account`：

```
{
"holds_uri": "/v1/marketplaces/MyMarket/accounts/MyAccount/holds",
"name": "John Smith",
"roles": [
    "buyer"
],
"created_at": "2012-11-06T02:54:03.300028Z",
"uri": "/v1/marketplaces/MyMarket/accounts/MyAccount",
"bank_accounts_uri": "/v1/marketplaces/MyMarket/accounts/MyAccount/bank_accounts",
"refunds_uri": "/v1/marketplaces/MyMarket/accounts/MyAccount/refunds",
"meta": {},
"debits_uri": "/v1/marketplaces/MyMarket/accounts/MyAccount/debits",
"transactions_uri": "/v1/marketplaces/MyMarket/accounts/MyAccount/transactions",
"email_address": "john@smith.com",
"id": "MyAccount",
"credits_uri": "/v1/marketplaces/MyMarket/accounts/MyAccount/credits",
"cards_uri": "/v1/marketplaces/MyMarket/accounts/MyAccount/cards"
} 
```

我了解我可以`POST`将以下银行帐户信息链接到`account`'s`bank_account_uri`以将银行帐户链接到`account`:

```
{
"name": "WHC III Checking",
"account_number": "12341234",
"bank_code": "321174851"
} 
```

仍然只显示新的银行账户信息后的`account`一个单一的。`buyer` `role``POST``account``bank_account_uri`

如何使用将`merchant`角色添加到现有角色？`buyer` `account``Balanced Payments REST API`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T04:07:48.223

我在 BalancedPayments IRC 频道上找到了一些帮助。

本文介绍如何：[将买家帐户推广为商家](https://github.com/balanced/balanced-api/blob/master/resources/accounts.rst#promote-a-buyer-account-to-a-merchant)

您需要将`PUT`正文中包含商家详细信息的请求提交给`account_uri`

```
PUT /v1/marketplaces/MyMarket/accounts/MyAccount

{
"merchant": {
    "phone_number": "+19046281796",
    "city": "San Francisco",
    "name": "jo",
    "dob": "1984-01",
    "state": "CA",
    "postal_code": "94110",
    "type": "person",
    "street_address": "Somewhere over the rainbow",
    "tax_id": "013825400"
}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T07:37:46.370

使用 Balanced Payments KFC 重定向创建商家，它会将您重定向到您指定的 redirect_uri。

它将发回两个参数：email_address 和 Mercer_uri。您可以向 Greg 提到的同一路由发送（更新）PUT 请求，以便将现有帐户与商家相关联。

PUT /v1/marketplaces/your_marketplace_id/accounts/account_id

```
{
  "merchant_uri": "merchant uri goes here"
} 
```

# erlang - 如果我删除了 gen_server 模块的进程字典会怎样？

> ID：13244033
> 
> 赞同：2
> 
> 时间：2012-11-06T03:42:05.167
> 
> 标签：erlang, erlang-otp, gen-server, process-dictionary

我正在使用 gen_server 模块中的进程字典，我调用了 get() 函数，我得到了类似的东西。

```
{'$ancestors',[main_server,<0.30.0>]},
{'$initial_call',{child_server,init,1}}] 
```

如果我删除进程字典会发生什么，会出现什么问题？
我删除了它，一切正常，即使调用在 child_server 中生成异常的函数 main_server 仍然可以获得退出信号。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T11:44:20.747

我认为某些调试功能可能会使用进程字典，例如 erlang:process_info/2

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T08:02:46.010

`$ancestors`仅*在初始化阶段*使用，用于获取父级的PID，用于捕获`EXIT`来自父级的消息，以便`terminate`执行该东西。在服务器启动并运行时擦除此密钥没有任何区别。

`$initial_call`另一方面，在崩溃报告中`proc_lib`用于转储 MFA 信息。

快速`grep`了解 OTP 源代码树肯定会有所帮助。

# git - 如何使用错误修复更新标签

> ID：13244036
> 
> 赞同：2
> 
> 时间：2012-11-06T03:42:26.170
> 
> 标签：git, github, tags, git-tag

我需要能够将我的本地存储库更改为特定标签，进行更改，推送更改，然后 git pull 生产服务器上的标签+更改。这就是我卡住的地方。

**将本地仓库切换到特定标签**

```
git checkout v5.86 
```

**本地仓库中的代码已更改**

**将标签推送到生产服务器？**

我试过 git push 但上面写着“一切都是最新的”，这是错误的吗？我的更改没有推送到 Github。

**如何将更新拉到另一台服务器？**

我可以将更改推送到标签吗？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T04:28:50.653

没有任何参数，`git push`将推送您的服务器和远程服务器上存在的每个“匹配”分支，或者`git config remote.origin.push`如果您以这种方式设置它，则推送所有内容。

尝试`git push tag v5.86`，或`git push --tags`。

阅读更多关于：

*   [远程的 git 配置属性](http://www.kernel.org/pub/software/scm/git/docs/git-config.html)
*   [git push 及其默认参数和行为](http://www.kernel.org/pub/software/scm/git/docs/git-push.html#_examples)

# java - Hibernate OneToMany 关系中的循环

> ID：13244039
> 
> 赞同：1
> 
> 时间：2012-11-06T03:43:19.630
> 
> 标签：java, json, spring, hibernate, jpa

我使用休眠和

有两个具有 OneToMany 关系的实体（City 和 Region）。

首先：

```
 @Entity
 @Table(name = "p_region")
 public class Region implements Serializable{

@OneToMany(mappedBy = "region",fetch= FetchType.LAZY,  cascade = CascadeType.MERGE)
private List<City> citys;

private static final long serialVersionUID = 1L;
@Id
@GeneratedValue(strategy = GenerationType.IDENTITY)
private Integer id;

private String name;

//++++++++++++++++++++ GETSET

public List<City> getCitys() {
    return citys;
}

public void setCitys(List<City> citys) {
    this.citys = citys;
}

public Integer getId() {
    return id;
}

public void setId(Integer id) {
    this.id = id;
}

public String getName() {
    return name;
}

public void setName(String name) {
    this.name = name;
}

 } 
```

第二个：

```
 @Entity
    @Table(name = "p_city")
    public class City implements Serializable {
private static final long serialVersionUID = 1L;
@Id
@GeneratedValue(strategy = GenerationType.IDENTITY)
private Integer id;

@NotEmpty(message = "Название не должно быть пустым")
@Length(max = 10, min = 2, message = "Название должно быть менее 2 символов и не 
 более 100")
     private String cityName;

@NotEmpty(message = "Код города не должно быть пустым")
private String cityCode;
    @Column(name = "zone")
    private Integer zone;

@Basic(optional = true)
@Temporal(javax.persistence.TemporalType.TIMESTAMP)
private Date entryDate = Calendar.getInstance().getTime();

@ManyToOne()
private Region region;

@Basic(optional = true)
private String zip_code;

// GET SET ::::::::::::::::::::::::::::::::::
    public Integer getZone() {
    return zone;
    }

    public void setZone(Integer zone) {
    this.zone = zone;
    }
public Region getRegion() {
    return region;
}

public void setRegion(Region region) {
    this.region = region;
}

public void delete() {
    System.out.println("QQQQQQQQQQQQQQQQQQQQQQ");
}

public String getCityCode() {
    return cityCode;
}

public void setCityCode(String cityCode) {
    this.cityCode = cityCode;
}

public String getCityName() {
    return cityName;
}

public void setCityName(String cityName) {
    this.cityName = cityName;
}

public Date getEntryDate() {
    return entryDate;
}

public void setEntryDate(Date entryDate) {
    this.entryDate = entryDate;
}

public Integer getId() {
    return id;
}

public void setId(Integer id) {
    this.id = id;
}

public String getZip_code() {
    return zip_code;
}

public void setZip_code(String zip_code) {
    this.zip_code = zip_code;
}

     } 
```

**当我尝试使用 JSON 获取简单的 Object(City) 时，它会返回循环：**

```
 {"id":577,"region":{"name":"нет региона","id":15,"citys":[{"id":577,"region":  
     {"name":"нет региона","id":15,"citys":[{"id":577,"region":{"name":"нет   
     региона","id":15,"citys":[{"id":577,"region":{"name":"нет
     региона","id":15,"citys":[{"id":577,"region":{"name":"нет    
     региона","id":15,"citys":[{"id":577,"region":{"name":"нет 
     региона","id":15,"citys":[{"id":577,"region":{"name":"нет......so on. 
```

**这个问题有什么解决方案吗？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T03:58:15.377

在转换为 JSON 之前，您需要打破实体之间的双向关系。

我认为有两种选择：

1.  迭代子集合，例如`citys`在 Region 中并设置`Region`为 null。这样，循环依赖就会被打破。您我想在其中添加一个名称映射属性`regionId`，`City`以便关系信息仍然可用。

2.  创建另一组`POJO`没有循环依赖的对象，从实体对象复制值，然后使用 POJO 对象获取 JSON。

# c# - 在表单中显示附件

> ID：13244040
> 
> 赞同：0
> 
> 时间：2012-11-06T03:43:07.730
> 
> 标签：c#, asp.net, forms, email, attachment

我在 VS2008 中制作了一个向用户发送邮件的表单。“收件人：”、“发件人：”、“主题：”、“正文：”已经预定义。现在我必须附加一个带有我已经保存在桌面上的表格的文件。

无论如何，工具箱或任何可以显示这一点的硬代码都有吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T03:46:31.077

以下是如何添加附件的小片段。通常最好发布您的代码原因然后我们可以更正确切的错误

```
MailMessage mail = new MailMessage();
SmtpClient SmtpServer = new SmtpClient("smtp.gmail.com");
mail.From = new MailAddress("your mail@gmail.com");
mail.To.Add("to_mail@gmail.com");
mail.Subject = "Test Mail";
mail.Body = "mail with attachment";

System.Net.Mail.Attachment attachment;
attachment = new System.Net.Mail.Attachment("c:/textfile.txt");
mail.Attachments.Add(attachment);

SmtpServer.Port = 587;
SmtpServer.Credentials = new System.Net.NetworkCredential("id", "password");
SmtpServer.EnableSsl = true;

SmtpServer.Send(mail); 
```

# mysql - 数组在xcode中为空

> ID：13244041
> 
> 赞同：0
> 
> 时间：2012-11-06T03:43:15.870
> 
> 标签：mysql, ios, xml, xcode, core-data

我一直在尝试以 xml 格式将数据发送到 iphone。但我就是无法让阵列正常工作。NSLog 不断返回 null。我应该怎么做才能纠正这个？

```
<?php
...(mysql query)
$q = $dbh->prepare( $sql );

$doc = new DOMDocument();
$r = $doc->createElement( "oneam" );
$doc->appendChild( $r );
foreach ( $q->fetchAll() as $row) {
    $e = $doc->createElement( "location" );

    $e->setAttribute( 'its', $row['oneam']);

    $r->appendChild( $e );

}
print $doc->saveXML();
?> 
```

我的视图控制器的 Xcode

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    char *cStr = "YES";
    NSString *str3 = [NSString stringWithUTF8String:cStr];

    NSString *urlString = [NSString stringWithFormat:@"(censored)", _login];

    NSXMLParser *Parser = [[[NSXMLParser alloc] initWithContentsOfURL:[NSURL URLWithString:urlString]] autorelease];
    [Parser setDelegate:self];
    [Parser parse];

    if (([[oneam objectForIndex:@"its" ]isEqualToString:@"YES" ])) {
            [switch1 setOn:YES animated:YES];
    }
    else {
            [switch1 setOn:NO animated:YES];
    }

}

- (void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName attributes:(NSDictionary *)attributeDict {

    if ( [elementName isEqualToString:@"location"]) {
        [oneam addObject:[[NSDictionary alloc] initWithDictionary:attributeDict]];
    NSLog(@"The array is %@", oneam);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T03:46:35.490

在您`viewDidLoad`编写以下代码：

```
oneam = [[NSMutableArray alloc] init]; 
```

您没有分配数组，这就是它为空的原因。

# timer - Dart：使用零持续时间计时器是支持将工作推迟到事件循环的方式

> ID：13244044
> 
> 赞同：5
> 
> 时间：2012-11-06T03:44:10.413
> 
> 标签：timer, dart, deferred-execution, event-loop, reentrancy

我通过实验发现创建一个持续时间为 0 的计时器可以让我将工作推迟到事件队列中。我真的很喜欢这个功能，因为它可以避免很多讨厌的重入问题。这是不会改变的故意功能吗？可以添加到文档中吗？如果没有，是否有支持的方法来做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-06T04:03:28.947

# 当前答案

正确的方法是使用`scheduleMicrotask(Function callback)`.

在此处查看 API 文档：[https ://api.dartlang.org/apidocs/channels/stable/dartdoc-viewer/dart-async#id_scheduleMicrotask](https://api.dartlang.org/apidocs/channels/stable/dartdoc-viewer/dart-async#id_scheduleMicrotask)

一篇关于异步任务和事件循环的好文章在这里：[https ://www.dartlang.org/articles/event-loop/](https://www.dartlang.org/articles/event-loop/)

# 旧答案（Dart 1.0 之前）

目前，答案是肯定的，`new Timer(0, callback)`这是推迟函数调用的最简单方法。

希望很快，[http://dartbug.com/5691](http://dartbug.com/5691)将得到修复，并且会有更好的方法。Timer 的问题在于 HTML 规范说回调应该在 4 毫秒后发生。取决于你在做什么，这可能是个问题。

微软推出`setImmediate()`来解决这个问题。在任何重绘之后，它会在下一个事件循环开始时调用回调。我在 Dart 中首选的解决方案是`Future.immediate()`推迟到下一个事件循环，并且可能这样的函数`defer()`需要回调。

但`new Timer(0, f)`即使有更好的解决方案可用，它仍然可以工作。不过，我不介意对它发出 lint 警告。

# ios - 我们使用 Xcode 4.5.2 在 IOS 6 上开发低功耗蓝牙。下载到 IOS5 设备的应用程序可以连接到 BLE 设备

> ID：13244046
> 
> 赞同：3
> 
> 时间：2012-11-06T03:44:23.120
> 
> 标签：ios, bluetooth, bluetooth-lowenergy

我们使用 Xcode 4.5.2 在 IOS 6 SDK 上开发低功耗蓝牙应用程序作为中心。下载到 IOS5(iPad3) 设备的应用程序可以毫无问题地连接到 BLE 设备。但是，如果此应用程序要下载到 IOS 6 设备，则会出现问题。应用程序可以发现 BLE 设备（显示在列表中），但是当我们单击连接时，它失败了。我们使用的是最新的 iPod5。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T19:35:27.017

我相信这是这里提到的 iOS 6 错误：[iOS 6 UUID Problem](http://olesitune.mine.nu/blelogg/?p=221)

一种快速检查的方法是添加一个 NSLog 以在发现外围设备时检查外围设备名称。

如果 peripheralName 为 Null，或者如果它在 CFUUIDCreateString 上崩溃，您就发现了问题。我发现修复的唯一方法是首先连接到外围设备 [manager connectPeripheral:peripheral options:nil]，然后断开连接并重新连接。完成后，您应该能够毫无问题地使用 CFUUIDCreateString。

```
- (void) centralManager:(CBCentralManager *)central didDiscoverPeripheral:(CBPeripheral *)peripheral advertisementData:(NSDictionary *)advertisementData RSSI:(NSNumber *)RSSI
{
   if (peripherals.count == 0)
   {
        [peripherals addObject: peripheral];
        NSString *peripheralName;
        peripheralName = [peripheral name];
        NSString *foundDevice = (NSString *)CFBridgingRelease(CFUUIDCreateString(NULL, [peripheral UUID]));
        NSLog(@"Found %@", peripheralName); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T19:48:44.513

我知道这听起来很奇怪，但 iPad3 iOS6 也有可怕的 BLE 问题。即外设名称不反映我在微控制器软件中引入的更改。

我有 iPhone5 和 iOS 6.1 beta 4 和 iPhone 4s iOS 6.0。两者都与我的 CC2540 项目完美配合。

# visual-studio-2012 - WinJS System.Launcher 仅在调试模式下工作

> ID：13244047
> 
> 赞同：3
> 
> 时间：2012-11-06T03:44:37.290
> 
> 标签：visual-studio-2012, microsoft-metro, winjs

以下代码在调试模式 (F5) 下运行时可以完美运行。但在部署（作为应用程序磁贴）或在没有调试器 (ctl+f5) 的情况下运行时，它**无法**正常运行。

*预期行为/工作时：*单击磁贴会立即启动 Steam url 链接，而不会显式呈现 html 页面。

*收到/不工作的行为：*单击磁贴启动应用程序，仅呈现 html 页面，从不启动 steam url。

```
var mydefs = new Object();
mydefs = { url: 'steam://rungameid/200710' };

function launch(url) {
    var uri = new Windows.Foundation.Uri(url);

    Windows.System.Launcher.launchUriAsync(uri).then(
         function (success) {
             if (success) {
                 // File launched
                 window.close();
             } else {
                 // File launch failed
             }
         });
}

(function () {
    "use strict";

    WinJS.Binding.optimizeBindingReferences = true;

    var app = WinJS.Application;
    var activation = Windows.ApplicationModel.Activation;

    app.onactivated = function (args) {
        if (args.detail.kind === activation.ActivationKind.launch) {
            launch(mydefs.url);

            args.setPromise(WinJS.UI.processAll());
        }
    };

    app.oncheckpoint = function (args) {
        window.close();
    };

    app.start();
})(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T20:00:05.717

看起来是时间问题。以下对我来说是一个瓷砖

```
(function () {
   "use strict";
    var mydefs = new Object();
    mydefs = { url: 'steam://rungameid/200710' };

    WinJS.Namespace.define("Steam", {
      launch: function launch(url) {
        var uri = new Windows.Foundation.Uri(url);

        Windows.System.Launcher.launchUriAsync(uri).then(
             function (success) {
                 if (success) {
                     // File launched
                     window.close();
                 } else {
                     // File launch failed
                 }
             });
          }
  });

  WinJS.Binding.optimizeBindingReferences = true;

  var app = WinJS.Application;
  var activation = Windows.ApplicationModel.Activation;

  app.onactivated = function (args) {
    if (args.detail.kind === activation.ActivationKind.launch) {                 
        setTimeout('Steam.launch("steam://rungameid/200710");', 2000);
        args.setPromise(WinJS.UI.processAll());
    }
  };

  app.start();
})(); 
```

# string - Go 中没有开头、结尾的函数？

> ID：13244048
> 
> 赞同：170
> 
> 时间：2012-11-06T03:45:19.690
> 
> 标签：string, go

只是好奇地想知道：为什么 Go 编程语言的标准库中没有像 startwith、endwith 等标准函数？

* * *

## 回答 #1

> 赞同：295
> 
> 时间：2012-11-06T03:49:43.180

[strings](http://golang.org/pkg/strings)包包含HasPrefix和[HasSuffix](http://golang.org/pkg/strings/#HasPrefix) [。](http://golang.org/pkg/strings/#HasSuffix)

```
import "strings"

startsWith := strings.HasPrefix("prefix", "pre") // true
endsWith := strings.HasSuffix("suffix", "fix") // true 
```

[play.golang.org](http://play.golang.org/p/c8TQuCk-U9)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2020-12-17T21:21:14.050

如果您正在使用字节，您可以使用字节包中的这些函数：

```
package main

import (
   "bytes"
   "fmt"
)

func main() {
   fmt.Println(bytes.HasPrefix([]byte("Gopher"), []byte("Go")))
   fmt.Println(bytes.HasPrefix([]byte("Gopher"), []byte("C")))
   fmt.Println(bytes.HasPrefix([]byte("Gopher"), []byte("")))
} 
```

这将比首先转换为字符串成本更低。如果您正在从 HTTP 请求读取，或者从本地文件读取，这很有用。

*   [https://golang.org/pkg/bytes#HasPrefix](https://golang.org/pkg/bytes#HasPrefix)
*   [https://golang.org/pkg/bytes#HasSuffix](https://golang.org/pkg/bytes#HasSuffix)

# iphone - 在 CVPixelBuffer 中获取对象的潜在泄漏

> ID：13244050
> 
> 赞同：3
> 
> 时间：2012-11-06T03:45:05.823
> 
> 标签：iphone, memory-management, ios4, memory-leaks, screen-capture

我正在创建一个应用程序来从 iphone 进行屏幕截图。所以在我完成编码后，我使用分析和分析来检查内存泄漏。我在代码的一个部分中只有一个内存泄漏。这是我的代码，它给了我内存泄漏。

```
-(void) writeSample: (NSTimer*) _timer {

if (assetWriterInput.readyForMoreMediaData) {
    // CMSampleBufferRef sample = nil;

    CVReturn cvErr = kCVReturnSuccess;

    // get screenshot image!
    CGImageRef image = (CGImageRef) [[self screenshot] CGImage];
    NSLog (@"made screenshot");

    // prepare the pixel buffer
    CVPixelBufferRef pixelBuffer = NULL;
    CFDataRef imageData= CGDataProviderCopyData(CGImageGetDataProvider(image));
    NSLog (@"copied image data");
    cvErr = CVPixelBufferCreateWithBytes(kCFAllocatorDefault,
                                         FRAME_WIDTH,
                                         FRAME_HEIGHT,
                                         kCVPixelFormatType_32BGRA,
                                         (void*)CFDataGetBytePtr(imageData),
                                         CGImageGetBytesPerRow(image),
                                         NULL,
                                         NULL,
                                         NULL,
                                         &pixelBuffer);
    NSLog (@"CVPixelBufferCreateWithBytes returned %d", cvErr);

    // calculate the time
    CFAbsoluteTime thisFrameWallClockTime = CFAbsoluteTimeGetCurrent();
    CFTimeInterval elapsedTime = thisFrameWallClockTime - firstFrameWallClockTime;
    NSLog (@"elapsedTime: %f", elapsedTime);
    CMTime presentationTime =  CMTimeMake (elapsedTime * TIME_SCALE, TIME_SCALE);

    // write the sample
    BOOL appended = [assetWriterPixelBufferAdaptor appendPixelBuffer:pixelBuffer withPresentationTime:presentationTime];

    if (appended) {
        NSLog (@"appended sample at time %lf", CMTimeGetSeconds(presentationTime));
    } else {
        NSLog (@"failed to append");
        [self stopRecording];
        self.startStopButton.selected = NO;
    }
  }
} 
```

它说存储到“imageData”中的对象的潜在泄漏。任何人都可以帮助我找到上述代码中的错误。当我使用内存管理工具检查时，上面的代码也存在内存泄漏。如果有人可以帮助我，那将是一个很大的帮助。

提前致谢 ！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-07T05:05:48.170

从评论 -

`CFRelease`当你`imageData`完成它时，你会做一个吗？

你可以把它放在之前或之后`NSLog (@"CVPixelBufferCreateWithBytes returned %d", cvErr);`

```
CFRelease(imageData); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T14:23:37.413

[http://developer.apple.com/library/mac/#documentation/QuartzCore/Reference/CVPixelBufferRef/Reference/reference.html](http://developer.apple.com/library/mac/#documentation/QuartzCore/Reference/CVPixelBufferRef/Reference/reference.html)

我不确定您拥有的其余代码，但通常当其中有一个以 Crete 作为单词的调用时，它必须有相应的发布声明。请检查上面的文档。

> ## CVPixelBufferRelease
> 
> 释放像素缓冲区。
> 
> ```
> void CVPixelBufferRelease (
>    CVPixelBufferRef texture
> ); 
> ```

# c# - 仅使用日期时间的年份部分的 Linq 查询

> ID：13244052
> 
> 赞同：1
> 
> 时间：2012-11-06T03:45:37.540
> 
> 标签：c#, sql, linq

我的 sqlserver 表中的一列是日期时间。在 where 子句中，我只按年份（不是月份和日期）进行查询。我必须使用 C# 在 LINQ 中执行此操作。请让我知道怎么做。

例如，如果以下是表中的值

2010 年 2 月 12 日 2011 年 7 月 14 日 2012 年 11 月 15 日

如果我按“2011”查询，则只应获取中间行。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T03:49:10.517

这可以很容易地完成。请参阅下面的示例

```
List<DateTime> test=new List<DateTime>{DateTime.Today,DateTime.Today.AddDays(3),DateTime.Today.AddYears(1),DateTime.Today.AddDays(1).AddYears(1)};

    test.Where (c => c.Year==2013).Dump();
    test.Where (c => c.Year==2012).Dump(); 
```

结果是

```
5IEnumerable<DateTime> (2 items) 4  
11/5/2013 12:00:00 AM 
11/6/2013 12:00:00 AM 

5IEnumerable<DateTime> (2 items) 4  
11/5/2012 12:00:00 AM 
11/8/2012 12:00:00 AM 
```

编辑： Dump() 函数是 LINQPad 的一部分。它不是原生的 .NET 方法。将其删除以在 LINQPad 之外进行测试。

# python - Python 读取文件。每行创建一个列表

> ID：13244055
> 
> 赞同：3
> 
> 时间：2012-11-06T03:46:10.947
> 
> 标签：python, file, list, python-2.7

所以我想从一个文件中读取并将它的每一行放入一个列表中。

假设我有一个名为 MyFile.txt 或 MyFile.csv 的文件，其中包含以下三行数字/小数：

```
49.55,2,77.09,18,1,2.34,32.11
33,11.22,33.21,56,76.55
8,9,44.7,90.99,12.21,1.01 
```

我希望程序打开文件然后读取第一行并将其放入列表中~比如 L1list。然后我希望它为第 2 行和第 3 行制作 L2list 和 L3list。一旦完成，我希望能够计算出列表的总数、平均值、最大值和最小值等。我对这部分使用 sum ( )、len()、max()、min() 等。

它是让我卡住的列表的填充。我得到了错误的总数，长度等。认为它可能是句号或角点。但我需要小数位和思想列表需要来者分开。

到目前为止，我已经尝试过：

```
filename = 'MyFile.txt' 
fin=open(filename,'r')
L1list = fin.readline()
L2list = fin.readline()
L3list = fin.readline() 
```

还：

```
L1list.append(fin.readline()) 
```

随着：

```
L1list = [i.strip().split() for i in fin.readlines()] 
```

有点卡住出了什么问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-06T03:49:56.700

那么你的代码出了什么问题？你有没有尝试过这样的事情：

```
L1list = [map(float, i.strip().split(',')) for i in fin.readlines()] 
```

或使用数据检查：

```
with open(filename,'r') as fin:
    values = [map(float, [x for x in line.strip().split(',') if x]) for line in fin] 
```

你也可以看看[csv 模块](http://docs.python.org/2/library/csv.html?highlight=csv#csv)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T03:51:03.277

我相信你需要类似的东西：

```
L1list = map(float, fin.readline().strip().split(",")) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-06T03:52:18.073

```
>>> '49.55,2,77.09,18,1,2.34,32.11'.split(',')
['49.55', '2', '77.09', '18', '1', '2.34', '32.11'] 
```

请尝试`print`看看发生了什么。

对于更复杂的 CSV 文件，您可能希望使用[http://docs.python.org/2/library/csv.html 。](http://docs.python.org/2/library/csv.html)

# sql - 如何在 oracle sql + yii 框架中获得同一查询结果中的第二批和第三批？

> ID：13244057
> 
> 赞同：0
> 
> 时间：2012-11-06T03:46:20.420
> 
> 标签：sql, oracle, yii

假设我在 sql 查询中有 20 个结果。如果要在 yii 活动记录中使用限制，我显然会从结果中获得前四个，但是如果我想在同一个查询结果中获得第二个四个然后第三个四个呢？如何通过 sql 查询？

例如

```
 $criteria2 = new CDbCriteria();
        $criteria2->select = 'USERID, ADID ,ADTYPE, ADTITLE, ADDESC, PAGEVIEW, DISPPUBLISHDATE';
        $criteria2->addCondition("STATUS = 1");
        $criteria2->order = '"t".PAGEVIEW DESC,"t".PUBLISHDATE DESC';
        $criteria2->limit = 4;
        $criteria2->with = array('subcat','adimages');
        $result = $this->findAll($criteria2);
        return $result; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T04:58:55.367

对不起 ：）

请参阅此处，如何使用 Oracle 进行分页（您使用的是 11g 吗？） [LIMIT 和 OFFSET 的替代方案，用于在 Oracle 中进行分页](https://stackoverflow.com/questions/2912144/alternatives-to-limit-and-offset-for-paging-in-oracle)

好吧，在 Yii 中只需设置偏移量，OCIConnector 将自动为 sql 设置 rownum

```
 $criteria2 = new CDbCriteria();
    $criteria2->select = 'USERID, ADID ,ADTYPE, ADTITLE, ADDESC, PAGEVIEW, DISPPUBLISHDATE';
    $criteria2->addCondition("STATUS = 1");
    $criteria2->order = '"t".PAGEVIEW DESC,"t".PUBLISHDATE DESC';
    $criteria2->limit = 4;
    $criteria2->offset = 0; //4, 8 - COciCommandBuiled applyLimit use it
    $criteria2->with = array('subcat','adimages');
    $result = $this->findAll($criteria2);
    return $result; 
```

# slider - 如何自定义一个像这两个的JQuery Slider？

> ID：13244062
> 
> 赞同：1
> 
> 时间：2012-11-06T03:46:56.227
> 
> 标签：slider, uislider, jquery-ui-slider

1. [http://www.ti.com/lsds/ti/standard-linear/operational-amplifiers-products.page](http://www.ti.com/lsds/ti/standard-linear/operational-amplifiers-products.page)
栏目：“Slew Rate (Typ) (V/us)”：是一个范围滑块，可以有通过其他更改其他标准来动态最小/最大值。

列：“Vs（Min）（V）”：它是一个简单的滑块，可以通过改变其他标准来获得动态的最小值/最大值。

最小值/最大值可以显示在滑块旁边。

2. [http://para.maximintegrated.com/en/search.mvp?fam=stepdn&270=Internal%20Pwr.%20FETs&tree=powersupplies](http://para.maximintegrated.com/en/search.mvp?fam=stepdn&270=Internal%20Pwr.%20FETs&tree=powersupplies)
与上一种情况类似，但最小值/最大值可以显示在滑块上。

有人可以给我一些指导来实现像这两个这样的滑块吗？

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-01T18:46:59.910

[jQuery UI Slider Documentaton](http://api.jqueryui.com/Slider/)清楚地描述了如何在链接中自定义滑块。请参阅[演示](http://jqueryui.com/Slider/)。

# java - Jpanel 中的动画组件

> ID：13244063
> 
> 赞同：1
> 
> 时间：2012-11-06T03:47:37.820
> 
> 标签：java, swing, user-interface, awt

我有这个想法，我想在我的项目中实施。我知道这是可行的，但我不知道从哪里开始。

我有一个 JPanel，里面会有一个 Jbutton、一个 JLabel、一个 ComboBox 和一个 JtextArea。

原来，我的面板上只有 JtextArea 和 JButton。

当我点击按钮时，Combobox 和 JLabel 将滑入或淡入，或下拉或事件旋转。

那么我将如何做到这一点，我知道我必须使用图形 g，repaint()。做 Jlabel 很容易，但是组合框呢？

我是否应该将组合框和 Jlabel 添加到单独的 Jpanel 中并使该面板动画化。但即便如此，我也不知道如何使该面板运动。

请帮助我，示例将不胜感激

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T03:51:12.167

要开始使用，您可能需要研究以下术语：

*   幻灯片布局（感谢@Andrew Thompson）
*   设置位置
*   TimerTask（我认为，或者可能只是 Timer）
*   破坏图形对象

一旦您了解了这些内容，您将能够做出您所询问的设计决策。

听起来您将拥有一个带有幻灯片布局的子面板。尽可能不要使用空布局。

您将在计时器任务中为每个刻度设置其位置或样式。

如果您正在设置样式，则需要克隆您的图形对象以避免“破坏”它 - 也就是说，在图形对象的副本上工作，因此在您使用时不会意外更改或重新绘制原始对象正在努力。

# drop-down-menu - 如何在悬停时制作 Bootstrap 的下拉菜单？

> ID：13244067
> 
> 赞同：30
> 
> 时间：2012-11-06T03:48:19.047
> 
> 标签：drop-down-menu, twitter-bootstrap

如何使 twitter bootstrap 的菜单下拉菜单悬停而不是单击？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-06T12:29:16.927

**1.鼠标悬停**时隐藏*下拉菜单*。

 **```
$(document).ready(function() {
    $('.nav li.dropdown').hover(function() {
        $(this).addClass('open');
    }, function() {
        $(this).removeClass('open');
    });
}); 
```

2.**点击**隐藏*下拉菜单*。

 **```
$(document).ready(function() {
    $('.nav li.dropdown').hover(function() {
        $(this).addClass('open');
    });
}); 
```

[http://jsfiddle.net/7yMsQ/1/](http://jsfiddle.net/7yMsQ/1/)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-06T06:12:20.430

这是我用来让导航栏下拉菜单在悬停时向下滑动而不是仅仅弹出的功能

```
$('.navbar .dropdown').hover(function() {
  $(this).find('.dropdown-menu').first().stop(true, true).delay(250).slideDown();
}, function() {
  $(this).find('.dropdown-menu').first().stop(true, true).delay(100).slideUp()
}); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-11-06T03:48:19.047

虽然[如何在悬停而不是单击时制作 twitter 引导菜单下拉菜单](https://stackoverflow.com/questions/8878033/how-to-make-twitter-bootstrap-menu-dropdown-on-hover-rather-than-click)已被大量投票，但使用较新版本的 Bootstrap，无需破解它。

[http://cameronspear.com/blog/twitter-bootstrap-dropdown-on-hover-plugin/](http://cameronspear.com/blog/twitter-bootstrap-dropdown-on-hover-plugin/)是现有 dropdown.js 的替代品，可让您在悬停时启用。无需修改 CSS。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-05-16T04:35:54.153

你可以简单地通过只使用 css 来做到这一点。在按钮下拉的情况下。

```
 <div class="btn-group btn-hover-group">
      <a href="#" id="selected" class="btn btn-default editor-submit">Action 1</a>
      <a href="#" class="btn btn-default dropdown-toggle"></a>
      <ul class="dropdown-menu pull-right">
        <li><a href="#" id="all" class="editor-submit">Action 2</a></li>
        <li><a href="#" id="matching" class="editor-submit">Action 3</a></li>
      </ul>
    </div> 
```

已从`data-toggle="dropdown"`_`<a href="#" class="btn btn-default dropdown-toggle"></a>`

```
.btn-hover-group > a:hover ~ ul{
 display:block;
}
.btn-hover-group > .dropdown-menu:hover{
 display:block;
} 
```

我希望这足以满足您的目的。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-06-18T23:32:45.627

你可以使用这样的引导程序 4 ..

```
<div class="dropdown">
  <button class="dropbtn">Dropdown</button>
  <div class="dropdown-content">
    <a href="#">Link 1</a>
    <a href="#">Link 2</a>
    <a href="#">Link 3</a>
  </div>
</div> 
```

然后在下面定义类属性值..它应该可以工作

```
.dropbtn {
    background-color: #4CAF50;
    color: white;
    padding: 16px;
    font-size: 16px;
    border: none;
}

.dropdown {
    position: relative;
    display: inline-block;
}

.dropdown-content {
    display: none;
    position: absolute;
    background-color: #f1f1f1;
    min-width: 160px;
    box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);
    z-index: 1;
}

.dropdown-content a {
    color: black;
    padding: 12px 16px;
    text-decoration: none;
    display: block;
}
.dropdown:hover .dropdown-content {display: block;} 
```****

# c# - asp.net ashx 图像简单示例未编译

> ID：13244069
> 
> 赞同：0
> 
> 时间：2012-11-06T03:48:27.863
> 
> 标签：c#, asp.net, ashx

我正在尝试从[http://www.dotnetperls.com/ashx](http://www.dotnetperls.com/ashx)获取这个简单的示例。

当我添加 '<%@ WebHandler Language="C#" Class="Handler" %>' 第一行时，编译器会突出显示每一行并根据屏幕截图给出两个错误。

我已经尝试过 Visual Studio 构建“内容”和“编译”的操作，但没有区别。

[![截屏](../Images/1d3647f154622d659f2cd7bb88b20083.png)](https://i.stack.imgur.com/lnduU.png)

我必须在这里遗漏一些简单的东西！？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T03:58:13.143

从 .ashx.cs 文件中删除 '<%@ WebHandler Language="C#" Class="Handler" %>'。这是针对 .ashx 文件的。

要查看 .ashx 文件的内容，请右键单击 .ashx 文件并单击查看标记，如下面的屏幕截图所示。

![在此处输入图像描述](../Images/f351b7c6448401698f31c2f125c51afa.png)

# javascript - ICanHaz 未检测到模板

> ID：13244072
> 
> 赞同：0
> 
> 时间：2012-11-06T03:48:46.430
> 
> 标签：javascript, template-engine, icanhaz.js

我已经检查了关于这个主题的其他帖子，但没有一个符合我的问题。这是我的模板的代码：

```
<script id ="postingcell" type="text/html">
    <li class="postinglistcell">
        <div class = "postinfowrapper">
            <table class="centermargins">
                <tr>
                    <td>
                        <div class="posttitle">{{Title}}</div>
                    </td>
                </tr>
            </table>
        </div>
    </li>
</script> 
```

这是我调用 ICH 的代码：

```
$(document).ready(function() {
    var p = ich["postingcell"](thisobj);
}); 
```

我可以得到一个错误，告诉我`ich["postingcell"]`没有定义，但它已经在上面的脚本标签中。有谁知道我在这里做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T04:11:19.773

ICanHaz 还使用 jQuery 进行设置。一个可能的原因是您的代码在**ich.grabTemplates()**调用之前运行。

```
if (ich.$) {
    ich.$(function () {
        ich.grabTemplates();
    });
} 
```

您可以尝试在代码中调用**ich.grabTemplates()**：

```
$(document).ready(function() {
    ich.grabTemplates();
    var p = ich["postingcell"](thisobj);
}); 
```

# ios - 如何从 iOS 应用程序打开 Facebook 时间线？

> ID：13244074
> 
> 赞同：0
> 
> 时间：2012-11-06T03:48:56.707
> 
> 标签：ios, facebook

如何从 iOS 应用程序打开 Facebook 时间线？我试过这个[网址](https://stackoverflow.com/questions/10416338/open-a-facebook-link-by-native-facebook-app-on-ios)，例如

```
fb://profile/Google 
```

它会打开我的个人时间线。我错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T04:27:33.537

终于搞定了。以下是获取它的一些步骤：

> 1.  [http://graph.facebook.com/profilename](http://graph.facebook.com/profilename)
> 2.  寻找“id”并得到它。
> 3.  fb://profile/retrivedIdFromStep2

# python - 为什么在 Python 的正则表达式中使用 'r'？

> ID：13244076
> 
> 赞同：2
> 
> 时间：2012-11-06T03:49:20.970
> 
> 标签：python, regex

> **可能重复：**
> [Python 中的“u”和“r”字符串标志到底是什么，什么是原始字符串字面量？](https://stackoverflow.com/questions/2081640/what-exactly-do-u-and-rstring-flags-in-python-and-what-are-raw-string-litte)

```
p = re.compile(r'(\b\w+)\s+\1')

p.search('Paris in the the spring').group() 
```

`r`第一行是什么意思？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T03:50:41.203

`r`指定 Python 中的原始字符串，它具有与标准字符串不同的规则，例如您不必转义反斜杠和其他特殊字符。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-06T03:52:21.420

从[`re`文档](http://docs.python.org/2/library/re.html)中：

> 解决方案是对正则表达式模式使用 Python 的原始字符串表示法；在以 'r' 为前缀的字符串文字中，反斜杠不会以任何特殊方式处理。所以 r"\n" 是一个包含 '\' 和 'n' 的两个字符的字符串，而 "\n" 是一个包含换行符的一个字符的字符串。通常，模式将使用这种原始字符串表示法在 Python 代码中表示。

# python - 我可以在 python 输入缓冲区中插入可删除的字符吗？

> ID：13244081
> 
> 赞同：7
> 
> 时间：2012-11-06T03:49:46.617
> 
> 标签：python

我想自动缩进控制台应用程序的下一行，但用户需要能够将其删除。 `sys.stdout.write`并`print`制作不可删除的字符，我无法写入 sys.stdin （据我所知）。我本质上是在尝试进行智能缩进，但我只能嵌套越来越深。关于如何爬回来的任何想法？

编辑：我应该注意到这是使用 IronPython 的 Windows 程序的一部分。虽然我可以做一些更精彩的事情（并且可能在未来），但我希望以很少的努力作为起点，快速获得相当愉快的体验。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T07:11:06.203

该[`cmd`](http://docs.python.org/2/library/cmd.html)模块提供了一个非常简单的界面，用于为您的程序创建命令行界面。它可能无法将一些缓冲区字符放在下一行的前面，但如果您正在寻找一种明显的方式让您的用户知道该命令已返回，它可以在每个开头提供一个类似于 shell 的提示线。如果您已经为您的程序定义了函数，那么将它们集成到处理器中只需编写一个访问该函数的处理程序即可：

```
import cmd
import math

def findHpyot(length, height):
    return math.sqrt(length **2 + height **2)

class MathProcessor(cmd.Cmd):
    prompt = "Math>"

    def do_hypot(self, line):
        x = raw_input("Length:")
        y = raw_input("Height:")
        if x and y:
            try:
                hypot = findHypot(float(x), float(y))
                print "Hypot:: %.2f" %hypot
            except ValueError:
                print "Length and Height must be numbers"

    def do_EOF(self, line):
        return True

    def do_exit(self, line):
        return True

    def do_quit(self, line):
        return True

if __name__ == "__main__":
    cmdProcessor = MathProcessor()
    cmdProcessor.cmdloop() 
```

使用 cmd 编写交互式 shell 时要考虑的事项

1.  do_ 后面的名称是您的用户将使用的命令，因此在此示例中，可用的命令将是 hypot、exit、quit 和 help。
2.  在不覆盖 do_help 的情况下，调用 help 将为您提供可用命令的列表
3.  您要退出程序的任何调用都应返回 True
4.  如果您想处理来自函数调用的条目，假设您希望能够处理像“hypot 3 4”这样的调用，您可以在函数调用中使用本地行变量

# javascript - 我正在尝试在当前被点击的文本框上添加一个额外的文本框行我该怎么做

> ID：13244085
> 
> 赞同：1
> 
> 时间：2012-11-06T03:50:50.997
> 
> 标签：javascript, html, textbox, onchange

下面给出的当前代码是添加文本框但正在清空当前文本框的内容在当前行上添加额外的文本行正在更改。我正在尝试在 html 中添加一个标签系统，例如 iphone 标签。我该怎么做呢？

```
 <div style="padding:15px;border-bottom:solid 1px #c0bbbb;background:#f3f0f0;border-left:solid 1px #c0bbbb;border-right:solid 1px #c0bbbb;">
  <fieldset>
  <form method="POST" id="hashform" name="hashform" action="/addtags">
<p><input type='text' onchange='generateRow();return false;' name='hashtags[]'></p>
    <div id="tags"></div>
    <br><br>
<input type="submit" name="Submit" value="Add HashTags" />

  </form>
  </fieldset>
</div>

<script type="text/javascript">
  try{document.hashform.hashtag.focus();}
        catch(ex){}
 function generateRow() {
    var d=document.getElementById("tags");
    d.innerHTML+="<p><input type='text'  onchange='generateRow();return false;' name='hashtags[]'></p>";
    }
    generateRow();

  </script> 
```

# php - DI，服务名称约定。为什么没有 viewCache？

> ID：13244087
> 
> 赞同：1
> 
> 时间：2012-11-06T03:50:32.403
> 
> 标签：php, phalcon

[http://docs.phalconphp.com/en/0.6.0/reference/di.html](http://docs.phalconphp.com/en/0.6.0/reference/di.html)

在 public/index.php 中，编码：

```
$di->set('viewCache', function(){

    //Cache data for one day by default
    $frontCache = new Phalcon\Cache\Frontend\Output(array(
            "lifetime" => 86400
    ));

    //Memcached connection settings
    $cache = new Phalcon\Cache\Backend\File($frontCache, array(
            "cacheDir" => "../apps/caches/"
    ));

    return $cache;
}); 
```

那，在控制器中，我可以使用 this->view->cache()，为什么不在服务名称约定中使用 viewCache？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T13:42:08.813

`viewCache`可以像这样访问该服务：

```
// In controller
$this->view->cache(); 
```

或者

```
// In controller 
$this->di->get('viewCache'); 
```

或者

```
// In a module or other file
$di = \Phalcon\DI::getDefault();
$di->get('viewCache'); 
```

# c - C、数组、 strlen如何使用

> ID：13244089
> 
> 赞同：1
> 
> 时间：2012-11-06T03:50:36.317
> 
> 标签：c, arrays, memory-management

我正在编写一个简单的程序，并想使用 strlen 函数来获取相关字符串的大小。

然后我想创建一个数组，例如**testarray[strlen(somestring)];**

但它无法编译，错误提示**“错误：可变大小的对象可能未初始化”**。

但是，该字符串的长度不会改变，所以我想我必须以某种方式告诉我的机器。

我只能访问这些标题。

stdio.h 字符串.h

如果有人可以投下一些知识炸弹，那就太好了。:)

编辑：我错了**testarray[strlen(somestring)];** 可以编译但**testarray[strlen(somestring)] = {};** 不能。使用**testarray[strlen(somestring)];** 如果我尝试使用它，我有垃圾。

*谢谢大家，它现在正在使用 memset ！*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T03:54:08.513

你最好的选择是使用“malloc()”

`char *testarray = (char *)malloc(strlen(somestring)+1);`

如果您使用 C++ 编程，我鼓励您使用 vector<>。

C99 引入了“可变长度数组”，但它们不能移植到所有 C 编译器。就个人而言，我不鼓励您使用它们。

剩下的就是“malloc（）”；）

而且，nhahtdh 是非常正确的，请确保您始终执行相应的“free()”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T04:14:34.737

您需要将 temp 中的内存初始化为 0。这就是`{}`原始代码中的空括号所做的。要么使用 memset

```
memset(temp, 0, sizeof(temp)); 
```

或者一个 for 循环（因为你没有 malloc/free 你可能没有 memset）。

```
int length = sizeof(temp);
int i;
for (i = 0; i < length; ++i)
{
   temp[i] = 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T04:32:44.820

testarray[strlen(somestring)] = {};

无法进行上述初始化。因为字符串大小将动态计算（可能会有所不同）。对于静态数组初始化，我们应该提供数组的确切大小。

您可以使用“memset”初始化动态数组。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-27T03:39:29.280

我希望这有帮助

```
#include <stdio.h>
#include <string.h>

int main(int argc, const char * argv[])
{
    char array[256];
    printf ("Enter a sentence: ");
    fgets(array, 256, stdin);
    printf ("The sentence entered is %zu characters long.\n", strlen(array));
    return 0;
} 
```

# c# - 如何在 XAML 电话应用程序中禁用滚动查看器自动移动滚动查看器

> ID：13244090
> 
> 赞同：5
> 
> 时间：2012-11-06T03:50:55.710
> 
> 标签：c#, xaml, windows-phone-8, scrollviewer

当我用鼠标移动和释放它时，如何让我`scrollviewer`不自动移动

`offset`我知道这是正常行为，我需要在释放鼠标时使其保持当前水平。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-11-16T23:43:14.247

您需要将[IsScrollInertiaEnabled 设为](https://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.controls.scrollviewer.isscrollinertiaenabled.aspx)false。

```
scrollviewer.IsScrollInertiaEnabled = false; 
```

资料来源：[IsScrollInertiaEnabled](https://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.controls.scrollviewer.isscrollinertiaenabled.aspx)，[惯性力学](https://msdn.microsoft.com/en-us/library/windows/desktop/dd562169%28v=vs.85%29.aspx)。

# python - 为使用 Maya 模块的 python 脚本构建 exe (Py2exe)

> ID：13244093
> 
> 赞同：1
> 
> 时间：2012-11-06T03:51:07.707
> 
> 标签：python, dll, py2exe, maya

我知道这是一个很长的镜头，但我希望这里有人对此有任何经验，因为我在网上找不到任何提及它的东西。我有一个从 Autodesk Maya 导入模块的 python 脚本。这个 python 脚本是通过 mayapy.exe 而不是 python.exe 运行的，这让我很失望。我宁愿不必在我的脚本中包含一个 bat 文件，而是让用户设置 mayapy.exe 的位置以便使用它。我宁愿使用 py2exe 之类的东西以某种方式将 mayapy.exe 与我的脚本打包在一起。老实说，我对从这里去哪里有点迷茫。

如果我在我的脚本上正常运行 py2exe，它的结果会给我错误，如预期的那样找不到 maya.cmds。有没有办法找到要包含的dll？我尝试在 mayapy.exe 上运行 Dependency walker，但我正在冒险进入新的领域。Maya安装目录base.dll和python26.dll中只用到了2个dll，其余都是系统dll。如果有人尝试过任何这些，请分享，或者如果有人有任何建议或路径，我可以往下看，或者我可以访问的网站，我将非常感激。非常感谢！

Ps如果它有帮助，这是python脚本导入：

```
try:
    import maya.standalone
    maya.standalone.initialize()
except:
    pass
import maya.cmds as cmds
import maya.mel as mel
from time import time as tTime
from glob import iglob
from shutil import copy
from os.path import join
from PyQt4 import QtCore
from PyQt4 import QtGui 
```

脚本的重点是创建一个 maya 文件，在其中做一些事情，然后保存它。使用 Maya 解释器（mayapy.exe）它无需打开 Maya 就可以做到这一点，这正是我想要的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T04:05:19.063

很确定我想做的事情是不可能的。相反，我将我的程序分成两部分，一个需要 Maya 一个不需要，对于需要 Maya 的部分，我只是让它为 Maya 安装位置进行注册表查找并使用它。如果它可能包含我的脚本所需的文件，我相信 Autodesk 无论如何都不会首先批准。

# pandas - 将这些数据放入 Pandas Dataframe 的最简单方法是什么？

> ID：13244095
> 
> 赞同：5
> 
> 时间：2012-11-06T03:51:14.697
> 
> 标签：pandas

我遇到了这个数据集：

[http://archive.ics.uci.edu/ml/machine-learning-databases/auto-mpg/auto-mpg.data](http://archive.ics.uci.edu/ml/machine-learning-databases/auto-mpg/auto-mpg.data)

而且我找不到将其放入 Pandas Dataframe 的简单方法。我手动将其解析为列表列表，然后调用 Dataframe 构造函数，但是否有更简单的方法来执行此操作。谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-06T05:08:52.053

尝试使用`pandas.read_fwf`并指定列宽列表（包括空格）：

```
In [35]: url = 'http://archive.ics.uci.edu/ml/machine-learning-databases/auto-mpg/auto-mpg.data'

In [36]: widths = [7, 4, 10, 10, 11, 7, 4, 4, 30]

In [37]: df = pd.read_fwf(url, widths=widths, header=None, na_values=['?'])

In [38]: df.irow(0)
Out[38]: 
X0                              18
X1                               8
X2                             307
X3                             130
X4                            3504
X5                              12
X6                              70
X7                               1
X8    "chevrolet chevelle malibu"

Name: 0 
```

# sql-server-2005 - 使用 CTE 递归 SQL Server 2005 访问其他节点信息

> ID：13244096
> 
> 赞同：2
> 
> 时间：2012-11-06T03:51:40.883
> 
> 标签：sql-server-2005, recursion, timeout, common-table-expression

后台表格数据：

```
memberid sponsorid mailfirstname maillastname
1000     NULL      Foo           Chu
1001     1000      Foo1          Chu1
1002     1001      Foo2          Chu2
1003     1002      Foo3          Chu3
1004     1003      Foo4          Chu4 
```

下面的脚本打印出我当前所在的成员。但我也想同时打印该成员的赞助商信息。所以，目前我得到：

```
Level memberid sponsorid mailfirstname maillastname
0     1000     NULL      Foo           Chu
...
2     1004     1003      Foo4          Chu4 
```

但对于 1004 会员，我还想要他们的赞助商：

```
Level memberid sponsorid mailfirstname maillastname sponsorfname sponsorlname
2     1004     1003      Foo4          Chu4         Foo3         Chu3 
```

询问：

```
WITH Heirarchy
AS
(
   SELECT 
      CONVERT( INT , 0 ) [Level],
      T1.memberid,
      T1.sponsorid,
      T1.mailfirstname,
      T1.maillastname
   FROM
      members T1
   WHERE
      T1.memberid = 20000283

   UNION ALL

   SELECT 
      CONVERT( INT , ( TH.[Level] + 1 ) ) [Level],
      T1.memberid,
      T1.sponsorid,
      T1.mailfirstname,
      T1.maillastname
   FROM
      members T1
   INNER JOIN 
      Heirarchy TH ON TH.memberid = T1.sponsorid
)
SELECT * 
FROM Heirarchy 
ORDER BY level, maillastname 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T21:41:33.390

它应该可以帮助你

在下面的脚本中，我检索所有成员及其赞助商

```
WITH Heirarchy
AS
(
   SELECT 
      0 AS [Level],
      T1.memberid,
      T1.sponsorid,
      T1.mailfirstname,
      T1.maillastname,
      T1.mailfirstname AS sponsorfname,
      T1.maillastname AS sponsorlname
   FROM
      members T1
   WHERE
      T1.sponsorid IS NULL
   UNION ALL
   SELECT
      TH.[Level] + 1 AS [Level],
      T1.memberid,
      T1.sponsorid,
      T1.mailfirstname,
      T1.maillastname,
      TH.mailfirstname,
      TH.maillastname
   FROM
      members T1
   INNER JOIN 
      Heirarchy TH ON TH.memberid = T1.sponsorid
)
SELECT * 
FROM Heirarchy
ORDER BY level, maillastname 
```

[**SQLFiddle**](http://sqlfiddle.com/#!3/a342b/1/0)上的演示[](http://sqlfiddle.com/#!3/a342b/1/0)

# django-admin - 如何扩展 django 管理小部件使其仍然是可选的？

> ID：13244106
> 
> 赞同：1
> 
> 时间：2012-11-06T03:52:33.207
> 
> 标签：django-admin, python-2.7, django-widget

我已经在互联网上搜索了几天，找不到任何东西，所以我希望你们能指出我正确的方向。我正在尝试自定义 django 管理员，以便在 URL 字段之后内联显示一个按钮。该按钮出现，并且 javascript 工作，除了标记它`null=True`并且`blank=True`管理员验证一直说该字段是必需的；我希望 url 字段是可选的。

有没有办法让这个字段成为可选的？我假设它是 and 的某种组合`blank=True`，`null=True`但我已经在少数几个地方尝试过，但没有运气。

以下是我认为相关的代码位（另外，我知道小部件中的内联 CSS 是一个坏主意。只有在我让一切正常之前！）。如果您需要查看其他内容，请告诉我。

**模型.py**

```
class Team(models.Model):
    name = models.CharField(max_length=64)
    name_color = models.CharField(max_length=7, default='#000000')
    name_shadow_color = models.CharField(max_length=7, default='#ffffff')
    created = models.DateField(editable=True, default=datetime.now)
    retired = models.DateField(null=True, blank=True)
    url = models.URLField(null=True, blank=True, default=None) 
```

* * *

**管理员.py**

```
class TeamAdmin(admin.ModelAdmin):
    list_filter = ('created', 'retired',)
    list_select_related = True
    list_display = ('name', 'created',)
    search_fields = ('name', )
    ordering = ('name',)
    form = TeamAdminForm 
```

* * *

**admin_forms.py**

```
class TeamAdminForm(forms.ModelForm):
    url = URLActionField()

    class Media:
        js = ('js/jquery-1.8.0.min.js', 'js/admin/teamform.js', )

    class Meta:
        model = Team 
```

* * *

**admin_widgets.py**

```
class URLActionField(forms.TextInput):
    def render(self, name, value, attrs=None):
        if attrs is None:
            attrs = {}

        # TODO: not responsive!!
        if 'style' not in attrs.keys():
            attrs['style'] = 'width: 275px;'
        else:
            attrs['style'] = '%s width: 275px;' % attrs['style']

        attrs['required'] = False
        attrs['blank'] = True
        attrs['null'] = True

        output = []
        output.append(super(URLActionField, self).render(name, value, attrs))
        output.append(' <input type="button" value="%s" style="width: 200px; margin-left: 20px; height: 24px; line-height: 15px;" class="grp-button" id="url-scraper">' % unicode(_(u'Scrape URL for data')))
        return mark_safe(u''.join(output)) 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T01:53:44.460

您需要制作一个自定义小部件并将其与内置 URL 字段一起使用。您正在处理表单域而不是模型域。所以使用'required = False'。除非您有充分的理由，否则请避免在基于字符串的字段上使用 null。如果基于字符串的字段具有 null=True，这意味着它有两个可能的“无数据”值：NULL 和空字符串。

在 Model.py 中：

```
class Team(models.Model):
    ...
    url = models.URLField(blank=True) 
```

在 Admin.py 中附加到内置 AdminURLFieldWidget 输出（不需要 js）：

```
from django.contrib.admin.widgets import AdminURLFieldWidget

class CustomAdminURLFieldWidget(AdminURLFieldWidget):
    def render(self, name, value, attrs=None):
        output = []
        output.append(super(CustomAdminURLFieldWidget, 
            self).render(name, value, attrs))
        if value:
            output.append('<p><a href="%s">%s</a></p>' %(value, value))
        return mark_safe(u''.join(output)) 
```

在 Admin.py 创建一个表单：

```
from models import Team

class TeamAdminForm(forms.ModelForm):
        url = forms.URLField(required=False, widget=CustomAdminURLFieldWidget)
        class Meta:
            model = Team 
```

在 Admin.py 中创建一个 ModelAdmin：

```
class TeamAdmin(admin.ModelAdmin):
    form = TeamAdminForm 
```

# jquery - 为什么双击输入元素会触发 keyup 事件？

> ID：13244110
> 
> 赞同：0
> 
> 时间：2012-11-06T03:52:37.423
> 
> 标签：jquery, double-click, keyup

为输入绑定一个 keyup 处理程序使用 jquery，请参阅： [jsfiddle demo](http://jsfiddle.net/flowerszhong/evuAx/) in chrome version 22.0.1229.94 m

```
<input type="text" value="" id="test"> 
```

绑定事件处理程序：

```
$(function (argument) {
    var input = $("#test");
    input.bind("keyup",function(e){
      console.log("keyCode: " + e.keyCode);
      console.log("which: " + e.which);
    });
   }) 
```

当双击此输入时，将触发 keyup-handler 并输出：

```
keyCode: 67 
which: 67 
keyCode: 17 
which: 17 
```

任何人告诉我为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-14T08:03:43.720

我也有这个问题。但实际上当我退出我的“有道词典”软件后，这个问题就不再发生了。您可以查看您的计算机上是否有此软件或其他类似软件。试着戒掉它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T07:05:00.323

哦不好意思，有一个叫“有道词典”的软件干扰了用户输入并触发了事件。

# c# - 为什么我的查询返回 null

> ID：13244111
> 
> 赞同：-1
> 
> 时间：2012-11-06T03:52:44.043
> 
> 标签：c#, asp.net

我想问为什么查询返回 null 而不是更新我想要的。对不起，我还是`asp.net`新手`c#`

```
myquery = "UPDATE kenderaan SET buatan = " + "'" + carmake + "'" + "," +
          "model = " + "'" + carmodel + "'" + "," +
          "no_enjin = " + "'" + carenjin + "'" + "," +
          "cc = " + carcc + "," +
          "seatCapacity = " + carseat + "," +
          "tahunBuatan = " + caryear + " WHERE no_kenderaan = " + "'" + carid + "'" + "," +
          "AND ic = " + "'" + cusid + "'";

connection = new DbConnection();
connection.Update(myquery); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T04:04:05.093

将您的代码重组为此，使用`Connection`对象，`Command`对象，`using`语句。

```
string myquery = "UPDATE kenderaan SET buatan = @carmake ," +
              "     model = @carmodel ," +
              "     no_enjin =  @carenjin ," +
              "     cc = @carcc ," +
              "     seatCapacity =  @carseat ," +
              "     tahunBuatan = @caryear " +
              "WHERE no_kenderaan = @carid " +
              "     AND ic = @cusid ";

using (MySqlConnection _conn = new MySqlConnection("connectionStringHere"))
{
    using (MySqlCommand _comm = new  MySqlCommand())
    {
        _comm.Connection = _conn;
        _comm.CommandText = myquery;
        _comm.CommandType = CommandType.Text;
        _comm.Parameters.AddWithValue("@carmake",carmake);
        _comm.Parameters.AddWithValue("@carmodel",carmodel);
        _comm.Parameters.AddWithValue("@carenjin",carenjin);
        _comm.Parameters.AddWithValue("@carcc",carcc);
        _comm.Parameters.AddWithValue("@carseat",carseat);
        _comm.Parameters.AddWithValue("@caryear",caryear);
        _comm.Parameters.AddWithValue("@carid",carid);
        _comm.Parameters.AddWithValue("@cusid",cusid);

        try
        {
            _conn.Open();
            _comm.ExecuteNonQuery();
            MessageBox.Show("Updated!");
        }
        catch (MySqlException e)
        {
            MessageBox.Show(e.ToString()); // as mentioned on the comment
        }

    }
} 
```

需要参数化查询的原因：

*   避免 SQL 注入
*   使您的代码更具可读性
*   等等.. :D

来源

*   [**加值**](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlparametercollection.addwithvalue.aspx)
*   [**添加**（**推荐**并将*其作为作业*：D）](http://msdn.microsoft.com/en-us/library/40959t6x.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T03:55:40.000

通过 using方法创建一个`DbCommand`执行`Update`语句。`ExecuteNonQuery()`如果您正在使用，`SQL Server`那么您可以使用这段代码片段：

```
using System.Data.SqlClient;

string query = "UPDATE kenderaan SET buatan = @carmake" +
          ", model = @carmodel" +
          ", no_enjin =  @carenjin" +
          ", cc = @carcc" +
          ", seatCapacity = @carseat" +
          ", tahunBuatan = @caryear" +
          " WHERE no_kenderaan = @carid AND ic = @cusid";

using (SqlConnection conn = new SqlConnection("<connection string>"))
{
    using (SqlCommand cmd = new SqlCommand(query, conn))
    {
        cmd.Parameters.AddWithValue("@carmake", carmake);
        cmd.Parameters.AddWithValue("@carmodel", carmodel);
        cmd.Parameters.AddWithValue("@carenjin", carenjin);
        cmd.Parameters.AddWithValue("@carcc", carcc);
        cmd.Parameters.AddWithValue("@carseat", carseat);
        cmd.Parameters.AddWithValue("@caryear", caryear);
        cmd.Parameters.AddWithValue("@carid", carid);
        cmd.Parameters.AddWithValue("@cusid", cusid);

        conn.Open();
        cmd.ExecuteNonQuery();            
    }
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-06T04:16:58.287

尝试使用此代码代替您的代码：

并确保 varchar 参数与字符串值进行比较。

```
 string myquery = "UPDATE kenderaan SET buatan = '" + carmake + "',model = '"+ 
 carmodel + "',no_enjin = '" +carenjin + "',cc = " + carcc + ",seatCapacity = " + 
 carseat + ",tahunBuatan = " + caryear +
 " WHERE no_kenderaan = '" + carid +  "' AND ic = '" + cusid + "'";

        connection = new DbConnection();
        connection.Update(myquery); 
```

**更新：**抱歉，我刚刚用你的 where 条件更正了你的查询，我刚刚删除了你用来分隔两个条件的逗号。

为避免 SQL 注入攻击，请使用以下之一：

1)`Parameters with Stored Procedures`

2)`Use Parameters with Dynamic SQL`

3)`Constrain Input`

[你可以在这里](http://msdn.microsoft.com/en-us/library/ff648339.aspx)找到更多信息

# jquery - 如何使用 jquery 和复选框获得最终价格

> ID：13244112
> 
> 赞同：3
> 
> 时间：2012-11-06T03:52:45.663
> 
> 标签：jquery, forms, checkboxlist

我是新来的。任何人都可以帮助我如何创建像这个网站这样的表单吗？ [https://www.socialengine.com/buy-social-engine](https://www.socialengine.com/buy-social-engine) 我的意思是复选框组和右侧的总计：299 美元我对此进行了很多搜索，但总是失败。如果有人能给我一个示例代码，我会很高兴。谢谢你。我可以使用这样的东西吗？

```
$(function() {
    var 
    jqDdl = $("#mainselectqs"),
    onChange = function(event) { 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T04:01:39.450

试试这个

**[演示](http://jsfiddle.net/pintu31/97qWc/)**

```
<input type='checkbox' value='10' />10
<input type='checkbox' value='20' />20
<input type='checkbox' value='30' />30
<input type='checkbox' value='40' />40
<input type='checkbox' value='50' />50
<div id='total'></div>

var init_price = 200;
$('#total').html(init_price);
var tot = 0;
$('input:checkbox').change(function(){
   if($(this).is(':checked')){
      tot = Number($('#total').html()) + Number($(this).val());
   } else {
       tot = Number($('#total').html()) - Number($(this).val());
   }

   $('#total').html(tot);
});​ 
```

# android - 在android中录制和播放直播视频

> ID：13244114
> 
> 赞同：4
> 
> 时间：2012-11-06T03:52:48.580
> 
> 标签：android, video, rtsp

如何从 rtsp 链接录制和流式传输实时视频并稍后播放？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T14:33:22.823

我不认为框架直接允许你这样做。如果您想这样做，请安装 ffmpeg 来执行此操作。

# java - 加载应用程序属性时出现加密异常（Java jasypt 加密）

> ID：13244120
> 
> 赞同：4
> 
> 时间：2012-11-06T03:53:19.110
> 
> 标签：java, maven, encryption, spring-3, jasypt

尝试使用 Maven 安装模块时，会抛出以下错误：

```
org.jasypt.exceptions.EncryptionOperationNotPossibleException:
Encryption raised an exception.
A possible cause is you are using strong encryption algorithms and you have not 
installed the Java Cryptography Extension (JCE) Unlimited Strength 
Jurisdiction Policy Files in this Java Virtual Machine 
```

应用程序属性编码如下：

```
app.check.url=ENC(sCO3322RNYdt3wPfO04GoaN9PijwJzUcn9rb4ggHymA\=) 
```

我的弹簧配置如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   xmlns:context="http://www.springframework.org/schema/context"
   xmlns:p="http://www.springframework.org/schema/p"
   xsi:schemaLocation="http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.0.xsd
                       http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd">
<bean id="placeholderConfig" class="org.jasypt.spring.properties.EncryptablePropertyPlaceholderConfigurer">
    <constructor-arg ref="configurationEncryptor"/>
    <property name="ignoreResourceNotFound">
        <value>true</value>
    </property>
    <property name="ignoreUnresolvablePlaceholders">
        <value>false</value>
    </property>
    <property name="locations">
        <list>
            <!-- These always come from the file system in ./conf/appCtx -->
            <value>file:../application.properties</value>
        </list>
    </property>
    <property name="systemPropertiesModeName">
        <value>SYSTEM_PROPERTIES_MODE_OVERRIDE</value>
    </property>
</bean>
<bean id="configurationEncryptor" class="org.jasypt.encryption.pbe.StandardPBEStringEncryptor">
    <property name="config" ref="environmentVariablesConfiguration"/>
</bean>
<bean id="environmentVariablesConfiguration"
      class="org.jasypt.encryption.pbe.config.EnvironmentStringPBEConfig">
    <property name="algorithm" value="PBEWithMD5AndTripleDES"/>
    <property name="passwordEnvName" value="APP_ENCRYPTION_PASSWORD"/>
</bean> 
```

我有 jdk 1.7，它确实有加密所需的 JCE 文件。

关于如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-06T09:19:11.757

您的问题不在于您没有 JCE。你做。但是根据您的配置，您使用的是 TripleDES 算法，这需要安装 JCE“无限强度管辖策略文件”，如错误所示。

这些文件可以从 Oracle 的站点下载（从您下载 JDK 的同一页面）并根据略有不同的许可协议分发，因为您必须确保您不是来自“禁止”国家（伊朗、朝鲜等） )...

请参阅 Jasypt 常见问题解答中的此问题：[http ://www.jasypt.org/faq.html#no-unlimited-strength](http://www.jasypt.org/faq.html#no-unlimited-strength)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-06T04:19:12.153

你没有安装 jce，默认情况下存在。`lib\security`但它没有被访问或使用。请下载 jce 文件并覆盖现有文件。看看你的错误本身`you have not installed the Java Cryptography Extension (JCE)`

1.  请点击此[链接](https://cwiki.apache.org/STONEHENGE/installing-java-cryptography-extension-jce-unlimited-strength-jurisdiction-policy-files-6.html)并解决您的错误。[或]
    2\. [org.jasypt.exceptions.EncryptionOperationNotPossibleException](http://technofes.blogspot.in/2011/10/orgjasyptexceptionsencryptionoperationn.html)

# javascript - 获取页面源代码

> ID：13244123
> 
> 赞同：0
> 
> 时间：2012-11-06T03:53:36.583
> 
> 标签：javascript

我在工作，我们使用具有一定安全性的 Internet Explorer 8。通常，如果我需要获取源代码，我只需右键单击，查看源代码，但我在右键菜单上看不到该选项。

浏览器确实允许地址栏中的代码，所以我想出了这个

```
javascript:alert(document.body.innerHTML) 
```

但是，如果页面非常大，则会出现此问题，因为您无法滚动 Internet Explorer 警告框。什么是我可以用来显示页面源代码的片段，它是可滚动的？

请注意，它是“原始”源还是“渲染”源无关紧要，但如果你有两个选项会很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T04:31:05.913

在 jsFiddle 中准备你的代码片段！

[http://jsfiddle.net](http://jsfiddle.net)

例如，您可以创建一个 pre 元素，将其附加到文档并将文本设置为文档的源！

```
var head = document.head.innerHTML;
var body = document.body.innerHTML;
var element = document.createElement("pre");
element.innerText = "<html><head>" + head + "</head><body>" + body + "</body></html>";
document.body.appendChild(element); 
```

现在删除所有换行符，将其复制并粘贴到地址栏中并运行！它已经过测试；）

`javascript: var head = document.head.innerHTML; var body = document.body.innerHTML; var element = document.createElement("pre"); element.innerText = "<html><head>" + head + "</head><body>" + body + "</body></html>"; document.body.appendChild(element);`

# jquery - 模态关闭时在模态窗口中停止 youtube 视频

> ID：13244124
> 
> 赞同：0
> 
> 时间：2012-11-06T03:54:05.653
> 
> 标签：jquery, youtube-javascript-api

我正在尝试做一些非常简单的事情。我有一个引导模式窗口，我在其中放置了一个 youtube iframe 视频，如下所示：

```
<iframe id='youtube-player' width="560" height="315" src="http://www.youtube.com/embed/AYPePO0oa_o?rel=0&wmode=transparent" frameborder="0" allowfullscreen></iframe> 
```

我想使用 bootstrap 的 close 类来播放视频。我有这个但不工作（显然）

```
$('.close').on('click', function(){
  alert('here you are');
  $('#youtube-player').stopVideo();
}); 
```

这看起来应该很简单，但我不确定我应该做什么？任何帮助，将不胜感激。

提前谢谢，

乔纳森

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-08T16:48:51.360

```
<body>
<div class="modal" id="modalId" >

</div>

<script type="text/javascript" >
$('#modalId').bind('hide', function () {
    var iframe = $(this).find('iframe');
var src = iframe.attr('src');
iframe.attr('src', '');
iframe.attr('src', src);
});
</script>
</body> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T04:52:44.997

我相信这与您开始嵌入 iframe 的方式有关。

看看这个问题，它不完全相同，但很相似：[停止播放所有 YouTube iframe 嵌入？](https://stackoverflow.com/questions/5503833/stop-all-youtube-iframe-embeds-from-playing)

如果您想使用控件，这是 Google 提供的有关如何嵌入 iframe 的 YouTube 开发人员参考：[https ://developers.google.com/youtube/iframe_api_reference](https://developers.google.com/youtube/iframe_api_reference)

那应该有你需要的所有信息。

# neo4j - 如何重启 neo4j ha 集群并更新 graph.db 数据？

> ID：13244128
> 
> 赞同：2
> 
> 时间：2012-11-06T03:54:12.277
> 
> 标签：neo4j

我有一个带有一个主设备和两个从设备的 neo4j ha 集群。我们会定期离线重新生成neo4j数据，然后推送到master，重启集群，希望新数据同步到slave。现在，我们按照这些步骤进行操作。

1.  删除所有 'data/coordinator/version-2' 目录并在所有 neo4j 实例上执行 'bin/neo4j-coordinator stop' 以停止同步。
2.  停止主实例，删除其中的'data/graph.db/*'，并将离线生成的新数据复制到主实例
3.  在所有 neo4j 实例上执行 'bin/neo4j-coordinator start' 以重新启动同步。
4.  使用新数据启动主实例。但奇怪的是，在我们执行下一步之前，从属实例不会同步新数据。
5.  停止 slave1，删除它的 'data/graph.db/*' 并重新启动它。
6.  停止 slave2，删除它的 'data/graph.db/*' 并重新启动它。

我不太了解neo4j的同步机制，想知道有没有更好的方法可以做到这一点，或者如何改进我的步骤。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T17:40:14.730

如果您已经拥有数据的离线副本，并且您可以同时停止所有 3 个实例，则只需先将离线数据复制到所有 3 个实例，而不仅仅是主实例。然后你知道当你启动协调器和数据库时它们都是同步的。另外，我会在删除任何协调器数据之前先停止服务。

# android - 如何列出 Android 中的所有帐户（Facebook、Twitter、Gmail 等）？

> ID：13244130
> 
> 赞同：1
> 
> 时间：2012-11-06T03:55:11.910
> 
> 标签：android

我打算编写一个简单的代码，列出我的 Android 手机中关联的所有帐户，例如 Facebook、Twitter、Gmail、Dropbox 等...

```
 AccountManager am = AccountManager.get(this);
    Account [] acc = am.getAccounts();
    if (acc.length > 0){
        for (int i=0; i<acc.length; i++){
            listedAcc = acc[i] + "\n";
        }
        accounts.setText(listedAcc.toString()); 
```

运行上述编码后，TextView“帐户”只显示我

```
 Account {name=abc@hotmail.com,
             type=com.android.exchange} 
```

我将如何做才能列出我手机中的所有其他帐户...谢谢...

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-06T04:07:28.187

使用字符串并正确连接（`+=`而不是`=`）：

```
AccountManager am = AccountManager.get(this);
Account [] acc = am.getAccounts();
if (acc.length > 0){
    String s = "";
    for (int i=0; i<acc.length; i++){
        s += acc[i] + "\n";
    }
    accounts.setText(s) 
```

# javascript - 动力学，更改阶段/容器或打开新阶段/容器/层

> ID：13244133
> 
> 赞同：1
> 
> 时间：2012-11-06T03:55:45.617
> 
> 标签：javascript, html, canvas, kineticjs

我是动态画布的新手，

我还不能区分阶段、容器、层，我想制作一个有地图的游戏。

在那张地图上，你会看到一些国家。当我点击一个国家时，它会打开一个有房间的新层/容器。

我不知道如何在其上添加点击事件。

例如，我将在[本教程](http://www.html5canvastutorials.com/labs/html5-canvas-animals-on-the-beach-game-with-kineticjs/)中对动物进行点击事件，当我点击动物时，它将在下面的[示例中打开](http://www.html5canvastutorials.com/labs/html5-canvas-shape-tango-with-kineticjs/)

如何在其上添加点击事件？

# mysql - 在mysql中比较同一表中的行

> ID：13244136
> 
> 赞同：7
> 
> 时间：2012-11-06T03:55:55.127
> 
> 标签：mysql

我有一个如下的mysql表

```
id   trader price
111  abc    5 
222  xyz    5.20 
333  abc    5.70 
444  xyz    5 
555  abc    5.20 
```

我需要将第 1 行的价格与第 2 行的价格进行比较，并且根据给定的样本，第 2 行的价格低于第 1 行的价格，这意味着交易者 xyz 增加了一次价格，当我们将第 2 行的价格与第 3 行的价格进行比较时，以同样的方式第 3 行的价格高于第 2 行的价格的价格，这意味着交易商 abc 也增加了一次价格。所以以这种方式，我需要比较整个表格并找出每个交易者增加或减少价格的次数......

我不知道该怎么做，有人可以帮我吗

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-06T04:27:48.830

您可以执行“自连接”（将表连接到自身）来执行查询。这里的棘手部分是知道将行插入表中的顺序，并且只比较顺序（时间）相邻的行。我假设您有某种 TIMESTAMP 列，它会告诉您哪些价格变化发生在之前的价格变化之后。如果不是，那么也许“ID”可以通知您（在较小的 ID 之后插入较大的 ID 行）。

调用您的表“TAB”，使用“TRADER”提供连接，并使用“ID”提供订单，查询将需要三向自连接，如下所示：

```
SELECT a.trader
     , SUM(IF(a.price > b.price, 1, 0)) nbr_incr
     , SUM(IF(a.price < b.price, 1, 0)) nbr_decr
     , SUM(IF(a.price = b.price, 1, 0)) nbr_same
  FROM tab a
  JOIN tab b 
    ON a.trader = b.trader AND a.id > b.id
  LEFT OUTER JOIN tab c 
    ON a.trader = c.trader AND a.id > c.id AND b.id < c.id
 WHERE c.id IS NULL
 GROUP BY a.trader 
```

上面的查询将表连接到自身两次，以便每个选项卡表示以下内容：

*   tab a : 比较最近的行
*   tab b ：要比较的前一行
*   tab c : a & b 之间的一行（不应该存在）

我们对 'tab c' 执行 LEFT OUTER JOIN，因为我们实际上并不希望该行存在。在 where 子句中，我们仅将结果过滤到不存在“tab c”行的结果。

最后，查询对交易者执行“GROUP BY”，并通过比较“a”和“b”行的价格来 SUM()s 的增量和减量。

这是一个有趣的挑战。希望这可以帮助！

约翰...

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-06T04:06:02.490

如果您想跟踪价格变化的历史记录，您将需要设置一个单独的表格。此外，当您提到列时，听起来您的意思是行。

# tomcat - 部署在 Tomcat 中的 JAX-WS webservice(Tricky...)

> ID：13244138
> 
> 赞同：0
> 
> 时间：2012-11-06T03:56:27.877
> 
> 标签：tomcat, jax-ws

我看到很多开发人员只是盲目地按照分步说明将 JAX-WS RI jar 复制到 Tomcat 背书文件夹。也没有看到有人问为什么。

1) 如果 JDK 6 update 4+ 已经包含 JAX-WS API & RI 和 2) Tomcat 6 在 Eclipse 中设置了 JDK 6 udpate 4+

那我们为什么还要把那些 JAX-API jar 复制到 tomcat 的背书文件夹呢？

如果您不知道，请举手并盲目地按照说明进行操作 :) 或者我是少数几个处于黑暗中的开发人员之一？

我有一个假设，如果它符合我的假设或者你的回答更有意义，我会接受你的回答。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T18:59:00.780

大概是使用更新的实现。作为参考，请参阅[jdk jax-ws vs. metro 上的这个问题](https://stackoverflow.com/questions/9625547/jdk6-when-to-use-bundled-jax-ws-implementation-versus-project-metro)以及[这篇 2009 年的博客文章](http://weblogs.java.net/blog/ramapulavarthi/archive/2009/04/tip_for_using_j.html)，其中讨论了如何将认可的 jar 添加到 tomcat（即。[创建 $TOMCAT_HOME/endorsed](http://tomcat.apache.org/tomcat-6.0-doc/class-loader-howto.html)。）从 JDK 6u4 开始，RI 被捆绑带JDK；随后的 jdk 更新[包括更新的参考](https://stackoverflow.com/a/9825076/127971)实现 (RI)：jdk6u31 具有 JAXB API=2.1/RI=2.1.10；JAXWS API=2.1/RI=2.1

# objective-c - RestKit 对象映射失败取决于属性名称

> ID：13244141
> 
> 赞同：0
> 
> 时间：2012-11-06T03:57:32.960
> 
> 标签：objective-c, ios, restkit

我看到 RestKit 和映射对象的一些奇怪行为。在我的目标对象中，如果我有一个名为 'description' 的 NSString * 属性，那么整个映射将失败。将其更改为任何其他名称，或将其注释掉，一切都会成功。无论我是否为该属性设置了地图，都会发生这种情况，并且我可以在简单的测试类中重现它。

服务器返回的 JSON：

```
{
    id = 1;
    name = item1;
},
    {
    id = 2;
    name = item2;
} 
```

我要映射到的对象 SimpleObject.h。请注意，描述和不存在的属性都不在 JSON 中，这意味着我不认为这是因为缺少“描述”：

```
#import <Foundation/Foundation.h>

@interface SimpleObject : NSObject

@property (nonatomic, assign) NSInteger identifier;
@property (nonatomic, retain) NSString *name;
@property (nonatomic, retain) NSString *description;
@property (nonatomic, retain) NSString *nonexistant;

@end 
```

简单对象.m：

```
#import "SimpleObject.h"

@implementation SimpleObject

@synthesize identifier;
@synthesize name;
@synthesize description;
@synthesize nonexistant;

@end 
```

我在我的 AppDelegate 中创建映射：

```
RKObjectManager *objectManager = [RKObjectManager managerWithBaseURLString:@"http://127.0.0.1/test"];

// Setup our object mappings
RKObjectMapping *testMapping = [RKObjectMapping mappingForClass:[SimpleObject class]];
[testMapping mapKeyPath:@"id" toAttribute:@"identifier"];
[testMapping mapKeyPath:@"name" toAttribute:@"name"];

 // Register our mappings with the provider using a resource path pattern 
[objectManager.mappingProvider setObjectMapping:testMapping forResourcePathPattern:@"/products"]; 
```

在我的 didLoadObjects 方法中，我有：

```
- (void)objectLoader:(RKObjectLoader *)objectLoader didLoadObjects:(NSArray *)objects
{
    NSLog(@"Loaded products: %@", objects);

    SimpleObject *obj = [objects objectAtIndex:0];
    NSLog(@"Loaded product ID %d -> Name: %@ ", obj.identifier, obj.name);
} 
```

这输出：

```
Finished performing object mapping. Results: {
    "" =     (
        (null),
        (null)
    );
} 
```

如果我注释掉描述属性（但不存在），那么一切正常：

```
Finished performing object mapping. Results: {
    "" =     (
        "<SimpleObject: 0x8a4d040>",
        "<SimpleObject: 0x8a50130>"
    );
} 
```

映射仅针对此属性名称失败是否有原因？如果我将名称更改为“描述”以外的任何名称，它也会成功。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T04:05:07.027

它与 NSObject 的描述属性冲突。将其重命名为 other（如 desc）。

# mysql - 从其他表中找不到键的表中删除？

> ID：13244144
> 
> 赞同：3
> 
> 时间：2012-11-06T03:58:02.060
> 
> 标签：mysql, sql, subquery

表格1：

*   ID
*   姓名

表 2：

*   ID
*   other_table_id
*   table_1_id
*   ..

基本上我想做的是

```
Delete from table_1 
where id not in (select table_1_id 
                 from table_2 
                 group by table_1_id); 
```

哪个应该起作用，我想知道子查询是否是执行此操作的最佳方法/还有其他方法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-06T04:01:57.030

我更喜欢使用`JOIN`over *subquery*。

```
DELETE a FROM table_a a
            LEFT JOIN table_2 b
                ON a.ID = b.table_1_id
WHERE   b.table_1_id IS NULL 
```

*   [**查看 SQLFiddle 演示**](http://sqlfiddle.com/#!2/a0150/1)

# objective-c - 使用 CNCopyCurrentNetworkInfo 的问题

> ID：13244148
> 
> 赞同：2
> 
> 时间：2012-11-06T03:58:04.210
> 
> 标签：objective-c, ios, ios5, ios4, ios6

我正在使用下面的代码来检索 iPod 连接的 WiFi 网络的 SSID。

```
NSArray *ifs = (id)CNCopySupportedInterfaces();
NSLog(@"%s: Supported interfaces: %@", __func__, ifs);
id info = nil;
for (NSString *ifnam in ifs) {
    info = (id)CNCopyCurrentNetworkInfo((CFStringRef)ifnam);
    NSLog(@"%s: %@ => %@", __func__, ifnam, info);
    if (info && [info count]) {
        break;
    }
    [info release];
} 
```

有时，此代码未返回我的设备连接的网络的正确 SSID。关于为什么未正确检索 SSID 的任何指针？CNCopyCurrentNetworkInfo 包是否依赖于设备的 iOS 版本？

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-04-17T09:16:32.307

1.  将 SystemConfiguration.framework 添加到项目中。

2.  `import < SystemConfiguration/CaptiveNetwork.h >`

3.  ```
    CFArrayRef myArray = CNCopySupportedInterfaces();
    CFStringRef interfaceName = CFArrayGetValueAtIndex(myArray, 0);
    CFDictionaryRef captiveNtwrkDict = CNCopyCurrentNetworkInfo(interfaceName);
    NSDictionary *dict = ( NSDictionary*) captiveNtwrkDict;
    NSString* ssid = [dict objectForKey:@"SSID"];
    NSLog(@"%s ssid : %@",__FUNCTION__, [ssid description]); 
    ```

4.  对于**iOS 12**及更高版本，您必须从功能中启用它。

> 重要 要在 iOS 12 及更高版本中使用此功能，请在 Xcode 中为您的应用启用访问 WiFi 信息功能。当您启用此功能时，Xcode 会自动将 Access WiFi Information 权利添加到您的权利文件和 App ID 中。[文档链接](https://developer.apple.com/documentation/systemconfiguration/1614126-cncopycurrentnetworkinfo)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T04:20:52.590

Yes. **CNCopyCurrentNetworkInfo** is available only in **iOS 4.1** and later.

For more info ,please look at the [developer.apple SystemConfiguration Reference](http://developer.apple.com/library/ios/#documentation/SystemConfiguration/Reference/CaptiveNetworkRef/Reference/reference.html)

you can check the sample code [here](https://stackoverflow.com/questions/13195717/detect-the-name-of-wireless-network/13195734#13195734)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-08-07T20:20:37.190

从 iOS 13 开始，CNCopyCurrentNetworkInfo API 将不再返回有效的 Wi-Fi SSID 和 BSSID 信息。相反，默认返回的信息将是：

SSID：“Wi-Fi”或“WLAN”（中国 SKU 将返回“WLAN”） BSSID：“00:00:00:00:00:00”

如果您的应用程序使用此 API，Apple 现在鼓励您采用不需要 Wi-Fi 或网络信息的替代方法。来自 CNCopyCurrentNetworkInfo 的有效 SSID 和 BSSID 信息仍将提供给 VPN 应用程序、使用 NEHotspotConfiguration 配置当前 Wi-Fi 网络的应用程序以及已获得通过位置服务访问用户位置权限的应用程序。

您可以在最新的 iOS 13 测试版上测试您的应用，以确保其正常运行。如果您的应用程序需要有效的 Wi-Fi SSID 和 BSSID 信息才能运行，您可以执行以下操作： 对于配件设置应用程序，使用 NEHotSpotConfiguration API，它现在可以选择传递您的应用程序期望连接到的 SSID 热点的前缀. 对于其他类型的应用，请使用 CoreLocation API 请求用户同意访问位置信息。

# c++ - 当我尝试在 C++ 中将 char* 转换为 double 时如何检查双溢出

> ID：13244156
> 
> 赞同：-1
> 
> 时间：2012-11-06T03:59:38.137
> 
> 标签：c++, string, casting, double

我想在 C++ 中将 char * 转换为 double。但在此之前，我想检查 char * 是否是正确的双精度数。所以我做了这个代码：

```
bool                    Tools::m_CheckIfDouble(char *p_nb)
{
    if (p_nb == NULL)
        return (false);
    for (unsigned int v_i = 0; p_nb[v_i]; v_i++)
        if ((p_nb[v_i] < '0' || p_nb[v_i] > '9') && (p_nb[v_i] != '.' && p_nb[v_i] != '-'))
            return (false);
    return (true);
} 
```

但我不知道如何检查 char * 是否有双重溢出（如果 char * 的值大于 DBL_MAX 的值或小于 DBL_MIX 的值）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T04:12:11.533

标准库函数`strtod`应该可以解决问题：

```
#include <cstdlib>
#include <cerrno>

double convert(char const * str)
{
    char * e;
    double res = std::strtod(str, &e);

    if (e == str || *e != 0) { /* error (invalid string) */ }

    if ((res == HUGE_VAL || -res == HUGE_VAL) && errno == ERANGE) { /* overflow */ }

    if (res == 0 && errno == ERANGE) { /* underflow */ }

    return res;
} 
```

你明白了；您可以根据自己的要求自定义错误处理。

# objective-c - 如何在 UIView 上移动手指时添加图像？

> ID：13244159
> 
> 赞同：0
> 
> 时间：2012-11-06T04:00:24.987
> 
> 标签：objective-c, uiview, uiimageview, touchesbegan, touchesmoved

在屏幕上移动手指时，我在视图中添加图像时遇到问题。

目前它正在多次添加图像，但将它们挤压得太近，并没有真正跟随我的触摸。

编辑：

我想要的是：

在拍摄或选择图像之后，用户可以从列表中选择另一个图像。我希望用户在视图中触摸并移动他们的手指，所选图像将出现在他们拖动手指的位置，而不会在每个位置重叠。

这有效：

```
-(void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event
{
     UITouch *touch = [touches anyObject];
     currentTouch = [touch locationInView:self.view];

     CGRect myImageRect = CGRectMake(currentTouch.x, currentTouch.y, 80.0f, 80.0f);
     myImage = [[UIImageView alloc] initWithFrame:myImageRect];
     [myImage setImage:[UIImage imageNamed:@"dot.png"]];
     [self.view addSubview:myImage];
     [myImage release];
} 
```

新问题：如何在其中添加空格以使图像在视图上绘制时不那么紧贴？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T04:15:23.263

您可能想更多地解释您的问题，您到底想达到什么目的！如果您不希望图像重叠，可以试试这个！

```
UITouch * touch = [touches anyObject];
touchPoint = [touch locationInView:imageView];
prev_touchPoint = [touch previousLocationInView:imageView];

if (ABS(touchPoint.x - prev_touchPoint.x) > 80 
    || ABS(touchPoint.y - prev_touchPoint.y) > 80) {

   _aImageView = [[UIImageView alloc] initWithImage:aImage];
   _aImageView.multipleTouchEnabled = YES;
   _aImageView.userInteractionEnabled = YES;
  [_aImageView setFrame:CGRectMake(touchPoint.x, touchPoint.y, 80.0, 80.0)];
  [imageView addSubview:_aImageView];
  [_aImageView release];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T04:57:26.520

对不起，因为我在公司，我不能发布太大的数据（代码）。挤压是因为您没有检查接触点与最后一个接触点的距离。检查一个点是否在视图中：`bool CGRectContainsPoint (CGRect rect,CGPoint point);`我的意思是记住`touchesBegan:`. 如果新的触摸`touchesMomved:`大于图像的宽度或左侧，则更新它。并将添加图像视图放在一个方法中并调用它 use `- (void)performSelectorInBackground:(SEL)aSelector withObject:(id)arg`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T06:45:32.677

你也可以使用 UISwipeGestureRecognizer 代替 touchesMoved 方法，同时在屏幕上滑动。在 viewDidload:method 中，

```
UISwipeGestureRecognizer *swipeup = [[UISwipeGestureRecognizer alloc]initWithTarget:self action:@selector(swipedone:)];
swipeup.direction = UISwipeGestureRecognizerDirectionUp;
swipeup.numberOfTouchesRequired=1;
[self.view addGestureRecognizer:swipeup]; 
```

方法定义：

```
-(IBAction)swipedone:(UISwipeGestureRecognizer*)recognizer
{
    NSLog(@"swiped");
    UIImageView* _aImageView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"1.png"]];
    _aImageView.frame = CGRectMake(10, 10, 100, 100);
    _aImageView.multipleTouchEnabled = YES;
    _aImageView.userInteractionEnabled = YES;
    CGPoint point = [recognizer locationInView:recognizer.view];
    [_aImageView setFrame:CGRectMake(point.x, point.y, 80.0, 80.0)];
    [self.view addSubview:_aImageView];
    [_aImageView release];
} 
```

目前我正在使用此代码向上滑动。我认为它会正常工作。一次尝试。

# c# - 修改副本时如何保持通用列表不被修改？

> ID：13244161
> 
> 赞同：3
> 
> 时间：2012-11-06T04:00:42.477
> 
> 标签：c#, list

当我在 lstCopy 中创建原始列表 lstStudent 的副本并将 lstCopy 发送到修改函数时，lstStudent 也会被修改。我想保持这个列表不变。

```
List<Student> lstStudent = new List<Student>();
Student s = new Student();
s.Name = "Akash";
s.ID = "1";
lstStudent.Add(s);
List<Student> lstCopy = new List<Student>(lstStudent);
Logic.ModifyList(lstCopy);
// "Want to use lstStudent(original list) for rest part of the code"

public static void ModifyList(List<Student> lstIntegers) { 
    foreach (Student s in lstIntegers) { 
        if (s.ID.Equals("1")) { 
            s.ID = "4"; s.Name = "APS"; 
        } 
    } 
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T04:18:38.210

您也可以通过使用二进制格式化程序在没有可克隆接口的情况下实现此目的： 注意：作为对象图一部分的所有类都必须标记为可序列化。

```
void Main()
{
   var student1=new Student{Name="Bob"};
   var student2=new Student{Name="Jim"};

   var lstStudent=new List<Student>();
   lstStudent.Add(student1);
   lstStudent.Add(student2);

   var lstCopy=new List<Student>(lstStudent);
   var clone=Clone(lstStudent);

   student1.Name="JOE";

   lstCopy.Dump();
   lstStudent.Dump();
   clone.Dump();

}

public List<Student> Clone(List<Student> source)
{

   BinaryFormatter bf=new BinaryFormatter();
   using(var ms=new MemoryStream())
   {
     bf.Serialize(ms,source);
     ms.Seek(0,0);
     return (List<Student>)bf.Deserialize(ms);
   }
}

[Serializable]
public class Student
{
  public string Name { get; set; }
} 
```

输出：

```
5List<Student> (2 items) 4  
Name 
JOE 
Jim 

5List<Student> (2 items) 4  
Name 
JOE 
Jim 

5List<Student> (2 items) 4  
Name 
Bob 
Jim 
```

代码被格式化以转储到 LINQPad

编辑：这是在无法实施的情况下的一个选项`ICloneable`。适用时，对接口进行编码。换句话说，您可以`ICloneable`在学生对象上实现并使用方法`BinaryFormatter`中的逻辑`Clone()`；但是，作为开发人员，您可以选择自己决定要做什么。选项不一定是建议，建议也不一定是选项。有时您必须尽其所能完成一项任务，这就是选择发挥作用的地方。

这是一种相当广泛接受的深度克隆方法： [如何在 .NET（特别是 C#）中对对象进行深度复制？](https://stackoverflow.com/questions/129389/how-do-you-do-a-deep-copy-an-object-in-net-c-specifically)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-06T04:10:47.077

我会看看ICloneable。你所追求的是一个“深拷贝”。这篇文章中有很多很好的信息：

[如何在 C# 中克隆通用列表？](https://stackoverflow.com/questions/222598/how-do-i-clone-a-generic-list-in-c)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-06T04:39:07.047

使用 LINQ 复制列表的另一种快速方法

```
List<student> oldList = new List<student> { new student{
                                             id=122,
                                             name="John"} };

IEnumerable<student> copy= oldList.Select(item => new student{
                                             id = item.id,
                                             name = item.name });

List<student> newList= new List<student>(copy); 
```

但是最好的选择仍然是实现 ICloneable 来深度复制你的对象

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-06T04:05:30.430

如果您的`Student`类型是类（引用类型），则列表将仅包含对这些实例的引用。这意味着当您复制列表时，复制的列表也将只有仍然指向相同`Student`实例的引用。通过复制您的列表，您只需复制您的引用而不是实例。复制后的内容是这样的：

```
List 1            List 2                     instance S1
ref to S1         ref to S1                  Name: Akash
ref to S2         ref to S2                  ...
...               ... 
```

因此，如果您执行类似的操作`list1[0].Name = "Jim"`，您将更新实例`S1`，并且您会在两个列表中看到更改，因为两个列表都引用同一组实例。

您需要做的不仅是在这种情况下创建列表的克隆，而且还创建列表中所有对象*的*克隆 - 您还需要克隆所有`Student`对象。这称为深拷贝。像这样的东西：

```
class StudentList : List<Student>, ICloneable
{
    public object Clone ()
    {
        StudentList oNewList = new StudentList ();

        for ( int i = 0; i < Count; i++ )
        {
            oNewList.Add ( this[i].Clone () as Student );
        }

        return ( oNewList );
    }
} 
```

你这样称呼它：

```
StudentList oClonedList = lstStudent.Clone () as StudentList; 
```

您还需要通过实现接口使您的`Student`类可克隆。[`ICloneable`](http://msdn.microsoft.com/en-us/library/system.icloneable.aspx)

不过不要忘记，在此之后，您将拥有 2 个独立的列表，其中包含 2 个独立的`Student`对象集 - 修改一个`Student`实例不会影响另一个列表中的学生。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-06T04:45:43.517

您想要列表的深层副本。现在，它是一个浅拷贝。你只有两个对同一个变量的引用。没有像 C++ 等语言那样在 C# 中获取深层副本的简单方法。获得深层副本的一种方法是序列化和反序列化第一个列表。以下是获取对象的深层副本的模板化函数。

```
public static T getDeepCopy<T>( T objectToCopy )
{
    T temp;
    using ( MemoryStream ms = new MemoryStream() )
    {
        BinaryFormatter formatter = new BinaryFormatter();
        formatter.Serialize( ms, objectToCopy );
        ms.Position = 0;
        temp = (T)formatter.Deserialize( ms );
    }
    return temp;
} 
```

您还需要包括这些命名空间：

```
using System.IO;
using System.Runtime.Serialization;
using System.Runtime.Serialization.Formatters.Binary; 
```

然后，您可以像这样调用该函数：

```
lstCopy = getDeepCopy<List<Student>>(lstStudents); 
```

# javascript - 如何在两个 var 为真后添加 +1

> ID：13244167
> 
> 赞同：1
> 
> 时间：2012-11-06T04:01:16.233
> 
> 标签：javascript, html, if-statement, switch-statement

只是想知道无论如何添加+1到带有两个var的var store是真的吗？

使用 switch 或 if/else 哪个更好

```
Var store = 0
Var store1 = 0
Var store2 = 0

var buyer = "";
var seller = "";

switch(buyer){
case 1: buyer = buyer1;break;
case 2: buyer = buyer2;break;
}

switch(seller){
case 1:seller = seller1;break;
case 2:seller = seller2;break;
}

if(buyer == buyer1 && seller == seller1){
store1++
}
if(buyer == buyer2 && seller == seller2){
store2++
}
if(buyer == buyer1 && seller == seller2){
store0++
} 
```

继续以这种方式保持我的代码工作或以任何其他方式以更好的方式改进我的代码？

就像`switch(buyer)"case1" switch(seller)"case2"`那时`store0++ switch(buyer)"case2" switch(seller)"case2"`_`store2++`

现在更简单的方法，请帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T04:10:14.193

您可以通过将值存储在地图中来简化代码。

## 主意

```
store0 = store0 + m[buyer][seller][0]
store1 = store1 + m[buyer][seller][1]
store2 = store2 + m[buyer][seller][2]

m = {
  <value_buyer1>: {
    <value_seller1>: [0, 1, 0],
    ...
  },
  ...
} 
```

## 完整版本

```
var store = 0
var store1 = 0
var store2 = 0

var buyer = "";
var seller = "";

switch(buyer){
  case 1: buyer = buyer1;break;
  case 2: buyer = buyer2;break;
}

switch(seller){
  case 1:seller = seller1;break;
  case 2:seller = seller2;break;
}

m = {};
m[buyer1] = {};
m[buyer1][seller1] = [0, 1, 0];
m[buyer1][seller2] = [1, 0, 0];
m[buyer2] = {};
m[buyer2][seller1] = [0, 0, 0];
m[buyer2][seller2] = [0, 0, 1];

store0 = store0 + m[buyer][seller][0]
store1 = store1 + m[buyer][seller][1]
store2 = store2 + m[buyer][seller][2] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-21T16:15:53.467

因为您的买家和卖家都是数字枚举，所以您可以使用它们的值的组合作为商店的键。`buyer1 & seller2`如果您想去不同的商店，这不起作用`buyer2 & seller1`，但他们去同一家商店，请考虑：

```
var store_count = {};

if (typeof store_count[buyer+seller] === "undefined")
   store_count[buyer+seller] = 0;

store_count[buyer+seller]++; 
```

* * *

另一个如何实现、调用的示例以及一些内部文档：

```
var store_count = {};

function updateStoreCount(buyer,seller){
   // initialize
   if (typeof store_count[buyer+seller] === 'undefined')
      store_count[buyer+seller]=0;

   store_count[buyer+seller]++;

   return store_count;
}

// Example Call:
updateStoreCount(1,2);

/* 
   store[2] == buyer1 and seller1
   store[3] == buyer1 and seller2  -and-  buyer2 and seller1
   store[4] == buyer2 and seller2
*/ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-21T16:41:02.540

如果买家和卖家都是数字索引，我不明白如何切换是必要的。

```
var stores = [0,0,0];

function update(buyer, seller){

    if(buyer==1 && seller==2) stores[0]++;
    if(buyer==1 && seller==1) stores[1]++;
    if(buyer==2 && seller==2) stores[2]++;
} 
```

# sql - SQL 检查约束不能引用其他列

> ID：13244172
> 
> 赞同：1
> 
> 时间：2012-11-06T04:01:51.383
> 
> 标签：sql, oracle

我试图添加这个 sql 签入

```
ALTER TABLE School
add Role check_role
  CHECK (check_role IN ('Teaching Assistant', 'Lecturer', 'Professor')); 
```

我收到以下错误

```
ERROR at line 3:
ORA-02438: Column check constraint cannot reference other columns

SQL> desc School;
 Name                                      Null?    Type
 ----------------------------------------- -------- ----------------------------

 STAFFNUM                                  NOT NULL VARCHAR2(12)
 NAME                                      NOT NULL VARCHAR2(50)
 ADDRESS                                   NOT NULL VARCHAR2(300)
 DOB                                                DATE 
```

我正在尝试使用检查约束 check_role 添加列调用角色

我正在使用 Oracle SQL。

**感谢大家的帮助！**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-06T04:15:57.840

将角色列添加到表中

```
 alter table School
    add (Role   varchar(10)); 
```

将约束添加到角色列。

```
alter table School
  add constraint check_role
  check (Role IN ('Teaching Assistant', 'Lecturer', 'Professor')); 
```

=========

```
ALTER TABLE School ADD COLUMN Role VARCHAR(50) 
CONSTRAINT check_role CHECK 
  (Role IN ('Teaching Assistant', 'Lecturer', 'Professor')); 
```

# sql - RE：将值设置为年龄，但在其他键上出现 null 错误

> ID：13244173
> 
> 赞同：1
> 
> 时间：2012-11-06T04:01:52.790
> 
> 标签：sql, oracle11g

我正在编写一个脚本（setage），它会自动在我的表中设置从出生日期开始的年龄。

这是我的表（mytable）描述：

```
ID, NOT NULL, varchar(20)
DOB, DATE
AGE, int

insert into MYTABLE(AGE)
SELECT TRUNC(MONTHS_BETWEEN(SYSDATE,DOB)/12)
FROM MYTABLE; 
```

但我收到一个错误

```
cannot insert NULL into ("my-PC"."MYTABLE"."ID") 
```

我确信我的表中有几条记录带有 ID 和 DOB 输入，但不是我的年龄。但是为什么系统说由于我的 ID 字段我不能进去？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T04:08:09.427

检查您的数据类型。

*   您的 ID 中有**varchar**。
*   TRUNC() 用于**日期**。
*   而 MONTH_BETWEEN() 返回**浮点**

# ruby-on-rails - Ruby on Rails：如何检查名称的复数形式和单一形式

> ID：13244176
> 
> 赞同：9
> 
> 时间：2012-11-06T04:02:04.033
> 
> 标签：ruby-on-rails, ruby-on-rails-3, introspection, pluralize

我用命令创建了一个匿名模型

```
rails g model Anonymous section_id:integer aid:string fake:bool active:bool 
```

但是迁移中的表名称为匿名

```
class CreateAnonymous < ActiveRecord::Migration
  def change
    create_table :anonymous do |t|
      t.integer :section_id
      t.string :aid
      t.bool :fake
      t.bool :active

      t.timestamps
    end
  end
end 
```

我是对的，匿名的复数形式也是匿名的吗？（英语不是我的母语）。我怎样才能看到 Rails 给我的模型起的复数名称？像`rake routes`什么？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-11-06T04:10:54.123

您可以在 rails 控制台中执行此操作。

```
$ "anonymous".pluralize
=> "anonymous" 
```

或另一个复数词不同的例子。

```
$ "cookie".pluralize
=> "cookies" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-06T04:25:20.890

```
pluralize(count, singular, plural = nil) public 
```

尝试将单数单词复数，除非 count 为 1。如果提供了复数，它将在 count > 1 时使用，否则将使用 Inflector 确定复数形式

例子：

```
pluralize(1, 'person')
# => 1 person

pluralize(2, 'person')
# => 2 people

pluralize(0, 'person')
# => 0 people 
```

为你

```
"anonymous".pluralize 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T05:23:54.780

我只是重命名你的模型。省去自己的痛苦和未来的调试，避免这种潜在的头痛。您可以将“Anonymous”与复数“Anonymouses”一起使用。或者想一个更聪明的名字。

# assembly - 汇编语言作业

> ID：13244178
> 
> 赞同：0
> 
> 时间：2012-11-06T04:02:28.997
> 
> 标签：assembly, computer-architecture, instruction-set

我在汇编中有这个简单的代码：

```
1000  Add        R3,R2,#20
1004  Susbtract  R5,R4,#3
1008  And        R6,R3,#0x3A
1012  Add        R7,R2,R4 
```

我的问题是“和”做了什么......我真的很困惑，我正在做我的功课，我被卡住了。

太感谢了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T04:07:20.317

它`and`在两个源操作数之间进行按位运算，并将结果放入目标操作数。要详细可视化结果，请将每个数字转换为二进制，然后执行`and`. 例如，如果 R0 = 0x1234 且 R1 = 0x8765，则：

```
R0 = 0x1234 =  0001 0010 0011 0100
R1 = 0x8765 =  1000 0111 0110 0101

Result      =  0000 0010 0010 0100
Hex result  =  0x0224 
```

即，结果中的每一位都是`1`当且仅当两个输入操作数中该位置的位都是 1 时。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T04:06:55.333

`0x3A = 00111010b`对于 8 位机器。这看起来像一个 64 位机器，所以在前面加上 56 个零。

它将屏蔽 R3 中除 [starts from 0](1st, 3rd, 4th, 5th and 6th) 之外的所有数字位，从右开始。所有其他位将被无效并存储在 R6 中

例如，如果 R3 包含 0x5848，则 (0x5848 (and) 0x3A) = 0x08 (将存储在 R6 寄存器中)

```
0000 0000 0000 0000 0000 0000 0000 0000 0000 0000 0000 0000 0101 1000 0100 1000
0000 0000 0000 0000 0000 0000 0000 0000 0000 0000 0000 0000 0000 0000 0011 1010 (AND)
--------------------------------------------------------------------------------------
0000 0000 0000 0000 0000 0000 0000 0000 0000 0000 0000 0000 0000 0000 0000 1000
-------------------------------------------------------------------------------------- 
```

AND运算的真值表=

```
A    B    A(and)B
-----------------
0  | 0  |  0
0  | 1  |  0
1  | 0  |  0
1  | 1  |  1
----------------- 
```

# inno-setup - Inno Setup, APP start windows 启动时

> ID：13244181
> 
> 赞同：12
> 
> 时间：2012-11-06T04:02:40.250
> 
> 标签：inno-setup

对于 Inno Setup，我想在 Windows 启动时为 MyAPP Auto Start 创建一个复选框 Task。我的代码如下：

而且，如何编写以下代码 - DO_Set_AutoStart_WhenWindowsStart() ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

```
[Tasks]
Name: "StartMenuEntry" ; Description: "Start my app when Windows starts" ; GroupDescription: "Windows Startup"; MinVersion: 4,4;

[code]

//Do Additional Task - Auto Start when Windows Start 

function NextButtonClick(CurPageID: Integer): Boolean;
var
  Index: Integer;
begin
  Result := True;
  if CurPageID = wpSelectTasks then
  begin
    Index := WizardForm.TasksList.Items.IndexOf('Start my app when Windows starts');
    if Index <> -1 then
    begin
      if WizardForm.TasksList.Checked[Index] then
        MsgBox('First task has been checked.', mbInformation, MB_OK)
        DO_Set_AutoStart_WhenWindowsStart();
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
      else
        MsgBox('First task has NOT been checked.', mbInformation, MB_OK);
    end;
  end;
end; 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-11-06T07:34:53.553

您不需要使用*[code]*部分来添加自动启动应用程序。

有不同的方法来实现这一点，例如

```
[icons]
Name: "{userstartup}\My Program"; Filename: "{app}\MyProg.exe"; Tasks:StartMenuEntry;
Name: "{commonstartup}\My Program"; Filename: "{app}\MyProg.exe"; Tasks:StartMenuEntry; 
```

{userstartup} 和 {commonstartup} 之间的区别（如果不明显的话）是 {userstartup} 影响当前用户的启动菜单条目，而 {commonstartup} 影响目标机器的所有用户。

* * *

## 编辑

您也可以使用注册表来启动应用程序。我添加这个是因为评论中提到的 OP 所描述的方法在 Windows 8 上不起作用（因为缺少开始菜单，我忘记了）。我手头没有要测试的 Windows 8，所以由你来测试它是否适用于 Windows 8。

[注册表中](http://support.microsoft.com/kb/314866)的Run 键自 WinXP 以来就存在，因此您可以将 Windows 配置为从安装程序自动运行程序，添加如下内容：

```
[Registry]
;current user only
Root: HKCU; Subkey: "Software\Microsoft\Windows\CurrentVersion\Run"; ValueType: string; ValueName: "MyProgram"; ValueData: "{app}\MyProg.exe"; Tasks:AutoRunRegistry;

;any user
Root: HKLM; Subkey: "Software\Microsoft\Windows\CurrentVersion\Run"; ValueType: string; ValueName: "MyProgram"; ValueData: "{app}\MyProg.exe"; Tasks:AutoRunRegistry; 
```

不要错过我还将`Tasks`示例中的参数更改为`AutoRunRegistry`.

# ruby-on-rails - 在 ruby on rails 中以渲染部分形式传递整数值

> ID：13244182
> 
> 赞同：0
> 
> 时间：2012-11-06T04:02:45.143
> 
> 标签：ruby-on-rails, ruby

我的任务是将一个整数值传递给另一个部分形式。我的代码是这样的

```
<div class="fields">
  <p>
    <%= f.label :content, "Student" %><br/>
    <%= f.text_field :content %>
    <%= link_to_remove_fields "remove", f %><br />
  </p>
  <h4>Address</h4>
  <% i = 1 %>
  <% f.fields_for :answers do |builder| %>
    <%= render :partial => 'answer_fields', :locals => {:i => i, :f => builder} %>
    <% i = i + 1 %>
  <% end %>
  <p><%= link_to_add_fields "Add Address", f, :answers %></p>
</div> 
```

但是在部分形式中，我遇到了一个错误，例如

```
undefined local variable or method `i' 
```

我的部分形式是

```
<p class="fields">
  <table>
    <tr>
      <td>
        <%= f.label :content, "Address"+i.to_s %>
      </td>
      <td>
        <%= f.text_field :content %>
      </td>
      <td>
        <%= link_to_remove_fields "remove", f %>
      </td>
    </tr>
  </table>
</p> 
```

如何将 i 的值传递给其他部分形式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T04:56:19.467

我看不出上面的代码有什么问题。我什至在我的 rails 应用程序中对此进行了测试，以防我遗漏了什么。

如果没有 :i local，您没有另一个模板调用此部分吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T04:52:25.123

你的代码是正确的。

```
 Please try with this..

   <%= render :partial => 'answer_fields', :locals => {:i => i.to_i, :f => builder} %> 
```

# objective-c - 活动指示器在阻止后继续

> ID：13244186
> 
> 赞同：0
> 
> 时间：2012-11-06T04:03:23.513
> 
> 标签：objective-c, ios

得到这个代码：

```
[self setQRCodeScannerMode:false];
[self.activityIndicator startAnimating];
TBXMLSuccessBlock successBlock = ^(TBXML *tbxmlDocument) {
    if ([[TBXML elementName:tbxmlDocument.rootXMLElement] isEqualToString:@"xxxxxx"]){
        [self setQRCodeScannerMode:true];
    } else {
        [self setQRCodeScannerMode:true];
    }
}; 
```

问题是，当我在方法 [setQRCodeScannerMode] 内将扫描模式设置为 true 时，我正在停止活动指示器。但是惊喜！！！几秒钟后，活动指示器仍在工作并干扰我的视图。

我能做些什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T04:22:33.870

您需要在完成块中停止活动指示器：

```
[self setQRCodeScannerMode:false];
[self.activityIndicator startAnimating];
TBXMLSuccessBlock successBlock = ^(TBXML *tbxmlDocument) {
    if ([[TBXML elementName:tbxmlDocument.rootXMLElement] isEqualToString:@"xxxxxx"]){
        [self setQRCodeScannerMode:true];
    } else {
        [self setQRCodeScannerMode:true];
    }

    [self.activityIndicator stopAnimating];
}; 
```

这假设在主线程上调用完成块。如果不能保证在主线程上调用完成块，您可以这样做：

```
[self setQRCodeScannerMode:false];
[self.activityIndicator startAnimating];
TBXMLSuccessBlock successBlock = ^(TBXML *tbxmlDocument) {
    if ([[TBXML elementName:tbxmlDocument.rootXMLElement] isEqualToString:@"xxxxxx"]){
        [self setQRCodeScannerMode:true];
    } else {
        [self setQRCodeScannerMode:true];
    }

    if ([NSThread isMainThread]) {
        [self.activityIndicator stopAnimating];
    } else {
        dispatch_async(dispatch_get_main_queue(), ^{
            [self.activityIndicator stopAnimating];
        });
    }
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T04:11:29.397

你应该调用 [self.activityIndi​​cator stopAnimating]; 完成后，如果那不适合你，试试这个！

```
[self.activityIndicator performSelector:@selector(stopAnimating) withObject:nil afterDelay:0.1]; 
```

希望有帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T04:07:32.103

您可以做的一件事是在不同线程（即不在主线程）上使用指示器。您可以使用 NSOperationQueue 和 NSInvocationOperation

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-06T04:22:14.510

只需在块后添加此代码

```
 [self.activityIndicator stopAnimating]; 
```

# javascript - 移动输入无法以编程方式更新

> ID：13244193
> 
> 赞同：1
> 
> 时间：2012-11-06T04:04:40.383
> 
> 标签：javascript, jquery, input

所以我有一个`input[type="number"]`（最好有一个`pattern="[0-9]*"`属性来在iOS中调出正确的键盘（iPhone，在iPad上不起作用））

当我以编程方式更新值时，iOS 搞砸了，Android 完全拒绝工作。

我在这里有一个小测试用例：http: [//jsfiddle.net/9QUPe/](http://jsfiddle.net/9QUPe/)

基本上，键盘（至少在 iOS 上）不会给你一个小数位，所以我想为用户添加它。

```
$('input').on('keyup', function(){
    var val = this.value.replace('.','');
    if(val.length <= 2){
        this.value = '.'+val
    }else{
        this.value = val.slice(0,-2) +'.'+ val.slice(-2);
    }
}); 
```

在 Chrome (Win7) 上完美运行 - 但 iOS 不接受零（即使数据保存为字符串），Android 将完全清空输入（无论`pattern`属性是否存在（参见[http://jsfiddle. net/9QUPe/1](http://jsfiddle.net/9QUPe/1)在 Android 上用于此测试用例））。

关于如何让它发挥作用的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T20:08:00.143

我想我可以替换`input type="number"`它`input type="tel"`提供类似的键盘，并在 iOS/Android 上正常工作 - 但会带来额外的字符 ,;+*#-()N...

所以我想出的解决方案是使用`type="tel"`和剥离那些额外的字符。

```
$('input').on('keyup change', function() {
    var val = this.value;
    val = val.replace(/\D/g, '');

    if (val.length <= 2) {
        this.value = '.' + val;
    } else {
        this.value = val.slice(0, -2) + '.' + val.slice(-2);
    }
});​ 
```

（见[http://jsfiddle.net/9QUPe/9/](http://jsfiddle.net/9QUPe/9/)）

# javascript - Knockout JS 嵌套数组。将项目添加到子数组

> ID：13244197
> 
> 赞同：2
> 
> 时间：2012-11-06T04:05:02.817
> 
> 标签：javascript, knockout.js

假设我在 Knockoutjs 中有这样的东西

```
<pre data-bind="text: ko.toJSON($data, null, 2)">
{
    "people":[
        {
            "name":"Thor",
            "meta":[]
        },
        {
            "name":"Hulk",
            "meta":[]
        }
    ]
}
</pre> 
```

Javascript 会是这样的：

```
function SuperheroViewModel() {
    var self = this;
    self.people = ko.observableArray();
    self.people.meta = ko.observableArray();

    self.people.push(new Person({name: 'Thor'}));
    //self.people.push(new Person({name: 'Hulk'}));

    self.addHero= function() {
        self.people.push(
            new Person({
                name: 'Wolverine'
            })
        );

        //self.meta.push(new Meta({sex: 'male'});
    }
}

ko.applyBindings(new SuperheroViewModel());
​ 
```

HTML

```
<button data-bind="click: addHero">Add Hero With Meta</button> 
```

是否可以在“雷神”或“绿巨人”下添加“元”？

我首先想在插入新的父项时添加“元”。第二步是向目标“英雄”添加元数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T04:40:49.817

如果您`addMeta`在 a 的上下文中调用`person`，那么 KO 会将当前数据项作为第一个参数传递给您的函数。

因此，您将能够`item.meta.push`从您的处理程序中调用。

# json - Dojo 商店、Dgrid 和不稳定的条目

> ID：13244201
> 
> 赞同：1
> 
> 时间：2012-11-06T04:05:34.313
> 
> 标签：json, dojo, dgrid, http-content-range

我试图让 dgrid 与 JsonRest 一起工作。我已经实现了一个基于 Perl 的服务器端组件，它发回 JSON 数据。响应数据如下所示：

```
{"id:": 00016, "num": 00016, "range": "15 - 63 (49)", "uid": "0", "ipaddress": "xx.xx.xx.xx", "hostname": "", "referer": "http:\/\/www.facebook.com\/l.php?u=http%3A%2F%2Fasisaid.com%2Fjournal%2Farticle%2F1604.html&h=8e20f", "useragent": "Mozilla/5.0 (Windows; U; Windows NT 6.1; en-US; rv:1.9.2.8) Gecko/20100722 Firefox/3.6.8", "date":1281010282000} 
```

这些散列“行”中的每一个都在一个数组中。当 dgrid 加载时，它会在没有 Range 标头的情况下查询服务器组件，并且服务器组件会返回默认的数据范围。然后，dgrid 再次使用“Range: items=0-24”查询。作为响应，服务器以列​​出的格式提供条目 1-25，并带有响应头“内容范围：项目 0-24/470”。

当 dgrid 请求接下来的 40 个项目时，问题就出现了。它请求“范围：items=23-63”并且服务器成功地满足了请求（我可以使用 WebKit 开发人员工具看到它，它显示数据已被检索）。但是，当我滚动浏览 dgrid 本身时，我看到第 1-25 行，然后它跳到第 40 行。如果我继续滚动，它会继续加载所有 470 个条目，但网格开始四处移动，行变得显着乱序（例如，网格从第 8 行开始，第 1 行出现在第 75 行之后）。

我认为这可能是因为我的 JSON 数据没有包含绝对唯一的 ID，所以我添加了一个带有 idProperty 设置的（“id”）。不去。我还尝试添加 10 行重叠，看看是否有帮助，但这似乎只会让事情变得更糟。

这是我的 Dojo 代码：

```
require(["dojo/_base/declare", "dojo/store/JsonRest", "dojox/data/QueryReadStore", "dgrid/OnDemandGrid", "dgrid/Keyboard", "dgrid/Selection", "dojo/domReady!"], function(declare, JsonRest, QueryReadStore, OnDemandGrid, Keyboard, Selection){

 var store = new JsonRest({
   target: "perlsqllog2.pl",
   sortParam: "sort",
   idProperty: "id"
 });

var grid = new declare([OnDemandGrid, Keyboard, Selection])({
    store: store,
    query: {aid: "1604" },
    queryRowsOverlap: 10,
    columns: {
        num: "ID",
        range: "Debug",
        uid: "SAFARI User ID",
        ipaddress: "IP Address",
        date: "Date"
    },
}, "grid");

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T04:15:00.253

事实证明，我的 JSON 数据中有一个错字。我让它在 JSON 中输出“id:”而不是“id”，这阻止了网格将其视为唯一 id。显然，dgrid 确实需要一个唯一的 ID 才能工作，而且现在提供了一个唯一的 ID，它似乎工作得很好。

# java - Winpcap 数据包转发。Java 包装器

> ID：13244204
> 
> 赞同：0
> 
> 时间：2012-11-06T04:05:54.580
> 
> 标签：java, forwarding, winpcap, arp, spoofing

我正在尝试构建一个能够在基于交换机的 LAN 中嗅探目标主机流量的 winpcap 应用程序。

为此，我正在尝试执行 arp 欺骗。这样，目标主机和逃亡者之间的消息将通过我发送，然后我将能够嗅探它们。

我知道欺骗是如何工作的，我必须发送哪些 arp 数据包以及如何发送它们。**问题在于**转发的东西：默认情况下，我的机器会在到达时丢弃数据包，因为它们不是发往我的 IP 地址的。

我已阅读有关 IPEnableRouter Windows 注册表值的信息，但我更喜欢一些代码来获取它。

我一直在为 WinPcap 使用 Java Wrapper 库（jNetPcap、Jpcap），但我可以使用其他语言。两台计算机都安装了 Windows Vista。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T19:29:15.600

> 默认情况下，我的机器会在数据包到达时丢弃，因为它们不是发往我的 IP 地址的。

如果您将适配器置于混杂模式，则*不应*发生这种情况。大概 WinPcap 的 Java 包装器支持混杂模式；libpcap/WinPcap API`pcap_open_live()`就是这样做的，并且自 libpcap 首次创建以来就一直这样做。

这确实意味着*您的程序*必须进行转发，但是，如果您想玩 ARP 欺骗之类的网络游戏，您可能需要做更多的网络事情，例如数据包转发，而不是您想要的.

# internet-explorer - 如何在 IWebBrowser 控件中的 HTTPS 协商期间检索服务器证书信息

> ID：13244205
> 
> 赞同：1
> 
> 时间：2012-11-06T04:05:57.703
> 
> 标签：internet-explorer, visual-c++, https, security, iwebbrowser2

我理解*HTTPS*就像*HTTP*一样，是IE Web 浏览器控件（即*IWebBrowser2* ）支持的内置*APP* （协议处理程序）。

 **在使用IWebBrowser2*控件创建 HTML 应用程序以加载 Web 内容时，在*HTTPS*握手协商期间，我希望应用程序验证应用程序尝试通信的服务器证书中存在的某些常见字段，并在发现证书可疑时停止发送敏感信息。

有什么方法可以通过已知的*IWebBrowser2*控制接口、方法或覆盖*HTTPS*协议处理程序来实现这一点，或者在托管代码中为 ServerCertificateValidationCallback 等自定义操作注册回调？

非常感谢任何有用的信息和反馈。提前致谢。*

# uitableview - 导航栏下方但表格视图上方的自定义视图

> ID：13244208
> 
> 赞同：1
> 
> 时间：2012-11-06T04:06:33.930
> 
> 标签：uitableview, uinavigationcontroller

我已经在整个互联网上搜索了一个解决方案，但似乎无法让它发挥作用！

我希望在导航栏下方但在表格视图上方添加一个视图，并且该视图将始终可见，包括向下滚动时。

这将很像许多使用分段控件进行额外排序选项的应用程序，但我将使用我自己的自定义按钮而不是 UISegmentedControl

这是一个例子： ![在此处输入图像描述](../Images/c9dcbc4eeb04290d826e3c8ffc11489a.png)

我尝试将视图添加到 talbeView 标题中，但它会滚动。我尝试使用添加到工具栏的 UIBarButtonItem 添加它，并且尝试将它添加到 tableview 所在的视图（这是一个导航控制器）。

我的应用程序的基本设置是导航栏，然后是附加到表格视图的搜索栏，当然还有表格视图。这一切都是以编程方式完成的，我无法对 IB 进行任何调整。有什么方法可以正确实现这一目标吗？任何帮助都会很棒，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T20:42:20.870

使用大多数外部视图作为滚动视图

```
scrollView
    -segmentView
    -tableView 
```

然后

```
-(void)scrollViewDidScroll:(UIScrollView*)scrollView{
    if(scrollView.contentOffset>0){
        segmentView.frame.origin.y = scrollView.contentOffset.y;
    }
} 
```

# python - 防止多重约束sqlite3 python的重复

> ID：13244212
> 
> 赞同：2
> 
> 时间：2012-11-06T04:06:42.290
> 
> 标签：python, sqlite

假设我有一张桌子：

```
Table A:

Id Name     Movie   Comment 

1  Foo     Bar  anything
2  Foo     Bar  anything 
```

在这里我要确保用户不能插入 Foo 和 Bar 两次，但允许他插入 Foo 、 foobar 。防止这种重复的一种解决方案是添加此语句`ALTER TABLE table ADD UNIQUE KEY(Name , Movie).`，这可能是针对 sql 而不是 sqlite。我在 python 中为 sqlite3 编写了与`cur.execute("ALTER TABLE ADD UNIQUE KEY(Name,Movie)")`. 它给了我错误 sqlite3.operationalerror: near "unique" 语法错误。在创建表 A 时有什么可以做的，或者我的 sqlite 查询中是否有任何错误。

帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T04:08:58.607

```
CREATE UNIQUE INDEX IDX_Movies ON table(Name, Movie) 
```

这是标准 SQL，记录在[http://sqlite.org/lang_createindex.html](http://sqlite.org/lang_createindex.html)。（SQLite 的在线文档非常全面）

# php - PHP脚本从POST返回responseText到AJAX？想要使用 Ajax POST 返回消息

> ID：13244221
> 
> 赞同：2
> 
> 时间：2012-11-06T04:07:49.947
> 
> 标签：php, javascript, ajax, xmlhttprequest, responsetext

我正在尝试制定一个方案，其中 Ajax 调用 upload.php 和 upload.php 将在消息中返回成功或失败。我尝试在 php 脚本中使用 echo "successs"，希望 xhr.responseText 会收到该消息。但是 alert(xhr.responseText) 是一个空行。然后我突然想到，xhr.responseText 是否仅适用于 GET 而不适用于 POST？如果是这样，我怎样才能让它到 php 脚本可以返回自定义消息的位置？我不想使用 HTTP 状态代码...我宁愿学习如何在可能的情况下自定义消息。

**请不要使用Jquery。**

```
<?php
$tmp_name = $_FILES['file1']['tmp_name'];
$path = "/trunk";
$name = $path . DIRECTORY_SEPARATOR . $_FILES['file1']['name'];
$success = move_uploaded_file($tmp_name, $name);
if ($success) {
    echo "good";
} else {
    echo "bad";
}
?>
}

function uploadPHP() {
    var xhr = new XMLHttpRequest(),
       form = document.getElementById("uploadForm");

    xhr.open("POST", "php/upload.php", true);
    xhr.send(new FormData(form));
    alert(xhr.responseText);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T04:17:32.187

我会考虑使用以下内容：

```
 xhr.onreadystatechange = function() {
        if(xhr.status==200 && xhr.readyState == 4) {
            alert(xhr.responseText);
        }
    } 
```

由于您正在上传文件，因此需要一些时间来生成响应。每次请求状态发生变化时都会运行此函数，并且只有在一切都完成后才会发出响应。

# google-app-engine - Google App Engine Memcache 没有快速更新

> ID：13244224
> 
> 赞同：0
> 
> 时间：2012-11-06T04:08:02.820
> 
> 标签：google-app-engine, optimization, memcached

我在 Google App Engine (Python) 中使用 Memcache 已经有一段时间了，通常它工作得很好。在过去的几天里，虽然我注意到使用下面示例中的一些代码，当我更新数据库条目后立即更新它时，它没有及时得到它。这是由于将条目存储在数据库中所需的时间长度吗？有什么解决办法吗？

```
# I store the comment here 
c = Comment(content = content, submitter = submitter, group_id=int(group_id), user_id = user_id)
c.put()
# Right after I store the comment I refresh the cache
comment_cache(int(group_id), True) 
```

通常最新的评论不在缓存中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T06:09:18.797

由于最终的一致性，如果`comment_cache()`运行查询（即，不通过键获取），那么您所描述的就是预期的。

一些解决方案：

1.  更改`comment_cache()`为`c`作为参数，以便它明确知道它：`comment_cache(int(group_id), True, c)`.
2.  `comment_cache()`在任务队列中运行。仍然不能保证它会接收新评论，但由于它会在一段时间后运行，它可能会。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-06T05:29:02.893

我和你有同样的问题。

当我在我的数据库中添加一个值时，我更新了我的缓存，但由于查询需要很长时间才能运行，我最后插入的值没有插入到缓存中。

我的解决方案：我有一个更新缓存的函数，现在我添加了我想放入数据库中的值作为参数：

```
def get_values_from_cache_or_database(particular_value = None, update = True):
  key = 'my_key'

  values = memcache.get(key)
    if values is None or update:
      values = db.GqlQuery("SELECT * FROM Table")
      values = list(values)
      if update:
        if particular_value not in values:
          # if we are here, particular_value isn't in your data base (because time 
          # request is  long) but we want the particular_value in the cache so we add 
          # it manually  
          values.append(particular_value)
  memcache.set(key, values)
  return values 
```

因此，例如，我们像这样输入一个值“value1”： `value1.put()` 我们调用此函数以“value1”作为参数刷新缓存： `get_values_from_cache_or_database(value1, True)` 然后我们将获取最新添加的缓存！

# java - Selenium：如何使 Web 驱动程序在执行另一个测试之前等待页面刷新

> ID：13244225
> 
> 赞同：30
> 
> 时间：2012-11-06T04:08:04.080
> 
> 标签：java, selenium, selenium-webdriver

我正在使用 TestNG 中的 Selenium Web 驱动程序编写测试用例，并且我有一个场景，我正在按顺序运行多个测试（请参阅下文）

```
@Test(priority =1)
public void Test1(){
}
@Test(priority =2)
public void Test2(){ 
} 
```

这两个测试都是 AJAX 调用，其中打开一个对话框，执行测试，然后关闭对话框，然后在页面顶部显示一条通知消息，**每次成功测试后页面刷新**。

**问题是：** Test2 不要等待页面刷新/重新加载。假设当 Test1 成功完成时， Test2 将在页面刷新之前启动（即它打开对话框，执行场景等）同时页面刷新（这必然发生在成功执行 Test1 之后）。现在由于页面刷新，由于 Test2 打开的对话框不再存在，然后 Test2 失败。

（另外，我不知道刷新页面需要多长时间。因此，**我不想在执行 Test2 之前使用 Thread.sleep(xxxx)**）

另外，我不认为

```
driver.navigate().refresh() 
```

将通过将它放在 Test2 之前解决我的问题，因为在这种情况下，我的页面将被刷新两次。问题是通过代码发生的刷新（不确定，因为它可能需要 1 秒或 3 秒或 5 秒）

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-11-06T05:15:18.617

如果您正在等待元素呈现，那么

在 selenium rc 中，我们曾经使用`selenium.WaitForCondition("selenium.isElementPresent(\"fContent\")", "desiredTimeoutInMilisec")`

在 web 驱动程序中，U 可以使用它来实现同样的事情

```
WebDriverWait myWait = new WebDriverWait(webDriver, 45);
ExpectedCondition<Boolean> conditionToCheck = new ExpectedCondition<Boolean>()
{
    @Override
    public Boolean apply(WebDriver input) {
        return (input.findElements(By.id("fContent")).size() > 0);
    }
};
myWait.until(conditionToCheck); 
```

这样，您可以在执行 test2 之前等待您的元素出现。

**更新 ：**

如果您正在等待页面加载，那么在 Web 驱动程序中，您可以使用以下代码：

```
public void waitForPageLoaded(WebDriver driver)
{
    ExpectedCondition<Boolean> expectation = new
ExpectedCondition<Boolean>() 
    {
        public Boolean apply(WebDriver driver)
        {
            return ((JavascriptExecutor)driver).executeScript("return document.readyState").equals("complete");
        }
    };
    Wait<WebDriver> wait = new WebDriverWait(driver,30);
    try
    {
        wait.until(expectation);
    }
    catch(Throwable error)
    {
        assertFalse("Timeout waiting for Page Load Request to complete.",true);
    }
} 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-07-27T12:21:00.773

[这](http://automationoverflow.wordpress.com/2013/07/27/waiting-for-page-load-to-complete/)`WaitForPageLoad`是C#.Net中更好且经过测试的实现版本

```
public void WaitForPageLoad(int maxWaitTimeInSeconds) {
    string state = string.Empty;
    try {
        WebDriverWait wait = new WebDriverWait(_driver, TimeSpan.FromSeconds(maxWaitTimeInSeconds));

        //Checks every 500 ms whether predicate returns true if returns exit otherwise keep trying till it returns ture
        wait.Until(d = > {

            try {
                state = ((IJavaScriptExecutor) _driver).ExecuteScript(@"return document.readyState").ToString();
            } catch (InvalidOperationException) {
                //Ignore
            } catch (NoSuchWindowException) {
                //when popup is closed, switch to last windows
                _driver.SwitchTo().Window(_driver.WindowHandles.Last());
            }
            //In IE7 there are chances we may get state as loaded instead of complete
            return (state.Equals("complete", StringComparison.InvariantCultureIgnoreCase) || state.Equals("loaded", StringComparison.InvariantCultureIgnoreCase));

        });
    } catch (TimeoutException) {
        //sometimes Page remains in Interactive mode and never becomes Complete, then we can still try to access the controls
        if (!state.Equals("interactive", StringComparison.InvariantCultureIgnoreCase))
            throw;
    } catch (NullReferenceException) {
        //sometimes Page remains in Interactive mode and never becomes Complete, then we can still try to access the controls
        if (!state.Equals("interactive", StringComparison.InvariantCultureIgnoreCase))
            throw;
    } catch (WebDriverException) {
        if (_driver.WindowHandles.Count == 1) {
            _driver.SwitchTo().Window(_driver.WindowHandles[0]);
        }
        state = ((IJavaScriptExecutor) _driver).ExecuteScript(@"return document.readyState").ToString();
        if (!(state.Equals("complete", StringComparison.InvariantCultureIgnoreCase) || state.Equals("loaded", StringComparison.InvariantCultureIgnoreCase)))
            throw;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-07T04:45:59.160

如果您可以触发 URL 更改，这将起作用：

```
WebDriverWait wait = new WebDriverWait(yourDriver, TimeSpan.FromSeconds(5));
wait.Until(ExpectedConditions.UrlContains("/url-fragment")); 
```

# iphone - 带段控制器的 UIPopOverController

> ID：13244229
> 
> 赞同：1
> 
> 时间：2012-11-06T04:08:26.340
> 
> 标签：iphone, ios, uipopovercontroller, uisegmentedcontrol

我如何`UIPopOverController`在这张图片中显示段控制器，请参考我的任何代码？

![在此处输入图像描述](../Images/9120e95046292af9c79bd98967a8a871.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T04:29:26.533

我已经通过以下代码做到了这一点。我添加了`IBAction`一个按钮并添加了以下代码，它对我来说非常有效。

```
- (IBAction)Test:(id)sender
{
    UISegmentedControl *segment = [[UISegmentedControl alloc] initWithItems:[NSArray arrayWithObjects:@"one",@"two",@"three", nil]];
    UIViewController *tempView = [[UIViewController alloc] init];
    tempView.view.frame = CGRectMake(0, 0, 180, 44);
    [tempView.view addSubview:segment];
    pop = [[UIPopoverController alloc] initWithContentViewController:tempView];
    pop.popoverContentSize = CGSizeMake(180, 44);
    [pop presentPopoverFromRect:CGRectMake(0, 0, 180, 44) inView:self.view permittedArrowDirections:UIPopoverArrowDirectionDown animated:YES];
} 
```

这里`pop`是`UIPopoverController`在 @ 中声明的`interface`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T04:16:17.647

这是出现在`UITextField`或中的标准菜单`UITextView`。您无需编写任何代码即可在您自己的文本字段或文本视图中获取该菜单。只需在与光标相同的位置点击文本字段或文本视图或双击以选择一些文本，菜单将自动出现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T05:37:57.643

试试这个[WEPopover](https://github.com/werner77/WEPopover)。您可以使用它并在其中添加您的段控制器。您可能必须为这种外观定制段控制器的外观。

# android - 无法跟踪 Android 视图更改

> ID：13244231
> 
> 赞同：0
> 
> 时间：2012-11-06T04:09:08.860
> 
> 标签：android, eclipse, debugging

我是 Android 新手，到目前为止在制作我的第一个应用程序方面做得很好。感谢大家使这个网站成为一个很好的资源。

在我的应用程序中，当屏幕方向发生变化时，我将数据打包传递以重建片段。发生这种情况时，我正在重建包含微调器、编辑文本和另一个微调器的表格布局中的行。当片段完成加载时，所有行都包含方向更改之前最后一行的信息。例如：

b4 方向变化：

美国广播公司

定义

吉

方向改变后：

吉

吉

吉

通过在旋转屏幕时跟踪调试工具中的视图，我发现值已正确传递，并且值已在 onActivityCreated 方法中正确设置在新行中。在此之后，onStart 和 onResume 方法在不更改值的情况下运行。然后在 onResume() 和片段加载之间的某个时间点，这些值会发生变化。我通过将 onItemSelectedListener 附加到微调器并跟踪它何时被调用来解决这个问题。我对片段生命周期的理解是，在Resume之后没有调用其他方法，所以我很困惑。

出了什么问题？在 onResume 之后是否有另一个生命周期方法被调用？有没有办法跟踪将错误值传递给视图的原因？

任何帮助表示赞赏。

吨

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T19:29:23.640

不知道发生了什么，但通过将设置微调器和编辑文本视图的值的代码移动到 onResume 调用来解决这个问题。

# eclipse - “本地主机上的服务器 Tomcat v7.0 服务器无法启动”在终端中工作时没有堆栈跟踪

> ID：13244233
> 
> 赞同：82
> 
> 时间：2012-11-06T04:08:58.820
> 
> 标签：eclipse, tomcat

所以得到了这个在周末之前运行良好的项目（还有其他问题，但至少启动了 Tomcat）。现在，当我尝试启动 Tomcat 服务器时，它会立即给出以下错误：

```
Server Tomcat v7.0 Server at localhost failed to start. 
```

但是，我可以通过终端很好地启动 Tomcat，并且这个问题发生在 Eclipse 中（*面向 Web 开发人员的 Eclipse Java EE IDE。版本：Juno Service Release 1 Build id:20121004-1855*）

我搜索了几个论坛试图找到解决方案，但无济于事！请帮助有需要的人。

* * *

## 回答 #1

> 赞同：108
> 
> 时间：2013-07-08T06:13:17.817

1.  从 Windows 中打开服务器选项卡 → 显示视图 → 服务器菜单

2.  右键单击服务器并将其删除

3.  通过“新建”→“服务器”选项卡上的服务器来创建新服务器

4.  单击“配置运行时环境...”链接

5.  选择 Apache Tomcat v7.0 服务器并将其删除。这将删除 Tomcat 服务器配置。这是很多人***犯错误的地方——他们删除了服务器但没有删除运行时环境。***

6.  单击确定并立即退出上面的屏幕。

7.  从下面的屏幕中，选择 Apache Tomcat v7.0 服务器并单击下一步按钮。

8.  浏览到 Tomcat 安装目录

9.  单击下一步并选择您要部署的项目：

10.  添加项目后点击完成

11.  现在启动您的服务器。这将解决您的服务器超时或旧服务器配置的任何问题。此解决方案还可用于修复“未进行端口更新”问题。

* * *

## 回答 #2

> 赞同：60
> 
> 时间：2012-11-06T04:32:07.473

要解决此问题，您必须删除`.snap`目录中的文件：

```
<workspace-directory>\.metadata\.plugins\org.eclipse.core.resources 
```

删除此文件后，您可以毫无问题地启动 Eclipse。

* * *

## 回答 #3

> 赞同：38
> 
> 时间：2013-08-01T06:30:28.750

要解决此问题，您必须删除以下目录中的**tmp 文件夹**

```
<workspace-directory>\.metadata\.plugins\org.eclipse.wst.server.core 
```

如果删除此文件夹有任何问题，请重新启动 Eclipse，然后再次删除该文件夹。

* * *

## 回答 #4

> 赞同：23
> 
> 时间：2014-08-29T03:53:05.433

就我而言，问题出在`xml`代码中。

我的`web.xml`文件看起来像这样：

```
<!DOCTYPE web-app PUBLIC
 "-//Sun Microsystems, Inc.//DTD Web Application 2.3//EN"
 "http://java.sun.com/dtd/web-app_2_3.dtd" >

<web-app>
    <display-name>Archetype Created Web Application</display-name>

    <servlet>
        <servlet-name>index</servlet-name>
        <jsp-file>index.jsp</jsp-file>
    </servlet>

    <servlet-mapping>
        <servlet-name>index</servlet-name>
        <url-pattern>/</url-pattern>
    </servlet-mapping>

</web-app> 
```

但我把它改成了

```
<!DOCTYPE web-app PUBLIC
 "-//Sun Microsystems, Inc.//DTD Web Application 2.3//EN"
 "http://java.sun.com/dtd/web-app_2_3.dtd" >

<web-app>
    <display-name>Archetype Created Web Application</display-name>

</web-app> 
```

现在服务器正常加载。奇怪的。

* * *

## 回答 #5

> 赞同：17
> 
> 时间：2013-11-23T16:53:39.480

> 本地主机上的服务器 Tomcat v7.0 服务器无法启动。

此错误解决以下三种情况

1.清理项目和服务器

或者

2.从这个目录中删除 .snap 文件

```
<workspace-directory>\.metadata\.plugins\org.eclipse.core.resources 
```

或者

3.从此目录中删除临时文件

```
<workspace-directory>\.metadata\.plugins\org.eclipse.wst.server.core 
```

* * *

## 回答 #6

> 赞同：13
> 
> 时间：2015-05-09T12:43:58.243

我遇到了这个问题，因为我在 servlet 类和 web.xml 中定义了 servlet 映射。

> 您必须仔细检查您是否在您的 servlet 类和 web.xml 中定义了 servlet 映射

1）删除`@WebServlet("...")`

```
@WebServlet("/Login")
public class Login extends HttpServlet {
} 
```

**或者**

2）删除`<servlet></servlet> <servlet-mapping></servlet-mapping>`

```
<servlet>
    <servlet-name>ServletLogin</servlet-name>
    <servlet-class>Login</servlet-class>
</servlet>
<servlet-mapping>
    <servlet-name>ServletLogin</servlet-name>
    <url-pattern>/login</url-pattern>
</servlet-mapping> 
```

* * *

原因：

我使用支持 servlet 3.0 的 apache tomcat 7.0。

使用 Java EE 注释，标准的 web.xml 部署描述符是

选修的。根据 servlet 3.0 规范

[http://jcp.org/en/jsr/detail?id=315](http://jcp.org/en/jsr/detail?id=315)

* * *

## 回答 #7

> 赞同：11
> 
> 时间：2017-06-09T18:53:28.800

上面提到的答案都不适合我。我在我的 Eclipse IDE 中使用 Tomcat 9。因此，我在我的 Eclipse Neon 上尝试了以下步骤。

**步骤#1：**单击`Servers`选项卡以查看您的服务器。就我而言，它如下所示：

[![在此处输入图像描述](../Images/1ee917572d563885e5437de78f6f1c50.png)](https://i.stack.imgur.com/BjCrq.png)

**步骤#2：**右键单击服务器，选择`Properties`，您将看到以下窗口。单击`Switch Location`，它会将位置从默认位置更改为下图所示的位置。单击 ，`Apply`然后`OK`关闭窗口。

[![在此处输入图像描述](../Images/13f7a5ff2bd3472a87d71cf24396e003.png)](https://i.stack.imgur.com/PWyI4.png)

**步骤#3**双击 Tomcat 服务器，这将打开`Overview`选项，如下图所示。当我这样做时，该`Server Locations`部分对我来说是活动的（它在图像中显示为非活动，因为我已经在我的最后这样做并且我的服务器正在运行）并且我选择了第二个单选按钮选项，即`Use Tomcat installation (takes control of Tomcat installation)`. 然后我关闭了这个选项，在提示时保存了更改并启动了我的服务器。它开始工作正常。

[![在此处输入图像描述](../Images/07803f39b28a81a090443c738d70176f.png)](https://i.stack.imgur.com/mjiEy.jpg)

* * *

## 回答 #8

> 赞同：8
> 
> 时间：2016-01-20T15:09:11.653

就我而言，问题出在 web.xml 文件中，我忘记在 url 模式前加上“/”（例如 /login.do）。

正如上面@Ajak6 所提到的，解决我的问题的方法是将servlet API 添加为项目的外部JAR 库。

但是，我找到了一个更好的方法，将 Tomcat 添加到目标运行时，如下所示；

1) 项目 > 属性

2）在侧面菜单上选择“目标运行时”

3）选择Tomcat（点击应用）

4）点击确定

* * *

## 回答 #9

> 赞同：7
> 
> 时间：2013-07-20T06:54:31.520

创建一个新的工作空间也可以解决这个问题。。

* * *

## 回答 #10

> 赞同：6
> 
> 时间：2014-04-25T10:58:21.157

我在我的tomcat服务器中遇到了同样的问题但是当我深入检查时我发现我在我的web.xml文件中添加了一个新标签并且服务器不接受它所以检查你的文件是否发生任何更新然后重新启动你的tomcat并会变好 。

* * *

## 回答 #11

> 赞同：6
> 
> 时间：2017-03-29T14:28:45.387

打开您的 web.xml 文件。（如果你不知道它在哪里，那么只需谷歌它。）它是这样的：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://xmlns.jcp.org/xml/ns/javaee" xsi:schemaLocation="http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_3_1.xsd" id="WebApp_ID" version="3.1">
.
.
.
.
</web-app> 
```

就在该`<?xml version="1.0" encoding="UTF-8"?>`行的下方，添加一个标签`<element>`并在最底部用`</element>`标签关闭它。完毕。

* * *

## 回答 #12

> 赞同：4
> 
> 时间：2016-08-08T10:23:32.547

一秒钟一切正常，然后我的服务器开始给我这个错误。我浏览了这里提到的所有答案，对我有用的是这个简单的解决方案：

删除服务器，然后配置一个新的

如果您确定您没有更改任何内容并且刚刚弹出错误，请不要开始删除 .snap 文件或其他临时文件。这样做只会导致更多的问题。如果错误是由于您所做的一些更改而发生的，那么这个错误肯定是因为 web.xml 文件中的一些错误。

PS 更改工作区绝对不会对您有任何好处，因为如果问题出在您的项目中，那么当您导入项目时，它仍然会出现在新的工作区中！

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2014-03-11T06:58:26.410

尝试在服务器控制台中删除现有的tomcat服务器，如果您没有控制台，则可以转到“显示视图->服务器”，然后通过右键单击它来删除服务器。添加新服务器这肯定会对您有所帮助。

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2014-04-03T11:20:53.223

就我而言，我确实将我的 tomcat 文件夹（其中包含所有文件的文件夹）部署到了另一个地方。

然后，当我启动 eclipse 并尝试使用 jsp 和 servlet 运行我的项目时，我得到了同样的错误。

我在这里尝试了所有答案，但它仍然没有改变任何东西。我的解决方案是将所有 tomcat JAR 文件放入项目库中，如下所示：

1.  转到日食
2.  右键单击您处理的项目 > 构建路径 > 配置构建路径... > 库 > 添加外部 JAR
3.  从 Tomcat/bin 和 Tomcat/lib 中选择所有 JAR 文件
4.  按“确定”

现在您应该在项目的 Libraries 文件夹中找到它们，然后它应该可以工作了。

* * *

## 回答 #15

> 赞同：2
> 
> 时间：2014-09-29T19:17:36.177

我有同样的问题，这里的答案都没有帮助我的情况。因此，经过几个小时的搜索，我找到了适合我的解决方案，我希望它能对其他人有所帮助。

这是任何获得“本地主机上的服务器 Tomcat v7.0 服务器启动失败”的解决方案。在eclipse中配置tomcat服务器并尝试在其上运行项目后出错。

**在eclipse中配置好tomcat服务器后，你需要从你的tomcat中复制“WEB-INF”目录。C:\ ... %TOMCAT_HOME%\webapps\ROOT 和他们你会发现“WEB-INF”只需将它复制并粘贴到你的 Eclipse 项目的 WebContent 文件夹中（覆盖 web.xml 文件）。**

希望这可以帮助。

* * *

## 回答 #16

> 赞同：2
> 
> 时间：2015-01-21T22:24:24.997

在我的情况下，错误是它无法找到 servlet-api.jar。不知道为什么它突然开始给出错误。因为以前它运行没有任何问题。在构建路径选项中提供 servlet-api.jar 后，服务器成功启动。

* * *

## 回答 #17

> 赞同：2
> 
> 时间：2018-06-28T10:34:58.567

1-转到您的工作区目录 » .metadata » .plugins » org.eclipse.wst.server.core 文件夹。

2-删除tmp文件夹。

3-重新启动您的 Eclipse IDE

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2014-07-03T12:01:47.887

在我的 Eclipse 工作区中，通过执行以下步骤解决了它。Window --> Preferences --> Network Connections --> 将“Active Provider”更改为“Direct”，而不是“Native”。你可以试试。

* * *

## 回答 #19

> 赞同：1
> 
> 时间：2015-08-23T06:00:34.053

这个周末我遇到了类似的问题。尝试了上述所有技巧，但没有一个对我有用。（在 Eclipse LUNA 中工作）

然后我分析了在创建一个特定的 servlet 之前，我成功地运行了 Apache Tomcat v7.0。这是“RefreshServlet”，如下所示：

[![RefreshServlet.java](../Images/4c82eaf3118ae5a3825dcafaa158b910.png)](https://i.stack.imgur.com/tr44Z.jpg)

以便练习 servlet 了解“AutoRefresh”的功能。当我从我的应用程序中删除这个 servlet 时，它工作正常，但是当我尝试添加并运行这个 servlet 时，它给出了同样的错误“Apache Tomcat v7.0 无法启动”

不知道为什么，但只有删除这个 servlet 才能正常运行我的应用程序的其余部分。

所以，我的底线建议是，如果没有任何其他技巧在起作用，那么在出现此错误之前尝试删除任何最新的 servlet 或您刚刚创建的任何类，它对于应用程序的其余部分也可能适用。

任何进一步的解释将不胜感激。谢谢

* * *

## 回答 #20

> 赞同：1
> 
> 时间：2016-08-05T08:53:09.183

检查您的 Web 描述符 (web.xml) 或您的 servlet（在您注释的地方，检查类似 '@WebServlet("/servlet_name")' 之类的东西）是否有任何重复项。如果有，请删除它们。

* * *

## 回答 #21

> 赞同：1
> 
> 时间：2019-10-03T11:06:33.960

我通过右键单击“服务器”选项卡中的 Tomcat 服务器并单击“清理 Tomcat 工作目录”来解​​决此问题

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2013-11-05T22:07:34.833

您可以右键单击 apache-tomcat，选择属性，单击恢复默认值。

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2014-02-11T20:58:45.973

在我的情况下，问题是由传递的参数中的语法错误引起的。使用“-D”时，键和值之间有一个空格

IE

```
-DMyArg= MyValue 
```

代替

```
-DMyArg=MyValue 
```

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2014-05-18T18:58:53.980

双击 Eclipse 服务器选项卡中的 apache 服务器。现在将 tomacat 管理端口更改为 8010，http 端口更改为 8082，Ajp 端口更改为 8011。

* * *

## 回答 #25

> 赞同：0
> 
> 时间：2015-05-31T15:49:04.140

如果所有给定的答案都不适合您，那么只需更改您当前的工作区。

文件-> 切换工作区

这将解决你的问题。

* * *

## 回答 #26

> 赞同：0
> 
> 时间：2016-07-25T05:46:24.520

就我而言，问题在于正在运行的另一个 Tomcat 实例。我从服务中停止了它，问题得到了解决

* * *

## 回答 #27

> 赞同：0
> 
> 时间：2016-10-21T11:02:48.890

尝试上述所有步骤后，问题仍未解决。

最后通过以下步骤解决。

1- 检查工作空间目录中的 .log 文件。Java版本的问题

“原因：java.io.IOException：无法运行程序“C:\jdk1.7.0_45\bin\java”：CreateProcess 错误=193，%1 在 java.lang.ProcessBuilder.start 处不是有效的 Win32 应用程序（未知Source) at java.lang.Runtime.exec(Unknown Source) at java.lang.Runtime.exec(Unknown Source) at org.eclipse.debug.core.DebugPlugin.exec(DebugPlugin.java:869) ... 80 更多

原因：java.io.IOException: CreateProcess error=193，%1 不是 java.lang.ProcessImpl.create(Native Method) at java.lang.ProcessImpl.(Unknown Source) at java.lang 的有效 Win32 应用程序。 ProcessImpl.start（未知来源）“

我已经安装了正确的操作系统兼容的 JDK 并且问题已解决。PS：我已经通过eclipse（Window->preference->installed JRE）明确设置了JDK路径，但是在设置了正确的JDK路径之后，它对我来说工作正常。

* * *

## 回答 #28

> 赞同：0
> 
> 时间：2017-04-14T12:54:29.980

**第一次检查您的 Web.xml 是否有多个具有不同名称的 <servlet mapping> 标签** **如果是这样删除不需要的标签并运行..这应该可以正常工作**

**或者**

要解决此问题，您必须删除目录中的 .snap 文件。

**转到您正在使用的 Eclipse 工作区 UsingPath --> workspace.metadata.plugins\org.eclipse.core.resources\snapfile**

**删除快照文件。**

删除此文件后， **删除 Tomcat 服务器** **，然后删除选择为 Apache Tomcat 的服务器运行时。然后再次添加服务器并转到项目-->属性-->项目方面->右侧，您将找到详细信息和运行时选项卡。单击运行时并选中已经存在的 Apache 框（如果不存在添加它）**

更改端口号并运行它。

* * *

## 回答 #29

> 赞同：0
> 
> 时间：2017-08-27T15:00:18.170

尝试从 Maven 本地存储库（.m2）中删除所有项目的依赖项。

路径：**C:\Users\user_name\.m2\repository**

关闭eclipse并再次打开它会自动下载所有依赖项。

* * *

## 回答 #30

> 赞同：0
> 
> 时间：2017-11-07T16:26:21.517

我通过简单地关闭eclipse中的所有其他项目来解决我的问题。

* * *

## 回答 #31

> 赞同：0
> 
> 时间：2018-02-09T07:09:09.857

[![在此处输入图像描述](../Images/fa29bad4ac047e74cbd4f060879816b2.png)](https://i.stack.imgur.com/ZRthi.jpg)

考虑在运行 serverlet 之前**清理您的项目。**这将删除所有损坏的文件。

* * *

## 回答 #32

> 赞同：0
> 
> 时间：2018-06-22T14:10:33.063

问题可能是您的 servlet 中的注释，请查看您是否正在为您的 servlet 的 URL 模式使用注释。

尝试将项目方面（动态 web 项目）版本更改为 2.5 并在 web.xml 中定义所有 servlet 条目，这应该可以解决问题。

您可以通过在项目属性中更改它来更改 Eclipse 中的项目构面版本->在搜索框中搜索“构面”将动态 Web 项目构面版本更改为 2.5

* * *

## 回答 #33

> 赞同：0
> 
> 时间：2018-11-23T03:43:18.917

创建新项目并将所有文件导入新项目。它对我有用....

* * *

## 回答 #34

> 赞同：0
> 
> 时间：2020-07-22T19:23:00.483

就我而言，从 web.xml 中删除 servlet 标记并在 tomcat lib 文件夹中添加缺少的库解决了这个问题。

# javascript - 子字符串不适用于返回的 ajax 数据对象字段

> ID：13244234
> 
> 赞同：1
> 
> 时间：2012-11-06T04:09:14.497
> 
> 标签：javascript, jquery

我不确定为什么这不起作用，但 CellPhone 的返回值是格式`9999999999`

我需要在其中注入破折号，`999-999-9999`所以我尝试了这个：

```
$("#member-cellPhone-value").html(data[0].CellPhone.substring(0, 2) + '-' + data[0].CellPhone.substring(3, 5) + '-' + data[0].CellPhone.substring(6,9)); 
```

当页面呈现时，它实际上没有呈现任何内容。但是，如果我只做一个严格的 data[0].CellPhone ，它确实会呈现 9999999999 格式

所以换句话说，我尝试添加这些破折号是行不通的，实际上完全隐藏了这个值

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T04:15:16.023

检查是否`data[0].CellPhone`有一个值，它是一个*字符串*而不是一个**数字**。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-06T04:16:27.397

首先确保`data[0].CellPhone`是字符串类型。如果不是，您可以将其转换为字符串`data[0].CellPhone.toString()`

其次，您的拆分逻辑是错误的，应该如下

```
x.substring(0,3) + '-' + x.substring(3, 6) + '-' + x.substring(6,10) 
```

其中`x`是包含电话号码作为字符串的变量。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-06T04:25:43.603

正如每个人所说，确保你`.toString()`，绝对听起来像它的 typeof *number*。

获取数字的另一种方法是使用简单的 regex `.match()`，我认为当您将数字放入 html 时，它也更具可读性。

```
var p = data[0].CellPhone.toString().match(/(\d{3})(\d{3})(\d{4})/);

$("#member-cellPhone-value").html(p[1] '-' + p[2] + '-' + p[3]); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-06T05:37:52.873

```
<script type="text/javascript">
var number = '9999999999';
var changedNumber = number.replace(/(\d{3})(\d{3})(\d{4})/, "$1-$2-$3");

alert(number);
</script> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-06T04:40:39.727

用简单的js试试这个

```
<script type="text/javascript">
var phonenum = '9999999999'; 
var phone= phonenum.substring(0, 2) + '-' + phonenum.substring(3, 5) + '-' +      phonenum.substring(6,9);
alert(phone);

</script> 
```

# java - Java比较GridLayout面板上的两个图像/按钮数组

> ID：13244235
> 
> 赞同：1
> 
> 时间：2012-11-06T04:09:43.703
> 
> 标签：java, arrays, image, swing, shuffle

我在 JPanel 上有一个网格布局，并添加了 JButtons，每个 JButtons 都带有一个图标，并且它们按正确的顺序一起形成了一张图片。

然后我打乱图像数组（它实际上是使用 java 代码裁剪的单个图像并存储在数组中），然后将每个 JButton 图标设置为一个新图像。现在这给了我们一个很好的“拼图”类型的图片，最终用户可以交换瓷砖以将其放回原处。

我唯一的问题是，我不知道如何检查他们是否有 1）将图像放在正确的位置（按钮）和 b）如果所有图像都在正确的位置（按钮），以形成原始图片。

我确实将按钮存储在一个数组中，并将每个图像存储在一个单独的数组中。只有图像被排序，当用户交换两个不同的图块时，只有图像图标被设置。

我的想法是我需要比较 button[0].image == image[0] 等。但是，我不知道该怎么做。

也许我的方法是错误的，还有其他属性或场所可以说服？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T04:24:21.883

这是一个`Java Swing`与您正在开发的简单益智游戏相同的示例。在这里，我使用了数字，但您使用的是图像。

[Java Swing 随机播放游戏](http://www.javabeginner.com/java-swing/java-swing-shuffle-game)

您可以使用按钮名称作为索引。

```
JButton btn[index] = new JButton(index,imageIcon) ; 
```

因此，对于每个移动，您需要检查按钮索引是否有序。如果订购，您的洗牌安排。我希望你能继续前进。玩得开心。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T04:12:53.443

如果我正在实现这一点，我将保留一个未打乱的图像数组（或列表）以及该数组的索引数组（或列表）。用 初始化第二个数组/列表`index[i] = i`。然后打乱索引数组/列表。设置 JButton 图标需要额外的间接级别：`button[i].setIcon(image[index[i]])`. 但它使检查图像是否位于正确位置变得更加容易：`if (index[i] == i)`.

# version-control - 为什么 CVS 分支编号是偶数？

> ID：13244236
> 
> 赞同：0
> 
> 时间：2012-11-06T04:09:59.150
> 
> 标签：version-control, cvs

我对为什么 CVS 的分支号是偶数感兴趣？例如 1.2.0.2。1.2.0.1 是做什么用的？CVS在内部使用它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T16:26:27.567

这是 CVS 的实现细节。所涉及的版本号有一些魔力（有关详细信息，请查看[rcs.h](http://cvs.savannah.gnu.org/viewvc/ccvs/src/rcs.h?view=annotate&root=cvs#l223)和[rcs.c](http://cvs.savannah.gnu.org/viewvc/ccvs/src/rcs.c?view=annotate&root=cvs#l2477)）。

# powershell - 在 PowerShell 中重用 SSH 代理

> ID：13244237
> 
> 赞同：3
> 
> 时间：2012-11-06T04:10:21.650
> 
> 标签：powershell, ssh

我发现[一篇文章](http://www.electricmonk.nl/log/2012/04/24/re-use-existing-ssh-agent-cygwin-et-al/)展示了如何跨多个命令行窗口重用 SSH 代理。这很棒，但是我正在使用 PowerShell 并且完全不喜欢它。

有没有办法从我的 PowerShell 配置文件中获得相同的功能？

**更新**

这是参考帖子的简要概述。

开始`ssh-agent`设置一堆环境变量。

```
SSH_AGENT_PID=1784
SSH_AUTH_SOCK=/tmp/ssh-QzfPveH696/agent.696 
```

`ssh-agent`允许您指定套接字文件名。这就是帖子建议放入您的内容`~/.bashrc`（因为我使用的是 PowerShell，所以不可能）。

```
# If no SSH agent is already running, start one now. Re-use sockets so we never
# have to start more than one session.

export SSH_AUTH_SOCK=/home/fboender/.ssh-socket

ssh-add -l >/dev/null 2>&1
if [ $? = 2 ]; then
   # No ssh-agent running
   rm -rf $SSH_AUTH_SOCK
   ssh-agent -a $SSH_AUTH_SOCK >/tmp/.ssh-script
   source /tmp/.ssh-script
   echo $SSH_AGENT_PID > /home/fboender/.ssh-agent-pid
   rm /tmp/.ssh-script
fi 
```

它设置套接字文件，运行`ssh-add`，如果没有代理正在运行，它会清理一些东西并设置一个。

那么如何才能将其放入 PowerShell 配置文件中呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-11T15:04:03.223

我知道这个问题现在已经很老了，但无论如何我已经解决了。

假设：

1) ssh-agent.exe 是 Mingw32 版本。

2) ssh-agent.exe 在你的 powershell 路径中。

```
 Function Start-SSHAgent{
    param(
        [Parameter(Mandatory=$false,ValueFromPipeline=$true)]
        [string]$socketfile="/p/.ssh-socket",                       # Used as input to ssh-agent, which expects POSIX format paths
        [Parameter(Mandatory=$false)]
        [string]$pidFile="p:\.ssh-agent-pid"                        # Used as input to Out-File which expects Windows format paths
    )
    $env:SSH_AUTH_SOCK=$socketfile
    $agent_is_running = Get-Process | ? { $_.ProcessName -like "ssh-agent*"}
    if($agent_is_running -eq $null){
        $sshAgentOutput = ssh-agent -a $env:SSH_AUTH_SOCK
        $parse = Select-String -InputObject $sshAgentOutput -Pattern "(?m)SSH_AGENT_PID=(\d+)"
        $sshAgentPid = $parse.Matches[0].Groups[1].Value
        $sshAgentPid | Out-File $pidFile
        $env:SSH_AGENT_PID = $sshAgentPid
    }
} 
```

把它放到你的 profile.ps1 文件中，然后你可以运行 Start-SSHAgent （或者你可以把它从函数中取出来让它总是在 powershell 启动时运行。

# php - jQuery-UI：显示可拖动小部件的 X 和 Y

> ID：13244242
> 
> 赞同：0
> 
> 时间：2012-11-06T04:10:16.293
> 
> 标签：php, jquery, forms, jquery-ui

我目前正在使用一个 jQuery UI，我需要将 x 和 y 坐标发送到不同的页面。

我目前正在使用[它](http://api.jqueryui.com/draggable/#option-containment)，其中“可拖动 ui”包含在 510x100 像素的框中。

我需要的是获取可拖动的最终位置的 X 坐标和 Y 坐标，并在一个文本输入（表单）中打印 X 的坐标，在另一个文本输入（表单）中打印 Y。

关于如何做到这一点的任何想法？

```
<style>
.draggable { width: 1px; height: 1px; padding: 0.5em; float: left; margin: 0 1px 1px 0; }
#containment-wrapper { width: 510px; height:110px; border:2px solid #ccc; padding: 10px; }
h3 { clear: left; }
</style>
<script>
$(function() {
    $( "#draggable3" ).draggable({ containment: "#containment-wrapper", scroll: false });
});
</script> <div id="containment-wrapper">

 <div id="draggable3" class="draggable ui-widget-content">
        <p>Motto</p>
 <div id="containment-wrapper">
    <div id="draggable3" class="draggable ui-widget-content">
        <p>Motto</p>

---
Would like to display in a box like this
 <input size="10" type="text" id="mottox" name="mottox" readonly/>
 <input size="10" type="text" id="mottoy" name="mottoy" readonly/> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T04:47:46.107

您可以利用 jQueryUI Draggable 的[停止](http://api.jqueryui.com/draggable/#event-stop)事件。

添加：

```
 stop: function(e , ui) {
            $("#mottox").val($(this).position().left);
            $("#mottoy").val($(this).position().top);
        } 
```

作为 draggable() 的标志（正如您对包含和滚动所做的那样）。一旦拖动停止，这将用可拖动项目的“左”和“上”值填充输入值。

在 jsfiddle 上查看一个工作示例：http: [//jsfiddle.net/9mjJG/1/](http://jsfiddle.net/9mjJG/1/)

除了停止事件，您还可以使用[拖动](http://api.jqueryui.com/draggable/#event-drag)来提供更实时的更新。

# orbeon - 覆盖 persistence-model.xml 在 orbeon 中不起作用

> ID：13244244
> 
> 赞同：0
> 
> 时间：2012-11-06T04:10:47.913
> 
> 标签：orbeon, xforms

我尝试在 resources/config/persistence-model.xml 和 resources/apps/fr/includes/persistence/persistence-model.xml 中编辑 persistence-model.xml。但是，似乎没有被调用？在线是否有任何详细且有效的示例/教程？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T17:12:45.030

我认为的问题是该文件在 3.9.1 中的路径是：

```
WEB-INF/resources/apps/fr/includes/persistence-model.xml 
```

这应该工作！

# mysql - 带有数组的静态单元格

> ID：13244247
> 
> 赞同：1
> 
> 时间：2012-11-06T04:10:48.807
> 
> 标签：mysql, ios

我正在使用 xml 将 mysql 信息导出到 ios，并将其保存在一个数组中。但是，我的表格有静态单元格。我怎么能从数组中调用一个字符串，看看我如何不能使用 objectForIndex....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T04:27:29.140

没有理由不能使用 objectAtIndex: 用数据填充静态单元格。在 tableView:cellForRowAtIndexPath: 方法中，您通常通过其 IBOutlet 返回静态单元格，但没有理由在返回之前不能在该静态单元格中设置标签（或任何其他 UI 元素）的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T04:27:52.667

快速查看文档`NSArray`会告诉您方法的名称不是`objectForIndex:`，而是`objectAtIndex:`. 学习使用参考文档将为您节省无数时间。

顺便说一句 - 你最后几个问题都被标记为 Xcode 和 core-data。为什么？他们都与这些事情无关。

仅供参考 - 这是有用的建议，而不是任何负面评论。:)

# regex - 使用正则表达式匹配未嵌套在锚标记中的图像标记

> ID：13244249
> 
> 赞同：0
> 
> 时间：2012-11-06T04:10:54.390
> 
> 标签：regex, regex-negation

如何使用正则表达式匹配未嵌套在锚标记内的图像？

这是我想要的：

**没有匹配：** `<a href="index.html"><img src="images/default.jpg" /></a>`

**匹配：** `<div><img src="images/default.jpg" /></div>`

**匹配：** `<img src="images/default.jpg" />`

我不擅长正则表达式，但这是我到目前为止提出的，它不起作用：

`[^<a[^>]*>]<img.*?/>[^</a>]`

我不能使用环视，因为 PHP 希望它是特定的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T04:53:52.933

您的困难背后的大部分原因仅仅是 HTML 不是一种常规语言，请参阅：[Coding Horror: Parsing Html the Cthulhu Way](http://www.codinghorror.com/blog/2009/11/parsing-html-the-cthulhu-way.html)

考虑使用足够强大的查询表达式语言来处理 (X)HTML，或者仅使用 DOM 以编程方式获取所有图像标签，然后排除具有`<a>`祖先的标签。

在 PHP5 中，我相信你可以使用`DOMXPath`，使用它变得如此简单：

```
$generated_string = '<a href="index.html"><img src="images/inside_a.jpg" /></a>' .
                    '<div><img src="images/inside_div.jpg" /></div>' .
                    '<img src="images/inside_nothing.jpg" />';

$doc = new DOMDocument();
$doc->loadHTML($generated_string);
$xpath = new DOMXpath($doc);

$elements = $xpath->query("//*[not(self::a)]/img");

foreach ($elements as $element){
  echo $doc->saveXML($element) . "\n";
} 
```

此代码将给出输出：

```
<img src="images/inside_div.jpg"/>
<img src="images/inside_nothing.jpg"/> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-06T07:14:39.113

`<img[^>]*>(?![^<]*</a>)`

# c# - 长原语的 GetHashCode()

> ID：13244253
> 
> 赞同：7
> 
> 时间：2012-11-06T04:11:41.420
> 
> 标签：c#, .net, iequalitycomparer

我正在为 LINQ 不同的表达式编写 EqualityComparer，但我不太确定 GetHashCode 重载方法。下面的代码是否正确？Id 属性是一个长原语。

```
public int GetHashCode(Deal obj)
{
   return ((int)obj.Id) ^ ((int)(obj.Id >> 32)); ;
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-06T04:16:18.893

可能您应该检查是否`obj`不为空。在空返回的情况下`0`。老实说，您对 Id 的实现与数据类型`long`的 .NET Framework 完全相同。换句话说，您可以在非空检查之后简单地调用。`GetHashCode``long``obj.Id.GetHashCode()`

# php - 如何在此正则表达式中包含破折号

> ID：13244254
> 
> 赞同：-1
> 
> 时间：2012-11-06T04:11:20.057
> 
> 标签：php, regex

这段代码取自 codeigniter，我试图将其复制到一个允许数字字符和破折号的新函数中。我需要在这个正则表达式中添加什么来允许破折号和括号？

```
preg_match( '/^[\-+]?[0-9]*\.?[0-9]+$/', $str); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T04:30:17.220

您的正则表达式意味着：以 - 或 + MAYBE 开始行，然后 0-9 零次或多次，然后 a 。可能然后以下列数字中的至少一个结尾：0-9

您需要指定您希望 RegEx 执行的操作，然后有人可以编写正确的 RegEx。

*编辑* 给你：

```
<?php

// 555-555-5555 or (555) 555-5555 or (555)555-5555
$str = '555-555-5555';
if (preg_match( '/^((\([0-9]{3}\)) ?|[0-9]{3}-)[0-9]{3}-[0-9]{4}$/', $str) == 1){
    echo 'Yes!';
}else{
    echo 'No!';
}
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T04:16:37.133

```
preg_match( '/^\+?[-0-9]*\.?[-0-9]+$/', $str); 
```

更新：

```
preg_match( '/^\+?[-0-9()]*\.?[-0-9()]+$/', $str); 
```

# c# - 如何在gridview中显示不同的对象？

> ID：13244255
> 
> 赞同：6
> 
> 时间：2012-11-06T04:11:26.947
> 
> 标签：c#, asp.net, oracle, gridview

我的数据库中的一个表存储了图片、文档、dll 吊索等。如何为用户实现所有这些的映射？我将这些数据绑定到一个数据表，并希望在每个单元格中都有超链接，当单击它时，会从数据库中调用/打开相应的项目。

```
OracleCommand oracleCom = new OracleCommand();
oracleCom.Connection = oraConnect;
oracleCom.CommandText = "Select * From " + Session["tableNameIns"];
OracleDataAdapter adapter = new Oraenter code herecleDataAdapter();
DataTable tableD = new DataTable();
tableD.Locale = System.Globalization.CultureInfo.InvariantCulture;
adapter.SelectCommand = oracleCom;
adapter.Fill(tableD);
changeTableAtributs(tableD);
tableResults.DataSource = tableD.AsDataView();
tableResults.DataBind(); 
```

在 DB 中的下一个属性：i_id(number)、i_objecttype_id(number)、s_code(nvarchar)、s_name(nvarchar)、m_content(blob)、m_description(nvarchar) ![数据库视图](../Images/2da6224544ce93a83dcdcdeeb46dd245.png)

在客户端我看到下一个：i_id(number)、i_objecttype_id(number)、s_code(nvarchar)、s_name(nvarchar)、m_description(nvarchar)。没有属性 m_content。 ![客户端视图](../Images/565bdc5f38a91bb6e6952b3934e9cc60.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T22:26:50.400

看来你的问题是“不完整的”。因此，如果 blob 是图片，您希望显示该图片吗？如果 blob 是 dll 会发生什么？

在您的数据库中，M_CONTENT 字段是一个 blob，因此如果您将其数据绑定到 GridView，则 GridView 无法知道该字段中的内容。

如果要显示图像以显示 blob 中文件的类型，则需要知道类型。要么将类型存储在数据库中（最佳），要么在运行时解析 blob 并找出文件类型。

在我看来，您已经拥有类型 (I_OBJECTTYPE_ID)。如果是这种情况，那么您可以在 asp:GridView/Columns 下定义一个列

```
<asp:TemplateField HeaderText="File type">
    <ItemTemplate>
        <asp:Image runat="server" ID="mediaImage"
            ImageUrl='<%# GetImageUrl(Eval("type") as string) %>' />
    </ItemTemplate>
</asp:TemplateField> 
```

在您的情况下，类型列称为 I_OBJECTTYPE_ID。GetImageUrl 是代码隐藏中的一个函数：

```
switch (type)
{
    case "video":
        return "~//Images//video.png";
    case "audio":
        return "~//Images//audio.png";
}
return ""; // Something is wrong 
```

使用这种技术，您可以在 ItemTemplate 标记下制作超链接和其他内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T22:22:00.990

您可以在 GridView 的 RowDataBound 事件中获取这些值并创建链接/超链接并将它们分配给行

```
 protected void tableResults_RowDataBound(object sender, GridViewRowEventArgs e)
    {
        if (e.Row.RowType == DataControlRowType.DataRow)
        {
            DataRowView row = e.Row.DataItem as DataRowView;

            if (row != null)
            {
                Label lbImagePath = e.Row.FindControl("lbImagePath") as Label;
                lbImagePath.Text = row["ImagePathColumn"].ToString();
            }
        }
    } 
```

在您的情况下，将该标签更改为超链接控件并将其 URL 设置为列值

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T12:05:21.043

如果您想让用户下载文件而不是显示（因为 dll 可以在浏览器上显示），请执行以下操作：

1.  创建一个新页面说`downloadfile.aspx`；
2.  在`datarowbound`事件中解析下载文件所需的值，如文件类型、文件名等；假设您已保存`abc.pdf`为 blob，那么超链接 url 应该是`downloadfile.aspx?fname=abc.pdf&type=application&pkey=uniqueidentification`；
3.  在`downloadfile.aspx`加载事件中获取`byte[]`基于`uniqueidentification`（即主键）的blob。将其转换为流，然后像在[这个问题](https://stackoverflow.com/questions/8592455/converting-blob-back-to-original-file-type-and-making-it-available-for-download)中一样给出回应。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-02T07:09:09.453

为此，您必须使用***TemplateField***。您将向每个单元格插入控件并使用***Eval***函数绑定数据。有关更多信息，请参阅此[链接](http://msdn.microsoft.com/en-us/library/bb288032.aspx)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-05T18:01:38.490

为每一行制作网格按钮并使用选择或删除或更新按钮。

e.selectedindex。

您可以随时更改标题或隐藏标题。

你也可以使用像selectedindexchanged这样的事件，所以一旦你选择了你就可以得到选择的索引id，所以使用它可以调用方法

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-31T18:27:57.500

这样做，在**TemplateField**中你有**EditTemplateField**和**ItemTemplateField**，在 ItemTemplateField 中输入你的列名 Ex: Age: 并在 Text Bind("Age") 和 ItemTemplate 中从 EditTemplate 复制所有内容并将其粘贴，不要完全复制我的代码例如，我已将代码显示在表格中。因此，现在您可以编辑 HTML 之类的所有内容，只需将链接作为 href 即可。

```
<asp:GridView ID="GridViewFemale" runat="server" AutoGenerateColumns="False" DataKeyNames="ID" DataSourceID="LinqDataSourceFemale" Width="158px">
    <Columns>
         <asp:ImageField DataImageUrlField="Image" NullImageUrl="images/INA.jpg" ShowHeader="False"></asp:ImageField>
        <asp:TemplateField>
            <EditItemTemplate>
                <table>
                    <tr>

                        <td>
                             <b> Age:</b> <asp:Label ID="Label1" runat="server" Text='<%# Bind("Age") %>'></asp:Label><br />
                            <b> Name:</b> <asp:Label ID="Label2" runat="server" Text='<%# Bind("Name") %>'></asp:Label><br />
                            <b> Education:</b> <asp:Label ID="Label3" runat="server" Text='<%# Bind("Education") %>'></asp:Label><br />
                            <b> Current Status:</b> <asp:Label ID="Label4" runat="server" Text='<%# Bind("CurrentStatus") %>'></asp:Label><br />
                            <b> Height:</b> <asp:Label ID="Label5" runat="server" Text='<%# Bind("Height") %>'></asp:Label><br />
                            <b> Complexion:</b> <asp:Label ID="Label6" runat="server" Text='<%# Bind("Complexion") %>'></asp:Label><br />
                            <b> Caste:</b> <asp:Label ID="Label7" runat="server" Text='<%# Bind("Caste") %>'></asp:Label><br />
                            <b> Group:</b> <asp:Label ID="Label8" runat="server" Text='<%# Bind("Group") %>'></asp:Label>
                        </td>
                    </tr>
                </table>
            </EditItemTemplate >
            <ItemTemplate>
                <table id="GridTable">
                    <tr>

                        <td>
                             <b> Age:</b> <asp:Label ID="Label1" runat="server" Text='<%# Bind("Age") %>'></asp:Label><br />
                            <b> Name:</b> <asp:Label ID="Label2" runat="server" Text='<%# Bind("Name") %>'></asp:Label><br />
                            <b> Education:</b> <asp:Label ID="Label3" runat="server" Text='<%# Bind("Education") %>'></asp:Label><br />
                            <b> Current Status:</b> <asp:Label ID="Label4" runat="server" Text='<%# Bind("CurrentStatus") %>'></asp:Label><br />
                            <b> Height:</b> <asp:Label ID="Label5" runat="server" Text='<%# Bind("Height") %>'></asp:Label><br />
                            <b> Complexion:</b> <asp:Label ID="Label6" runat="server" Text='<%# Bind("Complexion") %>'></asp:Label><br />
                            <b> Caste:</b> <asp:Label ID="Label7" runat="server" Text='<%# Bind("Caste") %>'></asp:Label><br />
                            <b> Group:</b> <asp:Label ID="Label8" runat="server" Text='<%# Bind("Group") %>'></asp:Label>
                        </td>
                    </tr>
                </table>
            </ItemTemplate>
        </asp:TemplateField>
    </Columns>
</asp:GridView> 
```

# javascript - 如何使用可从 Javascript 调用的 ATL 和 VS2010 创建 C++ COM 对象（带有类工厂）

> ID：13244259
> 
> 赞同：1
> 
> 时间：2012-11-06T04:12:39.380
> 
> 标签：javascript, visual-studio-2010, visual-c++, com, atl

我需要创建一个可从 Javascript 调用的 COM 对象。有人告诉我，要做到这一点，您需要一个还实现类工厂的 COM 对象，这里建议我尝试 ATL。有人向我指出了一个 Code Project ATL 示例，但是它不包括类工厂。

我可以用一个简单的对象构建一个小型 ATL 项目，但无法实例化它，这可能是因为我没有提供类工厂。

那么，有没有人有通过 ATL 在 VS2010 中构建一个可以从 Javascript 调用的简单 COM 对象的经验？

编辑：好吧，在阅读 DECLARE_CLASSFACTORY_EX 的文档时，这听起来像是提供了一个默认的类工厂。所以现在我不确定缺少什么。从 Javascript 实例化和调用类需要什么？

编辑：另外，澄清一下，我从中调用对象的 Javascript 位于 HTML 页面中，该页面显示在 MFC 对话框应用程序的 IE ActiveX 控件中。这就是 Javascript 将在其中运行的上下文。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-07T14:42:55.590

首先，我相信您指的是用于 Internet Explorer 的 MS 专用 JScript，因为其他浏览器可能不支持 COM/ActiveX。

您不必显式地实现类工厂，因为 ATL 框架已经提供了它。只需运行 ATL 向导：查看 --> 类视图；在类视图中右键单击项目根 --> 添加 --> 类 --> ATL 简单对象；设置类名，其余的保留默认值。该向导将定义以下主要内容：

1.  在 IDL 文件中实现它的接口和协同类。
2.  C++ 类，这将是上述 co-class 的实际实现。注意`OBJECT_ENTRY_AUTO`头文件中的宏：它在您的类和 ATL 框架类工厂之间“连接”。
3.  *.rgs 文件，用于在 Windows 注册表中注册您的 co-class。

现在您可以向这个新创建的类添加一些方法 - 通过向导（右键单击类 --> 添加 --> 添加函数...），或手动添加。

此外，为了避免组件的安全问题，您必须`IObjectSafety`在您的类中实现：只需从 继承 c++ 类 `public IObjectSafetyImpl<CYourClass, INTERFACESAFE_FOR_UNTRUSTED_CALLER | INTERFACESAFE_FOR_UNTRUSTED_DATA>`，并添加`COM_INTERFACE_ENTRY(IObjectSafety)`到接口映射。

现在您的类已准备好在 JScript 中使用。在脚本中，您可以使用`object`标记静态创建它，也可以使用`new ActiveX()`语句动态创建它。如果您的对象具有连接点（即触发事件）并且您不想太棘手，则必须使用前一种方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T01:20:36.157

我早些时候发布了示例代码项目以回答另一个问题：[将 COM 事件暴露给 VBScript (ATL)](https://stackoverflow.com/questions/11713418/exposing-com-events-to-vbscript-atl)。它使用 VBS，我认为 JS 转换是一件容易的事情。

代码：[SVN](http://www.alax.info/svn/public/trunk/Utilities/VbsEvents/)，[浏览器友好](http://www.alax.info/trac/public/browser/trunk/Utilities/VbsEvents)。

另一个相关示例：[SVN](http://www.alax.info/svn/public/trunk/Utilities/VbsCallback/)、[Browser Friendly](http://www.alax.info/trac/public/browser/trunk/Utilities/VbsCallback) + 博客文章解释正在发生的事情：[从 C++/ATL 类实现 VBScript（VB6、VBA）回调的三种方法](http://alax.info/blog/1381)。

# entity-framework - Entity Framework，映射实体

> ID：13244263
> 
> 赞同：1
> 
> 时间：2012-11-06T04:13:27.853
> 
> 标签：entity-framework, entity

我有具有 category1 和 category2 字段的 Product 表，

并且每个字段都包含一个数字（ID），表示类别表ID（FK）。

我想在检索数据时为设置的类别名称添加实体，但我不知道如何使 category1_name 和 category2_name 可以具有类别名称。（很难解释=3）

前任）

```
public class Product
{
  [Key]
  public int no {get; set;}
  public int category1 {get; set;}  // category table ID number
  public int category2 { get; set;} // category table ID number

  public virtual Category category1_name {get; set;}
  public virtual Category category2_name {get; set;}
}

public class Category
{
  [Key]
  public int no {get; set;}
  public string category {get; set;}
} 
```

但是当我尝试检索数据时，我得到了一个错误，

**“on 子句”中的未知列“Extent1.category1_name_no”**

如何将 category1_name 映射到类别表 ID？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T04:36:54.693

您如何期望 EF 知道哪个标量属性映射到哪个导航属性。您必须使用 fluent API 或数据注释来配置正确的映射。

```
public class Product
{
  [Key]
  public int no {get; set;}
  public int category1 {get; set;}  // category table ID number
  public int category2 { get; set;} // category table ID number

  [ForeignKey("category1")]
  public virtual Category category1_name {get; set;}

  [ForeignKey("category2")]
  public virtual Category category2_name {get; set;}
} 
```

您应该考虑遵循正确的命名约定来命名属性。

# iphone - ABAddressBook 联系人未正确与 icloud 同步

> ID：13244265
> 
> 赞同：2
> 
> 时间：2012-11-06T04:13:39.320
> 
> 标签：iphone, ios, icloud, abaddressbook

我有一个应用程序可以将 300 多个联系人添加到通讯录中。如果我在添加它们后立即转身删除它们，它们不会完全从 icloud 中删除。它们最初会从本地地址簿中删除，但仍会添加到 icloud。一旦将它们添加到 icloud 中，它们就会同步回我的本地通讯录。知道如何删除联系人吗？如果我等待一段时间（即直到所有联系人都真正进入 icloud）它工作正常。但是，如果我在它们进入 icloud 之前就开始删除它们，它们并不会全部被删除。

这是我用来从通讯录中读取所有联系人的代码 - 我检查联系人的姓名，如果它与我列表中的一个匹配，我将其删除。

```
ABAddressBookRef addressBook = ABAddressBookCreateWithOptions(NULL, &myError);
NSMutableArray *names=[[NSMutableArray alloc] init];

//Get all names from default contacts list
for (int i=0;i<[AB.defaultContacts count];i++) {
    NSDictionary *plistDict = plistDict = [AB.defaultContacts objectAtIndex:i];
    names[i] = [plistDict objectForKey:@"kABPersonOrganizationProperty"];
}

NSArray *contactArray = (__bridge NSArray *)ABAddressBookCopyArrayOfAllPeopleInSource(addressBook,ABAddressBookCopyDefaultSource(addressBook));

//Search through all actual address book contacts
for (id contact in contactArray) {
    //search name from default contacts list
    for (id name in names) {
        //Get name for current contact from address book
        NSString *tmp=(NSString *)CFBridgingRelease(ABRecordCopyValue(CFBridgingRetain(contact),kABPersonOrganizationProperty));

        //If name from address book matches name from default contacts - zap it
        if ([tmp isEqualToString:name]) {

            ABAddressBookRemoveRecord(addressBook, CFBridgingRetain(contact), nil);
            deletedContacts++;
        }
    }
}
ABAddressBookSave(addressBook, nil);
CFRelease(addressBook); 
```

# jquery - 如何停止标签中的视频？

> ID：13244275
> 
> 赞同：0
> 
> 时间：2012-11-06T04:15:23.203
> 
> 标签：jquery, video, tabs

我的网站上有一个标签界面，其中包含最后一个标签上的图像和 youtube 视频。一切正常，但是每次我切换标签时，视频都不会停止播放。有没有办法来解决这个问题？提前致谢。

这是选项卡的脚本：

```
$("#simple-tabs .tab_content").hide(); //Hide all content
$("#simple-tabs ul.tabs li:first").addClass("active").show(); //Activate first tab
$("#simple-tabs .tab_content:first").show(); //Show first tab content

//On Click Event
$("#simple-tabs ul.tabs li").click(function(e) {
    $("#simple-tabs ul.tabs li").removeClass("active"); //Remove any "active" class
    $(this).addClass("active"); //Add "active" class to selected tab
    $("#simple-tabs .tab_content").hide(); //Hide all tab content
    var activeTab = $(this).find("a").attr("href"); //Find the rel attribute value to identify the active tab + content
    $(activeTab).fadeIn(); //Fade in the active content
    e.preventDefault();
});

(function ($) { 
        $('.tab ul.tabs li:first-child a').addClass('current');
        $('.tab .tab_content div.tabs_tab:first-child').show();

        $('.tab ul.tabs li a').click(function (g) { 
            var tab = $(this).parent().parent().parent(), 
                index = $(this).parent().index();

            tab.find('ul.tabs').find('a').removeClass('current');
            $(this).addClass('current');

            tab.find('.tab_content').find('div.tabs_tab').not('div.tabs_tab:eq(' + index + ')').slideUp();
            tab.find('.tab_content').find('div.tabs_tab:eq(' + index + ')').slideDown();

            g.preventDefault();
        } );
    } )(jQuery); 
```

这是 HTML 标记：

```
<div id="tab3" class="tab_content">
   <div class="video-container">
     <iframe width="510" height="270" src="http://www.youtube.com/embed/6Cf7IL_eZ38" frameborder="0" allowfullscreen></iframe>
    </div>
 </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T04:22:47.033

您可以使用[youtube iframe api](https://developers.google.com/youtube/iframe_api_reference)控制视频，因此像这样加载 JS：

```
<script src="//www.youtube.com/iframe_api" /> 
```

然后`id`在 iframe 上放置一个属性，例如：

```
<iframe id="ytplayer" ... > 
```

你应该能够像这样停止它：

```
player = document.getElementById('ytplayer');

function stop(){
    player.stopVideo();
    return false;
} 
```

# java - 以这种方式添加两个文件吗？

> ID：13244277
> 
> 赞同：0
> 
> 时间：2012-11-06T04:15:44.887
> 
> 标签：java

我以这种方式添加两个文件，但我收到错误消息，不是以这种方式添加两个文件。
文件雇用=新文件（“E：/employee.xml”，“E：/one/two/student.xml”）；

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T04:19:24.527

您使用的构造函数在 Java API 文档中被提及为：

> **公共文件（字符串父，字符串子）**
> 
> `File`从父路径名字符串和子路径名字符串创建一个新实例。
> 
> 如果 parent 为 null，则创建新的 File 实例，就好像通过在给定的子路径名字符串上调用单参数 File 构造函数一样。
> 
> 否则，父路径名字符串被用来表示目录，而子路径名字符串被用来表示目录或文件。如果子路径名字符串是绝对的，那么它将以系统相关的方式转换为相对路径名。如果 parent 是空字符串，则通过将 child 转换为抽象路径名并根据系统相关的默认目录解析结果来创建新的 File 实例。否则，每个路径名字符串都将转换为抽象路径名，并且子抽象路径名将针对父级解析。
> 
> **参数**： `parent`- 父路径名字符串 `child`- 子路径名字符串
> 
> **抛出**：`NullPointerException`- 如果孩子是`null`

它不是为了添加两个文件。您需要自己做一些工作，编写一些添加这两个文件的逻辑。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T04:27:12.710

我认为您正在尝试将两个 XML 文件合并到一个 XML 文件中。`Apache Commons Configurations`如果您希望合并的文件具有商业意义，您应该调查一下。

```
CombinedConfiguration 
```

[http://commons.apache.org/configuration/userguide/howto_combinedconfiguration.html](http://commons.apache.org/configuration/userguide/howto_combinedconfiguration.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T04:20:05.247

```
File employ = new File("E:\\employee.xml");
File employ2 = new File("E:\\one\\two\\student.xml"); 
```

??

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-06T04:23:25.210

如果“添加两个文件”是指要连接两个文件，请尝试以下操作：

```
import java.io.*;  
import java.io.FileInputStream;  

public class CopyFile{  
    private static void copyfile(String srFile, String dtFile){  
        try{  
            File f1 = new File(srFile);  
            File f2 = new File(dtFile);  
            InputStream in = new FileInputStream(f1);  

            //For Append the file.  
            OutputStream out = new FileOutputStream(f2,true);  

            byte[] buf = new byte[1024];  
            int len;  
            while ((len = in.read(buf)) > 0){  
                out.write(buf, 0, len);  
            }  
            in.close();  
            out.close();  
            System.out.println("File copied.");  
        }  
        catch(FileNotFoundException ex){  
            System.out.println(ex.getMessage() + " in the specified directory.");  
            System.exit(0);  
        }  
        catch(IOException e){  
            System.out.println(e.getMessage());           
        }  
    }  
    public static void main(String[] args){  
        switch(args.length){  
            case 0: System.out.println("File has not mentioned.");  
                    System.exit(0);  
            case 1: System.out.println("Destination file has not mentioned.");  
                    System.exit(0);  
            case 2: copyfile(args[0],args[1]);  
                    System.exit(0);  
            default : System.out.println("Multiple files are not allow.");  
                      System.exit(0);  
        }  
    }  
} 
```

希望能帮助到你！

# screenshot - 拍摄应用程序的屏幕截图以在动画期间使用

> ID：13244283
> 
> 赞同：0
> 
> 时间：2012-11-06T04:15:56.180
> 
> 标签：screenshot, viewwillappear, viewdidappear

我试图掩盖在`viewWillAppear`和之间的过渡期间发生在我的视图中的一些变化，`viewDidAppear`并希望`viewWillDisappear`在`viewWillAppear`.

我知道几年前 Apple 允许我们使用`UIGetScreenImage`，但现在情况已不再如此。既然它们已经被拿走，那么为了这些目的而抓取屏幕图像的最佳方法是什么`UIGetScreenImage`？

（关于如何实现我的其余目标的任何进一步建议也将不胜感激！）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T04:25:24.957

您可以像这样在顶视图上调用 CALayer 的 -renderInContext 方法来获取屏幕的屏幕截图。

```
UIGraphicsBeginImageContext(self.view.frame.size);
CGContextRef context = UIGraphicsGetCurrentContext();
[self.view.layer renderInContext:context];   
UIImage *imgScreenShot = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext(); 
```

在这里，imgScreenShot 是所需的图像。享受编程！

# javascript - 如何删除 jqGrid 中烦人的滚动条

> ID：13244284
> 
> 赞同：1
> 
> 时间：2012-11-06T04:15:57.367
> 
> 标签：javascript, jquery, html, jqgrid

请看这个例子：

[http://www.trirand.com/blog/jqgrid/jqgrid.html](http://www.trirand.com/blog/jqgrid/jqgrid.html)

我在火狐里面。请点击“加载数据”->“JSON 数据”。看到示例后，请按`Ctrl -`以便分辨率更改，您将在 jqGrid 中看到烦人的水平滚动条。如何防止此滚动条？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-06T05:05:56.530

尝试将宽度设为 101%。

```
<div class="ui-jqgrid-bdiv" style="height: auto; width: 101%; "> 
```

# c++ - boost::asio::streambuf 缩小以适应？

> ID：13244287
> 
> 赞同：4
> 
> 时间：2012-11-06T04:16:01.407
> 
> 标签：c++, boost, boost-asio, shrink, streambuf

boost::asio::streambuf 的大小将继续增加，直到调用 consume()。
即使调用了consume()，底层缓冲区使用的内存也永远不会被释放。

例如：下面的代码首先创建了一个streambuf，没有指定max_size。然后它将 14Mb 数据转储到 streambuf 中。然后它会消耗所有这些 14MB 数据。在 2000 点，streambuf.size() 为 0，但“top”显示该进程仍占用 14MB 内存。

我不想指定 max_size。无论如何在它为空后缩小streambuf？

```
#include <boost/asio.hpp>
#include <iostream>
#include <string>

int main()
{
    {
        boost::asio::streambuf b;
        std::ostream os(&b);

        for(int i= 0; i<1000000; ++i)
        {
            os << "Hello, World!\n";
        }
        std::cout<<"point 1000"<<std::endl;
        std::cout<<"size="<<b.size()<<std::endl;
        // at this point, the streambuf's size is close to 14MB.

        b.consume(b.size());
        std::cout<<"point 2000"<<std::endl;
        std::cout<<"size="<<b.size()<<std::endl;
        // at this point, the streambuf.size() is 0
        // but the streambuf's underlying buffer, which is a vector I assume,
        // still hold that 14MB space.
        // "top" shows the process size is 14M

    }

    // at this point, "top" showed the process size shrinks to almost zero
    std::cout<<"point 4000"<<std::endl;
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T08:03:08.070

所以，我查看了资料来源，我发现了两个观察结果。

1.  你是对的，缓冲区被实现为 std::vector，但是这个成员是私有的并且没有任何访问器。

2.  消费方法不会触及这个领域。

对于您的情况，您应该在使用后销毁缓冲区对象。这是解决问题的最简单方法。出于优化目的，您可以记住最后一个缓冲区大小并通过将最后一个大小传递给构造函数来创建具有给定容量的新缓冲区。您可以围绕此功能编写一个包装器以实现可读代码。

# sql - 错误调用 CURDATE()

> ID：13244288
> 
> 赞同：2
> 
> 时间：2012-11-06T04:16:08.450
> 
> 标签：sql, oracle

为什么当我调用 CURDATE 时出现错误？

```
UPDATE TABLENAME
    SET DATEATR= (TO_DATE(CURDATE() ,'DD-MM-YYYY') - WORKDATE /365 ); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-06T05:35:46.517

> 第 2 行出现错误：ORA-00904：“CURDATE”：标识符无效

你正在使用`ORACLE`而不是`MySQL`正确的？相当于`CURDATE()`in`Oracle`是

*   **[当前的日期](http://docs.oracle.com/cd/E11882_01/server.112/e41084/functions044.htm#SQLRF00628)**
*   **[日期](http://docs.oracle.com/cd/E11882_01/server.112/e41084/functions191.htm#SQLRF06124)**

# java - 如何实现 Comparable 类

> ID：13244289
> 
> 赞同：2
> 
> 时间：2012-11-06T04:16:09.113
> 
> 标签：java, comparable

好的，我想出了如何制作 GUI 类和排序类，但似乎可以弄清楚如何实现可比较的类。我需要创建随机大小的矩形，然后将它们整理出来。再次感谢任何帮助。

```
import java.util.*;
import java.applet.Applet;
import java.awt.*;
import java.awt.event.*;

import javax.swing.*;

public class TwoSorts extends Applet implements ActionListener

{
private final int APPLET_WIDTH = 600;
private final int APPLET_HEIGHT = 600;
Button sort;
Label sort_label;
String pr_name;
int[] random = new int[20];
int[] sorter = new int[20];

public void init()

{

    sort = new Button("Sort");
    add(sort);
    sort.addActionListener(this);
    sort_label = new Label("Orange Selection / Black Bubble");
    add(sort_label);
    randomGen(random);
    sorter = random; 
    setBackground (Color.white);
    setSize (APPLET_WIDTH, APPLET_HEIGHT); 
}  

private void randomGen (int...random) {

    for (int i = 0; i < 20; i++){
        random [i] = (int) (20 +(Math.random()*300-20));
        }
}

public void paint(Graphics g)
{
    for (int i = 0; i < 20; i++ ){

        g.setColor(Color.blue);
        g.fillRect((int) (10 + (i*50)), 300, 50, ((random[i])));
        g.setColor(Color.black);
        g.fillRect((int) (10 + (i*50)), 300, 25, (sorter[i]));
    }

    g.drawRect (20, 30, 130, 50);
  sort.setLocation(0,220);
  sort_label.setLocation(0,270);
  sort_label.setSize(400,30);
}

public void actionPerformed(ActionEvent e) {

    Sorting.selectionSort(random);
    Sorting.insertionSort (sort);
    repaint();

}
} 
```

这是我的排序课程

```
 import java.awt.event.ActionEvent;

 public class Sorting{

    public static void selectionSort (Comparable[] list)    {

        int min;
        Comparable temp;

        for (int index = 0; index < list.length-1; index++)
        {
            min = index;
            for (int scan = index+1; scan < list.length; scan++)
                if (list[scan].compareTo(list[min]) < 0)
                    min = scan;

            temp = list[min];
            list[min] = list[index];
            list[index] = temp;
        }
    }

    public static void insertionSort (Comparable[] sorter)  {

        for (int index = 1; index < sorter.length; index ++){
            Comparable key = sorter[index];
            int position = index;
            while (position > 0 && key.compareTo(sorter[position-1]) < 0){
                sorter [position] = sorter[position-1];
                position--;
            }

            sorter[position] = key;
        }
    } 
```

然后这是我的同类课程，我需要一些帮助

```
 public class width implements Comparable {

int[] random = new int[20];
int[] sorter = new int[20];

@Override
public int compareTo(Object o) {

    int result = 0;

    if(random[1] == sorter[1])
        result = random.length;
    return result;

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T04:31:49.183

您的可比较类应该是您要排序的任何内容。在这种情况下，您正在生成 的随机数组`int`，因此您实际上不需要实现`compareTo`，因为`Integer`已经实现了`compareTo`。`width`如果您要排序的东西比整数更复杂，您将创建一个新类。

例如，如果您的 Applet 有一堆要按大小排序的圆圈，您将有如下内容：

```
public class Circle implements Comparable<Circle> {
    private Point center;
    private double radius;

    public Circle(double radius, Point center) {
        this.center = center;
        this.radius = radius;
    }

    // Other drawing functionality

    public int compareTo(Circle c) {
        if (c.radius > radius) return -1;
        if (c.radius == radius) return 0;
        return 1;
    }
} 
```

你看？我们的对象比较复杂，所以我们需要教 Java 如何比较一个圆和另一个圆，因为它不知道。

# mysql - 在 PostgreSQL 中运行 MySQL 查询时出错

> ID：13244294
> 
> 赞同：1
> 
> 时间：2012-11-06T04:16:35.710
> 
> 标签：mysql, database, postgresql, compatibility

我用标准 SQL 编写查询，并在 MySQL 中对其进行了测试。

现在，当我尝试在 PostgreSQL 中运行它们时，我得到了各种各样的错误，我不太明白。这是在 MySQL 中工作的原始查询：

```
CREATE VIEW popularCSsections AS (
    SELECT  sect.csid, COUNT(sc.sid) as numStudents
    FROM courseSection sect, studentCourse sc, department d
    WHERE sect.csid = sc.csid 
        AND sect.dcode = d.dcode 
        AND dname = "Computer Science"
    GROUP BY sect.csid
    HAVING numStudents > 2
); 
```

给出这个错误：

```
psql:a2tables:60: ERROR:  column "Computer Science" does not exist
LINE 8:   AND department.dname = "Computer Science" 
                                 ^ 
```

您能帮我理解错误的性质并帮助我修复它们吗？

* * *

附加问题：

```
CREATE VIEW popularCSsections AS (
SELECT  sect.csid, COUNT(sc.sid) as numStudents
FROM courseSection sect, studentCourse sc, department d
WHERE sect.csid = sc.csid 
    AND sect.dcode = d.dcode 
    AND dname = 'Computer Science'
    GROUP BY sect.csid
    HAVING numStudents > 2
); 
```

错误：

```
psql:a2tables:70: ERROR:  column "numstudents" does not exist
LINE 8:  HAVING numStudents > 2
                ^ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T04:22:36.417

您需要用单引号引用字符串：

```
 AND dname = 'Computer Science' 
```

这里发生的是双引号被解释为“标识符引号”，这表明您希望将内容解释为数据库标识符（列或表名）。

# ruby-on-rails - DATE::abbr_daynames 的 simple_form 和 i18n

> ID：13244296
> 
> 赞同：0
> 
> 时间：2012-11-06T04:16:37.320
> 
> 标签：ruby-on-rails

我正在使用以下行来获取一个包含所有工作日的选择框

```
= f.select :day, Date::ABBR_DAYNAMES.each_with_index.to_a 
```

我需要根据我的语言环境翻译工作日。我不确定为什么它不起作用。

我正在将`simpleform`gem 用于表单构建器。

我继续在控制台中调试并发现：

```
I18n.t Date::ABBR_DAYNAMES.each_with_index.to_a
 => "translation missing: es.Sun.0" 
```

我不确定为什么会发生这种情况，因为我的 es.yml 文件包含：

```
es:
  Sun: 
    0: Dom 
```

我还想知道是否有另一种方法可以在工作日获得选择框。这种编写 es.yml 条目的方式感觉有点 hacky。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T13:54:13.147

在控制台尝试

```
I18n.t(:"date.day_names").each_with_index.to_a 
```

并以简单的形式

```
= f.select :day, @builder.select(attribute_name, I18n.t(:"date.day_names").each_with_index.to_a) 
```

# java - 如何在android中将元素添加到Http请求的正文中

> ID：13244298
> 
> 赞同：0
> 
> 时间：2012-11-06T04:16:54.357
> 
> 标签：java, android, httprequest

我想构建一个像下面这样的 httprequest 来使用 post 请求访问其余的 web 服务。我已经使用 spring for android API 来生成请求。我可以使用 httpHeader.add 方法添加标题，但不知道将消息添加到正文。请求格式如下。

```
<?xml version="1.0" encoding="UTF-8"?>
<root>
<headers>
<messagetype>1</messagetype>
<uniquekey>95C75718-C774-DF4E-0DB4-A7AEF55077AA</uniquekey>
</headers>
<authentication>
<clientname>xxx</clientname>
<servicename>login</servicename>
<username>xxx123</username>
<password>welcome123</password>
</authentication>
</root> 
```

我不知道如何添加那部分。请帮忙。

我到目前为止完成的代码如下

```
import android.app.Activity;
import android.os.Bundle;
import android.widget.TextView;
import org.springframework.web.client.RestTemplate;
import org.springframework.http.HttpHeaders;
import org.springframework.http.MediaType;
import org.springframework.http.HttpEntity;
import org.springframework.http.HttpMethod;
import org.springframework.http.MediaType;
import org.springframework.http.ResponseEntity;
import org.springframework.util.MultiValueMap;

public class Main extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        TextView webservice = (TextView) findViewById(R.id.Webservice);

        HttpHeaders requestHeaders = new HttpHeaders();
        requestHeaders.setContentType(MediaType.TEXT_PLAIN);
        requestHeaders.add("messagetype", "1");
        requestHeaders.add("uniquekey", UniqueID.getUUID());
        HttpEntity<String> requestEntity = new HttpEntity<String>(requestHeaders);
        RestTemplate restTemplate = new RestTemplate();
        String url = "http://www.localhost:8080/restwebservice/login";
        ResponseEntity<String> responseEntity = restTemplate.exchange(url, HttpMethod.POST, requestEntity, String.class);
        String result = responseEntity.getBody();       

        webservice.setText(result);
    }   
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T04:31:16.490

您需要创建一个`Message`对象并将其传递给 RestTemplate。查看[`RestTemplate`](http://static.springsource.org/spring-android/docs/1.0.x/reference/html/rest-template.html)文档的第 2.6.5 节了解详情。

请注意，那里的示例与您的方法不同，并且使用`postForObject`而不是`exchange`. 如果您仍想继续使用`exchange`，则应更改`HttpEntity`您正在使用的方式`requestEntity`并使用允许您将消息正文添加到其中的方式。[`BasicHttpEntity`](http://developer.android.com/reference/org/apache/http/entity/BasicHttpEntity.html)应该可以正常工作，尽管您必须在正文中手动构建 XML。另一方面，`postForObject`使用适当的消息格式化程序将允许您传递普通的旧 Java 对象并自动将其正确序列化为 XML。消息格式化程序有很多选项，但我会推荐 Jackson，因为它速度很快且支持良好（尽管它以 JSON 支持而闻名，而对 XML 的支持较少）。

# java - 从java中的字符串中获取整数

> ID：13244305
> 
> 赞同：0
> 
> 时间：2012-11-06T04:18:06.307
> 
> 标签：java, regex, string

假设我有一个字符串 "-1 2" 是否有一个 "reverse string.format" 我可以在其中获取这些整数，例如

```
Integer first = new Integer();
Integer second = new Integer();
String.grab("%d %d", first, second);
print(first + " " second); // prints "-1 2" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T04:19:49.830

[http://docs.oracle.com/javase/7/docs/api/java/util/Scanner.html](http://docs.oracle.com/javase/7/docs/api/java/util/Scanner.html)

虽然我从未真正见过它在家庭作业之外使用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-06T04:28:32.700

String 中的 s 是否`int`总是以相同的方式格式化？如果是这样，为什么不使用 split()？

```
String input = "-1 21"
String[] stringArray = input.split(" "); 
```

然后只需打印出数组中的每个元素。

```
String printedString = "";
for (int i = 0; i < stringArray.length; i++) {
    printedString += stringArray[i] + " ";
{

System.out.println(printedString); 
```

优化您的需求。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-06T04:27:27.787

你可以用空格分割你的输入，然后在每个字符串上调用 Integer.parseInt ：

```
String input = "-1 2 -4 6 8";
String[] numberStringArray = input.split(" ");

for (String s : numberStringArray) {
    int n = Integer.parseInt(s);
    System.out.println("n = " + n);
} 
```

***注意***：这会进行零错误检查

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-06T04:22:40.323

采用`Integer.parseInt()`

将所有非数字替换为空白：剩余的字符串仅包含数字。

```
Integer.parseInt(s.replaceAll("[\\D]", "")) 
```

这也将删除数字之间的非数字，因此`"x1x1x"`变为`11`.

如果您需要确认字符串由可能跟在字母后面的一系列数字（至少一个）组成，请使用以下命令：

```
s.matches("[\\d]+[A-Za-z]?") 
```

在stackoverflow中参考这个问题-get [-int-from-string-also-containing-letters-in-java](https://stackoverflow.com/questions/2338790/get-int-from-string-also-containing-letters-in-java)

# javascript - 在 Javascript 中，console.log 是否对对象调用 toString？

> ID：13244308
> 
> 赞同：1
> 
> 时间：2012-11-06T04:18:36.477
> 
> 标签：javascript, arrays, prototype, tostring

```
Array.prototype.toString = function(){
    return "testing";
}

a1 = [1,2,3];

console.log(a1); // returns [1,2,3]
console.log(a1.toString()); // returns "testing" 
```

这是为什么？第一个日志如何打印出值？我以为它使用了 toString 方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T04:35:10.293

对于 Firefox（Firebug 和 Dev Web 控制台），Chrome：否

对于 IE：是的

# iphone - 卡号前 12 位应为安全输入，其余 4 位正常

> ID：13244313
> 
> 赞同：3
> 
> 时间：2012-11-06T04:18:53.217
> 
> 标签：iphone, uitextfield

卡号前 12 位数字应该是安全输入，其余 4 位数字正常，例如我正在输入卡号 - 4111 1111 1111 1111。在文本字段中输入此文本时，前 12 位数字应该是安全输入，后 4 位数字应该是正常输入即1111。（最后卡号看起来像XXXXXXXXXXXX1111）。

任何人都可以解释我如何做到这一点。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-06T05:25:59.517

一种选择是实现`UITextField`委托方法`textField:shouldChangeCharactersInRange:replacementString:`。在这种方法中，您希望始终返回 NO。但首先您将更新文本字段的文本，使前 12 位数字显示 X。您将跟踪另一个 ivar 中的实际文本。

编辑：这应该工作：

```
- (NSString *)maskNumber:(NSString *)num {
    static NSString *twelveX = @"XXXXXXXXXXXX";

    if (num.length < twelveX.length) {
        return [twelveX substringToIndex:num.length];
    } else {
        return [twelveX stringByAppendingString:[num substringFromIndex:twelveX.length]];
    }
}

- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string {
    // Determine where the cursor should be
    UITextRange *selRange = textField.selectedTextRange;
    NSInteger cursorPos = [textField offsetFromPosition:textField.beginningOfDocument toPosition:selRange.start] + string.length;

    _cardNum = [_cardNum stringByReplacingCharactersInRange:range withString:string];

    textField.text = [self maskNumber:_cardNum];

    // Reset the cursor position
    UITextPosition *startPos = [textField positionFromPosition:textField.beginningOfDocument offset:cursorPos];
    selRange = [textField textRangeFromPosition:startPos toPosition:startPos];
    textField.selectedTextRange = selRange;

    return NO;
} 
```

`_cardNum`类型的 ivar在哪里`NSString`。这会跟踪实际的卡号。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-06T05:35:11.353

我建议您保留两个字段，第一个字段是 12 个字符的有限密码字段，用于保护文本。

使用以下委托方法限制字段的长度：

```
- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string {
    NSUInteger newLength = [textField.text length] + [string length] - range.length;
    return (newLength > 12) ? NO : YES;
} 
```

设置字段以强制安全文本输入：

```
twelveDigitTextField.secureTextEntry = YES; 
```

第二个字段，您限制为四个字符，与用于 12 个字符字段的方法相同。您无需使用该`secureTextEntry`属性保护此字段。

如果你想让这个界面“漂亮”，用相同的委托方法跟踪第一个字段的长度，并将第二个字段设置为下一个响应者——换句话说，一旦十二点，光标将跳转到四个字符的字段-字符字段填充：

```
/* called within delegate method for 12-character field, once filled up */
[fourDigitTextField becomeFirstResponder]; 
```

您可能希望以这种方式执行此操作的一个原因是为敏感数据（如 12 位卡号）获得与密码相同的操作系统级保护，输入密码样式`UITextField`。

虽然您可以将文本替换为打字的技巧，但可能更容易忽略允许将此未受保护字段中的敏感数字复制并粘贴到另一个应用程序 - 而对于密码字段，这些限制通常在默认情况下存在。

# python - 我需要对我的 Flask python 应用程序进行哪些更改才能使用 MySQL 数据库？

> ID：13244314
> 
> 赞同：4
> 
> 时间：2012-11-06T04:19:41.373
> 
> 标签：python, mysql, sqlite, flask

我是开发应用程序的新手，我一直在尝试熟悉 Flask。我遵循他们的优秀教程并阅读了他们同样详细的文档来创建我的第一个使用 SQLite3 数据库的基本应用程序。

为了做到这一点，按照他们的指示，我导入了以下内容：

```
from __future__ import with_statement
from contextlib import closing   

import sqlite3
from flask import Flask, request, session, g, redirect, url_for, \
     abort, render_template, flash 
```

并`schema.sql`使用以下内容设置文件来配置数据库：

```
drop table if exists entries;
create table entries (
  id integer primary key autoincrement,
  title string not null,
  text string not null
); 
```

我使用来自[Flask 站点教程](http://flask.pocoo.org/docs/tutorial/views/#tutorial-views)的命令访问数据库。我的印象是，在创建用户创建和管理自己帐户的应用程序时，我需要实现 MySQL 数据库。在这种情况下，我需要更改与数据库相关的代码的哪些方面？我确信使用这两个数据库之间存在很大差异，因此任何参考点——要遵循的教程建议或要阅读的文档——将不胜感激。

提前谢谢了。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-06T04:31:46.890

我不会直接回答你的问题，而是给你一个很好的替代你当前方法的方法。

为什么不使用[SQLAlchemy](http://packages.python.org/Flask-SQLAlchemy/quickstart.html)使用 OOP 方法，而不是使用 SQL 操作数据库？

这是您当前代码的粗略翻译：

```
# ...

from flask.ext.sqlalchemy import SQLAlchemy

app = Flask(__name__.split('.')[0])

app.config['SQLALCHEMY_DATABASE_URI'] = 'sqlite:///path/database.db'
#app.config['SQLALCHEMY_DATABASE_URI'] = 'mysql://user:pass@localhost/database'

db = SQLAlchemy(app)

class Entry(db.Model):
    id = db.Column(db.Integer, primary_key=True)
    title = db.Column(db.Text)
    text = db.Column(db.Text)

    def __init__(self, title, text):
        self.title = title
        self.text = text

    def uppercase(self):
        self.title = self.title.upper()
        self.text = self.text.upper() 
```

注意数据结构如何不依赖于数据库。您只需更改一个配置字符串即可从 SQLite 切换到 MySQL。

初始化数据库同样简单：

```
$ python -c "from your_app import db; db.create_all()" 
```

使用数据库更加简单：

```
entry = Entry('test', 'entry')
entry.uppercase()

db.session.add(entry)
db.session.commit() 
```

只是一个建议。

# ruby-on-rails - 带有祖先宝石的动态选择并被选中

> ID：13244316
> 
> 赞同：1
> 
> 时间：2012-11-06T04:19:34.387
> 
> 标签：ruby-on-rails, activeadmin, jquery-chosen, ancestry

我正在通过使用 selected 和 ancestry gem 来寻找动态选择，我希望以前有人这样做过。

我有大约 2000 个（类别、子类别和关键字）都在 STI 中并且具有树结构。在我的表单中，我为类别使用三个选择输入 | 子类别 | 关键字，但我得到了大量的子类别列表，甚至更大的关键字列表。我想隐藏所有不是预选类别的子类别的子类别；与关键字相同。

希望这是有道理的，我正在尝试做的事情。我将不胜感激任何想法。

到目前为止，这是我所拥有的，并且所有这些代码都运行良好。

```
class Company < ActiveRecord::Base
has_and_belongs_to_many :categories, :join_table => "companies_categories"
has_and_belongs_to_many :subcategories, :join_table => "companies_subcategories"
has_and_belongs_to_many :keywords, :join_table => "companies_keywords"
end

class Category < ActiveRecord::Base
has_ancestry  :cache_depth => true, :depth_cache_column => :ancestry_depth

has_many :subcategories, :class_name => "Category", :foreign_key => :subcategory_id
has_many :keywords, :class_name => "Category", :foreign_key => :keyword_id

belongs_to :category

has_and_belongs_to_many :companies, :join_table => "companies_categories"
has_and_belongs_to_many :companies, :join_table => "companies_subcategories", :association_foreign_key => "subcategory_id"
has_and_belongs_to_many :companies, :join_table => "companies_keywords", :association_foreign_key => "keyword_id"

end 
```

这是javascript

```
jQuery(function($){
$(".chosen-input").chosen();
$(".schosen-input").chosen();
$(".kchosen-input").chosen();
}); 
```

这是我的表格

```
form :html => { :enctype => "multipart/form-data" }  do |f|
f.inputs "New Company" do
  f.input :name,  :required => true
end

f.inputs "Categories" do

  f.input :categories,
          :input_html => { :class => "chosen-input", :multiple => true, :style => "width: 700px;"},
          :collection => Category.where(:ancestry_depth => '2')

  f.input :subcategories,
          :input_html => { :class => "schosen-input", :multiple => true, :style => "width: 700px;"},
          :collection => Category.where(:ancestry_depth => '3')

  f.input :keywords,
          :input_html => { :class => "schosen-input", :multiple => true, :style => "width: 700px;"},
          :collection => Category.where(:ancestry_depth => [4, 5, 6])

end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-30T20:03:13.610

我使用 select2 但我认为也可以使用 selected 。所以，你必须使用ajax请求。在服务器端定义一个动作，获取类别 id（所选类别的 id），并返回所选类别 id 的子类别的集合（以 json 格式）。然后在客户端（使用 jquery 或 javasciprt），您必须使用 json 对象填充选择输入。

您可以使用的 JQuery 事件：http: [//api.jquery.com/change/](http://api.jquery.com/change/)

填充选择输入：[jQuery-- 从 json 填充选择](https://stackoverflow.com/questions/16442422/jquery-populate-select-from-json)

在 ActiveAdmin 中，您必须根据 DOM 确定选择输入。

# php - $this->value 失去了，好吧，它的价值

> ID：13244321
> 
> 赞同：6
> 
> 时间：2012-11-06T04:20:16.663
> 
> 标签：php, variables

我正在使用的 PHP 文件有问题，我似乎找不到解决方案。

在代码的一部分中，`$this->value`设置了值，并且根据我的测试正确设置了值。

但是，稍后在相同的代码`$this->value`中是空的。

这是代码：

```
<?php

class Padd_Input_Advertisement {

    protected $keyword;
    protected $value;
    protected $name;
    protected $description;

    function __construct($keyword,$name,$description='') {
        $this->keyword = $keyword;
        $this->value = unserialize(get_option($keyword));
        $this->name = $name;
        $this->description = $description;
    }

    public function get_keyword() {
        return $this->keyword;
    }

    public function set_keyword($keyword) {
        $this->keyword = $keyword;
    }

    public function get_value() {
        return $this->value;
    }

    public function set_value($value) {
        $this->value = $value;
    }

    public function get_name() {
        return $this->name;
    }

    public function set_name($name) {
        $this->name = $name;
    }

    public function get_description() {
        return $this->description;
    }

    public function set_description($description) {
        $this->description = $description;
    }

    public function  __toString() {

        $strHTML  = '';
        $strHTML .= '<tr valign="top">';
        $strHTML .= '   <th scope="row"><label for="' . $this->keyword . '">' . $this->name . '</label></th>';
        $strHTML .= '   <td>';
        $strHTML .= '       <label for="' . $this->keyword. '_alt_desc">Short Description</label><br />';
        $strHTML .= '       <input name="' . $this->keyword . '_alt_desc" type="text" id="' . $this->keyword . '_alt_desc" value="' . $this->value->get_alt_desc() . '" size="80" /><br />';
        $strHTML .= '       <label for="' . $this->keyword. '_img_url">Image URL</label><br />';
        $strHTML .= '       <input name="' . $this->keyword . '_img_url" type="text" id="' . $this->keyword . '_img_url" value="' . $this->value->get_img_url() . '" size="80" /><br />';
        $strHTML .= '       <label for="' . $this->keyword. '_web_url">Website</label><br />';
        $strHTML .= '       <input name="' . $this->keyword . '_web_url" type="text" id="' . $this->keyword . '_web_url" value="' . $this->value->get_web_url() . '" size="80" />';
        $strHTML .= '       <br /><small>' . $this->description . '</small>';
        $strHTML .= '   </td>';
        $strHTML .= '</tr>';
        return $strHTML;
    }

}

?> 
```

在顶部`function __construct`，设置了值，我确认会发生这种情况。

但是，在底部函数`function __toString`中，`$this->value`是空白的。

知道是什么原因造成的吗？

**编辑**

因此，回顾一下，$this->value 在 __construct 函数中设置正确，但在 __toString 函数中为空白。

**编辑 2**

我还应该提到在 __construct 函数中设置的其他变量在 __toString 函数中起作用，例如 $this->keyword。只是 $this->value 将变为空白。

**编辑 3** 类是这样调用的

```
$padd_options['advertisements'] = array(
    new Padd_Input_Advertisement(
        PADD_NAME_SPACE . '_ads_125125_1',
        'Square Ad 1 (125x125)',
        'The advertisement will be posted at the side bar.'
    ),
    new Padd_Input_Advertisement(
        PADD_NAME_SPACE . '_ads_125125_2',
        'Square Ad 2 (125x125)',
        'The advertisement will be posted at the side bar.'
    ),
    new Padd_Input_Advertisement(
        PADD_NAME_SPACE . '_ads_125125_3',
        'Square Ad 3 (125x125)',
        'The advertisement will be posted at the side bar.'
    ),
    new Padd_Input_Advertisement(
        PADD_NAME_SPACE . '_ads_125125_4',
        'Square Ad 4 (125x125)',
        'The advertisement will be posted at the side bar.'
    ),
); 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-08T04:54:58.147

这是因为如果非序列化对象不知道类的类型，则它们*不会*保留方法。

当您反序列化`get_keyword()`函数调用的结果时，如果序列化对象的类未知，PHP 将回退到特殊类`__PHP_Incomplete_Class_Name`。这个类基本上是一个虚拟类：它没有任何方法。但是，它允许您访问反序列化对象的属性。

因此，如果您希望能够调用 of 的方法`$this->value`（这就是您在 中所做的），则必须在调用 unserialize 之前`__toString`包含声明类型的文件。`$this->value`

**[编辑]**您可以查看[PHP 手册](http://php.net/manual/en/language.oop5.serialization.php)以获取有关反序列化过程的更多详细信息。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-12T15:33:53.790

这就是导致您出现问题的原因：

```
$this->value = unserialize(get_option($keyword)); 
```

正如其他一些人之前指出的那样，您可以使用函数的实际声明和包装方法`get_option()`的类来更新您的原始帖子。`get_alt_desc(), get_img_url(), get_web_url()`

可以假设该`get_option()`函数返回一个序列化对象，该对象实现了以下**公共**方法：

```
public function get_alt_desc() { /* custom code */ }
public function get_img_url() { /* custom code */ }
public function get_web_url() { /* custom code */ } 
```

通过序列化和反序列化您的对象，您将无法访问上述所有方法。为避免这种情况，您需要修改`get_option()`函数以返回实际对象而不是它的序列化表示。

假设有一个`Value`代表您的对象的类：

```
class Value {
    protected $alt_desc;
    protected $img_url;
    protected $web_url;

    public function __construct($keyword) {
        $this->alt_desc = $keyword[0]; // some string build around $keyword
        $this->img_url = $keyword[1]; // some string build around $keyword 
        $this->web_url = $keyword[2]; // some string build around $keyword
    }

    public function get_alt_desc() {
        return $this->alt_desc;
    }

    public function get_img_url() {
        return $this->img_url;
    } 

    public function get_web_url() {
        return $this->web_url;
    }
} 
```

然后你可以修改你的`get_option()`函数来简单地返回一个对象：

```
function get_option($keyword) {
    /*
     * The code below is just an example
     * This function must return an object
     */
    return new Value($keyword);
} 
```

您的`Padd_Input_Advertisement`构造函数应更新如下：

```
function __construct($keyword,$name,$description='') {
    $this->keyword = $keyword;
    // removed the unserialize call as it's not necessary anymore
    $this->value = get_option($keyword);
    $this->name = $name;
    $this->description = $description;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-14T01:41:12.120

**编辑：** 是否需要反序列化调用：

```
$this->value = unserialize(get_option($keyword)); 
```

get_option 已经返回未序列化的对象（只要它由 update_option() 保存 - 如果需要，它会在将对象保存到数据库之前自动序列化对象）

**原始答案**

我怀疑问题出在您序列化对象的方式上。

您需要确保在序列化过程中*（转换为字符串表示）*序列化对象的类型是已知的。只有这样，您才能成功地将其反序列化*（从字符串表示形式转换回对象）*。

回答您关于`_toString()`. 当您尝试在字符串上下文中使用对象时（例如，当您尝试回显对象时），PHP 会神奇地调用此函数。你不要直接调用这个函数。

这是演示工作流程的单个 php 文件；对您应该寻找陷阱*（问题原因）*的部分进行注释。将其保存为 index.php 并运行以查看结果。

```
<?php
error_reporting(E_ALL);
ini_set('display_errors', '1');

class Padd_Input_Advertisement {
    protected $keyword;
    protected $value;
    protected $name;
    protected $description;

    function __construct($keyword,$name,$description='') {
        $this->keyword = $keyword;
        $this->value = unserialize(get_option($keyword));
        $this->name = $name;
        $this->description = $description;        
    }

    public function get_keyword()         { return $this->keyword; }
    public function set_keyword($keyword) { $this->keyword = $keyword; }
    public function get_value()           {  return $this->value; }
    public function set_value($value)     { $this->value = $value; }
    public function get_name()            { return $this->name; }
    public function set_name($name)       { $this->name = $name; }
    public function get_description()     { return $this->description;}
    public function set_description($description) { $this->description = $description; }
    public function  __toString() {

        $strHTML  = '';
        $strHTML .= '<tr valign="top">';
        $strHTML .= '   <th scope="row"><label for="' . $this->keyword . '">' . $this->name . '</label></th>';
        $strHTML .= '   <td>';
        $strHTML .= '       <label for="' . $this->keyword. '_alt_desc">Short Description</label><br />';
        $strHTML .= '       <input name="' . $this->keyword . '_alt_desc" type="text" id="' . $this->keyword . '_alt_desc" value="' . $this->value->get_alt_desc() . '" size="80" /><br />';
        $strHTML .= '       <label for="' . $this->keyword. '_img_url">Image URL</label><br />';
        $strHTML .= '       <input name="' . $this->keyword . '_img_url" type="text" id="' . $this->keyword . '_img_url" value="' . $this->value->get_img_url() . '" size="80" /><br />';
        $strHTML .= '       <label for="' . $this->keyword. '_web_url">Website</label><br />';
        $strHTML .= '       <input name="' . $this->keyword . '_web_url" type="text" id="' . $this->keyword . '_web_url" value="' . $this->value->get_web_url() . '" size="80" />';
        $strHTML .= '       <br /><small>' . $this->description . '</small>';
        $strHTML .= '   </td>';
        $strHTML .= '</tr>';
        return $strHTML;
    }

}

//Just a sample of the class representing your option object
class Class_Of_Value {
    protected $alt_desc;
    protected $img_url;
    protected $web_url;

    public function __construct($keyword) {
        $this->alt_desc = 'description'; 
        $this->img_url = 'image'; 
        $this->web_url = 'web'; 
    }

    public function get_alt_desc() { return $this->alt_desc; }
    public function get_img_url()  { return $this->img_url; } 
    public function get_web_url()  { return $this->web_url; }
}

//Sample of a CORRECT get_option function.
function get_option($keyword) {
    //THIS IS IMPORTANT
    $valueObject = new Class_Of_Value($keyword);
    //MAKE SURE THAT TYPE of serialised value is KNOWN
    return serialize($valueObject); 
}
//Here is the root cause of your problem.
//Wordpress' get_option() DOES NOT serialise returned objects. It returns just value of an option pulled from database!
//Hence you can't call methods  $this->value->get_alt_desc() etc.

define ('PADD_NAME_SPACE', ''); //dummy definition of the constant for the sake of PHP Notices

$padd_options['advertisements'] = array(
    new Padd_Input_Advertisement(
        PADD_NAME_SPACE . '_ads_125125_1',
        'Square Ad 1 (125x125)',
        'The advertisement will be posted at the side bar.'
    ),
    new Padd_Input_Advertisement(
        PADD_NAME_SPACE . '_ads_125125_2',
        'Square Ad 2 (125x125)',
        'The advertisement will be posted at the side bar.'
    ),
    new Padd_Input_Advertisement(
        PADD_NAME_SPACE . '_ads_125125_3',
        'Square Ad 3 (125x125)',
        'The advertisement will be posted at the side bar.'
    ),
    new Padd_Input_Advertisement(
        PADD_NAME_SPACE . '_ads_125125_4',
        'Square Ad 4 (125x125)',
        'The advertisement will be posted at the side bar.'
    ),
);

//Here __toString will be called by PHP outputing your HTML form filled with object values.
echo($padd_options['advertisements'][0]); 
```

对您的问题的建议解决方案是确保 Wordpress 选项在保存到数据库（WP's ）之前已正确序列化（使用对象类型`update_option()`）。因此，get_option 将返回序列化字符串，然后将在您的`__construct`方法中正确反序列化。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-14T15:13:35.450

您是否尝试强制运算符 -> 优先级？

我的意思是，从这里：

```
$this->value->get_alt_desc() 
```

对此：

```
($this->value)->get_alt_desc() 
```

也许您的 PHP 解释器正在尝试评估`value->get_alt_desc()`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-06T05:00:48.737

我会将此添加为评论，但我想我还没有声誉点来做到这一点。

您是否尝试过打开错误报告？

```
error_reporting(E_ALL);
ini_set("display_errors", 1); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-11-08T04:34:25.760

在面向对象编程中，您必须使用`$this`. 在您的函数`__toString()`中，您可以直接调用函数。

所以你已经像这样调用了类的函数

```
$this->set_name(); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-11-11T16:16:08.427

使用[Padd Solutions](http://www.paddsolutions.com/wpmag/magalingreloaded/)中包含问题脚本的 Magaling 主题，我在主题目录的 index.php 中添加了以下代码：

```
/*********************************TEST***********************************/
  $padd_options[ 'advertisements' ] = array( new Padd_Input_Advertisement( PADD_THEME_SLUG . '_ads_468060_1', 'Banner Ad 1 (468x60)', 'The advertisement is placed beside the site name in the header.' ),
                                             new Padd_Input_Advertisement( PADD_THEME_SLUG . '_ads_468060_2', 'Banner Ad 2 (468x60)', 'The advertisement is placed just below the title in Search Result page, Categories page, Tags page, Author page, and Archives page.' ),
                                             new Padd_Input_Advertisement( PADD_THEME_SLUG . '_ads_125125_1', 'Square Ad 1 (125x125)', 'The advertisement will be posted at the side bar.' ),
                                             new Padd_Input_Advertisement( PADD_THEME_SLUG . '_ads_125125_2', 'Square Ad 2 (125x125)', 'The advertisement will be posted at the side bar.' ),
                                             new Padd_Input_Advertisement( PADD_THEME_SLUG . '_ads_125125_3', 'Square Ad 3 (125x125)', 'The advertisement will be posted at the side bar.' ),
                                             new Padd_Input_Advertisement( PADD_THEME_SLUG . '_ads_125125_4', 'Square Ad 4 (125x125)', 'The advertisement will be posted at the side bar.' ), );

  echo var_dump( $padd_options[ 'advertisements' ] );

/*********************************TEST***********************************/ 
```

并得到以下结果，这表明该值是一个包含其他几个值的数组：

```
array (size=6)
  0 => 
    object(Padd_Input_Advertisement)[286]
      protected 'keyword' => string 'magaling_ads_468060_1' (length=21)
      protected 'value' => 
        object(Padd_Advertisement)[282]
          private 'img_url' => string 'http://localhost/TestSite/wp-content/themes/magaling/images/advertisement-468x060.gif' (length=86)
          private 'alt_desc' => string 'Padd Solutions' (length=14)
          private 'web_url' => string 'http://www.paddsolutions.com' (length=28)
          private 'target' => string '_new' (length=4)
          private 'css_class' => string '' (length=0)
      protected 'name' => string 'Banner Ad 1 (468x60)' (length=20)
      protected 'description' => string 'The advertisement is placed beside the site name in the header.' (length=63)
  1 => 
    object(Padd_Input_Advertisement)[284]
      protected 'keyword' => string 'magaling_ads_468060_2' (length=21)
      protected 'value' => 
        object(Padd_Advertisement)[283]
          private 'img_url' => string 'http://localhost/TestSite/wp-content/themes/magaling/images/advertisement-468x060.gif' (length=86)
          private 'alt_desc' => string 'Padd Solutions' (length=14)
          private 'web_url' => string 'http://www.paddsolutions.com' (length=28)
          private 'target' => string '_new' (length=4)
          private 'css_class' => string '' (length=0)
      protected 'name' => string 'Banner Ad 2 (468x60)' (length=20)
      protected 'description' => string 'The advertisement is placed just below the title in Search Result page, Categories page, Tags page, Author page, and Archives page.' (length=131)
  2 => 
    object(Padd_Input_Advertisement)[279]
      protected 'keyword' => string 'magaling_ads_125125_1' (length=21)
      protected 'value' => 
        object(Padd_Advertisement)[278]
          private 'img_url' => string 'http://localhost/TestSite/wp-content/themes/magaling/images/advertisement-125x125.jpg' (length=86)
          private 'alt_desc' => string 'Padd Solutions' (length=14)
          private 'web_url' => string 'http://www.paddsolutions.com' (length=28)
          private 'target' => string '_new' (length=4)
          private 'css_class' => string '' (length=0)
      protected 'name' => string 'Square Ad 1 (125x125)' (length=21)
      protected 'description' => string 'The advertisement will be posted at the side bar.' (length=49)
  3 => 
    object(Padd_Input_Advertisement)[277]
      protected 'keyword' => string 'magaling_ads_125125_2' (length=21)
      protected 'value' => 
        object(Padd_Advertisement)[276]
          private 'img_url' => string 'http://localhost/TestSite/wp-content/themes/magaling/images/advertisement-125x125.jpg' (length=86)
          private 'alt_desc' => string 'Padd Solutions' (length=14)
          private 'web_url' => string 'http://www.paddsolutions.com' (length=28)
          private 'target' => string '_new' (length=4)
          private 'css_class' => string '' (length=0)
      protected 'name' => string 'Square Ad 2 (125x125)' (length=21)
      protected 'description' => string 'The advertisement will be posted at the side bar.' (length=49)
  4 => 
    object(Padd_Input_Advertisement)[275]
      protected 'keyword' => string 'magaling_ads_125125_3' (length=21)
      protected 'value' => 
        object(Padd_Advertisement)[273]
          private 'img_url' => string 'http://localhost/TestSite/wp-content/themes/magaling/images/advertisement-125x125.jpg' (length=86)
          private 'alt_desc' => string 'Padd Solutions' (length=14)
          private 'web_url' => string 'http://www.paddsolutions.com' (length=28)
          private 'target' => string '_new' (length=4)
          private 'css_class' => string '' (length=0)
      protected 'name' => string 'Square Ad 3 (125x125)' (length=21)
      protected 'description' => string 'The advertisement will be posted at the side bar.' (length=49)
  5 => 
    object(Padd_Input_Advertisement)[217]
      protected 'keyword' => string 'magaling_ads_125125_4' (length=21)
      protected 'value' => 
        object(Padd_Advertisement)[216]
          private 'img_url' => string 'http://localhost/TestSite/wp-content/themes/magaling/images/advertisement-125x125.jpg' (length=86)
          private 'alt_desc' => string 'Padd Solutions' (length=14)
          private 'web_url' => string 'http://www.paddsolutions.com' (length=28)
          private 'target' => string '_new' (length=4)
          private 'css_class' => string '' (length=0)
      protected 'name' => string 'Square Ad 4 (125x125)' (length=21)
      protected 'description' => string 'The advertisement will be posted at the side bar.' (length=49) 
```

我不知道为什么您的脚本中的值会丢失，但是您使用的主题或调用函数的方式中存在缺失或错误。顺便说一下，提供的信息还不够。

希望这可以帮助。

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2012-11-08T05:31:14.293

所以，我想出了一个解决这个问题的方法，使代码按预期工作。它不能解决根本原因，但它更像是一种解决方法。

在 __construct 函数中，我添加了：

```
$this->value2 = $this->value; 
```

然后在导致错误的代码中我更改了：

```
$this->value->get_alt_desc() 
```

至

```
$this->value2->get_alt_desc() 
```

所以所有的代码都在工作，除了一个变量 $this->value 失去了它的价值，一旦我使用了一个不同的变量名，一切都按照它应该有的方式工作。

# ios - 保存和删除保存的对象IOS

> ID：13244322
> 
> 赞同：0
> 
> 时间：2012-11-06T04:20:22.327
> 
> 标签：ios, nskeyedarchiver, nscoding

我有一个相当简单的类，它代表一个玩家为另一个玩家创建的游戏，在他们的游戏被服务器发送给另一个玩家之前，我想实现一种持久性，以防出现问题，即崩溃。因此，他们正在创建的游戏的当前状态被保存，因此如果出现问题，他们可以继续创建。

查看保存对象的各种方法，看起来，使用 NSKeyedarchiver 的 NScoding 是我最好的选择，因为它不是大量数据......我的问题是你可以删除通过 NSCoding 保存的任何内容吗？因为一旦成功将对象发送给其他玩家，我不想将其保留在手机上，因为目前我的想法是检查启动时是否保存了任何内容，以及是否有任何内容代表正在创建的游戏未完成，这也假设我正在保存到 [NSUserDefaults standardUserDefaults]。

另一个问题，您可以将多个相同的对象保存到 standardUserDefaults 并且它知道如何区分它们还是只是覆盖它们？如果是这种情况，我可能必须考虑每个文件路径的唯一性。

there are many other questions but these are the most important ones and will hopefully convey my idea across enough to get a some what clear answer.

Thanks in advance.

EDIT: So i know you can delete docs so this may pretty much be answered i will report back when i get it working in the meantime any insights would still be helpful as to maybe speed up my approach.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T06:38:34.357

所以是的你可以在 NSuserDefaults 之外保存和删除没问题...如果你想知道这里的方法

[http://www.raywenderlich.com/1914/how-to-save-your-app-data-with-nscoding-and-nsfilemanager](http://www.raywenderlich.com/1914/how-to-save-your-app-data-with-nscoding-and-nsfilemanager)

这帮助很大

# haxe - Haxe 的自动错误突出显示

> ID：13244323
> 
> 赞同：2
> 
> 时间：2012-11-06T04:21:11.117
> 
> 标签：haxe

是否有任何适用于 Haxe 编程语言的工具或 IDE 可以自动突出显示在 Haxe 源代码中检测到的错误，例如 Eclipse IDE 的自动 Java 错误突出显示？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T06:50:08.980

从这里挑选：http: [//haxe.org/com/ide](http://haxe.org/com/ide)

正如 EzeQL 所说，FlashDevelop 是最好的选择。但是它不能在 Windows 之外运行。

不在列表中，但值得指出的是 MonoDevelop[插件](http://addins.monodevelop.com/Project/Index/41)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T06:03:17.593

我不知道有任何人在做这样的事情。如果您喜欢使用 IDE，最完整的选项是 Flashdevelop 恕我直言。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-02-14T02:03:37.560

Visual Studio Code的[Haxe 扩展通过](https://marketplace.visualstudio.com/items?itemName=nadako.vshaxe)[诊断](https://github.com/vshaxe/vshaxe/wiki/Diagnostics)支持这一点。默认情况下，它们会在保存时更新，但如果您启用自动保存功能，它们将自动更新。

```
"files.autoSave": "afterDelay" 
```

![](../Images/8ed611b82928033a1a9a8065202c12a0.png)

# ios - 如何在 iOS 中重复 UITextView 的背景图像？

> ID：13244327
> 
> 赞同：0
> 
> 时间：2012-11-06T04:21:43.390
> 
> 标签：ios, xcode

我正在处理一个遇到问题的项目，当我滚动 UITextView 时，我为 UITextView 提供了背景图像，图像重复不固定，所以请告诉任何想法来修复 UITextView 的 UIImage。

![在此处输入图像描述](../Images/378750cb9f9dc940dcd23406b8707fd7.png) 问候， Raja.I

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T04:32:09.870

试试这个

```
textView.backgroundColor = [UIColor colorWithPatternImage:[UIImage imageNamed: @"Image.png"]]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T05:01:25.363

最简单的方法。
将 textView 背景颜色设置为清除并将 UIImageView 与背景图像一起添加为 UITextView 之前的子视图。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T04:53:34.820

```
 Use following instance method of UIImage

    - (UIImage *)resizableImageWithCapInsets:(UIEdgeInsets)capInsets 
```

它将返回您调整大小的图像，不会重复。在 iOS 5.0 及更高版本中可用。您可以从文档中获得更多帮助（http://developer.apple.com/library/ios/#documentation/uikit/reference/UIImage_Class/Reference/Reference.html）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-06T06:32:55.633

参考此链接[重复图像](http://www.apeth.com/iOSBook/ch15.html)

```
UIImage* mars = [UIImage imageNamed:@"Mars.png"];
UIImage* marsTiled = [mars resizableImageWithCapInsets:UIEdgeInsetsZero];
UIImageView* iv = [[UIImageView alloc] initWithFrame:
                   CGRectMake(20,5,mars.size.width,mars.size.height*4)];
//image width is equal to text field width

iv.image = marsTiled;
[self.window.rootViewController.view addSubview:iv]; 
```

# php - 通过 PDO 和令牌更新 MySQL 数据库 - 所有参数都设置为数据集中的最后一个值

> ID：13244328
> 
> 赞同：0
> 
> 时间：2012-11-06T04:21:49.973
> 
> 标签：php, mysql, sql, pdo

正如标题所述：我正在尝试使用 PDO 和令牌更新 MySQL 数据库中的特定记录，以防止任何注入。

这是我的代码：

一些有助于构建查询的数组：

```
$id = 1234
$values = array ('a','b','c',);
$variables = array ($A, $B, $C); 
```

通过循环构建的查询：

```
$sql =  "UPDATE table1 SET ";   
        foreach($values as $value)
        {
        $sql .="$value = :$value, ";
        }
        $sql = rtrim($sql,', ');    
        $sql .=" WHERE id = '$id'"; 
```

通过 PDO 执行查询：

```
try     
{
$pdo = new PDO('mysql:host=localhost; dbname=db01', $username, $password);
$pdo->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);

$stmt = $pdo->prepare($sql);
foreach(array_combine($values, $variables) as $value=>$variable)
{
$stmt->bindParam(":$value", $variable);
}

$stmt->execute(); 
```

结果：指定记录中的每个字段（匹配 $id）都设置为相同的值，该值始终等于数组中列出的最后一个变量的内容（在此示例中，它们都将包含 $C 中保存的值)

回显 SQL 查询表明它已正确构造。

有任何想法吗？感谢您的考虑

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T03:12:54.750

从评论扩展：

在你的`foreach`循环中， the`$variable`是一个*值*，而不是一个*引用*，所以当你使用时`mysqli_stmt::execute()`，你实际上最终使用了 last `$variable`。

为避免这种情况，您必须使用以下内容：

```
$cache=array_combine($values,$variables);
foreach($cache as $value=>$variable)
{
  $stmt->bindParam(":$value",$cache[$value]);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T06:16:49.483

你必须这样做：

```
 foreach(array_combine($values, $variables) as $value=>$variable)
  {
    $stmt->bindParam(":$value", $variable);
    $stmt->execute();
   } 
```

在 for 循环中执行您的查询。循环完成后不要执行查询，因为它只会获取数组的最后一个值。它只会执行一次。

# jquery - jQuery 在点击时显示 div，在多个嵌套 div 中隐藏其他

> ID：13244329
> 
> 赞同：2
> 
> 时间：2012-11-06T04:21:52.480
> 
> 标签：jquery, jquery-plugins

当我将它们放在多个 div 中时，它似乎不再起作用。我错过了什么？谢谢

演示：http: [//jsfiddle.net/HVfaA/206/](http://jsfiddle.net/HVfaA/206/)

```
<div id="content">
<div id="first">
<div id="first-1">
<div id="first-2">
<div id="first-3">
<li><a href="#" class="one">One</a></li>
<li><a href="#" class="two">Two</a></li>
<li><a href="#" class="three">Three</a></li>
<li><a href="#" class="four">Four</a></li>
</div>
</div>
</div>
</div>
<div id="second">
<div id="second-1">
<div id="second-2">
<div id="second-3">
<div id="one">One</div>
<div id="two">Two</div>
<div id="three">Three</div>
<div id="four">Four</div>
</div>
</div>
</div>
</div>
</div>

$("div#second > div").hide();
var divs = $("#one, #two, #three, #four");
$('li a').on('click', function () {
$(divs).hide();
$("#" + $(this).attr("class")).show();
});​ 
```

此功能是 Peter Ajtai 提供的功能的修改版本[jQuery 单击时显示 div，隐藏其他功能](https://stackoverflow.com/questions/3494975/jquery-show-div-on-click-hide-the-others)

下面的原始问题：我正在尝试使用包含链接的单独 div 并显示 div。目前当点击链接时，隐藏的 div 不显示。谢谢你的帮助。这是 jsfiddle 上的演示 - [http://jsfiddle.net/HVfaA/184/](http://jsfiddle.net/HVfaA/184/)

```
<div id="first">
<li><a href="#" class="one">One</a></li>
<li><a href="#" class="two">Two</a></li>
<li><a href="#" class="three">Three</a></li>
<li><a href="#" class="four">Four</a></li>
</div>
<br /><br />
<div id="second">
<div id="one">One</div>
<div id="two">Two</div>
<div id="three">Three</div>
<div id="four">Four</div><br/><br/>
</div>

// Optional code to hide all divs
$("div#second").hide();

// Selector
var divs = $("#one, #two, #three, #four");

// Show chosen div, and hide all others
$("li a").click(function () 
{
$("#" + $(this).attr("class")).show();
divs.not(("#" + $(this).attr("class"))).hide();
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T04:39:28.390

问题是您已经将所有 div 包装在`div#second`其中，然后隐藏了该元素。因为它们的父级是隐藏的，所以子级 div ( `#one, #two, #three, #four`) 都不会出现。

如果你想隐藏所有的 div 开始尝试

```
// Optional code to hide all divs
$("div#second > div").hide(); 
```

这没有直接关系，但顺便说一句，您可以`divs.not(("#" + $(this).attr("class"))).hide();`通过改变隐藏 div 的顺序（将它们全部隐藏，然后显示一个）来停止。此外，由于您已经存储了它们，因此`divs`您也可以直接引用它们。

```
// Show chosen div, and hide all others
$("li a").click(function () {
    $(divs).hide();
    $("#" + $(this).attr("class")).show();
});​ 
```

请参阅更新的小提琴[http://jsfiddle.net/HVfaA/190/](http://jsfiddle.net/HVfaA/190/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-06T04:42:37.230

只需在单击处理程序中显示您的 div 即可：

```
$("div#second").show(); 
```

演示：http: [//jsfiddle.net/HVfaA/191/](http://jsfiddle.net/HVfaA/191/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T21:27:55.327

CSS：

```
.Main-Div {position: relative; left: -9999px;}
.Inner-Div {position: relative; left: 9999px;} 
```

Javascript：

```
// Optional code to hide all divs
$("div#second > div").addClass('Main-Div');

// Selector
var divs = $("#one, #two, #three, #four");

// Show chosen div, and hide all others
$('li a').on('click', function () {
    $(divs).removeClass('Inner-Div');
    $("#" + $(this).attr("class")).addClass('Inner-Div');
}); 
```

[小提琴](http://jsfiddle.net/HVfaA/208/)

# android - UI 在屏幕方向上没有响应 - Android

> ID：13244332
> 
> 赞同：1
> 
> 时间：2012-11-06T04:22:12.873
> 
> 标签：android

我正在使用媒体播放器开发应用程序。我用两种布局处理了屏幕方向。我使用了 onsavedInstancestate 和 onrestoreinstancesstate。在屏幕旋转时，布局发生变化，媒体播放器状态被保留，但 UI 没有响应。

我已经保存并保留了 mediaplayer 对象的状态

```
 public  Object  onRetainNonConfigurationInstance() 
         {
                HashMap<String,Object> player = new HashMap<String,Object>();
                MediaPlayer instance = mp;
                mp = null;
                MediaPlayer instance1 = mp1;
                mp1 = null;
                player.put("mp", instance);
                player.put("mp1", instance1);
                return player;

          }

 if(getLastNonConfigurationInstance()!=null)
                {

                 playerhandle = (HashMap<String, Object>) getLastNonConfigurationInstance();
                 mp = (MediaPlayer)playerhandle.get("mp");
                 if (mp == null) 
                 {
                    mp = new MediaPlayer();
                 }
                 mp1 = (MediaPlayer)playerhandle.get("mp1");
                 if (mp1 == null) 
                 {
                   mp1 = new MediaPlayer();
                 }
                 } 
```

并且还保留了 onsavedinstancestate 和 onrestoreinstancestate 的数据。媒体播放器保留屏幕方向后的状态（音频播放而不解释屏幕方向），但在方向更改后 UI 没有响应。无法解决问题......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T04:31:39.560

如果您在 onCreate 中将点击侦听器添加到您的按钮，则需要将侦听器添加到 onConfigurationChanged 中创建的新按钮对象。

您可以考虑在 XML 文件中使用 android:onClick 属性，而不是在代码中设置点击侦听器。这是避免这个问题的好方法。

要从 XML 中使用 android:onClick，请执行以下操作：

```
<Button
    android:id="@+id/addnote"
    android:onClick="addNoteMethod"
    ....
    /> 
```

然后在您的活动中，定义方法：

```
public void addNoteMethod(View view) {
    createNote();
} 
```

android:onClick 方法的名称是完全任意的；它只需要将您的活动中的方法与正确的签名（void（View））相匹配。当点击时，该方法将被调用，其方式与为 OnClickListener 调用 onClick 方法的方式完全相同。

使用 android:onClick 时，您不需要调用 setOnClickListener（甚至不需要在 onCreate 中检索对按钮的引用，除非您需要它用于其他用途）。

# python - 多线程访问 Python bytearray

> ID：13244336
> 
> 赞同：5
> 
> 时间：2012-11-06T04:22:28.037
> 
> 标签：python, multithreading

似乎由于访问 NumPy 数组数据不需要调用 Python 解释器，因此 C 扩展可以在释放 GIL 后操作这些数组。例如，在[这个线程](https://stackoverflow.com/questions/8824739/global-interpreter-lock-and-access-to-data-eg-for-numpy-arrays)中。

内置的 Python 类型 bytearray 支持[Buffer Protocol](http://docs.python.org/3/c-api/buffer.html)，其中一个成员是

> 无效***buf**
> 
> 指向缓冲区字段描述的逻辑结构开始的指针。[...] 对于连续数组，值指向内存块的开头。

我的问题是，在释放 GIL (Py_BEGIN_ALLOW_THREADS) 后，C 扩展是否可以操作此**buf**，因为访问它不再需要调用 Python C API？或者 Python 垃圾收集器的性质是否禁止这样做，因为 bytearray 及其 buf 可能在执行期间被移动？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T11:25:55.153

为了澄清写成评论的简短答案：您可以在不持有 GIL 的情况下访问 *buf 数据，前提是您确定 Py_buffer 结构在没有 GIL 的情况下运行时由线程“拥有”。

为了完整起见，我应该补充一点，这可能会为（非常遥远的）崩溃风险打开大门：如果无 GIL 线程在 *buf 读取数据，而同时另一个持有 GIL 的线程正在运行 Python 代码更改相同的数据 (bytearray[index]=x) 然后 GIL-less 线程可以看到其脚下数据的意外更改。反之亦然，甚至更烦人（但仍然是理论上的）：如果无 GIL 线程更改 *buf 处的数据，那么其他持有 GIL、运行 Python 的线程可能会看到奇怪的结果，甚至可能在执行某些操作时崩溃复杂的读取操作，例如 bytearray.split()。

# ruby-on-rails - 检查电子邮件是否已在以下 if 语句（Rails）中被接收？

> ID：13244345
> 
> 赞同：1
> 
> 时间：2012-11-06T04:23:10.563
> 
> 标签：ruby-on-rails, ruby, if-statement, omniauth

我有以下动作：

**用户.rb：**

```
 def omniauth_create
    auth = request.env["omniauth.auth"]
    user = User.from_omniauth(env["omniauth.auth"])
    unless user.email.blank?
      if user.id.nil?
        # Save the user since he hasn't been created yet
        user.save!
      end
      sign_in user
      redirect_back_or user
    else
      # Send user to a form to fill his email
      #session[:omniauth] = request.env['omniauth.auth'].except('extra')
      redirect_to(enter_email_path(oprovider: user.provider,
                                   ouid: user.uid,
                                   oname: user.name,
                                   opassword: user.password,
                                   opassword_confirmation: user.password))
    end
  end 
```

它执行以下操作：

*   如果用户的`email`不是空白，则让他登录，并将他重定向到他的个人资料（如果他`id`是，则保存他`nil`。换句话说，如果他还没有被创建）。
*   如果用户`email`是空白的，将他发送到`enter_email_path`（用户可以输入他的电子邮件的地方）。

现在我想添加另一个 if 语句，如果`email`已经被使用，它会闪烁一个错误，并将用户重定向到`root_path`

我不太确定如何做到这一点，有什么建议吗？（以及在哪里放置 if 语句？）

**编辑：**

奇怪，得到了这个而不是重定向到根路径：

```
Validation failed: Email has already been taken 
```

我不知道这是否有帮助，但这里是`from_omniauth`：

```
 def self.from_omniauth(auth)
    find_by_provider_and_uid(auth["provider"], auth["uid"]) || User.create_with_omniauth(auth)
  end

  def self.create_with_omniauth(auth)
    new do |user|
      user.provider = auth["provider"]
      user.uid = auth["uid"]
      user.name = auth["info"]["name"]
      user.email = auth["info"]["email"]
      user.password = user.password_confirmation = SecureRandom.urlsafe_base64(n=6) 
    end
  end 
```

现在的代码：

**用户.rb**：

```
# if user.email.present?
  if user.id.nil?
    # User.find_by_email(user.email).present?
    if User.exists?(:email => user.email)
      redirect_to root_path
    end
    user.save!
  end
  sign_in user
  redirect_back_or user
else 
```

（其余的没有改变）。

似乎代码忽略了该`if User.exists?(:email => user.email)`部分？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T04:45:41.910

Rails 有一个方法来检查一个[`exists`](http://apidock.com/rails/ActiveRecord/FinderMethods/exists?)基于参数的对象。你可以这样做：

```
if user.email.present?
  if user.id.nil?
    if User.exists?(:email => user.email)
      # return redirect email is already token
    end

    # save user
  end
  # sign_in user
else
  # redirect to get email
end 
```

顺便说一句，我不熟悉 Omniauth，所以我不确定什么是正确的，但[`new_record?`](http://apidock.com/rails/ActiveRecord/Base/new_record?)通常在检查对象是否已保存时使用。如果你有一个`id`，它通常是。
如果您感到困惑，您可以在您的用户模型中创建函数以便更好地阅读，例如

```
class User
  def new?
    id.nil?
  end

  def email_taken?
    self.class.exists?(:email => email)
  end
end

# back to controller
if user.email.present?
  if user.new?
    if user.email_taken?
      # return redirect email is already token
    end

    # save user
  end
  # sign_in user
else
  # redirect to get email
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T04:56:50.990

试试这个

```
 def omniauth_create
    auth = request.env["omniauth.auth"]
    user = User.from_omniauth(env["omniauth.auth"])
    if user.email.present?
      if user.id.nil?
        if User.find_by_email(user.email).present?
          # send error email already be taken
          # or login with that user that means define that user for sign in
        else
          # save user and login with that user
          user.save!  
        end
        sign_in user
        redirect_back_or user
      end 
    else
      # Send user to a form to fill his email
      # session[:omniauth] = request.env['omniauth.auth'].except('extra')
      redirect_to(enter_email_path(oprovider: user.provider,
                                   ouid: user.uid,
                                   oname: user.name,
                                   opassword: user.password,
                                   opassword_confirmation: user.password))

    end 
```

更新

你也可以使用[find_or_create](https://stackoverflow.com/questions/3046607/rails-find-or-create-by-more-than-one-attribute)方法

```
def self.find_or_create(attributes)
  Model.where(attributes).first || Model.create(attributes)
end 
```

**更新 2**

在您的模态文件中

```
 class << self
    def create_with_omniauth(auth)
      create! do |user|
        user.provider = auth['provider']
        user.uid = auth['uid']
        if auth['info']
          user.uid = auth['uid'] || ""
          user.name = auth['info']['name'] || ""
          user.email = auth['info']['email'] || ""
          user.access_token = auth['credentials']['token'] || ""
          user.oauth_token_secret = auth['credentials']['secret'] || ""
          user.oauth_token = auth['credentials']['token'] || ""
        end
      end
    end
  end 
```

在您的控制器中

```
 def create
    auth = request.env["omniauth.auth"]
    user = User.where(:provider => auth['provider'],:uid => auth['uid']).first || User.create_with_omniauth(auth)
    session[:user_id] = user.id
    redirect_to root_url 
  end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T04:36:29.360

不确定您是否需要 rails 答案或 SQL 答案，但您可以使用以下 SQL 来查找您的回复：

```
select id from users where email = :email 
```

如果返回 0 行，则电子邮件不存在，如果返回 1，则电子邮件确实存在。我想你也可以使用

```
Users#find(:first, :conditions => 'email = #{email}') 
```

但我没有测试过这个。

# asp.net-mvc-3 - 如何为 MVC3 站点编写 LogExceptionAttribute？

> ID：13244346
> 
> 赞同：0
> 
> 时间：2012-11-06T04:23:11.247
> 
> 标签：asp.net-mvc-3, logging, exception-handling, attributes

在每个动作中，我写道：

```
public ActionResult Foo()
{
    try
    {
        // Do something
    }
    catch(Exception ex)
    {
        Logger.Error("Foo()", ex);
    }
    ...
} 
```

我知道 MVC3 有能力在 Global.asax 中“注册全局过滤器”，所以我想写一个自定义的 LogExceptionAttribute。这将：

1.  **哪个 Action**导致**什么 Exception**的日志信息。调用我的 Logger API：

    Logger.Error(string actionName, Exception ex)

2.  再次抛出异常。这样 web.config 中的 CustomError 将显示用户错误页面。

如何实施？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T04:40:33.877

试试这个

```
 public class HandleErrorHmAttribute : HandleErrorAttribute
        {
            public override void OnException(ExceptionContext context)
            {
                base.OnException(context);
                new WebRequestErrorEventMvc("An unhandled exception has occurred.", this, 103005, context.Exception).Raise();
            }
        }

        public class WebRequestErrorEventMvc : WebRequestErrorEvent
        {
            public WebRequestErrorEventMvc(string message, object eventSource, int eventCode, Exception exception) : base(message, eventSource, eventCode, exception) { }
            public WebRequestErrorEventMvc(string message, object eventSource, int eventCode, int eventDetailCode, Exception exception) : base(message, eventSource, eventCode, eventDetailCode, exception) { }
       } 
```

# javascript - HTML、Javascript：ajax 调用和更改 iframe 源之间的区别

> ID：13244347
> 
> 赞同：1
> 
> 时间：2012-11-06T04:23:33.030
> 
> 标签：javascript, html, ajax, iframe

背景：我正在尝试编写一个javascript函数来喜欢tumblr上的某个帖子，基于这个[链接](https://stackoverflow.com/questions/6970156/tumblr-like-heart-button-script-on-homepage)。我尝试使用 ajax 调用而不是更改 iframe 的源，但它不起作用。当然，更改 iframe 的来源是可行的。

那么，有什么区别使它不起作用呢？

```
$baseUrl = 'http://tumblr.com/like/';

function LikePost( $postID, $reblogUrl )
{
    /*
    http://www.tumblr.com/<command>/<oauthId>?id=<postId>
    <command>: like or unlike
    <oauthId>: last eight characters of {ReblogURL}
    <postId>: {PostID}

     Exemple of Url
     http://www.tumblr.com/like/fGKvAJgQ?id=16664837215

    */
    $oauthId = $reblogUrl.substring( $reblogUrl.length - 8, $reblogUrl.length);
    $likeUrl = $baseUrl + $oauthId + '?id=' + $postID;

    $.ajax({
        url: $likeUrl,
        type:'POST'            
        });

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T04:26:48.443

AJAX 请求受相同域策略的约束，但有些例外不值得列出，因为除非您控制两个域，否则它们不起作用。

在这种情况下，您正在从您的网站调用一个 tumblr 域，而您无法通过 AJAX 进行此操作。但是，iframe、script 元素和 img 元素可以指向任何域，因此如果 like url 没有向您返回任何内容，您可以使用这些方式中的任何一种来记录 like。

如果您不想使用 iframe，您可以使用的另一种方法是通过 AJAX 向您的服务器发出请求，然后将该请求代理到 tumblr。您的服务器可以访问它想要的任何 url。

但是，iframe 方法是最简单的。我建议走那条路，因为你已经开始工作了。;)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T04:34:43.487

它们用于不同的目的。正如上面提到的 jmort253，`AJAX`调用仅适用于同一个域，而 iframe 可能跨越不同的域。但如果您有兴趣从同一域加载数据，`AJAX`可能是更好的选择。很多时候，在使用 IFrame 时，您会在页面的标签栏上看到一个正在加载的标志，表明它内部的某些内容正在加载（正在加载的是 IFrame 页面，而不是整个页面），这是您不想要的用户看到，因为那是无缝加载数据*的*关键`AJAX`，给用户一种数据几乎同时到来的错觉。有了`AJAX`，你就不会有这些问题了。

即使你想从不同的域加载数据，而 Javascript 本身不能胜任这项任务，你可以使用 PHP 来完成加载部分，然后使用 Javascript 从那里获取数据。

# c# - 无法从标签中获取 javascript 值

> ID：13244350
> 
> 赞同：3
> 
> 时间：2012-11-06T04:23:40.393
> 
> 标签：c#, javascript, asp.net

我是编程新手，请原谅我。

我有一个 .js 游戏，它输出一个名为“score”的变量。

我要求该变量能够显示在我的 asp 标签上，然后获取其值用于数据库存储 onClick()

目前我能够做的是：

@.js：

```
 document.getElementById('score').value = score; 
```

@.aspx：

```
 <asp:Label runat="server"  ID="score"></asp:Label> 
```

分数现在反映在这个标签上。但是，我需要执行一个附加功能，即从标签中获取“分数”的值并将其用作 C# 中的字符串

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T04:25:14.867

使用服务器控件的 ClientID，因为 id 分数会在 asp 生成的 html 中发生变化。

**改变**

```
document.getElementById('score').value = score; 
```

**至**

```
document.getElementById('<%= score.ClientID %>').value = score; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T06:42:39.017

您能否尝试以下建议。

## 在 .js 中

```
document.getElementById('<%= lblScore.ClientID %>').innerHTML = 'Test Value';
document.getElementById('<%= hdnScore.ClientID %>').value = 'Test Value'; 
```

## 在 .aspx 中

```
<asp:Label runat="server" ID="lblScore"></asp:Label>
<asp:HiddenField ID="hdnScore" runat="server" /> 
```

## 点击事件

```
var score = hdnScore.Value; 
```

希望这将帮助您解决问题。

# android - ListView onClick 处理程序

> ID：13244351
> 
> 赞同：0
> 
> 时间：2012-11-06T04:23:55.397
> 
> 标签：android, android-layout, android-intent

我有一个应用程序，其中我的设计有 2 个选项卡。Tab1 具有列表视图，我希望单击每个列表项以提供详细信息。但是在单击项目时，选项卡设计和 Tab2 数据和设计必须保持相同。那么我可以用相同的设计开始新的意图吗？如果是的话应该复制设计代码还是我应该为标签视图设计和每个标签制作单独的类？

或者有什么方法可以更新选项卡 1 的视图？而且，如果我更新 tab1 的视图，将按下后退按钮将用户带到上一个视图或启动我的应用程序？？？

代码 ：

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);        

    requestWindowFeature(Window.FEATURE_CUSTOM_TITLE);     
    setContentView(R.layout.activity_main);
    getWindow().setFeatureInt(Window.FEATURE_CUSTOM_TITLE, R.layout.window_title);

    TabHost tabhost=(TabHost) findViewById(R.id.tabHost);
    tabhost.setup();

    tabhost.getTabWidget().setDividerDrawable(R.drawable.divider2);

    TabSpec spec1=tabhost.newTabSpec("Tab 1");
    spec1.setContent(R.id.tab1);
    spec1.setIndicator("Tab 1");

    TabSpec spec2=tabhost.newTabSpec("Tab 2");
    spec2.setIndicator("Tab 2");
    spec2.setContent(R.id.tab2);

    tabhost.addTab(spec1);
    tabhost.addTab(spec2);             

    tabhost.getTabWidget().getChildTabViewAt(0).setBackgroundDrawable(null);
    tabhost.getTabWidget().getChildTabViewAt(1).setBackgroundDrawable(null);

    String values[]={"Apple", "IOS", "Google", "Android"};

    ListView listview=(ListView) findViewById(R.id.listview);

    ArrayAdapter<String> adapter=new ArrayAdapter<String>(this, R.layout.listviewstyle,R.id.textlist, values);
    //ArrayAdapter<String> adapter2=new ArrayAdapter<String>(this, R.id.textlist2);           

    listview.setAdapter(adapter);

    listview.setOnItemClickListener(new OnItemClickListener() {

        @Override
        public void onItemClick(AdapterView<?> parent, View view, int position, long id) 
        {
            //I want to update Tab1 now using this function and change into a completely new layout

                    TextView tv=(TextView) findViewById(R.id.frame2text);
            tv.setText(data);

            frm1=(FrameLayout) findViewById(R.id.frame1);
            frm2=(FrameLayout) findViewById(R.id.frame2);

            frm1.setVisibility(View.GONE);
            frm2.setVisibility(View.VISIBLE);

            islast=true;

        }
    });               

} 
```

我的 android_main.xml

```
<?xml version="1.0" encoding="utf-8"?>

<TabHost xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:id="@+id/tabHost"
android:theme="@android:style/Theme.Black.NoTitleBar.Fullscreen">

<TabWidget 
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:id="@android:id/tabs"
android:tabStripEnabled="false"     
android:background="@drawable/tabwstyle"/>

<FrameLayout
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:id="@android:id/tabcontent">

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" 
    android:paddingTop="60dp"
    android:id="@+id/tab1">     

    <FrameLayout 
        android:id="@+id/frame1"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent">

    <ListView
        android:id="@+id/listview"
        android:layout_width="fill_parent"    
        android:layout_height="wrap_content" 
        android:divider="@drawable/divider"
        android:dividerHeight="10dp" 
        android:paddingTop="15dp"
        android:smoothScrollbar="true"/>

    </FrameLayout>

    <FrameLayout 
        android:id="@+id/frame2"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:visibility="gone">
        <TextView
            android:layout_width="fill_parent"
            android:layout_height="50dp"
            android:text="@string/testtxt"
            android:id="@+id/frame2text"/>
    </FrameLayout>
</LinearLayout>

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical"
    android:paddingTop="60dp"
    android:id="@+id/tab2">

    <TextView
        android:layout_width="fill_parent"
        android:layout_height="50dp"
        android:text="@string/testtxt"/>

</LinearLayout>
  </FrameLayout>
 </TabHost> 
```

日志输出

```
11-06 18:50:06.990: E/AndroidRuntime(437): FATAL EXCEPTION: main
11-06 18:50:06.990: E/AndroidRuntime(437): java.lang.ClassCastException: android.widget.LinearLayout
11-06 18:50:06.990: E/AndroidRuntime(437):  at com.example.pain.killer.PainKiller$1.onItemClick(PainKiller.java:64)
11-06 18:50:06.990: E/AndroidRuntime(437):  at android.widget.AdapterView.performItemClick(AdapterView.java:284)
11-06 18:50:06.990: E/AndroidRuntime(437):  at android.widget.ListView.performItemClick(ListView.java:3382)
11-06 18:50:06.990: E/AndroidRuntime(437):  at android.widget.AbsListView$PerformClick.run(AbsListView.java:1696)
11-06 18:50:06.990: E/AndroidRuntime(437):  at android.os.Handler.handleCallback(Handler.java:587)
11-06 18:50:06.990: E/AndroidRuntime(437):  at android.os.Handler.dispatchMessage(Handler.java:92)
11-06 18:50:06.990: E/AndroidRuntime(437):  at android.os.Looper.loop(Looper.java:123)
11-06 18:50:06.990: E/AndroidRuntime(437):  at android.app.ActivityThread.main(ActivityThread.java:4627)
11-06 18:50:06.990: E/AndroidRuntime(437):  at java.lang.reflect.Method.invokeNative(Native Method)
11-06 18:50:06.990: E/AndroidRuntime(437):  at java.lang.reflect.Method.invoke(Method.java:521)
11-06 18:50:06.990: E/AndroidRuntime(437):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
11-06 18:50:06.990: E/AndroidRuntime(437):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
11-06 18:50:06.990: E/AndroidRuntime(437):  at dalvik.system.NativeStart.main(Native Method) 
```

我的 listviewststyle.xml

```
<?xml version="1.0" encoding="utf-8"?>

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="wrap_content" >

<!--      <ImageView
    android:contentDescription="@string/img"
    android:id="@+id/icon"
    android:layout_width="40dp"
    android:layout_height="30dp"        
    android:layout_marginRight="10dp"
    android:layout_marginTop="4dp"
    android:src="@drawable/ic_launcher" >  
</ImageView> -->

<TextView  
android:id="@+id/textlist"  
android:layout_width="fill_parent" 
android:layout_height="wrap_content" 
android:textSize="16dp"
android:drawableLeft="@drawable/ic_launcher"
android:drawablePadding="6dp"
android:paddingTop="5dp"
android:typeface="serif"/>

<!--    <TextView 
    android:layout_marginTop="35dp"
    android:layout_marginLeft="-310dp"
    android:id="@+id/textlist2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" 
    android:text="@string/testtxt"/> -->

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T04:32:17.513

`ArrayList`根据您的需要更新并使用tab1`notifydatasetchanged()`来更新列表项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T05:34:53.493

你好布鲁克林你的列表项点击工作正常。

要解决您的问题，您必须使用

> TabGroupActivity 扩展了 ActivityGroup

在同一选项卡下处理多个活动。

> 你可以通过[这里](https://github.com/pjq/ActivityGroupDemo)
> 
> 或者您可以在[此处查看带有标签的片段](http://thepseudocoder.wordpress.com/2011/10/04/android-tabs-the-fragment-way/)

我希望它可以帮助你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T05:45:29.690

使用您想要的新布局在相同的 xml 中创建另一个 FrameLayout。设置 framelayout 可见性 GONE。

现在在列表视图项目的项目单击上，第二个框架布局的可见性是可见的，而第一个框架布局是 GONE。

用这个更新你上面的代码

```
FrameLayout fm1,fm2;
boolean islast;
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);        

requestWindowFeature(Window.FEATURE_CUSTOM_TITLE);     
setContentView(R.layout.activity_main);
getWindow().setFeatureInt(Window.FEATURE_CUSTOM_TITLE, R.layout.window_title);

TabHost tabhost=(TabHost) findViewById(R.id.tabHost);
tabhost.setup();

tabhost.getTabWidget().setDividerDrawable(R.drawable.divider2);

TabSpec spec1=tabhost.newTabSpec("Tab 1");
spec1.setContent(R.id.tab1);
spec1.setIndicator("Tab 1");

TabSpec spec2=tabhost.newTabSpec("Tab 2");
spec2.setIndicator("Tab 2");
spec2.setContent(R.id.tab2);

tabhost.addTab(spec1);
tabhost.addTab(spec2);             

tabhost.getTabWidget().getChildTabViewAt(0).setBackgroundDrawable(null);
tabhost.getTabWidget().getChildTabViewAt(1).setBackgroundDrawable(null);

String values[]={"Apple", "IOS", "Google", "Android"};
 fm1 = (FrameLayout) findViewById(R.id.fm1);
fm2 = (FrameLayout) findViewById(R.id.fm2);

ListView listview=(ListView) findViewById(R.id.listview);

ArrayAdapter<String> adapter=new ArrayAdapter<String>(this, R.layout.listviewstyle,R.id.textlist, values);
//ArrayAdapter<String> adapter2=new ArrayAdapter<String>(this, R.id.textlist2);           

listview.setAdapter(adapter);

listview.setOnItemClickListener(new OnItemClickListener() {

    @Override
    public void onItemClick(AdapterView<?> parent, View view, int position, long id) 
    {
        //I want to update Tab1 now using this function and change into a completely new layout
            Toast.makeText(MainActivity.this,"ITEM CLICK", Toast.LENGTH_SHORT).show();  
            fm1.setVisibility(View.GONE);
            fm2.setVisibility(View.VISIBLE);
            islast = true;

    }
});               
@Override
public void onBackPressed() {
    // TODO Auto-generated method stub
    super.onBackPressed();
    if (islast) {
        fm1.setVisibility(View.VISIBLE);
        fm2.setVisibility(View.GONE);
        islast = false;
        startActivity(new Intent(MainActivity.this,MainActivity.class));
    }else {
        finish();
    }
} 
```

}

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" 
android:paddingTop="60dp"
android:id="@+id/tab1">     

//Update HERE below given code

</LinearLayout> 
```

使用以下代码更新 tab1 的线性布局。

```
<FrameLayout
            android:id="@+id/fm1"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent" >

            <ListView
                android:id="@+id/listview"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:dividerHeight="10dp"
                android:paddingTop="15dp"
                android:smoothScrollbar="true" />
        </FrameLayout>

        <FrameLayout
            android:id="@+id/fm2"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:visibility="gone" >

            <TextView
                android:id="@+id/txt1"
                android:layout_width="fill_parent"
                android:layout_height="50dp" />
        </FrameLayout> 
```

# linux - 如何在 Linux 中终止 tcp 连接

> ID：13244354
> 
> 赞同：4
> 
> 时间：2012-11-06T04:24:11.237
> 
> 标签：linux, networking, tcp

我想终止一个连接（可能是 ESTABLISHED 或 FIN_WAIT_1 ）

windows API 提供了一个函数 "SetTcpEntry" 。

Linux中类似于“SetTcpEntry”的功能是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T04:30:05.993

您应该能够使用[close关闭代码中的套接字，如果您试图从 shell 中杀死它，请使用](https://web.archive.org/web/20111230025435/http://www.cs.vu.nl:80/~jms/socket-info.html)[netstat (1)](http://netbsd.gw.com/cgi-bin/man-cgi?netstat++NetBSD-current)找出哪个进程绑定到端口并使用[kill -9](http://netbsd.gw.com/cgi-bin/man-cgi?kill++NetBSD-current)杀死该进程-希望有帮助！

# grails - 没有标准构建器的嵌套属性的grails查询

> ID：13244357
> 
> 赞同：2
> 
> 时间：2012-11-06T04:25:13.413
> 
> 标签：grails, nested, grails-orm, hibernate-criteria

我的 grails 应用程序具有以下类

```
class Person {
    Address address
    // other attributes
}

class Address {
    String street
    City city
    // more attributes
} 
```

我想按街道名称的字母顺序查询前 5 个人。目前我做类似的事情

```
def criteria = Person.createCriteria();
def people = criteria.list(max:5) {
    address {
       order("street","asc")
    }
} 
```

这行得通。我只是想知道是否有更短的方法来做到这一点（可能没有标准构建器）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T05:49:59.520

实际上，我认为这是最清晰，最有效的方法。您可以尝试诸如[executeQuery](http://grails.org/doc/2.1.0/ref/Domain%20Classes/executeQuery.html)之类的事情，但老实说，我不确定这是否不那么冗长。如果您只是想缩短代码，则可以简化前两行：

```
def people = Person.createCriteria().list(max:5) {
... 
```

# c++ - 指向字符数组数组的指针

> ID：13244364
> 
> 赞同：1
> 
> 时间：2012-11-06T04:25:17.783
> 
> 标签：c++, arrays, pointers, char

好吧，这个让我难住了。我正在尝试将一组字符数组传递给我的类的构造函数。该类有一个私有属性，它存储一个指向字符数组数组的指针。然后该类可以通过指针处理数组。

下面是一些演示所需功能的代码。但是，它不会编译。如何修复此代码以使其正常工作？

```
using namespace std;

const int MAX_LINES = 10, MAX_STRING = 80;

class Alphabetizer{
    public:
        Alphabetizer(char * inArray[][MAX_STRING]) : input(inArray){};

    private:
        char * input[MAX_LINES][MAX_STRING];
};

int main(){
    char charArray[MAX_LINES][MAX_STRING];
    Alphabetizer theAlaphBet(charArray);
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T04:35:07.263

如果您坚持使用与 C 兼容的字符指针，我认为使用 a`char **`作为`input`. 这更像是执行此操作的常用方法（至少在 C 中），并且它具有不强制您定义最大字符串大小的额外好处。

正如其他人指出的那样，您可以利用`std::string`它，这可能是一个更好的选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T12:59:56.027

没有看到编译错误很难说，但我认为问题可能出在这一行：

```
Alphabetizer theAlaphBet(charArray); 
```

您直接传递数组而不是它的地址。它应该是：

```
Alphabetizer theAlaphBet( &charArray ); 
```

但是，我认为您可能使事情过于复杂。*使用引用而不是指针可能*会更好：

```
const int MAX_LINES = 10, MAX_STRING = 80;

class Alphabetizer{
    public:
        Alphabetizer(char & inArray[][MAX_STRING]) : input(inArray){};

    private:
        char & input[MAX_LINES][MAX_STRING];
};

int main(){
    char charArray[MAX_LINES][MAX_STRING];
    Alphabetizer theAlaphBet(charArray);
    return 0; 
```

}

您可能还想考虑使用 std::string 代替，因为这可能有助于简化您的代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T06:20:57.833

代码中几乎没有错误。我想您正试图从 Alphabetizer 对象内部引用主函数中的 charArray。如果是这种情况，则声明

```
char * input[MAX_LINES][MAX_STRING]; 
```

是错误的，因为上面的声明使输入的 MAX_LINE 数组（（char*）的 MAX_STRING 数组）。总之，输入是一个数组，而不是指向任何数组的指针。如果您打算将它作为一个指针 - 这是您的代码的其余部分向我提示的内容 - 那么您必须执行以下操作，

```
const int MAX_LINES = 10, MAX_STRING = 80;

class Alphabetizer{
    public:
        Alphabetizer(char ((*ar)[MAX_LINES])[MAX_STRING]) : m_ar(ar){};

    private:
        char ((*m_ar)[10])[80];
};

int main(){
    char charArray[MAX_LINES][MAX_STRING];
    char ((*ar)[MAX_LINES])[MAX_STRING] = &charArray;
    Alphabetizer theAlaphBet(&charArray);
    return 0;
} 
```

此外，

```
input(inArray) 
```

是错误的，因为它相当于执行以下操作，

```
char a[1] = {'a'};
char b[1] = {'p'};
a = b; 
```

将一个数组分配给另一个数组不会将一个数组复制到另一个数组。你必须做明确的 memcpy。（这种语义在 c 或 c++ 中没有意义）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-06T04:27:55.800

我猜这是您没有传递指向 的指针`char[][]`，而是传递了`char[][]`.

此外，您应该使用`std::string`而不是 char 数组。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-06T04:29:53.133

`std::string`将是最合适的！它可以很好地处理字符串和字符数组！

# objective-c - 在 iPad 中显示完整的相机

> ID：13244366
> 
> 赞同：3
> 
> 时间：2012-11-06T04:25:33.403
> 
> 标签：objective-c

我正在尝试在 iPad 中显示完整的相机。但它显示的相机非常小。我在这个代码下面使用。

```
imagePicker = [[UIImagePickerController alloc] init];
    imagePicker.sourceType = UIImagePickerControllerSourceTypeCamera;
    imagePicker.delegate=self;
    imagePicker.cameraOverlayView.frame = CGRectMake(0, 0, 1000, 700);
    [imagePicker.cameraOverlayView sizeToFit];
    UIPopoverController  *popover = [[UIPopoverController alloc] initWithContentViewController:imagePicker];
    imagePicker.wantsFullScreenLayout = YES;
    [imagePicker release];
                [popover presentPopoverFromRect:CGRectMake(0,0,400,800) 
                                 inView:self.view
               permittedArrowDirections:UIPopoverArrowDirectionAny 
                               animated:YES]; 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-06T05:58:36.880

`UIImagePickerController`是一个`UINavigationController`。只需将其显示为全屏模式视图控制器，而不是在弹出窗口中。

```
UIImagePickerController *ipc = [[UIImagePickerController alloc] init];
ipc.delegate = self;
ipc.sourceType = UIImagePickerControllerSourceTypeCamera;
ipc.modalPresentationStyle = UIModalPresentationFullScreen;

[self presentViewController:ipc animated:YES completion:nil]; 
```

您只需要使用 iPad 上的弹出框从照片库中选择图像。但是允许相机在没有弹出窗口的情况下全屏显示。

# mysql - 用于生成报告的 MySql 查询

> ID：13244369
> 
> 赞同：3
> 
> 时间：2012-11-06T04:25:57.867
> 
> 标签：mysql, sql

我有一张表，其中包含三个字段：

```
Id, Creation Time, Fuel Level 
```

每两分钟我们获取数据并插入数据库。为了生成燃料贷记/借记表，我想开始（当天的状态）和结束（当天的结束）燃料水平。任何人都可以帮助形成查询生成此报告？

搜索参数将是日期范围。

id=10；创建时间=2019-02-15 16:32:59；油位=20

我在这里创建了一个示例架构 [http://sqlfiddle.com/#!2/76dd5](http://sqlfiddle.com/#!2/76dd5)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T04:49:33.890

首先，对于提供每辆车每天的燃料变化的查询，您可以使用以下 SQL：

```
SELECT trip_range.dt
     , trip_range.vehicle_id
     , st.fuel_content as start_fuel_content
     , en.fuel_content as end_fuel_content
     , en.fuel_content - st.fuel_content as fuel_change
  FROM (
SELECT tp.vehicle_id, DATE(tp.creation_time) dt
     , MIN(tp.creation_time) start_time
     , MAX(tp.creation_time) end_time
  FROM trip_parameters tp
 GROUP BY tp.vehicle_id, DATE(tp.creation_time)
) as trip_range
  JOIN trip_parameters st
    ON st.vehicle_id = trip_range.vehicle_id
       AND st.creation_time = trip_range.start_time
  JOIN trip_parameters en
    ON en.vehicle_id = trip_range.vehicle_id
       AND en.creation_time = trip_range.end_time
 WHERE trip_range.dt BETWEEN '2012-11-08' AND '2012-11-09' 
```

如果您想要该范围内每天所有车辆的燃料累积变化，以下 SQL 应该可以工作：

```
SELECT dt, SUM(fuel_change) as fuel_change
  FROM (
SELECT trip_range.dt
     , en.fuel_content - st.fuel_content as fuel_change
  FROM (
SELECT tp.vehicle_id, DATE(tp.creation_time) dt
     , MIN(tp.creation_time) start_time
     , MAX(tp.creation_time) end_time
  FROM trip_parameters tp
 GROUP BY tp.vehicle_id, DATE(tp.creation_time)
) as trip_range
  JOIN trip_parameters st
    ON st.vehicle_id = trip_range.vehicle_id
       AND st.creation_time = trip_range.start_time
  JOIN trip_parameters en
    ON en.vehicle_id = trip_range.vehicle_id
       AND en.creation_time = trip_range.end_time
 WHERE trip_range.dt BETWEEN '2012-11-08' AND '2012-11-09'
) change_by_vehicle
 GROUP BY 1 
```

希望这可以帮助！

约翰...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T04:30:52.663

试试下面：

```
 SELECT Id, CreationTime, FuelLevel
   FROM MYTABLE
   WHERE DATE(CreationTime) = CURDATE(); 
```

这将获取日期部分`CreationTime`并与当前日期进行比较，从而返回今天创建的所有记录。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-10T06:06:53.697

这是一个返回输出的查询：

```
DATE            FUEL_CONTENT_AT_START_OF_DAY    FUEL_CONTENT_AT_END_OF_DAY
Nov, 08 2012    4.6                             3.6
Nov, 09 2012    11.6                            5.6 
```

**询问**

```
SELECT
    DATE( startofday.creation_time) AS date,
    startofday.fuel_content AS fuel_content_at_start_of_day,
    (SELECT fuel_content FROM trip_parameters WHERE trip_paramid = max(endofday.trip_paramid) ) AS fuel_content_at_end_of_day
FROM
    trip_parameters startofday
    INNER JOIN trip_parameters endofday ON ( DATE( endofday.creation_time ) = DATE( startofday.creation_time) )
WHERE
    DATE( startofday.creation_time) BETWEEN '2012-11-08'  AND '2012-11-09'
GROUP BY
    startofday.TRIP_PARAMID
HAVING
  min( endofday.trip_paramid ) = startofday.trip_paramid 
```

我已经在 SQLFiddle 上更新了相同的内容，[http: //sqlfiddle.com/#!2/76dd5/67](http://sqlfiddle.com/#!2/76dd5/67)

查询作为

*   获得一排
    *   获取当天所有对应的行
    *   获取当天最小和最大ID
*   如果当前行 ID 等于 JOIN 中的最小 ID，则显示它，否则忽略
    *   在子查询中使用最大 id 来获取一天结束的fuel_content

希望这可以帮助

# php - 图片上传脚本不起作用

> ID：13244370
> 
> 赞同：0
> 
> 时间：2012-11-06T04:26:20.173
> 
> 标签：php, upload

我有一个名为 addbanner.php 的页面，其中包含用于上传图像的 HTML 和 PHP 脚本。但它不工作我给。

```
*********************************addbanner.php***************************************
   <?php
   session_start();

require_once'session.php';
require_once '../cms/config.php';

if(isset($_POST['submit']))
{

//for image upload part

// define the posted file into variables
//$bannerid=$_POST['bannerid'];

 $name = $_FILES['file']['name'];
 $tmp_name = $_FILES['file']['tmp_name'];
 $type = $_FILES['file']['type'];
 $size = $_FILES['file']['size'];
 $desc=$_POST['description'];
 $dir='uploads/';
 $allowedExts = array("jpg", "jpeg", "gif", "png");
 $bits = (explode(".",$name ));
 $extension=end($bits);
 if ((($type == "image/gif")
 || ($type == "image/jpeg")
 || ($type == "image/png")
 || ($type == "image/pjpeg"))
  && ($size < 20000)
 && in_array($extension, $allowedExts))
 {
if ($_FILES["file"]["error"] > 0)
 {
  echo "Return Code: " . $_FILES["file"]["error"] . "<br />";
  }
 else
  {

 //connecting the database
  $object=new connection();
  $object=$object->dbConnect();
  $st=$object->prepare("select * from banners where  file=:name");
  //$st->bindParam(1,$bannerid);
   $st->bindValue(":name",$name,PDO::PARAM_STR);
  $st->execute();
  if($st->rowCount()>1)
  {
   echo "Error: Banner with this name is already exists!";
   }
    else
    {

   //$object=new connection();
  //$object=$object->dbConnect();
   $st=$object->prepare("insert into banners values('$name','$type','$size','$desc')");
   $st->execute();
     if (file_exists("uploads/" . $name))
         {
     echo $name. " already exists. ";
      }
     else
      {
        move_uploaded_file($tmp_name,$dir.$name);
           echo "Stored in: " . "uploads/" . $name;
        }
          }
      }
             }
      else
          {
             echo "Invalid file";
          }
              }
      else
           {
             //HTML part
           }
         ?>
********************javascript part***************
function validate()
{
if(document.myform.file.value=='' || document.myform.description.value=='')

{
alert("Please fill all the field!");

return false;

}

  }
******************end javascript***************

*******************html form******************* 
```

横幅图片（必填项）

说明（必填项）

```
 <!-- End Form -->

                    <!-- Form Buttons -->
                    <div class="buttons" >
                      <input type="submit" name="submit" class="button" value="Submit" />
                      <input type="submit" name="cancel" class="button" value="Cancel" />
                    </div>
                    <!-- End Form Buttons -->
                </form>

********************end coding***************** 
```

当我选择提交按钮时，它会打印“无效文件”，这是脚本的一部分。当我单击提交留下空白描述字段时，我的 javascript 中也存在问题。它有时不显示警报。请提出一些建议。我只是想当用户填写该字段并单击提交时，它将进入数据库并保存在给定的文件夹中。

很抱歉脚本不完整，我还没有为取消按钮编写代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T04:37:22.447

您可以使用以下代码进行图像上传：

```
 $image =  $_FILES['image']['name'];

  $target_path = "uploads/";

    $target_path = $target_path . basename( $_FILES['image']['name']);

    if(move_uploaded_file($_FILES['image']['tmp_name'], $target_path))
    {
           echo "The file ".  basename( $_FILES['image']['name'])." has been uploaded";

    }
    else
    {
            echo "There was an error uploading the file, please try again!";
    }

$query = "INSERT INTO imagetable values($image)";
mysql_query($query) or die(mysql_error()); 
```

看看这段代码...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T04:43:21.723

试试这个 - 增加你的文件大小限制 -`($size < 20000)`因为它进入 else 循环无效数据。

# android - 如何以编程方式获取当前 Android 窗口屏幕的所有组件和小部件 ID？

> ID：13244374
> 
> 赞同：1
> 
> 时间：2012-11-06T04:26:33.653
> 
> 标签：android, python-2.7, android-widget, robotium

我将 Robotium 框架用于 Android 测试目的，并手动从 Hierarchy Viewer 中获取 component_id 或 index id 或小部件的一部分，以便在运行时为测试目的设置值。

有没有办法以编程方式获取 component_id 或 index id 或 Widgets 的一部分？到目前为止，我能够获得该包应用程序下的包名称和所有活动名称。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T08:17:44.173

```
import time, subprocess, socket, re

afttFile=open("ApplicationPackage.DOC", "r")

fileName=""
packageName=""
activityName=""
packageFile=None

window_dump=None
current_window=None
windows=None

#Function for executing adb shell command
def adb(command, input=None):
    if not isinstance(command,list): command=command.split()
    return subprocess.Popen(command, stdout=subprocess.PIPE, 
                        stderr=subprocess.STDOUT).communicate(input=input)[0]

#Function for getting current window hash id
def getWindowHash():
    command='adb shell ' 

    window_dump=subprocess.Popen(command+'dumpsys window windows', shell=False, stdout=subprocess.PIPE)
    window_dump=window_dump.stdout.read()

    regexp=re.compile(r'Window #\d+[:\s\r\n]+Window\{(?P<hash>[a-f\d]{8}) (?P<title>.*) paused=.*\}:?[\r\n]+(?P<attributes>(?:    .*[\r\n]+)+)', re.MULTILINE)

    windows=[ m.groupdict() for m in regexp.finditer(window_dump) ]

    # fetch current window
    m=re.search('mCurrentFocus=Window\{(?P<hash>\S+) (?P<title>\S*) \S+', window_dump)
    if m:
        current_window=m.groupdict()
        #print self.current_window
    else:
        current_window=None

    for window in windows:
        if window['hash']==current_window['hash']:
            return [window][0]['hash']

#Read Packag Name & Corresponding Activity Name from Provided file
for line in afttFile:
    #print line
    if len(line.split("."))==3:
        if packageFile!=None:
            packageFile.flush()
            packageFile.close()
            #print "File with name: "+fileName+" closed"

        packageName=line.strip("\n")
        print "Package Name: "+packageName
        fileName=line.split(".")[2].strip("\n")+".txt"
        #print fileName
        #Create file with corresponding package name
        packageFile=open(fileName, "a")

        #packageFile.flush()
        #packageFile.close()
    else:
        activityName=line.strip("\n")
        print "Activity Name: "+activityName
        ## if packageName=="com.android.browser":
             ## #print packageName
             ## ommand="adb -s emulator-5554 shell am start -a android.intent.MAIN -n "+packageName+"/"+activityName
             ## print command
             ## ## result=subprocess.Popen(command, shell=False, stdout=subprocess.PIPE)
             ## ## result=result.stdout.read()

        #print packageName
        if packageName=="com.android.mms":
            command="adb shell am start -n "+packageName+"/"+activityName
            print command
            result=subprocess.Popen(command, shell=False, stdout=subprocess.PIPE)
            result=result.stdout.read()
            time.sleep(10)

            print "Parsing has been started"
            f=open("AFTT.txt", "w")

            command='adb shell '      
            comm='adb '

            for port in range(5939,5979,2):   
                try:              
                    s=socket.socket(socket.AF_INET, socket.SOCK_STREAM)  
                    subprocess.Popen(command+'service call window 2', shell=False, stdout=subprocess.PIPE)
                    time.sleep(.5)
                    subprocess.Popen(command+'service call window 1 i32 4939', shell=False, stdout=subprocess.PIPE)
                    time.sleep(.5)

                    adb(comm+' forward tcp:%d tcp:4939' % port)
                    print "forwarding done"

                    s.connect(('127.0.0.1', port))
                    #print "Connection Made"
                    print "Port Used for Communication: %s" %port
                    hashId=getWindowHash()
                    print "Window Hash_Id: %s" %hashId

                    s.sendall('DUMP %s\n'%hashId)
                    print "Command sent"
                    s.settimeout(360)
                    data=''
                    i=0
                    t0 = time.time()            
                    print "Starting loop"
                    while True:
                        datum=s.recv(32*1024)
                        #print datum
                        #print 'Received %d bytes' % len(datum)        
                        #print "\n"
                        print "Packet: "+datum
                        f.write(datum)

                        if (datum.endswith('\nDONE.\n') or datum.endswith('DONE.\n') or datum.endswith('\nDONE.\nDONE\n') or datum.endswith('DONE.\nDONE\n')):
                            #print "End of Packet ransfer"
                            break 

                        if datum == '':
                            #print "Socket closed"
                            raise socket.error('Socket closed')

                        data+=datum

                        if time.time() - t0 > 360:
                            #print "Timeout"
                            raise socket.error('Timeout')                
                        i=i+1
                    break

                except socket.error:
                    #print "Checking for another port"
                    subprocess.Popen(command+'service call window 2', shell=False, stdout=subprocess.PIPE)
                    time.sleep(.5)
                    subprocess.Popen(command+'service call window 1 i32 4939', shell=False, stdout=subprocess.PIPE)
                    time.sleep(.5)
                    #f.close()
                    s.close()
                    #print "Server restarted"

            #Open File for Parsing UI Elements
            f=open("AFTT.txt", "r")
            #package=open("Package.txt", "w")
            for line in f:
                widg_id=re.compile(r'mID=\S*', re.MULTILINE).findall(line)
                widg_text=re.compile(r'mText=\d*,[a-zA-Z\W\d]*', re.MULTILINE).findall(line)

                if len(widg_id)!=0 or len(widg_text)!=0:
                    ##################################################################
                    #Parse Widget Id
                    if len(widg_id)!=0:
                        widg_id=widg_id[0]        
                        widg_id=str(widg_id) 
                        widg_id=widg_id.strip("[]'")
                        if 'id' in widg_id:
                            widg_id=widg_id.split(",")[1].split("/")[1]
                        else:
                            widg_id=widg_id.split(",")[1]   
                        packageFile.write(widg_id+"->")
                    else:
                        packageFile.write("None->")

                    ##################################################################    
                    #Parse Widget Text
                    if len(widg_text)!=0:
                        widg_text=str(widg_text)
                        #Remove unncessary characters from String
                        widg_text=widg_text.strip("[]'")

                        #Get the second element that is excluding 'mText'
                        widg_text=widg_text.split(",")[1]

                        #SPlit text on basis of space
                        widg_text_ls=widg_text.split(" ")

                        widg_text=""
                        #Remove one element from last
                        widg_text_ls.pop()        
                        #Create new STring by joining list
                        widg_text=" ".join(widg_text_ls)       

                        if len(widg_text)==0:
                            packageFile.write("None->")
                        else:
                            packageFile.write(widg_text+"->")
                    else:
                        packageFile.write("None->")

                    ##################################################################    
                    #Parse Widget Type
                    widg_type=str(line.split("@")[0])
                    widg_type=widg_type.strip(" ")
                    packageFile.write(widg_type)
                    packageFile.write("\n")
            f.close()    
afttFile.close() 
```

# codeigniter - 从存储引擎收到错误 28

> ID：13244376
> 
> 赞同：0
> 
> 时间：2012-11-06T04:26:46.677
> 
> 标签：codeigniter, storage-engines

我的网站使用 CodeIgnter 框架和 iPage 主机。之前，我的 PHP 版本是 5.2，然后我更新到 5.3。在我更新到 PHP 5.3 后总是得到如下错误：

```
- Got error 28 from storage engine
- Incorrect key file for table '/mysql-tmp/#sql_16c4_0.MYI'. try to repair it
- Got error -1 from storage engine 
```

这不是 StackOverflow 中的新问题，但我想确保：

*   这些错误是我从 PHP 5.2 更新到 5.3 造成的吗？
*   它是由我在 php.ini 中的错误配置引起的吗？
*   从托管？或任何其他人？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-18T07:45:51.283

从存储引擎收到错误 28

磁盘空间问题。。

如果是 loaclhost，则需要空间来保存数据库中的数据，如果该磁盘中的内存已满，请检查驱动器内存状态，释放一些空间。

如果是托管，请联系您的托管服务提供商

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T16:23:22.583

听起来像磁盘空间问题：

[MySQL：#126 - 表的密钥文件不正确](https://stackoverflow.com/questions/2011050/mysql-126-incorrect-key-file-for-table)

请联系您的托管服务提供商。

此外，这是一个 mysql 问题，而不是 PHP 问题；不管你运行的是什么版本的php。

# python - Python HTML 代码语法错误

> ID：13244378
> 
> 赞同：1
> 
> 时间：2012-11-06T04:27:00.033
> 
> 标签：python, html

尝试添加超链接时出现以下语法错误，我查看了 href 的 HTML 代码，HTML 代码似乎正确，但 python 抛出语法错误..有人可以帮忙吗？

Python代码

```
 msg_body=("<HTML><head></head>"
          "<body>Test"
          "<br>Hi All, <br>"
          "<b>Wiki @<a href="%s">%s</a> (listed @ go\link) <br><br>"
          "<b>Release notes:</b> %s  <br><br>" 
          "<b>Host/Riva Build Combo:</b><br>%s<br><br>" 
          "<b>Loading instructions:</b><br>%s<br><br>"
          "<b>CR fixes:</b><br>%s<br><br>"
          "Thanks,<br>"
          "B team"
          "</body></html>"
          ) % (wikiURL,Releasenotes,table,Load_ins,crInfo) 
```

错误：-

```
 "<b>Wiki @<a href="%s">%s</a> (listed @ go\wbit) <br><br>"                                                      ^
     SyntaxError: invalid syntax 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T04:31:03.583

```
msg_body="""<HTML><head></head>
          <body>Test
          <br>Hi All, <br>
          <b>Wiki @<a href="%s">%s</a> (listed @ go\link) <br><br>
          <b>Release notes:</b> %s  <br><br>
          <b>Host/Riva Build Combo:</b><br>%s<br><br>
          <b>Loading instructions:</b><br>%s<br><br>
          <b>CR fixes:</b><br>%s<br><br>
          Thanks,<br>
          B team
          </body></html>
          """ % (wikiURL, Releasenotes, table, Load_ins, crInfo) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T10:56:08.500

错误的线路是

```
"<b>Wiki @<a href="%s">%s</a> (listed @ go\link) <br><br>" 
```

您需要像这样转义引号内的引号：

```
"<b>Wiki @<a href=\"%s\">%s</a> (listed @ go\link) <br><br>" 
```

像那样：

```
'<b>Wiki @<a href="%s">%s</a> (listed @ go\link) <br><br>' 
```

或（如@ragsagar 所建议的那样）：

```
"""
<b>Wiki @<a href="%s">%s</a> (listed @ go\link) <br><br>
""" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T10:43:43.557

还有一点需要指出；您可能想使用：

```
 <p> & </p> 
```

代替：

```
 <br> 
```

因为它使一个段落。例如：

```
 <p> Hello world. This is a paragraph.</p> 
```

它也从最后一个项目中休息。

# mvvm - Galasoft MVVM light windows 8 ResourceMap 未找到

> ID：13244379
> 
> 赞同：1
> 
> 时间：2012-11-06T04:27:10.190
> 
> 标签：mvvm

我正在开发 Windows 8 Metro 应用程序并在调用 RaisePropertyChanged("PropertyName") 时出现“找不到 ResourceMap”异常。任何人都可以帮我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T09:42:27.647

也许它有帮助：当您尝试访问资源 (.resw) 文件中的资源（例如字符串）时，会引发“找不到 ResourceMap”异常，并且在那里找不到给定的键。

# android - Android：如何删除 Amazon AppStore 和 Kindle 的地图功能

> ID：13244384
> 
> 赞同：2
> 
> 时间：2012-11-06T04:27:39.343
> 
> 标签：android, google-maps, kindle-fire, amazon-appstore

我有一个在 Google Play 和 Amazon AppStore 上发布的应用程序。我最近向这个应用程序添加了地图 API 功能，因此我不得不使用 Google APIs SDK 来构建它。我已在 Google Play 上成功发布了我的新版本，但在亚马逊上遇到了问题。

该应用程序被亚马逊 AppStore 拒绝，因为他们说 Kindle 系列设备不支持它。经过进一步研究，我下载了新的 Kindle 模拟器，发现它们不支持 Google API。由于 Kindle Fire 平板电脑似乎是人们通过 Amazon AppStore 购买应用程序的主要设备，我意识到我需要提交一个不包含地图功能的应用程序版本，否则是同一个应用程序。

所以我的问题是：如何创建基于标准 Android SDK 且不包含映射 API，但使用相同 Java 源文件的应用程序的第二个版本？作为一名长期的 C++ 程序员，我可以使用条件编译标志在 C++ 中轻松完成此操作，但我开始意识到 Java 不支持条件编译。而且我当然不知道如何从一个 Android Eclipse 构建中排除库并将它们包含在另一个构建中。

谁能给我一些关于如何在 Android 中实现我想要的结果的提示？我知道我可以创建两个单独的应用程序，但是会有很多代码重叠，当我必须进行更新时，这对我来说会做更多的工作，我真的不想为了支持 Kindle 而维护两个单独的代码库火灾！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-11-01T06:04:40.397

您可以检查 Build.Manufacturer 是否等于“Amazon”，或者检查应用程序是否[从 Amazon AppStore 安装](https://stackoverflow.com/questions/19592927/is-it-possible-to-reliably-detect-at-runtime-which-store-installed-an-android-ap/19643816#19643816)（例如在 Fire 设备上或现在在 Blackberry 上），如果它没有初始化或调用谷歌地图功能（如果图书馆在那里，只要它们不活跃，似乎不会受到伤害）

```
boolean isAmazonDevice = Build.MANUFACTURER.equalsIgnoreCase("amazon");

final Application application = getApplication();
String installerName = application.getPackageManager().getInstallerPackageName(application.getPackageName());
boolean fromAmazonStore = installerName != null && installerName.equalsIgnoreCase("com.amazon.venezia"); 
```

然后检查以下值：

```
isAmazonDevice || fromAmazonStore 
```

# vb.net - VB .NET 中有 splat 运算符吗？

> ID：13244389
> 
> 赞同：2
> 
> 时间：2012-11-06T04:28:20.250
> 
> 标签：vb.net

我主要是一名 Python 开发人员，但不幸的是，我不得不在 VB .NET 中为客户端编写一个基于 GUI 的程序。我自己已经能够弄清楚 VB 的大部分特性，但我没有找到将这个简单的成语翻译成 VB 的方法：

```
def my_function(arg1, arg2, arg3):
    # do stuff with args
    pass

args = [1,2,3]
my_function(*args) 
```

我正在处理一些带有很多变量的讨厌的函数，如果我能做这样的事情，代码会更好，更易读，所以我不会坚持

```
MyFunction(reader(0), reader(1), reader(2), reader(3)) 'ad infinum 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-06T04:31:36.943

有点！首先，如果它让你更方便，你可以做相反的事情。它们被称为参数数组：

```
Sub MyFunction(ParamArray things() As Whatever)
    ' Do something with things
End Sub 
```

所以这些是等价的：

```
MyFunction(reader(0), reader(1), reader(2), reader(3), ...)
MyFunction(reader) 
```

但是，如果您真的想要一个飞溅的东西，那就是代表：

```
Dim deleg As New Action(Of YourTypeA, YourTypeB)(AddressOf MyFunction)

deleg.DynamicInvoke(reader) 
```

如果您找不到`Action`or`Func`来满足您的需求，那么您需要定义自己的委托类型以匹配：

```
Private Delegate Sub WayTooManyArgumentsDelegate(*match arguments here*)
```

和

```
Dim deleg As New WayTooManyArgumentsDelegate(AddressOf MyFunction) 
```

# python - SQLite 插入或忽略并返回原始 _rowid_

> ID：13244393
> 
> 赞同：22
> 
> 时间：2012-11-06T04:29:07.233
> 
> 标签：python, sqlite

我花了一些时间阅读 SQLite[文档](http://www.sqlite.org/lang_conflict.html)、Stack Overflow 上的各种问题和答案，以及[这件事](http://sqlite.1065341.n5.nabble.com/Keeping-ROWID-for-INSERT-OR-REPLACE-td34237.html)，但还没有得到完整的答案。

我知道没有办法`INSERT OR IGNORE INTO foo VALUES(...)`用 SQLite 做类似的事情并取回原始行的 rowid ，最接近它的方法是`INSERT OR REPLACE` **删除整行并插入新行，从而获得新的 rowid**。

示例表：

```
CREATE TABLE foo(
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    data TEXT
); 
```

现在我可以这样做：

```
sql = sqlite3.connect(":memory:")
# create database
sql.execute("INSERT OR IGNORE INTO foo(data) VALUES(?);", ("Some text.", ))
the_id_of_the_row = None
for row in sql.execute("SELECT id FROM foo WHERE data = ?", ("Some text.", )):
    the_id_of_the_row = row[0] 
```

但理想的东西看起来像：

```
the_id_of_the_row = sql.execute("INSERT OR IGNORE foo(data) VALUES(?)", ("Some text", )).lastrowid 
```

**将行插入表并返回 rowid 的最佳（阅读：最有效）方法是什么，或者如果该行已经存在则忽略该行并仅获取 rowid？**效率很重要，因为这会经常发生。

**有没有办法`INSERT OR IGNORE`返回与被忽略行进行比较的行的rowid？**这会很棒，因为它和插入一样有效。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-14T20:19:53.553

对我来说最有效的方法是`insert or ignore`值和`select`rowid 在两个单独的步骤中。我`unique`在列上使用了一个约束`data`来加速选择并避免重复。

```
sql.execute("INSERT OR IGNORE INTO foo(data) VALUES(?);" ("Some text.", ))
last_row_id = sql.execute("SELECT id FROM foo WHERE data = ?;" ("Some text. ", )) 
```

声明并没有我想象的`select`那么慢。这[似乎](https://web.archive.org/web/20121111205122/http://web.utk.edu/%7Ejplyon/sqlite/SQLite_optimization_FAQ.html#indexes)是由于 SQLite 自动为`unique`列创建索引。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T08:14:58.727

`INSERT OR IGNORE`适用于您不关心记录身份的情况；目标只是拥有*一些*具有该特定价值的记录。

如果您想知道是否插入了新记录，则必须手动检查：

```
the_id_of_the_row = None
for row in sql.execute("SELECT id FROM foo WHERE data = ?", ...):
    the_id_of_the_row = row[0]
if the_id_of_the_row is None:
    c = sql.cursor()
    c.execute("INSERT INTO foo(data) VALUES(?)", ...)
    the_id_of_the_row = c.lastrowid 
```

至于效率：当 SQLite 检查`data`列是否重复时，它必须执行与`SELECT`您对 .问题。在任何情况下， *都*需要执行两个单独的`INSERT`/`SELECT`查询（按任何顺序，你和我的代码都可以工作，但你的更简单）。

# c - 生产者消费者同步的伪代码

> ID：13244400
> 
> 赞同：1
> 
> 时间：2012-11-06T04:29:34.880
> 
> 标签：c, semaphore, pseudocode

我在使用 C 编程的操作系统课上为作业作业编写 Pseduocode 时遇到了一些麻烦。

> 您将实现一个生产者-消费者程序，其中包含 N 个元素、P 个生产者线程和 C 个消费者线程的有界缓冲区队列（N、P 和 C 应该是程序的命令行参数，以及三个附加参数 X、Ptime 和Ctime，如下所述）。 **每个
> 生产者线程应该将 X 个不同的数字排入队列（在每次调用 Enqueue 之间旋转等待 Ptime*100,000 个周期）。每个消费者线程
> 都应该从队列中取出 P*X/C 项（在每次调用 Dequeue 之间旋转等待 Ctime*100,000 个周期）。** 主程序应该创建/初始化有界缓冲区队列，打印时间戳，产生 C 消费者线程和 P
> 生产者线程，等待所有线程完成，然后打印另一个时间戳和执行持续时间。

我的主要困难是通过旋转等待变量乘以 100,000 来理解我的教授的意思。我将令我困惑的部分加粗。

我知道时间戳将用于打印每个线程之间的差异。我们目前正在使用信号量并实现同步。对上述查询的任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T04:54:36.023

我猜这意味着忙着等待；反复检查循环条件并在紧密循环中消耗不必要的 CPU 功率：

```
while (current_time() <= wake_up_time); 
```

理想情况下，可以使用一些东西来暂停你的线程，直到它被调度程序从外部唤醒（这样 CPU 等资源就可以转移到其他地方）：

```
sleep(2 * 60 * 1000 ms); 
```

或者至少放弃*一些*CPU（即不要*那么*紧）：

```
while (current_time() <= wake_up_time)
    sleep(100 ms); 
```

但我猜他们不希望您手动调用调度程序，暗示操作系统（或您的线程库）现在是进行上下文切换的好时机。

我不确定什么是**周期**；在汇编中，它们可能是 CPU 周期，但鉴于您的问题被标记为 C，我敢打赌它们只是循环迭代：

```
for (int i=0; i<Ptime*100000; ++i); //spin-wait for Ptime*100,000 cycles 
```

尽管询问谁发布了作业总是最安全的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-06T04:51:49.550

**忙等待**或**旋转**是一种技术，在该技术中，进程反复检查条件是否为`true`，例如键盘输入是否可用，或者锁是否可用。

所以任务说在产生下一个元素之前等待**Ptime*100000时间，并在条件为****真**后将 x 个不同的元素排入队列

 **类似地，每个消费者线程都应该`P*X/C`从队列中取出项目，并在每次消费项目后等待 ctime*100000

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-06T05:03:37.517

我怀疑你的教授是个彻头彻尾的笨蛋——实际上是在要求最糟糕的“忙着等待”技术：

```
int n = pTime * 100000;
for ( int i=0; i<n; ++i) ; // waste some cycles. 
```

我还怀疑他仍然使用翼龙大腿骨作为拐杖，有一个非常好的（干燥的）洞穴，还有一个有大块秃头的伙伴……O / S家伙往往是这样的。它与凉爽的胡须相得益彰。

难怪他那些彻头彻尾的现代学生会误解他。他需要（重新）学习如何在 TUNE 中咕哝。

干杯。基思。**

# gwt - 在 GWT 中使用 DisclosurePanels 实现“全部展开/折叠”

> ID：13244401
> 
> 赞同：1
> 
> 时间：2012-11-06T04:29:44.223
> 
> 标签：gwt

我有很多 DisclosurePanel 嵌套在另一个里面（或者也可能没有嵌套）。我想实现“全部展开”和“全部折叠”按钮。请提出一个干净的方法来做到这一点。

注意：我试着看一下 GWT 中的事件处理，但对事情有点困惑。我不确定是否可以为我的案例使用自定义事件。似乎我可以定义一个自定义事件及其处理程序并执行 addHandler() 的东西，但是在将实现处理程序接口的类中，我没有允许我使用 setOpen() 属性的 DisclosurePanel 实例的披露面板。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T02:26:13.557

这样做的一种方法是自省 Widget 层次结构。从最上面的父披露面板开始，查看所有子小部件，检查它们是否是 DisclosurePanel，然后打开/关闭它们。如果有许多小部件，这可能对性能不利，但无论如何您都可以尝试。

此代码尚未经过测试，但可能会满足您的需要：

```
void openChildren(Widget w, boolean isOpen){
    if(w instanceof DisclosurePanel){
        ((DisclosurePanel)w).setOpen(isOpen);
    }

    if(w instanceof HasWidgets){
        for(Widget ch : ((HasWidgets)w)){
            openChildren(ch, isOpen);
        }
    }

    if(w instanceof HasOneWidget){
        openChildren(((HasOneWidget)w).getWidget(), isOpen);
    }
} 
```

# iphone - 程序在 dequeueReusableCellWithIdentifier 处崩溃：

> ID：13244403
> 
> 赞同：9
> 
> 时间：2012-11-06T04:29:51.173
> 
> 标签：iphone, ios, xcode

我有一个程序，其中有一个 tableViewController，它有 1 节和 3 行。每当我运行该应用程序时，它总是在`dequeueReusableCellWithIdentifier:`方法崩溃。`NSLog()`我在这个方法中插入了一个断点并归零。我还将`Cell Identifier`情节提要中的原型单元格设置为`Cell`. 但程序仍然崩溃。这是导致问题的方法：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    NSLog(@"indexPath.section = %d, indexPath.row = %d", indexPath.section, indexPath.row);
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier forIndexPath:indexPath];

    if (cell == nil)
    {
        NSLog(@"in nil");
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier];
    }

    return cell;
} 
```

崩溃日志显示：

```
MyAppTake4[7463:707] indexPath.section = 0, indexPath.row = 0
2012-11-05 23:21:20.747 MyCardAppTake4[7463:707] -[UITableView     dequeueReusableCellWithIdentifier:forIndexPath:]: unrecognized selector sent to instance     0xfbc9000
2012-11-05 23:21:20.753 MyCardAppTake4[7463:707] *** Terminating app due to uncaught     exception 'NSInvalidArgumentException', reason: '-[UITableView     dequeueReusableCellWithIdentifier:forIndexPath:]: unrecognized selector sent to instance     0xfbc9000'
*** First throw call stack:
(0x3254788f 0x3459d259 0x3254aa9b 0x32549915 0x324a4650 0x7e2f7 0x31fceefb 0x31fcdfd9     0x31fcd763 0x31f71f15 0x324a61fb 0x3420aaa5 0x3420a6bd 0x3420e843 0x3420e57f 0x342064b9     0x3251bb1b 0x32519d57 0x3251a0b1 0x3249d4a5 0x3249d36d 0x315f4439 0x31f9ccd5 0x7d9f9 0x7d994)
terminate called throwing an exception(lldb) 
```

我有兴趣确定错误的确切原因，这样我就不会再犯这个错误了。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-06T04:34:59.650

那是因为 [tableView dequeueReusableCellWithIdentifier:CellIdentifier forIndexPath:indexPath]; 在 iOS 6 中添加但 iOS 5 无法识别。对于 iOS 5 兼容性，请改用以下方法：

```
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier]; 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-06T04:35:38.030

你是先注册cell的class还是nib的？

来自苹果文档：

重要提示：在调用此方法之前，您必须使用 registerNib:forCellReuseIdentifier: 或 registerClass:forCellReuseIdentifier: 方法注册类或 nib 文件。

（顺便说一句，该方法仅在 iOS 6 中可用）

如果您使用的是 iOS 6，那么您可以使用新的更简单的范例：

在 viewDidLoad 中，注册该类，在您的情况下，这只是 UITableViewCell 类：

```
[self.tableView registerClass:[UITableViewCell class] forCellReuseIdentifier:@"Cell"]; 
```

然后，您可以在 cellForRowAtIndexPath 中这样做：

```
- (UITableViewCell *) tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"Cell" forIndexPath:indexPath];
    cell.textLabel.text = self.myArray[indexPath.row];
    return result;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-06T04:39:28.713

由于 forIndexPath 方法适用于 ios6，因此我建议您使用此代码段。在下面找到。

```
UITableViewCell *cell = [table_view dequeueReusableCellWithIdentifier:@"cell"];
if (cell == nil)
{
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:@"cell"];

    // **initialize** your stuff here **with their respected tag**
}
else
{
   // **get** your stuff back using their tags
}
// **assign** your valiues here

return cell; 
```

享受编程

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-25T18:48:26.707

我有这个异常，并意识到它是由我的愚蠢错误引起的。我创建了一个空白的 .xib 文件（在我的 .xib 中有一个自定义的“正在加载”单元格`UITableView`），但随后将一个拖放`View`到其中。嗬！

结果是您看到的异常消息，以及“输出”窗口中的以下内容：

```
2014-04-25 20:45:12.953 Languages[36256:60b] *** Terminating app due to uncaught 
exception 'NSInternalInconsistencyException', reason: 'invalid nib registered
for identifier (LoadingCell) - nib must contain exactly one top level object 
which must be a UITableViewCell instance' 
```

当然，解决方案是`Table View Cell`在我的 .xib 文件中添加一个，将其他 UI 组件复制到其中，然后将该 Table View Cell 保留为文件中的“根”元素。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-08-23T20:00:00.947

此错误的另一个原因可能是 -

为标识符（单元格）注册的 nib 无效 - nib 必须恰好包含一个顶级对象，该对象必须是 UICollectionReusableView 实例

我的 xib 中有一个 UIView 而不是 collectionViewCell。希望这可以帮助。

# css - 如何让 Bootstrap 将我的缩略图放在 2 列中，而不是 800 x 600 及以下的 1 列？

> ID：13244404
> 
> 赞同：2
> 
> 时间：2012-11-06T04:29:51.867
> 
> 标签：css, twitter-bootstrap, responsive-design

这是[一个活生生的例子](http://staging.thesecoya.com/apt605/)。

对于大分辨率，它工作得很好——你会在底部看到一排排的“流行产品”。

但是，如果您将窗口大小调整为 800 x 600，然后向下滚动，您将看到 1 列中的所有缩略图。

我怎样才能让它出现在 2 列中？或者 Bootstrap 不支持吗？

即，我不想更改默认 CSS 文件中的任何逻辑——我只是想看看我是否做错了什么。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T16:42:56.747

恐怕您无法使用纯 Bootstrap 在移动版本中获得两列。默认媒体查询将任何内容重新排列`.spanX`在一列中：

```
@media (max-width: 767px) {
  ...
  [class*="span"] {
    float: none;
    width: 100%;
    ...
  }
} 
```

并且将一个嵌套`.spanX`在另一个`.spanX`中也不起作用。您可以做的是`.span2`为您的目的使用特殊版本扩展默认 Bootstrap 类：

[http://jsfiddle.net/LPsQy/](http://jsfiddle.net/LPsQy/)

新的`.my-span2`行为与常规一样`.span2`，但对于移动媒体查询而言，它是一种流体`.span6`（占宽度的约 50%）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T11:56:19.093

我认为在不自行更改 Bootstrap 的 CSS 的情况下做到这一点并非易事。如果你不能做得很好，这里是丑陋的解决方案：

1.  生成的[自定义](http://twitter.github.com/bootstrap/customize.html)引导程序没有响应式“窄平板电脑及以下（<767px）”选项。让我们称之为**Big**。
2.  仅使用一种媒体生成[自定义](http://twitter.github.com/bootstrap/customize.html)引导程序（我选择“平板电脑到桌面（767-979px）”）。让我们称之为**Small**。
3.  在 Small CSS 中，我删除了行：`@media (min-width: 768px) and (max-width: 979px) {`、、 `@media (max-width: 979px) {`和它们的右括号`}`。这些是网格系统和导航栏。
4.  使用以下内容创建您自己的 CSS：

你的新`css/bootstrap.css`

```
@media (max-width: 767px) {
  ... paste Small CSS here ...
}
@media (min-width: 768px) {
  ... paste Big CSS here ...
} 
```

见[例子](https://dl.dropbox.com/u/354209/bootwo/index.html)。

**注意 1：**它可能仍然不是您想要的，因为在 767px 以下，网格系统是固定的 2 列，您可能更喜欢流动的 2 列。

**注意 2：**需要进行更多更改 cor`hidden-*`和`visible-*`classes 才能工作。

**注意 3：**您可以花一些时间来比较 CSS 文件，以了解它们的真正不同之处。

创建 Bootstrap 是为了轻松解决常见问题。如果您的问题不常见，那么解决方案将不容易；）在您的情况下，您需要通过选择 Bootstrap 的某些部分来重新创建自己的 CSS...

# wpf - WPF Prism 如何将模块、视图和区域与 Unity 容器相关联

> ID：13244405
> 
> 赞同：0
> 
> 时间：2012-11-06T04:29:56.133
> 
> 标签：wpf, prism

我很难找到给定模块和已使用此模块注册到不同区域的视图（普通 WPF 用户控件）之间的关系（在 IModule Initialize() 方法中）。

当请求加载模块`IModuleManager.LoadModule` 时，第一次使用加载模块。第一次加载模块不是问题。

现在，另一个请求来加载一个已经加载的模块，所以我不能使用`IModuleManager.LoadModule`方法，（用户只会给出 ModuleName）。

现在我必须找出它的区域（需要先清除它们）和它的视图（需要将它们加载到相应的区域中）。所以我需要一个模块视图区域的地图，一种三元组，并在触发 IModuleManager.LoadModuleCompleted 时第一次创建这个三元组。稍后我可以使用它来查找区域和视图。

使用过`IRegionViewRegistry.ContentRegistered`，但它只是给出（区域和视图）。但是没有办法将它与 ModuleName(of Module Info) 联系起来，`IModuleManager.LoadModuleCompleted`只是给出`ModuleInfo`（没有办法找出它使用的区域和视图）

# php - 学校网站的 MySQL 表

> ID：13244406
> 
> 赞同：0
> 
> 时间：2012-11-06T04:29:57.627
> 
> 标签：php, mysql, sql, phpmyadmin

现在我的网站有 40 多个表，但我认为我使用 MySQL 的功能并不完全正确。我正在制作一个类似于 Moodle 的网站。它基本上只是为按课程分组的学生举行考试。

**原始表**：

```
courses - Lists all courses (ID, Name)
c_$id   - Lists all the Tests (ID, Name, etc) for course number $id
a_$id   - Lists all questions for the test number $id (Question, A, B, C, D)
g_$id   - Lists all grades for the course with course number $id.
c_a     - Lists course ID and assignment ID pairs ex: (1,2) (1,3) (2,2) (2,3) 
```

**表格修订版 1：**

```
courses   - Lists all courses (ID, Name, etc)
tests     - Lists all tests (ID, Name, etc)
questions - Lists all questions from all tests (ID, Ques, Ans)
grades*   - Lists all grades (studentID, courseID, testID, grade)
students* - Lists all students and their courses (StudentID, courseID) 
```

Grades* 表，它基本上是 3 个主键和一个值。这似乎有些奇怪。有没有更好的办法？学生表也是如此。两者基本上都是其他表的连接。快速搜索的主键是不可能的？

**原帖：**

重新创建它以利用 MySQL 的强大功能的最有效方法是什么？

截至目前，当创建一门新课程时，它会为该课程创建一个新表 ( `c_$id`)，然后为每个作业创建一个表和该课程的成绩列表`g_$id`。然后在创建作业时，它会创建一个新`a_$id`表，将该课程和作业对添加到`c_a`.

我已经`*`从我的大多数选择语句中删除了“”，并将“ `LIMIT 1`”添加到任何选择主键的语句中，接下来是解决这个 OOP 问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T06:21:07.273

一般来说，最好尽可能坚持使用静态方案（即一组固定的表和列）。因此，不要将连接编码到表名中，而是使用单独的列来引用其他表。例如，您将有一个包含一*列的**表*，而不是保存每个课程的测试的单独`c_$id` *表*。输入测试时，您将填写值以表示该测试属于哪个课程。检索数据时，您可以`tests` *`course_id` *`course_id`**

 **```
SELECT …
FROM courses, tests
WHERE courses.id = tests.course_id 
```

仅使用一组固定的表名的一个好处是您可以在 PHP 代码中使用[准备好的语句](http://de3.php.net/manual/en/mysqli.prepare.php)`?`，使用占位符（通常是）而不是实际值。您可以在[执行](http://de3.php.net/manual/en/mysqli-stmt.execute.php)查询时[传递值](http://de3.php.net/manual/en/mysqli-stmt.bind-param.php)，服务器将确保它们正确[转义](http://de3.php.net/manual/en/mysqli.real-escape-string.php)。这可以防止大多数[SQL 注入攻击](http://en.wikipedia.org/wiki/SQL_injection)问题。此外，使用不同的值重复执行相同的预处理语句可能会提高性能，因为查询必须被解析、分析和优化一次。

添加`LIMIT 1`到只能返回单行的查询不太可能产生任何性能提升：MySQL 优化器知道主键，所以它也可以告诉这个事实。由于这些行*可能*会使您的查询稍微难以阅读和维护，因此请考虑再次省略它们。**

# asp.net - 在标头中包含这些 javascript 文件会消除 Etag 错误和其他来自 YSlow 的 SEO 错误吗？

> ID：13244410
> 
> 赞同：0
> 
> 时间：2012-11-06T04:30:38.560
> 
> 标签：asp.net, performance, yslow

我最近一直在研究性能，最近在我公司的 asp.net 网站上进行了 YSlow 测试。我已经设置了一个 IIS7 规则来将过期日期设置为 30 天。经过研究，我认为雅虎建议您在头部添加这样的标签：

```
<script src="http://yui.yahooapis.com/2.9.0/build/yahoo/yahoo-min.js" ></script>
<script src="http://yui.yahooapis.com/2.9.0/build/get/get-min.js" ></script>
<script src="http://yui.yahooapis.com/2.9.0/build/yahoo-dom-event/yahoo-dom-event.js"> 
</script>
<script src="http://yui.yahooapis.com/2.9.0/build/imageloader/imageloader-min.js">
</script>
<script src="http://yui.yahooapis.com/2.9.0/build/cookie/cookie-min.js"></script> 
```

如果您看到此链接，[Yahoo 关于如何改进 SEO 的建议](http://www.google.com/search?hl=en&as_q=&as_epq=build/yahoo/yahoo-min.js&as_oq=&as_eq=&as_nlo=&as_nhi=&lr=&cr=&as_qdr=all&as_sitesearch=&as_occt=any&safe=images&tbs=&as_filetype=&as_rights=)，似乎 yahoo 建议将这些 .js 文件放在您的标题中。

这些来自 yahoo 的 javascript 文件是否应该包含在您的 head 部分中？还是它们只是不必要的外部 .js 文件，会减慢您的网站速度？我只是不明白雅虎背后的逻辑。任何解决此问题的指导将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T07:31:30.583

这些文件是 YUI 版本 2（已弃用） YUI3 是最新的，如果您的网站没有使用这些组件中的任何一个，那么您可以将它们从 HEAD 部分中删除。如果您的网站确实在使用这些 YUI2 文件，那么您可以获得上述所有链接的组合版本，以便只有 1 个脚本标签并将其移动到页面底部旁边的 .

# html - 为什么“显示：表格单元”会弄乱我的 div？

> ID：13244412
> 
> 赞同：3
> 
> 时间：2012-11-06T04:30:45.333
> 
> 标签：html, css

我正在尝试将字符串“1”、“2”和“3”垂直居中，如下所示：

![](../Images/ecf077edf491f7d3f77c95c43eb3aee1.png)

但是当我使用`display: table-cell; vertical-align: middle;`所有 3 个 div 时，我得到了他不想要的结果：

![](../Images/1f3a38f7a56c75b0fecb22a0d64f38c0.png)

HTML 是

```
<div id='alldivs'>
    <div id='red' class='each_div'>1</div>
    <div id='blue' class='each_div'>2</div>
    <div id='green' class='each_div'>3</div>

</div> 
```

CSS是

```
.each_div { 
     width: 80px;
     height: 50px; 
     text-align: center;
     display: table-cell; vertical-align: middle;
} 
```

**[演示](http://jsfiddle.net/Starx/hAZZE/1/)**

如何保持 3 个 div 垂直对齐，同时保持每个 div 内的垂直对齐？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T04:49:44.183

这是一个概念上的误解。如果没有带有`display:table-row`表格单元格的父元素，它将始终跨越整个宽度，因为它将创建`table-row`and的匿名表格对象`table`。

根据 W3C 规范文章：**[表格](http://www.w3.org/TR/CSS2/tables.html#anonymous-boxes)**

> HTML 以外的文档语言可能不包含 CSS 2.1 表格模型中的所有元素。在这些情况下，必须假设“缺失”元素才能使表模型正常工作。任何**表格元素都会在其周围自动生成必要的匿名表格对象**，由至少三个嵌套对象组成，分别对应一个 'table'/'inline-table' 元素、一个 'table-row' 元素和一个 'table-cell' 元素. ......

[这](http://www.quirksmode.org/css/display.html#table)是一个 quirksmode 页面，显示了`display: table`等的用途。显示与此问题相同效果的图像。

![](../Images/38107fa4cbf111f383541f8f00c840db.png)

要从语义上解决这个问题，您必须添加一个额外的元素以显示为行。

```
<div id='alldivs'>
    <div id='red' class='each_div'>
        <div class="cell">1</div>
    </div>
    <div id='blue' class='each_div'>
        <div class="cell">2</div>
    </div>
    <div id='green' class='each_div'>
        <div class="cell">3</div>
    </div>
</div> 
```

然后将相对 CSS 分配给它们

```
#alldivs { display: table; }

.each_div {
     display: table-row;
}

.cell {     
    width: 80px;
    height: 50px;
    display: table-cell;
    vertical-align: middle;
    border: 1px #000 solid;
} 
```

### [演示](http://jsfiddle.net/Starx/hAZZE/3/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-06T05:03:47.937

我认为有一个更简单的方法，使用`line-height`：

```
<div id='alldivs'>
    <div id='red' class='each_div'>1</div>
    <div id='blue' class='each_div'>2</div>
    <div id='green' class='each_div'>3</div>
</div>

.each_div { 
     width: 80px;
     height: 50px; 
     line-height:50px;     // set to the same height as the div
     text-align: center;
     clear:both;}          // add clear both to skip line 
```

请参阅此处的[jsfiddle](http://jsfiddle.net/KjZH8/2/)并与其他答案进行比较。

![在此处输入图像描述](../Images/6f4d71d71f9ef3ce1517902b13fe3070.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-06T04:55:23.920

您可以将每个包装在另一个`<div>`中`display: table-row;`，它会看起来如您所愿：

HTML：

```
<div id='alldivs'>
        <div class="row">
            <div id='red' class='each_div'>1</div>
        </div>
        <div class="row">
            <div id='blue' class='each_div'>2</div>
        </div>
        <div class="row">
            <div id='green' class='each_div'>3</div>
        </div>
</div>​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

CSS：

```
.each_div { 
     width: 80px;
     height: 50px; 
     display: table-cell; 
     vertical-align: middle;
     border: 1px #000 solid;
}
.row {
    display: table-row;
}​ 
```

这是因为`table-*`被设计为模拟一张表格，因此必须遵循表格结构才能获得表格外观。在这种情况下，您可能只想使用表格。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-06T04:32:57.280

我找到了一种可以按照您想要的方式工作的解决方法。如果你愿意，你可以使用它：

将您的 CSS 更改为：

```
.each_div { 
     width: 100%;
     height: 50px; 
     vertical-align: middle;
     text-align:center;
     background:red;

}
#alldivs{
    width:80px;
    display:block;
} 
```

请注意，我已经提到`width:80px`了父 div`alldivs`

它给出的输出为：

![上述 CSS 的输出](../Images/664eddad27ad5ab0a7318d5efab27f4e.png)

​</p>

# php - POST 方法在表单提交中不起作用？

> ID：13244417
> 
> 赞同：2
> 
> 时间：2012-11-06T04:31:25.343
> 
> 标签：php, smarty, x-cart

我已经建立了一个产品查询页面，以便人们可以直接从产品详细信息页面提交问题。我想将一些变量从产品详细信息页面发布到查询页面，但是当我使用 POST 方法时它不起作用（我被重定向到搜索页面）。我认为这是一种安全措施，并且由 auth.php（或从那里引用的文件）控制。当我使用 GET 时它工作正常，但我想避免 URL 中的变量。我的页面看起来像这样

代码：

```
require "./auth.php";
require $xcart_dir."/include/categories.php";
require "products.php";
$smarty->assign("main","productenquiry");
func_display("customer/home.tpl", $smarty); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T05:24:45.930

您应该做的第一件事是确保它`$_POST`确实有效。为此，请创建一个基本表单，然后将其提交到仅包含`<?php var_dump($_POST);`. 这将向您准确显示正在通过的内容。

把问题分解成小步骤。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T04:47:15.527

afaics，这是您的网络服务器管理员提出的限制..imho，它与 auth.php 无关

我的一个朋友也有类似的问题，经过大量练习后，我们得知网络管理员做了一些导致问题的事情，并且根据我们的要求，同样的问题得到了解决，我们能够使用 POST 方法。

因此，您可以尝试联系您的网络服务器管理员来解决相同的问题。

# cocoa - 以编程方式使用 NSTableView

> ID：13244427
> 
> 赞同：0
> 
> 时间：2012-11-06T04:31:44.147
> 
> 标签：cocoa, nstableview

我需要以编程方式创建/使用 NSTableView。从文档看来，我会实现 NSTableViewDataSource 协议。但是该函数`tableView:objectValueForTableColumn:row:`建议（由于行索引）我必须手动处理排序。那正确吗？此外，由于每次重新显示时都会调用它，这可能会很慢，因为我使用的是 Python，这意味着每行/列都需要 Python 调用。

我想知道使用 Cocoa 绑定是否有意义，以及是否会更简单。在任何情况下，我都必须以编程方式执行此操作，但我对如何做到这一点有点迷茫。从其他示例中，我想我会创建一个 NSArrayController 并以某种方式将它们绑定在一起。

另外，我想让它在旧的 MacOSX 上运行，所以我想我必须使用基于单元的 NSTableView，不管这意味着什么。

数据源将是静态的并且不可编辑，即我可以只提供一个带有数据的 NSArray。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T23:55:30.803

您只需对数组进行一次排序，然后在调用委托方法时访问数组中的适当索引。

您真的应该好好阅读[Table View Programming Guide](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/TableView/Introduction/Introduction.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T15:55:27.057

NSTableViews 的三种使用方式： 1) 委托方法；2) NSArrayController；或 3) 绑定。我对你最好的建议是在尝试在 python 中执行此操作之前，首先在 Cocoa ObjC 项目的 Xcode 中学习所有这三个。注意：我还建议您首先学习如何通过 nibs 进行这些操作，然后弄清楚如何以编程方式进行操作（再次在 Cococa ObjC 项目上的 Xcode 中，然后在 python 中尝试）。

如果您了解 Interface Builder（在 Xcode 4 中查看，Xcode4 之前的应用程序）绑定是如何工作的，那么对于以下代码，“Bind To”对应于 myController，“Controller Key”将是“selection”，而 Model Key Path 将是“完整路径”。

[myView 绑定：@“valuePath”toObject：myController withKeyPath：@“selection.fullPath”选项：无]；

# asp.net-mvc-3 - Telerik MVC3 窗口显示图像或 Pdf

> ID：13244431
> 
> 赞同：0
> 
> 时间：2012-11-06T04:32:19.157
> 
> 标签：asp.net-mvc-3, telerik-mvc, telerik-window

我在我的 MVC3 项目中使用 Telerik Window。我的本地系统中有大量文件（如 .Png、.JPEG、.Pdf 等）。我想用 Telerik Window 展示这些文件。我不知道我该怎么做。我需要建议来做到这一点。请帮助我。

我有一个像这样的 Telerik Window 代码。

**查看.cshtml**

```
<div id="upload_win">
@{Html.Telerik().Window().Visible(false)
        .Name("File").ClientEvents(cli => cli.OnClose("OnClose"))
        .Modal(true)
         // .LoadContentFrom("action","Controller")
        .Scrollable(false)
        .Resizable()
        .Draggable(true)
        .Width(870)
        .Height(500)
        .Render();
}
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T17:06:57.853

我今天遇到了同样的问题，这是我必须做的才能让它工作。

```
@(Html.Telerik().Window()
            .Name("Window")
            .Title("Server Report Window (PDF)")
            .Draggable(true)
            .Resizable(resize => resize
                .Enabled(false)
            )
            .Modal(true)
            .Buttons(button => button
                .Maximize()
                .Close()
            )
            .Effects(fx =>
                fx.Zoom().Opacity()
                    .OpenDuration(AnimationDuration.Slow)
                    .CloseDuration(AnimationDuration.Slow)
            )
            .Content("<iframe src='Controller/Action' width='100%' height='100%' />")
            .Width(500)
            .Height(350)    
        ) 
```

因此，需要注意的是，我尝试使用 LoadContentFrom，虽然它会返回 PDF，但 PDF 被显示为“字节码”。使用 Content，我使用了 iframe，并让 iframe 呈现 PDF。

我仍在试图弄清楚如何在 LoadContentFrom 中获取它，但现在这已经完成了。

更新：想通了，这是过程

1.  创建将返回部分视图的操作

    public ActionResult DisplayPDF(){ return PartialView("_PDFView"); }

2.  创建仅包含 iframe 的局部视图，确保将宽度和高度设置为 100%，这将确保无论 Telerik 窗口的大小如何，它都会相应地扩展以适应大小，即使在调整大小时也是如此。iframe src 应该指向返回 File(pdf_content, "application/pdf) 的操作

    iframe src="控制器/动作" width="100%" height="100%"

3.  在包含 Telerik 窗口的视图中，更新它以反映 PartialView 的路径

    .LoadContentFrom("控制器/DisplayPDF")

# jquery - 下拉列表选择值时触发 jquery 函数

> ID：13244435
> 
> 赞同：1
> 
> 时间：2012-11-06T04:32:30.950
> 
> 标签：jquery, asp.net, function, drop-down-menu, selectedvalue

我有一个 jQuery animate 函数，如果我的下拉列表的 selectedvalue 是 X，我想调用它

```
 <script>
    $(function () {
        var state = true;
        ($("#button").click)(function () {
            if (state) {
                $("#effect").animate({
                    backgroundColor: "#aa0000",
                    color: "#fff",
                    width: 500
                }, 1000);
                  } else {
                $("#effect").animate({
                    backgroundColor: "#fff",
                    color: "#000",
                    width:500

                }, 1000);
            }
            state = !state;
        });
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T04:57:32.907

你可以试试这样

```
jQuery(document).ready(function(){
    var state = true;
  $("#otherCatches").change(function() {
      if (state) {
            $("#effect").animate({
                backgroundColor: "#aa0000",
                color: "#fff",
                width: 500
            }, 1000);
              } else {
            $("#effect").animate({
                backgroundColor: "#fff",
                color: "#000",
                width:500

            }, 1000);
        }
        state = !state;

   });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T05:57:58.410

下拉 id -> ddlDropDown

```
 $(document).ready(function(){
          var state = true;
        $("#ddlDropDown").change(function() {
             if ($("#ddlDropDown").val()=="X") { //Checking if value is X
                $("#effect").animate({
                     backgroundColor: "#aa0000",
                     color: "#fff",
                     width: 500
                  }, 1000);
              } else {
               $("#effect").animate({
               backgroundColor: "#fff",
               color: "#000",
               width:500

        }, 1000);
      }
      state = !state;
  });
}); 
```

# c# - System.BadImageFormatException 这是什么意思？

> ID：13244439
> 
> 赞同：-2
> 
> 时间：2012-11-06T04:32:52.303
> 
> 标签：c#, exception, badimageformatexception

> **可能重复：**
> [尝试使用 installutil.exe 安装服务时出现 System.BadImageFormatException “invalid format”](https://stackoverflow.com/questions/323140/system-badimageformatexception-invalid-format-when-trying-to-install-service-w)

当我安装我的 Windows 服务应用程序时，我收到以下异常：

> 错误 1001。初始化安装时发生异常：System.BadImageFormatException：无法加载文件或程序集.....file.exe 或其依赖项之一。试图加载格式不正确的程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T04:41:30.600

这意味着您的程序集之一是为 64 位模式编译的，并尝试加载 32 位的程序集，反之亦然。

# html - Aptana 没有将文件复制到外部服务器

> ID：13244443
> 
> 赞同：1
> 
> 时间：2012-11-06T04:33:32.590
> 
> 标签：html, testing, localhost, aptana, external

我刚刚设置了 Aptana，并在文件夹 C:\Apache\htdocs 中配置了 Apache 测试服务器。当我尝试测试一个简单的 HTML 文件时，我被定向到 localhost/myproject/myfile.html 但我收到 404 错误。检查文件夹后，我发现它是空的。如果我将文件放在该文件夹中，外部服务器会很好地显示它，但是当我尝试运行它们时，Aptana 不会将文件加载到测试服务器上。有任何想法吗？我知道这很简单，但我似乎无法找出问题所在。

谢谢，罗伯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T02:14:59.827

我为此发现的解决方案似乎是一种解决方法，但可能是执行任务的唯一方法。我只是设置了 localhost 服务器，就好像我将站点发布到远程位置一样。当然，文件不会像 Dreamweaver 那样自动更新，但它可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-30T13:36:26.483

我发现了这个问题的最佳解决方案。我发现我需要在本地机器上安装一个 FTP 服务器。我安装并配置了 Filezilla 服务器，瞧 - 问题解决了。我要添加的唯一提示是确保正确设置文件夹的权限，否则您会遇到错误。

# android - Android NFC 组件 - DAL、LLC、OSAL、HCI 和 LIBNFC？

> ID：13244444
> 
> 赞同：2
> 
> 时间：2012-11-06T04:33:49.650
> 
> 标签：android, nfc

嗨，所有 NFC 爱好者，我正在尝试了解格式化特定类型 NFC 卡的代码，在此之前我试图通过 Android 源代码/外部/linbfc-nxp 文件夹中的 libnfc-nxp 代码。

谁能给我 30000 英尺的 NFC 组件概述 - DAL、LLC、OSAL、HCI 和 LIBNFC？使用什么以及为什么使用它们。rgds，软软的

# webdriver - 使用 C# 在 WebDriver 中打开新窗口

> ID：13244448
> 
> 赞同：2
> 
> 时间：2012-11-06T04:34:25.867
> 
> 标签：webdriver, selenium-webdriver

**编辑4：**

![在此处输入图像描述](../Images/06de34f684c83d227147df7987effdf5.png) **编辑 3** ![在此处输入图像描述](../Images/8444f75f37ea16f5e445246557f5992d.png)

**编辑 2**

```
 string currentWindow = driver.CurrentWindowHandle;

    driver.SwitchTo().Window("");
    string childTitle = driver.Title;

    driver.SwitchTo().Window(currentWindow);
    string parentTitle = driver.Title; 
```

上面的代码为父窗口或子窗口提供了相同的标题。

编辑：

```
<a id="ctl00_ctl00_Features_ctl03_lnkPage" class="title" target="_blank" href="websiteaddress">Stay  Around</a> 
```

如何验证打开的新窗口的标题，一旦我验证然后关闭打开的新窗口？

所以在我的页面中，我有一个链接并单击该链接，它会打开一个新窗口，现在我不确定如何验证该窗口的标题。

这是我到目前为止所做的。

```
GoToMysiteUrl();
IWebElement addtoList = driver.FindElement(By.XPath(_pageName));
addtoList.Click(); 
```

//它打开一个新窗口

现在我想将焦点切换到新窗口并验证标题并将新窗口关闭回上一个窗口。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T19:33:55.257

大多数人在处理 IE 中的弹出窗口时错过的部分是对元素的单击是异步的。也就是说，如果您`.WindowHandles`在单击后立即检查属性，您可能会失去竞争条件，因为您在 IE 有机会创建新窗口之前检查是否存在新窗口，并且驱动程序已经有机会注册它。

这是我用来执行相同操作的 C# 代码：

```
string foundHandle = null;
string originalWindowHandle = driver.CurrentWindowHandle;

// Get the list of existing window handles.
IList<string> existingHandles = driver.WindowHandles;
IWebElement addtoList = driver.FindElement(By.XPath(_pageName));
addtoList.Click();

// Use a timeout. Alternatively, you could use a WebDriverWait
// for this operation.
DateTime timeout = DateTime.Now.Add(TimeSpan.FromSeconds(5));
while(DateTime.Now < timeout)
{
    // This method uses LINQ, so it presupposes you are running on
    // .NET 3.5 or above. Alternatively, it's possible to do this
    // without LINQ, but the code is more verbose.
    IList<string> currentHandles = driver.WindowHandles;
    IList<string> differentHandles = currentHandles.Except(existingHandles).ToList();
    if (differentHandles.Count > 0)
    {
        // There will ordinarily only be one handle in this list,
        // so it should be safe to return the first one here.
        foundHandle = differentHandles[0];
        break;
    }

    // Sleep for a very short period of time to prevent starving the driver thread.
    System.Threading.Thread.Sleep(250);
}

if (string.IsNullOrEmpty(foundHandle))
{
    throw new Exception("didn't find popup window within timeout");
}

driver.SwitchToWindow(foundHandle);

// Do whatever verification on the popup window you need to, then...
driver.Close();

// And switch back to the original window handle.
driver.SwitchToWindow(originalWindowHandle); 
```

顺便说一句，如果您使用的是 .NET 绑定，则可以访问`PopupWindowFinder`WebDriver.Support.dll 程序集中的一个类，它使用与定位弹出窗口非常相似的方法。您可能会发现该类完全符合您的需求，并且无需修改即可使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T08:27:57.487

```
GoToMysiteUrl();
IWebElement addtoList = driver.FindElement(By.XPath(_pageName));
addtoList.Click(); 
```

// 发布上述操作后，将打开一个新窗口，如问题中所述

// 获取主窗口的句柄

```
string  currentWindow = Driver.CurrentWindowHandle; 
```

// 切换到新打开的窗口

```
Driver.SwitchTo().Window("Your Window Name"); 
```

// 在此处执行所需的操作/断言并关闭窗口

// 切换到主窗口

```
Driver.SwitchTo().Window(currentWindow); 
```

# c++ - 如何将片段着色器仅应用于 OpenGL 中的一个对象？

> ID：13244450
> 
> 赞同：7
> 
> 时间：2012-11-06T04:34:36.067
> 
> 标签：c++, opengl

我刚刚开始学习OpenGL。在我看过的所有教程中，他们演示了使用片段着色器设置视图中所有对象的颜色。我还没有发现如何在其中一个对象上使用片段着色器，为不同的对象赋予不同的颜色。你是怎样做的？

为了提供问题的背景，我在 2d 中绘制了一个带有房屋和道路的简单场景。我发现了如何使用固定的图形管道设置我的每个对象（房子的主体、窗户等）的颜色，我只是不明白如何使用片段着色器设置颜色。

任何澄清将不胜感激，包括如果我误解了某些东西，请更正。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T04:43:41.737

在使用`glDrawArrays`或绘制对象之前`glDrawElements`，将颜色作为变量传递给着色器。

[http://www.opengl.org/sdk/docs/man/xhtml/glUniform.xml](http://www.opengl.org/sdk/docs/man/xhtml/glUniform.xml)

示例 GLSL 片段着色器：

```
uniform vec4 u_color;

void main(void)
{
     gl_FragColor = u_color;
 } 
```

我会扩展这个答案，但我很懒惰。希望它有所帮助。网上有很多教程，随便搜一下glsl、glUniform4f等。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-06T04:44:40.067

> 为了提供问题的背景，我在 2d 中绘制了一个带有房屋和道路的简单场景。我发现了如何使用固定的图形管道设置我的每个对象（房子的主体、窗户等）的颜色，我只是不明白如何使用片段着色器设置颜色。

[正如 RobertRouhani 所说](https://stackoverflow.com/questions/13244450/how-to-apply-a-fragment-shader-to-only-one-object-in-opengl#comment18045966_13244450)，使颜色统一并为每个对象更改它。

* * *

> 如何将片段着色器仅应用于 OpenGL 中的一个对象？

在使用不同的着色器后，您可以简单地使用`glUseProgram`和渲染调用更改着色器程序。

看到这个：[https ://gamedev.stackexchange.com/questions/22216/using-multiple-shaders](https://gamedev.stackexchange.com/questions/22216/using-multiple-shaders)

# transactions - 启用事务时，camel activemq 组件与 ec2 上的实例一起挂起

> ID：13244457
> 
> 赞同：1
> 
> 时间：2012-11-06T04:35:28.757
> 
> 标签：transactions, amazon-ec2, jms, activemq

我有一个在 ec2 上运行的 activemq。当我在未启用 JMS 事务的情况下运行测试时，测试工作正常。但是，一旦我启用了事务，就不会传递任何消息，测试就会挂起。（如果我在我的本地 activemq 上运行相同的设置，它会很好。）我想知道当我使用启用事务的 activemq 时是否需要设置一些特别的东西。有人试过这个组合吗？

谢谢，JJ

我的骆驼配置的PS片段如下：

```
<bean id="dataSource" destroy-method="close" class="org.apache.commons.dbcp.BasicDataSource">
    <property name="driverClassName" value="${jdbcDriver}"/>
    <property name="username" value="${jdbcUserName}"/>
    <property name="password" value="${jdbcPassword}"/>
    <property name="url" value="${jdbcUrl}"/>
    <property name="initialSize" value="${jdbcMaxPoolSize}"/>
</bean>

<bean id="jmsConnectionFactory"
      class="org.apache.activemq.ActiveMQConnectionFactory">
    <property name="brokerURL" value="${activeMQBrokerURL}"/>
</bean>

<bean id="pooledConnectionFactory"
      class="org.apache.activemq.pool.PooledConnectionFactory" init-method="start" destroy-method="stop">
    <property name="maxConnections" value="8" />
    <property name="connectionFactory" ref="jmsConnectionFactory" />
</bean>

<bean id="jmsConfig"
      class="org.apache.camel.component.jms.JmsConfiguration">
    <property name="connectionFactory" ref="pooledConnectionFactory"/>
    <property name="concurrentConsumers" value="10"/>
</bean>

<bean id="transactionManager" class="org.springframework.jms.connection.JmsTransactionManager">
    <property name="connectionFactory" ref="pooledConnectionFactory"/>
</bean>

<bean id="activemq" class="org.apache.activemq.camel.component.ActiveMQComponent">
    <property name="transacted" value="true"/>
    <property name="transactionManager" ref="transactionManager"/>
    <property name="concurrentConsumers" value="5"/>

    <!--
    <property name="connectionFactory" ref="pooledConnectionFactory"/>
    <property name="configuration" ref="jmsConfig"/>
    -->
</bean> 
```

# android - 如何在 Android 上使精灵的背景透明？

> ID：13244458
> 
> 赞同：1
> 
> 时间：2012-11-06T04:35:07.857
> 
> 标签：android, transparency, sprite, game-development

我正在为 Android 开发游戏。出于这个问题的目的，让我们假设我有一个红球的精灵在空间中移动，在某个背景或其他任何地方。

我有一个用于绘制背景的 PNG 文件和一个用于在背景上绘制球的 PNG 文件。问题是我的球是 20 X 20 像素 PNG 上的红色圆圈，这意味着我有一些白色的“剩余”，所以当我在屏幕上绘制它时，当我只想要时，“剩余的白色”会出现在我的背景上红圈到。

对不起，我对动画完全陌生。如何从方形 PNG 中裁剪出我的圆圈或以其他方式使我的球 PNG 中的背景透明？我是以编程方式进行的，还是有办法绘制我的 PNG，使不相关的部分是透明的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T05:04:58.123

Photoshop 和 GIMP 等程序允许您将背景设置为透明而不是白色。尝试在其中一个中编辑您的 PNG 并删除白色。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-24T17:21:16.497

我建议您使用[Paint.NET](http://getpaint.net)。您可以使用魔棒选择要透明的区域，然后按“剪切”（剪刀符号）或按`Ctrl`+ `X`。

# postgresql - 如何更改 PostgreSQL 中的日期样式？

> ID：13244460
> 
> 赞同：28
> 
> 时间：2012-11-06T04:35:26.303
> 
> 标签：postgresql

在 postgres 中，我有一个带有日期列的表。现在 postgres 允许我以 Ymd 格式写日期。但我需要 d/m/Y 格式的日期。如何改变它？

当我做：

```
 show datestyle; 
```

我得到：

```
 "ISO, DMY" 
```

并以这种格式在表格中输入日期`13/02/2009`

但是当我再次关闭并打开桌子时，我看到了这个`2009-02-13`。JDBC 也以这种格式给我日期。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2017-10-18T23:05:34.733

你也可以使用命令

```
set datestyle to [your new datestyle]; 
```

在 postgreSQL 的控制台中。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-11-06T04:50:02.863

yyyy-mm-dd 是日期字段的推荐格式，它是 ISO 8601 格式。

您可以更改 postgresql.conf 文件中的格式。

该[文件](http://www.postgresql.org/docs/9.1/static/datatype-datetime.html)指出

> 用户可以使用 SET datestyle 命令、postgresql.conf 配置文件中的 DateStyle 参数或服务器或客户端上的 PGDATESTYLE 环境变量来选择日期/时间样式。格式化函数 to_char 也可用作更灵活的格式化日期/时间输出的方式。

希望这可以帮助！

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-11-06T04:41:25.237

将[to_char](http://www.postgresql.org/docs/9.1/static/functions-formatting.html#FUNCTIONS-FORMATTING-DATETIME-TABLE)函数与您的日期一起使用，如下所示：

```
select to_char(date_column1, 'Mon/DD/YYYY'); 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-11-06T08:33:43.760

如果可能，请不要使用`DATESTYLE`. 它会影响会话中的所有代码，包括可能不期望它并且可能没有`DATESTYLE`在其定义中设置显式覆盖的存储过程之类的东西。

如果可以，请使用`to_char`日期输出和`to_timestamp`日期输入，只要您需要使用任何可能不明确的日期格式，例如`D/M/Y`. 其余时间使用 ISO 日期。

# mysql - 为什么 MySQL VARCHAR 允许超过最大长度？

> ID：13244462
> 
> 赞同：4
> 
> 时间：2012-11-06T04:35:44.767
> 
> 标签：mysql, varchar

我创建了一个带有 UTF-8 的表`VARCHAR(5000)`，并用数据填充了它。但看起来这个字段允许的数据比它被指示的要多：

```
mysql> DESCRIBE test;
+---------+------------------+------+-----+---------+----------------+
| Field   | Type             | Null | Key | Default | Extra          |
+---------+------------------+------+-----+---------+----------------+
| id      | int(10) unsigned | NO   | PRI | NULL    | auto_increment |
| comment | varchar(5000)    | YES  |     | NULL    |                |
+---------+------------------+------+-----+---------+----------------+
2 rows in set (0.01 sec)

mysql> SELECT MAX(LENGTH(comment)) FROM test;
+----------------------+
| MAX(LENGTH(comment)) |
+----------------------+
|                 5001 |
+----------------------+
1 row in set (0.01 sec) 
```

这是为什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-06T05:22:35.977

好的，问题是[LENGTH()](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_length)返回**字节**的长度，而不是字符。因为字符串是 UTF-8，我需要使用[CHAR_LENGTH()](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_char-length)代替：

```
mysql> DESCRIBE test;
+---------+------------------+------+-----+---------+----------------+
| Field   | Type             | Null | Key | Default | Extra          |
+---------+------------------+------+-----+---------+----------------+
| id      | int(10) unsigned | NO   | PRI | NULL    | auto_increment |
| comment | varchar(5000)    | YES  |     | NULL    |                |
+---------+------------------+------+-----+---------+----------------+
2 rows in set (0.01 sec)

mysql> SELECT MAX(LENGTH(comment)) FROM test;
+----------------------+
| MAX(LENGTH(comment)) |
+----------------------+
|                 5001 |
+----------------------+
1 row in set (0.01 sec)

mysql> SELECT MAX(CHAR_LENGTH(comment)) FROM test;
+----------------------+
| MAX(LENGTH(comment)) |
+----------------------+
|                 5000 |
+----------------------+
1 row in set (0.01 sec) 
```

长度是 5001，因为字符串正好包含一个两字节字符！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-06T04:51:14.373

```
 The following table illustrates the differences between CHAR and VARCHAR
 by showing the result of storing various string values into CHAR(4) and
 VARCHAR(4) columns (assuming that the column uses a single-byte character
 set such as latin1).

    Value   |CHAR(4)    |Storage Required   |VARCHAR(4) |Storage Required
===================================================================================
    ''          '    '  4 bytes            ''           1 byte
    'ab'        'ab  '  4 bytes            'ab'         3 bytes
    'abcd'      'abcd'  4 bytes            'abcd'       5 bytes
    'abcdefgh'  'abcd'  4 bytes            'abcd'       5 bytes
===================================================================================

       The values shown as stored in the last row of the table apply only when
  not using strict mode; if MySQL is running in strict mode, values that exceed 
  the column length are not stored, and an error results. 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-06T04:48:59.220

VARCHAR 的有效最大长度为 65,535 字节。您创建 VARCHAR 列时使用的数字 5,000 实际上并不限制 VARCHAR 列的允许存储长度。与 CHAR 数据类型相比，这是一种不同的行为。

[11.4.1\. CHAR 和 VARCHAR 类型](http://dev.mysql.com/doc/refman/5.5/en/char.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-06T04:38:20.917

会不会是 5000 从零开始，然后指望给你 5001 个字符。它做 5002 吗？

# python - 如何从列表列表中删除第 N 个列表项（列删除）？

> ID：13244466
> 
> 赞同：19
> 
> 时间：2012-11-06T04:36:48.250
> 
> 标签：python, list, slice, del

如何从列表列表中删除“列”？
鉴于：

```
L = [
     ["a","b","C","d"],
     [ 1,  2,  3,  4 ],
     ["w","x","y","z"]
    ] 
```

我想删除“列”2以获得：

```
L = [
     ["a","b","d"],
     [ 1,  2,  4 ],
     ["w","x","z"]
    ] 
```

是否有**slice**或**del**方法可以做到这一点？就像是：

```
del L[:][2] 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-06T04:38:37.767

你可以循环。

```
for x in L:
    del x[2] 
```

如果您要处理大量数据，则可以使用支持复杂切片的库。但是，简单的列表列表不会切片。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-06T04:40:25.647

只需遍历该列表并删除要删除的索引。

例如

```
for sublist in list:
    del sublist[index] 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-06T04:53:12.777

稍微扭曲的版本：

```
index = 2  # Delete column 2 
[(x[0:index] + x[index+1:]) for x in L] 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2016-02-10T11:25:40.383

您可以通过列表理解来做到这一点：

```
>>> removed = [ l.pop(2) for l in L ]
>>> print L
[['a', 'b', 'd'], [1, 2, 4], ['w', 'x', 'z']]
>>> print removed
['d', 4, 'z'] 
```

它循环列表并弹出位置 2 中的每个元素。

您已经删除了元素列表和没有这些元素的主列表。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-11-06T09:34:11.893

```
[(x[0], x[1], x[3]) for x in L] 
```

It works fine.

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-11-06T16:29:55.803

```
L = [['a', 'b', 'C', 'd'], [1, 2, 3, 4], ['w', 'x', 'y', 'z']]
_ = [i.remove(i[2]) for i in L] 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-11-06T04:47:25.557

这是删除您想要的任何列的一种非常简单的方法。

```
L = [
["a","b","C","d"],
[ 1,  2,  3,  4 ],
["w","x","y","z"]
]
temp = [[x[0],x[1],x[3]] for x in L] #x[column that you do not want to remove]
print temp
O/P->[['a', 'b', 'd'], [1, 2, 4], ['w', 'x', 'z']] 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-11-06T04:46:18.943

如果您不介意创建新列表，则可以尝试以下操作：

```
filter_col = lambda lVals, iCol: [[x for i,x in enumerate(row) if i!=iCol] for row in lVals]

filter_out(L, 2) 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-06-16T03:10:01.803

替代方案`pop()`：

```
[x.__delitem__(n) for x in L] 
```

这`n`是要删除的元素的索引。

# air - NetConnection 调用时 Adob e Air 崩溃

> ID：13244467
> 
> 赞同：1
> 
> 时间：2012-11-06T04:36:51.727
> 
> 标签：air, crash, amf, netconnection

我有一个具有 NetConnection 的 Adob​​e Air 移动应用程序。一个在呼叫我的 AMF 服务器时会进行呼叫，并且一切都恢复正常。当我拨打第二个电话时，我的应用程序崩溃了。

有人遇到这个吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T13:54:25.167

也许您的服务器客户端是错误的原因！这可能是 NetConnection 自动合并两个 amf 调用的原因。因此，您在服务器端的功能将运行两次。在服务器端检查您的 require 或 require_one 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T19:26:01.393

您将需要获取更多信息。在调试模式下运行它，您应该会得到堆栈跟踪、变量值等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T22:53:10.630

弄清楚了。我在客户端和服务器上的模型不匹配。为什么 AIR 只是崩溃并且没有给我一个错误，这很奇怪。

# rpm - rpm 规范文件语法错误

> ID：13244469
> 
> 赞同：0
> 
> 时间：2012-11-06T04:37:16.130
> 
> 标签：rpm, rpmbuild, rpm-spec

我试图创建一个 rpm 包，我的规范文件如下所示：

```
%define config_option (cat %1)
%define __spec_install_post %{nil}
%define debug_package %{nil}
%define __os_install_post %{_dbpath}/brp-compress
%define __prelink_undo_cmd %{nil}
%define __strip /bin/true

Name: %{rpm_name}
Summary: ASG-RP32 Rootfs
Version: 1
Release: 1
License: xxxx
Group: rootfs
Vendor: xxxx
BuildRoot: %{rpmroot}
Prefix: /

%description
See Summary.

%install
mkdir -p /home /media /mnt /opt /proc /root /selinux /srv /sys /tmp

%files
%defattr (-, root, root)
/README
/bin/*
/boot/*
/dev/*
/etc/*
/lib/*
/lib64/*
/sbin/*
/usr/*
/var/* 
```

但输出给了我一些错误，

```
Processing files: pkg-linux-x86-32-linux-xc-release-1-1
getOutputFrom(): Broken pipe 
```

请帮忙。

注意：安装后的目录是现有目录，当我尝试使用 %dir 包含它们时，它们也给了我同样的错误。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T07:35:03.240

您可以通过执行带有 -vv 选项的 rpmbuild 命令来获取错误原因的详细信息。

如果在执行脚本时发生错误`check-files`，您可以将以下定义添加到规范文件中作为临时解决方案。

```
%define __check_files %{nil} 
```

顺便说一句，您确定要在 / 目录下创建目录但 $RPM_BUILD_ROOT，如 %install 部分中定义的那样？

# wordpress - TinyMCE textarea 中的文本在点击时隐藏在 HTML 模式中，在可视模式下正常

> ID：13244476
> 
> 赞同：2
> 
> 时间：2012-11-06T04:37:28.513
> 
> 标签：wordpress, tinymce

自定义 wordpress 表单，使用 wp_editor，我在 textarea 上创建了一个 Tinymce 实例。

编辑器默认为 HTML，但如果我单击编辑区域，内容就会消失。

但是，如果我切换到可视模式，一切都按预期工作，然后切换回 HTML 模式也一切正常，也许点击被 TinyMCE 拦截了？

请问有什么线索....

谢谢马丁

PS初始化是：

```
$settings = array(
        'wpautop' => true,
        'media_buttons' => false,
        'tinymce' => array(
                'theme_advanced_buttons1' => 'bold,italic,underline,blockquote,|,undo,redo,|,fullscreen',
                'theme_advanced_buttons2' => '',
                'theme_advanced_buttons3' => '',
                'theme_advanced_buttons4' => '',
                'theme_advanced_resizing' =>  true,
                'width' => '600px'
        )
); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-01T15:30:23.097

我采取了不同的方法并`tinyMCE`在它们之间切换时重新启动。将其附加到偶数处理程序：

```
var postContent = "Take Content from some hidden field, AJAX call, etc.";
if ( tinyMCE
    && tinyMCE.activeEditor
    && tinyMCE.activeEditor.id )
{
    tinyMCE.activeEditor.setContent( postContent, {} );
    tinymce.execCommand( 'mceRemoveControl', true, tinyMCE.activeEditor.id );
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T15:20:48.113

当使用隐藏的文本区域（或其他 html 元素）来初始化 tinymce 编辑器时，可能会出现此类问题（除了其他问题）。避免这种情况的最佳方法是在您启动编辑器之前使其可见。

# php - 将 int(11) 转换为 yyyy-mm-dd 格式

> ID：13244481
> 
> 赞同：2
> 
> 时间：2012-11-06T04:38:59.623
> 
> 标签：php, mysql, xml, date

如何将整数转换为日期格式，例如`2012-12-12`插入 XML 文档？

```
<Feed>
<order>
<Order>
<orderid>71</orderid>
<login>krishna</login>
<date>1123213230</date> 
```

我使用了以下代码：

```
$_xml .= "\t<date>" . $n['date'] . "</date>\r\n"; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-06T04:40:38.280

您可以`[FROM_UNIXTIME](http://dev.mysql.com/doc/refman/5.1/en/date-and-time-functions.html#function_from-unixtime)(column_name, '%Y-%m-%d')`在 MySQL 查询中使用。

或者你可以只使用`[date](http://php.net/date)('Y-m-d', $n['date'])`.

此外，您可以使用[`PHP_EOL`](http://php.net/manual/en/reserved.constants.php)并且不必手动添加`"\r\n"`到字符串的末尾。

# iphone - 无法在 iPhone 中添加 Coredata 框架

> ID：13244483
> 
> 赞同：1
> 
> 时间：2012-11-06T04:38:53.033
> 
> 标签：iphone, xcode, core-data

在我的应用程序中，我不小心从资源文件夹中删除了 CoreData 框架。但在那之后，当我尝试从构建设置中添加框架时，列表中缺少 Coredata.framework。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-06T07:36:26.727

我认为您已删除框架而不是删除参考。

在另一台PC上找到CoreData.framwork，复制完整的framework并粘贴到你PC的frameworks文件夹中（/Applications/Xcode 5.0.2.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS7\. 0.sdk/系统/库/框架）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T05:33:12.043

首先查看 CoreData.framework 是否仍在您选择的框架列表中。如果是，请选择它并单击减号`-`将其删除。然后再次添加。

问题是它仍然在配置中标记为已添加，但由于您将其删除，因此无法在捆绑包中找到相应的文件。

# opengl - 具有 2D 纹理的 vbo - 实时透明度问题

> ID：13244487
> 
> 赞同：2
> 
> 时间：2012-11-06T04:39:29.823
> 
> 标签：opengl, transparency, texture2d

我正在研究一个模拟恒星盘动力学的 n 体代码。在渲染中，有两种类型的粒子：“经典”粒子（下图中的白色）和“暗物质”粒子（蓝色）。

这是模拟开始时的这张图片：

![在此处输入图像描述](../Images/998ce72f5cc4177fb581157c01edff5d.png)

透明度似乎一切正常，但如果我在运行期间放大，我注意到实际上，一些粒子保持相同的中间颜色，即有紫色。

这是这张图片的一个例子（这是从侧面看到的星盘）：

![在此处输入图像描述](../Images/e5256388654ec96a74d1318f12bced91.png)

我的主要问题是我不明白为什么颜色不会随着后面的其他粒子而改变。例如，我希望一个白色/蓝色粒子被其他蓝色/白色粒子部分着色，并且是实时的。

我向您展示了我使用透明度的 drawPoints() 函数：

```
void drawPoints()
{
    glEnable(GL_POINT_SPRITE);
    glTexEnvi(GL_POINT_SPRITE, GL_COORD_REPLACE, GL_TRUE);
    glEnable(GL_VERTEX_PROGRAM_POINT_SIZE_NV);

    glEnable(GL_BLEND);
    glBlendFunc (GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA);

    //glEnable( GL_DEPTH_TEST );

    glUseProgram(m_program);
    glUniform1f( glGetUniformLocation(m_program, "pointRadius"), m_particleRadius );
    glUniform1f( glGetUniformLocation(m_program, "pointScale"), m_pointScale );

    GLuint vbo_disk;

        glBindBuffer(GL_ARRAY_BUFFER, vbo_disk);
        glVertexPointer(4, GL_DOUBLE, 4*sizeof(double), pos);
        glEnableClientState(GL_VERTEX_ARRAY);

        glColor4f(1.0f, 1.0f, 1.0f, 1.0f);
        glDrawArrays(GL_POINTS, 0, numBodies_disk);

        glBindBuffer(GL_ARRAY_BUFFER, 0);
        glDisableClientState(GL_VERTEX_ARRAY);

    GLuint vbo_halo;

        glBindBuffer(GL_ARRAY_BUFFER, vbo_halo);
        glVertexPointer(4, GL_DOUBLE, 4*sizeof(double), &pos[numBodies_disk]);
        glEnableClientState(GL_VERTEX_ARRAY);

        glColor4f(0.0f, 0.0f, 1.0f, 0.5f);
        glDrawArrays(GL_POINTS, 0, numBodies_halo);

        glBindBuffer(GL_ARRAY_BUFFER, 0);
        glDisableClientState(GL_VERTEX_ARRAY); 

        glDisable(GL_BLEND);        
    glDisable(GL_POINT_SPRITE);
} 
```

我尝试使用`glEnable( GL_DEPTH_TEST )`，但它使用黑色背景方块绘制 2D 纹理。

你能给我一些线索来实时获得这种累积和部分透明度吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T08:19:38.410

确保禁用深度测试：

```
glDisable( GL_DEPTH_TEST ); 
```

然后，您可能想尝试不同的混合模式，例如加法混合：

```
glBlendFunc( GL_SRC_ALPHA, GL_ONE ); 
```

虽然添加剂混合非常漂亮，但它可能会产生过多的白色，这可能会破坏这种可视化的目的。您可以尝试降低`glColor4f`. 另一种解决方案是使用蓝色和红色粒子来突出差异。

# mysql - 从多个表中插入表

> ID：13244489
> 
> 赞同：24
> 
> 时间：2012-11-06T04:39:53.813
> 
> 标签：mysql, sql

嘿，所以我有一个连接两个不相关表的连接表。两张表都有`ID`'。我需要`ID`使用不同的值从每个表中选择`WHERE`，例如这是我的看法：

```
INSERT INTO c (aID, bID)
VALUES (SELECT a.ID WHERE a.Name="Me", SELECT b.ID WHERE b.Class="Math"); 
```

我见过的所有例子都使用了一个`join`语句，但是这两个表有一个共同的值，在这种情况下它们没有。

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2012-11-06T04:43:14.187

试试这个查询：

```
 INSERT INTO C (aID, bID) 
     SELECT A.ID, B.ID 
     FROM A, B 
     WHERE A.Name='Me'
     AND B.Class='Math'; 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-11-21T11:45:56.713

另一种方法可以是

```
INSERT INTO c (aID, bID)
SELECT 
   (SELECT A.id FROM TableA A WHERE A.names = 'sometext'), 
   B.id FROM TableB B 
WHERE 
   B.x_name ='othertext'; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-04-30T01:42:51.733

`Name`假设给定的and的每个表中只有一个值`Class`，最简单的方法就是将子查询包含在 中`()`：

```
INSERT INTO c VALUES (
(SELECT ID from a where Name='Me'),
(SELECT ID from b where Class ='Math')
) 
```

[dbfiddle 上的演示](https://dbfiddle.uk/?rdbms=mysql_5.7&fiddle=cd15a651df89af2f9763a15a00e9e88d)

# php - 无需重定向即可获取 facebook 访问令牌

> ID：13244490
> 
> 赞同：0
> 
> 时间：2012-11-06T04:40:01.960
> 
> 标签：php, facebook, redirect, access-token

这就是我检索用户访问令牌的方式

```
$code = $_REQUEST["code"];
 //auth user
 if(empty($code)) {
     $dialog_url = 'https://www.facebook.com/dialog/oauth?client_id=myclientid&redirect_uri=' . urlencode('http://myweb.com/facebook.php') ;
    echo("<script>top.location.href='" . $dialog_url . "'</script>");
  }
  //get user access_token
  $token_url = 'https://graph.facebook.com/oauth/access_token?client_id=myclientid&redirect_uri=' . urlencode('http://myweb.com/facebook.php') 
    . '&client_secret=mybigsecret&code=' . $code;
  $access_token = file_get_contents($token_url); 
```

但我想知道是否有任何方法可以在没有任何重定向的情况下做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T06:35:14.197

我认为普通浏览器没有解决方案，因为Facebook`X-Frame-Options:DENY`在oauth页面中设置了header，在这种情况下拒绝使用iframe。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T10:03:00.447

这是我的代码，你可以试试...

```
$code = $_REQUEST["code"];
$response = file_get_contents(
    "https://graph.facebook.com/oauth/access_token?" .
    "client_id=" . $client_id .
    "&redirect_uri=" . $redirect_url .
    "&client_secret=" . $client_secret .
    "&code=" . $code
);
parse_str($response, $params);
$graph_url = "https://graph.facebook.com/me?access_token=" . $params['access_token'];
$user_data = json_decode(file_get_contents($graph_url));
$user = $user_data->id; //get active fb user id
$facebook->setAccessToken($params['access_token']); 
```

PS `$params['access_token']`for access_token 值...

# android - 添加 9-patch 作为按钮背景后无法对齐文本

> ID：13244501
> 
> 赞同：1
> 
> 时间：2012-11-06T04:41:14.657
> 
> 标签：android, button, background, nine-patch

我有一个按钮，其上的文本需要水平居中对齐。当按钮没有 9 Patch 作为背景时，重力工作正常。但是，一旦我添加了一个 9 补丁作为背景，重力就会向左移动，并且无论重力设置如何，文本都不会改变。

我尝试按照其他一些线程的建议将填充设置为 0dip、-1px、@null。他们都没有工作。我也在使用 setBackgroundResource() 从代码中更改背景，因为我的要求被固定到 API 级别 8，因此设置背景的其他方法不是一个选项。此外，我不能使用选择器列表来执行此操作，因为我需要该按钮处于选定状态（如切换按钮）。

任何输入？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-06T04:44:29.040

这是因为在您的 9-patch 图像中您已经分配了内容区域（见右下部分）。

通常 Right 和 Bottom 部分用于内容填充*（可选）*，因此如果您想通过编程设置填充，则不要操纵 9 补丁的底部和右侧区域。

![在此处输入图像描述](../Images/8f88b41ce3eede8d8d3f91860231d7a7.png)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-22T10:19:49.307

每次设置背景后，我都必须以编程方式将填充设置为 0！这解决了我的问题。

谢谢

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-04-16T07:34:41.133

这是解决此问题的另一种方法：[Center Horizo​​ntaly and/or verticaly with 9 patch in Android](https://stackoverflow.com/questions/11502005/center-horizontaly-and-or-verticaly-with-9-patch-in-android)

它使用`RelativeLayout`9-patch 背景并`TextView`放在里面。然后，您可以根据需要格式化和对齐文本，而不会破坏 9-patch 边距和填充。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-10-27T08:47:18.443

添加`android:padding="0dp"`到`Button`为我工作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-05-15T04:00:17.463

检查并为该按钮背景的每个状态分配 9-patch 图像内容区域。

我曾经忘记为按钮的按下状态设置 9-patch 图像内容区域，这以某种方式导致正常状态下的有线填充行为。

# javascript - 复选框和按钮启用

> ID：13244505
> 
> 赞同：1
> 
> 时间：2012-11-06T04:41:10.760
> 
> 标签：javascript, checkbox, disabled-control

我有两个复选框，下面有两个按钮：

```
<tr>
  <form ACTION="jspCheckBox.jsp">
    SC Information Received  <input type="checkbox"  value="SC Information received">   
    Validation Begun <input type="checkbox"  value="Validate">
  </form>
</tr>
<tr>
  <td valign="middle" align="left" style="padding-left:10px;" nowrap>
    <button type="button" class="btn" name="btnApprove" onclick="approve();">Approve</button>
  </td>
  <td>
    <button type="button" class="btn" name="btnDeny" onclick="deny();">Deny</button>
  </td>
</tr> 
```

首次打开页面时，应启用第一个复选框，但应禁用另一个复选框和两个按钮。

随后，当用户选中第一个复选框时，第一个复选框应禁用，第二个复选框应启用。（此时按钮应保持禁用状态。）

最后，当用户选中第二个复选框时，第二个复选框应该被禁用并且两个按钮都应该被​​启用。

显然，这需要 JavaScript。

# c++ - PCRE忽略C++中的匹配

> ID：13244512
> 
> 赞同：1
> 
> 时间：2012-11-06T04:42:15.230
> 
> 标签：c++, regex, pcre

我正在尝试在 Ubuntu 中使用 C++ 和 PCRE 正则表达式。我安装了几乎所有相关的软件（libpcrepp 和类似的），但我什至无法匹配最简单的表达式。我的代码，简化：

```
#include <iostream>
#include <string>
#include <pcrecpp.h>

using namespace std;

int main() {

   std::string text, a, b;

   text = "Flowers in the forest are darker than in the prairie";

   pcrecpp::RE re("forest");

   if( re.PartialMatch(text, &a, &b) ) {
      std::cout << "match: " << a << b << "\n";
   }

} 
```

编译没有错误：

```
g++ t2.cpp -lpcrecpp -o t2 
```

并且执行时没有结果。有什么提示吗？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T04:49:32.780

> re.PartialMatch(文本, &a, &b)

如果正则表达式中至少有两个捕获，则只能返回 true，每个返回参数一个。由于您的正则表达式（“森林”）中没有捕获，因此无论模式是否与文本匹配，re.PartialMatch 都保证返回 false。

# rhino - Rhino ETL 支持哪些数据库？

> ID：13244513
> 
> 赞同：0
> 
> 时间：2012-11-06T04:42:20.463
> 
> 标签：rhino, rhino-etl

我被选择在我的应用程序中集成 Rhino ETL 工具。

在我的应用程序中，我使用各种数据库，如 sql server、oracle、mysql、sybase、Informix、db2、ingress。

Rhino 会支持这些数据库吗？

我还可以将 ienumerable< 行 > 迁移到数据表吗？

如果可能，怎么做？我正在寻找通用方法。

感谢您对集成 Rhino ETL 工具的指导。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T14:44:25.670

据我所知，使用**InputCommandOperation**，您可以使用任何有[ADO.NET 数据提供程序](http://msdn.microsoft.com/en-us/data/dd363565.aspx)的数据库。除此之外，您可以实现**AbstractOperation**来加载您可以弄清楚如何在 .NET 中加载的任何数据。

# r - 在 R 中绘制多条 Bootstrap 曲线

> ID：13244516
> 
> 赞同：6
> 
> 时间：2012-11-06T04:42:55.747
> 
> 标签：r

我想知道如何在 R 中绘制这些多条引导曲线。我的代码就像

```
dat2 <- read.delim("bone.data", sep ="\t", header= TRUE)
y <- dat2[,4]
x <- dat2[,2]
plot(x,y,xlab="age",ylab="BMD",col=ifelse(dat2[,3]=="female","red","blue")) 
```

多个引导曲线就像本书中的图 8.2 左下角一样。 [英语母语](http://www-stat.stanford.edu/~tibs/ElemStatLearn/)

![在此处输入图像描述](../Images/ad9544c2b548f22a8cc257d373240a70.png)

而名为Bone Mineral Density 的数据可以从这个网站获得： [data](http://www-stat.stanford.edu/~tibs/ElemStatLearn/data.html)

文件的直接链接是：[here](http://www-stat.stanford.edu/~tibs/ElemStatLearn/datasets/bone.data "这里")

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-06T16:12:51.250

`smooth.spline`您可以使用和绘制样条曲线`lines`：

```
plot.spline = function(x, y, ...) {
    s = smooth.spline(x, y, cv=TRUE)
    lines(predict(s), ...)
} 
```

因此，为了执行引导，按照书中的说明，您从数据中随机抽取行替换，并调用`plot.spline`重新抽样的数据：

```
bootstrap.curves = function(dat, nboot, ...) {
    for (i in 1:nboot) {
        subdata = dat[sample(NROW(dat), replace=TRUE), ]
        plot.spline(subdata$age, subdata$spnbmd, ...)
    }
} 
```

因此，您可以使用此函数为男性和女性运行单独的图：

```
bootstrap.curves(dat2[dat2$gender == "female", ], 10, col="red")
bootstrap.curves(dat2[dat2$gender == "male", ], 10, col="blue") 
```

最终结果：

![在此处输入图像描述](../Images/cbba4990fa8d786dacf1a5cdaa509d3d.png)

*注意：*此代码将产生许多警告（不是错误），如下所示：

```
1: In smooth.spline(x, y, cv = TRUE) :
  crossvalidation with non-unique 'x' values seems doubtful 
```

这是因为自举重采样。`smooth.spline`使用交叉验证来决定给出样条曲线的自由度的数量，但它不喜欢对重复`x`值这样做（因为实际上总是会使用自举重采样）。您可以通过选择自己的自由度数来解决此问题，但这可能适用于此目的。

# c++ - c ++将std :: function从另一个类传递给构造函数

> ID：13244520
> 
> 赞同：0
> 
> 时间：2012-11-06T04:42:50.883
> 
> 标签：c++, std, std-function

我将一个方法传递给一个构造函数，但是当我使用另一个类的方法时，它给了我一个错误。

它目前正在以这种形式工作；

```
unsigned int pHash(const std::string& str)
{
    //method
}
int main()
{
//stuff
HashMap* hm2 = new HashMap(pHash);
//stuff
} 
```

但是，如果我像这样引用另一个头文件的方法；

```
HashMap* hm2 = new HashMap(&HashFcn::primeHash); 
```

我在运行时收到错误消息，并显示以下消息；

```
Error   1   error C2100: illegal indirection    c:\program files (x86)\microsoft visual studio 11.0\vc\include\xrefwrap 273 1   Project
    Error   2   error C2440: 'newline' : cannot convert from 'const std::string *' to 'const HashFcn *' c:\program files (x86)\microsoft visual studio 11.0\vc\include\xrefwrap 273 1   Project
    Error   3   error C2647: '.*' : cannot dereference a 'unsigned int (__thiscall HashFcn::* )(const std::string &)' on a 'const std::string'  c:\program files (x86)\microsoft visual studio 11.0\vc\include\xrefwrap 273 1   Project 
```

我的 hashmap 构造函数如下所示；

```
HashMap::HashMap(HashFunction hashFunction)
    : hfunc(hashFunction) 
```

其中 hfunc 是方法的 typdef。

我有一个类 HashFcn 它有方法 primeHash

```
unsigned int primeHash(const std::string&); 
```

这是我第一次做 typdef / 方法传递——任何线索或帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T04:59:54.727

尝试将 primeHash 设为静态：

```
 static unsigned int primeHash(const std::string&); 
```

# jquery - TinyMCE 在 jquery ui 模式对话框中不起作用，为什么？

> ID：13244521
> 
> 赞同：4
> 
> 时间：2012-11-06T04:43:03.640
> 
> 标签：jquery, jquery-ui, tinymce

假设 , `jquery.js`,`jquery-ui.js`已经`jquery-tinymce.js`加载。并且 tinyMCE 对象被实例化。所以这是带有标记的脚本：

```
<script type="text/javascript">

  $(functon() {

  $("#AddComment").click(function(){

     $("#Dialog").dialog({
        modal :  true,
        show  : "fade",
        hide  : "fade",
        buttons : {
           OK : function(){
              // some ajax requests...
           }

       }
     });

  });

  });

</script>

<div id="Dialog" style="display: none;">
  <textarea id="wysiwyg"></textarea>
</div>

<button id="AddComment">Add comment</button> 
```

但它在没有对话框的情况下按预期工作（当页面上的 textarea (tinymce activeeditor) 时）

“不起作用”是指，当显示对话框时（模态对话框〜模态 div），无法单击“whitearea”并添加|编辑|删除内容

所以问题是：为什么 TinyMCE 不能在模态 div 中工作？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-10T17:52:38.227

我有这个问题。

对于初学者，我强烈建议您在模式对话框出现在屏幕上之后实例化 tinymce。我发现 tinyMCE 会尝试占用屏幕上“最有效”的空间量，因此实际上是不可见的和/或整个屏幕，具体取决于模态框的设置方式。

不过还有一些其他的事情，您可能会注意到，在关闭对话框后，您与页面交互的能力在 tinyMCE 存在的区域内被禁用！您的页面可能已经出现此行为。

是什么为我解决了这个问题（虽然不是那么优雅，但是在拔掉我的头发之后）我选择销毁对话框并确保在表单收到来自服务器的通过响应后隐藏 tinymce。

有两个命令可用于此

1.  从轨道核对对话框

    ```
    $('#modal-dialog').dialog('destroy'); 
    ```

2.  检查tinymce是否存在，如果发现则隐藏它

    ```
    if ($(".textarea").length) {
        $('.textarea').tinymce().hide();
    }; 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-02T19:40:35.377

根据 Symbal 的回复，这是对我有用的解决方案。当您打开对话框时，首先检查是否在您的文本区域设置了tinymce，如果已将其删除，然后将tinymce 应用于文本区域。

```
$("#Dialog").dialog({             
    open: function(){
        if($('#wysiwyg').tinymce() != undefined)
        {
            $('#wysiwyg').tinymce().remove();
        }
        $("#wysiwyg").tinymce({
            // Location of TinyMCE script
            script_url: "/js/tiny_mce/tiny_mce.js"
        });
    }
}); 
```

我正在使用 tinymce 版本 3。

# node.js - nodejs会话只存储json？

> ID：13244526
> 
> 赞同：3
> 
> 时间：2012-11-06T04:43:53.100
> 
> 标签：node.js, session, sequelize.js

我有一个已登录的用户对象，我将其推送到我的会话中。user 对象是一个 sequelize user 对象实例，它上面有很多有用的方法。

当我从会话中读回对象时，我现在所拥有的只是我的对象的 json 表示。所有有用的方法都没有了。

**节点问题：**是否可以将完整对象放入会话中，而不仅仅是 json 表示？

**Sequelize 问题：**拥有一个对象的 json 表示，是否可以构造一个完整的 sequelize 对象而无需重新查询？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T06:54:05.443

您可以分离对象函数和数据，例如：

```
user.prototype.methods = userMethods;
user.prototype.data = req.session.userData

function userMethods(){

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T15:19:38.560

我们在谈论什么样的会议？

1.  对于 cookie 会话：对所有内容进行序列化将使客户端的标头变得庞大（慢/大请求），并且每个请求都会给您的服务器带来更多负担。

2.  对于数据库支持的会话：您在 cookie 中存储了一个小的会话 ID，那么无论如何您都必须在数据库中查询会话对象。

    使用该查询来获取完整的用户对象，方法是将用户 ID 保存在 cookie 中，而不是会话 ID。

最后一个选项：

1.  弄清楚如何从`sequelize`. 我没有使用过那个 ORM，但是我使用过的其他 ORM 东西（猫鼬）可以让您从对象的数据中实例化一个对象，这将使您能够访问您再次缺少的所有有用方法。

编辑：从文档中，我认为您可以获取保存在会话（`session.user`）中的 JSON，然后像这样恢复用户实例：

```
var restoredUserInstance = MyUserModel.build(session.user); 
```

由于您的用户模型的 JSON 可能包含您的主键（电子邮件或用户名或其他内容），因此您可以 `restoredUserInstance.save()`按预期使用所有其他方法（保存将更新等）如果这不起作用，请告诉我，我们可以进一步挖掘文档/代码。

我看了看，发现以下关于如何在不调用数据库的情况下从 JSON 实例化实例的说明`find()`：[https ://github.com/sdepold/sequelize/issues/191](https://github.com/sdepold/sequelize/issues/191)

# php - 根据用户输入使用 for 循环显示表格列

> ID：13244528
> 
> 赞同：0
> 
> 时间：2012-11-06T04:43:47.430
> 
> 标签：php, mysql, ajax

我正在开发一个大学软件，并且被困在一个关键点。我正在运行一个查询，该查询将返回 studentid、names 和 rollno(s)，并且我需要根据教师输入的学期作业数量来显示带有文本框的表格列，以便输入作业标记。例如，如果用户输入是 3，我想显示 3 列，即作业 1、作业 2、作业 3 以及学生姓名和卷号。然后，表格行将包含所有学生的姓名以及用于输入所有三个作业的分数的文本框。此外，我通过 ajax 请求显示此表，这意味着 php 必须即时创建输出并显示给用户。我假设必须为此使用嵌套循环，但不确定如何。列必须基于用户输入创建，行应该基于 mysql 查询结果。

我的代码是：

```
$userinput = 3; // hypothetical
$q6 = mysql_query("select * from students");
while($row = mysql_fetch_array($q6)){
$data[] = $row; 
}

echo "<table class='reglist' border='1' width='100%'>";
// start i loop
for($i=1;$i<=$userinput;$i++){
echo "<tr>
<th style='font-size:14px;'>S.No</th>
<th style='font-size:14px;'>Roll No</th>
<th style='font-size:14px;'>Name</th>
<th style='font-size:14px;width:50px;'>Assignment 1</th> // THESE COLUMNS SHUD BE BASED         ON THE USER INPUT.  
</tr>"; } 
```

关于如何根据用户输入创建表头，然后根据mysql返回的学生数量显示行，我被困在这里。

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T06:10:40.080

代码流应该是这样的：

```
<?php
$userinput = 3;
// Assuming your columnnames for your students table were s_no, roll_no, name, assignment1, assignment2
$query= mysql_query("select * from students");
?>

<table>
<tr>
    <th style='font-size:14px;'>S.No</th>
    <th style='font-size:14px;'>Roll No</th>
    <th style='font-size:14px;'>Name</th>
    <?php
    for($i=0; $i<$userinput; $i++)
    {
    ?>
        <th style='font-size:14px;width:50px;'>Assignment <?php echo $i+1;?> </th> <!--this will display Assignment 1, Assignment 2 -->
    <?
    }//end for
    ?>
</tr>

<tr id="wrapper"> <!--assign an id here so you can use this on your ajax request -->
    <?php
        while($row = mysql_fetch_array($query)){
    ?>
            <td><?php echo $row['s_no'];?></td>
            <td><?php echo $row['roll_no'];?></td>
            <td><?php echo $row['name'];?></td>
            <?php
            for($i=0; $i<$userinput; $i++)
            {
            ?>
                <td> I dont know what are you trying to display here.</td>
            <?php
            }//end for
            ?>

    <?php
        }//end while
    ?>
</tr> 

</table> 
```

假设您在数据库中有 3 个学生。上面的代码将显示以下内容：![这是基于上面代码的示例输出](../Images/73474b5847f12f4d0b366a2ac460a7d7.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T06:07:21.530

试试这个代码：

```
$q6 = mysql_query("select * from students");

echo "<table class='reglist' border='1' width='100%'>";
echo "<tr>
<th style='font-size:14px;'>S.No</th>
<th style='font-size:14px;'>Roll No</th>
<th style='font-size:14px;'>Name</th>
<th style='font-size:14px;width:50px;'>Assignment 1</th>
<th style='font-size:14px;'>Assigmnent 2</th>
</tr>";

while ($row = mysql_fetch_array($q6)) {
    echo "<tr>
    <th style='font-size:14px;'>{$row['stud_num']}</th>
    <th style='font-size:14px;'>{$row['roll_num']}</th>
    <th style='font-size:14px;'>{$row['name']}</th>
    <th style='font-size:14px;width:50px;'>{$row['assign_one']}</th>
    <th style='font-size:14px;'>{$row['assign_two']}</th>
    </tr>";

} 
```

# c - C 函数堆栈布局

> ID：13244531
> 
> 赞同：3
> 
> 时间：2012-11-06T04:43:57.727
> 
> 标签：c, stack

我有一个看起来像这样的函数：

```
int bof(char *str)
{
    char buffer[12];

    strcpy(buffer, str);

    return 1;
} 
```

我试图覆盖它的返回地址。我发现我可以通过使用例如`memcpy(buffer+24, "\x15\xf1\xff\xbf", 4)`. 我不明白为什么我需要访问`buffer + 24`. 我对 C 内存模型的理解告诉我，这个函数执行时的堆栈应该是这样的

```
bottom of                                                            top of
memory                                                               memory
           buffer(12)     sfp(4)   ret(4)   str(4)
<------   [            ][       ][       ][       ] --->

top of                                                            bottom of
stack                                                                 stack 
```

这表明我应该将 ret 地址从缓冲区 + 16 开始。额外的 8 个字节从哪里来？

顺便说一句，我在 32 位系统上运行它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T05:36:26.410

检查 ISO C 99 和更早的标准，您会发现没有 C 内存模型之类的东西。每个编译器都可以自由使用它喜欢的任何模型来满足功能规范。一个简单的例子是编译器可以使用或省略帧指针。它还可以为返回值分配空间或使用寄存器。

当我在我的机器上编译这段代码时，我得到

```
_bof:
    pushl   %ebp
    movl    %esp, %ebp
    subl    $40, %esp
    movl    8(%ebp), %eax
    movl    %eax, 4(%esp)
    leal    -20(%ebp), %eax
    movl    %eax, (%esp)
    call    _strcpy
    movl    $1, %eax
    leave
    ret 
```

该`leal`指令正在计算缓冲区的起始位置`bp-20`。在序言之后，堆栈帧如下所示：

```
[ bp+8: str ] [bp+4: rtn address ] [bp: saved bp] [ bp-20: buf ] ... 
```

所以看起来你必须写 28 个字节来改变这里的返回地址。我的猜测是编译器试图在段落边界上对齐堆栈帧。这里的完整帧包括 strcpy arg 设置是 48 字节，即 3 段。段落对齐有助于总线和缓存性能。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-06T07:01:42.820

这不是 C 内存模型或 C 函数调用堆栈布局。它只是您知道的特定编译器和硬件架构的实现。在 ARM 32 位 CPU 中，函数调用参数 1~4 不入栈，它使用 r0~r3 传递参数，如果有超过 4 个参数，则将其他参数入栈。函数返回地址可能也不需要推送到堆栈，因为有一个特殊的寄存器 LR 来保存返回地址。

# python - 通过KeyError在python中遍历xml

> ID：13244533
> 
> 赞同：3
> 
> 时间：2012-11-06T04:44:24.000
> 
> 标签：python

我的 XML ：

```
<books>
<book name="goodbook" cost="10" color="green"></book>
<book name="badbook" cost="1000" weight="100"></book>
<book name="avgbook" cost="99" weight="120"></book>
</books> 
```

我的python代码：-

```
import xml.etree.ElementTree as ET
import sys
doc       = ET.parse("books.xml")
root      = doc.getroot() 
root_new  = ET.Element("books") 
for child in root:
       name                = child.attrib['name']
       cost                = child.attrib['cost']
       color               = child.attrib['color'] #KeyError
       weight              = child.attrib['weight'] #KeyError
       # create "book" here
       book    = ET.SubElement(root_new, "book") 
       book.set("name",name)               
       book.set("cost",cost) 
       book.set("color",color) 
       book.set("weight",weight)
tree = ET.ElementTree(root_new)
tree.write(sys.stdout) 
```

得到什么错误：-

```
python books.py 
Traceback (most recent call last):
  File "books.py", line 10, in <module>
    weight              = child.attrib['weight'] #KeyError
KeyError: 'weight' 
```

weight 和 color 正在通过 keyerror，因为在遍历循环时未在所有行中找到“color”和“weight”属性。我需要我的输出应该与输入 xml 相同:(。我怎样才能跳过此错误并使其与输入 xml 相同。提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-06T04:48:13.360

```
for child in root:
    name                = child.attrib['name']
    cost                = child.attrib['cost']
    # create "book" here
    book    = ET.SubElement(root_new, "book") 
    book.set("name",name)               
    book.set("cost",cost) 
    if 'color' in child.attrib:
        color               = child.attrib['color']
        book.set("color",color) 
    if 'weight' in child.attrib:
        weight              = child.attrib['weight']
        book.set("weight",weight) 
```

# jsf - getAsString() jsf 自定义转换器无法转换对象

> ID：13244535
> 
> 赞同：1
> 
> 时间：2012-11-06T04:44:27.497
> 
> 标签：jsf, jakarta-ee, ejb-3.0, converter

我为 jsf 创建了一个自定义转换器。getAsObject() 工作完美，但 getAsString() 返回异常。我不确定问题出在哪里，我尝试过以不同的方式将对象转换为字符串，但它一直在返回异常。

这是我的转换器代码：

```
 @Named
public class ProductConverter implements Converter{

    @EJB
    private ProductEJB productEjb;

    @Override
    public Object getAsObject(FacesContext context, UIComponent component, String value) {
        if(value== null )
        {
            throw new ConverterException("There was an error at getAsObject()");
        }

        int id = Integer.parseInt(value);
        return productEjb.findProductById(id);
    }

    @Override    
    public String getAsString(FacesContext context, UIComponent component, Object value) {        

        if (value == null || value.equals("")) 
        {
            return "";            
        }
        else
        {
            Integer id = ((Product)value).getProduct_id();
            return String.valueOf(id);
        }

    }

} 
```

这是 Product 类（为简单起见，不包括 Getters/Setters/equals()/hash()）：

```
@Entity
@NamedQueries({
    @NamedQuery(name="findAllProducts", query = "SELECT p from Product p")

})
public class Product implements Serializable
{
    private static final long serialVersionUID = 1L;

    @Id @GeneratedValue(strategy= GenerationType.AUTO)
    private int product_id;
    private String name;
    private String description;
    protected byte[] imageFile;
    private Float price;
    @Temporal(TemporalType.TIMESTAMP)
    private Date dateAdded;        
    @ManyToOne
    private Category category_fk;
    @ManyToOne
    private SaleDetails saleDetails_fk; 
```

这是我得到的堆栈：

```
java.lang.NumberFormatException: For input string: ""
    at java.lang.NumberFormatException.forInputString(NumberFormatException.java:65)
    at java.lang.Integer.parseInt(Integer.java:504)
    at java.lang.Integer.parseInt(Integer.java:527)
    at com.lv.Controllers.Converters.ProductConverter.getAsObject(ProductConverter.java:30)
    at com.sun.faces.renderkit.html_basic.HtmlBasicInputRenderer.getConvertedValue(HtmlBasicInputRenderer.java:171)
    at javax.faces.component.UIViewParameter.getConvertedValue(UIViewParameter.java:394)
    at javax.faces.component.UIInput.validate(UIInput.java:960)
    at javax.faces.component.UIInput.executeValidate(UIInput.java:1233)
    at javax.faces.component.UIInput.processValidators(UIInput.java:698)
    at javax.faces.component.UIViewParameter.processValidators(UIViewParameter.java:273)
    at javax.faces.component.UIComponentBase.processValidators(UIComponentBase.java:1214)
    at javax.faces.component.UIComponentBase.processValidators(UIComponentBase.java:1214)
    at javax.faces.component.UIViewRoot.processValidators(UIViewRoot.java:1172)
    at com.sun.faces.lifecycle.ProcessValidationsPhase.execute(ProcessValidationsPhase.java:76)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
    at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:118)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:593)
    at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1550)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:281)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
    at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655)
    at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:161)
    at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:331)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:231)
    at com.sun.enterprise.v3.services.impl.ContainerMapper$AdapterCallable.call(ContainerMapper.java:317)
    at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
    at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:860)
    at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:757)
    at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1056)
    at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:229)
    at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
    at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
    at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
    at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
    at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
    at java.lang.Thread.run(Thread.java:722) 
```

这是我使用转换器的 jsf：

```
<f:metadata>
    <f:viewParam name="product" value="#{productDelete.product}" converter="#{productConverter}"/>
</f:metadata> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-06T16:05:23.803

`null`只是在收到或收到空值时不要抛出异常。这是没有意义的。它们可能代表仅代表“没有价值”的合法有效值。那就回去`null`吧。如果您想强制要求，那么您应该使用`required="true"`instead 或任何 custom `Validator`，但不要在`Converter`.

`ConverterException`只有当值*确实*不可转换时，您才应该抛出。我已经改进了你的转换器来做到这一点。您即没有检查提交的值是否是有效数字，也没有检查获得的模型值是否是`Product`. 否则，它会导致`NumberFormatException`或`ClassCastException`进一步降低您应该通过抛出适当的`ConverterException`.

```
@Named
public class ProductConverter implements Converter {

    @EJB
    private ProductEJB productEjb;

    @Override
    public Object getAsObject(FacesContext context, UIComponent component, String value) {
        if (value == null || value.isEmpty()) {
            return null;
        }

        if (!value.matches("\\d+")) {
            throw new ConverterException("The value is not a valid ID number: " + value);
        }

        int id = Integer.parseInt(value);
        return productEjb.findProductById(id);
        // You may want to perform an additional check if it didn't return null
        // and otherwise throw ConverterException with "unknown Product ID".
    }

    @Override    
    public String getAsString(FacesContext context, UIComponent component, Object value) {        
        if (value == null) {
            return null; // Or an empty string, can also.
        }

        if (!(value instanceof Product)) {
            throw new ConverterException("The value is not a valid Product: " + value);
        }

        Integer id = ((Product)value).getProduct_id();
        return (id != null) ? String.valueOf(id) : null;
    }

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-06T09:26:03.747

当值为空时，您的方法似乎无法处理。在这种情况下尝试返回一个空字符串

```
public String getAsString(FacesContext facesContext, UIComponent component, Object value) {
    if (value == null || value.equals("")) {
        return "";
    } else {
        Integer id = ((Product)value).getProduct_id();
        return String.valueOf(id);
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-06T09:26:19.973

值表达式`#{productDelete.product}`解析为 null。

*注意：转换器的[合同](http://docs.oracle.com/javaee/6/api/javax/faces/convert/Converter.html#getAsString%28javax.faces.context.FacesContext,%20javax.faces.component.UIComponent,%20java.lang.Object%29)状态`getAsString`为空值返回一个空字符串。*

# racket - 如何中止另一个线程的延续

> ID：13244537
> 
> 赞同：1
> 
> 时间：2012-11-06T04:44:31.037
> 
> 标签：racket

有没有办法从另一个线程中止延续？如：

```
#lang racket

(define thd
  (thread (λ ()
            (call-with-continuation-prompt
             (λ ()
               (sleep 10)
               (printf "Don't print me.\n"))
             (default-continuation-prompt-tag))
            (printf "Do print me.\n"))))

(magically-abort-another-threads-continuation thd) 
```

我希望不必使用线程控制。作为一个更具描述性的示例，假设我想像这样实现 do-only-while-polite：

```
#lang racket

(define i-am-polite #t)

(define-syntax-rule (do-only-while-polite body ...)
  (call-with-continuation-prompt
   (λ ()
     (define thd (current-thread))
     (define politeness-checker-thd
       (thread (λ ()
                 (let loop ()
                   (cond
                     [(not i-am-polite)
                      (magically-abort-another-threads-continuation thd)]
                     [else (sleep 0.1)
                           (loop)])))))

     body ...

     (thread-kill politeness-checker-thd))
   (default-continuation-prompt-tag)))

(thread (λ ()
          (do-only-while-polite
           (printf "Hello.\n")
           (sleep 1)
           (printf "How are you doing?")
           (sleep 1)
           (printf "It's nice to meet you."))

          (printf "Bye.")))

(sleep 1)
(set! i-am-polite #f) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T07:07:41.443

您可能正在寻找[`kill-thread`](http://docs.racket-lang.org/reference/threads.html#%28def._%28%28quote._~23~25kernel%29._kill-thread%29%29).

```
#lang racket

(define thd
  (thread (λ ()
            (printf "Do print me.\n")
            (call-with-continuation-prompt
             (λ ()
               (sleep 10)
               (printf "Don't print me.\n"))
             (default-continuation-prompt-tag)))))

(kill-thread thd) 
```

请注意，不能保证`"Do print me.\n"`在此示例中会在线程被杀死之前及时调用。 需要在线程之间进行[同步以强制执行此操作。](http://docs.racket-lang.org/reference/all-sync.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T23:54:54.897

这是使用实现的问题中给出的示例`break-thread`。

```
#lang racket

(define i-am-polite #t)

(define-syntax-rule (do-only-while-polite body ...)
  (with-handlers ([exn:break? void])
    (define thd (current-thread))
    (define politeness-checker-thd
      (thread (λ ()
                (let loop ()
                  (cond
                    [(not i-am-polite)
                     (break-thread thd)]
                    [else (sleep 0.1)
                          (loop)])))))

    body ...

    (kill-thread politeness-checker-thd)))

(thread (λ ()
          (do-only-while-polite
           (printf "Hello.\n")
           (sleep 1)
           (printf "How are you doing?\n")
           (sleep 1)
           (printf "It's nice to meet you.\n"))

          (printf "Bye.\n")))

(sleep 1)
(set! i-am-polite #f) 
```

# c++ - VS2010 中 C++ lambda 表达式的奇怪错误（变量 y1）

> ID：13244540
> 
> 赞同：3
> 
> 时间：2012-11-06T04:44:55.573
> 
> 标签：c++, visual-studio-2010, lambda

在我的几个项目中，以下代码：

```
#include <functional>

class SmallClass
{
public:
    int x1, y1;

    void TestFunc()
    {
        auto BadLambda = [&]()
        {
            int g = x1 + 1; //ok
            int h = y1 + 1; //c2296

            int l = static_cast<int>(y1); //c2440
        };

        int y1_copy = y1; //it works if you create a local copy
        auto GoodLambda = [&]()
        {
            int h = y1_copy + 1; //ok
            int l = this->y1 + 1; //ok
        };
    }
}; 
```

生成

> 错误 C2296：“+”：非法，左操作数的类型为“double (__cdecl *)(double)”

或者

> 错误 C2440：“static_cast”：无法从“double (__cdecl *)(double)”转换为“int”

你得到图片。如果按价值捕获也会发生这种情况。

该错误似乎与成员名称“y1”有关。它发生在不同的班级、不同的项目中，并且（看似）y1 的任何类型；例如，这段代码：

```
[...]
MyClass y1;

void TestFunc()
{
    auto BadLambda = [&]()->void
    {
        int l = static_cast<int>(y1); //c2440
    };
} 
```

生成这两个错误：

> 错误 C2440：“static_cast”：无法从“MyClass”转换为“int”没有可以执行此转换的用户定义转换运算符，或者无法调用该运算符
> 
> 错误 C2440：“static_cast”：无法从“double (__cdecl *)(double)”转换为“int”没有可以进行这种转换的上下文

它似乎与“功能”库相关联。它发生在一个仅包含“功能”的最小项目中（在我的机器上）（是的，它应该在括号之间，但我在 HTML 上失败了）。

这似乎不是一个已知的错误，我不知所措。关于为什么会发生这种情况的任何想法？（我不需要解决方法；代码中已经有一些）。

编辑：确实，它与 math.h 中的函数有关：

`_CRT_NONSTDC_DEPRECATE(_cabs) _CRTIMP double __cdecl cabs(*In* struct _complex _X); _CRT_NONSTDC_DEPRECATE(_j0) _CRTIMP double __cdecl j0(*In* double _X); _CRT_NONSTDC_DEPRECATE(_j1) _CRTIMP double __cdecl j1(*In* double _X); _CRT_NONSTDC_DEPRECATE(_jn) _CRTIMP double __cdecl jn(*In* int _X, *In* double _Y); _CRT_NONSTDC_DEPRECATE(_y0) _CRTIMP double __cdecl y0(*In* double _X); _CRT_NONSTDC_DEPRECATE(_y1) _CRTIMP double __cdecl y1(*In* double _X); _CRT_NONSTDC_DEPRECATE(_yn) _CRTIMP double __cdecl yn(*In* int _X, *In* double _Y);`

使用这些函数名称中的任何一个都会触发错误。包含 math.h、cmath 或函数时会发生这种情况。也许有人知道这些名称是如何进入我的 lambda 表达式范围的？

编辑：解决了。这是 VS2010（可能还有其他较旧的编译器）中的 lambda 名称解析问题。如果您定义全局名称或使用“使用命名空间 x”，请避免在 lambdas 中使用非限定名称。

使用 Visual Studio 2010 Express 版本 10.0.40219.1 SP1Rel。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T06:24:06.917

使用与in`y1`冲突（第二类贝塞尔函数，1 阶）。这就是为什么命名空间是一件好事（sm）以及为什么不应该用. （虽然很好，恕我直言。）当然，并非所有 C++头文件都正确地将所有名称仅放在 namespace 中，但它们应该；数学库中有太多短名称。`y1``<cmath>``std::``using namespace std;``using std::string``cmath``std`

C++名称解析规则复杂，我不假装看懂了所有尘土飞扬的小角落。很有可能 lambda 中的非限定名称与成员函数的实际主体中的非限定名称的查找方式并不完全相同。在成员函数之外，非限定名称只能引用已经声明的类成员。（`this->y1`不过，这不是一个不合格的名称。）

* * *

**编辑**：原来是 VC10 中的一个错误，它在 lambdas 中应用了不正确的名称解析规则。[多次](http://connect.microsoft.com/VisualStudio/feedback/details/713679) 报告 lambda 表达式中的名称解析错误，[但](http://connect.microsoft.com/VisualStudio/feedback/details/736295)这些错误在 VC12 中被标记为已修复（话虽如此，我不知道如何找到尚未标记为已修复的错误报告）。我支持下面的建议，虽然关于使用显式`this->`的建议可能更具争议性，但我已经被意外的名称查找烧毁了几次，显式限定可以提供帮助。

* * *

总的来说，我的建议是：

1) 切勿使用`using namespace std;`和

2）`this->`如果这是您的意思，请始终使用。（或者，至少`_`对类数据成员使用尾随约定。）

* * *

**编辑**`std`C 库头文件对命名空间的使用。

> 17.6.1.2(4)：但是，在 C++ 标准库中，声明（在 C 中定义为宏的名称除外）在命名空间 std 的命名空间范围 (3.3.6) 内。未指定这些名称是否首先在全局命名空间范围内声明，然后通过显式使用声明 (7.3.3) 注入命名空间 std。

换句话说，名称*必须*在`std::`并且*可能*在全局命名空间中。因此，`std::`始终如一地使用不会受到伤害。它可能无济于事，但它也可能保护您免受某些未来标准库的影响，这些标准库不会将这些名称注入全局命名空间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T04:53:24.197

老实说，我看不出从 int 转换为 int 的意义。你可以简单地写：

```
int l = y1; 
```

但如果你真的想将 int 转换为 int，下面的代码应该可以工作。

```
int l = static_cast<int>(y1); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T04:50:38.217

该类在我的 VS2010 上编译，我只编辑了一行：`int l = static_cast(y1); //c2440`

改为：`int l = static_cast<int>(y1);`

虽然是一个看似很酷的错误，但请尝试使用一个好的约定来命名变量。使它们具有描述性，但不要太长。阅读 Rob Pike 和 Kernighan 的《编程实践》一书，以更好地了解变量命名以及使用一致的样式和格式。

## 编辑：

我`#include <cmath>`和`using namespace std;`。我没有收到任何错误，但是如果我创建 a`class MyClass{};`并创建一个 object `MyClass y1`，我会收到一条错误消息`"..previous definition 'function'"`。内部`y1`班级`SimpleClass`永远不会受到影响。

# clojure - Clojure 宏：获取语法引用/命名空间限定符号

> ID：13244550
> 
> 赞同：1
> 
> 时间：2012-11-06T04:46:20.177
> 
> 标签：clojure, macros

假设我想定义一个名为`defsomething`这样的宏：

```
(defspecial a x) 
```

…扩展为：

```
(def a (f `a x)) 
```

那里的语法引用``a`是棘手的部分。我看不到如何正确地将当前命名空间附加到符号上，以便它的行为类似于语法引用。例如：

```
(defmacro defspecial [var-symbol expr]
  `(def ~var-symbol (f '~var-symbol ~expr)))

(defspecial a x) 
```

…扩展为：

```
(def a (f 'a x)) 
```

…这很接近，但第二个`a`不是命名空间限定的。

我知道我*可以*使用`*ns*`：

```
(defmacro defspecial [var-symbol expr]
  `(def ~var-symbol (f (symbol (name (ns-name *ns*)) (name '~var-symbol)) ~expr))) 
```

……但我不喜欢那样；它不仅丑陋，`*ns*`而且可以重新绑定，所以这是可能的：

```
(binding [*ns* (the-ns 'clojure.core)]
  (defspecial a 5)) 
```

不幸的是，Clojure 显然没有`syntax-quote`for ```like`quote`的形式`'`。那么，我应该如何最好地实现这个宏呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T06:16:49.033

你真的试过你给出的最后一个例子吗？编译器的绑定`*ns*`发生在编译时，宏扩展也是如此，因此您所做的运行时绑定应该对`defspecial`.

# java - 设置图像的最大和最小缩放级别

> ID：13244552
> 
> 赞同：3
> 
> 时间：2012-11-06T04:46:39.600
> 
> 标签：java, android, xml, image, zooming

> **可能重复：**
> [放大和缩小的 Imageview 问题，以最大和最小级别拖动](https://stackoverflow.com/questions/9357090/imageview-issue-with-zoom-in-and-out-drag-with-maximum-and-minimum-levels)

我的应用程序中有图像缩放和拖动功能。我的要求是图像设置最大和最小缩放级别。我使用了下面的代码。

```
public class PinchZoomListener implements OnTouchListener {

    private static final String TAG = "Touch";
    // These matrices will be used to move and zoom image
    Matrix matrix = new Matrix();
    Matrix savedMatrix = new Matrix();

    // We can be in one of these 3 states
    static final int NONE = 0;
    static final int DRAG = 1;
    static final int ZOOM = 2;
    int mode = NONE;

    // Remember some things for zooming
    PointF start = new PointF();
    PointF mid = new PointF();
    float oldDist = 1f;

    public boolean onTouch(View v, MotionEvent event) {
        ImageView view = (ImageView) v;
        dumpEvent(event);// Dump touch event to log

        switch (event.getAction() & MotionEvent.ACTION_MASK) {
        case MotionEvent.ACTION_DOWN:
            savedMatrix.set(matrix);
            start.set(event.getX(), event.getY());
            Log.d(TAG, "mode=DRAG");
            mode = DRAG;
            break;
        case MotionEvent.ACTION_POINTER_DOWN:
            oldDist = spacing(event);
            Log.d(TAG, "oldDist=" + oldDist);
            if (oldDist > 10f) {
                savedMatrix.set(matrix);
                midPoint(mid, event);
                mode = ZOOM;
                Log.d(TAG, "mode=ZOOM");
            }
            break;
        case MotionEvent.ACTION_UP:
        case MotionEvent.ACTION_POINTER_UP:
            mode = NONE;
            Log.d(TAG, "mode=NONE");
            break;
        case MotionEvent.ACTION_MOVE:
            if (mode == DRAG) {
                // ...
                matrix.set(savedMatrix);
                matrix.postTranslate(event.getX() - start.x, event.getY() - start.y);
            } else if (mode == ZOOM) {
                float newDist = spacing(event);
                Log.d(TAG, "newDist=" + newDist);
                if (newDist > 10f) {
                    matrix.set(savedMatrix);
                    float scale = newDist / oldDist;
                    matrix.postScale(scale, scale, mid.x, mid.y);
                }
            }
            break;
        }
        view.setImageMatrix(matrix);
        return true; // indicate event was handled
    }

    /** Show an event in the LogCat view, for debugging */
    private void dumpEvent(MotionEvent event) {
        String names[] = { "DOWN", "UP", "MOVE", "CANCEL", "OUTSIDE", "POINTER_DOWN", "POINTER_UP", "7?", "8?", "9?" };
        StringBuilder sb = new StringBuilder();
        int action = event.getAction();
        int actionCode = action & MotionEvent.ACTION_MASK;
        sb.append("event ACTION_").append(names[actionCode]);
        if (actionCode == MotionEvent.ACTION_POINTER_DOWN || actionCode == MotionEvent.ACTION_POINTER_UP) {
            sb.append("(pid ").append(action >> MotionEvent.ACTION_POINTER_ID_SHIFT);
            sb.append(")");
        }
        sb.append("[");
        for (int i = 0; i < event.getPointerCount(); i++) {
            sb.append("#").append(i);
            sb.append("(pid ").append(event.getPointerId(i));
            sb.append(")=").append((int) event.getX(i));
            sb.append(",").append((int) event.getY(i));
            if (i + 1 < event.getPointerCount())
                sb.append(";");
        }
        sb.append("]");
        Log.d(TAG, sb.toString());
    }

    /** Determine the space between the first two fingers */
    private float spacing(MotionEvent event) {
        float x = event.getX(0) - event.getX(1);
        float y = event.getY(0) - event.getY(1);
        return FloatMath.sqrt(x * x + y * y);
    }

    /** Calculate the mid point of the first two fingers */
    private void midPoint(PointF point, MotionEvent event) {
        float x = event.getX(0) + event.getX(1);
        float y = event.getY(0) + event.getY(1);
        point.set(x / 2, y / 2);
    }
} 
```

如何在 Android 中设置图像的最大和最小缩放级别？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T06:00:05.337

您应该重新编写代码，因为您对每个触摸事件都使用了相对比例和偏移量，并且无法找出当前图像缩放和/或偏移量的绝对值是多少。

将缩放的绝对值保存在某处，然后您可以使用前面提到`min(max(MIN,zoom),MAX)`的代码。

# api - 在会场页面上喊

> ID：13244555
> 
> 赞同：0
> 
> 时间：2012-11-06T04:46:51.640
> 
> 标签：api, foursquare

我是foursquare api的新手。我正在做的是允许作为场地经理的用户链接到我们的应用程序。选择他们想与我们的应用程序一起使用的场所（如果他们有多个场所），我们会代表他们发布页面更新/喊叫。问题是当普通用户查看公共场地页面时，这些呼喊声不会出现，但如果我以经理身份登录，切换到使用 4Square 作为场地（使用黄色条）然后我可以看到我的应用发布的更新.

不查看站点时为什么看不到帖子的原因是什么？

我正在点击这个 URL [https://api.foursquare.com/v2/pageupdates/add?v=20121105](https://api.foursquare.com/v2/pageupdates/add?v=20121105) 并根据他们的文档传入 say,pageId,venueId,broadcast=private 参数。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T04:49:04.043

好的，在发布此内容后，broadcast=private 实际上会将更新标记为私有。该文档有点误导。您需要省略该参数才能进行常规的喊叫更新。您仍然可以指定 facebook|twitter 是否要使用帐户链接。

底线：如果您只想发帖，请省略广播参数...

哎呀我！....

# shopify - Shopify - 提交激活帐户表单后重定向用户

> ID：13244556
> 
> 赞同：3
> 
> 时间：2012-11-06T04:46:52.530
> 
> 标签：shopify

默认情况下，当用户在 Shopify 商店中激活他们的账户时，他们会被重定向到他们的账户页面。我想将该重定向的目的地更改为 Shopify 商店中的另一个页面。我已成功为客户登录页面完成此操作，以防止使用 checkout_url 的隐藏输入字段重定向到帐户页面，如以下 Shopify 支持帖子中所述：http: [//support.shopify.com/customer/portal/articles/ 313065-在成功登录后是否有可能重定向到特殊页面-](http://support.shopify.com/customer/portal/articles/313065-is-it-possible-to-be-redirected-to-a-special-page-upon-being-logged-in-successfully-)

但是，此方法不适用于“激活帐户”表单页面。有没有人成功做到这一点？至少还有一位 Shopify 用户也遇到了这个问题。[http://ecommerce.shopify.com/c/shopify-discussion/t/account-activation-form-redirect-105959#comment-113150](http://ecommerce.shopify.com/c/shopify-discussion/t/account-activation-form-redirect-105959#comment-113150)

任何帮助将非常感激。谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-09T02:30:28.947

Shopify 的好心人就这个问题回复了我。显然需要在表单中添加以下内容：

```
<input type="hidden" name="return_to" value="**destination**" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T23:09:07.017

最后我放弃了尝试使用

`<input type="hidden" name="return_to" value="**destination**" />`

我通过将此脚本添加到我的 /account/ 模板页面来解决它

```
 <script type="text/javascript">
 $(document).ready(function () {
 $(function() {
 if (window.location.href != "http://[yourshopname].com/account") {
 document.location = 'http://[yourshopname].com/'
 }
 }); 
 }); 

 </script> 
```

# php - 模式匹配的正确模式格式？

> ID：13244564
> 
> 赞同：0
> 
> 时间：2012-11-06T04:48:27.100
> 
> 标签：php, regex, preg-match

我试图在某个字符串中找到与模式 ddddTdddd 匹配的子字符串（其中 d 是任何数字，T 是字母 T）。

我正在使用 PHP 函数 preg_match() 并且我将**'/(\d{8})(T)(\d{8})/'**作为模式传递，但它对我不起作用。这是我写这行的方式：

```
preg_match('/(\d{8})(T)(\d{8})/', $my_string, $matches); 
```

我假设我格式化模式的原因是错误的。谁能确认我的格式是否正确？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T04:56:43.637

你的正则表达式不正确试试这个

```
preg_match('/(\d{8})([a-zA-Z])(\d{8})/', $my_string, $matches); 
```

# html - 输入类型=图像宽度被忽略

> ID：13244565
> 
> 赞同：2
> 
> 时间：2012-11-06T04:48:36.777
> 
> 标签：html, image

我正在制作这样的图像按钮：

```
<input type="image" src="red.jpeg" width="150px"> 
```

但它显示的原始图像尺寸要大得多，如果我输入：

```
<img src="red.jpeg" width="150px"> 
```

它显示我想要的 150px 宽的图像，

你们认为这是什么问题？我已经尝试使用类和 CSS 对其进行样式设置，但也无法正常工作，请帮帮我，我要疯了！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T04:58:42.523

试试这个

```
<input type="image" src="red.jpeg" style="width:150px;" /> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-10-02T02:48:26.467

单位“px”在属性中无效`width`，因为像 px、pt、ex、em 这样的单位是 CSS 语法，但此属性与 CSS 无关：它只需要一个无单位的数字或百分比。尝试简单地使用`width="150"`，或者通过`style="width:150px"`.

此外，`width`在标签上使用该属性`<input type="image">`（特别是）似乎是 HTML5 中的新特性——它不在我可以看到的 HTML4.01 规范中。（请参阅[Mozilla 的文档](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/Input)，或在 W3C 上比较[HTML4.01](http://www.w3.org/TR/html4/interact/forms.html#h-17.4)和[HTML5 ）。](http://www.w3.org/html/wg/drafts/html/CR/forms.html#the-input-element)`width`因此，当您尝试使用该属性时，旧浏览器可能无法识别该属性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-06T05:12:00.660

样式可以使用内联 css 或应用到输入元素的规则来完成。不起作用的是设置 input 元素的 width 属性 - 这与元素样式的 width 属性是分开且不同的。

这两个中的每一个都给出相同的输出：

1）内联CSS

```
<input type="image" src="img/girl.png" style="width: 300px"> 
```

2）非内联css

```
.imgBtn
{
    width: 300px;
}

<input class='imgBtn' type="image" src="img/girl.png"> 
```

# python - 将 Python 字典写入文件

> ID：13244568
> 
> 赞同：0
> 
> 时间：2012-11-06T04:49:27.790
> 
> 标签：python, dictionary

我想将字典写入文件。代码是：

```
 fs = open( store_file , "w" )
 for k in store_dic:
     temp_line = k + " " + store_dic[k] + "\n"
     fs.write( temp_line )
     logger.info( "store_record " + store_file + " " + temp_line[:-1] )
     fs.close 
```

如您所见，我同时遍历文件的字典`store_dic`和写入文件。因为我会每 6 秒调用一次这段代码，有什么办法可以改进吗？

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T05:05:38.140

使用 pickle 将 Python dict 保存到文件中：

```
import pickle

# write python dict to a file
mydict = {'a': 1, 'b': 2, 'c': 3}
output = open('myfile.pkl', 'wb')
pickle.dump(mydict, output)
output.close() 
```

字典从文件中加载回来：

```
file = open('myfile.pkl', 'rb')
mydict = pickle.load(file)
file.close() 
```

欲了解更多详情，请点击此链接：

[http://www.saltycrane.com/blog/2008/01/saving-python-dict-to-file-using-pickle/](http://www.saltycrane.com/blog/2008/01/saving-python-dict-to-file-using-pickle/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-06T05:01:27.190

只需使用 json 模块。

```
import json

store_dic = { "key1": "value1", "key2": "value2" }

with fs as open(store_file, "w"):
    json.dump(store_dic, fs) 
```

# node.js - node.js 保管箱 OAuth

> ID：13244569
> 
> 赞同：1
> 
> 时间：2012-11-06T04:49:17.380
> 
> 标签：node.js, dropbox, dropbox-api

我在理解 node.js 的 Dropbox JS api 时遇到了一些麻烦

创建 authDriver 后，如何将客户端路由到保管箱访问对话框？假设他们获得了我的快速应用程序处理的路由“/applogin”，我如何将客户端传递到保管箱？

谢谢！

```
 var Dropbox = require("dropbox");
    var client = new Dropbox.client({
        key: "mykey", secret: "mysecret", sandbox: true
    });
    client.authDriver(new Dropbox.Drivers.NodeServer(8081));
//what comes next? 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T10:00:08.383

设置`OAuth`驱动程序后，验证用户是一种方法调用。

```
client.authenticate(function(error, client) {
  if (error) {
    return showError(error);
  }
  doSomethingCool(client);
}); 
```

# opencl - OpenCL 内核排队和开始在 ATI 卡上运行之间的延迟

> ID：13244572
> 
> 赞同：3
> 
> 时间：2012-11-06T04:49:27.170
> 
> 标签：opencl

我最近将一个 OpenCL 应用程序从 NVIDIA GPU 转移到在 Ubuntu 12.04 上运行的 Radeon HD 6320 Fusion，但它的运行速度出乎意料地慢了很多。

我的程序在设置时将一个非常大的数据结构复制到 GPU（CPU 永远不会再次读取或访问此数据结构），然后它：

1.  将几个内核和一个读取缓冲区排队（将一个非常小的数据结构复制回主内存）。
2.  调用 clFinish 以等待内核和读取缓冲区完成
3.  这不断重复，偶尔会根据读取缓冲区返回的信息复制一些额外的数据（这意味着读取缓冲区必须在下一轮内核添加到队列之前完成）。

在分析两个 GPU 之后，ATI GPU 上的延迟似乎完全是从第一个内核被添加到队列 (CL_PROFILING_COMMAND_QUEUED) 到第一个内核开始执行 (CL_PROFILING_COMMAND_START)。在 NVIDIA GPU 上，每次迭代需要几微秒。在 ATI GPU 上，每次迭代大约需要 20 毫秒，这对我来说太长了。

我有什么理由会延迟这么大吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-12T09:51:01.010

它是 AMD 平台中的一个已知问题。检查此论坛链接[https://community.amd.com/thread/159060](https://community.amd.com/thread/159060) 希望它是/将被修复

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T22:57:28.253

这可能是很多事情，您是否正在运行任何其他可能需要完成的 GPU 程序，以便调度程序可以为您腾出一些时间？

问题在于 OpenCL 规范没有定义可能的等待时间。从排队内核到它的执行对时间没有要求，只是在某个时候它会执行。我可能会在 ATI OpenCL 板上发帖，那里的开发人员对这个主题很了解，可能会给你一个答案。

# xcode - Xcode用UIAlert按钮“一次性代码”打开链接

> ID：13244575
> 
> 赞同：1
> 
> 时间：2012-11-06T04:49:34.310
> 
> 标签：xcode, button, hyperlink, uialertview

我正在更新我的一个 iPhone 应用程序。我需要做一些我从未做过的事情...

我想在 Safari 浏览器中使用 UIAlert “一次性代码”启动一个 URL。

让我再解释一下：如果我想使用 UIAlert 启动 Safari，我可以轻松编写如下内容：

```
- (void)OpenApple:(id)sender {

    UIAlertView *URLApple = [[UIAlertView alloc] initWithTitle: NSLocalizedString(@"Open Apple",@"Open") message: NSLocalizedString(@"Want you open Apple",@"Apple") delegate: self cancelButtonTitle: NSLocalizedString(@"No", @"close") otherButtonTitles: NSLocalizedString(@"Yes", @"yes"), nil];
    alertView.tag = TAG_URL;
    [alertView show];
    [alertView release];
}

- (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex {
    if (buttonIndex == 0) {
        if ( alertView.tag == TAG_URL ) {
        NSLog(@"Clicked button index 0");
        // Do nothing
        }} else {
        if ( alertView.tag == TAG_URL ){
        NSLog(@"Clicked button index other than 0");
        NSURL *url = [NSURL URLWithString: NSLocalizedString(@"http://www.apple.com", @"URLApple")];
            if ([[UIApplication sharedApplication] canOpenURL:url]) {
                [[UIApplication sharedApplication] openURL:url];
}}}} 
```

但是现在，我想一次性完成“这2（无效）”......

简而言之，我需要在上面摘录的第一部分打开外部 URL。

有点像：

"UIAlertView *URLApple = [[UIAlertView alloc] initWithTitle: NSLocalizedString(@"Open Apple",@"Open") 消息：NSLocalizedString(@"Want you open Apple",@"Apple") 委托：self cancelButtonTitle: NSLocalizedString(@ "No", @"close") otherButtonTitles: NSLocalizedString(@"Yes", @"yes"), nil]; alertView.tag = TAG_URL; [alertView show]; [alertView release];

**如果@"yes" = [[UIApplication sharedApplication] canOpenURL:url]** }"

另一方面，我不能写这样的东西： -(void) alertView: (UIAlertView *)alert1: clickedButtonAtIndex:(NSInteger)buttonIndex{ [[UIApplication sharedApplication] openURL:[NSURL URLWithString:@"http://apple. com"]];

太容易了...... **我必须需要以我用作示例的代码的第一部分开头的东西** **（** (void)OpenApple:(id)sender {

UIAlertView *URLApple = [[UIAlertView alloc] initWithTitle: NSLocalizedString(@"Open Apple",@"Open") 消息：NSLocalizedString(@"Want you open Apple",@"Apple") 委托：self cancelButtonTitle: NSLocalizedString(@" No", @"close") otherButtonTitles: NSLocalizedString(@"Yes", @"yes"), nil]; alertView.tag = TAG_URL; [警报视图显示]；[alertView 发布]；} **）**。

**代码的第一部分必须包含我必须打开的 URL...**

我必须以这种方式编写代码，因为我需要打开的 URL（不是网站的 URL...）在任何情况下都不能发送到我的代码的另一部分（另一个“-（void）”，总共）。警报、触发打开 URL 的警报按钮和 URL 本身必须位于我的代码的同一部分。

可能吗？你对此深思吗？

在此先感谢谁能帮助我。

最好的问候， CCC。

# objective-c - 我们应该用弱指针而不是强指针指向 NSManagedObject 实体吗？

> ID：13244578
> 
> 赞同：3
> 
> 时间：2012-11-06T04:50:05.030
> 
> 标签：objective-c, xcode, nsmanagedobject

我认为因为 NSManagedObject 是由 managedObject 上下文管理的，所以指针应该很弱。

然而，在我的情况下，它经常回到 0。

```
 for (CategoryNearby * CN in sorted) {
        //[arrayOfItems addObject:[NSString stringWithFormat:@"%@ - %d",CN.name,[CN.order intValue]]];
        NearbyShortcutTVC * tvc=[[NearbyShortcutTVC alloc]init];
        tvc.categoryNearby =CN;
//        tvc.titleString=[NSString stringWithFormat:@"%@",CN.name];
//        tvc.displayed=CN.displayed;
        [arrayOfItemsLocal addObject:tvc];
        //CN

        PO(tvc);
        PO(tvc.categoryNearby);
        while (false);
    }
    self.arrayOfItems = arrayOfItemsLocal;

    PO(self.categoriesNearbyInArrayOfItems);
    [self.tableViewa reloadData]; 
```

...

然而在某个地方：

`tvc.categoryNearby`变为零。

我不知道它是如何、何时或何地变成零的。

我该如何调试？还是应该强引用？

顺便说一下这是NearbyShortcutTVC的界面

```
@interface NearbyShortcutTVC : BGBaseTableViewCell{

}
@property (weak, nonatomic) CategoryNearby * categoryNearby;

@end 
```

为了确保我们讨论的是同一个对象，我打印了 NSArray 的所有内存地址

它们都是完全相同的对象。但不知何故，对象的 categoryNearby 属性在某处被神奇地设置为 null。

```
 self.categoriesNearbyInArrayOfItems: (
    0x883bfe0,
    0x8b6d420,
    0x8b6f9f0,
    0x8b71de0,
    0xb073f90,
    0xb061a10,
    0xb06a880,
    0x8b74940,
    0x8b77110,
    0x8b794e0,
    0x8b7bf40,
    0x8b7cef0,
    0x8b7f4b0,
    0x8b81a30,
    0x88622d0,
    0x8864e60,
    0xb05c9a0
)

self.categoriesNearbyInArrayOfItems: (
    0x883bfe0,
    0x8b6d420,
    0x8b6f9f0,
    0x8b71de0,
    0xb073f90,
    0xb061a10,
    0xb06a880,
    0x8b74940,
    0x8b77110,
    0x8b794e0,
    0x8b7bf40,
    0x8b7cef0,
    0x8b7f4b0,
    0x8b81a30,
    0x88622d0,
    0x8864e60,
    0xb05c9a0
) 
```

我修改了调试函数以打印 TVC 对象及其 categoryNearby 属性

categoryNearby 属性设置为 nil

但是，如果我使参考变得强大，它就不再是零了

```
-(NSArray *) categoriesNearbyInArrayOfItems
{
    NSMutableArray *categoriesArray = [NSMutableArray array];

    for (NearbyShortcutTVC * tvc in self.arrayOfItems) {
        NSString * string  = [NSString stringWithFormat:@"%p,%p",tvc,tvc.categoryNearby];
        [categoriesArray addObject:string];
    }
    return categoriesArray;
} 
```

导致：

```
2012-11-06 12:01:00.878 BadgerNew[66443:c07] self.categoriesNearbyInArrayOfItems: (
    "0x8dc96b0,0x88a58b0",
    "0x8bde780,0x88b7970",
    "0x8be0930,0x88b8870",
    "0x8bf1c00,0x88b8ca0",
    "0x8bf4070,0x8beab10",
    "0x8bf6250,0x8beaf10",
    "0x8bf8620,0x8beb390",
    "0x8bfae90,0x8beb7b0",
    "0x8b707e0,0x8bebbd0",
    "0x8b6e160,0x8bebfe0",
    "0x8b6ba10,0x8bec450",
    "0x8b69a60,0x8bec870",
    "0x8b673a0,0x8becc90",
    "0x8b648c0,0x8bed0a0",
    "0x8b62110,0x8b7dca0",
    "0x8b5f890,0x8bedbe0",
    "0xd678410,0x8bee0e0"
)
2012-11-06 12:01:10.058 BadgerNew[66443:4503] Interval for this Grab ID is 9.232143
2012-11-06 12:01:10.058 BadgerNew[66443:4503] @(data.count): 20
2012-11-06 12:01:10.414 BadgerNew[66443:c07] self.categoriesNearbyInArrayOfItems: (
    "0x8dc96b0,0x88a58b0",
    "0x8bde780,0x88b7970",
    "0x8be0930,0x88b8870",
    "0x8bf1c00,0x88b8ca0",
    "0x8bf4070,0x8beab10",
    "0x8bf6250,0x8beaf10",
    "0x8bf8620,0x8beb390",
    "0x8bfae90,0x8beb7b0",
    "0x8b707e0,0x8bebbd0",
    "0x8b6e160,0x8bebfe0",
    "0x8b6ba10,0x8bec450",
    "0x8b69a60,0x8bec870",
    "0x8b673a0,0x8becc90",
    "0x8b648c0,0x8bed0a0",
    "0x8b62110,0x8b7dca0",
    "0x8b5f890,0x8bedbe0",
    "0xd678410,0x8bee0e0"
) 
```

虽然问题解决了，但还是很奇怪。即使引用很弱，也不应取消该 categoryNearby 。它是 NSManagedObject 的子类，由托管对象上下文直接管理。此外，当引用很强时我仍然可以访问它，这表明该对象仍在内存中。

那么它怎么会变成 nil 呢？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-06T05:19:29.163

如果你想`NSManagedObject`留下来，你需要保持对它的强引用（或者把它放在一个强烈保存其内容的容器中）。托管对象上下文**不会**保留对与其关联的所有对象的强引用。

[*核心数据编程指南*](http://developer.apple.com/library/ios/documentation/cocoa/Conceptual/CoreData/Articles/cdMemory.html#//apple_ref/doc/uid/TP40001860-SW5)中的“托管对象上下文的角色”是这样说的：

> *但是，默认情况下*，托管对象与其上下文之间的引用是弱的。这意味着通常不能依靠上下文来确保托管对象实例的寿命，也不能依靠托管对象的存在来确保上下文的寿命。换句话说，仅仅因为你获取了一个对象并不意味着它会一直存在。

它继续解释上下文*确实*强烈保留对象的时间，以及如何更改上下文以始终强烈保留对象，以及如何确保您需要的对象不会被释放。

# c# - 检查是否选择了整张纸？

> ID：13244580
> 
> 赞同：2
> 
> 时间：2012-11-06T04:50:13.513
> 
> 标签：c#, visual-studio, excel, vsto, vba

如何检查用户是否选择了整个 Excel 工作表？我曾尝试使用以下。

```
selection.cells.count 
```

但它给出了超出当前范围的异常。

有没有办法做同样的事情？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T05:25:52.433

如果您想测试是否`UsedRange`与`Selection`in [vba 相同](/questions/tagged/vba "显示标记为“vba”的问题")，那么

1.  您需要确保`UsedRange`已更新
2.  如果没有范围选择，也需要处理错误

像这样的东西给了

*   错误警告消息（无选择）
*   对于相同的`Address`字符串为真
*   `Address`对不同的字符串为 False

**代码**

```
Sub TestData()
Dim strTest As String
'force usedrange to update
ActiveSheet.UsedRange
On Error Resume Next
strTest = (ActiveSheet.UsedRange.Address = Selection.Address)
On Error GoTo 0
If Len(strTest) = 0 Then
MsgBox "test failed: have you selected part of the sheet", vbCritical
Else
MsgBox strTest
End If
End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T14:22:31.777

正如@TimWilliams 在评论中指出的那样，如果您选择整个工作表，则计数将溢出一个 int （即`Count`属性），从而导致“超出当前范围”异常。要解决这个问题，请使用该`CountLarge`属性。在 C# 中，`CountLarge`属性是一个对象。要使用它，请将其投射到很长的位置。

```
long cellCount = (long)selectedRange.Cells.CountLarge; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-06T06:03:31.150

我将抄袭brettdj的代码并创建一个版本来测试是否选择了整个工作表。虽然我对他使用字符串来包含 TRUE、FALSE 和失败值很感兴趣，但我只会使用布尔值，这样像我这样的人就不必想太多了。

```
Sub CheckSelection()
Dim IsMatch As Boolean
Dim ErrNum As Long

With ActiveSheet
    On Error Resume Next
    IsMatch = (.Range(.Cells(1), .Cells(.Rows.Count, Columns.Count)).Address = Selection.Address)
    ErrNum = Err.Number
    On Error GoTo 0
    If ErrNum <> 0 Then
        MsgBox "test failed: have you selected part of the sheet", vbCritical
    Else
        MsgBox IsMatch = True
    End If
End With
End Sub 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-01-05T16:40:33.550

我意识到这是一个古老的讨论，但我是通过谷歌搜索来到这里的。对于发现此问题的任何其他人，更简单的方法可能就是使用“.address”。例如

```
If Selection.address = Cells.address then Msgbox "You selected an entire sheet!" 
```

# magento - 未在 adminhtml 编辑部分选择商店视图

> ID：13244583
> 
> 赞同：1
> 
> 时间：2012-11-06T04:50:35.947
> 
> 标签：magento

谁能帮帮我吗。这可能真的很简单，好像我错过了一些东西。

我正在尝试在这里开发一个非常简单的模块。

在编辑部分，它没有选择区域

![在此处输入图像描述](../Images/0612e732c07191bdcf762a35b5325dda.png)

store_id 1 是澳大利亚

代码：

```
<?php

class Ubt_Faq_Block_Adminhtml_Faq_Edit_Tab_Form extends Mage_Adminhtml_Block_Widget_Form
{

protected function _prepareForm()
{
      $x = Mage::registry('ubt_faq')->getData();   
      var_dump($x);

      $form = new Varien_Data_Form();

      $fieldset = $form->addFieldset('faq_form', array(
             'legend'     => Mage::helper('ubt_faq')->__('FAQ'),
             'class'        => 'fieldset-wide',
      ));

      $fieldset->addField('faq_term', 'text', array(
             'name'      => 'faq_term',
             'label'     => Mage::helper('ubt_faq')->__('Term'),
             'class'     => 'required-entry',
             'required'  => true,
      ));

      $fieldset->addField('faq_answer', 'textarea', array(
             'name'      => 'faq_answer',
             'label'     => Mage::helper('ubt_faq')->__('Answer'),
             'class'     => 'required-entry',
             'required'  => true,
      ));           

      if (!Mage::app()->isSingleStoreMode()) {
           $fieldset->addField('store_ids', 'multiselect', array(
                 'label'     => Mage::helper('ubt_faq')->__('Visible In'),
                 'required'  => true,
                 'name'      => 'store_ids[]',
                 'values'    => Mage::getSingleton('adminhtml/system_store')->getStoreValuesForForm(),
                 'value'     => Mage::registry('ubt_faq')->getStoreId()
           ));          
       }

       if (Mage::registry('ubt_faq')) {
             $form->setValues(Mage::registry('ubt_faq')->getData());
       }
       $this->setForm($form);
       return parent::_prepareForm();
     }

} 
```

在`class Varien_Data_Form_Element_Multiselect extends Varien_Data_Form_Element_Abstract`

$value = $this->getValue(); 在 getElementHtml() 中为空；

我认为这个 $value 不应该为空，因为我已经为它赋值了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T05:23:41.593

您好，请检查以下步骤可能会对您有所帮助

**在 Grid.php 中**

```
 protected function _prepareCollection(){

      $collection Mage::getModel("faq/faq")->getCollection();

      foreach($collection as $link){

           if($link->getStoreId() && $link->getStoreId() != 0 ){

                $link->setStoreId(explode(',',$link->getStoreId()));

           }                
           else{                    
                $link->setStoreId(array('0'));                  
           }

       }

      $this->setCollection($collection);

      return parent::_prepareCollection();

 } 
```

**添加列**

```
 $this->addColumn("store_id", array(
      "header"        => Mage::helper("faq")->__("Store View"),         
      "index"        => "store_id",
      "type"          => "store",
      "store_all"     => true,
      "store_view"    => true,
      "sortable"      => true,
      "filter_condition_callback" => array($this,  
      "_filterStoreCondition"),
 )); 
```

**在 form.php 中**

```
 $fieldset->addField('store_id', 'multiselect', array(
      'name'      => 'store_id[]',
      'label'     => 'Store View',
      'title'     => '',
      'required'  => true,
      'values'    => Mage::getSingleton('adminhtml/system_store')->getStoreValuesForForm(false, true),
 )); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T13:45:41.603

尝试更新 form.php

```
 if (!Mage::app()->isSingleStoreMode()) {
       $fieldset->addField('store_ids', 'multiselect', array(
             'label'     => Mage::helper('ubt_faq')->__('Visible In'),
             'required'  => true,
             'name'      => 'store_ids',
             'values'    => Mage::getSingleton('adminhtml/system_store')->getStoreValuesForForm(),
       ));          
   } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-03T06:52:55.240

您需要在模块的数据库中添加表 store_id，然后在模块数据控制器中添加保存操作。

# .net - 添加新的网络接口选项卡/适配器？

> ID：13244584
> 
> 赞同：3
> 
> 时间：2012-11-06T04:50:42.890
> 
> 标签：.net, c, winapi

如何通过编码添加新的网络接口适配器/选项卡？就像 VPN 客户端一样...

# php - 上传后检索图像 url

> ID：13244587
> 
> 赞同：0
> 
> 时间：2012-11-06T04:51:10.660
> 
> 标签：php, html, file-upload

我正在尝试使用基本的上传表单将图像放置到我的服务器上，并希望代码在上传后在页面上发布新的图像 url。我知道这是一个模糊的问题，但我已经进行了大量搜索，但没有可用的结果。如果有人可以帮助我，或者只是指出正确的方向，将不胜感激。

```
<form action="upload.php" method="post" enctype="multipart/form-data">
<p>
<label for="file">Select a file:</label> <input type="file" name="userfile" id="file"> <br />
<button>Upload File</button>
<p>
</form> 
```

到目前为止我所拥有的一切我知道开始的并不多我不知道如何处理发送到“upload.php”的数据

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T04:56:58.647

看[这里](http://www.w3schools.com/php/php_file_upload.asp)。与使用数组的方式类似`$_POST`，您可以使用`$_FILES`数组检索表单提交的文件。

`$_FILES`上传后数组将包含，`$_FILES["file"]["tmp_name"]`其中“文件”是表单中的输入名称。不过，有一些 PHP 框架可以帮助您更好地处理临时文件。

如何使用？在包含表单的 php 文件中：

```
<form action="upload_file.php" method="post"
enctype="multipart/form-data">
<label for="file">Filename:</label>
<input type="file" name="file" id="file" /> 
<br />
<input type="submit" name="submit" value="Submit" />
</form> 
```

然后在upload_file.php中：

```
echo $_FILES["file"]["tmp_name"] 
```

这是你要求的吗？

# jquery - 多个 jquery ajax 请求相同的回调

> ID：13244588
> 
> 赞同：0
> 
> 时间：2012-11-06T04:51:11.050
> 
> 标签：jquery

我有一个要向其发出请求的 URL 列表。除了根据我发出请求的 url 更新页面的不同部分之外，响应的处理是相同的，因此我想对每个请求使用相同的回调。

我的问题是第一个请求调用回调，然后在第一个请求处理完成之前再次调用第二个请求。这在某种程度上是意料之中的，但我原以为它会在完成第二个请求后返回并开始处理第一个请求。即使将 async 设置为 false 也会发生这种情况 - 显然同步部分在调用回调时停止。

我找到的唯一解决方案是在回调中发出第二个请求。有没有更好的办法？

这是问题代码：

```
function doStuff() {
   // populate a var urls array with data from user input
   var urls = new Array();
   // ... code to populate urls ...

   // loop through urls and send requests
   for (var i = 0; i < urls.length; i++) {
       $.ajax({url: urls[i],
               success: handleResponse,
               dataType:'html'});
   }
}

function handleResponse(data) {   
    url = this.url;
    // process based on url
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T05:02:01.127

[jQuery Deferred](http://api.jquery.com/category/deferred-object/) 在您的情况下很有用

# facebook - 盗链facebook头像

> ID：13244595
> 
> 赞同：5
> 
> 时间：2012-11-06T04:51:54.637
> 
> 标签：facebook, graph, image

我想知道我是否可以为每个使用 facebook connect 注册网站的人链接 Facebook 个人资料图片？

Facebook 允许使用获取用户个人资料图片

```
https://graph.facebook.com/[ID]/picture?type=square 
```

但是是否允许热链接个人资料图片，否则我将不得不将它们缓存在我自己的服务器上。谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-07T20:16:59.903

直接在`img`标签中使用该链接作为`src`.

# oracle - 将 .sql 导入 Oracle

> ID：13244597
> 
> 赞同：0
> 
> 时间：2012-11-06T04:52:07.147
> 
> 标签：oracle, oracle11g

如何将 .sql 文件导入 Oracle 数据库？它是使用 Oracle 11g 导出的，我是否使用 SQL Developer 或其他工具执行此脚本？

# google-chrome-extension - chrome.storage.local.get 限制

> ID：13244598
> 
> 赞同：3
> 
> 时间：2012-11-06T04:52:16.777
> 
> 标签：google-chrome-extension, limit

我正在创建一个存储提要数据的 Google Chrome 扩展程序。我的扩展程序使用无限存储，到目前为止还没有达到任何类型的限制保存数据，但我正在使用 chrome.storage.local.get 遇到一个！

如果 chrome.storage.local.get 返回的总大小 > 840k，则扩展程序崩溃。我找不到任何限制？！有任何想法吗？如果我能够将 chrome.storage.local.set 值设置为 2MB，为什么我无法获取它！我正在使用版本 22.0.1229.94 m 进行测试。

我已经为崩溃创建了一个[错误报告](http://code.google.com/p/chromium/issues/detail?id=159593)，但是任何人都可以给我关于这个限制的任何信息吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T03:44:51.280

这是侥幸.. 一次不错的重启修复了它。

# android - 如何在android中找到特定进程使用的内存？

> ID：13244603
> 
> 赞同：0
> 
> 时间：2012-11-06T04:53:10.770
> 
> 标签：android, memory-management

我正在努力寻找一种解决方案来找到 android 中特定进程使用的内存。

使用`actvityManager.getRunningAppProcesses()`我可以获得所有进程内存使用情况的综合列表。

但是我需要实现一个场景，我应该通过`processID`并获取特定进程的内存使用情况？这种情况在 Android 中是否可行？

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T05:02:58.833

您可以使用获取内存信息

```
MemoryInfo mi = new MemoryInfo();
ActivityManager activityManager = (ActivityManager) getSystemService(ACTIVITY_SERVICE);
activityManager.getMemoryInfo(mi); 
```

并针对特定流程使用

```
activityManager.getProcessMemoryInfo(new int[]{process_ids}); 
```

它返回一个内存信息数组

我会请你参考这三个

[在 Android 中获取内存使用情况](https://stackoverflow.com/questions/3118234/how-to-get-memory-usage-and-cpu-usage-in-android)

[如何在android中获取当前的内存使用情况？](https://stackoverflow.com/questions/3170691/how-to-get-current-memory-usage-in-android)

[如何在 Android 中发现我的应用程序的内存使用情况？](https://stackoverflow.com/questions/2298208/how-to-discover-memory-usage-of-my-application-in-android)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T05:02:18.703

请参阅以下链接：

[https://stackoverflow.com/a/2299813/1369222](https://stackoverflow.com/a/2299813/1369222)

[http://macgyverdev.blogspot.in/2011/11/android-track-down-memory-leaks.html](http://macgyverdev.blogspot.in/2011/11/android-track-down-memory-leaks.html)

请注意，这不是一门精确的科学，而不是寻找一般的“进程的内存使用”，您应该寻找更符合您的要求的东西。无论如何，这些链接将帮助您入门。

# .net - 管理多个工作人员实例的架构？

> ID：13244604
> 
> 赞同：2
> 
> 时间：2012-11-06T04:53:17.750
> 
> 标签：.net, wcf, architecture, windows-services, cloud

我应该选择什么架构？有一个工作进程将消息从队列中取出并逐一处理。现在我可以让许多 Windows 服务实例来完成这项工作，或者我可以让一个 WCF 服务作为 Windows 服务托管，以充当某种服务器，我可以在该服务器上为每个实例启动一个线程。

哪种方法可以更好地扩展？当我们谈论扩展速度非常快的云之类的基础架构以及非基于云的基础架构时，我想要观点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T05:36:41.853

云中最具可扩展性的方法是使用 WCF 或 Web-api 配置处理服务的实例（如果您正在设计 RESTFUL 服务，则最好使用）。这样的实例将是可扩展的。在 Azure 的情况下，将其视为由 IIS 托管的 Web 角色。IIS 旨在根据来自客户端的传入请求进行扩展。另一个优势是您可以获得 IIS 和 asp.net 基础架构来管理安全性和其他内容。但是，如果您不需要使用 Windows 服务托管的 WCF 或 Web-api 服务。然后，Web 服务实例将消息排队或说工作负载到队列中。在 Azure 的情况下，队列可以是服务总线队列。然后，您可以使用 Windows 服务或 Azure 辅助角色从队列中提取工作项。通常一个工作人员从队列中拉出多条消息并处理它。这样做时，这些消息对其他工作人员不可用。工作人员完成后，从队列中删除消息或工作负载。因为在一段时间后它们将对其他工作人员可见，因此有可见性设置，例如在亚马逊 SQS 中有可见性超时设置。*在单个工作人员中提取 5 到 10 条消息，并将它们作为线程池线程作为“任务”并行运行。

请注意，在前端具有可扩展服务实例、在后端接收传入请求和工作角色以尽快清除工作项的架构依赖于云提供的分布式、健壮和可扩展队列，如 Azure 服务总线和亚马逊 SQS。否则，您可能会遇到争用问题。

对于内部（非云）部署，如果没有分布式队列，您可以在这里让 IIS 托管服务实例做所有事情，或者让 Windows 服务做所有事情或组合。我建议使用 IIS 托管 HTTP 服务来服务网页和接收传入请求（REST 服务）。IIS 在这方面做得很好。但是，如果长时间没有请求，IIS 池可能会被回收并且可能无法运行。因此，如果需要在后端运行计划任务或作业，windows 服务很擅长这一点。让 Windows 服务来做所有事情当然是可行的，但根据我使用 IIS 和 asp.net 处理传入请求的经验，这有助于提高工作效率。您可以与服务和 Web 应用程序共享安全性。我更喜欢在前端使用 IIS，在后端使用 Windows 服务。有了这个，我不必使用 Windows 服务来管理安全性。尝试使用 NServiceBus 进行内部队列[https://github.com/NServiceBus/NServiceBus](https://github.com/NServiceBus/NServiceBus)。我没有评价它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T08:12:04.533

我会将每个工作人员托管在一个单线程 Windows 服务中。这有以下好处：

1.  易于编码和测试（无多线程）。
2.  轻的
3.  不需要[调度程序- 工作人员将在没有干预的情况下进行负载平衡。](http://www.eaipatterns.com/MessageDispatcher.html)
4.  易于部署/管理。如果工人有问题，只需重新启动服务。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T05:29:01.060

您不能简单地将工作人员托管在服务中并使其成为多线程吗？Wcf 只是把事情搞砸了，因为您必须创建一个读取队列并调用服务的调度程序。通过让消费者作为服务工作，您也可以将其安装在多台机器上，配置为从同一个队列中读取，这样您就可以纵向和横向扩展。我假设您正在使用`MSMQ`或其他类似的队列机制，如果没有，请考虑使用它。

# java - 我应该使用 JPA 的 2 个应用程序和 2 个实体同一个表吗？

> ID：13244605
> 
> 赞同：1
> 
> 时间：2012-11-06T04:53:25.713
> 
> 标签：java, jpa-2.0, eclipselink

我喜欢在我的数据库中创建两个具有相同用户信息的 java 应用程序，但一些用户相关信息仅与应用程序 A 相关，其他仅与应用程序 B 相关。

我的问题是，我可以为 A 编写用户类并忽略 B 的字段，反之亦然吗？

或者是懒惰地加载字段并让我永远不会使用的字段保持不变的正确方法？这会导致内存中的对象更大吗？

或者如果必要的话，冗余存储信息并在两个表/数据库中更新会更好吗？

请告诉我利弊或可能导致错误的原因。

如果这很重要，我会使用 eclipselink 和 postgres。

谢谢@Vikdor，但你的回答让我脑海中浮现更多问题:)

1.  所以你回答的主要陈述是，只要我不违反表格的条件就没有问题，对吧？

2.  假设至少有一个应用程序，也许两者都被大量用户大量使用。保存冗余信息以防止性能问题会更好吗？
    或者将 A/B 特定信息保存在单独的对象/表中是否是一个好主意，其值可以识别用户（如他的电子邮件），这样我就有 3 个 DB 1 用于 A 和 A 特定数据，一个用于 B B 特定数据和基本用户信息（邮件、密码、用户名等）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T05:03:57.117

只要应用程序只从用户表中读取与其相关的信息，就可以只使用对给定应用程序有意义的属性来定义实体。

但是，如果您要通过这些应用程序中的任何一个创建新的用户记录，则需要定义具有用户所有不可为空属性的实体。否则，插入将在数据库层失败。

关于内存中对象的大小，如果您的用户表很大并且您不使用大多数属性并且只执行读取操作，这可能是一个很好的优化，仅定义用户实体必需的属性。

# jenkins - 我可以为任何类型的应用程序使用 Jenkins cloudbees 部署程序插件吗

> ID：13244611
> 
> 赞同：0
> 
> 时间：2012-11-06T04:53:24.837
> 
> 标签：jenkins, cloudbees

我想为 Jenkins 使用 CloudBees 部署插件（部署到 CloudBees）——它是否仅限于战争文件和 Web 应用程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T04:53:24.837

是的你可以。

请注意，如果您将 ClickStart 用于适当的运行时容器 - 那么它会自动为您设置所有这些，但如果您没有使用：

您可以通过这种方式部署任何类型的应用程序 - 诀窍是让应用程序设置为知道它是什么类型。

所以如果你想部署一个 play2 应用程序，你可以运行

```
bees app:update containerType=play2 
```

只需一次 - 它会在所有后续部署中记住它（您也可以使用 app:create 通过 -t 设置此参数）。

当你生成你的构建工件时，你应该确保它是一个 .zip 文件——所以它不会与战争文件混淆——否则它的工作原理是一样的。

# php - 如何在 Web 服务器上设置我的服务器端脚本

> ID：13244613
> 
> 赞同：-1
> 
> 时间：2012-11-06T04:53:29.907
> 
> 标签：php, mysql, server-side, lamp

我有一个应用程序连接到的服务器端脚本。这在我的开发计算机上运行的 LAMP 服务器上运行良好，但是当我将脚本上传到实时 Web 服务器时，我收到错误，最新的是错误 404，即“未找到”。我知道这与没有将文件放在正确的位置有关，或者可能是某些安全设置负责。有经验的人可以指导我如何设置我的脚本以便我可以访问它们吗？

这是我服务器上的结构，它可以工作： 在`/var/www`中，我有一个名为的文件夹`MyAPI`，在这个文件夹中，我有我的`index.php`文件和 2 个支持文件，它们可以一起工作。我在存储上传文档`Store`的同一文件夹中还有一个文件夹。`MyAPI`我还有一个 MySQL 数据库，我正在连接并可以从中读取和写入。如何将这些放在服务器上以便可以访问？我再次遇到的错误是错误 404，我如何确定文件已找到？我`.htaccess`暂时禁用了，但它仍然不起作用。请指教。

澄清：请注意，我对 /var/www 的解释是现在已经有效的。我只是在解释我的开发计算机上的设置。问题是如何将结构传输到 LIVE 服务器。请查看所描述的设置以及如何将其传输到实时服务器。

**发布问题：为什么我的问题被否决了？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T05:05:08.590

请确保“ **Localhost** ”在您的任何路径中都没有硬编码......如果它是硬编码的，您的脚本将在本地工作，但在托管时会显示 404。

# c++ - 如何使用多个线程正确挂钩 WinInet？

> ID：13244614
> 
> 赞同：2
> 
> 时间：2012-11-06T04:53:30.327
> 
> 标签：c++, internet-explorer-9, hook, bho

我为 Internet Explorer 编写了一个 BHO，它钩住 WinInet，通过将来自 IE 的一些 HTTP 请求重定向到内部服务器来修改它们。

当我在 IE 中打开前 3 个选项卡时它工作正常，因为为每个选项卡创建了一个新的 iexplore.exe 进程，每个选项卡都加载 BHO。

超过 4 个选项卡时会出现问题：不是创建新的 iexplore.exe 进程，而是在不同的线程中重新使用现有进程。我可以多次挂钩同一进程（每个线程 1 个），也可以只挂钩一次。在这两种情况下，关闭选项卡时都会发生崩溃。

示例：打开选项卡 1（单独的 iepxlore.exe）、2（单独的 iepxlore.exe）、3（单独的 iepxlore.exe）和 4（与选项卡 1 共享 iexplore）。关闭选项卡 1\. 刷新选项卡 4，IE 在 NDTDLL.DLL 内崩溃。如果我在挂钩的 WinInet.ddl 内不执行任何操作（只需调用旧函数），就会发生崩溃

如果每个 iexplore.exe 进程只挂接一次 WinInet，我将无法拦截所有选项卡中的请求。

我想知道最好的方法是什么。到目前为止，我发现的所有示例都假设每个选项卡有 1 个 iexpolore.exe 进程。

WinInet 挂钩代码基于[代码项目示例](http://www.codeproject.com/Articles/38616/Retrieve-HttpOnly-Session-Cookie-in-WebBrowser)，我只是挂钩较少的功能。

看起来指向旧 WinInet 函数或我创建的函数的指针不再有效。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T08:24:51.383

假设您从 codeproject.com 获取了大部分示例代码，那么您有一个严重的清理问题。

所以这就是发生的事情：

1.  当您打开选项卡时，您的 BHO 会被加载。
2.  g_oHook 对象（静态）被初始化。它的初始化在所有模块中设置了钩子（即在当前进程中的所有其他 DLL 中）。
3.  通过设置挂钩，我的意思是修改 IAT（导入地址表）中的条目。它们现在指向您在 DLL 中的函数（请记住：当您从一个 DLL 调用另一个 DLL 时，您会通过 IAT(
4.  然后关闭选项卡。正在卸载您的 DLL。
5.  ntdll.dll的IAT中的地址仍然指向你自己DLL的旧位置的内存空间，现在不存在了。在 IE 第一次尝试调用其中一个函数时，您会遇到错误

为了修复，您需要在 CWininetHook::~CWininetHook 的销毁中实现清理逻辑。只需执行构造函数的操作，并返回原始地址。

# ajax - 如何将值传递给 selectOneMenu 中的侦听器

> ID：13244620
> 
> 赞同：5
> 
> 时间：2012-11-06T04:54:10.377
> 
> 标签：ajax, jsf, jsf-2

我有 2 个下拉菜单：类型和代码。如果 value = A 或 B 或 C，我希望 Code 下拉列表根据 Type 下拉列表更改值。如何将 A 或 B 或 C 的值传递给侦听器，以便它可以理解和处理我的 List ？

```
 <h:outputLabel value="Type" for="idType" />
     <h:selectOneMenu id="idType" value="#{myController.type}">
         <f:selectItem itemLabel="AAA" itemValue="AAA" />
         <f:selectItem itemLabel="BBB" itemValue="BBB" />
         <f:selectItem itemLabel="CCC" itemValue="CCC" />
         <f:ajax event="valueChange" listener="#{myController.changeCodeList}" render="idCode" execute="@this" />
     </h:selectOneMenu>
     <h:outputLabel value="Code" for="idCode" />
     <h:selectOneMenu id="idCode" value="#{myController.code}" >
         <f:selectItem itemLabel="Select ..." noSelectionOption="true" />
         <f:selectItems value="#{myController.codeList}" />
     </h:selectOneMenu> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-06T06:41:13.537

`event="valueChange"`从您的中删除`<f:ajax`或替换为`event="change"`

您不必传递已经存在的值（在`changeCodeList`方法中）

```
public void changeCodeList(AjaxBehaviorEvent ev) {
    System.out.println(type); //here is your value
    //now repopulate your list based on the value
    codeList = someMethod(type);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T05:38:18.873

您可以使用

```
<f:setPropertyActionListener value="You want to pass" target="Backing bean property that you want to set" /> 
```

n 另一个选择是

```
<a4j:support ajaxSingle="true" reRender="codeCombo"
                            event="onchange"></a4j:support> 
```

所以使用 a4j:support 您可以在选择类型时重新渲染代码

# codeigniter - 使用 cloudmanic-storage 将文件上传到云端

> ID：13244621
> 
> 赞同：0
> 
> 时间：2012-11-06T04:54:26.757
> 
> 标签：codeigniter, rackspace-cloud

我正在尝试使用 codeigniter 和 cloudmanic-storage 库将我的文件从服务器上传到 CDN。创建/列出容器的功能有效，但向容器添加文件的功能无效。

我不知道它有什么问题或如何解决这个问题，所以如果有人遇到这个问题，分享一些知识会很棒:)

```
$container = 'cm-storage-' . time();
    echo '<h1>Create test container.</h1>';
    $this->storage->create_container($container, 'private');
    echo "New container: <b>$container</b><br /><br />";
    echo '<hr />';
            $file = "_data/articlepics/big_".$config['file_name'];
    $this->storage->upload_file($container, $file, 'test01.jpg'); 
```

我确定我尝试上传的文件存在，当我使用示例控制器尝试时，问题仍然存在。由于某种原因，它只是不想将文件上传到 CDN。

Codeigniter ver.2.0.2 来自 github 的最新 cloudmanic-storage

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T09:51:27.710

似乎类型尚未定义，guess 函数无法猜测文件是什么。

我所做的是在控制器中上传/调整文件大小时整理文件，然后（在我知道扩展名之后）只需将文件类型添加到`rackspace_rc_driver.php`

```
function upload_file($cont, $path, $name, $type = NULL, $acl = 'private', $metadata = array())
    { 
```

**$type="图像/JPEG";**

```
$my_container = $this->_conn->get_container($cont);

        // move local file to server        
        $my_object = $my_container->create_object($name);

        // If we pass in a type we don't try to guess the type.
        if(! is_null($type))
        {
            $my_object->content_type = $type;
        }
        //echo $path;die();
        $my_object->load_from_filename($path);

        return ($my_object->container->cdn_enabled) ? $my_object->container->cdn_uri . '/' . $my_object->name : $my_object->name;
    } 
```

希望这对其他人有帮助。

# iphone - 如何允许我的应用访问 iphone 联系人并将其存储以在应用中使用

> ID：13244626
> 
> 赞同：0
> 
> 时间：2012-11-06T04:55:08.990
> 
> 标签：iphone, flash

嘿，所以我正在制作一个应用程序，并且想知道如何才能访问 iPhone 的联系人并单击所需的电话号码，然后将它们存储起来以供使用。

更新 - - -

我是 Adob​​e Flash CS5.5 的开发者

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T05:07:17.433

你还需要包括`AddressBook.framework`我使用`MContact`类来使用联系人姓名、号码等。

```
#import <AddressBook/AddressBook.h>
#import <AddressBook/ABAddressBook.h>
#import <AddressBook/ABPerson.h>

[contactList removeAllObjects];

// open the default address book. 
ABAddressBookRef m_addressbook = ABAddressBookCreate();
if (!m_addressbook) {
    NSLog(@"opening address book");
}

// can be cast to NSArray, toll-free
CFArrayRef allPeople = ABAddressBookCopyArrayOfAllPeople(m_addressbook);
CFIndex nPeople = ABAddressBookGetPersonCount(m_addressbook);

// CFStrings can be cast to NSString!

for (int i=0;i < nPeople;i++) { 
 MContact *contact = [[MContact alloc] init];

 ABRecordRef ref = CFArrayGetValueAtIndex(allPeople,i);
 CFStringRef firstName, lastName;
 firstName = ABRecordCopyValue(ref, kABPersonFirstNameProperty);
 lastName  = ABRecordCopyValue(ref, kABPersonLastNameProperty);
 contact.name = [NSString stringWithFormat:@"%@ %@", firstName, lastName];

 ABMutableMultiValueRef eMail  = ABRecordCopyValue(ref, kABPersonEmailProperty);
 if(ABMultiValueGetCount(eMail) > 0) {
  contact.email =  (NSString *)ABMultiValueCopyValueAtIndex(eMail, 0);
  [contactList addObject:contact];
 }

 CFRelease(ref);
 CFRelease(firstName);
 CFRelease(lastName);

}

////and here MContact is NObject (Bean) file bellow

@interface MContact : NSObject { 
NSString *email; 
NSString *name; 
NSString *lastName; 
NSString *phone; 

BOOL isSelected; 
} 
@property (nonatomic, retain) NSString *email; 
@property (nonatomic, retain) NSString *name; 
@property (nonatomic, retain) NSString *lastName; 
@property (nonatomic, retain) NSString *phone; 

@property (nonatomic) BOOL isSelected; 
@property (nonatomic, readonly) NSString *displayName; 
@end 
```

# php - 为什么这些图像不显示？

> ID：13244633
> 
> 赞同：0
> 
> 时间：2012-11-06T04:56:37.617
> 
> 标签：php, html

我在笔记本电脑上运行 wampserver。我使用 PHP 脚本将图像上传到我的网站，但发现有些图像无法显示。我检查了图像是否实际上传并存在。它们确实存在。虽然其中一张图像同时显示在远程服务器和我的本地服务器上，但另一张图像仅显示在我的本地服务器上。链接如下所示：

1.  `<img src="/upload/80001101/thumb/34_87960974.jpg" width="" height="" />`
2.  `<img src="/upload/80001205/thumb/20_52172113.jpg" width="" height="" />`

我将第二张图片下载到我的服务器，可以看到它没有问题。可能是什么问题呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T05:49:47.123

如果你的目录结构是：

> -->www/
> ------>上传/
> ------------->80001101/
> -------- -->拇指
> ---------------->34_87960974.jpg

并且您显示图像的代码位于您的根（www）目录中。假设homepage.php。你的代码应该是这样的：

```
<img src="upload/80001101/thumb/34_87960974.jpg" width="" height="" /> 
```

但是，如果您的文件位于子文件夹中，则可以说结构是这样的。

> -->www/
> ------->home/
> ------------>homepage.php

您的代码应如下所示：

```
 <img src="../upload/80001101/thumb/34_87960974.jpg" width="" height="" /> 
```

有关网址中 ../ 的更多详细信息，请访问此页面[http://answers.yahoo.com/question/index?qid=20090205061849AAzDqZH](http://answers.yahoo.com/question/index?qid=20090205061849AAzDqZH)

希望对你有帮助

# java - java apache http 包——如何强制 GET 忽略缓存？

> ID：13244637
> 
> 赞同：0
> 
> 时间：2012-11-06T04:57:29.783
> 
> 标签：java, android, http

我`org.apache.http.client.methods.HttpGet`用来从服务器读取纯文本文件。服务器没有发送任何类型的“过期”标头。我发现对 HttpGet 的重复调用正在返回文本文件的过时版本，显然来自某种缓存。

有没有办法强制 GET 去服务器而不是缓存？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T05:06:54.087

试试这个

```
addHeader("Cache-Control", "no-cache"); 
```

# java - 为什么 return 语句不向控制台打印任何内容？

> ID：13244640
> 
> 赞同：-3
> 
> 时间：2012-11-06T04:57:37.440
> 
> 标签：java

我用谷歌搜索了它，但没有找到任何有用的东西，所以我决定在这里问。我不能将 System.out.println 用于我正在处理的项目，所以我使用了 return 语句。一切都编译得很好，但是我的 return 语句没有向控制台打印任何内容，程序只是终止了。我在代码中所拥有的只是一个返回 true 或 false 的 if-else 语句。为什么我在控制台上看不到任何内容？顺便说一句，我正在使用 Eclipse Juno 的控制台。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T05:26:06.070

Return 只是从方法返回一个值，它不打印它。您需要使用该`System.out`方法或类似的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T06:24:23.627

至少发布您的示例代码！

你的意思是这样的吗？

```
public class Sample {

    public static void main(String[] args) {
        Sample sample = new Sample();
        System.out.println(sample.sayHello());

    }

    private String sayHello() {
        return "Hello Java Programmer";
    }
} 
```

# java - 欧拉计划#3

> ID：13244641
> 
> 赞同：0
> 
> 时间：2012-11-06T04:57:52.820
> 
> 标签：java

**问题：**

> 13195 的质因数是 5、7、13 和 29。
> 
> 数字 600851475143 的最大质因数是多少？

我发现这个很容易，但是运行文件花了很长时间，它已经持续了一段时间，我得到的最高数字是 716151937。

这是我的代码，我只是要等待还是我的代码中有错误？

```
 //User made class
public class Three
{   
        public static boolean checkPrime(long p)
        {
            long i;
            boolean prime = false;
        for(i = 2;i<p/2;i++)
        {
            if(p%i==0)
            {
                prime = true;
                break;
            }
        }
    return prime;
    } 
```

}

```
 //Note: This is a separate file
public class ThreeMain
{
    public static void main(String[] args)
        {
            long comp = 600851475143L;
            boolean prime;
            long i;
            for(i=2;i<comp/2;i++)
            {
                if(comp%i==0)
                {
                    prime = Three.checkPrime(i);
                    if(prime==true)
                    {
                        System.out.println(i);
                    }
                }
            }
        }       
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T05:59:55.030

You're headed in the right direction, but you've gone way past where you need to go and have a couple of mistakes along the way. You're currently checking much higher than you need to verify primes (particularly primes >> 2). Your line: `for(i = 2;i<p/2;i++)` could be `for(i = 2;i*i <= p;i++)` (you need only check up to the square root of a number to determine if it's prime or composite).

Your function to check for primes actually returns true for composites, not primes. You're code:

```
 if ((p%i==0) {
        prime = true;
        break; } 
```

should be

```
 if ((p%i==0) {
        prime = false;
        break; } 
```

In your main method, you don't actually need the `boolean prime` at all. From the context of the question, we can assume that there will be more than two prime factors, which means the largest prime factor we need to reduce comp to a smaller and more manageable number is the cube root of comp. Therefore, your line `for(i=2;i<comp/2;i++)` could be `for(i=2;i*i*i<comp;i++)`. Instead of continually checking if `i` divides `comp` and then checking if `i` is prime, you can reduce the size of `comp` by dividing by `i` until `comp` is not divisible by `i` anymore (to check for powers of `i`). Because you're starting with small values of `i` then you will never get a composite number that divides `comp` if you reduce it by `i` each time. When you've reduced `comp` to 1 then the current `i` will be the greatest prime factor and your answer to the problem.

Also, you're lines:

```
 prime = Three.checkPrime(i);
    if(prime==true) 
```

can be reduced to:

```
if (Three.checkPrime(i)); 
```

because Three.checkPrime() will return, and ultimately be evaluated as, a boolean value.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T05:44:10.167

一旦你找到了你的数字的一个因素，你可以把它分开来使剩余的数字更小。

```
if (prime)
{
    System.out.println(i);

    // The factor may occur multiple times, so we need a loop.                
    do {
        comp /= i;
    } while (comp % i == 0);
} 
```

这样做还可以保证无论何时`i`除以`comp`,`i`必须是素数，因为所有较小的素数都已被除掉，因此您可以删除素数检查：

```
for (i = 2; i < comp/2; i++)
{
    if (comp % i == 0)
    {
        System.out.println(i);

        do {
            comp /= i;
        } while (comp % i == 0);
    }
} 
```

最后，您只需要检查`i`平方根，`comp`因为任何大于平方根的因子都必须伴随着小于平方根的因子。（即如果`i*j == comp`，其中之一`i`或`j`必须是`<=`的平方根`comp`）。

还有一些技巧可以应用，但这对于这个问题应该绰绰有余。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T16:43:06.430

在这里，我正在编写两种不同的逻辑来解决这个问题。我很确定它工作得更快

**第一个是**

```
import java.util.ArrayList;
import java.util.List;

public class Problem3 {
public void hfactor(long num)
 {
  List<Long> ob =new ArrayList<Long>();
 long working =num;
  long current =2;
  while(working !=1)
   {boolean isprime = true;
    for(Long prime :ob)
    {
      if(current%prime == 0)
       { isprime =false;
         break;   
       }
    }
    if(isprime)
    {ob.add(current);
       if(working%current ==0)
       {
       working /=current;
        }
     } 

  current++;    
    }
    System.out.println(ob.get(ob.size()-1));
   }    

 public static void main(String[] args) {
  Problem3 ob1 =new Problem3();
  ob1.hfactor(13195);
  }
  } 
```

**其次是**

```
public static void main(String[] args) {
    List <Long> ob = new ArrayList<Long>(); 
    List<Long> ob1 = new ArrayList<Long>();

    long num =13195;
    for(int i = 2; i<num; i++)
      {
       if (num%i ==0)
         ob.add((long) i);  
      }

    for (int i =0; i<ob.size(); i++)
        for(int j =2; j<ob.get(i); j++)
            {
             if (ob.get(i)%j ==0)
                {
                 ob.set(i, (long) 0);
                    }
             }
           for(int i =0; i<ob.size(); i++){
              if(ob.get(i)!=0)
              {
                 ob1.add(ob.get(i)); 
              } 

             }

        System.out.println(ob1.get(ob1.size()-1));

    }} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-06T16:19:06.397

你的算法很慢。这是通过试除法分解整数的标准方法：

```
define factors(n)
    f = 2
    while f * f <= n
        if n % f == 0
            output f
            n /= f
        else
            f = f + 1
    output n 
```

有更好的方法来分解整数；[您可以在我的博客](http://programmingpraxis.com/essays)上的一篇文章中阅读其中的一些内容。但是这个算法对于 Project Euler #3 来说已经足够了，在几乎任何现代语言中都可以在不到一秒的时间内给出答案。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-06T05:23:49.787

您可以简单地循环到`sqrt(2)`而不是`n/2`哪个会节省大量时间。

# php - 在 Javascript 中运行 PHP Mysql 查询循环

> ID：13244642
> 
> 赞同：0
> 
> 时间：2012-11-06T04:58:18.070
> 
> 标签：php, javascript

我试图通过从我的 mysql 数据库中提取现有页面来使我的 javascript 菜单动态化。

我想这样做： [在 javascript 对象中应用 php/MySql while 循环](https://stackoverflow.com/questions/12531993/apply-php-mysql-while-loop-in-javascript-object)- 但在 .js 文件中。

```
anylinkmenu4.items=[

[" echo looped content here   ", "echo looped content here.php"] ] 
```

如果上面的问题回答了问题，请告诉我，因为我无法在 .js 文件中运行 php。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T05:06:47.873

用ajax调用php文件。看。[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

请参阅[使用 jQuery、JSON 和 AJAX 填充下拉列表](https://stackoverflow.com/questions/3564333/using-jquery-json-and-ajax-to-populate-a-drop-down)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T00:25:41.927

提供 .php JavaScript 文件而不是 .js 文件，或者内联提供它，或者使用 Ajax。

感谢minitech的回答

# python - 以下代码是否会进入 if 语句

> ID：13244645
> 
> 赞同：-3
> 
> 时间：2012-11-06T04:58:48.283
> 
> 标签：python

```
x = None
if not x:
   do_something() 
```

^ 既然x是None，它会进入if语句吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-06T04:59:45.223

Python 没有价值`null`，所以你的问题没有意义。 `x == null`将引发 NameError。

回答您更新的问题：是的，它将进入 if 语句。 `None`在布尔上下文中为假，所以`not None`为真。您可以在交互式解释器中自己看到：

```
>>> not None
True 
```

如果您有 Java 背景，您应该意识到 Python 让尝试变得更加容易。习惯于在 Python 解释器中尝试。只需亲自尝试并看看会发生什么，就可以轻松回答很多问题。

# html - 用于 DLNA 播放器 (smartTV) 的 html 到视频转码

> ID：13244646
> 
> 赞同：1
> 
> 时间：2012-11-06T04:58:49.827
> 
> 标签：html, video

有什么方法/软件可以即时将 html 转码为视频并将其流式传输到多个 DLNA 播放器（smartTV）？

我认为唯一的方法是在每台智能电视上连接一台电脑并打开网络。不幸的是，我的智能电视不支持网络浏览器。我已经考虑过连接电脑，但我正在寻找其他替代方案。

非正式地，我是这个网站的新手，并向所有社区致以问候。

# javascript - 从数组javascript中删除项目

> ID：13244648
> 
> 赞同：1
> 
> 时间：2012-11-06T04:59:01.737
> 
> 标签：javascript, arrays

我试图从数组中删除一些项目，

```
Array.prototype.remove = function(from, to)
{
      var rest = this.slice((to || from) + 1 || this.length);
     this.length = from < 0 ? this.length + from : from;
      return this.push.apply(this, rest);
};

var BOM = [0,1,0,1,0,1,1];

var IDLEN = BOM.length;

for(var i = 0; i < IDLEN ;++i)
{

     if( BOM[i] == 1) 
     {
         BOM.remove(i);
     //IDLEN--;
     }

} 
```

结果是

```
 BOM = [0,0,0,1]; 
```

预期的结果是

```
 BOM = [0,0,0]; 
```

看起来我做错了什么，请帮助我。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T05:10:16.890

试试这个

```
var BOM = [0,1,0,1,0,1,1];
for(var i = 0; i < BOM.length;i++){
  if( BOM[i] == 1) {
     BOM.splice(i,1); 
     i--;
  }
} 
console.log(BOM); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-04-29T05:07:07.727

```
Try using filter:    

var test1 = ['a','b','c','d'];
var test2 = ['b','c'];

test2.forEach(removeItem => 
{
  test1 = test1.filter(item => item != removeItem);
})

console.log('Modified array',test1); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T05:16:05.903

```
Array.prototype.remove= function(){
    var what, a= arguments, L= a.length, ax;
    while(L && this.length){
        what= a[--L];
        while((ax= this.indexOf(what))!= -1){
            this.splice(ax, 1);
        }
    }
    return this;
} 
```

调用这个函数

```
for(var i = 0; i < BOM.length; i++)
{
    if(BOM[i] === 1) 
      BOM.remove(BOM[i]);
} 
```

# java - 创建抽象的通用 jaxb 类

> ID：13244652
> 
> 赞同：0
> 
> 时间：2012-11-06T05:00:27.717
> 
> 标签：java, generics, jaxb, annotations

我有以下简单的 jaxB 类，它采用泛型 E

```
@XmlAccessorType(XmlAccessType.FIELD)
@XmlTransient
@XmlRootElement(name = "searchResponseBase")
public abstract class SearchResponseBase<E>{

    @XmlElement(type=NameSearchResults.class)
    protected E searchResults;

    public E getSearchResults()
    {
        return searchResults;
    }

    public void setSearchResults(E mSearchResults)
    {
        this.searchResults = mSearchResults;
    }

} 
```

我需要删除对 NameSearchResults 的引用以`@XmlElement(type=NameSearchResults.class)`使基础实际上是通用的，但如果我这样做了，我会得到错误。

**错误**

```
[com.sun.istack.internal.SAXException2: class au.test.nameSearch.NameSearchResults nor any of its super class is known to this context.
javax.xml.bind.JAXBException: class au.test.nameSearch.NameSearchResults nor any of its super class is known to this context.] 
```

这是一个扩展它的类的例子

**扩展类**

```
@SuppressWarnings("javadoc")
@XmlAccessorType(XmlAccessType.FIELD)
@XmlType(propOrder = {
    "searchRequest",
    "searchResults"
})
@XmlRootElement(name = "searchResponse")
public class SearchResponse extends SearchResponseBase<NameSearchResults> {

    @XmlElement(required = true)
    protected SearchRequest searchRequest;

    public SearchRequest getSearchRequest() {
        return searchRequest;
    }

    public void setSearchRequest(SearchRequest value) {
        this.searchRequest = value;
    }
} 
```

我如何使基类真正通用？

最好我希望我的扩展类以这种格式工作`SearchResponse<E> extends SearchResponseBase<E>`并将其也用作泛型类型。

如果我按照保罗的建议去做，我可以让课程：

```
@XmlRootElement(name = "searchResponse")
public class SearchResponse<E extends NameSearchResults> extends SearchResponseBase<E> {

    @XmlElement(required = true)
    protected SearchRequest searchRequest;

    protected E searchResults;

    public SearchRequest getSearchRequest() {
        return searchRequest;
    }

    public void setSearchRequest(SearchRequest value) {
        this.searchRequest = value;
    }

    @Override
    public E getSearchResults() {
        return searchResults;
    }

    @Override
    public void setSearchResults(E mSearchResults) {
        this.searchResults = mSearchResults;
    }  
} 
```

有没有办法可以将 NameSearchResults 排除在外`<E extends NameSearchResults>`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T23:24:47.420

感谢@PaulBellora 的帮助，基类和扩展类都将变为抽象类，然后具有名称实现，如下所示：

**根据**

```
@XmlRootElement(name = "searchResponseBase")
public abstract class SearchResponseBase<E>{

    public abstract E getSearchResults();

    public abstract void setSearchResults(E mSearchResults);

} 
```

**扩展底座**

```
@XmlRootElement(name = "searchResponse")
public abstract class SearchResponse<E> extends SearchResponseBase<E>{

    public abstract SearchRequest getSearchRequest();

    public abstract void setSearchRequest(SearchRequest value);   
} 
```

**名称含义**

```
@XmlRootElement(name = "nameSearchResponse")
public class NameSearchResponse extends SearchResponse<NameSearchResults>{

    @XmlElement(required = true)
    protected SearchRequest searchRequest;

    protected NameSearchResults searchResults;

    @Override
    public NameSearchResults getSearchResults() {
        return searchResults;
    }

    @Override
    public void setSearchResults(NameSearchResults mSearchResults) {
        this.searchResults = mSearchResults;
    }

    @Override
    public SearchRequest getSearchRequest() {
        return searchRequest;
    }

    @Override
    public void setSearchRequest(SearchRequest value) {
        this.searchRequest = value;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T05:22:52.890

我对 JAXB 不熟悉，但是您可以尝试制作`getSearchResults`和`setSearchResults`抽象方法，并仅在`E`解决后才实现它们。例如：

```
//annotations ommitted
public abstract class SearchResponseBase<E>{

    public abstract E getSearchResults();

    public abstract void setSearchResults(E mSearchResults);
}

//annotations ommitted
public class SearchResponse extends SearchResponseBase<NameSearchResults> {

    @XmlElement(type=NameSearchResults.class)
    protected NameSearchResults searchResults;

    @Override
    public final NameSearchResults getSearchResults() {
        return searchResults;
    }

    @Override
    public final void setSearchResults(NameSearchResults mSearchResults) {
        this.searchResults = mSearchResults;
    }

    ...
} 
```

# java - 如何存储二维数组的返回

> ID：13244656
> 
> 赞同：0
> 
> 时间：2012-11-06T05:00:42.807
> 
> 标签：java

如何存储二维数组的返回？例如

```
public Class A{

public String something(){
String []some_array=new String[2];
//stuff in here...sets elements of our array to something

//unsure of the next line
return some_array[];
}

public static void main(String[] args) {

String []some_other_array=new String[2];
A myA=new A();
//unsure of the next line
some_other_array[]=myA.something(); 
```

我如何着手将要返回的数组的第一个第二个元素返回为我存储它的数组的第一个第二个元素？

任何人都可以澄清在我的方法 something() 中使用参数变量而不首先使其等于另一个变量是否合法？我一直认为您要么必须在方法中声明另一个变量并使其等于参数并使用您创建的新变量。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T05:03:23.740

更改方法的返回类型，如下所示：

```
public String[] something(){
String []some_array=new String[2];
//stuff in here...sets elements of our arrays to something

return some_array;
} 
```

另请注意，return 语句在 variable 旁边没有`[]`括号`some_array`。

在你的主要方法中，你应该这样写：

```
String[] some_other_array;
A myA=new A();

some_other_array = myA.something(); 
```

另请注意，在上面的代码中，将方法返回的数组分配给局部变量（此处`some_other_array`）时，您不必使用`[]`括号。

并且不要初始化您的`some_other_array`变量，只需进行声明，以便在您为其分配方法返回的数组时，它将自动具有返回数组的大小。

# email-client - Trustedbird 中的邮件列表扩展

> ID：13244658
> 
> 赞同：3
> 
> 时间：2012-11-06T05:00:51.683
> 
> 标签：email-client, thunderbird, mail-server

我正在尝试开发自己的邮件客户端和 MTA，将 Trustedbird 作为参考。我想知道在 Trustedbird 中邮件列表扩展功能的处理位置？在客户端或 MTA ..？找不到与此相关的任何文档..在此先感谢..

# javascript - 不同的类是否可以在 Nodejs 中检测到彼此的“发射”？

> ID：13244664
> 
> 赞同：0
> 
> 时间：2012-11-06T05:01:29.920
> 
> 标签：javascript, class, node.js, events

我正在为似乎是一个简单的概念而苦苦挣扎，这让我认为我正在做的事情是无法完成的。

在nodejs中，如果class objectA.emits('hey there')，class objectB.on('hey there')可以用'yo'响应吗？

对象 A 和 B 彼此无关，只是它们都扩展了 EventEmitter 并且在同一个 nodejs 应用程序中。

抱歉，如果以前有人问过这个问题，我找不到。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T15:02:20.717

1.  是的
2.  差不多就是这样。

在处理观察者/发布者-订阅者模式（或中介者模式）时，关键在于执行“发射”的类的类型实际上并不重要。

假设这`A`是一个发射器：

```
var B = { doStuff : function () { console.log("Yo!"); } };

A.addListener("someEvent", B.doStuff);
A.emit("someEvent"); 
```

如果你真的想让他们来回交谈，那么你需要手动订阅他们......

假设两个`A`AND`B`都是发射器：

```
B.doStuff = function () { this.emit("B's event", "Yo!"); };
A.doThing = function (param) { console.log(param); };

B.addListener("B's event", A.doThing);
A.addListener("A's event", B.doStuff.bind(B));

A.emit("A's event"); 
```

或者，您应该研究一种调解器模式（它也“发射”，但旨在成为 1 个对象，它在许多彼此不认识的对象之间进行调解，但使用相同的事件名称并传递明确定义的数据 -结构，就像一个好的 API 应该的那样）。

假设那`Mediator`是一个发射器，并且`A`,`B`和`C`不是：

```
var A = {
        getData : function (request) { /* network call */ this.dataCallback(data); },
        dataCallback : function (data) { Mediator.emit("data-recieved", data); }
    },
    B = {
        display  : document.getElementById("data-display"),
        showData : function (data) { /* make DOM representation */ }
    },
    C = {
        input : document.getElementById("request-input"),
        button : document.getElementById("request-button"),
        getRequest : function () {
            var request = this.input.value;
            this.requestData(request);
            this.disableButton();
        },
        requestData : function (request) { Mediator.emit("data-request", request); },
        disableButton : function () { this.button.disabled = true; },
        enableButton  : function () { this.button.disabled = false; }
    };

    Mediator.addListener("data-request", A.getData.bind(A));
    Mediator.addListener("data-received", B.showData.bind(B));
    Mediator.addListener("data-received", C.enableButton.bind(C));

    C.button.addEventListener("click", C.getRequest.bind(C), false); 
```

所以现在你有 3 个彼此一无所知的类，每个都有自己的特殊目的，他们对“彼此”的唯一期望是事件名称和数据类型是适当的。

他们***都***知道`Mediator`。
如果您希望 Mediator 被进一步抽象，那么您可以在制作课程时传递对它的引用：

```
function A (param1, param2) {
    var emitter = null;
    this.setEmitter = function (myEmitter) { emitter = myEmitter; };
    this.emit = function (evt, data) {
        if (!emitter) { return; }
        emitter.emit(evt, data);
    };
    this.subscribe = function (evt, callback) {
        if (!emitter) { return; }
        emitter.addListener(evt, callback);
    };
    /* rest of the object */
};

var a = new A();
var b = new A();

a.setEmitter(Mediator);
a.subscribe("some-evt", a.doSomething.bind(a));

b.setEmitter(Mediator);
b.subscribe("other-evt", b.doSomethingElse.bind(b));

a.emit("other-evt", { /* data */ }); 
```

`a`并且`b`根本不必是同一个班级。
现在他们***确实***以你想象的方式工作。两者都
使用依赖注入（“控制反转”）指向同一个发射器（ .`Moderator``Moderator`

# geometry - 如何以一般方程的形式找到两条线的交点？

> ID：13244666
> 
> 赞同：2
> 
> 时间：2012-11-06T05:01:45.723
> 
> 标签：geometry

如果我有六个变量代表一般方程形式的两条线（ax + by + c = 0）。例如：

```
ax + by + c = 0
jx + ky + l = 0 
```

如何从六个变量中找到交点（x 和 y）[假设有一个]？

PS。任何关于非常简单的计算几何信息的良好来源的建议，例如这样，将不胜感激。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-06T05:11:13.937

交点满足两个方程。所以你只需要同时解决它们：

```
ax + by + c = 0    (*j)
jx + ky + l = 0    (*a)

ajx + bjy + cj = 0   (-)
ajx + aky + al = 0

(bj-ak)y + cj - al = 0

y = (al-cj) / (bj-ak) 
```

对于 x 也是如此。（或者您可以将找到的值替换为任何原始方程中的 y，然后找到 x）：

```
x = (ck-bl) / (bj-ak) 
```

# jquery - 窗口调整大小事件在 jQuery 中触发两次

> ID：13244667
> 
> 赞同：7
> 
> 时间：2012-11-06T05:01:53.823
> 
> 标签：jquery

我运行了下面的代码

```
$(document).ready(function() {

    var ivar = 0;

    $(window).resize(function() {
        console.log('$(window).height() ' + $(window).height() + ' - ' + ++ivar);
    });
});​ 
```

每当我调整大小时，我发现事件触发了两次，即计数器“ivar”增加了两次。

谁能告诉我在调整大小事件中发生了什么使计数器增加两次

*** *编辑： 1\. 我通过双击窗口栏来调整窗口大小。

* * *

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-06T05:08:02.523

这是众所周知的问题。在某些浏览器中，调整大小会被调用两次。我们可以创建计时器，这样它只会在用户停止调整窗口大小时调用我们的函数。以下是您的操作方法：

```
var globalTimer = null;

$(window).resize(function() {
    clearTimeout(globalTimer);
    globalTimer = setTimeout(doneResize, 500);
});

function doneResize(){
  console.log('$(window).height() ' + $(window).height() + ' - ' + ++ivar);   
}​ 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-06T05:20:57.597

`resize`每当窗口调整大小时都会触发该事件。无法保证触发事件的频率。浏览器可能决定在鼠标光标拖动角落时立即触发调整大小，并一直这样做，直到释放鼠标，以便它可以连续重绘内容。最后一个事件是释放鼠标按钮时计数的事件。

如果通过双击最大化浏览器窗口，甚至可能发生这种情况。操作系统可能决定为窗口内容设置动画，向浏览器触发多个调整大小事件。想要准确重绘的浏览器可能会进一步传播事件，从而即使动画非常快也会导致双重调整大小。

正如[Kir Ivlev](https://stackoverflow.com/users/1796666/kir-ivlev)建议的那样，您可以在每次调整大小后稍等片刻，看看是否会发生另一个调整大小。如果是，请延长等待（停止等待并再次等待）

# git - Trac 1.0 无法浏览 Git 存储库的源代码

> ID：13244668
> 
> 赞同：5
> 
> 时间：2012-11-06T05:01:54.977
> 
> 标签：git, trac

我在使用新的 Trac 1.0 时遇到了很多关于 git 的问题。我已将 Trac 从 0.12 更新到 1.0。新版本的 Trac 现在带有原生 git 支持，但我没有看到该`Browse Source`选项卡。git 存储库和 trac 安装位于同一台服务器上。我遵循了这个：[TracGit](http://trac.edgewall.org/wiki/TracGit)。

正如指南所建议的，我已将这些行添加到我的 trac.ini 文件中：

```
[trac]
...
repository_type = git
repository_dir = /home/gituser/repositories/myproject.git
repository_sync_per_request = 

...

[git]
cached_repository = false
git_bin = /usr/bin/git
git_fs_encoding = utf-8
persistent_cache = false
# projects_base = <inherited>
# projects_list = <inherited>
# projects_url = <inherited>
shortrev_len = 7
trac_user_rlookup = false
use_committer_id = true
use_committer_time = true
wikishortrev_len = 40

[components]
tracopt.versioncontrol.git.* = enabled 
```

现在，如果我转到管理页面-> 存储库，我会看到管理存储库屏幕。从这里，我看到我列出了一个链接，其中包含 /home/gituser/repositories/myproject.git 的目录路径。和`Name`都出于某种原因`Type`设置`default`为（我不知道如何在 trac.ini 中更改它）。如果我单击链接，我可以更详细地查看存储库。但是，它是只读的，我看到了这个注释：

```
Note: This repository is defined in trac.ini and cannot be edited on this page. 
```

如果我尝试使用管理网页使用同一目录创建新存储库，则会收到一条错误消息，提示我需要使用完整路径。

如果我尝试通过手动输入“http://myproject/browser”来访问 trac 存储库浏览器，我会收到这个奇怪的错误：

```
/home/gituser/repositories/myproject.git does not appear to be a Git repository 
```

问题是，那个 git 存储库肯定存在。我可以看到与该存储库关联的所有文件，例如分支和钩子文件夹。而且我可以很好地推拉终端。

myproject trac 日志文件夹中没有文件，所以我什至无法检查日志是否有问题。

所以看起来有两个问题：

*   为什么“浏览源”选项卡根本不显示（或者由于第二个问题而没有显示）？

*   为什么Trac认为git项目不存在时它不存在？

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T16:28:50.990

您没有看到“浏览源代码”选项卡，因为 Trac 没有可供您浏览的存储库（据它所知）。解决“似乎不是 Git 存储库”问题应该使“浏览”选项卡按预期显示。

如果你能得到 Trac 的日志文件，这个问题会更容易解决。在 Trac 的管理页面上，确保 Trac 设置为记录到文件，日志级别设置为“调试”，并且 Web 服务器使用的用户帐户具有对日志文件文件/文件夹的写入权限。

您提到您正在使用从 0.12 升级到 1.0 的 Trac 安装。升级时，您是否完全禁用并删除了 git 插件？如果您的服务器仍在加载旧插件或其任何配置文件，则认为这会干扰 Trac 的本机 git 支持并非没有道理。

我假设这与您之前在 0.12 中使用的存储库相同？如果没有，请确保您的 Web 服务器的用户帐户有权访问您的 git 存储库所在的文件夹。

您可能还想尝试设置一个新的 Trac 环境（没有插件）并测试它是否可以访问您的存储库。这将消除升级过程可能导致的任何问题。如果需要，您始终可以将所有内容和数据迁移到新环境。

# android - 如何制作像 Flipboard 这样的应用程序？

> ID：13244675
> 
> 赞同：7
> 
> 时间：2012-11-06T05:02:15.150
> 
> 标签：android

[我想像这样](https://play.google.com/store/apps/details?id=flipboard.app&feature=search_result#?t=W251bGwsMSwxLDEsImZsaXBib2FyZC5hcHAiXQ)在 android 上制作一个类似于 Flipboard 的应用程序。我正在使用 gridview 来显示图库图像，但它不适用。我怎样才能做到这一点？我也想应用页面卷曲和翻转。因为页面卷曲和翻转。

我必须在翻转板上实现卷曲效果，请任何人指导我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T07:10:45.493

您可以使用 ViewFlipper 或 viewPager API 来实现它。ICS 以上支持 ViewPager API。但是，对于情人版本，您可以使用 android.support-v4 库。

对于 View Flipper，您可以使用动画进行翻转。

**ViewFlipper 源代码::**

```
 import android.app.Activity;
    import android.os.Bundle;
    import android.view.GestureDetector;
    import android.view.MotionEvent;
    import android.view.Window;
    import android.view.WindowManager;
    import android.view.ViewGroup.LayoutParams;
    import android.view.animation.AnimationUtils;
    import android.widget.ImageView;
    import android.widget.ViewFlipper;

     public class ViewFlipperActivity extends Activity implements  android.view.GestureDetector.OnGestureListener {
/** Called when the activity is first created. */
private int[] imageID = { 
        R.drawable.a01, R.drawable.a02, 
        R.drawable.a03, R.drawable.a04, 
        R.drawable.a05, R.drawable.a06, 
        R.drawable.a07, R.drawable.a08, 
        R.drawable.a09, R.drawable.a010, 
        R.drawable.a011
          };
private ViewFlipper viewFlipper = null;  
private GestureDetector gestureDetector = null;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    //Remove title bar
    this.requestWindowFeature(Window.FEATURE_NO_TITLE);
    //Remove notification bar
    this.getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN);
    setContentView(R.layout.main);
    viewFlipper = (ViewFlipper) findViewById(R.id.viewflipper); 
    // gestureDetector Object is used to detect gesture events
    gestureDetector = new GestureDetector(this); 
    for (int i = 0; i < imageID.length; i++)  
    { 
        ImageView image = new ImageView(this);  
        image.setImageResource(imageID[i]);  
        image.setScaleType(ImageView.ScaleType.FIT_XY);
        viewFlipper.addView(image, new LayoutParams(  
                LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT));
    }
}
public boolean onDown(MotionEvent arg0) {
    // TODO Auto-generated method stub
    return false;
}
public boolean onFling(MotionEvent arg0, MotionEvent arg1, float arg2,
        float arg3) {
    // TODO Auto-generated method stub
    if (arg0.getX() - arg1.getX() > 120)  
    {  

        this.viewFlipper.setInAnimation(AnimationUtils.loadAnimation(this,  
                R.anim.push_left_in));  
        this.viewFlipper.setOutAnimation(AnimationUtils.loadAnimation(this,  
                R.anim.push_left_out));  
        this.viewFlipper.showNext();  
        return true;  
    }
    else if (arg0.getX() - arg1.getX() < -120)  
    {  
        this.viewFlipper.setInAnimation(AnimationUtils.loadAnimation(this,  
                R.anim.push_right_in));  
        this.viewFlipper.setOutAnimation(AnimationUtils.loadAnimation(this,  
                R.anim.push_right_out));  
        this.viewFlipper.showPrevious();  
        return true;  
    }  
    return true;
}
public void onLongPress(MotionEvent arg0) {
    // TODO Auto-generated method stub

}
public boolean onScroll(MotionEvent arg0, MotionEvent arg1, float arg2,
        float arg3) {
    // TODO Auto-generated method stub
    return false;
}
public void onShowPress(MotionEvent arg0) {
    // TODO Auto-generated method stub

}
public boolean onSingleTapUp(MotionEvent arg0) {
    // TODO Auto-generated method stub
    return false;
}
@Override  
public boolean onTouchEvent(MotionEvent event)  
{  
    return this.gestureDetector.onTouchEvent(event);  
}
 } 
```

**查看 Flipper XML 布局：**

```
 <ViewFlipper  
    android:id="@+id/viewflipper"  
    android:layout_width="fill_parent"  
    android:layout_height="fill_parent"/>

     </LinearLayout> 
```

**ViewPager 源代码::**

```
 import android.app.Activity;
    import android.content.Context;
    import android.os.Bundle;
    import android.os.Parcelable;
    import android.support.v4.view.PagerAdapter;
    import android.support.v4.view.ViewPager;
    import android.view.Menu;
    import android.view.View;
    import android.widget.ImageView;

  public class MainActivity extends Activity  {

private ViewPager viewPager;
private static int NUM_AWESOME_VIEWS = 20;
private Context cxt;
private pageradapter adapter;;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    cxt = this;

    adapter = new pageradapter();
    viewPager = (ViewPager) findViewById(R.id.viewpager);
    viewPager.setAdapter(adapter);
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}
      private class pageradapter extends PagerAdapter{

    @Override
    public int getCount() {
        return NUM_AWESOME_VIEWS;
    }

    /**
     * Create the page for the given position.  The adapter is responsible
     * for adding the view to the container given here, although it only
     * must ensure this is done by the time it returns from
     * {@link #finishUpdate()}.
     *
     * @param container The containing View in which the page will be shown.
     * @param position The page position to be instantiated.
     * @return Returns an Object representing the new page.  This does not
     * need to be a View, but can be some other container of the page.
     */
    @Override
    public Object instantiateItem(View collection, int position) {
        ImageView iv = new ImageView(cxt);
        iv.setBackgroundResource(R.drawable.a01);
        ((ViewPager) collection).addView(iv,0);

        return iv;
    }

    /**
     * Remove a page for the given position.  The adapter is responsible
     * for removing the view from its container, although it only must ensure
     * this is done by the time it returns from {@link #finishUpdate()}.
     *
     * @param container The containing View from which the page will be removed.
     * @param position The page position to be removed.
     * @param object The same object that was returned by
     * {@link #instantiateItem(View, int)}.
     */
    @Override
    public void destroyItem(View collection, int position, Object view) {
        ((ViewPager) collection).removeView((ImageView) view);
    }

    @Override
    public boolean isViewFromObject(View view, Object object) {
        return view==((ImageView)object);
    }

    /**
     * Called when the a change in the shown pages has been completed.  At this
     * point you must ensure that all of the pages have actually been added or
     * removed from the container as appropriate.
     * @param container The containing View which is displaying this adapter's
     * page views.
     */
    @Override
    public void finishUpdate(View arg0) {}

    @Override
    public void restoreState(Parcelable arg0, ClassLoader arg1) {}

    @Override
    public Parcelable saveState() {
        return null;
    }

    @Override
    public void startUpdate(View arg0) {

    }

}

 } 
```

**viewPager XML 布局::**

```
 <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
     xmlns:tools="http://schemas.android.com/tools"
     android:layout_width="match_parent"
      android:layout_height="match_parent" >

 <android.support.v4.view.ViewPager
android:id="@+android:id/viewpager"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
/>

  </RelativeLayout> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-06T05:08:41.430

不确定布局，但这个页面翻转动画教程可能会有所帮助：

[http://openaphid.github.com/blog/2012/05/21/how-to-implement-flipboard-animation-on-android/](http://openaphid.github.com/blog/2012/05/21/how-to-implement-flipboard-animation-on-android/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-21T14:29:38.023

如果有人从接受的答案中使用库并且需要在没有滑动手势的情况下翻页（例如实现下一个和上一个按钮）可以使用我为自己做的方法。我花了一段时间来弄清楚图书馆是如何工作的，所以我认为它会有所帮助。

将此添加到 FlipCards.java

```
 protected void flipToNextCard()
  {
      if(accumulatedAngle >= (maxIndex-1)*180 || state != STATE_INIT)
          return;

      controller.showFlipAnimation();
      forward = true;
      setState(STATE_AUTO_ROTATE);
      controller.getSurfaceView().requestRender();
  }

  protected void flipToPreviousCard()
  {
      if(accumulatedAngle <= 0 || state != STATE_INIT)
          return;

      controller.showFlipAnimation();
      forward = false;
      swapCards();
      frontCards.resetWithIndex(backCards.getIndex() - 1);
      controller.flippedToView(getPageIndexFromAngle(accumulatedAngle-1), false);
      setState(STATE_AUTO_ROTATE);
      controller.getSurfaceView().requestRender();
  } 
```

这就是 FlipViewController.java

```
 public void flipToNextView()
  {
      cards.flipToNextCard();
  }

  public void flipToPreviousView()
  {
      cards.flipToPreviousCard();
  } 
```

# regex - 使用 Perl 删除注释

> ID：13244677
> 
> 赞同：3
> 
> 时间：2012-11-06T05:02:19.937
> 
> 标签：regex, perl

是否有任何正则表达式能够从 perl 中的给定 C 程序中删除 // 和 /**/ 种类的所有注释？

给定多行程序，它应该使用正则表达式来删除注释并返回未注释掉的部分。

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-06T08:03:49.557

尝试[`Regexp::Common::comment`](http://search.cpan.org/dist/Regexp-Common/lib/Regexp/Common/comment.pm)：

```
 use Regexp::Common qw /comment/;
  while (<>) {
        s/($RE{comment}{C++})//;
  } 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-06T08:22:55.833

这是一个[常见问题解答](http://faq.perl.org)：

[如何使用正则表达式从文件中去除 C 风格的注释？](http://perldoc.perl.org/perlfaq6.html#How-do-I-use-a-regular-expression-to-strip-C-style-comments-from-a-file?)

# android - android源码安装驱动参考

> ID：13244679
> 
> 赞同：1
> 
> 时间：2012-11-06T05:02:35.663
> 
> 标签：android, linux-device-driver, kernel, android-source

我有带有内核的android源代码。我想在源代码中添加或删除驱动程序。就像在源代码中添加相机驱动，BT（蓝牙）设备驱动并制作代码一样。从哪里开始。有人指导我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T05:00:36.587

那么AFAIK有两件事你需要在这里决定。

1.  您应该将驱动程序代码放在源代码树中的哪个位置：
    以相机驱动程序为例。例如，驱动程序代码可以放在驱动程序/媒体/视频/中。（我使用的 qualcomm 芯片组将它放在源代码中的 drivers/media/video/msm/ 文件夹中）。这里还有一件事要记住。可能还需要将与相机相关的代码放在板文件中。
2.  选择用于驱动程序的配置并构建内核在这里您需要编辑与您的设备相关的配置文件（在arch/arm/configs/下）。通过将其等同于“y”或“m”来选择与您的驱动程序相关的配置选项，如下所示：

> CONFIG_CAMERA_XXX=y //只是一个例子。为您的驱动程序选择正确的配置选项

这样，您的相机驱动程序将成为内核映像的一部分。否则，您也可以将其设置为“=m”并将其编译为可以在运行时插入/删除的模块。

# magento - 如何使用 Magento_Payment_Block_Info 捕获结帐页面上的 POST

> ID：13244686
> 
> 赞同：1
> 
> 时间：2012-11-06T05:03:22.333
> 
> 标签：magento, magento-1.6

如何使用 Magento_Payment_Block_Info 捕获结帐页面上的 POST？

```
class Ks_Gippayment_Block_Info extends Mage_Payment_Block_Info
{

protected function _construct()
{
    parent::_construct();
    $this->setTemplate('ks/info.phtml');
}
public function getSomePostData()
{

    //****direct get POST/GET data from onepage checkout
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T07:14:24.587

您可以通过使用类来使用此方法

```
public function getSomePostData()
{

if(isset ($_POST['submit']))
    {
        $name=$_POST['firstname'];
       /**like that**/

    }

} 
```

或者你可以`function`从`button click`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T08:19:38.483

尝试

```
public function getSomePostData()
{
    //****direct get POST/GET data from onepage checkout
    if(Mage::app()->getRequest()->getPost('firstname')){  
    }
} 
```

请参阅[Zend 框架：我可以只获取 GET 参数吗？](https://stackoverflow.com/questions/3830856/zend-framework-can-i-just-get-get-params)

# jquery - 使用 jQuery 扩展命名空间有多糟糕？

> ID：13244697
> 
> 赞同：2
> 
> 时间：2012-11-06T05:04:01.510
> 
> 标签：jquery, namespaces

据我所知，在当前项目中，开发人员使用 jQuery 扩展来处理命名空间。这有多糟糕？

```
var my = $.extend({}, {
    itemone: 0
}

$.extend(my, {
    init: function() {}
}

$(function() {
    my.init();
})(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T05:42:20.400

在您发布的简单示例代码中，您实际上并不需要使用`$.extend`，但总的来说，我不会说使用 jquery`$.extend`来帮助命名空间是“不好的”。请参阅[这篇](http://addyosmani.com/blog/essential-js-namespacing/)关于 javascript 命名空间模式的文章。

根据作者的说法，使用“扩展”或“深度对象扩展”被认为是一种高级命名空间扩展技术。使用 jQuery`$.extend`使这项技术相当容易，但可能会增加一定的开销。

我从未以这种方式使用过它，但在具有一些复杂/深度命名空间的大型应用程序中，使用`$.extend`可能会有所帮助。我不会加载 jquery 库只是为了使用它的扩展方法。

# java - 在 do-while 循环中清除列表

> ID：13244698
> 
> 赞同：0
> 
> 时间：2012-11-06T05:04:17.907
> 
> 标签：java, android, arraylist, do-while

我正在使用 do-while 循环。在该循环中，我正在检查条件，只要条件失败，就必须清除列表。我正在尝试，但没有得到预期的结果。

```
List<Date> myDateList=new ArrayList<Date>();
int zTmp=0;

do  
{
 if(condition true)
  {
    //do task
  }else{
    myDateList.clear();
   //I wish to clear this list when condition fails
  }
  zTmp++;
}while(zTmp<myList.size()); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T05:07:01.147

我想知道如何在 ListView 上调用 clear()。相反，您应该考虑在 ListView 上设置的 Adapter 上调用 clear。

下面的片段会帮助你。

```
adapter.clear();
adapter.notifyDataSetChanged(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T05:09:49.107

不知道为什么 clear 不起作用......但解决这个问题的方法是分配一个新的对象来列出。`myDateList.clear()`因此，您可以使用`myDateList = new ArrayList<T>()`or代替使用`myDateList = new LinkedList<T>()`。

只是一个疑问：您的病情是否失败过一次？

# crm - 最新绑定的 MS CRM Dynamics - 如何发现所有实体？

> ID：13244699
> 
> 赞同：2
> 
> 时间：2012-11-06T05:04:37.440
> 
> 标签：crm, microsoft-dynamics

我正在构建与 CRM Dynamics 的连接器。我想获取（发现）所有实体及其字段。为此，我将**IOrganizationService**接口与 RetrieveAllEntitiesRequest 一起使用。我确实得到了所有实体名称，但我不知道如何获取任何实体的所有**字段**（列）。

请帮忙...

哈盖

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T10:36:57.960

听起来你快到了。它取自 MSDN 示例：[Dump Attribute Metadata to a File。](http://msdn.microsoft.com/en-us/library/jj603008.aspx)

```
RetrieveAllEntitiesRequest request = new RetrieveAllEntitiesRequest()
{
    EntityFilters = EntityFilters.Attributes,
    RetrieveAsIfPublished = true
};

// Retrieve the MetaData.
RetrieveAllEntitiesResponse response = (RetrieveAllEntitiesResponse)_serviceProxy.Execute(request);

foreach (EntityMetadata currentEntity in response.EntityMetadata)
{
    foreach (AttributeMetadata currentAttribute in currentEntity.Attributes)
    {
        Console.WriteLine("LogicalName: " + currentAttribute.LogicalName);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-09T15:13:27.677

我们需要先`RetrieveAllEntitiesRequest`创建

```
RetrieveAllEntitiesRequest entityRequest = new RetrieveAllEntitiesRequest(); 
```

然后调用`service.execute()`检索结果

有一篇[博客](http://rokhri.com/blog/how-to-get-meta-data-for-all-entities-in-crm-2011-using-ms-crm-2011-api/)文章解释得很好。

# ruby - Ruby：File.open 如何将文件作为参数传递

> ID：13244700
> 
> 赞同：5
> 
> 时间：2012-11-06T05:04:39.533
> 
> 标签：ruby, command-line-arguments

抱歉，这可能是一个菜鸟问题。这个 (economic.rb) 是一个解析一些世界经济数据的脚本。我不确定如何将 xml 文件传递​​给它。通常，要运行它，我会这样做

```
ruby economic.rb 
```

但是， File.open 将 ARGV[0] 作为参数。运行脚本时如何将 xml 文件 ( **data.xml ) 传递到该文件中。**

**经济.rb**

```
require 'rubygems'
require 'nokogiri'

File.open(ARGV[0]) do |f|
  xml_doc = Nokogiri::XML::Document.parse(f)
  countries = xml_doc.css('country')
  most_populous = countries.max_by {|node| node['population'].to_i}
  puts "The most populous country in 1996 was #{most_populous['name']} with a population of #{most_populous['population']}"
  puts
  puts "The five countries with the highest inflation rate in 1996 were:"
  countries.sort_by {|country| -(country['inflation']  || 0).to_f} [0..4].each do |country|
    puts "  #{country['name']} - #{country['inflation']}%"
  end

  continent_info = countries.group_by {|country| country['continent']}
  puts
  puts "The continents and their countries in 1996 were:"
  continent_info.keys.sort.each do |continent|
    continent_info[continent].sort_by {|country|
       country['name']}.each do |country|
      puts "  #{country['name']}"
    end
  end 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-06T05:16:50.410

你可以运行：

```
ruby economic.rb data.xml 
```

# tumblr - 如何阻止导航栏滚动我的帖子？

> ID：13244703
> 
> 赞同：1
> 
> 时间：2012-11-06T05:05:04.787
> 
> 标签：tumblr

博客： http: [//mattdomchristom.tumblr.com](http://mattdomchristom.tumblr.com)

如您所见，当您向下滚动时，顶部的导航栏随之而来，这很烦人。我怎样才能让它留在页面顶部？

这是我的 HTML：

```
<head>

<!--Default Variables-->
<!--Colors-->
<meta name="color:Background" content="#000"/>
<meta name="color:Text" content="#fff"/>
<meta name="color:Post Title" content="#1C1C1C"/>
<meta name="color:Link" content="#8B7D7B"/>
<meta name="color:Link Hover" content="#d8d8d8"/>
<meta name="color:Blog Title" content="#8b0000"/>
<meta name="color:Links Text" content="#e7e7e7"/>
<meta name="color:Links Hover" content="#fff"/>
<meta name="color:Ask Background" content="#838b8b"/>

<!--Images-->
<meta name="image:Background" content""/>
<meta name="image:Sidebar" content=""/>

<!--Options-->
<meta name="if:Infinite Scrolling" content=""/>
<meta name="if:Pagination" content=""/>
<meta name="if:Glitterati Cursor" content=""/>
<meta name="if:Tiny Scrollbar" content=""/>
<meta name="if:Box shadows" content=""/>
<meta name="if:Ask" content=""/>
<meta name="if:Archive" content=""/>

<meta name= "if:Link 1" content="link1"/>
<meta name= "if:Link 2" content="link2"/>
<meta name= "if:Link 3" content="link3"/>
<meta name= "if:Link 4" content="link4"/>

<!--Links-->
<meta name="text:Link 1 URL" content=""/>
<meta name="text:Link 1 name" content=""/>
<meta name="text:Link 2 URL" content=""/>
<meta name="text:Link 2 name" content=""/>
<meta name="text:Link 3 URL" content=""/>
<meta name="text:Link 3 name" content=""/>
<meta name="text:Link 4 URL" content=""/>
<meta name="text:Link 4 name" content=""/>

{block:Description}
<meta name="description" content="{MetaDescription}" />{/block:Description}
<title>
{block:PostSummary}
{PostSummary} - {/block:PostSummary}{Title}</title>

{block:ifinfinitescrolling}<script type="text/javascript" src="http://codysherman.com/tools/infinite-scrolling/code"></script>{/block:ifinfinitescrolling}

</style>

<style type="text/css">

{block:ifGlitteraticursor}
body, a, a:hover {cursor: url(http://media.tumblr.com/tumblr_m10gu8MJ7Z1r869vr.gif), progress;}{/block:ifGlitteraticursor}

{block:iftinyscrollbar}
::-webkit-scrollbar {width: 8px; height: 9px; background :#fff; }
::-webkit-scrollbar-thumb { background-color: #000000; -webkit-border-radius: 0ex; border: 0px #D4D8DB;}
{/block:iftinyscrollbar}

body{
background-color: {color:Background};
background-image: url({image:Background});
background-attachment: fixed;
background-repeat: repeat;
background-position: center;
font-family: helvetica;
font-size: 14px;
line-height: 14px;
letter -spacing:0px;
color:{color:Text};
text-align:justify;
}

a:link, a:active, a:visited{
color: {color:Link};
text-decoration:none;
}
a:hover{
color: {color:Link Hover};
text-decoration:underline;
}

#container {
margin:auto;
position:right;
width:1200px;
color: {color:Title};
_margin-left:10%;
}

#content {
float:center;
width:508px;
padding: 2px;
margin-top: 25px;
margin-left: 300px;
background: clear;
}

#entry {
margin-top:15px;
padding:3px;
background-image: url(http://static.tumblr.com/j4dtzbm/Amxlg5cp4/transparentg.png);
{block:ifboxshadows};
box-shadow: 0px 5px 20px rgba(0,0,0,0.35);
{/block:ifboxshadows}
{block:ifboxborders}
border: 1px solid black;
{/block:ifboxborders}
}

#entry img{
{block:IndexPage}max-width:500px;{/block:IndexPage}
}

#side {
position:fixed !important;
width: 220px;
height: auto;
margin-top: 40px;
margin-left: 500px ;
padding: 2px ;
font-size: 13px;
text-transform: lowercase;
background-image: url(http://static.tumblr.com/j4dtzbm/Amxlg5cp4/transparentg.png);
{block:ifboxshadows};
box-shadow: 0px 5px 20px rgba(0,0,0,0.35);
{/block:ifboxshadows}
}

#side2 {
position:fixed !important;
width: 753px;
height: 30px;
text-transform: uppercase;
font-size: 13px;
background-color:black;
opacity: .8;
margin-top: -20px;
margin-left: -30px ;
padding: 2px ;
}

.navigate a{
color: {color:Links Text};
display:block;
width: 85px;
height: 15px;
text-align: center;
padding-top: 3px;
padding-left: 3px;
margin-left: 0px;
margin-top: 2px;
position: relative;
text-align: center;
z-index: 999;
font-family: helvetica;
font-size: 14px;
display: inline-block;
}
.navigate a:hover{
color: {color:Links Hover};
text-decoration: none;
}

.permalink{
display: block;
padding:1px;
margin-top:0px;
margin-bottom:4px;
font-size: 11px;
text-align: center;
text-transform: uppercase;
}

.blogtitle{
text-transform: uppercase;
font-size: 22px;
line-height: 22px;
color: {color:Blog Title};
}

.posttitle{
font-size: 17px;
line-height: 12px;
text-transform: uppercase;
color: {color:Post Title};
letter-spacing: 1;
font-weight: none;
}

blockquote{
padding:0px 0px 2px 5px;
margin:0px 0px 2px 1px;
border-left: 1px solid {color:Text};}
blockquote p, ul{margin:0px; padding:0px;
}

.chat .line{
margin: 0 0 0px;
padding: 2px;
}
.chat .line.odd{
}

.label {font-weight:bold; color:{color:text}}

.question {
color:{color:Text};
font-size: 10px;
font-weight: normal;
line-height:95%;
background: {color:Ask Background};
margin: 0 0 10px 0;
padding: 10px 15px;
position: relative;
-moz-border-radius:5px; -webkit-border-radius:5px;
}

.questionarrow {
width: 13px;
height: 7px;
font-size:30px;
position: absolute;
color:{color:Ask Background};
bottom: -3.5px;
left: 260px;
}

.asker {width:500px; text-align:left; color:{color:Text};font-family: silkscreen;font-size: 9px;}
.asker a {color:{color:Text};}
.asker img {float:left; margin-left:220px; vertical-align:top; margin-right:3px; max-height:15px;}

a img{border: 0px;}

.p { padding-top: 5px; }
.ol, ul { margin-left: 10px; padding: 5px; }
.ul { list-style-type: square; }

.albumart { margin-bottom: 0px; }
.albumart img, .audio embed { width: 60px; }

.video embed, .post div.video object {width:250px !important; height:187px !important;}

.notes img{width:10px; position:left; top:3px;}

.tags {
width:auto;
solid {color:Links};
font-size: 10px;
text-transform:uppercase;
color:{color:link};
padding:2px;
line-height:1;
margin-left:1px;
}

.tags a:hover{
color: {color:Link Hover};
text-decoration:underline;
}

#pages {
float: center;
width: 753px;
height: 22px;
text-transform: uppercase;
font-size: 14px;
color: {color:Link};
background-color: white;
opacity: .6;
margin-top: 10px;
margin-left: 300px ;
padding: 2px;
padding-top: 6px;
}

{font-size: 100%;}

{CustomCSS}
</style>

<link rel="shortcut icon" href="{Favicon}">

<link rel="alternate" type="application/rss+xml" title="{Title}" href="{RSS}" />

{block:ifinfinitescrolling}<style>#toTop {display:none;text-decoration:none;position:fixed;bottom:20px;right:20px;overflow:hidden;width:30px;height:40px;border:none;text-indent:-999px;background:url(http://static.tumblr.com/hi8vwsz/Q0ull6xz3/totop.png) no-repeat left top;z-index:3000;}#toTopHover {background:url(http://static.tumblr.com/hi8vwsz/Q0ull6xz3/totop.png) no-repeat left -40px;
width:30px;height:40px;display:block;overflow:hidden;float:left;opacity: 0;-moz-opacity: 0;filter:alpha(opacity=0);}
#toTop:active, #toTop:focus {outline:none;}#toTop:active, #toTop:focus {outline:none;}</style>

<script type="text/javascript" src="http://static.tumblr.com/53unaru/kx3lgzker/jquery-1.3.2.min.js" charset="utf-8"></script>
<script type="text/javascript" src="http://static.tumblr.com/53unaru/4jtlgzkf8/easing.js"></script>
<script type="text/javascript" src="http://static.tumblr.com/53unaru/y8wlgzkbt/jquery.ui.totop.js"></script>
<script type="text/javascript">
$(document).ready(function() {
$().UItoTop({ easingType: 'easeOutQuart' });
});
</script>{/block:ifinfinitescrolling}

</head>
<body>
<div id="container">
<div id="content">
<div id="side2">

<div class="navigate">

<a href="/" >home</a>
{block:ifAsk}
<a href="/ask" >message</a>
{/block:ifAsk}

{block:iflink1}
<a href="{text:Link 1 URL}">{text:Link 1 name}</a>
{/block:iflink1}
{block:iflink2}
<a href="{text:Link 2 URL}">{text:Link 2 name}</a>
{/block:iflink2}
{block:iflink3}
<a href="{text:Link 3 URL}">{text:Link 3 name}</a>
{/block:iflink3}
{block:iflink4}
<a href="{text:Link 4 URL}">{text:Link 4 name}</a>
{/block:iflink4}
<a href="/archive" >archive</a>
<a href="http://sociallyawkwardgiraffe.tumblr.com/" >Theme</a>
</div>
</div>
</center>

<div id="side">

<center>
<div class="blogtitle"><a href="/">{Title}</a></div>
</center>
<br>

<a href="/"><img src="{image:sidebar}" width=220px></a>

{Description}

</div>

</div>

</div>

<div id="content">
{block:Posts}
<div id="entry">

<center>
{block:IndexPage}
<div class="permalink" style="letter-spacing:1px;"><l><a href="{Permalink}"> {Month} {DayOfMonth}, {Year} • {NoteCountWithLabel}</a><a href="{ReblogURL}" target="_blank" class="details"> • Reblog</a></l>
</div>
{/block:IndexPage}
</center>

{block:Text}
{block:Title}<span class="posttitle">{Title}</span>
{/block:Title}<span class="entrytext">{Body}</span>
{/block:text}

{block:Link}
<a href="{URL}" class="posttitle">{Name}</a>{block:Description}{Description}{/block:Description}
{/block:link}

{block:Photo}
{LinkOpenTag}
<a href="{permalink}"><img src="{PhotoURL-500}" alt="{PhotoAlt}" width=500px
{LinkCloseTag}
{block:Caption}{Caption}{/block:Caption}
{/block:Photo}

{block:Photoset}<center>{Photoset-500}</center>
{block:Caption}{Caption}{/block:Caption}
{/block:Photoset}

{block:Quote}
<span class="title">{Quote}</span>
{block:Source}<i> - {Source}</i>{/block:Source}<br>
{block:Caption}{Caption}{/block:Caption}
{/block:Quote}

{block:Chat}
{block:title}<div id="posttitle"><center>{Title}<br></center></div>
{/block:title}<div class="chat">
{block:Lines}<div class="chat"><div class="line {Alt}"><div class="{Alt} user_{UserNumber}">
{block:Label}<span class="label"><b>{Label}</b></span>
{/block:Label}{Line}</div>
</div></div>{/block:Lines}</div>{/block:Chat}

{block:Audio}
{block:albumart}<div class="albumart"><img src="{albumarturl}" align="left"></div>
{/block:albumart}<div style="width: 310px; height: 20px;">
{AudioPlayerblack}</div><BR>{block:TrackName}<span><strong>Title</strong>:
{TrackName}</span>{/block:TrackName}<br>
{block:Artist}<span><strong>Artist:</strong>
{Artist}</span>{/block:Artist}<br>
{/block:Audio}

{block:Video}<center>{Video-500}<BR>
</center>{block:Caption}{Caption}{/block:Caption}{/block:Video}

{block:Answer}
<div class="question">
<div class="questionarrow">▼&lt;/div>
{Question}
</div>
<div class="asker"><img src="{AskerPortraitURL-24}">{Asker}</div>
<div class="answer">{Answer}</div>
{/block:answer}

{block:HasTags}<div class="tags"> tags: {block:Tags}<a href="{TagURL}" target="_blank">#{Tag} </a>{/block:Tags}</div>{/block:HasTags}
</center>

{block:PostNotes}{PostNotes}
{/block:PostNotes}</div>{/block:Posts}

</center>
</div>
<div id="pages">
{block:ifpagination}
<center>
{block:PreviousPage}<a href="{PreviousPage}" title="newer">&larr;</a>{/block:PreviousPage} {CurrentPage} of {TotalPages} {block:NextPage}<a href="{NextPage}" title="older">&rarr;</a>
{/block:NextPage}

{/block:ifpagination}
<center>
</center>
</div>

</div></div>
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T19:06:24.117

在自定义屏幕的自定义 CSS 框中，输入以下内容：

```
#side2 {
  position: relative!important;
} 
```

# java - 在 Java Swing 应用程序中嵌入 Log4j 和 AOP 以记录异常

> ID：13244710
> 
> 赞同：0
> 
> 时间：2012-11-06T05:05:31.873
> 
> 标签：java, swing, exception-handling, log4j, aop

我正在使用 NetBeans 中的 Java Swing 为行业开发 ERP。我想记录使用[log4J](http://logging.apache.org/log4j/1.2/manual.html)引发的异常！和[AOP](http://blog.octo.com/en/aop-and-swing-a-smart-association/)。我做了很多搜索，但没有得到 AOP 与基于 Swing 的应用程序的集成，因为大多数示例都是针对 web 框架工作（例如 Spring）。非常感谢提前。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T09:14:28.537

我看不到你的问题。Swing 与否，您只是在使用 Java 类。如果您可以将[AspectJ](http://www.eclipse.org/aspectj/)应用于其他 Java 类，那么您也可以将其应用于 Swing 类。试一试吧，一旦您了解了基本概念，使用 AspectJ 的 AOP 就会非常有趣。如果您有具体问题，我会很乐意提供帮助。

* * *

**更新：**好的，我刚刚有一些空闲时间，并使用了一些[示例代码](http://www.javapractices.com/topic/TopicAction.do?Id=231)为您编写了一个快速演示。

抛出两个 RuntimeExceptions 的最小 Swing 示例，一个在创建主窗口期间，另一个在您单击弹出对话框中的“确定”时：

```
import java.awt.event.*;
import javax.swing.*;

public final class MinimalSwingApplication {
    public static void main(String... aArgs) {
        MinimalSwingApplication app = new MinimalSwingApplication();
        app.buildAndDisplayGui();
    }

    private void buildAndDisplayGui() {
        JFrame frame = new JFrame("Main window");
        buildContent(frame);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.pack();
        frame.setVisible(true);
    }

    private void buildContent(JFrame aFrame) {
        JPanel panel = new JPanel();
        panel.add(new JLabel("Hello"));
        JButton ok = new JButton("Show pop-up dialog");
        ok.addActionListener(new ShowDialog(aFrame));
        panel.add(ok);
        aFrame.getContentPane().add(panel);
        throw new RuntimeException("Oops!");
    }

    private static final class ShowDialog implements ActionListener {
        private JFrame fFrame;

        ShowDialog(JFrame aFrame) {
            fFrame = aFrame;
        }

        public void actionPerformed(ActionEvent aEvent) {
            JOptionPane.showMessageDialog(fFrame, "I am the a pop-up dialog");
            throw new RuntimeException("Something unexpected happened here");
        }
    }
} 
```

记录异常的示例方面（使用 JDK 日志记录，但您可以轻松切换到 Log4J）：

```
import java.util.logging.*;

public aspect SwingExceptionLogger {
    static Logger logger = Logger.getLogger(SwingExceptionLogger.class.getName());

    Object around() : execution(* MinimalSwingApplication..*(..)) {
        try {
            return proceed();
        } catch (Exception e) {
            logger.log(Level.WARNING, "Swing exception: " + e.getMessage());
            return null;
        }
    }
} 
```

启动应用程序和打开/关闭弹出对话框两次的示例输出：

```
10.11.2012 09:42:28 MinimalSwingApplication buildContent_aroundBody5$advice
WARNUNG: Swing exception: Oops!
10.11.2012 09:42:33 MinimalSwingApplication$ShowDialog actionPerformed_aroundBody1$advice
WARNUNG: Swing exception: Something unexpected happened here
10.11.2012 09:42:37 MinimalSwingApplication$ShowDialog actionPerformed_aroundBody1$advice
WARNUNG: Swing exception: Something unexpected happened here 
```

如果这是您想要的，您始终可以优化切入点以仅记录来自 AWT/Swing 线程的内容。您也可以重新抛出异常而不是吞下它。随意尝试或询问。

# jsp - 在 oracle 10g 中发送电子邮件

> ID：13244712
> 
> 赞同：0
> 
> 时间：2012-11-06T05:05:47.127
> 
> 标签：jsp, jdbc

嗨，我有 2 个表，它们的输出如下

```
table1:
userID Email address
Rakesh rakesh.k@xyz.com
hari   hari.m@xyz.com
abc    abc@xyz.com

table2:

subject1
subject2
subject3 
```

我想要一个查询从 abc（我以 abc 登录我的网站）发送一封电子邮件到 Rakesh 或 hari（基于我从 jsp 中的选择），主题是表 2 中的任何一个，它应该附加字符串“重新分配”

请帮我坦克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T06:18:48.433

要从数据库发送电子邮件，您需要有一个使用`UTIL_SMTP`或其他一些电子邮件协议的程序。对于`UTIL_SMTP`创建一个过程如下

```
 create or replace PROCEDURE send_mail (P_SENDER in varchar2,
                     P_RECIPIENT in varchar2,
                     P_CC in varchar2,
                     P_SUBJECT   in varchar2,
                     P_MESSAGE   in varchar2) is

mailhost varchar2(30) := 'xxx.xxx.xx.xx';
mail_conn utl_smtp.connection;
crlf varchar2(2) := CHR(13)||CHR(10);
mesg varchar2(4000);
BEGIN
  mail_conn := utl_smtp.open_connection(mailhost,25);
  mesg := 'Date: '||to_char(sysdate,'dd Mon yy hh24:mi:ss' )||crlf||
          'FROM: '||P_SENDER||'>'||crlf||'Subject: '||P_SUBJECT||crlf||
          'To: '||P_RECIPIENT||crlf||
          'Cc: '||P_CC||crlf||crlf||P_MESSAGE;
  utl_smtp.helo(mail_conn,mailhost);
  utl_smtp.mail(mail_conn,P_SENDER);
  utl_smtp.rcpt(mail_conn,P_RECIPIENT);
  utl_smtp.rcpt(mail_conn,P_CC);
  utl_smtp.data(mail_conn,mesg);
  utl_smtp.quit(mail_conn);
END send_mail;
/ 
```

您可以从系统管理员处获取`SMTP_HOST`和获取。`SMTP_PORT`SMTP_PORT 默认为 25。一旦你有了，你可以执行你的程序

```
exec send_mail('abc@xyz.com',
            'rakesh.k@xyz.com',
            'hari.k@xyz.com',
            '<Your subject>',
            '<Your message>'); 
```

如果要调用从 JSP 发送电子邮件的过程，您可以调用该过程并将参数从 JSP 传递给您的过程。如果您想使用 select 语句发送电子邮件，请将您的过程包装在一个函数中并将函数执行为

```
select <yourfunction(params)> from dual 
```

# openstack - 如何在 nova-manage 命令的帮助下删除重复服务？

> ID：13244716
> 
> 赞同：2
> 
> 时间：2012-11-06T05:06:29.620
> 
> 标签：openstack, openstack-nova

我安装了openstack。所有服务都运行成功。

```
[root@test ~]# nova-manage service list
Binary           Host                                 Zone             Status     State Updated_At
nova-cert        localhost.localdomain                nova             enabled    :-)   2012-11-06 04:25:36.396817
nova-scheduler   localhost.localdomain                nova             enabled    :-)   2012-11-06 04:25:41.735192
nova-network     compute                              nova             enabled    :-)   2012-11-06 04:25:42.109157
nova-compute     compute                              nova             enabled    :-)   2012-11-06 04:25:43.240902 
```

之后，我更改`HOSTNAME`为. 然后重启服务。现在我得到了服务的重复条目。`/etc/sysconfig/network``myhost.mydomain`

```
[root@test ~]# nova-manage service list
Binary           Host                                 Zone             Status     State Updated_At
nova-cert        localhost.localdomain                nova             enabled    XXX   2012-11-06 04:25:36.396817
nova-cert        myhost.mydomain                      nova             enabled    :-)   2012-11-06 05:25:36.396817
nova-scheduler   localhost.localdomain                nova             enabled    XXX   2012-11-06 04:25:41.735192
nova-scheduler   myhost.mydomain                      nova             enabled    :-)   2012-11-06 05:25:41.735192
nova-network     compute                              nova             enabled    :-)   2012-11-06 04:25:42.109157
nova-compute     compute                              nova             enabled    :-)   2012-11-06 04:25:43.240902 
```

从这些服务中，旧服务没有运行。

我想删除 host 的服务`localhost.localdomain`。

我检查了`nova-manage service --help`但没有删除选项:(。

```
[root@test ~]# nova-manage service --help
--help does not match any options:
        describe_resource
        disable
        enable
        list 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T22:53:27.487

查看上面的示例，我怀疑您看到的是重复的，因为您有两个主机名设置相同的主机。如果是这种情况，以下代码/答案不太可能对您有太大帮助。在整个设置中有一个隐含的假设，即运行 nova 工作进程的节点的主机名将是唯一的。

在最新的分支中，没有为此明确启用的命令，但 API 存在于下面以执行您的任务。这是一段代码（未经测试！），应该可以满足您的要求；或者如果您有兴趣，至少将您指向相关的 API。

```
from nova import context
from nova import db

hostname = 'some_hostname'
service_name = 'nova_service_you_want_to_destroy'

ctxt = context.get_admin_context()
service = db.service_get_by_args(ctxt, hostname, service_name)
#... pick one of these services ... 
#... assign it to 'service'
db.service_destroy(ctxt, service[id]) 
```

注意：这将从数据库中删除该服务，或者如果它不存在（或出现其他问题）则引发异常。如果服务正在运行，预计它将再次“显示”，因为服务列表由各种 nova 工作代理进程报告。

# mysql - MYSQL中SQL函数DateFirst的等价物

> ID：13244726
> 
> 赞同：0
> 
> 时间：2012-11-06T05:07:01.997
> 
> 标签：mysql

SQL中有一个叫做datefirst的函数，可以让你设置一周的第一天应该是什么。那么Mysql中有没有等价的函数呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T05:15:39.963

看看 WEEK (http://dev.mysql.com/doc/refman/5.1/en/date-and-time-functions.html#function_week) - 来自手册：WEEK() 的两个参数形式使您能够指定星期是从星期日还是星期一开始。

或者，您也可以查看 WEEKDAY (http://dev.mysql.com/doc/refman/5.1/en/date-and-time-functions.html#function_weekday) 或 DAYOFWEEK (http://dev.mysql.com /doc/refman/5.1/en/date-and-time-functions.html#function_dayofweek)

# javascript - JQuery - 如何在没有状态的事件中将方法附加到第二状态？

> ID：13244728
> 
> 赞同：0
> 
> 时间：2012-11-06T05:07:12.303
> 
> 标签：javascript, jquery, html, slidetoggle, slidedown

我正在使用`.slideToggle`JQuery 中的预制方法，我想将一个对象添加`.slideDown`到`.slideToggle`. 即）当我单击一个按钮时，我想将该对象绑定到`.slideDown`事件并“关闭”它。但是我显然不能只是`.add`对象`.slideToggle`。有没有办法专门针对`slideDown`国家？或者我是否必须使用`.slideUp`，`.slideDown`如果我想要特异性的特权？

显然`.slideToggle`是另一个超级简单的 JQuery “让我们看起来像魔术，同时我们将所有`if{`s 和所有其余部分缓存到一个大变量中”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T05:20:54.470

我相信您将不得不放弃使用`.slideToggle()`，但您仍然可以使用[.toggle()的便利](http://api.jquery.com/toggle-event/)

```
$('#some-element').toggle(function() {
  // put slideDown here, along with anything else that should accompany it
}, function() {
  // put slideUp here, etc.
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T16:30:36.677

你总是可以这样做的。这并不比@Justin Ward 的方式好。但它有效

```
$("#some-element").slideToggle(function(){
    if ($(this).is(":visible")) {
        // Do something (showing)
    } else {
        // Do something (not showing)
    }
}); 
```

# jquery - jQuery动画方法隐藏和显示左面板

> ID：13244731
> 
> 赞同：0
> 
> 时间：2012-11-06T05:07:23.970
> 
> 标签：jquery, jquery-animate, show-hide

我正在尝试使用 jQuery 实现简单的动画。这是我的代码：

```
<div>
    <div id="leftPannel" style="height: 500px; width: 200px; background-color: Olive;
        float: left; display: none">
    </div>
    <div id="rest" style="height: 500px; width: 400px; float: left; margin-left: 10px;
        background-color: Purple">
        <input type="button" id="Display" value="Display" /></div>
</div>
<script type="text/javascript">
    $(document).ready(function () {
        $('#Display').click(function () {
            var status = $('#leftPannel').css("display");
            if (status == "none") {
                $('#leftPannel').animate({ display: 'show' }, "slow")
            }
            else {
                $('#leftPannel').animate({ display: 'hide' }, "slow")
            }

        });
    });
</script> 
```

问题是当左侧面板被隐藏时，它会随着点击事件显示。但再次单击它不会再次隐藏。为什么 else 没有执行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T05:16:32.693

尝试这样的事情：

```
$(document).ready(function () {
    $('#Display').click(function () {
        $('#leftPannel').slideToggle();
    });
}); 
```

`.slideToggle()`自从您尝试以来，我就建议了该方法`.animate()`。如果你想要简单的`.show()`and `.hide()`，你也可以使用该`.toggle()`方法。

**更新**：清理一些混乱

如果您正在尝试使用/学习该`.animate()`方法，请尝试使用元素的可见性；您尝试通过获取的方式`.css('display')`。这是一个更好的方法。尝试，

```
$('#Display').click(function () {
    if( $('#leftPannel').is(":visible") ){
        // write animate method if visible
    }
    else{
        // if not visible
    }
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-06T05:35:19.810

你也可以试试这个

```
 $(document).ready(function () {
    $('#Display').click(function () {
          $('#leftPannel').animate({width: 'toggle'});
    });
}); 
```

# javascript - 淘汰赛js中嵌套模板中的动态数据绑定

> ID：13244734
> 
> 赞同：2
> 
> 时间：2012-11-06T05:07:35.063
> 
> 标签：javascript, jquery-plugins, knockout.js, knockout-templating

我正在使用 MVC 框架和淘汰赛 js 组合。我对淘汰赛js有点陌生。我需要通过嵌套剔除模板中的 API 调用动态绑定数据。我没有找到任何方法来做到这一点。

我的嵌套模板是：

```
enter code here
<div data-bind="template: {name: 'ListTemplate', foreach: Data}">
</div>

<script type="text/html" id="ListTemplate">
    <h3>
        Contributions (${ Count })
    </h3>
    <img src=" ${ Image } " />
    <p>
       <span> ${ Name } </span>
       <div data-bind="template: {name: 'goalsTemplate', foreach: goals}"></div>
    </p>
</script>

<script type="text/html" id="goalsTemplate">
    Goal:
    <a href="#"> ${ Goals } </a> Ends on
    <code> ${ Date } </code>
</script> 
```

我的 viewModel 是：

```
var viewModel = {(
    Data: ko.observableArray([]),
    goals: ko.observableArray([])
});

function userData(Count, Image, Name) {
        return {
            Count: ko.observable(Count),
            Image: ko.observable(Image),
            Name: ko.observable(Name)
        };
}

function goalDetail(Goals, Date) {
        return {
            Goals: ko.observable(Goals),
            Date: ko.observable(Date)
        };
}

$(document).ready(function() {
     $.ajax({
            type: "GET",
            url: siteBaseUrl + 'api/Detail',
            dataType: 'json',
            success: function (data) {
                $(data).each(function (index, type) {
                    viewModel.Data.push(new userData(..,..,..));
                });
            },
            error: function (xhr, ajaxOptions, thrownError) {
                alert('error status code:' + xhr.status);
                alert('error message:' + thrownError);
                alert('error details:' + xhr.responseText);
            }
        });
}); 
```

**我应该如何通过数据数组中的函数（goalDetail）绑定目标数组中的数据？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T05:47:39.287

根据我的理解，目标和数据是主视图模型的一部分，您想在 Foreach 绑定中使用父视图模型，在这种情况下，您只需要 $parent 如下

```
<div data-bind="template: {name: 'goalsTemplate', foreach: $parent.goals}"> 
```

# c - fscanf 变量设置不正确。可能 realloc()

> ID：13244735
> 
> 赞同：2
> 
> 时间：2012-11-06T05:08:03.737
> 
> 标签：c, arrays, scanf

当文件 fileIn 的单词正确且按顺序打印时，输出显示所有数组值都是“焦虑”。我的问题可能出在 realloc() 中？

```
 ReadIn = malloc(sizeof(char) * 50);

    while(fscanf(fileIn, "%s", ReadIn) != EOF){
        wordlist = (char **)realloc( wordlist, (numwords + 1) * sizeof(char*));
        printf("%s\n",ReadIn);
        wordlist[numwords] = ReadIn;
        numwords++;
    }

    for(i = 0; i < numwords; i++){
        printf("%d %s\n", i , wordlist[i]);
    } 
```

输出：

```
This
is
a
journey
into
fear
and
anxiety.
0 anxiety.
1 anxiety.
2 anxiety.
3 anxiety.
4 anxiety.
5 anxiety.
6 anxiety.
7 anxiety. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T05:10:44.927

您使每个数组指针指向`ReadIn`缓冲区，该缓冲区将包含读入的最后一个字符串。

您想复制读入的每个字符串：

```
//change: wordlist[numwords] = ReadIn;
wordlist[numwords] = strdup(ReadIn); 
```

`wordlist`完成数组后，您还应该注意释放每个字符串。

如果您的编译器的运行时库没有非标准但通用的`strdup()`功能，那么它很容易实现（或找到公共域版本）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T05:16:44.347

wordlist[numwords] = ReadIn;

在上面的行中，您只是分配“ReadIn”的地址而不是字符串。因此从“ReadIn”中包含的文件中读取的最后一个字符串已被重复打印。

因此，您需要将读取的字符串复制到您的字符串数组中，

strcpy(wordlist[numwords], ReadIn);

# css - 使用 Zen 启动自定义主题

> ID：13244736
> 
> 赞同：2
> 
> 时间：2012-11-06T05:07:56.297
> 
> 标签：css, drupal, drupal-7, drupal-theming, drupal-zen

在尝试为 Drupal 7 创建 Zen 子主题时，我感到很困惑。首先，如果这是一个愚蠢的问题，我很抱歉，但我不是 CSS 专家。

基本上我想为下图所示的导航菜单设置一个固定的高度：（带有主页链接的那个）

![子主题](../Images/494ff222dc651ef65691c2c8f9f2edf7.png)

我尝试了几种方法来实现导航 div 的固定高度（高度：200px，溢出：自动，浮动：左）但是对于所有这些方法，导航 div 与内容重叠。所以基本上问题是为什么会发生这种情况？我怎么能避免呢？非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T07:15:35.343

试试下面的 CSS 代码片段：

```
#nav
{
    height: 200px !important;
}
#nav:after
{
    clear: both;
    content: ".";
    display: block;
    height: 0;
    visibility: hidden;
} 
```

希望这行得通……穆罕默德。

# java - 这里可以使用Java String格式吗

> ID：13244741
> 
> 赞同：2
> 
> 时间：2012-11-06T05:08:09.433
> 
> 标签：java, string-formatting

我有一种情况，我需要在 UI 中显示一个带有一些空格的字符串。这是为了更好的可读性。

例如，如果我的数据是“1234567890”，我想将其显示为“123 456 7890”。我想知道这是否可以使用 Java 的字符串格式方法来完成？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T05:11:15.357

不，您必须实现自己的代码。有关字符串 API，请参见[此处](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T05:27:00.740

我会用replaceAll来做。

```
String test = "1112223333";
System.out.println(test.replaceAll("(.{3})(.{3})(.{4})", "$1 $2 $3")); 
```

这使用匹配任何东西`(.{3})(.{3})(.{4})`的正则表达式。`.{x}`是`{x}`次数。我将它括在括号中`(.{3})`以捕获与 $1、$2 和 $3 匹配的字符串。

所以 $1 = "111", $2 = "222" 和 $3 = "3333"

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T05:16:26.310

看起来您正在尝试格式化电话号码？您可以使用 `DecimalFormat`，定义消息格式并`String[]`使用原始字符串的子字符串制作一个。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-06T05:31:04.523

是的，您可以使用 String.format() 首先您可以将字符串拆分为数组以具有

a[0]="123"

a[1]="456"

a[2]="7890"

然后使用以下

```
String.format("%1$3s %2$3s %3$3s",a ); 
```

# iphone - iPhone中的日期和时间与以前的比较？

> ID：13244742
> 
> 赞同：1
> 
> 时间：2012-11-06T05:08:33.053
> 
> 标签：iphone, objective-c, nsdate

> **可能重复：**
> [如何比较目标 C 中的两个 NSDate 对象](https://stackoverflow.com/questions/8183472/how-to-compare-two-nsdate-objects-in-objective-c)

1--->我是Objective-C的新手并且卡在一个点上。该概念属于预订时段/预订类型，这意味着不能在之前的时间和之前的日期预订时段。我必须将今天的日期与特定日期进行比较，可能小于今天的日期或大于今天的日期。

为了获得当前日期，我已经这样做了：

```
NSDate *date = [NSDate date];
 NSDateFormatter *formatter = nil;
 formatter=[[NSDateFormatter alloc] init];
[formatter setDateFormat:@"yyyy-MM-dd"]; 
```

我有一个日期要与 UItextField 中的今天日期进行比较，该日期也是 yyyy-MM-dd 格式。

现在我必须将今天的日期与 textField 日期进行比较。但我没有得到它..

```
if(textfielddate<currentdate)
{
   NSLog(@"You cannot book a slot at past date);
} 
```

但这里没有比较..

2---> 我需要将 24 小时格式的时间与当前时间（也是 24 小时格式）进行比较。

我在字符串变量 12:00,11:00,15:00 等中有一个特定时间。现在我需要将其与 24 小时格式的当前时间进行比较。

```
if([time <= currenttime] && [textFielddate==currentdate])
{
    NSLog(@"You cannot book a slot at past time ");
} 
```

我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T05:18:04.760

最好的方法是使用 NSCompariosnResult

[日期1比较：日期2]；

然后检查是升序还是降序或相等。

问候迪帕克

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T06:18:49.620

用于检查在 UITextField 中输入的日期是否是以前的。您可以使用在文本字段中输入的值创建新日期。假设输入的值是 2012 年 11 月 6 日，那么您必须从该文本字段中以编程方式获取整数中的日、月和年分量。以整数形式获取小时、分钟和秒，以获取您需要检查它是否是先前时间的时间。使用以下命令创建具有所需时间的日期：

```
 NSDateComponents *comps = [[NSDateComponents alloc] init];
    [comps setDay:iDay];
    [comps setMonth:iMonth];
    [comps setYear:iYear];
    [comps setHour:iHour];
    [comps setMinute:iMinutes];
    [comps setSecond:iSeconds];

    NSCalendar *gregorian = [[NSCalendar alloc]
                         initWithCalendarIdentifier:NSGregorianCalendar];
    NSDate *dateToCheck = [gregorian dateFromComponents:comps];
    [comps release]; 
```

创建日期后，您可以使用以下方法检查日期是否是前一个日期：

```
 double timestamp = [dateToCheck timeIntervalSinceDate:[NSDate date]];
    if(timestamp < 0)
    {
        // The date is previous one
    } 
```

# objective-c - 没有调用协议委托

> ID：13244745
> 
> 赞同：0
> 
> 时间：2012-11-06T05:08:48.420
> 
> 标签：objective-c, ios

嗨，我正在尝试使用 GCD 从互联网下载照片。下载图像后，我打电话给代表，让班级知道图像已下载。

这是我用来下载图像的代码

```
-(void)getVenuePhotos:(NSString  *)venueID
{
    dispatch_queue_t  getVenuePhotos =  dispatch_queue_create ( "getVenuePhotos" ,  NULL );
    dispatch_async (getVenuePhotos, ^{

       //Download image, Lots of code not displaying
        UIImage *image  = [[UIImage alloc] initWithData:photoData];

        dispatch_async(dispatch_get_main_queue(),^{
            //This delegate doesn't get called
            [self.delegate gotVenuePhotos:image];  
        });
    });
    dispatch_release (getVenuePhotos);
} 
```

这是我在 POIPhoto.h 中实现协议的方式

```
@protocol POIPhotoProtocol <NSObject>
-(void)gotVenuePhotos:(UIImage *)image;
@end

@interface POIPhoto : NSObject

-(void)getVenuePhotos:(NSString *)venueID;

@property(nonatomic, weak) id <POIPhotoProtocol> delegate;

@end 
```

在我的课堂上，我想要回电

```
@interface PoiDetailViewController : UIViewController <POIPhotoProtocol> 
```

最后我实现了协议方法

```
-(void)gotVenuePhotos:(UIImage *)image
{
   self.venuePhoto.image = image;
} 
```

问题是`gotVenuePhotos`永远不会被调用，即使在我的图像下载器中`[self.delegate gotVenuePhotos:image];` 被调用

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T05:11:27.697

问题正在发生，因为您没有设置委托。在您的`viewDidLoad`集合中，代表如下：

```
self.delegate = self; 
```

# java - 查找 JSF 资源的路径

> ID：13244749
> 
> 赞同：2
> 
> 时间：2012-11-06T05:09:13.830
> 
> 标签：java, jsf, resources, java-server

我在一个 JSF 网站上工作，我需要一些帮助。我有一个 XML 文件，我试图通过支持 bean 读取它，但我不知道如何找到它的路径。它在我的资源文件夹（resources/movies.xml）中。我该怎么做呢？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-06T10:48:27.210

如果它确实是`/resources`您通常存储 CSS/JS/图像等静态 Web 资源的公共 Web 内容的文件夹，那么您可以使用它`ExternalContext#getResourceAsStream()`来获取`InputStream`它。

```
ExternalContext externalContext = FacesContext.getCurrentInstance().getExternalContext();
InputStream input = externalContext.getResourceAsStream("/resources/movies.xml");
// ... 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-08-08T15:27:01.010

这就是我在 webapp 资源文件夹中获取文件夹路径的方式：

```
ServletContext servletContext = (ServletContext) FacesContext.getCurrentInstance().getExternalContext().getContext();
String resHomeImgPath = servletContext.getRealPath("resources/img/home"); 
```

# python - Http错误： 这是我在尝试对 bigquery 进行身份验证调用时遇到的错误数据 HttpError: <httperror 2="" 400="" 5355="" when="" requesting="" https:="" www.googleapi="" 问问题="" 2012-11-06t05:09:17.200="" 次="" this="" question="" shows="" research="" effort;="" it="" is="" useful="" and="" clear="" does="" not="" show="" any="" unclear="" or="" bookmark="" question.="" activity="" on="" post.="" 这是我在尝试对="" bigquery="" 进行身份验证调用时遇到的错误数据="" httperror:="" <httperror="" www.googleapis.com="" v2="" projects="" clientid="" datasets="" samples="" tables="" natality?alt="json" returned="" "invalid="" project="" id="" 'clientid'.="" ids="" must="" contain="" 6-63="" lowercase="" letters,="" digits,="" dashes.="" start="" with="" a="" letter="" may="" end="" dash."="">这是我的 main.py import httplib2 import os from google.appengine.api import memcache from google.appengine.ext import webapp from google.appengine.ext.webapp.util import run_wsgi_app from oauth2client.appengine import oauth2decorator_from_clientsecrets from bqclient import BigQueryClient PROJECT_ID = "########" this is the Client Id DATASET = "samples" TABLE = "natality" CLIENT_SECRETS = os.path.join(os.path.dirname(__file__), 'client_secrets.json') http = httplib2.Http(memcache) decorator = oauth2decorator_from_clientsecrets(CLIENT_SECRETS, 'https://www.googleapis.com/auth/bigquery') bq = BigQueryClient(http, decorator) class MainHandler(webapp.RequestHandler): @decorator.oauth_required def get(self): self.response.out.write("Hello Dashboard!\n") modTime = bq.getLastModTime(PROJECT_ID, DATASET, TABLE) if modTime is not None: msg = 'Last mod time = ' + modTime else: msg = "Could not find last modification time.\n" self.response.out.write(msg) application = webapp.WSGIApplication([ ('/', MainHandler), (decorator.callback_path, decorator.callback_handler()) ], debug=True) def main(): run_wsgi_app(application) if __name__ == '__main__': main() 这是 app.yaml application: hellomydashboard version: 1 runtime: python api_version: 1 handlers: - url: /favicon\.ico static_files: favicon.ico upload: favicon\.ico - url: .* script: main.py 这是 bqclient.py import httplib2 from apiclient.discovery import build from oauth2client.appengine import oauth2decorator_from_clientsecrets class BigQueryClient(object): def __init__(self, http, decorator): """Creates the BigQuery client connection""" self.service = build('bigquery', 'v2', http=http) self.decorator = decorator def getTableData(self, project, dataset, table): decorated = self.decorator.http() return self.service.tables().get(projectId=project, datasetId=dataset, tableId=table).execute(decorated) def getLastModTime(self, project, dataset, table): data = self.getTableData(project, dataset, table) if data is not None and 'lastModifiedTime' in data: return data['lastModifiedTime'] else: return None def Query(self, query, project, timeout_ms=10000): query_config = { 'query': query, 'timeoutMs': timeout_ms } decorated = self.decorator.http() result_json = (self.service.jobs() .query(projectId=project, body=query_config) .execute(decorated)) return result_json 如错误中所述，我还尝试将 ClientId 替换为项目 ID，但它给出了另一个错误 HttpError: <httperror 404="" when="" requesting="" https:="" www.googleapis.com="" bigquery="" v2="" projects="" hellodashboard87="" datasets="" samples="" tables="" natality?alt="json" returned="" "not="" found:="" dataset="" hellodashboard87:samples"="">我正在关注此页面上的教程 https://developers.google.com/bigquery/articles/dashboard#firstcall 不知道为什么 clear 不起作用......但解决这个问题的方法是分配一个新的对象来列出。myDateList.clear()因此，您可以使用myDateList = new ArrayList<t>()or代替使用myDateList = new LinkedList<t>()。 只是一个疑问：您的病情是否失败过一次？ pythongoogle-app-enginegoogle-bigquerygoogle-api-python-client 4 2 回答 2 This answer is useful 2 要使用 Google 的 BigQuery 提供的公共数据集，请使用以下参数： 项目编号：publicdata 数据集 ID：samples 表 ID：（natality或任何你想使用的） 为了使用您拥有的任何数据集，请将您的项目 ID 切换到 API 控制台仪表板中的那个。 于 2012-11-07T14:09:00.943 回答 This answer is useful 0 为了使用 BigQuery，您必须在启用 BigQuery 的API 控制台中创建一个项目（我假设您已经这样做了）。创建项目后，您将能够从 URL中获取项目编号，例如 https://code.google.com/apis/console/#project:12345XXXXXXX 在示例中，项目编号是12345XXXXXXX，这是您将用于 的值PROJECT_ID。 于 2012-11-06T17:55:57.297 回答 Related 1 image - 灰度图像上的 Matlab 数据光标显示三个通道 2 c# - 在 WCF 数据合同中返回结构数组 2 python - Beautiful Soup“不支持”Google App Engine 4 c# - Entity Framework 6 Code First 函数映射 1 sql-server - 使用条件条件来更改 Row_Number 之类的操作 2 arrays - 在 KSH shell 中解析一个数组？ 2 full-text-search - Sphinx 中的多术语查询：哪个术语匹配哪个结果？ 0 excel - 如何在 Excel 中存储单元 ID 信息？ 0 css - 如何覆盖 A Struts 2 主题的 CSS（应用于单个 JSP-s - 不是整体） 1 compass-sass - 使用 Codekit 获取间歇性 Compass 编译错误 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641</t></t></httperror></httperror>

> ID：13244750
> 
> 赞同：2
> 
> 时间：
> 
> 标签：python, google-app-engine, google-bigquery, google-api-python-client

这是我在尝试对 bigquery 进行身份验证调用时遇到的错误数据

```
HttpError: <HttpError 400 when requesting https://www.googleapis.com/bigquery/v2/projects/ClientId/datasets/samples/tables/natality?alt=json returned "Invalid project ID 'ClientId'. Project IDs must contain 6-63 lowercase letters, digits, or dashes. IDs must start with a letter and may not end with a dash."> 
```

这是我的 main.py

```
import httplib2
import os
from google.appengine.api import memcache
from google.appengine.ext import webapp
from google.appengine.ext.webapp.util import run_wsgi_app
from oauth2client.appengine import oauth2decorator_from_clientsecrets
from bqclient import BigQueryClient

PROJECT_ID = "########"  this is the Client Id 
DATASET = "samples"
TABLE = "natality"

CLIENT_SECRETS = os.path.join(os.path.dirname(__file__),
    'client_secrets.json')

http = httplib2.Http(memcache)
decorator = oauth2decorator_from_clientsecrets(CLIENT_SECRETS,
    'https://www.googleapis.com/auth/bigquery')

bq = BigQueryClient(http, decorator)

class MainHandler(webapp.RequestHandler):
    @decorator.oauth_required
    def get(self):
        self.response.out.write("Hello Dashboard!\n")
        modTime = bq.getLastModTime(PROJECT_ID, DATASET, TABLE)
        if modTime is not None:
            msg = 'Last mod time = ' + modTime
        else:
            msg = "Could not find last modification time.\n"
        self.response.out.write(msg)

application = webapp.WSGIApplication([
   ('/', MainHandler),
   (decorator.callback_path, decorator.callback_handler())
], debug=True)

def main():
   run_wsgi_app(application)

if __name__ == '__main__':
    main() 
```

这是 app.yaml

```
application: hellomydashboard
version: 1
runtime: python
api_version: 1

handlers:
- url: /favicon\.ico
  static_files: favicon.ico
  upload: favicon\.ico

- url: .*
  script: main.py 
```

这是 bqclient.py

```
import httplib2
from apiclient.discovery import build
from oauth2client.appengine import oauth2decorator_from_clientsecrets

class BigQueryClient(object):
    def __init__(self, http, decorator):
        """Creates the BigQuery client connection"""
        self.service = build('bigquery', 'v2', http=http)
        self.decorator = decorator

    def getTableData(self, project, dataset, table):
        decorated = self.decorator.http()
        return self.service.tables().get(projectId=project, datasetId=dataset,
            tableId=table).execute(decorated)

    def getLastModTime(self, project, dataset, table):
        data = self.getTableData(project, dataset, table)
        if data is not None and 'lastModifiedTime' in data:
            return data['lastModifiedTime']
        else:
            return None

    def Query(self, query, project, timeout_ms=10000):
        query_config = {
            'query': query,
            'timeoutMs': timeout_ms
        }
        decorated = self.decorator.http()
        result_json = (self.service.jobs()
                       .query(projectId=project, body=query_config)
                       .execute(decorated))

        return result_json 
```

如错误中所述，我还尝试将 ClientId 替换为项目 ID，但它给出了另一个错误

```
HttpError: <HttpError 404 when requesting https://www.googleapis.com/bigquery/v2/projects/hellodashboard87/datasets/samples/tables/natality?alt=json returned "Not Found: Dataset hellodashboard87:samples"> 
```

我正在关注此页面上的教程 [https://developers.google.com/bigquery/articles/dashboard#firstcall](https://developers.google.com/bigquery/articles/dashboard#firstcall)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T14:09:00.943

要使用 Google 的 BigQuery 提供的公共数据集，请使用以下参数：

**项目编号**：`publicdata`

**数据集 ID**：`samples`

**表 ID**：（`natality`或任何你想使用的）

为了使用您拥有的任何数据集，请将您的项目 ID 切换到 API 控制台仪表板中的那个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T17:55:57.297

为了使用 BigQuery，您必须在启用 BigQuery 的[API 控制台](https://code.google.com/apis/console)中创建一个项目（我假设您已经这样做了）。创建项目后，您将能够从 URL中获取**项目编号，例如**

```
https://code.google.com/apis/console/#project:12345XXXXXXX 
```

在示例中，项目编号是`12345XXXXXXX`，这是您将用于 的值`PROJECT_ID`。

# php - 基于另一个组合框中的选定项目列出项目的组合框

> ID：13244754
> 
> 赞同：0
> 
> 时间：2012-11-06T05:09:49.120
> 
> 标签：php, javascript, mysql

我确实有一个使用 PHP、MySQL 和 JavaScript 的例程。有两个表：tbl_category 和 tbl_subcategory 就像这样：

## tbl_category

1.  cat_id
2.  猫名

## tbl_subcategory

1.  scat_id
2.  cat_parent_id
3.  猫名

他们里面有一些信息，比如

## tbl_category:

1.  裤子
2.  鞋
3.  T 恤

## tbl_子类别：

1.  1 牛仔裤
2.  1 重型
3.  2 靴子
4.  2 凉鞋
5.  3 长袖
6.  3 短袖
7.  3 马球

我在文件头中放入了 javascript 库的链接：

```
<script type="text/javascript" src="jquery-1.8.2.min.js"></script> 
```

当然，我以前从 jquery 网站下载（较新版本）。

我现在有脚本例程：

```
<script type="text/javascript">

  $(document).ready(function(){
     $("select[name=cat_id").change(function(){
        $("select[name=scat_id]").html('<option value="">Loading...</option>');
        $.post("ajax_subcategory.php",
              {cat_id:$(this).val()},
              function(valor){
                 $("select[name=scat_id]").html(valor);
              }
              )
     })
  }) 
```

现在我有了表单，其中选择字段类别预加载了表 tbl_category 中的数据：

```
<form name="form" method="post" action="" enctype="multipart/form-data">
<table width="100%" border="0" cellspacing="6" cellpadding="0">
<tr>
   <td align="right">Category:</td>
   <td><select name="cat_id" >
          <option value="0">Choose category</option>
    <?php
             $sql1 =mysql_query("SELECT * FROM tbl_category ORDER by cat_name")or die(mysql_error());
            while($row = mysql_fetch_array($sql1))
            {
               echo ("<option value=\"$row[cat_id]\"" . ($sql1 == $row["cat_name"] ? " selected" : "") . ">$row[cat_name]</option>");  
            }
          ?></select> 
   </td>
</tr>
<tr>
   <td align="right">Sub-category:</td>
   <td><select name="scat_id" selected="selected" >
       <option value="0">Waiting category...</option>
       </select> 
   </td>
 </tr>
 </table>
 <input type="submit" name="submit" value="Submit"/>
 </form> 
```

然后是名为 ajax_subcategory 的 php 文件：

```
<?php

include "../connect_to_mysql.php";

$cat_id = $_POST['cat_id'];

$sql1 =mysql_query("SELECT * FROM tbl_subcategory WHERE cat_parent_id='$cat_id' ORDER by cat_name")or die(mysql_error());
while($row = mysql_fetch_array($sql1))
 {
    echo ("<option value=\"$row[scat_id]\"" . ($sql1 == $row["scat_name"] ? " selected" : "") . ">$row[scat_name]</option>");  
 }
 ?> 
```

完毕！一切看起来完美而美丽。当我在第一个组合中选择项目时，我可以看到正在运行的 Javascript 和 Loading... 显示，但第二个 ComboBox 始终为空，无论我选择什么项目，它都显示为空并变小（宽度） .

这是一个很好的例行程序，我从另一个网站看到在网络上工作。

你们能帮我找到解决办法吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T05:42:58.863

首先，您需要按照一步一步的故障排除来分析数据。这就是我会做的，在你的情况下：

1.  在发布之前检查 cat_id：

    ```
    $("select[name=cat_id").change(function(){
         alert($(this).val()); 
    ```

2.  按原样打印 mysql_query（ajax_subcategory 页面）中的字符串，并检查查询是否有效。直接在 MySQL 控制台或 phpMyAdmin 中尝试此查询并检查其输出。

3.  分析 ajax 响应：使用 FireBug 或 Chrome 中的 Network 选项卡并检查 Ajax 响应。有时，您的 ajax_subcategory 页面会生成一些 PHP 警告或通知。

注意：我不明白你为什么要检查条件 $sql1 == $row["cat_name"]。$sql1 将是一个资源 ID，根据您的查询，$row['cat_name'] 是一个代表您的子类别名称的字符串。

顺便说一句，不推荐使用 mysql_* 函数，强烈建议不要使用它们。使用 mysqli_* 函数或 PDO。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T06:25:44.373

请`$row["scat_name"]` 改为 `$row["cat_name"]`

```
<?php

    include "../connect_to_mysql.php";

    $cat_id = $_POST['cat_id'];

    $sql1 =mysql_query("SELECT * FROM tbl_subcategory WHERE cat_parent_id='$cat_id' ORDER by cat_name")or die(mysql_error());
    while($row = mysql_fetch_array($sql1))
     {
        echo ("<option value=\"$row[scat_id]\"" . ($sql1 == $row["cat_name"] ? " selected" : "") . ">$row[cat_name]</option>");  
     }
     ?> 
```

# windows - 直接从设备上下文优化屏幕截图

> ID：13244756
> 
> 赞同：3
> 
> 时间：2012-11-06T05:10:10.373
> 
> 标签：windows, visual-c++, screenshot, gdi

我设法从 Bitmap 对象获取缓冲区指针，如下所示：

```
hDesktopWnd=GetDesktopWindow();
hDesktopDC=GetDC(hDesktopWnd);

  // Get Screen Dimensions 

  int         nWidth=GetSystemMetrics(SM_CXSCREEN);
  int         nHeight=GetSystemMetrics(SM_CYSCREEN);

  CImage objCImg;
  objCImg.Create( nWidth, nHeight, 24, BI_RGB);

   HDC hdcMemDC = objCImg.GetDC();

   if(!BitBlt(hdcMemDC,0,0,nWidth, nHeight,hDesktopDC, 0,0,SRCCOPY))
    {
        printf("Error during Bitblt");
    }

   unsigned char* pData = (unsigned char*)objCImg.GetBits(); 
```

我可以使用这个 pData 修改图像。

我正在尝试优化屏幕捕获时间，但即使此操作仅包含一个**BitBlt**，此操作在我的 PC 上仍然需要 94 毫秒。尽管

```
// Get the Desktop windows handle and device context
hDesktopWnd=GetDesktopWindow();
hDesktopDC=GetDC(hDesktopWnd);

// Get the handle to the existing DC and create a bitmap file object    
HDC         hBmpFileDC=CreateCompatibleDC(hDesktopDC);
HBITMAP     hBmpFileBitmap=CreateCompatibleBitmap(hDesktopDC,nWidth,nHeight);

//    Assign the object in Memory DC to the bitmap and perform a bitblt
  SelectObject(hBmpFileDC,hBmpFileBitmap);
  BitBlt(hBmpFileDC,0,0,nWidth,nHeight,hDesktopDC,0,0,SRCCOPY|CAPTUREBLT);

  pBuf=malloc(bmpInfo.bmiHeader.biSizeImage); // Size of Image
  GetDIBits(hdc,hBitmap,0,bmpInfo.bmiHeader.biHeight,pBuf,&bmpInfo,DIB_RGB_COLORS); 
```

此操作在**GetDIBits中有一个****BitBlt**和一个内存复制操作，但在我的 PC 上，这个总操作仍需要 46 毫秒。

 **有人可以澄清一下两个 BitBlt 操作中的这种差异，以及为什么在第一种情况下 DC 不是作为兼容 DC (CreateCompatibleDC) 派生时 bitblt 需要更多时间，因为根据我的理解，BitBlt 几乎类似于**memcpy**操作。

反过来我还想问有没有办法直接从hdc访问图像缓冲区指针。这意味着可以直接从 HDC 获取指向图像的缓冲区指针

```
hDesktopWnd=GetDesktopWindow();
hDesktopDC=GetDC(hDesktopWnd);
// Now derive buffer from this **hDesktopDC** 
```

我之前也问过同样的问题：[无法访问缓冲区数据](https://stackoverflow.com/questions/13228157/unable-to-access-buffer-data-after-screen-capture)

另外，如果windows允许这种类型的数据处理，有人可以评论吗？**

# html - 更改弹出框的标题名称

> ID：13244759
> 
> 赞同：1
> 
> 时间：2012-11-06T05:10:30.757
> 
> 标签：html, grails, popup

我不确定是否有人问这个问题，但我找不到任何相关的帖子。我实际上是在按下提交按钮后在弹出框中创建的，以便我可以创建用户，但是弹出框看起来像这样

![弹出窗口](../Images/3e3c73669f43108e40fce58257b1acdf.png)

这是它的代码

```
 <g:actionSubmit value="Submit" action="createUser" class="btn_gray_large" type="button" role="button" aria-disabled="false" onclick="return confirm('${message(code: 'default.button.cancel.confirm.message', default: 'Are you sure?')}');"/> 
```

我想将“本地主机上的页面：8080 说：”部分更改为其他内容。无论如何我可以改变它吗？顺便说一句，我正在使用 gsp grails 和 groovy 来做到这一点。提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T05:43:31.800

您无法更改它（出于安全原因），但如果您使用 jQuery，您可以使用[jQuery 对话框](http://jqueryui.com/dialog/#modal-confirmation)或[jQuery Alert Dialogs](http://www.abeautifulsite.net/blog/2008/12/jquery-alert-dialogs/)或vanilla js的[Javascript 确认对话框来制作自己的。](http://www.javascripter.net/faq/confirm.htm)

# c# - 无法使用阅读器从 excel 中读取特定单元格

> ID：13244767
> 
> 赞同：2
> 
> 时间：2012-11-06T05:11:09.310
> 
> 标签：c#, asp.net, sql-server

我正在将 excel 导入 sql server db，excel 表有三列：

> id（仅限数字）|数据|护照

在导入它之前，我想检查某些事情，例如：

*   护照应该以字母开头，其余字符必须是数字*   id 只能是数字

我可以检查护照，但即使我使用与检查护照相同的代码，我也无法检查身份证。

```
 using (DbDataReader dr = command.ExecuteReader())
        {
            // SQL Server Connection String
            string sqlConnectionString = "Data Source=DITSEC3;Initial Catalog=test;Integrated Security=True";

            con.Open();
            DataTable dt7 = new DataTable();
            dt7.Load(dr);
            DataRow[] ExcelRows = new DataRow[dt7.Rows.Count];
            DataColumn[] ExcelColumn = new DataColumn[dt7.Columns.Count];

            //=================================================
            for (int i1 = 0; i1 < dt7.Rows.Count; i1++)
            {

                if (dt7.Rows[i1]["passport"] == null)
                {
                    dt7.Rows[i1]["passport"] = 0;

                }
                if (dt7.Rows[i1]["id"] == null)
                {
                    dt7.Rows[i1]["id"] = 0;
                }

                string a = Convert.ToString(dt7.Rows[i1]["passport"]);
                string b = dt7.Rows[i1]["id"].ToString();

                if (!string.IsNullOrEmpty(b))
                {
                    int idlen = b.Length;

                    for (int j = 0; j < idlen; j++)
                    {
                        if (Char.IsDigit(b[j]))
                        {
                            //action
                        }
                        if(!Char.IsDigit(b[j]))
                        {
                            flag = flag + 1;
                            int errline = i1 + 2;
                            Label12.Text = "Error at line: " + errline.ToString();
                            //Label12.Visible = true;
                        }
                    }
                    if (!String.IsNullOrEmpty(a))
                    {
                        int len = a.Length;

                        for (int j = 1; j < len; j++)
                        {
                            if (Char.IsLetter(a[0]) && Char.IsDigit(a[j]) && !Char.IsSymbol(a[j]))
                            {
                                //action
                            }
                            else
                            {
                                flag = flag + 1;
                                int errline = i1 + 2;
                                Label12.Text = "Error at line: " + errline.ToString();
                                //Label12.Visible = true;
                            }

                    }
                }

                 } 
```

出于某种奇怪的原因，当我使用断点时，我可以看到 id 的值，只要 id 是 excel 中的数字，当流到达 id 为 25h547 的单元格时，如果 b 转为“”，这个值有什么原因吗？如果你需要，我可以给你完整的代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T04:06:36.383

似乎正在发生的事情是，当数据被导入保存数据表并且列中的第一条记录是字母数字时，如果第一个是数字，它将假定列中的所有记录都是字母数字，它将假定所有记录在列是数字，因此对于出现在列中某处的字母数字记录将是空白的。我自己通过修改连接字符串解决了这个问题：“Excel 8.0;IMEX=1;HDR=NO;TypeGuessRows=0;ImportMixedTypes=Text”

“IMEX=1；” 告诉驱动程序始终将“混合”（数字、日期、字符串等）数据列作为文本读取。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T09:50:54.093

[在连接字符串中指定 imex 模式以处理混合值](http://www.connectionstrings.com/excel)

请参阅：[Excel 行中的混合值](http://msdn.microsoft.com/en-us/library/ms141683.aspx)

> 缺失值。Excel 驱动程序读取指定源中的一定数量的行（默认为 8 行）来猜测每列的数据类型。当一列似乎包含混合数据类型，尤其是数字数据与文本数据混合时，驱动程序决定支持多数数据类型，并为包含其他类型数据的单元格返回空值。（在平局中，数字类型获胜。）Excel 工作表中的大多数单元格格式选项似乎不会影响此数据类型的确定。您可以通过指定导入模式来修改 Excel 驱动程序的这种行为。要指定导入模式，请将 IMEX=1 添加到属性窗口中 Excel 连接管理器的连接字符串中的扩展属性的值

# java - Gson 多态序列化

> ID：13244769
> 
> 赞同：5
> 
> 时间：2012-11-06T05:11:34.653
> 
> 标签：java, gson

使用 Gson 2.2.2 我正在尝试序列化 POJO（行为）的数组列表。

我有一个适配器，它几乎是我在网上看到的内容的副本：

```
public class BehaviorAdapter implements JsonSerializer<Behavior> {

    private static final String CLASSNAME = "CLASSNAME";
    private static final String INSTANCE = "INSTANCE";

    @Override
    public JsonElement serialize(Behavior src, Type typeOfSrc,
            JsonSerializationContext context) {

        JsonObject retValue = new JsonObject();
        String className = src.getClass().getCanonicalName();
        retValue.addProperty(CLASSNAME, className);
        JsonElement elem = context.serialize(src);
        retValue.add(INSTANCE, elem);
        return retValue;
    }
} 
```

我像这样注册它：

```
GsonBuilder builder = new GsonBuilder();        
builder.registerTypeHierarchyAdapter(Behavior.class, new BehaviorAdapter());
gson = builder.create(); 
```

然后当我尝试序列化我的 ArrayList 时：

```
String json2 = gson.toJson(behaviors); 
```

我得到一个堆栈溢出。

网上好像是这样的：

```
JsonElement elem = context.serialize(src); 
```

它开始一个递归循环，一次又一次地通过我的序列化程序。那么我如何注册它以防止这种情况发生？我需要序列化列表并维护多态性。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-06T07:24:17.527

看起来您发现了[JsonSerializer 文档警告](http://static.javadoc.io/com.google.code.gson/gson/2.7/com/google/gson/JsonSerializer.html#serialize-T-java.lang.reflect.Type-com.google.gson.JsonSerializationContext-)的无限循环：

> 但是，您永远不应该在 src 对象本身上调用它，因为这将导致无限循环（Gson 将再次调用您的回调方法）。

我能想到的最简单的方法是创建一个*没有*安装处理程序的新 Gson 实例，并通过它运行您的实例。

作为最终运行，您可以只序列化`List<Behavior>`：

```
public class BehaviorListAdapter implements JsonSerializer<List<Behavior>> {

    private static final String CLASSNAME = "CLASSNAME";
    private static final String INSTANCE = "INSTANCE";

    @Override
    public JsonElement serialize(List<Behavior> src, Type typeOfSrc,
            JsonSerializationContext context) {
        JsonArray array = new JsonArray();
        for (Behavior behavior : src) {
            JsonObject behaviorJson = new JsonObject();
            String className = behavior.getClass().getCanonicalName();
            behaviorJson.addProperty(CLASSNAME, className);
            JsonElement elem = context.serialize(behavior);
            behaviorJson.add(INSTANCE, elem);
            array.add(behaviorJson);
        }
        return array;
    }
}

GsonBuilder builder = new GsonBuilder();
// use a TypeToken to make a Type instance for a parameterized type
builder.registerTypeAdapter(
    (new TypeToken<List<Behavior>>() {}).getType(),
    new BehaviorListAdapter());
gson = builder.create(); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-06T07:11:15.323

看看[RuntimeTypeAdapterFactory](http://code.google.com/p/google-gson/source/browse/trunk/extras/src/main/java/com/google/gson/typeadapters/RuntimeTypeAdapterFactory.java)。该类的[测试](http://code.google.com/p/google-gson/source/browse/trunk/extras/src/test/java/com/google/gson/typeadapters/RuntimeTypeAdapterFactoryTest.java)有一个例子：

```
RuntimeTypeAdapterFactory<BillingInstrument> rta = RuntimeTypeAdapterFactory.of(
    BillingInstrument.class)
    .registerSubtype(CreditCard.class);
Gson gson = new GsonBuilder()
    .registerTypeAdapterFactory(rta)
    .create();

CreditCard original = new CreditCard("Jesse", 234);
assertEquals("{\"type\":\"CreditCard\",\"cvv\":234,\"ownerName\":\"Jesse\"}",
    gson.toJson(original, BillingInstrument.class));
BillingInstrument deserialized = gson.fromJson(
    "{type:'CreditCard',cvv:234,ownerName:'Jesse'}", BillingInstrument.class);
assertEquals("Jesse", deserialized.ownerName);
assertTrue(deserialized instanceof CreditCard); 
```

这个类*不在*核心 Gson 中；您需要将其复制到您的项目中才能使用它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-06-16T11:19:57.153

我明白你在这里想要做什么，我也遇到了同样的问题。

我写完了一个简单的抽象类

```
public abstract class TypedJsonizable extends Jsonizable {} 
```

并将 TypeHierarchyAdapter 注册到我的 Gson 实例

```
 protected static Gson gson = new GsonBuilder()
    .registerTypeHierarchyAdapter
    (TypedJsonizable.class,new TypedJsonizableSerializer()); 
```

这个 TypeAdapter 的关键是不要调用 context.serialize 和 context.deserialize 因为这会导致[Jeff Bowman](https://stackoverflow.com/users/1426891/jeff-bowman)在他的回答中所说的无限循环，这个 TypeAdapter 使用反射来避免这种情况。

```
import com.google.gson.*;
import org.apache.log4j.Logger;

import java.lang.reflect.Field;
import java.lang.reflect.InvocationTargetException;
import java.lang.reflect.Type;

public class TypedJsonizableSerializer implements JsonSerializer<TypedJsonizable>, JsonDeserializer<TypedJsonizable> {
static final String CLASSNAME_FIELD = "_className";
Logger logger = Logger.getLogger(TypedJsonizable.class);

@Override
public JsonElement serialize(TypedJsonizable src, Type typeOfSrc, JsonSerializationContext context) {
    JsonObject contentObj = new JsonObject();
    contentObj.addProperty(CLASSNAME_FIELD,src.getClass().getCanonicalName());

    for (Field field : src.getClass().getDeclaredFields()) {
        field.setAccessible(true);
        try {
            if (field.get(src)!=null)
                contentObj.add(field.getName(),context.serialize(field.get(src)));
        } catch (IllegalAccessException e) {
            logger.error(e.getMessage(),e);
        }
    }
    return contentObj;
}

@Override
public TypedJsonizable deserialize(JsonElement json, Type typeOfT, JsonDeserializationContext context) throws JsonParseException {
    JsonObject jsonObject = json.getAsJsonObject();
    String className = jsonObject.get(CLASSNAME_FIELD).getAsString();
    if (className == null || className.isEmpty())
        throw new JsonParseException("Cannot find _className field. Probably this instance has not been serialized using Jsonizable jsonizer");
    try {
        Class<?> clazz = Class.forName(className);
        Class<?> realClazz = (Class<?>) typeOfT;
        if (!realClazz.equals(clazz))
            throw new JsonParseException(String.format("Cannot serialize object of class %s to %s", clazz.getCanonicalName(),realClazz.getCanonicalName()));
        Object o  = clazz.getConstructor().newInstance();
        for (Field field : o.getClass().getDeclaredFields()) {
            field.setAccessible(true);
            if (jsonObject.has(field.getName())) {
                field.set(o,context.deserialize(jsonObject.get(field.getName()) , field.getGenericType()));
            }
        }
        return (TypedJsonizable) o;
    } catch (ClassNotFoundException e) {
        throw new JsonParseException(String.format("Cannot find class with name %s . Maybe the class has been refactored or sender and receiver are not using the same jars",className));
    } catch (IllegalAccessException e){
        throw new JsonParseException(String.format("Cannot deserialize, got illegalAccessException %s ",e.getMessage()));
    } catch (NoSuchMethodException | InstantiationException | InvocationTargetException e) {
        throw new JsonParseException(String.format("Cannot deserialize object of class %s, unable to create a new instance invoking empty constructor",className));
    }
} 
```

}

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-11-26T10:26:36.770

我为这个问题找到了另一种解决方案（解决方法）：不要在你的类层次结构中序列化基类，而是使用后代。例如：

```
...
protected static Gson gson;
...
GsonBuilder gsb = new GsonBuilder();
gsb.registerTypeAdapter(SomeBase.class, new MQPolymorphicSerializer<SomeBase>());
gson = gsb.create(); 
```

**一些基地**：

```
public class SomeBase{ 
```

... }

**某后裔**：

```
public class SomeDescendant extends SomeBase {
...
} 
```

**堆栈溢出异常情况：**

```
gson.toJson(new SomeBase()); 
```

**解决方案：**

```
gson.toJson(new SomeDescendant()); 
```

...最后 - 序列化程序示例：

```
public class MQPolymorphicSerializer<T> implements JsonSerializer<T>, JsonDeserializer<T> {
private static final String CLASSNAME = "CLASSNAME";
private static final String INSTANCE = "INSTANCE";

@Override
public JsonElement serialize(T src, Type typeOfSrc, JsonSerializationContext context) {
    JsonObject retValue = new JsonObject();
    String className = src.getClass().getName();
    retValue.addProperty(CLASSNAME, className);
    JsonElement elem = context.serialize(src);
    retValue.add(INSTANCE, elem);
    return retValue;
}

@Override
public T deserialize(JsonElement json, Type typeOfT, JsonDeserializationContext context) throws JsonParseException {
    JsonObject jsonObject = json.getAsJsonObject();
    JsonPrimitive prim = (JsonPrimitive) jsonObject.get(CLASSNAME);
    String className = prim.getAsString();
    Class<?> klass = null;
    try {
        klass = Class.forName(className);
    } catch (ClassNotFoundException e) {
        throw new JsonParseException(e.getMessage());
    }
    return context.deserialize(jsonObject.get(INSTANCE), klass);
} 
```

}

# c# - Photoshop 元素自动化中的内部错误

> ID：13244773
> 
> 赞同：1
> 
> 时间：2012-11-06T05:12:16.987
> 
> 标签：c#, photoshop

```
public static Photoshop.Application appRef = default(Photoshop.Application);  
appRef = new ApplicationClass();
appRef.Visible = false;
appRef.DisplayDialogs = PsDialogModes.psDisplayNoDialogs; 
```

appRef.visible=false 行上出现内部错误

# java - 定义接口和类的最佳/标准方法

> ID：13244774
> 
> 赞同：0
> 
> 时间：2012-11-06T05:12:19.420
> 
> 标签：java, interface, implementation

我的接口和实现在同一个包中，我使用 ISessionDAO 作为接口，使用 SessionDAOImpl 作为实现。这是定义接口和类的最佳/标准方式，还是我需要定义单独的包来实现。

界面

```
 package com.tolo.subca.bank.session;

  public interface ISessionDAO {

      public boolean checkForSingleOrMultiple(String originator);

   } 
```

班级

```
 package com.tolo.subca.bank.session;

 public class SessionDAOImpl implements ISessionDAO {

@Override
public boolean checkForSingleOrMultiple(String originator) {
    // TODO Auto-generated method stub
    return false;
}

 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T05:15:38.753

在同一个包中定义接口和实现类（或多个类）完全没有错。

有趣的问题是：您如何决定一个包中的内容以及何时需要为代码的不同部分使用不同的包。关于这个有很多讨论。一些有趣的资源是：

*   [菲尔·古德温的讨论](http://c2.com/cgi/wiki?PackageDesign)
*   [SO上的这个线程](https://stackoverflow.com/questions/6260302/program-design-package-by-feature-vs-layer-or-both)
*   [这篇 Java 实践文章](http://www.javapractices.com/topic/TopicAction.do?Id=205)

搜索*“java 包设计”*以获取更多关于此主题的信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T05:19:50.610

因组织而异。我们曾经将实现放在一个子包 com.company.foo.impl 中，但没有对错之分。我认为您不需要界面上的前导 I 和尾随 impl。

# configuration - 邮箱命令在 mutt config 中有什么作用？

> ID：13244776
> 
> 赞同：0
> 
> 时间：2012-11-06T05:12:03.733
> 
> 标签：configuration, mutt

我很难理解 mutt 的配置结构。spoolfile 设置是您首次启动时的消息列表所在的位置。该文件夹是您按“c？”时选择文件夹的顶级目录。那么什么是邮箱呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T18:27:40.453

该`mailboxes`命令将提供的邮箱添加到 mutt 将监视新邮件的邮件文件夹列表中。当您使用`change-folder`命令（`c`默认绑定到）时，该列表中包含新邮件的第一个文件夹将是默认选择，您可以通过按空格键循环浏览该列表中包含新邮件的所有邮箱。此外，该列表中包含新邮件的邮箱数量可以`%b`使用`$status_format`.

# jquery - jQuery 验证引擎：如何使用“showOneMessage”属性？

> ID：13244779
> 
> 赞同：0
> 
> 时间：2012-11-06T05:12:21.710
> 
> 标签：jquery, jquery-validation-engine

我在我的一种形式中使用[jQuery.validationEngine](http://posabsolute.github.com/jQuery-Validation-Engine/)。问题是当缺少多个必填字段时，表单会被每个输入字段的浮动红色验证错误淹没。

文档中提到了一个名为[showOneMessage](http://posabsolute.github.com/jQuery-Validation-Engine/#options/showonemessage)的属性，它假设只显示第一次验证，但我无法让它工作。这是一个有效的[jsFiddle 链接](http://jsfiddle.net/6ESCD/)，添加了`showOneMessage`似乎没有做任何事情的属性。

有人知道如何开始`showOneMessage`工作吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-06T05:22:43.340

```
jQuery("#formID").validationEngine('attach', {maxErrorsPerField:1}); 
```

或者

在 validationEngine.js 中，将默认`maxErrorsPerField:False`条件更改为`maxErrorsPerField:1`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T17:42:12.830

我刚刚使用过，经过测试（2012 年 11 月），它可以工作：

```
<script>
    jQuery(document).ready(function(){
    jQuery("#formIDhere").validationEngine('attach', {showOneMessage: true});    
    });
</script> 
```

看起来作者在 2 个月前就知道并解决了这个问题。也许确保你有最新的代码？

# sencha-touch - 调用 Ext.Ajax.request 时收到错误请求

> ID：13244780
> 
> 赞同：0
> 
> 时间：2012-11-06T05:12:32.520
> 
> 标签：sencha-touch, sencha-touch-2

运行此代码时我收到一个错误的请求

```
Ext.Ajax.request({
           url: loginHostUri,
           method:'POST',
           headers:{
               'Accept':'application/x-www-form-urlencoded'
           },
           extraParams:{
               grant_type:'password',
               username:username,
               password:psswd,
               client_id: consumerKey,
               client_secret: consumerSecret
           },
           success: function(response){
               Ext.Msg.alert('Info',reponse);
           }
       }); 
```

当我使用 javascript 调试器时，我收到一条错误消息“XMLHttpRequest 无法加载”“Access-Control-Allow-Origin 不允许 Origin null。”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T12:35:29.467

检查 url "loginHostUri" 是否为空。您是否正在尝试跨域请求？在这种情况下，您将无法从浏览器执行此操作（除非您以不安全模式打开浏览器）。Ajax 请求通过“params”而不是“extraParams”发送参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T08:31:48.577

在服务器端（JSP）我使用：

```
response.addHeader("Access-Control-Allow-Origin", "*");
response.addHeader("Access-Control-Allow-Credentials", "true");
response.setHeader("Access-Control-Allow-Methods", "POST");
response.setHeader("Access-Control-Allow-Methods", "GET");
response.setHeader("Access-Control-Allow-Headers", "Content-Type");
response.setHeader("Access-Control-Allow-Headers", "X-Requested-With");
response.setHeader("Access-Control-Max-Age", "86400"); 
```

这解决了问题。

# android - 如何在android中发送带有附件的电子邮件？

> ID：13244782
> 
> 赞同：2
> 
> 时间：2012-11-06T05:12:35.330
> 
> 标签：android

电子邮件发送成功，但问题是用电子邮件附加文件，我如何发送电子邮件。我使用下面的代码。

```
public class SendMail extends javax.mail.Authenticator {
    private String _user;
    private String _pass;

    private String[] _to;
    private String _from;

    private String _port;
    private String _sport;

    private String _host;

    private String _subject;
    private String _body;

    private boolean _auth;

    private boolean _debuggable;

    private Multipart _multipart;

    public SendMail() {
        _host = "smtp.gmail.com"; // default smtp server 
        _port = "465"; // default smtp port 
        _sport = "465"; // default socketfactory port 

        _user = ""; // username 
        _pass = ""; // password 
        _from = ""; // email sent from 
        _subject = ""; // email subject 
        _body = ""; // email body 

        _debuggable = false; // debug mode on or off - default off 
        _auth = true; // smtp authentication - default on 

        _multipart = new MimeMultipart();

        // There is something wrong with MailCap, javamail can not find a handler for the multipart/mixed part, so this bit needs to be added. 
        MailcapCommandMap mc = (MailcapCommandMap) CommandMap.getDefaultCommandMap();
        mc.addMailcap("text/html;; x-java-content-handler=com.sun.mail.handlers.text_html");
        mc.addMailcap("text/xml;; x-java-content-handler=com.sun.mail.handlers.text_xml");
        mc.addMailcap("text/plain;; x-java-content-handler=com.sun.mail.handlers.text_plain");
        mc.addMailcap("multipart/*;; x-java-content-handler=com.sun.mail.handlers.multipart_mixed");
        mc.addMailcap("message/rfc822;; x-java-content-handler=com.sun.mail.handlers.message_rfc822");
        CommandMap.setDefaultCommandMap(mc);
    }

    public SendMail(String user, String pass) {
        this();

        _user = user;
        _pass = pass;
    }

    public boolean send() throws Exception {
        Properties props = _setProperties();

        if (!_user.equals("") && !_pass.equals("") && _to.length > 0 && !_from.equals("") && !_subject.equals("") && !_body.equals("")) {
            Session session = Session.getInstance(props, this);

            MimeMessage msg = new MimeMessage(session);

            msg.setFrom(new InternetAddress(_from));

            List<String> addressTo = new ArrayList<String>();
            for (String addr : _to) {
                if (addr == null || addr.trim().equals(""))
                    continue;
                addressTo.add(addr);
            }

            InternetAddress[] actAddressTo = new InternetAddress[addressTo.size()];
            int i = 0;
            for (String addr : addressTo) {
                actAddressTo[i] = new InternetAddress(addr);
                i++;
            }

            msg.setRecipients(MimeMessage.RecipientType.TO, actAddressTo);

            msg.setSubject(_subject);
            msg.setSentDate(new Date());

            // setup message body 
            //BodyPart messageBodyPart = new MimeBodyPart();
            //messageBodyPart.setText(_body);
            //_multipart.addBodyPart(messageBodyPart);

            //msg.setContent(_multipart, "text/html");
            msg.setContent(_body, "text/html");

            // send email 
            Transport.send(msg);

            return true;
        } else {
            return false;
        }
    }

    public void addAttachment(String filename) throws Exception {
        BodyPart messageBodyPart = new MimeBodyPart();
        DataSource source = new FileDataSource(filename);
        messageBodyPart.setDataHandler(new DataHandler(source));
        messageBodyPart.setFileName(filename);

        _multipart.addBodyPart(messageBodyPart);
    }

    @Override
    public PasswordAuthentication getPasswordAuthentication() {
        return new PasswordAuthentication(_user, _pass);
    }

    private Properties _setProperties() {
        Properties props = new Properties();

        props.put("mail.smtp.host", _host);

        if (_debuggable) {
            props.put("mail.debug", "true");
        }

        if (_auth) {
            props.put("mail.smtp.auth", "true");
        }

        props.put("mail.smtp.port", _port);
        props.put("mail.smtp.socketFactory.port", _sport);
        props.put("mail.smtp.socketFactory.class", "javax.net.ssl.SSLSocketFactory");
        props.put("mail.smtp.socketFactory.fallback", "false");

        return props;
    }

    // the getters and setters 
    public String getBody() {
        return _body;
    }

    public void setBody(String _body) {
        this._body = _body;
    }

    public void setTo(String[] _to) {
        this._to = _to;
    }

    public void setFrom(String _from) {
        this._from = _from;
    }

    public void setSubject(String _subject) {
        this._subject = _subject;
    }

} 
```

请帮我？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-07-09T11:21:09.007

```
String[] mailto = {""};
Uri uri = Uri.fromFile(new File(Environment.getExternalStorageDirectory().getAbsolutePath() + "/CALC/REPORTS/",pdfname ));
Intent emailIntent = new Intent(Intent.ACTION_SEND);
emailIntent.putExtra(Intent.EXTRA_EMAIL, mailto);
emailIntent.putExtra(Intent.EXTRA_SUBJECT, "Calc PDF Report");
emailIntent.putExtra(Intent.EXTRA_TEXT, ViewAllAccountFragment.selectac+" PDF Report");
emailIntent.setType("application/pdf");
emailIntent.putExtra(Intent.EXTRA_STREAM, uri);
startActivity(Intent.createChooser(emailIntent, "Send email using:")); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-06T05:33:37.460

首先，我认为您在这个主题上缺乏明确的例子；所以就[在这里](http://mooriandroid.blogspot.in/p/email-attachment-from.html)；

就编码而言，您专注于以下部分：

```
final Intent emailIntent = new Intent(

android.content.Intent.ACTION_SEND);

emailIntent.setType("application/octet-stream");

emailIntent.putExtra(android.content.Intent.EXTRA_EMAIL,

new String[] { address.getText().toString() });

emailIntent.putExtra(android.content.Intent.EXTRA_SUBJECT,

subject.getText());

emailIntent.putExtra(android.content.Intent.EXTRA_TEXT,

emailtext.getText());

emailIntent.putExtra(Intent.EXTRA_STREAM,Uri.fromFile(attachment));

EmailActivity.this.startActivity(Intent.createChooser(emailIntent,

"Send mail...")); 
```

setType 在这里非常重要，专注于它，你很快就能把它做好

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-06T05:19:09.590

```
//Method for the email the pdf attachment
    public void EmailPDF()
    {
        File PayslipDir = new File(Environment.getExternalStorageDirectory(), "/FolderName/");
        // Write your file to that directory and capture the Uri
        String strFilename = "PDFFile.pdf";
        File htmlFile = new File(PayslipDir, strFilename);
        // Save file encoded as html
        Uri htmlUri = Uri.fromFile(htmlFile);
        final Intent emailIntent = new Intent(android.content.Intent.ACTION_SEND);
        emailIntent.setType("application/pdf");
        emailIntent.putExtra(android.content.Intent.EXTRA_EMAIL,new String[] {TOEmailAddress});
        emailIntent.putExtra(android.content.Intent.EXTRA_SUBJECT,"Pdf attachment");
        emailIntent.putExtra(android.content.Intent.EXTRA_TEXT,"Hi PDF is attached in this mail. ");
        emailIntent.putExtra(Intent.EXTRA_STREAM, htmlUri);
        CurrentActivityName.this.startActivity(Intent.createChooser(emailIntent,"Send mail..."));
        //finish(); 
    } 
```

这是附加任何类型文件的三行

```
Uri htmlUri = Uri.fromFile(htmlFile);
final Intent emailIntent = new Intent(android.content.Intent.ACTION_SEND);
emailIntent.setType("application/pdf"); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-06T05:20:36.797

使用以下代码发送邮件

```
String filelocation="/mnt/sdcard/contacts_sid.vcf";    
Intent sharingIntent = new Intent(Intent.ACTION_SEND);
sharingIntent.setType("vnd.android.cursor.dir/email");
String to[] = "asd@gmail.com";
sharingIntent.putExtra(Intent.EXTRA_EMAIL, to);
sharingIntent.putExtra(Intent.EXTRA_STREAM,filelocation);
sharingIntent.putExtra(Intent.EXTRA_SUBJECT,"subject");
startActivity(Intent.createChooser(sharingIntent, "Send email")); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-06T05:17:05.763

您可以在 action_send 中附加图片，所以试试这个...

```
sPhotoFileName=Environment.getExternalStorageDirectory()+"/sankettest/siteriskassesment.png";

    send.setOnClickListener(new OnClickListener() 
    {
        public void onClick(View arg0) 
        {
            Intent emailIntent = new Intent(android.content.Intent.ACTION_SEND); 
            emailIntent.setType("image/*");

            emailIntent.putExtra(android.content.Intent.EXTRA_EMAIL, new String[] 
            {"me@gmail.com"}); 
            emailIntent.putExtra(android.content.Intent.EXTRA_SUBJECT, 
            "Test Subject"); 
            emailIntent.putExtra(android.content.Intent.EXTRA_TEXT, 
            "go on read the emails"); 
            Log.v(getClass().getSimpleName(), "sPhotoUri=" + Uri.parse("file:///"+ sPhotoFileName));
            emailIntent.putExtra(Intent.EXTRA_STREAM, Uri.parse("file:///mnt/sdcard/sanket test/siteriskassesment.png"));
            startActivity(Intent.createChooser(emailIntent, "Send mail..."));

        }
    }); 
```

# mongodb - 数组查询中的 Mongo 数组

> ID：13244785
> 
> 赞同：0
> 
> 时间：2012-11-06T05:12:47.980
> 
> 标签：mongodb

鉴于以下示例记录，如何从任意一组组中找到属于至少一个组的所有用户进行查询？例如，查找属于以下任一组的所有用户 - 1、10、43。我正在寻找一个通用的解决方案。我知道我可以构建一个 or 查询，但是有没有更有效的方法来处理这个问题？

```
> db.users.findOne()
{
    "_id" : ObjectId("508f477aca442be537000000"),
    "name" : "Some Name",
    "email" : "some@email.com",
    "groups" : [
        1,5,10
    ]
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T05:15:35.123

`{ groups: {$in: [1, 10, 43]} }`

# java - netbeans 在哪里配置存储断点信息？

> ID：13244791
> 
> 赞同：2
> 
> 时间：2012-11-06T05:14:02.743
> 
> 标签：java, netbeans, netbeans-7.2

netbeans 在哪里配置存储断点信息？有幻影断点的问题。解决方法是右键单击断点列表视图并“全部删除”以摆脱它。

我想在将来避免这种情况。网豆 7.2

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T06:19:10.600

解决方法是我猜的答案

“解决方法是在断点列表视图中右键单击并‘全部删除’以摆脱它。”

# ruby - 在ruby中将IP地址转换为32位整数

> ID：13244792
> 
> 赞同：11
> 
> 时间：2012-11-06T05:14:04.080
> 
> 标签：ruby, integer, puppet

我正在尝试找到一种将 ip 地址转换为 Ruby 中的 32 位整数的方法，用于 puppet 模板。

这就是我在 bash 中进行转换的方式。

```
root@ubuntu-server2:~# cat test.sh 
#!/bin/bash

#eth0 address is 10.0.2.15
privip=`ifconfig eth0 | grep "inet addr:" | cut -d : -f 2 | cut -d " " -f 1` ;

echo "Private IP: ${privip}" ;

# Turn it into unsigned 32-bit integer

ipiter=3 ;

for ipoctet in `echo ${privip} | tr . " "` ;
    do
    ipint=$(( ipint + ( ipoctet * 256 ** ipiter-- ) )) ;
    done ;

echo "Private IP int32: ${ipint}" ; 
```

.

```
root@ubuntu-server2:~# bash test.sh 
Private IP: 10.0.2.15
Private IP int32: 167772687 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-11-06T05:21:53.170

```
require 'ipaddr'
ip = IPAddr.new "10.0.2.15"
ip.to_i                      # 167772687 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-06T05:21:28.053

```
'10.0.2.15'.split('.').inject(0) {|total,value| (total << 8 ) + value.to_i}
#=> 167772687 
```

上面的答案稍微好一点，因为你的八位字节中可能有超过 3 位数字，然后这就会中断。IE

```
"127.0.0.1234" 
```

但我还是更喜欢我的：D 另外，如果这对你很重要，那么你可以这样做

```
"127.0.0.1".split('.').inject(0) {|total,value| raise "Invalid IP" if value.to_i < 0 || value.to_i > 255; (total << 8 ) + value.to_i } 
```

# arrays - Excel VB - 将列读入一维数组，执行操作，写回命名范围？

> ID：13244797
> 
> 赞同：1
> 
> 时间：2012-11-06T05:14:42.957
> 
> 标签：arrays, types, excel, for-loop, vba

我有一个包含大约 60,000 条记录的数据集。拖欠日期字段就在处理货币值的字段之后，有时用户会在拖欠日期字段中意外输入货币值。此外，他们有时将日期输入为字符串（2011 年 8 月 2 日）或拖欠天数（135 或 135 天）。最常见的输入方法是 mm/dd/yy 格式 (08/02/11)。

可悲的是，这个系统的程序员拒绝花时间为这个字段创建验证，所以我必须在获得数据后尽可能多地执行它。通常，我会用一些简单的公式来处理这个问题，但是，用户输入数据的方式有 19 种不同的方式，我需要能够快速处理每一种方式。将列加载到数组中似乎是最好的选择。

我的想法是将列加载到一个数组中，循环遍历它，处理所有条目选项（或删除完全混乱的选项），然后将其写回工作表。**我知道数据类型是下面数组的第一个问题，但我之前在 Excel VB 中只使用过一次数组，我不太确定我做错了什么。第三行代码是第一个问题。**谢谢你的帮助。

**根据 BRTTDJ 的评论的工作代码**

```
'Perform housekeeping on delinquency date
Dim delinquency()
delinquency = Application.Transpose(Range("AH1:AH" & importwsRowCount))
For i = LBound(delinquency) To UBound(delinquency)
    If InStr(delinquency(i), ".") Then
        delinquency(i) = Empty
        Debug.Print "Emptied an array element at row " & i + 1
    End If
    'Additional string or numeric operations here to reformat bad entries.
Next i
Set delRange = Range("AJ1:AJ" & importwsRowCount)
iWS.names.Add Name:="dRange", RefersTo:=delRange
delinquency = Application.Transpose(delinquency) 'Transpose rows and columns
Range("dRange").Value = delinquency 'Write array to worksheet 
```

**需要重新格式化的不良条目示例**
~~**9 月。25, 20**~~（没有年份，没有年份！删除。）
**SEPT**（没有年份，没用，删除。）
**N/A**（垃圾！删除。）
~~**LONG TIME AG**~~（傻瓜认为这是个好主意，删除。）
~~**6 月 30 日, 200**~~（显然该字段只能保存 12 个字符，删除。）
**CHARGED OFF**（无用，删除。）
~~**94 DAYS**~~（取空格前面的所有字符并从包含订单日期的其他字段中减去以获得拖欠日期。）
~~**94 DPD**~~（DPD in某人聪明的头脑代表我相信过期的日子。同上。）
**2008-7-15 12**（不确定额外的数字是多少，取空格前的所有字符并转换。）
~~**无效**~~（删除。）
~~**空白**~~（什么都不做。）
~~**12282009**~~（使用嵌套的 LEFT 和 RIGHT 和 CONCATENATE 与 / 之间。）
~~**9202011**~~（添加前导零，然后与上面相同。）
~~**92410**~~（添加前导零，这将转换为 09/ 24/10)
~~**41261**~~（自 1899 年 12 月 31 日以来的天数，这将转换为 12/08/12）
~~**1023**~~（自拖欠的天数，从 ORDER DATE 中减去以获得拖欠日期。）
~~**452**~~（同上。）
~~**12**~~（同同上。）
~~**1432.84**~~（货币价值，低智商走狗误入。删除。）

**更新的代码，包括删除错误条目（正在进行中）**

```
'Perform housekeeping on delinquency date
Columns("AH:AH").Select
Selection.NumberFormat = "0"
Selection.Copy
Selection.PasteSpecial Paste:=xlValues, Operation:=xlNone, SkipBlanks:= _
    True, Transpose:=False
Dim delinquency()
ReDim del(1 To importwsRowCount, 1 To 1)
del = Range("AH1:AH" & importwsRowCount).Value
For i = LBound(del, 1) To UBound(del, 1)
    delChars = Len(del(i, 1)) 'Determine length of entry
    If IsNumeric(del(i, 1)) = True Then 'Determine datatype of entry
        delType = "Numeric"
    Else
        delType = "String"
    End If
    If InStr(del(i, 1), ".") Then 'Removes monetary entries like 142.84
        del(i, 1) = Empty
    ElseIf InStr(del(i, 1), "*") Then 'Removes ***INVALID*** entries
        del(i, 1) = Empty
    ElseIf delChars = 12 Then 'Removes all entries that extend beyond the 12 character limit of the field and get cut off
        del(i, 1) = Empty
    ElseIf delType = "String" And Len(del(i, 1).Value) < 10 And InStrRev(del(i, 1).Value, " ") Then 'Takes the number from entries like 2194 Days or 23 DPD
        del(i, 1).Value = Left(del(i, 1).Value, Len(del(i, 1).Value) - InStrRev(del(i, 1).Value, " "))
        If IsNumeric(del(i, 1)) = False Then 'If the characters to the left of the space are not numbers, discard
            del(i, 1).Value = Empty
        Else
            del(i, 1).Value = Format((CLng(Range("E" & i + 1).Value) - Abs(del(i, 1).Value)), "mm/dd/yy") 'Pull order date and subtract days from it for delinquency date
        End If
    ElseIf delType = "Numeric" And Len(del(i, 1)) = 5 Then
        If del(i, 1).Value > CLng(Date) Then 'Value is greater than todays date, improperly formated date that needs character manipulation and / added
            del(i, 1).Value = Format(del(i, 1).Value, "000000") 'Add leading zero
            del(i, 1).Value = DateSerial(Right(del(i, 1).Value, 2), Left(del(i, 1).Value, 2), Right(Left(del(i, 1).Value, 2), 4)) 'Grab year, then month, then day for serialize
        Else
            del(i, 1).Value = Format(del(i, 1).Value, "mm/dd/yy") 'Properly formated date that just needs format conversion
        End If
    ElseIf delType = "Numeric" And (delChars = 7 Or delChars = 8) Then
        If delChars = 7 Then
            del(i, 1).Value = Format(del(i, 1).Value, "00000000") 'Add leading zero
        End If
        del(i, 1).Value = DateSerial(Right(del(i, 1).Value, 4), Left(del(i, 1).Value, 2), Right(Left(del(i, 1).Value, 2), 6)) 'Grab year, then month, then day for serialize
    ElseIf delType = "Numeric" And delChars < 5 Then
        del(i, 1).Value = Format((CLng(Range("E" & i + 1).Value) - Abs(del(i, 1).Value)), "mm/dd/yy")
    End If
Next i
Set dRange = Range("AJ1:AJ" & importwsRowCount)
iWS.names.Add Name:="dRange", RefersTo:=delRange
delinquency = Application.Transpose(delinquency) 'Transpose rows and columns
Range("dRange").Value = delinquency 'Write array to worksheet 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T06:00:46.787

线的原因

```
delinquency = Application.Transpose(["AH1:AH" & importwsRowCount]) 
```

错误是`["AH1:AH" & importwsRowCount]`无效的（它返回一个字符串，而不是一个范围）。

`[...]`是`Evaluate`方法的捷径。要让它返回一个范围引用，您需要执行类似`[AH1:AH60000]`ie 的操作，而无需`""`. 最好以常规方式引用范围

```
delinquency = Application.Transpose(Range("AH1:AH" & importwsRowCount])) 
```

`Transpose`也就是说，如果您声明`delinquency`为二维数组，则实际上不需要使用。

```
ReDim delinquency(1 To importwsRowCount, 1 To 1) 
```

所以，你的代码变成

```
Dim delinquency() As Variant
ReDim delinquency(1 To importwsRowCount, 1 To 1)
delinquency = Range("AH1:AH" & importwsRowCount).Value
For i = LBound(delinquency, 1) To UBound(delinquency, 1)
    If InStr(delinquency(i, 1), ".") Then
        delinquency(i, 1) = Empty
    End If
    'MANY ADDITIONAL OPERATIONS HERE
Next i
Set delRange = Range("AJ1:AJ" & importwsRowCount)
iWS.Names.Add Name:="dRange", RefersTo:=delRange
Range("dRange").Value = delinquency 'Write array to worksheet 
```

笔记：

1.  `Range("AH1:AH" & importwsRowCount)`指的是上的一个范围`ActiveSheet`
2.  为了稳健，您应该在工作表引用中明确说明。所以使用类似的东西

.

```
Dim wsData as Worksheet
Set wsData = ActiveSheet ' or whatever sheet you want
delinquency = wsData.Range("AH1:AH" & importwsRowCount).Value
Set delRange = wsData.Range("AJ1:AJ" & importwsRowCount) 'assuming you want to refer to the same sheet
iWS.Names.Add Name:="dRange", RefersTo:=delRange  ' not sure what this is for, but be sure your Name referes tot he right sheet
' Might be better to use this, if you need to use the Name at all
iWS.Names("dRange").RefersToRange = delinquency 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T22:39:20.063

鉴于您接受了 Chris 的后期帖子，该帖子部分涵盖了与我之前评论相同的基础，我已更新此帖子作为这些更改的答案（我之前的评论中标记的第一个）

1.  `Redim`在使用它来捕获您的范围之前，不需要变体数组。这是一条多余的行，因为变量数组会自动适应输入的范围。
    ~~`ReDim delinquency(1 To importwsRowCount, 1 To 1)`~~
2.  稍作调整，但在使用范围时使用`Value2`优于默认值`Value`

然后，您可以选择设置定义为*rows x columns*或*columns x rows*的变体数组。

通常采用第一种方法，因为仅在以下任一情况下才需要转换

1.  您正在使用单列或单行，并且想要使用一维数组（根据您的问题 - 所以`Transpose`仍然需要 a ）
2.  稍后`ReDim`将用于调整数组行的大小。使用时`Redim Preserve`，只有最后一个维度可以调整大小。因此，如果您以后想要减少与数组中的*行*相关的数据量，则需要设置数组`Transpose`以生成*列 x 行*。

我关于[变体数组](http://www.experts-exchange.com/Software/Office_Productivity/Office_Suites/MS_Office/Excel/A_2684-Using-varinat-arrays-in-VBA-for-large-scale-data.html)的文章位于 EE 付费墙之外。你能再试试看吗？

**标准用法**

```
Sub RowByColumn()
Dim delinquency() 
delinquency = Range("AH1:AH" & importwsRowCount).Value2 
```

**转置用法**

```
Sub ColumnByRow()
'creates a 1D array when working on a single column or row. creates a *column X row* array on a 2D array
Dim delinquency() 
delinquency = Application.Transpose(Range("AH1:AH" & importwsRowCount).Value2) 
```

# objective-c - 以编程方式更改 iPhone 5 的 UIView 布局

> ID：13244803
> 
> 赞同：0
> 
> 时间：2012-11-06T05:15:16.783
> 
> 标签：objective-c, ios, cocoa-touch, uiview, resize

我正在尝试以编程方式更改 UIView 的布局，而不是使用自动布局，因为我正在尝试为 iOS 4 及更高版本部署此应用程序。我基本上将屏幕高度设置为 455（iPhone 5）（我知道实际屏幕尺寸是 568 点，但我在底部有一个标签栏，所以我假设 IB 中显示的尺寸已经考虑到了这一点）。我记录了所有按钮和标签相对于较长屏幕尺寸的来源，并以编程方式将它们更改为我喜欢的方式。问题是，一些按钮和标签现在从屏幕上消失了，所以我认为我必须执行某种转换以将它们保持在界限内，但我不确定是什么。请参阅下面的图片：

调用我的 initMethod 之前的图像以更改按钮和标签原点 调用我的 initMethod 以更改 XCode 中旧屏幕尺寸 ![](../Images/23aa7fb0f629a45dc99a7ef7c1ce8115.png) 的原点 视图属性之后的图像 这就是我希望视图的外观。我移动了按钮并记录了每个按钮的起源。 我在 viewWillAppear 中的 init 方法的图片。注意标签的框架是如何为零的。 这是我使用的代码：![](../Images/d7a77c4e0ed8e993bd3f49c87731b8b2.png)![](../Images/234d1fd1ecee27f870a90ee7be1fea82.png)![在此处输入图像描述](../Images/2a4557e037d9823d2ae79cde7ef936be.png)![在此处输入图像描述](../Images/71feffbaf825fdb1223f7ff626b477cb.png)

```
-(void)initView
{
    CGRect screenBounds = [[UIScreen mainScreen] bounds];
    if (screenBounds.size.height == 480) {
        //iphone 4,4s
        //done
    }else if(screenBounds.size.height == 568) {
        //iphone 5
        CGRect frame;
        //Static Professor label
        frame = [staticProfessorLabel frame];
        frame.origin.x = 48;
        frame.origin.y = 218;
        [staticProfessorLabel setFrame:frame];
        //Professor Label
        frame = [professorLabel frame];
        frame.origin.x = 192;
        frame.origin.y = 218;
        [professorLabel setFrame:frame];
        //show button
        frame = [showProfessorButton frame];
        frame.origin.x = 67;
        frame.origin.y = 258;
        [showProfessorButton setFrame:frame];
        //clear proff button
        frame = [clearProfessor frame];
        frame.origin.x = 240;
        frame.origin.y = 258;
        //note label
        frame = [bottomNote frame];
        frame.origin.x = 160;
        frame.origin.y = 310;
        [bottomNote setFrame:frame];
        //search button
        frame = [searchButton frame];
        frame.origin.x = 158;
        frame.origin.y = 424;
        [searchButton setFrame:frame];
        //spinner
        frame = [actIndicator frame];
        frame.origin.x = 266;
        frame.origin.y = 424;
        [actIndicator setFrame:frame];
    }
} 
```

另外，我在 viewDidAppear 方法中调用它是因为当我在 viewDidLoad 中调用它时，没有一个按钮和标签给我一个有效的框架（我猜它们还没有初始化）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T07:12:40.857

您的 Xcode 屏幕截图显示您的故事板包含约束，因此我们可以判断您的故事板已打开自动布局。如果要直接在代码中设置视图框架，则必须关闭自动布局。

如果您需要帮助关闭情节提要上的自动布局，请在此处查看[我的答案。](https://stackoverflow.com/a/13201690/77567)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T06:00:15.260

您的硬编码坐标完全错误。只需仔细检查您的价值观。

例如，`bottomNote`从`x`160 开始，这显然太靠右了。

# javascript - 使用 RegEx 获取包装的字符串

> ID：13244812
> 
> 赞同：0
> 
> 时间：2012-11-06T05:15:50.507
> 
> 标签：javascript, regex

考虑以下刺痛：

```
'aaa (d) ddd (xc) ' 
```

我如何使用匹配函数获得以下结果：

```
["d","xc"] 
```

我试过`'aaa (d) ddd (xc) '.match(/\(.*?\)/g)`但它返回：`["(d)","(xc)"]`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T06:34:40.657

稍微调整一下 Korikulum 的正则表达式......

如果没有`.*`指定任何不是左括号的内容：

```
'aaa (d) ddd (xc) (more) text'.match(/[^\(]+(?=\))/g) // >> ["d", "xc", "more"] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T05:53:06.540

由于 JavaScript 不支持向后看，你可以这样做：

```
var a = 'aaa (d) ddd (xc)'.match(/\(.*?(?=\))/g);

for (var i = 0; i < a.length; i++)
  a[i] = a[i].slice(1); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T06:20:20.413

你可以用`replace`代替来做到这一点`match`。我今天回答了一个[类似的问题](https://stackoverflow.com/questions/13243292/regexp-headache-for-mixed-text-digits/13243515#13243515)：

```
var str = 'aaa (d) ddd (xc)', 
    results = [];
str.replace(/\(([^()]+)\)/g, function(a,b) { results.push(b) });

console.log(results); //=> ['d', 'xc'] 
```

# vba - 如何在 MS Access 中引用子表单

> ID：13244813
> 
> 赞同：5
> 
> 时间：2012-11-06T05:16:14.257
> 
> 标签：vba, ms-access, ms-access-2010, subform

在我的 MS Access 应用程序中，我使用的表单只包含两个控件 - 一个文本框和一个命令按钮。这种形式被命名为`HEADER FORM`。

`HEADER FORM`用作各种其他表单的标题部分的子表单。

我想要做的是，每当加载特定表单时，我想在文本框中填写详细信息`HEADER FORM`（这将是已登录的人的姓名。从下图中也可以清楚地看到）。

我正在尝试调用以`updateHeader`所有表单的表单加载事件命名的全局子例程。

```
Public Sub updateHeader()
    Me![HEADER FORM].Form.txtHeaderName.Value = strPerson
End Sub 
```

以下是`HEADER FORM`在设计视图中显示的图片，它被用作登录表单中的子表单。

![在此处输入图像描述](../Images/aa3eb91a80a4fbe14e24212878cb6c24.png)

我尝试了各种其他选项，但无法找到引用表单的正确方法。我从根本上做错了什么吗？

我看到的错误是无效使用`Me`关键字。另外，我的`updateHeader`子程序是一个全局子程序，它从所有表单的 Form_Load 事件中调用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T07:23:29.483

如果您的`updateHeader()`程序包含在标准模块中，那将解释对关键字的抱怨`Me`......它在标准模块中无效。

在表单模块中，`Me`表示“此表单”。

您可以更改过程声明以接受对表单的引用。

```
Public Sub updateHeader(ByRef TheForm As Form)
    ' Me![HEADER FORM].Form.txtHeaderName.Value = strPerson
    TheForm![HEADER FORM].Form.txtHeaderName = strPerson
End Sub 
```

`.Value`是默认属性，因此这里不需要，所以我把它省略了。但是，如果您愿意，可以将其添加回来。

然后，您可以从父窗体调用该过程，并将对该过程的引用传递给它自己（父窗体）。

```
updateHeader Me 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-15T09:27:37.763

我从 Wiley.Microsoft.Office.Access.2007.Bible 获得了这些“语法版本”：引用子表单控件时：

**Forms![FormName]![SubformName].Form![ControlName]**

在子表单中使用/引用子表单时，请使用以下语法： **Forms![FormName]![SubformName].Form![SubSubformName].Form.[ControlName]**

# android - Android 示例蓝牙聊天

> ID：13244816
> 
> 赞同：1
> 
> 时间：2012-11-06T05:16:03.440
> 
> 标签：android, bluetooth, forceclose

我已经尝试了来自 Android SDK 的蓝牙聊天示例代码。代码没有错误，在设备上安装了APK，打开蓝牙聊天时，抛出强制关闭。

我使用的是真机调试，即 Galaxy Nexus S。

请帮我 。. 提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-15T19:41:52.367

我设法通过以下方式修复它：

1.  更改 AndroidManifest.xml：基本上将其工作`<uses-sdk android:maxSdkVersion="17" android:targetSdkVersion="11" android:minSdkVersion="11"/>`的版本升级到第 11 个版本是 Android 3.0 (Honeycomb)。
2.  还删除了 AndroidManifest.xml 中引用样式的行`android:theme="@android:style/Theme.Holo.Dialog"`
3.  主要活动是 BluetoothChat，所以查看 logCat 我可以看到还有什么抛出异常，233 附近的方法 setStatus 抛出 NullPointerEception，因为 onCreate 方法需要下面的代码，就在 super.onCreate 调用之后。感谢[这篇](https://stackoverflow.com/questions/10031180/getactionbar-returns-null)文章 `getWindow().requestFeature(Window.FEATURE_ACTION_BAR);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T14:20:10.817

我不确定这是否仍然适用于您，但我遇到了同样的问题。

我下载了示例，将其加载到三星 S3（果冻豆）上，并在提示蓝牙后一直崩溃。一开始没有任何错误。因此，我尝试使用您 `mBluetoothAdapter = BluetoothAdapter.getDefaultAdapter()` 在代码中删除的方法（在 Eclipse 上），并提示它是只读的以及我是否想让它可写。这样做后出现了一些错误，提示说 getDefaultAdapter 适用于 API 5，当前 minSdk 为 1。因此我查看了清单文件以了解为什么它会出现问题，因为我将其设置为 minSdkVersion=5 .

在使清单文件可写如前面提到的java文件时，我意识到错误是由于这一行

`android:theme="@android:style/Theme.Holo.Dialog"`

它需要 11 的 API。因此我更改为 android:minSdkVersion="11" 现在它可以完美运行。

# machine-learning - 语音识别方面是否有任何现有的研究可以区分不同人的语音？

> ID：13244820
> 
> 赞同：5
> 
> 时间：2012-11-06T05:16:30.197
> 
> 标签：machine-learning, data-mining, speech-recognition, voice-recognition

我刚刚想出了一个想法，我想开发一个应用程序来区分/自动检测来自不同人的声音。

示例用例：在使用 Obama 和 Romney 的数据进行训练后，应用程序将能够检测到任何一方再次说话（不需要训练数据中的相同内容）

我想知道是否有这方面的现有研究。（我不知道如何搜索这个。我尝试了几个关键字并没有得到显着的结果。）

如果没有，什么是开始的好方法？如何选择特征、数据表示、模型等。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-06T05:32:00.847

我在 Wikipedia 上找到了[说话人识别](http://en.wikipedia.org/wiki/Speaker_recognition)，它又链接到[与文本无关的说话人识别概述：从特征到超向量](http://cs.joensuu.fi/pages/tkinnu/webpage/pdf/speaker_recognition_overview.pdf)（Kinnunen，Li，2010）。

从论文的摘要：

> 本文概述了自动说话人识别技术，重点是与文本无关的识别。几十年来一直在积极研究说话人识别。我们概述了经典方法和最先进的方法。

# web-services - Oracle 服务总线数据库适配器

> ID：13244826
> 
> 赞同：0
> 
> 时间：2012-11-06T05:17:07.073
> 
> 标签：web-services

我正在尝试使用 Oracle Service Bus DB Adapter 创建基于 REST 的服务。在查询中传递了四个参数，其中任何时候只有 2 个传递。例如：

[http://www.example.com/findPerson/personId=&birthDt=&ss=&lastname=](http://www.example.com/findPerson/personId=&birthDt=&ss=&lastname=)

birthDt 总是通过，但其他 3 个中只有 1 个通过。其他参数为空。

对我来说，要进行数据库查找，我只需要birthDt 和其他 3 个中的 1 个已通过。

OSB 中有没有办法根据传入的内容进行条件选择？我是否执行 Select 或“Query By Example”或“Invoke a stored procedure”来返回我需要的内容？

在响应 REST 服务调用时，我需要以 XML 格式返回几个元素。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T06:50:19.040

您可以在后端创建一个存储过程，其中包含所有输入参数作为输入（其中 3 个具有“默认空值”）

创建或替换过程 my_procedure (p_parm1 in varchar2 default null, etc ..

并在存储过程中检查填充了哪些参数来构造您的选择语句。在 osb 上的 xquery 中，您将需要检查您的 rest 调用中的哪些参数已填写，以便将这些参数映射到存储过程调用的可选参数上。

或者您可以使用 db 适配器中的“选择语句”选项并使用如下结构：

select * from my_table where kolom1 = :p_name 或 :p_name 为空

现在您可以根据输入参数的值展开整个查询

同样对于这种情况，您需要在 osb 中使用 xquery，它将您的其余参数“映射”到 select 语句参数。最简单的方法是我认为只需将整个查询参数字符串传递到您的 xquery 并使用 substring/substring-after 等从其中获取不同的参数及其值并将这些值映射到您的数据库的输入 xml 有效负载适配器调用。

# bash - 如何减少一组线取平均值？

> ID：13244827
> 
> 赞同：1
> 
> 时间：2012-11-06T05:17:12.873
> 
> 标签：bash, unix, sed, awk

我有一个包含这样行的文件（列是制表符分隔的）

```
2    1.414455    3.70898
2    2.414455    3.80898
2    3.414455    3.90898
2    1.414455    3.90898
4    4.414455    7.23898
4    3.414455    6.23898
4    5.414455    8.23898 
```

即有连续的行，其中第一列是整数，其余两列是浮点数。

我想减少它们如下

```
2    2.164455    3.75898
4    4.414455    7.23898 
```

**我保留第一列，并对具有相同第一列的所有元素取第二列和第三列的平均值**。具有相同第一个元素的连续行数可能不同，但它们始终是连续的。

我可以在 perl 中做到这一点，但想知道是否有更简单的 bash / sed / awk 组合可以为我做同样的事情？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T05:24:39.203

使用 awk：

```
awk '{a[$1]+=$2;b[$1]+=$3;c[$1]++;}END{for(i in c)print i, a[i]/c[i],b[i]/c[i];}' file
2 2.16445 3.83398
4 4.41446 7.23898 
```

使用 3 个不同的数组：a 和 b 保留第 2 列和第 3 列的总和，c 保留元素的数量。最后，计算平均值并打印出来。

# c# - 通过 web 服务从 asp.net 连接多个服务器

> ID：13244829
> 
> 赞同：0
> 
> 时间：2012-11-06T05:17:28.537
> 
> 标签：c#, asp.net, web-services, webservices-client

感谢您阅读我的问题。我想知道您是否对这个问题有任何想法。

1.  我写了一个 SOAP-SERVER。在 CentOS 上运行它。更改 Soap-Server 的 IPAddress 以与 CentOS Ifconfig 匹配。

2.  在 CentOS 中运行 SOAP-SERVER。

3.  使用VisualStudio工具添加WebReference。它会自动生成一个定义对象类。在这个类中，它包含了SOAP-SERVER的所有功能。

4.  开发人员将使用这些功能在 ASP.Net-Client 上做一些事情。

但是，当我想从 ASP-NET 连接到更多的 SOAP-SERVER（在其他 CentOS 中）时。而且我们不能使用 AddWebReference 。因为用户将使用 Web 表单来输入这些 SOAP-SERVER 的 IPAddress。

你有什么主意吗？无论如何感谢您的帮助。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T07:43:19.387

你必须保持一个固定的号码。具有相同 IP 地址的服务器，否则每次您想要访问服务时，您都必须为此更改 Visual Studio 中的服务代理类或服务引用。您可以做的不是让用户输入 IP 地址，而是显示您所有的列表并让他选择一个。

# sql - SQL Server 2000 从最大日期查询总值和值

> ID：13244832
> 
> 赞同：3
> 
> 时间：2012-11-06T05:17:54.840
> 
> 标签：sql, sql-server, sql-server-2000

我有这个有价值的 RoomTable

```
SID   Room   Date        APhase   BPhase   ACount  BCount
1     One    10/28/2012  4        5         3       6
2     One    10/29/2012  2        3        -1      -1
3     One    10/30/2012  4        5         7      -1
4     Two    10/28/2012  8        3         2       3
5     Two    10/30/2012  3        5         4       6
6     Three  10/29/2012  5        8         2      -1
7     Three  10/30/2012  5        6        -1       4
8     Four   10/29/2012  6        2        -1      -1
9     Four   10/30/2012  5        8        -1      -1 
```

我想要的是返回以下内容：

1.  每个房间的 APhase 和 BPhase 的总和。
2.  从每个房间的最大日期开始的 ACount 和 BCount 的值
3.  如果 ACount 值为 -1，则使用前一个日期。与 BCount 相同。
4.  如果 ACount 值为 -1 且前一个日期为 -1，依此类推。然后使用 0。与 BCount 相同。

我可以用这个查询得到 1 号的查询

```
SELECT Room, sum(APhase) as TotalAPhase, sum(BPhase) as TotalBPhase 
FROM RoomTable 
WHERE Date between '10/28/2012' and '10/30/2012'
group by Room
order by Room 
```

但我对如何包含数字 2-4 查询感到困惑。

这是我想要的输出

```
Room  TotalAPhase  TotalBPhase  ACount   BCount
One   10           13           7        6
Two   11           8            4        6
Three 10           13           2        4
Four  11           10           0        0 
```

任何想法将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-06T05:38:23.583

希望这适用于您的情况：

```
SELECT 
Room
,SUM(APhase) AS TotalAPhase
,SUM(BPhase) AS TotalBPhase 
,ISNULL((    SELECT TOP 1 RT1.ACount 
             FROM RoomTable RT1 
             WHERE RT1.Room = RT.Room 
                AND RT1.ACount != -1
             ORDER BY RT1.Date DESC
), 0) AS ACount
,ISNULL((   SELECT TOP 1 RT2.BCount 
            FROM RoomTable RT2
            WHERE RT2.Room = RT.Room 
               AND RT2.BCount != -1
            ORDER BY RT2.Date DESC
), 0) AS BCount

FROM RoomTable RT
--WHERE Date between '10/28/2012' and '10/30/2012'
GROUP BY Room
ORDER BY Room 
```

我不确定你是否真的需要那个 where 子句，所以我把它注释掉了。[从这个 SQL Fiddle 演示](http://sqlfiddle.com/#!3/cc787/1)中可以看出，结果表上 Room 3 的 TotalBPhase 值应该是 14 。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-06T07:18:04.837

您可以使用@yildizm85 的答案，或者如果您想要更高性能的代码，您可以将所有任务分解为更小的步骤并使用表变量来实现相同的目标。请参阅下面的查询...

```
declare @roomResult table
(Room nvarchar(50), maxadate datetime, maxbdate datetime, TotalAPhase int , TotalBPhase int , acount int, bcount int)

insert into @roomResult 
SELECT Room, null,null,sum(APhase) as TotalAPhase, sum(BPhase) as TotalBPhase ,0,0
FROM RoomTable 
group by Room
order by Room

update @roomresult 
set maxadate = mxdate  
from 
(
select room roomname, max( date) mxdate  from
(
select room, date , case when acount = -1 then null else acount end acount , case when bcount = -1 then null else bcount end bcount 
from roomtable ) as a where a.acount is not null
 group by room
) b inner join @roomresult c on b.roomname = c.room

update @roomresult 
set maxbdate = mxdate  
from 
(
select room roomname, max( date) mxdate  from
(
select room, date , case when bcount = -1 then null else bcount end bcount 
from roomtable ) as a where a.bcount is not null
 group by room
) b inner join @roomresult c on b.roomname = c.room

update @roomresult 
set acount = r.acount
from @roomresult rr inner join roomtable r
on rr.room = r.room and rr.maxadate = r.date

update @roomresult 
set bcount = r.bcount
from @roomresult rr inner join roomtable r
on rr.room = r.room and rr.maxbdate = r.date

select Room,TotalAPhase,TotalbPhase,ACount,BCount From @roomResult 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-06T05:39:35.377

您可以尝试查询类似这样的内容>>>

```
SELECT Room, sum(APhase) as TotalAPhase, sum(BPhase) as TotalBPhase 
FROM RoomTable 
WHERE Date =(select max(Date) from RoomTable group by Room order by Room)
and ACount=(update RoomTable set ACount=0 where ACount<0) and and ACount=(update RoomTable set BCount=0 where BCount<0)
group by Room 
order by Room 
```

# php - 使用 if 语句播放音频

> ID：13244833
> 
> 赞同：1
> 
> 时间：2012-11-06T05:18:23.233
> 
> 标签：php

嘿，伙计们正在寻找一个结束朋友的好方法，我想到了他每次打开他的 userdetails.php 时都讨厌播放的一首歌

这是代码

```
if ($CURUSER['id'] == 1)
stderr( "<embed name='Barbie Girl' src='/music/barbie.mp3' loop='true' hidden='true' autostart='true'/>

<font size=3>Sorry Brother Couldn't Resist </font>"); 
```

唯一的问题是它在那里停止页面，我一直试图让它播放歌曲并显示页面

任何帮助将不胜感激，它没什么大不了的，只是一个有趣的小结局，我想完成

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T05:23:45.867

首先，`stderr`应该换成`echo`.

其次，`embed`在这种情况下可能不支持，请尝试使用 html5 [Audio](http://www.w3schools.com/html/html5_audio.asp)标签，因为它在所有当前浏览器中都受支持。最重要的是，使用“ogg”音频文件，它可以在所有浏览器中播放。

# delphi - 将 tmemorystream 作为 var 传递

> ID：13244835
> 
> 赞同：1
> 
> 时间：2012-11-06T05:18:45.417
> 
> 标签：delphi, pointers, procedure, var

当我尝试将 tmemorystream 作为 var 或指向过程的指针传递时，它返回已损坏。这样做的正确方法是什么？

例如：

```
function tform1.downloadmemupdate(url, desc: string; var data: tmemorystream; var msg: string): boolean;
begin
  filelabel.Caption:=desc;
  downloadmemthread:=tdownloadmemthread.create(url);
  dlcancelbtn.Enabled:=true;
  downloadmemthread.dlstart;
  waitforsingleobject(downloadmemthread.Handle, INFINITE);

  downloadmemthread.data.SaveToStream(data); //corrupted
  downloadmemthread.data.SaveToFile('data.zip');  //works

  dlcancelbtn.Enabled:=false;
  result:=not (downloadmemthread.canceled and downloadmemthread.success);
  dlcanceled:=downloadmemthread.canceled;
  msg:=downloadmemthread.msg;
  downloadthread.Free;
end; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-06T05:43:11.583

您不在`data`此方法中创建。由于它是一个 var (byref) 参数，我希望它在 内创建 `tform1.downloadmemupdate`，即：

```
data := TMemoryStream.Create; 
```

请注意，如果您创建这样的对象，您将需要在其他地方释放它，可能在调用代码中。

例如

```
 Data := nil;
   try
     downloadmemupdate(url, desc, data, msg);
     // do something with data
   finally
     Data.Free;
   end; 
```

另一种选择（也是 Delphi 中的惯用方法）是按值传递对象（不带 var）。并将其留给调用代码来创建和销毁它们。这主要是因为 Delphi 没有垃圾收集，所以它迫使编写调用代码的人考虑“所有权”。

这将是

```
function tform1.downloadmemupdate(url, desc: string; data: TStream; var msg: string): boolean;
begin
  filelabel.Caption:=desc;
  downloadmemthread:=tdownloadmemthread.create(url);
  try
    ...
    downloadmemthread.data.SaveToStream(data); //corrupted
    downloadmemthread.data.SaveToFile('data.zip');  //works    
  finally
    downloadmemthread.Free;
  end;

end; 
```

调用代码：

```
 Data := TMemoryStream.Create;
   try
     downloadmemupdate(url, desc, data, msg);
     // do something with data
   finally
     Data.Free;
   end; 
```

# c# - 防止方法执行以及属性和变量访问/修改

> ID：13244836
> 
> 赞同：1
> 
> 时间：2012-11-06T05:19:00.493
> 
> 标签：c#, postsharp, modularity, aop

我对面向方面的编程没有经验。但是，我已经阅读了 PostSharp 提供的大量 PDF 和文档，并且我认为我理解了范式的要点。我有一个非常独特的问题，我相信 AOP 可以用来解决它。我的困境如下：

许多类将继承自`A`，可以是`enabled`或`disabled`。考虑一下`B`，哪个`extends A`。如果`B`是`disabled`，我希望禁用所有方法执行以及属性和变量访问/修改。也就是说，如果禁用`B.ExecuteMethod();`，`B.Property = newValue;`则不会有任何影响。`B`此外，如果期望返回值，则该值将默认为`0`or `null`if `B`is `disabled`。也就是说，我希望对象和值具有预期的默认值。

我正在使用 PostSharp C# 库，它看起来*非常*强大且开发良好。我相信我的问题可以通过`AttributeInheritance`. 例如，`A`可以定义为：

```
[ModularAttribute(AttributeInheritance = MulticastInheritance.Multicast)]
public class A {

    private bool m_enabled;

    public A(){
        m_enabled = true;
    }

    public bool Enabled() {
        get {
            return m_enabled;
        }
        set {
            m_enabled = value;
        }
    }
} 
```

并且`B`可以`extend A`。此外，我的属性`ModularAttribute`可以定义为：

```
[Serializable]
public sealed class ModularAttribute : OnMethodBoundaryAspect {

    public ModularAttribute() {
    }

    public override void OnEntry(MethodExecutionArgs args) {
        // only execute code if enabled
    }
} 
```

此属性将应用于`B`因为`B extends A`.

我的问题的根源是：我需要`ModularAttribute`引用`A`的`Enabled`属性，这样只有在为真`OnEntry`时才会执行代码。`Enabled`由于这是一个类级别的方面，因此我无法参数化 to 的包装版本，`m_enabled`因为`ModularAttribute`它超出了范围。

有没有办法让我知道`ModularAttribute`它的所有所有者都会`implement`有一个特定的`interface`? 如果是这样，可以`ModularAttribute`从所述访问特定属性`interface`吗？如果是这样，这将解决我的问题。

为了澄清，我想“告诉” PostSharp：“保证`class`使用的那个。所以，让访问任何定义，因为它可以确保工作。”`ModularAttribute``implement C``ModularAttribute``C`

`C`可以定义为：

```
public interface C { 
    public bool Enabled();
} 
```

因此，在 中`ModularAttribute`，我可以做一些类似的事情

```
if (attachedClass.Enabled == false) { 
    // don't execute code
} else {
    // execute code
} 
```

这个问题可以被认为是每个对象级别的身份验证，而不是更典型的每个用户级别。必须对每一个都进行`if, else`检查`Property`，`Method`这`extends A`似乎是一个跨领域的问题。因此，我认为 AOP 是解决这个问题的合适选择；但是，由于我对这种范式缺乏经验，我可能会以错误的方式接近它。

任何指导将不胜感激。谢谢您的帮助，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T13:27:06.620

我有点担心这么多的继承可能是一个设计缺陷，或者至少是一个巨大的维护问题，但假设不是，让我们继续……

我认为没有办法完全按照您的意愿去做。即使 PostSharp 有能力，C# 也需要在编译时知道类型（在 PostSharp 甚至接触它之前）。

我建议您使用 CompileTimeValidate 来验证使用方面的类是否属于某种类型，一旦到位，您就可以`args.Instance`转换为您的接口类型，而不必担心无效的转换异常。如果那个类*没有*实现`IEnabled`，那么你会得到一个编译时错误。

这是一个简单的例子：

```
public interface IEnabled
{
    bool Enabled { get; }
}

[Serializable]
public class ModularAttribute : OnMethodBoundaryAspect
{
    public override bool CompileTimeValidate(System.Reflection.MethodBase method)
    {
        if(typeof(IEnabled).IsAssignableFrom(method.DeclaringType))
            return true;
        Message.Write(method, SeverityType.Error, "MYERR001", "Aspect can't be used on a class that doesn't implement IEnabled");
        return false;
    }

    public override void OnEntry(MethodExecutionArgs args)
    {
        var obj = (IEnabled) args.Instance; // this will always be a safe cast
        if(!obj.Enabled)
            args.FlowBehavior = FlowBehavior.Return;
    }
} 
```

但是有一个问题：您不希望在 Enabled 属性本身上使用此方面，因为这会导致堆栈溢出（即方面检查属性，导致方面检查属性等）。所以一定要*排除* `Enabled`使用`AttributeExclude`.

```
class Program
{
    static void Main(string[] args)
    {
        var b = new B();
        b.Enabled = false;
        b.SomeMethod();
        b.AnotherMethod();
    }
}

public interface IEnabled
{
    bool Enabled { get; }
}

[Modular(AttributeInheritance = MulticastInheritance.Multicast)]
public class A : IEnabled
{
    [Modular(AttributeExclude = true)]
    public bool Enabled { get; set; }

    public void SomeMethod()
    {
        Console.WriteLine("in SomeMethod");
    }
}

public class B : A
{
    public void AnotherMethod()
    {
        Console.WriteLine("in AnotherMethod");
    }
} 
```

# iphone - 我的应用程序被 Apple 拒绝，因为它在 iPhone 5 上崩溃

> ID：13244837
> 
> 赞同：0
> 
> 时间：2012-11-06T05:19:07.667
> 
> 标签：iphone, objective-c, ios, xcode

由于以下原因，Apple 拒绝了我的应用程序：

1) 我们发现您的应用在运行 iOS 6.0.1 的 iPhone 5 上崩溃，这不符合 App Store Review Guidelines。

2) 您的应用在 Wi-Fi 和蜂窝网络上启动时崩溃。

* * *

我正在运行 Xcode 版本 4.3.2，我认为它与 iPhone 5 不兼容，所以我建议我的应用程序被拒绝，因为我在不支持 iPhone 5 架构的旧 Xcode 版本中对其进行了测试，对吧？

我认为苹果拒绝我的应用程序的第二个原因是因为即使我的应用程序也不通过代码使用互联网连接，我必须通过利用可达性库来检查启动时互联网连接的可用性，对吗？

请注意，我在模拟器和实际设备上都测试了我的应用程序，这些设备都运行 iOS 5.1.1 及更低版本，而不是 iOS 6

有什么帮助吗？提前谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T05:22:48.363

简单的：

*   使用模拟器和设备（iOS 6）使用更新版本的 Xcode 构建、调试和测试
*   删除引用的问题以及任何其他崩溃问题
*   重新提交

可达性不是必需的。您的应用程序需要优雅地处理错误（而不是崩溃/爆炸/泄漏/陷入奇怪的状态）。

# ios - 如何在 iOS 中使用原始数据播放音频？

> ID：13244840
> 
> 赞同：0
> 
> 时间：2012-11-06T05:19:29.890
> 
> 标签：ios, cocoa-touch, audio, playback, audioqueue

我一直致力于音频捕获和播放，我正在尝试使用缓冲区播放音频。我将缓冲区作为字符指针，如果该缓冲区中有任何内容，我必须从缓冲区中读取并播放。我开始了解 AudioQueue，但我不确定 AudioQueue 是否适合我的任务。任何人都可以这样做，请提出一些想法从哪里开始？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T05:36:28.247

是的，AudioQueues 适用于 LPCM 音频数据信号的播放和录制。在了解这一切如何工作之前，您需要了解很多关于音频信号和 CoreAudio API 的知识（音频信号和 AudioQueue 速成课程对于一个 SO 答案来说太大了）。

从一些 AudioQueue 示例和教程开始。预留充足的时间。

# image - 从图像 URL 加载图像需要很长时间才能显示

> ID：13244842
> 
> 赞同：12
> 
> 时间：2012-11-06T05:19:23.953
> 
> 标签：image, url, blackberry, java-me, image-uploading

我使用了以下链接中的代码：[**Signare's Blog**](http://rincethomas.blogspot.in/2012/04/display-image-from-url-in-bb.html)。我有 10 个图像 URL，想检索它们并将它们显示在我的屏幕上。当我使用上述链接中的代码时，加载所有图像需要 10 多分钟。如何加快加载速度？

```
URLBitmapField post_img= new URLBitmapField(image_url);
add(post_img); 
```

其中类`URLBitmapField`定义为：

```
import net.rim.device.api.math.Fixed32;
import net.rim.device.api.system.Bitmap;
import net.rim.device.api.system.EncodedImage;
import net.rim.device.api.ui.UiApplication;
import net.rim.device.api.ui.component.BitmapField;

public class URLBitmapField extends BitmapField implements URLDataCallback {
    EncodedImage result = null;
    public static EncodedImage _encoded_img = null;
    int _imgWidth = 52;
    int _imgHeight = 62;
    int _imgMargin = 10;

    public URLBitmapField(String url) {
        try {
            http_image_data_extrator.getWebData(url, this);
        }
        catch (Exception e) {}
    }

    public Bitmap getBitmap() {
        if (_encoded_img == null) return null;
        return _encoded_img.getBitmap();
    }

    public void callback(final String data) {
        if (data.startsWith("Exception")) return;
        try {
            byte[] dataArray = data.getBytes();
            _encoded_img = EncodedImage.createEncodedImage(dataArray, 0, dataArray.length); // with scale
            _encoded_img = sizeImage(_encoded_img, _imgWidth, _imgHeight);
            setImage(_encoded_img);
            UiApplication.getUiApplication().getActiveScreen().invalidate();
        }
        catch (final Exception e){}
    }

    public EncodedImage sizeImage(EncodedImage image, int width, int height) {
        int currentWidthFixed32 = Fixed32.toFP(image.getWidth());
        int currentHeightFixed32 = Fixed32.toFP(image.getHeight());
        int requiredWidthFixed32 = Fixed32.toFP(width);
        int requiredHeightFixed32 = Fixed32.toFP(height);
        int scaleXFixed32 = Fixed32.div(currentWidthFixed32,requiredWidthFixed32);
        int scaleYFixed32 = Fixed32.div(currentHeightFixed32,requiredHeightFixed32);
        result = image.scaleImage32(scaleXFixed32, scaleYFixed32);
        return result;
    }
}

public interface URLDataCallback {
    public void callback(String data);
} 
```

该类`http_image_data_extrator`定义为：

```
import java.io.IOException;
import java.io.InputStream;
import javax.microedition.io.Connector;
import javax.microedition.io.HttpConnection;
import net.rim.device.api.system.RadioInfo;
import net.rim.device.api.system.WLANInfo;
import net.rim.device.api.ui.UiApplication;

public class http_image_data_extrator {
    static String url_="";
    static StringBuffer rawResponse=null;

    public static void getWebData(String url, final URLDataCallback callback) throws IOException {
        HttpConnection connection = null;
        InputStream inputStream = null;
        try {
            if ((WLANInfo.getWLANState() == WLANInfo.WLAN_STATE_CONNECTED)&& RadioInfo.areWAFsSupported(RadioInfo.WAF_WLAN)) {
                url += ";interface=wifi";
            }
            connection = (HttpConnection) Connector.open(url, Connector.READ, true);
            String location=connection.getHeaderField("location");
            if(location!=null){
                if ((WLANInfo.getWLANState() == WLANInfo.WLAN_STATE_CONNECTED)&& RadioInfo.areWAFsSupported(RadioInfo.WAF_WLAN)) {
                    location += ";interface=wifi";
                }
                connection = (HttpConnection) Connector.open(location, Connector.READ, true);
            }else{
                connection = (HttpConnection) Connector.open(url, Connector.READ, true);
            }

            inputStream = connection.openInputStream();
            byte[] responseData = new byte[10000];
            int length = 0;
            rawResponse = new StringBuffer();
            while (-1 != (length = inputStream.read(responseData))) {
                rawResponse.append(new String(responseData, 0, length));
            }
            int responseCode = connection.getResponseCode();
            if (responseCode != HttpConnection.HTTP_OK){
                throw new IOException("HTTP response code: "+ responseCode);
            }

            final String  result = rawResponse.toString();
            UiApplication.getUiApplication().invokeLater(new Runnable() {
                public void run(){
                    callback.callback(result);
                }
            });
        }
        catch (final Exception ex) {
            UiApplication.getUiApplication().invokeLater(new Runnable() {
                public void run() {
                    callback.callback("Exception (" + ex.getClass() + "): " + ex.getMessage());
                }
            });
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T20:15:57.147

### 在服务器上调整大小

调整服务器上的图像大小是最好的答案。因为下载大图像并缩小它们需要设备上的很多东西（网络、内存、cpu）。

### 通过代理调整大小

如果图像服务器不在您的控制之下，您仍然可以使用自己的服务器作为调整大小的代理（将图像 url 和所需大小发送到您的服务器，它会获取图像、调整大小并返回调整大小的图像）。也许已经有一项服务可以做到这一点。

### 更便宜的解码选项

一些解码选项可能会使解码（和调整大小）更便宜。DECODE_NO_DITHER、DECODE_READONLY 和 DECODE_NATIVE 似乎都值得一试。
[http://www.blackberry.com/developers/docs/4.2api/net/rim/device/api/system/EncodedImage.html#DECODE_NO_DITHER](http://www.blackberry.com/developers/docs/4.2api/net/rim/device/api/system/EncodedImage.html#DECODE_NO_DITHER)

### 串行而不是并行

您提到您正在加载 10 张图像。如果 10 张图像所用时间是 1 张图像所用时间的 10 倍以上，则系统可能会“抖动”。就像它可能会启动所有 10 个请求，然后在回调中同时处理内存中的 10 个全尺寸图像。可以尝试在开始下载下一张之前显示第一张图片，这也让用户可以更快地查看。同样，并行调用 invalidate 10 次（在回调中）可能会导致打嗝。

# java - 打开跟踪文件时出错：没有这样的文件或目录 (2)，strings.xml 也未更新

> ID：13244845
> 
> 赞同：1
> 
> 时间：2012-11-06T05:19:36.963
> 
> 标签：java, android, trace

我正在创建一个 8 球应用程序，我正在使用反射将字符串从 strings.xml 文件中抓取到一个 ArrayList 中，但它所做的只是在其中找到默认字符串（甚至是 hello_world——我已删除）另外，我不知道如何从它所在的 Field 类中获取字符串值。

第一个 System.out.println() [字段数量] 为 4。它们都是默认 strings.xml 文件的默认值，它没有更新或查看添加/删除的资源。

它还提出了那个奇怪的跟踪文件错误

在调试器中，ansStuff 的大小为 23... [它假设的数量 [不是 4..]] 太奇怪了

```
 Field[] ansStuff = R.string.class.getFields();
    System.out.println(R.string.class.getFields().length);
    for(Field x :ansStuff){
        System.out.println(x);
        System.out.println(x.getName());
        System.out.println(x.toString());
        if(x.getName().startsWith("ans")){
            choices.add(/*the goddamned string*/"poop");
        }
    } 
```

在取出调试混乱之后，它就转化为这个

```
 for(Field x :R.string.class.getFields())
        if(x.getName().startsWith("ans"))
            choices.add(/*what do I add here to get the string value from the field in to the arraylist */); 
```

这是资源文件

```
<resources>
<string name="app_name">8ballRotate</string>
<string name="menu_settings">Settings</string>
<string name="title_activity_main">MainActivity</string>
<string name="ans0">It is certain</string>
<string name="ans1">It is decidedly so</string>
<string name="ans2">Without a doubt</string>
<string name="ans3">Yes – definitely</string>
<string name="ans4">You may rely on it</string>
<string name="ans5">As I see it, yes</string>
<string name="ans6">Most likely</string>
<string name="ans7">Outlook good</string>
<string name="ans8">Yes</string>
<string name="ans9">Signs point to yes</string>
<string name="ans10">Reply hazy, try again</string>
<string name="ans11">Ask again later</string>
<string name="ans12">Better not tell you now</string>
<string name="ans13">Cannot predict now</string>
<string name="ans14">Concentrate and ask again</string>
<string name="ans15">Don\'t count on it</string>
<string name="ans16">My reply is no</string>
<string name="ans17">My sources say no</string>
<string name="ans18">Outlook not so good</string>
<string name="ans19">Very doubtful</string>
</resources> 
```

# asp.net - 无法下载名称中包含特殊字符的文件

> ID：13244847
> 
> 赞同：1
> 
> 时间：2012-11-06T05:20:05.403
> 
> 标签：asp.net

我有一些代码如下所示： FileInfo file = new FileInfo(path); 这里的“路径”是文档的完整路径。对于像 é 这样的特殊字符，这在所有浏览器中都可以正常工作，但在 IE 中失败，除了 IE9。问题就像这个链接[http://blogs.adamsoftware.net/Web_Development/Thecaseofthestrangefilenames.aspx](http://blogs.adamsoftware.net/Web_Development/Thecaseofthestrangefilenames.aspx) ！

# java - Android - 避免列表视图上的多个项目并从数据库中正确删除项目

> ID：13244849
> 
> 赞同：0
> 
> 时间：2012-11-06T05:20:07.920
> 
> 标签：java, android, listview, items

在应用程序的一个片段中，我将项目添加到数据库（Cart 类）并以下列方式（仅方法）捕获列表视图中的 editText `getView()`：

```
public View getView(int position, View convertView,final ViewGroup parent) {
View v = convertView;
        if (v == null) {
            LayoutInflater vi = (LayoutInflater) getActivity()
                           .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            v = vi.inflate(R.layout.layout_product, null);

final Button addToCart = (Button) v.findViewById(R.id.button_addToCart);
                addToCart.setTag(position);

addToCart.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {
                // Fetch product id
                int position = (Integer) v.getTag();
                // Fetch amount of product
                LinearLayout rowLayout = (LinearLayout) v.getParent();
                EditText editText_amount = (EditText) rowLayout
                        .findViewById(R.id.editText_amount);
                try {
                    int amount = Integer.parseInt(editText_amount.getText()
                            .toString());
                    String k = Integer.toString(amount); 
            Toast.makeText(getActivity(),k,Toast.LENGTH_SHORT).show();

                    Cart.AddToCart(products.get(position), amount);

                } catch (NumberFormatException e) {
                    return;
                }
            } 
```

Cart 类（数据库）：

```
public class Cart {
static HashMap<Integer, JSONObject> products = new HashMap<Integer, JSONObject>();

public static void AddToCart(JSONObject product, int amount) {
    int product_id;

    try {
        product_id = product.getInt("product_id");
        product.put("product_id", amount);
    } catch (JSONException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
        return;
    }

    products.put(product_id, product);
}

public static void ExcludeFromCart(JSONObject product, int amount) {
    int product_id;

    try {
        product_id = product.getInt("product_id");
        product.put("product_id", amount);
    } catch (JSONException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
        return;
    }

    products.remove(product_id);
}

public static JSONObject[] GetProducts()
{
    return products.values().toArray(new JSONObject[products.size()]);
}
} 
```

以及填充和处理 Cart 类中添加的项目的列表视图的片段（只是`getView()`方法）：

```
public View getView(int position, View convertView,
            final ViewGroup parent) {
        ViewGroup p=parent;
        View v = convertView;
        if (v == null) {

            LayoutInflater vi = (LayoutInflater) getActivity()
                    .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            v = vi.inflate(R.layout.layout_cart, null);
Button remove = (Button) v.findViewById(R.id.remove);
        remove.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {
                // Fetch product id
                int position = (Integer) v.getTag();
                String k = Integer.toString(position);

                Toast.makeText(getActivity(),k,Toast.LENGTH_SHORT).show();
                // Fetch amount of product
                LinearLayout rowLayout = (LinearLayout) v.getParent();
                EditText editText_amount = (EditText) rowLayout
                        .findViewById(R.id.editText_amount_cart);
                try {
                    int amount = Integer.parseInt(editText_amount.getText()
                            .toString());

                    Cart.ExcludeFromCart(products.get(position), amount);
                    v.invalidate();
                    notifyDataSetChanged();
                } catch (NumberFormatException e) {
                    return;
                }

            }
        }); 
```

问题是偶尔（并非总是如此，更奇怪的是）我可以将多个项目添加到购物车（我当然想避免这种情况），当我按下删除按钮时，什么也没有发生（listView 的项目不是删除）。将不胜感激您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T08:46:20.730

该问题很可能是由于不正确使用`convertView`. 您的代码假定`convertView`传递给`getView`匹配的`position`参数是不正确的假设。

为了验证这个假设，你可以用 替换（在两个 getViews 中）`View v = convertView;`吗`View v = null;`？（因此您不使用convertView）

如果这工作正常，那么我建议将 vi.inflate 之后的所有内容（在两个 getViews 中）放在周围的 if 语句之外。因此，您再次将标签设置为正确的值。

# java - Spring动态验证

> ID：13244856
> 
> 赞同：1
> 
> 时间：2012-11-06T05:20:48.910
> 
> 标签：java, spring, validation

我是 Spring 验证的新手。以前我使用过 Struts 验证。对于动态验证，我们将在 errormessages.properties 文件中进行配置，例如“errors.required={0} is required”。稍后我们将用名称替换 {0}。无论如何在春天也这样做。请帮我。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T06:26:44.730

波纹管代码片段可能会对您有所帮助。

errormessages.properties

```
 errors.required={0} is required 
```

您需要在 spring-context.xml 中定义 ResourceBundleMessageSource bean。

```
<bean id="messageSource" class="org.springframwork.context.support.ResourceBundleMessageSource"> 
    <property name="messages">
         <list>
           <value>errormessages</value>
         <list>
    </property>
</bean> 
```

在 bean messageSource 成员变量中访问消息。

```
@Autowired
private MessageSource messageSource; 
```

第二个参数是要传递的对象数组。

```
messageSource.getMessage("errors.required",new Object[]{"Name"},"Default Required Error Message",null); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-06T08:16:38.710

如果您正在实现 Spring Validator 接口（[http://static.springsource.org/spring/docs/current/spring-framework-reference/html/validation.html#validator](http://static.springsource.org/spring/docs/current/spring-framework-reference/html/validation.html#validator)） - 您可以使用直接指定消息参数

```
 void reject(String errorCode, Object[] errorArgs, String defaultMessage); 
```

# titanium-mobile - createImageView 和 createView 有什么区别（Titanium Studio）

> ID：13244863
> 
> 赞同：-2
> 
> 时间：2012-11-06T05:21:36.163
> 
> 标签：titanium-mobile

我正在使用 Titanium Studio 进行移动开发。下面两个东西用来显示图像。但我可以知道跟随之间的区别，

```
1\. Ti.UI.createImageView({ width:100, height:50, Image:'image path' });

2\. Ti.UI.createView({ width:100, height:50, backgroundImage:'image path' }); 
```

两者都显示指定的图像。这两者有什么区别。craeteView 也显示图像，为什么我们使用 createImageView。

任何人都可以请..

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-06T08:30:29.243

View 是一个空的绘图表面或容器，它是 Titanium 中所有 UI 小部件的基本类型，其中图像视图是用于显示单个图像或一系列动画图像的视图。Titanium.UI.ImageView 的所有事件都继承自 Titanium.UI.View。您不能使用视图制作动画，并且图像视图还有一些额外的事件，如开始、停止、暂停、加载等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T19:05:13.260

主要区别是你可以在 ImageView 中显示 URL 图像（或远程图像），而你只能在 View 中显示资源图像

```
var view = Ti.UI.createView();
var imageView = Ti.UI.createImageView();

//Valid:
view.backgroundImage = 'image.png';
imageView.backgroundImage = 'image.png';
imageView.image = 'http://somesite.com/image.png';

//Invalid:
view.backgroundImage = 'http://somesite.com/image.png';
imageView.backgroundImage = 'http://somesite.com/image.png'; 
```

此外，正如@Anand 所说，您可以在 ImageView 中显示一系列图像

# wireshark - 捕获到达路由器的数据包

> ID：13244864
> 
> 赞同：0
> 
> 时间：2012-11-06T05:21:39.080
> 
> 标签：wireshark, router

如何使用wireshark 捕获所有发往路由器的数据包。我想在路由器上运行wireshark。这可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T12:05:21.123

不，不可能`wireshark`在路由器上运行。但是，您可以`wireshark`在网络中的一台计算机上以嗅探器/监视模式运行，并过滤掉所有目标地址设置为路由器地址的数据包。请注意，如果您还想捕获到路由器的有线数据包，这将不起作用。

# android - 如何获取媒体播放器的包名

> ID：13244868
> 
> 赞同：1
> 
> 时间：2012-11-06T05:22:21.953
> 
> 标签：android, android-mediaplayer

听歌时是否可以获取音乐播放器的包名。我的设备中有很多第三方音乐播放器，一旦我从任何设备播放歌曲，就想获得音乐播放器的包名。我是这个话题的新手，如果这个问题没有任何意义，请让我知道错误是什么。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T05:36:21.997

您可以使用以下代码获取当前活动的包名称和活动名称，

```
ActivityManager am = (ActivityManager) getSystemService(ACTIVITY_SERVICE);

                // get the info from the currently running task
                List< ActivityManager.RunningTaskInfo > taskInfo = am.getRunningTasks(1); 

                Log.d("topActivity", "CURRENT Activity ::"
                        + taskInfo.get(0).topActivity.getClassName());

                ComponentName componentInfo = taskInfo.get(0).topActivity;
                Log.d("topActivity", "CURRENT Package ::"
                        + componentInfo.getPackageName()); 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-11-06T05:26:09.627

是的，您可以获得所需的任何应用程序的包名称.. 所以启动该播放器并查看 logcate 那里您可以看到**Activity Manager**标签并查看 Displayed com.rechild.advancedtaskkiller/.AdvancedTaskKiller: +3s38ms in **description** 可能对您有帮助..

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-11-06T05:27:26.710

您可以通过以下方式获取包名称。

```
 Context context;

context.getPackageName();//using this line in your program you can get your package name 
```

# c# - 在 ASP.Net 中生成 CSV 文件

> ID：13244875
> 
> 赞同：15
> 
> 时间：2012-11-06T05:22:49.720
> 
> 标签：c#, asp.net, excel, file, csv

我在按钮单击事件的 aspx 页面上使用下面的代码来生成 csv 文件。当我不命名我的文件但尝试使用时，这有效： Response.AddHeader("Content-Disposition", "attachment;filename=myfilename.csv");

要将文件命名为 myfilename.csv，生成的 excel 表是网页的屏幕截图，而不是其中的文本。有人可以帮我解决这个问题。
谢谢！

```
DataGrid dg = new DataGrid();
dg.DataSource = GetData();
htmlTextWriter.WriteLine("<b>Details</b>");

//Get the html for the control
dg.HeaderStyle.Font.Bold = true;
dg.HeaderStyle.BackColor = System.Drawing.Color.Gray;
dg.DataBind();
dg.RenderControl(htmlTextWriter);

//Write the HTML back to the browser.
Response.Clear();
Response.ContentType = "application/vnd.ms-excel";
//Response.AddHeader("Content-Disposition", "attachment;filename=myfilename.csv");
this.EnableViewState = false;
Response.Write(textWriter.ToString());
Response.End();

private System.Data.DataTable GetData()
{
    System.Data.DataTable dt = new System.Data.DataTable("TestTable");
    dt.Columns.Add("SSN");
    dt.Columns.Add("Employee ID");
    dt.Columns.Add("Member Last Name");
    dt.Columns.Add("Member First Name");
    dt.Columns.Add("Patient Last Name");
    dt.Columns.Add("Patient First Name");
    dt.Columns.Add("Claim No.");
    dt.Columns.Add("Service Line No.");
    dt.Columns.Add("Error Code");
    dt.Columns.Add("Error Message");                
    dt.Rows.Add(123456789,4455,"asdf","asdf","sdfg","xzcv","dsfgdfg123",1234,135004,"some error");            
    dt.Rows.Add(123456788,3344,"rth","ojoij","poip","wer","aadf124",1233,135005,"Some Error");
    dt.Rows.Add(123456787,2233,"dfg","sdfg","vcxb","cxvb","UHCAL125",1223,135006,"another error");
    return dt;
} 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-11-06T06:02:57.800

我不确定您在这里的目标是什么，因此我假设您希望在按钮单击事件中创建一个 CSV 文件并将其发送回用户。您当前所拥有的似乎是将控件的 HTML 写入 XLS 文件。

试试这个：

```
protected void Button1_Click(object sender, EventArgs e)
{
    var dataTable = GetData();
    StringBuilder builder = new StringBuilder();
    List<string> columnNames = new List<string>();
    List<string> rows = new List<string>();

    foreach (DataColumn column in dataTable.Columns)
    {
        columnNames.Add(column.ColumnName); 
    }

    builder.Append(string.Join(",", columnNames.ToArray())).Append("\n");

    foreach (DataRow row in dataTable.Rows)
    {
        List<string> currentRow = new List<string>();

        foreach (DataColumn column in dataTable.Columns)
        {
            object item = row[column];

            currentRow.Add(item.ToString());
        }

        rows.Add(string.Join(",", currentRow.ToArray()));
    }

    builder.Append(string.Join("\n", rows.ToArray()));

    Response.Clear();
    Response.ContentType = "text/csv";
    Response.AddHeader("Content-Disposition", "attachment;filename=myfilename.csv");
    Response.Write(builder.ToString());
    Response.End();
} 
```

当我运行它时，浏览器会提示我保存 CSV 文件。

**编辑：**

如果您想保持当前的方法（生成 HTML，而不是 CSV），请尝试以下操作：

```
Response.AddHeader("Content-Disposition", "attachment;filename=myfilename.xls"); 
```

请注意，我只是将文件扩展名从 CSV 更改为 XLS。使用 CSV 扩展时，文本在 Excel 中显示为 HTML。使用 XLS，它看起来就像上面的行被注释掉时一样。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-06T09:53:56.423

与 NickW 的解决方案相同，但更简洁地使用 LINQ：

```
//Append column names
builder.Append(String.Join(",", 
    from DataColumn c in dataTable.Columns
    select c.ColumnName
)).Append("\n");

//Append data from datatable
builder.Append(string.Join("\n", 
    from DataRow row in dataTable.Rows
    select String.Join("\n", 
        String.Join(",", row.ItemArray)
    )
));

Response.Clear();
Response.ContentType = "text/csv";
Response.AddHeader("Content-Disposition", "attachment;filename=myfilename.csv");
Response.Write(builder.ToString());
Response.End(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-06T20:39:06.300

最后我想我明白了，如果我们打算在 asp.net 页面上生成 excel 文件，我们需要编写一个 http 处理程序，现在我的 button_click 只是重定向到 TestHandler.ashx 页面并呈现 excel 文件。:)

非常感谢你们所有人

```
public class TestHandler : IHttpHandler
{

    public void ProcessRequest(HttpContext context)
    {
        StringWriter textWriter = new StringWriter();
        Html32TextWriter htmlTextWriter = new Html32TextWriter(textWriter);
        DataGrid dg = new DataGrid();
        dg.DataSource = GetData();

        //Get the html for the control
        dg.EnableViewState = false;
        dg.DataBind();
        dg.RenderControl(htmlTextWriter);

        //Write the HTML back to the browser.
        context.Response.Clear();

        //context.Response.AddHeader("Content-Disposition", string.Format("attachment;filename=test.csv"));
        //context.Response.ContentType = "text/csv";
        context.Response.AddHeader("Content-Disposition", string.Format("attachment;filename=abc.xls"));
        context.Response.ContentType = "application/vnd.ms-excel";
        context.Response.Write(textWriter.ToString());
        context.Response.End();
    }

    public bool IsReusable
    {
        get
        {
            return false;
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-06T05:54:27.870

尝试改变这个：

```
Response.ContentType = "application/text"; 
```

或者

```
Response.ContentType = "text/csv"; 
```

# c++ - 共享库中是否应该避免使用静态成员函数？

> ID：13244876
> 
> 赞同：6
> 
> 时间：2012-11-06T05:23:11.063
> 
> 标签：c++, c, static, global-variables, shared-libraries

在阅读 Oliveira 和 Stewart 的《Writing Scientific Software》一书时，我看到了这段有趣的段落：

> "*共享变量是危险的，应该在共享库中避免*
> 
> 因此，如果您正在编写共享或动态链接库，请避免使用`static`局部`saved`变量并避免使用全局变量。”
> 
> （第 55 页）

但是`static`成员函数呢？这些在共享库中是否同样危险？我也应该避免这些吗？为什么/为什么不？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T05:27:28.487

> 但是`static`成员函数呢？这些在共享库中是否同样危险？

一点也不：`static`不应该避免成员函数：与`static`表示共享状态的变量不同，`static`成员函数表示共享计算。只要这些计算是*无状态*的，它们就完全没有危险。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-06T05:25:42.687

静态*函数*不是问题。事实上，科学软件中常用的许多函数都是纯数学函数，例如`sin()`, `sqrt()`, `log()`.

另一方面，静态*变量是共享状态的指标，应该避免使用。*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-06T05:26:44.543

不是天生的。不使用任何静态状态的静态成员函数（例如，仅使用局部变量或线程局部变量的成员函数）并不是不安全的。此类方法经常用于备受推崇的库中，例如 boost 或 guava（Java 世界的最后一个示例）。

# python - 字体和颜色语法错误

> ID：13244878
> 
> 赞同：1
> 
> 时间：2012-11-06T05:22:54.627
> 
> 标签：python, html

我正在尝试添加字体和颜色并遇到以下错误

```
#Create the body of the message
msg_body=("<HTML><head></head>"
          "<body>BCC Warning:"
          "<br>Hi All, <br>"
          "<br><br>"
          "<font face = "Arial" color="#990000" > Wiki @<a href=%s>%s</a> (listed @ go\wbit)</font> <br><br>"
          "<b>Release notes:</b> %s  <br><br>" 
          "<b>Build Combo:</b><br>%s<br><br>" 
          "<b>Loading instructions:</b><br>%s<br><br>"
          "<b>CR fixes:</b><br>%s<br><br>"
          "Thanks,<br>"
          "Build team"
          "</body></html>"
          ) % (wikiURL,wikiURL,Releasenotes,table,Load_ins,crInfo) 
```

语法错误

```
"<font face = "Arial" > Wiki @<a href=%s>%s</a> (listed @ go\wbit)</font> <br><br>"
                   ^ 
```

SyntaxError：无效的语法

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T05:24:16.647

写成下面的格式

```
"<font face = 'Arial' > Wiki @<a href=%s>%s</a> (listed @ go\wbit)</font> <br><br>" 
```

但是，不建议再使用字体标签。改为使用`style='font:arial normal'`。

更新语法：

```
msg_body=("<HTML><head></head>"
          "<body>BCC Warning:"
          "<br>Hi All, <br>"
          "<br><br>"
          "<div style='font:Arial normal; color:#990000'> Wiki @<a href=%s>%s</a> (listed @ go\wbit)</div> <br><br>"
          "<b>Release notes:</b> %s  <br><br>" 
          "<b>Build Combo:</b><br>%s<br><br>" 
          "<b>Loading instructions:</b><br>%s<br><br>"
          "<b>CR fixes:</b><br>%s<br><br>"
          "Thanks,<br>"
          "Build team"
          "</body></html>"
          ) % (wikiURL,wikiURL,Releasenotes,table,Load_ins,crInfo) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T05:29:02.137

在双引号字符串中为双引号添加斜杠，或者您可以使用单引号代替

```
"<font face = \"Arial\" style='color:green'> Wiki @<a href=%s>%s</a> (listed @ go\wbit)</font> <br><br>" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T05:29:03.760

您可以使用“\”跳过引号内的标记。

```
"<font face = \"Arial\" >" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-06T06:06:51.717

最简单的解决方法是省略导致错误的引号，写

```
 "<font face = Arial color=#990000 > Wiki @<a href=%s>%s</a> (listed @ go\wbit)</font> <br><br> 
```

HTML 中不需要这些引号。从技术上讲，根据 HTML 4.01 规范， value 周围需要引号`#9900000`，但浏览器不需要它们（HTML5 草稿也不需要）。此外，标记无论如何都是无效的；该`title`元素丢失。

# ruby - Ruby Pascal 的带记忆功能的三角形生成器

> ID：13244879
> 
> 赞同：3
> 
> 时间：2012-11-06T05:22:58.273
> 
> 标签：ruby, closures, memoization

我正在尝试记忆我的 Pascal 三角形生成器的实现，作为 Ruby 学习实验。我有以下工作代码：

```
module PascalMemo
  @cache = {}
  def PascalMemo::get(r,c)
    if @cache[[r,c]].nil? then 
      if c == 0 || c == r then 
        @cache[[r,c]] = 1
      else
        @cache[[r,c]] = PascalMemo::get(r - 1, c) + PascalMemo::get(r - 1, c - 1)
      end
    end
    @cache[[r,c]]
  end
end

def pascal_memo (r,c)
  PascalMemo::get(r,c)
end 
```

这可以更简洁吗？具体来说，我可以比这更简单地创建一个具有局部闭包的全局范围函数吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T06:02:07.463

```
def pascal_memo
  cache = [[1]]
  get = lambda { |r, c|
    ( cache[r] or cache[r] = [1] + [nil] * (r - 1) + [1] )[c] or
      cache[r][c] = get.(r - 1, c) + get.(r - 1, c - 1)
  }
end

p = pascal_memo
p.( 10, 7 ) #=> 120 
```

请注意，上面的构造确实实现了记忆化，它不仅仅是一个简单的递归方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T05:38:21.180

> 这可以更简洁吗？

看起来很清楚，IMO，`module`ing 通常是一种很好的直觉。

> 我可以比这更简单地创建一个具有本地闭包的全局范围的函数吗？

另一种选择是递归`lambda`：

```
memo = {}

pascal_memo = lambda do |r, c|
  if memo[[r,c]].nil?
    if c == 0 || c == r
      memo[[r,c]] = 1
    else
      memo[[r,c]] = pascal_memo[r - 1, c] + pascal_memo[r - 1, c - 1]
    end
  end
  memo[[r,c]]
end

pascal_memo[10, 2]
# => 45 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T00:24:57.713

我找到了一种方法来完成我想要的稍微令人满意的事情，因为它产生了一个函数而不是 lambda：

```
class << self
  cache = {}

  define_method :pascal_memo do |r,c|
    cache[[r,c]] or 
    (if c == 0 or c == r then cache[[r,c]] = 1 else nil end) or 
    cache[[r,c]] = pascal_memo(r-1,c) + pascal_memo(r-1,c-1)
  end
end 
```

这会为主对象打开元类/单例类，然后使用 define_method 添加一个新方法来关闭缓存变量，然后除了 pascal_memo 方法之外，该方法超出了所有内容的范围。

# android - 如何解决 -Launch timeout 已过期，放弃唤醒锁！在安卓中

> ID：13244881
> 
> 赞同：1
> 
> 时间：2012-11-06T05:22:59.767
> 
> 标签：android, sqlite

我有这些问题，但无法得到解决方案

启动超时已过期，放弃唤醒锁！HistoryRecord{44e26a30 com.india.screen/.CategoryList} 的活动空闲超时

添加这些行后出现此问题**（ String numOfRows="select count(*) from Holyplace_Tbl where State_id='"+stateId+"'";)**控制台无任何打印

1.  **活动**

    ```
     public class CategoryList extends Activity{
           private TableRow holyPlaces,historicalPalces,beach,museum,hills,lakes;
           private int stateId;
          private AssetDatabaseOpenHelper assetDatabaseHelper;

           private Cursor holyplacesCursor,rowsCursor;

    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.category_screen);
        Bundle extras = getIntent().getExtras();
        if (extras != null) {
            stateId=extras.getInt("stateid");
            System.out.println("stateid"+stateId);
        }
        holyPlaces=(TableRow) findViewById(R.id.holyPlaces);
        historicalPalces=(TableRow) findViewById(R.id.historicalPlaces);
        museum=(TableRow) findViewById(R.id.museum);
        beach=(TableRow) findViewById(R.id.beach);
        hills=(TableRow) findViewById(R.id.hills);
        lakes=(TableRow) findViewById(R.id.lakes);

         assetDatabaseHelper=new AssetDatabaseOpenHelper(CategoryList.this);
         assetDatabaseHelper.openDatabase();
        assetDatabaseHelper.openReadableMode();
         System.out.println("success.....!");

         String numOfRows="select count(*) from  Holyplace_Tbl where State_id='"+stateId+"'";

         System.out.println("rav  "+numOfRows);
            rowsCursor=assetDatabaseHelper.executeQuery(numOfRows);
            System.out.println("hjkdfhfh .............................."+rowsCursor);
            System.out.println("hj  hi .............................."+rowsCursor);
            if(rowsCursor.moveToFirst())
            {
                System.out.println("hi.........."+rowsCursor.getColumnCount());
                do{
                    int count=rowsCursor.getInt(0);
                    System.out.println("cu "+count);

                    System.out.println("cursor.. "+rowsCursor.getCount());
                    System.out.println("ccccc  "+rowsCursor.getInt(0));
                    System.out.println("jdjhfhf  "+rowsCursor.getColumnCount());

                }while(rowsCursor.moveToNext());

            }
            else{
                System.out.println("cursor not move");
            }

                rowsCursor.close();
                assetDatabaseHelper.close();
                System.out.println("no next value");

    } 
    ```

    }

2.  **AssetDatabaseOpenHelper.class**

    ```
    public class AssetDatabaseOpenHelper {
        private Context context;
    private SQLiteDatabase sqliteDatabaseObj;
    private String database_name;
    private CreateQueries createQueriesObj;
    private MySQLiteHelper mySQLitehelperObj;
    private int database_version;

    private  String databaseName="TravelguideDb";
    private  int databaseVersion=3;
    public AssetDatabaseOpenHelper(Context context,String databaseName,int database_version) {
        this.context = context;
        this.database_name=databaseName;
        this.database_version=database_version;
    }

    public AssetDatabaseOpenHelper(Context context) {

        this.context = context;
        this.database_name = databaseName;
        this.database_version = databaseVersion;
    }

    public void openDatabase() {
        mySQLitehelperObj = new MySQLiteHelper(context, database_name,
                database_version);

        File dbFile = context.getDatabasePath(database_name);
        System.out.println("Assests"+dbFile.exists());
        if (!dbFile.exists()) {
            try {
                copyDatabase(dbFile);
            } catch (IOException e) {
            throw new RuntimeException("Error creating source database", e);

            }
        }

    }
       public void openReadableMode()
     {
     sqliteDatabaseObj = mySQLitehelperObj.getReadableDatabase();
    }
       public void openWriteableMode()
     {
     sqliteDatabaseObj = mySQLitehelperObj.getWritableDatabase();
    }
    public void close() {

    mySQLitehelperObj.close();
      }

    private void copyDatabase(File dbFile) throws IOException {

        OutputStream os = new FileOutputStream(dbFile);

        InputStream is = null;
        byte[] buffer = new byte[1024];
        for(int i=1;i<5;i++)
        {
       is = context.getAssets().open("TravelguideDb.sqlite.00"+1);
         int length;
        while ((length=is.read(buffer))!=-1) {
            os.write(buffer,0,length);
        }
        is.close();
    }

        os.flush();
        os.close();
        is.close();
    }

       public Cursor executeQuery(String query)
      {
         Cursor outputCursor=  sqliteDatabaseObj.rawQuery(query, null);
    return outputCursor;
      }
    public void createTable(String tableName, String[] columns, String[] value) {
        createQueriesObj = new CreateQueries();
        String createTableQuery = createQueriesObj.CreateTableQuery(tableName,
                columns, value);
        sqliteDatabaseObj.execSQL(createTableQuery);
        System.out.println("Query" + createTableQuery);
    }
    public void deleteTable(String tableName) 
    {
        sqliteDatabaseObj.execSQL("Drop table " + tableName);
    }

    public void deleteAllDataFromTable(String tableName) {
        // truncate table
        sqliteDatabaseObj.delete(tableName, null, null);
    }
    public void deletePerticularRows(String tableName, String whereClause,
            String[] whereArgs) {
        sqliteDatabaseObj.delete(tableName, whereClause, whereArgs);
    }

    public Cursor fetchAllRows(String tableName) {

        return sqliteDatabaseObj.query(tableName, null, null, null, null, null,
                null);
    }
    public Cursor selectOnWhereCondition(String tableName,
            String[] columnsToSelect, String whereColumnName,
            String[] whereEqualsTo, String groupBy, String having,
            String orderBy) {
        return sqliteDatabaseObj.query(tableName, columnsToSelect,
                whereColumnName, whereEqualsTo, groupBy, having, orderBy);
    }

    public void updateRows(String tableName, String[] columnNames,
            String[] values, String whereClause, String[] whereArgs)
            throws SQLException {
        if (columnNames.length != values.length) {
            throw new SQLException();
        }
        ContentValues contentValue = new ContentValues();
        int length = values.length;
        for (int i = 0; i < length; i++) {
            contentValue.put(columnNames[i], values[i]);
        }
        sqliteDatabaseObj.update(tableName, contentValue, whereClause,
                whereArgs);
    }

    public long addRecords(String TableName, String[] columnNames,
            String[] values) throws SQLException {
        long result = 0;
        if (columnNames.length != values.length) {
            throw new SQLException();
        } else {
            ContentValues contentValues = new ContentValues();
            int length = columnNames.length;
            for (int i = 0; i < length; i++) {
                contentValues.put(columnNames[i], values[i]);
            }
            result = sqliteDatabaseObj.insert(TableName, null, contentValues);
        }

        return result;

    } 
    ```

    }

# objective-c - UIPickerview 将文本传递给另一个视图中的标签

> ID：13244886
> 
> 赞同：1
> 
> 时间：2012-11-06T05:23:46.840
> 
> 标签：objective-c, uipickerview

我刚开始学习，所以请放轻松...

目标是获取选取器中所选行的文本值，并将其显示在另一个视图的标签中。

现在我很难存储字符串值，一切都编译和加载，但第二个视图中的标签保持空白。请让我去noobify。

```
//String taken from selected pickerview line and stored in selectedstring
NSString *string = [NSString stringWithFormat:@"You Selected: %@",[_platforms objectAtIndex:row]];
Selectedstring.text = string; 
```

在“下一个视图”按钮按下：

```
- (IBAction)NextView:(id)sender {
SecondView *secondview = [[SecondView alloc]init];

self.SecondViewData = secondview;
SecondViewData.passedValue = Selectedstring.text;

[self presentViewController:secondview animated:YES completion:nil]; 
```

然后在下一个视图的“viewdidload”区域中，我有：

```
label.text = passedValue; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T11:01:02.313

您只需要在 ViewWillAppear 而不是 viewDidLoad 中编写以下语句。

label.text = 传递值；

谢谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T07:29:30.967

```
- (void)pickerView:(UIPickerView *)pickerView didSelectRow: (NSInteger)row inComponent:(NSInteger)component {
    SecondView *secondview = [[SecondView alloc]init];

self.SecondViewData = secondview;
SecondViewData.passedValue = Selectedstring.text;

[self presentViewController:secondview animated:YES completion:nil];
secondview.label.text = passedValue;  //passing values to uilabel
} 
```

# javascript - 从 Javascript 数组对象中删除记录

> ID：13244888
> 
> 赞同：2
> 
> 时间：2012-11-06T05:24:13.473
> 
> 标签：javascript, jquery, arrays

我有一个 java 脚本数组对象，我想从该对象的特定索引中删除项目，我有一个逗号分隔的索引字符串。问题是当我使用`splice`数组索引删除它时发生了变化，而其他索引的对象没有被删除。

```
 var DeletedConditions="3, 5, 19, 50";

    for (var k = 0; k < DeletedConditions.split(", ").length; k++) {
         ConditionObject.splice(DeletedConditions.split(", ")[k], 1);
    } 
```

`DeletedConditions`字符串可以是任何东西。

请帮帮我。如何完成这项工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T05:37:45.440

首先，我建议你正式把索引变成一个正式的数组。将字符串作为索引引用，如果存在值没有被分隔的情况，您很容易错过拆分`,`

然后[代码](http://jsfiddle.net/xDYp9/1/)：

```
var content = ['foo', 'bar', 'baz', 'bam', 'dom', 'zok'],
    deleteIndexes = [5, 1, 3],//should delete zok, bar, bam
    i;

//sort from least to greatest: [1, 3, 5]
deleteIndexes.sort(function(a, b) {
    return a - b;
});

//we loop backwards (performance enhancement)
//now we loop from greatest to least
//we now splice from greatest to least 
//to avoid altering the indexes of the content as we splice
for (i = deleteIndexes.length; i-- > 0;) {
    content.splice(deleteIndexes[i],1);
}

console.log(content); //["foo", "baz", "dom"] 
```

​</p>

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T05:25:27.710

在循环内拼接后，您始终可以递减 k 迭代器：

```
k--; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-06T05:27:36.137

```
var DeletedConditions="3, 5, 19, 50";
var list = DeletedConditions.split(", ")
for (var k = 0; k < list.length; k++) {
    // using splice here   
    list.splice(k,1); 
     k--;
}

console.log(list.join(', ')) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-06T05:38:24.690

正如您所观察到的，从数组的开头删除一个项目会将后面的元素打乱并更改它们的索引。但是，如果您遍历要向后删除的项目列表，那么它将首先删除*后面*的元素，因此对于靠近数组开头的元素，索引仍然是正确的。

另外，*请*不要`.split()`在每次循环迭代时都执行此操作 - 效率低下可能不会对包含四个数字的字符串产生太大影响，但它会使代码有点混乱，而且原则上它有点令人讨厌。

```
var DeletedConditions="3, 5, 19, 50",
    delCondArr = DeletedConditions.split();

for (var k = delCondArr.length - 1; k >= 0; k--) {
     ConditionObject.splice(delCondArr[k], 1);
} 
```

如果有`DeletedConditions`可能未订购该字符串，只需`.sort()`在拆分后添加一个：

```
delCondArr = DeletedConditions.split().sort(function(a,b){return a-b;}); 
```

...在这种情况下，您不需要向后循环。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-06T05:42:20.867

复制原始数组可能最简单，在此过程中省略已删除的项目。像这样的东西会做的伎俩...

```
var DeletedConditions="3, 5, 19, 50";
DeletedConditions = DeletedConditions.split(', ');
var newConditionObject = [];
for(var k = 0; k < ConditionObject.length; ++k) {
  if(DeletedConditions.indexOf(k) !== -1) { continue; }
  newConditionObject.push(ConditionObject[k]);
}

// result is in `newConditionObject`
console.log(newConditionObject); 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-11-06T05:37:24.773

```
var fruits = new Array("apple", "banana", "grapes", "oranges","mosambi","aaa","bbb","ccc"); 

var DeletedConditions="1,3,4,5";

var indexArray = new Array;

indexArray = DeletedConditions.split(",");

for (var i = 0; i < indexArray.length; i++) {

   fruits.splice(indexArray[i], 1);
} 
```

# sql - 如何更改约束

> ID：13244889
> 
> 赞同：105
> 
> 时间：2012-11-06T05:24:03.997
> 
> 标签：sql, oracle

SQL 如何更改约束

以下是我的 1 个约束

```
CONSTRAINT ACTIVEPROG_FKEY1 FOREIGN KEY(ActiveProgCode) REFERENCES PROGRAM(ActiveProgCode), 
```

我想添加

```
ON DELETE CASCADE 
```

到上面的约束。

我如何更改现有的约束 ACTIVEPROG_FKEY1 并添加

```
ON DELETE CASCADE 
```

约束 ACTIVEPROG_FKEY1

考虑 ACTIVEPROG_FKEY1 在表 ACTIVEPROG

* * *

## 回答 #1

> 赞同：166
> 
> 时间：2012-11-06T05:43:46.950

您永远无法更改约束，但可以删除它们然后重新创建。

看看这个

```
ALTER TABLE your_table DROP CONSTRAINT ACTIVEPROG_FKEY1; 
```

然后`ON DELETE CASCADE`像这样重新创建它

```
ALTER TABLE your_table
add CONSTRAINT ACTIVEPROG_FKEY1 FOREIGN KEY(ActiveProgCode) REFERENCES PROGRAM(ActiveProgCode)
    ON DELETE CASCADE; 
```

希望这有帮助

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-11-06T05:28:44.353

不，我们不能改变约束，我们唯一能做的就是删除并重新创建它

```
ALTER TABLE [TABLENAME] DROP CONSTRAINT [CONSTRAINTNAME] 
```

> 外键约束

```
Alter Table Table1 Add Constraint [CONSTRAINTNAME] Foreign Key (Column) References Table2 (Column) On Update Cascade On Delete Cascade 
```

> 主键约束

```
Alter Table Table add constraint [Primary Key] Primary key(Column1,Column2,.....) 
```

# neo4j - Neo4j Cypher：仅当端节点存在时才创建关系

> ID：13244894
> 
> 赞同：3
> 
> 时间：2012-11-06T05:24:38.800
> 
> 标签：neo4j, cypher

对于以下 Cypher 语句：

```
start n=node:types(id={typeId}), g=node:groups(id={groupId})
create unique (n)<-[:has_type]-(unit {props})-[:has_group]->(g)
return unit 
```

在某些情况下，g 可能为 null（即不存在具有 id groupId 的组）。在这种情况下，我应该怎么做才能使这个语句仍然创建单元，但跳过与 g 的 has_group 关系？现在，unit 没有被创建，大概是因为 g 为空。

我正在使用 Neo4j Advanced 1.8

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T15:24:02.037

我建议将 g 的定义移至 where 子句，因为从不存在的节点开始会出错，因此无法将查询继续到创建阶段。注意“？” 处理 Cypher 中的空值：

```
 start n=node:types(id={typeId})
 create unique (n)<-[:has_type]-(unit {props})-[:has_group]->(g)
 where g.id?={groupId}
 return unit 
```

查询可能需要一些调整，这只是我的第一个未经测试的镜头。

**编辑：**经过一番尝试，我得出一个结论，您可能想要做 2 个不同的查询，首先是创建与始终存在的唯一节点的关系的第一部分，第二部分是创建与可能不会发生的组的关系：

```
start n=node:types(id={typeId})
create unique (n)<-[:has_type]-(unit {props})    
return unit

start unit=node:unitProps({unitPropsValue}) ,g=node:groups(id={groupId}) 
create unique unit-[:has_group]->g    
return g 
```

如果组不存在，第二个查询将失败并出现错误，但这并不重要，因为您仍然会到达目标。出于某种奇怪的原因，我无法像第一次尝试那样在 where 子句中实施一些限制。以下查询似乎只是跳过了 where 条件（可能是错误？），尽管在我对 Cypher 的理解中，它应该与已经存在的组匹配，但它确实创建了一个新的 g 节点：

```
start n=node(1) 
create unique n-[:TYPE1]-(uniq {uid:333})
with uniq
create unique uniq-[:TYPE2]->g 
where has(g.gid) and g.gid=999 
return g 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T17:50:14.383

您可以使用 WITH 子句在一个查询中实现此目的，

```
start n=node:types(id={typeId})
create unique (n)<-[:has_type]-(unit {props})
WITH unit
START g=node:groups(id={groupId})
create unique (unit)-[:has_group]->(g)
WHERE g <> null
return unit 
```

如果 g 为 null，则 second 根本不会被执行。甚至这里可能不需要 WHERE g <> null。请尝试并确认

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-10T13:21:13.890

你可以试试这个

```
 MATCH (g:groups) 
   WHERE id(g)={groupId}
   create unique (unit {props})-[:has_group]->(g)
   WITH unit, create unique (unit)-[:has_type]->(n)
   return unit 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-05-23T13:44:03.353

由于这是我能找到的唯一与此相关的内容，因此我将添加我是如何处理这个问题的，因为其他答案都不足以满足我的目的。

```
MATCH (a:TEST{id:1}) 
OPTIONAL MATCH (b:TEST)
WHERE b.id IN [2,3,5]
// collect b so that there are no nulls, and rows aren't lost when no match
WITH a, collect(b) AS c
FOREACH(n IN c | CREATE UNIQUE (a)-[:HAS]->(n))
RETURN a 
```

适用于 Cypher 2.3+（我不能在此之前进行任何测试）

对于那些使用 APOC 的人，您还可以使用 CALL apoc.cypher.doIt() 来中断写入。

# ios - 动态 UITextField 创建

> ID：13244896
> 
> 赞同：-4
> 
> 时间：2012-11-06T05:24:45.297
> 
> 标签：ios, uitextfield

是否可以创建动态`UITextField`，例如当用户单击文本字段进行编辑时，它会自动`UITextField`在`UITextField`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T05:28:11.807

创建一个新的文本字段，如：

```
UITextField *myTextField = [[UITextField alloc] initWithFrame:CGRectMake(75,210,265,30)];
myTextField.placeholder=@"Enter Label Here";
myTextField.font =[UIFont systemFontOfSize:25];
myTextField.clearButtonMode=UITextFieldViewModeWhileEditing;
[self.view addSubView:myTextField]; 
```

您需要根据您的要求更改框架。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T05:29:33.380

只需将此代码添加到您的 .m 文件中，或者只需在您的`textFieldShouldBeginEditing:`方法中添加以下代码

```
 - (BOOL)textFieldShouldBeginEditing:(UITextField *)textField{
    UITextField *txtTemp=[[UITextField alloc]initWithFrame:CGRectMake(yourTextField.frame.origin.x, yourTextField.frame.origin.y + 50, yourTextField.frame.size.width, yourTextField.frame.size.height)];
    txtTemp.delegate = self;
    [self.view addSubview:txtTemp];
    return YES;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T05:29:29.937

是的。这里在

```
-(void)textFieldDidBeginEditing:(UITextField *)textField 
```

`UITextField`根据原始框架分配另一个`UITextField`，如果要添加多个文本字段，请将分配循环。希望这可以帮助。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-06T05:29:31.213

实施`UITextFieldDelegate`

```
- (void)textFieldDidBeginEditing:(UITextField *)textField{    

      if(textField == firstTextFeild){

          //Create secondTextFeild.
   }

} 
```

# java - JVM 上的所有“Magic”方法是否都标记为 Native？

> ID：13244898
> 
> 赞同：6
> 
> 时间：2012-11-06T05:24:46.380
> 
> 标签：java, jvm, java-native-interface, native, bytecode

我所说的“魔术”是指具有纯 Java 未表达的语义的方法。

我知道所有`native`方法都很神奇，因为它们的实现是由底层运行时提供的，而不是由 Java 字节码提供的。

反过来是真的吗？是所有魔术方法`native`，还是有一些魔术方法显然是在纯 Java 中实现的，但是在一些 JVM 特殊情况下的一些额外帮助下？

用例是我想通过检测其字节码来修改 Java 的语义。所有这些神奇的方法都是特殊情况，我必须以某种方式处理。这些`native`都是显而易见的，但我想知道是否有任何未标记的魔法方法我必须注意和特殊情况。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-06T05:32:27.783

不幸的是，在本机方法之外还有“魔术”方法。看一下内在方法 - 这些方法是 JIT 已知的，它在编译方法时使用手动实现，并且包括大量调用的方法，例如 String.indexOf、[Integer.numberOfLeadingZeros](http://docs.oracle.com/javase/6/docs/api/java/lang/Integer.html#numberOfLeadingZeros%28int%29)等。

在[此处查看](https://wikis.oracle.com/display/HotSpotInternals/PerformanceTechniques)Intrinsics 下的一些详细信息以及如何确定在您的 JVM 上内置了哪些方法。我不确定注入字节码是否会关闭 intrisification，但有一个 DisableIntrinsic XX 选项可用于禁用选定的内在函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T05:34:27.280

你可能会发现很多细节已经在[AspectJ](http://www.eclipse.org/aspectj/)中处理过了。在进行手动字节码操作之前，我会先看看它。

# io - Fortran：如何从文件中读取数组

> ID：13244900
> 
> 赞同：3
> 
> 时间：2012-11-06T05:25:07.193
> 
> 标签：io, fortran, fortran90, fortran77, fortran95

我正在尝试将整数从文件读取到数组中。但是当我运行程序时出现错误。

```
PROGRAM MINTEM

INTEGER TEMP(4,7), I, J, MINIMUM, CURRENT

OPEN(UNIT=1, FILE='temps.dat')
READ (1,*) ((TEMP(I,J),J=1,7),I=1,4)

MINIMUM = TEMP(1,1)
DO I = 1,4
    DO J = 1,7
        IF (TEMP(I,J) < MINIMUM) THEN
            MINIMUM = TEMP(I,J)
        END IF
    END DO
END DO

PRINT *, "MINIMUM TEMPERATURE = ", MINIMUM
END PROGRAM MINTEM 
```

输入文件如下所示：

```
 22
100 90 80 70 60 100 90 80 70 60 100 90 80 70 60 100 90 80 70
100 90 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T05:45:07.420

您提供的文件可以使用以下方式读取：

```
integer, allocatable :: t(:)
open(1,file='temp.dat')
read(1,*) N   ! your first line with 22
allocate( t(N-1) )  ! further on you only have 21 elements
read(1,*)t          ! so, read them in 
print*, t
deallocate(t)
close(1) 
```

# jquery - jquery.form ajaxSubmit 使用多部分表单输出错误

> ID：13244903
> 
> 赞同：0
> 
> 时间：2012-11-06T05:25:38.340
> 
> 标签：jquery, jquery-forms-plugin

当`jquery.form (latest)`与`jquery.1.5.2`（我不能改变这个）和多部分形式一起使用时。

```
ERROR:
Uncaught SyntaxError: Unexpected token < jquery-1.5.2.js:593 
```

JSF中：

[http://jsfiddle.net/N8Knq/16/](http://jsfiddle.net/N8Knq/16/)

我真的需要确定为什么这只发生在多部分表格中

**脚本：**

```
$(document).ready(function()
{
    $('#my_form').ajaxSubmit({
        success:function(response)
        {
           console.log(response);
        },
        dataType:'json'
    });                  
}); 
```

**HTML：**

```
<form id="my_form" method="post" action="" enctype="multipart/form-data">
<input type="text" name="my_text" />
<input type="submit" />
</form>​ 
```

​</p>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T06:02:46.840

我浏览了 github repo，发现版本 2.60 与 jquery 1.5.2 一起使用。我尝试了大约 10 个不同的版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T05:31:00.797

原因是该插件的最新版本利用了 jQuery 1.7+ 独有的方法。您会注意到，更新到最新的 jQuery 库**也会**在控制台中正确显示对象，而不是错误。

[来吧，试试看。](http://jsfiddle.net/N8Knq/17/)

显然我不能在不提供一些代码的情况下进行链接，所以这里有一些代码。

```
$(document).ready(function(){
    $('#my_form').ajaxSubmit({
        success:function(response){
            console.log(response);
        },
        dataType:'json'
    });                  
}); 
```

​</p>

# facebook-graph-api - Facebook c# sdk 登录并将访问令牌发布到服务器

> ID：13244904
> 
> 赞同：1
> 
> 时间：2012-11-06T05:25:46.150
> 
> 标签：facebook-graph-api, facebook-javascript-sdk, facebook-c#-sdk

我正在使用 javascript sdk 登录并将 accesstoken 发布到服务器，如 facebook c# sdk 入门页面中所述。我有几个问题。

1.  它使用 auth.authResponseChange 每次都会触发，这会导致重定向循环
2.  如果我将其更改为 auth.login，它只会在用户通过我的网站登录时被调用。如果他们已经登录到 fb，它就不起作用。
3.  如何仅将访问令牌发布一次回服务器并将其存储在会话中？
4.  如果我在服务器上使用 oauth 身份验证，是否可以将访问令牌传递回 javascript sdk？

    ```
    FB.Event.subscribe('auth.authResponseChange', function(response) {
        if (response.status === 'connected') {
            // the user is logged in and has authenticated your
            // app, and response.authResponse supplies
            // the user's ID, a valid access token, a signed
            // request, and the time the access token 
            // and signed request each expire
            var uid = response.authResponse.userID;
            var accessToken = response.authResponse.accessToken;

            // TODO: Handle the access token
            // Do a post to the server to finish the logon
            // This is a form post since we don't want to use AJAX
            var form = document.createElement("form");
            form.setAttribute("method", 'post');
            form.setAttribute("action", '/FacebookLogin.ashx');

            var field = document.createElement("input");
            field.setAttribute("type", "hidden");
            field.setAttribute("name", 'accessToken');
            field.setAttribute("value", accessToken);
            form.appendChild(field);

            document.body.appendChild(form);
            form.submit();

        } else if (response.status === 'not_authorized') {
            // the user is logged in to Facebook, 
            // but has not authenticated your app
        } else {
           // the user isn't logged in to Facebook.
        }
    }); 
    ```

# c++ - 在 dll 中导出函数。C 和 C++

> ID：13244910
> 
> 赞同：0
> 
> 时间：2012-11-06T05:25:56.257
> 
> 标签：c++, c, visual-studio-2010, dll

我有一个名为 ProCharts 的应用程序，它可以从 C++ dll 读取和访问文件。现在，如果我添加这样的内容并在 x64 模式下编译 dll。（VS2010->Win32 控制台应用程序->DLL）

```
int __stdcall Testb(int v)
{
    return v;
} 
```

然后在**def**文件中定义它。从该应用程序调用该函数没有问题。

但是，如果我在同一个文件中有类似这个函数的东西（它的名字也出现在 def 文件中）

```
int __stdcall AdvancedFunction(int v)
{
          //Calling a library that requires other libraries such as boost
          return ..;
} 
```

那么即使是第一个函数也不会被调用，调用 dll 的应用程序只会声明 dll 存在错误。谁能告诉我可能出了什么问题？我已将所有依赖项与 dll 文件一起放置，但仍然出现错误。我使用了依赖检查器，它指出两个函数是 c 函数而不是 C++ 任何关于如何解决此问题的建议或提示将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T07:54:17.480

在 ProCharts 的主文件夹中粘贴依赖项和其他 dll 文件后，我的库工作了。

# apache-flex - Flex Skin 按钮，保持图标

> ID：13244913
> 
> 赞同：0
> 
> 时间：2012-11-06T05:26:41.647
> 
> 标签：apache-flex, button, skinning

我正在尝试为 Flex 中的按钮设置皮肤，但是在为按钮设置皮肤后，我在其中链接的图标消失了。我知道我可以将图标添加到皮肤中，但这意味着我必须创建许多不同的皮肤。

有什么简单的方法可以解决这个问题吗？

.mxml 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<s:View xmlns:fx="http://ns.adobe.com/mxml/2009"
        xmlns:s="library://ns.adobe.com/flex/spark"
        xmlns:ns1="*"
        xmlns:packageservice="services.packageservice.*"
        title="My Dish"
        fontSize.Beef="10" textAlign.Beef="center">
    <fx:Script>
        <![CDATA[
            import com.adobe.serializers.utility.TypeUtility;

            import mx.events.FlexEvent;

            protected function list_creationCompleteHandler(event:FlexEvent):void
            {
                my_get_beef_dishResult.token = packageService.my_get_beef_dish();
            }

            protected function list2_creationCompleteHandler(event:FlexEvent):void
            {
                my_get_pork_dishResult.token = packageService.my_get_pork_dish();
            }

            protected function list3_creationCompleteHandler(event:FlexEvent):void
            {
                my_get_chicken_dishResult.token = packageService.my_get_chicken_dish();
            }

            protected function list4_creationCompleteHandler(event:FlexEvent):void
            {
                my_get_fish_dishResult.token = packageService.my_get_fish_dish();
            }

            protected function list5_creationCompleteHandler(event:FlexEvent):void
            {
                my_get_vegetables_dishResult.token = packageService.my_get_vegetables_dish();
            }

        ]]>
    </fx:Script>
    <s:states>
        <s:State name="Beef"/>
        <s:State name="Pork"/>
        <s:State name="Chicken"/>
        <s:State name="Fish"/>
        <s:State name="Vegetables"/>
        <s:State name="Other"/>
    </s:states>
    <s:navigationContent>
        <s:Button label="Back" click="navigator.popView();"/>
    </s:navigationContent>
    <fx:Declarations>
        <s:CallResponder id="my_get_beef_dishResult"/>
        <packageservice:PackageService id="packageService"/>
        <s:CallResponder id="my_get_pork_dishResult"/>
        <s:CallResponder id="my_get_chicken_dishResult"/>
        <s:CallResponder id="my_get_fish_dishResult"/>
        <s:CallResponder id="my_get_vegetables_dishResult"/>

        <!-- Place non-visual elements (e.g., services, value objects) here -->
    </fx:Declarations>
    <s:VGroup x="0" y="0" width="245" height="364" contentBackgroundColor="#E6E6E6">                                                      
        <s:List id="MyDishOther" includeIn="Other" width="245" height="364" contentBackgroundColor="#E6E6E6"></s:List>
        <s:List id="list" includeIn="Beef" width="245" height="365"
                creationComplete="list_creationCompleteHandler(event)" labelField="name">
            <s:AsyncListView list="{my_get_beef_dishResult.lastResult}"/>
        </s:List>
        <s:List id="list2" includeIn="Pork" width="245" height="365"
                creationComplete="list2_creationCompleteHandler(event)" labelField="name">
            <s:AsyncListView list="{my_get_pork_dishResult.lastResult}"/>
        </s:List>
        <s:List id="list3" includeIn="Chicken" width="245" height="365"
                creationComplete="list3_creationCompleteHandler(event)" labelField="name">
            <s:AsyncListView list="{my_get_chicken_dishResult.lastResult}"/>
        </s:List>
        <s:List id="list4" includeIn="Fish" width="245" height="365"
                creationComplete="list4_creationCompleteHandler(event)" labelField="name">
            <s:AsyncListView list="{my_get_fish_dishResult.lastResult}"/>
        </s:List>
        <s:List id="list5" includeIn="Vegetables" width="245" height="365"
                creationComplete="list5_creationCompleteHandler(event)" labelField="name">
            <s:AsyncListView list="{my_get_vegetables_dishResult.lastResult}"/>
        </s:List>
    </s:VGroup>

...

        <s:Button includeIn="Beef" width="70"  icon="assets/beef.png" skinClass="components.Stab"/>
        <s:Button includeIn="Beef" width="60" click="currentState='Chicken'" icon="assets/chicken.png"/>
        <s:Button includeIn="Beef" width="60" click="currentState='Fish'" icon="assets/fish(1).png"/>
        <s:Button includeIn="Beef" width="60" click="currentState='Pork'" icon="assets/porktest(1).png"/>
        <s:Button includeIn="Beef" width="60" icon="assets/t_vegetables.png" click="currentState='Vegetables'"/>

.....

    </s:VGroup>
</s:View> 
```

皮肤等级：

```
<?xml version="1.0" encoding="utf-8"?>

<s:Skin xmlns:fx="http://ns.adobe.com/mxml/2009" xmlns:s="library://ns.adobe.com/flex/spark" alpha.disabled=".5">

    <!-- states -->

    <s:states>

        <s:State name="up" />

        <s:State name="over" />

        <s:State name="down" />

        <s:State name="disabled" />

    </s:states>

    <!-- layer 2: fill -->
    <s:Rect left="1" right="1" top="1" bottom="1" radiusX="2" radiusY="2">
        <s:fill>
            <s:LinearGradient rotation="90">
                <s:GradientEntry color="0xFFFFFF" 
                                 color.over="0xBBBDBD" 
                                 color.down="0xAAAAAA" 
                                 alpha="0.85" />
                <s:GradientEntry color="0xD8D8D8" 
                                 color.over="0x9FA0A1" 
                                 color.down="0x929496" 
                                 alpha="0.85" />
            </s:LinearGradient>
        </s:fill>
    </s:Rect>

    <!-- layer 2: border -->
    <s:Rect left="0" right="0" top="0" bottom="0" width="60" height="45" radiusX="2" radiusY="2">
            <s:stroke>

            <s:LinearGradientStroke rotation="90" weight="1">
                <s:GradientEntry color="0x000000" 
                                 alpha="0.5625"
                                 alpha.down="0.6375" />
                <s:GradientEntry color="0x000000" 
                                 alpha="0.75" 
                                 alpha.down="0.85" />
            </s:LinearGradientStroke>
            </s:stroke>
    </s:Rect>

</s:Skin> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T14:15:24.083

我猜到问题是你的皮肤不是从 SparkButtonSkin 继承的。图标功能在其中实现，默认按钮皮肤继承 SparkButtonSkin。

# c# - windows上wpf c#中的3D图形

> ID：13244914
> 
> 赞同：0
> 
> 时间：2012-11-06T05:26:43.050
> 
> 标签：c#, wpf

我是 3d Graphics 和 wpf 的新手，需要在我当前的项目中将这两者结合起来。我将点和法线添加到`MeshGeometry3D`并添加`MeshGeometry3D`到`GeometryModel3D`. 然后添加`GeometryModel3D`到`ModelVisual3D`，最后添加`ModelVisual3D`到`ViewPort3D`. 现在，如果我需要旋转，我将在 GeometryModel3D 或 ModelVisual3D 上执行所需的变换，并最终将其再次添加到 ViewPort3D。我遇到了一个问题：

```
objViewPort3D.Remove(objModelVisual3D);
objGeometryModel3D.Transform = new RotateTransform3D(new AxisAngleRotation3D(new Vector3D(0, 1, 0), angle += 15));
objModelVisual3D.Content = objGeometryModel3D;
objViewPort3D.Children.Add(objModelVisual3D); 
```

每次将其旋转 15 度，为什么我必须这样做`angle += 15`而不只是`15`？似乎存储的模型不是通过`Transform`操作转换的，而是仅在显示时才应用转换`ViewPort3D`。我希望转换能够实际更改存储的 MeshGeometry3D 对象中的坐标，这样当我下次进行转换时，它会在先前转换的模型而不是原始模型上进行。我如何获得这种行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T07:36:52.103

我认为你可以使用动画

一些伪代码：

角度 = 0 函数 onClick：新角度 = 角度 + 30 动画（角度，新角度）角度 = 新角度

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T08:19:05.197

正确，网格的位置没有被“变换”操作变换。相反，Transform 属性定义了渲染期间网格的世界变换。

在 3d 图形中，世界变换在对象渲染期间将网格的点从对象空间转换到世界空间。

[![对象空间到世界空间图](../Images/c7a3f33440829f628894080c34591b60.png)](https://i.stack.imgur.com/NBXcE.png)

（图片来自[World、View 和 Projection Matrix Unveiled](https://www.maccleaner.space/recommended/?sc=090fd18d-e753-47df-9bb5-c2bb855eabc0&zn=356880544&campid=8bf45264-7683-4c88-8f38-c657cbe2fe77)）

设置世界变换并让渲染器在单个变换中绘制网格比像你想要的那样变换网格的每个顶点要快得多。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T14:59:39.390

你必须做 angle += 15 因为你每次都应用一个新的 RotateTransform3D 。

这可能会有所帮助：

```
public RotateTransform3D MyRotationTransform { get; set; }
...
//constructor
public MyClass()
{
     MyRotationTransform = new RotateTransform3D(new AxisAngleRotation3D(new Vector3D(0, 1, 0), 0));

}

//in your method
MyRotationTransform.Rotation += 15;
objGeometryModel3D.Transform = MyRotationTransform; 
```

# android - 由于 android 不活动，15 分钟后自动注销

> ID：13244915
> 
> 赞同：5
> 
> 时间：2012-11-06T05:26:30.210
> 
> 标签：android, timer, countdowntimer

由于用户不活动，如何在android中使用计时器在15分钟后自动注销？

我在我的 loginActivity.java 中使用了下面的代码

```
public class BackgroundProcessingService extends Service {

        @Override
        public IBinder onBind(Intent intent) {
            // TODO Auto-generated method stub
         timer = new CountDownTimer(5 *60 * 1000, 1000) {

                public void onTick(long millisUntilFinished) {
                   //Some code
                    //inactivity = true;
                    timer.start();
                    Log.v("Timer::", "Started");
                }

                public void onFinish() {
                   //Logout
                    Intent intent = new Intent(LoginActivity.this,HomePageActivity.class);
                    startActivity(intent);
                    //inactivity = false;
                    timer.cancel();
                    Log.v("Timer::", "Stoped");
                }
             };
            return null;
        }

    } 
```

和登录按钮的点击我称之为服务意图。

```
Intent intent1 = new Intent(getApplicationContext(),
                        AddEditDeleteActivity.class);
                startService(intent1); 
```

请指教......

此类错误消息会在 15 分钟后显示

![此类错误消息会在 15 分钟后显示](../Images/4f556f52311b1f01101d1a2e193c4b35.png)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-06T05:32:09.253

使用倒计时

```
CountDownTimer timer = new CountDownTimer(15 *60 * 1000, 1000) {

        public void onTick(long millisUntilFinished) {
           //Some code
        }

        public void onFinish() {
           //Logout
        }
     }; 
```

当用户停止任何操作使用`timer.start()`以及用户执行操作时`timer.cancel()`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-03-27T07:45:03.027

我同意 Girish 的上述回答。为了您的方便，我正在与您共享代码。

```
public class LogoutService extends Service {
        public static CountDownTimer timer;
    @Override
    public void onCreate(){
        super.onCreate();
          timer = new CountDownTimer(1 *60 * 1000, 1000) {
                public void onTick(long millisUntilFinished) {
                   //Some code
                    Log.v(Constants.TAG, "Service Started");
                }

                public void onFinish() {
                    Log.v(Constants.TAG, "Call Logout by Service");
                    // Code for Logout
                    stopSelf();
                }
             };
    }
    @Override
    public IBinder onBind(Intent intent) {
        return null;
    }
} 
```

在每个活动中添加以下代码。

```
 @Override
protected void onResume() {
    super.onResume();

    LogoutService.timer.start();
}

@Override
protected void onStop() {
    super.onStop();
    LogoutService.timer.cancel();
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2020-05-04T09:40:01.947

首先创建应用程序类。

```
public class App extends Application{

   private static LogoutListener logoutListener = null;
   private static Timer timer = null;

   @Override
   public void onCreate() {
       super.onCreate();
   }

   public static void userSessionStart() {
           if (timer != null) {
               timer.cancel();
           }
           timer = new Timer();
           timer.schedule(new TimerTask() {
               @Override
               public void run() {
                   if (logoutListener != null) {
                       logoutListener.onSessionLogout();
                       log.d("App", "Session Destroyed");
                   }
               }
           },  (1000 * 60 * 2) );
       }

       public static void resetSession() {
           userSessionStart();
       }

       public static void registerSessionListener(LogoutListener listener) {
           logoutListener = listener;
       }
} 
```

此应用程序类添加到清单中

```
<application
       android:name=".App"
       android:allowBackup="false"
       android:icon="@mipmap/ic_launcher"
       android:label="@string/app_name"
       android:roundIcon="@mipmap/ic_launcher_round"
       android:supportsRtl="true"
       android:usesCleartextTraffic="true"
       android:theme="@style/AppTheme">
       <activity android:name=".view.activity.MainActivity"/>

</application> 
```

然后创建在整个应用程序中使用的 BaseActivity 类

```
class BaseActivity extends AppCompatActivity implements LogoutListener{

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        //setTheme(App.getApplicationTheme());
        super.onCreate(savedInstanceState);
    }

    @Override
    protected void onResume() {
        super.onResume();
        //Set Listener to receive events
        App.registerSessionListener(this);
    }

    @Override
    public void onUserInteraction() {
        super.onUserInteraction();
        //reset session when user interact
        App.resetSession();

    }

    @Override
    public void onSessionLogout() {
        // Do You Task on session out
    }

} 
```

之后在另一个活动中扩展基本活动

```
public class MainActivity extends BaseActivity{

    private static final String TAG = MainActivity.class.getSimpleName();

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-06T05:33:39.033

您可以启动服务并在其中启动计时器。每 15 分钟检查一次标志，假设`inactivity`标志设置为真。如果是，请退出应用程序。

每次用户与您的应用交互时，将`inactivity`标志设置为 false。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-03-22T15:37:15.320

您可能需要创建一个 BaseActivity 类，您的应用程序中的所有其他活动都将扩展该类。在该类中，在 onUserInteraction 方法中启动您的计时器任务 (TimerTask())：

```
override fun onUserInteraction() {
    super.onUserInteraction()
    onUserInteracted()
} 
```

. onUserInteracted 类启动一个 TimerTaskService ，这将是我的内部类，如下所示：

```
private fun onUserInteracted() {
     timer?.schedule(TimerTaskService(), 10000)
} 
```

TimerTaskService 类将如下所示。请注意在 UI 线程上运行，以防您希望在登录用户之前显示 DialogFragment 以完成要执行的操作：

```
inner class TimerTaskService : TimerTask() {
    override fun run() {
        /**This will only run when application is in background
         * it allows the application process to get high priority for the user to take action
         * on the application auto Logout
         * */
//            val activityManager = applicationContext.getSystemService(Context.ACTIVITY_SERVICE) as ActivityManager
//            activityManager.moveTaskToFront(taskId, ActivityManager.MOVE_TASK_NO_USER_ACTION)

        runOnUiThread {
            displayFragment(AutoLogoutDialogFragment())
            isSessionExpired = true
        }
        stopLoginTimer()
    }
} 
```

你会意识到我有一个 stopTimer 方法，你必须在预期的动作被调用后调用，这个类只是有`timer?.cancel()`，你可能还需要将它包含在`onStop()`方法中。

注意：由于 10000 毫秒，这将在 10 秒内运行

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-07-13T12:41:24.533

我希望这个能帮上忙

我在github上找到了它[https://gist.github.com/dseerapu/b768728b3b4ccf282c7806a3745d0347](https://gist.github.com/dseerapu/b768728b3b4ccf282c7806a3745d0347)

```
public class LogOutTimerUtil {

 public interface LogOutListener {
  void doLogout();
 }

 static Timer longTimer;
 static final int LOGOUT_TIME = 600000; // delay in milliseconds i.e. 5 min = 300000 ms or use timeout argument

 public static synchronized void startLogoutTimer(final Context context, final LogOutListener logOutListener) {
  if (longTimer != null) {
   longTimer.cancel();
   longTimer = null;
  }
  if (longTimer == null) {

   longTimer = new Timer();

   longTimer.schedule(new TimerTask() {

    public void run() {

     cancel();

     longTimer = null;

     try {
      boolean foreGround = new ForegroundCheckTask().execute(context).get();

      if (foreGround) {
       logOutListener.doLogout();
      }

     } catch (InterruptedException e) {
      e.printStackTrace();
     } catch (ExecutionException e) {
      e.printStackTrace();
     }

    }
   }, LOGOUT_TIME);
  }
 }

 public static synchronized void stopLogoutTimer() {
  if (longTimer != null) {
   longTimer.cancel();
   longTimer = null;
  }
 }

 static class ForegroundCheckTask extends AsyncTask < Context, Void, Boolean > {

  @Override
  protected Boolean doInBackground(Context...params) {
   final Context context = params[0].getApplicationContext();
   return isAppOnForeground(context);
  }

  private boolean isAppOnForeground(Context context) {
   ActivityManager activityManager = (ActivityManager) context.getSystemService(Context.ACTIVITY_SERVICE);
   List < ActivityManager.RunningAppProcessInfo > appProcesses = activityManager.getRunningAppProcesses();
   if (appProcesses == null) {
    return false;
   }
   final String packageName = context.getPackageName();
   for (ActivityManager.RunningAppProcessInfo appProcess: appProcesses) {
    if (appProcess.importance == ActivityManager.RunningAppProcessInfo.IMPORTANCE_FOREGROUND && appProcess.processName.equals(packageName)) {
     return true;
    }
   }
   return false;
  }
 }

} 
```

在 Activity 中使用上面的代码，如下所示：

```
public class MainActivity extends AppCompatActivity implements LogOutTimerUtil.LogOutListener
{
    @Override
    protected void onStart() {
        super.onStart();
        LogOutTimerUtil.startLogoutTimer(this, this);
        Log.e(TAG, "OnStart () &&& Starting timer");
    }

    @Override
    public void onUserInteraction() {
        super.onUserInteraction();
        LogOutTimerUtil.startLogoutTimer(this, this);
        Log.e(TAG, "User interacting with screen");
    }

    @Override
    protected void onPause() {
        super.onPause();
        Log.e(TAG, "onPause()");
    }

    @Override
    protected void onResume() {
        super.onResume();

        Log.e(TAG, "onResume()");
    }

    /**
     * Performing idle time logout
     */
    @Override
    public void doLogout() {
      // write your stuff here
    }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-05-28T07:15:14.973

使用名为：的内置函数，`onUserInteraction()`如下所示：

```
 @Override
public void onUserInteraction() {
    super.onUserInteraction();
    stopHandler();  //first stop the timer and then again start it
    startHandler();
} 
```

# matlab - 我们有可能覆盖全局变量吗？

> ID：13244919
> 
> 赞同：0
> 
> 时间：2012-11-06T05:27:03.340
> 
> 标签：matlab

我有这个功能：

```
function example(y)
global TICTOC;
tic
TICTOC=5;
toc
end 
```

我希望*TICTOC=5*改变*toc*的结果，因为*TICTOC*是 tic 和 toc 函数中的全局变量；但这种情况并非如此; 有谁知道原因？

我想知道答案，因为我担心声明一个全局变量，它的名称已在其他一些函数中声明为全局变量，我不知道。

我在 matlab 2008b 帮助中看到了这个函数

```
function tic
%    TIC Start a stopwatch timer.
%        TIC; any stuff; TOC
%    prints the time required.
%    See also: TOC, CLOCK.
global TICTOC
TICTOC = clock;

function t = toc
%    TOC Read the stopwatch timer.
%    TOC prints the elapsed time since TIC was used.
%    t = TOC; saves elapsed time in t, does not print.
%    See also: TIC, ETIME.
global TICTOC
if nargout < 1
    elapsed_time = etime(clock, TICTOC)
else
    t = etime(clock, TICTOC);
end 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T10:58:57.283

我认为您可以使用 assignin 命令将 TICTOC 值发送到基础，从而更改全局值。我使用 assignin 命令将参数从函数发送到 Base。

问候迪利普

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T17:15:09.907

我不知道为什么，但我的问题的答案是否定的。我检查了它，似乎它没有被覆盖。原因一定是因为tic、toc是Matlab内置的函数

# ruby - 如何在 user_controller_spec 中以用户身份登录？

> ID：13244925
> 
> 赞同：2
> 
> 时间：2012-11-06T05:28:01.037
> 
> 标签：ruby, ruby-on-rails-3, testing, login, specifications

除非是管理员，否则不允许查看用户页面。因此，如果用户没有登录，他们将无法离开主页。在 user_controller_spec 我们有几个关于编辑个人信息或密码的测试。但是测试永远不会通过，因为我们在spec类中创建的用户没有登录。有没有办法让user_controller_spec中的用户登录？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T05:35:19.907

如果您使用 Devise 进行身份验证，它提供了一个辅助方法：`sign_in`

所以你可以做这样的事情：

```
it "should do something" do
  sign_in(user) # user is an object of your User model
  #Continue testing
end 
```

有关详细信息，请参阅[此文档](https://github.com/plataformatec/devise#test-helpers)。

# c++ - 在 SFML 中获取文本的尺寸

> ID：13244928
> 
> 赞同：10
> 
> 时间：2012-11-06T05:29:00.607
> 
> 标签：c++, sfml

我想知道如何在 SFML 中获得文本的尺寸？

我试着这样做：

```
 sf::Text text("Hello SFML", font, 50);

// using text.getRect()
// i also tried getScale() & getSize()
// neither are correct

 text.setPosition( window.getSize().y/2 - text.getRect().y,50 ); 
```

有人知道吗 ？

谢谢 ：）

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-11-06T05:56:54.107

查看文档，该功能似乎 [`getLocalBounds`](http://www.sfml-dev.org/documentation/2.0/classsf_1_1Text.php#a8a766ea03a1b8899cd1542765771a4ae)对您有用。该行将是：

```
float width = text.getLocalBounds().width; 
```

我不确定该`sf::Text`对象是否会在边界矩形的末端添加任何填充。

或者，您可以使用以下内容[`findCharacterPos`](http://www.sfml-dev.org/documentation/2.0/classsf_1_1Text.php#adf120ed4159e43daa782b17fea23ea82)：

```
float width = text.findCharacterPos(numChars - 1).x - text.findCharacterPos(0).x; 
```

其中`numChars`是`text`对象字符串中的字符数。但是，由于`findCharacterPos`会返回全局坐标，使用起来可能更方便`getLocalBounds`，这样您就不必担心您的`text`对象是否应用了任何变换。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-18T23:26:09.457

您可以使用 getGlobalBounds() 获取变换后的大小/坐标（旋转、缩放、移动...）。否则它是 getLocalBounds()。

文档：[http ://www.sfml-dev.org/documentation/2.3.1/classsf_1_1Text.php](http://www.sfml-dev.org/documentation/2.3.1/classsf_1_1Text.php)

# c# - 在新行中写入文本（循环）

> ID：13244934
> 
> 赞同：0
> 
> 时间：2012-11-06T05:29:14.787
> 
> 标签：c#, asp.net, web-applications

我想为和添加框架创建一个简单的日志文件。
这是我到目前为止发现的内容。> br> 这个类是从另一个在循环中执行的类调用的，所以每次循环结束时它都会调用这个 calss 并且这个类将写入一个日志（及时创建的数据）。但是，我得到的只是每次在 txt 文件中写入一个新字符串，它只会替换第一个字符串。如何在不替换旧字符串的情况下在新行中添加新字符串？
我读了，`environment.newline`但我不明白。

```
 private void logFile()
    {
        StreamWriter logfile = null;
        logfile = File.CreateText(Server.MapPath("/CCTV_Files/log.txt"));
        try
        {
            logfile.Write(String.Format("{0:yyyyMMdd_hhmmss}", DateTime.Now) + " Frame added");
        }
        catch (IOException e)
        {
            Console.WriteLine(e);
        }
        catch (Exception e)
        {
            Console.WriteLine(e);
        }
        finally
        {
            if (logfile != null)
            {
                logfile.Close();
            }
        }
     } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T05:33:11.960

你需要使用 File.AppendText()，这里是[msdn](http://msdn.microsoft.com/en-us/library/system.io.file.appendtext.aspx)帮助

```
private void logFile()
    {
        StreamWriter logfile = null;
        logfile = File.AppendText(Server.MapPath("/CCTV_Files/log.txt"));
        try
        {
            logfile.Write(String.Format("{0:yyyyMMdd_hhmmss}", DateTime.Now) + " Frame added");
        }
        catch (IOException e)
        {
            Console.WriteLine(e);
        }
        catch (Exception e)
        {
            Console.WriteLine(e);
        }
        finally
        {
            if (logfile != null)
            {
                logfile.Close();
            }
        }
     } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-06T05:33:10.347

使用[File.AppendText](http://msdn.microsoft.com/en-us/library/system.io.file.appendtext.aspx)：

```
logfile = File.AppendText(Server.MapPath("/CCTV_Files/log.txt")); 
```

而不是[File.CreateText](http://msdn.microsoft.com/en-us/library/system.io.file.createtext.aspx)：

```
logfile = File.CreateText(Server.MapPath("/CCTV_Files/log.txt")); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-06T05:33:29.410

此方法等效于将 append 参数设置为 false 的 StreamWriter(String, Boolean) 构造函数重载。如果 path 指定的文件不存在，则创建该文件。如果文件确实存在，则其内容将被覆盖。

**选项 1：**您可以将 StreamWriter 与 append as True 一起使用。

public StreamWriter（字符串路径，布尔追加）

StreamWriter sw = new StreamWriter(fileName, true)

**选项 2：**您也可以选择使用 File.AppendText。

参考：

[http://msdn.microsoft.com/en-us/library/system.io.file.createtext.aspx](http://msdn.microsoft.com/en-us/library/system.io.file.createtext.aspx)

[http://msdn.microsoft.com/en-us/library/36b035cb.aspx](http://msdn.microsoft.com/en-us/library/36b035cb.aspx)

[http://msdn.microsoft.com/en-us/library/system.io.file.appendtext.aspx](http://msdn.microsoft.com/en-us/library/system.io.file.appendtext.aspx)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-06T05:33:09.187

尝试这个。

```
 string path = your file path;
   using(StreamWriter sw = new StreamWriter(path,true))
           {

                    sw.WriteLine("string here");
           } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-06T05:32:02.153

您可以在附加模块中打开日志文件。

[http://msdn.microsoft.com/en-us/library/3zc0w663.aspx](http://msdn.microsoft.com/en-us/library/3zc0w663.aspx)

这将很有用

[http://roque-patrick.com/windows/final/bbl0190.html](http://roque-patrick.com/windows/final/bbl0190.html)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-06T05:40:03.103

为什么要费心打开文件和管理它们！使用 log4net 库： [log4net](http://logging.apache.org/log4net/)

太棒了，只需几行配置，您就可以拥有日志文件，其中包含完整的信息和详细信息。

```
private static readonly ILog log = LogManager.GetLogger(typeof(Foo));

///In your method:
log.Info("Information");
log.Error("Error happened");
log.Debug("bla bla");
///etc. 
```

这是日志文件的示例：

```
176 [main] INFO  examples.Sort - Populating an array of 2 elements in reverse order.
225 [main] INFO  examples.SortAlgo - Entered the sort method.
262 [main] DEBUG SortAlgo.OUTER i=1 - Outer loop.
276 [main] DEBUG SortAlgo.SWAP i=1 j=0 - Swapping intArray[0] = 1 and intArray[1] = 0
290 [main] DEBUG SortAlgo.OUTER i=0 - Outer loop.
304 [main] INFO  SortAlgo.DUMP - Dump of integer array:
317 [main] INFO  SortAlgo.DUMP - Element [0] = 0
331 [main] INFO  SortAlgo.DUMP - Element [1] = 1
343 [main] INFO  examples.Sort - The next log statement should be an error message.
346 [main] ERROR SortAlgo.DUMP - Tried to dump an uninitialized array.
467 [main] INFO  examples.Sort - Exiting main method. 
```

如果您坚持使用自己的方式，只需使用以下代码：

`logfile = File.AppendText(Server.MapPath("/CCTV_Files/log.txt"));`

# javascript - JavaScript 根据用户当前时间输出文本

> ID：13244939
> 
> 赞同：37
> 
> 时间：2012-11-06T05:29:33.827
> 
> 标签：javascript, string, text, time

我不知道 JavaScript，但我熟悉以下说明。我知道一点PHP。

我正在寻找一段 JS，它将根据用户的当前时间为我的标题输出特定的文本字符串。

例如：

```
12:00AM - 12:00PM - Good Morning!  
12:00PM - 6:00PM - Good Afternoon!  
6:00PM - 12:00AM - Good Evening! 
```

* * *

## 回答 #1

> 赞同：88
> 
> 时间：2012-11-06T05:40:37.870

尝试以下一段 Javascript 代码：

```
var today = new Date()
var curHr = today.getHours()

if (curHr < 12) {
  console.log('good morning')
} else if (curHr < 18) {
  console.log('good afternoon')
} else {
  console.log('good evening')
} 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-11-06T05:41:59.730

```
var data = [
    [0, 4, "Good night"], 
    [5, 11, "Good morning"],          //Store messages in an array
    [12, 17, "Good afternoon"],
    [18, 24, "Good night"]
],
    hr = new Date().getHours();

for(var i = 0; i < data.length; i++){
    if(hr >= data[i][0] && hr <= data[i][1]){
        console.log(data[i][2]);
    }
} 
```

演示：http: [//jsfiddle.net/DerekL/we8Ty/](http://jsfiddle.net/DerekL/we8Ty/)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2016-12-05T16:00:30.757

这只是上面Derek 朕会功夫的解决方案的一个小变化。
我觉得数组比一堆`if`语句更干净。
如果您倒着工作时间，则不需要开始*和*结束时间。
此外，一旦你进行了比赛，我添加了一个`break;`以提前踢出。

```
var data = [
    [22, 'Working late'],
    [18, 'Good evening'],
    [12, 'Good afternoon'],
    [5,  'Good morning'],
    [0,  'Whoa, early bird']
],
hr = new Date().getHours();
for (var i = 0; i < data.length; i++) {
    if (hr >= data[i][0]) {
        console.log(data[i][1])
        break;
    }
} 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2018-06-29T14:13:47.767

我知道这是一个旧线程，我只是为需要简单解决方案的任何人分享这 2 行代码:)

```
var hour = new Date().getHours();
console.log("Good " + (hour<12 && "Morning" || hour<18 && "Afternoon" || "Evening")) 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-11-06T06:28:15.980

怎么样：

```
var time = new Date().getHours();
   ,greeting = 'Good '+ (time < 12 ? 'Morning' : 
                         time < 18 ? 'Afternoon' : 'Evening');
//=> new Date('2012/11/06 13:10') => 'Good Afternoon'
//=> new Date('2012/11/06 10:33') => 'Good Morning'
//=> new Date('2012/11/06 19:23') => 'Good Evening' 
```

或增加`Date`

```
Date.prototype.greeting = function(){ 
   var time = this.getHours();
   return 'Good '+ (time<12 ? 'Morning' : time<18 ? 'Afternoon' : 'Evening');
};
new Date('2012/11/06 19:23').greeting() //=> 'Good Evening' 
```

**[见 jsfiddle](http://jsfiddle.net/uCC6a/)**

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-11-06T05:41:02.573

试试这个js代码，这应该工作..

```
var dt = new Date().getHours();
if (dt >= 0 && dt <= 11){
 console.log('GM')
}else if (dt >= 12 && dt <= 17){
 console.log('Good Afternoon!')
}else {
 console.log('GE')
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2021-07-29T14:02:48.173

```
const date = new Date();
const currentTime = date.getHours();

let greeting;

if (currentTime >= 0 && currentTime <= 12) {
  greeting = "Good Morning";
} else if (currentTime > 12 && currentTime <= 18) {
  greeting = "Good Afternoon";
} else {
  greeting = "Good Evening";
}

ReactDOM.render(
  <h1>{greeting}</h1>,
  document.getElementById("root")
); 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2021-10-26T13:34:36.750

这应该可以帮助您：

```
const currentTime = new Date().getHours();
let greetingText = "";

if (currentTime < 12) {
  greetingText = "Good Morning"; 
} else if (currentTime < 18) {
  greetingText = "Good Afternoon"; 
} else {
  greetingText = "Good Evening"; 
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-11-06T05:41:05.533

我还没有测试，但它应该工作：

```
function getText()
{
  var hour = new Date().getHours();
  var minute = new Date().getMinutes();
  if ( hour >= 0 && hour < 12 )
    return 'Good Morning!';
  else if ( hour == 12 && minute == 0 )
    return 'Good Morning!';
  else if ( hour == 12 && minute > 0 )
    return 'Good Afternoon!';
  else if ( hour == 6 && minute == 0 )
    return 'Good Afternoon!';
  else if ( hour == 6 && minute > 0 )
    return 'Good Evening!';
  else if ( hour > 12 && hour < 6 )
    return 'Good Afternoon!'; 
  else if ( hour > 6 && hour < 12 )
    return 'Good Evening';
} 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2014-12-23T10:16:58.637

```
<script type="text/javascript">

    var myDate = new Date();
    var name = window.prompt("Please enter your name: ");

    if (myDate.getHours() < 12) {
        document.write("Good Morning " +name);
    }
    else if(myDate.getHours() >=12 && myDate.getHours() <=17){
        document.write("Good Afternoon " +name);
    }
    else if (myDate.getHours() > 17 && myDate.getHours() <=24) {
        document.write("Good Evening " +name);
    }
    else
    {
        document.write("Good Night");
    }
</script> 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2018-10-09T09:51:45.843

使用 moment.js 和 ES6：

```
import moment from 'moment';

console.log(`${getGreetingTime(moment())} ${userFirstName}`);

getGreetingTime = (currentTime) => {
  if (!currentTime || !currentTime.isValid()) { return 'Hello'; }

  const splitAfternoon = 12; // 24hr time to split the afternoon
  const splitEvening = 17; // 24hr time to split the evening
  const currentHour = parseFloat(currentTime.format('HH'));

  if (currentHour >= splitAfternoon && currentHour <= splitEvening) {
    return 'Good afternoon';
  } else if (currentHour >= splitEvening) {
    return 'Good evening';
  }
  return 'Good morning';
} 
```

改编自[James1x0 的要点](https://gist.github.com/James1x0/8443042)。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2020-05-04T07:33:17.903

```
 var today = new Date();
    var curHr = today.getHours();

    if (curHr < 12) {
        console.log('good morning')
    } else if (curHr >= 12 && curHr < 16) {
        console.log('good afternoon')
    } else {
        console.log('good evening')
    } 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2020-08-18T11:50:07.143

```
var day=new Date();
var hr=day.getHours();
ReactDOM.render(
<div>
<h1>
{"Good"+ (hr< 12 ? "Morning": hr < 18 ? "Afternoon" :"Evening")}
</h1></div>,document.getElementById("root")); 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2020-08-26T23:15:33.303

这是我用的

```
import React from "react";
import ReactDOM from "react-dom"

const today = new Date().getHours();

let greeting;

if (today < 12) {
  greeting = "Good Morning"
} else if (today < 18) {
  greeting = "Good Afternoon"
} else {
  greeting = "Good Night"
} 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2020-11-08T23:15:40.420

ES6 和 Moment.js 的另一种方式

```
 import moment from 'moment';

  const getGreetingTime = () => {
    const splitMorning = 6;
    const splitAfternoon = 12;
    const splitEvening = 17;
    const splitNight = 20;
    const currentHour = parseFloat(moment().format('HH'));
    if (currentHour >= splitMorning && currentHour <= splitAfternoon) {
      return 'Good morning';
    } else if (currentHour >= splitAfternoon && currentHour <= splitEvening) {
      return 'Good afternoon';
    } else if (currentHour >= splitEvening && currentHour <= splitNight) {
      return 'Good evening';
    }
    return 'Good night';
  };

  const greeting = getGreetingTime(); 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2021-05-20T08:21:15.507

试试这个

```
if (hour >= 0 && hour < 3){
                return 'Good Late Night!';
            }
            else if (hour >= 3 && hour < 12){
                return 'Good Morning!';
            }
            else if (hour == 12 && minute == 0){
                return 'Good Morning!';
            }
            else if (hour == 12 && minute > 0){
                return 'Good Afternoon!';
            }
            else if (hour == 6 && minute == 0){
                return 'Good Afternoon!';
            }
            else if (hour == 6 && minute > 0){
                return 'Good Evening!';
            }
            else if (hour > 12 && hour <= 15){
                return 'Good Noon!';
            }
            else if (hour > 15 && hour <= 6){
                return 'Good Afternoon!';
            }
            else if (hour > 6 && hour < 12){
                return 'Good Evening';
            } 
```

* * *

## 回答 #17

> 赞同：-1
> 
> 时间：2020-04-03T18:30:36.270

这里它在一个 html 文件中。（你可以把脚本放在main.js里面的html之外）

```
<!DOCTYPE html>
<html>
<head>
    <meta charset='utf-8'>
    <meta http-equiv='X-UA-Compatible' content='IE=edge'>
    <title>greating</title>
    <meta name='viewport' content='width=device-width, initial-scale=1'>
    <link rel='stylesheet' type='text/css' media='screen' href='main.css'>
    <script src='main.js'></script>
</head>
<body>
    <h4 id="greating" >ERROR</h4>
    <script>
    var dt = new Date().getHours();
        if (dt >= 0 && dt <= 11){
         document.getElementById("greating").innerHTML='Good Morning'
        }else if (dt >= 12 && dt <= 17){
            document.getElementById("greating").innerHTML='Good Afternoon'
        }else {
            document.getElementById("greating").innerHTML='Good Evening'
        }
    </script>
</body>
</html>
```

# php - 使用正则表达式的 jQuery 验证

> ID：13244940
> 
> 赞同：-3
> 
> 时间：2012-11-06T05:29:36.960
> 
> 标签：php, regex, jquery-validate

我有一个像“firstname lastname(email)”这样的字符串格式，我想使用 jQuery 根据这种格式验证输入的值。怎么可能？我已经尝试了很多东西，但那些都不能正常工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T05:39:44.537

试试这个正则表达式

**[演示](http://jsfiddle.net/pintu31/wTMv3/260/)**

```
/^([a-zA-Z]+ )+([a-zA-Z])+([\(])+([0-9a-zA-Z]+([_.-]?[0-9a-zA-Z]+)*@[0-9a-zA-Z]+[0-9,a-z,A-Z,.,-]*(.){1}[a-zA-Z]{2,4})+(\))+$/

$.validator.addMethod("username_email",function(value,element){
   return this.optional(element) || /^([a-zA-Z]+ )+([a-zA-Z])+([\(])+([0-9a-zA-Z]+([_.-]?[0-9a-zA-Z]+)*@[0-9a-zA-Z]+[0-9,a-z,A-Z,.,-]*(.){1}[a-zA-Z]{2,4})+(\))+$/i.test(value); 
},"enter firstname lastname(email)"); 
```

**[使用正则表达式进行 Jquery 验证](http://www.9lessons.info/2010/01/jquery-validation-with-regular.html)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T05:41:43.570

没有办法准确、简洁地验证电子邮件。一个绝对正确的正则表达式会很长（而且大多数电子邮件服务器不支持 RFC 无论如何定义的所有电子邮件地址格式）。您可以假设电子邮件是*一个有效字符序列，然后是一个 at 符号，然后是一个有效字符序列*。如果电子邮件的正则表达式是`/[\w.+-]+\@[\w.]+/`，那么完整的正则表达式（如果你想禁止中间名）是

```
/[a-zA-Z]+ [a-zA-Z]+\([\w.+-]+\@[\w.]+\)/ 
```

# php - 如何从 DynamoDB（iOS 和 PHP）获取行数？

> ID：13244941
> 
> 赞同：0
> 
> 时间：2012-11-06T05:29:49.220
> 
> 标签：php, ios, amazon-web-services, amazon-dynamodb

我需要查询 DynamoDB 表以获取行数的帮助。

考虑一下，我有一个表“用户”，其中包含三个字段，“用户名”、“密码”和“用户类型”。UserType 可以是“Admin”、“Employee”或@“Guest”。现在我想获得表中“管理员”的计数。在 SQL 中，我们这样编写查询，

```
SELECT COUNT(*) FROM Users WHERE UserType='Admin' 
```

现在我需要使用 DynamoDB iOS SDK 做同样的事情。现在，我正在这样做。

```
- (int)adminUsersCount {
    DynamoDBScanRequest *request = [[[DynamoDBScanRequest alloc] initWithTableName:@"Users"] autorelease];
    DynamoDBCondition *condition = [[[DynamoDBCondition alloc] init] autorelease];
    NSMutableArray *attrList = [NSMutableArray arrayWithObject:[[[DynamoDBAttributeValue alloc] initWithS:@"Admin"]] autorelease]];
    condition.attributeValueList = attrList;
    condition.comparisonOperator = @"EQ";
    [request setScanFilterValue:condition forKey:@"UserType"];
    DynamoDBScanResponse *response = [[AmazonClientManager ddb] scan:request];
    return response.items.count;
} 
```

在这里，我正在获取所有行以了解该计数。我知道这不是正确的方法，而且确实是个坏主意。我不知道如何在不获取所有行的情况下单独获得计数。

1.  我想知道如何在 iOS SDK 中做到这一点。
2.  我也想知道如何在 PHP SDK 中做到这一点。

谢谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-06T14:33:21.800

我无法回答 PHP 和 IOS SDK，因为我没有使用它们（我使用 Python）。但是，从低级别 DynamoDB 的角度来看：

*   **如果所有用户都是 admin**，则可以使用`ItemCount`from `DescribeTable`。它每 6 小时更新一次，但它是免费的
*   **如果`UserType`是`range_key`**（优秀），您可以将`Count`参数设置`Query`为`True`然后读取`Count`答案的字段。
*   **在所有其他情况下**（不好），请使用 Scan`Query`以及您的过滤条件。

这就是说，`Query`并且`Scan`将始终返回项目计数。该`Count`参数仅指示他们不要返回真实物品。请注意，它只节省带宽。就预置吞吐量而言，它不会更快也不会更便宜。

如果您处于第三种情况，我建议您重新设计您的架构，因为它会*非常*缓慢且昂贵。在所有请求中，您都需要浏览整个表格。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-20T14:56:49.570

对于 PHP 部分，您需要执行 a`Scan`并且您的代码看起来像...

```
$dynamodb = new AmazonDynamoDB();

$response = $dynamodb->scan(array(
'TableName' => 'Users',
'ScanFilter' => array( 'UserType' => array( 'ComparisonOperator' => "EQ", 'AttributeValueList' => array( array( AmazonDynamoDB::TYPE_STRING => "Admin" ) ) ) ) )); 
```

现在您需要`Count`返回的记录。

```
$count = (int) $response->body->Count; 
```

如果需要，现在打印它...

```
echo (string) $count; 
```

对于登录示例，您可以参考此博客条目...

[使用 Amazon Web Services (AWS) DynamoDB 创建登录](http://mohit.epistlee.com/creating-login-with-amazon-web-services-aws-dynamodb)

# ruby-on-rails - .如果只有 1 个结果，则每个都打破 - 轨道

> ID：13244946
> 
> 赞同：0
> 
> 时间：2012-11-06T05:30:18.300
> 
> 标签：ruby-on-rails, ruby-on-rails-3, each

出于某种原因，当我在下面得到一个结果时，每次尝试执行 .each 时，我都会不断收到“未定义的方法‘每个’”错误。

如果我使用 .inspect，我可以看到有匹配项。如果结果不超过 1 个，.each 是否有效？如果没有，我应该改用什么？

```
<% friends = graph.get_object("/me/friends").map{ |hash| hash["id"] } %>

<% User.select([:id]).where(fbookid: friends).each do |common| %>

<% end %> 
```

如果我只是在 User.select 行上运行 .inspect （不是每个），那么我会得到

```
[#<User id: 1>] 
```

任何帮助，将不胜感激！

谢谢！

*更新*

添加额外的参数似乎允许我使用每个......我不知道为什么。这是完全相同的结果（只有 1 个）。

```
User.select([:id, :email, :first_name]).where(fbookid: friends).each do |friend| 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T05:35:24.917

你得到简单的对象而不是数组，所以它不起作用。`.each` 当`array`你得到简单的对象以便你可以直接使用时方法工作意味着

例如

```
# if name attributes
User.select([:id]).where(fbookid: friends).name 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T06:11:31.100

您***可以***使用 each on `User.select([:id]).where(fbookid: friends)`，即使只有 1 个元素。即使没有元素，它也不会引发异常。

错误发生在其他地方。也许您在每个循环中遇到了错误。

您可以发布更多代码吗？

# go - new() 和“常规”分配之间有区别吗？

> ID：13244947
> 
> 赞同：58
> 
> 时间：2012-11-06T05:30:28.487
> 
> 标签：go

在 Go 中，以下两段代码之间是否存在显着差异：

```
v := &Vector{} 
```

与

```
v := new(Vector) 
```

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-11-06T05:58:44.730

不，他们返回的都是一样的，

```
package main

import "fmt"
import "reflect"

type Vector struct {
    x   int
    y   int
}

func main() {
    v := &Vector{}
    x := new(Vector)
    fmt.Println(reflect.TypeOf(v))
    fmt.Println(reflect.TypeOf(x))
} 
```

结果：

```
*main.Vector
*main.Vector 
```

邮件列表上有一些争论，认为两者都令人困惑：

[https://groups.google.com/forum/?fromgroups=#!topic/golang-nuts/GDXFDJgKKSs](https://groups.google.com/forum/?fromgroups=#!topic/golang-nuts/GDXFDJgKKSs)

需要注意的一件事：

> new() 是获取指向未命名整数或其他基本类型的指针的唯一方法。你可以写“p := new(int)”，但不能写“p := &int{0}”。除此之外，这是一个偏好问题。

来源：[https ://groups.google.com/d/msg/golang-nuts/793ZF_yeqbk/-zyUAPT-e4IJ](https://groups.google.com/d/msg/golang-nuts/793ZF_yeqbk/-zyUAPT-e4IJ)

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-11-06T07:08:53.777

是的，这两个代码片段之间存在根本区别。

```
v := &Vector{} 
```

**仅**适用于`Vector`结构类型、映射类型、数组类型或切片类型

```
v := new(Vector) 
```

适用于`Vector`任何**类型**。

示例：[http ://play.golang.org/p/nAHjL1ZEuu](http://play.golang.org/p/nAHjL1ZEuu)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-06T06:01:57.383

根据[Effective Go](http://golang.org/doc/effective_go.html#allocation_new)，`new()`是一个分配内存并将其归零的函数；也就是说，每个字段（以及结构的整个内存）都将设置为`0`s。如果您设计您的结构，以便在创建它们时所有字段*都应*为零，那么很好并建议使用它。但是，如果您需要对要使用的初始值进行更多控制，则应使用更传统的方法。

在您提到的特定情况下，差异无关紧要，但应在其他地方注明。

我希望这有帮助！:)

* * *

## 回答 #4

> 赞同：-5
> 
> 时间：2018-03-12T07:15:37.283

这里有一个区别：对于一个结构，从is和 from`Person`编组的 JSON字符串使用.`&[]*Person{}``[]``new([]*Person)``null``json.Marshal`

在此处查看示例：https: [//play.golang.org/p/xKkFLoMXX1s](https://play.golang.org/p/xKkFLoMXX1s)

*   [https://golang.org/doc/effective_go.html#allocation_new](https://golang.org/doc/effective_go.html#allocation_new)
*   [https://golang.org/doc/effective_go.html#composite_literals](https://golang.org/doc/effective_go.html#composite_literals)

# php - 如何在 PHP 中动态创建字符串？

> ID：13244948
> 
> 赞同：2
> 
> 时间：2012-11-06T05:30:44.037
> 
> 标签：php, string, function, variables, eval

我有一个用于构建字符串的预定义模式，应该在整个脚本中定期创建。

```
$str="$first - $second @@ $third"; // pattern for building the string
$first="word1";
$second="word2";
$third="word3";
$string= ..?? // string should be built here based on the pattern 
```

目前，我正在使用`eval`基于最初定义的模式生成适当的字符串。但是，由于这种情况偶尔会发生并且`eval`通常很糟糕，我希望找到另一种方法。

请注意，模式在所有代码之上只定义一次，我只能通过一行来编辑所有脚本的模式。因此，***任何`$string`改变都不应触及***。

我试过`create_function`了，但需要相同数量的参数。使用`eval`，我可以轻松更改模式，但是使用`create-function`，我需要更改整个脚本。例如，如果将字符串模式更改为

```
$str="$first @@ $second"; // One arg/var is dropped 
```

**评估示例：**

```
$str="$first - $second @@ $third"; // Pattern is defined one-time before codes
$first="word1";
$second="word2";
$third="word3";
eval("\$string = \"$str\";"); 
```

**create_function 示例：**

```
$str=create_function('$first,$second,$third', 'return "$first - $second @@ $third";');
$string=$str($first,$second,$third); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T06:00:08.737

您可以使用[`sprintf`](http://php.net/manual/en/function.sprintf.php)或提供的字符串格式化功能[`vsprintf`](http://php.net/manual/en/function.vsprintf.php)。

```
$format = "%s - %s @@ %s"; // pattern for building the string
$first = "word1";
$second = "word2";
$third = "word3";
$string = sprintf($format, $first, $second, $third); 
```

`vsprintf`如果你想传递一个数组，你可以使用。

```
$format = "%s - %s @@ %s"; // pattern for building the string
$values = array($first, $second, $third);
$string = vsprintf($format, $values); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T05:47:18.633

这可能会有所帮助，不确定。

```
$str = "_first_ - _second_ @@ _third_"; // pattern for building the string
// _first, _second_... are placeholders for actual values

// this function performs the string building
function buildString( $arr ) {
   global $str;

   $keys = array_keys( $arr );
   $vals = array_values( $arr );

   return eval( str_replace( $keys, $vals, $str ) );
}

while(some condition here) {
    $str = 'A new string'; // you can change your string builiding pattern here

    // this array is built in the fashion ->
    // keys of array are the variables in $str and
    // their actual values are the values of $str
    $arr=array('_first_' => $first, '_second_' => $second, '_third_' => $third);
    echo buildString( $arr );
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T05:41:23.207

对我来说似乎是相当简单的事情。`str_replace()`基于模式的使用和替换

```
$str="$first$ - $second$ @@ $third$"; // pattern for building the string
$first="word1";
$second="word2";
$third="word3";

$newstr = str_replace('$first$', $first, $str);
$newstr = str_replace('$second$', $second, $newstr);
$newstr = str_replace('$third$', $third, $newstr); 
```

# c# - 在另一个线程的主线程中显示表单

> ID：13244955
> 
> 赞同：1
> 
> 时间：2012-11-06T05:31:22.353
> 
> 标签：c#, .net, multithreading

我用主要形式和另一种显示进度的形式开发多线程应用程序。起初：我在 MainForm 中创建 ProgressForm

```
Progress p=new Progress(); 
```

第二：我创建类模型的新实例（我的应用程序中的所有数据）。

```
Model m = new Model(); 
```

并订阅事件：

```
 m.OperationStarted += new EventHandler(OnCopyStarted);

private void OnCopyStarted(object sender, EventArgs e)
{
  p.Show();
} 
```

第三：我在另一个线程中运行一些操作，我在另一个模型中更改属性

```
 private bool isStarted;
            public bool IsStarted
            {
                get{return isStarted;}
                set 
                {
                    isStarted = value;
                    if (isStarted && OperationStarted != null)
                    { 
                        OperationStarted(this, EventArgs.Empty);
                    }
                }
            } 
```

我的问题是：为什么进度表不显示在主线程中？如何在没有锁定的情况下运行它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T06:00:26.710

所有 UI 操作都必须在主 UI 线程上运行。

该`OnCopyStarted`方法正在另一个线程上调用，因此在显示对话框之前必须切换到 UI 线程。

您可以使用表单的 BeginInvoke 切换到 UI 线程。如：

```
void OnCopyStarted(object sender, EventArgs e)
{
   p.BeginInvoke((Action) (() => p.Show()));
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-06T05:40:15.767

试试看 ：

```
var t = new Thread(() => {
            Application.Run(new Progress ());
        });
t.Start(); 
```

# yii-extensions - 从数据库中获取用户名并显示在索引页面上

> ID：13244956
> 
> 赞同：0
> 
> 时间：2012-11-06T05:31:24.023
> 
> 标签：yii-extensions, yii, yii-components

我有数据库表client_info（id，first_name，last_name，email，passowrd）。我使用电子邮件和密码登录到我的网站。在索引/主页标题部分的右上角..first_name 应该显示输入其电子邮件的同一用户...i:e Welcom:Johen if first_name=john where email=current_email。..我应该使用什么命令 echo 或 CHTML 或哪个模型..因为 index.php 没有模型它唯一的布局 layout/main.php 文件.使用 yii 框架...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T07:58:10.730

实现这一点的 Yii 方法是创建自己的 WebUser 类，该类从 Yii 类 CWebUser 扩展而来。当用户登录时，您应该在其中存储他的用户名。在那之后，你可以简单地做

```
echo Yii::app()->user->username; 
```

等等。关于这个主题的教程可以在这里找到：[http ://www.yiiframework.com/wiki/60/](http://www.yiiframework.com/wiki/60/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-23T08:39:05.653

实现这一点的 Yii 方法是创建自己的 WebUser 类，该类从 Yii 类 CWebUser 扩展而来。当用户登录时，您应该在其中存储他的用户名。在那之后，你可以简单地做

```
echo Yii::app()->user->user; 
```

# xcode - 如何避免模态故事板无限循环

> ID：13244961
> 
> 赞同：6
> 
> 时间：2012-11-06T05:32:06.380
> 
> 标签：xcode, ios5, storyboard, modal-dialog, segue

一年前，我在旧版本的 Xcode 上编写了许多 iOS 应用程序。我刚刚开始了一个新项目，并在最新的 Xcode 中发现了故事板功能。事实证明，这非常适合我正在编写的应用程序，因为它由大约 30 个相互关联的屏幕组成。

我的问题是，我如何构建我的故事板和 segues 以允许我的应用程序遵循循环路径通过我的屏幕。我已经看到了许多[示例](http://codingandcoffee.wordpress.com/2011/10/12/iphone-tutorial-one-introduction-to-storyboarding/)，它们只是使用 modal 选项将屏幕 1 连接到屏幕 2，然后将屏幕 2 连接到屏幕 1。这显然有效，但是当我调试以这种方式构建的应用程序时，它会为每个执行的 segue 实例化每个屏幕（视图控制器）的新实例。在下图中（抱歉，我画了一张漂亮的图片，但由于我的新手状态，无法发布），我如何从屏幕 1 转到屏幕 2 再到屏幕 3 并返回原始屏幕 1 而无需创建新的实例？

```
// Screen 1 --> Screen 2 --> Screen3 
//     ^                         | 
//     |                         | 
//     +-------------------------+ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-10T03:04:14.000

好的，自从提出这个问题以来，我已经做了一些研究，我相信我可以为这个问题提供一个合理的答案。简而言之，我在问题中提出的方法与故事板和转场的实际工作方式不兼容。Segue**总是**实例化它所针对的视图控制器/视图的新实例。这意味着当我们从屏幕 3 回到屏幕 1 时，我们将转到屏幕 1 的新实例，而不是原来的实例。为了解决这个问题，我将稍微不同地实现情节提要。

```
// Screen 1 --> Screen 2
//     |
//     +------> Screen 3 
```

然后我将配置屏幕 1 以监听来自屏幕 2 和 3 的“下一个屏幕”消息（通过委托/协议）。

当屏幕 1 上的用户选择屏幕 2 的按钮时，情节提要和 segue 将处理屏幕 2 的模态实例化。当屏幕 2 上的用户选择“下一个屏幕”按钮，而不是继续到屏幕 3 时，我将关闭screen 2 并让 screen 1 通过新的 Screen 1 -> Screen 3 segue 启动 Screen 3。

这种方法的优点是允许屏幕 1 成为循环中所有后续屏幕的主控制器（在我的例子中，我在循环中有 10 个屏幕/练习）。唯一的缺点是故事板不能很好地反映屏幕的流程。

我希望这可以帮助其他尝试在他们的 iOS 项目中实现相同目标的人。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-11-14T17:58:37.617

我找到了很好的解决方案——为关闭源视图控制器创建新的自定义 segue。怎么做？为了创建这个你可以看到链接[http://jeffreysambells.com/2014/02/19/dismissing-a-modal-view-using-a-storyboard-segue](http://jeffreysambells.com/2014/02/19/dismissing-a-modal-view-using-a-storyboard-segue) 我希望能帮助别人=）

# math - 获取对应于从 p1 到 p2 距离的 1/3 的点

> ID：13244965
> 
> 赞同：2
> 
> 时间：2012-11-06T05:32:48.603
> 
> 标签：math, linear-algebra, algebra

例如，如果我们有 p1 = (x1,y1) 和 p2 = (x2,y2) 并且我想找到对应于 p1 和 p2 距离的 1/3 的点，该点位于由 p1 和p2，那我会用什么公式呢？现在脑子有问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T05:38:03.503

使用截面公式。[在这里](http://www.learnnext.com/lesson/CBSE-X-Maths-Section-Formula.htm)阅读。

你必须找到一个点（x，y），它以 1:3 的比例分割线。

```
x = (x2+3*x1)/4
y = (y2+3*y1)/4 
```

如果线段的距离为 d 单位，则点**(x,y)**与**(x1,y1)**的距离为 d/3，与点**(x2,y2)的距离为 2d/3**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-06T05:38:13.773

如果 A 是到第一个点的向量，B 是到第二个点的向量，那么你想要的点是
`(2A + B) / 3`

这是因为 A 和 B 之间三分之一的点在矢量上是矢量 A + A 和 B 之间矢量的三分之一：

那是`A + 1/3(B-A)`

代数完成其余的工作。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-06T05:40:29.200

与任何其他职位相同：

```
p(t) = a*(1-t) + b*t 
```

其中 0 <= t <= 1 给出向量“a”和“b”之间的一条线上的所有点/

在你的情况下

```
p = (x1, y1)* (1-1/3) + (x2,y2) * 1/3 
```

这就是其他一些答案的样子。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-06T05:36:33.257

点 p3 = (x3, y3) 1/3 的距离是：

```
x3 = (2 * x1 + x2) / 3    
y3 = (2 * y1 + y2) / 3 
```

# android - 没有活动正在运行时需要上下文

> ID：13244966
> 
> 赞同：0
> 
> 时间：2012-11-06T05:32:40.330
> 
> 标签：android, android-layout

我正在从我的应用程序通知中显示一个弹出窗口。但是当我检查我的通知时，我的应用程序中没有任何活动正在运行，因此当我显示对话时在通知中。对话引发异常，因为没有活动正在运行，并且我传递给对话构造函数的上下文为空，因此在没有活动正在运行时我需要一个上下文，提前感谢。或者任何想法我可以如何实现这个提前谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T05:55:18.203

我会假设您的代码在 Android 的后台运行`Service`。如果是这样的话，你`Service`就是一个`Context`本身，所以你可以在需要的时候使用它。

您的代码在后台线程中而不是在 Android 中运行`Service`（在这种情况下您还有其他大问题），您可以使用应用程序上下文的实例。你通过调用得到一个[`Context.getApplicationContext`](http://developer.android.com/reference/android/content/Context.html#getApplicationContext%28%29)，你可以在`Activity`启动你的后台代码并缓存它以供以后使用。

请注意，虽然使用应用程序上下文而不是活动上下文存在某些问题 - 例如，您不能`LayoutInflater`从应用程序上下文中使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T05:46:09.307

```
@Override
    protected Dialog onCreateDialog(int i) 
    {
               LayoutInflater factory = LayoutInflater.from(this);
               final View textEntryView = factory.inflate(R.layout.sendemail, null);
               final View textEntryView1 = factory.inflate(R.layout.sendemail_title, null);
              to_id = (EditText) textEntryView.findViewById(R.id.edit_text_sender_mail_id);
              from_id =(EditText) textEntryView.findViewById(R.id.id);
              pwd =(EditText) textEntryView.findViewById(R.id.pwd);

               return new AlertDialog.Builder(current_activity.this)
                   .setTitle("hello")
                   .setCustomTitle(textEntryView1)
                   .setView(textEntryView)
                   .setPositiveButton("Send", new DialogInterface.OnClickListener() 
                   {
                       public void onClick(DialogInterface dialog, int whichButton)
                       {

                    // code here...    
                       }
                   })
                   .setNegativeButton("Cancel", new DialogInterface.OnClickListener() {
                       public void onClick(DialogInterface dialog, int whichButton)
                       {
                            System.exit(0);
                       }
                   })
                   .create();

    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T05:40:48.057

您可以使您的对话框扩展和 Activity 类，并将其主题更改为清单文件中的对话框。在这种情况下，您调用`notification.setLatestEventInfo(YourActivityDialog.this, contentTitle, contentText, contentIntent);`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-06T05:42:48.657

我遇到了同样的问题。我无法在我的活动中使用微调器。我通过使用`setContentView`以下方法解决了这个问题

```
public void onCreate(Bundle savedInstanceState) 
{   
 super.onCreate(savedInstanceState);
 View viewToLoad = LayoutInflater.from(this.getParent()).inflate(R.layout.main, null);
        this.setContentView(viewToLoad);
} 
```

另一种方式是您可以为您的对话框使用单独的活动。通过如下设置活动

```
style.xml

<resources>

    <style name="AppTheme" parent="android:Theme.Dialog">
        <item name="android:windowNoTitle">true</item>
    </style>

</resources> 
```

在 AndroidManifest 中声明这样的活动

```
<activity
android:name="DialogActivity"
android:theme="@style/AppTheme" /> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-06T05:50:55.730

您可以创建`MyApplication`从 继承的类`Application`，然后在该类中执行以下操作：

```
public class MyApplication extends Application {
    private static MyApplication instance;

    @Override
    public void onCreate() {
        super.onCreate();
        instance = this;
        .........
    }

    public static Context getContext() {
        return instance;
    } 
```

之后，`MyApplication.getContext()`如果您需要上下文并且没有闲置，您可以在任何地方使用`Activity`。

# php - MySQL 32 位或 64 位 - Apache 32 位 Windows 64 位？

> ID：13244975
> 
> 赞同：3
> 
> 时间：2012-11-06T05:33:18.283
> 
> 标签：php, mysql, apache, windows-7, 64-bit

我正在使用 Windows 7 64 位。

Apache 没有官方的 64 位安装程序，所以我使用的是 Apache 2.2.22 32 位（和 PHP 5.3.18 32 位顺便说一句）。

我想我应该使用 MySQL 32 位（否则会与 Apache 和/或 PHP 发生冲突，因为我模糊地记得很久以前我的试验和错误）

我错过了什么吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-06T06:30:34.743

我认为 MySQL 和 PHP 是通过 socket 链接的，所以在这种情况下，bit 的版本无关紧要。

我在我的 Windows 7 x64 上使用 nginx x86、PHP x86 和 MySQL x64，它们运行良好。

# iphone - 如何在 iPhone 中添加 GPS 支持？

> ID：13244977
> 
> 赞同：0
> 
> 时间：2012-11-06T05:33:29.467
> 
> 标签：iphone, objective-c, xcode

我想在我的应用程序中添加 gps 位置。我该怎么做？我需要什么样的 UI 来实现？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T05:41:01.653

[这个来自苹果的示例代码](http://developer.apple.com/iphone/library/samplecode/LocateMe/index.html)展示了如何从 GPS 获取坐标，希望对您有所帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T05:41:43.317

你可能想要这个：

[CLLocationManager 类参考](https://developer.apple.com/library/mac/#documentation/CoreLocation/Reference/CLLocationManager_Class/CLLocationManager/CLLocationManager.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T05:46:44.453

[这](http://www.icodeblog.com/2012/06/04/how-to-add-gps-to-your-ios-app-part-1/)是在您的 iOS 应用程序中实现定位服务的精彩教程。

希望这可以帮助。快乐编码:)

# android - 如何从不同类中的线程活动更新 MainActivity 的接口？

> ID：13244981
> 
> 赞同：0
> 
> 时间：2012-11-06T05:33:38.203
> 
> 标签：android

现在我正在建立套接字连接以将多个客户端连接到一台服务器。一切都很好，我在不同的班级做线程。但是当我用线程活动中的字符串填充 textView 时，我不能。请帮忙

这个 MainActivity：

公共类 MainActivity 扩展 Activity {

```
private static int port = 6000;
TextView txt;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    txt = (TextView) findViewById(R.id.txtCommand);
    txt.setText("Server : ");
    ServerSocket server1 = null;
    Server gameServer = new Server();
    try {
        server1 = new ServerSocket(port);
        // .. server setting should be done here
    } catch (IOException e) {
        System.out.println("Could not start server!");
       // return ;
    }

    while (true) {
        Socket client = null;
        try {
            client = server1.accept();
            gameServer.handleConnection(client);
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
}

public class Server  {
    private ExecutorService executor = Executors.newCachedThreadPool();

    public void handleConnection(Socket client) throws IOException {    
        PlayerConnection newPlayer = new PlayerConnection(this, client);
        txt.setText(newPlayer.getuname());
        this.executor.execute(newPlayer);
    }

    // add methods to handle requests from PlayerConnection
} 
```

和这个线程活动：

公共类 PlayerConnection 实现 Runnable { 私有服务器父级；

```
private Socket socket;
private PrintWriter out;
private BufferedReader in;
String line;

protected PlayerConnection(Server parent, Socket socket) throws IOException {
    this.parent = parent;
    this.socket = socket;

    this.in = new BufferedReader(new InputStreamReader(socket
            .getInputStream()));
    this.out = new PrintWriter(new OutputStreamWriter(
            socket.getOutputStream()));     
}

public void run() {
    while(!this.socket.isClosed()) {                        
        try {
            //int nextEvent = this.in.readInt();
            line = in.readLine();
            System.out.println("Server Receive : "
                    + line);
            out.println("Server Sent :" +line);
            System.out.println("SEND : "
                    + line);
            out.flush();
             if (line == null){
                 this.socket.isClosed();
                 break;
             }
        } catch (IOException e) {}
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T11:02:00.597

我意识到你有一个在你的 onCreate 方法中永远不会结束的 while 循环。尝试将该循环移动到您的线程中。此循环阻止您的应用程序的输入。

```
while (true) {
    Socket client = null;
    try {
        client = server1.accept();
        gameServer.handleConnection(client);
    } catch (IOException e) {
        e.printStackTrace();
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T05:42:39.250

您可以使用处理程序或 runOnUiThread 方法。

# objective-c - 未声明的标识符“mailComposeController”

> ID：13244983
> 
> 赞同：1
> 
> 时间：2012-11-06T05:34:01.467
> 
> 标签：objective-c, xcode, ios6, mfmailcomposer

这是我的 .m 代码：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{

    UITableViewCell *emailCell = [tableView cellForRowAtIndexPath:indexPath];
    if ([emailCell.textLabel.text isEqualToString:@"Contact Developer"]) {
        NSLog(@"Email button pressed...");
        if([MFMailComposeViewController canSendMail]) {
            MFMailComposeViewController *mailer = [[MFMailComposeViewController alloc] init];
            mailer.mailComposeDelegate = self;
            [mailer setSubject:@"A Message from MobileTuts+"];
            NSArray *toRecipients = [NSArray arrayWithObjects:@"fisrtMail@example.com", @"secondMail@example.com", nil];
            [mailer setToRecipients:toRecipients];
            NSString *emailBody = @"Have you seen the MobileTuts+ web site?";
            [mailer setMessageBody:emailBody isHTML:NO];
            [self presentModalViewController:mailer animated:YES];
            [mailer release];
            - (void)mailComposeController:(MFMailComposeViewController*)controller didFinishWithResult:(MFMailComposeResult)result error:(NSError*)error
            {
                switch (result)
                {
                    case MFMailComposeResultCancelled:
                        NSLog(@"Mail cancelled: you cancelled the operation and no email message was queued.");
                        break;
                    case MFMailComposeResultSaved:
                        NSLog(@"Mail saved: you saved the email message in the drafts folder.");
                        break;
                    case MFMailComposeResultSent:
                        NSLog(@"Mail send: the email message is queued in the outbox. It is ready to send.");
                        break;
                    case MFMailComposeResultFailed:
                        NSLog(@"Mail failed: the email message was not saved or queued, possibly due to an error.");
                        break;
                    default:
                        NSLog(@"Mail not sent.");
                        break;
                }
                // Remove the mail view
                [self dismissModalViewControllerAnimated:YES];
            }
        }
        else {
            UIAlertView *emailAlert = [[UIAlertView alloc] initWithTitle:@"Error!"
                                                                 message:@"Please make sure you have an email address configured in your Mail app."
                                                                delegate:nil
                                                       cancelButtonTitle:@"Ok"
                                                       otherButtonTitles:nil];
            [emailAlert show];
            [emailAlert release];
        }

        }

} 
```

我已在 .h 和 .m 中正确导入所有内容，但电子邮件不会关闭...我已尝试按照 Stack Overflow 上的建议来摆弄，`mailer.mailComposeDelegate = self;`但我仍然收到未声明的标识符错误。我该如何解决？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T05:41:26.233

```
- (void)mailComposeController:(MFMailComposeViewController*)controller didFinishWithResult:(MFMailComposeResult)result error:(NSError*)error
        { 
```

将此函数移出 tableview 委托方法。你应该学习一些基础知识。您不能在另一个方法中拥有一个方法。如果需要，可以通过以下方式调用该方法`[self callingFunctionName];`

在你的情况下，

```
if ([emailCell.textLabel.text isEqualToString:@"Contact Developer"]) {
    NSLog(@"Email button pressed...");
    [self sendEmail];
}

    -(void)sendEmail{
 if([MFMailComposeViewController canSendMail]) {
            MFMailComposeViewController *mailer = [[MFMailComposeViewController alloc] init];
            mailer.mailComposeDelegate = self;
            [mailer setSubject:@"A Message from MobileTuts+"];
            NSArray *toRecipients = [NSArray arrayWithObjects:@"fisrtMail@example.com", @"secondMail@example.com", nil];
            [mailer setToRecipients:toRecipients];
            NSString *emailBody = @"Have you seen the MobileTuts+ web site?";
            [mailer setMessageBody:emailBody isHTML:NO];
            [self presentModalViewController:mailer animated:YES];
            [mailer release];
}
} 
```

这将打开邮件编辑器。当您发送、取消或保存邮件时，委托功能

```
- (void)mailComposeController:(MFMailComposeViewController*)controller didFinishWithResult:(MFMailComposeResult)result error:(NSError*)error 
```

会自动调用。

# python - SPSS中的转置

> ID：13244985
> 
> 赞同：1
> 
> 时间：2012-11-06T05:34:29.953
> 
> 标签：python, scripting, spss

我在 SPSS 项目中有 35 列数据的 525 行/记录。我的目标是运行一个 q-mode PCA，它是一个在转置表上运行的 PCA。

是否有任何用于 SPSS 的 Python 脚本或其他自动化此过程的技巧？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T06:34:09.320

为了在数据中找到“自然”的案例组（而不是变量），聚类分析更为常见。但是，我将避免讨论这两种方法的理论（不）健全性。对于转置数据，请尝试运行

```
flip. 
```

在语法窗口中。

# matlab - 如何使用 K-Means matlab 计算图像中的对象

> ID：13244987
> 
> 赞同：1
> 
> 时间：2012-11-06T05:34:43.200
> 
> 标签：matlab, image-processing, computer-vision, k-means, image-segmentation

我想使用图像分割 K-MEANS 计算这张图片中有多少花生，有人知道该怎么做吗？

![花生酱](../Images/d25739188b73d941cc4562db698c7905.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-04-29T21:13:38.503

迟到的答案，但仍然。我会使用聚类来将花生与背景分开。但是颜色阈值或主要颜色分析应该足够并给出可比较的结果。除了我会将每个黑暗区域（阴影）视为背景以分离花生。

然后你得到一个二进制掩码，你可以应用一个最终侵蚀来估计花生的数量。

# java - 为一个对象替换多个变量？

> ID：13244989
> 
> 赞同：1
> 
> 时间：2012-11-06T05:34:58.753
> 
> 标签：java, oop, object

**我的工作是：**

> 将 Node 类修改为通用类，以便它可以处理文件系统中的文件夹和文件，如下所示。

**并且：**

> 首先，您需要修改 Node 类，以便将“大小”和“名称”都替换为一个对象。

现在，我做了第一部分，我们将类更改为使用泛型类型。我被困在第二个问题上。我不知道如何传递单个对象而不是 2 个变量，然后在其中进行大量计算。

***我如何在这里用多个变量替换单个对象？***我一直在尝试更改类型并四处移动，但是一旦删除这两个变量，我的代码就会一直失败。

**代码：**

```
class Node<T>
   {
   public String name;
   public int size;
   public Node<T> leftChild;
   public Node<T> rightChild;

   public void displayNode()
      {
      System.out.print('{');
      System.out.print(name);
      System.out.print(", ");
      System.out.print(size);
      System.out.print("} ");
      }
   }  // end class Node 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T05:40:49.483

我会像这样重新设计它：

```
class Node<T> {
    public T data;
    public Node<T> leftChild;
    public Node<T> rightChild;

    public void displayNode() {
        System.out.print('{');
        System.out.print(data.toString());
        System.out.print("} ");
   }
   . . .
} 
```

**编辑**重写方法的`find`一种方法是让它找到一个特定的`T`值：

```
public Node<T> find(Comparable<T> target) {
    Node<T> current = root;
    int comp = target.compareTo(current.data);
    while (comp != 0) {
        if (comp < 0)
            current = current.leftChild;
        else
            current = current.rightChild;
        if(current == null)
            return null;
    }
    return current;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T05:49:48.280

您需要创建一个`Custom Data Class`. 该类会将您所需的变量包装为属性。

例如，在您的情况下： -

```
public class MyData {
    private String name;  // Your data are enclosed in the data object MyData
    private int size;

    /** Constructors **/
    /** Getters and Setters **/
} 
```

现在，无论您在哪里使用这些变量，都可以使用此类的一个实例。并且您的通用类将根据@TedHopp 的[回答](https://stackoverflow.com/a/13245055/1679863)进行更改。

你的`Node`类将像这样被实例化： -

```
Node<MyData> node = new Node<MyData>(); 
```

因此，您的`T`now 变为`MyData`. 所以，如果你想访问`size`and `name`，你必须这样做： -

```
node.getMyData().getSize();
node.getMyData().getName(); 
```

# jakarta-ee - 在 jboss 中运行我自己的线程池

> ID：13244992
> 
> 赞同：0
> 
> 时间：2012-11-06T05:35:09.343
> 
> 标签：jakarta-ee, jboss5.x

我是 Java EE、EJB3 和 JBoss 的新手。我正在开发一个 EJB 应用程序，它每 2 分钟使用 ICMP 协议测试几个设备的可达性。

问题是，是否可以从`java.util.concurrent`包中实现 Threadpool Executor 以便我可以创建自己的可以在服务器（JBoss AS 5.1.0）环境中运行的线程池，还是有更好的选择？

有几篇与这个主题相关的帖子，但我根本无法掌握它们，可能是因为我是 Java EE 的新手。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T06:48:33.507

另一种方法是使用计时器，在容器启动时启动计划任务。容器启动时的启动任务在不同的 Java EE 容器之间有所不同。

bkail 在这里的回答显示了如何设置计时器：[关于 ejb3.0 计时器服务的问题](https://stackoverflow.com/questions/5856775/questions-on-ejb3-0-timer-service)

（那里接受的答案显示了如何在 ejb3.1 中执行此操作，这可能不是 ejb 3.0 的选项）

# windows-8 - 无法访问 Windows Push Notifications Live Services 网站？

> ID：13244995
> 
> 赞同：2
> 
> 时间：2012-11-06T05:35:40.533
> 
> 标签：windows-8, microsoft-metro, push-notification, live

我正在使用免费的 Live Services 网站处理 Windows 推送通知。但是从过去 10 天开始，我无法访问该网站，并且显示“该网站是临时的，不再使用”。我想知道免费用户的网站是否正常工作？或面临同样问题的任何人，是否有任何免费网站，如适用于 Windows 8 推送通知的 Live 服务？请帮助我。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T07:26:12.923

不，该站点不再运行。为了使用推送通知，您现在必须拥有 Windows 应用商店开发人员帐户。然后，您将能够注册您的应用程序并获得必要的 SID 和客户端密码来实现推送通知。

# javascript - 谷歌网站翻译 - 在显示页面之前等待翻译完成

> ID：13244996
> 
> 赞同：0
> 
> 时间：2012-11-06T05:35:29.510
> 
> 标签：javascript, html, translation, google-translate

我正在尝试通过使用 Google 网站翻译器以最小的努力将本地化添加到我的网站。不过，我遇到了一个非常烦人的问题：每次我尝试加载（翻译的）页面时，它都会在 Google 的 javascript 执行其操作并切换到新语言之前以英语短暂显示。

我已经尝试在我的整个 HTML 正文上设置“显示：无”，直到 Google 的代码完成运行，但是一旦翻译代码完成而不修改 javascript，我看不到任何方便放置 javascript 以将显示切换回正常的地方Google 从 Google 加载的文件。

有更好的解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T16:12:49.480

尝试站点翻译器 - [http://www.deskshare.com/translation-software.aspx](http://www.deskshare.com/translation-software.aspx)。您页面的全部内容直接在您的网站上，因此您不必担心在线服务速度慢或先显示英文文本。

# css - 页面使用相同的 CSS 略微向右移动

> ID：13244999
> 
> 赞同：0
> 
> 时间：2012-11-06T05:36:01.203
> 
> 标签：css, web-applications

我最近上线了一个网站，一切顺利，网站看起来不错，一切正常，但是有一个非常微妙的问题，我找不到根源。

要查看我在说什么，请转到已编辑的 。单击其中一个显示“X 评论”的部分，然后查看页面左侧。它会动，只是一点点。

现在，也许这根本不重要，但一直困扰着我，我找不到原因。有人有想法么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T07:21:40.003

这种行为经常发生。问题是滚动条只出现几次，并且将所有内容都居中或右对齐。为了防止这种情况，最好的解决方案是简单地确保滚动条总是出现：

```
body{
overflow-y:scroll;
} 
```