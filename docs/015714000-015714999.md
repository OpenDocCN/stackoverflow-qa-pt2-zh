# StackOverflow 问答 15714000-15714999

# regex - 如何按部分grep？

> ID：15714002
> 
> 赞同：4
> 
> 时间：2013-03-30T01:44:32.877
> 
> 标签：regex, perl, parsing, sed, grep

我有一个结构如下的文件：

```
BOF

-------Title1-------
stuff here
some stuff

-------Title2-------
extra things
extra things
extra things

-------Title3-------
and some stuff
   here

...

-------Title4-------
stuff

EOF 
```

现在我想做这样的事情：

```
grep-by-section KEYWORD DELIMITER my-file 
```

以便

```
grep-by-section "some" "^---" my-file 
```

输出

```
-------Title1-------
stuff here
some stuff

-------Title3-------
and some stuff
   here 
```

我想找到某个关键字，并且对于每个发现我想输出已知分隔符之间的整个块。我怎样才能做到这一点？`sed`我在这里失败了。

此处的分隔符是“------”，但也可以是 [0-9]{8} 格式的数字等其他内容。

我无法解决的类似问题是不输出块的内容，而只输出块的标题。

似乎比用它更容易`perl`解决`sed`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-30T02:56:04.733

```
#!/usr/bin/perl
my ($search, $del) = splice(@ARGV, 0, 2);
local $/;
while (<>) {
   for (/($del(?:(?!$del).)*)/smg) {
      print if /$search/sm;
   }
} 
```

笔记：

*   `local $/`导致以下 readline 一次读取一个文件，而不是一次读取一行。
*   `(?:(?!STRING).)*`就是`STRING`这样。`[^CHAR]*`_`CHAR`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-08-12T19:19:43.403

[agrep](http://www.tgries.de/agrep/)可以通过以下方式做到这一点：`agrep -d DELIMITER KEYWORD FILE`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-30T10:48:29.070

如果这些记录之间有真正的空行，则不需要使用这些分隔符，这就足够了：

```
awk '/KEYWORD/' RS= ORS='\n\n' file 
```

否则你也可以试试这个 awk：

```
awk '
  $0~key{
    f=1
  }
  $0~del{
    if(f)print s
    f=0
    s=$0
    next
  }
  {
    s=s RS $0
  }
  END{
    if(f)print s
  }
' key="KEYWORD" del="DELIMITER" file 
```

在一行中：

```
awk '$0~key{f=1} $0~del{ if(f)print s ; f=0; s=$0; next } {s=s RS $0} END{ if(f)print s }' key="KEYWORD" del="DELIMITER" file 
```

# vb.net - 将一列的值转换为一行

> ID：15714003
> 
> 赞同：0
> 
> 时间：2013-03-30T01:44:41.130
> 
> 标签：vb.net, linq

我是 LINQ 的新手。我尝试了几种方法，但我无法得到我想要的结果。请帮助解决这个问题。VB.NET 中的 LINQ to SQL。

我正在使用 Ling to SQL 类来运行查询以获得预期的结果。在查询结果之后，我将使用它来填充 Datagridview 。我找不到以下问题的解决方案。有没有人可以帮忙？谢谢。

桌子：

```
bookID  authorID  authorname
111     101       Mark
222     102       Tim
333     103       John
444     104       Rebecca
111     102       Tim
111     103       John
222     104       Rebecca 
```

结果应该是：

```
bookID   author1     author2         author3....

111      Mark            Tim                  John

222      TIm              Rebecca          N/A or Empty

333      John            N/A or Empty    N/A or Empty

444      Rebecca      N/A or Empty    N/A or Empty 
```

我必须只使用**LINQ**。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T02:00:49.150

您可以使用该[`GroupBy`](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.groupby.aspx)方法执行此操作

```
Dim results = db.Books.GroupBy(Function(b) b.bookID, Function(b) b.authorname) 
```

或者，如果您更喜欢 linq 查询语法

```
Dim results = _
    From b In db.Books _
    Group b.authorname By bookID = b.bookID Into authorname = Group 
```

您可以将其用作

```
For Each group In results
    Console.Write(group.Key)
    Console.Write(":")
    For Each name As String In group 
        Console.Write("  " & name)
    Next 
    Console.WriteLine()
Next 
```

输出

```
111: Mark Tim John
222: Tim Rebecca
333: John
444: Rebecca 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T14:58:05.633

```
Dim results = From b In db.Books Group b.authorname _ 
                By bookID = b.bookID Into nameg = Group select bookid,nameg

For each gr in results 
    Console.Write(gr.bookid)
    Console.Write(":")
    For Each name As String In gr.nameg 
    Console.Write("  " & name)
Next 
Console.WriteLine()
Next 
```

# javascript - 我可以为同一个 DOM 事件在同一个元素上调用 addEventListener 两次吗？

> ID：15714004
> 
> 赞同：-4
> 
> 时间：2013-03-30T01:44:42.087
> 
> 标签：javascript, dom

我可以为同一个 DOM 事件在同一个元素上调用 addEventListener 两次吗？我将此代码用于多个 JavaScript 文件，似乎它们会覆盖，这意味着其中一个中的代码会触发，而另一个中的代码不会触发。

```
(function () {
  "use strict";
  document.addEventListener('load', function (event) {

    // Code

  }, false);
}()); 
```

**编辑**@plalx 从 jQuery 源代码，看起来他们正在使用 window.addEventListener('load', ...);

```
if (document.addEventListener) {
    // Use the handy event callback
    document.addEventListener("DOMContentLoaded", DOMContentLoaded, false);

    // A fallback to window.onload, that will always work
    window.addEventListener("load", jQuery.ready, false);

    // If IE event model is used
} else if (document.attachEvent) { 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T04:42:14.757

我对此不是 100% 确定，但我认为您不应该使用`addEventListener`. 我在 Chrome 中进行了测试，但它不起作用，所以它一定不是标准的。如果你想在文档准备好时执行一些代码，你有很多选择，但最简单的跨浏览器解决方案是使用`jQuery`.

但是，您也可以在大多数现代浏览器中这样做：

```
document.addEventListener('DOMContentLoaded', function () {
    alert('load!');
}); 
```

# php - 通过 PDO 语句添加值数组

> ID：15714005
> 
> 赞同：0
> 
> 时间：2013-03-30T01:44:45.740
> 
> 标签：php, mysql, pdo

我一直在尝试了解 PDO，但我对插入语句有疑问。我正在尝试添加一个值数组（即，以下示例）

```
data = array (
    fname -> Jay
    lname -> Doe
    phone -> 8137587733
    email -> me@me.com
); 
```

字段和值被分解为字符串，如下所示：

```
$fields = '`' . implode('`, `', array_keys($data)) . '`';
$values = '\'' . implode('\', \'', $data) . '\''; 
```

...但我希望能够使用准备好的语句来防止可能的 SQL 注入。

并非所有字段都是必需的。例如，电话（来自 $_POST['phone']）可能为空，并且数据库字段接受该字段的 NULL 输入。

可以老办法：

```
mysql_query("INSERT INTO 'users' ($fields) VALUES ($values)"); 
```

以某种方式调整以与 PDO 一起使用，或者我需要执行以下操作：

```
$sql = "INSERT INTO users VALUES (:fname, :lname, :phone:, :email)";
$st = $conn->prepare($sql);
$st->bindValue( ":fname", ???, PDO::PARAM_STR );
$st->bindValue( ":lname", ???, PDO::PARAM_STR );
$st->bindValue( ":phone", ???, PDO::PARAM_STR );
$st->bindValue( ":email", ???, PDO::PARAM_STR );
$st->execute(); 
```

在这里我不确定如何输入我的值（因此是???）。

# linux - 使用 GUI 开发程序

> ID：15714007
> 
> 赞同：0
> 
> 时间：2013-03-30T01:45:26.460
> 
> 标签：linux, windows, macos, user-interface

我认为许多开始开发的学生经常会问自己如何使用漂亮友好的 GUI 构建一个漂亮的程序。好吧，我问自己，然后我在网上搜索。我看到有几个用于创建 GUI 的工具包

*   gtk 2.0
*   gtk 3.0
*   Qt
*   WxWidgets
*   Tk/Tcl

如何在我的程序中选择使用哪个？哪个更轻？在不同的编程语言中使用它们有区别吗？

还有更多用于更多专家使用，对于游戏我可以使用这个还是我必须使用其他程序作为搅拌器或统一？

PS：我也想为 Unix（Linux、Mac）和 Windows 开发我的程序。

PS2：我特别关注 C、C++，然后也关注 Python 等等，但一般都是写的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-30T06:40:04.387

首先，使用系统上安装的工具包版本。最近的 Linux 发行版应该有*Qt4.8* 或*Qt5.0*和*GTK3.6*或更高版本（GTK3.8 最近已发布）。不要使用 GTK2。

^(我在这里专注于用 C++ 编写 GUI（特别是在 Linux 上）)

AFAIK，WxWidgets 是许多其他工具包（包括 Windows、Qt、Gtk、... Tcl/Tk 与 Tcl 脚本语言相关联。

还有[FOX 工具包](http://www.fox-toolkit.org/)和[FLTK](http://www.fltk.org/)（都是 C++ GUI 工具包），但它们没有被广泛使用。

Qt 与 KDE 相关并被 KDE 使用。Gtk 与 Gnome 相关并被 Gnome 使用。但是您可以在 Gnome 上运行使用 Qt 的程序，或者在 KDE 上使用 GTK 运行程序。

GTK 是用 C 语言编写的，使用它自己的面向对象机制。如果您想在惯用的 C++ 中为 GTK 编写代码，请考虑使用[GTKMM](http://www.gtkmm.org/)（GTK 之上的 C++ 包装器）。

Qt 和 GTK 都是非常强大的工具包。然而，Qt 为您提供了一个非常强大的[图形视图](http://qt-project.org/doc/qt-4.8/graphicsview.html)框架（Gtk 还没有）。该框架使您能够将嵌套的图形项目放在一起，每个项目都有自己的坐标。相比之下，GTK 提供了非常强大的[Text View](https://developer.gnome.org/gtk3/3.4/TextWidgetObjects.html)机制，您可以在其中混合小部件和格式化文本。恕我直言，GTK 文本视图略好于[QTextEdit](http://qt-project.org/doc/qt-4.8/qtextedit.html)。

对于便携式游戏，您还可以考虑[SDL](http://www.libsdl.org/)。对于 3D 场景，您可能需要使用由 GTK 和 Qt 包装的低级[OpenGL 。](http://en.wikipedia.org/wiki/OpenGL)

如今，您可能还需要一个 Web 界面。[Wt](http://www.webtoolkit.eu/wt)可能很有用（它具有类似于 Qt 的编程风格）。FastCGI 协议可能是相关的。有几个库可以在您的程序中嵌入 HTTP 服务器，例如[libonion](http://www.coralbits.com/libonion/)或[libmicrohttpd](http://www.gnu.org/software/libmicrohttpd/)

在 Linux 和 Unix 系统上（但不是 MacOSX 有[Quartz](http://en.wikipedia.org/wiki/Quartz_%28graphics_layer%29)）你应该理解[X11](http://en.wikipedia.org/wiki/X11)背后的概念，即使它可能会被[Wayland](http://en.wikipedia.org/wiki/Wayland_%28display_server_protocol%29)取代。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T02:03:08.810

也许最温和的方法是使用 Python 和你最喜欢的桌面环境的原生 GUI。Python 易于编程，非常强大和灵活，并且可以很好地处理 GUI（我的 Fedora 管理工具中的大多数 GUI 都是用 Python 编写的）。对于 GUI，性能通常非常非常次要。Python 在 Windows 上也可以正常运行。

# perl - 如何仅按照数字进行数学运算？

> ID：15714012
> 
> 赞同：1
> 
> 时间：2013-03-30T01:46:24.043
> 
> 标签：perl, substitution

我有一个文件，其中只有一些行以数字开头。我想在这些行中执行简单的数学运算。

例如，假设这些行采用以下格式：

```
010 - 0050 - 20500 
```

我只想将 100 添加到第二个数字：

```
010 - 0150 - 20500 
```

是`perl`最好的工具吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-30T02:48:35.903

```
# 5.10+
perl -pe's/^[0-9]+ - \K([0-9]+)/ sprintf "%04d", $1 + 100 /e'

# Backwards compatible
perl -pe's/^([0-9]+ - )([0-9]+)/ $1 . sprintf "%04d", $2 + 100 /e' 
```

用法：

```
perl -pe'...' file      # From file
perl -pe'...' <file     # From STDIN
perl -i~ -pe'...' file  # Modifying in place with backup
perl -i -pe'...' file   # Modifying in place without backup 
```

如果您更喜欢独立程序，则上述内容等同于：

```
while (<>) {
   s/^[0-9]+ - \K([0-9]+)/ sprintf "%04d", $1 + 100 /e;
   print;
} 
```

除了您要更改的行之外，它不会弄乱任何行，并且不会像其他解决方案那样弄乱行的任何其他部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T01:54:48.433

在 Perl 中，这并不太难。

```
open my $fh, "<", "filename" or die $!;
while (<$fh>) {
    if ($_ =~ /(\d{3}) - (\d{4}) - (\d{5})/) {
        printf "%.3d - %.4d - %.5d\n", $1, $2 + 100, $3;
    } else {
        print $_;
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-30T02:18:57.233

在 Python 中：

```
fp = open("yourfile.txt","r")
for line in fp.readlines():
    for i in range(0,9):
        if line.startswith(str(i)):
            elems = line.split(" - ")
            elems[1] = "0"+str(int(elems[1]+100))
            whatyouneed = " - ".join(elems) 
```

Whatyouneed 包含所需的结果。请原谅任何错误，因为我无法测试该代码。希望这有帮助！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-30T01:54:58.290

Perl 是一个很好的工具，是的。但是，如果它是*您*案例的最佳工具，则取决于许多其他考虑：

*   这是一次性的工作，还是您必须定期做相同（或类似）的事情？
*   你已经知道 Perl 了吗？是否有其他类似的语言（如 Python 或 awk），您已经习惯了？
*   文件有多大？（如果只有 5 行，请手动完成！）

学习一门新语言永远不会完全失去，即使您不希望经常使用它。

# ios - 如何以编程方式获取 IMEI 号码

> ID：15714014
> 
> 赞同：0
> 
> 时间：2013-03-30T01:46:33.900
> 
> 标签：ios, objective-c, imei

我尝试获取 iDevice 的 IMEI 号码，我已经找到了方法，但它不起作用，我正在使用这种方法[https://github.com/cheetahray/IMEI](https://github.com/cheetahray/IMEI)，UIDevice-IOKitExtensions 的东西，我得到了错误。有人可以告诉我如何使用它吗？

我从[如何在 iPhone 上获取 IMEI？](https://stackoverflow.com/questions/823181/how-to-get-imei-on-iphone)

# javascript - 没有链接的灯箱库

> ID：15714021
> 
> 赞同：0
> 
> 时间：2013-03-30T01:47:58.297
> 
> 标签：javascript, lightbox

是否有任何灯箱库允许我插入任何内容（例如 div）而无需单击链接？

我看到很多这样的[图书馆](http://lokeshdhakar.com/projects/lightbox2/)。用户需要单击图像才能看到灯箱。我想要的是一个计时器，几秒钟后，它会调用灯箱来显示。然后，用户可以根据需要关闭它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T02:42:39.437

您可以使用 jqueryui 对话框，然后从您想要的代码中调用它：

```
function openLightBox(title,content){
    //append a div automatic
    if ('#divx').length <= 0) {
            $("body").append('<div id="divx" style="display:none; overflow-x:hidden; overflow-y:auto;" title="'+title+'"></div>');
        }
    //setup dialog
    $('#divx').dialog({
            zIndex: 300,
            width: 500,
            height: 400,
            resizable: false,       
            modal: true,       
            draggable: true,    
            buttons:{
                "close":function(){
                   $(this).dialog('close');
            }
           } ,
            close: function () {
                $(this).empty();
                $(this).dialog("destroy");
            }
        });
    //call it 
        $('#divx').dialog('open');
        $('#divx').html(content);
}

// you want to call it after page load 5 seconds?

$(function(){
setTimeout(function(){
     openLightBox('hello','<h1>my name is fox!</h1>');
     },5000);
}); 
```

# regex - 如何仅打印 [] 内的所有内容？

> ID：15714023
> 
> 赞同：0
> 
> 时间：2013-03-30T01:48:07.487
> 
> 标签：regex, perl, parsing, sed, awk

在一些文本文件中有很多`[with text inside]`. 我只想打印括号内的任何内容。括号的数量是文件是未知的，每个要解析的文件都不同。

我试图用 解析它`sed`，但做不到。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-30T03:22:48.480

使用 GNU grep

```
grep -oP '(?<=\[)[^]]*' 
```

对左括号使用正向后视，匹配所有非右括号字符。例子：

```
$ echo 'foo [bar] baz [hello world]' | grep -oP '(?<=\[)[^]]*'
bar
hello world 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T02:45:37.763

```
perl -nE'say for /\[( [^\[\]]* )\]/xg;' 
```

或者如果内容可以跨行。

```
perl -0777nE'say for /\[( [^\[\]]* )\]/xg;' 
```

您可以将文件名作为参数传递，也可以使用 STDIN。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-30T04:51:43.243

或者，您可以尝试：

```
awk 'NR>1{print $1}' RS=\[ FS=\] file 
```

例如

```
$ printf 'First part of foo [bar] not present, ["hello" can be\non a different\nline from "world" ] inside  brackets\n' |
awk 'NR>1{print $1}' RS=\[ FS=\]
bar
"hello" can be
on a different
line from "world"
$ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-30T08:36:08.877

这可能对您有用（GNU sed）：

```
sed ':a;/\[/!d;/\]/!{$!N;s/\n/ /;ba};s/[^[]*\[\([^]]*\)\]/\1\n/;P;D' file 
```

`[...]`注意它用空格替换 a 中的换行符。

# php - 坐标检测记录

> ID：15714024
> 
> 赞同：-4
> 
> 时间：2013-03-30T01:48:20.723
> 
> 标签：php, javascript, jquery, mysql

我正在尝试为我的 php 游戏进行宏检测，但遇到了一点问题。

这就是我所拥有的。

```
<script>

$(document).ready(function(){

    $('.button').click(function(e){
        if(e.pageX == 0 || e.pageY ==0){
            <?php
    mysql_query("INSERT INTO clickmap (id) VALUES ('".$_SESSION['username']."')");  

    mysql_query("UPDATE clickmap SET clicks=clicks+1 WHERE id = '".$_SESSION['username']."'")
     or die(mysql_error());  
?>
        }
    }); 
}); 

</script> 
```

我一开始以为它可以工作，然后我注意到它会记录用户并在每次刷新页面时添加他们的点击，它应该只是记录他们并在他们达到 0 坐标时添加到点击中，有谁知道问题出在哪里是，以及一个可能的解决方案？

非常感谢您的帮助:)

更新代码：

```
<script>

$(document).ready(function(){

    $('.button').click(function(e){
        if(e.pageX == 0 || e.pageY ==0){

$.ajax({
    url: 'recorder.php',
});

        }
    }); 
}); 

</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T01:55:44.263

好吧，首先，这甚至不像你想象的那样工作。

无论您的 javascript 发生了什么，您的页面都会在服务器上触发这两个 mysql 查询，而那是在 javascript 甚至接近用户之前。

您需要做的是熟悉围绕[jQuery Ajax](http://api.jquery.com/jQuery.ajax/)函数的文档。您将需要在具有指向包含所述查询的页面的那些 mysql 查询的地方放置一个 ajax 调用。

例子

```
$.ajax({
    url: 'myqueries.php',
}); 
```

# ios - Recreating small UIViews overhead in iOS

> ID：15714027
> 
> 赞同：0
> 
> 时间：2013-03-30T01:48:43.323
> 
> 标签：ios, memory-management

I have created a gridView that is showing all items in an array productsArray. This array hold the objects of a custom class type ,Products. The below shown function is creating an Array of views using the information from a Products object.Now I want to filter the Products based on the parent Manufacturer.

```
-(NSArray*)arrayOfObjectToBeAddedToGriView{
    NSMutableArray* productsScrolLViewItemsArray = [[NSMutableArray alloc] init];
    for (Products* product in productsArray){
            ProductScrollViewItem* productScrollViewItem = [[ProductScrollViewItem alloc] initWithFrame:CGRectMake(0,0,0,0) withProduct:product];
            [productScrollViewItem addTarget:self action:@selector(productInGridViewTapped:) forControlEvents:UIControlEventTouchUpInside];
            [productsScrolLViewItemsArray addObject:productScrollViewItem];
    }
    return (NSArray*)productsScrolLViewItemsArray;
} 
```

Filtering based on Manufacturer

```
-(void) filterBasedOnManufacturer:(Manufacturer*)selectedManufacturer{
     [productsArray removeAllObjects];
     [productsArray addObjectsFromArray:[selectedManufacturer.productsForManufacturer allObjects]];
     // relod the gridView with filtered products
    [productCatalogueGridView reloadItems:[self arrayOfObjectToBeAddedToGriView]];
} 
```

productScrollViewItem is a small view of size 100,100 with an ImageView and two labels. My concern here is that I am re-initializing all the productScrollViewItem every time for the filtered Products Objects. I am wondering if it would be better to filter out both the ProductsArray and the productScrollViewItemArray or it does not matter since the views I am reinitializing are very small views. Thanks.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T09:08:30.397

If you are targeting iOS>=6 you can use UICollectionView, they do exactly what you want, and they reuse the cell, to avoid the overhead of recreating vies. They are pretty close to UITableViews. The other solution is find some shared properties or build your own recycling vies mechanism.

# iphone - Using Ringtones as Custom Push notification sounds for iOS

> ID：15714028
> 
> 赞同：3
> 
> 时间：2013-03-30T01:49:07.873
> 
> 标签：iphone, ios, push-notification, apple-push-notifications

Facebook and Twitter enable users to use ringtones as push notification sounds (for [things like](https://apple.stackexchange.com/questions/27704/how-can-i-change-notification-sounds-on-ios) *Tweet*) on iPhones. Which are not bundled on the app, as the [docs](http://developer.apple.com/library/mac/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/IPhoneOSClientImp/IPhoneOSClientImp.html#//apple_ref/doc/uid/TP40008194-CH103-SW6) for custom notification sound suggests.

Is this a special privilege for Twitter and Facebook apps, or is there a way to get such settings as well?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T03:46:29.003

You can't use custom ringtones as your app push notification sounds, this is a special feature for Twitter & Facebook.

You can only custom alert sounds by bundled audio file, and special sound name in payload.

# git - How to recover a merge commit after a rebase on the same commit?

> ID：15714029
> 
> 赞同：3
> 
> 时间：2013-03-30T01:49:12.133
> 
> 标签：git, version-control, branch, commit, rebase

Suppose this:

```
mkdir test; cd test
echo "1" > file1; git init; git add .; git commit -m "initial - file 1"   # 1st commit on master
echo "2" > file2; git add .; git commit -m "file 2"                       # 2nd commit on master
git checkout -b newbranch                                                 # creates newbranch
echo "1" >> file1; git add .; git commit -m "changed 1"                   # 1st commit on newbranch
git checkout master                                                       # goes to master
echo "2" >> file2; git add .; git commit -m "changed 2"                   # 3rd commit on master
git merge newbranch -m "merge commit"                                     # merge newbranch on master
echo "3" > file3; git add .; git commit --amend -m "merge commit"         # amend merge commit and adds file3
git rebase HEAD~2                                                         # don't change anything, just leave
ls                                                                        # there isn't file3 anymore! 
```

Is there a way to recover the merge commit so the changes that were amended on it aren't lost?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T01:55:24.163

The changes you made are still in your *reflog*.

After the accidental rebase (I'm assuming it's accidental, since you're talking about "lost" commits), run `git reflog`.

Find the entry just below the last "rebase:" line in the topmost set. The commit hash to the left of it is the amended merge commit before you started rebasing.

# single-page-application - Durandal routing not working?

> ID：15714031
> 
> 赞同：0
> 
> 时间：2013-03-30T01:49:31.993
> 
> 标签：single-page-application, durandal

I've got several pages up and working in my project that I can navigate to directly - one for home, another for "folder details". I list Folders on the homepage and I'm now trying to enable navigation to particular folders from the list.

If I navigate to /set I get a default set details page, that works.

If I navigate to /set/1 I get "no route found" from my main.js:

```
router.handleInvalidRoute = function (route, params) {
                logger.logError('No route found', route, 'main', true);
            }; 
```

What is needed to form the link between the id in the URL and the viewModel?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T01:56:33.607

I was missing this line in my main.js:

```
router.mapNav("folder/:id"); 
```

# javascript - Google Chrome 扩展程序：加载源

> ID：15714033
> 
> 赞同：0
> 
> 时间：2013-03-30T01:49:44.833
> 
> 标签：javascript, html, google-chrome, google-chrome-extension

我需要在加载时收集网页的源代码并将其发送到文本文件。

首选规格：

*   网页加载时
*   保存整个 HTML 源代码
*   覆盖要保存到的文件中的任何先前文本（不要附加）。

如果这是不可能的，那么我将需要加载页面的 URL 而不是源。

是否可以通过 Chrome 扩展来实现这一点（如果可能的话，还可以移植到其他浏览器，例如 IE 和 Firefox）。

# ios - 在 iOS 中，如何在提交时自动更正最后一个单词？

> ID：15714034
> 
> 赞同：6
> 
> 时间：2013-03-30T01:49:48.280
> 
> 标签：ios, autocomplete, chat, autocorrect

在我的 iOS 应用程序的聊天屏幕上，用户输入空格后，单词会自动更正。但是当用户点击发送时，最后一个词不会自动更正。当用户点击发送时，如何获取建议的单词来替换拼写错误的单词？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-02-02T03:54:27.297

最后一个解决方案迫使您隐藏键盘。我找到了一个解决方案，通过在提交之前在末尾添加一个空格来自动更正最后一个单词而无需退出键盘：

```
// This will force the autocompletion to take effect
text = [NSString stringWithFormat:@"%@ ", text];

// Remove the last character afterwards
text = [text substringToIndex:[text length]-1]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-30T01:56:03.327

如果您`resignFirstResponder`在按下发送后调用您的文本字段作为第一个操作，它将在发送前接受更正。

```
- (IBAction)sendButtonPressed:(id)sender
{
    [textField resignFirstResponder];
    // Send the textfield's text
} 
```

# java - 试图了解如何覆盖方法/变量

> ID：15714038
> 
> 赞同：0
> 
> 时间：2013-03-30T01:50:02.893
> 
> 标签：java

因此，在深入学习课程之前，我试图理解压倒一切。我看过 TheNewBoston (bucky) 解释压倒一切，但我不确定我是否做得对。有人会检查我并让我走上正确的道路吗？

我不记得 bucky 必须在他的超类中保护他的任何实例变量。但是当我构建我的子类时，eclipse 让我将我的实例变量转换为受保护的。

超类联系人：

```
public class Contacts
{
    protected String fname;
    protected String lname;
    protected String email;
    protected String phone;

    public Contacts(String fname, String lname, String email, String phone)
    {
        this.fname=fname;
        this.lname=lname;
        this.email=email;
        this.phone=phone;

    }

    public String getfname()
    {
        return fname;
    }

    public void setfname(String first)
    {
        this.fname=first;       
    }

    public String getlname()
    {
        return lname;
    }

    public void setlname(String last)
    {
        this.lname=last;
    }

    public String getemail()
    {
        return email;
    }

    public void setemail(String e)
    {
        this.email=e;
    }

    public String getphone()
    {
        return phone;
    }

    public void setphone(String num)
    {
        this.phone=num;
    }

    public String getFullName()
    {
        String full=fname+" "+lname;
        return full;
    } 
```

子类朋友：

```
public class Friend extends Contacts
{
    private String dob;

    public Friend(String fname, String lname, String email, String phone)
    {
        super(fname, lname, email, phone);
    }

    public String getDob()
    {
        return dob;
    }

    public void setDob(String dob)
    {
        this.dob = dob;
    }

    /* (non-Javadoc)
     * @see java.lang.Object#toString()
     */
    @Override
    public String toString()
    {
        return fname+", "+lname+", "+email+", "+phone+", "+dob;
    }

} 
```

子类 BusinessAssociate：

```
public class BusinessAssociate extends Contacts
{
    private String title;
    private String position;
    private String company;
    private String full;

    public BusinessAssociate(String fname, String lname, String email,
            String phone)
    {
        super(fname, lname, email, phone);

    }

    public String getTitle()
    {
        return title;
    }

    public void setTitle(String title)
    {
        this.title=title;
    }

    public String getCompany()
    {
        return company;
    }

    public void setCompany(String company)
    {
        this.company=company;
    }

    public String getPosition()
    {
        return position;
    }

    public void setPosition(String position)
    {
        this.position=position;
    }

    /* (non-Javadoc)
     * @see Contacts#getFullName()
     */
    @Override
    public String getFullName()
    {
        full=title+" "+fname+" "+lname;
        return full;
    }

    /* (non-Javadoc)
     * @see java.lang.Object#toString()
     */
    @Override
    public String toString()
    {
        return full+", "+email+", "+phone+", "+company+", "+position;
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T02:53:56.320

您的代码中的覆盖对我来说看起来是正确的。

但请注意，您只能覆盖实例方法。构造函数、字段和静态方法*不能*被覆盖。

有评论问：

> “字段不能被覆盖”是什么意思？这对我来说似乎是一种替代：
> 
> ```
>  class A { protected int a = 1; } 
>     class B extends A { protected int a = 2; }`. 
> ```
> 
> 你能澄清一下吗？

这不是一个覆盖。您在这里拥有的是子类中的一个字段，`B`它*隐藏*了超类中的字段`A`。如果您创建它的一个实例，`B`它将有两个不同的`a`字段，具有不同的值。

参考：[https ://stackoverflow.com/a/11971061/139985](https://stackoverflow.com/a/11971061/139985)

* * *

> ...但是为什么eclipse让我把构造函数放在每个子类中。youtube 视频上不是这样的。

因为 Eclipse 实现了 JLS，而 JLS 需要它。YouTube 视频中的示例可能有所不同。

您的示例的设计方式，基类`Contacts`具有子类共有/使用的字段，并且它（自然）在其构造函数中初始化这些字段。您没有（也不应该）有一个无参数的构造函数，`Contacts`因为这将允许人们创建`Constants`具有`null`名称、电子邮件和电话字段的无用实例。

然而，没有无参数构造函数的事实`Contacts`意味着任何子类都需要显式的构造函数声明。Java 的工作方式是，如果您不声明任何构造函数，则一个类将获得一个默认的无参数构造函数。但是只有当超类有一个 no0args 构造函数时，这个默认构造函数才可能。在这种情况下，它不会。

So Eclipse was correct in insisting that your subclasses declared constructors. The Java compiler would also have been happy with the alternative of adding a no-args constructor to `Contacts`. But that would be the wrong solution, because it would result in `BusinessAssociate` and `Friend` instances being created with `null` fields.

* * *

> But when I was building my subclasses, eclipse made me convert my instance variables to protected.

It is not entirely clear why that happened ('cos we don't know what you had before!!), but if your subclasses refer directly to fields of the superclass, then the superclass fields must have the right "access" modifiers to allow this. (For instance, a subclass cannot ever refer directly to a superclasses `private` fields. The Java Language Specification forbids this.)

# mysql - 在 MySQL 中使用连接计算 SUM

> ID：15714040
> 
> 赞同：3
> 
> 时间：2013-03-30T01:50:21.230
> 
> 标签：mysql, sql, join

## 背景

我的数据库我有一个充满项目的表。每个项目都可以有一系列付款。
一旦用户进行了支付，用户就可以通过兑换来使用这笔钱。钱可以部分赎回。

## 问题

对于每次赎回，我想计算剩余的钱。这等于做`SUM(paid_amount) - SUM(previous_redemptions) - this_redemption`。

问题是由于 SQL 连接的性质（一行是连接的组合），如果有多次先前的兑换，每次付款将被计算多次。

我实际上不确定我想要什么可以仅使用 MySQL 来计算（并且仍然相当快）。

如果我能以某种方式使每个 SQL 组只包含一行，并且每列有多个值，那么问题就会得到解决，我认为 SQL 不支持这一点。

## 桌子

```
mysql> DESCRIBE items;
+-------+---------+------+-----+---------+-------+
| Field | Type    | Null | Key | Default | Extra |
+-------+---------+------+-----+---------+-------+
| id    | int(11) | NO   | PRI | NULL    |       |
+-------+---------+------+-----+---------+-------+

mysql> DESCRIBE payments;
+-------------+---------+------+-----+---------+-------+
| Field       | Type    | Null | Key | Default | Extra |
+-------------+---------+------+-----+---------+-------+
| id          | int(11) | NO   | PRI | NULL    |       |
| item_id     | int(11) | NO   |     | NULL    |       |
| paid_amount | int(11) | NO   |     | NULL    |       |
+-------------+---------+------+-----+---------+-------+

mysql> DESCRIBE redemptions;
+-------------+----------+------+-----+---------+-------+
| Field       | Type     | Null | Key | Default | Extra |
+-------------+----------+------+-----+---------+-------+
| id          | int(11)  | NO   | PRI | NULL    |       |
| item_id     | int(11)  | NO   |     | NULL    |       |
| amount      | int(11)  | YES  |     | NULL    |       |
| create_time | datetime | YES  |     | NULL    |       |
+-------------+----------+------+-----+---------+-------+ 
```

## 数据

```
mysql> SELECT * FROM items;
+----+
| id |
+----+
|  1 |
+----+

mysql> SELECT * FROM payments;
+----+---------+-------------+
| id | item_id | paid_amount |
+----+---------+-------------+
|  1 |       1 |          50 |
|  2 |       1 |          50 |
+----+---------+-------------+

mysql> SELECT * FROM redemptions;
+----+---------+--------+---------------------+
| id | item_id | amount | create_time         |
+----+---------+--------+---------------------+
|  1 |       1 |     10 | 2013-01-01 00:00:00 |
|  2 |       1 |     10 | 2013-01-01 00:01:00 |
|  3 |       1 |     10 | 2013-01-01 00:02:00 |
+----+---------+--------+---------------------+ 
```

## 查询

```
mysql> SELECT
    ->     redemptions.id AS redemption_id,
    ->     SUM(payments.paid_amount) - COALESCE(SUM(previous_redemptions.amount), 0) - redemptions.amount AS remaining_balance
    -> FROM redemptions
    -> JOIN payments ON payments.item_id = redemptions.item_id
    -> LEFT JOIN redemptions AS previous_redemptions
    -> ON
    ->     previous_redemptions.item_id = redemptions.item_id AND
    ->     previous_redemptions.create_time < redemptions.create_time
    -> GROUP BY redemptions.id;
+---------------+-------------------+
| redemption_id | remaining_balance |
+---------------+-------------------+
|             1 |                90 |
|             2 |                70 |
|             3 |               150 |
+---------------+-------------------+ 
```

如您所见，这并没有真正按照我的意愿行事。我希望`remaining_balance`for redemption 3 是 70。

## 桌子的大小

*   项目 - 几百万行
*   付款 - 几百万行
*   赎回 - 数百万行

这意味着创建子查询首先计算每次赎回的所有已使用金额（先前赎回的总和）是不可能的。

## 适合那些想在家学习的人的 MySQL 命令

```
CREATE TABLE items (
    id int(11) NOT NULL,
    PRIMARY KEY (id)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

CREATE TABLE payments (
    id int(11) NOT NULL,
    item_id int(11) NOT NULL,
    paid_amount int(11) NOT NULL,
    PRIMARY KEY (id)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

CREATE TABLE redemptions (
    id int(11) NOT NULL,
    item_id int(11) NOT NULL,
    amount int(11),
    create_time datetime,
    PRIMARY KEY (id)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

INSERT INTO items VALUES (1);

INSERT INTO payments VALUES
    (1, 1, 50),
    (2, 1, 50);

INSERT INTO redemptions VALUES
    (1, 1, 10, '2013-01-01 00:00:00'),
    (2, 1, 10, '2013-01-01 00:01:00'),
    (3, 1, 10, '2013-01-01 00:02:00');

SELECT 
    redemptions.id AS redemption_id,
    SUM(payments.paid_amount) - COALESCE(SUM(previous_redemptions.amount), 0) - redemptions.amount AS remaining_balance
FROM redemptions
JOIN payments ON payments.item_id = redemptions.item_id
LEFT JOIN redemptions AS previous_redemptions
ON
    previous_redemptions.item_id = redemptions.item_id AND 
    previous_redemptions.create_time < redemptions.create_time
GROUP BY redemptions.id; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T02:12:02.443

给你！

```
SELECT 
    redemptions.id AS redemption_id,
    (payments.paid_amount - SUM(previous_redemptions.amount)) AS remaining_balance
FROM redemptions
JOIN payments ON payments.id = redemptions.payment_id
LEFT JOIN redemptions AS previous_redemptions
ON
    previous_redemptions.payment_id = redemptions.payment_id AND 
    previous_redemptions.id <= redemptions.id
GROUP BY redemptions.id; 
```

[SQL小提琴](http://www.sqlfiddle.com/#!2/ef409/3)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T02:13:35.410

这使用用户定义的变量来保持运行总计：

```
 SELECT 
    r.id AS redemption_id,
    @totAmt:=SUM(p.paid_amount)-COALESCE(@sumAmt,r.amount) totAmt,
    @sumAmt:=COALESCE(@sumAmt,r.amount)+r.amount
  FROM redemptions r
    JOIN payments p ON p.id = r.payment_id
    JOIN (SELECT @sumAmt:=NULL, @totAmt:=0) s
  GROUP BY r.id
  ORDER BY r.create_time 
```

[SQL 小提琴演示](http://sqlfiddle.com/#!2/780b6/1)

*编辑：给定评论，您可以使用相关子查询：*

```
 SELECT 
    r.id AS redemption_id,
    SUM(p.paid_amount)-
      (SELECT SUM(r2.amount)
       FROM redemptions r2
       WHERE r.item_id = r2.item_id AND 
          r2.create_time <= r.create_time )
  FROM redemptions r
    JOIN payments p ON p.item_id = r.item_id
  GROUP BY r.id
  ORDER BY r.create_time 
```

[更新的 SQL Fiddle](http://sqlfiddle.com/#!2/bce63/4)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-30T05:31:22.413

鉴于多次付款和多次兑换问题，我能想到的最好的办法是：

```
SELECT 
    redemptions.id AS redemption_id,
    payment_totals.paid_amount - SUM(cumulative_redemptions.amount) AS remaining_balance
FROM redemptions
INNER JOIN
    (SELECT item_id, SUM(paid_amount) paid_amount FROM payments GROUP BY item_id) payment_totals
ON
    redemptions.item_id = payment_totals.item_id
INNER JOIN redemptions AS cumulative_redemptions
ON
    cumulative_redemptions.item_id = redemptions.item_id AND 
    cumulative_redemptions.create_time <= redemptions.create_time
GROUP BY redemptions.id, payment_totals.paid_amount; 
```

*[SQL小提琴](http://www.sqlfiddle.com/#!2/bce63/14)*

这对每个项目的总付款使用子查询，这在您的问题中没有明确禁止，但我不保证性能。由于您在对 sgeddes 的评论中提到了批量更新，因此另一种选择是创建一个`payment_totals`完整的带有索引的实际表并在运行其余批次之前重新填充它。

# c# - 使用 IoC 即兴创作 - Unity

> ID：15714041
> 
> 赞同：0
> 
> 时间：2013-03-30T01:50:23.203
> 
> 标签：c#, oop, dependency-injection, inversion-of-control, unity-container

我正在尝试在应用程序中使用*依赖注入技术，但如果此上下文需要 DI，我会感到困惑..*

考虑一个接口：

```
public class ICardsHub {
    public T GetPlayersList<T>();
} 
```

及其实施：

```
public class GenericHub : ICardsHub {

    LANPlayers LANPlayers;
    WaNPlayers WANPlayers;
    bool AlgorithmsUseTildainLambdas=false;

    public GenericHub(LANPlayers _LANPlayers, WaNPlayers _WANPlayers, 
                           bool algorithmsUseTildainLambdas=false) {
        LANPlayers = _LANPlayers;
        WANPlayers = _WANPlayers;
        AlgorithmsUseTildainLambdas = algorithmsUseTildainLambdas;
    }

    public T GetPlayersList<T>() {
        ....
    }

} 
```

并且驱动程序类应该执行以下操作：

```
ICardsHub _ifCards = new GenericHub(_LANPlayers, _WANPlayers);
listOfPlayers = _ifCards.GetPlayersList<List<string>>(); 
```

现在，我们还有两个实现`ICardsHub`；`RedHub`并且`BlackHub`稍后在驱动程序类中实例化。

**问题**

1.  [Unity](http://unity.codeplex.com/) IoC/DI如何使这种情况受益？
2.  如果`striping out method parameters from the interface and injecting them to overload constructor`解决了问题，那么 DI 容器使用的合适场景是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T02:14:09.320

DI 使代码易于维护并易于切换到新的实现。我同意重载的构造函数可以达到目的，但是如果您有很多依赖项，我们仍然必须手动确保代码更改以有效地到达每个地方并手动更改它，有时您可能会错过其中的一些。有一个中心位置将有助于易于维护。这就是为什么不建议将 DI 用于较小的项目但良好的大型项目的原因。我认为 DI 的目的不是解决 TDD，而是更好的可维护性和轻松切换到新的类实现。例如，今天您使用 SQL SERVER 作为数据库，明天您更改为 NOSQL。类名中的一处更改将确保在所有地方与 DB 交互的所有代码都可以正常工作。TDD 就是其中的一个例子

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T02:13:12.057

DI 的主要动机是可测试性，恕我直言。所以，如果你在测试范式之外看，可能会有一些混乱。

在您描述的示例中，我看到 ICardsHub 为 GenericHub、RedHub 和 BlackHub 的实现定义了一个合同。

现在，这些实现中的每一个都将具有一些使其不同的逻辑，因此需要存在不同的类。

为了测试这些类（它们的职责是独一无二的），在这些类可以执行它们的工作之前需要执行一些步骤，并且可能会发布这些步骤。

此类测试的范围是确保在给定“前”步骤没有错误的情况下，此类执行的操作将为“后”步骤使用无错误输出。

考虑到这一点，依赖注入允许我们

1.  轻松假设前提条件（即注入模拟对象，并设置假设）
2.  执行一个动作（这个类的职责）
3.  验证输出。

顺便说一句，您的实现应该注入接口而不是具体类型。就像是 -

```
ILANPlayers LANPlayers;
IWaNPlayers WANPlayers;
bool AlgorithmsUseTildainLambdas=false;

public GenericHub(ILANPlayers _LANPlayers, IWaNPlayers _WANPlayers, 
                       bool algorithmsUseTildainLambdas=false) {
    LANPlayers = _LANPlayers;
    WANPlayers = _WANPlayers;
    AlgorithmsUseTildainLambdas = algorithmsUseTildainLambdas;
} 
```

所以在测试中你可以模拟这些类型的模拟实现`ILanPlayers`。`IWanPlayers`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-30T02:12:43.100

一般来说，您只使用 DI 来帮助您执行单元测试。您应该针对接口进行编码，因此，通过使用 DI，您可以轻松地模拟您的组件。

在您的场景中，您将有一些使用 ICardHub 接口实现的客户端类，现在的问题是，这些实现中的任何一个是否会执行数据库操作或任何其他外部使用，如果不是，您很可能最好不使用 DI。

如果您仍想使用 DI，请改用 AutoFac，IMO 很容易使用。

如果您有一些您认为可以创建“库”的代码，那么这是 DI 的一个很好的候选者。您必须将这些组件视为提供者，而 DI 通常并不是什么新鲜事。DI 只是消除了您的应用程序创建它需要的提供程序实例的责任，它是 DI 容器执行此操作，并且您的应用程序仅使用接口。

这是一个例子：

*   无 DI

    ```
    IDatabase database = new SqlServer(); 
    ```

*   带 DI

    ```
    IDatabase database = DIContainer.Get<IDatabase>(); 
    ```

如您所见，即使您的应用程序将使用 SqlServer 数据库，它对此一无所知。是的，您必须在 DI 容器中注册该类型，但您只需注册一次，因此如果您以后决定更改为其他实现，这很容易。

# ruby-on-rails - 从 Elastic Beanstalk 上托管的 Rails 应用程序上传文件的问题

> ID：15714042
> 
> 赞同：6
> 
> 时间：2013-03-30T01:50:36.220
> 
> 标签：ruby-on-rails, ruby-on-rails-3, file-upload, amazon-elastic-beanstalk

我有一个 Rails 3 应用程序，我正在本地开发并部署在 Amazon 的 Elastic Beanstalk 上进行生产。我的应用程序中有几个地方可以通过 HTML 表单上传图像。上传后，我将文件发送到 S3 进行存储。在本地开发时，我对此工作流程没有任何问题，但在生产中，我在上传期间收到 500 Internal Server Error 响应（我很确定这是在与 S3 进行任何通信之前）。

我通过 ssh 进入我的 EC2 实例，在 /var/app/support/logs/passenger.log 中发现了错误的痕迹。这是上传期间生成的行。

2013/03/30 00:58:52 [crit] 1723#0: *196227 open() "/tmp/passenger-standalone.1645/client_body_temp/0000000014" 失败（2：没有这样的文件或目录），客户端：ip_address ，服务器：_，请求：“POST /admin/users/1 HTTP/1.1”，主机：“www.my_domain.com”，引用者：“ [https://www.my_domain.com/admin/users/1/edit](https://www.my_domain.com/admin/users/1/edit) "

有没有人对我为什么无法从 Rails 将文件上传到 Elastic Beanstalk 有任何智慧之言？

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-31T00:49:22.373

经过一些研究，我认为问题在于每日 cronjob (/etc/cron.daily/tmpwatch) 正在删除对文件上传至关重要的乘客独立。* 目录。

通过重新启动应用程序服务器，我能够再次上传工作。为了更长期的修复，我更新了 tmpwatch 脚本以排除模式“/tmp/passenger*”（见下文）。

```
#! /bin/sh
flags=-umc
/usr/sbin/tmpwatch "$flags" -x /tmp/.X11-unix -x /tmp/.XIM-unix \
        -x /tmp/.font-unix -x /tmp/.ICE-unix -x /tmp/.Test-unix \
        -X '/tmp/hsperfdata_*' -X '/tmp/passenger*' 10d /tmp
/usr/sbin/tmpwatch "$flags" 30d /var/tmp
for d in /var/{cache/man,catman}/{cat?,X11R6/cat?,local/cat?}; do
    if [ -d "$d" ]; then
        /usr/sbin/tmpwatch "$flags" -f 30d "$d"
    fi
done 
```

是否有其他人针对此问题找到了另一种解决方案？我不是系统管理员（这是我选择使用 Elastic Beanstalk 的一个重要原因），所以我宁愿尽可能不使用 EC2 实例——尤其是当我的应用程序扩展并产生更多实例时。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-25T13:57:56.087

希望在下一个版本中修复:)

[http://code.google.com/p/phusion-passenger/issues/detail?id=654](http://code.google.com/p/phusion-passenger/issues/detail?id=654)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-28T22:39:45.277

您是否考虑过直接将图像上传到 s3 中？在 Elastic Beanstalk 中上传到服务器有点违背事物的精神（如果实例消失，文件可以被删除，下一个请求可能由不同的实例接收，等等）。我也不是系统管理员，出于同样的原因，我正在使用弹性豆茎。

基本上我想说的是，通过直接上传到 s3，您应该能够让您的服务器继续服务，您的数据库基于数据，您的文件存储存储您的文件。那么希望你能免受这种胡说八道的影响：）

# perl - Perl：提供从 AoA 到函数的单个数组引用

> ID：15714043
> 
> 赞同：1
> 
> 时间：2013-03-30T01:50:41.457
> 
> 标签：perl

无需深入了解所有细节，因为它们无关紧要，假设您在 Perl 中的另一个数组中有可变数量的数组：

```
@Models = ( [@m1], [@m2] .... [@m_x]); 
```

后来，我有一个函数需要像这样传递单个数组：

```
somefunc(\@m1, \@m2, ... \@m_x); 
```

由于数组的数量是可变的（`x`），是否有一种简单的方法可以为 生成参数列表`somefunc`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-30T02:01:30.613

如果`somefunc`没有原型，那么

```
somefunc(\@m1, \@m2, ... \@m_x); 
```

和

```
my @Models = (\@m1, \@m2, .... \@m_x);
somefunc(@Models); 
```

是一回事。如果`somefunc`确实有原型，就绕过它。

```
my @Models = (\@m1, \@m2, .... \@m_x);
&somefunc(@Models); 
```

# authentication - Kohana 3.3 expanding the Auth module

> ID：15714047
> 
> 赞同：2
> 
> 时间：2013-03-30T01:51:49.803
> 
> 标签：authentication, kohana, multi-user

I'm building an application using the Auth module for which I need at least 3 account types : Employer, Employee and Client. Since these accounts have different properties, functions and relationships (ex: employers has_many employees) I guess I need to have them on 3 separate ORM models.

The method I thought was to tweak the Auth module to replace the 'User' model with the appropriate sub-model (employer, employee, client), corresponding the the user type in the database.

Can this be done, or is it bad practice?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T14:12:17.997

For such rurposes you need to create different Model classes for each account type extending default Auth_ORM's `Model_User` class.

Then you need to create new `Auth_ORM` class extending `Kohana_Auth_ORM` class in your `application/classes` folder.

在这个文件中你需要重写`protected _login()`方法，所以它的`$user`变量指向所需的帐户类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T09:06:26.213

我在这里找到了有趣的存储库：[https](https://github.com/alexgisby/MAuth) ://github.com/alexgisby/MAuth 。我和你有同样的问题，所以如果你设法解决它，你可以分享解决方案。我认为此链接中的存储库可能是一个解决方案，但到目前为止我还没有设法实现它

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T22:31:49.363

您可以拥有 1 个模型 - 用户和 3 个不同的角色。并且根据角色，您可以加载特定的模块，其中将包含所需的类。

例如，如果用户具有角色 Employee，您将加载 modules/role_employee

# ios - UIScrollView 明显滚动，但 NSLog 显示它不是

> ID：15714048
> 
> 赞同：2
> 
> 时间：2013-03-30T01:52:02.863
> 
> 标签：ios, ipad, uiscrollview, uipagecontrol

此代码适用于通用。

我有几乎相同的 iPhone 和 iPad 布局。就对象类型而言，它们是相同的。

我试图弄清楚为什么我的页面控件不只在 iPad 上更新。在玩弄 NSLog 之后，似乎在 iPhone 上，该`scrollViewDidScroll`方法工作正常。它不在 iPad 上。触摸滚动视图时没有日志。

我还输入了一个 NSLog 来告诉我当前页面。它在 iPad 上执行，但仅当我调用`loadVisiblePages`我的`viewDidLoad`方法时，而不是当 scrollView 滚动时。

*请忽略我硬编码第一页和最后一页的部分，因为这通常是通过编程完成的，但是由于这个小错误，我不得不将所有页面加载到内存中。*

```
- (void)loadVisiblePages {
    // First, determine which page is currently visible
    CGFloat pageWidth = self.scrollView.frame.size.width;
    NSInteger page = (NSInteger)floor((self.scrollView.contentOffset.x * 2.0f + pageWidth) / (pageWidth * 2.0f));

    // Update the page control
    self.pageControl.currentPage = page;
    NSLog(@"Page number is %i", page);

    // Work out which pages you want to load
    NSInteger firstPage = 0; // page - 1;
    NSInteger lastPage = 3; //page + 1;

    // Purge anything before the first page
    for (NSInteger i=0; i<firstPage; i++) {
        [self purgePage:i];
    }

    // Load pages in our range
    for (NSInteger i=firstPage; i<=lastPage; i++) {
        [self loadPage:i];
    }

    // Purge anything after the last page
    for (NSInteger i=lastPage+1; i<self.pageImages.count; i++) {
        [self purgePage:i];
    }

}

- (void)scrollViewDidScroll:(UIScrollView *)scrollView {
    // Load the pages that are now on screen
    [self loadVisiblePages];
    NSLog(@"Scroll View Did Scroll");
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T03:07:49.110

如果滚动视图在屏幕上滚动，但没有调用该方法，则可能是您忘记将滚动视图的委托设置为 iPad 故事板中的视图控制器。

# objective-c - 为什么在 Objective-C 中添加两个浮点数时会出现“预期的表达式错误”？

> ID：15714050
> 
> 赞同：-4
> 
> 时间：2013-03-30T01:52:50.810
> 
> 标签：objective-c

为什么在 Objective-C 中添加两个浮点数时会出现“预期的表达式错误”？

```
float animinum = 0.1 
animinum = animinum + %0.2; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T01:54:43.473

很确定你想要的是：

```
animinum = animinum + 0.2; 
```

正如 rmaddy 指出的那样，您可以将其缩短为：

```
animinum += 0.2; 
```

# php - 将 HTML 表单输入转换为 php 理解的日期

> ID：15714053
> 
> 赞同：2
> 
> 时间：2013-03-30T01:54:16.050
> 
> 标签：php, html, datetime

我正在寻找一种方法让访问我的网站的人通过 HTML 表单输入日期，然后使用 php 从他们输入的日期减去或增加时间。例如，在表单中他们将输入他们的生日，我想要php 在他们生日后 5 天回显。我已经研究了很多在 php 中添加日期的方法，所以我认为这不会是一个问题。我只是不知道如何让 php 将表单输入识别为日期。

这是我选择日期的 HTML 代码：

```
<select name="DMonth" input type="number">
    <option>- Select Month -</option>
    <option value=1>January</option>
    <option value=2>February</option>
    ...
    <option value=12>December</option>
</select>
<select name="DDay" input type="number">
<option>- Select Day -</option>
    <option value=1>1</option>
    <option value=2>2</option>
    ...
    <option value=31>31</option>
</select>
<select name="DYear" input type="number">
    <option>- Select Year -</option>
    <option value=2013>2013</option>
    <option value=2014>2014</option>
    ...
    <option value=2022>2022</option>
</select><br>
<select name="DHour" input type="number">
<option>- Select Hour -</option>
<option value=00>12 a.m.</option>
<option value=01>1 a.m.</option>
<option value=02>2 a.m.</option>
<option value=03>3 a.m.</option>
<option value=04>4 a.m.</option>
<option value=05>5 a.m.</option>
<option value=06>6 a.m.</option>
<option value=07>7 a.m.</option>
<option value=08>8 a.m.</option>
<option value=09>9 a.m.</option>
<option value=10>10 a.m.</option>
<option value=11>11 a.m.</option>
<option value=12>12 p.m.</option>
<option value=13>1 p.m.</option>
<option value=14>2 p.m.</option>
<option value=15>3 p.m.</option>
<option value=16>4 p.m.</option>
<option value=17>5 p.m.</option>
<option value=18>6 p.m.</option>
<option value=19>7 p.m.</option>
<option value=20>8 p.m.</option>
<option value=21>9 p.m.</option>
<option value=22>10 p.m.</option>
<option value=23>11 p.m.</option>
</select>
<select name="DMin" input type="number">
<option>- Select Minute -</option>
<option value=0>00</option>
<option value=15>15</option>
<option value=30>30</option>
<option value=45>45</option>
</select> 
```

这就是我认为我会在 php 中使用的

```
$DMonth=$_POST["DMonth"];
$DDay=$_POST["DDAY"];
$DYear=$_POST["DYear"];
$DHour=$_POST["DHour"];
$DMin=$_POST["DMin"];
$Bday = date_create($DYear.'-'.$DMonth.'-'.$DDay.' '.$DHour.':'.$DMin.':00');
echo date_format($Bday, 'Y-m-d H:i:s'); 
```

但是当我运行表单时，它唯一回显的是当前日期和时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T01:58:46.270

*我有几个小时和几分钟看不到您的代码*

这有点令人费解，因为它是您代码的插件，但可以解决问题。

```
$DMonth=$_POST["DMonth"];
$DDay=$_POST["DDAY"];
$DYear=$_POST["DYear"];
$DHour=$_POST["DHour"];
$DMin=$_POST["DMin"];
$Bday = date_create($DYear.'-'.$DMonth.'-'.$DDay.' '.$DHour.':'.$DMin.':00');
echo date_format($Bday, 'Y-m-d H:i:s');

$datetime = new DateTime(date_format($Bday, 'Y-m-d H:i:s'));
$datetime->modify('+5 days');
echo $datetime->format('Y-m-d H:i:s'); 
```

**更简单的版本**

```
$datetime = DateTime::createFromFormat('Y-n-j H:i', $DYear.'-'.$DMonth.'-'.$DDay.' '.$DHour.':'.$DMin);
echo $datetime->format('Y-m-d H:i:s'); // Birthday
$datetime->modify('+5 days');
echo $datetime->format('Y-m-d H:i:s'); // 5 days later 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T02:09:37.187

怎么样...

```
$datetime= mktime($DHour, $DMin, 0, $DMonth, $DDay, $DYear); 
```

?

有关更多信息，请参阅[mktime 帮助页面](http://php.net/manual/en/function.mktime.php)- 无需构建字符串或担心格式，只需提供适当的参数名称`Hour, Minute, Second, Month, Day, Year`

您的 html 中也存在一些问题。选择的语法如下：

```
<select name="DYear">
    <option>- Select Year -</option>
    <option value="2013">2013</option> 
```

请注意，`<select>`没有`input`，并且值用引号引起来。也无需指定`type="number"`. 要正确地将值转换为整数而不是字符串，请在 PHP 中执行此操作：

```
$DYear = (int) $_POST["DYear"]; 
```

# c++ - 尽管有 pop()，如何避免删除 priority_queue::top()？

> ID：15714054
> 
> 赞同：1
> 
> 时间：2013-03-30T01:54:17.967
> 
> 标签：c++, memory-management, reference, segmentation-fault, priority-queue

STL 和提升优先级队列的接口包括

```
T const &   top () const;
void    pop (); 
```

后者删除顶部元素。但是，如果我想在 pop() 之后继续使用该元素，并且想避免复制呢？例如，假设我有一个`priority_queue<T> pq`. 我想写

```
const T& first = pq.top();      
pq.pop();
const T& second = pq.top();
analyze(second);
analyze(first);      // first *after* second 
```

不幸的是，一旦我 pop()，第一个引用就变得无效，所以我得到一个段错误。

我更喜欢 java's 之类的解决方案`nextElement()`，它返回`top()`并执行 a `pop()`，但仅当元素超出范围时才会删除该元素。这样我就不需要跟踪什么`pop()`和什么时候。但是，using`priority_queue<shared_pointer<T> >`似乎没有帮助，因为将 ref 指向 a`shared_pointer`并不会增加其 use_count。

如果它很重要，我更喜欢使用`boost::fibonacci_heap`它的高效`push()`.

任何想法或指示？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T02:21:16.213

您是否允许使用支持 std::move 的编译器？

```
int main()
{       
    std::priority_queue<std::string> str_q;
    str_q.push("aaa");
    str_q.push("bbb");
    str_q.push("ccc");
    std::string strs[3];

    strs[0] = std::move(const_cast<std::string&>(str_q.top()));
    std::cout<<str_q.top()<<std::endl;
    str_q.pop();
    strs[1] = std::move(const_cast<std::string&>(str_q.top()));
    std::cout<<str_q.top()<<std::endl;
    str_q.pop();
    strs[2] = std::move(const_cast<std::string&>(str_q.top()));
    std::cout<<str_q.top()<<std::endl;
    str_q.pop();

    for(auto const &data : strs){
        std::cout<<data<<std::endl;
    }            

    return 0;
} 
```

编辑答案，因为返回类型是 std::string const&，它不能被移动，至少我们抛弃了 constness。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T03:02:27.910

如果你愿意承担增加的成本，`use count`那么据我所知，我`boost::shared_ptr`会这样做`std::shared_ptr`：

```
#include <iostream>
#include <vector>
#include <memory>
#include <queue>
#include <boost/shared_ptr.hpp>

template< typename T >
struct deref_less
{
  //typedef std::shared_ptr<T> P;
  typedef boost::shared_ptr<T> P;
  bool operator()( const P& lhs, const P& rhs ) { return *lhs < *rhs; }
};

int main()
{
   //std::priority_queue< std::shared_ptr<int>, std::vector< std::shared_ptr<int> >, deref_less< int >  > pq ;
   std::priority_queue< boost::shared_ptr<int>, std::vector< boost::shared_ptr<int> >, deref_less< int >  > pq ;

    boost::shared_ptr<int>
      sp1( new int(10)),
      sp2( new int(11)),
      sp3( new int(3))
      ;

      pq.push(sp1) ;
      pq.push(sp2) ;
      pq.push(sp3) ;

      std::cout << *pq.top() << std::endl ;

      std::cout << sp2.use_count() <<std::endl ;

      //std::shared_ptr<int> sp4( pq.top() ) ;
      boost::shared_ptr<int> sp4( pq.top() ) ;

      std::cout << sp2.use_count() <<std::endl ;

      pq.pop() ;

      std::cout << sp2.use_count() <<std::endl ;
      std::cout << *sp4 << std::endl ;
} 
```

在线`std`版本[在这里](http://liveworkspace.org/code/1Kvixl%2422)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-30T03:24:12.283

使用`fibonacci_heap`，您可以使用有序迭代器并将元素保留在堆中，直到完成。

```
auto it = heap.ordered_begin();
const T& first = *it;  // picking up ref to first element
const T& second = *++it;  // and to second element
analyze(first, second);
heap.pop();  // and now drop them
heap.pop(); 
```

# sql-server - “超时已过期”异常发生在定义的超时之前

> ID：15714062
> 
> 赞同：1
> 
> 时间：2013-03-30T01:55:26.213
> 
> 标签：sql-server, exception, ado.net

使用 ADO.NET 和 SQL Server 2008。

SqlCommand 的`CommandTimeout`属性没有改变，所以它的默认值为 30。

该应用程序运行几十个命令并将结果（或异常）记录到 SQL 表中，因此我知道每次执行的开始时间。下一个日志记录的开始时间给了我持续时间的估计。

我得到了两个没有意义的异常，因为它们的持续时间远小于定义的`CommandTimeout`.

这是随机发生的。它是不可重现的。

```
Timeout expired.  The timeout period elapsed prior to completion of the operation or the server is not responding. 
```

我的问题是：除了实际超时之外，是否可以由其他原因引发此异常？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T21:56:54.073

这可能与参与表中的某些锁定有关。

# java - 从数据库显示html页面

> ID：15714064
> 
> 赞同：0
> 
> 时间：2013-03-30T01:55:46.023
> 
> 标签：java, android, sqlite

我将 html 字符串插入数据库。然后我在 webview 中加载该字符串，它只显示`null`。请帮我。这是我的代码：

```
public class MainActivity extends Activity {
     WebView browser;
    private static String inp;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

         browser=(WebView)findViewById(R.id.w1);

         // browser.loadDataWithBaseURL("x-data://base",inp,"text/html", "UTF-8",null);
         browser.loadData(inp, "text/html", "UTF-8"); 

    }
    public void insertUndergraduate(){
        AndroidOpenDbHelper androidOpenDbHelperObj = new AndroidOpenDbHelper(this);
        SQLiteDatabase sqliteDatabase = androidOpenDbHelperObj.getWritableDatabase();
        ContentValues contentValues = new ContentValues();
        inp = "<html>"+"<body><h1>hai mohan</h1></body>"+"</html>";
        contentValues.put(AndroidOpenDbHelper.COLUMN_NAME_PAGE,inp);

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T02:00:58.527

`inp`你之前没有设置`browser.loadData(inp, "text/html", "UTF-8");`

# coldfusion - Coldfusion 10调用cfc错误

> ID：15714065
> 
> 赞同：0
> 
> 时间：2013-03-30T01:55:53.873
> 
> 标签：coldfusion, runtime-error, invoke, cfc, coldfusion-10

任何人都知道如何解决这个问题？

```
"Unable to invoke CFC - The value returned from the getAllContacts function is not of type Contacts[]. 
```

如果将组件名称指定为返回类型，则可能找不到或无法访问该组件的定义文件。”

谢谢你。

[更新]

当然可以：这是 ContactsService.cfc 中的代码：

```
<cfcomponent output="false">

    <!--- [irrelevant code removed] --->

    <cffunction name="getAllContacts" returntype="Contacts[]" access="remote">
        <cfreturn entityload("Contacts") />
    </cffunction>

    <!--- [irrelevant code removed] ---> 
```

     Contacts.cfc 中的代码：

```
<cfcomponent persistent="true" table="Contacts"  output="false">
    <cfproperty name="id" column="id" type="numeric" ormtype="int" fieldtype="id"  /> 
    <cfproperty name="company" column="company" type="string" ormtype="string"  /> 
    <cfproperty name="Sub_Heading" column="Sub_Heading" type="string" ormtype="string"/> 
    <cfproperty name="Department" column="Department" type="numeric" ormtype="int"  /> 
    <cfproperty name="boss" column="boss" type="string" ormtype="string"  /> 
    <cfproperty name="Room" column="Room" type="string" ormtype="string"  /> 
    <cfproperty name="Phone" column="Phone" type="string" ormtype="string"  />  
</cfcomponent> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T02:09:56.437

你没有给我们太多的继续！几乎可以说是“错误消息非常清楚地解释了可能出了什么问题”。如果您发布一些代码，那么我们可以给您一个更好的主意。

但基本上你的方法期望返回一个联系人对象数组，但这不是你想要返回的。

如果您扩展您的问题以包含足够的信息以正确回答，我将更新答案以更彻底......

更新 1 我仍然无法回答你的问题，但我可以在这个答案的基础上再做一点。

在我看来，您的 entityLoad() 实际上并没有找到任何东西。您是否存储了任何联系人？

你可以改变你的方法是这样的：

```
<cffunction name="getAllContacts" returntype="ANY" access="remote">
    <cfset var allContacts = entityload("Contacts")>
    <cfdump var="#allContacts#">
    <cfreturn allContacts>
</cffunction> 
```

然后调用该方法并查看它的输出。这应该给你一个线索。

[待续...如果您是 StackOverflow 警察，请不要这样做。我知道这还不是一个完整的答案，但是当我们深入了解它时，它将会是。我知道我在做什么]

# php - PHP进程页面不起作用

> ID：15714070
> 
> 赞同：0
> 
> 时间：2013-03-30T01:57:19.653
> 
> 标签：php

大家好，我的流程页面不起作用，我的代码是

```
<?php
$id = $_POST['item_id'];
$qty = $_POST['item_qty'];
$name = $_POST['item_name'];

$con = mysqli_connect ("localhost", "name", "password", "db");

// Check connection
if (mysqli_connect_errno())
    {
    echo "Failed to connect to MySQL: " . mysqli_connect_error();
    }

$sql = "INSERT INTO Temp (id, qty, name)
VALUES
('$_POST[id]', '$_POST[qty]', '$_POST[name]')";

if (!mysqli_query($con, $sql))
    {
    die('Error: ' . mysqli_error());
    }

header('Location: http://url.com/');

mysqli_close($con); 
```

?>

应该都是正确的，只是从 w3school 复制，问题是，db 只得到 0，

IE。我的$id 是4，$qty 是12，$name 是"Hello"，进程页后，表只有id 和qty 两个0，name 是无效的。

值应该成功处理到这个进程页面，bc我试过了

```
echo $id, $qty, $name; 
```

一切都和我之前输入的一样。

有人可以帮我吗？谢谢 ：-）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T02:06:24.423

这一行：

```
INSERT INTO Temp (id, qty, name) VALUES ('$_POST[id]', '$_POST[qty]', '$_POST[name]')"; 
```

应该：

```
INSERT INTO Temp (id, qty, name) VALUES ('$id', '$qty', '$name')"; 
```

如果`form`来自[您之前的问题](https://stackoverflow.com/questions/15713914/form-action-not-work-the-exist-address-shows-page-not-found/15713975)，则不需要：

```
$id = $_POST['item_id'];
$qty = $_POST['item_qty'];
$name = $_POST['item_name']; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T02:09:26.683

我同意您似乎遗漏了 item_。您可能需要先清理数据。

```
$id=mysqli_real_escape_string($_POST['item_id']);
$qty=mysqli_real_escape_string($_POST['item_qty']);
$name=mysqli_real_escape_string($_POST['item_name']);

$sql = "INSERT INTO Temp (id, qty, name)
VALUES ('$id', '$qty', '$name')"; 
```

# php - 在 ubuntu 12.10 上设置 .htaccess 文件

> ID：15714071
> 
> 赞同：0
> 
> 时间：2013-03-30T01:57:21.257
> 
> 标签：php, .htaccess, apache2

一旦我将这些`.htaccess`文件保存在我的服务器上，我就遇到了一个错误`500 internal server error`，不知道我该如何解决它。出于某种原因，这些`.htaccess`文件的另一个问题适用于我正在观看的教程 [http://www.youtube.com/watch?feature=player_embedded&v=Aw28-krO7ZM#at=130](http://www.youtube.com/watch?feature=player_embedded&v=Aw28-krO7ZM#at=130)

```
<IfModule mod_rewrite.c>
   RewriteEngine On

   RewriteCond %{REQUEST_FILENAME} !-d
   RewriteCond %{REQUEST_FILENAME} !-f
   RewriteCond %{REQUEST_FILENAME} !-l

   RewriteRule ^(.*)$ index.php?url=$1 [QSA,L]
<IfModule> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T22:43:00.537

第一个错误：

`mod_rewrite`未在 Apache 中启用模块。启用后 - 错误消失并且网站开始工作。

要启用模块，请编辑 apache 的`httpd.conf`文件并确保该行未注释：

```
LoadModule rewrite_module modules/mod_rewrite.so 
```

`mod_rewrite`在您的系统上安装后。

第二个错误：

将文件的最后一行更改`.htaccess`为：

```
</IfModule> 
```

我希望我有所帮助。

# c - While循环分段错误

> ID：15714072
> 
> 赞同：1
> 
> 时间：2013-03-30T01:57:22.280
> 
> 标签：c, while-loop, segmentation-fault

我正在尝试编写一个程序，该程序从定向到标准输入的文件中读取，然后在文件中找到两个最常用的单词。我几乎所有东西都能正常工作，但现在我的 while 循环出现了奇怪的分段错误

```
char *word=readWord();
int end=0;
while(end==0&&word!=NULL){
    printf("word readn %s\n",word);
    list=addToList(list,word);
    printf("added to list\n");
    word=readWord();
    if(word==NULL){
        end=1;
        printf("word is null\n");
    }
}
printf("done while loop"); 
```

当使用包含单词一二三四的文件运行时，此输出如下所示。

```
单词读了一个
添加到列表
单词读了两个
添加到列表
读三字
添加到列表
单词读四>
添加到列表
词为空
分段故障

```

`readWord`功能在其他文件中工作正常；

```
char * readWord(){

    //temporary char array to read string
    char c,word[BUFFER_SIZE];

    if(scanf("%c",&c)==EOF){
        return NULL;
    }
    while(!((c>='a'&&c<='z')||(c>='A'&&c<='Z'))){
        if(scanf("%c",&c)==EOF)
            return NULL;
    }
    int i;
    for( i=0;(c>='a'&&c<='z')||(c>='A'&&c<='Z');i++){
        word[i]=c;
        scanf("%c",&c);
    }
    word[i+1]='\0';

    //dynamic allocation of just enough memory to store the word
    char * str= malloc(strlen(word) +1);
    strcpy(str,word);
    return str;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T02:44:11.913

首先是 for 循环末尾的 i 值比单词的长度多一个，所以这是不正确的：

```
word[i+1]='\0' 
```

它应该是：

```
word[i]='\0' 
```

其他几条评论：

*   使用 isalpha(c)
*   将 malloc/strcpy 折叠成 strdup
*   写 end==0&&word!=NULL 为 (end == 0) && (word != NULL)

# html - DIV tags get buggy when editing code

> ID：15714073
> 
> 赞同：-1
> 
> 时间：2013-03-30T01:57:25.120
> 
> 标签：html, dreamweaver

Why does my DIV tags not work after editing pure text with DreamWeaver?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T02:07:42.773

You closed the `<footer>` element before the actual content.

```
<!-- content ends
================================================== --> 

<!-- footer starts
================================================== -->
<footer id="footer" class="clearfix">
  </footer> //This right here needs to go after your footer code.
    <div class="container"> 
    //... bla bla bla
    </div>
    <!--row ends--> 

  </div>

//Add this here: </footer>
//Don't forget to remove the other one up there.
<!-- footer ends
================================================== --> 
```

# java - HashSet 并发修改异常

> ID：15714075
> 
> 赞同：0
> 
> 时间：2013-03-30T01:57:44.837
> 
> 标签：java

我收到此代码的并发修改异常错误：

```
Iterator iterateBids = bidders.iterator();
     Person nextBidder;

bidders.add(bid.getBidder());

if (highestBid == null) {
    // There is no previous bid.
    highestBid = bid;
    while (iterateBids.hasNext()) {
        //nextBidder = (Person) iterateBids.next();
        ((Person) iterateBids.next()).bidUpdate(this, bid);
    }
    return true;
} else if (bid.getValue() > highestBid.getValue()) {
    // The bid is better than the previous one.
    highestBid = bid;
    while (iterateBids.hasNext()) {
        nextBidder = (Person) iterateBids.next();
        nextBidder.bidUpdate(this, bid);
    }
    return true;
} 
```

bidders 是一个包含 Person 的 HashSet。错误发生在“nextBidder = (Person) iterateBids.next();” 代码查找高于当前出价的出价。如果更高，它将遍历投标人集并执行 bidUpdate() 方法。

我如何同时修改和迭代？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-30T02:01:30.077

我唯一能看到的是你在这一行之前抓住了迭代器：

```
 bidders.add( bid.getBidder() ); 
```

...这显然是对`bidders`.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-30T02:02:21.730

在第 1 行获取迭代器后：

```
Iterator iterateBids = bidders.iterator(); 
```

您正在修改第 4 行的数据结构：

```
bidders.add( bid.getBidder() ); 
```

# wiimote - 如何从 Wiimote 获取 IR 数据？（DarwiinRemote 或 WiimoteWhiteboard 等...）

> ID：15714076
> 
> 赞同：0
> 
> 时间：2013-03-30T01:58:13.100
> 
> 标签：wiimote

我正在尝试通过蓝牙从 Wiimote 获取 IR 数据，我感到非常沮丧。我已经尝试过使用 WiimoteWhiteboard ( [http://www.uweschmidt.org/wiimote-whiteboard](http://www.uweschmidt.org/wiimote-whiteboard) ) 以及 Darwiin Remote ( [http://sourceforge.net/projects/darwiin-remote/](http://sourceforge.net/projects/darwiin-remote/) )。它们都显示 IR 数据，但不会（似乎）让我输出它，以便我可以通过编程方式获取它。有没有人有什么建议？

我真的不关心执行此操作所需的语言。我的小组希望使用 Python、Java 或 Processing，但这并不重要。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T06:17:45.307

您需要与 HID 连接才能获得 Wii Remote 输入。对于 Python 或 Java，我不知道该告诉您什么，但这里是来自设备的 HID 报告的基本信息： [http ://wiibrew.org/wiki/Wiimote#HID_Interface](http://wiibrew.org/wiki/Wiimote#HID_Interface)

我从未使用过它，但有一个可用的 Java 类： [http ://wiibrew.org/wiki/Wiimote/Library#motej_Java_library](http://wiibrew.org/wiki/Wiimote/Library#motej_Java_library)

我可以告诉你的是，如果你想使用 .NET，MSDN 上有一个很棒的课程。即使您最终没有使用 .NET，也可以将此代码用作一个很好的示例。 [http://wiimotelib.codeplex.com/SourceControl/changeset/view/96133#42622](http://wiimotelib.codeplex.com/SourceControl/changeset/view/96133#42622)

# php - MySQL/PHP：我可以从 MySQL 查询中获取正在更新或删除的值吗？

> ID：15714077
> 
> 赞同：0
> 
> 时间：2013-03-30T01:58:14.620
> 
> 标签：php, mysql, logging

我有一个简单的 PHP 网站，目前我将所有 MySQL 数据库查询记录到一个“日志”表中，以便记录何时以及由谁进行了哪些更改。问题是：对于所有更新和删除查询，不记录旧值。

有没有一种简单的方法来返回更新或删除的旧值？我开始尝试解析查询字符串，但它看起来很混乱、复杂而且完全是错误的。

这是我想做的一个例子：如果正在执行的查询是：

```
UPDATE members SET email='joe@this.com' WHERE memberId=123; 
```

我目前正在录制这样的表格：

```
+------+------------+-------------------------------------------------------------+
| User | Date       | Query                                                       |
+------+------------+-------------------------------------------------------------+
| joe  | 2013-03-29 | UPDATE members SET email='joe@this.com' WHERE memberId=123; |
+------+------------+-------------------------------------------------------------+ 
```

我希望桌子看起来像什么：

```
+------+------------+-------------------------------------------------------------+--------------+
| User | Date       | Query                                                       | Old Values   |
+------+------------+-------------------------------------------------------------+--------------+
| joe  | 2013-03-29 | UPDATE members SET email='joe@this.com' WHERE memberId=123; | joe@that.com |
+------+------------+-------------------------------------------------------------+--------------+ 
```

（注意右侧的新列包含旧的更改数据。）

我意识到这可能会因为一次更改多个值而变得棘手，但是任何关于在哪里查看的指导都会很棒。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T02:03:33.173

如果你问我认为你是什么，那么不，你不能。一旦数据被替换或删除，它就永远消失了。

如果您真的想这样做，您将需要保留数据的**版本**，并且只执行设置新更新计数器或其他内容的插入，这对您来说真的不会很有趣。

# javascript - Jquery returning the wrong selected index of a radio button group

> ID：15714078
> 
> 赞同：0
> 
> 时间：2013-03-30T01:58:17.393
> 
> 标签：javascript, jquery, twitter-bootstrap

I am using bootstrap and have a radio button group. When the user clicks the radio button, I need to grab the index of the button he/she selected. My [fiddle](http://jsfiddle.net/MgcDU/3028/) returns the wrong value. Instead of the newly-selected index, it gets the previously-selected index. How do I correct it?

```
<div class="btn-group" data-toggle="buttons-radio">
    <a class="btn btn-link">Index 0</a>
    <a class="btn btn-link active">Index 1</a>
    <a class="btn btn-link">Index 2</a>
</div> 
```

Javascript:

```
var selected;

$('.btn-group > .btn, .btn[data-toggle="button"]').click(function() {
    selected = $(".btn-group").find(".active").index();
    alert(selected);
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T02:02:07.197

```
var selected;

$('.btn-group > .btn, .btn[data-toggle="button"]').click(function() {
    selected = $(this).index();
    alert(selected);
}); 
```

# javascript - 需要使用的文件还需要

> ID：15714080
> 
> 赞同：1
> 
> 时间：2013-03-30T01:58:35.567
> 
> 标签：javascript, jquery, requirejs

我写了一个 jQuery 插件并使用**require.js**。我的**plugin.js**文件如下所示：

```
require(['path/to/something'], function(Something) {
    // LINE 1 <--------
    jQuery.fn.myPlugin = function(elem) {
        var s = new Something(elem);
        elem.data('something', s);
        return elem;
    };
}); 
```

在**index.html**我有：

```
 require(['js/plugin'], function() {
        $(function() {
            // LINE 2 <--------
            $('#elem').myPlugin();
        });
    }); 
```

当我运行代码时，第 2 行在第 1 行之前运行，因此引发异常：

> myPlugin 不是函数。

为什么 2 号线在 1 号线之前运行？我怎样才能解决这个问题？

# google-maps-api-3 - 使用街景图像 API 的图像叠加

> ID：15714084
> 
> 赞同：1
> 
> 时间：2013-03-30T01:59:51.457
> 
> 标签：google-maps-api-3, google-street-view, google-static-maps

我想知道是否允许我将图像叠加层添加到静态 Google 街景图像。这个问题背后的想法是在 android 应用程序中将人/对象添加到街景图像（并显示它），而不对结果进行进一步处理。

这会违反 Google 地图/Google Earth API 服务条款的“10.1.3 a)”吗？我对此不太确定，因为“（i）创建地图图块的服务器端修改”被列为禁止示例，但我只想添加基于客户端的叠加层而不修改街景图像本身。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T13:55:47.690

你读过这个部分吗？[https://developers.google.com/maps/documentation/javascript/streetview#StreetViewOverlays](https://developers.google.com/maps/documentation/javascript/streetview#StreetViewOverlays)

街景 API 似乎支持叠加层。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-07-08T19:10:16.050

如果您阅读 Vitor 的链接，它会说：

> “目前，街景全景图支持的叠加类型仅限于标记、信息窗口和自定义叠加视图。”

因此，除非您实现自己的自定义叠加视图，否则不支持图像叠加（如地面叠加）

# jquery - 如何使用 jquery 摆脱工具提示

> ID：15714087
> 
> 赞同：1
> 
> 时间：2013-03-30T02:00:24.880
> 
> 标签：jquery, wordpress

我已尝试使用以下代码从锚点中删除 alt 标签工具提示。这是[网站](http://rmjoy.com/portfolio-item/city-farmer/)投资组合中的图像我试图从使用 jquery 中删除工具提示，因为它是朋友正在使用的购买主题，我不知道在哪里摆脱 wordpress 代码中的 alt 标签。

```
jQuery(document).ready(function($) {

     $('.loader').click(function(e) { 
         e.preventDefault(); 
         $('.loader').removeAttr('alt');
      });

}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T02:03:01.427

工具提示显示是因为`title`属性，而不是`alt`.

```
$('.loader').removeAttr('title'); 
```

# c# - 捕获组嵌套如何影响组编号？

> ID：15714095
> 
> 赞同：2
> 
> 时间：2013-03-30T02:01:35.347
> 
> 标签：c#, regex

我可以在一个组中有一个组的情况下使用这样的正则表达式吗？如果是这样，在 .NET 中哪个是第 1 组，哪个是第 2 组？

```
^(abc(def))$ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T02:04:44.463

首先开始的组（从左到右读取）总是编号较低的¹。在这种情况下，“外”组是#1，“内”组是#2。

考虑使用[*命名匹配子表达式（又名命名组）*](http://msdn.microsoft.com/en-us/library/bs2twtah.aspx#named_matched_subexpression)以避免混淆 - 至少在更复杂的情况下：

```
^(?<outer>abc(?<inner>def))$ 
```

* * *

¹ [MSDN](http://msdn.microsoft.com/en-us/library/bs2twtah.aspx#matched_subexpression)的措辞：

> 使用括号的捕获会根据正则表达式中左括号的顺序从左到右自动编号，从 1 开始。

# jquery - Div 出现在错误的一侧 - 滚动动画

> ID：15714098
> 
> 赞同：0
> 
> 时间：2013-03-30T02:02:05.433
> 
> 标签：jquery, scroll, jquery-animate, parallax

所以我有 5 个 div，我让它们从侧面和底部或顶部移动，这取决于哪一个。出于某种原因，我正在尝试修改脚本，以便案例 1 和案例 2 从右侧进入。而案例 3 从左侧进入。我有案例 0 从左边进来，案例 5 从右边进来。但是，一旦我使用案例 3、1 和 2 的设置，它们就会静止不动，并且只会为顶部/底部设置动画。

我怎样才能解决这个问题？

我还想在其中添加不透明度，我不知道该怎么做。我希望它为 0 并淡入为 1。

```
jQuery(document).ready(function () {
var myHeight;
jQuery('.type-portfolio').each(function (i) {
    var myElement = jQuery(this);
    myElement.data('params', {
        top1: jQuery(this).css('top'),
        x1: jQuery(this).css('left')
    });
    switch (i) {
    case 0:
        myElement.data('params', {
            top0: -600,
            x0: -2600,
            top1: jQuery(this).css('top'),
            x1: jQuery(this).css('left')
        });
        break;
    case 1:
        myElement.data('params', {
            top0: -200,
            x0: -930,
            top1: jQuery(this).css('top'),
            x1: jQuery(this).css('left')
        });
        break;
    case 2:
        myElement.data('params', {
            top0: -200,
            x0: -1030,
            top1: jQuery(this).css('top'),
            x1: jQuery(this).css('left')
        });
        break;
    case 3:
        myElement.data('params', {
            top0: 250,
            x0: -2600,
            top1: jQuery(this).css('top'),
            x1: jQuery(this).css('left')
        });
        break;
    case 4:
        myElement.data('params', {
            top0: 250,
            x0: -530,
            top1: jQuery(this).css('top'),
            x1: jQuery(this).css('right')
        });
        break;
    }
});

function init() {
    myHeight = jQuery(window).height();
    jQuery('.topWrap').css('height', myHeight - 300);
    jQuery('.portfolioWrapper').css('min-height', Math.max(myHeight / 2 + 250, 600));
}
jQuery(window).scroll(function () {
    var s_max = myHeight / 2 + 250;

    function move(p0, p1, s) {
        return Math.min((-p0 + p1) / s_max * s + p0, p1);
    }
    var scrollTop = parseInt(jQuery(window).scrollTop());
    jQuery('.type-portfolio').each(function (i) {
        var myX = move(jQuery(this).data('params').x0, parseInt(jQuery(this).data('params').x1), scrollTop),
            myY = move(jQuery(this).data('params').top0, parseInt(jQuery(this).data('params').top1), scrollTop);
        if (i < 3) {
            jQuery(this).stop().css({
                left: myX + 'px',
                top: myY + 'px'
            })
        } else {
            jQuery(this).stop().css({
                right: myX + 'px',
                top: myY + 'px'
            })
        }
    })
})
init();
jQuery(window).resize(function () {
    init();
});
}) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T02:17:40.753

不确定左/右问题，但要在滚动时淡化元素：

```
$(document).ready(function($){
    $(window).scroll(function(){
        if($(this).scrollTop() > 300){
            $("#YourElementID").fadeTo("slow",0);
        }
    });
}); 
```

# ios - 将通用 NSStrings 转换为 NSDates 的预定义方法

> ID：15714104
> 
> 赞同：3
> 
> 时间：2013-03-30T02:02:27.537
> 
> 标签：ios, date, nsstring, nsdateformatter

我正在寻找一种将用户输入的“日期文本”（例如 3/3/1990 或 3-1-98）格式化为 NSDate 的方法。

我可以自己实现它，尝试使用各种日期格式化程序格式化文本，但我偷偷怀疑有一种更简单的方法可以做到这一点。

[dateWithNaturalLanguageString:](http://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSDate_Class/Reference/Reference.html#//apple_ref/occ/clm/NSDate/dateWithNaturalLanguageString:)可能会起作用，但我听说这会导致应用商店拒绝？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T03:29:49.733

您正在寻找`NSDataDetector`它并返回`NSTextCheckingResult`对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T02:05:42.123

我不确定这是否涵盖了您需要的所有内容，但是`NSDateFormatter`该类有一个`dateFromString:`方法。如果您可以识别字符串的格式并创建相应的`NSDateFormatter`对象，那么就可以了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-13T21:22:43.890

所以 NSDataDetector 是我的一杯茶，我确实用类方法中的一些内省 if-else 语句来暴力解决问题。如果未来土地上的任何人有兴趣：

```
#import "TotalStringToDateFormatter.h"

@implementation TotalStringToDateFormatter

+(NSDate*) convertString:(NSString *)string
{
    NSDateFormatter *dateFormatter = [[NSDateFormatter alloc]init];
    NSDate* date;
    NSString* checkString;

    [dateFormatter setDateFormat:@"mm/dd/yyyy"];
    date = [dateFormatter dateFromString:string];
    checkString = [dateFormatter stringFromDate:date];
    if ([string isEqualToString:checkString]) {
        return date;
    }

    [dateFormatter setDateFormat:@"mm-dd-yyyy"];
    date = [dateFormatter dateFromString:string];
    checkString = [dateFormatter stringFromDate:date];
    if ([string isEqualToString:checkString]) {
        return date;
    }
    [dateFormatter setDateFormat:@"m/d/yyyy"];
    date = [dateFormatter dateFromString:string];
    checkString = [dateFormatter stringFromDate:date];
    if ([string isEqualToString:checkString]) {
        return date;
    }

    [dateFormatter setDateFormat:@"m-d-yyyy"];
    date = [dateFormatter dateFromString:string];
    checkString = [dateFormatter stringFromDate:date];
    if ([string isEqualToString:checkString]) {
        return date;
    }
    [dateFormatter setDateFormat:@"m/d/yy"];
    date = [dateFormatter dateFromString:string];
    checkString = [dateFormatter stringFromDate:date];
    if ([string isEqualToString:checkString]) {
        return date;
    }

    [dateFormatter setDateFormat:@"m-d-yy"];
    date = [dateFormatter dateFromString:string];
    checkString = [dateFormatter stringFromDate:date];
    if ([string isEqualToString:checkString]) {
        return date;
    }
    [dateFormatter setDateFormat:@"mm/d/yyyy"];
    date = [dateFormatter dateFromString:string];
    checkString = [dateFormatter stringFromDate:date];
    if ([string isEqualToString:checkString]) {
        return date;
    }

    [dateFormatter setDateFormat:@"mm-d-yyyy"];
    date = [dateFormatter dateFromString:string];
    checkString = [dateFormatter stringFromDate:date];
    if ([string isEqualToString:checkString]) {
        return date;
    }
    [dateFormatter setDateFormat:@"m/dd/yyyy"];
    date = [dateFormatter dateFromString:string];
    checkString = [dateFormatter stringFromDate:date];
    if ([string isEqualToString:checkString]) {
        return date;
    }

    [dateFormatter setDateFormat:@"m-dd-yyyy"];
    date = [dateFormatter dateFromString:string];
    checkString = [dateFormatter stringFromDate:date];
    if ([string isEqualToString:checkString]) {
        return date;
    }

    return nil;
}

@end 
```

制作 withLocale 版本不会太难，但坦率地说，我不太了解 Locale 是如何编码的，目前不需要它

# json - Mustache.js 遍历所有数组

> ID：15714113
> 
> 赞同：0
> 
> 时间：2013-03-30T02:04:31.767
> 
> 标签：json, handlebars.js, mustache

我仍在忙于尝试将 JSON 文件设置为 HTML 网站。因此，如果 json 发生更改，则更改会动态加载到 HTML 中。到目前为止，我能够检索内容，甚至请求一些内容。但不是我想要的一切，因为来自 JSON 的标记有点奇怪。

由于跨站点保护，我无法直接发出 JSOP 请求，所以我用我在某处看到的一个小技巧解决了这个问题。我创建了一个简单的 test.php：

这样我就绕过了跨站点保护，一切正常。唯一的问题是我无法遍历我想要的所有数组。目前我正在使用以下脚本进行 JSOP 调用并获取数据。输出是一个很好的描述`<li></li>`

```
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
</head>
<body>
    <ul id="episodes">
    </ul>
    <script src="http://cdnjs.cloudflare.com/ajax/libs/mustache.js/0.7.0/mustache.min.js"></script>
    <script src="http://ps3scenefiles.com/json/handlebars.js"></script>
    <script src="http://cdnjs.cloudflare.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
    <script id="episodes-template" type="text/template">

            <li>{{description}}</li>

    </script>
    <script>
        $(function() {
            $.getJSON('http://ps3scenefiles.com/json/test.php', function(data) {
                var template = $('#episodes-template').html();
                var info = Mustache.to_html(template, data);
                $('#episodes').html(info);
            });
        });
    </script>
</body>
</html> 
```

But when you open the link to the JSON ([http://ps3scenefiles.com/json/test.php](http://ps3scenefiles.com/json/test.php)), you see that the Episodes array has another array with just numbers. How can i create a list like

```
Episode: 1 
     Id:13605 Active:true Lang:en Link: url
     Id:16525 Active:true Lang:ru Link: url
Episode: 2 
     Id:14854 Active:true Lang:en Link: url
     Id:19445 Active:true Lang:ru Link: url 
```

So to be clear, how can i do a mustache (or handlebars) templating to make it look like the example?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T05:06:26.717

You can use Handlebars helper as mentioned in [this answer](https://stackoverflow.com/a/8962186/326543)

[Here is a fiddle](http://jsfiddle.net/SzAxf/1/) without styling, that prints out the data you expect (sort of, not all fields).

Here is the helper function -

```
Handlebars.registerHelper('eachkeys', function(context, options) {
  var fn = options.fn, inverse = options.inverse;
  var ret = "";

  var empty = true;
  for (key in context) { empty = false; break; }

  if (!empty) {
    for (key in context) {
        ret = ret + fn({ 'key': key, 'value': context[key]});
    }
  } else {
    ret = inverse(this);
  }
  return ret;
}); 
```

# c# - 字符串“去连接”

> ID：15714119
> 
> 赞同：2
> 
> 时间：2013-03-30T02:06:11.027
> 
> 标签：c#, string

我有两个这样的字符串

```
string s = "abcdef";
string t = "def"; 
```

我想从 s 中删除 t。我可以这样做吗？

```
s = s - t? 
```

**编辑**

我将有两个字符串 s 和 t，t 将是 s 的结束子字符串。我想从 s 中删除 t。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-30T02:08:19.447

不，但你可以这样做：

```
var newStr = "abcdef".Replace("def", ""); 
```

根据您的评论，如果您只想删除尾随模式，您可以使用正则表达式：

```
var newStr = Regex.Replace("defdefdef", "(def)$", ""); 
```

'$' 将锚定到字符串的末尾，因此它只会删除最终的 'def'

将其转换为扩展方法：

```
public static String ReplaceEnd(this string input, string subStr, string replace = "")
{
    //Per Alexei Levenkov's comments, the string should
    // be escaped in order to avoid accidental injection
    // of special characters into the Regex pattern
    var escaped = Regex.Escape(subStr);

    var pattern = String.Format("({0})$", escaped);
    return Regex.Replace(input, pattern, replace);
} 
```

对上面的代码使用此方法将变为：

```
string s = "abcdef";
string t = "def";

s = s.ReplaceEnd(t); // Ta Da! 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-30T02:13:44.043

Like this:

```
if (s.EndsWith(t))
{
    s = s.Substring(0, s.LastIndexOf(t));
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-30T02:12:19.080

```
s = s.Substring(0, s.Length - t.Length) 
```

`Substring`有两个参数：开始和长度。您想从 的开头取东西`abcdef`，即 index `0`，并且您想取所有字符减去 from 的字符`t`，这是两个字符串的长度差。

This assumes the OP's contract of "t will be an ending substring of s". If in fact this precondition is not guaranteed, it needs `if (s.EndsWith(t))` around it.

# android - 检查每项活动的互联网连接？

> ID：15714122
> 
> 赞同：3
> 
> 时间：2013-03-30T02:06:39.043
> 
> 标签：android

我在这个过程中做的有点晚。我有很多屏幕/活动都需要连接到互联网，不管它的 wifi 或网络是否可以工作。我可以很好地检测到连接，但是我是否需要对每个活动都执行此检查，或者是否有一种全局方法可以为我的应用程序执行此操作？

只是想在添加大量代码之前我会问。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-30T02:10:09.657

您可以`Activity`使用类似`InternetActivity`的子类，并在其中`onResume`检查连接。然后，您的应用程序中需要互联网的所有活动都应该是 的子类`InternetActivity`，并且将通过调用`super.onResume()`或根本不覆盖来自动进行检查`onResume`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-30T04:02:39.147

```
public class CheckNetwork {

private static final String TAG = CheckNetwork.class.getSimpleName();

public static boolean isInternetAvailable(Context context)
{
    NetworkInfo info = (NetworkInfo) ((ConnectivityManager)
    context.getSystemService(Context.CONNECTIVITY_SERVICE)).getActiveNetworkInfo();

    if (info == null)
    {
         Log.d(TAG,"no internet connection");
         return false;
    }
    else
    {
        if(info.isConnected())
        {
            Log.d(TAG," internet connection available...");
            return true;
        }
        else
        {
            Log.d(TAG," internet connection");
            return true;
        }

    }
}
 } 
```

检查网络

在你的活动中

```
 if(CheckNetwork.isInternetAvailable(MainActivtiy.this))  //if connection available
  {

  } 
```

每次您想检查互联网传递时，如果可用，活动上下文返回 true，否则返回 false。

[检测 Android 上是否有可用的 Internet 连接](https://stackoverflow.com/questions/4238921/android-detect-whether-there-is-an-internet-connection-available)。

[如何检查Android上的互联网访问？InetAddress 永远不会超时](https://stackoverflow.com/questions/1560788/how-to-check-internet-access-on-android-inetaddress-never-timeouts)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-30T03:11:31.460

您可以想到另一个有趣的解决方案，即使用广播接收器。所以现在你计划检查很多次。而不是这样做，您将仅在网络连接更改时检查，并相应地通知您的网络模块。

```
IntentFilter filter = new IntentFilter(ConnectivityManager.CONNECTIVITY_ACTION);        
registerReceiver(YOUR_RECEIVER, filter); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-30T02:55:45.083

正如 Tushar[上面](https://stackoverflow.com/a/15714144/1039555)回答的那样，从类似的东西继承`InternetActivity`很好，但`onResume`除非您使用的某些服务经常需要互联网连接，否则您不应该签入它。相反，当像按钮点击这样的事件发生时检查它以转到下一个活动；因此，无需开始其他活动，您就可以显示 toast 来检查互联网连接。您应该为任何需要互联网的活动执行此操作，因为整个活动很少需要持续的互联网连接。

您可以在该超类中添加此方法：

```
private boolean isInternetConnected() {
    ConnectivityManager cm = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);
    return cm.getActiveNetworkInfo() != null
            && cm.getActiveNetworkInfo().isConnectedOrConnecting();

} 
```

然后：

```
if(isInternetConnected())
     //to the internet thing
else
     //display toast 
```

# iphone - 无法将两张图片合并为一张

> ID：15714124
> 
> 赞同：0
> 
> 时间：2013-03-30T02:07:04.783
> 
> 标签：iphone, ios, objective-c, xcode, image

我正在尝试将两个图像合并为一个，并将该图像保存到相机胶卷上。但它只是显示一个空白图像。任何人都可以帮忙吗？

我的代码：

```
-(void)SaveFinalImage{    
    UIGraphicsBeginImageContext(self.view.bounds.size);
    [self.view.layer renderInContext:UIGraphicsGetCurrentContext()];
    UIImage *savedImg = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();
    UIImageWriteToSavedPhotosAlbum(savedImg, nil, nil, nil);     
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-30T02:11:19.787

我在我的应用程序中使用了这个。

```
UIImage *bottomImage = [UIImage imageNamed:@"bottom.png"]; //background image
UIImage *image       = [UIImage imageNamed:@"top.png"]; //foreground image

CGSize newSize = CGSizeMake(width, height);
UIGraphicsBeginImageContext( newSize );

// Use existing opacity as is
[bottomImage drawInRect:CGRectMake(0,0,newSize.width,newSize.height)];

// Apply supplied opacity if applicable
[image drawInRect:CGRectMake(0,0,newSize.width,newSize.height) blendMode:kCGBlendModeNormal alpha:0.8];

UIImage *newImage = UIGraphicsGetImageFromCurrentImageContext();

UIGraphicsEndImageContext(); 
```

有关更多信息，请参阅我关于同一主题的相关答案。[iOS - 合并两个不同大小的图像](https://stackoverflow.com/questions/9208951/ios-merging-two-images-of-different-size/9209044#9209044)

# r - R中可扩展的结转以创建每日时间序列

> ID：15714125
> 
> 赞同：0
> 
> 时间：2013-03-30T02:07:12.373
> 
> 标签：r, bigdata, zoo, data-manipulation

我正在尝试根据当前仅定期观察到的内容创建每日时间序列数据集。我可以成功地为单个案例执行所需的操作，但无法确定如何扩展到整个数据集。例如：

```
 UNIT <- c(100,100, 200, 200, 200, 200, 200, 300, 300, 300,300)
        STATUS <- c('ACTIVE','INACTIVE','ACTIVE','ACTIVE','INACTIVE','ACTIVE','INACTIVE','ACTIVE','ACTIVE',
                    'ACTIVE','INACTIVE') 
        TERMINATED <- as.Date(c('1999-07-06' , '2008-12-05' , '2000-08-18' , '2000-08-18' ,'2000-08-18' ,'2008-08-18',
                        '2008-08-18','2006-09-19','2006-09-19' ,'2006-09-19' ,'1999-03-15')) 
        START <- as.Date(c('2007-04-23','2008-12-06','2004-06-01','2007-02-01','2008-04-19','2010-11-29','2010-12-30',
                   '2007-10-29','2008-02-05','2008-06-30','2009-02-07'))
        STOP <- as.Date(c('2008-12-05','2012-12-31','2007-01-31','2008-04-18','2010-11-28','2010-12-29','2012-12-31',
                  '2008-02-04','2008-06-29','2009-02-06','2012-12-31'))
        TEST <- data.frame(UNIT,STATUS,TERMINATED,START,STOP)
        TEST 
```

这是对间隔单位的观察：

```
 UNIT   STATUS TERMINATED      START       STOP
1   100   ACTIVE 1999-07-06 2007-04-23 2008-12-05
2   100 INACTIVE 2008-12-05 2008-12-06 2012-12-31
3   200   ACTIVE 2000-08-18 2004-06-01 2007-01-31
4   200   ACTIVE 2000-08-18 2007-02-01 2008-04-18
5   200 INACTIVE 2000-08-18 2008-04-19 2010-11-28
6   200   ACTIVE 2008-08-18 2010-11-29 2010-12-29
7   200 INACTIVE 2008-08-18 2010-12-30 2012-12-31
8   300   ACTIVE 2006-09-19 2007-10-29 2008-02-04
9   300   ACTIVE 2006-09-19 2008-02-05 2008-06-29
10  300   ACTIVE 2006-09-19 2008-06-30 2009-02-06
11  300 INACTIVE 1999-03-15 2009-02-07 2012-12-31 
```

我想在开始和结束日期的整个范围内*每天取每个单位并复制“状态”和“终止”（以及大型数据集中的 N 个其他协变量）上的值。*为一张唱片做这件事......

```
 A <-  seq(TEST$START[1], TEST$STOP[1], "days") #vector of relevant date sequences 

        #keeping the old data, now with daily date "fill" 
        B <- matrix(NA, length(A), dim(TEST[-c(4,5)])[2]) 
        C <- data.frame(A,B)

        #carry forward observations on covariates through date range 
        TEST[-c(4,5)][1,]  #note terminated has the proper date status:
        UNIT STATUS TERMINATED
         1  100 ACTIVE 1999-07-06

        #now the TERMINATED loses its 'date' status for some reason
        C[-c(1)][1,] <- TEST[-c(4,5)][1,] 
        D <-  na.locf(C)
        colnames(D)[2:4] <-colnames(TEST)[1:3]
        colnames(D)[1] <- "DATE"
        head(D)

        DATE UNIT STATUS TERMINATED
1 2007-04-23  100      1      10778
2 2007-04-24  100      1      10778
3 2007-04-25  100      1      10778
4 2007-04-26  100      1      10778
5 2007-04-27  100      1      10778
6 2007-04-28  100      1      10778 
```

第一行的观测值在 START 到 END 的范围内重复，并创建一个新向量：整个期间的每日时间序列。我想对第 2 行执行此操作，将其绑定到 D 等等，按 UNIT 分析。我用 na.locf 编写了一个 for 循环，但未能成功进行概括：

```
for(i in 1:nrow(TEST)){
  for(j in 0:nrow(TEST)-1) {
  A <-  seq(TEST$START[i], TEST$STOP[i], "days")

  B <- matrix(NA, length(A), dim(TEST[-c(4,5)])[2])
  C <- data.frame(A,B)

  C[-c(1)][1,] <- TEST[-c(4,5)][i,] 
  assign(paste("D",i, sep=""),na.locf(C)) 

  #below here the code does not work. R does not recognize i and j as I intend
  #I haven't been able to overcome this using assign, evaluate etc. 
  colnames(Di)[2:4] <-colnames(TEST)[1:3]
  colnames(Di)[1] <- "DATE"

  D0 <- matrix(NA, 1, dim(Di)[2])
  assign(paste("D", j, sep = ""),Dj)
  rbind(Di,Dj)

   }
  } 
```

单一记录“解决方案”的明显问题是处理“终止”日期。就在使用 na.locf 之前，它失去了它的日期状态。

我希望有一种更好的方式来看待这个问题，而我只是因为无知而把自己埋在了复杂之中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T09:51:04.967

在 SQL 中比较容易做到，所以可以使用`sqldf`，它将 data.frames 视为 SQL 表。

```
dates <- data.frame( date = seq.Date( min(TEST$START), max(TEST$STOP), by = 1 ) )
library(sqldf)
result <- sqldf( "
  SELECT *
  FROM TEST, dates
  WHERE START <= date AND date <= STOP
" )
head( result ) 
```

如果数据很大，可能值得将数据存储在数据库中，并在那里进行计算。

```
# With SQLite, a database is just a file
library(RSQLite)
connection <- dbConnect( SQLite(), "/tmp/test.db" )  

# Copy the data.frames to the "Test" and "Dates" table.
# When transfering data across systems, it is often easier 
# to convert dates to strings.
convert_dates <- function(d) {
  as.data.frame( lapply( 
    d, 
    function(u) if( "Date" %in% class(u) ) as.character(u) else u 
  ) ) 
}
dbWriteTable(connection, "Test",  convert_dates(TEST),  row.names = FALSE )
dbWriteTable(connection, "Dates", convert_dates(dates), row.names = FALSE )

# Check how many rows the query has: it could be 
# that the result does not fit in memory
dbGetQuery( connection, "
  SELECT COUNT(*) 
  FROM   Test, Dates 
  WHERE  start <= date AND date <= stop
" )

# If it is reasonable, retrieve all the data
dbGetQuery( connection, "
  SELECT * 
  FROM   Test, Dates 
  WHERE  start <= date AND date <= stop
" )

# If not, only retrieve what you need
dbGetQuery( connection, "
  SELECT * 
  FROM   Test, Dates 
  WHERE  start <= date AND date <= stop
  AND    '2013-04-01' <= date AND date <= '2013-04-30'
" ) 
```

# c - 如何更新命令行输出？

> ID：15714126
> 
> 赞同：10
> 
> 时间：2013-03-30T02:07:32.443
> 
> 标签：c, linux, command-line

在 Linux 中，在`stdout`命令行中，我想更新特定区域，例如`apt-get`输出：

```
54% [Waiting for headers] [Waiting for headers]        211 kB/s 3s 
```

*百分比*、*kB/s*和*second*将每秒更新。

如果我们使用`printf`然后我们将得到多行输出它们。我试过以下`printf`：

```
printf("\e[1;1H\e[2J"); 
```

但它会清除所有输出。

我的问题是如何更新特定区域并保持其他区域稳定？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-30T02:09:28.447

使用回车。它会将光标移回行首，您可以从那里覆盖之前行中的内容。例如：

```
printf("Hello, world!\rX"); 
```

将显示为：

```
Xello, world! 
```

`stdout`如果您希望它可见，请确保经常冲洗：

```
fflush(stdout); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-30T06:53:04.203

In addition (of the useful `\r` & `fflush` [advice](https://stackoverflow.com/a/15714139/841108) above), if you want a full screen console output, consider using [ncurses](http://www.gnu.org/software/ncurses/). If you want an editable input line, the [GNU readline](http://www.gnu.org/software/readline) library is useful too!

# java - 下拉单击在 Selenium RC 中不起作用

> ID：15714128
> 
> 赞同：0
> 
> 时间：2013-03-30T02:07:40.983
> 
> 标签：java, selenium, selenium-rc, selenium-ide

我正在尝试在 selenium 中自动化测试脚本。**要自动化的活动场景：**

1.  它应该首先自动打开一个页面 URL。
2.  点击左侧导航。
3.  然后页面会填充一个下拉列表，它应该从下拉列表中选择一个固定值（比如 = 公司）
4.  单击页面底部的创建按钮。

在我的情况下，代码一直在工作，直到下拉的人口，但之后代码无法单击创建按钮作为下一个操作。我在命令控制台中收到的错误消息如下：

> 元素名称 = 在会话 c48334c30....96ed 上找不到创建

这是我的代码：

```
public class testing {

    Selenium selenium = null;

    @Test
    public void submit() throws Exception {
        selenium = new DefaultSelenium("localhost", 4545, "*firefox", "URL");
        selenium.start();
        selenium.open("URL");
        selenium.windowFocus();
        selenium.windowMaximize();
        selenium.click("link=Work with company names");
        selenium.waitForPageToLoad("30000");
        selenium.select("//select[@name='company_id']", "label=company");
        selenium.waitForPageToLoad("3000");
        selenium.click("name = create");

    }
} 
```

请向我提供解决此问题的建议，因为我无法理解为什么无法单击名为“创建”的按钮。我也尝试使用`selenium.click("xpath=//button[matches(@id,'.*create')]");`而不是，`selenium.click("name = create")`但它也不起作用。

请让我知道这个错误可能是什么问题，我该如何解决？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T07:28:01.673

1）如果您提供页面的html代码会很好。

2) 在单击任何元素（在某些操作后加载）之前，我建议使用 WaitForElementPresent（来自 Selenium IDE），即确保该元素确实存在。Selenium 的工作速度相当快，它可能会在元素实际加载之前尝试单击该元素。

你可以使用这样的东西：

```
public bool waitForElementPresent(string Xpath) {
bool present = false;
for (int second = 0; ; second++) {
if (second >= 5) {
break;
}
if (IsElementPresent(Xpath)) {
present = true;
break;
}
Thread.Sleep(1000);
}
return present;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T16:52:07.567

试试这个

```
selenium.click("//*[contains(@name,'create')]"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-23T09:53:31.510

As you are using: selenium.waitForPageToLoad("3000"); Selenium is waiting for page to load. You want to add a pause, though thread.sleep isn't the best practise it can still work for you.

# java - Changing a value for debug and production in java/android

> ID：15714130
> 
> 赞同：0
> 
> 时间：2013-03-30T02:08:04.487
> 
> 标签：java, android, debugging

I have a java statement like this:

```
int MAX_CACHE_AGE = TimeUnit.DAYS.toMillis(14); 
```

And I want to have a max cache age of 0 when debugging. However, I also want to minimize the complexity of my build. What are some ways I can do this? How do you do this? I am developing for Android so if your method is Android specific, tell my anyway.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-30T03:16:43.700

Initialize this variable in the onCreate() method if it's in an application component, or in the constructor if it's in a normal Java class. The Android tools have a BuildConfig class that is auto generated. You can use its DEBUG field to alter the value.

```
if(BuildConfig.DEBUG) {
    MAX_CACHE_AGE = TimeUnit.DAYS.toMillis(0);
} else {
    MAX_CACHE_AGE = TimeUnit.DAYS.toMillis(14);
} 
```

# cuda - 具有减少功能的 Cuda 内核 - 2 个矩阵的点积的逻辑错误

> ID：15714131
> 
> 赞同：0
> 
> 时间：2013-03-30T02:08:18.770
> 
> 标签：cuda, gpu, reduction

我刚刚开始使用 CUDA，并试图将我的大脑包裹在 CUDA 缩减算法上。就我而言，我一直在尝试获得两个矩阵的点积。但我只得到了大小为 2 的矩阵的正确答案。对于任何其他大小的矩阵，我都弄错了。

这只是测试，所以我保持矩阵大小非常小。只有大约 100 个，所以只有 1 个块可以满足所有要求。任何帮助将不胜感激。谢谢！

这是常规代码

```
float* ha = new float[n]; // matrix a
float* hb = new float[n]; // matrix b
float* hc = new float[1]; // sum of a.b

float dx = hc[0];
float hx = 0;
// dot product
for (int i = 0; i < n; i++)
    hx += ha[i] * hb[i]; 
```

这是我的 cuda 内核

```
__global__ void sum_reduce(float* da, float* db, float* dc, int n)
 {
     int tid = threadIdx.x;
     dc[tid] = 0;
     for (int stride = 1; stride < n; stride *= 2) {
         if (tid % (2 * stride) == 0)
                 dc[tid] += (da[tid] * db[tid]) + (da[tid+stride] * db[tid+stride]);
         __syncthreads();
     }
 } 
```

我的完整代码： http: [//pastebin.com/zS85URX5](http://pastebin.com/zS85URX5)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T05:18:59.453

希望你能弄清楚为什么它适用于 n=2 的情况，所以让我们跳过它，看看为什么它在其他情况下会失败，让我们选择 n=4。当 n = 4 时，您有 4 个线程，编号为 0 到 3。

在 for 循环的第一次迭代中，stride = 1，因此通过 if 测试的线程是线程 0 和 2。

```
thread 0:   dc[0] += da[0]*db[0] + da[1]*db[1];
thread 2:   dc[2] += da[2]*db[2] + da[3]*db[3]; 
```

到现在为止还挺好。在 for 循环的第二次迭代中，步幅为 2，因此通过 if 测试的线程是线程 0（仅）。

```
thread 0:   dc[0] += da[0]*db[0] + da[2]*db[2]; 
```

但这没有意义，也不是我们想要的。我们想要的是这样的：

```
dc[0] += dc[2]; 
```

So it's broken. I spent a little while trying to think about how to fix this in just a few steps, but it just doesn't make sense to me as a reduction. If you replace your kernel code with this code, I think you'll have good results. It's not a lot like your code, but it was the closest I could come to something that would work for all the cases you've envisioned (ie. n < max thread block size, using a single block):

```
 // CUDA kernel code
 __global__ void sum_reduce(float* da, float* db, float* dc, int n)
 {
     int tid = threadIdx.x;
     // do multiplication in parallel for full width of threads
     dc[tid] = da[tid] * db[tid];
     // wait for all threads to complete multiply step
     __syncthreads();
     int stride = blockDim.x;
     while (stride > 1){
       // handle odd step
       if ((stride & 1) && (tid == 0)) dc[0] += dc[stride - 1];
       // successively divide problem by 2
       stride >>= 1;
       // add each upper half element to each lower half element
       if (tid < stride) dc[tid] += dc[tid + stride];
       // wait for all threads to complete add step
       __syncthreads();
       }
 } 
```

Note that I'm not really using the `n` parameter. Since you are launching the kernel with `n` threads, the `blockDim.x` built-in variable is equal to `n` in this case.

# matlab - 如何在MATLAB中扩展ANFIS隶属函数的上下限？

> ID：15714137
> 
> 赞同：0
> 
> 时间：2013-03-30T02:09:26.327
> 
> 标签：matlab, fuzzy-logic, neural-network, unsupervised-learning

我正在尝试在 MATLAB 上实现 ANFIS。我的输入数据操作范围是 0-180，但是 MATLAB 生成的 ANFIS 隶属函数限制在 0-10 之间。如何将其从 0 扩展到 180？另一个问题是我的 ANFIS 输入数据类似于“data = [80 20 40 50 15];” 由于输入，输出隶属函数未正确显示。请帮我解决这些问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T09:16:43.333

我建议在 MatLab中使用**ANFIS 工具箱。**你可以在这里找到描述：http: [//www.mathworks.com/help/fuzzy/anfis-and-the-anfis-editor-gui.html#FP43334](http://www.mathworks.com/help/fuzzy/anfis-and-the-anfis-editor-gui.html#FP43334)

如果您有训练数据（您需要它来训练 ANFIS），那么输入隶属函数将扩展到您的数据包含的范围。在这个工具箱上构建一个 ANFIS 更容易，然后输入各个命令....问候，塔马斯

# visual-studio-2010 - Dev->Stage->Prod 与 Azure 网站的 Git 部署

> ID：15714149
> 
> 赞同：2
> 
> 时间：2013-03-30T02:10:49.797
> 
> 标签：visual-studio-2010, azure, azure-git-deployment

使用适用于 Azure 的 Git 部署，我应该如何最好地完成以下部署目标？

*   在本地工作时轻松切换为使用伪造的内存数据或（最终）真实数据的非生产快照
*   部署到 Azure 上的暂存环境，这样一开始我可以使用虚假的内存数据，最终转移到真实数据的非生产快照。
*   使用真实数据部署到生产环境

我目前使用 Github 和暂存分支部署到暂存 Azure 网站。由于我部署到公共存储库，因此 git 会忽略 web.config 文件。（**编辑**：我刚刚了解到忽略 web.config 实际上会导致 azure 上的部署错误）

任何帮助/建议表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T23:57:10.500

它实际上应该比这更简单。请看[这个页面](https://github.com/projectkudu/kudu/wiki/Managing-settings-and-secrets)。基本上，这个想法是您在 Azure 门户中设置一些 AppSettings 以覆盖提交给您的存储库的默认值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T07:47:39.497

嗯......这就是我现在所做的对我有用的事情。

*   为了在本地快速切换伪造的内存数据，我使用了编译符号`LOCAL`和预处理器指令`#if LOCAL`。

*   部署到 Azure 时使用相同的编译符号，因此我可以处理假数据，直到我准备好切换到真实数据库。如果我真的想更轻松地切换它，我也可以使用应用程序设置。

挑战是在本地保留一个带有“秘密”（如连接字符串）的 web.config，而不是将其暴露给 Github。我将它添加到 .gitignore，但随后我的部署在 Azure 上开始失败，因为它找不到 web.config。只是通过 ftp 将其复制到 wwwroot 并没有帮助 - Azure 正在存储库中寻找 web.config。

因此，为了完成这项工作，我“稍微”改变了部署过程，首先将 Web.config 从 wwwroot 复制到存储库，然后再运行默认的 deploy.cmd。这很简单——这就是你要做的：

1.  `.deployment`使用以下内容在存储库的根目录中创建一个文件：

    [配置] 命令 = deploy.my.cmd

2.  `deploy.my.cmd`使用以下脚本创建：

    xcopy %DEPLOYMENT_TARGET%\Web.config %DEPLOYMENT_SOURCE%\\ /Y

    部署.cmd

现在，我在本地有带有秘密的 web.config。Git 忽略此文件。我通过 FTP 将正确的 web.config 上传到 Azure，每当我部署时都会使用它。

# java - 将 JFrame 设置为完全不活动，直到另一个 Jframe 关闭

> ID：15714151
> 
> 赞同：1
> 
> 时间：2013-03-30T02:10:59.503
> 
> 标签：java, swing, button, jframe

我是 Java 新手。

然而，我的项目与;

1\. Main **JFrame1** &
2\. 在 JFrame1 我有一个JFrame2.setVisible(true);的**Button1** &
3\. 另一个**JFrame2**。

我需要知道的是：当用户点击 JFrame1->Button1

1.  如何使 JFrame1 完全处于非活动状态，以便用户在 JFrame2 处于活动状态时不能单击 JFrame1 上的按钮或聚焦 JFrame1。

2.  我需要设置，当 JFrame2 关闭时，以上所有操作都可以单击/聚焦。

谢谢你 ！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-30T02:13:59.340

看看使用[模态对话框](http://docs.oracle.com/javase/tutorial/uiswing/components/dialog.html)。它将防止焦点切换到其父窗口。

# php - 网格列表视图 + 无限滚动

> ID：15714152
> 
> 赞同：0
> 
> 时间：2013-03-30T02:11:14.940
> 
> 标签：php, jquery, css, ajax

我在 wordpress 存档后循环中有简单的代码来制作网格视图，我想添加 3column-grid / 2column-grid (toggle) 切换器

这是我的主要代码：

```
<?php get_header(); ?>
<div id="content-archive" class=".grid col-940">

<?php if (have_posts()) : ?>

    <?php get_template_part( 'loop-header' ); ?>

    <!--// show archive posts in 3 columns -->
    <?php $c=0; while (have_posts()) : the_post(); $c++;
        if ( $c == 3 ) {
            $style = 'col-300wrap fit';
            $c = 0;
        }
        else $style='col-300wrap';
    ?>

        <?php responsive_entry_before(); ?>
        <div id="post-<?php the_ID(); ?>" <?php post_class($style); ?>>       
            <?php responsive_entry_top(); ?>

            <div class="post-entry">
                <?php if ( has_post_thumbnail()) : ?>
                    <a href="<?php the_permalink(); ?>" title="<?php the_title_attribute(); ?>" >
                <?php the_post_thumbnail('medium', array('class' => 'archive')); ?>
                    </a>
                <?php endif; ?>
                <div class="trumpai"><?php the_excerpt(); ?></div>
                <?php wp_link_pages(array('before' => '<div class="pagination">' . __('Pages:', 'responsive'), 'after' => '</div>')); ?>
            </div><!-- end of .post-entry -->
            <?php get_template_part( 'post-meta' ); ?>                
            <?php get_template_part( 'post-data' ); ?>

            <?php responsive_entry_bottom(); ?>      
        </div><!-- end of #post-<?php the_ID(); ?> -->       
        <?php responsive_entry_after(); ?>

    <?php 
    endwhile; 

    get_template_part( 'loop-nav' ); 

else : 

    get_template_part( 'loop-no-posts' ); 

endif; 
?>  

</div><!-- end of #content-archive -->
<?php get_footer(); ?> 
```

我需要添加这个函数来显示 2 列网格：

```
<!--// show archive posts in 2 columns -->
<?php $c=0; while (have_posts()) : the_post(); $c++;
    if ( $c == 2 ) {
        $style = 'col-400wrap fit';
        $c = 0;
    }
    else $style='col-400wrap';
?> 
```

除此之外，我需要无限滚动（插件）才能激活。如何将切换（又名）网格/列表视图的代码与无限滚动结合起来，而不构建两个循环（除非切换按钮单击）以节省带宽？

我找到了这个解决方案，但我不知道如何组合整个代码：

```
/*
 *grid.php: <?php echo "grid loop";?>
 *list.php: <?php echo "list loop";?>
 */

$(document).ready(function(){
    $('#toggle-grid').click(function(){
        // hide both loops
        $(".view").hide();
        // check if loop aleady has been generated
        if ($("#grid").html() != "") {
            $("#grid").show();
        } else { // otherwise fetch loop
            $.get("grid.php", function(data) {
                $("#grid").html(data).show();
            });
        }
    });
$('#toggle-list').click(function(){
        // hide both loops
        $(".view").hide();
        // check if loop aleady has been generated
        if ($("#list").html() != "") {
            $("#list").show();
        } else { // otherwise fetch loop
            $.get("list.php", function(data) {
                $("#list").html(data).show();
            });
        }
    });
}); 
```

正如代码作者 Stefanbar 所说：php 代码将在服务器端执行，然后将结果返回给 js 方法。js 方法将等到有东西返回。

有什么建议么？

# html - 在网格中间隔相同大小的项目？

> ID：15714158
> 
> 赞同：0
> 
> 时间：2013-03-30T02:12:30.333
> 
> 标签：html, css

我正在寻找一种与 ie8 兼容的方式来创建网格：

[http://jsbin.com/ihicuz/1/edit](http://jsbin.com/ihicuz/1/edit)

HTML：

```
 <div class="grid">
    <div></div>
    <div></div>
    <div></div>
    <div></div>
    <div></div>
    <div></div>
    <div></div>
    <div></div>
    <div></div>
    <div></div>
    <div></div>
    <div></div>
    <div></div>
    <div></div>
    <div></div>
    <div></div>
  </div> 
```

CSS：

```
.grid{
  background:#DDD;
  width:830px;
  height:830px;
}
.grid>div{
  height:200px;
  width:200px;
  box-sizing:border-box;
  border:1px solid #AAA;
  float:left;
  margin:0 10px 10px 0;
  background:#EEE;
}
.grid>div:nth-child(4n){
  margin-right:0;
} 
```

nth-child 有效（好吧，忽略边缘底部的溢出），但不适用于 ie8。

是否有一个干净的解决方案可以在不更改 html 标记的情况下在这些网格项之间获得相等的间距？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T02:16:41.150

Selectivizr 处理了许多与 CSS3 选择器的 IE 兼容性问题。

[http://selectivizr.com/](http://selectivizr.com/)

# math - 画一颗星 - 正弦和余弦实际上指的是什么？

> ID：15714159
> 
> 赞同：1
> 
> 时间：2013-03-30T02:12:34.603
> 
> 标签：math

我得到了一个用 C# 编写的简单程序。一些数学已经提供，所以你不必自己解决。但是，我不喜欢在不了解它实际在做什么的情况下就使用它。我一切正常。我只是想了解它。

例如：

```
angle = (360.00 / 8) * PI / 180;  
size = 150  
x = 150;  
y = 150; 
```

然后：

```
x1 = x + size*cos(angle * 1);  
y1 = y + size*sin(angle * 1); 
```

我假设上述公式使用 y = mx + c 的形式计算坐标，其中 sin/cos 等于梯度 (m)。但是参考点是什么？它是否计算每个“楔形”外侧的三角形？我对弧度知之甚少，这就是我遇到麻烦的原因。

输出示例：
![样品星](../Images/e408e251c0b9ddac52d205b37967f3c0.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-30T02:35:13.847

看起来您只是在指定每个段的端点。

理解正弦和余弦的一个好方法是通过[单位圆](http://en.wikipedia.org/wiki/Unit_circle)。这是一张来自维基百科的图片： ![在此处输入图像描述](../Images/6a1f2a901f50be978d897989ed760902.png)

为了解释这一点，该点可以在圆上的不同位置。这可以用两种方式来描述。首先是*t*是角度，还需要知道圆的半径为1，这里就是*单位*圆的意思。这是谈论圆上一个点的位置的自然方式。不过，也可以用*x*和*y*来描述点的位置。如果你这样做，你会发现*x=cos(t)*和*y=sin(t)*。这基本上是*sin*和*cos*的定义，所以没有太多要理解的，只是如果位置在*t方面*然后是角度，那么根据*x*和*y*的位置是*cos(t)*和*sin(t)*。

所以看起来你只是在指定每个段的端点。

如您所知，*t*可以用度数或弧度表示。弧度是这里的自然值，所以最好用弧度来考虑，而 t，这些方程必须以弧度为单位才能计算出方程。在与人交谈时，度数很有用，但在数学中，最好用弧度来思考。弧度，顺便说一句，只是圆弧的圆周，所以单位圆的一路是*2pi*弧度，中间是*pi*弧度等。

如果圆不是单位半径，则用 和 代替 x=cos(t) 和 y=sin(t `x=R*cos(t)`) `y=R*sin(t)`。如果圆不以原点为中心，则有`x=x0+R*cos(t)`和`y=y0+R*sin(t)`。

这是Python中的一些代码：

```
from numpy import *
import matplotlib.pyplot as plt

n_segments = 8

angle_step = 2*pi/n_segments

for i in range(n_segments):
    angle = angle_step*i
    xa, ya = cos(angle), sin(angle)  # convert the angles into the x,y representation
    plt.plot(xa, ya, 'ob', markersize=15)
    plt.plot((0, xa), (0, ya), 'g')  # plot the line between the two endpoints

plt.show() 
```

![在此处输入图像描述](../Images/a6fef52664e48c876590aa2a7f9ce455.png)

我希望现在很清楚这不是`y=mx+b`关于线条的。这里的线条是由绘图程序为您完成的，您只需提供线段的端点。

# c# - .NET 的跨平台音频库

> ID：15714162
> 
> 赞同：11
> 
> 时间：2013-03-30T02:12:49.180
> 
> 标签：c#, .net, audio, microphone

要求：

*   实时从麦克风获取原始输入
*   实时播放原始输入

我似乎无法从谷歌搜索中找到太多关于它的信息。有没有人用过这样的东西？

我正在使用 C#，它需要在 Windows、Linux 和 Mac 上工作，后两者使用 Mono。

我可能愿意使用 p/invoke，但我对本机代码并不是特别熟悉，而且会很困难。如果有人可以建议一个本地库，我会试一试。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-05-14T20:58:45.057

[ManagedBass](https://github.com/ManagedBass/ManagedBass)是新的 .NET 跨平台包装器，用于具有 MIT 许可证的 un4seen Bass 库。它不仅是包装器——它还有客观的 API。看看[这篇](https://managedbass.wordpress.com/2016/04/22/hello-world/)博文。

这是使用包装器 API 播放文件的示例：

```
using ManagedBass;

class Program
{
    static void Main()
    {
        Bass.Init(); // Initialize with default options.

        int handle = Bass.CreateStream("YOUR_FILE.mp3");

        Bass.ChannelPlay(handle); // Begin Playback.

        Console.ReadKey(); // Wait till user presses a Key.

        Bass.ChannelStop(handle); // Stop Playback.

        Bass.ChannelFree(handle); // Free the Stream.

        Bass.Free(); // Free the device.
    }
} 
```

使用目标 API 也是如此：

```
using ManagedBass;

class Program
{
    static void Main()
    {
        using (var Player = new MediaPlayer()) // Create a Player.
        {
            Player.Load("YOUR_FILE.mp3"); // Load a file.

            Player.Start(); // Begin Playback.

            Console.ReadKey();
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-30T02:38:45.967

BASS.NET 应该是单声道的跨平台，你可以使用它来做你要求的事情，如这个 SO 答案：[https ://stackoverflow.com/a/6796571/2208058](https://stackoverflow.com/a/6796571/2208058)

[http://bass.radio42.com/](http://bass.radio42.com/)

# html - How to center align text over CSS shape?

> ID：15714163
> 
> 赞同：0
> 
> 时间：2013-03-30T02:13:07.403
> 
> 标签：html, css, text, alignment, shape

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T02:26:27.047

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-04T04:40:24.523

Adding text-align:center to the css did it for me. I also used padding-top to add appropriate padding for vertical centering.

# c# - 取消订阅事件并确保不会再次调用处理程序

> ID：15714165
> 
> 赞同：0
> 
> 时间：2013-03-30T02:13:12.040
> 
> 标签：c#, events

我有一个聊天会话类，它有一个 MessageReceived 事件，每当收到消息时就会引发该事件。会话类还有一个 Disconnect 事件来关闭会话并防止接收更多消息。

```
 public class Session
    {
        event EventHandler<string> MessageReceived;
        public void Disconnect();
    } 
```

我订阅了 Session 的 MessageReceived 事件，并在我的处理程序中解码消息，然后使用它来更新应用程序 - 例如.. 一条消息可能包含有关特定用户的更新，或有关用户加入的消息等。

当我想关闭我的应用程序时，我要做的第一件事就是取消订阅 MessageReceived 事件，然后调用 Disconnect。然后我开始清理和处理应用程序使用的所有资源。

现在，如果我没有考虑太多，我可能会假设仅仅因为我取消了 MessageReceived 的订阅并调用了 Disconnect，就不可能再引发任何 MessageReceived 事件。显然情况并非如此。完全有可能在我取消订阅并调用 Disconnect 之前，事件处理程序已经启动。

这里的问题是，在我调用 Disconnect 之后，我会继续清理和处置应用程序资源，但这些资源与我的 MessageReceived 处理程序中可以假设访问的资源相同。这是一个等待发生的未处理异常。

在我调用 Disconnect 之后，我想确定在继续拆卸之前不会再次调用事件处理程序。

SO可以请告诉我在这种情况下的最佳实践是什么，并最好指出.NET框架中遇到和处理这种情况的示例。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T03:10:56.757

如果您担心竞争条件，请使用监视器（锁定）保护关键资源

[线程同步](http://msdn.microsoft.com/en-us/library/ms173179%28VS.80%29.aspx)

**编辑**：您可以使用上面建议的标志，并使用监视器保护标志：

```
object lockThis = new object();
bool isSubscribed = false;
...
lock(lockThis){
  publisher.SomeEvent += handler;
  isSubscribed = true;
}

... then in the handler

lock(lockThis){
   if (isSubscribed){
     // do stuff
   }
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-30T03:45:31.867

在必须处理来自多个来源的刺激的系统中处理此问题的一种标准方法是将所有刺激及其参数汇集到一个线程安全的队列中，然后让一个专用线程处理这些项目。

从那里开始，关闭非常容易。将“停止”事件排入队列，然后处理队列的线程很容易看到停止事件并停止查看队列。

这是 Windows 用于 UI 事件的模型。

因此，如果您有例如 5 个网络接口和一个线程，每个接收数据包并希望确保处理事件的代理以安全的方式执行此操作，那么您就是这样处理它的。虽然这对于您需要的东西来说有点矫枉过正，但它可以帮助您从更一般的角度思考问题。

所以这里有一个想法，假设您的事件处理程序只从一个线程中触发，并且触发关闭的代码不必等待关闭完成；如果没有，这将行不通。无论如何，要关闭，手动触发事件，告诉它消息是假的关闭消息。它将设置一个标志以指示它已关闭，然后取消注册事件处理程序，然后执行关闭调用。假设事件处理程序只发生在一个线程上，您将保证您只会尝试关闭该线程的内部状态。

如果事件可以从多个线程触发，那么这不起作用 - 例如，如果 UI 线程是为关闭而触发它的线程，但套接字接收线程是为真实事件触发它的线程。此外，如果您的关闭启动代码由于某些其他原因必须等待真正的关闭完成，那么这将不起作用，因为它无法等待事件安全地发出信号表明它已完成。如果您将所有真正的关闭代码移到事件处理程序内部，那可能不是问题。

所以这里有另一种处理方式，它有点复杂：当你还在事件处理程序中时，你不能让你的关闭代码继续运行；如果您已经开始关闭，则无法输入事件处理程序。

你需要一些锁。

当你进入你的事件处理程序时，抓住一把锁。如果您获得了锁并发现您的关闭标志已设置，那么就返回。否则，在仍处于锁定状态时，处理您的事件。

当您输入关机代码时，请抓住锁。设置您正在关闭。释放锁。注销事件处理程序并进行清理。

如果您在关闭代码运行时正在处理一个事件，那么关闭代码​​将在锁上阻塞，直到事件完成。

当您处于关闭代码中并持有锁时，可能会发生事件。事件代码将阻塞等待锁。在将关闭标志标记为已设置后，您将释放锁定，然后开始关闭。因此，您将释放锁定，事件代码将唤醒，关闭代码将继续运行，事件代码将看到已设置关闭标志，并且它将退出而不触及任何资源。

# c - 程序在 EOF 后继续从重定向的标准输入读取

> ID：15714167
> 
> 赞同：0
> 
> 时间：2013-03-30T02:13:20.267
> 
> 标签：c, unix, stdin, eof

我的程序应该从文件中读取 unix 命令，执行它，将结果保存到文件中。如果我只是尝试从控制台运行它，则执行没有问题。但是，如果我将输入重定向到文件，它会由于某种原因继续读取。我想我可能没有正确检测到 EOF，但这种方法似乎以前有效。

我试过调试，结果真的很奇怪。或带有输入的文件的示例

```
echo blablabla
true
false 
```

它的输入行将按顺序排列

```
echo blablabla
true
falseecho blablabla 
```

好像它读取了标准输出？还是标准输入？但如果我只是从控制台提供输入，它就可以工作。

```
FILE* script;
script=freopen(argv[argc-1], "r", stdin);
if(script==0){
  printf( "Error 1\n" );
  return 1;
}
int c;

while((c=fgetc(stdin))){
    if(c==EOF || c==4 || c<0){
        c='\n';
        exitLoop=true;
    }
    if(c!='\n'){
        inLine[i]=c;
        inLine[i+1]=0; //shouldn't be needed, but just in case
        i++;
    }else{
        inLine[i]=0;
        printf("inLine: %s i:%d\n\n",inLine,i);
        sleep(1);
        int result= 0;
        result= fork();
        if(result<0){
           printf("Failed creation of a new process. Most likely not enough memory\n");
           return 1;
        }else if(result==0){
           short int ak=childFunction(inLine,logPath,searchPath);
           return ak;
        }else if(result>0){
           int status=0;
           int d=(int)waitpid(result,&status,0);
        }else
           return -1;
        }
        i=0;
        if(exitLoop==true)
        break;
    }
} 
```

编辑：

```
int childFunction(char in[],char logPath[], char searchPath[]){
FILE *logFile= fopen( logPath, "a" );
if(logFile==NULL)
return 1;
char** argv;
int stringCount=1;
char* path;
int i=0,j=0;
for(i=0;in[i]!=0;i++){
    if(in[i]==' ' || in[i]=='\t'){
        in[i]=0;
        stringCount++;
    }
}
argv = malloc(sizeof(char*)*(stringCount+1));
i=0;
argv[0]=in;
j++;
while(j<stringCount){
    if(in[i]==0){
        argv[j]=in+i+1;
        j++;
    }
    i++;
}
argv[stringCount]=NULL;
int processId=fork();
if(processId<0){
    printf("Error while forking.\n");
    exit(1);
}else if(processId==0){
    return execv(in,argv);
}
int c=0;
waitpid(processId,&c,0);
c=errno;
fprintf(logFile,"%d: %s\n", c, in);
fclose(logFile);
free(argv);
if(c!=0)
return(1);
else
return(0);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T02:23:08.653

Your issue is that `fgetc()` returns an `int`, not `char`. Since you want to be able to read any `char` (i.e. any byte) `fgetc()` will return the `unsigned char` value that was entered. `EOF` is defined as being less than 0, so that it can be distinguished.

You need to define `c` as an `int` so that you can identify the `EOF`, otherwise it will overlap with some valid character's value and as you discovered may not be detectable at all (if `char` is unsigned).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T13:03:57.920

Okay. No idea what caused the problem. I did manage to go around it however, by reading the length of file beforehand, and simply exiting the loop after x characters were read.

# javascript - 使用 javascript 在另一个窗口中打开链接

> ID：15714171
> 
> 赞同：0
> 
> 时间：2013-03-30T02:14:02.810
> 
> 标签：javascript, html, hyperlink, window.open

假设我有一个 HTML 页面，它包含数百个链接。当任何人点击这些链接时，它们将在同一个窗口中加载。

我希望它在另一个窗口中打开。我知道我可以`target`用于每个链接：

```
<a href="http://www.example1.com/" target="_blank">My Text1</a>
<a href="http://www.example2.com/" target="_blank">My Text2</a>
<a href="http://www.example3.com/" target="_blank">My Text3</a> 
```

Howeder，如果可能的话，我更喜欢使用 JavaScript。是否有可能用 JavaScript 做到这一点，如果可以，怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T02:16:39.407

是的。使用这样的东西：

```
var newtab = window.open('http://www.example1.com/', '_blank');

newtab.focus(); 
```

根据特定的浏览器，这可能会在新选项卡或新窗口中打开，但我不知道有什么方法可以更具体地控制它。

**编辑** 或者您是否要求一种方法来设置页面上所有链接的行为？然后，您可以在页面加载时将正确的目标添加到所有这些目标。

使用 jQuery：http: [//jsfiddle.net/b8hdv/](http://jsfiddle.net/b8hdv/)

```
$(document).ready(function() {
    $('a').attr('target', '_blank');
}); 
```

...或没有 jQuery：http: [//jsfiddle.net/uFvUS/](http://jsfiddle.net/uFvUS/)

```
window.onload = function(e) {
    var links = document.getElementsByTagName('a');

    for (var i = 0; i < links.length; i++) {
        links[i].target = '_blank';
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T02:17:13.847

```
function open_in_new_tab(url )
{
  var win=window.open(url, '_blank');
  win.focus();
} 
```

像这样使用：

```
$("#a_id").on("click", function(){
open_in_new_tab($(this).attr("href"));
}); 
```

**演示 HTML：**

```
<a href="somepage.html" id="a_id">Click me!</a> 
```

[在这里](https://stackoverflow.com/questions/4907843/open-url-in-new-tab-using-javascript)找到

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-30T02:17:33.783

试试这个：

```
window.open('http://www.example1.com'); 
```

并捕获事件点击。

# c++ - 如何在 C++ 中将指针传递给类实例的函数？

> ID：15714173
> 
> 赞同：0
> 
> 时间：2013-03-30T02:14:10.763
> 
> 标签：c++, c++11

我正在尝试获取指向我的对象实例的函数的指针。这是我的代码：

```
#include <iostream>
#include <cstdlib>
#include <vector>
#include <algorithm>
#include <numeric>

using namespace std;

class Dice {
    int face;
public:
    Dice () {
        face = rand() % 6 + 1;
    }
    int roll() {
        face = rand() % 6 + 1;
        return face;
    }
};

int main()
{
    Dice mydice;
    vector<int> v(1000);
    generate(v.begin(),v.end(),mydice.roll);
} 
```

我的编译器在生成行用神秘的消息向我咆哮=）请指出如何正确地告诉 generate 调用`mydice.roll()`以填充向量`v`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-30T02:16:22.523

给它一个对象：

```
generate(..., std::bind(&Dice::roll, &mydice)); 
```

`std::bind`is in`<functional>`并绑定参数，以便可以在不提供参数的情况下调用函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T10:13:43.950

另一种可能的方法：使用 () 运算符将您的骰子类本身定义为函数。将其包含在您的课程中：`int operator()() { return roll(); }`，然后您可以简单地使用`generate(v.begin(),v.end(), mydice);`.

# php - 等于 $_POST 的 PHP 字符串以后不会更改，或者可能是别的东西

> ID：15714174
> 
> 赞同：1
> 
> 时间：2013-03-30T02:14:42.053
> 
> 标签：php, string

我在业余时间一直在学习 PHP，这是我为练习而做的“Hello, World”类型脚本之一。

这是下面的代码，默认字符串不会改变，所以代码最终会循环到永恒，因为我不知道为什么：

```
<?php
if (isset($_POST["pbankroll"], $_POST["pstartbet"]))
{
    $bankroll = $_POST["pbankroll"];
    $startBet = $_POST["pstartBet"];

    //If using this code below instead of that above, everything will work fine:
    //$bankroll = 200;
    //$startBet = 25;

    while($bankroll >= $startBet)
    {
        $evenOrOdd=mt_rand(0,1);
        if ($evenOrOdd == 1)
        {
            $bankroll += $startBet;
            echo "Win ...... Bankroll is now: " . $bankroll . "<br>";
        }
        else
        {
            $bankroll -= $startBet;
            echo "Loss ..... Bankroll is now: " . $bankroll . "<br>";
        }
    }

    echo "Probability, the Devourer of all Things!";
}
else
{ 
    echo "Please enter a bankroll and starting bet above.";
}
?> 
```

它的形式：

```
<form action="index.php" method="post">
    Bankroll: <input type="text" name="pbankroll">
    Start Bet: <input type="text" name="pstartbet">
    <input type="submit">
</form> 
```

我很感激帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-30T02:33:51.450

HTML 名称**pstartbet**需要更改为**pstartBet**。

编辑以澄清：

HTML 表单中的**Start Bet**输入元素的名称为**pstartbet**，带有小写的“B”。当 PHP 检查该值时，它正在寻找B 大写的**pstartBet**。这两个名称之一需要更改，以便大小写匹配。

因为它是：

```
$startBet = $_POST["pstartBet"]; // doesn't exist 
```

这意味着`$startBet`将是`null`。当通过数学运算转换为数字时，这将导致`0`- 所以值`$bankroll`永远*不会*改变，并且循环将永远继续。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T02:19:41.723

首先，您必须先将传入的值转换为整数，然后才能在数值运算中使用它们：

```
$bankroll = intval($_POST["pbankroll"]);
$startBet = intval($_POST["pstartBet"]); 
```

或者，如果它们是浮点值，请使用：

```
$bankroll = floatval($_POST["pbankroll"]);
$startBet = floatval($_POST["pstartBet"]); 
```

除此之外，代码当然可以永远运行。这是因为正在使用的伪随机数。如果在很长一段时间内有更多的 1 然后生成 0，`mat_rand()`那么代码将*永远运行*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-30T02:20:02.637

考虑到真正的随机数不能由计算机生成。显然`mt_rand`以导致无限循环的方式生成一个伪随机数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-30T02:23:04.547

我建议在`if`子句之外设置变量并设置默认值，`''`其基本上意味着“空”，然后让 if 检查这两个变量是否为空。

```
<?php

$bankroll = array_key_exists("pbankroll", $_POST) ? intval($_POST["pbankroll"]) : '';
$startBet = array_key_exists("pstartbet", $_POST) ? intval($_POST["pstartbet"]) : '';

if (!empty($bankroll) && !empty($startBet))
{

    //If using this code below instead of that above, everything will work fine:
    //$bankroll = 200;
    //$startBet = 25;

    while($bankroll >= $startBet)
    {
        $evenOrOdd=mt_rand(0,1);
        if ($evenOrOdd == 1)
        {
            $bankroll += $startBet;
            echo "Win ...... Bankroll is now: " . $bankroll . "<br>";
        }
        else
        {
            $bankroll -= $startBet;
            echo "Loss ..... Bankroll is now: " . $bankroll . "<br>";
        }
    }

    echo "Probability, the Devourer of all Things!";
}
else
{ 
    echo "Please enter a bankroll and starting bet above.";
}
?> 
```

# java - 等效于目标 C 中的 Java 代码：Integer.parseInt(frameTagAsString, 16);

> ID：15714175
> 
> 赞同：1
> 
> 时间：2013-03-30T02:14:53.640
> 
> 标签：java, objective-c, hex

我想要这个Java代码的简单正确的等价物：

```
Integer.parseInt(frameTagAsString, 16); 
```

where`frameTagAsString`是一个长度为 2 的字符串。

虽然我知道如何将十六进制字符串解析为 int 值

```
 unsigned int uint;
    NSScanner* pScanner = [NSScanner scannerWithString: frameTagAsString];
    [pScanner scanHexInt: &uint];
    frameType = uint; 
```

问题是它只是将无效的字符串解析为 int 值。

我需要明确地捕捉这些无效案例。所以我尝试了这个：

```
 @try {
    // the String to int conversion happens here
    //frameType = Integer.parseInt(frameTagAsString, 16);
    unsigned int uint;
    NSScanner* pScanner = [NSScanner scannerWithString: frameTagAsString];
    [pScanner scanHexInt: &uint];
    frameType = uint;

} @catch (NSException* nfe) {
    frameType = -1;
} 
```

而且由于目标 C 代码只解析任何字符串，它不会正确捕获无效的情况。

除了在 Objective-C 中编写我自己的转换例程来检查有效的十六进制字符串之外，没有其他选择吗？

ps 当然，我可以将值转换回十六进制字符串，然后与原始字符串进行比较 - 但我的问题是是否没有我错过的内置例程。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-30T03:39:31.230

`NSScanner``NO`如果没有找到有效的字符串，将根据其验证规则返回：

> 十六进制整数表示可以可选地以 0x 或 0X 开头。

这是演示这一点的示例代码：

```
 NSString *valid1 = @"ae";
    NSString *valid2 = @"0xae";
    NSString *valid3 = @"0Xae";
    NSString *invalid1 = @"ze";
    NSString *invalid2 = @"hello";

    void (^scanBlock)(NSString *) = ^(NSString *toScan) {
        NSScanner *scanner = [NSScanner scannerWithString:toScan];
        UInt32 parsed = 0;
        BOOL success = [scanner scanHexInt:&parsed];
        NSLog(
            @"Scanner %@ able to scan the string %@. parsed's value is %x",
            success ? @"was" : @"wasn't",
            toScan,
            parsed);
    };

    for (NSString *valid in @[ valid1, valid2, valid3]) {
        scanBlock(valid);
    }

    for (NSString *invalid in @[invalid1, invalid2]) {
        scanBlock(invalid);
    } 
```

上述代码的输出是：

```
Scanner was able to scan the string ae. parsed's value is ae
Scanner was able to scan the string 0xae. parsed's value is ae
Scanner was able to scan the string 0Xae. parsed's value is ae
Scanner wasn't able to scan the string ze. parsed's value is 0
Scanner wasn't able to scan the string hello. parsed's value is 0 
```

但是，由于其灵活的性质，`NSScanner`不会应用超出其立即扫描位置的验证规则。它还将某些字符串视为无效，而其他人可能认为是有效的十六进制字符串。例如：

```
 NSString *greyArea1 = @"x23";
    NSString *greyArea2 = @"artichoke";
    NSString *greyArea3 = @"1z";
    NSString *greyArea4 = @"     a3";

    for (NSString *grey in @[greyArea1, greyArea2, greyArea3, greyArea4]) {
        scanBlock(grey);
    } 
```

Even though these strings are invalid for an application that expects input to strictly be a string representing a hexadecimal number and nothing else, and some people may consider "x23" a valid hex string, this code gives the following output:

```
Scanner wasn't able to scan the string x23\. parsed's value is 0
Scanner was able to scan the string artichoke. parsed's value is a
Scanner was able to scan the string 1z. parsed's value is 1
Scanner was able to scan the string      a3\. parsed's value is a3 
```

Since Java's `Integer` class and `NSScanner` have such different purposes, the rules they apply to validate strings are much different, and I think that's the root of your problem. If you do wish to use `NSScanner`, then you will have to apply validation rules that make sense for your application that would interfere with `NSScanner`'s general operation.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T02:24:06.150

关于什么

```
uint = [frameTagAsString intValue]; 
```

根据[文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html)，它在无效的字符串输入上返回 0。

或者，由于 0 仍然是一个有效数字并且它不是很有指示性，您可以使用正则表达式。

```
NSRegularExpression *regex = [NSRegularExpression regularExpressionWithPattern:@"^(\\d+)$"
                                                                       options:NSRegularExpressionCaseInsensitive
                                                                         error:NULL];

NSTextCheckingResult *match = [regex firstMatchInString:frameTagAsString
                                            options:0
                                              range:NSMakeRange(0, [string length])];
if (match) {
    uint = [frameTagAsString substringWithRange:[match range]];
} else {
    // error
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-30T02:30:41.900

像这样的东西应该适合你。

```
int value;
NSScanner* pScanner = [NSScanner scannerWithString:@"123abc456"];
NSCharacterSet *charSet = [[NSCharacterSet decimalDigitCharacterSet] invertedSet];
[pScanner setCharactersToBeSkipped:charSet];
while(![pScanner isAtEnd]) {
    if([pScanner scanInt: &value])
        NSLog(@"%d", value);
} 
```

输出：

```
2013-03-29 20:29:12.648 scanner.m.uQzuCBsY[3753:707] 123
2013-03-29 20:29:12.650 scanner.m.uQzuCBsY[3753:707] 456 
```

`scanInt:`返回一个布尔值，说明它是否找到了有效的 int。

# c++ - C++ Vector 问题“阻止匹配的限定符”

> ID：15714176
> 
> 赞同：0
> 
> 时间：2013-03-30T02:14:57.003
> 
> 标签：c++, vector

```
void Exam:: read_questions(string filename) const{
    ifstream file;
    file.open(filename);
    if (file.is_open()){
        string line;
        while(getline(file,line)){
            Question* currentQuestion =  parse_question(line);
            question_list.push_back(currentQuestion);
        }
    }else{
        cout << "invalid file" << endl;
    }
    file.close();
} 
```

这条线有问题，`question_list.push_back(currentQuestion);`它会给出一个错误提示

> 没有重载函数的实例

并且还说

> push_back' : 2 个重载对带有 [ _Ty=Question * ] 的 'this' 指针 1 没有合法转换

这个错误是什么意思，我该如何解决？

这是考试的头文件：

```
class Exam 
{
public:
    Exam();
    Exam(int num_q, int min_chap, int max_chap);
    void read_questions(string filename) const;
    ~Exam();
    void write_exam(string filename) const;
    void write_key(string filename) const;
    void shuffle();

private:
    vector<Question *> question_list;
    int minC;
    int maxC;
    int numQ;
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T02:36:32.327

问题是你`read_question`这样声明：

```
void Exam:: read_questions(string filename) const 
```

这里`const`的意思是你的函数不会修改你调用它的对象。然后在函数中，你这样做：

```
question_list.push_back(currentQuestion); 
```

`question_list`是一个成员变量，所以你违背了你的诺言。编译器正在调用它。

# c - 错误 C2065：“cp”：未声明的标识符

> ID：15714183
> 
> 赞同：0
> 
> 时间：2013-03-30T02:15:59.403
> 
> 标签：c, arrays, string, visual-studio-2010

我是 C 新手，我在互联网上找到了关于字符串和数组的教程，并尝试做这个程序。他们正在使用 Eclipse，而我正在使用 Visual Studio 2010 ...请帮助和解释。我遇到了这些问题：

```
error C2143: syntax error : missing ';' before 'type'
error C2143: syntax error : missing ';' before 'type'
error C2143: syntax error : missing ')' before 'type'
error C2143: syntax error : missing ';' before 'type'
error C2065: 'cp' : undeclared identifier
error C2100: illegal indirection
warning C4552: '!=' : operator has no effect; expected operator with side-effect
error C2059: syntax error : ')'
error C2065: 'cp' : undeclared identifier
error C2143: syntax error : missing ';' before '{'
error C2065: 'cp' : undeclared identifier
error C2100: illegal indirection 
```

这是代码：

```
#include <stdio.h>
#include <conio.h>

int main(char argc, char**argv){
    char s[] = "string";
    printf("string is: %s\n", s);

    for(char *cp = s; *cp !=0; ++cp) {
        printf("char is %c\n", *cp);
    }
    getch();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T02:20:15.063

Microsoft 的 C 编译器仅实现 C90 标准（加上一些扩展）。它不完全支持较新的 C99 或 C11 标准。请参阅（并投票！）[MS Connect 上的此错误报告，](http://connect.microsoft.com/VisualStudio/feedback/details/485416/support-c99)以鼓励他们添加对现代 C 的支持。编译器团队的[此博客条目](http://blogs.msdn.com/b/vcblog/archive/2007/11/05/iso-c-standard-update.aspx)还包含一些相关信息。

但是，结果是您不能在`for`循环的初始化中声明变量。事实上，你可以声明变量的唯一地方是在一个块的最顶部。

如果将声明移到`cp`方法块的顶部，它将编译得很好。

```
int main(char argc, char**argv){
    char s[] = "string";
    char *cp = s;//move to here

    printf("string is: %s\n", s);        

    for(; *cp !=0; ++cp) {
        printf("char is %c\n", *cp);
    }
    getch();
    return 0;// you should return some value
} 
```

或者，您可以在函数体中引入新的块作用域。

# java - 解决 JVM“函数调用的对象参数不兼容”错误（javassist 检测）

> ID：15714184
> 
> 赞同：3
> 
> 时间：2013-03-30T02:16:12.467
> 
> 标签：java, jvm, javassist

我的一个类上有 JVM (1.6.0b33) throw java.lang.VerifyError (Incompatible object argument for function call)。使用 javassist（使用 CtMethod.make()）对该类进行检测（仅此一种方法）

有没有办法让我找到哪个方法调用触发了错误？我浏览了 javap -c -s -l 的输出，但我没有看到任何调用指令有任何问题。

例如，如果有人知道如何要求 JVM 提供有关检测到此错误的位置的更多详细信息（代码地址会很好）就足够了，所以我知道应该关注哪里。如果有人想以这种方式破解它，我可以发布 javap 的输出......

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-30T08:45:50.707

在检查 JVM 源代码后想通了。

The error (Incompatible object argument for function call) means that the object **on which** the invocation is performed doesn't match the expected (by method signature) type (I assumed it had something to do with object arguments, but you get a slightly different error in that case).

Apparently, javassist doesn't insert proper instructions when you assign an object to an object of another class (alternatively it can fail the statement).

Javassist will take the following code as valid:

```
Object x ...;
String s = x; // javac requires cast here, javassist doesn't
s.isEmpty(); 
```

normally compiles into:

```
1 aload_1 // push x on stack
2 checkcast java/lang/String // check we can fit x into s
3 astore 2 // s = x;
4 aload 2 // 'this' for isEmpty()
5 invokevirtual String.isEmpty() // stack top used as 'this' 
```

javassist (at least the version that I have) just doesn't add **checkcast** instruction, and the VM has no guarantee that at the time **invokevirtual** is called the stack top contains String, which is required because the **invokvirtual** is invoking a method from String class.

Remedy would be:

*   use explicit cast in assignments
*   fix javassist
*   use local variables of explicit type

# javascript - 如何正确呈现 AJAX POST MVC 4 的返回

> ID：15714194
> 
> 赞同：1
> 
> 时间：2013-03-30T02:17:15.470
> 
> 标签：javascript, asp.net-mvc, jquery, asp.net-mvc-4

我正在使用 MVC 4，我正在尝试发送一个发布请求，并且我从我的控制器成功返回，并以 HTML 形式生成视图，但我不知道当时如何处理它。

JS

```
$("form").submit(function (e) {
    e.preventDefault();
    if ($(this).valid()) {
        $.ajax({
            url: submitUrl, type: "POST", traditional: true,
            data: { EventName: 'Name of event'},
            success: function(data){
                $("#content").html(data);
            }
        })
    }
}); 
```

我的控制器

```
[HttpPost]
public ActionResult CreateEvent(EventModel model)
{
    if(ModelState.IsValid)
    {
        return RedirectToAction("Index");
    }
    else
    {
        return View(model);
    }
} 
```

所以你可以看到我的控制器要么返回一个视图，要么返回一个 RedirectToAction。在我的 ajax 调用的成功回调中，我正在执行以下操作： $("#content").html(data); 但似乎什么也没有发生。有人可以帮助我正确处理控制器动作的返回。

非常感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-30T03:31:32.537

如果我理解正确，您的页面上有一个创建事件表单，并且您想发送一个 AJAX 请求来创建一个新事件。然后，您想`#content`用操作的结果替换页面中的一个部分`CreateEvent`。

看起来您的 AJAX 设置正确，以便`CreateEvent`返回成功的响应。我想你现在对回应感到困惑。你有几个选择，但让我们选择两个。

**JSON 响应**

```
[HttpPost]
public ActionResult CreateEvent(EventModel model)
{
    if(ModelState.IsValid)
    {
        var event = service.CreateEvent(model); // however you create an event
        return Json(event);
    }
    else
    {
        // model is not valid so return to original form
        return View("Index", model);
    }
    ... 
```

现在您需要从 JSON 生成 html 标记并将其插入到`#content`.

```
$.ajax({
    url: submitUrl, type: "POST", traditional: true,
    data: { EventName: 'Name of event'},
    success: function(data){
        var obj = JSON.Parse(data);
        var html; // build html with the obj containing server result
        $("#content").html(html);
    }
}) 
```

或**HTML 片段**

而不是返回一个完整的页面，`Layout`我们将只返回一个`PartialView`没有`Layout`和所有的`head`和`script`标签。

```
[HttpPost]
public ActionResult CreateEvent(EventModel model)
{
    if(ModelState.IsValid)
    {
        var event = service.CreateEvent(model); // however you create an event
        return PartialView("CreateEventResult", event);
    }
    else
    {
        // model is not valid so return to original form
        return View("Index", model);
    }
} 
```

现在创建一个新的局部视图*CreateEventResult.cshtml* (Razor)

```
@model Namespace.EventModelResult
@ {
    Layout = null;
}
<div>
    <!-- this stuff inserted into #content -->
    @Model.Date
    ...
</div> 
```

and the javascript is unchanged

```
$.ajax({
    url: submitUrl, type: "POST", traditional: true,
    data: { EventName: 'Name of event'},
    success: function(data){
        $("#content").html(data);
    }
}) 
```

**Edit:** If your Event creation fails for any reason after you have validated the input, you'll have to decide how you want to respond. One option is to add a response status to the object you return and just display that instead of the newly created Event.

# c++ - expected primary-expression before 'double'

> ID：15714197
> 
> 赞同：0
> 
> 时间：2013-03-30T02:18:23.290
> 
> 标签：c++, arduino

Im trying to create a PID controller:

```
PID* nsController = new PID(&double(imu.ypr[2]*), &nsOut, 
                             &nsSet, 7, 0.0, 1.1, REVERSE);

error: expected primary-expression before 'double' 
```

`imu.ypr` is `float ypr[3]`;
PID canditates are: `PID::PID(double*, double*, double*, double, double, double, int)`

what does that error mean? and how to fix? Im just trying to convert `float` to `double`. What does the `*` and & mean? Thank you

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T02:35:49.157

You can't take the address of a temporary like that.

Instead, create a new local variable and pass that in:

```
double val = imu.ypr[2];
PID* nsController = new PID(&val, &nsOut, 
                         &nsSet, 7, 0.0, 1.1, REVERSE); 
```

# mysql - mysql连接头疼

> ID：15714198
> 
> 赞同：0
> 
> 时间：2013-03-30T02:18:23.350
> 
> 标签：mysql, left-join

![在此处输入图像描述](../Images/35b15839b02c98854b8f801bf17ceac1.png)

我有这个数据库。它不包含所有表格，但对于我的问题，图片中包含的内容就足够了。

该数据库是为运输公司设计的。

所以，我有一个预订。任何预订都可以有多个地址。这些类型是（routing_type：上车、下车、下车）。我的地址是街道地址或机场。

内部路由表使用 address_id 或 airport_id 来判断路由的类型。如果 airport_id 有一个数字，则 address_id 为 NULL。

在我的 booking_routing 表中，我有与特定预订的路由类型一样多的条目。如果我有 3 个特定预订的地址，我将在 booking_routing 中有 3 个条目（可能是 Pick-up，然后是 Stop，然后是 Drop-off）。通常只需要两个地址，上车下车。

**问题：我尝试创建一个查询，其中我将在同一行显示我的接送点和预订中的其他字段。**

例子：

Booking_ID Account_ID ... 取车 下车
121 32 1 Main St IAD, AA-322

现在我只设法让他们在两行上使用 LEFT JOIN。像这样：
Booking_ID Account_ID ... Address_Type Address
121 32 Pick_up 1 Main St
121 32 Drop-Off IAD, AA-322

```
SELECT   
b.booking_id as ID, a.account_id as Acc_ID, 
MAX(CASE WHEN br.routing_type_id = 1 THEN -- 1=pick-up
    Concat(ad.address_line1, " ", api.code, " ", aii.code, "-", ap.flight_number) END) as Pick_up,
    MAX(CASE WHEN br.routing_type_id = 4 THEN  -- 4=drop-off
             Concat(ad.address_line1, " ", api.code, " ", aii.code, "-", ap.flight_number) END) as Drop_off

FROM booking b
left JOIN account a ON b.account_id = a.account_id
left join booking_routing br ON b.booking_id = br.booking_id
left join routing r ON br.routing_id = r.routing_id
left join routing_type rt ON br.routing_type_id = rt.routing_type_id
left join address ad ON r.address_id = ad.address_id
left join airport ap ON r.airport_id = ap.airport_id
left join airport_info api ON ap.airport_info_id = api.airport_info_id
left join airline_info aii ON ap.airline_info_id = aii.airline_info_id

group by b.booking_id, a.account_id; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T02:20:47.377

`MAX`您可以通过使用and来实现这一点`CASE`：

```
SELECT Booking_Id, 
   Account_Id, 
   MAX(CASE WHEN Address_Type = 'Pick_up' THEN Address END) Pick_Up,
   MAX(CASE WHEN Address_Type = 'Drop-Off' THEN Address END) Drop_Off
FROM YourTables...
GROUP BY Booking_Id, Account_Id 
```

[SQL 小提琴演示](http://www.sqlfiddle.com/#!2/cf3c8/2)

# node.js - node.js 中良好的用户/组管理

> ID：15714202
> 
> 赞同：2
> 
> 时间：2013-03-30T02:18:52.050
> 
> 标签：node.js, passport.js

需要在 node.js 中实现用户/组管理。有什么好的框架吗？稍微查看一下passport.js，它似乎已经关闭了身份验证。只是不确定用户/组的东西是内置的。我可以建立自己的用户/组并使用passport.js 进行身份验证。只是想知道那里是否有我不知道的东西。谢谢！

# c# - 如何理解这个矩阵数学

> ID：15714205
> 
> 赞同：-1
> 
> 时间：2013-03-30T02:18:59.900
> 
> 标签：c#, matrix, xna

我正在关注一个试图了解游戏开发的教程。它是碰撞检测的一部分。我明白它的作用，但不明白它是如何做到的。我希望能够了解正在发生的事情。有人可以解释一下吗？

```
Matrix matrix1To2 = matrix1 * Matrix.Invert(matrix2);
Vector2 pos1 = new Vector2(x1, y1);
Vector2 pos2 = Vector2.Transform(pos1, mat1To2); 
```

该教程说这是根据第一张图像的 x/y 值找到图像相交的位置。我对矩阵是什么等有基本的了解，但不知道它是如何工作的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T04:22:14.860

这里提出并回答了一个几乎相同的问题：http: [//xboxforums.create.msdn.com/forums/p/79167/479452.aspx](http://xboxforums.create.msdn.com/forums/p/79167/479452.aspx)

# php - 从数组中获取一部分

> ID：15714206
> 
> 赞同：0
> 
> 时间：2013-03-30T02:19:22.090
> 
> 标签：php, arrays

以下代码将 XML 转换为数组。我想通过 [name] 的值得到一个刺痛。所以例如： $..[offerid].. 应该给 8b5f7fd3806a42ccb0ade9f8309c5587 谁能帮帮我？:)

```
$xmldata = file_get_contents($XMLURL);
$arr= xml2ary($xmldata);

foreach($arr['m4n']['_c']['data']['_c']['record'] as $result){
echo "<pre>"; print_r($result);
} 
```

回显结果为：

```
Array
(
    [recordHash] => Array
        (
            [_v] => -652572603
        )

    [column] => Array
        (
            [0] => Array
                (
                    [_a] => Array
                        (
                            [name] => url
                        )

                    [_v] => http://ad.dd.com/ppc/?20910868C187884459&zpar6=DF_1&ULP=[[http%3A%2F%2F]]
                )

            [1] => Array
                (
                    [_a] => Array
                        (
                            [name] => title
                        )

                    [_v] => This is the title
                )

            [2] => Array
                (
                    [_a] => Array
                        (
                            [name] => description
                        )

                    [_v] => Aanbod
                )

            [3] => Array
                (
                    [_a] => Array
                        (
                            [name] => offerid
                        )

                    [_v] => 8b5f7fd3806a42ccb0ade9f8309c5587
                )
        )
) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T02:27:00.630

尝试使用 php[`foreach`](http://php.net/manual/en/control-structures.foreach.php)循环遍历所有项目。

```
$name_to_find = 'offerid';
$value = FALSE;

foreach ($result['column'] as $item) {
  if ($item['_a']['name'] == $name_to_find) {
    $value = $item['_v'];
    break;
  }
}

// Now $value has the value of the entry with the name $name_to_find 
```

如果您最终找到了给定的条目`$name_to_find`，那么`$value`将不会`FALSE`（当然，您没有任何`FALSE`值：D）。

# c++ - 向量赋值运算符和复制构造函数

> ID：15714208
> 
> 赞同：0
> 
> 时间：2013-03-30T02:19:55.423
> 
> 标签：c++, stl

假设我有以下代码：

```
std::vector<myclass> v1;
v1.push_back (x1);
v1.push_back (x2);
std::vector<myclass> v2(v1); 
```

当我运行上面的代码时，会调用 x1 和 x2 的复制构造函数来构建向量 v2，这似乎是正确的做法。

但是如果我以这种方式重写代码：

```
std::vector<myclass> v1, v2;
v1.push_back (x1);
v1.push_back (x2);
v2 = v1; 
```

再次调用 x1 和 x2 的复制构造函数。这是正确的行为吗？为什么不调用赋值运算符？调用 x1 和 x2 的赋值运算符不是更一致吗？似乎向量的复制分配并不意味着其元素的复制分配。

如果我有一个类，其中复制构造和复制分配必须具有不同的语义怎么办？

编辑。在调用 v2=v1 之前 v2 是空的，但是在创建具有 2 个元素的向量之后不应该调用复制赋值吗？这对我来说似乎更一致......顺便说一句，当我尝试调用 v2=v1 时，编译器会强制定义 myclass 复制赋值运算符，即使它没有使用它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T02:25:56.190

为 and调用赋值运算符是没有意义的`x1`，`x2`因为您没有分配给它们中的任何一个。`v2`的赋值运算符将使其内部数组足够大以容纳 的所有元素，`v1`然后将 的所有元素复制`v1`到`v2`。

# java - 如何用图像填充 SQLite db，并从中检索图像？

> ID：15714211
> 
> 赞同：0
> 
> 时间：2013-03-30T02:20:04.760
> 
> 标签：java, android, sqlite

我的资产文件夹中有 100 张图片。我想将图像设置为图像视图，并在四个按钮下方设置 4 个可能的答案来连接图像（当然是一个正确的）。我在想什么，我已经完成了一个类似的问答游戏，我正在使用 SQLite 数据库进行问答。那么，有没有一种方法可以为此使用 sqlite 数据库，但只有在我的问题在数据库中时，我才会放置一些术语或整数，例如 image_1.png 为 1，image_2.png 为 2 等等。

或者另一种情况是用图像预填充数据库，但我不知道这是否可能或如何去做。

有没有办法重写我的数据库助手来使用它？这是我的数据库助手和 testAdapter：

```
public class DataBaseHelper extends SQLiteOpenHelper
{
   private static String TAG = "DataBaseHelper"; // Tag just for the LogCat window
    //destination path (location) of our database on device
    private static String DB_PATH = "/data/data/rs.androidaplikacijekvizopstekulture/databases/"; 
    private static String DB_NAME ="pitanja.sqlite";// Database name
    private static SQLiteDatabase mDataBase; 
    private final Context mContext;
    private static final String KEY_ID = "_ID";
    private static final String TABLE_NAME = "tblPitanja";

    public DataBaseHelper(Context mojContext) 
    {
        super(mojContext, DB_NAME, null, 1);// 1? its Database Version
        DB_PATH = mojContext.getApplicationInfo().dataDir + "/databases/";
        this.mContext = mojContext;
    }

    public void createDataBase() throws IOException
    {
    //If database not exists copy it from the assets

        this.getReadableDatabase();
        this.close();
        try 
        {
            //Copy the database from assests
            copyDataBase();
            Log.e(TAG, "createDatabase database created");
        } 
        catch (IOException mIOException) 
        {
            throw new Error("ErrorCopyingDataBase");
        }
    }
    /*Check that the database exists here: /data/data/your package/databases/Da Name
    private boolean checkDataBase()
    {
        File dbFile = new File(DB_PATH + DB_NAME);
        //Log.v("dbFile", dbFile + "   "+ dbFile.exists());
        return dbFile.exists();
    }
    */

    //Copy the database from assets
    private void copyDataBase() throws IOException
    {
        InputStream mInput = mContext.getAssets().open(DB_NAME);
        String outFileName = DB_PATH + DB_NAME;
        OutputStream mOutput = new FileOutputStream(outFileName);
        byte[] mBuffer = new byte[1024];
        int mLength;
        while ((mLength = mInput.read(mBuffer))>0)
        {
            mOutput.write(mBuffer, 0, mLength);
        }
        mOutput.flush();
        mOutput.close();
        mInput.close();
    }

    //Open the database, so we can query it
    public boolean openDataBase() throws SQLException
    {
        String mPath = DB_PATH + DB_NAME;
        //Log.v("mPath", mPath);
        mDataBase = SQLiteDatabase.openDatabase(mPath, null, SQLiteDatabase.CREATE_IF_NECESSARY);
        //mDataBase = SQLiteDatabase.openDatabase(mPath, null, SQLiteDatabase.NO_LOCALIZED_COLLATORS);
        return mDataBase != null;
    }
    @Override
    public void close() 
    {
        if(mDataBase != null)
            mDataBase.close();
        super.close();
    }

    @Override
    public void onCreate(SQLiteDatabase arg0) {
        }

    @Override
    public void onUpgrade(SQLiteDatabase arg0, int arg1, int arg2) {
        Log.w("DataBaseHelper", "Upgrading database!!!!!");
          onCreate(arg0);

    }

} 
```

这是testAdaper：

```
public class TestAdapter 
{
    protected static final String TAG = "DataAdapter";

    private final Context mContext;
    private SQLiteDatabase mDb;
    private DataBaseHelper mDbHelper;

    public TestAdapter(Context context) 
    {
        this.mContext = context;
        mDbHelper = new DataBaseHelper(mContext);
    }

    public TestAdapter createDatabase() throws SQLException 
    {
        try 
        {
            mDbHelper.createDataBase();
        } 
        catch (IOException mIOException) 
        {
            Log.e(TAG, mIOException.toString() + "  UnableToCreateDatabase");
            throw new Error("UnableToCreateDatabase");
        }
        return this;
    }

    public TestAdapter open() throws SQLException 
    {
        try 
        {
            mDbHelper.openDataBase();
            mDbHelper.close();
            mDb = mDbHelper.getReadableDatabase();
        } 
        catch (SQLException mSQLException) 
        {
            Log.e(TAG, "open >>"+ mSQLException.toString());
            throw mSQLException;
        }
        return this;
    }

    public void close() 
    {
        mDbHelper.close();
    }

     public Cursor getTestData(String whereClause)
     {;
         try
         {
             String sql ="SELECT * FROM tblPitanja WHERE 1 = 1 " + whereClause + " ORDER BY RANDOM() LIMIT 1";

             Cursor mCur = mDb.rawQuery(sql, null);
             if (mCur!=null)
             {
                mCur.moveToNext();
             }
             return mCur;
         }
         catch (SQLException mSQLException) 
         {
             Log.e(TAG, "getTestData >>"+ mSQLException.toString());
             throw mSQLException;
         }
     }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T02:39:50.547

您可以使用数据类型将图像保存在 sqlite 中`blob`。使用 SQLite 管理器（firefox 插件）在计算机上预填充数据库。然后你只需要 assets 文件夹中的 db 文件，而不是那 100 张图片！

检查这个： [如何将图像存储为 Sqlite 中的 blob 以及如何检索它？](https://stackoverflow.com/questions/7331310/how-to-store-image-as-blob-in-sqlite-how-to-retrieve-it)

另一种方法（更快）是将图像存储在外部文件夹中，然后在数据库中输入其 URL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T07:08:26.430

由于您已经在资产中有图像，因此我建议您仅将关联图像的名称保存在 sqlite 中。我更喜欢总是避免在 sqlite 中保存 blob。您始终可以获取正确的名称并将其直接从数据库加载到 imageview 中。

编辑：您的代码可以像这样简单。

```
Cursor getname = db.rawQuery("Select * from table_name where QuestionID = ...");
if(getname.movetofirst())
{
String drawablename = getname.getString(getname.getColumnIndex("PicName"));

ImageView iw= (ImageView)findViewById(R.id.imageView1);  
int resID = getResources().getIdentifier(drawableName, "drawable",  getPackageName());
iw.setImageResource(resID);
} 
```

# python - 奇怪的“IndexError：列表索引超出范围”错误。Python

> ID：15714215
> 
> 赞同：1
> 
> 时间：2013-03-30T02:20:25.280
> 
> 标签：python, syntax-error

我有一个程序需要使用类似的东西：

```
file1=open("cliente\\config.ini","r")

print file1.read().split(",")

user=file1.read().split(",")[0]
passwd=file1.read().split(",")[1]
domain=file1.read().split(",")[2]
file1.close() 
```

在该文件中有 3 个字符串，由“，”（用户、密码、域）分隔。

这是输出：

```
['user', 'pass', 'domain']
Traceback (most recent call last):
  File "C:\Users\default.default-PC\proyectoseclipse\dnsrat\prueba.py", line 8, in <module>
    passwd=file1.read().split(",")[1]
IndexError: list index out of range 
```

我正在使用列表中的 0、1 和 2 字符串，所以我没有使用不存在的字符串。

那么，为什么我有一个错误？

非常感谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-30T02:23:48.123

您正在阅读文件末尾的内容。当您`read`不带参数调用时，将读取整个文件的内容，并且指针前进到文件末尾。你想要的是`read`一次，并将内容保存在一个变量中。然后，从中访问索引：

```
file1 = open("cliente\\config.ini","r")

line1 = file1.read().split(",")

user = line1[0]
passwd = line1[1]
domain = line1[2]
file1.close() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T02:25:13.013

`read()`将返回文件中的内容。从[文档](http://docs.python.org/2/tutorial/inputoutput.html#methods-of-file-objects)：

```
...which reads some quantity of data and returns it as a string. 
```

如果您再次调用它，将没有任何内容可供阅读。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-30T02:26:27.347

read() is a methoe to get data from reading buffer. And you can't get data from buffer more than one time.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-30T02:28:49.393

```
file1=open("cliente\\config.ini","r")

data = file1.read().split(",")

user=data[0]
passwd=data[1]
domain=data[2]
file1.close() 
```

Your first file.read() line will move the cursor to the end of the file after reading the line. Other file.read() won't read the file again as you expected. Instead it will read from the end of the cursor and that will return empty string.

# sed - sed find 用特殊字符替换字符串

> ID：15714216
> 
> 赞同：0
> 
> 时间：2013-03-30T02:20:37.370
> 
> 标签：sed, latex, special-characters, replace

我正在尝试使用 sed 在文本文件中查找/替换带有特殊字符的字符串。我正在尝试使用这样的命令：

```
sed -i -e 's/one\_test/FIRST TEST/g' tables.tex 
```

因此，在 tables.tex 中将 'one_test' 替换为 'FIRST TEST'

这个命令不起作用，我认为是因为 \ 字符。有人知道我能做些什么来让它工作吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-30T02:30:42.557

```
sed -i -e 's/one\\_test/TEST/g' tables.tex 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-11T07:32:50.963

这是我的情况......如果这可能有帮助

我有一个像 onstar 这样的字符串。我需要用 onstar_system 替换它。

我这样做了，

sed -i 's/onstar\./onstar_system\./g' 文件名

这对我有用。

# objective-c - 可可 OpenGL 总是白色的

> ID：15714219
> 
> 赞同：0
> 
> 时间：2013-03-30T02:20:52.473
> 
> 标签：objective-c, cocoa, opengl

每次我用 OpenGL 视图运行我的 Cocoa 应用程序时，我都会得到一个白色窗口。我期望发生的是会出现一个黑色窗口。

我已经用断点验证了我的 drawRect 方法被调用了。

代码如下。

。H

```
#import <Cocoa/Cocoa.h>
#import <OpenGL/OpenGL.h>
#import <GLUT/GLUT.h>

@interface OpenlGLTest : NSOpenGLView

- (void) drawRect:(NSRect)dirtyRect;
@end 
```

.m

```
#include <OpenGL/gl.h>
#import "OpenlGLTest.h"

@implementation OpenlGLTest

- (void)drawRect:(NSRect)bounds
{
    glClearColor(0, 0, 0, 0);
    glClear(GL_COLOR_BUFFER_BIT);
    glFlush();
    [self setNeedsDisplay:YES];
}
@end 
```

我的项目构建时没有警告和错误。我不知道为什么我的屏幕是白色而不是黑色。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-30T03:55:32.207

试试`glClearColor(0.0, 0.0, 0.0, 1.0);`。代码中的最后一个`0`是 alpha 系数，所以它只是显示`GLView`.

# php - PHP: wrapping a string into a file object

> ID：15714226
> 
> 赞同：0
> 
> 时间：2013-03-30T02:22:21.753
> 
> 标签：php, string, file, web-crawler, fopen

quick question:

So I've written a bunch of crawling code, but one of the websites I'm crawling didn't include line breaks between tags. Since I've already written a bunch of code, I threw in a quick hack with preg_replace and continued from where I left off. Problem is, fopen() doesn't work on strings...

```
$string = file_get_contents($url);
$string = preg_replace("/>(^\n|\n+)?</", ">\n<", $string);
$file = fopen($string, 'r');
while(($buffer = fgets($file)) != false) { ... } 
```

So, without rewriting my loop, how do I approach this?

Thanks for the help!

Rob

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T02:35:51.220

It seems you're looking to iterate over each line of the fetched page. You can do this after you've pulled it into a string by using the [`explode()`](http://www.php.net/manual/en/function.explode.php) function to break the string into an array at the line breaks:

```
foreach (explode("\n", $string) as $line) {
    ....
} 
```

# javascript - 来自地址的标记群体

> ID：15714227
> 
> 赞同：3
> 
> 时间：2013-03-30T02:22:53.300
> 
> 标签：javascript, google-maps, google-maps-api-3

以下是我用来从数组地址填充标记的代码，但它没有显示任何标记，也没有映射到相应的 div，请让我知道我做错了什么以及如何解决这个问题。

```
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?sensor=false"></script>
<script type="text/javascript">
$(document).ready(function(){

  var myOptions = {
    center: new google.maps.LatLng(54, -2),
    zoom: 6,
    mapTypeId: google.maps.MapTypeId.ROADMAP
  };

  var map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);

  var addressArray = new Array("41 Green Ln, Handsworth, Birmingham, West Midlands B21 0DE, UK","BT27 4SB","Norwich");
  var geocoder = new google.maps.Geocoder();
  var markerBounds = new google.maps.LatLngBounds();

  for (var i = 0; i < addressArray.length; i++) {
    geocoder.geocode( { 'address': addressArray[i]}, function(results, status) {
      if (status == google.maps.GeocoderStatus.OK) {
        var marker = new google.maps.Marker({
          map: map,
          position: results[0].geometry.location
        });

        markerBounds.extend(results[0].geometry.location);
        map.fitBounds(markerBounds);
      } else {
        alert("Geocode was not successful for the following reason: " + status);
      }
    });
  }    

});
</script>
<div id="map_canvas"></div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T02:38:49.277

为了显示地图，您需要`#map_canvas`使用 CSS 提供绝对宽度/高度。

小提琴示例：http: [//jsfiddle.net/sCvJk/](http://jsfiddle.net/sCvJk/)

# java-me - 如何在 j2me 中解决 ProximityListener 的 LocationException

> ID：15714228
> 
> 赞同：1
> 
> 时间：2013-03-30T02:22:59.170
> 
> 标签：java-me, jsr179

我的 addProximityListener 代码是 -

```
Coordinates proxcoord = new Coordinates(0.0, 0.0, 0.0f); 
proxcoord.setLatitude(Double.parseDouble(lat));
proxcoord.setLongitude(Double.parseDouble(lon));
provider.addProximityListener(this, proxcoord, 40.0f); 
```

在将 ProximityListener 添加到位置提供程序平台时，向我显示如下错误 -

```
javax.microedition.location.LocationException
at javax.microedition.location.LocationProvider.addProximityListener(+7)
at mobilelocationreminder.MobileLocationReminder.commandAction(+4414)
at javax.microedition.lcdui.Displayable.callKeyPressed(+269)
at javax.microedition.lcdui.Form.callKeyPressed(+243)
at javax.microedition.lcdui.Display.consumeUIEvent(+101)
at javax.microedition.lcdui.Display$DisplayAccessor.consumeEvent(+117)
null 
```

我在文档中看到了它的错误含义，即 LocationException - 如果平台没有资源来添加新的侦听器和要监视的坐标，或者根本不支持接近度监视

但我不知道如何解决这个问题？？？

# ruby-on-rails - .save 上的 Rails 参数错误 - 与模型中的 has_many belongs_to 有关

> ID：15714234
> 
> 赞同：0
> 
> 时间：2013-03-30T02:23:58.843
> 
> 标签：ruby-on-rails, model, migration, relational-database, runtime-error

尝试将条目保存到我的数据库时出现以下错误：

`ArgumentError: Unknown key: class`

当我尝试定义`PageIcon`我的`Page`模型属于哪个时，就会发生这种情况。

* * *

页面迁移：

```
class CreatePages < ActiveRecord::Migration
  def change
    create_table :pages do |t|
      t.integer "parent_page_id"
      t.integer "page_image_id", :null => false
      t.integer "page_icon_id"
      t.integer "template_id"

      t.string "title", :null => false
      t.string "path", :default => "", :null => false
      t.string "group"
      t.datetime "deleted_at"
      t.boolean "visible", :default => false

      t.timestamps
    end
    add_index("pages", "parent_page_id")
    add_index("pages", "page_image_id")
    add_index("pages", "page_icon_id")
    add_index("pages", "template_id")
    add_index("pages", "title")
    add_index("pages", "path")
  end
end 
```

页面模型：

```
class Page < ActiveRecord::Base
  belongs_to :parent, :class_name => 'Page', :foreign_key => 'parent_page_id'
  has_many :children, :class_name => 'Page', :foreign_key => 'parent_page_id'
  belongs_to :page_image, :class_name => 'Image', :foreign_key => 'page_image_id'
  has_many :sections
  has_many :attributes
  belongs_to :page_icon, :class_name => 'PageIcon', :foreign_key => 'page_icon_id'

  validates_uniqueness_of :title, :case_sensitive => false
end 
```

* * *

页面图标迁移

```
class CreatePageIcons < ActiveRecord::Migration
  def change
    create_table :page_icons do |t|
      t.string 'title', :null => false
      t.string 'description'
      t.string 'url', :null => false
      t.timestamps
    end
  end
end 
```

页面图标模型：

```
class PageIcon < ActiveRecord::Base
  has_many :pages, :class_name => 'Page', :foreign_key => 'page_icon_id'
end 
```

* * *

当我在 Rails 控制台中输入以下内容时，出现错误：

```
p = Page.find(1)
p.page_icon = PageIcon.find(1)
p.save 
```

错误： `ArgumentError: Unknown key: class`

* * *

完整日志：

```
1.9.3-p392 :001 > p = Page.find(4)
  Page Load (0.8ms)  SELECT `pages`.* FROM `pages` WHERE `pages`.`id` = 4 LIMIT 1
 => #<Page id: 4, parent_page_id: nil, page_image_id: 1, page_icon_id: nil, template_id: nil, title: "Food", path: "", group: nil, deleted_at: nil, visible: true, created_at: "2013-03-29 12:21:31", updated_at: "2013-03-29 12:21:31"> 
1.9.3-p392 :002 > p.page_icon = PageIcon.find(2)
  PageIcon Load (0.3ms)  SELECT `page_icons`.* FROM `page_icons` WHERE `page_icons`.`id` = 2 LIMIT 1
 => #<PageIcon id: 2, title: "Food", description: nil, url: "page_icons/food.svg", created_at: "2013-03-30 01:37:13", updated_at: "2013-03-30 01:37:13"> 
1.9.3-p392 :003 > p.save
   (0.2ms)  BEGIN
  Page Exists (0.5ms)  SELECT 1 AS one FROM `pages` WHERE (`pages`.`title` = 'Food' AND `pages`.`id` != 4) LIMIT 1
   (0.2ms)  ROLLBACK
ArgumentError: Unknown key: class
    from /Users/RyanKing/.rvm/gems/ruby-1.9.3-p392/gems/activesupport-3.2.12/lib/active_support/core_ext/hash/keys.rb:51:in `block in assert_valid_keys'
    from /Users/RyanKing/.rvm/gems/ruby-1.9.3-p392/gems/activesupport-3.2.12/lib/active_support/core_ext/hash/keys.rb:50:in `each_key'
    from /Users/RyanKing/.rvm/gems/ruby-1.9.3-p392/gems/activesupport-3.2.12/lib/active_support/core_ext/hash/keys.rb:50:in `assert_valid_keys'
    from /Users/RyanKing/.rvm/gems/ruby-1.9.3-p392/gems/activerecord-3.2.12/lib/active_record/associations/builder/association.rb:33:in `validate_options'
    from /Users/RyanKing/.rvm/gems/ruby-1.9.3-p392/gems/activerecord-3.2.12/lib/active_record/associations/builder/association.rb:24:in `build'
    from /Users/RyanKing/.rvm/gems/ruby-1.9.3-p392/gems/activerecord-3.2.12/lib/active_record/autosave_association.rb:139:in `build'
    from /Users/RyanKing/.rvm/gems/ruby-1.9.3-p392/gems/activerecord-3.2.12/lib/active_record/associations/builder/belongs_to.rb:14:in `build'
    from /Users/RyanKing/.rvm/gems/ruby-1.9.3-p392/gems/activerecord-3.2.12/lib/active_record/associations/builder/association.rb:12:in `build'
    from /Users/RyanKing/.rvm/gems/ruby-1.9.3-p392/gems/activerecord-3.2.12/lib/active_record/associations.rb:1431:in `belongs_to'
    from /Users/RyanKing/Sites/gastromica/app/models/attribute.rb:3:in `<class:Attribute>'
    from /Users/RyanKing/Sites/gastromica/app/models/attribute.rb:1:in `<top (required)>'
    from /Users/RyanKing/.rvm/gems/ruby-1.9.3-p392/gems/activesupport-3.2.12/lib/active_support/dependencies.rb:469:in `load'
    from /Users/RyanKing/.rvm/gems/ruby-1.9.3-p392/gems/activesupport-3.2.12/lib/active_support/dependencies.rb:469:in `block in load_file'
    from /Users/RyanKing/.rvm/gems/ruby-1.9.3-p392/gems/activesupport-3.2.12/lib/active_support/dependencies.rb:639:in `new_constants_in'
    from /Users/RyanKing/.rvm/gems/ruby-1.9.3-p392/gems/activesupport-3.2.12/lib/active_support/dependencies.rb:468:in `load_file'
    from /Users/RyanKing/.rvm/gems/ruby-1.9.3-p392/gems/activesupport-3.2.12/lib/active_support/dependencies.rb:353:in `require_or_load'
... 35 levels...
    from /Users/RyanKing/.rvm/gems/ruby-1.9.3-p392/gems/activerecord-3.2.12/lib/active_record/validations.rb:50:in `save'
    from /Users/RyanKing/.rvm/gems/ruby-1.9.3-p392/gems/activerecord-3.2.12/lib/active_record/attribute_methods/dirty.rb:22:in `save'
    from /Users/RyanKing/.rvm/gems/ruby-1.9.3-p392/gems/activerecord-3.2.12/lib/active_record/transactions.rb:259:in `block (2 levels) in save'
    from /Users/RyanKing/.rvm/gems/ruby-1.9.3-p392/gems/activerecord-3.2.12/lib/active_record/transactions.rb:313:in `block in with_transaction_returning_status'
    from /Users/RyanKing/.rvm/gems/ruby-1.9.3-p392/gems/activerecord-3.2.12/lib/active_record/connection_adapters/abstract/database_statements.rb:192:in `transaction'
    from /Users/RyanKing/.rvm/gems/ruby-1.9.3-p392/gems/activerecord-3.2.12/lib/active_record/transactions.rb:208:in `transaction'
    from /Users/RyanKing/.rvm/gems/ruby-1.9.3-p392/gems/activerecord-3.2.12/lib/active_record/transactions.rb:311:in `with_transaction_returning_status'
    from /Users/RyanKing/.rvm/gems/ruby-1.9.3-p392/gems/activerecord-3.2.12/lib/active_record/transactions.rb:259:in `block in save'
    from /Users/RyanKing/.rvm/gems/ruby-1.9.3-p392/gems/activerecord-3.2.12/lib/active_record/transactions.rb:270:in `rollback_active_record_state!'
    from /Users/RyanKing/.rvm/gems/ruby-1.9.3-p392/gems/activerecord-3.2.12/lib/active_record/transactions.rb:258:in `save'
    from (irb):3
    from /Users/RyanKing/.rvm/gems/ruby-1.9.3-p392/gems/railties-3.2.12/lib/rails/commands/console.rb:47:in `start'
    from /Users/RyanKing/.rvm/gems/ruby-1.9.3-p392/gems/railties-3.2.12/lib/rails/commands/console.rb:8:in `start'
    from /Users/RyanKing/.rvm/gems/ruby-1.9.3-p392/gems/railties-3.2.12/lib/rails/commands.rb:41:in `<top (required)>'
    from script/rails:6:in `require'
    from script/rails:6:in `<main>'1.9.3-p392 :004 > 
```

* * *

当我删除&模型之间的`has_many`and`belongs_to`关系时，一切正常。有谁知道这里发生了什么？据我所知，语法是正确的。`Page``PageIcons`

* * *

更新

属性是rails中的保留字，如下所示：[http ://www.ruby-forum.com/topic/2722528](http://www.ruby-forum.com/topic/2722528)

So changing `has_many :attributes` to `has_many :page_attributes, class_name="Attribute"` in the `Page` model does the trick.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T04:01:16.187

Attribute is reserved word in rails as pointed out here: [http://www.ruby-forum.com/topic/2722528](http://www.ruby-forum.com/topic/2722528)

So changing `has_many :attributes` to `has_many :page_attributes, class_name="Attribute"` in the `Page` model does the trick.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T02:30:32.057

I don't think you need the `:class_name` nor the `:foreign_key` hashes at all. Your relationships are set up the standard way, so those hashes are superfluous.

# fine-uploader - 使用以前上传的文件填充文件列表

> ID：15714247
> 
> 赞同：5
> 
> 时间：2013-03-30T02:26:06.950
> 
> 标签：fine-uploader

使用 jQuery 包装的 Fineuploader v3.3 版本。

是否可以使用上传文件夹中已有的文件填充文件列表？

我认为“_addToList（id，name）”应该可以解决问题，但我无法让它工作。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-19T11:18:54.840

似乎他们目前正在开发此功能： [https ://github.com/Widen/fine-uploader/issues/784](https://github.com/Widen/fine-uploader/issues/784)

因此，这将很快推出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T03:36:44.593

这不是 Fine Uploader 当前支持的行为。Fine Uploader 仅显示自创建当前上传程序实例以来用户已提交给上传程序的文件。它不会尝试成为一个多合一的 Web 应用程序。您可能可以通过 javascript 将您自己的项目添加到列表/UI 中。这可能不会非常困难，但似乎是一件奇怪的事情。

如果您想更多地讨论您的特定用例，请在[Github 问题跟踪器](https://github.com/Widen/fine-uploader/issues)中打开一个功能请求。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-10-03T16:25:48.047

通常，客户端代码不能添加存储或硬编码的基于路径的文件名，以用于任何类型的 POST 或上传操作。显然这是一种安全措施，您可以想象一个恶意网页是否可以将某种类型的烘焙文件名添加到通用 POST 操作中。因此，据我了解，只有用户可以通过文件浏览器为包含它的会话指定基于路径的文件名。这适用于 HTML/JavaScript/jQuery，但不确定基于 Flash/Silverlight 的解决方案是否也会受到限制. 我认为基于 Java 的上传器将不受此限制。但是您离已安装的软件越来越近了。

# shell - 从汇编语言（.asm，x86）执行shell脚本

> ID：15714250
> 
> 赞同：1
> 
> 时间：2013-03-30T02:26:39.217
> 
> 标签：shell, assembly

我想从我的 .asm 文件中执行一个 shell 脚本（正如下面代码中提到的那样），但是在汇编中找不到以下行的替代方法。我正在使用 masm611 来汇编和编译文件。

```
System.Diagnostics.Process proc = new System.Diagnostics.Process();
proc.StartInfo.FileName = "myscript.sh";
proc.Start(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T02:37:45.070

首先，你不说是哪种架构；所以这是无法回答的。一个简单的解决方案应该是只用 C 编写代码，然后编译成汇编代码——这是所有流行的 C 编译器都有的开关，AFAIK——然后只需移植到您自己的代码，并与适当的库链接。

免责声明：我不从事装配工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T02:48:45.343

由于您的示例是在 .NET 中并且您提到了 MASM，因此我假设您在 Windows 上工作。在 Windows 上，您可以使用 Win32 API 或 C RTL 来启动进程。无论哪种方式，您都必须链接到静态 (.lib) 库并调用函数。在 Win32 API 中，`ShellExecute()`是最容易使用的（也有`CreateProcess()`，但调用顺序很痛苦）。在 RTL 中，theres`_execl()`及其亲属。阅读从程序集中使用静态库的内容。

.NET 代码，就像`Process.Start()`您提到的那样，根本不会转换为 x86 程序集。

请问为什么必须从组装中完成？“程序集”和“shell 脚本”很少一起出现。注意：在 Windows 上，shell 脚本具有 .bat 或 .cmd 扩展名。另一方面，.sh 是 *nix 或 MacOS 的特征。

# php - YII - 在模块中访问 actionController

> ID：15714252
> 
> 赞同：0
> 
> 时间：2013-03-30T02:26:51.873
> 
> 标签：php, frameworks, module, yii

如何在模块中调用动作控制器？

我使用地址访问 url

> “example.com/admin/test”

我有这样的动作控制器测试

> protected-modules-admin-controllers-AdminController-actionTest

但输出是

> 错误 404 无法解析请求“admin/test”。

如果我调用控制器 actionTest

> 受保护的控制器-用户控制器-actionTest

我访问网址

> “example.com/user/test”

可以，没有问题

谢谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T02:35:50.537

`moduleID/controllerID/actionID`

`yourdomain/admin/admin/test`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T16:11:47.890

解决了

我将 index.php 更改为

```
foreach (glob(dirname(__FILE__).'/protected/modules/*', GLOB_ONLYDIR) as $moduleDirectory) {
        $this->setModules(array(basename($moduleDirectory)));
}
return parent::init(); 
```

以及主要的配置网址

```
'urlManager'=>array(
                        'urlFormat'=>'path',
                        'showScriptName'=>true,
                        'rules'=>array(

                                'admin/<action:\w+>'=>'admin/admin/<action>', 
```

likai 感谢您的帮助，现在我可以访问诸如 yourdomain/admin/admin/test 或 yourdomain/admin/test 之类的操作 :)

# ios - 为什么此代码在分布式应用程序上崩溃但在调试器中工作？

> ID：15714255
> 
> 赞同：2
> 
> 时间：2013-03-30T02:27:04.963
> 
> 标签：ios, objective-c, exception-handling, nsexception

我有简单的代码可以执行，如果它崩溃了，我想捕获异常，这样应用程序就不会崩溃。

```
@try {
    x = [self try_doMyWork:Param];
} @catch (NSException* e) {
    NSLog(@"Exception");
} 
```

虽然此代码在调试中工作并捕获异常（这是一个超出数组末尾的简单索引），但它在 iPhone 上的分布式应用程序中崩溃。

为什么会这样，我如何确保它也适用于分布式应用程序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T03:02:56.600

在调试模式下，堆管理器可以在对象前后分配缓冲区（称为守卫），并用已知值（如 0x7F）填充这些守卫。它这样做是为了在您释放内存时测试这些守卫，并且可以判断您是否在分配内存的末尾（或在它的开始之前）写入。通过这种方式，它可以告诉您您的代码有错误（内存涂鸦）。

在发布模式下，它不会创建这些保护，因此当您在分配的内存之外写入时，会发生不好的事情（如崩溃）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-30T03:04:59.227

未捕获的应用程序级异常只是导致崩溃的原因之一。BSD 信号，如 EXC_BAD_ACCESS，也可能导致崩溃——捕获 NSExceptions 不会阻止这些。

如果不知道 try_doMyWork: 的详细信息，就不可能说出具体的崩溃是什么，但我认为 C 层（而不是 Objective-C 层）崩溃的最常见原因是内存管理问题 - 尝试写入或读取某些内容您的应用不应该访问。最可能的解释是您在调试中看到的异常与您在分发中看到的错误不同。

# php - 如何从 unique_array 回显值？

> ID：15714257
> 
> 赞同：0
> 
> 时间：2013-03-30T02:27:41.690
> 
> 标签：php, arrays, echo

所以我有以下用于注册表单的 PHP 代码：

```
 <?php
$entries = array(
0 => $_POST['signup_username'],
1 => $_POST['signup_email'],
2 => $_POST['signup_password']);

$entries_unique = array_unique($entries);
$entries_unique_values = array_values($entries_unique);

echo " <br />".$entries_unique_values. " ";
?> 
```

...而且我意识到我的 echo 语法是错误的。如何在不为每个键分配变量的情况下回显数组的不同值（为什么我不能这样做有很多原因）？我也不想使用 r_print 函数。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T02:30:30.307

看看 php 的[`var_export()`](http://php.net/manual/en/function.var-export.php).

> var_export — 输出或返回变量的可解析字符串表示

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T02:30:37.340

试试这个[`implode()`](http://www.php.net/manual/en/function.implode.php)功能：

```
echo implode(', ', array_values($entries)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-30T02:33:36.400

你想如何输出它们？逗号分隔？每个人都有自己的路线？你有很多选择。这应该可以解决逗号分隔的问题：

```
echo " <br />".implode(', ', $entries_unique). " "; 
```

That said, be careful just outputting user input directly in HTML. This will leave you wide open to XSS vulnerabilities and invalid HTML in general. To output user input in HTML safely, you need to properly HTML encode the output. This would be preferable to the line above:

```
echo " <br />".implode(', ', array_map('htmlspecialchars', $entries_unique)). " "; 
```

See [`implode()`](http://php.net/implode), [`array_map()`](http://php.net/array_map), and [`htmlspecialchars()`](http://php.net/htmlspecialchars).

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-30T02:33:54.857

he foreach loop is really easy for arrays, especially single associate arrays.

```
foreach($entries_unique as $key => $value) {

echo "key: " . $key . " - value: " . $value . "<br/>";

} 
```

Check out php.net: [http://php.net/manual/en/control-structures.foreach.php](http://php.net/manual/en/control-structures.foreach.php)

# wordpress - 钻石多站点小部件

> ID：15714259
> 
> 赞同：0
> 
> 时间：2013-03-30T02:27:51.717
> 
> 标签：wordpress, wordpress-theming

我在我的网站中使用[Diamond MultiSite Widget 。](http://wordpress.org/extend/plugins/diamond-multisite-widgets/)除了帖子标题、网址、描述，我还想显示帖子缩略图。我已经尝试了很多次，联系了插件作者寻求帮助，但还是有心的。有谁知道该怎么做？

[参考：请检查此报价页面](http://smilepls.com/quotes/?p=513)中的“最新问题”块。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T09:07:30.253

首先，您必须获得属于您的帖子 ID 的帖子缩略图

其次，您必须显示帖子特色图片？

然后这段代码不起作用。请说明您的实际要求。

<?php $pages = get_pages(array('child_of' => 1)); ?>

```
<?php foreach ($pages as $page): ?>

        <?php echo get_the_post_thumbnail($page->ID, 'thumbnail'); ?>
        <h1><?php echo $page->post_title; ?></h1>
        <?php echo $page->post_content; ?>

<?php endforeach; ?> 
```

# css - CSS Styled Span Class

> ID：15714260
> 
> 赞同：0
> 
> 时间：2013-03-30T02:28:32.027
> 
> 标签：css, linear-gradients

I was looking on website an found a rather cool style for a span class, but I couldn't figure out how it was created. I looked at the css files, which is where I thought the code would be. Has anyone seen this style before or used it? I would really like to know how to re-create this effect.

![enter image description here](../Images/fd6f94c7484272fde6be20e3d4983a49.png)

the code that I was looking at was the following

```
 <p>
 <span class="new">New</span>
 </p> 
```

Any help would be greatly appreciated

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T02:38:04.163

I could produce the css code you need:

```
span.new {

padding-right:5px;    
padding-left: 25px;

-webkit-border-radius: 5px;
-moz-border-radius: 5px;
border-radius: 5px;

/* Next 6 lines do the same thing but they are used to prevent compatibility issiues in different browsers */
background-image: -ms-linear-gradient(left, #FFFFFF 0%, #EFA718 100%);
background-image: -moz-linear-gradient(left, #FFFFFF 0%, #EFA718 100%);
background-image: -o-linear-gradient(left, #FFFFFF 0%, #EFA718 100%);
background-image: -webkit-gradient(linear, left top, right top, color-stop(0, #FFFFFF), color-stop(1, #EFA718));
background-image: -webkit-linear-gradient(left, #FFFFFF 0%, #EFA718 100%);
background-image: linear-gradient(to right, #FFFFFF 0%, #EFA718 100%);
} 
```

you can get help from [http://ie.microsoft.com/testdrive/graphics/cssgradientbackgroundmaker/](http://ie.microsoft.com/testdrive/graphics/cssgradientbackgroundmaker/) and play with it.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T02:29:55.687

They are using an image that they probably created using Photoshop and just setting that image as the background to the span.

```
span{
    background: url('path to image') repeat-none left;
} 
```

Either that or they are using [css3 gradients](https://www.google.com/search?q=css3%20gradient&aq=f&oq=css3%20gradient&aqs=chrome.0.57j5j0l2j62l2.1641j0&sourceid=chrome&ie=UTF-8)

# php - Flexslider 在 WordPress 中不起作用

> ID：15714261
> 
> 赞同：0
> 
> 时间：2013-03-30T02:28:45.520
> 
> 标签：php, jquery, html, wordpress, flexslider

我正在尝试在 WordPress 中添加一个 flexslider 幻灯片，但是在将代码包含在 和幻灯片中之后，什么都没有显示。看着萤火虫，我为幻灯片制作的 div 在那里，但 flexslider 只是没有加载。我使用的是 TwentyTwelve 主题的子主题，我复制了子主题目录下的 header.php 进行修改。这些是代码：

这是标签中的代码：

```
<link rel="stylesheet" href="css/flexslider.css" type="text/css">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js"></script>
<script src="js/jquery.flexslider.js"></script>

<!-- Load the flexslider -->
<script type="text/javascript" charset="utf-8">
  $(window).load(function() {
    $('.flexslider').flexslider({
          animation: "fade",  // slide or fade
          controlsContainer: ".flex-container" // the container that holds the flexslider
    });
  });
</script> 
```

这里是页面中的幻灯片：

```
<div id="flexslider-container">
   <div class="flexslider">
       <ul class="slides">
           <li><img src="/images/Penguins.jpg" /></li>
           <li><img src="/images/Desert.jpg" /></li>
           <li><img src="/images/Koala.jpg" /></li>
        </ul>
   </div>
 </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T07:26:57.200

我最近刚刚在我的一个项目中使用了 FlexSlider。与其直接在主题中包含 JavaScript 和 CSS，不如试试这个：

在您的 Wordpress 主题中打开 functions.php，然后粘贴以下内容：

```
// flexslider
     wp_register_script( 'flexslider', get_stylesheet_directory_uri() . '/js/jquery.flexslider-min.js', array(), '2.1', false );
     wp_register_style( 'flex-stylesheet', get_stylesheet_directory_uri() . '/css/flexslider.css', array(), '', 'all' );
//jquery from google cdn
     wp_deregister_script('jquery');
     wp_register_script('jquery', 'http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js', false, '1.8.3'); 
```

然后在它下面（相同的文件functions.php）粘贴这个以及调用脚本：

```
 wp_enqueue_style('flex-stylesheet');
    wp_enqueue_script( 'jquery' );
    wp_enqueue_script( 'flexslider' ); 
```

哦，别忘了在模板中的某个地方包含调用 javascript。

# haskell - Extract list of imported modules from haskell module

> ID：15714263
> 
> 赞同：3
> 
> 时间：2013-03-30T02:28:52.473
> 
> 标签：haskell, haskell-src-exts

I want to use [haskell-src-exts](http://hackage.haskell.org/package/haskell-src-exts) to parse haskell source module. But it requires fixities of all the operators to be specified. So I need to have a list of all imported modules to extract fixities for all the operators in scope.

So, I need to parse module to get list of imported modules; and I need the list of imported modules to parse the module :(

The question: how to parse haskell source module without parsing it? Is there any other parser I can use? How [hlint](http://hackage.haskell.org/package/hlint) solves the issue?

`haskell-src-exts` provides [function](http://hackage.haskell.org/packages/archive/haskell-src-exts/1.13.5/doc/html/Language-Haskell-Exts-Parser.html#v%3agetTopPragmas) to extract top level pragmas. I need something similar, but for imported modules.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-13T21:37:49.807

Another approach would be to parse without fixities `parseFileWithMode defaultParseMode{ fixities =Nothing }`, and then once you've looked at the imports use `Language.Haskell.Exts.Fixity.applyFixities` to make the AST follow the right fixities. Who knows if that plays nicely with fixity decls you can put in let

# sql - 我需要知道如何创建交叉表查询

> ID：15714265
> 
> 赞同：25
> 
> 时间：2013-03-30T02:28:53.897
> 
> 标签：sql, pivot, crosstab

我需要帮助创建以下结果。我想到了一个 sql pivot 但我不知道如何使用它。看了几个例子，想不出解决办法。也欢迎任何其他关于如何实现这一点的想法。状态列必须是动态生成的。

有三个表，assets，assettypes，assetstatus

```
表：资产
资产ID
资产标签 varchar(25)
资产类型 int
资产状态整数

表：资产类型
id int
typename varchar(20)（例如：台式机、笔记本电脑、服务器等）

表：资产状况
id int
statusname varchar(20)（例如：已部署、库存、已发货等）

```

期望的结果：

```
AssetType Total Deployed Inventory Shiped ...
-------------------------------------------------- ---------
台式机 100 75 20 5 ...
笔记本电脑 75 56 19 1 ...
服务器 60 50 10 0 ...

```

一些数据：

```
资产表：
1,hol1234,1,1
2,hol1233,1,2
3,hol3421,2,3
4,svr1234,3,1

资产类型表：
1、桌面
2、笔记本电脑
3、服务器

资产状况表：
1、部署
2、库存
3、发货

```

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2013-03-30T03:00:48.097

这种类型的转换称为枢轴。您没有指定您使用的数据库，因此我将为 SQL Server 和 MySQL 提供答案。

* * *

**SQL Server：**如果您使用的是 SQL Server 2005+，则可以实现该`PIVOT`功能。

如果您有已知数量的要转换为列的值，则可以对查询进行硬编码。

```
select typename, total, Deployed, Inventory, shipped
from
(
  select count(*) over(partition by t.typename) total,
    s.statusname,
    t.typename
  from assets a
  inner join assettypes t
    on a.assettype = t.id
  inner join assetstatus s
    on a.assetstatus = s.id
) d
pivot
(
  count(statusname)
  for statusname in (Deployed, Inventory, shipped)
) piv; 
```

请参阅[SQL Fiddle with Demo](http://www.sqlfiddle.com/#!3/d7915/5)。

但是，如果您有未知数量的`status`值，那么您将需要使用动态 sql 在运行时生成列列表。

```
DECLARE @cols AS NVARCHAR(MAX),
    @query  AS NVARCHAR(MAX)

select @cols = STUFF((SELECT distinct ',' + QUOTENAME(statusname) 
                    from assetstatus
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

set @query = 'SELECT typename, total,' + @cols + ' from 
             (
                select count(*) over(partition by t.typename) total,
                  s.statusname,
                  t.typename
                from assets a
                inner join assettypes t
                  on a.assettype = t.id
                inner join assetstatus s
                  on a.assetstatus = s.id
            ) x
            pivot 
            (
                count(statusname)
                for statusname in (' + @cols + ')
            ) p '

execute(@query) 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!3/d7915/7)

这也可以使用带有 case 表达式的聚合函数来编写：

```
select typename,
  total,
  sum(case when statusname ='Deployed' then 1 else 0 end) Deployed,
  sum(case when statusname ='Inventory' then 1 else 0 end) Inventory,
  sum(case when statusname ='Shipped' then 1 else 0 end) Shipped
from
(
  select count(*) over(partition by t.typename) total,
    s.statusname,
    t.typename
  from assets a
  inner join assettypes t
    on a.assettype = t.id
  inner join assetstatus s
    on a.assetstatus = s.id
) d
group by typename, total 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!3/d7915/10)

* * *

**MySQL：**此数据库没有*数据透视*函数，因此您必须使用聚合函数和`CASE`表达式。它也没有窗口功能，因此您必须将查询稍微更改为以下内容：

```
select typename,
  total,
  sum(case when statusname ='Deployed' then 1 else 0 end) Deployed,
  sum(case when statusname ='Inventory' then 1 else 0 end) Inventory,
  sum(case when statusname ='Shipped' then 1 else 0 end) Shipped
from
(
  select t.typename,
    (select count(*) 
     from assets a1 
     where a1.assettype = t.id 
     group by a1.assettype) total,
    s.statusname
  from assets a
  inner join assettypes t
    on a.assettype = t.id
  inner join assetstatus s
    on a.assetstatus = s.id
) d
group by typename, total; 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!2/9f4cd/7)

那么如果你需要在 MySQL 中使用动态解决方案，你将不得不使用准备好的语句来生成要执行的 sql 字符串：

```
SET @sql = NULL;
SELECT
  GROUP_CONCAT(DISTINCT
    CONCAT(
      'sum(CASE WHEN statusname = ''',
      statusname,
      ''' THEN 1 else 0 END) AS `',
      statusname, '`'
    )
  ) INTO @sql
FROM assetstatus;

SET @sql 
  = CONCAT('SELECT typename,
              total, ', @sql, ' 
            from
            (
              select t.typename,
                (select count(*) 
                 from assets a1 
                 where a1.assettype = t.id 
                 group by a1.assettype) total,
                s.statusname
              from assets a
              inner join assettypes t
                on a.assettype = t.id
              inner join assetstatus s
                on a.assetstatus = s.id
            ) d
            group by typename, total');

PREPARE stmt FROM @sql;
EXECUTE stmt;
DEALLOCATE PREPARE stmt; 
```

请参阅[SQL Fiddle with Demo](http://www.sqlfiddle.com/#!2/9f4cd/6)。

两个数据库中的所有查询的结果都是相同的：

```
| TYPENAME | TOTAL | DEPLOYED | INVENTORY | SHIPPED |
-----------------------------------------------------
|  Desktop |     2 |        1 |         1 |       0 |
|   Laptop |     1 |        0 |         0 |       1 |
|   Server |     1 |        1 |         0 |       0 | 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-10-06T12:25:06.753

Using a non pivot compliant DBMS (Absolute Database) I was more successful using this SQL cross-tab equivalent statement:

```
SELECT
  sub.TypeName
, SUM(sub.[Count]) AS "Total"
, SUM(CASE WHEN AssetStatus='1' THEN sub.[Count] ELSE 0 END) AS "Deployed"
, SUM(CASE WHEN AssetStatus='2' THEN sub.[Count] ELSE 0 END) AS "Inventory"
, SUM(CASE WHEN AssetStatus='3' THEN sub.[Count] ELSE 0 END) AS "Shipped"
FROM
 (
SELECT
  t.TypeName
, AssetStatus
, COUNT(AssetID) AS "Count"
FROM
  Assets
  JOIN AssetTypes t ON t.ID = AssetType
  JOIN AssetStatus s ON s.ID = AssetStatus
GROUP BY t.TypeName, AssetStatus, s.StatusName
 ) sub
GROUP BY sub.TypeName
; 
```

As I realized this code (above) didn't work with MySQL I adapted my code as below executing equally well in MySQL as in my current Absolute Database. The reason is the specific NULL handling avoiding the pitfall of dBase, Paradox as well as Absolute Database generously accepting COUNT(NULL) = 0 not accepted in mainstream databases. So believing this will execute well in most databases (handling CASE ..) this is my adapted code:

```
SELECT
  sub.TypeName
, SUM(sub.AssetCase) AS "Total"
, SUM(CASE WHEN sub.StatusName = 'Deployed' THEN sub.AssetCase ELSE 0 END) AS "Deployed"
, SUM(CASE WHEN sub.StatusName = 'Inventory' THEN sub.AssetCase ELSE 0 END) AS "Inventory"
, SUM(CASE WHEN sub.StatusName = 'Shipped' THEN sub.AssetCase ELSE 0 END) AS "Shipped"
FROM
  (
   SELECT
     c.TypeName
   , c.StatusName
   , CASE WHEN a.AssetID IS NULL THEN 0 ELSE 1 END AS "AssetCase"
   FROM
     (
      SELECT
        t.ID AS tID
      , t.TypeName
      , s.ID AS sID
      , s.StatusName
      FROM
        AssetTypes t, AssetStatus s
     ) c
   LEFT JOIN Assets a
     ON a.AssetType = c.tID AND a.AssetStatus = c.sID
   ) sub
GROUP BY
  sub.TypeName
; 
```

Best Regards Niels Knabe

# matlab - Matlab pcolor() 函数和镜像输出

> ID：15714266
> 
> 赞同：0
> 
> 时间：2013-03-30T02:29:00.883
> 
> 标签：matlab, plot, matlab-figure

我正在尝试使用 pcolor() 绘制矩阵的图像。矩阵表示一个字段。（在我的情况下是一片海域！但这没关系：））。问题是当我使用 pcolor() 绘制矩阵时，矩阵是镜像绘制的。

一个例子：

A=[1 0 0;0 1 0;0 0 1];

如果我绘制矩阵，则单元格 (0,0) 将不会绘制在左上角，而是绘制在左下角。（很明显轴的开始是 (0,0) 我知道该函数正在工作正确！）我也知道翻转矩阵的flipdim（）函数的存在。问题是如果我使用这种方法，代码会变得很难看。例如，矩阵中的 cell(0,0) 将出现在 cell(size(A,1),0) 中，一切都变得相反！我怎样才能以更优雅的方式面对这个问题？（例如要打印为 terian 而不是镜像的矩阵）

编辑：

使用轴 ij 求解

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T03:40:32.790

通常，要更改轴的方向，您可以将`YDir`（或`XDir`）属性从正常设置为反向。

```
set(gca,'YDir','rev') 
```

PCOLOR 功能产生轴`YDir`设置为正常。相反，IMAGESC`YDir`默认是反向的。

# php - 使用php组合和求和多维关联数组中的值

> ID：15714267
> 
> 赞同：0
> 
> 时间：2013-03-30T02:29:02.080
> 
> 标签：php, arrays, multidimensional-array, sorting, associative

我有一个如下所示的关联数组：

```
Array (
    [0] => Array (
        [amount] => 3
        [name] => Chuck
    )
    [1] => Array (
        [amount] => 2
        [name] => Steve
    )
    [2] => Array (
        [amount] => 5
        [name] =>
    )
    [3] => Array (
        [amount] => 4
        [name] => Chuck
    )
    [4] => Array (
        [amount] =>
        [name] => Chuck
    )
) 
```

我需要删除缺少名称或数量的值，例如 [2] 和 [4]，然后将每个名称的总数相加，以便最终数组为：

```
Array (
    [0] => Array (
        [amount] => 7
        [name] => Chuck
    )
    [1] => Array (
        [amount] => 2
        [name] => Steve
    )
) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2020-09-08T09:36:02.780

对于现在正在寻找这个的人来说，这会更干净：

```
$sum = array_sum(array_column($data, 'amount')); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T02:37:05.020

试试这个：

```
$starting_array = array( ... ); // Initial array with your setup
$final_array = array();
$sum = 0;

foreach ($starting_array as $idx => $data) {
  if (!empty($data['amount']) && !empty($data['name'])) {
    $final_array[$idx] = $data;
    $sum += $data['amount'];
  }
}

// After looping through all of the items, $final_array should contain all
// of the specific items that have an amount and name set. In addition, the
// total of all of the amounts will be in $sum. 
```

看看 php 的[`empty()`](http://php.net/manual/en/function.empty.php). 注意：如果`0`是一个允许的值，您可能想[`is_null()`](http://php.net/manual/en/function.is-null.php)改用。

# android - Can't find the database's package

> ID：15714273
> 
> 赞同：-1
> 
> 时间：2013-03-30T02:29:32.537
> 
> 标签：android, database, sqlite

I am creating an Android application and it have a lot of packages. I need to do a database backup, and I don't know which package it is.

```
File dbFile =new File(Environment.getDataDirectory() +"/data/Your.Package/databases/databaseName.db"); 
```

Is "Your.Package" the package where my SQLite classes is?

I am gettin :

```
[Configuracoes.java:235:doInBackground()] /data/data/org.Database/databases/banco.db (No such file or directory) 
```

When I try the package where I created the database.

Where is the correct one?

I am sorry if it is a stupid question.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T03:25:21.133

Location of your database is

/data/data/YOUR_PACKAGE/databases/ab.db

You can find it on Android manifest file.

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
  android:versionCode="0.0"
  package="YOUR_PACKAGE" android:versionName="1.0"> 
```

# php - 复杂的嵌套数组问题

> ID：15714275
> 
> 赞同：2
> 
> 时间：2013-03-30T02:29:53.313
> 
> 标签：php, javascript, mysql

我想将数据库中的数据查询到一个 json 数组中，该数组最终会在 javascript 中生成一个力有向图。这是 Json 数组应该是什么样的。但是节点可以有多个邻接或没有，我如何查询一个json数组，其中邻接部分因节点而异，并且能够根据节点的邻接数量进行调整？

```
Var JSON =[ 
 {
  "adjacencies": [
    {
      "nodeTo": "graphnode9", 
      "nodeFrom": "graphnode5", 
      "data": {}
    }
  ], 
  "data": {
    "$color": "#416D9C", 
    "$type": "star"
  }, 
  "id": "graphnode5", 
  "name": "graphnode5"
},
]; 
```

或者他们可以拥有

```
Var JSON =[ 
 {
  "adjacencies": [
    {
      "nodeTo": "graphnode9", 
      "nodeFrom": "graphnode5", 
      "data": {}
    },
    {
      "nodeTo": "graphnode9", 
      "nodeFrom": "graphnode5", 
      "data": {}
    },
    {
      "nodeTo": "graphnode9", 
      "nodeFrom": "graphnode5", 
      "data": {}
    }
  ], 
  "data": {
    "$color": "#416D9C", 
    "$type": "star"
  }, 
  "id": "graphnode5", 
  "name": "graphnode5"
},
]; 
```

或者他们不能有任何

```
Var JSON =[ 
 {
  "adjacencies": [], 
  "data": {
    "$color": "#416D9C", 
    "$type": "star"
  }, 
  "id": "graphnode5", 
  "name": "graphnode5"
},
]; 
```

到目前为止，这是我的尝试，但是这只产生一个只允许一个邻接的 json，如何设置一个 Json 查询来调整节点具有的邻接数量？只加载一次数据和 id 部分但允许改变邻接？

这是我的数据库结构

```
nodes                 Relationships                      
-----                 -------------
id int(11),           id int(11),
name varchar(35),    goingto int(11), //this is the destination node from the id relation 
color varchar(7),     data varchar(0) null
type varchar (12),    Foreign key (id) references nodes(id)
Primary key (id)       

engine = innodb 
```

这是我的尝试

```
function getjson(){  
 $db = adodbConnect();
$query = "SELECT nodes.*, relationships.* FROM nodes inner JOIN relationships ON nodes.id =   relationships.id";
$result = $db -> Execute($query);

while($row=$result->FetchRow())
{
  $id= (float)$row['id'];
  $name = $row['name'];
  $color1 = $row['color'];
  $type1 = $row['type'];
  $to= (float)$row['goingto']; 
  $thumb =$row['thumb']; //image path

  $array[] = array(
  "adjacencies" => array( array(
  "nodeTo" => "$to",
  "nodeFrom" => "$id",
  "data" => array() )),
  "data" => array(
  "$"."color" => $color1,
  "$"."type" => $type1 ),
  "id" => $id,
  "name" => "<img src='".$thumb."' height='25' width='25' alt='root'/><label>".$name."</label>");
}

$json = json_encode($array);
print "$json";
//return $json;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T04:21:58.437

如果您想在单个查询中返回结果，那么您最终会得到节点的重复数据，在与该节点有不同邻接关系的每个单独的行中......这很好，这就是它的工作原理。

但是，如果该节点上没有邻接关系，则不会返回节点（因为您使用的是`INNER join`. 您应该使用 a`LEFT join`来包含相关邻接表中没有结果的节点）。

通过按节点排序`id`，我们明确地确保所有节点及其邻接出现分组在一起。这可能已经发生了，因为`id`是您的 pk，因此排序是以“自动”方式发生的。但是 an`ORDER BY nodes.id`可以确保发生这种情况，并使任何查看代码的人都清楚您的意图。

此外，因为您`*`要从两个表中返回所有内容，所以您将在`node.id`和上发生列名冲突`relationship.id`。理想情况下，您应该明确命名列以避免这种情况，以便在 PHP 中获得可预测的结果。

所以你的 SQL 可能看起来更像：

```
SELECT 
    n.id as n_id,
    n.name,
    n.color,
    n.type,
    r.id as r_id,
    r.goingto,
    r.data 

FROM 
    nodes n

    LEFT JOIN relationships r
    ON n.id = r.id

ORDER BY
    n.id 
```

这将返回一个类似于以下内容的结果集：

```
n_id  | name  | color  |  type | r_id | goingto |  data 
------+-------+--------+-------+------+---------+-----------
1     | node1 | red    | type1 | 1    | 5       | stuff 
1     | node1 | red    | type1 | 2    | 6       | morestuff 
2     | node2 | blue   | type2 | 3    | 10      | whatever 
3     | node3 | green  | type3 | null | null    | null 
4     | node4 | orange | type4 | 4    | 20      | xxx1 
4     | node4 | orange | type4 | 5    | 21      | xxx2 
4     | node4 | orange | type4 | 6    | 22      | xxx3

etc... 
```

（即假设节点 1 有两个关系，节点 2 有 1 个关系，节点 3 没有关系，节点 4 有 3 个）。

然后，构建数组的代码只需要迭代结果，仅当当前记录的节点与前一个节点不同时才构建一个新节点（即我们依靠`ORDER BY node.id`“收集”所有信息一个特定的节点，顺序）。

此代码尚未经过测试，但我认为意图很明确，您应该可以根据需要弯曲它 - 但它基本上只是实现了上述内容。

用所有这些替换你的`while`循环。

```
$previd = -1;
while($row=$result->FetchRow())
{
    $id= (float)$row['n_id']; // <--- note change from 'id' to 'n_id'
    $name = $row['name'];
    $color1 = $row['color'];
    $type1 = $row['type'];
    $to= (float)$row['goingto']; 
    $thumb =$row['thumb']; //image path

    // Is this row the start of a new node?    
    if ($previd != $id) {
        // Yes, new node.  Record our new node id, for future new node checks.
        $previd = $id; 

        // Store the previous node we've already built, now that it's complete (but only if there was a previous node!)
        if ($previd != -1) {
            $array.push($node);
        }

        // Start our new node off, ready to accept adjacencies
        $node = array(
            "adjacencies" => array(),
            "data" => array(
                    "$"."color" => $color1,
                    "$"."type" => $type1 
                ),
            "id" => $id,
            "name" => "<img src='".$thumb."' height='25' width='25' alt='root'/><label>".$name."</label>");
    } 

    // Any adjacency for this node, on this row?
    if ($to != null) { // <-- Not sure about this line!
        // Yes there is, so create the new adjacency record and add it to the current node's adjacency array.
        $node["adjacencies"].push(
            array(
                "nodeTo" => "$to",
                "nodeFrom" => "$id",
                "data" => array() 
            )
        );
    }
} 
```

我不确定“无邻接”将如何表示`$to`- 即这将是“null”还是什么。我会把它留给你测试，但我只想说你需要在行中反映这一点`if ($to != null) { // <-- Not sure about this line!`

# c - 防止链表中的 char * 改变

> ID：15714280
> 
> 赞同：0
> 
> 时间：2013-03-30T02:30:29.063
> 
> 标签：c, linked-list, char

好的，所以在我的程序中，我有一个 main 函数，在该函数中我将字符串输入到缓冲区（char buffer[20]）中。它将这个作为 char * 传递给创建链表结构的函数，将结构的 char * 值设置为等于输入文本 char *，然后返回结构指针并将其放在我的列表的前面。现在，当我输入另一个字符串来创建另一个链表结构时，它会将 BOTH 结构的 char * 值设置为我刚刚输入的文本。我怎样才能使它可以将不同的字符串存储在不同的链表结构中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T02:33:03.550

问题是你放入链表的所有指针都指向完全相同的位置——`char buffer[20]`你提到的。每次输入新字符串时，它都会覆盖缓冲区中的旧字符串。您读取的前一个指针，它曾经并且仍然指向字符缓冲区，现在指向最近读取的字符串。

解决办法是把`strdup`缓冲区的结果存储`strdup`在链表中。[这将使用从heap](https://stackoverflow.com/questions/79923/what-and-where-are-the-stack-and-heap)分配的空间复制字符串（因此得名），因此每个字符串都有自己的内存。

当你完成它们时，不要忘记最终`free`返回的每个字符串！`strdup`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T02:33:08.677

您可能会写入相同的`buffer`，并且有两个`char *`指向该缓冲区的指针。

您需要复制缓冲区，例如使用`strdup`（确保完成后释放字符串）。或者，将链表节点结构中的 a 替换为`char *`a ，然后将字符串替换为那里。`char [20]``strcpy`

# php - 如何计算 doc、xls、pdf 和 txt 文件中的单词

> ID：15714290
> 
> 赞同：4
> 
> 时间：2013-03-30T02:32:00.963
> 
> 标签：php, html

我有一个场景，我需要计算文件中的单词数。我有不同的文件格式，例如`.doc`,和. 我正在使用这种方法进行计数：`.xls``.pdf``.txt`

```
<form method="post" action="" enctype="multipart/form-data">
    <input type="file" name="docfile" />
    <input type="submit" name="submit" />
</form>

<?php
    if(isset($_POST['submit'])){
        $file = $_FILES['docfile']['name'];
        $file = str_replace(" ","_",$file);
        //$file = file_get_contents($file);

        $ext = pathinfo($file, PATHINFO_EXTENSION);
        move_uploaded_file($_FILES['docfile']['tmp_name'],"uploads/".$file);

        if($ext == "txt" || $ext == "pdf" || $ext == "doc" || $ext == "docx"){
            $file = file_get_contents("uploads/".$file);
            echo str_word_count($file);
        }
    }
?> 
```

但它没有返回文件的正确字数。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-30T03:13:56.910

[Apache Tika](http://tika.apache.org/)是一个 Java 框架，能够识别大量文档类型并从中提取元信息。它能够确定它识别的许多文档类型的字数。

我为您的 PHP 问题提到了这个 Java 框架，因为它有一个名为[PhpTikaWrapper](https://github.com/pierroweb/PhpTikaWrapper)的 PHP 包装器。我从未使用过包装器，但 Apache Tika 可以提取您所追求的元信息，因此调查包装器可能会证明是有益的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T02:50:48.413

你在那里有一项艰巨的任务。`.doc` `.pdf`并且`.xls`不仅仅是可读的。要对此进行测试，请尝试使用基本文本编辑器（如`notepad`或`gedit`. 你会看到什么似乎是胡言乱语。这与 PHP 在读取文件内容时看到的相同。

`.xls`并且`.doc`可能可以使用 PHPOffice 中的 PHPWord 和 PHPExcel 进行[解析](https://github.com/PHPOffice)。您将需要查看这些库。我对PDF一无所知，但可能有一些东西。

我建议编写一系列都实现类似接口的类，以便您可以根据扩展名切换它们。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-10-13T23:31:17.820

我一直在研究一个通用类，它结合了网络上的各种方法以及 Stack Overflow，它为 doc、docx、pdf 和 txt 文件提供字数、行数和页数。我希望它对人们有用。如果有人可以让 RTF 使用它，我会喜欢拉请求！[https://github.com/joeblurton/doccounter](https://github.com/joeblurton/doccounter)

# android - YouTubePlayerSupportFragment 启动重复 Activity

> ID：15714291
> 
> 赞同：8
> 
> 时间：2013-03-30T02:32:05.977
> 
> 标签：android, youtube, youtube-api, android-fragmentactivity

我正在使用 YouTubePlayerSupportFragment 在我的应用中嵌入 YouTube 视频。嵌入时效果很好，视频播放，一切都很棒。

当我点击嵌入的 YouTube 视频片段的全屏按钮时，第一个奇怪的事情发生了：它实例化了现有封闭 Activity 的新副本......我不知道为什么。

我有一个 Activity，RootActivity，它在 ViewPager 中显示几个片段。我目前正在处理的片段称为 EasyModePurchaseFragment。该 EMPF 在其布局 xml 中嵌入了 YouTubePlayerSupportFragment：

```
<fragment
    android:name="com.google.android.youtube.player.YouTubePlayerSupportFragment"
    android:id="@+id/youtube_fragment"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_marginLeft="20dp"
    android:layout_marginRight="20dp"
/> 
```

当我点击 YouTubePlayerSupportFragment 上的全屏按钮时，会实例化一个全新的 RootActivity。这是为什么？

它给我带来了一些问题，因为它没有以正确的方式完全创建，这意味着它会导致崩溃......这不好。

编辑：

我还尝试拦截 onFullScreen() 事件，而不是调整视图大小，我只是尝试使用他们提供的意图启动一个独立的 YouTube 播放器：

```
Intent intent = YouTubeStandalonePlayer.createVideoIntent(getActivity(), myDeveloperKey, videoId);
getActivity().startActivity(intent); 
```

奇怪的是，这也破坏并重新创建了我的 RootActivity。如果我启动打开 Web URL 的意图，我的活动不会被破坏和重新创建，为什么当我启动 YouTubeStandalonePlayer 意图时它会被破坏和重新创建？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-10-27T19:45:58.350

添加到包含 YouTubePlayerSupportFragment 这个属性的活动

```
android:configChanges="screenSize|orientation|keyboardHidden" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-11T16:35:41.413

也许这会有所帮助，我非常努力地找到了解决您的具体问题的方法，但没有任何运气。如果不发布更多代码，很难确切地看到您的应用程序中设置的 YouTube 播放器。

[https://github.com/youtube/yt-android-player/blob/master/src/com/examples/youtubeapidemo/FullscreenDemoActivity.java](https://github.com/youtube/yt-android-player/blob/master/src/com/examples/youtubeapidemo/FullscreenDemoActivity.java)

# php - 创建合适的控制器

> ID：15714293
> 
> 赞同：0
> 
> 时间：2013-03-30T02:32:42.447
> 
> 标签：php, codeigniter

我有一个控制器，它有很多功能，我注意到我的 get_participants 函数没有运行，当我加载我的**欢迎视图**时，因为当我尝试使用时，`<?php echo $product ?>`我得到*未定义的变量异常。*

我不希望在我的索引函数中包含加载欢迎视图的所有内容，而是创建一个视图的许多函数。调用这个控制器的正确方法是什么，以便它运行类中的每个函数，或者有什么更好的方法我应该这样做？

```
class Welcome extends CI_Controller
{
    function __construct()
    {
        parent::__construct();

        $this->load->helper('url');
        $this->load->library('tank_auth_groups','','tank_auth');
        $this->load->model('Participant_model');
    }

    function index()
    {
        if (!$this->tank_auth->is_logged_in()) {
            redirect('/auth/login/');
        } else {
            $data['user_id']    = $this->tank_auth->get_user_id();
            $data['username']   = $this->tank_auth->get_username();
                $this->load->view('welcome', $data);
        }

    }

   public function get_participants()
    {

        $data['product'] = $this->Participant_model->get_all_records();

        $this->load->view('welcome', $data);
    }

} 
```

## 看法

```
Hi, <strong>
<?php echo $username; ?></strong>! You are logged in now. 
<?php echo anchor('/auth/logout/', 'Logout'); ?>
<?php echo $product; ?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-30T02:48:15.083

为什么不直接在 index 中调用 products 模型？

```
function index()
{
    if (!$this->tank_auth->is_logged_in()) {
        redirect('/auth/login/');
    } else {
        $data['user_id']    = $this->tank_auth->get_user_id();
        $data['username']   = $this->tank_auth->get_username();
        $data['product'] = $this->Participant_model->get_all_records();

        $this->load->view('welcome', $data);
    }
} 
```

没有明显的理由将其分成自己的方法。

您还可以设置类变量并让方法相应地影响它们。这在很大程度上取决于您的需求，但适当的示例可能并不完全适用。

```
class Welcome extends CI_Controller
{
    private $data = array(
        'user_id' => null,
        'username' => null,
        'product' => null
    );

    function __construct()
    {
    ... 
```

然后让个别方法影响公共 $data 数组中的某些元素

```
 public function get_participants()
    {
        $this->data['product'] = $this->Participant_model->get_all_records();
    } 
```

并让您的索引方法加载类数组而不是专门填充它......

```
function __construct()
{
    parent::__construct();

    $this->load->helper('url');
    $this->load->library('tank_auth_groups','','tank_auth');

    if (!$this->tank_auth->is_logged_in()) {
        redirect('/auth/login/');
    } else {
        $this->data['user_id']    = $this->tank_auth->get_user_id();
        $this->data['username']   = $this->tank_auth->get_username();
    }

    $this->load->model('Participant_model');
}

function index()
{
    $this->get_participants();
    $this->load->view('welcome', $this->data);
} 
```

请注意，这只是您如何安排课程以满足您的需求的一个示例。不一定是好习惯或任何东西的例子。最终，您应该以适合您需要并且任何正常人都可以合理阅读的逻辑方式进行编程。只是我的观点。

I should say I think it is a bad idea to try to set up a class that forcibly runs every method inside it to create one view. A linear execution is essentially the same thing as piling everything into the index method. Maybe I missed the point of your statement though.

# r - 如何删除一些比例？

> ID：15714303
> 
> 赞同：0
> 
> 时间：2013-03-30T02:34:40.470
> 
> 标签：r

```
x <- seq(0.5, 0.9, length = 400)
y <- dnorm(x,0.7,0.0458)
plot(x, y, type="l",  yaxt="n",ann=FALSE,bty="n")
axis(1, at=c(0.7, 0.8),tick=FALSE)
mtext("Proportions", 1, at=0.9, line=2) 
```

我得到了带有代码的photo1.jpg，我怎样才能删除x轴上的一些比例（0.5,0.6），也就是说，将photo1.jpg更改为photo2.jpg？

这是一张照片1.jpg ![在此处输入图像描述](../Images/9163e630a053af9c222c4a37186290e9.png)

这是一张照片2.jpg ![在此处输入图像描述](../Images/8946f706f5540c15889bbd41c0fbce14.png)

# objective-c - 有没有办法将 SPDY 与谷歌云存储目标 c api 一起使用？

> ID：15714307
> 
> 赞同：1
> 
> 时间：2013-03-30T02:35:15.033
> 
> 标签：objective-c, google-cloud-storage

我想将 SPDY 与谷歌云存储目标 c API 一起使用。有没有办法做到这一点？我正在研究 iPhone 的 SPDY 代码，但很难构建 openssl，而且我听说 iOS 的 Chrome 浏览器正在使用 SPDY。也许有更简单/更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-18T22:23:26.140

谷歌云存储支持 SPDY。[因此，您可以在https://storage.googleapis.com](https://storage.googleapis.com)使用任何通用的 Objective-c SPDY 库与 Google Cloud Storage 对话。

我对任何objective-c SPDY 库都没有经验，但objective-c spdy 的最佳结果是github 上的以下项目：[https ://github.com/sorced-jim/SPDY-for-iPhone](https://github.com/sorced-jim/SPDY-for-iPhone)

# matlab - Matlab如何绘制时间序列？

> ID：15714312
> 
> 赞同：1
> 
> 时间：2013-03-30T02:35:52.833
> 
> 标签：matlab, time-series

我收集了一周的一些数据，比如从 2​​013 年 3 月 11 日上午 8:00:00 到上午 11:00:00 之间。

如何在整个一周内针对这个时间绘制变量 x？我正在尝试使用时间序列或情节。但无法确定我需要什么。

# ember.js - 观察视图中的控制器属性并对其做出反应

> ID：15714317
> 
> 赞同：0
> 
> 时间：2013-03-30T02:36:49.820
> 
> 标签：ember.js

感谢[Luke Melia 在上次 EmberJS NYC 聚会上的精彩演讲](https://speakerdeck.com/lukemelia/introduction-to-ember-dot-js)，我花了一整夜时间重构我的东西以应用你的一些概念，我非常感谢我如何更好地理解框架的一部分。

当被问及他将如何处理使控制器能够指示视图的某些行为时，他提到在视图中观察控制器的属性。考虑到这一点，我继续拆分我的应用程序，以确保我正在利用路由器管理状态的能力。所以我创建了一个 EditProfile 路由。

为了指示我的 EditProfile 部分的切换，我在 EditProfileController 上创建了一个 showEditProfile 属性，并在我的 EditProfileView 中设置了一个观察者。

问题是我无法让它工作。如果我单击 EditProfile 模板中的“保存”或“取消”按钮，它会分别触发“confirmProfileUpdate”或“cancelProfileUpdate”，从而将 showEditProfile 设置为 false。这样做应该会触发视图的观察者，对吗？似乎并非如此。

这是代码：

**application_routes.coffee**

```
 App.ApplicationRoute = Ember.Route.extend(
      setupController: ->
        @controllerFor("user").set "model" App.User.find(App.current_profile_id)
) 
```

**edit_profile.hbs**

```
<div id="profile_edit">
  <div class="section">
    <h1>Edit Profile</h1>
  </div>
  <form id="edit_user">
    <div class="section">
      <label>Name</label>
      {{view Em.TextField valueBinding="name" }}
      <label>Location</label>
      {{view Em.TextField valueBinding="location" }}
      <label>Motto</label>
      {{view Em.TextField valueBinding="description" }}
    </div>
    <div class="section">
      <label>Email</label>
      {{view Em.TextField valueBinding="email" }}
      <label>Password</label>
      {{view Em.TextField valueBinding="password" type="password" }}
      <label>Re-enter Password</label>
      {{view Em.TextField valueBinding="password_confirmation" type="password" }}
      <div class="btns">
        <button type="submit" class="btn" {{action "confirmProfileUpdate" content}}>Save</button>
        <button type="submit" class="btn" {{action "cancelProfileUpdate" content}}>Cancel</button>
      </div>
    </div>
  </form>
</div> 
```

**edit_profile_controller.coffee**

```
App.EditProfileController = Ember.ObjectController.extend(
  showEditProfile: true
) 
```

**edit_profile_routes.coffee**

```
App.EditProfileRoute = Ember.Route.extend(
  renderTemplate: -> 
   @render "edit_profile", {outlet: "edit_profile", controller: 'user'}

  events:
    confirmProfileUpdate: (record) ->
      record.get("transaction").commit()
      # @transitionTo('index')
      console.log "confirmed! toggling the slider back up"
      @controller.set "showEditProfile", false

    cancelProfileUpdate: (record) ->
      record.get("transaction").rollback()
      # @transitionTo('index')
      console.log "cancelling! toggling the slider back up"
      @controller.set "showEditProfile", false
) 
```

**edit_profile_view.coffee**

```
App.EditProfileView = Ember.View.extend(

  toggleEditProfile: (->
    console.log "toggling!"
    $("#profile_ edit").slideToggle "slow"
  ).observes("controller.showEditProfile")

  didInsertElement: ->
    @controller.set "showEditProfile", true
) 
```

我创建了一个卢克方法的简化示例，该示例有效：http: [//jsbin.com/ujosew/4/edit](http://jsbin.com/ujosew/4/edit)

所以在这一点上，我想知道我的视图正在观察哪个控制器是否没有混淆（您会注意到 EditProfileController 正在使用 User 模型）。

任何解决方案的提示都是有益的，因为我没有选择......

---**编辑感谢 Alex Matchneer (@machty) 在#emberjs IRC chan 上的帮助（我向所有寻求指导的人推荐）** ---

正如 Teddy 在他的回答中指出的那样，通过更改控制器，观察者不会做出反应是正常的。所以我把代码改成了这个，它现在可以工作了

**application_routes.coffee**

```
 App.ApplicationRoute = Ember.Route.extend(
      setupController: ->
        @controllerFor("user").set "model" App.User.find(App.current_profile_id)
) 
```

**edit_profile.hbs**

```
<div class="section">
  <h1>Edit Profile</h1>
</div>
<form id="edit_user">
  <div class="section">
    <label>Name</label>
    {{view Em.TextField valueBinding="name" }}
    <label>Location</label>
    {{view Em.TextField valueBinding="location" }}
    <label>Description</label>
    {{view Em.TextField valueBinding="description" }}
  </div>
  <div class="section">
    <label>Email</label>
    {{view Em.TextField valueBinding="email" }}
    <label>Password</label>
    {{view Em.TextField valueBinding="password" type="password" }}
    <label>Re-enter Password</label>
    {{view Em.TextField valueBinding="password_confirmation" type="password" }}
    <div class="btns">
      <button type="submit" class="btn" {{action "confirmProfileUpdate" content}}>Save</button>
      <button type="submit" class="btn" {{action "cancelProfileUpdate" content}}>Cancel</button>
    </div>
  </div>
</form> 
```

**edit_profile_controller.coffee**

```
App.EditProfileController = Ember.ObjectController.extend(
  needs: ['user']
  visible: true
) 
```

**edit_profile_routes.coffee**

```
App.EditProfileRoute = Ember.Route.extend(
  renderTemplate: Ember.K

  setupController: ->
    @controllerFor("edit_profile").set "model", App.User.find(App.current_profile_id)

  activate: ->
    @controllerFor("edit_profile").set "visible", true

  deactivate: ->
    @controllerFor("edit_profile").set "visible", false

  events:
    confirmProfileUpdate: (record) ->
      record.get("transaction").commit()
      @transitionTo('index')

    cancelProfileUpdate: (record) ->
      record.get("transaction").rollback()
      @transitionTo('index')
) 
```

**edit_profile_view.coffee**

```
App.EditProfileView = Ember.View.extend(
  classNames: ['profile_edit']

  toggleEditProfile: (->
    $(".profile_edit").slideToggle "slow"
  ).observes("controller.visible")

  didInsertElement: ->
    $(".profile_edit").slideToggle "slow" if @get("controller.visible")
) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T08:30:39.430

通过覆盖`renderTemplate`：

```
@render "edit_profile", {outlet: "edit_profile", controller: 'user'} 
```

您将视图的控制器设置为`App.UserController`.

在路由中，`@controller`是`App.EditProfileController`，但在视图中，`controller`属性指的是`App.UserController`。

他们引用不同的控制器。

# c++ - C++ - 如何将变量从一种形式传递到另一种形式？

> ID：15714319
> 
> 赞同：-2
> 
> 时间：2013-03-30T02:36:55.330
> 
> 标签：c++, windows, forms

我有一个 Form1.h 和一个 Form2.h

Form1.h 已经包含 Form2.h，因为我通过单击 Form1 中的按钮来启动 Form2。那么我如何将变量从 Form1.h 传递到 Form2.h

这是 Form1.h 的示例

```
#include "Form2.h"

String^ str = "Hello World"; //This variable needs to be passed to Form2.h

//Other windows forms application code here 
```

Form2.h 的一个例子

```
//#include "Form1.h" this will cause an error

//How would i pass variable str to here?

//Other windows forms application code here 
```

编辑：

这就是我修复它的方法

这就是我修复它的方式。

表格1.h

```
#include "Form1.h"

Form2^ frm = gcnew Form2;
frm->Username = "text here";//This passes the variables.
frm->Password = "other text"; 
```

表格2.h

```
public: String^ Username;
public: String^ Password; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T02:55:11.850

不完全确定您的要求，但我假设您想从*Form1类中设置**Form2*类中的变量？如果是这样的话：

 *```
class Form1{
  private:
    int data;
  public:
    Form1(){data=4;}
    int getData(){return data;}  //returns Form1 data variable
    void setForm2Data(Form2&);   //sets Form2 data
};

class Form2{
  private:
    int data;
  public:
    void setData(int inData){data = inData;}
};

void Form1::setForm2Data(Form2 &o){
  o->setData(getData());  //argument is a Form2 object, "setData" can set that objects data variable
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T03:22:07.713

您会收到一个错误，因为您的预处理器指令会导致双重包含。为避免这种情况，您可以使用编译指示守卫

表格1.h：

```
#ifndef FORM1_H
   #define FORM1_H
   #include "Form2.h"
   extern string str = "Hello World";
#endif 
```

表格2.h：

```
#include "Form1.h" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-30T03:49:13.207

有几种方法..一种是使用全局变量（不一定是最好的方法..取决于具体情况）

First, you can solve the multiple inclusion problem by using [include guard](http://en.wikipedia.org/wiki/Include_guard).

Then you can declare a global variable using extern keyword in the header, and plug in the value in the implementation file.

For example:

```
//file: mylib.h
#ifndef MYLIB_H
#define MYLIB_H
extern int myGlobalVar;
#endif

//file: mylib.cpp
#include "mylib.h"
int myGlobalVar = 123; 
```

Now you can `#include "mylib.h"` anywhere in other file as many time as you like and access the same variable*

# javascript - Angular $http.get to same host but different port fails with no meaningful error

> ID：15714321
> 
> 赞同：3
> 
> 时间：2013-03-30T02:37:14.333
> 
> 标签：javascript, angularjs

I'm running an Angular script that performs an $http.get(...) on a REST resource located at `http://localhost:7700`, but it's executing from a page served at `http://localhost:4400`. I'm not certain if this is the problem, but it results in the error() callback firing, with a status of 0, and nothing in the data parameter. Any ideas on why this would be happening?

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-30T02:44:20.053

[Same origin policy](https://developer.mozilla.org/en-US/docs/JavaScript/Same_origin_policy_for_JavaScript) is protocol + host + port

You would need to enable [CORS](http://en.wikipedia.org/wiki/Cross-origin_resource_sharing) support to allow this situation

# java - 如何将多个 .wav 文件从客户端发送到服务器

> ID：15714324
> 
> 赞同：0
> 
> 时间：2013-03-30T02:37:52.817
> 
> 标签：java

我有一些从麦克风获取输入的代码，将其保存为`.wav`文件并将其发送到服务器。在服务器端，将接收 .wav 文件。现在，我希望对其进行修改，以便客户端应该能够发送多个 .wav 文件，而服务器应该接收它们并将它们全部存储在缓冲区中。请帮我。

客户端代码如下：

```
`import javax.swing.*;
 import java.awt.*;
 import java.awt.event.*;
 import java.io.*;
 import java.lang.*;
 import java.net.*;

 import javax.sound.sampled.*;

 public class AudioRecorder  extends JFrame
 {

public final static int DEF_PORT=9;
public final static int MAX_SIZE=65507;
public static int flag=0;

boolean stopCapture = false;
ByteArrayOutputStream byteArrayOutputStream;
AudioFormat audioFormat;
TargetDataLine targetDataLine;
AudioInputStream audioInputStream;
SourceDataLine sourceDataLine;

    //creating file 

File file=new File("chat.wav");
FileOutputStream fout;

AudioFileFormat.Type fileType;

public AudioRecorder(){//constructor
try
{
    fout=new FileOutputStream(file);
} 
catch (FileNotFoundException e1)
{
    e1.printStackTrace();
}

    //button play,stop, capture

final JButton captureBtn = new JButton("Capture");
final JButton stopBtn = new JButton("Stop");
    final JButton playBtn = new JButton("Save");

    captureBtn.setEnabled(true);
    stopBtn.setEnabled(false);
    playBtn.setEnabled(false);

    captureBtn.addActionListener(new ActionListener()
{
    public void actionPerformed(ActionEvent e)
{
      captureBtn.setEnabled(false);
      stopBtn.setEnabled(true);
      playBtn.setEnabled(false);
      captureAudio();
    }
    } );

getContentPane().add(captureBtn);

    stopBtn.addActionListener(new ActionListener()
{
    public void actionPerformed(ActionEvent e)
{
      captureBtn.setEnabled(true);
      stopBtn.setEnabled(false);
      playBtn.setEnabled(true);

      //Terminate the capturing of input data from the microphone.

      stopCapture = true;
    }//end actionPerformed
    }//end ActionListener
    );//end addActionListener()

    getContentPane().add(stopBtn);

    playBtn.addActionListener(new ActionListener()
{
        public void actionPerformed(ActionEvent e)
    {
      //Play back all of the data that was saved during capture.
        saveAudio();
        }//end actionPerformed
    }//end ActionListener
    );//end addActionListener()

getContentPane().add(playBtn);

    getContentPane().setLayout(new FlowLayout());
    setTitle("Capture/Playback Demo");
    setDefaultCloseOperation(EXIT_ON_CLOSE);
    setSize(250,70);
    setVisible(true);

}//end constructor

    //This method captures audio input from a microphone and saves it in a  ByteStreamObject                                
private void captureAudio()
{
        try{
    //Get everything set up for capture
            audioFormat = getAudioFormat();
            DataLine.Info dataLineInfo = new          DataLine.Info(TargetDataLine.class,audioFormat);
            targetDataLine = (TargetDataLine)
                AudioSystem.getLine(dataLineInfo);
            targetDataLine.open(audioFormat);
            targetDataLine.start();

   //Create a thread to capture the microphone data and start it running.  It will run until the Stop button is clicked.
            Thread captureThread = new Thread(new CaptureThread());
            captureThread.start();
          } 
      catch (Exception e)
      {
            System.out.println(e);
            System.exit(0);
          }//end catch
}//end captureAudio method

    //This method plays back the audio data that has been saved in the ByteArrayOutputStream
private void saveAudio() 
{
    try
{
  //Get everything set up for playback. Get the previously-saved data into a byte array object.
    byte audioData[] = byteArrayOutputStream.toByteArray();
  //Get an input stream on the byte array containing the data
    InputStream byteArrayInputStream = new ByteArrayInputStream(audioData);
    AudioFormat audioFormat = getAudioFormat();
    audioInputStream = new AudioInputStream(byteArrayInputStream,audioFormat,audioData.length/audioFormat.getFrameSize());
    DataLine.Info dataLineInfo = new DataLine.Info(SourceDataLine.class,audioFormat);
    sourceDataLine = (SourceDataLine)AudioSystem.getLine(dataLineInfo);
    sourceDataLine.open(audioFormat);
    sourceDataLine.start();
//flag=1;

  //Create a thread to play back the data and start it running.  It will run until all the data has been played back.
    Thread saveThread = new Thread(new SaveThread());
    saveThread.start();
saveThread.join();

    try{        

        InetAddress server=InetAddress.getByName("127.0.0.1");
        Socket soc = new Socket(server, 8020);      
        FileInputStream fis = new FileInputStream("chat.wav");
        byte[] buffer = new byte[fis.available()];
        fis.read(buffer);
        ObjectOutputStream oos = new ObjectOutputStream(soc.getOutputStream()) ;
        oos.writeObject(buffer); 

    }
    catch(Exception e)
    {
        System.out.println("Error : "+e);
    }

//function to record and save audio file

    }
catch (Exception e) 
{
        System.out.println(e);
        System.exit(0);
    }//end catch
}//end playAudio

    //This method creates and returns an AudioFormat object for a given set of format  parameters.  
     //If these parameters don't work well for you, try some of the other alowable parameter values, which are shown in comments //following the declarations.

private AudioFormat getAudioFormat()
{
        float sampleRate = 8000.0F;
        //8000,11025,16000,22050,44100
        int sampleSizeInBits = 16;
        //8,16
        int channels = 1;
        //1,2
        boolean signed = true;
        //true,false
        boolean bigEndian = false;
        //true,false
        return new AudioFormat(sampleRate,sampleSizeInBits,channels,signed,bigEndian);
}//end getAudioFormat
   //===================================//

   //Inner class to capture data from microphone 

    class CaptureThread extends Thread
     {
           //An arbitrary-size temporary holding buffer

       byte tempBuffer[] = new byte[10000];

       public void run(){
          byteArrayOutputStream = new ByteArrayOutputStream();
           stopCapture = false;
           try{//Loop until stopCapture is set by another thread that services the Stop button.

         while(!stopCapture){
         //Read data from the internal buffer of the data line.
        int cnt = targetDataLine.read(tempBuffer,0,tempBuffer.length);
           if(cnt > 0){
       //Save data in output stream
         // object.
           byteArrayOutputStream.write(tempBuffer, 0, cnt);

      }//end if
      }//end while
           byteArrayOutputStream.close();
       }catch (Exception e) {
           System.out.println(e);
         System.exit(0);
        }//end catch
       }//end run
    }//end inner class CaptureThread
    //===================================//
         //Inner class to play back the data
      // that was saved.

    class SaveThread extends Thread{
       byte tempBuffer[] = new byte[10000];

         public void run(){
         try{
           int cnt;
              //Keep looping until the input
               // read method returns -1 for
           // empty stream.

              if (AudioSystem.isFileTypeSupported(AudioFileFormat.Type.AU,audioInputStream)) {

                AudioSystem.write(audioInputStream, AudioFileFormat.Type.AU, file);

           } 

            }catch (Exception e) {
           System.out.println(e);
          System.exit(0);
          }//end catch
      }//end run
    }//end inner class PlayThread
       //===================================//

     public static void main(String args[])
      {

             new AudioRecorder();

       }//end main
     }//end outer class AudioCapture01.java 
```

服务器端代码：

```
 import java.lang.*;
     import java.io.*;
   import java.net.*;

   public class MyServer 
   {
public final static int DEF_PORT=9;
public final static int MAX_SIZE=65507;

public static void main(String args[]) 
{
    //byte[] buffer=new byte[100000];
    try
    {

        ServerSocket ser = new ServerSocket(8020);
         Socket clientSocket = ser.accept();

           ObjectInputStream ois = new 

           ObjectInputStream(clientSocket.getInputStream());
        byte[] buffer = (byte[])ois.readObject();
        FileOutputStream fos = new 

            FileOutputStream("a1.wav");

        fos.write(buffer);
          fos.close();

    } 

    catch (Exception e)
    {
        e.printStackTrace();
     }

 }

        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T03:25:17.757

你为什么不尝试发送字节？

```
byte[] content = Files.readAllBytes(f.toPath);
oos.writeObject(content);

byte[] content = (byte[]) ois.readObject();  
Files.write(f.toPath(), content); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T03:41:20.387

这里的问题也可能出在您的 tempBuffer[] 上。后者的大小应与您发送/接收的文件大小相同。您可以动态指定 tempBuffer[] 的大小，如下所示：

字节 [] tempBuffer = 新字节 [(int)wavFile.length()];

# c# - 从字符串返回多种类型之一

> ID：15714328
> 
> 赞同：0
> 
> 时间：2013-03-30T02:38:38.933
> 
> 标签：c#, generics

我有一个通用的方法。

```
private T Blah<T>() 
```

在这种方法中，我有一个要返回的字符串，但问题是它`T`可能不是字符串。值`T`可以是`string`、`int`、`DateTime`和`DateTime?`。`decimal?`

我该如何处理这个字符串，以便我可以返回它并支持所有这些类型？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-30T02:45:16.853

```
 private T Blah<T> () where T : IConvertible
  {            
     if (!String.IsNullOrEmpty(source))
          return (T)Convert.ChangeType(source, typeof(T));
     return default(T);
  } 
```

应该适用于所有这些类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T03:05:45.780

这可能会有所帮助：

```
private T Blah<T>(Func<string, T> map)
{   
    //Your codes here

    return map(yourString); //yourString: the string which you are going to convert
} 
```

在这里你称之为：

```
//For int
Blah(input => int.Parse(input));

//For DateTime
Blah(input => DateTime.Parse(input)); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-30T06:02:39.397

我`Blah<T>` *公开*测试，根据您的要求进行修改。

*   代码

    ```
    partial class SomeClass {
        public T Blah<T>() {
            var t="2013 03 30";

            return (T)(typeof(String).Equals(typeof(T))?t as object:(
                from args in new[] { new object[] { t, default(T) } }
                let type=Nullable.GetUnderlyingType(typeof(T))??typeof(T)
                let types=new[] { typeof(String), type.MakeByRefType() }
                let bindingAttr=BindingFlags.Public|BindingFlags.Static
                let tryParse=type.GetMethod("TryParse", bindingAttr, default(Binder), types, null)
                let b=typeof(DateTime)!=type
                let dummy=b?args[0]=((String)args[0]).Split('\x20').Aggregate(String.Concat):""
                let success=null!=tryParse?tryParse.Invoke(typeof(T), args):false
                select args.Last()).Last());
        }
    } 
    ```

    ```
    partial class TestClass {
        public static void TestMethod() {
            var x=new SomeClass();

            Console.WriteLine("x.Blah<String>() = {0}", x.Blah<String>());
            Console.WriteLine("x.Blah<int>() = {0}", x.Blah<int>());
            Console.WriteLine("x.Blah<DateTime>() = {0}", x.Blah<DateTime>());
            Console.WriteLine("x.Blah<DateTime?>() = {0}", x.Blah<DateTime?>());
            Console.WriteLine("x.Blah<decimal?>() = {0}", x.Blah<decimal?>());
        }
    } 
    ```

*   输出

    ```
    x.Blah<String>() = 2013 03 30
    x.Blah<int>() = 20130330
    x.Blah<日期时间>() = 2013/3/30 0:00:00
    x.Blah<DateTime?>() = 2013/3/30 0:00:00
    x.Blah<十进制？>() = 20130330

    ```

The special thing is that I removed the spaces if destination type is not `DateTime` or `DateTime?`.

You can even try with `x.Blah<long>()` which is not in your requirement, and any other types. Let me know if you found **any** type can cause an exception.

# db2 - db2 中的安全标签组件元素和安全标签映射

> ID：15714329
> 
> 赞同：0
> 
> 时间：2013-03-30T02:38:45.103
> 
> 标签：db2

DB2 允许用户定义 LBAC 安全策略。为了创建所需的标签和授权，我按照[此处](http://www.ibm.com/developerworks/data/tutorials/dm0605wong/ "这里")提供的步骤进行操作。到现在为止还挺好。但是，检索这些策略是一件令人头疼的事情。假设有人定义了这些策略并且没有备份他们的活动。通过查看定义的组件和标签，似乎很难弄清楚做了什么。

我面临的主要问题是：表`syscat.securitylabelcomponentelements`记录了一个定义的安全组件的元素。`syscat.securitylabels`记录从这些组件元素创建的标签。虽然我找不到映射。有可能将一个组件元素命名为 X，并将相应的标签命名为 Y。映射存储在哪里？也就是说，我知道标签 Y 来自元素 X 吗？

我找不到这个。有人可以帮我吗？

问候，

萨利尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T18:25:44.887

该`db2look`实用程序将提取所有 LBAC 组件的 DDL，这样可以很容易地确定您要查找的结构。

```
$ db2look -d sample -e

-- This CLP file was created using DB2LOOK Version "9.7" 
-- Timestamp: Sat 30 Mar 2013 11:21:34 AM MST
-- Database Name: SAMPLE         
-- Database Manager Version: DB2/LINUXX8664 Version 9.7.5  
-- Database Codepage: 1208
-- Database Collating Sequence is: IDENTITY

CONNECT TO SAMPLE;

-----------------------------------------------------------
-- DDL Statements for Security Label Component "ORG_DIVISIONS"
-----------------------------------------------------------

CREATE SECURITY LABEL COMPONENT "ORG_DIVISIONS"
   TREE ('ORGANIZATION_ADMIN' ROOT,
     'SALES' UNDER 'ORGANIZATION_ADMIN',
     'RESEARCH' UNDER 'ORGANIZATION_ADMIN',
     'MANUFACTURING' UNDER 'ORGANIZATION_ADMIN',
     'MFM1' UNDER 'MANUFACTURING',
     'MF_ENGG1' UNDER 'MFM1',
     'RSM1' UNDER 'RESEARCH',
     'RS_ENGG1' UNDER 'RSM1');

----------------------------------------------------------
-- DDL Statements for Security Policy "ORGANIZATION_POLICY"
----------------------------------------------------------

CREATE SECURITY POLICY "ORGANIZATION_POLICY" 
   COMPONENTS "ORG_DIVISIONS"
   WITH DB2LBACRULES RESTRICT NOT AUTHORIZED WRITE SECURITY LABEL;

... 
```

# html - 将静态网站转换为 joomla

> ID：15714335
> 
> 赞同：0
> 
> 时间：2013-03-30T02:39:30.473
> 
> 标签：html, joomla

我为朋友建立了一个静态网站，现在他回来要求我将其转换为 Joomla，我在网上查找并偶然发现了一些教程，但这些教程并不是很有帮助，因为它们似乎只转换主页。

我设法创建了主页并将主要部分转换为模块。

现在我该如何将其他页面插入到 Joomla 中？

感谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T00:37:08.067

同意 Bakual，假设您在 Joomla 3 上，只需将您的每一页都放入一篇文章中。首先，您可以将它们全部不分类，然后如果有意义，您可以将它们移动到更复杂的结构中。当然，如果您需要联系表格等，请改为这样做。

你登录管理员了吗？[http://docs.joomla.org](http://docs.joomla.org)上的绝对初学者指南还不错。我不想自我推销，但你也可以谷歌“为你的 Joomla 工作和创建内容！网站”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T07:31:36.283

您可能希望将旧页面创建为单独的文章，然后为指向相应文章的每个页面创建一个菜单项。

# c - C#2140：在“scanf”的参数 1 中键入错误；预期 'const char * restrict' 但发现 'int'

> ID：15714339
> 
> 赞同：-2
> 
> 时间：2013-03-30T02:39:52.377
> 
> 标签：c, scanf

我正在为 Windows 使用 Pelles 编译器。我有两个错误

```
#2168: Operands of '&' have incompatible types 'char *' and 'char *'.
#2140: Type error in argument 1 to 'scanf'; expected 'const char * restrict' but found 'int'. 
```

我的代码看起来像

```
 #include <stdio.h>
    static char herp[20];

    int main()
    {
         int a;
         a = 2;
         printf("Some random number %d\n" ,a);
         scanf("Input: %c" &herp);
         getchar();
         return 0;
    } 
```

scanf 似乎有很多问题，所以我不知道为什么。我对 C 很陌生，到目前为止我很喜欢它。帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T02:42:29.500

```
scanf("Input: %c" &herp); 
```

缺少一个逗号：

```
scanf("Input: %c", &herp); 
```

由于`herp`是一个字符数组，您应该指定要写入的字符，例如

```
scanf("Input: %c", &herp[0]); // to write to the first character. 
```

如果你输入的是一个字符串，你会离开`&`：

```
scanf("Input: %s", herp); 
```

# c# - 当我已经对 IIS 公开时，如何删除 URLmapping

> ID：15714340
> 
> 赞同：0
> 
> 时间：2013-03-30T02:40:07.107
> 
> 标签：c#, asp.net, iis

在我的 web.config 中，我设置如下，因为我想重定向到 ~/layout/asp

```
<urlMappings enabled="true"> 
<add mappedUrl="~/layout/asp" url="~/"/>
</urlMappings> 
```

但后来，我不想再重定向了，我在 web.config 中删除了上面的代码并将其公开到 IIS，但它仍然重定向到布局/asp
我认为 IIS 保存了我的设置当我在视觉调试环境中运行时它工作正常工作室

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T02:47:32.367

重新启动 IIS：`iisreset /restart`

# mongodb - 无法在 Ubuntu 12.04 上启动 mongodb-linux-2.4.1

> ID：15714341
> 
> 赞同：0
> 
> 时间：2013-03-30T02:40:36.160
> 
> 标签：mongodb, ubuntu, database

我已经下载了 mongodb-linux-2.4.1 压缩包。然后我解压它。转到 mongodb-linux-2.4.1/bin 文件夹并启动它

```
./mongo 
```

然后我得到：

```
li@li-HP:~/Tools/mongodb-linux-x86_64-2.4.1/bin$ ./mongo
MongoDB shell version: 2.4.1
connecting to: test
Fri Mar 29 19:29:47.958 JavaScript execution failed: Error: couldn't connect to 
server 127.0.0.1:27017 at src/mongo/shell/mongo.js:L112
exception: connect failed 
```

有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T02:42:37.077

`./mongo`只需运行 mongodb 客户端 `./mongod`运行 mongodb 服务器

# sql - 遍历 PostgreSQL 记录。如何引用下一行的数据？

> ID：15714342
> 
> 赞同：7
> 
> 时间：2013-03-30T02:40:47.333
> 
> 标签：sql, postgresql, plpgsql, window-functions

我是 PostgreSQL 新手，在这里编写函数非常困难。所以我希望有人可以帮助让我知道如何做我想做的事情。

我有一张股票价格和日期表。我想计算每个条目与前一天相比的百分比变化。对于数据的最早日期，不会有前一天，因此该条目可以简单地为 Nil。有人可以查看我的函数并帮助我
a）如何引用下一行的数据和
b）帮助我清理它吗？

我知道该`WITH`声明可能不应该高于该`IF`声明。然而，从逻辑上讲，这就是我迄今为止的想法，也是我编写它的方式。如果您能建议应该如何看待它，那也将不胜感激。

```
CREATE FUNCTION percentage_change_func(asset_histories) RETURNS 
numeric LANGUAGE sql IMMUTABLE AS $func$

DECLARE
r asset_histories%rowtype
BEGIN   
WITH twodaysdata AS (SELECT date,price,asset_symbol FROM asset_histories 
           WHERE asset_symbol = $1.asset_symbol 
           AND asset_histories.date <= $1.date 
           ORDER BY date DESC LIMIT 2), 
         numberofrecords AS (SELECT count(*) FROM twodaysdata) 

IF numberofrecords = 2 THEN
        RETURN r.price / (r+1).price - 1  <---How do I reference r + 1??/
ELSE
        RETURN NIL
ENDIF
END
$func$ 
```

PostgreSQL 9.2。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-30T08:17:08.450

> 我想计算每个条目与前一天相比的百分比变化。

通常，在开始提问之前，您需要**学习基础知识。**
阅读关于[**PL/pgSQL**](http://www.postgresql.org/docs/current/interactive/plpgsql.html)和[**SQL 函数**](http://www.postgresql.org/docs/current/interactive/xfunc-sql.html)[**`CREATE FUNCTION`**](http://www.postgresql.org/docs/current/interactive/sql-createfunction.html)的优秀手册。[](http://www.postgresql.org/docs/current/interactive/plpgsql.html)**[](http://www.postgresql.org/docs/current/interactive/xfunc-sql.html)**

 ****### 为什么这个例子是废话的要点

*   首先，你不能像你一样交出一个**标识符。**标识符不能在普通 SQL 中参数化。为此，您需要[**动态 SQL**](http://www.postgresql.org/docs/current/interactive/plpgsql-statements.html#PLPGSQL-STATEMENTS-EXECUTING-DYN)。
    当然，根据您的要求，您实际上并不需要它。只涉及一张桌子。尝试参数化它是无稽之谈。

*   不要使用类型名称作为标识符。我使用`_date`而不是`date`作为参数名称并将您的表列重命名为`asset_date`. `ALTER`您的表定义相应。

*   从表中获取数据的函数永远不会是`IMMUTABLE`. [阅读手册。](http://www.postgresql.org/docs/current/interactive/sql-createfunction.html)

*   您以荒谬的方式将 SQL 语法与 plpgsql 元素混合在一起。`WITH`是`SELECT`语句的一部分，不能与 plpgsql 控制结构（如`LOOP`or ）混合使用`IF`。

### 适当的功能

正确的函数可能如下所示（多种方式之一）：

```
CREATE FUNCTION percentage_change_func(_asset_symbol text)
  RETURNS TABLE(asset_date date, price numeric, pct_change numeric) AS
$func$
DECLARE
   last_price numeric;
BEGIN

FOR asset_date, price IN
   SELECT a.asset_date, a.price
   FROM   asset_histories a
   WHERE  a.asset_symbol = _asset_symbol 
   ORDER  BY a.asset_date  -- traverse ascending
LOOP
   pct_change := price / last_price; -- NULL if last_price is NULL
   RETURN NEXT;
   last_price := price;
END LOOP;

END
$func$ LANGUAGE plpgsql STABLE 
```

性能不应该那么糟糕，但这只是毫无意义的复杂化。

### 正确的解决方案：普通查询

最简单（可能也是最快）的方法是使用窗口函数[**`lag()`**](http://www.postgresql.org/docs/current/interactive/functions-window.html)：

```
SELECT asset_date, price
      ,price / lag(price) OVER (ORDER BY asset_date) AS pct_change
FROM   asset_histories
WHERE  asset_symbol = _asset_symbol 
ORDER  BY asset_date; 
```

### 标准差

根据您后来的评论，您想要计算标准偏差等统计数字。PostgreSQL 中
有专门[**的统计聚合函数。**](http://www.postgresql.org/docs/current/interactive/functions-aggregate.html#FUNCTIONS-AGGREGATE-STATISTICS-TABLE)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T06:02:27.023

简单的事情，比如只计算`per_change`, 可以在 a 内完成`view`，这也会导致更快的结果

```
create view view_stock_details AS ( SELECT 
    date, 
    price, 
    symbol, 
    pervious_day_close, 
    (price-pervious_day_close)/pervious_day_close*100 as per_change 
FROM (
    SELECT
        date,
        price,
        symbol,
        ( SELECT price FROM asset_histories t WHERE t.symbol = outers.symbol AND t.date < outers.date limit 1 ) as pervious_day_close
    FROM 
        asset_histories as outers
    ); 
```

要查看库存详细信息，您可以使用

```
SELECT 
    *
FROM
    view_stock_details
WHERE
    date = '2012-01-03' 
    AND symbol = 'A' 
```****

# bluej - 接受两个字符串作为参数并返回第一个字符串并删除第二个字符串的所有实例的 Java 方法

> ID：15714347
> 
> 赞同：0
> 
> 时间：2013-03-30T02:42:08.873
> 
> 标签：bluej

正如标题所说，我需要创建一个方法，该方法接受两个字符串作为参数，采用第一个字符串，并删除第二个字符串中的所有字母。

前任。（“你今天过得怎么样”、“嘿”）

会返回“ow ar ou do toda”

我有这个

```
 while(counter < length){
        String letter = phrase.substring(counter, counter+1);
        if(!letter.equals(second)){
            filtered = filtered + letter;
        }
        counter++;
    } 
```

如果它只是一个字母，则有效。我无法弄清楚如何使用第二个字符串中的多个字母使其工作。

我不能使用替换或数组。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T03:26:56.733

这是一种方法的伪代码：

```
assign 1:st string to resultString

for each letter in 2:nd string
    delete instances of that letter in resultString
    by means of methods indexOf, substring and contains 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T04:31:15.477

这是您可以使用的东西（可能还有其他方法）：

```
public static void main(String[] args) {

    System.out.println(customStr("How are you doing today", "hey"));
}

public static String customStr(final String base, final String remove){
    String baseCopy = base.trim();
    String removeCopy = remove.trim();

    // Delete all uppercase & lowercase letters using a regex [HEYhey]
    baseCopy = base.replaceAll("[" + removeCopy.toUpperCase(Locale.ENGLISH) 
            + removeCopy.toLowerCase(Locale.ENGLISH) + "]", "");

    return baseCopy;
} 
```

输出是

> 你现在在做什么

# r - 我可以通过引用获取（）一个 R 全局环境变量吗？

> ID：15714350
> 
> 赞同：2
> 
> 时间：2013-03-30T02:42:37.810
> 
> 标签：r

我有 21 个全局环境变量，每个变量都包含大量数据。我想在函数中通过引用来访问这些变量，但我想参数化它们的名称，例如，如果我有 SPdata、NEdata、FRdata 等...... 21 个变量，我想知道如何通过传递在函数中访问它们只有“国家名称”（即“SP、“NE”、“FR”等）*而*无需创建副本（因为它们的大小都超过 300 兆）。Get 似乎制作了一个副本（对我的大小来说效率低下）数据）。我可以这样做吗？我目前正在到处使用获取

```
cData <- get(paste(cCode, "data", sep = "")) 
```

是的，我知道我应该将它们全部放入全局环境中的列表中，但现在为时已晚，我不想重构所有代码。只是我的“获取”变得内存效率低下，循环中的多次访问可能很慢。例如，我可以像访问列表一样访问每个变量吗？

我应该使用 countryData = list(SPdata, NEdata, FRdata..etc)，使用 countryData[[paste(cCode, "data", sep = "")]] 访问它们，但现在为时已晚。

我应该补充一点，我确实打算更改函数中的一些值，并且 get() 确实会在更改时复制，从下面的不同地址可以看出。

```
> .Internal(inspect(a))
@101b7bcf8 14 REALSXP g0c1 [NAM(2)] (len=1, tl=0) 1
> g <- function() {x <- get("a"); x; x <- 2; .Internal(inspect(x))}
> g()
@101cea648 14 REALSXP g0c1 [NAM(2)] (len=1, tl=0) 2
> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-30T03:02:47.273

`get`不生成副本。例如，在下面的代码中，我们看到它`x`不是*的*副本，`a.1`因为它位于同一地址，即 at `0x00000000077a0010`。

```
> a.1 <- 1:1000000
> .Internal(inspect(a.1))
@0x00000000077a0010 13 INTSXP g0c7 [NAM(1)] (len=1000000, tl=0) 1,2,3,4,5,...
> g <- function() { x <- get("a.1"); .Internal(inspect(x)); max(x) }
> g()
@0x00000000077a0010 13 INTSXP g0c7 [NAM(2)] (len=1000000, tl=0) 1,2,3,4,5,...
[1] 1000000 
```

如果您修改一个变量（附加是一种修改），那么它将被复制。这里`x`开始于`0x00000000075b95d8`但在被修改后被复制到`0x000000000744d8e0`并且在被附加到之后再次被复制到`0x000000000754c5e8`：

```
> n <- 10000
> x <- 1:n
> .Internal(inspect(x))
@0x00000000075b95d8 13 INTSXP g0c7 [NAM(1)] (len=10000, tl=0) 1,2,3,4,5,...
> f <- function() {
+ .GlobalEnv$x[[n]] <- 0
+ .Internal(inspect(x))
+ x <<- c(x, 0)
+ .Internal(inspect(x))
+ }
> f()
@0x000000000744d8e0 14 REALSXP g0c7 [NAM(1)] (len=10000, tl=0) 1,2,3,4,5,...
@0x000000000754c5e8 14 REALSXP g0c7 [NAM(1)] (len=10001, tl=0) 1,2,3,4,5,... 
```

Above we modified the global variable from within the function but even if we had done it outside the function it still would have been copied.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-30T02:45:56.140

快速的：

*   R 语义是“写入时复制”，因此如果您不更改这些变量的内容，则不会进行复制

*   R有内存分析，你真的确定正在制作副本吗？有关内存分析的基础知识，请参阅“编写 R 扩展”。

*   如果您确实确定这些正在被复制，则可以通过强制使用外部指针来防止这种情况发生，方法是使用 XPtr 对象或使用部署外部指针（如 bigmemory）的包装器。

# mysql - 多表查询的数据库规范化

> ID：15714353
> 
> 赞同：0
> 
> 时间：2013-03-30T02:43:28.987
> 
> 标签：mysql, database, normalization

我正在尝试创建一个与食谱相关的网站，用户可以在其中添加自定义膳食，并且在膳食中他们可以添加食物，然后列出食物的成分。例如：

```
Meal = Dinner
Food = Hamburger
Ingredient = Tomato 
```

用户可以从预先填写的食品数据库中选择食品。他们还可以从中央成分数据库添加成分。因此，网站的任何用户都可以使用相同的食物和成分 ID。

我面临的挑战是确保 food_has_ingredients 表以某种方式链接到用户。在下图中，膳食与用户相关联。由于食品和配料 ID 可以被多个用户重复使用，我不能依赖这些 ID 来确定哪个用户将配料添加到食品中。

举个例子：

```
User 1 adds the food "hamburger" (id 10) to the meal_has_food table, then associates the ingredients "ketchup" (id 20) to the food_has_ingredients table.
User 2 adds the food "hamburger" (id 10) to the meal_has_food table, then associates the ingredients "pickles" (id 21) to the food_has_ingredients table. 
```

如果有人搜索从餐汉堡包 (10) 中获取所有成分并将其限制为一行，它总是会给出第一个人的条目。因此，我将餐食 ID 关联为外键，这样我可以说获取属于餐食 ID X 的汉堡包的成分。

我想知道这是否有意义，或者是否有更好的方法。

这是一个粗略的数据库模式： ![数据库架构](../Images/0a59646d5a81596cd5972c2a35870142.png)

# objective-c - Objective-C 是否有任何基于非 Xcode 的命令行单元测试工具？

> ID：15714356
> 
> 赞同：3
> 
> 时间：2013-03-30T02:43:52.707
> 
> 标签：objective-c

在[没有 GUI 的情况下编译 Objective-C](http://codeseekah.com/2012/09/12/compiling-objective-c-without-a-gui/)后说如下：

*要在 OSX 上编译 Objective-C，您必须获得 XCode，它可以从应用商店免费获得。获取 XCode 将确保您获得必要的框架（头文件），例如 Foundation、Cocoa 等。但是，这不会为您提供从命令行编译 Object-C 所需的命令行工具。打开 XCode，转到首选项 > 下载 > 组件并安装命令行工具。这将安装 gcc、clang、make 等。*

我正在寻找一个非基于 Xcode 的工具来解决我的问题，我刚刚打开：[是否可以在 Travis 上测试一个 Objective-C 项目？](https://stackoverflow.com/questions/15713241/is-it-possible-to-make-an-objective-c-project-no-ui-no-simulator-to-be-tested)

该工具应满足以下要求：

*   它不应该以任何方式与 Xcode 相关。
*   以下简单程度就足够了：只需一些`int main {}`代码收集附近的所有测试用例文件并在我要测试的代码上运行测试断言（例如`ST-`在 SetTestingKit 或`GH-`GHUnit 中）
*   我不需要 UI、GUI、Xcode、模拟器。
*   如果它可以在 Mac 和 Ubuntu（是的，Travis）上运行，那就 **太好**了，可能像引用的帖子描述的那样使用[GNUstep 。](https://github.com/gnustep)

**根据接受的答案更新：**

根据 Malte Tancred 在接受的答案中所说的，以下简单设置似乎足以满足我当前的需求：

三个文件，都在我项目的测试目录中：

**八度测试.m**

```
#import <Foundation/Foundation.h>
#import <SenTestingKit/SenTestingKit.h>

int main() {
    @autoreleasepool {
        SenSelfTestMain();
    }

    return 0;
} 
```

**生成文件**

```
CC=clang # or gcc

# Trick to get current dir: https://stackoverflow.com/questions/322936/common-gnu-makefile-directory-path
TESTS_DIR:= $(dir $(lastword $(MAKEFILE_LIST)))
PROJECT_DIR:= $(TESTS_DIR)/..

FRAMEWORKS_PATH:= -F/Applications/Xcode.app/Contents/Developer/Library/Frameworks
FRAMEWORKS:= -framework Foundation -framework SenTestingKit
LIBRARIES:= -lobjc
INCLUDE_PATHS:= -I$(PROJECT_DIR)/Projectfiles\
                -I$(TESTS_DIR)/TestHelpers

SOURCE_FILES = $(wildcard $(PROJECT_DIR)/Projectfiles/*.m)

SOURCE_TEST_SUITE = $(wildcard $(TESTS_DIR)/Tests/*.m)

SOURCE_TESTS = $(TESTS_DIR)/TestHelpers/TestHelpers.m\
                 octest.m

CFLAGS=-Wall -Werror -fobjc-arc -g -v $(SOURCE_FILES) $(SOURCE_TEST_SUITE) $(SOURCE_TESTS)
LDFLAGS=$(LIBRARIES) $(FRAMEWORKS)
OUT=-o octest

all:
    $(CC) $(FRAMEWORKS_PATH) $(CFLAGS) $(INCLUDE_PATHS) $(LDFLAGS) $(OUT) 
```

**运行测试**

```
#!/bin/bash
export DYLD_FRAMEWORK_PATH=/Applications/Xcode.app/Contents/Developer/Library/Frameworks
make
./octest 
```

**更新捕获退出代码：**

在我提出这个问题几天后，Travis 宣布了对 Objective-C 的支持：

[http://about.travis-ci.org/blog/introducing-mac-ios-rubymotion-testing/](http://about.travis-ci.org/blog/introducing-mac-ios-rubymotion-testing/)

尽管他们建议使用默认脚本进行构建，但我决定采用此处描述的方法，并且仍然使用 octest 而不是 Travis 使用的 xcodebuild 方法。

默认情况下，travis 设置依赖于 Justin Spahr-Summers 编写的构建脚本：[https](https://github.com/jspahrsummers/objc-build-scripts) ://github.com/jspahrsummers/objc-build-scripts ：

他们使用**awk**从 xcodebuild 的输出中捕获退出代码，因为它总是以 0 退出代码存在，即使整个测试套件都失败了！

OCTest 的行为方式相同 - 它始终以 0 代码存在，这就是我使用 Travis **awk**脚本的简化版本以满足我在上面描述的方式构建它的需要的方式：

**octest.awk**

```
# Exit statuses:
#
# 0 - No errors found.
# 1 - Build or test failure. Errors will be logged automatically.

BEGIN {
    status = 0;
}

{
    print;
    fflush(stdout);
}

/[0-9]+: (error|warning):/ {
    errors = errors $0 "\n";
}

/with [1-9]+ failures?/ {
    status = 1;
}

END {
    if (length(errors) > 0) {
        print "\n*** All errors:\n" errors;
    }

    fflush(stdout);
    exit status;
} 
```

**运行测试**

```
#!/bin/bash

export DYLD_FRAMEWORK_PATH=/Applications/Xcode.app/Contents/Developer/Library/Frameworks

make

runtests ()
{
  ./octest 2>&1 | awk -f "octest.awk"

  local awkstatus=$?

  if [ "$awkstatus" -eq "1" ]
  then
    echo "Test suite failed"
    return $awkstatus
  else
    echo "Test suite passed"
    return 0
  fi
}

echo "*** Building..."

runtests || exit $? 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T02:54:03.183

有非 Mac 平台的 objcunit 端口。您可以查看MidnightBSD 中与 GNUstep 一起使用的[端口。](http://www.midnightbsd.org/cgi-bin/cvsweb.cgi/mports/devel/objcunit/)这些补丁也应该适用于其他环境。pkg-descr 有软件包网站，Makefile 有下载 URL。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T13:32:16.293

您的主要问题的答案是肯定的：Objective-C 的命令行测试工具不依赖于 Xcode。

例如，您可以在不使用 Xcode 的情况下使用 OCUnit/SenTestingKit。您所要做的就是将您的编译器/链接器指向框架。考虑以下文件`octest.m`：

```
#import <Foundation/Foundation.h>
#import <SenTestingKit/SenTestingKit.h>

int main() {
  @autoreleasepool {
    SenSelfTestMain();
  }
  return 0;
}

@interface MyTest : SenTestCase
@end

@implementation MyTest
- (void)testSomething {
  STAssertEquals(1, 2, @"fail");
}
@end 
```

编译它：

```
clang -o octest octest.m -F/Applications/Xcode.app/Contents/Developer/Library/Frameworks -framework Foundation -framework SenTestingKit 
```

现在运行它

```
DYLD_FRAMEWORK_PATH=/Applications/Xcode.app/Contents/Developer/Library/Frameworks ./octest 
```

你应该看到类似的东西

```
Test Suite '/tmp/octest(Tests)' started at 2013-04-04 12:34:49 +0000
Test Suite 'MyTest' started at 2013-04-04 12:34:49 +0000
Test Case '-[MyTest testSomething]' started.
octest.m:16: error: -[MyTest testSomething] : '1' should be equal to '2': fail
Test Case '-[MyTest testSomething]' failed (0.000 seconds).
Test Suite 'MyTest' finished at 2013-04-04 12:34:49 +0000.
Executed 1 test, with 1 failure (0 unexpected) in 0.000 (0.000) seconds
Test Suite '/tmp/octest(Tests)' finished at 2013-04-04 12:34:49 +0000.
Executed 1 test, with 1 failure (0 unexpected) in 0.000 (0.001) seconds
make: *** [default] Error 1 
```

此示例确实依赖于 Xcode，因为它使用捆绑的 SenTestingKit 框架，但如上所述构建和运行测试的一般过程不依赖于 Xcode。

现在，要让它在 linux 系统上运行，您必须安装 SenTestingKit（很可能是 GNUstep），但是有了这些组件，构建和测试过程应该基本相同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T19:46:26.167

对于编译objective-C，我知道一种快速而肮脏（而且有些有限）的方法——我在[http://www.compileonline.com/compile_objective-c_online.php](http://www.compileonline.com/compile_objective-c_online.php)在线进行。也就是说，这个编译器会抛出很多 c-99 错误，我认为这是因为它是 C 的严格超集，并且不包括该语言的一些更独特的特性（例如：@synthesize，甚至点符号） ，但它完成了工作。我用 Notepad++ 输入代码。就像我说的，有限的，但外科手术。
*此外 - 它支持命令行样式输入，这是可靠的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-02-06T23:17:05.723

Look at [xctool](https://github.com/facebook/xctool) from facebook which is a replacement for Apple's `xcodebuild`. We build our Objective-C library using maven and use it only for tests instead of `xcodebuild` and it works great. The output is much more readable as compared to `xcodebuild`.

From the `xctool` page,

```
xctool is a replacement for Apple's xcodebuild that makes it easier to build 
and test iOS and Mac products. 
```

One thing to note though is it does not support building targets. You can use a scheme though.

# cuda - 使用不匹配的选项“-arch=compute_20 -code=sm_20”为 GeForce 310（计算能力 1.2）编译 CUDA 程序

> ID：15714360
> 
> 赞同：2
> 
> 时间：2013-03-30T02:44:39.883
> 
> 标签：cuda, gpu, nvcc

我正在使用具有计算能力 1.2 的 GeForce 310 GPU 的`nvcc`选项编译 CUDA 程序。`-arch=20 -code=20`该程序似乎正常运行如下。

```
wangli@wangli-desktop:~/wangliC2050/1D-EncodeV6.1$ make
nvcc -O --ptxas-options=-v 1D-EncodeV6.1.cu -o 1D-EncodeV6.1 -I../../NVIDIA_GPU_Computing_SDK/C/common/inc -I../../NVIDIA_GPU_Computing_SDK/shared/inc  -arch=compute_20 -code=sm_20 
ptxas info    : Compiling entry function '_Z6EncodePhPjS0_S_S_' for 'sm_20'
ptxas info    : Function properties for _Z6EncodePhPjS0_S_S_
    0 bytes stack frame, 0 bytes spill stores, 0 bytes spill loads
ptxas info    : Used 14 registers, 52 bytes cmem[0]
wangli@wangli-desktop:~/wangliC2050/1D-EncodeV6.1$ ./1D-EncodeV6.1 
########################### Encoding start (loopCount=10)#######################
#p  n   size    averageTime(s)  averageThroughput(MB/s) errorRate(0~1)
#================= Encode on GPU v6.1 ===============
4   4   4   0.000294    0.051837    100.000000
#################### Encoding stop ######################### 
```

所以，我想知道：

1.  为什么这个程序可以在带有与显卡计算能力 1.2 不匹配的`nvcc`选项的 GeForce 310 上运行？`-arch=compute_20 -code=sm_20`
2.  如果期权的价值与`-arch`期权的价值不同，会发生什么`-code`？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-30T04:09:13.557

A CUDA executable typically contains 2 types of program data: SASS code which is basically GPU machine code, and [PTX](http://docs.nvidia.com/cuda/cuda-compiler-driver-nvcc/index.html#virtual-architectures) which is an intermediate code (although it's pretty close to machine code). As long as PTX code is present in the executable, then if the driver decides that a proper SASS binary is not available for the GPU that the code will actually run on, it will do a "[JIT-compile](http://docs.nvidia.com/cuda/cuda-compiler-driver-nvcc/index.html#further-mechanisms)" step at application launch, to create the necessary binary code appropriate for the device in question, using the PTX code in the application package.

This is what is happening in your case.

If arch != code, then you're creating device code that architecturally conforms to the arch type, but is compiled to use machine level instructions that are associated with the code type. For example, if I compile for arch = 1.2 and code = 2.0, I cannot use `double` types (they will be demoted to `float`, because `double` is not supported in a 1.2 architecture) but the SASS machine code generated will be ready to execute on a cc 2.0 device, and will not require a JIT-compile step for that kind of device.

The NVCC manual has more information particularly the section on [steering code generation](http://docs.nvidia.com/cuda/cuda-compiler-driver-nvcc/index.html#options-for-steering-gpu-code-generation).

# java - SDL_SetVideoMode 尝试释放尚未 malloc 的指针（？）

> ID：15714361
> 
> 赞同：1
> 
> 时间：2013-03-30T02:45:11.057
> 
> 标签：java, c, java-native-interface, sdl

我写了一个 JNI 库，它在 Java 中是这样定义的：

```
public class SDLMain 
{
    static {System.loadLibrary("SDLBitsX");}

    public static native void init();
} 
```

在 C 中定义为：

```
JNIEXPORT void JNICALL Java_gd_verfolgungsja_sdlbitsx_SDLMain_init(JNIEnv * env, jclass this)
{
    SDL_Init(SDL_INIT_EVERYTHING);
    SDL_Surface *screen = SDL_SetVideoMode(512, 512, 8, 0);
    SDL_FreeSurface(screen);
    SDL_Quit();
} 
```

Java代码吐出：

```
2013-03-29 22:34:01.796 java[10851:1303] _NSSetWindowTag, error clearing window tags (1000)
2013-03-29 22:34:01.797 java[10851:1303] _NSSetWindowTag, error setting window tags (1000)
2013-03-29 22:34:01.799 java[10851:1303] error [1000] getting window resolution
2013-03-29 22:34:01.799 java[10851:1303] Error [1000] setting resolution to 1
2013-03-29 22:34:01.800 java[10851:1303] error [1000] setting colorSpace to Color LCD colorspace
java(10851,0x107b58000) malloc: *** error for object 0x7fff8c03af01: pointer being freed was not allocated
*** set a breakpoint in malloc_error_break to debug 
```

如果我注释掉，该功能可以正常工作

```
SDL_Surface *screen = SDL_SetVideoMode(512, 512, 8, 0);
SDL_FreeSurface(screen); 
```

我在 Mac 上。为什么这样做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T14:08:31.230

我从未在 Mac 上使用过 SDL，但您的调用`SDL_FreeSurface(screen)`无效.. *（IIRC 您通常不会自己释放默认工作表面）*默认绘图表面会自动释放，`SDL_Quit()`因此在您的情况下`SQL_Quit()`正在尝试释放不存在的东西。

# batch-file - 如何从 MS DOS 目录列表中排除特定文件名？

> ID：15714363
> 
> 赞同：2
> 
> 时间：2013-03-30T02:45:35.920
> 
> 标签：batch-file, dos

我正在创建一个 MS DOS 批处理脚本，它需要列出当前目录中的每个 .bat 文件，但不显示`autoexec.bat`不应由用户运行的其他实用程序或系统 .bat 文件。

我目前有`DIR "*.bat" /B /P`

这会适当地列出所有 .bat 文件，但会显示 autoexec.bat。我如何将其从列表中排除？同样重要的是，我怎么能砍掉文件扩展名并显示超过 7 个字符的 DOS 限制文件？

限制：我无法使用 WinME 以上的 DOS 版本。那是我正在使用的版本。

谢谢你的帮助。

**编辑：** 互联网上有很多关于这样做的信息，但它们都在 Windows 命令处理器中，**而不是**MS DOS。请理解 DOS 和命令提示符不是一回事。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-30T16:24:21.670

```
@echo off
setlocal EnableDelayedExpansion
rem Add more names separated with slashes here:
set exclude=/autoexec/
for %%a in (*.bat) do (
   if "!exclude:/%%~Na/=!" equ "%exclude%" (
      echo %%~Na
   )
) 
```

**编辑**：*添加了一些解释*

批处理文件处理速度很慢，因此您应该使用使批处理文件运行得更快的技术。例如：

*   尝试使用最少的行/命令来达到一定的效果。尽量避免使用外部命令（*.exe 文件），例如`find`、`findstr`、`fc`等，尤其是在处理少量数据时；改用`if`命令。
*   使用`for %%a in (*.bat)...`而不是`for /F %%a in ('dir /B *.bat')...`. 第二种方法需要执行 cmd.exe 并将其输出存储在文件中，然后`for`命令才能处理其行。
*   避免使用管道并改用重定向。管道需要执行两个 cmd.exe 副本来处理管道每一侧的命令。
*   检查变量是否包含给定字符串的一种简单方法是尝试从变量中删除字符串：如果结果*不同*，则字符串存在于变量中：`if "!variable:%string%=!" neq "%variable%" echo The string is in the variable`。
*   以前的方法也可用于检查变量是否具有值列表中的任何一个：`set list=one two three`, `if "!list:%variable%=!" neq "%list%" echo The variable have one value from the list`. 如果列表的值可能包含空格，则它们必须由另一个分隔符分隔。

**编辑**：*添加新版本作为对新评论的回答*

一次暂停一页的最简单方法是以`more`这种方式使用过滤器：

```
theBatchFile | more 
```

但是，程序必须重新排序输出才能在列中显示。下面的新版本实现了这两个东西，所以它不需要`more`过滤器；您只需要设置每页所需的列数和行数。

```
@echo off
setlocal EnableDelayedExpansion
rem Add more names separated with slashes here:
set exclude=/autoexec/
rem Set the first two next variables as desired:
set /A columns=5, rows=41,   wide=(80-columns)/columns, col=0, row=0
rem Create filling spaces to align columns
set spaces=
for /L %%a in (1,1,%wide%) do set spaces= !spaces!
set line=
for %%a in (*.bat) do (
   if "!exclude:/%%~Na/=!" equ "%exclude%" (
      rem If this column is less than the limit...
      set /A col+=1
      if !col! lss %columns% (
         rem ... add it to current line
         set name=%%~Na%spaces%
         set "line=!line!!name:~0,%wide%! "
      ) else (
         rem ... show current line and reset it
         set name=%%~Na
         echo !line!!name:~0,%wide%!
         set line=
         set /a col=0, row+=1
         rem If this row is equal to the limit...
         if !row! equ %rows% (
            rem ...do a pause and reset row
            pause
            set row=0
         )
      )
   )
)
rem Show last line, if any
if defined line echo %line% 
```

安东尼奥

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-30T03:41:11.660

```
attrib +h autoexec.bat 
```

应该隐藏 autoexec.bat，因此它不应该出现在列表中

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-30T03:11:10.043

```
DIR "*.bat" /B /P | find /v "autoexec" | for %i in (*.bat) do @echo %~ni 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-30T06:35:25.927

用于单独`for`处理每个文件名：

```
setlocal enabledelayedexpansion
for /f %%i in ('dir "*.bat" /b') do (
  set system=0
  if "%%i"=="autoexec.bat" set system=1
  if "%%i"=="somesystem.bat" set system=1
  if !system!==0 echo %%i
) 
```

另一种没有变量的方法：

```
for /f %%i in ('dir "*.bat" /b') do call :test %%i
goto continue
  :test
  if "%1"=="autoexec.bat" goto :eof
  if "%1"=="somesystem.bat" goto :eof
  echo %1
  goto :eof
:continue 
```

对于这两者，您都可以添加新的文件名以从列表中排除。

# xna - XNA Home Screen

> ID：15714366
> 
> 赞同：0
> 
> 时间：2013-03-30T02:45:44.000
> 
> 标签：xna

In my XNA project I have a Game class but I wish to add a Menu screen which will be shown upon application launch. Does anyone know how I can add this? I can't seem to find anything in the project which will do this...

Any help will be highly appreciated.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T03:31:07.330

Nothing comes with XNA by default for game screens.

However, there is an official [XNA sample](http://xbox.create.msdn.com/en-US/education/catalog/sample/game_state_management) which covers this topic and has useful code to tackle multiple game screens.

# ruby-on-rails - 用于 Rails 的 Json、Rails 地理编码器和 Gmaps

> ID：15714367
> 
> 赞同：0
> 
> 时间：2013-03-30T02:45:47.467
> 
> 标签：ruby-on-rails, json, gmaps4rails, rails-geocoder

使用 Ruby Geocoder，我可以将地址转换为纬度和经度，然后用谷歌静态地图显示。但是，当尝试将 gmap 用于 rails 时，我得到一个空白容器。

## 查看 - html.erb 静态地图

```
 <%= image_tag "http://maps.google.com/maps/api/staticmap?size=450x300&sensor=false&zoom=16&markers=#{@location.latitude}%2C#{@location.longitude}" %> 
```

当尝试用 gmaps4rails 替换静态地图时，我添加了以下内容

```
 <%= yield :scripts %> 
    <%= gmaps4rails(@json) %> 
```

我还在我的控制器和模型中添加了必需品。显示一个空容器，我觉得它只是没有读取数据。我玩弄了一些我读过的东西，但我可能不理解。有人可以帮助启发我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-07T18:33:39.847

你能用替换试试吗

这个

```
<%= yield :scripts %> 
<%= gmaps4rails(@json) %> 
```

和

```
<%= gmaps4rails(@json) %>
<%= yield :scripts %> 
```

我以前也遇到过同样的问题。解决方案放在`<%= yield :scripts %>`文件的最后一行。

谢谢。

# scala - 隐式别名和扩展 scala Seq

> ID：15714369
> 
> 赞同：4
> 
> 时间：2013-03-30T02:46:25.843
> 
> 标签：scala, implicit-conversion

我有以下内容：

```
case class Bar()

trait Foo {
  def bars : Seq[Bar]
}
case class MyFoo(bars : Seq[Bar]) extends Foo

trait Foos extends Seq[Foo] {
  def bars : Seq[Bar] = this.map(_.bars).flatten
} 
```

我想转换 to 的对象`Seq[MyFoo]`，`MyFoos`最好是隐式的。一个人怎么能做到这一点？

例如。

```
val foos : Foos = Seq(new MyFoo(Seq(new Bar))) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-30T03:00:20.137

你可以这样做：

```
 case class Bar()

  trait Foo {
    def bars : Seq[Bar]
  }
  case class MyFoo(bars : Seq[Bar]) extends Foo

  trait Foos extends Seq[Foo] {
    def bars : Seq[Bar] = this.map(_.bars).flatten
  }

  implicit def seqMyFooToMyFoos(myFoos:Seq[Foo]) = new Foos {
    def length: Int = myFoos.length

    def apply(idx: Int): Foo = myFoos(idx)

    def iterator: Iterator[Foo] = myFoos.iterator
  }

  val foos : Foos = Seq(new MyFoo(Seq(new Bar))) // Uses implicit conversion 
```

**更新**

这可能是您正在寻找的更多内容：

```
 trait Foos {
    def bars : Seq[Bar]
  }

  implicit def seqMyFooToMyFoos(myFoo:Seq[MyFoo]) = new Foos {
    def bars : Seq[Bar] = myFoo.map(_.bars).flatten
  }

  val foos = Seq(new MyFoo(Seq(new Bar)))

  foos.bars 
```

**更新 2**

如果您使用的是 scala 2.10，则可以使用隐式类并删除 Foos 特征：

```
 implicit class GetAllBars(myFoo:Seq[MyFoo]) {
    def bars : Seq[Bar] = myFoo.map(_.bars).flatten
  }

  val foos = Seq(new MyFoo(Seq(new Bar)))

  foos.bars 
```

# javascript - jQuery don't parse escaped HTML in .html() method

> ID：15714371
> 
> 赞同：1
> 
> 时间：2013-03-30T02:47:15.897
> 
> 标签：javascript, jquery, html, xss, sanitization

Take for example this HTML:

```
<td onclick="$(this).html('Wanted HTML: <br>; Unwanted HTML: &lt;script&gt;alert(&#39;xss&#39;)&lt;/script&gt;')">
Click to Show</td> 
```

As you can see, I have already escaped (using PHP) the unwanted HTML to entities. But when you click the box it executes the JavaScript.

If I change `.html` to `.text`, it displays the line breaks literally as well.

How can I have it show the the `<br>`s as line breaks, but the `&lt;`s and `&gt;`s as literally less than and greater than signs when you click the box?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T02:50:22.330

The problem is that your characters are being decoded in the `onclick`, before they reach the JavaScript function.

You need to double-encode. So your example would become:

```
<td onclick="$(this).html('Wanted HTML: &lt;br&gt;; Unwanted HTML: &amp;lt;script&amp;gt;alert(&amp;#39;xss&amp;#39;)&amp;lt;/script&amp;gt;')">
    Click to Show
</td> 
```

Notice that I encoded (single encoded) the tags you *do* want. I also added the missing semicolon on the first `&gt;`.

Of course the better solution is to remove this from the HTML entirely. Most developers agree that JavaScript is for interactivity and HTML is for content, and they should mix as little as possible (with the JavaScript hooking into the content with calls such as `addEventHandler`)

# eclipse - eclipse juno 和 tomcat 兼容吗

> ID：15714374
> 
> 赞同：0
> 
> 时间：2013-03-30T02:47:34.337
> 
> 标签：eclipse, tomcat

我能够使用 Eclipse Indigo 和 Tomcat 很好地编写和测试我的 servlet，然后我用 ADT（Android 开发工具）加载了 Eclipse Juno，但它突然无法运行 Tomcat。我什至看不到任何可以告诉 Eclipse 我需要使用服务器的地方。

我尝试重新下载 Tomcat，但这不起作用，因为它没有向我发送我可以运行和安装的可执行文件。雄猫 7.0.39

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T08:29:41.633

您是否下载了与使用 Indigo 相同的 Juno 包？我猜你不小心得到了“Java”的下载，而不是“Java EE”的下载。转到 Help->Install New Software，然后从 Juno 站点选择“Eclipse Java EE Developer Tools”。

# firebreath - Synchronizing with Window Object deletion

> ID：15714381
> 
> 赞同：0
> 
> 时间：2013-03-30T02:49:09.633
> 
> 标签：firebreath

I have a plugin which has a content stream pushed to it from an external service which I then draw into a PluginWindowlessWin.

I maintain a reference to the PluginWindowlessWin object so that I can call Invalidate() when new content arrives. However, in certain circumstances (e.g., plugin object removed from the page), the PluginWindowlessWin object is deleted without notifying my plugin. Thus, I end up calling Invalidate() on a bad pointer and crashing.

How can I continue to notify the browser of updates so it will continue to send refresh events - through Invalidate() calls or otherwise - without relying on objects that may be silently deleted?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T18:58:47.013

When using a windowless plugin, you can't draw except when the browser requests it. Sounds like you have that part. You can ask the browser to request a draw by calling InvalidateWindow on the PluginWindowlessWin.

Once AttachedEvent is called on your plugin, PluginWindowlessWin will be available; you can even save the reference if you want. However, you need to release it when DetachedEvent is called.

# google-app-engine - 为什么不能投影相等 (EQUAL) 或成员 (IN) 过滤器中引用的属性？

> ID：15714386
> 
> 赞同：0
> 
> 时间：2013-03-30T02:50:15.457
> 
> 标签：google-app-engine, google-cloud-datastore

[https://developers.google.com/appengine/docs/java/datastore/projectionqueries](https://developers.google.com/appengine/docs/java/datastore/projectionqueries)

为什么这样的计划查询：**SELECT A FROM kind WHERE A = 1** not supported？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-30T09:03:01.330

因为没有意义。你在问

```
SELECT A FROM kind WHERE A = 1 
```

所以，给我`A`在哪里`A = 1`。嗯，你已经知道了`A = 1`。DB允许这样做是没有意义的。

查询在`IN`内部只是一系列合并在一起的等于查询，因此同样的逻辑适用于它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-23T23:31:45.107

这背后的原因可能是，由于您已经拥有要查询的属性的值，因此不需要查询返回它们。从长远来看，这可能是一件好事，但老实说，这是 App Engine 无论如何都应该允许的。即使它实际上没有从数据存储中获取这些值，它也应该将它们添加到幕后返回给您的实体中，以便您可以开展业务。

无论如何，这就是你可以做的......

```
query = MyModel.query().filter(MyModel.prop1 == 'value1', MyModel.prop2 == 'value2)
results = query.fetch(projection=[MyModel.prop3])
for r in results:
  r.prop1 = 'value1'  # the value you KNOW is correct
  r.prop2 = 'value2' 
```

同样，如果这发生在幕后会很好，因为我认为这不是任何人都应该关心的事情。如果我在投影列表中提到一个属性，我已经声明我*希望*该属性作为我的实体的一部分。我不应该做更多的计算来实现这一点。

On the other hand, it's just an extra for-loop. :)

# yii - Yii密码扩展使用

> ID：15714387
> 
> 赞同：0
> 
> 时间：2013-03-30T02:50:19.797
> 
> 标签：yii, yii-extensions

我将[YiiPassword](https://github.com/phpnode/YiiPassword)扩展名提取到`protected/components/YiiPassword`

**主.php：**

```
 .
    .
    .
    'import'=>array(
            'application.models.*',
            'application.components.*',
            'application.components.YiiPassword.*',
            'application.helpers.*',

    ),
    .
    .
    . 
```

**User.php：（**模型）

```
.    
.
.
public function behaviors()
{
    return array(
        "APasswordBehavior" => array(
            "class" => "APasswordBehavior",
            "defaultStrategyName" => "bcrypt",
            "strategies" => array(
                "bcrypt" => array(
                    "class" => "ABcryptPasswordStrategy",
                    "workFactor" => 14
                ),
                "legacy" => array(
                    "class" => "ALegacyMd5PasswordStrategy",
                )
            ),
        )
    );
}
.
.
. 
```

Ans 还在**tbl_user**中添加了三个字段：

**salt** - 保存用于散列密码的每个用户的盐

**密码**- 保存散列密码**（已存在）**

**passwordStrategy** - 保存该用户当前密码策略的名称

**requiresNewPassword** - 一个布尔字段，用于确定用户是否应更改密码

现在我只想使用**bcrypt**，如何**编码**用户密码并在用户登录时**验证**它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T09:20:19.227

您只需检索用户并调用该`verifyPassword`方法！该方法的说明：

> 将给定密码与此模型的存储密码进行比较

因此，您可以执行以下操作：

```
$user = User::model()->findByPK(1);
if($user->verifyPassword("password")){
    //Password verified
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T08:08:43.487

**解决了**

以下测试成功完成，**ABcryptPasswordStrategyTest.php ：**

```
<?php
Yii::import("application.components.passwordStrategy.*");
Yii::import("application.models.*");

/**
 * Tests for the {@link ABcryptPasswordStrategy} class.
 * @author Charles Pick
 * @package packages.passwordStrategy
 */
class ABcryptPasswordStrategyTest extends CTestCase
{
    public function testEncode()
    {
        $user=User::model()->findByAttributes(array('username'=>'user'));
        $strategy = new ABcryptPasswordStrategy();
        $strategy->getSalt(true);

        $user->password = 'pass';
        $user->save();

        $this->assertTrue($user->verifyPassword("pass"));
    }
} 
```

[**更多信息**](https://github.com/phpnode/YiiPassword/issues/10)

# jsf-2 - 创建连接 bean 和 Facelets 的 ICEfaces 应用程序示例

> ID：15714389
> 
> 赞同：0
> 
> 时间：2013-03-30T02:50:36.427
> 
> 标签：jsf-2, javabeans, facelets, icefaces

我是开发 Web 应用程序的新手，我安装了 ICEfaces 插件。我找到[了本教程](http://www.icesoft.org/wiki/display/ICE/Creating+ICEfaces+Applications+with+Eclipse)来学习如何使用它，而第一个给出的示例在我的 IDE 中不起作用。

它是关于教程的最后一部分，它展示了如何在 web 应用程序中使用 dateTimeEntry。所以我按照说明进行操作，使我的 index.xhtml 看起来像这样：

```
<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
xmlns:ui="http://java.sun.com/jsf/facelets"
xmlns:f="http://java.sun.com/jsf/core"
xmlns:h="http://java.sun.com/jsf/html"
xmlns:icecore="http://www.icefaces.org/icefaces/core"
xmlns:ace="http://www.icefaces.org/icefaces/components"
xmlns:ice="http://www.icesoft.com/icefaces/component">

<h:body>
<form>
    <ace:dateTimeEntry id="dateTimeEntryId"
        value="#{yourBean.selectDateProperty}" timeZone="Canada/Mountain"
        pattern="MMM/dd/yyyy" style="width: 729px; " renderAsPopup="true"> 
    </ace:dateTimeEntry><br />
</form>
</h:body>
</html> 
```

我的java bean是这样的：

```
package org.icefaces.view;

import java.io.Serializable;
import java.util.Date;

import javax.faces.bean.ManagedBean;
import javax.faces.bean.ViewScoped;

import org.icefaces.ace.event.DateSelectEvent;

@ManagedBean(name= "yourBean")
@ViewScoped
public class YourBean implements Serializable {

/**
 * 
 */
private static final long serialVersionUID = 5058131064162864510L;

private Date selectDateProperty = new Date(System.currentTimeMillis());

public Date getSelectDateProperty() {
    return selectDateProperty;
}

public void setSelectDateProperty(Date selectDateProperty) {
    this.selectDateProperty = selectDateProperty;
}

public void dateSelectListener(DateSelectEvent event) {
    setSelectDateProperty(event.getDate());
  }
} 
```

项目的结构如下所示：

![项目](../Images/3c522403456585097423f70ad66ce39c.png)

关键是，在教程中没有给出保存 java bean 的位置。所以我认为它必须保存在 java 资源目录中，但我不确定，因为该应用程序不起作用。我只是得到一个空白屏幕。我认为服务器及其配置是有效的，因为我可以删除一些 Img 或按钮并在浏览器中查看结果。所以我想我并没有真正理解 java bean 是如何与 xhtml 文件连接的。我认为它适用于 ManagedBean - 属性，但我不确定。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T12:06:52.503

好吧，我发现，javabeans 和 xhtml 文件中的变量的连接必须以这种形式在 faces-config.xml 中创建：

```
<managed-bean>
  <managed-bean-name> [bean-name-of-java-class] </managed-bean-name>
  <managed-bean-class> [fullpath-to-java-file] </managed-bean-class>
  <managed-bean-scope>[scope]</managed-bean-scope>
</managed-bean> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T19:04:55.993

您可以在此处找到示例代码的完整列表 [http://anonsvn.icesoft.org/repo/icefaces3/trunk/icefaces/samples](http://anonsvn.icesoft.org/repo/icefaces3/trunk/icefaces/samples)

# mongodb - MongoDb Query - Count + where condition

> ID：15714390
> 
> 赞同：5
> 
> 时间：2013-03-30T02:50:43.957
> 
> 标签：mongodb, database

I have a mongodb collection which has collection with a tag and date field.

I want to count the number of all tags which can be done by this query

```
db.collection.count( { tags: "abc" }) 
```

But I would like to get counts of all unique tags together. And I also want to put a where condition on the date, as in I want to query for a certain time period.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-30T09:20:13.313

A very simple approach:

```
db.collection.distinct("tags", {dateField: {$gt: dateValue}}).forEach(function (tag) {
    var count = db.collection.count({"tags" : tag})
}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T05:31:46.590

You can use the mongoDD Aggregation framework for solving this problem ([http://docs.mongodb.org/manual/applications/aggregation/](http://docs.mongodb.org/manual/applications/aggregation/)) . In case you do not get everything done . you always a option to do it through map-reduce ([http://docs.mongodb.org/manual/applications/map-reduce/](http://docs.mongodb.org/manual/applications/map-reduce/)) . I have used map-reduce to build my own search options for special requirement. So any point of time map-reduce will help you to do what you want to do which is not possible by simple query. I am not giving the query because I do not have much information how you want to get the data and how is your collection looks like but both the two option will help you to get it very easily.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-02-22T02:36:43.347

You should use a combination of find and count

```
db.collection.find({condition}).count 
```

# asp.net-mvc - Sharing a complex ViewModel with multiple simple Views

> ID：15714394
> 
> 赞同：0
> 
> 时间：2013-03-30T02:51:24.053
> 
> 标签：asp.net-mvc, viewmodel

I have a single View being sent a ViewModel with 20 properties. Now there is a requirement to split the single page into 10 pages, each with 2 properties. My initial gut feeling was to cut the ViewModel up into 10 smaller VMs with 2 properties each, but then I thought, does it matter if 10 different Views all share the same ViewModel and just use the properties they need? I feel like that's the wrong approach but I can't really think of why...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T03:12:57.633

Go with your gut and break it into 10 pieces. Leaving it as-is is certainly the easy way out, but will cause headaches down the road as the site grows/morphs. The MVC gods didn't intend for us to have a huge ViewModel lurking around that pages pick pieces off as needed. Stay tightly-coupled.

# ios - 空数据解析数据JSON

> ID：15714397
> 
> 赞同：0
> 
> 时间：2013-03-30T02:52:05.110
> 
> 标签：ios, json, nsjsonserialization

当我在浏览器上查看这个（方法的结尾）时，我看到了 JSON 回显的打印输出。

JSON 回显

```
[{"0":"2222","id":"2222","1":"john","first":"john","2":"true","last":"true"},{"0":"35","id":"35","1":"Griffin","first":"Griffin","2":"Peter","last":"Peter"},{"0":"40","id":"40","1":"cameron","first":"cameron","2":"Peter","last":"Peter"},{"0":"22","id":"22","1":"Sqgger","first":"Sqgger","2":"Peter","last":"Peter"},{"0":"900","id":"900","1":"sayo","first":"sayo","2":"nara","last":"nara"},{"0":"9000","id":"9000","1":"sayaaao","first":"sayaaao","2":"nara","last":"nara"},{"0":"9001","id":"9001","1":"sayaaao","first":"sayaaao","2":"nara","last":"nara"}]

//Perform query
    $result = mysqli_query($con,"SELECT * FROM User");

    $myJson=array();
    //Parse to array
    while($row = mysqli_fetch_array($result)){
        $myJson[]=$row;
        //echo $row['first'] . " " . $row['last'];
        //echo "<br />";
    }

    //Close connection
    mysqli_close($con);

    //Encode and send response
    echo json_encode($myJson); 
```

但是在我的 iOS 应用程序中，当我将数据放入 NSLog 时，数据为空（但我看到了字节，但数组显示为 0x0000

```
NSArray* data=[NSJSONSerialization JSONObjectWithData:webData options:0 error:&error];
    NSLog(@"name = %@",[data objectAtIndex:0]);//Null 
```

有什么想法吗？谢谢

# jquery - jquery mobile theme roller hover

> ID：15714398
> 
> 赞同：1
> 
> 时间：2013-03-30T02:52:18.380
> 
> 标签：jquery, css

I rolled a theme using jQuery mobile's theme roller and am now reading through the generated code. I noticed that jQuery.mobile provides :hover functionality. If jquery.mobile is used for mobile phones then what purpose does styling the :hover functionality serve. Are all smart phones not touch screen?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T04:54:47.767

I would have answered that jQuery.mobile clients are not necessarily SmartPhones but I think this article [Are Hover Events Extinct?](http://designshack.net/articles/css/are-hover-events-extinct/) probably explains it much more completely...

Hope that helps.

# jquery - 通过单击另一个 div 更改 div 背景

> ID：15714402
> 
> 赞同：0
> 
> 时间：2013-03-30T02:52:38.387
> 
> 标签：jquery, css, toggleclass

嗨，当单击另一个 div 时，我正在尝试将 div 更改为白色。听起来很简单，但无法让它发挥作用。有任何想法吗 ？

```
<section id=maindisplay>
   <div id=control></div>
</section>

$("#control").click(function(){ 
$("#maindisplay").toggleClass('#maindisplay_white'); 
```

CSS

```
#maindisplay{
background-color:black;
height: 670px;
width: 1109px;
}

#maindisplay_white{
background-color:white;
}

#control{
cursor:pointer;
background-color:white;
width: 17px;
height: 52px;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T02:54:57.073

试试这个：

```
$("#maindisplay").toggleClass('maindisplay_white'); 
```

有了这个：

```
#maindisplay.maindisplay_white{
  background-color:white;
} 
```

这是一个[`--> JS Fiddle <--`](http://jsfiddle.net/L7CMS/1/)演示更改。

# iphone - 关于 NSMutableArray 添加 NSArray 问题

> ID：15714405
> 
> 赞同：1
> 
> 时间：2013-03-30T02:53:07.503
> 
> 标签：iphone, ios, objective-c, nsmutablearray

我想达到以下效果，但我不知道如何使用 NSMutableArray 结合 NSArray 两个以上？

1.我的代码

```
for (int i=0; i<[DateSortArry2 count]; i++) {
        for (int j=0; j<[DateSortArry2Copy count]; j++) { 
            NSString *sectiondateStr2 = [NSString stringWithFormat:@"%@",[DateSortArry2Copy objectAtIndex:j]];    
            if ([[DateSortArry2 objectAtIndex:i] isEqualToString:sectiondateStr2]) {  
                [Arry addObject:sectiondateStr2];   
            }
        }
        [SumArry addObjectsFromArray:Arry];
        [Arry removeAllObjects];
    } 
```

2.我的代码结果

```
SumArry:(
"20130227",
"20130227",
"20130227",
"20130226",
"20130226",
"20130226",
"20130225",
"20130225") 
```

3.我想要结果

```
SumArry:((
    "20130227",
    "20130227",
    "20130227",
    ),
    (
    "20130226",
    "20130226",
    "20130226",
    ),
    (
    "20130225",
    "20130225"
    )) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T02:58:52.873

您的代码通过添加元素反复填充和清空同一个数组，但您需要使用`NSArray`. 因此，`NSArray`为每个部分使用一个新的。

```
for (int i=0; i<[DateSortArry2 count]; i++) {
    NSMutableArray *section = [NSMutableArray array];
    for (int j=0; j<[DateSortArry2Copy count]; j++) { 
        NSString *sectiondateStr2 = [NSString stringWithFormat:@"%@",[DateSortArry2Copy objectAtIndex:j]];    
        if ([[DateSortArry2 objectAtIndex:i] isEqualToString:sectiondateStr2]) {  
            [section addObject:sectiondateStr2];   
        }
    }
    [SumArry addObject:section];
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-30T02:58:59.107

您可以在数组中存储对另一个数组（或任何类型的对象）的引用：

```
[myMutableArray addObject:otherArray]; 
```

或连接数组。

```
[myMutableArray addObjectsFromArray:otherArray]; 
```

两者都记录在[文档](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSMutableArray_Class/Reference/Reference.html)中。从外观上看，第一种方法是您想要的，因为您想要拥有`NSArray`.`NSMutableArray`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-01T09:04:13.163

试试这个：请告诉我它是否有效。谢谢

```
NSString *str = @"";
    for (int i=0; i<[DateSortArry2 count]; i++)
     {
           if (str isEqualToString:[DateSortArry2 objectAtIndex:i])
           {
                return;
           }
           else
           {
                NSMutableArray * Arry = [[NSMutableArray alloc] init];
                str = [DateSortArry2 objectAtIndex:i]
                for (int j=0; j<[DateSortArry2Copy count]; j++)
                {
                    if ([[DateSortArry2 objectAtIndex:i] isEqualToString:str])
                    {
                        [Arry addObject:str];
                    }
                }
                [SumArry addObject:Arry];
                [Arry removeAllObjects];
            }
    } 
```

# java - 如何使用 Map 中的数据集在 Java 中计算 95 个百分位数

> ID：15714412
> 
> 赞同：1
> 
> 时间：2013-03-30T02:54:11.053
> 
> 标签：java, percentile

我正在尝试`95% percentile`从 Java 中的数据集进行计算。我的数据集会有这样的东西-

我将拥有一个`ConcurrentHashMap`像这样的键值对-

```
Key = 30
Value = 10 
```

这意味着 10 个电话在 30 毫秒内返回

另一个例子-

```
Key = 20
Value = 5 
```

这意味着 5 个呼叫在 20 毫秒内返回

所以从上面的地图中，我试图用 Java 计算 95% Percentile。

谁能从我上面的地图中提供任何示例如何在 Java 中做到这一点？谢谢您的帮助

**更新代码：-**

下面是我得到的代码，它将计算地图中的第 95 个百分位数-

```
/**
 * A simple method to log 95th percentile information
 */
private static void logPercentileInfo() {

    double total = 0;
    for (Map.Entry<Long, Long> entry : CassandraTimer.histogram.entrySet()) {
        long value = entry.getKey() * entry.getValue();
        total += value;
    }

    double sum = 0.95*total;

    double totalSum = 0;

    SortedSet<Long> keys = new TreeSet<Long>(CassandraTimer.histogram.keySet());
    for (long key : keys) {

        totalSum += CassandraTimer.histogram.get(key);

        if(totalSum >= sum) {
            System.out.println(key);
        }
    }

} 
```

谁能看一下，让我知道我是否写对了？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-30T02:58:05.123

算法是：对 map 中的所有值求和，计算总和的 95%，按升序迭代 map 键，保持值的运行总和，当 sum 等于或超过先前计算的总和的 95% 时，键应该是第 95 个百分位。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-03-05T05:17:38.470

您还可以查看 Apache Commons 的 DescriptiveStatistics

[http://commons.apache.org/proper/commons-math/javadocs/api-3.2/org/apache/commons/math3/stat/descriptive/DescriptiveStatistics.html#getPercentile(double)](http://commons.apache.org/proper/commons-math/javadocs/api-3.2/org/apache/commons/math3/stat/descriptive/DescriptiveStatistics.html#getPercentile(double))

# grails - Grails update() cannot locate record, show() and edit() can

> ID：15714431
> 
> 赞同：0
> 
> 时间：2013-03-30T02:57:31.740
> 
> 标签：grails, db2

I've got a fairly simple Grails app against a DB2 database. Everything works fine except when I try to update a record. show() and edit() are able to find the record , but the update fails saying that it cannot be located. Here's the edit:

```
 def edit() 
{
    def flatAdjustmentInstance = FlatAdjustment.get( new FlatAdjustment(compPayeeID: params["compPayeeID"], effectiveQuarterBeginDate: params["effectiveQuarterBeginDate"]) ) //here are your inbound params

    if(!flatAdjustmentInstance)
    {
        flash.message = "MRI Modifier Record not found with ${params}"
        redirect(action:"list")
    }
    else
    {
        return [ flatAdjustmentInstance: flatAdjustmentInstance]
    }
} 
```

Now the update()

```
def flatAdjustmentInstance = FlatAdjustment.get( new FlatAdjustment(compPayeeID: params["compPayeeID"], effectiveQuarterBeginDate: params["effectiveQuarterBeginDate"]) ) //here are your inbound params
    //def flatAdjustmentInstance = new FlatAdjustment(compPayeeID: params["compPayeeID"], effectiveQuarterBeginDate: params["effectiveQuarterBeginDate"])

    if (!flatAdjustmentInstance) 
    {

        flash.message = message(code: 'default.not.found.message', args: [message(code: 'flatAdjustment.label', default: 'FlatAdjustment'), params])
        redirect(action: "list")
        return
    } 
```

As I said, all controller methods/closures create the instance of the domain object in the same way and all work correctly except for update(). Any ideas?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T04:14:56.450

`.get()` retrieves an existing object based on its ID. You cannot pass a new object to that method.

`FlatAdjustment flatAdjustmentInstance = FlatAdjustment.findByCompPayeeIDAndEffectiveQuarterBeginDate(params.compPayeeID, params.date("effectiveQuarterBeginDate", "INSERTYOURDATEFORMATHERE"))`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T21:52:43.503

I figured this one out, and it was a really bone-headed mistake. The form I had created was passing in the compPayeeID, but since the field is not editable by the user, I changed it from an input to a textField. That meant is was no longer being passed in with the grails params object. I changed it back, set the field to read only, and now all is well.

# algorithm - 随机访问固定字母表中 3 个符号的排序集

> ID：15714433
> 
> 赞同：1
> 
> 时间：2013-03-30T02:57:50.520
> 
> 标签：algorithm, sorting, combinatorics

想象一下，我们有一个由 5 个字符组成的字母表：**ABCDE**。

我们现在要枚举所有可能的 3 个这些字母的集合。每个字母只能出现一次是一个集合，字母的顺序无关紧要（因此应该对集合中的字母进行排序）。

所以我们得到以下集合：

1.  美国广播公司
2.  ABD
3.  安倍
4.  ACD
5.  高手
6.  ADE
7.  BCD
8.  公元前
9.  溴化二苯醚
10.  CDE

一共10套。该顺序是按字典顺序排列的。

现在让我们假设字母长度为`N`（本例中为 5），集合长度为（本例中为`M`3）。知道`N`并且`M`，如果可能的话，我们怎么能：

1.  说出最坏情况下的组合总数`O(M+N)`（本例中的答案是 10）？
2.  在最坏的情况下输出任何给定数字的组合（给定 1，返回 ABC；给定 5，返回 ACE 等等）`O(M+N)`？

通过生成整个列表来完成这些复杂的事情是微不足道的`O(M^N)`，但我想知道是否有更好的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T03:09:10.210

第一个问题的答案很简单：就是`C(n,r)`，我们`r`要从一组 size 中选择所有项目的组合`n`。公式[在](http://www.mathwords.com/c/combination_formula.htm)其他地方：

```
C(n,r) = n! / (r! (n-r)!) 
```

选择`i'th`组合而不计算所有其他组合的能力将取决于是否具有将组合编号`i`与组合相关联的编码。这将更具挑战性，需要更多的思考......

（编辑）

在对问题进行了更多思考之后，Python 中的解决方案如下所示：

```
from math import factorial

def combination(n,r):
    return factorial(n) / (factorial(r) * factorial(n-r))

alphabet = "ABCDEFGHIJKLMNOPQRSTUVWXYZ"

def showComb(n,r,i,a):
    if r < 1:
        return ""
    rr = r-1
    nn = max(n-1,rr)
    lasti = i
    i -= combination(nn,rr)
    j = 0
    while i > 0:
        j += 1
        nn = max(nn-1,1)
        rr = min(rr,nn)    # corrected this line in second edit
        lasti = i
        i -= combination(nn,rr)
    return a[j] + showComb(n-j-1,r-1,lasti,a[(j+1):])

for i in range(10):
    print(showComb(5,3,i+1,alphabet)) 
```

...输出问题中显示的列表。

我使用的方法是找到`i'th`输出集合的第一个元素，使用剩余集合元素的组合数可用于查找给定 number 的第一个元素的想法`i`。

也就是说，对于 C(5,3)，第一个 C(4,2) (=6) 输出集的第一个字符为 'A'，然后下一个 C(3,1) (=3) 输出集具有'B' 然后 C(1,1) (=1) 集合将 'C' 作为它们的第一个字符。

然后该函数递归地找到剩余的元素。请注意，它`showComb()`是尾递归的，因此如果您愿意，可以将其表示为循环，但我认为在这种情况下递归版本更容易理解。

为了进一步测试，以下代码可能有用：

```
import itertools

def showCombIter(n,r,i,a):
    return ''.join(list(itertools.combinations(a[0:n],r))[i-1])

print ("\n")

# Testing for other cases   
for i in range(120):
    x = showComb(10,3,i+1,alphabet)
    y = showCombIter(10,3,i+1,alphabet)
    print(i+1,"\t",x==y,"\t",x,y) 
```

...这证实了这个案例的所有 120 个例子都是正确的。

我没有准确计算时间复杂度，但调用次数`showComb()`将是`r`并且`while`循环将执行`n`次数或更少。因此，在问题的术语中，如果我们假设函数可以在恒定时间内计算，我很确定复杂度将小于 O(M+N)，`factorial()`我认为这不是一个糟糕的近似值，除非它的实现是幼稚的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T04:51:13.810

同意第一部分很容易，将与此类似的等式放入您选择的语言中。

```
x=12
y=5
z=1
base=1
until [[ $z -gt y ]]
do
 base=`echo $x $z $base|awk '{print ($1/$2) * $3}'`
 x=`expr $x - 1`
 z=`expr $z + 1`
 echo base:$base
done

echo $base 
```

上面的示例使用 12 个项目，以 5 个为一组排列，共有 792 种组合。

做你问题的第二部分......我只是在想它，但无论如何都不是直截了当的。

# android - Android 登录/注册示例项目

> ID：15714446
> 
> 赞同：4
> 
> 时间：2013-03-30T02:59:35.360
> 
> 标签：android

是否有在 Android 中实现登录/注册欢迎屏幕的参考示例项目？

我已经考虑过要做到这一点我需要知道什么：

*   活动布局
*   文本字段验证
*   文本字段提示
*   启用/禁用 UI 元素（即只有在输入数据时才按登录）
*   异步网络请求验证凭据
*   阻止 UI 等待登录
*   根据登录结果转发到下一个活动
*   如果是第一次用户，则注册插曲
*   如果用户想要取消网络登录（如果用户离开活动，则不会在回调时崩溃）
*   保存用户数据，访问令牌（如果可用），否则密码（并加密）
*   过渡动画，包括“拒绝访问”反馈
*   如果可用，请使用缓存的凭据
*   登录“记住我”退出
*   等等

还有很多要点要写下来，但你明白了。

我怀疑，如果我错了，请纠正我，许多应用程序可能有（甚至开始于）登录/注册屏幕。可能在某个地方有一个可定制的 Eclipse 项目，它捕获了大多数最佳实践，这样开发人员就不会重新发明轮子？

显然，许多应用程序都希望以不同的方式做事。显然，在某些情况下，上述内容毫无意义。但是..也许对于某些应用程序来说，这是一个合理的“典型”登录活动？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-30T03:58:44.157

用于 Eclipse 的最新版本的 Android 开发工具 (ADT) 插件有一个创建新 LoginActivity 的向导，这是一个很好的起点。它具有以下特点。

*   Activity layout Text field validation
*   Text field hints
*   Enabling/disabling UI elements
*   Async request validating credentials
*   Blocking UI waiting for login
*   Cancelling login
*   etc.

It's in File -> New -> Other -> Android Activity -> LoginActivity

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-30T03:31:45.350

1）在/res/layout中创建login.xml（活动布局）在这个例子中，有一个额外的密码更改选项

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <EditText
        android:id="@+id/username"
        android:hint="Username"
        android:layout_width="250dp"
        android:layout_height="wrap_content"
        android:layout_marginTop="180dp"
        android:layout_gravity="center"
        android:ems="10" >

        <requestFocus />
    </EditText>

    <EditText
        android:id="@+id/password"
        android:layout_width="250dp"
        android:hint="Password"
        android:layout_marginTop="20dp"
        android:layout_gravity="center"
        android:layout_height="wrap_content"
        android:ems="10"
        android:inputType="textPassword" />

    <Button
        android:id="@+id/Loginbutton"
        android:layout_gravity="center"
        android:layout_marginTop="30dp"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Login" />

    <CheckedTextView
        android:id="@+id/changepassword"
        android:layout_width="wrap_content"
        android:layout_marginTop="75dp"
        android:clickable="true"
        android:layout_marginLeft="190dp"
        android:layout_height="wrap_content"
        android:text="Change_Login_Id" />

</LinearLayout> 
```

2) 在 /src// 中创建 Login.java 类

```
public class Login extends Activity{
    private Button login;
    private EditText Username;
    private EditText Password;
    private CheckedTextView changeid;
    public SQLiteDatabase sampleDB;
    public String COLUMN_ID="_id";
    public String COLUMN1="username";
    public String COLUMN2="password";
    public String TABLE_NAME="Androdata";
    @Override
    protected void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);
        setContentView(R.layout.login);
        login=(Button)findViewById(R.id.Loginbutton);
        Username=(EditText)findViewById(R.id.username);
        Password=(EditText)findViewById(R.id.password);
        changeid=(CheckedTextView)findViewById(R.id.changepassword);
        sampleDB =  this.openOrCreateDatabase(TABLE_NAME, MODE_PRIVATE, null);
        boolean x=init(TABLE_NAME);
        if(x==false)
        {
        createDB();
        insertDB();
        }
        changeid.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {
                Intent myintent=new Intent("android.intent.action.DATABASE");
                startActivity(myintent);
            }
        });
        login.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {
                int k=check();
                if(k==1)                
                {
                    Toast.makeText(Login.this, "Login Successful ...", Toast.LENGTH_SHORT).show();
                    Intent myintent=new Intent("android.intent.action.CHOICE");
                    startActivity(myintent);
                }
                else
                {
                    Username.setText("");
                    Password.setText("");
                    Toast.makeText(Login.this, "Authentication Failed...", Toast.LENGTH_SHORT).show();
                }   
            }
        });
    }
    public boolean init(String tableName)
    {
        Cursor cursor = sampleDB.rawQuery("select DISTINCT tbl_name from sqlite_master where tbl_name = '"+tableName+"'", null);
        if(cursor!=null) {
            if(cursor.getCount()>0) {
                                cursor.close();
                return true;
            }
                        cursor.close();
        }
        return false;
    }
    private void insertDB() {
        sampleDB.execSQL("INSERT INTO " +
                TABLE_NAME +
                " Values ('1','Androviewer','viewer');");   
        System.out.println("Inserted data successfully....");
    }
    private void createDB() {
        sampleDB.execSQL("CREATE TABLE IF NOT EXISTS " +
                TABLE_NAME+ "(" + COLUMN_ID
                + " integer primary key autoincrement, " + COLUMN1
                + " text not null,"+ COLUMN2
                + " text not null);");
        System.out.println("Database created successfully....");
    }
    private int check() {
        String a=Username.getText().toString();
        String b=Password.getText().toString();
        // TODO Auto-generated method stub
        Cursor c = sampleDB.rawQuery("SELECT username, password FROM " +
                TABLE_NAME +
                " where _id=1", null);

        if (c != null ) {
            if  (c.moveToFirst()) {
                do {
                    String orgusername = c.getString(c.getColumnIndex("username"));
                    String orgpassword = c.getString(c.getColumnIndex("password"));
                    if(a.equals(orgusername)&&b.equals(orgpassword))
                    {
                        return 1;
                    }
                    else
                    {
                        return 0;
                    }
                }while (c.moveToNext());
            }
        }
        return 0;
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-30T03:35:36.337

```
if u want a single time login u can use shared preferences or make a simple change in my db code .

1)u can set textfield hint in xml

android:hint="ur hint" 

2)Use Intent as i used to move forward from one activity to next.

Do u need any more 
```

# java - 在 Eclipse 中无法解析导入的 com.google.api.client

> ID：15714449
> 
> 赞同：6
> 
> 时间：2013-03-30T02:59:51.440
> 
> 标签：java, android, google-app-engine

我收到此错误：

`The import com.google.api.client cannot be resolved`

我的配置如下：

项目属性 - Android：

![在此处输入图像描述](../Images/b1212191658f6070fd6b6ec84656ecf5.png)

Java构建路径：

![在此处输入图像描述](../Images/3c91a81b369706be2efe7afa55606af0.png)

即使重新启动 Eclipse，我仍然会收到以下错误。

![在此处输入图像描述](../Images/0c9a7e4abf5e61f995006d11bbc594cc.png)

任何人都可以帮忙吗？谢谢：D

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-30T05:32:22.233

您尚未在项目中添加客户端库。 [http://code.google.com/p/google-api-java-client/wiki/Setup](http://code.google.com/p/google-api-java-client/wiki/Setup)。您将在上述链接中获得 google-api-java-client-1.14.1-beta.zip 文件。将这些 jar 文件保存在 Android 项目的 libs 文件夹中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-05-18T18:54:10.967

添加这个：

```
<!-- https://mvnrepository.com/artifact/com.google.api-client/google-api-client -->
<dependency>
    <groupId>com.google.api-client</groupId>
    <artifactId>google-api-client</artifactId>
    <version>1.23.0</version>
</dependency>

<!-- https://mvnrepository.com/artifact/com.google.oauth-client/google-oauth-client-jetty -->
<dependency>
    <groupId>com.google.oauth-client</groupId>
    <artifactId>google-oauth-client-jetty</artifactId>
    <version>1.23.0</version>
</dependency> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-30T03:10:12.150

如果您像我一样尝试将 Google API 添加到 Android 应用程序，并且您使用的是 Eclipse，那么以下操作非常简单。

`Right-click on a project, select "Google > Add Google APIs...", select the Google API you need from the list of available Google APIs, click Finish, and it will automatically download the API client library`

来自[https://code.google.com/p/google-api-java-client/wiki/Setup](https://code.google.com/p/google-api-java-client/wiki/Setup)

# ruby-on-rails - Run Rails App In Windows and Linux with different gemfiles

> ID：15714453
> 
> 赞同：2
> 
> 时间：2013-03-30T03:00:14.903
> 
> 标签：ruby-on-rails, gemfile

I'm looking for a way to set up my rails app/Gem file to conditionally include a gem based on if I am in linux or not. I need the app in Linux, but it is not compatible with windows and I don't need it there anyway.

I was able to get everything working on Linux, but since I am using LESS stylesheets, I needed a javascript runtime. I didn't want to install Node.js, so i installed therubyracer, which is now in my gemfile. Then I pushed everything to github and cloned the app on my windows computer.

I tried to install all of the gems and realized there was no way install therubyracer on windows because of an incompatibility they haven't fixed yet (see [therubyracer gem on windows](https://stackoverflow.com/questions/6356450/therubyracer-gem-on-windows))

I read elsewhere that I don't need therubyracer on windows because rails will automatically pick up the JScript runtime, so I'd like to have a simple way to only include therubyracer in linux. I read in [does using ":platforms =>" in your gemfile work?](https://stackoverflow.com/questions/8421321/does-using-platforms-in-your-gemfile-work) that I can use an if block in my gemfile, but that it will cause my gemfile.lock to be regenerated every time. That was over a year ago though. Is there a way to only include therubyracer without regenerating gemfile.lock every time? Or maybe is gemfile.lock ok to remove my git and just have it generated every time locally?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T03:41:58.977

I think you'll probably have to use that answer in the :platforms question and just ignore the fact that the gemfile.lock is regenerated. There's not much point in keeping the lockfile in your repository when it will be different on each platform. However, you can still maintain some of the control that the lockfile provides by manually specifying specific versions and dependencies in the gemfile.

# java - 可以在值中嵌入分隔符的键值对的正则表达式（Scala）

> ID：15714454
> 
> 赞同：0
> 
> 时间：2013-03-30T03:00:19.810
> 
> 标签：java, regex, parsing, scala

我正在尝试使用正则表达式来解析形式的字符串：

“a=10:30:00:b=2:c=3”

屈服

```
a=10:30:00
b=2
c=3 
```

我得到的最接近的是 (\w+)=(\S+?)(?=:|$)，但这会切断 a 的 :30:00:

```
a=10
b=2
c=3 
```

代码在scala中：

```
scala> val s = "a=10:20:00:b=2:c=3"
s: java.lang.String = a=10:20:00:b=2:c=3

scala> val R = """(\w+)=(\S+?)(?=:|$)""".r 
R: scala.util.matching.Regex = (\w+)=(\S+?)(?=:|$)

scala> R findAllIn s foreach println
a=10
b=2
c=3 
```

## 编辑

修改了基于正则表达式的正则 [表达式以匹配逗号分隔的 key=value 列表，其中 value 可以包含](https://stackoverflow.com/questions/14641750/regular-expression-to-match-comma-separated-list-of-key-value-where-value-can-co?rq=1)要处理的逗号：

```
val s = "foo=bar:baz:r=abc:a=10:20:00:b=2:c=3:s=xx:yy:z=100"

val R = """([^=]+)=([^=]+)(?::|$)""".r

R findAllMatchIn s foreach { x => println(x.subgroups) }
                                              //> List(foo, bar:baz)
                                              //| List(r, abc)
                                              //| List(a, 10:20:00)
                                              //| List(b, 2)
                                              //| List(c, 3)
                                              //| List(s, xx:yy)
                                              //| List(z, 100) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T15:08:56.733

```
scala> val R = """(\w+)=(\d+(?::\d+)*)""".r
R: scala.util.matching.Regex = (\w+)=(\d+(?::\d+)*)

scala> for(R(key, value) <- R.findAllIn(str)) println(key + "=" + value)
a=10:30:00
b=2
c=3 
```

或基于您引用的正则表达式：

```
scala> val R = """([^:=]+)=([^=]+)(?=:|$)""".r
R: scala.util.matching.Regex = (\w+)=([^=]+)(?=:|$)

scala> for(R(key, value) <- R.findAllIn(str)) println(key + "=" + value)
a=10:30:00
b=2
c=3 
```

# java - createSqlQuery 休眠，Java

> ID：15714461
> 
> 赞同：1
> 
> 时间：2013-03-30T03:01:50.043
> 
> 标签：java, hibernate

我需要在 Java 中编写休眠查询 (createSQLquery) 我有查询但我有点迷失了如何为我的查询创建条件。

基本上我必须将常规 where 子句转移到休眠 .add(Restriction)

例如让我们采取：

```
where (name LIKE '%test%' or lastname LIKE '%test%') and (site_id = 2) and (date>=121212 and date <= 343343)

Query query = sess.createSQLQuery(sql).addScalar("ID", Hibernate.long);
query.add(Restrictions.or ( 
                            Restrictions.like("name", "%test%")
                            Restrictions.like("lastname", "Fritz%")
          ))
     .add(Restrictions.eq("site_id", new Integer(2)))
     .add(Restrictions.add(Restrictions.gr("date_start", 122122)
                       .add(Restrictions.le("date_end", 345433))); 
```

我没有机会运行它，因为现在无法访问我的环境，只是想弄清楚这一点。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T07:42:15.987

你必须这样做

```
 Criteria criteria = session.createCriteria(YourPojo.class);
    criteria.add(Restrictions.eq("id", id));
    criteria .add(Restrictions.or ( 
                        Restrictions.like("name", "%test%"),
                        Restrictions.like("lastname", "Fritz%")));
    criteria.add(Restrictions.eq("site_id", new Integer(2)))
    criteria.add(Restrictions.add(Restrictions.gr("date_start", 122122)
                   .add(Restrictions.le("date_end", 345433)));
    return (criteria.list()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T23:53:33.890

好的，问题这样解决了：

从 XML 查询 - 我放入 where 子句

```
<Applications>
    <Application name="AlertData">
        <Query name="alerts">
            <SQL>
                SELECT 
                    mr.measurement_date as measurementDate,
                    ........ // more data
                FROM measurement m
                    LEFT JOIN tags     ON mr.tag_id = tags.tag_id
                    .......... // more joins
                WHERE
                    mr.site_id = :siteid
                    $searchConstraints$ // just a string
                    $dateStartFragment$ // just a string                                  
            </SQL>
        </Query>
    </Application>
</Applications> 
```

下一个 Java 代码：

```
 if (search != null && !search.isEmpty()) {   
            searchFragment = " AND (UPPER(field1) LIKE :search" +
                              " OR UPPER(field2)  LIKE :search)";           
  }

  sql = this.prepareQuery(sql, ImmutableMap.of(
      "searchConstraints", searchFragment,
      "dateStartFragment", dateStartFragment
  ));

   Query query = this.sessionFactory.getCurrentSession()
                .createSQLQuery(sql) 
   //more query here

 if (search != null && !search.isEmpty()) {    
     query.setString("search", "%" + search.toUpperCase() + "%");            
 }

public String prepareQuery(String queryString, Map<String, String> templateVars) {
     ST stringTemplater = new ST(queryString, '$', '$');

      for (String key : templateVars.keySet()) {
          stringTemplater.add(key, templateVars.get(key));
      }

      String renderedQuery = stringTemplater.render();
      return renderedQuery;
} 
```

# vb.net - 检查每个月的天数是否正确

> ID：15714465
> 
> 赞同：2
> 
> 时间：2013-03-30T03:02:44.560
> 
> 标签：vb.net

嘿伙计们，我目前有一个子例程，我希望它会占用日期的日期和月份。然后检查它是哪个月以及该月的天数是否合适

这是我目前拥有的：月份和日期分别是输入的月份和日期

```
 If Month = 4 Or 6 Or 9 Or 11 Then
            If (1 <= Day) AndAlso (Day <= 30) Then
                DateOkay= True
            End If
        End If

        If Month = 2 Then
            If (1 <= Day) AndAlso (Day <= 28) Then
                DateOkay = True
            End If
        End If

        If Month = 1 Or 3 Or 5 Or 7 Or 8 Or 10 Or 12 Then
            If (1 <= Day) AndAlso (Day <= 31) Then
                DateOkay = True
            End If
        End If 
```

目前，只要天数的输入 <=31，任何月份的 dateOkay 都可以返回。有没有更简单的方法来做到这一点？

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-30T03:18:50.213

因为闰年，你也真的需要这一年。有一个内置函数可以提供：

```
Dim numDays As Integer = DateTime.DaysInMonth(Now.Year, Now.Month)

dateOkay = (day <= numDays) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T05:05:52.357

这种方法可以让您检查，它消除了将in`whole date`拆分为、、的必要性。你可以试试这个`whole date``day``month``year`

```
 Dim xdate As String = "20-02-2013"
  DateOkay = if(IsDate(xdate),true,false) 'This will return true

  xdate = "30-02-2013"
  DateOkay = if(IsDate(xdate),true,false) 'This will return false 
```

**编辑：**

如果你想向`generic validation message`用户显示一个 like `'Invalid date.!'`，你可以按照这个方法，否则如果你想显示`unique message`like `'Invalid Day.!'`，那么你可以`DaysInMonth`按照 LarsTech 的建议使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-30T05:20:46.607

我觉得 Larstech 的答案是最好的（假设您`DateTime`最初使用的是 a ，而不仅仅是月份和日期的整数，或者还有其他获取年份的方法）。

我发布了一个答案来解释**为什么**你的代码没有按照你期望的方式工作。您的代码给您带来问题的原因是您的条件测试`Month`不正确并且将始终返回 true，这意味着您的内部 IF 语句将执行。

```
If Month = 4 Or 6 Or 9 Or 11 Then 
```

6, 9, and 11 will all evaluate to true, making the whole if check true (I believe any non-zero integer value will evaluate to true in VB.NET, but haven't been able to dig up a link to substantiate it. Testing on my machine in VS 2012 supports that, as well as some other discussions I've seen, however).

So what is happening is that the last if block (as you have it written) for the month will always evaluate to `True`, and as long as the day is 1 to 31 `dateOkay` will evaluate to true, no matter what the actual month is.

What you should do is this:

```
If Month = 4 Or Month = 6 Or Month = 9 Or Month = 11 Then 
```

This will evaluate as you expect it to, and the rest or your code will work as expected.

I would recommend using `OrElse` instead of `Or`, which will enable you to perform short-circuit evaluation similar to the `AndAlso` you used. In other words, as soon as one of the conditional tests in the if statement using `OrElse` evaluates to true, the rest of the conditional tests will be ignored. `AndAlso` will not evaluate any additional conditional tests once it encounters a False result.

In comparison, `And` and `Or` will evaluate all the tests, regardless of outcome. For example, `If Month = 1 Or Month = 3 Or Month = 4 Then` will run each of the individual tests, even if `Month` is 1.

Finally, if you're not setting `dateOkay` before evaluating the date, I would set it explicitly to False before the evaluation. Putting it altogether you'd get something like this:

```
dateOkay = False

If Month = 4 OrElse Month = 6 OrElse Month = 9 OrElse Month = 11 Then
    If (1 <= Day) AndAlso (Day <= 30) Then
        DateOkay= True
    End If
End If

If Month = 2 Then
    If (1 <= Day) AndAlso (Day <= 28) Then
        DateOkay = True
    End If
End If

If Month = 1 OrElse Month = 3 OrElse Month = 5 OrElse Month = 7 OrElse Month = 8 OrElse Month = 10 OrElse Month = 12 Then
    If (1 <= Day) AndAlso (Day <= 31) Then
        DateOkay = True
    End If
End If 
```

Again, however, Larstech's answer is the best to your question " Is there a simpler way of doing this?".

# php - 从网页获取 JavaScript 数据数组

> ID：15714469
> 
> 赞同：0
> 
> 时间：2013-03-30T03:02:59.483
> 
> 标签：php, javascript

好的，所以这个网页做了不同的事情。它使用文本文件并在 JavaScript 中加载数据，然后在 JavaScript 中显示它。我尝试使用 PHP 方法，但我无法得到它。

如何从[http://queville.com/cgi-bin/forums/index.cgi?a=scores&b=Overall](http://queville.com/cgi-bin/forums/index.cgi?a=scores&b=Overall)`S`获取玩家的 hiscores 数组

就像，如果你查看源代码，你会在`<script>` `</script>`标签之间看到：

```
 S[na]="|Daminion|442776|30436|125645|90728|40835|79058|16318|15927|43700|129|0|"; na++; 
 S[na]="|superfly|442490|32398|32032|161903|93689|75086|20018|11020|15937|407|0|"; na++; 
 S[na]="|GodessCrystal|435702|46422|41721|95881|43717|105026|23324|23500|30296|25815|0|"; na++; 
 S[na]="|grandkool|432065|110849|34644|12438|7706|165145|60924|12436|23446|4477|87|"; na++; 
```

我尝试过使用 PHP 之`file_get_contents`类的，但它不起作用......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T03:12:13.417

为我工作：

```
$x = file_get_contents("http://queville.com/cgi-bin/forums/index.cgi?a=scores&b=Overall");
preg_match_all("/S\[na\]=.+/", $x, $matches);
print_r($matches); 
```

输出：

```
Array
(
    [0] => S[na]="|popatop|7210055|1040749|495318|1691275|958880|1084535|401043|535678|163810|838767|1399|"; na++; 
    [1] => S[na]="|SusieQ|6102424|1047948|484290|934258|613093|1222478|344052|515099|109392|831814|253|"; na++;
    // lots more
) 
```

# javascript - 如何向这个 jQuery Image Swap Gallery 添加淡入淡出效果

> ID：15714471
> 
> 赞同：0
> 
> 时间：2013-03-30T03:03:32.343
> 
> 标签：javascript, jquery

我想知道如何使用此示例在悬停时添加淡入淡出效果[http://www.designchemical.com/lab/jquery/demo/jquery_demo_image_swap_gallery.htm](http://www.designchemical.com/lab/jquery/demo/jquery_demo_image_swap_gallery.htm)

我想知道是否有可能实现这样的 www.bungie.net

这是示例中使用的代码

```
$(document).ready(function() {
    // Image swap on hover
    $("#gallery li img").hover(function(){
        $('#main-img').attr('src',$(this).attr('src').replace('thumb/', ''));
    });
    // Image preload
    var imgSwap = [];
     $("#gallery li img").each(function(){
        imgUrl = this.src.replace('thumb/', '');
        imgSwap.push(imgUrl);
    });
    $(imgSwap).preload();
});
$.fn.preload = function() {
    this.each(function(){
        $('<img/>')[0].src = this;
    });
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-25T22:18:50.243

我使用了 bruchowski 的代码，它对我很有用。我确实将 .hover 更改为 .mouseover ，因为当鼠标移出时我得到了双重淡入淡出效果，我只是希望最后一个鼠标悬停的图像能够粘住。

I'm also very new to jquery and at first pasted it in the wrong place. Once I placed it directly before $(imgSwap).preload(); it worked.

And I slowed the fade down.

So my code is as follows:

```
<script type="text/JavaScript">
// prepare the form when the DOM is ready 
$(document).ready(function() {
    $("#gallery li img").hover(function(){
    $('#main-img').attr('src',$(this).attr('src').replace('thumb/', ''));
});
var imgSwap = [];
 $("#gallery li img").each(function(){
    imgUrl = this.src.replace('thumb/', '');
    imgSwap.push(imgUrl);
});
$("#gallery li img").mouseover(function(){
if ($("#main-img:animated").length){
    $("#main-img:animated").stop();
}
$("#main-img").css("opacity", "0").animate({"opacity":"1"}, 1400);
}); $(imgSwap).preload();
});
$.fn.preload = function() {
this.each(function(){
    $('<img/>')[0].src = this;
});
}
</script> 
```

Thanks!!!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T03:11:23.053

在他们的示例中的这部分代码中

```
 $("#gallery li img").hover(function(){
    $('#main-img').attr('src',$(this).attr('src').replace('thumb/', ''));
}); 
```

改成

```
 $("#gallery li img").hover(function(){
    $('#main-img').attr('src',$(this)
                   .fadeOut('fast')            
                   .attr('src').replace('thumb/', ''));
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-30T03:19:54.593

这是一个快速的解决方案（您可以将此添加到他们现有的代码中，不要编辑他们已有的代码）

```
$("#gallery li img").hover(function(){
    if ($("#main-img:animated").length){
        $("#main-img:animated").stop();
    }
    $("#main-img").css("opacity", "0").animate({"opacity":"1"}, 300);
}); 
```

# ruby - 尝试使用块时出现“意外的关键字_do_block”

> ID：15714472
> 
> 赞同：1
> 
> 时间：2013-03-30T03:03:34.267
> 
> 标签：ruby, syntax-error, block

这是我的程序：

```
my_hash.each |w| do
    p "is this right?"
    awesome_print w
    fix = gets
    fix.chop
    if (fix == "N")
        p "Tell me what it should be"
        correction = gets
        w[1] = correction
    end
end 
```

这是我得到的错误：

```
what.rb:1: syntax error, unexpected keyword_do_block
what.rb:12: syntax error, unexpected keyword_end, expecting $end 
```

有人知道我为什么会收到这个错误吗？

这是我的哈希： `{:banana=>:fruit, :pear=>:fruit, :sandal=>:fruit, :panda=>:fruit, :apple=>:fruit}`

我只想以传统的 Ruby 方式对每个单独的密钥对进行操作。我怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-30T03:04:37.100

你有向后的语法。它应该是：

```
my_hash.each do |w| 
```

代替：

```
my_hash.each |w| do 
```

# eclipse - Eclipse is not recommending fixes to errors

> ID：15714475
> 
> 赞同：-3
> 
> 时间：2013-03-30T03:04:08.833
> 
> 标签：eclipse

I recently purchased a new computer, and have a new install of the JDK and Eclipse. My old Eclipse install used to suggest/recommend clickable fixes to errors. My new install only shows errors.

How can I convince Eclipse to show me those clickable fixes?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-30T15:17:41.323

You are using an Eclipse version that is more than 5 years old. Please immediately replace it by a new version from the [eclipse website](http://www.eclipse.org/), as that will probably solve this and many other issues you might have with Eclipse.

# qt - 设置 QTableView 宽度取决于模型列

> ID：15714476
> 
> 赞同：0
> 
> 时间：2013-03-30T03:04:23.537
> 
> 标签：qt, layout

我的数据有一个自定义的 QAbstractTableModel，该模型当前包含固定数量的列 (12)。我还有一个自定义 QTableView 来显示这个模型。当我将此小部件添加到我的对话框时，它总是像这样拍手最后几列![](../Images/8a0c12bfa5bd8655e38d77ebc35c7a5f.png)

我使用标准布局（QFormLayout、QVBoxLayout）将小部件添加到对话框中，并且我没有为我的小部件指定 minimumSize()，希望布局引擎能够为我计算出最好的布局。

那么，如何设置模型类/ QTableview 类，以便它自动展开以显示所有列？或者如何使我的 tableView 的 minimumSize 取决于表格列的宽度？

（我不想硬编码窗口的像素值，因为每当列更改时，我将不得不再次手动调整值）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T04:59:33.380

如您所见，滚动条在表格内部，而不是在表格外部。`QTableView`extends `QAbstractScrollArea`，当内容不适合视口时创建它们。视口的最小尺寸由方法控制`QSize QAbstractScrollArea::maximumViewportSize () const`（顺便说一句，它不是虚拟的）。

我认为，最好的方法是保存`QWidget::saveGeometry()`（是`QMainMindow`吗？）并`QTableView::horizontalHeader()->saveState()`在`QSettings`你的小部件的析构函数中，并在构造函数中重新设置它们。

# asp.net - 存储过程查询中的 SQL 注入

> ID：15714484
> 
> 赞同：4
> 
> 时间：2013-03-30T03:05:26.170
> 
> 标签：asp.net, sql, tsql, xss, sql-injection

我有一个存储过程，它将根据用户在标准搜索文本框中键入的内容返回搜索结果。在搜索框中按回车后，我将查询传递给 search.aspx?q=whatever user enter。

search.aspx 有一个 sqldatasource，它接受一个查询字符串参数并调用一个存储过程，该过程连接多个表并包含以下 where 子句...

```
where (description like '%' + @query + '%' or title like '%' + @query + '%'  or     calls.call_id like @query or r.firstname = @query or r.lastname = @query
or n.note like '%' + @query + '%') 
```

...这种 sql 注入是否安全，即使用这样的参数？

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-30T03:27:32.363

不，这不容易受到 SQL 注入的影响，因为它使用 SQL 参数。假设有人试图通过提供以下值来执行[SQL 注入](http://xkcd.com/327/)`@query`：

`'; DROP TABLE STUDENTS;`

您提供的代码仍然是安全的，因为除了不是 SQL 的参数之外，查询都是您的；这是一个字符串。即使字符串包含 SQL，除非您的存储过程实际[执行](http://msdn.microsoft.com/en-us/library/ms188332.aspx)了它，否则它永远不会被执行。永远不要这样做（除非你有充分的理由这样做（但即便如此，你可能应该先重新设计））。只需使用参数清理用户输入，就可以轻松避免 SQL 注入。

# c - 打印多维数组

> ID：15714489
> 
> 赞同：0
> 
> 时间：2013-03-30T03:05:57.833
> 
> 标签：c, arrays, multidimensional-array

我写了一个小东西，它要求用户输入一些输入（行和列），然后应该将数组中的所有内容设置为一个点（“。”）并将其打印出来，但这会使我的应用程序崩溃。

```
void main()
{

    int i,j, m, n;

          printf("The number of lines (m): ");
          scanf("%d", m );
          printf("\nThe number of columns (n): ");
          scanf("%d", n);

    //create my array

    char mineGrid[n][m];

    //set all fields in to safe (.)

    for (j = 0; j <= n; j++)
    {
       for (i = 0; i <= m; i++)
          {
             mineGrid[j][i] = ".";
          }
    }
   //print a grid of dots

    for (j = 0; j <= n; j++)
    {
       for (i = 0; i <= m; i++)
          {
             printf("%s", mineGrid[j][i]);
          }
    }
} 
```

知道为什么这会崩溃吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T03:30:46.393

这里的主要问题是你有很多看起来像的循环

```
for (j = 0; j <= n; j++) 
/*             ^      */
/*             |      */
/*           Look!    */ 
```

`j`将从`0`to运行`n`，但您已将数组声明为

```
char mineGrid[n][m]; 
```

这意味着已为编号为 的行分配了`0`空间`n-1`。

你所有的索引循环都是错误的。编写这些循环的惯用方式是

```
for (j = 0; j < n; ++j) 
```

我已经固定了范围并将增量从 post- 更改为 pre- 这是一个旧的微优化，这些天通常在 c 中没有任何区别（因为编译器足够聪明来修复它），但是如果你*可以*切换到 c++ 并以这种方式使用非平凡的类。所以我把它放在我要“修复”的小事情清单中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T03:17:00.660

那是因为您将字符串而不是 char 放入数组中。

像这样做：

```
void main()
{

    int i,j, m, n;

    m = 5;
    n = 6;

    //create my array

    char mineGrid[n][m];

    //set all fields in to safe (.)

    for (j = 0; j <= n; j++)
    {
        for (i = 0; i <= m; i++)
        {
            mineGrid[j][i] = '.';
        }
    }
    //print a grid of dots

    for (j = 0; j <= n; j++)
    {
        for (i = 0; i <= m; i++)
        {
            printf("%c", mineGrid[j][i]);
        }
        printf("\n");
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-30T03:29:48.827

您创建了 n X m 个元素，但在数组中使用了 n+1 X m+1 个元素。像下面这样使用

一种

```
for (j = 0; j < n; j++)
{
    for (i = 0; i < m; i++)
    {
        mineGrid[j][i] = '.';
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-30T03:30:35.627

这是因为对于大小为**N**的数组，有效数组索引**0 到 N-1**。但是您正在访问不是有效数组索引的第**N个元素，并且访问它会调用未定义的行为。**

```
for (j = 0; j <= n; j++)
{
   for (i = 0; i <= m; i++) // Array out of bounds in either condition check 
```

话虽如此，您的输入也有问题。

```
scanf("%d", m ); // Missing & operator before m. 
```

# asp.net - 支持缓存 VirtualPathProvider 服务内容的 StaticFileHandler

> ID：15714490
> 
> 赞同：3
> 
> 时间：2013-03-30T03:06:01.173
> 
> 标签：asp.net, asp.net-mvc

我有一个可重用的局部视图、脚本和图像库，它们嵌入在程序集中并在项目之间共享。

一切正常，我修改了 web.config 以使 System.Web.StaticFileHandler 提供所有必要的文件类型，但不幸的是，它使用 Cache-Control: private 提供所有资源。

我可以编写自己的 StaticFileHandler 来提供带有 Cache-Control: public 和到期日期的 VPP 内容。

如何使用 VirtualPathProvider.GetCacheDependency 实现缓存支持？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-30T19:20:45.967

我弄清楚为什么会发生这种情况。我查看了 StaticFileHandler 的源代码。对于嵌入文件，它不设置任何缓存头。它仅适用于文件系统中的文件。这意味着这永远不会正常工作。

你有两个选择。

1.找到另一个http处理程序。我从未使用过它，但它出现在我的搜索中：[https ://code.google.com/p/talifun-web/wiki/StaticFileHandler](https://code.google.com/p/talifun-web/wiki/StaticFileHandler)

2.创建一个http模块，检查是否使用了静态文件处理程序，如果是，请设置缓存详细信息。

祝你好运。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-05-05T16:06:04.193

根据我的研究，我发现了一种实现缓存的 hacky 方法。

在您的 VPP 实现中，您应该实现自己的`VirtualFile`类，扩展`System.Web.Hosting.VirtualFile`基类。如果 VPP 需要它，它只需要一个流来读取文件。在那个阶段，您可以注入标头甚至更改资源的可缓存性。因为之前，如果我从 VPP 请求一个静态文件，它带有一个 header `Cache-Control:private`。实际上，服务器是在说：我不在乎你的本地缓存、etags 等等。我决定你是否应该缓存它。下面的代码将其更改为`public`并添加所需的电子标签标头，以便它应该保留在缓存中，除非该程序集被更改：

[![在此处输入图像描述](../Images/5ec68a8c231ff4f76c0e6798c46d2780.png)](https://i.stack.imgur.com/fR92a.jpg)

```
class EmbeddedResourceVirtualFile : VirtualFile
{
    readonly EmbeddedResource embedded;

    public EmbeddedResourceVirtualFile(string virtualPath, EmbeddedResource embedded)
        : base(virtualPath)
    {
        this.embedded = embedded;
    }

    public override Stream Open()
    {
        var assemblyLastModified = embedded.AssemblyLastModified;
        var etag = assemblyLastModified.Ticks;
        var response = HttpContext.Current.Response;
        var cache = response.Cache;
        cache.SetCacheability(HttpCacheability.Public);
        cache.SetETag(etag.ToString());
        cache.SetLastModified(assemblyLastModified);
        cache.SetExpires(assemblyLastModified.AddYears(2));
        return embedded.GetStream();
    }
} 
```

[特别感谢评论员：）](https://stackoverflow.com/a/8507747/1988124)

# shell - 获取一个长时间运行的进程的输出流

> ID：15714491
> 
> 赞同：4
> 
> 时间：2013-03-30T03:06:09.597
> 
> 标签：shell, unix, clojure

有一个长期运行的 Unix 进程，我希望用 Clojure 捕获和处理它的输出。repl-y / nREPL 会话就是这样一个过程的一个很好的例子：它的持续时间是不确定的，并且输出被打印到标准输出。

如果我尝试`(clojure.java.io/sh "lein" "repl")`，评估将阻塞，直到底层过程完成，*然后*我可以观察输出。

这不是我想要的——我想立即获得一个流。

我可以使用 clojure.java.io 或类似的现有 Clojure 工具来实现这一点吗？否则不介意诉诸Java。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-04T13:43:45.267

看看[me.raynes.conch](https://github.com/Raynes/conch)库，它比 clojure.java.shell 更通用一点。它的[低级 API](https://github.com/Raynes/conch#low-level-usage)似乎正是您正在寻找的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-30T13:52:40.987

不是一个详细的答案，但Clojure函数的[源代码](https://github.com/richhickey/clojure/blob/4bea7a529bb14b99d48758cfaf0d71af0997f0ff/src/clj/clojure/java/shell.clj#L63)`sh`很短。如果您稍微修改它以删除`.waitFor`（或添加一个高阶函数来消耗`InputStreamReader`到达时返回的部分读取），您可能会在进程返回时获得更新的数据。但是要小心死锁，以防您的子进程也需要输入（如您的`lein repl`示例中所示）。

# c++ - 在内存 C++ 中创建一个进程

> ID：15714492
> 
> 赞同：2
> 
> 时间：2013-03-30T03:06:19.673
> 
> 标签：c++, windows, linker, linker-errors, ntdll

我已经在这段代码上工作了几个小时，这让我发疯了！

整个来源在这里[http://pastebin.com/Urxh68W4](http://pastebin.com/Urxh68W4)但我很确定我知道这个问题。

```
extern "C" NTSYSAPI LONG NTAPI ZwUnmapViewOfSection(HANDLE, PVOID); 
```

当我运行它时，我收到以下错误：

```
Error 1 error LNK2019: unresolved external symbol __imp__ZwUnmapViewOfSection@8 referenced in function _wWinMain@16 
```

我猜应该包含一些 dll 或库，所以我将 Ntoskrnl.lib 添加到我的项目中，因为它包含 ZwUnmapViewOfSection 函数。

我完全不知道该怎么做。我应该使用 Ntdll.dll 吗？如果是这样，我什至如何链接 dll？我以为你只能使用 Visual Studio 2010 中的库。

另外，NTSYSAPI 和 NTAPI 到底是什么？网络上几乎没有任何信息。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-30T03:10:52.127

这看起来像用户模式代码，因此您可能不想链接到 ntoskrnl.lib。你宁愿链接到ntdll。

我可能会这样做的方式是使用动态链接并调用`GetProcAddress`传入`HANDLE`ntdll.dll 和`ZwUnmapViewOfSection`.

示例代码：

```
typedef LONG (NTAPI *pfnZwUnmapViewOfSection)(HANDLE, PVOID);
HMODULE hMod = GetModuleHandle("ntdll.dll");
pfnZwUnmapViewOfSection pZwUnmapViewOfSection= (pfnZwUnmapViewOfSection)GetProcAddress(hMod, "ZwUnmapViewOfSection"); 
```

我还没有编译这个，但它应该看起来像那样（可能添加一些错误检查等）。

关于您的其他问题：`NTAPI`在这种情况下，是一个定义调用约定的宏`__stdcall`。[调用约定](http://en.wikipedia.org/wiki/Calling_convention)与函数的参数如何传递以及谁将清理这些参数有关。

例如，`__stdcall`要求参数以相反的顺序压入堆栈，被调用者将清理堆栈。

Similarly, `NTSYSAPI` is a macro that just resolves to `__declspec(dllimport)` if I recall correctly.

Also, I should point out that calling functions exported by NtDll in user-mode is generally frowned upon. And, the code that you're writing will also have additional problems along the way (even after it appears to be working).

In case you're looking for another example of code that performs a very similar task to the one you're writing, you might check [here](http://blog.w4kfu.com/tag/duqu). It was a technique used by the Duqu malware. Good luck!

# iphone - 为什么我不能从我的 iOS 应用发布到粉丝页面？

> ID：15714493
> 
> 赞同：0
> 
> 时间：2013-03-30T03:06:34.370
> 
> 标签：iphone, ios, facebook

我想将我的 iOS 应用程序中的图像发布到单个 Facebook 粉丝页面。我是 facebook-sdk 的新手。我可以使用 facebook sdk 或社交框架毫无问题地发布到用户页面，但我无法解决的是发布到粉丝页面。我已经设置了一个粉丝页面并将其设置为允许来自任何人的帖子，但是当我使用 url 尝试它时`/pageID/picture`它不起作用。它适用于管理员，但我希望非管理员能够发布。

我需要做什么？

* * *

我可以发布图片，但最终只出现在我的图片中。无论我使用什么网址，我使用 fb /me/photo 或 /fan_page_id/photo 图像只会出现在我的图像文件夹中，而不是在墙上，请任何帮助都会很棒我可以找到 1000 个关于此的问题但没有答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T02:25:38.457

我已经修复了它我从未将此密钥添加到我的选项字典 ACFacebookAudienceKey：ACFacebookAudienceFriends 在帐户框架标题中，它已将其标记为可选但我无法请求除读取权限之外的任何其他内容，但在将此密钥添加到我的选项字典后它起作用了我不知道为什么这会有所不同，但它解决了我的问题，我只能发布到我的图像文件夹，并且除了阅读之外我无法请求许可。添加密钥后，我可以发布到墙和粉丝页面墙并请求我需要的任何权限。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T03:20:38.387

在您的粉丝页面中，查找“编辑页面”选项。在该部分中，单击“管理权限”。

在**管理权限**页面中，

查看

**发帖能力：**

1>每个人都可以发布到<>时间线

2>每个人都可以将照片和视频添加到<>时间轴

还为您的粉丝页面设置一个用户名，以便以更简单的方式推荐您的用户。

**更新**

您必须为该要求创建一个 facebook 应用程序。

以下三个链接可能会对您有所帮助 -

1>[以用户身份将照片发布到 Facebook 粉丝页面。iOS Facebook SDK 3.1](https://stackoverflow.com/questions/12687144/posting-a-photo-to-facebook-fan-page-as-user-ios-facebook-sdk-3-1)

2> [https://developers.facebook.com/docs/reference/api/page/#photos](https://developers.facebook.com/docs/reference/api/page/#photos)

3> [http://developers.facebook.com/docs/reference/api/publishing/](http://developers.facebook.com/docs/reference/api/publishing/)

实际上，`publish_stream`和`manage_pages`权限很重要。

谢谢

# entity-framework - MVC 4 编辑视图和“隐藏”参数的最佳实践

> ID：15714494
> 
> 赞同：0
> 
> 时间：2013-03-30T03:07:01.177
> 
> 标签：entity-framework, asp.net-mvc-4

我最近在 MVC 4/Entity 项目的现有模型中添加了一些用于审计目的的字段。我不需要在编辑页面上显示这些字段。但是，它们是模型上的必填字段。

就目前而言，编辑页面仍然有效，但在控制器端，ModelState.IsValid 检查失败，因为在项目上实际设置的必填字段没有输出到视图，因此在编辑页面时不会重新提交提交。

是否有一种简单的内置方法来纠正这个问题，或者如果没有，以下哪一项是这种情况的最佳实践？还有更多选择吗？

1）在视图上设置隐藏字段来保存信息（不喜欢这个选项，传递数据太多）

2）在控制器中，在提交时，首先通过 ID 加载模型，然后根据视图上存在的字段设置每个单独的参数（似乎是额外的不必要的工作）

3) 为模型创建一个构造函数，该构造函数将自身作为参数并提取任何非默认值并返回一个新对象。基本上是合并。（我认为最好的，还有很多额外的工作）

4）？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T04:02:54.577

最佳实践是不要在视图中使用您的域模型。创建一个视图模型类，该类只包含视图中所需的 id 和字段。将此模型传递给您的视图。更改表单提交操作的参数类型以匹配您的新视图模型。这将在不使用隐藏字段的情况下通过模型验证。在您的操作方法中，您可以使用视图模型类的 id 属性从数据库中检索对象，并根据需要更新字段。

希望这是有道理的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T03:15:27.780

只要我可以通过单个查询或数据库调用获取现有对象，我更喜欢执行第二个选项。这让我可以保持视图整洁（所有其他属性没有隐藏字段）并使用现有的更新方法来更新域模型。

查看您的代码。如果 update 方法在许多其他地方（许多其他表）进行更新，而这实际上是不需要的，那么您可能会编写一个简短版本的 update 方法，它只更新相关部分（例如：UpdateContactDetails）。

# java - 为什么我的 setter 和 getter 方法不起作用？

> ID：15714496
> 
> 赞同：1
> 
> 时间：2013-03-30T03:07:12.790
> 
> 标签：java, methods, setter, getter

我一直在查看我的源代码，但无法弄清楚它有什么问题。我认为问题在于 Circle 类。当我从 DriverCircle 类调用变异器和访问器时，它给了我错误的输出。对于 getDiameter，它只是打印出 0。

```
public class Circle{
    private double radius;  
    private double pi;
    private double diameter;
    private double circumference;
    private double area; 

    public Circle(){
        pi = Math.PI;
        radius = 0;
    }

    public Circle(double radius){
        this.radius = radius;
    }
    public void setDiameter(){
        diameter = (2 * radius);
    }
    public double getDiameter(){
        //diameter = 2 * radius;
        return diameter;
    }
    public void setCircumference(){
        circumference = (2 * pi * radius);
    }
    public double getCircumference(){
        //circumference = 2 * pi * radius;
        return circumference;
    }
    public double getArea(){
        //area = pi * Math.pow(radius, 2);
        return area;
    }
    public void setArea(){
        area = (pi * Math.pow(radius, 2));
    }
    public void setRadius(double radius){
        this.radius = radius;
    }
    public double getRadius(){
        return radius;
    }
    public String toString(){
        return "The radius is " + radius;
    }
} 
```

* * *

（测试者）...

```
import java.util.Scanner;

public class CircleDriver {

    public static void main(String[] args) {

        Scanner input = new Scanner(System.in);
        System.out.println("Please enter the radius: ");
        Circle[] circles = new Circle[10];
        Circle objectCircle = new Circle();
        objectCircle.setRadius(input.nextDouble());

        circles[1] = new Circle();
        circles[2] = new Circle(2.0);
        circles[3] = new Circle(3.5);
        circles[4] = new Circle(5.0);
        circles[5] = new Circle(0.0);
        circles[6] = new Circle(15);
        circles[7] = new Circle(25);
        circles[8] = new Circle(-7);
        circles[9] = new Circle(-10.0);

        System.out.println("Initial call to toString():");
        for (Circle c : circles)
            {System.out.println("\t" + c);}

        System.out.println("Call to getRadius (should be same as above):");
        for (Circle r : circles)
            {if (r != null)
                {System.out.println("\t" + r.getRadius());}}

        System.out.println("Call to getDiameter (should be twice the value shown above):");
        for (Circle d : circles)
            {if (d != null)
                {System.out.println("\t" + d.getDiameter());}}

        System.out.println("Calls to getCircumference:");
        System.out.println("\tShould be 2 * PI:  " + circles[1].getCircumference());
        System.out.println("\tShould be 0.0:  " + circles[5].getCircumference());

        System.out.println("\nCall to getArea:");
        System.out.println("\tShould be PI:  " + circles[1].getArea());
        System.out.println("\tShould be 0.0:  " + circles[5].getArea());

        System.out.println("Testing out the setRadius method:");
        for (int i = 0; i < circles.length / 2; i++)
            {if (circles[i] != null)
                {circles[i].setRadius(i);}}

        System.out.println("Call to toString after setting the first half of the objects:");
        for (Circle c : circles)
            {System.out.println("\t" + c);}
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T03:11:10.800

您的 setter 方法应该有参数并使用参数来设置字段。否则，它们实际上不是 setter 方法。您当前的 setter 方法应该全部丢弃，除了可能`setRadius(...)`，并且大部分计算都在各自的 getter 方法中完成。

即，不是

```
public void setCircumference(){
    circumference = (2 * pi * radius);
}

public double getCircumference(){
    //circumference = 2 * pi * radius;
    return circumference;
} 
```

反而

```
public double getCircumference(){
    return 2 * Math.PI * radius;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T03:10:12.087

在构造函数中提供值时，不会初始化 pi。此外，将 pi 存储为实例成员有点奇怪。只需在计算中使用 Math.PI。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-30T03:10:30.637

你从不打电话`setDiameter()`。您的构造函数设置了半径的值，但它对设置直径变量没有任何作用！

您可能只想重写`getDiameter()`：

```
public double getDiameter() {
    return 2.0 * radius;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-30T03:12:22.970

您构造了一个圆形对象，它设置了半径，但您从未设置过直径。应该可能从构造函数调用 setDiameter() 。

更好的是，删除 setDiameter() 方法，因为它完全没有必要。只需让 getDiameter() 返回 2*radius。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-30T03:16:49.447

我看到两个问题。

`pi`首先，最重要的是，如果使用 double 构造函数，则不设置值。您还应该使用无参数构造函数并设置半径值：

```
 public Circle(double radius){
    this(); // calls the no-args constructor
    this.radius = radius;
 } 
```

其次，没有明确调用`setDiameter()`. 有趣的是，这种方法用词不当——只要半径不为零，就应该计算它。`setArea`是一样的——你没有将任何东西传递给那个方法调用。以下是我的建议：

*   重命名`setDiameter`为`calculateDiameter`以明确其意图。重命名的原因是为了让这个类遵循[JavaBean](http://en.wikipedia.org/wiki/JavaBeans#JavaBean_conventions)关于 set 和 get 的约定。
*   在，之后立即`public Circle(double radius)`调用。`calculateDiameter()`
*   每当`setRadius()`被调用时，要么立即调用它，要么`calculateDiameter`违反 JavaBean 约定，并在设置值后立即调用它。
*   It's strongly encouraged to do the same thing for `getArea`, but I'll leave that portion as an exercise to the reader.

In code, a brief example:

```
 public Circle(double radius){
     this(); // calls the no-args constructor
     this.radius = radius;
     calculateDiameter();
 }

 public void setRadius(double r) {
     radius = r;
     calculateDiameter();
 } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-30T04:05:42.387

Just setting the radius does not update every function that uses radius; you have to call those functions explicitly or else they remain at Java's default of 0. I would also do any error checking at the Circle(radius) method; that way no negative numbers make it into the set of radii.

# node.js - Node.js HTTP request not returning full response

> ID：15714499
> 
> 赞同：16
> 
> 时间：2013-03-30T03:07:52.913
> 
> 标签：node.js, http, get, request

I'm making a *HTTP* request using Node's `http` module, but on `data`, the chunk returned doesn't seem to content the full request response. Here's my code:

```
var req = http.request(httpOptions, function(res) {
    res.setEncoding('utf8');
});

req.on('response', function (response) {
    response.on('data', function (chunk) {
        console.log(chunk);
        callback(null, JSON.parse(chunk));
    });
});

req.on('error', function(e) {
    callback(e);
    //callback(e.message);
});

req.end(); 
```

Is there a way to wait for the full output before ending the request? Am I doing something wrong? Thanks!

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2013-03-30T03:12:01.777

you should also listen for the 'end' event

```
req.on('response', function (response) {

    var data = "";

    response.on('data', function (chunk) {
        console.log(chunk);
        data += chunk;
    });

    response.on('end', function(){
        callback(data);
    })

}); 
```

# ruby-on-rails-3 - Rails + 多个 DataTables + UI 嵌套手风琴

> ID：15714502
> 
> 赞同：0
> 
> 时间：2013-03-30T03:08:13.060
> 
> 标签：ruby-on-rails-3, twitter-bootstrap, datatables, jquery-ui-accordion

我在嵌套的 UI 手风琴中使用多个类似的数据表。虽然使用类级选择器初始化多个数据表没有问题，但我在让任何给定表的页眉和页脚正确对齐时遇到问题。

我认为这与选项卡中的 dataTable 存在相同的问题：一旦显示手风琴窗格，就需要重新绘制表格（或标题）。

通过单个表的初始化或基于 id 的初始化，我在函数中使用 fnDraw 或 fnAdjustColumnSizing 来重绘显示的表没有问题。但是，使用批量初始化，这种方法是行不通的，因为具体显示的表格不容易被定位。

我试图找到一种仅针对当前显示的表格进行重绘的方法，但没有成功。

有没有其他人成功处理过这个问题？感谢您的任何想法....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T19:34:44.110

我敢肯定这是超级hacky，但我可以设置它的唯一方法是创建一个动态的多级手风琴，每个手风琴都嵌套一个dataTable，实际上是在手风琴激活中嵌套dataTable初始化（在表的级别），然后将表 div 标记为已初始化，以便可以重新打开它。这是我的js代码：

```
$(document).ready(function(){

    $(function() {   
        $('.accordion.second-level').bind('accordionactivate', function (event, ui) {

              if (ui.newPanel.length) {
                 thisPanel = ('#'+ ui.newPanel.attr('id'));
                 if ($(thisPanel).hasClass('not_activated')) {
                     $(thisPanel + ' .dataTables_types').dataTable({
                            "bAutoWidth": false,
                            "bPaginate": false,
                            "bScrollCollapse": true,
                            "sScrollY": "295px",
                            "aaSorting": [[ 1, "desc" ]],
                            "sDom": "<'row'<'span10'f>>t<'row'<'span10'i>>",
                             "aoColumns": [
                                            { "bSortable": false },
                                            null,
                                            null,
                                            { "iDataSort": 4 },
                                            {'bVisible': false},
                                            {'bVisible': false},
                                            null
                                          ],
                            "fnFooterCallback": function ( nRow, aaData, iStart, iEnd, aiDisplay ) {
                                           /* Calculate the total transactions on this page */
                                          var total = 0;
                                           for ( var i=iStart ; i<iEnd ; i++ )
                                          {
                                            total += aaData[ aiDisplay[i] ][5]* 1;
                                           }
                                           var nCells = nRow.getElementsByTagName('th');
                                           nCells[1].innerHTML = total;
                                           $(nCells[1]).formatCurrency({negativeFormat:'%s-%n'});
                            }
                    });
                   $(thisPanel).removeClass('not_activated');
                 }
                } 
        }); 
    });
}); 
```

我仍然很想知道是否有更好/更有效的方法来做到这一点，但这确实有效。

# graph - 访问k个顶点的无向图中的最短路径

> ID：15714505
> 
> 赞同：2
> 
> 时间：2013-03-30T03:09:02.043
> 
> 标签：graph, shortest-path

考虑一个无向图。有n个顶点和m个边。所有的边都有一个与之相关的权重。

我想设计一种算法，它将源顶点“s”、汇顶点“t”和数字“k”作为输入。该算法的输出是从 s 到 t 的最短路径，在 s 和 t 之间有 k 个顶点。

请建议。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-20T01:27:00.710

经过一个小的研究，我发现这个问题是 NP-Hard。因此我不得不使用参数化技术来解决这个问题。我使用的算法是一个固定参数易处理的算法。

我在我的算法中使用了[Lawler对日元算法的修改](https://en.wikipedia.org/wiki/Yen%27s_algorithm#Lawler.27s_modification)来解决这个问题。Yen 的算法有助于找出无环网络中的前 n 条最短路径。这是我的算法的运行方式：

1.  从用户那里获取参数k（路径中的顶点数）。还要从用户那里得到“m”，这是路径不应超过的最大距离。这是将帮助我们在多项式时间内解决 NP-Hard 问题的参数。

2.  这一步使用日元算法。找到下一条最短路径。检查路径是否有 k 个顶点。

    一个。如果是，则中止并返回路径 b。否则，2

3.  如果路径的总距离超过参数'm'，则中止并返回'no result'

Yen 算法使用 Dijkstra 算法来寻找最短路径。实现这个算法来解决这个问题很有趣。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T03:59:54.573

创建与您的图形关联的 [numvertices][numvertices] 距离矩阵。然后运行 ​​Floyd 算法，但只是 k 次迭代而不是 numvertices 次迭代。

# r - 如何在图中设置第二个 x-aixs？

> ID：15714510
> 
> 赞同：0
> 
> 时间：2013-03-30T03:09:15.687
> 
> 标签：r

```
x <- seq(0.5, 0.9, length = 400)
y <- dnorm(x,0.7,0.0458)
plot(x, y, type="l",  yaxt="n",ann=FALSE,bty="n", xaxt="n")
axis(1, at=seq(0.5,0.9,by=0.1), labels=c("","",0.7, 0.8, 0.9) )
mtext("Proportions", 1, at=0.9, line=2)
xx=c(0.8,seq(0.8,0.9,length=100),0.9)
yy= c(0,dnorm(seq(0.8,0.9,length=100),0.7,0.0458),0)
polygon(xx, yy, col = "gray", border = NA) 
```

我用代码得到了一个很好的图形（graph1.jpg），如何在 graph1.jpg 上创建第二行，将 graph1.jpg 更改为 graph2.jpg？

这是一个graph1.jpg。 ![在此处输入图像描述](../Images/6024039c11f3105b3d637bc7fc389599.png)

这是一个graph2.jpg。 ![在此处输入图像描述](../Images/1e5de5f4061b7325d4619768203ba8ba.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T06:50:36.490

对于该函数`axis()`，有一个参数`line=`可以确定在绘图轴下绘制的哪条线。例如，设置此参数`line=4`可以添加另一个轴。但在`plot()`您应该更改边距设置以在 x 轴下使用`par(mar=...))`.

```
par(mar=c(8,3,3,3))
x <- seq(0.5, 0.9, length = 400)
y <- dnorm(x,0.7,0.0458)
plot(x, y, type="l",  yaxt="n",ann=FALSE,bty="n", xaxt="n")
#First x axis
axis(1, at=seq(0.5,0.9,by=0.1), labels=c("","",0.7, 0.8, 0.9) )
mtext("Proportions", 1, at=0.9, line=2)
#Second x axis 
axis(1, line=4,at=seq(0.5,0.9,by=0.1), labels=c("","",0, 2.18, 3) )
mtext("z score", 1, at=0.9, line=6) 
```

![在此处输入图像描述](../Images/1654917087ab7d0deafc5fa95c2eefad.png)

# ios - 如何设置 MKMapView 视角并关闭 3D 建筑？

> ID：15714512
> 
> 赞同：5
> 
> 时间：2013-03-30T03:09:46.337
> 
> 标签：ios, objective-c, mapkit

我目前正在开发导航应用程序。有没有办法在 MapKit 中设置视角？我知道 Google Map iOS SDK 将它作为您可以设置的查看相机的参数之一，但我无法在 MapKit 中找到它。

还有关闭 3D 建筑的布尔值吗？对于导航应用程序来说，它们有点烦人。

提前致谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2014-01-14T12:59:54.173

添加`viewDidLoad`或`viewWillAppear`：

```
self.mapView.pitchEnabled = YES;   
self.mapView.pitchEnabled = NO; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-03-10T09:27:44.000

```
 self.mapView.showsBuildings = false 
```

（快速代码）关闭建筑物。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-01-31T14:54:16.657

斯威夫特 4

```
mapView.settings.tiltGestures = false 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-22T15:50:22.663

用于`pitch`提供视角。例如，`mapview.pitch`或者`mapview.camera.pitch`取决于您是否使用相机。此外，将 showbuildng 设置为 NO。

# actionscript-3 - As3 (code snippets) change property of object on stage from within another object

> ID：15714517
> 
> 赞同：0
> 
> 时间：2013-03-30T03:10:27.893
> 
> 标签：actionscript-3

I've been searching for the past few hours how to do this but with no luck. First of all I'm new to AS and not sure what to search for.

So here's what I have and what I want to do:The stage has only 1 frame and on the stage I have 1 button (b1), 1 movie clip that is not visible (area) and 1 visible movie clip that is an animation of 20 frames(ani). For the moment when I press button "b1" it will start the movie "ani" (movie is stopped initially) that will stop when it reaches frame 20\. Now what I want is when it reaches the last frame to make movie clip "area" visible. Since I am inside "ani" and on frame 20, I cannot use directly area.visible = true; as I would get the error "Access of unidentified property area." What would be the way to access "area"'s properties from within the other object ?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T03:31:43.007

I'm not sure I completely understand everything you said, but I think what you want to do is something like this on your stage where both ani and area have scope :

```
ani.addEventListener(Event.ENTER_FRAME, frameCheck);

function frameCheck(e:Event):void
{
   if (ani.currentFrame == ani.totalFrames)
  {   
      ani.removeEventListener(Event.ENTER_FRAME, frameCheck);
      area.visible = true;  
  }
} 
```

That was just an example of how you could detect ani hitting the last frame and dealing with that appropriately.

You would need to add the event listener EACH TIME the button is pressed.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T08:09:18.397

Inside your "ani" `MovieClip` (at last frame) add the following sentence,

```
MovieClip(this.parent).area.visible = true; 
```

Here, `parent` is your main timeline.

(Note: This approach is not recommended).

Instead, use External classes approach. e.g. use `Loader` class to load animated swf with `COMPLETE` event and with `contentLoaderInfo` get swf object and detect for last frame and make area `MovieClip` visible.

# ios - UIView border cover sub-view?

> ID：15714519
> 
> 赞同：9
> 
> 时间：2013-03-30T03:10:37.080
> 
> 标签：ios, uiview, uibutton

I have a UIView which includes a UIButton which is partially on UIView. I have a problem when I draw a border on my UIView. Please have a look at my screenshot:

![enter image description here](../Images/0126dd5b71a3e138e8b7480bdfa7299e.png)

You can see the border is above the UIButton, why? Can anybody suggest? Thanks

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-30T06:08:56.607

Thanks for [aăâ](https://stackoverflow.com/users/1847431/aa), I found a solution.

1.  Basically the border is always drawn on top of everything
2.  What I did is:

    *   Create a UIView with color of border
    *   Create another UIView as the child the main UIView which is a little bit smaller than the first one. The color of this newly create UIView is the main color

Here is the code:

```
self.layer.cornerRadius = 15;
self.layer.masksToBounds = YES;
self.backView.layer.cornerRadius = 15;
self.backView.layer.masksToBounds = YES; 
```

The result is:

![enter image description here](../Images/f9d78799b96f2923e041dff0925d5d52.png)

It's more or less what I need although it's not perfect.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T03:15:18.123

It could have to do with the order that the objects are drawn. In your storyboard's "Document Outline", views that are lower down in a view controller's outline are drawn later. Perhaps the button is not the last drawn view, like you want?

# php - 如何显示第一次显示后保持不变的随机图像？

> ID：15714526
> 
> 赞同：0
> 
> 时间：2013-03-30T03:11:13.763
> 
> 标签：php, wordpress, random

我有一个 WordPress 网站。在这个网站上，我正在尝试创建一个掷骰子游戏，它显示在特定的帖子格式之上。这是它的工作方式：

我的服务器上会有一个目录。在目录中，有六个不同的图像，每一个骰子面。一张是带有一个点的骰子面的图片，另一张是带有两个点的图片，以此类推。

骰子的“滚动”是通过使用 PHP 来模拟的，以显示该目录中的随机图像。但是有一个问题...

创建显示骰子“滚动”的帖子后，我希望将选择的特定随机图像粘贴到该帖子上，这样无论您刷新页面多少次，相同的“滚动”都将是与该帖子相关联。

本质上，每个访问者都会看到相同的图像，相同的“滚动”，无论使用什么服务器，或者他们是否刷新了页面。如果显示的图像是“五”，那么所有用户即使刷新页面也会看到“五”。

虽然可以通过玩随机数上帝并创建一个包含发布时间、帖子 ID 和其他内容的算法来实现这一点，以便根据帖子元为每个帖子获取一个“随机”数字，但我想知道这样做是否更容易，以便将选择的图像存储在数据库中。

很可能还有其他我可能没有想到的选择。如果有的话，我当然很想听听他们的消息。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T05:38:03.520

您可以通过使用 PHP 会话来完成此操作。它本质上会将结果作为 cookie 存储在用户的浏览器中。

当页面重新加载时，检查适当会话变量中的骰子，如果它可用，则显示或生成新的东西。

当用户第一次访问时，他会得到一张图像（任何黑白 1 和 6），并且此信息存储在 cookie 中。在随后的刷新中，当服务器在生成新图像之前查找 cookie 时，会显示相同的图像。

希望能帮助到你。

# python - 'Twython' 对象没有属性...运行示例时出错

> ID：15714531
> 
> 赞同：0
> 
> 时间：2013-03-30T03:11:45.907
> 
> 标签：python, twitter, raspberry-pi, twython

我正在尝试运行`core_examples`文件夹中的 Twython 示例，但所有文件都出现相同的错误。

如果我运行文件：`weekly_trends.py` 我收到错误：

```
'Twython' object has no attribute 'weekly_trends.py'. 
```

如果我运行文件：`getCurrentTrends.py` 我收到错误：

```
'Twython' object has no attribute 'getCurrentTrends'. 
```

我尝试在我的 Raspberry Pi 和 OSX 上运行代码，但我得到了同样的错误。我假设我缺少安装过程或身份验证的关键部分。我有一个 Twitter 应用程序设置，并且我有密钥和令牌。我需要在任何地方输入这些才能使其工作吗？我让 Tweepy 工作了，但 Twython 看起来它可能有能力将图像添加到推文中。

任何提示将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-05T04:43:09.977

嗯，我们`core_examples`在 repo 中没有了，所以我不确定你运行的是什么版本的 Twython。作为参考，您需要在 Twython 实例化中使用这些键，ala：

```
from twython import Twython
t = Twython(app_key, app_secret, oauth_token, oauth_token_secret)
auth_tokens = t.get_authorized_tokens(oauth_verifier)
print auth_tokens
# method calls, etc... 
```

抱歉这么晚才看到，当工作接管我的生活时，SO就从我身边溜走了。希望你在路上！

# c# - MSDN 文章“如何：在用户界面 (UI) 线程上安排工作”中的代码有什么问题？

> ID：15714533
> 
> 赞同：0
> 
> 时间：2013-03-30T03:12:10.417
> 
> 标签：c#, .net, wpf, .net-4.0, task-parallel-library

我正在尝试从在线 MSDN 文章中启动 C# WPF 应用程序的代码：“[如何：](http://msdn.microsoft.com/en-us/library/dd997394%28v=vs.100%29.aspx)在 Visual Studio 2010、Windows XP SP3、.NET4.0 中 安排用户界面 (UI) 线程上的工作”

我所做的唯一区别：

1.  将命名空间从更改`wpfApplication1`为 `WpfApplication1`（因为这与文章的*“1.在Visual Studio中，创建一个WPF应用程序项目并命名它。”相矛盾。*

2.  替换了该行

    ```
    string[] files = System.IO.Directory.GetFiles(@"C:\Users\Public\Pictures\Sample Pictures\", "*.jpg"); 
    ```

    和

    ```
    string[] files = System.IO.Directory.GetFiles(@"D:\Documents and Settings\All Users\Documents\My Pictures\Sample Pictures\", "*.jpg"); 
    ```

    （根据我的 Windows XP 机器的配置）

但是按下按钮后，应用程序~~异常中断：~~

> ~~通过等待任务或访问其异常属性未观察到任务的异常。结果，未观察到的异常被终结器线程重新抛出~~

代码编译没有错误，但行：

```
Matrix m = PresentationSource.FromVisual(Application.Current.MainWindow) 
```

具有波浪形下划线的 Intellisense 显示弹出警告：

> “可能的‘System.NullRederenceException’”

![可能的“System.NullRederenceException”](../Images/b290e4a835bac1b591f54d64ab533262.png)

我的VS2010解决方案（试图重现这篇文章）可以从：
[http ://wikisend.com/download/404394/msdnHow2ScheduleWorkOnTheUI.rar下载](http://wikisend.com/download/404394/msdnHow2ScheduleWorkOnTheUI.rar)

这段代码有什么问题？
以及如何纠正？

**更新：**
问题不是如何观察异常消息，而是如何启动 MSDN 示例代码（由像我这样的初学者）

我更愿意单独询问特定于异常的问题

**Update2:**
Errata:
Sorry...
The application doesn't break as I wrote before.

I inserted `MessageBox.Show("Finished");` at the end of `button1_Click()` button click event handler.

Upon first click on the button the MessageBox with "Finished!" shows up.
Upon 2nd click it Messagebox again is shown and but app also throws the mentioned above exception.

![第一次点击后](../Images/612cbe29f5eb24e08266b89981cc2666.png)

And having passed through exception messages and tasks results, I cannot figure out what is wrong!
I'd still like to stress that I am interested in the working sample of article's topic and will post my questions on debugging separately in other question(s)!

Is it reproducible by others?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T03:23:40.630

The problem is that you have an exception that is occurring inside of your task. The message is pretty self-explanatory, but I guess only if you know about exception handling in the TPL. So, to further elaborate on your exact error:

When an exception is thrown from inside of a task, it must be "observed" in 3 different ways:

1.  Check the task's `Exception` property
2.  Attempt to read the task's `Result` property (Causing any stored exceptions to be thrown)
3.  Attach an event handler to the `TaskScheduler.UnobservedTaskException`

If it is not observed in any of the above ways, then the exception will finally be thrown when the garbage collector tries to finalize the task. This is the reason for the exact message you are getting. However, for the deeper, original exception you will need to do one of the 3 above steps and review the actual exception

[这是关于 TPL 中异常处理的 MSDN](http://msdn.microsoft.com/en-us/library/dd997415%28v=vs.100%29.aspx)

另外，作为一个仅供参考，似乎[这个未观察到的异常可能不需要处理，但我个人还没有深入研究](http://social.msdn.microsoft.com/Forums/en-US/clr/thread/a95e7a9c-8b3c-47e6-946e-287531e1a0db/)。尽管如此，最好像处理任何代码一样处理这些。因此，此更改不应改变您编写代码的方式。

# common-lisp - 循环宏和闭包的意外行为

> ID：15714537
> 
> 赞同：4
> 
> 时间：2013-03-30T03:12:33.567
> 
> 标签：common-lisp

为什么这些表格会这样？

```
CL-USER>
(setf *closures*
      (loop for num in (list 1 2 3 4)
            collect (lambda ()
                      num)))
(     
#<COMPILED-LEXICAL-CLOSURE #x302004932E1F>
#<COMPILED-LEXICAL-CLOSURE #x302004932DCF>
#<COMPILED-LEXICAL-CLOSURE #x302004932D7F>
#<COMPILED-LEXICAL-CLOSURE #x302004932D2F>)
CL-USER> 
(funcall (first *closures*))
4
CL-USER> 
(funcall (second *closures*))
4 
```

我本来希望第一个 funcall 返回 1，第二个返回 2，依此类推。这种行为与 Clozure Common Lisp 和 Steel-Bank Common Lisp 实现是一致的。

如果我使用 dolist 将循环宏重新设计为一个版本，我期望的是返回的内容：

```
(setf *closures*
      (let ((out))
        (dolist (item (list 1 2 3 4) (reverse out))
          (push (lambda () item) out))))
(
#<COMPILED-LEXICAL-CLOSURE #x302004A12C4F>
#<COMPILED-LEXICAL-CLOSURE #x302004A12BFF>  
#<COMPILED-LEXICAL-CLOSURE #x302004A12BAF>
#<COMPILED-LEXICAL-CLOSURE #x302004A12B5F>)
CL-USER> 
(funcall (first *closures*))
1
CL-USER> 
(funcall (second *closures*))
2 
```

CL-用户>

循环宏版本是怎么回事？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-30T04:20:29.227

`num`是所有 lambda 共享的同一个变量。

采用

```
(setf *closures*
  (loop for num in (list 1 2 3 4)
        collect (let ((num1 num))
                  (lambda ()
                    num1)))) 
```

`num1`是每次迭代的新鲜变量。

As of `dolist`, "It is implementation-dependent whether dolist establishes a new binding of var on each iteration or whether it establishes a binding for var once at the beginning and then assigns it on any subsequent iterations." (CLHS, Macro DOLIST). So it may work on one implementation and fail on other.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-30T10:12:11.143

The name `num` represents the same binding during the evaluation of LOOP. Maybe you want to write:

```
(mapcar 'constantly (list 1 2 3 4)) 
```

to get what you meant.

# python - 从 GUI 程序连续写入串行链路：需要使用线程吗？

> ID：15714538
> 
> 赞同：0
> 
> 时间：2013-03-30T03:12:40.200
> 
> 标签：python, multithreading, pyqt4

我用 PyQt4 编写了一个 GUI 程序，它必须通过串行数据链路发送消息字符串。

我已经实现了一个带有两个按钮小部件的 GUI 界面。我需要通过串行链路连续发送数据，单击第一个按钮时每秒一次，然后单击第二个按钮时停止。

我当前的程序只能在单击按钮时发送数据。这是我写的处理按钮点击信号的方法：

```
def sendMessage(self):
    while 1:
        print "Hello........"
        if checke == False:
            break 
```

我需要使用线程来解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T03:28:17.733

是的。GUI 编程的关键是永远不要在主线程上进行任何长时间的操作，因为它会阻塞整个程序，直到该操作完成。

如果您想通过网络连续发送数据，请在后台线程中进行。

为您提供一些示例代码。

```
class MessageWorker(QtCore.QThread):

    def __init__(self):
        super(ParserWorker, self).__init__()
        self.ok_to_send = False
        self.terminated = True

    def run(self):
        while not self.terminated:
            if self.ok_to_send:
                self.send_message()
            time.sleep(1)

     def start_send():
         self.ok_to_send = True

     def pause_send():
         self.ok_to_send = False

     def terminated():
         self.terminated = False 
```

然后在主程序中调用

```
worker = MessageWorker()
worker.start() # Start the background thread
worker.start_send() # Start sending message
worker.pause_send() # Pause sending message
worker.terminated() # Stop sending message permanently 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T04:40:30.500

这取决于...如果发送操作很快，您可以使用[QTimer](http://pyqt.sourceforge.net/Docs/PyQt4/qtimer.html)类。它与 Qt 事件循环集成，因此您不必担心线程问题。串行通信可能很慢，具体取决于您发送的数据量，所以我不能确定这是否适合您。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-30T04:28:54.103

是的，您需要使用线程。在任何基于 GUI 的程序中，任何需要花费大量时间的工作都应始终在单独的线程上进行，以避免阻塞 UI — 每当您看到“无响应”程序时，这几乎总是由于程序失败处理窗口消息，因为它的 UI 线程在一些长时间的操作中被阻塞。

启动后台线程的一种简单方法是使用[`threading`模块](http://docs.python.org/2/library/threading.html)。以下是您如何使用它每秒将数据写入串行端口一次：

```
class MyClass:
    # This method will run on a separate thread
    def _serial_port_worker(self):
        while self._run_worker:
            self.send_data_to_serial_port()
            time.sleep(1)

    # Call this to start the worker thread
    def start_worker_thread(self):
        self._run_worker = True
        worker_thread = threading.Thread(target=self._serial_port_worker,
                                         args=(self,))
        worker_thread.start()

    # Call this to tell the worker thread to stop
    def stop_worker_thread(self):
        self._run_worker = False 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-30T08:43:52.180

基本上你有三个选择：

*   使用第二个线程进行串行通信。GUI 工具包并不总是线程安全的，因此您应该只从主线程调用它们。此外，Python 中的线程有一个限制；一次只能[有一个线程](http://wiki.python.org/moin/GlobalInterpreterLock)执行 Python 字节码。
*   使用 GUI 工具包的超时功能（可能会以不同的方式调用）不时地创建一个事件。在事件处理程序中执行串行通信。确保您使用非阻塞读写（在 中[`pyserial`](http://pyserial.sourceforge.net/pyserial_api.html)，在对象中配置超时`Serial`），否则您的应用可能会变得无响应。
*   [`multiprocessing`](http://docs.python.org/2/library/multiprocessing.html)使用模块从第二个程序进行串行通信。即使第二个进程阻塞，也不会影响 GUI。您可以使用[`multiprocessing.Queue`](http://docs.python.org/2/library/multiprocessing.html#exchanging-objects-between-processes)QUI 与其他进程之间进行通信。

# html - 关于构建复杂 CSS 的最优雅方式的想法？

> ID：15714544
> 
> 赞同：1
> 
> 时间：2013-03-30T03:13:04.160
> 
> 标签：html, css, css-selectors

这是一些标记的示例：

```
<div class="document">
  <div class="main">
    <div class="title" />
    <div class="description />
  </div>
  <div class="sections">
    <div class="section">
       <div class="title" />
       <div class="description" />
    </div>
    <div class="section">
       <div class="title" />
       <div class="description" />
    </div>
  </div>
</div> 
```

在我的样式表中，我的规则可能如下所示：

```
.document .main .title { ... }
.document .sections .section .description { ... } 
```

我喜欢这个。这种方法对我来说一直很有效，我认为越来越具体的选择器可以很清楚地知道什么是什么（几乎就像阅读一个句子一样）。

然而，最近有人告诉我这种方法很糟糕，我应该这样做：

```
<div class="document">
  <div class="main">
    <div class="mainTitle" />
    <div class="mainDescription />
  </div>
  <div class="sections">
    <div class="section">
       <div class="sectionTitle" />
       <div class="sectionDescription" />
    </div>
    <div class="section">
       <div class="sectionTitle" />
       <div class="sectionDescription" />
    </div>
  </div>
</div> 
```

原因是它避免了类“标题”所指的任何歧义。

我很好奇这里的人是怎么想的？我的方法不好（即令人困惑、有问题）吗？有没有首选的方式来格式化复杂标记的 css？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-30T03:31:18.997

我已经开始使用[LESS](http://lesscss.org/)样式表，而且推荐得还不够。嵌套选择器通过像 HTML 一样构建代码，使您的代码具有难以置信的可读性：

```
.document {
    .main {
        .title {
            ...
        }

        .foo {
            ...
        }
    }

    .sections {
        .section .description {
            ...
        }

        // Same as `.sections.hidden`
        &.hidden {
            ...
        }
    }
} 
```

至于您的 HTML，无需多余。`title`类引用充当标题的元素，并且可以通过查看父元素来推断标题的类型。如果您觉得长名称不吸引人，那么使用长名称确实没有任何好处。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-30T03:19:46.570

好吧，我对 CSS 不是很有经验，但你想平衡可读性和压缩。您过去执行此操作的方式对压缩很重，而您所说的建议您这样做的方式似乎对可读性很重。但是我已经尝试过后一种，而且男孩，工作量很大。而且它几乎没有增加可读性，因为 CSS 中的大多数内容不仅出现在任何给定站点结构中的一个位置——它们出现在多个位置，使得您建议的结构不可能真正变得可读。

如果你问我，没有什么能比得上好的评论。

//* 如果您想轻松定位 CSS 的各个部分，那么即使您快速浏览，标题本身也会引起很多关注*//

当然胜过所有为 CSS 设置标签的工作。就像我之前所说的，CSS 声明的可重用特性使得标签无论如何都无法轻松遵循。

# c++ - C++：重载函数和运算符的不同行为

> ID：15714547
> 
> 赞同：3
> 
> 时间：2013-03-30T03:13:26.880
> 
> 标签：c++

我是新手，正在学习 C++。我有一个关于类的函数重载的问题。

除了函数名外，我在下面有两个完全相同的代码。一个只是一个函数，另一个是运算符。

```
#include <iostream>

using std::cout;
using std::endl;

class B;

class A {
  public:
    void test(A const &a) { cout << "AA" << endl; }
    void test(B const &b) { cout << "AB" << endl; }
};

class B : public A {
  public:
    void test(A const &a) { cout << "BA" << endl; }
};

int main() {
  B b1;
  B b2;
  b1.test(b2);
  return 0;
} 
```

该程序打印

```
BA 
```

这是另一个程序。

```
#include <iostream>

using std::cout;
using std::endl;

class B;

class A {
  public:
    void operator=(A const &a) { cout << "AA" << endl; }
    void operator=(B const &b) { cout << "AB" << endl; }
};

class B : public A {
  public:
    void operator=(A const &a) { cout << "BA" << endl; }
};

int main() {
  B b1;
  B b2;
  b1.operator=(b2);
  return 0;
} 
```

该程序打印

```
AA 
```

这两个程序之间的唯一区别是函数名：test 和 operator=。我不明白为什么 C++ 会这样。有什么我想念的吗？

我在 mac OS X 8.2 下用 g++ 版本的 4.2.1 编译这个程序

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-30T03:20:52.757

在您的第一种情况下，它不是关于`overloading`，这两个`test`函数在`A`重载，但是，`test`在`B`和`A`是`name hiding`因为`B`重新定义了`test`。`overloading`处理同一范围内的函数，`name hiding`讨论类层次结构。

所以在第一种情况下

```
b1.test(b2); 
```

`b2`是 的对象`B`，中的`test`函数`B`需要类的 const 引用，`A`在这种情况下是可以的，所以它会输出“BA”。

在第二种赋值运算符的情况下，您没有创建要赋值给的赋值运算符`B`，`B`因此编译器为您创建了一个。编译器创建的是调用赋值运算符`A`。因此，`AA`被打印。

如果`operator=`在 B 中添加另一个：

```
void operator=(B const &B) { cout << "BB" << endl; } 
```

您将在赋值运算符的情况下看到“BB”打印出来，因为在这种情况下，编译器不会为您生成赋值运算符。

# javascript - 在将其函数绑定到事件后使用“this”访问对象本身

> ID：15714549
> 
> 赞同：0
> 
> 时间：2013-03-30T03:13:59.737
> 
> 标签：javascript, oop, object

当我尝试使用“this”关键字访问对象时，我得到的是“window”对象而不是对象本身，因为我将它的函数绑定到一个事件并且该事件属于 window 对象。

在示例中，`alert(this.osd)`表示它未定义，因为“window”对象中没有“osd”。那么，解决这个问题的最佳方法是什么？将游戏对象定义为 window.game ？

```
var game = {

    osd : null,
    stage : null,

    tick : function(){
        alert(this.osd);

    },

    init : function(){

        // Configure the OSD
        this.osd = "a";

        // Preapare the stage;
        this.stage = "b";
        window.addEventListener("click",this.tick);
    }
}

game.init(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-30T03:16:59.063

您需要使用对象上下文调用 tick 方法，如下所示：

```
var self = this;
window.addEventListener("click", function() {self.tick()}); 
```

或者，您可以`.bind()`在现代浏览器中使用它本质上做同样的事情（它创建一个存根函数，该函数使用正确的对象上下文调用实际方法）。

```
window.addEventListener("click", this.tick.bind(this)); 
```

* * *

The issue is that when you pass `this.tick` to `addEventListener()`, you are only passing a function reference to the tick function, you aren't actually passing the object reference. So, when addEventListener() calls tick without any object reference, the default value of `this` for a function call without an object reference is `window` (when not in strict mode) so that's what you're seeing.

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-30T03:17:40.560

You can bind using a closure, like this:

```
window.addEventListener('click',(function(o){return function(){o.tick()}})(this)); 
```

Also, (unrelated to your problem), since you're making an initialiser function, you would be better off using a class/instance setup:

```
function Game( myParameter ) {
    this.osd = "a";
    this.tick = function( ) {
    }
    window.addEventListener('click',(function(o){return function(){o.tick()}})(this));
}
var game = new Game( 3 ); 
```

Notice that `game` is now created with `new`, and we can pass parameters to its "constructor" function.

# java - 在 OS X 上将 Java 应用程序的文档文件封装为一个包

> ID：15714550
> 
> 赞同：0
> 
> 时间：2013-03-30T03:14:01.340
> 
> 标签：java, macos, bundle, info.plist

我正在从 Java 应用程序编写特定于应用程序的文档。这些文件基本上是一个目录中相关文件/数据库的集合。在 OS XI 上，希望**这个目录看起来不透明，就好像它是一个文档文件**一样，类似于 RTFD 隐藏一个 RTF 文本文件以及相关资源（例如粘贴的图形）。我理解这个概念叫做[package](https://developer.apple.com/library/mac/#documentation/CoreFOundation/Conceptual/CFBundles/AboutBundles/AboutBundles.html)。

例如，想象一下这个结构：

```
MyDocument.ext/
   MetaData.xml
   Database/
     Db0
     Db1 
```

等等。我希望它作为一个文档出现在 Finder 中`MyDocument`，而不是一个目录。

我将能够为我的 Java 应用程序生成一个应用程序包，这样它就可以在其 Info.plist 中包含一个文档描述符。

我如何告诉 OS X 以这种方式处理我的文档（目录）？通过 Info.plist，还是我需要执行一些特定的终端程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T05:03:25.840

在[这个文档](https://developer.apple.com/library/mac/#documentation/CoreFOundation/Conceptual/CFBundles/DocumentPackages/DocumentPackages.html#//apple_ref/doc/uid/10000123i-CH106-SW1)之后，实际上只需要应用程序的 plist 中的一个条目：在文档类型条目中，键`LSTypeIsPackage`必须包含在 value 中`"true"`：

```
<key>CFBundleDocumentTypes</key>
<array>
  <dict>
    <key>CFBundleTypeRole</key>
    <string>Editor</string>
    <key>CFBundleTypeName</key>
    <string>Foobar Document</string>
    <key>CFBundleTypeExtensions</key>
    <array>
      <string>foobar</string>
    </array>
    <key>LSTypeIsPackage</key>
    <string>true</string>       <!-- !!! -->
    <key>CFBundleTypeIconFile</key>
    <string>foobar.icns</string>
  </dict>
</array> 
```

我必须将应用程序复制到`/Applications`Finder 才能识别我的新文件类型，但随后它起作用了，并且以 结尾的目录`.foobar`显示为不透明文件。

# c++ - C ++调用手刹损坏视频

> ID：15714556
> 
> 赞同：0
> 
> 时间：2013-03-30T03:15:19.697
> 
> 标签：c++, video-processing

从 C++ 程序调用手刹的命令行界面时，使用：

```
command = "HandBrakeCli -i in.mp4 -o out.mp4 --preset=\"Normal\"";
result = std::system(command.c_str()); 
```

视频输出损坏（没有声音，图片无法识别）。从终端运行相同的命令按预期工作。

当尝试使用管道而不是系统连接到命令行时，只要视频文件小于约 10 兆字节，它就会突然起作用。然而，任何更大的东西都会以与以前不同的方式损坏（视频文件仍在播放，但声音时断时续，画面冻结（播放器不冻结，但视频包含较长部分的静止图像）。

我认为也许 c++ 正在缩短手刹（也许如果系统超时或其他原因），但情况似乎并非如此（手刹仍会正常运行，但输出混乱）。

感谢您的阅读，如果我找到答案，我会再次发布。

**编辑：** system() 方法在我自己尝试时起作用，在我的程序（它是一个守护进程）的上下文之外。嗯……

**编辑：** HandBrakeCLI 的输出开始不同于此时在 bash 中运行时的输出：

```
[aac @ 0x7f04b0e42fc0] Number of bands (57) exceeds limit (48).
[aac @ 0x7f04b0e42fc0] channel element 3.4 is not allocated
[aac @ 0x7f04b0e42fc0] channel element 2.8 is not allocated
[aac @ 0x7f04b0e42fc0] channel element 3.6 is not allocated
[aac @ 0x7f04b0e42fc0] channel element 3.2 is not allocated
[aac @ 0x7f04b0e42fc0] Not evaluating a further program_config_element as this construct is dubious at best.
[aac @ 0x7f04b0e42fc0] Not evaluating a further program_config_element as this construct is dubious at best. 
```

这会重复 4000 行，然后是段错误。

**编辑：** bash 的环境：

```
TERM=xterm-256color
SHELL=/bin/bash
XDG_SESSION_COOKIE=xxxxxx
SSH_CLIENT=xxxxxxxx
SSH_TTY=/dev/pts/0
USER=ubuntu
LS_COLORS=rs=0:di=01;34:ln=01;36:mh=00:pi=40;33:so=01;35:do=01;35:bd=40;33;01:cd=40;33;01:or=40;31;01:su=37;41:sg=30;43:ca=30;41:tw=30;42:ow=34;42:st=37;44:ex=01;32:*.tar=01;31:*.tgz=01;31:*.arj=01;31:*.taz=01;31:*.lzh=01;31:*.lzma=01;31:*.tlz=01;31:*.txz=01;31:*.zip=01;31:*.z=01;31:*.Z=01;31:*.dz=01;31:*.gz=01;31:*.lz=01;31:*.xz=01;31:*.bz2=01;31:*.bz=01;31:*.tbz=01;31:*.tbz2=01;31:*.tz=01;31:*.deb=01;31:*.rpm=01;31:*.jar=01;31:*.war=01;31:*.ear=01;31:*.sar=01;31:*.rar=01;31:*.ace=01;31:*.zoo=01;31:*.cpio=01;31:*.7z=01;31:*.rz=01;31:*.jpg=01;35:*.jpeg=01;35:*.gif=01;35:*.bmp=01;35:*.pbm=01;35:*.pgm=01;35:*.ppm=01;35:*.tga=01;35:*.xbm=01;35:*.xpm=01;35:*.tif=01;35:*.tiff=01;35:*.png=01;35:*.svg=01;35:*.svgz=01;35:*.mng=01;35:*.pcx=01;35:*.mov=01;35:*.mpg=01;35:*.mpeg=01;35:*.m2v=01;35:*.mkv=01;35:*.webm=01;35:*.ogm=01;35:*.mp4=01;35:*.m4v=01;35:*.mp4v=01;35:*.vob=01;35:*.qt=01;35:*.nuv=01;35:*.wmv=01;35:*.asf=01;35:*.rm=01;35:*.rmvb=01;35:*.flc=01;35:*.avi=01;35:*.fli=01;35:*.flv=01;35:*.gl=01;35:*.dl=01;35:*.xcf=01;35:*.xwd=01;35:*.yuv=01;35:*.cgm=01;35:*.emf=01;35:*.axv=01;35:*.anx=01;35:*.ogv=01;35:*.ogx=01;35:*.aac=00;36:*.au=00;36:*.flac=00;36:*.mid=00;36:*.midi=00;36:*.mka=00;36:*.mp3=00;36:*.mpc=00;36:*.ogg=00;36:*.ra=00;36:*.wav=00;36:*.axa=00;36:*.oga=00;36:*.spx=00;36:*.xspf=00;36:
MAIL=/var/mail/ubuntu
PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games
PWD=/home/ubuntu/ivpd_php
LANG=en_US.UTF-8
SHLVL=1
HOME=/home/ubuntu
LOGNAME=ubuntu
SSH_CONNECTION=xxxx xxx xxxx xxx
LESSOPEN=| /usr/bin/lesspipe %s
LESSCLOSE=/usr/bin/lesspipe %s %s
_=/usr/bin/env
OLDPWD=/home/ubuntu 
```

在守护进程内：

```
SUDO_GID=1000
MAIL=/var/mail/root
USER=root
HOME=/home/ubuntu
SUDO_UID=1000
LOGNAME=root
TERM=xterm-256color
USERNAME=root
PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin
LANG=en_US.UTF-8
LS_COLORS=rs=0:di=01;34:ln=01;36:mh=00:pi=40;33:so=01;35:do=01;35:bd=40;33;01:cd=40;33;01:or=40;31;01:su=37;41:sg=30;43:ca=30;41:tw=30;42:ow=34;42:st=37;44:ex=01;32:*.tar=01;31:*.tgz=01;31:*.arj=01;31:*.taz=01;31:*.lzh=01;31:*.lzma=01;31:*.tlz=01;31:*.txz=01;31:*.zip=01;31:*.z=01;31:*.Z=01;31:*.dz=01;31:*.gz=01;31:*.lz=01;31:*.xz=01;31:*.bz2=01;31:*.bz=01;31:*.tbz=01;31:*.tbz2=01;31:*.tz=01;31:*.deb=01;31:*.rpm=01;31:*.jar=01;31:*.war=01;31:*.ear=01;31:*.sar=01;31:*.rar=01;31:*.ace=01;31:*.zoo=01;31:*.cpio=01;31:*.7z=01;31:*.rz=01;31:*.jpg=01;35:*.jpeg=01;35:*.gif=01;35:*.bmp=01;35:*.pbm=01;35:*.pgm=01;35:*.ppm=01;35:*.tga=01;35:*.xbm=01;35:*.xpm=01;35:*.tif=01;35:*.tiff=01;35:*.png=01;35:*.svg=01;35:*.svgz=01;35:*.mng=01;35:*.pcx=01;35:*.mov=01;35:*.mpg=01;35:*.mpeg=01;35:*.m2v=01;35:*.mkv=01;35:*.webm=01;35:*.ogm=01;35:*.mp4=01;35:*.m4v=01;35:*.mp4v=01;35:*.vob=01;35:*.qt=01;35:*.nuv=01;35:*.wmv=01;35:*.asf=01;35:*.rm=01;35:*.rmvb=01;35:*.flc=01;35:*.avi=01;35:*.fli=01;35:*.flv=01;35:*.gl=01;35:*.dl=01;35:*.xcf=01;35:*.xwd=01;35:*.yuv=01;35:*.cgm=01;35:*.emf=01;35:*.axv=01;35:*.anx=01;35:*.ogv=01;35:*.ogx=01;35:*.aac=00;36:*.au=00;36:*.flac=00;36:*.mid=00;36:*.midi=00;36:*.mka=00;36:*.mp3=00;36:*.mpc=00;36:*.ogg=00;36:*.ra=00;36:*.wav=00;36:*.axa=00;36:*.oga=00;36:*.spx=00;36:*.xspf=00;36:
SUDO_COMMAND=./env
SHELL=/bin/bash
SUDO_USER=ubuntu
PWD=/ 
```

# javascript - 模型实例的 ExtJS ComponentQuery 选择器，或者 MVC 中模型的适当用途是什么？

> ID：15714567
> 
> 赞同：0
> 
> 时间：2013-03-30T03:16:51.390
> 
> 标签：javascript, extjs

也许我想要做的是反对 MVC，但这里就是这样。

我有绑定到控制器上的功能的视图事件。这些事件更新了我在 Controller.init 上创建的模型实例。我希望更新模型实例来引发可以绑定到控制器上的函数的事件。

这样做的正确方法是什么？我调用 Controller.control 但我不知道要为选择器传递什么。

这是我的 Controller.init：

```
var me = this;

me.keysModelInstance = me.getKeysModel().create();
me.control({
    'model#keys': {
        onkeyschange: me.onKeysModelInstanceChange
    }
}); 
```

这是我的模型：

```
Ext.define('pronghorn_ui_keyboard.model.Keys', {
    extend: 'Ext.data.Model',

    fields: [
        {
            name: 'keys',
            type: 'string'
        }
    ],

    add: function(key) {
        this.set('keys', this.get('keys') + key);
        this.fireEvent('onkeyschange');
    },

    clear: function() {
        this.set('keys', '');
        this.fireEvent('onkeyschange');
    }

}); 
```

我知道我可以通过自定义侦听器获得我想要发生的事情，但这不像“MVC 方式”。模型只是不打算引发事件吗？不过，这没有任何意义。当代理获得异步更新时引发事件的模型和商店呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T04:07:44.713

在 4.1x 中，控制器可以监听的唯一对象类型是组件。模型不是组件类。Ext 4.2 增加了监听 Store 事件的能力。回到 4.1x，您还可以触发应用程序级事件，控制器也可以对这些事件做出反应。

从 MVC[**教程**](http://www.sencha.com/learn/architecting-your-app-in-ext-js-4-part-3)的第 3 部分：

```
init: function() {
    ...
    // We listen for the application-wide stationstart event
    this.application.on({
        stationstart: this.onStationStart,
        scope: this
    });
}, 
```

被解雇：

```
 this.application.fireEvent('stationstart', selection[0]); 
```

# php - What does this error mean? PDOException: SQLSTATE[23000]: Integrity constraint violation

> ID：15714573
> 
> 赞同：4
> 
> 时间：2013-03-30T03:17:57.837
> 
> 标签：php, drupal, error-handling

I´m pretty desperate here, I have this Drupal 7 production site and out of the blue, I get this error (at the logs) at whatever admin page I get into: What does this mean?

```
PDOException: SQLSTATE[23000]: Integrity constraint violation: 1062 Duplicate entry '25309582' for key 'PRIMARY': INSERT INTO {accesslog} (title, path, url, hostname, uid, sid, timer, timestamp) VALUES (:db_insert_placeholder_0, :db_insert_placeholder_1, :db_insert_placeholder_2, :db_insert_placeholder_3, :db_insert_placeholder_4, :db_insert_placeholder_5, :db_insert_placeholder_6, :db_insert_placeholder_7); Array ( [:db_insert_placeholder_0] => Comienza a refacturarse el gas desde enero de 2012 sin los subsidios, comenzando por los Countries - Resolución 1993/2011 ENARGAS [:db_insert_placeholder_1] => node/4683 [:db_insert_placeholder_2] => [:db_insert_placeholder_3] => 108.162.219.179 [:db_insert_placeholder_4] => 0 [:db_insert_placeholder_5] => CD06pUUKdnaon6k1zaROEhXUPT9DkfVD7fW4UgyEHAw [:db_insert_placeholder_6] => 997 [:db_insert_placeholder_7] => 1364613253 ) in statistics_exit() (line 93 of /home/liga/public_html/modules/statistics/statistics.module). 
```

I´ve deactivated statistics modules, and it is still there...

Any ideas will be greatly appreciated!

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-30T03:23:44.720

Check your primary keys. You try to insert a dataset with a duplicate primary key but the key 25309582 is not given in the array.

# android - Android 如何为总部缩略图使用 Scalr 4.2 或“java-image-scaling”

> ID：15714579
> 
> 赞同：3
> 
> 时间：2013-03-30T03:19:43.663
> 
> 标签：android, android-layout, image-processing, scalr, imgscalr

我正在尝试创建高质量的缩略图，已经尝试了大多数使用 Android 的方法，但还不满意。

这是我发现的一篇好[文章](https://stackoverflow.com/questions/7742175/how-to-get-a-good-quality-thumbnail)，我想在其中尝试使用 Scalr 或 Android 的“java-image-scaling”库。

这里是[Scalr](http://www.thebuzzmedia.com/software/imgscalr-java-image-scaling-library/)和 ' [java-image-scaling](http://code.google.com/p/java-image-scaling/issues/list) '

**问题**：我可以在 Android 开发中使用它们吗？如何使用？（因为我没有看到它在任何地方提到）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-09T22:24:37.980

它不能`Scalr`与 android 一起使用，因为它使用`java.awt.image.BufferedImage`，这不是 Android SDK 的一部分（其余部分也不是`java.awt`）。

Android 使用`android.graphics.Bitmap`，而不是 BufferedImage。我还没有找到与 Scalar 一样好的 Android 库，但是 Bitmap 类很好地支持缩放、旋转和其他转换，请查看带有 matrix 参数的[createBitmamp 。](http://developer.android.com/reference/android/graphics/Bitmap.html)

例如，以下代码翻转一个位图，然后将其保存在另一个位图中

```
Matrix mirrorMatrix = new Matrix();
mirrorMatrix.preScale(-.5f, .5f);
// Create a flipped sprite using the transform matrix and the original sprite
flippedBitmap = Bitmap.createBitmap(orgBitmap, 0, 0, orgBitmap.getWidth(), orgBitmap.getHeight(),mirrorMatrix, true); 
```

# java - 如何在java中建立一个简单的基于网格的游戏板？

> ID：15714581
> 
> 赞同：-1
> 
> 时间：2013-03-30T03:19:47.967
> 
> 标签：java, arrays, layout, matrix, grid

我目前正在学习 Swing，并认为制作游戏会使这个过程对我来说更有趣。我的 JFrame 都设置了菜单和工具栏，但现在我正在构建一个 JPanel 作为游戏区，在这种情况下我想制作一个网格。我可以使用以下方法轻松地在面板上绘制一个：

```
protected void paintComponent(Graphics g) {
    super.paintComponent(g);

    g.setColor(Color.black);
    for(int x = 0 ; x <= getWidth() ; x += 16 ) {
         g.drawLine( x , 0 , x , getHeight() );
     }
    g.setColor(Color.black);
    for(int y = 0 ; y <= getHeight() ; y += 16 ) {
          g.drawLine( 0 , y , getWidth() , y ); 
```

但是，如果我想在板上准确放置和移动图像，这在以后的用途有限。还有另一种方法可以绘制网格，也许使用数组？在我深入交互之前尝试做一个干净的布局，并希望得到任何建议。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T03:47:44.407

要么使用您的尺寸创建图像，要么根据设置网格线的规则放置精灵。

```
//Declare some extra variables
int coordX;
int coordY;
final BufferedImage image = ImageIO.read(new FileInputStream("picture.jpg"));
PointerInfo a = MouseInfo.getPointerInfo();

//Call this every time the mouse is clicked.
Point b = a.getLocation();    
int mouseClickX = (int) b.getX();
int mouseClickY = (int) b.getY();

void place() {//Make a function that establishes ranges to be clicked
    if(mouseClickX < 16 && mouseClickX > 0 && mouseClickY < 16 && mouseClickY > 0)
       coordX = coordY = 0; //places at top corner
    else if()//slot 2, 3, etc...
}

//paintComponent method:
g.drawImage(image, coordX, coordY, this); //set coordinates in 0,0 
```

除了您当前的选项如果您希望您的游戏元素是 Swing 组件，那么[GridBagLayout](http://docs.oracle.com/javase/6/docs/api/java/awt/GridBagLayout.html)就是您要寻找的。虽然需要一点时间来适应，但它是 Swing 提供的最可定制的布局。

有关使用 GridBagLayout 的更多信息，可以[在 oracle 的本教程](http://docs.oracle.com/javase/tutorial/uiswing/layout/gridbag.html)中找到。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T11:36:10.177

您可以创建一个 JPanel 网格，所有这些 JPanel 都保存在 GridLayout 中。如果您希望每个单元格都包含一个可拖动的图片，则将图像放入 ImageIcon 中，将图标放入 JLabel 中，并将 JLabel 添加到 JPanel 网格的其中一个单元格中。如果单元格使用 GridBagLayout，则默认情况下，单个 JLabel 将显示在 JPanel 单元格的中心。要拖放，请提供 JLabels MouseListeners 和 MouseMotionListeners。如果单击，则从 JPanel 中删除 JLabel 并将其移动到顶层窗口的玻璃窗格中。ETC...

# html - HTML/CSS 图像出现在错误的区域？

> ID：15714586
> 
> 赞同：0
> 
> 时间：2013-03-30T03:20:18.410
> 
> 标签：html, css

我试图在我的 上显示用户图像`nav-bar`，但图像没有出现在它应该出现的位置，它应该出现在标题的右侧，尽管它不是。它出现在`<ul>`. 我不确定为什么。

这是代码：http: [//jsfiddle.net/HXnNu/](http://jsfiddle.net/HXnNu/)

我不确定我是否需要尝试一些类似的东西

```
fixed: right; 
```

或者是什么。你怎么看？

另外，我将如何垂直居中该图像？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T03:45:43.780

您目前没有做任何事情来将其发送到页面的右侧。`float:right`可以为您完成这项工作。

[jsFiddle](http://jsfiddle.net/f7NCw/)

```
.navbar img {
    float:right;
} 
```

理想情况下，将有一些类，并且您将使用该类来定位它，这样如果您将来包含更多标签，`<img>`就不会发生未来的问题。`<img>``.navbar`

## 编辑

如果你想要在`<img>`标题的左边，你可以像这样组织你的标签：

```
<div class="container-fluid">
    <!-- ... -->
    <img src="http://harrisonbh.com/chatterr/user_files/profile_img/2dff134978.jpg" alt="Profile Image" style="height: 35px; display: inline;float: left;">
    <a class="brand" href="index.php">Chatterr</a>
    <!-- ... -->
</div> 
```

然后穿上`float:left`：`<img>`

```
.navbar img {
    float:left;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T05:04:33.770

宽度是主要问题

取一个 div 并在其中覆盖您的 ul 和图像文本框

并根据主 div 上可用的总宽度给出宽度

IE

```
<div width="900px; float:left;">   <ul width="600px">  </ul style="width:300px;float:left;"> <img> </div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-30T06:13:38.953

您不能使用`fixed: right;`but`position: fixed;` `right: 0;`或`float: right;`。对于你的问题可能没问题`right: 0;`！

# authentication - Laravel 注册不让用户登录

> ID：15714588
> 
> 赞同：1
> 
> 时间：2013-03-30T03:20:42.880
> 
> 标签：authentication, login, registration, laravel

因此，我查看了有关如何注册以及如何使用 laravel 登录的大量信息，我让我的用户成功注册并分别成功登录。但是，当您注册时，它不会认为您已登录，并且无论我尝试什么，我似乎都无法使其正常工作。

这是我的登录：

```
$userdata = array(
    'username'      => Input::get('email'),
    'password'      => Input::get('password')
);

if ( Auth::attempt($userdata) ) {
        return Redirect::to('home');
    }  else  {
        return Redirect::to('login')
        ->with('login_errors', true);
    } 
```

哪个按预期工作，没有问题。

这是我的注册：

```
$user = new User;
$user->username = Input::get('username');
$user->email    = Input::get('email');
$user->password = Hash::make('password');   
$user->save();

    return Redirect::to('home'); 
```

这也有效，因为在创建用户时，用户可以选择登录。但是，如果我添加完全相同的`Auth::attempt()`内容，它会失败，我尝试过的所有其他`Auth::check()`检查都失败了。我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T03:32:05.217

如果 Auth::attempt() 需要像您提到的那样的数组，为什么不直接将您刚刚创建的 $user 作为数组取回并在重定向之前将其传递给尝试方法？同样，不熟悉 Laravel，但根据您的代码示例，我认为这应该可以工作.. 可能是这样的：

```
$user = new User;
$user->username = Input::get('username');
$user->email    = Input::get('email');
$user->password = Hash::make(Input::get('password'));
$user->save();

$userdata = array(
    'username'      => $user->username,
    'password'      => $user->password
);

if ( Auth::attempt($userdata ) ) {
        return Redirect::to('home');
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T14:15:31.223

Hash::make() 不检索给定参数的发布值。

而不是`Hash::make('password');`，尝试`Hash::make(Input::get('password'));`。我的猜测是您的用户现在拥有密码“密码”，而不是他们在注册表单中填写的密码。

# jquery - 使用 jQuery scrollleft 滑动 div

> ID：15714589
> 
> 赞同：2
> 
> 时间：2013-03-30T03:20:46.083
> 
> 标签：jquery, html, button, scroll, click

我对 jQuery 很陌生，所以这可能是一个愚蠢的问题。我想手动（非动画）左右移动一个 div。具体来说，我希望能够单击一个左按钮，它向左移动 100 像素，或者单击一个右按钮，它向右移动 100 像素。我确定我遗漏了一些明显的东西（可能是多个明显的东西），但我做了很多检查，但我找不到任何有帮助的东西。我使用下面基本独立的代码作为测试。div 就是不动。

```
 <!DOCTYPE HTML>
    <html>
    <head>
    <script type="text/javascript" src="http://code.jquery.com/jquery-1.9.1.js"></script>
    <script type="text/javascript">
      $(document).ready( function() {
        $("#left").click( function() {
          var pos = $("#cont").scrollLeft()-100;
          $("#cont").scrollLeft(pos);
        });
        $("#right").click( function() {
          var pos = $("#cont").scrollLeft()+100;
          $("#cont").scrollLeft(pos);
        });
      });
    </script>
    </head>
    <body>

    <div id="cont" style="position:relative; overflow:auto; width:400px; height:50px; border:10px solid #D6D6D6;"></div>
    <br />
    <input type="button" id="left" value="Left">&nbsp;&nbsp;<input type="button" id="right" value="Right">

    </body>
    </html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T04:35:25.333

我认为你应该借助动画功能，像这样

```
 $('#cont').animate({left:'+100px'}, 1000); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-30T04:47:21.960

我同意使用 Animate。这是我从您的代码开始创建的小提琴的链接：[link](http://jsfiddle.net/t5R5H/3/)

```
$(document).ready(function () {
    $("#left").click(function () {
        $("#cont").animate({
            left: '-=50'
        }, 'slow');
    });
    $("#right").click(function () {
        $('#cont').animate({
            left: '+=50'
        }, 'slow');
    });
}); 
```

# javascript - Javascript变量生命周期，变量返回时会被复制吗？

> ID：15714590
> 
> 赞同：0
> 
> 时间：2013-03-30T03:20:49.377
> 
> 标签：javascript, function

没有代码很难描述这种情况。我的修改使一些答案变得无关紧要。我在这里过去了原始代码和下面的简化版本：

```
function Entity(){
  var value = {};

  return {
    'value': value
  };
}

var e1 = Entity();
var e2 = Entity();
alert(e1.value === e2.value); 
```

我认为它应该返回true。但实际上，它返回 false。从函数实体返回时是否复制了“值”？

**更新** 我想我现在知道原因了。每次实体函数调用表达式“var value={};” 将生成一个新对象。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T03:25:41.980

value 在返回时不会被复制，但是每当您运行 Entity 函数时都会创建一个新对象。

您可以使用简单的代码来观察“新对象”的创建，例如

```
console.log({} === {}) //should give false

var a = {};
console.log(a === a); //should give true 
```

您可以通过在运行函数时分配更多变量来检查返回时不会复制内容

```
var a,b,c;

function Entity(){
   var value = {};
   a = value;
   b = value;
   return value;
}

c = Entity();

console.log(a==b, a==c, b==c); //should all give true 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T03:24:54.910

`[elements...]`语法创建一个新数组。在 javascript 中，`===`运算符按引用（而不是按内容）比较数组，所以结果是`false`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-30T03:27:05.887

您的函数当前每次被调用时都会创建一个新对象。

保持**与示例中相同的界面**，共享**相同的数组**，您可以执行以下操作 ->

```
Entity = (function () {
    //this variable is accessible only in the scope of this function
    var messageBoxes = ['hello'];

    //we return a function that return an object that will make the private messageBoxes variable accessible through it's messageBoxes property.
    return function () {
        return { messageBoxes: messageBoxes };
    };
})(); //note that this function will be self-executing

alert(Entity().messageBoxes === Entity().messageBoxes); 
```

但是，您不会在这里获得任何东西，因为您将`messageBoxes`直接公开访问私有变量。

# python-3.x - 在 argparse 中使用 python 关键字作为选项

> ID：15714597
> 
> 赞同：5
> 
> 时间：2013-03-30T03:21:52.010
> 
> 标签：python-3.x, argparse

我正在编写一个简单的 Python 脚本来导出、导入和比较数据库。我想让用户提供他们想要运行脚本的“模式”，我选择了导入、导出和差异作为我的选项。当我通过 argparse 运行它时，所有解析的选项都以 args 结尾，我可以使用 arg.export 或 args.diff 访问它们，但由于“import”是一个关键字，我遇到了问题。

我可以做一些变通方法来让它工作，但我想知道是否有可能保留我所拥有的。例如，我可以将选项缩短为“exp”、“imp”和“diff”，或者我可以做一个名为“mode”的选项，期望传入“import”、“export”或“diff”。

我当前的代码：

```
parser = argparse.ArgumentParser()

group = parser.add_mutually_exclusive_group()
group.add_argument("--export", help="Export source(s)", action="store_true")
group.add_argument("--import", help="Import source(s)", action="store_true")
group.add_argument("--diff", help="Diff sources", action="store_true")

parser.add_argument("filename", help="XML Filename used for exporting to, importing from or comparing while doing diff.")

args = parser.parse_args()

if args.export:
    export_sources(args.filename)
elif args.import:
    import_sources(args.filename)
elif args.diff:
    diff_sources(args.filename) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-30T03:45:49.983

好的，如果我使用“dest”，我仍然可以使用--import，但让它在内部转到“imp”。

```
 parser = argparse.ArgumentParser()

group = parser.add_mutually_exclusive_group()
group.add_argument("--export", help="Export source(s)", action="store_true")
group.add_argument("--import", dest="imp", help="Import source(s)", action="store_true")
group.add_argument("--diff", help="Diff sources", action="store_true")

parser.add_argument("filename", help="XML Filename used for exporting to, importing from or comparing while doing diff.")

args = parser.parse_args()

if args.export:
    export_sources(args.filename)
elif args.imp:
    import_sources(args.filename)
elif args.diff:
    diff_sources(args.filename) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-07-31T14:34:55.160

您还可以使用以下方法访问解析的参数`getattr`：

```
parser = argparse.ArgumentParser()
parser.add_argument('--import')
args = parser.parse_args()
import_value = getattr(args, 'import', None)  # defaults to None 
```

或者检查参数是否存在，然后将其读入变量：

```
# [...]
if hasattr(args, 'import'):
    import_value = getattr(args, 'import') 
```

# ios - UITableViewCell 子视图未初始化

> ID：15714598
> 
> 赞同：1
> 
> 时间：2013-03-30T03:22:07.343
> 
> 标签：ios, uitableview, storyboard, subview

我有一个 TableViewController 并使用故事板设计了一个自定义的 uitableview 单元格。我已经为我的 tableview 单元格中的所有子视图正确设置了标识符和标签（我不是第一次这样做，并且通常可以轻松地完成工作）。

但现在我一直在我的 tableview 控制器上观察到一些奇怪的东西。在`- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath`方法中，我得到了正确的单元格。我还可以使用标签访问我的子视图。但是当我尝试访问任何子视图的框架属性时，我得到的值为 0。

子视图是否稍后以其他方法布局。这是我第一次看到这个。以前有人经历过吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-30T03:31:04.463

`UITableViewCell`只有在调用了“layoutSubviews”方法后，单元格的子视图帧才准备就绪。如果你需要修改这些框架，那么你应该创建一个 UITableViewCell 的子类并实现 layoutSubviews

```
- (void)layoutSubviews {
  [super layoutSubviews];

  // modify frames here
} 
```

如果您只需要访问帧值并且不需要进行任何更改，那么您可以简单地在`tableView:willDisplayCell:forRowAtIndexPath:`方法中检查它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-30T03:28:49.870

在那里实现`tableView:willDisplayCell:forRowAtIndexPath:`并检查子视图的框架。他们在那里还好吗？那么一切都很好。

# python - QTreeView 表头显示文本

> ID：15714600
> 
> 赞同：1
> 
> 时间：2013-03-30T03:22:17.293
> 
> 标签：python, qt, treeview, pyside

我正在尝试在 a 中显示一个简单的列表`QTreeView`并设置标题显示文本：

```
+--------+
| Player |
+--------+
| Alice  |
| Bob    |
+--------+ 
```

但是，我无法让标题显示除“1”以外的任何内容：

```
+--------+
| 1      |
+--------+
| Alice  |
| Bob    |
+--------+ 
```

我首先尝试了一个`QStringListModel`，但这并没有改变标题文本。

```
from PySide.QtCore import *
from PySide.QtGui import *

model = QStringListModel()
model.setHeaderData(0, Qt.Horizontal, "Player")
model.setStringList(["Alice", "Bob"]) 
```

我发现[QTableView 标题困难](http://www.qtcentre.org/archive/index.php/t-11587.html)，所以我尝试使用`QStandardItemModel`类似的建议，但仍然导致标题仅显示“1”：

```
from PySide.QtCore import *
from PySide.QtGui import *

model = QStandardItemModel()
model.setHeaderData(0, Qt.Horizontal, "Player")
for player in ["Alice", "Bob"]:
    model.appendRow(QStandardItem(player)) 
```

如果已经有一个默认的 Qt/PySide 类提供它，我宁愿避免定义我自己的模型类。有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T05:14:02.923

很难说你的问题是什么，因为有足够的信息，但下面的 C++ 代码有效

```
QStandardItemModel model;
model.setColumnCount (1);
model.setHeaderData (0, Qt::Horizontal, "Player");
QList<QStandardItem*> row;
row << new QStandardItem("Adam");
model.appendRow (row);
QTreeView view;
view.setModel (&model); 
```

尝试再次检查您的代码。

# javascript - 错误：SyntaxError：使用 jQuery 创建标签时出现 DOM 异常 12

> ID：15714601
> 
> 赞同：10
> 
> 时间：2013-03-30T03:22:23.467
> 
> 标签：javascript, jquery, dom, syntax-error, dtd

我有以下 javascript：

```
var orderItemQuantity = $('<input/>', {
    type: 'hidden',
    name: 'order_detail[][quantity]',
    value: itemQuantity
}); 
```

上面的 javascript 抛出以下错误消息：

```
Error: SyntaxError: DOM Exception 12 
```

这个工作没有错误：

```
var newListItem = $('<li/>', {
    html:
    $('#item_name_'+itemId).text() +
    '(' + $('#item_quantity_' + itemId).val() +')' +
    '<a onclick="removeItem(' + itemId + ')">Delete this</a>' +
    '<input type="hidden" name="order_detail[][item_id]" value="' + itemId + '"/>',
    id: itemId
}); 
```

我检查了以下[问题](https://stackoverflow.com/questions/13950930/error-syntax-err-dom-exception-12)，但答案没有明确说明正确的原因 WHY。

这是我的DTD：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
```

**问题**：为什么在没有问题`$('<input/>')`的`$('<input>')`情况下会抛出上述异常`$('<li/>')`？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-30T03:50:35.263

确保在第一个示例中加载了 jQuery。

即使您没有加载 jQuery，`$()`谷歌浏览器现在也将函数定义为类似于`querySelectorAll()`.

这个函数只接受一个 CSS 选择器作为参数，而不是像 jQuery 那样的任意 HTML `$()`。

从文档：

> SYNTAX_ERR code 12 In invalid or illegal string has been specified; for example setting the selectorText property of a CSSStyleRule with an invalid CSS value.

The function is expecting a CSS selector and you gave it HTML so it gave a syntax error.

See this fiddle, it works just fine:

[http://jsfiddle.net/S6d6w/](http://jsfiddle.net/S6d6w/)

# c - What's a file descriptor's "exception"?

> ID：15714602
> 
> 赞同：17
> 
> 时间：2013-03-30T03:22:46.410
> 
> 标签：c, unix, io, file-descriptor, multiplexing

When one calls select() asking which file descriptors have "exceptions" waiting, what does that mean?

How does one trigger one of these "exceptions"?

If anyone can point me to a nice explanation, that'd be awesome. I've been googling and can't find a thing.

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-30T03:47:03.833

Short form: exceptional situations occur when a TCP socket recieves out of band data.

If you read the `select` [manual page](http://man7.org/linux/man-pages/man2/select_tut.2.html), you will find a reference to another supplementary manual page called `select_tut` with the explanation:

> ### exceptfds
> 
> This set is watched for "exceptional conditions". In practice, only one such exceptional condition is common: the availability of out-of-band (OOB) data for reading from a TCP socket. See recv(2), send(2), and tcp(7) for more details about OOB data. (One other less common case where select(2) indicates an exceptional condition occurs with pseudo-terminals in packet mode; see tty_ioctl(4).) After select() has returned, exceptfds will be cleared of all file descriptors except for those for which an exceptional condition has occurred.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-30T03:46:07.693

Indeed there seems to be very little information on this. Thankfully there's an [existing question](https://stackoverflow.com/questions/1342712/nix-select-and-exceptfds-errorfds-semantics) with a very good answer.

In the case of Linux, for example, it can denote out-of-band data being received on a stream socket, or "a state change occuring on a pseudoterminal slave connected to a master that is in packet mode" [(TLPI 63.2.1)](http://man7.org/tlpi/).

# java - 机器人类mouseWheel不工作

> ID：15714609
> 
> 赞同：1
> 
> 时间：2013-03-30T03:23:01.373
> 
> 标签：java, scroll, mouseevent, awtrobot

一段时间以来，我一直在使用 Robot 类模拟鼠标事件，一切都很好，直到我尝试使用 mouseWheel 函数滚动。我只有这条简单的线：

```
 Robot robot = new Robot();
  robot.mouseWheel(-100); 
```

我已经尝试了很长时间的变体，程序运行，什么都不做，然后正常终止。有人可以解释为什么会这样吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T04:53:25.087

这对我来说很好......

```
import java.awt.AWTException;
import java.awt.Robot;

public class TestRobotScroll {

    public static void main(String[] args) {
        try {
            Robot bot = new Robot();
            bot.setAutoDelay(100);
            Thread.sleep(2000);
            System.out.println("++");
            bot.mouseWheel(25);
            Thread.sleep(2000);
            System.out.println("--");
            bot.mouseWheel(-25);
        } catch (Exception ex) {
            ex.printStackTrace();
        }
    }

} 
```

我让它在编辑器中滚动并滚动浏览器......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-30T11:05:35.130

您的程序可能无法运行，因为`scroll up`鼠标指针所在的 GUI 上没有任何内容。或者，您还没有将鼠标指针停留在可以看到滚动效果的适当 GUI 上。这是实现这一目标的简单程序。我希望这会对您有所帮助：

```
import javax.swing.*;
import java.awt.event.*;
import java.io.*;
import java.awt.*;

public class MouseScrollRobot extends JFrame
{

    JTextArea ta;
    boolean scrolledAway = false;
    Robot robot;
    boolean started = false;
    public void createAndShowGUI() 
    {
        setTitle("Robot Demonstration");
        JPanel panel = new JPanel();
        ta = new JTextArea();   
        StringBuilder sBuilder = new StringBuilder();
        try
        {
            robot = new Robot();
            BufferedReader bfr = new BufferedReader(new FileReader("MouseScrollRobot.java"));
            String line = null ;
            while ((line = bfr.readLine()) !=null)
            {
                sBuilder.append(line+"\n");
            }
        }
        catch (Exception ex){ex.printStackTrace();}
        ta.setText(sBuilder.toString());
        JScrollPane jsp = new JScrollPane(ta);
        final Timer timer = new Timer(100, new ActionListener()
        {
            @Override
            public void actionPerformed(ActionEvent evt)
            {
                try
                {
                    robot.mouseMove((getLocationOnScreen().x + getWidth()) / 2 , (getLocationOnScreen().y + getHeight()) / 2);//Move mouse pointer to the Component which you want to scroll
                    ta.requestFocus();
                    robot.setAutoDelay(100);
                    if (!scrolledAway)
                    {
                        setTitle("Scrolling up");
                        robot.mouseWheel(-40);
                    }
                    else
                    {
                        setTitle("Scrolling Down");
                        robot.mouseWheel(40);
                    }
                    scrolledAway = !scrolledAway;
                    setTitle("Scrolled");
                }catch (Exception ex){ex.printStackTrace();}
            }
        });
        timer.setRepeats(true);
        timer.start();
        getContentPane().add(jsp);
        setSize(500,400);
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setLocationRelativeTo(null);
        setVisible(true);
  }

  public static void main(String args[]) 
  {
    SwingUtilities.invokeLater( new Runnable()
    {
        @Override
        public void run()
        {
            MouseScrollRobot msr = new MouseScrollRobot();
            msr.createAndShowGUI();
        }
    });
  }
} 
```

# .htaccess - A strange .htaccess issue I think?

> ID：15714611
> 
> 赞同：0
> 
> 时间：2013-03-30T03:23:38.640
> 
> 标签：.htaccess, stylesheet

I have a web site where I'm using the basic wordpress .htaccess file to dump any request to the index. Everything works as expected when I type in www.mydomain.com

It works as expected when I type in www.mydomain.com/something

But if I use any more slashes such as www.mydomain.com/something/ or www.mydomain.com/something/something the index page loads but some kind of error causes the stylesheet not load.

It's like the page loads but without styles. Does anyone have a clue why this is behaving this way?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T03:29:54.747

You probably have relative paths for your stylesheets. You can fix it by using absolute urls to force the requests for your stylesheets to come from a specific URL instead.

# java - 计算准确的运行时间，而不是实际的运行时间

> ID：15714615
> 
> 赞同：-2
> 
> 时间：2013-03-30T03:24:02.210
> 
> 标签：java, c++, algorithm, timing

是否可以创建一个程序，比如使用字节码，正常运行程序，并通过使用每条指令的定义运行时间来记录总运行时间？然后，一旦您的程序完成，您将获得一个准确的、与系统无关的运行时值，而无需一遍又一遍地运行您的程序并对结果进行平均，或者找到最小值。当然，这与实际运行时间之间的关系会因变量数量过多而有所不同，但至少可以选择使用这样的数字似乎还是不错的。

因此，为了清楚起见，这里有三个问题（对不起，但这只是为了简洁起见阻止了后续问题），相互建立：

1.  是否有可能，或者是否有理论结果可以防止这种情况（停止问题或其他）？

2.  如果可能，为什么从来没有使用过？由于许多实际原因，它似乎很有价值。

3.  还是有一个存在而我只是想念它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T03:30:34.783

Java实现：

```
int start = System.currentTimeMillis();

//Code to be timed...

int end = System.currentTimeMillis();
System.out.println(end - start); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T03:40:25.720

如果您在同一台机器上运行所有程序并且使用进程的时间而不是实际运行时间，那么结果应该非常准确。查看 .Net 框架中的 Proccess 类，以便轻松理解这一点（它包含为您提供进程本身的 UserTime 和 KernelTime 的属性），这个类也是 OS proccess API 的一个很好的包装器。O 表示法给出了分析算法执行或复杂性的另一种方法，它需要对代码进行深入分析，问题是每个操作不需要相同的时间，所有这些理论都是为理想机器制定的。Maibe 做类似的事情，您将需要您想要支持的所有语言的口译员，并使所有这些都变得非常复杂。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-30T04:38:34.327

The basic problem is that the number of times each instruction or method or whatever is executed is NOT a reliable predictor of anything ... except how long it will take to run the same program on the same input again.

To get a useful predictor, you need a good model of how the program's execution time depends on its inputs. Producing such a model automatically is not a tractable problem.

*   The Halting Theorem says that you cannot determine *a priori* whether any program is going to halt with a given input set.

*   In practice, theorem proving technology is not up to the task for anything but really simple programs.

*   Attempting to get model by empirical means (i.e. by trying to fit a curve to experimental results) is not going to work because:

    *   It is not possible to work out (automatically) what the key variables are for the model. Indeed, the variables may not even be numeric.
    *   Even if you managed that, you've now way of knowing if the program's performance is going to fit one of the classic curves with any degree of accuracy. You may get a model, but you have know way of knowing how accurate it will be.

* * *

Just to illustrate, consider the problem of factoring a large number. If the number has small factors, then the computation time will be quick. If it doesn't then ... well according to wikipedia, the worst case computational complexity of the best available method for factoring integers is:

```
O(exp(((64b/9)^(1/2).(log b)^(2/3))) 
```

where `b` is the number of bits in the number. That's intractable for large values of `b`.

So ...

*   A analytical solution which could give us a useful prediction would be equivalent to finding a fast analytical solution that says whether a number is (definitely) factorizable, and how large the factors are. This is a mathematically challenging problem.

*   An empirical solution cannot exist because no useful empirical model exists ... that doesn't involve first doing the factorization.

# python - Consolidate irregular date values in Python (Pandas)

> ID：15714624
> 
> 赞同：0
> 
> 时间：2013-03-30T03:25:25.567
> 
> 标签：python, regex, pandas

I have a `DataFrame` with a column of string values that I want to convert to date format. In R I usually break this down to a series of steps substituting the `??:??` with `12:00`, stripping the time, appending it to the end and converting with a POSIX function.

I am trying to replicate that in Python in a more *pythonic* manner.

Here is an exceprt from my `DataFrame` (150,000 rows) as `Series`

```
index  date
0    21/08/2001 10:20
1     19/09/2005 9:50
2     ??:?? 04-Jun-01
3    16/08/2004 7:15 
4     ??:?? 04-Jan-01 
5     23/01/2001 9:25 
6    24/01/2001 11:16 
7     ??:?? 05-Feb-01 
8     24/01/2001 8:30 
9    24/01/2001 15:15 
```

Here is what I have tried (I have called the excerpt `tmp`.):

I thought I could use list comprehensions and a regular expression replacement as follow:

`[re.sub('\\?\\?:\\?\\?', '12:00', tmp) for i in tmp[i]]`

What I would like to do is get the replacement of `??:??` with `12:00` and then generalise it so I can use it with `tmp.apply`.

任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T03:33:20.013

你可以使用`Series.str.replace()`：

```
date = """21/08/2001 10:20
19/09/2005 9:50
??:?? 04-Jun-01
16/08/2004 7:15 
??:?? 04-Jan-01 
23/01/2001 9:25 
24/01/2001 11:16 
??:?? 05-Feb-01 
24/01/2001 8:30 
24/01/2001 15:15""".split("\n")

s = pd.Series(date)
s.str.replace("\?\?:\?\?", "12:00") 
```

# django - 没有找到带有参数'（1，）'和关键字参数'{}'的''的Django Reverse

> ID：15714625
> 
> 赞同：0
> 
> 时间：2013-03-30T03:25:35.600
> 
> 标签：django

我有 django 生成的表单，我正在尝试将带有表单的对象 id 返回给函数。

我收到此错误。我似乎无法弄清楚为什么它不起作用，因为图片 id 是有效的 id，并且 URL 的正则表达式应该捕获它并将其返回给我的函数，除非当前 URL 必须匹配，因为我当前的 URL页面是 1:8000/comment/1/

```
Reverse for 'world.CommentCreator' with arguments '(1,)' and keyword arguments '{}' not found.

File "C:\o\17\mysite\pet\views.py" in CommentCreator
  269\.     return render(request,'commentcreator.html',   {'comment':comment,'picture':p,'search':CommentsForm()}) 
```

我的观点.py

```
def CommentCreator(request,picture_id):
    p = Picture.objects.get(pk=picture_id)
    comment = Comment.objects.filter(picture=p)

    return render(request,'commentcreator.html',    {'comment':comment,'picture':p,'search':CommentsForm()}) 
```

我的网址.py

```
 url(
        r'^comment/(?P<picture_id>\d+)/$',
        'pet.views.CommentCreator',
        name = 'CommentCreator',
    ), 
```

html

```
 {% if picture.image  %}
 {% endif %}
 <ul>           
    <br><img src="{{ picture.image.url }}">

    </ul>

 {% for c in comment %}
     {% ifequal c.picture.id picture.id %}

 <br>{{ c.body }}</li>
 <br>{{ c.created}}</li>
 <br>{{ c.user}}</li>
     {% endifequal %}

 {% endfor %}

 <br><br><br><br>

 {% if picture %}
 <form method = "post" action"{% url world.CommentCreator picture.id %}">{% csrf_token %}
    {{search}}
    <input type ="submit" value="Search "/>
 </form>

 {% endif %} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-30T06:28:57.567

您需要在 url 标签中使用 url 名称：

```
{% url CommentCreator picture.id %} 
```

就是这样，如果您使用的是 django < 1.3，则不需要在 url 名称周围加上单引号。它在 django 1.4 中仍然有效，但已被弃用，并且在 django 1.5 中已完全删除。

为了将来的兼容性，如果在 django < 1.5 上，您应该使用此[方法：](https://docs.djangoproject.com/en/dev/releases/1.3/#changes-to-url-and-ssi)

```
{% load url from future %}
{% url 'CommentCreator' picture.id %} 
```

对于命名的捕获组 URL，不需要将 URL 参数作为关键字或参数传递，两者都可以工作（但了解顺序很重要，这就是为什么关键字参数在 URL 标记中更可取的原因）：

```
{% load url from future %}
{% url 'CommentCreator' picture.id %}
{% url 'CommentCreator' picture_id=picture.id %} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T03:28:21.413

您的 URL 配置使用 CommentCreator 视图的关键字参数，将它们提供给`url`：

```
{% url 'CommentCreator' picture_id=picture.id %} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-30T06:31:57.003

你把`.`而不是`:`放在网址中

```
<form method = "post" action"{% url world.CommentCreator picture.id %}">
    {% csrf_token %} 
```

一定是

```
<form method = "post" action"{% url world:CommentCreator picture.id %}">
    {% csrf_token %} 
```

# zend-framework2 - ZF2：如何设置要忽略的表单元素？

> ID：15714627
> 
> 赞同：5
> 
> 时间：2013-03-30T03:26:00.640
> 
> 标签：zend-framework2, zend-form

不知何故，我无法忽略 Zend Framework 2 中的表单元素。

所有这些似乎都不起作用：

```
$this->add(array(
  'name' => 'submit',
  'ignore' => TRUE,
  'attributes' => array(
    'type'  => 'submit',
    'value' => 'Go!',
    'id' => 'submitbutton',
    'ignore' => TRUE
),
'options' => array(
  'ignore' => TRUE
)
)); 
```

这就是它在 Zend Framework1 *中的工作方式：*

```
//Zend Framework 1
$this->addElement(
  'submit',
  'login',
  array(
   'ignore' => true,
   'label' => 'Login'
    )
); 
```

**编辑：
为什么我需要“忽略”选项？**
假设您的表单有一个提交按钮。使用普通的 PHP，类似的东西`$_POST`也会列出您的提交按钮。Zend 1 具有有用的选项`setIgnore($flag)`并`getIgnore()`排除这些元素。`$form->getValues()`（验证后）将排除标志“忽略”设置为的所有元素`TRUE`。参见[ZF1 手册](http://framework.zend.com/manual/1.12/en/zend.form.elements.html#zend.form.elements.methods)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T13:08:05.803

查看[输入过滤器](http://framework.zend.com/manual/2.0/en/modules/zend.input-filter.intro.html)

我的使用是这样的：

1.  创建您的表单
2.  创建过滤器
3.  在控制器中使用

    ```
    $form = new BasicForm();
    $form->setInputFilter(new BasicFilter()); 
    ```

关于过滤器，你可以这样做： $factory = new InputFactory();

```
 $this->add($factory->createInput(array(
        'name' => 'birthday',
        'required' => false,
        'allowEmpty' => true,)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-29T10:39:52.213

```
$form->setValidationGroup('email', 'password');
$form->setData($data);
if ($form->isValid()) {
    // Contains only the "email" and "password" values
    $data = $form->getData();
} 
```

[http://framework.zend.com/manual/2.3/en/modules/zend.form.quick-start.html#validation-groups](http://framework.zend.com/manual/2.3/en/modules/zend.form.quick-start.html#validation-groups)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-12T04:36:43.700

我想你正在寻找

```
'options' => array(
    'exclude' => true,
), 
```

# android - 加载片段时扩展 SupportMapFragment 显示全黑屏

> ID：15714632
> 
> 赞同：1
> 
> 时间：2013-03-30T03:27:08.550
> 
> 标签：android, google-maps, android-fragments

我正在将一个程序转换为使用片段，所以它现在有一个实际的活动，其他一切都是一种或另一种类型的片段。

所以 ErrandMapActivity 的层次结构是：

```
Object -> Fragment -> SupportMapFragment -> MapViewActivity -> ErrandMapActivity 
```

对于 ErrandAssistantFreeMainActivity：

```
Object -> Context -> ContextWrapper -> ContextThemeWrapper -> Activity -> FragmentActivity -> ErrandAssistantMainActivity -> ErrandAssistantFreeMainActivity 
```

所以活动加载了主要的fragmentlayout，然后加载了mapview，我看到了片段中的textview，但地图不可见。

对于 ErrandMapActivity，它是一个 Fragment，它加载这个布局：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:map="http://schemas.android.com/apk/res-auto"
    android:id="@+id/map"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    class="com.jblack.android.errandrouter.activity.ErrandMapActivity"
    android:orientation="vertical"
    map:mapType="normal"
    map:uiCompass="true"
    map:uiRotateGestures="true"
    map:uiScrollGestures="true"
    map:uiTiltGestures="true"
    map:uiZoomControls="true"
    map:uiZoomGestures="true" >

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="TextView" />

</LinearLayout> 
```

在`ErrandMapActivity`我有这个方法：

```
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
    mContext = getActivity().getApplicationContext();
    super.onCreateView(inflater, container, savedInstanceState);
    view = inflater.inflate(R.layout.map_fragment_layout, container,
            false);
    return view;
} 
```

在`MapViewActivity.onResume`我有`mMapView = getMap()`并且我有这些值，以验证 SupportMapFragment 是否实际实例化了一个地图：

```
mMapView = GoogleMap (id=830023276792)
  fQ = IGoogleMapDelegate$a$a (id=830023235664)
     b = ag (id=830023221320)
  fR = null 
```

此应用程序中的一个 Activity 使用此布局，因此会加载此布局，然后实例化地图片段：

```
<?xml version="1.0" encoding="utf-8"?>
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/allFragmentsFrameLayout"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_alignParentTop="true" >

    <fragment
        android:id="@+id/fragment1"
        android:name="com.jblack.android.errandrouter.activity.ErrandMapActivity"
        android:layout_width="match_parent"
        android:layout_height="match_parent" />

</FrameLayout> 
```

所以，我知道我的扩展片段`SupportMapFragment`正在加载，那么为了加载地图可能需要做什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T13:06:36.057

你摆脱了你的地图。

`ErrandMapActivity`覆盖`onCreateView()`并丢弃地图（从超类获得），将其替换为 a`LinearLayout`和 a `TextView`。

你不必那样做。:-)

例如，这可能有效：

```
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
    // one seriously hopes that you never use mContext = getActivity().getApplicationContext();
    view = inflater.inflate(R.layout.map_fragment_layout, container,
            false);

    View whatYourParentGaveYou=super.onCreateView(inflater, view, savedInstanceState);

    view.addView(whatYourParentGaveYou, /* insert valid LinearLayout.LayoutParams here */

    return view;
} 
```

很可能会忽略 上的所有这些`map`属性`LinearLayout`，因此请通过 Java 代码进行设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-21T06:15:50.883

我想通了，因为它是显示的活动的黑色背景。白色背景的用户自定义主题或任何默认的白色。防爆

@dimen/actionbar_height @android:color/white

并将其设置为清单中的活动。请记住，如果您使用任何对话，此白色背景会影响背景。

# android - Android WebView 缩放字体大小

> ID：15714634
> 
> 赞同：1
> 
> 时间：2013-03-30T03:27:35.677
> 
> 标签：android, android-webview, font-size

在我的应用程序中，我有一个定义为“18sp”的字体尺寸。此字体大小用于 TextView（作为标题）和 WebView（作为正文）。在 mdpi 设备上，两种字体看起来大小相同；但是在 nexus 10 (xhdpi) 上，TextView 看起来正确，而 WebView 大小翻了一番。我正在使用 webview 设置文本大小

```
int fontSize = res.getDimensionPixelSize(R.dimen.textSize); 
```

然后在正文中使用 css 设置字体：

```
<body style='font-size: " + fontSize + "px'> 
```

很明显为什么文本大小加倍 - xhdpi 设备上的 18sp 变为 36px - 但我很困惑为什么这是由 TextView 而不是由 WebView 自动处理的。我可以想到几种方法来处理这个问题，但我不知道哪种（如果有的话）是正确的方法：

*   mdpi 与 xhdpi 设备的单独字体大小
*   将 WebView 的默认缩放设置为 100 / displayMetrics.scaledDensity
*   将字体大小设为绝对整数（例如 18sp 等于 18）并将字体大小设置为该数字。

有任何想法吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-03T08:42:16.060

您可以使用 JavaScript 代码更改字体大小、背景颜色和字体颜色的 WebView 样式。它正在工作。

```
loadUrl("javascript:(document.body.style.fontSize ='11pt');");
loadUrl("javascript:(document.body.style.backgroundColor ='red');");
loadUrl("javascript:(document.body.style.color ='yellow');"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T03:59:11.917

在 webview 中设置这样的字体大小

```
WebSettings settings = webview.getSettings();
settings.setDefaultFontSize(10); 
```

# windows - windows cmd批处理文件计算

> ID：15714636
> 
> 赞同：1
> 
> 时间：2013-03-30T03:27:52.007
> 
> 标签：windows, batch-file

下面代码的输出只是重复“不平衡括号”x100。如果我取出括号并留下 %%i%5 它只是循环数字 1-100 而没有 mod。如果我让它加或减，它工作正常。为什么它找不到mod，特别是？

```
 :MAIN
     setlocal EnableDelayedExpansion
     set result=0
     for /L %%i in (1,1,100) do (
     set /a result= (%%i%5)
     echo !result!
     )
     endlocal 
```

我还有一些我似乎找不到的问题的代码。如果输入非零数字，它工作得很好。

```
@echo off

:MAIN
set /p number1= "Enter 1st number:”
if %number1%== "9" goto second_num

:second_num
set /p number2= “Enter 2nd number:”
if %number2%== “0” goto error
if %number2%== "9" goto division

:division
set /a result= (%number1%/%number2%)
echo %result%
pause
exit

:error
echo "Error. Cannot divide by 0\. Start over."
goto MAIN 
```

但是如果第二个数字是 0，它的输出是：

```
Divide by zero error.
ECHO is off.
Press any key to continue... 
```

当我按下一个键时，程序结束而不是去：错误。我意识到 if 语句存在问题。为什么它说 ECHO 已关闭？有人可以指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-30T04:01:13.610

```
 set /a result= (%%i%5) 
```

is your problem. The closing parenthesis is seen by the FOR as *its* closing parenthesis, so the SET has unbalanced parentheses.

Change the `)` in the `SET` to `^)` - the caret (`^`) escapes the `)` telling the processor that it's part of the `set`, not of the `for`

While you're at it, the `%5` should be `%%5` becaue bizarrely, `%` escapes `%`, not `^` and the processor needs to be told that the `%` isn't part of `%5` - the fifth parameter to the batchfile.

The next problem is caused by not understanding that an environment variable is **ALWAYS** a string. The only time quotes are needed is when it may contain certain characters like SPACES. The statement `if %var%==7` is comparing the string `contents of var` with the string `7`, hence your statements are comparing `the contents of the variable` with `"9"` (or whatever). These are **NEVER** going to be equal. Now - `"%number2%"` may be equal, as both of the actual STRINGS may be equal.

If `ECHO` has nothing as its "argument" then it reports its state, that is either ON or OFF. SInce `RESULT` was not SET because of the error attempting to divide by 0, the statement boils down to `ECHO` so the echo state is duly reported.

The cure is to try `ECHO.` - the dot gives `ECHO` something to chew on and ot'll produce a blank line since %result% is set to [nothing]

# sql - 为什么这些 SQL 语句中只有一个有效？

> ID：15714641
> 
> 赞同：0
> 
> 时间：2013-03-30T03:28:53.267
> 
> 标签：sql, oracle, select

为什么第一个 SQL 语句不执行，而第二个执行？

1.

```
select e.employee_id, e.last_name, e.salary as "SALARY"
from employees e
where employees.salary > (select avg(salary) from employees) 
order by SALARY; 
```

2.

```
select e.employee_id, e.last_name, e.salary as "SALARY"
from employees e
where e.salary > (select avg(salary) from employees) 
order by SALARY; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-30T03:30:21.460

因为您已经为表名*定义了别名*`employee`。

因此，在`WHERE`子句中，您需要*使用别名*，而不是表名，因为它不再有效。

```
SELECT e.employee_id, e.last_name, e.salary as "SALARY" 
FROM   employees e 
WHERE  e.salary > (select avg(salary) from employees) 
    -- ^ ALIAS should be used, not the tableName
ORDER  BY SALARY; 
```

这可能有点*离题，*但这是一个附加信息。

SQL操作的顺序如下：

*   FROM 子句
*   WHERE 子句
*   GROUP BY 子句
*   HAVING 子句
*   选择子句
*   ORDER BY 子句

由于您在子句中为表名提供了别名，`FROM`因此按照操作顺序的任何内容*现在都指的是给定的别名，*而不是表名本身。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T03:54:14.517

为了使第一个工作，用员工替换所有出现的“e”并删除“e”别名：

```
select employees.employee_id, employees.last_name, employees.salary as "SALARY"
from employees 
where employees.salary > (select avg(salary) from employees) 
order by SALARY; 
```

# php - 如何打印显示在字符串中的 $GLOBALS？

> ID：15714642
> 
> 赞同：1
> 
> 时间：2013-03-30T03:29:13.543
> 
> 标签：php

如何打印显示在字符串中的 $GLOBALS？
下面是一个非常简单的演示，有时我需要打印复杂页面的 $GLOBALS，并且 vars 中有很多 html 代码，它们显示为 html，我只希望它们是字符串，该怎么做？

```
<pre>
<?php

$html='<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>';
print_r($GLOBALS); 
```

![在此处输入图像描述](../Images/07e497e35b54842f5a966a9f5003da41.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T03:31:59.323

采用`echo htmlentities(print_r($GLOBALS, true));`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T03:34:05.283

如果您`$GLOBALS`包含 html 链接，那么您需要删除`HTML`如下标签，

```
echo "<pre>".strip_tags(print_r($GLOBALS))."</pre>"; 
```

**或者**

```
echo "<pre>".print_r(strip_tags($GLOBALS))."</pre>"; 
```

# python - 减去 float: 128.0 和 int: 128 会导致 -5.6834188608e-14？

> ID：15714644
> 
> 赞同：1
> 
> 时间：2013-03-30T03:29:38.757
> 
> 标签：python

对python还是新手，所以这对我来说很奇怪......

```
def getNormalizedStart(self):
        # center is Point: {X = 300, Y = 128}
        center = self.getTargetCenterFromStart()

        # effectiveStart is Point: {X=300.0,Y=472}
        effectiveStart = self.getFirstActiveTouchEventLocations()[0]["Point"]\
            if self.isTouchTrial() else self.getFirstMouseEventLocation()

        radians = float(MathUtils.angle(effectiveStart, center, True))

        # Point: {X=-44.0,Y=128.0}
        newStart = MathUtils.rotatePoint(effectiveStart, center, -radians)

        # newStart.X is float: -44
        # center.X is int: 300
        newStart.X -= center.X    # the result is -344\. Good!

        # newStart.Y is float: 128.0
        # center.Y is int: 128
        newStart.Y -= center.Y    # the result is -5.68434188608e-14\. Wut?
        return newStart 
```

但它适用于控制台：

```
>>> x = 128.0
>>> y = 128
>>> x -= y
>>> x
0.0 
```

我是疯了还是我错过了一些明显的东西？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-30T03:32:54.400

计算机中浮点运算的问题在于，一般来说，您无法获得准确的值。那是因为不可能用小数精确地表示一个数字，而且一个简单的操作`128.0 - 128`可能会导致非常小的错误。

像往常一样，解释这一点的强制性阅读是[每个计算机科学家都应该知道的关于浮点运算的知识](http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html)。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-30T03:43:31.267

我敢打赌你的 128.0 实际上不是 128。

例如：

```
>>> print x
128.0
>>> print x-128
5.68434188608e-14 
```

但我在这里作弊：`x`实际上是

```
>>> x
128.00000000000006 
```

`str()`和之间有区别`repr()`：

```
>>> str(x)
'128.0'
>>> repr(x)
'128.00000000000006' 
```

我通过`numpy.nextafter`计算 128 以上的两个微小增量来制作这个对象：

```
>>> numpy.nextafter(numpy.nextafter(128, 129),129)
128.00000000000006 
```

要确认这一点，您应该检查`repr(newStart.Y)`和`newStart.Y > 128`，同样检查`center.Y`，看看它们实际上是什么。

[编辑：你的差异是负数，所以它可能略小于 128 而不是略多一点，但你明白了。]

# facebook - Facebook：meta og：图像不起作用

> ID：15714645
> 
> 赞同：11
> 
> 时间：2013-03-30T03:29:46.187
> 
> 标签：facebook

我将这个元用于我的网站

```
<meta property="og:image" content="http://tongkienphi.com/public/uploads/2013/3/702594ed31541de6fc7ab4ba488bc14f_thumb.jpg"/> 
```

但是，当我发布一个到 facebook 的链接时，它没有检测到该图像，它总是检测到横幅图像:(

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-03-30T09:48:02.517

在添加元数据之前，检查 facebook 是否已经缓存了标题图像。

将您的 URL 放入此站点，facebook 将帮助您：

[http://developers.facebook.com/tools/debug](http://developers.facebook.com/tools/debug)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-06-27T05:39:42.620

我从有关此线程的许多不同问题中尝试了许多解决方案。没有任何效果。

## 需要报价

如果 og:image 属性在引号之间，Whatsapp Android 只会正确读取它。这可能是一个错误。

我的 index.html 带有双引号，但是当我为生产（npm run build）构建它时，引号被 Minify 模块删除。

为避免引号被删除，只需将 removeAttributeQuotes 属性设置为 false。

```
minify: {
    ...
    removeAttributeQuotes: false,
    ...
} 
```

在我的开发环境中，我将其设置在“webpack.prod.conf.js”文件中。将其设置在等效文件中。

现在，只需重建它并上传到服务器。

问题解决了。只需在头部元 og 属性中使用引号，就会显示共享图像。

# list - Sass - 查找列表的最大值

> ID：15714656
> 
> 赞同：5
> 
> 时间：2013-03-30T03:30:36.220
> 
> 标签：list, sass

看起来这应该很容易。如何使用 sass 从列表中获取最小/最大值？

```
$max-value: max(10, 20, 30); // returns 30

$list: 10, 20, 30;
$max-value: max($list); // Syntax error: (10, 20, 30) is not a number for `max' 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-30T03:40:27.413

我认为这可以满足您的要求：

```
$max-value: max($list...); 
```

# r - 森林图能否呈现按年份排序的子组（Metafor，R）？

> ID：15714658
> 
> 赞同：2
> 
> 时间：2013-03-30T03:30:58.940
> 
> 标签：r

有没有办法让子组按`forest`图上的两个变量排序？我不关心分析（例如混合效应），只关心保留研究年份顺序的亚组数据的呈现。

在创建分成子组的森林图时，每个子组都会丢失其年份顺序。这可以在 dat.bcg[数据](http://www.metafor-project.org/doku.php/plots%3aforest_plot_with_subgroups)的示例森林图中看到。森林命令的相关部分：`order=order(dat.bcg$alloc)`

无论我如何提前组织源数据，一旦按子组排序，我就会丢失年份顺序。我已经尝试完全按照要求对数据进行排序，并使用 rows 命令将其分隔在森林图中（而不是 order 命令）。这仍然会重新排序研究（它们通常以相反的年份顺序结束，如链接示例中所示）。order 命令似乎不允许同时应用两个变量。我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T14:54:32.127

你可以使用这样的东西：

```
 order=order(dat.bcg$alloc,dat.bcg$year) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-07T15:53:51.517

最简单的方法是首先以所需的顺序重新排序原始数据集。例如，在链接的示例中，首先使用：

```
dat.bcg <- dat.bcg[order(dat.bcg$alloc, 5000-dat.bcg$year),] 
```

使用`5000-dat.bcg$year`，我们可以按降序排列`year`（可能有更优雅的方法）。这甚至应该在调用`rma()`. 现在可以运行该示例，但忽略`order=order(dat.bcg$alloc)`调用中的部分`forest()`（已通过上面的重新排序处理）。

# iphone - 我的代码在调试与发布/分布式模式下的行为不同 - 我该如何测试？

> ID：15714659
> 
> 赞同：0
> 
> 时间：2013-03-30T03:31:01.307
> 
> 标签：iphone, objective-c, xcode

我有一个应用程序，它在调试模式与分发时的行为不同。

如何安装分布式等效版本并仍然使用 xcode 进行调试？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T04:31:39.190

调试器将为您捕获信号（因此您可以，您知道，调试它们）。如果您在未附加调试器的设备上运行相同的代码，则在引发异常或引发信号时您将看到相同的行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T05:08:43.033

这种不同的“行为”在过去已经看到过。由“优化级别”设置给出。Debug 版本设置为 None [-O0]，而 Release 版本设置为 Fastest, Smallest [-Os]。

所以...在调试模式下设置相同（最快...）

当发布到应用商店时，您还可以检查此 [iPhone App 浮点计算。](https://stackoverflow.com/questions/14210621/iphone-app-floating-point-calculations-when-released-to-the-app-store)

# php - PHP，停止访问文件

> ID：15714664
> 
> 赞同：0
> 
> 时间：2013-03-30T03:31:29.223
> 
> 标签：php, .htaccess, directory

所以我有许多用于存储数据的 .txt 和 .xml 文件，无论如何我可以让它们存储数据，但用户无法在 Web 浏览器中打开它们？

我在想他们可能是一种使用 .htaccess 来做到这一点的方法，但到目前为止，在对此事进行研究时还没有找到任何答案

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T03:35:26.180

将它们存储在文档根目录之外，这样您的 Web 服务器将无法回复对它们的请求。这将比依赖`.htaccess`文件更可靠。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T03:33:52.640

1.  将它们存储在文档根目录之外（推荐）
2.  在您的 Web 根目录中使用以下 htaccess

.

```
<Files ~ "\.txt$">
    Order allow,deny
    Deny from all
</Files>
<Files ~ "\.xml$">
    Order allow,deny
    Deny from all
</Files> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-30T03:34:06.643

创建一个 .htaccess 文件并将其放入您的目录并使用：

```
<filesMatch ".(txt|xml)$">
    order deny,allow
    deny from all
    allow from your.ip.xxx.xxx ## add this line if you allow certain users access to your data
</filesMatch> 
```

或者您可以将 .txt/xml 文件移到根目录之外，除非您的脚本需要大量修改，否则我建议这样做，但这是值得的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-30T03:40:52.823

有两种方法可以解决这个问题。如果您的服务器是 Apache，您可以将文件存储到名为“data”的特定文件夹或任何您喜欢的文件夹中，在此文件夹中，您将有一个`.htaccess`文件，其中包含以下单行：`Deny from all`. 就是这样，就像魅力一样。

但是，一旦某些服务器维护可以使 Apache 忽略`.htaccess`文件一段时间，它并不能完全保证 100%，那么您的安全性就没有了。在这种情况下，您可能更愿意将这些文件存储在公用文件夹之外。

托管网站时，通常的做法是有一个类似的组织`/home/mywebsite.com/public_html/`，其中`public_html`子文件夹是世界上实际看到的您的网站结构所在的位置，但`/home/mywebsite.com/`文件夹内的所有内容也属于您可以随心所欲地使用，主要用于存储不应该被公众访问的文件和信息。

该组织还可能对防止敏感`.php`文件（特别是包含密码的文件）被公众直接访问感兴趣，Apache 维护人员可以再次使其停止解释 PHP 文件并改为显示代码。它发生在我身上一次，并不酷。

# c++ - 我的函数应该返回指向 std::vector 的指针还是对 std::vector 的引用？

> ID：15714670
> 
> 赞同：7
> 
> 时间：2013-03-30T03:31:56.277
> 
> 标签：c++, stl, stdvector

我有一个`std::map<int, std::vector<SomeStruct>>`，
并提供一个类似的查询`std::vector<SomeStruct> FindData(int key)`。

为了防止复制整个数据，我将其修改为`std::vector<SomeStruct>& FindData(int key)`.
但是，肯定不会有数据`key`，所以有时我没有什么可以返回的。
在这种情况下，我声明一个为空的文件范围变量`std::vector<SomeStruct>`并返回它。

但是，如果我选择指向向量的指针，`std::vector<SomeStruct>* FindData(int key)`那么我可以只返回`NULL`不存在的`key`.

哪一个更好？
我在问题中了解到指针`std::vector`不好（或奇怪？不确定）（[此指针操作是否有其他语法？](https://stackoverflow.com/questions/15703842/is-there-other-syntax-for-this-pointer-operation/15703927?noredirect=1#comment22312516_15703927)）
而且我个人也喜欢引用`std::vector`，这样我可以`operator[]`更轻松地使用，但缺点是我必须为它声明一个额外的空变量。

代码示例如下：在`SomeClass.h`

```
typedef std::vector<SomeStruct> DataVec;
typedef std::map<int, DataVec> DataMap;
DataMap m_DataMap; 
```

现在在`SomeClass.cpp`：

情况1：

```
namespace
{
    DataVec EmptyVector;
}

DataVec& FindDatas(int key)
{
    DataMap::iterator It = m_DataMap.find(key);

    if (It == m_DataMap.end()) return EmptyVec;

    return It->second;
} 
```

案例二：

```
DataVec* FindDatas(int key)
{
    DataMap::iterator It = m_DataMap.find(key);

    if (It == m_DataMap.end()) return NULL;

    return &(It->second);
} 
```

参考：
优点：看起来很正常`std::vector`。
缺点：声明了附加变量。

指针：
优点：查询功能更短，不需要其他变量。
缺点：看起来很奇怪（？！），你不能开玩笑`p[i]`，你必须这样做`(*p)[i]`，这很烦人。

哪一个更好？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T07:47:41.633

你也可以给输出的引用作为参数，这样你就可以添加一些枚举器或布尔结果作为方法输出：

```
 namespace
    {
        DataVec EmptyVector;
    }

    bool FindDatas(int key, DataVec& output)
    {
        DataMap::iterator It = m_DataMap.find(key);

        if (It == m_DataMap.end()) return false;

        output = It->second;
                    return true;
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T13:19:28.273

这取决于您的设计要求。如果使用没有对应元素的索引调用此函数是一个编程错误，那么代码应该中止。如果是用户错误，它应该抛出异常。如果它是预期用途的一部分，那么您有三种选择，同样取决于您的设计。您可以标记问题，通常通过返回空指针或从获取结果引用的函数返回布尔值。您可以像这样悄悄地返回一个新创建的有效对象`std::set`。您可以返回一个不属于您的容器的哨兵对象，用户在使用返回值之前必须检查这是否是他们得到的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-30T03:34:47.320

如果您不介意为未找到的键创建新条目，则可以使用以下代码：

```
DataVec& FindDatas(int key)
{
    return m_DataMap[key];
} 
```

另一种避免未找到键的新条目的替代方法：

```
DataVec& FindDatas(int key)
{
    DataMap::iterator It = m_DataMap.find(key);    
    if (It == m_DataMap.end()) {
        // created on first unfound key and stays
        // alive until the end of the program
        static DataVec fEmpty; 
        return fEmpty; 
    }    
    return It->second;
} 
```

# java - 如何访问 Java LinkedList 节点的私有字段？

> ID：15714677
> 
> 赞同：0
> 
> 时间：2013-03-30T03:33:20.590
> 
> 标签：java, data-structures, collections, linked-list

我必须实现一个棋盘游戏，它有 17 个位置，它像链表一样“链接”。

所以，我打算为此使用 ArrayList 的 LinkedList。（`LinkedList<ArrayList<String>>`或者……）

但是，它有两个起始位置，在几个节点之后合并，玩家可以选择他们想要从哪个位置开始。（这意味着两个节点的“下一个”字段指向一个节点，一个节点可能（但不是必需的，我猜？）需要两个“prev”字段。）

另外，我想让最后一个位置旁边的附加节点的“下一个”字段指向自身。

简而言之，我想要一个类似于 LinkedList 的集合类，但有一些突变。

我怎么能做到这一点？

我的编程水平是初级~中级，我研究过类似于Java Collections Framework的LinkedList定义（但不记得太多了......），以及使用教科书的c++ std::list。

所以我的问题是这些。

我是否有必要实现一个简单的列表（和节点）类，只创建 18 个节点并以我想要设置的方式设置这些节点的私有字段，并将 ArrayLists 添加到其“数据”字段中？

另外，我打算使用 Stack 的 LinkedList（因为我只需要最新推送的元素），但我觉得如果我只是创建私有 ArrayList 类并根据我的喜好定制它会更有用，以类似于实现 Stack 的方式使用 ArrayList 类。听起来怎么样？

我担心的是我不是一个很好的程序员，如果我自己定义它们，它们可能不可靠，而且工作也可能非常耗时。（它有截止日期）

有没有更好的方法来实现这一点？（比如，也许扩展标准类？？不确定..）

任何建议将不胜感激。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T04:02:11.550

恐怕您对您正在尝试做的事情（即您的要求）的描述太难以理解。所以我将自己限制在一个一般性的答案上。

如果您真的需要能够对类似列表的数据结构进行“手术”，那么您应该从头开始自己实现它/它们。

尝试通过扩展现有的列表/集合类来做到这一点可能会因几个原因而失败（至少）。

*   Some of the stuff that your code needs to tinker with is declared as `private`, and that makes it very difficult (and highly inadvisable) to tinker with it. (It is not impossible, but you'd need to do some nasty reflection tricks and that would make your code complicated, fragile and inefficient. Its is not the sort of thing you should do, unless there is absolutely no other alternative.)

*   Even if you succeeded, you'd have a data structure that nominally implements one or more existing collection interfaces, but (most likely) *breaks the contract* of how that interface is supposed to behave.

* * *

> What I am worried about is that I am not a very good programmer, and if I define them by myself, they can be unreliable, and the job may be very time-consuming too. (it has deadline)

1.  The "point of the exercise" is to learn to be a better programmer ...
2.  IMO, you are likely to spend more time doing the work to avoid the extra work, and the end result would be *less* reliable
3.  Deadlines are a worry, but the best way to deal with them is to start early enough (assuming you can), and try to solve the problem the right way rather than taking risky short-cuts.

Anyway, my advice would be to try to do it the right way.

*   If you fail to meet the deadline, you still have code that looks like a good attempt, and (one would hope) should be marked accordingly.

*   On the other hand, if you try to do this the wrong way, you may get a working program but still be marked down on the basis that you've done it the wrong way. And you may fail, and be marked worse that if you had failed while trying to write the code properly.

# jquery - 使用 JQuery 和 AJAX 制作登录脚本

> ID：15714682
> 
> 赞同：0
> 
> 时间：2013-03-30T03:34:44.333
> 
> 标签：jquery, ajax

所以我有一个我试图通过 AJAX 提交的表单：这就是我设置它来测试我处理登录的 php 脚本的方式。

```
<form  class="login_form" method="post" action="login_ajax.php">
  Email: <input name="email" type="text" /> <br />
  Password: <input name="pass" type="password" /> <br />
  <input type="submit" />
</form> 
```

这似乎有效；正确的凭证会产生良好的回报，具有“成功”属性的 json 对象，不正确的凭证会产生“失败”的 json 对象。

但是当我尝试设置脚本时，没有任何效果。

```
$(document).ready(function() {
    $(".login_form").submit(function () {
       try {
        $.post("login_ajax.php", {'email':this.email.value, 'pass':this.pass.value},
          function (data) {
              alert("Back from AJAX");
          }, 'json');
       alert("Sent to AJAX");
       }
       catch(e) {
        alert(e);
       }
       return false;
   });
}); 
```

我没有收到任何异常，但也没有收到“返回”警报。我只是得到“发送到 AJAX”，然后什么也没有。我对传递给 jQuery.post 的回调函数有什么误解，它永远不会被调用吗？

编辑：我用下面的 .post 行替换了我的 .post 行，它工作正常，成功函数被调用，我得到了我想要的数据。我的印象是这些基本上是等价的。

```
$.ajax("login_ajax.php", 
     {'type':'POST', 
      'data':{'email':this.email.value, 'pass':this.pass.value},
      'error':function(thingy,status,em) {alert("ERROR: "+em);}, 
      'success':function(data, status) {alert(JSON.stringify(data));} 
      }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T03:37:07.550

检查浏览器控制台中的网络选项卡，查看是否发布任何内容并查看服务器的响应，将其发布在这里。

您可能还想使用完整的 $.ajax() 方法并查看它是否适合您，您可以访问“错误”回调，而使用快捷方式 $.post 您没有。

**更新：**试试这个代码，告诉我们你得到了什么：

```
$.ajax({
        "url" : "login_ajax.php",
        "data" : {'email':this.email.value, 'pass':this.pass.value},
        "type" : "POST",
        "dataType" : "json",
        "success" : function(data){
            alert("Back from successful ajax request");
        },
        "error" : function(jqXHR, textStatus, errorThrown){
            alert("Oops, there was an problem: " + errorThrown);
        }

    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T03:41:36.240

您的代码正在运行，您可以查看演示。

### [**演示**](http://jsfiddle.net/JLkyv/2/)

在 DEMO 中，您看不到返回警报，因为`login_ajax.php`文件不存在。

如果它仍然不工作检查 jQuery 加载不是因为在小提琴中 jQuery 将被自动添加。

如果现在仍然工作使用`e.preventDefault();`

**Example**

```
$(".login_form").submit(function (e) {
   e.preventDefault(); 
```

# ruby - 使用枚举器更改 ruby 中的哈希

> ID：15714688
> 
> 赞同：2
> 
> 时间：2013-03-30T03:35:43.747
> 
> 标签：ruby, hash, map, block

这是我的示例程序：

```
what = {:banana=>:fruit, :pear=>:fruit, :sandal=>:fruit, :panda=>:fruit, :apple=>:fruit}

what.map do |w| 
    p "is this right?"
    awesome_print w
    fix = gets
    fix.chop!
    if (fix == "N")
        p "Tell me what it should be"
        correction = gets
        w[1] = correction.chop!.to_sym
    end
    p w
end 
```

我运行它，我得到了这个（包括我的输入）：

```
"is this right?"
[
    [0] :banana,
    [1] :fruit
]
Y
[:banana, :fruit]
"is this right?"
[
    [0] :pear,
    [1] :fruit
]
Y
[:pear, :fruit]
"is this right?"
[
    [0] :sandal,
    [1] :fruit
]
N
"Tell me what it should be"
footwear
[:sandal, :footwear]
"is this right?"
[
    [0] :panda,
    [1] :fruit
]
N
"Tell me what it should be"
animal
[:panda, :animal]
"is this right?"
[
    [0] :apple,
    [1] :fruit
]
Y
[:apple, :fruit]
=> [[:banana, :fruit], [:pear, :fruit], [:sandal, :footwear], [:panda, :animal], [:apple, :fruit]]
>> what
=> {:banana=>:fruit, :pear=>:fruit, :sandal=>:fruit, :panda=>:fruit, :apple=>:fruit} 
```

我的问题是如何更改哈希？当我运行程序时，irb 告诉我每个枚举元素都已处理，但结果并未保存在我的 hash`what`中。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-30T03:38:58.307

如果您想就地改变哈希（如您所愿），只需执行以下操作：

```
my_hash.each do |key,value|       # map would work just as well, but not needed
  my_hash[key] = some_new_value    
end 
```

如果你想创建一个新的哈希，而不改变原来的：

```
new_hash = Hash[ my_hash.map do |key,value|
  [ key, new_value ]
end ] 
```

它的工作方式是[`Enumerable#map`](http://www.ruby-doc.org/core-2.0/Enumerable.html#method-i-map)返回一个数组（在这种情况下是一个由两个元素键/值对组成的数组），并且[`Hash.[]`](http://www.ruby-doc.org/core-2.0/Hash.html#method-c-5B-5D)可以`[ [a,b], [c,d] ]`变成`{ a=>b, c=>d }`.

你所做的——<code>hash.map{ … }——将每个键/值对映射到一个新值并创建一个数组……然后对该数组什么都不做。虽然存在*破坏性* `Array#map!`地改变数组的方法，但没有等同`Hash#map!`于在一个步骤中破坏性地改变散列。

* * *

另请注意，如果您想破坏性地改变 Hash 或引用其他可变对象的任何其他对象，您可以在正常迭代期间破坏性地改变这些对象：

```
# A simple hash with mutable strings as values (not symbols)
h = { a:"zeroth", b:"first", c:"second", d:"third" }

# Mutate each string value
h.each.with_index{ |(char,str),index| str[0..-3] = index.to_s }

p h #=> {:a=>"0th", :b=>"1st", :c=>"2nd", :d=>"3rd"} 
```

但是，由于您在示例代码中使用符号来表示值——并且由于符号**不是**可变的——所以最后的注释并不直接适用于此。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T03:40:15.950

代替：

```
w[1] = correction.chop!.to_sym 
```

尝试直接分配给哈希：

```
what[w[0]] = correction.chop!.to_sym 
```

Ruby is creating that `w` array just to pass you the key and value. Assigning to that array isn't going to change your hash; it's only changing that temporary array.

# c# - 如何阻止 OCR MMORPG Bot 无缘无故地半随机休眠 10, 000 个滴答？

> ID：15714689
> 
> 赞同：3
> 
> 时间：2013-03-30T03:36:11.920
> 
> 标签：c#, multithreading, ocr

我为在线游戏“征服在线”制作了一个 OCR 机器人。

它工作得很好，但是，它工作得非常慢。

我认为 i7 扫描 250、000 像素应该没有问题，尤其是当每个像素执行的指令少于 100 条时。

令人不安的是，机器人每次扫描屏幕大约需要 5 秒，而它应该只需要几毫秒。

我在整个代码中插入了大量的调试语句，包括这个：

```
 public bool searchScreenCoord(Point screenCoord, Bitmap printscreen, List<Point> blacklistedPixels, List<LootableItem> lootableItems,
            List<AttackableMonster> attackableMonsters, ClickTracker ct, bool chkGreens, bool chkBlacks, bool chkLoot)
        {
            Color pixel = printscreen.GetPixel(screenCoord.X, screenCoord.Y);

#if DEBUG_Time
            DateTime pixelStartTime = DateTime.Now;
#endif

            if (chkGreens)
            {
#if DEBUG_Time
                if ((DateTime.Now.Subtract(pixelStartTime).Ticks > 500))
                {
                    File.AppendAllText("C:\\ocr\\stats\\pixelStats.csv", 
                        "green.Checked:" + DateTime.Now.Subtract(pixelStartTime).Ticks.ToString() + "\r\n");
                    pixelStartTime = DateTime.Now;

                }                
#endif 
```

从定义中可以看出，chkGreens 是从 doMonsters 方法/线程传入的布尔值，而不是对 chkGreenMonsters.Checked 的调用，这可能由于访问 GUI 线程而出现问题。我消除了重复的跨线程调用以试图解决我的问题。

我的调试文件包含以下内容：

```
black.Checked   10000
green.Checked   10001
green.Checked   10000
black.Checked   10000
get black word  30001
black.Checked   10001
black.Checked   10001
get black word  10001 
```

出于我想不到的原因，线程在声明日期时间和检查传入的 bool 之间休眠了 10, 000 个滴答声。

但并不是每次调用 searchScreenCoord 时都会发生这种情况。也许每 25 或 50 个电话一次。

我想这可能是一个行为不端的过程，每隔一段时间就需要 10,000 个滴答声来进行时间切片，但这种解释似乎很牵强。

有谁知道为什么这会发生在我身上？

我很感激任何可以消除应用程序正在采取的可怕的 10,000 次小睡的建议。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-30T04:23:55.497

DateTime 返回的值来自系统时钟。它仅在线程第一次放在 cpu 上时更新，因此您会看到它一次跳过 10 毫秒或 15 毫秒的时间，即使您可能会对其进行两次相隔 5 微秒的调用。

相反，使用高性能计数器来测量物理时间的流逝。

```
 [DllImport("kernel32.dll", SetLastError = true)]
    public static extern bool QueryPerformanceCounter(out long lpPerformanceCount);

    [DllImport("kernel32.dll", SetLastError = true)]
    public static extern bool QueryPerformanceFrequency(out long frequency); 
```

调用一次 QPF 以计算 QPC 每秒变化的速度。

```
time1 = QPC
-stuff-
time2 = QPC
passedTimeSeconds = (time2 - time1) / QPF 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T03:43:31.033

GetPixel 是一种访问像素数据的非常慢的方法。

有关如何处理大块像素数据的信息，请参阅此 SO 条目：

[在 C# 中快速使用位图](https://stackoverflow.com/questions/1563038/fast-work-with-bitmaps-in-c-sharp)

# c - 使用 shell 在 C _without_ 中运行程序

> ID：15714690
> 
> 赞同：0
> 
> 时间：2013-03-30T03:36:30.810
> 
> 标签：c, exec, fork

我正在尝试在 C 中运行应用程序，但我能找到的唯一方法是相当容易使用，如下所示：

```
system("command here"); 
```

当然，它有效，但它真的很慢（尤其是在重复很多时）。我只是想知道是否有一种*无需*与 shell 交互就可以运行程序的方法，例如[python 的 subprocess 模块](http://docs.python.org/2/library/subprocess.html#using-the-subprocess-module)。

我听说过[`execl`](http://linux.die.net/man/3/exec)，我会使用它（[`fork`](http://linux.die.net/man/3/fork)当然，首先使用它），但我想知道是否有一种更简单的方法不需要先分叉。

**编辑**：我也希望能够知道程序的返回码

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T04:56:45.837

我相信您已经知道，`system`已经采用了该`fork/exec`策略。我了解您想要绕过 shell 并正在寻找一种简单的方法，我只是说您可以像`fork/exec`在`system`. 事实上，这样做可能是最直接的。Gabe 在评论中提到的另一种选择是`posix_spawn`.

一个更快（但显然不鼓励）的替代方法是[`vfork()`](http://man7.org/linux/man-pages/man2/vfork.2.html)/ `exec`，但这通常不鼓励并且在最新的 POSIX 标准中已过时。

> 4.3BSD；POSIX.1-2001（但标记为 OBSOLETE）。POSIX.1-2008 删除了 vfork() 的规范。

它意味着***紧跟***在`exec`or之后`_exit`。否则，由于虚拟内存页面和页表没有重复（子使用相同的数据/堆/堆栈段），可能会出现各种奇怪的错误。父/调用进程阻塞，直到子`exec`s 或`_exit`s。Regular`fork`的现代实现具有接近 的速度的写时复制语义，而没有由的内存共享语义`vfork`引起的潜在错误。`vfork`

如果您想*进一步*控制内存共享语义和进程继承，以及随之而来的潜在加速（并且在 Linux 上），请查看[`clone()`](http://man7.org/linux/man-pages/man2/clone.2.html)(wrapper for system-call `sys_clone()`)，这是一些创建进程的系统调用委托他们的工作到。请务必仔细梳理所有各种标志。

可以[`waitpid`](http://man7.org/linux/man-pages/man2/wait.2.html)用来获取进程的退出状态。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T05:13:40.287

如果既不[`system()`](http://pubs.opengroup.org/onlinepubs/9699919799/functions/system.html)也不[`popen()`](http://pubs.opengroup.org/onlinepubs/9699919799/functions/popen.html)提供您需要的机制，那么*简单*的方法是使用[`fork()`](http://pubs.opengroup.org/onlinepubs/9699919799/functions/fork.html)and [`execv()`](http://pubs.opengroup.org/onlinepubs/9699919799/functions/execv.html)（或者，也许，，`execl()`但参数列表必须在编译时固定，而不是变量，才能使用它）。真的！做`fork()`和并不难`exec()`，任何替代方法都将封装该处理。

The Python subprocess module is simply hiding `fork()` and `exec()` for you behind a convenient interface. That's probably appropriate for a high-level language like Python. C is a lower-level language and doesn't really need the complexity.

The hard way to do it is with [`posix_spawn()`](http://pubs.opengroup.org/onlinepubs/9699919799/functions/posix_spawn.html). You have to create arguments to describe all the actions you want done in the child between the `fork()` and the `exec()`, which is far harder to set up than it is to simply do the `fork()`, make the changes, and then use `exec()` after all. This (`posix_spawn()`) is what you get when you design the code to spawn a child process without visibly using `fork()` and `exec()` and ensure that it can handle almost any reasonable circumstance.

You'll need to consider whether you need to use [`wait()`](http://pubs.opengroup.org/onlinepubs/9699919799/functions/wait.html) or [`waitpid()`](http://pubs.opengroup.org/onlinepubs/9699919799/functions/waitpid.html) or a variant to determine when the child is complete. You may need to consider whether to handle the SIGCHLD signal (which will notify you when a child dies).

# php - 任何工作的 php 调试器，PDT？

> ID：15714691
> 
> 赞同：3
> 
> 时间：2013-03-30T03:36:40.420
> 
> 标签：php, eclipse, netbeans, phpstorm

老实说，我厌倦了搜索和尝试各种 php 调试器和 IDE，从 netbeans 到 jetbrains PHP Storm、Eclipse indigo、WAMP、（旧的 zend 服务器社区版）等！我需要一套 IED 和调试器，这样我就可以开始开发我的工作了！（顺便说一下，我想在 Windows 中开发 php 脚本）问题：

*   [php 风暴：奇怪的 IDE](http://www.jetbrains.com/phpstorm/download/) ]
*   [适用于 Visual Studio 的 PHP 工具：它说它是免费的，但你可以免费试用 30 天](http://visualstudiogallery.msdn.microsoft.com/6eb51f05-ef01-4513-ac83-4c5f50c95fb5)
*   [PDT Eclipse：太旧，没有更新，链接断开。使用 Zend 本身令人毛骨悚然](http://www.eclipse.org/pdt/downloads/)
*   [Netbeans 7.3，仍然不容易使用。这么多设置 Xdebug 不起作用](http://netbeans.org/features/php/)

我需要类似 Eclipse Juno 的 PHP 开发工具，有什么建议吗？

你们使用什么IDE（netbeans，phpstorm，Eclipse，Visual stodio）+（Zned server，XDebug）组合？我真的厌倦了这种产品彼此不兼容。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-30T11:46:16.873

我真的会再试一次 PhpStorm。确实，这需要一些时间来适应，但它提供了许多其他 IDE 中难以找到的功能

关于调试和测试，请阅读以下有关调试的演练：

[http://confluence.jetbrains.com/display/PhpStorm/Zero-configuration+Web+Application+Debugging+with+Xdebug+and+PhpStorm](http://confluence.jetbrains.com/display/PhpStorm/Zero-configuration+Web+Application+Debugging+with+Xdebug+and+PhpStorm)

和单元测试：

[http://confluence.jetbrains.com/display/PhpStorm/PHPUnit+Installation+via+Composer+in+PhpStorm](http://confluence.jetbrains.com/display/PhpStorm/PHPUnit+Installation+via+Composer+in+PhpStorm)

## 简单的文本编辑器

除了合适的 IDE 之外，我总是有一个“常规”文本编辑器“在旁边”，例如有一个快速的“草稿”文件来写下一些笔记，或者在文件中进行微小的更改而无需打开你的整个项目。

有很多不错的编辑器，[Sublime Text](http://www.sublimetext.com/)、[NotePad++](http://notepad-plus-plus.org/)和[UltraEdit](http://www.ultraedit.com/)就是一些例子。

## 测试和开发环境

尽管使用 WAMP/XAMP 设置起来很方便，但它**并不是**测试项目的最佳环境。大多数 PHP 网站将托管在 Linux/Using 环境中，这在许多方面与 Windows 环境有很大**不同，其中一些是：**

*   Linux/Unix 文件系统*区分大小写*，而 Windows 不区分大小写
*   Linux/Unix 使用*斜杠* `/`作为目录分隔符，Windows 使用*反斜杠* `\`
*   PHP 的某些部分依赖于操作系统提供的功能。因此 PHP 在 Windows 上会产生与在 Linux/Unix 上不同的结果
*   Linux/Unix 使用不同的权限系统

如果您在 WAMP 上开发和测试您的网站，当您尝试在实际托管环境中部署网站时**会遇到不受欢迎的意外。****有些问题甚至可能不会立即出现**，甚至会更糟（客户在假期中打电话告诉您“刷新缓存”管理面板不仅刷新了缓存，还刷新了所有上传的内容）

因此，为了正确开发和测试您的网站，您的开发环境**应尽可能匹配目标托管*环境***

告知您的托管服务提供商他们的环境是什么样的；他们使用的是什么 Linux 发行版？（CentOS？Ubuntu？）什么版本的 PHP、Apache、MySQL？

根据此设置您的测试环境。通过设置开发服务器并在其上安装 Linux，或者在您的工作站上运行虚拟机，例如 VMWare 或 Parallels Desktop（虚拟机可能会为您节省一些时间，因为许多预安装、准备好使用的 LAMP 磁盘 -图像存在）

## 客户端测试

最好确保您有一些计算机或虚拟机对您的目标受众进行了**全新安装**（Windows XP、Vista？等），有时全新安装会缺少您认为存在的插件/功能，从而导致问题（没有安装 Adob​​e Reader？没有 Flash？旧版本的 Windows Media Player？）

如果您的目标受众是商业用户，请务必在*实际*环境中测试您的网站。想想缓存代理服务器、防火墙、多个 IP 地址、禁用的 JavaScript 和瘦客户端（使用远程桌面）等陷阱。有时，由于公司政策，这些环境仍在使用 Internet Explorer 7（甚至 6）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T03:49:15.557

Dreamweaver 是迄今为止最好的 php 编写工具，颜色代码令人惊叹，自动完成功能是不可替代的。我见过的唯一一个在自动完成领域接近的程序是 zend，它的滞后性无与伦比。加上它内置了 ftp 并且它可以很容易地转移到 javascript (IMO) 就服务器软件而言，我个人最喜欢 WAMP，但每个人都会有自己的偏好

[你可以在这里](http://success.adobe.com/en/na/sem/products/dreamweaver.html?kw=p&sdid=JRSIQ&skwcid=AL!3085!3!23343671683!b!!g!dreamweaver%20cs3&ef_id=USxMOgAAAcHQDAIP:20130330034729%3as)找到dreamweaver（试用版）

Wampp 在[这里](http://www.wampserver.com/en/)（非常可爱的网页）：

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-30T04:19:19.940

对于 PHP，由于动态类型而不是静态类型，我会一直使用 Notepad++。Notepad++ 非常轻巧，不会妨碍您。

你需要什么样的调试？繁重的单元测试和分析或只是 print_r 类型的调试？你试过[http://www.firephp.org/](http://www.firephp.org/)吗？它是 Firebug 的扩展，与 AJAX 配合得非常好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-30T03:42:13.390

我使用 Dreamweaver 和 Xampp，偶尔也使用 Notepad++ 和 Xampp。

如线程中所述，Dreamweaver 具有出色的颜色代码系统并且非常用户友好。我建议它。

*   [xampp](http://www.apachefriends.org/en/xampp.html)

*   [记事本](http://notepad-plus-plus.org/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-30T03:47:17.317

没有 Eclipse juno PDT 。最新的一个是用于靛蓝的，并且不时崩溃。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-30T04:07:40.323

我建议使用 Nusphere php ide，它对 php 来说太棒了，它具有自动完成功能和内置服务器，您可以调试运行时，您还可以设置浏览器 foo 调试您的代码，它是真正的 php 调试器，我正在使用这个调试器自过去 3 年以来，它令人惊叹，它具有内置的 ftp 功能，因此您还可以调试您的 ftp 文件。

这是链接[Nusphere](http://www.nusphere.com/)

# javascript - How to set datas with css style with CKEditor?

> ID：15714695
> 
> 赞同：0
> 
> 时间：2013-03-30T03:37:56.313
> 
> 标签：javascript, ckeditor

How can I set datas with CKEditor (4.0) with CSS style ?

```
$quote = $editor + '<br />'+ 
        '<div class="quote">'+
            '<div class="quote-infos">'+
                '<i class="icon-comment icon-white"></i>'+
                ' <span class="quote-user">'+$user+'</span>,'+
                ' <span class="quote-date">'+$date+'</span> :'+
            '</div>'+
            '<blockquote>'+$div.html()+'</blockquote>'+
        '</div>';   
editorMessage.setData($quote); 
```

In this code, when I send the datas to a POST form, I just have `<div><div><i></i><span`...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T08:35:25.123

If you are using the new 4.1 CKEditor, it might be because of the new [Advanced Content Filter](http://docs.ckeditor.com/#!/guide/dev_advanced_content_filter) feature. It nukes tags, attributes and attribute contents from content HTML, see [demo](http://ckeditor.com/demo#acf). Turn it off by adding `config.allowedContent = true` to your config. More info on configuration in the [API](http://docs.ckeditor.com/#!/api/CKEDITOR.config-cfg-allowedContent)

您可以在 CKE 实例中轻松测试这一点，方法是转到源模式，手动将一些属性添加到内容中，例如`<div class="MagicalPonies"><div><i></i><span`......然后切换到所见即所得模式并返回源模式。如果您的类定义丢失，则很可能是 ACF。也尝试添加一个类`<img alt="X" class="left" src="http://b.cksource.com/a/1/img/sample.jpg" />`，看看是否坚持。像这样的标准 CKE 类不会被删除。

# iphone - Xcode中的单元测试，它运行应用程序吗？

> ID：15714697
> 
> 赞同：47
> 
> 时间：2013-03-30T03:38:14.707
> 
> 标签：iphone, ios, xcode, unit-testing

我遇到了一个我以前没有遇到过的奇怪问题。

当您执行 cmd+U 来运行单元测试（例如 OCUnit）时，它实际上是否调用了 main.m、新建 appDelegate 并运行应用程序，就好像您按下了 cmd+R 一样？

我只问是因为我在这个 DataLayer 后面使用 CoreData。我在测试中成功地模拟了 DataLayer，但是一旦我实现了一个实际调用 CoreData 的 getAll 方法，app/xcode 就会抛出一个关于托管对象模型不能为 nil 的异常。我理解，但我并不是要真正新建 DataLayer 类，我在 mainviewcontroller loadView 方法中设置了一个断点，它调用 DataLayer getAll 方法。与测试无关，因为这是一个模拟对象，但它显然是在调用真实实例。

回到我的问题，当按下 cmd+U 时，它是否也先运行应用程序然后运行测试？

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2013-03-31T01:15:27.440

该应用程序实际上正在运行，但您可以使用一个技巧来阻止它运行。

```
int main(int argc, char* argv[]) {
    int returnValue;

    @autoreleasepool {
        BOOL inTests = (NSClassFromString(@"SenTestCase") != nil
                     || NSClassFromString(@"XCTest") != nil);    

        if (inTests) {
            //use a special empty delegate when we are inside the tests
            returnValue = UIApplicationMain(argc, argv, nil, @"TestsAppDelegate");
        }
        else {
            //use the normal delegate 
            returnValue = UIApplicationMain(argc, argv, nil, @"AppDelegate");
        }
    }

    return returnValue;
} 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2013-12-14T20:42:43.917

这是使用 XCTest 的 Sulthan 答案的变体，这是 XCode 5 生成的测试类的默认设置。

```
 int main(int argc, char * argv[])
{
    @autoreleasepool {
        BOOL runningTests = NSClassFromString(@"XCTestCase") != nil;
        if(!runningTests)
        {
            return UIApplicationMain(argc, argv, nil, NSStringFromClass([AppDelegate class]));
        }
        else
        {
            return UIApplicationMain(argc, argv, nil, @"TestAppDelegate");
        }
    }
} 
```

这进入 main.m，它应该在标准项目布局中的*Supporting Files下。*

然后在您的测试目录中添加：

**TestAppDelegate.h**

```
 #import <Foundation/Foundation.h>

@interface TestAppDelegate : NSObject<UIApplicationDelegate>
@end 
```

**TestAppDelegate.m**

```
 #import "TestAppDelegate.h"

@implementation TestAppDelegate
@end 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2015-12-20T17:19:42.377

在 Swift 中，我更喜欢绕过内部的正常执行路径`application: didFinishLaunchingWithOptions`：

```
func application(application: UIApplication, didFinishLaunchingWithOptions launchOptions: [NSObject: AnyObject]?) -> Bool {
    guard normalExecutionPath() else {
        window = nil
        return false
    }

    // regular setup

    return true
}

private func normalExecutionPath() -> Bool {
    return NSClassFromString("XCTestCase") == nil
} 
```

里面的代码`guard`将删除从情节提要创建的任何视图。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2015-06-26T10:38:51.437

如果您使用的是 Swift（您可能没有`main.c`），则必须执行以下步骤：

`@UIApplicationMain`1 ：删除`AppDelegate.swift`

2：创建一个空`TestingAppDelegate.swift`

```
import UIKit
class TestingAppDelegate: UIResponder, UIApplicationDelegate {
    var window: UIWindow?
} 
```

3：创建一个名为`main.swift`：

```
import Foundation
import UIKit

let isRunningTests = NSClassFromString("XCTestCase") != nil

if isRunningTests {
   UIApplicationMain(C_ARGC, C_ARGV, nil, NSStringFromClass(TestingAppDelegate))
} else {
   UIApplicationMain(C_ARGC, C_ARGV, nil, NSStringFromClass(AppDelegate))
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-04-21T07:41:38.660

我找到了另一个解决问题的方法：

```
int main(int argc, char * argv[])
{
    @autoreleasepool {
        return UIApplicationMain(argc, argv, nil, ({
            ![NSProcessInfo processInfo].environment[@"XCTestConfigurationFilePath"] ?
            @"AppDelegate" :
            nil;                
        }));
    }
} 
```

从这里：http: [//qualitycoding.org/app-delegate-for-tests/#comment-63984](http://qualitycoding.org/app-delegate-for-tests/#comment-63984)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-30T20:23:54.577

是的，您的测试目标将对应用目标具有目标依赖关系，因此当您按 Cmd+U 或 Cmd+Shift+U 时，将构建应用目标。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-05-25T09:40:25.480

**使用 xCode 7 和 xCtool**

**xctool**能够在不运行应用程序的情况下执行单元测试。

为了让这个工作，

**1\. 更新目标设置以在没有主机应用程序的情况下运行。**

选择您的项目 --> 然后测试目标 --> 将宿主应用程序设置为无。

[![在此处输入图像描述](../Images/24949b1c4829bc44a9ef944fc22dc994.png)](https://i.stack.imgur.com/s8I5V.png)

**2\. 安装 xctool ，如果你没有的话。**

```
brew install xctool 
```

**3\. 使用带有 xctool 的终端运行测试。**

```
xctool -workspace yourWorkspace.xcworkspace -scheme yourScheme run-tests -sdk iphonesimulator 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2017-02-06T10:07:40.000

上面的优秀[答案](https://stackoverflow.com/a/15725328/2547229)建议在运行时动态更改应用程序委托。

我做的小修改是通过查询来[检测单元测试运行](https://stackoverflow.com/a/21140663/2547229)`NSProcessInfo`。好处是你不需要有一个可以检测到的类来查看单元测试是否正在运行。

```
 int main(int argc, char * argv[])
    {
        // Put your App delegate class here.
        const Class appDelegateClass = [ATAppDelegate class];

        NSDictionary *const environmentDictionary =
        [[NSProcessInfo processInfo] environment];

        const BOOL runningUnitTests =
        environmentDictionary[@"XCInjectBundleInto"] != nil;

        NSString *delegateName = 
        runningUnitTests ? nil : NSStringFromClass(appDelegateClass);

        @autoreleasepool {
            return UIApplicationMain(argc, argv, nil, delegateName);
        }
    } 
```

`@"XCInjectBundleInto"`in 属性是单元测试包的`environmentDictionary`路径，由 Xcode 设置。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-01-26T10:52:09.223

我使用 Tomasz Bak 的方法加上一些 dwb 答案的代码并提出以下内容：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{

    BOOL runningTests = NSClassFromString(@"XCTestCase") != nil;
    if (runningTests) {
        self.window.rootViewController = [UIViewController new];
        return true;
    }

    // Your normal code below this
    ....
} 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-05-23T23:49:07.353

您可以通过在测试目标中将主机应用程序设置为无来做到这一点。

[![在此处输入图像描述](../Images/71b8934bd1e00b6b475fa9b247b01114.png)](https://i.stack.imgur.com/NCLin.png)

# java - 如何使用 Android 异步 Http 客户端从 php 服务器获取 JSON 数组

> ID：15714699
> 
> 赞同：0
> 
> 时间：2013-03-30T03:38:33.993
> 
> 标签：java, php, json

我试图从服务器获取 json 数据。

我测试了 php 文件，它工作正常。（我可以用chrome看到json类型的数据）

这是我的代码

提前致谢，

```
//php
$result = mysql_query($sql, $connect);
if($result) {
    $rows = array();
    while($r = mysql_fetch_assoc($result)) {
        $rows[] = $r;
    }

    echo json_encode($rows);
}
else{
    echo false;
}
mysql_close($connect); 
```

这是java

```
public static JSONArray post(String url, RequestParams params) {
    client.post(getAbsoluteUrl(url), params, new JsonHttpResponseHandler(){
    @Override
    public void onSuccess(JSONArray data) {
            // TODO Auto-generated method stub
              HTTPRESPONSE = data;
              Log.v("OWL", "GOT JSON FROM php");
        }
    });
    return HTTPRESPONSE;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T03:42:56.683

client.post 调用似乎是异步的，因此“返回 HTTPRESPONSE”将在数据返回和设置之前发生。

您应该为主 post 函数提供一个回调函数或接口，并在 onSuccess 调用中调用它。

# php - sendToURL 不发送到 URL

> ID：15714705
> 
> 赞同：0
> 
> 时间：2013-03-30T03:39:44.120
> 
> 标签：php, actionscript-3, apache, http

我按照 meta.stackoverflow 中的建议编辑了问题，以提高问题的质量以便更好地理解:))

我正在使用 phpbb 3，刚刚下载了一个名为 Proxy Revealer 的 MOD，它主要用于检测和禁止 IP 地址，以下附加代码是 MOD 的一部分，正如您所见，ActionScript 使用 sendToURL 方法将 flash 变量传递给 PHP 端它使用 _GET 方法获取值，但问题是这些值始终为 NULL，我使用 burpsuite 进行了一些研究，并在客户端的标头请求中看到了这些值，但从未在 URL 栏中执行，甚至没有披露这就是它们来的原因作为 NULL

*   URL = example.com/index.php
*   请求头 = index.php?value=3424124&another=32412342

如何在 PHP 变量中获取这些值，感谢您花时间阅读我的消息并祝您有美好的一天 :))

```
import flash.display.LoaderInfo;
import flash.errors.*;
import flash.events.*;
import flash.net.sendToURL;
import flash.net.URLRequest;
import flash.net.XMLSocket;
import flash.system.Capabilities;
import flash.system.Security;
import flash.xml.*;

// Retrieve passed FlashVars
var dhost:String = root.loaderInfo.parameters.dhost;
var dport:Number = root.loaderInfo.parameters.dport;
var flash_url:String = root.loaderInfo.parameters.flash_url;
var ip:String = root.loaderInfo.parameters.ip;
var extra:String = root.loaderInfo.parameters.extra;
var user_agent:String = root.loaderInfo.parameters.user_agent;

// Retrieve policy file from our XMLSocket server to allow socket connections
Security.loadPolicyFile("xmlsocket://" + dhost + ":" + dport);

// Get Flash Player version
var version:String = Capabilities.version;

// Our probe.php URL and the query string concatenated
var myURL:String = flash_url + "?mode=flash&ip=" + ip + "&extra=" + extra;
myURL += "&version=" + escape(version) + "&user_agent=" + escape(user_agent);

// Socket connection code
var sock:XMLSocket = new XMLSocket();

sock.addEventListener(Event.CONNECT, connectHandler);
sock.addEventListener(DataEvent.DATA, dataHandler);

sock.connect(dhost,dport);

function connectHandler(event:Event):void {
    var xmlRequest:String = "<data><request>getmyip</request></data>";
    sock.send(new XML(xmlRequest));
}

function dataHandler(event:DataEvent):void {
    var myXML:XML = new XML(event.data);
    var myIP:String = myXML.ip[0];
    myURL += "&xml_ip=" + myIP;
    var request:URLRequest = new URLRequest(myURL);
    sendToURL(request);
    sock.close();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T03:47:35.963

你看过[http://php.net/manual/en/function.getallheaders.php](http://php.net/manual/en/function.getallheaders.php)吗？似乎只适用于一些 Apache 设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T03:51:46.940

试试这个代码

```
if(function_exists('headers_list')){
    $header = "Headers: ";
    foreach (headers_list() as $name => $value) {
        $header .= "$value ";
    }
} 
```

或尝试

```
$headers = apache_request_headers();
foreach ($headers as $header => $value) {
    echo "$header: $value <br />\n";
} 
```

# php - nginx 重写为 php 文件 - 正在下载文件

> ID：15714706
> 
> 赞同：2
> 
> 时间：2013-03-30T03:39:56.140
> 
> 标签：php, nginx, rewrite

首先，请原谅我，因为我对 nginx 完全陌生。

单个站点，在根目录中运行 Wordpress，在子目录中运行各种其他应用程序。据我所知，Wordpress 永久链接/重写工作得很好。

**问题：**所有 php 文件在直接浏览时都能正常工作。但是，当访问 /apply/ 时，文件会被下载和/或在浏览器中显示为纯文本。如果我直接浏览到 /forums/apply.php，它可以正常工作。

此站点的 nginx 配置：

```
server_name site;
root /var/www/site;
index index.php index.html index.htm;

location /apply {
  rewrite ^/apply/ /forums/apply.php break;
}

location / {
  if (!-e $request_filename) {
    rewrite ^(.*)$ /index.php last;
    break;
  }
}

location ~ \.php {
    # for security reasons the next line is highly encouraged
    try_files $uri /index.php =404;

    fastcgi_param  QUERY_STRING       $query_string;
    fastcgi_param  REQUEST_METHOD     $request_method;
    fastcgi_param  CONTENT_TYPE       $content_type;
    fastcgi_param  CONTENT_LENGTH     $content_length;

    fastcgi_param  SCRIPT_NAME        $fastcgi_script_name;

    # if the next line in yours still contains $document_root
    # consider switching to $request_filename provides
    # better support for directives such as alias
    fastcgi_param  SCRIPT_FILENAME    $request_filename;

    fastcgi_param  REQUEST_URI        $request_uri;
    fastcgi_param  DOCUMENT_URI       $document_uri;
    fastcgi_param  DOCUMENT_ROOT      $document_root;
    fastcgi_param  SERVER_PROTOCOL    $server_protocol;

    fastcgi_param  GATEWAY_INTERFACE  CGI/1.1;
    fastcgi_param  SERVER_SOFTWARE    nginx;

    fastcgi_param  REMOTE_ADDR        $remote_addr;
    fastcgi_param  REMOTE_PORT        $remote_port;
    fastcgi_param  SERVER_ADDR        $server_addr;
    fastcgi_param  SERVER_PORT        $server_port;
    fastcgi_param  SERVER_NAME        $server_name;

    # If using a unix socket...
    # fastcgi_pass unix:/tmp/php5-fpm.sock;

    # If using a TCP connection...
    fastcgi_pass 127.0.0.1:9000;
} 
```

非常感谢任何和所有建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-30T05:04:36.633

改变

```
rewrite ^/apply/ /forums/apply.php break; 
```

至

```
rewrite ^/apply/ /forums/apply.php last; 
```

# python - 为什么使用 PIL 保存为 pdf 会在字体周围创建一个灰色区域

> ID：15714707
> 
> 赞同：2
> 
> 时间：2013-03-30T03:40:03.720
> 
> 标签：python, pdf, png, python-imaging-library

我想将 pdf 文件转换为 png 以在 Python 中操作，并将其另存为 pdf，但在此过程中，字体周围会创建一个灰色区域（我的图像是一个简单的黑白类型文档）。它非常微弱，在屏幕上有点难以看到，但打印出来后就变得相当明显了。

这是我使用的特定命令：PDF to PNG（灰度，超级采样以保持图像质量）：

```
convert -density 500 -alpha off file_in.pdf -scale 1700x2200 -bordercolor black -border 1x1 -fuzz 20% -trim +repage -colorspace Gray -depth 4 file_out.png 
```

在 Python 中

```
import Image 
img = Image.open('file_out.png')
img.save('file_out2.pdf') 
```

我还尝试使用 Ghostscript 将 pdf 转换为 png：

```
gs -sDEVICE=png16m -sOutputFile=file.png -dNOPAUSE -dBATCH -r300 file_out.pdf 
```

与保存结果。

这是其中的一部分

```
identify -verbose file.png 
```

为 ImageMagick png 提供：

```
 Format: PNG (Portable Network Graphics)
  Class: PseudoClass
  Geometry: 1700x2200+0+0
  Resolution: 500x500
  Print size: 3.4x4.4
  Units: Undefined
  Type: Grayscale
  Base type: Grayscale
  Endianess: Undefined
  Colorspace: Gray
  Depth: 8/4-bit
  Channel depth:
    gray: 4-bit 
```

有人有解决方案吗？或者至少是一个解释？

**编辑：** 我发现使用'-sample 1700x2200'而不是'-scale 1700x2200'修复了字体周围的灰色，但是细线几乎消失了，字体出现锯齿......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T08:19:35.427

该`pdf`格式基本上是一种矢量格式，还可以包括位图（“光栅”）图像。

如果原件`pdf`包含扫描的文档，它通常只包含位图图像（通常为`tiff`或`jpeg`格式），然后将其转换`png`为很好（如果您坚持图像的原始分辨率）。

但如果原件包含矢量图形（包括文本字符串），将其转换为位图通常会引入采样错误。为避免这些情况，您可以使用 1 位颜色深度（“黑白”格式）和至少与打印机匹配的分辨率。不过，这会产生相当大的文件`png`文件。使用该`tiff`格式可能会产生较小的文件。“tiff-inside-pdf”格式是您在扫描大型图纸时经常看到的格式。根据 ImageMagick 的`identify`程序，这样的`tiff`文件看起来像这样：

```
 Format: TIFF (Tagged Image File Format)
  Class: DirectClass
  Geometry: 13231x9355+0+0
  Resolution: 400x400
  Print size: 33.0775x23.3875
  Units: PixelsPerInch
  Type: Bilevel
  Base type: Bilevel
  Endianess: MSB
  Colorspace: Gray
  Depth: 1-bit
  Channel depth:
    gray: 1-bit 
```

尽管文件很大，但`tiff`文件只有 144 kb。该`tiff2pdf`程序（[`tiff`](http://www.libtiff.org/)包的一部分）可以将这些转换为漂亮的小`pdf`文件。

但保留文档格式的最佳方法是编辑`pdf`文件本身，而不是将其转换为另一种格式。

有一个用于操作`pdf`文档的 Python 模块；[PyPDF2](http://www.ghostscript.com/)。但是由于您没有指定*要*对文档执行的操作，因此无法说这是否可以执行您想要的操作。还有[`ReportLab`](http://www.reportlab.com/software/opensource/)，但更多的是用于*生成*pdf 文件。如果您的`cairo`系统上安装了该库，[那么 pycairo](http://cairographics.org/pycairo/)是一个不太重要的生成`pdf`文档的选项。

[pdftk](http://poppler.freedesktop.org/)（用 java 编写）通常是用于处理`pdf`文件的出色实用程序。

**编辑：**灰度采样*总是*会引入采样伪影。这些本身不是错误，只是抽样过程的结果。

`pdf`正如 Ben Jackson 所提到的，可以将文件反编译为 PostScript。有几个实用程序可以帮助您；`pdftops`来自[poppler](http://poppler.freedesktop.org/) -utils 包，`pdf2ps`它带有[ghostscript](http://www.ghostscript.com/)。以我的经验，`pdftops`往往会产生更好的可用输出。

但是我还没有找到一个自动化这个过程的好方法。下面是 Numpy 用户指南中反编译的片段`pdftops`：

```
(At)
[7.192997
0
2.769603
0] Tj
-314 TJm
(the)
[2.769603
0
4.9813
0
4.423394
0] Tj
-313 TJm
(core)
[4.423394
0
4.9813
0
3.317546
0
4.423394
0] Tj
-314 TJm
(of)
[4.9813
0
3.317546
0] Tj
-313 TJm
(the)
[2.769603
0
4.9813
0
4.423394
0] Tj
-314 TJm
(NumPy)
[7.192997
0
4.9813
0
7.750903
0
5.539206
0
4.9813
0] Tj
-314 TJm
(package,)
[4.9813
0
4.423394
0
4.423394
0
4.9813
0
4.423394
0
4.9813
0
4.423394
0
2.49065
0] Tj
-329 TJm 
```

这会产生句子“在 Numpy 包的核心”，因此，如果您在 PostScript 文件中查找 () 之间的任何内容，您将得到字符串。

因此，更改单个单词或删除短片段并不难；

*   在反编译的 PostScript 中找到正确的单词。
*   编辑它们（以及周围的参数！）
*   重新编译为 pdf（使用 ghostscript）。

但是您必须查看文档的开头并查看功能`Tj`和功能`TJm`。如果要替换文本，则必须删除它们并使用正确的参数为`Tj`和放入新的文本和代码`TJm`。这需要了解 PostScript。如果你要替换一个句子，你通常不能用更长的句子替换它；不会有足够的空间...

因此，通常建议尝试让原始应用程序更改输出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T17:53:13.357

> 有没有办法在灰度中获得良好的采样？我想要做的是用 PIL 打开文件，添加一些文本并覆盖图像

PDF 是压缩的 PostScript 文档（加上元数据）。PostScript 是一种编程语言。如果您使用`pdf2ps`，则可以将代码添加到 PostScript 以覆盖 PDF 的任何现有部分。然后用`pdf2ps`.

这是另一个直接处理该想法的问题： [在 Ghostscript 中是否可以在 PDF 的每一页中添加水印](https://stackoverflow.com/questions/12243044/is-it-possible-in-ghostscript-to-add-watermark-to-every-page-in-pdf)

# sas - SAS: backward looking data step to compute the average

> ID：15714709
> 
> 赞同：0
> 
> 时间：2013-03-30T03:40:07.760
> 
> 标签：sas

Sorry for the "not really informative" title of this post. I have the following data set in `SAS`:

```
time Add    time_delete
5    3.00   5
5    3.15   11
5    3.11   11
8    4.21   8
8    3.42   8
8    4.20   11
11   3.12   . 
```

Where the `time` correspond to a new added (`Add`) price in an auction at every 3minute. This price can get delete within the same time interval or later as shown in `time_delete`. My objective is to compute the average price from the `Add` field standing at every `time`. For instance, my average price at `time=5` is `(3.15+3.11)/2` since the `3.00` gets deleted within the interval. Then the average price standing at `time=8` is `(4.20+3.15+3.11)/3`. As you can see, I have to look at the current time where I am standing and look back and see which price is still valid standing at `time=8`. Also, I would like to have a field where for every `time` I know the highest price available that was not deleted. Any help?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T06:08:01.843

You have a variant of a rolling sum here. There's no one straightforward solution (especially as you undoubtedly have a few complications not mentioned); but here are a few pointers.

First, you may want to change the format of your data. This is actually a relatively easy problem to solve if you have one row for each possible timepoint rather than just a single row.

```
data have;
input time Add    time_delete;
datalines;
5    3.00   5
5    3.15   11
5    3.11   11
8    4.21   8
8    3.42   8
8    4.20   11
11   3.12   .
;;;;
run;

data want;
set have;
if time=time_delete then delete;
else do time=time to time_delete-1;
  output;
end;
keep time add;
run;

proc means data=want mean max n;
class time;
var add;
run; 
```

You could output the proc means to a dataset and have your maximum value plus the average value, and then either put that back on the main dataset or whatever you need.

The main downside to this is it's a much larger dataset, so if you're looking at hundreds of thousands of data points, this is not your best option likely.

You can also perform this in SQL without the extra rows, although this is where those "other complications" would potentially throw a wrench in things.

```
proc sql;
select H.time, mean(V.add), max(V.add) from (
    select distinct H.time from have H
    left join
    (select * from have) V
    on V.time le H.time
    and V.time_delete gt H.time )
    group by 1;
;
quit; 
```

Fairly straightforward and quick query, except that if you have a lot of time values it might take some time to execute the join.

Other options:

*   Read the data into an array, with a second array tracking the delete points. This can get a bit complex as you probably need to sort your array by delete point - so rather than just adding a new record into the end, you need to move a bunch of records down. SAS isn't quite as friendly to this sort of operation as a c-type language would be.

*   Use a hash table solution. Somewhat less messy than an array, particularly as you can sort a hash table more easily than two separate arrays.

*   Use IML and vectors. Similar to the array solution but with more powerful manipulation techniques available.

# iphone - Cocos2d CCFollow when there are multiple layers

> ID：15714710
> 
> 赞同：0
> 
> 时间：2013-03-30T03:40:15.477
> 
> 标签：iphone, ios, objective-c, cocos2d-iphone

Essentially, when I have one `CCLayer` for background and platform sprites and another for player sprite and HUD, how should I go about calling `CCFollow` if I want my camera to always center at the player with the HUD in the same layer moving accordingly as well?

Right now the background layer is a subclass of `CCLayer` that has a `CCSpriteBatchNode` for drawing objects in the environment. It contains an instance variable `CCLayer *HudLayer` that has a `CCMenu` and another `CCSpriteBatchNode` for the player animation sprites. They are both direct children of a `CCScene`, meaning `HudLayer` is not a children of `BackgroundLayer`. I'm now calling the `CCFollow` as `[self runAction:[CCFollow actionWithTarget:playerSprite worldBoundary:worldRect]]` where `self` is the `BackgroundLayer`.

The camera follows the box2d physics body of the player correctly, and the menu moves with it too, but whenever the camera moves, let's say to the right, the player sprite moves twice as fast to the right, leaving its physics body behind. So after moving to the right for a bit the playerSprite is outside of screen. `playerSprite.pos` and `playerSprite.position` seem to have nothing wrong though.

I've tried calling the `CCFollow` in different places but either the HUD refuses to move or the camera won't move or the player moves weirdly. What's wrong with it?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T22:10:10.133

I FIGURED IT OUT! The key here is to put the player sprite in some layer other than the HUD layer. I added my `CCSpriteBatchNode` for the player sprites as a child of `backgroundLayer` instead of the `HudLayer` without changing anything else and it worked.

So basically everything that needs to always stay on screen as the HUD should be in one layer, while the target node for `CCFollow` should be in a separate layer (in the background in my case). The caller layer of `CCFollow` should contain the target node as a direct child. This tutorial helped me a great deal: [http://www.raywenderlich.com/4666/how-to-create-a-hud-layer-with-cocos2d](http://www.raywenderlich.com/4666/how-to-create-a-hud-layer-with-cocos2d)

# objective-c - iOS - CLLocationCoordinate2D/floats/long 到 JSON 的 NSDictionary？

> ID：15714712
> 
> 赞同：3
> 
> 时间：2013-03-30T03:40:24.987
> 
> 标签：objective-c, json

我正在寻找将一个简单的objectiveC类（甚至不是现在它只是函数中的一些vars）转换为JSON，以便可以在服务器端将其发送并插入到java对象中。

该类可能具有以下字段；

```
LatLng locationA // a simple POJO with either float or long to represent lat and long. 
LatLng locationA
float someFloat 
```

在我试图将所有内容打包到 NSDictonary 的那一刻。传递浮点数不起作用，所以我必须将它们转换为 NSStrings。所以在服务器端，它们会以字符串的形式出现......这并不理想。

```
CLLocationCoordinate2D location = ... ;
float lat = location.latitude;
float lng = location.longitude;

float aFloat = 0.12434f;
NSString *aFloatstr = [NSString stringWithFormat:@"%f", aFloat];

NSString *latStr = [NSString stringWithFormat:@"%f", lat];
NSString *lngStr = [NSString stringWithFormat:@"%f", lng];

NSDictionary *locationDictionary =
    [NSDictionary dictionaryWithObjectsAndKeys:
        latStr , @"latitude",
        lngStr, @"longitude",
        nil];
NSDictionary *dictionary = [NSDictionary dictionaryWithObjectsAndKeys:
                                locationDictionary, @"locationA",
                                locationDictionary, @"locationB",
                                aFloatstr,@"aFloat",
                                nil];
NSError *error;
NSData *jsonData = [NSJSONSerialization dataWithJSONObject:dictionary options:NSJSONWritingPrettyPrinted error:&error];

NSString *str = [[NSString alloc] initWithData:jsonData encoding:NSUTF8StringEncoding];
NSLog(@"%@",str); 
```

将 CLLocationCoordinate2Ds 放入 NSDictionary 的最佳方法是什么？

如何将原始类型、长浮点数等添加到 NSDictionary？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-30T03:44:52.347

与其把纬度和经度放进去`NSString`，你会有更好的运气`NSNumber`。遇到`NSJSONSerialization`时，`NSNumber`它不会像引用字符串那样引用值（这是您在传输数字时想要的，对吧？）。

您还需要使用`double`, not`float`来表示纬度和经度，因为这就是它们在内部的表示方式。无需放弃精度。

```
[NSNumber numberWithDouble:lat]
[NSNumber numberWithDouble:lng]
[NSNumber numberWithFloat:aFloat] 
```

由于实例`NSNumber`是对象，因此您可以`NSDictionary`毫无问题地存储它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T03:44:58.947

使用`NSNumber`而不是字符串来包装`float`值，例如：

```
NSDictionary *locationDictionary = [NSDictionary dictionaryWithObjectsAndKeys:
                          [NSNumber numberWithFloat:lat] , @"latitude",
                          [NSNumber numberWithFloat:lng], @"longitude", nil]; 
```

这样，`NSJSONSerialization`将正确地将它们编码为数值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-29T11:53:45.023

## 结构

Neat way of doing this is to create category for NSValue that understands your struct. In your case it's `CLLocationCoordinate2D`, but could be any really. Here is snippet from Apple's own documentation explaning usage of `NSValue`:

```
// NSValue+Polyhedron.h
typedef struct {
    int numFaces;
    float radius;
} Polyhedron;

@interface NSValue (Polyhedron)
+ (instancetype)valueWithPolyhedron:(Polyhedron)value;
@property (readonly) Polyhedron polyhedronValue;
@end

// NSValue+Polyhedron.m
@implementation NSValue (Polyhedron)
+ (instancetype)valueWithPolyhedron:(Polyhedron)value
{
    return [self valueWithBytes:&value objCType:@encode(Polyhedron)];
}
- (Polyhedron) polyhedronValue
{
    Polyhedron value;
    [self getValue:&value];
    return value;
}
@end 
```

From here usage is quite trivial. To create boxed NSValue:

```
NSValue *boxedPolyhedron = [NSValue valueWithPolyhedron:yourStruct]; 
```

Now you can put `boxedPolyhedron` whenever `NSValue` can go, `NSArray`, `NSDictionary`, `NSSet`, and many more, plus al the mutable versions.

To get struct back:

```
Polyhedron polyStruct = [boxedPolyhedron polyhedronValue]; 
```

That's it.

As a bonus, this works for *any C type*, not only for structs.

# floats, longs, etc.

As mentioned above, could do same as above. But, for numbers, you could use `NSNumber` which is actually a subclass if `NSValue` with all popular methods already implemented. Here is a list of types you can box by instantiating `NSNumber`:

```
+ (NSNumber *)numberWithChar:(char)value;
+ (NSNumber *)numberWithUnsignedChar:(unsigned char)value;
+ (NSNumber *)numberWithShort:(short)value;
+ (NSNumber *)numberWithUnsignedShort:(unsigned short)value;
+ (NSNumber *)numberWithInt:(int)value;
+ (NSNumber *)numberWithUnsignedInt:(unsigned int)value;
+ (NSNumber *)numberWithLong:(long)value;
+ (NSNumber *)numberWithUnsignedLong:(unsigned long)value;
+ (NSNumber *)numberWithLongLong:(long long)value;
+ (NSNumber *)numberWithUnsignedLongLong:(unsigned long long)value;
+ (NSNumber *)numberWithFloat:(float)value;
+ (NSNumber *)numberWithDouble:(double)value;
+ (NSNumber *)numberWithBool:(BOOL)value;
+ (NSNumber *)numberWithInteger:(NSInteger)value;
+ (NSNumber *)numberWithUnsignedInteger:(NSUInteger)value; 
```

In similiar fashion you un-box values using `[yourNumber longValue]`, `[yourNumber floatValue]`, etc.

Hope that helps.

# c# - C# 调用 DLL C 时出错

> ID：15714719
> 
> 赞同：0
> 
> 时间：2013-03-30T03:41:17.007
> 
> 标签：c#, dll, callback

我想从我的 C# 应用程序中调用 C 中的函数。DDL 有几个功能，我将只介绍其中两个。第一个初始化环境并具有以下调用：

在 C 中：

```
int  init (context_ptr           p0,
       const int             p1,
       const int             p2,
       const int             p3,
       const double * const  p4,
       const double * const  p5,
       const int             p6,
       const int    * const  p7,
       const double * const  p8,
       const double * const  p9,
       const int             p10,
       const int    * const  p11,
       const int    * const  p12,
       const int             p13,
       const int    * const  p14,
       const int    * const  p15,
       const double * const  p16,
       const double * const  p17); 
```

我在 C# 中的代码：

```
[DllImport("DLL", SetLastError=true)]
public static extern int init(
            IntPtr   p0, 
            int      p1,
            int      p2,
            int      p3,
            IntPtr   p4,
            IntPtr   p5,
            int      p6,
            IntPtr   p7,
            IntPtr   p8,
            IntPtr   p9,
            int      p10,
            IntPtr   p11,
            IntPtr   p12,
            int      p13,
            IntPtr   p14,
            IntPtr   p15,
            IntPtr   p16,
            IntPtr   p17); 
```

第二个函数使用环境并在 C 中具有以下调用：

```
int  do( context_ptr      q0,
     double * const   q1,
     double * const   q2,
const int              q3,
     double * const   q4,
const double * const   q5,
     double * const   q6,
     double * const   q7,
const double * const   q8,
     double * const   q9,
     void   * const   q10); 
```

在 C# 中：

```
[DllImport("DLL", SetLastError = true, CallingConvention = CallingConvention.StdCall)]
public static extern int do(
            IntPtr   q0,
        ref IntPtr   q1,
        ref IntPtr   q2,
        int          q3,
        ref double   q4,
        ref IntPtr   q5,
        ref IntPtr   q6,
        ref IntPtr   q7,
        ref IntPtr   q8,
        ref IntPtr   q9,
            IntPtr   q10); 
```

当我调用第二个函数时，在运行时发生错误：“尝试读取或写入受保护的内存”

怎么了？

问题可能出在第二个函数上，因为它调用了回调：

回调 C 代码：

```
typedef int     callback (const int             evalRequestCode,
                      const int             n,
                      const int             m,
                      const int             nnzJ,
                      const int             nnzH,
                      const double * const  x,
                      const double * const  lambda,
                            double * const  obj,
                            double * const  c,
                            double * const  objGrad,
                            double * const  jac,
                            double * const  hessian,
                            double * const  hessVector,
                            void   *        userParams); 
```

我的代码 C#：

```
 public static int Callback(
        int evalRequestCode,
        int n,
        int m,
        int nnzJ,
        int nnzH,
        ref double[] x,
        ref double[] lambda,
        ref double obj,
        ref double[] c,
        ref double objGrad,
        ref double jac,
        ref double[] hessian,
        ref double[] hessVector,
        IntPtr ptrParamss
        ) 
```

欢迎任何形式的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T04:04:05.100

这些`double *`和`int *`参数应该在 C# 端`ref double`。`ref int`

很可能导致您出现问题的原因是您正在通过一个`IntPtr`并且一切正常工作了一段时间。然后 GC 运行并四处移动，突然间该指针正在引用不再使用的内存（或者，更糟糕的是，正在被其他东西使用）。

为了防止这种情况，您需要将这些东西编组为数组，如下所示：

```
public static extern int do(
        IntPtr   q0,
    [MarshalAs(UnmanagedType.LPArray)] double[] q1,
    [MarshalAs(UnmanagedType.LPArray)] double[] q2,
    etc...); 
```

这会将数组固定在内存中，这样垃圾收集器就不会移动它。不用担心性能。数组没有被复制。一个指针被传递到固定的内存位置。

当然，这很难确定，因为您没有显示实际调用该函数的 C# 代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T21:53:16.797

通过使用 DLL C/C++ 调用约定是'CallingConvention.StdCall'。但是，默认情况下调用回调 DLL 具有“CallingConvention.Cdec”。

因此，代表应该是

在 C# 中：

[UnmanagedFunctionPointer(CallingConvention.Cdecl)] 公共委托 void CallbackParams();

# performance - AS3 - 为什么使用 Flash / AIR 的手势反应迟钝

> ID：15714725
> 
> 赞同：1
> 
> 时间：2013-03-30T03:42:34.047
> 
> 标签：performance, actionscript-3, flash, air, gesture

我已经用 Flash 和 AIR 创建了 3 或 4 个 android 游戏，而且手势滑动和平移是如此反应迟钝，无法使用它们。例如，我正在尝试使用平移手势进行滑块，并且它每 3 次至少错过 1 次手势。滑动也一样，我有一个游戏掉落的东西，必须滑动才能将它们推回一点，但这是五分之一的成功率！

有没有人在 Flash / AIR（三星 S2 上）使用这些手势，你让它工作了吗？

谢谢 ！

教育

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T21:32:04.103

手势对于每个听众来说都有非常高的开销。如果您同时运行多个手势侦听器，则每个侦听器都会运行测试`ON_ENTER_FRAME`（似乎是轶事）并且问题会成倍增加。如果舞台上有多个对象都需要相同的手势，我将监听器添加到舞台，然后测试 Event.target 是否是我的对象之一。这种做法还可以更好地重用代码。

就像是：

```
Stage.addEventListener(TransformGestureEvent.GESTURE_SWIPE, swipped);
Stage.mouseChildren = false;
function swipped(e:TransformGestureEvent):void {
    if(array_of_objects.indexOf(e.target)) {
        Stage.removeChild(e.target);
    }
} 
```

如果您的所有下落对象都在一个包装容器中，则此方法效果最佳，因此您不必从舞台的所有子级中删除鼠标事件，只需从包装器的子级中删除。

如果您无法从代码的位置（在班级内）访问舞台，您可以使用`DisplayObject.Stage.addEventListener...`

# c# - Improving performance of slow query - Potentially by disabling change tracking

> ID：15714727
> 
> 赞同：0
> 
> 时间：2013-03-30T03:42:46.337
> 
> 标签：c#, performance, entity-framework, change-tracking, entity-framework-6

I have a Linq query on a DbSet that hits a table and grabs 65k rows. The query takes about 3 minutes, to me that seems like obviously too much. Although I don't have a line of comparison but I'm certain this can be improved. I'm relative new to EF and Linq so I suspect I may also be structuring my query in a way that is a big "NO".

I read that change tracking is where EF spends most of it's time, and that is enabled on the entity in question so perhaps I should turn that off (if so, how)?

Here's the code:

```
ReportTarget reportTarget = repository.GetById(reportTargetId);
if (reportTarget != null)
{
    ReportsBundle targetBundle = reportTarget.SavedReportsBundles.SingleOrDefault(rb => rb.ReportsBundleId == target.ReportsBundleId);
    if (targetBundle != null)
    {
    }
} 
```

This next line takes 3 Minutes to execute (65k records):

```
IPoint[] pointsData = targetBundle.ReportEntries
                          .Where(e => ... a few conditions )
                          .Select((entry, i) => new
                              {
                                 rowID = entry.EntryId,
                                 x = entry.Profit,
                                 y = i,
                                 weight = target.HiddenPoints.Contains(entry.EntryId) ? 0 : 1,
                                 group = 0
                              }.ActLike<IPoint>())
                          .ToArray(); 
```

**Note:** ActLike() is from [Impromptu Interface](https://code.google.com/p/impromptu-interface/) library that uses the .NET DLR to make dynamic proxies of objects that implement an interface on the fly. I doubt this is the bottle neck.

How can I optimize performance for this particular DbSet (`TradesReportEntries`) as I'll be querying this table for large data sets (`IPoint[]`s) often

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T05:44:51.703

Well, it looks like you're loading an entity object then querying navigation properties. When this occurs, EF loads all related entities *FIRST* (via lazy loading), then your query is performed on the entire collection. This may be why you're having performance issues.

Try querying against the collection by using the following:

```
context.Entry(targetBundle)
    .Collection(p => p.TradesReportEntries)
    .Query()
    .Where( e => <your filter here> )
    .Select( <your projection here> ) 
```

This allows you to specify a filter in addition to the behind-the-curtain filter that handles loading the nav property by default. Let us know how that works out.

# php - PHP 数组需要修复（合并/合并）

> ID：15714728
> 
> 赞同：0
> 
> 时间：2013-03-30T03:42:55.637
> 
> 标签：php, arrays, foreach, merge

我有这个多维数组，我将其命名为“原始”：

```
$original=
array
  0 => 
    array
      'animal' => 'cats'
      'quantity' => 1
  1 => 
    array
      'animal' => 'dogs'
      'quantity' => '1'
  2 => 
    array
      'animal' => 'cats'
      'quantity' => '3' 
```

但是，我想将内部数组与同一动物合并以生成这个新数组（结合数量）：

```
$new=
array
  0 => 
    array
      'animal' => 'cats'
      'quantity' => 4
  1 => 
    array
      'animal' => 'dogs'
      'quantity' => '1' 
```

我知道在 stackoverflow 上有类似的问题，但不够相似，我无法弄清楚如何使用这些问题必须应用于这个特定示例的反馈。是的，我知道在你们很多人看来我可能看起来很愚蠢，但请记住，曾经有一段时间你们也不知道使用数组的废话 :)

我试过下面的代码，但得到`Fatal error: Unsupported operand types (Referring to line 11)`. 如果我得到那个错误消失，我不确定这段代码是否会产生我想要实现的目标。

```
$new = array();
foreach($original as $entity){
    if(!isset($new[$entity["animal"]])){
        $new[$entity["animal"]] = array(
            "animal" => $entity["animal"],
            "quantity" => 0,
        );
    }
    $new[$entity["animal"]] += $entity["quantity"];
} 
```

所以，我不知道我在做什么，我真的可以从专家那里得到一些帮助。为了尝试提出一个非常明确的问题，这里是……我需要对代码进行哪些更改，以便将`$original`其转换为`$new`？如果我提供的代码完全错误，您能否提供一个替代示例来解决问题？另外，我唯一熟悉的语言是 PHP，所以请提供一个仅使用 PHP 的示例。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T03:50:04.293

你很亲密。

```
$new[$entity["animal"]] += $entity["quantity"]; 
```

需要是

```
$new[$entity["animal"]]['quantity'] += $entity["quantity"]; 
```

在您的 if ( !isset [...] ) 行中，您将 $new[$entity['animal']] 设置为一个数组，因此您需要在尝试添加之前访问该数组的 'quantity' 字段新的数量值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T03:54:58.513

您的代码不起作用的原因之一是您使用动物名称作为数组索引，而不是在所需输出中使用的整数索引。

尝试这个：

```
$new = array(); // Desired output
$map = array(); // Map animal names to index in $new
$idx = 0; // What is the next index we can use

foreach ($original as $entity) {
  $animal = $entity['animal'];
  // If we haven't saved the animal yet, put it in the $map and $new array
  if(!isset($map[$animal])) {
    $map[$animal] = $idx++;
    $new[$map[$animal]] = $entity;
  }
  else {
    $new[$map[$animal]]['quantity'] += $entity['quantity'];
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-30T04:02:25.287

这有效：

```
$new = array();
$seen = array();
foreach($original as $entity) {
  // If this is the first time we're encountering the animal
  if (!in_array($entity['animal'], $seen)) {
    $new[] = $entity;
    $seen[] = $entity['animal'];

  // Otherwise, if this animal is already in the new array...
  } else {
    // Find the index of the animal in the new array...
    foreach($new as $index => $new_entity) {
      if ($new_entity['animal'] == $entity['animal']) {
        // Add to the quantity
        $new[$index]['quantity'] += $entity['quantity'];
      }   
    }   
  }
} 
```

您的示例使用动物名称作为索引，但实际索引只是一个整数。

但是，我认为如果它的格式是这样的，那么结果数组会更容易使用和阅读：

```
array('cats' => 4, 'dogs' => 1) 
```

这将需要与上面不同但更简单的代码......但是，它不会直接回答您的问题。

# c++ - How to determine number of intervals in an interval_map without iteration?

> ID：15714730
> 
> 赞同：2
> 
> 时间：2013-03-30T03:43:27.317
> 
> 标签：c++, boost, intervals

I can determine how many intervals are in an interval_map by iterating over the intervals, but is there a more direct method for getting the number of intervals in an interval map? The size() method of boost::icl::interval_map doesn't seem to return a meaningful value.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T10:11:57.347

If you want to know how many steps an iteration would take use [`boost::icl::interval_map::iterative_size()`](http://www.boost.org/doc/libs/1_49_0/libs/icl/doc/html/boost/icl/interval_base_map.html#id650044-bb). It's defined in `boost::icl::interval_base_map` and inherited by `interval_map`.

# graph - D3.js, force-graph, cannot display text/label of nodes

> ID：15714738
> 
> 赞同：9
> 
> 时间：2013-03-30T03:45:14.590
> 
> 标签：graph, d3.js, data-visualization, labels, force-layout

I cannot display labels of nodes using a force-layout in d3.js.

I'm trying with this example [http://d3js.org/d3.v3.min.js](http://d3js.org/d3.v3.min.js)

I updated that code only adding zoom, like this:

```
var svg = d3.select("body").append("svg").attr("width", width).attr("height", height).append('svg:g').call(d3.behavior.zoom().on("zoom", redraw));

function redraw() {
    console.log("here", d3.event.translate, d3.event.scale);
    svg.attr("transform", "translate(" + d3.event.translate + ")" + " scale(" + d3.event.scale + ")");
    node.attr("transform", function(d) {
        return "translate(" + d.x + "," + d.y + ")";
    });
} 
```

Why are labels not displayed?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-30T08:34:38.217

You need to separately add the text:

```
node.append("text")
    .attr("dx", ".10em")
    .attr("dy", ".10em")
    .text(function(d) { return d.name; }); 
```

see these examples:

[http://bl.ocks.org/mbostock/2706022](http://bl.ocks.org/mbostock/2706022)

[http://bl.ocks.org/mbostock/1153292](http://bl.ocks.org/mbostock/1153292)

# jquery - 插入#div ajaxed 内容的函数

> ID：15714747
> 
> 赞同：0
> 
> 时间：2013-03-30T03:45:46.573
> 
> 标签：jquery, function, html, insert

嗨朋友们，首先对我的英语感到抱歉，我会尽力提出这个问题。

我是 jquery 函数世界的新手，我想要实现的是这个结果[http://s22.postimg.org/8636pk6ht/menu1.png](http://s22.postimg.org/8636pk6ht/menu1.png)但是在页面加载时通过 ajax 进行了动态处理。

这些数字是要处理的新授权的数量，所以如果我接受或拒绝，数字必须动态更新

到目前为止我有这个

```
$.fn.sucursales = function(){

    $.ajax({
        type: "GET",
        url: "ajax/sucumenu.php",
        dataType:"json",
        success:function(response){
            alert(response)
        }
    });
} 
```

我得到了这个回复，其中 num 是新授权的数量

```
[{"id":"3","nombre":"Arjona","num":"1"},{"id":"1","nombre":"Cartagena","num":"0"},{"id":"2","nombre":"Turbaco","num":"2"},{"id":"4","nombre":"Turbana","num":"0"}] 
```

所以问题是。我如何使用函数将其插入到我想要做的事情的 div 中

```
$("#sidebar").sucursales(); 
```

并在我按接受或拒绝时更新它

当然添加我已经拥有的html。看起来像这张图片[http://s22.postimg.org/8636pk6ht/menu1.png](http://s22.postimg.org/8636pk6ht/menu1.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T03:53:51.427

这应该让你开始：

```
$.fn.sucursales = function() {
    var $this = this;

    $.getJSON('ajax/sucumenu.php', function(data) {
        $.each(data, function(index, row) {
            $('<div>', {
                text: row.nombre
            }).appendTo($this);
        });
    });

    return this;
} 
```

# java - 找不到符号错误

> ID：15714750
> 
> 赞同：0
> 
> 时间：2013-03-30T03:45:52.937
> 
> 标签：java, class, methods

编译器给我一条错误消息，说它找不到电影[x].getTitle() 和电影[x].getYear。我一直想知道通过界面进入课程是否有问题

这是错误：

```
MathewBorumP5.java:68: error: cannot find symbol
System.out.printf("%-26s%-6s%-10s%-9s%-11s\n", movies[x]
.getTitle(),

^
symbol:   method getTitle()
location: interface Profitable
MathewBorumP5.java:69: error: cannot find symbol
                            movies[x].getYear(), movies[x].calcRevenue(),
                                     ^
symbol:   method getYear()
location: interface Profitable
2 errors 
```

这是我的客户类：

```
import java.util.Scanner;

public class MathewBorumP5 {
    public static void main(String[] args) {
        int choice;
        boolean restart = true;

        Scanner input = new Scanner(System.in);

        Profitable[] movies = new Profitable[6];
        movies[0] = new Animated("Beauty and the Beast", "Gary Trousdale", 1991,
        10.0, 5.0, 2.0);
        movies[1] = new Animated("Peter Pan", "Clyde Geronimi", 1953, 2.0, 1.2,
        .5);
        movies[2] = new Documentary("Planet Earth", "Alastair Fothergill", 2006,
        10, 20, 5);
    movies[3] = new Documentary("Drain the Ocean", "Steve Nichols", 2009, 9,
        2,3);
    movies[4] = new Drama("The Shawshank Redemption", "Frank Darabont",
        1994, 89, 7, 2);
    movies[5] = new Drama("The Godfather", "Francis Coppola", 1972, 10, 3,
        5);

    do {
        menu();
        System.out.print("Enter a number from 1 - 5: ");
        choice = input.nextInt();
        System.out.print("\n");

        switch(choice) {
            case 1:
                item1(movies);
                break;
            case 2:
                break;
            case 3:
                break;
            case 4:
                break;
            case 5:
                restart = false;
                break;
            default:
                System.out.print("You didn't enter a number between 1"
                    + " and 5.\n");
                break;
        }
    } while(restart == true);
}

public static void menu() {
    System.out.print("Warren Moore Movie Menu\n");
    System.out.print("1\. Show the list of movies in the array\n");
    System.out.print("2\. Display the total number of movies and the total" +
        " revenues\n");
    System.out.print("3\. Search movie by title\n");
    System.out.print("4\. Display movies sorted by profit in decreasing" +
        " order\n");
    System.out.print("5\. Exit\n");
}

public static void item1(Profitable[] movies) {
    double revenue;
    System.out.printf("%-26s%-6s%-10s%-9s%-11s\n", "Title", "Year", 
    "Revenue", "Profit", "Category");
    for(int x = 0; x <= 6; x++) {
        revenue = movies[x].calcRevenue();
        System.out.printf("%-26s%-6s%-10s%-9s%-11s\n", movies[x].getTitle(),
            movies[x].getYear(), movies[x].calcRevenue(),
            movies[x].calcProfit(revenue), movies[x].category());
    }
}
} 
```

这是我的超类：

```
public class Movie implements Profitable {
protected String title;
protected String director;
protected int year;
protected double productionCost;
private int totalMovies = 0;

public Movie() {
    totalMovies++;
}
public Movie(String newTitle, String newDirector, int newYear,
    double newCost) {
    totalMovies++;
    title = newTitle;
    director = newDirector;
    year = newYear;
    productionCost = newCost;
}

public int getTotalMovies() {
    return totalMovies;
}

public String getTitle() {
    return title;
}

public void setTitle(String newTitle) {
    this.title = title;
}

public String getDirector() {
    return director;
}

public void setDirector(String director) {
    this.director = director;
}

public int getYear() {
    return year;
}

public void setYear(int year) {
    this.year = year;
}

public double getProductionCost() {
    return productionCost;
}

public void setProductionCost(double productionCost) {
    this.productionCost = productionCost;
}

public String toString() {
    return "";
}
} 
```

这是我的单独课程。公共类动画扩展电影实现盈利{私人双倍率；私人双重收入；

```
public Animated() {
    super();
}

public Animated(String title, String director, int year, double cost,
    double rate, double income) {
    super(title, director, year, cost);
    this.rate = rate;
    this.income = income;
}

public double getRate() {
    return rate;
}

public void setRate(double rate) {
    this.rate = rate;
}

public double getIncome() {
    return income;
}

public void setIncome(double income) {
    this.income = income;
}

public String category() {
    return "Animated";
}

public double calcRevenue() {
    return (income * rate);
}

public double calcProfit(double revenue) {
    return (revenue - super.productionCost);
}

public String toString() {
    return (super.toString() + "");
}
} 
```

2号

```
public class Documentary extends Movie implements Profitable {
private int distributors;
private double premium;

public Documentary() {
    super();
}

public Documentary(String title, String director, int year, double cost,
    int distributors, double premium) {
    super(title, director, year, cost);
    this.distributors = distributors;
    this.premium = premium;
}

public int getDistributors() {
    return distributors;
}

public void setDistributors(int distributors) {
    this.distributors = distributors;
}

public double getPremium() {
    return premium;
}

public void setPremium(double premium) {
    this.premium = premium;
}

public String category() {
    return "Documentary";
}

public double calcRevenue() {
    return (distributors * premium);
}

public double calcProfit(double revenue)  {
    return (revenue - super.productionCost);
}

public String toString() {
    return (super.toString() + "");
}
} 
```

3 号

```
public class Drama extends Movie implements Profitable {
private int tickets;
private double avgPrice;

public Drama() {
    super();
}

public Drama(String title, String director, int year, double cost,
    int tickets, double avgPrice) {
    super(title, director, year, cost);
    this.tickets = tickets;
    this.avgPrice = avgPrice;
}

public int getTickets() {
    return tickets;
}

public void setTickets(int tickets) {
    this.tickets = tickets;
}

public String category() {
    return "Drama";
}

public double calcRevenue() {
    return (tickets * avgPrice);
}

public double calcProfit(double revenue) {
    return (revenue - super.productionCost);
}

public String toString() {
    return (super.toString() + "");
}
} 
```

最后是我的界面。

```
public interface Profitable {
    public abstract String category();
    public abstract double calcRevenue();
    public abstract double calcProfit(double revenue);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T03:52:12.987

Profitable 接口没有您尝试调用的方法，因此编译器向您抱怨这一点是正确的。数组变量不知道每个数组项可能包含什么类型的对象，实际上可以保存一种类型的项，只是稍后更改它，因此编译器以这种方式运行是有意义的。一个组合是测试数组中的每个项目以查看它实际上是什么类型，例如使用 instanceof，但这是一个非常脆弱的解决方案，不推荐使用。最安全的方法是只在 Profitable 数组项上调用 Profitable 方法，并尝试使用多态的魔力来允许每个对象对同一个方法调用执行不同的行为。

Note that if all of the items held by the array will always be Movie or Movie child items, then by all means use an array of Movie rather than an array of Profitable.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T04:04:26.950

You are correct, the issue is with your Profitable interface. When you create the array item(Profitable[] movies), this means that only the methods defined in this interface will be available to you.

An array of Movie objects is probably what you are after here. All of those objects appear extend Movie and implement Profitable, so you will able to access everything this way.

# javascript - JavaScript 中全局变量和局部变量的奇怪行为

> ID：15714752
> 
> 赞同：2
> 
> 时间：2013-03-30T03:46:12.297
> 
> 标签：javascript, scope

我尝试了以下代码：

```
var a = 5;

function x() {
  console.log(a);
}

x(); 
```

它按预期运行并打印 5。

但是我更改了代码，因此全局变量 a 将被覆盖，如下所示：

```
var a = 5;

function x() {
  console.log(a);
  var a = 1;
}

x(); 
```

它打印未定义。这对我来说没有意义，因为覆盖应该在 console.log(a) 之后发生。那么问题是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-30T03:48:46.430

发生这种情况是因为您的第二个`a`变量被“提升”到函数的顶部，它隐藏了第一个`a`. 实际发生的是这样的：

```
var a = 5;

function x() {
  var a;
  console.log(a);
  a = 1;
}

x(); 
```

[这是一篇关于提升的文章，非常](http://www.adequatelygood.com/JavaScript-Scoping-and-Hoisting.html)适合进一步阅读该主题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T04:07:08.703

```
var a = 5;

function x() {
    var a = 1;
console.log(a);
}

x(); 
```

您需要在 console.log() 之前初始化变量 a；

# uploading - 上传多张图片时管理标题

> ID：15714754
> 
> 赞同：1
> 
> 时间：2013-03-30T03:46:32.340
> 
> 标签：uploading, fine-uploader

如果我们可以在上传多张图片时管理我们上传的每张图片的标题，那就太好了。通过这种方式，我可以选择要上传的每张图片，为其命名，然后点击上传按钮。现在必须要么一张一张上传，要么让所有选定的图像具有相同的标题。

有点像 Facebook 或 Panoramio，在上传之前可以轻松管理图像的标题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T02:22:08.443

目前 Fine Uploader 本身并不支持此功能，但我已经打开了[一个功能请求](https://github.com/Widen/fine-uploader/issues/773)并暂时将其安排为 3.7 里程碑。同时，您当然可以提供自己的 UI 元素，以允许用户为每个可上传项目提供备用名称，并将这些新名称作为参数传递。在服务器端，您必须解析此参数并将其与上传的项目相关联。Fine Uploader 必须采用包含用户提供的备用文件名的参数名称（并且服务器必须了解此约定并解析此参数），因为我们将无法更改值文件输入字段与多部分编码请求一起发送。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-31T06:03:14.720

用这个：

```
var uploader = $('.uploader'),
    titleBox = $('input[type=text]');
uploader.fineUploader({
    request: {
         endpoint: 'path/to/url'
    },
    formatFileName: function (name) {
         var title = titleBox.val() + ' - ' + name + '';
         titleBox.val('');
         return title;
    },
});
uploader.on('submit', function (event, id, name) {
    uploader.fineUploader('setParams', {title: titleBox.val()}, id);
}); 
```

# ios - 对“CGImageDestinationCreateWithURL”的调用没有匹配的函数

> ID：15714757
> 
> 赞同：0
> 
> 时间：2013-03-30T03:47:04.597
> 
> 标签：ios

我的目标链接到 ImageIO 框架，在我使用的文件中`CGImageDestinationCreateWithURL`， I `#import <ImageIO/ImageIO.h>`，但我仍然得到所说的错误。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T16:38:44.680

错误中的消息是`Candidate function not viable: no known conversion from 'NSURL *' to CFURLRef' (aka qconst __CFURL *) for 1st argument`。

我需要将第一个参数 type`NSURL`转换为 a `CFURLRef`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T04:07:41.420

> 在 OS X v10.4 或更高版本中可用的 CGImageDestination 对象抽象了数据写入任务。图像目标可以表示单个图像或多个图像。它可以包含缩略图以及每个图像的属性。

[苹果文件](https://developer.apple.com/library/mac/#documentation/graphicsimaging/reference/CGImageDestination/Reference/reference.html)

# c# - 在 ASP.NET 中将自定义 CSS 应用于 Crystal Reports

> ID：15714759
> 
> 赞同：1
> 
> 时间：2013-03-30T03:47:18.857
> 
> 标签：c#, asp.net, css

如何将 CSS 应用于我网页中的水晶报表，以便它保留在我希望出现的 div 中并且不会浮出该 div。我还想禁用切换树组，我该如何实现。如果可能，请提供示例。由于我是新手，请帮助我。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T07:23:01.523

尝试在使用 Crystal Report 的页面中使用自定义 CSS，并尝试在样式后使用 !important 来覆盖默认 CSS 样式并检查 firebug 中的样式

# c - 第一个案例整数的奇怪输出

> ID：15714765
> 
> 赞同：0
> 
> 时间：2013-03-30T03:48:48.160
> 
> 标签：c, debugging, output, sieve-of-eratosthenes, sieve

下面是两个可以完美编译的函数，但我似乎在第一个输入的整数时遇到了一个奇怪的错误。我已经尝试在 GDB 中进行调试，但是当只有第一个输入值出现这个奇怪的错误时，它会让事情变得复杂。

```
#include <stdio.h>
#include "Assg9.h"
#include <stdlib.h>
#include <assert.h>
#include <math.h>

void getPrimes(int usernum, int* count, int** array){
    (*count) = (usernum - 1);
    int sieve[usernum-1], primenums = 0, index, fillnum, multiple;

    for(index = 0, fillnum = 2; fillnum <= usernum; index++, fillnum++){
        sieve[index] = fillnum;
    }

    for (; primenums < sqrt(usernum); primenums++)  
        {
            if (sieve[primenums] != 0){                 
                   for (multiple = primenums + (sieve[primenums]); multiple < usernum - 1; multiple += sieve[primenums])//If it is not crossed out it starts deleting its multiples.
                   {  
                     if(sieve[multiple]) {      
                       --(*count);              
                       sieve[multiple] = 0;
                   }
                   }
            }
        }
        int k;

        for (k = 0; k < usernum; k++)
            if (sieve[k] != 0)
                {
                    printf("%d ", sieve[k]);
                }
        *array = malloc(sizeof(int) * (usernum +1));
         assert(array);
         (*array) = sieve;
    }

void writeToOutputFile(FILE *fpout, const int *array, int n, int count){
    int i;
    fprintf(fpout, "There are %d prime numbers less than or equal to %d \n", count, n);
    for(i = 0; i < count; i++)
    {   
        if(*(array + i) != 0){
        fprintf(fpout, "%d ", *(array + i));

        }

    }
 } 
```

我们的输出：

```
Please enter an integer in the range 2 <-> 2000 both inclusive: 2
2 32664 
Do you want to try again? Press Y for Yes and N for No: y
Please enter an integer in the range 2 <-> 2000 both inclusive: 2
2 
Do you want to try again? Press Y for Yes and N for No: n
Good bye.  Have a nice day 
```

预期的输出显然应该只显示 2。对于第一个输入的整数，从 2 到 2000 的任何整数都是这种情况。最后一个或最后 2 个素数打印非常大的数字，有时甚至是负数。我不知道为什么，但是在第一个输入值之后一切正常。疯狂地尝试用 GDB 调试它，但没有运气。非常感谢有人对这个奇怪的错误的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T03:55:21.510

您没有将 sieves 数组初始化为 0。所以你从 0 循环到 usernum-1，打印出每个不是 0 的数字。由于你没有初始化数组，第二个元素是一个随机值，正在被打印出来

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T04:19:11.523

这段代码有问题：

```
(*array) = sieve; 
```

您正在将**一个临时本地数组**`sieve`的地址分配给。您需要复制数组内容。**`*array`**

 **你也是[这个对](https://stackoverflow.com/users/2225776/hetero-myde)[相同代码](https://stackoverflow.com/questions/15713877/segmentation-fault-with-sieves-of-eratosthenes-algorithm-in-c)问了三个问题的人吗？**

# php - 如何在 PHP 中附加文件并连接文本？

> ID：15714766
> 
> 赞同：2
> 
> 时间：2013-03-30T03:49:01.620
> 
> 标签：php

我想在我保存在文件中的每个 URL 旁边添加一个新行。因此，我在 php 中使用了以下代码：

```
file_put_contents("test.txt", $url."\n", FILE_APPEND); 
```

但是当我打开文件时，我放入文件中的所有 URL 都在一行中，并且没有插入新行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T03:53:43.110

您需要使用`\r\n`因为`\n`用于新行并`\r`用于当前行的结尾。

> Unix 倾向于`\n`用作行分隔符；Windows 倾向于`\r\n`用作行分隔符，而 Mac（直到 OS 9）通常用作`\r`行分隔符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T03:52:34.520

它们在不同的行中，但您使用的是 UNIX 换行格式，因此某些 Windows 程序（如记事本）将无法正确理解这一点。

使用`\r\n`而不是 just `\n`，或者获得更好的文本编辑器。

# jquery - How do i make my button link to another page, in jquery?

> ID：15714773
> 
> 赞同：0
> 
> 时间：2013-03-30T03:49:55.747
> 
> 标签：jquery, button

html

```
<input type="submit" id="submit_button" class="push" value="Complete Registration"</input> 
```

js

```
if (this.checked && $("#num_attendees option:selected").text() != 'Please Choose'
    && $.stepTwoComplete_one == 'complete' && $.stepTwoComplete_two == 'complete') {
    $("#submit_button").attr("disabled",false);
} else {
    $("#submit_button").attr("disabled",true);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T05:09:10.943

Make sure you have the submit button wrapped around a form element, and end the submit button tag correctly (as said by Dave):

```
<form action="myScript.php" method="post">
  <input type="submit" id="submit_button" class="push" value="Complete Registration"/>
</form> 
```

# perl - 如何只保留第一个参数值？

> ID：15714776
> 
> 赞同：1
> 
> 时间：2013-03-30T03:50:26.593
> 
> 标签：perl, catalyst

在我的 Perl Catalyst 应用程序中，我得到这样的 URL 参数的值，通常是：

```
my $val = $c->request->params->{arg} || ''; 
```

但 URL 可能包含多个`arg=$Val`. 我只想保留 的第一个值`arg=`。我可以在我的代码中添加这个：

```
my $val = $c->request->params->{arg} || '';
$val = $val->[0] if (ref($val) eq 'ARRAY'); 
```

那是相当丑陋的。有没有办法以更好的方式获取第一个值或 url 参数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T04:22:40.460

您的应用程序实际上是否期望参数有多个值`arg`？如果没有，你只需要

```
my $val = $c->request->params->{arg} || ''; 
```

当然，如果用户向您提供垃圾 url，那将是垃圾，但是您无法阻止用户向您提供垃圾。

如果 parameter 有多个值实际上是有效的`arg`，为什么只需要第一个值？你实际上想要所有的值。

```
sub param_vals {
   my ($params, $name) = @_;
   return () if !exists($params->{name});
   return $params->{$name} if !ref($params->{name});
   return @{ $params->{$name} };
}

my @args = param_vals($c->request->{params}, 'arg'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T03:54:34.923

我刚刚阅读了代码，`Catalyst::Request`但我没有看到任何东西总是可以提取单个值。太糟糕了，猫不使用类似的东西`Hash::MultiValue`！

# c++ - 前向声明和模板实例化上下文

> ID：15714780
> 
> 赞同：1
> 
> 时间：2013-03-30T03:51:19.833
> 
> 标签：c++, templates

我有一个标头，它前向声明了一个结构、一个函数，并定义了一个使用结构具体类型的模板函数：

---header.h

```
struct RegisterImpl;
RegisterImpl& getRegisterImpl();

template <typename Interface>
void registerModuleClass( .... )
{
  RegisterImpl& reg = getRegisterImpl();
  reg.data = 3;
  ...
} 
```

---source.cpp

```
struct RegisterImpl
{
  int data;
};

RegisterImpl& getRegisterImpl()
{
  static RegisterImpl instance;
  return instance;
}

struct testiFace
{
   virtual void Blah() = 0;
};

void useTemplate()
{
   registerModuleClass<testiFace>(....);
} 
```

我希望模板函数的实例化`registerModuleClass`将发生在`useTemplate`，这发生在`RegisterImpl`完全定义类型之后。但似乎代码的类型解析发生在模板定义存在的地方，而不是实例化（在源文件中）

我在这里错过了什么吗？这里的困境是模板函数需要使用实现的具体类型，而具体类型发生在源文件中。有什么办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T04:12:40.650

我不确定这个建议是否会对您的情况有所帮助，但这里有一个想法：您可以将代码包装在需要`RegisterImpl`作为模板参数的类模板中。

例子：

```
template<typename T>
struct Helper
{
    T & getRegisterImpl()
    {
        static T instance;
        return instance;
    }

    template<typename Interface>
    void registerModuleClass()
    {
        T & reg = getRegisterImpl();
    }
}; 
```

然后：

```
struct RegisterImpl
{
    int data;
};

Helper<RegisterImpl> helper; 
```

我希望这有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T14:54:59.357

使其依赖于模板参数：

```
template<typename T, typename...> struct depend { typedef T type; };

template <typename Interface>
void registerModuleClass( .... )
{
  typedef typename depend<RegisterImpl,Interface>::type LocalRegisterImpl;
  LocalRegisterImpl& reg = getRegisterImpl();
  reg.data = 3;
  ...
} 
```

# css - Highcharts 使用 z-index 在绘图上显示网格

> ID：15714784
> 
> 赞同：2
> 
> 时间：2013-03-30T03:51:52.897
> 
> 标签：css, highcharts

我正在尝试显示一个图形，其中 xAxis 和 yAxis 网格线覆盖在图的顶部。

我可以设置绘图的 zIndex，但似乎没有设置网格 zIndex 的选项。如果不可能，我可以降低绘图的不透明度，以便网格从下方显示出来，但我不想那样做。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-30T07:51:09.827

我找不到办法。即使将系列上的 zIndex 设置为 -99 也没有什么区别。您是否考虑过使用情节线或情节带来绘制自己的？这些都支持 zIndex。

更新：

原始海报发现 highstock gridZIndex 选项适用于 highcharts。

[http://api.highcharts.com/highstock#xAxis.gridZIndex](http://api.highcharts.com/highstock#xAxis.gridZIndex)

# ruby-on-rails - 带有乘客和 rvm 1.19 的 nginx，.rvmrc 有时不起作用

> ID：15714785
> 
> 赞同：0
> 
> 时间：2013-03-30T03:51:57.807
> 
> 标签：ruby-on-rails, nginx, passenger

我正在使用**nginx**、乘客和**rvm 1.19**

一切都很好，但是当我在我的 rails 项目的根目录下创建 .rvmrc 时，如下所示：

> rvm 使用 1.9.3@rails3213

并启动 nginx，它第一次工作，但一段时间后，`PAGE NOT FOUND`当我在浏览器中加载我的页面时，服务器给我，当我`cd`到我的项目时它给我这个警告：

> 您正在使用 '.rvmrc'，它需要信任，速度较慢并且与其他 ruby​​ 管理器不兼容，您可以使用 'rvm rvmrc to [.]ruby-version' 切换到 '.ruby-version' 或忽略此带有“rvm rvmrc warning ignore /home/ubuntu/projects/test/.rvmrc”的警告，“.rvmrc”将继续是 RVM 1 和 RVM 2 中的默认项目文件，以忽略所有运行“rvm rvmrc”的文件的警告警告忽略 all.rvmrcs'。

与`/home/ubuntu/.rvm/gems/ruby-1.9.3-p392`_`gemset rails3213`

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T05:29:48.673

您是否已经信任您的文件？

```
 rvm rvmrc trust /home/ubuntu/projects/test 
```

顺便说一句，你是如何运行你的应用程序的？我的意思是，你有 nginx，你用什么来运行 rails，你是如何做从 nginx 到 rails 的代理的？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T06:25:27.903

> (...) 您可以使用 'rvm rvmrc to [.]ruby-version' 切换到 '.ruby-version'
> 
> 或使用 'rvm rvmrc warning ignore /(...)/.rvmrc' (...) 忽略此警告

我会试试的。

另外，看看[Use rvmrc or ruby​​-version file to set a project gemset with RVM?](https://stackoverflow.com/questions/15708916/use-rvmrc-or-ruby-version-file-to-set-a-project-gemset-with-rvm)

# zend-framework - 如何在zend框架的引导文件中区分管理模块和主应用程序

> ID：15714790
> 
> 赞同：0
> 
> 时间：2013-03-30T03:52:49.380
> 
> 标签：zend-framework, module, bootstrapping

请为我的查询提供适当的解决方案。我试图解决它，但没有得到任何适当的解决方案。请给我正确的解决方案。

如果我从 application.ini 文件中删除以下行，那么它适用于前端应用程序

```
resources.modules[] = 
```

删除它后，我无法在具有正确布局的模块文件夹中获取我创建的模块（管理员）。我只有一个模块。在模块引导文件中，我定义了以下函数（project/application/modules/admin/Bootstrap.php）

```
<?php
class Admin_Bootstrap extends Zend_Application_Module_Bootstrap
{
    protected function _initAppAutoload()
    {
        $autoloader = new Zend_Application_Module_Autoloader(array(
            'namespace' => 'admin',
            'basePath' => APPLICATION_PATH . '/modules/admin/'
        ));
        return $autoloader;
    }
    protected function _initPlugins()
    {
        $bootstrap = $this->getApplication();
        if ($bootstrap instanceof Zend_Application) {
            $bootstrap = $this;
        }
        $bootstrap->bootstrap('FrontController');
        $front = $bootstrap->getResource('FrontController');

        $plugin = new Admin_Plugin_Layout();
    //    $plugin->setBootstrap($this);
        $front->registerPlugin($plugin);
    }

    protected function _initAuthPlugin()
    {
       $checkAuth = Zend_Controller_Front::getInstance();
       $checkAuth->registerPlugin(new Admin_Plugin_CheckAuth(Zend_Auth::getInstance()));
    }

    protected function _initDoctype()
    {
      global $adminModuleCssPath;
      global $adminModuleJsPath;
      $this->bootstrap( 'view' );
      $view = $this->getResource( 'view' );

      $view->headTitle('Jyotish - Ek Gyan');
      $view->headScript()->appendFile($adminModuleJsPath.'jquery-1.7.2.js');
      $view->headScript()->appendFile($adminModuleJsPath.'jquery-ui.js');     
      $view->headScript()->appendFile($adminModuleJsPath.'tinybox.js');
      $view->headScript()->appendFile($adminModuleJsPath.'common.js');
      $view->headLink()->appendStylesheet($adminModuleCssPath.'jquery-ui.css');
      $view->headLink()->appendStylesheet($adminModuleCssPath.'style.css');
      $view->headLink()->appendStylesheet($adminModuleCssPath.'theme.css');
      $view->headLink()->appendStylesheet($adminModuleCssPath.'tinybox.css');
      $view->doctype( 'XHTML1_STRICT' );
      //$view->navigation = $this->buildMenu();
    }

    protected function _initLayoutPlugin()
    {
         $layout = Zend_Controller_Front::getInstance();
         $layout->registerPlugin(new Admin_Plugin_AdminLayout());

    }

    protected function _initRouter()
    {
        $frontController = Zend_Controller_Front::getInstance();
        $router = $frontController->getRouter();
        $route = new Zend_Controller_Router_Route(
                 ':module/:controller/:action/*',
                 array('module' => 'admin')
              );
        $router->addRoute('default', $route);

        $usersRoute = new Zend_Controller_Router_Route_Regex(
                      ':module/:controller/:action/(?:/page/(\d+)/?)?',
                      array(
                            'module' => 'admin',
                            'controller' => 'users',
                            'action' => 'index',
                            'page' => 1,
                            ),
                      array(
                              'page' => 1,
                            )
                    );

        $router->addRoute('users-index', $usersRoute);

    }

    protected function _initActionHelpers()
    { 
        Zend_Controller_Action_HelperBroker::addPath(APPLICATION_PATH . "/modules/admin/views/helpers");
        Zend_Controller_Action_HelperBroker::addPrefix('Admin_View_Helper');
    }

} 
```

在模块文件夹中，我创建了以下插件布局

```
class Admin_Plugin_Layout extends Zend_Controller_Plugin_Abstract
{
    public function routeShutdown(Zend_Controller_Request_Abstract $request)
    {
       if ('admin' != $request->getModuleName()) {
            // If not in this module, return early
            return;
        }
        // Change layout
        Zend_Layout::getMvcInstance()->setLayout('admin');
    }
} 
```

在前端引导文件中，我定义了以下函数（project/application/Bootstrap.php）

```
class Bootstrap extends Zend_Application_Bootstrap_Bootstrap
{
    protected function _initAppAutoload()
    {
        $autoloader = new Zend_Application_Module_Autoloader(array(
            'namespace' => 'default',
            'basePath' => dirname(__FILE__),
        ));
        return $autoloader;
    }
        protected function _initLayoutHelper()
        {
            $this->bootstrap('frontController');
            $layout = Zend_Controller_Action_HelperBroker::addHelper(
                new Application_View_Helper_LayoutLoader());
        }
    } 
```

我在（project/application/view/helper/LayoutLoader.php）中创建了以下帮助文件

```
<?php
class Application_View_Helper_LayoutLoader extends Zend_Controller_Action_Helper_Abstract
{

    public function preDispatch()
    {
        $bootstrap = $this->getActionController()
                         ->getInvokeArg('bootstrap');
        $config = $bootstrap->getOptions();
        $module = $this->getRequest()->getModuleName();
        if (isset($config[$module]['resources']['layout']['layout'])) {
            $layoutScript =
                 $config[$module]['resources']['layout']['layout'];
            $this->getActionController()
                 ->getHelper('layout')
                 ->setLayout($layoutScript);
        }

    }

} 
```

从最近两天开始，我试图为两者创建单独的布局，但我无法获得正确的解决方案。当我在浏览器中运行管理模块时，它运行良好，但是当我运行前端应用程序文件夹时，它显示管理布局的异常错误。

请给我正确的解决方案....

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T08:56:57.017

进行布局切换的标准方法是使用[前端控制器插件](http://devzone.zend.com/1224/front-controller-plugins-in-zend-framework/)。你不需要带钩子的`LayoutLoader`助手。`preDispatch`

一个简单的布局切换器插件可以实现如下。

将您的各种布局文件放在 中`application/layouts/scripts/`，与您的模块命名相同：`default.phtml`、`admin.phtml`等。

在文件中`application/plugins/Layout.php`：

```
class Application_Plugin_Layout extends Zend_Controller_Plugin_Abstract
{
    public function preDispatch(Zend_Controller_Request_Abstract $request)
    {
        Zend_Layout::getMvcInstance()->setLayout($request->getModuleName());
    }
} 
```

启用插件`application/configs/application.ini`使用：

```
resources.frontController.plugins.layout = "Application_Plugin_Layout" 
```

或通过在`Bootstrap`.

此外，请确保您`application.ini`启用模块并确定您的布局位置：

```
resources.modules[]=
resources.layout.layoutPath = APPLICATION_PATH "/layouts/scripts/" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T07:09:08.080

你似乎想多了。我将把它简化为基本的，你可以在你认为合适的时候添加回来。

ZF1 中的引导系统是个坏笑话。引导文件之一中存在的任何内容都将在运行时对所有模块可用，并将随每个请求一起运行。所以保持简单并保持轻便。我通常将所有 _init 方法放在主引导程序中，并将模块引导程序留空。

```
//simplify your bootstrap to minimum
class Bootstrap extends Zend_Application_Bootstrap_Bootstrap
{

    //your app autoloader is the standard autoloader so is not needed here, it better just work.

   /**
    * initialize the session
    */
    protected function _initsession()
    {
        Zend_Session::start();
    }

    /**
     * initialize the registry and assign application.ini to config namespace
     */
    protected function _initRegistry()
    {
        $config = new Zend_Config($this->getOptions());
        Zend_Registry::set('config', $config);
    }

    protected function _initView()
    {
        //Initialize view
        $view = new Zend_View();
        //add custom view helper path
        $view->addHelperPath('/../library/My/View/Helper');
        //set doctype for default layout
        $view->doctype(Zend_Registry::get('config')->resources->view->doctype);
        //set default title
        $view->headTitle('Jyotish - Ek Gyan');

        //set css includes
        $view->headlink()->setStylesheet('/bootstrap/css/bootstrap.min.css');
        //add javascript files
        $view->headScript()->setFile('/bootstrap/js/jquery.min.js');
        $view->headScript()->appendFile('/bootstrap/js/bootstrap.min.js');
        //add it to the view renderer
        $viewRenderer = Zend_Controller_Action_HelperBroker::getStaticHelper(
                'ViewRenderer');
        $viewRenderer->setView($view);
        //Return it, so that it can be stored by the bootstrap
        return $view;
    }

     /**
      * Not sure if this is really required as it seems as though your routes are pretty standard.
      */
     protected function _initRouter()
    {
        $frontController = Zend_Controller_Front::getInstance();
        $router = $frontController->getRouter();
        $route = new Zend_Controller_Router_Route(
                 ':module/:controller/:action/*',
                 array('module' => 'admin')
              );
        $router->addRoute('default', $route);

        $usersRoute = new Zend_Controller_Router_Route_Regex(
                  ':module/:controller/:action/(?:/page/(\d+)/?)?',
                  array(
                        'module' => 'admin',
                        'controller' => 'users',
                        'action' => 'index',
                        'page' => 1,
                        ),
                  array(
                          'page' => 1,
                        )
                );

        $router->addRoute('users-index', $usersRoute);

    }
    protected function _initAuthPlugin()
    {
       $checkAuth = Zend_Controller_Front::getInstance();
       $checkAuth->registerPlugin(new Admin_Plugin_CheckAuth(Zend_Auth::getInstance()));
    }
} 
```

application.ini 是应用程序配置中非常重要的一部分：

```
//truncated for example
[production]
;-------------------------------------------------------------------------------
;//PHP
;-------------------------------------------------------------------------------

phpSettings.display_startup_errors = 0
phpSettings.display_errors = 0

;-------------------------------------------------------------------------------
;//Paths and Namespaces, paths for application resources and library
;-------------------------------------------------------------------------------

includePaths.library = APPLICATION_PATH "/../library"
bootstrap.path = APPLICATION_PATH "/Bootstrap.php"
bootstrap.class = "Bootstrap"
appnamespace = "Application"
autoloaderNamespaces[] = "My_"

;-------------------------------------------------------------------------------
;//Front Controller, default settings for controllers and modules
;-------------------------------------------------------------------------------

resources.frontController.controllerDirectory = APPLICATION_PATH "/controllers"
resources.frontController.params.displayExceptions = 0
resources.frontController.moduleControllerDirectoryName = "controllers"
resources.frontController.params.prefixDefaultModule = ""
resources.modules = ""
resources.frontController.baseurl = http://example.com
resources.frontController.moduleDirectory = APPLICATION_PATH "/modules"

;-------------------------------------------------------------------------------
;//plugins, default paths for resource plugins and action helpers, can also be 
;         //accomplished in the bootstrap
;-------------------------------------------------------------------------------

pluginPaths.My_Application_Resource = APPLICATION_PATH "/../library/My/Resource"
resources.frontController.actionhelperpaths.My_Controller_Action_Helper = APPLICATION_PATH "/../library/My/Controller/Action/Helper"

;-------------------------------------------------------------------------------
;//View Settings, view settings to be shared with the view object in the bootstrap
;//               allows for easier editing.
;-------------------------------------------------------------------------------

resources.view[]=
resources.view.charset = "UTF-8"
resources.view.encoding = "UTF-8"
resources.view.doctype = "HTML5"
resources.view.language = "en"
resources.view.contentType = "text/html; charset=UTF-8"

;-------------------------------------------------------------------------------
;//Database Settings, default database adapter settings
;-------------------------------------------------------------------------------

resources.db.adapter = "pdo_Mysql"
resources.db.params.username = "user"
resources.db.params.password = "xxxx"
resources.db.params.dbname = "dbname"
resources.db.params.charset = "utf8"
resources.db.isDefaultTableAdapter = true
resources.db.params.profiler = true

;-------------------------------------------------------------------------------
;//Layouts, default path to layout files and default layout name
;-------------------------------------------------------------------------------

resources.layout.layoutPath = APPLICATION_PATH "/layouts/scripts/"
resources.layout.layout = layout 
```

现在完成布局切换的最简单方法是在每个控制器的基础上切换布局，使用默认布局，除非您明确更改它：

```
//some controller that needs the admin layout
//note: preDispatch() and routeShutdown() are essentially the same point in the loop
public function preDispatch() {
        //switch to new layout
        $this->_helper->layout->setLayout('admin');

        //you can also manipulate the css and js similarly to the bootstrap
        $this->view->headScript()->appendFile(
        '/javascript/mediaelement/build/mediaelement-and-player.min.js');

        $this->view->inlineScript()->setScript(
            "$('audio').mediaelementplayer();");
    } 
```

我发现如果我只需要一种或两种不同的布局，这很好用而且很简单。不是真正的***DRY解决方案，但如果需要******DRY***解决方案，它确实可以帮助开发插件的参数。

我希望这能提供一些帮助，要记住的重要一点是模块引导程序基本上只是主引导程序的扩展，并且**不**提供功能分离。

**PS**我会提供一个插件演示，但我真的很讨厌插件，对不起。

# autohotkey - GUI 按钮创建文本 4 次

> ID：15714798
> 
> 赞同：0
> 
> 时间：2013-03-30T03:54:18.687
> 
> 标签：autohotkey

我正在尝试创建我的第一个 GUI。我今天才开始使用 AHK，并且大部分情况下发现它非常易于使用。我被困在一件事上。我创建了这个 GUI 来显示按钮，然后根据选择的内容输入某些文本。当我选择按钮时，它正在输入正确的文本，但它正在输入四次。我已经取下了一个按钮，所以只有三个，但它仍然会输入四次。我需要做些什么来确保它只输入一次？

```
MyGUI:

#SingleInstance Force
Gui, +LastFound +AlwaysOnTop

GUI, Add, Button, x10 y10 w75 h25 gClick1, Button &1
GUI, Add, Button, x95 y10 w75 h25 gClick2, Button &2
GUI, Add, Button, x10 y45 w75 h25 gClick3, ButtonS &3
GUI, Add, Button, x95 y45 w75 h25 gClickCancel, &Cancel
GUI, Show, w200 h100,My GUI
Return

Click1:
Send The first button was selected
Gui Hide
Return

Click2:
Send The second button was selected
Gui Hide
Return

Click3:
Send The third button was selected
Gui Hide
Return

ClickCancel:
Send The cancel button was selected
Gui Hide
Return 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T07:51:42.183

我尚未对其进行测试，但可能是您的发送正在启动它。请记住，您首先发送键盘序列，然后隐藏 GUI，因此在您的情况下，GUI 在您发送的那一刻仍然处于活动状态！尝试先隐藏 GUI，然后发送或最初用 MsgBox 替换发送进行测试。您也可以在发送数据之前先发送一个 !{Esc} 将焦点切换回上一个应用程序，这样您就不需要隐藏 GUI。

好的，刚刚测试了我的假设，添加 !{Esc} 并按预期工作。

```
#SingleInstance Force
Gui, +LastFound +AlwaysOnTop

GUI, Add, Button, x10 y10 w75 h25 gClick1, Button &1
GUI, Add, Button, x95 y10 w75 h25 gClick2, Button &2
GUI, Add, Button, x10 y45 w75 h25 gClick3, ButtonS &3
GUI, Add, Button, x95 y45 w75 h25 gClickCancel, &Cancel
GUI, Show, w200 h100,My GUI
Return

Click1:
Send, !{Esc}
Send, The first button was selected
;Gui Hide
Return

Click2:
Send, !{Esc}
MsgBox, The second button was selected
;Gui Hide
Return

Click3:
Send, !{Esc}
MsgBox, The third button was selected
;Gui Hide
Return

ClickCancel:
Send, !{Esc}
MsgBox, The cancel button was selected
;Gui Hide
Return 
```

# c# - ASP.NET 4 RouteDictionary 不采用默认值

> ID：15714799
> 
> 赞同：0
> 
> 时间：2013-03-30T03:54:24.543
> 
> 标签：c#, asp.net, routing

我在 ASP.NET 4 中有这条路线

```
routes.MapPageRoute("Professions",     // Route Name  
 "authors/profession/{Profession}/{letter}/page{pager}",  // Url and Parameters  
  "~/Authors/Profession/Default.aspx", true, 
new System.Web.Routing.RouteValueDictionary { { "letter", "a" }, { "pager", "1" } }); // 
```

如果我访问这样的页面 [http://www.mysite.com/authors/profession/actor/a/page1它会起作用](http://www.mysite.com/authors/profession/actor/a/page1)

但这不起作用[http://www.mysite.com/authors/profession/actor](http://www.mysite.com/authors/profession/actor) （它应该自动添加字母'a'和第1页，我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T07:29:26.723

您在这里遇到的问题是路径中的文本“页面”，它**在**您的`{letter}`令牌之后（您没有在示例 url 中提供）。

为了使路由引擎匹配该路由，您需要在 url 中的某处同时使用“字母”和**文本“页面”。**因此，您的示例`/authors/profession/actor`将**不**匹配，而`/authors/profession/actor/a/page` **将**匹配并使用`{pager}`令牌的默认值 1。

我认为解决此问题的最佳方法是以下路线设置：

```
routes.MapPageRoute("Professions",     // Route Name  
 "authors/profession/{profession}/{letter}/{pager}",  // Url and Parameters  
  "~/Authors/Profession/Default.aspx", true, 
new System.Web.Routing.RouteValueDictionary { { "letter", "a" }, { "pager", "1" } }); 
```

本质上，只需将“页面”文本从路径中取出，这样当您拥有`/authors/profession/actor`它时，它会直接转到字母“a”和页面“1”。完整的 url 类似于`/authors/profession/actor/d/34`.

那有意义吗？你的路由是完全有效的，但你**总是**必须为`{letter}`令牌提供一些东西，并且在那里也有文本“页面”。

# php - Mysql Error Issue When Insert Query Is Run

> ID：15714801
> 
> 赞同：0
> 
> 时间：2013-03-30T03:54:40.327
> 
> 标签：php, mysql

I have a HTML form. After submit the form it's show following error message:

**Error Message:**

```
You have an error in your SQL syntax; check the manual that corresponds to your MySQL 
server version for the right syntax to use near 'm ok. ', 'point of interest', 
'91354857', '6546564654', '2 Person', '25', 'engl' at line 1 
```

**Mysql Query:**

```
$insert = mysql_query("INSERT INTO host_signup VALUES('', '$uname', '$f_name', 
'$pr_lname', '$email', '$hashpass', '$title', '$country', '$city', '$state', 
'$postalcode', '$address', '$final_neighbor', '$landline', '$mobileph', '$capacity', 
'$age', '$language', '$final_interest', '$news', '$ip', '$dof', '0' )"); 
```

Actually it's show the error message when I put `stripslashes()` in the variable But without `stripslashes()` it's show backslashes.

For example:

```
$address = $_POST['address'];       
$address = stripslashes($address); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T03:57:03.730

You need to escape your sql values before putting them in a query. looks like one of your strings had a `'` and mysql cut that? I'm guessing that `'m ok. '` is the end of "i'm ok.".

That string should be `i\'m ok.`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T04:05:15.367

You need to use `addslashes`.

> `addslashes` — Quote string with slashes

### [`Official Document`](http://php.net/manual/en/function.addslashes.php)

**Example**

```
<?php
  $str = "Is your name O'reilly?";
  // Outputs: Is your name O\'reilly?
  echo addslashes($str);
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-30T04:20:13.370

You should use [`mysql_real_escape_string()`](http://www.php.net/manual/en/mysqli.real-escape-string.php) -- *not* `addslashes()`, as suggested by others

The [`addslashes()` documentation](http://php.net/manual/en/function.addslashes.php) concurs:

> It's highly recommended to use DBMS specific escape function (e.g. mysqli_real_escape_string() for MySQL or pg_escape_string() for PostgreSQL), but if the DBMS you're using doesn't have an escape function and the DBMS uses \ to escape special chars, you can use this function.

# git - 如何仅在 Git 的特定分支中跟踪文件

> ID：15714806
> 
> 赞同：0
> 
> 时间：2013-03-30T03:56:29.793
> 
> 标签：git, github, git-branch

Github repo 的 local_settings.py 文件在 .gitignore 中被忽略

我的系统上本地有一个生产分支。一旦master中有更新，我们就会重新设置基准。但是，这个分支需要跟踪 local_settings.py 才能推送到服务器！！

如果我在生产分支/.gitignore 中删除此文件并提交，local_settings.py 将进入此分支并在所有其他分支中消失，从而无法在我的系统上本地运行项目。哎呀..

如何解决？有更好的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T04:00:12.340

我在我的项目中解决这个问题的方法是使用一组三个文件：`dev_settings.py`、`staging_settings.py`和`prod_settings.py`，所有这些文件都是版本化的（还有`dev_settings_local.py`样式未版本化的配置，因此每个开发人员都可以覆盖默认值）。

环境变量或符号链接选择将在每台机器上使用的配置。

现在您的生产配置是版本化的，这意味着您不必仅在某些情况下尝试 gitignore 文件。

# php - 获取已安装 composer 包的文件系统路径

> ID：15714809
> 
> 赞同：11
> 
> 时间：2013-03-30T03:56:55.720
> 
> 标签：php, composer-php

如何获取作曲家包的文件系统路径？

composer.json 示例：

```
{

    "require" : {
        "codeception/codeception" : "@stable",
        "willdurand/geocoder": "*"
    }
} 
```

例子： `$composer->getPath("\Geocoder\HttpAdapter\HttpAdapterInterface");`

并将其返回为： `"/home/me/public_html/vendor/willdurand/geocoder/src/Geocoder/HttpAdapter"`

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2015-01-11T20:04:51.317

*所有这一切都基于您实际上在谈论**包**而不是类（在示例中提到但在问题中未要求）的假设。*

如果你有`Composer`对象，你可以从对象中获取供应商目录的路径`Config`：

```
 $vendorPath = $composer->getConfig()->get('vendor-dir'); 
```

`$vendorPath`现在应该包含`/home/me/public_html/vendor/`.

从那里构建路径的其余部分应该不会太难，因为您已经有了包名称。

如果这感觉太不稳定或者您不想编写逻辑，还有另一种解决方案。您可以获取所有包，迭代直到找到正确的包并从中获取路径：

```
 $repositoryManager = $composer->getRepositoryManager();
    $installationManager = $composer->getInstallationManager();
    $localRepository = $repositoryManager->getLocalRepository();

    $packages = $localRepository->getPackages();
    foreach ($packages as $package) {
        if ($package->getName() === 'willdurand/geocoder') {
            $installPath = $installationManager->getInstallPath($package);
            break;
        }
    } 
```

`$installPath`现在应该包含`/home/me/public_html/vendor/willdurand/geocoder`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-04-04T14:43:44.693

尝试 ReflectionClass::getFileName - 获取已定义类的文件的文件名。 [http://www.php.net/manual/en/reflectionclass.getfilename.php](http://www.php.net/manual/en/reflectionclass.getfilename.php)

例子：

```
$reflector = new ReflectionClass("\Geocoder\HttpAdapter\HttpAdapterInterface");
echo $reflector->getFileName(); 
```

或者你可以使用这个：

```
$loader = require './vendor/autoload.php';
echo $loader->findFile("\Geocoder\HttpAdapter\HttpAdapterInterface"); 
```

第一种方法尝试加载类并返回加载的类路径。第二种方法从作曲家数据库返回路径，没有类自动加载。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-04-21T13:04:37.660

这是我在不使用 $composer 对象的情况下获取供应商路径的解决方案：

```
<?php

namespace MyPackage;

use Composer\Autoload\ClassLoader;

class MyClass
{
    private function getVendorPath()
    {
        $reflector = new \ReflectionClass(ClassLoader::class);
        $vendorPath = preg_replace('/^(.*)\/composer\/ClassLoader\.php$/', '$1', $reflector->getFileName() );
        if($vendorPath && is_dir($vendorPath)) {
            return $vendorPath . '/';
        }
        throw new \RuntimeException('Unable to detect vendor path.');
    }
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-30T10:00:18.210

不确定以下是否是正确的方法，因为作曲家变化如此之快。

如果您运行此命令：

```
php /path/to/composer.phar dump-autoload -o 
```

它将在这个文件中创建一个类映射数组

```
vender/composer/autoload_classmap.php 
```

使用这种格式“类名”=> 文件路径。

所以找到给定类的文件路径很简单。如果您在项目的根文件夹中创建脚本，您可以这样做：

```
$classmap = require('vender/composer/autoload_classmap.php');
$filepath = $classmap[$classname]?: null; 
```

# command-line-arguments - Using NSIS command line to globally define product definitions

> ID：15714812
> 
> 赞同：1
> 
> 时间：2013-03-30T03:57:55.447
> 
> 标签：command-line-arguments, nsis

I'd like to control the branding for my NSIS installer by passing a parameter to makensis:

```
makensis.exe /DCOMPANY_X=1 installer.nsi 
```

The following are the first few lines listed in my NSI file:

```
!ifdef ${COMPANY_X}
  !define PRODUCT_NAME "Widget Pro"
  !define PRODUCT_VERSION "v2.0"
  !define PRODUCT_PUBLISHER "ACE Company"
  !define PRODUCT_WEB_SITE "www.ace.com"
  !define PRODUCT_COPYRIGHT "Copyright 2013 Ace"
!else
  !define PRODUCT_NAME "Widget Maker"
  !define PRODUCT_VERSION "v12.3"
  !define PRODUCT_PUBLISHER "ACME CO"
  !define PRODUCT_WEB_SITE "www.acme.com"
  !define PRODUCT_COPYRIGHT "Copyright 2013 ACME"
!endif 
```

I use these defines throughout my script.

The problem I'm encountering is that even with COMPANY_X defined on the command line, execution is passing through to the second block of defines (ACME).

Being new to NSIS, I'm sure there's a better way to handle this. I'd also like to use a switch statement to define multiple companies. If I do this, the compiler warns me that I need to place this code in a section or function.

One thing that might complicate a solution for this is that I'm signing my uinstaller with a two pass process: [http://nsis.sourceforge.net/Signing_an_Uninstaller](http://nsis.sourceforge.net/Signing_an_Uninstaller)

Kudos to the NSIS team and all the contributors. No way I'd ever go back to InstallShield.

Thanks in advance for any help.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-30T04:59:05.190

`!ifdef ${COMPANY_X}` is actually going to check if `1` is defined!

The syntax is !ifdef name_of_define: `!ifdef COMPANY_X`

...or if the content of the define matters: `!if ${COMPANY_X} = 1`

# google-drive-api - Can one use the Drive SDK to programmatically @mention other users in document comments?

> ID：15714818
> 
> 赞同：0
> 
> 时间：2013-03-30T03:59:44.780
> 
> 标签：google-drive-api

Google Apps support @mentions through the application. Is there a way to programmatically do @mentions using the Drive SDK API?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T17:29:34.277

You can use the API to add comments that include @mentions. You can actually use the "+EMAIL_ADDRESS" syntax or the "@EMAIL_ADDRESS" syntax in the content field of a comment created with the API and it will be treated as a mention.

# java - 是否有在 selectOneMenu 中显示时区的库

> ID：15714820
> 
> 赞同：0
> 
> 时间：2013-03-30T03:59:56.463
> 
> 标签：java, jsf-2, timezone, selectonemenu

目前，在我的应用程序中，我使用以下代码段来实例化一个时区列表以显示在 a 中`selectOneMenu`：

```
@Named
@ApplicationScoped
public class MrBean {
    private String[] timezoneIDs;

    @PostConstruct
    public void init() {
        this.timezoneIDs = TimeZone.getAvailableIDs();
    }
} 
```

我**需要并**从此列表中获得的好处是`Olson`我可以轻松地与`Joda-Time`库一起使用的时区 ID。但是，该列表很长，其中包含 Java 中所有可用的时区。简而言之，它对**用户不友好**。

![在此处输入图像描述](../Images/fcee08aab20dbabb789e6efdc72653b3.png)

一开始，我想显示一个`GMT`时区列表，但我不知道，例如，对应的奥尔森时区 ID`GMT+3`是什么。结果，我无法`selectItems`为`selectOneMenu`. 这就是我必须使用`TimeZone.getAvailableIDs();`.

`GMT`如果您能建议一个库来帮助我使用标签和 Olson 时区 ID 值填充时区列表，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T21:17:09.753

您可能会发现[这篇文章](http://n.exts.ch/2012/03/timezone_pickers)很有趣。

简而言之 - 最好的时区选择器根本没有。但其次是基于地图的选择器。

我最喜欢的 JavaScript 时区选择器是[这个](https://github.com/dosx/timezone-picker)。

我不知道Java是否有类似的东西。快速搜索一无所获。如果有人知道一个好的基于地图的 Java 时区选择器控件/小部件，请发布链接。谢谢。

# netbeans - 无法在 Java 移动设备上测试 j2me 应用程序

> ID：15714823
> 
> 赞同：0
> 
> 时间：2013-03-30T04:00:03.477
> 
> 标签：netbeans, java-me

我正在使用**Netbeans**开发 J2ME 应用程序。我可以在模拟器中运行该应用程序**，**但是当我尝试在我的 java 手机中复制 .jar 文件时，它没有运行，显示**Nullpointer 异常。** 请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T06:27:16.217

检查您的 jad 设置以了解 midlet 设置。您是否指定正确或遗漏任何内容，例如 midlet 名称等

# c++ - 如何在 C 中调用的 matlab 函数中使用“全局静态”变量

> ID：15714825
> 
> 赞同：5
> 
> 时间：2013-03-30T04:00:19.827
> 
> 标签：c++, matlab, global-variables, matlab-deployment, matlab-compiler

嗨，我目前正在使用 MATLAB 和 C 进行编码。我已经使用[MATLAB Compiler](http://www.mathworks.com/help/compiler/shared-libraries.html) (mcc) 将 MATLAB 函数编译到 C 共享库中，并在 C++ 程序中调用了共享库中的函数。

在 C++ 中调用时，是否可以声明全局变量以在 MATLAB 函数之间共享数据？

确切的说，如果matlab中有一个函数`matlabA()`和函数`matlabB()`，并且使用mcc编译器as `cppA()`and编译成c++共享库，我可以通过在and`cppB()`中声明变量为全局变量来共享它们之间的变量吗？`matlabA()``matlabB()`

它似乎不起作用，那么我如何在函数之间共享变量？

谢谢！

### MATLAB

```
function matlabA()
    global foo
    foo = 1;
end

function matlabB()
    global foo
    foo
end 
```

### C++

```
cppA();
cppB(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T12:18:30.753

根据Loren Shure 的[这篇博](http://blogs.mathworks.com/loren/2008/06/19/writing-deployable-code/)文，强烈建议不要在部署的应用程序中使用非常量静态变量（例如读/写全局变量）。

相反，您可以创建一个[句柄类](http://www.mathworks.com/help/matlab/handle-classes.html)来封装数据，并将对象显式传递给这些函数（具有引用复制语义）。

例子：

### FooData.m

```
classdef FooData < handle
    properties
        val
    end
end 
```

### fun_A.m

```
function foo = fun_A()
    foo = FooData();
    foo.val = 1;
end 
```

### fun_B.m

```
function fun_B(foo)
    disp(foo.val)
end 
```

# macos - 在安装过程中删除包标识符文件

> ID：15714829
> 
> 赞同：0
> 
> 时间：2013-03-30T04:01:15.970
> 
> 标签：macos, shell, installation, packagemaker

我是 OSx 开发的新手。

我正在使用 Packagemaker 3.0.4 创建一个安装程序包。由于我想在安装过程中删除我的应用程序的本地设置，我决定删除 com.identifier.plist。但是，我的脚本编写并不是那么好，我才刚刚开始探索 Packagemaker 的能力。

理想情况下，我希望我的实现像这样简单：

1.  检查 .plist 文件是否存在
2.  去掉它。

我试过了：

```
#!/bin/sh
defaults delete ~/Library/Preferences/com.identifier.AppName.plist 
```

然后我将 delete.sh 文件保存到桌面。我打开了 Packagemaker 应用程序并在 Scripts Postflight 中提供了我的桌面的路径：/Users/MyName/Desktop/delete.sh。然后我执行了构建和运行。它没有用。我认为它可能是脚本，所以我将其更改为：

```
#!/bin/sh
rm ~/Library/Preferences/com.identifier.AppName.plist; 
```

然后我以与上面脚本相同的方式加载了 delete.sh 文件。但我收到了这个错误：

3 月 29 日 20:50:54 Mac-mini installd[5425]：PackageKit：安装失败：PKG：“com.testIdentifier.test.AppName.pkg”的飞行后脚本\nError Domain=PKInstallErrorDomain Code=112 UserInfo=0x100404220“从包“test.pkg”运行脚本时出错。” {\n NSFilePath = "./postflight";\n NSLocalizedDescription = "从包 \U201ctest.pkg\U201d. 运行脚本时出错。";\n NSURL = "./Contents/Packages/test.pkg -- file://localhost/Users/MyName/Desktop/AppName.mpkg/";\n PKInstallPackageIdentifier = "com.testIdentifier.test.AppName.pkg";\n}

如果有人有创建和添加脚本到 Packagemaker 的分步实现，也许我的脚本不正确，如果你能帮助我，那就太棒了。

非常感谢您！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T06:17:40.587

您是否尝试从终端启动您的 delete.sh？看起来您的语法有错误 - ';' 在 rm 命令结束时，您应该为 rm 命令使用 -f 标志（请参阅`man rm`），否则脚本将提示确认并且 postflight 脚本不能是交互式的。
**编辑**：正如一二三提到的分号 - 不是重点，你应该看看他的回答。在您创建包之前，只需在终端中尝试您的脚本（您可以`sudo su`在以 root 身份登录之前执行此操作）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T18:20:44.637

我懂了...

这是我的脚本：

```
#!/usr/bin/env bash

file=~/Library/Preferences//com.identifier.AppName.plist
if [ -e "$file" ]
then
# file is found
/usr/bin/defaults delete ~/Library/Preferences//com.identifier.AppName
else
# file not found."
fi

exit 0 
```

I then added it to PackageMaker. I'm not really sure if I'm right but I might have just forgotten to add the script's file into the contents. That's why it never worked earlier. I just put the script's path on the postflight.

Anyway, thanks a lot to everyone for the tips.

# prolog - Prolog 仅使用兄弟和姐妹规则的父关系

> ID：15714834
> 
> 赞同：0
> 
> 时间：2013-03-30T04:02:28.417
> 
> 标签：prolog

这是我第一次使用 Prolog，我想知道是否有人可以就我的逻辑给我一些建议：

```
male(jerry).
male(stuart).
male(warren).
male(peter).
female(kather).
female(maryalice).
female(ann).
brother(jerry,stuart).
brother(jerry,kather).
brother(peter, warren).
sister(ann, maryalice).
sister(kather,jerry).
parent_of(warren,jerry).
parent_of(maryalice,jerry). 
```

这是家庭作业的一部分，我们只能使用上述事实。为了知道沃伦和玛丽爱丽丝也是斯图尔特和凯瑟的父母，需要执行一些规则。我所做的是：

```
parent_of(X,Y) :- brother(Z,Y), parent_of(X,Z).
parent_of(X,Y) :- brother(Y,Z), parent_of(X,Z).
parent_of(X,Y) :- sister(Z,Y), parent_of(X,Z).
parent_of(X,Y) :- sister(Y,Z), parent_of(X,Z). 
```

使用上述规则和事实在 prolog 中查询 parent_of(X,Y) 使我陷入了一个无限循环，其递归值为 X=warren、Y=stuart 和 X=maryalice、Y=stuart。

任何建议将不胜感激。谢谢你！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T08:47:38.943

如果您尝试从交互式提示中查询，您会发现它有效。我可能会将其重写为：

```
?- parent_of(P,C),
   ( ( sister(C,OC) ; sister(OC,C) )
   ; ( brother(C,OC) ; brother(OC,C) )
   ). 
```

但这真的没关系。

The easiest solution to defining a predicate with the exact definition as this query is not calling it `parent_of`, as you are introducing a recursive call that you don't terminate in any way. So call it maybe `also_parent_of`?

Furthermore, you have a redundant fact in your database: `brother(jerry,kather)` and `sister(kather,jerry)`. I don't know if this is on purpose, but using this query, you will get the answer `P=warren, C=jerry, OC=kather` twice.

# pass-by-reference - MIPS：字符串复制，按引用传递

> ID：15714837
> 
> 赞同：1
> 
> 时间：2013-03-30T04:03:12.523
> 
> 标签：pass-by-reference, mips

我正在寻找实现字符串复制，但我没有正确执行。我得到一个字符串“x”，我想 1] 将整个字符串“x”复制到“y”中 2] 将“x”的前 5 个字符复制到“y”中

我想通过引用传递参数。

```
.data
    x:  .asciiz "Hi, How do you do?"
    y:  .word   0:5

.text
.globl main

_copy:
    lw  $t0,    ($a0)
    la  $a0,    y
    sw  $t0,    ($a0)
    li  $v0,    4   
    syscall
    jr  $ra 

main:
    la  $a0,    x
    jal _copy
    jr  $ra
    nop 
```

# c - 在结构中分配指针不起作用，为什么值没有改变？

> ID：15714838
> 
> 赞同：2
> 
> 时间：2013-03-30T04:03:27.680
> 
> 标签：c, pointers, struct, segmentation-fault, variable-assignment

对于一个学校项目，我应该只使用链表结构来实现 UNIX 文件系统的简化版本。我目前的 mkfs() 函数有问题，它应该只是初始化一个文件系统。

创建我正在使用的结构的头文件在这里：

```
typedef struct Lines {
  char line[82];
  struct Lines *next;
} Lines;

typedef struct Node {
  char *name;
  int id;
  struct Node *parent;
  struct Node *next;
  union {
    char line[82];
    struct Node *children;
  } contents;
} Node;

typedef struct Filesystem {
  char  *name;
  struct Node *root;
  struct Node *current;
} Filesystem; 
```

这是我单独文件中#includes此头文件的方法：

```
void mkfs(Filesystem *files) {
  Node *root = NULL; /* Creates a pointer to the directory we will use as
                      * the root directory for this filesystem*/

  files = (Filesystem *)malloc(sizeof(*files)); /* Allocates space for the the 
                             * filesystem structure */

  if(files == NULL){ /* If there is no memory available, prints error message
                      * and does nothing else */

    printf("Memory allocation failed!\n");

   } else {

    root = (Node *)malloc(sizeof(*root)); /* Allocates space for the root 
                   * directory of the filesystem. */

    if(root == NULL) { /* If there is no memory available, prints error
        * message and frees memory obtained thus far, but then 
        * does nothing else */

      printf("Memory allocation failed!\n");
      free(files);

    } else {

  /* Allocates space for the root directory's name string */
      root->name= (char *)malloc(sizeof(char)*(strlen("/")+1));

      if(root->name == NULL) { /* If there is no memory available, prints error
            * message and frees memory obtained thus far, 
            * but then does nothing else */

    printf("Memory allocation failed!\n");

    free(files);
    free(root);

      } else {

    root->name = "/"; /* Defines the root directory as being named by the
           * forward slash */ /* DO STR CPY HERE ITS CHANGING THE ADDRESS */
    root->contents.children = NULL;
    root->next = NULL;
    root->parent = NULL; /* UHH CHECK ON THIS NOOO CLUE IF ITS RIGHT FUUU*/

    files->root = root; /* The filesystems pointer to a directory is set 
             * to point to the root directory we just allocated
             * space for and set up */

    files->current = root; /* Sets the filesystems current directory to
            * point to the root directory as well, because 
            * it is the only directory in existence for this
            * filesystem at this point. */
      }
    }
  }
} 
```

我遇到的问题是，当我运行 gdb 并逐步执行每一行时，最后两个赋值行并没有改变 file->root 和 file->current 的内容。比如我这里打印files->root的内容，运行files->root=root这行，然后再打印，可以看到地址没有变。但是，如果我只是打印根，我试图分配它的东西，它显然有一个不同的值，文件->根应该设置为：

```
(gdb) print files->root
$12 = (struct Node *) 0x400660
(gdb) step
(gdb) print files->root
$13 = (struct Node *) 0x400660
(gdb) print root
$14 = (Node *) 0x602030 
```

有没有人知道为什么在这种情况下作业可能不起作用？这目前正在破坏我的整个项目，因此任何见解都将不胜感激。谢谢！！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-30T04:09:11.617

看起来您的`mkfs`函数正在接受指向已经存在的指针`Filesystem`，然后您尝试`Filesystem`在新的内存位置为新的分配内存。像这样的函数有两种常见约定：要么不接受参数并*返回*指向结构的指针，要么接受指向已分配结构的指针并*填充*该结构。看起来数据没有改变的原因是您实际上是在创建和填充*第二个*结构，而调用者的结构保持不变。

这是第一种情况的示例，将函数简化为内存分配部分：

```
Filesystem * mkfs() {
    Filesystem *files = (Filesystem *)malloc(sizeof(Filesystem));

    // (error handing omitted for brevity)

    // populate the files struct as appropriate...
    Node *root = (Node *)malloc(sizeof(Node));
    files->root = root;
    // etc, etc as you currently have

    return files;
}

// In this case you should also provide a way for the caller to free a filesystem,
// which will free everything you allocated during mkfs:
void freefs(Filessystem *files) {

    // first free any buffers you allocated inside the struct. For example:
    free(files->root);

    // then free the main filesystem struct
    free(files);
} 
```

然后调用者使用这两个函数处理这个对象。例如：

```
int main() {
    Filesystem *files = mkfs();
    // now "files" is ready to use
    freefs(files); // free the objects when we're done with them.
} 
```

这是第二种情况的示例，它假定调用者已经分配了适当的缓冲区，并且只需要填充它：

```
void mkfs(Filesystem *files) {

    // populate the files struct as appropriate...
    Node *root = (Node *)malloc(sizeof(Node));
    files->root = root;
    // etc, etc as you currently have

}

void freefs(Filesystem *files) {
    // still need to clean up all of the ancillary objects
    free(files->root);
    // etc, etc
} 
```

在这种情况下，调用函数还有一些工作要做。例如：

```
int main() {
    Filesystem *files = (Filesystem *)malloc(sizeof(Filesystem));
    mkfs(files);
    // now "files" is ready to use
    freefs(files); // free the objects when we're done with them.
} 
```

两种模式都有效；如果您希望调用者需要能够控制内存的分配方式，则前者很有用。例如，调用者可能决定在堆栈而不是堆上分配文件系统：

```
int main() {
    Filesystem files;
    mkfs(&files);
    // now "files" is ready to use
    freefs(&files); // free the ancillary objects when we're done with them.
    // "files" is still allocated here, but it's no longer valid
} 
```

后者代表调用者处理分配。由于您的函数在堆上分配了更多结构，因此在这两种情况下都需要包含一个清理函数。

# javascript - 如何在 MVC4 中添加动态 Javascript 到标签

> ID：15714839
> 
> 赞同：0
> 
> 时间：2013-03-30T04:03:46.017
> 
> 标签：javascript, asp.net-mvc-4

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T04:34:34.880

通过模型将所有参数传递到您的视图，并在锚标记的 onclick 事件上调用 javascript 方法。如果有多个这样的锚点，则在模型中使用属性，否则您可以使用 ViewBag。代码将如下所示：

```
<a href="javascript:void(0)" onclick="OpenWindow('@Model.ClientID','@Model.URL','@Model.guestUser', '@Model.DelayTime',     '@Model.SomeimageClientId','@Model.imgfadedPath','@Model.imgpath')"> Click Here</a>

<script type="text/javascript">
function OpenWindow(ClientID,URL,guestUser, DelayTime, SomeimageClientId,imgfadedPath,imgpath)
{
      //Open Window Here.
}

</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T04:37:31.187

在 MVC 中，您的视图填充 JavaScript 所需的任何参数。您的控制器应将 View 所需的所有变量（如 clientId、imgpath、imgfadedPath 等）收集到模型中（或者如果您很懒，则将其收集到 ViewBag 中）。然后，在视图中，您可以使用这些参数来创建标签：

这是 Razor 视图引擎的示例：

```
<a href="javascript: openWindows('@Model.clientId, @Model.URL, ....')">click here</a> 
```

# text - 鼠标悬停文本出现在所有拇指上

> ID：15714840
> 
> 赞同：0
> 
> 时间：2013-03-30T04:04:00.323
> 
> 标签：text, mouseover

当我将鼠标悬停在 Tumblr 存档中的缩略图上时，拇指变暗并且文本出现在上面。但是我的设置发生了一些变化，所有的拇指都是这样的。我用的是Win XP，最新的浏览器是IE8。我没有使用 Firefox 或其他 PC 获得此功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T05:54:03.807

当我更新到 IE 10 时，同样的事情发生在我身上。这是一个兼容性问题。转到“工具”并更改您的“兼容性视图”，它会将其更改回正常视图（即缩略图将显示，直到您将鼠标悬停在它们上方）。打开其中一个存档页面并更改它，它应该会自动更新。如果它在更改之前不玩弄设置。您只能通过仅更改该站点的兼容性视图来更改“tumblr”的“兼容性视图”。

# html - 如何从单个位置调用 DIV 中的 HTML？

> ID：15714842
> 
> 赞同：0
> 
> 时间：2013-03-30T04:04:11.277
> 
> 标签：html, css

首先，我对 HTML/CSS/Javascript 还很陌生。

我创建了一个具有顶部菜单的网站。菜单中的一项是远足径。

格式为：

远足路径位置---路径名称

我计划有很多不同的路径位置，并且不希望我的 HTML 混乱，所以我希望将这部分代码放在一个可以编辑的位置，并且更改显示在每个页面上。

这是代码： http: [//pastebin.com/wKdx0Sbn](http://pastebin.com/wKdx0Sbn)

```
<div class="header">
  <table id="topmenu" class="header">
  <tr>
  <td class="submen">

    <div style="width: 100%; display: inline;">
      <ul id="nav">
        <li class="top"><a href="../../" class="top_link"><span class="down">Home</span></a></li>
        <li class="top"><a href="../" class="top_link"><span class="down">Hiking Trails</span></a>
          <ul class="sub">
            <li><a href="../" class="alltrails"> All Trails </a></li>
            <li><a href="./" class="cmsp"> State Park 1 </a>
              <ul>
                <li><a href="./index.html#backside"> Trail </a></li>
                <li><a href="./index.html#campingg"> Trail </a></li>
                <li><a href="./index.html#campingf"> Trail </a></li>
                <li><a href="./index.html#crowders"> Trail </a></li>
                <li><a href="./index.html#fern"> Trail </a></li>
                <li><a href="./index.html#lake"> Trail </a></li>
                <li><a href="./index.html#pinnacle"> Trail </a></li>
                <li><a href="./index.html#ridgeline"> Trail </a></li>
                <li><a href="./index.html#rocktop"> Trail </a></li>
                <li><a href="./index.html#tower"> Trail </a></li>
                <li><a href="./index.html#turnback"> Trail </a></li>
              </ul>
            </li>
            <li><a href="../ascg/" class="ascg"> State Park 2 </a></li>
            <li><a href="../mnp/" class="mnp"> State Park 3 </a></li>
          </ul>
        </li>
        <li class="top"><a href="../../contact/" class="top_link"><span class="down">Contact</span></a></li>
      </ul>
    </div>
  </td>
  </tr>
  </table>
</div> 
```

谢谢你的帮助！同时，我会继续寻找。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-30T04:32:37.230

完成此操作的最佳方法是使用 PHP`include`将您想要的数据部分保存在一个带有扩展名的文件中`filename.php`，然后在您希望该文件显示的所有页面上，您将通过这样做`<?php include('filepath/filename.php'); ?>`和您的所有页面包含它你显示这个也必须有一个`.php`扩展名，所以像这样

**索引.php**

```
<?php include('../includes/header.php'); ?>
<body>
<div class="body-container">

</div>
</body>
</html> 
```

**header.php 文件夹内的“包含”**

```
<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF=8">
  // Rest of your head content
</head>
<header class="page-header">
  <div class="logo"></div>
  <nav class="main-nav">

  </nav>
</header> 
```

正如你所知道的，php 必须在服务器上才能运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T04:54:38.210

试试这个

```
<div style="width: 100%; display: inline;">
<ul id="nav">
<li class="top"><a href="../../" class="top_link"><span class="down">Home</span></a>  </li>
<li class="top"><a href="../" class="top_link"><span class="down">Hiking Trails</span></a>
      <ul class="sub">
        <li><a href="../" class="alltrails"> All Trails </a></li>
        <li><a href="./" class="cmsp"> State Park 1 </a>
          <ul>
          <script language="javascript" type="text/javascript" >
function jumpto(x){

if (document.form1.jumpmenu.value != "null") {
document.location.href = x
}
}
</script>
<form name="form1">
<select name="jumpmenu"    onChange="jumpto(document.form1.jumpmenu.options[document.form1.jumpmenu.options.selectedIndex].value)">
<option>Jump to...</option>
<option value="./index.html#homepage">Homepage</option>
<option value="./index.html#javascript">JavaScript</option>
<option value="./index.html#HTML">HTML</option>
<option value="./index.html#CSS">CSS</option>
</select>
</form>
</ul>
</li>
<li><a href="../ascg/" class="ascg"> State Park 2 </a></li>
<li><a href="../mnp/" class="mnp"> State Park 3 </a></li>
</ul>
</li>
<li class="top"><a href="../../contact/" class="top_link"><span class="down">Contact</span></a></li>
</ul>
</div>
</td>
</tr>
</table>
</div> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-30T04:58:14.547

您可以使用 javascript 和 ajax 调用来实现。

算法：

```
使用 ajax 获取 html 片段。
去掉任何不必要的标签。(javascript)
使用 javascript 将其插入 DOM。

```

如果将 jquery 添加到等式中，它会变得非常简单，因为它已经有一个函数：http: [//api.jquery.com/load/](http://api.jquery.com/load/)

有关如何执行此操作的完整示例，请参阅此问题： [如何使用 jQuery 加载页面片段？](https://stackoverflow.com/questions/3904152/how-do-i-load-a-page-fragment-using-jquery)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-30T04:58:21.227

有不同的方法可以实现这一目标。

**但是**由于你没有提到你的应用程序的基础（php、c#、数据库引擎......），最简单的独立于数据库、csv 或 xml 解析等的方法......如下。

代码或解决方案未优化，这只是为了给您一个想法。

1- 创建一个名为 trailsList.js 的文件，并将其放入文件中（或您将重用的任何代码）：

```
// Trails List
document.write('<li><a href="./index.html#backside"> Trail </a></li>');
document.write('<li><a href="./index.html#campingg"> Trail </a></li>');
document.write('<li><a href="./index.html#campingf"> Trail </a></li>');
document.write('<li><a href="./index.html#crowders"> Trail </a></li>');
document.write('<li><a href="./index.html#fern"> Trail </a></li>');
document.write('<li><a href="./index.html#lake"> Trail </a></li>');
document.write('<li><a href="./index.html#pinnacle"> Trail </a></li>');
document.write('<li><a href="./index.html#ridgeline"> Trail </a></li>');
document.write('<li><a href="./index.html#rocktop"> Trail </a></li>');
document.write('<li><a href="./index.html#tower"> Trail </a></li>');
document.write('<li><a href="./index.html#turnback"> Trail </a></li>'); 
```

2- 在文档中您希望代码出现的任何位置调用 trailsList.js。

```
.
.
.
  <li><a href="./" class="cmsp"> State Park 1 </a>
   <ul>
    <script src="trailsList.js">
    </script>
   </ul>
  </li>
.
.
. 
```

# android - 在块中对齐文本视图

> ID：15714848
> 
> 赞同：0
> 
> 时间：2013-03-30T04:05:01.227
> 
> 标签：android

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T04:07:43.463

使用 android:gravity="center"，并在左侧和右侧添加填充以创建项目之间的空白。

布局使用 Layout_gravity 来定义它们如何将视图放入其中。重力用于视图中的文本/数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T06:49:58.143

尝试这个，

```
 <TextView
                android:id="@+id/txtName"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:background="#FF0000"
                android:padding="10dip"
                android:text="7"
                android:textColor="#fff" /> 
```

# java - Android：当我运行应用程序时它崩溃了

> ID：15714856
> 
> 赞同：0
> 
> 时间：2013-03-30T04:06:02.240
> 
> 标签：java, android, sdk, emulation

你好。当我在模拟器中运行我的应用程序时它崩溃了，我是 Android 新手，请帮忙。

[这是我的](http://pastebin.com/UvECkaxN)main.java：http://pastebin.com/UvECkaxN

这是我的 main.xml： [http://pastebin.com/GMvE3XGc](http://pastebin.com/GMvE3XGc)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T04:10:38.043

按钮`sub`未初始化。`onCreate()`在为它设置之前，在您的方法中添加以下代码片段`onClickListener`。

```
sub = (Button) findViewById(R.id.bSub); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T04:12:53.090

在您的活动中添加此行`oncreate()`

```
sub = (Button) findViewById(R.id.bSub); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-30T04:53:32.963

您忘记创建参考按钮`sub`。你只需要在你的`onCreate`.

```
sub = (Button) findViewById(R.id.bSub); 
```

# javascript - 使用 ng-include 在另一个控制器中打开模式

> ID：15714858
> 
> 赞同：0
> 
> 时间：2013-03-30T04:06:28.213
> 
> 标签：javascript, cordova, twitter-bootstrap, angularjs

当我尝试使用 phonegap 在 AngularJS 中打开模式时，我遇到了这个问题。

我正在检查来自设备的连接，如果设备离线，我需要打开一个模式。

我的 index.html 页面上有这段代码：

```
<script type="text/javascript" charset="utf-8" >

    document.addEventListener("deviceready", onDeviceReady, false);
    function onDeviceReady() {
        var $injector = angular.bootstrap(document, ['sms']);
        var $controller = $injector.get('$controller');
        var scope = $injector.get('$rootScope').$new();
        var DeviceCtrl = $controller("DeviceCtrl", {$scope: scope});
        scope.checkDevice(device.uuid, navigator.network.connection.type);
    }

</script>
...

 <div ng-controller="ModalCtrl" ng-include="'app/partials/modals.html'"> 
```

该脚本调用`checkDevice`函数在`DeviceCtrl`. 在这一点上确定。

```
DeviceCtrl:

function DeviceCtrl($scope, $window, Device, $rootScope) {

$scope.checkDevice = function (deviceUuid, networkState) {

    if (networkState == 'none') {
        $rootScope.$broadcast('openConectionless');
    }  
} 
```

还有我的 ModalCtrl：

```
function ModalCtrl($scope) {
$scope.$on('openConectionless', function() {
    angular.element("#conectionModal").modal("show");

}); 
```

}

`openConectionless`侦听器被调用，但不`angular.element("#conectionModal").modal("show");`影响模式。

注意：如果我将`conectionModal`div 放在 index.html 上并调用`angular.element("#conectionModal").modal("show");`而`DeviceCtrl`不是`$rootScope.$broadcast('openConectionless');`，则模式打开。但我想将模态代码移动到另一个 html 以使代码干净。所以我创建了 ModalCtrl。

有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T15:47:23.980

I'm guessing you are using `bootstrap` as modal plugin and modal is auto initialized on page load when the html is within index.html based on `bootstrap` `data` attribute in markup.

Since `ng-include` requires an AJAX request, the modal html doesn't exist when modal plugin runs initially so your modall is never intialized.

You could create a simple directive that will run the initialization code and add an attribute to the modal markup for that directive

# c++ - 具有两个键值的映射

> ID：15714859
> 
> 赞同：4
> 
> 时间：2013-03-30T04:06:35.827
> 
> 标签：c++, map

我有一个任务，我需要浏览文件夹中的所有文件。对于每个文件，我需要知道每个唯一的文件扩展名、每个唯一文件扩展名的文件数量以及每个唯一文件扩展名的总大小。我必须能够使用文件扩展名或文件扩展名的总大小对此进行排序。我首先想到的是一张地图。这将跟踪每个唯一的文件扩展名以及找到该文件扩展名的次数。我现在如何将文件扩展名的总大小与我的地图相关联？因此，例如，我需要输出是这样的：

使用文件扩展名进行排序 .cpp : 1 : 3400 .exe : 3 : 3455600 .mp4 : 25 : 200000404

使用总文件扩展名大小进行排序 .mp4 : 25 : 200000404 .exe : 3 : 3455600 .cpp : 1 : 3400

这是我经过一些编辑后的代码：

```
 #include <iostream>
    #include <filesystem>
    #include <map>

    using namespace std;
    using namespace std::tr2::sys;

    class fileInfo {
    public:
        int fileCount;
        long long fileSize;
    };

    void scan(path f)
    {
        map<string, fileInfo> fileMap;
        cout << "Scanning = " << system_complete(f) << endl;
        directory_iterator d(f);
        directory_iterator e;
        for( ; d != e; ++d)
        {
            path p = d->path();
            cout << "\nExtension is: " << extension(p) << "\tFile size is: " << file_size(p) << endl;
            fileMap[extension(p)].fileCount ++;
            fileMap[extension(p)].fileSize += file_size(p);
        }

        for (map<string, fileInfo>::iterator it = fileMap.begin(); it != fileMap.end(); ++it)
        {
             cout << it->first << " : " << it->second.fileCount << " : " << it->second.fileSize << endl;
        }
    }

    int main(int argc, char* argv[] )
    {
        path folder = "..";

        scan(folder);

        return 0;
     } 
```

编辑：所以我已经实现了类 fileInfo。这是一种工作。但是我遇到了 file_size 的问题。在第一次循环运行后，它正确返回了 file_size，但对于每个其他循环运行，file_size 都返回 0。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T21:44:40.640

您还可以使用多地图

```
map<string, size_t> fileExtSizeMap; 
```

简单地为遇到的每个文件添加一个新条目。

std::lower_bound 和 std::upperbound 可用于搜索此结构。在结果迭代器上使用 std::distance 来获取文件计数。

或者简单地遍历完整的地图，在你去的时候增加一个计数器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T04:12:52.447

您可以创建一张地图：

```
 map<string, vector<int> > fileExtToSizeMap; 
```

基本上，对于格式中的每个文件扩展名`string`，如果当前文件与该扩展名相关联，则将文件的大小放入 vector`vector<int>`中。扫描完目录后，该向量的大小会告诉您，向量`how many files are associated with the file extension`的总和会告诉您`the total size for each unique file extension`。然后这个数据结构回答了你的两个主要问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-30T04:12:59.780

我会创建一个数据结构，例如`ExtensionStat`：

```
struct ExtensionStat {
  int totalFile;
  int totalSize;
}; 
```

并有一个从扩展名到统计的映射

```
map<string, ExtensionStat> extMap; 
```

然后，您只需将收集统计信息的文件夹的内容迭代到`extMap`. 请记住，您不需要使用结构，也可以使用类。`map<string, ExtensionStat*> extMap;`如果您想避免全值复制，您也可以选择要使用的地图

# ruby - 如何替换模板中的字符串？

> ID：15714860
> 
> 赞同：-3
> 
> 时间：2013-03-30T04:06:45.087
> 
> 标签：ruby

我是一名试图学习 Ruby 基础知识的学生。有人问我一个问题，但无法使用存储、对象和方法找出答案。问题是在线的，所以对我来说很难找到实时帮助。

> 一家游戏公司与您联系，希望您创建一个允许用户输入多个特定词性的应用程序。用户完成此任务后，屏幕上将出现一首定制的诗歌。该公司要求您在包含 Ruby 代码的同时包含完整的内部文档，包括文档、功能和解释性注释。
> 
> 这是公司希望您使用的文本：
> 
> “名字有一只小哺乳动物，小哺乳动物，小哺乳动物，名字有一只小哺乳动物，它的毛色像雪一样。它跟着她放一天，放一天，放一天，它让孩子们动词1和动词2看到哺乳动物

```
名字是玛丽
哺乳动物是羔羊
颜色是白色
地方是学校
动词 1 是笑
动词 2 是玩

```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T04:28:28.167

`String#gsub`在为每个替换保存唯一占位符的字符串上使用。

请注意，如果您反复执行此操作（替换所有名称，然后替换所有哺乳动物，然后替换所有颜色等），您将面临用户输入与您的占位符之一相同的文本的风险。

为避免这种情况，请使用单个正则表达式来匹配所有占位符，并使用 gsub 的块形式来选择适当的替换字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T05:42:41.167

正如 Phrogz 所说，您应该考虑使用[String 的`gsub`](http://www.ruby-doc.org/core-1.9.3/String.html#method-i-gsub)方法，因为它是您想要做的事情的基础。

如果您在 Stack Overflow 上搜索我给出的其他答案，您会发现有几个在做您想做的事情，全部使用`gsub`, 以及`Regexp.union`构建所需的模式。

以下是您需要的基本信息：

将您的数据转换为哈希：

```
{
  'Name'   => 'Mary'
  'Mammal' => 'Lamb'
  'colour' => 'white'
  'place'  => 'school'
  'verb 1' => 'laugh'
  'verb 2' => 'play'
} 
```

[Hash 的`keys`](http://ruby-doc.org/core-2.0/Hash.html#method-i-keys)方法将非常有用，结合[`Regexp.union`](http://www.ruby-doc.org/core-1.9.3/Regexp.html#method-c-union).

# c++ - 在 C++ 中从堆栈中弹出一个数字？

> ID：15714867
> 
> 赞同：1
> 
> 时间：2013-03-30T04:07:49.097
> 
> 标签：c++, linked-list, stack

到目前为止我的代码是......

```
struct stack_struct
{
    int number;
    struct stack_struct *next_number;
};

stack_struct *mainStruct;

class stack_class
{
private:

    struct stack_struct *head;

public:
    stack_class();
    ~stack_class();
    void pushNumber(int number);
    void popNumber();
    void findNumber();
    void clearStack();
    void sizeFinder();
    void printStack();
    void reverseStack();//Extra Credit
};
stack_class mainClassStack;

stack_struct *pointerFunc,*tailPointer=NULL,*pointerFunc3,*printPointer;

stack_class::stack_class()
{
    head=NULL;
}

stack_class::~stack_class()
{
    clearStack();
    cout<<"\nList Cleared.\n";
    system("pause");
}

void stack_class::popNumber()
{
    stack_struct *pointerPop=NULL,*pointerPop2=NULL;
    int popCounter=0,i=0;
    pointerPop2=tailPointer;
    if(head==NULL)
    {
        cout<<"\nNo Member to Delete.\n";
    }
    else
    {
        while(pointerPop2)
        {
            popCounter++;
            //cout<<pointerFunc3->number<<endl;
            pointerPop2=pointerPop2->next_number;
        }
        pointerPop=tailPointer;
        while(i<(popCounter-2))
        {
            pointerPop=pointerPop->next_number;
            i++;
        }
        pointerPop->next_number=NULL;
        delete head;
        head=pointerPop;
    }

}

void stack_class::printStack()
{
    pointerFunc3=tailPointer;
    if(tailPointer==NULL)
    {
        cout<<"\nNo Members in List.\n";
    }
    else
    {
        cout<<"\n\nList Is:\n";
        while(pointerFunc3)
        {
            cout<<pointerFunc3->number<<endl;
            pointerFunc3=pointerFunc3->next_number;
        }
    }

} 
```

只要不是最后一个数字，弹出就可以正常工作。如果弹出最后一个数字（列表为空），并且我尝试打印列表，则程序会无限打印垃圾。如果我在列表为空后尝试弹出一个数字，程序会冻结。我该如何解决这些问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T17:11:37.093

> 包括 cstdlib 以退出

```
 int Stack::pop()
    {   if (top == NULL)
            {
             cerr <<"Stack is empty";
             exit(1);
            }
        else
            {   
             Node* zap = top;
             top = zap->link;
             int return_value = zap->n;
             delete zap;
             return return_value;
            }
     } 
```

Qazi 你必须`if(top==NULL)`在这两个程序的开始处进行检查。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T04:20:53.707

像这样改变你的 popNumber()，

```
void stack_class::popNumber()
{
    stack_struct *pointerPop=NULL,*pointerPop2=NULL;
    int popCounter=0,i=0;
    pointerPop2=tailPointer;
    if(head==NULL)
    {
        cout<<"\nNo Member to Delete.\n";
    }
    else if(head->next_number==NULL)
    {
        cout<<"\nThe Poped element is"<<head->number;
        head=NULL;
    }
    else
    {
       // Your Code;    
    }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-30T04:28:25.293

您也可以始终创建一个虚拟节点来解决此问题。否则：

 `````
int stack_class::popNumber()
{
    if(head==NULL)
        throw new Exception("Stack is empty");
    int result = head->number;
    delete head;
    head = head->next_number;
    return result;
}

void stack_class::pushNumber(int number)
{
    stack_struct *elem= new stack_struct();
    elem->number = number;
    elem->next_number = head;
    head = elem;
} 
````  `!!!!!尽量不要使用全局变量，如 (stack_class mainClassStack;

stack_struct *pointerFunc,*tailPointer=NULL,)``

# go - 如何关闭多个 goroutine 正在发送的通道？

> ID：15714869
> 
> 赞同：13
> 
> 时间：2013-03-30T04:08:28.180
> 
> 标签：go, channels

我正在尝试并行进行一些计算。该程序的设计使得每个工作 goroutine 将解决的难题的“碎片”发送回控制器 goroutine，该控制器等待接收并组装从工作例程发送的所有内容。

关闭单通道的惯用 Go 是什么？我不能在每个 goroutine 的通道上调用 close，因为那样我可能会在关闭的通道上发送。同样，没有办法预先确定哪个 goroutine 将首先完成。这里需要一个 sync.WaitGroup 吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-30T12:42:34.820

这是一个使用`sync.WaitGroup`来执行您要查找的操作的示例，

此示例接受一个长整数列表，然后通过向 N 个并行工作人员提供相同大小的输入数据块，将它们全部相加。它可以在[go playground](http://play.golang.org/p/YcBG0dRitk)上运行：

```
package main

import (
    "fmt"
    "sync"
)

const WorkerCount = 10

func main() {
    // Some input data to operate on.
    // Each worker gets an equal share to work on.
    data := make([]int, WorkerCount*10)

    for i := range data {
        data[i] = i
    }

    // Sum all the entries.
    result := sum(data)

    fmt.Printf("Sum: %d\n", result)
}

// sum adds up the numbers in the given list, by having the operation delegated
// to workers operating in parallel on sub-slices of the input data.
func sum(data []int) int {
    var sum int

    result := make(chan int)
    defer close(result)

    // Accumulate results from workers.
    go func() {
        for {
            select {
            case value := <-result:
                sum += value
            }
        }
    }()

    // The WaitGroup will track completion of all our workers.
    wg := new(sync.WaitGroup)
    wg.Add(WorkerCount)

    // Divide the work up over the number of workers.
    chunkSize := len(data) / WorkerCount

    // Spawn workers.
    for i := 0; i < WorkerCount; i++ {
        go func(i int) {
            offset := i * chunkSize

            worker(result, data[offset:offset+chunkSize])
            wg.Done()
        }(i)
    }

    // Wait for all workers to finish, before returning the result.
    wg.Wait()

    return sum
}

// worker sums up the numbers in the given list.
func worker(result chan int, data []int) {
    var sum int

    for _, v := range data {
        sum += v
    }

    result <- sum
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-30T04:13:52.410

是的，这是 sync.WaitGroup 的完美用例。

您的另一种选择是每个 goroutine 使用 1 个通道和一个多路复用器 goroutine，该多路复用器 goroutine 从每个通道馈送到单个通道。但这会很快变得笨拙，所以我只需要一个sync.WaitGroup。

# java - Java starting running command in new terminal (mac osx) - process builder not running osascript properly

> ID：15714870
> 
> 赞同：2
> 
> 时间：2013-03-30T04:08:30.640
> 
> 标签：java, macos, applescript, processbuilder, osascript

I'm trying to create a new process in a new window. I'm following this example for the command [Running a command in a new Mac OS X Terminal window](https://stackoverflow.com/questions/989349/running-a-command-in-a-new-mac-os-x-terminal-window) (using Java Process builder). I printed out the resulting command and it works if I type it in manually, but it doesn't start the new window when I run it.

Something as simple as `osascript -e 'tell application "Terminal" to do script "java -jar test.jar"'` doesn't bring anything up

Sample code:

```
 try {
        ProcessBuilder pb = new ProcessBuilder("osascript", "-e",
            "'tell application \"Terminal\" to do script \"java -jar test.jar\"'");
        Process p = pb.start();
    } catch (Exception ex) {
        ex.printStackTrace();
    } 
```

It doesn't even bring up an error (as it should if it were starting the java process in a new terminal window)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-30T04:17:19.170

And as usual although I spend hours looking into my problem I find the silly solution after I ask stack overflow... don't need the single quotes around `tell application...`. Process builder does that. Er, not sure if question needs to be closed. Quite localized, but certainly confusing IMO

# liferay-6 - 在 liferay 6.1.0 中以编程方式将站点模板分配给组织站点

> ID：15714874
> 
> 赞同：3
> 
> 时间：2013-03-30T04:09:35.067
> 
> 标签：liferay-6

我分别使用 addUser() 和 addOrganization() 方法务实地创建了用户和组织。

我还可以使用 addOrganizationUsers() 方法将用户添加到该组织。

现在我已经从 liferay 控制面板创建了一个站点模板。

众所周知，我们可以为组织创建一个站点，并且在创建站点时，我们可以选择为公共和私人页面选择站点模板。

据我们所知 。公共页面 - 对成员 + 非成员可见 私人页面 - 仅对成员可见。

所以我想创建一个只包含私人页面的组织站点，这样只有组织成员才能看到它。

```
OrganiztionLocalServiceUtil.addOrganization(
    long userId, long parentOrganizationId, String name, String type,
    boolean recursable, long regionId, long countryId, int statusId,
    String comments, boolean site, ServiceContext serviceContext) 
```

使用上述方法，通过指定布尔站点值“true”，将创建一个站点。

现在我想实用地向这个组织站点添加一个站点模板，这是我从控制面板创建的。

那么是否有任何 API 可以将站点模板添加到组织的任何站点

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T18:06:23.320

不幸的是，它没有公共 API。

使用 LayoutSetPrototypeLocalServiceUtil 获取 SiteTemplate 的 ID。要按名称获取 SiteTemplate，您必须使用 dynamicQuery 或迭代 LayoutSetPrototypeLocalServiceUtil.getLayoutSetPrototypes(-1, -1) 的结果

然后在门户的上下文中调用 SitesUtil 的 applyLayoutSetPrototypes。

```
MethodKey methodKey = new MethodKey("com.liferay.portlet.sites.util.SitesUtil","applyLayoutSetPrototypes", Group.class, long.class, long.class, ServiceContext.class);
PortalClassInvoker.invoke(false, methodKey, organization.getGroup(), publicLayoutSetId, privateLayoutSetId, serviceContext); 
```

为 publicLayoutSetId 指定 -1。

必须登录管理员才能执行此操作。要在启动时或在后台执行此操作，需要一个新的 ServiceContext。

类似于以下内容

```
ServiceContext serviceContext = new ServiceContext();
serviceContext.setAddGroupPermissions(true);
serviceContext.setAddGuestPermissions(true);
serviceContext.setSignedIn(false);
// set the following to an admin user / company or default user
User user = UserLocalServiceUtil.getDefaultUser(companyId); // or any user that has the permissions
serviceContext.setUserId(user.getUserId());
serviceContext.setCompanyId(companyId); 
```

而且很可能您还必须设置 ThreadPermissionChecker

```
PrincipalThreadLocal.setName(user.getUserId());
PermissionChecker adminPermissionChecker = PermissionCheckerFactoryUtil.create(user, false);
PermissionThreadLocal.setPermissionChecker(adminPermissionChecker); 
```

Don't forget to reset the permission checker in a final block otherwise the same permission checker might be used for other requests on the same thread.

# python - 在 Python 中分割日文字符

> ID：15714878
> 
> 赞同：0
> 
> 时间：2013-03-30T04:10:34.747
> 
> 标签：python, asianfonts

我有一个由看起来像逗号的符号分隔的日文汉字字符列表。我想使用拆分功能来获取存储在列表中的信息。

如果文本是英文的，那么我想要以下内容：

```
x = 'apple,pear,orange'
x.split(',') 
```

但是，这不适用于以下情况：

```
japanese = '東北カネカ売，フジヤ商店，橋谷，旭販売，東洋装' 
```

我已将编码设置为

```
# -*- coding: utf-8 -*- 
```

而且我可以很好地阅读日文字符。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-30T04:15:03.240

它实际上[不是逗号](http://www.fileformat.info/info/unicode/char/ff0c/index.htm)：

```
>>> u'，'
    u'\uff0c' 
```

如果您将字符串设为 unicode，则可以将其拆分：

```
>>> u'東北カネカ売，フジヤ商店，橋谷，旭販売，東洋装'.split(u'，')
    [u'\u6771\u5317\u30ab\u30cd\u30ab\u58f2',
 u'\u30d5\u30b8\u30e4\u5546\u5e97',
 u'\u6a4b\u8c37',
 u'\u65ed\u8ca9\u58f2',
 u'\u6771\u6d0b\u88c5'] 
```

Python 3 也可以：

```
>>> '東北カネカ売，フジヤ商店，橋谷，旭販売，東洋装'.split('，')
    ['東北カネカ売', 'フジヤ商店', '橋谷', '旭販売', '東洋装'] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T04:18:36.533

这对我有用：

```
for j in japanese.split('\xef\xbc\x8c'): print j 
```

这里的“逗号”是`'\xef\xbc\x8c'`。

# css - 引导行流体 .split

> ID：15714886
> 
> 赞同：1
> 
> 时间：2013-03-30T04:12:41.370
> 
> 标签：css, twitter-bootstrap, grid, split, gutter

我需要在我的项目中创建一个没有装订线的行流体列，但我无法自定义引导程序，因为我需要在其他地方装订线。

我是 bootstrap 新手，我来自 Kube ( [http://imperavi.com/kube/](http://imperavi.com/kube/) )。它在那里工作：

---- 从带有装订线的引导程序创建一个类似于 span6 的列。

如果我想删除排水沟简单添加： ------ 现在列没有排水沟将它们分开。

我想做类似的事情来引导或者创建一个 row-fluid-split 类，但是我该怎么做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T08:58:49.323

您可以通过添加新类来删除排水沟，我们称之为`.no-gutter`。

该类具有以下属性：

```
.no-gutter .span4 {
    margin: 0;
    width: 33.3333333333%;
} 
```

然后，您将在 HTML 标记中添加此类，如下所示：

```
<div class="row-fluid no-gutter">
    <div class="span4">First</div>
    <div class="span4">Second</div>
    <div class="span4">Third</div>
</div> 
```

这是[演示](http://jsfiddle.net/2jZvH/1/)

如果您需要排水沟 elsewere，则不要简单地添加此类。

`.spanX`请注意，您必须为所有引导类设置此类，其中`X`数字从 1 到 12。

# c++ - Node.js、SQLite 和 C++

> ID：15714887
> 
> 赞同：0
> 
> 时间：2013-03-30T04:12:41.810
> 
> 标签：c++, node.js, web, sqlite

我完全是 Node.js 的初学者，我正在努力学习教程和阅读书籍，以便了解更多关于该主题的信息，但我有一个关于 Node.js 和 SQLite 的问题。我正在尝试建立一个具有后端数据库的小型网站。我将使用 Node.js 来设置网站。在连接 Node.js 和数据库时，我知道有一些模块（如 sqlite3）可以“导入”并在 Node.js 中使用。但我也知道 SQLite 可以与 C++ 库一起使用（我使用 C++ 作为启动/终止 Node.js 文件的工具）。

你建议直接用 Node.js 连接数据库，还是用 C++ 来连接？两种方式都有什么优势吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T04:48:09.917

大多数开发人员都在使用特定于 Node.js 的库，例如[node-sqlite3](https://github.com/developmentseed/node-sqlite3)。我知道的所有 Node.js 的 sqlite 库都使用 C++ 库与数据库进行交互，因此您可能期望使用这些经过良好测试的 Node.js 库之一获得至少与您将在C++ 自己。

最好的办法是直接在 Node.js 中进行。

# python-3.x - 摆脱python3中的全局变量

> ID：15714898
> 
> 赞同：0
> 
> 时间：2013-03-30T04:14:31.020
> 
> 标签：python-3.x, tkinter, global-variables

首先，我分别在 Windows 和 Linux 上使用 python 3.3 和 3.2。

我开始构建一个 rpn 计算器。看起来跨平台的关键监听器是 python 的一种圣杯。到目前为止，这似乎可以解决问题，但我还产生了其他问题：

1.  我无法摆脱条目的全局变量并使用我的堆栈。
2.  看来我必须从内部构建程序 `callback()`

这是一个粗略的骨架，显示了我的方向。我是否错过了一种将信息传入和传出的方法`callback()`

目标是在我发现自己被困在里面之前建立一个 RPN 类`callback()`。

```
import tkinter as tk

entry = ""
stack = list()

operators = {"+",
            "-",
            "*",
            "/",
            "^",
            "sin",
            "cos",
            "tan"}

def operate(_op):
    if _op == "+":
        print("plus")

def callback(event):
    global entry, stack
    entry = entry + event.char
    if event.keysym == 'Escape': # exit program
        root.destroy()
    elif event.keysym=='Return': # push string onto stack  TODO
        print(entry)
        entry = ""
    elif entry in operators:
        operate(entry)

root = tk.Tk()
root.withdraw()
root.bind('<Key>', callback)
root.mainloop() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-30T04:50:40.113

你有几个选择去做你想做的事。

## 1.为您的应用程序使用一个类

在不求助于全局变量的情况下做你想做的事的规范方法是将应用程序放在一个类中，并将方法作为回调传递（参见`print_contents`），以下内容直接[来自文档](http://docs.python.org/3/library/tkinter.html)：

```
class App(Frame):
  def __init__(self, master=None):
    Frame.__init__(self, master)
    self.pack()

    self.entrythingy = Entry()
    self.entrythingy.pack()

    # here is the application variable
    self.contents = StringVar()
    # set it to some value
    self.contents.set("this is a variable")
    # tell the entry widget to watch this variable
    self.entrythingy["textvariable"] = self.contents

    # and here we get a callback when the user hits return.
    # we will have the program print out the value of the
    # application variable when the user hits return
    self.entrythingy.bind('<Key-Return>',
                          self.print_contents)

  def print_contents(self, event):
    print("hi. contents of entry is now ---->",
          self.contents.get()) 
```

## 2\. 将回调覆盖在您的状态上

您还可以使用 Python 的[函数式编程构造](http://docs.python.org/3/library/functools.html#functools.partial)在全局变量上 curry 函数，然后将 curried 函数作为回调传递。

```
import functools

global_var = {}

def callback(var, event):
  pass

#...
root.bind('<Key>', functools.partial(callback, global_var)) 
```

虽然这可能不是你想要的。

## 3.使用全局变量

有时，全局变量是可以的。

## 4\. 重新架构以提高整洁度和可读性

但是，您绝对不必在回调中构建程序。

事实上，我建议您创建一套包含各种有效和无效输入的测试，并创建一个`Calculator`类或函数，该类或函数接受 RPN 命令的字符串输入并返回一个值。这很容易在没有 tkinter 接口的情况下进行测试，并且会更加健壮。

然后，使用您的回调来构建一个字符串，并将其传递给您的`Calculator`.

如果您想要增量计算（即，您正在构建一个模拟器），那么只需让您的计算器接受单个标记而不是整个方程，但设计仍然相似。然后所有状态都封装在内部`Calculator`而不是全局内部。

# function - 这些功能函数叫什么？

> ID：15714899
> 
> 赞同：2
> 
> 时间：2013-03-30T04:14:37.957
> 
> 标签：function, haskell, clojure, functional-programming, lisp

我正在寻找一种功能性的方法来实现这一点：

```
list = [a b c d e f]
foo(list, 3) = [[a d] [b e] [c f]] 
```

一个潜在的解决方案是：

```
foo(list,spacing) = zip(goo(list,spacing)) 
```

例如，在哪里，

```
goo([a b c d e f],3) = [[a b c] [d e f]] 
```

什么是`foo`并且`goo`通常被称为，所以我可以寻找现有的解决方案而不是重新发明轮子？

*笔记：我没有试图用文字来解释，而是展示了一些希望更容易获得的例子。用于更广泛理解的任意语法。*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-30T04:22:00.480

您可以使用[分区](http://clojuredocs.org/clojure_core/clojure.core/partition)：

```
(partition 3 '[a b c d e f])
=> ((a b c) (d e f))

(partition 2 '[a b c d e f])
=> ((a b) (c d) (e f)) 
```

**编辑：**

```
(apply map list (partition 3 '[a b c d e f]))
=> ((a d) (b e) (c f)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T07:30:15.513

我认为没有内置功能。这很容易实现。

我知道你不想实现，但其中一个标签是 Haskell，所以也许你想看看这个

```
 p :: Int -> [a] -> [[a]]
 p n xs = [  [x | (x ,y) <- ys , y `mod` n == i]  |  i <- [0 .. n - 1] ,  let ys = zip xs [0 .. ]] 
```

这很实用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-30T10:09:09.590

Your `goo` function is `drop` with flipped arguments. Given that, you can implement `foo` almost like you say in your question:

```
let foo list spacing = zip list (drop spacing list) 
```

This still doesn't exactly give the result you need though, but close:

```
Prelude> foo "abcdef" 3
[('a','d'),('b','e'),('c','f')] 
```

* * *

EDIT:

Reading more carefully, your `goo` function is `splitAt` with flipped arguments. Given that, `foo` can be defined like this:

```
let foo list spacing = (uncurry zip) $ splitAt spacing list 
```

Which is the same as:

```
let foo list spacing = let (left, right) = splitAt spacing list
                       in zip left right 
```

# javascript - 来自浏览器的坐标

> ID：15714900
> 
> 赞同：-1
> 
> 时间：2013-03-30T04:14:52.497
> 
> 标签：javascript, jquery

我需要知道如何从浏览器中的任何位置获取点击时的 x,y 坐标，我的脚本应该记录用户是否点击坐标 0，但首先我需要知道如何从任何位置获取坐标浏览器，而不仅仅是某个区域。到目前为止，这是我的代码。到目前为止，我已经就这个主题提出了一些问题，但没有占上风。

```
<script>

$(document).ready(function(){

    $('.button').click(function(e){
        if(e.pageX == 0 || e.pageY ==0){

$.ajax({
    url: 'recorder.php',
});

        }
    }); 
}); 

</script> 
```

所以我猜想使这项工作..我需要`$('.button').click`用一些东西代替，但我不知道用什么代替。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T04:17:34.843

DOM 事件对象具有以下字段：

*   clientX：当触发事件时，返回鼠标指针相对于当前窗口的水平坐标
*   clientY：当触发事件时，返回鼠标指针相对于当前窗口的垂直坐标

[http://www.w3schools.com/jsref/dom_obj_event.asp](http://www.w3schools.com/jsref/dom_obj_event.asp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T04:23:32.013

您想在整个`window`.

```
$(window).mousemove(function(event){
    $("#coords").html("X = " + event.pageX + " Y = " + event.pageY);
}); 
```

用 html

```
<div id="coords"></div> 
```

有了这个，您将获得鼠标位置。但目前还不清楚你接下来要做什么。

**编辑。**如果需要，可以将事件更改为`click`而不是 mousemove。

[演示](http://jsfiddle.net/V3yzk/)

# python-2.7 - 将属性作为参数传递

> ID：15714906
> 
> 赞同：0
> 
> 时间：2013-03-30T04:15:48.003
> 
> 标签：python-2.7

我在一个包含整数作为值的类上有许多属性。根据用户当前的选择，给定属性的所有数据可能为零，在这种情况下我不想显示它。

我正在尝试定义一个函数来检查每个属性：

```
def NoneCheck(collegelist, attribute):
    e = []
    for college in collegelist:
        e.append(int(college.attribute))
    if sum(e) == 0:
        attribute = False
    else:
        attribute = True
    return attribute 
```

但我最终得到了错误：

```
'Inventories' object has no attribute 'attribute' 
```

显然“属性”没有被传递给college.attribute，而是被字面理解为“属性”属性。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T04:20:16.043

IIUC，您想要`getattr` [[docs]](http://docs.python.org/2/library/functions.html#getattr)，它从其名称中获取一个属性。例如：

```
def NoneCheck(collegelist, attribute):
    return sum(getattr(coll, attribute) for coll in collegelist) != 0 
```

给

```
>>> NoneCheck([Inventory(0), Inventory(0)], 'book')
False
>>> NoneCheck([Inventory(0), Inventory(4)], 'book')
True
>>> NoneCheck([Inventory(0), Inventory(4)], 'undefined')
Traceback (most recent call last):
  File "<ipython-input-5-4aae80aba985>", line 1, in <module>
    NoneCheck([Inventory(0), Inventory(4)], 'undefined')
  File "<ipython-input-1-424558a8260f>", line 2, in NoneCheck
    return sum(getattr(coll, attribute) for coll in collegelist) == 0
  File "<ipython-input-1-424558a8260f>", line 2, in <genexpr>
    return sum(getattr(coll, attribute) for coll in collegelist) == 0
AttributeError: 'Inventory' object has no attribute 'undefined' 
```

I should say, though, that I seldom use `getattr` and `setattr` myself. Whenever you need to apply something to many attributes at once, you realize you need to put their names somewhere so you can loop over them.. and if you're doing that, you might as well use a `dict` to start with!

# iphone - How do iOS processes get their name?

> ID：15714908
> 
> 赞同：3
> 
> 时间：2013-03-30T04:16:29.703
> 
> 标签：iphone, ios, objective-c

Is there a default way iOS names Them? I'm trying to find some sort of pattern to link them to an app name/bundleID so I can retrieve that apps information from the App Store search API. From what I've seen many apps process names are simply their name (eg Dropbox, Skype) but I figure someone has a better idea

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-30T06:56:03.117

In the `Info.plist` of the App, the relevant key-pair name is `CFBundleExecutable`.

The default value is set to the Xcode project name (naturally, eg "Dropbox", "Skype", etc). Look at any app's `Info.plist` via Xcode or by opening up a packaged app.

Documentation for `${EXECUTABLE_NAME}`: [http://developer.apple.com/library/mac/#documentation/DeveloperTools/Reference/XcodeBuildSettingRef/1-Build_Setting_Reference/build_setting_ref.html#//apple_ref/doc/uid/TP40003931-CH3-SW71](http://developer.apple.com/library/mac/#documentation/DeveloperTools/Reference/XcodeBuildSettingRef/1-Build_Setting_Reference/build_setting_ref.html#//apple_ref/doc/uid/TP40003931-CH3-SW71)

Source: I built [iHasApp](http://www.ihasapp.com), an app-detection framework, so I spent a lot of time looking into what you're interesting in doing.

# php - PHP - “分段错误（核心转储）” - 错误是什么意思？

> ID：15714909
> 
> 赞同：7
> 
> 时间：2013-03-30T04:16:45.430
> 
> 标签：php

我使用 Simple HTML Dom Parser 编写了一个简单的爬虫来抓取一些东西。

这是一个简单的脚本，只运行 1 个进程，没有什么大不了的。但是一段时间后，`"Segmentation fault (core dumped)"-error,`当我在 shell 中运行它时，它会产生一个。

当我在浏览器中运行脚本时，它说

```
"Error: The connection to the server was reset while the page was loading.". 
```

我已确保尽快处理`unset()`每个变量并增加了`memory_limit`in `php.ini`，但我仍然收到此错误：/

有人知道这意味着什么以及如何解决吗？

感谢您的任何建议！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2015-06-02T23:48:58.507

当 a 意外进行递归循环时，我遇到了这个问题，因此内存不足。但它告诉我的方式是`Segmentation fault (core dumped)`犯错误！

因此，查看您最近编写的代码并检查您是否犯了这样的错误！我的例子很简单（而且很愚蠢）。我只是有点快接受自动完成的建议:)

```
public function getAttendees()
{
    return $this->getAttendees();
} 
```

希望这可以帮助将来的人

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-05-31T22:10:03.973

如果其他人对 Simple HTML Dom Parser 有同样的问题：在这种情况下，错误是由于网页太长引起的。SHDP 有一个预配置的“MAX_FILE_SIZE”。你必须在源中增加它`simple_html_dom.php`。见行：

```
define('MAX_FILE_SIZE', 600000); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-09-22T11:54:13.310

我已经有了它，因为 /tmp 文件夹中的数据过多，VM 中的可用硬盘空间已结束

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-05-25T22:03:51.913

我认为“核心转储”只是意味着程序释放了内存并退出了。

分段错误通常发生在您尝试访问不属于您的内存的一部分时，或者通过延迟未初始化或无效的指针。

您会在某处传递/使用错误的句柄或超出数组吗？

* * *

## 回答 #5

> 赞同：-6
> 
> 时间：2014-12-04T03:11:46.607

我只是有同样的问题。我在做

```
return $var; 
```

这导致了错误。然而返回

```
return [$var][0]; 
```

工作。我确信对此有一个很好的解释，但我不知道。

# plsql - 错误：ORA-00937

> ID：15714915
> 
> 赞同：0
> 
> 时间：2013-03-30T04:17:55.780
> 
> 标签：plsql, oracle10g

我想创建一个表 NEW_DEPTS。我有 DEPARTMENT_ID 和 DEPARTMENT_NAME，它们位于 DEPARTMENTS 表中。

```
 desc departments
            Name                            Null?    Type
            ------------------------------- -------- ----
            DEPARTMENT_ID                   NOT NULL NUMBER(4)
            DEPARTMENT_NAME                 NOT NULL VARCHAR2(30)
            MANAGER_ID                               NUMBER(6)
            LOCATION_ID                              NUMBER(4) 
```

我的 EMPLOYEES 表包含：

```
 desc employees
            Name                            Null?    Type
            ------------------------------- -------- ----
            EMPLOYEE_ID                     NOT NULL NUMBER(6)
            FIRST_NAME                               VARCHAR2(20)
            LAST_NAME                       NOT NULL VARCHAR2(25)
            EMAIL                           NOT NULL VARCHAR2(25)
            PHONE_NUMBER                             VARCHAR2(20)
            HIRE_DATE                       NOT NULL DATE
            JOB_ID                          NOT NULL VARCHAR2(10)
            SALARY                                   NUMBER(8,2)
            COMMISSION_PCT                           NUMBER(2,2)
            MANAGER_ID                               NUMBER(6)
            DEPARTMENT_ID                            NUMBER(4) 
```

现在，我想创建一个 NEW_DEPTS 表，其中应包含 DEPARTMENT_ID 和 DEPARTMENT_NAME 以及每个部门的总 SALARY。每个部门都有一定数量的员工，因此，对于部门编号 10、20、30 等，应计算总工资。

我的主要查询是：

```
 create table new_depts as
           select d.department_id,d.department_name,sum(e.salary) dept_sal
           from employees e,departments d
           where e.department_id = d.department_id; 
```

我收到一个错误：

```
 select d.department_id,d.department_name,sum(e.salary) dept_sal
              *
           ERROR at line 2:
           ORA-00937: not a single-group group function 
```

所以，我google了一下。我发现像 sum、avg、max、min 这样的组函数不能在 select 语句中使用。我需要 GROUP BY 子句。所以，我想单独解决它。因此，我跳过了“create table ...”语句并写道：

```
 select distinct d.department_id,d.department_name,sum(e.salary) dept_sal
           from employees e,departments d
           where e.department_id = d.department_id
           group by department_id; 
```

我得到错误：

```
 group by department_id;
                  *
           ERROR at line 4:
           ORA-00911: invalid character 
```

然后我写道：

```
 select d.department_id,d.department_name,sum(e.salary) dept_sal
           from employees e,departments d
           where e.department_id = d.department_id
           group by d.department_id; 
```

我得到错误：

```
 select d.department_id,d.department_name,sum(e.salary) dept_sal
                   *
           ERROR at line 1:
           ORA-00979: not a GROUP BY expression 
```

然后我写道：

```
 select d.department_id,d.department_name,sum(e.salary) dept_sal
           from employees e,departments d
           where e.department_id = d.department_id
           group by department_id; 
```

我得到错误：

```
 group by department_id
                   *
           ERROR at line 4:
           ORA-00918: column ambiguously defined 
```

I know that its a "join". But not getting how should I place GROUP BY clause so that my GROUP FUNCTION may run correctly.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T04:29:08.103

You need to group by all columns not in an aggregate function and since you have defined a table alias you must use that in your columns. The error `ORA-00918: column ambiguously defined` is because you have two columns named `department_id` so you must specify the table the `department_id` is from:

```
select d.department_id,
  d.department_name,
  sum(e.salary) dept_sal
from employees e
inner join departments d
  on e.department_id = d.department_id
group by d.department_id, d.department_name; 
```

You will notice that I altered the query to use ANSI JOIN syntax (`INNER JOIN`).

# vb.net - 使用 oledb 命令 vb.net 从存储过程中检索输出参数

> ID：15714923
> 
> 赞同：2
> 
> 时间：2013-03-30T04:19:52.063
> 
> 标签：vb.net, stored-procedures

我的存储过程：

```
PROCEDURE [dbo].[addMasterTransaksi]

@kodeSuplier varchar(10),
@Total money,
@kodeUser varchar(10),
@isLunas varchar (2),
@Dp money,
@kodeTrans varchar(10) output
AS
BEGIN
Declare @KdTrans as varchar(10);
Declare @Kode as int;
Declare @thisYear as varchar(10);

select @thisyear = RIGHT(YEAR(getDate()),2)

SELECT TOP(1) @KdTrans = SUBSTRING(kodeTransaksi,5,6) FROM TblMasterPembelian WHERE YEAR(Tanggal) = YEAR(getDate()) order by kodeTransaksi desc;
--print @KdTrans
IF @KdTrans IS Null 
    SET @KdTrans = 'TB'+ @thisYear +'000001'
else
    begin
    select @Kode = convert(int,@KdTrans);
    select @Kode = @Kode + 1;
    select @KdTrans = convert(int,@Kode);
    select @KdTrans = '00000' + @KdTrans;
    select @KdTrans = right(@KdTrans,6)
    select @KdTrans ='TB' + @thisYear + @KdTrans 
    end

SET NOCOUNT ON;

--ke Master Pembelian
INSERT INTO TblMasterPembelian(kodeTransaksi,Tanggal,Total,kodeSuplier,kodeUser,isLunas,DP)
VALUES (@KdTrans,getDate(),@Total,@kodeSuplier,@kodeUser,@isLunas,@Dp)

 set @kodeTrans =@KdTrans
--print @kodeTrans
return  @kodetrans

END 
```

VB.NET 代码：

```
Public Function addMasterPembelianny(ByVal kodesup As String, ByVal total As Long, ByVal kodeUser As String, ByVal isLunas As String, ByVal dp As Long)
    Dim kodeTransaksi As String

    modKoneksi.bukaKoneksi()
    command.Connection = modKoneksi.koneksidb
    command.CommandType = CommandType.StoredProcedure
    command.CommandText = "addMasterTransaksi"
    command.Parameters.Add("@kodeSuplier", OleDbType.VarChar, 10, ParameterDirection.Input).Value = kodesup
    command.Parameters.Add("@Total", OleDbType.BigInt, 10, ParameterDirection.Input).Value = total
    command.Parameters.Add("@kodeUser", OleDbType.VarChar, 10, ParameterDirection.Input).Value = kodeUser
    command.Parameters.Add("@isLunas", OleDbType.VarChar, 2, ParameterDirection.Input).Value = isLunas
    command.Parameters.Add("@Dp", OleDbType.BigInt, 10, ParameterDirection.Input).Value = dp

    command.Parameters.Add("@kodeTrans", OleDbType.Char, 10)
    command.Parameters("@kodeTrans").Direction = ParameterDirection.Output

    command.ExecuteReader()

    kodeTransaksi = command.Parameters("@kodeTrans").Value
    modKoneksi.tutupKoneksi()
    Return kodeTransaksi

End Function 
```

当我想从存储过程中检索参数时遇到问题..

当我运行该代码时，会出现类似此消息的错误..

> 将 varchar 值“TB13000005”转换为数据类型 int 时转换失败。

为什么他们说转换为 int 数据类型失败？

我的代码有什么问题..？

请高手帮帮我..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-30T04:46:43.570

我相信是您的存储过程中的这一行导致了错误：

```
return  @kodetrans 
```

存储过程只能返回整数作为`RETURN`语句的一部分，因此该行失败（就像`@kodetrans`a一样`VARCHAR`）。您可以完全删除该行...对于输出参数，您在此处所做的操作：

```
set @kodeTrans =@KdTrans 
```

在存储过程中很好，应该足够/确定。

# css - 如何将重复的平铺图像插入 WordPress 页面或帖子的背景（不是页面背景）？

> ID：15714925
> 
> 赞同：2
> 
> 时间：2013-03-30T04:20:06.270
> 
> 标签：css, wordpress, background-image

我又在*摆弄*我的[Pytheas 主题](http://www.wpexplorer.com/pytheas-free-wordpress-theme/)了。这一次，我试图在我的页面和帖子的背景上插入一个 2 色 gif（适合平铺）。请注意，我**并不是**指整个页面的背景。也就是说，并且应该保持黑色。有问题的站点/示例帖子在[这里](http://longgame.org/2012/02/95-hours-in-the-wasteland/)。

我已经尽可能广泛地调查了我的编码缺陷。目前，我一直在编辑**styles.css**文件。我替换*了这个*默认代码：

```
/* Body & Main
================================================== */
body { background: #eee url("images/main-bg.png") repeat; nowhitespace: afterproperty; font: 12px/1.8 'Helvetica Neue', Helvetica, Arial, sans-serif; color: #444; -webkit-font-smoothing: antialiased; -webkit-text-size-adjust: 100%; }
body a { color: #f15a23 } /*main link color*/
body a:hover { text-decoration: none; color: #000 } 
```

有了这个*修改*后的代码，我把我对 CSS 的模糊理解拼凑在一起。

```
body {
  background: url("http://longgame.org/wp-content/uploads/grid-paper-2color-start.gif")  repeat; nowhitespace: afterproperty;
  background-repeat: repeat;
  background-color:rgba(255,255,255,0.0);
  font: 12px/1.8 'Helvetica Neue', Helvetica, Arial, sans-serif; color: #444; -webkit-font-smoothing: antialiased; -webkit-text-size-adjust: 100%; 
} 
```

我的想法是我需要那个*rgba*位来确保颜色是透明的（以防纹理在它“后面”）。我不知道。我在扔飞镖。也许它在错误的地方。也许这完全是错误的。:)

我求助于你更有资格的人来帮助我。提前感谢您提供的任何指导。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T04:29:10.607

`body`与其设置元素的 CSS，不如尝试设置它`#main-content`

另外，你只需要第一行就可以达到你想要的效果：

```
#main-content {
    background: url("http://longgame.org/wp-content/uploads/grid-paper-2color-start.gif")  repeat;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T04:31:09.617

If you don't want the background of the whole page to be affected, but only the background of the WordPress page/post, you shouldn't be adjusting the background properly of the `body` element in your CSS, which would affect the entire HTML page, but rather of the element for which you want to apply the background, probably `#main-content`.

Try setting that background property on `#main-content` near line 24 of your CSS file instead, e.g.

```
#main-content {
    background: url("http://longgame.org/wp-content/uploads/grid-paper-2color-start.gif")  repeat;
} 
```

# php - 当我在 cakephp 中使用“组”时，分页不起作用

> ID：15714928
> 
> 赞同：2
> 
> 时间：2013-03-30T04:20:16.073
> 
> 标签：php, cakephp, cakephp-1.3

我有模型`IndividualSystemSerialNumber`，`cakephp1.3` 当我尝试`group by` `mac_address`分页时不起作用。

但是当我`group`从分页中删除时，它工作正常。

```
$this->paginate = array(
    'order' => $order_by,
    'group' => 'IndividualSystemSerialNumber.mac_address',
    'page' => intval($page),
    'limit' => $this->params['url']['iDisplayLength']
);

$systems = $this->paginate('IndividualSystemSerialNumber'); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-30T09:47:42.720

我和你有同样的问题我现在不知道但是`paginate`当你使用`group`选项时有一些问题。

所以这是一个非常棒的替代解决方案。

**例子**

```
$systems = $this->IndividualSystemSerialNumber->find('all',array
(
    'order'  => $order_by,
    'group' => 'IndividualSystemSerialNumber.mac_address',
    'page'  => intval($page),
    'limit'  => $this->params['url']['iDisplayLength'],
    'fields' => array
    (
        'IndividualSystemSerialNumber.mac_address',
        //other related fields.
    )
)); 
```

您有`$page`这是您请求的页数，并且`Model::find()`有一个名为`page`接受当前请求的页码的选项，并且您还`limit`设置了上述代码将作为`$this->paginate();`

干杯享受编码。

# php - 如何从 PHP 中的 .jsp 文件中获取输出？

> ID：15714937
> 
> 赞同：0
> 
> 时间：2013-03-30T04:22:03.077
> 
> 标签：php, file, jsp, minecraft

例如，我正在尝试执行**[http://www.minecraft.net/haspaid.jsp?user=notch](http://www.minecraft.net/haspaid.jsp?user=notch)，**它返回 true。我想基本上从 PHP 制作 ?user=$somevariable 并读取结果是返回真还是假。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T04:39:23.247

对于其他人所说的，我建议阅读： http: [//php.net/manual/en/function.file-get-contents.php](http://php.net/manual/en/function.file-get-contents.php)

您应该在发送之前 urlencode() 包含用户名的变量以及使用正则表达式以确保安全......我没有测试正则表达式，但它应该可以工作。我还修复了 Hanky Panky:s 建议代码中的错误，如果您声明 $user，则必须在 URL 中使用该变量而不是 $notch。

```
$username = "notch";
$url = "http://www.minecraft.net/haspaid.jsp?user=". urlencode( preg_replace( "/[^\w ]/i" , "", $username ) );

$result = file_get_contents( $url );
$hasPaid = $result == "true"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T04:26:01.237

```
$user="notch";
$result=file_get_contents("http://www.minecraft.net/haspaid.jsp?user=$notch"); 

if($result=="true")  
{
echo "Result is true";
}
else
{
echo "Result is false";

} 
```

注意 周围的双引号`"true"`，因为`file_get_contents`将返回一个字符串（成功时）而不是布尔值。如果你愿意，你可以将它转换为 bool。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-30T04:26:17.737

尝试这个：

```
$myVariable = "notch";
echo file_get_contents("http://www.minecraft.net/haspaid.jsp?user=$myVariable"); 
```

# android - 删除列表项然后查询数据库会引发异常

> ID：15714941
> 
> 赞同：0
> 
> 时间：2013-03-30T04:23:08.770
> 
> 标签：android, database, android-arrayadapter, listactivity

我已将列表项目从 BaseAdapter 转换为 ArrayAdapter ListActivity，因为我在另一个问题中被告知 ArrayAdapter 更动态且更擅长，特别是允许从列表中删除项目，然后更新以反映该删除。不过，我的 ArrayAdapter 仍然遇到同样的问题，如下所示：

我得到我的列表数据：

```
public void loadAdapter(){

    DatabaseHelper helper = new DatabaseHelper(ActivityMain.this);
    database = helper.getReadableDatabase();

    Cursor data = database.query("list_data", fields, null, null, null,
            null, null);
    Integer tindex = data.getColumnIndex("listTitle");
    Integer iindex = data.getColumnIndex("listType");

    itemCount = 0;
    for (data.moveToFirst(); !data.isAfterLast(); data.moveToNext()) {
        m_parts.add(new Item(data.getString(tindex), data.getString(iindex)));
        itemCount++;
    }

    data.close();

    for (int j = 0; j < 10; j++) {
        m_parts.add(new Item("", "R"));
    }

    m_adapter = new ItemAdapter(ActivityMain.this, R.layout.listview, m_parts);

    setListAdapter(m_adapter);  
} 
```

使用此自定义适配器：

```
public class ItemAdapter extends ArrayAdapter<Item> {

    private ArrayList<Item> objects;

    public ItemAdapter(Context context, int textViewResourceId,
            ArrayList<Item> objects) {
        super(context, textViewResourceId, objects);
        this.objects = objects;
    }

    public View getView(int position, View convertView, ViewGroup parent) {

        View v = convertView;

        if (v == null) {
            LayoutInflater inflater = (LayoutInflater) getContext()
                    .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            v = inflater.inflate(R.layout.listview, null);
        }

        Item i = objects.get(position);

        if (i != null) {

            TextView textview = (TextView) v.findViewById(R.id.tv_main);
            ImageView imageview = (ImageView) v.findViewById(R.id.iv_main);
            TextView textview2 = (TextView) v.findViewById(R.id.tv_main2);
            textview.setText(i.getText());
            textview2.setText(i.getText());

            imageview.setScaleType(ScaleType.FIT_XY);
            Integer theDrawable;
            if (i.getImage() != "L") {
                theDrawable = R.drawable.listview_regular;
            } else {
                theDrawable = R.drawable.listview_location;
            }
            imageview.setImageResource(theDrawable);

        }

        v.setOnClickListener(new OnItemClickListener(position));
        v.setOnLongClickListener(new OnItemLongClickListener(position));
        return v;

    }
} 
```

longclicklistener 的上下文菜单提供了一个删除选项，它使用这个

```
private void showDialogOnLongClick(final int position) {

 Builder alert = new AlertDialog.Builder(this);

 ArrayList<String> listInfo = getListInfo(position);
 String content = listInfo.get(1);
 String numItems = "";

 if (content != null && content.indexOf("|~|") > -1) {
 String[] contentSplit = content.split("\\|\\~\\|");
 numItems = contentSplit.length + " items in list";
 } else {
 numItems = "No items in list";
 }

 String listTitle = listInfo.get(0);
 String created = "Created: " + listInfo.get(2);
 String modified = "Modified: " + listInfo.get(3);
 String delete = "Delete";
 String edit = "Edit";
 final String[] items = new String[] { created, modified, numItems,
 delete, edit };

 alert.setTitle(listTitle);

 alert.setItems(items, new DialogInterface.OnClickListener() {
 @Override
 public void onClick(DialogInterface dialog, int which) {
 switch (which) {

 case 3:
 if (deleteList(position)) {
//listview.invalidate();
//Item itemToRemove = m_parts.remove(position);
//m_adapter.remove(itemToRemove);
//m_adapter.remove(toRemove);
//m_adapter.notifyDataSetInvalidated();     <-- These are all things I've tried
//m_adapter.clear();                                in various combinations
//m_adapter.remove(position);

Item toRemove = m_adapter.getItem(position);
m_parts.remove(toRemove); //or, m_parts.remove(position);<-This is what should work
     m_adapter.notifyDataSetChanged();
     loadAdapter();
//       runOnUiThread(new Runnable() {
//      public void run() {
//          m_adapter.notifyDataSetChanged();     <--I've tried a thread approach
//              }  
//          }); 
 }
 break;

 case 4:
 Intent i = new Intent(ActivityMain.this,
 ShowARegularList.class);
 i.putExtra("list_id", (position + 1) + "");
 startActivity(i);
 break;
 }
 }
 });

 alert.setPositiveButton("OK", new DialogInterface.OnClickListener() {

 @Override
 public void onClick(DialogInterface dialog, int which) {

 dialog.dismiss();

 }
 });

 alert.show();
 } 
```

其中，如果 3 更改数据库

```
// Delete single list item data
public boolean deleteList(int id) {
    id++;
    DatabaseHelper helper = new DatabaseHelper(this);
    database = helper.getWritableDatabase();

    // ContentValues values = new ContentValues();
    // values.put("_id", id);

    database.delete("list_data", "_id =" + id, null);
    database.close();

    // text = text.removeElementStr();
    // itemCount--;
    return true;

} 
```

上面的工作是从列表中删除一个项目，并在视觉上缩小差距。但是，当单击从中删除项目的“旧”点时（这引发了编辑所选项目的新意图），在查询数据库的新活动中引发异常（最后一行，logcat 中的 97）：

```
final Integer thisListID = Integer.parseInt(listIDstr);
    final DatabaseHelper helper = new DatabaseHelper(this);
    database = helper.getReadableDatabase();

    Cursor cursor = database.query("list_data", new String[] { "listTitle",
            "listContent", "dateCreated", "dateModified" }, "_id = " + thisListID
            + "", null, null, null, null);

    ArrayList<String> listInfo = new ArrayList<String>();

    if (cursor != null && cursor.moveToFirst()) {
        listInfo.add(cursor.getString(cursor.getColumnIndex("listTitle")));
        listInfo.add(cursor.getString(cursor.getColumnIndex("listContent")));
        listInfo.add(cursor.getString(cursor.getColumnIndex("dateCreated")));
        listInfo.add(cursor.getString(cursor.getColumnIndex("dateModified")));
    }

    cursor.close();
    strListContent = listInfo.get(1).trim(); 
```

用 logcat

```
java.lang.RuntimeException: Unable to start activity... 
java.lang.IndexOutOfBoundsException: Invalid index 1, size is 0
at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2049)
at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2083)
at android.app.ActivityThread.access$600(ActivityThread.java:134)
at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1233)
...
at com.baked.listanywhere.ShowARegularList.onCreate(ShowARegularList.java:97) 
```

索引小于删除的列表项很好；那些具有更大索引的内容是其内容之一。我怀疑我在查询中的逻辑错误，查询不再存在的索引......但似乎我应该能够重绘列表并拥有一个反映数据库的索引列表。我真正想做的是消除列表的任何记忆，然后重新填充它，但我似乎无法做到这一点......任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T18:38:55.473

好吧，由于没有人插话，我通过查询解决了这个问题

```
Cursor cursor = database.rawQuery("SELECT * FROM list_data ORDER BY _id LIMIT 1 OFFSET '"+ thisListID +"'", null); 
```

感谢 Wojtek 在[这个问题](https://stackoverflow.com/questions/3419626/sqlite3-or-general-sql-retrieve-nth-row-of-a-query-result)上。是的，

```
case 3:
 if (deleteList(position)) {

     Item toRemove = m_adapter.getItem(position);
     m_parts.remove(toRemove);
     m_adapter.notifyDataSetInvalidated();

     loadAdapter();

 break;
 } 
```

工作正常，即使我可以发誓这是问题所在！

# django - 在 Heroku 上为 Django 静态文件添加过期标头

> ID：15714947
> 
> 赞同：4
> 
> 时间：2013-03-30T04:24:20.223
> 
> 标签：django, caching, heroku

我正在尝试优化我的网页，但无法在我的静态文件上设置过期日期标题。

我正在运行 django-1.5、python-2.7.3。

这是我在 settings.pyso 中的缓存设置：

```
CACHES = {
    'default': {
        'BACKEND': 'django.core.cache.backends.filebased.FileBasedCache',
        'LOCATION': os.path.join(PROJECT_ROOT, 'cache/'),
    }
}

CACHE_MIDDLEWARE_ALIAS = 'default'
CACHE_MIDDLEWARE_SECONDS = 5 * 60
CACHE_MIDDLEWARE_KEY_PREFIX = ''

MIDDLEWARE_CLASSES = (
    'django.middleware.cache.UpdateCacheMiddleware',
    ...
    'django.middleware.cache.FetchFromCacheMiddleware',
) 
```

还有我在settings.py中的静态文件设置：

```
import os.path

PROJECT_DIR = os.path.dirname(os.path.abspath(__file__))
PROJECT_ROOT = os.path.abspath(os.path.join(PROJECT_DIR, '..'))

STATIC_ROOT = os.path.join(PROJECT_ROOT, 'staticfiles/')

STATIC_URL = '/static/'

STATICFILES_DIRS = (
    os.path.join(PROJECT_DIR, 'static'),
)

STATICFILES_FINDERS = (
    'django.contrib.staticfiles.finders.FileSystemFinder',
    'django.contrib.staticfiles.finders.AppDirectoriesFinder',
#    'django.contrib.staticfiles.finders.DefaultStorageFinder',
) 
```

我找到的最接近的建议是[here](https://stackoverflow.com/questions/1411542/what-is-the-best-way-to-set-far-future-expires-on-images-with-django)，但我无法修改 Heroku 上的 .htaccess 文件。

任何帮助是极大的赞赏。谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-30T06:22:39.760

django staticfiles 应用程序不提供对自定义标头的开箱即用支持。您必须拼凑自己的视图来提供文件并将自定义标头添加到 HttpResponse。

但是您不应该使用 Django 提供静态文件。**这是一个可怕的想法**。

1.  Django 是单线程的，并且是阻塞的。因此，每次您为用户提供静态文件时，您实际上并没有提供任何其他服务（包括您的应用程序代码，这就是 Django 的用途）。
2.  Django 的 staticviews 文件不安全且不稳定。该文档明确表示不要在生产中使用它。所以不要在生产中使用它。曾经。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-15T09:58:24.887

在生产中，您不应该使用 Django 提供静态文件。请参阅此页面上的警告框：[https ://docs.djangoproject.com/en/1.4/ref/contrib/staticfiles/#static-file-development-view](https://docs.djangoproject.com/en/1.4/ref/contrib/staticfiles/#static-file-development-view)

在开发中，Django 的应用程序通过覆盖命令`contrib.staticfiles`自动为您提供静态文件。`runserver`这样您就无法控制它为静态文件提供服务的方式。

`--nostatic`您可以通过将选项添加到 runserver 命令来阻止 staticfiles 应用程序提供静态文件：

```
./manage.py runserver --nostatic 
```

Then you can write an url config to manually serve the static files with headers you want:

```
from functools import wraps
from django.conf import settings
from django.contrib.staticfiles.views import serve as serve_static
from django.conf.urls import patterns, url

urlpatterns = patterns('', )

if settings.DEBUG:

    def custom_headers(view_func):

        @wraps(view_func)
        def wrapper(request, *args, **kwargs):
            response = view_func(request, *args, **kwargs)
            response['Custom-header'] = 'Awesome'
            response['Another-header'] = 'Bad ass'
            return response

        return wrapper

    urlpatterns += patterns('',
        url(r'^static/(?P<path>.*)$', custom_headers(serve_static)),
    ) 
```

If you want your `manage.py` to have the `--nostatic` option on by default, you can put this in your `manage.py`:

```
if '--nostatic' not in sys.argv:
    sys.argv.append('--nostatic') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-30T06:40:23.440

我认为由于您将项目托管在 heroku 上，因此普遍接受的做法似乎是使用 S3 来提供静态文件。

看看这个问题： [Proper way to handle static files and templates for Django on Heroku](https://stackoverflow.com/questions/11569144/proper-way-to-handle-static-files-and-templates-for-django-on-heroku)

我对此不太确定，但我相信您应该能够在从 S3 提供文件时更改标头，至少这个 SO 问题似乎暗示了这种方式 [是否可以在不下载整个对象的情况下更改 S3 对象上的标头？](https://stackoverflow.com/questions/269840/is-it-possible-to-change-headers-on-an-s3-object-without-downloading-the-entire)

希望这可以帮助

# grails - 自定义 Grails 域类中字符串列表的可连接列类型

> ID：15714948
> 
> 赞同：0
> 
> 时间：2013-03-30T04:24:37.673
> 
> 标签：grails, grails-orm

我有一个域类，其中包含一个字符串列表作为众多属性之一。有时，列表中的字符串超过 255 个字符。那么，我怎样才能在数据库中增加这个限制呢？或者更改 CLOB 或 TEXT 类型的列类型？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T23:03:32.357

If I understood you correctly, you want to change the type o the column in the join table of your domain class. You can do this in the mapping of your `hasMany`, through the `type` option.

```
class Person {
  static hasMany = [nicknames: String]
  static mapping = { 
    hasMany joinTable: [
      name: 'bunch_o_nicknames', 
      key: 'person_id', 
      column: 'nickname', 
      type: "text"
    ]
  } 
} 
```

# ruby-on-rails - 在表中使用 best_in_place gem

> ID：15714952
> 
> 赞同：2
> 
> 时间：2013-03-30T04:25:51.960
> 
> 标签：ruby-on-rails, best-in-place

我有一张列出所有用户的表格。我不想打开每个用户然后进行编辑，而是想编辑该表中的某些字段。

```
- @users.each do |u|
  %tr
    %td= u.name
    %td= best_in_place u, :email_flag, :type => :checkbox 
```

问题似乎是唯一传回的参数是复选框字段：

```
Processing by UsersController#update as
  Parameters: {"user"=>{"email_flag"=>"true"} 
```

我是以错误的方式接近这个吗？为什么用户对象'u'没有被传回？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-12-13T01:00:53.867

`best_in_place`在这里正常工作。不需要每次都传输您正在编辑的整个属性集。这就是 HTTP `PUT`（或`PATCH`取决于您的 Rails 版本）的用途——更新模型现有实例的属性。就像在 SQL 中一样，当你运行时`UPDATE users SET email='something@example.com' WHERE id=1`，你不必每次都列出每个字段。仅触摸指定的列。

当您为`last_name`或`country`如您在评论中所说的那样添加另一个字段时，它将以相同的方式工作。

# mysql - 如何使用 mysql 查询合并数据库中的 2 个表字段？

> ID：15714955
> 
> 赞同：0
> 
> 时间：2013-03-30T04:26:03.413
> 
> 标签：mysql

前：

![在此处输入图像描述](../Images/52fb676584bd03ba0fef67a7255a45c5.png)

后：

![在此处输入图像描述](../Images/a27491a6df5b868c9dd4c2107bb9d96c.png)

有没有办法使用 mysql 查询来做到这一点？我想合并前 2 个字段并将其重命名为“报告”，但内容仍以单元格分隔。我怎样才能做到这一点？非常感谢。

# ruby-on-rails - 如何在 Rails 3.2.12 中使用自定义表单构建器有选择地在新/编辑视图中显示字段？

> ID：15714959
> 
> 赞同：1
> 
> 时间：2013-03-30T04:26:38.527
> 
> 标签：ruby-on-rails, ruby-on-rails-3, formbuilder

在我们的 rails 3.2.12 应用程序中，我们希望`new/edit`根据访问规则有选择地在视图中显示字段（使用 simple_form）。例如，对于销售，只能显示客户的`name`和`phone#`。由于我们不知道访问规则将是什么，我们需要在运行时动态构建视图。实现这一点的一种方法是`if`在视图中使用，这会使视图变得混乱。我们认为`custom`表单构建可能会有所帮助。在网上阅读了一些关于自定义表单生成器的帖子后，我们仍然没有太多线索。有人可以提供有关如何使用`custom`表单生成器实现此功能的详细信息吗？感谢帮助！

更新：由于我们不知道访问规则将是什么，我们需要在运行时`dynamically`构建。`view`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T05:18:01.763

通常，自定义表单构建器用于更改表单 HTML 的结构，而不是用于控制字段访问。

一些“清理”视图的建议：

1.  使用[SimpleForm](https://github.com/plataformatec/simple_form)可以让您将表单字段/标签作为一个单元处理，从而更容易排除仅使用`= form_builder.input :credit_card_number if current_user.admin?`.
2.  对于更多应用范围的解决方案，[CanCan](https://github.com/ryanb/cancan/wiki/Custom-Actions)可以帮助您管理授权和角色。

* * *

编辑：

根据您的评论，如果所有列的处理方式相同并且您不需要更改它们的顺序（使用 HAML，但您可以在必要时将其更改为 ERB），那么以下方法对您来说可能是一个好方法：

```
= simple_form_for @model do |f|
   = f.error_notification
   - @model.columns_available_for(current_user).each do |column|
      = f.input column 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T11:00:32.273

You can use rails helpers to do that.

For ex.

```
module SalesHelper  
 def show_fields  
  if current_user.admin?  
    render 'some_partial' #having name and phone field  
  else  
     render 'other_partial'  
  end  
 end 
```

end

In your views add respective partials and from new or edit just call
<%= show_fields %>

# jquery - jquery表单验证未执行

> ID：15714961
> 
> 赞同：-1
> 
> 时间：2013-03-30T04:27:17.200
> 
> 标签：jquery, jquery-validate

我有一个表单，其中包含以下字段 inputUser、inputEmail、inputPhoneNo、inputPassword、inputConfirmPassword 和一个带有 createRegistration 的按钮

当处于模糊状态时，应该显示消息但不显示。当我单击 createRegistration 按钮时，表单未验证。我仍然发出 ajax 请求。

```
function validateForm(){

        $('#registerForm').validate({
        rules: {
          inputUser: {
            minlength: 2,
            required: true
          },
          inputEmail: {
            required: true,
            email: true
          },
          inputPhoneNo: {
            minlength: 2,
            required: true
          },
          inputPassword: {
            minlength: 5,
            required: true
          },
          inputConfirmPassword: {
            minlength: 5,
            required: true,
            equalTo: "#RinputPassword"
          }

        },
            highlight: function(element) {
                $(element).closest('.control-group').removeClass('success').addClass('error');
            },
            success: function(element) {
                element
                .text('OK!').addClass('valid')
                .closest('.control-group').removeClass('error').addClass('success');
            }
      });

}

$(document).ready(function() {
$('#createRegistration').click(

        function(){
            validateForm();         
            var post = $(this).attr("name") + "=" + $(this).val();

            // get form key value pairs 
           $queryString=$('#registerForm').serialize()+ "&" + post;

        $.post(
            'Registration.cgi',
            $queryString,
            function(data,status){
                var activationPattern = /activate/g;
                var EmailPattern = /Email/g;

                  if(activationPattern.test(data)) {
                      $('#RmailActivation').addClass("alert alert-sucess");
                      $('#RmailActivationSpan').html(data);
                  }else if(EmailPattern.test(data)){
                      $('#Remail').addClass("error");
                      $('#RemailError').html(data);
                  }else{
                      $('#Ruser').addClass("error");
                      $('#RuserError').html(data);
                  }
              }

        );

        });

}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T04:36:47.010

您对此插件有一些常见的问题和误解：

*   `.validate()`是插件的*初始化*，而不是重复调用来测试表单有效性的方法。相反，`.validate()`应该在 DOM 就绪事件处理程序中调用一次。然后一旦初始化，表单就会使用它的各种内置事件自动测试。

*   您不需要`click`处理程序。按钮的`click`事件`submit`由插件自动捕获。

*   [根据 docs](http://docs.jquery.com/Plugins/Validation/validate#toptions)，您应该将您`ajax`的放在插件的`submitHandler`回调选项中。

> **submitHandler**：回调，默认：默认（本机）表单提交
> 
> 回调，用于在表单有效时处理实际提交。获取表单作为唯一参数。替换默认提交。**验证后通过 Ajax 提交表单的正确位置。**

**假设您`ajax`的编写正确，请将您的代码重新排列成更像这样的内容：**

```
$(document).ready(function () {

    $('#registerForm').validate({
        rules: {
            inputUser: {
                minlength: 2,
                required: true
            },
            inputEmail: {
                required: true,
                email: true
            },
            inputPhoneNo: {
                minlength: 2,
                required: true
            },
            inputPassword: {
                minlength: 5,
                required: true
            },
            inputConfirmPassword: {
                minlength: 5,
                required: true,
                equalTo: "#RinputPassword"
            }
        },
        highlight: function (element) {
            $(element).closest('.control-group').removeClass('success').addClass('error');
        },
        success: function (element) {
            element.text('OK!').addClass('valid')
                .closest('.control-group').removeClass('error').addClass('success');
        },
        submitHandler: function (form) {
            var post = $('#createRegistration').attr("name") + "=" + $('#createRegistration').val();
            $queryString = $(form).serialize() + "&" + post;
            $.post(
                'Registration.cgi',
            $queryString,
            function (data, status) {
                var activationPattern = /activate/g;
                var EmailPattern = /Email/g;
                if (activationPattern.test(data)) {
                    $('#RmailActivation').addClass("alert alert-sucess");
                    $('#RmailActivationSpan').html(data);
                } else if (EmailPattern.test(data)) {
                    $('#Remail').addClass("error");
                    $('#RemailError').html(data);
                } else {
                    $('#Ruser').addClass("error");
                    $('#RuserError').html(data);
                }
            });
            return false;  // required (when using ajax) for blocking a regular submit
        }
    });

}); 
```

**非常简单的演示：http: [//jsfiddle.net/jMdWY/](http://jsfiddle.net/jMdWY/)**

使用 a`<button></button>`代替 a的相同演示：http `<input type="submit"/>`: [//jsfiddle.net/jMdWY/2/](http://jsfiddle.net/jMdWY/2/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-30T05:47:55.500

试试下面的代码

**HTML**

```
<form id="registerForm" onsubmit="return false;">
    <label>Username:</label><input type="text" name="inputUser" />
    <br/>
    <label>Email:</label><input type="text" name="inputEmail" />
    <br/>
    <label>Phone No:</label><input type="text" name="inputPhoneNo" />
    <br/>
    <label>Password:</label><input type="text" name="inputPassword" id="RinputPassword"/>
    <br/>
    <label>Confirm Password:</label><input type="text" name="inputConfirmPassword" />
    <br/>
    <input type="submit" id="createRegistration"/>
</form> 
```

**JS**

```
$(document).ready(function () {
    $('#registerForm').validate({ // initialize the plugin
        rules: {
            inputUser: {
                required: true,
                minlength: 2
            },
            inputEmail: {
                required: true,
                email: true
            },
            inputPhoneNo: {
                required: true,
                minlength: 2
            },
            inputPassword: {
                required: true,
                minlength: 5
            },
            inputConfirmPassword: {
                required: true,
                minlength: 5,
                equalTo: "#RinputPassword"
            }
        },
    });

    $("#createRegistration").click(function(){
        var queryString = $('#registerForm').serialize();
        alert(queryString);
        // Add your AJAX request here
    });
}); 
```

**现场演示：http:** [//jsfiddle.net/FkKUS/3/](http://jsfiddle.net/FkKUS/3/)

# neo4j - 社交网络的 Neo4j 图模型

> ID：15714963
> 
> 赞同：2
> 
> 时间：2013-03-30T04:27:36.410
> 
> 标签：neo4j, titan

我已经为社交网络创建了一个图形模型，并且需要一些关于缩放设计的具体建议。请原谅这些问题的n00bness，但我没有找到很多明确的例子......

注意：状态更新和活动节点/关系是链接列表 - 最新条目不断放置在列表顶部。

1.  链接列表允许生成新闻提要，但每个用户可能有数百条记录——我认为即使数据按日期降序排列，限制子句也不够用。我是否必须有一个单独的链接列表，它只包含最近的 10 个状态/活动更新）并不断替换该列表上的头部以获得更好的活动源生成，或者一个列表正确排序并完成工作（使用限制条款）

2.  这些节点都有属性（带有内容、ID 等的 json 数据）——“全局”索引如何在这里发挥作用，以便我可以找到喜欢 Depeche 模式的用户，而无需等待终生等待结果？我知道如何将节点添加到索引中，只是想知道我是否在这里遗漏了一部分图片。

3.  安全性-登录名和密码..我认为图形数据库可以存储它们，但我认为此时这是一个安全风险-将其保存在 postgres 等中会更好吗？

4.  您将如何改进此模型以处理可扩展性？想象一下有 2000 万用户在这方面大打出手……

5.  想象一下 4000 万用户——这个模型在可扩展性方面有什么问题？

![在此处输入图像描述](../Images/ee89cacbbf5cf4227b38b77f4a90647a.png)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-30T13:41:29.643

第1部分。

你可以编写 cypher 或 gremlin 查询来做你想做的事。请记住，您可以在边缘上向前和向后遍历。给定一个用户，它应该总是相对恒定的时间来拉起他们最近做的十件事。

第2部分。

If you are representing a band as an entity of a certain type, index on that attribute. Then you'll be able to pull out that node and traverse outwards to find all the users who like that band. If you don't have an independent entity, or it is somehow implicit, you'll want to enable full text search for your respective graph database.

Part 3\.

Learn more about security. The only thing you would be storing would be a properly hashed string of the user's password. At that point you would be fine using any graph db and good security practices.

Part 4/5\.

Once you have one user, worry about the next thousand.

When you have a thousand users, worry about the next hundred thousand.

When you have one hundred thousand, worry about the next million.

When you have a million users, you can start worrying about the questions you asked.

在您拥有至少 0.1% 的用户/量之前，尝试并询问有关如何扩大到特定规模的问题是一种精神自慰。

# android - 用于跟踪用户位置的高效后台服务

> ID：15714964
> 
> 赞同：5
> 
> 时间：2013-03-30T04:27:46.250
> 
> 标签：android, service, geolocation, batterylevel

我正在开发一个小型 android 应用程序，我希望在其中具有地理定位功能。我想要编写的是一项服务，它可以为用户提供更新的位置，无论他们是否正在使用我的应用程序。

我知道如果我不断检查用户的位置，它会耗尽设备的电池，所以我想要一个好的解决方案。例如，每 5 或 10 分钟给我一次更新。我已经阅读了很多关于这个问题的内容，但我想得到一个好的解决方案。

我阅读[了此页面](http://android-developers.blogspot.ro/2011/06/deep-dive-into-location.html)，如果用户正在使用我的应用程序，这是一个很好的解决方案，但如果用户不使用我的应用程序，那么我该怎么办？我该如何解决这个挑战？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-30T04:32:58.383

以前我开发过这样的应用程序。关于您的要求，您将需要来自 Android 的以下 API。

*   [位置](https://stackoverflow.com/a/1513569/996493)（用于经纬度信息）
*   [AlarmManager](https://stackoverflow.com/a/8801990/996493)（安排事件以定期获取经纬度详细信息并将数据上传到远程服务器）
*   Http（将经纬度详细信息发送到远程服务器的 API）
*   Android 服务（将允许在后台工作）
*   BroadcastReceiver（附加，如果您想在设备启动时自动启动您的应用程序）

# php - 使用 jquery $.post 的多个 php 返回值

> ID：15714965
> 
> 赞同：0
> 
> 时间：2013-03-30T04:27:58.767
> 
> 标签：php, jquery-post

我真的不知道如何问这个，这就是我在这里问的原因。因此，如果我使用这样的代码：

```
$.post("/data/something.php", {stuff: 'hi'}, function(data){
$('#box').html(data);
}); 
```

通常，如果您有这样的 php，您只会得到 1 个结果：

```
<?php echo $_REQUEST['stuff'] ?> 
```

我想知道 php 是否有任何方法可以发送一些数据，然后再稍后一点，而不是像这样一次发送所有数据：

```
<?php 
echo 'Foo';
//Do stuff that takes time
echo 'Bah';
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T04:35:50.123

有两种方法可以做到这一点。

第一个使用带有`flush`命令的标准工作流程（[http://php.net/manual/en/function.flush.php](http://php.net/manual/en/function.flush.php)）。这意味着您可以执行以下操作：

```
echo "Starting...\n"
flush();
// do long task
echo "Done!\n" 
```

然而：这通常是行不通的。例如，如果您的服务器使用 deflate，则`Starting`在请求完成之前可能不会发送。许多其他因素也可能导致这种情况（代理、浏览器行为）。

The better option is to use a polling mechanism. Your main script would write its progress to a file (with some session ID related filename), then delete that file when done. You would then add a second script to report the progress in this file (or completion if the file has been deleted) and your JavaScript would send an AJAX request to this checker script (maybe every second or two).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T04:41:12.037

In PHP

```
<?php 
    echo 'Foo';
    echo '||||';
    echo 'Bah';
?> 
```

In Javascript

```
var responses = data.split('||||');

//you will get 
//Foo in responses[0]
//Bar in responses[1] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-30T04:43:49.440

I expect that php has no problem doing that (as detailed by @Dave). The complicated part, is for javascript to retrieve the first part of the data, before the transmission completes...

I think what you are asking is answered here: [Is it possible for an AJAX request to be read before the response is complete?](https://stackoverflow.com/questions/6682835/is-it-possible-for-an-ajax-request-to-be-read-before-the-response-is-complete)

> The way to accomplish this is by listening on the readyState in the the xhr object. When readyState == 3 it means new content has arrived and you can access it. The technique is referred to as Comet.

and...

> So finally, yes it is possible, no it is not easy.

# python - 如何将基于 Python PyQt 的程序转换为 Linux 中的可移植包？

> ID：15714976
> 
> 赞同：0
> 
> 时间：2013-03-30T04:29:52.837
> 
> 标签：python, linux, pyqt, portability, python-bindings

我已经设法使用 PyInstaller 从基于 PyQt 的 Python 应用程序制作了一个工作可执行文件（适用于 Windows），但它也适用于 Linux 吗？在 linux 机器 (LUbuntu) 上，当我运行 .py 脚本时，我遇到了关于缺少 PyQt 绑定的错误，由于无法连接服务器，我什至无法通过 apt-get 下载它们。以某种方式将丢失的库打包到我的程序文件中会更方便，以使其更具可移植性，但我该怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T08:28:49.990

如果您以 Linux 发行版的包格式打包您的应用程序，它可以包含依赖关系信息。这是这个问题的规范解决方案。

Otherwise you'd have to include *all* nested dependencies to make sure that it'll work.

# iphone - Is this allocation statement right for cllocationmanager?

> ID：15714979
> 
> 赞同：0
> 
> 时间：2013-03-30T04:30:14.813
> 
> 标签：iphone, ios, memory-management, cllocationmanager

I have read through many sample codes and found that,

```
self.Location = [[CLLocationManager alloc] init]; 
```

this kind of allocation over a retained `Location` object is valid? this kind of memory management is it advisable??

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T04:31:50.400

Yes this is perfect, I don't see any problem here.

As, you are using MRC, You can go with

```
self.Location=[[[CLLocationManager alloc] init] autorelease]; 
```

or

```
 self.Location=[[CLLocationManager alloc] init]; 
```

and in the dealloc, `[Location release];`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T04:37:01.623

if your propery is retain or copy then you are over retained and the variable should be released, which looks strange... so if you want to do it in one line you would autorelease it.

# c - “%FF”目录错误？似乎是由于触摸[C]

> ID：15714980
> 
> 赞同：0
> 
> 时间：2013-03-30T04:30:50.957
> 
> 标签：c, string, file-io

我正在开发一个 C 项目，用户可以直接通过该程序创建博客。我正在设置我的输出 HTML 和 CSS 文件，但似乎无法修复我遇到的这个错误。

需要明确的是，编译器不会发出错误或警告。

**错误是这样的**：对于我输入的某些（不是全部）博客标题，目录名称变为附加了`%8B%FF`，或只是`%FF`，或其他一些变体，但始终以`%FF`. 此文件夹不包含任何文件，并且在重新启动计算机之前无法删除。当错误未出现时，文件夹中存在文件。

我已经包含了我的大部分代码，因为我真的不明白这个错误。**我相信错误出现在我要求创建 HTML 和 CSS 文件****的底部。`CreateNewBlog()`如果没有这些行，则不会发生错误。**

那么，`%FF`我的目录末尾的含义是什么，为什么会在那里？

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <ctype.h>

void CreateNewBlog();
void NewBlogHTML(char path[92], char blog_title[64]);
void NewBlogCSS(char path[92], char blog_title[64]);

int main()
{
  CreateNewBlog();

  return 0;
}

void CreateNewBlog()
{
  char blog_title[64];
  char dir_name[64];
  char mkdir[70];
  char touch[70];
  char html_path[92];
  char css_path[92];
  int i = 0;

  printf("Enter blog title: ");

  fgets(blog_title, 64, stdin);
  blog_title[strlen(blog_title) - 1] = '\0';  // removes trailing '\n' from fgets()

  for (i = 0; blog_title[i]; i++) {           // convert "Blog Title" to "blog-title"
    if (blog_title[i] == ' ') {
      dir_name[i] = '-';
    } else dir_name[i] = tolower(blog_title[i]);
  }

  dir_name[strlen(dir_name)] = '\0';

  sprintf(mkdir, "mkdir %s", dir_name);
  system(mkdir);

  sprintf(touch, "touch %s/index.html", dir_name);
  system(touch);

  sprintf(html_path, "%s/index.html", dir_name);
  sprintf(css_path, "%s/style.css", dir_name);
  NewBlogHTML(html_path, blog_title);  // HERE IS THE PROBLEM (when uncommented)
  NewBlogCSS(css_path, blog_title);    //
}

void NewBlogHTML(char path[92], char blog_title[64])
{
  FILE *index = fopen(path, "w");
  // html file text
  fclose(index);
}

void NewBlogCSS(char path[92], char blog_title[64])
{
  FILE *style = fopen(path, "w");
  // css file text
  fclose(style);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T17:55:23.517

```
 for (i = 0; blog_title[i]; i++) {           // convert "Blog Title" to "blog-title"
    if (blog_title[i] == ' ') {
      dir_name[i] = '-';
    } else dir_name[i] = tolower(blog_title[i]);
  }

   dir_name[i] = '\0'; // <<-- Add this line 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T04:52:45.817

这是一个问题：

```
for (i = 0; blog_title[i]; i++) {           // convert "Blog Title" to "blog-title"
  if (blog_title[i] == ' ') {
    dir_name[i] = '-';
  } else dir_name[i] = tolower(blog_title[i]);
} 
```

写入的最后一个字符`dir_name[]`never是因为循环体在is`'\0'`时不执行。`blog_title[i]``'\0'`

您需要显式附加`'\0'`到`dir_name[]`. 如果你不这样做，`dir_name[]`可能会在所有写入字符之后包含垃圾，只有在某个时候，纯粹的机会，它才会有`'\0'`，它可以是函数返回地址的一部分，也可以是存储在堆。

Another, unrelated oddity is here:

```
sprintf(html_path, "%s/index.html/", dir_name); 
```

Why is the file name ending in `'/'`?

# bash - BASH function with tmux send-keys

> ID：15714984
> 
> 赞同：4
> 
> 时间：2013-03-30T04:31:19.820
> 
> 标签：bash, tmux

I'm having problems putting "send-keys" into a bash function. Here's a minimal example:

```
function keys {
  tmux send-keys -t work:1 $*
}

tmux new-session -d -s work
keys "pwd" c-m "ls -latr" c-m
tmux attach-session -t work 
```

The keys argument here is exactly what I'd type on the command-line as an argument to `tmux send-keys`. It almost works, but strips spaces, so I see `ls-latr` all as one word. But if I put quotes around the `$*` in the function, it just outputs the entire keys argument on one line (treating the `c-m` as literal characters). How could I make it execute the send-keys argument as if I'd typed it from command-line?

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-30T05:41:54.780

# php - 注意：php中未定义的索引错误

> ID：15714989
> 
> 赞同：0
> 
> 时间：2013-03-30T04:31:58.603
> 
> 标签：php, mysql, xampp

我的表中使用分隔符存储了数据`/`。我需要将它们分开并需要将它们存储在不同的表中。在这样做的同时，我得到：

> 注意：未定义索引：第 21 行 /opt/lampp/htdocs/disease.php 中的 VSX1

我该如何解决这种错误？

```
<html>
<body>
    <?php
        $username = "root";
        $password = "****";
        $hostname = "localhost"; 
    $dbhandle = mysql_connect($hostname, $username, $password) or die("Unable to connect to MySQL");
        $selected = mysql_select_db("disease",$dbhandle) or die("Could not select disease");
    $result = mysql_query("SELECT * FROM `primary_data` LIMIT 0, 30");
        while($row = mysql_fetch_array($result))
        {
    $string = $row['gene_name'];
    $tok = strtok($string, "/");
    while ($tok !== false) {
    mysql_query("insert into temp_gene gene_name   values('".$_POST[$tok]."')");
        $tok = strtok("/");
    }

        }
        mysql_close($dbhandle);
    ?>
    </table>    
    </body>
    </html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T04:52:46.520

您从一个表传输数据并将其保存到另一个表。您根本不需要 $_POST 变量！当然，必须很好地转义数据。

```
while (($tok = strtok($string, '/')) !== false) {
    $tok = mysql_real_escape_string($tok);
    mysql_query("INSERT INTO temp_gene(gene_name) VALUES('{$tok}')");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T05:40:09.377

我赞同 Brad：关于使用 PDO 和准备好的语句的建议——它更加优雅和高效。

这是给你的一些代码......因为我不知道你想对标记化做什么等。我没有写过如何处理 $gene_name 的逻辑，但我相信你会这样做 =)

看看[http://www.php.net/manual/en/book.pdo.php](http://www.php.net/manual/en/book.pdo.php) 我还建议你使用 Doctrine 作为 PDO 之上的包装器/ORM，它让事情变得非常简单：[http:// www.doctrine-project.org/](http://www.doctrine-project.org/)

```
$dsn = "mysql:dbname={$db_name};host={$db_host}";
try {
    // init db handler.
    $db = new PDO( $dsn, $db_username, $password );

    // Execute selecting query.
    $select_sql = "SELECT gene_name FROM `primary_data` LIMIT 0, 30";
    $select_stmt = $db -> prepare( $sql );
    $select_stmt -> execute();

    // Bind row column 1 (1-indexed) to $gene_name.
    $select_stmt -> bindColumn( 1, $gene_name );

    // Prepare insert query to temp_gene.
    $temp_sql = "INSERT INTO temp_gene(gene_name) VALUES(?)";
    $temp_stmt = $db -> prepare( $temp_sql );

    // Begin transaction, it is more efficient to use transactions as your actual queries becomes 1 instead of O(rows).`enter code here`
    $db -> beginTransaction();

    while ( $row = $select_stmt -> fetch( PDO::FETCH_BOUND ) ) {
        $string =& $gene_name;

        // do your tokenizing logic here... also do escaping for security.

        $temp_stmt -> execute( array( $your_value_string ) );
    }

    // Commit the inserts.
    $db -> commit();
} catch (PDOException $e) {
    die( $e->getMessage() );
} 
```

# php - 我想在我的代码点火器上使用 for-each 但我正在使用 (id) 的条件和我的其他条件

> ID：15714990
> 
> 赞同：0
> 
> 时间：2013-03-30T04:31:59.890
> 
> 标签：php, mysql, codeigniter

在视图上我想使用 foreach 但我从 mypost 获得的**id的条件**

**模型**

```
public function get_rows($id= FALSE)
        {
            if ($id === FALSE)
            {
            $query = $this->db->get('table1');
            return $query->result_array();
            $config['per_page'];
                   $this->uri->segment(3);
            }
        $query = $this->db->get_where('table1', array('id'=> $id,'type'=> 2));
            return $query->row_array();
          } 
```

**控制器**

```
 public function index($id){    
        $data['rows'] = $this->model->get_rows($id);
        if (empty($data['rows']))
        {
        show_404();
        }
        $data['id'] = $data['rows']['id'];
        $this->load->view('view', $data);

    } 
```

**看法**

```
<?php foreach ($rows as $row):  ?>
    <li><?php echo $row->title; ?></li>
<?php endforeach; ?> 
```

在这里，我想在我的视图中使用每个，但条件是（**ID**）我从帖子中获得，并且我设置了我自己的**类型**

在此先感谢... rafiq__

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T04:37:23.477

鉴于`$row['title'];`不使用`$row->title;`

**看法**

```
<?php foreach ($rows as $row):  ?>
    <li><?php echo $row['title']; ?></li>
<?php endforeach; ?> 
```

并且可能您需要在模型中更改`return $query->row_array();`为`return $query->result_array();`。

**模型**

```
public function get_rows($id = 0){

    if ($id > 0){
         $this->db->where(array('id'=> $id,'type'=> 2));
    }

    return $this->db->get('table1')->result_array();
} 
```

# autohotkey - autohotkey：3 个键同时按下 = 热键？

> ID：15714991
> 
> 赞同：1
> 
> 时间：2013-03-30T04:32:23.037
> 
> 标签：autohotkey, hotkeys

语言：Win7上的自动热键

“Shift”加“鼠标右键”加“鼠标滚轮”

我希望我的热键同时按住这三个键。我尝试了以下但没有成功

```
+ & rbutton & wheelup:: 
send 6

+rbutton & wheelup::
send 6

shift & rbutton & wheelup::
send 6 
```

当我尝试制作此热键时，我总是遇到错误，有人知道该怎么做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T03:39:48.420

我仍然是新手，但我会尽力帮助=]。

当您使用带有两个鼠标按钮的修饰键时，它似乎不起作用，所以这是一种*有效*的方式：

```
+WheelUp::
KeyWait, RButton, D    ; Waits for RButton to be pressed down.
MsgBox, This works!
Return 
```

问题是一旦热键运行，它就会单击（或释放）鼠标右键。如果你改为这样说：

```
+RButton::
KeyWait, WheelUp, D 
```

还有一个问题是它在**第一次**使用热键时可以正常工作，从那时起它只会使用 Shift + 鼠标右键，因为它已经等待 WheelUp 被按下（或者更确切地说是向上滚动）。

我用GetKeyState之类的东西弄了一点，但仍然是新手，我找不到解决它的方法xD。这些可能足以满足您现在的需要，否则最好等待更有知识的人发布。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-11-27T21:57:01.520

根据您评论中的信息（按住 Shift+right 和垃圾邮件 WheelUp），以下解决方案可以正常工作。使用 Shift + WheelUp 并检查鼠标右键是否向下。

```
+WheelUp::
    if (GetKeyState("RButton", "P"))
        send 6
    else
        send +{WheelUp}
return 
```

您可以删除 else 部分并添加**~**修饰符，但是即使您不按鼠标右键，AHK 也会捕获并阻止 Shift + WheelUp。

# asterisk - Asterisk Answering machine detection (AMD) 总是将接收器检测为 MACHINE

> ID：15714996
> 
> 赞同：2
> 
> 时间：2013-03-30T04:33:06.160
> 
> 标签：asterisk

我在 Ubuntu 上使用 Asterisk 1.8。但是问题是我更改了 amd.conf 配置 AMD() 调用将 AMDSTATUS 检测为 MACHINE。请指导我正确设置 AMD 检测，如果有人拿起电话并说“嗨，这是某某”，而机器拿起 10 到 19 分钟的消息，然后发出哔哔声。如果有人可以为我解决这个问题，我愿意付费。

这是我的 amd.conf 设置：

```
[general]
initial_silence = 2250          ; Maximum silence duration before the greeting.
                                ; If exceeded then MACHINE.
greeting = 15000                ; Maximum length of a greeting. If exceeded then MACHINE.
after_greeting_silence = 2250   ; Silence after detecting a greeting.
                                ; If exceeded then HUMAN
total_analysis_time = 25000     ; Maximum time allowed for the algorithm to decide
                                ; on a HUMAN or MACHINE
min_word_length = 300           ; Minimum duration of Voice to considered as a word
between_words_silence = 250     ; Minimum duration of silence after a word to consider
                                ; the audio what follows as a new word
maximum_number_of_words = 8     ; Maximum number of words in the greeting.
                                ; If exceeded then MACHINE
silence_threshold = 500

here is my extensions.conf setting for this extension:
[AMDTEST]
exten=> s,1,Answer()
exten=> s,n,AMD()
exten=> s,n,NoOp(${AMDSTATUS})
exten=> s,n,GotoIf($[${AMDSTATUS}=HUMAN]?humn:mach)
exten=> s,n(mach),WaitForSilence(3000,1,20)
exten=> s,n,Playback(${VOICEFILE})
exten=> s,n,Hangup()
exten=> s,n(humn),WaitForSilence(500)
exten=> s,n,Playback(${VOICEFILE})
exten=> s,n,Hangup()

Output in Asterisk debug when I picked up the call and said 'Hi its me here'
Starting SIP/Vitelity-00000f92 at AMDTEST,1400,1 failed so falling back to exten 's'
    -- Executing [s@AMDTEST:1] Answer("SIP/Vitelity-00000f92", "") in new stack
    -- Executing [s@AMDTEST:2] AMD("SIP/Vitelity-00000f92", "") in new stack
    -- AMD: SIP/Vitelity-00000f92 7702002111 (N/A) (Fmt: slin)
    -- AMD: initialSilence [2250] greeting [15000] afterGreetingSilence [2250] totalAnalysisTime [25000] minimumWordLength [300] betweenWordsSilence [250] maximumNumberOfWords [8] silenceThreshold [256] maximumWordLength [5000] 
    -- AMD: Channel [SIP/Vitelity-00000f92]. Changed state to STATE_IN_SILENCE
    -- AMD: Channel [SIP/Vitelity-00000f92]. ANSWERING MACHINE: silenceDuration:2300 initialSilence:2250
    -- Executing [s@AMDTEST:3] NoOp("SIP/Vitelity-00000f92", "MACHINE") in new stack
    -- Executing [s@AMDTEST:4] GotoIf("SIP/Vitelity-00000f92", "0?humn:mach") in new stack
    -- Goto (AMDTEST,s,5)
    -- Executing [s@AMDTEST:5] WaitForSilence("SIP/Vitelity-00000f92", "3000,1,20") in new stack
    -- Waiting 1 time(s) for 3000 ms silence with 20 timeout
    -- Exiting with 3000ms silence >= 3000ms required
    -- Executing [s@AMDTEST:6] Playback("SIP/Vitelity-00000f92", "KC_TNA") in new stack
    -- <SIP/Vitelity-00000f92> Playing 'KC_TNA.gsm' (language 'en')
  == Spawn extension (AMDTEST, s, 6) exited non-zero on 'SIP/Vitelity-00000f92' 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T13:31:21.900

我知道它有点旧的帖子。根据我的经验，它与 initial_silence 值和 total_analysis_time 值有关。设置以下内容：

```
 initial_silence=5100
 total_analysis_time=5000 
```

这允许您的算法以正确的方式检测应答机。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-06T14:18:41.873

你说得对，问题是我对 Asterisk AMD 没有那么丰富的经验。但经过大量阅读和反复试验后，我得到了这个工作正常（至少 80%）。最关键的是在调用 AMD() 之前添加后台命令。关键因素：1\. 确保初始静音设置至少 3-4 秒（人的反应比机器快） 2\. 确保您有足够的时间打招呼（典型的人打招呼在 2-3 秒内完成） 3\. 微调等待根据经验检测机器后静音

这是扩展配置：

```
 [AMDTEST]
exten=> s,1,Answer()
exten=> s,2,Background(en_US/silence/1)
exten=> s,n,AMD()
exten=> s,n,NoOp(${AMDSTATUS})
exten=> s,n,GotoIf($[${AMDSTATUS}=HUMAN]?humn:mach)
exten=> s,n(mach),WaitForSilence(4500,2,16)
exten=> s,n,Playback(${VOICEFILE})
exten=> s,n,Hangup()
exten=> s,n(humn),Playback(${VOICEFILE})
exten=> s,n,Hangup()</code>

Amd.conf:
[general]
initial_silence = 4000      ; Maximum silence duration before the greeting.
                ; If exceeded then MACHINE.
greeting = 9000         ; Maximum length of a greeting. If exceeded then
 MACHINE.
after_greeting_silence = 2250   ; Silence after detecting a greeting.
                ; If exceeded then HUMAN
total_analysis_time = 15000 ; Maximum time allowed for the algorithm to deci
de
                ; on a HUMAN or MACHINE
min_word_length = 100       ; Minimum duration of Voice to considered as a w
ord
between_words_silence = 50  ; Minimum duration of silence after a word to co
nsider
                ; the audio what follows as a new word
maximum_number_of_words = 5 ; Maximum number of words in the greeting.
                ; If exceeded then MACHINE
silence_threshold = 256 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-30T18:50:17.560

您的检测原因由以下行描述：

```
ANSWERING MACHINE: silenceDuration:2300 initialSilence:2250 
```

所以你增加了初始静音参数或者可能只是阈值。如果没有通话记录，几乎不可能得到正确的答案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-04-03T07:49:36.877

I want to share the observation. If you use call files - **you need to have Background** after Answer in your "IN LEG", otherwise AMD will not work

```
[CALLFILES-IN]
exten=> s,1,Answer()
exten=> s,2,Background(en/silence/1)
exten=> s,n,AMD() 
```

# file - 制作 1 个包含大量数据的文件还是制作 4 个文件，每个文件包含 1 组数据更容易？

> ID：15714997
> 
> 赞同：0
> 
> 时间：2013-03-30T04:33:07.603
> 
> 标签：file, file-io, python-2.5

我正在制作一个程序，该程序将使用名为“name”的实例变量创建新对象。如果“name”没有传递到方法中，那么我的代码会从包含一组男性和女性姓名的文件中读取并选择一个。我的文件名为 names.txt，设置如下：

```
1\. John, Alex, Adam, Matt, Sean, Max, . . .
2\. John, Adam, Matt, Sean
3\. Sarah, Mary, Alexa, Amy, Katie, . . .
4\. Mary, Amy, Katie 
```

该文件的组织结构使得第 1 行和第 3 行是该性别的人的所有可能名称的列表，而第 2 行和第 4 行列出了该性别尚未使用的名称。可以看出，第 1-2 行是男孩的名字，而第 3-4 行是女孩的名字。我计划使用此文件的方式是从第 2 行或第 4 行中选择一个可用名称（“读取”操作），然后重写没有该名称的行（“写入”操作）

既然我已经解释了这一点，这是我的问题：使用 python 能够对文件执行操作的方式，我最好有多个文件，每个文件有 2 条上述行或只有 1 行，还是更好有 1 个大文件？我所做的研究表明，即使要删除/重写一个名称，我也必须读取文件中的每一行，在内存中复制一份，然后在取出一个名称后完全重新输入所有数据。虽然我不打算有很多行文本，但我确实看到自己可能在这 4 行中的每一行上都有数百个名字。必须为内存中的所有数据创建空间，以便我可以从文件中删除一个名称，这似乎效率很低。我想做的另一件事是将数据分成 2 个或 4 个文件。在2个文件的情况下，我将在文件 1 上有第 1-2 行，在文件 2 上有第 3-4 行，并且必须处理我在上一段中提到的相同问题，除了规模较小（我需要担心的数据更少存储到内存中）。在 4 个文件的情况下，存储数据几乎没有问题，但现在我不得不担心维护和跟踪 4 个文件。在这样做时，我觉得我会更好地管理我的资源，但我会失去某种程度的组织，我觉得在一个文件中创建了所有 4 行。d 不得不担心维护和跟踪 4 个文件。在这样做时，我觉得我会更好地管理我的资源，但我会失去某种程度的组织，我觉得在一个文件中创建了所有 4 行。d 不得不担心维护和跟踪 4 个文件。在这样做时，我觉得我会更好地管理我的资源，但我会失去某种程度的组织，我觉得在一个文件中创建了所有 4 行。

所以我再次问：是有 1 个大文件来执行读/写操作更好，还是有多个文件更好，每个文件包含总数据的一个或两个段来执行操作？

感谢您的回复！

-Max，一个有抱负的 Python 程序员

附言。这是我的第一篇文章，我不确定我提供的信息是否太多或不够，如果可以的话，请提供反馈！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T05:53:14.137

我不会太担心一个大文件的效率低下。

慷慨地假设平均名称长度为 10 个字符和 10.000 个名称，您仍然在 100Kb 远低于计算机中当前的内存水平。

实际上，您不必完全写出文件，一方面您可以在一次读取名称的同时写入新文件，然后在完成后删除原始文件并将新文件重命名为原始文件。这基本上就是旧计算机如何通过小内存和磁带操作（在排序时写入新磁带等）来做到这一点。

如果您只是想要更高的效率，而不需要使用数据库的开销，您可以考虑以下几点：

*   不要使用文本文件，而是将名称保存为字典，并以腌制形式保存为 python 列表。这应该加快读取和转储数据的速度。但是检查生成的文件并不容易。
*   如果您想坚持使用可读文本，请考虑不要`,`在名称之间添加，而是在每个名称之后使用`,`（逗号+空格），或者在每个名称之后`.`使用（点+空格），具体取决于名称是否被使用。如果您打开文件`"w+"`并在使用名称时将名称后的逗号重写为句点。这比重写文件效率更高，而且您的文件效率更高，因为您不会将未使用的名称加倍。