# StackOverflow 问答 13739000-13739999

# javascript - 内部使用javascript代码时无法解释的浏览器滚动条 设置为溢出-y：滚动；

> ID：13739003
> 
> 赞同：0
> 
> 时间：2012-12-06T07:40:46.583
> 
> 标签：javascript, html, css, scrollbar

我有一个网页，`<div>`由于`overflow-y:scroll;`某种原因，我的网页显示了一个垂直滚动条。当我向下滚动页面时它只是空白，但它似乎正在补偿 div 内容，因为当我滚动到 div 的底部时，网页滚动条消失了。

CSS：

```
#wrapper {width:1227px; height:400px; overflow-y:scroll;} 
```

HTML：

```
<div id="wrapper">
<table>
<tr>
<td>
<script>
    // Create the datePicker
    datePickerController.createDatePicker({ 
    // Associate the three text inputs to their date parts                         
    formElements:{\"" . $emp_query['Emp_ID'] . "\":\"%Y-%m-%d\"},
    // Disable the fade effect
    noFadeEffect:true,
    // Show week numbers
    showWeeks:false,
    // Set a statusbar format
    statusFormat:\"%l, %d%S %F %Y\",
    //Highlight Certain days
    highlightDays:[0,0,0,0,0,1,1],
    });
    </script>
</td>
</tr>
<!-- Repeat the above cells many more times -->
</table>
</div> 
```

我不知道它是否打算这样做，但我不想这样做，因为它只是在它下面留下一堆空白页，我能做些什么吗？

**编辑：**我发现问题是由我在表中的日期选择器 javascript 小部件引起的。代码已更新，这里是小部件的链接：[DatePicker](https://github.com/freqdec/datePicker)。我试图用所有这些来创建一个小提琴，但它一直冻结并且脚本停止运行。当这样的内部运行脚本时，这是否正常`<div>`？

**编辑：**澄清一下，我想要的是`<div>`查看区域限制为 400px 高，并摆脱它下方的额外空白空间。当我删除`Javascript`datepicker 小部件时，一切正常，但由于某种原因`Javascript`导致网页高度适应`<div>`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T03:03:20.257

好的，问题已经解决了……由日期选择器开发人员 Brian McAllister 解决。在 datepicker 的 CSS 中，为`:link`and设置了一个类`:visited`，这是一个片段：

```
.date-picker-control:link,.date-picker-control:visited {
display:-moz-inline-stack;
} 
```

当显示更改为：

```
.date-picker-control:link,.date-picker-control:visited {
display:-moz-inline-box;
} 
```

问题消失了。谢谢布赖恩！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T09:53:49.057

您是否尝试将溢出更改为“隐藏”？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T10:07:53.803

它具有垂直滚动条，因为您要求使用 y 滚动条。尝试总和

```
#wrapper {width:1227px; height:400px; overflow:auto;} 
```

css & html 足以处理溢出。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-06T10:10:20.877

设置`overflow-y`为`auto`仅在需要时显示滚动条：

```
#wrapper { /* ... */ overflow-y: auto; } 
```

# javascript - 创建一个包含滑动图像的 div

> ID：13739007
> 
> 赞同：-1
> 
> 时间：2012-12-06T07:40:53.343
> 
> 标签：javascript, jquery, html, css

我有一个 div，其中放置了多种语言的图像。div 的总大小超过了浏览器中的页面大小。所以我希望图像像动画滑块一样从下到上移动。图像大小不是我想要改变的。我只希望图像从下到上不断移动。在本网站[http://www.veepal.com/](http://www.veepal.com/)的末尾有一个 div，其中包含不断滑动的不同编程语言的图像。我想要类似的功能。是否可以？？

```
 <div id="languagesRow" style="position: absolute;top:5px;">
              <div id="l1"><img class="messagesOne"  src="images/languages/English.png"></div>
              <div id="l2"><img class="messagesOne"  src="images/languages/French.png"></div>
              <div id="l3"><img class="messagesOne"  src="images/languages/Russian.png"></div>
              <div id="l4"><img class="messagesOne"  src="images/languages/Chinese.png"></div>
              <div id="l5"><img class="messagesOne"  src="images/languages/Korean.png"></div>
              <div id="l6"><img class="messagesOne"  src="images/languages/Hindi.png"></div>

          </div> 
```

我不知道可以更优化地使用什么来实现这种动画，所以我在这篇文章中标记了 jquery、javascript 和 css。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T07:51:48.053

CSS Marquee 是一种选择：http: [//jsfiddle.net/FbKW9/](http://jsfiddle.net/FbKW9/)

```
<marquee  behavior="scroll" direction="up" >//item</marquee> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T07:57:54.967

好吧，您可以为此使用选框：

> **[http://jsfiddle.net/ZB2Fc/](http://jsfiddle.net/ZB2Fc/)**

```
<div class='flags'>
    <MARQUEE BEHAVIOR='SCROLL' HEIGHT='25' WIDTH='300' BGColor='yellow' scrollamount="1" onmouseover="this.stop();" onmouseout="this.start();">
        <div id="l1">English</div>
        <div id="l2">French </div>
        <div id="l3">Russian </div>
        <div id="l4">Chinese </div>
    </MARQUEE>
</div> 
```

# wcf - WCF - 错误：传出消息的消息版本 (Soap12 (http://www.w3.org/2003/05/soap-envelope)

> ID：13739014
> 
> 赞同：1
> 
> 时间：2012-12-06T07:41:26.650
> 
> 标签：wcf, .net-3.5

1) 我在本地 IIS 5.1 上部署了 WCF 服务：

界面：

```
[OperationContract(Action = Service.RequestAction, ReplyAction = Service.ReplyAction)]
Message SetData(Message requestXml); 
```

执行：

```
public const string ReplyAction = "http://localhost/AsurReceiveData/Message_ReplyAction";
public const string RequestAction = "http://localhost/AsurReceiveData/Message_RequestAction";

public Message SetData(Message requestXml)
{
    using (StreamWriter writer = File.CreateText(@"E:\Projekti\WCF\Parus\AsurReplicData\Parus\Body.xml"))
    {
        writer.WriteLine(requestXml.ToString());
    }
    Message response = Message.CreateMessage(MessageVersion.Default, ReplyAction, requestXml.ToString());

    return response;
} 
```

网络配置：

```
<system.serviceModel>
  <serviceHostingEnvironment>
    <baseAddressPrefixFilters>
      <add prefix="http://localhost:80/"/>
    </baseAddressPrefixFilters>
  </serviceHostingEnvironment>
  <behaviors>
    <serviceBehaviors>
      <behavior name="Parus.ServiceBehavior">
        <serviceMetadata httpGetEnabled="true" httpGetUrl="http://localhost/AsurReceiveData/Service.svc"/>
        <serviceDebug includeExceptionDetailInFaults="true"/>
        <MyInspector />
      </behavior>
    </serviceBehaviors>
  </behaviors>
  <services>
    <service behaviorConfiguration="Parus.ServiceBehavior" name="Parus.Service">
      <endpoint address="http://localhost/AsurReceiveData/Service.svc" binding="basicHttpBinding" contract="Parus.IService">
      </endpoint>
      <endpoint address="mex" binding="mexHttpsBinding" contract="IMetadataExchange"/>
    </service>
  </services>
  <extensions>
    <behaviorExtensions>
      <add name="MyInspector" type="Parus.MessageInspectorExtension, Parus, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null"/>
    </behaviorExtensions>
  </extensions>
</system.serviceModel> 
```

2）客户端如下所示：

```
ServiceClient client = new ServiceClient();
string RequestAction = "http://localhost/AsurReceiveData/Message_RequestAction";
Message request = Message.CreateMessage(MessageVersion.Default, RequestAction, "Test message");
Message reply = client.SetData(request); 
```

网络配置：

```
<binding name="BasicHttpBinding_IService" closeTimeout="00:01:00"
 openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00"
 allowCookies="false" bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard"
 maxBufferSize="65536" maxBufferPoolSize="524288" maxReceivedMessageSize="65536"
 messageEncoding="Text" textEncoding="utf-8" transferMode="Buffered"
 useDefaultWebProxy="true">
 <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384"
  maxBytesPerRead="4096" maxNameTableCharCount="16384" />
 <security mode="None">
  <transport clientCredentialType="None" proxyCredentialType="None"
   realm="" />
  <message clientCredentialType="UserName" algorithmSuite="Default" />
 </security>
</binding>
<endpoint address="http://localhost/AsurReceiveData/Service.svc"
  binding="basicHttpBinding" bindingConfiguration="BasicHttpBinding_IService"
  contract="ServiceReference.IService" name="BasicHttpBinding_IService" /> 
```

当我运行客户端时，出现以下错误消息：

> 传出消息的消息版本 (Soap12 (http://www.w3.org/2003/05/soap-envelope) Addressing10 (http://www.w3.org/2005/08/addressing)) 不匹配编码器（Soap11 (http://schemas.xmlsoap.org/soap/envelope/) AddressingNone (http://schemas.microsoft.com/ws/2005/05/addressing/none)）。确保绑定配置为与消息相同的版本。

我怎样才能让它工作？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-06T08:37:49.277

您的客户端和服务器之间的版本不匹配。确保您正在使用：

1.  相同的消息版本
2.  版本中相同的地址
3.  相同编码

# c# - 列表属性中的私有集问题

> ID：13739017
> 
> 赞同：1
> 
> 时间：2012-12-06T07:41:35.350
> 
> 标签：c#

我有这段代码：

```
public List<IVehicle> Vehicles { get; private set; } 
```

我的问题是即使我使用的是私有集，为什么我仍然可以向这个列表添加值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T07:43:09.533

使用 private `Set`，您无法将列表设置为班级之外的某个新列表。例如，如果您在班级中有此列表：

```
class SomeClass
{
public List<IVehicle> Vehicles { get; private set; }
} 
```

然后在使用时：

```
SomeClass obj = new SomeClass();
obj.Vehicles = new List<IVehicle>(); // that will not be allowed. 
                                     // since the property is read-only 
```

它不会阻止您评估`Add`列表中的方法。例如

```
obj.Vehicles.Add(new Vehicle()); // that is allowed 
```

要**返回只读列表**，您可以查看[List.AsReadOnly 方法](http://msdn.microsoft.com/en-us/library/e78dcd75.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T07:44:00.543

`.Add()`是类上的一个函数，`List<>`因此在`get`列表之后您可以调用该函数。您不能将列表替换为另一个列表。

您可以返回一个`IEnumerable<IVehicle>`使列表（排序）只读的。

调用`.AsReadOnly()`列表将导致一个真正的只读列表

```
private List<IVehicle> vehicles;

public IEnumerable<IVehicle> Vehicles 
{ 
    get { return vehicles.AsReadOnly(); }
    private set { vehicles = value; }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-06T07:48:04.833

因为`private set;`不允许您直接设置列表，但您仍然可以调用此列表的方法，因为它正在使用 getter。您可能想使用下一个：

```
 //use this internally
    private List<IVehicle> _vehicles;

    public ReadOnlyCollection<IVehicle> Vehicles
    {
        get { return _vehicles.AsReadOnly(); }
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-06T07:44:42.277

Getter 和 setter 在实例上工作；不在实例的属性上。一个例子;

```
Vehicles = new List<IVehicle>(); //// this is not possible 
```

但如果有一个实例，则可以更改其属性。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-06T07:48:51.553

当使用 use a 时`private set`，这意味着属性本身不能从类外部设置，而不是它的方法不可用，而`List<T>.Add()`只是编译器一无所知的方法。

举例：

```
public class VehicleContainer{
   public List<IVehicle> Vehicles { get; private set; }
   ...
}
....
VehicleContainer vc = new VehicleContainer();
vc.Vehicles  = new List<IVehicle>() // this is an error, because of the private set
int x = vc.Vehicles.Count; // this is legal, property access
vc.Vehicles.Add(new Vehicle()); //this is legal, method call 
```

看看[这个问题](https://stackoverflow.com/questions/443144/resticting-access-to-method-calls-on-read-only-properties)，在`ReadOnlyCollection`你想限制对集合本身的访问以及对集合的引用的情况下，解释了类的使用。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-12-06T07:43:06.497

您只能在`List<IVehicle>`. 但是一旦你有了一个实例，你甚至可以在外面添加项目，因为这个对象是公开可见的。

# shell - 我需要合并两个文件并创建一个新文件

> ID：13739020
> 
> 赞同：-1
> 
> 时间：2012-12-06T07:41:46.713
> 
> 标签：shell, awk

输入 1

**1 10611** 2 122 **C**：0.983607 **G**：0.0163934

输入 2

**1 10611** rs146752890 **C** **G** 100 PASS AC=184;RSQ=0.8228;AVGPOST=0.9640;AN=2184;ERATE=0.0031;VT=SNP;AA=.;THETA=0.0127;LDAF=0.0902;SNPSOURCE=LOWCOV;AF=0.08 ;ASN_AF=0.08;AMR_AF=0.14;AFR_AF=0.08;EUR_AF=0.07

这里第 1 列和第 2 列是匹配的，第一个文件的第 5 列和第 2 个文件的第 4 列的“：”之前的值是 equel，第二个文件的第一个和第 5 列的第 6 列（“：”之前的值）是 equel，输出是基于此匹配创建。将从输入和输出行得到清晰的想法，并且两个文件都是 .gz 文件

输出

1 10611 rs146752890 CG 100 通过 AC=184;RSQ=0.8228;AVGPOST=0.9640;AN=2184;ERATE=0.0031;VT=SNP;AA=.;THETA=0.0127;LDAF=0.0902;SNPSOURCE=LOWCOV;AF=0.08; ASN_AF=0.08;AMR_AF=0.14;AFR_AF=0.08;EUR_AF=0.07; **REF=0.983607;ALT=0.0163934;**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T12:13:52.013

这是一种使用方法`awk`：

```
awk 'FNR==NR { split($5,a,":"); split($6,b,":"); c[$1,$2,a[1],b[1]]="REF=" a[2] ";ALT=" b[2] ";"; next } ($1,$2,$4,$5) in c { print $0 ";" c[$1,$2,$4,$5] }' input1 input2 
```

结果：

```
1 10611 rs146752890 C G 100 PASS AC=184;RSQ=0.8228;AVGPOST=0.9640;AN=2184;ERATE=0.0031;VT=SNP;AA=.;THETA=0.0127;LDAF=0.0902;SNPSOURCE=LOWCOV;AF=0.08;ASN_AF=0.08;AMR_AF=0.14;AFR_AF=0.08;EUR_AF=0.07;REF=0.983607;ALT=0.0163934; 
```

因此，对于压缩文件，请尝试：

```
awk 'FNR==NR { split($5,a,":"); split($6,b,":"); c[$1,$2,a[1],b[1]]="REF=" a[2] ";ALT=" b[2] ";"; next } ($1,$2,$4,$5) in c { print $0 ";" c[$1,$2,$4,$5] }' <(gzip -dc input1.gz) <(gzip -dc input2.gz) | gzip > output.gz 
```

*编辑：*

从下面的评论中，试试这个：

```
awk 'FNR==NR { split($5,a,":"); split($6,b,":"); c[$1,$2,a[1],b[1]]="REF=" a[2] ";ALT=" b[2] ";"; next } ($1,$2,$4,$5) in c { print $1, $2, $3, $4, $5, $6, $7, c[$1,$2,$4,$5] $8 ";" }' file1 file2 
```

结果：

```
1 10611 rs146752890 C G 100 PASS REF=0.983607;ALT=0.0163934;AC=184;RSQ=0.8228;AVGPOST=0.9640;AN=2184;ERATE=0.0031;VT=SNP;AA=.;THETA=0.0127;LDAF=0.0902;SNPSOURCE=LOWCOV;AF=0.08;ASN_AF=0.08;AMR_AF=0.14;AFR_AF=0.08;EUR_AF=0.07; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T09:46:09.637

这应该可以工作（假设您有足够的磁盘空间来存储扩展的 .gz 文件）：

```
zcat 1 | awk '{print $1$2,$0}' | sort > new1
zcat 2 | awk '{print $1$2,$0}' | sort > new2
join new1 new2 -11 -21 -o "2.2 2.3 2.4 2.5 2.6 2.7 2.8 2.9 1.6 1.7"|sed 's/ C:/;REF=/'|sed 's/ G:/;ALT=/' > output 
```

# php - AJAX/PHP 简单代码无法工作

> ID：13739024
> 
> 赞同：0
> 
> 时间：2012-12-06T07:41:53.103
> 
> 标签：php, ajax

我正在按照教程了解 AJAX/PHP 的工作原理，但我遇到了问题。

让我从代码开始。

升级测试.php：

```
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
</head>
<body>
<form>
<input type="text" id="name" placeholder="Enter Name.." /> <br>
<input type="text" id="age" placeholder="Enter Name.." />
<input type="button" value="Submit" onClick="post();" />
</form>
<div id="result"></div>

<script type="text/javascript">
function post()
{

    var name= $('#name').val(); 
    var age= $('#age').val();

    $.post('escalation.php',{postname:name,postage:age},
    function(data)
    {
            $('#result').html(data);

    });
}

</script>

</body>
</html> 
```

升级.php：

```
<?php

echo "working";

?> 
```

我已经准确地输入了代码。从它的输出中，当我单击提交按钮时，我应该在结果 div 中“工作”，而这并没有发生。

我在这里做错了什么..？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T07:45:37.650

```
<script type="text/javascript" src="jquery.min.js"></script> 
```

下载一个 jQuery 版本，然后使用这个脚本标签链接到它。

虽然您可以链接到在线版本，但它并不适合最终的生产使用，您绝对应该获得本地副本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T07:46:02.720

将以下行添加到您的头部标签

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T07:49:14.960

这是一个非常简单的修复 - 你缺少 jQuery。添加以下内容：

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script> 
```

在你的头部元素中。

# php - 验证返回错误时通过ajax加载数据消失

> ID：13739025
> 
> 赞同：0
> 
> 时间：2012-12-06T07:41:57.460
> 
> 标签：php, yii

我有表单内容名字，姓氏......等等。并拖拽下拉列表国家和城市，当国家下拉列表被ajax更改时，我加载了城市，一切都很酷。我的问题：

1-点击提交时验证出错，城市值将替换为空值如何解决？

2- 如何使用 $form-> 我的意思是 city droppdownlist 。

*   如果验证没有错误，则表单工作
    ![工作](../Images/c3a9497757ce3f1db07a72d973f709c6.png)

*   单击提交后的表单并在验证中返回错误，例如用户名为空..等
    ![错误](../Images/bab5f1d67c7ad387e7c3b61ad30ff272.png)

看法：

```
 <div class="row">
        <?php echo $form->labelEx($model,'البلد'); ?>
    <?php

    /*
     echo chtml::activeDropDownList($model,'country',$model->getcountry(),array('prompt'=>'اختر بلدك ')   , 
    array(
'ajax' => array(
'type'=>'POST', //request type
'url'=>CController::createUrl('current/dynamiccities'), //url to call.
//Style: CController::createUrl('currentController/methodToCall')
'update'=>'#city', //selector to update
//'data'=>'js:javascript statement' 
//leave out the data key to pass all form values through
))

    ); 

    */
    echo CHtml::activedropDownList($model,'country',$model->getcountry(),

    array(
    'prompt'=>'اختر البلد أو المنطقة ',
'ajax' => array(
'type'=>'POST', //request type
'url'=>CController::createUrl('register/dynamiccities'), //url to call.
//Style: CController::createUrl('currentController/methodToCall')
'update'=>'#city', //selector to update
//'data'=>'js:javascript statement' 
//leave out the data key to pass all form values through
))
    );

   ///

    ////

    ?>

        <?php echo $form->error($model,'country'); ?>
    </div>
    <div class="row">
        <?php echo $form->labelEx($model,'المدينة'); ?>
        <?php 

echo CHtml::dropDownList('city','', array());

 ?>
        <?php echo $form->error($model,'city'); ?>
    </div> 
```

城市负荷控制器：

```
public function actionDynamiccities() /// Call Ajax
{
    $country=intval($_POST['Users']['country']);

    $data=Cities::model()->findAll('country_id=:country_id', 
                  array(':country_id'=>$country));
    $data=CHtml::listData($data,'id','city_name_e');
     echo CHtml::tag('option',
                array('value'=>''),CHtml::encode('Select Your City '),true);

    foreach($data as $value=>$name)
    {
        echo CHtml::tag('option',
                   array('value'=>$value),CHtml::encode($name),true);
    };
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T09:10:22.027

如果你看这条线

> echo CHtml::dropDownList('city','', array());

很明显，列表是空的，如果你以后想编辑内容，它也是空的。

我建议使用类似的东西

> echo CHtml::dropDownList('city', $model->city, empty($model->country) ? array() : CHtml::listData(Cities::model()->findAllByAttributes(array('country_id' = > $model->country)),'id','city_name_e'));

在这里我不知道您是否应该使用`$model->country`or `$model->country_id`，这取决于您的型号。

# r - POSIXct 平等工作奇怪

> ID：13739029
> 
> 赞同：3
> 
> 时间：2012-12-06T07:42:32.903
> 
> 标签：r, posixct

我正在将 CSV 读入变量“stuff”并将第一列强制转换为 POSIXct（该列只有时间戳，格式为“2012-12-04 17:49:52”，所以效果很好）。

```
stuff[,1]<-as.POSIXct(stuff[,1]) 
```

由于我有几天的数据，所以我试图按日期分解：

```
control <- subset(stuff,as.Date(stuff[,1]) == '2012-11-27')
control.1 <- subset(stuff,as.Date(stuff[,1]) == '2012-11-28') 
```

我发现这并没有像我预期的那样按日期拆分数据。tail(control) 显示最后一个值是 2012-11-27 15:54:21，而 head(control.1) 显示它的第一个值是 2012-11-27 16:04:35。

因此，由于某种原因，平等似乎在 16:00 左右旋转。我尝试在强制转换为 POSIXct 时指定时区，但这也无济于事。我可以按天对子集做些什么（这是否有失败的原因）？我想提一下，我需要将每小时信息保留在那里，因为我计划随后使用它来分割数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T08:23:54.360

也许`cut`可能对您有用，但如果没有复制您遇到的问题的数据样本，很难确定。

`cut`这是一个用于创建日常子集的最小示例。

```
set.seed(1) # So you can get the same numbers as I do
MyDates <- ISOdatetime(2012, 1, 1, 0, 0, 0, tz = "GMT") + sample(1:500000, 100)
class(MyDates)
# [1] "POSIXct" "POSIXt" 
split(MyDates, cut(MyDates, breaks="1 day"))
$`2012-01-01`
 [1] "2012-01-01 08:34:53 GMT" "2012-01-01 17:26:15 GMT" "2012-01-01 01:51:35 GMT"
 [4] "2012-01-01 14:59:28 GMT" "2012-01-01 03:14:25 GMT" "2012-01-01 09:48:56 GMT"
 [7] "2012-01-01 13:48:48 GMT" "2012-01-01 11:41:58 GMT" "2012-01-01 16:53:56 GMT"
[10] "2012-01-01 19:54:00 GMT" "2012-01-01 08:11:02 GMT"

$`2012-01-02`
 [1] "2012-01-02 12:52:35 GMT" "2012-01-02 04:00:41 GMT" "2012-01-02 04:36:26 GMT"
 [4] "2012-01-02 00:31:17 GMT" "2012-01-02 05:27:47 GMT" "2012-01-02 13:06:44 GMT"
 [7] "2012-01-02 23:16:05 GMT" "2012-01-02 01:51:43 GMT" "2012-01-02 09:59:46 GMT"
::::
::::
::::
[13] "2012-01-05 10:25:04 GMT" "2012-01-05 20:34:21 GMT" "2012-01-05 11:56:40 GMT"
[16] "2012-01-05 02:56:40 GMT" "2012-01-05 09:08:00 GMT" "2012-01-05 02:45:00 GMT"
[19] "2012-01-05 12:09:45 GMT" "2012-01-05 14:42:59 GMT" "2012-01-05 16:35:56 GMT"

$`2012-01-06`
 [1] "2012-01-06 06:08:22 GMT" "2012-01-06 04:46:31 GMT" "2012-01-06 11:12:12 GMT"
 [4] "2012-01-06 17:45:37 GMT" "2012-01-06 09:48:54 GMT" "2012-01-06 00:47:02 GMT"
 [7] "2012-01-06 06:46:24 GMT" "2012-01-06 01:33:21 GMT" "2012-01-06 03:53:53 GMT"
[10] "2012-01-06 00:01:45 GMT" "2012-01-06 13:23:54 GMT" "2012-01-06 01:40:54 GMT" 
```

# html - IE 6/7 - 标题消失？

> ID：13739030
> 
> 赞同：0
> 
> 时间：2012-12-06T07:42:40.117
> 
> 标签：html, css, internet-explorer, header, hidden

在 IE 6/7（我不知道/关心 6）中，我的标题由于某种原因没有出现。奇怪的是它确实占用了空间，只是由于某种原因不可见。我的第一个想法是它只是崩溃了，但事实并非如此，因为它占用了空间。我尝试使用 使其可见`visibility: visible;`，`display:block;`但`opacity:1;`没有区别。我也不期望它会起作用，因为我没有以任何方式隐藏该元素，但值得一试。现在我没有想法，我不知道是什么原因造成的。

我正在 Windows 8 上使用 IETester 进行测试。

网址：http: [//goo.gl/Q8J6v](http://goo.gl/Q8J6v)

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T07:48:32.317

IE 6/7 不知道“标题”html 元素。您应该使用 html5shiv (m) 来启用 html5 元素的样式

[http://code.google.com/p/html5shiv/](http://code.google.com/p/html5shiv/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T08:15:33.077

我有一个脚本，可以克隆背景图像 url（来自 css）并创建一个新`<img>`标签，将其拉伸到屏幕上（背景大小的后备）。因为它必须在内容的后面，所以它的显示相对于 z-index 为 0。问题是我忘记将页眉和页脚的 z-index 提高到 1，这就是它不可见的原因（背景是它上面）。

# sorting - 更改下拉列表中关键字的默认顺序

> ID：13739031
> 
> 赞同：13
> 
> 时间：2012-12-06T07:42:41.207
> 
> 标签：sorting, keyword, categories, tridion

我在 Tridion 中有一个类别“年”，它列出了 1900s-2012 的关键字值。我正在尝试通过下拉列表访问组件中的类别。问题是，我看到下拉列表中的值按升序排列 1900s-2012。用户必须一直向下滚动才能选择当前年份 - 2012 年。有没有一种方法可以重新排序类别中的关键字值，以便用户首先看到当前年份。我已经搜索了很多，但在网络或文档中没有找到答案。

是否可以在从组件中使用的类别或架构级别创建的任何下拉列表中指定排序？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-06T09:01:31.837

如果不创建扩展，就无法指定下拉列表的顺序（使用 jQuery 应该很容易）。

您可以做的是将字段的默认值设置为“2012”，这样用户就可以选择当前年份，如果他们需要更改为上一年，他们会向上滚动。

# c - mpcc 和矩阵

> ID：13739033
> 
> 赞同：0
> 
> 时间：2012-12-06T07:42:43.777
> 
> 标签：c, mpi

我有一个代码

```
distance = (double**)malloc(city_count*sizeof(double*));
for(i=0; i<city_count; i++) 
{
distance[i] = (double*)malloc(city_count*sizeof(double));
}

for(i=0; i<city_count; i++)
{
  for(j=0; j<city_count; j++) 
      {
         distance[i][j] = 1; // fscanf(fp, "%d", &tmp); distance[i][j] = tmp; EDITED

  }
} 
```

然后我在 Visual Studio 中调试它，它工作得很好。但在真正的集群上，它总是充满零。有谁能够帮助我？

分配给矩阵的问题，而不是读取文件的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T07:46:20.247

> 但在真正的集群上，它总是充满零。

```
for(i=0; i<city_count; i++)
{
    for(j=0; j<city_count; j++) 
    {
        fscanf(fp, "%d", &tmp); 
```

## 更新

使用您简化的问题陈述（谢谢），它几乎可以检查 malloc 返回的指针值以确保它们不是 NULL （除非 city_count 真的很大，否则这将是*非常令人惊讶的。）*

## 旧更新

嗬！我刚注意到。%d 读取一个与 &tmp 类型不匹配的 int。应该：

```
 fscanf(fp, "%lf", &tmp); 
```

`fscanf`不是类型安全的，所以这种类型的不匹配通常会导致问题。

### 事后编辑

并确保您没有犯同样的错误，将“%d”传递给`printf`. ;-)

## 结束更新

确保`city_count`不是`0`。

Check`fscanf`的返回值（和 tmp 的值）。你确定这个文件读取成功了吗？[来自 cplusplus.com 上的文档](http://www.cplusplus.com/reference/cstdio/fscanf/)

> 成功时，该函数返回参数列表中成功填充的项目数。由于匹配失败、读取错误或到达文件结尾，此计数可以与预期的项目数匹配或更少（甚至为零）。
> 
> 如果发生读取错误或读取时到达文件结尾，则设置正确的指示符（feof 或 ferror）。并且，如果在任何数据可以成功读取之前发生任何一种情况，则返回 EOF。

# gridview - 如何在gridview中跟踪是否在extjs中应用了过滤器？

> ID：13739034
> 
> 赞同：2
> 
> 时间：2012-12-06T07:42:48.727
> 
> 标签：gridview, extjs, extjs3

我的任务是在该列中应用过滤器时将图像放在 extjs 网格列标题上。清除过滤器后，从网格列标题中删除图像。

如何在 extjs 3 中实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T13:11:24.753

在 ExtJS 3.4 中，当过滤器在列`.ux-filtered-column`类上处于活动状态时，将添加到标题单元格中。最简单的方法是为此类添加自定义样式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T13:56:12.790

GridView 引用了它所使用的网格。因此，您可以使用`this.grid.store.isFiltered()`来检查商店是否被过滤。

您可能希望在绑定到`datachanged`网格存储事件的侦听器函数中执行此类检查：

```
initComponent: function() {
     ...
     this.grid.store.on('datachanged', this.yourDesiredFunction, this);
     ...
}

yourDesiredFunction: function(store) {
    if (store.isFiltered()) {
        // do your stuff
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T06:48:10.713

类 .ux-filtered-column 的自定义样式效果很好。但是**，如果 .ux-filtered-column**是**分组的标题单元格，则不会将其添加到标题单元格**中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-21T10:18:20.903

我遇到了同样的问题。 .ux-filtered-column 无效。但是我添加了背景图像，最终奏效了。

# php - 如何检查 php 文件是否成功包含？

> ID：13739043
> 
> 赞同：10
> 
> 时间：2012-12-06T07:43:37.507
> 
> 标签：php, include

我想检查“dbas.php”是否包含在“ad.php”中。我写了代码 -

***广告.php***

```
<?php if(file_exists("dbas.php") && include("dbas.php")){
// some code will be here
}
else{echo"Database loading failed";}
?> 
```

我成功测试了 file_exists() 部分，但不知道 include() 是否能正常工作，因为我在 localhost 中尝试过，如果文件在目录中，那么它永远不会包含在内。所以我不知道如果有很多流量，这段代码在服务器中的行为会如何。所以请告诉我我的代码是否正确？

-谢谢。

***已解决：***非常感谢您的回答。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-06T07:48:36.330

如果您想绝对确定该文件是否包含在内，则使用 php 的[`require`方法更合适。](http://php.net/manual/en/function.require.php)[`file_exists`](http://php.net/manual/en/function.file-exists.php)只检查文件是否存在，而不检查它是否真的可读。

`require`如果包含失败，将产生错误（您可以`catch`错误，请参阅 Cerbrus 的答案）。

编辑：

但是，如果您不希望脚本在包含失败时停止，请使用该方法`is_readable`以及`file_exists`，例如：

```
if( file_exists("dbas.php") && is_readable("dbas.php") && include("dbas.php")) {
    /* do stuff */
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-06T08:07:47.663

只需使用`require`：

```
try {
    require 'filename.php';
} catch (Exception $e) {
    exit('Require failed! Error: '.$e);
    // Or handle $e some other way instead of `exit`-ing, if you wish.
} 
```

尚未提及的内容：您*可以*添加一个布尔值，例如：

```
$dbasIncluded = true; 
```

在您的`dbas.php`文件中，然后检查代码中的该布尔值。虽然一般来说，如果一个文件没有正确包含，你会希望 php 刹车，而不是渲染页面的其余部分。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T07:46:10.290

`file_exists("dbas.php")`正在做检查。如果存在，则执行包含。

```
if(file_exists("dbas.php"){
    include("dbas.php")
    //continue with you code here
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-06T07:50:42.683

将您的功能放在一个函数中并使用[`function_exists`](http://php.net/manual/en/function.function-exists.php)它来检查它是否存在。

```
include ("php_file_with_fcn.php");
if (function_exists("myFunc")) {
    myFunc();
    // run code
} else {
    echo "failed to load";
} 
```

在您的情况下，插入文件将是

```
function db_connect() {
     $user = "user";
     $pass = "pass";
     $host = "host";
     $database = "database";
     mysql_connect($host, $user, $pass);
     return mysql_select_db($database);
} 
```

和主文件：

```
include("db_connect.php");
if (function_exists("db_connect")) {
    if (db_connect() === TRUE) {
        // continue
     } else {
        // failed to connect (this is a different error than the "can't include" one and 
        // actually **way** more important to handle gracefully under great load
     }
 } else {
     // couldn't load database code
 } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-06T07:57:00.513

使用此代码而不是您的代码，因为在您的代码中，如果服务器中不存在文件，则会出现 php 错误，这是不好的，因此请使用此代码：

```
if(file_exists("dbas.php")) {
    include_once("dbas.php");
} else {
    echo"file is not found";
} 
```

此代码表示如果文件存在于服务器上，则函数包含 else 文件未找到`echo`。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-12-06T07:45:25.783

写

```
echo "file is includ" 
```

在“dbas.php”的末尾

# visual-studio-2010 - 编码的 UI - 对象引用未设置为对象的实例

> ID：13739045
> 
> 赞同：0
> 
> 时间：2012-12-06T07:43:45.913
> 
> 标签：visual-studio-2010, coded-ui-tests

每当我尝试在编码的 UI 测试中记录一个动作时，该动作就会被记录下来，但是一旦我尝试生成代码，就会弹出一个错误，说“对象引用未设置为对象的实例”记录工作正常，直到昨天所以没有视觉工作室版本或服务包的问题。我正在使用 Visual Studio 2010 Ultimate。

# java - How does Spring 3+ autowire beans, which use each other?

> ID：13739056
> 
> 赞同：5
> 
> 时间：2012-12-06T07:44:29.303
> 
> 标签：java, spring, autowired

For example, I have

```
@Service
public class UserSerice {
  @Autowired
  private HouseService houseService;
} 
```

and

```
@Service
public class HouseService {
  @Autowired
  private UserSerice userService;
} 
```

How will Spring autowire this? And is this a good practice to configure beans this way?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T09:03:54.950

[Circular dependencies (spring-framework-reference):](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/beans.html)

> For example: Class A requires an instance of class B through constructor injection, and class B requires an instance of class A through constructor injection...throws a BeanCurrentlyInCreationException.
> 
> it is **not recommended.**.. One possible solution is to edit the source code of some classes to be configured by setters rather than constructors...

PLUS:

I debugged the circular dependencies in setter way. The **sequence** seems that:

-> Start to create bean *A*

-> Start to create bean *B*

-> Inject *A* to *B*, although *A* is not created fully from perspective of Spring lifecycle

-> Bean *B* creation finish

-> Inject bean *B* to *A*

-> Bean *A* created

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T08:30:21.463

Since it's not a constructor injection, spring can safely instantiate both objects and then satisfy their dependencies. Architecture-wise such case is so called 'code smell'. It's the sign that something is wrong in the composition. Maybe you need to move logic, maybe you need to introduce third class, it depends.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-06T07:48:19.400

Google for these terms

Flyweight pattern

Circular dependency in java

Just like 2 java objects can refer each other , it is perfectly valid to have such configuration.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-06-05T13:59:43.283

> Keep calm and use @Lazy

you can break the circular dependency using the @Lazy annotation()

```
@Service
public class UserSerice {
  @Autowired
  @Lazy
  private HouseService houseService;
} 
```

you can use the HouseService as it is (no change :) )

```
@Service
public class HouseService {
  @Autowired
  private UserSerice userService;
} 
```

further solutions : [https://www.baeldung.com/circular-dependencies-in-spring#2-use-lazy](https://www.baeldung.com/circular-dependencies-in-spring#2-use-lazy)

# c# - WPF - 以一种方式从滚动条效果中排除元素

> ID：13739062
> 
> 赞同：2
> 
> 时间：2012-12-06T07:45:10.567
> 
> 标签：c#, wpf, grid, scrollviewer

有没有办法`UIElement`从某种滚动效果中排除某些？我在列标题元素下方有一个网格元素。虽然我想在网格上完全滚动，但我希望标题只受水平滚动的影响。这样它在向下滚动时将始终保持在顶部。

这是我做的一个 mspaint 来解释，以防我的解释没有意义。

![在此处输入图像描述](../Images/26c6392928f830324630f7dcb3257b5b.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T07:49:21.210

为什么不将滚动查看器移动到绿色行内，然后为标题使用不同的滚动查看器。

然后将其全部包装在父容器中

所以喜欢

```
<Grid>   
   <HeaderControl>
     <ScrollViewer />
   </HeaderControl>
   <BodyControl>
     <ScrollViewer />
   </BodyContent>
</Grid> 
```

在一个滚动查看器中将它们包装在一起过于复杂。将其拆分为两个不同的滚动查看器将简化 IMO 问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T07:50:44.673

如果您使用 2 个单独的滚动查看器会怎么样 - 一个包含标题和网格的外部滚动查看器，并且只处理水平滚动。

然后网格本身可以包装在一个单独的滚动查看器中，该查看器仅处理网格的垂直滚动。例如：

```
<ScrollViewer VerticalScrollBarVisibility="Disabled">  
   <!-- Header -->
   <Grid>
   </Grid>
   <ScrollViewer HorizontalScrollBarVisibility="Hidden">
      <!-- Content -->
      <Grid>
      </Grid>
   <ScrollViewer />
</Grid> 
```

虽然我不是 100% 确定这两种可见性设置 - 你可能需要玩弄它们才能看到什么有效

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-04-23T08:53:36.640

我只是想做同样的事情。我的解决方案是使用 Canvas 作为标题，使用 Scrollviewer 作为正文。

```
<Canvas>
    <Grid Canvas.Left="{Binding ElementName=ValueScrollViewer, Path=HorizontalOffset, Converter={StaticResource DoubleMultiplyingConverter}, ConverterParameter=-1}">
       Header
    </Grid>
</Canvas>
<ScrollViewer Name="ValueScrollViewer" HorizontalScrollBarVisibility="Auto" VerticalScrollBarVisibility="Auto" >
    <Grid>
        Table
    </Grid>
</ScrollViewer> 
```

带转换器：

```
public class DoubleMultiplyingConverter : IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
    {
        var factor = System.Convert.ToDouble(parameter, CultureInfo.InvariantCulture);
        var val = System.Convert.ToDouble(value);
        return val * factor;
    }

    public object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture)
    {
        throw new NotImplementedException();
    }
} 
```

}

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-02-04T20:50:09.803

要处理所有情况，您应该将静态部分（标题）和可滚动部分（正文）分开，并用`ScrollViewer`. 这个解决方案在所有方面都是完美的，除了你的控件比屏幕（或外部控件）宽的情况，所以也应该允许水平滚动并且标题也应该滚动。你不能只使用内部滚动浏览器，因为垂直滚动条只有在水平滚动位于右边缘时才可见。

您不能仅从垂直滚动中排除标题，但您可以模拟水平滚动。你可以通过翻译转换来做到这一点。

```
<Grid>
  <!-- body part. place it first to make it go to the background -->
  <ScrollViewer HorizontalScrollBarVisibility="Visible" VerticalScrollBarVisibility="Visible" x:Name="scrollbar">
    <!-- the body control itself -->
    <Canvas x:Name="PART_Body"/>
  </ScrollViewer>

  <!-- header part. Border and margin are used to make it not overlap vertical scrollbar -->
  <Border Margin="0,0,18,18" ClipToBounds="True">
    <Canvas x:Name="PART_Header">
      <Canvas.RenderTransform>
        <!-- bind X to the scrollbar X position -->
        <TranslateTransform X="{Binding ElementName=scrollbar, Path=ContentHorizontalOffset, Converter={StaticResource InvertDoubleConverter}}"/>
        <!-- InvertDoubleConverter is just a value converter which multiples incmoing double value by -1 -->
        </Canvas.RenderTransform>
      </Canvas>
  </Border>
</Grid> 
```

# java - 如何使用 JSP 实现用户名可用性

> ID：13739068
> 
> 赞同：0
> 
> 时间：2012-12-06T07:45:27.987
> 
> 标签：java, mysql, jsp, servlets

在我的应用程序中，我有一个带有文本框、复选按钮和密码的用户名。在文本框中输入用户名后，如果我单击检查按钮，它应该在 MySQL 数据库中搜索用户名，如果可用，它应该显示该消息，如果不应该显示其他消息。

![在此处输入图像描述](../Images/3944747b3b65bd3f4b18e3e85bbc8304.png)

我如何用 JSP 做到这一点？我尝试了以下代码：

```
 <form  method="post" name="frm_addUser" action="./adduserserver.jsp"><br><br>
<table width="500px;" border="0" cellpadding="5" cellspacing="1" bgcolor="#f8f8ff" bordercolor="#333366" align="center">

<tr>
<td bordercolor="Gainsboro"><font size="4">User ID</font></td>
<td bordercolor="Gainsboro"><input name="userid" style="WIDTH: 200px"></td></tr>

<tr>
<td bordercolor="Gainsboro"><font size="4">&nbsp;</font></td>

<!--<td><input value="Check availability" onclick="" class="btn_checkavail" type="button"></td></tr>-->
</td>
<td>
<input type="submit" value="check" name="check" 
onclick="" /></td></tr>     
<tr>
<td bordercolor="Gainsboro"><font size="4">Pass Word </font></td>
<td bordercolor="Gainsboro"><input name="password" type="password" style="WIDTH: 200px"></td></tr>

<tr>
<td bordercolor="Gainsboro"><font size="4">Confirm Password </font></td>
<td bordercolor="Gainsboro"><input name="confirmpassword" type="password" style="WIDTH: 200px"></td></tr>
<tr>
<%
try{
String username=request.getParameter("username");

    Class.forName("com.mysql.jdbc.Driver");
    con = DriverManager.getConnection("jdbc:mysql://localhost:3306/test","root","sumith");
    st=con.createStatement();

    sqlQuery="select distinct username from usernameexist where username='"+username+"'";
    rs=st.executeQuery(sqlQuery);
int count=0;
while(rs.next())
{
count++;
}
if(count>0)
{
            out.println("<html>");
                        out.println("<head>");
            out.println("<title>MeterDetailsPage</title>");
            out.println("</head>");
            out.println("<body>");
                        out.println("<table align='center' color='red'>");
                        out.println("<tr color='red'>");
                        out.println("<td ><font size=4 color=red >username  Already Exist</font></td>");
                        out.println("</tr>");
                        out.println("</table>");
                        out.println("</body>");
                        out.println("</html>");
}

else
{

if(username!=null )

{

if(!username.equals(""))

{

            //st.executeUpdate("insert into usernameexist(username) values('"+username+"')");
            out.println("<html>");
                        out.println("<head>");
            out.println("<title>username</title>");
            out.println("</head>");
            out.println("<body>");
                        out.println("<table align='center'>");
                        out.println("<tr>");
                        out.println("<td ><font size=4  color=green><b>available </b></font></td>");
            out.println("</table>");
                        out.println("</body>");
                        out.println("</html>");
}
}
}
st.close();
con.close();
}
catch(Exception e){}
%>

</table>
</form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-06-14T05:08:32.407

试试这个它会工作，

```
<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" 
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Index Page</title>

<script src="http://code.jquery.com/jquery-1.10.2.js" type="text/javascript"></script>
<script src="js/app-ajax.js" type="text/javascript"></script>
</head>
<body>

        Enter Your Name: <input type="text" id="name" /><br>
        Enter our user name :<input type="text" id="userName"><br>
        Enter your Password :<input type="password" id="password"><br>
        <input type="button" value="Submit" onclick="ajaxCall();">        
    <br>

    <strong> Response</strong>:
    <div id="ajaxGetUserServletResponse"></div><br>

</body>
</html> 
```

阿贾克斯文件

```
function ajaxCall(){
    var name = jQuery("#name").val(); 
    var userName = jQuery("#userName").val();
    var password= jQuery("#password").val();
    alert(name);
    alert(userName);
    alert(password);

    jQuery.ajax({
        url : "GetUserServlet", 
        method: "GET", 
        type : "JSON", 
        data : "name="+name+"&userName="+userName+"&password="+password,// query parameters 1st 
        success : function(response){
            $('#ajaxGetUserServletResponse').text(response);

        }
    });

} 
```

小服务程序

```
import java.io.IOException;

import java.util.ArrayList;

import javax.management.relation.RelationSupportMBean;
import javax.servlet.ServletException;
import javax.servlet.annotation.WebServlet;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

public class GetUserServlet extends HttpServlet {
    private static final long serialVersionUID = 1L;

    protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {

        userBean ub = new userBean();
        String name = request.getParameter("name").trim();
        String userName = request.getParameter("userName").trim();
        String password = request.getParameter("password").trim();

        System.out.println("name catched "+name);
        System.out.println("username catched"+userName);
        System.out.println("Password catched"+password);

        ArrayList<userBean> list = new ArrayList<userBean>();
         ub=new userBean();
         ub.setName(name);
         ub.setUserName(userName);
         ub.setPassword(password);
         list.add(ub);  

         response.setContentType("text/plain");
         response.getWriter().print(list);             
    }

} 
```

Pojo类

```
public class userBean 
{
    private String name;
    private String userName;
    private String password;
    public String getName() {
        return name;
    }
    public void setName(String name) {
        this.name = name;
    }
    public String getUserName() {
        return userName;
    }
    public void setUserName(String userName) {
        this.userName = userName;
    }
    public String getPassword() {
        return password;
    }
    public void setPassword(String password) {
        this.password = password;
    }

} 
```

我的场景有点不同，您可以更改 index.jsp 中的代码并在“检查可用性”按钮上添加调用并从 servlet 获取响应。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T08:48:52.077

你应该在下面做：

1.  确保您的 jsp 将所有字段（包括选中字段）传递给 servlet。你可以做具有所有属性的表单帖子。

2.  您的 servlet 应该读取所​​有参数，如果选中了复选框，那么您将适当的逻辑放入 servlet（例如查询您的 MySQL 数据库）

3.  从您的 servlet 返回正确的响应，以便 jsp 可以显示适当的消息。您可以将消息保存在您的 jsp/js 中，并根据标志向用户显示适当的消息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-28T03:58:30.177

在查询中检查您的表名

```
select distinct username from usernameexist where username='"+username+"'"; 
```

确保您的表是用户名存在

和

```
String username=request.getParameter("username"); 
```

这里的参数是用户 ID 不是用户名

所以用

```
String username=request.getParameter("userid"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-20T15:07:41.850

你可以使用如下..在源代码中附加jquery文件

```
 <script src="jquery-1.9.1.js"> 
```

通知

```
 <input type="text" name="userName" id="userName" onBlur="checkId(this.value)">
 <span id="status"></span>

 <script type="text/javascript">
        function checkId(member_id)
        {
            $.ajax({
                type: "POST",
                url: "processAjax.jsp", /* The request will be processed in this file.. */
                beforeSend: function() {
                    $("#divIdStatus").html("geting name...");
                },
                data: "member_id=" + member_id ,
                success: function(msg) {
                    $("#divIdStatus").html(msg);
                }
            });
        } 
```

在 processAjax.js

```
 String member_id = (request.getParameter("member_id")).trim();
        if (member_id.equals("")) {
            out.print("! This is Required");
        } else {

            ResultSet result = // check in database if any record with this user name;

            if (result.next()) {
                out.print("! Not Available");
            } else {
                out.print("OK..");
            }
        } 
```

# asp.net-mvc - 使用 SQLLite 作为离线存储的 ASP.NET MVC 应用程序

> ID：13739071
> 
> 赞同：2
> 
> 时间：2012-12-06T07:45:35.297
> 
> 标签：asp.net-mvc, offline, isolatedstorage, offline-caching

我正在使用 asp.net MVC 开发一个 Web 应用程序。我需要能够根据用户的需求通过 HTML5 使整个应用程序脱机。

虽然我可以创建清单并使 CSS/JS/图像文件等文件脱机。我不确定如何使数据库连接脱机（我想像 SQLLite 之类的？）

我需要 IE 8+、Safari (IOS) 和 chrome (android) 支持此功能。

我不能只使用本地存储，因为在离线浏览应用程序时需要提供很多查找值。这意味着大量数据需要经过用户的批准才能离线存储。

有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T19:51:09.400

对于 IE8+、Safari 和 Chrome 支持，您应该使用 SequelSphere： [www.SequelSphere.com](http://www.sequelsphere.com)

SequelSphere 是唯一具有真正广泛的浏览器和平台支持的关系数据库产品。它还通过使用应用程序缓存清单“离线”工作，并将其数据存储在 IndexedDB 或 LocalStorage 中（根据可用性按顺序）。

至于 WebSQL (SQLLite)，IE 和 Firefox 不支持：[WebSQL Usage by Browser](http://caniuse.com/sql-storage)

关于 SequelSphere，创建表再简单不过了：

```
db.catalog.createTable({
    tableName: "EMPL",
    columns: [ "EMPL_ID", "NAME", "AGE", "DEPT_ID" ],
    primaryKey: [ "EMPL_ID" ],
    data: [
        [0,"Bob",32,0],
        [1,"John",37,2],
        [2,"Fred",28,1]
    ]
}); 
```

查询数据很简单：

```
var res = db.query("SELECT name, age, dept_id FROM empl WHERE Dept_ID = 2"); 
```

插入/更新/删除数据很容易：

```
db.insertRow("empl", [3, "Sue", 26, 2]);
db.updateRow("empl", [3, "Suzy", 26, 2]);
db.deleteRow("empl", [3, "Suzy", 26, 2]); 
```

需要注意的一件事：由于这将在离线应用程序中使用，请确保将整个目录或每个表的“持久性范围”设置为“SCOPE_LOCAL”：

```
db.catalog.setPersistenceScope(db.SCOPE_LOCAL);
//  -or-
db.catalog.getTable("empl").setPersistenceScope(db.SCOPE_LOCAL); 
```

*   基础文档： [SequelSphere Basics](http://www.sequelsphere.com/how-it-works/code-sample/)
*   关于“本地存储”支持的文档： [本地数据存储和持久性](http://www.sequelsphere.com/dbdocs/local-data-storage/)
*   这是 API： [SequelSphere API](http://www.sequelsphere.com/dbdocs/api-documentation/)

如果您有任何问题，只需通过电子邮件发送 SequelSphere 支持。

为了完全透明，我是 SequelSphere 的一部分，它似乎很好地回答了你的问题...... ;)

# objective-c - 如何在多个视图之间共享一些布局信息？

> ID：13739074
> 
> 赞同：0
> 
> 时间：2012-12-06T07:45:58.873
> 
> 标签：objective-c, cocoa-touch

我有这段代码，`BGBaseSnippetCode.h`：

```
static NSMutableDictionary * defaultHeightDictionary= nil;
static NSMutableDictionary * defaultBoundsDictionary =nil;

+(void)initialize
{
    BGBaseTableViewCell * typical = [[self alloc]init];

    if (defaultHeightDictionary==nil) {
        defaultHeightDictionary = [NSMutableDictionary dictionary];
        defaultBoundsDictionary = [NSMutableDictionary dictionary];
    }
    [defaultHeightDictionary setValue:@(typical.bounds.size.height) forKey:NSStringFromClass([self class])];
    CGRect bounds = typical.bounds;

    NSValue * boundsValue = [NSValue valueWithCGRect:bounds];
    [defaultHeightDictionary setValue:boundsValue forKey:NSStringFromClass([self class])];

}

+(CGFloat) defaultHeight
{
    NSNumber * result = [defaultHeightDictionary valueForKey:NSStringFromClass([self class])];
    return result.floatValue;
}

+(CGRect) defaultBounds
{
    NSValue * result = [defaultBoundsDictionary valueForKey:NSStringFromClass([self class])];
    return [result CGRectValue];
} 
```

我想在`BGBaseOfAllUIControl.m`和中都插入这个`BGBaseTableViewCell.m`。所以我只是尴尬地这样做了：

```
@interface BGBaseOfAllUIControl ()
@property (strong, nonatomic) IBOutlet UIView *view;
@end
@implementation BGBaseOfAllUIControl

#import "BGBaseSnippetCode.h"

-(id)initWithCoder:(NSCoder *)aDecoder
{
    self = [super initWithCoder:aDecoder];
    if (self) {
        [self BaseInitialize];
    }

@interface BGBaseTableViewCell ()
@property (strong, nonatomic) IBOutlet UITableViewCell *view;

@end
@implementation BGBaseTableViewCell

//static BOOL isDefaultHeightSet = NO;

#import "BGBaseSnippetCode.h"

-(id)initWithCoder:(NSCoder *)aDecoder
{
    self = [super initWithCoder:aDecoder];
    if (self) {
        [self BaseInitialize];
    }
    return self; 
```

基本上两者都`BGBaseOfAllUIControl`共享`BGBaseTableViewCell`相同的协议，我希望完全相同的代码为双方实现协议。`BGBaseTableViewCell`是 的子类并且`UITableViewCell`是`BGBaseOfAllUIControl`的子类`UIControl`。

所以我使用 .h 文件来包含一些实现。代码工作正常。只是尴尬。有什么更好的方法来做到这一点，或者我这样做对吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T08:05:35.007

我会忘记所有标题导入和静态字典技巧，并引入一个单独的类来处理您需要的布局信息。就像是：

```
@interface BGTableLayoutInfo
- (float) defaultHeightForClass: (Class) tableViewType;
- (CGRect) defaultBoundsForClass: (Class) tableViewType;
@end 
```

在实现中，您将拥有一个常规（非静态）字典，用于缓存不同类的布局信息。剩下的唯一问题是表格视图对象将如何获取布局类的实例。一种可能性是使布局信息方法静态（使用静态缓存字典），第二种是通过`+defaultLayoutInfo`方法保持共享实例可访问。

# android - 如何在适用于 Android 的 Google Map V2 中获取纬度/经度跨度

> ID：13739075
> 
> 赞同：14
> 
> 时间：2012-12-06T07:45:59.213
> 
> 标签：android, google-maps, google-maps-android-api-2

我的任务是将我的应用程序移至 Google Maps Android APIs V2。现在，我需要获取纬度/经度跨度。我在以前版本的 API 中使用过`MapView.getLatitudeSpan()`和。`MapView.getLongitudeSpan()`现在我在 V2 中找不到这样的东西。

有人有同样的问题吗？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-12-09T14:25:21.197

您可以使用以下代码获取 lat/lng 跨度：

```
VisibleRegion vr = mMap.getProjection().getVisibleRegion();
double left = vr.latLngBounds.southwest.longitude;
double top = vr.latLngBounds.northeast.latitude;
double right = vr.latLngBounds.northeast.longitude;
double bottom = vr.latLngBounds.southwest.latitude; 
```

我希望这有帮助。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-06T09:08:14.357

首先使用[`GoogleMap.getProjection()`](https://developer.android.com/reference/com/google/android/gms/maps/GoogleMap.html#getProjection%28%29). 然后您可以调用[`Projection.getVisibleRegion()`](https://developer.android.com/reference/com/google/android/gms/maps/Projection.html#getVisibleRegion%28%29)以获取具有 LatLngBounds 的 VisibleRegion。

LatitudeSpan 和 Longitude 跨度不再有意义的原因是地图现在可以旋转和倾斜，因此视口不再是地图上经纬度对齐的矩形。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-05-13T14:32:35.930

~~这种方式对我有用：~~

 ~~```
CameraPosition camPos2 = mapa.getCameraPosition();
LatLng pos = camPos2.target;
Toast.makeText(MainActivity.this,"Lat: " + pos.latitude + " - Lng: " +pos.longitude,  Toast.LENGTH_LONG).show(); 
```~~  ~~* * *

哎呀，我误解了这个问题，我的意思是我没有看到“跨度”这个词。根据[API](https://developers.google.com/maps/documentation/android/reference/com/google/android/gms/maps/model/LatLngBounds)，正确的是：

首先得到边界：

```
LatLngBounds bounds = gMap.getProjection().getVisibleRegion().latLngBounds; 
```

然后询问是否有任何点在界限内：

```
LatLng point = new LatLng (latitude, longitude);
if(bounds.contains(point)){
    //do something
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-25T10:01:22.777

这是答案

```
LatLngBounds bounds = googleMap.getProjection().getVisibleRegion().latLngBounds;
if (bounds.contains(ROMA)) {
   marker = googleMap.addMarker(
     new MarkerOptions()
      .position(ROMA)
      .title("Hello")
      .snippet("Nice Place")
      .icon(BitmapDescriptorFactory.fromResource(R.drawable.ic_launcher))
     );     
   System.out.println("Marker added");
} 
```

仅在标记位于可见区域时添加标记~~

# android - Android：setOnItemClickListener 不适用于软键盘中的 ListView

> ID：13739079
> 
> 赞同：2
> 
> 时间：2012-12-06T07:46:07.830
> 
> 标签：android, android-listview, android-softkeyboard

我正在为 Android 开发一个自定义软键盘。我在普通键盘的顶部添加了一个列表。该列表只是一个普通的 ListView。我需要做的是检测并响应主程序内的点击事件，即**SoftKeyboard.java**。ListView 在 onCreateCandidatesView() 方法中初始化。这是我的代码。

**建议列表.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<ListView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@android:id/list"
    android:layout_width="match_parent"
    android:layout_height="100dp"
    android:background="@color/candidate_background"
    android:divider="#BBCFCFCF"
    android:dividerHeight="1dp"
    android:drawSelectorOnTop="false" /> 
```

**软键盘.java**

```
public class SoftKeyboard extends InputMethodService 
        implements KeyboardView.OnKeyboardActionListener {

    //dummy data for the list
    private static final String[] items = {"1","2","3"};
    //some other variables

    @Override 
    public View onCreateCandidatesView() {     
        LayoutInflater mInflater = (LayoutInflater)getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        ListView ls = (ListView)mInflater.inflate(R.layout.suggestion_list,null);

        ls.setAdapter(new ArrayAdapter<String>(this,android.R.layout.simple_list_item_1,items));

        ls.setOnItemClickListener(new AdapterView.OnItemClickListener() {
            @Override
            public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
                Log.v("index", "Clicked");
            }
        });

        return ls;
    }

    //some other methods
} 
```

但是 ListView 似乎根本没有响应 setOnItemClickListener() 。有人可以帮我解决这个问题吗？非常感谢！

* * *

**更新：**

我发现即使我使用普通的ListView，它仍然无法正常工作。我更新了上面的代码以使用普通的 ListView。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T07:48:02.553

尝试添加

`android:descendantFocussability=blocksDescendants`到最顶部的线性布局。它可能会起作用。

# javascript - 在javascript中隐藏/显示条件

> ID：13739085
> 
> 赞同：0
> 
> 时间：2012-12-06T07:46:27.313
> 
> 标签：javascript, jquery

我想在 JavaScript 中隐藏和显示特定条件下的按钮。

代码：

```
$(function(){
    // hide the div initially
    $("#a").hide();

    // Check to see if there is 250 in the url
    var bal_amount = document.getElementById('balance_amount');
    if (bal_amount.value > 0) {
        $("#a").show();
    }
}); 
```

HTML

```
<form>
<input type="text" id="balance_amount">
</form>

<image src="image.jpg" id="a"> 
```

但它不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T08:00:28.457

您将需要更改这部分代码 -

```
// Check to see if there is 250 in the url
var bal_amount = document.getElementById('balance_amount');
if (bal_amount.value > 0)
{
    $("#a").show();
} 
```

您正在事件内部执行上述代码`document ready`，这意味着它将在页面加载时立即执行，并且仅执行一次。

为了解决这个问题，您需要将此代码放在事件处理程序中 -

```
​$(document).ready(function () {
    $("#a").hide();

    // See this? This is the event handler for the
    // change event which will fire whenever the value
    // of the text box changes.
    $('#balance_amount').change(function () {
        // Check to see if there is 250 in the url
        if ($(this).val() > 0) {
            $("#a").show();
        }
    });
});​ 
```

这样，每当该`balance_amount`字段的值发生变化时，此事件都会触发并验证您的余额金额。

[在这里](http://jsfiddle.net/f5Ppa/)，您将找到一个工作演示。

您可以通过检查文本框中的无效输入来进一步改进您的代码 -

```
​$(document).ready(function () {
    $("#a").hide();

    // See this? This is the event handler for the
    // change event which will fire whenever the value
    // of the text box changes.
    $('#balance_amount').change(function () {

        var balance = parseInt($(this).val(), 10);
        if (isNaN(balance)) {
            alert('You have entered an invalid value');
            return false;
        }

        if (balance > 0){
            $("#a").show();
        }

        // There you go, an else block for you
        else {
            $("#a").hide();
        }
    });
});​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T07:59:48.863

试试这个：

```
$(document).ready(function(){
        $("#a").hide();
   $('#balance_amount').keyup(function () {
        // Check to see if there is 250 in the url
        var bal_amount = $('#balance_amount').val();
        if (bal_amount.value > 0) {
            $("#a").show();
        }
    }
}); 
```

# c# - 如何在 c# 中实现此代码以发布 Xml

> ID：13739088
> 
> 赞同：-2
> 
> 时间：2012-12-06T07:46:35.190
> 
> 标签：c#, post

```
$ch = curl_init();    
curl_setopt($ch, CURLOPT_URL, "https://abc.com/");
curl_setopt($ch, CURLOPT_POST, 1); 
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1); 
curl_setopt($ch, CURLOPT_POSTFIELDS, $theXML);
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, FALSE); 
$response = curl_exec ($ch);     
curl_close ($ch); 
```

我如何在 c# 中实现这一点来发布 xml 请求？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T08:02:57.747

您必须创建对象，uri 是您的 url，然后发布它。xmldata 是你的 xml 文件

```
HttpWebRequest req = (HttpWebRequest)WebRequest.Create(uri);
        byte[] postDataBytes = Encoding.ASCII.GetBytes(xmldata);
        req.Method = "POST";
        req.ContentLength = postDataBytes.Length;
        Stream requestStream = req.GetRequestStream();
        requestStream.Write(postDataBytes, 0, postDataBytes.Length);
        requestStream.Close(); 
```

# php - PHP路由：正则表达式没有表现

> ID：13739090
> 
> 赞同：0
> 
> 时间：2012-12-06T07:46:36.920
> 
> 标签：php, regex, url-routing

所以我用PHP做了一个路由系统......

所以我创建了一个名为 /post/:id 的路由，但是每当我 print_r my $matches 时，我都会得到：

数组 ( [0] => /post/10 [d] => 10 [1] => 10 ) 1

数组中的'd'显然应该是'id'，有人知道如何解决这个问题吗？

谢谢

```
 <?php
    public function setPattern($pattern)
    {
            $this->_pattern = $pattern;
            $this->_regex = preg_replace('#:([a-z])+$#', "(?P<$1>[^/]+)", $pattern);
    }

    public function match($uri)
    {

            if (!preg_match("#" . $this->_regex . "$#", $uri, $matches))
            {
                    return false;
            }
            else
            {
                      return $matches;
            }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T07:59:03.193

您只能在`preg_replace`通话中捕获一个角色。试试这个并将**+**号放在捕获中以获取多个字符：

```
$this->_regex = preg_replace('#:([a-z]+)$#', "(?P<$1>[^/]+)", $pattern); 
```

# html - 显示已经加载 Angular JS 的数据

> ID：13739091
> 
> 赞同：0
> 
> 时间：2012-12-06T07:46:41.900
> 
> 标签：html, angularjs

我有一个使用 Angular Js 的 chtml 页面，其中包含来自数据库的对象列表，但加载数据需要很长时间。如何仅加载 10 个对象并显示它们，然后继续加载数据并在 Angular Js 中显示其余数据？？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T20:01:50.793

听起来您有很多数据要慢慢加载到前端，因此您不必等待。我能想到的唯一定期添加数据的方法是 setInterval。

关键是创建一个新变量

```
$scope.displayObjects = [] 
```

你可以像这样不断地追加

```
for(var x = currentIndex; x < currentIndex + step && x < $scope.objects.length; x++){
    $scope.displayObjects.push($scope.objects[x]);                        
} 
```

然后只需设置一个间隔来连续调用它。您还需要使用

```
$scope.$apply() 
```

告诉 Angular 重新应用自己（http://docs.angularjs.org/api/ng.$ro​​otScope.Scope#$apply）。

[http://jsfiddle.net/A9uND/20/](http://jsfiddle.net/A9uND/20/)您可以通过 step 变量调整每一步的加载量。

下次包括一个 jsfiddle（或类似的东西），这样更容易为您提供帮助。

虽然上述方法可行，但我建议跟踪您可以看到多少，然后只加载相关的。当您滚动时，沿途添加更多内容。

# java - Android aChartEngine条形图不起作用

> ID：13739093
> 
> 赞同：1
> 
> 时间：2012-12-06T07:46:52.240
> 
> 标签：java, android

```
 protected void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);
        setContentView(R.layout.nextstatschart);

        myDataset = new XYMultipleSeriesDataset ();

        statsRenderer = new DefaultRenderer();

        myRenderer.setLabelsColor(Color.BLUE);
        myRenderer.setLabelsTextSize(12);
        myRenderer.setAxesColor(Color.BLACK);
        myRenderer.setBackgroundColor(Color.WHITE);
        myRenderer.setAntialiasing(true);
        myRenderer.setShowLabels(true);
        myRenderer.setShowGrid(true);
        myRenderer.setChartTitle("Next Three Months Statistical Analysis");
        myRenderer.setChartTitleTextSize(16);
        myRenderer.setZoomEnabled(true);

         myRenderer.setChartTitle(heading);
         myRenderer.setLabelsColor(Color.BLACK);
         myRenderer.setXAxisMin(0);
         myRenderer.setXAxisMax(100);
         myRenderer.setYAxisMin(0);
         myRenderer.setYAxisMax(100);
         myRenderer.setYLabelsAlign(Align.RIGHT);
         myRenderer.setXTitle ("Case Type");
         myRenderer.setYTitle ("Count");
         myRenderer.setMargins(new int[] { 30, 40, 10, 40 });

        Bundle b = getIntent().getExtras();
        typ = b.getStringArray("typ");
        nums = b.getStringArray("counts");
        percentages = b.getDoubleArray("percs");
        stat_count = b.getInt("stat_count");
        X_Axis = b.getDoubleArray("typp");
        Y_Axis = b.getDoubleArray("contt");

        }

    @Override
    protected void onResume() {

        super.onResume();

        try {

        refreshChart();

        if (statsChartView == null) {
            LinearLayout layout = (LinearLayout) findViewById(R.id.statschart);
//          statsChartView = ChartFactory.getPieChartView(getApplicationContext(), statsSeries, statsRenderer);
//          statsChartView = ChartFactory.getLineChartView(getApplicationContext(), xyDataset, xyRender);
//          statsChartView = ChartFactory.getBarChartView(context, dataset, renderer, type)

            statsChartView = ChartFactory.getBarChartView(getApplicationContext(), myDataset, myRenderer,Type.DEFAULT);
            layout.addView(statsChartView, new LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT));
            layout.addView(statsChartView);
            statsChartView.refreshDrawableState();

            statsChartView.setBackgroundColor(Color.WHITE);

        } else {
            statsChartView.repaint();
        }
    //  refreshChart();
    }catch(Exception e){
        e.printStackTrace();
    }
}

    void refreshChart() {

        try {

             mySeries = new XYSeries (series);

                int[] colorpool = new int[] { 0xff000099, 0xff009900, 0xffff0000,
                        0xffffff00, 0xff990099, 0xffff9900, 0xff996600, 0xffcccccc,
                        0xff990000, 0xff66cccc, 0xff99ccff, 0xffccffcc };
                int[] colors = new int[stat_count];

             DecimalFormat Currency = new DecimalFormat("#0.00");

                for (int i = 0; i < stat_count; i++) {

                    mySeries.add(Double.parseDouble(typ[i]),Double.parseDouble(nums[i]));

                    if (i > 11) {
                        colors[i] = 0xff333333;
                    } else {
                        colors[i] = colorpool[i];
                    }

                }
                myDataset.addSeries (mySeries);

                for (int color : colors) {
                    SimpleSeriesRenderer r = new SimpleSeriesRenderer();
                    r.setColor(color);
//                  statsRenderer.addSeriesRenderer(r);
                    xyRender.addSeriesRenderer(r);

                }

                mySeriesRenderer = new XYSeriesRenderer ();

                if (series.equals("Weight")) {
                    mySeriesRenderer.setColor (0xff009900);
                    mySeriesRenderer.setPointStyle(PointStyle.POINT);
                } else {
                    mySeriesRenderer.setColor (0xff990099);
                }

                myRenderer.addSeriesRenderer (mySeriesRenderer);
                int length = myRenderer.getSeriesRendererCount();
                for (int i = 0; i < length; i++) {
                    ((XYSeriesRenderer) myRenderer.getSeriesRendererAt(i)).setFillPoints(true);
                } 

                //  Draw the chart
                statsChartView.repaint ();
            } catch (Exception e) {
                e.printStackTrace();
                //Exception Code
            }

    }           
} 
```

* * *

```
E/AndroidRuntime(910): FATAL EXCEPTION: main
E/AndroidRuntime(910): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.courts.action/com.courts.action.NextStatsChart}: java.lang.NullPointerException 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T08:03:49.597

可能正因为如此，

```
<activity android:name="com.courts.action.NextStatsChart" android:label="@string/app_name" /> 
```

# mysql - 如何在mysql中按字段和自动ID获取分组

> ID：13739094
> 
> 赞同：1
> 
> 时间：2012-12-06T07:46:58.093
> 
> 标签：mysql

我有一个表，其中有 2 个字段：`Logid`和`Type`：

```
 +---------+---------+
 |  Logid  |  Type   |
 +---------+---------+
 |    1    |  PHP    |
 |    2    |  Mysql  |
 |    3    |  PHP    |
 |    4    |  JAVA   | 
 |    5    |  PHP    | 
 |    6    |  MYSQL  |
 +---------+---------+ 
```

我需要`Logid` 按`logs_operationtype`组获取所有内容，
我需要将输出获取为：

```
 +------------+---------+
 |  Logid     |  Type   |
 +------------+---------+
 |    1,3,5   |  PHP    |
 |    2,6     |  Mysql  |
 |    4       |  JAVA   |
 +------------+---------+ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T07:49:59.293

利用[`GROUP_CONCAT`](http://www.mysqlperformanceblog.com/2006/09/04/group_concat-useful-group-by-extension/)

```
SELECT GROUP_CONCAT(Logid) AS Logid, Type 
FROM  <tablename> 
GROUP BY Type 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T07:50:04.040

```
SELECT 
   group_concat(Login) as LogId,
   Type
FROM
   myTable
GROUP BY Type 
```

# flash - 无法将 swf 文件链接到 rfxviewer

> ID：13739095
> 
> 赞同：0
> 
> 时间：2012-12-06T07:47:06.157
> 
> 标签：flash

再会，

我被这个问题困住了，我在 php 中使用这个命令将 pdf 文件转换为 swf 文件：

```
exec("C:\\SWFTools\\pdf2swf.exe ".$source." -o ".$converted." -f -T 9 -t -s storeallcharacters"); 
```

尽管几乎所有 pdf 都在正确转换并链接到我的查看器。但是，有一些 pdf 文件无法转换，所以我在命令行中手动进行，我遇到了这个错误：

```
NOTICE  processing PDF page 9 (595x842:0:0)
ERROR   ID Table overflow
ERROR   This file is too complex to render- SWF only supports 65536 shapes at once 
```

好吧，我已经做了一些研究[http://comments.gmane.org/gmane.comp.tools.swftools.general/2098](http://comments.gmane.org/gmane.comp.tools.swftools.general/2098) 并尝试了解决方案并且它有效。

但是我的问题是，我现在无法使用此命令将此 swf 文件链接到 rfxviewer：

```
exec("C:\\SWFTools\\swfcombine.exe -o ".$combined." C:\\SWFTools\\swfs\\rfxview.swf viewport=".$converted); 
```

我试过 cmd 的东西，它显示了这个错误：

```
Warning: File contains both flash 8 and flash 9 actionscript
Warning: File contains both flash 8 and flash 9 actionscript 
```

我现在如何将此 swf 文件链接到我的查看器？我错过了任何重要的命令吗？请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-13T06:21:58.663

我认为 rfxview.swf 只支持 flash 7 和 flash 8，您需要将“-T 9”更改为“-T 8”。

# android - 在 Ubuntu 10.04 LTS 上编译 Cocos2d-x

> ID：13739096
> 
> 赞同：3
> 
> 时间：2012-12-06T07:47:15.517
> 
> 标签：android, ubuntu-12.04, cocos2d-x

我最近刚开始使用 Ubuntu 开发带有 Cocos2d-x 的 Android 项目。我从 GitHub 克隆了最新的 Cocos2d-x 代码，并安装了 Android NDK r8。

然后我编译`hello-jni`没有问题。于是我用`create-android-project.sh`在里面通过创建一个测试项目，然后成功了。但是当我用`./build_native.sh`编译项目的时候报错了。错误如下：

```
Compile++ thumb  : cocosdenshion_static <= SimpleAudioEngineJni.cpp
Compile++ thumb  : cocosdenshion_static <= OpenSLEngine.cpp
/home/zhonglong/cocos2d-2.1beta3-x-2.1.0/mycocos2d/proj.android/../../CocosDenshion/android/opensl/OpenSLEngine.cpp:292:23: error: 
      expected expression
        (player->audioSrc) = {&loc_fd, &format_mime};
                         ^ 
```

有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T10:27:41.677

尝试更改此行

```
Line 292: (player-> audioSrc) = {& loc_fd, & format_mime}; 
```

为此，看看它是否有效

```
Player-> audioSrc.pLocator = & loc_fd;         : line 292
Player-> audioSrc.pFormat = & format_mime;     : line 293 
```

# javascript - 如何更改每个页面重新加载的文本

> ID：13739100
> 
> 赞同：1
> 
> 时间：2012-12-06T07:47:26.593
> 
> 标签：javascript, jquery, html

对于每次重新加载，我想更改文本我该怎么做？第一次加载要显示“早安”或“晚安”。如果第一次加载它显示“晚安”，那么下次它必须要显示“早安”通过使用数学随机它随机显示所以它显示两次或三次一个文本然后另一个所以对于每个页面加载文本都想改变

以下是我的代码的骨架

Javascript代码

```
<script type="text/javascript" src="jquery.min.js"></script>
<script>
$(document).ready(function()
{
  var text = ["Good Morning","Good Night"];
  var x = Math.floor((Math.random()*2));
  $('#myTxt').html(text[x]);

});
</script> 
```

HTML 代码

```
<form>
<div style="border: 1px red solid; height:100px; width:200px;">
   <span id="myTxt"></span>
</div>
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T08:00:02.367

您可以使用 cookie 来计算页面重新加载次数，并且可以更改每次重新加载的文本

```
if (getCookies("count")="")
  // first time loaded
   count = 1;
else {
 // get a variable in cookie called count
   count =   getCookies("count");
   count = count +1;
    }
 // and set count again to cookie
  setCookie("count",count ); 
```

对于 getCookie() 和 setCookie() 函数，你可以参考[这个](http://www.w3schools.com/js/js_cookies.asp)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T08:01:02.733

```
$(document).ready(function()
{
  var rld_cnt=parseInt($.cookie('rld_cnt')||0)+1;
  $.cookie('rld_cnt',rld_cnt);
  var text = ["Good Morning","Good Night"];
  $('#myTxt').html(text[rld_cnt%2]);

}); 
```

# jquery - 如何为我想要的结果编写 jQuery prependTo？

> ID：13739102
> 
> 赞同：2
> 
> 时间：2012-12-06T07:47:35.363
> 
> 标签：jquery

我有一个关于 jQuery prependTo 的问题。

这是html框架，我无法更改框架。

```
<section class="press-item">
  <h2 class="press-title">press title 1</h2>
  <div class="press-author">Fraser Hughes</div>
  <div class="press-publisher">Evening Times</div>
  <time class="press-date" pubdate="">October 19, 2012</time>
  <div class="press-preview">press contain 1</div>
  <a class="press-more" href="" target="_blank">Read More</a> 
</section>

<section class="press-item">
  <h2 class="press-title">press title 1</h2>
  <div class="press-author">Fraser Hughes</div>
  <div class="press-publisher">Evening Times</div>
  <time class="press-date" pubdate="">October 19, 2012</time>
  <div class="press-preview">press contain 1</div>
  <a class="press-more" href="" target="_blank">Read More</a> 
</section>
</code> 
```

我想添加一个`<p></p>`来包装 .press-autho、.press-publisher 和 press-date。结果应该是这样的：

```
<section class="press-item">
  <h2 class="press-title">press title 1</h2>
  <p>
    <div class="press-author">Fraser Hughes</div>
    <div class="press-publisher">Evening Times</div>
    <time class="press-date" pubdate="">October 19, 2012</time>
  </p>
  <div class="press-preview">press contain 1</div>
  <a class="press-more" href="" target="_blank">Read More</a> 
</section>

<section class="press-item">
  <h2 class="press-title">press title 1</h2>
  <p>
    <div class="press-author">Jeff Drake</div>
    <div class="press-publisher">Houston Chronicle</div>
    <time class="press-date" pubdate="">October 29, 2012</time>
  </p>
  <div class="press-preview">press contain 2</div>
  <a class="press-more" href="" target="_blank">Read More</a> 
</section> 
```

然而，结果变成了这样

```
 <section class="press-item">
      <h2 class="press-title">press title 1</h2>
      <p>
        <div class="press-author">Fraser Hughes</div>
        <div class="press-author">Jeff Drake</div>
        <div class="press-publisher">Evening Times</div>
        <div class="press-publisher">Houston Chronicle</div>
        <time class="press-date" pubdate="">October 19, 2012</time>
        <time class="press-date" pubdate="">October 29, 2012</time>
      </p>
      <div class="press-preview">press contain 1</div>
      <a class="press-more" href="" target="_blank">Read More</a> 
    </section>

    <section class="press-item">
      <h2 class="press-title">press title 1</h2>
      <p>
        <div class="press-author">Jeff Drake</div>
        <div class="press-publisher">Evening Times</div>
        <div class="press-publisher">Houston Chronicle</div>
        <time class="press-date" pubdate="">October 19, 2012</time>
        <time class="press-date" pubdate="">October 29, 2012</time>
      </p>
      <div class="press-preview">press contain 2</div>
      <a class="press-more" href="" target="_blank">Read More</a> 
    </section> 
```

我的代码是

```
$(function () {
    var sources$ = $('<p class="post-listmeta"></p>'),
        targets$ = $('.press-title'),
        operation = 'after';
    targets$[operation](sources$);
    $('.press-publisher').prependTo($('.post-listmeta'));
    $('.press-author').prependTo($('.post-listmeta'));
    $('.press-date').prependTo($('.post-listmeta'));

}); 
```

如何编写可能是我想要的结果的代码？

谢谢大家。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T07:53:17.917

您需要逐节工作：

```
$("section.press-item").each(function() {
    $(this).find(".press-author, .press-publisher, .press-date").wrapAll("<p>");
}); 
```

[实例](http://jsbin.com/ufotel/1)| [来源](http://jsbin.com/ufotel/1/edit)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T08:02:19.317

试试这个 ：

```
$($('section')[0]).find('.press-title,.press-author,.press-publisher').wrapAll('<p/>'); 
```

这里**$('section')[0]**将返回第一部分（您可以循环以对更多此类部分执行相同的操作），然后您必须查找要使用**.find('.press包装的元素-title,.press-author,.press-publisher')**，然后**wrapAll**将完成剩下的工作。

# facebook - 为新的 Facebook 登录用户处理密码的建议是什么？

> ID：13739104
> 
> 赞同：1
> 
> 时间：2012-12-06T07:47:54.237
> 
> 标签：facebook, ruby-on-rails-3, authentication, devise, facebook-authentication

当让用户使用 Facebook 登录时，我在第一次身份验证后创建了一个新的设计用户，问题是关于新创建用户的密码的更好做法是什么？

**1.用随机令牌填充它？**

那么，用户如何知道新创建的密码呢？

> 一个。我要给他发一封电子邮件吗？
> 湾。在他的第一次 Facebook 身份验证后将其写为一条消息？

*我知道用户可能不需要密码，因为他可以随时使用 Facebook 登录，但是，他可能需要更新他的设计用户字段，这将需要密码。*

**2\. 留空？**

> 然后，任何知道该电子邮件的人都可以使用设计登录表单进行登录。

**3\. 显示询问密码的模式窗口？**

> 这样做，它将在用户最终访问该网站之前添加一个步骤。

那么，推荐的方法是什么？有什么建议吗？

**编辑**

[在http://railscasts.com/episodes/236-omniauth-part-2?view=asciicast](http://railscasts.com/episodes/236-omniauth-part-2?view=asciicast)上 RailsCasts 上的 Ryan Bates

将用户重定向到一个表单，如果在尝试保存新用户时验证失败，他们可以解决任何问题，他避免为全新用户呈现密码字段：

```
<h2>Sign up</h2>

<%= form_for(resource, :as => resource_name, :url => registration_path(resource_name)) do |f| %>
  <%= devise_error_messages! %>

  <p><%= f.label :email %><br />
  <%= f.text_field :email %></p>

<% if @user.password_required? %>
  <p><%= f.label :password %><br />
  <%= f.password_field :password %></p>

  <p><%= f.label :password_confirmation %><br />
  <%= f.password_field :password_confirmation %></p>
<% end %>
  <p><%= f.submit "Sign up" %></p>
<% end %>

<%= render :partial => "devise/shared/links" %> 
```

但是，当 OmniAuth 注册用户尝试使用 devise sign in 登录时会发生什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T08:54:47.783

Ryan Bates covered this on RailsCasts and suggests you redirect them to a page after they've signed up with their oauth account.

This way you can still register users in the normal way plus you're sill validating the model.

We do this so out customers can sign up with different providers and still keep our devise registration in place.

Have a read of this:

[http://railscasts.com/episodes/236-omniauth-part-2?view=asciicast](http://railscasts.com/episodes/236-omniauth-part-2?view=asciicast)

If that's not helpful, let me know and I'll see what else we can find for you

# jquery - jQuery。如何取消选中除一个（已选中）之外的所有复选框

> ID：13739115
> 
> 赞同：19
> 
> 时间：2012-12-06T07:48:31.477
> 
> 标签：jquery, checkbox

我有 html 项目，4 个例子：

```
<div>
    <div><input type="checkbox" class="foo"> Checkbox</div>
    <div><input type="checkbox" class="foo"> Checkbox</div>
    <div><input type="checkbox" class="foo"> Checkbox</div>
    <div><input type="checkbox" class="foo"> Checkbox</div>
    <div><input type="checkbox" class="foo"> Checkbox</div>
    <div><input type="checkbox" class="foo"> Checkbox</div>
</div> 
```

现在，我想要下一个：如果我单击任何复选框 - 应选中该复选框，而应取消选中其他复选框。我该怎么做？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-12-06T07:50:48.043

您可以使用`radio`按钮并按名称属性对它们进行分组。如果你必须这样做，`checkboxes`那么你可以这样做，

**[现场演示](http://jsfiddle.net/rajaadil/6D9kS/)**

```
$('.foo').click(function(){     
      $('.foo').attr('checked', false);
      $(this).attr('checked', true);          
}); 
```

[**对于您需要的**](http://api.jquery.com/on/)动态生成的 html ，您可以使用静态父级委托事件，您可以在不知道静态父级的情况下使用文档。

```
$(document).on('click','.foo', function(){     
      $('.foo').attr('checked', false);
      $(this).attr('checked', true);          
}); 
```

如果已知，文档可以由静态父级替换。例如，如果 div 包含动态生成的有 id`parentdiv`那么你可以有

```
`$('#parentdiv').on('click','.foo', function(){` 
```

**编辑**

**使用`prop`而不是`attr`**for properties `checked`, `selected`, 或`disabled`根据文档。

> 从 jQuery 1.6 开始，.attr() 方法为尚未设置的属性返回 undefined。要检索和更改 DOM 属性，例如表单元素的选中、选择或禁用状态，请使用 .prop() 方法。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2018-06-13T11:11:29.183

另一种解决方案

```
$('.foo').click(function(){     
      $('.foo').not(this).attr('checked', false);      
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-03-14T22:34:58.483

也许这会帮助你：

```
.siblings("input[type='checkbox']").attr("checked", true); 
```

将选中除被单击的复选框之外的所有复选框。

```
$("input[type=checkbox]").on("click", function() {

  if ($(this).val() == "none") {

    $(this).siblings("input[type=checkbox]").attr('checked', false);

  } else {

    $(this).siblings("input[value=none]").attr('checked', false);

  }
});
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<div>

  <input type="checkbox" id="worker-soft-eaglesoft" checked><label for="worker-soft-eaglesoft">&nbsp;Eaglesoft</label><br>
  <input type="checkbox" id="worker-soft-dentrix"><label for="worker-soft-dentrix">&nbsp;Dentrix</label><br>
  <input type="checkbox" id="worker-soft-softDent"><label for="worker-soft-softDent">&nbsp;Soft-Dent</label><br>
  <input type="checkbox" id="worker-soft-denticon"><label for="worker-soft-denticon">&nbsp;Denticon</label><br>
  <input type="checkbox" id="worker-soft-other"><label for="worker-soft-other">&nbsp;Other</label><br>

  <input type="checkbox" id="worker-soft-none" value="none">
  <label for="worker-soft-none">&nbsp;No Software Experience - Paper Records Only</label><br>
</div>
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-08-07T16:44:47.100

jQuery V：1.6 =<

```
$( ".foo" ).change(function() {
    $('.foo').not(this).prop('checked', false);
}); 
```

# java - EntityManager 内存消耗

> ID：13739120
> 
> 赞同：3
> 
> 时间：2012-12-06T07:48:48.620
> 
> 标签：java, sql-server-2005, jpa, out-of-memory, entitymanager

在我们的一个项目中，用户可以将文件附加到他的帐户。我们将这些文件存储在 MS-SQL 数据库中。因此，我们有以下代码：

```
@Entity
public class File extends AbstractEntity {

    @Lob
    @Basic
    private byte[] data;

    @Nullable
    public byte[] getData() {
        return data;
    }

    public void setData(byte[] data) {
        this.data = data;
    }

    public File() {
    }

    public File(byte[] data) {
        this.data = data;
    }
}

public class SomeBean {

    @PersistenceContext
    protected EntityManager em;

    public Long uploadFile(@NotNull byte[] data) {
        final PhysicalFile physicalFile = new PhysicalFile();
        physicalFile.setData(data);
        em.persist(physicalFile);
        return physicalFile.getId();
    }
} 
```

一切都很好，在我们尝试上传 40 MB 文件之前，得到了`java.lang.RuntimeException: javax.transaction.RollbackException: [com.arjuna.ats.internal.jta.transaction.arjunacore.commitwhenaborted] [com.arjuna.ats.internal.jta.transaction.arjunacore.commitwhenaborted] Can't commit because the transaction is in aborted state`，这是由方法`java.lang.OutOfMemoryError: Java heap space`内部引起的`uploadFile()`。

我做了一个堆转储并在 VisualVM 中查看它。
![堆转储](../Images/e399d1c41666631262ac26869c36f6b2.png)

400+ MB`char[]`和 100+ MB 的`byte[]`. 在开始时，我们的应用程序，包括`JBoss`，正在使用大约 60-65 MB 的堆。那么问题来了，为什么要`EntityManager`疯狂地消耗堆内存呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T08:37:47.957

我对您的问题的理解如下。

*   通过 EntityManager 加载/持久的所有实体都保留在内存中，直到您显式地从它分离实体（通过 EntityManager.detach() 或 EntityManager.clear() 或 EntityManager.close()）。所以最好有短命的EntityManagers。

*   就业务逻辑中发生 RuntimeException 而言，em EntityManager 保持打开状态！你总是想避免这种代码。您可以考虑如下创建和关闭 EntityManager：

    ```
    public Customer getBestCustomerOfMonth() {
    EntityManagerFactory emf = ... ;
    EntityManager em = emf.createEntityManager();
    // business logic
    em.close();
    } 
    ```

*   您可以嵌套用于关闭 EntityManager **em.close();的行** 在 finally 块内

*   在企业应用程序服务器之外使用事务时，因为您必须以与 EntityMangers 相同的方式关闭（提交或回滚）事务。为了关闭这些资源（EntityManager 和底层事务），您需要进行额外的嵌套级别并编写类似于此的代码：

    ```
     public Customer updateCustomer(Customer cust) {

           EntityManagerFactory emf = ... ;   EntityManager em =
         emf.createEntityManager();   try {
         EntityTransaction t = em.getTransaction();
         try {
           t.begin();  
           // business logic to update the customer
           em.merge(cust);
           t.commit();
         } finally {
           if (t.isActive()) t.rollback();
         }   } finally {
         em.close();
           }       
        } 
    ```

您可能会认为这种嵌套结构看起来有点乱，但它确实需要在事务的前面。

# kendo-ui - What is the proper way to edit items in a listview when using Kendo UI Mobile & MVVM?

> ID：13739125
> 
> 赞同：0
> 
> 时间：2012-12-06T07:49:00.290
> 
> 标签：kendo-ui

What is the proper way to edit items in a listview when using **Kendo UI Mobile** & **MVVM**?

I don't get the expected results when using the following:

**HTML**

```
<div id="itemsView"
    data-role="view"
    data-model="vm">

    <ul data-role="listview" data-bind="source: items" 
                             data-template="itemsTemplate">
    </ul>
    <script id="itemsTemplate" type="text/x-kendo-template">
    <li>
        #=Name#
    </li>
    </script>

    <input type="text" data-bind="value: newValue" />
    <button data-role="button" data-bind="click: update">update</button>
</div>​ 
```

**JavaScript**

```
var vm = kendo.observable({
    items: [{
        Name: "Item1"}],
    newValue: '',
    update: function(e) {
        var item = this.get("items")[0];
        item.set("Name", this.get("newValue"));
        //adding the follwoing line makes it work as expected
        kendo.bind($('#itemsView'), vm);
    }
});

kendoApp = new kendo.mobile.Application(document.body, {
transition: "slide"});​ 
```

I expect the listview to reflect the change to the Name property of that item. Instead, a new item is added to the listview. Examining the array reveals that there is no additional item, and that the change was made. (re)Binding the view to the view-model updates the list to reflect the change. Re-Binding after a change like this doesn't seem to make any sense.

**Here is the jsfiddle:** [http://jsfiddle.net/5aCYp/2/](http://jsfiddle.net/5aCYp/2/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T08:05:47.300

Not sure if I understand your question properly: but this is how I did something similar with Kendo Web UI, I expect mobile is not so different from Web UI from API perspective.

```
 $element.kendoListView({
        dataSource: list,
        template: idt,
        editTemplate: iet,
        autoBind: true
    }); 
```

The way I bind the listview is different, but I guess you can get similar results with your method as well.

I pass two templates to the list view, one for displaying and one for editing. Display template contains a button (or any element) with css class `k-edit` to which kendo will automatically bind the listview edit action.

display template:

```
 <div class="item">
        # if (city) { #
            #: city #<br />
        # } #
        # if (postCode) { #
            #: postCode #<br />
        # } #
         <div class="btn">
            <a href="\\#"><span class="k-icon k-edit"></span>Edit</a>
            <a href="\\#"><span class="k-icon k-delete"></span>Delete</a>
         </div>
    </div> 
```

Edit template

```
 <div class="item editable">
        <div>City</div>
        <div>
            <input type="text" data-bind="value: city" name="city" required="required" validationmessage="*" />
             <span data-for="city" class="k-invalid-msg"></span>
         </div>
        <div>Post Code</div>
        <div>
             <input type="text" data-bind="value: postCode" name="postCode" required="required" validationmessage="*" />
             <span data-for="postCode" class="k-invalid-msg"></span>
         </div>
         <div class="btn">
             <a href="\\#"><span class="k-icon k-update"></span>Save</a>
             <a href="\\#"><span class="k-icon k-cancel"></span>Cancel</a>
         </div>
    </div> 
```

Clicking that element will put the current element on edit mode using the editTemplate.

Then on the editTemplate there is another button with `k-update` class, again to which kendo will automatically bind and call the save method on the data source.

Hopefully this will give you more ideas on how to solve your issue.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T15:55:15.753

The problem was caused by the `<li>` in the template. The widget already supplies the `<li>` so the additional `<li>` messes up the rendering. This question was answered by Petyo in the [kendo ui forums](http://www.kendoui.com/forums/mobile/listview/proper-way-to-edit-items-in-a-listview-when-using-kendo-ui-mobile-mvvm.aspx)

# c# - 在 C# 中使用 streamReader 类

> ID：13739131
> 
> 赞同：0
> 
> 时间：2012-12-06T07:49:22.527
> 
> 标签：c#, .net, streamreader

```
 public class myRows
   {
       public decimal Number1 { get; set; }
       public decimal Number2 { get; set; }
       public decimal Number3 { get; set; }
       public decimal Number4 { get; set; }
       public decimal Number5 { get; set; }
       public decimal Number6 { get; set; }
       public string Date1 { get; set; }

       public myRows(string str)
       {
               Number1 = Convert.ToDecimal(str.Substring(3, 7));
               Number2 = Convert.ToDecimal(str.Substring(15, 8));
               Number3 = Convert.ToDecimal(str.Substring(24, 8));
               Number4 = Convert.ToDecimal(str.Substring(36, 8));
               Number5 = Convert.ToDecimal(str.Substring(47, 8));
               Number6 = Convert.ToDecimal(str.Substring(58, 8));
               Date1 = str.Substring(65, 25);
       }
   } 
```

然后我读取文本文件数据，如

```
var myRows = new List<myRows>();
var myR = new StreamReader(txtFileToImport.Text);
while (!myR.EndOfStream)
      {
          string s = myR.ReadLine();
          if (!String.IsNullOrEmpty(s.Trim()))
          {
             myRows.Add(new myRows(s));
          }
          }
  myR.Close();
  dataGridView1.DataSource = myRows; 
```

我遇到的问题是预先确定文本文件中列值之间的空格的 startIndex 和长度，例如这里`Convert.ToDecimal(str.Substring(3, 7));`

列值之间的空格不统一，可以在第 1 列和第 2 列之间为 5，然后在第 7 列和第 8 列之间为 8。

目前，我必须提前知道空白开始和结束的索引。有没有我可以动态获取空白的起始索引及其长度而无需查看要处理的文本文件？

我真正需要的是传递给`str.Substring(,)`不要硬线的参数。

@Habib：**示例文本文件在这里** ![在此处输入图像描述](../Images/783ac28fefbc03cd178870656c3f1746.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T08:09:10.903

在带有选项[`String.Split`](http://msdn.microsoft.com/en-us/library/ms131448.aspx)的空格字符上使用。[`StringSplitOptions.RemoveEmptyEntries`](http://msdn.microsoft.com/en-us/library/system.stringsplitoptions.aspx)这将有效地删除空字段，只留下包含数据的字段。

给定您的文本文件中的一行`line`，您的代码将如下所示：

```
var fields = line.Split(" ".ToCharArray(), StringSplitOptions.RemoveEmptyEntries);
var Number1 = Convert.ToDecimal(fields[0]);
var Number2 = Convert.ToDecimal(fields[1]);
// etc. 
```

由于您的日期数据被分解为几个离散字段（星期几、月份、日期等），您将通过它们将占用并分配给您的字段“重新组合”它们`Date1`：

```
var Date1 = string.Format("{0} {1} {2} {3} {4}", fields[7], fields[8], fields[9], fields[10], fields[11]); 
```

当然，在生产代码中，您需要验证几件事：

*   您已阅读预期的字段数
*   您可以安全地将您的字符串字段值转换为 Doubles（为此用途[`Double.TryParse`](http://msdn.microsoft.com/en-us/library/994c0zb1.aspx)）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T08:37:35.273

使用`Split`方法将您的行分成 8 个部分。最后一个将是你的约会对象。

```
var parts = line.Split(new char[]{' '}, 8, StringSplitOptions.RemoveEmptyEntries);

Number1 = Decimal.Parse(parts[0]);
Number2 = Decimal.Parse(parts[1]);
......
......
DateTime Date1 = DateTime.ParseExact(parts[7],"ddd MMM dd HH:mm:ss yyyy",CultureInfo.InvariantCulture); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-06T07:59:35.513

您可以使用[string.Split(](http://msdn.microsoft.com/en-us/library/system.string.split.aspx) )`string`并稍后使用数组索引而不是字符串位置来转换数字。在空格上拆分字符串将从字符串中删除空格。就像是：

```
public myRows(string str)
       {
          string[] splitArray = str.Split(); //split on white space
          if(splitArray.Length > 7)
              {
               Number1 = Convert.ToDecimal(splitArray[0]);
               //,....... So on
              }
       } 
```

# iphone - 如何使用 ASIFormDataRequest 显示 UIProgressView

> ID：13739137
> 
> 赞同：1
> 
> 时间：2012-12-06T07:50:04.820
> 
> 标签：iphone, objective-c, uiprogressview, asiformdatarequest

我想用 ASIFormDataRequest 显示 uiprogress 栏。我用谷歌搜索了它，但我找不到关于带有 ASIFormDataRequest 的 uiprogressView，我只是找到带有 NSURLConnection 的 uiprogressView。只要让我知道是否可能。

// 所以这是我上传数据的方法。

```
-(NSMutableArray*)getUploadVideo:(NSString*)titleName userID:(NSString*)userId token:(NSString*)tokenID description:(NSString*)desc videoID:(NSString*)video_id privateOrPublic:(NSString*)privacyID pathOfVideoFile:(NSString*)path mode:(NSString*)potLand;
{

ASIFormDataRequest *request = [ASIFormDataRequest requestWithURL:[NSURL URLWithString:@"http://%@/aircastdev/RestServices/fileUpload"],kId];

[request setDelegate:self];

[request setDidFailSelector:@selector(uploadFailed:)];

[request setDidFinishSelector:@selector(uploadFinished:)];

[request setDidFinishSelector:@selector(requestFailed:)];
[request setDidFinishSelector:@selector(requestFinished:)];

[request setPostValue:titleName forKey:@"title"];
[request setPostValue:userId forKey:@"user_id"]; 
[request setPostValue:tokenID forKey:@"token"]; 
[request setPostValue:desc forKey:@"desc"]; 
[request setPostValue:video_id forKey:@"video_id"]; 
[request setPostValue:privacyID forKey:@"is_private"];
[request setPostValue:potLand forKey:@"mode"];

NSString *url = [[NSURL fileURLWithPath:path] path];

[request setFile:url withFileName:[NSString stringWithFormat:@"%@.mov",titleName] andContentType:@"video/MOV" forKey:@"file"];

[request setTimeOutSeconds:50000];
[request setRequestMethod:@"POST"];
// EDITED LINE

[request setUploadProgressDelegate:myProgressView];

[request startSynchronous];

SBJSON *sbJason = [[SBJSON alloc] init];

getUploadArray = [sbJason objectWithString:self.response];

return getUploadArray;

} 
```

// 上传完成时调用此方法。

```
- (void)requestFinished:(ASIHTTPRequest *)request
{
// alert: request is successfully sent

 self.response = [request responseString]; //stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceAndNewlineCharacterSet]];

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T07:57:53.457

用这个：

```
[request setDownloadProgressDelegate:progressView]; 
```

或者

```
[request setUploadProgressDelegate:myProgressIndicator]; 
```

`progressView`UIProgressView 在哪里[也看看这里](http://allseeing-i.com/ASIHTTPRequest/How-to-use#progress)

# iphone - 如何在 iPhone 的相机中检测和显示眼睛和嘴巴？

> ID：13739139
> 
> 赞同：1
> 
> 时间：2012-12-06T07:50:26.047
> 
> 标签：iphone, camera, face-detection

为了在相机中检测人脸，我参考 SquareCam（iOS 开发人员库）。但我无法显示左眼、右眼和嘴的位置。我正在使用以下代码

```
NSArray *sublayers = [NSArray arrayWithArray:[previewLayer sublayers]];
NSInteger sublayersCount = [sublayers count], currentSublayer = 0;
NSInteger featuresCount = [features count], currentFeature = 0;

[CATransaction begin];
[CATransaction setValue:(id)kCFBooleanTrue forKey:kCATransactionDisableActions];

// hide all the face layers
for ( CALayer *layer in sublayers )
{
    if ( [[layer name] isEqualToString:@"FaceView"] )
        [layer setHidden:YES];
}

if ( featuresCount == 0 || !detectFaces ) {
    [CATransaction commit];
    return; // early bail.
}

CGSize parentFrameSize = [previewView frame].size;
NSString *gravity = [previewLayer videoGravity];
BOOL isMirrored = [previewLayer isMirrored];
CGRect previewBox = [SquareCamViewController videoPreviewBoxForGravity:gravity
                                                             frameSize:parentFrameSize
                                                          apertureSize:clap.size];

for ( CIFaceFeature *ff in features ) {

    // find the correct position for the square layer within the previewLayer
    // the feature box originates in the bottom left of the video frame.
    // (Bottom right if mirroring is turned on)
    CGRect faceRect = [ff bounds];

    CGRect leftEyeFrameRect;

    CGFloat temp             = faceRect.size.width;
    faceRect.size.width      = faceRect.size.height;
    faceRect.size.height     = temp;
    temp                     = faceRect.origin.x;
    faceRect.origin.x        = faceRect.origin.y;
    faceRect.origin.y        = temp;

    // scale coordinates so they fit in the preview box, which may be scaled
    CGFloat widthScaleBy     = previewBox.size.width / clap.size.height;
    CGFloat heightScaleBy    = previewBox.size.height / clap.size.width;
    faceRect.size.width     *= widthScaleBy;
    faceRect.size.height    *= heightScaleBy;
    faceRect.origin.x       *= widthScaleBy;
    faceRect.origin.y       *= heightScaleBy;

    if ( isMirrored )
    {

        faceRect = CGRectOffset(faceRect, previewBox.origin.x + previewBox.size.width - faceRect.size.width - (faceRect.origin.x * 2), previewBox.origin.y);

    }
    else
    {

        faceRect = CGRectOffset(faceRect, previewBox.origin.x, previewBox.origin.y);
          leftEyeFrameRect=CGRectOffset(faceRect,ff.leftEyePosition.x, ff.leftEyePosition.y);

    }

    CALayer *featureLayer   = nil;
    CALayer *eyeLayer       = nil;

    // re-use an existing layer if possible
    while ( !featureLayer && (currentSublayer < sublayersCount) )

    {
        CALayer *currentLayer = [sublayers objectAtIndex:currentSublayer++];
        if ( [[currentLayer name] isEqualToString:@"FaceLayer"] ) {
            featureLayer = currentLayer;

            [currentLayer setHidden:NO];
        }
    }

    // create a new one if necessary
    if ( !featureLayer ) {

        featureLayer = [CALayer new];
        [featureLayer   setContents:(id)[square CGImage]];
        [featureLayer   setName:@"FaceLayer"];
        [previewLayer addSublayer:featureLayer];
        [featureLayer   release];

    }
    [featureLayer setFrame:faceRect];

    if (faceView !=nil) {
        [faceView removeFromSuperview];
        [faceView release];
    }
    if (leftEyeView != nil) {
        [leftEyeView removeFromSuperview];
        [leftEyeView release];
    }

    faceView   = [[UIView alloc] initWithFrame:CGRectMake(faceRect.origin.x, faceRect.origin.y ,faceRect.size.width, faceRect.size.height)];

    faceView.layer.borderWidth   = 1;
    faceView.layer.borderColor   = [[UIColor redColor] CGColor];
    [self.view    addSubview:faceView];

    leftEyeView = [[UIView alloc] initWithFrame:CGRectMake(faceView.frame.origin.x+(faceView.frame.size.height/2), faceView.frame.origin.y+(faceView.frame.size.height*0.10) ,faceView.frame.size.width*0.40, faceView.frame.size.height*0.40)];

    UIImageView  *leftEyeImageView=[[UIImageView alloc] initWithImage:[UIImage imageNamed:@"eye.png"]];
    leftEyeImageView.frame = CGRectMake(0, 0, faceView.frame.size.width*0.40, faceView.frame.size.height*0.40);
    [leftEyeView addSubview:leftEyeImageView];
    [self.view    addSubview:leftEyeView];

    if (ff.hasLeftEyePosition) {
        CGPoint leftEyeCenter= ff.leftEyePosition;
        UIView *vv= [[UIView alloc] initWithFrame:CGRectMake(leftEyeCenter.x, leftEyeCenter.y, 50, 50)];
        vv.center = leftEyeCenter;
        vv.layer.borderWidth= 4.0;
        vv.layer.borderColor= [[UIColor blackColor]CGColor];
        [self.view addSubview:vv];  
    } 
```

它正在检测眼睛，但未显示在正确的位置。任何人都可以帮助解决这个问题。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-17T21:56:47.997

使用前置摄像头时，我在预览中遇到了与您相同的问题，因为预览是镜像的，我找不到任何可以缩放的好信息。

以下代码是我得到的最接近的。请注意，我将图像定义为被调用的属性，`heartImage`并且我假设您使用的是名为 SquareCam 的 Apple 示例。

在方法中`- (void)drawFaceBoxesForFeatures:(NSArray *)features forVideoBox:(CGRect)clap orientation:(UIDeviceOrientation)orientation`

```
 if(ff.hasLeftEyePosition)
    {
        //swap coordinates
        CGFloat leftEyeRectOriginX = ff.leftEyePosition.y ; 
        CGFloat leftEyeRectOriginY = ff.leftEyePosition.x ;
        CGFloat leftEyeRectWidth = faceRect.size.width*0.3;
        CGFloat leftEyeRectHeight = faceRect.size.width*0.3;

        //adjust scale
        leftEyeRectOriginX *= widthScaleBy;
        leftEyeRectOriginY *= heightScaleBy;

        NSLog(@"LeftEyePosition: %@", NSStringFromCGPoint(ff.leftEyePosition));
        CGRect r = CGRectMake(leftEyeRectOriginX -  (leftEyeRectWidth/2) , leftEyeRectOriginY - (leftEyeRectHeight/2), leftEyeRectWidth, leftEyeRectHeight);

        if ( isMirrored ){
            r = CGRectOffset(r, previewBox.origin.x + previewBox.size.width - (rightEyeRectOriginX*2) - rightEyeRectWidth+ faceRect.origin.x, previewBox.origin.y);
            NSLog(@"LeftEyeRect mirrored: %@", NSStringFromCGRect(r));
        }
        else{
            r = CGRectOffset(r, previewBox.origin.x, previewBox.origin.y);
        }

        while ( !leftEyeEyeLayer && (currentSublayer < sublayersCount) ) {
            CALayer *currentLayer = [sublayers objectAtIndex:currentSublayer++];
            if ( [[currentLayer name] isEqualToString:@"LeftEyeLayer"] ) {
                leftEyeEyeLayer = currentLayer;
                [currentLayer setHidden:NO];
            }
        }

        // create a new one if necessary
        if ( !leftEyeEyeLayer ) {
            leftEyeEyeLayer = [CALayer new];
            [leftEyeEyeLayer setContents:(id)[heartImage CGImage]];
            [leftEyeEyeLayer setName:@"LeftEyeLayer"];
            [previewLayer addSublayer:leftEyeEyeLayer];
            [leftEyeEyeLayer release];
        }
        [leftEyeEyeLayer setFrame:r];

    } 
```

这同样适用于右眼，除了我在它被镜像的情况下使用它：`r = CGRectOffset(r, previewBox.origin.x + previewBox.size.width - (rightEyeRectOriginX*2) - rightEyeRectWidth+ faceRect.origin.x, previewBox.origin.y);` 。与示例代码的唯一区别是您首先要删除所有 featureLayers，因此我的代码上方的某些行如下所示：

```
 // hide all the face layers
for ( CALayer *layer in sublayers ) {
    if ( [[layer name] isEqualToString:@"FaceLayer"] || [[layer name] isEqualToString:@"LeftEyeLayer"] || [[layer name] isEqualToString:@"RightEyeLayer"] )
        [layer setHidden:YES];
} 
```

确切地说，我只在实时相机预览中遇到麻烦。使用该方法将图片保存在库中时（`- (CGImageRef)newSquareOverlayedImageForFeatures:(NSArray *)features inCGImage:(CGImageRef)backgroundImage withOrientation:(UIDeviceOrientation)orientation frontFacing:(BOOL)isFrontFacing` ）它可以通过使用以下方法正常工作：

```
 if(ff.hasLeftEyePosition)
    {
        CGRect r = CGRectMake(ff.leftEyePosition.x-faceWidth*0.15, ff.leftEyePosition.y-faceWidth*0.15, faceWidth*0.3, faceWidth*0.3);
        CGContextDrawImage(bitmapContext, r, [rotatedHeartImage CGImage]);

    } 
```

请让我知道是否以及如何改进我的答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T11:25:46.607

这可能是由于您的输入、检测器和输出之间的方向不正确造成的。如果检测到人脸，则可能只需要将输出坐标从横向转换为纵向，反之亦然。否则，请看[这里](http://developer.apple.com/library/ios/documentation/CoreImage/Reference/CIDetector_Ref/Reference/Reference.html#//apple_ref/occ/instm/CIDetector/featuresInImage%3aoptions%3a)。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-06T11:37:36.497

您可以在 Haar 级联训练文件和 OPENGL 中进行调查，但这是完全不同的方法。它确实支持低于 6.0 的 iOS 版本，这是一个专业版。但它比 Apple 的 Squarecam 样本（con）更难。

这个 OpenGL 能够检测耳朵、眼睛等。网络上可能已经有一些训练文件。

# networking - 使用wireshark找出VNIC的类型

> ID：13739144
> 
> 赞同：0
> 
> 时间：2012-12-06T07:50:44.520
> 
> 标签：networking, wireshark, ethernet

在一项任务中，我被要求分析数据包跟踪并确定用户在他或她的机器上拥有什么样的 VNIC。但是，我发现这非常困难；我不太确定要寻找什么。我很高兴能指出正确的方向。我的意思是连接是通过以太网还是无线 802.11 卡

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T07:58:43.993

您是指以太网/WLAN 卡的制造商吗？以太网地址的前 6 个字节称为组织唯一标识符，您可以在此处查找它们：

[http://standards.ieee.org/regauth/oui/index.shtml](http://standards.ieee.org/regauth/oui/index.shtml)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T11:04:35.633

如果您已经拥有捕获文件，则使用wireshark 打开文件，并在显示过滤器类型“wlan”上，然后单击应用过滤掉802.11 数据包。以太网的显示过滤器表达式是“eth”。如果在应用显示过滤器后显示有任何数据包，则说明存在使用该协议的数据包。您可以使用 Wireshark 查看数据包以查看以太网 II 或 802.11 标头。

[您可以从http://wiki.wireshark.org/SampleCaptures](http://wiki.wireshark.org/SampleCaptures)下载 802.11 和以太网 II 的一些示例捕获。

# c# - 如果我想填充到 4 个字节，Little Endian 和 Big Endian 的外观如何？

> ID：13739146
> 
> 赞同：4
> 
> 时间：2012-12-06T07:50:48.710
> 
> 标签：c#, .net, endianness

不知何故，我脑子有问题，无法弄清楚正确的大端和小端表示。我有一个存储 32 位整数的字节流。

Integer 是十进制的 1000，即十六进制的 0x03E8。在 little Endian 中，这将被存储为`E8 03`当表示为两个字节时。

我假设如果我想要 4 字节填充，它将存储为`00 00 E8 03`. 然而，当我使用 BitConverter 时，我得到了奇怪的结果：

```
// true
Console.WriteLine(BitConverter.IsLittleEndian);

var bytes = new byte[4] { 0x00, 0x00, 0xE8, 0x03 };
var convertedInt = BitConverter.ToInt32(bytes,0);
// 65536000 ?!
Console.WriteLine(convertedInt);

var inputInt = 1000;
var convertedBytes = BitConverter.GetBytes(inputInt);
// 4 Bytes: e8 03 00 00
Console.WriteLine("{0} Bytes: {1:x2} {2:x2} {3:x2} {4:x2}", convertedBytes.Length,
        convertedBytes[0],  convertedBytes[1],
        convertedBytes[2],  convertedBytes[3]); 
```

这看起来像 BitConverter 坏了。[文档](http://msdn.microsoft.com/en-us/library/de8fssa4%28v=vs.100%29.aspx)清楚地说：

> GetBytes 方法返回的数组中的字节顺序取决于计算机体系结构是 little-endian 还是 big-endian。

那么，我是否误解了 Little Endian 的工作原理，BitConverter 是否损坏，或者我做错了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-06T07:53:30.270

> 那么，我是否误解了 Little Endian 的工作原理

是的。Little endian 意味着最不重要的部分首先出现 - 所以 1000 实际上是

```
Little endian: E8 03 00 00
Big endian:    00 00 03 E8 
```

数字的最低有效字节是 E8，所以它肯定应该放在*一端*或另一端 - 小端表示将它放在开头；big-endian 表示将其放在最后。您建议的表示`00 00 E8 03`将其放在中间。根据[Wikipedia Endianness page](http://en.wikipedia.org/wiki/Endianness)，这种表示*确实*存在，但很少见 - 这称为混合端或中间端。

确认代码：

```
using System;

class Test
{
    static void Main()
    {
        var bytes = new byte[4] { 0xE8, 0x03, 0x00, 0x00 };
        var convertedInt = BitConverter.ToInt32(bytes, 0);
        Console.WriteLine(convertedInt); // 1000
    }
} 
```

# c++ - 为 os x 制作可安装的可执行文件

> ID：13739147
> 
> 赞同：2
> 
> 时间：2012-12-06T07:50:51.033
> 
> 标签：c++, macos, g++, clang++

我有一个在 OS X 上使用 clang++ 和 g++ 4.7 版编译的应用程序。我编写的应用程序使用第三方 sdk，例如 opencv、glfw 等。到目前为止，我可以制作一个可执行文件，但由于依赖关系，它只能在我自己的计算机上运行。OS X 开发人员使用什么工具来导出他们的应用程序（即使它们可安装或包含所有库的可执行文件）？还有一个限制，我当前的操作系统是山狮，但我希望它能够向后兼容至少 10.6 或 10.5，这曾经是 x64 交换机。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T09:00:55.760

您打算将您的应用程序作为[应用程序包](http://en.wikipedia.org/wiki/Application_bundle)分发，还是仅作为可执行二进制文件分发？

如果它是一个应用程序包，并且您可以获取并链接到第三方 SDK 作为框架（例如 OpenCV.framework），那么您可以通过将框架复制到`AppName.app/Contents/Frameworks/`文件夹中来将它们与您的应用程序一起分发。

如果它不是应用程序包，或者您无法获取第三方 SDK 作为框架，那么您需要静态链接到这些 SDK。有关如何执行此操作的更多信息，请参阅[此问题。](https://stackoverflow.com/questions/9586991/boost-library-static-linking-on-xcode-4)

要为早期版本的 OS X构建，`MACOSX_DEPLOYMENT_TARGET`请在构建程序之前设置环境变量。例如：

```
export MACOSX_DEPLOYMENT_TARGET=10.6 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T09:06:04.653

首先，学习如何制作捆绑包，它会为你省去很多痛苦。其次，你*应该*能够为旧版本的 OSX 进行编译，但实际上很难让它工作。最好保留较旧的安装。

# solr4 - Solr Search 在打开文档时聚焦精确匹配

> ID：13739149
> 
> 赞同：1
> 
> 时间：2012-12-06T07:50:51.783
> 
> 标签：solr4

我希望当我们单击搜索关键字的搜索结果链接时，它应该打开文档（pdf），重点是搜索关键字的首次出现。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-28T12:19:53.473

请检查[Solr 突出显示](http://wiki.apache.org/solr/HighlightingParameters)

# java - 如何在 Java 桌面应用程序中设置 Crystal Reports 的参数

> ID：13739152
> 
> 赞同：0
> 
> 时间：2012-12-06T07:51:10.283
> 
> 标签：java, swing, report, crystal-reports-xi

我有一个使用水晶报表打印报表的功能。问题是，这段代码打印了数据库中的所有数据。如何以编程方式设置参数或过滤器，以便我可以选择要在报告中显示的记录。我知道有提示询问水晶报告本身的参数值，但我不想使用它。

```
private void openReport() {

    try {
        ReportClientDocument rpt =  new ReportClientDocument();
        rpt.open(reportPath+fileName, 0);

        rpt.getDatabaseController().logon(mdlLogin.dbUsername, mdlLogin.dbPassword);
        Tables tables = rpt.getDatabaseController().getDatabase().getTables();

        for(int i=0; i< tables.size(); i++){
            ITable table = tables.getTable(i);
            // dbane.owner.tablename
            String original_qualifiedName = table.getQualifiedName();
            String new_qualifierName = original_qualifiedName;

            switch (database) {
            case "ORACLE":
                // SCHEMA.TABLENAME
                String tableName = StringUtils.substringAfterLast(original_qualifiedName, ".").toUpperCase(); 
                new_qualifierName = userOrSchemaName.toUpperCase()+"."+tableName;

                break;
            case "INFORMIX":
                // DATABASE.OWNER.TABLENAME
                new_qualifierName = dbname + ":" + userOrSchemaName + "." + StringUtils.substringAfterLast(original_qualifiedName, ".");                    

                break;
            case "MySQL":
                // DATABASE.OWNER.TABLENAME
                new_qualifierName = dbname + "." + userOrSchemaName + "." + StringUtils.substringAfterLast(original_qualifiedName, ".");                    
                new_qualifierName = dbname + "." + StringUtils.substringAfterLast(original_qualifiedName, ".");                    
                break;
            default:
                break;
            }

            String jdbcConnectionString = null;
            String preQEServerName = null;
            String driver = null;

            switch (database) {
            case "INFORMIX":
                // !com.informix.jdbc.IfxDriver!jdbc:informix-sqli://localhost:40421/export:INFORMIXSERVER=cargool1!user={userid}!password={password}
                jdbcConnectionString = "!com.informix.jdbc.IfxDriver!jdbc:informix-sqli://"+ip+":"+port+"/"+dbname+":INFORMIXSERVER="+dbservername+"!user={userid}!password={password}";
                // jdbc:informix-sqli://localhost:40421/export:INFORMIXSERVER=cargool1
                preQEServerName      = "jdbc:informix-sqli://"+ip+":"+port+"/"+dbname+":INFORMIXSERVER="+dbservername;
                // com.informix.jdbc.IfxDriver
                driver = "com.informix.jdbc.IfxDriver";
                break;
            case "MySQL":
                // !com.mysql.jdbc.Driver!jdbc:mysql://172.20.9.170:3306/hego
                jdbcConnectionString = "!com.mysql.jdbc.Driver!jdbc:mysql://"+ip+":"+port+"/"+dbname;
                // jdbc:mysql://172.20.9.170:3306/customer
                preQEServerName      = "jdbc:mysql://"+ip+":"+port+"/"+dbname;
                // com.mysql.jdbc.Driver
                driver = "com.mysql.jdbc.Driver";
                break;
            case "ORACLE":
                // !oracle.jdbc.driver.OracleDriver!jdbc:oracle:thin:@//localhost:50000/tmsddb2
                jdbcConnectionString = "!oracle.jdbc.driver.OracleDriver!jdbc:oracle:thin:@//"+ip+":"+port+"/"+dbname;
                // jdbc:oracle:thin:@//localhost:50000/tmsddb2
                preQEServerName      = "jdbc:oracle:thin:@//"+ip+":"+port+"/"+dbname;
                // "oracle.jdbc.driver.OracleDriver"
                driver = "oracle.jdbc.driver.OracleDriver";
                break;
            default:
                break;
            }

            table.setQualifiedName(new_qualifierName);

            ConnectionInfo connInfo = new ConnectionInfo();                

            PropertyBag innerProp = new PropertyBag();
            innerProp.put("JDBC Connection String", jdbcConnectionString);
            innerProp.put("PreQEServerName",   preQEServerName);
            innerProp.put("Server Type", "JDBC (JNDI)");
            innerProp.put("Database DLL", "crdb_jdbc.dll");
            innerProp.put("Database", dbname);
            innerProp.put("Database Class Name", driver);
            innerProp.put("Use JDBC", "true");
            innerProp.put("Database Name", dbname);
            innerProp.put("Server Name", preQEServerName);
            innerProp.put("Connection URL", preQEServerName);

            connInfo.setAttributes(innerProp);
            connInfo.setUserName(mdlLogin.dbUsername);
            connInfo.setPassword(mdlLogin.dbPassword);

            table.setConnectionInfo(connInfo);
            rpt.getDatabaseController().setTableLocation(table, tables.getTable(i));
        }
        /*
         * SubReport
         * 
         */

        int numTables = rpt.getSubreportController().getSubreportNames().size();

        for(int i=0; i<numTables; i++){////////////

            String str = rpt.getSubreportController().getSubreportNames().getString(i);

            Tables subTables = rpt.getSubreportController().getSubreport(str).getDatabaseController().getDatabase().getTables();

            for(int j=0; j< subTables.size(); j++){
                ITable table = subTables.getTable(j);
                // dbane.owner.tablename
                String original_qualifiedName = table.getQualifiedName();
                String new_qualifierName = original_qualifiedName;

                switch (database) {
                case "ORACLE":
                    // SCHEMA.TABLENAME
                    String tableName = StringUtils.substringAfterLast(original_qualifiedName, ".").toUpperCase(); 
                    new_qualifierName = userOrSchemaName.toUpperCase()+"."+tableName;

                    break;
                case "INFORMIX":
                    // DATABASE.OWNER.TABLENAME
                    new_qualifierName = dbname + ":" + userOrSchemaName + "." + StringUtils.substringAfterLast(original_qualifiedName, ".");                    

                    break;
                case "MySQL":
                    // DATABASE.OWNER.TABLENAME
//                    new_qualifierName = dbname + "." + userOrSchemaName + "." + StringUtils.substringAfterLast(original_qualifiedName, ".");                    
                    new_qualifierName = dbname + "." + StringUtils.substringAfterLast(original_qualifiedName, ".");                    
                    break;
                default:
                    break;
                }

                String jdbcConnectionString = null;
                String preQEServerName = null;
                String driver = null;

                switch (database) {
                case "INFORMIX":
                    // !com.informix.jdbc.IfxDriver!jdbc:informix-sqli://localhost:40421/export:INFORMIXSERVER=cargool1!user={userid}!password={password}
                    jdbcConnectionString = "!com.informix.jdbc.IfxDriver!jdbc:informix-sqli://"+ip+":"+port+"/"+dbname+":INFORMIXSERVER="+dbservername+"!user={userid}!password={password}";
                    // jdbc:informix-sqli://localhost:40421/export:INFORMIXSERVER=cargool1
                    preQEServerName      = "jdbc:informix-sqli://"+ip+":"+port+"/"+dbname+":INFORMIXSERVER="+dbservername;
                    // com.informix.jdbc.IfxDriver
                    driver = "com.informix.jdbc.IfxDriver";
                    break;
                case "MySQL":
                    // !com.mysql.jdbc.Driver!jdbc:mysql://172.20.9.170:3306/hego
                    jdbcConnectionString = "!com.mysql.jdbc.Driver!jdbc:mysql://"+ip+":"+port+"/"+dbname;
                    // jdbc:mysql://172.20.9.170:3306/customer
                    preQEServerName      = "jdbc:mysql://"+ip+":"+port+"/"+dbname;
                    // com.mysql.jdbc.Driver
                    driver = "com.mysql.jdbc.Driver";
                    break;
                case "ORACLE":
                    // !oracle.jdbc.driver.OracleDriver!jdbc:oracle:thin:@//localhost:50000/tmsddb2
                    jdbcConnectionString = "!oracle.jdbc.driver.OracleDriver!jdbc:oracle:thin:@//"+ip+":"+port+"/"+dbname;
                    // jdbc:oracle:thin:@//localhost:50000/tmsddb2
                    preQEServerName      = "jdbc:oracle:thin:@//"+ip+":"+port+"/"+dbname;
                    // "oracle.jdbc.driver.OracleDriver"
                    driver = "oracle.jdbc.driver.OracleDriver";
                    break;
                default:
                    break;
                }

                table.setQualifiedName(new_qualifierName);

                ConnectionInfo connInfo = new ConnectionInfo();                

                PropertyBag innerProp = new PropertyBag();
                innerProp.put("JDBC Connection String", jdbcConnectionString);
                innerProp.put("PreQEServerName",   preQEServerName);
                innerProp.put("Server Type", "JDBC (JNDI)");
                innerProp.put("Database DLL", "crdb_jdbc.dll");
                innerProp.put("Database", dbname);
                innerProp.put("Database Class Name", driver);
                innerProp.put("Use JDBC", "true");
                innerProp.put("Database Name", dbname);
                innerProp.put("Server Name", preQEServerName);
                innerProp.put("Connection URL", preQEServerName);

                connInfo.setAttributes(innerProp);
                connInfo.setUserName(mdlLogin.dbUsername);
                connInfo.setPassword(mdlLogin.dbPassword);

                table.setConnectionInfo(connInfo);
                rpt.getSubreportController().getSubreport(str).getDatabaseController().setTableLocation(table, subTables.getTable(j));
            }
        }//////////////////////////

//            rpt.getPrintOutputController().export(ReportExportFormat.RTF)

        ReportViewerBean viewer = new ReportViewerBean();
        viewer.init(new String[0], null, null, null);
        viewer.setHasGroupTree(false);
        viewer.setReportSource(rpt.getReportSource());
        viewer.setHasExportButton(false);
        viewer.setShowLogo(false);
        viewer.start();
        frmReportPanel panel = new frmReportPanel(rpt,fileName.replace(".rpt", ""));

        Component[] components = viewer.getContentPane().getComponents();

        panel.setLayout(new BorderLayout());

        panel.add(components[0], BorderLayout.NORTH);
        panel.add(components[1], BorderLayout.CENTER);

        clsMain.openTab(fileName.replace(".rpt", ""), panel);

    } catch (HeadlessException | ReportSDKExceptionBase | PropertyVetoException exception) {
        Logger.getLogger(frmReportList.class.getName()).log(Level.SEVERE, null, exception);
        utilErrorHandler.printError(exception.toString(), exception.getMessage(), M_STRPANELNAME, "PrintReport");
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T09:24:13.840

我能够通过这些代码来回答它

```
ParameterFieldController paramController=rpt.getDataDefController().getParameterFieldController();
paramController.setCurrentValue("",parameterField,Integer.parseInt(parameterValue)); 
```

# c# - 请求的操作不满足与对象类相关的一个或多个约束？

> ID：13739155
> 
> 赞同：1
> 
> 时间：2012-12-06T07:51:18.070
> 
> 标签：c#, active-directory

我在 C# 中开发项目，用于在 AD 中创建用户。

我创建了一个用户，我想为这个用户创建一个属性，比如“mobilenumber”。

当我创建这个时，会发生以下错误。

这是我的代码。

```
 if (userDetails.GetUnderlyingObjectType() == typeof(DirectoryEntry))
        {
            dEntry = (DirectoryEntry)userDetails.GetUnderlyingObject();
            if (User.UsrPassword != null && User.UsrPassword.Trim() != "")
            {
                if (dEntry.Properties.Contains("mobilenumber"))
                {
                    Console.WriteLine("mobilenumberAttribute:Already created");
                    dEntry.Properties["mobilenumber"][0] = User.UsrPassword;
                    dEntry.CommitChanges();
                }
                else
                {
                    Console.WriteLine("mobilenumber Attribute: Adding");

                    dEntry.Properties["mobilenumber"].Add(User.UsrPassword);
                    dEntry.CommitChanges();
                }
                userDetails.Save();
                result = true;
            }
        } 
```

`The requested operation did not satisfy one or more constraints associated with the class of the object. (Exception from HRESULT: 0x80072014)`

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T12:05:02.160

创建属性？你的意思是像扩展架构？您不能仅通过将其添加到对象来做到这一点。正如您[在此处](http://msdn.microsoft.com/en-us/library/windows/desktop/ms675090%28v=vs.85%29.aspx)看到的，没有“mobilenumber”这样的属性。也许您想要`otherMobile` [(Phone-Mobile-Other)](http://msdn.microsoft.com/en-us/library/windows/desktop/ms679092%28v=vs.85%29.aspx)或`mobile` [(Phone-Mobile-Primary)](http://msdn.microsoft.com/en-us/library/windows/desktop/ms677119%28v=vs.85%29.aspx)？

你想做什么？为什么要在用户对象中保留密码的副本。如果用户更改它，您的副本将不会更新。如果您需要它以某种方式通知用户，请做一些不同的事情，例如通知他的主管......只是一个想法。

# asp.net - 用于 QnA 的 .net cms，可与现有 Web 表单应用程序集成

> ID：13739159
> 
> 赞同：-1
> 
> 时间：2012-12-06T07:51:27.943
> 
> 标签：asp.net, content-management-system

我有一个在 asp.net 3.5 中构建的工作网络表单 asp.net 网站。

我想要一个 QnA 部分或页面或模块在我的网站。

我已经在 .net 中搜索了可以满足此要求并且**可以与我现有的网站（不在 MVC 中）集成**但没有找到合适的 cms。

你能指导我一些cms吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T07:56:40.353

如果您的应用程序中有用户控件，我建议您使用 dot net nuke。您可以在 DNN 模块中轻松转换用户控件。

# performance - Google BigQuery 运行查询缓慢

> ID：13739160
> 
> 赞同：2
> 
> 时间：2012-12-06T07:51:32.377
> 
> 标签：performance, google-bigquery, large-data-volumes

我正在对大约 84GB 的日志数据的数据集运行一个简单的 bigQuery。

查询大约需要 110 秒才能完成。对于这种大小的数据集，这是否正常？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T18:55:31.207

经过进一步调查，您的桌子看起来很碎片化。我们通常会运行一个合并进程来防止这种情况，但在我们验证错误修复时它已经关闭了几个星期。我已经重新启动了聚结器并在你的桌子上运行它。如果您仍然看到性能不佳，请告诉我。

As a best practice, you may be better off importing somewhat less frequently in larger chunks, or splitting your data into time-based tables. BigQuery isn't really designed to handle high-volume small imports to the same table.

# sencha-touch - 如何在 Sencha touch 2.1 中添加面板作为列表项？

> ID：13739167
> 
> 赞同：1
> 
> 时间：2012-12-06T07:52:12.797
> 
> 标签：sencha-touch, sencha-touch-2, sencha-touch-2.1

我正在尝试将列表（及其项目）动态添加到我的容器中。我需要列表项来包含带有标题栏、图像和更多内容的面板，而不是简单的 HTML 模板。

为此，我正在加载商店数据并在其回调中创建列表和项目数组。然后我将项目添加到列表中并将列表添加到容器中，但最终结果只是最后一个面板可见，而不是所有面板的滑动列表。

这是我的代码：

```
 var vLists = [];
    this.load({
        callback: function(records, operation, success) {
            var hccontainer = Ext.getCmp('hccontainer');
            this.each(function(record){
                var sid = 'styleStore'+record.get('id');
                var styleTemplate = eval('tpls.styleTemplate_' + record.get('id'));
                vLists.push({
                    xtype: 'panel',
                    scrollable: 'false',
                    layout: 'fit',
                    cid : record.get('id'),
                    ctype : record.get('type'),
                    cname : record.get('name'),
                    stid : sid,
                    tp : styleTemplate,
                    items: [
                        {
                            xtype : 'titlebar',
                            title : record.get('name'),
                            docked : 'top',
                            cls : 'x-toolbar-transparent-top'
                        },
                        {
                            xtype : 'image',
                            src : record.get('image'),
                        }
                    ]
                });
            });
            //hccontainer.remove(Ext.getCmp('hc'), true);
            Ext.getCmp('hc').destroy();
            var hc1 = Ext.create('Ext.dataview.List', {
                layout : 'fit',
                config: {
                    direction: 'horizontal',
                    id : 'hc'
                }
            });
            hc1.setItems(vLists);
            Ext.getCmp('hccontainer').add(hc1);
        },
        scope: this
    }); 
```

这是添加项目的正确方法还是我遗漏了一些东西。

**PS**如果我使用轮播而不是列表，这很好用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T01:10:07.887

Carousel 比 List 更像是一个布局组件。看起来您不需要使用列表，例如，我没有看到任何用于项目点击的处理程序。如果您想避免使用模板，则不应使用列表。相反，只需制作一个具有类似列表布局的组件。我会使用具有 vbox 布局的容器，水平拉伸并具有静态高度。然后，您可以将所需的任何项目配置放入其中。

# char - _bstr_t 到 char*，惊人的结果

> ID：13739168
> 
> 赞同：5
> 
> 时间：2012-12-06T07:52:16.623
> 
> 标签：char, bstr

第一的：

```
LPCTSTR asdfsdf = (LPCTSTR)(_bstr_t)v;
printf("%s\n", asdfsdf); 
```

第二：

```
printf("%s\n", (LPCTSTR)(_bstr_t)v); 
```

它们是相同的，但第一个条件会导致代码不可读

为什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-06T07:57:45.407

该类将 BSTR 封装在 C++ 类中[`_bstr_t`。](http://msdn.microsoft.com/en-us/library/zthfhkd6(v=vs.71).aspx)在你的第一个例子中：

```
LPCTSTR asdfsdf = (LPCTSTR)(_bstr_t)v; 
```

你正在创建一个`_bstr_t`对象，从中提取`LPCTSTR`出来，但是临时`_bstr_t`对象被破坏了。任何`asdfsdf`指向的东西现在都被释放了，不能再使用了。

在你的第二个例子中

```
printf("%s\n", (LPCTSTR)(_bstr_t)v); 
```

临时`_bstr_t`对象直到调用*之后*才被破坏，因此使用该值`printf()`没有问题。`LPCTSTR`

# javascript - 我们如何在悬停在子导航上时停止 Jquery 动画？

> ID：13739169
> 
> 赞同：1
> 
> 时间：2012-12-06T07:52:22.797
> 
> 标签：javascript, jquery, html, css

**要求：**

**示例链接：http:** [//jtstratford.advisorproducts.com/overview](http://jtstratford.advisorproducts.com/overview)

在此页面上，当我们将鼠标悬停在主导航上时，它们下方的黄线会随着您的鼠标进行动画或移动，这没关系。

但是我们可以让它只在您将鼠标悬停在主要导航上时移动吗？如果说我将鼠标悬停在 Investments 上并转到 Advisors v Brokers 的子导航，黄色条应保留在 Investments 下，它不会随着子导航移动。

**下面是JS代码：**

```
// DOM Ready
$(function () {

    var $el, leftPos, newWidth;

    /* Add Magic Line markup via JavaScript, because it ain't gonna work without */
    $("#magicLine").append("<li id='magic-line'></li>");

    /* Cache it */
    var $magicLine = $("#magic-line");

    $magicLine
        .width($(".selectednav").width())
        .css("left", $(".selectednav a").position().left)
        .data("origLeft", $magicLine.position().left)
        .data("origWidth", $magicLine.width());

    $("#magicLine li").find("a").hover(function () {
        $el = $(this);
        leftPos = $el.position().left;
        newWidth = $el.parent().width();

        $magicLine.stop().animate({
            left: leftPos,
            width: newWidth
        });
    }, function () {
        $magicLine.stop().animate({
            left: $magicLine.data("origLeft"),
            width: $magicLine.data("origWidth")
        });
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T08:16:51.953

您的选择器错误，您正在查询#magicLine 内的 li 标记中的所有锚点。这可能有效：

```
$("#magicLine > li").children("a") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T07:58:49.033

我相信最好的方法可能是给你的主导航中的每个元素（主页、关于、投资等）一个`class`. 那么也许只有当您悬停的元素具有该特定类时，您才能制作动画。`.hasClass()`您可以通过在 jQuery 中调用 a 来做到这一点。

IE

```
if (element.hasClass("primary")) {
//want to animate magic bar
} 
```

# scala - Slick：autoInc 在 MultiDBCakeExample 示例中是如何工作的？

> ID：13739182
> 
> 赞同：4
> 
> 时间：2012-12-06T07:53:23.517
> 
> 标签：scala, slick

我试图了解 Slick 的工作原理以及如何使用它......并查看他们在 GitHub 中的示例，我最终在[MultiDBCakeExample.scala](https://github.com/slick/slick-examples/blob/master/src/main/scala/scala/slick/examples/lifted/MultiDBCakeExample.scala)中得到了这个代码片段：

```
trait PictureComponent { this: Profile => //requires a Profile to be mixed in...
  import profile.simple._ //...to be able import profile.simple._

  object Pictures extends Table[(String, Option[Int])]("PICTURES") {
    ...

    def * = url ~ id

    val autoInc = url returning id into { case (url, id) => Picture(url, id) }

    def insert(picture: Picture)(implicit session: Session): Picture = {
      autoInc.insert(picture.url)
    }
  }
} 
```

我想该`*`方法返回表中的一行，而`autoInc`应该以某种方式提供自动递增实体 ID 的功能......但老实说，我在理解这段代码时遇到了一些麻烦。`returning`指的是什么？返回什么`autoInc`？

我查看了 Slick 文档，但找不到有用的信息。任何帮助将非常感激 ;-）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-06T11:18:23.490

因为这`autoInc`可能会令人困惑，所以我将为您提供一个工作示例（请注意，我的数据库是 PostgreSQL，所以我需要使用该 hack`forInsert`来使 Postgresql 驱动程序增加 auto-inc 值）。

```
case class GeoLocation(id: Option[Int], latitude: Double, longitude: Double, altitude: Double)

/**
 * Define table "geo_location".
 */
object GeoLocations extends RichTable[GeoLocation]("geo_location") {
  def latitude = column[Double]("latitude")
  def longitude = column[Double]("longitude")
  def altitude = column[Double]("altitude")

  def * = id.? ~ latitude ~ longitude ~ altitude <> (GeoLocation, GeoLocation.unapply _)
  def forInsert = latitude ~ longitude ~ altitude <> ({ (lat, long, alt) => GeoLocation(None, lat, long, alt) },
    { g: GeoLocation => Some((g.latitude, g.longitude, g.altitude)) })
} 
```

我的 RichTable 是一个抽象类，以便不为我拥有的每个表声明 id，而只是扩展它：

```
abstract class RichTable[T](name: String) extends Table[T](name) {
  def id = column[Int]("id", O.PrimaryKey, O.AutoInc)

  val byId = createFinderBy(_.id)

} 
```

并像这样使用它：

```
GeoLocations.forInsert.insert(GeoLocation(None, 22.23, 25.36, 22.22)) 
```

因为你传递`None`了 for `id`，所以当 Slick 插入这个新实体时，它将由 PostgreSql 驱动程序自动生成。自从我开始使用 Slick 以来，我已经有几个星期了，我真的推荐它！

**更新**：如果您不想使用`forInsert`投影，另一种方法是以下 - 在我的情况下，实体是`Address`.

在创建模式时为每个表创建序列：

```
session.withTransaction {
  DBSchema.tables.drop
  DBSchema.tables.create
  // Create schemas to generate ids too.
  Q.updateNA("create sequence address_seq")
} 
```

定义一个使用序列生成 id 的方法（我`once`在`RichTable`类中定义了这个：

```
 def getNextId(seqName: String) = Database { implicit db: Session =>
    Some((Q[Int] + "select nextval('" + seqName + "_seq') ").first)
  } 
```

并在映射器覆盖`insert`方法中，如：

```
 def insert(model : Address) = Database { implicit db: Session =>
    *.insert(model.copy(id = getNextId(classOf[Address].getSimpleName())))
  } 
```

现在，您可以`None`在进行插入时通过，并且此方法将为您做得很好...

# eigenvector - 使用主要特征值计算特征向量

> ID：13739186
> 
> 赞同：1
> 
> 时间：2012-12-06T07:53:46.803
> 
> 标签：eigenvector

我想问一些关于特征向量中心性的问题。我必须使用幂迭代计算特征值。这是我计算特征值的代码：

```
 v=rand(165,1);
    for k=1:5
        w = data_table*v;
        lamda = norm(w);
        v = w/lamda;

    end 
```

当我得到一个特征值时，我很困惑使用我得到的单个特征值来计算特征向量得分。例如，在我计算特征值的代码中，我得到显性特征值 = 78.50。有了这个特征值分数，我想计算特征向量分数。通常，我们总是使用代码计算特征值和特征向量，例如： [U,V] = eig(data_matrix); 但是，该代码的结果：

```
v = 
-167.59 0   0

0   -117.51 0

0   0   -112.0

V = 
0.0404505   0.04835455  -0.01170

0.0099050   -0.0035217  -0.05561

0.0319591   -0.0272589  0.018426 
```

根据结果​​，我们使用三个特征值得分计算特征向量。我的问题是如何计算特征向量得分，但只使用我们在幂迭代代码中获得的一个特征值得分？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T12:07:51.003

幂迭代找到主要特征向量，即具有最大特征值的特征向量。

如果你从

```
v=ones(165,1)/165;     % initialisation
for i=1:5              % 5 iterations
    w=data_table*v;    % assuming size(data_table) = [165 165]
    v=w/norm(w);
end 
```

并且您的算法在 5 次迭代中收敛，则 v 是您的主要特征向量；

另外，我将从一个较小的示例开始测试您的代码。您的 matlab 调用`[U,V] = eig(data_matrix);`令人困惑，因为 V 应该是大小为 [165 165] 的对角矩阵，而不是大小为 [3 3] 的完整矩阵；

尝试这个：

```
X=[1 1 1;1 1 2;1 2 2]
[U,V]=eig(X)
X*U(:,3)
U(:,3)*V(3,3) 
```

查看 matlab 输出中最大的特征值是多少，即 (V3,3)，以及对应的向量 U(:,3)。

你 cat 使用幂迭代来找到这个特征向量：

```
 v=ones(1,3)
 w=v*X;v=w/norm(w)
 w=v*X;v=w/norm(w)
 w=v*X;v=w/norm(w)
 w=v*X;v=w/norm(w) 
```

# magento - 分组产品页面中的 Magento 自定义选项。价格不反映选择

> ID：13739189
> 
> 赞同：1
> 
> 时间：2012-12-06T07:53:58.713
> 
> 标签：magento, magento-1.7

我在 magento 商店有一个定制的分组产品页面。通过简单地使用此代码编辑 grouped.phtml 文件，我可以将自定义选项值放在该分组产品页面中。

```
foreach($product->getOptions() as $o):
  $values = $o->getValues(); 
```

我可以使用此代码发布自定义选项标题及其值；

```
echo $v->getData('title');
echo ('+').$v->getData('price'); 
```

但问题是我无法反映自定义选项选择的价格。

当我浏览 view.phtml 文件时，我可以看到一个函数正在调用自定义选项字段，以便反映价格。

所以我像这样重写我的自定义选项选择框代码

```
<select name="sel_<?php echo $_item->getId()?>" id="sel_<?php echo $_item->getId()?>" class=" product-custom-option" title="" onchange="opConfig.reloadPrice()">
      <option value="">-- Please Select --</option>
  <?php  foreach ($values as $v):?>
      <option value="<?php echo $v->getData('title');echo ('+').$v->getData('price');?>">
        <?php echo $v->getData('title');echo ('+').$v->getData('price');?>
      </option>
  <?php endforeach;?>
</select> 
```

在这里，我在选择框中调用了一个 onchange 函数 opConfig.reloadPrice()。但价格仍然没有变化。可能会出现哪些问题？

# sql - 我必须得到查询结果中的第二大计数

> ID：13739190
> 
> 赞同：3
> 
> 时间：2012-12-06T07:54:04.680
> 
> 标签：sql, sql-server, sql-server-2008

我正在使用一个测试数据库 Advetureworks，我想在结果中获得第二高的计数，但我没有得到它。

我必须对以下查询进行哪些更改才能获得所需的结果？

```
select pa.City,psp.Name,COUNT(he.EmployeeID) as emp_count
from HumanResources.EmployeeAddress hea
join HumanResources.Employee he on he.EmployeeID=hea.EmployeeID
join Person.Contact pc on pc.ContactID=he.ContactID
join Person.Address pa on pa.AddressID=hea.AddressID
join Person.StateProvince psp on psp.StateProvinceID=pa.StateProvinceID
where COUNT(he.EmployeeID) < (select max(count(he.employeeid)) from HumanResources.Employee)

group by pa.City,psp.Name 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-06T08:37:36.427

你可以使用排名功能，试试这样：

```
;WITH a AS (
    select pa.City,psp.Name,COUNT(he.EmployeeID) as emp_count
    from HumanResources.EmployeeAddress hea
    join HumanResources.Employee he on he.EmployeeID=hea.EmployeeID
    join Person.Contact pc on pc.ContactID=he.ContactID
    join Person.Address pa on pa.AddressID=hea.AddressID
    join Person.StateProvince psp on psp.StateProvinceID=pa.StateProvinceID
    group by pa.City,psp.Name   
), b AS (
    SELECT  *,
            ROW_NUMBER() OVER (ORDER BY emp_count DESC) num
    FROM    a
)
SELECT  *
FROM    b
WHERE   b.num = 2 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-06T08:51:27.483

我知道 Ivan G 发布了一种 ROW_NUMBER 方法，但我永远记不住语法，所以这里有一个稍微不同的方法：

```
with top_cities (City, Name, emp_count) as
(
  select top 2
    pa.City,psp.Name,COUNT(he.EmployeeID) as emp_count
  from 
    HumanResources.EmployeeAddress hea
    join HumanResources.Employee he on he.EmployeeID=hea.EmployeeID
    join Person.Contact pc on pc.ContactID=he.ContactID
    join Person.Address pa on pa.AddressID=hea.AddressID
    join Person.StateProvince psp on psp.StateProvinceID=pa.StateProvinceID        
  group by 
    pa.City,psp.Name
  order by 
    emp_count desc
)
select top 1 * from top_cities order by emp_count asc 
```

# objective-c - 一条 Objective-C 消息被发送到地址为 0x75d52a0 的已释放对象（僵尸）

> ID：13739191
> 
> 赞同：6
> 
> 时间：2012-12-06T07:54:07.543
> 
> 标签：objective-c, ios, xcode, dealloc, nszombie

我对 iOS 开发比较陌生，因此感谢您帮助找出我遇到的错误的根本原因。

我尝试使用 Instruments（即 Allocations-Zombie Profiler）调试错误，但我无法理解所显示的调用堆栈。

这是用户界面的链接方式：TabBarController -> NavigationController -> TopPlacesTableViewController -> RecentPhotosTableViewController -> PhotoViewController

当我单击最后一个视图（即 PhotoViewController 的那个）中的返回按钮时，会发生错误。这个动作应该显示以前的RecentPhotosTableViewController，但访问了一个未知的已释放对象，有时在viewWillAppear 和ViewDidAppear 事件之间。

此外，我有一个 GenericTableViewController，它是 TopPlacesTableViewController 和 RecentPhotosTableViewController 的父级。子级在父级中设置 NSMutableArray 属性，该属性是加载到子级视图中的数据。

我目前正在使用 iOS6 和 XCode4.5。

[更新：在控制台中，显示了这一行 - “[UIView _forgetDependentConstraint:]: message sent to deallocated instance xxx”]。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T08:11:38.083

我觉得你没有使用 ARC，并且你没有保留传递你以前的对象。与此同时，前一个对象被释放，然后您访问它。

您可以重构代码以使用 ARC 或保留或自动释放。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-06T08:59:08.213

转到产品>编辑方案>诊断点击然后检查启用僵尸对象

创建一个断点并逐步了解哪个对象被释放，它可能指向您的对象的指针已被删除，然后操作系统已释放您的对象。

# java - Java 正则表达式用特殊字符和句点替换特殊字符、一个或多个空格和句点

> ID：13739199
> 
> 赞同：1
> 
> 时间：2012-12-06T07:54:28.453
> 
> 标签：java, regex

我有以下字符串：

```
See it now! .5..%..off your purchase!.Only today. 
```

我希望它是

```
See it now! 5% off your purchase! Only today. 
```

这是：

每个特殊字符后跟零个或多个空格和一个或多个句点，将被替换为特殊字符和一个空格。如果是数字和 2 个句点，它将仅替换为空格

我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T08:43:48.017

\试试这个

```
String resultString = subjectString.replaceAll("\\B[ .]+", " "); 
```

这匹配一个或多个以非单词边界开头的空格或句点。然后将它们替换为单个空格。

**编辑**

基于修改后的问题：

```
String resultString = subjectString.replaceAll("\\B[ .]+|(\\d)\\.+", "$1 "); 
```

还匹配一个数字后跟一个或多个句点。句点替换为一个空格。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T07:57:58.527

这应该有效：

```
String resultString = subjectString.replaceAll(
    "(?x)      # verbose regex                             \n" +
    "(\\p{P})  # Match and capture a punctuation character \n" +
    "\\ *      # Match zero or more spaces                 \n" +
    "\\.       # Match a dot", "$1 "); 
```

# iphone - 不调用 NSXMLParserDelegate 方法

> ID：13739200
> 
> 赞同：0
> 
> 时间：2012-12-06T07:54:42.573
> 
> 标签：iphone, xml, ios5, nsxmlparser, asiformdatarequest

嗨，我正在解析一个 xml 文件，我也得到了存储在 responseString 中的响应。我的问题是委托方法没有被调用，这是我的解析代码

```
 -(void)getData
{
     NSURL *url = [NSURL URLWithString:@"http://quizpro.testshell.net/api/quiz/4"];
 NSData *data = [NSData dataWithContentsOfURL:url];  // Load XML data from web

 NSString *applicationDocumentsDir = 
 [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) lastObject];
 NSString *storePath = [applicationDocumentsDir stringByAppendingPathComponent:@"quiz.xml"];

 NSLog(@"store path is %@",storePath);

 [data writeToFile:storePath atomically:TRUE];

ASIFormDataRequest *request = [ASIFormDataRequest requestWithURL:url];

request.delegate=self;

[request startSynchronous];

NSError *error = [request error];

if (!error)
{
     NSData *responseData=[request responseData];

     NSString *data  =[[[NSString alloc]initWithData:responseData encoding:NSUTF8StringEncoding] autorelease];

     NSString *usableXmlString = [data stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceAndNewlineCharacterSet]];

     NSLog(@"usableXmlString is %@",usableXmlString);

     NSData *usableData = [usableXmlString dataUsingEncoding:NSUTF8StringEncoding];

     NSXMLParser *xmlParser = [[NSXMLParser alloc]initWithData:usableData];

    [xmlParser setDelegate:self];
    [xmlParser parse];

}   
}  

- (void)requestFinished:(ASIHTTPRequest *)request
{
NSLog(@"requestFinished method");

// Use when fetching text

NSString *responseString = [request responseString];  

** I get the entire data here ** 
NSLog(@"responseString is %@",responseString);

NSData *xData = [responseString dataUsingEncoding:NSUTF8StringEncoding];
//myCode.text = responseString;
//NSLog(@" response %@", responseString);

NSXMLParser *parser = [[NSXMLParser alloc] initWithData:xData];

[parser setDelegate:self];
[parser parse];
[parser release];
} 
```

我编写了如下的 NSXMLParser 委托方法

```
-(void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName attributes:(NSDictionary *)attributeDict
 {
 NSLog(@"parser/didStartElement");

 currentTag = elementName;

 if ([currentTag isEqualToString:@"questions"])
 {
     exams_object=[[ExamsObject alloc]init];
     NSLog(@"%@",currentTag);
 } 

  if ([currentTag isEqualToString:@"Question"])
 {
  exams_object=[[ExamsObject alloc]init];
 }

 if ([currentTag isEqualToString:@"Response"])
 {
 exams_object.responseArray=[[NSMutableArray alloc]init];
 }
   NSLog(@"%@",currentTag);

 }  

-(void)parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName
 {
 NSLog(@"parser/didEndElement");

 if ([currentTag isEqualToString:@"questions"])
 {
     exams_object=[[ExamsObject alloc]init];
 } 

 if([elementName isEqualToString:@"Question"])
 {
 [mainArray addObject:exams_object];
 }

 }  

-(void)parser:(NSXMLParser *)parser foundCharacters:(NSString *)str
 {

 NSLog(@"parser/foundCharacters");

 if ([currentTag isEqualToString:@"questionText"])
 {
 [exams_object.questionArray addObject:str];
 } 
 if ([currentTag isEqualToString:@"responseText"])
 {
 [exams_object.responseArray addObject:str];
 }  
 } 
```

谢谢你帮助我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T09:34:31.770

检查您是否在 @interface 中添加了 NSXMLParserDelegate 并在您使用的类中设置 parser.delegate=self 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T06:32:38.663

您是否已将`NSXMLParserDelegate`和包含`ASIHTTPRequestDelegate`在您的`.h`文件中？

您正在调用该方法来解析来自`ASIHTTPRequest` Check the flow of Check the flow using 的委托的 XML `breakpoints`。

```
@interface yourClassName: NSObject <NSXMLParserDelegate, ASIHTTPRequestDelegate> 
```

还要检查这些 stackoverflow 问题

*   [问题 1](https://stackoverflow.com/questions/8649119/nsxmlparserdelegate-methods-not-being-called)
*   [问题2](https://stackoverflow.com/questions/5374763/objective-c-nsxml-parser-delegate-methods-never-get-called)

# python - 使用 Python 的多线程 UDP 服务器

> ID：13739204
> 
> 赞同：1
> 
> 时间：2012-12-06T07:55:22.583
> 
> 标签：python, networking, network-programming, udp

我想创建一个简单的视频流（实际上是图像流）服务器，可以管理不同的协议（TCP Push/Pull，UDP Push/Pull/Multicast）。

我设法让 TCP Push/Pull 与`SocketServer.TCPServer`该类一起工作，并`ThreadinMixIn`在不同的线程中处理每个连接的客户端。

但是现在我正在研究 UDP 协议，我刚刚意识到 ThreadinMixIn 每次调用`handle()`每个客户端查询都会创建一个线程（因为在 UDP 中没有诸如“连接”之类的东西）。

问题是我需要为所有客户端处理同一客户端的一系列查询。我怎么能做到这一点？

我看到我可以处理的唯一方法是拥有一个（客户端地址，处理线程）列表并将每个查询发送到匹配的线程（或者如果客户端尚未发送任何线程，则创建一个新的）。有没有更简单的方法来做到这一点？

谢谢 ！

PS：我不能为此使用任何外部或过于“高级”的库，因为它是一门旨在了解套接字如何工作的学校科目。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-06T13:31:32.350

看看[Twisted](http://twistedmatrix.com/)。这将消除从您的应用程序中执行任何线程调度的需要。您仍然必须将数据包与特定会话匹配才能处理它们，但这并不困难（为每个客户端使用一个端口并基于该端口进行调度，或者要求会话中的数据包始终来自同一地址并且使用对等地址，或使用解决此问题的现有协议之一，例如 SIP）。

# json - 如何在将 JSON 对象转换为 c# 时替换 $ 而实际上不更改 $ 存在的特定字段的名称？

> ID：13739212
> 
> 赞同：5
> 
> 时间：2012-12-06T07:56:09.117
> 
> 标签：json, c#-4.0

当我将 Json 对象转换为 c# 时，我遇到了一个问题，其中我的 Json 有带有 $ 符号的字段（例如：$t）。但是 c# 不接受带有特殊字符的字段。如果我尝试用我的 c# 代码中的任何其他字母替换 $，由于命名更改，我无法从第 3 方获取数据。

我该如何解决这个问题？

json字符串：

```
"author": [(1)
{
"name": {
"$t": "theabctv"
},-
"uri": {
 $t": "http://gdata.abc.com/feeds/api/users/theabctv"
},-
"yt$userId": {
"$t": "tCUABCCT7wYG1PMCpw"
}-
}-
],- 
```

C#代码：-

```
public class Author2

{

public Name2 name { get; set; }
public Uri2 uri { get; set; }
public YtUserId __invalid_name__yt$userId { get; set; }
}
public class Name2
{
public string __invalid_name__$t { get; set; }
}

public class Uri2
{
public string __invalid_name__$t { get; set; }
}

public class YtUserId
{
public string __invalid_name__$t { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T04:05:14.777

NET 框架中无法用符号声明属性名称，这意味着如果不解析 JSON 数据，就无法在 JSON 对象和 C# 对象之间实现同构。您可以用任何给定的字符串（仔细选择）替换所有 $ 符号，管理后面代码中的数据，当您需要发送对象的 JSON 数据时应用反向替换。

# java - 图像到字节数组

> ID：13739216
> 
> 赞同：1
> 
> 时间：2012-12-06T07:56:49.417
> 
> 标签：java, image, image-processing

当图像（例如，jpg）转换为字节数组时，字节数组如何用新行编码？或者图像的长度和宽度如何在字节数组中表示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T08:09:23.820

图像元数据由相应的图像格式规范描述并存储在同一图像文件中，因此您需要检查相应的规范以了解如何确定该格式的图像尺寸。

[本页](http://www.anttikupila.com/flash/getting-jpg-dimensions-with-as3-without-loading-the-entire-file/)详细介绍了如何确定 JPEG 图像尺寸。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T08:14:34.807

这在很大程度上取决于用于编码图像的格式——不同的图像格式以非常不同的方式对图像数据进行编码。

幸运的是，您永远不需要关心——在大多数情况下，此类转换由库负责。例如对于Java，如果你想读一个写一个.jpg 文件，那么你应该只使用[ImageIO](http://docs.oracle.com/javase/6/docs/api/javax/imageio/package-summary.html)包而不用担心具体的表示。

# php - 使用 Javascript ajax 在 PHP 中进行多线程，可能吗？

> ID：13739218
> 
> 赞同：3
> 
> 时间：2012-12-06T07:57:05.490
> 
> 标签：php, javascript, ajax, multithreading, multiprocessing

我正在使用 PHP 作为服务器端开发基于 Html5、JavaScript (jQuery) 和 ajax 的游戏。现在游戏中的内容是，您可以根据工作持续时间为玩家分配不同类型的工作。假设我已将一项持续时间为 10 分钟的工作分配`JOB1`给一名玩家`PLAYER1`，并将另一项工作分配给其他持续时间为 30 分钟的`JOB2`玩家。`PLAYER2`方法，

```
PLAYER1 = JOB1(10MINS)
PLAYER2 = JOB2(30MINS) 
```

现在我想在 PHP 中创建多线程来并行处理这两个作业，并在每分钟完成该作业后将请求发送到客户端。

我知道在 PHP 中创建多线程有多种方法，我可以在使用 ajax 启动作业时将请求发送到 PHP 服务器以创建线程，但是如何将数据返回客户端并显示每分钟后的数据？

有没有可能？做同样事情的其他选择是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T08:43:46.633

我认为这更像是多处理而不是多线程的任务。

要创建另一个 PHP 线程，您可以使用以下内容`pcntl_fork`：

[http://php.net/manual/en/function.pcntl-fork.php](http://php.net/manual/en/function.pcntl-fork.php)

但是在请求/响应类型的情况下，例如 HTTP，您更有可能启动一个单独的进程，然后从客户端轮询它。

要使用 PHP 执行此操作，您将使用`&`操作符在 CLI 上创建另一个进程（仅限 Linux，如果您需要 Windows，请告诉我并更新答案），然后他使用以下任一方法对其进行轮询：

*   进程向其输出状态信息的文件，
*   一个数据库，同上，
*   或共享内存段： http: [//php.net/manual/en/book.shmop.php](http://php.net/manual/en/book.shmop.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T08:48:30.700

有一个名为“spork”的 php 库[https://github.com/kriswallsmith/spork](https://github.com/kriswallsmith/spork)是 pcntl_fork 函数的包装器。

它对我来说效果很好而且很稳定。

# salesforce - 如何在 Salesforce 中处理重复性假期

> ID：13739219
> 
> 赞同：1
> 
> 时间：2012-12-06T07:57:06.597
> 
> 标签：salesforce, apex-code, visualforce, force.com

在 Salesforce 中，我可以创建经常性假期，并基于我的顶级课程中的这一点，我想检查当天是否是假期。

这适用于正常的非经常性假期。但是，当我创建循环假期时，无法确定当前日期是否会落在任何循环日期。

假期对象的 ActivityDate 返回假期的开始日期。

有没有人检查过销售人员过去的经常性假期？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T10:15:57.787

这是我将如何处理这个问题。

创建一个函数，该函数将采用 RECURRENCESTARTDATE、RECURRENCEENDDATEONLY、RECURRENCETYPE、RECURRENCEINTERVAL、RECURRENCEDAYOFWEEKMASK、RECURRENCEDAYOFMONTH、RECURRENCEINSTANCE、RECURRENCEMONTHOFYEAR 等参数。

然后这个函数将从开始日期循环，并且永远迭代它会增加值直到日期>今天或日期> RECURRENCEENDDATEONLY

在这个循环中，您可以检查上面是否计算出今天的 == 日期。

一旦此功能准备就绪，就可以拉出所有经常性假期的列表。

并在每个列表项上调用上述函数。

如果您有任何问题，请告诉我。

# mysql - SQL中VARCHAR(x)和VARCHAR(y)的区别

> ID：13739222
> 
> 赞同：3
> 
> 时间：2012-12-06T07:57:21.057
> 
> 标签：mysql, sql, database, database-design, varchar

我了解到 VARCHAR 占用了唯一需要的内存，而 CHAR 则无论是否需要，它总是占用相同数量的内存。

**我的问题：**假设我有一个字段 VARCHAR(50)，我知道如果它需要存储 30 个字符，它只会占用 30 个字节并且不会超过（假设 1 个字符占用一个字节）。那么为什么我还要提到 50 或 30 或任何上限，因为它只会占用所需的内存。

**更新：**为什么我必须提到上限，因为不会占用无用的内存？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T07:59:53.840

你不会的。你会成功`VARCHAR(30)`的。这大约是允许的最大字符数。那么，为什么还要让一个包含 30 个字符的列接受最多 50 个字符呢？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T12:31:31.470

> 更新：为什么我必须提到上限，因为不会占用无用的内存？

如果您使用类似的东西来清理您的输入，`final_value = left(provided_value, 30)`那么这对您的数据库来说不是问题。`varchar(255)`如果您愿意，可以将其设置为。

设置最大限制的想法是确保您不会错误地发送比实际计划更多的字符。

1.  将来代码维护调用每个表的每一列的数据大小限制将是一个痛苦。无论如何，您都需要这样做，但是将您的表定义视为有关该信息的单一来源。

2.  是否会仅从您的应用程序或网站中的一段代码将表写入 ( `insert`/ )？`update`如果数据库有另一个接口，比如一个 REST API 侦听器，如果你不再输入相同的值，你就会遇到非统一数据的问题——这正是 db 能够防止的。

3.  If a coding error (or hack) bypasses your app/website controls for data (size limits, or worse) then at least your db will still be maintaining the data correctly.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T08:03:40.337

为了使事情变得动态，您使用 VARCHAR(50)，因为将来可能会超过字符串大小，并且您知道最大大小可以是 50，但是对于常量，您可以使用 CHAR(30)，这意味着大小字符串总是 30 ，如果大小超过或减少，我的 sql 将报告异常

看看 [http://dev.mysql.com/doc/refman/5.0/en/char.html](http://dev.mysql.com/doc/refman/5.0/en/char.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-06T08:08:19.700

您可以使用 VARCHAR(50) 或 VARCHAR(30)。这不是问题，但如果它是动态的，我们就无法判断极限。

在这种情况下，我们采取最大限制。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-06T08:11:45.730

当内存使用是您唯一关心的问题时，您可以为 varchar 提供任意大的数字。但是，如果您想确保保持上限，则将其作为 varchar 的最大值。

# c - OpenSSH 失败

> ID：13739224
> 
> 赞同：1
> 
> 时间：2012-12-06T07:57:28.250
> 
> 标签：c, ssh, openssh, netbsd

我在一个项目中使用[OpenSSH version13 。](http://opensource.apple.com/source/OpenSSH/OpenSSH-13/openssh/nchan.c)然而，当我们尝试使用 ssh 连接到产品时，[nchan.c 时不时地返回一个错误，我们在产品中得到以下打印，然后连接关闭。](http://opensource.apple.com/source/OpenSSH/OpenSSH-13/openssh/nchan.c)

```
channel 0: rcvd eof
output open -> drain
channel 0: obuf empty
channel 0: close_write
channel 0: output drain -> closed 
```

所有这些输出都来自`nchan.c`. 至少对我来说，仅仅阅读代码并尝试查看可能发生的事情似乎是不可能的！有谁知道为什么`OpenSSH`会打印此错误消息并关闭连接？我希望有人非常熟悉 OpenSSH 实现，为我指明正确的方向！

我`python`用来连接到产品，更具体地说是`python pexpect module`. 我建立了一个 SSH 连接，使用用户名、密码登录，然后执行一些命令并检查输出。这在大多数情况下都可以正常工作，但如前所述，连接时不时地失败。上面提供的输出可以在产品中看到，并且从产品`pexpect`中收到（文件结束）的异常引发`EOF`（意味着无法建立连接）。这几乎是我得到的所有打印输出。我希望有人能理解为什么 OpenSSH 不想建立连接！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-04T13:20:14.263

当 SSH 调试 (-v) 无法提供足够的输出时，我总是在调试模式下启动 sshd 并直接从 sshd 控制台观看。它往往会就根本原因给出更多反馈。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-06T13:42:12.480

如果您确实使用的是您链接到的 OpenSSH 版本，那么您使用的是过时的版本。

最新版本的 OpenSSH nchan.c 文件可以在这里找到：[http ://www.openbsd.org/cgi-bin/cvsweb/src/usr.bin/ssh/nchan.c?rev=1.63;content-type= text%2Fx-cvsweb-markup](http://www.openbsd.org/cgi-bin/cvsweb/src/usr.bin/ssh/nchan.c?rev=1.63;content-type=text%2Fx-cvsweb-markup)并且您可以注意到版本的差异：1.63（日期为 2010/01/26）与 1.32（日期为 2001/10/10）。

请确保您升级到最新版本的 OpenSSH - 我怀疑您偶然发现了一个很久以前就已更正的错误。

# jquery - 在 HTML 中缩放/调整 SVG

> ID：13739226
> 
> 赞同：0
> 
> 时间：2012-12-06T07:57:34.507
> 
> 标签：jquery, html, svg

我在 html 中使用 svg 徽标来显示它。但这个标志似乎比它看起来要大得多。我想按比例将它缩小到 100px 的高度和宽度。我该怎么办？

这是SVG代码：

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!-- Created with Inkscape (http://www.inkscape.org/) -->

<svg
   xmlns:dc="http://purl.org/dc/elements/1.1/"
   xmlns:cc="http://creativecommons.org/ns#"
   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
   xmlns:svg="http://www.w3.org/2000/svg"
   xmlns="http://www.w3.org/2000/svg"
   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"
   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"
   preserveAspectRatio="xMinYMin meet"
   viewPort="0 0 100 29"
   width="400"
   height="114.38815"
   id="svg2"
   version="1.1"
   inkscape:version="0.48.2 r9819"
   sodipodi:docname="Accenture.svg">
  <title
     id="title4080">Logo of Accenture</title>
  <defs
     id="defs4">
    <clipPath
       id="clipPath3441"
       clipPathUnits="userSpaceOnUse">
      <path ................. 
```

这是我正在使用的 HTML 代码：

```
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1"> 
        <link rel="stylesheet" href="css/checkbox.css"/>
        <link rel="stylesheet" href="css/jquery.mobile-1.1.1.css" />

    <title>Homepage</title>
    <script src="scripts/jquery-1.8.2.min.js"></script>
    <script src="scripts/jquery.mobile-1.2.0.min.js"></script>
    <script type="text/javascript" src="scripts/xml.js"></script>
    <script type="text/javascript">
        $(document).ready(function() {
                /*alert("Home Page Ready");*/
        }); // document
    </script>

    <style>
        .headerTableClass{
            width: 100%;
        }
        .headerRowClass{
            background-color: white;
            width: 100%;
        }
        .tableCell{
            padding-bottom: 0px;
            padding-left: 0px;
            padding-right: 0px;
            padding-top: 0px;
        }
    </style>

</head>

<body>
    <!-- ******** Header **********-->
    <div data-role="header" style="padding-top: 0px">
        <div>
            <table id="headerTable" class="headerTableClass">
                <tr id="headerRow" class="headerRowClass">
                    <td class="tableCell"><embed src="mobileSVG/acclogo1.svg" style="height: 130px; width:500px;" type="image/svg+xml"></td>
                </tr>
            </table>
        </div>  
    </div><!-- /header -->

    <!-- ******** Content **********-->
    <div data-role="content" class="contentGrayBg">

    </div>  <!-- Content End -->

    <!-- ******** Footer **********-->
    <div data-role="footer">
        <div class="footerPadding">
            <label style="color: red; font-style: normal; font-size: 12px">Go to Accenture.com</label> <br/>
            <label style="font-size: 12px;">&copy; 2012 Accenture. All Rights Reserved.</label>
        </div>
    </div>  <!-- Content Footer -->
</body>
</html> 
```

谢谢，安基特。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-19T15:38:32.287

我在 Internet Explorer 中调整 svg 文件的大小时遇到​​了类似的问题，我通过在 svg 标头中定义一个视图框来解决它，如下所示：

```
viewBox="0 0 x y" 
```

其中“x”是画布的宽度，“y”是画布的高度。

我不确定这是否是您的问题，但是由于您的 svg 无法编译，我认为值得一试

# javascript - ExtJs 4 - 淡入应用程序视口

> ID：13739228
> 
> 赞同：5
> 
> 时间：2012-12-06T07:57:45.157
> 
> 标签：javascript, html, animation, extjs, extjs4.1

我正在尝试为我的应用程序创建一个简单的效果，即在 1-2 秒内将其从白色淡入，这样用户就不必看到它正在组装。

我几乎让它工作了，但有一些我似乎无法摆脱的闪烁。基本上，ExtJS 正在渲染我的 UI，然后立即将其隐藏，以便它可以淡入。

这是我的应用程序：

```
Ext.application({
    name : 'MyApp', // Application level namespace
    appFolder : 'js/myapp', // Directory path to app
    autoCreateViewport : true,

    launch : function() {    
        // fade in the viewport
        var form = Ext.ComponentQuery.query("viewport")[0];
        form.getEl().fadeIn({
            from : {
                opacity : 0
            },
            duration : 1000 
        });

    }
}); 
```

我可以做些什么来摆脱淡入淡出之前的初始抽签？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-06T08:03:58.487

大胆猜测我可以将视口的不透明度默认设置为 0 并且它起作用了：

```
Ext.define('MyApp.view.Viewport', {
    extend : 'Ext.container.Viewport',
    style: 'opacity: 0;',
    items : [ {
        xtype : 'someview'
    } ]
}); 
```

# linux - Mandriva Linux 中的 Redmine——设置电子邮件通知

> ID：13739229
> 
> 赞同：0
> 
> 时间：2012-12-06T07:57:52.413
> 
> 标签：linux, smtp, redmine

我在 Mandriva Linux 中使用 BitNami Redmine Stack。尝试发送电子邮件通知会导致错误消息 -

```
(503 5.5.1 Error: authentication not enabled ) 
```

Redmine配置文件configuration.yml：

```
production:
  email_delivery:
     delivery_method: :smtp
     smtp_settings:
       enable_starttls_auto: true
       address: ...ip...
       port: 25
       domain: redmine@....
       authentication: :plain
       user_name: ....
       password: ... 
```

什么配置错误？

我稍后更改了配置：

```
 production:
  email_delivery:
     delivery_method: :smtp
     smtp_settings:
       tls: true
       address: ...ip smtp..
       port: 25
       domain: ...
       authentication: :plain
       user_name: ...
       password: ... 
```

我添加了`tls: true`，现在错误是 -

```
(SSL_connect returned=1 errno=0 state=SSLv2/v3 read server hello A: unknown protocol) 
```

有一个文档 - [http://wiki.bitnami.org/Applications/BitNami_Redmine](http://wiki.bitnami.org/Applications/BitNami_Redmine) I've added `openssl_verify_mode: 'none'`and removed `tls: true`，然后返回原始错误消息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T12:20:24.367

“503 5.5.1”错误来​​自您的邮件服务器，表示它没有启用 SMTP 身份验证。您已将 Redmine 配置为使用 SMTP 身份验证，包括以下几行：

```
 authentication: :plain
   user_name: ....
   password: ... 
```

我相信您可以将“：plain”更改为“：none”来告诉Redmine不要使用身份验证。 [http://www.redmine.org/projects/redmine/wiki/EmailConfiguration](http://www.redmine.org/projects/redmine/wiki/EmailConfiguration)

另一种选择是将您的邮件服务器配置为需要身份验证，例如，请参阅以下注释，了解在 postfix 邮件服务器中的何处可以找到该设置：[http](http://www.redmine.org/boards/2/topics/9506) ://www.redmine.org/boards/2/topics/9506 。

最后一种选择，如果你有一个工作的本地 sendmail/mta，是使用它而不是 SMTP。在上面的第一个链接中有一个例子。

# c# - 屏幕共享c#的最佳方法是什么

> ID：13739236
> 
> 赞同：1
> 
> 时间：2012-12-06T07:58:03.353
> 
> 标签：c#, desktop, screensharing

我想开发一个小型通信应用程序，例如在服务器中托管一个 wcf 服务和一个桌面客户端。假设两个人通过 wcf 服务进行交互。当 client1 将数据发送到 client2 时，数据将转到 wcf 服务，wcf 服务会将数据推送到 client2。借助 wcf 服务轻松开发基本的通信应用程序。我想在我们的应用程序中添加一个实用程序，称为屏幕共享。

client1 会将他的桌面屏幕发送给 client2。我知道捕获桌面图像并将整个图像转换为字节数组然后将字节数组传递给client2和client2可以将字节数组转换为图像并将图像设置到他的图片框非常容易。如果我将整个图像发送过来网络每次然后性能会很差而且很慢。所以我需要知道人们如何开发应用程序以与他人共享屏幕，以及他们如何通过网络发送最少的数据。我搜索谷歌很多以获得实际标准，但没有。

所以我要求这个论坛的每个人都请用现实生活的概念详细讨论这个问题。

## 我的积分是

1) 告诉我如何只通过网络发送两个图像之间的差异，而不是一次又一次地发送整个图像。有很多可用的图像处理库可用于获取两个图像之间的差异，但我不知道哪一个是最好的并且会更快......只需几毫秒即可获得两个图像之间的差异。

2）在提取两个图像之间的差异后，我可以通过网络发送差异，但在客户端 2 端，我如何将差异应用于当前图像。这个非常重要。

3) 当图片框在客户端 2 频繁更新时，可能会出现明显的闪烁。我怎样才能避免这种闪烁，而我怎样才能实现客户端 2 端图像的平滑切换。

我需要帮助的方式，如果可能的话，请向我推荐带有代码片段的库，我可以用它来提取两个图像之间的差异。

还告诉我我可以使用什么例程在 client2 端的当前图像上应用差异。

再次告诉我如何在客户端 2 端实现图像的平滑切换而不会闪烁。

每秒都有很多学者访问这个论坛，所以我希望用 c# 中的伪代码进行详细的讨论。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T08:09:06.427

不要着手编写自己的[远程桌面协议](http://msdn.microsoft.com/en-us/library/windows/desktop/aa383015%28v=vs.85%29.aspx)的项目。首先使用现有的库。

*   [远程桌面服务 API](http://msdn.microsoft.com/en-us/library/windows/desktop/aa383459%28v=vs.85%29.aspx)
*   [终端](http://terminals.codeplex.com/)
*   [rdesktop.org](http://www.rdesktop.org/)
*   [使用 C#.NET 的远程桌面](http://www.codeproject.com/Articles/43705/Remote-Desktop-using-C-NET)

# javascript - myContext.clearRect(0, 0, 500, 700); 未正确清除画布

> ID：13739237
> 
> 赞同：0
> 
> 时间：2012-12-06T07:58:11.403
> 
> 标签：javascript, html, html5-canvas

我有一个可以用鼠标绘制的 HTML5 Canvas。我希望能够清除画布，以便用户可以制作新的绘图。我这样做：

```
myContext.clearRect(0, 0, 500, 700); 
```

画布看起来很清晰，但是一旦用户开始新的绘图，旧的绘图就会重新出现。我的鼠标绘图部分的 JavaScript 是：

```
// Variables
var x1;
var y1;
var isPressed = false;
var myCanvas;
var myContext;

function startCanvas() {

    // Canvas stuff
    myCanvas = document.getElementById("can1");
    myContext = myCanvas.getContext("2d");

    // Specify a black background, and white lines that are 3 pixels thick.
    myContext.fillStyle = '#000000';
    myContext.strokeStyle = '#000000';
    myContext.fillRect(0, 0, 500, 700);
    myContext.lineWidth = 3;
    myContext.fill();
}

function functionMouseDown(e) {
    // Get coordinates
    x1 = e.clientX - myCanvas.offsetLeft;
    y1 = e.clientY - myCanvas.offsetTop;

    isPressed = true;
}

function functionMouseMove(e) {
    // If mouse is down and moved start drawing line
    if (isPressed == true) {
        drawLine(e);
    }
}

function functionMouseUp() {
    // Stop drawing line
    isPressed = false;
}

function drawLine(e) {
    // Draw line
    var x = e.clientX - myCanvas.offsetLeft;
    var y = e.clientY - myCanvas.offsetTop;

    myContext.strokeStyle = '#ffffff';
    myContext.lineWidth = 1;
    myContext.moveTo(x1, y1);
    myContext.lineTo(x, y);
    myContext.stroke();

    // Set start coordinates to current coordinates
    x1 = x;
    y1 = y;
}

startCanvas(); 
```

HTML 是：

```
<canvas id="can1" width="500" height="700"></canvas> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T08:30:54.033

```
myContext.strokeStyle = '#000000';
myContext.beginPath();//<---- add this and read about this.
myContext.fillRect(0, 0, 500, 700);
myContext.lineWidth = 3;  //why?
myContext.fill(); 
```

# jersey - 如何在 Java Jersey REST 服务中强制查询参数？

> ID：13739238
> 
> 赞同：6
> 
> 时间：2012-12-06T07:58:11.383
> 
> 标签：jersey

我有一个接受 3 个查询参数的 REST API。当在没有任何查询参数的情况下调用查询时，API 将执行并返回结果。我们如何使查询参数成为强制性的？如何添加验证以检查所有参数是否存在？另外，请让我知道最好的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-30T13:49:15.800

jersey 没有提供开箱即用的强制参数检查功能。但是你可以做一些事情，比如实现你自己的注释来实现它。下面是注释代码：

```
@Target(value = ElementType.METHOD)  
 @Retention(value = RetentionPolicy.RUNTIME)  
 public @interface Required {  
    String[] value();  
 } 
```

您还需要一个过滤器，下面是代码：

```
 public class RequiredParamResourceFilterFactory implements ResourceFilterFactory {  
   @Context  
   private transient HttpServletRequest servletRequest;  
   private class RequiredParamFilter implements ResourceFilter, ContainerRequestFilter {  
     private final String[] requiredParams;  
     protected List<String> parametersValueMissing;  
     private RequiredParamFilter(String[] requiredParams) {  
       this.requiredParams = requiredParams;  
     }  
     @Override  
     public ContainerRequest filter(ContainerRequest containerRequest) {  
       boolean missingMandatoryParameter = false;  
       List<String> missingParameters = new ArrayList<String>();  
       List<String> requiredParametersValueMissing = new ArrayList<String>();  
       List<String> URLParameters = getURLParameters(containerRequest.getQueryParameters());  
       List<String> methodRequiredParameters = Arrays.asList(requiredParams);  
       if (methodRequiredParameters != null) {  
         for (String methodRequiredParam : methodRequiredParameters) {  
           if (URLParameters == null) {  
             missingMandatoryParameter = true; //we will check this flag before returning result set to caller  
             missingParameters.add(methodRequiredParam);  
           } else if (!URLParameters.contains(methodRequiredParam)) {  
             missingMandatoryParameter = true; //we will check this flag before returning result set to caller  
             missingParameters.add(methodRequiredParam);  
             //Add to required parameters value missing List, only if the parameter is mandatory and value is not provided  
             // in the URL  
           } else if (parametersValueMissing.contains(methodRequiredParam)) {  
             requiredParametersValueMissing.add(methodRequiredParam);  
           }  
         }  
         if (missingMandatoryParameter && requiredParametersValueMissing.size() > 0) {  
           throw new YourCustomException("Missing Parameters = " + StringHelper.ArrayToString(missingParameters) +  
               "\nParameter value missing for " + StringHelper.ArrayToString(requiredParametersValueMissing));  
         } else if (missingMandatoryParameter) {  
           throw new YourCustomException("Missing Parameters = " + StringHelper.ArrayToString(missingParameters), MisbarErrorCode.VALIDATION_WRONG_INPUT_ERROR, "Customers");  
         } else if (requiredParametersValueMissing != null &&  
             requiredParametersValueMissing.size() > 0) {  
           throw new YourCustomException("Parameter value missing for " + StringHelper.ArrayToString(requiredParametersValueMissing));  
         }  
       }  
       return containerRequest;  
     }  
     @Override  
     public ContainerRequestFilter getRequestFilter() {  
       return this;  
     }  
     @Override  
     public ContainerResponseFilter getResponseFilter() {  
       return null;  
     }  
     /**  
      * To fetch the parameters sent to webservice call, these will be used to find if required parameter  
      * are present or not  
      *  
      * @param queryParams the queryparams sent  
      * @return all the parameters sent in URL  
      */  
     private List<String> getURLParameters(MultivaluedMap<String,String> queryParams) {  
       parametersValueMissing = new ArrayList<String>();  
       List<String> arr = new ArrayList<String>();  
       for(String key:queryParams.keySet())  
       {  
         arr.add(key);  
         if(queryParams.get(key)==null)  
           parametersValueMissing.add(key);  
       }  
       if(!arr.isEmpty())  
         return arr;  
       return null;  
     }  
   }  
   @Override  
   public List<ResourceFilter> create(AbstractMethod am) {  
     Required required = am.getAnnotation(Required.class);  
     if(required!=null)  
     {  
       return Collections.<ResourceFilter>singletonList(new RequiredParamFilter(required.value()));  
     }  
     return null;  
   }  
 } 
```

下面的示例展示了如何使用这个注解，所以在下面的 webservice 中；file_id 和 count 是强制参数：

```
@GET  
   @Produces(MediaType.APPLICATION_JSON+";charset=utf-8")  
   @Cacheable(isCacheable = true)  
   @Path("posts/clusters")  
   @Required({"file_id","count"})  
   @Timed  
   public Response getClusters(  
       @QueryParam("file_id") Integer fileId,  
       @QueryParam("count") Integer count,  
       @DefaultValue("-1")@QueryParam("start_time") Long startTime){  
 ;  
 } 
```

如果在 webservice 调用中未提供强制参数，您会收到如下错误，提及缺少的参数名称：

```
{
message: "Missing Parameters = file_id, count",
errorCode: "600"
} 
```

希望这能解决您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T16:44:50.500

在一个非常简单的级别上，您可以注入`HttpServletRequest`并检查自己：

```
@GET
public Response example(@Context HttpServletRequest request, 
                        @QueryParam("name") String name) {
  if (null == request.getParameter("name")) {
    ResponseBuilder builder = Response.status(404);
    return builder.build();
  }
  // Do something with name
} 
```

或者您可以使用 AOP 实现更精细的东西。[这](http://unitstep.net/blog/2012/05/27/jax-rsjersey-needs-an-required-annotation-for-parameters/)是一篇关于更多选项的博客文章。

# vba - 从 vba-Excel 获取输入到批处理脚本

> ID：13739241
> 
> 赞同：0
> 
> 时间：2012-12-06T07:58:18.780
> 
> 标签：vba, excel, batch-file

假设如果我在单元格 C9 有值，那么下面的 sheet1 是我用于从 VBA 运行 .bat 脚本的代码

```
> Blockquote

Fileset = Sheet1.Range("C9")

txtFpath = Sheet1.Range("C7").Value
FilePath = txtFpath & "\res.bat"

ChDrive "D"
RSP = Shell(Environ$("COMSPEC"), vbNormalFocus)
Application.Wait Now + TimeValue("00:00:03")
SendKeys "CD " & txtFpath & "{ENTER}", True
Application.Wait Now + TimeValue("00:00:03")
SendKeys "start " & FilePath & "{ENTER}", True
Application.Wait Now + TimeValue("00:00:03")
SendKeys "exit " & "{ENTER}", True
Application.Wait Now + TimeValue("00:00:03")
SendKeys "exit " & "{ENTER}", True
Application.Wait Now + TimeValue("00:00:03")
SendKeys "exit " & "{ENTER}", True

> Blockquote 
```

这是我将使用的 res.bat

> 块引用

```
@echo off
>summary.txt (
  for %%F in (*chkpackage.log) do findstr /l ###FileSet### "%%F" nul||echo %%F:N/A:N/A:N/A:N/A:N/A:N/A:N/A:N/A:N/A:N/A:N/A:N/A:N/A:N/A:N/A:N/A:N/A:N/A
) 
```

> 块引用

我的问题是如何将 c9 中的值放入 bat 文件中的 ### Fileset ###

谢谢你的时间和回答

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T09:39:18.003

您可以使用批处理文件中的[参数](http://www.robvanderwoude.com/parameters.php)轻松发送范围“C9”的值。

**VBA代码添加参数**

```
SendKeys "start " & FilePath & " " & FileSet & "{ENTER}", True 
```

**带参数的批处理**

```
@echo off
>summary.txt (
  for %%F in (*chkpackage.log) do findstr /l %1 "%%F" nul||echo %%F:N/A:N/A:N/A:N/A:N/A:N/A:N/A:N/A:N/A:N/A:N/A:N/A:N/A:N/A:N/A:N/A:N/A:N/A
) 
```

**编辑：**如果 C9 的值有任何空格，您需要在参数周围添加引号，否则它只会占用第一个单词（但希望有人可以提出更好的方法！）

# r - R中的平均列对

> ID：13739243
> 
> 赞同：1
> 
> 时间：2012-12-06T07:58:35.690
> 
> 标签：r, sapply

我想平均数据集中的列对，而不是移动平均线。我想将列分成两组，并找到每对的平均值。

我展示了一个样本数据集、所需的结果以及返回所需结果的嵌套 for 循环。我只是认为可能有更好的方法。抱歉，如果我在其他帖子中忽略了解决方案。我确实在这里搜索过，但我没有像通常尝试的那样勤奋地搜索互联网。谢谢你的任何建议。

```
x = read.table(text = "
  site     yr1  yr2  yr3  yr4
    1       2    4    6    8
    2      10   20   30   40
    3       5   NA    2    3
    4     100  100   NA   NA", 
sep = "", header = TRUE)

x

desired.outcome = read.table(text = "
  site    ave12  ave34
    1       3      7
    2      15     35
    3       5    2.5
    4     100     NA", 
sep = "", header = TRUE)

result <- matrix(NA, ncol=((ncol(x)/2)+1), nrow=nrow(x))

for(i in 1: ((ncol(x)-1)/2)) {
  for(j in 1:nrow(x)) {

     result[j,   1 ] <- x[j,1]
     result[j,(i+1)] <- mean(c(x[j,(1 + ((i-1)*2 + 1))], x[j,(1 + ((i-1)*2 + 2))]), na.rm = TRUE) 

  }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T08:18:53.677

```
output <- sapply(seq(2,ncol(x),2), function(i) {
  rowMeans(x[,c(i, i+1)], na.rm=T)
}) 
```

然后您可以将第一列添加到`output`矩阵中。

```
output <- cbind(x[,1], output) 
```

或者，您可以使用`within`：

```
within(x, {
    pair.colmeans <- sapply(seq(2, ncol(x), 2), function(i) {
        rowMeans(x[, c(i, i+1)], na.rm=TRUE)
    })
}) 
```

# c# - 交换全局 XAML 样式/主题

> ID：13739244
> 
> 赞同：1
> 
> 时间：2012-12-06T07:58:36.270
> 
> 标签：c#, windows-8, styles, winrt-xaml

我的 UI 由一组样式定义。

我想让用户从两个样式系列中进行选择。

如何在代码后面换出全局样式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T08:38:43.183

以下文章可能会有所帮助：

*   [WPF 主题和皮肤引擎](http://www.codeproject.com/Articles/22575/WPF-Themes-and-Skins-Engine)
*   [在 WPF 中创建蒙皮用户界面](http://www.codeproject.com/Articles/19782/Creating-a-Skinned-User-Interface-in-WPF)

通常，您需要将`App.Resources.MergedDictionaries`运行时中的新资源替换为可能来自另一个程序集的新资源，并在 级别的列表中重新应用模板，请`MainWindow`确保`DynamicResource`在您的样式分配中具有。以下算法可能会对您有所帮助：

1.  干净的`App.Resources.MergedDictionaries`
2.  填充`App.Resources.MergedDictionaries`新的一组`ResourceDictionary`
3.  重新应用窗口模板`mainWindow.ApplyTemplate();`

希望这可以帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-06T19:49:54.357

密切注意依赖关系，这样资源就不会尝试引用另一个尚未定义的资源。请参阅有关[合并字典](http://msdn.microsoft.com/en-us/library/windows/apps/hh968442.aspx)的部分以查看何时加载的内容。此外，您必须将所有资源从 App.xaml 移动到您的通用资源字典中，因为当您将应用程序资源重置为新的合并字典时，它们将被清除。

更新似乎仅在重新创建元素时生效，因此需要导航来应用更改。

```
private void LoadStyles(StyleType styleType)
{
    ResourceDictionary merged = new ResourceDictionary();
    ResourceDictionary generic = new ResourceDictionary();
    ResourceDictionary theme = new ResourceDictionary();

    generic.Source = new Uri("ms-appx:/Common/StandardStyles.xaml");

    switch (styleType)
        {
            default:
            case StyleType.Custom1: { theme.Source = new Uri("ms-appx:/Common/AppStyles-Custom1.xaml"); break; }
            case StyleType.Custom2: { theme.Source = new Uri("ms-appx:/Common/AppStyles-Custom2.xaml"); break; }
            case StyleType.Custom3: { theme.Source = new Uri("ms-appx:/Common/AppStyles-Custom3.xaml"); break; }
        }

    merged.MergedDictionaries.Add(generic);
    merged.MergedDictionaries.Add(theme);

    App.Current.Resources = merged;

    //this.ApplyTemplate(); <- doesn't seem to reapply resources to layout tree
} 
```

# c++ - 在 C++ 中创建一个标准的指针队列

> ID：13739245
> 
> 赞同：5
> 
> 时间：2012-12-06T07:58:40.897
> 
> 标签：c++, pointers, queue

假设我有一个整数队列，

```
#include <iostream>
#include <queue>
using namespace std;

int main() {

    int firstValToBePushed = 1;

    queue<int> CheckoutLine;

    CheckoutLine.push(firstValeToBePushed);

    cout << CheckoutLine.front();

    return 0;
} 
```

我怎样才能使用包含指向整数的指针的队列来做本质上相同的事情，而不是像上面当前所做的那样。我计划制作一个循环来产生多个值，但这只是一个更简单的例子。

谢谢，

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-06T08:07:15.977

如果这是为了终身管理，那么：

```
std::queue<std::shared_ptr<int>> CheckoutLine;
CheckoutLine.push(std::make_shared<int>(firstValeToBePushed)) 
```

如果您的队列有点像代理，并且其他人实际上拥有对象的生命周期，那么肯定：

```
std::queue<std::reference_wrapper<int>> CheckoutLine;
CheckoutLine.push(firstValeToBePushed) 
```

如果您没有在任何地方公开队列并且它是内部的，*那么存储指针就可以了*，正如其他人所建议的那样。

但是，**永远不要**向客户公开指针的集合，这是最糟糕的事情，因为您将管理生命周期的负担留给了它们，而这对集合来说更麻烦。

当然对于原始类型或 POD，只需复制即可，无需存储指针。移动语义即使对于非 POD 也很容易，除非您有一些棘手的构造或者您的对象无法实现移动语义。

`#include <functional>`为`std::reference_wrapper`和`#include <memory>`为`std::shared_ptr`和`std::unique_ptr`朋友。我假设您可以使用现代编译器。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-06T08:08:39.620

为您添加一个循环。

```
#include <iostream>
#include <queue>
using namespace std;

int main() {

queue<int*> theQueue;
char c = 'n';

while (c == 'n') {
  cout << "Enter \'n\' to add a new number to queue ( \'q\' to quit):";
  cin >> c;
  if ( c == 'q') {
    break;
  }
  else {
    int num;
    cout << "Enter an integer and press return: ";
    cin >> num;
    theQueue.push(new int(num));
  }
}

while( !theQueue.empty() ) {
  cout << theQueue.front() << ": " << *theQueue.front() << endl;
      delete theQueue.front();
  theQueue.pop();
}
return 0;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-06T08:05:49.143

```
#include <iostream>
#include <queue>
using namespace std;

int main()
{
int  value = 1337;

int* firstValeToBePushed = &value;

queue<int*> CheckoutLine;

CheckoutLine.push(firstValeToBePushed);

cout << *(CheckoutLine.front()) << "is at " << CheckoutLine.front();

return 0;

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-06T08:06:50.700

我不确定是否理解，也许你想这样做：

```
#include <iostream>
#include <queue>

using namespace std;

int main(){
    int firstValueToBePushed = 1;

    queue<int *> CheckoutLine;

    CheckoutLine.push(new int(firstValueToBePushed));

    cout << *CheckoutLine.front() << endl;

    return 0;
} 
```

# c# - 在 WPF 项目中嵌入数学输入面板

> ID：13739248
> 
> 赞同：4
> 
> 时间：2012-12-06T07:58:53.470
> 
> 标签：c#, wpf, visual-studio-2010, visual-studio-2012

我正在尝试在**WPF 项目中使用****数学输入面板**，但不知道如何使面板成为 WPF 项目的一部分（不是弹出窗口或单独的窗口 - 它必须嵌入在项目中）。我正在考虑将其嵌入网格中。

 **我使用以下示例使面板以 Windows 形式工作：[使用 C# 的数学输入面板，](https://stackoverflow.com/questions/1623378/trying-to-create-a-math-input-panel-in-c-sharp)但随后它出现在一个独立的窗口中，我试图避免这种情况。

我正在使用带有 C# 的 Visual Studio 2010 和 2012。如果您需要更多信息，请随时询问。**

# validation - Laravel - “其他”占位符不接受验证消息中的友好名称

> ID：13739250
> 
> 赞同：0
> 
> 时间：2012-12-06T07:59:02.613
> 
> 标签：validation, placeholder, laravel

在 Laravel 中，

我在我的项目中使用自定义验证来检查最小区域的值是否小于最大区域。刚刚在 Validator 库中创建了验证

```
public function validate_less_than($attribute, $value, $parameters)
{
            $other_value = $this->attributes[$parameters[0]];
            if(!empty($value) && !empty($other_value))
                return $value <= $other_value;
            else    
                return true;    
} 
```

在语言文件中添加了“less_than”的验证消息。

```
'less_than'     =>  "The :attribute must be less than :other value", 
```

并在验证器库中添加了替换占位符功能，以替换 :other 占位符

```
protected function replace_less_than($message, $attribute, $rule, $parameters)
    {
                return str_replace(':other', $parameters[0], $message);
    } 
```

我的字段名称类似于“min_area”、“max_area”，因此我不希望在验证消息中使用此字段名称，因此我在语言文件中为这些字段添加了友好名称。但 ":other" 占位符不采用验证语言文件中指定的友好名称。只有“：属性”占位符才有可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T14:05:04.757

它在第 856 行（在当前版本 3.2.12 中）的 validator.php 中硬编码。

你可以用你的替代品来运行它。

```
protected function replace_less_than($message, $attribute, $rule, $parameters)
{
    return str_replace(':other', $this->attribute($parameters[0]), $message);
} 
```

注意`$this->attribute()`.

# javascript - 在可重新加载的 Ajax 部分中使用 JQuery Bootstrap

> ID：13739255
> 
> 赞同：0
> 
> 时间：2012-12-06T07:59:37.293
> 
> 标签：javascript, jquery, ajax, twitter-bootstrap

我正在创建一个订购系统，该系统允许员工记录订单并跟踪其从订购到发货的状态。然而，我们遇到的问题是，在查看订单时，另一台计算机上的另一个工作人员可能会更改订单。在执行页面刷新之前，这不会注册。

为了解决这个问题，我希望使用这个脚本...... [http://www.michaelfretz.com/2010/04/21/using-ajax-to-load-data-from-php-into-your-website/](http://www.michaelfretz.com/2010/04/21/using-ajax-to-load-data-from-php-into-your-website/)

我已经设法让它在 twitter bootstrap 中运行良好。在较慢的连接上，页面加载并显示“请稍候，正在加载数据”，直到加载数据。

然而，我遇到的问题是我无法让 javascript 在重新加载部分工作。我希望使用引导工具提示。用户可以将鼠标悬停在订单 ID 上，它将弹出订单内容。它在重新加载部分之外工作得很好，但在我无法让它工作。

我尝试在加载部分加载 jquery 和引导工具提示 javascript，但即使这样也不起作用。无论如何，这会使它变得非常慢。

有没有人知道如何将引导工具提示与 Ajax 重新加载 PHP 文档一起使用。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T13:46:22.973

感谢您帮助回答这个问题......我现在已经明白了。在提出问题之前甚至不知道要搜索什么。

我可以使用一个 onload 模拟器来模拟按下按钮。应该管用。

然而，我选择使用选择器选项，这显然只是 jquery 'Live' 的替代品

对于那些与我在同一条船上的人。加载 JQuery 后将其粘贴到您的页面中。

```
<script type="text/javascript">
 ( function($) {

  $(document).ready(function() {

 $('body').tooltip({
                 selector: '[rel=tooltip]'
         });

});

 } ) ( jQuery );

 </script> 
```

对缩进感到抱歉....愚蠢的4个空格:)

即使内容发生更改，此脚本也会继续加载。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T08:09:50.843

如果您要加载动态内容，请将您的处理程序绑定到最近的不变的父级，然后添加一个过滤器以仅选择您要处理的元素。

所以，举个例子：

**HTML：**

```
<div id="parent">
    <div id="igetinjectedwithdynamiccontent">
        ...
        <a href="#" class="btn">IMA BUTTON</a>
        ...
    </div>
</div> 
```

**jQuery：**

```
$('#parent').on('click', 'a.btn', function(event){
    // handle click event for anchors of class 'btn'
}); 
```

这将成功地将`onclick`处理程序绑定到 div 中的任何引导按钮`parent`，无论它们是否存在于页面加载或动态添加。

# iphone - 使用 plist 将数据插入核心数据时卡住

> ID：13739258
> 
> 赞同：1
> 
> 时间：2012-12-06T07:59:51.650
> 
> 标签：iphone, objective-c, core-data, plist

我在核心数据中有一个名为“类别”的实体，它有 3 个属性。

> 1.  parent_id
> 2.  类别ID
> 3.  分类名称

现在在根字典下的 CategoriesFile.plist 中，我创建了 3 个名为

> 1.  parent_id
> 2.  类别ID
> 3.  分类名称

我已经在这些数组中填充了适当的数据。

现在我编写了以下代码来插入数据

```
 NSArray *paths = NSSearchPathForDirectoriesInDomains (NSDocumentDirectory, NSUserDomainMask, YES);
        NSString *documentsPath = [paths objectAtIndex:0];
        NSString *plistPath = [documentsPath stringByAppendingPathComponent:@"CategoriesFile.plist"];
        if (![[NSFileManager defaultManager] fileExistsAtPath:plistPath])
        {
            // if not in documents, get property list from main bundle
            plistPath = [[NSBundle mainBundle] pathForResource:@"CategoriesFile" ofType:@"plist"];
        }

        // read property list into memory as an NSData object
        NSData *plistXML = [[NSFileManager defaultManager] contentsAtPath:plistPath];
        NSString *errorDesc = nil;
        NSPropertyListFormat format;

        // convert static property list into dictionary object
        NSDictionary *thisGardenDictionary = [[NSDictionary alloc] init];
        NSDictionary *plistDictionary = (NSDictionary *)[NSPropertyListSerialization propertyListFromData:plistXML mutabilityOption:NSPropertyListMutableContainersAndLeaves format:&format errorDescription:&errorDesc];
        if (!plistDictionary)
        {
            NSLog(@"Error reading plist: %@, format: %d", errorDesc, format);
        }

        [plistDictionary enumerateKeysAndObjectsWithOptions:NSEnumerationConcurrent usingBlock:^(id key, id object, BOOL *stop) {
            NSManagedObject *manObj = [NSEntityDescription insertNewObjectForEntityForName:@"Categories" inManagedObjectContext:context];

            [manObj setValue:[thisGardenDictionary objectForKey:@"category_id"]  forKey:@"category_id"];
        [manObj setValue:[thisGardenDictionary objectForKey:@"parent_id"] forKey:@"parent_id"];
        [manObj setValue:[thisGardenDictionary objectForKey:@"category_name"] forKey:@"category_name"];

             }];
 NSError *error;
    if(![context save:&error])
    {
        NSLog(@"Whoops, couldn't save %@",[error localizedDescription]);
    } 
```

但我得到空白的结果。

有人可以说我错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T21:27:16.170

应该这样做（我相信您已验证 plist 已正确读取）：

```
NSDictionary *allArrays = [NSDictionary dictionaryWithContentsOfFile:plistPath];
for (int i = 0; i < [[allArrays objectForKey:@"parent_id"] count]; i++) {
   NSManagedObject *object = [NSEntityDescription 
    insertNewObjectForEntityForName:@"Categories" 
             inManagedObjectContext:context];
    for (NSString *s in @[@"parent_id", @"category_id", @"category_name"]) {
      [object setValue:[[allArrays objectForKey:s] objectAtIndex:i] forKey:s];
    }
}
// save 
```

但是，让我指出，这是组织数据的一种非常尴尬的方式。更好的是一系列字典。在您的设置中，如果所有数组的元素数量不同，结果将是灾难性的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T08:08:00.577

`NSManagedObject` 设置你的属性

```
[manObj setName:@"Name"]; 
```

等等......然后保存上下文以将值存储在CoreData db中。

```
if (![context save:&error]) {
   NSLog(@"Unresolved error : %@", [error userInfo]);
} 
```

# cakephp - cakephp url 附加无效参数但仍然有效。应该是404页面未找到

> ID：13739268
> 
> 赞同：1
> 
> 时间：2012-12-06T08:00:36.057
> 
> 标签：cakephp, cakephp-2.0, cakephp-2.1

当我通过 cakephp 开发应用程序时，我发现了一个问题。

例如：我的 url`http://localhost/controller/view/id`工作正常。

但是，当我附加更多无效参数时，它仍然有效，

喜欢`http://localhost/controller/view/id/adfasd/adfasdf/asdfasdf/asdfasdf`

它应该显示 404 页面未找到。

我是否需要使用 $this->passedArgs 在控制器中手动检查传递参数然后抛出异常？或者有什么配置吗？

我该如何处理这种情况

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T09:56:11.533

您应该首先查看[Cakephp, Routing-Named params](http://book.cakephp.org/2.0/en/development/routing.html#controlling-named-parameters)以了解如何正确使用它们。

正如您应该添加要使用的那样，您还应该在路由中为您的 id 添加一个正则表达式。此外，当将数据发送到某个操作时，您应该在此处抛出异常，如下所述：[cakephp 处理在 url 中传递错误的参数](https://stackoverflow.com/questions/10926615/cakephp-deal-with-passing-wrong-parameter-in-url)

# android - 在 Android 4.0 中隐藏对话框加载时的软键盘

> ID：13739269
> 
> 赞同：1
> 
> 时间：2012-12-06T08:00:39.190
> 
> 标签：android, android-softkeyboard, android-4.0-ice-cream-sandwich, dialog

我有一个`activity`打开一个包含`dialog`点击的内容。节目一开场。我想防止这种情况。只有当我点击 时才会出现。我使用的是安卓 4。`edittexts``button``dialog``softkeyboard``edittext``dialog``softkeyboard`

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-02T12:58:54.050

为此，请在调用 dialog.Show() 之前设置软输入模式：

```
// Build and create your dialog.
AlertDialog dialog = new AlertDialogBuilder(...).create();

// Hide soft keypad by default (will be displayed when user touches any edit field).
dialog.getWindow().setSoftInputMode(WindowManager.LayoutParams.SOFT_INPUT_STATE_HIDDEN);

// Show the dialog.
dialog.show(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-22T05:19:13.603

这应该在任何情况下都有效：

```
public void hideKeyboard() {

            mActivity.runOnUiThread(new Runnable() {
                public void run() {
                    InputMethodManager inputManager = (InputMethodManager) mActivity
                            .getSystemService(Context.INPUT_METHOD_SERVICE);
                    inputManager.hideSoftInputFromWindow(mActivity
                            .getCurrentFocus().getWindowToken(),
                            InputMethodManager.HIDE_NOT_ALWAYS);
                }
            });
        } 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-26T06:49:31.117

将此添加到您的清单中就是您所要做的：

安卓：windowSoftInputMode="stateHidden"

很简单，但万一有人在看这里

:)

# visual-studio - VS 2005 符号映射在 #ifdef 的情况下不起作用

> ID：13739271
> 
> 赞同：1
> 
> 时间：2012-12-06T08:00:42.407
> 
> 标签：visual-studio

我使用 VS 2005 作为我的 IDE。我的大部分源代码都使用预处理器#ifdef。所有控制#ifdef 的宏定义都存在于头文件中。Visual Studio 在#ifdef 下显示灰色的代码。虽然定义宏的头文件包含在源文件中。这很烦人，因为 Visual Studio 也不会为它看不到的代码创建符号映射。因此，为了查找符号的定义，我需要手动检查它。我已将包含宏定义的头文件添加到项目中。我的包含目录也包含此文件的位置。有人能告诉我为什么 VS 不能识别宏定义吗？

例如

```
File source.c

#include "defines.h"

#ifdef MY_DEFINE
int my_global = 0;
 void foo(void)
 {
   printf("I am here");
 }
#endif

File defines.h

#define MY_DEFINE 
```

VS 会将#ifdef 下的所有代码显示为灰色。如果我想从其他文件中检查 my_global 的定义，我不能。

# css - 页面显示滚动条无论如何

> ID：13739272
> 
> 赞同：1
> 
> 时间：2012-12-06T08:00:43.857
> 
> 标签：css, scroll, scrollbar, hide

这是我的页面：[http ://bad-sf.com/stemtest/about.html](http://bad-sf.com/stemtest/about.html)

请注意，即使内容小到不需要滚动，滚动仍然是一种选择。它可能与我的css有关吗？（以下）：

```
body:before {
content:"";
height:100%;
float:left;
width:0;
margin-top:-32767px;
}
* {
margin:0;
padding:0;
outline: none;
}
html, body {
height:100%;
font-family: '_.regular';
font-size: 13px;
outline: none;
}
#wrap {
min-height:100%;
width:800px;
margin: 2% auto;
}
#main {
overflow:auto;
padding-bottom: 30px;
}
#smm {
width: 400px;
height: 200px;
float:left;
}

#footer {
position: relative;
margin-top: 0px;
height: 35px;
clear:both;
font-family: '_.regular';
} 
```

谢谢！我仍在学习 html 和 css，因此您的任何输入将不胜感激 - Danny

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T08:33:00.670

这是由`#wrap`104% 的高度引起的。请注意以下规则：

```
body {
    height: 100%;
}
#wrap {
    min-height: 100%;
    margin: 2% auto;
} 
```

所以你`#wrap`实际上是 100% 的高度加上顶部 2% 的边距加上底部的 2% 边距。

有几种方法可以应对这种情况。

您可以删除`height`from`body`和可选`min-height`的 from `#wrap`，因为在这种情况下它不再有用了。

您可以更改为`margin`（尽管这将不可避免地提高内容）。`#wrap``margin: 0 auto;`

可能还有其他一些可能性，但由于不满意的答案被否决，我并不觉得有必要考虑更多崇高的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T08:02:50.983

带走。`height:100%;`_ `html, body { }`为什么你还需要它呢？

滚动条总是出现的原因是因为`#wrap`DIV 也设置为 100% 高度，除此之外，还有 2% 的边距。这迫使你的身体比 100% 多 2%。

您可以删除 2% 的边距，`#wrap`但如果您不想这样做，删除`height: 100%;`from`html, body { }`应该可以解决问题。

# java - 如何从 Java 中的 Http 响应中获取返回 url？

> ID：13739274
> 
> 赞同：-4
> 
> 时间：2012-12-06T08:00:51.143
> 
> 标签：java

我正在编写一个客户端小程序，只需发布​​一个带有回调 url 的 HTTP 请求，如下所示： `//http:url?redirect_url=MY_REDIRECT_URL`. 然后它将转到指定的重定向 URL，并附加一些我感兴趣的内容。

如何获取 shipping-useful-info 重定向网址？我应该使用哪个 Java 包？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T08:04:52.070

使用`HttpRequest`您可以提取原始主机和端口，仅此而已。如果你想要一个回调`URL`，你需要以应用程序特定的方式将它包含在你的 HTTP 请求的正文中。例如，您可以使用[GSON](http://code.google.com/p/google-gson/)并将其放入 JSON 中，或者您可以只使用纯文本（如果您的正文中只有这些内容）。

# mysql - 在 GROUP BY / HAVING 之前 SUBSELECT 到 LIMIT？

> ID：13739276
> 
> 赞同：0
> 
> 时间：2012-12-06T08:01:05.980
> 
> 标签：mysql, performance, limit, subquery

我只是在问自己，这是否有意义：

我有一个与几个表连接的查询，对结果进行分组（`GROUP_CONCAT`在某些列上使用），然后用 过滤掉一些结果`HAVING`，然后用`ORDER BY`

,`LIMIT`是这里的最后一条语句 - 所以基本上，限制仅在查看结果时才生效`HAVING`，对吧？

我在问自己——如果我已经通过同样的方式来限制`FROM`部分怎么办？但这并不是那么简单，它变得有点复杂：`SUBSELECT``LIMIT`

很难想出一个有意义的例子，我只有一个不好的例子：

一辆车总是有 4 个轮子，每个轮子都有自己的桌子排。所以搜索前 4 个轮子是没有意义的——我知道，MySQL 可能没有。因此，在 ,`LIMIT 4`之后`HAVING`意味着 mysql 搜索整个表（列出数百万个轮子），即使它本可以在 4 号停止。

基本上，我的问题是 -`SUBSELECT`下面的查询有意义吗？

没有`SUBSELECT`：

```
SELECT    *
FROM      carwheel
LEFT JOIN ... ON ...
LEFT JOIN ... ON ...
LEFT JOIN ... ON ...
WHERE     ...
GROUP BY  ...
HAVING    ...
ORDER BY  ...
LIMIT     4 
```

与`SUBSELECT`：

```
SELECT   *
FROM     (
             SELECT *
             FROM   carwheel
             WHERE  ... -- (first, simple filter)
             LIMIT  4
         ) AS carwheel
LEFT JOIN ... ON ...
LEFT JOIN ... ON ...
LEFT JOIN ... ON ...
WHERE     ...
GROUP BY  ...
HAVING    ...
ORDER BY  ...
LIMIT     4 -- (does it make sense, to do it twice?) 
```

我已经读过，即使`LIMIT 1`在您期望单行时添加，也很有意义，因为 MySQL 在找到第一行后停止寻找更多行。这就是我考虑子选择的全部原因，因为 MySQL 会查看整个`carwheel`表，而不是在第 4 位停止，如果`LIMIT`仅在 之后生效`HAVING`，对吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T08:07:57.283

您会得到不同的结果，因为当您限制 from 子选择时，顺序是未定义的。在这两种情况下你都会得到四行，但在一种情况下你可能会得到第 7、14、23、8 行，在另一种情况下你可能会得到第 1、2、88、17 行。因此，按顺序限制结果集是有意义的例如，尽量减少流量，但请记住，根据您的限制位置，您会得到不同的行。

*编辑*：

在你澄清之后，在你的 from 子句中预过滤行是有意义的，因为这样连接就有更少的行需要处理。第二个限制也很有用，因为使用`left join`s 您可以在结果集中获得超过四行。

但可以肯定的是，哪个更好，`explain select ...`对这两个查询进行一次。然后，您可以比较这两种选择，看看哪一种更有效。

# c++ - 全局变量在不同的静态方法中使用时得到不同的值

> ID：13739281
> 
> 赞同：2
> 
> 时间：2012-12-06T08:01:20.020
> 
> 标签：c++, class, global-variables, static-methods, static-members

我有以下类实现必须使用**单个**全局数组的静态方法。它是这样定义的：

```
//Defined in LockTrack.h file

enum LOCK_ID{
    LOCKID_0,
    LOCKID_1,
    LOCKID_2,

    LOCKID_COUNT
};

static LOCK_ID __glob_lock_ids[LOCKID_COUNT];

class CLockTrack
{
public:
    static void getLockedLocks(/*parameters*/)
    {
        //__glob_lock_ids = points to 0x015ef558 address in memory
        LOCK_ID lockID = __glob_lock_ids[0];
    }

    static void inline setLock(LOCK_ID lockID)
    {
        //__glob_lock_ids = points to 0x015ef330 address in memory
        __glob_lock_ids[lockID] = LOCK_ON_FLAG;
    }
}; 
```

但是发生的情况是'__glob_lock_ids'指针指向每个方法中的不同内存位置。为什么？以及如何解决这个问题？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-06T08:03:23.010

不，这不是全球性的。将其更改为

```
extern LOCK_ID __glob_lock_ids[LOCKID_COUNT]; 
```

并移动

```
LOCK_ID __glob_lock_ids[LOCKID_COUNT]; 
```

到单个实现文件中。您的版本 ,`static`将有效地为每个包含标题的翻译单元创建一个新变量。

# php - 多字节字符串切割器 - 性能调优

> ID：13739282
> 
> 赞同：0
> 
> 时间：2012-12-06T08:01:24.837
> 
> 标签：php, performance

我有一个用希腊语写的新闻网站。

在我的主页中，我必须显示每个故事的标题以及故事内容的一些字符。

我想在最后一个符合我设置的字符限制的单词中删减故事的内容。

我通过使用一些多字节安全函数并将它们组合起来实现了这一点，但它似乎在性能上非常昂贵，因为它花费了我大约 150 毫秒的时间来获取一个页面，而无需剪切字符串就可以在不到 10 毫秒的时间内加载。

所以我想知道。有没有办法对下面的函数进行性能调整并保持它们多字节的安全，或者我应该接受它们吗？

```
// multibyte wordcutter
function cutString( $string , $width = 20 , $cut=false ){
    if( mb_strlen( $string , "UTF-8" ) == 0 ){
        return $string;
        }
    $input = $string;
    if ( mb_strlen( $string , "UTF-8" ) > $width ) {
        $string = mb_wordwrap( $string , $width , "\n" , $cut );
        $string = mb_substr( $string , 0 , mb_strpos( $string , "\n" , NULL , "UTF-8" ) , "UTF-8" );
        if( mb_strlen( $string , "UTF-8" ) > $width ) {
            $string = mb_wordwrap( $string , $width , "\n" , true );
            $string = mb_substr( $string , 0 , mb_strpos( $string , "\n" , NULL , "UTF-8" ) , "UTF-8" );
            }
        elseif( mb_strlen( $string , "UTF-8" ) == 0 ){
            $string = mb_wordwrap( $input , $width , "\n" , true );
            $string = mb_substr( $string , 0 , mb_strpos( $string , "\n" , NULL , "UTF-8" ) , "UTF-8" );
            }
        }
    return $string;
    }

// multibyte safe wordwrap
function mb_wordwrap($string, $width = 75, $break = "\n", $cut = false, $charset = 'utf-8')
{
    $stringWidth = iconv_strlen($string, $charset);
    $breakWidth  = iconv_strlen($break, $charset);

    if (strlen($string) === 0) {
        return '';
    } elseif ($breakWidth === null) {
        throw new Zend_Text_Exception('Break string cannot be empty');
    } elseif ($width === 0 && $cut) {
        throw new Zend_Text_Exception('Can\'t force cut when width is zero');
    }

    $result    = '';
    $lastStart = $lastSpace = 0;

    for ($current = 0; $current < $stringWidth; $current++) {
        $char = mb_substr($string, $current, 1, $charset);

        if ($breakWidth === 1) {
            $possibleBreak = $char;
        } else {
            $possibleBreak = mb_substr($string, $current, $breakWidth, $charset);
        }

        if ($possibleBreak === $break) {
            $result    .= mb_substr($string, $lastStart, $current - $lastStart + $breakWidth, $charset);
            $current   += $breakWidth - 1;
            $lastStart  = $lastSpace = $current + 1;
        } elseif ($char === ' ') {
            if ($current - $lastStart >= $width) {
                $result    .= mb_substr($string, $lastStart, $current - $lastStart, $charset) . $break;
                $lastStart  = $current + 1;
            }

            $lastSpace = $current;
        } elseif ($current - $lastStart >= $width && $cut && $lastStart >= $lastSpace) {
            $result    .= mb_substr($string, $lastStart, $current - $lastStart, $charset) . $break;
            $lastStart  = $lastSpace = $current;
        } elseif ($current - $lastStart >= $width && $lastStart < $lastSpace) {
            $result    .= mb_substr($string, $lastStart, $lastSpace - $lastStart, $charset) . $break;
            $lastStart  = $lastSpace = $lastSpace + 1;
        }
    }

    if ($lastStart !== $current) {
        $result .= mb_substr($string, $lastStart, $current - $lastStart, $charset);
    }
    return $result;
} 
```

**编辑：这就是我最终使用的**

```
// multibyte wordcutter
function cutString( $string , $width = 70 , $cut=false ){
    $string = mb_substr( $string , 0 , $width , "UTF-8" );
    if( mb_strlen( $string , "UTF-8" ) < $width ){
        return $string;
        }
    $dot = mb_strripos( $string , '.' , 0 , "UTF-8" ) + 1;
    $space = mb_strripos( $string , ' ' , 0 , "UTF-8" );
    if( $space ){
        if( ($space-$dot) < 20 ){
            $string = mb_substr( $string , 0 , $dot , "UTF-8" );
            }
        else {
            $string = mb_substr( $string , 0 , $space , "UTF-8" );
            }
        }
    return $string;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T08:26:45.573

1.  使用真实的测试用例和 xdebug 来检查性能。
2.  我用这段代码测试过：

// 测试页面

```
<?php

    $strSmall = "ये एक हिन्दी वाक्य है, इसमे बहुत सारे शब्द हैं |";
    $strBig = implode(".",array_fill(0,100,$strSmall));  // Create a big string

    $tStart = microtime(true);
    echo cutString($strBig);
    $tEnd = microtime(true);

    echo "\nTime taken:" , ($tEnd - $tStart) , " s";

    // multibyte wordcutter
    function cutString( $string , $width = 20 , $cut=false ){
        if( mb_strlen( $string , "UTF-8" ) == 0 ){
            return $string;
            }
        $input = $string;
        if ( mb_strlen( $string , "UTF-8" ) > $width ) {
            $string = mb_wordwrap( $string , $width , "\n" , $cut );
            $string = mb_substr( $string , 0 , mb_strpos( $string , "\n" , NULL , "UTF-8" ) , "UTF-8" );
            if( mb_strlen( $string , "UTF-8" ) > $width ) {
                $string = mb_wordwrap( $string , $width , "\n" , true );
                $string = mb_substr( $string , 0 , mb_strpos( $string , "\n" , NULL , "UTF-8" ) , "UTF-8" );
                }
            elseif( mb_strlen( $string , "UTF-8" ) == 0 ){
                $string = mb_wordwrap( $input , $width , "\n" , true );
                $string = mb_substr( $string , 0 , mb_strpos( $string , "\n" , NULL , "UTF-8" ) , "UTF-8" );
                }
            }
        return $string;
        }

  // multibyte safe wordwrap
function mb_wordwrap($string, $width = 75, $break = "\n", $cut = false, $charset = 'utf-8')
{

$stringWidth = iconv_strlen($string, $charset);
$breakWidth  = iconv_strlen($break, $charset);

    if (strlen($string) === 0) {
        return '';
    } elseif ($breakWidth === null) {
        throw new Zend_Text_Exception('Break string cannot be empty');
    } elseif ($width === 0 && $cut) {
        throw new Zend_Text_Exception('Can\'t force cut when width is zero');
    }

    $result    = '';
    $lastStart = $lastSpace = 0;

    for ($current = 0; $current < $stringWidth; $current++) {
        $char = mb_substr($string, $current, 1, $charset);

        if ($breakWidth === 1) {
            $possibleBreak = $char;
        } else {
            $possibleBreak = mb_substr($string, $current, $breakWidth, $charset);
        }

        if ($possibleBreak === $break) {
            $result    .= mb_substr($string, $lastStart, $current - $lastStart + $breakWidth,charset);
            $current   += $breakWidth - 1;
            $lastStart  = $lastSpace = $current + 1;
        } elseif ($char === ' ') {
            if ($current - $lastStart >= $width) {
                $result    .= mb_substr($string, $lastStart, $current - $lastStart, $charset) . $break;
                $lastStart  = $current + 1;
            }

            $lastSpace = $current;
        } elseif ($current - $lastStart >= $width && $cut && $lastStart >= $lastSpace) {
            $result    .= mb_substr($string, $lastStart, $current - $lastStart, $charset) . $break;
            $lastStart  = $lastSpace = $current;
        } elseif ($current - $lastStart >= $width && $lastStart < $lastSpace) {
            $result    .= mb_substr($string, $lastStart, $lastSpace - $lastStart, $charset) . $break;
            $lastStart  = $lastSpace = $lastSpace + 1;
        }
    }

    if ($lastStart !== $current) {
        $result .= mb_substr($string, $lastStart, $current - $lastStart, $charset);
    }
    return $result;
}

?> 
```

3.  花了大约 200 毫秒。

    Performance Test ये एक हिन्दी वाक्य Time taken:0.23847889900208 s

4.  This is xdebug profiling result, you can see that `iconv_strlen` and `mb_substr` are eating the time :

![enter image description here](../Images/03102b81dfae50dc61a78f4d5b1f939e.png)

. Instead of so many function calls to make the code easy, try to minimize function calls, and write some own loops.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T09:00:49.957

Current implementation is overcomplicated.

If I understood right then the better strategy would be:

1.  Cut the string by the length
2.  Iterate over characters from the end up to the first space
3.  Break and return the result

It should improve the performance significantly.

# sql - SQL Server - ListContains

> ID：13739284
> 
> 赞同：1
> 
> 时间：2012-12-06T08:01:30.520
> 
> 标签：sql

我们有一个表，其中包含一个以逗号分隔的整数值列表，如下所示：

tbl媒体

```
mediaID   categories
--------------------
1         1,2,3,4 
```

我意识到这可能不是最好的方法，但这是我们现阶段正在考虑做的事情。

给定一个随机的 categoryID，您将如何运行一个查询来搜索 categories 列以查看逗号分隔的列表是否包含该 categoryID？

在伪代码中：

SELECT * from tblMedia where categories 包含#arguments.categoryId#

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T08:02:51.717

`LIKE`可能会为您解决问题：

```
SELECT * FROM tblMedia WHERE categories LIKE ('%2%') 
```

# windows - 在 Windows 中的 WAI 上运行 Warp 时出现问题

> ID：13739286
> 
> 赞同：2
> 
> 时间：2012-12-06T08:01:46.913
> 
> 标签：windows, haskell, haskell-warp, haskell-wai

我为 (Wai) 上的 (Warp) 编写了一个简单的 Hello World 应用程序。它在 Ubuntu Linux 中运行良好，更复杂的应用程序也是如此。但我什至无法让这个 Hello World 应用程序在 Windows 中运行。我在 Windows 7 Home Premium SP1 32 位上使用 Haskell 平台（安装文件 2012.2.0.0）。

这是代码（适用于 Linux）：

```
{-# LANGUAGE OverloadedStrings #-} 

import Network
import Network.Wai
import Network.HTTP.Types (status200)
import Network.Wai.Handler.Warp (run)
-------------------------------------------------------------------------------
application = \_-> return $ responseLBS status200 [("Content-Type", "text/plain")] 
                            "Hello World" 

main = withSocketsDo $ do run 3000 application 
```

这些是加载代码并运行（主要）时的 GHCI 消息：

```
Prelude> :l wai_hello_world.hs
[1 of 1] Compiling Main             ( wai_hello_world.hs, interpreted )
Ok, modules loaded: Main.
*Main> main
Loading package bytestring-0.9.2.1 ... linking ... done.
Loading package [ **edited**: blah blah blah - other packages - removed for readability]
Loading package warp-1.3.2 ... linking ... done. 
```

加载代码后，Web 服务器似乎没有运行。

我想我可能会遇到一些常见的问题 - 如果是这样，请告诉我。

提前感谢所有反馈。

> （***更新****：正如下面的答案中所述，这些错误完全是由于 Ctrl-C 操作，杀死运行时，而不是问题中 Wai/Warp 的意外行为的一部分。*）
> 
> 如果我按 Ctrl-C 几次以爆发，我会收到这些消息，或其中一些消息：
> 
> ```
> NIenttweorrrku.pStoecdk.e
> t.ace*Main> p: failed (No error)
> user error (accept: can't perform accept on socket ((AF_INET,Stream,0)) in status Closed)
> user error (accept: can't perform accept on socket ((AF_INET,Stream,0)) in status Closed)
> *Main>
> *Main> user error (accept: can't perform accept on socket ((AF_INE,:Sream,0)) in status Closed)
> q
> Leaving GHCi. 
> ```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T13:13:53.653

您可能需要使用[`withSocketsDo`](http://hackage.haskell.org/packages/archive/network/2.4.0.1/doc/html/Network.html#v%3awithSocketsDo).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T06:50:08.203

这解决了问题（我确实觉得很傻）：

1.  拆掉堆栈，卸载了适用于 Windows 的 Haskell Platform 2012.2.0.0。
2.  为 Windows 安装了最新的 Haskell Platform 2012.4.0.0。
3.  安装了包/库（cabal install yesod-platform）。
4.  运行代码时批准了 GHC 上的 Windows 防火墙查询。
5.  代码现在按预期运行。我现在没有问题。也许是防火墙。:-S

# c# - 我如何使用 Linq 从我的列中获取正确的数据

> ID：13739293
> 
> 赞同：0
> 
> 时间：2012-12-06T08:02:17.080
> 
> 标签：c#, asp.net, sql, linq, datatable

我在 Linq 中不太好，我想进行查询以获取正确的数据。我有一个包含这些列的数据表：

![在此处输入图像描述](../Images/b50cf4305c64f1a4b0d1cd93f3f76bfc.png)

我想通过 TIMEFROM 和 TIMETO 列进入数据表，得到这个 = 10.12.2012 而不是 10.12.2012 00:00:00。

我该怎么做：我的数据表的名称是表。

```
MySqlCommand selectcommand = new MySqlCommand(sqlcommand, connection);

                MySqlDataAdapter adapter = new MySqlDataAdapter(selectcommand);

                DataTable table = new DataTable(TABLE);

                adapter.Fill(table);

                table = table.AsEnumerable().Where(r => r.Field<int>("Activate") == 1).CopyToDataTable();

                //i need the shorter form 

                connection.Open();

                selectcommand.ExecuteReader();

                return table; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T08:10:10.407

您可能想使用

```
String.Format("{0:dd.MM.yyyy}", dataTable.Rows[0]["TIMEFROM"]);
String.Format("{0:dd.MM.yyyy}", dataTable.Rows[0]["TIMETO"]); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T08:12:03.550

您必须先创建 contextclass 而不是创建对象，然后才能在其上运行 linq 命令。例如，您的表名是 test，而不是您创建 Linq to Sql 类文件，将表 test 拖到上面。比在您的主程序或您需要调用它的地方。

```
 testContext ct=new testContext();
      var er=from e in ct.test 
      Select new(e.TIMEFROM, e.TIMETO); 
```

# c# - 尝试使用 linq to xml 检索不存在的父母的孩子时避免空引用异常

> ID：13739296
> 
> 赞同：0
> 
> 时间：2012-12-06T08:02:28.363
> 
> 标签：c#, .net, linq-to-xml

在访问不存在的父母的子元素时，是否有一种简单的方法可以避免空引用异常？例如我有这个查询：

```
 Persons = (from actor in xDoc.Root.Element(imdbns + "Cast").Elements(imdbns + "Actor")
                       select new Person { Name = (string)actor.Element(imdbns + "Person").Element(imdbns + "Name"), Role = "Actor" }).Union(
                       from director in xDoc.Root.Element(imdbns + "Directors").Elements(imdbns + "Person")
                       select new Person { Name = (string)director.Element(imdbns + "Name"), Role = "Director" }).Union(
                       from writer in xDoc.Root.Descendants(imdbns + "Writer")
                       select new Person { Name = (string)writer.Element(imdbns + "Person").Element(imdbns + "Name"), Role = "Writer" }).ToList() 
```

它将三个元素（演员、作家、导演）统一为一个对象 Person。问题是我事先不知道是否存在元素“演员”或元素“导演”。这些元素是我需要访问的最终元素的父元素，如果它们不存在，我将得到一个空引用异常。所以我的问题是：我是否必须将查询分解为一组不可读的序列“如果！= null then”，还是有更方便的方法？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T08:32:09.350

你可以先做检查。类似的东西

```
if(xDoc.Root.Element(imdbns + "Cast") != null && xDoc.Root.Element(imdbns + "Directors" != null)
{
   Persons = (from actor in ...
} 
```

# xml - 如何将属性列表从 XML 转换为 JSON？

> ID：13739297
> 
> 赞同：0
> 
> 时间：2012-12-06T08:02:32.437
> 
> 标签：xml, json, sublimetext2

Sublime Text 2 使用 plist 来定义语言语法，就像 TextMate 一样。
但正如文档所说，人们编写 JSON 来制作插件，然后将其转换为 plist，而不是直接使用 YAML 或 JSON。
我浏览了一些插件，其中大多数只是`.tmLanguage`在其 Github 存储库中提供文件。他们是否直接编写 XML？

无论如何，一旦我想从别人的代码中学习，我必须阅读 XML，或者我必须将 plist 转换为 JSON。
以前有一个 Sublime 包可以做到这一点。
[https://github.com/facelessuser/PlistJsonConverter](https://github.com/facelessuser/PlistJsonConverter)
但它需要python2.6，这让我很困惑，因为我的Arch和Ubuntu 12.10都没有，我找不到python2.6。这是2.7。

请问有什么方法可以将plist转换为JSON吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T08:16:58.727

使用`plistlib`Python 2.6 或更高版本：

```
import json
import plistlib

plist = open(path)
plist_object = readPlist(plist)

json_serialized = json.dumps(plist_object) 
```

# sql - 每个多组的前 N 个聚合值（按列）

> ID：13739303
> 
> 赞同：3
> 
> 时间：2012-12-06T08:02:55.337
> 
> 标签：sql, vba, ms-access

OP的原始问题标题：**Use a field from one query in a subquery**

我在 Access 中编写查询的经验并不丰富，而且遇到了一些麻烦。

我有几张桌子。1 代表产品，1 代表市场，1 代表结合市场和产品的事实。我需要编写一个可以将它们连接在一起的查询，对于特定市场字段 (MF) 的每个实例，我需要返回特定事实字段 (FF) 的第 n 个最高值（每个市场/产品汇总）以及哪个它链接到的事实值的特定产品字段 (PF)。希望这是有道理的。

无论如何，这是我的查询：

```
select market.MF2, product.PF10, sum(fact.FF3) as FF3
from mMarket market, mProduct product, mFact fact
where market.Item_ID = fact.Market_ID
and product.Item_ID = fact.Product_ID
and FF3 = 
(
  select min(FF3) from 
  (
    select TOP 2 FF3 from 
    (
      select market2.MF2, product2.PF10, sum(fact2.FF3) as FF3
      from mMarket market2, mProduct product2, mFact fact2
      where market2.Item_ID = fact2.Market_ID
      and product2.Item_ID = fact2.Product_ID
      and market2.MF2 = market.MF2
      group by market2.MF2, product2.PF10
      order by 3 DESC
    )
  )
)
group by market.MF2, product.PF10 
```

TOP 2 部分是轻松指定 n 的地方。我遇到的问题是，当我在访问中运行它时，它提示我输入 market.MF2 的值（我认为这是指子查询中的实例）。我在想代码会从每一行的主查询中获取该值，但显然它没有这样做。

```
Tables below:

mMarket

Item_ID     MF2
---------------
1           64
2           28
3           73

mProduct

Item_ID     PF5        PF10
----------------------------
1           2221       Category1
2           6487       Category3
3           73234      Category2
4           76223      Category1
5           99342      Category2

mFact

Market_ID        Product_ID       FF3
--------------------------------------
1                1                1000
1                2                1500
1                3                500
1                4                1000
2                1                1500
2                3                1000
2                5                1500
3                1                1000
3                2                500
3                5                2000 
```

查询有什么问题？我看不到

预先感谢

预期成绩：

```
If n was 1

MF2        PF10         FF3
----------------------------
64         Category1    2000
28         Category2    2500
73         Category2    2000

If n was 2

MF2        PF10         FF3
----------------------------
64         Category3    1500
28         Category1    1500
73         Category1    1000 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T09:01:26.820

请看一下这个参考：

*   [SQLFIDDLE](http://sqlfiddle.com/#!2/83327/1)

仅按市场查询总和：

市场结果总和：

```
MF2 ITEM_ID PRODUCT_ID  PF5     PF10                                        SUM(F.FF3)
28  2       5,1,3       99342   Category2,Category1,Category2               4000
64  1       3,4,1,2     73234   Category2,Category1,Category1,Category3     4000
73  3       1,2,5       2221    Category1,Category3,Category2               3500 
```

按市场查询总和，类别：

```
select m.mf2, p.pf10, p.pf5, 
group_concat(f.product_id)as prods, 
m.item_id , sum(f.ff3) as sff
from mmarket m
left join mfact f
on m.item_id = f.market_id
inner join mproduct p
on f.product_id = p.item_id
group by m.mf2, p.pf10
order by sff desc 
; 
```

按市场分类的结果总和，类别：

```
MF2     PF10        PF5     PRODS   ITEM_ID     SFF
28      Category2   99342   5,3     2           2500
64      Category1   76223   4,1     1           2000
73      Category2   99342   5       3           2000
28      Category1   2221    1       2           1500
64      Category3   6487    2       1           1500
73      Category1   2221    1       3           1000
64      Category2   73234   3       1           500
73      Category3   6487    2       3           500 
```

**根据OP后来的评论**更新答案****

 **询问：

```
select x.*
from (
select m.mf2, p.pf10, sum(f.ff3) as sff
from mmarket m
left join mfact f
on m.item_id = f.market_id
inner join mproduct p
on f.product_id = p.item_id
group by m.mf2, p.pf10
  order by sff desc ) as x
limit 1
; 
```

结果：

```
MF2     PF10          MSFF
28      Category2     2500 
```

## 基于 OP 的预期结果 - 更新以符合 MS ACCESS SQL

在 MYSQL 中有很多方法可以实现这一点。但是想给 OP MS ACCESS 的答案。

我建议您将 ** Sum by Market、Category** 查询中的上述结果保存到临时表或 MS ACCESS 查询中。然后在您的最终查询中使用该查询。

*   [SQLFIDDLE](http://sqlfiddle.com/#!2/bae02/2)

按类别查询市场第一名：

```
-- success final :) by Top 1st
select x.mf2, x.pf10, x.sff
from 
(select m.mf2, p.pf10, p.pf5, 
group_concat(f.product_id)as prods, 
m.item_id , sum(f.ff3) as sff
from mmarket m
left join mfact f
on m.item_id = f.market_id
inner join mproduct p
on f.product_id = p.item_id
group by m.mf2, p.pf10
order by sff desc) as x

where 

(select count(*)
 from
     (select m.mf2, p.pf10, p.pf5, 
      group_concat(f.product_id)as prods, 
      m.item_id , sum(f.ff3) as sff
      from mmarket m
      left join mfact f
      on m.item_id = f.market_id
      inner join mproduct p
      on f.product_id = p.item_id
      group by m.mf2, p.pf10
      order by sff desc) as y

where y.sff >= x.sff
and y.mf2 = x.mf2) =1 //-- Top 3rd, 2nd, 1st
order by x.sff desc
; 
```

按类别排名第一的市场结果：

```
MF2     PF10    SFF
28  Category2   2500
64  Category1   2000
73  Category2   2000 
```

按类别划分的第二大市场结果：

```
MF2     PF10    SFF
28  Category1   1500
64  Category3   1500
73  Category1   1000 
```

按类别划分的第三大市场结果：

```
MF2     PF10    SFF
64  Category2   500
73  Category3   500 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T13:57:42.577

好的，经过深思熟虑和玩耍，我找到了一种获得正确结果的方法。唯一的问题是这需要很长时间。我想了一种方法来为每个市场设置排名，排名 = 1 是最大的事实价值，2 是第二高的等等

```
select StoreCode, Category, Sales, Ranking from 
(
    select main.MF2 as StoreCode, main.PF10 as Category, main.sFF as Sales, 
    (
        select count(*) from
        (
            select market.MF2, product.PF10, sum(fact.FF3) as sFF
            from mMarket market, mProduct product, mFact fact
            where market.Item_ID = fact.Market_ID
            and product.Item_ID = fact.Product_ID
            group by market.MF2, product.PF10
        ) as main2
        where main.MF2 = main2.MF2
        and main2.sFF >= main.sFF
    ) as ranking
    from
    (
        select market.MF2, product.PF10, sum(fact.FF3) as sFF
        from mMarket market, mProduct product, mFact fact
        where market.Item_ID = fact.Market_ID
        and product.Item_ID = fact.Product_ID
        group by market.MF2, product.PF10
    ) as main
}
where ranking = 1
order by 1,2 
```

我知道我应该首先将最里面的查询写出到一个临时表，然后运行这个查询，因为需要两次相同的确切查询。除此之外，如果有人能想到更好的方法或任何方法来加快查询速度。那太好了 ：）

感谢您的帮助，bonCodigo :)**

# css - 缩放时保持按钮文本外观

> ID：13739307
> 
> 赞同：1
> 
> 时间：2012-12-06T08:03:12.420
> 
> 标签：css, css-float, css-frameworks

编辑：原来这是在 macOS catalina 中修复的。一路顺风！

当用户放大或缩小时，如何保持按钮的外观？按钮的文本和边缘之间的间距需要保持一致。

![这个问题的jsfiddle](../Images/b8e1c1ab1d0a019dd85e36610587510e.png)

在这里画的小提琴上工作：http: [//jsfiddle.net/DevinRhode2/B4Usb/5/](http://jsfiddle.net/DevinRhode2/B4Usb/5/)

如果您将浏览器缩放设置为 100% 并`zoom: 1.1;`从小提琴中移除，您将看到带有完全包含且居中文本的按钮 - 这种外观就是目标。

通过必要的修改，为原生 mac 样式按钮重新创建 css 可能更容易。

解决这个问题，或者重新创建相同的 OS X 样式并不容易，所以我开始了赏金。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T08:16:25.443

我在 chromium、firefox 和 IE 上进行了检查，一切都缩放得恰到好处，并且在按钮边界之外看不到任何文本。[http://i.imgur.com/q3mZ7.png](http://i.imgur.com/q3mZ7.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T08:53:36.317

在 Chrome 上使用 OSX 确实存在问题，这是由于 OSX 对按钮的默认样式规则处理得非常糟糕。

您可以通过向按钮添加自己的背景样式来修复它：

```
#fixed {
    background: #eee;
    border: 0;
} 
```

我也删除了边框，因为样式按钮的默认边框很丑。

[http://jsfiddle.net/B4Usb/7/](http://jsfiddle.net/B4Usb/7/)

# android - 将文件从 url 下载到 cordova 应用程序错误

> ID：13739311
> 
> 赞同：5
> 
> 时间：2012-12-06T08:03:22.483
> 
> 标签：android, cordova, download

我正在制作一个需要从我的网站下载图像并将它们存储在手机中的应用程序，但是当我尝试 phonegap 时，我会看到所有可能发生的错误。我能做些什么来纠正这个=/？

```
var fileTransfer = new FileTransfer();
fileTransfer.download(
    "http://developer.android.com/assets/images/home/ics-android.png",
    "/",
    function(entry) {
        alert("download complete: " + entry.fullPath);
    },
    function(error) {
        alert("download error source " + error.source);
        alert("download error target " + error.target);
        alert("upload error code" + error.code);
    }); 
```

显示的错误是：

```
Download error source " the url used"
download error target: " the target used  "
upload error code 1 
```

我正在使用科尔多瓦 2.2.0

这是 logcat 错误日志：

```
 12-06 09:07:26.413: E/FileTransfer(2186): {"target":"\/","source":"http:\/\/developer.android.com\/assets\/images\/home\/ics-android.png","code":1}
12-06 09:07:26.413: E/FileTransfer(2186): java.io.FileNotFoundException
12-06 09:07:26.413: E/FileTransfer(2186):   at org.apache.cordova.FileTransfer.getFileFromPath(FileTransfer.java:794)
12-06 09:07:26.413: E/FileTransfer(2186):   at org.apache.cordova.FileTransfer.access$700(FileTransfer.java:62)
12-06 09:07:26.413: E/FileTransfer(2186):   at org.apache.cordova.FileTransfer$4.run(FileTransfer.java:631)
12-06 09:07:26.413: E/FileTransfer(2186):   at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
12-06 09:07:26.413: E/FileTransfer(2186):   at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
12-06 09:07:26.413: E/FileTransfer(2186):   at java.lang.Thread.run(Thread.java:856) 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-06T19:14:11.353

你是如此接近，它只是你的目标文件是错误的。尝试：

```
var fileTransfer = new FileTransfer();
fileTransfer.download(
    "http://developer.android.com/assets/images/home/ics-android.png",
    "file://sdcard/ics-android.png",
    function(entry) {
        alert("download complete: " + entry.fullPath);
    },
    function(error) {
        alert("download error source " + error.source);
        alert("download error target " + error.target);
        alert("upload error code" + error.code);
    }); 
```

您需要“file://”前缀，并且由于您没有权限，因此无法保存到“/”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-10T07:15:00.720

我已经尝试过，并且可以在 Android 中使用，但我还没有在 ios 中检查。并且下载成功，因为我在我的项目中使用它。

```
enter code here
 function fun(){
var dfd = $.Deferred(function (dfd){
var remoteFile = "Your link";
var localFileName = remoteFile.substring(remoteFile.lastIndexOf('/')+1);
window.requestFileSystem(LocalFileSystem.PERSISTENT, 0, function(fileSystem) {
fileSystem.root.getFile(localFileName, {create: true, exclusive: false},
    function(fileEntry) {
var localPath = fileEntry.fullPath;
if (device.platform === "Android" && localPath.indexOf("file://") === 0) {
            localPath = localPath.substring(7);
            }// You need to write IOS instead of Android

    var ft = new FileTransfer();
    ft.download(remoteFile, localPath, function(entry) {
    dfd.resolve('file downloaded');
     // Do what you want with successful file downloaded and then
    // call the method again to get the next file
    //downloadFile();
            }, fail);
             }, fail);
            }, fail);

           });
            return dfd.promise();

        }
                fun().then(function(msg){
            if(msg==="file downloaded")
            {
            alert("Download complete");
            }
            else
            {
            alert("Download error")
            }
            });
            function fail(){
            alert("error");
        } 
```

# macos - 将 pngquant 与 AppleScript 一起使用

> ID：13739313
> 
> 赞同：1
> 
> 时间：2012-12-06T08:03:27.863
> 
> 标签：macos, png, applescript, image-optimization

任何人都可以共享一个使用 pngquarnt 优化文件夹中图像的苹果脚本。甚至可能是一项有用的 Apple 服务。

注意：有一个终端命令可以做同样的事情，但我说的是一个新手，他可以右键单击包含图像的文件夹并优化它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T19:03:11.453

这将处理您选择的文件夹中的所有 png 文件：

```
set myFolder to POSIX path of (choose folder)
set myFiles to do shell script "find " & quoted form of myFolder & " -name *.png -print0 | xargs -0 usr/local/bin/pngquant" 
```

编辑 Hamdullah 的回答使用与我的回答非常相似的以下行：

```
find $@ -name '*.png' -exec pngquant -ext .png -speed 1 -force 256 {} \; 
```

但是，在处理大批量文件时，xargs 比 exec 更可取。它更快，因为当您使用“-exec”时，它会为找到的每个文件启动一个新进程

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T06:04:49.880

从以下路径下载 zip 并按照自述文件 [https://github.com/hamdullahshah/Automator-App-for-PngQuant中的步骤操作](https://github.com/hamdullahshah/Automator-App-for-PngQuant)

您可以通过更改“PngCompression WorkFlow”中的命令来更改参数，然后将其保存为应用程序。

# json - 在 nodejs 中，当使用 json.stringify() -> 错误

> ID：13739327
> 
> 赞同：0
> 
> 时间：2012-12-06T08:04:36.257
> 
> 标签：json, node.js

我有 json 对象（从数据库返回的这个 json 对象）：

> { created_at: '2012 年 11 月 21 日星期三 19:28:24 +0000', id: 271334264140869630, id_str: '271334264140869633', }{ created_at: '2012 年 11 月 21 日星期三 19:28:24 +0000 2012 年 3 月 24 日', id: 271334264140869633', id: 27133424 ：'27​​1334264140869633'，}

当我使用 JSON.stringify(obj) ->

> {“created_at”：“2012 年 11 月 21 日星期三 19:28:24 +0000”，“id”：“271334264140869630”，“id_str”：“271334264140869633”}{“created_at”：“11 月 21 日星期三 19:28:24 + 0000 2012”，“id”：“271334264140869630”，“id_str”：“271334264140869633”}

这个 obj 在[http://jsonlint.com/](http://jsonlint.com/)上无效，因为错误：**期望 'EOF', '}', ',', ']'**

请帮我解决这个错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T08:10:28.940

以下是您的有效 JSON。

```
[
    {
        "created_at": "WedNov2119: 28: 24+00002012",
        "id": 271334264140869630,
        "id_str": "271334264140869633"
    },
    {
        "created_at": "WedNov2119: 28: 24+00002012",
        "id": 271334264140869630,
        "id_str": "271334264140869633"
    }
] 
```

1.  如果父对象中存在多个对象，则形成一个数组，并应以逗号“，”分隔。数组应该用方括号“[]”包裹
2.  对象的 Id 必须是字符串，才能被 jsonlint 验证。如果 value 是字符串，则用双引号 "" 将其引用。

这是测试字符串化操作的[jsfiddle](http://jsfiddle.net/umeshpatil86/89Zvw/)

# java - 表格组件中的 iReport 单元格跨度

> ID：13739336
> 
> 赞同：0
> 
> 时间：2012-12-06T08:05:05.557
> 
> 标签：java, jasper-reports, ireport, xmltable

我正在使用 iReport 来显示来自`net.sf.jasperreports.engine.data.JRTableModelDataSource`表格中的数据。我使用的是 TableModelDataSource，因为我必须使用 Java 作为数据源。

我现在得到了以下代码，它工作正常：

```
<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="controltest" pageWidth="595" pageHeight="842" columnWidth="535" leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20">
    <property name="ireport.zoom" value="1.3310000000000022"/>
    <property name="ireport.x" value="0"/>
    <property name="ireport.y" value="276"/>
    <property name="ireport.callouts" value="##Wed Dec 05 08:22:05 CET 2012"/>
    <subDataset name="plantsResultTable">
        <field name="COLUMN_0" class="java.lang.String"/>
        <field name="COLUMN_1" class="java.lang.String"/>
        <field name="COLUMN_2" class="java.lang.String"/>
        <field name="COLUMN_3" class="java.lang.String"/>
        <field name="COLUMN_4" class="java.lang.String"/>
        <field name="COLUMN_5" class="java.lang.String"/>
        <field name="readActualSupply" class="java.lang.String"/>
        <group name="supplyGroup">
            <groupExpression><![CDATA[$F{readActualSupply}]]></groupExpression>
        </group>
    </subDataset>
    <field name="remotelyControlledSupply" class="java.lang.String"/>
    <field name="thirdPartyAccess" class="java.lang.String"/>
    <field name="plantsResultTable" class="net.sf.jasperreports.engine.JRDataSource"/>
    <background>
        <band/>
    </background>
    <pageHeader>
        <band/>
    </pageHeader>
    <detail>
        <band height="675">
            <frame>
                <reportElement x="0" y="250" width="555" height="239"/>
                <componentElement>
                    <reportElement key="table 2" x="0" y="17" width="555" height="222"/>
                    <jr:table xmlns:jr="http://jasperreports.sourceforge.net/jasperreports/components" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports/components http://jasperreports.sourceforge.net/xsd/components.xsd">
                        <datasetRun subDataset="plantsResultTable">
                            <dataSourceExpression><![CDATA[$F{plantsResultTable}]]></dataSourceExpression>
                        </datasetRun>
                        <jr:column width="90">
                            <jr:columnHeader height="30">
                                <staticText>
                                    <reportElement x="0" y="0" width="90" height="30"/>
                                    <textElement/>
                                    <text><![CDATA[COLUMN_0]]></text>
                                </staticText>
                            </jr:columnHeader>
                            <jr:detailCell height="20">
                                <textField pattern="">
                                    <reportElement x="0" y="0" width="90" height="20">
                                        <printWhenExpression><![CDATA[$V{supplyGroup_COUNT} == 1]]></printWhenExpression>
                                    </reportElement>
                                    <textElement/>
                                    <textFieldExpression class="java.lang.String"><![CDATA[$F{COLUMN_0}]]></textFieldExpression>
                                </textField>
                            </jr:detailCell>
                        </jr:column>
                        <jr:column width="90">
                            <jr:columnHeader height="30">
                                <staticText>
                                    <reportElement x="0" y="0" width="90" height="30"/>
                                    <textElement/>
                                    <text><![CDATA[COLUMN_1]]></text>
                                </staticText>
                            </jr:columnHeader>
                            <jr:detailCell height="20">
                                <textField>
                                    <reportElement x="0" y="0" width="90" height="20"/>
                                    <textElement/>
                                    <textFieldExpression class="java.lang.String"><![CDATA[$F{COLUMN_1}]]></textFieldExpression>
                                </textField>
                            </jr:detailCell>
                        </jr:column>
                        <jr:column width="90">
                            <jr:columnHeader height="30">
                                <staticText>
                                    <reportElement x="0" y="0" width="90" height="30"/>
                                    <textElement/>
                                    <text><![CDATA[COLUMN_2]]></text>
                                </staticText>
                            </jr:columnHeader>
                            <jr:detailCell height="20">
                                <textField>
                                    <reportElement x="0" y="0" width="90" height="20"/>
                                    <textElement/>
                                    <textFieldExpression class="java.lang.String"><![CDATA[$F{COLUMN_2}]]></textFieldExpression>
                                </textField>
                            </jr:detailCell>
                        </jr:column>
                        <jr:column width="90">
                            <jr:columnHeader height="30">
                                <staticText>
                                    <reportElement x="0" y="0" width="90" height="30"/>
                                    <textElement/>
                                    <text><![CDATA[COLUMN_3]]></text>
                                </staticText>
                            </jr:columnHeader>
                            <jr:detailCell height="20">
                                <textField>
                                    <reportElement x="0" y="0" width="90" height="20"/>
                                    <textElement/>
                                    <textFieldExpression class="java.lang.String"><![CDATA[$F{COLUMN_3}]]></textFieldExpression>
                                </textField>
                            </jr:detailCell>
                        </jr:column>
                        <jr:column width="90">
                            <jr:columnHeader height="30">
                                <staticText>
                                    <reportElement x="0" y="0" width="90" height="30"/>
                                    <textElement/>
                                    <text><![CDATA[COLUMN_4]]></text>
                                </staticText>
                            </jr:columnHeader>
                            <jr:detailCell height="20">
                                <textField>
                                    <reportElement x="0" y="0" width="90" height="20"/>
                                    <textElement/>
                                    <textFieldExpression class="java.lang.String"><![CDATA[$F{COLUMN_4}]]></textFieldExpression>
                                </textField>
                            </jr:detailCell>
                        </jr:column>
                        <jr:column width="90">
                            <jr:columnHeader height="30">
                                <staticText>
                                    <reportElement x="0" y="0" width="90" height="30"/>
                                    <textElement/>
                                    <text><![CDATA[COLUMN_5]]></text>
                                </staticText>
                            </jr:columnHeader>
                            <jr:detailCell height="20">
                                <textField>
                                    <reportElement x="0" y="0" width="90" height="20"/>
                                    <textElement/>
                                    <textFieldExpression class="java.lang.String"><![CDATA[$F{COLUMN_5}]]></textFieldExpression>
                                </textField>
                            </jr:detailCell>
                        </jr:column>
                    </jr:table>
                </componentElement>
            </frame>
        </band>
    </detail>
    <columnFooter>
        <band/>
    </columnFooter>
    <pageFooter>
        <band/>
    </pageFooter>
    <summary>
        <band/>
    </summary>
</jasperReport> 
```

我现在需要知道的是

1.  有没有办法将 COLUMN_0 值垂直居中（将垂直对齐设置为“中心”）。我想它必须像这样`if $V{supplyGroup_COUNT} == $V{supplyGroup_SIZE}/2`。我在“实际”下显示了表格，但我希望它动态地看起来像“目标”。 ![垂直对齐](../Images/68020c6156c90871633db760a8d511e3.png)
2.  如果表有分页符，有没有办法打印另一个 COLUMN_0 值。也就是说，表格从第 1 页开始，并在第 2 页结束。我可以在第 1 页和第 2 页上打印 COLUMN_0 值吗？我在`<printWhenExpression><![CDATA[$V{supplyGroup_COUNT} == 1 || $P{hasPageBreak}.equals("1"))]]></printWhenExpression>`表的 textField 中添加了一个，但编译器抱怨无法找到参数 hasPageBreak。目前，我只计算表中的项目，如果 $V{supplyGroup_COUNT} == 20 并且如果有新页面，则放置另一个可见的“文本”。

![中断后重复值](../Images/0f23a0740cae07eff738856afd39149b.png) 3.有没有办法在物品达到一定数量后强制打破桌子？我在表格后面有一些文字。我希望始终将表格的至少一部分（末尾）与以下文本一起保留。还是我必须使用两个单独的表？

![打破桌子](../Images/f902cc35e919f08eaafb8a7246bef3a3.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T20:58:33.897

1）是的，您可以垂直对齐表格单元格内容

```
<textElement verticalAlignment="Middle"/> 
```

我用一种风格

```
<style name="table_TD" vAlign="Middle" /> 
```

我不确定其他两个（欢迎贡献）

2) isReprintHeaderOnEachPage 适用于组标题，但我不确定是否适用于表格？（我经常使用缩减的子报表来代替表格。）

3）带上的[拆分类型](http://jasperreports.sourceforge.net/api/net/sf/jasperreports/engine/type/SplitTypeEnum.html)可能会有所帮助，但如果“某些文本”是一个单独的对象，我不相信你可以阻止它成为孤立对象

希望有帮助

# android - 如何使用 USB 连接安卓平板电脑的外置摄像头

> ID：13739338
> 
> 赞同：0
> 
> 时间：2012-12-06T08:05:06.523
> 
> 标签：android, android-layout, android-intent, android-emulator, android-widget

> 我需要使用 USB 将外部摄像头与基于 Android 的平板电脑连接，并且我需要保存照片和视频。任何人都可以帮助我开发应用程序

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T08:27:35.973

如果您的手机有标准的**USB 大容量存储驱动程序**，那么当您将其连接到您的设备时会自动检测到它，但如果它有**自定义驱动程序**或**公司特定**的驱动程序，那么它将无法在您的设备上运行。

# php - 如何在wordpress中为作者页面添加分页

> ID：13739339
> 
> 赞同：1
> 
> 时间：2012-12-06T08:05:12.263
> 
> 标签：php, wordpress

`<?php wp_pagenavi( array( 'type' => 'multipart' ) ); ?>`我尝试使用 WP-PageNavi 插件并在循环下的 auther.php 页面中安装插件和宫殿代码，但它显示分页但不显示是否有任何设置我必须在后端的选项页面中更改..??

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T08:11:32.263

我在wordpress中使用这个插件希望它对你有帮助。

[试试这个插件](http://wordpress.org/extend/plugins/wp-paginate/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T08:40:58.253

在循环之后尝试这段代码：

```
<?php //Set Blog Reading Settings to XX for optimum view!!
global $wp_query;
$big = 999999999; // need an unlikely integer
echo paginate_links( array( 'base'    => str_replace( $big, '%#%', get_pagenum_link( $big ) ),
                            'format'  => '?paged=%#%',
                            'current' => max( 1, get_query_var( 'paged' ) ),
                            'total'   => $wp_query->max_num_pages,
                            'end_size'=> 1,
                            'mid_size'=> 10 ) );
?> 
```

希望能帮助到你。

# android - 为什么在谷歌云打印集成代码中使用条码扫描器代码？

> ID：13739340
> 
> 赞同：1
> 
> 时间：2012-12-06T08:05:26.977
> 
> 标签：android, barcode-scanner, google-cloud-print

[https://developers.google.com/cloud-print/docs/android](https://developers.google.com/cloud-print/docs/android)上的 Google 云打印集成代码 也使用 zxing 条码扫描器代码。请参考：

```
public boolean shouldOverrideUrlLoading(WebView view, String url) {
  if (url.startsWith(ZXING_URL)) {
    Intent intentScan = new Intent("com.google.zxing.client.android.SCAN");
    intentScan.putExtra("SCAN_MODE", "QR_CODE_MODE");
    try {
      startActivityForResult(intentScan, ZXING_SCAN_REQUEST);
    } catch (ActivityNotFoundException error) {
      view.loadUrl(url);
    }
  } else {
    view.loadUrl(url);
  }
  return false;
} 
```

知道这里发生了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T08:10:19.463

如果 url 以 ZXING zxing:// 开头，它会尝试扫描当前文档是否存在 QR 码，如果存在，则加载 url，然后将其加载到视图中。

[http://code.google.com/p/zxing/wiki/ScanningFromWebPages](http://code.google.com/p/zxing/wiki/ScanningFromWebPages)

但这仅适用于以 zxing:// 开头的页面

# iphone - 从 Google App Engine 系统保存 iOS 联系人

> ID：13739345
> 
> 赞同：1
> 
> 时间：2012-12-06T08:05:41.590
> 
> 标签：iphone, ios, google-app-engine, calendar, contact

我们有一个基于 Google App Engine 的系统并且想要创建新的应用程序。此应用程序可帮助用户通过单击我们网站上的按钮轻松保存联系人。（喜欢这个网站[http://iphone.mobicontact.info/](http://iphone.mobicontact.info/) --> 在 iOS 上浏览并点击“将联系人下载到 Iphone”）

根据[http://mobicontact.info/iphone/download-contact-from-web-page/](http://mobicontact.info/iphone/download-contact-from-web-page/)我们必须使用 ics 文件（日历）包含 vcf 文件（联系人）来做我们的业务。顺便说一句，我们为生成 ics 文件（没有 vcf 文件）创建了一个 servlet，但它不能正常工作。（我认为在 ics 文件内容中有 vcf 文件。另外，我无法在 GAE 服务器上创建文件，[Google App Engine 是否允许在服务器上创建文件和文件夹？](https://stackoverflow.com/questions/2693081/does-google-app-engine-allow-creation-of-files-and-folders-on-the-server)）。

任何人都可以帮助我并告诉我如何从 GAE 系统创建 iOS 联系人文件？太感谢了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T10:25:47.623

You can create any file you want on the "server" you just can't save it back to the local filesystem, you have to use the blobstore or similar. Or you can just send it to the user without saving it at all after creating it on the fly in response to a request.

You can use the [blobstore](https://developers.google.com/appengine/docs/python/blobstore/) or the normal NDB/DB [storage](https://developers.google.com/appengine/docs/python/ndb/overview). For files the size of the ones you mention the latter would be fine I'm sure.

As to why your ics file is not working, I'd say you need to ask another question or update this one with some details of why it "does not work properly" before anyone can help.

# c# - 为什么我不能在 C# 中序列化元组？

> ID：13739348
> 
> 赞同：26
> 
> 时间：2012-12-06T08:05:52.587
> 
> 标签：c#, serialization, tuples

> **可能重复：**
> [为什么 XML-Serializable 类需要无参数构造函数](https://stackoverflow.com/questions/267724/why-xml-serializable-class-need-a-parameterless-constructor)

我正在尝试在我的代码中序列化一个元组：

```
List<List<Tuple<String, CodeExtractor.StatementNode>>> results = null;
results = extractor.ExtractSourceCode(sourceCode);
FileStream fs = new FileStream(@"C:\Projects\Test\ast.xml", FileMode.Create);

XmlSerializer formatter = new XmlSerializer(
    typeof(List<List<Tuple<String, CodeExtractor.StatementNode>>>));

formatter.Serialize(fs, results);

fs.Close(); 
```

但它失败了并捕获了这样的异常：

> System.Tuple`2[System.String,CodeExtractor.StatementNode] 无法序列化，因为它没有无参数构造函数。

我确信`CodeExtractor.StatementNode`可以序列化。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-12-06T08:10:36.737

为了`XmlSerializer`能够完成它的工作，它需要一个默认的构造函数。那是一个不带参数的构造函数。所有`Tuple<...>`类都有一个构造函数，并且该构造函数接受许多参数。元组中的每个值一个。所以在你的情况下，唯一的构造函数是

```
Tuple(T1 value1, T2 value2) 
```

序列化程序正在寻找一个没有参数的构造函数，因为它找不到它，所以你得到了异常。

您可以创建一个可变类，该类可以替换元组以进行序列化

```
class MyTuple<T1, T2>
{
    MyTuple() { }

    public T1 Item1 { get; set; }
    public T2 Item2 { get; set; }

    public static implicit operator MyTuple<T1, T2>(Tuple<T1, T2> t)
    {
         return new MyTuple<T1, T2>(){
                      Item1 = t.Item1,
                      Item2 = t.Item2
                    };
    }

    public static implicit operator Tuple<T1, T2>(MyTuple<T1, T2> t)
    {
        return Tuple.Create(t.Item1, t.Item2);
    }
} 
```

然后您可以通过以下方式使用它

```
XmlSerializer formatter = new XmlSerializer(
    typeof(List<List<MyTuple<String, CodeExtractor.StatementNode>>>));

formatter.Serialize(fs, results.SelectMany(
                              lst => lst.Select(
                                        t => (MyTuple)t
                                     ).ToList()
                              ).ToList()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T08:09:55.620

正如异常告诉您的那样：[`Tuple<T1, T2>`](http://msdn.microsoft.com/en-us/library/dd268536.aspx)没有序列化程序所需的无参数构造函数。

# html - 为什么 readonly 在 IE 8 和 IE 9 中不起作用？

> ID：13739355
> 
> 赞同：0
> 
> 时间：2012-12-06T08:06:22.763
> 
> 标签：html, css

HTML，只读在 IE 8 和 IE 9 中不起作用，如果有其他方法可以解决，

这是我的代码，

```
<input
  size="15"
  type="text"
  name="oldValueMonthlyLimit"
  id="oldValueMonthlyLimit"
  readonly =true
  value="<%=oldValueMonthlyLimit%>"> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T11:22:30.747

然后使用禁用。

```
<input
size="15"
type="text"
name="oldValueMonthlyLimit"
id="oldValueMonthlyLimit"
disabled value="text" > 
```

[关联](http://jsfiddle.net/eQsxU/2/)

另请参阅： [示例](https://stackoverflow.com/questions/7917592/html-cursor-showing-in-readonly-input-text)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T08:09:48.393

你试过`readonly="readonly"`吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-05-14T06:07:34.000

'disabled' 输入元素用于防止其值被提交。

'readonly' 输入元素在 IE 8,9、10 或 11 中不起作用。

在这种情况下，我们可以使用**onkeydown="javascript: return false;"** 用于受保护（禁用）输入元素并以 post data 形式接收其值

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-06T08:12:25.570

来自 w3schools：

```
<input readonly="readonly"> 
```

注意：readonly 属性是一个布尔属性，可以通过以下方式设置：

```
<input readonly>
<input readonly="readonly">
<input readonly=""> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-02-03T11:29:35.067

试试这个：

```
<input type="text" onfocus="this.blur()" readonly="" > 
```

同样在 CSS 中，放置它以使光标在悬停在输入上时不会改变。

```
cursor: inherit; 
```

# php - 比较javascript时间和php时间

> ID：13739356
> 
> 赞同：0
> 
> 时间：2012-12-06T08:06:27.053
> 
> 标签：php, javascript, localtime

我在一家餐厅工作，我有特定的点餐时间。如何将预设时间范围与当前访问者的时间进行比较？

我还需要通过表格设置这个预设的时间范围。

谢谢

编辑：

我试图将日期数字相乘并进行比较，但我不确定它有多可靠。除此之外，我不能要求时间，我需要用 javascript 来获取它们。

更确切地说，我需要让客户将来更改订购时间。

编辑 2：我不能只比较 php 中的时间、预设时间范围与当前时间并放弃 JavaScript 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T08:13:11.127

当您获取 DateTime 对象时，在大多数语言中，您可以使用时区偏移量获取它。在 Javascript 中，您可以使用 UTC 日期来比较项目。

看看这个[MDN 日期时间](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date)

确保给出带有时区偏移的完整 DateTime 对象，应该是从 PHP 到 JavaScript 还是其他方式。

我还建议在服务器端进行最终检查（即：在 PHP 中）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T09:42:28.350

Javascript 方法`Date.getTime()`以毫秒为单位返回时间戳值，php`time()`以秒为单位，您可以将这两个值减少到秒并进行比较。您的客户是否共享相同的时区？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T10:39:32.160

您总是可以在 PHP 中轻松地操作 [Unix] 时间戳。看看PHP的`strtotime()`函数。

您应该能够以适合您当前需求的方式使用它！

# android - 无法使 Android 应用内结算示例应用正常工作

> ID：13739360
> 
> 赞同：7
> 
> 时间：2012-12-06T08:06:53.260
> 
> 标签：android, in-app-purchase, in-app-billing

我已尝试根据[http://developer.android.com/google/play/billing/billing_integrate.html#billing-download](http://developer.android.com/google/play/billing/billing_integrate.html#billing-download)中的步骤让应用内计费示例应用程序正常工作。

我将在最后指定我所做的一切+添加日志。我希望有人能够告诉我我做错了什么。

**这是我所做的一切**（我知道它很长......但我想确保我没有忘记任何事情）：

我将 Dungeons 项目导入我的工作区，并将我的 Google 公钥导入 Security.java 的 base64EncodedPublicKey 变量。我从添加到我的 Google 开发者帐户的新应用程序中获得了该公钥。

我根据要求更改了应用程序包的名称，因此它没有 com.example 前缀

我构建应用程序并通过“Android 工具”->“导出签名的应用程序包...”登录

我将该 APK 上传到我在开发者帐户中创建的新应用程序（我从中获取公钥的那个）

我将应用产品添加到新应用中，并使用与地下城项目中相同的 ID（sword_001、postion_001）并激活它们。

我在“设置”->“具有测试访问权限的 Gmail 帐户”中向我的开发者帐户添加了一个测试帐户，该帐户不是我的开发者帐户，而是我创建的一个新帐户。

我在设备上安装了签名的应用程序，我将其恢复出厂设置并使用添加到开发者帐户的测试帐户登录。

**我的设备**

我在没有 SIM 卡的 android 2.3.4 设备上安装了该应用程序（这是我的测试设备）。谷歌播放版本：3.10.9

**结果**

当我尝试购买其中一种产品时，我收到“item not available”错误（实际上我收到了两次）。我尝试将 DEBUG 设置为 true，现在我收到“从服务器检索信息时出错。[RPC:S-5:AEC-0]”（两次...）

**日志：**

```
12-06 07:58:42.255: D/Finsky(1955): [7] MarketBillingService.getPreferredAccount: com.sakal.billingtest.merchant: Account from first account.
12-06 07:58:42.275: D/Finsky(1955): [7] MarketBillingService.getPreferredAccount: com.sakal.billingtest.merchant: Account from first account.
12-06 07:58:42.325: D/Finsky(1955): [27] MarketBillingService.getPreferredAccount: com.sakal.billingtest.merchant: Account from first account.
12-06 07:58:42.335: D/Finsky(1955): [27] MarketBillingService.getPreferredAccount: com.sakal.billingtest.merchant: Account from first account.
12-06 07:58:42.991: E/Volley(1955): [15] BasicNetwork.performRequest: Unexpected response code 500 for https://android.clients.google.com/fdfe/details?doc=subs:com.sakal.billingtest.merchant:potion_001
12-06 07:58:44.785: D/Finsky(1955): [1] MarketBillingService.sendResponseCode: Sending response RESULT_ERROR for request 8273178932293834331 to com.sakal.billingtest.merchant.
12-06 07:58:44.785: I/BillingService(3173): handleCommand() action: com.android.vending.billing.RESPONSE_CODE
12-06 07:58:45.551: E/Volley(1955): [14] BasicNetwork.performRequest: Unexpected response code 500 for https://android.clients.google.com/fdfe/details?doc=inapp:com.sakal.billingtest.merchant:potion_001
12-06 07:58:46.225: D/Finsky(1955): [1] MarketBillingService.sendResponseCode: Sending response RESULT_ERROR for request 2493329704825383333 to com.sakal.billingtest.merchant.
12-06 07:58:46.245: I/BillingService(3173): handleCommand() action: com.android.vending.billing.RESPONSE_CODE 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T09:42:08.770

好的，问题解决了。这只是时间问题……我想 Google 的服务器花了一段时间来更新我对开发者帐户的添加，但现在它可以工作了，我终于可以从自己那里买一瓶药水了。

现在有新的问题。

1.  当我选择要购买的商品时，我首先收到“找不到商品”错误，当我单击“确定”时，我在 google play 中看到了该产品。这在别人身上发生过吗？

2.  我购买了几件新物品，我在我的谷歌结帐帐户上看到订单已“发货”，但在结算测试应用程序中，在“您拥有的物品”下，我什么也没看到......

3.  在[http://developer.android.com/google/play/billing/billing_integrate.html#billing-download](http://developer.android.com/google/play/billing/billing_integrate.html#billing-download)他们建议

> 退款使用测试帐户进行的购买，否则购买将显示为您的商家帐户的实际付款

我在哪里可以进行退款？在我的谷歌结帐帐户中，“退还一些钱”项目是灰色的......

有谁知道如何处理这些问题？

# batch-file - 在文件系统的每个文件夹上执行复杂的命令

> ID：13739363
> 
> 赞同：0
> 
> 时间：2012-12-06T08:07:08.827
> 
> 标签：batch-file, cmd

我需要经常执行以下命令来压缩文件夹中的所有 PNG 文件：

```
for %i in (*.png) do pngout.exe "%i" /kp 
```

所以我在 png.cmd 文件中添加了这个命令，并将文件夹添加到系统 PATH 中。

但是，当我从文件系统中的某个点执行命令 (png.cmd) 时，出现以下错误：

```
C:\Users\Desktop>png  
i" /kp was unexpected at this time. 
```

有没有办法解决这个问题，我也在考虑 shell 将在哪里执行 png.cmd 命令？在我创建 png.cmd 文件的路径中？我需要在我使用 shell 的当前 PATH 中执行它。
任何的想法？非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T08:58:18.427

您的语法错误是由于`%`在`for`循环变量中仅使用 1 引起的，当您使用批处理文件时，您需要使用 2 来转义第一个。

```
for %%i in (*.png) do pngout.exe "%%i" /kp 
```

关于你的路径问题，先解决这个问题，然后看看它是否仍然是一个问题。

# java - 正则表达式模式匹配数据和日期

> ID：13739366
> 
> 赞同：0
> 
> 时间：2012-12-06T08:07:27.237
> 
> 标签：java, regex, pattern-matching

我只需要在文件名的开头过滤掉与 [LCK_ or OPN_] 匹配的字符串，而不考虑其他任何地方。

示例源字符串：

```
LCK_card_L02NOR19999_2012-11-07-121600 [Invalid/Filter it]
BLTM_L183ROP3289_2012-11-07-121601 [Valid one]
TEMP_LCK_card_L02NOR19999_2012-11-07-121600 [Valid one] 
```

我试过这样：

```
LCK_|OPN_ 
```

但它也匹配 TEMP_LCK_XXXXX。

如何组合我的要求的模式 [忽略 LCK_ 或 OPN_ 并提取日期]？

我的日期提取正则表达式模式

```
(19|20)\\d\\d[-](0[1-9]|1[012])[-](0[1-9]|[12][0-9]|3[01])[-]\\d\\d\\d\\d\\d\\d] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T08:10:26.707

`^(LCK_|OPN_)`-`^`代表输入的开始。

为了将它与您的正则表达式的其余部分结合起来，请跳过任意数量的任意字符：

```
^(?:LCK_|OPN_).*(19|20)\\d\\d..... 
```

（`?:`如果您不想捕获`LCK_`并`OPN_`成组，请使用）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T08:13:40.550

文件的开头，还是行的开头？

试试这个...

```
"^(LCK_|OPN_).*" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-06T08:17:49.903

考虑这段代码：

```
String[] strs = new String[] {
    "LCK_card_L02NOR19999_2012-11-07-121600", // Invalid
    "BLTM_L183ROP3289_2012-11-07-121601", // Valid one
    "TEMP_LCK_card_L02NOR19999_2012-11-07-121600" // Valid one
};

String pattern = "^(?!(LCK_|OPN_))(.*)((19|20)[0-9]{2}-(0[1-9]|1[012])-(0[1-9]|[12][0-9]|3[01])-[0-9]{6}).*";

for (String string : strs) {
    boolean m = string.matches(pattern);
    System.out.println(m ? "Valid" : "Invalid");
} 
```

这将首先匹配字符串的开头（用 表示`^`），然后匹配*除* `LCK_`or之外的任何内容`OPN_`（用 表示`?!`），然后是 0 个或多个任意字符，然后是您的日期模式，然后可能是多个字符。

# wpf - 展开 DockPanel 的最后一个子项以填充用户调整大小的表单的其余部分

> ID：13739373
> 
> 赞同：0
> 
> 时间：2012-12-06T08:08:07.110
> 
> 标签：wpf, wpf-controls

当用户重新调整它的大小时，我在让 WPF 表单的最后一个子表单随表单扩展时遇到问题。最后一个元素是几个停靠的停靠面板（嵌套停靠面板）中的最后一个。我对停靠面板的理解是最后添加的未停靠的元素将扩展以填充所提供的剩余空间。但是，我无法获得这种行为，无论是通过使用错误的控件还是我没有看到的 XAML 中的某些错误；任何帮助，将不胜感激。

请记住，我是 XAML 和 WPF 的新手，所以我的术语和控件的使用可能有点粗糙。

```
<Grid>
    <TabControl Margin="1">
        <TabItem Header="TabItem">
            <DockPanel LastChildFill="True" Height="Auto">
                <Expander Header="Client Details" FlowDirection="RightToLeft" IsExpanded="True" Background="#FFC9C9B9" DockPanel.Dock="Top">
                    <Grid Grid.Row="0" FlowDirection="LeftToRight">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        <StackPanel Grid.Column="0" Margin="3">
                            <Label Content="Client Name:" Padding="3"/>
                            <TextBox Padding="3"/>
                            <Label Content="SPA Number:" Padding="3"/>
                            <TextBox Padding="3"/>
                        </StackPanel>
                        <StackPanel Grid.Column="1" Margin="3">
                            <Label Content="Session ID:" Padding="3"/>
                            <TextBox Padding="3"/>
                            <Label Content="Agent Name:" Padding="3"/>
                            <TextBox Padding="3"/>
                        </StackPanel>
                    </Grid>
                </Expander>
                <DockPanel Margin="2" DockPanel.Dock="Top" Background="DarkGray">
                    <Button Content="Copy" Margin="2" DockPanel.Dock="Right" Padding="3"/>
                    <Button Content="New Session" Padding="3" Margin="2" FontWeight="Bold"/>
                    <Label Content="Session ID:" Padding="3" Margin="2" FontWeight="Bold"/>
                    <ComboBox Padding="3"/>
                </DockPanel>
                <DockPanel Margin="5" DockPanel.Dock="Top">
                    <Label Content="Session ID:"/>
                    <TextBox MinWidth="60" Padding="3"/>
                    <Label Content="Session Type:"/>
                    <ComboBox Padding="3"/>
                </DockPanel>
                <DockPanel Margin="5" DockPanel.Dock="Top" VerticalAlignment="Top">
                    <Label Content="Problem:" MinWidth="60"/>
                    <RichTextBox Padding="3" VerticalScrollBarVisibility="Auto" MaxHeight="100" MinHeight="80"/>
                </DockPanel>
                **<DockPanel Margin="5" VerticalAlignment="Top" Background="AliceBlue">
                    <Label Content="Notes:" MinWidth="60"/>
                    <RichTextBox Padding="3" VerticalScrollBarVisibility="Auto" MaxHeight="400" MinHeight="200"/>
                </DockPanel>**
            </DockPanel>
        </TabItem>
    </TabControl>
</Grid> 
```

这个嵌套 DockPanel 列表中的最后一个 DockPanel（由 ** 包围）是我试图填充表单的空间，因为它垂直调整大小，但是，它根本没有调整大小。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T13:12:56.783

`VerticalAlignment="Top"`从最后一个 DockPanel 中删除。这将跳回拉伸，使其填充剩余空间（最大高度为 400）。

# javascript - 即使在关闭 ui 对话框后，jquery 验证消息仍然可见

> ID：13739374
> 
> 赞同：1
> 
> 时间：2012-12-06T08:08:06.877
> 
> 标签：javascript, jquery, jquery-validate

我正在使用 jquery.validate 插件。我在 jquery ui 对话框中有一个 html 表单。当用户打开对话框并尝试提交表单时，如果表单包含验证错误，同时如果用户关闭对话框并且当他再次打开它时，验证消息仍然存在。我还创建了一个小提琴：

[http://jsbin.com/aralur/4/edit](http://jsbin.com/aralur/4/edit)

如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T08:21:59.680

只需使用这种方式：

```
$('.ui-icon-closethick').click(function(){
    $('.error').text('');
}); 
```

并在此处的工作箱中看到-

> **[http://jsbin.com/aralur/5/edit](http://jsbin.com/aralur/5/edit)**

.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T08:31:20.790

感谢您的回答，我也找到了我想与您分享的问题的解决方案。我们可以在jquery ui 对话框中使用`resetForm()`jquery.validate 插件的功能。`beforeClose event`这是一个工作小提琴：

[http://jsbin.com/aralur/11/edit](http://jsbin.com/aralur/11/edit)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T08:25:16.667

只需在打开对话框之前隐藏错误消息，如下所示：) 这是一种简单的方法。

```
$("#order").bind("click", function(){ 
  $("label.error").hide();
  $("#orderform").dialog("open");
}); 
```

# javascript - 如何运行存储在变量中的 javascript 函数？

> ID：13739375
> 
> 赞同：0
> 
> 时间：2012-12-06T08:08:10.203
> 
> 标签：javascript

我有一个变量，里面有指令，例如：

```
runThis= "alert(); if(1>2) { alert("NO WAY");}"; 
```

如何在 runThis 中运行代码？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T08:10:23.887

```
eval(runThis); 
```

但是你不应该这样写代码，它很难管理。

改为这样做：

```
runThis= function () {
  alert(); 
  if(1>2) { 
    alert("NO WAY");
  };
} 
```

然后只需调用 runThis

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T08:11:09.883

这样做的肮脏方法是

`eval(runThis);`

但是，根本不建议这样做。

或者，将其包装在一个函数中

```
runThis = function(){ 
  // statements go here
} 
```

然后你可以调用它`runThis();`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-06T08:10:30.263

如果你真的想做这种事情，你可以使用 eval() 函数：

```
eval(runThis); 
```

但是，这不是推荐的方法，因为它可能导致各种难以诊断的错误和错误

更好的方法是使用您希望执行的代码编写适当的函数，然后将其分配给变量并通过变量调用它：

```
//Assign function to variable
runThis = function(){ 
  alert();
  if(1>2) {
    alert("NO WAY");
  };
}

//Later, invoke the function
runThis(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-06T08:10:56.200

```
code = "alert('test');";
eval(code); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-06T08:10:56.630

***警告：这是一种可怕的做法！不要这样做！***

```
eval(runThis); 
```

一旦你正确地逃避了你的内心报价。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-06T08:13:12.573

`eval(runThis);`

但不建议这样做。只要记住`eval() is evil`。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-06T08:15:28.347

Eval 将执行一个字符串，但您最好按如下方式定义 run this。并像任何函数一样调用它。

```
var runthis = function(){
     //code  here
} 
```

但是如果你需要执行一个字符串调用 eval。

评估（运行此）；

# iphone - 我可以从我的服务器获取应用内购买的价格吗？

> ID：13739379
> 
> 赞同：2
> 
> 时间：2012-12-06T08:08:22.480
> 
> 标签：iphone, ios, in-app-purchase

目前，我的 iOS 应用程序必须向我的服务器询问可用的应用内购买产品，然后，对于产品，应用程序必须向 Apple 询问它们的价格。

为此增加的延迟可能并不多，但我想让它更快。

我可以不使用我的服务器而不是客户端来获取这些价格吗？也就是说，是否有一个基于 HTTP 的 API，我可以从服务器而不是客户端使用它来获取价格？这样我就可以为不同的用户缓存结果并减少往返时间。如果是这样，我该怎么做？如果没有，你是通过什么方式处理这个问题的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T09:17:41.970

****Client**-iOS App **DS** -Developer Server **AppleS -Apple** Server**

**与 DS 和 AppleS**
的客户端通信 当客户端与 AppleS 通信时，您有几个优点（如下所述），而不是时间消耗的单一缺点。

1.  当您向 AppleS 发送一组应用内产品时，它会匹配一个有效的并发送有效产品 ID 的数组列表（SKProduct 数组）。这完全消除了针对您的应用展示尚未注册、批准和许可销售的产品的风险。

2.  本地化 - 以价格为例。假设我在美国和英国销售产品。该产品的价格将以 DS 中的美元计价。因此，您最终会向英国的用户显示以美元为单位的价格。（为了克服这个问题，DS**在某种程度上**应该有一种机制来根据用户所在的国家/地区本地化货币）。

**仅与 DS 进行客户沟通**
回答您的问题；是的，你可以使用 DS 来获取产品的价格。您可以通过向产品对象添加另一个属性（价格）来实现这一点（来自您服务器上可用的应用内购买产品列表）。需要在 DS 中实施。

例如。
Product1 - 应用内产品 ID、价格、名称、示例图片等
。
.
产品 n - 应用内产品 ID、价格、名称、示例图片等。

好的，现在我们如何尝试结合客户端与 DS 和 AppleS 通信的几个优势，同时仅使用 DS 进行客户端通信？

1 Adv - 通过在 DS 端手动检查或通过某些定义的过程，可以确保仅显示有效产品。

2 Adv - 要在某种程度上合并这一点，请执行以下@ DS

第 1 步 - 在 DS 端创建一个具有[App Store 定价矩阵](https://itunesconnect.apple.com/WebObjects/iTunesConnect.woa/wo/13.0.0.9.9.3.3.1.13.1.1.11.1.3.5.9.1.5.1.1.15.3.3.1.9)的数据库表。
第 2 步 - 当您从客户端向 DS 发出请求时，您的 DS 可以从服务请求命中中获取 IP。根据此 DS 服务可以找到用户的当前国家/地区。
第 3 步——基于用户当前所在的国家/地区，以第 1 步中的本地货币映射价格。如果当前用户所在国家/地区不是[App Store 定价矩阵](https://itunesconnect.apple.com/WebObjects/iTunesConnect.woa/wo/13.0.0.9.9.3.3.1.13.1.1.11.1.3.5.9.1.5.1.1.15.3.3.1.9)的一部分，则使用美元价格。（这有点接近苹果确实如此，尽管它使用与用户的 Apple ID 相关联的国家/地区）。

[IAP 确认对话框](http://km.support.apple.com/library/APPLE/APPLECARE_ALLGEOS/HT4009/HT4009_3-confirmation_page--001-en.png)中显示的最终结果本地化价格将与您显示的价格相同（避免您指出的不匹配 - 再次出现 :-)）。

当属于一个国家的用户拥有属于另一个国家的 AppleID 时，整个实现将失败。它失败了，因为 DS 根据用户的位置映射价格，但[IAP 确认对话框](http://km.support.apple.com/library/APPLE/APPLECARE_ALLGEOS/HT4009/HT4009_3-confirmation_page--001-en.png)显示基于价格的用户 AppleID 的国家/地区（不匹配！！！）。

您无法[确定与登录 iOS 设备的 Apple ID 关联的国家/地区](https://stackoverflow.com/questions/12673351/determine-country-associated-with-apple-id-logged-into-the-ios-device)。检查此问答。

我建议您实施“与 DS 和 AppleS 的客户端通信”模型，但是为了减少客户端与 DS 和 AppleS 通信时相关的延迟，有多个产品请求（比如一次一组 10 个产品或取决于关于你在你的 UI 中一次显示多少产品）。

仅当您觉得或更准确地说有分析表明您一定会因为“延迟”而失去收入或用户时，才继续使用“仅使用 DS 的客户通信”模型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T11:16:36.180

您可以将价格/数据以美元存储在您的服务器上的数组中，然后再次从应用程序中本地化它们。如果您稍后添加更多产品或更改价格，那么只需更新您的阵列，无论它只是位于服务器上的一个文件。当然，本地化可能需要一段时间，我不确定是否有支持它的代码，因此为每个国家/地区投入等值的美元肯定会很耗时，但可能。不过最终结果会快得多，相比之下，我已经获取了这样的产品 id 和它的 UBER。

如果您仍然从服务器获取价格，则让应用程序首先发送本地信息并将其附加到您的请求中，以便可以本地化价格结果。

# c# - 使用 Nhibernate 在外键上应用条件

> ID：13739381
> 
> 赞同：0
> 
> 时间：2012-12-06T08:08:29.733
> 
> 标签：c#, nhibernate

我正在尝试对客户实体的外键应用条件，即订单，我只想加载 IsCancelFlag 为假的订单。（结果将是客户类型，即客户对象，它包含一组订单对象）但是虽然遍历返回的结果，我可以看到客户下的所有订单，无论是否取消。是否可以在 nhibernate 中对外键应用条件

```
 ICriteria _criteria= session.CreateCriteria<Customer>();
        _criteria.Add(Expression.Eq("CustomerId", 12));
        _criteria.CreateAlias("FKorders","FKorders");
        _criteria.Add(Expression.Eq("FKorders.IsCancelFlag", false));
        return _criteria.UniqueResult<Customer>(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T12:23:33.040

您的属性名称似乎很奇怪，但也许您想要

```
var query =
    from c in session.Query<Customer>()
    from o in c.Orders
    where o.IsCanceled
    select new { Customer = c, Order = o }

var results = query.AsEnumerable()
    .ToLookup(a => a.Customer, a => a.Order); 
```

这将返回一个`ILookup<Customer, Orders>`. NHibernate 不会返回带有部分初始化订单的客户，因为这将是一个损坏的模型并且更改跟踪将被破坏。

# java - 播放 2.0.4 文件上传不起作用？总是“缺少文件部分”

> ID：13739384
> 
> 赞同：1
> 
> 时间：2012-12-06T08:08:42.807
> 
> 标签：java, scala, file-upload, playframework-2.0

我正在尝试使用 Play Framework 2 (Java) 实现文件上传

为此，我遵循了以下指南：[http ://www.playframework.org/documentation/2.0/JavaFileUpload](http://www.playframework.org/documentation/2.0/JavaFileUpload)

在服务器端，我总是在 MultipartFormData 中获得 MissingFilePart 对象。

这是我的看法：

```
@form(action = routes.ImmediateCollections.savePoliceReport, 'enctype -> "multipart/form-data") {
    <fieldset>
        <div class="fileupload fileupload-new">
            <span class="btn btn-file">
                <span class="fileupload-new">Select file</span>
                <span class="fileupload-exists">Change</span>
                <input type="file" name="policeReportFile" id="policeReportFile"/>
            </span>
            <span class="fileupload-preview"></span>
            <a href="#" class="close fileupload-exists" style="float: none">×</a>
        </div>
    </fieldset>
    @controls {
        @submitbutton()
    }
} 
```

这会生成以下 html：

```
<form action="/immediatecollections/save-policereport" method="POST" enctype="multipart/form-data">
    <fieldset>
        <div class="fileupload fileupload-new">
            <span class="btn btn-file">
                <span class="fileupload-new">Select file</span>
                <span class="fileupload-exists">Change</span>
                <input type="file" name="policeReportFile" id="policeReportFile">
            </span>
            <span class="fileupload-preview"></span>
            <a href="#" class="close fileupload-exists" style="float: none">×</a>
        </div>
    </fieldset>
    <div class="control-group">
        <div class="controls">
            <input type="submit" class="btn btn-success" value="Save">
        </div>
    </div>
</form> 
```

（对于那些想知道跨度和 div 的人，我正在使用优秀的[jasny 引导](http://jasny.github.com/bootstrap/)扩展。）

请注意，我只有一个输入字段。此表单仅用于一个目的：上传 1 个文件。

这是我的控制器：

```
public static Result savePoliceReport() {
    Http.MultipartFormData formData = request().body().asMultipartFormData();
    Http.MultipartFormData.FilePart policeReportFile = formData.getFile("policeReportFile");
    if (policeReportFile != null) {
        // move file to somewhere
        // save metadata to database

        // for simplicity's sake: return json success = true or false
        ObjectNode jsonResult = Json.newObject();
        jsonResult.put("success", true);
        return ok(jsonResult);
    } else {
        ObjectNode jsonResult = Json.newObject();
        jsonResult.put("success", false);
        return badRequest(jsonResult);
    }
} 
```

这个方法在路由文件中是这样定义的：

```
POST    /immediatecollections/save-policereport     controllers.ImmediateCollections.savePoliceReport 
```

现在，当我在服务器端上传文件并进行调试时，这就是我得到的请求：

![服务器端调试](../Images/73eece8c61ea610139fe769a68cd70ca.png)

如果我没看错，说明文件内容丢失。发生了什么？字节在传输中丢失了吗？如果发生故障，为什么 Play 不抛出异常？

我在 Chrome 和 Internet Explorer 中都试过了，两次结果都一样。

我究竟做错了什么？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T15:38:02.440

这最终在谷歌群组上得到解决，我将从那里重新发布答案：

詹姆斯·罗珀：

> 当多部分数据中的文件名字段为空时抛出 MissingFilePart（名称有点误导）。为什么浏览器会发送一个空文件名，这是一个有趣的问题。在 Chrome 开发工具的 Network 选项卡中，您可以上传一个小的（只有几个字节）文件，然后查看请求正文吗？您可以在这里发布请求正文吗？它应该看起来像这样：
> 
> --AaB03x 内容配置：表单数据；名称="图片"; filename="file1.txt" 内容类型：文本/纯文本
> 
> 这是上传文件的内容--AaB03x--
> 
> 这里的另一个问题是，虽然 HTML 规范鼓励客户端尽最大努力提交文件名参数，但它不是强制性字段，所以如果它不存在，Play 应该不会失败。

我的回复：

> 你是对的，文件名丢失了。事实证明，Jasny 的 javascript 以某种方式破坏了输入元素。由于时间不够，我只是用一个没有花哨标记的基本元素替换了它，也许我稍后会回到这个问题。如果有人想出一个解决方案，我会很高兴听到它，但现在我会保持原样。
> 
> 感谢您的回复詹姆斯，我要花更长的时间才能找到那个错误。:-)

**TLDR：输入标签中缺少名称属性**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T13:37:20.917

听起来很奇怪，示例：[http](http://www.playframework.com/documentation/2.0/JavaFileUpload) ://www.playframework.com/documentation/2.0/JavaFileUpload 是否 也以同样的方式失败？

# django - 使用backbone.js 进行url 调度

> ID：13739399
> 
> 赞同：2
> 
> 时间：2012-12-06T08:10:10.407
> 
> 标签：django, backbone.js

我正在 django 中开发一个应用程序，并且正在使用backbone.js。url 使用骨干路由器路由。我的 HTML 在一个静态页面中，当我单击一个链接时，例如`href="/user/home"`，加载了一个页面，如果我用 url 刷新浏览器（发送 http 请求），我会收到错误 404，因为 django url 没有那个 url。

我有一个使用 facebook (django_facebook) 登录的场景，每当我点击 Facebook 登录链接时，我都会得到一个空白页面（就像任何其他无效 url 会因为这个 *splats 而做的那样——`{"*action" : "defaultRoute"}`见下面的代码)，当我刷新浏览器时，它可以工作（打开 fb 选项卡进行登录。）因为我`url(r'^facebook/', include('django_facebook.urls'))`在 URLS.PY 中有 ,。

我的问题是如何单击链接并打开 fb 选项卡或弹出窗口，因为在这种情况下它不起作用，我必须在浏览器中点击 url 才能工作。

骨干网.js路由器

```
Api.Routers.MainRouter = Backbone.Router.extend({
routes: {
    ":user/messages/:action/:target": "messagesAction",
    ":user/challenge/:action/:target" : "gameScores",
    ":user/challenge/:action/:target/:bet" : "challengeResult",
    ":user/challenge/:action": "challengeAction",
    ":user/:action" : "userAction",
    ":user/friends/:action/:target" : "friendsAction",
    "*action" : "defaultRoute"
},
messagesAction: function (user, action, target) {
    myScrollAction = action;
    conversationAction (action);
    //HIGHTLIGHT FOOT NAV
    $(".selected").removeClass("selected");
    $("#nav-messages").parents("li").addClass("selected");

    $(".message-friend-name").html(target.replace(/%20/g, " "))
},
challengeResult: function (user, action, target, bet) {
    defaultRouterAction (action);
    myScrollAction = action;
    ... 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T19:36:58.960

所以听起来你在这里问了两个问题。

第一个问题涉及这样一个事实，即您的 Backbone 路由器中有您的 Django 应用程序没有的路由。

因此，当路由器接管时，它实际上会将新历史推送到浏览器的历史堆栈中（除非您在 IE8 和 9 中使用哈希片段时）。这意味着当您点击重新加载时，您的浏览器将向服务器请求该资源。

为了防止 404 发生，您要么不使用历史对象，要么确保 Backbone 路由器中存在的所有路由也都镜像到 Django URL 配置中。

您遇到的第二个问题是关于使用 Facebook 登录。您应该将问题的这一部分分开并重新提出，因为它也与您正在使用的 Django 插件有关，如果您这样做，您将获得更好的牵引力。

# c# - C# 中的多线程应用程序

> ID：13739401
> 
> 赞同：3
> 
> 时间：2012-12-06T08:10:18.520
> 
> 标签：c#, .net

我创建了一个用于优化 pdf 文件的 .net 应用程序。实际上我必须优化许多文件，并且我调用了这样的线程：

```
CheckForIllegalCrossThreadCalls = false;
thOptimize = new Thread(csCommon.pdfFilesCompressAndMove);
thOptimize.Start(); 
```

我也找到了没有。使用这个的处理器和内核：

```
int processors=Environment.ProcessorCount
int coreCount = 0;
foreach (var item in new System.Management.ManagementObjectSearcher("Select * from  Win32_Processor").Get())
{
coreCount += int.Parse(item["NumberOfCores"].ToString());
} 
```

我在我的机器中找到了 4 个处理器和 2 个内核。

现在我的问题是我想`pdfFilesCompressAndMove`为所有处理器使用该功能，即我想同时优化多个文件。换句话说，我想让所有处理器忙于优化。

请指导我怎么可能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T08:40:23.320

你想要的是一个生产者/消费者队列。

这里发生的是生产者创建工作项供消费者处理。当生产者为消费者创建工作的速度比消费者处理它的速度要快得多时，这很有效。然后，您将有一个或多个消费者处理此工作队列。

这是我用于此类事情的生产者消费者类：

```
public class ProducerConsumer<T>:IDisposable 
    {
        private  int _consumerThreads;
        private readonly Queue<T> _queue = new Queue<T>();
        private readonly object _queueLocker = new object();
        private readonly AutoResetEvent _queueWaitHandle = new AutoResetEvent(false);
        private readonly Action<T> _consumerAction;
        private readonly log4net.ILog _log4NetLogger = log4net.LogManager.GetLogger(System.Reflection.MethodBase.GetCurrentMethod().DeclaringType);
        private bool _isProcessing = true;

        public ProducerConsumer(Action<T> consumerAction,int consumerThreads,bool isStarted)
        {
            _consumerThreads = consumerThreads;

            if (consumerAction == null)
            {
                throw new ArgumentNullException("consumerAction");
            }
            _consumerAction = consumerAction;
            if (isStarted)
                Start();
            //just in case the config item is missing or is set to 0\.  We don't want to have the queue build up
        }

        public ProducerConsumer(Action<T> consumerAction, int consumerThreads):this(consumerAction,consumerThreads,true)
        {

        }
        public void Dispose()
        {
            _isProcessing = false;
            lock(_queueLocker)
            {
                _queue.Clear();
            }
        }
        public void Start()
        {
            if (_consumerThreads == 0)
                _consumerThreads = 2;

            for (var loop = 0; loop < _consumerThreads; loop++)
                ThreadPool.QueueUserWorkItem(ConsumeItems);
        }

        public void Enqueue(T item)
        {
            lock (_queueLocker)
            {
                _queue.Enqueue(item);
                // After enqueuing the item, signal the consumer thread.            
                _queueWaitHandle.Set();
            }
        }

        private void ConsumeItems(object state)
        {
            while (_isProcessing)
            {
                try
                {
                    var nextItem = default(T);
                    bool doesItemExist;
                    lock (_queueLocker)
                    {
                        int queueCount = _queue.Count;
                        doesItemExist = queueCount > 0;
                        if (doesItemExist)
                        {
                            nextItem = _queue.Dequeue();
                        }
                        if (queueCount > 0 && queueCount % 50 == 0)
                            _log4NetLogger.Warn(String.Format("Queue is/has been growing.  Queue size now:{0}",
                                                              queueCount));
                    }
                    if (doesItemExist)
                    {
                        _consumerAction(nextItem);
                    }
                    else
                    {
                        _queueWaitHandle.WaitOne();
                    }
                }
                catch (Exception ex)
                {

                    _log4NetLogger.Error(ex);
                }

            }
        }
    } 
```

它是一个泛型类，因此 T 是您要处理的对象类型。您还为它提供了一个 Action，它是执行实际处理的方法。这应该允许您以干净的方式一次处理多个 PDF 文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T08:37:51.960

检查此线程：[每个核心的最佳线程数](https://stackoverflow.com/questions/1718465/optimal-number-of-threads-per-core)

如果您的线程方法`csCommon.pdfFilesCompressAndMove`非常消耗 CPU（我可以通过它的名称猜测），您应该为每个内核启动 1 个线程。您最好使用`ThreadPool.QueueUserWorkItem`，而不是手动创建线程，它将负责在内核之间生成线程。在您的情况下，据我了解，您有 8 个内核，因此您可以调用`ThreadPool.QueueUserWorkItem(csCommon.pdfFilesCompressAndMove)`8 次，并在您的一个线程完成时再次调用，使正在运行的线程总数等于 8。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T08:58:35.943

我会使用`ThreadPool`，因为据我所知，它是由 .NET Framework 和操作系统以始终为目标系统创建最佳线程数的方式管理的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-06T10:00:42.647

我认为你最好的选择是从一些简单的事情开始，这样你就可以了解问题的性能特征。

```
List<string> items = GetListOfPdfFilesToProcess();
int numCores = 4;
int maxListChunkSize = (int)Math.Ceiling(items.Count / (double)numCores);
ManualResetEvent[] events = new ManualResetEvent[numCores];

for (int i = 0; i < numCores; i++)
{
    ThreadPool.QueueUserWorkItem(ProcessFiles, new object[]
    {
        items.Skip(i * maxListChunkSize).Take(maxListChunkSize).ToList(), events[i]
    });
}

WaitHandle.WaitAll(events);

....

private static void ProcessFiles(object state)
{
    object[] stateArray = (object[])state;
    List<string> filePaths = (List<string>)stateArray[0];
    ManualResetEvent completeEvent = (ManualResetEvent)stateArray[1];

    for (int i = 0; i < filePaths.Count; i++)
    {
        csCommon.pdfFilesCompressAndMove(your parameters);
    }

    completeEvent.Set();
} 
```

这里的主要是将工作分成`numCores`块。这样，您应该能够充分利用所有 CPU 内核，同时保持一个非常简单的编程模型。

请记住，这不会进行任何错误处理 - 您需要处理它。`csCommon.pdfFilesCompressAndMove`如果无法处理文件，也可能需要考虑一下该怎么做。最简单的方法是记录错误并稍后检查，但如果您认为下次会成功，您可以尝试重新处理该文件。

您会注意到该`state`对象只是一个数组；如果您需要传递大量参数，`ProcessFiles`那么将这些参数包装到单个对象中并将其作为`state`.

**编辑：**

要从您的`Tick`活动中使用：

```
private void TimerTick(object sender, EventArgs e)
{
    //Disabling the timer will ensure the `TimerTick` method will not try to run
    //while we are processing the files. This covers the case where processing takes
    //longer than 2 minutes.
    timer.Enabled = false;

    //Run the first block of code in my answer.

    //Reenabling the timer will start the polling back up.
    timer.Enabled = true;
} 
```

我还建议检查您必须处理的文件数量：如果没有，请重新启用计时器并返回。这将避免排队一堆实际上不做任何事情的操作。

# c# - 如何使用类 Task 进行并行处理

> ID：13739406
> 
> 赞同：0
> 
> 时间：2012-12-06T08:10:28.110
> 
> 标签：c#, multithreading, c#-4.0, task-parallel-library, task

我是一名初级程序员，我正在尝试解决一项任务。使用 c# .net 4.0 我在文件夹中运行，选择所有 *.xml 文件，并将每个文件写入具有新扩展名 *.bin 的新文件夹。对于编写之前的每个文件，我正在应用由另一个程序员编写的算法，我不知道它的实现。

所以我读取 *.xml 文件，将其反序列化并将其写入新的 *.bin 文件。当我没有使用并行编程时，我有 1 分钟的时间来处理 2000 个文件。现在我决定使用**Task**应用并行编程。现在我为每个文件创建新任务（所有处理（读取-反序列化-写入）都在一个任务中），现在我有 40 秒。但我认为并行编程帮助我将时间减少到 25-30 秒。

请给出您的意见，我做错了什么以及我必须如何意识到这一点。谢谢。

```
byte[] buffer;
using (Stream stream = new FileInfo(file).OpenRead())
{
    buffer = new byte[stream.Length];
    stream.Read(buffer, 0, (int)stream.Length);
}

foreach (var culture in supportedCultures)
{
    CultureInfo currentCulture = culture;
    Tasks.Add(Task.Factory.StartNew(() =>
    {
        var memoryStream = new MemoryStream(buffer);
        Task<object> serializeTask = Task.Factory.StartNew(() =>
        {
            return typesManager.Load(memoryStream, currentCulture);
        }, TaskCreationOptions.AttachedToParent);

        string currentOutputDirectory = null;
        if (outputDirectory != null)
        {
            currentOutputDirectory = outputDirectory.Replace(PlaceForCultureInFolderPath,
                                                                 currentCulture
                                                                     .ToString());
            Directory.CreateDirectory(currentOutputDirectory);
        }

        string binFile = Path.ChangeExtension(Path.GetFileName(file), ".bin");
        string binPath = Path.Combine(
            currentOutputDirectory ?? Path.GetDirectoryName(file),
            binFile);

        using (FileStream outputStream = File.OpenWrite(binPath))
        {
            try
            {
                new BinaryFormatter().Serialize(outputStream,serializeTask.Result);
            }
            catch (SerializationException e)
            {
                ReportCompilationError(e.Message, null);
            }
        }
    }));
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T08:15:24.647

在没有看到代码或不知道任务真正在做什么的情况下，我们所能做的就是提供一些相当一般的建议和诊断。

您的代码是受 CPU 限制还是受 IO 限制？（您应该能够通过查看性能监视器并查看运行代码时 CPU 的繁忙程度来判断这一点。）

如果您的代码是 IO 绑定的，并且如果您在单个物理非 SSD 驱动器上有多个文件，那么并行工作可能会使情况变得更糟，因为您会迫使驱动器头不断打点这个地方。

如果您的代码受 CPU 限制，那么并行化*应该*会有所帮助（因为这些听起来像是独立的任务） - 同样，您应该能够通过先运行代码而不进行并行化然后再*进行*并行化来判断这一点，在这两种情况下都查看 CPU 图. 您会*期望*在串行版本中，一次只有一个 CPU 处于“忙碌”状态，而在并行版本中，所有 CPU 都应该处于忙碌状态。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T08:17:25.543

[任务工厂](http://msdn.microsoft.com/en-us/library/system.threading.tasks.task.factory.aspx)

```
var task1 = Task.Factory.StartNew(() =>
    {
       //some oepratation
    });
     var task2 = Task.Factory.StartNew(() =>
    {
       //some operations
    });
    Task.WaitAll(task1, task2); 
```

但这并不能保证每个任务都有一个新线程，因为它使用可用线程并且只是调度作业或将任务分配给任何可用的线程。因此，我建议你使用`Parallel.ForEach`

```
var options = new ParallelOptions { MaxDegreeOfParallelism = 2 // or more };
Parallel.ForEach ( list, options, a=> { } ); 
```

[http://msdn.microsoft.com/en-us/library/system.threading.tasks.parallel.foreach.aspx](http://msdn.microsoft.com/en-us/library/system.threading.tasks.parallel.foreach.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-06T08:48:35.973

第一的。不能保证 TPL 会对性能造成任何影响。
正如 Jon 所说，写入 HDD 会降低性能，除非操作系统缓存这些文件以供以后顺序写入。绝对缓存大小有其限制。

第二。默认调度程序面向利用 CPU 内核，因此有可能只有几个任务被并行处理，而其他任务则在队列中等待。您可以通过显式设置`ParallelOptions.MaxDegreeOfParallelism`或调用`WidthDegreeOfParallelism()`查询来更改此默认值。仍然是调度程序决定有多少任务并行运行。

.net 中有一本关于多线程的不错的免费[书籍](http://www.albahari.com/threading)

# ios - 如何从不同的类访问数组并向其中添加更多对象？

> ID：13739407
> 
> 赞同：2
> 
> 时间：2012-12-06T08:10:27.520
> 
> 标签：ios, xcode, arrays

**MasterViewController.h：**

```
#import <UIKit/UIKit.h>

@interface MasterViewController : UITableViewController

@property (nonatomic, strong) NSMutableArray *listOfBugs; 
```

**MasterViewController.m：**

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    _listOfBugs = [[NSMutableArray alloc]init];
}

...
...

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath

{
    ScaryBugDoc *bug = [self.bugs objectAtIndex:indexPath.row];
    [_listOfBugs addObject:bug];
} 
```

在上面的代码中，我创建了一个包含具有属性的对象的数组。我想从不同的类访问数组中的对象，并将对象添加到同一个数组中。我知道我可以像这样从同一个类创建一个新数组：

**ListOfBugsViewController.m：**

```
#import "ListOfBugsViewController.h"
#import "MasterViewController.h"
MasterViewController *myClass = [[MasterViewController alloc]init];

    NSMutableArray *array = [myClass.listOfBugs.... 
```

但显然这不是我要找的。我想访问已经在数组中的对象，而不是创建一个新数组。

**编辑：**为了让事情变得更简单，我有几个类，只有一个数组要添加对象。所有类都应该能够向其中添加对象并读取先前添加的对象。如何从未分配和初始化的类中访问同一个数组？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T08:29:56.573

以相当简单的方式将对象从其他类添加到数组中。

看看怎么...

基数

```
...
_baseArray=[[NSMutableArray alloc]init];
[_baseArray addObject:@"Anoop"];
[_baseArray addObject:@"kumar"];
... 
```

其他类.m

```
Base *baseObj=[Base new];
[baseObj.baseArray addObject:@"vaidya"]; 
```

编辑：

根据我们的讨论

```
- (void)awakeFromNib
{
    [super awakeFromNib];
    [self createObjects];

}

- (void) createObjects
{
    _listOfBugs=[[NSMutableArray alloc]init];

    [_listOfBugs addObject:@"Anoop"];

    NSLog(@"init done, %@",_listOfBugs);

}

- (id)init
{
    self = [super init];    
    if (self) {
        [self createObjects];
    }
    return self;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T08:14:11.140

> 但显然这不是我要找的。我想访问已经在数组中的对象，而不是创建一个新数组。

您不是在创建新数组，而是在创建指向现有数组的新指针。您可以通过这个新指针编辑该数组。

```
NSMutableArray *array = myClass.listOfBugs;
[array addObject:newBug]; 
```

但是，您不必创建新指针，您可以直接通过属性访问数组：

```
[myClass.listOfBugs addObject:newBug]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T08:38:30.750

Objective C 的好处是对象实际上是指向对象实例的指针。更好的是当你传递一个对象时，它是通过引用传递的（如果我错了，请纠正我）。

您可以简单地从其他类调用一个方法并像这样传入源可变数组：

```
// ------------------------------------------
// Your "Other Class" .h header file
// ------------------------------------------

...

@interface OtherClass
{
    ...
}

...

+(void)addNewBugToArray:(NSMutableArray *)paramSourceArray;

@end

// ------------------------------------------
// Your "Other Class" .m implementation file
// ------------------------------------------

...

// ------------------------------------------
// Note: paramSourceArray is passed 
// by reference, meaning any change to it
// will affect the source array directly
// ------------------------------------------
+(void)addNewBugToArray:(NSMutableArray *)paramSourceArray
{
    [paramSourceArray addObject:@"newBug"];
}

...

@end

// ------------------------------------------
// Your Main View Controller .m file
// ------------------------------------------

#import "OtherClass.h"

...

-(void)viewDidLoad
{
   ...

   // initialize your source array
   sourceArray = [[NSMutableArray alloc] init];

   [btnAddBug addTarget:self selector:@selector(addNewBug) forControlEvent:UIControlEventTouchUpInside];

   ...

}

-(void)addNewBug
{
    // ---------------------------------------------------------
    // calling class method from "OtherClass" to add new bug
    // to our source array directly using pass by reference
    // ---------------------------------------------------------
    [OtherClass addNewBugToArray:sourceArray];
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-06T08:25:24.483

你的问题措辞令人困惑。我认为您想要的是`listOfBugs`从`MasterViewController`您的`ListOfBugsViewController`.

你`ListOfBugsViewController`被你的实例化了`MasterViewController`吗？如果是这样，您可以向您添加一个新属性以`ListOfBugsViewController`包含指向`MasterViewController`（使该属性*变弱*）的`MasterViewController`指针，然后在实例化您的`ListOfBugsViewController`.

# sql - 合并两列然后分组和排序

> ID：13739410
> 
> 赞同：0
> 
> 时间：2012-12-06T08:10:42.737
> 
> 标签：sql, group-by, oracle11g

我有以下表和数据，我想将 loc1 和 loc2 合并在一列中，并从 loc 列中删除重复值，然后根据 group_no 列对它进行分组，并根据 group_val 升序进行排序

```
drop table test;
create table test (loc1 number(9), loc2 number(9), group_no number(9),group_val number(9));
insert into test values(2,3,1,90);
insert into test values(2,9,1,10);
insert into test values(4,3,1,70);
insert into test values(6,8,2,20);
insert into test values(11,7,2,80);
insert into test values(20,15,2,70);
insert into test values(15,14,2,30);
insert into test values(21,31,3,50);
insert into test values(31,32,3,40); 
```

预期结果是：

```
loc   group_no   
2        1            
3        1            
4        1            
9        1             
11       2
7        2 
20       2
15       2 
6        2
8        2
21       3
31       3
32       3 
```

这段来自 Grish 但没有 group_val 的代码，现在我添加它

```
select t.loc, max(t.group_no)
(
    select loc1 as loc, group_no from test

    union

    select loc2 as loc, group_no from test
) t
group by t.loc
order by 2,1

if can do it using dense_rank() over partition by group_val. 
```

loc 列将从上到下排序。根据 group_val 列

```
regards 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T08:26:15.977

并不完全清楚你想要什么结果。也许这个？：

```
select loc, group_no 
from
(
    select loc1 as loc, group_no, group_val 
    from test

    union all

    select loc2 as loc, group_no, group_val
    from test
) t
group by group_no, loc
order by group_no asc, max(group_val) desc, loc asc ; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T08:26:23.907

```
select loc1, group_no 
from
 (
  select loc1, group_no, group_val from test
  UNION
  select loc2, group_no, group_val from test
 )
group by group_no , loc1
order by group_no, max(group_val), loc1 
```

工作[的 sqlfiddle](http://www.sqlfiddle.com/#!4/115ad/8)

编辑：
正如 Codo 提到的，你的数据有冲突，所以你应该明确你的要求

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T08:28:06.477

您可以尝试以下方法：

询问：

```
select distinct a.loc, a.group_no
from
(select distinct loc1 as loc, group_no
  from test
union all
select distinct loc2, group_no
  from test) as a
order by a.loc asc
; 
```

结果：

```
LOC    GROUP_NO
2      1
3      1
4      1
6      2
7      2
8      2
9      1
11     2
14     2
15     2
20     2
21     3
31     3
32     3 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-06T08:32:29.577

您的要求无法满足，因为它们包含冲突。如果您查看前两行，您会看到以下数据中的结果（不使用*loc2*）：

```
loc | group_no | group_val
  2 |        1 |        90
  2 |        1 |        10 
```

根据您的要求，它们是重复的，需要减少为单行。但是，`group_val`您使用什么值进行排序：90 还是 10？

如果您总是使用最小`group_val`的进行排序，那么以下查询应该可以工作：

```
select t.loc, t.group_no from
(
    select loc1 as loc, group_no, group_val from test
    union
    select loc2 as loc, group_no, group_val from test
) t
group by t.loc, t.group_no
order by group_no, min(group_val); 
```

# php - 加载图像在 ajax 请求上显示两次

> ID：13739419
> 
> 赞同：0
> 
> 时间：2012-12-06T08:11:11.577
> 
> 标签：php, javascript, jquery, html

我有一个搜索结果页面，人们可以在其中输入他们想要搜索的单词，搜索结果将根据他们单击的按钮显示在网格视图和列表视图中。

如果单击 Grid View 单选按钮，我正在调用一个 java 脚本函数，该函数发送 ajax 请求并在网格视图中的 div#GridView 内填充搜索匹配项。

两秒钟后，我调用了与发送 ajax 请求相同的函数，以使用其他结果填充 div#ListView。我这样做是因为用户可以在任何时间点切换到列表视图或网格视图，并且它会显示在其他视图中的结果相同。此时ListView设置为不显示。同样的事情发生在List View上。

问题是因为发送了两个 ajax 请求，加载图像显示了两次，一次用于列表视图，另一次用于网格视图。

如何防止此加载图像显示两次。

谢谢您的回复

HTML 代码

```
<body>
    <input type="text" name="txtSearchTerm" id="txtSearchTerm"/>    
    <input type="radio" name="rdoView" onclick="PopulateSearchResult('ListView')"/>List View
    <input type="radio" name="rdoView" onclick="PopulateSearchResult('GridView')"/>Grid View
    <div id="SearchResult">
        <div id="GridView"></div>
        <div id="ListView"></div>
    </div>
<body> 
```

Javascript

```
function PopulateSearchResult(pView)
{
    (pView == 'ListView')?OtherView = 'GridView':OtherView = 'ListView'; 

    $('#'+pView).show();
    $('#'+OtherView).show();

    DisplayMsg(pView);

    setTimeout("DisplayMsg('"+OtherView+"')", 2000);
}

function DisplayMsg(pView)
{
    url = '/';

    $('#SearchResult').html('<div><img src="loading.gif"/></div>');     

    $.get(
        url,
        {
            "SearchFor" : $('txtSearchTerm').val(),
            "DisplayIn" : pView         
        },
        function(responseText){
            $('#SearchResult').html(responseText);      
        },
        "html"
    );      
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T06:37:38.800

```
function DisplayMsg(pView)
{
    url = '/';
    var temp = $('#SearchResult').html();
    if(temp != '<div><img src="loading.gif"/></div>')
    {
      $('#SearchResult').html('<div><img src="loading.gif"/></div>');     
    }
    $.get(`enter code here`
        url,
        {
            "SearchFor" : $('txtSearchTerm').val(),
            "DisplayIn" : pView         
        },
        function(responseText){
            $('#SearchResult').html(responseText);      
        },
        "html"
    );      
} 
```

只需在显示加载图像时添加该条件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T09:33:15.947

您只有一个问题可以解决您的问题只需在 jquery 中添加一个条件

IE

```
function DisplayMsg(pView)
{
    url = '/';
if($("txtSearchTerm").find('img').attr('id')) != 'loading-img'){
    $('#SearchResult').html('<div><img id="loading-img" src="loading.gif"/></div>');     
}
    $.get(
        url,
        {
            "SearchFor" : $('txtSearchTerm').val(),
            "DisplayIn" : pView         
        },
        function(responseText){
            $('#SearchResult').html(responseText);      
        },
        "html"
    );      
} 
```

# java - Android String Equals 和 contentEquals 返回 false，但 String Print as Same

> ID：13739421
> 
> 赞同：1
> 
> 时间：2012-12-06T08:11:26.370
> 
> 标签：java, android, compare, base64, equals

**程序流程**

**发送方**- 生成加密密钥作为字节 [] 并向用户**显示**其`Base64.encodeToString`值，然后将该字节 []（密钥）作为 udp 数据包发送给接收方

**Receiver** - 接收 UDP 数据包并获取密钥 (byte[])，并从用户获取密钥作为字符串（用户知道我在 Sender 程序中显示的字符串）并使用将接收到的密钥 (byte[]) 转换为字符串`Base64.encodeToString`

这是问题，当我使用`equals`它比较两个字符串时返回 false

当我在 logcat 中打印两个字符串时

输出是

> 12-05 15:39:32.047：V/用户密钥（2210）：oIAfhtGnf+tBX8NBB5ONVQ==
> 
> 12-05 15:39:32.047: V/reckey(2210): oIAfhtGnf+tBX8NBB5ONVQ==

在这里您可以看到两个字符串具有相同的字符序列

**重要的**

我搜索了很多并开始了解`contentEquals`，我也尝试了这个，希望它能解决我的问题，因为它只是比较两个字符串的字符和序列，但我无法让它工作，它对于这些字符串也返回 false。 ..

我从 EditText 中的用户那里得到字符串

```
txtDeKey.getText().toString() 
```

并将 byte[] 转换为 String as （都尝试过）

```
Base64.encodeToString(key1, Base64.DEFAULT).toString()
Base64.encodeToString(key1, Base64.DEFAULT) 
```

# datetime - 在两个相同日期但不同时间之间过滤 - jasper

> ID：13739422
> 
> 赞同：1
> 
> 时间：2012-12-06T08:11:30.957
> 
> 标签：datetime, jasper-reports

我正在创建一个碧玉报告，其参数为`datetrfrom`和`datetrto`。过滤进行得很好，除非两个参数携带相同的数据，例如

`datetrfrom>= '15-12-2012'`

`datetrto<= '15-12-2012'`

在 15-12-2012 处理的数据不会出来。

我在我的 JSP 中试过这个：

```
function ShowReport(){
var param='';              

var timestart = ' 00:00:00'
var timeend = ' 23:59:59'

var datetrFrom = document.forms['report']['datetransfrom'].value;
datetrFrom.split("-")

    //i split n join back the date to change the format from dd-MM-yyyy to yyyy-MM-dd
    var dtf = [datetrFrom[6],datetrFrom[7],datetrFrom[8],datetrFrom[9],datetrFrom[5],datetrFrom[3],datetrFrom[4],datetrFrom[2],datetrFrom[0],datetrFrom[1] ].join('')
datetrfr = dtf + timestart; //i join the date with the timestart to create format yyyy-MM-dd hh:mm:ss

    var datetrTo = document.forms['report']['datetransto'].value;
datetrTo.split("-")

    var dtt = [datetrTo[6],datetrTo[7],datetrTo[8],datetrTo[9],datetrTo[5],datetrTo[3],datetrTo[4],datetrTo[2],datetrTo[0],datetrTo[1] ].join('')

    datetrto = dtt + timeend; //i join the date with the timeend to create format yyyy-MM-dd hh:mm:ss
    param = param + '@@dtTFrom=='+datetrfr+'@@dtTTo=='+datetrto; 
```

`@@dtTFrom`并且`@@dtTTo`是我在碧玉报告中使用的参数。

这就是我在 jasper 报告的 where 子句中所做的：

```
where record_line_status='NO'
and datetime_process >= convert(date, $P{dtTFrom},105)
and datetime_process <= convert(date, $P{dtTTo},105) 
```

但是我的报告仍然不起作用。谁能帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T07:35:07.360

我在这里解决了我的问题。这是我在 JSP 中的新编码：

```
function ShowReport(){
            var param='';              

                        var timestart = ' 00:00:00'

                        var timeend = ' 23:59:59'

                        var orgFrom = document.forms['report']['org_id'].value;
                         param = param + 'orgFrom=='+orgFrom;       

                        var datetrFrom = document.forms['report']['datetransfrom'].value;
                        var datefromsplit = datetrFrom.split('-');
                        var datefromjoin = [datefromsplit[2], datefromsplit[1], datefromsplit[0]].join('-');
                        var datefromsend = datefromjoin + timestart;

                        var datetrTo = document.forms['report']['datetransto'].value;
                        var datetosplit = datetrTo.split('-');
                        var datetojoin = [datetosplit[2], datetosplit[1], datetosplit[0]].join('-');
                        var datetosend = datetojoin + timeend;

                        param = param + '@@dtTFrom=='+datefromsend+'@@dtTTo=='+datetosend; 
```

这就是我在 jasper 报告的 where 子句中所做的：

```
 where ep_lpp04_temp.record_line_status='No'
and EP_LPP04_TEMP.datetime_process >= convert(datetime, $P{dtTFrom}, 120)
AND EP_LPP04_TEMP.datetime_process <= convert(datetime, $P{dtTTo}, 120) 
```

顺便说一下我的参数类是

```
java.lang.string 
```

.

# mysql - Sql查询以获取具有最新日期时间的用户ID

> ID：13739427
> 
> 赞同：1
> 
> 时间：2012-12-06T08:11:37.987
> 
> 标签：mysql, sql, database

我有一张桌子

```
**user_id** | **date**
1           | 2012-10-18 09:34:4
3           | 2012-10-18 09:34:54
5           | 2012-10-17 09:14:54
6           | 2012-10-17 09:13:24
4           | 2012-10-16 08:34:54
9           | 2012-10-16 08:34:54 
```

我想要的是具有最新日期时间的 user_id，即

```
**user_id** | **date**
3           | 2012-10-18 09:34:54
5           | 2012-10-17 09:14:54
4           | 2012-10-16 08:34:54 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T08:12:48.963

`GROUP BY`在您的专栏的日期部分使用`date`（这似乎是 type `DATETIME`）：

```
SELECT user_id, MAX(date) FROM table GROUP BY DATE(date); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T08:14:30.000

要获取一位用户的最新日期时间，请尝试此操作

```
SELECT user_id FROM TB_NAME ORDER BY date DESC LIMIT 0,1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T08:15:09.457

如果您只需要一个用户

```
SELECT 
    MAX(date) as LatestDateTime
FROM 
    mytable 
```

对于多个用户

```
SELECT 
    *
FROM 
    mytable
ORDER By date DESC 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-06T08:15:22.310

尝试：

```
SELECT user_id, max(date) from user group by user_id 
```

或者

```
select user_id from user where date = (select max(date) from user) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-06T08:52:13.507

只是一个猜测，我希望它有效。

```
 SELECT t.user_id, t.date
    FROM table t
    WHERE t.date = (SELECT MAX(t2.date) FROM table t2 GROUP BY t2.date HAVING t2.date = t.date) 
```

祝你好运！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-06T08:40:24.133

尝试这个：

```
select * from (
   select user_id, date
   from mytable
   order by date desc ) x
group by date(date); 
```

注意：这是一个 mysql-only 解决方案，但它有效！

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-06T08:43:03.127

还有一个[SQL Fiddle](http://www.sqlfiddle.com/#!2/06598/3/0)

```
select user_id, `date`
from mytable t1
join (select max(`date`) as max_date
      from mytable
      group by date(`date`)) t2 on t1.`date` = t2.max_date 
```

# c++ - C++编写随机函数和参数

> ID：13739432
> 
> 赞同：2
> 
> 时间：2012-12-06T08:12:18.937
> 
> 标签：c++, function, random, parameters

有人可以为我编写修改过的整个代码吗？我修改了自己的但仍然有错误，我想使用函数并将其调用到打印 main #include #include #include using namespace std;

```
int addition(int a=(rand()%99),int b=(rand()%99) {
    int r;
    r=a+b;
    return r;
}

int main() {
   int print, a, b;
 print = addition(a, b);
 cout << "this is result of addition" << print;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T08:17:05.323

这里有两个问题：

首先，您不调用`srand`，这是设置随机种子所必需的（通常通过`srand(time(nullptr)`）。

其次，这行`print= int addition(int a,int b);`写错了。假设您要使用默认参数，它应该是`print = addition();`，因为您没有声明该函数，而是调用它。

这将使主要功能如下：

```
int main() {
    srand(time(nullptr));
    int print;
    print= int addition();
    cout<<"this is result of addition"<<print;
    return 0;
} 
```

**编辑：**这是假设您实际上**想要**您的函数具有随机默认参数的行为。这本身似乎是一个糟糕的设计决定，发送调用者生成的随机数可能会更好。这将使结果函数：

```
int main() {
    srand(time(nullptr));
    int a = rand()%99, b = rand()%99;
    int print;
    print= int addition(a, b);
    cout<<"this is result of addition"<<print;
    return 0;
} 
```

另请注意，rand()%99 将返回 [0,98] 范围内的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T08:17:00.783

这一行：

```
print = int addition(int a, int b); 
```

是胡说八道。你可能想要：

```
print = addition(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T08:18:40.287

你有一些语法错误..你的主要变化：

```
 int print, a, b;
 std::srand(std::time(0));
 print = addition(a, b);
 cout << "this is result of addition" << print; 
```

## 编辑

无论如何，您可以删除“a”和“b”变量的声明，因为您没有在代码中使用它们。这样，您必须在没有任何参数的情况下调用添加：

```
 print = addition(); 
```

# php - 从mysql数据库下载pdf

> ID：13739435
> 
> 赞同：0
> 
> 时间：2012-12-06T08:12:27.920
> 
> 标签：php

> **可能重复：**
> [使用 PHP 创建 PDF 文件](https://stackoverflow.com/questions/1204630/create-a-pdf-file-with-php)

我需要帮助..我想要一个 php 代码来下载存储在 mysql 数据库中的信息并将其保存在 pdf 文件中.. 到目前为止，下面是我拥有的代码，但它没有打印任何内容.. 请帮我修改它或给我另一个更好的代码。谢谢..

```
<?php
$host = 'localhost';
$user = 'root';
$pass = 'hello';
$db = 'version';
$table = 'childinfo';
$file = 'export';
$csv_output;

$link = mysql_connect($host, $user, $pass) or die("Can not connect." . mysql_error());
mysql_select_db($db) or die("Can not connect.");

$gotten =mysql_query("select sex,childnumber from child_nfo");
$row =mysql_fetch_assoc($gotten);
$bytes = $row[imgdata];
header("Content-type: application/pdf");
header('Content-disposition: attachment; filename="thing.pdf"');
print $bytes;
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T08:58:21.653

您可以使用 tcpdf 创建 pdf。尝试使用以下格式的 tcpdf。此外，您可以拥有 tcpdf 文档以了解如何使用它。我正在分享代码，这只是如何使用 tcpdf 创建 pdf 文件的示例。

```
require_once('tcpdf/tcpdf.php');

        error_reporting(0);
// create new PDF document
$pdf = new TCPDF(PDF_PAGE_ORIENTATION, PDF_UNIT, PDF_PAGE_FORMAT, true, 'UTF-8', false);

// set document information
$pdf->SetCreator(PDF_CREATOR);
$pdf->SetAuthor('your author name');
$pdf->SetTitle('title');
$pdf->SetSubject('subject');
$pdf->SetKeywords('TCPDF, PDF, example, test, guide');

// set default header data
$pdf->SetHeaderData(PDF_HEADER_LOGO, PDF_HEADER_LOGO_WIDTH, PDF_HEADER_TITLE, PDF_HEADER_STRING);

// set header and footer fonts
$pdf->setHeaderFont(Array(PDF_FONT_NAME_MAIN, '', PDF_FONT_SIZE_MAIN));
$pdf->setFooterFont(Array(PDF_FONT_NAME_DATA, '', PDF_FONT_SIZE_DATA));

// set default monospaced font
$pdf->SetDefaultMonospacedFont(PDF_FONT_MONOSPACED);

//set margins
$pdf->SetMargins(PDF_MARGIN_LEFT, PDF_MARGIN_TOP, PDF_MARGIN_RIGHT);
$pdf->SetHeaderMargin(PDF_MARGIN_HEADER);
$pdf->SetFooterMargin(PDF_MARGIN_FOOTER);

//set auto page breaks
$pdf->SetAutoPageBreak(TRUE, PDF_MARGIN_BOTTOM);

//set image scale factor
$pdf->setImageScale(PDF_IMAGE_SCALE_RATIO);

//set some language-dependent strings
$pdf->setLanguageArray($l);

// ---------------------------------------------------------

// set font
$pdf->SetFont('dejavusans', '', 10);

// add a page
$pdf->AddPage();

// writeHTML($html, $ln=true, $fill=false, $reseth=false, $cell=false, $align='')
// writeHTMLCell($w, $h, $x, $y, $html='', $border=0, $ln=0, $fill=0, $reseth=true, $align='', $autopadding=true)

// create some HTML content
$html = $pdf_content;
// output the HTML content
$pdf->writeHTML($html, true, false, true, false, '');
// reset pointer to the last page
$pdf->lastPage();

// ---------------------------------------------------------

//Close and output PDF document
//$pdf->Output('example_006.pdf', 'I');
$pdf_filename = time().".pdf";
$pdf->Output('destination_directory/'.$pdf_filename, 'F'); 
```

您可以将获取的数据库信息放入`$pdf_content`变量中。希望这对你有帮助..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T08:28:57.120

我假设 $byes 是图像的字节流？您不能只是`print`把它拿出来并期望它是一个格式化的 PDF 文件。这些类在生成 PDF 时可能很有用：

FPDF：[http ://www.fpdf.org/](http://www.fpdf.org/)

TCPDF：[http ://www.tcpdf.org/](http://www.tcpdf.org/)

# android - 带有片段的 Action Android action Bar 加载视图，但我想加载本身加载视图的活动（如在 tabhost 中）

> ID：13739436
> 
> 赞同：0
> 
> 时间：2012-12-06T08:12:28.693
> 
> 标签：android, android-fragmentactivity

我目前卡在一个点。如果我使用带有片段的操作栏（NAVIGATION_MODE_TABS）。我希望片段成为一个活动，它将处理所有视图加载和所有内容。当前片段类将扩展片段..对吗？但我想要像扩展活动然后调用 oncreate 之类的东西。

请帮忙。

```
enter code here

final TabHost tabHost = getTabHost();//(TabHost) findViewById(R.id.tabhost);//  // The activity TabHost
    TabHost.TabSpec spec;  // Resusable TabSpec for each tab
    Intent intent;  // Reusable Intent for each tab
    // Create an Intent to launch an Activity for the tab (to be reused)
    intent = new Intent().setClass(this, X.class);

    // Initialize a TabSpec for each tab and add it to the TabHost
    spec = tabHost.newTabSpec("jbn jb n").setIndicator("gjngjmb ",
                      res.getDrawable(R.drawable.home))
                  .setContent(intent);
    tabHost.addTab(spec);

    // Do the same for the other tabs
    intent = new Intent().setClass(this, MyCoursesActivity.class);
    spec = tabHost.newTabSpec("my_course").setIndicator("My Courses",
                      res.getDrawable(R.drawable.courses))
                  .setContent(intent);
    tabHost.addTab(spec);

    intent = new Intent().setClass(this, DashboardActivity.class);
    intent.putExtra("course_title", "Aal is well!!!");
    spec = tabHost.newTabSpec("dashboard").setIndicator("Dashboard",
                      res.getDrawable(R.drawable.dashboard))
                  .setContent(intent);
    tabHost.addTab(spec);

enter code here 
```

此代码正在使用 tabhost 我想使用带有 android 4.0 片段的操作栏来做同样的事情

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T08:34:51.627

您可以`onCreateView()`在 Fragment 上使用，也`getActivity().`可以让您直接访问`Activity`

# c# - 如何将 ASP.NET 应用程序发布到 Internet？

> ID：13739438
> 
> 赞同：-4
> 
> 时间：2012-12-06T08:12:33.437
> 
> 标签：c#, asp.net, web-applications, blogspot

我创建了一个 asp.net Web 应用程序。现在，我可以将它添加到我的 blogspot 中吗？或者如何将我的网页添加到互联网？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T08:17:42.367

ASP.NET 网站必须托管在 IIS 服务器上。因此，它们不能在 blogspot 或此类服务上运行。搜索与 ASP.NET 兼容的 Web 主机来托管您的应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T08:24:31.420

简而言之，从在线托管购买一个共享托管帐户。登录到您的帐户托管公司为您提供。转到您的控制面板在 IIS 中为博客创建站点您的文件夹。将文件复制到其中。如果需要，设置数据库。如果您有网站，请设置 DNS，或者您的托管公司会给您 IP，您可以直接访问它，直到您购买域名。

# wpf - WPF 简单文本框绑定 - 从未触及依赖属性

> ID：13739441
> 
> 赞同：3
> 
> 时间：2012-12-06T08:12:45.167
> 
> 标签：wpf, binding, textbox, dependency-properties

我有一个`TextBox`，我正在尝试将它绑定到一个`DependencyProperty`. 加载时或我输入`TextBox`. 我错过了什么？

**XAML**

```
<UserControl:Class="TestBinding.UsernameBox"
        // removed xmlns stuff here for clarity>
    <Grid>
        <TextBox Height="23" Name="usernameTextBox" Text="{Binding Path=Username, ElementName=myWindow, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}" />
    </Grid>
</UserControl> 
```

**C＃**

```
public partial class UsernameBox : UserControl
{
    public UsernameBox()
    {
        InitializeComponent();
    }

    public string Username
    {
        get
        {
            // Control never reaches here
            return (string)GetValue(UsernameProperty);
        }
        set
        {
            // Control never reaches here
            SetValue(UsernameProperty, value);
        }
    }

    public static readonly DependencyProperty UsernameProperty
        = DependencyProperty.Register("Username", typeof(string), typeof(MainWindow));
} 
```

编辑：我需要实现 a`DependencyProperty`因为我正在创建自己的控件。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-06T08:25:28.977

您永远不会到达 setter，因为它是依赖属性的 CLR 包装器，它被声明为从外部源设置，例如`mainWindow.Username = "myuserName";`. 当通过绑定设置属性并且您想查看它是否已更改时，只需将 添加`PropertyMetadata`到您的声明中`PropertyChangedCallback`，例如：

```
public static readonly DependencyProperty UsernameProperty =
            DependencyProperty.Register("Username", typeof(string), typeof(MainWindow), new UIPropertyMetadata(string.Empty, UsernamePropertyChangedCallback));

        private static void UsernamePropertyChangedCallback(DependencyObject d, DependencyPropertyChangedEventArgs e)
        {
            Debug.Print("OldValue: {0}", e.OldValue);
            Debug.Print("NewValue: {0}", e.NewValue);
        } 
```

使用此代码，您将在 VS 的输出窗口中看到属性的更改。

有关回调的更多信息，请阅读[依赖属性回调和验证](http://msdn.microsoft.com/en-us/library/ms745795.aspx)

希望这可以帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-18T01:26:32.667

你不应该在`DependencyProperty`这里使用！

您的 TextBox 的`Text`属性是 a`DependencyProperty`并且是您绑定的*目标*您的 Username 属性是源并且**不**应该是 a `DependencyProperty`！它应该是引发[NotifyPropertyChanged](http://msdn.microsoft.com/en-us/library/system.componentmodel.inotifypropertychanged(v=vs.100).aspx)的​​普通旧属性。

所有你需要的是：

```
private string _username;
public string Username
{
    get
    {
        return _username;
    }
    set
    {
        _username = value;
         NotifyPropertyChanged("Username");
    }
} 
```

（除此之外：您只需要在编写自己的控件时使用 DependencyProperties。）

# forms - 无法从 tinyMCE 编辑器中获取价值

> ID：13739443
> 
> 赞同：4
> 
> 时间：2012-12-06T08:12:50.717
> 
> 标签：forms, jsf, xhtml, tinymce

我正在使用 JSF 2.1。我正在尝试在 . 这是我的 xhtml 文件代码-

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:p="http://primefaces.org/ui">
<h:head>

    <h:outputStylesheet library="css" name="editor_style.css" />
    <h:outputStylesheet library="css" name="dropdown_menu/dropdown.css" />
    <h:outputStylesheet library="css" name="css/main.css" />
    <h:outputStylesheet library="css" name="css/dropdown.css" />
    <h:outputStylesheet library="css" name="css/drop-down.css" />

    <h:outputScript name="dropdown_menu/stuHover.js"></h:outputScript>
    <h:outputScript name="js/my_js.js"></h:outputScript>
    <h:outputScript name="js/jquery.min.js"></h:outputScript>
    <h:outputScript name="js/tinyeditor.js"></h:outputScript>

</h:head>

<h:body>
    <div class="content">
        <ui:include src="/template/layout/commonLayout.xhtml" />
        <ui:include src="/template/layout/menu.xhtml" />
        <h:form id="form">
            <div class="quick_links">
                <div class="q_title"></div>
                <div class="q_window">
                    <div class="q_top"></div>
                    <div class="q_main">

                        <h:inputTextarea id="input" value="#{EditorBean.value}"
                            style="width:100%; height:300px;">Sample FAQ</h:inputTextarea>

                        <h:outputScript>                        
                new TINY.editor.edit('editor',{
                    id:'form:input',
                    width:945,
                    height:175,
                    cssclass:'te',
                    controlclass:'tecontrol',
                    rowclass:'teheader',
                    dividerclass:'tedivider',
                    controls:['bold','italic','underline','strikethrough','|','subscript','superscript','|',
                              'orderedlist','unorderedlist','|','outdent','indent','|','leftalign',
                              'centeralign','rightalign','blockjustify','|','unformat','|','undo','redo','n',
                              'font','size','style','|','hr','link','unlink'],
                    footer:true,
                    fonts:['Verdana','Arial','Georgia','Trebuchet MS'],
                    xhtml:true,
                    cssfile:'style.css',
                    bodyid:'editor',
                    footerclass:'tefooter',
                    toggle:{text:'Source',activetext:'HTML',cssclass:'toggle'},
                    resize:{cssclass:'resize'}
                });
               </h:outputScript>

                    </div>
                    <div class="q_bottom"></div>
                </div>

                <h:commandButton id="button" value="Savebutton"
                    action="#{EditorBean.test}"></h:commandButton>
            </div>
            <div class="push"></div>
        </h:form>
    </div>

    <script language="javascript">footer();</script>

</h:body>
</html> 
```

我的豆类是

```
package com.denso.rms.beans;

import java.awt.Window;
import java.io.FileOutputStream;

import com.sun.java.swing.plaf.windows.resources.windows;

public class EditorBean {     
    private String value; 

    public String getValue() {      
        return value;  
    }  

    public void setValue(String value) {

        this.value = value;         
    }  
    public String test() {
        System.out.println("Value is-" +value);
        return value;
    }       

} 
```

我也输入了 faces-config.xml

基本问题是，如果我尝试打印“值”，它什么也没有显示。如果我删除编辑器，那么它工作正常。所以问题出在`<h:inputtextarea>`编辑器中，因为当我尝试在 getter 和 setter 中打印相同的值时，它什么也没显示。我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T08:28:56.480

> 那是因为它不再是文本区域了。它被 iframe （等等）取代，并且序列化函数仅从表单字段中获取数据。[问题 jquery 和 tinymce：textarea 值未提交](https://stackoverflow.com/a/2122147/617373)

所以你必须在发布到服务器之前*提取它的值*

一种方法可能是将以下内容添加到提交中`h:commandBttonon`

```
onclick="tinyMCE.triggerSave();" 
```

或者

```
onclick="$('#form\\:input').tinymce().save();" 
```

如果这个比下面的解决方案不起作用（是更好的INMO）

`h:commandButton`像这样修改你的

```
 <h:commandButton onclick="save_and_add();return false;" id="button" 
     value="Savebutton"></h:commandButton> 
```

这是js函数的内容

```
function save_and_add(){
    tinyMCE.triggerSave();
    $('#form\\:button2').click();
}; 
```

现在添加另一个隐藏按钮来执行实际提交

```
<h:commandButton id="button2" style="display:none;"
 action="#{EditorBean.test}"></h:commandButton> 
```

# c# - DotNetOpenAuth、AuthenticationStatus.Failed - 消息签名不正确

> ID：13739445
> 
> 赞同：1
> 
> 时间：2012-12-06T08:12:57.373
> 
> 标签：c#, asp.net, openid, dotnetopenauth

我的 asp.net 网站有问题（不是 MVC，不是 WebForms）。

表单看起来像：<form method="post" enctype="multipart/form-data" action="http://mysite.com/register/">

使用 REWRITE-URL 的站点

C#代码部分：

```
private OpenIdRelyingParty openIdProvider = new OpenIdRelyingParty();

or

private OpenIdRelyingParty openIdProvider = new OpenIdRelyingParty(null); // tried both

//request part

Uri uri = new Uri("http://mysite.com/register/");                           
IAuthenticationRequest request = openIdProvider.CreateRequest(userOpenId, Realm.AutoDetect, uri);

request.AddExtension(new ClaimsRequest
 {
                                                                 Email = DemandLevel.Require,
                                                                 Gender = DemandLevel.Request,
                                                                 BirthDate = DemandLevel.Request,
                                                                 FullName = DemandLevel.Request,
                                                                 Nickname = DemandLevel.Request
                                                             });

request.RedirectToProvider();

// response part

HttpContext httpContext = HttpContext.Current;

var headers = new WebHeaderCollection();

foreach (string header in httpContext.Request.Headers)
                {
                    headers.Add(header, httpContext.Request.Headers[header]);
                    Response.Write(header + " = " + httpContext.Request.Headers[header] + " == HEADER<br>");
                }

string requestUrl = string.Format("{0}{1}", "http://mysite.com/register/", httpContext.Request.Url.Query);

HttpRequestBase requestInfo = HttpRequestInfo.Create(httpContext.Request.HttpMethod, new Uri(requestUrl), headers, httpContext.Request.InputStream);

response = openIdProvider.GetResponse(requestInfo); 
```

* * *

结果：response.Status == AuthenticationStatus.Failed

错误消息：消息签名不正确。

* * *

日志：

```
2012-12-06 10:51:56,240 (GMT+4) [1] INFO  DotNetOpenAuth - DotNetOpenAuth, Version=4.1.3.12303, Culture=neutral, PublicKeyToken=2780ccd10d57b246 (official)
2012-12-06 10:51:56,412 (GMT+4) [1] ERROR DotNetOpenAuth - Error while trying to initialize reporting.
System.ApplicationException: Access is denied. (Exception from HRESULT: 0x80070005 (E_ACCESSDENIED))
   at System.IO.IsolatedStorage.IsolatedStorageFile.nGetRootDir(IsolatedStorageScope scope)
   at System.IO.IsolatedStorage.IsolatedStorageFile.InitGlobalsNonRoamingUser(IsolatedStorageScope scope)
   at System.IO.IsolatedStorage.IsolatedStorageFile.GetRootDir(IsolatedStorageScope scope)
   at System.IO.IsolatedStorage.IsolatedStorageFile.GetGlobalFileIOPerm(IsolatedStorageScope scope)
   at System.IO.IsolatedStorage.IsolatedStorageFile.Init(IsolatedStorageScope scope)
   at System.IO.IsolatedStorage.IsolatedStorageFile.GetStore(IsolatedStorageScope scope, Type domainEvidenceType, Type assemblyEvidenceType)
   at DotNetOpenAuth.Reporting.GetIsolatedStorage()
   at DotNetOpenAuth.Reporting.Initialize()
2012-12-06 11:05:43,568 (GMT+4) [7] INFO  DotNetOpenAuth - DotNetOpenAuth, Version=4.1.3.12303, Culture=neutral, PublicKeyToken=2780ccd10d57b246 (official)
2012-12-06 11:05:43,693 (GMT+4) [7] ERROR DotNetOpenAuth - Error while trying to initialize reporting.
System.ApplicationException: Access is denied. (Exception from HRESULT: 0x80070005 (E_ACCESSDENIED))
   at System.IO.IsolatedStorage.IsolatedStorageFile.nGetRootDir(IsolatedStorageScope scope)
   at System.IO.IsolatedStorage.IsolatedStorageFile.InitGlobalsNonRoamingUser(IsolatedStorageScope scope)
   at System.IO.IsolatedStorage.IsolatedStorageFile.GetRootDir(IsolatedStorageScope scope)
   at System.IO.IsolatedStorage.IsolatedStorageFile.GetGlobalFileIOPerm(IsolatedStorageScope scope)
   at System.IO.IsolatedStorage.IsolatedStorageFile.Init(IsolatedStorageScope scope)
   at System.IO.IsolatedStorage.IsolatedStorageFile.GetStore(IsolatedStorageScope scope, Type domainEvidenceType, Type assemblyEvidenceType)
   at DotNetOpenAuth.Reporting.GetIsolatedStorage()
   at DotNetOpenAuth.Reporting.Initialize()
2012-12-06 11:05:43,802 (GMT+4) [7] DEBUG DotNetOpenAuth.OpenId - .NET Uri class path compression overridden.
2012-12-06 11:05:43,880 (GMT+4) [7] DEBUG DotNetOpenAuth.Http - HTTP GET http://1dorog.id.mail.ru/
2012-12-06 11:05:43,896 (GMT+4) [7] DEBUG DotNetOpenAuth.Yadis - X-XRDS-Location found in HTTP header.  Preparing to pull XRDS from http://openid.mail.ru/mail/1dorog/xrds
2012-12-06 11:05:43,912 (GMT+4) [7] DEBUG DotNetOpenAuth.Http - HTTP GET http://openid.mail.ru/mail/1dorog/xrds
2012-12-06 11:05:44,005 (GMT+4) [7] DEBUG DotNetOpenAuth.Yadis - Total services discovered in XRDS: 1
2012-12-06 11:05:44,005 (GMT+4) [7] DEBUG DotNetOpenAuth.Yadis - [{
    ClaimedIdentifier: http://1dorog.id.mail.ru/
    ProviderLocalIdentifier: http://1dorog.id.mail.ru/
    ProviderEndpoint: http://openid.mail.ru/login
    OpenID version: 2.0
    Service Type URIs:
        http://specs.openid.net/auth/2.0/signon
        http://openid.net/signon/1.1
        http://openid.net/signon/1.0
        http://openid.net/extensions/sreg/1.1
        http://specs.openid.net/extensions/ui/1.0/mode/popup
},]
2012-12-06 11:05:44,021 (GMT+4) [7] DEBUG DotNetOpenAuth.Yadis - Skipping HTML discovery because XRDS contained service endpoints.
2012-12-06 11:05:44,052 (GMT+4) [7] INFO  DotNetOpenAuth.Yadis - Performing discovery on user-supplied identifier: http://1dorog.id.mail.ru/
2012-12-06 11:05:44,068 (GMT+4) [7] DEBUG DotNetOpenAuth.Yadis - Filtering and sorting of endpoints did not affect the list.
2012-12-06 11:05:44,068 (GMT+4) [7] DEBUG DotNetOpenAuth.OpenId - Creating authentication request for user supplied Identifier: http://1dorog.id.mail.ru/
2012-12-06 11:05:44,271 (GMT+4) [7] INFO  DotNetOpenAuth.OpenId - Diffie-Hellman supporting assemblies found and loaded.
2012-12-06 11:05:44,490 (GMT+4) [7] DEBUG DotNetOpenAuth.Messaging.Channel - Preparing to send AssociateDiffieHellmanRequest (2.0) message.
2012-12-06 11:05:44,490 (GMT+4) [7] DEBUG DotNetOpenAuth.Messaging.Bindings - Binding element DotNetOpenAuth.OpenId.ChannelElements.ExtensionsBindingElementRelyingParty did not apply to message.
2012-12-06 11:05:44,490 (GMT+4) [7] DEBUG DotNetOpenAuth.Messaging.Bindings - Binding element DotNetOpenAuth.OpenId.ChannelElements.RelyingPartySecurityOptions did not apply to message.
2012-12-06 11:05:44,490 (GMT+4) [7] DEBUG DotNetOpenAuth.Messaging.Bindings - Binding element DotNetOpenAuth.OpenId.ChannelElements.BackwardCompatibilityBindingElement did not apply to message.
2012-12-06 11:05:44,490 (GMT+4) [7] DEBUG DotNetOpenAuth.Messaging.Bindings - Binding element DotNetOpenAuth.OpenId.ChannelElements.ReturnToNonceBindingElement did not apply to message.
2012-12-06 11:05:44,490 (GMT+4) [7] DEBUG DotNetOpenAuth.Messaging.Bindings - Binding element DotNetOpenAuth.OpenId.ChannelElements.ReturnToSignatureBindingElement did not apply to message.
2012-12-06 11:05:44,505 (GMT+4) [7] DEBUG DotNetOpenAuth.Messaging.Bindings - Binding element DotNetOpenAuth.Messaging.Bindings.StandardReplayProtectionBindingElement did not apply to message.
2012-12-06 11:05:44,505 (GMT+4) [7] DEBUG DotNetOpenAuth.Messaging.Bindings - Binding element DotNetOpenAuth.Messaging.Bindings.StandardExpirationBindingElement did not apply to message.
2012-12-06 11:05:44,505 (GMT+4) [7] DEBUG DotNetOpenAuth.Messaging.Bindings - Binding element DotNetOpenAuth.OpenId.ChannelElements.RelyingPartySigningBindingElement did not apply to message.
2012-12-06 11:05:44,583 (GMT+4) [7] INFO  DotNetOpenAuth.Messaging.Channel - Prepared outgoing AssociateDiffieHellmanRequest (2.0) message for http://openid.mail.ru/login: 
    openid.dh_modulus: ANz5OguIOXLsDhmYmsWizjEOHTdxfo2Vcbt2I3MYZuYe91ouJ4mLBX+YkcLiemOcPym2CBRYHNOyyjmG0mg3BVd9RcLn5S3IHHoXGHblzqdLFEi/368Ygo79JRnxTkXjgmY0rxlJ5bU1zIKaSDuKdiI+XUkKJX8Fvf8W8vsixYOr
    openid.dh_gen: Ag==
    openid.dh_consumer_public: AV6/OIetgoN8ACoHLA7T2IosRPpXxoRaijaqaBSpSeo3PhpU6HdHM18IS2lD+msnZ4KmeDeJ0lyvhXqOQ/j3ReNNMEh+3xiUVhnScDldFl6hNpdb+BkdqmHjCAuCAvn6rTltIKwnCLwTCzjG7QXejUBcop18eFk7o/+TkN0t/bM=
    openid.assoc_type: HMAC-SHA256
    openid.session_type: DH-SHA256
    openid.mode: associate
    openid.ns: http://specs.openid.net/auth/2.0

2012-12-06 11:05:44,583 (GMT+4) [7] DEBUG DotNetOpenAuth.Messaging.Channel - Sending AssociateDiffieHellmanRequest request.
2012-12-06 11:05:44,630 (GMT+4) [7] DEBUG DotNetOpenAuth.Http - HTTP POST http://openid.mail.ru/login
2012-12-06 11:05:44,646 (GMT+4) [7] DEBUG DotNetOpenAuth.Messaging.Channel - Received AssociateDiffieHellmanRelyingPartyResponse response.
2012-12-06 11:05:44,662 (GMT+4) [7] INFO  DotNetOpenAuth.Messaging.Channel - Processing incoming AssociateDiffieHellmanRelyingPartyResponse (2.0) message:
    dh_server_public: UkkgTDl1Tf74YoLzwv1J6eWlJJa4aGhPnFhW7cvTwKSfqE2C4MZwMwqG/K3VZl1ErDZYS6Rl3ZWXG6jx40ajlJ8W6FtKHz6AxrpzbkDf9rwh1tiUJYKTMHL9QYrmt/9v6TWJu//hhyv+BV2SW9ZIOj4tuIU/WyFFIxUEVVsG900=
    enc_mac_key: 15YHh+muOtqdDgqKtQcwHyUyoYkGQfHdaXPJZccg6gI=
    assoc_handle: 991b142fc46c9618026e5358f6c0a7b5
    assoc_type: HMAC-SHA256
    session_type: DH-SHA256
    expires_in: 60
    ns: http://specs.openid.net/auth/2.0

2012-12-06 11:05:44,662 (GMT+4) [7] DEBUG DotNetOpenAuth.Messaging.Bindings - Binding element DotNetOpenAuth.OpenId.ChannelElements.ReturnToSignatureBindingElement did not apply to message.
2012-12-06 11:05:44,662 (GMT+4) [7] DEBUG DotNetOpenAuth.Messaging.Bindings - Binding element DotNetOpenAuth.OpenId.ChannelElements.BackwardCompatibilityBindingElement did not apply to message.
2012-12-06 11:05:44,662 (GMT+4) [7] DEBUG DotNetOpenAuth.Messaging.Bindings - Binding element DotNetOpenAuth.OpenId.ChannelElements.RelyingPartySigningBindingElement did not apply to message.
2012-12-06 11:05:44,662 (GMT+4) [7] DEBUG DotNetOpenAuth.Messaging.Bindings - Binding element DotNetOpenAuth.Messaging.Bindings.StandardExpirationBindingElement did not apply to message.
2012-12-06 11:05:44,662 (GMT+4) [7] DEBUG DotNetOpenAuth.Messaging.Bindings - Binding element DotNetOpenAuth.Messaging.Bindings.StandardReplayProtectionBindingElement did not apply to message.
2012-12-06 11:05:44,677 (GMT+4) [7] DEBUG DotNetOpenAuth.Messaging.Bindings - Binding element DotNetOpenAuth.OpenId.ChannelElements.ReturnToNonceBindingElement did not apply to message.
2012-12-06 11:05:44,677 (GMT+4) [7] DEBUG DotNetOpenAuth.Messaging.Bindings - Binding element DotNetOpenAuth.OpenId.ChannelElements.RelyingPartySecurityOptions did not apply to message.
2012-12-06 11:05:44,677 (GMT+4) [7] DEBUG DotNetOpenAuth.Messaging.Bindings - Binding element DotNetOpenAuth.OpenId.ChannelElements.ExtensionsBindingElementRelyingParty did not apply to message.
2012-12-06 11:05:44,677 (GMT+4) [7] DEBUG DotNetOpenAuth.Messaging.Channel - After binding element processing, the received AssociateDiffieHellmanRelyingPartyResponse (2.0) message is: 
    dh_server_public: UkkgTDl1Tf74YoLzwv1J6eWlJJa4aGhPnFhW7cvTwKSfqE2C4MZwMwqG/K3VZl1ErDZYS6Rl3ZWXG6jx40ajlJ8W6FtKHz6AxrpzbkDf9rwh1tiUJYKTMHL9QYrmt/9v6TWJu//hhyv+BV2SW9ZIOj4tuIU/WyFFIxUEVVsG900=
    enc_mac_key: 15YHh+muOtqdDgqKtQcwHyUyoYkGQfHdaXPJZccg6gI=
    assoc_handle: 991b142fc46c9618026e5358f6c0a7b5
    assoc_type: HMAC-SHA256
    session_type: DH-SHA256
    expires_in: 60
    ns: http://specs.openid.net/auth/2.0

2012-12-06 11:05:44,943 (GMT+4) [7] DEBUG DotNetOpenAuth.Messaging.Channel - Preparing to send AssociateDiffieHellmanRequest (2.0) message.
2012-12-06 11:05:44,943 (GMT+4) [7] DEBUG DotNetOpenAuth.Messaging.Bindings - Binding element DotNetOpenAuth.OpenId.ChannelElements.ExtensionsBindingElementRelyingParty did not apply to message.
2012-12-06 11:05:44,943 (GMT+4) [7] DEBUG DotNetOpenAuth.Messaging.Bindings - Binding element DotNetOpenAuth.OpenId.ChannelElements.RelyingPartySecurityOptions did not apply to message.
2012-12-06 11:05:44,943 (GMT+4) [7] DEBUG DotNetOpenAuth.Messaging.Bindings - Binding element DotNetOpenAuth.OpenId.ChannelElements.BackwardCompatibilityBindingElement did not apply to message.
2012-12-06 11:05:44,943 (GMT+4) [7] DEBUG DotNetOpenAuth.Messaging.Bindings - Binding element DotNetOpenAuth.OpenId.ChannelElements.ReturnToNonceBindingElement did not apply to message.
2012-12-06 11:05:44,943 (GMT+4) [7] DEBUG DotNetOpenAuth.Messaging.Bindings - Binding element DotNetOpenAuth.OpenId.ChannelElements.ReturnToSignatureBindingElement did not apply to message.
2012-12-06 11:05:44,943 (GMT+4) [7] DEBUG DotNetOpenAuth.Messaging.Bindings - Binding element DotNetOpenAuth.Messaging.Bindings.StandardReplayProtectionBindingElement did not apply to message.
2012-12-06 11:05:44,943 (GMT+4) [7] DEBUG DotNetOpenAuth.Messaging.Bindings - Binding element DotNetOpenAuth.Messaging.Bindings.StandardExpirationBindingElement did not apply to message.
2012-12-06 11:05:44,943 (GMT+4) [7] DEBUG DotNetOpenAuth.Messaging.Bindings - Binding element DotNetOpenAuth.OpenId.ChannelElements.RelyingPartySigningBindingElement did not apply to message.
2012-12-06 11:05:44,943 (GMT+4) [7] INFO  DotNetOpenAuth.Messaging.Channel - Prepared outgoing AssociateDiffieHellmanRequest (2.0) message for http://openid.mail.ru/login: 
    openid.dh_modulus: ANz5OguIOXLsDhmYmsWizjEOHTdxfo2Vcbt2I3MYZuYe91ouJ4mLBX+YkcLiemOcPym2CBRYHNOyyjmG0mg3BVd9RcLn5S3IHHoXGHblzqdLFEi/368Ygo79JRnxTkXjgmY0rxlJ5bU1zIKaSDuKdiI+XUkKJX8Fvf8W8vsixYOr
    openid.dh_gen: Ag==
    openid.dh_consumer_public: dZ/yq5ZOFVE18zJ0zKrAZDcihDBc5j43g0a+aUWdiYbVGGrTB++D1gySdk00vfG/zf7O+N8MnReGAFA4P6W4ZizB2beZ5RtfV6gQvQhFQOROZuWKPWL81yHhYi+q7Ml3hLhDb8kLXL1Iig4T8qVB41i1J5UTUeJ2X0hdMFo9i2s=
    openid.assoc_type: HMAC-SHA256
    openid.session_type: DH-SHA256
    openid.mode: associate
    openid.ns: http://specs.openid.net/auth/2.0

2012-12-06 11:05:44,943 (GMT+4) [7] DEBUG DotNetOpenAuth.Messaging.Channel - Sending AssociateDiffieHellmanRequest request.
2012-12-06 11:05:44,943 (GMT+4) [7] DEBUG DotNetOpenAuth.Http - HTTP POST http://openid.mail.ru/login
2012-12-06 11:05:44,958 (GMT+4) [7] DEBUG DotNetOpenAuth.Messaging.Channel - Received AssociateDiffieHellmanRelyingPartyResponse response.
2012-12-06 11:05:44,958 (GMT+4) [7] INFO  DotNetOpenAuth.Messaging.Channel - Processing incoming AssociateDiffieHellmanRelyingPartyResponse (2.0) message:
    dh_server_public: MBRXCLP62zX+N9aTKlhCoPUHjaEZ1OOQb9JuHkz7Uy/ZkbfAqDZEPVKjGTF/fMQX4BKlueKDhYcIAzmri97SxHOWQvm/f5elKMcOQ/5x3PyI36gJS0DKla/X5+vo66ybIjV29xfw+BnFSgCcDFQXvPzv4HX56EU1gkiaAsOkBgI=
    enc_mac_key: aD1Pl6J5MGiCSh3CxZPmw7dntiaw6Z5HDS7Y3RhilOY=
    assoc_handle: cdcbb91ff7f0259d3beb237fe7d65290
    assoc_type: HMAC-SHA256
    session_type: DH-SHA256
    expires_in: 60
    ns: http://specs.openid.net/auth/2.0

2012-12-06 11:05:44,958 (GMT+4) [7] DEBUG DotNetOpenAuth.Messaging.Bindings - Binding element DotNetOpenAuth.OpenId.ChannelElements.ReturnToSignatureBindingElement did not apply to message.
2012-12-06 11:05:44,958 (GMT+4) [7] DEBUG DotNetOpenAuth.Messaging.Bindings - Binding element DotNetOpenAuth.OpenId.ChannelElements.BackwardCompatibilityBindingElement did not apply to message.
2012-12-06 11:05:44,958 (GMT+4) [7] DEBUG DotNetOpenAuth.Messaging.Bindings - Binding element DotNetOpenAuth.OpenId.ChannelElements.RelyingPartySigningBindingElement did not apply to message.
2012-12-06 11:05:44,958 (GMT+4) [7] DEBUG DotNetOpenAuth.Messaging.Bindings - Binding element DotNetOpenAuth.Messaging.Bindings.StandardExpirationBindingElement did not apply to message.
2012-12-06 11:05:44,958 (GMT+4) [7] DEBUG DotNetOpenAuth.Messaging.Bindings - Binding element DotNetOpenAuth.Messaging.Bindings.StandardReplayProtectionBindingElement did not apply to message.
2012-12-06 11:05:44,958 (GMT+4) [7] DEBUG DotNetOpenAuth.Messaging.Bindings - Binding element DotNetOpenAuth.OpenId.ChannelElements.ReturnToNonceBindingElement did not apply to message.
2012-12-06 11:05:44,958 (GMT+4) [7] DEBUG DotNetOpenAuth.Messaging.Bindings - Binding element DotNetOpenAuth.OpenId.ChannelElements.RelyingPartySecurityOptions did not apply to message.
2012-12-06 11:05:44,958 (GMT+4) [7] DEBUG DotNetOpenAuth.Messaging.Bindings - Binding element DotNetOpenAuth.OpenId.ChannelElements.ExtensionsBindingElementRelyingParty did not apply to message.
2012-12-06 11:05:44,958 (GMT+4) [7] DEBUG DotNetOpenAuth.Messaging.Channel - After binding element processing, the received AssociateDiffieHellmanRelyingPartyResponse (2.0) message is: 
    dh_server_public: MBRXCLP62zX+N9aTKlhCoPUHjaEZ1OOQb9JuHkz7Uy/ZkbfAqDZEPVKjGTF/fMQX4BKlueKDhYcIAzmri97SxHOWQvm/f5elKMcOQ/5x3PyI36gJS0DKla/X5+vo66ybIjV29xfw+BnFSgCcDFQXvPzv4HX56EU1gkiaAsOkBgI=
    enc_mac_key: aD1Pl6J5MGiCSh3CxZPmw7dntiaw6Z5HDS7Y3RhilOY=
    assoc_handle: cdcbb91ff7f0259d3beb237fe7d65290
    assoc_type: HMAC-SHA256
    session_type: DH-SHA256
    expires_in: 60
    ns: http://specs.openid.net/auth/2.0

2012-12-06 11:05:45,005 (GMT+4) [7] DEBUG DotNetOpenAuth.Messaging.Channel - Preparing to send CheckIdRequest (2.0) message.
2012-12-06 11:05:45,037 (GMT+4) [7] DEBUG DotNetOpenAuth.Messaging.Bindings - Binding element DotNetOpenAuth.OpenId.ChannelElements.ExtensionsBindingElementRelyingParty applied to message.
2012-12-06 11:05:45,037 (GMT+4) [7] DEBUG DotNetOpenAuth.Messaging.Bindings - Binding element DotNetOpenAuth.OpenId.ChannelElements.RelyingPartySecurityOptions did not apply to message.
2012-12-06 11:05:45,037 (GMT+4) [7] DEBUG DotNetOpenAuth.Messaging.Bindings - Binding element DotNetOpenAuth.OpenId.ChannelElements.BackwardCompatibilityBindingElement did not apply to message.
2012-12-06 11:05:45,037 (GMT+4) [7] DEBUG DotNetOpenAuth.Messaging.Bindings - Binding element DotNetOpenAuth.OpenId.ChannelElements.ReturnToNonceBindingElement did not apply to message.
2012-12-06 11:05:45,037 (GMT+4) [7] DEBUG DotNetOpenAuth.Messaging.Bindings - Binding element DotNetOpenAuth.OpenId.ChannelElements.ReturnToSignatureBindingElement did not apply to message.
2012-12-06 11:05:45,037 (GMT+4) [7] DEBUG DotNetOpenAuth.Messaging.Bindings - Binding element DotNetOpenAuth.Messaging.Bindings.StandardReplayProtectionBindingElement did not apply to message.
2012-12-06 11:05:45,037 (GMT+4) [7] DEBUG DotNetOpenAuth.Messaging.Bindings - Binding element DotNetOpenAuth.Messaging.Bindings.StandardExpirationBindingElement did not apply to message.
2012-12-06 11:05:45,037 (GMT+4) [7] DEBUG DotNetOpenAuth.Messaging.Bindings - Binding element DotNetOpenAuth.OpenId.ChannelElements.RelyingPartySigningBindingElement did not apply to message.
2012-12-06 11:05:45,037 (GMT+4) [7] INFO  DotNetOpenAuth.Messaging.Channel - Prepared outgoing CheckIdRequest (2.0) message for http://openid.mail.ru/login: 
    openid.claimed_id: http://1dorog.id.mail.ru/
    openid.identity: http://1dorog.id.mail.ru/
    openid.assoc_handle: cdcbb91ff7f0259d3beb237fe7d65290
    openid.return_to: http://mysite.com/register/?dnoa.userSuppliedIdentifier=http%3A%2F%2F1dorog.id.mail.ru%2F
    openid.realm: http://mysite.com/
    openid.mode: checkid_setup
    openid.ns: http://specs.openid.net/auth/2.0
    openid.ns.sreg: http://openid.net/extensions/sreg/1.1
    openid.sreg.required: email
    openid.sreg.optional: nickname,fullname,dob,gender

2012-12-06 11:05:45,037 (GMT+4) [7] DEBUG DotNetOpenAuth.Messaging.Channel - Sending message: CheckIdRequest
2012-12-06 11:05:45,037 (GMT+4) [7] DEBUG DotNetOpenAuth.Http - Redirecting to http://openid.mail.ru/login?openid.claimed_id=http%3A%2F%2F1dorog.id.mail.ru%2F&openid.identity=http%3A%2F%2F1dorog.id.mail.ru%2F&openid.assoc_handle=cdcbb91ff7f0259d3beb237fe7d65290&openid.return_to=http%3A%2F%2Fmysite.com%2Fregister%2F%3Fdnoa.userSuppliedIdentifier%3Dhttp%253A%252F%252F1dorog.id.mail.ru%252F&openid.realm=http%3A%2F%2Fmysite.com%2F&openid.mode=checkid_setup&openid.ns=http%3A%2F%2Fspecs.openid.net%2Fauth%2F2.0&openid.ns.sreg=http%3A%2F%2Fopenid.net%2Fextensions%2Fsreg%2F1.1&openid.sreg.required=email&openid.sreg.optional=nickname%2Cfullname%2Cdob%2Cgender
2012-12-06 11:05:45,740 (GMT+4) [7] INFO  DotNetOpenAuth.Messaging.Channel - Scanning incoming request for messages: http://mysite.com/register/?dnoa.userSuppliedIdentifier=http://1dorog.id.mail.ru/&openid.ns=http://specs.openid.net/auth/2.0&openid.mode=id_res&openid.op_endpoint=http://openid.mail.ru/login&openid.claimed_id=http://1dorog.id.mail.ru/&openid.identity=http://1dorog.id.mail.ru/&openid.return_to=http://mysite.com/register/?dnoa.userSuppliedIdentifier=http%3A%2F%2F1dorog.id.mail.ru%2F&openid.response_nonce=2012-12-06T07:05:46Zvf6eA5G4&openid.assoc_handle=cdcbb91ff7f0259d3beb237fe7d65290&openid.sreg.email=1dorog@mail.ru&openid.sreg.gender=M&openid.sreg.fullname=1%20Dorog&openid.sreg.nickname=1%20Dorog&openid.signed=ns,mode,op_endpoint,claimed_id,identity,return_to,response_nonce,assoc_handle,sreg.email,sreg.gender,sreg.fullname,sreg.nickname&openid.sig=ub2/HvGGl8xnmUKEfeRzLFn/0ZUh6emENsWA/eajF20=&page.id=6070266&keys.count=0
2012-12-06 11:05:45,740 (GMT+4) [7] DEBUG DotNetOpenAuth.Messaging.Channel - Incoming HTTP request: GET http://mysite.com/register/?dnoa.userSuppliedIdentifier=http://1dorog.id.mail.ru/&openid.ns=http://specs.openid.net/auth/2.0&openid.mode=id_res&openid.op_endpoint=http://openid.mail.ru/login&openid.claimed_id=http://1dorog.id.mail.ru/&openid.identity=http://1dorog.id.mail.ru/&openid.return_to=http://mysite.com/register/?dnoa.userSuppliedIdentifier=http%3A%2F%2F1dorog.id.mail.ru%2F&openid.response_nonce=2012-12-06T07:05:46Zvf6eA5G4&openid.assoc_handle=cdcbb91ff7f0259d3beb237fe7d65290&openid.sreg.email=1dorog@mail.ru&openid.sreg.gender=M&openid.sreg.fullname=1%20Dorog&openid.sreg.nickname=1%20Dorog&openid.signed=ns,mode,op_endpoint,claimed_id,identity,return_to,response_nonce,assoc_handle,sreg.email,sreg.gender,sreg.fullname,sreg.nickname&openid.sig=ub2/HvGGl8xnmUKEfeRzLFn/0ZUh6emENsWA/eajF20=&page.id=6070266&keys.count=0
2012-12-06 11:05:45,771 (GMT+4) [7] DEBUG DotNetOpenAuth.Messaging.Channel - Incoming request received: PositiveAssertionResponse
2012-12-06 11:05:45,771 (GMT+4) [7] INFO  DotNetOpenAuth.Messaging.Channel - Processing incoming PositiveAssertionResponse (2.0) message:
    openid.claimed_id: http://1dorog.id.mail.ru/
    openid.identity: http://1dorog.id.mail.ru/
    openid.sig: ub2/HvGGl8xnmUKEfeRzLFn/0ZUh6emENsWA/eajF20=
    openid.signed: ns,mode,op_endpoint,claimed_id,identity,return_to,response_nonce,assoc_handle,sreg.email,sreg.gender,sreg.fullname,sreg.nickname
    openid.assoc_handle: cdcbb91ff7f0259d3beb237fe7d65290
    openid.op_endpoint: http://openid.mail.ru/login
    openid.return_to: http://mysite.com/register/?dnoa.userSuppliedIdentifier=http://1dorog.id.mail.ru/
    openid.response_nonce: 2012-12-06T07:05:46Zvf6eA5G4
    openid.mode: id_res
    openid.ns: http://specs.openid.net/auth/2.0
    dnoa.userSuppliedIdentifier: http://1dorog.id.mail.ru/
    openid.sreg.email: 1dorog@mail.ru
    openid.sreg.gender: M
    openid.sreg.fullname: 1 Dorog
    openid.sreg.nickname: 1 Dorog
    page.id: 6070266
    keys.count: 0

2012-12-06 11:05:45,771 (GMT+4) [7] DEBUG DotNetOpenAuth.Messaging.Bindings - Binding element DotNetOpenAuth.OpenId.ChannelElements.ReturnToSignatureBindingElement did not apply to message.
2012-12-06 11:05:45,771 (GMT+4) [7] DEBUG DotNetOpenAuth.Messaging.Bindings - Binding element DotNetOpenAuth.OpenId.ChannelElements.BackwardCompatibilityBindingElement did not apply to message.
2012-12-06 11:05:45,771 (GMT+4) [7] DEBUG DotNetOpenAuth.Messaging.Bindings - Verifying incoming PositiveAssertionResponse message signature of: ub2/HvGGl8xnmUKEfeRzLFn/0ZUh6emENsWA/eajF20=
2012-12-06 11:05:45,802 (GMT+4) [7] DEBUG DotNetOpenAuth.Messaging.Bindings.Signatures - Signing these message parts: 
    ns: http://specs.openid.net/auth/2.0
    mode: id_res
    op_endpoint: http://openid.mail.ru/login
    claimed_id: http://1dorog.id.mail.ru/
    identity: http://1dorog.id.mail.ru/
    return_to: http://mysite.com/register/?dnoa.userSuppliedIdentifier=http://1dorog.id.mail.ru/
    response_nonce: 2012-12-06T07:05:46Zvf6eA5G4
    assoc_handle: cdcbb91ff7f0259d3beb237fe7d65290
    sreg.email: 1dorog@mail.ru
    sreg.gender: M
    sreg.fullname: 1 Dorog
    sreg.nickname: 1 Dorog

Base64 representation of signed data: bnM6aHR0cDovL3NwZWNzLm9wZW5pZC5uZXQvYXV0aC8yLjAKbW9kZTppZF9yZXMKb3BfZW5kcG9pbnQ6aHR0cDovL29wZW5pZC5tYWlsLnJ1L2xvZ2luCmNsYWltZWRfaWQ6aHR0cDovLzFkb3JvZy5pZC5tYWlsLnJ1LwppZGVudGl0eTpodHRwOi8vMWRvcm9nLmlkLm1haWwucnUvCnJldHVybl90bzpodHRwOi8vdGVzdC5zdG9kb3JvZy5ydS9yZWdpc3Rlci8/ZG5vYS51c2VyU3VwcGxpZWRJZGVudGlmaWVyPWh0dHA6Ly8xZG9yb2cuaWQubWFpbC5ydS8KcmVzcG9uc2Vfbm9uY2U6MjAxMi0xMi0wNlQwNzowNTo0Nlp2ZjZlQTVHNAphc3NvY19oYW5kbGU6Y2RjYmI5MWZmN2YwMjU5ZDNiZWIyMzdmZTdkNjUyOTAKc3JlZy5lbWFpbDoxZG9yb2dAbWFpbC5ydQpzcmVnLmdlbmRlcjpNCnNyZWcuZnVsbG5hbWU6MTAwIERvcm9nCnNyZWcubmlja25hbWU6MTAwIERvcm9nCg==
Signature: 9ELJCE2S2e6/hFNDpD16vfzcBuvW/+eo2X0imhmPLPY=
2012-12-06 11:05:45,802 (GMT+4) [7] ERROR DotNetOpenAuth.Messaging.Bindings - Signature verification failed. 
```

* * *

**编辑：**

如果我不使用 url rewrite - [http://mysite.com/register.aspx](http://mysite.com/register.aspx)，那么一切正常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T14:13:10.960

这可能很明显，但是当您的 URL 重写器损坏 URL 以致它不再是 Provider 发送的内容时，就会发生这种情况。我从您的代码片段中看到，您希望重写器更改了方案和/或主机和路径，并且您正在将它们“恢复”为 OP 最初可能发送的内容。那部分看起来不错。由于它仍然失败，我建议您*非常*仔细地检查实际进入的查询字符串（在重写之前）并验证重写器根本没有触及*它*。我怀疑它正在稍微改变（也许改变了参数的 URI 转义——这是一个常见的错误）。

# java - 休眠对象刷新没有发生

> ID：13739446
> 
> 赞同：1
> 
> 时间：2012-12-06T08:13:03.177
> 
> 标签：java, hibernate

我有一个问题，即在 Hibernate 之外更新的对象（使用 MySQL Workbench）没有被刷新。发生的情况是我调用 Hibernate 应用程序并检查值，然后使用 Workbench 更新对象的值，保存并检查值是否已设置，并在刷新后在 Hibernate 中进行另一个调用，仍然是旧的价值就在那里。该对象在第三次调用时确实会重新刷新，但我需要立即执行此操作——在这种情况下我无法使用旧数据。

```
Query q = session.createQuery("SELECT object(o) FROM PortedNumber o WHERE o.number = '" + agiRequest.getDnid() + "'");
List<PortedNumber> portedNumberList = q.list();
if (!portedNumberList.isEmpty()) {
   for (PortedNumber portedNumber : portedNumberList) {
      session.evict(portedNumber);
      session.refresh(portedNumber, LockOptions.READ);
      networkId = portedNumber.getNetwork().getId();
      logger.info("Number is ported to networkId = " + networkId);
      break;
   }
} 
```

我更新的值是“portedNumber.getNetwork().getId()”。任何指导都是最受欢迎的

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T08:23:07.027

在 Hibernate 3 中，我们有 merge()（在 Hibernate 2 中，使用 saveOrUpdateCopy()）。此方法将强制 Hibernate 将来自其他分离实例的任何更改复制到您要保存的实例上，从而在保存之前合并内存中的所有更改。

```
Session session = sessionFactory1.openSession();
Transaction tx = session.beginTransaction();
Item item = (Item) session.get(Item.class, new Long(1234));
tx.commit();
session.close(); // end of first session, item is detached

item.getId(); // The database identity is "1234"
item.setDescription("my new description");
Session session2 = sessionFactory.openSession();
Transaction tx2 = session2.beginTransaction();
Item item2 = (Item) session2.get(Item.class, new Long(1234));
Item item3 = session2.merge(item); // Success!
tx2.commit();
session2.close(); 
```

# grails - 在 Grails 中多次重定向响应

> ID：13739450
> 
> 赞同：1
> 
> 时间：2012-12-06T08:13:14.007
> 
> 标签：grails, redirect, filter

是否可以在控制器之间多次重定向响应？如果我尝试在控制器内重定向响应，然后在过滤器的 after 方法中进行重定向，我得到了这个异常：

```
ERROR errors.GrailsExceptionResolver  - CannotRedirectException occurred when processing request: [GET] /ac/customer/index
Cannot issue a redirect(..) here. A previous call to redirect(..) has already redirected the response.. Stacktrace follows:
Message: Cannot issue a redirect(..) here. A previous call to redirect(..) has already redirected the response. 
```

有没有其他方法可以解决这个问题？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-06T08:26:41.660

在控制器之间多次重定向响应没有问题，但您只能在操作内重定向一次。检查您的操作方法并验证您在调用重定向后始终退出该方法（重定向并不意味着返回）。

这是错误的：

```
class MyController{

def myAction = {
   if(params.myparam){ redirect(uri:'/') }
   redirect(uri:'/foo')
   }

} 
```

在此示例中，如果存在“myparam”，则在操作内发出两次重定向，这很糟糕。

这是对的

类我的控制器{

```
def myAction = {
   if(params.myparam){ 
   return redirect(uri:'/') 
   }
   redirect(uri:'/foo')
   }

} 
```

注意使用闭包并返回内部闭包。闭包内的返回不会从主要操作中退出，而是从闭包 itef 中退出

这是错误的

```
class MyController{

    def myAction = {
       withForm {
          return redirect(uri:'/') 
       }.invalidToken {
          // bad request
       }
       redirect(uri:'/foo')
       }

    } 
```

因为调用了有效的两个重定向。

这是对的：

类我的控制器{

```
 def myAction = {
       def formIsValid
       withForm {
          formIsValid = true
       }.invalidToken {
          formIsValid = false
       }

       if(formIsValid){ 
         return redirect(uri:'/') 
       }

       redirect(uri:'/foo')
       }

    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T08:17:47.010

您可以使用`forward`：*目的：将请求从一个控制器转发到下一个控制器，而不发出 HTTP 重定向。*[在grails docs](http://grails.org/doc/latest/ref/Controllers/forward.html)中查看它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-01T18:58:06.293

我有这个问题。利用

```
 chain(action:'', model:[pass any params here including any message] 
```

这是链的文档：http: [//grails.org/doc/2.3.x/ref/Controllers/chain.html](http://grails.org/doc/2.3.x/ref/Controllers/chain.html)

# python - 对句子上的所有 k 执行 K 组合的算法

> ID：13739452
> 
> 赞同：4
> 
> 时间：2012-12-06T08:13:18.117
> 
> 标签：python, bash, combinations

我有一个文件：`test.txt`每行有一个句子。

```
Hello World  
99 Bottles of Beer  
Humpty Dumpty Sat on the wall 
```

我希望生成一个输出，显示来自该文件的输入的所有组合（即 2 ^n -1 个组合）。在上面的例子中，算法将溢出以下内容 - 每个组合都用管道 ( `|`)分隔

```
Hello World  
99 Bottles of Beer  
Humpty Dumpty Sat on the wall  
Hello World | 99 Bottles of Beer  
Hello World | Humpty Dumpty Sat on the wall  
99 Bottles of Beer | Humpty Dumpty Sat on the wall  
Hello World | 99 Bottles of Beer | Humpty Dumpty Sat on the wall 
```

理想情况下，我希望在 bash 或 python 或 perl 脚本中完成此操作，但我愿意接受建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T08:22:04.467

```
import itertools

l = [s.strip() for s in open('test.txt')]

for i in range(len(l)):
  print '\n'.join(map(' | '.join, itertools.combinations(l, i + 1))) 
```

生产

```
Hello World
99 Bottles of Beer
Humpty Dumpty Sat on the wall
Hello World | 99 Bottles of Beer
Hello World | Humpty Dumpty Sat on the wall
99 Bottles of Beer | Humpty Dumpty Sat on the wall
Hello World | 99 Bottles of Beer | Humpty Dumpty Sat on the wall 
```

如果你不喜欢`'\n'.join()`（我不确定我喜欢）的风格，你可以用一个显式循环替换它：

```
for i in range(len(l)):
  for c in map(' | '.join, itertools.combinations(l, i + 1)):
    print c 
```

这稍微有点冗长，但更经济。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T08:21:10.957

你可以做

```
import itertools

file = open("test.txt")
lines = files.readlines()

current = []
for i in range(len(lines):
    current.append(i)

    for combination in set(itertools.permutations(current)):
        for l in combination:
            output+=' | '.join(lines[l])
        output+= '\n'
print output 
```

我厌倦了我的迭代工具和设置技能，但这应该可以工作，除非有内存限制..

# extjs - Extjs在窗口内调整面板大小

> ID：13739455
> 
> 赞同：1
> 
> 时间：2012-12-06T08:13:30.813
> 
> 标签：extjs

extjs

我在 Ext.Panel 中有一个 iframe，而面板在 Ext.Window 内

当 iframe 的内容发生变化时，如何使窗口自动高度

请看代码：

```
var filePanel = new Ext.Panel({
     autoHeight: true
});

var fileUploadWindow = new Ext.Window({
    modal: true,
    autoHeight: true,
    title: 'File Upload',
    closable: true,
    draggable: true,
    autoDestroy: false,
    width: 570,
    items: [filePanel],
    shadow: true,
    buttons: [{
        xtype: 'button',
        text: 'Close',
        handler: function (button) {
            fileUploadWindow.hide();
            fileStore.reload();
        }
    }]
});

filePanel.add(new Ext.Panel({
    html: '<iframe src="../shared/Upload.aspx?_key=' + sskey + 
        '&_id=' + wkId + '" style="width:550px; border:none;"></iframe>'
})); 
```

有人能帮我吗 ？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T09:50:23.070

IMO 最好的方法是在加载框架中的文档后调整窗口大小。其实我看不出有什么别的办法。您需要获取`frame`元素，然后将处理程序附加到`load`事件以调整窗口大小。您可以通过调用获取 iframe 文档`var innerDoc = (frame.dom.contentDocument) ? frame.dom.contentDocument : frame.dom.contentWindow.document;`，然后通过`innerDoc.body.scrollHeight`.

工作样本：http: [//jsfiddle.net/unS7y/3/](http://jsfiddle.net/unS7y/3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T22:29:02.147

洛洛是对的。从 iframe 检索高度后，您需要调整窗口大小。

# ruby - ruby 中的备用 If-Else 块

> ID：13739456
> 
> 赞同：0
> 
> 时间：2012-12-06T08:13:32.210
> 
> 标签：ruby

我有一个代码，如果，除非像这样阻塞多次：

选项是哈希图。

```
unless functioncall? options[:product]
    puts "Hello wrold"
end 
```

任何人都可以解释这个流程，除非阻塞。我是 ruby​​ 新手，我使用花括号块代替它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T08:25:12.123

## 翻译成 if 语法

在`if`语法上，这相当于：

```
if functioncall?(options[:product])
else
  puts "Hello World"
end 
```

或者

```
if !functioncall?(options[:product])
  puts "Hello World"
end 
```

## 布尔方法的输出

如果选项哈希有一个名为 的键，该方法`functioncall?(options[:product])`将返回 true `product`。

## 你的方法的输出

根据选项哈希的内容，上述方法将产生：

```
# options = { :key => value, :product => 'stuff'}
functioncall?(options[:product]) #=> true
# the output of your code would be nil

# options = { :key => value, :foo => 'bar'}
functioncall?(options[:product]) #=> false
# the output of your code would be "Hello World" 
```

# c# - 如何将属性应用于控件，而不影响其子级

> ID：13739460
> 
> 赞同：3
> 
> 时间：2012-12-06T08:13:55.713
> 
> 标签：c#, .net, wpf, xaml, mvvm

我有一个 TreeView ，它的高亮显示如下所示：

```
<TreeView Name="tvFilters" Margin="0,10,0,10" Background="White" BorderBrush="White">
            <TreeView.Resources>
                <!-- Disables the blue highlighting when a TreeViewItem is clicked -->
                <SolidColorBrush x:Key="{x:Static SystemColors.HighlightBrushKey}">
                    Transparent
                </SolidColorBrush> 
            </TreeView.Resources>
 </TreeView> 
```

**编辑：**这是我的 TreeView 的一部分 - 请注意单击 TreeViewItem 后出现的灰色区域：

![在此处输入图像描述](../Images/33914f36531e5229cc69a7ab426568c8.png)

这是另一个：

![在此处输入图像描述](../Images/b35da244e6809c35eb6ba3bed85f97e2.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T09:48:41.337

要获得所需的行为，您需要为`TreeViewItem`. 然后，您可以在此模板中更改突出显示项目的背景颜色，而不会影响`TreeViewItem`.

您可以在 MSDN 中找到包含模板的样式示例：[TreeViewItem ControlTemplate Example](http://msdn.microsoft.com/en-us/library/vstudio/ms788727(v=vs.90).aspx)。

## 第一步：将样式放入您的应用程序

您需要使样式和模板可用于您的`TreeView`. 因此，从网站复制 XAML 并将其粘贴到您的资源部分`TreeView`：

```
<TreeView x:Name="tvFilters" ...>
    <TreeView.Resources>

        <!-- paste copied styles here -->

    </TreeView.Resources>
</TreeView> 
```

**注意：**确保您还复制了所提供示例底部​​的`SolidColorBrush`名称。`GlyphBrush`否则你的代码将无法工作。

## 第二步：修改代码，使其符合您的需求

要使代码按您的意愿工作，您需要进行一些修改。

1.  `x:Key="{x:Type TreeViewItem}"`从以下行中删除

    ```
    <Style x:Key="{x:Type TreeViewItem}" TargetType="{x:Type TreeViewItem}"> 
    ```

    所以它看起来像

    ```
    <Style TargetType="{x:Type TreeViewItem}"> 
    ```

    这会将样式应用于`TreeView`

2.  在样式中`TreeViewItem`查找`<Trigger Property="IsSelected" Value="true">`和替换

    ```
    <Setter TargetName="Bd"
            Property="Background"
            Value="{DynamicResource {x:Static SystemColors.HighlightBrushKey}}" />
    <Setter Property="Foreground" 
            Value="{DynamicResource {x:Static SystemColors.HighlightTextBrushKey}}"/> 
    ```

    和

    ```
    <Setter TargetName="Bd"
            Property="Background"
            Value="Transparent" />
    <Setter Property="Foreground" 
            Value="{DynamicResource {x:Static SystemColors.ControlTextBrushKey}}"/> 
    ```

    **注意：**两个值 (`Foreground`和`Background`) 都被替换了！

3.  在样式中`TreeViewItem`查找`<MultiTrigger>`具有`<Condition Property="IsSelected" Value="true"/>`并替换的

    ```
    <Setter TargetName="Bd" Property="Background" Value="{DynamicResource {x:Static SystemColors.ControlBrushKey}}"/> 
    ```

    和

    ```
    <Setter TargetName="Bd" Property="Background" Value="Transparent"/> 
    ```

## 结果

在进行修改之前，`TreeView`将如下所示：

![在此处输入图像描述](../Images/01dbec5d1b4d535793ea0584bb7c3912.png)

进行修改后， 上的蓝色突出显示`TreeView`将消失，而在 上仍然可用`ComboBox`：

![在此处输入图像描述](../Images/ae33dc75cd33a8049a2b89b66a0d413e.png)

# syntax-highlighting - doxygen markdown 防止在受保护的代码块中突出显示语法

> ID：13739461
> 
> 赞同：3
> 
> 时间：2012-12-06T08:13:56.783
> 
> 标签：syntax-highlighting, markdown, doxygen

我希望在没有任何语法突出显示的情况下出现一个受保护的代码块。对于以下代码：

```
~~~
Behold this, for this is an orange.
~~~ 
```

我得到`for`和`this`颜色。注意我没有指定文件扩展名。我需要指定特定的扩展名吗？我试过了`{.txt}`，但这没有帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T04:53:20.343

您在这里有几个选择。

*   可以使用 <pre> </pre> 块。里面的任何东西都会像控制台一样以等宽字体显示。
*   您可以使用 <blockquote> </blockquote> 缩进并在左侧放置一条垂直的蓝线。
    *   或者，您可以使用降价并放置一个“>”，然后在要显示为输出的文本之前放置一个空格。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-09T06:40:09.953

Doxygen 将基于显式语言`{.cpp}`（如果无法识别该语言，它似乎假定 C/C++ 语法高亮规则。

不幸的是，这意味着代码将根据 Doxygen 支持的一种语言进行格式化，并且没有办法让它在没有语法突出显示的情况下显示受保护的代码块。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-11-27T15:31:46.833

使用当前版本的 doxygen（我使用 1.8.13）**使用`~~~`-syntax**没有语言规范**会产生一个没有语法突出显示的代码块**。通用语言规范是

*   `~~~{.cpp}`(C++)
*   `~~~{.c}`（C）
*   `~~~{.py}`（Python）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-11-19T16:55:01.233

您可以尝试模仿 doxygen 使用的样式，方法如下：

```
/**
 * <div class="fragment">
 * <div class="line">Behold this, for this is an orange.</div>
 * <div class="line">General use:</div>
 * <div class="line">   ./SLAM_plus_plus -i <filename> --no-detailed-timing</div>
 * <div class="line"></div>
 * <div class="line">To run the pose-only datasets more quickly:</div>
 * <div class="line">   ./SLAM_plus_plus -i <filename> --pose-only --no-detailed-timing</div>
 * <div class="line"></div>
 * <div class="line">To run incrementally:</div>
 * <div class="line">   ./SLAM_plus_plus -nsp <optimize-each-N-verts> -fL -i <filename> --no-detailed-timing</div>
 * </div>
 */ 
```

虽然有点复杂（每行文本都需要被自己的 包围`<div>`），但它会为您提供所需的内容，而不会突出显示。您可能希望使用`\htmlonly`并避免空格浓缩来包围此块（否则，多个制表符/空格的序列将*被 Doxygen*`\endhtmlonly`替换为单个空格- 调整 css 将无济于事）。

 *`{.f}`或者，您可以使用一些更晦涩的语言，例如`{.vhdl}`Doxygen 知道但在您的文本中没有过多出现关键字的语言。*

# c# - 查找与 groupby

> ID：13739462
> 
> 赞同：43
> 
> 时间：2012-12-06T08:14:02.040
> 
> 标签：c#, .net, linq

我想知道 groupBy 和 ToLookup 扩展方法有什么区别。

让我们有一个这样的对象列表：

```
public class Person
{
    public uint Id { get; set; }
    public string Name { get; set; }
    public DateTime Birthday { get; set; }
}

List<Person> People { get; set; } 
```

现在我可以使用上面的扩展方法：

```
var groupedPeople = People.GroupBy((x) => x.Id);

var lookupPeople = People.ToLookup((x) => x.Id); 
```

这些陈述之间有什么区别？

提前致谢。

马可·B。

* * *

## 回答 #1

> 赞同：83
> 
> 时间：2012-12-06T08:17:15.667

`ToLookup`使用*立即*执行，并返回一个`ILookup`允许您按键查找组的值。

`GroupBy`使用*延迟*执行，并仅按照每个组首次遇到的顺序返回您的组（例如，第一个组将包含源数据的第一个元素），不知道以后能够查找组按键。每次迭代结果时，它都必须再次分组。

基本上，你应该使用哪个取决于你要对结果做什么。如果您只是要对它们进行一次迭代（例如，进行进一步的转换），`GroupBy`通常没问题。如果您想将它们作为多个操作的集合，那么直接的性质`ToLookup`很有用。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-12-06T08:20:25.033

1.  ToLookup 被缓冲。groupBy 迭代组。
2.  groupBy 使用延迟执行，而 ToLookup 使用立即执行。

# c++ - 如何在 Windows 8 上将 C++ 中的 .jpg 转换为 .png？

> ID：13739463
> 
> 赞同：2
> 
> 时间：2012-12-06T08:14:05.947
> 
> 标签：c++, windows-8, png, jpeg

我一直在看`BitmapDecoder`and `BitmapEncoder`，但我不知道如何将数据从 jpg 解码器获取到 png 编码器。我发现的唯一接近的是`BitmapEncoder::CreateForTranscodingAsync()`，但那是两种图像格式相同的情况。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T12:01:59.920

您可以像这样使用给定的图像格式（编解码器）读取像素数据并将它们写入 BitmapEncoder（对不起，这是 C# 而不是 C++，但它应该可以工作）：

```
const string sourceFileName = "42.jpg";
StorageFolder imageFolder = Package.Current.InstalledLocation;
StorageFile imageFile = await imageFolder.GetFileAsync(sourceFileName);

using (IRandomAccessStream imageStream = await imageFile.OpenReadAsync())
{
  // Read the pixel data
  BitmapDecoder bitmapDecoder = await BitmapDecoder.CreateAsync(imageStream);
  BitmapTransform dummyTransform = new BitmapTransform();
  PixelDataProvider pixelDataProvider = await bitmapDecoder.GetPixelDataAsync(
     BitmapPixelFormat.Rgba8, BitmapAlphaMode.Ignore, dummyTransform,
     ExifOrientationMode.RespectExifOrientation,
     ColorManagementMode.ColorManageToSRgb);
  byte[] pixelData = pixelDataProvider.DetachPixelData();

  // Save the pixel data as PNG
  const string resultImageFileName = "42.png";
  StorageFile resultImageFile =
     await ApplicationData.Current.LocalFolder.CreateFileAsync(
     resultImageFileName, CreationCollisionOption.ReplaceExisting);
  using (IRandomAccessStream resultImageStream =
     await resultImageFile.OpenAsync(FileAccessMode.ReadWrite))
  {
     BitmapEncoder bitmapEncoder = await BitmapEncoder.CreateAsync(
        BitmapEncoder.PngEncoderId, resultImageStream);
     bitmapEncoder.SetPixelData(BitmapPixelFormat.Rgba8, BitmapAlphaMode.Ignore,
        bitmapDecoder.OrientedPixelWidth, bitmapDecoder.OrientedPixelHeight, 
        96, 96, pixelData);
     await bitmapEncoder.FlushAsync();
  }
} 
```

唯一的问题是如何确定有关文件格式（在本例中为 PNG）的像素格式、alpha 模式和 DPI 的最佳设置。我从现有的 PNG 文件中确定了像素模式。设置 BitmapAlphaMode.Ignore 是因为 JPEG 不支持透明度。因此，在 PNG 文件中启用 alpha 通道是没有意义的。宽度和高度设置为 BitmapDecoder 的 OrientedPixelWidth 和 OrientedPixelHeight，因为我在阅读时启用了 EXIF 方向。DPI 针对目标系统设置得最好。96 是 Windows 的默认值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T08:20:58.760

使用 ImageMagick 库怎么样？

[http://www.imagemagick.org/script/index.php](http://www.imagemagick.org/script/index.php)

Theres a C++ API ... in [the documentation](http://www.imagemagick.org/Magick++/Image.html)我在2分钟的搜索中找到了这个：

```
#include  
using namespace std; 
using namespace Magick; 
int main(int argc,char **argv) 
{ 
  InitializeMagick(*argv);

  // Read GIF file from disk 
  Image image( "giraffe.gif" );
  // Write to BLOB in JPEG format 
  Blob blob; 
  image.magick( "JPEG" ) // Set JPEG output format 
  image.write( &blob );

  [ Use BLOB data (in JPEG format) here ]

  return 0; 
} 
```

就个人而言，我可以推荐这个库与 ImageMagick 一起工作得相当广泛（尽管使用 C API ......）

编辑：您可以将图像写入内存块并将字节传递给编码器......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T18:16:52.453

利用

```
BitmapDecoder::GetPixelDataAsync(BitmapPixelFormat, BitmapAlphaMode, BitmapTransform, ExifOrientationMode, ColorManagementMode) 
```

然后

```
BitmapEncoder::SetPixelData(BitmapPixelFormat pixelFormat, BitmapAlphaMode alphaMode, unsigned int width, unsigned int height, double dpiX, double dpiY, array<unsigned char>^ pixels) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-06T16:51:04.307

我对Windows-8编程不熟悉，只是看文档，是不是就这么简单？

```
Stream imageStreamSource = new FileStream("myimage.jpg" ...);
JpegBitmapDecoder decoder = new JpegBitmapDecoder(imageStreamSource, BitmapCreateOptions.PreservePixelFormat, BitmapCacheOption.Default);
BitmapSource bitmapSource = decoder.Frames[0];
FileStream stream = new FileStream("myimage.png", FileMode.Create);
PngBitmapEncoder encoder = new PngBitmapEncoder();
encoder.Interlace = PngInterlaceOption.Off;
encoder.Frames.Add(bitmapSource);
encoder.Save(stream); 
```

# c++ - 在 XCode wrtting C++ 中重命名

> ID：13739467
> 
> 赞同：2
> 
> 时间：2012-12-06T08:14:52.650
> 
> 标签：c++, xcode

当我选择文件并找到refactor->rename 时，它​​表明Xcode 只能重构C 或Object-C 代码。这是否意味着我永远无法更改我的文件名？

当然，如果我直接更改磁盘中的文件名，那会报错。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T08:19:25.890

你当然可以用老式的方式改变它。缓慢双击项目树中的文件名让我重命名它。之后，您只需要修复对该文件的所有引用（编译 -> 修复错误），您就完成了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-03-20T22:00:52.830

要在 Xcode 9 中重命名 C++ 文件，您可以

*   慢按两次文件并将其重命名为旧时尚方式（@Karthik）
*   在左侧窗格中选择文件并点击选项卡或输入

重命名 C++ 文件后，您必须自己修复所有引用。

# java - Jersey：重定向后如何找到最终 URL？

> ID：13739469
> 
> 赞同：0
> 
> 时间：2012-12-06T08:15:04.323
> 
> 标签：java, jersey, url-redirection

我正在使用 Jersey 客户端 API 来请求 URL。第一个 URL 将泽西岛重定向到第二个 URL。第二个 URL 将 Jersey 重定向到第三个 URL，依此类推。如何在不禁用重定向处理和自己手动处理重定向的情况下找出 Jersey 的最终 URL？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T08:55:42.233

我提交了针对 Jersey 2.0 的错误报告：http: [//java.net/jira/browse/JERSEY-1611](http://java.net/jira/browse/JERSEY-1611)

# html - 拉伸 input[type="text"] 以填充空间

> ID：13739470
> 
> 赞同：0
> 
> 时间：2012-12-06T08:15:05.730
> 
> 标签：html, css

我有以下设置：

```
<div style="position: fixed; margin: 0px; background-color: black; height: 100px; width: 100%;">
  <input type="text" style="position: absolute; display: block; left: 0px; top: 0px; bottom: 0px; right: 0px; margin: 30px 30px 15px 30px;" />
</div> 
```

目的是拉伸标签以填充包含`<div>`标签的空间（当然，更少的边距）。如果我将`<input>`标签更改为标签，这适用于所有最新的浏览器`<div>`，但如此处所示，这只适用于 WebKit 浏览器（Chrome 和 Safari）。有什么方法可以在 FF 和 IE9+ 中获得想要的效果（只要 IE10 就足够了）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T08:25:42.893

尝试以 % 为单位输入宽度......这对你有用

```
<div style="position: fixed; margin: 0px; background-color: black; height: 100px; width: 100%;">
  <input type="text" style="position: absolute; display: block; left: 0px; top: 0px; bottom: 0px; right: 0px; margin: 30px 5% 15px 5%;width:90%" />
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T09:32:55.903

If you don't need to support IE 7 or less, you can probably use the Box-sizing property: [http://www.w3schools.com/cssref/css3_pr_box-sizing.asp](http://www.w3schools.com/cssref/css3_pr_box-sizing.asp)

# php - 如何从文件夹中下载所有图像

> ID：13739475
> 
> 赞同：2
> 
> 时间：2012-12-06T08:15:26.960
> 
> 标签：php, html, apache

我正在通过 Apache 服务器显示图像。当我单击每个图像时，它应该打开`download.php?fiel=file_name.jpg`并将图像下载到系统。

**这是图像显示的代码**

```
 <?php
 $files = glob("Image/"."*.*");
 for ($i=0; $i<count($files); $i++)
{
$num = $files[$i];
echo $num."<br>";
echo '<img src="'.$num.'" alt="Here should be image" width="256" height="192" >'."<br/>";
}
?> 
```

**我使用以下代码下载图像**（即download.php 文件）。

```
 <?php
 $file = $_GET['file'];
  header("Content-type: image");
 header("Content-disposition: attachment; filename= ".$file."");
 readfile($file);
 ?> 
```

如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T08:22:28.867

你的意思是这样的？：

```
<?php
$files = glob("Image/"."*.*");
$countFiles = count($files); //Don't do calculations in your loop, this is really slow

for ($i=0; $i<$countFiles; $i++)
{
    $num = $files[$i];

    echo '<a href="download.php?file=' . $files[$i] . '"><img src="'.$num.'" alt="Here should be image" width="256" height="192" ></a><br/>';
}
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T08:22:19.247

```
foreach (glob("Image/*.*") as $file) {
  echo "<a href='download.php?file=$file'>$file<br>\n";
  echo "<img src='$file' alt='Here should be image' width='256' height='192'/><br>\n</a>";
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T08:29:13.717

如果您想将所有图像下载到一个文件夹中，我建议您使用 zip 或类似工具将图像存档。您可以在 php 中即时压缩文件。要遍历目录中的所有文件，请查看[RecursiveDirectoryIterator](http://php.net/manual/de/class.recursivedirectoryiterator.php)

```
foreach (new RecursiveIteratorIterator(new RecursiveDirectoryIterator($dir)) as $file) {
    var_dump($file);
} 
```

# xml - 如何使eclipse在保存时将XML放在一行中

> ID：13739478
> 
> 赞同：1
> 
> 时间：2012-12-06T08:15:32.710
> 
> 标签：xml, eclipse, editor, save

我似乎无法做到这一点。编辑 XML 文件时，我必须以元素之间没有换行符和空格的方式保存它们。如果我使用已经具有该格式的 XML 文件，一切都很好。Eclipse 不会改变格式。当我使用编辑器创建一个新文件时，它总是被格式化。

我同意，它更具可读性，但不幸的是，我使用 XML 文件的软件不支持任何其他方式。

我使用了搜索，建议转到 `Preferences > XML > XML Files > Editor`，并设置`line-width`为高值。不幸的是，这还不够（999 似乎是可能的最高值）并且不会停止缩进等。在缩进设置中输入 0 时，没有任何变化。

Android XML 格式化程序似乎也不支持这个（http://tools.android.com/recent/xmlformatter）

我想要的示例：

使用它时，我不在乎它的外观（因为可以使用`Design`Tab）

```
<attribute1>value</attribute1>
<attribute2>value</attribute2> 
```

在查看源代码时，它应该看起来像这样，或者至少最终会像这样保存

```
<attribute1>value</attribute1><attribute2>value</attribute2> 
```

有没有办法做到这一点？

# sql - 根据插入的触发器更新表字段

> ID：13739480
> 
> 赞同：0
> 
> 时间：2012-12-06T08:15:35.247
> 
> 标签：sql, sql-server, triggers, sql-server-2008-r2

在一个项目中，用户将在软件中键入数据并将数据导出到 SQL Server 2008 R2

一旦 SQL Server 识别出有插入数据（新行），它将触发代码根据业务规则更新表。

# ios - 在 ios 中合并音频文件的问题

> ID：13739489
> 
> 赞同：1
> 
> 时间：2012-12-06T08:16:22.657
> 
> 标签：ios, core-audio, avaudioplayer

我正在尝试合并 4 个音频文件并播放它们。以下是代码

```
- (BOOL) combineVoices {

NSMutableArray * arr=[[NSMutableArray alloc] init];

[arr addObject:@"player_4_full"];
[arr addObject:@"event_1_1_1"];
[arr addObject:@"team_2_1"];
[arr addObject:@"event_1_1_2"];

NSError *error = nil;
BOOL ok = NO;

CMTime nextClipStartTime = kCMTimeZero;
//Create AVMutableComposition Object.This object will hold our multiple AVMutableCompositionTrack.
AVMutableComposition *composition = [[AVMutableComposition alloc] init];

AVMutableCompositionTrack *compositionAudioTrack = [composition addMutableTrackWithMediaType:AVMediaTypeAudio preferredTrackID:kCMPersistentTrackID_Invalid];

for(NSString * str in arr)
{
    NSString *path = [[NSBundle mainBundle] pathForResource:str ofType:@"mp3"];
    NSURL *url = [[NSURL alloc] initFileURLWithPath:path];

    AVAsset *avAsset = [[AVURLAsset alloc] initWithURL:url options:nil];

    NSArray *tracks = [avAsset tracksWithMediaType:AVMediaTypeAudio];
    if ([tracks count] == 0)
        return NO;

    NSLog(@"%@",avAsset);
    CMTimeRange timeRangeInAsset = CMTimeRangeMake(kCMTimeZero, [avAsset duration]);
    AVAssetTrack *clipAudioTrack = [[avAsset tracksWithMediaType:AVMediaTypeAudio] objectAtIndex:0];
    ok = [compositionAudioTrack insertTimeRange:timeRangeInAsset  ofTrack:clipAudioTrack atTime:nextClipStartTime error:&error];
    if (!ok) {
        NSLog(@"Current Video Track Error: %@",error);
    }
    nextClipStartTime = CMTimeAdd(nextClipStartTime, timeRangeInAsset.duration);
}

NSLog(@"%@",composition);
self.item = [[AVPlayerItem alloc] initWithAsset:composition];
self.p =[AVPlayer playerWithPlayerItem:item];
[self.p play];
return YES;
} 
```

问题是合并后我可以在模拟器中播放声音。但是当我在设备上播放时，我只能在耳机中听到声音，而不是在扬声器上

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T08:25:56.720

您的设备可能已软静音。如果您的设备是 iPhone，请尝试切换侧面开关。

iPad 有一个有趣的静音怪癖，这可能会导致某些应用程序无法通过 iPad 扬声器发出声音，即使音量调高并且您可以用耳机听到声音。为了解决这个问题，您需要按照以下说明进行操作

*   双击主页按钮
*   从左向右滑动
*   点击最左侧的扬声器图标 (*)
*   它应该在播放按钮下方显示“静音关闭”
*   再次聆听应用声音

![在此处输入图像描述](../Images/1415f1560daf4740e0c22dd81e8efa7c.png)

(*) 如果您没有看到扬声器图标，则此功能已分配给侧面开关。在这种情况下，只需切换侧面开关即可取消 iPad 扬声器的静音。可以在“设置”下找到将侧面开关功能设置为“锁定旋转”或“静音”的选项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-30T10:57:18.547

播放前设置 AVAudioSession

```
AVAudioSession *audioSession = [AVAudioSession sharedInstance];
[audioSession setCategory:AVAudioSessionCategorySoloAmbient withOptions:AVAudioSessionCategoryOptionDefaultToSpeaker error:nil]; 
```

# javascript - 使用 Javascript 从新页面聚焦现有 HTML 页面

> ID：13739504
> 
> 赞同：0
> 
> 时间：2012-12-06T08:17:33.293
> 
> 标签：javascript, jquery, html

我有一个简单的网站，其中包含指向顶部栏中不同页面的链接。

像这样的东西

```
==============================================
 Index link  |  Page 1  |  Page 2  |  Page 3
============================================== 
```

“站点”是船上科学数据系统的用户界面，用户通常会根据他们希望执行的任务在不同的链接之间导航。这个想法是将打开页面的数量限制为顶部栏中的链接，换句话说，在一个浏览器会话中打开的“第 1 页”或“第 2 页”不超过一个，而只是导航到现有页面. 这些页面包含动态 JQueryUI 信息，如果打开新页面，这些信息将会丢失。

如果它们不可见，我需要能够将焦点放在现有页面或打开它们。

如果调用页面打开了需要焦点的页面，则以下代码运行良好：

```
function launchApplication(l_url, l_windowName)
{
  if ( typeof launchApplication.winRefs == 'undefined' )
  {
     launchApplication.winRefs = {};
  }
  if ( typeof launchApplication.winRefs[l_windowName] == 'undefined' || launchApplication.winRefs[l_windowName].closed )
  {
    launchApplication.winRefs[l_windowName] = window.open(l_url, l_windowName);
  } else {
    launchApplication.winRefs[l_windowName].focus()
  }
} 
```

我的问题是引用不是由调用页面生成的页面。

我做了很多研究，似乎出于安全考虑，调用页面未生成的打开的浏览器窗口是不可访问的。

有什么办法可以实现这个功能吗？我知道所有页面和浏览器的 URL 和窗口名称仅限于 Chrome 和 Firefox。

非常感谢任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T08:23:01.833

警告：试图在浏览器上操作窗口真的很难，而且很难让（并保持）跨浏览器工作，因为过去已经用它做过所有邪恶的事情。我建议将所有内容放在一个窗口中，并通过[jQuery UI 选项卡](http://jqueryui.com/tabs/)或类似方法在该窗口中执行选项卡。这使您可以完全、明确地控制何时显示的内容。

但回答实际问题：

如果您知道窗口名称，那么即使页面没有打开它们，您也可以访问这些窗口（前提是没有跨域问题）。

```
var wnd = window.open("", "windowname"); 
```

...将为您提供具有该名称的*现有*窗口的引用（如果有），而无需打开新窗口。如果没有具有该名称的窗口，它将打开一个具有该名称的新空白窗口。

所以我可能会使用它，然后查看`wnd.document`内容是否存在。如果不是，大概是你刚刚打开了窗口，所以设置`wnd.location`为正确的 URL，如下所示：

```
// Try to get existing window
var wnd = window.open("", "thewindowname");

// Does it have our content?
if (!wnd.document.getElementById("someElementId")) {
    // No, set the location
    wnd.location = "/some/url";
}

// Bring it to the foreground
wnd.focus(); 
```

[实例](http://jsbin.com/ovacap/1)| [来源](http://jsbin.com/ovacap/1/edit)- 请注意示例中运行的计数器，因此您知道您是否刚刚激活了同一个窗口而没有替换其内容（当它已经打开时）。

如果在打开时给出了窗口名称，则上述内容适用于打开的窗口`window.open`（即使是通过另一个页面），并且通过带有`target="thewindowname"`.

这适用于 Chrome 23、IE8 和 IE7（也可能是 IE6）；它不适用于 Firefox 17、Opera 11 或 IE9（因此可能不适用于 IE10）。因此，我之前的警告。:-)

# ios - 最小化 iOS-Phonegap/Cordova App

> ID：13739506
> 
> 赞同：1
> 
> 时间：2012-12-06T08:17:44.483
> 
> 标签：ios, cordova

在 Phonegap Javascript 应用程序中，我关闭了此应用程序的 Android 版本`navigator.app.exitApp();`

众所周知，iOS 中不允许关闭应用程序。但是 iPad 用户可以将应用程序最小化到后台，例如通过滑动。

两个问题：

1.  我有可能以编程方式最小化应用程序吗？

2.  用户最小化应用程序时是否有事件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T08:24:24.010

这涉及您的第 2 点：当应用程序被最小化时，即放到后台，“暂停”事件被触发并且可以被处理。请参阅文档中的详细信息：http: [//docs.phonegap.com/en/2.2.0/cordova_events_events.md.html#pause](http://docs.phonegap.com/en/2.2.0/cordova_events_events.md.html#pause)

[更新]：这涉及 Nr.1：您可以编写一个 phonegap 插件，让您调用另一个意图，即主屏幕，它会自动将您的应用程序置于后台，而无需终止它。另请参阅[使用 Phonegap 暂停 Android 应用程序](https://stackoverflow.com/questions/11434845/pause-an-android-app-with-phonegap)

# ruby-on-rails-3 - 根据当前对象 ID 生成搜索结果

> ID：13739511
> 
> 赞同：1
> 
> 时间：2012-12-06T08:17:59.823
> 
> 标签：ruby-on-rails-3, activerecord, comparator

我过去曾问过类似的问题，但我认为我的问题措辞可能不正确。

我想知道是否可以在rails中通过对象的显示操作获取当前属性，然后针对该属性执行搜索功能。例如

```
 def show
 @recipe = Recipe.find(params[:id])
 end 
```

在配方模型中有一个属性

```
:dish_name 
```

这取决于我正在查看的食谱，所以假设我想列出与显示页面上显示的当前菜名相似的食谱，我该怎么做？只是在正确的方向上寻找一些指示。我看过 solr，但决定坚持使用 ransack 来实现我的搜索功能，尽管我看不到在 ransack 中实现这一目标的方法。以前有没有人为这样的东西写过方法？

BBC 的食物做了类似的事情，如果不一样的话

```
http://www.bbc.co.uk/food/recipes/easy_chocolate_cake_31070 
```

如果您查看右侧，您将看到一个名为“相关食谱”的部分

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T09:01:52.420

我不认为你真的需要为此洗劫，你可以使用[`ActiveRecord`'s query methods](http://guides.rubyonrails.org/active_record_querying.html#conditions)。我建议创建一个获取相关食谱的实例方法，如下所示`related_recipes`：`Recipe`

```
class Recipe < ActiveRecord::Base

  ...

  def related_recipes

    # take the recipe's dish name and split it at spaces,
    # then wrap each item in the resulting array with '%'
    # to create SQL query terms.
    # e.g. "italian pasta" becomes ["%italian%", "%pasta%"]
    terms = dish_name.split(' ').map { |t| "%#{t}%" }

    # create a scope with all recipes except this one
    others = self.class.where('id != ?', id)

    # return all recipes other than this one that contain any of the terms
    # e.g. for the dish "italian pasta", this will become:
    # others.where('dish_name LIKE ? OR dish_name LIKE ?', '%italian%', '%pasta%')
    return others.where(terms.map { 'dish_name LIKE ?' }.join(' OR '), *(terms))
  end 
```

然后在您的`show`操作中，您可以像这样获取相关食谱：

```
def show
  @recipe = Recipe.find(params[:id])
  @related_recipes = @recipe.related_recipes
end 
```

您可以通过迭代来显示结果`@related_recipes`。我已经对上述内容进行了大量评论，但如果有任何不妥之处，请在评论中告诉我。

# unicode - Amazon S3 Unicode 文件名，哪种 Unicode 标准格式？

> ID：13739513
> 
> 赞同：3
> 
> 时间：2012-12-06T08:18:14.130
> 
> 标签：unicode, utf-8, amazon-s3

我最近发现，默认情况下，Amazon S3 将通过在 UTF-8 中以**分解**的Unicode 标准格式进行百分比编码的 URL 提供名称中包含 Unicode 的文件。

然而，我不确定它是 NFD 还是 NFKD，我怀疑我可能会不小心选错一个并侥幸逃脱一段时间，直到某个奇怪的字符出现在某个地方时出现问题。在亚马逊上的任何地方都找不到此文档。

过去有没有人弄清楚这一点？

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T09:58:09.970

# javascript - 在 Javascript 中，Sproutcore 查询到数据库的返回类型是什么？

> ID：13739515
> 
> 赞同：0
> 
> 时间：2012-12-06T08:18:35.230
> 
> 标签：javascript, sql, database, sproutcore

```
 queryNote = SC.Query.local('Tree.Note',
            "categoryId = {categoryId}", {
            categoryId: this.get('guid'),
            orderBy: "name ASC"
        });
   var arrayCategory = Tree.store.find(queryTree); 
```

arrayCategory 的类型是什么？我认为这将是一个对象数组。但似乎没有 Javascript 数组函数可以处理它。

注意：我最初错误地询问了 queryNote 的类型。我实际上想知道 arrayCategory 是什么，因为我想将一个查询的结果附加到另一个查询。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T08:24:43.217

我用谷歌搜索 SC.Query.local 并找到了这个：

[http://docs.sproutcore.com/symbols/SC.Query.html](http://docs.sproutcore.com/symbols/SC.Query.html)

大约在页面的一半处它说：

```
local
Returns a LOCAL query with the passed options. 
```

然后在下面：

```
Returns:
SC.Query 
```

所以我要在这里冒险并建议它返回一个`SC.Query`

编辑：对 OP 进行编辑后，我采取了谷歌搜索“sproutcore Tree.store.find”的步骤，我得到了这个“http://docs.sproutcore.com/symbols/SC.Store.html#method=find”

其中说：

```
Returns:
SC.Record record instance or null 
```

文档应包含您正在寻找的答案

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T08:01:15.290

arrayCategory 应该是 SC.RecordArray：[http ://docs.sproutcore.com/symbols/SC.RecordArray.html](http://docs.sproutcore.com/symbols/SC.RecordArray.html)

# javascript - Smartclient 支持 utf-8 字符

> ID：13739523
> 
> 赞同：0
> 
> 时间：2012-12-06T08:19:37.060
> 
> 标签：javascript, smartgwt, smartclient

我有以下 Smartclient JS 代码，它不能在 UI 中正确呈现 UTF-8 字符

```
function getGridLoadedWithDatasource(DS, DSfields) {

var statGrid = isc.ListGrid.create({
    ID: "statusGrid",
    autoFetchData: true,
    fields: DSfields,
    dataSource: DS,
    canEdit: false,
    autoDraw: true,

    showRecordComponents: true,    
    showRecordComponentsByCell: true, 

    createRecordComponent : function (record, colNum) {  
                                var fieldName = this.getFieldName(colNum);
                                if (fieldName == "btnClaim" && record["PTicketname"]=='Reklamacija') {  
                                    var button = isc.IButton.create({
                                        height: 18,
                                        width: 65,
                                        //icon: "flags/16/" + record["countryCode"] + ".png",
                                        title: "Žalba",
                                        click : function () {
                                            //alert("Hello man!");
                                            isc.say("Need to draw a form here");
                                            //getInvoiceDetailWindow(record["rednibr"],tech, ba_id);

                                        }
                                    });
                                    return button;  
                                } 
                            }
});
return statGrid;

} 
```

我用于标题的词在 UI 上被破坏了。如何以及在哪里为 smartclient 小部件启用/配置 UTF-8？

最好的祝福！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T09:01:03.500

如果您在 Javascript 代码中使用特殊字符作为文字，则必须确保 Javascript 源代码与您的主页具有相同的字符编码。例如，在 Notepad++ 中，您应该使用菜单“Encoding / UTF-8 without BOM”或类似菜单将其设置为 UTF-8。

# ruby-on-rails - Paperclip-Rails 的图像上传错误

> ID：13739526
> 
> 赞同：0
> 
> 时间：2012-12-06T08:20:17.043
> 
> 标签：ruby-on-rails, image, file-upload, paperclip

我无法上传图像，因为我在第 3 行的用户控制器的**上传方法中遇到错误，即****@user.update_attributes(params[:user])**。

**我的上传方法代码**-

```
 def upload  
     @user = User.find_by_id(current_user.id)
   if @user.update_attributes(params[:user])  
    flash[:notice] = "Successfully uploaded Image."  
    if params[:user][:avatar].blank?  

      redirect_to @user  
    else  

      render :action => 'crop'  
    end  
  else  
    render :action => 'new'  
  end  
end 
```

**我的表格**——

```
 <%= form_for(:user, :url => {:action => 'upload'}, 
  :html => {:multipart => true}) do |f| %>

   <div class="inputs">

   <p>
     <%= f.label :avatar %>
     <%= f.file_field :avatar %>
   </p>
 </div>
   <div class="actions">
    <%= f.submit "Upload" %>
   </div>
 <% end %> 
```

**我的用户模型 -**

```
 class User < ActiveRecord::Base
      devise :database_authenticatable, :registerable,:recoverable, 
      :rememberable,  :trackable, :validatable

      attr_accessible :email, :password, :password_confirmation, :remember_me, :avatar

      has_attached_file :avatar, 
      :styles  => { :small => "100x100#", :large  => "500x500>" }  

    end 
```

**我在命令提示符下的输出 -**

```
 identify: unable to open image `file':  @ error/blob.c/OpenBlob/2498.
    identify: no decode delegate for this image format `file' @ error/constitute.c     /ReadImage/532.

 Started POST "/users/upload" for 127.0.0.1 at 2012-12-06 13:28:17 +0530
 Processing by UsersController#upload as HTML
 Parameters: {"utf8"=>"✓",  "authenticity_token"=>"mUPao835NCC8qXO553RJH50NWLhzQk03Z2G3Y0LwMYE=", 
"user"=>{"avatar"=>#<ActionDispatch::Http::UploadedFile:0xa20a418 @original_filename="freedomking.jpg",  @content_type="image/jpeg", @headers="Content-
 Disposition: form-data; name=\"user[avatar]\";  filename=\"freedomking.jpg            
 \"\r\nContent-Type: image/jpeg\r\n", @tempfile=#<File:/tmp/RackMultipart20121206-3368-127uzt5>>}, "commit"=>"Upload"}
User Load (0.3ms)  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
CACHE (0.0ms)  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
(1.1ms)  begin transaction
[paperclip] An error was received while processing:     
#<Paperclip::NotIdentifiedByImageMagickError: /tmp/stream20121206-7054-b
teogf.jpg is not recognized by the 'identify' command.>
[paperclip] An error was received while processing:    
#<Paperclip::NotIdentifiedByImageMagickError: /tmp/stream20121206-7054-b
teogf.jpg is not recognized by the 'identify' command.>
  (0.1ms)  rollback transaction 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T08:26:11.203

您要上传什么格式？不是 Paperclip 的问题，而是 ImageMagick 的问题。

Paperclip 通过使用命令 identity 使用 ImageMagick 来处理图像。为了能够使用 .jpg、.png、.gif 等，您必须安装支持这些格式和其他格式的 ImageMagick。

您现在遇到的问题是，您似乎安装了 ImageMagick，但不支持某些图像格式。

* * *

好的，第二次尝试：添加宝石可卡因，轨道通常在高时效果更好：P

```
gem "cocaine" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T11:00:10.810

最后我找到了我的问题的解决方案。

脚步：

1 ）更改`gem "paperclip"`为`gem "paperclip", "~> 3.3.1"`gemfile **。**这将为您的捆绑包安装最新的回形针 gem。上一个没有。

2）用户模型的变化`has_attached_file`-

```
has_attached_file :avatar,
:path => ":rails_root/public/system/:attachment /:id/:style /:filename",
:url =>  "/system/:attachment/:id/:style/:filename", 
:styles  => { :small => "100x100#", :large => "500x500>" } 
```

这可能会帮助遇到此类问题的人。

干杯!

# asp.net-mvc - 如何在asp.net web api中将xml序列化为所需的格式

> ID：13739528
> 
> 赞同：3
> 
> 时间：2012-12-06T08:20:36.950
> 
> 标签：asp.net-mvc, xml-serialization, asp.net-web-api

我正在研究 asp.net mvc 4 web api。我有一堂课，

```
public class Quiz
{
public int QuizId{get; set;}
public string title{get; set;}
...
...
} 
```

现在我正在尝试检索测验列表，所以我写道，

```
public List<Quiz> GetQuizs()
{
return repository.ListQuizs();
} 
```

我需要 xml 响应，所以我在 webapi.config 文件中进行了配置，例如，

```
config.Formatters.XmlFormatter.UseXmlSerializer = true; 
```

我得到了这样的回应，

```
<ArrayOfQuiz xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
<Quiz>
<QuizId>4</QuizId>
<title>Master Minds</title>
</Quiz>
<Quiz>
<QuizId>5</QuizId>
<title>Master Minds</title>
</Quiz>
</ArrayOfQuiz> 
```

但我想要这样的回应

```
<Quizs>
<Quiz>
<QuizId>4</QuizId>
<title>Master Minds</title>
</Quiz>
<Quiz>
<QuizId>5</QuizId>
<title>Master Minds</title>
</Quiz>
</Quiz> 
```

我试过了，

```
public class quizs:List<Quiz>{}
public class Quiz
{
//properties here
} 
```

但我无法将测验列表加载到测验类中。请指导我。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-06T09:12:15.640

您是否有任何理由使用 XmlSerializer 而不是 DataContract 序列化器？

如果没有，您可以像这样实现您想要的：

1.  删除 config.Formatters.XmlFormatter.UseXmlSerializer = true; 从你的配置
2.  添加对 System.Runtime.Serialisation 的引用
3.  声明你的类和控制器

**代码**

```
[DataContract(Namespace = "")]
public class Quiz
{
    [DataMember]
    public int QuizId { get; set; }
    [DataMember(Name = "title")]
    public string Title { get; set; }
}

[CollectionDataContract(Name = "Quizs", Namespace = "")]
public class QuizCollection : List<Quiz>
{
}

public class QuizsController : ApiController
{
    public QuizCollection Get()
    {
        return new QuizCollection
                       {
                           new Quiz {QuizId = 4, Title = "Master Minds"},
                           new Quiz {QuizId = 5, Title = "Another Title"}
                       };
    }
} 
```

**最后**使用 html 标头“accept : application/xml”调用您的服务

你的结果应该是这样的：

```
<Quizs xmlns:i="http://www.w3.org/2001/XMLSchema-instance">
    <Quiz>
        <QuizId>4</QuizId>
        <title>Master Minds</title>
        </Quiz>
    <Quiz>
        <QuizId>5</QuizId>
        <title>Another Title</title>
    </Quiz>
</Quizs> 
```

关于您的命名空间 NB。如何在属性中将它们设置为 namespace = "" 以删除它们。您将努力删除`xmlns:i="http://www.w3.org/2001/XMLSchema-instance"`它需要存在以允许 XML 处理空值。

有关集合的数据合同序列化程序支持的更多信息，请参见[此处](http://msdn.microsoft.com/en-us/library/aa347850.aspx)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-18T07:15:57.257

您可以删除命名空间。只需创建一个 CustomXmlFormatter 即可从根元素中删除命名空间。

```
public class IgnoreNamespacesXmlMediaTypeFormatter : XmlMediaTypeFormatter
{
public override Task WriteToStreamAsync(Type type, object value, Stream writeStream, HttpContent content, TransportContext transportContext)
{
    try
    {
        var task = Task.Factory.StartNew(() =>
        {
            var xns = new XmlSerializerNamespaces();
            var serializer = new XmlSerializer(type);
            xns.Add(string.Empty, string.Empty);
            serializer.Serialize(writeStream, value, xns);
        });

        return task;
    }
    catch (Exception)
    {
        return base.WriteToStreamAsync(type, value, writeStream, content, transportContext);
    }
}
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-06T13:46:12.187

创建一个名为 QuizList 的类并实现 IXmlSerializable，您可以准确定义您希望 XML 的外观。

恕我直言，公开依赖于 .Net 类型序列化程序的内部实现的线路格式是一个非常糟糕的主意。序列化程序的整个想法是，当您想要反序列化对象时，您需要具有相同的序列化程序库和相同的类型来重构对象。如果您的客户不在 .net 平台上会怎样？

# javascript - 谷歌图表表忽略宽度直到分页

> ID：13739530
> 
> 赞同：2
> 
> 时间：2012-12-06T08:20:39.943
> 
> 标签：javascript, google-visualization

我正在使用 Google Charts 来显示分页表。

当我加载页面时，表格的宽度非常小，并且仅在第一次分页后才调整为适当的宽度。

我尝试设置显式宽度并检查表格元素，宽度属性设置为适当的大小，但表格在加载时仍然很小。

代码并没有什么特别之处，和操场上的例子一样：

[https://code.google.com/apis/ajax/playground/?type=visualization#table_paging](https://code.google.com/apis/ajax/playground/?type=visualization#table_paging)

有没有办法强制表格调整到设定的尺寸？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-10T14:09:05.517

这对我来说很好：

```
$(window).on("resize", function () {
    draw();
}).resize(); 
```

你必须设置表格的宽度......

```
table.draw(data, {
 width:'100%',
 ...
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T09:18:51.190

**脚本：**

```
<script type="text/javascript">
var visualization;
var data;

var options = {'showRowNumber': true};
function drawVisualization() {
  // Create and populate the data table.
  var dataAsJson =
  {cols:[
    {id:'A',label:'Name',type:'string'},
    {id:'B',label:'Height',type:'number'},
    {id:'C',label:'Coming',type:'boolean'},
    {id:'D',label:'Time',type:'timeofday'}],
  rows:[
    {c:[{v:'Dave'},{v:159.0,f:'159'},{v:true,f:'TRUE'},{v:[12,25,0,0],f:'12:25:00'}]},
  {c:[{v:'Peter'},{v:185.0,f:'185'},{v:false,f:'FALSE'},{v:[13,15,0,0],f:'13:15:00'}]},
  {c:[{v:'John'},{v:145.0,f:'145'},{v:true,f:'TRUE'},{v:[15,45,0,0],f:'15:45:00'}]},
  {c:[{v:'Moshes'},{v:198.0,f:'198'},{v:true,f:'TRUE'},{v:[16,32,0,0],f:'16:32:00'}]},
  {c:[{v:'Karen'},{v:169.0,f:'169'},{v:true,f:'TRUE'},{v:[19,50,0,0],f:'19:50:00'}]},
  {c:[{v:'Phil'},{v:169.0,f:'169'},{v:false,f:'FALSE'},{v:[18,10,0,0],f:'18:10:00'}]},
  {c:[{v:'Gori'},{v:159.0,f:'159'},{v:true,f:'TRUE'},{v:[13,15,0,0],f:'13:15:00'}]},
  {c:[{v:'Bill'},{v:155.0,f:'155'},{v:false,f:'FALSE'},{v:[7,40,48,0],f:'7:40:48'}]},
  {c:[{v:'Valery'},{v:199.0,f:'199'},{v:true,f:'TRUE'},{v:[6,0,0,0],f:'6:00:00'}]},
  {c:[{v:'Joey'},{v:187.0,f:'187'},{v:true,f:'TRUE'},{v:[5,2,24,0],f:'5:02:24'}]},
  {c:[{v:'Karen'},{v:190.0,f:'190'},{v:true,f:'TRUE'},{v:[6,14,24,0],f:'6:14:24'}]},
  {c:[{v:'Jin'},{v:169.0,f:'169'},{v:false,f:'FALSE'},{v:[5,45,36,0],f:'5:45:36'}]},
  {c:[{v:'Gili'},{v:178.0,f:'178'},{v:true,f:'TRUE'},{v:[6,43,12,0],f:'6:43:12'}]},
  {c:[{v:'Harry'},{v:172.0,f:'172'},{v:false,f:'FALSE'},{v:[6,14,24,0],f:'6:14:24'}]},
  {c:[{v:'Handerson'},{v:175.0,f:'175'},{v:true,f:'TRUE'},{v:[6,57,36,0],f:'6:57:36'}]},
  {c:[{v:'Vornoy'},{v:170.0,f:'170'},{v:true,f:'TRUE'},{v:[13,12,0,0],f:'13:12:00'}]}]};
  data = new google.visualization.DataTable(dataAsJson);

  // Set paging configuration options
  // Note: these options are changed by the UI controls in the example.
  options['page'] = 'enable';
  options['pageSize'] = 10;
  options['pagingSymbols'] = {prev: 'prev', next: 'next'};
  options['pagingButtonsConfiguration'] = 'auto';

  // Create and draw the visualization.
  visualization = new google.visualization.Table(document.getElementById('table'));
  draw();
}

function draw() {
  visualization.draw(data, options);
}

google.setOnLoadCallback(drawVisualization);

// sets the number of pages according to the user selection.
function setNumberOfPages(value) {
  if (value) {
    options['pageSize'] = parseInt(value, 10);
    options['page'] = 'enable';
  } else {
    options['pageSize'] = null;
    options['page'] = null;  
  }
  draw();
}

// Sets custom paging symbols "Prev"/"Next"
function setCustomPagingButtons(toSet) {
  options['pagingSymbols'] = toSet ? {next: 'next', prev: 'prev'} : null;
  draw();  
}

function setPagingButtonsConfiguration(value) {
  options['pagingButtonsConfiguration'] = value;
  draw();
}

</script> 
```

**html:**

```
<div id="table" style="width:100%;"></div> 
```

我说的是上面的 div 容器。如果在您的 css 文件中，有表格元素的 css 代码，它会覆盖 google 生成的表格 css。

您的自定义表格 css 代码也会影响 google 表格。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T08:44:04.187

现在我只是用 $.width() 再次设置宽度，

但这似乎不是最佳解决方案

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-12-04T07:56:05.167

The only solution that worked was giving the 100% width to the table via css:

```
.google-visualization-table-table{width: 100%} 
```

Givin the width to the table in the option parameter at initalisation did only work with pixel values. And the other proposed solutions seemed not very elegant.

# plone - 在不同于运行构建的端口上运行

> ID：13739531
> 
> 赞同：3
> 
> 时间：2012-12-06T08:20:44.470
> 
> 标签：plone, port, buildout

在我读过的所有地方，他们都说同样的话：在某种配置文件中更改端口并运行 buildout。

也就是说，需要构建才能在不同的端口中运行 plone。

为什么不能这样：

1.  `bin/plonectl start` 使用配置文件中提到的端口号启动 plone

2.  `bin/plonectl start 8081` 此端口将覆盖配置文件中提到的端口

问题：我可以直接编辑“某个文件”中 `bin/plonectl start`读取的端口号，那是哪个文件？

你可能会说，为什么不运行该死的构建呢？

我的构建至少需要 15 分钟......我*确实*打算在该配置文件中提到的端口上运行 plone，事实上我有一个生产服务器正在这样做。

我正在寻找的是：

我想使用写入配置文件（例如 81）的端口号运行构建，但暂时在不同的端口（例如 8081）上运行，以便我可以在那里进行所有编辑（url：8081），而“标准” plone 很高兴像往常一样在 81 端口上提供服务。

有人，请给我一些方向。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-06T08:53:52.480

What you want is to edit your buildout to create a *second* instance to run. You'll need to add a ZEO server too, plus the necessary changes to your setup to have the instances connect to that port.

You cannot just change the configuration file to start a second instance on a different port otherwise; to run multiple instances you need, at the very least, a ZEO server or a RelStorage ZODB setup to be able to share access to the object database.

See [the Plone developer manual](http://plone.org/documentation/manual/developer-manual/managing-projects-with-buildout/a-deployment-configuration) on how to set up multiple instances and a ZEO server for your setup.

And if your buildout takes 15 minutes to run, then it sounds like your buildout is perhaps doing too much network connection checking. Try running it with the `-N` switch to switch off the default 'newer package' checks.

As for the configuration file used by `bin/plonectl`, that would be `parts/plonectl/etc/zope.conf`. Generally speaking, a `bin/partname` instance script is paired with a `parts/partname` directory, and Zope instances look for a `etc/zope.conf` file there for configuration. Altering files by hand in `parts/partname` directories will be lost when re-running buildout, as it'll generate new copies.

# hibernate - 如何在 Ant build 中使用 cpp-tasks

> ID：13739538
> 
> 赞同：4
> 
> 时间：2012-12-06T08:21:32.220
> 
> 标签：hibernate, ant, open-source, ant-contrib

我正在使用 Ant 1.8.2，我得到这个错误：

```
Cause: The name is undefined.
Action: Check the spelling.
Action: Check that any custom tasks/types have been declared.
Action: Check that any <presetdef>/<macrodef> declarations have taken place. 
```

我用谷歌搜索了它。并意识到 ant-contrib 缺失。之后，我添加了 ant-contrib-1.0b3.jar。但是这个 jar 不支持 Ant 1.8.2 而且我不知道使用 cpp-tasks。我读了[http://ant-contrib.sourceforge.net/cpptasks/index.html](http://ant-contrib.sourceforge.net/cpptasks/index.html)这个但我没有克服。

问候。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-10T12:16:49.943

我觉得你的类路径中没有 ant-contrib jar。下载这个罐子。并转到 Eclipse 中的窗口首选项。选择 ant-runtime-(Ant Home Entries(Default)) 选择添加外部 jars。在你的类路径中包含 jar ant-contrib 按确定。

你的 build.xml 应该是这样的

```
<?xml version="1.0" encoding="UTF-8"?>
        <project name="JarCreation" default="Jar" basedir="." xmlns:ac="antlib:net.sf.antcontrib">
        <property name="array" value="a,b,c,d"/>
        <target name="Jar">
        <ac:for list="${array}" param="letter">
        <sequential>
        <echo>Your Code Here</echo>
        <ac:var name="test" value="somethin"/>
        </sequential> 
        </ac:for>  
        </target>
        </project> 
```

**

它会运行！

# php - 从php中的逗号分隔字符串中删除特定关键字

> ID：13739539
> 
> 赞同：0
> 
> 时间：2012-12-06T08:21:39.600
> 
> 标签：php, mysql

我需要从数据库中删除以逗号分隔的图像名称

我使用了以下方法..

名称在数据库中：31.jpg,31 copy.jpg,110 copy.jpg,110.jpg,110 copy-1.jpg,

爆炸后：

```
Array
(
    [0] => 31.jpg
    [1] => 31 copy.jpg
    [2] => 110 copy.jpg
    [3] => 110.jpg
    [4] => 110 copy-1.jpg
    [5] => 
) 
```

用逗号删除img名称：110.jpg，

现在结果：31 copy.jpg,110 copy.jpg,110.jpg,110 copy-1.jpg,

但为什么是`110.jpg`结果？

上述方法的代码。

```
<?php

    require("include/config.inc.php");

    $parent_img_id = 184;
    $child_imgs_id = 1221;
    $delimg = '110.jpg';

    $getInfoChild_imgs = mysql_query("select * from parent where parent_img_id = '$parent_img_id' and child_imgs_id = '$child_imgs_id' and child_imgs like '%$delimg%'") or die(mysql_error());

        if(mysql_num_rows($getInfoChild_imgs)>0){
            $result = mysql_fetch_array($getInfoChild_imgs);

            $child_imgs_name =$result['child_imgs'];
            $child_imgs_name = explode(',', $child_imgs_name); // Explode into array

            $deleteImgName = $delimg.',';

            unset($child_imgs_name[ array_search($deleteImgName, $child_imgs_name) ]);

            $child_imgs_name = implode(',',$child_imgs_name); 

     }
?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T08:24:59.197

`$deleteImgName`是`110.jpg,`

该数组没有`110.jpg,`. 它有`110.jpg`

使用`,`展开时，元素不包含任何逗号。

更改`$deleteImgName = $delimg.','`为`$deleteImgName = $delimg;`,

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T08:30:15.497

从删除图像变量中删除逗号。我还没有检查，但自从你爆炸了逗号，它们将从数组中消失

```
$deleteImgName = $delimg; #.','; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T08:28:54.370

您正在搜索`$deleteImgName`在爆炸字符串后添加了“，”的位置，该“,”不是数组条目的一部分。

# clickonce - 在单击一次部署中为同一应用程序创建多个实例

> ID：13739542
> 
> 赞同：1
> 
> 时间：2012-12-06T08:21:50.697
> 
> 标签：clickonce

我们创建了一个 Windows 窗体应用程序并使用单击一次进行部署。我想创建 2 个实例，它们都应该能够以不同的名称安装在同一台机器上，例如“app1_local”和“app1_beta”，而不会相互干扰。这该怎么做？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T16:45:35.047

[这篇](http://robindotnet.wordpress.com/2009/04/22/clickonce-installing-multiple-versions-concurrently/)关于运行同一部署的多个版本的文章解释了如何做到这一点。

# jquery - 链接不起作用。Jquery 'toggle()' 方法是否可能导致这种情况？

> ID：13739544
> 
> 赞同：1
> 
> 时间：2012-12-06T08:21:54.753
> 
> 标签：jquery, html

```
<div>                                           
  <h3 class="ft-default bold inline-block">Callback</h3>                                            
     <ul class="Browsingtree02">
     <li><a href="/description.html">LoadCallBack</a></li>
     <li><a>ChangeCallBack</a></li>
     <li><a>beforeJobCallBack</a></li>
     <li><a>afterJobCallBack</a></li>
     <li><a>afterListCallBack</a></li>
     <li><a>afterReadCallBack</a></li>
     <li><a>tdClickCallBack</a></li>
     <li><a>trClickCallBack</a></li>
     <li><a>BlurCallBack</a></li>
     <li><a>parentSetDefault</a></li>
     <li><a>setValueCallBack</a></li>
     <li><a>keyDownCallBack</a></li>
     <li><a>afterNewCallBack</a></li>
     <li><a>afterDeleteCallBack</a></li>
  </ul>
</div> 
```

==================================================== ==============================

如上所述，您可以看到第一个元素 'a' 具有 'href' 属性。通常，它工作正常，没有理由不工作，因为它是一个带有 href 属性的简单 'a' 标签。

但是当我在元素上放置切换功能时会出现问题。

==================================================== ==============================

```
$('#Left .Browsingtree02 li a').toggle(function() {
    $(this).addClass('Selected');   
    $(this).parent().parent().find('.Browsingtree03').show(200);
}, function() {
    $(this).parent().parent().find('.Browsingtree03').hide(200);
    $(this).removeClass('Selected');
}); 
```

==================================================== ==============================

如果此代码不存在，则具有该属性的第一个“a”可以正常工作！

但是浏览器无法获取链接，根本不会移动到链接页面......

请帮帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T08:53:39.647

由于某些原因，jQuery 的切换总是阻止默认操作。见[源代码](http://code.jquery.com/jquery-latest.js)：

```
// Make sure that clicks stop
event.preventDefault(); 
```

所以我建议不要使用切换功能，而只是这样做：

```
$('#Left .Browsingtree02 li a').click(function(){
    var nbclicks = $(this).data('nbc')||0;
    $(this).data('nbc', ++nbclicks);
    if (nbclicks%2) {
        $(this).addClass('Selected');   
        $(this).parent().parent().find('.Browsingtree03').show(200);
    } else { 
        $(this).parent().parent().find('.Browsingtree03').hide(200);
        $(this).removeClass('Selected');
    }
});​ 
```

# objective-c - UILabel 文本中的图像

> ID：13739548
> 
> 赞同：0
> 
> 时间：2012-12-06T08:22:09.007
> 
> 标签：objective-c, ios, cocoa-touch

我需要一个想法如何将图像放入 uilabel 文本。文本应如下所示：

“你好按'image'，然后按'image2'，然后按'image3'”等等。文本是动态的，因此不能将所有内容添加到静态位置。

我只是想在我的文本中引用图像。像 ("Text %@, hello", image)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T08:35:21.907

为什么要在标签中这样做？

你可以通过 UIView 和 UILabel 和 UIButton 轻松做到这一点，

**[NSString sizeWithFont:forWidth:lineBreakMode:]**将通过计算每个文本宽度来帮助您添加视图的位置，因此您可以动态添加视图，

您需要将图像作为背景分配给 UIButton

您添加第一个标签，然后计算第一个添加第一个按钮的位置，依此类推

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T08:32:41.333

最好的方法是使用 UIView 并在该 UIView 上添加 UILabel、UIImage 作为子视图。

它看起来像这样

**UILabel1** UIImage1 **UILabel2** UIImage2 **UILabel3** UIImage3

现在关于使用动态文本的问题 - 您所要做的就是在运行时根据以下大小计算 UIView 的大小：

*   使用 NSString API 的 UILabel

    ```
     sizeWithFont:constrainedToSize: 
    ```

*   UIImages - 我相信它必须是静态的

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T09:00:03.433

您可以查看类 NSAttributedString+HTML.h 和 NSAttributedString+HTML.m 并使用 html 在标签中插入和图像。

# c# - 在 C# 中启用 firefox 弹出窗口

> ID：13739549
> 
> 赞同：0
> 
> 时间：2012-12-06T08:22:14.373
> 
> 标签：c#, asp.net, firefox, popup

我正在开发一个 Asp.Net 应用程序。我需要在新选项卡中打开一些超链接，我已经这样做了，但是我公司的客户使用 firefox，并且最近报告说 firefox 要求他们允许打开弹出窗口。有没有可以在我的 C# 代码中启用 firefox 弹出窗口的代码或方法或其他东西？这样客户就不会再看到 Firefox 问题了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T08:28:13.720

如果您想在新选项卡中打开链接，则不会使用`window.open`.

通常，在新窗口中打开链接的标准方法是使用`target="_blank"`HTML Anchor 元素的属性：

```
<a target="_blank" href="http://www.google.es">Open Google</a> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T08:33:24.203

尝试使用锚标签打开窗口..

```
<a href="1.htm" onclick="window.open(this.href);return false;">link text</a> 
```

这是另一个线程，但未经测试，请尝试.. [http://www.c-sharpcorner.com/forums/ShowMessages.aspx?ThreadID=85806](http://www.c-sharpcorner.com/forums/ShowMessages.aspx?ThreadID=85806)

# javascript - 在 Alfresco Share webscript 中动态获取主机和端口

> ID：13739552
> 
> 赞同：-1
> 
> 时间：2012-12-06T08:22:20.380
> 
> 标签：javascript, alfresco, alfresco-share

我想知道如何在 JS webscript 中获取运行 Share 的服务器的主机和端口。我一直在谷歌和论坛上搜索，但我没有发现任何有用的东西。我也在 Share 的源代码中搜索，结果相同。有可能做到吗？

我也一直在考虑另一种解决方案，包括在组件的配置文件中动态定义主机端口，但我不知道这是否可能。

以前有人做过吗？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T08:47:04.057

您可以查看此回复[How to retrieve the hostname from an Alfresco Share webscript](https://stackoverflow.com/questions/13491604/how-to-retrieve-the-hostname-from-an-alfresco-share-webscript)

> 在存储库方面，Alfresco 和 Share 的 URL 是已知的。您可以从 SysAdminParams 获取所有单独的部分，并且可以使用 UrlUtils 将不同的部分连接在一起，以便提供完整的 URL。
> 
> 但据我所知，这些细节只保存在 Alfresco 存储库层，永远不会传递给 Share。Share 中的所有绝对 URL 似乎都是在 Repo 中生成并发送过来的
> 
> 然后，一种选择是让您将 webscript 更改为 repo webscript 而不是共享 webscript。这将使您可以访问适当的 bean。Share 将为您代理 Repo webscripts，因此您仍然可以以登录用户的身份直接在 Share 中访问它。您需要一个有点像 /share/proxy/alfresco/my/web/script 的 URL 来访问它们。
> 
> 否则，创建一个公开 SysAdminParams 和共享 URL 的有用位的新 repo webscript，并让您的共享 webscript 获取它（可能使用缓存）。也有很多这样的例子可以使用。

# dojo - Dojo：如果无法获取初始数据，则将表单（或整个 div）灰显

> ID：13739561
> 
> 赞同：0
> 
> 时间：2012-12-06T08:23:11.603
> 
> 标签：dojo

我正在用 Dojo 编写一个简单的表单。这是我在实际做某事方面对 Dojo 的第一次“真正”使用......基本上：

1）当显示小部件时，onShow，它会尝试预加载表单应具有的值 2）当用户提交时，使用相同的存储保存值

这里的“问题”是我正在尝试制作一个 1000% 的故障安全应用程序。例如，如果商店不工作（因此无法检索设置），我希望应用程序在 3 秒后重试 - 或者，当用户单击链接时。所以，我现在正在做的是将所有“获取”功能放入一个函数 loadUp() 中。如果有问题，我将再次运行 loadUp()（从 promise 中的错误回调）并且我还应该禁用表单——比如将其变为灰色，现在允许输入）。

所以，问题：

1）这是一种理智的做事方式吗？2）你会怎么做，关于灰色的表格？

我意识到我在这里谈论的是工作区设置。所以，*真正*会发生的是“get”将在整个过程的一开始就完成。但是，我将在几乎所有形式中重复使用它......

这是代码：

```
var SettingsGeneral = declare('hotplate.bd.SettingsGeneral', [ ContentPane, _WidgetBase, _TemplatedMixin, _WidgetsInTemplateMixin ], { 

 templateString: '' + 
 '<div>' + 
 '  <form data-dojo-type="dijit.form.Form" data-dojo-attach-point="form" method="POST"> ' + 
 '    <input id="${id}_WorkspaceLongName" data-dojo-type="dijit/form/ValidationTextBox" name="longName" data-dojo-props="" />' + 
 '    <input id="${id}_WorkspaceTag" data-dojo-type="dijit/form/ValidationTextBox" name="tag" data-dojo-props="" />' + 
 '    <input class="formSubmit" type="submit" data-dojo-attach-point="button" data-dojo-type="hotplate.hotDojoWidgets.BusyButton" label="Create!" />' + 
 '  </form>' + 
 '</div>', 

onShow: function(){ 
  this.inherited(arguments); 

  // This returns a working store 
  var workspaceSettings = stores('workspaceSettings', { workspaceIdCall: vars['hotDojoAppContainer']['workspaceId'] } ); 

  function loadUp(){ 

   // The server will return the settings for this particular workspace 
   workspaceSettings.get('').then( 
      function(res){ 

        // All good... 

        // Assign all of the received values to matching fields 
        // TODO: Turn this into a function 
        that.form._descendants.forEach(function( widget ) { 
          console.log(widget); 
          if( typeof( res.data[ widget.name ] ) !== 'undefined'){ 
            widget.set('value', res.data[ widget.name] ); 
          } 
        }); 

      }, 
      function(err){ 

        // Error: try this again in 3 seconds, hopefully it will work. It would actually be better having a 
        // link to click for the user 

        console.log("Something went wrong. The form needs to be disabled (turned grey?) and the connection should be retried"); 
        setTimeout(loadUp, 3000); 
      } 
    ); 
  }; 
  loadUp(); 

  // Submit form 
  this.form.onSubmit = ds.defaultSubmit(this.form, this.button, function(){ 
     console.log("PRESSED!"); 
     that.button.cancel(); 

    console.log(workspaceSettings); 

    // Use the same data store to save the settings... 

  }); 
} 
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T05:48:53.463

这是我所做的：

第 1 步：我在我的类中添加了一个 mixin：，`_OverlayMixin`并设置`onOverlayClick`为重新显示小部件。我也会在被调用时`this.set( 'overlayed', true ); this.set( 'overlayClickable', false );`立即运行`show()`，然后 `that.set( 'overlayed', false );`（如果一切正常）或 `that.set('overlayClickable', true )`; （如果事情不顺利）。

STEP 2：实际编写了 _OverlayMixin 类

代码如下。这个`_OverlayMixin`类真的很简单，自成一体。它需要美化——现在它只是小部件上的一个灰色东西。如果覆盖是可点击的，它将有一个类集——所以它可能有一个重试图标。我喜欢我所做的，因为它非常像道场，而且阅读起来非常简单。此外，如果出现问题，用户可以通过这种方式轻松“重新启动”小部件。

这是代码......从我的简单小部件开始：

```
var SettingsGeneral = declare('hotplate.bd.SettingsGeneral', [ ContentPane, _WidgetBase, _TemplatedMixin, _WidgetsInTemplateMixin, _OverlayMixin ], { 

templateString: '' + 
 '<div>' + 
 '  <form data-dojo-type="dijit.form.Form" data-dojo-attach-point="form" method="POST"> ' + 
 '    <input id="${id}_WorkspaceLongName" data-dojo-type="dijit/form/ValidationTextBox" name="longName" data-dojo-props="" />' + 
 '    <input id="${id}_WorkspaceTag" data-dojo-type="dijit/form/ValidationTextBox" name="tag" data-dojo-props="" />' + 
 '    <input class="formSubmit" type="submit" data-dojo-attach-point="button" data-dojo-type="hotplate.hotDojoWidgets.BusyButton" label="Create!" />' + 
 '  </form>' + 
 '</div>', 

onOverlayClick: function(){ 
  this.onShow(); 
}, 

onShow: function(){ 

  var that = this; 

  // By default, this widget is overlayed 
  this.set( 'overlayed', true ); 
  this.set( 'overlayClickable', false ); 

  var workspaceSettings = stores('workspaceSettings', { workspaceIdCall: vars['hotDojoAppContainer']['workspaceId'] } ); 

  workspaceSettings.get('').then( 
    function(res){ 

      // OK things worked out: the overlay can go 
      that.set( 'overlayed', false ); 

      // Assign all of the received values to matching fields 
      // TODO: Turn this into a function 
      that.form._descendants.forEach(function( widget ) { 
        console.log(widget); 
        if( typeof( res.data[ widget.name ] ) !== 'undefined'){ 
          widget.set('value', res.data[ widget.name] ); 
        } 
      }); 
    }, 
    function(err){ 
      that.set('overlayClickable', true ); 
    } 
  ); 

}, 
```

混音：

```
define([ 
"dojo/_base/declare", 
"dojo/on", 
"dojo/dom", 
"dojo/dom-construct", 
"dojo/dom-attr", 
 "dojo/dom-class", 

], function( 
 declare 
, on 
, dom 
, domConstruct 
, domAttr 
, domClass 
){ 
return declare( null, { 

overlayed: false, 
overlayClickable: false, 

postCreate: function(){ 
  var that = this; 

  this.inherited(arguments); 

  // Create the overlay widget, place it as first in the widget 
  var overlay = domConstruct.create('div', { 
    className: 'overlay', 
    style: { 
      'position': 'absolute', 
      'top': 0, 
      'bottom': 0, 
      'left': 0, 
      'right': 0, 
      'z-index': 99, 
      'display': 'none', 
      'background': 'rgba(0,0,0,0.32)' 
    } 
  } ); 
  domConstruct.place(overlay, this.domNode, 'first'); 

  // Set the overlayNode attribute of the widget 
  this.overlayNode = overlay; 

  // Wire the click of the mouse to the object's "onOverlayClick" 
  on( this.overlayNode, 'click', function(e){ 
    if( that.overlayClickable && typeof( that.onOverlayClick ) === 'function' ) { 
      that.onOverlayClick(e); 
    } 
  }); 
}, 

// Set the widget as "overlayed" or 
_setOverlayedAttr: function( value ){ 
  this._set('overlayed', value); 
  if( value ){ 
    domAttr.set( this.overlayNode, { style: { display: 'block'} } ); 
  } else { 
    domAttr.set( this.overlayNode, { style: { display: 'none'} } ); 
  } 
}, 
_getOverlayedAttr: function(){ 
  return this.overlayVisible; 
}, 

// Set the widget as clickable or not 
_setOverlayClickableAttr: function(value){ 
  console.log("Set to clickableeeeeeeeeeeeeeeeeeeeeeeeeeeeee!"); 
  this._set('overlayClickable', !! value); 
  if( value ){ 
    console.log("1"); 
    domClass.add( this.overlayNode, 'overlayClickable' ); 
  } else { 
    console.log("2"); 
    domClass.remove( this.overlayNode, 'overlayClickable' ); 
  } 
}, 
_getOverlayClickableAttr: function(){ 
  return this.overlayClickableAttr; 
} 

});  
}); 
```

# java - Java SortedSet 添加所有

> ID：13739563
> 
> 赞同：1
> 
> 时间：2012-12-06T08:23:43.317
> 
> 标签：java, set, sortedset

以下代码创建了一个排序集，该集按其值而不是感谢键进行排序。`vertexRank`是负责获取值的对象。除了代码之外，一切都运行良好：`vertexCentralities.addAll(vMap.entrySet());`发生的情况是只有 vMap 的第一个条目被添加到 vertexCentralities，而不是所有条目。

1.  **如何将所有条目从 vMap 获取到 vertexCentralities？**

    ```
    SortedSet<Map.Entry<String, Double>> vertexCentralities = 
            new TreeSet<Map.Entry<String, Double>>(
            new Comparator<Map.Entry<String, Double>>()
            {
               @Override
               public int compare(Map.Entry<String, Double> e1, Map.Entry<String, Double> e2)
               {
                   return e2.getValue().compareTo(e1.getValue());
               }
             });
    SortedMap<String, Double> vMap = new TreeMap<String, Double>();
    double curRank = 0;
    for(String vStr: g.getVertices())
    {
        curRank = vertexRank.getVertexScore(vStr);
        vMap.put(vStr, curRank);
    }

    vertexCentralities.addAll(vMap.entrySet()); 
    ```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T08:39:10.590

我尝试运行：

```
public static final void main(final String[] args) {
    final String[] vStrs = new String[] { "A", "Z", "E", "R", "T", "Y" }; // init

    final SortedSet<Map.Entry<String, Double>> vertexCentralities = new TreeSet<Map.Entry<String, Double>>(new Comparator<Map.Entry<String, Double>>() {
        @Override
        public int compare(final Map.Entry<String, Double> e1, final Map.Entry<String, Double> e2) {
            return e2.getValue().compareTo(e1.getValue());
        }
    });
    final SortedMap<String, Double> vMap = new TreeMap<String, Double>();
    double curRank = 0;
    for (final String vStr : vStrs) {
        curRank = new Random().nextDouble() * 100.0; // replacing
                                                        // vertexRank.getVertexScore(vStr);
                                                        // for testing
        vMap.put(vStr, curRank);
    }
    vertexCentralities.addAll(vMap.entrySet());

    for (final Map.Entry<String, Double> entry : vertexCentralities) {
        System.out.println(entry.getKey() + ": " + entry.getValue());
    }

} 
```

并且输出按值排序：

```
A: 70.50008784770233
Z: 55.48252329485239
E: 37.31308600830347
Y: 32.534528844628255
T: 16.544965680467794
R: 12.258316023552872 
```

也许你的问题来自其他地方......比如`g.getVertices()`或`vertexRank.getVertexScore(vStr)`

`String`编辑：我尝试使用和 的重复值`double`：

```
final String[] vStrs = new String[] { "A", "Z", "E", "R", "T", "Y", "A" };
curRank = new Random().nextInt(3); 
```

看起来不允许重复。这是你的问题吗？

编辑：如果您想允许多次输入相同的内容，请找到解决方案`Double`：将您`SortedSet vertexCentralities`的比较器条件替换为：

```
final int bValue = e2.getValue().compareTo(e1.getValue());
return bValue != 0 ? bValue : e2.getKey().compareTo(e1.getKey()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T09:27:58.333

另一种解决方案可能是使用`SimpleEntry<K, V>`（java.util.AbstractMap 的内部公共静态类）并避免使用 SortedMap：

```
final SortedSet<Map.Entry<String, Double>> vertexCentralities = new TreeSet<Map.Entry<String, Double>>(new Comparator<Map.Entry<String, Double>>() {
    @Override
    public int compare(final Map.Entry<String, Double> e1, final Map.Entry<String, Double> e2) {
        final int bValue = e2.getValue().compareTo(e1.getValue());
        return bValue != 0 ? bValue : e2.getKey().compareTo(e1.getKey());
    }
});
double curRank = 0;
for (final String vStr : g.getVertices()) {
    curRank = vertexRank.getVertexScore(vStr);
    vertexCentralities.add(new SimpleEntry<String, Double>(vStr, curRank));
} 
```

你应该能够有重复的`Key`或`Value`但不能两者兼有。

# c# - LINQ to XML 将空项添加到对象列表

> ID：13739564
> 
> 赞同：1
> 
> 时间：2012-12-06T08:23:46.263
> 
> 标签：c#, xml, linq

我的xml：

```
 <Configuration>
    <LaunchDebugger>false</LaunchDebugger>
    <RequestFolder>./Request</RequestFolder>
    <ResponseFolder>./Response</ResponseFolder>
    <Countries>
      <Country NumericCode="1FH" FileName="file1.xml">1</Country>
      <Country NumericCode="20H" FileName="file2.xml">2</Country>
      <Country NumericCode="" FileName="file3.xml">3</Country>
    </Countries>
  </Configuration> 
```

国家级：

```
public class Country
{
    public String Name { get; set; }
    public String NumericCode { get; set; }
    public String FileName { get; set; }
} 
```

这就是我使用 LINQ 从它创建对象的方式：

```
 CountryList = (from filter in Configuration.Descendants("Countries").Descendants("Country")
                    select new Country() 
                    {
                        Name = (string)filter.Value,
                        NumericCode = (string)filter.Attribute("NumericCode"),
                        FileName = (string)filter.Attribute("FileName")
                    }).ToList(); 
```

解析 xml 有效，我在列表中获得了所有 3 个国家，但我还获得了一个额外的空对象作为列表的最后一项。

![在此处输入图像描述](../Images/7a30feee3a1b8b20f6f9d2868c217274.png)

知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T08:30:45.177

原因很简单 -`List<T>`默认容量等于[4。Capacity](http://msdn.microsoft.com/en-us/library/y52x03h2.aspx)获取或设置内部数据结构在不调整大小的情况下可以容纳的元素总数。内部数据结构是一个简单的数组`private Country[] _items`，最初的长度等于 4。因此为第四个元素保留了位置，在分配元素之前为空。但不要担心 -`3`如果您检查，元素计数将是。

这是一张图片，显示了公共（三个项目）和内部数据结构（容量大小的数组）

![List的内部结构](../Images/ca03d540274d35c19406cde2f169a8f8.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T09:43:42.727

我们可以使用**TrimExcess**方法来减少匹配计数的容量，但是如果您的元素少于 4 个，这将不起作用，就像在当前问题中一样。

相关链接： **容量**法 - [http://msdn.microsoft.com/en-us/library/y52x03h2(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/y52x03h2(v=vs.100).aspx)
**TrimExcess**方法 - [http://msdn.microsoft.com/en-us/library /ms132207(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/ms132207(v=vs.100).aspx)关于**默认容量**的问题-[列表的默认容量](https://stackoverflow.com/questions/1762817/default-capacity-of-list)

# javascript - 如何将 JavaScript 文件链接到 HTML 文件？

> ID：13739568
> 
> 赞同：222
> 
> 时间：2012-12-06T08:23:52.003
> 
> 标签：javascript, jquery, html

如何正确地将 JavaScript 文件链接到 HTML 文档？

其次，如何在 JavaScript 文件中使用 jQuery？

* * *

## 回答 #1

> 赞同：219
> 
> 时间：2012-12-06T08:40:25.040

首先，您需要从[http://jquery.com/](http://jquery.com/)下载 JQuery 库，然后在您的 html 头标签中按以下方式加载 jquery 库

然后您可以通过在 jquery 加载脚本之后编写 jquery 代码来测试 jquery 是否正常工作

```
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>

<!--LINK JQUERY-->
<script type="text/javascript" src="jquery-3.3.1.js"></script>
<!--PERSONAL SCRIPT JavaScript-->
<script type="text/javascript">
   $(function(){
      alert("My First Jquery Test");
   });
</script>

</head>
<body><!-- Your web--></body>
</html> 
```

如果要单独使用 jquery 脚本文件，则必须在加载 jquery 库后以这种方式定义外部 .js 文件。

```
<script type="text/javascript" src="jquery-3.3.1.js"></script>
<script src="js/YourExternalJQueryScripts.js"></script> 
```

# 实时测试

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>

<!--LINK JQUERY-->
<script type="text/javascript" src="jquery-3.3.1.js"></script>
<!--PERSONAL SCRIPT JavaScript-->
<script type="text/javascript">
   $(function(){
      alert("My First Jquery Test");
   });
</script>

</head>
<body><!-- Your web--></body>
</html>
```

* * *

## 回答 #2

> 赞同：62
> 
> 时间：2012-12-06T08:25:59.663

这是在 HTML 中链接 JS 文件的方式

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script> 
```

`<script>`- 标记用于定义客户端脚本，例如 JavaScript。

`type`- 指定脚本的类型

`src`- 脚本文件名和路径

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2012-12-06T08:26:57.183

要包含外部 Javascript 文件，请使用`<script>`标记。该`src`属性指向您的 Javascript 文件在您的 Web 项目中的位置。

```
<script src="some.js" type="text/javascript"></script> 
```

JQuery 只是一个 Javascript 文件，因此如果您下载该文件的副本，您可以使用脚本标记将其包含在您的页面中。您还可以包含来自内容分发网络（例如由 Google 托管的网络）的 Jquery。

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script> 
```

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2012-12-06T08:29:21.990

您可以在 HTML 文档中添加脚本标记，最好是在指向您的 javascript 文件的内部。脚本标签的顺序很重要。如果您想在脚本中使用 jQuery，请在脚本文件之前加载 jQuery。

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
<script type="text/javascript" src="relative/path/to/your/javascript.js"></script> 
```

然后在您的 javascript 文件中，您可以使用`$`sign 或`jQuery`. 例子：

```
jQuery.each(arr, function(i) { console.log(i); }); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-06-27T15:35:51.230

下面有一些[VALID html5](https://html5.validator.nu/)示例文档。标签中的`type`属性在 HTML5中[不是强制性的。](https://www.w3schools.com/tags/tag_script.asp#midcontentadcontainer)`script`

您按字符使用 jquery `$`。将库（如 jquery）放在`<head>`标签中 - 但您的脚本始终放在文档（标签）的底部`<body>`- 因此，您将确保在脚本执行开始时将加载所有库和 html 文档。您还可以`src`在底部脚本标记中使用属性来包含您的脚本文件，而不是像上面那样放置直接的 js 代码。

```
<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Example</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
</head>
<body>
    <div>Im the content</div>

    <script>
        alert( $('div').text() ); // show message with div content
    </script>
</body>
</html>
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-01-27T14:13:49.997

```
this is demo code but it will help 

<!DOCTYPE html>
<html>
<head>
<title>APITABLE 3</title>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
<script>

$(document).ready(function(){

$.ajax({
    type: "GET",
    url: "https://reqres.in/api/users/",

    data: '$format=json',

    dataType: 'json',
    success: function (data) {
 $.each(data.data,function(d,results){
     console.log(data);

 $("#apiData").append(
                        "<tr>"
                          +"<td>"+results.first_name+"</td>"
                          +"<td>"+results.last_name+"</td>"
                          +"<td>"+results.id+"</td>"
                          +"<td>"+results.email+"</td>"
  +"<td>"+results.bentrust+"</td>"
                        +"</tr>" )
                    })
 } 

});

});

</script>
</head>
<body>

    <table id="apiTable">

        <thead>
            <tr>
            <th>Id</th>
            <br>
            <th>Email</th>
            <br>
            <th>Firstname</th>
            <br>
            <th>Lastname</th>
        </tr>
        </thead>
        <tbody id="apiData"></tbody>    

</body>
</html> 
```

# android - 如何从android中的选项卡活动中为结果启动一个新活动

> ID：13739573
> 
> 赞同：0
> 
> 时间：2012-12-06T08:24:02.643
> 
> 标签：android, android-activity, android-tabhost, start-activity

> **可能重复：**
> [从带有选项卡的其他 Activity 启动 Activity](https://stackoverflow.com/questions/13623350/start-activity-from-an-other-activity-with-tabs)

我有一个包含 3 个选项卡的 TabHost。具有 3 个选项卡的 Act1、Act2、Act3。现在我想在 Act1 中单击按钮开始一个新活动（比如 Act4）。当我在 Act4 中时，我应该会看到这些选项卡。如何从我的选项卡开始一项新活动以获得结果？请帮帮我。

```
 startActivityForResult(new Intent(Act1.this, Act4.class), CONSTANT); 
```

上面的行将我带到 Act4 屏幕，但它没有显示选项卡。我应该怎么做才能看到 Act4 中的选项卡并返回到 Act1 并返回结果？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T08:32:11.147

我觉得你可以试试`Fragments`

[developer.android.com/guide/components/fragments.html](http://developer.android.com/guide/components/fragments.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T08:37:47.700

请参阅下面的链接以获取完整的示例，它将解决您的问题。

[使用选项卡从其他 Activity 启动 Activity](https://stackoverflow.com/questions/13623350/start-activity-from-an-other-activity-with-tabs/13624701#13624701)

# php - 图片未从文件夹加载

> ID：13739574
> 
> 赞同：-5
> 
> 时间：2012-12-06T08:24:05.187
> 
> 标签：php, codeigniter

我有一个名为 template.php 的 php 页面，我有一个徽标，单击该页面时，它将通过选择图像文件来更改徽标图像，在该页面中进行一些操作，并将数据发送到我的控制器，然后从我在代码点火器框架中将数据（图像）存储到我的上传文件夹。然后我重定向到我完成所有操作的 template.php 页面，图像在上传文件夹中，但是当我放弃时页面上传/image.png”不起作用，但是在使用 ctrl+R 刷新页面后，它会将图像替换在徽标中的正确位置，如何通过加载图像而不按 ctrl+R 刷新来解决这个问题？ ? 因为我必须通过 javascript 让它工作？？是那个 php 代码不起作用还是它没有从资源加载图像？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T08:35:22.670

您需要使用 javascript 并预加载所有图像，或者使用 AJAX 并调用要加载的图像。

这是因为所有 php 都是在服务器（服务器端脚本）上执行的，并且在发送到浏览器之前需要刷新。使用客户端脚本 (javascript) 在浏览器中执行它。AJAX 可以是一个组合。客户端脚本调用服务器端脚本，然后获取响应

# c# - DevExpress：通过代码设置数据源和列标题

> ID：13739581
> 
> 赞同：2
> 
> 时间：2012-12-06T08:24:49.960
> 
> 标签：c#, devexpress, xtragrid

我有以下问题。使用 DevExpress 我想设置一个 XtraGrid 绑定到一个列表。

因此我拿了一个 BindingList

```
private BindingList<string> aBindingList = new BindingList<string>(); 
```

后面的列表填充了 Linq 查询（计算用户条目，然后将不同的结果显示为网格以供进一步处理）。由于我无法将查询的结果直接放入绑定列表中，因此

```
if (null != aStringList) aBindingList = new BindingList<string>(aStringList); 
```

而现在问题出现了。我想使用 BindingList 作为 XtraGrid 的数据源，并使用正确的标题名称。

```
gridControlXtraGrid.DataSource = aBindingList ; 
```

这个显示行，但使用丑陋的标题“列”。

```
DevExpress.XtraGrid.Views.Base.ColumnView aColumnView = gridControlXtraGrid.MainView as DevExpress.XtraGrid.Views.Base.ColumnView;
aColumnView.Columns[0].FieldName = "My Header"; 
```

设置标题，但不再显示行。

```
gridControlXtraGrid.DataSource = aBindingList ;
DevExpress.XtraGrid.Views.Base.ColumnView aColumnView = gridControlXtraGrid.MainView as DevExpress.XtraGrid.Views.Base.ColumnView;
aColumnView.Columns[0].FieldName = "My Header";
gridViewExcludableProperties.PopulateColumns(); 
```

最后再次显示数据行，但不再显示标题。

所以我要么可以设置列标题，要么查看行。

那么如何同时设置两者呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T08:41:19.637

好的，如果其他人正在搜索这个：

```
aColumnView.Columns[0].Caption 
```

必须使用，而不是 aColumnView.Columns[0].FieldName

gridView.Rows[0].HeaderCell.Value = "一些值"; 措辞中的普通网格似乎更清晰......

# internationalization - wsdl:documentation 标签是否支持 xml:lang 属性？

> ID：13739582
> 
> 赞同：2
> 
> 时间：2012-12-06T08:24:54.807
> 
> 标签：internationalization, documentation, wsdl

我必须为现有的 WSDL 文件编写文档，并且希望在文档中这样做。问题是，我找不到任何关于 wsdl:documentation 是否允许使用 xml:lang 作为属性或者是否有任何文档生成器会使用它的信息。

到目前为止，我还没有在网上找到任何东西，我简直不敢相信我是唯一一个想做双语文档的人。有什么提示吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T19:52:52.363

[从 WSDL 1.1 规范](http://www.w3.org/TR/wsdl#_documentation)：

> WSDL 使用可选的 wsdl:document 元素作为人类可读文档的容器。元素的内容是任意文本和元素（XSD 中的“混合”）。任何 WSDL 语言元素中都允许使用文档元素。

[从 WSDL 2.0 规范](http://www.w3.org/TR/wsdl20/#eii-documentation)（强调我的）：

> WSDL 2.0 使用可选的文档元素信息项作为人类可读或机器可处理文档的容器。元素信息项的内容是任意的字符信息项和元素信息项（XML Schema [XML Schema: Structures]中的“混合”内容）。文档元素信息项允许在任何 WSDL 2.0 元素信息项中。
> 
> 与“ [http://www.w3.org/ns/wsdl](http://www.w3.org/ns/wsdl) ”命名空间中的其他元素信息项一样，文档元素信息项允许其[命名空间名称]不是“ [http://www.w3”的限定属性信息项。组织/ns/wsdl](http://www.w3.org/ns/wsdl) ”。**xml:lang 属性（参见 [XML 1.0]）可用于指示文档元素信息项的内容中使用的语言**。

似乎这在 V1 中以某种方式被遗忘并在 V2 中修复。基本上，你是一个人。

但是，即使规范要求对文档使用 xml:lang，您也永远无法知道您的客户将使用什么来处理您提供给他们的 WSDL，也永远无法知道他们是否可以正确地从中提取文档。

我希望你不介意我这么说，但我认为你以错误的方式接近这个问题。Web 服务的文档不会自行恢复到 WSDL。是的，您的客户必须提供 WSDL 才能轻松生成调用 Web 服务所需的管道代码，但它只详细说明了调用的技术细节。它没有说明应该如何使用您的 Web 服务。

[YMMV](http://en.wiktionary.org/wiki/your_mileage_may_vary)，但在 WSDL 之外，您可能想要：

*   首先概述您的 Web 服务的功能；
*   其每项操作的用途和时间；
*   参数的含义是什么，每个参数都有哪些约束（例如，一些无法通过 XSD 限制加强的业务约束）；
*   一些包含 Web 服务所需/返回的典型数据的 SOAP 消息样本；
*   描述预期的错误、它们将具有哪些代码/描述以及如何解决它们；
*   强调业务限制（我在想红色粗体字？！）；
*   如果要插入图片来描述整体架构怎么办？
*   等等等等

在 WSDL 中添加所有这些细节是有限制的。那么如何让您的文档由 WSDL 和格式良好（特定于语言）的 PDF 文件组成，其中包含我上面提到的详细信息？

# javascript - Javascript 字符代码部分不起作用

> ID：13739589
> 
> 赞同：-1
> 
> 时间：2012-12-06T08:25:38.057
> 
> 标签：javascript, jquery

我想添加字符代码以防止在我的 JS 表单中。如果我添加此字符代码，此 JS 将不起作用：

```
] \ / 
```

--

```
jQuery.validator.addMethod("userNameRule", function(string, element) { 
    return !string.match(/[.;,`~!@#$%^&*()-+=|{[}'":?><]/g);
    }); 
```

我现在要做的是，将字符代码添加到我的 JS 中。

那么我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T08:28:43.283

您的模式包含一些保留字符，例如`. ^ $ ( ) { } - + ?`

在字符类中，您应该只转义`-`，因为它适用于诸如`a-z`或之类的符号范围`0-9`

试着像这样逃离他们

```
return !string.match(/[\.;,`~!@#\$%\^&\*\(\)\-\+=|\{\[\}'":\?><]/g); 
```

（或者只是逃避`-`）

# c# - 将子菜单添加到上下文菜单条的特定菜单项

> ID：13739590
> 
> 赞同：1
> 
> 时间：2012-12-06T08:25:41.843
> 
> 标签：c#, .net, contextmenu

我有一个上下文菜单条，其中将根据特定条件填充菜单项。

前任：

对于条件1：

```
myContextMenuStrip.Items.Clear();
myContextMenuStrip.Items.Add("Item title", null, myClickHandler);
myContextMenuStrip.Items.Add("Item Status", null, myClickHandler);
myContextMenuStrip.Items.Add("Item Variables", null, myClickHandler); 
```

条件2：

```
myContextMenuStrip.Items.Clear();
myContextMenuStrip.Items.Add("Item Status", null, myClickHandler); 
```

对于条件1，我使用向 ItemStatus 添加子菜单

```
(myContextMenuStrip.Items[1] as ToolStripMenuItem).DropDownItems.Add("Submenu1", null, new EventHandler(gridcontextsubMenu_ItemClicked));
(myContextMenuStrip.Items[1] as ToolStripMenuItem).DropDownItems.Add("Submenu2", null, new EventHandler(gridcontextsubMenu_ItemClicked)); 
```

对于 condition2 向 ItemStatus 添加子菜单，我使用

```
(myContextMenuStrip.Items[0] as ToolStripMenuItem).DropDownItems.Add("Submenu1", null, new EventHandler(gridcontextsubMenu_ItemClicked));
(myContextMenuStrip.Items[0] as ToolStripMenuItem).DropDownItems.Add("Submenu2", null, new EventHandler(gridcontextsubMenu_ItemClicked)); 
```

但我需要一种将子菜单添加到菜单项 ItemStatus 的通用方法。

欢迎分享答案

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T10:20:12.350

a的`Items`属性`ContextMenuStrip`返回 a `ToolStripItemCollection`，它允许您使用带有索引号或名称的索引器。因此，您可以将项目名称用于`Items`. 例如：

```
(myContextMenuStrip.Items["Item Status"] as ToolStripMenuItem).DropDownItems.Add("Submenu1", null, new EventHandler(gridcontexsubMenu_ItemClicked)); 
```

# deployment - 将发布博客部署到 Heroku 会导致应用程序错误

> ID：13739592
> 
> 赞同：2
> 
> 时间：2012-12-06T08:25:44.167
> 
> 标签：deployment, heroku, publify

我正在尝试将全新安装的[发布](https://github.com/fdv/publify/)博客部署到 Heroku。在我的本地计算机上一切正常。

并且`git push heroku master`没有说任何关于问题的事情：

```
Counting objects: 7, done.
Delta compression using up to 2 threads.
Compressing objects: 100% (4/4), done.
Writing objects: 100% (6/6), 786 bytes, done.
Total 6 (delta 1), reused 0 (delta 0)

-----> Heroku receiving push
-----> Ruby/Rails app detected
-----> Installing dependencies using Bundler version 1.2.2
       Running: bundle install --without development:test --path 
         vendor/bundle --binstubs bin/ --deployment

       Using rake (10.0.2)

       ... (edited out list of gems being used)

       Your bundle is complete! It was installed into ./vendor/bundle
       Cleaning up the bundler cache.
-----> Writing config/database.yml to read from DATABASE_URL
-----> Rails plugin injection
       Injecting rails_log_stdout
       Injecting rails3_serve_static_assets
-----> Discovering process types
       Procfile declares types      -> (none)
       Default types for Ruby/Rails -> console, rake, web, worker
-----> Compiled slug size: 10.7MB
-----> Launching... done, v7
       http://desolate-harbor-2909.herokuapp.com deployed to Heroku

To git@heroku.com:desolate-harbor-2909.git
   cea2c5c..efb4eb2  master -> master 
```

但在那之后我在应用程序页面上看到了这个：

> 应用程序错误
> 应用程序发生错误，无法提供您的页面。请稍后重试。
> 
> 如果您是应用程序所有者，请查看您的日志以获取详细信息。

和 Heroku 日志显示：

```
heroku[slugc]: Slug compilation started
heroku[api]: Release v7 created by runsfor@gmail.com
heroku[api]: Deploy efb4eb2 by runsfor@gmail.com
heroku[web.1]: State changed from crashed to starting
heroku[slugc]: Slug compilation finished
heroku[web.1]: Starting process with command `bundle exec rails server -p 50812`
app[web.1]:        /app/vendor/bundle/ruby/1.9.1/gems/bundler-1.2.2/lib/bundler/dsl.rb:7:in `evaluate'
app[web.1]:        /app/vendor/bundle/ruby/1.9.1/gems/bundler-1.2.2/bin/bundle:14:in `<top (required)>'
app[web.1]:        /app/vendor/bundle/ruby/1.9.1/gems/bundler-1.2.2/lib/bundler/dsl.rb:32:in `instance_eval'
app[web.1]:        /app/vendor/bundle/ruby/1.9.1/gems/bundler-1.2.2/lib/bundler/friendly_errors.rb:4:in `with_friendly_errors'
app[web.1]: There was an error in your Gemfile, and Bundler cannot continue.
app[web.1]:        /app/vendor/bundle/ruby/1.9.1/gems/bundler-1.2.2/lib/bundler/cli.rb:423:in `exec'
app[web.1]:        /app/Gemfile:7:in `eval_gemfile'
app[web.1]:        /app/vendor/bundle/ruby/1.9.1/gems/bundler-1.2.2/lib/bundler/dsl.rb:32:in `eval_gemfile'
app[web.1]:        /app/vendor/bundle/ruby/1.9.1/gems/bundler-1.2.2/lib/bundler/definition.rb:18:in `build'
app[web.1]:        /app/vendor/bundle/ruby/1.9.1/gems/bundler-1.2.2/lib/bundler.rb:144:in `definition'
app[web.1]:        /app/vendor/bundle/ruby/1.9.1/gems/bundler-1.2.2/lib/bundler/vendor/thor/task.rb:27:in `run'
app[web.1]:        /app/vendor/bundle/ruby/1.9.1/gems/bundler-1.2.2/lib/bundler/vendor/thor/invocation.rb:120:in `invoke_task'
app[web.1]:        /app/vendor/bundle/ruby/1.9.1/gems/bundler-1.2.2/lib/bundler/vendor/thor.rb:275:in `dispatch'
app[web.1]:        /usr/local/lib/ruby/1.9.1/syck.rb:135:in `load'
app[web.1]:        /app/vendor/bundle/ruby/1.9.1/bin/bundle:23:in `load'
app[web.1]:        /app/vendor/bundle/ruby/1.9.1/gems/bundler-1.2.2/lib/bundler/vendor/thor/base.rb:408:in `start'
app[web.1]:        /app/vendor/bundle/ruby/1.9.1/gems/bundler-1.2.2/bin/bundle:14:in `block in <top (required)>'
app[web.1]: /usr/local/lib/ruby/1.9.1/syck.rb:135:in `load': syntax error on line 27, col 0: `adapter = uri.scheme' (ArgumentError)
app[web.1]:        /app/vendor/bundle/ruby/1.9.1/bin/bundle:23:in `<main>'
heroku[web.1]: Process exited with status 4
heroku[web.1]: State changed from starting to crashed
heroku[router]: at=error code=H10 desc="App crashed" method=GET path=/ host=desolate-harbor-2909.herokuapp.com fwd=171.5.16.142 dyno= queue= wait= connect= service= status=503 bytes=
heroku[router]: at=error code=H10 desc="App crashed" method=GET path=/favicon.ico host=desolate-harbor-[2909.herokuapp.com][1] fwd=171.5.16.142 dyno= queue= wait= connect= service= status=503 bytes= 
```

我做错了什么？我想我需要在部署到 Heroku 之前以某种方式设置它。

Database.yml 文件是：

```
login: &login
  adapter: postgresql
  host: localhost
  username: *****
  password: *****

development:
  database: typo_dev
  <<: *login

test:
  database: typo_tests
  <<: *login

production:
  database: typo
  <<: *login 
```

Heroku 运行 rake db:migrate 输出为：

```
Running `rake db:migrate` attached to terminal... up, run.7604
/usr/local/lib/ruby/1.9.1/syck.rb:135:in `load': syntax error on line 27, col 0: `adapter = uri.scheme' (ArgumentError)
       /usr/local/lib/ruby/1.9.1/syck.rb:135:in `load'
       /app/Gemfile:7:in `eval_gemfile'
       /app/vendor/bundle/ruby/1.9.1/gems/bundler-1.2.2/lib/bundler/dsl.rb:32:in `instance_eval'
       /app/vendor/bundle/ruby/1.9.1/gems/bundler-1.2.2/lib/bundler/dsl.rb:32:in `eval_gemfile'
       /app/vendor/bundle/ruby/1.9.1/gems/bundler-1.2.2/lib/bundler/dsl.rb:7:in `evaluate'
       /app/vendor/bundle/ruby/1.9.1/gems/bundler-1.2.2/lib/bundler/definition.rb:18:in `build'
       /app/vendor/bundle/ruby/1.9.1/gems/bundler-1.2.2/lib/bundler.rb:144:in `definition'
       /app/vendor/bundle/ruby/1.9.1/gems/bundler-1.2.2/lib/bundler/cli.rb:423:in `exec'
       /app/vendor/bundle/ruby/1.9.1/gems/bundler-1.2.2/lib/bundler/vendor/thor/task.rb:27:in `run'
       /app/vendor/bundle/ruby/1.9.1/gems/bundler-1.2.2/lib/bundler/vendor/thor/invocation.rb:120:in `invoke_task'
       /app/vendor/bundle/ruby/1.9.1/gems/bundler-1.2.2/lib/bundler/vendor/thor.rb:275:in `dispatch'
       /app/vendor/bundle/ruby/1.9.1/gems/bundler-1.2.2/lib/bundler/vendor/thor/base.rb:408:in `start'
       /app/vendor/bundle/ruby/1.9.1/gems/bundler-1.2.2/bin/bundle:14:in `block in <top (required)>'
       /app/vendor/bundle/ruby/1.9.1/gems/bundler-1.2.2/lib/bundler/friendly_errors.rb:4:in `with_friendly_errors'
       /app/vendor/bundle/ruby/1.9.1/gems/bundler-1.2.2/bin/bundle:14:in `<top (required)>'
       /app/vendor/bundle/ruby/1.9.1/bin/bundle:23:in `load'
       /app/vendor/bundle/ruby/1.9.1/bin/bundle:23:in `<main>'
There was an error in your Gemfile, and Bundler cannot continue. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T16:10:38.460

当 Rails 加载`database.yml`文件时，它实际上[在将其加载为 Yaml 文件之前通过 ERB 对其进行过滤](https://github.com/rails/rails/blob/v3.0.10/railties/lib/rails/application/configuration.rb#L88)。这样您就可以使用 Ruby 动态创建配置，例如将密码保存在存储库之外。

当您将 Rails 应用程序推送到 Heroku 时，会创建[一个新`database.yml`文件，替换原来的](https://github.com/heroku/heroku-buildpack-ruby/blob/v42/lib/language_pack/ruby.rb#L442-504). 这个新`database.yml`的使用 ERB 从`DATABASE_URL`环境变量构造配置，所以实际上它不是一个“纯粹的”Yaml 文件——你可以认为它类似于`database.yml.erb`.

Typo 的 Gemfile[加载`database.yml`文件](https://github.com/fdv/typo/blob/release_6_1_0/Gemfile#L2)，然后[将其解析为 Yaml](https://github.com/fdv/typo/blob/release_6_1_0/Gemfile#L7)，但不首先通过 ERB 提供它。您看到的错误是由 Yaml 解析器读取文件但由于它是 ERB 而失败，而不是有效的 Yaml 引起的。

要修复它，您需要确保`database.yml`文件在被读取为 Yaml 之前通过 ERB。在你的`Gemfile`改变行

```
conf = YAML.load(File.read(dbfile)) 
```

至

```
require 'erb'
conf = YAML.load(ERB.new(File.read(dbfile)).result) 
```

您可能想要打开 Typo 的错误报告，甚至发送拉取请求。

# markdown - blockquote 中的 doxygen markdown 代码块

> ID：13739594
> 
> 赞同：3
> 
> 时间：2012-12-06T08:25:50.643
> 
> 标签：markdown, doxygen

有没有办法将代码块作为带有 doxygen 降价的块引用？这在引用参考书等时很有用。我尝试了以下方法，但它不会以固定宽度的字体打印代码。

```
> Put the following line in your program:
>
>     printf("Hello, world."); 
```

我希望它看起来像（我使用 SO 的降价来说明）：

> 将以下行放入您的程序中：
> 
> ```
> printf("Hello, world."); 
> ```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-09T06:50:49.370

根据[markdown](http://www.doxygen.nl/manual/markdown.html#md_blockquotes)的 doxygen 手册，块引用行中的最后`>`一行必须后跟一个空格，才能将该行视为块引用。在上面的示例中，没有空格，因此代码不会被视为块引用。如果改为将其指定为（注意第 2 行的额外空格）：

```
> Put the following line in your program:
> 
>     printf("Hello, world."); 
```

它应该被正确渲染。

# c# - 获取对当前视图模型实例的引用

> ID：13739596
> 
> 赞同：1
> 
> 时间：2012-12-06T08:26:00.250
> 
> 标签：c#, wpf, mvvm, viewmodel, code-behind

假设我有一个使用 MVVM 模式的 WPF 应用程序。应用程序的主窗口在 XAML 中定义其数据上下文：

```
<Window.DataContext>
  <vm:MainWindowViewModel/>
</Window.DataContext> 
```

`MainWindowViewModel`是否可以在 XAML 代码隐藏之后获取对当前实例的引用`InitializeComponent()`？我知道在使用 MVVM 时不建议这样做，但我想不出任何其他方法来解决我的问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T08:28:56.270

当然：

```
var viewModel=DataContext as MainWindowViewModel; 
```

只需将您的 DataContext 转换为您的视图模型的类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T08:30:09.777

您可以将其保存在某个静态类中并将其定义为静态资源。

# performance - 使用 AutomationPeers 进行 Silverlight 性能/分析

> ID：13739604
> 
> 赞同：1
> 
> 时间：2012-12-06T08:26:38.837
> 
> 标签：performance, silverlight, profiling, ui-automation

对于可访问性，Silverlight 实现了 AutomationPeers，对自动化 UI 测试、屏幕阅读器等很有用。

在分析我的 SL 应用程序时，我注意到很多与 AutomationPeers 相关的昂贵调用，例如[UIElement.OnCreateAutomationPeer](http://msdn.microsoft.com/en-us/library/system.windows.uielement.oncreateautomationpeer%28v=vs.95%29.aspx "UIElement.OnCreateAutomationPeer")。框架控件已经实现了这一点，这会导致非托管代码调用，这对于 SL 的托管代码来说显然是昂贵的。

我的问题是，这种自动化是否仅在您运行自动化客户端时启用，例如“平板电脑输入服务”？我不希望进行这些调用，因为我们不会使用任何自动化/可访问性服务，而且我们的应用程序是相当资源密集型的，因此需要限制不必要的调用，尤其是非托管调用。

我只是不确定是否由于某些我不知道在我的系统上运行的自动化客户端正在执行此代码，或者这是否也会在客户端的系统上执行？我不想有歪斜的分析结果。

# facebook-graph-api - Facebook Graph API 中不支持的获取请求

> ID：13739609
> 
> 赞同：30
> 
> 时间：2012-12-06T08:26:54.413
> 
> 标签：facebook-graph-api

出于某种原因，我的[https://graph.facebook.com/210155825774263](https://graph.facebook.com/210155825774263)返回错误：

```
{
   "error": {
      "message": "Unsupported get request.",
      "type": "GraphMethodException",
      "code": 100
   }
} 
```

我尝试了其他页面和 ID，它返回相关（成功）信息。
起初我以为这是一个与代码相关的错误——直到现在我才发现这是一个 FB 错误。有没有办法解决这个问题以获取 JSON 格式的页面信息？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-12-13T10:26:27.967

> 出现此错误是由于您的页面权限存在多个问题
> 
> **1.进入编辑页面->管理权限**
> 
> 检查年龄限制：13+
> 
> **2.进入基本信息->开始类型::设置为启动**

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-06-05T17:44:59.907

我也遇到过这个问题，这是因为我管理的 Facebook 页面在“*管理权限*”菜单中设置了“县限制”。一旦我删除了这个限制，图形错误就消失了。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-06T10:51:21.170

如果没有用户访问令牌，您遇到问题的页面将无法访问，或者有一些或其他限制，只有在用户登录时才能解决。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-11-24T14:41:39.620

我遇到了这个问题，因为我忘了禁用沙盒模式。要禁用它，请转到设置->基础->沙盒模式

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-03-16T15:19:19.857

对我来说，在 url 中添加 &limit=8 解决了这个问题，我认为发送的信息太多了，而且这个限制似乎只在开发模式下。当然对我来说是 8 但对你来说可以是 limit=1

[https://graph.facebook.com/v6.0/](https://graph.facebook.com/v6.0/){{pageId}}/feed?access_token={{your token}}pretty=1&fields=reactions.type\u002528LIKE\u002529.limit\u0025280\u002529.summary\u0025281\u002529.as\u002528like\u002529\u00252Creactions.type\ u002528LOVE\u002529.limit\u0025280\u002529.summary\u0025281\u002529.as\u002528love\u002529\u00252Creactions.type\u002528WOW\u002529.limit\u0025280\u002529.summary\u0025281\u002529.as\u002528wow\u002529\u00252Creactions. type\u002528HAHA\u002529.limit\u0025280\u002529.summary\u0025281\u002529.as\u002528haha\u002529\u00252Creactions.type\u002528SAD\u002529.limit\u0025280\u002529.summary\u0025281\u002529.as\u002528sad\u002529\ u00252Creactions.type\u002528ANGRY\u002529.limit\u0025280\u002529.summary\u0025281\u002529.as\u002528angry\u002529\u00252Cfrom\u00252Ccomments.limit\u00252810\u002summary\u002528true\u002529\u00252Cmessage\u00252Cstatus_type\u00252Cobject_attachment\u00252Cmessage_tags\u00252Cpermalink_url\u00252C+attachments\u00257Btitle\u00252Cdescription\u00252Cmedia_type\u00252Cunshimmed_url\u00252Ctarget\u00257Bid\u00257D\u00257D&limit=8

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-09-26T10:23:29.413

![在此处输入图像描述](../Images/3fe988897028ca05e055f6f5c6211d7e.png)

1.管理面板点击编辑页面（在窗口的右上角）选择编辑设置

```
check Age restrictions : select 'Anyone (13+)'

 save change( as you can see in image) 
```

# javascript - 如何使用 Google 地图 API 一键获取从某个位置到各个位置的距离？

> ID：13739613
> 
> 赞同：6
> 
> 时间：2012-12-06T08:27:09.570
> 
> 标签：javascript, ajax, distance, google-maps-api-2

目前程序正在运行，但是由于`alert()`我在函数中使用的`getData()`函数，界面很烦人！当我从函数中删除这一行时，`getData()`整个程序出错了！！我不知道是什么问题？有人有更好的主意来做这样的过程吗？

我在这里尝试制作的程序旨在帮助用户找到距当前地址50公里内的餐厅，我已经收集了各种位置地址并将其记录在数据库中。

`initialize()`加载 HTML 正文时调用的函数，在 HTML 正文的第一行中，餐厅数据将使用 PHP 从 MySQL 中提取，PHP 会将数据打印到 JavaScript 数组 jsres_add、jsres_id、jsres_name 和 jsnu 中，以便我可以在 JavaScript 代码中使用它们。*请注意下面的JavaScript代码是分开在.js文件中的

```
var geocoder, location1, location2, gDir, oMap, jsnu, arraynu, address2;
jsres_add = new Array();
jsres_id = new Array();
jsres_name = new Array();

function initialize() {
    geocoder = new GClientGeocoder();
    gDir = new GDirections();
    GEvent.addListener(gDir, "load", function() {
        var drivingDistanceMiles = gDir.getDistance().meters / 1609.344;
        var drivingDistanceKilometers = gDir.getDistance().meters / 1000;
        if (drivingDistanceKilometers < 50){
            // function to save search result within 50km into database using ajax
            saveSearchResult(jsres_id[arraynu],jsres_name[arraynu],drivingDistanceKilometers);
        }
    });
}

function getData() {
    emptytable(); //function to empty search result table using ajax
    //jsnu is the number of the restaurants data found in database
    for (var ii = 0; ii < jsnu; ii++) {
        arraynu = ii;
        address2 = jsres_add[ii];
        showLocation();
        alert("done!");
    }
    showResults(); //function to print out the search result from database into html body using ajax
}

function showLocation() {
geocoder.getLocations(document.forms[0].address1.value, function (response) {
    if (!response || response.Status.code != 200){
        alert("Sorry, we were unable to geocode your address");
    }else{
        location1 = {lat: response.Placemark[0].Point.coordinates[1], lon: response.Placemark[0].Point.coordinates[0], address: response.Placemark[0].address};
        geocoder.getLocations(address2, function (response) {
            if (!response || response.Status.code != 200){
                alert("Sorry, we were unable to geocode the second address");
            }else{
                location2 = {lat: response.Placemark[0].Point.coordinates[1], lon: response.Placemark[0].Point.coordinates[0], address: response.Placemark[0].address};
                gDir.load('from: ' + location1.address + ' to: ' + location2.address);
            }
        });
    }
});
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T10:50:29.327

如果功能的存在使代码工作，我猜这是与时间有关的问题，特别是在收到地理编码器服务的响应之前`alert()`，您似乎被覆盖了。`address2`

[编辑]

在你设置了 jsfiddle 之后，我更仔细地检查了你的代码并让它工作：

[http://jsfiddle.net/zuYXS/16/](http://jsfiddle.net/zuYXS/16/)

`address2`确实被覆盖了，但这不是唯一的问题，事实上你使用的所有变量都是全局的。特别是，我必须为`GDirections`您提出的每个请求创建一个实例（共享一个会在显示之前覆盖第一个结果）。

要了解您的代码为什么不起作用，我建议您搜索和研究一些有关异步方法调用的材料。

同样作为一般经验法则（对于 Javascript 和一般编程）尽量避免将变量放在全局范围内，但将它们的生命限制在尽可能小的范围内，这将在很多方面有所帮助：它将减少变量名称冲突，同时提高性能（变量仅在必要时存在）和代码的可读性（更容易跟踪值）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T22:22:25.303

路线服务是异步的，您不能从中返回任何内容，您需要在回调例程中使用从服务器返回的数据。

您正在使用 Google Maps API v2 语法；该 API 已弃用，并且在 2013 年 5 月 19 日之后将不再受支持。强烈建议不要使用该 API 版本进行新开发。

重新编写代码以使用[Google Maps API v3](https://developers.google.com/maps/documentation/javascript/tutorial)

# web-applications - 录音 Web 应用程序的选项

> ID：13739616
> 
> 赞同：0
> 
> 时间：2012-12-06T08:27:26.630
> 
> 标签：web-applications, voice-recording

我需要创建一个允许用户录制语音并将其保存在服务器上的 Web 应用程序。

我在 Google 和 StackOverflow 上四处寻找选项，但似乎我找到的选项都不合适：Flash - 似乎快要死了。Java 小程序 - 已经死了。HTML 5 - 为时过早。尽管正在取得进展，但没有多少浏览器实现了录音功能，而那些仍在尝试的浏览器。

所以看来我要么必须选择一个死的或垂死的平台，要么选择一个尚未完全启动并运行的平台。

或者还有其他我错过的选择吗？也许我误判了 Flash 和/或 Java 小程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T08:31:55.153

Flash 在移动设备上已死。在台式机上，它实际上做得很好，安装基数约为 95%。[http://en.wikipedia.org/wiki/Adobe_Flash#Desktop_operating_systems](http://en.wikipedia.org/wiki/Adobe_Flash#Desktop_operating_systems)

与 HTML5 未来几年的采用率相比，它的采用率要高得多。

由于您更喜欢 HTML5，请查看 Flash 的外部接口。它将允许您使用 Javascript 编写大部分应用程序，并且仅在必要时使用 Flash（HTML5 落后的地方）。[http://active.tutsplus.com/tutorials/actionscript/javascript-and-actionscript-converse-introduction-to-externalinterface/](http://active.tutsplus.com/tutorials/actionscript/javascript-and-actionscript-converse-introduction-to-externalinterface/)

祝你好运！

# bash - 在 ClearCase 中查找已签出版本的父级

> ID：13739619
> 
> 赞同：1
> 
> 时间：2012-12-06T08:27:57.057
> 
> 标签：bash, clearcase

我想从 Bash 脚本中找到 ClearCase 中签出文件的父级。例如，如果我输入，`ct ls`我会得到：

```
$ ct ls some_file
some_file@@/main/some/branch/CHECKEDOUT from some_file@@/main/some/branch/6   Rule: CHECKEDOUT 
```

我想`some_file@@/main/some/branch/6`从脚本中找到父版本 ( )。当然，我可以使用 awk 或类似的文本处理工具，但我认为这是一个非常丑陋的解决方案，并且可以很容易地破坏更多奇特的文件名（例如，如果它有空格或字符串“from”）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T08:45:54.563

使用(cleartool describe)的 " `%PSn`" 格式[`fmt_ccase`](http://publib.boulder.ibm.com/infocenter/cchelp/v7r0m1/index.jsp?topic=/com.ibm.rational.clearcase.cc_ref.doc/topics/fmt_ccase.htm)

```
 cleartool describe -fmt "%PSn" some_file@@/main/some/branch/CHECKEDOUT

 %PSn 
```

> **Predecessor Short name** :
> 对于一个版本，前一版本的版本 ID 的缩写形式：`branch-pathname/version-number`。
> 对于其他对象，空字符串。

请注意，对于`@@/main/0`（[所有元素、文件或目录都有](https://stackoverflow.com/questions/5309333/why-i-only-get-a-clearcase-version-0/5309714#5309714)），它也将返回一个空字符串。

* * *

[OP petersohn](https://stackoverflow.com/users/294813/petersohn) 提到[它](https://stackoverflow.com/questions/13739619/finding-parent-of-checked-out-version-in-clearcase/13739872#comment18924036_13739872)类似于：

```
cleartool describe -short -pred some_file@@/main/some/branch/CHECKEDOUT 
```

# performance - 2 通道法线贴图的性能成本和缺点是什么？

> ID：13739622
> 
> 赞同：0
> 
> 时间：2012-12-06T08:28:14.827
> 
> 标签：performance, fragment-shader, stage3d, normals, agal

我正在做的是使用法线贴图来照亮 2D 精灵。最初我打算在图像红色通道中使用凹凸/高度图，并使用其他两个通道来存储其他信息。我的想法是，因为我知道法线贴图上的任何法线总是在 [0 .. 1] 范围内具有 z 值，我可以从蓝色通道中排除此信息并根据 x 的长度计算 z 值和 y 值。所以我试了一下，它似乎到目前为止工作，它看起来几乎和原来的一样。

我的问题是附加说明的费用是多少？有一些额外的乘法和加法以及另外两个 sqrt 调用。

这是使用的片段着色器：

```
// Input >
//   fc0 : Color to normal conversion factor - <2, 1, 0, 0>
//   fc1 : Light - <lightDirection.x, lightDirection.y, lightDirection.z>
//   v0  : texture coordinates - <u, v>
//   fs0 : color texture
//   fs1 : normal map

// Sample normal map (fs1) at coordinates (v0) into temp register (ft0)
tex ft0 v0 fs1 <2d,nearest>
// Convert color values [0, 1] to normal values [-1, 1]
mul ft0 ft0 fc0.xxx
sub ft0 ft0 fc0.yyy

//
// The code below is used to calculate the z value from the
// 2D x/y normal values
// 

// <Start normal z calculation>

// (ft0) should now hold a 2D vector - first find its length
// - length = sqrt(x * x + y * y)
mul ft1.x ft0.x ft0.x // x * x
mul ft1.y ft0.y ft0.y // y * y
add ft1.z ft1.x ft1.y // (x * x + y * y)
sqt ft1.z ft1.z // ft1.z = sqrt(x * x + y * y)
// Now using the length of the 2D normal find the z value
// - z = sqrt(1 - length * length)
mul ft1.z ft1.z ft1.z // length * length
sub ft1.z fc0.y ft1.z // 1 - length * length
sqt ft1.z ft1.z // ft1.z = sqrt(1 - length * length)
// Now move the z value into temp register (ft0) along with the normal x and y value
mov ft0.z ft1.z

// <End normal z calculations>

// The rest of the shader left out 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T08:11:03.713

sqrt 是非常缓慢的操作。所以你应该尽可能避免它。实际上，在法线贴图之前是凹凸贴图，只有灰度图像表示高度。在这种情况下，法线基于相邻像素计算。但是，当硬件内存长大后，就不值得节省了。但是在手机上

# perl - perl open：如何将标准错误转发到标准输出？

> ID：13739625
> 
> 赞同：1
> 
> 时间：2012-12-06T08:28:32.050
> 
> 标签：perl, stdout, stderr

> **可能重复：**
> [如何在 Perl 中同时捕获标准错误、标准输出和退出代码？](https://stackoverflow.com/questions/109124/how-do-you-capture-stderr-stdout-and-the-exit-code-all-at-once-in-perl)
> [在将 STDOUT 管道传输到文件时捕获 STDERR 的输出](https://stackoverflow.com/questions/9132804/capturing-the-output-of-stderr-while-piping-stdout-to-a-file)

我正在使用以下代码来执行一个过程：

```
open( my $proch, "-|", $command, @arguments ); 
```

不幸的是，我只会阅读*stdout*。但我也想阅读*标准错误*。

Stderr 重定向导致以下错误：

```
open( my $proch, "2>&1 -|", $command, @arguments );
>>> Unknown open() mode '2>&1 -|' at file.pl line 289 
```

如何将*stderr*转发到*stdout*？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T08:36:46.297

`2>&1`是 shell 命令的一部分，但您没有执行 shell。

```
open( my $proch, "-|", 'sh', '-c', '"$@" 2>&1', '--', $command, @arguments ); 
```

如果你想避免产生额外的进程，你可以使用以下：

```
use IPC::Open3 qw( open3 );

open local *CHILD_STDIN, '<', '/dev/null') or die $!;
my $pid = open3(
   '<&CHILD_STDIN',
   \local *PROCH,
   undef, # 2>&1
   $command, @arguments
);

while (<PROCH>) { ... }

waitpid($pid, 0); 
```

# mysql - 使用 MySQL 测试叶节点

> ID：13739627
> 
> 赞同：1
> 
> 时间：2012-12-06T08:28:40.857
> 
> 标签：mysql, stored-procedures

被困在这个问题上大约 2 个小时，我有这个过程，它需要一个边和一个集合并返回一个布尔值`leaf`来测试某个节点是否是叶子。但是，该测试仅适用于左侧节点，一旦进入第二个循环，它就会崩溃，我无法弄清楚原因：

```
CREATE  PROCEDURE `is_leaf`(IN `edge` VARCHAR(12), IN `eset` VARCHAR(512), OUT `leaf` INT)
BEGIN

declare lnode char(6) default substring_index(edge, ':', 1); -- left node of edge.
  declare rnode char(6) default substring_index(edge, ':', -1); -- right node of edge.
  declare cedge char(12);
  declare lnode_in_cedge char(6);
  declare rnode_in_cedge char(6);
  declare found int default 1;
   declare OGset varchar(512) default '';
  SET OGset= concat('',eset);

--CHECKS LEFT NODE OF EDGE AGAINST ALL EDGES IN SET
WHILE length(eset)!=0 AND found!=2 DO
set cedge = substring_index(eset, ',', 1);
SET lnode_in_cedge= substring_index(cedge, ':', 1);
SET rnode_in_cedge= substring_index(cedge, ':', -1);

--IF LEFT NODE IS FOUND TO HAVE COMMON VERTEX, THE SAME TEST IS RUN FOR THE RIGHT ONE
IF lnode= lnode_in_cedge OR lnode= rnode_in_cedge THEN
    BEGIN
        SET leaf=false;

    SET eset= OGset;
    WHILE length(eset)!=0 AND found !=2 DO
    set cedge = substring_index(eset, ',', 1);
    SET lnode_in_cedge= substring_index(cedge, ':', 1);
    SET rnode_in_cedge= substring_index(cedge, ':', -1);
        IF rnode= lnode_in_cedge OR rnode= rnode_in_cedge THEN
            BEGIN
            SET leaf= false;
            SET found= 2;
            END;
         END IF;
         SET eset  = REMOVE_FIRST(eset);
     END WHILE;
     END;
END IF;

SET eset  = REMOVE_FIRST(eset);
END WHILE;

IF found=1 THEN
SET leaf=true;
END IF;

END 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T09:25:56.153

我通过打破循环让它工作，如果有人找到以前的代码不起作用的原因，请告诉我。我不太了解 MySQL 中的嵌套循环。这是工作代码：

```
CREATE PROCEDURE `is_leaf`(IN `edge` VARCHAR(12), IN `eset` VARCHAR(512), OUT `leaf` INT)
BEGIN

declare lnode char(6) default substring_index(edge, ':', 1); -- left node of edge.
  declare rnode char(6) default substring_index(edge, ':', -1); -- right node of edge.
  declare cedge char(12);
  declare lnode_in_cedge char(6);
  declare rnode_in_cedge char(6);
  declare found int default 1;
  declare OGset varchar(512) default '';
  SET OGset= concat('',eset);

WHILE length(eset)!=0  DO
set cedge = substring_index(eset, ',', 1);
SET lnode_in_cedge= substring_index(cedge, ':', 1);
SET rnode_in_cedge= substring_index(cedge, ':', -1);
IF lnode= lnode_in_cedge OR lnode= rnode_in_cedge THEN
    set found=0;
END IF;

SET eset  = REMOVE_FIRST(eset);
END WHILE;

IF found=0 THEN
BEGIN
    SET eset= OGset;
    WHILE length(eset)!=0  DO
    set cedge = substring_index(eset, ',', 1);
    SET lnode_in_cedge= substring_index(cedge, ':', 1);
    SET rnode_in_cedge= substring_index(cedge, ':', -1);
        IF rnode= lnode_in_cedge OR rnode= rnode_in_cedge THEN
            BEGIN
            SET leaf= false;
            SET found= 2;
            END;
         END IF;
         SET eset  = REMOVE_FIRST(eset);
     END WHILE;
END;
END IF;

IF found!=2 THEN
SET leaf=true;
END IF;

END 
```

# eclipse - Eclipse 中的 JSF 项目不能与 Websphere 一起使用

> ID：13739628
> 
> 赞同：0
> 
> 时间：2012-12-06T08:28:42.977
> 
> 标签：eclipse, jsf, websphere, web.xml

我是 JSF 的新手，所以我尝试使用 Websphere 8 在 Eclipse 中开发简单的 JSF 项目，但出现以下错误：

```
Error 404: com.ibm.ws.webcontainer.servlet.exception.NoTargetForURIException: No target servlet configured for uri: /KeyValue/index.jsf 
```

我观察到，当我添加以下罐子时，我得到了这个 404 错误。

1.  jsf-api
2.  jsf-impl
3.  jstl-api-1.2
4.  jstl-impl-1.2

这是我的 web.xml 的外观：

```
<?xml version="1.0" encoding="UTF-8"?>
    <web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" version="2.5">
      <servlet>
        <servlet-name>Faces Servlet</servlet-name>
        <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
      </servlet>
      <servlet-mapping>
        <servlet-name>Faces Servlet</servlet-name>
        <url-pattern>*.jsf</url-pattern>
      </servlet-mapping>
      <context-param>
        <param-name>javax.faces.PROJECT_STAGE</param-name>
        <param-value>Development</param-value>
      </context-param>
      <welcome-file-list>
        <welcome-file>index.jsp</welcome-file>
        <welcome-file>index.html</welcome-file>
      </welcome-file-list>
    </web-app> 
```

web.xml 文件有问题吗？我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T11:20:01.450

Websphere 作为一个成熟的 Java EE 应用程序服务器，已经带有 JSF 和 JSTL 开箱即用。当定位准系统 servlet 容器（如 Tomcat 或 Jetty）时，您不需要像必要那样在 Web 应用程序中提供它们。这些问题很可能是由 Websphere 提供的 JSF JAR 与 webapp 提供的 JSF JAR 之间的版本不兼容引起的，导致`FacesServlet`无法启动。如果没有功能`FacesServlet`，`*.jsf`URL 将不再被识别，因此最终为 404。但是，有关`FacesServlet`启动问题的更多详细信息应该在服务器中 webapp 的启动日志中可见。

因此，从您的 Web 应用程序中删除这些 JSF 和 JSTL JAR，它应该可以按预期工作。

# android - 接收广播时恢复应用程序

> ID：13739635
> 
> 赞同：0
> 
> 时间：2012-12-06T08:28:56.093
> 
> 标签：android

我有一个具有广播接收器的应用程序 A。此接收器侦听我从另一个应用程序 B 获得的某些广播。

现在，当我收到来自应用程序 BI 的某个广播时，我想打开我的应用程序 A。
目前，我在应用程序 A 的广播接收器中有以下代码：

```
 @Override
    public void onReceive(Context context, Intent intent) {
     if(intent.getAction().equals("startApplication"))
        {
            Intent LaunchIntent = mContext.getPackageManager().getLaunchIntentForPackage("packageName application A");
            context.startActivity(LaunchIntent);
        }
    } 
```

但是这段代码总是启动应用程序 A 的主要活动。
当我的应用程序已经在后台打开时，我想恢复应用程序而不是从主要活动开始。

就像您在应用程序中按主页并使用最近的应用程序返回它一样。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T08:39:07.097

使您的主要活动`singleInstance`与`manifest`应用程序的`activity`级别一样

# ruby - Ruby 1.9.3 不覆盖 1.9.1 gems

> ID：13739638
> 
> 赞同：0
> 
> 时间：2012-12-06T08:29:04.153
> 
> 标签：ruby, rvm

我使用的是 Ubuntu 12.04，我有系统默认的 ruby​​ 1.8 和 1.9.1 和 1.9.3。问题是我确实设法切换到 1.9.3 但不是 1.9.3 的 gem，默认情况下系统使用 1.9.1 gem。这在使用依赖于 1.9.3 的 rails 和其他 ruby​​ 库时会导致很多错误。

我试着用

sudo update-alternatives --config ruby

sudo update-alternatives --config gems

它没有让我选择 1.9.3 gems，而只是设法切换了 ruby​​ 解释器。我尝试了 rbenv 和 rvm 但没有用。在使用导轨和鞋子时，我遇到了很多与 1.9.1 的 gem 相关的错误。

此外，当我将开关与 rvm 一起使用时，它会要求我安装已经安装的 ruby​​ 1.9.3，但不会显示 rvm 和 rbenv。

这个系统上的红宝石有问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T15:47:41.570

您可能会将兼容性级别与真正的 ruby​​ 版本混淆，所有 ruby​​ 1.9.x 的路径中都将包含 1.9.1 - 这是预期的行为。

使用 rvm 你可以`mount`系统安装红宝石：

```
rvm automount 
```

或者：

```
rvm mount /path/to/bin/ruby193 -n system193 
```

但是那些系统 ruby​​ 可能有一些额外的配置，可能使它们无法与 RVM 很好地配合使用，您最好只安装新的 ruby​​：

```
rvm get head
rvm requirements # make sure to read it
rvm use 1.9.3 --install 
```

如果您关心性能并珍惜时间，您可以在更多内核上使用 falcon 补丁和编译：

```
rvm install 1.9.3 --patch falcon -j 3
rvm use 1.9.3 
```

# r - 如何在 grid.text() 中使用 Times new Roman 字体？

> ID：13739643
> 
> 赞同：1
> 
> 时间：2012-12-06T08:29:27.030
> 
> 标签：r, fonts

我正在绘制一个堆积条形图，我需要在 Times New Roman 字体中写下图例和标题。默认情况下，它是 Arial 字体。我怎样才能改变它？

```
grid.text("title", x = 0.33, y = 1, just = c("left", "top"),
           gp = gpar(fontsize = 18, fontface = "bold")) 
```

我又使用了一个参数`fontfamily = "Times"`，但我收到错误消息。如何使用 Times 字体？

问候

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-06T08:45:09.790

尝试使用`font=`而不是`fontfamily=`.

有关详细信息，请参阅奥克兰大学 Paul Murrell的博客，[*在 R 中指定字体。*](http://www.stat.auckland.ac.nz/%7Epaul/R/fonts.html)另请参阅James Keirstead[*的更改 R 图中的字体。*](https://www.r-bloggers.com/changing-the-fonts-in-r-plots/)

这个问题类似于另一个 SO 问题[**Fonts in R plots**](https://stackoverflow.com/questions/1395323/fonts-in-r-plots)。

# jquery - jquery++ 拖放函数

> ID：13739646
> 
> 赞同：0
> 
> 时间：2012-12-06T08:29:38.180
> 
> 标签：jquery

嗨，我试图提出一个尖锐的问题。

我想使用这个++代码：http: [//jsfiddle.net/donejs/3NkZM/light/](http://jsfiddle.net/donejs/3NkZM/light/)

我希望该框变为绿色表示正确，红色表示不正确。

即我拖是正确的，拖我是不正确的

我尝试了几种不同的方法，例如：

```
 $('.drag').on('draginit', function(ev, drag) {
        // Create a ghost for this drag
        drag.ghost();
    });

    $('.drop').on({

        'dropover' : function(ev, drop, drag) {
            $(this).addClass('highlight');
        },
        'dropout' : function(ev, drop, drag) {
            $(this).removeClass('highlight');
        },
        'dropon' : function(ev, drop, drag) {
            if('#correct') {
                $(this).addClass('green')   
            }
            else {
                $(this).addClass('red') 
            };
        };
}); 
```

谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T08:44:27.220

HTML：（你必须说哪个是正确的）

```
<div class="drag correct">
    I am a drag
</div>

<div class="drag">
    Drag me, too
</div>

<div class="drop">
    Drop zone
</div> 
```

JS：（您必须检查被删除的元素是否为“.correct”，如果为真，则向 dropzone 添加一个“正确”类）

```
$('.drag').on('draginit', function(ev, drag) {
    // Create a ghost for this drag
    drag.ghost();
});

$('.drop').on({
    'dropover' : function(ev, drop, drag) {
        $(this).addClass('highlight');
    },
    'dropout' : function(ev, drop, drag) {
        $(this).removeClass('highlight');
    },
    'dropon' : function(ev, drop, drag) {
        $(this).html('Dropped: ' + drag.element.html());
        $(this).removeClass('highlight');

        $(this).addClass('dropped');
        if($(drag.element).is('.correct')) {
            $(this).addClass('correct');
        } else {
            $(this).removeClass('correct');
        }
    }
}); 
```

添加到 CSS（为 dropzone 着色）：​</p>

```
.dropped {
    background-color: red;
}

.dropped.correct {
    background-color: green;
}
​ 
```

演示：http: [//jsfiddle.net/3NkZM/273/](http://jsfiddle.net/3NkZM/273/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T09:38:45.227

您也可以尝试 JQuery Draggable。
只是一个样品展示，您可以根据需要制作。
[演示](http://jsfiddle.net/pintufrancis/n6tCQ/4/)

**注意：除非您添加****JQuery Touch Punch**插件，否则 Dragabbles 将无法在触摸屏设备中使用。

**HTML：**

```
<div id="right_ans" class="drag">
  I am a drag
</div>

<div id="wrong_ans" class="drag">
  Drag me, too
</div>
<div id="drop_target" class="drop">
  Drop zone
</div> 
```

**CSS：**

```
body{
font-family: Helvetica,"Lucida Grande","Lucida Sans",Arial,Helvetica,sans-serif;
}

div {
  padding: 5px;
  margin: 10px;
}

.drag {
  cursor: pointer;
  border: 1px dotted red;
  width: 150px;
  float: left;
}

.drop {
  clear: both;
  border: 1px solid gray;
  width: 200px;
  height: 100px;
  background-color: #EFEFEF;
} 
```

**JS：**

```
$("#right_ans").draggable({
  revert: 'invalid',
  cursor: "move",
  drag: function() {
    $("#right_ans").addClass('dragged');
  }
});

$("#wrong_ans").draggable({
  revert: 'invalid',
  cursor: "move",
  drag: function() {
      $("#wrong_ans").addClass('dragged');
  }
});

$("#drop_target").droppable({
  accept: "#right_ans, #wrong_ans",
  drop: function() {
    if ($('#right_ans').hasClass('dragged')) {
        $(".drop").css('background-color', 'green');
        $('#right_ans').removeClass('dragged')
    }
    if ($('#wrong_ans').hasClass('dragged')) {
        $(".drop").css('background-color', 'red');
        $('#wrong_ans').removeClass('dragged')
    }
  }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T09:11:11.803

或者测试内容

```
var answers = {"I am a drag":"green","Drag me, too":"red"}

'dropon' : function(ev, drop, drag) {
    var answer = drag.element.html();
    $(this).html('Dropped: ' + answer);
    $(this).removeClass('highlight');
    $(this).addClass(answers[$.trim(answer)]);
} 
```

[演示](http://jsfiddle.net/mplungjan/ztqs3/)

# .htaccess - mod_rewrite 重写时不改变链接

> ID：13739648
> 
> 赞同：1
> 
> 时间：2012-12-06T08:29:43.140
> 
> 标签：.htaccess, mod-rewrite, url-rewriting

我的 .htaccess 有以下内容

```
RewriteEngine on
RewriteRule ^page/([^/\.]+)/?$ index.php?page=$1 [L] 
```

当我调用 www.mydomain.com/page/myvalue 时，我得到了正确的结果。为了做到这一点，我需要更改指向我网站的所有链接是否正确？

有没有办法完成相反的操作，即当我调用 index.php?page=$1 将我重定向到 www.mydomain.com/page/myvalue 时？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T08:34:00.843

将此规则添加到您的 .htaccess 中：

```
RewriteCond %{THE_REQUEST} ^[A-Z]{3,}\s/+index\.php\?page=([^\s&]+) [NC]
RewriteRule ^ page/%1? [R=301,L] 
```

# testing - Testng：如何在测试方法中获取所有断言？

> ID：13739656
> 
> 赞同：0
> 
> 时间：2012-12-06T08:30:26.733
> 
> 标签：testing, testng

我正在尝试为使用**TestNG**框架进行的一些测试构建报告。有没有办法让*测试方法*中使用的所有***断言***？

 ** * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T10:49:30.530

AFAIK，不。您可以做的是拥有您定义的断言，您可以在测试中使用它，并且在执行时会增加一些计数器或添加到您可以在报告侦听器中引用的某个集合中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T17:04:09.797

最新版本的 TestNG 允许您创建自己的断言，[详情请点击此处](http://beust.com/weblog/2012/07/29/reinventing-assertions/)。*

# html - 仅将 WebWorkers 用于 LocalStorage？

> ID：13739657
> 
> 赞同：2
> 
> 时间：2012-12-06T08:30:28.523
> 
> 标签：html, local-storage, web-worker

最近，在 CoderWall 上[https://coderwall.com/p/rkls8g](https://coderwall.com/p/rkls8g)：

> *使用 Web Workers*
> 
> *当涉及到使用 LocalStorage 或 XMLHttpRequest 之类的同步操作时，最好使用工作人员以非阻塞方式完成工作......*

真的有必要吗？对于 AJAX，既然它已经是异步的，那么似乎没有必要引入更多使用 WebWorkers 的开销？

对于 LocalStorage，论据是

> *LocalStorage 的 API 将所有数据直接写入文件系统，因此它必须锁定文件。它是同步完成的*

这真的很慢吗？由于我希望只有 1 个应用程序（您的浏览器）为您的域写入 LocalStorage，它不太可能阻止 isit？LocalStorage 的上限仅为 5MB？我看到写入 LocalStorage 的唯一情况可能是您有多个选项卡/浏览器访问同一个 Web 应用程序并写入大量内容？即便如此，我想它应该被缓存，希望是回写缓存，那么它应该又快了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T06:06:33.307

我相信大多数浏览器都会像内存存储一样[实现网络](http://code.google.com/p/webkit-mirror/source/browse/Source/WebCore/storage/StorageMap.cpp)存储。因此，您不会比使用 web worker 获得性能优势。

要处理多个选项卡/浏览器，您将使用[存储事件](http://www.w3.org/TR/webstorage/#the-storage-event)。

如您所见，localStorage 并不慢，但有时读写不一致。除了使用 IndexedDB 或 WebSQL 之类的事务存储之外，您无能为力。

# jquery - 使用 jQuery 在主干应用程序中更好地重用 json 文件

> ID：13739658
> 
> 赞同：0
> 
> 时间：2012-12-06T08:30:42.100
> 
> 标签：jquery, json, backbone.js

目前我有一个读取 json 文件的基本应用程序。

到目前为止我构建这个的方式是

我有一个调用不同功能的路由器

```
routes: {

        'products/productList' : 'showProducts',
        'products/list/:productID' : 'showProductsList',
        'products/view/:productID/:productTypeID' : 'showProductsView'

}

showProducts:function(){

 var productList=new Products();
 var productListView=new ProductListView({collection:productList});
 productListView.bind('renderCompleted:Products',this.changePage,this);

 productListView.update();

}

showProductsList:function(productID){

 var productTypeList=new ProductTypeCollection();
 var productTypeListView=new ProductTypeListView({collection:productTypeList});
 productTypeListView.bind('renderCompleted:ProductsType',this.changePage,this);
 productTypeListView.update(productID);
} 
```

所以我为产品创建了一个模型

```
var Product=Backbone.Model.extend({

    defaults:{
        id:"",
        name:'',
        longName:'',
        productID:''
    }
});

return Product; 
```

和它的收藏

```
var Products=Backbone.Collection.extend({
 model:Product,

 fetch:function(){
        var self=this;
        var tmpItem;

    var jqxhr = $.getJSON("data/product.json")
          .success(function(data, status, xhr) { 

    $.each(data.data.productTypeList, function(i,item){
              tmpItem=new Product({id:item.id,name:item.name,longName:item.longName, productID:i});
              self.add(tmpItem);

            });
            //dispatch customized event
            self.trigger("fetchCompleted:Products");
          })
          .error(function() { alert("error"); })
          .complete(function() {
                console.log("fetch complete + " + this);
          });             
      }
});

return Products; 
```

然后是产品类型的模型

```
var ProductType=Backbone.Model.extend({
//default attributes 
    defaults:{
        id:"",
        name:'',
        productID:'',
        productTypeID:''
    }
});

return ProductType; 
```

拥有自己的收藏

```
var ProductsType=Backbone.Collection.extend({
 model:ProductType,

 fetch:function(){
        var self=this;
        var tmpItem;

    var jqxhr = $.getJSON("data/product.json")
          .success(function(data, status, xhr) { 

    $.each(data.data.productTypeList, function(i,item){
              tmpItem=new Product({id:item.id,name:item.name,longName:item.longName, productID:i});
              self.add(tmpItem);

            });
            //dispatch customized event
            self.trigger("fetchCompleted:ProductsType");
          })
          .error(function() { alert("error"); })
          .complete(function() {
                console.log("fetch complete + " + this);
          });             
      }
});

return ProductsType; 
```

这些人各有各的看法

```
 var ProductListView = Backbone.View.extend({

template: _.template(productViewTemplate),

update:function(){
  //set callback of the event "fetchCompleted:Products" 
  this.collection.bind('fetchCompleted:Products',this.render,this);
  this.collection.fetch();
},

render: function(){
  this.$el.empty();
  //compile template using the data fetched by collection
  this.$el.append(this.template({data:this.collection.toJSON()}));
  this.trigger("renderCompleted:Products",this);
  return this;
}
});

return ProductListView; 
```

和 productType 视图

var ProductListTypeView = Backbone.View.extend({

```
template: _.template(productViewTypeTemplate),

update:function(productID){
  //set callback of the event "fetchCompleted:Products" 
  this.collection.bind('fetchCompleted:ProductsType',this.render,this);
  this.collection.fetch(productID);
},

render: function(){
  this.$el.empty();
  //compile template using the data fetched by collection
  this.$el.append(this.template({data:this.collection.toJSON()}));
  this.trigger("renderCompleted:ProductsType",this);

  return this;
}
});

return ProductListTypeView; 
```

显然，多次加载同一个 json 文件很疯狂，因为这会减慢应用程序的速度，但我想知道如何在 JSON 文件中找到正确的位置

您可以看到第一个集合获取 data.productTypeList 而第二个集合获取 data.productTypeList[productID] 因为这是从 url 传入的。

当 json 加载时，还设置了触发器来启用视图。

我知道它的结构很糟糕，但欢迎提出一些建议

我猜我需要制作一个包含所有较低级别数据的模型，并将它们添加到一个集合中。

这是最好使用 thge 技术吗？文件？

这是一个json文件的例子

[http://demo.stg.brightonconsulting.net.au/templates/tests/backboneJQMProducts/data/product.json](http://demo.stg.brightonconsulting.net.au/templates/tests/backboneJQMProducts/data/product.json)

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T09:55:30.650

好奇为什么你在你的收藏中重写了 fetch 方法？如果需要对文件中的数据进行相应的操作，只需使用 Backbone 的[parse](http://backbonejs.org/#Collection-parse)方法。根据您的 json 文件的大小，我将获取 json 文件一次并将其存储在应用程序加载的对象中。从那里我将引用该对象并将相关数据传递到我的集合中。这样，您不必在每个视图上调用 fetch。只需渲染视图，因为您的数据已经加载。

# asp.net - 如何将一个 aspx 的值传递给另一个 aspx 页面

> ID：13739661
> 
> 赞同：0
> 
> 时间：2012-12-06T08:30:46.963
> 
> 标签：asp.net

```
<form id="form1" runat="server">
<div>
    <asp:TextBox ID="txtFirstName" runat="server">
    </asp:TextBox>
    <asp:TextBox ID="txtLastName" runat="server">
    </asp:TextBox>

     <asp:Button ID="Button1" runat="server" Text="RedirectPage" PostBackUrl="~/TestAjaxControls.aspx?FirstName=txtFirstName&LastName=txtLastName"  />
</div>

</form> 
```

我需要访问下一页的名字和姓氏值

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T08:35:01.553

您可以使用[PreviousPage](http://msdn.microsoft.com/en-us/library/system.web.ui.page.previouspage.aspx)属性。或将值保存到[Session](http://msdn.microsoft.com/en-us/library/ms178581%28v=vs.100%29.aspx)

**上一页**

要查找上一页的控件，可以使用 FindControl 函数

```
TextBox txtFirstName = Page.PreviousPage.FindControl("txtFirstName") as TextBox; 
```

**会议**

将控制值保存到会话中：

```
Session["FirstName"] = txtFirstName.Text; 
```

您可以从任何页面获取会话值：

```
string firstName = Session["FirstName"].ToString(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T08:38:05.673

您可以将它们放在查询字符串中。

```
Response.Redirect("~/nextpage.aspx?firstName=" + txtFirstName.Text + "&lastName=" + txtLastName.Text); 
```

您将需要添加验证。

我建议避免使用会话，因为这样可能会过度杀伤力，但是如果这样做，则必须正确清除会话。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T08:42:15.477

或者您可以使用 QueryString 中的参数在按钮 OnClick 上进行重定向，就像您尝试过的那样：

```
<asp:Button ID="Button1" runat="server" Text="RedirectPage" OnClick="Redirect_Click" /> 
```

和：

```
protected void Redirect_Click(object sender, EventArgs e)
{
    string firstN =txtFirstName.Text;
    string lastN =txtLastName.Text;
    string redirectUrl = String.Format("~/TestAjaxControls.aspx?FirstName={0}&LastName={1}", firstN, lastN);
    Response.Redirect(redirectUrl);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-06T08:35:41.093

来自通用代码的属性：

```
public class Employee
{
    string _name;

public string Name
{
get
{
    // Return the actual name if it is not null.
    return this._name ?? string.Empty;
}
set
{
    // Set the employee name field.
    this._name = value;
}
}
} 
```

或者使用 Session 一个非常方便和简单的方法

# java - 我如何在jsp中获取java持有者类值

> ID：13739665
> 
> 赞同：0
> 
> 时间：2012-12-06T08:30:55.043
> 
> 标签：java, jsp, servlets

我在我的 Contexte 类中设置了值。下面是我的jsp页面代码的一部分

```
<%@page language = "java"%>
<%@page session="true" import="collections.*"%>
<%
JspBeansCollection jspbeans = new JspBeansCollection((Contexte)request.getAttribute("ctx"));
session.putValue("jspbeans",jspbeans);
...
%> 
```

# r - 'row.names' 长度无效

> ID：13739666
> 
> 赞同：4
> 
> 时间：2012-12-06T01:12:08.373
> 
> 标签：r

我正在尝试使用 TraMineR 的（版本 1.8.4）seqdef-funciton 来定义序列对象，但我总是收到这个对我来说毫无意义的错误消息：Error in `row.names<-.data.frame`( `*tmp*`, value = value) : invalid 'row.names'长度

我的代码输入是：

```
sample.sts <- seqdef(sample, var=c("jan2005", "feb2005", "mar2005", "apr2005", "may2005", 
"jun2005", "jul2005", "aug2005", "sep2005", "oct2005", "nov2005", "dec2005"),  
alphabet=c("Employee (full-time)", "Employee (part-time)", 
"Self-employed (full-time)", "Self-employed (part-time)", "unemployed", "Retired", 
"Student", "Other inactive", "Compulsory military service"), 
states=c("EF", "EP", "SF", "SP", "UE", "RE", "ST", "IA", "MS"), id="pidc") 
```

数据框“样本”如下所示：

```
 pidc           jan2005   feb2005    ...    dec2005   sex   edufirst   age05   
--------------------------------------------------------------------------    
1\.  150163920001         .         .    ...         .    1          5      62   
2\.  211518110003         .         .    ...         .    2          2      17   
3\.  170295160002         .         .    ...         .    2          1      47   
4\.  240386550002         2         2    ...         2    2          2      50   
5\.  320099920001         .         .    ...         .    1          3      38   
--------------------------------------------------------------------------    
6\.  200167850001         .         .    ...         .    1          5      39  
7\.  340401190002         6         6    ...         6    1          3      61  
8\.  180501260002         .         .    ...         .    1          3      29  
9\.  230083560001         .         .    ...         .    1          3      61  
10\. 240335270002         3         3    ...         3    2          3      30 
```

整个输出说：

> [!] 在州代码中发现 '-' 字符，不推荐
> [>] 在序列数据中发现缺失值 ('NA')
> [>] 准备 3266 个序列
> [>] 用 '%' 编码 void 元素，用 '* 编码缺失值'
> [!] 序列索引：1,2,3,...
> [>] 状态编码：
> [字母] [标签] [长标签]
> 1 员工（全职） EF EF
> 2 员工（兼职）​​ EP
> 3 个体经营者（全职） SF
> 4 个体经营者（兼职） SP SP
> 5 失业 UE UE
> 6 退休 RE RE
> 7 学生 ST ST
> 8 其他不活跃的 IA IA
> 9 义务兵役 MS MS
> [>] 数据集中的 3266 个序列
> [>] 最小/最大序列长度：12/12
> Fehler in `row.names<-.data.frame`( `*tmp*`, value = value) ：
> 无效的“row.names”长度

我在重新标记没有“-”的状态后重试了它，这不会影响错误。也许，有人可以帮助我并知道是什么导致了这个错误？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-06T09:23:30.243

seqdef 的“id”参数应该是一个向量，每个序列包含一个条目（即，id 向量的长度应该等于序列的数量）。尝试使用 id=as.character(sample$pid)。您也可以尝试 id=sample$pid （不带 as.character）

```
sample.sts <- seqdef(sample, var=c("jan2005", "feb2005", "mar2005", "apr2005", "may2005", "jun2005", "jul2005", "aug2005", "sep2005", "oct2005", "nov2005", "dec2005", "jan2006", "feb2006", "mar2006", "apr2006", "may2006",  "jun2006", "jul2006", "aug2006", "sep2006", "oct2006", "nov2006", "dec2006",  "jan2007", "feb2007", "mar2007", "apr2007", "may2007",  "jun2007", "jul2007", "aug2007", "sep2007", "oct2007", "nov2007", "dec2007", "jan2008", "feb2008", "mar2008", "apr2008", "may2008", "jun2008", "jul2008", "aug2008", "sep2008", "oct2008", "nov2008", "dec2008"),  alphabet=c("Employee (full-time)", "Employee (part-time)", "Self-employed (full-time)", "Self-employed (part-time)", "unemployed", "Retired", "Student", "Other inactive", "Compulsory military service"), states=c("EF", "EP", "SF", "SP", "UE", "RE", "ST", "IA", "MS"), d=as.character(sample$pid)) 
```

数据中的状态与字母表参数之间存在一些不匹配，因为“-”已被“.”替换。您可能应该更改字母参数（尝试使用 seqstatl 函数找出数据中存在哪些状态标签）。

# .net - 我可以在 Powershell 中的 myModule.MyFunction() 等导入模块中显式调用函数吗？

> ID：13739674
> 
> 赞同：0
> 
> 时间：2012-12-06T08:32:07.720
> 
> 标签：.net, powershell, module

如果我已将 moduleFoo 导入到我的脚本中，其中有一个函数 Bar()。

我可以以某种方式调用这个函数吗：

```
moduleFoo.Bar 
```

代替

```
Bar 
```

以便阅读脚本的人可以理解这个 Bar 是从哪个模块调用的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T08:42:52.563

您可以给您的函数名称，如：

```
moduleFoo.Bar # prefixing each function in your module with the module name + . 
```

但这不尊重函数或 cmdlet (verb-noum) 的标准 powershell 命名约定。

您还可以创建以函数/cmdlet 为前缀的别名`modulefoo.`

如果您只需要知道函数/cmdlet 所属的模块的名称，您可以使用：

```
(gcm bar).Modulename 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T12:08:06.337

如果您使用 -AsCustomObject 开关导入模块，则可以将其称为 $moduleFoo.Bar ：

```
$moduleFoo = Import-Module moduleFoo -AsCustomObject
$moduleFoo.Bar 
```

另一种选择是使用命令全名 (module\command) 来调用它：

```
PS> moduleFoo\Bar 
```

# windows - exe在C# windows服务中运行

> ID：13739681
> 
> 赞同：4
> 
> 时间：2012-12-06T08:32:25.233
> 
> 标签：windows, service

我正在使用 c# windows 服务编写。当它正常工作时以这种方式运行。

```
bool processIsRunning(string process)
{
    return (System.Diagnostics.Process.GetProcessesByName(process).Length != 0);
}     
if (!processIsRunning("notepad"))
{
    Process.Start("notepad.exe");
} 
```

当代码不以这种方式工作时。

```
StreamReader read = new StreamReader(Environment.GetEnvironmentVariable("appdata") + "\\path.txt");
string path = oku.ReadLine();
string processname = Path.GetFileName("notepad");
if (processIsRunning(processname) == false)
{
    System.Diagnostics.Process.Start(path);
} 
```

我正在从注册表中获取程序的名称和程序路径。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T09:54:47.007

您的问题没有多大意义，但是如果您发布的代码是您的整个相关代码，则可能存在一些问题。

你`StreamReader`的被称为`read`，但你正试图从一个名为的流中读取`oku`？

此外，您还没有表明您实际上关闭了`StreamReader, you would be better of using a`using` 块以确保您的 Stream 已正确关闭和处置。

```
using (StreamReader read = new StreamReader(Environment.GetEnvironmentVariable("appdata") + "\\path.txt"))
{
    string path = read.ReadLine();
    string processname = Path.GetFileName("notepad");
    if (processIsRunning(processname) == false)
    {
        System.Diagnostics.Process.Start(path);
    }
} 
```

# c# - C# 事件和线程

> ID：13739697
> 
> 赞同：2
> 
> 时间：2012-12-06T08:33:45.873
> 
> 标签：c#, .net, events

示例程序：在某个文件夹上侦听 FileSystem 事件，并在 Timer 事件触发时将 FileSystem 事件信息打印到控制台。

```
class Program
{
    public static string location = @"D:\TestEvents";
    public static double interval = 15000; 

    public static System.Timers.Timer timer;
    public static List<string> listOfChanges = new List<string>();

    static void Main(string[] args)
    {
        StartWatch();
        StartTimer();

        Console.ReadLine();
    }

    private static void StartWatch()
    {
        FileSystemWatcher Watcher = new FileSystemWatcher();
        Watcher.Path = location;
        Watcher.Created += new FileSystemEventHandler(OnFileCreatedOrDeleted);
        Watcher.Deleted += new FileSystemEventHandler(OnFileCreatedOrDeleted);
        Watcher.EnableRaisingEvents = true;
    }

    static void OnFileCreatedOrDeleted(object sender, FileSystemEventArgs e)
    {
        listOfChanges.Add(String.Format("Change Type: {0}, Name: {1}, Time: {2}", e.ChangeType, e.Name, DateTime.Now));
    }

    private static void StartTimer()
    {
        timer = new System.Timers.Timer();
        timer.AutoReset = false;
        timer.Elapsed += new System.Timers.ElapsedEventHandler(OnTimerEpleased);
        timer.Interval = interval;
        timer.Start();
    }

    private static void OnTimerEpleased(object sender, System.Timers.ElapsedEventArgs e)
    {
        Console.WriteLine("Timer event fired: " + DateTime.Now);
        foreach (var item in listOfChanges)
        {
            Console.WriteLine(item);
        }
        Console.WriteLine();
        listOfChanges.Clear();

        timer.Interval = interval;
        timer.Start();
    }
} 
```

`List<string> listOfChanges`从两个事件处理程序访问相同的存储静态是否安全？我真的不明白事件是如何在下面工作的。它是否创建了一些全局事件处理程序队列并一一运行所有事件处理程序，尽管事件类型如何？或者它为每种事件处理程序类型创建不同的线程？

**编辑：** 我想最好的解决方案是使用`BlockingCollection`with `ConcurrentQueue`，所以应该是这样的：

```
public static BlockingCollection<string> listOfChanges = new BlockingCollection<string>();

static void OnFileCreatedOrDeleted(object sender, FileSystemEventArgs e)
{
    listOfChanges.Add(String.Format("Change Type: {0}, Name: {1}, Time: {2}", e.ChangeType, e.Name, DateTime.Now));
}

private static void OnTimerEpleased(object sender, System.Timers.ElapsedEventArgs e)
{
    Console.WriteLine("Timer event fired: " + DateTime.Now);
    while (listOfChanges.Count > 0)
    {
        string item;
        bool b = listOfChanges.TryTake(out item);
        if (b)
        {
            Console.WriteLine(item);
        }
    }
    Console.WriteLine();

    timer.Interval = interval;
    timer.Start();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T08:50:12.553

泛型 List 不是线程安全的。当遍历 listOfChanges 时（在 OnTimerEpleased 中），您可能会收到错误，并且新条目会向列表中添加一个条目（OnFileCreatedOrDeleted）。请参阅[http://msdn.microsoft.com/en-us/library/6sh2ey19.aspx](http://msdn.microsoft.com/en-us/library/6sh2ey19.aspx)。您可以同步对列表的访问，也可以使用内置的线程安全集合：http: [//msdn.microsoft.com/en-us/library/system.collections.concurrent.aspx](http://msdn.microsoft.com/en-us/library/system.collections.concurrent.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T08:59:40.830

我不确定 FileSystemWatcher 是否使用多个线程，但只是为了安全起见，将您对列表的访问权限包装在一个

```
lock (listOfChanges)
{
    //Code that reads or writes to the listOfChanges.
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T08:59:56.800

您不应该假设，这些事件处理程序将从单个线程调用。FileSystemWatcher 和 Timer 的文档都没有提到这些处理程序是如何被调用的，所以我会在这里选择安全的方式并确保我自己对这个列表的访问是同步的。

# android - 关于启动器意图

> ID：13739699
> 
> 赞同：0
> 
> 时间：2012-12-06T08:33:48.433
> 
> 标签：android, android-intent, onresume, android-navigation

我正在尝试使某个功能*仅*在用户启动时启动，

*   首次打开应用程序，
*   从家里回到应用程序。

但如果用户在应用程序内的活动之间切换，则*不会启动。*

我已经浏览了[这个主题](https://stackoverflow.com/questions/4789300/is-there-any-way-to-distinguish-between-an-android-activity-onresume-from-the-ho)，最好的答案是使用`singleTask`with `onNewIntent()`。因此，如果用户从主页返回应用程序，`onNewIntent`则可以使用传递给它的启动器意图的调用。

但是，这是我的代码：

```
public class AdMobSDK_DFP_Interstitial extends Activity implements AdListener {
    private static final String MOBMAX_INTERSTITIAL_AD_UNIT_ID = "/7732/test_portal7/android_app1_test_portal7/splash_banner_android_app1_test_portal7";
    private DfpInterstitialAd interstitialAd;
    private int num = 0;

    public void onNewIntent(Intent intent){
        super.onNewIntent(intent);
        Log.d("flow", "onNewIntent");

} 
```

如果我在应用程序中的不同活动之间切换，`onNewIntent()`总是调用，这与我从主页返回应用程序相同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T10:11:56.057

您可以做的第一件事是实现自己的“应用程序”对象，并在创建时让它运行所需的功能。

```
public class MyApplication extends Application { 
   @Override
   public void onCreate() { 
        // Call your function
   }
} 
```

只要您的应用程序处于活动状态（任何活动/服务仍在运行），您的应用程序对象就会处于活动状态，但请注意，应用程序对象不会在用户按下“Home”时立即销毁，并且可能会保持活动状态一段时间和用户可以在不调用函数的情况下返回它。

如果您需要此功能作为主要活动的一部分运行，只需在您的应用程序上下文中保存一个标志： `public boolean alreadyDisplayed = false;`然后在您的活动中，`onStart`您可以调用

```
if ((MyApplication)getApplication().alreadyDisplayed ) {
    // Call your function
    (MyApplication)getApplication().alreadyDisplayed = true;
} 
```

** 如果此解决方案对您来说还不够，并且您需要在*每次*从主页显示主要活动时调用您的函数，您将需要做一些不太好的事情......我可以给您的一个建议是实施相同的 Application 对象，但这次带有“打开活动”计数器：

```
public class MyApplication extends Application { 
   public int mActivityCounter = 0;
} 
```

`onStart`然后您可以在应用程序中的每个活动上增加此计数器并在每个活动上减少`onStop`（当然这可以通过实现一个类`MyActivity`并让所有相关活动继承它来完成。然后您可以使用此计数器来了解是否还有其他活动活动已打开。请注意，您必须确保对该计数器的访问是同步的，并根据需要使用它。

我希望这有帮助...

# android - Android 上的 Grenular 权限。为什么不？

> ID：13739700
> 
> 赞同：1
> 
> 时间：2012-12-06T08:33:48.350
> 
> 标签：android

据我了解，没有办法做类似的事情

```
if(have certain permission){
    //do something that requires the permission
} 
```

应用程序可以请求可选权限的位置。例如，只有当用户接受被跟踪时，我才想跟踪我的应用程序的使用情况。但如果他不同意，仍然允许用户下载和使用禁用跟踪的应用程序。这是可能吗 ？如果不是，不支持此功能的原因是什么？

编辑：澄清一下，我指的是 Android 权限，比如使用相机或查看联系人列表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T09:13:59.777

根据[Android文档](http://developer.android.com/guide/topics/security/permissions.html)：

> 应用程序所需的权限是在该应用程序中静态声明的，因此它们可以在安装时预先知道，之后不会更改。

安装应用程序时需要告知用户权限。在运行时询问他们会带来安全风险。胭脂应用程序可以`clickjacking`用来使用户接受权限..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T08:54:10.820

如果您真的在谈论 Android 权限，例如相机。使用：http: [//developer.android.com/guide/topics/manifest/uses-feature-element.html](http://developer.android.com/guide/topics/manifest/uses-feature-element.html)

```
<uses-feature android:name="android.hardware.camera" android:required="false" /> 
```

这意味着该应用程序也可以在没有摄像头的设备上使用。

对于您的示例（要求用户允许跟踪他/她）您可以使用任何您想要的语言来执行此操作。因为您的许可不是`Android permissions`.

只需向用户提出问题，使用`checkbox`. 保存`checkbox`(using `SharedPreferences`) 的值并在您的`if`语句中使用该值。

# php - MySql 查询优化：在线会员订购

> ID：13739701
> 
> 赞同：0
> 
> 时间：2012-12-06T08:33:49.440
> 
> 标签：php, mysql

我有以下查询，它工作正常：

```
SELECT
    a.i_am,a.seeking_a,
    a.zodiac,
    a.my_marital_status,
    a.city,a.country,
    a.my_age,
    a.intrested_in1,
    a.intrested_in2,
    a.intrested_in3,
    a.intrested_in4,
    a.intrested_in5,
    a.intrested_in6,
    a.user_id,
    a.picture_type,
    a.photo,
    a.block_photo,
    r.username,
    u.title,
    u.about_myself
FROM ".TBL_ABOUT_MYSELF." a 
INNER JOIN ".TBLREGISTRATION."  r ON a.user_id=r.ID 
INNER JOIN ".TBLUSERDETAILS." u ON a.user_id=u.user_id 
LEFT JOIN ".TBLSTEPS." s ON a.user_id=s.user_id 
WHERE 1 $condition $gender_condition 
ORDER BY a.user_id 
DESC LIMIT $from,10 
```

获取结果大约需要**0.5 秒。****总共有 1,000,000 个结果。**

现在，如果我再加入一张表（对于用户在线状态：

```
SELECT
    a.i_am,a.seeking_a,
    a.zodiac,
    a.my_marital_status,
    a.city,a.country,
    a.my_age,
    a.intrested_in1,
    a.intrested_in2,
    a.intrested_in3,
    a.intrested_in4,
    a.intrested_in5,
    a.intrested_in6,
    a.user_id,
    a.picture_type,
    a.photo,
    a.block_photo,
    r.username,
    u.title,
    u.about_myself
FROM ".TBL_ABOUT_MYSELF." a
INNER JOIN ".TBLREGISTRATION."  r ON a.user_id=r.ID 
INNER JOIN ".TBLUSERDETAILS." u ON a.user_id=u.user_id 
LEFT JOIN ".TBLSTEPS." s ON a.user_id=s.user_id
LEFT JOIN ".TBL_USER_ONLINE." ON a.user_id=o.user_id  <-- New Line
WHERE 1 $condition $gender_condition
ORDER BY o.user_id DESC, a.user_id DESC LIMIT $from,10  <-- One more order by 
```

现在获取结果需要**12 秒。**

我该如何优化呢？

mysql查询解释：

```
SQL result

Host: localhost
Database: mysite_new
Generation Time: Dec 06, 2012 at 09:09 AM
Generated by: phpMyAdmin 3.2.0.1 / MySQL 5.1.36-community-log
SQL query: EXPLAIN SELECT a.i_am,a.seeking_a,a.zodiac,a.my_marital_status,a.city,a.country,a.my_age,a.intrested_in1,a.intrested_in2,a.intrested_in3,a.intrested_in4,a.intrested_in5,a.intrested_in6,a.user_id,a.picture_type,a.photo,a.block_photo,r.username,u.title, u.about_myself ,o.user_id as online_user_id FROM mysite_about_myself_new a INNER JOIN mysite_user_registration_new r ON a.user_id=r.ID INNER JOIN mysite_user_details_new u ON a.user_id=u.user_id LEFT JOIN mysite_steps_new s ON a.user_id=s.user_id LEFT JOIN mysite_usersonline_new o ON a.user_id=o.user_id WHERE 1 and r.block_by_webmaster='0' and a.approved='1' and s.step1='1' AND a.i_am ='2' AND a.seeking_a = '1' ORDER BY o.user_id DESC LIMIT 0,10; 
Rows: 5

id  select_type table   type    possible_keys   key key_len ref rows    Extra
1   SIMPLE  a   ref user_id,i_am    i_am    2   const   30011   Using where; Using temporary; Using filesort
1   SIMPLE  o   ref user_id user_id 4   mysite_new.a.user_id    2   Using index
1   SIMPLE  s   eq_ref  user_id user_id 4   mysite_new.a.user_id    1   Using where
1   SIMPLE  u   eq_ref  user_id user_id 4   mysite_new.s.user_id    1   Using where
1   SIMPLE  r   eq_ref  PRIMARY PRIMARY 4   mysite_new.u.user_id    1   Using where 
```

**第二次按要求解释：**

```
SQL result

Host: localhost
Database: mysite_new
Generation Time: Dec 06, 2012 at 10:02 AM
Generated by: phpMyAdmin 3.2.0.1 / MySQL 5.1.36-community-log
SQL query: EXPLAIN SELECT a.i_am,a.seeking_a,a.zodiac,a.my_marital_status,a.city,a.country,a.my_age,a.intrested_in1,a.intrested_in2,a.intrested_in3,a.intrested_in4,a.intrested_in5,a.intrested_in6,a.user_id,a.picture_type,a.photo,a.block_photo,r.username,u.title, u.about_myself ,o.user_id as online_user_id FROM mysite_about_myself_new a INNER JOIN mysite_user_registration_new r ON a.user_id=r.ID INNER JOIN mysite_user_details_new u ON a.user_id=u.user_id LEFT JOIN mysite_steps_new s ON a.user_id=s.user_id LEFT JOIN mysite_usersonline_new o ON a.user_id=o.user_id WHERE 1 and r.block_by_webmaster='0' and a.approved='1' and s.step1='1' AND a.i_am ='2' AND a.seeking_a = '1' ORDER BY a.user_id DESC LIMIT 0,10; 
Rows: 5

id  select_type table   type    possible_keys   key key_len ref rows    Extra
1   SIMPLE  a   index   user_id,i_am    user_id 4   NULL    38  Using where
1   SIMPLE  o   ref user_id user_id 4   mysite_new.a.user_id    2   Using index
1   SIMPLE  s   eq_ref  user_id user_id 4   mysite_new.a.user_id    1   Using where
1   SIMPLE  u   eq_ref  user_id user_id 4   mysite_new.s.user_id    1   Using where
1   SIMPLE  r   eq_ref  PRIMARY PRIMARY 4   mysite_new.u.user_id    1   Using where 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T08:52:56.963

问题很可能出在排序上。而在第一个查询中，MySQL 可以使用`a.user_id`索引进行排序，而在第二个查询中，它必须执行`filesort`一百万条记录中的一条，以便对两个表的列进行排序（然后在结果集中查找某个点以影响该`LIMIT`子句）。

排序依据`o.user_id`应该是足够的，因为它是`NULL`或等于`a.user_id`。

`o.user_id`此外，如果您能够在子句中使用不等式来限制查询`WHERE`，那么您至少不需要搜索那么远。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T08:41:29.807

将此新行更改为

```
 LEFT JOIN ".TBL_USER_ONLINE." o  on ON a.user_id=o.user_id 
```

编辑：那么您的问题出在 ORDER BY 上。您的查询需要很长时间才能`user_id`按两张表中的两张进行排序，请尝试仅使用`user_id` 一张表中的一张

编辑2：

`o.user_id`也将它添加到这样的`SELECT`部分

```
 SELECT
a.i_am,a.seeking_a,
a.zodiac,
a.my_marital_status,
a.city,a.country,
a.my_age,
a.intrested_in1,
a.intrested_in2,
a.intrested_in3,
a.intrested_in4,
a.intrested_in5,
a.intrested_in6,
a.user_id,
a.picture_type,
a.photo,
a.block_photo,
r.username,
u.title,
u.about_myself
o.user_id                 <-- New Line 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T08:54:08.797

why you use order by on two columns

```
ORDER BY o.user_id DESC, a.user_id DESC 
```

I think o.user_id and a.user_id will be same values for a single user so you can just use one.

o.user_id if you want to include null from tables TBL_USER_ONLINE in order a.user_id if you want to order only on user ids.

Also use EXPLAIN and create any necessary indexes for joins, where conditions and order by columns

# jquery - jQuery $.ajaxError

> ID：13739702
> 
> 赞同：0
> 
> 时间：2012-12-06T08:33:50.080
> 
> 标签：jquery

我有个问题。我在 ajax 请求中使用 $.ajaxError 进行全局错误处理。不知何故， $.post 请求抛出错误，状态为 200。为什么会导致错误？有人可以解释一下 $.ajaxError 的用法吗？

谢谢

有代码：

```
$('#haha').ajaxError(function(e, jqXHR, settings, exception) {

console.log(jqXHR.status);
console.log(exception.message);

}); 
```

**编辑**

我已将标头设置为 JSON，并且响应是文本。:)

# vb.net - 如何在 VB.NET 中将日期变量设置为空

> ID：13739708
> 
> 赞同：19
> 
> 时间：2012-12-06T08:34:07.023
> 
> 标签：vb.net, date, null

我想将`DOB`变量分配为空。

```
Dim DOB As Date = DTPSdob.Value
Dim datestring As String = DOB.ToString("d")
If chkSdob.Checked = False Then
      DOB = 'I want to assign here DOB variable as null'
Else
      DOB = datestring
End If 
```

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-12-06T08:38:51.837

使用可为空的日期时间

```
 Dim DOB As Nullable(Of Date) = Date.Now
    Dim datestring As String = DOB.Value.ToString("d")
    DOB = Nothing 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-06T08:36:42.450

“DateTime 是一种值类型（一种结构），不能像所有 .Net 值类型一样设置为 null 或无。日期时间值的默认值是日期部分为零，时间部分为上午 12:00:00。”</p>

[VB.NET - 可空日期时间和三元运算符](https://stackoverflow.com/questions/4189876/vb-net-nullable-datetime-and-ternary-operator)

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2014-07-22T13:38:11.300

将 DOB 从日期变量更改为对象变量。然后，您可以不向变量传递任何内容或有效日期。然后可以使用该变量更新数据库。

```
dim DOB as object = nothing
If chkSdob.Checked = True Then
  DOB = datestring
end if 
```

# java - 无法构建实际的 Intellij IDEA 社区版

> ID：13739709
> 
> 赞同：0
> 
> 时间：2012-12-06T08:34:15.337
> 
> 标签：java, generics, intellij-idea

我正在尝试遵循[这些步骤](http://www.jetbrains.org/pages/viewpage.action?pageId=983225)。

我对“制作项目”步骤有疑问：

```
invalid inferred types for T,A; inferred type does not conform to declared bound(s)
inferred: java.lang.Object
bound(s): T 
```

in ("return addAll(newHashSet(items));")

```
@NotNull
public static <T> Set<T> set(@NotNull T ... items) {
  return addAll(newHashSet(items));
}

@NotNull
public static <T, A extends T, C extends Collection<T>> C addAll(@NotNull C collection, @NotNull A... elements) {
  //noinspection ManualArrayToCollectionCopy
  for (T element : elements) {
    collection.add(element);
  }
  return collection;
} 
```

看起来很奇怪 - 源代码是实际的，我认为这可能是项目配置中的问题。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T08:41:30.717

更多信息会有所帮助。就像您正在运行哪个java？列出了您的环境设置。

# java - 如何将 Java 项目部署到 Tomcat

> ID：13739713
> 
> 赞同：0
> 
> 时间：2012-12-06T08:34:28.753
> 
> 标签：java, spring, tomcat, deployment, tomcat7

我已经下载了一个带有 java 后端的示例 extjs+mysql+spring web 项目（[链接](https://github.com/loiane/ext4-crud-mvc)），我想在我的机器上进行本地设置。我已经安装了 Tomcat 服务器和 MySQL DB，但这是我第一次使用基于 Java 的 Web 应用程序，而且我在设置它时遇到了麻烦。它需要任何修改吗？我认为应该包含 .jsp 文件，但我只能看到 .java 源。我需要在它准备好部署之前构建它吗？任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T08:40:40.977

这是一个 Eclipse 项目，因此您需要在 Eclipse 中运行它。

*   [下载](http://www.eclipse.org/downloads/)Eclipse
*   打开里面的项目
*   在 Servers 选项卡中定义一个 Tomcat 容器
*   将项目拖放到新定义的 Tomcat 上
*   运行

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T08:45:52.643

如果您正在使用 Eclipse IDE 进行开发，请在 Eclipse 中创建一个项目，以“在服务器上运行”运行，并设置正在运行的服务器（例如 TOMCAT 7）。就是这样，确保您在 IDE 中正确设置 spring 项目以及所有需要的 jar 文件。

# android - ListFragments 错误的数据奇怪的寻呼机

> ID：13739716
> 
> 赞同：0
> 
> 时间：2012-12-06T08:34:45.980
> 
> 标签：android, android-viewpager, android-listfragment

我希望有人可以提供帮助。我有一个使用支持库托管多个列表片段的片段。列表片段应该显示我从父片段中的异步任务中检索的数据。我一直试图弄清楚数据是如何加载的，因为它没有正确加载。

每次启动列表显示片段时，它都会执行一个异步任务来获取 Json 并将其解析为`ArrayList <ArrayList <HashMap <String, String> > >`

每个 List 片段都在父片段中查询其在 ArrayList 中的位置的数据。例如。对于其中的第三页，它应该检索 arrList[2] ，其中包含一个 `ArrayList <HashMap <String, String> > 以显示为列表。

寻呼机的行为很奇怪。也许我不了解片段的生命周期或寻呼机如何使用它们。我有 7 个片段。如果我从 frag3 开始，寻呼机将显示没有数据的片段 3。它还加载没有数据的片段 2 和 4。如果我向左转到片段 1，它将正确显示片段 1 并加载片段 0。我可以正确切换到片段 0，但如果我切换到片段 2，它会从片段 0 加载数据并将片段 0 的数据加载到所有其余部分意见。如果我来回走得够多，它将用片段 0 中的数据替换每个片段中的所有数据。我相信它不会立即加载数据，因为它在 viewpager 启动时没有数据。我还没有让它等待异步任务。

我认为每次从视图中取出足够远的片段时，都会重新绘制每个片段的视图。所以我把更新放在`onCreateView()`片段中。我觉得这是一件小事，我只是放错了地方，或者我忽略了它。我试图实施`FragmentStatePagerAdapter`，但我认为我做得不对。

非常感谢任何帮助如果我只是做错事，我非常愿意讨论。我通常会。它永远不会失败。创建一些东西来发现我需要重写所有东西。

```
public class ListFragmentDisplay extends SherlockFragment {
public static final String TAG = "listFragmentDisplay";

Calendar calendar = Calendar.getInstance();
private int dayOfWeek = calendar.get(Calendar.DAY_OF_WEEK);
// listbyday is a list of hash maps each list of hash maps represents a day
// of the week with items for that Object
private ArrayList<ArrayList<HashMap<String, String>>> listByDay = null;
private String objectName = null;
private ViewPager pager;
private FragAdapter adapter;

public ArrayList<HashMap<String, String>> getList(int day) {
    return listByDay.get(day);

}
private void getObjectName() {
    barName = ((MainFragActivity) getActivity()).getobjectSelected();
}
public static ListFragmentDisplay newInstance() {
    return new ListFragmentDisplay();
}
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
}
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
    // Inflate the ListView layout file.
    initArrList();
    getObjectName();
    fillList();
    return inflater.inflate(R.layout.list_view, container, false);
}
@Override
public void onViewCreated(View view, Bundle savedInstanceState) {
    super.onViewCreated(view, savedInstanceState);
    pager = (ViewPager) view.findViewById(R.id.viewPager);
    adapter =new FragAdapter(getChildFragmentManager());
    if (pager.getAdapter() == null)
        pager.setAdapter(adapter);
    reload();
    pager.setOnPageChangeListener(new OnPageChangeListener() {
        @Override
        public void onPageScrollStateChanged(int arg0) {}

        @Override
        public void onPageScrolled(int arg0, float arg1, int arg2) {reload();}

        @Override
        public void onPageSelected(int arg0) {  
        }
    });
    pager.setCurrentItem(dayOfWeek-1);
}
private void initArrList() {
    if (listByDay == null) {
        listByDay = new ArrayList<ArrayList<HashMap<String, String>>>();
    } else {
        listByDay.clear();
    }
    for (int i = 0; i < 7; i++) {
        ArrayList<HashMap<String, String>> hm = new ArrayList<HashMap<String, String>>();
        listByDay.add(hm);
    }
}
synchronized private void fillList() {
    LoadWebTask lWT = new LoadWebTask();
    executeAsyncTask(lWT, getSherlockActivity().getApplicationContext());
} 
```

片段寻呼机

```
public class FragAdapter extends FragmentPagerAdapter {
private static final String[] CONTENT = new String[] { "frag0", "frag1",
        "frag2", "frag3", "frag4", "frag5", "frag6" };
public FragAdapter(FragmentManager fm) {
    super(fm);

}
@Override
public Fragment getItem(int arg0) {
    return MyListFragment.newInstance(arg0);
}
@Override
public int getCount() {
    return CONTENT.length;
}
@Override
public CharSequence getPageTitle(int position) {
    return CONTENT[position % CONTENT.length];
}
} 
```

列表片段

```
public class MyListFragment extends SherlockListFragment {
public static final String NAME_TAG = "name";
public static final String DESCRIPTION_TAG = "description";
private static int dow;
public static final String TAG = "listFragment";
// Keys used in Hashmap that will be mapped to the rows
String[] dFrom = { NAME_TAG, DESCRIPTION_TAG };
private ArrayList<HashMap<String, String>> list;
int[] dTo = { R.id.name, R.id.description };
    public void upDateList() {
    //**************************Not really sure if this is how things are supposed 
            //** to be done. For my small data- set i feel like it will work but i would 
            //** be interested in knowing how else this might be done. 
              ListFragmentDisplay lFD = (ListFragmentDisplay) this
            .getParentFragment();
        dList = lFD.getList(dow);
}
public static MyListFragment newInstance(int pos) {
    MyListFragment frag = new MyListFragment();
    dow = pos;
    return (frag);
}
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
}
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
    upDateList();
    View results = inflater.inflate(R.layout.list_fragment, container,
            false);
    SimpleAdapter adapter = new SimpleAdapter(getParentFragment()
            .getActivity(), list, R.layout.listrow, dFrom, dTo);
    setListAdapter(adapter);
    return results;
}
} 
```

编辑。已解决的代码：在列表片段中初始问题已解决。我只是在实现对 ListFragmentDisplay 的 onPostExecute 回调的过程中。非常感谢 Luksprog 解决了我非常愚蠢的错误。我在不知道它的影响的情况下制作了静态。我认为这实际上是 Eclipse 提供的用于解决冲突的东西。我应该仔细阅读它。

```
 public class MyListFragment extends SherlockListFragment {
public static final String NAME_TAG = "name";
public static final String DESCRIPTION_TAG = "description";

public static final String TAG = "listFragment";
// Keys used in Hashmap that will be mapped to the rows
String[] dFrom = { NAME_TAG, DESCRIPTION_TAG };
private ArrayList<HashMap<String, String>> list;
int[] dTo = { R.id.name, R.id.description };

    SimpleAdapter adapter = null; **NEW**

    public void upDateList() {
                      ListFragmentDisplay lFD = (ListFragmentDisplay) this
            .getParentFragment();
        dList = lFD.getList(getArguments().getInt(TAG)); **NEW**
            if(adapter != null)  **NEW**
            adapter.notifyDataSetChanged(); **NEW**
}
public static MyListFragment newInstance(int pos) {
    MyListFragment frag = new MyListFragment();

    Bundle args = new Bundle(); **NEW**
    args.putInt(TAG, pos); **NEW**
    frag.setArguments(args); **NEW**

    return (frag);
}
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
}
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
    upDateList();
    View results = inflater.inflate(R.layout.list_fragment, container,
            false);
    adapter = new SimpleAdapter(getParentFragment()
            .getActivity(), list, R.layout.listrow, dFrom, dTo);
    setListAdapter(adapter);
    return results;
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T08:39:40.453

你有什么理由从as制作`dow`变量吗？使用关键字，您的片段将共享它们的位置，因此在大多数情况下您将使用错误的位置调用该方法。创建一个私有实例字段：`MyListFragment``static``static``ViewPager``lFD.getList(dow);``dow``private int dow;`

关于其余的代码，看起来还可以，看看上面的更改是否解决了问题。要更新内部片段中的数据，您可以遵循以下方案：

*   从一个空的数据列表`ListFragmentDisplay`开始并启动任务
*   最初，您的内部`ListFragmnents`将看到数据列表为空，因此您将使用空列表初始化它们（`getList(int day)`如果字段中没有数据，该方法应该只返回一个空列表`listByDay`）
*   你的任务现在完成了。假设你有一个来自`onPostExecute`. `AsyncTask`在`ListFragmentDisplay`将要实现的回调中，您将从`Fragment`当前`ViewPager`对用户可见或处于`FragmentPagerAdapter` *活动*状态的每个更新（因此每个`Fragment`不存在`null`且其`getView()`方法不会`null`从该`ViewPager`将更新）。另一个`Fragments`将自我更新，因为`onCreateView`需要为它们调用该方法，并且您可以在其中`updateList` 调用。
*   对于上述要点，请记住，调用该`updateList`方法不会更新可见`Fragment`的，因为在该方法中，您只需更新您未`notifyDataSetChanged`在适配器上调用的 Fragment 列表，以使其知道数据已更改。

# internationalization - wxWidgets：用户定义（或来自配置），与语言相关的字符串。如何？

> ID：13739717
> 
> 赞同：0
> 
> 时间：2012-12-06T08:34:47.217
> 
> 标签：internationalization, wxwidgets, gettext

我们的应用程序（重写为 wxWidgets）应该使用语言目录 (.mo) 中的大部分常用字符串。但它也使用带有通过配置文件为客户量身定制的文本的面板。配置文件是为客户生成的，所以它可以是（比如说）另一个目录文件。然而...

一个目录文件能否包含基本目录中默认字符串的替换（覆盖）？

或者，可以通过编程方式修改从目录 (.mo) 加载的字符串结构吗？（我的意思是，如果可以使用某种推荐的方式来完成*“不要逆风撒尿”。*）

是否有任何标准化机制来存储用户定义的字符串（通过相同的应用程序）？

感谢您的时间和经验，

彼得

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T15:14:42.143

您可以使用`wxLocale::AddCatalog`. 在所有加载的目录中搜索翻译。如果两个目录包含相同的字符串，我*假设*翻译是从首先加载的目录中获取的。诚然，我没有测试。无论如何，如果是这种情况，您需要确保首先加载自定义目录文件。这样，自定义目录中的翻译具有优先权，并且有效地替换了默认翻译。

# java - “.class”获取类的方式——它会初始化类吗？

> ID：13739726
> 
> 赞同：2
> 
> 时间：2012-12-06T08:35:38.350
> 
> 标签：java, class

问题是关于**Java**的。获取一个类型的类有三种方式*（注意，代码只是演示的片段集合）：*

```
Class c1 = Class.forName("com.mypkg.MyClass"); //assumes initialize = true
// - OR - 
Class c1 = Class.forName("com.mypkg.MyClass", true/false,
                         this.getClass().getClassLoader());

Class c2 = com.mypkg.MyClass.class;
// - OR - 
import com.mypkg.MyClass;
Class c2 = MyClass.class;

MyClass mc = new MyClass();
Class c3 = mc.getClass(); 
```

我的问题是关于初始化。对于方法 1，我可以使用布尔参数控制类是否被初始化。对于方法3，由于创建了一个对象，显然该类已初始化（*对吗？*）。

**但是方法2呢？**`.class`如果尚未初始化，调用是否会初始化该类？
**以及**如何以编程方式检查一个类是否已经初始化？

## 总结答案：

*请参阅已接受的解决方案及其评论以获取完整答案。这只是一个总结。*

**如果尚未**初始化，则调用`.class`不会初始化该类。您可以通过在打印消息的类定义中使用静态块来检查类是否正在初始化。

 **## 原始问题的原因：

根据 javadoc `Class.forName`，*“调用 forName("X") 会导致初始化名为 X 的类。”* . 还有两种`Class.forName`方法，包括一种接受名为*initialize*的布尔参数的方法。根据 javadoc，*“只有当 initialize 参数为真并且之前没有初始化时，才会初始化该类。”*

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-06T08:45:02.227

自己测试一下，看看你的虚拟机做了什么？

只需将此类与所有三种方法一起使用（在独立运行中，因为它最多只会初始化一次！）

```
class Example {
    static {
        System.out.println("Class was initialized!");
    }

    public static int bananas = 0;
} 
```

有关*应该*初始化类的详细信息*，请参阅*[http://docs.oracle.com/javase/specs/#12.4.1](http://docs.oracle.com/javase/specs/#12.4.1)

 *粗略地说，一个类应该在以下任一情况下被初始化

*   第一个实例被创建
*   调用了一个`static`方法
*   使用了非最终`static`字段
*   一些更复杂的极端情况

所以本质上，当你第一次*使用*实际类的任何东西时，不仅仅是引用它。

但是例如`Example.bananas = 1;`也应该触发类初始化，而无需实例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T08:49:20.810

On the bytecode level, the reference to the class is loaded by the one of the [`ldc` instructions](http://docs.oracle.com/javase/specs/jvms/se7/html/jvms-6.html#jvms-6.5.ldc). The VM specification does not mention that the classes are initialized, so the safe thing to say is probably that the VM does not *guarantee* that such a reference initializes the class, but do mind that the VM specification does not require a VM to do initialization as lazily as possible either.

The class may legally be initialized at any time between it being first referenced and initialization being strictly required.***

# c# - WCF MessageContract 包装和列表

> ID：13739729
> 
> 赞同：3
> 
> 时间：2012-12-06T08:36:00.453
> 
> 标签：c#, wcf, web-services, xsd, messagecontract

我从一位客户那里收到了关于他们的 Web 服务客户端如何工作的规范。规范是从服务以及相应的 XSD 发送和接收的实际 SOAP XML 消息。客户希望我实施符合客户要求的 Web 服务。客户端是用axis2 ws-stack编写的，我想做的是在WCF中创建一个Web服务，它将接受客户端发出的请求并返回符合他们期望的XML的响应。在这个问题中，我只会发布与请求相关联的 XML 和 XSD，因为如果我可以让它工作，那么将以类似的方式做出响应。

我收到的 XML 如下：

```
POST /axis2/services/SampleService HTTP/1.1
Content-Type: text/xml; charset=UTF-8
SOAPAction: "sendCommand"
User-Agent: Axis2
Host: 127.0.0.1:7777
Content-Length: 347
<?xml version='1.0' encoding='UTF-8'?>
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/"> 
   <soapenv:Body> 
      <SendCommandRequest xmlns="http://something.org/"> 
         <CMD> 
            <Station Address="ABC"> 
               <Platform Address="DEF"> 
                  <Command>5</Command> 
               </Platform> 
             </Station> 
         </CMD> 
       </SendCommandRequest> 
    </soapenv:Body>
</soapenv:Envelope> 
```

这是相应的 XSD 的样子：

```
<xsd:complexType name="SendCommandRequestType"> 
    <xsd:sequence>  
        <xsd:element name="Station"> 
            <xsd:complexType> 
                <xsd:attribute name="Address" type="xsd:string" use="required" /> 
                <xsd:sequence> 
                    <xsd:element minOccurs="0" maxOccurs="1" name="Platform"> 
                        <xsd:complexType> 
                            <xsd:attribute name="Address" type="xsd:string" use="required" /> 
                            <xsd:sequence> 
                                <xsd:element name="Command"> 
                                    <xsd:simpleType> 
                                        <xsd:restriction base="xsd:string"> 
                                            <xsd:enumeration value="-1"/> 
                                            <xsd:enumeration value="0"/> 
                                            <xsd:enumeration value="1"/> 
                                            <xsd:enumeration value="2"/> 
                                            <xsd:enumeration value="3"/> 
                                            <xsd:enumeration value="4"/> 
                                            <xsd:enumeration value="5"/> 
                                        </xsd:restriction> 
                                    </xsd:simpleType> 
                                </xsd:element> 
                            </xsd:sequence> 
                        </xsd:complexType> 
                    </xsd:element> 
                </xsd:sequence> 
            <xsd:complexType>
        </xsd:element>
    </xsd:sequence>
</xsd:complexType> 
```

我已经开始以 WCF/MessageContract 格式编写类型，但是我在列表等方面遇到了困难，因为它们是双重包装的。

我的 MessageContracts 看起来像这样：

```
[MessageContract(WrapperName = "SendCommandRequest", WrapperNamespace = "http://something.org/")]
public class SendCommandRequest
{
    [MessageBodyMember(Name="CMD")]
    public CMD cmd = new CMD();
}

[MessageContract(IsWrapped=false)]
public class CMD
{
    [MessageBodyMember(Name="Station")]
    public List<Station> stations = new List<Station>();
}

[MessageContract(IsWrapped=false)]
public class Station
{

    [MessageBodyMember]
    public List<Platform> platforms = new List<Platform>();
    [MessageBodyMember(Name="Address")]
    public String Address; 
}

[MessageContract(WrapperName = "Platform")]
public class Platform
{
    [MessageBodyMember(Name = "Address")]
    public String Address;
} 
```

当我使用 SoapUI 时，我从 Web 服务获得以下响应：

```
 <s:Envelope xmlns:s="http://schemas.xmlsoap.org/soap/envelope/">
   <s:Body>
      <SendCommandRequest xmlns="http://ttraflinariawebservice.org/">
         <CMD xmlns="http://tempuri.org/" xmlns:a="http://schemas.datacontract.org/2004/07/GeldImport" xmlns:i="http://www.w3.org/2001/XMLSchema-instance">
            <a:stations>
               <a:Station>
                  <a:Address>test</a:Address>
                  <a:platforms>
                     <a:Platform>
                        <a:Address>b</a:Address>
                     </a:Platform>
                  </a:platforms>
               </a:Station>
            </a:stations>
         </CMD>
      </SendCommandRequest>
   </s:Body>
</s:Envelope> 
```

如您所见，它不符合客户期望的 XML 格式。如何让 MessageContract 符合客户期望的 XML？我不知何故需要让列表不像他们那样双重包装，并且类的属性似乎被添加到类名中。

如果您希望我提供更多信息和代码，我可以这样做。不想用可能与问题无关的东西来填充整个帖子。

编辑：

提供的 XSD 文件格式不正确。为了解决这个问题，我从提供的 XML 文件中重新生成了一个 XSD。然后我使用 WSCF.blue 工具为 XSD 生成数据协定代码。

我进行了更改，以便服务合同使用 doc litteral 格式来符合axis2 soap1.1

```
[XmlSerializerFormat(Use = OperationFormatUse.Literal, Style = OperationFormatStyle.Document, SupportFaults = true)]
[ServiceContract]
public interface MyService 
```

我还将操作合同更改为将 System.ServiceModel.Channels.Message 作为输入和输出消息，然后使用生成的类（我从 XSD 生成）手动序列化和反序列化 xml。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T18:32:41.530

您最初尝试的问题是您正在尝试使用`[MessageContract]`类来定义消息的*数据*协定（模式）。消息契约仅用作最顶层的类（定义进入消息头的内容和进入正文的内容）。其他类需要使用您正在使用的序列化程序的属性（并且由于您有 XML 属性，因此您需要使用 XmlSerializer）。下面的代码显示了如何获得与您提供的模式兼容的对象模型。您可以使用诸如 Fiddler 之类的工具来查看它发送的请求。

```
public class StackOverflow_13739729
{
    [ServiceContract(Namespace = "http://something.org")]
    public interface ITest
    {
        [XmlSerializerFormat, OperationContract(Name = "sendCommand")]
        void SendCommand(SendCommandRequest req);
    }

    public class Service : ITest
    {
        public void SendCommand(SendCommandRequest req)
        {
            Console.WriteLine("In service");
        }
    }

    [MessageContract(WrapperName = "SendCommandRequest", WrapperNamespace = "http://something.org")]
    public class SendCommandRequest
    {
        [MessageBodyMember]
        public CMD CMD { get; set; }
    }

    [XmlType]
    public class CMD
    {
        [XmlElement]
        public Station Station { get; set; }
    }

    public class Station
    {
        [XmlAttribute]
        public string Address { get; set; }

        [XmlElement]
        public Platform Platform { get; set; }
    }

    public class Platform
    {
        string[] validCommands = new[] { "-1", "0", "1", "2", "3", "4", "5" };
        string[] command;

        [XmlAttribute]
        public string Address { get; set; }

        [XmlElement]
        public string[] Command
        {
            get { return this.command; }
            set
            {
                if (value != null)
                {
                    if (!value.All(c => validCommands.Contains(c)))
                    {
                        throw new ArgumentException("Invalid command");
                    }
                }

                this.command = value;
            }
        }
    }

    public static void Test()
    {
        string baseAddress = "http://" + Environment.MachineName + ":8000/Service";
        ServiceHost host = new ServiceHost(typeof(Service), new Uri(baseAddress));
        host.AddServiceEndpoint(typeof(ITest), new BasicHttpBinding(), "");
        host.Open();
        Console.WriteLine("Host opened");

        ChannelFactory<ITest> factory = new ChannelFactory<ITest>(new BasicHttpBinding(), new EndpointAddress(baseAddress));
        ITest proxy = factory.CreateChannel();

        SendCommandRequest req = new SendCommandRequest
        {
            CMD = new CMD
            {
                Station = new Station
                {
                    Address = "ABC",
                    Platform = new Platform
                    {
                        Address = "DEF",
                        Command = new string[] { "5" }
                    }
                }
            }
        };

        proxy.SendCommand(req);

        ((IClientChannel)proxy).Close();
        factory.Close();

        Console.Write("Press ENTER to close the host");
        Console.ReadLine();
        host.Close();
    }
} 
```

# c# - 将数据表行从一个表复制到另一个表

> ID：13739730
> 
> 赞同：0
> 
> 时间：2012-12-06T08:35:59.923
> 
> 标签：c#, asp.net, datatable

`queryDataTable`里面有数据，如果检查为真，该行包含该单词，它将整行添加到`extractedData`.. 但目前只有两行要添加到数据表`extractedData`中，但是当我检查数据时有 22添加到它的行是否有任何原因，代码如下

```
DataTable dt = new DataTable();

for (int k = 0; k < queryDataTable.Rows.Count; k++)
{

    string row = "";
    string test = queryDataTable.Rows[k][0].ToString();
    bool check = queryDataTable.Rows[k][0].ToString().StartsWith(queryString);
    if (check)
    {
        int errorcheck = k;
        extractedData.ImportRow(queryDataTable.Rows[errorcheck]);

    }
} 
```

我如何只在第一个数据表中的某个索引处添加一行

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T08:52:14.333

如果您想检查整行，则此代码无法使用，请使用以下说明：

```
queryDataTable.Rows[k][0].ToString().StartsWith(queryString); 
```

您只检查 k 行的第一列。首先，您可以使用这个更紧凑的代码：

```
DataTable dt = new DataTable();
for (DataRow r in dt.Rows)
{
   if(r[0].startsWith(queryString))
   {
      extractedData.ImportRow(r);
   }
} 
```

if 语句只检查每行的第 0 列。如果您向我指定要执行的检查，我可以尝试修改此代码或创建 linq 查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-02-04T00:19:00.980

你可以简单地做到这一点。（StartsWith 检查字符串是否以子字符串开头）。

```
DataTable table = new DataTable();
table.Columns.Add("Dosage", typeof(int));
table.Columns.Add("Drug", typeof(string));
table.Columns.Add("Patient", typeof(string));
table.Columns.Add("Date", typeof(DateTime));

// Here we add five DataRows.
table.Rows.Add(25, "Indocin", "David", DateTime.Now);
table.Rows.Add(50, "Enebrel", "Sam", DateTime.Now);
table.Rows.Add(10, "Hydralazine", "Christoff", DateTime.Now);
table.Rows.Add(21, "Combivent", "Janet", DateTime.Now);
table.Rows.Add(100, "Dilantin", "Melanie", DateTime.Now);

var rows = table.AsEnumerable().Where(dr => dr.ItemArray.Contains("David"));

DataTable copyTable = new DataTable();
copyTable.Columns.Add("Dosage", typeof(int));
copyTable.Columns.Add("Drug", typeof(string));
copyTable.Columns.Add("Patient", typeof(string));
copyTable.Columns.Add("Date", typeof(DateTime));

foreach (var row in rows)
{
    copyTable.Rows.Add(row.ItemArray);
} 
```

样本数据取自[https://www.dotnetperls.com/datatable](https://www.dotnetperls.com/datatable)

# c - 如何从 fortran 访问 C 指针？

> ID：13739732
> 
> 赞同：5
> 
> 时间：2012-12-06T08:36:12.560
> 
> 标签：c, fortran, fortran-iso-c-binding

我将值分配给状态数组，如下所示：

> 状态[i] += 1;

我喜欢从 fortran
访问这个数组我怎样才能访问这个数组？
例如，我想从 fortran 中更改 STAT 的值，如下所示：

> 统计（2）=3

这可能吗？

c源

```
#include <stdio.h>
#include <stdlib.h>
#include <sys/shm.h>
#include <sys/stat.h>

void call_fc_ (int *key, int *addr, int *size, int *status)
{
    int i;
    int shmid;
    void* shared_addr;

    //printf("first ptr = %p\n", *addr);

    shmid = shmget (*key, *size, IPC_CREAT | IPC_EXCL | 0666);
    if (shmid == -1)
    {
        printf("shmget is failed!\n");
        exit(0);
    }
    shared_addr = (void*) shmat(shmid, 0, 0);
    status = (int*)shared_addr;
    //printf("status ptr = %p\n", status);

    int data_size = *size/sizeof(int);

    for(i=0; i<data_size;i++) {
        status[i] += 1;
        printf("%d th value : %d \n", i, status[i]);
    }
} 
```

源代码

```
IMPLICIT NONE
INTEGER*8 KEY,SIZE,ADDR
DATA KEY  / 777 /
DATA SIZE / 64 /
!DATA ADDR / Z'b76fb000' /

CALL CALL_FC(KEY, ADDR, SIZE, STAT)

PRINT *, 'stat is : ', STAT

! CAN I ACCESS TO STAT LIKE THIS?
!DO I=1,10
!STAT(I) = STAT(I) + 5
!WRITE (*,*) STAT(I)
!END DO 
```

我已经测试过这段代码，我参考了这个问题的好答案。但是当我尝试这样做时出现分段错误错误：

```
integer(c_int) :: key = 777, ssize = 64, addr
integer, pointer, dimension(:) :: stat
type(c_ptr) :: statptr

!DATA KEY  / 777 /
!DATA SIZE / 64 /

print *, 'before stat size = ', size(stat)
call call_fc(key, addr, ssize, statptr)
!print *, 'statptr = ', statptr
call c_f_pointer(statptr, stat, [ssize])
print *, 'after stat size = ', size(stat)

stat(1) = 111 <==
stat(2) = 222
stat(3) = 333

print *, 'stat : ', stat 
```

你能认出这是怎么回事吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-06T08:48:02.573

您必须以某种方式声明 STAT。如果你开始玩动态内存分配，留在 FORTRAN 77 是没有希望的。也许有人能想出一些解决方案，但这是我发现的最小的变化。它使用 Fortran 2003 与 C 的互操作性。（也许 Cray 指针解决方案会更短，但非标准）

```
USE ISO_C_BINDING

IMPLICIT NONE

INTEGER(C_INT) KEY,SIZE,ADDR,I
DATA KEY  / 777 /
DATA SIZE / 64 /
!DATA ADDR / Z'b76fb000' /
INTEGER,POINTER  :: STAT(:)
TYPE(C_PTR) :: STATPTR

CALL CALL_FC(KEY, ADDR, SIZE, STATPTR)

call C_F_POINTER(STATPTR,STAT,(/SIZE/))

PRINT *, 'stat is : '
DO I=1,SIZE
  PRINT *,STAT(I)
END DO

! CAN I ACCESS TO STAT LIKE THIS?
!DO I=1,10
!STAT(I) = STAT(I) + 5
!WRITE (*,*) STAT(I)
!END DO
END 
```

我从你的 C 部分得到了一些错误，我没有检查。我也不确切知道该程序应该做什么。

但是，我真的鼓励您使用现代 Fortran 功能。最重要的是 ISO_C_BINDING 用于 C 和 Fortran 之间的互操作性。也忘记`DATA`语句并使用变量初始化。

快速翻译成更现代的 Fortran：

```
 use iso_c_binding

  implicit none

  interface
    subroutine call_fc(key,addr,size,status) bind(C,name='call_fc_')
      import
      integer(c_int) :: key  !intents should be added
      integer(c_int) :: addr
      integer(c_int) :: size
      type(c_ptr) :: status
    end subroutine
  end interface

  integer(c_int) :: key = 777, size=64,addr,i
  integer(c_int),pointer  :: stat(:)
  type(C_ptr) :: statptr

  call call_fc(key, addr, size, statptr)

  call c_f_pointer(statptr,stat,(/size/))

  print *, 'stat is : ',stat

end 
```

# linq - 从实体框架中获取计数

> ID：13739736
> 
> 赞同：0
> 
> 时间：2012-12-06T08:36:33.783
> 
> 标签：linq, entity-framework

对 EF 来说很新，基本上我想转换这个 SQL 查询：

```
SELECT     
PSKU.ProductSKUID, 
PSKU.ProductSKUName, 
W.WarehouseID, 
W.WarehouseName, 
SA.SystemAreaName, 
COUNT(SLI.ProductSKUID) AS QTY

FROM         dbo.StockLineItem AS SLI INNER JOIN
                      dbo.ProductSKU AS PSKU ON PSKU.ProductSKUID = SLI.ProductSKUID INNER JOIN
                      dbo.Warehouse AS W ON W.WarehouseID = SLI.WarehouseID INNER JOIN
                      dbo.SystemArea AS SA ON SA.SystemAreaID = SLI.SystemAreaID
WHERE     (SA.SystemAreaID = 1)
AND        W.WarehouseID = @WarehouseID
GROUP BY PSKU.ProductSKUID, PSKU.ProductSKUName, W.WarehouseName, SA.SystemAreaName, W.WarehouseID 
```

到一个有效的 EF 语句。这就是我到目前为止所拥有的，我的模型类和方法：

```
 [Serializable]
public class StockReturnMethod
{
    public int ProductSKUID { get; set; }
    public int WarehouseID { get; set; }
    public int LotID { get; set; }
    public string LotName { get; set; }
    public int AreaID { get; set; }
    public string AreaName { get; set; }
    public int BinID { get; set; }
    public string BinName { get; set; }
}

public class DALStockMovement
{

    scmEntitiesPrimaryCon entities = new scmEntitiesPrimaryCon();

    public List<AvailibleStock> AvailibleStockQty(int warehouseID)
    {
        var rows = (from PLA in entities.ProductLocationAssignments
                   from W in entities.Warehouses
                   from SLI in entities.StockLineItems
                   from SA in entities.SystemAreas
                   from PSKU in entities.ProductSKUs

                  where W.WarehouseID == warehouseID
                  select new AvailibleStock() { WarehouseID = W.WarehouseID, ProductSKUID = PSKU.ProductSKUID, ProductSKUName = PSKU.ProductSKUName, WarehouseName = W.WarehouseName, Status = SA.SystemAreaName, QtyUnassigned = SLI.ProductSKUID  }).ToList();
        return rows;
    } 
```

任何将其转化为有效 EF 声明的建议将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T12:20:37.710

我实际上使用了这个名为[Linqer](http://www.sqltolinq.com/home)的工具，因为我有 SQL 我只是将它弹出到那个工具中，它为我生成了 Linq。

这是结果：

```
 var SKUStock = (from sli in entities.StockLineItems
                            where
                              sli.SystemArea.SystemAreaID == 1 &&
                              sli.WarehouseID == warehouseID
                            group new { sli.ProductSKU, sli.Warehouse, sli.SystemArea, sli } by new
                            {
                                ProductSKUID = (System.Int32?)sli.ProductSKU.ProductSKUID,
                                sli.ProductSKU.ProductSKUName,
                                sli.Warehouse.WarehouseName,
                                sli.SystemArea.SystemAreaName,
                                WarehouseID = (System.Int32?)sli.Warehouse.WarehouseID
                            } into g
                            select new AvailibleStock()
                            {
                                ProductSKUID = (int)(System.Int32?)g.Key.ProductSKUID,
                                ProductSKUName = g.Key.ProductSKUName,
                                WarehouseID = (int)(System.Int32?)g.Key.WarehouseID,
                                WarehouseName = g.Key.WarehouseName,
                                Status = g.Key.SystemAreaName,
                                QtyUnassigned = (int)(Int64?)g.Count(p => p.sli.ProductSKUID != null)
                            }).ToList();
            return SKUStock; 
```

它返回正是我需要的:)。

# hibernate - 在 nhibernate 中为不同的表空间创建索引

> ID：13739744
> 
> 赞同：1
> 
> 时间：2012-12-06T08:37:03.127
> 
> 标签：hibernate, nhibernate, indexing

我将 NHibernate 与 Oracle 一起使用。是否可以为我现有表的不同表空间创建多列索引？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T12:25:30.953

是的，实施`IAuxiliaryDatabaseObject`. 我不知道 NHibernate 是否可行

# html - 使用 jsoup 检索 img 标签后的信息

> ID：13739745
> 
> 赞同：0
> 
> 时间：2012-12-06T08:37:14.283
> 
> 标签：html, jsoup

我想使用 jsoup 检索 html 代码中的一些内容

```
 <td valign="top" align="middle" class="text" align="center">
   <img border="1" alt="board4" src="/graphics/associatn/12_ngo_soo_lin.jpg" width="80" height="101"><br>
   <b>吴斯仁&lt;/b><br>一丰有限公司
  </td> 
```

我设法使用以下方法检索图像：

```
Element image = doc.select("td.text img").get(c);
String url = image.absUrl("src");
Log.d("image", url); 
```

我如何检索文本

```
<br><b>吴斯仁&lt;/b><br>一丰有限公司 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T19:05:23.837

你需要 a.) 文本还是 b.) 文本，包括。html标签？

一种。）`String text = doc.select("td").text();`

b.)`String text = doc.select("td > img ~ *").toString();`

# facebook-ios-sdk - 如何在 iOS 中设置 Facebook 应用程序 ID

> ID：13739746
> 
> 赞同：0
> 
> 时间：2012-12-06T08:37:15.133
> 
> 标签：facebook-ios-sdk, app-id

我认为应用程序需要将应用程序 ID 提交到 facebook 服务器以通过 OAuth ，获得用户的许可，然后获取活动会话以读取/发布信息。

我正在寻找类似的东西：

```
Facebook fb = new Facebook("YOUR_APP_ID"); 
```

我检查了“Facebook iOS SDK”教程和项目“HelloFacebookSample”，但没有找到任何代码来设置我的 App ID。如何设置我的 App ID 和 App Secret？如何让“HelloFacebookSample”使用我的应用程序，而不是使用官方示例应用程序？我正在使用 Xcode。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2018-12-17T08:56:27.050

你应该在最后一个元素之前的**Info.plist 中设置它**`</dict>`

```
<key>CFBundleURLTypes</key>
<array>
    <dict>
        <key>CFBundleURLSchemes</key>
        <array>
            <string>fbxxxxxxxxxxxxxxx</string>
        </array>
    </dict>
</array>
<key>CFBundleVersion</key>
<string>2.8</string>
<key>FacebookAppID</key>
<string>xxxxxxxxxxxxxxx</string>
<key>FacebookDisplayName</key>
<string>{{Your app name}}</string> 
```

来源：[https ://developers.facebook.com/docs/ios/getting-started](https://developers.facebook.com/docs/ios/getting-started)

# python - python不能使用virtualenv

> ID：13739749
> 
> 赞同：2
> 
> 时间：2012-12-06T08:37:21.930
> 
> 标签：python, virtualenv

我正在使用我的 debian 测试运行 Python 2.7，并且我在使用 virtualenv 时遇到了问题。

我试图在一个挂载的分区上创建一个 virtualenv

```
/dev/sda5   /media/misc vfat    users,defaults,uid=1000,gid=1000,exec,umask=0 0 0 
```

所以，权利似乎没问题，但 virtualenv 回报我：

```
Traceback (most recent call last):
File "/usr/bin/virtualenv", line 3, in <module>
virtualenv.main()
File "/usr/lib/python2.7/dist-packages/virtualenv.py", line 938, in main
never_download=options.never_download)
File "/usr/lib/python2.7/dist-packages/virtualenv.py", line 1039, in create_environment
site_packages=site_packages, clear=clear))
File "/usr/lib/python2.7/dist-packages/virtualenv.py", line 1186, in install_python
copyfile(join(stdlib_dir, fn), join(lib_dir, fn))
File "/usr/lib/python2.7/dist-packages/virtualenv.py", line 430, in copyfile
copyfileordir(src, dest)
File "/usr/lib/python2.7/dist-packages/virtualenv.py", line 405, in copyfileordir
shutil.copytree(src, dest, True)
File "/usr/lib/python2.7/shutil.py", line 206, in copytree
raise Error, errors
shutil.Error: [('/usr/lib/python2.7/config/libpython2.7.so', 'seb/lib/python2.7/config     /libpython2.7.so', '[Errno 1] Operation not permitted')] 
```

我已经用apt安装了virtualenv。在我的 /home 中使用 virtualenv 是成功的

你能帮助我吗 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T16:21:09.117

固定的。我不知道为什么，但我用 ntfs 类型格式化了我的分区解决了这个问题。好像fat32系统增加了对fstab的控制

# node.js - Node.js - Socket.io - Express 3

> ID：13739750
> 
> 赞同：4
> 
> 时间：2012-12-06T08:37:21.867
> 
> 标签：node.js, sockets, express, socket.io

我是 Node.js 和 Express 的菜鸟 :( 我在访问其他模块中的 socket.io 对象时遇到问题。我创建了一个全局变量来保存一个套接字对象，但是一旦该用户关闭连接连接不再可用。从技术上讲，我猜连接仍然存在，但出于资源原因我将其删除。

**请注意，每次建立连接时，我们都会将该套接字分配给所有其他模块都可以访问的全局变量。**

```
// App.js
var io = require('socket.io').listen(server); 
var sessionsConnections = {};

io.sockets.on('connection', function (socket) 
{
     global.socket = socket;
     sessionsConnections[socket.id] = socket;
     .....
}

socket.on("disconnect", function() 
{
    delete sessionsConnections[socket.id];
});

// Match.js
     global.socket.emit('lobby:createMatch', data); 
```

如果最后分配给全局的连接关闭 Match.js 将被搞砸。此时，Match.js 是唯一需要该 socket.io 引用的模块。Match.js 有一堆用于处理事件、发出更改和渲染视图的导出。

对如何处理有什么建议吗？是否可以实例化一个初始套接字连接以存在于 App.js 中以作为全局参考？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T09:35:39.663

每个连接的`socket`变量 in`io.sockets.on('connection', function(socket) {...})`都不同。

由于在您的代码`global.socket`中始终是相对于最后连接的客户端的套接字的引用，因此如果此客户端断开连接，此套接字将死亡是正常的。

无论如何，我看不出有任何理由使用全局变量。如果需要向特定客户端发送消息，可以使用`socket`连接回调中的变量：

```
io.sockets.on('connection', function (socket) 
{
  socket.emit('foo', 'bar');
} 
```

如果您需要访问另一个模块中的套接字，您可以导出该`sessionsConnections`对象，并通过其 id 访问您需要的套接字：

```
//In app.js
exports.connections = sessionsConnections;

//In match.js
var app = require('./app.js');
app.connections[clientId].emit('foo', 'bar'); 
```

当然，您需要在某处跟踪 id。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T18:24:35.103

你可以试试[express.io](http://express-io.org)，

[http://express-io.org/](http://express-io.org/)

```
npm install express.io 
```

它的工作原理与 express 相同，只是它内置了 socket.io 集成。它还具有基本路由，因此更容易处理您的问题。

看看这个简单的例子：

```
app = require('express.io')()
app.http().io()

app.io.route('some-event', function(req) {
    req.io.broadcast('announce', 'someone triggered some-event')
})

app.listen(7076) 
```

您还可以使用对象进行路由，这使其更像传统控制器：

```
app = require('express.io')()
app.http().io()

app.io.route('posts', {
    create: function(req) {
        // create a post
    },
    remove: function(req) {
        // remove a post
    }
})

app.listen(7076) 
```

希望有帮助！

# go - golang：为什么我得到 +Inf 而不是整数或浮点数？

> ID：13739751
> 
> 赞同：6
> 
> 时间：2012-12-06T08:37:22.683
> 
> 标签：go

我正在学习 golang，致力于货币时间价值计算

我正在尝试计算要说的时期数，使您的钱翻倍。我使用的公式是[period = log(fv/pv) / log(1 + i)](http://en.wikipedia.org/wiki/Time_value_of_money#Example_3%3a_Solving_for_the_period_needed_to_double_money)。到目前为止我所拥有的是...

```
package main
import (
    "fmt"
    "math"
)
var (
    interest,
    futureValue,
    period,
    presentValue float64
)
var rate float64 = interest / 100 //converts interest into decimal... interest / 100
var ratex float64 = 1 + interest //used for (1 + i)

func main() {
    numPeriod()
}
func numPeriod() {
    fmt.Println("Enter interest amount: ")
    fmt.Scanf("%g", &interest)
    fmt.Println("Enter present value: ")
    fmt.Scanf("%g", &presentValue)
    fmt.Println("Enter future value: ")
    fmt.Scanf("%g", &futureValue)
    var logfvpvFactor float64 = futureValue / presentValue
    var logi float64 = math.Log(ratex)
    var logfvpv float64 = math.Log(logfvpvFactor)
    period = logfvpv / logi
    fmt.Printf("Number of period/s is = %g\n", period)
} 
```

运行这个，我得到...

```
Number of period/s is = +Inf 
```

...我正在寻找的答案是整数或浮点数。我怎么得到它？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-06T14:56:00.957

为了扩展迭戈的答案，你有这条线

```
var ratex float64 = 1 + interest 
```

在定义利息之前，它是 0，ratex 变为 1。然后你有这条线

```
var logi float64 = math.Log(ratex) 
```

由于 ratex 为 1，而 1 的 log 为 0，logi 变为 0。然后您通过除以 logi（即 0）来定义周期，因此您将得到 +inf。

您应该做的是在获得利息的输入后将值分配给 ratex 。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T08:51:10.103

当您分配 ratex 的值时，利息为 0。因此，增加您的值所需的时间将是无限的。你想要的是：

```
func numPeriod() {
  fmt.Println("Enter interest amount: ")
    fmt.Scanf("%g", &interest)
    var ratex float64 = 1 + interest / 100 //used for (1 + i)
    fmt.Println("Enter present value: ")
    fmt.Scanf("%g", &presentValue)
    fmt.Println("Enter future value: ")
    fmt.Scanf("%g", &futureValue)
    var logfvpvFactor float64 = futureValue / presentValue
    var logi float64 = math.Log(ratex)
    var logfvpv float64 = math.Log(logfvpvFactor)
    period = logfvpv / logi
    fmt.Printf("Number of period/s is = %g\n", period)
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-06T08:58:23.360

```
(09:54) jnml@fsc-r550:~/src/tmp/SO/13739751$ cat main.go 
package main

import (
        "fmt"
        "math"
)

func main() {
        var i, pv, fv float64
        fmt.Println("Enter interest amount: ")
        fmt.Scanf("%g", &i)
        fmt.Println("Enter present value: ")
        fmt.Scanf("%g", &pv)
        fmt.Println("Enter future value: ")
        fmt.Scanf("%g", &fv)
        fmt.Printf("Number of period/s is = %g\n", math.Log(fv/pv)/math.Log(1+i))
}

(09:54) jnml@fsc-r550:~/src/tmp/SO/13739751$ go run main.go 
Enter interest amount: 
.1
Enter present value: 
100
Enter future value: 
200
Number of period/s is = 7.272540897341713
(09:54) jnml@fsc-r550:~/src/tmp/SO/13739751$ 
```

# iphone - 滚动 searchResultsTableView 时 UISearchbar 的范围栏显示

> ID：13739755
> 
> 赞同：2
> 
> 时间：2012-12-06T08:37:42.693
> 
> 标签：iphone, ios, tableview, uisearchbar

我有一个带有 searchDisplayController 的 UISearchbar，它通过 IB 拖到我的 tableview 中。我的搜索范围栏在不处于搜索模式时隐藏。当我开始搜索时，范围栏将如下图所示![在搜索模式下显示范围栏](../Images/c03bc46ce433480c7e9fc833f39ce8aa.png)

然后我输入我的文本和搜索结果，当我像这样滚动结果 scopeBar 隐藏时它显示![输入文字并滚动后](../Images/9428670159bc1eab1b03aae67939327b.png)

那么滚动时我应该怎么做才能显示范围栏？

这是我的代码：

```
- (void)searchDisplayControllerDidBeginSearch:(UISearchDisplayController *)controller {
    controller.searchResultsTableView.separatorStyle = UITableViewCellSeparatorStyleNone;
    controller.searchResultsTableView.bounces = NO;
}

- (BOOL)searchBarShouldBeginEditing:(UISearchBar *)searchBar {
    self.searchDisplayController.searchBar.showsScopeBar =YES;
    [self.searchDisplayController.searchBar sizeToFit];
    [self.searchDisplayController.searchBar setShowsCancelButton:YES animated:YES];
    return YES;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T21:16:24.273

我发现我的问题在

```
- (BOOL)searchBarShouldEndEditing:(UISearchBar *)searchBar 
```

我设置

```
self.searchDisplayController.searchBar.showsScopeBar 
```

到否。所以当我滚动表格视图时，此方法调用并隐藏范围栏

# php - 在 codeigniter 中管理 htaccess 文件中的路由

> ID：13739759
> 
> 赞同：0
> 
> 时间：2012-12-06T08:37:49.900
> 
> 标签：php, .htaccess, codeigniter, routes

我的路线文件中有以下内容：

```
$route['logout']                = 'admin/logout';
$route['res_yass']              = 'page/index/res_yass';
$route['res_nesr']              = 'page/index/res_nesr';
$route['societe']               = 'page/index/societe';
$route['app_type']              = 'page/index/app_type';
$route['future_plan_situation'] = 'page/index/future_plan_situation';
$route['plan_situation']        = 'page/index/plan_situation';
$route['fini_stand']            = 'page/index/fini_stand';
$route['future_app_type']       = 'page/index/future_app_type'; 
```

现在工作正常，但每当我想添加一个页面时，我必须将它添加到路由页面中，这不是一个好主意。那么除了注销之外，我如何在 htaccess 文件中更改它。提前谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T09:17:04.550

尝试这个

```
$route['(:any)'] = "page/index/$1";
$route['logout'] = 'admin/logout'; 
```

# c# - 将代码从 Framework 4.0 转换为 3.5

> ID：13739761
> 
> 赞同：-1
> 
> 时间：2012-12-06T08:37:56.063
> 
> 标签：c#, .net, multithreading

我将一些应用程序从 Framework 4.0 转换为 3.5，并且下一个代码有问题：

```
 public virtual bool TryToGetResponse(out string response, int millisecondsTimeout) {
        var mre = new System.Threading.ManualResetEventSlim(false);
        string resp = response = null;
        ThreadPool.QueueUserWorkItem(_ => {
            resp = GetResponse();
            mre.Set();
        });

        if (mre.Wait(millisecondsTimeout)) {
            response = resp;
            return true;
        } else
            return false;
    } 
```

这如何转换为 3.5？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T08:47:51.997

使用类`ManualResetEvent`而不是类`ManualResetEventSlim`

# c++ - 在并发数据结构中，什么级别的锁定粒度比较好？

> ID：13739770
> 
> 赞同：4
> 
> 时间：2012-12-06T08:38:50.150
> 
> 标签：c++, multithreading, concurrency, c++11, object-pooling

我对多线程很陌生，我有一个单线程数据分析应用程序，它具有很好的并行化潜力，虽然数据集很大，但它并没有接近饱和硬盘读/写所以我想我应该利用现在标准中的线程支持并尝试加快速度。

经过一些研究，我认为生产者消费者是从磁盘读取数据并进行处理的好方法，我开始编写一个对象池，它将成为循环缓冲区的一部分，生产者将数据放入其中，消费者获取数据数据。当我写这门课时，感觉我在处理锁定和释放数据成员的方式上过于细化了。感觉就像有一半的代码在锁定和解锁，并且好像有大量的同步对象漂浮在周围。

所以我带着一个类声明和一个示例函数来找你，还有这个问题：这是否太细粒度了？粒度不够细？考虑不周？

```
struct PoolArray
{
public:
    Obj* arr;
    uint32 used;
    uint32 refs;
    std::mutex locker;
};

class SegmentedPool
{
public: /*Construction and destruction cut out*/
    void alloc(uint32 cellsNeeded, PoolPtr& ptr);
    void dealloc(PoolPtr& ptr);
    void clearAll();
private:
    void expand();

    //stores all the segments of the pool
    std::vector< PoolArray<Obj> > pools;
    ReadWriteLock poolLock;

    //stores pools that are empty
    std::queue< int > freePools;
    std::mutex freeLock;

    int currentPool;
    ReadWriteLock currentLock;
};

void SegmentedPool::dealloc(PoolPtr& ptr)
{
    //find and access the segment
    poolLock.lockForRead();
    PoolArray* temp = &(pools[ptr.getSeg()]);
    poolLock.unlockForRead();
    //reduce the count of references in the segment
    temp->locker.lock();
    --(temp->refs);
    //if the number of references is now zero then set the segment back to unused
    //and push it onto the queue of empty segments so that it can be reused
    if(temp->refs==0)
    {
        temp->used=0;
        freeLock.lock();
        freePools.push(ptr.getSeg());
        freeLock.unlock();
    }
    temp->locker.unlock();
    ptr.set(NULL,-1);
} 
```

一些解释： First PoolPtr 是一个愚蠢的小指针对象，它存储指针和指针来自的池中的段号。

其次，这都是“模板化”的，但我把这些行拿出来试图减少代码块的长度

第三个 ReadWriteLock 是我使用互斥锁和一对条件变量组合而成的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T08:51:33.863

锁无论多么细粒度都是低效的，所以不惜一切代价避免。

队列和向量都可以使用`compare-swap`原语轻松实现无锁。

有很多关于这个主题的论文

无锁队列：

*   [http://citeseerx.ist.psu.edu/viewdoc/download?doi=10.1.1.53.8674&rep=rep1&type=pdf](http://citeseerx.ist.psu.edu/viewdoc/download?doi=10.1.1.53.8674&rep=rep1&type=pdf)
*   [http://www.par.univie.ac.at/project/peppher/publications/Published/opodis10lfq.pdf](http://www.par.univie.ac.at/project/peppher/publications/Published/opodis10lfq.pdf)

无锁矢量：

*   [http://www.stroustrup.com/lock-free-vector.pdf](http://www.stroustrup.com/lock-free-vector.pdf)

Straustrup 的论文也提到了无锁分配器，但不要马上跳槽，现在标准分配器已经相当不错了。

**UPD** 如果您不想编写自己的容器，请使用英特尔的线程构建块库，它提供线程安全向量和队列。它们不是无锁的，但它们经过优化以有效地使用 CPU 缓存。

**UPD** 关于`PoolArray`，你也不需要锁。如果可以使用 c++11，`std::atomic`则用于原子增量和交换，否则使用编译器内置函数（MSVC 中的 InterLocked* 函数和gcc [http://gcc.gnu.org/onlinedocs/gcc-4.1中的](http://gcc.gnu.org/onlinedocs/gcc-4.1.1/gcc/Atomic-Builtins.html)*_sync *。* [1/gcc/Atomic-Builtins.html](http://gcc.gnu.org/onlinedocs/gcc-4.1.1/gcc/Atomic-Builtins.html) )

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T09:12:38.577

一个好的开始——你在需要的时候锁定东西，一旦你完成就释放它们。

您`ReadWriteLock`几乎是一个`CCriticalSection`对象 - 根据您的需要，使用它可能会提高性能。

我要说的一件事是`temp->locker.lock();`在释放池上的锁之前调用你的函数`poolLock.unlockForRead();`，否则当池对象不受同步控制时，你正在对池对象执行操作——此时它可能正被另一个线程使用。一个小问题，但对于多线程，最终让你失望的是小问题。

采用多线程的一个好方法是将任何受控资源包装在对象或函数中，这些对象或函数在它们内部进行锁定和解锁，因此任何想要访问数据的人都不必担心锁定或解锁哪个锁，以及何时做。例如：

```
 ...
  if(temp->refs==0)
  {
    temp->used=0;
    freeLock.lock();
    freePools.push(ptr.getSeg());
    freeLock.unlock();
  }
  ... 
```

将会...

```
 ...
  if(temp->refs==0)
  {
    temp->used=0;
    addFreePool(ptr.getSeg());
  }
  ...

void SegmentedPool::addFreePool(unsigned int seg)
{
  freeLock.lock();
  freePools.push(seg);
  freeLock.unlock();
} 
```

那里也有很多多线程基准测试工具。您可以尝试以不同方式控制资源，通过其中一种工具运行它，如果您觉得性能正在成为问题，则可以查看瓶颈在哪里。

# c# - xml序列化

> ID：13739772
> 
> 赞同：-3
> 
> 时间：2012-12-06T08:38:51.883
> 
> 标签：c#, xml-serialization

在 C# 中，我如何解析或序列化如下所示的 xml，thanx：

```
<response>
<result action="proceed" id="19809" status="complete" />
</response> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T10:07:18.930

这将满足您的需求：[Tutorial](http://www.switchonthecode.com/tutorials/csharp-tutorial-xml-serialization.)或[Stackoverflow](https://stackoverflow.com/questions/364253/how-to-deserialize-xml-document) 正如@LB 所说，在这种情况下，[谷歌](http://www.google.nl)是您最大的朋友。

其他解决方案：

1.  为您的 xml 创建一个 xsd 架构。
2.  使用 xsd.exe 为其创建类。
3.  使用标准序列化进行序列化。

这是我将我的助手类粘贴到项目中并序列化的时候。

```
 /// <summary>
/// Serialization helper
/// </summary>
public static class XmlSerializationHelper
{
    /// <summary>
    /// Deserializes an instance of T from the stringXml
    /// </summary>
    /// <typeparam name="T"></typeparam>
    /// <param name="xmlContents"></param>
    /// <returns></returns>
    [System.Diagnostics.CodeAnalysis.SuppressMessage("Microsoft.Design", "CA1004:GenericMethodsShouldProvideTypeParameter")]
    public static T Deserialize<T>(string xmlContents)
    {            
        // Create a serializer
        using (StringReader s = new StringReader(xmlContents))
        {
            XmlSerializer serializer = new XmlSerializer(typeof(T));
            return (T)serializer.Deserialize(s);
        }
    }

    /// <summary>
    /// Serializes the object of type T to the filePath
    /// </summary>
    /// <typeparam name="T"></typeparam>
    /// <param name="serializableObject"></param>
    /// <param name="filePath"></param>
    public static void Serialize<T>(T serializableObject, string filePath)
    {
        Serialize(serializableObject, filePath, null);
    }

    /// <summary>
    /// 
    /// </summary>
    /// <typeparam name="T"></typeparam>
    /// <param name="serializableObject"></param>
    /// <param name="filePath"></param>
    /// <param name="encoding"></param>
    public static void Serialize<T>(T serializableObject, string filePath, Encoding encoding)
    {
        // Create a new file stream
        using (FileStream fs = File.OpenWrite(filePath))
        {
            // Truncate the stream in case it was an existing file
            fs.SetLength(0);

            TextWriter writer; 
            // Create a new writer
            if (encoding != null)
            {
                writer = new StreamWriter(fs, encoding);
            }
            else
            {
                writer = new StreamWriter(fs);
            }   

            // Serialize the object to the writer
            XmlSerializer serializer = new XmlSerializer(typeof(T));
            serializer.Serialize(writer, serializableObject);

            // Create writer
            writer.Close();
        }
    }
} 
```

# android - 错误android.os.networkonmainthreadexception asynctask getResponseCode

> ID：13739773
> 
> 赞同：3
> 
> 时间：2012-12-06T08:38:55.103
> 
> 标签：android

当在同一个类上运行我的代码时，应用程序运行良好。但是当我在两个不同的类上运行此代码时，我的应用程序出现错误 android.os.networkonmainthreadexception。调试时我在**responseHttp = httpConnection.getResponseCode();处检测到错误** 应用程序运行到行**responseHttp = httpConnection.getResponseCode();** 它去catch {}，它取消“If..else”。并记录错误android.os.networkonmainthreadexception。你能帮助我吗！！

我的代码类 Asynctask

```
package com.example.finishdemo;

import java.net.HttpURLConnection;
import java.net.URL;
import java.net.URLConnection;
import android.os.AsyncTask;

public class TestConnectionNew extends AsyncTask<String, Void, String> {
private int responseHttp = 0;
private String flag="false";

@Override
protected String doInBackground(String... urltest) {
    // TODO Auto-generated method stub
    try {
        URL url = new URL(urltest[0]);
        URLConnection connection = url.openConnection();
        connection.setConnectTimeout(2000);
        HttpURLConnection httpConnection = (HttpURLConnection) connection;
        **responseHttp = httpConnection.getResponseCode();**
        if (responseHttp == HttpURLConnection.HTTP_OK) {
            flag = "true";
        } else {
            flag = "false";
        }
    } catch (Exception e) {
        e.printStackTrace();
        System.out.println("Thong bao loi: "+e.toString());
    }
    return flag;
}
} 
```

代码类主要：

```
package com.example.finishdemo;
public class Hoadon extends Activity {
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.hoadon);
    TestConnectionNew t=new TestConnectionNew();
    String recieve=t.doInBackground("http://longvansolution.tk/monthlytarget.php");
    if(recieve.equalsIgnoreCase("true"))
    {
        doTimerTask();
    }else
        if(recieve.equalsIgnoreCase("false"))
    {
        showAlert("Không kết nối được đến server hoặc thiết bị chưa có kết nối internet!");
    } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-06T08:42:04.267

使用[asynctask.execute](http://developer.android.com/reference/android/os/AsyncTask.html#execute%28Params...%29)执行 AsyncTask 而不是手动调用 doInBackground ：

```
 TestConnectionNew t = new TestConnectionNew();
 t.execute("http://longvansolution.tk/monthlytarget.php"); 
```

将您的 TestConnectionNew 更改为

```
public class TestConnectionNew extends AsyncTask<String, Void, String> {
private int responseHttp = 0;
private String flag="false";

@Override
protected String doInBackground(String... urltest) {
    // TODO Auto-generated method stub
    try {
        URL url = new URL(urltest[0]);
        URLConnection connection = url.openConnection();
        connection.setConnectTimeout(2000);
        HttpURLConnection httpConnection = (HttpURLConnection) connection;
        **responseHttp = httpConnection.getResponseCode();**
        if (responseHttp == HttpURLConnection.HTTP_OK) {
            flag = "true";
        } else {
            flag = "false";
        }
    } catch (Exception e) {
        e.printStackTrace();
        System.out.println("Thong bao loi: "+e.toString());
    }
    return flag;
}

@Override
     protected void onPostExecute(String recieve) {
           if(recieve.equalsIgnoreCase("true"))
            {
               doTimerTask();
           }else
           if(recieve.equalsIgnoreCase("false"))
             {
              showAlert("Không kết nối được đến server hoặc thiết bị chưa có kết nối internet!");
             }
      }
} 
```

有关我们如何使用 AsyncTask 的更多帮助，请参阅：

[http://developer.android.com/reference/android/os/AsyncTask.html](http://developer.android.com/reference/android/os/AsyncTask.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-17T08:41:13.493

在 AndroidManifest.xml 中添加代码：

```
uses-permission android:name="android.permission.INTERNET" 
uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" 
```

# extjs - 如何缓存大型应用程序的组件

> ID：13739780
> 
> 赞同：1
> 
> 时间：2012-12-06T08:39:30.290
> 
> 标签：extjs, extjs4, extjs4.1, extjs-mvc

我需要设置一个相当大的应用程序，其中包含超过 20 个主视图和表单。一个主视图至少包含一个网格，但最多可以包含十个网格。还有一些包含门户面板的主视图。

现在它需要相当长的时间才能打开一个主视图，这不会发生，因为我只用一个而不是 > 20 对其进行了测试。应用程序放置在具有适合布局的视口中，该视口包含具有边框布局的容器。Mainview 总是在中心呈现，而其他区域用于导航。

**我的第一种方法** *是在标签面板中缓存东西*

我的第一种方法是使用带有隐藏选项卡的选项卡面板。与此并行的是，`MixedCollection`如果视图已被插入到选项卡面板中或必须创建，我将在其中进行查找。如果它已经被插入，我从 MixedCollection 中获取位置并运行`setActiveTab()`. 但这似乎毫无价值，因为插入新主视图或使用 setActiveTab() 激活现有主视图需要所有时间。

那么我做错了什么，我怎样才能让它变得更好？

**编辑**

问题似乎来自渲染时间，并且每次使用 setActiveTab() 时组件似乎都会重新渲染。将视图渲染到中心面板最多需要 2-3 秒。因此，我认为我可以通过缓存已经创建的视图来加速它，这样就不需要进行渲染和调整大小。我想我应该提一下，在北部地区，每次也会呈现一个菜单，这不会受到影响，但这不重要，不是吗？

**如何切换视图**

我有一个额外的控制器来管理菜单视图和主视图更改。为此，从容器中删除菜单并添加新菜单，对于主视图，如果已创建视图，则在上述混合集合中进行查找，如果已创建，则接收选项卡索引和选项卡活性。如果不是，则将视图添加为新选项卡，然后将其标识和索引添加到混合集合中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T08:25:30.133

它可能会帮助您查看**[suspendLayouts()](http://docs.sencha.com/ext-js/4-1/#!/api/Ext-method-suspendLayouts)**和**[resumeLayouts()](http://docs.sencha.com/ext-js/4-1/#!/api/Ext-method-resumeLayouts)**

`Ext.suspendLayouts();`在开始更改视图之前和`Ext.resumeLayouts(true)`完成所有视图之后运行。

您还应该检查是否存在过度嵌套，这意味着您已经将许多组件相互嵌套。

**例子：**

如果网格是选项卡面板中的唯一组件，那么如果将该网格放置在一个额外的面板中，然后再放入选项卡面板中，则会过度嵌套。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T21:42:15.577

首先，我发现非活动标签无论如何都会被填充。我不知道为什么。但是我的商店仍然加载了非活动标签。其次，应用程序的大小实际上并不重要。我们有很多观点，一切都运行得很快。在大多数情况下，这取决于：

1.  首先是嵌套——检查你的代码。更少的嵌套更多的速度。例如，如果您不需要面板提供的所有东西 - 使用容器而不是面板。因为所有这些东西都是在你的 dom 中添加更多的 div。
2.  取决于您如何创建视图。没有你的代码真的很难说，为什么它很慢。也许您每次打开选项卡时都会创建视图，或者转到另一个视图。
3.  正如提到的@sra 尝试使用suspendLayouts - 这意味着您的浏览器将只呈现您的东西resumeLayouts，而不是每次添加任何组件时都重新呈现所有内容。
4.  如果您使用 windows - 使用 closeAction:hide 而不是销毁。
5.  不使用 Ext.getCmp()。我还听说 refs 会减慢应用程序的速度，因为它们开始从正文中搜索您的组件。但它没有证明信息:) 使用 component.down('id'), component.up('xtype') 它只会从您的组件而不是正文中搜索。
6.  每次使用 Ext.create('Panel') 执行某些操作时，不要从控制器创建视图。这意味着它将每次创建。
7.  使用较少的全局事件，因为这也会减慢您的应用程序。

在没有代码的情况下，真的很难说你的问题是什么。这只是可以帮助您的几点。但我建议寻找嵌套以及创建视图的方式和位置。

# java - 如何在向量中查找列

> ID：13739781
> 
> 赞同：0
> 
> 时间：2012-12-06T08:39:38.747
> 
> 标签：java, vector

如何在向量中查找列并更改特定列值以在 JTable 上显示其他内容？

我的代码如下所示：

```
Vector<Vector<Object>> data = new Vector<Vector<Object>>();
while (rs.next()) {
    Vector<Object> vector = new Vector<Object>();
    for (int columnIndex = 1; columnIndex <= columnCount; columnIndex++) {
        vector.add(rs.getObject(columnIndex));                      
    }
    data.add(vector);
}
return new DefaultTableModel(data, columnNames); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T09:25:03.470

我建议使用`Vector<Map<String, Object>>`Structure 来解决您的问题。

但是如果你不想使用 Map，那么你可以实现这个解决方案。

有一个具有列名和列索引对的地图。

```
Map<String, Integer> columnNameIndexPair 
```

Vector 维护插入顺序，因此在这种情况下，您可以在向量中插入对象。要从向量中检索数据，首先从 中找到相应的索引`columnNameIndexPair`，然后从向量中获取（索引）元素。

# java - JAVA BubbleSort 运行时问题

> ID：13739783
> 
> 赞同：0
> 
> 时间：2012-12-06T08:39:55.770
> 
> 标签：java, runtime, bubble-sort

我编写了一个冒泡排序程序，将 10000 个唯一值按顺序排序。

我已经运行了该程序，它给了我一个输出，但输出对我来说似乎不正确。

这是代码：

```
public class BubbleSort {
    public static void main(String[] args) {
        int BubArray[] = new int[]{#here are 10000 integers#};
        System.out.println("Array Before Bubble Sort");
            for(int a = 0; a < BubArray.length; a++){
                 System.out.print(BubArray[a] + " ");
            }

            double timeTaken = bubbleSortTimeTaken(BubArray);
                 bubbleSort(BubArray);
            System.out.println("");               
            System.out.println("Array After Bubble Sort");
            for(int a = 0; a < BubArray.length; a++){
        System.out.println("    Time taken for Sort : " + timeTaken + " milliseconds.");
                System.out.print(BubArray[a] + " ");
            }
    }

private static void bubbleSort(int[] BubArray) {

            int z = BubArray.length;
            int temp = 0;

            for(int a = 0; a < z; a++){
                    for(int x=1; x < (z-a); x++){

                            if(BubArray[x-1] > BubArray[x]){

                                    temp = BubArray[x-1];
                                    BubArray[x-1] = BubArray[x];
                                    BubArray[x] = temp;

                            }      
                    }
            }
    }
public static double bubbleSortTimeTaken(int[] BubArray) {
    long startTime = System.nanoTime();
        bubbleSort(BubArray);
    long timeTaken = System.nanoTime() - startTime;
    return timeTaken;
    }
} 
```

代码运行顺利，没有错误，但这是我收到的输出：

```
Array Before Bubble Sort
#10000 integers randomly#
Array After Bubble Sort
Time taken for Sort : 1.0114869E7 milliseconds.
10  Time taken for Sort : 1.0114869E7 milliseconds.
11  Time taken for Sort : 1.0114869E7 milliseconds.
17  Time taken for Sort : 1.0114869E7 milliseconds.
24  Time taken for Sort : 1.0114869E7 milliseconds.
35  Time taken for Sort : 1.0114869E7 milliseconds.
53  Time taken for Sort : 1.0114869E7 milliseconds.

....

14940   Time taken for Sort : 1.0114869E7 milliseconds.
14952   Time taken for Sort : 1.0114869E7 milliseconds.
14957   Time taken for Sort : 1.0114869E7 milliseconds.
14958   Time taken for Sort : 1.0114869E7 milliseconds.
14994   Time taken for Sort : 1.0114869E7 milliseconds.
14997   Time taken for Sort : 1.0114869E7 milliseconds.
BUILD SUCCESSFUL (total time: 1 second) 
```

1.0114869E7 毫秒在整个程序中运行，我不认为输出正是我想要做的，尽管它看起来像。我希望输出程序运行所需的时间以及每次排序时间。

~我希望这是有道理的。任何帮助将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T08:48:55.043

我猜你可能想输出这个。`sysout`应该在循环`for`之前。

System.out.println(" 排序所用时间：" + timeTaken + " 毫秒。"); for(int a = 0; a < BubArray.length; a++){ System.out.print(BubArray[a] + " "); }

您已经对数组进行了排序，稍后将在 for 循环中显示它。您看到输出的时间是冒泡排序所花费的总时间（大约），这是通过以下方法计算的

```
public static double bubbleSortTimeTaken(int[] BubArray) {
    long startTime = System.nanoTime();
    bubbleSort(BubArray);
    long timeTaken = System.nanoTime() - startTime;
    return timeTaken;
    }
} 
```

所以，这就是总时间。

# java - 从android中的String数组中删除一个元素

> ID：13739785
> 
> 赞同：9
> 
> 时间：2012-12-06T08:40:04.940
> 
> 标签：java, android, string, arrays

我正在做一个简单的 android 应用程序。我正在使用以下代码从数组中删除一个元素。

```
 arr_fav = {"1","2","3"};
 for(int i= 0;i<arr_fav.length;i++)
 {
     if(current_id == Integer.parseInt(arr_fav[i]))
     {
        arr_fav[1] = null;
     } } 
```

通过这样做，我得到了像 arr_fav = {"1",null,"3"} 这样的数组。但我想要 arr_fav = {"1","3"}。如何删除一个元素。我是这个 android 开发的新手.请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-12-06T08:46:03.433

最好使用arraylist

```
arr_fav = {"1","2","3"};
List<String> numlist = new ArrayList<String>();
for(int i= 0;i<arr_fav.length;i++)
{
 if(current_id == Integer.parseInt(arr_fav[i]))
 {
   // No operation here 
 }
 else
 {
     numlist.add(arr_fav[i]);
 }
}
 arr_fav = numlist .toArray(new String[numlist .size()]); 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-12-06T08:42:26.467

你没有。

数组无法调整大小。

您需要创建一个新的（较小的）数组，并将您希望保留的元素复制到其中。

一个更好的想法是使用`List`动态的实现。一个`ArrayList<Integer>`例如。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-12-06T08:42:18.933

Java 中的数组不是*动态*的，您可以使用 an`ArrayList`来代替。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-06T08:44:59.223

您可以将所需的数组元素复制到新数组中

```
 j = 0;
 for(int i= 0;i<arr_fav.length;i++)
  {
   if(current_id != Integer.parseInt(arr_fav[i]))
 {
    arr_new[j++] = arr_fav[i];
 } } 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-12-06T08:46:58.077

使用 an`ArrayList`而不是数组。它支持删除任何元素、动态大小等功能。

```
ArrayList<String> arr_fav_list = new ArrayList<String>();
arr_fav_list.addAll(arr_fav);
arr_fav_list.remove(1); 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-12-06T11:25:47.110

这将完成这项工作......

```
List x = new ArrayList(Arrays.asList(arr_fav));
x.remove(String.valueOf(current_id));
arr_fav = x.toArray(); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-12-06T08:44:24.987

尝试这样的事情

```
int[] intAry = new int[5]; 

// populate array with 0 to 4  

for (int i=0; i < intAry.length; i++) {  

  intAry[i] = i;  

}  

List<Integer> aList  = Arrays.asList(intAry); // change the array to a list of integers  

aList.remove(3); // remove the item 3 (4th index)  

aList.toArray(intAry); // convert list back to array  

System.out.println("size of array=" + intAry.size()); // output array size should be 4  

for (int i=0; i < intAry.length; i++) {  

  System.out.print(intAry[i] + " "); // should output "0 1 2 4 "  

} 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-12-06T08:56:27.890

试试这个：

```
 ArrayList<String> rm = new ArrayList<String>();
    rm .addAll(arr_fav);
    rm .remove(1); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-12-06T08:42:41.257

您可以使用以下方法进行操作。

```
public static String[] removeElements(String[] input, String deleteMe) {
List result = new LinkedList();

for(String item : input)
    if(!deleteMe.equals(item))
        result.add(item);

return result.toArray(input);
} 
```

或者你可以使用[`ArrayUtils`](http://developer.oesf.biz/em/developer/reference/durian/com/android/internal/util/ArrayUtils.html).

```
array = ArrayUtils.removeElement(array, element) 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-12-06T08:52:01.603

放

```
 array_fav[1]=array_fav[2];
    array_fav[2]=null; 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2012-12-06T08:52:58.127

```
 String[] arr_fav =
    { "1", "2", "3" };

    List<String> myList = Arrays.asList(arr_fav);

            String currentId = String.valueOf(current_id);
    for (int i = 0; i < arr_fav.length; i++)
    {
        if (arr_fav[i].equals(currentId))
        {
            myList.remove(i);
        }
    } 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2012-12-06T08:56:42.043

对于像这样的简单数组，您不能以这种方式执行此操作

这是完整的示例代码

```
int current_id = 2;
        String[] arr_fav = { "1", "2", "3" };
        for (int i = 0; i < arr_fav.length; i++) {
            if (current_id == Integer.parseInt(arr_fav[i])) {
                String[] arr_fav_tem = new String[arr_fav.length - 1];
                arr_fav[1] = null;
                int counter = 0;
                for (int j = 0; j < arr_fav.length; j++) {
                    if (arr_fav[j] != null) {

                        arr_fav_tem[counter] = arr_fav[j];
                        counter++;
                    }

                }

                arr_fav = arr_fav_tem;

            }
        }

        for (int i = 0; i < arr_fav.length; i++) {
            System.out.println(arr_fav[i]);
        } 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2015-09-02T07:48:34.727

```
 private String[] removeItem(String[] names,
            int position) {

        ArrayList<String> al_temp=new ArrayList<String>();// temporary ArrayList

    for(int i=0;i<names.length;i++)
        {
            al_temp.add(names[i]);
        }

        al_temp.remove(position);
        names= new String[al_temp.size()];//array cleared with new size

        for(int i=0;i<al_temp.size();i++)
        {
            names[i]=al_temp.get(i);
        }

        return names;
    } 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2018-01-17T16:31:39.977

复制此方法：

```
private static String[] deleteElement(String stringToDelete, String[] array) {
    String[] result = new String[array.length];
    int index = 0;

     ArrayList<String> rm = new ArrayList<String>();

    for(int i = 0; i < array.length; i++) {
        rm.add(array[i]);
    }
    for(int i = 0; i < array.length; i++) {
        if(array[i].equals(poistettava)) {
            index = i;
        }
    }
    rm.remove(index);

    result = rm.toArray(new String[rm.size()]);

    return result;
} 
```

要删除元素：

```
String[] array = {"1", "2", "3"};
array = deleteElement("3", array); 
```

# c# - 任务 和 C# 中的 TaskContinuationOptions 澄清？

> ID：13739793
> 
> 赞同：8
> 
> 时间：2012-12-06T08:40:41.683
> 
> 标签：c#, .net, multithreading, .net-4.0, task-parallel-library

我有这个简单的代码：

```
var g=  Task.Factory.StartNew<int> (() => 8)
       .ContinueWith (ant =>{throw null;})
       .ContinueWith (a =>{ Console.WriteLine("OK");},TaskContinuationOptions.NotOnFaulted);

 try{
      Console.WriteLine("1");
      g.Wait();
      Console.WriteLine("2");
     }

catch (AggregateException  ex)
      {Console.WriteLine("catch"); } 
```

输出 ：

```
1
catch
System.AggregateException: A Task's exception(s) were not observed either by Waiting on the Task or accessing its Exception property. As a result, the unobserved exception was rethrown by the finalizer thread. 
```

微博：

*TaskContinuationOptions.NotOnFaulted*

> 指定如果其前件引发未处理的异常，则不应安排继续任务。此选项对多任务延续无效。

行 。

![在此处输入图像描述](../Images/d049a5b36a92054bdde8baea7e0f16c6.png)

没关系 - 不显示这一行会导致上一行 DID 抛出异常。

问题 ：

*   `AggregateException`我是否因为我没有检查过`Exception`房产而得到例外？

*   我是否必须**始终**检查先行项是否抛出异常（在每一行中？）？（*我不能检查每一行！这没有任何意义而且很烦人*）

*   块不`try catch`应该吞下异常吗？（我认为所有异常都会冒泡到等待方法......所以？）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-06T09:48:43.790

> `AggregateException`我是否因为我没有检查过`Exception`房产而得到例外？

不，您会得到一个异常，因为`g`TPL 取消了任务（因为，如 msdn 所述，如果前面的任务引发异常，则不会安排此任务）。

我们在这里有 3 个任务：

1.  原始任务（使用 StartNew）
2.  第一个继续任务（引发异常）
3.  第二个继续任务（打印 OK）（这是代码中的 g 任务）。

问题是您要求 TPL**仅在第二个任务成功完成时才**开始 3d 任务。这意味着如果不满足此条件，TPL 将完全取消您新创建的任务。

**您有未观察到的任务异常，因为您有从未观察到的临时任务（我的列表中的任务 2）。一个因为你从来没有观察到它的错误状态，它会抛出终结器来告诉你它。**

您可以通过在 catch 块中打印任务的状态来检查这一点：

```
catch (AggregateException ex)
{ 
    Console.WriteLine("catch");
    // Will print: Status in catch: Canceled
    Console.WriteLine("Status in catch: {0}", g.Status);
} 
```

> 我是否必须始终检查先行项是否抛出异常（在每一行中？）？（我不能检查每一行！这没有任何意义而且很烦人）

是的，您应该观察先前的任务异常以避免此问题：

```
static class TaskEx
{
    public static Task ObserverExceptions(this Task task)
    {
        task.ContinueWith(t => { var ignore = t.Exception; },
                            TaskContinuationOptions.OnlyOnFaulted);
        return task;
    }
} 
```

然后按如下方式使用它：

```
var g=  Task.Factory.StartNew<int> (() => 8)
       .ContinueWith (ant =>{throw null;})
       .ObserveExceptions()
       .ContinueWith (a =>{ Console.WriteLine("OK");});

 try{
      Console.WriteLine("1");
      g.Wait();
      Console.WriteLine("2");
     }

catch (AggregateException  ex)
      {Console.WriteLine("catch"); } 
```

* * *

**更新：为最后一个项目添加了解决方案**

> try catch 块不应该吞下异常吗？（我认为所有异常都会冒泡到等待方法......所以？）

我们的项目中有一组扩展方法（称为`TransformWith`），可以解决这个特定问题并获得以下收益：

1.  异常会冒泡到 catch 块和
2.  我们不会让应用程序崩溃`TaskUnobservedException`

这里的用法

```
var g = Task.Factory.StartNew(() => 8)
       .ContinueWith(ant => { throw null; })
       // Using our extension method instead of simple ContinueWith
       .TransformWith(t => Console.WriteLine("OK"));

try
{
    Console.WriteLine("1");
    // Will fail with NullReferenceException (inside AggregateExcpetion)
    g.Wait();
    Console.WriteLine("2");
}

catch (AggregateException ex)
{
    // ex.InnerException is a NullReferenceException
    Console.WriteLine(ex.InnerException);
} 
```

这是一个扩展方法：

```
static class TaskEx
{
    public static Task TransformWith(this Task future, Action<Task> continuation)
    {
        var tcs = new TaskCompletionSource<object>();
        future
            .ContinueWith(t =>
            {
                if (t.IsCanceled)
                {
                    tcs.SetCanceled();
                }
                else if (t.IsFaulted)
                {
                    tcs.SetException(t.Exception.InnerExceptions);
                }
                else
                {
                    try
                    {
                        continuation(future);
                        tcs.SetResult(null);
                    }
                    catch (Exception e)
                    {
                        tcs.SetException(e);
                    }
                }
            }, TaskContinuationOptions.ExecuteSynchronously);

        return tcs.Task;
    }    
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-06T09:51:51.153

*   > 我是否因为没有检查 Exception 属性而得到 AggregateException 异常？

任务总是抛出 AggregateException ：http: [//msdn.microsoft.com/en-us/library/system.threading.tasks.task.exception.aspx](http://msdn.microsoft.com/en-us/library/system.threading.tasks.task.exception.aspx)

您可以使用以下方法获取原始异常：

```
var myTask = Task.Factory.StartNew(() => { throw new NotImplementedException(); });
var myException = myTask.Exception.Flatten().InnerException as NotImplementedException; 
```

*   > 我是否必须始终检查先行项是否抛出异常（在每一行中？）？（我不能检查每一行！这没有任何意义而且很烦人）

是的，这很烦人，您应该为每个任务创建两个延续来检查异常：一个检查是否有异常来处理它，另一个在没有异常的情况下继续操作，请参见`TaskContinuationOptions.OnlyOnFaulted`and `TaskContinuationOptions.OnlyOnRanToCompletion`。如果需要，您甚至应该创建第三个延续来处理取消。

*   > try catch 块不应该吞下异常吗？（我认为所有异常都会冒泡到等待方法......所以？）

不，不会，更高级别不会引发异常，您应该`TaskContinuationOptions.OnlyOnFaulted`在任务继续中使用以检查是否存在异常。您只能使用.net 4 中不可用的[async关键字在调用者级别获取任务异常](http://msdn.microsoft.com/en-us/library/vstudio/hh156513.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T18:21:37.650

像这样处理 AggregateExceptions：

```
catch(AggregateException aex)
{
    aex.Handle(ex =>
    {
       // Do some handling and logging
        return true;
    }
} 
```

# c# - 两个输出文件名解析为相同的输出

> ID：13739794
> 
> 赞同：78
> 
> 时间：2012-12-06T08:40:56.787
> 
> 标签：c#, .net, winforms

最近我创建了新的`Form`名为`WorkersScreen`. 当我尝试运行该项目时，出现此错误：

> 错误 1 ​​两个输出文件名解析为相同的输出路径：“obj\x86\Debug\DryWash.WorkersScreen.resources”

这是什么意思，如何解决？

* * *

## 回答 #1

> 赞同：92
> 
> 时间：2013-01-28T08:55:44.650

如果两个 .resx 文件指向同一个表单，就会发生这种情况。主要发生在重命名表单时（可能有其他原因，我不确定）

如果您的特定表单文件如下所示：

```
Form1.cs
Form1.designer.cs
MyFormerFormName.resx
Form1.resx 
```

那么这通常意味着您重命名了表单，但 Visual Studio 没有删除旧的 .resx 文件。手动删除文件（在此示例中`MyFormerFormName.resx`）后，该错误应在下一次构建时消失。

* * *

## 回答 #2

> 赞同：46
> 
> 时间：2016-08-03T07:51:45.747

**通过编辑项目文件查找重复项**

1.  请注意 .resx 故障的名称。

2.  首先通过右键单击您的项目卸载项目，然后单击`Unload Project`。

[![在此处输入图像描述](../Images/8a631aa2b64cab9ee323db759c62cf40.png)](https://i.stack.imgur.com/coYeA.png)

3.  再次右键单击您的项目，然后单击**编辑项目**。

[![在此处输入图像描述](../Images/22f8fb3d216fb32b6183172eb645dd4b.png)](https://i.stack.imgur.com/rM36x.png)

它将向您显示一些代码，查看（或`Search`在步骤 1 中的 resx 文件中）查找重复值，在我的情况下看起来像这样

```
<EmbeddedResource Include="frmTerminalSerial.resx">
      <DependentUpon>frmTerminalSerial.vb</DependentUpon>
</EmbeddedResource>
<EmbeddedResource Include="frmVisual.resx">
      <DependentUpon>frmVisual.vb</DependentUpon>
</EmbeddedResource>
<EmbeddedResource Include="frmVisual.resx">
      <DependentUpon>frmVisual.vb</DependentUpon>
</EmbeddedResource>
<EmbeddedResource Include="My Project\Resources.resx">
      <Generator>VbMyResourcesResXFileCodeGenerator</Generator>
      <LastGenOutput>Resources.Designer.vb</LastGenOutput>
      <CustomToolNamespace>My.Resources</CustomToolNamespace>
      <SubType>Designer</SubType>
</EmbeddedResource> 
```

注意这部分，它是**重复**的！

```
<EmbeddedResource Include="frmVisual.resx">
      <DependentUpon>frmVisual.vb</DependentUpon>
</EmbeddedResource>
<EmbeddedResource Include="frmVisual.resx">
      <DependentUpon>frmVisual.vb</DependentUpon>
</EmbeddedResource> 
```

**删除**其中一个，使其看起来像这样

```
<EmbeddedResource Include="frmTerminalSerial.resx">
      <DependentUpon>frmTerminalSerial.vb</DependentUpon>
</EmbeddedResource>
<EmbeddedResource Include="frmVisual.resx">
      <DependentUpon>frmVisual.vb</DependentUpon>
</EmbeddedResource>
<EmbeddedResource Include="My Project\Resources.resx">
      <Generator>VbMyResourcesResXFileCodeGenerator</Generator>
      <LastGenOutput>Resources.Designer.vb</LastGenOutput>
      <CustomToolNamespace>My.Resources</CustomToolNamespace>
      <SubType>Designer</SubType>
</EmbeddedResource> 
```

保存它，右键单击您的项目，然后单击**重新加载项目**。你完成了！

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2017-08-29T15:51:02.067

通常，如果您创建这样的迁移

```
Add-Migration "UpdateProducts" 
```

Visual Studio 将创建一个类名如 UpdateProducts 的迁移。如果您稍后使用相同的迁移名称添加新迁移，它将生成一个类名如 UpdateProducts1\. 的迁移，并自动在末尾添加一个递增的数字作为后缀。每次生成新的迁移时，数字都会增加 1。

在我们的例子中，由于某种原因，VS 感到困惑，并开始生成与现有迁移具有相同类名的后续迁移，因此有两个自动生成的具有相同名称的迁移。

只需更改新迁移的类名即可解决问题。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-08-26T10:56:21.680

我做了一些搜索，我遇到了同样的问题，这可能是因为您的表单有两个 .resx 如果您尝试删除一个，问题将在我的表单中消失：

```
Form1.Designer.cs
Form1.resx
Log_in.resx
Form1 
```

我删除了 Log_in.resx 并且我的程序再次运行

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2019-07-30T13:21:53.447

我刚刚使用 VS 2019 社区版遇到了这个问题。

我没有重复的 .resx 文件。我没有重复的 .cs 文件。我在网上找不到解决方案。

为了解决这个问题，我*清理*了解决方案，然后*重新启动*了VS。不知道为什么，但它奏效了。希望这可以帮助。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2018-09-18T14:25:33.803

确保您没有两个`.resx`文件。在您的项目中查看`YourServiceName.cs`. 为我工作。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-01-30T19:17:50.920

这只是发生在我身上。我不小心将一个表格“拖放”到另一个表格中。它最终制作了一份名为“Copy of”的副本。我删除了它，问题就消失了。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2014-10-07T22:54:30.333

当我复制表单以重用大部分功能然后重命名表单时，这发生在我身上。我转到引用的目录，发现实际上只有一个文件，复制了有问题的文件，将其重命名为引用我的新表单的名称，然后将新文件粘贴回目录中。

我认为这不是一个好的做法（我是 C# 新手），但它确实有效，而不必重新创建所有内容。我还需要在整个解决方案中的几个地方更新表单名称，这在原始表单和新表单中都令人惊讶。

复制表格似乎不是一个好主意。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2020-01-07T22:40:55.703

在我的情况下，我必须`.csproj`在 Note++ 中打开并在标签中查找`.resx`文件我发现一些奇怪的语言后缀很奇怪其他文件是没有语言后缀或带有 *.ar 后缀的普通文件，我删除了令人毛骨悚然的嵌入资源标签和这为我解决了这个问题。`EmbeddedResource``.resx``example.aa.resx`

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2017-07-16T00:53:13.543

当我不小心生成了与业务对象同名的迁移时，我遇到了这个问题。解决方案是删除迁移，然后创建一个具有不同名称的新迁移。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2015-11-06T01:48:21.300

就我而言，问题是由 Designer.resx 文件的 EmbeddedResource 标记引起的，该标记以某种方式添加到 .csproj 文件中。

具体来说，如下：

```
<EmbeddedResource Include="Forms\frmMenu.designer.resx">
      <DependentUpon>frmMenu.designer.cs</DependentUpon>
</EmbeddedResource> 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2021-03-30T15:41:50.007

我今天遇到了这个问题。

Form.Designer 的扩展名是 .resx，对于我的解决方案，它是 TestForm.Designer.resx。已经有一个TestForm.resx。我清理了解决方案，关闭了VS，删除了TestForm.Designer.resx文件，然后重新启动了VS。我仍然有错误。

然后我关闭了 VS 并使用 NotePad++ 打开了 .proj 文件，发现 TestForm.Designer.resx 仍然被引用。我删除了嵌入的资源。

```
<EmbeddedResource Include="TestForm.Designer.resx">
    <DependentUpon>TestForm.Designer.vb</DependentUpon>
</EmbeddedResource> 
```

然后我打开 VS 并构建....它再次工作！

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2017-05-08T09:21:31.300

在所有项目中搜索错误列表中报告的类，就像在这个问题案例中一样，`DryWash.WorkersScreen`它可以在另一个文件名不同但类名相同的文件中重复。

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2017-05-03T16:47:23.720

我遇到了问题，这是因为我有一个**自定义控件的****部分类**。

 **我不小心为部分创建了一个 .resx 文件

我想我是通过在部分类上按 shift F7 并生成空的设计器表单来做到这一点的。

删除部分类上的 .resx 文件为我解决了这个问题。我正在使用版本控制，它显示它是一个新文件。

希望这可以帮助

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2015-06-24T03:43:37.967

当我运行`Add Migration`命令并将与我的项目名称相同的名称作为迁移类时，这发生在我身上。我删除了所有迁移类并添加了新的类，再次构建解决方案。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2019-06-12T18:01:20.190

我有同样的问题，我所做的是在更新数据库后删除我的迁移文件（通过工作室）。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2016-11-17T14:22:43.620

如果在您使用 EntityFramework 并尝试这样做时出现此问题`Add-Migration`，则解决方案很简单：删除`Migrations`文件夹（在解决方案资源管理器中）并执行`Enable-Migrations`. 如果需要，备份迁移。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2022-01-10T15:56:21.407

正如@WimOmbelets 在他 2013 年的回答中所说，复制表单是重现这个恼人错误的一种非常可靠的方法，至少在 VS 2017、2019 和 2022 年是这样。

正如 Vince De Giorgio 在 2019 年的回答中所说，我也没有重复的 .resx 或 .cs 文件，也没有重复的*...EmbeddedResource Include= .../>* .csproj 中的标签。

删除两个涉及的表单的 .resx 文件（图标消失了，很明显），清理解决方案然后重新启动 VS 是一种穷人的解决方法，因为每次我再次添加图标或其他资源时，都会出现同样令人讨厌的错误。更糟糕的是：为了恢复，我不得不 Git 存储所有修改；如果我手动还原所有更改，以至于 Git 无法识别任何更改，即使在清理、重新启动 VS 和重建之后，错误也会继续（！！！）。

要解决 VS 2019 和 2022 中的问题：

每次我想复制表格时，我都会：

1.  排除要从项目中复制的表格（排除，不要删除！）
2.  在 Windows 资源管理器中，我创建了一个表单的副本并使用 Visual Code（无论如何）打开它们（.cs 和 Designer.cs）
3.  在 Visual Studio 中，我创建了一个具有不同名称的新表单 - 当然
4.  从 VS 代码中粘贴回来的 Designer.cs 和 .cs 代码；更改命名空间、类名和 Tor
5.  再次包含在项目以前的表单中
6.  享受

再也没有这个问题了。

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2017-11-03T14:48:27.190

对我来说，问题是复制和粘贴 .aspx，而不是重命名类文件后面的代码以匹配复制的 aspx 文件的名称。更改背后的代码和设计器类名称有效。

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2016-02-12T09:30:59.740

**在我的选择中，帮助为每个引发错误的表单删除一个 *.resx**

详细信息

在我们的项目中，每个本地化表单（DE、GB、SK、RU、SRB）都有 6 个 *.resx，如果我删除（从 VS）FormName.sr-Latn-CS.resx，错误就会消失。如果我尝试删除 FormName.en-GB.resx 它没有帮助。仅删除 sr-Latn-CS.resx 错误就消失了（也许设计师无法解决两个 - ）。当我将项目从 VS 2010 Win 7 迁移到 VS2010 Win 10 时，我第一次看到这个错误。

* * *

## 回答 #21

> 赞同：-1
> 
> 时间：2014-09-12T04:47:51.960

我想在遇到这个错误后我会在至少一个随机论坛上发帖，希望能缓解别人的问题。我搜索了许多谷歌网站，没有一个有我的确切问题。我的原因是相似的，但在某些方面有所不同。

我实际上有一个分布在多个文件中的部分类。这个类是一个表单类。这本身是成功的，并没有造成问题。但是，这会导致新类在保持拆分“类表单”代码的同时保留其唯一的文件名。这很可能不是犹太洁食的做法，但当时还是发生了。这似乎是一个很好的选择，可以让很多杂乱的代码摆脱困境。不用说，下次我将只使用区域或其他替代方法。

然后，当我尝试从第二个文件中获取代码并将代码复制/粘贴到一个新的非格式文件中时，就会发生错误，因为我原本打算将其本质上变成一个库并使代码更合适，并且可读。由于我不知道究竟是什么导致了错误发生并且进行了少量更改，因此需要一些时间来跟踪。即使在反转代码之后，我还是设法错过了一对方法。

包含类 Form 的主窗体的方法以及 initializeComponent 和窗体构造函数（加载）。这些方法的第二个副本似乎会导致相同的错误。即使删除了额外的代码和额外的表单和 resx 文件。我什至尝试删除合法的 resx 文件，因为它不是主动需要的。我无法有效地跟踪它，因为任何错误都指向这些代码段的合法版本。Ctrl+F 和备份副本是您的朋友。

希望对某人有所帮助

* * *

## 回答 #22

> 赞同：-2
> 
> 时间：2013-01-28T07:52:46.987

我确认评论中给出的 WimOmbelets 答案。当您在 VS2012 中重命名一个类时，这显然会发生（我在以前的版本中从未有过这个）。

我不能确定这是不是原因，但我做的与正常方式不同的一件事是我使用**F2**重命名它，而不是更改它然后按**control-。**

* * *

## 回答 #23

> 赞同：-2
> 
> 时间：2015-12-01T08:05:46.877

当我重命名我的一个`Form`类时，我遇到了同样的问题，使用`Ctrl + R + R`VS 默认提供的重命名事物。

然后我在两个不同的文件（***.cs**）上得到了两个具有相同类名的类。

```
class Bar { ... } // From Bar.cs
class Bar { ... } // This should've been Foo, from Foo.cs 
```

这两个`Bar`指示相同的资源文件，其中一个不应该。

这是一个微不足道的问题，但有时可能很难找到原因，因为查看**cs 文件**无法说出您应该寻找哪个文件。**

# facebook - Facebook 从移动设备共享时不使用 og 元数据

> ID：13739799
> 
> 赞同：1
> 
> 时间：2012-12-06T08:41:27.180
> 
> 标签：facebook, mobile, facebook-opengraph

我有简单的产品页面，其中填充了 facebook 开放图元数据。我已经针对 fb 调试器进行了测试，并且它被 fb 成功抓取。例如。[http://developers.facebook.com/tools/debug/og/object?q=http%3A%2F%2Fshort.stylemology.com%2F1058](http://developers.facebook.com/tools/debug/og/object?q=http%3A%2F%2Fshort.stylemology.com%2F1058)

如果我在我的电脑上进行 facebook 共享，facebook 在共享页面上显示正确的元数据，但是当在墙上查看共享项目时，它指向简单的产品 url，而不是 og:url 中指定的完整产品 url ，但它仍然使用 og、描述和图像。

移动行为更加不稳定。url 和描述都没有被使用，但会显示正确的图像。

我已经查看了移动页面上的源代码，并且它仍然正确地填充了开放图形元数据。

非常困惑，并希望对这种行为有任何见解，因为我研究这个问题的尝试已经失败了。

简单产品页面示例： [http ://short.stylemology.com/1058](http://short.stylemology.com/1058)

提前感谢您的反馈。

# java - 在这种情况下，为什么 Class 没有一个很好的泛型类型？

> ID：13739800
> 
> 赞同：10
> 
> 时间：2012-12-06T08:41:28.813
> 
> 标签：java

在这段代码中，为什么不能将 type 声明为`Class<? extends B>`？

```
public class Foo<B> {
    public void doSomething(B argument) {
        Class<? extends Object> type = argument.getClass();
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T09:02:55.293

这个问题是 Java 的语法不允许 getClass() 说它返回的类型与其定义的类匹配，就编译器而言，这不是特殊情况。所以你被迫转换结果。

在很多情况下，您希望能够指定`this`类型，例如用于链接，所以我希望他们有一天能包含此功能。

你可以写

```
Class<? extends this> getClass(); 
```

或者

```
public this clone(); // must return a type of this class. 
```

或者

```
class ByteBuffer {
    this order(ByteOrder order);
}

class MappedByteBuffer extends ByteBuffer {
}

// currently this won't work as ByteBuffer defines order()
MappedByteBuffer mbb = fc.map(MapMode.READ_WRITE, 0, fc.size())
                         .order(ByteOrder.nativeOrder()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T08:57:16.867

这就是全部`generic type erasure`。从[这里](http://docs.oracle.com/javase/tutorial/java/generics/erasure.html)：

> 如果类型参数是无界的，则将泛型类型中的所有类型参数替换为其边界或 Object。因此，生成的字节码只包含普通的类、接口和方法。[在编译时]

所以你不能得到`Class`实际类型，`B`但只有`?`or `? extends Object`。

如果您的界限将变成`<B extends SomeClass>`而不是`<B>`仅，那么您可以获取`Class`类型的对象`<? extends SomeClass>`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T09:03:12.070

`Object.getClass()`被定义为返回一个类，其中 T 是接收者的静态已知类型（对象 getClass() 被调用）。请特别注意竖线，即擦除运算符。类型变量的擦除是其最左边界的擦除。在您的情况下，这是隐式绑定对象。所以你得到一个 Class，而不是一个`Class<? extends T>`.

正确的做法是，

```
abstract class AbstractExecutor<E> {

public void execute() throws Exception {
    List<E> list = new ArrayList<E>();
    Class<E> cls = (Class<E>) ((ParameterizedType) getClass().getGenericSuperclass()).getActualTypeArguments()[0];
    E e = cls.getConstructor(String.class).newInstance("Gate");
    list.add(e);
    System.out.println(format(list));
}

// ... 
```

}

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-06T10:25:22.333

因为不能保证给定对象的类与存储它的类型相同。

例如。

```
Object o = "some string";

Class<Object> clazz = o.getClass(); // actually Class<String> 
```

通过查看类型，您应该期望 Class for `Object`，但实际上您会得到类 for `String`。您可能会问这是什么问题 -`Object`是 的超类`String`，因此`String`实现了 . 实现的所有方法`Object`。

## 问题

问题是，当获取一个`Field`类时，将返回实际类的字段而不是泛型类型。此外，`Method`如果给定对象中存在覆盖方法，则虽然能够调用正确的方法，但它无法执行相反的操作并找到适用于给定对象的方法的实现。

例如， Object 声明`hashCode`，因此所有对象都有一个哈希码方法。但是，以下将产生运行时异常：

```
Object.class.getMethod("hashCode").invoke("some string"); // works
String.class.getMethod("hashCode").invoke(new Object()); // fails 
```

这是因为`Method`对象 for`hashCode`期待一个`String`. 它期望从字符序列生成哈希码，但提供的对象没有用于该方法工作的 char 数组，因此它失败了。

这意味着以下看起来应该可以工作，但不会因为返回的实际方法`getMethod`是`String`.

```
Object obj = "string";
Class<Object> clazz = obj.getClass();
clazz.getMethod("hashCode").invoke("another string"); 
```

# iphone - 在 Twitter 的窗口上添加视图

> ID：13739802
> 
> 赞同：1
> 
> 时间：2012-12-06T08:41:30.207
> 
> 标签：iphone, ios, xcode, twitter, uiwindow

嗨，我面临一个奇怪的问题。我有一门`NSObject`类型的课程，在同一堂课上，我想在 Facebook 和电子邮件以及 Twitter 上分享图像。我成功完成了 FB 和电子邮件，在电子邮件上我用来`[[[UIApplication sharedApplication] keyWindow] addSubview:mailer.view];`将邮件控制器显示到呈现模型视图控制器的窗口插入上，并且与在 Dismiss 上相同，我使用从超级视图中删除。但是，当我对 twitter 控制器执行相同操作时，twitter 控制器只会显示几毫秒然后隐藏。我还将新的 View 控制器添加到 Window 上，然后将其控制器呈现到该 View 控制器上，但输出相同。不知道怎么回事。请帮忙。提前致谢。这对我来说很棒:)

**已编辑**

```
 if (_engine != nil) {
    _engine = nil;
    [_engine release];
}    
_engine = [[SA_OAuthTwitterEngine alloc] initOAuthWithDelegate: self];
_engine.consumerKey = kOAuthConsumerKey;
_engine.consumerSecret = kOAuthConsumerSecret;

UIViewController *controller = [SA_OAuthTwitterController controllerToEnterCredentialsWithTwitterEngine:_engine delegate: self];

if (controller) {
    NSLog(@"Sharing on Twitter on loading controller of twitter");
     [[UIApplication sharedApplication].keyWindow addSubview:controller.view];

}
else {
    NSLog(@"Sharing on Twitter in else condition");
    [self sharetoTwitter:screenImg];
} 
```

**ShareToTwitter方法**

```
- (void) sharetoTwitter:(UIImage *)img {
NSString *response = [_engine _uploadImage:img requestType:MGTwitterPublicTimelineRequest responseType:MGTwitterStatus]; 
NSLog(@"twitter post notification");
} 
```

我使用添加子视图来加载视图而不是呈现视图。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T12:03:43.500

你试过这个

```
UIWindow *window = [[UIApplication sharedApplication] keyWindow];
[window addSubView:controller.view];
[window makeKeyAndVisible];//important line dont forget to set this line 
```

# cloud-foundry - 是否可以在 Cloud Foundry 中下载或搜索应用程序日志

> ID：13739804
> 
> 赞同：3
> 
> 时间：2012-12-06T08:41:29.643
> 
> 标签：cloud-foundry

我是 Cloud Foundry 的新手，正在尝试找出一种下载日志文件或在 Cloud Foundry 中搜索它们的方法。

我知道我可以使用 vmc 文件打开日志文件，但是还有其他访问日志的方法吗？

谢谢， 金贾尔

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-06T09:19:15.747

我认为最简单的方法是使用 VMC 客户端库“cfoundry”。

以下 ruby​​ 脚本连接并下载三个主要日志：

```
#!/usr/bin/env ruby

require 'rubygems'
require 'cfoundry'

creds = { :username => ARGV[0], :password => ARGV[1] }
app_name = ARGV[2]

files_to_dl = ['logs/staging.log', 'logs/stderr.log', 'logs/stdout.log']

c = CFoundry::Client.new "http://api.cloudfoundry.com"
c.login creds

app = c.app_by_name app_name

files_to_dl.each do |file|
  begin
    content = app.file(file)

    local_path = file.match(/\/([^\/]+)$/)[1]
    File.open(local_path, 'w') { |f| f.write(content) }

  rescue CFoundry::NotFound
    puts "404!"
  end
end 
```

此脚本假定您使用的是最新版本的 VMC（较旧的旧版本不使用 cfoundry），并且在调用脚本时您还传递了用户名、密码和应用程​​序名称。它将在本地写入远程文件的内容。

# internet-explorer - 为什么矩阵过滤器在ie中不起作用

> ID：13739807
> 
> 赞同：1
> 
> 时间：2012-12-06T08:41:42.333
> 
> 标签：internet-explorer, transform

我尝试在ie中旋转元素，所以我使用矩阵过滤器，html：

```
<div id="car" style="position: absolute; width: 52px; height: 26px; -moz-transform: rotate(45deg); left: 20px; top:206px; z-index: 1000;">
    <img src="http://i.stack.imgur.com/dcwtR.png" />
</div> 
```

然后添加过滤器：

```
 var a=document.getElementById("car"),b=45;
        a.style.filter = 'progid:DXImageTransform.Microsoft.Matrix(sizingmethod="auto expand")';
        var e = Math.cos(b * Math.PI / 180),
        c = Math.sin(b * Math.PI / 180),
        g = a.filters.item(0);
        g.M11 = g.M22 = e;
        g.M21 = -c;
        g.M12 = c; 
```

然后div旋转了，但是图片周围有黑色的轮廓。

[提琴手](http://jsfiddle.net/mRtQS/)

看到这个：![在此处输入图像描述](../Images/cd30635c9d6bce95f38c0c24ca0693b3.png)

# c# - 自定义 VirtualPathProvider 中的无限循环导致 IIS 崩溃

> ID：13739808
> 
> 赞同：1
> 
> 时间：2012-12-06T08:41:41.793
> 
> 标签：c#, .net, iis, crash, infinite-loop

我们的 IIS 定期崩溃，我们通过正在调查的 DebugDiag 进行了崩溃转储。

异常代码始终是 e053534f，我认为这是堆栈溢出，因此一直在查看堆栈跟踪以找到某种无限循环。出现两种不同的堆栈跟踪：

```
System.Web.VirtualPath.Create(System.String, System.Web.VirtualPathOptions)
System.Web.VirtualPathUtility.ToAppRelative(System.String)
Company.AssemblyResourceProvider.IsAppResourcePath(System.String)
Company.AssemblyResourceProvider.GetCacheDependency(System.String, System.Collections.IEnumerable, System.DateTime)
System.Web.Hosting.VirtualPathProvider.GetCacheDependency(System.String, System.Collections.IEnumerable, System.DateTime)
Company.AssemblyResourceProvider.GetCacheDependency(System.String, System.Collections.IEnumerable, System.DateTime)
System.Web.Hosting.VirtualPathProvider.GetCacheDependency(System.String, System.Collections.IEnumerable, System.DateTime) 
```

和

```
System.Web.Hosting.MapPathBasedVirtualPathProvider.GetFile(System.String)
Company.AssemblyResourceProvider.GetFile(System.String)
Company.AssemblyResourceProvider.GetFile(System.String)
Company.AssemblyResourceProvider.GetFile(System.String) 
```

AssemblyResourceProvider 的代码如下所示。

```
public class AssemblyResourceProvider : System.Web.Hosting.VirtualPathProvider  
{
    public AssemblyResourceProvider() {}
    private bool IsAppResourcePath(string virtualPath)
    {
        String checkPath =
           VirtualPathUtility.ToAppRelative(virtualPath);
        return checkPath.StartsWith("~/App_Resource/", StringComparison.InvariantCultureIgnoreCase);
    }
    public override bool FileExists(string virtualPath)
    {
        return (IsAppResourcePath(virtualPath) || base.FileExists(virtualPath));
    }
    public override VirtualFile GetFile(string virtualPath)
    {
        if (IsAppResourcePath(virtualPath))
            return new AssemblyResourceVirtualFile(virtualPath);                
        else
            return base.GetFile(virtualPath);
    }
    public override System.Web.Caching.CacheDependency GetCacheDependency(string virtualPath, System.Collections.IEnumerable virtualPathDependencies, DateTime utcStart)
    {
        if (IsAppResourcePath(virtualPath))
            return null;
        else 
            return base.GetCacheDependency(virtualPath, virtualPathDependencies, utcStart);
    }
} 
```

我无法在任何开发设置上重现该错误，所以这就是我必须继续的。

我自己的理论是我应该更换底座。与上一个。但是从 MS 中查看 VirtualPathProvider 的代码，它似乎只是包装了对 Previous 的调用。由于无法在本地复制，我只能做出改变，推动生活，看看会发生什么。

我希望这里有人能够解释为什么会发生循环。

**更新 1**

有另一个崩溃和转储文件，其中记录了堆栈跟踪的第三个变体：

```
System.Web.Hosting.MapPathBasedVirtualPathProvider.GetFile(System.String)
Company.AssemblyResourceProvider.GetFile(System.String)
System.Web.VirtualPathUtility.ToAppRelative(System.String)
Company.AssemblyResourceProvider.GetFile(System.String)
System.Web.VirtualPathUtility.ToAppRelative(System.String)
Company.AssemblyResourceProvider.GetFile(System.String)
System.Web.VirtualPathUtility.ToAppRelative(System.String) 
```

**更新 2**

尝试使用上一个。而不是基地。没有解决任何问题。

# javascript - jquery 将 div 动画到中心

> ID：13739811
> 
> 赞同：6
> 
> 时间：2012-12-06T08:41:50.510
> 
> 标签：javascript, jquery, jquery-animate

html:

```
<div id="container">
    <div id="header">
          <div id="animate">
        cartagena
      </div>
        </div> 
```

我想要做的是使用 Jquery 将“动画”div 移动到中心。

我现在的js：

```
$(document).ready(function() {
      $("#animate").animate({left: "+=512"}, 2000); 
}); 
```

现在我想把它放到中心而不是右边的 512 像素。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-06T08:45:48.140

我假设 的位置`#animate`是`absolute`。要将元素在其父元素中居中，只需将其父元素宽度的一半减去其自身宽度的一半添加到`left`：

```
$("#animate").animate({
    left: $("#animate").parent().width() / 2 - $("#animate").width() / 2
}, 2000); 
```

我使用 jsFiddle创建了一个[演示。](http://jsfiddle.net/8gJAa/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T08:54:16.420

You can use it this way to center it to the screen,

***Jquery***

```
$(document).ready(function() {
  $("#animate").animate({left: $(window).width() / 2}, 2000);
}); 
```

***css***

```
<style type="text/css">
div
{
     height: 50px; width: 50px; background-color: Red;position:absolute; top:0; left:0;
}
</style> 
```

***html***

```
<div id="container">
    <div id="header">
        <div id="animate">
            cartagena
        </div>
    </div>
</div> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-07-18T14:30:35.357

假设您想以窗口为中心，请使用以下代码：

```
$("#myJQUIDialog").parent().position({
    my: "center",
    at: "center",
    of: window,
    using: function (pos, ext) {
        $(this).animate({ top: pos.top }, 600);
    }
}); 
```

这使对话框居中，并同时设置动画，从而实现平滑居中

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2019-04-05T14:48:37.203

这是另一个例子，也许它应该有用。我正在使用“滚动”来制作效果。

希望它可以帮助或有用:) ...

`<http://jsfiddle.net/p609dm7y/2/>`

# scala - 在 scala 中使用 Cascading 2.0 时出现编译错误

> ID：13739813
> 
> 赞同：2
> 
> 时间：2012-12-06T08:41:56.937
> 
> 标签：scala, cascading

我在 scala 中使用级联 2.0，遇到了一个奇怪的编译问题

这是代码的主要部分

```
val sojSource = createSojSource(optionMap("input"))

val sinkScheme = createSojScheme(true)
val sink = new Hfs(sinkScheme, optionMap("output"), SinkMode.REPLACE)

var pipe = new Pipe("soj")
val each = new Each(pipe, new SojSampleFilter())

val flowDef = new FlowDef().addSource(pipe, sojSource).addTailSink(each, sink)// compile error 
```

这是最后一行代码的错误消息

```
type mismatch; found : cascading.tap.hadoop.Hfs required: cascading.tap.Tap[_, _, _] 
Note: org.apache.hadoop.mapred.JobConf <: Any (and cascading.tap.hadoop.Hfs <: cascading.tap.Tap[org.apache.hadoop.mapred.JobConf,org.apache.hadoop.mapred.RecordReader,org.apache.hadoop.mapred.OutputCollector]), but Java-defined class Tap is invariant in type Config. You may wish to investigate a wildcard type such as `_ <: Any`. (SLS 3.2.10) 
Note: org.apache.hadoop.mapred.RecordReader <: Any (and cascading.tap.hadoop.Hfs <: cascading.tap.Tap[org.apache.hadoop.mapred.JobConf,org.apache.hadoop.mapred.RecordReader,org.apache.hadoop.mapred.OutputCollector]), but Java-defined class Tap is invariant in type Input. You may wish to investigate a wildcard type such as `_ <: Any`. (SLS 3.2.10) 
Note: org.apache.hadoop.mapred.OutputCollector <: Any (and cascading.tap.hadoop.Hfs <: cascading.tap.Tap[org.apache.hadoop.mapred.JobConf,org.apache.hadoop.mapred.RecordReader,org.apache.hadoop.mapred.OutputCollector]), but Java-defined class Tap is invariant in type Output. You may wish to investigate a wildcard type such as `_ <: Any`. (SLS 3.2.10) 
```

请你告诉我如何解决这个问题以及原因是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T08:16:36.963

我在解决这个问题的烫伤树中找到了这段代码：

```
// The scala compiler has problems with the generics in Cascading
protected def castHfsTap(tap : Hfs) : Tap[JobConf, RecordReader[_,_], OutputCollector[_,_]] = {
  tap.asInstanceOf[Tap[JobConf, RecordReader[_,_], OutputCollector[_,_]]]
} 
```

# prism - 如何避免 Microsoft.Practices.Prism.Regions.UpdateRegionsException

> ID：13739814
> 
> 赞同：0
> 
> 时间：2012-12-06T08:41:59.457
> 
> 标签：prism

仅当我尝试访问该区域时，我才第一次收到此异常。

```
 var regionManager = ServiceLocator.Current.GetInstance<IRegionManager>();
  IRegion region = regionManager.Regions[Regions.DevicePropertiesRegion]; 
```

例外只在这里第一次出现。第二次它工作正常。此外，如果我通过调试达到这一点并等待一段时间，它也第一次工作。看起来后台正在进行一些更新。知道如何解决这个问题。

# java - 如何从 android APK 生成调用图？

> ID：13739815
> 
> 赞同：5
> 
> 时间：2012-12-06T08:42:00.593
> 
> 标签：java, android, call-graph, smali

我从 Google Play 下载了一些 Android 应用程序。我`Smali`通过逆向工程工具获得了代码`apktool`。我想为这些应用程序生成调用图。我在堆栈溢出和谷歌上看到了很多链接，大多数建议的工具要么是 for ，要么`c/c++`是 for `Java`，当然，它们需要我没有的源代码。

有没有办法自动生成调用图？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T05:12:24.833

apkinspector - [http://code.google.com/p/apkinspector/](http://code.google.com/p/apkinspector/)

该项目的目标是帮助分析师和逆向工程师可视化编译的 Android 包及其相应的 DEX 代码。APKInspector 提供分析功能和图形功能，让用户深入了解恶意应用程序：

*   CFG
*   调用图
*   静态仪器
*   权限分析
*   达尔维克代码
*   小码
*   Java 代码
*   APK信息

我尝试在我的计算机（Debian 6.0）中安装 apkinspector：

```
sudo aptitude install libxext-dev
source compile python-qt and python-sip

http://sourceforge.net/projects/pyqt/files/PyQt4/PyQt-4.9.4/

sudo aptitude install python-tk

easy_install ipython
(sudo aptitude install python-pip & sudo pip install ipython)

vi androguard/androlyze.py
change "import IPython.ipapi" to "import IPython.core.ipapi"
change "from IPython import IPShellEmbed" to "import IPython"
change "IPShellEmbed" to "IPython.embed" 
```

但是很遗憾不能使用！！！

因此我尝试使用 Ruby 编写自己的工具，可以在[这里找到](https://github.com/ytliu/apk-static-xref)

# asp.net - .sln 文件包含 xml 或代码（如 vb）中的信息？

> ID：13739817
> 
> 赞同：1
> 
> 时间：2012-12-06T08:42:03.370
> 
> 标签：asp.net

我正在阅读**使用 .net 框架 4.0 开发 Web 应用程序**一书 (70-515)。在那我发现一个句子在第 21 页**解决方案文件是一个包含信息的 XML 文件……**读完这句话后，我在记事本中打开了 .sln 文件。但奇怪的是我在那里没有找到任何xml。它包含一些类似于 VB 代码的代码。即使我提到了[微软](http://msdn.microsoft.com/en-us/library/bb165951%28v=vs.80%29.aspx)的链接，也没有提到它是 xml 文件。那本书那句话是错的吗？请任何人澄清我！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T08:44:47.610

项目文件是 XML，但解决方案文件不是。

# android - 数据库表中每一行的活动

> ID：13739819
> 
> 赞同：0
> 
> 时间：2012-12-06T08:42:13.630
> 
> 标签：android

对于我目前正在为 Android 使用 Java 构建的应用程序，我正在寻找以下内容。我有一组可以说 10 个数据库记录。对于每一行，我想显示一个活动（每次都是相同的活动）。活动对于要更新的​​每一行都有一些字段。

例如，假设您有一个包含联系人的记录集，现在您想要遍历所有 10 个联系人并更新数据。

现在我不确定这应该如何在android中工作。我应该为此使用片段吗？我应该如何建模。一些伪代码会有所帮助。

由于这是我正在为 ICS 开发的自定义应用程序

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T09:23:14.207

用. `FragmentActivity`_`ViewPager`

`ViewPager`用于`Adapter`显示具有不同数据的相同片段。

例如，如果您将要显示的数据库图像 ID 存储在数据库中，则代码将如下所示。

```
public class MyActivity extends FragmentActivity {

public static class MyFragment extends Fragment {
    @Override
    public View onCreateView(final LayoutInflater inflater, final ViewGroup container, final Bundle savedInstanceState) {
        final ImageView content = new ImageView(getActivity());
        content.setImageResource(getArguments().getInt("img"));

        return content;
    }
}

private class MyPagerAdapter extends FragmentStatePagerAdapter {
    private final ArrayList<Integer> imgs;

    public AppTourPagerAdapter(final FragmentManager fm, final ArrayList<Integer> imgs) {
        super(fm);
        this.imgs = imgs;
    }

    @Override
    public int getCount() {
        return imgs.size();
    }

    @Override
    public Fragment getItem(final int position) {
        final MyFragment fragment = new MyFragment();
        final Bundle args = new Bundle();
        args.putInt("img", imgs.get(position));
        fragment.setArguments(args);
        return fragment;
    }
}

@Override
protected void onCreate(final Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.my_activity);

    final ViewPager pager = (ViewPager) findViewById(R.id.pager);
    final ArrayList<Integer> imgIds = ... // get values from database
    pager.setAdapter(new MyPagerAdapter(getSupportFragmentManager(), imgIds));
}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T09:22:59.920

使用带有 viewpager 适配器的 viewpager。然后使用视图寻呼机创建一个布局，然后创建一个布局，该布局将包含您希望翻阅的视图寻呼机中的项目。在适配器中为您希望翻转的布局充气。网上有很多例子。去谷歌上查询。你可以复制粘贴 90% 的内容，你需要让它工作。

# java - 使用 Spring 将文本文件直接注入 String

> ID：13739823
> 
> 赞同：21
> 
> 时间：2012-12-06T08:42:29.663
> 
> 标签：java, spring, inject

所以我有这个

```
@Value("classpath:choice-test.html")
private Resource sampleHtml;
private String sampleHtmlData;

@Before
public void readFile() throws IOException {
    sampleHtmlData = IOUtils.toString(sampleHtml.getInputStream());
} 
```

我想知道的是，是否可以不使用 readFile() 方法并让 sampleHtmlData 注入文件的内容。如果不是，我将不得不忍受这个，但这将是一个不错的捷径。

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-12-06T08:54:23.667

从技术上讲，您可以使用 XML 以及工厂 bean 和方法的笨拙组合来做到这一点。但是，当您可以使用 Java 配置时，为什么还要麻烦呢？

```
@Configuration
public class Spring {

    @Value("classpath:choice-test.html")
    private Resource sampleHtml;

    @Bean
    public String sampleHtmlData() {
        try(InputStream is = sampleHtml.getInputStream()) {
            return IOUtils.toString(is, StandardCharsets.UTF_8);
        }
    }
} 
```

请注意，我还`sampleHtml.getInputStream()`使用*try-with-resources*习惯用法关闭了返回的流。否则你会得到内存泄漏。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T08:54:34.840

据我所知，没有内置功能，但你可以自己做，例如：

```
<bean id="fileContentHolder">
  <property name="content">
    <bean class="CustomFileReader" factory-method="readContent">
      <property name="filePath" value="path/to/my_file"/>
    </bean>
   </property>
</bean> 
```

其中 readContent() 返回从 path/to/my_file 上的文件读取的字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-07-22T02:09:25.603

如果您希望每次注入减少到一行，您可以添加注释和条件转换器。这还将在 IntelliJ 中保留 ctrl-click 导航和自动完成功能。

```
@SpringBootApplication
public class DemoApplication {

    @Value("classpath:application.properties")
    @FromResource
    String someFileContents;

    @PostConstruct
    void init() {
        if (someFileContents.startsWith("classpath:"))
            throw new RuntimeException("injection failed");
    }

    public static void main(String[] args) {
        SpringApplication.run(DemoApplication.class, args);
    }

    DemoApplication(ConfigurableEnvironment environment, ResourceLoader resourceLoader) {
        // doing it in constructor ensures it executes before @Value injection in application
        // if you don't inject values into application class, you can extract that to separate configuration
        environment.getConversionService().addConverter(new ConditionalGenericConverter() {
            @Override
            public boolean matches(TypeDescriptor sourceType, TypeDescriptor targetType) {
                return targetType.hasAnnotation(FromResource.class);
            }

            @Override
            public Set<GenericConverter.ConvertiblePair> getConvertibleTypes() {
                return Set.of(new GenericConverter.ConvertiblePair(String.class, String.class));
            }

            @Override
            public Object convert(Object source, TypeDescriptor sourceType, TypeDescriptor targetType) {
                try (final var stream = resourceLoader.getResource(Objects.toString(source)).getInputStream()) {
                    return StreamUtils.copyToString(stream, StandardCharsets.UTF_8);
                } catch (IOException e) {
                    throw new IllegalArgumentException(e);
                }
            }
        });
    }
}

@Target({ElementType.FIELD, ElementType.METHOD, ElementType.PARAMETER, ElementType.ANNOTATION_TYPE})
@Retention(RetentionPolicy.RUNTIME)
@Documented
@interface FromResource {
} 
```

# c# - 从 LINQ 和 C# 中的 XML 文件中检索节点值

> ID：13739826
> 
> 赞同：2
> 
> 时间：2012-12-06T08:42:33.007
> 
> 标签：c#, xml, linq, linq-to-xml

我有一个 xml 文件，我想将`message`属性中的值从`string`以下结构中检索到数组中：

```
<Exceptions>
  <Exception Name="Address">
    <Error id="Line1" message="Address Line 1 is required"/>
    <Error id="Line1Length" message="Address Line 1 must be in-between 1 and 50"/>
    <Error id="Line2Length" message="Address Line 2 must be in-between 1 and 50"/>
  </Exception>
  <Exception Name="Email">
    <Error id="Line1" message="Email is required"/>
  </Exception>
</Exceptions> 
```

如何使用 LINQ-XML 做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-06T08:46:28.463

```
string id = "Line1Length";
XDocument xdoc = XDocument.Load(path_to_xml);
var messages = xdoc.Descendants("Error")
                   .Where(e => (string)e.Attribute("id") == id)
                   .Select(e => (string)e.Attribute("message")); 
```

此外，如果您没有提供 xml 文件的完整结构，则：

```
var messages = xdoc.Descendants("Exceptions")
                   .Element("Exception")
                   .Elements("Error")
                   .Where(e => (string)e.Attribute("id") == id)
                   .Select(e => (string)e.Attribute("message")); 
```

*顺便说一句*，这将返回`IEnumerable<string> messages`。如果你想要数组，那么`ToArray()`在选择运算符之后应用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T08:51:06.413

像这样的东西：

```
string xml = "<Exceptions>
  <Exception Name='Address'>
    <Error id='Line1' message='Address Line 1 is required'/>
    <Error id='Line1Length' message='Address Line 1 must be in-between 1 and 50'/>
    <Error id='Line2Length' message='Address Line 2 must be in-between 1 and 50'/>
  </Exception>
</Exceptions>";

var document = XDocument.Load(new XmlTextReader(xml));
var messages = document.Descendants("Error").Attributes("message").Select(a => a.Value); 
```

# linux - Bash 数量限制？

> ID：13739828
> 
> 赞同：11
> 
> 时间：2012-12-06T08:42:41.467
> 
> 标签：linux, bash, numbers

我之前问[过一个问题](https://stackoverflow.com/questions/13736745/bash-read-numbers-from-file-until-line-n)，涉及从文本文件中提取大素数并将它们放入另一个文件中。它应该抓住每个素数，包括 2^32 之后的第一个素数，但由于某种原因，这个脚本停止工作。

```
#!/bin/bash
n=4294967296
last=0
while read number
    do
    if [ $last -gt $n ]
    then break
    fi
    echo $number
last=$number
done < primes.txt > primes2.txt 
```

它最终遍历了这 11 个数字：

```
4232004449  
4232004479  
4232004493  
4232004509  
4232004527  
4232004533  
4232004559  
4232004589  
4232004593  
4232004613  
004437 
```

原始文件中没有`004437`，我的 bash 将处理数字`8999999999999999999`

有人知道为什么会这样吗？

> 64 位 Ubuntu 10.04、16GB RAM、8 核 @ 3.60 GHz
> GNU bash，版本 4.1.5(1)-release (x86_64-pc-linux-gnu)

**更新：**

在下载并编译 jfgagne 提供的“固定”bash 并在我的 bash 脚本中链接到它之后，它在同一个确切的位置出错。使用我最初的主要问题中明显更快的 perl 等效项，我从 ls -al 获得了一些文件大小：

```
 11  next_prime (just to make sure this was counting bytes accurately)
2147483659  primes2.txt
2147483670  one_too_many 
```

2147483659 = 2^31 + 11

下一个素数 ( `4232004631`) 的大小是 11 字节 这将所有素数保存到`4232004613`. 我还意识到`004437`来自这个错误循环底部的素数末尾（`4232004437`）。似乎有什么东西试图推进，但卡住了。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-11-25T11:55:44.427

不，它与您的操作系统的位大小无关。它依赖于 bash 源代码中的一个简单声明。

自 2002 年左右以来，此声明为 __int64_t。从那时起，bash 版本 >= 3.00 始终使用 64 位整数变量，并且不依赖于体系结构！它仅取决于 bash 版本。

以前版本的 bash 始终使用 32 位整数，即使在 64 位操作系统上也是如此。

# plugins - 更改文本样式时换行符消失

> ID：13739829
> 
> 赞同：1
> 
> 时间：2012-12-06T08:42:45.617
> 
> 标签：plugins, styles, ckeditor

我正在使用 CKEDITOR 3.X。我制作了一个插件来更改字体样式（不想使用'stylesheetparser'，因为我只想通过一键更改样式）

在 plugin.js 中：

```
exec : function( editor )
{ 
           var style = new CKEDITOR.style(
                 { styles: { 'color': 'Purple'}}); 
           style.apply(editor.document); 
     } 
```

它有效，但如果我选择包含该行最后一个字符的句子，它会删除 text 中的换行符，然后将 2 行连接在一起......

```
**testing line1**

testing line2 
```

变得

```
**testing line1**testing line2 
```

有什么建议可以解决这个问题吗？谢谢~~

# jquery-ui - rcarousel 添加自定义事件

> ID：13739831
> 
> 赞同：2
> 
> 时间：2012-12-06T08:42:52.090
> 
> 标签：jquery-ui, carousel

我想使用 rcarousel jquery。到目前为止，它运行良好。我有以下问题：当轮播的图像改变时，我想让背景图像也改变。为此，我应该能够捕获页面更改时触发的事件。有没有办法做到这一点？？

我正在考虑覆盖该方法：

```
$("#ui-carousel-next").bind("click", function(e) {} 
```

这适用于下一个/上一个/页面，但不适用于自动更改。任何提示？

谢谢你，科林

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-01T02:41:43.863

rcarousel 插件确实为您提供 pageLoaded 事件： [http ://ryrych.github.io/rcarousel/#options](http://ryrych.github.io/rcarousel/#options)

```
$("#carousel").rcarousel({
    pageLoaded: pageLoaded
});

function pageLoaded(event, data) {
    //do something magical
} 
```

通过这种方式，您可以对每个 pageLoaded 事件执行所需的任何操作。

# ios - 使用 coredata 将图像保存到设备

> ID：13739838
> 
> 赞同：0
> 
> 时间：2012-12-06T08:43:30.940
> 
> 标签：ios, core-data

```
- (IBAction)saveImage:(id)sender{

    AppDelegate *appDelegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];
    NSManagedObjectContext *context = [appDelegate managedObjectContext];

    NSManagedObject *image = [NSEntityDescription insertNewObjectForEntityForName:@"Image" inManagedObjectContext:context];
                              images.image = image;

                              [image setValue:tmpphoto forKey:@"img"];

                               CGSize size = tmpphoto.size;
                               CGFloat ratio = 0;
                               if (size.width > size.height) {
                                   ratio = 90.0 / size.width;
                               } else {
                                   ratio = 90.0 / size.height;
                               }
                               CGRect rect = CGRectMake(0.0, 0.0, ratio * size.width, ratio * size.height);

                               UIGraphicsBeginImageContext(rect.size);
                               [tmpphoto drawInRect:rect];

                               images.imaget = UIGraphicsGetImageFromCurrentImageContext();

                               UIGraphicsEndImageContext();

} 
```

我的实体名称是“图像”，属性为 img(transformable)，imgcode(string) 我试图用核心数据将此图像保存到我的设备。但我有这个错误，可能是什么问题？先感谢您...

错误：'NSInvalidArgumentException'，原因：'无法将模型与名为'Image'的两个不同实体合并'

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T08:55:54.117

将图像属性的类型设置为`NSData`而不是可转换的，当您想要获取图像时，使用`PNG`表示来获取它。

[看到这个](http://www.bukisa.com/articles/188059_iphone-core-data-tutorial-part-2)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T09:31:10.963

NSData *imageData = UIImagePNGRepresentation(tmpphoto); NSManagedObject *image = [NSEntityDescription insertNewObjectForEntityForName:@"Image" inManagedObjectContext:context]; 图像.图像 = 图像；

```
[image setValue:imageData forKey:@"img"];

CGSize size = tmpphoto.size;
CGFloat ratio = 0;
if (size.width > size.height) {
        ratio = 44.0 / size.width;
} else {
    ratio = 44.0 / size.height;
}
CGRect rect = CGRectMake(0.0, 0.0, ratio * size.width, ratio * size.height);

UIGraphicsBeginImageContext(rect.size);
[tmpphoto drawInRect:rect];
images.imaget = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext(); 
```

我已经改变了这样，我有同样的问题。而且在数据模型中，我们没有 NSData 选项。我们为图像提供的二进制数据和可转换选项

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T07:56:36.803

```
NSManagedObjectContext *context = [(AppDelegate *)[[UIApplication sharedApplication] delegate] managedObjectContext];
    if (!currentPicture)
        self.currentPicture = (ImageList *)[NSEntityDescription insertNewObjectForEntityForName:@"ImageList" inManagedObjectContext:context];

    if (imageview.image)
    {
        float resize = 74.0;
        float actualWidth = imageview.image.size.width;
        float actualHeight = imageview.image.size.height;
        float divBy, newWidth, newHeight;
        if (actualWidth > actualHeight) {
            divBy = (actualWidth / resize);
            newWidth = resize;
            newHeight = (actualHeight / divBy);
        } else {
            divBy = (actualHeight / resize);
            newWidth = (actualWidth / divBy);
            newHeight = resize;
        }
        CGRect rect = CGRectMake(0.0, 0.0, newWidth, newHeight);
        UIGraphicsBeginImageContext(rect.size);
        [imageview.image drawInRect:rect];
        UIImage *smallImage = UIGraphicsGetImageFromCurrentImageContext();
        UIGraphicsEndImageContext();

        NSData *smallImageData = UIImageJPEGRepresentation(smallImage, 1.0);
        [self.currentPicture setMyimage:smallImageData];
    }
    NSError *error;
    if (![context save:&error]){
        NSLog(@"Failed to add new picture with error: %@", [error domain]);}
    else
    {
        UIAlertView *AlertCampo = [[UIAlertView alloc] initWithTitle:@"
" message:@"Your image successfully saved into your device"
                                                            delegate:nil
                                                   cancelButtonTitle:@"OK"
                                                   otherButtonTitles:nil];
        [AlertCampo show];
    } 
```

有了这个，我解决了我的问题。谢谢大家。

# matlab - 在一张图上绘制两个不同时间的图

> ID：13739839
> 
> 赞同：2
> 
> 时间：2012-12-06T08:43:31.720
> 
> 标签：matlab, plot, sampling

我有两张图，一张是测量（graph2），一张是模拟结果（graph1）。我需要在 Matlab 中将它们绘制在一个图形上，但问题是 graph1 有样本，而 graph2 有时间值分配给 x 轴。如何从样本或样本中抽出时间将它们绘制在同一张图上？

![在此处输入图像描述](../Images/1bee61da8d664796f9c4515cb7b95652.png)

上图是Graph1，下图是Graph2。

![在此处输入图像描述](../Images/00c4294a9b4cb67973475905007707ef.png)

它们达到 0 的时间是：

图1：x=3444

图2：x=259

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T09:29:54.037

我认为你的问题是一个情节使用样本的*索引*作为它的`x`值，而另一个使用实际*时间*作为值`x`。

您必须缩放`x`-axis 以使两个`x`-axes 描述为相同的数量。我不知道你如何取样的细节，但这里有一个简单的例子：

```
figure(1), clf, hold on

% some example data
x1 = 0:0.1:2*pi;  
y1 = sin(x1);    

x2 = 0:numel(x1);    % add a bit of noise, just for kicks
y2 = sin(2*pi*x2/numel(x1)) + 0.02*randn(size(x2));    

% plot naively
subplot(1,2,1), hold on
plot(x1, y1, 'r')
plot(x2, y2, 'b')    

% plot w/ re-scaled x-axis
subplot(1,2,2), hold on
plot(x1, y1, 'r')

x2 = linspace(min(x2(:)), max(x1(:)), numel(x2));

plot(x2, y2, 'b') 
```

输出： ![示例输出](../Images/b8f5cf0dfff25c14fffb8354b2838ee1.png)

同样，您应该如何重新缩放 x 数据的具体实施取决于您的实验的具体情况。您可能需要稍作修改才能使它们对应。

# solaris - rsh -l login host ls 连接被拒绝（Unix Solaris 9）

> ID：13739844
> 
> 赞同：1
> 
> 时间：2012-12-06T08:43:49.753
> 
> 标签：solaris, rsh

我目前在登录远程服务器时遇到问题。我可以用 rsh -l login host 完美登录。或使用 rlogin。

但是，当尝试使用 ls 命令时，服务器会拒绝连接。我没有root帐户。

.rhosts 的内容是使用服务器名称和我执行连接的登录名设置的。

/etc/pam.conf 的内容

```
# Authentication management
#
# login service (explicit because of pam_dial_auth)
#
login   auth requisite          pam_authtok_get.so.1
login   auth required           pam_dhkeys.so.1
login   auth required           pam_unix_cred.so.1
login   auth required           pam_unix_auth.so.1
login   auth required           pam_dial_auth.so.1
#
# rlogin service (explicit because of pam_rhost_auth)
#
rlogin  auth sufficient         pam_rhosts_auth.so.1
rlogin  auth requisite          pam_authtok_get.so.1
rlogin  auth required           pam_dhkeys.so.1
rlogin  auth required           pam_unix_cred.so.1
rlogin  auth required           pam_unix_auth.so.1 
```

/etc/hosts.deny 的内容

```
sshd : ALL 
```

你有什么建议吗？谢谢你。

# ios - 如何在ios中增加旋转轮的大小？

> ID：13739846
> 
> 赞同：0
> 
> 时间：2012-12-06T08:44:01.003
> 
> 标签：ios, rotation

![在此处输入图像描述](../Images/2f5067ac37d3dc85f4485f027ae1810b.png)我正在使用旋转轮开发一个 iPad 应用程序。[我使用了此链接http://www.raywenderlich.com/9864/how-to-create-a-rotating-wheel-control-with-uikit](http://www.raywenderlich.com/9864/how-to-create-a-rotating-wheel-control-with-uikit)中给出的代码。在此我增加了旋转轮框尺寸。我使用了下面的代码

```
SMRotaryWheel *wheel = [[SMRotaryWheel alloc] initWithFrame:CGRectMake(0, 0, 400, 400)  
                                                andDelegate:self 
                                               withSections:8];

wheel.center = CGPointMake(400,300);
[self.view addSubview:wheel]; 
```

这会增加图像大小。用于旋转的轮子尺寸相同。我想将轮圈增大。我使用下面的代码来绘制轮子。请帮我做。

```
 - (void) drawWheel {
    container = [[UIView alloc] initWithFrame:self.frame];

    CGFloat angleSize = 2*M_PI/numberOfSections;

    for (int i = 0; i < numberOfSections; i++) {
        UIImageView *im = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"segment.png"]];

        im.layer.anchorPoint = CGPointMake(1.0f, 0.5f);
        im.layer.position = CGPointMake(container.bounds.size.width/2.0-container.frame.origin.x, 
                                        container.bounds.size.height/2.0-container.frame.origin.y); 
        im.transform = CGAffineTransformMakeRotation(angleSize*i);
        im.alpha = minAlphavalue;
        im.tag = i;

        if (i == 0) {
            im.alpha = maxAlphavalue;
        }

        UIImageView *cloveImage = [[UIImageView alloc] initWithFrame:CGRectMake(0, 0, 120, 120)];
        cloveImage.image = [UIImage imageNamed:[NSString stringWithFormat:@"icon%i.png", i]];
        [im addSubview:cloveImage];

        [container addSubview:im];
    }

    container.userInteractionEnabled = NO;
    [self addSubview:container];

    cloves = [NSMutableArray arrayWithCapacity:numberOfSections];

    UIImageView *bg = [[UIImageView alloc] initWithFrame:self.frame];
    bg.image = [UIImage imageNamed:@"bg.png"];
    [self addSubview:bg];

    UIImageView *mask = [[UIImageView alloc] initWithFrame:CGRectMake(0, 0, 58, 58)];
    mask.image =[UIImage imageNamed:@"centerButton.png"] ;
    mask.center = self.center;
    mask.center = CGPointMake(mask.center.x, mask.center.y+3);
    [self addSubview:mask];

    if (numberOfSections % 2 == 0) {

        [self buildClovesEven];
    } else {

        [self buildClovesOdd];
    }

    [self.delegate wheelDidChangeValue:[self getCloveName:currentValue]]; 
} 
```

我需要将灰色圆圈放大到外面的蓝色圆圈。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T10:14:20.403

我不是专家，但这就是我的做法。请记住，我使用了一个标签，但它可以很好地调整大小。希望你能从中得到一些帮助

```
for (int i = 0; i < numberOfSections; i++) {
    UIImageView *im = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"segment.png"]];
    im.frame = CGRectMake( 0 ,0, self.frame.size.width / 2.2,  M_PI * (container.frame.size.width   / numberOfSections) );
    im.layer.anchorPoint = CGPointMake(1.0f, 0.5f);
    im.layer.position = CGPointMake(container.bounds.size.width/2.0-container.frame.origin.x,
                                    container.bounds.size.height/2.0-container.frame.origin.y);
    im.transform = CGAffineTransformMakeRotation(angleSize*i);
    im.tag = i;
    [container addSubview:im];
} 
```

这现在将部分调整为正确的大小，

您可能必须使用这些值才能获得所需的效果。您将遇到的问题是原始图像的曲线，它会导致剪切。更好的方法可能是动态绘制图像，但我仍在学习如何自己做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T05:45:52.743

我通过增加扇区图像的大小解决了这个问题。现在我有一个大轮子。轮子基于我们用于扇区的图像大小。感谢您的所有帮助

# vb.net - 如何将数据从 Xml 插入 Dataset.Xsd vb.net？

> ID：13739847
> 
> 赞同：1
> 
> 时间：2012-12-06T08:44:00.880
> 
> 标签：vb.net

我创建了一个名为 Dataset1.xsd 的数据集 xsd，以及一个名为 purchase.xml 的 xml 模式

购买.xml：

```
<?xml version="1.0" encoding="Windows-1252"?>
<xs:schema attributeFormDefault="unqualified" elementFormDefault="qualified" xmlns:xs="http://www.w3.org/2001/XMLSchema">
<xs:element name="DataSet1">
<xs:complexType>
<xs:sequence>
<xs:element name="purchase">
<xs:complexType>
<xs:sequence>
<xs:element name="kode_purchase" type="xs:string" />
<xs:element name="date_purchase" type="xs:string" />
</xs:sequence>
</xs:complexType>
</xs:element>
</xs:sequence>
</xs:complexType>
</xs:element>
</xs:schema> 
```

数据集1.xsd：

## 购买 |

kode_purchase | 购买日期 |

这是我的代码形式：

暗流 As System.IO.Stream = System.Reflection.Assembly.GetExecutingAssembly().GetManifestResourceStream("purchase.xml") dataset11.ReadXml(stream, XmlReadMode.IgnoreSchema) MsgBox(dsParents11.purchase.Rows.Count) **问题：为什么值始终为 0 ？**

# parsing - YACC/Bison 中的错误恢复产品有哪些要求/限制？

> ID：13739849
> 
> 赞同：0
> 
> 时间：2012-12-06T08:44:11.520
> 
> 标签：parsing, error-handling, bison, yacc

假设我想在我的语法中添加错误恢复产生式——我知道它是什么，我看到了例子。

但是我没有找到更正式的东西，即这样的生产应该是什么样子，什么是可能的，什么是被禁止的？

[Bison 错误恢复文档](http://dinosaur.compilertools.net/bison/bison_9.html)

现在我只能通过反复试验来检查，如果这样的产品是有效的：

```
A := error B 
B := num 
```

或者

```
A := ( error ; error ) 
```

当然试错是低效的，所以我想阅读错误恢复产品的规则。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T13:56:35.097

您指向的文档很旧，“真正的”文档在这里：[http](http://www.gnu.org/software/bison/manual/html_node/Error-Recovery.html) ://www.gnu.org/software/bison/manual/html_node/Error-Recovery.html 。但在这些方面几乎没有区别。

我不认为你会找到更多关于这个话题的东西。除了可能在提供示例的文档部分：[http](http://www.gnu.org/software/bison/manual/html_node/Simple-Error-Recovery.html) ://www.gnu.org/software/bison/manual/html_node/Simple-Error-Recovery.html 。

唯一要记住的是，Bison 应该“不太难”找到何时停止弹出堆栈以及何时停止丢弃输入。有一个“终止符”，例如“;” 对于某些规则，甚至大括号（在您的示例中为“（”和“）”）通常是最佳选择。否则你可能会引入新的冲突。

HTH。

# playframework-2.0 - play framework 2.0 如何指定不同的文件夹来运行

> ID：13739856
> 
> 赞同：3
> 
> 时间：2012-12-06T08:44:48.303
> 
> 标签：playframework-2.0

我想从不在应用程序文件夹下的实用程序脚本运行播放。

在游戏 1 中，您可以编写类似

```
play run  /my/path 
```

但是，我在 play 2.0 中找不到这个选项

不断获得：

```
This is not a play application! 
```

我也无法在任何地方找到此命令的手册。

请帮忙。

# javascript - 如何在ckeditor中（有条件地）事件处理（取消）和警报消息（关键事件）？

> ID：13739863
> 
> 赞同：0
> 
> 时间：2012-12-06T08:45:11.050
> 
> 标签：javascript, event-handling, ckeditor

我想有条件地取消关键事件并显示警报。

在下面的代码中：当 startElement 的 contenteditable 属性为 false 时，模式为 true

*在 ckeditor.js 中：*

```
on("key",function(j){
if(mode==false)
{
j.cancel();
}
....... 
```

上面的代码取消事件（工作）

```
on("key",function(j){
if(mode==false)
{
j.cancel();
alert("somthing..");
}...... 
```

上面的代码警报工作但事件没有取消

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T08:54:50.243

您应该尝试在取消事件时给予浏览器优先级。我没有尝试过，但我认为以下应该有效：

```
on( 'key', function( j ) {
if( mode == false ) {
    j.cancel();
    setTimeout( function() {
        alert( 'somthing..' );
    },0);
} 
```

# jquery - 由于存在主体框架，标题框架中的模态窗口不会填满整个窗口

> ID：13739864
> 
> 赞同：0
> 
> 时间：2012-12-06T08:45:18.757
> 
> 标签：jquery, jquery-ui

其中有两个框架，顶部框架占据 25% 行，其他 75%。

```
<framest>
  <frame name="frame1" src="header.jsp" />
  <frame name="frame2" src="body.jsp" />
</frameset>

header.jsp:

<script>
$(document).ready(){
 $("#modaldiv").modal();
 $("#modaldiv").show();
}
</script>
<div id="modaldiv">
</div> 
```

由于主体框架（frame2），即使我增加高度，我的模态窗口也会减半（顶部 25%）。我如何也可以覆盖在第 2 帧上，以便它正常显示在窗口的中心。

# iphone - Remove More and show all 7 tabs with scrolling option

> ID：13739865
> 
> 赞同：1
> 
> 时间：2012-12-06T08:45:23.893
> 
> 标签：iphone, ios, ios6, uitabbarcontroller

I am newbie to iOS. I am creating iPhone application where I am using `UITabBarController`. As there is limit of 5 tab item, I see option as `More...` at the bottom of my screen.

What I want is show all 7 tab bar items at the bottom. First 5 on main screen and have scrolling option so that if I scroll tab-bar, I can see 6th and 7th tab too.

Any idea/ suggestion how to get this done?

* * *

## Edit 1

```
-(void)addCustomElements
{
    // Initialise our two images
    UIImage *btnImage = [UIImage imageNamed:@"NavBar_01.png"];
    UIImage *btnImageSelected = [UIImage imageNamed:@"NavBar_01_s.png"];

    self.btn1 = [UIButton buttonWithType:UIButtonTypeCustom]; //Setup the button
    btn1.frame = CGRectMake(0, 430, 80, 50); // Set the frame (size and position) of the button)
    [btn1 setBackgroundImage:btnImage forState:UIControlStateNormal]; // Set the image for the normal state of the button
    [btn1 setBackgroundImage:btnImageSelected forState:UIControlStateSelected]; // Set the image for the selected state of the button
    [btn1 setTag:1]; // Assign the button a "tag" so when our "click" event is called we know which button was pressed.
    [btn1 setSelected:true]; // Set this button as selected (we will select the others to false as we only want Tab 1 to be selected initially

    // Now we repeat the process for the other buttons
    btnImage = [UIImage imageNamed:@"NavBar_02.png"];
    btnImageSelected = [UIImage imageNamed:@"NavBar_02_s.png"];
    self.btn2 = [UIButton buttonWithType:UIButtonTypeCustom];
    btn2.frame = CGRectMake(80, 430, 80, 50);
    [btn2 setBackgroundImage:btnImage forState:UIControlStateNormal];
    [btn2 setBackgroundImage:btnImageSelected forState:UIControlStateSelected];
    [btn2 setTag:2];

    btnImage = [UIImage imageNamed:@"NavBar_03.png"];
    btnImageSelected = [UIImage imageNamed:@"NavBar_03_s.png"];
    self.btn3 = [UIButton buttonWithType:UIButtonTypeCustom];
    btn3.frame = CGRectMake(160, 430, 80, 50);
    [btn3 setBackgroundImage:btnImage forState:UIControlStateNormal];
    [btn3 setBackgroundImage:btnImageSelected forState:UIControlStateSelected];
    [btn3 setTag:3];

    btnImage = [UIImage imageNamed:@"NavBar_04.png"];
    btnImageSelected = [UIImage imageNamed:@"NavBar_04_s.png"];
    self.btn4 = [UIButton buttonWithType:UIButtonTypeCustom];
    btn4.frame = CGRectMake(240, 430, 80, 50);
    [btn4 setBackgroundImage:btnImage forState:UIControlStateNormal];
    [btn4 setBackgroundImage:btnImageSelected forState:UIControlStateSelected];
    [btn4 setTag:4];

    btnImage = [UIImage imageNamed:@"NavBar_05.png"];
    btnImageSelected = [UIImage imageNamed:@"NavBar_05_s.png"];
    self.btn5 = [UIButton buttonWithType:UIButtonTypeCustom];
    btn5.frame = CGRectMake(340, 430, 80, 50);
    [btn5 setBackgroundImage:btnImage forState:UIControlStateNormal];
    [btn5 setBackgroundImage:btnImageSelected forState:UIControlStateSelected];
    [btn5 setTag:5];

    scrlview = [[UIScrollView alloc]initWithFrame:CGRectMake(0, 430, 400, 180)];
    // set frame accordingly its random value
    scrlview.backgroundColor = [UIColor colorWithRed:0.5 green:0.5 blue:0.5 alpha:1];
    scrlview.contentSize = CGSizeMake(0, 430);

    // Add my new buttons to the view
    [scrlview addSubview:btn1];
    [scrlview addSubview:btn2];
    [scrlview addSubview:btn3];
    [scrlview addSubview:btn4];
    [scrlview addSubview:btn5];
    [self.view addSubview:scrlview];
    [scrlview release];

    // Add my new buttons to the view
//  [self.view addSubview:btn1];
//  [self.view addSubview:btn2];
//  [self.view addSubview:btn3];
//  [self.view addSubview:btn4];
//  [self.view addSubview:btn5];
//    [self.view addSubview:]
//    [scrlview addSubview:];

    // Setup event handlers so that the buttonClicked method will respond to the touch up inside event.
    [btn1 addTarget:self action:@selector(buttonClicked:) forControlEvents:UIControlEventTouchUpInside];
    [btn2 addTarget:self action:@selector(buttonClicked:) forControlEvents:UIControlEventTouchUpInside];
    [btn3 addTarget:self action:@selector(buttonClicked:) forControlEvents:UIControlEventTouchUpInside];
    [btn4 addTarget:self action:@selector(buttonClicked:) forControlEvents:UIControlEventTouchUpInside];
    [btn5 addTarget:self action:@selector(buttonClicked:) forControlEvents:UIControlEventTouchUpInside];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T09:25:36.283

Create a custom tabbar **.h**

```
@interface CustomTabBar : UITabBarController {
    UIButton *btn1;
    UIButton *btn2;
    UIButton *btn3;
    UIButton *btn4;
   UIScrollView * scrlview;
}

-(void) hideTabBar;
-(void) addCustomElements;
@end 
```

**.m**

```
-(void)addCustomElements
{
// initialsie scrollView and initialise contentOffset
    // Initialise our two images
    UIImage *btnImage = [UIImage imageNamed:@"NavBar_01.png"];
    UIImage *btnImageSelected = [UIImage imageNamed:@"NavBar_01_s.png"];

    btn1 = [UIButton buttonWithType:UIButtonTypeCustom]; //Setup the button
        btn1.frame = CGRectMake(0, 430, 80, 50); // Set the frame (size and position) of the button)
    [btn1 setBackgroundImage:btnImage forState:UIControlStateNormal]; // Set the image for the normal state of the button
    [btn1 setBackgroundImage:btnImageSelected forState:UIControlStateSelected]; // Set the image for the selected state of the button
    [btn1 setTag:0]; // Assign the button a "tag" so when our "click" event is called we know which button was pressed.
    [btn1 setSelected:true]; // Set this button as selected (we will select the others to false as we only want Tab 1 to be selected initially

        // Now we repeat the process for the other buttons
    btnImage = [UIImage imageNamed:@"NavBar_02.png"];
    btnImageSelected = [UIImage imageNamed:@"NavBar_02_s.png"];
    btn2 = [UIButton buttonWithType:UIButtonTypeCustom];
        btn2.frame = CGRectMake(80, 430, 160, 50);
    [btn2 setBackgroundImage:btnImage forState:UIControlStateNormal];
    [btn2 setBackgroundImage:btnImageSelected forState:UIControlStateSelected];
    [btn2 setTag:1];

    btnImage = [UIImage imageNamed:@"NavBar_03.png"];
    btnImageSelected = [UIImage imageNamed:@"NavBar_03_s.png"];
    btn3 = [UIButton buttonWithType:UIButtonTypeCustom];
        btn3.frame = CGRectMake(160, 430, 80, 50);
    [btn3 setBackgroundImage:btnImage forState:UIControlStateNormal];
    [btn3 setBackgroundImage:btnImageSelected forState:UIControlStateSelected];
    [btn3 setTag:2];

    btnImage = [UIImage imageNamed:@"NavBar_04.png"];
    btnImageSelected = [UIImage imageNamed:@"NavBar_04_s.png"];
    btn4 = [UIButton buttonWithType:UIButtonTypeCustom];
        btn4.frame = CGRectMake(240, 430, 80, 50);
    [btn4 setBackgroundImage:btnImage forState:UIControlStateNormal];
    [btn4 setBackgroundImage:btnImageSelected forState:UIControlStateSelected];
    [btn4 setTag:3];

        // Add my new buttons to the view
    [scrlview addSubview:btn1];
    [scrlview addSubview:btn2];
    [scrlview addSubview:btn3];
    [scrlview addSubview:btn4];
    [self.view addSubView: scrlview];

        // Setup event handlers so that the buttonClicked method will respond to the touch up inside event.
    [btn1 addTarget:self action:@selector(buttonClicked:) forControlEvents:UIControlEventTouchUpInside];
    [btn2 addTarget:self action:@selector(buttonClicked:) forControlEvents:UIControlEventTouchUpInside];
    [btn3 addTarget:self action:@selector(buttonClicked:) forControlEvents:UIControlEventTouchUpInside];
    [btn4 addTarget:self action:@selector(buttonClicked:) forControlEvents:UIControlEventTouchUpInside];
}

- (void)selectTab:(int)tabID
{
    switch(tabID)
    {
        case 0:
            [btn1 setSelected:true];
            [btn2 setSelected:false];
            [btn3 setSelected:false];
            [btn4 setSelected:false];
            break;
        case 1:
            [btn1 setSelected:false];
            [btn2 setSelected:true];
            [btn3 setSelected:false];
            [btn4 setSelected:false];
            break;
        case 2:
            [btn1 setSelected:false];
            [btn2 setSelected:false];
            [btn3 setSelected:true];
            [btn4 setSelected:false];
            break;
        case 3:
            [btn1 setSelected:false];
            [btn2 setSelected:false];
            [btn3 setSelected:false];
            [btn4 setSelected:true];
            break;
    }   

    self.selectedIndex = tabID;

}
- (void)buttonClicked:(id)sender
{
    int tagNum = [sender tag];
    [self selectTab:tagNum];
} 
```

see [Link](http://www.rumex.it/2010/11/how-to-customise-the-tab-bar-uitabbar-in-an-iphone-application-part-2-of-2/#more-143)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T08:49:07.347

You can achieve this by subclassing the UITabBar and implementing your own custom views. Should be relatively straightforward. There's some good information you might find useful on subclassing the UITabbar here... [How can I create my own UITabBar?](https://stackoverflow.com/questions/4020108/how-can-i-create-my-own-uitabbar)

# java - 正则表达式替换不在引号内的字符串（单引号或双引号）

> ID：13739866
> 
> 赞同：4
> 
> 时间：2012-12-06T08:45:32.140
> 
> 标签：java, regex

我有一个输入字符串

> 这个或“那个或”或“这个或那个”

应该翻译成

> 这个|| “那个或” || “这个或那个”

因此，尝试是在字符串中查找字符串 ( or ) 的出现，并将其替换为另一个字符串 ( || )。我试过下面的代码

```
Pattern.compile("( or )(?:('.*?'|\".*?\"|\\S+)\\1.)*?").matcher("this or \"that or\" or 'this or that'").replaceAll(" || ") 
```

输出是

> 这个|| “那个或” || '这个 || 那'

问题是单引号中的字符串也被替换了。至于代码，样式只是一个例子。当我让它工作时，我会编译模式并重用它。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-06T08:56:56.880

试试这个正则表达式： -

```
"or(?=([^\"']*[\"'][^\"']*[\"'])*[^\"']*$)" 
```

它匹配`or`which 后跟任意字符，后跟一定数量的or*对*，后跟任意字符直到结束。`"``'`

```
String str = "this or \"that or\" or 'this or that'";
str = str.replaceAll("or(?=([^\"']*[\"'][^\"']*[\"'])*[^\"']*$)", "||");        
System.out.println(str); 
```

**输出 ： -**

```
this || "that or" || 'this or that' 
```

* * *

`or`如果和 不匹配，`"`上述正则表达式也将替换`'`。

例如： -

```
"this or \"that or\" or \"this or that'" 
```

它也将替换`or`上述字符串。如果您不希望它在上述情况下被替换，您可以将正则表达式更改为： -

```
str = str.replaceAll("or(?=(?:[^\"']*(\"|\')[^\"']*\\1)*[^\"']*$)", "||"); 
```

# dns - DNS - 子域有通配符

> ID：13739867
> 
> 赞同：0
> 
> 时间：2012-12-06T08:45:38.390
> 
> 标签：dns

这是一个有效的 DNS 条目吗

```
*.subdomain.tld 
```

IE

```
*.dev.domain.com 
```

干杯

伊恩

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T10:58:56.737

是的，这是有效的 dns 通配符，即：

```
*.subdomain.tld.  IN A 1.2.3.4 
```

并且任何查询`<anything>.subdomain.tld`都将解析为 1.2.3.4

# perl - 如何使 iostat 表现得像 top

> ID：13739873
> 
> 赞同：3
> 
> 时间：2012-12-06T08:45:55.183
> 
> 标签：perl, awk, sed, iostat

`iostat -xzN 5 | grep "^vg\|^Dev"`产生如下输出：

```
Device:         rrqm/s   wrqm/s     r/s     w/s   rsec/s   wsec/s avgrq-sz avgqu-sz   await  svctm  %util
vg01-root         0.00     0.00    0.00    0.20     0.00     1.60     8.00     0.00    3.00   3.00   0.06
vg05-vz           0.00     0.00    0.00    0.60     0.00     4.80     8.00     0.01    9.00   9.00   0.54
vg03-vz           0.00     0.00  281.00  128.40  5625.60  1027.20    16.25    42.35  103.54   2.44  99.94
vg02-vz2a         0.00     0.00   28.20   11.40  1416.00   112.00    38.59     0.79   19.84   5.99  23.72
Device:         rrqm/s   wrqm/s     r/s     w/s   rsec/s   wsec/s avgrq-sz avgqu-sz   await  svctm  %util
vg05-vz           0.00     0.00    0.00    8.60     0.00  7876.80   915.91     0.48   55.70   3.40   2.92
vg03-vz           0.00     0.00  308.20   76.20 10376.00  4433.60    38.53    11.50   30.00   2.60 100.00
vg02-vz2a         0.00     0.00   27.80   24.80   604.80   198.40    15.27     0.49    9.39   4.89  25.72
Device:         rrqm/s   wrqm/s     r/s     w/s   rsec/s   wsec/s avgrq-sz avgqu-sz   await  svctm  %util
vg05-vz           0.00     0.00    0.00    1.80     0.00   585.60   325.33     0.01    5.78   4.00   0.72
vg03-vz           0.00     0.00  323.20   49.00  9283.20   497.60    26.28     3.48    9.40   2.69  99.98
vg02-vz2a         0.00     0.00   40.20   55.80  2644.80   483.20    32.58     1.14   11.86   4.12  39.58 
```

我希望这样显示，`top`即清除屏幕并在每次迭代时从顶部开始。我在想是否有办法通过 sed/awk/perl/whatever 和每次`^Dev`推送一个`tput clear`.

但是怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T08:59:35.537

你考虑过[`iotop`](http://guichaz.free.fr/iotop/)吗？

也就是说，扔一些粗糙的 Perl 应该不会太难。

```
#!/usr/bin/perl

# Adjust options to taste.
open(IOSTAT, "iostat -d 5 |") || die;

$| = 1;
while(<IOSTAT>) {
    if (/^Dev/) { system "clear"; print; }
    if (/^vg/) { print; }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-11-23T02:11:56.950

跟进 Jeffrey Hantin 的回应，这里有一个单行版本：

```
S_COLORS=always iostat -hz 5 | perl -pe '/avg/ && system(q[clear])' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-11-04T11:23:17.023

让手表为您完成工作：

```
watch -n<interval> iostat` 
```

# android-fragments - 从自己的类调用片段方法

> ID：13739877
> 
> 赞同：0
> 
> 时间：2012-12-06T08:46:08.823
> 
> 标签：android-fragments

*从另一个类调用片段方法的正确方法是什么？*

我有一个类'ParseCommands.java'：

```
public class ParseCommands {

   public static Context context;

   < call to FragmentSettings.doStuff() >

} 
```

我想在我的片段中调用方法 doStuff()：

```
public class FragmentSettings extends PreferenceFragment {

private static Activity a;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState); 
}

public void doStuff(String message) {
    Toast.makeText(a, message, Toast.LENGTH_SHORT).show();
}

} 
```

我通过标签应用我的片段，所以我不使用片段管理器来设置它们，但是我尝试了以下方法来尝试调用该方法，但它似乎不起作用：

```
Activity act = (Activity) context;
FragmentManager fm = act.getFragmentManager();
FragmentSettings fs = (FragmentSettings) m.findFragmentById(R.xml.fragment_settings);
fs.doStuff("it actually worked!"); 
```

我尝试将 doStuff 声明为静态并将其称为：

```
FragmentSettings.doStuff 
```

这两种方法似乎都不起作用...

**这样做的正确方法是什么？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T09:00:48.067

由于您在 ParseCommands 类中有一个上下文对象，您可以使用 LocalBroadCastManager 向您的片段发送消息。您的片段必须有一个 BroadcastReceiver 实现，并且您可以从 onReceive 方法调用 doStuff 方法。

对于实施检查：[如何使用 LocalBroadcastManager？](https://stackoverflow.com/questions/8802157/how-to-use-localbroadcastmanager)

# python - Python Dom 解析

> ID：13739878
> 
> 赞同：0
> 
> 时间：2012-12-06T08:46:23.037
> 
> 标签：python, parsing, dom

我有一个格式如下的 xhtml 文件。我正在尝试按顺序提取标签之间的所有文本。我可以通过调用 my`this_list = get_e('td')`然后将该列表传递给另一个函数来获取除 BAC 之外的所有内容以获取文本为`get_text(this_list)`. 我想知道是否可以对我的函数进行轻微修改以获取所有文本。任何人都可以提供一些建议吗？

```
<tr>
  <td colspan="1" rowspan="1" class="lft">
    <a shape="rect" href="http://www.usatoday.idmanagedsolutions.com/stocks/new/quote.idms?SYMBOL_US=BAC">
        BAC</a>
  </td>
  <td colspan="1" rowspan="1" class="lft">
    Bank Of America Corporation</td>
  <td colspan="1" rowspan="1">
    9.79
   </td>
  <td colspan="1" rowspan="1">
    -0.07
  </td>
  <td colspan="1" rowspan="1">
    <span class="neg-arrw">
        -0.71%
    </span>
   </td>
   <td colspan="1" rowspan="1">
    71,370,166
   </td>
</tr>
<tr class="evenrow">
   <td colspan="1" rowspan="1" class="lft">
    VALE
   </td>
   <td colspan="1" rowspan="1" class="lft">
    Vale S A
   </td>
<td colspan="1" rowspan="1">
    17.52
   </td>
   <td colspan="1" rowspan="1">
    +0.09
   </td>
   <td colspan="1" rowspan="1">
    <span class="pos-arrw">
        +0.49%
    </span>
   </td>
   <td colspan="1" rowspan="1">
    15,461,788</td>
</tr> 
```

我正在使用以下功能

```
def get_e(tag):
    l=[]
    els=dom.getElementsByTagName(tag)
    for e in els:
        for child_el in els.childNode:
            lst.append(child_el)
    return l

def get_text(els):
    l=[]
    for e in els
        if e.nodeType == e.TEXT_NODE:
            l.append(e.data)
    return lst 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T10:25:29.583

The get_text function expects input that has just text nodes. Some of your td's have embedded a's which are element nodes. I've updated this to call get_e recursively on seeing element nodes.

```
from xml.dom import minidom
import pdb

def get_e(dom, tag):
    l=[]
    els=dom.getElementsByTagName(tag)
    for e in els:
        for child_el in e.childNodes:
            # if this was an element node get its children
            if child_el.nodeType == e.ELEMENT_NODE:
                l.extend(get_e(e, child_el.tagName))
            else:
                l.append(child_el)
    return l

def get_text(els):
    l=[]
    for e in els:
        if e.nodeType == e.TEXT_NODE:
            l.append(e.data)
    return l

dom = minidom.parse('s.xml')
print get_text(get_e(dom, 'td')) 
```

Or perhaps you could consider the shorter :-

```
import xml.etree.ElementTree as ET
et = ET.parse('s.xml')
print [e.findtext('.') for e in et.findall('.//*')] 
```

# c# - 奇怪的合并字段

> ID：13739889
> 
> 赞同：1
> 
> 时间：2012-12-06T08:47:17.893
> 
> 标签：c#, xml, openxml

`MergeFields`添加docx 文档时，我遇到了一个奇怪的行为。
我手动创建了 .docx `MergeFields`，然后尝试用数据来完成它们。
一些字段被正确处理，但一些 - 仍未处理。经过调查，我发现 docx/word/document.xml 中的“好”字段看起来像

```
<w:instrText xml:space="preserve"> MERGEFIELD  mergeFieldName </w:instrText>
... some tags
<w:t>«mergeFieldName»</w:t>

and "bad" looks like

<w:instrText>MERGEFIELD</w:instrText>
...
<w:instrText xml:space="preserve">  </w:instrText>
...
<w:instrText>anotherFieldN</w:instrText>
...
<w:instrText xml:space="preserve">ane </w:instrText> 
```

有没有人建议 - 如何避免这种情况？

另外：我在 MS Word 中创建这个文件，而不是通过代码，但我进一步处理创建的文件，我的代码无法处理“拆分”邮件合并标签，所以真正的问题包含两个部分 1\. 这是“拆分" 是 MS Word 中的已知问题，或者只是我的本地问题 2\. 如何正确处理此“拆分标签”

# email - 设置远程电子邮件服务器 LInux WHM/Cpanel

> ID：13739891
> 
> 赞同：2
> 
> 时间：2012-12-06T08:47:19.030
> 
> 标签：email, cpanel, remote-server, whm

我在 linux 上有 2 个新的 WHM/Cpanel 框。

ip xxx1 上的框 1

ip xxx10 上的框 2

是否将多个帐户的 Cpanel 移动到框 1。它们都与框 1 xxx1 共享相同的 IP。

我想将所有来自框 1 的外发电子邮件移植到框 2 并通过框 2 发送，其中框 2 将是专用邮件服务器。

框 2 是干净的，没有在其上创建 Cpanel 帐户。

在进行此设置之前，我不想在注册商处更新 DNS。

在所有站点之间，每天大约有 100 万封电子邮件发出，这就是我想要一个专用邮件服务器的原因，方框 2。

我不是一个完全的新手，但我在网上找到的所有帮助我配置它的东西都不起作用。我认为这就像更改框 1 上帐户的 DNS 区域一样简单，将邮件记录更改为转到框 2 的 ip。但是，当测试从框 1 发送电子邮件时，源显示它来自框 1。

我还将框 2 的 ip 添加到配置远程服务 IP 作为远程邮件服务器，并将帐户设置为使用远程主机而不是本地主机。

我认为这就像设置远程 mysql 一样简单，我可以做到。似乎还有很多我没有找到相关信息的事情要做。

我没有时间、金钱和经验来设置理想的 qmail。我现在想要的只是所有来自框 1 的外发电子邮件都由框 2 处理。

我是否需要先更新 DNS 记录以指向新服务器，然后才能使用？我是否需要在框 2 上创建一个帐户才能完成这项工作？对于远程电子邮件服务，我是否需要在框 2 中进行集群？

这不容易吗？哈哈！

也许将框 2 设置为远程 mysql 服务器并将其设置为专用 mysql 服务器会同样有效，如果不是更容易设置？一种或另一种电子邮件和mysql需要分开。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T09:13:49.837

> 一种或另一种电子邮件和mysql需要分开。

设置远程 MySQL 服务器（可以在 WHM 中设置）比在与托管帐户的 cPanel 服务器不同的机器上拥有邮件服务器要容易得多。

显然，您可以添加条目以`/etc/ips.remotemail`指定将处理域邮件的服务器。我从未尝试过，但我预计在远程邮件服务器上配置它会有一些困难......

老实说，我不确定是否有一种非常强大且有据可查/支持的方式来执行此操作。

你应该在 features.cpanel.net 上请求这个，看看会发生什么。

# asp.net - 如何在文本框中创建取消按钮？

> ID：13739892
> 
> 赞同：0
> 
> 时间：2012-12-06T08:47:18.800
> 
> 标签：asp.net, html

我想要一个文本框和一个取消按钮/取消图像重叠在它的右侧，并且应该清除它的点击事件上的文本框数据。我该如何实施？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T10:37:00.290

您可以将图像相对定位在文本框上，在 jquery 或 javascript 中处理该图像的单击事件以清除文本框的文本。

# android - 带有 SSO 的 Android-facebookSDK

> ID：13739893
> 
> 赞同：1
> 
> 时间：2012-12-06T08:47:28.393
> 
> 标签：android

我正在使用带有 sso 的 android facebooksdk 进行 facebook 访问。如果设备安装了 facebook 应用程序，它就可以工作。它无法识别用户是否通过默认浏览器登录 facebook。有什么方法可以让 sso 为浏览器工作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T08:57:31.780

android facebooksdk 与该应用程序一起使用的原因是 facebook 应用程序已集成到操作系统中，这有助于检测凭据，但在浏览器中不显示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T08:59:24.543

请更新您的应用程序的以下代码，它将解决您的问题。

```
public void loginAndPostToWall() {
    facebook.authorize(this, PERMISSIONS, Facebook.FORCE_DIALOG_AUTH,
            new LoginDialogListener());
} 
```

有关更多信息，请参见下面的 Stack Overflow 链接。

[安装官方 Facebook 应用程序后，Facebook 授权无法登录](https://stackoverflow.com/a/10816381/1466188)

# javascript - 如何在 Sproutcore 中连接两个 SC.RecordArray 类型？

> ID：13739900
> 
> 赞同：0
> 
> 时间：2012-12-06T08:48:07.720
> 
> 标签：javascript, sql, database, sproutcore

以下是代码：

```
 queryTree = SC.Query.local('Tree.Category',
        "categoryId = {categoryId}", {
            categoryId: this.get('guid'),
            orderBy: "name ASC"
        });
        queryNote = SC.Query.local('Tree.Note',
            "categoryId = {categoryId}", {
            categoryId: this.get('guid'),
            orderBy: "name ASC"
        });
        var arrayCategory = Tree.store.find(queryTree);
        var arrayNote = Tree.store.find(queryNote);
        //Concatenate arrayCategory to arrayNote 
```

我想返回一个新的记录数组，将结果附加到arrayCategory 和arrayNote。我浏览了文档，但似乎没有连接功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T07:54:21.697

这应该可以正常工作：

```
var result = Tree.store.find(SC.Query.local([Tree.Category, Tree.Note],
  "categoryId = {categoryId}", {
  categoryId: this.get('guid'),
  orderBy: "name ASC"
})); 
```

要连接两个数组，您可以使用 pushObjects 方法，但它不适用于 SC.Query 的结果，因为它返回一个不可编辑的 SC.RecordArray（因为在添加或删除记录时它会自动更新）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T18:42:59.290

我以为我必须连接两个搜索结果。但是我以这种方式解决了问题：对于中的每条记录`Tree.Note`，`Tree.Category`我创建了一个名为`isChild`并将其设置为`YES`前者和`NO`后者的字段。此外，我将函数的返回值更改为：

```
return Tree.store.find(SC.Query.local(['Tree.Category','Tree.Note'],
        "categoryId = {categoryId}", {
            categoryId: this.get('guid'),
            orderBy: 'isChild, name',

        })) 
```

编辑：还是有问题。有人可以建议如何改变这个吗？

# opengl-es - 顶点万花筒着色器

> ID：13739901
> 
> 赞同：5
> 
> 时间：2012-12-06T08:48:13.933
> 
> 标签：opengl-es, opengl-es-2.0, glsl, unity3d, vertex-shader

我正在尝试将片段着色器转换为顶点着色器（用于移动优化）

如下图所示，中心和右边缘的顶点有问题。（这是一个有 11 x 11 个顶点的平面）

UV 当前从右侧映射，并围绕中心缠绕（径向旋转）。我猜中间一半的多个顶点是创建一个洞的相同值？然后右侧将第一个 UV 值交叉淡化为最终值，从而产生拉伸效果。

问题是如何覆盖或修复这些。（它们可能是两个独立的问题？）

![万花筒顶点着色器](../Images/62ea5c9f5a654f35b169d6ca95cbd244.png)

```
uniform vec2 _Offset;
uniform float _Multiply;
varying vec4 position;
varying vec4 vert;
varying vec2 tex;
varying vec2 uv;
varying float ar;
#ifdef VERTEX  
void main()
{          
    gl_Position = gl_ModelViewProjectionMatrix * gl_Vertex;
    vec2 p = -1.0 + 2.0 * tex.xy;
    float a = atan(p.y,p.x) ;
    float r = sqrt(dot(p,p));

    uv.x = _Multiply*a/3.1416 * 2.0 + 0.1;

    float sx = sin(_Multiply*r+_Offset.x);
    float sy = _Multiply*.1*cos(_Offset.y+_Multiply*a);
    uv.y = -_Offset.x + sx + sy;

}
#endif  

#ifdef FRAGMENT

uniform sampler2D _MainTex;
void main(void)
{

    gl_FragColor = texture2D(_MainTex,uv*.5);
}
#endif                          
ENDGLSL 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-06T11:39:09.917

![在此处输入图像描述](../Images/ab84520a6296e0033ec6866c747634e5.png)

好的，基本上重写着色器我能够得到预期的结果。并且对于新手的建议：平面中的顶点数量越多，发生的像素失真就越少。

```
GLSLPROGRAM                          
#ifdef VERTEX  
varying vec2 position;
uniform float _Multiply;
uniform vec2 _Offset;
void main()
{          
    gl_Position = gl_ModelViewProjectionMatrix * gl_Vertex;
    vec2 tex = vec2(gl_MultiTexCoord0);

    vec2 p = tex.xy - 0.5;
    float r = length(p);
    float a = atan(p.y, p.x);
    float sides = _Multiply;
    float tau = 2.0 * 3.1416;
    a = mod(a, tau/sides);
    a = abs(a - tau/sides/2.0);
    position = r * vec2(cos(a), sin(a)) + 0.5  + _Offset;
}
#endif  
#ifdef FRAGMENT
varying vec2 position;
uniform sampler2D _MainTex;
void main(void)
{
    gl_FragColor = texture2D(_MainTex, position);
}
#endif                          
ENDGLSL 
```

# objective-c - iOS 在设备旋转时更改自动布局约束

> ID：13739902
> 
> 赞同：48
> 
> 时间：2012-12-06T08:48:22.510
> 
> 标签：objective-c, ios, autolayout, nslayoutconstraint

我想在设备旋转时修改布局约束。My`UIViewController`由 2 组成，`UIViews`横向对齐，纵向对齐。

它确实有效，在中`willAnimateRotationToInterfaceOrientation`，我删除了所需的约束并用其他约束替换它们以获得正确的布局......

但是有问题，在旋转期间自动布局在`willAnimateRotationToInterfaceOrientation`被调用之前开始打破约束，那么当设备重新定向发生时我们打算在哪里替换我们的约束？

另一个问题是性能，经过几次旋转后，系统不再打破限制，但我的性能下降很大，尤其是在纵向模式下......

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2013-04-25T07:31:54.540

在`willRotateToInterfaceOrientation:duration:`中，发送`setNeedsUpdateConstraints`到需要修改其约束的任何视图。

或者，创建一个`UIView`子类。在您的子类中，注册接收`UIApplicationWillChangeStatusBarOrientationNotification`。当您收到通知时，请发送给您自己`setNeedsUpdateConstraints`。

这会`needsUpdateConstraints`在视图上设置标志。在系统执行布局（通过发送`layoutSubviews`消息）之前，它会向`updateConstraints`任何`needsUpdateConstraints`设置了标志的视图发送消息。这是您应该修改约束的地方。创建一个`UIView`子类并覆盖`updateConstraints`以更新您的约束。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-04-25T07:21:57.953

在 Matthijs Hollemans 的帖子中对自动布局和旋转有很好的解释。你可以在这里找到它： [http ://www.raywenderlich.com/20881/beginning-auto-layout-part-1-of-2](http://www.raywenderlich.com/20881/beginning-auto-layout-part-1-of-2)

通常，您需要大约 4 个约束来正确定位您的视图。如果我的视图大小不变，我更喜欢固定高度和宽度。之后，您可以使用前导和顶部空间约束来做任何您想做的事情。例如，您可以为视图的前导和顶部空间约束设置 IBOutlets：

```
@interface ViewController : UIViewController {
    IBOutlet NSLayoutConstraint *_leadingSpaceConstraint;
    IBOutlet NSLayoutConstraint *_topSpaceConstraint;
} 
```

然后从出口控制拖动到您的约束。现在您可以直接从代码中更改视图约束：

```
_leadingSpaceConstraint.constant = NEW_CONSTRAINT_VALUE; 
```

要提交您的更改，您需要调用：

```
[self.view layoutIfNeeded]; 
```

如果你想做动画：

```
[UIView animateWithDuration:0.25
                 animations:^{
                     [self.view layoutIfNeeded];
                 }]; 
```

我认为它将在 willAnimateRotationToInterfaceOrientation 中起作用，因为您不需要使用这种方法打破任何约束。

一些例子：你有两个纵向的方形视图，一个在另一个下面。例如，将他们的“超级视图的前导空间”约束设置为 20。然后将“top space to superview constraint”设置为第一个视图的 20 和第二个视图的 120。这将是我们的默认设置。

然后，旋转后，您需要重新计算约束。现在将两个顶部约束设置为 20，将前导约束分别设置为 20 和 120。然后使用 layoutIfNeeded 提交更改。

我希望它会有所帮助。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-06T08:12:55.090

覆盖`-(void) viewWillLayoutSubviews`您`UIViewController`以更新您的约束，如下代码：

```
-(void) viewWillLayoutSubviews {
     switch(self.interfaceorientation)
     {
          case UIInterfaceOrientationLandscapeLeft:

              break;
          case UIInterfaceOrientationLandscapeRight:

              break;

          case UIDeviceOrientationPortrait:

              break;

          case UIDeviceOrientationPortraitUpsideDown:

              break;

     }
} 
```

# spring - Liferay + Spring + Spring Web Mvc - @Autowired 不起作用

> ID：13739905
> 
> 赞同：2
> 
> 时间：2012-12-06T08:48:35.800
> 
> 标签：spring, liferay

使用：liferay 6.1 spring 3.1 spring-portlet-mvc

我们试图用@Autowired 注入spring bean，这似乎不适用于liferay 6.1？已知错误？解决方法？

这是我的applicationContext.xml：

```
 <?xml version="1.0" encoding="UTF-8"?>
  <beans xmlns="http://www.springframework.org/schema/beans"
   xmlns:util="http://www.springframework.org/schema/util"
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   xmlns:context="http://www.springframework.org/schema/context"
   xmlns:tx="http://www.springframework.org/schema/tx"
   xmlns:mvc="http://www.springframework.org/schema/mvc"
   xsi:schemaLocation="
   http://www.springframework.org/schema/beans     
   http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
   http://www.springframework.org/schema/context 
   http://www.springframework.org/schema/context/spring-context-3.0.xsd
   http://www.springframework.org/schema/tx 
   http://www.springframework.org/schema/tx/spring-tx-3.0.xsd
   http://www.springframework.org/schema/util 
   http://www.springframework.org/schema/util/spring-util-3.0.xsd
   http://www.springframework.org/schema/mvc 
   http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd">

<bean id="viewNameTranslator"
      class="org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator"/>

<bean   
class="org.springframework.web.servlet.mvc.support.ControllerClassNameHandlerMapping"/>

<mvc:annotation-driven />
<context:annotation-config />
<context:component-scan base-package="com.ebcont.yatc.portlets.service"/>

<bean class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
    <property name="locations">
        <list>
            <value>classpath:configuration.properties</value>
            <value>classpath:mail.properties</value>
        </list>
    </property>
</bean>

<bean id="appProperties"
      class="org.springframework.beans.factory.config.PropertiesFactoryBean">

    <property name="singleton" value="true"/>

    <property name="properties">
        <props>
            <prop key="application.name">${application.name}</prop>
        </props>
    </property>

</bean>

<bean id="mailProperties"
      class="org.springframework.beans.factory.config.PropertiesFactoryBean">

    <property name="singleton" value="true"/>

    <property name="properties">
        <props>
            <prop key="mail.host">${mail.host}</prop>
            <prop key="mail.port">${mail.port}</prop>
            <prop key="mail.username">${mail.username}</prop>
            <prop key="mail.password">${mail.password}</prop>
            <prop key="mail.smtp.auth">${mail.smtp.auth}</prop>
            <prop key="mail.smtp.starttls.enable">${mail.smtp.starttls.enable}</prop>
            <prop key="mail.registration.sender">${mail.registration.sender}</prop>
            <prop key="mail.registration.subject">${mail.registration.subject}</prop>
        </props>
    </property>

</bean>

<bean id="mailSender" class="org.springframework.mail.javamail.JavaMailSenderImpl">
    <property name="host" value="${mail.host}"/>
    <property name="port" value="${mail.port}"/>
    <property name="username" value="${mail.username}"/>
    <property name="password" value="${mail.password}"/>
    <property name="javaMailProperties">
        <props>
            <prop key="mail.smtp.auth">${mail.smtp.auth}</prop>
            <prop key="mail.smtp.starttls.enable">${mail.smtp.starttls.enable}</prop>
        </props>
    </property>
    <property name="defaultEncoding" value="UTF-8"/>
</bean>

<bean id="velocityEngine"
      class="org.springframework.ui.velocity.VelocityEngineFactoryBean">
    <property name="velocityProperties">
        <value>
            resource.loader=class
               class.resource.loader.class=
   org.apache.velocity.runtime.resource.loader.ClasspathResourceLoader
        </value>
    </property>
</bean>

<bean id="portletMultipartResolver"
      class="org.springframework.web.portlet.multipart.CommonsPortletMultipartResolver">
    <!-- one of the properties available; the maximum file size in bytes -->
    <property name="maxUploadSize" value="100000"/>
</bean>
</beans> 
```

网页.xml：

```
<web-app id="WebApp_9" version="2.4" xmlns="http://java.sun.com/xml/ns/j2ee"
     xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
     xsi:schemaLocation="http://java.sun.com/xml/ns/j2ee http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd">

<display-name>Portlet MVC</display-name>

<servlet>
    <servlet-name>ViewRendererServlet</servlet-name>
    <servlet-class>org.springframework.web.servlet.ViewRendererServlet</servlet-class>
</servlet>

<listener>
    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
</listener>

<listener>
    <listener-class>org.springframework.web.context.request.RequestContextListener</listener-class>
</listener>

<servlet-mapping>
    <servlet-name>ViewRendererServlet</servlet-name>
    <url-pattern>/WEB-INF/servlet/view</url-pattern>
</servlet-mapping>

<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>classpath*:/**/applicationContext.xml</param-value>
</context-param> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-06T09:41:00.063

问题与您的`web.xml`文件有关。您需要做的是添加以下侦听器：

```
<listener-class>com.liferay.portal.kernel.servlet.SecurePluginContextListener</listener-class> 
```

[请注意，Liferay 6.1 和自定义 spring-mvc portlet 部署 ( LPS-29103](http://issues.liferay.com/browse/LPS-29103) )存在一个错误。如果您使用 Liferay 自动部署过程，则会出现此问题，已发布修复程序。问题的产生是因为自动部署过程修改了`web.xml`文件并以错误的顺序粘贴了侦听器。

您需要做的是`SecurePluginContextListener`在 spring 上下文侦听器之后添加侦听器 ()。因此，在您的情况下，它将是：

```
<listener>
    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
</listener>
<listener>
    <listener-class>com.liferay.portal.kernel.servlet.SecurePluginContextListener</listener-class>
</listener>
<listener>
    <listener-class>com.liferay.portal.kernel.servlet.PortletContextListener</listener-class>
</listener> 
```

希望这能解决您的问题。

# c# - 将 Excel 文件导入 DataGridView

> ID：13739912
> 
> 赞同：2
> 
> 时间：2012-12-06T08:48:54.240
> 
> 标签：c#, excel, datagridview

```
OpenFileDialog ofImport = new OpenFileDialog();
ofImport.Title = "Select file";
ofImport.InitialDirectory = @"c:\";
ofImport.FileName = txtFileName.Text;
ofImport.Filter = "Excel Sheet(*.xlsx)|*.xlsx|All Files(*.*)|*.*";
ofImport.FilterIndex = 1;
ofImport.RestoreDirectory = true;

if (ofImport.ShowDialog() == DialogResult.OK)
{

     string path = System.IO.Path.GetFullPath(ofImport.FileName);
     string query = "SELECT * FROM Customer.xlsx";
     OleDbConnection conn = new OleDbConnection();
     conn.ConnectionString = @"Provider=Microsoft.ACE.OLEDB.12.0;Data Source="+ofImport.FileName+";Extended Properties=" + "\"Excel 12.0 Xml;HDR=YES;IMEX=1\"";
     OleDbDataAdapter adapter = new OleDbDataAdapter(query, conn);

     //DataSet dataSet = new DataSet();
     adapter.Fill(dsSource);
     dataGridView1.DataSource = dsSource;

}
else
{
     ofImport.Dispose();
} 
```

我想将 Excel 数据检索到`DataGridView`using `dataset`. `dsSource`是使用的数据集。

我得到的错误在线`adapter.Fill(dsSource);`：

> Microsoft Access 数据库引擎找不到对象“xlsx”。确保对象存在并且正确拼写其名称和路径名。如果“xlsx”不是本地对象，请检查您的网络连接或联系服务器管理员。

我可以选择文件，但它没有填写数据集。

该怎么办？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T09:02:08.623

在以下行中，您从*文件*中选择：

```
string query = "SELECT * FROM " + ofImport.FileName; 
```

但是，您需要从*sheet*中进行选择，因此应该是这样的：

```
string query = "SELECT * FROM [Sheet1$]"; // Note the '$' sign!! 
```

You need to find out the sheet name of the Excel file so you can select from it (the sheet name is displayed in the tab for the sheet - just append a `$` sign to it). The *file name* is only used in the connection string so the database engine knows which file to open.

Think of the following analogy with usual SQL database access in .NET:

```
file name = database name
sheet name = table name 
```

**EDIT**
To make things clearer: In the following picture, the sheet name is circled red. In your code, write the sheet name in the select statement, followed by a dollar sign.

![enter image description here](../Images/44c86ee6d68e964f25d189aa7652b700.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-01-30T02:44:28.730

this my code to read excel to datagridview without database configuration.

```
 DataTable dt = new DataTable("dataTable");
        DataSet dsSource = new DataSet("dataSet");
        dt.Reset();

        Excel.Workbook ExWorkbook;
        Excel.Worksheet ExWorksheet;
        Excel.Range ExRange;
        Excel.Application ExObj = new Excel.Application();

        openFileDialog1.Filter = "Excel Files|*.xls;*.xlsx;*.xlsm";
        DialogResult result = openFileDialog1.ShowDialog();

        if (result == DialogResult.OK) // Test result.
        {
            ExWorkbook = ExObj.Workbooks.Open(openFileDialog1.FileName, Missing.Value, Missing.Value, Missing.Value, Missing.Value, Missing.Value, Missing.Value, Missing.Value, Missing.Value, Missing.Value, Missing.Value, Missing.Value, Missing.Value, Missing.Value, Missing.Value);
            ExWorksheet = (Excel.Worksheet)ExWorkbook.Sheets.get_Item(1);
            ExRange = ExWorksheet.UsedRange;

            for (int Cnum = 1; Cnum <= ExRange.Columns.Count; Cnum++)
            {
                dt.Columns.Add(new DataColumn((ExRange.Cells[1, Cnum] as Excel.Range).Value2.ToString()));
            }
            dt.AcceptChanges();

            string[] columnNames = new String[dt.Columns.Count];
            for (int i = 0; i < dt.Columns.Count; i++)
            {
                columnNames[0] = dt.Columns[i].ColumnName;
            }
            //string[] columnNames = (from dc in dt.Columns.Cast<DataColumn>() select dc.ColumnName).ToArray();

            for (int Rnum = 2; Rnum <= ExRange.Rows.Count; Rnum++)
            {
                DataRow dr = dt.NewRow();
                for (int Cnum = 1; Cnum <= ExRange.Columns.Count; Cnum++)
                {
                    if ((ExRange.Cells[Rnum, Cnum] as Excel.Range).Value2 != null)
                    {
                        dr[Cnum - 1] = (ExRange.Cells[Rnum, Cnum] as Excel.Range).Value2.ToString();
                    }
                }
                dt.Rows.Add(dr);
                dt.AcceptChanges();
            }
            ExWorkbook.Close(true, Missing.Value, Missing.Value);
            ExObj.Quit();

            dataGridView1.DataSource = dt; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T08:57:35.180

```
 DialogResult dialogResult = MessageBox.Show("Sure", "Some Title", MessageBoxButtons.YesNo);
    if (dialogResult == DialogResult.Yes)
    {
        dt = dsSource.Tables[Index];
        dt.Reset();
        Excel.Workbook workbook;
        Excel.Worksheet NwSheet;
        Excel.Range ShtRange;
        Microsoft.Office.Interop.Excel.Application ExcelObj = new Microsoft.Office.Interop.Excel.Application();
        OpenFileDialog filedlgExcel = new OpenFileDialog();
        filedlgExcel.Title = "Select file";
        filedlgExcel.InitialDirectory = @"c:\";
        //filedlgExcel.FileName = textBox1.Text;
        filedlgExcel.Filter = "Excel Sheet(*.xlsx)|*.xlsx|All Files(*.*)|*.*";
        filedlgExcel.FilterIndex = 1;
        filedlgExcel.RestoreDirectory = true;
        if (filedlgExcel.ShowDialog() == DialogResult.OK)
        {

            workbook = ExcelObj.Workbooks.Open(filedlgExcel.FileName, Missing.Value, Missing.Value,
                 Missing.Value, Missing.Value, Missing.Value, Missing.Value, Missing.Value, Missing.Value,
                 Missing.Value, Missing.Value, Missing.Value, Missing.Value, Missing.Value, Missing.Value);
            NwSheet = (Excel.Worksheet)workbook.Sheets.get_Item(1);
            ShtRange = NwSheet.UsedRange;
            for (int Cnum = 1; Cnum <= ShtRange.Columns.Count; Cnum++)
            {
                dt.Columns.Add(new DataColumn((ShtRange.Cells[1, Cnum] as Excel.Range).Value2.ToString()));
            }
            dt.AcceptChanges();
            string[] columnNames = new String[dt.Columns.Count];
            for (int i = 0; i < dt.Columns.Count; i++)
            {
                columnNames[0] = dt.Columns[i].ColumnName;
            }
            //string[] columnNames = (from dc in dt.Columns.Cast<DataColumn>() select dc.ColumnName).ToArray();

            for (int Rnum = 2; Rnum <= ShtRange.Rows.Count; Rnum++)
            {
                DataRow dr = dt.NewRow();
                for (int Cnum = 1; Cnum <= ShtRange.Columns.Count; Cnum++)
                {
                    if ((ShtRange.Cells[Rnum, Cnum] as Excel.Range).Value2 != null)
                    {
                        dr[Cnum - 1] = (ShtRange.Cells[Rnum, Cnum] as Excel.Range).Value2.ToString();
                    }
                }
                dt.Rows.Add(dr);
                dt.AcceptChanges();
            }
            workbook.Close(true, Missing.Value, Missing.Value);
            ExcelObj.Quit();

            dataGridView1.DataSource = dt; 
```

# java - 这 不会被触发，因为 只有一个元素/项目

> ID：13739913
> 
> 赞同：0
> 
> 时间：2012-12-06T08:48:57.050
> 
> 标签：java, jsf, listbox, listboxitem

`<h:selectOneListbox />`当它包含多个元素时，我的效果很好，但是当只有一个项目时会出现问题：列表框显示为下拉列表，而我的嵌套`<f:ajax event="valueChange" />`不会被触发。知道为什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T08:53:34.757

因为没有更改事件...只有一项可供选择...

尝试添加

```
<f:selectItem itemLabel="Select Item..." noSelectionOption="true" /> 
```

* * *

INMO`<h:selectOneListbox`使用单一值并要求用户更改它是错误的设计......

考虑添加`render="#{mybean.myList gt 1}"`到您的`<h:selectOneListbox`并添加一些其他元素（如 commandButton 或任何带有`render="#{mybean.myList eq 1}"`）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T11:06:32.870

最后，我只是为标签添加了一个值为 的`size`属性，它解决了问题：`<h:selectOneListbox />``2`

```
<h:selectOneListbox size="2" /> 
```

希望能有所帮助`;)`

# php - 所有页面的第一次用户的站点游览

> ID：13739920
> 
> 赞同：2
> 
> 时间：2012-12-06T08:49:28.267
> 
> 标签：php, javascript, jquery

识别用户首次访问网站页面的最佳方法是什么。我写了一个脚本来显示页面的浏览。因为游览应该只显示一次。我需要知道。

例如，考虑一个域 example.com，如果用户第一次登录我需要在“/”页面上显示导览。当用户导航到“/page1”时，我应该显示该页面的导览。当用户返回“/”时，我不应该显示游览。但是当用户转到“/page2”时，我应该在 page2 上显示游览。

当用户通过单个查询登录时，我可以找到第一次。！但我怎样才能为每一页做到这一点。我的想法是每次用户导航时都对数据库进行查询，但我知道这不是最好的方法。

注意：Cookie 可用于跟踪任何内容。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T08:56:33.193

当客户登录时，检查他访问过的页面的 cookie。

如果 cookie 为空，请检查数据库并使用客户端已经访问过的页面创建新 cookie

此外，在您检查 cookie 的每个页面上，如果该页面尚未在其中，则显示游览并将其添加到 cookie（和 db）中，否则什么也不做:)

当然，数据库部分仅适用于注册用户。也不要忘记将用户 ID（或类似的东西）存储到 cookie 中并检查它，这样当另一个用户在同一台​​计算机上浏览您的网站时，他仍然会看到游览！

完全不同的东西，但在你的情况下可能有用的是 [http://notes.xoxco.com/post/36766728425/aware-js-make-your-site-reader-aware](http://notes.xoxco.com/post/36766728425/aware-js-make-your-site-reader-aware)

这是一个 jQuery 插件，可以跟踪您的访问并相应地更改布局（例如，第一次访问者，回访者，但今天第一次，...）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T08:54:05.950

一个会话会很好。像这样的东西：

```
if($_SESSION['first-time'] == TRUE){
    //Do your thing
    //Then, mark first-time as FALSE in the database.
} 
```

当您创建一个帐户时（假设您正在这样做），您将其标记为`TRUE`. 在他们第一次登录时，您将其标记为`FALSE`

# c++ - 从 std::string 中删除所有 xml 标签

> ID：13739924
> 
> 赞同：3
> 
> 时间：2012-12-06T08:49:52.943
> 
> 标签：c++, xml, string, tinyxml

我有一个`std::string xmlString = "<out><return>Hello</return></out>"`，我想删除所有标签！（没有额外的库，除了 tinyXML -> 已经加载）

结果->你好

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T09:01:32.950

如果您的编译器和标准库支持新的[C++11 正则表达式](http://en.cppreference.com/w/cpp/regex)，您也许可以使用[`std::regex_replace`](http://en.cppreference.com/w/cpp/regex/regex_replace).

您还可以使用其他正则表达式库。

如果您不想使用正则表达式，那么您可以手动复制字符串，同时检查“标签”。当您看到 a`'<'`只是继续循环而不复制时，直到您看到`'>'`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-06T11:54:22.970

可能的解决方案：

```
std::string ClassA::ParseXMLOutput(std::string &xmlBuffer)
{
    bool copy = true;
    std::string plainString = "";   
    std::stringstream convertStream;

    // remove all xml tags
    for (int i=0; i < xmlBuffer.length(); i++)
    {                   
        convertStream << xmlBuffer[i];

        if(convertStream.str().compare("<") == 0) copy = false;
        else if(convertStream.str().compare(">") == 0) 
        {
            copy = true;
            convertStream.str(std::string());
            continue;
        }

        if(copy) plainString.append(convertStream.str());       

        convertStream.str(std::string());
    }

    return plainString;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T09:56:58.137

如果您已经使用 tinyXML，请深度优先遍历所有节点并将节点的文本附加到您正在构建的字符串中。SO有一些关于如何做到这一点的答案，即[TinyXML Iterating over a Subtree](https://stackoverflow.com/q/2582655/847349)

# java - 无法在 Win7 中找到或加载主类，或者在 OSX 中的线程“main”java.lang.NoClassDefFoundError 中出现异常

> ID：13739925
> 
> 赞同：1
> 
> 时间：2012-12-06T08:49:57.467
> 
> 标签：java, windows, macos

我看到这里有很多类似的线索，但它们对我没有帮助。

我尝试在 Win7 和 OSX Mountain Lion 中运行：1) java Test 2) java -cp。测试

```
//Test.java
class HelloWorld {
    public static void main(String[] args){
        System.out.println("Hello World!");
    }
} 
```

1) 对于 Win7 错误：

> 错误：无法找到或加载主类测试

2）OSX山狮错误：

> 线程“主”java.lang.NoClassDefFoundError 中的异常：测试原因：java.lang.ClassNotFoundException：在 java.security.AccessController.doPrivileged(Native Method) 的 java.net.URLClassLoader$1.run(URLClassLoader.java:202) 测试) 在 java.net.URLClassLoader.findClass(URLClassLoader.java:190) 在 java.lang.ClassLoader.loadClass(ClassLoader.java:306) 在 sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301) 在 java .lang.ClassLoader.loadClass(ClassLoader.java:247)

真的不知道这里出了什么问题... :(

谢谢，奥斯卡

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T09:43:44.513

我的`Test.java`：

```
class HelloWorld {
  public static void main(String[] args) {
    System.out.println("HW");
  }
} 
```

我的对话`bash`：

```
Neoten:bin marko$ ls -al
total 8
drwxr-xr-x   .
drwxr-xr-x   ..
-rw-r--r--   HelloWorld.class
drwxr-xr-x   test
Neoten:bin marko$ java HelloWorld
HW
Neoten:bin marko$ 
```

您没有发布运行它的目录的内容，因此这是您错误的最可能原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T08:54:26.207

The name of the file should be the same as the class name `which is public` and has the main() method. In your case rename the file name from `Test.java` will compile and will create HelloWorld.class file not Test.class because there is no Test class declared in your file.

after .class file is created , run it with `java HelloWorld`

[To Know More click here](https://stackoverflow.com/questions/146576/why-is-the-java-main-method-static) and [here](https://stackoverflow.com/questions/2134784/why-filename-in-java-should-be-same-as-class-name)

so here's an example

```
//Filename abc.java
public class hi
{
public static void main(String[] args)
{
 System.out.println("Hell");
}
} 
```

the output

```
abc.java:1: class hi is public, should be declared in a file named hi.java
public class hi
       ^
1 error 
```

but if you do this

```
 //Filename abc.java
    class hi
    {
    public static void main(String[] args)
    {
     System.out.println("Hell");
    }
    } 
```

it will create hi.class file so

```
D:\>java hi
Hell 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T08:59:07.880

您的类名必须与您的文件相同，并且您的类目录位置必须可转换为您的类包。这就是 Java 支持命名空间的方式，没有声明的包称为默认命名空间——不建议使用默认命名空间。

IE

```
// my/name/space/HelloWorld.java
package my.name.space;

public class HelloWorld {
    ...
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-06T08:52:01.620

看起来您的类必须与文件名同名。
`test.java`必须包含`class test`

# jquery - 加载的图像使用 jQuery 将其附加到 div - 是否有回调？

> ID：13739928
> 
> 赞同：0
> 
> 时间：2012-12-06T08:50:39.853
> 
> 标签：jquery

假设我有这个代码：

```
template.find('.dynamic-content').html(
   "<img class='immagine-webcam' src='" +
    punto.Immagine + "' alt='" + punto.Titolo + "' title='" 
    + punto.Titolo + "' />"
); 
```

好吧：我只想在这个图像完全从服务器加载时调用一个函数。

是否可以？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T09:11:39.277

使用标签的`onload`属性。`img`

```
template.find('.dynamic-content').html(
   "<img class='immagine-webcam' onload='imgLoadedFun(this)' src='" +
    punto.Immagine + "' alt='" + punto.Titolo + "' title='" 
    + punto.Titolo + "' />"
); 
```

# c++ - 将 `std::vector` 替换为 `std::array`

> ID：13739929
> 
> 赞同：5
> 
> 时间：2012-12-06T08:50:43.100
> 
> 标签：c++, arrays, vector, c++11

我有一个代码如下：

```
int n;

int get_the_number();
void some_computations();

int main()
{
     n = get_the_number();
     some_computations()

     return(0);
} 
```

*   该`get_the_number`函数获取一些输入并返回整数`n`，在其调用后将不会被修改。

*   在`some_computation`函数中有以下代码

    ```
    std::vector<my_struct> my_array;

    for(int i=0; i<n; i++)
    { 
         my_struct struct_temp;

         // fill struct_temp;

         my_array.push_back(struct_temp);
    } 
    ```

**问题：**由于 的大小`my_array`是先验已知的，是否可以将 替换`std::vector`为`std::array`？此外，在肯定的情况下，我是否应该期望在效率方面有所提高？

我试图用

```
 std::array<my_struct,n> my_array; 
```

但我得到一个错误：数组的大小必须是常数。有没有办法避免它？

非常感谢你。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-06T08:52:14.460

`std::array`需要在**编译时**知道大小，这不适用于您的代码。所以不，你不能简单地`std::vector`用`std::array`这里替换，除非`get_the_number()`可以返回一个`constexpr`例如。

```
constexpr int get_the_number() { return 42; }

int main()
{
  std::array<int, get_the_number()> a;
} 
```

但大概在您的情况下会`int get_the_number()`获得一个在运行时确定的数字。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-06T09:13:08.313

如果您想利用数组长度是**运行时间常数**这一事实来**提高效率**，那么您要做的是`std::vector::reserve`提前**预留必要的空间**，以在向量增长时保存任何重新分配——这应该使它几乎一样快`array`。

```
my_array.reserve(get_the_number());
some_computations() 
```

或者，如果数组是函数的本地数组，则将数字作为参数传入。

# ruby - ruby 中的 Self 关键字

> ID：13739937
> 
> 赞同：-6
> 
> 时间：2012-12-06T08:51:15.027
> 
> 标签：ruby

我在 Ruby 中有一个这样的函数定义：

```
def is_fdi?
 self.get_fed_state =~ /fdi/i ? true : false
end 
```

这`is_fdi?`是一个返回布尔值的函数。据我了解`self.get_fed_state` 是一个函数调用，它的返回值正在与 进行比较`/fd1/i`，但未`get_fed_state`在文件中的任何地方定义。

有谁知道如何`is_fdi?`打电话`get_fed_state`？或者，有什么我应该知道的来破解这个吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T09:59:42.187

调用方法。如果你得到 a`NoMethodError: undefined method`它实际上没有定义。如果它运行，则它被定义。它可能是在项目使用的外部包中定义的，而不是在实际的代码库中。

你也可以像这样缩短它：

```
def is_fdi?
 !!get_fed_state[/fdi/i]
end 
```

# c++ - 为什么 map::clear 不调用析构函数？

> ID：13739940
> 
> 赞同：1
> 
> 时间：2012-12-06T08:51:32.413
> 
> 标签：c++, map, reference, destructor

我跑到下面的程序，注意`value`的`map`是一个参考`(ClassA&)`-

```
#include <iostream>
#include <map>
using namespace std  ; 

class ClassA {
    public :
         ClassA () {    cout<<"Hay ! "<<endl ; }    
        ~ClassA () {    cout<<"Bye ! "<<endl ; }
} ; 

int main () { 
    map< string,ClassA& > myMap ; 
    ClassA a   ; 
    myMap.insert( pair<string,ClassA&>("A",a) ) ; 
    myMap.clear() ; 

} 
```

并获得输出 -

```
Hay ! 
Bye ! 
```

似乎`myMap.clear()`没有受到影响，因为没有人再调用 `ClassA`析构函数，你能解释一下为什么吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-06T08:54:13.957

删除引用时不调用析构函数。说到这..我认为[带有引用的地图是非法的](https://stackoverflow.com/questions/2934021/stl-map-containing-references-does-not-compile)

# c++ - 我应该用 &this 做什么？

> ID：13739944
> 
> 赞同：0
> 
> 时间：2012-12-06T08:51:50.010
> 
> 标签：c++, reference, this, keyword, semantics

我有一些代码需要使用双指针。具体来说，我很好奇为什么我不能`&this`在上下文中说......

```
class Obj {
public:
    void bar();
};

void foo(Obj **foopa)
{
    // do etc with your foopa.  maybe lose the foopa altogether. its nasty imo.
}

void Obj::bar()
{
    // call foo(Obj **)
    foo(&this);  // Compiler Err:  Address extension must be an lvalue or a function designator.
} 
```

左值？功能指示符？喜欢听回音。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T09:02:20.380

因为“this”是一个特殊的指针，你不应该改变它，但你可以做一些事情，不要把“Obj *t”放在函数中，因为它在函数末尾被破坏，所以它必须是静止的。

```
class Obj;
Obj *t;

class Obj {
public:
    void bar();
};

void foo(Obj **foopa)
{
    // do etc with your foopa.  maybe lose the foopa altogether. its nasty imo.
}

void Obj::bar()
{
    // call foo(Obj **)
    t = this;
    foo(&t);  // Compiler Err:  Address extension must be an lvalue or a function designator.
} 
```

# c++ - 链表中的高效“插入”功能

> ID：13739949
> 
> 赞同：0
> 
> 时间：2012-12-06T08:52:04.973
> 
> 标签：c++, c, data-structures, linked-list

在一次采访中，我被要求为链表编写一个插入函数，这样在插入后，与插入元素相比，插入元素头部的元素应该更大，而尾部的元素应该更小。

我在我的代码中实现了以下步骤：

1.  最初按降序对链表进行排序。
2.  获取元素。
3.  以这样的方式插入元素，即使插入后链接列表也将按降序排列。

但有人告诉我，我的方法效率不高。

请让我知道是否有有效的方法来实现相同的目标。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T12:36:40.733

排序是一种`O(n log n)`操作。如果您仔细阅读问题，他们从不说应该对列表进行排序，所以不要进行排序操作。相反，您应该做的是从一个仅包含您的元素的新列表开始，然后对于原始列表的每个元素，将其附加到前面（如果大于新元素）或后面。

# debugging - Monodevelop 的自定义命令 Mono Soft Debugger 对话框的“输出”字段中预期的内容是什么？

> ID：13739952
> 
> 赞同：1
> 
> 时间：2012-12-06T08:52:09.370
> 
> 标签：debugging, mono, monodevelop, remote-debugging

我[无法在 Monodevelop 中使用正常调试](https://stackoverflow.com/questions/11963904/monodevelop-waiting-for-debugger)，因此我尝试[按照此处所述进行远程调试](https://stackoverflow.com/a/12395786/226958)。
这是整个过程：

* * *

在终端中，键入：

```
export MONODEVELOP_SDB_TEST="YES"
monodevelop & 
```

Monodevelop 开始。

1.  打开您的解决方案
2.  `Run -> Run With -> Custom Command Mono Soft Debugger`
3.  填写字段：
    1.  命令：`/home/nico/src/CmisSync/bin/SparkleShare.exe`
    2.  参数：（`-debug --debugger-agent=transport=dt_socket,address=127.0.0.1:10000`不确定是否需要）
    3.  知识产权：`127.0.0.1`
    4.  港口：`10000`
    5.  输出：`1`
4.  按`Listen`
5.  返回终端，按：

`mono --debug --debugger-agent=transport=dt_socket,address=127.0.0.1:10000 ./bin/SparkleShare.exe`

* * *

**问题：** Monodevelop 在第 4 步崩溃，一旦我按下`Listen`：

```
System.InvalidOperationException: Standard output has not been redirected
  at System.Diagnostics.Process.get_StandardOutput () [0x00043] in /build/buildd/mono-2.10.8.1/mcs/class/System/System.Diagnostics/Process.cs:663 
  at MonoDevelop.Core.Execution.ProcessWrapper.CaptureOutput () [0x00000] in <filename unknown>:0 
  at System.Threading.Thread.StartInternal () [0x00016] in /build/buildd/mono-2.10.8.1/mcs/class/corlib/System.Threading/Thread.cs:703 
```

当我按下`Connect`而不是`Listen`.

也许我输入了错误的值`Output`？[源代码显示需要一个整数值](http://searchco.de/codesearch/view/20107542#296)。

Monodevelop 的这一部分是非常实验性的（他们不打算实现异常处理），因此在这种情况下向他们发送错误报告不会有成效......我很确定我只是误解了一些东西。

![在此处输入图像描述](../Images/ea64b55eae6a32cb3790c20c09743543.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T08:58:56.660

这是正确的程序：

在终端中，键入：

```
export MONODEVELOP_SDB_TEST="YES"
monodevelop & 
```

Monodevelop 开始。

1.  打开您的解决方案
2.  `Run -> Run With -> Custom Command Mono Soft Debugger`
3.  填写字段：
    1.  命令：空
    2.  参数：空
    3.  知识产权：`127.0.0.1`
    4.  港口：`10000`
    5.  输出：空
4.  按`Listen`
5.  返回终端，按：

`mono --debug --debugger-agent=transport=dt_socket,address=127.0.0.1:10000 ./bin/SparkleShare.exe`

现在可以在 Monodevelop 中调试应用程序了！

# python - 无法从monkeyrunner中的不同包导入模块

> ID：13739953
> 
> 赞同：1
> 
> 时间：2012-12-06T08:52:10.153
> 
> 标签：python, import, module, monkeyrunner

我想从包 abc.devices 中导入一个模块 Devices.py，但它给了我一个导入错误：没有名为 abc 的模块。这里 dev 是一个包含模块 Devices.py 的包。下面是我的 monkeyrunner 文件的代码。

```
import os
import sys
import subprocess
import unittest
import commands
from ConfigParser import ConfigParser
from abc.Devices import Devices
dev = Devices()
dev.gDevice()

from com.android.monkeyrunner import MonkeyDevice, MonkeyRunner, MonkeyImage
from com.dtmilano.android.viewclient import ViewClient, View 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T07:21:35.540

monlyrunner 没有读取 PYTHONPATH，因此您必须在导入模块之前执行此操作（如 ViewClient 的示例所做的那样）：

```
# PyDev sets PYTHONPATH, use it
try:
    for p in os.environ['PYTHONPATH'].split(':'):
        if not p in sys.path:
            sys.path.append(p)
except:
    pass 
```

# app-store - iTunes Connect 帐户到期：对我的应用程序有什么影响？

> ID：13739959
> 
> 赞同：0
> 
> 时间：2012-12-06T08:52:29.857
> 
> 标签：app-store, app-store-connect

我的 iTunes Connect 帐户将在下个月到期。这是否意味着我不能再更新我的应用程序了？或者这是否意味着我的应用将从应用商店中删除？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T12:04:20.323

一旦您的帐户过期 1.您无法再更新您的应用程序。2.它将从应用商店中删除，直到您更新您的帐户

# android - java.lang.illegalstateexception在活动类android片段中找不到方法（视图）

> ID：13739962
> 
> 赞同：18
> 
> 时间：2012-12-06T08:52:31.793
> 
> 标签：android, android-gridview

在我的程序中，我正在使用带有一些图像的gridview，当用户点击gridview 中的图像时，我想显示一个菜单，然后从显示的菜单中选择要执行的操作。

这是我的代码：

```
package Kazemi.Alireza.scada;
import android.annotation.SuppressLint;
import android.app.Dialog;
import android.app.FragmentManager;
import android.content.Context;
import android.graphics.Typeface;
import android.graphics.drawable.AnimationDrawable;
import android.os.Bundle;
import android.support.v4.app.Fragment;
import android.view.ContextMenu;
import android.view.ContextMenu.ContextMenuInfo;
import android.view.Gravity;
import android.view.LayoutInflater;
import android.view.Menu;
import android.view.MenuItem;
import android.view.View;
import android.view.ViewGroup;
import android.view.WindowManager;
import android.view.ViewGroup.LayoutParams;
import android.widget.AdapterView;
import android.widget.AdapterView.AdapterContextMenuInfo;
import android.widget.BaseAdapter;
import android.widget.Button;
import android.widget.GridView;
import android.widget.ImageView;
import android.widget.LinearLayout;
import android.widget.PopupWindow;
import android.widget.TextView;
import android.widget.Toast;
import android.widget.AdapterView.OnItemClickListener;

@SuppressLint("NewApi")
public class CitiesTab extends Fragment {

AnimationDrawable[] frameAnimation;
ImageAdapter ia;
GridView gridView;
int in;

public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
    return (LinearLayout)inflater.inflate(R.layout.citytab, container, false);
}

public void onStart()
{
    super.onStart();
    ia = new ImageAdapter(getActivity());
    gridView = (GridView) getActivity().findViewById(R.id.gridview);
    gridView.setAdapter(ia);
    gridView.post(new Starter());
    gridView.setOnItemClickListener(new OnItemClickListener()
    {
        public void onItemClick(AdapterView<?> parent, View v, int position, long id)
        {
            dialog = new Dialog(getActivity(), android.R.style.Theme_InputMethod);
            dialog.setContentView(R.layout.pump_menu);
        }});
    /*Button btn = (Button) getActivity().findViewById(R.id.Button_pumpInfo);
    btn.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            Toast.makeText(getActivity(), "You clicked on Item 1",
                    Toast.LENGTH_LONG).show();
        }
    });*/
}

public void Btn_pumpInfo_Clicked(View v) {
    // TODO Auto-generated method stub
    Toast.makeText(getActivity(), "You clicked on Item 1",
            Toast.LENGTH_LONG).show();
} 
```

}

这是我的 pump_menu.xml 代码：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="#a5c5f0"
    android:orientation="vertical" >

<Button 
    android:id="@+id/Button_pumpInfo" 
    android:layout_height="40dp" 
    android:text="@string/menu_pumpinfo_item1"
    android:textSize="11sp" 
    android:layout_width="125dp"
    android:background="#a5c5f0"
    android:onClick="Btn_pumpInfo_Clicked"/> 
```

和 citytab.xml ：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

<GridView 
    android:id="@+id/gridview"
    android:layout_width="fill_parent" 
    android:layout_height="fill_parent"
    android:numColumns="auto_fit"
    android:verticalSpacing="10dp"
    android:horizontalSpacing="10dp"
    android:columnWidth="90dp"
    android:stretchMode="columnWidth"
    android:gravity="center" />

<ImageView 
    android:id="@+id/gifViewer"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:scaleType="center"/>

</LinearLayout> 
```

当我使用此代码时，发生错误：

```
java.lang.RuntimeException: Unable to start activity ComponentInfo{Kazemi.Alireza.scada/Kazemi.Alireza.scada.MainMenu}: java.lang.NullPointerException 
```

当我评论 Btn_pumpInfo_Clicked() 方法并取消注释 onStart() 中的按钮侦听器时，会发生以下错误：

```
java.lang.IllegalStateException: Could not find a method Btn_pumpInfo_Clicked(View) in the activity class android.view.ContextThemeWrapper for onClick handler on view class android.widget.Button with id 'Button_pumpInfo' 
```

哪里有问题？谢谢你

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-12-06T09:28:56.533

您不能在类中为（来自 的布局）注册`onClick`回调（使用`android:onClick`），因为 Android 不会找到它，因为它只会搜索**与**该名称（）匹配的方法，并且会抛出该异常。而是寻找in并为其分配一个普通的侦听器：`Button``Dialog``Fragment`**`Activity``Btn_pumpInfo_Clicked``Button``Dialog`**

 **```
//...
dialog.setContentView(R.layout.pump_menu)
Button b = (Button) dialog.findViewById(R.id.Button_pumpInfo);
b.setOnClickListener(new OnClickListener() {

   @Override
   public void onCLick(View v) {
       // profit
   }
}); 
```

或移动方法：

```
public void Btn_pumpInfo_Clicked(View v) {
    // TODO Auto-generated method stub
    Toast.makeText(getActivity(), "You clicked on Item 1",
            Toast.LENGTH_LONG).show();
} 
```

`Activity`如果它适合你，就在课堂上。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-10-03T12:51:15.450

**如果此错误仅在 Android 2.x 上发生，**请检查您的 Activity 类层次结构中的 Android 4 特定类成员：

```
public class HomeActivity extends Activity {

  private android.app.ActionBar.LayoutParams customTitleParams;

  ....
} 
```

该类`android.app.ActionBar.LayoutParams`在 Android 2.x 上不可用，这可能会导致问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-05T11:24:08.530

当调用 View(Button) 的 onClick 的方法不可访问或在相应的活动中不可用时，也会发生这种情况。检查步骤：

*   检查 android:onClick 属性值中的方法名称是否与实际编写的方法匹配。
*   检查方法的访问修饰符是否公开，以便执行。**

# python - 如何标准化直方图以使高度之和等于 1？

> ID：13739963
> 
> 赞同：3
> 
> 时间：2012-12-06T08:52:34.013
> 
> 标签：python, matplotlib

`matplotlib.pyplot.hist`我使用传递 kwarg的 a 调用生成了下图`normed=True`：

![在此处输入图像描述](../Images/fd4437e9c4be993f29fe79fca6ff9cc8.png)

经过进一步研究，我意识到这种归一化的工作方式使得直方图的积分等于 1。我如何绘制相同的数据以使条形图的高度之和等于 1？

换句话说，我希望每一位代表其值所包含的整体的比例。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T09:19:18.897

我不确定是否有一种简单的方法，但是您可以手动将所有条形高度除以输入的长度（以下是`ipython --pylab`为了跳过导入）：

```
inp = normal(size=1000)
h = hist(inp) 
```

这给了你

![在此处输入图像描述](../Images/a745568414fff74561dc5bd7c69f4b0d.png)

现在，您可以执行以下操作：

```
bar(h[1][:-1], h[0]/float(len(inp)), diff(h[1])) 
```

并得到

![在此处输入图像描述](../Images/a63f0a485e025d201284f055c2f57135.png)

# java - 尝试从结果集大小填充列表大约 12000 行再次执行操作大约 4 次，jvm 超出堆内存

> ID：13739966
> 
> 赞同：1
> 
> 时间：2012-12-06T08:52:48.353
> 
> 标签：java, jakarta-ee, struts2, heap-memory, heap-size

我正在尝试使用包含大约 12000 条记录的数据库填充类型为 tableList 的数组列表，然后使用 struts 迭代器标记填充我的 jsp 页面，但是在一次又一次地执行此操作时，jvm 内存不足，正如我所见每次从我的页面调用此操作时，堆大小都会不断减小。我认为，每当创建此操作类的新实例时，列表空间都不会被释放。建议解决此问题。我也在运行 tableList.clear( ); 在类的构造函数中

```
int records=0;
        spl("BEFORE: "+run.freeMemory()+"-"+run.totalMemory()+"-"+run.maxMemory());//spl is for system.out.println and run is an object of Runtime class
        while(resultSet.next())
        {
            records++;
            if(!resultSet.getString("service_date").equals("N/A"))
            {
                serviceYear=resultSet.getString("service_date").split("-");
                regnNumber=officeCode+"/"+resultSet.getString("serviceid_requested")+"/"+resultSet.getString("country_code")+"/"+resultSet.getString("service_file_srno")+"/"+serviceYear[2];
            }
            else
            {
                regnNumber=officeCode+"/"+resultSet.getString("serviceid_requested")+"/"+resultSet.getString("country_code")+"/"+resultSet.getString("service_file_srno")+"/0000";
            }
            tableList.add(new MISTable(regnNumber,resultSet.getString("given_name"),resultSet.getString("surname"),
                                        resultSet.getString("nationality"),resultSet.getString("service_date"),resultSet.getString("service_expiry_date"),
                                        resultSet.getString("passport_number"),resultSet.getString("passport_expiry_date"),resultSet.getString("visa_number"),
                                        resultSet.getString("visa_expiry_date"),resultSet.getString("visa_type"),"")
                                        );
        }
        spl("AFTER: "+run.freeMemory()+"-"+run.totalMemory()+"-"+run.maxMemory()); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T11:02:54.300

使用[**分页**](http://en.wikipedia.org/wiki/Pagination)！

您可以加载整个列表并在页面中仅显示一页（假设 10 条记录）（使用缓存更好），或者（更好）仅加载您需要显示的结果集的一部分，限制结果SQL。

加载 12000 条记录并将它们转储到页面中是**错误**的，它会使服务器、客户端超载，顺便说一句，谁想阅读（或滚动）像建筑物一样*高*的网页 ？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T09:05:45.747

您可以增加运行应用程序的 java 内存参数。

```
-Xms256m -Xmx512m -XX:MaxPermSize=128m 
```

你可以为java设置最大内存...

# oracle - Oracle Apex 网页表 - '???' APPLY_CHANGES 上的 Javascript 错误

> ID：13739974
> 
> 赞同：1
> 
> 时间：2012-12-06T08:53:08.900
> 
> 标签：oracle

在我的组织中，我们使用 Apex Websheets 来维护我们的 wiki。在编辑页面内容期间，当单击“应用更改”按钮时，浏览器通常会发出 javascript 警报，显示以下消息：

**警报框标题**：来自网页的 **消息 警报框消息**：???

一旦发生此错误，所有更改都需要被丢弃（因为没有其他选项可用于保存更改）。有没有人遇到过类似的问题，或者这是我们环境所独有的？

服务器/客户端配置： - Oracle Linux 32 位 - Oracle 11g Release1 (11.1.0.7) - Application Express 4 (4.1.1.00.23) - 在 Internet Explorer 8 (8.0.7600.16385) 和 Firefox 17 (17.0.1) 中测试在 Windows 7 32 位

# android - 是否有任何可用于 Android 操作系统源代码的文档

> ID：13739976
> 
> 赞同：3
> 
> 时间：2012-12-06T08:53:13.470
> 
> 标签：android

我想了解Android OS源代码的完整结构。我有一份 Gingerbread 的源代码副本，并希望完整地阅读它。

是否有任何文档或帮助可用于了解 Android OS 源代码树结构？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T09:07:55.613

以下是对 Android 源代码中文件夹的一些说明，可帮助您入门。

[如何理解android根树的目录结构？](https://stackoverflow.com/questions/9046572/how-to-understand-the-directory-structure-of-android-root-tree)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T09:00:05.243

源代码在注释中的源代码中记录了一点。没有可用的官方文档。

# wso2 - 在 WSO2 ESB 中使用 ActiveMQ 作为事件代理

> ID：13739981
> 
> 赞同：0
> 
> 时间：2012-12-06T08:53:26.427
> 
> 标签：wso2, activemq, wso2esb

在我的 wso2 esb 4.5.0 环境中，我想通过事件中介向 ActiveMQ 发送消息。

默认情况下，事件中介连接到 wso2 esb 中的内部基于内存的事件代理。

有可能将事件代理更改为 WSO2 消息代理。这种改变是通过编辑文件来实现的`$wso2esb_home/repository/conf/event-broker.xml`。

在文件中有一个 WSO2 MB 的示例配置，但没有 ActiveMQ。

ActiveMQ 作为事件代理的配置设置是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T18:27:04.590

我们最终通过开发一个使用 JMS 与 ActiveMQ 通信的自定义中介解决了这个问题。

# javascript - 防止右键单击 where an iframe contains PDF file in Internet Explorer(IE strictly)

> ID：13739984
> 
> 赞同：-1
> 
> 时间：2012-12-06T08:53:37.777
> 
> 标签：javascript, jquery, html, css

> **Possible Duplicate:**
> [Prevent PDF file from downloading and printing](https://stackoverflow.com/questions/4930914/prevent-pdf-file-from-downloading-and-printing)

I kow we have lots of post to prevent right click on ,

here i'm trying to have an containing PDF where user cannot right click on the pdf for Internet Explorer browser.

The basic idea is to prevent user from copying or printing the pdf file.

I have done following code it works on chrome, but fails badly on IE. FYI - PDF file is on same Domain

```
<html>
<head>
<title>Disable Context Menu</title>
<script type="text/jscript">
  function disableContextMenu()
  {
    window.frames["fraDisabled"].document.oncontextmenu = function(){alert("Right Click disabled!"); return false;};   
    // Or use this
    // document.getElementById("fraDisabled").contentWindow.document.oncontextmenu = function(){alert("Right Click disabled!"); return false;};;    
  }  
</script>
</head>
<body bgcolor="#FFFFFF" onload="disableContextMenu();" oncontextmenu="return false">
<iframe id="fraDisabled" width="528" height="473" src="landscape.pdf#toolbar=0&navpanes=0" onload="disableContextMenu();" onMyLoad="disableContextMenu();"></iframe>
</body>
</html> 
```

Or is there any other to protect your pdf file working on IE ?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-06T09:09:35.793

一种方法是取消绑定所有鼠标事件。不会是最好的办法。我同意阿伦

```
<iframe id="fraDisabled" style="pointer-events:none;" src="landscape.pdf#toolbar=0&navpanes=0"/> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T09:01:37.990

您始终可以使用[http://pageflip.hu/](http://pageflip.hu/)之类的文件并将文件创建为 SWF 或视频以阻止人们轻松复制它，但正如“ahren”所说，如果您能看到它，您可以复制它。

# android - Convert Pdf page to Image using DroidText in android

> ID：13739986
> 
> 赞同：0
> 
> 时间：2012-12-06T08:53:41.490
> 
> 标签：android, bitmap, android-droidtext

I'm trying to use `droidText` [Link here](http://code.google.com/p/droidtext/wiki/GettingStarted) to convert an PDF page to an Image (to show in `ImageView`! However, I can't find any solution for this with `droidText` lib after 2 day of google searching! So I want to ask for a help to solve this problem? Anyone does it before? Can you show me some examples? Thanks!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T11:38:06.510

我找到了一个链接（它与 droitext 无关），您可以使用它来构建您的解决方案

[http://www.jpedal.org/gplSrc/org/jpedal/examples/images/ConvertPagesToImages.java.html?_ *hstc=123926613.cadb52490e653b75bf4281c606218039.1356089256893.1356089256893.1356089256893.1&* _hssc=123926613.1.1356089256893]](http://www.jpedal.org/gplSrc/org/jpedal/examples/images/ConvertPagesToImages.java.html?__hstc=123926613.cadb52490e653b75bf4281c606218039.1356089256893.1356089256893.1356089256893.1&__hssc=123926613.1.1356089256893%5D)

你可以看看函数 extractPageAsImage

# android - 跟随用户的地图视图 - Android Maps API v2 的 MyLocationOverlay 类型功能

> ID：13739990
> 
> 赞同：16
> 
> 时间：2012-12-06T08:53:49.577
> 
> 标签：android, api, maps, google-maps-android-api-2

我切换到 Android 版地图 v2，并尝试移植以下功能：

使用 MyLocationOverlay，我可以显示设备的当前位置（蓝点）。当用户的位置发生变化并且点到达可见区域的边缘时，地图会实时显示动画，因此点成为视图的中心。

在 v2 中，我将 SupportMapFragment 与 getMap().setMyLocationEnabled(true) 一起使用。当前位置显示为蓝点（箭头），但当设备更改位置时，地图视图不会移动，并且该点最终会离开视图。

有任何想法吗？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-12-06T22:08:52.780

您需要将 LocationSource 添加到您的 GoogleMap 并响应 onLocationChanged 事件。这是一个简单的类，它询问用户的位置，然后等到用户的位置可用，然后将地图设置为以他们的位置为中心。

```
public class MyLocationMapFragmentActivity extends FragmentActivity implements LocationListener, LocationSource
{
/**
 * Note that this may be null if the Google Play services APK is not available.
 */
private GoogleMap mMap;

private OnLocationChangedListener mListener;
private LocationManager locationManager;

@Override
protected void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);

    setContentView(R.layout.basic_map);

    locationManager = (LocationManager) getSystemService(LOCATION_SERVICE);

    if(locationManager != null)
    {
        boolean gpsIsEnabled = locationManager.isProviderEnabled(LocationManager.GPS_PROVIDER);
        boolean networkIsEnabled = locationManager.isProviderEnabled(LocationManager.NETWORK_PROVIDER);

        if(gpsIsEnabled)
        {
            locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 5000L, 10F, this);
        }
        else if(networkIsEnabled)
        {
            locationManager.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, 5000L, 10F, this);
        }
        else
        {
            //Show an error dialog that GPS is disabled.
        }
    }
    else
    {
        //Show a generic error dialog since LocationManager is null for some reason
    }

    setUpMapIfNeeded();
}

@Override
public void onPause()
{
    if(locationManager != null)
    {
        locationManager.removeUpdates(this);
    }

    super.onPause();
}

@Override
public void onResume()
{
    super.onResume();

    setUpMapIfNeeded();

    if(locationManager != null)
    {
        mMap.setMyLocationEnabled(true);
    }
}

/**
 * Sets up the map if it is possible to do so (i.e., the Google Play services APK is correctly
 * installed) and the map has not already been instantiated.. This will ensure that we only ever
 * call {@link #setUpMap()} once when {@link #mMap} is not null.
 * <p>
 * If it isn't installed {@link SupportMapFragment} (and
 * {@link com.google.android.gms.maps.MapView
 * MapView}) will show a prompt for the user to install/update the Google Play services APK on
 * their device.
 * <p>
 * A user can return to this Activity after following the prompt and correctly
 * installing/updating/enabling the Google Play services. Since the Activity may not have been
 * completely destroyed during this process (it is likely that it would only be stopped or
 * paused), {@link #onCreate(Bundle)} may not be called again so we should call this method in
 * {@link #onResume()} to guarantee that it will be called.
 */
private void setUpMapIfNeeded() {
    // Do a null check to confirm that we have not already instantiated the map.
    if (mMap == null) 
    {
        // Try to obtain the map from the SupportMapFragment.
        mMap = ((SupportMapFragment) getSupportFragmentManager().findFragmentById(R.id.basicMap)).getMap();
        // Check if we were successful in obtaining the map.

        if (mMap != null) 
        {
            setUpMap();
        }

        //This is how you register the LocationSource
        mMap.setLocationSource(this);
    }
}

/**
 * This is where we can add markers or lines, add listeners or move the camera. In this case, we
 * just add a marker near Africa.
 * <p>
 * This should only be called once and when we are sure that {@link #mMap} is not null.
 */
private void setUpMap() 
{
    mMap.setMyLocationEnabled(true);
}

@Override
public void activate(OnLocationChangedListener listener) 
{
    mListener = listener;
}

@Override
public void deactivate() 
{
    mListener = null;
}

@Override
public void onLocationChanged(Location location) 
{
    if( mListener != null )
    {
        mListener.onLocationChanged( location );

        //Move the camera to the user's location once it's available!
        mMap.animateCamera(CameraUpdateFactory.newLatLng(new LatLng(location.getLatitude(), location.getLongitude())));
    }
}

@Override
public void onProviderDisabled(String provider) 
{
    // TODO Auto-generated method stub
    Toast.makeText(this, "provider disabled", Toast.LENGTH_SHORT).show();
}

@Override
public void onProviderEnabled(String provider) 
{
    // TODO Auto-generated method stub
    Toast.makeText(this, "provider enabled", Toast.LENGTH_SHORT).show();
}

@Override
public void onStatusChanged(String provider, int status, Bundle extras) 
{
    // TODO Auto-generated method stub
    Toast.makeText(this, "status changed", Toast.LENGTH_SHORT).show();
}
} 
```

这应该跟随用户并在地图发生变化时保持地图居中在他们的位置上 - 如果您只想在用户“离开屏幕”时将地图居中，那么您可以检查用户的位置是否在地图的可见边界

```
@Override
public void onLocationChanged(Location location) 
{
    if( mListener != null )
    {
        mListener.onLocationChanged( location );

        LatLngBounds bounds = this.mMap.getProjection().getVisibleRegion().latLngBounds;

        if(!bounds.contains(new LatLng(location.getLatitude(), location.getLongitude())))
        {
             //Move the camera to the user's location if they are off-screen!
             mMap.animateCamera(CameraUpdateFactory.newLatLng(new LatLng(location.getLatitude(), location.getLongitude())));
        }
    }
} 
```

以下是关于该主题的简短文章： [Google Maps Android API V2 MyLocation LocationSource and event handling](http://discgolfsoftware.wordpress.com/2012/12/06/google-maps-android-api-v2-mylocation-locationsource-and-event-handling/)

**更新**

我编辑了获取用户位置的方式（参见 onCreate 中的 locationManager 代码）。我发现使用“getBestProvider”方法并不可靠，而且不能在多个设备上工作。我有几个用户抱怨他们的设备永远找不到他们的位置，无论我制定的标准多么宽松。似乎手动选择 GPS 或网络普遍适用。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-01-13T16:25:49.203

**更新**：谷歌介绍了新的[`LocationClient`](https://developer.android.com/reference/com/google/android/gms/location/LocationClient.html)和相关[`LocationListener`](https://developer.android.com/reference/com/google/android/gms/location/LocationListener.html)的（`OnMyLocationChangeListener`界面现在已弃用）。所以现在相机的自动居中是一项微不足道的任务。

* * *

尽管 spotdog 已经回答了我想分享我自己的示例的问题，但我希望这将有助于 Android 初学者更好地了解`LocationSource`为 my-location 层进行自定义需要什么。希望您会发现代码有很好的文档记录/注释。

```
public class PlaceMapFragment extends SupportMapFragment {

    // Note that this may be null if the Google Play services APK is not available.
    private GoogleMap mMap;

    protected PlaceActivity activity;
    private FollowMeLocationSource followMeLocationSource;
    private Context mContext;

    /* We need the Context in order to get a reference to the Location Manager
     * (when instantiating this fragment from your activity use:
     *  PlaceMapFragment mapFragment = new PlaceMapFragment(this); ) */
    public PlaceMapFragment(Context context) {
        this.mContext = context;
    }

    @Override
    public void onActivityCreated(Bundle savedInstanceState) {
        super.onActivityCreated(savedInstanceState);

        activity = (PlaceActivity)getActivity();
    }

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        // creates our custom LocationSource and initializes some of its members
        followMeLocationSource = new FollowMeLocationSource();

        /* We can't be guaranteed that the map is available because Google Play services might not be available.
         * (un-comment the following line when using this code in a FragmentActivity / Activity 
         *  to try get a reference to the map here !) */
        //setUpMapIfNeeded();
    }

    @Override
    public void onResume() {
        super.onResume();

        /* We query for the best Location Provider everytime this fragment is displayed
         * just in case a better provider might have become available since we last displayed it */
        followMeLocationSource.getBestAvailableProvider();

        // Get a reference to the map/GoogleMap object
        setUpMapIfNeeded();

        /* Enable the my-location layer (this causes our LocationSource to be automatically activated.)
         * While enabled, the my-location layer continuously draws an indication of a user's
         * current location and bearing, and displays UI controls that allow a user to interact
         * with their location (for example, to enable or disable camera tracking of their location and bearing).*/
        mMap.setMyLocationEnabled(true);
    }

    @Override
    public void onPause() {
        /* Disable the my-location layer (this causes our LocationSource to be automatically deactivated.) */
        mMap.setMyLocationEnabled(false);

        super.onPause();
    }

    /**
     * Sets up the map if it is possible to do so (i.e., the Google Play services APK is correctly
     * installed) and the map has not already been instantiated. This will ensure that we only ever
     * manipulate the map once when it {@link #mMap} is not null.
     * <p>
     * If it isn't installed {@link SupportMapFragment} (and {@link com.google.android.gms.maps.MapView
     * MapView}) will show a prompt for the user to install/update the Google Play services APK on their device.
     */
    private void setUpMapIfNeeded() {
        // Do a null check to confirm that we have not already instantiated the map.
        if (mMap == null) {
            mMap = getMap();
            // Check if we were successful in obtaining the map.
            if (mMap != null) {
                // The Map is verified. It is now safe to manipulate the map:

                // Replace the (default) location source of the my-location layer with our custom LocationSource
                mMap.setLocationSource(followMeLocationSource);

                // Set default zoom
                mMap.moveCamera(CameraUpdateFactory.zoomTo(15f));
            }
        }
    }

    /* Our custom LocationSource. 
     * We register this class to receive location updates from the Location Manager
     * and for that reason we need to also implement the LocationListener interface. */
    private class FollowMeLocationSource implements LocationSource, LocationListener {

        private OnLocationChangedListener mListener;
        private LocationManager locationManager;
        private final Criteria criteria = new Criteria();
        private String bestAvailableProvider;
        /* Updates are restricted to one every 10 seconds, and only when
         * movement of more than 10 meters has been detected.*/
        private final int minTime = 10000;     // minimum time interval between location updates, in milliseconds
        private final int minDistance = 10;    // minimum distance between location updates, in meters

        private FollowMeLocationSource() {
            // Get reference to Location Manager
            locationManager = (LocationManager) mContext.getSystemService(Context.LOCATION_SERVICE);

            // Specify Location Provider criteria
            criteria.setAccuracy(Criteria.ACCURACY_FINE);
            criteria.setPowerRequirement(Criteria.POWER_LOW);
            criteria.setAltitudeRequired(true);
            criteria.setBearingRequired(true);
            criteria.setSpeedRequired(true);
            criteria.setCostAllowed(true);
        }

        private void getBestAvailableProvider() {
            /* The preffered way of specifying the location provider (e.g. GPS, NETWORK) to use 
             * is to ask the Location Manager for the one that best satisfies our criteria.
             * By passing the 'true' boolean we ask for the best available (enabled) provider. */
            bestAvailableProvider = locationManager.getBestProvider(criteria, true);
        }

        /* Activates this provider. This provider will notify the supplied listener
         * periodically, until you call deactivate().
         * This method is automatically invoked by enabling my-location layer. */
        @Override
        public void activate(OnLocationChangedListener listener) {
            // We need to keep a reference to my-location layer's listener so we can push forward
            // location updates to it when we receive them from Location Manager.
            mListener = listener;

            // Request location updates from Location Manager
            if (bestAvailableProvider != null) {
                locationManager.requestLocationUpdates(bestAvailableProvider, minTime, minDistance, this);
            } else {
                // (Display a message/dialog) No Location Providers currently available.
            }
        }

        /* Deactivates this provider.
         * This method is automatically invoked by disabling my-location layer. */
        @Override
        public void deactivate() {
            // Remove location updates from Location Manager
            locationManager.removeUpdates(this);

            mListener = null;
        }

        @Override
        public void onLocationChanged(Location location) {
            /* Push location updates to the registered listener..
             * (this ensures that my-location layer will set the blue dot at the new/received location) */
            if (mListener != null) {
                mListener.onLocationChanged(location);
            }

            /* ..and Animate camera to center on that location !
             * (the reason for we created this custom Location Source !) */
            mMap.animateCamera(CameraUpdateFactory.newLatLng(new LatLng(location.getLatitude(), location.getLongitude())));
        }

        @Override
        public void onStatusChanged(String s, int i, Bundle bundle) {

        }

        @Override
        public void onProviderEnabled(String s) {

        }

        @Override
        public void onProviderDisabled(String s) {

        }
    }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T14:15:53.090

只需使用`OnMyLocationChangeListener`，覆盖该方法`public void onMyLocationChange(Location location)`。用于`GoogleMap.setOnMyLocationChangeListener(your listener)`注册您的听众。

```
public void onMyLocationChange(Location location) {
        changeMapLocation(location);
    }

    private void changeMapLocation(Location location) {
        LatLng latlong = new LatLng(location.getLatitude(),
                location.getLongitude());
        map.moveCamera(CameraUpdateFactory.newLatLngZoom(latlong, 15));

        // Zoom in, animating the camera.
        map.animateCamera(CameraUpdateFactory.zoomTo(10), 2000, null);
    } 
```

# c++ - 如何创建版本化 DLL 并使用文本或 xml 作为资源进行编译？

> ID：13739997
> 
> 赞同：0
> 
> 时间：2012-12-06T08:54:07.533
> 
> 标签：c++, dll, compilation, versioning

我正在创建一个 DLL 并希望使用包含它的版本的文本文件或 xml 对其进行编译。我该怎么做？我想在编译期间 - >访问某个“信息文件”，DLL将使用它的“版本”和“公司名称”，例如......并将其用作DLL的属性。

我什至不知道从哪里以及如何开始......任何帮助将不胜感激！

谢谢你！：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T09:21:03.827

你可以很容易地实现这一点，`verpatch`这里提供：

[http://www.codeproject.com/Articles/37133/Simple-Version-Resource-Tool-for-Windows](http://www.codeproject.com/Articles/37133/Simple-Version-Resource-Tool-for-Windows)

但是，您需要在命令行上传递您的版本信息，因此需要设置您的工具链以从您的版本文本文件中生成它。我们用 CMake 做到这一点。