# StackOverflow 问答 13143000-13143999

# python - 从哈希表列表中获取值并放入一个列表中？

> ID：13143000
> 
> 赞同：0
> 
> 时间：2012-10-30T16:00:50.630
> 
> 标签：python, csv, dictionary

我有每个元素都是字典的列表。

```
myList = [
{mykey1:myValue1, myKey2:myValue2},
{myKey1:myValue1b, myKey2:myValue2b}
] 
```

我想要一个 CSV 文件，其中只有每个条目的值。为此，我需要一个列表，其中每个元素都是一串逗号分隔值。所以它的形式是：

```
myValuesOnlyList=[ "myValue1, myValue2",
"myValue1b, myValue2b"] 
```

为此，我执行以下操作：

```
for mydict in myList:
    row = ','.join(str(e) for e in mydict.values());
    myValuesOnlyList.append(row); 
```

有没有更蟒蛇的方式来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T16:04:08.040

使用[`csv.DictWriter`class](http://docs.python.org/2/library/csv.html#csv.DictWriter)，它会直接为您编写值：

```
fields = ('mykey1', 'mykey2', ...)
with open('output.csv', 'wb') as f:
    writer = csv.DictWriter(f, fields)
    writer.writerow({f: f for f in fields})  # write a header row
    for entry in myList:
        write.writerow(entry) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T16:07:39.460

您可以摆脱`for`循环并使用列表理解：

```
[",".join(str(v) for v in d.itervalues()) for d in myList] 
```

请注意，由于字典是无序的，因此您无法预测返回不同值的顺序（这可能是一个严重的问题）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T16:03:07.033

您可以使用[csv](http://docs.python.org/2/library/csv.html)模块。

### 通用示例：

```
import csv
with open('eggs.csv', 'wb') as csvfile:
    spamwriter = csv.writer(csvfile, delimiter=' ',
                            quotechar='|', quoting=csv.QUOTE_MINIMAL)
    spamwriter.writerow(['Spam'] * 5 + ['Baked Beans'])
    spamwriter.writerow(['Spam', 'Lovely Spam', 'Wonderful Spam']) 
```

# symfony - symfony 2 twig 限制文字长度并放三个点

> ID：13143001
> 
> 赞同：142
> 
> 时间：2012-10-30T16:00:56.710
> 
> 标签：symfony, twig

如何限制文本的长度，例如 50，并在显示中放置三个点？

```
{% if myentity.text|length > 50 %}

{% block td_text %} {{ myentity.text}}{% endblock %}

{%endif%} 
```

* * *

## 回答 #1

> 赞同：224
> 
> 时间：2012-10-30T16:06:53.803

```
{{ myentity.text|length > 50 ? myentity.text|slice(0, 50) ~ '...' : myentity.text  }} 
```

你需要[树枝 1.6](http://twig.sensiolabs.org/doc/filters/slice.html)

* * *

## 回答 #2

> 赞同：123
> 
> 时间：2012-10-30T16:43:40.720

为什么不使用 twig 的 truncate 或 wordwrap 过滤器？如我所见，它属于[树枝扩展](https://github.com/fabpot/Twig-extensions)，而 lib 是 Symfony2.0 的一部分。

```
{{ text|truncate(50) }} 
```

* * *

## 回答 #3

> 赞同：37
> 
> 时间：2013-06-15T00:00:32.337

另一个是：

```
{{ myentity.text[:50] ~ '...' }} 
```

* * *

## 回答 #4

> 赞同：19
> 
> 时间：2016-05-11T21:15:56.220

我知道这是一个非常古老的问题，但是从 twig 1.6 开始，您可以使用切片过滤器；

```
{{ myentity.text|slice(0, 50) ~ '...' }} 
```

如果您想添加一些东西，例如省略号，波浪号的第二部分是可选的。

**编辑：**我的错，我看到投票最多的答案确实使用了切片过滤器。

* * *

## 回答 #5

> 赞同：14
> 
> 时间：2016-12-16T14:24:58.910

@olegkhuss 使用命名为 UTF-8 Elipsis 的解决方案： `{{ (my.text|length > 50 ? my.text|slice(0, 50) ~ '…' : my.text) }}`

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2017-04-28T09:39:53.493

@mshobnr / @olegkhuss 解决方案变成了一个简单的宏：

```
{% macro trunc(txt, len) -%}
    {{ txt|length > len ? txt|slice(0, len) ~ '…' : txt }}
{%- endmacro %} 
```

使用示例：

```
{{ tools.trunc('This is the text to truncate. ', 50) }} 
```

注意，我导入了一个包含宏的 Twig 模板并将其作为“工具”导入，如下所示（Symfony）：

```
{% import "@AppBundle/tools.html.twig" as tools -%} 
```

另外，我用实际字符替换了html字符代码，使用UTF-8作为文件编码应该没有问题。这样您就不必使用`|raw`（因为它可能会导致安全问题）。

* * *

## 回答 #7

> 赞同：9
> 
> 时间：2020-06-19T22:44:48.617

Twig 2 和 Twig 3 的更新。

[截断过滤器不可用，您可以使用u-filter](https://twig.symfony.com/doc/3.x/filters/u.html)代替它

这是一个例子：

```
{{ 'Lorem ipsum'|u.truncate(8) }}
Lorem ip

{{ 'Lorem ipsum'|u.truncate(8, '...') }}
Lorem... 
```

注意：此过滤器是 StringExtension 的一部分，可由

```
twig/string-extra 
```

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2015-12-01T11:50:30.353

一个更优雅的解决方案是通过字数（而不是字符数）来限制文本。这可以防止丑陋的撕裂（例如'Stackov...'）。

这是一个示例，我只缩短了超过 10 个单词的文本块：

```
{% set text = myentity.text |split(' ') %} 

{% if text|length > 10 %} 
    {% for t in text|slice(0, 10) %}
        {{ t }} 
    {% endfor %}
    ...
{% else %}
    {{ text|join(' ') }}
{% endif %} 
```

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2020-01-20T14:18:40.513

达到限制后使用截断过滤器截断字符串

```
{{ "Hello World!"|truncate(5) }} // default separator is ... 
```

> 你好...

您还可以通过将第二个参数设置为 true 来告诉 truncate 保留整个单词。如果最后一个 Word 在分隔符上，则 truncate 将打印出整个 Word。

```
 {{ "Hello World!"|truncate(7, true) }} // preserve words 
```

> 这里你好世界！

如果要更改分隔符，只需将第三个参数设置为所需的分隔符即可。

```
{{ "Hello World!"|truncate(7, false, "??") }} 
```

> 你好W??

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2014-12-10T13:50:32.893

您可以通过以下方式进行限制。第一个是起始索引，第二个是字符数。

```
**{{ results['text'][4:2] }}** 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2021-06-22T18:05:18.303

如果有人需要现代世界的这个，因为这个问题太老了，我会这样做：我绝对不希望最后有一个不完整的单词，因此我更喜欢通过以下步骤来做到这一点：限制想要的字符长度，将我的文本分解成一堆用逗号或点分隔的句子数组，这取决于您的文本，删除代表不完整单词的最后一个数组，然后将这些数组连接或组合在一起，当然不要忘记将它们与我们在分解字符串时删除的那个点连接起来，在树枝 {{}} 之外添加你的三个点，据说它看起来像这样：

`{{myentity.text|slice(0,50)|split('.')|slice(0,-1)|join('.')}}...`

`<a href="#">readeMore</a>`

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2015-09-11T05:47:44.170

我出于同样的目的写了这个简单的marco，希望对您有所帮助：

```
{%- macro stringMaxLength(str, maxLength) -%}
    {%- if str | length < maxLength -%}
        {{ str }}
    {%- else -%}
        {{ str|slice(0, maxLength) }}...
    {%- endif -%}
{%- endmacro -%} 
```

使用示例#1（输出：“我的长字符串在这里......”）：

```
{{ _self.stringMaxLength("my long string here bla bla bla la", 20) }} 
```

使用示例 #2（输出：“更短的字符串！”）：

```
{{ _self.stringMaxLength("shorter string!", 20) }} 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2021-04-07T22:41:45.613

除了 Nemo64 在 olegkhuss 的[回复](https://stackoverflow.com/a/13143106/7058317)下的评论之外，我想补充一点，如果您需要使部分文本以单词而不是字符结尾，您可以这样做：

```
entity.text|split(' ', 11)|length > 10 ? entty.text|split(' ', 11)|slice(0, 10)|join(' ') ~ '…' : entity.text 
```

在此示例中，所有超过 10 个单词的文本将在第 10 个单词之后被剪切。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2018-07-27T00:57:23.177

此处新的 Drupal 8 功能中的错误*启发了我们编写自己的代码：

```
<a href="{{ view_node }}">{% if title|length > 32 %}{% set title_array = title|split(' ') %}{% set title_word_count = 0 %}{% for ta in title_array %}{% set word_count = ta|length %}{% if title_word_count < 32 %}{% set title_word_count = title_word_count + word_count %}{{ ta }} {% endif %}{% endfor %}...{% else %}{{ title }}{% endif %}</a> 
```

这同时考虑了单词和字符（* D8 中的“单词边界”设置不显示任何内容）。

* * *

## 回答 #15

> 赞同：-1
> 
> 时间：2018-05-13T19:57:31.087

最好使用 HTML 字符

```
{{ entity.text[:50] }}&#8230; 
```

# ruby-on-rails - form_for 方法使用 slim

> ID：13143002
> 
> 赞同：14
> 
> 时间：2012-10-30T16:01:00.880
> 
> 标签：ruby-on-rails, slim-lang

我查看了 slim 的文档，但仍然无法弄清楚如何在 slim 中执行此操作：

```
<%= form_for([@post, @post.comments.build]) do |f| %>
  <div class="field">
    <%= f.label :commenter %><br />
    <%= f.text_field :commenter %>
  </div>
  <div class="field">
    <%= f.label :body %><br />
    <%= f.text_area :body %>
  </div>
  <div class="actions">
    <%= f.submit %>
  </div>
<% end %> 
```

我试着像这样翻译第一行

```
= form_for([@post, @post.reviews.build]) do |f| 
```

但我收到语法错误。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-11-02T09:08:19.070

之前遇到过类似的问题，我认为您只需要一些子元素！尝试这个：

```
= form_for([@post, @post.comments.build]) do |f|
  div.field
    = f.label :commenter
    br
    = f.text_field :commenter
  div.field
    = f.label :body
    br
    = f.text_area :body
  div.actions
    = f.submit 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-11-28T00:03:55.637

马里奥写道：

> = form_for([@post, @post.comments.build]) 做 |f| div.field = f.label :commenter br = f.text_field :commenter div.field = f.label :body br = f.text_area :body div.actions = f.submit

div 不是必需的。所以我会这样做：

```
= form_for([@post, @post.comments.build]) do |f|
  .field
    = f.label :commenter
    br
    = f.text_field :commenter
  .field
    = f.label :body
    br
    = f.text_area :body
  .actions
    = f.submit 
```

# drupal - Drupal 7 日历模块的潜力

> ID：13143003
> 
> 赞同：1
> 
> 时间：2012-10-30T16:01:03.577
> 
> 标签：drupal, calendar, drupal-7

我想使用 Drupal 7 日历模块来创建 4 个不同房间的每日预订视图。

我以前从未使用过该模块，并且正在努力寻找不需要订阅的任何好的教程或视频。

任何使用过它的人都可以告诉我这是否可能吗？

我将有一个分配有分类术语的预订节点。然后预订将显示在正确的行上，具体取决于它所在的房间。单击预订时需要显示其他节点字段，并且最好包含一个用于编辑预订的链接。模块是否有能力做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T19:22:14.790

日历应该可以做到这一点。它不会处理“预订”的所有细节，如可用或不可用、冲突等。您可能需要覆盖日历单元主题，以根据所需的复杂性显示您想要的内容。“字段”显示样式应该让您接近。单击预订时，您可以使用“日历弹出”模块（日历的一部分）自定义详细信息。

由于您可能会在预订内容类型中使用日期字段，因此请务必更新默认日历视图以使用此字段而不是节点的内置日期。

此外，请确保在设置日历视图并开始输入数据之前设置时区处理。见：[http ://drupal.org/node/1455578](http://drupal.org/node/1455578)

# android - onOptionsItemSelected android中的警报对话框

> ID：13143006
> 
> 赞同：4
> 
> 时间：2012-10-30T16:01:06.420
> 
> 标签：android, menu, dialog, option

当我的 OptionsMenuItems 之一被点击时，我试图弹出一个警告对话框。如果用户单击“是”则继续操作，如果单击“否”则取消。我只是不知道如何编写代码。这就是我所拥有的：

```
@Override
public boolean onOptionsItemSelected(MenuItem item)
{ 

    switch (item.getItemId()) { 
    case R.id.exit:
        this.finish();
        return true;
    case R.id.about:
        Intent i = new Intent(this, AboutActivity.class);
        this.startActivity(i);
    case R.id.skip:
        AlertDialog.Builder alertbox = new AlertDialog.Builder(this);

            // set the message to display
            alertbox.setMessage("The yoga pose will be skipped from now on!").show();
           alertbox.setCancelable(true);
           alertbox.setNegativeButton("no").setPositiveButton("OK", new DialogClicklistener() { 

             // click listener on the alert box
            public boolean onClick(DialogInterface arg0, int arg1) {
                // the button was clicked
                boolean success = myDbHelper.setSkip(PoseID);
                SetImageView2(myDbHelper);
                return success;
              }

           });

           // add a neutral button to the alert box and assign a click listener
           alertbox.setCancelable(true).set(onCancelListener) {

              // click listener on the alert box
               public boolean onClick(DialogInterface arg0, int arg1) {
                // the button was clicked

              }
           });
           // show it
           alertbox.show();

     default: 
            return super.onOptionsItemSelected(item);
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-30T16:08:41.340

以下直接来自我目前正在开发的应用程序。它会弹出一个 AlertDialog，然后将用户带到不同的活动（在他们输入密码之后）。如果我能澄清任何事情，请告诉我。

编辑：现在包括整个方法。

```
@Override
public boolean onOptionsItemSelected(MenuItem item) { 
    LayoutInflater inflater = (LayoutInflater) this.getSystemService(LAYOUT_INFLATER_SERVICE);
    final int menuItem = item.getItemId();
    if ((menuItem == R.id.survey) || (menuItem == R.id.syncMode)) {
        View layout = inflater.inflate(R.layout.survey_password_dialog, (ViewGroup) findViewById(R.id.layout_root));
        final EditText password = (EditText) layout.findViewById(R.id.passwordText);
        AlertDialog.Builder builder = new AlertDialog.Builder(this);            
        builder.setView(layout)
        .setCancelable(false)
        .setPositiveButton("OK", new DialogInterface.OnClickListener() {
            @Override
            public void onClick(DialogInterface dialog, int id) {   
            }
        })
        .setNegativeButton("Cancel", new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog, int id) {
                dialog.cancel();
            }
        });
        final AlertDialog alertDialog = builder.create();
        alertDialog.setOnShowListener(new DialogInterface.OnShowListener() {
            @Override
            public void onShow(DialogInterface dialog) {
                Button b = alertDialog.getButton(AlertDialog.BUTTON_POSITIVE);
                b.setOnClickListener(new View.OnClickListener() {
                    @Override
                    public void onClick(View view) {
                        if (password.getText().toString().equalsIgnoreCase("the_password")) {
                            if (menuItem == R.id.survey) {
                                Intent intent = new Intent(AsthmaAppActivity.this, SurveyActivity.class);
                                startActivity(intent);
                                alertDialog.dismiss();
                            }
                            else { //(menuItem == R.id.syncMode) 
                                startActivity(new Intent(AsthmaAppActivity.this, SyncMode.class));
                                alertDialog.dismiss();
                            }
                        }
                        else Toast.makeText(AsthmaAppActivity.this, "Password incorrect", Toast.LENGTH_LONG).show();
                    }
                });
            }
        });
        alertDialog.getWindow().setSoftInputMode (WindowManager.LayoutParams.SOFT_INPUT_STATE_ALWAYS_VISIBLE);
        alertDialog.show();
    }
    else {  //dialog for setting application parameters "on the fly" for application testing
        View layout = inflater.inflate(R.layout.parameter_change, (ViewGroup) findViewById(R.id.layout_root));
        final EditText parameter = (EditText) layout.findViewById(R.id.parameterText);
        AlertDialog.Builder builder = new AlertDialog.Builder(this);
        builder.setView(layout)
        .setCancelable(false)
        .setPositiveButton("OK", new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog, int id) {  
                String parameterString = parameter.getText().toString();
                if(parameterString == null || parameterString.isEmpty()) {
                    testParam = 0.0;
                } 
                else {
                    testParam = Double.parseDouble(parameterString);
                }
            }
        })
        .setNegativeButton("Cancel", new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog, int id) {
                dialog.cancel();
            }
        })
        .show();
    }
    return(super.onOptionsItemSelected(item));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T16:12:39.807

```
import android.content.DialogInterface;
import android.content.DialogInterface.OnClickListener;
alertbox.setPositiveButton("Yes" new OnClickListener() {

                @Override
                public void onClick(DialogInterface dialog, int which) {
                    log("i'm clicked");
                }
            }); 
```

# asp.net - 将对象转换为 MVC Web 应用程序的 excel 文件

> ID：13143007
> 
> 赞同：0
> 
> 时间：2012-10-30T16:01:15.433
> 
> 标签：asp.net, asp.net-mvc, excel, object

例如，我有一个具有两个属性的项目对象

```
public class Item {
   public string Name { get; set; }
   public decimal Price { get; set; }
} 
```

然后...

```
Item item = new Item(); 
```

如何传递此“项目”对象以将其转换为 excel 并将其保存到目标文件夹位置。

谢谢。

# java - Vaadin 中组合框的验证器

> ID：13143008
> 
> 赞同：1
> 
> 时间：2012-10-30T16:01:16.577
> 
> 标签：java, validation, combobox, vaadin

在文本字段中，我可以检查用户输入了多少个字符，例如：

```
Field field;
field.addValidator(
    new StringLengthValidator(
        "WARNING MESSAGE HERE", 6, 20, false)); 
```

如果数字不在范围内，则抛出警告消息。对于数字字段，我可以检查类型：

```
field.addValidator(new Validator() {

   public boolean isValid(Object value) {
      try {
        float f = Float.parseFloat((String) value);
        return true;
      } catch (Exception e) {
         field.getWindow().showNotification("WARNING MESSAGE HERE");
         field.setValue(0);                            
         return false;
      }
   }

   public void validate(Object value)
      throws InvalidValueException {
   }

}); 
```

对于组合框，我指定以下内容：

```
final ComboBox combobox = new ComboBox("...");

if("someProperty".equals(propertyId)) {
   field = combobox;
}

field.setRequired(true);                
field.setRequiredError("WARNING MESSAGE HERE"); 
```

如果我将其留空，则不会显示警告并将表单发送到服务器。ComboBox 需要什么验证器？

我将非常感谢您提供的信息。谢谢大家。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T09:09:45.687

您正在寻找的是用户更改任何内容后立即回调到服务器。

```
// Fire value changes immediately when the field loses focus
combobox.setImmediate(true); 
```

为此，用户不必等待获得验证，直到他们提交或执行任何其他需要与服务器交互的操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T18:18:31.303

我想你应该显式调用 validate() 方法：

```
/**
 * Checks the validity of the Validatable by validating the field with all
 * attached validators except when the field is empty. An empty field is
 * invalid if it is required and valid otherwise.
 * 
 * The "required" validation is a built-in validation feature. If the field
 * is required, but empty, validation will throw an EmptyValueException with
 * the error message set with setRequiredError().
 * 
 * @see com.vaadin.data.Validatable#validate()
 */
public void validate() throws Validator.InvalidValueException {

    if (isEmpty()) {
        if (isRequired()) {
            throw new Validator.EmptyValueException(requiredError);
        } else {
            return;
        }
    }

    // If there is no validator, there can not be any errors
    if (validators == null) {
        return;
    }
... 
```

默认情况下，Form 执行验证：

```
/**
 * Checks the validity of the validatable.
 * 
 * @see com.vaadin.data.Validatable#validate()
 */
@Override
public void validate() throws InvalidValueException {
    super.validate();
    for (final Iterator<Object> i = propertyIds.iterator(); i.hasNext();) {
        (fields.get(i.next())).validate();
    }
} 
```

# mysql - MySql：用 number=number+1 替换 INTO

> ID：13143016
> 
> 赞同：3
> 
> 时间：2012-10-30T16:01:30.583
> 
> 标签：mysql, sql, replace, add

我想在一个查询中做这样的事情。

```
REPLACE INTO table ( id, number ) VALUES ( 'test', number=number+5 ) 
```

我想要的是（第一次！）插入行并设置数字 5。其他时间（如果已经存在）在数字处添加 5。

可能吗？我在网上找不到任何东西。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-30T16:02:48.443

只要确保这`ID`是独一无二的。使用**[INSERT ... ON DUPLICATE KEY UPDATE](http://dev.mysql.com/doc/refman/5.0/en/insert-on-duplicate.html)**语法

```
INSERT INTO tableName (id, number)
VALUES ('test', 5)
ON DUPLICATE KEY UPDATE
number = number + 5 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T16:03:50.963

假设这`id`是一个正确的键（例如主键）：

```
INSERT INTO `table` (id, number)
VALUES ('test', 5)
ON DUPLICATE KEY UPDATE number=number+VALUES(number) 
```

# c++ - 当指针被其他人主动抓取时，在 Linux/X11 中隐藏或更改鼠标指针

> ID：13143021
> 
> 赞同：2
> 
> 时间：2012-10-30T16:01:45.750
> 
> 标签：c++, c, linux, mouse, x11

当鼠标指针被其他客户端主动抓取时，我未能隐藏或更改鼠标指针。

我试过 XChangeActivePointerGrab 和 XDefineCursor。主要问题是：在 XDnD（拖放）期间，当鼠标指针进入我的窗口时，我无法隐藏它。

我将在 Synergy 中使用它：当用户将某些东西拖到另一个显示器（在其他计算机上）时，第一个显示器上的鼠标指针应该被隐藏。

# php - Sphinx - 如何使用 PHP API 的扩展查询语法

> ID：13143031
> 
> 赞同：0
> 
> 时间：2012-10-30T16:02:28.540
> 
> 标签：php, api, full-text-search, sphinx

谁能解释我如何让 Sphinx 使用扩展查询语法进行短语匹配 - 这是我的代码..

```
 $cl = new SphinxClient();
    $cl->SetServer($CONF['sphinx_host'], $CONF['sphinx_port']);
    $cl->SetSortMode(SPH_MATCH_ANY);
    $cl->SetFieldWeights ( array ( "title" => 100, "description" => 90 ) );
    $cl->SetMatchMode(SPH_MATCH_EXTENDED2);
    $cl->SetRankingMode(SPH_RANK_SPH04);
    $cl->SetLimits(0, 1000);

    $q = 'She sells sea shells';
    $result = $cl->Query($q); 
```

我将如何执行词组匹配？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T17:47:08.343

```
 $q = '"She sells sea shells"'; 
```

只需将查询放在引号中（或只是查询的一部分！）

```
 $q = '"She sells" sea shells'; 
```

# jquery-mobile - jQuery 未定义在 1.2 稳定的 jquery.mobile.js

> ID：13143034
> 
> 赞同：1
> 
> 时间：2012-10-30T16:02:38.210
> 
> 标签：jquery-mobile

我已将 jquery.mobile-1.0b2.js 更新为 jquery.mobile-1.2.0.js。我收到 jQuery 未定义错误。在之前的 beta 版本中，我将 js 修改为

```
(function(jQuery) {
// beta version code here..
})(custom.jquery); 
```

其中 custom.jquery 被定义为

```
custom.jquery = jQuery.noConflict(true); 
```

在 jquery.js

我在稳定的 1.2 js 中做了类似的包装并得到了未定义的错误。没有包装也有同样的错误。请给我建议。

# objective-c - 将 NSMutableArray 保存在 NSUserDefaults 中

> ID：13143039
> 
> 赞同：1
> 
> 时间：2012-10-30T16:02:41.220
> 
> 标签：objective-c, nsuserdefaults

我需要保存一个`NSMutableArray`到`NSUserDefaults`.

我已经尝试过了，但是 load 方法返回一个`nil` `NSMutableArray`：

```
//    NSMutableArray *listaAenviar = [[NSMutableArray alloc]init];

 -(void) saveArray {
NSUserDefaults *currentDefaults = [NSUserDefaults standardUserDefaults];
[_listaAenviar addObject:@"1"];
[currentDefaults setObject:[NSKeyedArchiver archivedDataWithRootObject:[_listaAenviar mutableCopy]] forKey:@"listaAenviar"];
[currentDefaults synchronize];
 } 

 -(void) loadArray {
NSUserDefaults *currentDefaults = [NSUserDefaults standardUserDefaults];
_listaAenviar = [currentDefaults objectForKey:@"listaAenviar"];
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T16:08:06.753

尝试使用这些方法保存一个数组，容易很多。

```
-(void)saveData :(NSMutableArray *)dataArray
{
    NSFileManager *filemgr;
    NSString *docsDir;
    NSArray *dirPaths;

    filemgr = [NSFileManager defaultManager];

    // Get the documents directory
    dirPaths = NSSearchPathForDirectoriesInDomains(
                                                   NSDocumentDirectory, NSUserDomainMask, YES);

    docsDir = [dirPaths objectAtIndex:0];

    // Build the path to the data file
   NSString *dataFilePath = [[NSString alloc] initWithString: [docsDir
                                                      stringByAppendingPathComponent: @"data.archive"]];

    [NSKeyedArchiver archiveRootObject:
     dataArray toFile:dataFilePath];
}

-(NSMutableArray *)loadData
{
    NSFileManager *filemgr;
    NSString *docsDir;
    NSArray *dirPaths;

    filemgr = [NSFileManager defaultManager];

    // Get the documents directory
    dirPaths = NSSearchPathForDirectoriesInDomains(
                                                   NSDocumentDirectory, NSUserDomainMask, YES);

    docsDir = [dirPaths objectAtIndex:0];

    // Build the path to the data file
    NSString *dataFilePath = [[NSString alloc] initWithString: [docsDir
                                                      stringByAppendingPathComponent: @"data.archive"]];

    // Check if the file already exists
    if ([filemgr fileExistsAtPath: dataFilePath])
    {
        NSMutableArray *dataArray;

        dataArray = [NSKeyedUnarchiver
                     unarchiveObjectWithFile: dataFilePath];

        return dataArray;
    }
    return NULL;
} 
```

# jquery - Twitter 引导日期选择器

> ID：13143040
> 
> 赞同：0
> 
> 时间：2012-10-30T16:02:44.873
> 
> 标签：jquery, twitter-bootstrap, datepicker

我实现了引导日期选择器。我想将默认日期设置为从今天开始 30 天。我还想在 3 个月后禁用日期。有什么办法可以实现这一点。

例如，今天的日期是 30 oc​​t。在显示 datepicker 而不是显示 30 oc​​t 时，它应该显示 31 Nov，我想禁用从 2013 年 1 月开始的日期。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T16:38:35.033

试试这个 -[**演示**](http://jsfiddle.net/BjtNY/3/)

默认日期是从现在起 30 天，结束日期是从现在起 90 天

```
var plus30days = new Date(),
    plus90days = new Date();

plus30days.setDate( plus30days.getDate() + 30 );
plus90days.setDate( plus90days.getDate() + 90 );

$( "#datepicker" )
    .datepicker( "setValue", plus30days )
    .on( "changeDate", function(ev) {
        if ( ev.date.valueOf() > plus90days.valueOf() ) {
            alert( "Hey-hey-hey! Wait a minute!" );
            $( "#datepicker" ).datepicker( "setValue", plus30days );
        }

        $( "#datepicker" ).datepicker( "hide" );
    }); 
```

# wordpress - wordpress 突然出现的主要永久链接问题

> ID：13143045
> 
> 赞同：0
> 
> 时间：2012-10-30T16:02:59.850
> 
> 标签：wordpress, http-status-code-404, permalinks, portfolio

作为序言，所有这些功能直到几周前才起作用。我有一个带有 postname 永久链接的 wordpress 网站。从第一天开始就有这个，直到最近它都运作良好。

它与投资组合和 wordpress (3.4.2) 有关。

突然间（也许是在最近的一些插件更新或风向改变之后：））我开始在我的所有投资组合“项目”上得到 404。

投资组合列表（页面）工作正常。如[http://www.dasilvamotorsport.com/performance-project-portfolio/](http://www.dasilvamotorsport.com/performance-project-portfolio/)

我将永久链接切换为默认（数字）。突然像下面这样的投资组合项目开始显示： [http ://www.dasilvamotorsport.com/portfolio-item/honda-nsx/](http://www.dasilvamotorsport.com/portfolio-item/honda-nsx/)

但投资组合类别不显示： [http ://www.dasilvamotorsport.com/performance-project-portfolio/](http://www.dasilvamotorsport.com/performance-project-portfolio/)

切换回 postname 作为永久链接基本上会恢复到投资组合项目不显示的原始问题。我听说永久链接可能需要刷新，但这对我没有帮助。我已经刷新了十几次，重新启动服务器，检查并仔细检查了 .htaccess 无济于事。

同样，直到几周前，所有这些都运行良好，所以真的不确定发生了什么。有什么我可以调试或尝试的吗？我已经尝试过 WP_DEBUG 但由于某种原因从未创建过 debug.log 文件，因此不确定那里发生了什么。（是的，我也尝试过 wp_debug_log 参数）。

apache 错误日志中没有与此相关的错误。

感谢您对此的任何帮助。

我一直在 ubuntu 11.10 机器上运行它，以 apache2 和清漆缓存作为前端。自工作的第一天以来，基础设施方面没有任何变化。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T16:30:17.590

first of all category link you mentioned is not the correct category link, it must be as

[http://www.dasilvamotorsport.com/category/performance-project-portfolio/](http://www.dasilvamotorsport.com/category/performance-project-portfolio/) which is by default.

2nd go to the permalink structure and use the default structure and save them check if is it working correct ? if yes then again select the %postname% and save, last you can also try by deactivating all your plugins then check if all the things working fine, after deactivation of plugins then try to reactivate plugins 1 by 1 , so that you can find, if there is any bug in any of the plugins that is making conflict with the permalinks. thanks.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T06:09:52.430

您是否在停用所有插件后检查过它？如果它有效，那么任何插件中都可能存在错误。然后一个一个地重新激活它们，这样你就可以找到确切的错误插件，谢谢，

# security - 调用 process.start 是否存在来自天蓝色工作人员角色的安全风险？

> ID：13143049
> 
> 赞同：0
> 
> 时间：2012-10-30T16:03:09.967
> 
> 标签：security, permissions, .net-4.0, fxcop

我们在 Azure 中有一个辅助角色，`Process.Start`用于启动后台进程（托管我们需要运行的本机应用程序）

由于链接需求，FxCop 给了我[一大堆 CA2122错误。](http://msdn.microsoft.com/en-us/library/ms182303.aspx)当我尝试添加此属性时：

```
[PermissionSet(SecurityAction.LinkDemand, Name = "FullTrust")] 
```

然后我开始[改用 CA2135](http://msdn.microsoft.com/en-us/library/dd997569.aspx)，解决方案似乎是添加 SecurityCritical 属性。

但后来我又得到了 CA2122。

这些事情中的任何一个都有问题吗？它们在什么情况下会出现，我如何确定我没有引入安全问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T16:15:00.377

SecurityCritical 应该执行与 LinkDemand 等效的角色以获得完全信任：

> SecurityCriticalAttribute 相当于完全信任的链接需求。标有 SecurityCriticalAttribute 的类型或成员只能由完全受信任的代码调用；它不必要求特定的权限。它不能被部分受信任的代码调用。

因此，我建议添加 SecurityCritical（以满足 CA2135 的需求）并抑制 CA2122，这可能只是微软忘记在他们的代码分析中考虑他们的新解决方案。

CA2122 的目标是确保该方法...

> 不再提供对链接需求保护成员的不安全访问。

一旦添加了 SecurityCritical 就不是这种情况了（这确保了该成员*只能由完全受信任的代码调用*），因此第二个 CA2122 是误报。

# python - 计算pandas DataFrame中列对的减法

> ID：13143050
> 
> 赞同：4
> 
> 时间：2012-10-30T16:03:17.087
> 
> 标签：python, pandas, data-analysis

我使用大尺寸（48K 行，多达数十列）的 DataFrame。在他们操作的某个时刻，我需要对列值进行成对减法，我想知道是否有比我正在做的更有效的方法（见下文）。

我当前的代码：

```
 # Matrix is the pandas DataFrame containing all the data
 comparison_df = pandas.DataFrame(index=matrix.index)
 combinations = itertools.product(group1, group2)

 for observed, reference in combinations:

     observed_data = matrix[observed]
     reference_data = matrix[reference]

     comparison = observed_data - reference_data
     name = observed + "_" + reference
     comparison_df[name] = comparison 
```

由于数据可能很大（我也在置换测试期间使用这段代码），我很想知道它是否可以优化一下。

编辑：根据要求，这是一个典型数据集的样本

```
ID                    A1      A2       A3       B1       B2       B3
Ku8QhfS0n_hIOABXuE    6.343   6.304    6.410    6.287    6.403    6.279
fqPEquJRRlSVSfL.8A    6.752   6.681    6.680    6.677    6.525    6.739
ckiehnugOno9d7vf1Q    6.297   6.248    6.524    6.382    6.316    6.453
x57Vw5B5Fbt5JUnQkI    6.268   6.451    6.379    6.371    6.458    6.333 
```

一个典型的结果是，如果 "A" 组是`group1`和 "B" `group2`，对于每个 ID 行，对于每一列都有对应于上面生成的配对的对（例如，A1_B1、A2_B1、A3_B1...），包含每个行 ID 的减法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-07-25T13:12:59.590

# [`itertools.combinations()`](https://docs.python.org/2/library/itertools.html#itertools.combinations)在`DataFrame`列上使用

[`itertools.combinations()`](https://docs.python.org/2/library/itertools.html#itertools.combinations)您可以根据这些对创建列组合并评估减法以及新名称：

```
import pandas as pd
from cStringIO import StringIO
import itertools as iter

matrix = pd.read_csv(StringIO('''ID,A1,A2,A3,B1,B2,B3
Ku8QhfS0n_hIOABXuE,6.343,6.304,6.410,6.287,6.403,6.279
fqPEquJRRlSVSfL.8A,6.752,6.681,6.680,6.677,6.525,6.739
ckiehnugOno9d7vf1Q,6.297,6.248,6.524,6.382,6.316,6.453
x57Vw5B5Fbt5JUnQkI,6.268,6.451,6.379,6.371,6.458,6.333''')).set_index('ID')

print 'Original DataFrame:'
print matrix
print

# Create DataFrame to fill with combinations
comparison_df = pd.DataFrame(index=matrix.index)
# Create combinations of columns
for a, b in iter.combinations(matrix.columns, 2):
    # Subtract column combinations
    comparison_df['{}_{}'.format(a, b)] = matrix[a] - matrix[b]

print 'Combination DataFrame:'
print comparison_df 
```

* * *

```
Original DataFrame:
                       A1     A2     A3     B1     B2     B3
ID                                                          
Ku8QhfS0n_hIOABXuE  6.343  6.304  6.410  6.287  6.403  6.279
fqPEquJRRlSVSfL.8A  6.752  6.681  6.680  6.677  6.525  6.739
ckiehnugOno9d7vf1Q  6.297  6.248  6.524  6.382  6.316  6.453
x57Vw5B5Fbt5JUnQkI  6.268  6.451  6.379  6.371  6.458  6.333

Combination DataFrame:
                    A1_A2  A1_A3  A1_B1  A1_B2  A1_B3  A2_A3  A2_B1  A2_B2  A2_B3  A3_B1  A3_B2  A3_B3  B1_B2  B1_B3  B2_B3
ID                                                                                                                         
Ku8QhfS0n_hIOABXuE  0.039 -0.067  0.056 -0.060  0.064 -0.106  0.017 -0.099  0.025  0.123  0.007  0.131 -0.116  0.008  0.124
fqPEquJRRlSVSfL.8A  0.071  0.072  0.075  0.227  0.013  0.001  0.004  0.156 -0.058  0.003  0.155 -0.059  0.152 -0.062 -0.214
ckiehnugOno9d7vf1Q  0.049 -0.227 -0.085 -0.019 -0.156 -0.276 -0.134 -0.068 -0.205  0.142  0.208  0.071  0.066 -0.071 -0.137
x57Vw5B5Fbt5JUnQkI -0.183 -0.111 -0.103 -0.190 -0.065  0.072  0.080 -0.007  0.118  0.008 -0.079  0.046 -0.087  0.038  0.125 
```

# python - 迭代两个或多个列表/ numpy 数组...并相互比较每个项目并避免 python 中的循环

> ID：13143052
> 
> 赞同：2
> 
> 时间：2012-10-30T16:03:23.757
> 
> 标签：python, map, numpy, scipy

我是 python 新手，我的问题如下：

`func(a,b)`给定两个输入值，我定义了一个返回值的函数。

现在我将数据存储在列表或 numpy 数组中`A,B`，并希望`func`用于每种组合。（A 和 B 有超过一百万个条目）

ATM 我使用这个片段：

```
for p in A:
  for k in B:
    value = func(p,k) 
```

这真的需要很多时间。

所以我在想可能是这样的：

```
C=(map(func,zip(A,B))) 
```

但是这种方法只能成对工作......有什么想法吗？

感谢帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T16:21:04.527

# 首要问题

您需要计算`f`多对值的输出。加速这种循环（计算）的“标准”方法是让您的函数`f`接受（NumPy）数组作为输入，并立即对整个数组进行计算（即，从 Python 中看没有循环）。查看任何 NumPy 教程以获取介绍。

# 第二期

如果每个条目`A`都有`B`超过一百万个条目，那么就有一万亿个组合。对于 64 位数字，这意味着您需要 7.3 TiB 的空间来存储计算结果。你有足够的*硬盘*来存储结果吗？

# 第三期

如果`A`和`B`在哪里更小，在您的特定情况下，您可以这样做：

```
values = f(*meshgrid(A, B)) 
```

[`meshgrid`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.meshgrid.html)返回 和 的笛卡尔积`A`，`B`因此它只是一种生成必须评估的点的方法。

# 概括

*   您需要有效地使用 NumPy 以避免 Python 循环。（或者，如果所有其他方法都失败了或者它们不容易被矢量化，那么用编译语言编写这些循环，例如使用[Cython](http://www.cython.org/)）

*   处理 TB 的数据非常困难。你真的需要那么多数据吗？

*   任何在循环中调用函数`f`1e12 次的解决方案都会很慢，特别是在 CPython 中（这是默认的 Python 实现。如果您不确定并且正在使用 NumPy，那么您也在使用它）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T16:05:02.580

一百万乘以一百万就是一万亿。调用`f`一万亿次需要一段时间。

除非你有办法减少要计算的值的数量，否则你不能比上面做得更好。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-30T16:08:56.830

假设， itertools.product 做你需要的：

```
from itertools import product

pro = product(A,B)
C = map(lambda x: func(*x), pro) 
```

就它是生成器而言，它不需要额外的内存

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-30T16:11:34.613

如果你使用 NumPy，你绝对应该看看[`np.vectorize`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.vectorize.html)专为这类问题设计的功能......

# android - 关于 AsyncTask.get()

> ID：13143053
> 
> 赞同：2
> 
> 时间：2012-10-30T16:03:38.017
> 
> 标签：android, android-asynctask, progressdialog

我想使用 AsyncTask 执行服务器登录，并在连接结束前显示进度对话框。

由于请求可能没有响应，我需要为 AsyncTask 设置超时值。我发现当我简单地使用时`.execute()`，程序运行良好，但没有实现超时功能。当我使用`.get(1000, TimeUnit.MILLISECONDS)`时，程序会暂停 1 秒，并且不显示任何进度对话框。

任何人都可以告诉我任务是否在`.get(1000, TimeUnit.MILLISECONDS)`被调用时执行？如果是，为什么没有执行的迹象；如果没有，我该如何实现AsyncTask的这个超时功能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T16:05:38.313

[AsyncTask.get()](http://developer.android.com/reference/android/os/AsyncTask.html#get%28long,%20java.util.concurrent.TimeUnit%29) ，如果在主线程（AKA.UI 线程）中将阻塞执行。

您可能需要在单独的线程中调用它。

**编辑**

Vogella 写了一篇非常棒的文章：[AndroidPerformance: Android Threads, Handlers And AsyncTask](http://www.vogella.com/articles/AndroidPerformance/article.html#lifecycle)

从这里获取代码，我做到了，我向你保证它在不阻塞主 UI 线程的情况下工作得很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T16:34:02.413

如果你使用`AndroidHttpClient`它有很好的预设连接超时。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T16:10:04.690

我认为您需要在 HttpUrlConnection 对象上设置超时间隔，这将是处理这种情况的更好选择。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-30T17:07:07.420

从[文档](http://developer.android.com/reference/android/os/AsyncTask.html)中，该[`get(long timeout, TimeUnit unit)`](http://developer.android.com/reference/android/os/AsyncTask.html#get%28long,%20java.util.concurrent.TimeUnit%29)方法将等待指定的持续时间，然后尝试取消任务。我认为所有这一切都会调用`cancel()`你的`AsyncTask`，而不是在你的连接上执行任何类型的超时。如果您正在执行某种长时间的下载，您可以检查`isCancelled`您的循环。但是，如果您只是想给出某种连接超时，那么`get`不是这样做的。

另请注意，它会`get`阻塞主线程，直到它返回。“超时”版本和方法的基本版本都是如此。因此，它不是异步操作。

要获得连接超时，您需要在您创建的实际连接上执行此操作，而不是在任务本身上执行。对于 an`HttpUrlConnection`和`HttpClient`.

# javascript - XMLHttpRequest：Access-Control-Allow-Origin 不允许 Origin null

> ID：13143054
> 
> 赞同：2
> 
> 时间：2012-10-30T16:03:40.987
> 
> 标签：javascript, jquery, json, google-chrome

> **可能重复：**
> [XmlHttpRequest 错误：Access-Control-Allow-Origin 不允许 Origin null](https://stackoverflow.com/questions/3595515/xmlhttprequest-error-origin-null-is-not-allowed-by-access-control-allow-origin)
> [XMLHttpRequest 无法加载文件：//... Access-Control-Allow-Origin 不允许 Origin null](https://stackoverflow.com/questions/6479694/xmlhttprequest-cannot-load-file-origin-null-is-not-allowed-by-access-contr)

我正在尝试打开我的 JSON 文件，例如：

```
jQuery.getJSON('../data/json/en/nodesData.json',
      function(data){
           jQuery.each(data, function(){
                  //do something...
           })
     }) 
```

这会在 Chrome 中产生以下错误：

> XMLHttpRequest 无法加载 file:///C:/URL/data/json/en/nodesData.json。Access-Control-Allow-Origin 不允许 Origin null

什么问题？如何检索我的 json？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T16:19:02.583

您确实应该运行像 Apache 或 IIS 这样的本地服务器来运行 HTML/JavaScript 代码，这样您就不会遇到这些限制。

`--allow-file-access-from-files`您可以使用取消限制的标志启动浏览器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-30T16:06:58.580

出于安全原因，您不能对本地文件系统进行 AJAX 调用。有些浏览器允许这样做，但有些则不允许。Chrome 有一个启用此功能的标志，但默认情况下它是关闭的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-30T16:06:37.103

看看[同源政策](http://en.wikipedia.org/wiki/Same_origin_policy)。

您无法加载该文件，因为从技术上讲它位于另一个域中。您需要将其称为`localhost/<Path>/nodesData.json`.

# iis-7 - 包含 Web 服务的 IIS 7.5 网站，其中一个 Web 服务返回 401 错误

> ID：13143061
> 
> 赞同：0
> 
> 时间：2012-10-30T16:04:07.273
> 
> 标签：iis-7

**背景**：我有一个 IIS 7.5 站点，其中包含 13 个不同的 Web 应用程序，每个应用程序只是托管不同的 Web 服务。没有什么花哨。这是该站点的图形视图。

![在此处输入图像描述](../Images/e5475dc6ed9c977582f33a5c7587521a.png)

每个 Web 应用程序都在自己的应用程序池下运行，都在 ApplicationPoolIdentity 下运行 .NET 4.0 集成管道。

![在此处输入图像描述](../Images/cf3a3d2c66bf27cb0aa08d57604f517c.png)

在站点级别，我将身份验证设置为以下

![在此处输入图像描述](../Images/a440c4d8401203f578d8d7dcc3138316.png)

当我尝试在一个 Web 应用程序中访问 Web 服务时，我收到 401 错误。可以无错误地访问其他 Web 应用程序中的所有其他 Web 服务。

这是发生错误时的 IIS 日志片段。使用 Web 服务代理类或通过浏览器访问 Web 服务 url 时，错误是相同的。

Mozilla/4.0+(兼容;+MSIE+6.0;+MS+Web+Services+客户端+协议+4.0.30319.269) 401 2 5 17721 Mozilla/4.0+(兼容;+MSIE+6.0;+MS+Web+Services+客户端+协议+4.0.30319.269) 401 1 2148074254 15

如果我直接从浏览器访问 URL，系统会提示我输入凭据。如果我输入我的域凭据，我仍然会收到 401.1 错误。:(

此错误在我们域中的所有设备上都是可重复的，因此它不会与我的机器隔离。

我已经验证了包含相关 Web 服务的文件夹结构与 12 个有效的 Web 服务的其他文件夹结构具有相同的权限。

该站点在默认的内核模式身份验证中运行。

**问题：** 我是一名对 IIS 了解有限的开发人员。还有什么我可以看的吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T15:19:19.940

我的问题的答案是重新启动我的服务器。仍然没有确定问题发生的原因。

# asp.net - 从用户表 master_page 中获取名字

> ID：13143063
> 
> 赞同：1
> 
> 时间：2012-10-30T16:04:13.070
> 
> 标签：asp.net, master-pages, login-control

我正在使用 masterPage.master 来获取我的应用程序的登录信息。当用户使用用户名/密码登录时，它会显示用户名已登录，我希望通过仅提取名字来使其更加个性化。我该怎么做，我尝试了所有我知道的，我是 ASP.Net 的新手。

**母版页：** `

```
<div id="login">
         <asp:LoginView ID="MasterLoginView" runat="server">
             <LoggedInTemplate>
                 Welcome:
                 <asp:LoginName ID="MasterLoginName" runat="server" Font-Bold="True" />
             </LoggedInTemplate>
             <AnonymousTemplate>
                 Welcome: Guest...
             </AnonymousTemplate>
         </asp:LoginView>
     </div>

<div id="login2">
  <asp:LoginStatus ID="LoginStatus1" runat="server" 
    LogoutAction="Redirect" LogoutPageUrl="access/LoggedOut.aspx" 
    LoginImageUrl="images/login.jpg" LogoutImageUrl="images/logout.jpg" LoginText="" 
    LogoutText="" />
</div>` 
```

**登录.aspx：**

```
<asp:Label ID="Login1" runat="server"  Text="Label" ForeColor="White"></asp:Label>
<p>Username:
<asp:TextBox ID="txtusername" runat="server" Width="150px"></asp:TextBox></p>
<p>Password: 
<asp:TextBox ID="txtpassword" runat="server" Width="150px" TextMode="Password"></asp:TextBox> 
                                    </p>

<asp:ImageButton ID="LoginButton" runat="server" ImageUrl="../images/lsubmit.png"
OnClick="LoginBtnClick" ValidationGroup="a" ToolTip="Submit" ImageAlign="AbsBottom" /> 
```

**登录.aspx.vb**

```
Partial Public Class Login
    Inherits System.Web.UI.Page
    Private con As New SqlConnection()
    Private adp As SqlDataAdapter
    Private ds As New DataSet()

    Protected Sub LoginBtnClick(sender As Object, e As System.EventArgs) Handles LoginButton.Click
        Dim con As New SqlConnection("Data Source=HQDANA3A413VDB1;Initial Catalog=Sigar;User ID=Sigar_Admin;Password=$Jzpoj^6z>%y9E")
        con.Open()

        '   here with the help of this sql query i am matching the username and password of //the user.
        Dim cmd As New SqlCommand()
        cmd.CommandText = "select  * from Users where username=@username and password=@password"

        cmd.Connection = con
        '   here i am passing the parameter of username and  password
        cmd.Parameters.Add("@username", SqlDbType.VarChar, 50).Value = txtusername.Text
        cmd.Parameters.Add("@password", SqlDbType.VarChar, 50).Value = txtpassword.Text

        Dim firstName As New SqlParameter("@firstname", SqlDbType.VarChar, 50, ToString)
        firstName.Value = ToString()
        cmd.Parameters.Add(firstName)

        Dim dr As SqlDataReader = cmd.ExecuteReader()
        '   here i am using hasrows to check the correct user. If the username and the password 
        '//of the user will be mathed with the database then it will be go to the checkuser.aspx //page otherwise it prints the message wrongusername or password     
        If dr.HasRows Then
            dr.Read()
            '   here i am creating a formauthentication ticket that will be use in  the whole //application. 
            'This is the main part of the formauthentication security, inside dr[2] //there is  a role of the user
            Dim tkt As New FormsAuthenticationTicket(1, txtusername.Text.ToUpper, DateTime.Now, DateTime.Now.AddHours(3), False, dr(2).ToString(), _
             FormsAuthentication.FormsCookiePath)
            '   here i am enctypt the ticket. With the encryption  of this ticket it will encrypt the //username
            Dim st As [String] = FormsAuthentication.Encrypt(tkt)
            '   here i am creat a cookie that will we used inside the whole application
            Dim ck As New HttpCookie(FormsAuthentication.FormsCookieName, st)
            Response.Cookies.Add(ck)

            ' Validate the user against the Membership framework user store
            'If Membership.ValidateUser(txtusername.Text, txtpassword.Text) Then
            ' Log the user into the site
            'FormsAuthentication.RedirectFromLoginPage(txtusername.Text, RememberMe.Checked)

            Response.Redirect("checkuser.aspx")
        Else
            LabelFailedAuthentication.Visible = True
        End If

    End Sub

    Protected Sub Page_Load(ByVal sender As Object, ByVal e As EventArgs) Handles Me.Load
        CancelButton.Attributes.Add("onClick", "javascript:history.back(); return false;")
    End Sub

End Class 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T16:12:11.633

您可以使用`LoginStatus`控件设置注销文本，假设名字是您的用户名的第一部分（在 Master 中）：

```
Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
    Me.LoginStatus1.LogoutText = "Logout: " & GetUserName()
End Sub

Public Function GetUserName() As String
    If HttpContext.Current.User.Identity.IsAuthenticated Then
        If ViewState("UserName") Is Nothing Then
            Dim user As MembershipUser = Membership.GetUser()
            ' split user-name, assuming that the first part is the firstname '
            Dim nameParts = user.ToString().Split()
            ViewState("UserName") = nameParts(0)
        End If
        Return DirectCast(ViewState("UserName"), String)
    Else
        Return String.Empty
    End If
End Function 
```

# ruby-on-rails - Rails 创建管理控制器并在其他目录中以自己的风格查看

> ID：13143069
> 
> 赞同：0
> 
> 时间：2012-10-30T16:04:36.727
> 
> 标签：ruby-on-rails, admin

我需要做自己的管理逻辑，它的控制器、视图等...... ActiveAdmin 等等对我不利。但是我怎么能在其他目录（例如控制器/管理员/）中做到这一点。then`rails g`命令怎么写？（视图也必须在文件夹 admin 中）。另外如何仅为管理员控制器连接 twitter bootstrap？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T16:36:10.977

看看这个链接，他们使用相同的[管理子目录分组](http://www.purpleworkshops.com/articles/grouped-controllers)（链接断开）示例。该示例适用于旧版本的 Rails，但对于 Rails 3.2 应该相对有效。

**编辑：**请参阅此[命名空间](https://stackoverflow.com/questions/9245258/adding-controllers-with-a-namespace-admin-as-a-subfolder)问题。

```
rails generate controller admin/Users 
```

对于引导程序，不要在管理样式表中使用引导程序特定的 id/class 属性。

# c++ - MFC 功能区在 Windows 2008 中崩溃

> ID：13143072
> 
> 赞同：0
> 
> 时间：2012-10-30T16:04:42.607
> 
> 标签：c++, visual-studio-2010, mfc, windows-server-2008, ribbon

我有一个使用 MFC 功能区的应用程序。它是在 Visual Studio 2010 中开发的。我遇到了一个奇怪的问题。该应用程序在 Windows 7 和 Windows 2008 R2 中运行良好。但是，当它尝试从资源加载功能区时，它会在 Windows 2008 中崩溃。确切的行是

> 功能区栏->LoadFromResource(IDR_RIBBON1); //IDR_RIBBON1 是资源id。

堆栈跟踪如下

```
gui.exe!ATL::CComPtrBase<IXMLDOMDocument>::~CComPtrBase<IXMLDOMDocument>()  Line 162 + 0xa bytes    C++
gui.exe!ATL::CComPtr<IXMLDOMDocument>::~CComPtr<IXMLDOMDocument>()  + 0x11 bytes    C++
gui.exe!ATL::CComQIPtr<IXMLDOMDocument,&_GUID_2933bf81_7b36_11d2_b20e_00c04f983e60>::~CComQIPtr<IXMLDOMDocument,&_GUID_2933bf81_7b36_11d2_b20e_00c04f983e60>()  + 0x11 bytes    C++
gui.exe!ATL::CXMLNode<IXMLDOMDocument>::~CXMLNode<IXMLDOMDocument>()  Line 47 + 0xb bytes   C++
gui.exe!ATL::CXMLDocument::~CXMLDocument()  Line 269 + 0x13 bytes   C++
gui.exe!CXMLParserRoot::~CXMLParserRoot()  Line 423 + 0x43 bytes    C++
gui.exe!CMFCRibbonInfo::Read(unsigned char * lpBuffer=0x013acb14, unsigned int nSize=83851)  Line 703 + 0x15 bytes  C++
gui.exe!CMFCRibbonInfoLoader::LoadFromBuffer(unsigned char * lpBuffer=0x013acb14, unsigned int nSize=83851)  Line 112 + 0x1b bytes  C++
gui.exe!CMFCRibbonInfoLoader::Load(const char * lpszResID=0x000005d8, const char * lpszResType=0x0000001c, HINSTANCE__ * hInstance=0x00400000)  Line 85 + 0x1c bytes    C++
gui.exe!CMFCRibbonBar::LoadFromResource(const char * lpszXMLResID=0x000005d8, const char * lpszResType=0x0000001c, HINSTANCE__ * hInstance=0x00000000)  Line 740 + 0x17 bytes   C++
gui.exe!CMFCRibbonBar::LoadFromResource(unsigned int uiXMLResID=1496, const char * lpszResType=0x0000001c, HINSTANCE__ * hInstance=0x00000000)  Line 731    C++ 
```

非常感谢任何有关如何解决此问题的建议和建议。做，问你是否需要更多信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-08-14T20:56:08.697

我知道这个答案已经晚了几年，但我在更新旧的 MFC 应用程序以支持功能区时遇到了同样的问题。`LoadResources`为了正常工作需要做的是`AfxOleInit()`在`InitInstance()`App 类中调用。我在加载 MFC 框架之前执行此操作。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T11:37:51.587

您是否尝试在已部署的机器上安装可再发行包？Windows (Server) 2008 R2 可能带有 Visual C++ 2010 Redistributable 软件包，而 Windows Server 2008 没有。还要考虑到，如果您将 Visual Studio 更新到 SP1，您应该为 SP1 使用可再发行包。

# forms - 将 Installshield 与 TeamCity 和 MSBuild 一起使用

> ID：13143074
> 
> 赞同：1
> 
> 时间：2012-10-30T16:04:43.230
> 
> 标签：forms, installation, teamcity, installshield

我正在使用 TeamCity 构建和准备 Windows 窗体应用程序。我在解决方案中有几个项目，其中之一是 .isproj，它是一个 Installshield 项目。我正在使用 Installshield 为我们提供的免费开发者版本。

但是，TeamCity 显然无法构建它，因为该盒子没有安装 Installshield。

我无法安装相同的版本，因为它需要 Visual Studio，这有点痛苦。

有谁知道我们是否可以在构建服务器上使用免费版本来生成要发布的工件？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-31T06:52:59.390

我不确定 InstallShield LE 是否在 VS Express 版本中可用，您可以将其安装在您的构建机器上。

另一种选择是使用其他工具，例如[Advanced Installer](http://www.advancedinstaller.com)还集成了 VS 和完整的命令行支持，因此您可以将其集成到构建机器中。此外，您可以在构建机器上单独安装它，无需任何版本的 VS。它在免费版中有“简单”项目，任何其他项目类型都需要商业许可证。

# migration - JBoss AS7 中的类加载问题

> ID：13143079
> 
> 赞同：1
> 
> 时间：2012-10-30T16:05:05.753
> 
> 标签：migration, classloader, jboss7.x

[JBoss AS7 开发人员指南](https://docs.jboss.org/author/display/AS7/Developer+Guide#DeveloperGuide-JBossAS7DeveloperGuide)提到了以下从较高优先级到较低优先级的类加载首选项：

```
1\. System Dependencies - These are dependencies that are added to the module automatically by the container, including the Java EE api's.
2\. User Dependencies - These are dependencies that are added through jboss-deployment-structure.xml or through the Dependencies: manifest entry.
3\. Local Resource - Class files packaged up inside the deployment itself, e.g. class files from WEB-INF/classes or WEB-INF/lib of a war.
4\. Inter deployment dependencies - These are dependencies on other deployments in an ear deployment. This can include classes in an ear's lib directory, or classes defined in other ejb jars. 
```

但是，我不明白#2 和#3 之间的区别。什么样的依赖关系可以归类为上面的第 2 类和第 3 类。对我来说，它们看起来是一样的。

作为将我的 Spring 应用程序从 JBoss 4 迁移到 JBoss 7 的示例，我遇到了我们的应用程序一直在使用的quartz 1.6 jar 的 NoClassDefError。石英 1.6 jar 就在我的应用程序的 WEB-INF/lib 文件夹中。这意味着它正确地属于上述第 3 类。但是网络上的大多数文章都表明我必须将它作为 JBoss 7 模块或在 jboss-deployment-structure.xml 中定义它。为什么 ？？？

我还阅读了[迁移指南](https://docs.jboss.org/author/display/AS7/How+do+I+migrate+my+application+from+AS5+or+AS6+to+AS7)并按照这些指南中的说明进行了 TattleTale 练习。但不太明白我该如何处理报告？[我阅读了在 JBoss AS7 独立部署中加载第 3 方 JAR 的最佳实践](https://stackoverflow.com/questions/8289813/best-practice-for-loading-3rd-party-jars-in-jboss-as7-standalone-deployment)的答案？- 看起来迁移需要相当多的努力。考虑到应用程序可以轻松拥有的众多依赖项，这似乎不是一项简单的任务。有人可以确认一下吗？

我想我需要一个关于

1.  我要为哪些 jar 创建 module.xml？（可能的候选人 - Spring、Quartz、Apache、C3P0 连接池等）？？？

2.  对于哪些 jar，我有一个 jboss-deployment-structure.xml？（这里有什么好的候选人？）

3.  对于哪些 jar，我将它们留在 web-inf/lib 文件夹中？（应用程序使用某些专门的数学库 - 如 colt.jar、excel 图形库如 - jxls.jar、poi.jar - 这些似乎是不错的候选者）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T11:31:15.657

JBoss AS 版本用于以不同方式管理其库集。早些时候，版本 4.x 用于将核心服务器库定义到 JBOSS_HOME/server 库中。此后，每个服务器定义都有其特定的库到 server//lib 文件夹中。

JBoss AS 7 遵循真正的模块化方法，弃用了所有早期的方法。服务器引导库现在位于应用程序服务器的根目录。在那里您可以找到 jboss-modules.jar 存档，这是您基于 JBoss 模块引导新的应用程序服务器内核所需的全部内容。

> 我要为哪些 jar 创建 module.xml？（可能的候选人 - Spring、Quartz、Apache、C3P0 连接池等）？？？

如果有任何依赖 jar 可以创建为模块并在 module.xml 中定义。您还需要定义定义库的依赖关系。

前任。

```
<?xml version="1.0" encoding="UTF-8"?>
<module xmlns="urn:jboss:module:1.1" name="rezg.rezg-dto">
    <dependencies>
        <module name="org.apache.log4j" />
    </dependencies>
   <resources>
       <resource-root path="rezg-dto-1.0.0.jar"/>
   </resources>
</module> 
```

连接池可以配置为一个模块，安装新模块的过程需要复制相应模块路径中的 .jar 库并添加一个 module.xml 文件，该文件声明模块及其依赖项。

> 对于哪些 jar，我有一个 jboss-deployment-structure.xml？（这里有什么好的候选人？）

所有的依赖 jars 都应该在这里定义。您也可以在 MANIFEST.MF 或 Standalone.xml 中定义。

> 对于哪些 jar，我将它们留在 web-inf/lib 文件夹中？（应用程序使用某些专门的数学库 - 如 colt.jar、excel 图形库如 - jxls.jar、poi.jar - 这些似乎是不错的候选者）。

如果有任何罐子只在你的耳朵或战争中使用，那么这些罐子可以在 WEB-INF/lib 中定义。但是，建议用作模块。

# mysql - 我应该添加多个索引吗？

> ID：13143081
> 
> 赞同：2
> 
> 时间：2012-10-30T16:05:13.827
> 
> 标签：mysql, indexing, database-indexes

*如果我在包含 2 个字段的表上有一个唯一索引，我应该在每个字段上添加另一个索引吗？*

**例子：**

我的表如下所示：

```
CREATE TABLE IF NOT EXISTS `my_table` (
  `ID` int(11) NOT NULL AUTO_INCREMENT,
  `usersID` int(11) NOT NULL,
  `userTypesID` int(11) NOT NULL,
  PRIMARY KEY (`ID`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1 AUTO_INCREMENT=1 ; 
```

然后我添加了一个唯一索引，它涵盖了`usersID`和`userTypesID`：

```
ALTER TABLE  `my_table` ADD UNIQUE  `usersID_userTypesID` (  `usersID` ,  `userTypesID` ) 
```

***是否值得我再添加 2 个索引，一个上一个`usersID`，另一个上`userTypesID`？***例如：

```
ALTER TABLE  `my_table` ADD INDEX (  `usersID` )
ALTER TABLE  `my_table` ADD INDEX (  `userTypesID` ) 
```

***添加这些额外的索引会加速某些查询吗？***如：

```
SELECT      `usersID`
FROM        `my_table`
WHERE       `userTypesID` = 101 
```

或者

```
SELECT      `usersTypesID`
FROM        `my_table`
WHERE       `usersID` = 29 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T16:09:12.027

[*理论上*](http://dev.mysql.com/doc/refman/5.0/en/multiple-column-indexes.html)[，](http://dev.mysql.com/doc/refman/5.0/en/multiple-column-indexes.html)索引本身`(usersID, userTypesID)`也将充当索引`usersID`，因为它是最左边的列。

您也将从索引中受益`userTypesID`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T16:19:19.043

您不需要额外的索引，[请参见此处](https://stackoverflow.com/questions/9764120/does-a-unique-constraint-automatically-create-an-index-on-the-fields)。也试试 SHOW INDEXES FROM my_table

# javascript - 如何在窗口/DIV 中打开媒体库以使用图像 url 填充表单字段？

> ID：13143082
> 
> 赞同：0
> 
> 时间：2012-10-30T16:05:15.377
> 
> 标签：javascript, html, forms

我有一个 HTML 表单字段，它将获取我的图像的 url。我（在我网站的不同部分）有一个媒体库，用户可以在其中加载和组织他们的图像。现在我希望能够在新窗口中打开这个媒体库（对我来说更容易，但不知道如何使用新窗口中的脚本填充母窗口中的表单字段，方法不允许？ ) 或通过将媒体库读入 div （更麻烦，因为我必须重写大部分媒体库导航以不刷新页面而只刷新该 div）。

我从来没有这样做过，所以我想也许有经验的人可以给我一个提示，让我朝着正确的方向开始。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T19:25:22.873

我最终使用了带有 Iframe 的 jQuery 模态对话，单击图像后，输入字段被填充并关闭对话。

一些示例代码，如果它可以启发任何人......

这是我的带有浏览按钮的输入框

```
<input type='text' name='data_1' id='data_1' size='30' value='' /> <input type='button' value='Bläddra' onclick="openMediaLibrary('data_1');" /> 
```

这是表单页面上的某处（默认隐藏）

```
<div id="mediaLibrary" title="Mediabiblioteket">
    <iframe width="1050px" height="600px" src="{{ path('Media') }}" /></iframe>
</div> 
```

这是 mediaLibrary 中的图像示例

```
<a href="javascript:selectImage('{{ entity.webPath }}')"><img src="{{ entity.webPath | apply_filter('my_thumb') }}" class="media_archive_image" /></a> 
```

这是我用于初始化、打开和关闭 mediaLibrary 的函数

```
$(document).ready(function() {
        $( "#mediaLibrary" ).dialog({
        height: 700,
        width:1100,
        modal: true,
        autoOpen: false,
        position: { my: "center", at: "center" },
    });
};

function openMediaLibrary(passedField) {
    //Set the variable that keeps track of which field to pass back the image url to
    window.imageInputField = passedField
    //open the mediaLibrary
    $( "#mediaLibrary" ).dialog( "open" );
}   

function closeMediaLibrary() {
    $( "#mediaLibrary" ).dialog( "close" );
} 
```

最后是分配图像和关闭媒体库的功能

```
function selectImage(image) {

    if (parent.window.imageInputField) {
        //set image to the input field
        parent.window.document.getElementById(parent.window.imageInputField).value = image;

        //Close the dialogue box
        parent.window.closeMediaLibrary();

    }
    else {
        //do nothing for now, perhaps show image in fullsize in lightbox here?
    }
} 
```

# sql-server-2008 - 在一张表中显示多个查询的结果

> ID：13143090
> 
> 赞同：0
> 
> 时间：2012-10-30T16:05:43.977
> 
> 标签：sql-server-2008

在sql中，一个查询获取一列，另一个查询获取另一列，依此类推，我想将一个表中的这些多列显示为多列。

例如：

```
Query1 gives column 'EmployeeId' .........
Query2 gives column 'EmployeeName' .......
Query3 gives column 'EmployeeAddress' 
```

现在我想在一个表中显示这三列，比如 table1 有列`'EmployeeId', 'EmployeeName' and 'EmployeeAddress'`

由于在两个查询中它都是`ORDER BY EmployeeId`按递增顺序排列的，所以在最终表（此处为 table1）中，它给出了相应的 ID、名称和地址。

基本上我需要根据 EmployeeId 将两个结果集组合在一个表中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T13:18:17.333

如果没有查询，我不知道您有多少表或它们如何链接。但听起来你需要将子查询连接在一起以获得你想要的结果。下面的例子

```
 select emp.empId, ea.EmployeeAddress, en.EmployeeName
   from emp
   left join 
   (
      select empId, EmployeeAddress
      from EmpAddress
   ) ea on ea.empid = emp.empid 
   left join 
   (
      select empId, EmployeeName
  from empNames
   ) en on en.empId = emp.EmpId
   order by emp.empId 
```

# jquery-ui - jQuery UI 可选交互：可选元素中的元素

> ID：13143091
> 
> 赞同：3
> 
> 时间：2012-10-30T16:05:48.813
> 
> 标签：jquery-ui

我正在使用 jQuery UI 进行选择。我有一个可选的 ul 列表。li-items 包含图标和文本。似乎可选择的注释不仅使 li-items 可选，而且使 li-items 中的元素可选。这会产生一些意想不到的结果。

我试图在 jsFiddle 中做一个例子：http: [//jsfiddle.net/eJSGU/](http://jsfiddle.net/eJSGU/) 如果你在图标的边缘点击几次，你会看到有时选择的东西比 li 块大。

```
<li class="ui-widget-content">
    <div class="img"><img src="http://bib.arts.kuleuven.be/bibliotheek/images/icon_facebook.jpg"></div>  
    <div class="lbl">Item 1<div>
</li> 
```

![在此处输入图像描述](../Images/a556f574d81883ae4d8f657e9e62b969.png)

任何人都知道如何避免这种情况？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T14:38:24.663

我建议使用可选的过滤器选项。在您的情况下，您只希望`li`元素是可选的，因此您设置`filter: $('selector').children()'`.

```
<script>
$(function() {
    $( "#selectable li" ).selectable({
        filter: $('#selectable').children('li')
    });
});
</script> 
```

这是一个更新的[小提琴](http://jsfiddle.net/eJSGU/1/)。

# c# - 尝试将字符串转换为日期时间

> ID：13143096
> 
> 赞同：1
> 
> 时间：2012-10-30T16:06:14.483
> 
> 标签：c#, asp.net, datetime, calendarextender

如果请求的日期已经存在，我试图限制用户输入新记录。我试图进行计数以查看将放置记录的表是否已经具有该日期 1 或不是 0。我有一个日历扩展器附加到具有日期的文本框。

我不断得到：

字符串未被识别为有效的日期时间。

或者

无法将“System.Web.UI.WebControls.TextBox”类型的对象转换为“System.IConvertible”类型。

取决于我尝试过的不同事情。

这是我的代码。

```
 TextBox startd = (TextBox)(DetailsView1.FindControl("TextBox5"));
                TextBox endd = (TextBox)(DetailsView1.FindControl("TextBox7"));
                DropDownList lvtype = (DropDownList)(DetailsView1.FindControl("DropDownList6"));

                DateTime scheduledDate = DateTime.ParseExact(startd.Text, "dd/MM/yyyy", null);
                DateTime endDate = DateTime.ParseExact(endd.Text, "dd/MM/yyyy", null);

                DateTime newstartDate = Convert.ToDateTime(startd.Text);
                DateTime newendDate = Convert.ToDateTime(endd.Text);

                //foreach (DataRow row in sd.Tables[0].Rows)
                DateTime dt = newstartDate;

                while (dt <= newendDate)
                {
                    //for retreiving from table
                    Decimal sd = SelectCountDate(dt, lvtype.SelectedValue, countDate);

                    String ndt = Convert.ToDateTime(dt).ToShortDateString();

                    // //start = string.CompareOrdinal(scheduledDate, ndt);
                    // // end = string.CompareOrdinal(endDate, ndt);

                    //trying to make say when leavetpe is greater than count 1 then throw error. 
                    if (sd > 0)
                    {
                        Response.Write("<script>alert('Date Already Requested');</script>");
                    }
                    dt.AddDays(1);

                } 
```

^^^ 此版本抛出：“字符串未被识别为有效日期类型”错误

但是，如果我用以下任何一个替换字符串：

```
 /*-----------------------Original------------------------------------
                string scheduledDate = Convert.ToDateTime(endd).ToShortDateString();
                string endDate = Convert.ToDateTime(endd).ToShortDateString();
                -------------------------------------------------------------------*/

                /*----------10-30---------------------------------------
                DateTime scheduledDate = DateTime.Parse(startd.Text);
                DateTime endDate = DateTime.Parse(endd.Text);
                ------------------------------------------------------*/ 
```

我得到“无法将'System.Web.UI.WebControls.TextBox'类型的对象转换为'System.IConvertible'。” 错误。

我只是想阻止用户输入已经存在的记录日期。

```
 <InsertItemTemplate>
                    <asp:TextBox ID="TextBox5" runat="server" Height="19px"
                        Text='<%# Bind("lstdate",  "{0:MM/dd/yyyy}") %>' Width="67px"></asp:TextBox>
                    <asp:CalendarExtender ID="TextBox5_CalendarExtender" runat="server" Enabled="True"
                        TargetControlID="TextBox5">
                    </asp:CalendarExtender>
                    <asp:RequiredFieldValidator ID="RequiredFieldValidator2" runat="server" 
                        ControlToValidate="TextBox5" ErrorMessage="*Leave Date Required" 
                        ForeColor="Red"></asp:RequiredFieldValidator>
                    <br />
                    <asp:CompareValidator ID="CompareValidator18" runat="server" 
                        ControlToCompare="TextBox7" ControlToValidate="TextBox5" 
                        ErrorMessage="Leave date cannot be after start date" ForeColor="Red" 
                        Operator="LessThanEqual" ToolTip="Must choose start date before end date"></asp:CompareValidator>
                </InsertItemTemplate> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T16:58:52.117

检查 (!string.IsNullOrEmpty(startd.Text))

通过 : 传送器

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T16:19:11.510

`"Unable to cast object of type 'System.Web.UI.WebControls.TextBox' to type 'System.IConvertible'"`当您尝试解析文本框本身而不是 textbox.Text 时会发生这种情况。

这段代码究竟是什么时候执行的？如果它在加载页面时执行，文本框将为空，因此您尝试解析一个空字符串，这显然是正确的格式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T17:26:15.650

由于它似乎`startd.Text`为空，因此您应该只`DateTime.ParseExact`在文本不为空或不为空时才这样做。您可以使用：

```
if(!string.IsNullOrEmpty(startd.Text))
{
    // do stuff
} 
```

# jquery - 当我的笔记本电脑在工作时连接到互联网时，jquery 无法正常工作

> ID：13143097
> 
> 赞同：1
> 
> 时间：2012-10-30T16:06:17.227
> 
> 标签：jquery, localhost, network-protocols, dreamweaver

我的问题是关于 jquery 的。最近，我建立了一个网站作为工作项目。有一天，jquery 停止加载。它发生在我摆弄一些 jquery 代码的前一天，并且试图通过本地主机将 Dreamweaver CS6 与 XAMPP 连接起来。我不确定它是否与它有关。

加载 jquery 的问题是当我在工作并通过电缆连接到网络时。此外，www.jquery.com 似乎没有为我的机器加载 css，它只显示纯文本和链接。在同一个办公室的人确实有这些问题。此外，我无法`src="http://code.jquery.com/jquery-latest.js"`从我的浏览器访问。

有趣的是，当我在家中将笔记本电脑连接到无线网络时，一切正常。网站本身在远程服务器上运行良好。因此，当连接到本地网络时，它只有我的办公室计算机和笔记本电脑。有一篇文章说它可能与“主机”文件本身有关，但我检查了一下，与默认值没有什么不同。

在研究了网络之后，我找到了一个快速的解决方案，而不是使用`src="http://code.jquery.com/jquery-latest.js`

我已经尝试过`src="//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js` ，它解决了加载网站页面的问题，但没有解决网站*www.jquery.com*本身的问题。

无论如何，我仍在寻找解决方案，因为我必须对现有网站进行更改。此外，它可能是什么也很有趣。但我无法弄清楚是什么问题。请帮助我，不胜感激。

是否可以解释为什么我的浏览器在此网站上没有显示任何 jquery 活动：[http](http://gvweb.es/add-ons/varios/zoomer/zoomer.html) ://gvweb.es/add-ons/varios/zoomer/zoomer.html 据我所知有。

任何想法都会很有价值，非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T16:44:48.237

如果您无法从浏览器访问 src="http://code.jquery.com/jquery-latest.js"。然后从“http://code.jquery.com/jquery-latest.js”复制所有代码并将代码保存在外部 .js 文件中并在 head 部分调用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T05:47:27.480

如果您的工作网络上的每台机器都没有人能够访问*www.jquery.com*，那么您的网络管理员可能有一些限制访问*www.jquery.com的策略*

您可以咨询您的网络管理员以获得快速解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T19:13:01.050

看起来您无法访问 jQuery 的托管副本。这给您留下了几个选择：

1.  [下载](http://jquery.com/download/)您自己的 jQuery 副本并将其托管在您的应用程序中。
2.  使用 jQuery 的替代托管副本。[谷歌](https://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js)和[微软](http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.8.2.min.js)也托管 jQuery 的副本。[您可以在jQuery 下载页面](http://jquery.com/download/)上了解更多关于它们的信息。

不过，这些解决方案只能解决核心问题。由于您表示只有您的笔记本电脑受到影响，这可能是一个更严重问题的迹象。当这样的域不再正确解析时，有时这是病毒、恶意软件或其他安全问题的迹象。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-23T15:34:20.910

突然我找到了解决办法。

显然，为了访问和查看某些网站的操作（jQuery、javascript）内容，我必须覆盖路由器或接入点（dns 服务配置）中的配置。

所以我关注了一篇互联网文章： http: [//kyokasuigetsu25.wordpress.com/2011/01/07/how-to-bypass-open-dns/#comment-799](http://kyokasuigetsu25.wordpress.com/2011/01/07/how-to-bypass-open-dns/#comment-799)

简要说明：网络和共享中心-连接（本地连接状态）-属性-Internet协议版本4（TCP/IPv4）-属性-常规-使用以下DNS服务器地址-首选DNS服务器8888-备用DNS服务器-8844

它对我有用。

感谢大家。

# android - 我应该编写哪些代码来删除列表项以及使用上下文菜单从数据库中删除

> ID：13143108
> 
> 赞同：-2
> 
> 时间：2012-10-30T16:06:51.850
> 
> 标签：android, listview, contextmenu

在我的代码中，我想从列表视图和数据库中删除选定的项目。我正在使用上下文菜单。我正在获取职位列表。

代码：

```
public boolean onContextItemSelected(MenuItem item) {
    // TODO Auto-generated method stub
    AdapterContextMenuInfo menuInfo = (AdapterContextMenuInfo) item
            .getMenuInfo();
    // Track track = (Track)mAdapter.getItem(info.position);
    switch (item.getItemId()) {
    case R.id.delete:
        Toast.makeText(getApplicationContext(),
                "Deleted" + menuInfo.position, Toast.LENGTH_LONG).show();
        // delete(menuInfo.id);

        return true;
    case R.id.add:
        Toast.makeText(getApplicationContext(), "Add Successfully",
                Toast.LENGTH_LONG).show();
        return true;
    case R.id.view:
        Toast.makeText(getApplicationContext(), "Viewed", Toast.LENGTH_LONG)
                .show();

    default:
        Toast.makeText(getApplicationContext(), "HI", Toast.LENGTH_LONG)
                .show();
    }
    return super.onContextItemSelected(item);
} 
```

![在此处输入图像描述](../Images/e0e530488c946f2554beb2b0dedeb7d2.png)

我只得到位置，但找不到图像中的名称、描述、日期和金钱。我怎样才能找到其中之一，以便通过使用姓名日期或金钱，我可以从列表视图和数据库中删除列表。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T16:26:04.013

如果您想删除不需要任何信息的记录，您只需要数据库中记录的行 ID，您可以通过`menuInfo.id`在您的`onContextItemSelected`方法中使用从上下文菜单中获取它。

例子：

```
case R.id.delete:
    deleteItem(menuInfo.id);  //  Your delete method with the paramter of the row id
    Toast.makeText(getApplicationContext(),
            "Deleted" + menuInfo.position, Toast.LENGTH_LONG).show();
    return true; 
```

delete 方法（大概在您的数据库助手类中）：

```
public boolean deleteItem(long rowId) {
    return mDb.delete(YOUR_TABLE, YOUR_ROWID + "=" + rowId, null) > 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T17:23:49.220

看到我之前遇到过同样的问题

所以我给你的解决方案是

```
View yourView; 

        public void onCreateContextMenu(ContextMenu menu, View v,
                ContextMenuInfo menuInfo) {
            // TODO Auto-generated method stub

            yourView = (TableRow) v; // here you can have your own view in my case i have Table row
            MenuInflater inflater = getMenuInflater();
            inflater.inflate(R.menu.table_row_menu, menu);  

        } 
```

而且，一旦您获得视图，您将在**`tag`**与视图关联的帮助下获得信息

# nsis - 条件 SetOverwrite

> ID：13143113
> 
> 赞同：2
> 
> 时间：2012-10-30T16:07:01.847
> 
> 标签：nsis

我正在尝试动态设置`SetOverwrite`状态以在无条件替换某些文件或仅在我的设置提供一些较新版本时替换它们之间进行选择。

我试过用 logiclib

```
${if} $isReinstall = 1
    SetOverwrite on
    ${debug} "SetOverwrite on (overwrite)"
${else}
    SetOverwrite ifnewer
    ${debug} "SetOverwrite ifnewer"
${endif}
File "foo" 
```

并与经典`IntCmp`

```
IntCmp $isReinstall 1 0 +3 +3
SetOverwrite on
goto +2
SetOverwrite ifnewer
File "foo" 
```

但似乎没有任何效果：如果我的文件`foo`已经存在于磁盘上，它总是被跳过。我`$isReinstall`的存在`1`与否。

指令流中的最后一条`SetOverwrite`语句（无论 logiclib 宏如何）似乎重载了前一条语句。

如果我`SetOverwrite on`在指令之前添加另一个`File`，则文件被正确替换。

我的分析正确吗？我如何在运行时决定文件是否可以替换？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T16:54:16.950

尝试改用此代码：

```
${If} $isReinstall = 1
  SetOverwrite on
  File "foo"
${Else}
  SetOverwrite ifnewer
  File "foo"
${EndIf} 
```

需要注意的重要一点是 File 命令出现在 If 块中，并且需要这样做，因为 SetOverwrite 命令会影响它下面的**每一**行。有关完整说明，请参阅NSIS 文档的[这一](http://nsis.sourceforge.net/Docs/Chapter4.html#4.8.2)部分。

# php - 过滤链接的正则表达式

> ID：13143114
> 
> 赞同：-1
> 
> 时间：2012-10-30T16:07:02.673
> 
> 标签：php, regex

我正在使用这个正则表达式来过滤网页中的 .pdffiles：

```
 $regex='|<a.*?href="(.*pdf?)"|'; 
```

如果链接是这样的，它就可以完成工作：

```
 www.xyz.com/trgrrtr/ghtty.pdf 
```

但如果链接是这样的，则无法过滤：

```
 www.xyz.com/trgrrtr/ghtty.pdf?code=KksRHhdVXAoECBFCVFpeXBsBUgYMDQpxd3J2d3F2fDtzfnFuLiErNXNpIG5kYm16aGhpcmxoa05QV1VKUVFFUxQ%3D 
```

我应该使用什么正则表达式从网页中过滤掉这个链接？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T16:08:53.617

博客文章*[An Improvement Liberal, Accurate Regex Pattern for Matching URLs](http://daringfireball.net/2010/07/improved_regex_for_matching_urls)*可能会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T16:09:17.733

首先，您需要转义，`?`否则它只会使其`f`前面的可选。然后你可以做这样的事情：

```
$regex = '|<a.*?href="([^"]*\.pdf\?[^"]*)"|'; 
```

使用否定字符类确保您不能离开该属性。（`.*`也可以使用属性结尾`"`，并继续直到`"`匹配字符串下方的另一个双引号。）

但我真的建议您首先使用 DOM 解析器来查找链接元素。PHP 有一个[内置的，](http://www.php.net/manual/en/book.dom.php)并且有一个非常好的和方便[的 3rd-party 替代方案](http://simplehtmldom.sourceforge.net)。

# ios - ReloadData (UITableView) 不起作用

> ID：13143115
> 
> 赞同：1
> 
> 时间：2012-10-30T16:07:06.253
> 
> 标签：ios, uitableview, plist, reloaddata

我有一个大问题。

```
[self.tableView reloadData]; 
```

不起作用，我不明白为什么。

```
[[self tableView] reloadData]; 
```

也不行。

这是我的代码：

。H

```
@interface ArticleViewController : UITableViewController <UITableViewDataSource, UITableViewDelegate> 
{ 
} 
@end 
```

.m

```
- (void)viewDidLoad {
[super viewDidLoad];
self.tableView.dataSource = self;
self.tableView.delegate = self;
}

btnLeft = [[UIBarButtonItem alloc] initWithImage:[UIImage imageNamed:@"btnLeft"]
                                         style:UIBarButtonItemStylePlain
                                        target:self
                                        action:@selector(loadPlist)];
self.navigationItem.leftBarButtonItem = btnLeft; 
```

在该`loadPlist`方法中，我正在编写一个 .plist 文件。这部分工作正常。

一旦全部写入 .plist 文件：

```
btnRight = [[UIBarButtonItem alloc] initWithImage:[UIImage imageNamed:@"btnRight"]
                                          style:UIBarButtonItemStylePlain
                                         target:self
                                         action:@selector(reloadTheTB)];
self.navigationItem.rightBarButtonItem = btnRight;

- (void)reloadTheTB {
NSLog(@"Test reloadTheTB");

[[self tableView] reloadData];
} 
```

如果我触摸`btnRight`，我可以在日志中看到“ `Test reloadTheTB`”。

这是`tableView:cellForRowAtIndexPath:`

```
// Customize the appearance of table view cells.
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

        if(cell == nil)
            cell = [self getCellContentView:CellIdentifier];

        contentDictio = [dict objectAtIndex:indexPath.row];

        UILabel *lblTemp1 = (UILabel *)[cell viewWithTag:1];

        lblTemp1.text = [contentDictio objectForKey:@"title"];

        if(indexPath.row % 2) {
            UIView* myBackgroundView = [[[UIView alloc] initWithFrame:CGRectZero] autorelease];
            myBackgroundView.backgroundColor = [UIColor colorWithPatternImage:[UIImage imageNamed:@"cell_grise"]];
            cell.backgroundView = myBackgroundView;
        }
        else {
            UIView* myBackgroundView = [[[UIView alloc] initWithFrame:CGRectZero] autorelease];
            myBackgroundView.backgroundColor = [UIColor colorWithPatternImage:[UIImage imageNamed:@"cell_blanche"]];
            cell.backgroundView = myBackgroundView;
        }
    }

    return cell;
} 
```

**更新：**

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {
// Return the number of sections.
return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return [dict count];
} 
```

请帮帮我...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T18:15:22.323

其实我想知道你怎么知道 reloadData 没有被调用？

尝试在 cellForRowAtIndexPath 中输入一些日志？看看当你点击你的按钮时是否被调用？并且这样做：

```
- (void)reloadTheTB {
   NSLog(@"Test reloadTheTB");
   NSLog(@"%@",dict);
  [[self tableView] reloadData]; 
```

}

你的字典的内容是你所期望的吗？还是在loadPlist之后没有改变？

可能对 reloadData 的调用不会在主线程上执行，您只能在主线程上更新 UI。尝试在主线程上执行您的方法，执行以下操作：

```
-(void)ReloadTheTB{   
  [self.tableView performSelectorOnMainThread@selector(reloadData) withObject:nil waitUntilDone:NO]
} 
```

# serial-port - jruby 添加 RXTX 串行侦听器

> ID：13143116
> 
> 赞同：2
> 
> 时间：2012-10-30T16:07:06.753
> 
> 标签：serial-port, jruby, inner-classes

我需要每 500 毫秒从 jruby 下的串行 COMx 或 /dev/ttySx 接口读取一条消息。

我想要做的是将这个[例子](http://rxtx.qbang.org/wiki/index.php/Event_based_two_way_Communication)翻译成 Ruby，以便重新触发监听器。

我正在学习 jRuby，所以我开始激活串口，然后我尝试以这种方式添加侦听器：

```
java_import('gnu.io.RXTXPort') { 'JSerialPort' }

begin
 sp=JSerialPort.new('COM6')  
sp.setSerialPortParams(38400,8,1,0)
rescue 
  puts @error_message="myerror #{$!}"
ensure 
  sp.close
end 
```

它似乎工作。接下来是添加侦听器，在上面的示例中在这一行进行了描述

```
 serialPort.addEventListener(new SerialReader(in)); 
```

这在描述addListener 方法的地方进行了描述[。](http://users.frii.com/jarvi/rxtx/doc/gnu/io/RXTXPort.html)

我尝试了很多方法来调用这些`addListener`方法，但我没有设法通过 jRuby 调用这样的内部方法。

我试过`sp::RXTXPort::addEventListener`没有运气。长时间的研究谷歌搜索让我停滞不前（有些沮丧）。欢迎任何帮助。

# java - 微调从实用程序模块到 Web 项目的源导出

> ID：13143117
> 
> 赞同：2
> 
> 时间：2012-10-30T16:07:09.137
> 
> 标签：java, eclipse, jakarta-ee, junit

我正在使用 IBM Integration Designer 7.5，它是 Eclipse 3.6 的一个版本，具有一些附加功能。我正在构建一个针对 Tomcat 的动态 Web 项目。Web 项目依赖于另一个项目，即实用程序模块。

我已将 Web 项目配置为包含来自[此问题](https://stackoverflow.com/questions/1691553/java-web-project-referencing-another-java-project)的实用程序模块的代码，并且效果很好。从 Web 项目构建的 WAR 包含一个 jar，其中包含来自实用程序模块的类文件。

问题是实用程序模块包含一些 junit 测试用例类，它们被包含在进入 WAR 的 jar 中。我正在寻找一种方法来忽略junit类。

在实用程序模块中，“真实”代码位于名为“src”的文件夹中，测试用例位于名为“test”的第二个源文件夹中。我已经转到实用程序项目的 Build path->Order and Export 选项卡，它将“src”和“test”都列为导出。无法取消选中“测试”条目的复选框。eclipse 文档说源文件夹总是从项目中导出的。

有没有一种现实的方法来微调这个设置，这样测试用例就不会被打包到 web 项目中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T17:47:35.727

你有实用模式的源代码吗？您使用什么作为构建工具？如果第一个问题的答案是肯定的，而第二个问题的答案不是 Maven，那么使用 Maven。默认情况下，它会从构建工件中排除 src/test 目录中的任何内容。您需要将项目目录重新排列为 Maven 默认目录，或者对 POM 文件进行一些配置，以便 Maven 知道哪个是测试目录。

# javascript - window.location.hash 返回值前面的哈希标记

> ID：13143119
> 
> 赞同：5
> 
> 时间：2012-10-30T16:07:12.563
> 
> 标签：javascript, jquery, asp.net-mvc-3, url, hashtag

我在 MVC3 视图中有以下代码：

```
 $(document).ready(function () {
    if (window.location.hash) {
        var manager= new Manager();

        manager.doSomeStuff(window.location.hash);
    }
}); 
```

有趣的是，当 URL 中没有 hash 标签，或者只有 hash 标签时：

```
http://localhost:1223/Index/AboutUs

http://localhost:1223/Index/AboutUs# 
```

当`window.location.hash`为空且函数未执行时。但是当哈希标签中有一些值时：

```
http://localhost:1223/Index/AboutUs#categoryId=5&manufacturerId=8 
```

中的`window.location.hash`值为`#categoryId=5&manufacturerId=8`

你能解释一下为什么标签包含在值中，为什么标签`#`后面没有值时，是空的。`#``window.location.hash`

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-30T16:11:48.933

没什么好解释的。这是它的工作方式。

在这里阅读更多：http: [//www.w3schools.com/jsref/prop_loc_hash.asp](http://www.w3schools.com/jsref/prop_loc_hash.asp)

**定义和使用**

```
The hash property returns the anchor portion of a URL, including the hash sign (#). 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-30T16:25:23.630

如果需要，您可以通过简单地更改哈希名称来更改它：

```
//Your old hash name caught in a variable
var nameHash = location.hash;

//Your new hash name without "#"
var newHashName = nameHash.replace("#",""); 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2014-12-10T09:45:25.557

```
var hash = window.location.hash.substring(1); 
```

这省略了字符串的第一个字符，即哈希标记。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-30T16:40:03.710

[您可以替换`#`](https://stackoverflow.com/questions/11369182/how-to-replace-elements-attr-href-with-each-strip-url)，但这种方式会产生冲突，并且不适用于 javascript。

[这是 window.location 参考链接。](https://developer.mozilla.org/en-US/docs/DOM/window.location)

以下是不同的用法示例：

```
$(document).ready(function () {
    var urlHash = window.location.hash;
    var sampleURL = '#categoryId=5&manufacturerId=8';

    if ( urlHash.length > 1 ) {
       //do stuff
    }else{
       //if value is empty, do stuff
    }

    if ( urlHash === sampleURL ) {
       commonResponse();
    }

    $('a').click(function() {
       var target = $(this).attr('href');

       if (target === sampleURL ) {
          commonResponse();
       }    
    });

    function commonResponse() {
       //alert('ok');
    }
}); 
```

# python - 记住python模式匹配中的多个字段

> ID：13143121
> 
> 赞同：2
> 
> 时间：2012-10-30T16:07:16.527
> 
> 标签：python, regex

这是一个基本的 perl 功能，我必须相信你可以在 python 中做到这一点，但我在文档中找不到任何东西，除非它是隐含的......

这是一个解析字符串中时间字段的非常简单的示例：

```
time=re.search("(\d+):(\d+):(\d+)", variable) 
```

我确实了解如果成功将创建匹配对象。但是我找不到一种方法来找出与 3 种模式匹配的值，以便我可以将它们填充到小时、分钟和秒等变量中。我发现的所有用法示例都只显示了一组 ()。

-标记

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-30T16:09:04.360

[`match`](http://docs.python.org/2/library/re.html#match-objects)对象有一个[`groups`](http://docs.python.org/2/library/re.html#re.MatchObject.groups)返回元组的方法：

```
hours, minutes, seconds = re.search("(\d+):(\d+):(\d+)", variable).groups() 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-30T16:09:13.623

您可以使用该`groups`方法获取匹配的组

```
>>> variable = '1:2:3'
>>> time=re.search("(\d+):(\d+):(\d+)", variable)
>>> print time
<_sre.SRE_Match object at 0x7f3917211918>
>>> print time.groups()
('1', '2', '3') 
```

如果您只想要第一组：

```
>>> print time.group(1)
1 
```

或第二组 ( `time.group(2)`) 等。请注意，这些始终是字符串。

* * *

如果您愿意，您甚至可以命名这些组：

```
>>> time=re.search("(?P<HR>\d+):(\d+):(\d+)", variable)
>>> time.group("HR")
'1' 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-30T16:09:41.043

使用[`time.strptime`](http://docs.python.org/2/library/time.html#time.strptime)或[`datetime.datetime.strptime()`](http://docs.python.org/2/library/datetime.html#datetime.datetime.strptime)：

```
import time
stime = time.strptime(variable, '%H:%M:%S')
hours, minutes, seconds = stime.tm_hour, stime.tm_min, stime.tm_sec 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-30T16:15:06.330

您可以使用命名组：

```
>>> pattern = re.compile("(?P<hours>\d+):(?P<minutes>\d+):(?P<seconds>\d+)")
>>> time = re.search(pattern, "12:34:56")
>>> time.group("hours")
'12'
>>> time.group("minutes")
'34'
>>> time.group("seconds")
'56' 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-30T16:15:06.347

我给你一个更好的：

```
>>> import re
>>> variable = "12:34:56"
>>> time = re.search("(?P<hours>\d+):(?P<minutes>\d+):(?P<seconds>\d+)", variable)
>>> time.group('hours')
'12' 
```

有关更多详细信息，请参阅[文档`re`](http://docs.python.org/2/library/re.html)。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-30T16:12:11.090

哇 - 我想通了。我敢肯定这对经验丰富的用户来说是显而易见的，但对于像我这样的新手来说，我永远不会想到这一点。这 3 个值存储在 time.group(1)、2 和 3 中。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-30T16:09:09.300

用于`m.groups()`列出所有匹配项。

# javascript - 将变量插入到 Jquery 中

> ID：13143123
> 
> 赞同：1
> 
> 时间：2012-10-30T16:07:16.993
> 
> 标签：javascript, jquery

我的页面上运行了以下 jQuery 脚本：

```
<script type="text/javascript" charset="utf-8" src="{{ STATIC_URL }}js/raty/js/jquery.raty.min.js"></script>
<script type ="text/javascript"> 
jQuery(document).ready(function($) {
         $('.yourrating').each(function(index){
          $(this).raty({
            readOnly:  false,
            path: "{{ STATIC_URL }}js/raty/img/",
score: $(this).children("span:first").text(),
            click: function(score, evt) {
                var vote_url = "/spice/rate/" + this.attr('id').substring(2) + "/" + score + "/";
                $.ajax({
                  url: vote_url,
                  success: function(){
                  alert('vote successful');
                  }
                });
            }
          });
        $('.thingrating').raty({
          readOnly:  true,
          start:     2,
         path: "{{ STATIC_URL }}js/raty/img/",
score: $(this).children("span:first").text(),
        });
        });
    });
  </script> 
```

现在，当用户单击时，它无法识别操作并显示弹出窗口，这告诉我变量没有被正确替换。为了确认这一点，我改为`var vote_url`直接路径`"spice/rate/1/2"`，这确实工作正常。

这导致两个问题：

1.  我如何调试它以查看正在使用哪个 URL（即，被替换的变量？）
2.  我该如何纠正这个问题？

以下是模板中相关的代码片段：

`<div class="yourrating" id="t_{{ item.id }}"><span style="display:none;">{{score}}</span></div>`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T16:41:53.743

我为什么不给你清理一下，然后给你一个答案接受！

```
<script type ="text/javascript"> 
(function($) {
    $(function() {
        $('.yourrating').each(function(index,elem){
            $(elem).raty({
                readOnly:  false,
                path: "{{ STATIC_URL }}js/raty/img/",
                score: $(elem).children("span:first").text(),
                click: function(score, evt) {
                    var vote_url = "/spice/rate/" + this.id.substring(2) + "/" + score + "/";
                    $.ajax({
                        url: vote_url,
                        success: function(){
                            alert('vote successful');
                        }
                    });
                }
            });
            $('.thingrating').raty({
                readOnly: true,
                start: 2,
                path: "{{ STATIC_URL }}js/raty/img/",
                score: $(elem).children("span:first").text(),
            });
        });
    });
})(jQuery);
</script>​​​​​​​​​​​​​​ 
```

# mysql - ORDER BY FIELD 忽略排除的记录

> ID：13143126
> 
> 赞同：-1
> 
> 时间：2012-10-30T16:07:31.410
> 
> 标签：mysql, sql-order-by

我必须过滤一组我需要保持特定顺序的 id。问题是，当过滤器（在本例中*是 shop.sector*）排除一些记录时，ORDER BY FIELD 语法变得无效。错误消息是：“order 子句中的列 'id' 不明确”</p>

这是完整的查询：

```
SELECT DISTINCT `companies`.id FROM `companies` 
LEFT OUTER JOIN `shops` ON shops.company_id = companies.id 
WHERE (companies.id IN (96296,1,53585) AND shops.sector = 'Mobile') 
ORDER BY FIELD(id, 96296,1,53585) LIMIT 0, 30; 
```

有没有办法在不知道过滤结果的情况下保持订单？如果可能的话，我想将其保留在一个查询中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T16:10:36.270

尝试使用

```
ORDER BY FIELD(companies.id, 96296,1,53585) 
```

或者

```
ORDER BY 
    CASE 
        WHEN companies.id = 96296 THEN 1 
        WHEN companies.id = 1 THEN 2
        ELSE 3
    END 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T16:11:02.167

您有两个或多个表具有相同名称的列。您必须指定您订购的 ID，例如`companies.id`或`shops.id`

# linux - 在linux内核中开发简单的net_device

> ID：13143129
> 
> 赞同：2
> 
> 时间：2012-10-30T16:07:40.600
> 
> 标签：linux, sockets, network-programming, linux-kernel

我正在尝试在 linux 内核中实现一个网络设备（net_device）。这是一个简单的 net_device，它将命令/数据从用户空间传递到内核空间，反之亦然，这是这个简单的 net_device 的目标。我正在使用套接字将命令/数据从用户空间传递到内核空间。谷歌搜索后，我成功注册了 net_device 并能够在 /sys/class/net/abc0 （设备名称）中看到我的设备，当进行文件操作时，不清楚流程

```
 struct net_device_ops
 {   
   .ndo_open  =open,

   .ndo_close = close,

   .ndo_start_xmit = start_xmit   
 } 
```

*   如果我在***套接字*****中发出写入**，它将在数据链路层调用 start_xmit。

**   如果我想调用 open 方法，如何使用**套接字调用它**

    *   如何使用**套接字调用 start_xmit**

    *   我将如何找到接收缓冲区中有数据包并将其传递给用户空间。* 

 *没有关于简单 net_device（以太网除外）的明确流程/信息可以建议链接/pdf。

我尝试编写简单的套接字程序来测试 open、close、start_xmit。其中套接字读/写没有调用 open,close,star_xmit 。 **有什么方法可以测试开发的 net_device 吗？**

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T11:02:44.910

SIOCSIFFLAGS, -> IFF_UP 您可以在对 netdevice abc0 执行 ioctl 时实际设置或取消设置它。

首先，您必须创建一个 dgram 套接字，

然后使用 net/if.h 中定义的 ifreq 结构

并填充接口和iff_flags

iff_flags 可以用 IFF_UP 设置，也可以用相同的 IFF_UP 取反以使接口关闭

然后关闭套接字。

```
#include <net/if.h>

....

sock = socket(AF_INET, SOCK_DGRAM, 0);

if (sock < 0) {

   goto fail;

}

struct ifreq ifreq;

strcpy(ifreq.ifr_name, "abcd0");

ifreq.iff_flags |= IFF_UP;

if (ioctl(sock, &ifreq, sizeof(ifreq) < 0) {

    perror("ioctl setting interface up");

}

ifreq.iff_flags ~= IFF_UP;

if (ioctl(sock, &ifreq, sizeof(ifreq) < 0) {

    perror("ioctl setting interface down");

}

close(sock); 
```

无关：

你能分享你的代码吗？我们也可以了解您的网络设备:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T07:03:55.030

我找到了如何测试打开、关闭功能。

*   type : ifconfig abc0(Device name) up 会调用 open 方法

*   type : ifconfig abc0(Device name) down 会调用 close 方法

有人可以帮助我如何使用套接字测试这些方法。*

# c# - 如何在c#中重写多个else条件

> ID：13143135
> 
> 赞同：2
> 
> 时间：2012-10-30T16:08:05.533
> 
> 标签：c#

我以前在 SO 的某个地方看到过这个话题，但找不到。避免使用此结构的最佳方法是什么：

```
if (condition)
{
  if (condition2)
  {
    do();
  }
  else
  {
    myVar="test";
  }
}
else
{
   myVar="test";
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T16:11:28.777

```
if (condition && condition2)
{
    do();
}
else 
{
    myVar="test";
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T16:09:03.300

```
if (condition && condition2)
{
  do();
}
else
{
  other();
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-30T16:10:46.767

你的“结构”没有错。写任何最容易理解的东西——尤其是对于第一次看到你的代码的人？

你也可以这样写：

```
if(condition && condition2)
{
    do();
}
else
{
   myVar="test";
} 
```

# php - 无法从行查看回声

> ID：13143139
> 
> 赞同：-1
> 
> 时间：2012-10-30T16:08:15.153
> 
> 标签：php

我有一个相当简单的问题......为什么不能

```
if ($row['admin'] == '2') {
    echo " | Forum Admin";
} 
```

显示`| Forum Admin`？

我将我的用户设置为`2`数据库行`admin`，但它仍然没有显示。顺便说一句，$row 和 $result 是

```
$result = mysql_query("SELECT * FROM users WHERE username='$session_username'");
$row = mysql_fetch_array($result); 
```

我尝试回显错误，但没有任何显示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T16:13:22.453

你会想要使用`mysql_fetch_assoc()`.

Mysql_fetch_array 返回从 0 开始的列索引。（因此，根据您拥有的列数，“管理员”可以是任意数字）

如果您`var_dump($row)`将能够看到索引。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T16:12:06.073

如果内容符合您的预期，请检查 print_r($row)。

如果没有在执行前回显 $session_username 并手动尝试 sql 查询

# javascript - 如何确定哪些事件附加到元素，以及这些事件触发了哪些功能？

> ID：13143141
> 
> 赞同：0
> 
> 时间：2012-10-30T16:08:19.307
> 
> 标签：javascript, events

有没有一种简单的方法来检查 Webkit 检查器？如果没有，还有哪些其他选择？我最感兴趣的是找到事件触发的功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T16:59:33.850

选择元素选项卡，然后使用选择器选择一个元素，在右侧，向下滚动并选择“事件侦听器”

# php - Joomla 组件中的 AJAX 函数调用

> ID：13143143
> 
> 赞同：3
> 
> 时间：2012-10-30T16:08:26.107
> 
> 标签：php, ajax, url, joomla

我对 AJAX 有很好的理解，通常使用它不会有任何问题，但我对 Joomla 比较陌生，最近才开始构建组件等。

我创建了一个使用“默认”视图的组件（命名目录）。在这里，我有以下代码，它是一个 AJAX 调用：

```
<script type="text/javascript">                         
var url = "index.php?option=com_directory&view=directory&task=clubFilter&format=raw";
jQuery(document).ready(function() {
    jQuery('#city').change(function() {         

        jQuery.ajax({
            url: url,
            type: "POST",
            data: jQuery("#city").serialize(),
            dataType: 'json',
            success: function(data) {
                alert('data');
            }
        });
    });
}); 
```

在我的“views/directory/views.html”文件中，我创建了以下函数，该函数当前包含一个骰子，因此我可以确认它何时工作：

```
public function clubFilter() {
        die(print_r('here_i_am'));
    } 
```

当我运行以下代码时，我在 Firebugs 控制台中出现以下错误。

```
'Error: 500 View not found [name, type, prefix]: directory, raw, directoryView' 
```

我认为这是因为 AJAX url var 不正确，但我从这里和其他来源尝试了许多不同的解决方案，只是无法使 AJAX 功能正常工作。我的网址错了吗？非常感谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-30T16:13:59.823

通常，我对控制器上的任务进行 ajax 调用。

这是我在使用 ajax 调用组件的扩展之一中使用的 url 格式：

```
index.php?format=raw&option=<component_name_goes_here>&task=<task_goes_here> 
```

然后，在我的组件的默认控制器中，我放置了一个与任务同名的函数：

```
function getSomeData()
{
   echo(json_encode($data));//I normally return json
} 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-30T16:24:57.197

试试这个网址。它可能会帮助你。

```
var url = "index.php?option=com_directory&view=directory&task=clubFilter&tmpl=component"; 
```

`format=raw`用。。。来代替`&tmpl=component`

否则，您也可以尝试以下格式。

```
jQuery.post('index.php',{
                        'option':'component_name',
                        'controller':'controller_name',
                        'task':'task_name',
                        'format':'raw',                   
                        'data': jQuery("#city").serialize(),
                        'dataType': 'json',
                },function(result){                     
                      //edit the result here

                    return;
       }); 
```

如果您对此有任何疑问，请随时提出。

# apache-flex - 暂停效果并恢复

> ID：13143144
> 
> 赞同：0
> 
> 时间：2012-10-30T16:08:28.390
> 
> 标签：apache-flex

我希望在鼠标悬停时在组件上创建效果。而当鼠标移出时，效果会反转。

```
 <fx:Declarations>
        <s:Parallel id="move">
                <s:Move3D id="moveDown"  yBy="+100"/>
                <s:Pause  />
                <s:Move3D id="moveUp"  yBy="-100"/>
        </s:Parallel>
    </fx:Declarations>

<s:Panel id="userMenu" includeIn="USER" x="920" y="35" width="689" height="142"

             mouseOver="move.play(Array(userMenu), false)" 
             mouseOut="move.resume(Array(userMenu), false)"
             rotationZ="180" >
        <s:HGroup x="44" y="9" width="590" height="62" gap="15" horizontalCenter="1" rotationZ="180"
                  verticalCenter="1"
                  x.USER="10" y.USER="208">

        </s:HGroup>
    </s:Panel> 
```

但我收到这样的错误

```
1152: A conflict exists with inherited definition mx.core:UIComponent.move in namespace public mx.core:IFlexDisplayObject. 
```

添加`move.resume()`功能后。为什么我会收到此错误？以及如何调试它？

# php - 如何为这个复杂的循环设置条件以仅在第一行显示来自 db 的值？

> ID：13143148
> 
> 赞同：0
> 
> 时间：2012-10-30T16:08:42.853
> 
> 标签：php, if-statement

我有一个循环匹配回合：

```
while ( $matches->fetch() ) 

{

echo $round . '.'; //need a condition to only echo round if it is for the first time
echo $team1 . ' VS ' . $team2;

} 
```

所以，而不是结果，例如：

```
1.FC BARCELONA VS REAL MADRID
1.MALAGA VS SEVILLA
1.ATLETICO BILBAO VS MADRID
1.MALLORCA VS REAL MADRID
2.FC BARCELONA VS REAL MADRID
2.MALAGA VS SEVILLA
2.ATLETICO BILBAO VS MADRID
2.MALLORCA VS REAL MADRID 
```

我只需要在第一行中回显一次回合数，如下所示：

```
1.FC BARCELONA VS REAL MADRID
MALAGA VS SEVILLA
ATLETICO BILBAO VS MADRID
MALLORCA VS REAL MADRID
2.FC BARCELONA VS REAL MADRID
MALAGA VS SEVILLA
ATLETICO BILBAO VS MADRID
MALLORCA VS REAL MADRID 
```

如何在while循环中做到这一点？我需要一些 if 或其他条件，但我不知道如何对此进行编码，因此不胜感激。

我已经正确订购了它们，但现在需要做输出部分。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T16:12:14.573

跟踪最后一轮，仅在更改时显示。

```
$lastRound = null;
while ( $matches->fetch() ) 
{
    if ($lastRound != $round) 
    {
        echo $round . '.'; //need a condition to only echo round if it is for the first time
    }
    $lastRound = $round;
    echo $team1 . ' VS ' . $team2;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T16:11:43.383

试试这个：

```
$written = false;
while ( $matches->fetch() ) {
  if(!$written) {
    echo $round . '.'; //need a condition to only echo round if it is for the first time
    $written = true;
  }
  echo $team1 . ' VS ' . $team2;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T16:10:25.167

之前 while 定义 $count = 0; 在里面，而第一件事就是做 $count++; 然后检查

```
if ($count == 1) { display round number } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-30T16:11:35.580

```
$i = 0;
while($row = $sql->fetch_assoc()) {
    if($i == 0)
        echo '1\. ';
    echo $row['field'];

    $i++;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-30T16:13:04.917

所有你需要的是

```
$last = null;
while ( $matches->fetch() ) 
{
    ($round !== $last) and print($round . '.');
    echo $team1 . ' VS ' . $team2;
    $last = $round;
} 
```

# r - 为 R 中的矩阵分配随机或自动名称

> ID：13143150
> 
> 赞同：0
> 
> 时间：2012-10-30T16:08:48.163
> 
> 标签：r

> **可能重复：**
> [生成变量名（类似于 get()）](https://stackoverflow.com/questions/13058679/generate-variable-names-something-like-get)

如果我想以自动化的方式创建具有不同名称的矩阵，我会遇到问题。

例如，我想创建三个名为 a1、a2 和 a3 的矩阵。

```
 x<-1:3
 a<-"a"
 listofnames<-paste(a,x)  ## a vector with the names that I want to use for my matrices 
```

我的问题是为矩阵分配与我创建的向量不同的名称。例如，要创建一个名为 a1 的矩阵（我的向量中的第一个“名称”），这当然根本不起作用：

```
 listofnames[1]<-matrix(ncol=2,nrow=2) 
```

但是我该怎么做呢？

我一直在网上寻找但找不到任何答案..非常感谢您的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T16:19:17.343

使用`assign`如下：

```
x<-1:3
a<-"a"
listofnames <-paste(a,x) 

set.seed(001)
for(i in 1:length(listofnames)){
  assign(listofnames[i], matrix(sample(9), ncol=3))
}

get(listofnames[1])
     [,1] [,2] [,3]
[1,]    3    6    8
[2,]    9    2    7
[3,]    5    4    1

get(listofnames[2])
     [,1] [,2] [,3]
[1,]    1    5    6
[2,]    2    7    3
[3,]    8    4    9

get(listofnames[3])
     [,1] [,2] [,3]
[1,]    4    2    5
[2,]    7    9    3
[3,]    8    1    6 
```

将矩阵分配给其中包含的名称后，`listofnames`您可以使用`get`如上所示的函数进行访问。如果你只这样做`listofnames[1]`会给你名字`listofnames`而不是存储在那个名字下的元素，这样做你必须使用`get(listofnames[1])`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T16:17:06.517

如果您确切地解释您要实现的目标可能会更好，但您可能还想探索`assign()`：

```
x <- 1:3
a <- "a"
listofnames <- paste(a, x, sep="")
assign(listofnames[1], matrix(nrow = 2, ncol = 2))
a1
     [,1] [,2]
[1,]   NA   NA
[2,]   NA   NA 
```

# c# - 如何从gridview中删除空行

> ID：13143151
> 
> 赞同：2
> 
> 时间：2012-10-30T16:08:46.737
> 
> 标签：c#, winforms, gridview

我在窗口应用程序中遇到问题。当我插入一条记录并在 gridview 中显示记录时，gridview 会自动生成一个空行。我也用

`dataGridView1.AllowUserToAddRows = false;`

请帮助我提供替代解决方案以摆脱空行。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T16:59:41.977

默认 DGV 将在底部有一个空白行，以允许用户添加新行，方法是设置 dataGridView1.AllowUserToAddRows = false; 将禁用空白行。

您可以像这样手动删除空白行：

```
for (int i = 1; i < dataGridView1.RowCount - 1; i++)    
{  
   Boolean isEmpty = true;
   for(int j=0;j<dataGridView1.Columns.Count; j++)
   {
     if (dataGridView1.Rows[i].Cells[j].Value.ToString() != "" )    
      { 
          isEmpty = false;
          break;
      }
    }
    if (isEmpty)    
    {    
       dataGridView1.Rows.RemoveAt(i);
       i--;
    }   
 } 
```

HTH。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T16:50:34.607

您确定您的数据源中没有空白记录吗？另一种可以检查的方法是在 OnRowDataBound 上添加一个 if 语句来检查项目索引，如果为 0（或其他方式来识别空白行）然后设置行的 Visible = false

# javascript - 帧完全渲染后如何调用javascript？

> ID：13143153
> 
> 赞同：0
> 
> 时间：2012-10-30T16:08:55.173
> 
> 标签：javascript, iframe

我正在寻找一种修改`iFrame`属性（实际上是文本框值）的方法。它`iFrame`在另一个域上，我确实可以访问它。据我了解，我必须在`iFrame`呈现整个页面（包括）之后执行此操作。我尝试过这样的事情：

```
<script type="text/javascript">
$(window).load(function() {
    alert("test");
    d = document.getElementById("myframe");
    d.contentWindow.document.getElementById("frametxtbox");
});
</script> 
```

但我总是收到以下错误：

> 无法调用未定义的方法“getElementById”

我还注意到在渲染之前会弹出警报`iFrame`，所以我认为我的脚本是在页面可以访问帧值之前执行的，因此我得到了错误。我对网络相关的编程知识很少（总是在后端工作），所以如果我的问题可能没有意义，请原谅我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T16:19:47.063

如果 iframe 指向另一个域，它将受到[同源策略](http://en.wikipedia.org/wiki/Same_origin_policy)的约束。这意味着在您尝试访问其文档之前，您必须检查 wiki 并放宽政策（查看链接了解详细信息）。之后，您需要将 ready 事件绑定到 iframe 文档，而不是您的主页文档。

```
$(window.frames['myframe'].document).ready(function() { alert('moo'); }); 
```

看看这是否有帮助:)

# c# - 如何从反射中获得匿名类的实例？

> ID：13143155
> 
> 赞同：0
> 
> 时间：2012-10-30T16:08:58.277
> 
> 标签：c#, reflection

如何从反射中获得匿名类的实例？

我有这个字符串：
`"<object name='hello' id='654' />"`

具有**不确定的属性参数编号**（和名称），我想要一个匿名类的实例，该实例具有属性和属性以及属性值和属性值之间的映射。

```
var anObject = new{name="hello",id=654}; 
```

我采用了字符串的 xml 格式来说明我的话，但我需要**任何字符串格式**的解决方案（我不想 Xml 序列化）。

对于 Reed Copsey（请在我需要的地方抽象出上下文）。我打算用它来将 DefaultRoute 注入到 asp.net MVC 3 应用程序的映射路由中

```
 routes.MapRoute(
        "",
        "superweirdurlwithnostructure.whatever",
        new { controller = "Home", action = "Products", id = 500 }
    ); 
```

参考我的问题[文件以在 MVC3 中定义路由](https://stackoverflow.com/questions/13135633/file-to-define-route-in-mvc3#comment17866274_13135633)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T16:12:49.037

你不能以这种方式创建一个匿名类（至少在没有使用[CodeDom 之](http://msdn.microsoft.com/en-us/library/y2k85ax6.aspx)类的东西来实际编写和编译代码的情况下是这样）。

话虽如此，即使您*可以*做到这一点，也没有使用此类的好方法。匿名类型实际上是在定义它们的函数中使用的，它们被转换成一个完整的类，由编译器在*编译时*生成。

一种可能的选择是使用`dynamic`：

```
dynamic anObject = new ExpandoObject();
anObject.name = "hello";
anObject.id = 654; 
```

您也可以通过`ExpandoObject`的`IDictionary<string,object>`界面使用它：

```
dynamic anObject = new ExpandoObject();
var setObject = (IDictionary<string,object>)anObject;
setObject["name"] = "hello";
setObject["id"] = 654;

// These can be accessed directly now
Console.WriteLine(anObject.name);
Console.WriteLine(anObject.id); 
```

但是，您仍然需要一种使用它的好方法——在不知道代码应该如何访问变量的情况下，动态构建类型无助于解决许多问题，只会创建更多问题......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T16:13:45.273

不幸的是，您将不得不使用`Reflection.Emit`创建具有所有属性的新类型。匿名类型实际上是与任何其他类型没有区别的类，除了编译器自动创建它们的定义。

根据您的情况，`dynamic ExpandoObject`对象可能是您的答案。

# facebook - 脸书的最大尺寸图片

> ID：13143156
> 
> 赞同：1
> 
> 时间：2012-10-30T16:08:59.803
> 
> 标签：facebook, image

我创建了一个带有照片库的 facebook 应用程序。我已经设置了流体画布。当我点击一张照片并放大时，可以租用的最大尺寸是多少？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T18:52:07.603

您可以用您的照片填满整个用户的屏幕。将 Facebook Canvas 视为您网页的 iFrame。除了用户浏览器窗口的大小外，流体画布没有界限。

这是一篇很棒的文章，描述了如何使用流体画布（以及一些使用此设置的游戏示例）：[https](https://developers.facebook.com/blog/post/549/) ://developers.facebook.com/blog/post/549/它将帮助您可视化您有多少屏幕空间将具有此设置的应用程序。

# java - 自动序列图

> ID：13143166
> 
> 赞同：5
> 
> 时间：2012-10-30T16:09:22.953
> 
> 标签：java, eclipse, sequence-diagram

我继承了一个巨大的代码库，我想知道是否有任何工具可以让我标记项目中的任何方法并创建一个序列图，其中包含对我的包上的类的所有调用、过滤它们或类似的东西。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-30T16:13:09.360

你试过[Architexa吗？](http://www.architexa.com/)Eclipse 插件，免费供个人使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-03T03:12:31.160

看看[trace to sequence diagram generation python scripts](https://github.com/eventhelix/trace-to-sequence-diagram)。[您可以使用EventStudio System Designer](http://www.eventhelix.com/EventStudio/)自定义这些脚本以生成序列图。

请注意，EventStudio 不是免费工具。我隶属于公司。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-30T18:46:35.853

我已经实现了一个基于 junit 测试的序列生成器，它为 pgf-umlsd 乳胶包示例生成序列图： ![生成的序列图](../Images/aa64f50a9f6bb58690e78bb611aff4dc.png)

你好世界

```
@测试
@SequenceDiagram({ Controller.class, Model.class })
公共无效测试方法（）{
    控制器 c = 新控制器（新模型（））；
    c.init();
    c.simpleBeanOperation();
}

```

[https://github.com/sherif181/java-sequence-diagram-generator](https://github.com/sherif181/java-sequence-diagram-generator)

# facebook-graph-api - facebook 应用程序：从朋友那里获取分数

> ID：13143167
> 
> 赞同：0
> 
> 时间：2012-10-30T16:09:22.900
> 
> 标签：facebook-graph-api

这是我的第一篇文章，我快崩溃了！我已经尝试解决这个问题两天了，我不确定我做错了什么，而且我在任何地方都找不到答案。

我正在编写一个 facebook 游戏，并希望为其用户存储“分数”。有点简单，我想。为此，我有两个用户帐户正在播放该应用程序。到目前为止，我能够获取和发布登录用户的分数。但是我找不到获取他朋友分数的方法。在 Facebook 开发描述中，它声明（“uid/scores”）请求应该返回来自用户及其朋友的分数，但它没有。还尝试“friend-ID/scores”以及“friend-ID?field=scores”不会返回任何内容：

```
{
  "data": [
  ]
} 
```

我尝试了几乎所有应用权限组合，在 Graph-API-explorer 中使用 app_token 和 access_token 请求、用户 ID 和应用 ID 的狂野组合四处寻找，但没有任何结果。返回的数据始终为空。

我究竟做错了什么？我的应用程序需要什么权限才能获取我的朋友对我的应用程序（游戏）的分数？是因为游戏仍在开发中/尚未获批吗？我必须发送什么图形命令？有没有人成功获得朋友分数？

提前致谢！:-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T18:53:21.267

[https://developers.facebook.com/docs/reference/api/user/](https://developers.facebook.com/docs/reference/api/user/)上的文档指出，实际上 /scores 会返回用户的分数，假设他们授予您 user_games_activity 权限。

您只需要一个用户访问令牌，它应该返回如下内容：

```
{
  "data": [
    {
      "user": {
        "name": "James Pearce", 
        "id": "738229837"
      }, 
      "score": 20, 
      "application": {
        "name": "Bubble Safari", 
        "namespace": "bubblesafari", 
        "id": "164731003644283"
      }
    },
    ... 
```

它本身不会返回用户朋友的分数：要获得它，您需要单独调用 /[friend_id]/scores（假设第一个用户已授予您 friends_games_activity）。

假设您拥有正确的权限（使用 /me/permissions 检查），一个空数组意味着朋友要么没有分数，要么选择不分享它们。

无法检索应用程序所有用户的分数列表，即使使用应用程序访问令牌也是如此。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-19T10:32:01.813

您可以向**“APP_ID/scores”**发出请求，它将返回当前用户的分数和他朋友的分数

```
(result:, [data: (
        {
        application =         {
            id = APP_ID;
            name = APP_NAME;
            namespace = APP_NAMESPACE;
        };
        score = 639;
        user =         {
            id = USERID of user A;
            name = "User A";
        };
    },
        {
        application =         {
            id = APP_ID;
            name = APP_NAME;
            namespace = APP_NAMESPACE;
        };
        score = 205;
        user =         {
            id = USERID of user B;
            name = "User B";
        };
    },
        {
        application =         {
            id = APP_ID;
            name = APP_NAME;
            namespace = APP_NAMESPACE;
        };
        score = 100;
        user =         {
            id = USERID of user C;
            name = "User C";
        };
    }
)]) 
```

# system-verilog - 大 SystemVerilog 约束的示例

> ID：13143171
> 
> 赞同：2
> 
> 时间：2012-10-30T16:09:49.183
> 
> 标签：system-verilog

你能举一个大而复杂的 SystemVerilog 约束的例子吗？越大越好，最好是现实的。也许一些地址计算也取决于其他一些变量。

我正在评估将我们的 IP 切换为使用 SystemVerilog 约束，我的管理层希望了解创建/理解 SystemVerilog 约束的难易程度。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-05-08T14:33:28.013

由于我无法对上一篇文章发表评论，并且我建议的编辑被拒绝，我只能添加看起来像新答案但不是的内容。叹！

这是 Subbdue 的示例，经过编辑以修复以下语法错误：

1.  SV`typedef enum {...} <name>;`语法与 OpenVera`enum <name> {...};`语法相对
2.  结束枚举声明`;`
3.  声明变量`channelNumber`
4.  声明`ipVersion`为`rand`
5.  SV`<var> inside { [<min>:<max>] }`语法与 OpenVera`<var> in { min:max }`语法相对
6.  `constraint`用s结束表达式`;`
7.  SV`->`语法与 OpenVera`=>`语法相对
8.  修正错字`solver`->`solve`
9.  修正错字`IPVx`->`IPVX`

固定示例：

```
class RandomConstraints;
    typedef enum {IPV4=2, IPV6, IPVX} IpVersionType;

    //Randomly iterate over values without repetition
    randc bit [7:0] cyclicCounter;
    //Regular random variables
    rand bit [15:0] destAddress;
    rand bit [15:0] sourceAddress;
    rand bit [15:0] numberOfPackets;
    rand bit [15:0] packetLength;
    rand bit [3:0] channelNumber;
    rand bit [7:0]  var1;
    rand bit [7:0]  var2;
    rand IpVersionType ipVersion;

    //Non-random variables that can be used to control constraints
    bit [15:0] minNumberOfPackets, maxNumberOfPackets;
    bit [15:0] minPacketLength, maxPacketLength;
    integer IPV4Weight, IPV6Weight;

    constraint cPacketLength {
        packetLength inside { [ minPacketLength : maxPacketLength ] };
    }
    constraint cChannelNumber {
        channelNumber inside {[0:1]};
    }
    // Assuming total weight adds up to 100
    constraint cIPVersionType {
        ipVersion dist { IPV4 := IPV4Weight, IPV6 := IPV6Weight,
          IPVX := (100 - IPV4Weight - IPV6Weight) };
    }
    //Probability of var1 being 1,2,3,4,5 in the ratio 1,2,4,4,4
    constraint cDist1 {
        var1 dist { 1 := 1, 2 := 2, [3:4] := 4 };
    }
    //Probability of var2 being 1,2,3,4,5 is in the ratio 1,2,4/3,4/3,4/3
    constraint cDist2 {
        var2 dist { 1 := 1, 2 := 2, [3:5] :/ 4 };
    }
    //Implication constraint - if(channelNum == i) then { ... }
    constraint cImplication {
        (channelNumber == 0) -> {
            destAddress inside {[0:200]};
            sourceAddress inside {[201:400]};
        }
        (channelNumber == 1) -> {
            destAddress inside {[201:400]};
            sourceAddress inside {[0:200]};
        }
    }
    //Controlling order of constraints solved using a constraint solver
    constraint order_solver {
        solve channelNumber before destAddress;
        solve channelNumber before sourceAddress;
    }

    function new();
        //Setting default min/max packets and min/max packet length
        minNumberOfPackets = 100;
        maxNumberOfPackets = 1000;
        minPacketLength = 128;
        maxPacketLength = 256;
        IPV4Weight = 50;
        IPV6Weight = 30;
    endfunction
endclass 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-02T05:46:16.217

这是一个示例，可能并不大也不复杂，但它应该让您对如何使用约束有一个现实的想法。在这里，您将看到使用的以下概念：

1.  **randc 和 rand** - 循环和非循环随机变量
2.  两种类型的**分布式约束**
3.  在约束中使用 if 条件，使用**隐含运算符**...*根据另一个变量计算的地址*
4.  **约束顺序求解器**
5.  在构造函数中约束随机变量的默认范围
6.  在约束中使用枚举类型

希望这会有所帮助......并注意在线评论：

```
class RandomConstraints;
    enum IpVersionType {IPV4=2, IPV6, IPVx}

    //Randomly iterate over values without repetition
    randc bit [7:0] cyclicCounter;
    //Regular random variables
    rand bit [15:0] destAddress;
    rand bit [15:0] sourceAddress;
    rand bit [15:0] numberOfPackets;
    rand bit [15:0] packetLength;
    rand bit [7:0]  var1;
    rand bit [7:0]  var2;
    IpVersionType ipVersion;

    //Non-random variables that can be used to control constraints
    bit [15:0] minNumberOfPackets, maxNumberOfPackets;
    bit [15:0] minPacketLength, maxPacketLength;
    integer IPV4Weight, IPV6Weight;

    constraint cPacketLength {
        packetLength in { minPacketLength : maxPacketLength }
    }
    constraint cChannelNumber {
        channelNumber in {0:1}
    }
    constraint cIPVersionType {
        ipVersion dist { IPV4 := IPV4Weight, IPV6 := IPV6Weight, IPVX := (100 - IPV4Weight - IPV6Weight) }
    }
    //Probability of var1 being 1,2,3,4,5 in the ratio 1,2,4,4,4
    constraint cDist1 {
        var1 dist { 1 := 1, 2 := 2, [3:4] := 4 }
    }
    //Probability of var2 being 1,2,3,4,5 is in the ratio 1,2,4/3,4/3,4/3 
    constraint cDist2 {
        var2 dist { 1 := 1, 2 := 2, [3:5] :/ 4 }
    }       
    //Implication constraint - if(channelNum == i) then { ... }
    constraint cImplication {
        (channelNumber == 0) => {
            destAddress in {0:200};
            sourceAddress in {201:400};
        }
        (channelNumber == 1) => {
            destAddress in {201:400};
            sourceAddress in {0:200};
        }
    }
    //Controlling order of constraints solved using a constraint solver
    constraint order_solver {
        solver channelNumber before destAddress;
        solver channelNumber before sourceAddress;
    }

    function new();
        //Setting default min/max packets and min/max packet length
        minNumberOfPackets = 100;
        maxNumberOfPackets = 1000;
        minPacketLength = 128;
        maxPacketLength = 256;
        IPV4Weight = 50;
        IPV6Weight = 30;
    endfunction
endclass 
```

# python - 有没有办法查看 SciPy 矩阵使用了多少内存？

> ID：13143184
> 
> 赞同：3
> 
> 时间：2012-10-30T16:10:37.643
> 
> 标签：python, numpy, scipy

我知道在 python 中很难看到一个对象的内存使用情况。

对 SciPy 对象（例如稀疏矩阵）执行此操作是否更容易？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-30T16:18:11.480

您可以使用 array.itemsize （包含类型的大小，以字节为单位）和 array.flat 来获取长度：

```
# a is your array
bytes = a.itemsize * a.size 
```

这不是确切的值，因为它忽略了整个阵列基础设施，但对于大阵列来说，它的价值很重要（我猜你在乎，因为你有一些大的东西）

如果你想在稀疏数组上使用它，你必须修改它，因为稀疏没有 itemsize 属性。您必须访问 dtype 并从中获取项目大小：

```
bytes = a.dtype.itemsize * a.size 
```

一般来说，我认为评估 python 对象占用的真实内存并不容易...... numpy 数组是一个例外，它只是 C 数组上的一个薄层

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T05:06:22.577

如果你在 IPython 中，你还可以使用它的`%whos`[魔法函数](http://ipython.org/ipython-doc/dev/api/generated/IPython.core.magics.namespace.html)，它可以为你提供有关会话变量的信息，并包括每个变量占用多少 RAM。

# finite-automata - 非线性、明确和非确定性 CFL 的示例？

> ID：13143186
> 
> 赞同：5
> 
> 时间：2012-10-30T16:10:39.207
> 
> 标签：finite-automata, automata, computation-theory, formal-languages, chomsky-hierarchy

在形式语言的乔姆斯基分类中，我需要一些`Non-Linear, Unambiguous and also Non-Deterministic`上下文无关语言（N-CFL）的例子吗？

1.  **线性语言**：[线性语法](http://en.wikipedia.org/wiki/Linear_grammar)是可能的（⊆ CFG），例如
    L [1] = {a ^n b ^n | n≥0}

2.  **确定性上下文无关语言（D-CFG）**：确定性下推自动机（D-PDA）是可能的，例如
    L [2] = {a ^n b ^n c ^m | n ≥ 0, m ≥ 0 }
    L [2]是明确的。

> 非线性的 CF 文法[是非线性的](http://books.google.co.in/books?id=hsxDiWvVdBcC&pg=PA210&lpg=PA210&dq=A%20CF%20grammar%20that%20is%20not%20linear%20is%20nonlinear.&source=bl&ots=rcItUgWkbU&sig=27t5VDwFpWxRt35whi7E4FlL1cE&hl=en&redir_esc=y#v=onepage&q&f=false)。
> **L** [**nl**] = {w: n [a] (w) = n [b] (w)} 也是**非线性 CFG**。

-- 3\. **Non-Deterministic Context Free Language(N-CFG)** :`only Non-Deterministic Push-Down-Automata(N-PDA)`可能的例如
L [3] = {ww ^R | w ∈ {a, b} ^* }
L [3]也是线性CFG。

--4。**模棱两可的 CFL** : `only ambiguous CFG is possible`
L [4] = {a ^n b ^n c ^m |的 CFL n ≥ 0, m ≥ 0 } U {a ^n b ^m c ^m | n ≥ 0, m ≥ 0 }
L [4]既是非线性又是模糊 CFG 和每个模糊 CFL \subseteq N-CFL。

**我的问题是：**
是否所有非线性、非确定性 CFL 都是模棱两可的？如果不是，那么我需要一个非线性、非确定性 CFL 且明确的示例？

**给定下面的维恩图：**

> ![在此处输入图像描述](../Images/6e2f030ac7c527c598e345d69db27b15.png)

也在[这里问](https://math.stackexchange.com/questions/225302/example-of-non-linear-unambiguous-and-non-deterministic-cfl)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-30T15:48:46.527

## “在正式语言的 CHOMSHY 分类的背景下”

(1) **L [3]** = {ww ^R | w ∈ {a, b} ^* }

*   语言 L [3] 是一种非确定性上下文无关语言，它也是明确的线性语言。

(2) **L [p]**是括号匹配的语言。有两个终端符号“（”和“）”。
L [p]的语法是：

```
S → SS
S → (S)
S → () 
```

*   这种语言也是非线性的、确定性的和明确的。

[作为 L p]和 L [3]的并集的语言**L**是明确的、非线性的（由于 L [p]）和非确定性的（由于 L [3]）（假设两种语言的语言符号不同）。

这种语言是我标记的维恩图中的语言示例`??`。

正确的图表如下：

[**模棱两可的上下文无关语言也是线性上下文无关的**](https://math.stackexchange.com/questions/252454/in-context-of-chomskhy-classification-of-formal-languages)

> ![直流电](../Images/6ae9ca82d91a422da887135b85d42a2a.png)

# php - 在 PHP 中附加一个变量？

> ID：13143188
> 
> 赞同：0
> 
> 时间：2012-10-30T16:10:42.623
> 
> 标签：php, wordpress

我在 Wordpress 网站中有以下代码：

```
function myscript() {
    $upload_dir = wp_upload_dir();
    define ('FILE_CACHE_DIRECTORY', $upload_dir['baseurl'];
    echo bloginfo('template_directory') . '/js/myscript.php?src=';
} 
```

我想附加`$upload_dir[baseurl]`with`/folder/`但似乎无法弄清楚。

我尝试了几件事，例如将第二行更改为：

```
$upload_dir = wp_upload_dir() . '/folder/'; 
```

更改第 3 行并在其上方添加：

```
$myscriptdir =  $upload_dir['baseurl'].'/folder';
define ('FILE_CACHE_DIRECTORY', $myscriptdir); 
```

只需将第 3 行更改为：

```
define ('FILE_CACHE_DIRECTORY', $upload_dir['baseurl'].'/folder/'); 
```

但这些都不起作用。有什么帮助吗？

对不起，如果这是一个愚蠢的问题。我是 PHP 新手。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T19:06:11.423

你能做这样的事情：

```
function myscript() {
    $upload_dir = wp_upload_dir();

    $upload_dir['baseurl'] = $upload_dir['baseurl'].'/folder/';

    define ('FILE_CACHE_DIRECTORY', $upload_dir['baseurl'];
    echo bloginfo('template_directory') . '/js/myscript.php?src=';
} 
```

# jquery - 突出显示的 jQuery 自动完成多个输入

> ID：13143189
> 
> 赞同：0
> 
> 时间：2012-10-30T16:10:43.453
> 
> 标签：jquery, input, autocomplete, highlight

我在突出显示 jquery 自动完成中的多个输入时遇到问题。第一个输入得到高亮显示，不幸的是第二个没有:(

因此，当我输入 Java 时，这个词会变粗，但之后当我用逗号分隔 java 并输入另一个词时，这个词就不会加粗。

请帮忙

```
<script>jQuery(document).ready(function() {
    var availableTags=["Java","J2ee","Spring","Hibernate","CSS","HTML","Struts","Struts 2","Maven","Maven 2","Spring Roo","Warszawa","JSF 2.0","EJB"];
    $.extend($.ui.autocomplete.prototype, {
        _renderItem: function( ul, item ) {
            var term = this.element.val(),
                regex = new RegExp( '(' + term + ')', 'gi' );
            html = item.label.replace( regex , "<b>$&</b>" );
            return $( "<li></li>" ).data( "item.autocomplete", item ).append( $("<a></a>").html(html) ).appendTo( ul );
        }
    });

    function split( val ) {
        return val.split( /,\s*/ );
    }

    function extractLast( term ) {
        return split( term ).pop();
    }

    $( "#tags" )
        // don't navigate away from the field on tab when selecting an item
        .bind( "keydown", function( event ) {
            if ( event.keyCode === $.ui.keyCode.TAB &&
                    $( this ).data( "autocomplete" ).menu.active ) {
                event.preventDefault();
            }
        })
        .autocomplete({
            minLength: 0,
            source: function( request, response ) {
                // delegate back to autocomplete, but extract the last term
                response( $.ui.autocomplete.filter(
                    availableTags, extractLast( request.term ) ) );
            },
            focus: function() {
                // prevent value inserted on focus
                return false;
            },
            select: function( event, ui ) {
                var terms = split( this.value );
                // remove the current input
                terms.pop();
                // add the selected item
                terms.push( ui.item.value );
                // add placeholder to get the comma-and-space at the end
                terms.push( "" );
                this.value = terms.join( ", " );
                return false;
            }
        });
});
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T16:40:49.253

**更新**

仔细看了下代码，问题确实出在这里：

```
var term = this.element.val(),
    regex = new RegExp( '(' + term + ')', 'gi' ); 
```

你得到了完整`.val()`的文本框。只需像这样修复它：

```
regex = new RegExp( '(' + extractLast(term) + ')', 'gi' ); 
```

**额外的**

无论如何，它可能不相关，但我通常会在`source:`函数中组合它以获得粗体效果而不是重写`_renderItem`. 像这样：

```
 source: function (request, response) {
        console.log(request.term);
        var filtered = $.ui.autocomplete.filter(availableTags, extractLast(request.term));
        var regex = new RegExp('(' + extractLast(request.term) + ')', 'gi' );
        var results = [];
        filtered.forEach(function (item) {
            results.push({ label: item.replace(regex , "<b>$1</b>"), value:item });
        });
        response(results);
    },
    html: true, // see below why this is needed. 
```

我已经更新了小提琴中的代码，它现在应该可以工作了：http: [//jsfiddle.net/95aH7/1/](http://jsfiddle.net/95aH7/1/)

**重要提示：**加载 jQuery UI 后，您需要在脚本中包含[jquery.ui.autocomplete.html](http://dev.nemikor.com/jquery-ui-extensions/autocomplete/jquery.ui.autocomplete.html.js)。此外，要使扩展程序正常工作，您需要添加`html: true`到自动完成选项（查看小提琴）。

# html - 充当获取表单的 Html 发布表单

> ID：13143192
> 
> 赞同：0
> 
> 时间：2012-10-30T16:10:48.640
> 
> 标签：html, forms, post, get

我正在使用[twitter bootstrap](http://twitter.github.com/bootstrap/)，并且`<form action="" method="post">`出于某种原因，充当`<form action="" method="get">`有谁知道为什么会这样？我在 Windows 7 上使用 Chrome。

编辑：整个表格是这样的：

```
 <form action="" method="post">
          <input type="text" name="username" class="input-block-level" placeholder="Username">
          <input type="password" class="input-block-level" name="password" placeholder="Password">
          <input class="btn btn-large btn-primary" type="submit" value="Sign in"><span>OR</span> <a class="btn btn-large btn-success" href="#">Sign Up</a>
      </form> 
```

PHP：

```
<?php
if(empty($_POST) === false) {
$username = $_POST['username'];
$password = $_POST['password'];

if(empty($username) === true || empty($password) === true) {
   $errors[] = 'You need to enter a username and password.';
} else if (user_exists($username) === false) {
   $errors[] = 'We can\'t find that username. Have you registered?';
} else if (user_active($username) === false) {
  $errors[] = 'You haven\'t activated your account!';
} else if(strlen($password) > 32 ) {
     $errors[] = 'Password to long.';
}
  $login = login($username, $password);
  if($login === false){
    $errors[] = 'That username/password combination is incorrect.';
  }else{
     $_SESSION['user_id'] = $login;
     header('Location: index.php');
     exit();

  }
}
if(empty($errors)===false){
?>
     <h1>We tried to log you in, but....</h1>
 <?php
      foreach($error as $errors){
        echo $error . '<br />';
     }
  } ?> 
```

# javascript - 如何隐藏与其依赖的字段在同一行中的字段

> ID：13143195
> 
> 赞同：0
> 
> 时间：2012-10-30T16:11:00.713
> 
> 标签：javascript, jquery, jquery-selectors

我是 jquery 的新手，但我有一个表，每一行都有一个字段，该字段依赖于该行中的另一个字段（复选框）。由于它在一张桌子上，我需要批量处理它们。我认为我没有正确使用 next() 但我试图抓住下一个 .subnet_mask 因为它将与隐藏它在同一行中。一旦我到达那一步，我还必须更新它，以便它处理隐藏和显示复选框是否被选中。

```
$(function() {
    $('.dhcp').each(function() {
        $(this).click(function(){
            $('.subnet_mask').next().hide();
        });
    });
}); 
```

任何帮助表示赞赏！

编辑：好的好的 :) 该页面实际上是用 VisualForce 编写的（用于销售人员）。为简单起见，可以说它只是一个包裹在表格周围的表格（最多 20 行代表不同的记录），显示一个带有 .dhcp 类的复选框字段和一个名为 .subnet_mask 的字段，该字段应根据复选框显示/隐藏。这有帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T16:15:39.280

我宁愿这样做

```
$('.dhcp').on('click', function() {
    $(this).nextAll('.subnet_mask').toggle();
}); 
```

然后，`.submask`每次单击`.submask``<tr>``.dhcp`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T16:14:54.240

我建议以下，尽管一旦我看到相关的 HTML，这个建议可能会改变：

```
$('.dhcp').click(
    function(){
        $(this).closest('tr').find('.subnet_mask').hide();
    }); 
```

这假定`.subnet_mask`每行只有一个元素（否则这将隐藏所有元素）以响应点击事件。您提到这取决于一个复选框，因此使用以下`change()`方法可能会更好：

```
$('.dhcp').change(
    function(){
        var that = $(this);
        if (that.is(':checked')) {
            that.closest('tr').find('.subnet_mask').hide();
        }
        else {
            that.closest('tr').find('.subnet_mask').show();
        }
    }); 
```

参考：

*   [`change()`](http://api.jquery.com/change/).
*   [`:checked`选择器](http://api.jquery.com/checked-selector/)。
*   [`click()`](http://api.jquery.com/click/).
*   [`closest()`](http://api.jquery.com/closest/).
*   [`find()`](http://api.jquery.com/find/).
*   [`hide()`](http://api.jquery.com/hide/).
*   [`is()`](http://api.jquery.com/is/).
*   [`show()`](http://api.jquery.com/show/).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T16:20:12.837

您使用 next 不正确。它应该更像这样：

```
$(function() {
    $('.dhcp').each(function() {
        $(this).click(function(){
            $(this).next('.subnet_mask').hide();
        });
    });
}); 
```

对于这种情况，我假设`.dhcp`并且`.subnet_mask`确实是兄弟姐妹，因为后者紧随前者之后。否则，`.nextAll()`可以代替`.next()`

根据以下几点进行编辑。

# c# - 内部抽象属性 - 自定义属性

> ID：13143204
> 
> 赞同：1
> 
> 时间：2012-10-30T16:11:28.170
> 
> 标签：c#, .net, reflection, attributes

当属性标记为内部时，我在访问抽象类中定义的属性的属性时遇到问题。这是一些示例代码：

```
[AttributeUsage(AttributeTargets.Property, AllowMultiple = false, Inherited = true)]
public class CustomAttribute : Attribute
{
}

public abstract class BaseModel
{
    [CustomAttribute]
    protected DateTimeOffset GenerationTime { get { return DateTimeOffset.Now; } }

    [CustomAttribute]
    public abstract string FirstName { get; }    // Attribute found in .NET 3.5

    [CustomAttribute]
    internal abstract string LastName { get; }   // Attribute not found in .NET 3.5
}

public class ConcreteModel : BaseModel
{
    public override string FirstName { get { return "Edsger"; } }

    internal override string LastName { get { return "Dijkstra"; } }

    [CustomAttribute]
    internal string MiddleName { get { return "Wybe"; } }
}

class Program
{
    static void Main(string[] args)
    {
        ConcreteModel model = new ConcreteModel();

        var props = model.GetType().GetProperties(BindingFlags.Public | BindingFlags.NonPublic | BindingFlags.Instance).ToList();
        List<PropertyInfo> propsFound = new List<PropertyInfo>(), propsNotFound = new List<PropertyInfo>();

        for (int i = props.Count - 1; i >= 0; i--)
        {
            var att = Attribute.GetCustomAttribute(props[i], typeof(CustomAttribute), true) as CustomAttribute;
            if (att != null)
                propsFound.Add(props[i]);
            else
                propsNotFound.Add(props[i]);
        }

        Console.WriteLine("Found:");
        foreach (var prop in propsFound)
        {
            Console.WriteLine(prop.Name + ": " + prop.GetValue(model, null));
        }

        Console.WriteLine(Environment.NewLine + "Not Found:");
        foreach (var prop in propsNotFound)
        {
            Console.WriteLine(prop.Name + ": " + prop.GetValue(model, null));
        }

        Console.ReadKey();
    }
} 
```

当我在 .NET 3.5 上运行此程序时，`LastName`找不到该属性的属性，输出如下：

![.NET 3.5 输出](../Images/0107d386d893e31a383368dbded524ab.png)

当我在 .NET 4.0 上运行该程序时，所有属性都正确找到。这是输出：

![.NET 4.0 输出](../Images/59280047c1f969d67b474a8a55bec8cb.png)

这仅仅是 .NET 3.5 中存在并在 .NET 4.0 中修复的错误吗？还是我缺少其他一些微妙之处，可以让我访问内部抽象属性的属性？

注意：只有在具体类中重写虚拟属性时，这似乎也是正确的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T17:07:08.840

我复制了您看到的内容并查看了 Microsoft Connect。没有报告的问题（公众）列出了 GetCustomAttribute 内部失败的问题。*但这并不意味着它没有在内部被发现和修复*。

您可以将此作为连接问题（[链接](http://connect.microsoft.com/VisualStudio)）发布，并查看是否有与 .Net 3.5 相关的热修复。

# android - 如何访问android中的后退按钮？

> ID：13143206
> 
> 赞同：1
> 
> 时间：2012-10-30T16:11:32.703
> 
> 标签：android, android-activity

您能否澄清一下，此示例的最佳做法是什么：

**Activity1**在 SQLite 上执行 INSERTS 并启动 Activity2。

**在 Activity2**上，用户单击 Back 按钮并返回到 Activity1。但是我不想进行 INSERT，而是想对 SQLite 上的数据进行 UPDATE。

**我如何控制该用户“回来”？**

**最佳做法是什么？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T16:15:55.323

假设在按钮上单击您开始活动 2

```
public static final int YOURCONSTANTNUMBER = 77;
   //Button Value
 Button second = (Button)findViewById(R.id.firstButton);
 second.setOnClickListner(this);

@Override
public void onClick(View v)
{
  switch(v.getId())
   {
      case R.id.btnSecondActivity:
      //Code for inserting data into database
      Intent secondactivity = new Intent(FirstActivity.this, SecondActivity.class);
      startActivity(secondactivity);
      break;
    }
} 
```

**在你的第二个活动中**

要控制后退按钮，请使用以下代码

```
 @Override
 public void onBackPressed()
 {      
//Code for update     
 } 
```

**编辑**

`startActivityForResult()`使用可以让您知道结果的方法调用您的第二个活动。

**在第一个活动中**

```
 Intent secondactivity = new Intent(FirstActivity.this, SecondActivity.class);
    startActivityForResult(secondactivity,YOURCONSTANTNUMBER); 
```

得到结果

```
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {  

 super.onActivityResult(requestCode, resultCode, data);   
 switch(requestCode)
 {
 case YOURCONSTANTNUMBER:
     // It will execute if you returning from second activity 
     //Update you database here
     }
 } 
```

**在你的第二个活动中**

调用这个方法是合适的`setResult(YOURCONSTANTNUMBER);`

希望能帮助到你

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T16:17:34.990

假设您想在 Activity1 中执行这两个数据库操作，请在此处考虑 startActivityForResult()：

[http://developer.android.com/reference/android/app/Activity.html#startActivityForResult(android.content.Intent, int)](http://developer.android.com/reference/android/app/Activity.html#startActivityForResult%28android.content.Intent,%20int%29)

# tridion - Tridion 2011 - 在编写自定义解析器时发布取消发布

> ID：13143216
> 
> 赞同：5
> 
> 时间：2012-10-30T16:11:59.753
> 
> 标签：tridion, publish, tridion-2011

需要了解您在以下方面的输入： Tridion 2011 中是否有一种方法可以在自定义解析器代码中发布或取消发布组件/页面/模板。我知道我们可以使用已解决的项目列表。（通过给一个CP等）。但是有没有办法从自定义解析器代码推送发布 Q 中的项目。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-30T16:26:42.903

您可以添加或删除任意数量的项目以成为现有包裹/交易的一部分。

如果您希望它成为发布队列中新条目的一部分，则事件系统似乎比解析器更合适。但是，如果您单独发布它们，您自动发布的项目将不会显示在“要发布的项目”屏幕中，因此您需要确定这是否是一件好事。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-30T16:55:47.403

彼得（和努诺）真的以最好的方式回答了你的问题。您应该使用解析器将页面或组件表示添加到包中，而不是进行新的发布事务。但是，您可以使用核心服务发布项目，因此您没有理由不能从解析器调用核心服务并以这种方式启动新的发布操作。

然而，这听起来不是一个好主意，也许你可以更新你的问题来解释你为什么需要这样做。

我曾经在模板中使用 PublishEngine 对象将项目添加到发布队列（请参阅[http://www.tridiondeveloper.com/the-story-of-sdl-tridion-2011-custom-resolver-and-the-allowwriteoperationsintemplates -attribute](http://www.tridiondeveloper.com/the-story-of-sdl-tridion-2011-custom-resolver-and-the-allowwriteoperationsintemplates-attribute) )，但自定义解析器和其他技术要优越得多。

# testing - 在没有 FPGA 的情况下测试我的 HDL 代码（Verilog/VHDL）？

> ID：13143217
> 
> 赞同：4
> 
> 时间：2012-10-30T16:12:01.523
> 
> 标签：testing, vhdl, verilog, register-transfer-level, hdl

我使用 vi 作为编辑器在 Verilog 中编写了一个模块，现在我想对其进行测试。如果我没有董事会，我有什么选择？我怎样才能给我的模块输入？我在哪里可以看到结果？顺便说一句，我可以访问 VCS。

谢谢你。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-30T16:21:15.090

您可能正在寻找模拟器。

首先，您必须编写一个测试平台，它环绕您的 Verilog 模块并驱动输入信号。该测试台还可以检查模块的输出是否与预期输出匹配。您可以在网上找到许多关于编写测试平台的教程。

然后在模拟器中“执行”该测试台和您的模块。我不熟悉所有选项，但我知道免费的 Xilinx ISE Web Pack 包含一个模拟器。Modelsim 是一个商业包。他们还提供免费的学生版。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-30T16:47:10.607

对于其他有同样问题的人，我在下面的链接中找到了一个测试平台教程，就像 Vortexfive 建议的那样：

[http://www.asic-world.com/verilog/art_testbench_writing.html](http://www.asic-world.com/verilog/art_testbench_writing.html)

# python - 如何避免使用 python 处理空标准输入？

> ID：13143218
> 
> 赞同：5
> 
> 时间：2012-10-30T16:12:01.103
> 
> 标签：python, stdin

在`sys.stdin.readline()`返回之前等待 EOF（或新行），所以如果我有控制台输入，则`readline()`等待用户输入。相反，如果没有要处理的内容，我想打印帮助并以错误退出，而不是等待用户输入。

原因：我正在寻找一个命令行行为类似于`grep`.

测试用例：

没有输入，也没有任何管道，打印帮助

```
$ argparse.py
argparse.py - prints arguments

echo $?            # UNIX
echo %ERRORLEVEL%  # WINDOWS
2 
```

命令行参数解析

```
$ argparse.py a b c 
0 a
1 b
2 c 
```

接受管道命令

```
$ ls | argparse.py
0 argparse.py
1 aFile.txt 
```

parseargs.py 清单：

```
# $Id: parseargs.py

import sys
import argparse

# Tried these too:
# import fileinput - blocks on no input
# import subprocess - requires calling program to be known

def usage():
    sys.stderr.write("{} - prints arguments".fomrat(sys.argv[0])
    sys.stderr.flush()
    sys.exit(2)

def print_me(count, msg):
    print '{}: {:>18} {}'.format(count, msg.strip(), map(ord,msg))

if __name__ == '__main__':
    USE_BUFFERED_INPUT = False
    # Case 1: Command line arguments  
    if len(sys.argv) > 1:
        for i, arg in enumerate(sys.argv[1:]):
            print_me( i, arg)
    elif USE_BUFFERED_INPUT:  # Note: Do not use processing buffered inputs  
        for i, arg in enumerate(sys.stdin):
            print_me( i, arg)
    else:
        i=0
        #####  Need to deterime if the sys.stdin is empty.
        #####  if READLINE_EMPTY:
        #####      usage()
        while True:
            arg = sys.stdin.readline() #Blocks if no input
            if not arg:
                break
            print_me( i, arg)
            i += 1
    sys.exit(0) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-30T16:21:46.227

`grep`可以按照它的方式工作，因为它有一个非可选参数：模式。例如

```
$ grep < /dev/zero
Usage: grep [OPTION]... PATTERN [FILE]...
Try `grep --help' for more information. 
```

即使标准输入上有无限的输入，grep 也没有得到所需的参数，因此抱怨。

如果您只想使用可选参数并在 stdin 是终端时出错，请查看[file.isatty()](http://docs.python.org/2/library/stdtypes.html?highlight=tty#file.isatty)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-30T16:27:10.120

```
import sys,os
print os.fstat(sys.stdin.fileno()).st_size > 0 
```

调用脚本

```
c:\py_exp>peek_stdin.py < peek_stdin.py
True

c:\py_exp>peek_stdin.py
False 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T16:48:37.213

您可能需要检查`getopt`模块。基本示例：

```
import getopt
import sys

def main(argv):
    try:
        opts, args = getopt.getopt(argv, "has:f:") # "has:f:" are the arguments 
    except getopt.GetoptError:
        print "print usage()"
        sys.exit(1)
    if not opts and not args:
        print "print usage()"
        sys.exit(1)

    print "args passed", opts, args
if __name__ == "__main__":
    main(sys.argv[1:])

~> python blabla.py
print usage()
~> python blabla.py -a arg
args passed [('-a', '')] ['arg']
~> python blabla.py -b as  ----> this fails because -b is not defined for getopt at second parameter
print usage() 
```

这个如何：

```
#!/usr/bin/env python
import getopt
import sys
import select

def main(argv):
    try:
        opts, args = getopt.getopt(argv, "has:f:") # "has:f:" are the arguments
    except getopt.GetoptError:
        print "print usage()"
        sys.exit(1)
    if not opts and not args:
        a, b, c = select.select([sys.stdin], [], [], 0.2)
        if a:
            itera = iter(a[0].readline, "")
            for line in itera:
                data = line.strip()
                print data
        else:
            print "print usage()"

    print "args passed", opts, args
if __name__ == "__main__":
    main(sys.argv[1:]) 
```

select.select 有助于检查是否有数据到来

```
:~> ./hebele.py 
print usage()
args passed [] []

:~> ping www.google.com | ./hebele.py 
PING www.google.com (173.194.67.105) 56(84) bytes of data.
64 bytes from blabla (173.194.67.105): icmp_seq=1 ttl=48 time=16.7 ms
64 bytes from blabla (173.194.67.105): icmp_seq=2 ttl=48 time=17.1 ms
64 bytes from blabla (173.194.67.105): icmp_seq=3 ttl=48 time=17.1 ms
^CTraceback (most recent call last):
  File "./hebele.py", line 25, in <module>
    main(sys.argv[1:])
  File "./hebele.py", line 17, in main
    for line in itera:
KeyboardInterrupt
:~> ls | ./hebele.py 
Aptana_Studio_3
Desktop
...
workspace
args passed [] []

:~> ./hebele.py -a bla
args passed [('-a', '')] ['bla']
:~> ./hebele.py sdfsdf sadf sdf
args passed [] ['sdfsdf', 'sadf', 'sdf'] 
```

# http - HTTP 404 重定向

> ID：13143219
> 
> 赞同：5
> 
> 时间：2012-10-30T16:12:02.340
> 
> 标签：http, seo

我们有一个多租户 Web 应用程序，客户可以在其中为其站点设置自定义域。

当请求无效域时，我们需要在不同域上显示错误页面。处理这个问题的正确方法是什么？我想也许向另一个站点上总是返回 404 的页面发出 303。这会让搜索引擎满意吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T14:42:10.797

我仍在尝试确定是否需要这样做。因为没有提供很多信息来说明为什么需要它。有许多主机可以让用户为自己创建场所。当发生任何错误时，它只是链接到本地​​ 404。那么为什么需要去另一个域进行 404 呢？作为设置带有域和子域的错误文档 404。所有这些都调用本地 404。它不只是主域的 404，而使子域毫无头绪。至于允许用户设置自定义域，我猜这是一个错字。你的意思是“自定义子域”。除非那是正确的，并且它以某种方式允许客户从您那里购买托管包。他们可以为此卖回给自己的客户。如果后者是正确的。您只需要正确设置他们的环境。

错误文档 404 /404.html

有一些更好的方法可以执行以下操作。只提供最快的。至于想要将 404 退回到另一个域，您仍然可以：

*   在 .htaccess 中：

    ```
    ErrorDocument 404 /404.html 
    ```

*   在本地 404.html 中使用：

    ```
    <meta http-equiv="refresh" content="0; url=http://example.com/"> 
    ```

请注意，您可以使用其他方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T15:01:02.683

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T19:38:16.503

为了让搜索引擎满意，通过域掩码让 404 看起来来自无效域。这将防止由于随着时间的推移重定向过多而导致声誉不佳。偶尔重定向到规范文档是很好的，因为这意味着您正在通过重定向到符合搜索结果的规范 IRI 来练习 DRY（不要重复自己）。在 404 页面上使用 meta noindex 来防止搜索引擎记住无效的自定义域 IRI。

# javascript - IE 中的全局变量异常

> ID：13143220
> 
> 赞同：5
> 
> 时间：2012-10-30T16:12:04.970
> 
> 标签：javascript, internet-explorer

> **可能重复：**
> [为什么 IE 核对 window.ABC 变量？](https://stackoverflow.com/questions/4606847/why-does-ie-nuke-window-abc-variables)

```
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
</head>
<body>
    <script>
        if(typeof q === "undefined"){
            window.q = {test: "test"};
        }
        alert("1="+q) 
    </script>
    <script>
        alert("2="+q)
        if(typeof q === "undefined"){
            var q = {};
        }
        alert("3="+q.test)
    </script>
    <script>
        alert("4="+q.test)
    </script>
</body> 
```

在 IE8 中，结果是

```
1=[object Object]
2=undefined
3=undefined
4=undefined 
```

第二个`script`似乎覆盖`q`了`window`.

`window.q = {test: "test"};`如果我将第一个的代码更改`script`为`q={test:"test"}`，结果将与其他浏览器相同。

这是IE中的错误吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T16:21:58.367

对我来说似乎是一个错误。在 IE 10 中，上述产生

```
1=[object Object]
2=[object Object]
3=test
4=test 
```

这与 Firefox 的行为相同。

编辑：另请参阅[https://stackoverflow.com/a/2635726/1641070](https://stackoverflow.com/a/2635726/1641070)和[为什么 IE 核对 window.ABC 变量？](https://stackoverflow.com/questions/4606847/why-does-ie-nuke-window-abc-variables)

# c# - 从 C# 中的文本文件执行代码行

> ID：13143225
> 
> 赞同：1
> 
> 时间：2012-10-30T16:12:10.330
> 
> 标签：c#, .net, file, text

我有一个文本文件，如下所示：

```
AssembleComponent Motor = new AssembleComponent;
AssembleComponent Shaft = new AssembleComponent;
......

Motor.cost = 100;
Motor.quantity = 100;
Shaft.cost = 10;
Shaft.quantity = 100;
...... 
```

我希望在 C# 中执行这些代码行，以便将这些 Motor.cost、Motor.quantity、Shaft.cost、Shaft.quantity 变量存储在内存中以供以后计算。

我能做些什么来实现这一目标？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T16:37:29.423

将其存储为 XML

```
<?xml version="1.0" encoding="UTF-8"?>
<Components>
    <Component name="Motor" cost="100" quantity="100" />
    <Component name="Shaft" cost="10" quantity="100" />
</Components> 
```

假设你有这个定义

```
public class AssembleComponent
{
    public decimal Cost { get; set; }
    public int Quantity { get; set; }
} 
```

像这样加载它

```
var components = new Dictionary<string, AssembleComponent>();
XDocument doc = XDocument.Load(@"C:\Users\Oli\Desktop\components.xml");
foreach (XElement el in doc.Root.Descendants()) {
    string name = el.Attribute("name").Value;
    decimal cost = Decimal.Parse(el.Attribute("cost").Value);
    int quantity = Int32.Parse(el.Attribute("quantity").Value);
    components.Add(name, new AssembleComponent{ 
                             Cost = cost, Quantity = quantity
                         });
} 
```

* * *

然后您可以像这样访问组件

```
AssembleComponent motor = components["Motor"];
AssembleComponent shaft = components["Shaft"]; 
```

注意：通过在运行时调用编译器来动态创建变量名并不是很有用，因为您需要在编译时（或者如果您愿意，可以在设计时）知道它们才能对它们做一些有用的事情。因此，我将组件添加到字典中。这是动态创建“变量”的好方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-30T16:13:38.673

您可以使用[`Microsoft.CSharp.CSharpCodeProvider`](http://msdn.microsoft.com/en-us/library/microsoft.csharp.csharpcodeprovider.aspx)即时编译代码。

具体来说，看看[CompileAssemblyFromFile](http://msdn.microsoft.com/en-us/library/system.codedom.compiler.codedomprovider.compileassemblyfromfile.aspx)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-30T16:15:39.327

如果只是关于数据，请不要使用平面文本文件，而是使用 XML。

您可以将 XML 反序列化为对象并对它们执行必要的操作。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-30T16:44:24.823

这是我过去使用的一些代码，尽管您可能需要根据您的特定需求对其进行调整，但它们可以满足您的*大部分需求。*简而言之，它执行以下操作：

*   在该命名空间中创建一个临时命名空间和一个公共静态方法。
*   将代码编译为内存中的程序集。
*   提取编译的方法并将其转换为委托。
*   执行委托。

那时它就像执行一个普通的静态方法，所以当你说你想要内存中的结果供以后使用时，你必须弄清楚它是如何工作的。

```
public void CompileAndExecute(string CodeBody)
{
    // Create the compile unit
    CodeCompileUnit ccu = CreateCode(CodeBody);

    // Compile the code 
    CompilerParameters comp_params = new CompilerParameters();
    comp_params.GenerateExecutable = false;
    comp_params.GenerateInMemory = true;
    comp_params.TreatWarningsAsErrors = true;
    comp_results = code_provider.CompileAssemblyFromDom(comp_params, ccu);

    // CHECK COMPILATION RESULTS
    if (!comp_results.Errors.HasErrors)
    {
        Type output_class_type = comp_results.CompiledAssembly.GetType("TestNamespace.TestClass");

        if (output_class_type != null)    
        {    
            MethodInfo compiled_method = output_class_type.GetMethod("TestMethod", BindingFlags.Static | BindingFlags.Public);    
            if (compiled_method != null)    
            {    
                Delgate created_delegate = Delegate.CreateDelegate(typeof(System.Windows.Forms.MethodInvoker), compiled_method);
                if (created_delegate != null)
                {
                    // Run the code
                    created_delegate.DynamicInvoke();
                }
            }
        }
    }
    else
    {
        foreach (CompilerError error in comp_results.Errors)
        {
            // report the error
        }
    }
}

public CodeCompileUnit CreateCode(string CodeBody)
{
    CodeNamespace code_namespace = new CodeNamespace("TestNamespace");

    // add the class to the namespace, add using statements
    CodeTypeDeclaration code_class = new CodeTypeDeclaration("TestClass");
    code_namespace.Types.Add(code_class);
    code_namespace.Imports.Add(new CodeNamespaceImport("System"));

    // set function details
    CodeMemberMethod method = new CodeMemberMethod();
    method.Attributes = MemberAttributes.Public | MemberAttributes.Static;
    method.ReturnType = new CodeTypeReference(typeof(void));
    method.Name = "TestMethod";

    // add the user typed code
    method.Statements.Add(new CodeSnippetExpression(CodeBody));

    // add the method to the class
    code_class.Members.Add(method);

    // create a CodeCompileUnit to pass to our compiler
    CodeCompileUnit ccu = new CodeCompileUnit();
    ccu.Namespaces.Add(code_namespace);

    return ccu;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-30T16:15:34.820

您有两个主要选择：

1.  展开文本直到它成为有效的 C# 代码，编译并执行它
2.  解析它并自己执行它（即解释它）。

# php - 我不能在 PHP 构造函数中使用现有的类吗？

> ID：13143227
> 
> 赞同：0
> 
> 时间：2012-10-30T16:12:17.223
> 
> 标签：php, methods, constructor, mysqli

我对 OOP 有点陌生，并尝试使用类转换我现有的很多代码。我的第一堂课是“工作”，我的主要脚本调用：

```
##
## New JOB Instance begins
##
$job = new Job();
$job->validate($job_status,$ber_order_number);
$job->sID($job->ExistingOrNew());
$job->parseJobInfo( $msg_blocks['Job Information']);
$job->parseLocationInfo( $msg_blocks['Location Address']);
$job->parseContactInfo( $msg_blocks['Contact Information']); 
```

在我的 job.class.php 中，我尝试使用构造函数打开连接并为我的数据库建立链接，$_dblink 被定义为私有：

```
function __construct() {
    $_dblink = new mysqli( $this->_server, $this->_user, $this->_pass, "jobs" );        // connection to the jobs database
    if ( $_dblink->connect_error ) {
        die( 'Connect Error (' . $_dblink->connect_errno . ') ' . $_dblink->connect_error );
    }
} 
```

一旦我点击“ExistingOrNew”方法，我就会收到**致命错误：调用非对象上的成员函数 query()**

```
function ExistingOrNew( ) {
    $q = "SELECT id FROM " . jJOBS . " WHERE order_number = '" . $this->order_number . "'";
    #
    echo "<pre>";
    print_r($this);
    echo "</pre>";
    #
    if ( $r = $this->_dblink->query( $q )) {
        while ( $row = $r->fetch_assoc( )) {
            $id = $row['id'];
        }
        $r->free( );
    }
    if ( empty ( $id )) {
        $id = $this->Create( );
    }
    return $id;
} 
```

我不明白为什么我的私有 $_dblink 变量没有延续到后续方法。我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T16:14:46.583

您必须使链接成为类成员，以便稍后与`$this->`运算符一起使用。

```
function __construct() {
    $this=>_dblink = new mysqli( $this->_server, $this->_user, $this->_pass, "jobs" );        // connection to the jobs database
    if ( $this->_dblink->connect_error ) {
        die( 'Connect Error (' . $_dblink->connect_errno . ') ' . $_dblink->connect_error );
    }
} 
```

# php - 没有'echo'命令的日期是Echoing - php

> ID：13143230
> 
> 赞同：0
> 
> 时间：2012-10-30T16:12:23.620
> 
> 标签：php

我有一个每年更新的表单，因此用户输入日期和其他信息，然后提交存储在数据库中的表单。当他们一年后回来时，他们会做同样的事情来覆盖旧记录，问题是当他们回来时，旧日期会被回显，这是不应该发生的。所有其他字段都是空白的，这应该发生。我不是要求在代码中回显日期，但它仍然是。

定义日期下拉的代码

```
// parameters: $fname - main name of field
//             $date - actual date value from database
//             $beginYear - first value in year list
//             $endYear - last value in year list
//     return: none
function make_date_pulldown($fname, $date, $beginYear, $endYear)
{
  // read the date and break it up into $Year, $Month and $Day
  // so that we can set the "SELECTED" in the option list
  if ($date == ""){
    // set some default values to be safe
$Year = 0;
$Month = 0;
$Day = 0;
} else {
$Year = (int) substr($date,0,4);
$Month = (int) substr($date,5,2);
$Day = (int) substr($date,8,2);
}

// need to build a table around these guys so that there won't
// be any word wrap... it's going to be a 1 row by 5 cols.
echo "<table border=0 cellspacing=0 cellpadding=0>\n";
echo "<tr>\n";

// build month list
echo "  <td><font class=bluetext face=verdana,arial size=-2>\n";
echo "  <center>Month<br>\n";
echo "<select name='month_$fname'>\n";
echo "  <option value='00'></option>\n";
for ($i=1;$i<=12;$i++){
printf ("  <option value='%02d'",$i);
if ($i == $Month) {
  printf (" SELECTED");
}
printf (">%02d</option>\n",$i);
}
echo "</select>\n";
echo "  </center>\n";
echo "  </td>\n";

echo "  <td><font class=bluetext face=verdana,arial size=-2>\n";
echo "/";
echo "  </td>\n";

// build day list
echo "  <td><font class=bluetext face=verdana,arial size=-2>\n";
echo "  <center>Day<br>\n";
echo "<select name='day_$fname'>\n";
echo "  <option value='00'></option>\n";
for ($i=1;$i<=31;$i++){
printf ("  <option value='%02d'",$i);
if ($i == $Day) {
  printf (" SELECTED");
}
printf (">%02d</option>\n",$i);
}
echo "</select>\n";
echo "  </center>\n";
echo "  </td>\n";

echo "  <td><font class=bluetext face=verdana,arial size=-2>\n";
echo "/";
echo "  </td>\n";

// build year list
echo "  <td><font class=bluetext face=verdana,arial size=-2>\n";
echo "  <center>Year<br>\n";
echo "<select name='year_$fname'>\n";
echo "  <option value='0000'></option>\n";
for ($i=$beginYear;$i<=$endYear;$i++){
printf ("  <option value='%d'",$i);
if ($i == $Year) {
  printf (" SELECTED");
}
printf (">%d</option>\n",$i);
}
echo "</select>\n";
echo "  </center>\n";
echo "  </td>\n";

echo "</tr>\n";
echo "</table>\n";
} 
```

网站上 PHP 表单的代码

```
<u>Date Of Submittal</u><br>
<?php
$startYear  =   date("Y")-1;
$endYear    =   date("Y")+1;
make_date_pulldown("submitdate", $submitdate, $startYear, $endYear);
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T20:33:05.000

想通了，在调用数据库表的 get_() 函数中，我正在读取 submitdate 的行，它正在根据该命令和 make_date_pulldown 函数提取和显示日期。

这是该功能的样子（显然是精简了）：

```
<?
function get_submit($id, &$submitdate)
{                                                             
$query = "select * from submit where id = $id";
$result = mysql_query($query);                              
if ($result) {                                              
$total_rows = mysql_numrows($result);                     
} else { $total_rows = 0; }                                 
if ($total_rows > 0) {                                      
$submitdate = trim(mysql_result($result, "", "submitdate"));
} else {
$submitdate = "";
$found = 1;
}            
}              
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T16:24:29.317

看起来你想创建一个基于年份的下拉菜单......

```
$date = new DateTime();

//Years
echo makeSelect($date->format("Y")-1, $date->format("Y")+1,$date->format("Y"));

//Month
echo makeSelect(1, 12,$date->format("m"));

//Day
echo makeSelect(1, $date->format("t"),$date->format("d")); 
```

使用的功能

```
function makeSelect($start, $end, $default = null) {
    $content = "<select>";
    $range = range($start, $end);
    $selected = "";
    foreach ( $range as $value ) {
        $selected = ($default == $value) ? "selected" : null;
        $content .= sprintf('<option value="%s" %s>%1$s</option>', $value, $selected);
    }
    $content .= "</select>";
    return $content;
} 
```

# c - 程序不会停止读取文件

> ID：13143232
> 
> 赞同：0
> 
> 时间：2012-10-30T16:12:27.467
> 
> 标签：c, linux, file, reverse

我正在尝试编写一个可以反转文件内容的程序。因此，给输入文件的内容为“abc”，它应该创建一个内容为“cba”的文件。

不幸的是，它不起作用，我不明白为什么。

你们能帮帮我吗？谢谢

编辑：我忘了提到这是一项学校作业 - 我们必须使用像 lseek 和 open 这样的功能 - 请不要让我认为我应该使用 fgetc 和其他功能 :)

```
#include <stdio.h>
#include <sys/types.h>
#include <sys/stat.h>
#include <fcntl.h>
#include <unistd.h>

void reverse_file(char * in, char * out)
{
    int infile, outfile;
    infile = open(in, O_RDONLY);
    outfile = open(out, O_WRONLY);

    char buffer;
    char end = EOF;
    write(outfile, &end, sizeof(char));
    do
    {
        // seek to the beginning of a file

        read(infile, &buffer, sizeof(char));

        // printf("the code of a character %d\n", buffer); // returns 10 instead of EOF

        lseek(outfile, 0, SEEK_SET);
        write(outfile, &buffer, sizeof(char));

    } while (buffer != EOF);
    close(outfile);
    close(infile);

}

int main()
{
    reverse_file("tt", "testoutput");

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T16:14:29.550

`read`返回它读取的字节数。要在到达文件末尾时停止循环，请将条件更改为 read 的返回值。

```
int read_ret;
do
{
    // seek to the beginning of a file

    read_ret = read(infile, &buffer, sizeof(char));

    // printf("the code of a character %d\n", buffer); // returns 10 instead of EOF

    lseek(outfile, 0, SEEK_SET);
    write(outfile, &buffer, sizeof(char));

} while (read_ret > 0); 
```

当读取到达文件末尾并返回零时，它不会设置 *buffer。这就是为什么你的循环永远不会停止的原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T16:19:12.213

您需要阅读以读取**整个**输入文件，然后将其写出。不要试图逐个字符地进行，也不要使用 lseek。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-30T16:41:48.100

您当前的代码（除了对文件结尾的测试错误的事实之外）将创建一个只有一个字符的文件，因为会`write`覆盖文件中当前位置的数据（除非它在末尾，它会在其中追加）。实际上，要反转文件，您应该从头开始阅读它。

```
struct stat instat;
int pos;

fstat(infile, &instat);
pos = instat.st_size - 1;
do
{
    // seek backward in the input file, starting from the end
    lseek(infile, SEEK_SET, pos);
    read(infile, &buffer, sizeof(char));
    write(outfile, &buffer, sizeof(char));

} while (pos-- > 0); 
```

（通过 char 读取 char 对 unix*和系统调用**非常低效，因此作为第二步，您应该考虑使用 C 原语（, , ），或者使用 unix 系统调用进行一些缓冲读取和写入。`read``write``fopen``fread``fwrite`*）

看：

*   [打开](https://www.kernel.org/doc/man-pages/online/pages/man2/open.2.html)
*   [读](https://www.kernel.org/doc/man-pages/online/pages/man2/read.2.html)
*   [写](https://www.kernel.org/doc/man-pages/online/pages/man2/write.2.html)
*   [搜索](https://www.kernel.org/doc/man-pages/online/pages/man2/lseek.2.html)
*   [fstat](https://www.kernel.org/doc/man-pages/online/pages/man2/fstat.2.html)

# java - Linux 上的 Java Applet 无法获得权限

> ID：13143239
> 
> 赞同：0
> 
> 时间：2012-10-30T16:12:53.047
> 
> 标签：java, permissions

我正在上在线课程，我偶尔会挂断电话，因为课程是半以 Windows 为中心的。目前我有一个 java 小程序，我正在尝试在其中播放音频剪辑。我正在使用 Idea Intellij，并将音频文件放在与类文件相同的位置。我还更新了idea用来运行小程序的策略文件，但无论我做什么，它似乎都找不到音频文件。我有 75% 的把握这是我在政策文件中没有弄清楚的事情（啊！），但我不知道那是什么。我将粘贴代码片段、我的策略文件和尝试运行它时的一些输出。请帮助 - 这是我第二次因为 linux 特定的差异而陷入困境。

为格式化打嗝道歉...

```
 public class MyApplet extends JApplet implements ActionListener
    {
        JButton play, stop;
        AudioClip audioClip;
        File myAudioFile;

        public void init()
        {
            play = new JButton("Play");
            play.addActionListener(this);

            stop = new JButton("Stop");
            stop.addActionListener(this
    [...took out unnecessary stuff...]
            System.out.println("Codebase is: " + getCodeBase());
            myAudioFile = new File(getCodeBase().toString()+"desktop-login.ogg");
            if(myAudioFile.exists()) {
                audioClip = getAudioClip(getCodeBase(), "desktop-login.ogg");
            }
            else {
                System.out.println("Failed to find file:"+ audioClip);
            }

        }
[...took out unnecessary stuff...]
    //------------------POLICY FILE CONTENTS--
    grant {
      permission java.security.AllPermission;
      permission java.net.SocketPermission "*", "accept, connect, listen, resolve";
    };

    grant codeBase "file:/home/mylogin/IdeaProjects/3RD/Lesson7/soundPlay/out/production/soundPlay/*" {
      permission java.util.PropertyPermission "user.home", "read";
    }; 

    //--------output (scrubbed a bit - it's failing at the audio clip play part because the audioClip object is null): 
    Codebase is: file:/home/mylogin/IdeaProjects/3RD/Lesson7/soundPlay/out/production/soundPlay/
    Failed to find file:null
    Exception in thread "AWT-EventQueue-1" java.lang.NullPointerException
        at MyApplet.actionPerformed(MyApplet.java:48)
        at javax.swing.AbstractButton.fireActionPerformed(AbstractButton.java:1995) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T16:22:12.337

使用这样的文件路径并尝试

```
file:////home/mylogin/IdeaProjects/3RD/Lesson7/soundPlay/out/production/soundPlay/ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T06:58:28.760

好吧，我觉得很傻。事实证明，尝试在 linux 上的本机 java 中加载 .ogg 文件是行不通的。我原以为它会使用基于 Linux 的编解码器，但我错了。它将使用 java 可以本地解码的内容 - 例如 .wav 文件。当我切换到 .wav 文件时，一切都很开心并开始工作。嘘！

# aptana - 将 Aptana3 的自动括号完成更改为 { ... } 而不是 {...}

> ID：13143246
> 
> 赞同：5
> 
> 时间：2012-10-30T16:13:11.827
> 
> 标签：aptana, aptana3

我在 Ruby 中编程，其中约定通常规定花括号周围的间距，如下所示：

```
grades = { Rob: 82, Billy: 58 } 
```

我一直在尝试让 Aptana 更改它的自动括号完成功能，以便在我键入“{”时插入一个空格，这样我的光标就位于两个已经有空格填充的大括号中间，如下所示：{ | }。

我已经编辑了我的 ruby​​ ruble smart_typing_pairs 变量

smart_typing_pairs['source.ruby'] = ['"', '"', '|', '|', '(', ')', **'{', '}'** , '[', ']', "'", "'", ' `', '`']

至

smart_typing_pairs['source.ruby'] = ['"', '"', '|', '|', '(', ')', **'{', ' }'** , '[', ']', "'", "'", ' `', '`']

（注意第二个}中的空格）

但这只是破坏了大括号的括号完成。我似乎也无法在 Aptana 中找到自动字符串替换功能。

谁能给我任何提示？谢谢！

# php - 如何在 php-engine 上使用 nodejs+socket.io

> ID：13143252
> 
> 赞同：-2
> 
> 时间：2012-10-30T16:13:22.650
> 
> 标签：php, node.js, socket.io

我不明白如何将 nodejs+socket.io 用于我的 php 引擎。

1.  我有 php 引擎。
2.  我有安装了 nodejs+socket.io 的服务器
3.  我不知道如何使用隐私政策从服务器 socket.io 上的 php-script 发送事件（json - pref.等）。

或者，如何使用这个？如果这不是 php - 那么我如何获取用户名/用户名/图像？

我在互联网上看到的所有脚本 - 没有安全性，任何人都不能使用他的用户名或用户 ID（只需更改 js），没有人不说如何保护它。

也许你可以帮助我并告诉我如何做到这一点 - 使用示例代码:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T16:32:11.213

关于安全层，您应该实现自己的算法。我不能给你看一个例子，因为它取决于你的架构。

恕我直言，我建议在[PHP](http://php.net/manual/en/book.stomp.php)和[nodeJS](https://github.com/benjaminws/stomp-js)上使用[Stomp](http://stomp.github.com/implementations.html)。它很简单，可以处理各种各样的消息（最常见的是 JSON-body-Messages）。

要扩展此解决方案，我还建议使用[activeMQ](http://activemq.apache.org/stomp.html)。ActiveMQ 是一个消息代理，它可以帮助您实现安全层，因为它提供了对 STOMP 的 SSL 支持和[用户名/密码](http://activemq.apache.org/security.html)选项。

该解决方案已在现实生活中进行了测试，可处理约 6k TPS。

干杯!

# javascript - 在其他菜单关闭时单击某些菜单

> ID：13143256
> 
> 赞同：0
> 
> 时间：2012-10-30T16:13:38.457
> 
> 标签：javascript, jquery, menu

```
<ul>
  <li>Menu 1
    <ul>
      <li>submenu 1</li>
      <li>submenu 2
        <ul>
          submenu 3
          <li>submenu 4</li>
        </ul>
      </li>
    </ul> Menu 2
    <ul>
      <li>submenu 1</li>
      <li>submenu 2
        <ul>
          submenu 3
          <li>submenu 4</li>
        </ul>
      </li>
    </ul>
  <li>
</ul> 
```

脚本：

```
 if(!Array.indexOf){
        Array.prototype.indexOf = function(obj){
            for(var i=0; i<this.length; i++){
                if(this[i]==obj){
                    return i;
                }
            }
            return -1;
        }
    }
    function categoryAdd(id) {
        var ids = new String($.cookie('expanded')).split(',');
        if (ids.indexOf(id) == -1){
            ids.push(id);
            $.cookie('expanded', ids.join(','), {path: '/'});
        }
    }
    function categoryRemove(id) {
        var ids = new String($.cookie('expanded')).split(',');

        // bug #7654 fixed
        while (ids.indexOf(id) != -1) {
            ids.splice(ids.indexOf(id), 1);
        }
         $.cookie('expanded', ids.join(','), {path: '/'});
    }

    $('.category_button').click(function(e){

        var change = '<?= $change; ?>';
        var current = $(this).attr('current');
        if(change == 'on')
        {

            var ids = new String($.cookie('expanded')).split(',');
            var exceptions = ''
            for(var i = 0; i < ids.length; i++)
            {
                id = ids[i];
                current = $('category_' + ids[i]).attr('current');
                if($('category_' + ids[i]).css('display') != 'none')
                {
                    if(id != $(this).attr('id').split('-')[1] && $(this).parent().parent().attr('id').split('-')[1] == 'undefined')
                    {
                        hideAll(id, '256');
                    }
                }

            }

        }

function hideAll(id, except)
{
    if(id == except){return;}
    var button = $('#image-'+ id);
    button.attr('src', 'catalog/view/theme/default/image/btn-expand.png');
    $('#category_' + id).hide(200);

}

function showMenu(id)
{
    var button = $('#image-'+ id);
    button.attr('src', 'catalog/view/theme/default/image/btn-collapse.png');
$('#category_' + id).show(200);
}

function toggleMenu(e,id, current)
{
        if(current == '1')
        {
            e.preventDefault()
            var button = $('#image-'+ id);
            if ($('#category_'+id).css('display') == 'none'){
                button.attr('src', 'catalog/view/theme/default/image/btn-collapse.png');
                categoryAdd(id);
            } else {
                button.attr('src', 'catalog/view/theme/default/image/btn-expand.png');
                categoryRemove(id);
            }
                $('#category_'+id).toggle(200);
        }
        else
        {

            var button = $('#image-'+ id);
            if ($('#category_'+id).css('display') == 'none'){
                categoryAdd(id);
            } else {
                categoryRemove(id);
            }

        }

} 
```

如何制作一个菜单，我单击某个项目并打开它，而其他打开的菜单`<ul>`标签将关闭，例如`display: none`，但父菜单也不需要关闭，只有同一级别的菜单，而不是父菜单，还有父母的兄弟菜单，但不是他的父母，我想你明白我在说什么......我真的不知道该怎么做，我在它工作不好之前做了​​什么......也许它在这里有某种递归？但是如何？

有任何想法吗？

更新：

所以现在我们有 2 个函数可以从 cookie 中添加或删除已打开/关闭的菜单列表，

例如，在 cookie 中，我们保存 id 为：100、200、300、250、160 的菜单

那么我怎样才能在一个循环中关闭所有具有该 ID 的菜单，而不是我们现在单击的当前菜单，而不是他的父级......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T16:29:10.320

You would probably be better off googling some different CSS menus and what not. However given your basic HTML there (provided its cleaned up, your missing a closing li tag or two) you could use the following:

# [jsFiddle](http://jsfiddle.net/SpYk3/QapjP/)

> Script [[Updated to show how i support the sub tags on the fiddle as well, keep in mind, you can edit this code to do as you please, ffor more information on how each part works, please see [jQuery API](http://api.jquery.com/)]]

```
$("ul > li > ul").hide();

$("ul > li").click(function(e) {
    e.stopPropagation();

    $(this).children().toggle(function(e) {
        if (!$(this).is(":visible")) {
            $(this).find("ul").hide();
            $(this).find("sub").show();
        };
    });

    $(this).siblings().each(function(i) {
        if ($(this).children("ul").length > 0) {
            if ($(this).children("ul").css("display").toLowerCase() == "block") {
                $(this).children().toggle(function(e) {
                    if (!$(this).is(":visible")) {
                        $(this).find("ul").hide();
                        $(this).find("sub").show();
                    };
                });
            }
        }
    });
});

$("ul > li").each(function(i) {
    if ($(this).children("ul").length > 0) {
        $(this).css("cursor", "pointer").prepend($("<sub />").text("[has submenu]"));
    }
    else {
         $(this).css("cursor", "default");
    };
}); 
```

> Clean HTML

```
<ul>
    <li>Menu 1
        <ul>
            <li>submenu 1</li>
            <li>submenu 2
                <ul>
                    <li>submenu 3</li>
                    <li>submenu 4</li>
                </ul>
            </li>
        </ul>
    </li>
    <li>Menu 2
        <ul>
            <li>submenu 1</li>
            <li>submenu 2
                <ul>
                    <li>submenu 3</li>
                    <li>submenu 4
                        <ul>
                            <li>subsubmenu 1</li>
                            <li>subsubmenu 2</li>
                        </ul>
                    </li>
                </ul>
            </li>
        </ul>
    <li>
</ul> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T16:17:23.217

这可以使用 javascript/jquery 插件来完成，您只需进行一些谷歌搜索即可找到一个。您只需要根据您的规范调整插件。一旦您找到插件并尝试使用它，那么如果您需要帮助，您可以回到这里。当你有一些可靠的代码来表明你已经耗尽了你的才能时，它会显示出更多的努力。研究其中的一些，如果我理解正确的话，我想你想要一个手风琴菜单。[jQuery](http://www.1stwebdesigner.com/freebies/jquery-accordion-menus-tutorials/)

# php - mysql 视图增加了 2 而不是 1

> ID：13143257
> 
> 赞同：0
> 
> 时间：2012-10-30T16:13:43.407
> 
> 标签：php, mysql, image, cloudflare

我拥有一个图像托管网站，我使用 php 和 mysql 捕获图像视图。

我使用以下代码来计算视图。

```
include_once'mysql.php';
$result = mysql_query("UPDATE DB SET views=(views+1) WHERE ID='$id'") or die;
mysql_close($con); 
```

mysql`use P_Connect`函数连接。

视图是`mediumint(9)`类型字段。

我注意到视图增加了 2 而不是 1。任何人都可以说出问题所在并提供解决方案。

我也使用**CloudFlare**缓存页面，可能是它造成的，如果这是错误，有人可以提供代码绕过他们的视图..

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T12:07:29.380

这段代码看起来是正确的。**可能由于其他代码影响，此查询运行了两次，**因此请 **在退出时打印此查询。并尝试手动运行**，并检查它是否正常工作意味着其他代码存在问题。

谢谢

# jquery - 如何在 SlickGrid 中启用可排序的列

> ID：13143259
> 
> 赞同：0
> 
> 时间：2012-10-30T16:13:50.293
> 
> 标签：jquery, slickgrid

我正在努力让 SlickGrid 数据表运行，但最常用的功能，即移动列的能力，让我望而却步。我假设我必须删除上面写着的选项`enableColumnReorder: false`（当然要确保选项末尾没有尾随逗号），但是当我这样做时，网格根本无法运行。我已经将它与 SlickGrid 自己的演示示例进行了比较，以尝试查看我是否缺少某些东西，但这一切似乎都是合法的。那里的任何人都可以告诉我我缺少什么脚本和/或选项吗？

这是我的例子：[http ://www.tomryandesign.com/dev/datagrid/custom2/](http://www.tomryandesign.com/dev/datagrid/custom2/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T23:03:18.587

我发现问题出在我使用的 jQuery UI 版本上。SlickGrid 显然与 jQuery UI 1.9 不兼容。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-02T09:47:35.173

您是否尝试`sortable: true`在列设置对象中？

＆然后为您编写有关排序事物的自定义逻辑。前任。

```
gridObj.onSort = function(e, args) {
 gridData.sort(comparer);
 gridObj.invalidate(); 
}

function comparer(a,b) {
  //returns your custom logic to sorting the rows.
} 
```

# c# - 如何在投影的实体框架对象中包含复杂的实体字段？

> ID：13143268
> 
> 赞同：3
> 
> 时间：2012-10-30T16:14:38.920
> 
> 标签：c#, linq, entity-framework, repository, repository-pattern

我经常使用该`System.Data.Entity.DbExtensions` `Include()`方法将复杂的实体字段包含在我的存储库的查询结果中。但是，当我将实体投影到新类中时，我似乎失去了包含的复杂实体字段的这种“具体化”。例如，假设我想`Event`从我的仓库中返回一个对象，并且能够访问复杂的实体字段`Assessment`：

```
public class EventRepository {
...
    public IList<Event> GetEvents() {
        using (var context = new MyDatabaseContext()) {
            return context.Events
                .Include(evnt => evnt.ActualAssessment)
                .ToList();
        }
    }
...
} 
```

然后我可以顺利运行以下代码，因为`Include`我在上面使用了：

```
var repoEvents = new EventRepository();
var events = repoEvents.GetEvents();
Console.WriteLine(events[0].ActualAssessment.AssessmentDate.ToString()); 
```

但是假设我现在想将 s 投影到带有一些额外信息`Event`的包装对象中，如下所示：`ExtendedEvent`

```
public class EventRepository {
...
    public IList<ExtendedEvent> GetExtendedEvents() {
        using (var context = new MyDatabaseContext()) {
            return context.Events
                .Include(evnt => evnt.ActualAssessment)
                .Select(evnt => new {
                    TheEvent = evnt,
                    SomeExtraData = 123
                })
                .ToList()
                .Select(evntInfo => {
                    return new ExtendedEvent {
                        TheEvent = evntInfo.TheEvent,
                        SomeExtraData = evntInfo.SomeExtraData
                    };
                })
                .ToList();
        }
    }
...
} 
```

我现在尝试运行这段代码：

```
var repoEvents = new EventRepository();
var extendedEvents = repoEvents.GetExtendedEvents();
Console.WriteLine(extendedEvents[0].TheEvent.ActualAssessment.AssessmentDate.ToString()); 
```

这给了我错误“ObjectContext 实例已被释放，不能再用于需要连接的操作。” -`ActualAssessment`尽管我使用了 ，但它并没有被预先加载`Include`，显然是因为我将它投影到一个新的包装器对象中。我怎样才能使`ActualAssessment`被包括在内？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T16:28:55.993

是的，`Include`在预测中被忽略。您可以尝试将相关导航属性的一部分投影到匿名对象中：

```
public IList<ExtendedEvent> GetExtendedEvents() {
    using (var context = new MyDatabaseContext()) {
        return context.Events
            .Select(evnt => new {
                TheEvent = evnt,
                SomeExtraData = 123,
                ActualAssessment = evnt.ActualAssessment
            })
            .ToList()
            .Select(evntInfo => {
                return new ExtendedEvent {
                    TheEvent = evntInfo.TheEvent,
                    SomeExtraData = evntInfo.SomeExtraData
                };
            })
            .ToList();
    }
} 
```

将`ActualAssessment`附加到上下文中，`TheEvent.ActualAssessment` **如果出现自动关系修复将填充**

*   您没有禁用更改跟踪
*   关系不是多对多的

作为旁注：您可以使用`AsEnumerable()`而不是第一个`ToList()`来避免创建匿名对象列表的不必要开销。

**编辑**

对于多对多关系或在禁用更改跟踪的情况下，您必须在数据库查询具体化后设置导航属性，例如：

```
 .Select(evntInfo => {
                evntInfo.TheEvent.ActualAssessment = evntInfo.ActualAssessment;
                return new ExtendedEvent {
                    TheEvent = evntInfo.TheEvent,
                    SomeExtraData = evntInfo.SomeExtraData
                };
            }) 
```

# asp.net - 解析谷歌地图方向 XML 请求返 回 0 距离

> ID：13143269
> 
> 赞同：1
> 
> 时间：2012-10-30T16:14:39.903
> 
> 标签：asp.net, google-maps

我正在使用 XML 请求在谷歌地图（C#、ASP.NET）中获取行驶距离，我的示例请求：

```
string strURL = "http://maps.google.com/maps/api/directions/xml?origin=" + Session["UserLat"].ToString() + "," + Session["UserLon"].ToString() + "&destination=" + tmpList[d].X + "," + tmpList[d].Y + "&mode=driving&sensor=false";
List<float> distances = new List<float>();
distances.Clear();
HttpWebRequest wRequest = (HttpWebRequest)WebRequest.Create(strURL);
//Request.Headers.Add("Man", "GET " + strURL);
HttpWebResponse wResponse = (HttpWebResponse)wRequest.GetResponse();
if (wRequest.HaveResponse)
{
    if (wResponse.StatusCode == HttpStatusCode.OK)
    {
        StreamHandler = new System.IO.StreamReader(wResponse.GetResponseStream());
        xmlDoc.LoadXml(StreamHandler.ReadToEnd());
        Response.Write(xmlDoc.GetElementsByTagName("distance").Count.ToString() + ",");
        for (int w = 0; w < xmlDoc.GetElementsByTagName("distance").Count; w++)
        {
                                                            distances.Add(float.Parse(xmlDoc.GetElementsByTagName("distance")[w].ChildNodes[0].InnerText));

        }
    }
} 
```

似乎有些请求返回 0 距离，当然每次我运行我的代码都会得到不同的结果，我在地图上有几个点（大约 19 个点），几乎有一半返回 0 距离，我要排序我的基于距离的项目，但是当我得到 0 距离时，我什么也做不了！我在循环中获取距离，这里出了什么问题？

# c - C 中的 FIFO（命名管道）

> ID：13143279
> 
> 赞同：1
> 
> 时间：2012-10-30T16:15:10.777
> 
> 标签：c, named-pipes, fifo, mkfifo

尝试`mkfifo()`在当前目录中时出现权限错误。我绝对有权在这里创建文件。知道问题可能是什么吗？

```
char dir[FILENAME_MAX];
getcwd(dir, sizeof(dir));

for(i = 0; i<num_nodes; i++)
{
    char path[FILENAME_MAX];
    sprintf(path, "%s/%d",dir, i);
    printf("%s\n", path);
    fifoArray[i] = mkfifo(path, O_WRONLY);
    if(fifoArray[i] < 0)
    {
         printf("Couldn't create fifo\n");
         perror(NULL);
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T17:36:48.603

您正在使用`oflag`not a创建它`mode_t`。

[mkfifo采用](http://linux.die.net/man/3/mkfifo)[mode_t](http://sourceware.org/gdb/onlinedocs/gdb/mode_005ft-Values.html)类型的第二个参数

换句话说，例如：`0666`. 您正在尝试`oflag`按照 中定义的方式喂它`fcntl.h`，这通常是这样的：

```
#define O_RDONLY             00
#define O_WRONLY             01
#define O_RDWR               02 
```

因此，`Invalid argument`。这是打开fifo的一种方法：

```
char * myfifo = "/tmp/myfifo";
mkfifo(myfifo, 0666);

if((fd = open(myfifo, O_RDONLY | O_NONBLOCK)) < 0){
  printf("Couldn't open the FIFO for reading!\n");
  return 0;
}
else {
   //do stuff with the fifo 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T16:21:06.570

如果您依靠 perror 的输出来告诉您遇到了权限错误，那么您很可能弄错了。对 printf 的调用很可能会更改 errno，因此该信息是虚假的。不要调用 printf。写吧：

```
perror( path ); 
```

并查看错误消息是否更改。

# extjs - ExtJS 动态创建 RowExpander

> ID：13143281
> 
> 赞同：1
> 
> 时间：2012-10-30T16:15:23.773
> 
> 标签：extjs, grid, expander

我想用rowexpander制作一个网格。我有一个模板和一个rowexpander，但我不想使用gridpanel 的store 来加载rowexpander 的模板数据。我想在 ajax 请求成功案例中动态创建 rowexpander（正如我用 TODO 字声明的那样），并想从 rowExpanderStore 加载数据。谁能帮助我怎么做？

我的代码如下，

```
var rowExpanderStore = new Ext.data.Store({
    root            : 'rowExpanderStoreRoot',
    fields          : [
                       {name: 'caption1'}, {name: 'caption2'}, {name: 'caption3'}, 
                        {name: 'caption4'}, {name: 'caption5'}, {name: 'caption6'}
                    ]
});

var gridPanelStore = new Ext.data.Store({
    successProperty : 'success',
    root            : 'gridPanelStoreRoot',
    fields          : [{name: 'id'}, {name: 'date'}, {name: 'time'}, {name: 'address'}]
});

var myTemplate = new Ext.Template(
        '<table class="bgrGREYlight" width="100%" height="99%">' +
            '<tbody>' +
                '<tr>' +
                    '<th align="left" width="15%" class="tableTEXT2">Address1</th>' +
                    '<td  width="85%" align="left" class="tableTEXT">{address1}</td>' + 
                '</tr>'+
                '<tr>' +
                    '<th align="left" width="15%" class="tableTEXT2">Address2</th>' +
                    '<td  width="85%" align="left" class="tableTEXT">{address2}</td>' + 
                '</tr>'+
            '</tbody>' +
        '</table>'
);
// row expander
myRowExpander = new Ext.ux.grid.RowExpander({
    tpl : template
});

Ext.Ajax.request({
    url     : '/action/loadSmtData',
    success: function ( result, request ) {
        var jsonData = Ext.util.JSON.decode(result.responseText);
        rowExpanderStore.loadData(jsonData);
        // TODO: I want to create template and rowexpander here
        // and I don't want to use grid's store, I want to use another store load template data
    },
    failure: function ( result, request ) {
        Ext.MessageBox.alert('Failed', result.responseText);
    }
});

Detail_Grid = new Ext.grid.GridPanel({
        store       : gridPanelStore,
       loadMask : true,
       maxHeight    : 300,
       autoHeight   : true,
       autoScroll   : true,
       layout       : 'fit',
       viewConfig   : { 
           emptyText        : 'no record found!',
           deferEmptyText   : false,
           forceFit         : true
       },
       autoExpandColumn: 2,
        plugins     : myRowExpander,
       columns      :[
                        myRowExpander,
                        {header: 'id', dataIndex: 'id'},
                        {header: 'date', dataIndex: 'date'},
                        {header: 'time', dataIndex: 'time'},
                        {header: 'address', dataIndex: 'address1'}
                     ]
});

var Detail_Panel = new Ext.Panel({
    title       : 'Detail Panel',
    padding     : 5,
    collapsible : true,
    collapsed   : true,
    items       : [Detail_Grid]
}); 
```

# php - 从一个表中选择并插入另一个表

> ID：13143282
> 
> 赞同：0
> 
> 时间：2012-10-30T16:15:25.480
> 
> 标签：php, select, insert

1- 我已在表推车中插入产品（并且有效）
2- 我确定是新客户还是老客户（并且有效）
3- 我在表客户中插入新客户或更新新信息存在客户。（并且有效）我在这里编写了简化的代码。

我想现在我需要在表购物车中插入行customer_id，刚刚在表customers中创建的id（我的意思是表customers的会话id）我该怎么做？

```
if(isset($_POST["continue"])){
    mysql_query("INSERT INTO customers (name)
    VALUES ('$_POST[name]')") 
    or die("error:".mysql_error());
    header("Location:step4.php");   

}else if (isset($_POST["update"])) {
    mysql_query("UPDATE customers 
                 SET name='$_POST[name]'
                 WHERE mail='$_SESSION[mail]'")
    or die("error:".mysql_error());
    header("Location:step4.php?updated");   
} 
```

我试过了，但它不起作用：

```
mysql_query("INSERT INTO cart (customer_id)
             SELECT'$_SESSION['id']' 
             FROM customers") 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T16:22:36.157

使用`mysql_insert_id()`此处记录的：http: [//php.net/manual/en/function.mysql-insert-id.php](http://php.net/manual/en/function.mysql-insert-id.php)

# sql-server-2008 - 存储过程为 CTE_query_definition

> ID：13143284
> 
> 赞同：0
> 
> 时间：2012-10-30T16:15:35.303
> 
> 标签：sql-server-2008, stored-procedures, common-table-expression

我可以使用存储过程作为`CTE_query_definition`CTE 的吗？

例如：

```
WITH  CodesCTE
AS ( Exec sp_TableReturningProc )
SELECT * FROM CodesCTE; 
```

如果没有，除了声明批处理/全局临时表并使用`Select`针对临时表的语句之外，有没有办法绕过这个限制？

我正在开发相关的存储过程，如果可能的话，我很想简单地使用它来达到这个目的。

# javascript - 替换 Javascript 中的反斜杠

> ID：13143289
> 
> 赞同：0
> 
> 时间：2012-10-30T16:15:43.367
> 
> 标签：javascript

如何将以下字符串从

```
var x = "F:\RSSIMS\database\" 
```

到：

```
var x = "F:\\RRSIMS\\database\\" 
```

感谢你的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-30T16:17:37.867

`var x = "F:\RSSIMS\database\"`已经**无效**。你需要逃避你的反斜杠。

```
var x = "F:\\RSSIMS\\database\\";//stores the string `F:\RSSIMS\database\` in x. 
```

如果您现在想要双斜杠，请**执行以下**操作以将所有单斜杠替换为双斜杠。

```
x = x.replace(/\\/g,"\\\\"); 
```

# matlab - 如何从给定的 CDF 计算逆高斯分布？

> ID：13143292
> 
> 赞同：5
> 
> 时间：2012-10-30T16:15:49.363
> 
> 标签：matlab, statistics, distribution, gaussian, quantile

我想计算给定 CDF的[逆高斯分布的参数 mu 和 lambda。](http://en.wikipedia.org/wiki/Inverse_Gaussian_distribution)

通过“给定 CDF”，我的意思是我已经给出了数据和数据的（估计）分位数，即

```
Quantile - Value

0.01 - 10

0.5 - 12

0.7 - 13 
```

现在我想找出这个数据的逆高斯分布，这样我就可以根据我的分布查找值 11 的分位数。

如何找出 mu 和 lambda 的值？

我能想到的唯一解决方案是使用梯度下降法，使用 RMSE 作为误差度量来找到最佳 mu 和 lambda。

没有更好的解决方案吗？

评论：Matlab 的 MLE 算法不是一个选项，因为它不使用分位数数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T18:07:06.293

因为您真正想要做的就是估计未知值的分布分位数，并且您有很多数据点，您可以简单地插入要查找的值。

```
quantile_estimate = interp1(values, quantiles, value_of_interest); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T23:32:30.017

根据@mpiktas [here，](https://stats.stackexchange.com/questions/6022/estimating-a-distribution-based-on-three-percentiles)我实现了一个梯度下降算法来估计我的 mu 和 lambda：

1.  使用 MLE 进行初步猜测

2.  使用梯度下降和 RMSE 作为误差度量来学习 mu 和 lambda。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-26T07:41:01.633

以下文章详细解释了如何计算逆高斯分布的分位数（逆 CDF）：

Giner, G 和 Smyth, GK (2016)。statmod：逆高斯分布的概率计算。R杂志。[http://arxiv.org/abs/1603.06687](http://arxiv.org/abs/1603.06687)

R 语言的代码包含在 CRAN 提供的 R 包 statmod 中。例如：

```
> library(statmod)
> qinvgauss(0.01, lower.tail=FALSE)
[1] 4.98 
```

计算标准 IG 分布的 0.01 上尾分位数。

# python - Distutils - 如何在构建扩展时禁用包含调试符号

> ID：13143294
> 
> 赞同：8
> 
> 时间：2012-10-30T16:16:03.543
> 
> 标签：python, distutils

我编写了一个 boost-python 扩展，目前正在通过 distutils 构建。

不幸的是，我一直无法在 distutils 中找到一种方法来构建没有调试符号的扩展，或者在安装时从扩展中删除符号。
注意：我没有通过 --debug 或 -g 来构建 distutils 的命令（例如，python setup.py build），我的编译器是 Linux 上的 gcc。

示例 setup.py：

```
from distutils.core import setup
from distutils.extension import Extension

setup(name="myPy",
      ext_modules = [
         Extension("MyPyExt", ["MyPyExt.cpp"],
                   libraries = ["boost_python"])
      ]) 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2016-06-21T18:49:36.980

您可以使用该选项[`extra_compile_args`](http://docs.python.org/distutils/setupscript.html#other-options)将参数传递给最后附加的编译器，因此具有最高优先级。因此，如果您在 中包含`-g0`（没有调试符号）`extra_compile_args`，这将覆盖`-g`Distutils/Setuptools 的设置。在您的示例中：

```
from distutils.core import setup
from distutils.extension import Extension

setup(
    name="myPy",
    ext_modules = [Extension(
        "MyPyExt",
        ["MyPyExt.cpp"],
        libraries = ["boost_python"],
        extra_compile_args = ["-g0"]
        )]
    ) 
```

另请参阅：[如何覆盖 setup.py 默认使用的编译器 (gcc) 标志？](https://stackoverflow.com/q/6928110/2127008)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-02-05T12:15:23.040

我找到了一种方法，但有点hacky：

```
from distutils import sysconfig
from distutils.core import setup
import platform

if platform.system() != 'Windows':  # When compilinig con visual no -g is added to params
    cflags = sysconfig.get_config_var('CFLAGS')
    opt = sysconfig.get_config_var('OPT')
    sysconfig._config_vars['CFLAGS'] = cflags.replace(' -g ', ' ')
    sysconfig._config_vars['OPT'] = opt.replace(' -g ', ' ')

if platform.system() == 'Linux':  # In macos there seems not to be -g in LDSHARED
    ldshared = sysconfig.get_config_var('LDSHARED')
    sysconfig._config_vars['LDSHARED'] = ldshared.replace(' -g ', ' ')

setup(...) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-05-02T14:01:26.953

@hithwen 的解决方案适用于 python3.5，由 MacPorts 安装，在 MacOS 10.13.4 上运行。

但是，在我的情况下，`platform.system()`返回`'Darwin'`，而不是 'Linux'。
在 Ubuntu 16.04 上，`-g`似乎出现在开头或结尾。所以稍微调整了一下：

```
import sys
import re
from distutils import sysconfig
from distutils.core import setup, Extension

if sys.platform == 'linux' or sys.platform == 'darwin':
  sysconfig.get_config_var(None)  # to fill up _config_vars
  d = sysconfig._config_vars
  for x in ['OPT', 'CFLAGS', 'PY_CFLAGS', 'PY_CORE_CFLAGS', 'CONFIGURE_CFLAGS', 'LDSHARED']:
    d[x] = re.sub(' -g ', ' ', d[x])
    d[x] = re.sub('^-g ', '',  d[x])
    d[x] = re.sub(' -g$', '',  d[x])

setup(...) 
```

谢谢@hithwen！

# c# - 如果没有这样的键，我如何更改 Dictionary 以便它返回自定义默认值而不是抛出异常？

> ID：13143295
> 
> 赞同：3
> 
> 时间：2012-10-30T16:16:11.987
> 
> 标签：c#, .net, dictionary

如何更改字典的工作方式，以便如果没有具有给定键的 KVP，它返回默认值，而不用`dic["nonexistentKey"]`try-catch 包装通常？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-30T16:17:47.987

您可以创建自己的类来*封装*a`Dictionary<TKey,TValue>`并实现`IDictionary<TKey,TValue>`.

这将像字典一样，但您可以编写行为以任何您希望的方式处理不存在的键。

但是，您无法更改实际`Dictionary<TKey,TValue>`类的运行方式。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-30T16:19:26.973

如果您愿意，还可以向 IDictionary 或 Dictionary 添加扩展方法。

```
public static class IDictionaryExtensions
{
    public static TValue ValueAtOrDefault<TKey, TValue>(
        this IDictionary<TKey, TValue> dictionary, TKey key, TValue defaultValue)
    {
        if (dictionary == null || !dictionary.ContainsKey(key))
        {
            return defaultValue;
        }

        return dictionary[key];
    }
} 
```

请注意，如果字典为空，您可能想要抛出一个`ArgumentNullException`，而不是像示例中那样返回默认值......任何适合您的东西。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-30T16:22:27.670

使用[Dictionary.TryGetValue](http://msdn.microsoft.com/en-us/library/bb347013.aspx)：

```
Dictionary<int, YourType> dictionary = ...;
YourType x;
if (!dictionary.TryGetValue(123, out x))
{
    x = new YourType();
}

// here X will be assigned to the value or the default if the key was not present. 
```

如果您*确实*需要覆盖默认`dictionary[key]`方法，则可以使用此类（作为字典本身或作为现有字典的包装器）：

```
/// <summary>
/// A dictionary implementation that returns the default value of <typeparamref name="TValue"/> when the key is not present in the dictionary.
/// </summary>
public class DictionaryWithDefaults<TKey, TValue> : IDictionary<TKey, TValue>
{
    /// <summary>
    /// Holds the actual data using standard dictionary.
    /// </summary>
    private IDictionary<TKey, TValue> _storage;

    /// <summary>
    /// Initializes a new instance of the <see cref="DictionaryWithDefaults{TValue}" /> class.
    /// The data is stored directly in this dictionary.
    /// </summary>
    public DictionaryWithDefaults()
    {
        this._storage = new Dictionary<TKey, TValue>();
    }

    /// <summary>
    /// Initializes a new instance of the <see cref="DictionaryWithDefaults{TValue}" /> class.
    /// This dictionary acts as a wrapper for the data stored in the dictionary <paramref name="forWrapping" />.
    /// </summary>
    /// <param name="forWrapping">The dictionary object for wrapping.</param>
    /// <exception cref="System.ArgumentNullException">when <paramref name="forWrapping"/> is <c>null</c></exception>
    public DictionaryWithDefaults(IDictionary<TKey, TValue> forWrapping)
    {
        if (forWrapping == null)
            throw new ArgumentNullException("forWrapping");

        this._storage = forWrapping;
    }

    public void Add(TKey key, TValue value)
    {
        this._storage.Add(key, value);
    }

    public bool ContainsKey(TKey key)
    {
        return this._storage.ContainsKey(key);
    }

    public ICollection<TKey> Keys
    {
        get { return this._storage.Keys; }
    }

    public bool Remove(TKey key)
    {
        return this._storage.Remove(key);
    }

    public bool TryGetValue(TKey key, out TValue value)
    {
        // always return a value, even if the key does not exist.
        // this is also the only place one would modify if the default value has to be customized (passed in the constructor etc.)
        if (!this._storage.TryGetValue(key, out value))
            value = default(TValue);

        return true;
    }

    public ICollection<TValue> Values
    {
        get { return this._storage.Values; }
    }

    public TValue this[TKey key]
    {
        get
        {
            TValue value;
            this.TryGetValue(key, out value);
            return value;
        }
        set
        {
            this._storage[key] = value;
        }
    }

    public void Add(KeyValuePair<TKey, TValue> item)
    {
        this._storage.Add(item);
    }

    public void Clear()
    {
        this._storage.Clear();
    }

    public bool Contains(KeyValuePair<TKey, TValue> item)
    {
        return this._storage.Contains(item);
    }

    public void CopyTo(KeyValuePair<TKey, TValue>[] array, int arrayIndex)
    {
        this._storage.CopyTo(array, arrayIndex);
    }

    public int Count
    {
        get { return this._storage.Count; }
    }

    public bool IsReadOnly
    {
        get { return this._storage.IsReadOnly; }
    }

    public bool Remove(KeyValuePair<TKey, TValue> item)
    {
        return this._storage.Remove(item);
    }

    public IEnumerator<KeyValuePair<TKey, TValue>> GetEnumerator()
    {
        return this._storage.GetEnumerator();
    }

    System.Collections.IEnumerator System.Collections.IEnumerable.GetEnumerator()
    {
        return this._storage.GetEnumerator();
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-30T16:19:04.503

不，你必须把它包起来。`this[]`不是虚拟方法，不能被覆盖。

所以你最好的选择是创建一个简单的类，它公开`IDictionary`（或仅选定的方法）并`this[] get`用 try/catch 包装。

# actionscript-3 - 获取渲染项目的列表

> ID：13143296
> 
> 赞同：0
> 
> 时间：2012-10-30T16:16:18.283
> 
> 标签：actionscript-3, apache-flex, flex3

我有自己的自定义组件。该组件从一个基本容器扩展而来。我希望能够访问正在可视化的 itemRenderer 实例。我知道组件 mx:list 有一个内部 getter，它提供一个数组数组，其中包含呈现每个数据提供程序项的 itemRenderer 实例。我想要同样的东西。知道如何做到这一点吗？

更具体地说：我将我的 dataProvider 项目的 selected 属性设置为 true 或 false。从我的 ItemRenderer 的 updateDisplayList 函数中，我检查属性的更改并更正所选属性的边框颜色。不幸的是，我必须强制使用 updateDisplayList 函数。我已经在列表中的 ItemRenderer 上做过一次。只有列表才是实用的，因为通过制作我自己的列表，我能够获得正在渲染的项目列表，因此可视化（不能很多）。通过渲染的 Items 和 updateDisplayList 没有开销。但在这种情况下，我可以有 100 个项目。想象一下检查和更改这么多项目的样式。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T22:04:21.933

Flex 架构师故意让这件事变得困难，因为他们正确地封装了组件。简而言之，即使尝试这样做也违反了良好的 OOP 原则。

也就是说，您可能尝试做的大约 90% 的事情可以通过操作数据项来完成，剩下的 10% 可以通过为您的 itemRenderer 使用 ClassFactory 来完成，该 ClassFactory 将您的 itemRenderer 上的自定义属性设置为回调您可以在其中查看可用于包含上下文的数据，并基于此返回一个值。

如果你详细说明你的最终目标，我可以给你更多细节。

* * *

根据澄清进行编辑：

您需要让您的数据对象类在事件发生更改时调度一个事件（一种方法是使其可绑定，或者只是使选定的属性可绑定）。然后，在您的渲染器中，侦听更改事件并采取适当的操作。

处理此问题的第二种方法是 refresh() 集合，首先存储 selectedItem （如果您关心的话）并在刷新完成后将其重置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T17:20:57.213

我相信您可以通过 getChildAt 方法访问 itemRenderer 实例。Flex 3 的容器覆盖了“getChildAt”、“numChildren”，因为有些子项是逻辑子项，而有些是装饰性子项，例如背景、边框和滚动条。

请记住，itemRenderer 可能不会在 dataProvider 分配时立即可用，因为它们可能会在下一个组件生命周期中创建。检查底层容器的文档并找出在确定创建渲染器时要侦听的事件，以便您可以可靠地访问它们。

# scala - scala：如何使用 for comprehension 重写此函数

> ID：13143297
> 
> 赞同：4
> 
> 时间：2012-10-30T16:16:18.077
> 
> 标签：scala, for-comprehension

我有这段代码有几个讨厌的嵌套检查......

我很确定它可以用很好的理解来重写，但我对如何混合模式匹配的东西有点困惑

```
// first tries to find the token in a header: "authorization: ideas_token=xxxxx"
// then tries to find the token in the querystring: "ideas_token=xxxxx"
private def applicationTokenFromRequest(request: Request[AnyContent]): Option[String] = {

  val fromHeaders: Option[String] = request.headers.get("authorization")
  val tokenRegExp = """^\s*ideas_token\s*=\s*(\w+)\s*$""".r

  val tokenFromHeader: Option[String] = {
    if (fromHeaders.isDefined) {
      val header = fromHeaders.get
      if (tokenRegExp.pattern.matcher(header).matches) {
        val tokenRegExp(extracted) = header
        Some(extracted)
      } else {
        None
      }
    } else {
      None
    }
  }

  // try to find it in the queryString
  tokenFromHeader.orElse {
    request.queryString.get("ideas_token")
  }

} 
```

你能给我什么提示吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-30T16:34:26.683

`for`你可以通过在一个-comprehension中使用提取器来摆脱很多麻烦：

```
val Token = """^\s*ideas_token\s*=\s*(\w+)\s*$""".r

val tokenFromHeader = for {
  Token(t) <- request.headers.get("authorization")
} yield t

tokenFromHeader orElse request.queryString.get("ideas_token") 
```

但在我看来，以下内容更加简洁明了：

```
val Token = """^\s*ideas_token\s*=\s*(\w+)\s*$""".r

request.headers.get("authorization") collect {
  case Token(t) => t
} orElse request.queryString.get("ideas_token") 
```

不过，这两者本质上是等价的——在这两种情况下，您只是将值（如果存在）拉出`Option`并查看它是否与正则表达式匹配。

# c# - 如何模拟 IP 地址 - 需要设备模拟器

> ID：13143298
> 
> 赞同：6
> 
> 时间：2012-10-30T16:16:20.757
> 
> 标签：c#, client, ip, device, simulation

我是新来的……一直在四处寻找帮助，但我想我会加入并寻求一些指导。

我正在寻找一个可以创建多个“假”设备的应用程序。他们需要一个 IP 地址，我猜他们能够响应 ping。能够响应 WMI 也很好。有点像模拟器。我想创建多达 50,000 台设备，但即使从 1 台开始也会有所帮助。

这样的应用程序需要什么？TCP 客户端/监听器？我以前从来没有做过这样的事情，所以请温柔:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T16:21:25.447

**您可以安装虚拟网络适配器**（驱动程序包含在 Windows 操作系统中），但我从未使用过它。虚拟网络适配器的驱动程序在这里：`%WINDIR%\Inf\Netloop.inf`

您可以使用名为[DevCon](http://support.microsoft.com/default.aspx?scid=kb;EN-US;Q311272)的命令行工具通过脚本添加设备，如下所示：

```
devcon -r install %WINDIR% \Inf\Netloop.inf *MSLOOP 
```

不幸的是，安装需要几秒钟（在我的 Core Duo 2.0 笔记本电脑上）。

如果你需要配置很多网卡，你可以使用命令行`netsh`。

例子：

```
netsh in ip set address "Local Area Connection" static 10.0.0.1 255.0.0.0 10.0.0.1 1
netsh in ip add address "Local Area Connection" 10.0.0.2 255.0.0.0
netsh in ip set address "Local Area Connection 2" 10.0.0.3 255.0.0.0
netsh in ip set address "Local Area Connection 3" 10.0.0.4 255.0.0.0
netsh in ip set dns "Local Area Connection" static 10.0.0.250
netsh in ip set wins "Local Area Connection" static 10.0.0.250 
```

您可以将当前网络配置转储/导出到文件（查看当前配置的外观）：

```
netsh interface dump > file.txt 
```

[更多 netsh 示例](http://www.windowsnetworking.com/articles_tutorials/10-windows-server-2008-netsh-commands.html)

编辑：删除了在这种情况下无用的信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T16:32:30.000

如果我对您的理解正确，不幸的是这并不容易，因为您需要虚拟化网络适配器来完成您想要的工作。IP 地址绑定到 nic（物理或逻辑），而不是可以在更高层代码中指定的东西。VMWare Workstation 确实包含一个 Visual Studio 插件，因此也许您可以使用它来生成许多虚拟网卡并以编程方式为其分配 ip，但否则您需要编写虚拟网卡驱动程序（可能使用非 .net 语言）来完成它，如果您不使用现有的虚拟化技术。您可以在 NIC 上堆叠多个 IP 地址，但与之通信的计算机将知道它们都是同一个网络实体。如果你没问题，那么只需将你想要的所有 IP 添加到你拥有的卡上。

在查询的第二部分，由于您希望 IP 能够接收和发送数据，因此它们的地址必须是可路由的，因此您不能只选择任何旧的 IP 地址。如果你在 NAT 墙后面没问题，你可以使用 10.xyz 来解决它们，但在 nat 的外部，它们似乎都使用相同的公共 IP 到外部世界。为了公开 50k 个可公开路由的 IP 地址，您首先必须注册并购买它们。

最后，您不能使用 TCPClient 进行 Echo/Ping，因为它们使用 ICMP 协议，而是使用 System.Net 和 System.Net.NetworkInformation 命名空间。这是一些发送 ping 的 VB 代码，只是为了让您了解它：

```
Imports System
Imports System.Net
Imports System.Net.NetworkInformation

Public Class Pinger

    <System.Diagnostics.DebuggerNonUserCode()> _
        Public Sub New()
        MyBase.New()

        'This call is required by the Component Designer.
        InitializeComponent()

    End Sub

    Public Shared Function CanHostBePinged(ByVal IPAddr_DNS_OR_Host_Name As String) As Boolean
        Dim p As New Ping
        Dim po As New PingOptions

        po.Ttl = 256
        po.DontFragment = False

        Dim stringOut As String = "ABCDEFGHIJKLMNOPQRSTUVWXYZABCDE"
        Dim streamOut As Byte() = System.Text.Encoding.ASCII.GetBytes(stringOut)

        Try
            Dim reply As PingReply = p.Send(IPAddr_DNS_OR_Host_Name, 30, streamOut)
            If reply.Status = IPStatus.Success Then
                Return True
            Else
                Return False
            End If
        Catch ex As Exception
            Return False
        End Try

    End Function

End Class 
```

# java - 如何在 JFrame 中实现默认 Web 浏览器？

> ID：13143299
> 
> 赞同：3
> 
> 时间：2012-10-30T16:16:25.070
> 
> 标签：java, browser, dll, jxbrowser

我想在 Java JFrame 中实现计算机的默认浏览器。我看过 JXBrowser 但它要花钱。有没有办法做到这一点？如果需要额外的库也没关系，只要它是免费的并且可以工作。谢谢你的时间。

# git - Git 服务器不需要 /directory/where/git/repos/are/?

> ID：13143301
> 
> 赞同：0
> 
> 时间：2012-10-30T16:16:30.997
> 
> 标签：git

我的服务器上有一个 git repo，当我添加一个遥控器时，我使用

`git remote add origin git@gitserver:/opt/git/project.git`

或类似的东西。我想知道我怎样才能摆脱`/opt/git/`并成功

`git@server.com:project.git`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T17:59:23.130

`/opt/git`为`git`用户创建主目录`gitserver`？或者，放入`project.git`，`/home/git`或者`git`用户当前的主目录是...

# jquery - 防止可编辑内容 div 水平增长

> ID：13143302
> 
> 赞同：0
> 
> 时间：2012-10-30T16:16:32.057
> 
> 标签：jquery, html, css

我有一个设置为可编辑的 div

```
<div class=".textarea_mask" contenteditable ></div> 
```

基本上我想模仿将文本区域用作 div。我让它在现代浏览器中运行良好，但我需要它在 IE8 中运行。当我输入一个长短语（如`abcdefghijklmnopqrstuvqxyzabcdefghijklmnopqrstuvqxyzabcdefghijklmnopqrstuvqxyz`. 它突破了可编辑 div 的边界，当我应用 overflow-x: none 时，div 会扩展或文本被隐藏。这会导致 div 展开

jquery 中有没有办法检测溢出，然后将长短语切下来，使其保持在 div 的宽度内？

NB 输入标准文本 - “A cat and a dog”将自动转到下一行。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T16:26:11.087

有一个简单的 css 属性可以做到这一点：溢出包装。尽管几乎所有浏览器仍然将其实现为“自动换行”（[http://caniuse.com/wordwrap](http://caniuse.com/wordwrap)）

mdn：[https ://developer.mozilla.org/en-US/docs/CSS/word-wrap](https://developer.mozilla.org/en-US/docs/CSS/word-wrap)

演示：http: [//jsfiddle.net/THC5q/4/](http://jsfiddle.net/THC5q/4/)

html:

```
<div>
    ABCDEFGHIJKLMNOPQRSTUVWXYZ
</div>​ 
```

CSS：

```
div {
    width: 200px;
    background-color: #ff0;
    word-wrap: break-word;
} 
```

# arrays - 更改代码以对来自多个文件的值求和

> ID：13143303
> 
> 赞同：1
> 
> 时间：2012-10-30T16:16:42.757
> 
> 标签：arrays, perl, sum, rows

好奇我能不能在这里得到一点帮助。我是 perl 新手，不知道如何将以下代码转换为对我的分析更有用的东西。

此代码目前从用户提供的数据文件列表中获取第 1 列和第 4 列，并将它们放在一起。

对于此代码生成的“当前输出”的每一行（见下文），我希望我的代码做的是对这些第 4 列值（filea、fileb、filec）求和。不太清楚如何实现这个......

电流输出：

```
filea   fileb  filec

entrya  | 0 |10.2 | 0
entryb  | 0 | 0.0 | 1     
entryc  | 8 | 57.0| 46 
```

期望的输出

```
 sum
entrya | 10.2
entryb | 1
entryc | 111 
```

当前代码如下所示：

```
main: {

my %data;

foreach my $file (@rsem_files) {

    open (my $fh, $file) or die "Error, cannot open file $file";
    my $header = <$fh>; # ignore it
    while (<$fh>) {
        chomp;
        my @x = split(/\t/);
        my $acc = $x[0];
        my $count = $x[4];
        $data{$acc}->{$file} = $count;
    }
    close $fh;
}

my @filenames = @rsem_files;
foreach my $file (@filenames) {
    $file = basename($file);
}

print join("\t", "", @filenames) . "\n";
foreach my $acc (keys %data) {

    print "$acc";

    foreach my $file (@rsem_files) {

        my $count = $data{$acc}->{$file};
        unless (defined $count) {
            $count = "NA";
        }

        print "\t$count";

    }

    print "\n";

}

exit(0);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T16:26:48.643

改变`@rsemfiles`循环：

```
# create $total variable outside loop
my $total = 0; 
foreach my $file (@rsem_files) {
    my $count = $data{$acc}->{$file};
    # change unless to if, no need for NA
    if (defined $count) {   
        $total += $count;
    }
}
# move print outside loop so it happens once instead of per-file
print '\t$total\n'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T17:39:32.157

```
foreach $line(@rsemfiles) {
    if ($line=~ /^entry/) {   
    #match the line starting with the word entry
    my $entry=$1; my $filea=$2; my $fileb=$3; my $filec=$4;  
    # make variables out of the column values 
```

现在您有了这些变量，您可以对它们进行数学运算。

# macos - 来自用户输入的 NASM 字符串未比较

> ID：13143309
> 
> 赞同：0
> 
> 时间：2012-10-30T16:17:00.470
> 
> 标签：macos, assembly, nasm, intel

这是我学习 NASM 和汇编语言的第二天，所以我决定写一种计算器。问题是当用户输入操作时，程序不比较它。我的意思是比较，但它不认为字符串相等。我google了很多，但没有结果。我的问题可能是什么？这是来源

```
operV   resb    255  ; this is declaration of variable later used to store the input, in .bss of course

mov rax, 0x2000003         ;here user enters the operation, input is "+", or "-"
mov rdi, 0
mov rsi, operV
mov rdx, 255
syscall

mov rax, operV             ; here is part where stuff is compared
mov rdi, "+"         
cmp rax, rdi
je add

mov rdi, "-"
cmp rax, rdi
je substr
;etc... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T16:40:35.767

## 当您提交此类信息时，您也可以按回车键。将 rdi 更改为 "+", 在 Linux 上为 10，或在 Windows 上更改为 "+", 11

昨晚在梦中找到了答案。

```
operV resd 4; Resd because registers are a dword in size, and we want the comparison to be as seamless ass possible, you can leave this as 255, but thats a little excessive as we only need 4

mov rax, 0x2000003
mov rdi, 0
mov rsi. operV
mov rdx, 4 ;You only need 4 bytes (1 dword) as this is all we are accepting (+ and line end, then empty space so it matches up with the register we are comparing too) you can leave this as 255 too, but again, we only need 4
syscall

mov rax, operV
mov rdi, "x", 10
cmp dword[rax], rdi ; You were comparing the pointer in rax with rdi, not the content pointed to by rax with rdi. now we are comparing the double word (4 bytes) at the location pointed too by rax (operV) and comparing them. Instead of comparing the location of operV with the thing you want.
je add 
```

这就是所做的更改：P

# php - PHP会话被过早地破坏

> ID：13143313
> 
> 赞同：1
> 
> 时间：2012-10-30T16:17:19.703
> 
> 标签：php, mysql, session

我是 php 新手，我正在使用 MAC OS。我最近建立了一个网站并在 localhost 下测试它。它工作正常，直到有一天我尝试重命名我的主文件夹，并在从 root 切换回我重命名的文件夹时中途退出。然后我从 root 用户注销并登录我重命名的用户。然后我发现我必须重置所有内容。应用程序文件夹已从用户主目录移到与用户文件夹相同的级别。

问题就出在这里（不知道是不是上面的动作造成的）我让一个用户用用户名和密码登录，并使用一个会话变量来存储用户名。我检查：

```
echo $_SESSION['name'];    

echo session_status(); 
```

第一个显示我输入的用户名，第二个打印 2 所以我认为用户名存储在该会话变量中。但是，每当用户进入另一个页面时，会话变量就会被破坏。

问题是什么？

这是我为每个页面编写的作为页眉的代码。它包含登录框。它曾经工作得很好。

```
 <?php
    echo '<div id="pageheader">
            <div class="wrap">
                <div class="logo">
                    <a href="index.php"><img src="pics/1.gif" height="45px"></a>
                 </div>
                  <ul id="nav">
                    <li><a href="">New Arrival&nbsp&nbsp&nbsp/</a></li>
                    <li><a href="">Hot&nbsp&nbsp&nbsp/</a></li>
                    <li><a href="#">By School&nbsp&nbsp&nbsp/</a>
                        <ul >
                            <li><a href="">ADM</a></li>
                            <li><a href="">CEE</a></li>
                            <li><a href="">EEE</a></li>
                            <li><a href="">HSS</a></li>
                            <li><a href="">MAE</a></li>
                            <li><a href="">MSE</a></li>
                            <li><a href="">NBS</a></li>
                            <li><a href="">SBS</a></li>
                            <li><a href="">SCBE</a></li>
                            <li><a href="">SCI</a></li>
                            <li><a href="">SPMS</a></li>
                            <li><a href="">SCE</a></li>
                        </ul>           
                    </li>
                    <li><a href="#">By Course&nbsp&nbsp&nbsp/</a>
                        <ul>
                            <li><a href="book.php?q=Mathematics">Mathematics</a></li>
                            <li><a href="book.php?q=Computer">Computing</a></li>
                            <li><a href="book.php?q=Accounting">Accounting</a></li>
                            <li><a href="book.php?q=Business">Business Law</a></li>
                            <li><a href="book.php?q=Physics">Physics</a></li>
                            <li><a href="book.php?q=Chemistry">Chemistry</a></li>
                            <li><a href="book.php?q=Biology">Biology</a></li>
                        </ul>
                    </li>
                    <li><a href="#">By Kind&nbsp&nbsp&nbsp/</a></li>
                  </ul>
                <ul id="log">';

    function generateLogin(){
        echo '      <li id="login">
                        <a id="login-trigger" href="#">login&nbsp<span>&#x25BC</span></a>
                            <div id="login-content">
                                <form action="'.$_SERVER['PHP_SELF'].'" method="post" enctype="multipart/form-data">
                                    <fieldset class="inputs">
                                        <input name="user" type="text" placeholder="Username" class="reqd" />
                                        <input name="loginpw" type="password" placeholder="Password" class="reqd" />
                                    </fieldset>
                                    <fieldset class="actions">
                                        <input type="submit" class="button1" value="Log in" />
                                        <label><input name="keep" type="checkbox" value="yes" />Keep me signed in</label>
                                    </fieldset>
                                </form>
                            </div>
                    </li>
                    <li id="signup">
                        <a id="signup-trigger" href="#">signup&nbsp<span>&#x25BC</span></a>
                            <div id="signup-content">
                                <form action="signup.php" method="post" enctype="multipart/form-data">
                                    <fieldset class="inputs">
                                        <input name="username" id="username" type="text"  placeholder="Username (at least 6 characters)" class="reqd user" />
                                        <input name="email" id="email" type="email"  placeholder="john@example.com" class="reqd email" />
                                        <input id="passwd1" type="password" placeholder="Password (at least 6 characters)" class="reqd pd" />
                                        <input name="pswd" id="passwd2" type="password"  placeholder="Confirm your password" class="reqd passwd1" />
                                    </fieldset>
                                    <fieldset class="actions">
                                        <input type="submit" class="button1" value="Sign up" />&nbsp;&nbsp;&nbsp;<input type="reset" class="button1" />
                                    </fieldset>
                                </form>
                            </div>
                    </li>
    ';
    }

    session_start();

    if(!isset($_SESSION['name']) or $_GET['logout'] == 1){
        if($_GET['logout'] == 1){unset($_SESSION['name']);}
        if(isset($_POST['user'])){
            $link = mysqli_connect('localhost','root','root','bookstore'); 
            if (!$link){
              die('Could not connect: ' . mysqli_error());
            }
            try {
                $sql = "SELECT username FROM user
                    WHERE username='$_POST[user]' AND
                    pswd=MD5('$_POST[loginpw]')";

                $sqlUser = "SELECT username FROM user
                WHERE username='$_POST[user]'";

                $result1 = mysqli_query($link, $sql);
                $result2 = mysqli_query($link, $sqlUser);
                if (!mysqli_fetch_row($result1)){
                    if(!mysqli_fetch_row($result2)){
                        throw new Exception("User ".$_POST['user']." does not exist!");
                    }
                    else{
                        throw new Exception("Incorrect password!");
                    }
                }
                else{
                    $_SESSION['name'] = $_POST['user'];
                    echo '
                        <ul id="log">
                            <li><a href="index.php?logout=1">Logout</a></li>
                            <li><a href="cart.php">Hi, '.$_POST['user'].'</a></li>
                        </ul>';
                }
            }catch(Exception $e){
                echo "<script type='text/javascript'>alert('".$e->getMessage()."');</script>";
                generateLogin();
            }       
            mysqli_close($link);
        }
        else{
            generateLogin();
        }
    }
    else{
        $name = $_SESSION['name'];
        echo '
            <ul id="log">
                <li><a href="index.php?logout=1">Logout</a></li>
                <li><a href="cart.php">Hi, '.$_SESSION['name'].'</a></li>
            </ul>';
    }
    echo '          </ul>
                <div id="search">
                  <form action="book.php" name="search" method="get" enctype="multipart/form-data">
                      <input name="q" id="q" autocomplete="off" onkeyup="showHint(this.value)" type="text" size="100" placeholder="Search..." />
                      <input type="submit" class="button1" value="Search" />
                  </form>
                </div>
                <div id="suggestBox">
                  <ul>
                    <div id="txtHint">
                    </div>
                  </ul>
                </div>
            </div>
        </div>';
    ?> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-30T16:21:03.677

您必须在使用会话的每个页面上启动会话

```
<?php
    session_start();

    // now I can use my sessions in this page and 
    // I should start the session on each page I use them
?> 
```

您应该`session_start()`在任何 html 输出之前使用，因此在您的情况下`session_start()`，在第一个回声之前移动！

```
<?php
    // move session_start here

    session_start();

    echo '<div id="pageheader">
              <div class="wrap">';
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T16:20:57.377

您需要在希望使用 $_SESSION 数据的每个页面上运行 session_start() ...似乎您应该将 session_start 添加到此页面的顶部，必须在输出任何内容之前包含在内。

# java - 通过 Maven 插件连接到 MongoDB

> ID：13143315
> 
> 赞同：1
> 
> 时间：2012-10-30T16:17:21.543
> 
> 标签：java, mongodb, maven, jenkins

我正在尝试使用 Jenkins 集合项目在另一台计算机上创建与 MongoDB 的 Maven 连接。计算机上的 MongoDB 作为服务运行，我只需要一个 Maven 插件，它可以运行脚本来创建数据库并删除它。我发现的所有插件 - 用于启动或停止服务 Mongo，我这样做不需要。唯一或多或少匹配的是插件[http://code.google.com/p/maven-mongodb-plugin/](http://code.google.com/p/maven-mongodb-plugin/)，但尝试将其配置为将任何内容写入数据库失败。告诉我如何做到这一点。对不起我的英语，我需要帮助，请。

# asp.net - 消息：参数不正确

> ID：13143322
> 
> 赞同：1
> 
> 时间：2012-10-30T16:17:44.960
> 
> 标签：asp.net, sql-server, c#-4.0, iis-6

我在本地机器上开发了一个网站/应用程序。客户下订单。他们在订单期间输入的数据在订单的每个步骤中都会保存到 SQL Server 数据库中。

如果他们离开当前订单，则可以选择恢复订单 - 从数据库中的表中拉回信息并显示在屏幕上。现在这在我自己的开发机器上 100% 有效。

Howvere 我已将它部署到另一台服务器，但它没有像预期的那样工作 - 我可以看到信息已存储到数据库表中。但是，当我点击页面恢复时 - 没有返回数据。我查看了 SQL Profiler，但它从来没有命中我感兴趣的数据库（但我可以从 SQL Profiler 看到它更早地命中了数据库（在登录网站时）

我让他们在 chrome 中打开了开发工具 - 在网络选项卡上 - 在我自己的开发机器上 - 我可以看到那里的数据（在一个名为 JSONService.aspx 的页面中 - 这是我取回数据的方式）

但是在我的其他服务器环境中，我得到以下信息：

```
ListOfErrors: [{CompletionCode:null, Message:The parameter is incorrect.
 }]
0: {CompletionCode:null, Message:The parameter is incorrect.
 }
CompletionCode: null
Message: "The parameter is incorrect.
↵"
Objects: null
RequestStatus: "Failure" 
```

我将自己对此进行调查，如果我得到解决方案，我将用它更新我的答案 - 有没有人可能对我可以尝试的事情有任何想法 - 想不出我现在错过了什么？

# c++ - 如何防止我的屏幕截图制作控制台程序阻止屏幕截图？

> ID：13143326
> 
> 赞同：1
> 
> 时间：2012-10-30T16:18:00.030
> 
> 标签：c++, console-application, screenshot, windows-console

我有[制作屏幕截图的代码](https://stackoverflow.com/a/3291411/1433767)，但这是我的程序产生的：

[带有控制程序的屏幕截图阻止了某些屏幕 http://imageshack.us/a/img27/7387/71240043.png](http://imageshack.us/a/img27/7387/71240043.png)

我的程序控制台弹出并挡住了路。这是一个瞬间弹出窗口，因为程序会在您双击它的瞬间拍摄屏幕截图。

我搜索了一些有关如何隐藏它的信息，并找到[了一个具有以下建议的论坛](http://forums.codeblocks.org/index.php?topic=9802.0)：

> 在目标选项（项目属性 -> 选项卡“构建目标”）中将应用程序类型从“控制台”更改为“GUI 应用程序”。

但是将其设置为 GUI 应用程序并没有摆脱瞬间控制台。

我尝试寻找隐藏控制台的代码，并找到[了一个示例](http://www.governmentsecurity.org/forum/topic/26476-c-how-to-hide-console-window/)：

```
HWND hWnd = GetConsoleWindow();
ShowWindow( hWnd, SW_HIDE ); 
```

但是，编写代码来隐藏控制台仍然会弹出控制台并在它出现的瞬间阻止屏幕截图。

我能做些什么来阻止控制台在那一瞬间出现？如果控制台只是被最小化，我不介意，只要它不会阻挡镜头。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T16:24:55.643

我认为仅仅切换类型是不够的，因为您还需要将入口点表单更改`main`为`WinMain`。看看这个如何制作无窗口应用程序的例子（[http://social.msdn.microsoft.com/Forums/en/vcgeneral/thread/82f506c4-ac1f-48c1-a5dc-51bfe99cf850](http://social.msdn.microsoft.com/Forums/en/vcgeneral/thread/82f506c4-ac1f-48c1-a5dc-51bfe99cf850)），我建议制作一个新的Win32 项目，然后复制您拥有的代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T18:11:06.263

哈克，但是...隐藏窗口后，您可以延迟足够长的时间以使其在屏幕上生效。在这里，我使用 C++11（`#include <thread>`对于 this_thread 和`#include <chrono>`毫秒），所以你需要使用 VS2012 来使用这个确切的代码来延迟。

```
HWND console = GetConsoleWindow();
if (!console)
    ; // handle error
BOOL was_visible = ShowWindow(console, SW_HIDE);

// delay for a fraction of a second...
std::this_thread::sleep_for(std::chrono::milliseconds(100));

// ... take screen shot

if (was_visible)
    ShowWindow(console, SW_SHOW); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-30T17:17:44.720

根据鲁道夫的建议，我做了研究，可以具体回答这个问题：

更改`int main()`为`int APIENTRY WinMain(HINSTANCE hInstance, HINSTANCE hPrevInstance, LPSTR lpCmdLine, int nShowCmd)`。（更正）这仅在设置为图形时才有效。

为了解决无法访问`int main`'s `argc`/`argv`选项的问题，请使用`__argc`and `__argv`，它是`stdlib.h`.

另请参阅[http://support.microsoft.com/kb/126571](http://support.microsoft.com/kb/126571)

# c++ - 多线程设计，保护C++中的全局成员

> ID：13143327
> 
> 赞同：2
> 
> 时间：2012-10-30T16:18:02.607
> 
> 标签：c++, multithreading, global, member

我正在用 QT 编写一个 c++ 应用程序，重点是速度优化。我想要一些对不同线程具有只读访问权限的全局对象。在打开线程之前，我必须初始化全局对象并用数据填充它们。

如何保护我的全局对象的设置功能，但仍然可以从主功能访问？

像现在这样的示例代码：

我的类.h

```
class MyObjectClass {
public:
void SetSome(const QList<QString> &value);
QList<QString> GetSome() const;

private:
    QList<QString> m_myMember;
}; 
```

主文件

```
#include "global.h" // some like: extern MyObjectClass g_InihalizedInMain;
#include "anyThread.h"

int main(){

g_InitializedInMain.SetSome() // This Shut work

MyThread thread;
thread.start();

//..
return 0;
} 
```

任何线程.cpp：

```
#include "global.h"

void thread::run()
{
MyObjectClass newObject = g_InihalizedInMain; //This shut work
g_InitializedInMain.GetSome();                  //This shut work
g_InitializedInMain.SetSome();                  //This shut not work and give me an error during compile time
newObject.SetSome();                    //This shut work
} 
```

如果您有一些设计想法给我，我会很高兴，非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T17:08:07.693

制作您的全局变量`static`，这意味着只有一个源文件可以访问它。然后，您可以提供可以从其他线程读取数据的访问器函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T18:10:37.393

对于初学者，我会不惜一切代价避免使用全局变量。

除了全局变量之外，您可以做的是在 main 中实例化一个变量（动态地或在堆栈上本地，取决于您的偏好）并将其设置在线程对象中（这称为`dependency injection`）

要仅从 main 控制 MyObjectClass 上的设置属性，我可以想到 2 个选项：

1.  通过 main 中的构造函数设置所有 MyObjectClass 属性，从而允许您删除 setter，但保留 getter。MyObjectClass 将是不可变的。

2.  创建一个包含 MyObjectClass 的所有可设置属性的上下文对象。此上下文对象只能传递给 MyObjectClass 构造函数。上下文对象应该在 main 中创建，调用适当的设置器，然后在从 main 实例化时传递到 MyObjectClass。MyObjectClass 类在内部使用上下文对象的这些属性，但没有它们的设置器。MyObjectClass 上当然会有可用的 getter，它会从内部上下文对象中获取值。MyObjectClass 将是不可变的，但这种方式更灵活一些。

我更喜欢第二种选择。这是一个代码示例：

我的类.h

```
class MyObjectContext {
public:
    void SetSome(const QList<QString> &value);
    QList<QString> GetSome() const;

private:
    QList<QString> m_myMember;
};

class MyObjectClass {
public:
    MyObjectClass(MyObjectContext *context) : context_(context) {}
    QList<QString> GetSome() const {return context_->GetSome();}

    // Put the rest of the important stuff here

private:
    MyObjectContext *context_;
    MyObjectClass(); // explicitly stating that the default ctor cant be called
}; 
```

主文件

```
int main(){

    // creating these objects on the stack, you may need
    // to create them dynamically, its up to you
    MyObjectContext context;
    context.SetSome() // This Should work

    MyObjectClass moc(&context);

    MyThread thread(&moc);
    thread.start();

    //..
    return 0;
} 
```

任何线程.h

```
class MyThread : public QThread { // Assuming you're inheriting from QThread
public:
    // instead of setting it via the ctor, you could consider adding a setter
    MyThread(MyObjectClass *moc) : moc_(moc) {}
    void run();

private:
    MyThread(); // explicitly stating that the default ctor cant be called
    MyObjecctClass *moc_
}; 
```

任何线程.cpp

```
void MyThread::run()
{
    moc_->GetSome();                  //This should work

    // Dont have to worry about the setters, since there are none
    // available for the MyObjectClass, which is now immutable
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T17:00:49.903

```
class MyPrivateObjectClass : private MyObjectClass
{
public:
   friend void main();
};

extern MyPrivateObjectClass g_InitializedInMain; 
```

# c++ - 多态性的 C++ 问题 - 数据被覆盖

> ID：13143333
> 
> 赞同：0
> 
> 时间：2012-10-30T16:18:20.323
> 
> 标签：c++, oop, object

我得到了这个例子

家长班`Vehicle`

子类`Car`, `Motorcycle`, &`Lorry`

这就是发生的事情：在`main.cpp`我创造

```
VehicleTwoD *vehicletwod[100];
Car *myCar = new Car();
Motorcycle *myMotorcycle = new motorCycle();
Lorry *myLorry = new Lorry(); 
```

这就是我所做的：

```
if(selection=="Car")
{
   vehicletwod[arrayCounter] = myCar;
   vehicletwod[arrayCounter]->setName(theName);
   vehicletwod[arrayCounter]->setYear(theYear);
}

if(selection=="Lorry")
{
   vehicletwod[arrayCounter] = myLorry;
   vehicletwod[arrayCounter]->setName(theName);
   vehicletwod[arrayCounter]->setYear(theYear);
}

if(selection=="Motorcycle")
{
   vehicletwod[arrayCounter] = myMotorcycle ;
   vehicletwod[arrayCounter]->setName(theName);
   vehicletwod[arrayCounter]->setYear(theYear);
}

cout << "Record successfully stored. Going back to the main menu " << endl; 
```

这里的问题`main.cpp`是某种`switch-case`带有提示的菜单，因此如果用户选择插入新车辆，他会选择车辆类型，并手动输入一些值，例如`theName`和`theYear`。然后它将被设置为`vehicletwod[arrayCounter]`.

当`vehicletwod`.

如果用户做了类似的事情

```
Car
Motorcycle
Car 
```

第 1 辆车的值将被最新`Car`的（第 2 辆车）覆盖

但是，如果他们输入

```
Car 
Motorcycle
Lorry 
```

这很好，因为每个对象只运行一次。

如何更改我的声明，使其不会覆盖之前同一个子类的数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T16:21:32.320

您需要为每个新条目创建一个新`Car`的`Motorcycle`和`Lorry`实例，因为现在您重用现有实例并以这种方式重写数据。你应该做：

```
if(selection=="Car")
{
   vehicletwod[arrayCounter] = new Car();
   vehicletwod[arrayCounter]->setName(theName);
   vehicletwod[arrayCounter]->setYear(theYear);
}

if(selection=="Lorry")
{
   vehicletwod[arrayCounter] = new Lorry();
   vehicletwod[arrayCounter]->setName(theName);
   vehicletwod[arrayCounter]->setYear(theYear);
}

if(selection=="Motorcycle")
{
   vehicletwod[arrayCounter] = new Motorcycle();
   vehicletwod[arrayCounter]->setName(theName);
   vehicletwod[arrayCounter]->setYear(theYear);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T16:21:49.170

每次您选择一辆新车时，您都必须创建一个全新的对象来持有它。替换你的行：

```
vehicletwod[arrayCounter] = myCar; 
```

和：

```
vehicletwod[arrayCounter] = new Car; 
```

对于其他类型也是如此。

# ruby-on-rails - 篮子 IF 参数 ROR

> ID：13143334
> 
> 赞同：2
> 
> 时间：2012-10-30T16:18:22.930
> 
> 标签：ruby-on-rails, ruby-on-rails-3, if-statement, checkout

我正在开发一个包含结帐篮的 Rails 应用程序，需要一些基本帮助。

我正在努力整合某些产品定价所需的逻辑论据。如果购物车中添加了五个或更多产品，我想做的是降低产品的价格。

我目前有具有典型关联的产品、line_items、购物车和订单的模型和控制器。

我确信`if and elseif`我可以在方法中定义一个简单的语句，但我很想知道其他人将如何将其作为最佳实践来实现？

在此先感谢您的帮助！艾丽

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T01:19:21.137

我不确定您何时使用 a`Cart`与`Order`. 假设您主要工作在`Cart`与`LineItems`. 在某些时候，我猜，`Cart`当用户输入他们的信用卡号码时，就会变成一个订单。

1.  首先我会说`Lineitem`应该有一个`discounted`字段。所以`LineItem`不一定存储折扣价；你让`Order`or`Cart`类确定它的实际最终价格。

2.  第二次使用和关联回调以在订单项添加到订单时自动应用折扣。

    ```
    class Cart
      has_many :line_items, 
          after_add: :calculate_volume_discount,   
          after_remove: :calculate_volume_discount

      # When a line item is added or removed determine if current items
      # are entitled to a discount
      def calculate_volume_discount line_item
        current_count = line_items.count
        line_items.each do |li|
          li.discounted = (current_count >= 5)
          li.save
        end  
      end
    end 
    ```

# objective-c - +[NSTimer timerWithTimeInterval:block:repeats:]: 发送到类的无法识别的选择器

> ID：13143335
> 
> 赞同：0
> 
> 时间：2012-10-30T16:18:26.007
> 
> 标签：objective-c, ios

我正在尝试学习 iDevice 编程*并*学习使用新的 3rd-party 库，该库将用于与项目的其他一些东西交互。唉，这个库的文档记录很差，而且我很难弄清楚一个示例程序是如何工作的（我团队关于它如何工作的两个主要理论是“巫毒”和“忍者魔法”）。

我一直在慢慢地将看起来像是核心功能一部分的部分（而不是为了使示例应用程序看起来专业而附加的所有花里胡哨的部分）复制到一个新项目中，并试图让它们工作. 现在我收到这个错误：`*** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '+[NSTimer timerWithTimeInterval:block:repeats:]: unrecognized selector sent to class 0x144e790'`

我已经从原始文件中复制了与计时器有关的所有内容，在此处复制：

```
@property (nonatomic) NSTimeInterval currentTime;
...
@synthesize currentTime;

// lots of other stuff that has nothing to do with Timers

-(void)setCurrentTime:(NSTimeInterval)time {
   [self willChangeValueForKey:@"currentTime"];
   currentTime = time;
   [self didChangeValueForKey:@"currentTime"];
} 
```

我需要添加什么选择器？

编辑：

应 tc. 的要求，我在库中查找该方法，并在其自己的文件中找到了该方法：

```
#import <Foundation/Foundation.h>

/**
 * A block based extension for NSTimer
 */

@interface NSTimer (EMAdditions)

/**
 * Allows you set a block for execution when the timer fires.
 * @param interval The time interval
 * @param block The block to execute
 * @param repeat A flag to indicate if the block should continuously repeat
 */
+(NSTimer *)timerWithTimeInterval:(NSTimeInterval)interval block:(void(^)(void))block repeats:(BOOL)repeat;

@end 
```

我无权访问库的源代码（它只是一个大的 .a 文件），但它不应该有这个方法的实现吗？我尝试对包含此文件的文件执行#import，但这并没有解决问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T18:22:22.963

将`NSTimer`类别添加到您的项目。[这](https://github.com/jivadevoe/NSTimer-Blocks)是文件（添加`NSTimer+Blocks.h`和`NSTimer+Blocks.m`）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T21:08:19.393

作为tc。指出，这是链接器的问题，不包括库的所有 NSTimer 部分。

解决方案是将`-all_load`标志添加到链接器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T16:24:03.857

好吧，从错误中可以看出 NSTimer 正在寻找这个选择器 [NSTimer timerWithTimeInterval:block:repeats:]

查看甚至不是一件事的文档，那么您使用的任何库都可能将该函数添加到 NSTimer 中吗？

在 NSTimer 上看起来相似的唯一现有函数是： [NSTimer timerWithTimeInterval: invocation: repeats:] [timerWithTimeInterval:target:selector:userInfo:repeats:]

如果您希望计时器调用 setCurrentTime 并且计时器在实现 setCurrentTime 的同一文件中初始化，您可以使用第二个，将目标设置为 self，并将选择器设置为 @selector(setCurrentTime:)

希望这可以帮助

# php - 使用 onchange 的复选框

> ID：13143337
> 
> 赞同：0
> 
> 时间：2012-10-30T16:18:49.723
> 
> 标签：php, ajax

我有动态生成的复选框，当复选框被选中时，onchange方法工作正常并且我的函数也被调用，当用户取消选中该框时，onchange方法调用我的预期函数问题是当复选框被选中时页面变为活动状态，这很好，但是当用户取消选中复选框时，页面的该部分再次变为活动状态，并且复选框“已选中”的值在第一次被选中后保持为是。有没有办法检测用户何时选择取消选中以使页面的活动部分变为非活动状态。

她是我的密码

```
echo  '<table width="85%" border="1"  cellpadding="0"; cellspacing="0" align="center">

        <tr>        
            <th width="23%" height="44" scope="col" align="left"> '.$query_rows['categoryTopic'].' <br><br><br></th>
            <th width="24%" scope="col">'.$Count.'</th>
            <th width="25%" scope="col"> 0 </th>
            <th width="28%" scope="col"> <form  name = "choose" method="post" action="activateImages.php">
            <input type="checkbox" value= "5" onChange="window.edit()" </form></th>
        </tr>
    </table>';
    }
    ?> 
```

Java代码：

```
<script type="text/jscript">
//this funciton will be called when user checks a check box. 
function edit(){

     //get selected category from the form 
    //var formName = 'choose';
    //var Category = document[formName]['choose'].value;

    //check if browser suports ajax
    var xmlhttp = null;      
    if(typeof XMLHttpRequest != 'udefined'){
      xmlhttp = new XMLHttpRequest();
    }

    else if(typeof ActiveXObject != 'undefined'){
        xmlhttp = new ActiveXObject('Microsoft.XMLHTTP');
    }

    else 
        throw new Error('You browser doesn\'t support ajax');

    //open connection with activateImages.php to recieve the active images as an acho
    xmlhttp.open("GET", "activateImages.php",true);         

    //echeck if ready to recieve        
    xmlhttp.onreadystatechange = function (){

    if(xmlhttp.readyState == 4)
      window.activate(xmlhttp);
    };

    xmlhttp.send(null);
    }

    //recieve the active images then insert them in the specified location of the page. 
    function activate(xhr){

        if(xhr.status == 200){
            document.getElementById('images').innerHTML = xhr.responseText;

        }
        else 
            throw new Error('Server has encountered an error\n'+
            'Error code = '+xhr.status);

}

</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T16:23:38.060

发布表单时，未选中的复选框不会发送到服务器。因此，除非您在 javascript 中明确发送空值，否则不应检查该值，而是检查它是否已设置：

```
if (isset($_POST['checkbox'])) { 
```

除此之外，这种代码和伪代码的混合存在一些错误，例如未关闭的 html 标记、复选框缺少名称属性、赋值而不是比较等。

**编辑：**似乎您实际上并没有向服务器发送任何内容，并且您正在混合 GET (javascript) POST (删除的 php 代码)。

# asp.net - SignalR 如何在内部工作：客户端

> ID：13143339
> 
> 赞同：3
> 
> 时间：2012-10-30T16:18:46.877
> 
> 标签：asp.net, signalr

我正在用 Java 编写自己的 SignalR 客户端，但遇到了一些麻烦。

首先我想实现 PersistentConnection 逻辑。我的服务器代码取自示例：

```
public class Battle : PersistentConnection
{
    protected override Task OnConnectedAsync(IRequest request, string connectionId)
    {
        return Connection.Broadcast("Connection " + connectionId + " connected");
    }

    protected override Task OnReconnectedAsync(IRequest request, IEnumerable<string> groups, string clientId)
    {
        return Connection.Broadcast("Client " + clientId + " re-connected");
    }

    protected override Task OnReceivedAsync(IRequest request, string connectionId, string data)
    {
        // return Connection.Broadcast("Connection " + connectionId + " sent ");
        return Connection.Send(connectionId, "Connection " + connectionId + " sent ");  
    }

    protected override Task OnDisconnectAsync(string connectionId)
    {
        return Connection.Broadcast("Connection " + connectionId + " disconncted");
    }

    protected override Task OnErrorAsync(Exception error)
    {
        return Connection.Broadcast("Error occured " + error);
    }
} 
```

从.NET客户端代码来看，我理解为了连接到服务器客户端应该：

1) 向响应发送请求`http://myserver/battle/negotiate`并`ConnectionId`从响应中获取

2) 发送请求到`http://myserver/battle/connect?transport=longPolling&connectionId=<received_connection_id>`

我的问题是客户应该做什么来保持连接？它应该如何收听服务器广播消息？

另一个问题是，在建立连接后尝试将消息从客户端发送到服务器时，我没有收到任何响应。我发送请求到`http://myserver/battle/send?transport=longPolling&connectionId=<received_connection_id>`。`OnReceivedAsync`总是调用方法，但我没有得到响应（与发送的数据无关）。

对于我的问题和 SignalR 工作的内部原则的任何解释，我将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-27T17:47:48.403

我试图做和你一样的事情！我已经为 Android 实现了 SignalR 客户端，我称之为 SignalA。[:) 在github](https://github.com/erizet/SignalA)上看看。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T14:36:12.263

SignalR 中使用了多种通信方法。我的理解是 SignalR 将使用它确定将与给定连接一起使用的最佳连接。

长轮询背后的一般思想是：客户端向服务器发送一个请求，超时时间很长。说 2 分钟或 5 分钟。如果服务器有消息要发送给客户端，则它会用该消息响应客户端请求。否则请求最终会超时，此时客户端会发起新的请求。因此，基本上，客户端几乎总是在调用服务器。服务器只有在有消息给客户端时才会回答。所以客户端可以将请求发送到服务器，然后说，90 秒后，服务器会收到一条给客户端的消息。

有关更多信息，请阅读此 Wikipedia 文章的长轮询部分：[http ://en.wikipedia.org/wiki/Push_technology](http://en.wikipedia.org/wiki/Push_technology)

但对于具体细节，您确实需要仔细检查 .NET 代码。不过，希望这个概述能让您充分了解那里发生了什么。

# java - 如何使用 OpenGL 将字符串绘制到窗口？

> ID：13143344
> 
> 赞同：0
> 
> 时间：2012-10-30T16:19:03.613
> 
> 标签：java, opengl

我正在创建一个游戏，但我有一个问题：我如何在屏幕上绘制文本，因为我想在玩家每次捡起东西或受伤时打印一些东西。我已经知道 Graphics 的 drawString() 函数，但如果我使用 OpenGL，我不确定这是否可以。是否有来自 OpenGL 的方法可以让我轻松地将文本打印到屏幕上？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T20:57:42.330

在 OpenGL 中，没有可调用的函数/方法将文本渲染到屏幕上。

您有两个选择： 1）使用库；或 2) 自己动手，创建自己的调用以将文本呈现到显示器。

1) 有许多不同的库可用于将文本呈现到显示器；然而，最明显和最容易获得的是在 GLUT 中。您可以使用其中的两个调用：

```
glutBitmapString() and glutStrokeString() 
```

其中第一个将以我猜可以称为 2d 方式的方式将文本呈现到显示器上（看起来像是粘贴在显示器的右侧）。后者带有显示 3d 文本。

你可以参考

```
http://freeglut.sourceforge.net/docs/api.php 
```

用于 API 参考。

2) 您可以创建一个函数/方法，使用标准的 OpenGL 函数将字符纹理呈现给显示器，或者您可以通过调用 glDrawPixels() 来使用模板缓冲区来生成字符。

我没有尝试过这些：我只是在想我的头，所以你的里程可能会有所不同。祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T17:33:22.777

不，OpenGL 中没有轻松打印文本的方法。您必须使用为此目的而存在的库之一，或者您必须自己编写它。

# ios - UITabBarController 和自定义控件充当标签栏

> ID：13143345
> 
> 赞同：0
> 
> 时间：2012-10-30T16:19:04.380
> 
> 标签：ios, objective-c, iphone, uitabbarcontroller, uitabbar

我有一个自定义标签栏控制器子类，而不是标签栏，我使用自定义 UIView。

问题是我无法让我的视图控制器出现。如果我打电话，我会看到白屏和“标签”

```
[super setViewControllers:] 
```

就外观而言，我得到了非常奇怪的人工制品。

所以我尝试`selectedViewController`直接设置。我有点空白。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T16:28:50.787

你能告诉我你是如何为标签定制视图的吗？

您是否删除了 tabBar 并添加了您的自定义 tabView。请记住，如果删除您的 tabBar，整个 tabBarController 将被删除..

因此，您只需从 tabBarController 隐藏 tabBar 并添加您的自定义`UIView`来代替 tabBar ，一切正常。您必须根据自定义视图中的按钮选择以编程方式选择选项卡索引。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-21T04:44:25.600

您可以使用视图控制器包含概念来实现自定义标签栏。

```
 [self addChildViewController:content];                 // 1

   content.view.frame = [self frameForContentController]; // 2

   [self.view addSubview:self.currentClientView];

   [content didMoveToParentViewController:self];          // 3 
```

也可以使用我的自定义控件 [Custom Tabbar Control](https://github.com/bhavya-kothari/BKSegmented-OR-TabbarViewController)

# eclipse - rj 没有为 eclipse/R Statet 安装

> ID：13143350
> 
> 赞同：2
> 
> 时间：2012-10-30T16:19:18.097
> 
> 标签：eclipse, r, statet

我知道这方面有几个帖子，所以如果我违反了礼仪，请道歉。就我而言，我已经尝试了其中的几个，但我似乎无法解决 rj 问题（正确安装它）。

我尝试了 CMD INSTALL 建议并将 tar 文件复制到我的 R 可执行目录

```
R CMD INSTALL --no-test-load rj_*.tar.gz 
```

我使用 DOS cmd 窗口运行它，但使用 * 符号失败，所以我通过导航到路径替换了确切的 rj tar 文件名... C:\Program Files\R\R-2.12.1\bin \x64\rj_0.5.0-5.tar.gz 并运行

```
R CMD INSTALL --no-test-load rj_0.5.0-5.tar.gz 
```

这似乎有效，因为 R 显示了所有已安装的 Java 包（包括 Rjava）

```
> ("rj" %in% installed.packages()[,"Package"])
[1] TRUE
> ("rJava" %in% installed.packages()[,"Package"])
[1] TRUE
> 
```

然而，在 Eclipse 环境中，我仍然收到 rj missing 错误。关于接下来要尝试什么的任何想法？我真的很想让调试功能在这里工作，并为此拉扯我的头发。

哦，即使它显示安装在 R 中。如果我尝试在 R 中启动，我会得到：

```
> library(rj)
Error : .onLoad failed in loadNamespace() for 'rj', details:
  call: .jcall("de/walware/rj/server/RJ", "Lde/walware/rj/server/RJ;", 
  error: RcallMethod: cannot determine object class
Error: package/namespace load failed for 'rj' 
```

![在此处输入图像描述](../Images/360222f47a9f90c1b326c5a463d7666c.png)

*   使用 Eclipse SDK 版本：3.8.0 StatET 3.01.02 rj_0.5.0-5

# c# - 如何以编程方式在企业 Wiki 站点的页面库中创建可编辑的 Wiki 页面

> ID：13143353
> 
> 赞同：4
> 
> 时间：2012-10-30T16:19:19.463
> 
> 标签：c#, sharepoint, sharepoint-2010, sharepoint-api

我是 SharePoint 的新手。我正在尝试以编程方式在 SharePoint 2010 中企业 Wiki 网站的页面库中创建一个 wiki 页面。这是我的代码：

```
using (SPSite site = new SPSite(SPContext.Current.Web.Url))
{
        SPWeb rootWeb = site.RootWeb;
        rootWeb.AllowUnsafeUpdates = true;
        SPList wiki = rootWeb.Lists["Pages"];
        SPFolder rootFolder = wiki.RootFolder;
        SPFile wikiPage = rootFolder.Files.Add(String.Format("{0}/{1}", rootFolder.ServerRelativeUrl, "MyWikiPage.aspx"), SPTemplateFileType.WikiPage);
        SPListItem wikiItem = wikiPage.Item;
        wikiItem["PublishingPageContent"] = "my demo content";
        wikiItem.UpdateOverwriteVersion();
        rootWeb.AllowUnsafeUpdates = false;
} 
```

该页面已创建，但问题是创建的页面不可编辑并且未插入演示内容。在编辑模式下打开时，没有可用的内容空间，并且编辑选项灰显。

我也尝试过像这样设置默认内容：

```
    wikiItem[SPBuiltInFieldId.WikiField] = "我的演示内容";
```

但这给出了一个无效的字段错误。

我也尝试用这行代码创建页面：

```
    SPFile wikiPage = SPUtility.CreateNewWikiPage(wiki, String.Format("{0}/{1}", rootFolder.ServerRelativeUrl, "MyWikiPage.aspx"));
```

但结果是完全一样的。

我已确认网站的“SharePoint Server Publishing”功能已开启，网站集的“SharePoint Server Publishing Infrastructure”功能已开启。

请帮忙。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T13:17:59.063

在 sharepoint.stackexchange.com 上的其他线程的帮助下，我想出了这个解决方案：

我们需要创建一个新的发布页面并相应地更新内容类型属性，而不是使用常规的 wiki 操作例程来定位页面库。

为了他人的利益，这是对我有用的代码：

```
using (SPSite site = new SPSite(SPContext.Current.Web.Url))
{
    SPWeb rootWeb = site.RootWeb;
    rootWeb.AllowUnsafeUpdates = true;
    SPList wiki = rootWeb.Lists["Pages"];
    String url = wiki.RootFolder.ServerRelativeUrl.ToString();
    PublishingSite pubSite = new PublishingSite(rootWeb.Site);
    string pageLayoutName = "EnterpriseWiki.aspx"; //Page Layout Name
    string layoutURL = rootWeb.Url + "/_catalogs/masterpage/" + pageLayoutName;
    PageLayout layout = pubSite.PageLayouts[layoutURL];
    PublishingWeb publishingWeb = PublishingWeb.GetPublishingWeb(rootWeb);
    PublishingPage newWikiPage;
    string myWikiPage = "MyWikiPage.aspx"; //Page name
    newWikiPage = publishingWeb.GetPublishingPages().Add(myWikiPage, layout);
    newWikiPage.Title = "My Wiki Page";
    newWikiPage.Update();
    rootWeb.AllowUnsafeUpdates = false;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-08-21T09:51:48.467

## 如何使用 SSOM 创建 wiki 页面

**C＃**

```
/// <summary>
/// Create Wiki Page
/// </summary>
/// <param name="wikiPages"></param>
/// <param name="pageName"></param>
/// <param name="pageContent"></param>
/// <returns></returns>
public static SPListItem CreateWikiPage(SPList wikiPages, string pageName, string pageContent)
{
   var web = wikiPages.ParentWeb;
   var pSite = new Microsoft.SharePoint.Publishing.PublishingSite(web.Site);
   var pageLayoutUrl = SPUtility.ConcatUrls(web.Site.Url,"/_catalogs/masterpage/EnterpriseWiki.aspx");
   var pageLayout = pSite.PageLayouts[pageLayoutUrl];
   var pWeb = Microsoft.SharePoint.Publishing.PublishingWeb.GetPublishingWeb(web);
   var wikiPage = pWeb.GetPublishingPages().Add(pageName, pageLayout);
   var wikiItem = wikiPage.ListItem;
   wikiItem["PublishingPageContent"] = pageContent;
   wikiItem.Update();
   return wikiItem;
} 
```

**电源外壳**

```
if ((Get-PSSnapin -Name Microsoft.SharePoint.PowerShell -ErrorAction SilentlyContinue) -eq $null)
{
    Add-PsSnapin Microsoft.SharePoint.PowerShell
}

Function Create-WikiPage([string]$WebUrl,[string]$PageName,[string]$PageContent)
{
    $web = Get-SPWeb $WebUrl
    $wikiPages = $web.Lists["Pages"]
    $pSite = New-Object Microsoft.SharePoint.Publishing.PublishingSite($web.Site) 
    $pageLayoutUrl = $web.Site.Url + "/_catalogs/masterpage/EnterpriseWiki.aspx"
    $pageLayout = $pSite.PageLayouts[$pageLayoutUrl]
    $pWeb = [Microsoft.SharePoint.Publishing.PublishingWeb]::GetPublishingWeb($web)
    $wikiPage = $pWeb.GetPublishingPages().Add($PageName, $pageLayout);
    $wikiPage.Title = [System.IO.Path]::GetFileNameWithoutExtension($PageName)
    $wikiItem = $wikiPage.ListItem
    $wikiItem["PublishingPageContent"] = $pageContent
    $wikiItem.Update()
} 
```

用法

```
Create-WikiPage -WebUrl "http://contoso.intranet.sp.dev/faq/" -PageName "FAQ.aspx" -PageContent "Welcome to FAQ" 
```

# ruby - Ruby 和谷歌地图 API

> ID：13143355
> 
> 赞同：1
> 
> 时间：2012-10-30T16:19:20.373
> 
> 标签：ruby, ruby-on-rails-3, google-maps-api-3

我正在使用以下网址请求方向：

```
http://maps.googleapis.com/maps/api/directions/json?origin=43.656877,-79.32085&destination=Montreal&sensor=false 
```

然后，谷歌发回一个巨大的 JSON，我想以比这更好的方式访问这些步骤：

```
response = open("http://maps.googleapis.com/maps/api/directions/json?origin=#{lat1},#{lng1}&destination=#{lat2},#{lng2}&sensor=false").read
response = JSON.parse(response)

response["routes"][0]["legs"][0]["steps"][0]["end_location"] 
```

有没有更漂亮的方式来访问 end_location 而不必使用所有这些数组表示法？我曾想过使用 OpenStruct，但也不理想。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T16:47:12.660

您可以替换`[0]`为`first`，这是更多字符，但概念更简单，速度稍快。

```
response["routes"].first["legs"].first["steps"].first["end_location"] 
```

或者，您也可以这样做：

```
["routes", 0, "legs", 0, "steps", 0, "end_location"].inject(response, &:fetch) 
```

# perl - Apache 看不到 pm 文件

> ID：13143357
> 
> 赞同：1
> 
> 时间：2012-10-30T16:19:28.937
> 
> 标签：perl, apache

我已经安装了 Apache 2.2 和草莓 perl。我有 textxx.pm。我准备了简单的脚本

```
#!/usr/bin/perl
use textxx;
print("HelloWorld!"); 
```

当我通过 cmd 运行它时，它可以工作。当我通过网络浏览器运行它时，出现错误：Can't locate textxx.pm in @INC (@INC contains: C:/strawberry/perl/site/lib C:/strawberry/perl/vendor/lib C:/草莓/perl/lib .)

这很奇怪，因为没有“使用”的脚本有效。

我的模块与脚本位于同一目录

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T16:42:04.353

您正在尝试使用 textxx.pm perl 模块.. 但在通过 apache 运行时找不到它，如果您删除 use 行，它显然会工作，因为它不是在寻找模块。

一个快速修复，如果您的 textxx.pm 在假设 C:/strawberry/perl/site/lib 中，那么只需将其添加到脚本顶部：

```
#!/usr/bin/perl
use lib "C:/strawberry/perl/site/lib";
use textxx;
print("HelloWorld!"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T04:23:44.353

缺少权限可能是问题所在，但我敢打赌，问题在于您希望 Perl 查找包含模块脚本的目录。Perl 不会这样做，至少默认情况下不会。

它可以从控制台工作，因为您设置的当前工作目录恰好与脚本相同，但是当您通过 apache 运行它时，情况并非如此。

要告诉 Perl 查找与脚本相同的目录，请添加以下内容，因为`use textxx;`：

```
use Cwd qw( realpath );
use File::Basename qw( dirname );
use lib dirname(realpath($0)); 
```

# algorithm - 大哦嵌套while

> ID：13143361
> 
> 赞同：2
> 
> 时间：2012-10-30T16:19:40.330
> 
> 标签：algorithm, loops, big-o

我在大问题方面遇到了一些挑战。这些不是作业问题。我写这些问题是为了更好地理解这里的概念。

```
function func(n)
{
     int k,i = 0;
     while(k < n){ < --- Guessing this outer loop is O(n/2)
        k = n + 2
        i = 0;
        while(i < k){ <--- Not sure what this is?
            i ++;
            i = i * i;
         }
      }         
} 
```

如果你能向我解释内部循环中发生了什么，以及你的逻辑如何以你最终得到的 big-o 符号结束，我真的很高兴。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T17:15:34.050

外部循环及其测试`(k < n)`及其步骤`k = n + 2`将运行一次，提供 O(1) 的复杂性因子。

内部循环有 test `(i < k)`，也就是`(i < n+2)`，最后有 steps `i++; i=i*i;` ，

```
i = (...(((1+1)^2+1)^2+1)^2+ ... )^2 > n+2` 
```

这使得`i`超指数的价值。也就是说，`i`在 p 次传递中比 exp(exp(p)) 增长得更快，因此总体复杂度小于 O(log log n)。这是一个比前面提到的 O(log n) 更严格的界限，后者也是一个上限，但没有那么严格。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-30T16:34:51.210

第二个循环对 的值进行平方，`i`直到达到`k`。如果我们忽略常数项，这个循环会`O(log k)`及时运行。

**为什么？**因为如果你解决了`i^m = k`，你就会得到`m = constant * log(k)`.

正如您所说，外循环`O(n)`及时运行。

由于更大的值`k`取决于`n`，您可以说内部循环运行在`O(log n)`其中给您一个整体的复杂性`O(n log n)`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-30T17:25:30.923

虽然@alestanis 提供的内容在我看来比评论中的分析*更*准确，但我仍然认为这不太正确。

让我们创建一个小测试程序，打印出`i`内部循环产生的值：

```
#include <iostream>

void inner(double k) {
    double i;

    i = 0.0;
    while(i < k) {
        i ++;
        i = i * i;
        std::cout << i << "\n";
     }
}

int main() {
    inner(1e200);
    return 0;
} 
```

当我运行它时，我得到的结果是：

```
1
4
25
676
458329
2.10066e+011
4.41279e+022
1.94727e+045
3.79186e+090
1.43782e+181
1.#INF 
```

如果迭代次数是对数的，那么达到特定数字的迭代次数应该与限制中的位数成正比。例如，如果它是对数的，它应该需要大约 180 次迭代才能达到 1e181，给定或取一些（相当小的）常数因子。这显然不是这里的情况——通过查看科学记数法中结果的指数很容易看出，这大约是每次迭代的数字数量的两倍，其中对数意味着每次迭代大约增加一个数字。

我不是很确定，但我相信这会将内部循环置于 O(log log N) 之类的位置，而不仅仅是 O(log N)。我认为很容易同意外循环可能打算为 O(N) （尽管它目前被编写为只执行一次），将整体复杂性置于`O(N log log N)`.

我觉得有必要补充一点，从实用的角度来看，`O(log log N)`通常可以将其视为基本恒定的——如上所示，您可以使用典型的双精度浮点数指定的最高限制仅在 11 次迭代中达到。因此，对于大多数实际目的，整体复杂性可以被视为`O(N)`.

[哎呀——在我写这篇文章的时候没有注意到他已经回答了，但看起来@jwpat7 已经得出了与我相同的结论。向他/她致敬。]

# vb.net - silverlight 客户端类扩展属性在提交期间设置

> ID：13143365
> 
> 赞同：2
> 
> 时间：2012-10-30T16:19:50.203
> 
> 标签：vb.net, silverlight

只是关于 Silverlight 的一个问题。我正在使用扩展类客户端。

假设我有一张人员表，其中包含 firstname、secondname 和 age 列。

在客户端，我将 person 类扩展为 GuessedAge。这会查看数据库中是否存储了一个年龄，如果没有，它会猜测这个人是 30 岁。

```
Public Property GuessedAge As Nullable(Of Integer)
    Get

        If Me.Age IsNot Nothing then

             Return Age
        Else
             Return 30
        End If

    End Get
    Set(value As Nullable(Of Integer))

        Me.Age = value

    End Set
End Property 
```

我的问题是当我提交更改时调用了 Set 。假设我对名字进行了更改（并且根本没有更改任何其他内容，因此对任何年龄位都没有更改），然后在提交过程中将触发 set 方法，因此将值设置为年龄。

我只希望在用户实际在表中键入值时使用 set 方法。

任何想法为什么被称为？我正在尝试删除 Datagrid 中 GuessedAge 的列，只是为了检查它不是数据网格问题。当没有绑定到 GuessadAge 的 UI 元素时，仍然会调用 set 方法。

还有任何想法如何阻止这个被调用？

谢谢！

# sql-server-2008 - 使用 'JOIN' 从表中选择与表二中特定列匹配的前五条记录

> ID：13143367
> 
> 赞同：1
> 
> 时间：2012-10-30T16:19:50.247
> 
> 标签：sql-server-2008

我有两张桌子：

```
Audit
AUDITID |  CUSTOMER  |  CUSTOMERNUMBER
001     |    BILLY   |  11111 
002     |    HOLLY   |  12222 
003     |    HOLLY   | 12222
004     |    DON     | 13333
005     |    DON     | 13333

Summary
AuditID | Summary | Date
001     |  1      |   30/1/2012
001     |  2      | 1/10/2012
001     | 3       |20/10/2012
004     | 4       | 2/09/2012
004     | 5       | 3/01/2012 
```

我想为每个与 Audit 表中的 Audit ID 匹配的不同 AuditID 选择前五个记录表。

我到目前为止的 sql 脚本是：

```
 SELECT Auditid, summary, date
    FROM [Summary] SL1
    INNER JOIN [Audit] AL1 ON SL1.[AuditID] = AL1.[AuditID]  
    WHERE AL1.[AuditID] IN (  
    SELECT TOP 5 AuditID  
    FROM [Audit] AL2  
    WHERE AL1.[CustomerNumber] = AL2.[CustomerNumber]   
    ORDER BY AL2.[AuditID] DESC
    ) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T16:24:09.777

您可以[`ROW_NUMBER`](http://msdn.microsoft.com/en-us/library/ms186734.aspx)使用`PARTITION BY`：

```
WITH CTE AS
(
    SELECT Auditid, summary, date,
      ,  RN = ROW_NUMBER() OVER (PARTITION BY SL1.AuditID ORDER BY SL1.Date ASC)
    FROM [Summary] SL1
    INNER JOIN [Audit] AL1 ON SL1.[AuditID] = AL1.[AuditID]  
)
SELECT Auditid, summary, date FROM CTE
WHERE RN <= 5 
```

这将返回按日期排序的每个 AuditID 的 TOP 5 记录（最早的在前，`DESC`否则使用）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T16:42:10.027

您必须指定要从摘要中获取“顶部”记录的顺序 - 我选择按摘要执行，您可以按日期或其他方式执行。我还做了 top2 以使用您的示例数据显示结果。

```
select audit.auditid,Summary,DATE 
from 
    Audit inner join Summary Sum_Tab1 on Audit.AUDITID=Sum_Tab1.AUDITID 
where 
    Sum_Tab1.SUMMARY in 
        (SELECT top 2 SUMMARY from Summary Sum_Tab2 
            where Sum_Tab1.AUDITID=Sum_Tab2.AUDITID order by summary) 
```

# javascript - 如何使用Javascript让表单提交两次

> ID：13143369
> 
> 赞同：0
> 
> 时间：2012-10-30T16:20:07.210
> 
> 标签：javascript, forms

我需要将表单提交到新窗口，然后将稍微更改的值提交到原始窗口中的同一表单。我有以下功能来做到这一点。

```
//Now lets create the page making function!
function createInternetPage() {

//Start by checking to see if the internet page has been requested. 
req_int = document.getElementById("marterial_internet").checked;

    if (req_int == true){
        //If it has, create the internet page.
//Send the completed form to submit in a new window, creating the broadcast page. 
document.getElementById("new_material").setAttribute("target","_blank");
document.forms["new_material"].submit();

//Add "(Internet)" to the current form title
var title = document.getElementById("material_title").value;
var title_new = title + " (Internet)";
title = document.getElementById("material_title").value = title_new;

//Then submit the form on the existing window to make the internet page. 
document.getElementById("new_material").setAttribute("target","_self");
document.forms["new_material"].submit();
        }

        //If it has not been requested then just submit the normal form. 
        else {
            //alert("NOT Checked");
            document.getElementById("new_material").setAttribute("target","_self");
            document.forms["new_material"].submit();
        }

} 
```

一切都很好，除了原始窗口上的表单永远不会被提交。它将 material_title 值更改为在其后添加“ (Internet)”，但不提交表单。

任何想法为什么会这样以及如何解决这个问题？

**编辑：** 当添加一个 setTimeout 延迟时，见下文，同样的事情正在发生。除了最后一个表单提交之外，一切都运行。

```
function delay() {
    //Send the completed form to submit in a new window, creating the broadcast page. 
document.getElementById("new_material").setAttribute("target","_blank");
document.forms["new_material"].submit();

}
function delay2(){
    var title = document.getElementById("material_title").value;
var title_new = title + " (Internet)";
title = document.getElementById("material_title").value = title_new;

//Then submit the form on the existing window to make the internet page. 
document.getElementById("new_material").setAttribute("target","_self");
document.forms["new_material"].submit();
}

//Now lets create the page making function!
function createInternetPage() {

//Start by checking to see if the internet page has been requested. 
req_int = document.getElementById("marterial_internet").checked;

    if (req_int == true){
        //If it has, create the internet page.
delay()
//Add "(Internet)" to the current form title
setTimeout('delay2()',10000);
        }

        //If it has not been requested then just submit the normal form. 
        else {
            //alert("NOT Checked");
            document.getElementById("new_material").setAttribute("target","_self");
            document.forms["new_material"].submit();
        }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T16:22:43.763

您没有给表单足够的时间来执行操作。您需要分解请求。使用 setTimeout 执行第二个操作。

如果您要提交到同一个域，则始终可以使用 Ajax 进行第一次提交，而无需打开新窗口。

更好的是让服务器处理请求并进行第二次提交。

# delphi - 如何将字节数组转换为变体

> ID：13143372
> 
> 赞同：3
> 
> 时间：2012-10-30T16:20:15.040
> 
> 标签：delphi, variant

如何将字节数组转换为 Variant？我有一个 WebService 应该接收一个字节数组，但它只接受 VARIANT 类型的变量，我想知道如何转换以便将它作为 Web 服务的参数传递。

谢谢你

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-30T17:05:54.833

根据评论线索，您需要创建一个`SAFEARRAY`字节。在 Delphi 中是这样完成的：

```
V := VarArrayCreate([0, N-1], varByte); 
```

或者，如果`SAFEARRAY`需要基于 1 的索引：

```
V := VarArrayCreate([1, N], varByte); 
```

然后，您可以使用`V[i] := ...`.

如果您有一个 Delphi dynamic `array of Byte`，并且预期`SAFEARRAY`使用基于 0 的索引，那么您可以简单地编写：

```
V := a; 
```

如果您有大量数据要传输，那么 RTL 提供的逐个元素地戳数据几乎是没有希望的。即使是简单的`v := a`方法也会导致逐个元素的复制，这对于大量数据来说会非常慢。

在你的位置上，我会一口气把数组blit。像这样：

```
var
  i: Integer;
  a: array of Byte;
  V: Variant;
  SafeArray: PVarArray;
....
// populate a
V := VarArrayCreate([0,high(a)], varByte);
SafeArray := VarArrayAsPSafeArray(V);
Move(Pointer(a)^, SafeArray.Data^, Length(a)*SizeOf(a[0])); 
```

或者，如果您需要使用基于 1 的索引：

```
V := VarArrayCreate([1,Length(a)], varByte);
SafeArray := VarArrayAsPSafeArray(V);
Move(Pointer(a)^, SafeArray.Data^, Length(a)*SizeOf(a[0])); 
```

# html - 基于 URL 捕获的 Joomla 文章链接

> ID：13143374
> 
> 赞同：0
> 
> 时间：2012-10-30T16:20:33.227
> 
> 标签：html, url, joomla, hyperlink

我正在做一个 Joomla 项目。我需要根据事件 id（而不是文章 url）动态链接到唯一的文章。

该站点处理事件注册，并根据其事件 ID 填充多个事件。

此处示例：[http](http://wodrocket.com/index.php?option=com_ohanah&view=event&id=92) ://wodrocket.com/index.php?option=com_ohanah&view=event&id= 92 为清晰起见截图： [http ://www.diigo.com/item/image/3bgjc/oik2](http://www.diigo.com/item/image/3bgjc/oik2)

需要链接到不同的事件结果文章。它应该获取 URL 中的“id”并找到与该事件 ID 相关联的结果文章。

joomla 中的文章不允许这种类型的动态链接，因此它可能需要自定义 url 解决方案。

# java - 使用 build.xml 为项目中的特定包构建单独的 jar？

> ID：13143378
> 
> 赞同：3
> 
> 时间：2012-10-30T16:20:49.780
> 
> 标签：java, ant

如何为项目中的特定包构建单独的 jar？我有一个这样的项目结构：

```
Project Something
  |
  |-> DifferentPackages 
```

还是使用 build.xml 为每个包创建一个 jar？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T16:27:14.410

在您的构建 xml 中，分别定义一项任务以生成一个 jar。在任务中，使用`fileset`仅包含特定的包。

完成后，创建一个包装器任务并使其依赖于上面创建的所有 jar 任务，或者将所有 jar 创建任务包装在新任务本身中。将此作为默认目标。

例如

```
<project name="project" default="AllJars" basedir=".">
  <target name="AllJars" depends="compile">
   <mkdir dir="dist"/>
   <jar jarfile="dist/jar1.jar">
     <fileset dir="build">
         <include name="package1/*.class"/>
     </fileset>
    </jar>
    <jar jarfile="dist/jar2.jar">
     <fileset dir="build">
         <include name="package2/*.class"/>
     </fileset>
    </jar>
  </target>
 </project> 
```

# java - 使用 Com4J 检索窗口标题

> ID：13143383
> 
> 赞同：0
> 
> 时间：2012-10-30T16:21:05.743
> 
> 标签：java, window, title, com4j

我有一个在 java 应用程序中使用 COM4J 的 MS Office 桥，我正在尝试检索 word 应用程序的窗口标题。

有办法做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T16:42:07.037

经过很长时间尝试这样做，我没有找到任何解决方案。我改变我的解决方案并使用另一种方式解决问题。

# sql-server - 如何使用 SSIS 包自动执行存储过程？

> ID：13143386
> 
> 赞同：2
> 
> 时间：2012-10-30T16:21:13.670
> 
> 标签：sql-server, tsql, stored-procedures, ssis

我有一个使用执行 SQL 任务通过 SQL SSIS 执行的存储过程。

该任务具有以下内容：

```
USE [OPPY_DWUSD]
GO
DECLARE @return_value int
EXEC    @return_value = [dbo].[generate_merge_scdbk]
    @Schema = N'dim',
    @Dimension = N'VARIETY',
    @ETLSchema = N'stg',
    @ETLTable = N'vw_VARIETY',
    @Execute = 1

SELECT  'Return Value' = @return_value
GO 
```

现在，按照我的设置方式，我有多个具有相同代码但值不同的执行 SQL 任务，大约 20 个执行 SQL 任务。

有没有更清洁的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-30T17:05:52.477

这是执行此操作的一种方法。该示例使用带有 SQL Server 2012 后端的 SSIS 2008 R2。

创建一个表来存储您的参数值。假设表名是*dbo.SProcValues*。根据您的存储过程定义，表架构将如下所示。

```
CREATE TABLE dbo.SProcValues(
    Id int IDENTITY(1,1) NOT NULL,
    SProcName nvarchar(40) NOT NULL,
    SchemaName nvarchar(20) NOT NULL,
    Dimension nvarchar(40) NOT NULL,
    ETLSchema nvarchar(20) NOT NULL,
    ETLTable nvarchar(40) NOT NULL,
    IsExecute bit NOT NULL
) 
GO 
```

让我们使用以下脚本插入一些示例数据。

```
INSERT INTO dbo.SProcValues 
    (SProcName, SchemaName, Dimension, ETLSchema, ETLTable, IsExecute) VALUES
    ('dbo.sp_generate_merge', 'dim1', 'dimension1', 'stg1', 'table1', 1),
    ('dbo.sp_generate_merge_scdbk', 'dim2', 'dimension2', 'stg2', 'table2', 1),
    ('dbo.sp_generate_merge_scdbk', 'dim3', 'dimension3', 'stg3', 'table3', 0),
    ('dbo.sp_generate_merge', 'dim4', 'dimension4', 'stg4', 'table4', 0);
GO 
```

在 SSIS 包上，假设您已经建立了数据源和连接管理器。创建以下变量。变量*SProcValues*将保存我们存储在上述表格中的参数集。变量*SQLInnerQuery*将保存稍后将在内部执行 SQL 任务中使用的查询。其他变量与表中可用的每一列相关，因此我们可以遍历每一行并将其保存在变量中。

将以下查询粘贴到变量*SQLGetParameters的值中*

`SELECT SProcName, SchemaName, Dimension, ETLSchema, ETLTable, IsExecute FROM dbo.SProcValues`

![变量](../Images/b27c4323e939f874184ca883d8ce7c30.png)

选择变量*SQLInnerQuery*并按 F4 查看属性。将属性*EvaluateAsExpression*设置为**True**，然后在*Expression*属性上单击**省略号**按钮。

 *![SQLInnerQuery](../Images/3030b351948b12de33aae1ca6b55614b.png)

我们需要设置一个表达式来计算 EXEC 存储过程语句，该语句稍后可以提供给内部执行 SQL 任务。设置以下表达式。

`"EXEC " + @[User::SProcName] + " @Schema = ?, @Dimension = ?, @ETLSchema = ?, @ETLTable = ?, @IsExecute = ?"`

如果您单击编辑器上的 Evaluate Expression 按钮，您可以看到表达式的计算结果。您还会注意到下面的屏幕截图中没有存储过程名称，这是因为包变量 SProcName 当前没有任何值。在运行期间，SProcName 将被分配表中的值，并且此表达式将自动解析自身。 ![表达](../Images/dead28609e51c33db6bf92343c467675.png)

在 SSIS 包上，拖放一个执行 SQL 任务。此任务将运行以下查询以获取存储在表 dbo.SProcValues 中的参数值列表。在执行 SQL 任务上配置常规页面，如下所示。该示例使用 OLEDB 连接，连接管理器/数据源被命名为 Practice。

![第一次执行 SQL 任务 - 常规](../Images/21d00ecadee53cca0a24e14eab82e85c.png)

配置执行 SQL 任务的结果集页面，将查询的结果集存储到对象变量中。

![首次执行 SQL 任务 - 结果集](../Images/688393b731bcd8f8d110aeb20237fbfd.png)

现在第一个 Execute SQL Task 已配置为获取应传递给存储过程的参数值列表，您需要遍历记录。

拖放一个 Foreach 循环容器。将执行 SQL 任务的优先级容器连接到 Foreach 循环容器。配置 Foreach 循环容器的 Collection 页面，如下所示。我们正在使用 ADO 枚举器遍历结果集。

![Foreach 循环 - 集合](../Images/58155def72adfc42834931f375853565.png)

在 Foreach 循环容器上配置变量映射页面，如下所示。当我们遍历每一行时，我们将列值存储在各个变量中，以便我们可以将其传递给下一个执行 SQL 任务以运行存储过程。

![Foreach 循环 - 变量映射](../Images/c04919e75e2256bd027e3c5bc253985b.png)

在 Foreach 循环容器中拖放一个 Execute SQL 任务，这样每次我们遍历结果集中的一行时都会执行该任务。如下所示配置执行 SQL 任务。

### 笔记

您可能希望根据您的要求在第二个执行 SQL 任务上配置*ResultSet属性。*如果选择 ResultSet，则需要配置适当的对象变量来接受结果集。对于本示例，我将其保留为*None 。*

![第二次执行 SQL 任务 - 常规](../Images/dcbca2015125a8f8c5a72e0f9338107b.png)

配置要作为参数传递给存储过程的值。

![第二次执行 SQL 任务 - 参数映射](../Images/ed97f66908c83fb88467869648cf768e.png)

最后，控制流看起来像这样。

![控制流](../Images/4c14de6485bbe2243c87fbd62446f6f9.png)

当程序包运行时，循环将针对上述 SELECT 查询返回的尽可能多的记录执行存储过程，前提是您已将表行中定义的所有存储过程在数据库中可用。我已经创建了存储过程`dbo.sp_generate_merge_scdbk`并`dbo.sp_generate_merge`具有相同的参数定义。这就是包成功执行的原因。

![执行](../Images/cee6e250aa8754da3fed2c9e5c01ebdc.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-30T16:25:33.000

你有正确的概念，只需要在执行 SQL 任务上使用变量、foreach 循环和参数等概念。

## 控制流

您的控制流看起来像这样

![控制流](../Images/b8f569d683cc219e075c80ce7147eecf.png)

## 变量

我在 SSIS 中定义了 6 个变量

*   尺寸 | 字符串 | 种类
*   ETLSchema | 字符串 | stg
*   电子表格 | 字符串 | vw_VARIETY
*   执行 | 整数32 | 1
*   记录集 | 对象 | 系统对象
*   架构 | 字符串 | 暗淡

第一个执行 SQL 任务将是一个查询或类似的可枚举的东西。目前，有一个硬编码查询来生成提供的查询值。您的解决方案可能只是一个 SELECT 的 UNIONed 链。此步骤的目标是填充 RecordSet 变量。

我的执行 SQL 任务返回完整的结果集 ![执行 SQL](../Images/5647e3ccc023a20a6797b480dccb111e.png)

我就这样把它推到我的对象里

![结果集选项卡](../Images/8dfd9939c42d261728c1432ddf8f0465.png)

## ForEach 循环容器（ADO 记录集）

ForEach 循环容器将消耗我们事先建立的可枚举的东西。它将遍历每一行，我们将从对象中弹出值并将它们分配给局部变量。

将枚举器更改为`Foreach ADO Enumerator`. 选择我们用结果填充的对象`User::RecordSet`，然后使用枚举模式`Rows in first table`

![FELC](../Images/497df921f6a2a9c2a52e904b2d310262.png)

在“变量映射”选项卡中，我们将确定值的基于序数的位置（第 0 列映射到变量 X）。这里唯一的技巧是确保您的 SSIS 变量数据类型与源查询的结果集中的数据类型相匹配。请注意，这是一个基于零的序数系统。

![FELC 变量映射](../Images/790c1b2b05608913e65ce6ea76d474ae.png)

此时，如果您单击运行，您会看到它枚举了您发送到 RecordSet 变量中的所有行。我发现此时运行它有助于确保我的所有数据类型都对齐。

## 内部执行 SQL 任务

我已经接受了您的查询并用占位符替换了硬编码值。将使用 OLEDB 连接`?`，而 ADO.NET 将使用命名的`@varname`.

![执行 SQL 常规](../Images/b7698273bc1940df95cbe72904dd68b2.png)

在“参数映射”选项卡中，只需将这些局部变量映射到占位符。

![执行 SQL 参数映射](../Images/a04d5fa2fcc797c3df222058b0d52e9b.png)

现在你有一个很好的模板来运行具有不同值的相同过程。*

# c - 访问冲突

> ID：13143391
> 
> 赞同：-4
> 
> 时间：2012-10-30T16:21:24.573
> 
> 标签：c, pointers

当我在 Visual Studio 中调试我的 c 项目时，我得到了这个输出：

```
'SR.exe': Loaded 'C:\Windows\System32\ntdll.dll', Symbols loaded (source information stripped).
'SR.exe': Loaded 'C:\Windows\System32\kernel32.dll', Symbols loaded (source information stripped).
'SR.exe': Loaded 'C:\Windows\System32\KernelBase.dll', Symbols loaded (source information stripped).
'SR.exe': Loaded 'C:\Windows\System32\msvcr100d.dll', Symbols loaded.
First-chance exception at 0x00171d63 in SR.exe: 0xC0000005: Access violation reading location 0xcccccccc.
Unhandled exception at 0x00171d63 in SR.exe: 0xC0000005: Access violation reading location 0xcccccccc. 
```

是什么导致了问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T16:24:00.377

您尝试在该地址读取某些内容，但`0xcccccccc`该地址不是有效的内存地址。

可能是指针初始化错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T16:29:40.687

Turn on "Break when an exception is thrown" in Visual Studio. Quick Key: Ctrl-Alt-E and select Native Run Time Checks and C++ exceptions. Re-debug, and it should stop on the errant code.

# gcc - Distro 提供的交叉编译器与自定义构建的 gcc

> ID：13143393
> 
> 赞同：0
> 
> 时间：2012-10-30T16:21:25.820
> 
> 标签：gcc, arm, cross-compiling, archlinux, raspberry-pi

我打算为Raspberry Pi交叉编译，基本上是一台小型ARM计算机。主机将是一个运行 Arch Linux 的 i686 机器。

我的第一反应是使用 Arch Linux 提供的交叉编译器 arm-elf-gcc-base 和 arm-elf-binutils。但是，我阅读的每个 wiki 和帖子似乎都使用了某些版本的自定义 gcc 构建。他们似乎花费了大量时间来烹饪自己的 gcc。问题是他们从不说为什么使用他们的 gcc 比另一个重要。

1.  库存发行版提供的交叉编译器能否用于在通用内核和应用程序中构建 Raspberry Pi 或 ARM？

2.  ARM架构是否需要多个编译器？如果是这样，为什么，因为单个 gcc 可以支持所有 x86 变体？

3.  如果是 2)，那么我如何推断特定版本的 gcc 支持的目标子集？

4.  更一般的问题，什么一般用例需要自定义 gcc 构建？

请尽可能技术，我想知道为什么以及如何。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T21:39:47.283

当开发人员谈论为与他们自己的（主机）不同的机器（目标）构建软件（交叉编译）时，他们使用该术语`toolchain`来描述构建二进制文件所需的工具集。这是因为当您需要构建可执行二进制文件时，您需要的不仅仅是编译器。

您需要例程 ( [crt0.o](http://www.embecosm.com/appnotes/ean9/html/ch05s02.html) ) 根据操作系统和标准库的要求来初始化运行时。您需要一组标准库，并且这些库需要了解目标内核，因为系统调用 API 和几个操作系统级别配置（fe 页面大小）和数据结构（fe 时间结构）。

在硬件方面，有一组不同的 ARM 架构。架构可以向后兼容，但工具链本质上是二进制的，并且针对特定架构。默认情况下，您可以拥有最广泛的架构，但对于已经受到约束的环境（嵌入式设备）来说，这不会太有成效。如果您拥有最新的架构，那么它对于基于旧架构的目标将没有用处。

当您在您的主机上为您的主机构建二进制文件时，编译器可以从其自己的环境中查找所有必要的位或使用主机上的内容 - 因此上述大多数细节对开发人员是不可见的。但是，当您为不同于主机类型的目标构建时，工具链必须了解硬件、操作系统和标准库的详细信息。您将这些告诉工具链的方式是……根据可能需要某种程度的引导的那些细节来构建它。（或者，如果工具链支持/为它构建，您可以通过大量参数来执行此操作。）

因此，当有一个通用（库存）交叉编译工具链时，它已经设置了一些目标细节，可能无法满足您的要求。请参阅这个关于 Ubuntu 上情况的最新[问题作为示例。](https://stackoverflow.com/q/12963209/1163019)

# ruby-on-rails - 如何在不知道确切键的情况下删除 Rails 中的一组缓存项？

> ID：13143395
> 
> 赞同：1
> 
> 时间：2012-10-30T16:21:33.047
> 
> 标签：ruby-on-rails, caching

我有以下问题：

我有一个产品的索引控制器，索引控制器可以有无限的查询字符串组合，即。

```
/products?category=5&color=6 
```

现在，通过使用参数作为键来存储所有这些已经很容易了：

```
caches_action :index, :cache_path => Proc.new { |c| c.params } 
```

当您需要在添加、删除或更改产品时清除所有索引缓存时，就会出现问题。据我所知，您需要知道使缓存对象过期的密钥。您不能在扫地机中执行以下操作：

```
def after_update(product)
   expire_action(product, :all)
end 
```

我对缓存标记进行了一些研究，但无法让我看到的 Gems 做我需要的工作，或者根本无法让它们工作。我看到的宝石是[Cashier](https://github.com/twinturbo/cashier)和[Rails-Cache-Tags](https://github.com/take-five/rails-cache-tags)。我尝试使用 Cashier 执行以下操作：

```
caches_action :index, :cache_path => Proc.new { |c| c.params }, :tag => "products" 
```

并在清扫器文件中使用：

```
Cashier.expire "products" 
```

但是在尝试使用 Cashier 进行任何操作时，会出现以下错误：

```
uninitialized class variable @@adapter in Cashier 
```

使用 rails-cache-tags 我尝试执行以下操作：

```
caches_action :index, :cache_path => Proc.new { |c| c.params }, :tags => %w(products) 
```

然后在清扫器文件中使用以下内容：

```
cache.delete_tag "products" 
```

但这不起作用——它没有清除缓存。做我想做的事情的正确方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T16:33:39.517

您可以调用[`expire_fragment`](http://api.rubyonrails.org/classes/ActionController/Caching/Fragments.html#method-i-expire_fragment)which 可以将 a`Regexp`作为参数：

> 将删除任何匹配的片段，因此`%r{pages/\d*/notes}`可能会删除所有注释。

# java - Guava Charmatcher 静态初始化慢

> ID：13143401
> 
> 赞同：9
> 
> 时间：2012-10-30T16:21:48.000
> 
> 标签：java, guava

更新：看起来我的 13.0.1 正在从这个 diffed CharMatcher 调用代码。

[http://code.google.com/p/guava-libraries/source/diff?spec=svn69ad96b719d7cd3d872a948d7454f17b816a21c2&r=464b0cfab7c3b6713c35e6f3ae7426542668c77b&format=side&path=/guava/smatchrc/com/google/commoner/base](http://code.google.com/p/guava-libraries/source/diff?spec=svn69ad96b719d7cd3d872a948d7454f17b816a21c2&r=464b0cfab7c3b6713c35e6f3ae7426542668c77b&format=side&path=/guava/src/com/google/common/base/CharMatcher.java)

我似乎对 Guava 的 Charmatcher 有疑问。我目前正在编写一些 JUnit 测试，我注意到第一个测试需要一些时间（15 秒以上），但未来的测试都大致相同（0.3 秒），大多数测试运行相同代码。

我对代码的分析表明，Guava 库中的 Charmatcher 似乎是罪魁祸首。看起来 CharMatcher 中有一些静态初始化代码，这可能是它需要这么长时间的真正原因。有什么方法可以禁用或优化此行为？wiki 页面或帮助文件中是否缺少某些内容？

Guava 版本 13.0.1，系统：Linux 64，Eclipse 3.6.1

编辑：我用以下代码构建了一个测试应用程序：

```
import com.google.common.base.CharMatcher;

public class Main {
    public static void main(String[] args) {
        // Using system instead of stopwatch to isolate library.
        long startTime = System.currentTimeMillis();
        CharMatcher.is(' ');
        long endTime = System.currentTimeMillis();
        System.out.println("took " + String.valueOf(endTime-startTime) + " ms");

        startTime = System.currentTimeMillis();
        CharMatcher.is('d');
        endTime = System.currentTimeMillis();
        System.out.println("2nd took " + String.valueOf(endTime-startTime) + " ms");
    }
} 
```

这导致以下输出：

```
took 15945 ms
2nd took 0 ms 
```

我在 Eclipse 中运行了这个，减去了 JUnit 框架和谷歌的 guava 库。我还打包了一个可执行字符并收到了类似的结果。在我运行探查器后，我将进行第二次编辑。

谢谢你的帮助。

编辑 2：分析结果：

```
Main.main(String[])                                                                  22,556 ms
com.google.common.base.CharMatcher.<clinit>()                                     22.556 ms                                    
    com.google.common.base.CharMatcher.precomputed()                                 22,550 ms                      
        com.google.common.base.Platform.precomputeCharMatcher(CharMatcher)           22,550 ms
            com.google.common.base.CharMatcher.precomputedInternal()                  22,550 ms
                com.google.common.base.CharMatcher.slowGetChars()                    13,638 ms
                com.google.common.base.CharMatcher.setBits(CharMatcher$LookupTable)  8,911 ms 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-06T01:57:05.167

**更新：**这已在 Guava 14中[修复。](http://code.google.com/p/guava-libraries/issues/detail?id=1192)

您遇到了 u21 中存在的某种 JIT 错误，可能是更早的版本，但至少在某些更高的 JDK 版本中没有。这是 u21 中测试程序的 -XX:+PrintCompilation 输出：

```
 1       java.util.Arrays::binarySearch0 (72 bytes)
  2       com.google.common.base.CharMatcher$Or::matches (28 bytes)
  3       com.google.common.base.CharMatcher$12::matches (22 bytes)
  2   made not entrant  com.google.common.base.CharMatcher$Or::matches (28 bytes)
  4       com.google.common.base.CharMatcher$11::matches (17 bytes)
  5       java.util.Arrays::binarySearch (9 bytes)
  6       com.google.common.base.CharMatcher$Or::matches (28 bytes)
  1%      com.google.common.base.CharMatcher::slowGetChars @ 9 (52 bytes)
  6   made not entrant  com.google.common.base.CharMatcher$Or::matches (28 bytes)
  7       com.google.common.base.CharMatcher$Or::matches (28 bytes)
  7   made not entrant  com.google.common.base.CharMatcher$Or::matches (28 bytes)
  1%  made not entrant  com.google.common.base.CharMatcher::slowGetChars @ -2 (52 bytes)
  2%      com.google.common.base.CharMatcher::slowGetChars @ 9 (52 bytes)
  8       com.google.common.base.CharMatcher$Or::matches (28 bytes)
  8   made not entrant  com.google.common.base.CharMatcher$Or::matches (28 bytes)
  2%  made not entrant  com.google.common.base.CharMatcher::slowGetChars @ -2 (52 bytes)
  3%      com.google.common.base.CharMatcher::slowGetChars @ 9 (52 bytes)
  9       com.google.common.base.CharMatcher$Or::matches (28 bytes)
  9   made not entrant  com.google.common.base.CharMatcher$Or::matches (28 bytes)
  3%  made not entrant  com.google.common.base.CharMatcher::slowGetChars @ -2 (52 bytes)
  4%      com.google.common.base.CharMatcher::slowGetChars @ 9 (52 bytes)
 10       com.google.common.base.CharMatcher$Or::matches (28 bytes)
 10   made not entrant  com.google.common.base.CharMatcher$Or::matches (28 bytes)
  4%  made not entrant  com.google.common.base.CharMatcher::slowGetChars @ -2 (52 bytes)
 11       com.google.common.base.CharMatcher$Or::matches (28 bytes)
  5%      com.google.common.base.CharMatcher::slowGetChars @ 9 (52 bytes)
 11   made not entrant  com.google.common.base.CharMatcher$Or::matches (28 bytes)
 12       com.google.common.base.CharMatcher$Or::matches (28 bytes)
  5%  made not entrant  com.google.common.base.CharMatcher::slowGetChars @ -2 (52 bytes)
 12   made not entrant  com.google.common.base.CharMatcher$Or::matches (28 bytes)
  6%      com.google.common.base.CharMatcher::slowGetChars @ 9 (52 bytes)
 13       com.google.common.base.CharMatcher$Or::matches (28 bytes)
 13   made not entrant  com.google.common.base.CharMatcher$Or::matches (28 bytes)
  6%  made not entrant  com.google.common.base.CharMatcher::slowGetChars @ -2 (52 bytes)
  7%      com.google.common.base.CharMatcher::slowGetChars @ 9 (52 bytes)
 14       com.google.common.base.CharMatcher$Or::matches (28 bytes)
 15       com.google.common.base.CharMatcher::slowGetChars (52 bytes)
 14   made not entrant  com.google.common.base.CharMatcher$Or::matches (28 bytes)
  7%  made not entrant  com.google.common.base.CharMatcher::slowGetChars @ -2 (52 bytes)
 16       com.google.common.base.CharMatcher$Or::matches (28 bytes)
 16   made not entrant  com.google.common.base.CharMatcher$Or::matches (28 bytes)
 17       com.google.common.base.CharMatcher$Or::matches (28 bytes)
 17   made not entrant  com.google.common.base.CharMatcher$Or::matches (28 bytes)
  8%      com.google.common.base.CharMatcher::slowGetChars @ 9 (52 bytes)
 18       com.google.common.base.CharMatcher$Or::matches (28 bytes)
 18   made not entrant  com.google.common.base.CharMatcher$Or::matches (28 bytes)
 19       com.google.common.base.CharMatcher$Or::matches (28 bytes)
 19   made not entrant  com.google.common.base.CharMatcher$Or::matches (28 bytes)
 20       com.google.common.base.CharMatcher$Or::matches (28 bytes)
  8%  made not entrant  com.google.common.base.CharMatcher::slowGetChars @ -2 (52 bytes)
 20   made not entrant  com.google.common.base.CharMatcher$Or::matches (28 bytes)
 21       com.google.common.base.CharMatcher$Or::matches (28 bytes)
 21   made not entrant  com.google.common.base.CharMatcher$Or::matches (28 bytes)
 22       com.google.common.base.CharMatcher$Or::matches (28 bytes)
  9%      com.google.common.base.CharMatcher::slowGetChars @ 9 (52 bytes)
 22   made not entrant  com.google.common.base.CharMatcher$Or::matches (28 bytes)
 23       com.google.common.base.CharMatcher$Or::matches (28 bytes)
 23   made not entrant  com.google.common.base.CharMatcher$Or::matches (28 bytes)
 24       com.google.common.base.CharMatcher$Or::matches (28 bytes)
 24   made not entrant  com.google.common.base.CharMatcher$Or::matches (28 bytes)
  9%  made not entrant  com.google.common.base.CharMatcher::slowGetChars @ -2 (52 bytes)
 25       com.google.common.base.CharMatcher$Or::matches (28 bytes)
 25   made not entrant  com.google.common.base.CharMatcher$Or::matches (28 bytes)
 26       com.google.common.base.CharMatcher$Or::matches (28 bytes)
 26   made not entrant  com.google.common.base.CharMatcher$Or::matches (28 bytes)
 10%      com.google.common.base.CharMatcher::slowGetChars @ 9 (52 bytes)
 27       com.google.common.base.CharMatcher$Or::matches (28 bytes)
 27   made not entrant  com.google.common.base.CharMatcher$Or::matches (28 bytes)
 28       com.google.common.base.CharMatcher$Or::matches (28 bytes)
 28   made not entrant  com.google.common.base.CharMatcher$Or::matches (28 bytes)
 10%  made not entrant  com.google.common.base.CharMatcher::slowGetChars @ -2 (52 bytes)
 29       com.google.common.base.CharMatcher$Or::matches (28 bytes)
 29   made not entrant  com.google.common.base.CharMatcher$Or::matches (28 bytes)
 30       com.google.common.base.CharMatcher$Or::matches (28 bytes)
 30   made not entrant  com.google.common.base.CharMatcher$Or::matches (28 bytes)
 11%      com.google.common.base.CharMatcher::slowGetChars @ 9 (52 bytes)
 31       com.google.common.base.CharMatcher$Or::matches (28 bytes)
 31   made not entrant  com.google.common.base.CharMatcher$Or::matches (28 bytes)
 32       com.google.common.base.CharMatcher$Or::matches (28 bytes)
 32   made not entrant  com.google.common.base.CharMatcher$Or::matches (28 bytes)
 11%  made not entrant  com.google.common.base.CharMatcher::slowGetChars @ -2 (52 bytes)
 33       com.google.common.base.CharMatcher$Or::matches (28 bytes)
 33   made not entrant  com.google.common.base.CharMatcher$Or::matches (28 bytes)
 34       com.google.common.base.CharMatcher$Or::matches (28 bytes)
 34   made not entrant  com.google.common.base.CharMatcher$Or::matches (28 bytes)
 35       com.google.common.base.CharMatcher$Or::matches (28 bytes)
 12%      com.google.common.base.CharMatcher::slowGetChars @ 9 (52 bytes)
 35   made not entrant  com.google.common.base.CharMatcher$Or::matches (28 bytes)
 36       com.google.common.base.CharMatcher$Or::matches (28 bytes)
 36   made not entrant  com.google.common.base.CharMatcher$Or::matches (28 bytes)
 37       com.google.common.base.CharMatcher$Or::matches (28 bytes)
 37   made not entrant  com.google.common.base.CharMatcher$Or::matches (28 bytes)
 12%  made not entrant  com.google.common.base.CharMatcher::slowGetChars @ -2 (52 bytes)
 38       com.google.common.base.CharMatcher$Or::matches (28 bytes)
 38   made not entrant  com.google.common.base.CharMatcher$Or::matches (28 bytes)
 39       com.google.common.base.CharMatcher$Or::matches (28 bytes)
 39   made not entrant  com.google.common.base.CharMatcher$Or::matches (28 bytes)
 13%      com.google.common.base.CharMatcher::slowGetChars @ 9 (52 bytes)
 40       com.google.common.base.CharMatcher$Or::matches (28 bytes)
 40   made not entrant  com.google.common.base.CharMatcher$Or::matches (28 bytes)
 41       com.google.common.base.CharMatcher$Or::matches (28 bytes)
 41   made not entrant  com.google.common.base.CharMatcher$Or::matches (28 bytes)
 13%  made not entrant  com.google.common.base.CharMatcher::slowGetChars @ -2 (52 bytes)
 42       com.google.common.base.CharMatcher$Or::matches (28 bytes)
 42   made not entrant  com.google.common.base.CharMatcher$Or::matches (28 bytes)
 43       com.google.common.base.CharMatcher$Or::matches (28 bytes)
 43   made not entrant  com.google.common.base.CharMatcher$Or::matches (28 bytes)
 44       com.google.common.base.CharMatcher$Or::matches (28 bytes)
 14%      com.google.common.base.CharMatcher::slowGetChars @ 9 (52 bytes)
 44   made not entrant  com.google.common.base.CharMatcher$Or::matches (28 bytes)
 45       com.google.common.base.CharMatcher$Or::matches (28 bytes)
 45   made not entrant  com.google.common.base.CharMatcher$Or::matches (28 bytes)
 46       com.google.common.base.CharMatcher$Or::matches (28 bytes)
 46   made not entrant  com.google.common.base.CharMatcher$Or::matches (28 bytes)
 14%  made not entrant  com.google.common.base.CharMatcher::slowGetChars @ -2 (52 bytes)
 47       com.google.common.base.CharMatcher$Or::matches (28 bytes)
 47   made not entrant  com.google.common.base.CharMatcher$Or::matches (28 bytes)
 48       com.google.common.base.CharMatcher$Or::matches (28 bytes)
 48   made not entrant  com.google.common.base.CharMatcher$Or::matches (28 bytes)
 15%      com.google.common.base.CharMatcher::slowGetChars @ 9 (52 bytes)
 49       com.google.common.base.CharMatcher$Or::matches (28 bytes)
 49   made not entrant  com.google.common.base.CharMatcher$Or::matches (28 bytes)
 50       com.google.common.base.CharMatcher$Or::matches (28 bytes)
 50   made not entrant  com.google.common.base.CharMatcher$Or::matches (28 bytes)
 15%  made not entrant  com.google.common.base.CharMatcher::slowGetChars @ -2 (52 bytes)
 51       com.google.common.base.CharMatcher$Or::matches (28 bytes)
 51   made not entrant  com.google.common.base.CharMatcher$Or::matches (28 bytes)
 52       com.google.common.base.CharMatcher$Or::matches (28 bytes)
 52   made not entrant  com.google.common.base.CharMatcher$Or::matches (28 bytes)
 16%      com.google.common.base.CharMatcher::slowGetChars @ 9 (52 bytes)
 53       com.google.common.base.CharMatcher$Or::matches (28 bytes)
 53   made not entrant  com.google.common.base.CharMatcher$Or::matches (28 bytes)
 54       com.google.common.base.CharMatcher$Or::matches (28 bytes)
 54   made not entrant  com.google.common.base.CharMatcher$Or::matches (28 bytes)
 16%  made not entrant  com.google.common.base.CharMatcher::slowGetChars @ -2 (52 bytes)
 55       com.google.common.base.CharMatcher$Or::matches (28 bytes)
 55   made not entrant  com.google.common.base.CharMatcher$Or::matches (28 bytes)
 56       com.google.common.base.CharMatcher$Or::matches (28 bytes)
 56   made not entrant  com.google.common.base.CharMatcher$Or::matches (28 bytes)
 57       com.google.common.base.CharMatcher$Or::matches (28 bytes)
 17%      com.google.common.base.CharMatcher::slowGetChars @ 9 (52 bytes)
 57   made not entrant  com.google.common.base.CharMatcher$Or::matches (28 bytes)
 58       com.google.common.base.CharMatcher$Or::matches (28 bytes)
 58   made not entrant  com.google.common.base.CharMatcher$Or::matches (28 bytes)
 59       com.google.common.base.CharMatcher$Or::matches (28 bytes)
 59   made not entrant  com.google.common.base.CharMatcher$Or::matches (28 bytes)
 17%  made not entrant  com.google.common.base.CharMatcher::slowGetChars @ -2 (52 bytes)
 60       com.google.common.base.CharMatcher$Or::matches (28 bytes)
 60   made not entrant  com.google.common.base.CharMatcher$Or::matches (28 bytes)
 61       com.google.common.base.CharMatcher$Or::matches (28 bytes)
 61   made not entrant  com.google.common.base.CharMatcher$Or::matches (28 bytes)
 18%      com.google.common.base.CharMatcher::slowGetChars @ 9 (52 bytes)
 62       com.google.common.base.CharMatcher$Or::matches (28 bytes)
 62   made not entrant  com.google.common.base.CharMatcher$Or::matches (28 bytes)
 63       com.google.common.base.CharMatcher$Or::matches (28 bytes)
 63   made not entrant  com.google.common.base.CharMatcher$Or::matches (28 bytes)
 18%  made not entrant  com.google.common.base.CharMatcher::slowGetChars @ -2 (52 bytes)
 64       com.google.common.base.CharMatcher$Or::matches (28 bytes)
 64   made not entrant  com.google.common.base.CharMatcher$Or::matches (28 bytes)
 65       com.google.common.base.CharMatcher$Or::matches (28 bytes)
 65   made not entrant  com.google.common.base.CharMatcher$Or::matches (28 bytes)
 19%      com.google.common.base.CharMatcher::slowGetChars @ 9 (52 bytes)
 66       com.google.common.base.CharMatcher$Or::matches (28 bytes)

<I omitted ~500 very similar lines here>

143%  made not entrant  com.google.common.base.CharMatcher::setBits @ -2 (30 bytes)
144%      com.google.common.base.CharMatcher::setBits @ 2 (30 bytes)
144%  made not entrant  com.google.common.base.CharMatcher::setBits @ -2 (30 bytes)
145%      com.google.common.base.CharMatcher::setBits @ 2 (30 bytes)
145%  made not entrant  com.google.common.base.CharMatcher::setBits @ -2 (30 bytes)
took 7599 ms
2nd took 0 ms 
```

这是 u34 的相同输出：

```
 64   1       java.util.Arrays::binarySearch0 (72 bytes)
 68   2       com.google.common.base.CharMatcher$Or::matches (28 bytes)
 68   3       com.google.common.base.CharMatcher$12::matches (22 bytes)
 70   4       com.google.common.base.CharMatcher$11::matches (17 bytes)
 71   5       java.util.Arrays::binarySearch (9 bytes)
 71   1%      com.google.common.base.CharMatcher::slowGetChars @ 9 (52 bytes)
 76   2      made not entrant  com.google.common.base.CharMatcher$Or::matches (28 bytes)
 76   6       com.google.common.base.CharMatcher$Or::matches (28 bytes)
 88   1%     made not entrant  com.google.common.base.CharMatcher::slowGetChars @ -2 (52 bytes)
 88   6      made not entrant  com.google.common.base.CharMatcher$Or::matches (28 bytes)
 88   7       com.google.common.base.CharMatcher::slowGetChars (52 bytes)
 89   8       com.google.common.base.CharMatcher$Or::matches (28 bytes)
 91   9       com.google.common.base.CharMatcher$8::matches (14 bytes)
 91   2%      com.google.common.base.CharMatcher::slowGetChars @ 9 (52 bytes)
 98  10       java.lang.String::indexOf (166 bytes)
 98  11       java.lang.String::indexOf (151 bytes)
102   3%      com.google.common.base.CharMatcher::setBits @ 2 (30 bytes)
113  12       com.google.common.base.CharMatcher::setBits (30 bytes)
113  13       com.google.common.base.CharMatcher$LookupTable::set (15 bytes) 
```

正如你所看到的，在 u34 中它是一个更加理智的地狱。看起来 u21 中发生的事情是[OSR](https://stackoverflow.com/q/9105505/149138)（影响`slowGetChars`方法，因为它有一个大循环）和递归超态调用（影响`CharMatcher$Or`和其他子类- 在递归链`CharMatcher`的末尾调用）的某种组合产生了一个完美的`CharMatcher$Or`JIT 反优化和后续重新编译的风暴，这在 u34 中得到了解决。

尽管如此，我认为 Guava 家伙在静态初始化期间创建 65k 元素 LUT 有点滥用，即使您从不使用有问题的匹配器，当 JIT 正常工作时，这仍然需要大约 50 毫秒。我提交[了一个针对番石榴的错误](http://code.google.com/p/guava-libraries/issues/detail?id=1192)，让我们看看维护者是否同意:)。*更新：*该错误在我提交此文件后的几天内得到修复，修复将在 Guava 14 中。这就是我所说的快速周转！

**原帖如下：**

我有完全相同的行为并跑到这篇文章中寻找解决方案。

查看代码，似乎他们正在制作一个 65k 元素（每个元素占用一位）查找表并检查每个字符是否匹配，由于用于定义匹配器的*流畅*样式，这需要许多嵌套函数调用：

```
 public static final CharMatcher INVISIBLE = inRange('\u0000', '\u0020')
      .or(inRange('\u007f', '\u00a0'))
      .or(is('\u00ad'))
      .or(inRange('\u0600', '\u0604'))
      .or(anyOf("\u06dd\u070f\u1680\u180e"))
      .or(inRange('\u2000', '\u200f'))
      .or(inRange('\u2028', '\u202f'))
      .or(inRange('\u205f', '\u2064'))
      .or(inRange('\u206a', '\u206f'))
      .or(is('\u3000'))
      .or(inRange('\ud800', '\uf8ff'))
      .or(anyOf("\ufeff\ufff9\ufffa\ufffb"))
      .withToString("CharMatcher.INVISIBLE")
      .precomputed(); 
```

那是触发长静态初始化的代码，在我的快速盒子上大约需要 7 秒。这是您的应用在我的盒子上的输出：

```
took 6814 ms
2nd took 0 ms 
```

我正在提交一个番石榴错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-30T20:51:44.253

作为快速帮助，请尝试从[源代码库](http://code.google.com/p/guava-libraries/source/checkout)切换到最新版本。那里有一些变化，例如方法`slowGetChars`消失[了](http://code.google.com/p/guava-libraries/issues/detail?id=1049#c2)。它曾经有点慢，但远不及发生在你身上的事情。

对于其他人来说，它的运行速度要快数百倍，而且无法重现它很难提供帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-30T18:15:18.920

刚刚测试过：

```
@Test
public void testCharMatcherSlow() throws Exception {
    System.out.println(CharMatcher.JAVA_DIGIT.matches('1'));
} 
```

执行时间为 0.06 秒。还查看了 CharMatcher 代码，没有什么可以解释您遇到的缓慢行为。您应该用模拟替换 CharMatcher 以查看它不是问题，并且可能使用分析器找出原因。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-30T19:13:11.003

I just ran the exact benchmark you provided, and got

> took 74 ms
> 
> 2nd took 0 ms

...Perhaps the problem is on Eclipse's end? Are you running in debug mode?

# ios - Xcode 4.5：如何修复我的文本视图，以便它们在 iPad 上以纵向和横向模式正确显示？

> ID：13143404
> 
> 赞同：0
> 
> 时间：2012-10-30T16:22:03.733
> 
> 标签：ios, xcode, ipad

我有一个信息应用程序。我选择使用文本视图，因为我可以简单地复制信息并将其粘贴到视图中。

我希望文本视图在纵向模式和横向模式下都正确显示在视图控制器的顶部。该视图在纵向模式下正确显示，但是当我将 iPad 旋转到横向模式时，一些文本被截断。

我应该提到我正在使用故事板。另外，为了其他人（包括我自己）的利益，如果涉及任何代码，请注明代码所属的位置。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T16:34:13.933

这是您的解决方案：您必须简单地找出自动调整大小的正确配置。就这样。通过在更改后构建您的项目来尝试一下。这应该可以帮助你。

![在此处输入图像描述](../Images/63cc02d64eb8dd369e4fc6e0b0fdcc71.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T18:06:43.863

如果您以编程方式添加 TextView，那么您只需要设置适当的自动调整大小掩码，例如：`textView.autoresizingMask = UIViewAutoresizingFlexibleLeftMargin | UIViewAutoresizingFlexibleRightMargin`，但您可能需要根据 textview 的位置和您想要的方式使用不同的选项来获得所需的内容当设备旋转时被操纵。

# ruby - 模型属性事件的面向对象设计模式

> ID：13143407
> 
> 赞同：0
> 
> 时间：2012-10-30T16:22:18.490
> 
> 标签：ruby, oop, design-patterns, object-oriented-analysis

我试图找出用面向对象设计原则封装以下场景的最佳方法。哪种类型的设计模式最适合？

我在下面添加了非常基本的类定义，基本上一个人有一个计划和一张信用卡。当一个人更改他们的计划时，我们希望向他们收取差额（如果计划的成本更高）并创建一个事件

我*可以*在回调或观察者中执行此操作，检查`Plan`for 是否发生了`Person`变化，但是在具有大量跨模型行为的较大系统中，这变得难以管理并且难以通过许多影响状态的不相关回调进行测试。

```
class Person
   has_one :plan
   has_one :credit_card
   has_many :events
end

class Plan
   attr_accessible :cost
end

class CreditCard
  def charge_card(amount)
    ...
  end
end

class Event
  attr_accessible :message
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T16:32:29.283

如果我理解正确，您的信用卡就是您的条件，您的帐单会因此而有所不同。[恕我直言，策略](http://www.oodesign.com/strategy-pattern.html)模式可能是适合的模式。

[用策略替换条件](http://www.industriallogic.com/xp/refactoring/conditionalWithStrategy.html)

# oracle - JPA createEntityManager 导致 Oracle 955 错误

> ID：13143408
> 
> 赞同：1
> 
> 时间：2012-10-30T16:22:20.497
> 
> 标签：oracle, jpa, persistence, ora-00955

我创建了一个简单的 JAVA 应用程序来学习数据库连接。

我在 Oracle 11g 数据库中有表 USR_BOOKS。使用 EclipseLink(JPA 2.0) 持久性库。

使用“从数据库创建实体”，我在 Java 中创建了一个类，并创建了 JPA 控制器类。

一切似乎都很好，除了我总是得到

```
 [EL Warning]: 2012-10-30 16:50:31.957--ServerSession(1278203495)--Exception 
       [EclipseLink-4002] (Eclipse Persistence Services - 2.3.2.v20111125-r10461): org.eclipse.persistence.exceptions.DatabaseException
    Internal Exception: java.sql.SQLSyntaxErrorException: ORA-00955: name is already used by an existing object

    Error Code: 955
    Call: CREATE TABLE USR_BOOKS (ID NUMBER(19) NOT NULL, NAZOV VARCHAR2(255) NULL, PRIMARY KEY (ID))
    Query: DataModifyQuery(sql="CREATE TABLE USR_BOOKS (ID NUMBER(19) NOT NULL, NAZOV VARCHAR2(255) NULL, PRIMARY KEY (ID))") 
```

我没有在任何地方调用 CREATE TABLE 查询，但直到我调用函数

```
 EntityManager em = emf.createEntityManager(); 
```

错误不存在看起来函数 createEntityManager() 创建了 SQL 语句并将其发送到数据库中。

我尝试从数据库中删除表。然后程序在数据库中创建表 USR_BOOKS - 同样，我不会不小心调用任何可能导致它的函数。

这基本上是我的代码：

```
 EntityManagerFactory emf = Persistence.createEntityManagerFactory("JavaOracleDBPU2");
    EntityManager em = emf.createEntityManager();
    UsrBooksJpaController booksController = new UsrBooksJpaController(emf);
    List<UsrBooks> usrBooksAll = booksController.findUsrBooksEntities();
    System.out.println(usrBooksAll); 
```

代码有效，甚至从表中打印数据，只是得到错误

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T20:06:12.093

可能在 persistence.xml [eclipselink.ddl-generation](http://wiki.eclipse.org/EclipseLink/Examples/JPA/DDL)属性中确实有值`create-tables`。请尝试`none`：

```
<property name="eclipselink.ddl-generation" value="none"/> 
```

# macos - 如何在自制软件上使用 mpi 支持来构建提升？

> ID：13143409
> 
> 赞同：5
> 
> 时间：2012-10-30T16:22:20.697
> 
> 标签：macos, boost, mpi, homebrew, openmpi

根据这篇文章（[https://github.com/mxcl/homebrew/pull/2953](https://github.com/mxcl/homebrew/pull/2953)），标志“ `--with-mpi`”应该启用对相关自制公式的boost_mpi构建支持，所以我试图通过自制软件安装boost，如下所示：

```
brew install boost --with-mpi 
```

但是，实际的 boost mpi 库并未在构建中，因此无法找到。根据：[https ://github.com/mxcl/homebrew/pull/15689，目前正在围绕此进行一些工作](https://github.com/mxcl/homebrew/pull/15689)

总之，我目前可以构建提升，但似乎“ `--with-mpi`”标志被忽略了。有人可以检查一下，我是否应该能够在 Mac OS X Mountain Lion (10.8) 上构建 boost（支持 mpi）？

（详细）输出生成以下行：

```
MPI auto-detection failed: unknown wrapper compiler mpic++
Please report this error to the Boost mailing list: http://www.boost.org
You will need to manually configure MPI support.

warning: skipping optional Message Passing Interface (MPI) library.
note: to enable MPI support, add "using mpi ;" to user-config.jam.
note: to suppress this message, pass "--without-mpi" to bjam.
note: otherwise, you can safely ignore this message. 
```

不知道我该如何解决这个问题并获得要构建的 mpi 东西 - 有什么想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-09-25T04:55:03.017

以防万一这有助于其他人，这就是我解决这个问题的方法。主要错误是`MPI auto-detection failed: unknown wrapper compiler mpic++`，在命令行中输入任何 mpic++ 都证实它对我来说不能正常工作。我使用 brew 安装 open-mpi，但在安装 boost 的详细输出中显示了相同的错误。运行`brew doctor`表明 openmpi 没有正确链接，所以我修复了这些错误并重新运行`brew -v install boost --with-mpi --without-single`，它最终构建并安装了所有库而没有问题

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-02-20T23:31:15.273

对于遇到此问题的任何人，该软件包已迁移`boost-python`到`boost-mpi`. `boost`利用`brew install boost-mpi`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-28T23:03:08.280

让它在 OSX 10.11.5 上运行。我试过brew，但没有运气。

假设你已经安装了 gcc。以下是我所做的：

**1.查找并禁用（但不要删除）clang**

叮当总是让人头疼。在构建 Boost 时会有很多警告。

`which clang`，这应该给你`/usr/bin/clang`

重命名它: `sudo mv clang clang_mac_remove`, 也为 clang++: `sudo mv clang++ clang++_mac_remove`。如果将来需要，您可以将名称改回来。

**2\. 安装 OpenMPI**

如果您已经使用 brew 安装，请先卸载。因为默认情况下它会使用 clang 作为编译器包装器。您需要将包装器更改为`gcc`.

下载软件包。

将包装编译器指定为`gcc`和`g++`：

```
./configure CC=gcc CXX=g++ F77=ifort FC=ifort --prefix=/usr/local 
```

下面可能需要很长时间。

```
make all

sudo make install 
```

参考：[https ://wiki.helsinki.fi/display/HUGG/Open+MPI+install+on+Mac+OS+X](https://wiki.helsinki.fi/display/HUGG/Open+MPI+install+on+Mac+OS+X)

**3\. 安装 Boost MPI**

下载软件包。

运行`./bootstrap.sh`（可以先打开并指定`toolset`to `gcc`，否则默认`darwin`为mac）。

`using mpi ;`在`project-config.jam`文件中添加。然后`./b2 —with-mpi`只会构建 mpi 库。

然后，所有构建的库都可以在文件夹中找到`~/Downloads/boost_1_61_0/stage/lib`。

将它们复制或移动到`/usr/local/lib`或任何其他常用的库路径。

参考： http: [//www.boost.org/doc/libs/1_61_0/doc/html/mpi/getting_started.html](http://www.boost.org/doc/libs/1_61_0/doc/html/mpi/getting_started.html)

**4\. 使用 Boost MPI 编译**

图书馆目录 =`-L/usr/local/lib`

包括 =`-I/usr/local/include/`

链接器 =`-lboost_mpi -lboost_serialization`

例如

```
mpic++ -std=c++11 -I/usr/local/include/ -c boost_test.cpp -L/usr/local/lib -lboost_mpi -lboost_serialization 
```

祝你好运！

# c++ - Qt GraphicsItem 转换影响场景中的所有项目

> ID：13143410
> 
> 赞同：-1
> 
> 时间：2012-10-30T16:22:24.543
> 
> 标签：c++, qt, graphics, embedded

我有这个嵌入式 Qt 应用程序，它使用 QGraphics 框架来显示 Web 视图。Web 视图的尺寸为 1280*720 像素，QGraphicsView 设置为在这些坐标 (0,0, 1280x720) 处渲染场景。

我正在尝试在右上角（1100,50）添加一个加载指示器，这是一个简单的 PNG 图像，我不时使用 QTimeLine 旋转。

代码看起来像这样（我在互联网上找到了转换技巧）：

```
// loading_indic initialization:
QGraphicsPixmapItem *loading_indic = 
             new QGraphicsPixmapItem( QPixmap("./resources/loading_64.png") );
loading_indic->setPos(QPoint(1100.0,50.0));

QTimeLine timeline = new QTimeLine(1000);
timeline->setFrameRange(0,steps);
connect(timeline, SIGNAL(valueChanged(qreal)), this, SLOT(updateStep(qreal)));
timeline->start();

// called at each step of a QTimeLine:
void updateStep(qreal step) {
    QTransform transformation = QTransform()
                // place coordinate system to the center of the image
                .translate(  width/2.0,  height/2.0) 
                // rotate the image in this new coordinate system
                .rotate(new_angle) 
                // replace the coordinate system to the original
                .translate( -width/2.0, -height/2.0);

    loading_indic->setTransform(transformation);
} 
```

现在，我的问题是，这样做时，看起来 WebView 也被翻译了，导致所有内容都显示在屏幕中央。

结果如下所示：

![问题](../Images/3c9a8953cb2b24071cc12335a47e7c5e.png)

webview应该填满屏幕，加载指示器应该在右上角......

我的场景只包含两个项目：

```
Scene
  |
  \____ QGraphicsWebView
  \____ QGraphicsPixmapItem // loading indicator 
```

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T10:34:33.910

解决了我的问题.. 我不知道为什么，但看起来将这个 PNG 项目添加到场景中搞砸了场景的矩形。

这样做：

```
_scene.addItem(loading_indic);
loading_indic->setPos(1100.0, 50.0);
_scene.setSceneRect(0.0,0.0,1280.0,720.0); // resets the scene's rectangle ?!
loading_indic->startAnimation(); 
```

解决了这个问题。现在我的物品已正确放置在屏幕上。

如果有人对此有解释，我很乐意接受他的回答。

# java - Soap Web Service - 将输入的数据与 mysql 数据库中的数据进行比较

> ID：13143413
> 
> 赞同：0
> 
> 时间：2012-10-30T16:22:30.313
> 
> 标签：java, mysql, web-services, soap, netbeans

我有一个连接到 mySQL 数据库的肥皂网络服务。它有两种方法，一种是insert()，另一种是verify()。第一个允许用户输入数据，例如姓名、电子邮件和密码。它成功地将记录保存在数据库中。

但是在编写验证方法时遇到问题。它有作为输入参数，电子邮件和密码。它必须将输入的数据与存储在数据库中的数据进行比较，如果在 mysql 数据库中找不到匹配项，则返回“已注册”或“未注册”。编写代码时遇到问题。你能帮忙吗，我是 jdbc 和 java web 服务的新手。我正在使用netbeans。非常感谢。

这是我的代码：

```
 @WebMethod(operationName = "insert")
    public String insert(@WebParam(name = "name") String name,
    @WebParam(name = "email") String email,
    @WebParam(name = "password") String password {
    try {
        Class.forName("com.mysql.jdbc.Driver");
        Connection con =          DriverManager.getConnection("jdbc:mysql://localhost:3306/mydb", "root", "1234");
        PreparedStatement st = con.prepareStatement("insert into register values(?,?,?)");
        st.setString(1, name);
        st.setString(2, email);
        st.setString(3, password);
        st.executeUpdate();
    } catch (Exception e) {
        System.out.println(e.getMessage());
    }
    return "record inserted";
}

/**
 * Web service operation
 */
@WebMethod(operationName = "Verify")
public String CheckUser(@WebParam(name = "email") String email,  
@WebParam(name = "password") String password) {

        Class.forName("com.mysql.jdbc.Driver");
        Connection con =  DriverManager.getConnection("jdbc:mysql://localhost:3306/mydb", "root", "1234");

If
 // problems to write this statement!!! I need to compare the username and password 
// with some select * from register where password == @password and email == @email?

 return "Registered user";
 else 
    return "Not registered";

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T17:04:41.340

此示例可能有效（您可能必须更改查询中的列名）。此外，您应该以与本示例相同的方式在插入方法中关闭连接。

```
 Connection con = null;

    try {
        Class.forName("com.mysql.jdbc.Driver");
        con = DriverManager.getConnection("jdbc:mysql://localhost:3306/mydb", "root", "1234");
        PreparedStatement st = con.prepareStatement("select 1 from register where password = ? and email = ? and name = ?");
        st.setString(1, password);
        st.setString(2, email);
        st.setString(3, name);

        ResultSet result = st.executeQuery();

        if (result.next()) { //.next() returns true if there is a next row returned by the query.
            return "Registered user";
        } else {
            return "Not registered";
        }

    } catch (Exception e) {
        //TODO manage the exception.
    } finally {
        if (con != null) {
            try {
                con.close();
            } catch (SQLException e) {}
        }
    } 
```

# visual-c++ - libav Windows 静态库

> ID：13143419
> 
> 赞同：2
> 
> 时间：2012-10-30T16:22:44.493
> 
> 标签：visual-c++, ffmpeg, libav

有人知道如何构建 libav 静态库 (.lib) 以在我的项目中使用它们吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-08-28T10:18:42.330

在编译 LibAV 之前，需要通过“配置”脚本来配置 LibAV。使用 '--enable-static' ：

./configure --enable-static

脚本“configure”根据选择或默认参数生成生成文件，LibAV 配置参数示例：

./configure --target-os=mingw32 --arch=x86 --enable-shared **--enable-static** --enable-dxva2 --disable-encoders --enable-hwaccel=dxva2 --extra-cflags=-O3 --启用-pthreads

# javascript - 在 Linux 中分析 Node.JS（代码）执行时间

> ID：13143422
> 
> 赞同：21
> 
> 时间：2012-10-30T16:22:57.843
> 
> 标签：javascript, eclipse, node.js, profiling, dtrace

我正在寻找一种方法来精确`Node.JS` **分析**Linux 上的脚本执行时间。

有一些有趣的项目，比如[NodeTime.com 性能分析器](http://nodetime.com/)，但它分析的是 I/O httprequests 的时间等等，而不是**代码行的执行时间**。

我正在寻找一种方法来确定我可以在哪里优化我的 Javascript，**大部分时间都花在哪里**等等。

* * *

我见过的一种有趣的方法是尝试[使用 DTrace 创建一个 FlameGraph](http://dtrace.org/blogs/brendan/2011/12/16/flame-graphs/)来分析 Node.JS。

但是，`dtrace`它是非常特定于 Solaris 的。

*   对于 Linux (Debian/Ubuntu)，`dtrace`可以在`sytemtap-sdt-dev`包中找到。但是，`stap dtrace`不一样，并且缺少所有相关的钩子/探针。
*   Paul Fox 从 Unix 版本做了一个移植。它的功能更完整，但不知何故，钩子/探针在用户空间中不能像 Solaris 那样工作，也不能用于分析节点。
    [ftp://crisp.dyndns-server.com/pub/release/website/dtrace/](ftp://crisp.dyndns-server.com/pub/release/website/dtrace/)（构建起来非常容易，请参阅自述文件。）
*   还有一个`Oracle`端口，但没有[人会推荐](http://dtrace.org/blogs/ahl/2011/10/10/oel-this-is-not-dtrace/)它。显然，它只有大约 0.1% 的探测器来自 Paul Fox 端口。（具有讽刺意味的是，因为`Oracle`以前是for 的`Sun`原作者）`dtrace``Solaris`

* * *

**在 Linux 中，如何使用终端或 Eclipse 来分析我的 Node.JS 脚本的代码？**我正在寻找特定的东西，比如 Zend Profiler 显示 PHP 脚本代码中每个命令的执行时间。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-06-20T18:43:32.353

“look”是 Vadim 制作的一个非常好的工具，用于分析 NodeJS 应用程序。

看看这里：

[https://github.com/baryshev/look](https://github.com/baryshev/look)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-30T16:38:01.057

如果您不反对使用[nodetime](http://nodetime.com/)，它实际上确实有 CPU 分析：

见： http: **[//nodetime.com/blog/cpu-profiling-with-nodetime](http://nodetime.com/blog/cpu-profiling-with-nodetime)**

![在此处输入图像描述](../Images/9f298238d652ac1a2f0926db800c93d8.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-11-20T15:28:46.000

[https://www.npmjs.org/package/node.profiler](https://www.npmjs.org/package/node.profiler) 正是你需要的......它在监控模式下运行你的项目，并在你完成函数的详细信息后生成一个图表，每个函数被调用了多少次以及它在那里度过的时间。

# c# - 来自点击事件 c# asp .net 的图像预览

> ID：13143423
> 
> 赞同：2
> 
> 时间：2012-10-30T16:22:57.657
> 
> 标签：c#, asp.net, listbox, image

我目前正在尝试查看目录，然后从列表框中预览 .jpeg。我的列表框填充了目录的内容并且只显示 Jpeg，但我想不出如何在图片框中获取 jpeg 预览。我在 Visual Studio 2010 上使用 asp .net 应用程序。

这是我的代码

```
 public partial class _Default : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {
        DirectoryInfo infoDir = new DirectoryInfo(@"G:\Test_Directory");            
        FileInfo[] infoFile = infoDir.GetFiles("*.jpeg");
        foreach( FileInfo file in infoFile )
        {
        lstDirectory.Items.Add(file.Name);
        }                    
    }

    protected void lstDirectory_SelectedIndexChanged(object sender, EventArgs e)
    {
    }
} 
```

我了解需要使用 Postback。如果有人能够提供帮助，那就太好了。

G:Drive中的文件是jpeg，在列表框中可以看到是：jpegimage.jpeg

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T17:41:36.183

这样的事情怎么样？

我认为您可以主要在 Javascript 中执行此操作，并使用两个额外的 ASP.NET 页面。

1.  首先，创建一个新网页。我们将其称为 A.aspx。该页面将在查询字符串中传递图像名称。这将非常简单：它只会从“G:\TestDirectory”中获取文件的内容并将其写入响应流。如果您以前没有这样做过，Stack Overflow 上有很多关于如何执行此操作的问题和答案。

2.  然后，创建另一个网页。我们将其称为 B.aspx。这将有一个适当设置高度和宽度的图像控件。它还将从其查询字符串中获取图像名称。代码隐藏将构建一个 URL 用作图像控件上的 ImageSource 属性。该 URL 将是 A.aspx 的 URL，并将（URL 编码的）图像名称作为参数附加。

3.  在您的 ASP.NET 页面上，将一个事件处理程序连接到您的列表框。当列表框上的选定索引发生变化时，*在客户端*，基于指向 B.aspx 的 URL 构建一个 URL，并将列表框中的图像名称作为参数附加。然后打开一个窗口，使用您刚刚构建的 URL，指向 B 并传递所需的文件名。

所以：当列表框选择的索引改变时（或者当你双击，或者你选择的任何事件），javascript 将打开一个带有页面 B.aspx 的窗口。页面 B 将有一个图像控件，设置为 A.aspx 的 URL。A.aspx 会将图像内容流式传输到图像控件，该控件将出现在您的新窗口中。

# jquery - Bootstrap 下拉菜单和 jQuery Draggable 错误

> ID：13143427
> 
> 赞同：1
> 
> 时间：2012-10-30T16:23:13.263
> 
> 标签：jquery, jquery-ui, twitter-bootstrap

我有一个 jQuery 可拖动 Div，里面有一个引导下拉菜单，这是我的 HTML：

```
<div id="widget_clock" class="widget_common ui-widget-content ui-corner-all ui-draggable" style="z-index: 1001; left: 651px; top: 0px; ">
<div>
    <div class="btn-group" style="float:right;text-align:left">
        <a class="btn btn-large" href="#" id="btn_SetAlarm"><em class="icon-time" style="margin-top: 4px;"></em>  Set Alarm</a>
        <a class="btn btn-large dropdown-toggle" data-toggle="dropdown" href="#"><span class="caret"></span></a>
        <ul class="dropdown-menu" id="alarm_recent_times">
            <li class="recent_times_header nav-header" style="padding-right:20px; padding-left:20px">No Recent times</li>
        </ul>
    </div>
</div> 
```

正如您从 HTML 中看到的，我说的是**.dropdown-menu** ul 标记。**`<div class="caret">`**在按下并打开下拉菜单之前，一切看起来都很好（这是一个 bootstrapjs 功能），

在 bootstrapjs 菜单打开后再次拖动 DIV 时会发生该错误，并且菜单保持在其位置而不移动。有时它会回到 DIV，有时它只是静止不动。我无法解释为什么。

**PS**我可以给我的网站地址以向人们展示我的问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T11:11:52.583

除非您需要下拉菜单在拖动时保持打开状态，否则您应该能够通过在拖动时关闭下拉菜单来解决此问题。

```
$(".ui-draggable").draggable({
  start: function() {
    $('.ui-draggable .open').removeClass('open');
  }
}); 
```

单击插入符号时，您还可以使您的 div 不可拖动。

```
$(".ui-draggable").draggable({
  cancel: 'a.dropdown-toggle'
}); 
```

# jquery - 使用 $.getScript 加载 d3.js

> ID：13143428
> 
> 赞同：4
> 
> 时间：2012-10-30T16:23:22.350
> 
> 标签：jquery, d3.js

我正在尝试使用加载 d3js 脚本

`$.getScript('http://d3js.org/d3.v2.js', function(data, textStatus) { console.log(textStatus); return true });`

正确返回“成功”状态。

我已经设置了

```
$.ajaxSetup({
  cache: true,
  async: false
}); 
```

以便在尝试使用文件之前完全加载文件。

但是我在控制台窗口中收到“TypeError：names.map(...).join is not a function”。

有没有人遇到过这种情况？为了使文件正确加载，我需要做些什么特别的事情吗？

我也试过

```
var se = document.createElement('script');
se.type = "text/javascript";
se.src = "http://d3js.org/d3.v2.js";
document.getElementsByTagName('head')[0].appendChild(se); 
```

结果相同。

我没有问题

```
<script src="http://d3js.org/d3.v2.js"></script> 
```

但在这个应用程序中，它不是一个选项。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T16:26:15.687

尝试在回调函数中开始工作

```
$.getScript('http://d3js.org/d3.v2.js', function(data, textStatus) { 

//Start Using d3 functions here.

 return true 

}); 
```

您需要确保脚本已加载...

# android - Android PayPal SDK 和 Fragments

> ID：13143430
> 
> 赞同：2
> 
> 时间：2012-10-30T16:23:31.493
> 
> 标签：android, paypal, android-fragments

我之前在常规应用程序中使用过 PayPal SDK。这是我在正常活动中采取的步骤

**a)**在活动的 onCreate 我创建一个新线程来初始化 PayPal 库

**b)**如果初始化顺利，我创建一个 PayPal 按钮并将其添加到我的布局之一中

**c）**在 PayPal 按钮的 onClick 上，我为用户付款的结果启动了一个新活动

**d)**在活动的 onActivityResult 我检查付款是否成功并保存信息

到目前为止效果很好，但是当我尝试在片段上使用相同的方法时，事情变得一团糟。我的片段有一个带有 2 个 EditTexts 和一个 LinearLayout 的布局，它将承载 Paypal 按钮

到目前为止，我是这样做的：

```
@Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        context = (MainActivity) getActivity();
        View view = inflater.inflate(R.layout.fragment_layout, container, false);

        libraryInitializationThread = new Thread() {
                @Override
                public void run() {
                    initLibrary();
                    // The library is initialized so let's create our CheckoutButton and update the UI.
                    if (PayPal.getInstance().isLibraryInitialized()) {
                        hRefresh.sendEmptyMessage(INITIALIZE_SUCCESS);
                    } else {
                        hRefresh.sendEmptyMessage(INITIALIZE_FAILURE);
                    }
                }
            };
            libraryInitializationThread.start();
}

private void initLibrary() {
        PayPal pp = PayPal.getInstance();

        if (pp == null) {
            pp = PayPal.initWithAppID(context, getString(R.string.paypal_sandbox_id), PayPal.ENV_SANDBOX);
            pp.setLanguage("en_US"); // Sets the language for the library.
            pp.setDynamicAmountCalculationEnabled(false);
        }
    } 
```

到目前为止，`pp = PayPal.initWithAppID`我收到此错误：

```
java.lang.IllegalStateException: Fragment FragmentPayPal{415f43f8} not attached to Activity 
```

现在我的问题是：

*   我应该在哪里以及如何初始化贝宝库？

*   从我的片段中，我可以为结果启动一个活动并捕获 onActivityResult 吗？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T13:46:20.340

实际上，我最终使用的方法很简单，就是在我的主要托管活动中添加片段之前初始化贝宝库。通过这种方式，它工作得很好。

# javascript - 将客户端事件添加到 Telerik 下拉列表使其成为静态

> ID：13143433
> 
> 赞同：0
> 
> 时间：2012-10-30T16:23:48.257
> 
> 标签：javascript, jquery, html, telerik, telerik-mvc

我正在尝试将客户端事件添加到 Telerik 下拉列表，但这样做会使它成为静态的。静态我的意思是它不再像下拉列表一样，当我单击时它没有响应，因此无法查看/选择值。但是，只要我将下拉列表更改为组合框，它就可以正常工作。它让我可以单击并查看/选择值。

为什么会这样？为什么我可以将客户端事件添加到 Telerik 组合框，但不能添加到 Telerik 下拉列表？

这是我填充组合框的方式：

```
 <%= Html.Telerik().ComboBox().Name("ComboBox")
            .HtmlAttributes(new { @id = "ComboBox", @style = "width:104px;" })
            .ClientEvents(events =>
        {
            events.OnDataBinding("ComboBox_onDataBinding");
        })%>  

function ComboBox_onDataBinding(e) {
    var comboBox = $('#ComboBox').data('tComboBox');
                comboBox.dataBind([
                    { Text: "Product 1", Value: "1" },
                    { Text: "Product 2", Value: "2", Selected: true },
                    { Text: "Product 3", Value: "3" },
                    { Text: "Product 4", Value: "4" },
                    { Text: "Product 5", Value: "5" }
                ], true);
}; 
```

这是我填充下拉列表的方式：

```
 <%= Html.Telerik().DropDownList().Name("DropDownList")
            .HtmlAttributes(new { @id = "DropDownList", @style = "width:104px;" })
            .ClientEvents(events =>
        {
            events.OnDataBinding("DropDownList_onDataBinding");
        })%>  

function DropDownList_onDataBinding(e) {
    var dropDownList = $('#DropDownList').data('tDropDownList');
                dropDownList.dataBind([
                    { Text: "Product 1", Value: "1" },
                    { Text: "Product 2", Value: "2", Selected: true },
                    { Text: "Product 3", Value: "3" },
                    { Text: "Product 4", Value: "4" },
                    { Text: "Product 5", Value: "5" }
                ], true);
}; 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T22:25:17.503

在您的情况下，当您不使用 Ajax 或 WebService 客户端数据绑定时，您不应配置 OnDataBinding 事件处理程序。您需要改为配置 OnLoad：

```
.ClientEvents(events => events.OnLoad("ddl_onLoad").OnChange("ddl_onChange") 
```

处理程序：

```
function ddl_onLoad(e) {

    var ddl = $(this).data('tDropDownList');

    ddl.dataBind([
        { Text: 'Product 1', Value: '1' },
        { Text: 'Product 2', Value: '2', Selected: true },
        { Text: 'Product 3', Value: '3' },
        { Text: 'Product 4', Value: '4' }
    ], true);
}

function ddl_onChange(e) {

    //var ddl = $(this).data('tDropDownList');
    console.log(e.value);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T18:43:20.427

您在处理程序`.dataBind()`内部调用`OnDataBinding`，这将再次触发`OnDataBinding`事件，一次又一次......

`OnLoad`考虑在事件或其他东西中进行客户端数据绑定

# jquery - jquery 可拖动/可放置的关闭浏览器

> ID：13143435
> 
> 赞同：0
> 
> 时间：2012-10-30T16:23:57.883
> 
> 标签：jquery, browser, draggable, droppable

我有一个应用程序，它使用可拖动和可放置的 jquery 调用，本质上是获取元素并将它们放入存储桶中。没关系，效果很好。但是，我的客户需要将其中一个元素从浏览器中删除，放入记事本或 word 中。

在普通浏览器中，如果您将图像拖出浏览器，您将删除相关的 URL（如果图像可点击，则为 A 的 url，如果不可点击，则为图像的源 URL）。我需要通过可拖动/可放置功能保留此功能。但我无法弄清楚这是如何完成的。目前，我可以在我的容器中正常拖放，但是一旦我拖出浏览器，我什么也得不到。没有网址，什么都没有。

有人对这个有想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T17:07:13.113

我认为我们需要更多信息。您要删除的有问题的“元素”是什么？是一个`div`，一个`img`？您希望在应用程序中显示的结果文本是什么？它是对象本身的直接表示还是对象的一些元数据？

您的问题可能是目标应用程序，它需要了解拖放到其上的对象的类型。例如，如果我从网页*中选择一些*文本或图像，然后将其拖放到 Word 中，则效果很好；它甚至在一定程度上带来了文本块的格式。但它不适用于记事本，因为记事本不知道当“BlobOfHtmlData”对象（因为缺少正确的对象类型）被放到它上面时该怎么做。

由于您无法扩展记事本并告诉它如何处理此类项目，因此我认为您对这个项目比较松懈。

# text - [mono]linux/monodevelop 2.6 中的阿拉伯文本渲染

> ID：13143439
> 
> 赞同：1
> 
> 时间：2012-10-30T16:24:08.163
> 
> 标签：text, mono, monodevelop, arabic, xubuntu

我被指示将 .NET/C# Windows 应用程序移植到 linux（XUbuntu 11.10 或 SliTaz 4）。此应用程序应该能够呈现其部分或全部文本的阿拉伯文本。

我设法修改了 Windows 应用程序，使其正确显示阿拉伯语文本。我不得不将 UseCompatibilityText 切换为 true。

在 linux 中，我试图寻找相同的属性。没运气。这是使用旧版本的 Mono 的问题吗？它是不支持的东西吗？

有没有办法解决这个问题？提前非常感谢！安东尼奥

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T12:16:59.517

好的，我是 MonoDevelop 的新手，但我看到了你的帖子，我不得不说，当我尝试在“条目”框中使用阿拉伯语作为快速测试时，我没有遇到任何问题。这个 MD 是开箱即用的，除了编码和抓取一小段阿拉伯文本外，我不需要做任何事情。我在我的 Mac 上使用 MD 2.8.8.6。

哎呀，让我在我的 Linux 机器上检查一下。我正在使用 Kubuntu 12.04 和 MD 2.8.6.3，并且上面的相同测试有效。我不确定你的究竟是什么不起作用，也许我的测试不够广泛，或者你想升级你的版本？

干杯

# qooxdoo - 找不到Qooxdoo xhr.js

> ID：13143443
> 
> 赞同：0
> 
> 时间：2012-10-30T16:24:33.183
> 
> 标签：qooxdoo

我正在从事的当前项目由两部分组成。1 部分是一个 qooxdoo 应用程序。另一个是 html 文件，会在 qooxdoo 的浏览器小部件中呈现。

我最近不得不对第二部分进行一些更改（不涉及 qooxdoo）。

复制完文件后，我需要将 Qx 应用程序连接到 html 页面。然后它给了我一些错误。我教过如果我重建，他们可能会消失（他们没有）。我收到以下错误：

LOG: 003045 qx.core.Init: Load runtime: 3044ms
SCRIPT5: 系统找不到指定的资源。Xhr.js，第 375 行字符 9

我看过了，该文件位于应有的位置。

有谁知道如何解决这个问题或导致它的原因？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T08:08:52.527

这很愚蠢，我放了一个太多的括号，这导致了错误。我很难找到它，因为 2 非常不相关。

# codeigniter - 如果您的托管服务提供商不允许 SMTP 中继，如何发送电子邮件？

> ID：13143444
> 
> 赞同：4
> 
> 时间：2012-10-30T16:24:36.883
> 
> 标签：codeigniter, email, smtp, sendgrid, amazon-ses

我有一个使用 CodeIgniter 构建并由共享托管提供商托管的应用程序。

我的 MX 记录指向 Gmail 服务器，我的应用程序可以使用 Gmail 和标准 CodeIgniter 电子邮件方法发​​送电子邮件。

现在我想使用 SendGrid 或 Amazon SES 发送一些事务性邮件。但这不起作用，显然原因是我的托管服务提供商不允许 SMTP 中继。

我正在考虑使用 SendGrid API 和 cURL，但我不确定它们与我熟悉的 CI 方法的工作情况如何。

最好我不想更改指向为我们公司处理常规邮件的 Gmail 的 MX 记录。

鉴于这些限制，是否可以使用 SendGrid 或 Amazon SES 发送电子邮件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T16:25:33.310

您可以在 SendGrid 中使用备用端口：

> 许多托管服务提供商和 ISP 作为默认做法阻止端口 25。尝试连接到 smtp.sendgrid.net 时，请记住端口 25、2525、587 和 465 都可以使用。您可以通过端口 25、2525 和 587 上的未加密或 TLS 连接。您可以通过端口 465 上的 SSL 连接。

-- [http://docs.sendgrid.com/documentation/get-started/smtp-ports/](http://docs.sendgrid.com/documentation/get-started/smtp-ports/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-30T19:14:41.730

您应该使用 SendGrid Web API 发送电子邮件。如果您的 ISP 正在阻止电子邮件，那么您最好的选择是切换到 HTTP。这是一个非常简单的开关，因为它采用所有相同的参数。查看文档以获取更多信息：

> [http://docs.sendgrid.com/documentation/api/web-api/mail/#send](http://docs.sendgrid.com/documentation/api/web-api/mail/#send)

我怀疑它是否适用于 CI 电子邮件库，但没有理由不能只使用 SendGrid 库：

> [https://github.com/sendgrid/sendgrid-php](https://github.com/sendgrid/sendgrid-php)

* * *

此外，这个[CodeIgniter 库](https://github.com/bold/codeigniter-sendgrid-mail)通过 HTTP 发送 SendGrid 电子邮件。可能值得一试。

# html - 表格边框重叠

> ID：13143445
> 
> 赞同：0
> 
> 时间：2012-10-30T16:24:43.800
> 
> 标签：html, css, css-tables

请看这个例子：

[http://jsfiddle.net/qTjdX/](http://jsfiddle.net/qTjdX/)

我希望红色边框底部显示为 1 条实线，但现在黄色边框将其分成 3 条。有没有办法让边框底部优先？像各种z-index？

我已经尝试过border-collapse:collapse 和border-collapse:separate。

唯一有效的是如果我让红线变粗，但我希望它具有相同的宽度。

```
table { 
  width:100%;
  border:1px solid blue;
  border-collapse:separate;
}
th, td {
  border:1px solid yellow;
  padding:5px;
}
th {
  background:black;
  color:white;
}
th {
  border-bottom:1px solid red !important;
} 
td {
  background:#efefef;
} 
```

​</p>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T16:41:10.930

您遇到的问题是因为边界由四个独立的边组成，它们在拐角处以 45 度角相交，并以各种方式圆润。因此，底部边框的颜色与侧面的颜色不同，*总是*会导致边框破裂。

如果你看这个演示：

```
div {
    float: left;
    border-width: 25px;
    border-style: solid;
    border-top-color: red;
    border-right-color: green;
    border-bottom-color: blue;
    border-left-color: yellow;
} 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/Fxj3s/)。

您可以看到各种边界是如何相交的，因为无法细分像素，这导致角像素与一侧的纯色相同，因此如果颜色不同，则*另一**侧*的颜色不同它与之相连。

为了补偿您真正拥有的唯一选择是在 : 中使用嵌套元素`th`：

```
<table cellpadding="0" cellspacing="0">
    <thead>
        <tr>
            <th><div>col 1</div></th>
            <th><div>col 2</div></th>
            <th><div>col 3</div></th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
        </tr>
    </tbody>
</table> 
```

使用以下 CSS：

```
table { 
    width:100%;
    border:1px solid blue;
    border-collapse:collapse;
}

th {
    border-bottom: 2px solid yellow;
}

th div, td {
    border: 1px solid red;
}

th div {
    border-bottom-width: 0;
} 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/qTjdX/7/)。

# c++ - SQLite 更新 100 毫秒

> ID：13143448
> 
> 赞同：1
> 
> 时间：2012-10-30T16:25:00.673
> 
> 标签：c++, sql, qt, sqlite

我正在使用[Qt 数据库抽象](http://doc.qt.digia.com/qt/qsqlquery.html)层与 Sqlite3 进行交互。

```
int x = GetTickCount();
database.exec("UPDATE controls SET dtype=32 WHERE id=2");
qDebug() << GetTickCount()-x; 
```

表格是：

```
CREATE TABLE controls (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    internal_id TEXT,
    name TEXT COLLATE NOCASE,
    config TEXT,
    dtype INTEGER,
    dconfig TEXT,
    val TEXT,
    device_id INTEGER REFERENCES devices(id) ON DELETE CASCADE
); 
```

更新时间约为 100 毫秒！即使没有其他东西正在访问数据库，并且该表中总共有 3 条记录。

这对我来说似乎很长。10 条记录已经需要一秒钟才能完成。这是我应该从 sqlite 获得的性能，还是让我在某个地方搞砸了？SELECT 查询足够快~1ms。

* * *

**编辑 1**

所以它不是Qt。

```
sqlite3 *db;
if ( sqlite3_open("example.db",&db ) != SQLITE_OK )
{
    qDebug() << "Could not open";
    return;
}

int x = GetTickCount();
sqlite3_exec(db, "UPDATE controls SET dtype=3 WHERE id=2",0,0,0);
qDebug() << "Took" << GetTickCount() - x;

sqlite3_close(db); 
```

这家伙需要同样的时间。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-30T16:36:03.000

当您访问硬盘时，可能需要很长时间。

尝试其中之一：

`PRAGMA journal_mode = memory;`
`PRAGMA synchronous = off;`

所以它不会立即接触磁盘。

SQLite 使用得当可以非常非常快。小型数据库的 select 语句是从缓存中回答的。

还有其他方法可以调整您的数据库。查看类似这样的其他问题： [提高 SQLite 的每秒插入性能？](https://stackoverflow.com/questions/1711631/how-do-i-improve-the-performance-of-sqlite)

# meteor - 如何在 Meteor 中保存之前更改对象服务器端

> ID：13143450
> 
> 赞同：4
> 
> 时间：2012-10-30T16:25:09.170
> 
> 标签：meteor

我正在尝试在更新集合后运行某些插入语句。例如，如果用户将嵌入文档位置添加到他们的用户文档中，我还想将该嵌入文档插入到单独的位置集合中。有没有办法在服务器端执行此操作以保证操作运行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T23:07:59.253

如果你愿意使用我写的一些代码（[https://gist.github.com/matb33/5258260](https://gist.github.com/matb33/5258260)），你可以像这样挂接：

编辑：代码现在是[https://github.com/matb33/meteor-collection-hooks项目的一部分](https://github.com/matb33/meteor-collection-hooks)

```
var test = new Meteor.Collection("test");

if (Meteor.isServer) {
    test.before("insert", function (userId, doc) {
        doc.created = doc.created || Date.now();
    });

    test.before("update", function (userId, selector, modifier, options) {
        if (!modifier.$set) modifier.$set = {};
        modifier.$set.modified = Date.now();
    });

    test.after("update", function (userId, selector, modifier, options, previous) {
        doSomething();
    });
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-30T17:31:55.907

您需要在方法中执行此操作..您可以通过实现客户端方法存根来保持延迟补偿：

> 在客户端调用方法定义了与同名服务器方法关联的存根函数。如果您不想，您不必为您的方法定义存根。在这种情况下，方法调用就像其他系统中的远程过程调用一样，您必须等待来自服务器的结果。
> 
> 如果你确实定义了一个存根，当客户端调用一个服务器方法时，它也会并行运行它的存根。在客户端，存根的返回值被忽略。存根的运行是因为它们的副作用：它们旨在模拟服务器方法将执行的操作的结果，但无需等待往返延迟。如果存根抛出异常，它将被记录到控制台。

在此处查看我的 Meteor 存根示例：[https ://stackoverflow.com/a/13145432/1029644](https://stackoverflow.com/a/13145432/1029644)

# asp.net - 带有 :before 和 :after [CSS3] 的 box-shadow

> ID：13143451
> 
> 赞同：1
> 
> 时间：2012-10-30T16:25:16.587
> 
> 标签：asp.net, html, css, pseudo-element

我正在尝试在我当前的项目中创建以下效果：

[http://jsfiddle.net/pns2050/7TYTc/2/](http://jsfiddle.net/pns2050/7TYTc/2/)

但是当我尝试将它添加到我的网站时，两个底角会失去那个角度效果。

我的网站由一个 Masterpage 组成，它基本上在中间创建一个表格以供添加内容..

```
<div class="clearboth"></div>
<div id="pageWrap">
    <asp:ContentPlaceHolder ID="ContentPlaceHolder1" runat="server">
    </asp:ContentPlaceHolder>
</div><!--/Page Wrap--> 
```

与 CSS

```
#pageWrap
{
width:950px;
height:700px;
margin:-30px auto -20px auto;
box-shadow: -1px -5px 20px 5px #80b840;
background-color:white;
position:relative;   
} 
```

所以我添加了我的 default.aspx

```
<asp:Content ID="Content2" ContentPlaceHolderID="ContentPlaceHolder1" 
 Runat="Server"> 
  <div class="box effect2">
    <h3>Effect 2</h3>
  </div>
</asp:Content> 
```

使用 jsfiddle 中显示的 CSS，但效果中断..

我知道我的问题含糊不清，但我尝试了一切，但我看不出问题出在哪里……我可以在我的一些旧项目中重新创建它……

我只是想从有经验的人那里寻找一点提示/想法来给我力量，这样我就可以继续尝试；}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T18:26:36.037

这是因为`z-index: -1;`设置在伪元素上，而`#pageWrap`有`z-index:0`（默认）并且`background-color:white;`覆盖了阴影。

你可以解决它添加：

```
#pageWrap {
z-index:-2;
/* etc */ 
```

或删除白色背景。

# gitolite - 在 Gitolite 中查看可用用户

> ID：13143452
> 
> 赞同：1
> 
> 时间：2012-10-30T16:25:18.490
> 
> 标签：gitolite

有时不清楚某个 gitolite 用户的用户名是什么。如果人们想控制他们的狂野回购的访问权限，他们需要知道用户名。一个明显的解决方案是询问他们的用户名。在我们的环境中，最常见的情况是要求管理员输入用户名，因为有时用户自己不知道他们的用户名。

这有点不方便，我想知道是否是一个简单的解决方案，例如显示所有可用用户名的命令。如果没有，对如何编写这样的脚本以及如何访问它有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T15:17:06.233

我认为他想要的是一种列出分配给*其他*用户的用户名的方法。他的担心可能是管理员在添加 pubkey 文件时可能拼错了名称。假设我将我的“id_rsa.pub”发给他。他将其存储为“sitram.pub”而不是“sitaram.pub”。只要 conf 文件中的权限也有类似的拼写错误，您甚至可能没有意识到这一点。

想要访问他的仓库的人只有一个选择：让每个他想要访问的人运行“ssh git@host info”并报告他们看到的用户名。

允许非管理员用户查询所有其他用户名部分是信息披露问题。

另一部分是，如果您处于 HTTP 模式或其他模式，则真的没有理智的方法可以知道所有可能经过身份验证（可验证！）的用户是谁。对于 ssh 你当然可以这样做：

```
perl -lne 'print $1 if /-shell (.*?)"/' < ~/.ssh/authorized_keys 
```

Gitolite 有一个“list-users”命令，但它只知道已经在 conf 文件的某些访问规则中命名的用户。这不完全一样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T13:58:11.563

I added a new command 'usernames' that simply prints a text file that contains all usernames with respective real names. I put this file in the main directory of the gitolite-admin-repo. Only drawback is that this file requires manual updating after a new user is added.

Put this in `~/gitolite-source/src/commands/usernames`:

```
#! /bin/bash

cat $HOME/.gitolite/usernames.txt 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T16:57:36.207

Gitolite (V3) 有一个[命令](http://sitaramc.github.com/gitolite/cust.html#commands)列表，包括

```
ssh git@host info -h
ssh git@host perms -h 
```

这可以帮助获取 gitolite 配置的内容。

```
ssh git@host perms -l <repo> 
```

将列出权限文件的当前内容。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-12-12T07:02:34.850

这就是我正在使用的

```
perl -le 'while(<>) {$h{$1}=1 if /-shell (.*?)"/};foreach (sort(keys(%h))){print $_;}' < ~/.ssh/authorized_keys 
```

它与 Sitaram 提供的片段非常相似，只是它删除了重复项和排序。

# visual-studio - 英特尔凌动处理器和视觉工作室

> ID：13143453
> 
> 赞同：2
> 
> 时间：2012-10-30T16:25:21.080
> 
> 标签：visual-studio, intel, processor

我想买一个有原子英特尔处理器的笔记本

1.86速

我想在上面安装visual studio，那么它可以处理VS吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T16:26:58.913

> 我想在上面安装visual studio，那么它可以处理VS吗？

你*可以*在上面安装VS。它会运行。它可能不会非常快，因为它是一个相当慢的处理器，并且内存和磁盘访问也可能很慢。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T16:45:10.953

我目前正在使用带有**windows xp home的笔记本电脑（** **Compaq Mini 110c 1111EV**）（**带有 2Gb 的 RAM**）。我已经为我的工作安装了**Visual Studio 2008**。它**工作正常**。我的意思是没有最好的速度，但没有不切实际的延迟。我还安装了**Visual C# 2008 Express**。那效果**更好**。

 ******有一次我尝试了**Visual Studio 2010**但它**没有达到我想要的速度**。所以我不建议在这个上使用它。我什至用过性能良好的 MATLAB 2008。最后，如果您希望运行 Vista 或 Windows 7，您可能会遇到无法管理的性能。

所以最后我要说的是，如果您希望在 Windows XP 上使用 Visual Studio 2008，那么您很好，除此之外的任何事情都可能会让您不高兴。

祝你好运******

# svn - 使用 Subversion 通过命令行提交所有修改/添加的文件，不包括提供的黑名单

> ID：13143462
> 
> 赞同：8
> 
> 时间：2012-10-30T16:25:55.947
> 
> 标签：svn, unix, version-control, commit

我正在研究一种通过 Subversion 命令行提交所有修改/添加文件的方法，*不包括*提供的黑名单。这可能吗？

例如，如果我有 100 个我想提交的文件，但该列表中散布着七个我**不想**提交的文件。有没有办法说“提交除/path/to/file1.php、/path/to/file2.php、/path/to/file3.php 之外的所有文件”等......

例如，我将不得不做类似的事情：

```
svn ci [list all files to commit in here] -m 'my commit message' 
```

但是，有没有更好的方法呢？我找不到任何关于它的记录。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-30T17:38:05.660

没有选项可以在提交时即时忽略文件。但是，您可以采取两种方法：

1.  使用[更改列表](http://svnbook.red-bean.com/en/1.5/svn.advanced.changelists.html)功能。这可以帮助您为**确实**要提交的文件创建过滤器，并且只提交这些文件。由于更改列表是在开发人员机器上创建的，因此您的过滤器不会影响通用存储库。例如，您可以使用以下命令将所有文件添加到更改列表：

    `svn changelist to-commit *`

    然后删除那些你想忽略的：

    `svn changelist --remove /path/to/file1.php`

2.  只有`svn add`您正在处理的文件，一旦您开始编辑一个一个。任何尚未`svn add`编辑到存储库的文件将在提交时被忽略。当然，这样做的缺点是您将是唯一在他的机器上拥有这些文件的开发人员。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-05-23T11:57:28.853

我有类似的情况，我必须从一堆修改过的文件中只提交某些文件。我必须更新/删除父项目及其所有子项目（[Maven](http://en.wikipedia.org/wiki/Apache_Maven)）的依赖项并提交相应的更改。这是我为创建 SVN 更改列表所做的。

```
svn cl my-changelist $(svn st | grep '^M' | awk '{print $2}' | grep 'pom.xml')

svn commit -m "Updated dependencies" --changelist my-changelist 
```

上面的第一个命令创建了一个名为“my-changelist”的更改列表，并将所有修改后的名为“pom.xml”的文件添加到列表中。

第二个命令提交更改列表（列表中的所有文件都针对单个修订号）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T16:39:02.183

您可以为此使用[Subversion svn:ignore 属性](http://svnbook.red-bean.com/en/1.1/ch07s02.html#svn-ch-7-sect-2.3.3)。

# bing-maps - Bing Maps AJAX Control 7.0 - 如何在鸟瞰视图中关闭街道标签？

> ID：13143465
> 
> 赞同：0
> 
> 时间：2012-10-30T16:26:16.153
> 
> 标签：bing-maps

我使用 Bing Maps AJAX Control 7.0 ISDK。

我想关闭鸟瞰视图中的街道标签。

[问题已被提出](https://stackoverflow.com/questions/1446323/bing-maps-how-can-i-turn-off-street-labels-in-birds-eye-view)，但对于 api 6

我可以用导航栏做到这一点。

但是导航栏在我的地图上是关闭的：

```
showDashboard: false 
```

我在 sdk 上找不到任何解决方案：

[http://www.bingmapsportal.com/isdk/ajaxv7#CreateMapWithViewOptions7](http://www.bingmapsportal.com/isdk/ajaxv7#CreateMapWithViewOptions7)

这是我的代码：

```
function handlerEvent() 
{ 
     displayAlert('Handler clicked'); 
} 
Microsoft.Maps.loadModule('Microsoft.Maps.Themes.BingTheme', { callback: function() 
{
    map = new Microsoft.Maps.Map(document.getElementById('bingMap'), 
{ 
     credentials: 'xxxxxxxxxxxxxxxxxxxxxxx', 
     theme: new Microsoft.Maps.Themes.BingTheme(),
     center: new Microsoft.Maps.Location(47.219058,-1.553625),
     mapTypeId: Microsoft.Maps.MapTypeId.birdseye,
     zoom: 16,
     showDashboard: false
}); 
var infoboxOptions = {title:'Text', description:'TextTextText', actions:[{label: 'Click Handler', eventHandler: handlerEvent}]}; 
map.entities.push(new Microsoft.Maps.Infobox(map.getCenter(), infoboxOptions)); 
}}); 
```

你能帮我做吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-31T23:07:45.390

添加此选项

labelOverlay：Microsoft.Maps.LabelOverlay.hidden

# c++ - 我应该始终对数字类型使用适当的文字吗？

> ID：13143468
> 
> 赞同：3
> 
> 时间：2012-10-30T16:26:33.880
> 
> 标签：c++, floating-point, numbers, literals

我经常在表达式中使用错误的文字，例如将浮点数除以整数，如下所示：

```
float f = read_f();
float g = f / 2; 
```

我相信在这种情况下编译器会首先将 int 文字 (2) 转换为浮点数，然后应用除法运算符。GCC 和 Clang 总是让类似的东西通过，但 Visual C++ 警告隐式转换。所以我必须这样写：

```
float f = read_f();
float g = f / 2.0f; 
```

这让我想知道：我是否应该*始终*对 float、double、long 等使用适当的文字？每当我可以摆脱它时，我通常会使用 int 文字，但我不确定这是否真的是一个好主意。

*   这可能是导致细微错误的原因吗？
*   这只是表达式的问题还是函数参数的问题？
*   GCC 或 Clang 是否存在警告此类隐式转换的警告级别？
*   unsigned int，long int等怎么样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T16:34:23.893

您应该始终明确指出您打算使用的文字类型。这将防止出现问题，例如这种代码：

```
float foo = 9.0f;
float bar = foo / 2; 
```

更改为以下内容，截断结果：

```
int foo = 9;
float bar = foo / 2; 
```

当您涉及重载和模板时，这也是函数参数的一个问题。

我知道 gcc 有`-Wconversion`，但我不记得它涵盖的所有内容。

对于适合的整数值，`int`我通常不会将它们限定为，`long`或者`unsigned`因为通常存在细微错误的机会要少得多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T16:37:58.763

对于“应该”的问题，几乎没有绝对正确的答案。谁将使用此代码，以及用于什么目的？这是相关的。而且，*特别是*对于与浮点数有关的任何事情，养成准确指定所需操作的习惯是很好的。 `float*float`以单精度完成。任何带有双精度的东西都是双精度的，`2`被转换为双精度，所以你在这里指定不同的操作。

这里最好的答案是[What Every Computer Scientist Should Know About Floating-Point Arithmetic](http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html)。我会说不要tl; dr它，浮点没有简单的答案。

# ios - 如何在 UISearchbar 中更改清除按钮图像（x 按钮）或至少清除按钮图像的颜色？

> ID：13143469
> 
> 赞同：9
> 
> 时间：2012-10-30T16:26:39.020
> 
> 标签：ios, uibutton, uisearchbar

我需要一个带有取消按钮的完全透明的搜索栏。我尝试了很多解决方案，但我还没有找到更好的解决方案。当我尝试删除背景颜色时，它会显示范围栏。谁能给我一些带有can按钮的完全透明搜索栏的源代码。这里是

```
addSearchbar.backgroundColor = [UIColor colorWithRed:1.0 green:1.0 blue:1.0 alpha:0.5];
UITextField *sbTextField = (UITextField *)[self.addSearchbar.subviews lastObject];

for (UIView *subview in addSearchbar.subviews)
{
    NSLog(@"%@",subview);
    if ([subview isKindOfClass:[UITextField class]])
    {
        sbTextField = (UITextField *)subview;
        UIImage *image = [UIImage imageNamed: @"06_magnifying_glass.png"];
        UIImageView *iView = [[UIImageView alloc] initWithImage:image];
        iView.frame = CGRectMake(0, 0, 24, 24);
        sbTextField.leftView.frame = CGRectMake(0, 0, 24, 24);
        sbTextField.leftView = iView;
        [sbTextField.rightView removeFromSuperview];
        CGFloat myWidth = 24.0f;
        CGFloat myHeight = 24.0f;
        UIButton *myButton = [[UIButton alloc] initWithFrame:CGRectMake(0.0f, 0.0f, myWidth, myHeight)];
        [myButton setImage:[UIImage imageNamed:@"clear.png"] forState:UIControlStateNormal];
        [myButton setImage:[UIImage imageNamed:@"clear.png"] forState:UIControlStateHighlighted];

        [myButton addTarget:self action:@selector(doClear:) forControlEvents:UIControlEventTouchUpInside];
        sbTextField.rightView = myButton;
        sbTextField.rightViewMode = UITextFieldViewModeWhileEditing;
        break;
    }
    if([subview isMemberOfClass:[UISegmentedControl class]])
    {
        UISegmentedControl *scopeBar=(UISegmentedControl *) subview;
        scopeBar.tintColor =  [UIColor clearColor];
    }
}
[sbTextField removeFromSuperview];
[addSearchbar addSubview:sbTextField];
[addSearchbar setSearchFieldBackgroundImage:[UIImage imageNamed:@"SearchBar.png"] forState:UIControlStateNormal];
CGRect sbFrame = self.addSearchbar.frame;
// Set the default height of a textfield
sbFrame.size.height = 31;

/* 8 is the top padding for textfield inside searchbar
 * You may need to add a variable to 8 according to your requirement.
 */
sbFrame.origin.y = 6+self.addSearchbar.frame.origin.y;
sbTextField.frame = sbFrame;
sbTextField.textColor = [UIColor lightGrayColor];
[sbTextField setAutoresizingMask:UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleBottomMargin]; 
```

需要一个带有取消按钮和清除按钮但没有范围栏的完全透明的搜索栏。

提前致谢

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-10-30T17:03:51.073

从 iOS 5.0 开始，您可以执行以下操作：

```
UIImage *imgClear = [UIImage imageNamed:@"clear"];
[addSearchBar setImage:imgClear forSearchBarIcon:UISearchBarIconClear state:UIControlStateNormal]; 
```

而已。您可能还想为`UIControlStateHighlighted`状态重复该行。

您应该做的最后一件事是在搜索栏的子视图中进行挖掘。总有一天会断的。使用适当的 API 自定义任何控件。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-12-10T05:57:02.173

请注意您先设置 UIControlHighlighted 状态图像，然后设置 UIControlStateNormal 状态图像，否则您可能会遇到 clearIcon 未设置为突出显示状态的问题。（不知道为什么会出现这个问题。）

```
[_searchBar setImage:[UIImage imageNamed:@"ClearIcon"] forSearchBarIcon:UISearchBarIconClear state:UIControlStateHighlighted];
[_searchBar setImage:[UIImage imageNamed:@"ClearIcon"] forSearchBarIcon:UISearchBarIconClear state:UIControlStateNormal]; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-11-10T21:17:27.090

对于那些在 Swift 中尝试这个的人（我知道有人会来这里寻找这个......）你去：

```
 self.searchBar.setImage(UIImage(named: "ico-cancel"), forSearchBarIcon: UISearchBarIcon.Clear, state: UIControlState.Normal)
    self.searchBar.setImage(UIImage(named: "ico-cancel"), forSearchBarIcon: UISearchBarIcon.Clear, state: UIControlState.Highlighted) 
```

确保您的 Assets.xcassets 文件夹中有正确的图像。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-12-22T09:45:49.720

***以下是在没有新图标***的情况下更改 UISearchBar 的 UITextField 中的放大镜和清除按钮图标的方法 ：

```
// Reference search display controller search bar's text field (in my case). 
UITextField *searchBarTextField = [self.searchDisplayController.searchBar valueForKey:@"_searchField"]; 

// Magnifying glass icon. 
UIImageView *leftImageView = (UIImageView *)searchBarTextField.leftView; 
leftImageView.image = [LeftImageView.image imageWithRenderingMode:UIImageRenderingModeAlwaysTemplate]; 
leftImageView.tintColor = [UIColor whiteColor]; 

   // Clear button 
UIButton *clearButton = [searchBarTextField valueForKey:@"_clearButton"]; 
[clearButton setImage:[clearButton.imageView.image imageWithRenderingMode:UIImageRenderingModeAlwaysTemplate] forState:UIControlStateNormal];
clearButton.tintColor = [UIColor whiteColor]; 
```

# java - j2me 随机不起作用

> ID：13143470
> 
> 赞同：0
> 
> 时间：2012-10-30T16:26:42.450
> 
> 标签：java, random

> **可能重复：**
> [当我设置种子时，Java random 总是返回相同的数字？](https://stackoverflow.com/questions/5533191/java-random-always-returns-the-same-number-when-i-set-the-seed)

在我的游戏中，有 4 个怪物正在移动到相同的随机生成坐标。这意味着随机不工作。

```
 public void run() {
    while (true) {

                    // paints all Sprites, and graphics
        updateScreen(getGraphics());

        try {
            Thread.sleep(sleep);

        } catch (Exception e) {
        }
    }
}

private void updateScreen(Graphics g) {

     loops through all monsters and moves them a bit
     for (int gi = 0; gi < bottX.length; gi++) {

      bot(gi); // moves a  specified monster or gets new coordinates
     }

}

private void bot(int c) {

// some stuff to move a monster

 // if a monster is in desired place, generate new coordinates

    if(isInPlace()){
       // g]randomly generates new coordinates X and Y
        botX(c);
    botY(c);

    }

 }

public void botX(int c) {

           // monsters walking coordinates are between 30 px from the spawn zone.
    Random r1 = new Random();
    int s = r1.nextInt(3);
    // number 0 - left 1 - right 2 - don`t go in X axis
            // monster spawn coordinate
    int botox = spawnnX[c];
    int einamx;

    if (s == 0) {

        einamx = r1.nextInt(30) + (botox - 30); 
                    // [botox-30; botox)
    } else if (s == 1) {
        einamx = r1.nextInt(29) + (botox + 1); // (botoX+1 botoX+30]
    } else {
        einamx = botox;
    }

            // sets to where the monster should go
    einammX[c] = einamx;
    return;

          } 
```

所以在这个游戏中是 4 个怪物，它们的生成坐标是相等的，你只能看到 1 个怪物，因为它们移动相同。顺便说一句，如果我设置不同的生成坐标，我可以看到 4 个移动相同的怪物。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T16:28:38.967

I suspect strongly that `Random` *does* work! From [here](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Random.html)

> If two instances of Random are created with the same seed, and the same sequence of method calls is made for each, they will generate and return identical sequences of numbers.

and

> Two Random objects created within the same millisecond will have the same sequence of random numbers.

So I suspect you're creating multiple `Random` instances with the same seed, and so you're getting the same sequence of random numbers each time.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T16:29:58.697

With older versions of Java 1.4.2 and previous, and possibly the version you are using, the Random was seeded with the `System.currentTimeMillis()` This meant if you creating multiple Random to within the resolution of this call, between 1 and 16 ms, you would get the same seed.

A simple work around is to create one `Random` and re-use it. This is more efficient and ensures each call will give a random value.

Java 5.0 fixed this by using System.nanoTime() and an AtomicLong counetr to ensure the seed is different each time.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-30T16:30:25.593

Try to create one Random and reuse that instead of creating a new every time (if you have multiple threads create one per thread).

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-30T16:30:31.077

应该是种子问题。使用`new Random(seed)` [构造函数](http://docs.oracle.com/javase/7/docs/api/java/util/Random.html#Random%28long%29)。

也许你可以用类似的东西来称呼它

```
new Random(System.currentTimeMillis()); 
```

尽管如果您在同一毫秒内多次调用它，您将遇到同样的问题。我认为您不需要多次调用。只需重用该对象。

# c# - 使用 ReferencesAny 时如何配置 Fluent NHibernate 以返回 null 而不是丢失对象的代理

> ID：13143476
> 
> 赞同：2
> 
> 时间：2012-10-30T16:26:48.613
> 
> 标签：c#, .net, nhibernate, fluent-nhibernate, fluent-nhibernate-mapping

根据标题，我有一个具有 ReferencesAny 关联的对象，但引用的对象可能已被删除。如果发生这种情况，当前缺少的对象会使用代理进行初始化，然后如果访问，则抛出 ObjectNotFound。我希望能够以类似于在其他属性上将 not-found 设置为“忽略”的方式返回 null。我了解使用 Session.Get 和 Session.Load 之间的区别，但这是由于 LINQ 查询而发生的。

所以，我的问题是，我怎样才能指定 null 应该为“任何”关联的缺失对象返回？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-30T18:58:09.397

我正在使用**xml**配置，但我想我的提示无论如何都可以帮助你...... NHibernate 为那些*不完整*的映射提供了一个**未找到**的属性，默认情况下设置为“**异常**”。在此示例中是引用*多对一*映射，但它甚至可以用于*一对多*

```
<many-to-one name="MyReferencedObject" not-found="exception" /> 
```

但可以改成**忽略**

```
<many-to-one name="MyReferencedObject" not-found="ignore" /> 
```

在这种情况下，结果将为 NULL。（但要注意，NHibernate 将始终执行 SQL 选择语句，因为这样的“NULL”值不会被缓存）

**编辑**：根据下面的评论，我不得不说，我的建议不适用于**<any>**映射。抱歉，我应该更仔细地阅读......但是，请让我为您提供建议，如何解决它。

我们可以引入事件监听器。更多可以在这里找到[http://nhibernate.info/doc/nh/en/index.html#objectstate-events](http://nhibernate.info/doc/nh/en/index.html#objectstate-events)

*简而言之解决方案：*

**引入事件监听器**

```
public class PostLoadListener 
           : NHibernate.Event.Default.DefaultPostLoadEventListener
{ ... } 
```

并将其注入“会话工厂”配置。

```
<event type="post-load">
    <listener class="MyLib.PostLoadListener, MyLib"/>
</event> 
```

诀窍将在重写方法*OnPostLoad 内部*

```
public override void OnPostLoad(PostLoadEvent @event)
{
    base.OnPostLoad(@event);

    // the entity with <any> mapping 
    ConvertToNull(@event.Entity as MyAuditEntity); 
}

protected virtual void ConvertToNull(MyAuditEntity item)
{
    if (item == null)
    {
        return;
    }
    try
    {
        // access some property to check that reference is not a PROXY
        var id = item.AnyEntity.ID;
    }
    catch
    {
        // replace proxy with null
        item.AnyEntity = null; 
    }
} 
```

当然，这不是像 not-found="ignore" 这样的答案。但是这种解决方法可以完成这项工作。

# javascript - 更新 InnerHTML 页面加载的简单 JavaScript 循环

> ID：13143478
> 
> 赞同：0
> 
> 时间：2012-10-30T16:27:05.653
> 
> 标签：javascript, jquery, loops, for-loop, innerhtml

当页面加载时，我想生成一个 JavaScript 循环。项目总数取决于页面上已有的 PHP 字符串。

```
<script type="text/javascript">

function Generation(){
    var loopTotal = <?=$TotalNumberOfRows?>;
    var innerToUpdate=$("#loopItemSet");

    var page=0;
    for (var i=0;i<=<?=$TotalNumberOfRows?>;i+=24)
    {
        page++;
        // document.write(i);
        innerToUpdate.innerHTML="<a href='link.php?go="+i+"'> page number "+page+"</a>";
    }       
}

$(document).ready(function(){
    Generation();   
});

</script> 
```

它应该从 24 开始返回三个链接，进入 52，3 次。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T16:32:09.073

此行在每次迭代中覆盖`innerHTML`您的元素。您可以简单地添加`+`这样的：

```
innerToUpdate.innerHTML += "<a href='link.php?go="+i+"'> page number "+page+"</a>"; 
```

或者首先收集字符串中的所有条目，然后只更新该元素的 HTML 内容一次：

```
 function Generation(){
        var loopTotal = <?=$TotalNumberOfRows?>;
        var innerToUpdate=$("#loopItemSet");
        // var innerToUpdate=$(".loopItemSet"); // for multiple elements.

        var page=0, content = '';
        for (var i=0;i<=<?=$TotalNumberOfRows?>;i+=24)
        {
            page++;
            // document.write(i);
            content += "<a href='link.php?go="+i+"'> page number "+page+"</a>";
        }
        innerToUpdate.html( content );
    } 
```

^(`innerHTML`我用 jQuery替换了你的调用[`html()`](http://api.jquery.com/html/#html2)。在我看来，如果您使用 jQuery，请在需要的地方使用它。)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T16:30:58.853

你想使用 jQuery 的追加

而不是这个：

```
 innerToUpdate.innerHTML="<a href="link.php?go="+i+""> page number "+page+"</a>"; 
```

试试这个：

```
 innerToUpdate.append('<a href="link.php?go='+i+'"> page number '+page+'</a>'); 
```

检查该行中的引号，我编辑了一些嵌套严重的双引号。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T16:33:08.403

问题尚不清楚，但我假设您只获得一个链接而不是 3 个，并且想知道原因。它在这里：

```
 for (var i=0;i<=<?=$TotalNumberOfRows?>;i+=24)
    {
        page++;
        // document.write(i);
        innerToUpdate.innerHTML="<a href='link.php?go="+i+"'> page number "+page+"</a>";
    } 
```

应该读：

```
 for (var i=0;i<=<?=$TotalNumberOfRows?>;i+=24)
        {
            page++;
            // document.write(i);
            innerToUpdate.innerHTML+="<a href='link.php?go="+i+"'> page number "+page+"</a>";
        } 
```

您当前的代码每次都重置 html 而不是连接到它。

# php - JOIN 的反作用

> ID：13143483
> 
> 赞同：2
> 
> 时间：2012-10-30T16:27:18.277
> 
> 标签：php, mysql

我有两张桌子：

*   人员名单；
*   我想忽略的人的列表。

当我阅读人员列表时，我不想看到列表中被忽略的人。

我当前的解决方案是第二次查询数据库（以选择我想忽略的人）并将它们从我用 PHP 创建的数组中删除。它正在工作，很好。

但是，我想在 MySQL 中这样做。我知道`JOIN`只有当该行存在于另一个表中时才会加入。我正在寻找不同的东西（如果行存在，则不会显示条目）。

我在 Google 中搜索过，但缺少“关键字”，但没有给我任何结果。

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-30T16:30:18.963

```
SELECT * FROM Person
LEFT OUTER JOIN IgnoredPerson
ON Person.id = IgnoredPerson.id
WHERE IgnoredPerson.id IS null 
```

* * *

解释：

![在此处输入图像描述](../Images/0d5b58423d2645bb450e258f0af5a44a.png)

> 通过 where 子句从右侧排除我们不想要的记录

[http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-30T16:30:18.743

在不知道您的架构的情况下，我会建议以下内容：

```
SELECT * FROM people WHERE id NOT IN (SELECT person_id FROM ignored_people) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-30T16:30:31.420

你可以试试这样的

```
 SELECT * FROM people p WHERE NOT EXISTS (SELECT i.id FROM ignorePeople i where p.id = i.id ) 
```

[这是](http://dev.mysql.com/doc/refman/5.0/en/exists-and-not-exists-subqueries.html)关于 MySQL 中 EXISTS 的链接

# youtube-api - Youtube用户删除视频回调

> ID：13143484
> 
> 赞同：0
> 
> 时间：2012-10-30T16:27:29.963
> 
> 标签：youtube-api

当用户删除视频时，是否可以从 youtube 网站回调到第三方网络服务器？有什么例子吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T18:53:29.113

无法挂钩到 YouTube 网站的回调。相反，您可以使用 YouTube api 构建一个站点来删除视频。删除视频的文档可在此处找到。 [https://developers.google.com/youtube/v3/docs/videos/delete](https://developers.google.com/youtube/v3/docs/videos/delete)

# c - 程序在 Linux 上生成核心转储，但在 Windows 上运行良好

> ID：13143485
> 
> 赞同：0
> 
> 时间：2012-10-30T16:27:33.827
> 
> 标签：c

程序在 Linux 上生成核心转储，但在 Windows 上运行良好。知道为什么吗？

```
#include <stdio.h>

int main() {
    int i, n;
    int count[n];
    int total;
    int value;
    int d;

    printf("Enter the length of array: ");
    scanf("%d", &n);

    //printf ("total of array is %4d \n", n);

    for (i=0; i<=n-1 ; i++ ) {
        printf("Enter the number %d: ", i);
        scanf("%d", &count[i]);
        //  printf ("total of array is %4d \n", n);
    }

    //printf ("total of array is %4d \n", n);

    value = totalcalc( count, n);        
    printf ("total of array is %3d \n", value);

    scanf ("%d", &d);
}

int totalcalc(int count1[], int j)
{
    int  i, total, value;
    //printf (" Entered into function, value of j is %d \n", j);
    value = 0;
    for (i=0; i<=j-1;i++ ) {
        value = value + count1[i];
        //printf ("the value is %d\n", value);
    }
    return value;
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-30T16:30:06.217

This part is very dubious:

```
int i, n;
int count[n]; 
```

`n` is clearly unitialized and you're allocating an array of size `n`.

If you want a dynamic-sized array you could do this:

```
int* count;
printf("Enter the length of array: ");
scanf("%d", &n);

count = malloc(n * sizeof(int)); // dynamically allocate n ints on heap

value = totalcalc( count, n);

printf ("total of array is %3d \n", value);

scanf ("%d", &d);

free(count); // free memory 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-30T16:29:36.420

Because `int count[n]` was declared before `n` was properly initialized.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-30T16:36:18.857

要`count`正确声明您的数组，请将其声明移到`n`已阅读的点之外：

仅 C99 解决方案：

```
int main() 
{
  int i, n;
  int total;
  int value;
  int d;

  printf("Enter the length of array: ");
  scanf("%d", &n);

  int count[n] 
```

更灵活（也包括 C99 之前）的解决方案：

```
#if __STDC_VERSION__ >= 199901L /* going C99 */
# define NEW_ARRAY(t,a,n) t a[n]
# define DELETE_ARRAY(a)
#else
# define NEW_ARRAY(t,a,n) t * a; \ a = malloc((n) * sizeof(t)))
# define DELETE_ARRAY(a) free(a)
#endif

int main() 
{
  int i, n;
  int total;
  int value;
  int d;

  printf("Enter the length of array: ");
  scanf("%d", &n);

  {
    NEW_ARRAY(int, count, n);

    ...

    DELETE_ARRAY(count);
  }

  ... 
```

# c# - 了解 C# 泛型和 Nullable 值类型。返回 null 或可为 null

> ID：13143488
> 
> 赞同：8
> 
> 时间：2012-10-30T16:27:49.753
> 
> 标签：c#, generics, mono, null, nullable

假设我有以下课程：

```
public class GenericClass<T>
{
    public T Find()
    {
        //return T if found otherwise null or Nullable<T>
    }
} 
```

在某个地方，我想使用 a 来专门化我的课程`T`，`class`其他时候使用 a `struct`。我正面临这个[问题](https://stackoverflow.com/questions/2230657/help-with-c-sharp-generics-error-the-type-t-must-be-a-non-nullable-value-ty)`Nullable<T>`：如果`T`类型不限于 a ，我无法返回a `struct`。

我想提供一个我的`Find`方法的实现，如果`T`它专门用于 a`class`或 a `struct`。如果`Find`失败，我想返回`null`if`T`是一个类，否则`Nullable<T>`。

不使用反射有可能吗？如果是怎么办？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-30T16:29:49.033

你可以退货`default(T)`。

对于一个类，这将是`null`. 对于 any `Nullable<T>`，这将是一个`Nullable<T>`没有值的（有效地`null`）。

话虽如此，如果您将其与 a`struct`而不是 a`Nullable<T>`作为类型一起使用，`default(T)`则将是结构的默认值。

* * *

如果您想让任何类或结构统一地工作，您可能需要返回两个值 - 您可以在这里使用框架作为灵感，并拥有一个 TryXXX 方法，即：

```
public bool TryFind(out T) 
```

然后，您可以`default(T)`在未找到该值时使用，并返回 false。这避免了对可空类型的需要。`Tuple<bool, T>`如果您想避免使用 out 参数，您也可以编写此返回 a或类似内容，即：

```
public Tuple<bool, T> Find() 
```

最后一个选项，可能是让你的类非泛型，然后使用一对泛型方法：

```
class YourClass // Non generic
{
    public T FindReference<T>() where T : class
    {
         // ...
        return null;
    }

    public Nullable<T> FindValue<T>() where T : struct
    {
         // ...
         return default(T);
    }
} 
```

请注意，您需要不同的名称，因为您不能拥有纯粹基于返回类型的重载方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-30T16:31:15.157

我会使用以下解决方案：

```
public Boolean Find(out T result)
{
    // Pseudo code
    if (FindItem == true)
    {
        result = ItemFound;
        return true;
    }
    result = default(T);
    return false;
} 
```

为什么？因为`Nullable<T>`只接受一个结构并且上面的方法同时支持类和结构。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T16:45:08.730

正如里德所说，你可以回来`default(T)`。

在我看来，这有一个很大的缺点：如果您的方法声明`default(T)`如果未找到该项目则返回，那么您将失去返回值类型的默认值的能力（例如，返回`0`for`Find<int>`通常可能是一个完全有效的返回值）。

我宁愿去做这样的事情

```
public class GenericClass<T>
{
    public Option<T> Find()
    {
        //return Option.Some(item) if found otherwise Option.None<T>()
    }
}

public static class Option
{
    public static Option<T> None<T>()
    {
        return new Option<T>(default(T), false);
    }

    public static Option<T> Some<T>(T value)
    {
        return new Option<T>(value, true);
    }
}

public sealed class Option<T>
{
    private readonly T m_Value;
    private readonly bool m_HasValue;

    public void Option(T value, bool hasValue)
    {
        m_Value = value;
        m_HasValue = hasValue;
    }

    public bool HasValue 
    {
        get { return m_HasValue; }
    }        

    public T Value 
    {
        get { return m_Value; }
    }
} 
```

# automata - NFA 和 epsilon NFA 的实例

> ID：13143489
> 
> 赞同：1
> 
> 时间：2012-10-30T16:27:51.337
> 
> 标签：automata

NFA 和 epsilon NFA 的实时示例是什么，即除了它用于设计编译器之外的实际示例

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T16:35:23.880

任何时候任何人使用正则表达式，他们都在使用有限自动机。如果你对正则表达式不太了解，让我告诉你它们非常普遍——在许多生态系统中，它是大多数人在面临从字符串中获取结构化数据时尝试应用的第一个工具。理解自动机是理解（和推理）正则表达式的一种方法，如果你有数学倾向，这是一种非常可行的方法。

实际上，今天的正则表达式引擎已经超越了这些数学概念，并添加了一些功能，这些功能允许做的事情超出了 FA 允许的范围。然而，许多正则表达式不使用这些功能，或者以有限的方式使用它们，以至于可以使用 FA 来实现它们。

现在，我之前只谈到了一般的有限自动机。NFA 是特定的 FA，就像 DFA 一样，两者可以相互转换（从技术上讲，任何 DFA 都已经是 NFA）。因此，虽然您可以在上面用“NFA”替换“有限自动机”，但请注意，它不一定是引擎盖下的 NFA。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-28T07:05:04.707

让我们不要忘记基本基于有限自动机的[马尔可夫链。](http://en.wikipedia.org/wiki/Markov_chain)结合bellpeace提到的硬件和软件建模，一个非常强大的工具。

如果您想知道为什么 epsilon NFA 被视为 NFA 的变体，那么我认为没有充分的理由。它们以相同的方式解释，除了每一步可能不再是单位时间，但 NFA 也不是真的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-03T14:54:10.480

一个有点晦涩但有效的例子是[aho-corasick 算法](http://en.wikipedia.org/wiki/Aho%E2%80%93Corasick_string_matching_algorithm)，它使用有限自动机在文本中搜索多个字符串

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-28T05:03:15.587

正如@delnan 所解释的，自动机通常以正则表达式的形式使用。但是，它们的用途不止于此。自动机通常用于对硬件和软件系统进行建模并验证它们的某些属性。您可以通过查看[模型检查](http://en.wikipedia.org/wiki/Model_checking)找到更多信息。[在介绍自动机、语言和计算](http://infolab.stanford.edu/~ullman/ialc.html)的介绍中可以找到一个非常简单的激励示例。

# php - 在mysql中使用数组值在哪里

> ID：13143492
> 
> 赞同：0
> 
> 时间：2012-10-30T16:28:03.670
> 
> 标签：php, mysql

我有多个 MYSQL SELECT 查询相互提供，第一个选择行 id，将它们放在一个数组中，第二个 SELECT 查询需要使用这些值 10,14 等，以访问其他表中的其余餐厅信息，我遇到的问题是第二个查询仅根据数组 14 中的最后一个值选择最后一个 phone_number。

```
$city= 'london';
$cuisine ='indian';

$sql=(" SELECT restaurant_id FROM restaurants WHERE  city = '$city' AND cuisine=                     '$cuisine'  ");

mysql_select_db('RESTAURANTS');
$retval = mysql_query( $sql, $conn ); 
if(! $retval )
{
die('Could not get data: ' . mysql_error());
}
while($row = mysql_fetch_array($retval, MYSQL_ASSOC))

foreach ($row as $key => $value) { 
$i++; // increment $i by one each loop pass 

echo "Cart Item $i ______ key = $key | value = $value<br />"; }

$sql1 = "SELECT phone_number FROM restaurants WHERE  ($key) IN ($value)";

mysql_select_db('RESTAURANTS');
$retval1 = mysql_query( $sql1, $conn ); 
if(! $retval1 )
{
die('Could not get data: ' . mysql_error());
}
while($row1 = mysql_fetch_array($retval1, MYSQL_ASSOC))

foreach ($row1 as $k => $v) { 
$ii++; // increment $i by one each loop pass 
         print_r ($v);

}
?> 
```

输出

```
Cart Item 1 ______ key = restaurant_id | value = 10
Cart Item 2 ______ key = restaurant_id | value = 14

// the phone_number
444444444 
```

只选择14而不是10的phone_number还为什么呢？我是否需要某种额外的函数来再次循环遍历数组，我尝试了 implode 和 mysql_value 函数，我尝试了我能想到的一切，感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T16:35:33.657

你的代码格式很糟糕。如果您使用了正确的缩进，您会发现您的第一个 while() 循环格式错误：

```
while($row = mysql_fetch_array($retval, MYSQL_ASSOC))
                                                      ^--- no {
    foreach ($row as $key => $value) { 
    $i++; // increment $i by one each loop pass 

    echo "Cart Item $i ______ key = $key | value = $value<br />"; } 
```

因此，它将检索第一个查询的所有行并输出各个字段。但是由于您没有使用正确的括号，下一段代码（您的下一个 sql 查询/循环）**不是**第一个 while 循环的一部分，因此您只执行该电话号码获取查询**ONCE**。

它应该是

```
 while(... first query) {
      print values
      do inner query
      while (fetch inner query) {
           print values
      }
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T16:36:07.747

问题似乎是您正在遍历餐厅 ID 并运行对 eacy restaruant 的查询，仅将该值放入`$retval1`- 因此当您使用该数组进行查询时，它只有最后一个电话号码。

# php - Amazon EC2 Micro Instance

> ID：13143495
> 
> 赞同：0
> 
> 时间：2012-10-30T16:28:14.033
> 
> 标签：php, amazon-ec2, amazon-web-services

I am looking for a way to automatically turn off/on a microinstance on session based intervals. I need to be able to do this to automate when I am paying for the EC2 server. Does anyone know of any ways to do this using PHP or some other backend technology

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T16:32:45.437

您始终可以使用 AWS 命令​​行工具（即制作一个 BASH 脚本来执行此操作）或使用 AWS PHP 开发工具包来启动和停止实例。当然，问题是您将需要一些单独的服务器，您可以在其上运行 cron 或类似的东西来执行您的启动/停止脚本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T16:31:03.657

Zend Framework 1.x 有一些类可用于 Amazon EC2 (Zend_Service_Amazon_Ec2)。

# android - Android: Having few items in the same context menu as a radio group and few as check-boxes

> ID：13143497
> 
> 赞同：0
> 
> 时间：2012-10-30T16:28:21.613
> 
> 标签：android, accessibility

I am trying to create a context menu which should look like

* * *

## MenuItem1 O

## MenuItem2 O

## MenuItem3 O

## MenuItem4 ✔</h2>

## MenuItem5 ✔</h2>

Is it possible to do the same? Please note that I know that using setGroupCheckable I can create a group of checkable radio button menuItems, and using setCheckable for individual items, I can get checkbox menuItems but how to get both in the same menu is the issue that I am facing. [http://developer.android.com/guide/topics/ui/menus.html](http://developer.android.com/guide/topics/ui/menus.html) is a good reference for radio buttons and checbox menus.

Any idea anyone?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T08:41:21.837

我终于找到了实现这一目标的方法，因此想到了与他人分享。

您可以使用不同的组 id 将各种菜单项添加到同一个菜单，因此，对于一个组，您可以将 setGroupCheckable 设置为 true（这使得该组单选按钮），而您可以将另一组的单个菜单项设置为可检查(setCheckable(true))，它们变成了复选框。

# android - Set Actionbar overlay mode at runtime in Android

> ID：13143499
> 
> 赞同：14
> 
> 时间：2012-10-30T16:28:34.620
> 
> 标签：android, android-actionbar, android-4.0-ice-cream-sandwich

How do I set the `actionbar` mode at runtime to not-overlay or overlay with the content at runtime? I tried using `getWindow().requestFeature(Window.FEATURE_ACTIONBAR_OVERLAY)` but it doesn't allow to set the mode after calling `setContentView()`. This can be done, as I have seen it being done in the Youtube app.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-09-04T18:52:45.147

尽管不一定完全符合您的要求，但一种体面的解决方法是在内容顶部创建一个与 ActionBar 高度相同的间隔视图 (android:layout_height="?android:actionBarSize")。当您想要启用覆盖模式时，将间隔的可见性设置为 View.GONE，当您想要禁用它时，将其设置为 View.VISIBLE。

# servicestack - Catching exceptions with servicestack

> ID：13143502
> 
> 赞同：5
> 
> 时间：2012-10-30T16:28:45.517
> 
> 标签：servicestack

We have been using ServiceStack for REST based services for a while now and so far it has been amazing.

All of our services have been written as:

```
public class MyRestService : RestService<RestServiceDto>
{
   public override object OnGet(RestServiceDto request)
   {
   }
} 
```

For each DTO we have Response equivalent object:

```
public class RestServiceDto 
{
    public ResponseStatus ResponseStatus {get;set;}
} 
```

which handles all the exceptions should they get thrown.

What I noticed is if an exception is thrown in the `OnGet()` or `OnPost()` methods, then the http status description contains the name of the exception class where as if I threw a:

```
new HttpError(HttpStatus.NotFound, "Some Message"); 
```

then the http status description contains the text "Some Message".

Since some of the rest services are throwing exceptions and others are throwing `new HttpError()`, I was wondering if there was a way without changing all my REST services to catch any exceptions and throw a `new HttpError()?`

So for example, if the `OnGet()` method throws an exception, then catch it and throw a `new HttpError()`?

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-31T04:25:03.430

## 使用旧 API - 继承自定义基类

当您使用旧 API 来处理异常时，您应该提供一个自定义基类并覆盖 HandleException 方法，例如：

```
public class MyRestServiceBase<TRequest> : RestService<TRequest>
{
   public override object HandleException(TRequest request, Exception ex)
   {
       ...
       return new HttpError(..);
   }
} 
```

然后利用自定义错误处理让您的所有服务都继承您的类，例如：

```
public class MyRestService : MyRestServiceBase<RestServiceDto>
{
   public override object OnGet(RestServiceDto request)
   {    
   }
} 
```

## 使用新 API - 使用 ServiceRunner

否则，如果您使用的是[ServiceStack 改进的 New API](https://github.com/ServiceStack/ServiceStack/wiki/New-Api)，那么您不需要让所有服务都继承一个基类，而是可以通过覆盖 CreateServiceRunner 来告诉 ServiceStack 在您的 AppHost 中使用自定义运行器：

```
public override IServiceRunner<TRequest> CreateServiceRunner<TRequest>(
    ActionContext actionContext)
{           
    return new MyServiceRunner<TRequest>(this, actionContext); 
} 
```

MyServiceRunner 只是一个实现您感兴趣的自定义钩子的自定义类，例如：

```
public class MyServiceRunner<T> : ServiceRunner<T> {
    public override object HandleException(IRequestContext requestContext, 
        TRequest request, Exception ex) {
      // Called whenever an exception is thrown in your Services Action
    }
} 
```

# listview - How to create with jquery mobile a swipeable div over a list?

> ID：13143506
> 
> 赞同：1
> 
> 时间：2012-10-30T16:29:07.947
> 
> 标签：listview, jquery-mobile, swipe

First of all, I use jquery-1.7.1.min.js and jquery.mobile-1.2.0.min.js.

I have a jquery mobile list like this

```
 <ul id="myList" data-role="listview">
      <li><a href="#">...</a></li>
      <li><a href="#">...</a></li>
      ...
 </ul> 
```

As I want to build a pagination for this list via swiperight and swipeleft over all list items I am wondering how to implement this?

I used...

```
$("#ulList").swiperight(function () {
    // pagination logic
}); 
```

but this is not working, except I swipe exactly between the list items :)

Is there any possibility to overlay a div or something, so that I can click my list items AND have a swipe right and left area over all list items???

thanks for your help!

regards from germany

# c# - 如何在此函数中调整位图的大小？

> ID：13143511
> 
> 赞同：1
> 
> 时间：2012-10-30T16:29:30.177
> 
> 标签：c#

尺寸一直是 1920x1080，但我希望它是例如 10x10，所以函数中的过程会更快。我不介意位图的大小或其质量，我只是希望它更快。

在这个函数中，我创建了每个位图的直方图。问题是 FOR 循环需要很长时间。

```
public static long[] GetHistogram(Bitmap b)
        {
            long[] myHistogram = new long[256]; // histogram סופר כמה יש מכל גוון

            BitmapData bmData = null;

            //b = new Bitmap(100, 100);
            //b.SetPixel(0,0,Color.FromArgb(10,30,40,50)); //run and make it come to here

            try
            {
                ResizeBitmap(b, 10, 10);
                //Lock it fixed with 32bpp
                bmData = b.LockBits(new Rectangle(0, 0, b.Width, b.Height), ImageLockMode.ReadOnly, PixelFormat.Format32bppArgb);

                int scanline = bmData.Stride;

                System.IntPtr Scan0 = bmData.Scan0;
                unsafe
                {
                    byte* p = (byte*)(void*)Scan0;
                    int nWidth = b.Width;
                    int nHeight = b.Height;

                    for (int y = 0; y < nHeight; y++)
                    {
                        for (int x = 0; x < nWidth; x++)
                        {
                            long Temp = 0;
                            Temp += p[0]; //  p[0] - blue, p[1] - green , p[2]-red
                            Temp += p[1];
                            Temp += p[2];

                            Temp = (int)Temp / 3;
                            myHistogram[Temp]++;

                            //we do not need to use any offset, we always can increment by pixelsize when
                            //locking in 32bppArgb - mode
                            p += 4;
                        }
                    }
                }

                b.UnlockBits(bmData);
            }
            catch
            {
                try
                {
                    b.UnlockBits(bmData);
                }
                catch
                {

                }
            }

            return myHistogram; // to save to a file the histogram of all the bitmaps/frames each line contain 0 to 256 values of a frame.
        } 
```

所以我调用这个函数： ResizeBitmap(b, 10, 10); 并尝试调整每个位图的大小，但在这一行之后我看到位图大小仍然是 1920x1080

这是 ResizeBitmap 函数：

```
public static Bitmap ResizeBitmap(Bitmap b, int nWidth, int nHeight)
        {
            Bitmap result = new Bitmap(nWidth, nHeight);
            using (Graphics g = Graphics.FromImage((Image)result))
                g.DrawImage(b, 0, 0, nWidth, nHeight);
            return result;
        } 
```

也许还有另一种方法可以使 GetHistogram 函数更快地工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T16:31:49.530

该方法返回新的位图，因此您应该使用返回值：

```
Bitmap newBitmap = ResizeBitmap(b, 10, 10);
b.Dispose();
b = newBitmap; 
```

旁注：您忽略了图像的步幅，这意味着指针可以超出图像数据。如果位图倒置存储，则认为步幅为*负。*

# c# - 带有套接字的任务异步模式

> ID：13143513
> 
> 赞同：1
> 
> 时间：2012-10-30T16:29:36.850
> 
> 标签：c#, task

我正在尝试实现一个可以侦听传入 TCP 数据的类。我正在尝试使用任务来做到这一点。

我有两个中心方法

```
 private async void ReceiveAsync()
    {
        while (true)
        {
            int bytesRead = await Receive();

            if (bytesRead > 0)
            {

                byte[] result = new byte[bytesRead];
                Buffer.BlockCopy(_buffer, 0, result, 0, bytesRead);

                Console.WriteLine(Encoding.UTF8.GetString(result));
            }
        }
    } 
```

和

```
 private Task<int> Receive()
    {
            return Task.Run(() =>
            {
                if (sock.Poll(-1, SelectMode.SelectRead))
                    if (sock.Available > 0)
                        return sock.Receive(_buffer, _buffer.Length, SocketFlags.None);
                return -1;
            }
            );
    } 
```

在我的主程序中，我调用`ReceiveAsync()`TCP 管道，然后将一些数据发送到接收器响应的 TCP 管道中。我确实收到了这个回复，但现在我陷入了一个无限循环中`while(true)`，并且没有收到从“接收器”发送的进一步数据。

有什么完全错误的。它是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T16:34:47.670

尝试：

```
int bytesRead;
do {
    bytesRead = await Receive();

    if(bytesRead > 0) {...}
} while (bytesRead > 0); 
```

即`bytesRead`用作退出条件。

另外：您可能可以在这里很好地使用 async ：

```
// for illustration ONLY
TaskCompletionSource<int> source = new TaskCompletionSource<int>();
sock.BeginReceive(_buffer, 0, _buffer.Length, SocketFlags.None, ar =>
{
    try
    {
        int val = ((Socket)ar.AsyncState).EndReceive(ar);
        source.SetResult(val);
    }
    catch (Exception ex)
    {
        source.SetException(ex);
    }
}, sock);
return source.Task; 
```

# ruby-on-rails - rails ecommerce donation center

> ID：13143517
> 
> 赞同：1
> 
> 时间：2012-10-30T16:29:47.910
> 
> 标签：ruby-on-rails, paypal, e-commerce, spree, donations

I am trying to create a donation centre of sorts in Rails for a non-profit, using PayPal, and am wondering if I should start from scratch or use an existing eCommerce gem/platform.

I want to: - list various "products", or donation types that a user can select, customize and pay for - be able to send/serve downloadable files to a donor, depending on their donation type - keep track of donors, donations and various custom bits of data the user enters - add hooks to add donors to mailing lists, push donation notifications to social media, etc.

Basically, I want something that looks like a store and supports digital products, but processes donations instead of sales through PayPal.

Does anyone have experience using Spree (or something similar) to accept donations? I can't seem to find evidence that this works without a lot of hacking.

Thanks!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T17:46:47.760

有几种方法可以做到这一点，但每种方法都需要您卷起袖子进入代码。我会推荐，特别是如果您正在学习 Rails，请使用 Daniel Kehoe 的“railsapp - Ruby on Rails 会员网站”

[http://railsapps.github.com/rails-stripe-membership-saas/](http://railsapps.github.com/rails-stripe-membership-saas/)

这是一个很棒的教程，也是您想要完成的工作的基石。不要只是复制/克隆它并开箱即用，我将通过本教程来更好地了解正在发生的事情以及如何自定义它以满足您的需求。它使用 Stripe 进行支付处理。

# c# - 是否有任何第三方文件上传工具可以上传大于 2GB 的文件？

> ID：13143524
> 
> 赞同：4
> 
> 时间：2012-10-30T16:30:11.797
> 
> 标签：c#, asp.net, iis

所以基本上我需要上传大文件，最好是8GB。

我受到这些文件上传限制的限制：

```
<system.web>
    <!-- set to max value, max request size is 2GB, takes precedence over IIS -->
    <httpRuntime maxRequestLength="2097151" executionTimeout="3600"/>
    ...

<system.webServer>
    <security>
        <requestFiltering>
            <!-- set to max value, IIS max length of content is 4GB -->
            <requestLimits maxAllowedContentLength="4294967295"/>
        </requestFiltering>
    </security>
    ... 
```

我环顾四周，听说超过 2GB 限制的唯一方法是分段上传文件，但实际上我还没有找到任何可以做到这一点的工具。有人知道吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T16:36:22.540

WinRar、7Zip 或 WinZip 应该能够创建分解成碎片的压缩文件。如果这些文件随后被上传，您可以通过解压缩整个存档将它们重新组合在一起。您可以尝试使用[7-Zip SDK](http://www.7-zip.org/sdk.html)来压缩/拆分这些大文件。使用压缩还可以减少上传时间和发送的字节数。

正如评论所暗示的那样，可能还有其他类似的工具。

**编辑**：为了清楚起见 - 使用这些压缩工具中的任何一个显然不会让您能够一次性上传大量文件。它们可用于轻松地将大文件压缩和拆分成几个更小、更易于管理的部分，然后可以使用文件上传控件（或类似的第 3 方控件）的现有限制进行上传。使用这些工具将涉及为您的用户提供一个实用程序，该实用程序有助于拆分文件，然后他们可以上传片段。

这是[一篇文章](http://weblogs.asp.net/jgalloway/archive/2008/01/08/large-file-uploads-in-asp-net.aspx)，其中包含各种商业上传工具的链接，您可以查看这些工具，但我不熟悉它们。它还链接到 Jeff Atwood 的博客条目，该条目提供了使用桌面工具进行非常大的上传的案例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T17:36:55.573

可以通过使用 HTML5 FileApi 实现分块上传来规避 .NET Framework 的这一限制。这也将实现上传安全，如果上传失败，代码只需要重新上传一个 X mb 的块（不管它有多大）。

您必须在服务器端和客户端都实现此技术。

这是一篇关于在客户端使用 Javascript 与 HTLM5 FileAPI、XHR v2 和 WebWorkers 实现的博客。

[http://kongaraju.blogspot.in/2012/07/large-file-upload-more-than-1gb-using.html](http://kongaraju.blogspot.in/2012/07/large-file-upload-more-than-1gb-using.html)

这是一个关于 ASP.NET 的 FileUploadControl 的代码项目，它了解分块上传（绕过 2 gb 限制）和可恢复上传。它使用 HTML5 API，因此需要现代浏览器。Firefox 4 和任何当前版本的 Chrome（所以我们现在是 Ver 22？太疯狂了。）应该可以工作。我现在不了解 Opera，但版本 12 了解拖放和 Webworkers ......所以是的，它应该工作。

如果未提供功能，文件上传控制将恢复为整个文件的正常 POST（2 gb 限制）。

# .htaccess - 使用 htaccess 更改目标文件

> ID：13143525
> 
> 赞同：2
> 
> 时间：2012-10-30T16:30:13.017
> 
> 标签：.htaccess

我有一个用 php 创建的图像。

```
<img src="captcha.php" /> 
```

我怎样才能把这个 captcha.php 放在某个文件夹（inc）中，但 src="captcha.php" 保持原样。

我认为 htaccess 也许可以做到这一点。

请帮忙？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T16:38:43.653

试试这个，我想这就是你要找的，

```
RewriteEngine on
RewriteRule ^captcha.php$ /inc/captcha.php 
```

假设您的“inc”文件夹和 captcha.php 文件位于您的根级别。

# xml - Default Schema Values in MarkLogic

> ID：13143530
> 
> 赞同：1
> 
> 时间：2012-10-30T16:30:22.773
> 
> 标签：xml, xsd, xquery, marklogic

I'm trying to insert a document via `xdmp:document-insert()` before that is called I am validating the document against it's respective schema via `validate strict { $xml }` and using that output in the insert call. However the output of the `validate` call does not include the default value specified in the schema.

Simplified schema:

```
<xs:schema>
  <xs:complexType name="fields-type" abstract="false" mixed="false">
    <xs:sequence minOccurs="1" maxOccurs="1">
      <xs:element default="Faulkner" maxOccurs="1" minOccurs="0" name="an_author" nillable="false" type="xs:string"/>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="document-type" abstract="false" mixed="false">
    <xs:sequence minOccurs="1" maxOccurs="1">
      <xs:element name="fields" type="fields-type" minOccurs="1" maxOccurs="1" nillable="false"/>
    </xs:sequence>
  </xs:complexType>
  <xs:element name="document" type="document-type" abstract="false" nillable="false"/>
</xs:schema> 
```

The document:

```
 <document>
     <fields>
       <an_author/>
     </fields>
 </document> 
```

After calling `validate strict { $xml }` the output document is the same as above with no default value added to the `<an_author>` element. Note: I also tried using the `fixed` attribute in place of `default` in the schema and I'm getting the same result. `xdmp:validate($xml, "strict")` isn't returning any errors either.

Edit: According to the XQuery validate specification [here](http://www.w3.org/TR/xquery/#id-validate) the output should have the default value specified.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T17:41:17.227

默认值实际上是数据模型的一部分，但是当我们输出数据模型时，它们不一定是序列化的。您可以通过对它们执行路径表达式来验证默认属性是否在数据模型中。

如果您想确保它们在输出时被序列化，有一个输出设置将强制它们被发出：

```
declare option xdmp:output "default-attributes=yes"; 
```

（或者您可以将选项**default-attributes**设置为`xdmp:quote`或`xdmp:save`。）

或者，您可以强制复制数据模型实例，它将携带所有属性，但忘记了它们是默认的：

```
let $d := validate strict { $node }
return document { $d } 
```

# c# - 在winForms c#中创建一个面板，在全屏模式下具有多个部分

> ID：13143532
> 
> 赞同：0
> 
> 时间：2012-10-30T16:30:26.723
> 
> 标签：c#, .net, winforms, panel

我想创建一个可以有多个面板的表单，每个面板中都有一个图片框，并且每个面板都可以移动。

面板需要适合显示器的最大尺寸，每个面板的宽度相同。

我试图让表单使用 WindowState 属性以最大尺寸开始，但无法根据面板的数量来拆分面板的宽度。

另外，我尝试使用流程面板作为主容器，并尝试在流程面板内根据需要添加面板。流面板在表单中停靠为“适合”。

有人可以解释我如何解决这个问题吗？

先感谢您，

瓦伦

编辑：表单还需要能够让用户在图片框中移动图片。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T17:45:58.470

您可以添加 splitContainers，即 2 个面板，在每个面板内您可以添加另一个拆分容器，然后一次又一次...

要使面板适合表单的最大尺寸，您必须使用停靠属性 = 填充或锚定到顶部、右侧、底部和左侧

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T18:28:37.683

看看这些链接：

1.  [http://www.axure.com/dynamic-panels-advanced](http://www.axure.com/dynamic-panels-advanced)
2.  [http://www.axure.com/drag-and-drop-images-tutorial](http://www.axure.com/drag-and-drop-images-tutorial)

# java - 如何删除 docx4j 中的自定义属性

> ID：13143542
> 
> 赞同：1
> 
> 时间：2012-10-30T16:30:55.030
> 
> 标签：java, docx4j, custom-properties

可以像这样在 docx4j 中添加自定义属性：

```
final DocPropsCustomPart customPart = getDocPropsCustomPart();
final Properties customProperties = customPart.getJaxbElement();
...
customProperties.getProperty().add(newProperty); 
```

但是如何删除已经设置的属性？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T20:44:45.137

getProperty() 返回列表。

根据 JavaDoc，此访问器方法返回对活动列表的引用，而不是快照。因此，您对返回列表所做的任何修改都将出现在 JAXB 对象中。

这种方法在 docx4j 中很常见。

因此，您可以从列表中删除 Property 对象。

# google-app-engine - Google Drive 按服务帐户更改权限

> ID：13143544
> 
> 赞同：5
> 
> 时间：2012-10-30T16:31:01.183
> 
> 标签：google-app-engine, google-drive-api

为 Google Apps 域的管理员寻找当前最好的方法来修改其他用户拥有的 Google Drive 对象的权限。我将在 Google App Engine 上开发应用程序。

使用 2 legged OAuth 和 Google Documents List API 很简单：[https](https://developers.google.com/gdata/docs/auth/oauth#2LeggedOAuth) ://developers.google.com/gdata/docs/auth/oauth#2LeggedOAuth但现在 Google Drive SDK 是实时 API，我看到服务帐户是鼓励的方法：[Google Drive api 是否支持 2 legged oauth？](https://stackoverflow.com/questions/12605705/does-google-drive-api-support-2-legged-oauth)和[https://developers.google.com/accounts/docs/OAuth2ServiceAccount](https://developers.google.com/accounts/docs/OAuth2ServiceAccount)。所以我正在关注一个使用这种方法和预测 API 的示例：[https ://developers.google.com/appengine/articles/prediction_service_accounts](https://developers.google.com/appengine/articles/prediction_service_accounts)并且您不能在 API 控制台的 Team 部分中使用 GAE 服务帐户。收到错误：“用户 xxx@appspot.gserviceaccount.com 可能无法添加到项目“新项目名称”中。只能添加来自域 myappsdomain.com 的成员。

所以，我基本上是在问：1）您如何将服务帐户与 Google Drive SDK 一起用于管理任务，例如更改权限 2）以及使用与非域用户一起使用的 Drive API 的任何工作 GAE 服务帐户教程。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T17:17:29.017

刚刚添加了有关服务帐户和用户模拟的文档：

[https://developers.google.com/drive/service-accounts](https://developers.google.com/drive/service-accounts)

[https://developers.google.com/drive/user-impersonation](https://developers.google.com/drive/user-impersonation)

遗憾的是，Google Drive 尚不支持 App Engine 服务帐户。

# objective-c - 我按下了什么 CallOut？

> ID：13143546
> 
> 赞同：0
> 
> 时间：2012-10-30T16:31:06.583
> 
> 标签：objective-c, xcode, mkannotationview

如果我的地图视图中有很多注释……如何理解我按下的 CallOut？例如，在 tableview 中，我们有“didSelectRowAtIndexPath”......但是在这里？

```
-(void)button:(id)sender {

[self performSegueWithIdentifier: @"dettaglio"sender: self];

}

- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {

if (![[segue identifier] isEqualToString:@"dettaglio"]&&![[segue identifier]     
isEqualToString:@"cerca"])
{

[(paginaOpzioni*)segue.destinationViewController setDelegate:self];

}

if ([[segue identifier] isEqualToString:@"dettaglio"])
{
    paginaDettaglio *ibcVC = [segue destinationViewController];
    Annotazione *annotazioneDaPassare=[mapAnnotations objectAtIndex:2];
    ibcVC.immagine = annotazioneDaPassare.immagine;
    ibcVC.navigationItem.title = annotazioneDaPassare.title;
}
} 
```

我需要更改 [mapAnnotations objectAtIndex:2] 的值 (2); 因为我想向 DestinationViewController 发送正确的图像和文本！谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T17:31:20.883

您的 MKMapViewDelegate 将告诉您在调用 -mapView:didSelectAnnotationView 时选择了什么：

[http://developer.apple.com/library/ios/documentation/MapKit/Reference/MKMapViewDelegate_Protocol/MKMapViewDelegate/MKMapViewDelegate.html#//apple_ref/occ/intfm/MKMapViewDelegate/mapView:didSelectAnnotationView](http://developer.apple.com/library/ios/documentation/MapKit/Reference/MKMapViewDelegate_Protocol/MKMapViewDelegate/MKMapViewDelegate.html#//apple_ref/occ/intfm/MKMapViewDelegate/mapView:didSelectAnnotationView)：

当然，除非您指的是被窃听的配件。那将是-mapView：annotationView：calloutAccessoryTapped：

[http://developer.apple.com/library/ios/documentation/MapKit/Reference/MKMapViewDelegate_Protocol/MKMapViewDelegate/MKMapViewDelegate.html#//apple_ref/occ/intfm/MKMapViewDelegate/mapView:annotationView:calloutAccessoryControlTapped](http://developer.apple.com/library/ios/documentation/MapKit/Reference/MKMapViewDelegate_Protocol/MKMapViewDelegate/MKMapViewDelegate.html#//apple_ref/occ/intfm/MKMapViewDelegate/mapView:annotationView:calloutAccessoryControlTapped)：

# air - 通过 ANE 访问 StageWebView

> ID：13143550
> 
> 赞同：2
> 
> 时间：2012-10-30T16:31:32.333
> 
> 标签：air, air-native-extension, stagewebview

我想编写一个可以访问[StageWebView](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/media/StageWebView.html)的本机部分（iOS 的[UIWebView](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIWebView_Class/Reference/Reference.html) /Android 的[WebView](http://developer.android.com/reference/android/webkit/WebView.html)）的 ANE。这样我就可以调用 StageWebView 不提供的本机 webview 方法（例如，访问 cookie）。

我想这是可能的，但我不知道如何开始。

# asp.net - 无法在 Visual Studio 网站中找到对程序集的引用

> ID：13143552
> 
> 赞同：2
> 
> 时间：2012-10-30T16:31:41.280
> 
> 标签：asp.net, reference

我有一个遗留网站项目（与 Web 应用程序项目相反）。它使用的是 .net 3.5，但我将其更新为 4.0。

由于编译错误...

```
 Compiler Error Message: CS1705: Assembly 'System.Web.Mvc, Version=4.0.0.0, 
    Culture=neutral, PublicKeyToken=31bf3856ad364e35' uses 'System.Web.WebPages, 
    Version=2.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35' which has 
    a higher version than referenced assembly 'System.Web.WebPages, 
    Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35' 
```

...我添加了对 System.Web.WebPages 较新版本的引用。这将以下行添加到 web.config 文件中：

```
 <add assembly="System.Web.WebPages, Version=2.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/> 
```

但是，当我尝试构建网站时，出现此错误：

```
 The type 'System.Web.WebPages.WebPage' exists in both 
    c:\Windows\Microsoft.NET\assembly\GAC_MSIL\System.Web.WebPages\v4.0_2.0.0.0__31bf3856ad364e35\System.Web.WebPages.dll' 
    and 'c:\Windows\Microsoft.NET\assembly\GAC_MSIL\System.Web.WebPages\v4.0_1.0.0.0__31bf3856ad364e35\System.Web.WebPages.dll' 
```

我似乎在项目中的任何地方都找不到对 v4.0 1 版网页的引用。我认为这意味着其他一些程序集可能正在引用它，但我不确定从这里去哪里。

知道如何追踪引用程序集的内容并删除引用或更新调用程序集吗？

# windows-phone-7 - 使用 Rx 在 Windows Phone 7 应用程序中递归调用 IObservable

> ID：13143553
> 
> 赞同：1
> 
> 时间：2012-10-30T16:31:45.597
> 
> 标签：windows-phone-7, reactive-programming

我们有一个 Windows Phone 7 应用程序，它使用一组 3 种使用 Reactive Extensions 的服务方法，定义如下：

```
public static class ServiceClient
{
    public static IObservable<string> LookupImage(byte[] image) {...}

    public static IObservable<XDocument> GetDefinition(string id) {...}

    public static IObservable<Dictionary<string, byte[]>> GetFiles(string id, string[] fileNames) {...}                
} 
```

我们需要 WP7 应用程序在上述客户端中不断调用`LookupImage`（每次使用不同的`byte[] image`数据集），直到返回`IObservable<string>`非空。获得`Observable`字符串后，我们必须调用`GetDefinition`和`GetFiles`方法（按此顺序）。

调用`LookupImage`应该在服务响应返回时发生，而不是由计时器控制，因为它会根据网络连接速度而变化，我们需要能够发送尽可能多的这些。

对于上述问题的解决方案，我将不胜感激。作为开始，我有以下内容

```
private void RunLookupAndRenderLogic()
{   
   byte[] imageBytes = GetImageBytes();

   // There are some cases where the image was not 'interesting' enough in which case GetImageBytes() returns null
   if (pictureBytes != null)
   {
      // Where we have image data, send this to LookupImage service method
      var markerLookup = ServiceClient.LookupImage(imageBytes);

      markerLookup.Subscribe(id =>      
        {
                       // If the id is empty, we need to call this again.
                       if (String.IsNullOrEmpty(id))
                       {
                            ???
                       }

                       // If we have an id, call GetDefinition and GetFiles methods of the service. No further calls to LookupImage should take place.
                       RenderLogic(id);   
     });
  }
  else
   // If no interesting image was returned, try again
   RunRecognitionAndRenderLogic();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T15:31:03.730

抱歉，如果我弄错了，但如果我理解正确，您想用完全相同的参数重试对 LookupImage 的调用，直到它返回一个值？

解决这个问题的一种天真的方法是简单地调用 repeat 然后 take(1)：

```
ServiceClient.LookupImage(imageBytes)
    .Repeat()
    .Take(1)
    .Subscribe(id =>  ....); 
```

然而，[由于默认情况下 Rx 是单线程的](http://introtorx.com/Content/v1.0.10621.0/15_SchedulingAndThreading.html#RxIsSingleThreadedByDefault)，因此在此上下文中没有任何意义允许我们注入我们的处置调用（隐含来自 Take(1)-->OnComplete()-->订阅的自动处置）。

您可以通过使用 CurrentThread 调度程序在后续重新订阅之间提供一些喘息空间来避免这种情况。

```
Observable.Defer(()=>
    ServiceClient.LookupImage(imageBytes)
                 .ObserveOn(Scheduler.CurrentThread)
    )
    .Repeat()
    .Take(1)
    .Subscribe(id =>  ....); 
```

通过对 Rx 有一定的了解和一些创造力，还有其他方法可以实现这一点。（大多数我会想象一个调度程序）

为了给您一些启发，请查看[调度和线程一章](http://introtorx.com/Content/v1.0.10621.0/15_SchedulingAndThreading.html)。它涵盖了递归和构建您自己的迭代器，这实际上是您正在尝试做的事情。

完整代码示例：

```
private void RunLookupAndRenderLogic()
{   
    byte[] imageBytes = GetImageBytes();

    // There are some cases where the image was not 'interesting' enough in which case GetImageBytes() returns null
    if (pictureBytes != null)
    {
        // Where we have image data, send this to LookupImage service method
        var subscription = Observable
        .Defer(()=>
            ServiceClient.LookupImage(imageBytes)
                     .ObserveOn(Scheduler.CurrentThread)
        )
        .Where(id=>!String.IsNullOrEmpty(id))
        .Repeat()
        .Take(1)
        .Subscribe(id =>      
        {
           // If we have an id, call GetDefinition and GetFiles methods of the service. No further calls to LookupImage should take place.
           RenderLogic(id);   
        });

        //TODO: You dont offer any way to cancel this (dispose of the suscription). 
        //This means you could loop forever :-(
    }
    else
    {
        // If no interesting image was returned, try again
        RunRecognitionAndRenderLogic();
    }
} 
```

（披露：我是 IntroToRx.com 的作者）

# javascript - 为什么要检查 Array.prototype.indexOf 的布尔值？

> ID：13143555
> 
> 赞同：0
> 
> 时间：2012-10-30T16:31:48.483
> 
> 标签：javascript, fabricjs

在 Fabric.js 中，您会看到很多地方将代码块包含在格式的条件检查中：

`if (!Array.prototype.indexOf) {}`或者

`if (!Array.prototype.forEach) {}`等等

结果不总是假的吗？为什么要检查方法的布尔值？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T16:32:43.153

它正在检查该方法是否存在。如果它不存在，它会存在`undefined`，所以它会做`!undefined`，导致`true`.

如果代码不存在，我会假设代码正在引入垫片。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-30T16:32:52.537

当未定义函数时，这些测试通过。

旧浏览器没有这些功能。这就是为什么他们正在测试他们的存在。

[MDN 给出了](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/indexOf)该测试的相同示例（经典），用于定义 array.indexOf 的替换函数（适用于版本 9 之前的 IE）：

```
if (!Array.prototype.indexOf) {
    Array.prototype.indexOf = function (searchElement /*, fromIndex */ ) {
        "use strict";
        if (this == null) {
            throw new TypeError();
        }
        var t = Object(this);
        var len = t.length >>> 0;
        if (len === 0) {
            return -1;
        }
        var n = 0;
        if (arguments.length > 1) {
            n = Number(arguments[1]);
            if (n != n) { // shortcut for verifying if it's NaN
                n = 0;
            } else if (n != 0 && n != Infinity && n != -Infinity) {
                n = (n > 0 || -1) * Math.floor(Math.abs(n));
            }
        }
        if (n >= len) {
            return -1;
        }
        var k = n >= 0 ? n : Math.max(len - Math.abs(n), 0);
        for (; k < len; k++) {
            if (k in t && t[k] === searchElement) {
                return k;
            }
        }
        return -1;
    }
} 
```

# c# - WebBrowser.Print() 的线程

> ID：13143556
> 
> 赞同：4
> 
> 时间：2012-10-30T16:31:48.903
> 
> 标签：c#, multithreading, printing, browser

我正在尝试创建生成 HTML 发票并将其发送打印的 GUI 程序。
我有这个工作。但是，现在我想介绍线程。

我有一个带有`BackgroundWorker`. 后台工作人员运行以下代码：

```
#region BackGroundWorker   
private void bg_htmlGeneration_DoWork(object sender, DoWorkEventArgs e)
{
   //SOME MORE CODE..

   foreach (XElement ele in Lib.GetInvoiceElement(inv, ico.Supplier))
   {
      PrintDocument(Lib.CreateHTMLFile());
   }
}
#endregion  

public void PrintDocument(string fileName)
{
    var th = new Thread(() =>
    {
        WebBrowser webBrowserForPrinting = new WebBrowser();
        webBrowserForPrinting.DocumentCompleted += new WebBrowserDocumentCompletedEventHandler(PrintDocumentHandler);
        webBrowserForPrinting.Url = new Uri(fileName);
        Application.Run();
    });
    th.SetApartmentState(ApartmentState.STA);
    th.Start();
}

public void PrintDocumentHandler(object sender, WebBrowserDocumentCompletedEventArgs e)
{
    ((WebBrowser)sender).Print();
    ((WebBrowser)sender).Dispose();
    Application.ExitThread();
} 
```

一切顺利。但是，该`WebBrowser`对象拒绝打印。没有错误（很明显），程序结束时没有任何内容发送到打印机。
当我拿走线程时，程序再次运行。

我对线程的了解很薄弱，而且我几乎是在自学——所以大概我误解了线程优先级是如何设置的。

这是它应该如何工作的：

1.  用户在主窗体上选择发票，选择打印。
2.  当用户继续使用程序时，后台线程会消失并打印它们。

任何想法，将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T10:45:08.633

您的代码的主要问题是`WebBrowser`使用错误。

[`WebBrowser`](http://msdn.microsoft.com/en-us/library/system.windows.forms.webbrowser.aspx)应该用于**交互式**网络浏览，在此期间用户在互联网上做一些事情。但在您的情况下，您使用 WebBrowser 只是在下载 html 后进行**打印。**这是错误的，原因有两个：

1.  您的代码创建了整个 Windows 窗体控件，甚至没有使用它的一半功能。
2.  您的代码尝试在后台线程中使用 WinForms 控件，这会导致意外行为。

[`BackgroundWorker`](http://msdn.microsoft.com/ru-ru/library/system.componentmodel.backgroundworker.aspx)应该用于的类

> 在后台执行耗时的操作（如下载和数据库事务）。

多得多：

> 您必须小心不要在事件处理程序**中操纵任何用户界面对象。**`DoWork`相反，通过`ProgressChanged`和`RunWorkerCompleted`事件与用户界面进行通信。

您的代码将在后台线程中失败，因为 WinForms 控件是一个`user-interface object`.

仅作记录，[WebBrowser.Print](http://msdn.microsoft.com/en-us/library/system.windows.forms.webbrowser.print.aspx)方法调用本机 Windows API，因此您不可能在后台运行。从反汇编代码：

```
this.AxIWebBrowser2.ExecWB(NativeMethods.OLECMDID.OLECMDID_PRINT, 
  NativeMethods.OLECMDEXECOPT.OLECMDEXECOPT_DONTPROMPTUSER, 
  ref obj, 
  IntPtr.Zero); 
```

* * *

因此，我对您的代码的建议是：

1.  `WebBrowser`在后台删除类的使用。[`HttpWebRequest`](http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.aspx)改为用于下载 Web 内容。
2.  选择其他方式打印下载的内容。选项是：
    *   [`PrintDocument`](http://msdn.microsoft.com/en-us/library/system.drawing.printing.printdocument.aspx)实施（示例在[这里](http://www.dreamincode.net/forums/topic/44330-printing-in-c#/)）。
    *   使用[MS Office 类](http://msdn.microsoft.com/en-us/library/microsoft.office.tools.word.document.aspx)打开和[打印](http://msdn.microsoft.com/en-us/library/microsoft.office.tools.word.document.printout.aspx)您的 html 文件（Print 方法的第一个参数是 a `Boolean Background`，我认为这可以帮助您）。据我所知，即使在 2010 年，这种方法也很有效。
    *   检查有关打印的其他问题（[这里是关于打印图像的讨论](https://stackoverflow.com/questions/4464261/how-to-print-files-stored-at-your-local-hard-drive-in-c)，但我认为这是同一件事）。

PS：在您所说的评论中，您可能需要`PDF`来自您的html。我通过 C# 通过两种方式做到了这一点：

*   使用[wkhtmltopdf进行批处理](http://code.google.com/p/wkhtmltopdf/)
*   使用[Microsoft Office 插件：Microsoft 另存为 PDF 或 XPS](http://www.microsoft.com/en-us/download/details.aspx?id=7)。
    此插件应安装在服务器上，之后您可以轻松使用 MS Office 类将输出保存为 PDF 格式。

* * *

这里有一些更新：

由于我们有一个[`async/await`](http://msdn.microsoft.com/en-us/library/vstudio/hh191443.aspx)和[TPL](http://msdn.microsoft.com/en-us/library/dd997423.aspx)选项用于耗时的操作，我不建议您再使用[`BackgroundWorker`](http://msdn.microsoft.com/ru-ru/library/system.componentmodel.backgroundworker.aspx)该类。

# php - 如何使 PHP MVC 中的所有人都可以访问 User 类？

> ID：13143558
> 
> 赞同：-1
> 
> 时间：2012-10-30T16:31:50.687
> 
> 标签：php, oop, model-view-controller

我正在开发一个 PHP MVC，但努力处理设计的某些方面，让所有东西都可以轻松访问用户信息，这真的让我很困惑。

我确实有 User 作为一个抽象类，所以你可以使用`User::getUserId()`，但我不确定这是正确的方法吗？

我现在已将其更改为以下内容，但它不起作用。

**问题**

假设我有一个基本控制器，我想在每次运行时实例化 User 类：

**控制器**

```
class controller{

    public $user;

    function __construct(){

        $this->user = new User();
        $user->sessionRefresh();
        $user->getUserId();

    }
} 
```

然后我有一个实例化的用户模型类：

**用户模型类**

```
class User{

    var $userId;

    function sessionRefresh(){

        if (isset($_SESSION['userId']) && $_SESSION['created'] + 15 * 60 < time())                  
            session_regenerate_id();
    }

    function getUserId(){

        $this->userId = $_SESSION['userId'];
    }
} 
```

然后我有更多扩展默认控制器的控制器：

**论坛控制器**- 非常基本，只是为了演示我正在尝试的内容

```
class forumcontroller extends controller{

    function __construct(){

        require 'templates/forum.php';
    }

} 
```

**论坛模板**- 非常基本的示例

```
<html>
<title>Forum</title>
<body>
    <div>Welcome User: <?=$user->userId;?></div>
</body>
</html> 
```

我在做什么完全错了吗？

我最近才尝试在 PHP 中从程序性飞跃到 mvc/oop，显然它仍然让我感到困惑。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T16:40:01.137

1.  使用`$this->user->userId;`代替`$user->userId;`

2.  你必须回声....`<? echo $user->userId; ?>`

3.  在有人帮助时停止编辑您的代码

4.  感谢投反对票

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T16:56:05.663

是的，就 MVC 设计模式而言，您所做的完全错误。部分原因在于 MVC 是一种高级模式。在您充分了解 OOP 之前，您甚至不应该尝试使用它。

所以..您的代码存在问题。

*   当您使用`include`or`require`时，您“嵌入”的文件在使用它的范围内。阅读[变量范围](http://php.net/manual/en/language.variables.scope.php)和[模板](http://codeangel.org/articles/simple-php-template-engine.html)

*   模型不是类或对象。它是一个层，其中包含不同类型结构的多个结构。[这](https://stackoverflow.com/a/5864000/727208)应该涵盖简短的版本。

*   与实例的交互`User`将是领域业务逻辑的一部分，这是模型层的职责。这些都不应该在表示层（主要由视图、控制器和模板组成）中。

*   视图不是模板。在 MVC 设计模式中，视图是负责大多数用户界面逻辑的结构。决定应该返回什么样的响应（包括由多个模板、一些 XML 或 JSON 文件组成的 HTML，可能只是一个 HTTP 标头）。

*   该`var`语句在 PHP4 中用于定义类变量。在 PHP5 中，我们有`public`,`private`和`protected`.

*   一般来说，你不应该在类中有公共变量。打破封装。

*   类构造函数不应执行计算。它使代码难以测试。

## 更新

底线是：**远离 MVC* 至少 3 个月。在充分利用和理解 MVC 设计模式之前，您需要了解更多关于 OOP 的知识。

[我会推荐这篇文章](https://stackoverflow.com/a/9855170/727208)底部的材料清单。从前两本书开始，然后观看讲座，然后是 PoEAA（列表中的最后一本）书。

# javascript - 文字脚本中的 php - .tpl

> ID：13143561
> 
> 赞同：0
> 
> 时间：2012-10-30T16:31:54.833
> 
> 标签：javascript, smarty, json

我怎样才能`json_encode`在文字 javascript 块中创建一个内部？基本上这是聪明的模板。

```
 {literal}
    <script>
        function openWin() {
            var O = {php} echo json_encode($obj);{/php}; // syntax error         
            alert(O);
        }
    </script>
 {/literal} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T16:39:16.097

自从我不得不摆弄 Smarty 模板以来已经有一段时间了，但我认为您必须关闭文字标签才能运行您的 php 代码。如果您遇到错误，请尝试删除它`echo`- 我不记得它是否在 smarty 标签内时是隐式的。

```
{literal}
  <script>
    function openWin() {
      var O = {/literal}{php}echo json_encode($obj);{/php}{literal};       
      alert(O);
    }
  </script>
{/literal} 
```

附录：

用于回显变量的 Smarty 语法也可以容纳“过滤器”（即函数）

```
{$obj|json_encode} 
```

# c# - 仅删除 c# 上的一些 html 标签

> ID：13143563
> 
> 赞同：4
> 
> 时间：2012-10-30T16:32:03.127
> 
> 标签：c#, html

我有一个字符串：

```
string hmtl = "<DIV><B> xpto </B></DIV> 
```

并且需要去掉 和 的 `<div>`标签`</DIV>`。结果：`<B> xpto </B>`

* * *

只是`<DIV> and </DIV>`没有去掉很多html标签，而是保存了`<B> xpto </B>`.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-30T16:35:53.023

使用[htmlagilitypack](http://html-agility-pack.net/?z=codeplex)

```
HtmlDocument doc = new HtmlDocument();
doc.LoadHtml("<html>yourHtml</html>");

foreach(var item in doc.DocumentNode.SelectNodes("//div"))// "//div" is a xpath which means select div nodes that are anywhere in the html
{
 item.InnerHtml;//your div content
} 
```

如果你只想要B标签..

```
foreach(var item in doc.DocumentNode.SelectNodes("//B"))
    {
     item.OuterHtml;//your B tag and its content
    } 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-30T16:42:07.573

如果您只是删除 div 标签，这将获取`div`标签以及它们可能具有的任何属性。

```
var html = 
  "<DIV><B> xpto <div text='abc'/></B></DIV><b>Other text <div>test</div>" 

var pattern = "@"(\</?DIV(.*?)/?\>)"";  

// Replace any match with nothing/empty string
Regex.Replace(html, pattern, string.Empty, RegexOptions.IgnoreCase); 
```

**结果**

```
<B> xpto </B><b>Other text test 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-30T16:51:18.893

使用`Regex`：

```
var result = Regex.Replace(html, @"</?DIV>", ""); 
```

**更新**

正如您所[提到](https://stackoverflow.com/questions/13143563/remove-only-some-html-tags-on-c-sharp#comment17878191_13143563)的，通过这段代码，正则表达式删除了所有其他标签`B`

```
var hmtl = "<DIV><B> xpto </B></DIV>";
var remainTag = "B";
var pattern = String.Format("(</?(?!{0})[^<>]*(?<!{0})>)", remainTag );
var result =  Regex.Replace(hmtl , pattern, ""); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-04-13T13:08:29.093

你可以使用常规

```
<[(/body|html)\s]*> 
```

在 C# 中：

```
 var result = Regex.Replace(html, @"<[(/body|html)\s]*>", "");

<html>
<body>
< / html> 
< / body> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-30T16:35:39.647

```
html = Regex.Replace(html,@"<*DIV>", String.Empty); 
```

# java - 试图在 Jframe（形成汽车）上为线/圆的 ArrayList 设置动画，但我似乎无法擦除绘制的旧线

> ID：13143564
> 
> 赞同：3
> 
> 时间：2012-10-30T16:32:06.480
> 
> 标签：java, swing, graphics2d, jcomponent

![在此处输入图像描述](../Images/fa3672d09288221797c6f3cc1df5e921.png)

正如您从图像中看到的，我需要删除旧行，但我不确定如何。被困在这几天了。我很确定问题是我错误地移动了线条和圆圈（分别使用 setLine 和 setFrame），因为我用矩形替换了汽车并使用了 translate() 并且它工作正常。下面是一些复制它的最小代码。非常感谢您的帮助。（第1部分是组件，第2部分是汽车类，主程序只是设置了一个Jframe和第1部分组件）。

```
import java.awt.*;
import javax.swing.JComponent;
import java.util.*;
import javax.swing.JFrame;
import java.awt.event.*;
import javax.swing.Timer;
public class VehicleComponent extends JComponent
{
   //Car class which is an arraylist of line segments and a couple circles
 Car car;
 // The constructor initializes the car to the location 300, 300 on a Jframe
     public VehicleComponent()
  {
     car = new Car(300, 300);
      drive();
  }

//to be painted on a jframe
public void paintComponent(Graphics g)
{
    Graphics2D g2 = (Graphics2D) g;
        car.draw(g2);

}

//this function will be called in timer triggered actionListener. will move the car forward by certain pixels per given seconds
public void drive()
{
        car.move();
        repaint();

}
}        

public class Car extends Vehicle
{

ArrayList<Line2D.Double> detailLines;
ArrayList<Ellipse2D.Double> tires;
private int height;
private int length;
private int velocity;

public Car(int xStartingPosition, int yStartingPosition)
{
    super(xStartingPosition, yStartingPosition);
    detailLines = new ArrayList<Line2D.Double>();
    tires = new ArrayList<Ellipse2D.Double>();
    setVelocity();
    height = 5;
    length = 14;

}
/** draws the car */
public void draw(Graphics2D g2){
    BasicStroke tireStroke = new BasicStroke(3);
    BasicStroke vehicleStroke = new BasicStroke(2);
    initializeLines();
    initializeTires();

    g2.setStroke(vehicleStroke);
    for (Line2D.Double e : detailLines){
                g2.draw(e);
    }
    g2.setStroke(tireStroke);
    for (Ellipse2D.Double e: tires){
        g2.draw(e);
    }
}

private void initializeLines()
{
    detailLines.add(new Line2D.Double((getX()-10), (getY()+10), (getX()+50), (getY()+10)));//hood
    detailLines.add(new Line2D.Double((getX() + 60), getY(), (getX()+50), (getY()+10)));//hoodtwo
    detailLines.add(new Line2D.Double((getX()+50), (getY()+10), (getX()+70), (getY()+30)));//Passengerwindshield
    detailLines.add(new Line2D.Double((getX()+70), (getY()+30), (getX() + 80), (getY() + 20)));//hood three
    detailLines.add(new Line2D.Double((getX() + 70), (getY() + 30), (getX()+100), (getY()+30)));//front
    detailLines.add(new Line2D.Double((getX()+100), (getY()+30), (getX()+100), (getY()+40)));//front two
    detailLines.add(new Line2D.Double((getX()+100), (getY()+30), (getX() + 110), (getY() + 20)));//sideLine horizontal
    detailLines.add(new Line2D.Double((getX() + 60), (getY()+20), (getX()-20), (getY() + 20)));//windowsperator
    detailLines.add(new Line2D.Double((getX()+30), (getY()+10), (getX() +30), (getY() +20)));//striketrhough
    detailLines.add(new Line2D.Double((getX()), (getY()), (getX() +60), (getY())));//roof
    detailLines.add(new Line2D.Double((getX()+60), (getY()), (getX() +80), (getY() +20)));//border top
    detailLines.add(new Line2D.Double((getX()+80), (getY()+20), (getX() +110), (getY() +20)));//border 3
    detailLines.add(new Line2D.Double((getX()+110), (getY()+20), (getX() +110), (getY() +30)));//border4
    detailLines.add(new Line2D.Double((getX()+110), (getY()+30), (getX() +100), (getY() +40)));//border5
    detailLines.add(new Line2D.Double((getX()+100), (getY()+40), (getX() - 30), (getY() +40)));//border6
    detailLines.add(new Line2D.Double((getX()-30), (getY()+40), (getX() - 30), (getY() +30)));//border7
    detailLines.add(new Line2D.Double((getX()-30), (getY()+30), (getX()), (getY())));//border8

}
private void initializeTires()
{
    tires.add(new Ellipse2D.Double((getX()-10), getY()+30, 20, 20));
    tires.add(new Ellipse2D.Double((getX()+65), getY()+30, 20, 20));
}

public void move()
{

    for(Line2D.Double e : detailLines){
        e.setLine((e.getX1()+velocity), (e.getY1()), (e.getX2()+velocity), (e.getY2()));

    }
    for(Ellipse2D.Double e : tires)
    {
        e.setFrame((e.getX()+velocity), (e.getY()), e.getWidth(), e.getHeight());
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T23:32:40.267

```
public void paintComponent(Graphics g)
{
    // Very important, paint the component BG etc.
    super.paintComponent(g);
    Graphics2D g2 = (Graphics2D) g;
    // ... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-30T16:39:02.770

原因是每次绘制时都需要通过调用清除绘图表面`clearRect`：

```
g2.clearRect(0, 0, getWidth(), getHeight() ); 
```

尽管`Line2D`对象在对 的调用之间保持`draw`不变，但它们实际上并没有从缓冲区中取消绘制它们自己——它们只是记住它们的状态，以备下次您要绘制它们时使用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-30T16:38:36.377

这是 的常见行为`JComponent`。在您的情况下，以下应该有效：

```
Graphics.clearRect(0,0, getWidth(),getHeight()); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-30T16:36:56.970

在绘制下一帧之前，使用 g2.fillRect() 擦除面板的内容。

# jquery-ui-tabs - 在带有外部链接的 jQuery 选项卡面板中打开 jQuery 手风琴面板

> ID：13143566
> 
> 赞同：1
> 
> 时间：2012-10-30T16:32:10.403
> 
> 标签：jquery-ui-tabs, jquery-ui-accordion

在[http://www.beautycenterelysee.be/behandeling-acne-microdermabrasie#tabs-5](http://www.beautycenterelysee.be/behandeling-acne-microdermabrasie#tabs-5)我在*jQuery tab-panel*中使用 jQuery 手风琴。我的客户希望在页面加载时打开第二个面板，并在另一个页面上提供链接。这可能吗？

# javascript - ASP.NET 检测是否禁用 Javascript 字段

> ID：13143570
> 
> 赞同：1
> 
> 时间：2012-10-30T16:32:21.743
> 
> 标签：javascript, asp.net

我希望有一个答案...

**设置：** 相当复杂的 ASP.NET 应用程序进行大量用户交互，其中一些要求 Javascript 在单击其他字段时禁用某些字段（必须在 Javascript 中进行，b/c ASP.NET 中的回发问题使其不可能，所以必须在客户端）。

该代码在 Javascript 执行经典 document.getElementById(currObj).disabled = true; 的地方都很好。

**问题：** 当我准备好提交页面时，如何让 ASP.NET (C#) 通知客户端是否禁用了字段（文本框或单选框），因此它不会在表单中提交该字段？这甚至可能吗？

非常感谢提前！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T19:45:32.250

ASP.NET 知道某个控件已被禁用的唯一方法是它是否从 .NET 中被禁用并且该`Enabled = false`属性已写入 ViewState。当您在客户端禁用字段时，情况并非如此，因此 ASP.NET 将保留默认`Enabled`值。

正如之前的评论者所提到的，禁用字段的值将完全排除在回发时发送到服务器的 POST 正文中。在页面上的基本情况下`TextBox`，这意味着该`Text`属性将恢复为`String.Empty`. 为了区分启用字段中的空字符串和实际禁用字段，我认为您需要直接查看`Request.Form`对象以查看键是否存在。例如，如果我在空白页上有一个`TextBox`名字，那将是一个禁用的字段。对于启用的字段，它将是该字段包含的任何字符串值，包括它是否为空白。当然，如果控件位于与`myTextBox``Request.Form["myTextBox"]``null``String.Empty``ContentPlaceholder``name`HTML 中实际字段的属性，您需要使用完整的 HTML `name`。

例如：

```
bool fieldIsEnabled = Request.Form["myTextBox"] == null; 
```

它并不优雅，但它应该可以完成工作（不包括复选框，`null`如果未选中该框也是如此）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T16:43:08.633

任何禁用的字段都不会提交，但正常甚至隐藏的字段都会提交。这就是禁用字段的工作方式。

```
<input type="text" name="Test_1" value="off" disabled="disabled" />
<input type="text" name="Test_2" value="on" />
<input type="hidden" name="Hidden_1" value="hide_off" disabled="disabled" />
<input type="hidden" name="Hidden_2" value="hide" /> 
```

仅在示例中`Test_2`，并且`Hidden_2`将提交，因为其他人被禁用。

你可以在这个 jsfiddle 中看到它：http: [//jsfiddle.net/bJ7Rq](http://jsfiddle.net/bJ7Rq)

# c++ - C 正则表达式 VS C++11 正则表达式中的不同行为

> ID：13143576
> 
> 赞同：3
> 
> 时间：2012-10-30T16:32:37.693
> 
> 标签：c++, regex, c++11

我需要一个将数学符号排列拆分为其元素的代码，让我们假设这个排列：

![排列](../Images/ee88996fafeadc9774f168a5ab15dfe5.png)

排列字符串将是：

> "(1,2,5)(3,4)" 或 "(3,4)(1,2,5)" 或 "(3,4)(5,1,2)"

我试过的模式是这样的：

*   `([0-9]+[ ]*,[ ]*)*[0-9]+`对于每个置换循环。这会将字符串分成`"(1,2,5)(3,4)"`两个字符串`"1,2,5"`和`"3,4"`.
*   `([0-9]+)`对于循环中的每个元素。这会将每个周期分成单独的数字。

当我在[此页面](http://regexpal.com/)中尝试过这种模式时，它们运行良好。而且，我已经将它们与 C++11 正则表达式库一起使用，效果很好：

```
#include <iostream>
#include <string>

#include <regex>

void elements(const std::string &input)
{
    const std::regex ElementRegEx("[0-9]+");

    for (std::sregex_iterator Element(input.begin(), input.end(), ElementRegEx); Element != std::sregex_iterator(); ++Element)
    {
        const std::string CurrentElement(*Element->begin());
        std::cout << '\t' << CurrentElement << '\n';
    }
}

void cycles(const std::string &input)
{
    const std::regex CycleRegEx("([0-9]+[ ]*,[ ]*)*[0-9]+");

    for (std::sregex_iterator Cycle(input.begin(), input.end(), CycleRegEx); Cycle != std::sregex_iterator(); ++Cycle)
    {
        const std::string CurrentCycle(*Cycle->begin());
        std::cout << CurrentCycle << '\n';

        elements(CurrentCycle);
    }
}

int main(int argc, char **argv)
{
    std::string input("(1,2,5)(3,4)");

    std::cout << "input: " << input << "\n\n";

    cycles(input);
    return 0;
} 
```

使用 Visual Studio 2010 (10.0) 编译的输出：

```
input: (1,2,5)(3,4)

1,2,5
    1
    2
    5
3,4
    3
    4 
```

但不幸的是，我无法在我的项目中使用 C++11 工具，该项目将在 Linux 平台下运行，并且必须使用 gcc 4.2.3 编译；所以我*不得不*在`regex.h`标题中使用 C 正则表达式库。因此，使用**相同的模式**但使用不同的库，我会得到不同的结果：

[这是](http://ideone.com/L8ktOb)测试代码：

```
void elements(const std::string &input)
{
    regex_t ElementRegEx;
    regcomp(&ElementRegEx, "([0-9]+)", REG_EXTENDED);

    regmatch_t ElementMatches[MAX_MATCHES];
    if (!regexec(&ElementRegEx, input.c_str(), MAX_MATCHES, ElementMatches, 0))
    {
        int Element = 0;

        while ((ElementMatches[Element].rm_so != -1) && (ElementMatches[Element].rm_eo != -1))
        {
            regmatch_t &ElementMatch = ElementMatches[Element];
            std::stringstream CurrentElement(input.substr(ElementMatch.rm_so, ElementMatch.rm_eo - ElementMatch.rm_so));
            std::cout << '\t' << CurrentElement << '\n';

            ++Element;
        }
    }

    regfree(&ElementRegEx);
}

void cycles(const std::string &input)
{
    regex_t CycleRegEx;
    regcomp(&CycleRegEx, "([0-9]+[ ]*,[ ]*)*[0-9]+", REG_EXTENDED);

    regmatch_t CycleMatches[MAX_MATCHES];
    if (!regexec(&CycleRegEx, input.c_str(), MAX_MATCHES, CycleMatches, 0))
    {
        int Cycle = 0;

        while ((CycleMatches[Cycle].rm_so != -1) && (CycleMatches[Cycle].rm_eo != -1))
        {
            regmatch_t &CycleMatch = CycleMatches[Cycle];
            const std::string CurrentCycle(input.substr(CycleMatch.rm_so, CycleMatch.rm_eo - CycleMatch.rm_so));
            std::cout << CurrentCycle << '\n';

            elements(CurrentCycle);
            ++Cycle;
        }
    }

    regfree(&CycleRegEx);
}

int main(int argc, char **argv)
{
    cycles("(1,2,5)(3,4)")
    return 0;
} 
```

预期输出与使用 C++11 正则表达式相同，但实际输出为：

```
input: (1,2,5)(3,4)

1,2,5
    1
    1
2,
    2
    2 
```

最后，问题是：

*   有人可以提示我在哪里误解了 C 正则表达式引擎吗？
*   为什么 C 正则表达式与 C++ 正则表达式的行为不同？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T10:11:52.620

您误解了`regexec`. `pmatch`缓冲区（之后`pmatch[0]`）填充了正则表达式的*子匹配*项，而不是字符串中的连续匹配项。

例如，如果您的正则表达式`[a-z]([+ ])([0-9])`与 匹配`x+5`，`pmatch[0]`则将引用`x+5`（整个匹配项），`pmatch[1]`并且`pmatch[2]`将分别引用`+`and `5`。

您需要`regexec`从上一场比赛的结尾开始重复循环：

```
int start = 0;
while (!regexec(&ElementRegEx, input.c_str() + start, MAX_MATCHES, ElementMatches, 0))
{
    regmatch_t &ElementMatch = ElementMatches[0];
    std::string CurrentElement(input.substr(start + ElementMatch.rm_so, ElementMatch.rm_eo - ElementMatch.rm_so));
    std::cout << '\t' << CurrentElement << '\n';
    start += ElementMatch.rm_eo;
} 
```

# dbf - Foxpo 中的 DBF 表在重新索引时可能会损坏？（没有中断或崩溃）

> ID：13143583
> 
> 赞同：4
> 
> 时间：2012-10-30T16:32:59.610
> 
> 标签：dbf, visual-foxpro

我们有一个在服务器中共享的 Foxpro exe 应用程序，大约有 20 个用户运行它。一位同事告诉我，如果需要重新索引这些 dbf 表，他应该告诉所有人离开 exe 应用程序。如果重新索引进程启动并且某些用户仍在运行该应用程序，则 dbf 表将被损坏。

这让我很感兴趣。那可能吗？一直认为，在重新索引 Foxprox DBF 表时，进程本身以独占模式打开表，如果表已经以共享模式打开，它对该表没有任何作用。与 PAK 类似。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-31T01:46:46.830

虽然我同意 FoxPro 表可能会损坏，但从您描述的情况来看这是不可能的。要重新索引，您必须独占使用该表。您要么获得文件锁定，要么没有：

1.  如果有人在应用程序中并且打开了一个表，那么您的重新索引例程将失败或无法重新索引打开的文件。如果重新索引表的编程在尝试锁定已经打开的表时处理错误，那么您关于“对该表不做任何事情”的想法是正确的。
2.  如果您的重新索引例程正在运行并且有人恰好在应用程序中或试图运行应用程序，他们很可能会出错和/或使应用程序崩溃，因为他们将无法打开表（在共享模式下）。

[下面列出了最可能导致表损坏的罪魁祸首](http://support.microsoft.com/kb/264867)。提到了文件锁定问题，但这与包含备注字段的表有关。这些表实际上包含 2 个文件（DBF [表] 和 FPT [备忘录]）。我已经运行了多年的应用程序，没有任何损坏。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-16T14:07:21.283

在损坏的备忘录文件上复制有效的备忘录文件以再次访问数据库。

注意：除非有效的备忘录文件是损坏文件的精确备份，否则原始备忘录字段信息将丢失。所有备忘字段备份文件的扩展名为 .TBK。

损坏的备忘录文件将具有 .FPT 扩展名，例如 OLD.FPT。在以下示例中，假设 NEW.FPT 是有效的备忘录文件。要绕过错误消息并再次访问数据库，请在 MS-DOS 命令提示符处键入以下命令：

复制 new.fpt old.fpt

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-01-20T02:03:31.153

另一种选择是关闭所有计算机，包括服务器。然后重新启动服务器（假设 DBF 文件在服务器上）并运行重新索引。

# iphone - 如何使用 NSPredicate 添加搜索栏

> ID：13143585
> 
> 赞同：0
> 
> 时间：2012-10-30T16:33:08.030
> 
> 标签：iphone, objective-c, ipad, searchbar

添加时出现错误

`-(void) statement`.

" `use of undeclared identifier "filterContentForSearchText`"

```
//start of Predicate
- (void)filterContentForSearchText:(NSString*)searchText scope:(NSString*)scope
{
    NSPredicate *resultPredicate = [NSPredicate
                                    predicateWithFormat:@"SELF contains[cd] %@",
                                    searchText];

    searchResults = [recipes filteredArrayUsingPredicate:resultPredicate];
} 
```

搜索结束

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T17:50:52.917

如果您的数组不包含此类数据，请查看此[示例](http://dl.dropbox.com/u/58723521/SearchSample.zip)，向我们展示您的数据或数组处理，您的数组中包含哪种类型的数据。`NSPredicate`

# javascript - “this”对象的奇怪值

> ID：13143587
> 
> 赞同：4
> 
> 时间：2012-10-30T16:33:15.590
> 
> 标签：javascript, function, this, ecmascript-5

关于这段代码：

```
var name = "Jaguar";
var car = {
  name:"Ferrari",
  getName:function(){
    return this.name;
  }
};

alert((car.getName = car.getName)()); 
```

输出是：`Jaguar`。

为什么`this`对象对应`Window`而不是`car`变量中包含的对象？

似乎将对象的函数重新分配给自身的事实会导致在调用`this`函数时失去对对象的分配......

我试图猜测：它是否存在一种机制（使用变量或其他）来关注对象函数的非重新分配，以便如果发生这种情况，这种机制将阻止`this`关键字的分配为通常（等于对象）？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-30T16:38:38.720

原因相当微妙：`this`在 JavaScript 中完全取决于*函数的调用方式*。要在调用`this`to 期间设置为，您必须在从对象中检索到它时立即调用，如下所示：`car``getName``getName``car`

```
car.getName() // or
car["getName"]() 
```

（或者通过[`Function#call`](http://ecma-international.org/ecma-262/5.1/#sec-15.3.4.4)or [`Function#apply`](http://ecma-international.org/ecma-262/5.1/#sec-15.3.4.3)，它可以让你`this`明确地指定值。）

您在示例中所做的实际上是这样的：

```
// Set f to the result of the assignment expression,
// which is a reference to the getName function
var f = (car.getName = car.getName);

// Call it (separately)
f(); 
```

...这是不同的。以这种方式调用的函数被`this`设置为全局对象（`window`浏览器中的 , ）。（在严格模式下除外；在严格模式下`this`将是`undefined`。）

更多（来自我贫血的博客）：

*   [*神话方法*](http://blog.niftysnippets.org/2008/03/mythical-methods.html)
*   [*你必须记住`this`*](http://blog.niftysnippets.org/2008/04/you-must-remember-this.html)

> 它是否存在一种机制（使用变量或其他）来关注对象函数的非重新分配，以便如果发生这种情况，这种机制会像往常一样阻止 this 关键字的分配（等于等于物体）？

我不完全确定我是否遵循这个问题，但是如果您想要一个始终具有预设`this`值的函数，那么是的，有几种方法可以做到这一点。

一种是使用新的 ES5 功能[`bind`](http://ecma-international.org/ecma-262/5.1/#sec-15.3.4.5)：

```
var name = "Jaguar";
var car = {
  name: "Ferrari"
};
car.getName = function(){
  return this.name;
}.bind(car);
alert((car.getName = car.getName)()); // "Ferrari" 
```

`bind`返回一个始终`this`设置为您给它的参数的函数。

另一种方法是使用闭包。事实上，你可以`bind`很容易地在 ES3 中创建一个 -like 函数：

```
function pseudoBind(func, thisArg) {
    return function() {
        return func.apply(thisArg, arguments);
    };
} 
```

这并不能做所有事情`bind`，但它确实起到了`this`作用。然后你会有：

```
var name = "Jaguar";
var car = {
  name: "Ferrari"
};
car.getName = pseudoBind(function(){
  return this.name;
}, car);
alert((car.getName = car.getName)()); // "Ferrari" 
```

更多关于闭包的信息（同样来自博客）：

*   [*闭包并不复杂*](http://blog.niftysnippets.org/2008/02/closures-are-not-complicated.html)

在未来的规范中，我们将获得一种创建具有预设`this`值的函数的声明方式（所谓的“[箭头函数](http://wiki.ecmascript.org/doku.php?id=harmony:arrow_function_syntax)”，因为它们的语法涉及使用`=>`而不是`function`关键字）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-30T16:43:41.267

啊，`this`决议......让我们看看。

```
var toy = {
    log : function () { console.log(this); }
};
toy.log() //logs the toy object 
```

到目前为止，分辨率似乎`this`是静态的：无论方法在哪里定义，这就是它的`this`价值。

但！如果我们这样做会怎样：

```
var sneakyBastard = toy.log;
sneakyBastard(); //logs Window 
```

`this`绑定到调用它的对象。在 的情况下`toy.log`，您`log`在对象的上下文中`toy`调用。但是，`sneakyBastard`没有设置上下文，所以就好像你调用了`window.sneakyBastard`.

现在让我们来看看你的表情（鹅？甘德？不......）：

```
(car.getName = car.getName)() 
```

...以及分配返回什么？分配的值，在这种情况下，是一个函数，`car.getName`。我们可以把这个表达式分成两部分：

```
var returnedValue = (car.getName = car.getName);
returnedValue(); 
```

...从这里很明显。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-30T16:37:35.743

不是`getName`从对象的上下文调用，而是从分组运算符的返回结果的上下文调用它*（在这种情况下没有上下文）*。

在 JavaScript 中，当没有定义明确的上下文时，使用默认值。默认是...

*   *严格模式下*的全局对象

**   `undefined`*不*处于*严格模式*时* 

 *** * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-30T16:35:45.800

你已经把你的函数调用括号（`()`）所以他们调用*表达式的结果* `(car.getName = car.getName)`（这是分配给的值（一个函数）`car.getName`）**

# c++ - 将 Boost MultiArray (2d) 转换为普通 2d 数组的最简单方法是什么？

> ID：13143588
> 
> 赞同：1
> 
> 时间：2012-10-30T16:33:20.723
> 
> 标签：c++, arrays, boost

除了预分配和遍历所有元素之外，是否有将 2D Boost MultiArray 转换为普通 2D 数组的最佳/最简单方法？

```
#include "boost/multi_array.hpp"
#include <cassert>

int main () 
{
  // Create 2D multi-array
  typedef boost::multi_array<double, 2> array_type;
  typedef array_type::index index;
  array_type A(boost::extents[3][4]);

  // Fill in some values ...
  double value = 1.0;
  for(index i = 0; i != 3; ++i) 
    for(index j = 0; j != 4; ++j)
        A[i][j] = value;

  // Convert to a double[3][4]  ...
  double **convert = ???

  return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T09:47:46.523

1) 请参阅文档 Boost MultiArray 关于成员函数 data()：

> 元素*数据（）；
> 常量元素*数据（）常量；
> 
> 这将返回一个指向包含数组数据的连续块的开头的指针。如果数组的所有维度都以 0 为索引并按升序存储，则相当于 origin()。请注意， const_multi_array_ref 仅提供此函数的 const 版本。

或者

2）您可以使用multi_array_ref：

> multi_array_ref 是一个多维容器适配器。它在任何连续的元素块上提供 MultiArray 接口。multi_array_ref 导出与 multi_array 相同的接口，但构造函数除外。

但无论如何 - 我认为将数据从 multi_array 复制到 C-array 是个坏主意。如果原因是遗留代码，请参阅 - [http://www.boost.org/doc/libs/1_51_0/libs/multi_array/doc/user.html#sec_storage](http://www.boost.org/doc/libs/1_51_0/libs/multi_array/doc/user.html#sec_storage)

# string - 使用 fscanf 从 .txt 文件中读取字符时遇到问题

> ID：13143589
> 
> 赞同：1
> 
> 时间：2012-10-30T16:33:31.800
> 
> 标签：string, scanf

我在使用 fscanf 读取文本文件的一部分时遇到问题。困难只发生在行尾之前的字符上。

我正在阅读的文本文件格式为：

38 59 26.21 N 76 56 24.20 W ...

我需要代码做的是读取值，将它们转换为弧度，然后确定是否需要调整符号（如果是“W”则需要为负数）。

```
 for ( int i = 0; i < 10; i ++) {

    // accepts one line of coordinates at a time from the text file
    fscanf_s(f, "%lf %lf %lf %s\n", &deg, &min, &sec, coordinate);

    printf("%s\n", coordinate);

    // converting into radians
    val = (deg*(pi/180)) + ((min/60) * (pi/180)) + ((sec/3600) * (pi/180));

    // checking coordinate to decide whether or not to change the sign
    if ((strcmp(coordinate, "S") == 0) || (strcmp(coordinate, "W") == 0))
    {
        val = val*-1;
    }

    // are dealing with
    if (EVEN(i)) 
    {
        lat[count1][0] = val;
        count1++;
    }
    else 
    {
        lon[count2][0] = val;
        count2++;
    }
} 
```

到目前为止，这段代码在读取文本文件中的浮点数并将它们转换为弧度方面工作得很好，但是由于某种原因它没有将字符存储在行尾。

我已经看遍了，无法弄清楚为什么会这样。

谢谢您的帮助！

# database - 计算某些值时报告中的总计？微软访问

> ID：13143591
> 
> 赞同：1
> 
> 时间：2012-10-30T16:33:38.403
> 
> 标签：database, vba, ms-access

我正在使用报告来显示转换库存后的浪费计算。

我试图让总数显示在底部，但是某些列由计算的字段组成（例如 sValue-Wastage）

对于这些我似乎无法使用的字段`=Sum(rValue)`，它的作用就像这是一个变量，当我输入它时由用户决定，它还在 rValue( `=Sum([rValue])`) 周围添加方括号。

我需要了解一些不同的方法来实现这一点吗？我试图得到：

```
=Sum(Wastage) 
```

浪费在哪里：

```
=[sValue]-[rValue] 
```

谢谢，鲍勃·P

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T16:49:38.073

您必须对两个计算字段求和。

```
=Sum([sValue]-[rValue]) 
```

从您的评论来看， rValue 似乎拥有一个域聚合函数。你可以试试：

```
=Sum([sValue]-DSum("sValue","[Stock Conversion Items]") 
```

如果应该包含所有 SCID，这将是可以的`[Stock Conversion Items]`，如果没有，您可以添加 WHERE 语句。如果关系对于 WHERE 语句来说过于复杂，请考虑将您的报告基于包含`[Stock Conversion Items]`.

这是一个古老的故事：http: [//support.microsoft.com/kb/208850](http://support.microsoft.com/kb/208850)

# c# - 双加结果被四舍五入

> ID：13143594
> 
> 赞同：0
> 
> 时间：2012-10-30T16:33:56.267
> 
> 标签：c#

我有一些行为奇怪的代码，似乎是对两个**双精度**值相加的结果进行四舍五入。这导致我的代码出现问题。

不幸的是，我无法解决这个问题，因为我的单元测试环境工作正常（不是四舍五入）而且我的应用程序不正常（四舍五入）。

在我的测试环境中：

```
a = -3.7468700408935547
b = 525218.0
c = b + a
c = 525214.25312995911 
```

在我的应用程序中：

```
a = -3.7468700408935547
b = 525218.0
c = b + a
c = 525214.25 
```

这可能是什么原因造成的？项目配置？（我正在使用视觉工作室，顺便说一句）

**编辑（来自评论）**
我正在使用 Visual Studio 调试器单步执行相同的代码，所以它是完全相同的一段代码。

我有更多代码，但我将问题缩小到那个特定的总和。

每个值的二进制表示是：

测试环境：

```
System.BitConverter.ToString(System.BitConverter.GetBytes(a))   "00-00-00-00-97-F9-0D-C0"   string
System.BitConverter.ToString(System.BitConverter.GetBytes(b))   "00-00-00-00-44-07-20-41"   string
System.BitConverter.ToString(System.BitConverter.GetBytes(c))   "00-40-9A-81-3C-07-20-41"   string 
```

内部应用：

```
System.BitConverter.ToString(System.BitConverter.GetBytes(a))   "00-00-00-00-97-F9-0D-C0"   string
System.BitConverter.ToString(System.BitConverter.GetBytes(b))   "00-00-00-00-44-07-20-41"   string
System.BitConverter.ToString(System.BitConverter.GetBytes(c))   "00-00-00-80-3C-07-20-41"   string 
```

**编辑2：**

正如[Alexei Levenkov](https://stackoverflow.com/questions/13143594/double-addition-result-being-rounded#comment17878348_13143594)指出的那样，这个问题是由更改 FPU 配置的库引起的。

[对于任何好奇这对我意味着什么的人：我能够通过对我的输入值做出一些假设并进行一些先发制人的值四舍五入，从而使我的计算保持一致，从而减轻了我的特定代码段的这个问题。]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T16:45:02.980

如果需要精确度（如财务计算所需），请使用小数。

**编辑** 见：

*   [每个计算机科学家都应该知道的关于浮点运算的知识](http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html)
*   [浮点编程的五个技巧](http://www.codeproject.com/Articles/29637/Five-Tips-for-Floating-Point-Programming)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T17:28:39.983

您的应用程序可能对 FPU 的配置做了一些奇怪的事情。即使用一些随机库进行数学重新配置精度......

Direct3d 可能是可疑的，请参见例如[Pow implementation for double](https://stackoverflow.com/questions/11524536/pow-implementation-for-double)。

# cxf - apache-cxf 客户端与 exec-maven-plugin 一起使用，但不能从外部使用

> ID：13143596
> 
> 赞同：1
> 
> 时间：2012-10-30T16:33:58.187
> 
> 标签：cxf, webservices-client, exec-maven-plugin

我在尝试在 java 中创建 WS 客户端时遇到问题。

我使用的库是**apache-cxf 2.12**。这是一个旧版本，但我希望将 Web 服务添加到已经运行并使用 Spring 2.5.6 的 JBoss 应用程序中，所以这个**org.apache.cxf**版本使用相同的 spring 版本。

但问题是（我知道很通用，与 maven、netbeans 和 apache-cxf 有关）

当我从 netbeans 执行我的客户项目（maven proyect）时，它工作得有点好。当我尝试使用脚本（bot windows an linux）运行此类时，它给了我这个错误：

**“调用失败，出现以下情况：org.apache.cxf.ws.policy.PolicyException：无法满足任何策略替代方案。”**

Java版本是一样的，我把所有的依赖jar复制到lib dir然后添加到%classpath%

那么，当我使用 maven **org.codehaus.mojo:exec-maven-plugin:1.2.1:exec**执行我的示例程序时，它可以工作，而当我使用 srcipt 运行它时它不会有什么不同？（我已经检查了所有依赖项，java 版本，...）

我猜它必须与 JAX-WS o JCE (Java Cryptography Architecture) 初始化有关。

¿ 有没有办法在运行 java.exe 时查看 %classpath maven 正在创建什么？

有效的 Maven 脚本：

```
JAVA_HOME=D:\\LOCAL\\Java\\jdk1.5.0_15 
D:\\LOCAL\\apache-maven-2.0.9\\bin\\mvn.bat 
-Dexec.classpathScope=runtime 
-DskipTests=true 
"-Dexec.args=-Djavax.net.debug=all -classpath %classpath es.webservice.aaTest TESTFILE" 
-Dexec.executable=D:\\LOCAL\\Java\\jdk1.5.0_15\\bin\\java.exe 
-Dmaven.repo.local=D:\\bsrepo\\.m2 process-classes 
org.codehaus.mojo:exec-maven-plugin:1.2:exec 
```

谢谢

# php - PHP 登录脚本 - 多少次登录

> ID：13143599
> 
> 赞同：1
> 
> 时间：2012-10-30T16:34:09.387
> 
> 标签：php, mysql, login

我有一个潜在客户的问题（因此，还没有代码）关于他们拥有的具有自定义登录脚本的网站。

基本上，他们有分析设置，但它不能达到他们需要的目的 - 能够判断用户登录了多少次以及他们登录的频率。

实现这一目标的最佳方法是什么？我猜我需要更改 PHP 登录脚本，但我对如何最好地做到这一点有点困惑。我可以在数据库中创建一个新字段来计算他们的登录次数，但我怀疑这不是一个好方法，而且我不确定如何从这种类型的系统中判断频率。

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T16:36:36.687

如果您存储每次尝试的时间，您可以运行报告以找出您需要的任何内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-30T16:36:47.523

每次用户登录时，您都可以将其登录到您的数据库或文件中。您可以轻松地包括用户名、日期时间、IP、用户代理（所有相关数据）等。如上所述，这将非常容易在用户、登录时间、登录位置等上建立个人资料

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-30T16:37:14.247

实现这一点的最佳方法是关系数据库。当用户登录时，会在表中创建一个条目。当您想了解用户登录的次数时，可以查询此表以计算适用于该用户的条目。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-30T16:37:16.233

您可以简单地创建一个新表来存储`user_id`和`timestamp`每次用户登录。使用该数据，您可以查看谁、多少次以及一天中的哪些时间间隔已登录。

# asp.net - 显示环绕图像的动态内容

> ID：13143602
> 
> 赞同：1
> 
> 时间：2012-10-30T16:34:19.550
> 
> 标签：asp.net, html, css

请建议我如何在 asp.net c# 中绑定内容。内容是动态的，将环绕图像。还有我如何显示

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T16:41:23.043

在您的标记中放置您的图像并使用文字控件

```
<asp:Image ID="Image1" runat="server" ImageUrl="Images/Sample.png" />
<asp:Literal ID="PlaceHolderLiteral" runat="server"></asp:Literal> 
```

在你的代码后面

```
 protected void Page_Load(object sender, EventArgs e)
    {
        if (!IsPostBack)
        {
            String DynamicText = "<p>Your dynamic text to be rendered.</p><p>Your next dynamic text to be rendered.</p>";
            DynamicText += "<p>Your additional dynamic text to be rendered.</p>";
            PlaceHolderLiteral.Text = DynamicText;
        }
    } 
```

# php - CSV 文件构建一个选择元素

> ID：13143608
> 
> 赞同：0
> 
> 时间：2012-10-30T16:34:47.043
> 
> 标签：php, html, csv

是否可以从 CSV 文件以 HTML 格式创建选择菜单？我不知道该怎么做。

所以我有一个包含两列和多个值的 CSV，有什么方法可以用 PHP 循环遍历 CSV 文件并输出 HTML，到目前为止我已经尝试过了。

```
$row = 1;
    if (($handle = fopen($_SERVER['DOCUMENT_ROOT']."/service/regions.csv", "r")) !== FALSE) {
        while (($data = fgetcsv($handle, 133, ",")) !== FALSE) {
            $num = count($data);
            $row++;
            for ($c=0; $c < $num; $c++) {
                echo "<option value='".$data[$c]."'>".$data[$c]."</option>";
            }
        }
        fclose($handle);
    } 
```

然而，这给出了以下输出，

```
 <select>
    <option value='AB'>AB</option>
    <option value='Aberdeenshire'>Aberdeenshire</option>
    <option value='AG'>AG</option>
    <option value='Angus'>Angus</option>
    <option value='AM'>AM</option>
    <option value='Armagh'>Armagh</option>
 </select> 
```

我想要的是得到这样的输出，

```
<option value="AB">Aberdeenshire</option> 
```

我哪里错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T16:37:50.540

`$data[$c][0]`将返回第一列，`$data[$c][1]`将返回第二列，依此类推。因此，只需`$data[$c]`为您的列替换正确的变量即可。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T16:51:05.617

所有你需要的是

```
$handle = fopen(__DIR__ . "/service/regions.csv", "r");
echo "<select>";
if ($handle !== FALSE) {
    $row = 0;
    while ( ($data = fgetcsv($handle, 133, ",")) !== FALSE ) {
        printf('<option value="%s">%s</option>', $data[0], $data[1]);
    }
    fclose($handle);
}
echo "</select>"; 
```

输出

```
<select>
    <option value="AB">Aberdeenshire</option>
    <option value="AG">Angus</option>
    <option value="AM">Armagh</option>
</select> 
```

# c - sendto() 在缓冲区已满时阻塞，如何解决？

> ID：13143612
> 
> 赞同：1
> 
> 时间：2012-10-30T16:34:54.313
> 
> 标签：c, sockets, udp, block, sendto

我想在 UDP 中为 4 个人创建一个聊天室。这是代码：

```
<code>
#include<stdio.h>
#include<sys/socket.h>
#include<sys/types.h>
#include<arpa/inet.h>
#include<unistd.h>
#define PORT 9999
#define SIZE 1024
int c;
int i=0;
int k=0;
char name[4][20];
char ip[4][16];
FILE * txt;
struct sockaddr_in seraddr,cliaddr[3],getcliaddr[3];

void gettxt()
{
    txt=fopen("ip.txt","r");
    for(k=0;k<4;k++)
    {
        c=fgetc(txt);
        while(c!=' ')
        {
            name[k][i]=(char)c;
            i++;
            c=fgetc(txt);
        }
        name[k][i]='\0';
        i=0;
        c=fgetc(txt);
        while(c<'1'||c>'3')
            c=fgetc(txt);
        while(c!='\n')
        {
            ip[k][i]=c;
            c=fgetc(txt);
            i++;
        }
        ip[k][i]='\0';
        i=0;
    }
    for(k=0;k<4;k++)
        printf("<%s>%s\n",name[k],ip[k]);
}

int compare(struct sockaddr_in whichcli)
{
    int w=1;
    for(w=1;w<4;w++)
    {
        if(whichcli.sin_addr.s_addr==cliaddr[w].sin_addr.s_addr)
            break;
    }
    return w;
}

int main()
{
    int com;//compare return value (just the "k")
    int qq;
    int ret;
    int ser;
    int maxsock;
    char bufrecv[SIZE];
    char bufsend[SIZE];
    socklen_t clilen=sizeof(cliaddr[1]);//the same wa ~~I guess

    gettxt();

    fd_set readfds;

    seraddr.sin_family=AF_INET;
    seraddr.sin_addr.s_addr=inet_addr(ip[0]);
    seraddr.sin_port=htons(PORT);

    for(qq=1;qq<4;qq++)
    {
        cliaddr[qq].sin_family=AF_INET;
        cliaddr[qq].sin_addr.s_addr=inet_addr(ip[qq]);
        cliaddr[qq].sin_port=htons(PORT);
    }
    ser=socket(AF_INET,SOCK_DGRAM,0);
    bind(ser,(struct sockaddr*)&seraddr,sizeof(seraddr));

    if(STDIN_FILENO>ser)
        maxsock=STDIN_FILENO;
    else 
        maxsock=ser;

    while(1)
    {
        FD_ZERO(&readfds);  
        FD_SET(STDIN_FILENO,&readfds);
        FD_SET(ser,&readfds);
        ret=select(maxsock+1,&readfds,NULL,NULL,0); 
        if(ret>0)
        {
            if(FD_ISSET(STDIN_FILENO,&readfds))
            {
                fgets(bufsend,SIZE,stdin);
                for(qq=1;qq<4;qq++)
                    sendto(ser,bufsend,SIZE,0,(struct sockaddr*)&cliaddr[qq],clilen);
            }
            if(FD_ISSET(ser,&readfds))
            {
                for(qq=1;qq<4;qq++)
                {
                    recvfrom(ser,bufrecv,SIZE,0,(struct sockaddr*)&getcliaddr[qq],&clilen);
                    com=compare(getcliaddr[qq]);//
                    printf("<%s>%s\n",name[com],bufrecv);
                }
            }
        }
    }
    return 0;
}
</code> 
```

文件“ip.txt”只是名称-IP文件，显示如下：

```
<txt>
I 192.168.1.2
Sun 192.168.1.4
Jerry 192.168.1.5
Peter 192.168.1.6
</txt> 
```

第一个包含我自己的信息，以下三个是其他人的。但是当我只和一个人一起运行程序时，首先，我们可以无阻塞地互相聊天。几句话后，效果并不好。我运行了 gcc，我猜想当“sendto”缓冲区已满时，它会阻止等待另一个“recvfrom”buf。我写的程序是为 4 个人写的，但我只和一个人一起运行它，另外两个人不能从它那里接收（我猜仍然是“recvfrom”中的缓冲区，对吗？）。所以“sendto”缓冲区已满并被阻塞。我就是这么想的，对吗？如果是真的，如何解决？我的意思是如何定期清理“sendto”缓冲区？还是有其他方法？非常感谢~~;-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T16:53:36.307

我认为问题出在您的逻辑中，当客户端向您发送消息时，您会遍历所有客户端并调用，每次返回时`recvfrom`您应该只调用一次。`recvfrom``select`

```
if(FD_ISSET(ser,&readfds))
{    
    struct sockaddr_in src_addr;
    socklen_t addrlen = sizeof(src_addr);
    recvfrom(ser, bufrecv, SIZE, 0, (struct sockaddr*)&src_addr, &addrlen);
    com=compare(src_addr);//
    printf("<%s>%s\n",name[com],bufrecv);    
} 
```

**编辑：** 您似乎使用`getcliaddr`in`recvfrom`作为，`src_addr`这意味着每次收到来自客户端的消息时，您都会*覆盖*另一个客户端的地址，这对一个客户端来说不是问题，但对于多个客户端，您可以使用覆盖第一个客户端发件人的地址，如果您`recvfrom`再次调用它会阻塞，因为您认为它正在等待第*一个*客户端，而实际上它正在等待*第二个*客户端。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T17:09:34.683

您误解了 recvfrom(2) 的 src_addr 参数的含义：

```
ssize_t recvfrom(int sockfd, void *buf, size_t len, int flags,
                 struct sockaddr *src_addr, socklen_t *addrlen); 
```

`src_addr`是此函数的输出，而不是输入。它应该指向一个空白`struct sockaddr`，它将用接收到的数据包的源地址填充。这意味着你不能选择一个特定的客户端来接收一个数据包（你也不想这样做，因为你不知道接下来谁会打字）。相反，您只需收到一个数据包，然后找出它来自谁。

# matlab - 在不使用 for 循环的情况下比较两个不相等的矩阵某个特定列

> ID：13143615
> 
> 赞同：-1
> 
> 时间：2012-10-30T16:35:02.763
> 
> 标签：matlab

我想在不使用 for 循环的情况下比较两个矩阵。给定

```
A=[2 1 8;
   2 4 7;
   2 3 7;
   3 5 2;
   5 1 4;
   5 6 2;
   5 3 7];

B=[3 6 5;
   1 4 2]; 
```

现在我想比较`col(2)`两个矩阵`B`和`col(2)`两个矩阵`A`，同时 比较`col(3)`三个矩阵`B`和`col(1)`一个矩阵`A`。现在我想从这样的矩阵中得到结果`A`：

```
c=[2 4 7;
   5 6 2]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T17:02:56.307

我认为@mizanbuet 想要从行`A`的第三个元素在 的第一列`B`和行中的第二个元素在`B`.

使用一些[ismember](http://www.mathworks.nl/help/matlab/ref/ismember.html)和[逻辑索引](http://www.mathworks.nl/company/newsletters/articles/Matrix-Indexing-in-MATLAB/matrix.html)很容易：

```
A2inB2 = ismember(A(:,2),B(:,2));
A1inB3 = ismember(A(:,1),B(:,3));
c = A( A2inB2 & A1inB3, :); 
```

# android - 适配器不断实例化 AdapterView

> ID：13143629
> 
> 赞同：1
> 
> 时间：2012-10-30T16:35:41.317
> 
> 标签：android, adapter

例如，我一直在关注许多关于如何优化诸如画廊之类的列表的教程，但我无法让我的适配器重新循环视图。这是我的代码：

```
@Override
public View getView(int position, View convertView, ViewGroup parent) {
    Log.d("ImageAdapter","getView : "+convertView);
    ImageView imageView = null;

    if (convertView == null){
        //imageView = (ImageView) mInflater.inflate(R.layout.pic_adapter, null);
        imageView = new ImageView(context);

        holder = new ViewHolder();
        holder.imageView = imageView;

        imageView.setTag(holder);
    } else {
        holder = (ViewHolder) convertView.getTag();
        //imageView = holder.imageView;
    }

    holder.imageView.setImageDrawable(plotsImages.get(position));
    Log.d("ImageAdapter","return : "+imageView);
    return imageView;
} 
```

在我的日志中，我在 getView 的开头一直得到“null”，这意味着 convertView 不是一些重新循环的视图，那是怎么回事？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T19:48:31.903

我相信您在 ViewHolder 中使用的循环逻辑是罪魁祸首。当我尝试运行您的代码时，应用程序因一个晦涩的错误而崩溃。但是，这很好用：

```
public View getView(int position, View convertView, ViewGroup parent) {
    Log.d("ImageAdapter","getView : "+convertView);
    ImageView imageView = null;

    if (convertView == null){
        //imageView = (ImageView) mInflater.inflate(R.layout.pic_adapter, null);
        imageView = new ImageView(Example.this);
    } else {
        imageView = (ImageView) convertView;
    }

    imageView.setImageDrawable(plotsImages.get(position));
    Log.d("ImageAdapter","return : "+imageView);
    return imageView;
} 
```

ViewHolders 应该可以避免您`findViewById()`重复使用来访问行布局中的子视图。由于您的布局只是一个 ImageView，因此不需要 ViewHolder。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T08:48:50.380

首先摆脱持有人，你在convertView中得到的就是你从getView()返回的。这也是您对代码的期望，那么为什么会有这种不必要的复杂性呢？

您使用的是什么适配器类？您可以尝试使用 BaseAdapter 并确保所有被覆盖的方法都返回适当的数据吗？

我在考虑getItemViewType，如果每次返回不同的值，回收将被禁用。

# c++ - bool 输出为 205 而不是 true 或 false

> ID：13143634
> 
> 赞同：-6
> 
> 时间：2012-10-30T16:35:53.303
> 
> 标签：c++, boolean, cout, direction

我目前正在尝试使用布尔值输出方向。

1 是真的。0 为假。

1表示电梯上升。0 表示电梯下降。

我希望输出为：

节点#：时间戳。当前（用户楼层）。目的地（用户楼层）。方向（用户正在前进）。

```
Node 0 : 1 3 7 true
Node 1 : 1 2 9 true
Node 2 : 1 7 9 true
Node 3 : 2 4 6 true
Node 4 : 2 4 8 true
Node 5 : 2 1 17 true 
Node 6 : 5 1 15 true
Node 7 : 5 5 1 false
Node 8 : 6 17 4 false
Node 9 : 6 4 17 true 
```

相反，我得到了输出：

```
Node 0 : 1 3 7 205
Node 1 : 1 2 9 205
Node 2 : 1 7 9 205
Node 3 : 2 4 6 205
Node 4 : 2 4 8 205
Node 5 : 2 1 17 205 
Node 6 : 5 1 15 205
Node 7 : 5 5 1 205
Node 8 : 6 17 4 205
Node 9 : 6 4 17 205 
```

代码本身编译没有错误。我不知道我的逻辑哪里出错了。当我试图找出一种方法来分配用户提出电梯服务请求的方向（用户提出的请求）时。

```
reqNode *temp = new reqNode;

if(temp->start < temp->destination)
temp->set_dir(true);
else
temp->set_dir(false); 
```

是我使用的逻辑。

使用的 T1.txt 文件：

```
1 3 7
1 2 9
1 7 9
2 4 6
2 4 8
2 1 17
5 1 15
5 5 1
6 17 4
6 4 17 
```

这是我的文件（完整的代码）

binaryHeap.h 文件：

```
#include <vector>
using namespace std;

template <class Comparable>
class BinaryHeap
{

public:
BinaryHeap( ): Array( 11 ), theSize( 0 ){}

bool isEmpty( ) const
{
    return theSize == 0;
}

const Comparable & findMin( ) const
{
    if( isEmpty( ) )
    {
    cout << "heap empty" << endl; //throw UnderflowException( );
    //break;
    }
return Array[ 1 ];
}

void insert( const Comparable & x)
{
    Array[ 0 ] = x;   // initialize sentinel

    if( theSize + 1 == Array.size( ) )
      Array.resize( Array.size( ) * 2 + 1 );

    // Percolate up
    int hole = ++theSize;
        for( ; x < Array[ hole / 2 ]; hole /= 2 )
           Array[ hole ] = Array[ hole / 2 ];
           Array[ hole ] = x;
}

void deleteMin( )
{
    if( isEmpty( ) )
    {
    cout << "heap empty" << endl; //throw UnderflowException( );
    break;
    }
 Array[ 1 ] = Array[ theSize-- ];
 percolateDown( 1 );
}

void deleteMin( Comparable & minItem )
{
  minItem = findMin( );
  Array[ 1 ] = Array[ theSize-- ];
  percolateDown( 1 );
}

void makeEmpty( )
{
    theSize = 0;
}

private:

int theSize;  // Number of elements in heap
vector<Comparable> Array;    // The heap Array

void buildHeap( )
{
    for( int i = theSize / 2; i > 0; i-- )
    percolateDown( i );
}

void percolateDown( int hole )
{
  int child;
  Comparable tmp = Array[ hole ];

  for( ; hole * 2 <= theSize; hole = child )
  {
    child = hole * 2;
    if( child != theSize && Array[ child + 1 ] < Array[ child ] )
        child++;
    if( Array[ child ] < tmp )
        Array[ hole ] = Array[ child ];
    else
        break;
  }
 Array[ hole ] = tmp;
}
}; 
```

reqnode.h 文件：

```
class reqNode//create a node that takes in several properties.
{
public:

reqNode()
:direction(true)
{   
//default constructor
//initialize the memeber variables of this class.
priority = start = destination
= timestamp = start_time
= finish_time = -1;
set_dir(true);
}

reqNode(const reqNode &copy){       //copy constructor
priority = copy.priority;
start = copy.start;
destination = copy.destination;
timestamp = copy.timestamp;
start_time = copy.start_time;
finish_time = copy.finish_time;
}

reqNode & operator=(const reqNode & copy){ // operation overload
priority = copy.priority;
start = copy.start;
destination = copy.destination;
timestamp = copy.timestamp;
start_time = copy.start_time;
finish_time = copy.finish_time;

return *this;
}

bool operator<(const reqNode &rhs) const// operation overload
{
if(this->priority < rhs.priority)
return true;
else
return false;
}
void setPriority(int x){//assigning the priority to of whatever I declare "x" to be.
priority = x;
}

void calculate_priority()
{
if( start < destination )
priority = destination;  // Requests for higher floors will have lower priorities due to min heap structure
else
priority = 20 - destination;  // Requests for higher floors will have higher priorities
}

void set_dir(bool dir)
{
direction = dir;
}

//declare the member variables.
int priority, start, destination, 
timestamp, start_time, finish_time;
bool direction;
}; 
```

Elevator2.cpp 文件：

```
#include <iostream>
#include <fstream>
#include <stdio.h> //allows for the usage of getchar
#include "Elevator2.h"

void Elevator::displayMessage()
{
cout <<"Welcome to University Towers " << endl << endl << endl<<        "----------------------------" << endl;
}

double Elevator::get_total_cost()
{
return total_cost;
}

double Elevator::get_total_wait_time()
{
return total_wait_time;
}

bool Elevator::get_direction()
{
return direction;
}

void Elevator::change_direction()
{
direction = !direction;
}

void Elevator::set_direction(bool new_direction)
{
direction = new_direction;
}

int Elevator::get_elevator_floor()
{
return elevator_floor;
}

void Elevator::increment_elevator_floor()
{
if(direction) //if direction is TRUE (elevator moving upward) increment
elevator_floor++;
else
elevator_floor--;
}

void Elevator::set_elevator_floor(int new_floor)
{
elevator_floor = new_floor;
}

void Elevator::readRequests()
{
ifstream myStream("T1.txt");

while(!myStream.eof())
{
int timestamp ,currentFloor, destinationFloor;

myStream >> timestamp >> currentFloor >> destinationFloor;
//cout<< endl <<"The current timestamp is "<< timestamp << "The current floor is " <<  currentFloor 
//  << " and the destination floor is " << destinationFloor << endl << endl;
//cout<< endl;

reqNode *temp = new reqNode;

//initialize request node object
temp->timestamp = timestamp;
temp->start = currentFloor;
temp->destination = destinationFloor;
temp->start_time = -1;
temp->finish_time = -1;

//temp->direction = ( (currentFloor < destinationFloor) ? 1 : 0 );
temp->calculate_priority();

if(temp->start < temp->destination)
temp->set_dir(true);
else
temp->set_dir(false);

request.push(*temp);//push nodes into the request bank
}
int i = 0;
while( !request.empty() )
{

 cout << "Node " << i << " : " << request.front().timestamp << " " <<  request.front().start << " " << request.front().destination
<< " " <<  request.front().direction << endl;

//printf_s("%d\n", request.front().direction);

request.pop();//popping the request in order to test
i++;
}

//bool test = false;

//cout << test;

} 
```

Elevator2.h 文件：

```
#include <iostream>
#include "binaryHeap.h"
#include "reqnode.h"
#include <queue>
using namespace std;

class Elevator
{
public:

//Elevator();//Default constructor
Elevator(int initial_floor)//Each object starts with a initial floor aka the current  floor.
:total_wait_time(0), total_cost(0), elevator_floor(initial_floor),   direction(true)//initialize each object accordingly.
{
readRequests();//for each elevator object...created(i.e - request read, there is a  node created).
}

void displayMessage();//display greeting text.
double get_total_cost();//returns the number of floors the elevator travels.
double get_total_wait_time();//returns the number of floors the elevator travels to  get to user.

bool get_direction();  // get the current direction of the elevator.
void set_direction(bool);  // sets direction to desired direction of the user.

void change_direction();  // reverses direction of the elevator.

int get_elevator_floor();// return the elevator floor(currently on).
void set_elevator_floor(int); // sets according to the user's request.

void increment_elevator_floor();  // moves elevator one floor determined by direction(dependent on the set direction bool).

protected://only calls from inherited/friendship classes are aloud. Never calls from the Driver.

queue<reqNode> waiting_queue;//queue stores reqNode objects, we name this queue - waiting queue.
queue<reqNode> request;// ""                  ""                                - request.
BinaryHeap<reqNode> service_queue;// ""                        ""               - service queue.
queue<reqNode>  finished;//""                      ""                           - finished.

private:

double total_wait_time;//number of floors the elevator travels to get to user.
double total_cost;//number of floors the elevator travels while servicing.
int elevator_floor;//initial floor value.
bool direction;//iterating through the floors for the sabbath algorithm
void readRequests();//read the in the requests per user and store them(by way of the request queue/bank).  
}; 
```

懒惰的.cpp 文件：

```
#include "lazy.h"

void Lazy::setAttributes(reqNode Nodey) 
{

int costToserve = abs(Nodey.start - Nodey.destination);//the floors between user's start_floor and user's destination_floor.
int directionOf = (Nodey.start - Nodey.destination) * -1;//the direction the elevator is heading.
int priority = abs(Nodey.destination - get_elevator_floor());//already in the servicing queue.

}

void Lazy::simulation()
{
time = 0;

while( !request.empty() )  //  while request remain, do:
{
//  check for and read new requests into incoming/waiting queue
while(request.front().timestamp == time)  //  schedule new requests
{
waiting_queue.push(request.front());  // places next request into waiting queue
request.pop();
}

scheduler();  // inputs waiting requests into servicing queue based on elevator's current state

if( !service_queue.isEmpty() )  //  if( !service_queue.isEmpty() )
{
if( service_queue.findMin().direction != get_direction() )  //  if(top node of service queue's direction == current direction of the elevator)
           {                                    
change_direction();//then we change the direction.
}//  else set direction to top node's direction

increment_elevator_floor();  // increments/decrements elevator floor by one.

while( service_queue.findMin().destination == get_elevator_floor() )//check top node to see if it is done;  current floor is destination
{
reqNode * temp;

service_queue.deleteMin(*temp); // min item is serviced; pop from heap
temp->finish_time = time; 
finished.push(*temp);  //  place serviced node to finished bank
}

}
increment_elevator_floor();
time++;
}
}

void Lazy::scheduler()
{
// UPDATE:  PRIORITY TO BE CALCULATED BY REFERENCE POINT (DETERMINED BY DIRECTION) IN DRIVER BY CALL TO REQNODE METHOD

int size = waiting_queue.size(); //set to wait queue's size

if( !service_queue.isEmpty() )
{
for(int i = 0; i < size; i++)//check waiting queue for( i = 0, i < size, i ++)
{
if( waiting_queue.front().start == get_elevator_floor() && waiting_queue.front().direction == get_direction() )//if node's floor == current floor 
{
waiting_queue.front().start_time = time;
service_queue.insert( waiting_queue.front() );  //put in service queue
}
else
{
reqNode *temp = &waiting_queue.front(); //put back in queue
waiting_queue.push(*temp);
waiting_queue.pop();
}
}
}
else
{

if( !waiting_queue.empty() )//check waiting queue (if not empty)
{
/*  Elevator should take the direction of next request waiting and begin moving in that direction.
Elevator should pick up requests that are on the way and in same direction as next waiting request
*/
set_direction(waiting_queue.front().direction);

for(int i = 0; i < size; i++)//check waiting queue for( i = 0, i < size, i ++)
{
if( waiting_queue.front().start == get_elevator_floor() && waiting_queue.front().direction == get_direction() )//if node's floor == current floor 
{
waiting_queue.front().start_time = time;
service_queue.insert( waiting_queue.front() );  //put in service queue
}
else
{
reqNode *temp = &waiting_queue.front(); //put back in queue
waiting_queue.push(*temp);
waiting_queue.pop();
}
}   
}

}

} 
```

懒惰的.h文件：

```
#include "Elevator2.h"

class Lazy : public Elevator
{   
public:
Lazy(int initial_floor)//initialize the same way you did your base class. same parameters.
:Elevator(initial_floor){}

void simulation();//carries out the normal elevator simulation

private:

void scheduler();//scheduler to handle. 
void setAttributes(reqNode);//set attributes of each request node.
int time;
}; 
```

好的，这就是所有文件。哇，我觉得我的空格键被 4 倍的间距弄坏了！天哪。

最后是 driver2.cpp ：（所有魔法发生的地方）

```
#include <iostream>
#include <fstream>
#include <string>
#include "lazy.h"
#include <algorithm>
using namespace std;

void setNode(reqNode nizzode, int priority)
{
nizzode.priority = priority;
}

int main()
{
Lazy lazy(1);
} 
```

而已。

现在我的代码从 T1.txt 文件中接收 10 个用户请求，并生成一个请求节点，该节点具有时间戳属性（请求它的楼层）和当前楼层（提出请求的用户的原始楼层） ，最后是目的地楼层（用户想要的目的地）。我还认为我的逻辑是根据当前楼层和目标楼层来确定用户的方向。男孩是我错了。帮助将不胜感激！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-30T16:44:27.473

`205`是十六进制，`0xCD`在使用调试版本时，它是 Visual Studio 中未初始化数据的可能填充符之一。
您需要调试代码并追溯这些未初始化数据的来源。
这里没有人会为你调试它。

# regex - WSO2 Switch Mediator 正则表达式无法正常工作

> ID：13143638
> 
> 赞同：1
> 
> 时间：2012-10-30T16:36:00.873
> 
> 标签：regex, wso2, wso2esb

我正在尝试使用正则表达式来匹配 switch 语句中的值，因此我不必为类似的值创建单独的案例。

```
 <switch xmlns:ns="http://org.apache.synapse/xsd" source="$ctx:val">
      <case regex="5 | 2">
         <log level="custom">
            <property name="log1" value="hit"/>
         </log>
      </case>
   </switch> 
```

但是，这似乎不起作用。如果我为“5”和“2”创建两个单独的案例，它会起作用。有任何想法吗？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T17:59:03.457

空格将被视为匹配所需的正则表达式中的文字字符。只需删除它们：

```
<case regex="5|2"> 
```

# php - PHP中的保留字是否区分大小写？

> ID：13143641
> 
> 赞同：0
> 
> 时间：2012-10-30T16:36:10.347
> 
> 标签：php, case-sensitive, reserved-words

`final`PHP ( , `public`,等)中的保留字是否`function`区分大小写？

写下是否有效：

```
Final Public Function 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T16:41:18.310

我从来没有遇到过区分大小写的问题，因为它与保留字有关。有时我把它们大写，有时我没有。查看此列表以获取使用示例：

[http://us.php.net/manual/en/reserved.keywords.php](http://us.php.net/manual/en/reserved.keywords.php)

# objective-c - UITabbarItem BadgeValue 文本颜色

> ID：13143646
> 
> 赞同：4
> 
> 时间：2012-10-30T16:36:28.363
> 
> 标签：objective-c, ios, uitabbar, uicolor, uitabbaritem

我的应用程序有问题。我在 UITabBar 中的一个选项卡上设置了一个徽章值。徽章值正确为红色，徽章值周围的圆圈正确为白色。问题是，文本的颜色是灰色（160、160、160）。它与正常状态 tabbaritem 文本的颜色相同，但我在应用程序代码中没有设置此颜色，我不知道此颜色来自何处。几周以来，我在整个网络中搜索了该问题，但找不到任何解决方案。我到处找到的唯一答案是，无法更改徽章值文本的颜色。但如果不可能，为什么在我的应用程序中改变它？我希望有人可以帮助我解决这个问题...

*   [http://www.luventas-webdesign.de/stackoverflow/screenshot_badgevalue.png](http://www.luventas-webdesign.de/stackoverflow/screenshot_badgevalue.png)
*   就像我的应用程序中的颜色一样
*   ![就像我的应用程序中的颜色一样](../Images/2a18e9e9884b881fd9f8ca31804a1c9c.png)

*   [http://www.luventas-webdesign.de/stackoverflow/screenshot_like_it_should.png](http://www.luventas-webdesign.de/stackoverflow/screenshot_like_it_should.png)

*   就像颜色通常应该是...
*   ![喜欢的颜色通常应该是](../Images/cec2fb5ee0724eec414de62514fcae44.png)

* * *

编辑 02.11.2012 - 代码

TabBarController 的创建：

```
#import "ExtendedTabBarController.h"
#import "configuration.h"

@implementation ExtendedTabBarController

- (void)viewDidLoad {
    [super viewDidLoad];
    [[UITabBarItem appearance] setTitleTextAttributes:[NSDictionary dictionaryWithObjectsAndKeys: [UIColor colorWithRed:207.0/255.0 green:70.0/255.0 blue:61.0/255.0 alpha:1], UITextAttributeTextColor, [UIFont fontWithName:@"KievitPro-Regular" size:10.0], UITextAttributeFont, nil] forState:UIControlStateSelected];

    [[UITabBarItem appearance] setTitleTextAttributes:[NSDictionary dictionaryWithObjectsAndKeys: [UIColor colorWithRed:255.0/255.0 green:255.0/255.0 blue:255.0/255.0 alpha:1], UITextAttributeTextColor, [UIFont fontWithName:@"KievitPro-Regular" size:10.0], UITextAttributeFont, nil] forState:UIControlStateNormal];

    [self.tabBar sizeToFit];

    UIView *tabbarBackgroundColorView = [[UIView alloc] initWithFrame:CGRectMake(0.0, 0, self.view.bounds.size.width, 49)];
    [tabbarBackgroundColorView setBackgroundColor:[UIColor colorWithRed:233.0/255.0 green:233.0/255.0 blue:233.0/255.0 alpha:1]];
    [self.tabBar insertSubview:tabbarBackgroundColorView atIndex:0];
}

- (void)viewDidUnload {
    [super viewDidUnload];
}

- (void)viewWillAppear:(BOOL)animated {
    [super viewWillAppear:animated];
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {
    return UIInterfaceOrientationIsPortrait(interfaceOrientation); // only portrait orientation

}

/**
 *  orientation for iOS6
 **/
-(NSUInteger)supportedInterfaceOrientations{
    return UIInterfaceOrientationMaskPortrait;
}

@end 
```

调用 AppDelegate：

```
ExtendedTabBarController *tabBarController = [[ExtendedTabBarController alloc] init];
[self setTabBarController:tabBarController];
[[UITabBar appearance] setBackgroundImage:[UIImage imageNamed:@"menu_bg"]];

// code for initialize View- and NavigationControllers...

self.tabBarController.viewControllers = @[highlightsNavigationController, categoryNavigationController, searchNavigationController, favoritesNavigationController, imprintNavigationController];

self.window.rootViewController = self.tabBarController;

[[UITabBar appearance] setSelectionIndicatorImage:[[UIImage alloc] init]]; 
```

设置徽章值：

```
int viewCount = 0;
NSUserDefaults * defs = [NSUserDefaults standardUserDefaults];
NSDictionary * dict = [defs dictionaryRepresentation];
for (id key in dict) {
    if([key rangeOfString:@"_highlighted"].location != NSNotFound && [[[dict objectForKey:key] objectAtIndex:0] isEqualToString:@"YES"]) {
        viewCount++;
    }
}
UITabBarItem *tbi = (UITabBarItem *)[self.tabBarController.tabBar.items objectAtIndex:3];
if(viewCount <= 0) {
    tbi.badgeValue = nil;
} else {
    tbi.badgeValue = nil;
    tbi.badgeValue = [NSString stringWithFormat:@"%d", viewCount];
} 
```

覆盖 UILabel 的代码：

```
// -- file: UILabel+VerticalAlign.h
#pragma mark VerticalAlign
@interface UILabel (VerticalAlign)
- (void)alignTop;
- (void)alignBottom;
- (void)awakeFromNib;
-(id)initWithFrame:(CGRect)frame;
@end

#import "UILabel+VerticalAlign.h"

// -- file: UILabel+VerticalAlign.m
@implementation UILabel (VerticalAlign)
- (void)alignTop {
    CGSize fontSize = [self.text sizeWithFont:self.font];
    double finalHeight = fontSize.height * self.numberOfLines;
    double finalWidth = self.frame.size.width;    //expected width of label
    CGSize theStringSize = [self.text sizeWithFont:self.font constrainedToSize:CGSizeMake(finalWidth, finalHeight) lineBreakMode:self.lineBreakMode];
    int newLinesToPad = (finalHeight  - theStringSize.height) / fontSize.height;
    for(int i=0; i<newLinesToPad; i++)
        self.text = [self.text stringByAppendingString:@"\n "];
}

- (void)alignBottom {
    CGSize fontSize = [self.text sizeWithFont:self.font];
    double finalHeight = fontSize.height * self.numberOfLines;
    double finalWidth = self.frame.size.width;    //expected width of label
    CGSize theStringSize = [self.text sizeWithFont:self.font constrainedToSize:CGSizeMake(finalWidth, finalHeight) lineBreakMode:self.lineBreakMode];
    int newLinesToPad = (finalHeight  - theStringSize.height) / fontSize.height;
    for(int i=0; i<newLinesToPad; i++)
        self.text = [NSString stringWithFormat:@" \n%@",self.text];
}
- (void)awakeFromNib
{
    [super awakeFromNib];
    [self setFont:[UIFont fontWithName:@"KievitPro-Regular" size:12.0]];
}

-(id)initWithFrame:(CGRect)frame
{
    id result = [super initWithFrame:frame];
    if (result) {
        [self setFont:[UIFont fontWithName:@"KievitPro-Regular" size:12.0]];
    }
    return result;
}

@end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T13:48:24.943

我自己找到了解决问题的方法：

我必须从覆盖的 UILabel 中删除以下行：

```
- (void)awakeFromNib
{
    [super awakeFromNib];
    [self setFont:[UIFont fontWithName:@"KievitPro-Regular" size:12.0]];
}

-(id)initWithFrame:(CGRect)frame
{
    id result = [super initWithFrame:frame];
    if (result) {
        [self setFont:[UIFont fontWithName:@"KievitPro-Regular" size:12.0]];
    }
    return result;
} 
```

也许有人可以解释一下，为什么在我们关闭这篇文章之前，这行会改变徽章值的文本颜色？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T14:37:44.077

不要使用类别设置默认的 UILabel 字体，而是使用 UILabel 的外观方法来设置字体：

```
[[UILabel appearance] setFont:[UIFont fontWithName:@"KievitPro-Regular" size:12.0]]; 
```

当我对此进行测试时，徽章的文本显示为正常的白色。

# javascript - 我如何告诉 ELRte 不要删除我的 , etc. tags?

ELRte is a great WYSIWYG editor, but it assumes too much responsibilities ...

especially in stripping tags from my content.

the most an

> ID：13143647
> 
> 赞同：0
> 
> 时间：2012-10-30T16:36:30.223
> 
> 标签：javascript, elrte

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T16:42:48.813

这是一种非官方的方式：

```
elRTE.prototype.options.denyTags = []; 
```

默认情况下，`denyTags`填充有他们认为应该删除的所有标签。

将其设置为空数组将导致不删除任何标签。

如果您还需要删除一些标签，请将它们添加到数组中，例如：

```
elRTE.prototype.options.denyTags = ['applet', 'base', 'basefont', 'bgsound', 'etc...']; 
```

# php - WAMP 和 WordPress - 安装插件后出现问题

> ID：13143659
> 
> 赞同：1
> 
> 时间：2012-10-30T16:36:57.170
> 
> 标签：php, wordpress, apache, wamp

我正在使用 WAMP（Apache 2.2.17、PHP 5.4.3）和 WordPress 3.4.2。

一切都很好，直到我开始添加和激活插件现在我在前端/管理员上遇到不同类型的错误，例如

> “注意：未定义的索引：第 11 行 C:\repo\wpdev\wp-content\plugins\wp-rss-multi-importer\inc\upgrade.php 中的 plugin_version”

和

> “警告：第 21 行 C:\repo\wpdev\wp-content\plugins\wp-rss-multi-importer\inc\rss_feed.php 中的非法字符串偏移 'feedslug'。”

如果我停用插件，一切似乎都很好。我已经安装了 WAMP 和 WP 2X。这些插件在 MediaTemple 上运行良好。错误消息因插件而异。搜索谷歌，结果是空的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T19:29:17.173

根据您正在使用的插件的作者，在等待更新时，您可以通过在 inc/rss_feed.php 中注释掉这些行来消除该错误，例如

```
//if (!empty($feed_options)){

//add_feed($feed_options['feedslug'], 'rssmi_feed');

//} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T04:09:11.097

这些是通知和警告，可以根据您的 PHP 错误报告设置选择性地显示。找到您的 php.ini 并设置以下内容：

```
error_reporting  =  E_ALL & ~E_NOTICE 
```

`phpinfo();`请注意，您可以使用该函数找到您的 php.ini 位置。

# android - SeekBar：使用可绘制矩形更改代码中的外观

> ID：13143665
> 
> 赞同：0
> 
> 时间：2012-10-30T16:37:15.837
> 
> 标签：android, drawable, seekbar, rectangles

我是 android 的初学者，但希望尽快发布一个应用程序。

我的问题是，我想根据用户/数据库输入有一个带有彩色区域的搜索栏。

我用 ShapeDrawable 尝试了一些东西，但我完全迷失了，我得到的唯一结果就是让搜索栏完全变黑。

我不允许发布图片，但这里是我正在寻找的经过 photoshop 处理的图片的链接： [http ://www.burninglobster.com/device-2012-10-29-155734ps.png](http://www.burninglobster.com/device-2012-10-29-155734ps.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T23:06:38.910

您可以根据输入数据通过画布手动绘制位图。

```
Bitmap.Config bmpConfig = Config.ARGB_8888;
Bitmap bmp = Bitmap.createBitmap(seekbar.getWidth(), seekbar.getHeight(), bmpConfig);
Canvas canvas = new Canvas(this.bmp);
canvas.drawRect(...);   // draw whatever you need

seekbar.setBackgroundDrawable(new BitmapDrawable(bmp)); 
```

希望这可以帮助。

# iphone - 带有一些动作的多个启动画面

> ID：13143667
> 
> 赞同：0
> 
> 时间：2012-10-30T16:37:23.707
> 
> 标签：iphone, ios, splash-screen

这是探针。我有一个需要有 2 个启动画面的 iPhone 应用程序。第一个闪屏将显示 1 或 2 秒，然后淡出并更改为第二个闪屏，在第二个闪屏中，右上角有 [x] 关闭按钮，类似于 Windows 关闭按钮。它有一个动作来关闭第二个闪屏并转到主窗口。

我已经尝试用各种方法来实现它，但我什至还没有接近目标。也许是因为我在 iphone 应用程序开发方面是全新的。

所以伙计们，我真的需要你的帮助..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T17:00:00.247

如果我正确解释了您的请求，您可以通过触发您的应用程序委托的 segue 来完成此操作。例如，假设您希望在应用启动后执行以下操作：

*   显示视图 A 2 秒
*   淡入视图 B
*   让用户点击 [x] 关闭按钮以显示视图 C

如果您使用 Storyboard，您可以使用类似于以下内容的内容：

配置初始视图控制器`MYAViewController`。添加`MYBViewController`. 添加`MYCViewController`.

然后设置一个传出的segue from `MYAViewController`to `MYBViewController`。选择这个 segue 并从 Attributes 检查器中，给它一个 Identifier `AToB`，将它的样式设置为`Modal`，将它的转换设置为`Cross Dissolve`并确保它`Animates`被选中。

`MYBViewController`从to添加另一个 segue `MYCViewController`。选择此 segue 并根据需要进行配置，但为其提供标识符`BToC`.

然后从您的应用程序委托中，以编程方式触发 segues。

**在 MYAppDelegate 中：**

```
...

- (BOOL)application:(UIApplication *)application 
    didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {

    [self performSelector:@selector(showViewB) 
               withObject:nil 
               afterDelay:2.0]; // seconds
}

- (void)showViewB {
    [self.window.rootViewController performSegueWithIdentifier:@"AToB" 
        sender:self.window.rootViewController];
}

... 
```

请注意，所有视图控制器名称和 segue 标识符都是人为设计的。显然，您希望以对您的应用程序有意义的方式命名这些项目。

希望这可以帮助。

# matlab - 通过两点画一条线

> ID：13143668
> 
> 赞同：10
> 
> 时间：2012-10-30T16:37:22.627
> 
> 标签：matlab, plot

使用 MatLab，我知道如何使用以下代码创建连接两点的*线段：*

```
line([0 1],[0 1]) 
```

这将绘制从点 (0,0) 到点 (1,1) 的直线段。

我想要做的是继续这条线到情节的边缘。而不是仅仅在这两个点之间画一条线，我想画一条*穿过*这两个点的线，跨越整个图形的任何两个点。

对于这条特定的线和 ax=-10:10, y=-10:10 情节我可以写：

```
line([-10 10], [-10 10]); 
```

但我需要对任何一组点进行概括。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-30T16:47:21.460

1.  求解通过这两点的直线方程：

    ```
    y = a*x + b; 
    ```

    对于`a`和`b`：

    ```
    a = (yp(2)-yp(1)) / (xp(2)-xp(1));
    b = yp(1)-a*xp(1); 
    ```

2.  找到绘图窗口的边缘

    ```
    xlims = xlim(gca);
    ylims = ylim(gca); 
    ```

    或远离边缘，因此您仍然可以缩小，稍后重置 x/y 限制。
    或者如果目前没有情节，请定义您想要的边缘：

    ```
    xlims = [-10 10];
    ylims = [-10 10]; 
    ```

3.  将这些边填入直线方程并绘制相应的点：

    ```
    y = xlims*a+b;
    line( xlims, y ); 
    ```

4.  并重置边缘

    ```
    xlim(xlims);
    ylim(ylims); 
    ```

有一种特殊情况，即垂直线，您必须单独处理。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-30T16:46:18.093

关于什么

```
 function = long_line(X,Y,sym_len)
       dir = (Y-X)/norm(Y-X);
       Yp = X + dir*sym_len;
       Xp = X - dir*sym_len;
       line(Xp,Yp);
  end 
```

是`sym_len`周围绘制线的预期长度的一半`X`？

# php - IE 和 Safari 允许在 IFrame 中使用 cookie

> ID：13143670
> 
> 赞同：0
> 
> 时间：2012-10-30T16:37:28.880
> 
> 标签：php, html, iframe

我正在尝试在 IFrame 中加载网页。问题是该页面需要 cookie 才能正常工作。在 Firefox 和 Chrome 中，这可以正常工作，但在 IE 和 Safari 中，这不起作用，因为这些浏览器会阻止 IFrame 中的 cookie！

有任何想法吗？

# python - python：未定义的变量：__init__错误

> ID：13143676
> 
> 赞同：2
> 
> 时间：2012-10-30T16:37:39.427
> 
> 标签：python, eclipse

我正在尝试使用 eclipse 用 python 编写一个虚拟程序，我收到错误消息： Undefined variable: `__init__`。

我的目标是使用 eclipse 'Run as' --> Python Run 运行程序。

当我删除代码时：

```
if __init__=='__main__': 
     main() 
```

并从命令行 say_something() 运行它 - 它工作正常。知道我在做什么错吗？

![在此处输入图像描述](../Images/5ad78ad184fa4cd64ab6bb70cf1910c7.png)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-30T16:38:39.080

我想你正在寻找`if __name__ == '__main__':`

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-30T16:39:18.583

你想要的是：

```
if __name__ == "__main__":
    main() 
```

`__init__`是类初始化函数的名称。

# java - 在java中编译类方法

> ID：13143679
> 
> 赞同：0
> 
> 时间：2012-10-30T16:37:55.137
> 
> 标签：java, compilation

所以我的作业只要求我提供类方法，但它要求我提交一个 .java 和一个 .class 文件。好吧，我有理论上应该可以工作的代码，但是无论我尝试什么，它都不会编译。例如这是一个：

```
public class findFourLetterWord(String[] strings) {
   public static void main(String[] args) {
   for (int i = 0; i < strings.length; i++)
      if (strings[i].length()==4)
          return strings[i];
   return null;
}
} 
```

这是我得到的错误：

```
8 errors found:
File: D:\School\CSC 2310\hw5_elemmons1\FindFourLetterWord.java  [line: 9]
Error: The public type findFourLetterWord must be defined in its own file
File: D:\School\CSC 2310\hw5_elemmons1\FindFourLetterWord.java  [line: 9]
Error: Syntax error on token "(", { expected
File: D:\School\CSC 2310\hw5_elemmons1\FindFourLetterWord.java  [line: 9]
Error: Syntax error on token ")", ; expected
File: D:\School\CSC 2310\hw5_elemmons1\FindFourLetterWord.java  [line: 9]
Error: Syntax error, insert "}" to complete Block
File: D:\School\CSC 2310\hw5_elemmons1\FindFourLetterWord.java  [line: 11]
Error: Cannot make a static reference to the non-static field strings
File: D:\School\CSC 2310\hw5_elemmons1\FindFourLetterWord.java  [line: 12]
Error: Cannot make a static reference to the non-static field strings
File: D:\School\CSC 2310\hw5_elemmons1\FindFourLetterWord.java  [line: 13]
Error: Cannot make a static reference to the non-static field strings
File: D:\School\CSC 2310\hw5_elemmons1\FindFourLetterWord.java  [line: 14]
Error: Void methods cannot return a value 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T16:39:42.947

*   首先，将您的类命名为您的文件：`FindFourLetterWords`带大写字母。
*   从类声明中删除`(String[] strings)`（它已经在 main 方法上）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T16:43:22.343

我想也许你需要做

```
public class FindFourLetterWord {
    public static void main(String[] args) {
       for (int i = 0; i < strings.length; i++){
         if (strings[i].length()==4)
            System.out.println(strings[i]);
       }
    }
} 
```

这将打印出您输入的四个字母单词。

查看有关方法和类的[java 教程以获取更多信息。](http://docs.oracle.com/javase/tutorial/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T17:08:21.937

假设您将 Eclipse 作为 IDE 运行，如果您将代码重新排列为如下所示：

```
public class FindFourLetterWord {

  public static void main(String[] args) {

     for (int i = 0; i < args.length; i++) {

        if (args[i].length() == 4) {
           System.out.println(args[i]);
           break;
        }
     }
  }

} 
```

然后保存更改（这会自动触发编译），您可以从命令行运行已编译的程序（`.class`文件），并带有一些参数（即包含在 中`args`），即单词搜索列表：

```
$> cd /path/to/your/FindFourLetterWord.class/file
$> java FindFourLetterWord aba abba ab a 
```

您将获得指定单词中的第一个 4 字母单词 (abba)。
这样，您实际上调用`main`了类的方法（为其提供一些`String`参数），这是每个 Java 程序的入口点。
正如其他人已经说过的那样，首先尝试学习基础知识。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-30T17:09:09.670

您的来源中有许多问题。你真的应该找到一本像样的介绍书，因为你犯的错误是基本错误。

第一条错误消息表明该类`public class findFourLetterWord`需要位于其自己的文件中，该文件的名称为 findFourLetterWord.java，但是需要大写，并且您的文件名以大写字母 f 开头，而不是类名开头的小写字母 f。所以把你班级的第一个字母大写。

您不会以您正在做的方式为类提供参数。您将课程视为一种方法。类中的方法接受参数或参数，但类本身不接受。

其次，类中的静态方法不能访问非静态的类方法。您需要了解始终存在的静态方法和变量与从类创建对象时创建的动态方法和变量之间的区别。

类是用于创建对象的描述或模板。在创建实际对象之前，非静态的方法和变量不可用。但是，无需从类中实际创建对象即可访问静态方法和变量。

所以你需要类似下面的东西，我没有测试过，甚至没有编译过，所以可能会有错误，但它会让你开始。然而，有几种方法可以做到这一点，这只是一种方法的粗略，它使用对象和 new 来演示静态和非静态变量和方法之间的区别。

```
public class FindFourLetterWord {
   String [] myArgs;
   // constructor for the class
   public FindFourLetterWord (String [] args) {
       myArgs = args;
   }

   public String FindWord () {
       for (int i = 0; i < myArgs.length; i++)
          if (myArgs[i].length() == 4)
              return myArgs[i];
       }
       return null;
   }

   // the main where processing starts
   public static void main(String[] args) {
       FindFourLetterWord myObj = new FindFourLetterWord(args);

       String  foundWord = findWord();
       if (foundWord == null) {
           System.out.println ("no word found");
       } else {
          System.out.println ("Found word " + foundWord);
       }
   }
} 
```

# mysql - 使用 mysql 套接字安装 silverstripe

> ID：13143684
> 
> 赞同：0
> 
> 时间：2012-10-30T16:38:09.500
> 
> 标签：mysql, content-management-system, silverstripe

我正在尝试使用 MySQL 连接详细信息在服务器上安装 Silverstripe，如下所示：

**主机名**localhost:/tmp/mysql5.sock

**套接字**/tmp/mysql5.sock

在数据库服务器的安装表单中输入这些地址之一会在提交 localhost:/tmp/mysql5.sock 时出现以下错误：

```
I couldn't find a database server on 'localhost:/tmp/mysql5.sock': Connection refused" 
```

或 /tmp/mysql5.sock

```
I couldn't find a database server on '/tmp/mysql5.sock': php_network_getaddresses: getaddrinfo failed: Name or service not known 
```

并且只是 localhost 显示此错误：

```
I couldn't find a database server on 'localhost': Connecting to 3.22, 3.23 & 4.0 servers is not supported 
```

谢谢，弗洛里安

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T07:55:53.063

基本上，服务器设置有问题：

这是我添加的内容`_config.php`：

```
ini_set('mysqli.default_socket', '/tmp/mysql5.sock'); 
```

然后数据库连接看起来像这样：

```
$databaseConfig = array(
    "type" => 'MySQLDatabase',
    "server" => 'localhost',
    "username" => 'myusername',
    "password" => 'mypassword',
    "database" => 'mydb',
    "path" => '/tmp/mysql5.sock',
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T17:06:13.510

我从未尝试过以这种方式连接到 mysql 服务器。但也许安装程序无法识别这样的主机名，您可以尝试手动编写 _config.php 文件，然后运行 ​​/dev/build，也许可以。

关于：

```
I couldn't find a database server on 'localhost': Connecting to 3.22, 3.23 & 4.0 servers is not supported 
```

SilverStripe 需要 mysql 数据库版本 5，会不会是你的 mysql 服务器没有更新？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T18:58:40.437

在 Mac（Mountain Lion）上设置 SilverStripe 和 MariaDB 时，只需将其放入 _ss_environment.php 文件中：

```
define('SS_DATABASE_SERVER', 'localhost:/opt/local/var/run/mariadb/mysqld.sock'); 
```

没有必要更改“mysqli.default_socket”的值。

# iphone - 如何在 iOS 6 上找到 UIWebView 工具栏（以替换它们）？

> ID：13143689
> 
> 赞同：2
> 
> 时间：2012-10-30T16:38:33.120
> 
> 标签：iphone, ios, ipad, uiwebview, toolbar

我已经从另一个应用程序中尝试了以下代码，但它没有找到任何东西。为什么？如何访问`UIWebView`工具栏？

```
- (UIToolbar *)findVirginWebKeyboardToolbar:(UIView *)parent
{
    if ([parent isKindOfClass:[UIToolbar class]]) {
        UIToolbar *tb = (UIToolbar *)parent;
        if ([tb.items count] == 1 && [((UIBarButtonItem *)[tb.items objectAtIndex:0]).customView isKindOfClass:[UISegmentedControl class]]) {
            return tb;
        }
    }
    for (UIView *view in parent.subviews) {
        UIToolbar *tb = [self findVirginWebKeyboardToolbar:view];
        if (tb) return tb;
    }
    return nil;
}

- (void)removeKeyboardBar {
    UIView *keyboardWindow = nil;
    for (UIWindow *testWindow in [[UIApplication sharedApplication] windows]) {
        keyboardWindow = testWindow;
        UIToolbar *toolbar = [self findVirginWebKeyboardToolbar:keyboardWindow/*subviewWhichIsPossibleFormView*/];
        if (toolbar) {
            itemsArray = [NSArray arrayWithObjects:button1, button2, button3, nil];
            [toolbar setItems:itemsArray];
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-30T19:56:01.910

使用以下代码，您应该能够删除键盘上方的工具栏。

```
-(void)viewWillAppear:(BOOL)animated{
  [[NSNotificationCenter defaultCenter] addObserver:self
                                        selector:@selector(keyboardWillShow:)
                                            name:UIKeyboardWillShowNotification
                                          object:nil];
}

- (void)keyboardWillShow:(NSNotification *)note {
  [self performSelector:@selector(removeBar) withObject:nil afterDelay:0];
}
- (void)removeBar {
 // Locate non-UIWindow.
 UIWindow *keyboardWindow = nil;
 for (UIWindow *testWindow in [[UIApplication sharedApplication] windows]) {
 if (![[testWindow class] isEqual:[UIWindow class]]) {
    keyboardWindow = testWindow;
    break;
 }
}
  // Locate UIWebFormView.
  for (UIView *formView in [keyboardWindow subviews]) {
  // iOS 5 sticks the UIWebFormView inside a UIPeripheralHostView.
  if ([[formView description] rangeOfString:@"UIPeripheralHostView"].location != NSNotFound) {
    for (UIView *subView in [formView subviews]) {
        if ([[subView description] rangeOfString:@"UIWebFormAccessory"].location != NSNotFound) {
            // remove the input accessory view
            [subView removeFromSuperview];
        }
        else if([[subView description] rangeOfString:@"UIImageView"].location != NSNotFound){
            // remove the line above the input accessory view (changing the frame)
            [subView setFrame:CGRectZero];
        }
    }
  }
}
} 
```

# php - PHP在字符串中查找和替换？

> ID：13143698
> 
> 赞同：0
> 
> 时间：2012-10-30T16:38:52.383
> 
> 标签：php, preg-replace, str-replace

我有一些包含单词`LIMIT 3, 199`or的字符串`LIMIT 0, 100`。

基本上我想在我的字符串中替换单词 LIMIT 和它后面的所有内容。

我如何在 PHP 中做到这一点？str_replace 只替换一个项目，之后的 LIMIT 文本是动态的/

所以它可能是

```
WHEN JOHN WAS TRYING HIS SQL QUERY, HE FOUND THAT LIMIT, 121
// RETURN WOULD BE
WHEN JOHN WAS TRYING HIS SQL QUERY, HE FOUND THAT

WHEN JOHN TRIED LIMIT 343, 333 HE FOUND
// RETURN WOULD BE
WHEN JOHN TRIED 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T16:41:26.180

用于`strpos`查找`LIMIT`字符串中的位置，然后用于`substr`返回字符串直到该点。非常基本的字符串操作。

或者`preg_replace`，如果你想要一个单线，也许可以使用，尽管我认为这里不需要去正则表达式工具箱。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-30T16:40:35.883

`LIMIT.+$`用`preg_replace`模式替换掉`/LIMIT.+$/m`

也就是说：

```
$string = preg_replace("/LIMIT.+$/m","",$string); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T16:44:42.233

使用[`strstr`](http://www.php.net/manual/en/function.strstr.php)或[`stristr`](http://in.php.net/manual/en/function.stristr.php)（不区分大小写）。仅适用于版本`>= php 5.3.0`

```
$str = strstr($your_string, 'LIMIT', true); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-30T16:48:52.797

正如我建议不要在您不理解正则表达式时使用它们，这里有一个不使用它们的简单答案（请注意，我确实建议学习正则表达式，但它们并不容易学习）：

```
$output = substr($input, 0, strpos($input, 'LIMIT')) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-30T16:54:52.200

您可以使用`strstr`

```
$break = "LIMIT";
$array = array();
$array[] = "WHEN JOHN WAS TRYING HIS SQL QUERY, HE FOUND THAT LIMIT, 121";
$array[] = "WHEN JOHN TRIED LIMIT 343, 333 HE FOUND";

echo "<pre>";
foreach ( $array as $value ) {
    echo strstr($value, $break, true), PHP_EOL;
} 
```

输出

```
WHEN JOHN WAS TRYING HIS SQL QUERY, HE FOUND THAT 
WHEN JOHN TRIED 
```

# php - 既然夏令时已将它们全部更改为前一天，如何更正使用 mktime() 存储的日期

> ID：13143699
> 
> 赞同：0
> 
> 时间：2012-10-30T16:38:54.217
> 
> 标签：php, time, mktime

我编写了一个 Web 应用程序，它使用以下内容来存储日期：

```
$event->date = mktime(0, 0, 0, $month, $day, $year); 
```

其中 $month, $day, $year 来自下拉选择器，即整数值。因此，我存储了用户选择的当天午夜所代表的日期。

这个周末我们有夏令时，现在自上次更改时钟以来添加的所有事件现在都显示`date('D jS M Y' ,$event->date)`为前一天。

我的问题有两个：

*   如何修复数据库中的当前日期，以便将它们输出为正确的日期？我应该一次性在数据库中的所有时间增加一个小时吗？

*   从这一点开始，我应该如何存储日期？我应该像这样在午夜增加一个小时吗？`$event->date = mktime(1, 0, 0, $month, $day, $year);`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T16:46:36.490

1) 使用一些 SQL 查询来更新您的时间戳 2) 您应该一直使用 UTC 时间或纪元，并在客户端请求时即时进行区域设置转换。它会让你约会无语言环境。

# mysql - 选择多个@variables MySQL

> ID：13143705
> 
> 赞同：6
> 
> 时间：2012-10-30T16:39:05.760
> 
> 标签：mysql, sql, database

我希望将`SELECT`语句的结果存储到多个变量中。

我知道这个查询的结果总是会`6 ints`从 6 个不同的行返回。

我尝试使用以下代码：

```
SELECT id INTO @photo1, @photo2, @photo3, @photo4, @photo5, @photo6 
FROM album WHERE uploaded = @time AND scene_id = NEW.id; 
```

`album`是一张桌子。 `uploaded`是 中的一个字段`album`。 `scene_id`是 中的一个字段`album`。 `id`是`PRIMARY_KEY`的`album`。

我读过变量的数量必须等于字段的数量。这显然不是上述陈述中的情况。

考虑到这一点，我将如何克服这个问题？

此代码正在 MySQL 触发器中使用。

编辑：根据请求的相关表架构：

```
person   -- name of table   
id | approved -- id is PK

album   -- name of table
id | uploaded | scene_id  -- id is PK 
```

`approved`触发器从 0 变为 1时触发

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-30T16:55:49.990

你可以加入同一张表，并确保每个加入都会提供一个新的 id，比如（例如，对于两个 id，但你会明白的）：

```
SELECT a1.id, a2.id INTO @photo1, @photo2
FROM album a1 
inner join album a2 on a2.scene=a1.scene and a2.upload=a1.upload and a2.id>a1.id 
WHERE a1.uploaded = @time AND a1.scene_id = NEW.id; 
```

有关完整的 sql 和测试用例，请参阅[SqlFiddle 。](http://www.sqlfiddle.com/#!2/2907c/7)

# visual-studio-2008-sp1 - Visual Studio 2008 中的 Ctrl + 逗号

> ID：13143706
> 
> 赞同：1
> 
> 时间：2012-10-30T16:39:08.060
> 
> 标签：visual-studio-2008-sp1

我喜欢 VS2010 中的控制逗号。不幸的是，我现在必须从事一个需要（目前......）VS2008的项目。我心爱的捷径不起作用！在键盘的 IDE 设置中也找不到任何匹配的命令来分配 Control + Comma。

有没有办法在VS2008中实现同样的事情（弹出窗口，输入类名，双击或回车打开）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T16:41:34.877

Visual Assist 具有等效功能。

# java - 等待写入文件

> ID：13143710
> 
> 赞同：1
> 
> 时间：2012-10-30T16:39:26.920
> 
> 标签：java

我有一个小应用程序将数据写入文件然后读回数据，

```
writeData();
readData(); 
```

但似乎 readData() 是在 WriteData() 完成执行之前执行的，有没有等待 writeData() 的地方？
非常感谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T16:42:05.897

[可重入锁](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/locks/ReentrantLock.html)是您最好的选择。这是一个相关的例子。

[http://www.carfey.com/blog/java-concurrency-part-2-reentrant-locks/](http://www.carfey.com/blog/java-concurrency-part-2-reentrant-locks/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T16:49:18.367

尝试在您正在使用的 OutputStream 上调用刷新和关闭操作。

```
outputStream.flush();
outputStream.close(); 
```

如果您在主线程中工作并且它仍然没有更新，那么您对值的检查可能会延迟？它是基于 UI 的并且您不更新 UI？

您的 writeData() 和 readData() 操作的代码可以为解决问题提供更多见解:)

# php - 在搜索功能中显示 PDF 的功能在哪里？

> ID：13143712
> 
> 赞同：0
> 
> 时间：2012-10-30T16:39:36.643
> 
> 标签：php, joomla, rokajaxsearch

我进行了广泛的研究，但找不到解决问题的方法。

我正在处理的网站使用 Joomla 1.5 和最新版本的 PDF Indexer + Rokajaxsearch。

一切都很好，但我在尝试**更改结果显示的顺序**时遇到了严重的问题。默认情况下，它首先显示 PDF 结果，然后显示页面结果，但**我希望它先显示页面结果，然后显示 PDF 结果。** 为了做到这一点，我需要重写搜索功能来切换排序。

我一直试图找到搜索功能的代码在哪里，但我不知道它在哪里。谁能指出我正确的方向？

# android - setOnItemClickListener 在 ListView 活动中给出编译错误

> ID：13143713
> 
> 赞同：2
> 
> 时间：2012-10-30T16:39:36.830
> 
> 标签：android, listview

我一直在关注 ListView 的教程，下面的代码给出了错误。我搜索了所有我能找到的论坛，但我不断提出相同的推荐代码。也许所有的论坛都在引用旧版本，也许 Android 已经继续前进了。

无论如何，这是代码和错误消息：

```
 getListView().setOnItemClickListener(new OnItemClickListener()
 {
 //@Override
 public void onItemClick(AdapterView<?> parent, View view,
 int position, long id) 
 {
 // TODO Sort out error and add function code
 }
 }); 
```

错误信息：

```
 Multiple markers at this line

 -The method setOnItemClickListener(AdapterView.OnItemClickListener in the type
  AdapterView <ListAdapter> is not applicable for the arguments (new   OnItemClickListener(){})

 -OnItemClickListener cannot be resolved to a type 
```

有什么优惠吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-28T16:47:14.687

您应该可以通过像这样指定**onItemClickListener**的父类来解决这个问题：

```
myListView.setOnItemClickListener(new AdapterView.OnItemClickListener() { 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T11:20:58.693

尝试这个

```
ListView listView = getListView();
listView.setOnItemClickListener(new OnItemClickListener()
 {
 //@Override
 public void onItemClick(AdapterView<?> parent, View view,
 int position, long id) 
 {
 // TODO Sort out error and add function code
 }
 }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T14:04:54.257

我建议这样，如果有ListView，`extends ListActivity`并处理listitem click in`onListItemClick`

```
@Override
    protected void onListItemClick(ListView list, View view, int position, long id) {
        super.onListItemClick(list, view, position, id);
        //handle listitem click.
    } 
```

# html - 检查所有标签是否已关闭

> ID：13143716
> 
> 赞同：11
> 
> 时间：2012-10-30T16:39:55.893
> 
> 标签：html

我有一个由 PHP 构建的大型动态网站。我怀疑我的一个组件没有正确关闭 HTML 标签。我有源输出 HTML。我想知道是否有一个脚本或网站可以告诉我我的所有标签是否都已关闭等？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-30T16:41:51.047

[使用位于http://validator.w3.org/](http://validator.w3.org/)的 W3C 标记验证器服务

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T16:41:37.733

试试 HTML Tidy。还有一个firefox插件版本

如果您在浏览器中工作很多并且不想来回跳到 w3 学校，这是一个不错的选择，但是就像评论的每个人所说的那样，验证器也很好。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-30T17:14:05.820

出于兴趣，我将指出[validator.nu](http://validator.nu/)比 W3C 验证器更适合检查 HTML4。假设您的标记是这样的：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" 
                 "http://www.w3.org/TR/html4/strict.dtd">
<html>
  <head>
    <meta content="Test" /
    <title>Test Case</title>
  </head>
  <body>
    <p></p>
  </body>
</html> 
```

该`<meta>`元素显然没有在应有的位置关闭，结果是该`<title>`元素将无法在浏览器中被识别。

但是将该标记提供给 W3C 验证器，它会告诉您它已验证。这是因为它基于 SGML 处理，该处理允许一种称为 Null End Tag (NET) 语法的语法，这使得它认为`/`结束标记。

浏览器不支持 NET 语法，validator.nu 也不支持，因此正确地将标记标记为错误。

对于 HTML5，两个验证器都很好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-04-08T11:00:54.240

[本网站](https://www.aliciaramirez.com/closing-tags-checker/)检查是否有未关闭的标签，并告诉您哪些未关闭，以及它们所属的行

# sql - SQLite：使用 COUNT 和 GROUP BY 加速 SQL 语句

> ID：13143725
> 
> 赞同：3
> 
> 时间：2012-10-30T16:40:39.883
> 
> 标签：sql, performance, sqlite, optimization

我正在使用带有“状态”列的表，它通常只包含 2 或 3 个不同的值。有时，当这个表包含几百万行时，下面的 SQL 语句会变慢（我假设完成了全表扫描）：

```
SELECT state, count(*) FROM mytable GROUP BY state 
```

我希望得到这样的东西：

```
disabled |  500000
enabled  | 2000000 
```

（基本上我想知道有多少项目被“启用”以及有多少项目被“禁用” - 实际上这是一个数字而不是我实际应用程序中的文本）

我想为我的状态列添加索引是没有用的，因为在那里只能找到很少的不同值。我还有什么其他选择？

还有一个“时间戳”列（带有索引）。理想情况下，如果我添加，该解决方案也应该可以正常工作：

```
WHERE timestamp BETWEEN x AND y 
```

现在我正在使用 SQLite3 数据库，但看起来其他数据库引擎并没有太大的不同，因此其他数据库引擎的解决方案也可能很有趣。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T17:49:41.060

我会在时间戳，状态（按该顺序）上放置一个覆盖索引。理由是：

*   时间戳上的条件将比状态更具选择性

*   如果状态还在索引中（即覆盖索引），引擎只需要对索引本身进行范围扫描（无需支付随机I/O来访问表的主要数据）。

注意：如果时间戳范围太宽，尽管有索引，它也会变慢。因为随机 I/O 比顺序 I/O 更昂贵，所以索引范围扫描会比表扫描更昂贵。根据经验，如果您需要扫描超过 10% 的表，引擎应该考虑保持表扫描并忽略索引。我注意到 sqlite 足够聪明，可以支持这种优化。

# asp.net-web-api - WebAPI：访问子容器作为服务定位器

> ID：13143727
> 
> 赞同：1
> 
> 时间：2012-10-30T16:40:47.630
> 
> 标签：asp.net-web-api, unity-container, ioc-container, service-locator

[在普通的 ASP.MVC 项目中，我们使用 Unity 和来自http://unitymvc3.codeplex.com/](http://unitymvc3.codeplex.com/)的 Unity.Mvc3 包配置依赖解析器

[我们已经向HierarchicalLifetimeManager](http://msdn.microsoft.com/en-us/library/microsoft.practices.unity.hierarchicallifetimemanager%28v=pandp.20%29.aspx)注册了这个测试服务

```
container.RegisterType<ITestService, TestService>(new HierarchicalLifetimeManager()); 
```

我们将容器与 Global.asax.cs 中的 Mvc 连接起来：

```
System.Web.Mvc.DependencyResolver.SetResolver(new Unity.Mvc3.UnityDependencyResolver(container)); 
```

我们运行这个测试控制器：

```
public class TestController : Controller
{
    private readonly ITestService _service;
    public TestController(ITestService service)
    {
        this._service = service;
    }
    public ActionResult Test()
    {
        var locatedService = System.Web.Mvc.DependencyResolver.Current.GetService<ITestService>();
        if (_service == locatedService)
            return View("Success - Same Service");//This is always the result in an MVC controller
        else
            throw new Exception("Failure - Different Service Located");//This is never the result in an MVC controller
    }
} 
```

然而，在这个项目中，我们添加了一些 WebAPI 控制器。

我们在 global.asax.cs 中有这个配置（现在使用[http://unitywebapi.codeplex.com/](http://unitywebapi.codeplex.com/)。但我愿意接受建议）：

```
System.Web.Http.GlobalConfiguration.Configuration.DependencyResolver = new Unity.WebApi.UnityDependencyResolver(container); 
```

我们创建了一个`ApiTestController`类似于从`TestController`继承`ApiController`而不是从`Controller`。但是，ApiTestController 未通过测试。我知道`System.Web.Mvc.DependencyResolver`类和属`System.Web.Mvc.DependencyResolver.Current`​​性是特定于 Mvc 的。但是 WebAPI 有等价物吗？

`System.Web.Http.GlobalConfiguration.Configuration.DependencyResolver.GetService`不起作用，因为该`System.Web.Http.GlobalConfiguration.Configuration.DependencyResolver`实例是我配置的父容器。它不是用于将 ITestService 注入构造函数的子控制器。

这个用户似乎有类似的问题：[http](http://unitywebapi.codeplex.com/discussions/359413) : //unitywebapi.codeplex.com/discussions/359413 但我觉得这可能更多地与 ASP.NET 的 WebAPI 相关，而不是与 Unity 相关。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T17:54:14.057

在查看了[http://unitymvc3.codeplex.com/](http://unitymvc3.codeplex.com/)和[http://unitywebapi.codeplex.com/](http://unitywebapi.codeplex.com/)的源代码后，我创建了这个类：

```
public class MyUnityDependencyResolver : Unity.Mvc3.UnityDependencyResolver, System.Web.Http.Dependencies.IDependencyResolver
{
    public MyUnityDependencyResolver(IUnityContainer container)
        : base(container)
    {
    }

    public System.Web.Http.Dependencies.IDependencyScope BeginScope()
    {
        return this;
    }

    public void Dispose()
    {
        Unity.Mvc3.UnityDependencyResolver.DisposeOfChildContainer();
    }
} 
```

gobal.asax.cs 中的配置：

```
var myResolver = new MyUnityDependencyResolver(container);
System.Web.Mvc.DependencyResolver.SetResolver(myResolver);
System.Web.Http.GlobalConfiguration.Configuration.DependencyResolver = myResolver; 
```

`Unity.Mvc3.UnityDependencyResolver`用于`HttpContext.Current.Items`管理子容器。 `MyUnityDependencyResolver`可能不是最“正确”的实现`System.Web.Http.Dependencies.IDependencyResolver`，但到目前为止它似乎有效。

如果没有其他人有更好的答案，我会在几天内将此标记为答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T15:49:25.617

不幸的是，当您调用 GlobalConfiguration.Configuration.DependencyResolver.GetService 时，它​​会完全忽略任何范围并使用在应用程序生命周期内存在的外部非子容器进行解析。这是 Web Api 的一个问题，并且无法对控制器之外的每个请求的依赖项使用构造函数注入。正如您所说，令人困惑的是，这与 MVC 完全不同。

您可以做的是使用 HttpRequestMessage 的 GetDependencyScope() 扩展方法。将 HierarchicalLifetimeManager 与 Unity.WebApi 结合使用时，您使用此解决的任何问题都将在每个请求范围内。该请求可从操作过滤器和处理程序中获得，因此可能是一种可行的解决方法。

显然，这是纯粹的服务位置而不是依赖注入，这远非理想，但我还没有找到另一种方法来访问控制器之外的每个请求的依赖关系。

有关更多信息，请参阅[此帖子](http://www.strathweb.com/2012/11/asp-net-web-api-and-dependencies-in-request-scope/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T08:15:36.940

这`DependencyResolver`不是 ASP.NET WebAPI 中依赖注入的正确接缝。

Mark Seemann 有两篇关于使用 WebAPI 进行 DI 的非常好的文章。

[使用 ASP.NET Web API 进行依赖注入和生命周期管理](http://blog.ploeh.dk/2012/09/28/DependencyInjectionAndLifetimeManagementWithASPNETWebAPI.aspx)

[ASP.NET Web API 中的依赖注入与 Castle Windsor](http://blog.ploeh.dk/2012/10/03/DependencyInjectionInASPNETWebAPIWithCastleWindsor.aspx)

如果你想做对，你应该看看他们。

# java - 围绕特定点旋转（例如，围绕 0,0,0 旋转）

> ID：13143732
> 
> 赞同：2
> 
> 时间：2012-10-30T16:40:59.293
> 
> 标签：java, rotation, java-3d

我一直在搜索这个问题，但我真的找不到合适的答案。
我需要围绕给定点（例如，0,0,0）旋转圆柱体，但默认情况下给出圆柱体的枢轴。我该如何改变？

我找到[了这个](https://stackoverflow.com/questions/12746011/three-js-how-do-i-rotate-a-cylinder-around-a-specific-point)主题，这正是我想要做的，但我不知道如何用 java 来做。

为了更好地解释我想做的事情，我将展示 3 张图片。(v)

imageshack.us/photo/my-images/259/aintgood.jpg

imageshack.us/photo/my-images/840/whatineed.jpg

imageshack.us/photo/my-images/705/nogoodn.jpg

所以，第一张图片显示了我的基本问题，圆柱体的末端应该位于球体的中心，比如说（0,0,0）。用户给出两个角度。第一个用于 rotX 命令，第二个用于 rotZ 命令。圆柱体的枢轴位于其中心，因此，如图 3 所示，即使我平移圆柱体使其末端位于球体的中心，当它旋转时，整个物体都会毁掉。

图 2 显示了圆柱体-球体组的外观，无论给定角度。图像不是基于算法获得的，而是基于微积分的，并且是鼠标旋转的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T17:01:11.613

绕任意点 P 旋转的一般过程是：

1.  通过 -P 翻译（所以 P 在 (0, 0, 0) 处）
2.  绕原点旋转
3.  按 P 平移（将原点带回到 P 的原始位置）

最简单的方法是用[齐次坐标](http://en.wikipedia.org/wiki/Homogeneous_coordinates)表示一切，并用矩阵表示平移和旋转。组合上述三个变换（translate-rotate-translate）是通过矩阵乘法完成的。如果旋转由两个或多个更简单的旋转组成，那么旋转矩阵本身就是更简单旋转的矩阵的乘积。

# c# - 网格计算 API

> ID：13143735
> 
> 赞同：4
> 
> 时间：2012-10-30T16:41:10.617
> 
> 标签：c#, grid-computing

我想写一个分布式软件系统（你可以比在单个电脑上更快地执行程序的系统），它可以执行不同类型的程序。（因为它是一个学校项目，我可能会执行像 Prime finder 和 Pi 这样的程序计算器）

我的偏好是它应该使用 .NET 为 C# 编写，具有良好的文档，编写简单（在使用 .NET 的 C# 中不是新的，但我不专业）并且能够轻松地为网格编写任务和/或直接从 .exe 将程序加载到网络。

我看了一点：

1.  [MPAPI](http://mpapi.codeplex.com/)
2.  [利用](http://www.utilify.com/)（来自炼金术的制造商）
3.  [NGrid](http://ngrid.sourceforge.net/)（过时？）

哪一个最适合我的情况？你对他们有什么经验吗？

附言。我知道这里有很多类似的问题，但它们要么已经过时，没有正确的答案，要么没有回答我的问题，因此我选择再次提问。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T13:35:44.330

我刚刚联系了 Utilify 的创始人 (Krishna Nadiminti)，虽然目前积极的开发已经暂停，但他已经[在 Bitbucket 上](https://bitbucket.org/krishna_nadiminti/utilify/src/92970f557d30cc1a755e5b9cac4d3d03d7a76acf/src?at=master)发布了所有源代码。

我认为值得继续这个项目，因为目前还没有可比的替代品（甚至是商业的）。我可能会开始研究它，但不要等我:)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-26T18:47:37.073

遇到同样的问题。我试过 NGrid、Alchemi 和 MS PI.net。毕竟我决定开始我自己的开源项目来玩，在这里查看：http: [//lucygrid.codeplex.com/](http://lucygrid.codeplex.com/)。

更新：

查看 PI 示例的外观：传递给**AsParallelGrid**的函数将由网格节点执行。您可以使用它运行 DEMO 项目。

```
/// <summary>
/// Distributes simple const processing
/// </summary>
class PICalculation : AbstractDemo
{

    public int Steps = 100000;
    public int ChunkSize = 50;
    public PICalculation()
    {

    }

    override
    public string Info()
    {
        return "Calculates PI over the grid.";
    }

    override
    public string Run(bool enableLocalProcessing)
    {
        double sum = 0.0;
        double step = 1.0 / (double)Steps;
        /* ORIGINAL VERSION
        object obj = new object();

        Parallel.ForEach(
            Partitioner.Create(0, Steps),
            () => 0.0,
            (range, state, partial) =>
            {
                for (long i = range.Item1; i < range.Item2; i++)
                {
                    double x = (i - 0.5) * step;
                    partial += 4.0 / (1.0 + x * x);
                }
                return partial;
            },
            partial => { lock (obj) sum += partial; });
        */
        sum = Enumerable
            .Range(0, Steps)
            // Create bucket
            .GroupBy(s => s / 50)
            // Local variable initialization is not distributed over the grid
            .Select(i => new 
            {
                Item1 = i.First(),
                Item2 = i.Last() + 1, // Inclusive
                Step = step
            })
            .AsParallelGrid(data =>
            {
                double partial = 0;
                for (var i = data.Item1; i != data.Item2 ; ++i)
                {
                    double x = (i - 0.5) * data.Step;
                    partial += (double)(4.0 / (1.0 + x * x));
                }
                return partial;
            }, new GridSettings()
            {
                EnableLocalProcessing = enableLocalProcessing
            })
            .Sum() * step;
        return sum.ToString();

    }
} 
```

# html - IE上的css按钮

> ID：13143743
> 
> 赞同：0
> 
> 时间：2012-10-30T16:41:26.313
> 
> 标签：html, css, internet-explorer, firefox, browser

我想`type="submit"`用一个带有悬停图像的图像和：活动图像制作一个登录按钮，它在**Firefox**和 chrome 上工作正常，但在**Internet Explorer**上它只提供基本图像而不是悬停图像和活动图像。除此之外，当你点击它时，它会在按钮上画一条虚线。

**它如何在 IE 上显示：**

[http://imageshack.us/photo/my-images/72/ieproblem.jpg/](http://imageshack.us/photo/my-images/72/ieproblem.jpg/)

它如何在 chrome 和 firefox 上显示：

[http://imageshack.us/photo/my-images/685/chromes.jpg/](http://imageshack.us/photo/my-images/685/chromes.jpg/)

```
.button
 {
    border:none;
    background: url(../img/login.jpg);
    width:41px;height:19px;
   }
    .button:hover 
        {
        background: url(../img/loginhover.jpg)  no-repeat top left;
        width: 41px;
        height: 19px;
        }

 .button:active {

 background: url(../img/loginactive.jpg);
   } 
```

HTML上的按钮代码：

```
<input type="submit" class="button" value=""/> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T16:44:09.190

如果您使用的是早期版本的 IE，则 :hover 会出现问题。

如果您使用的是 ie7 >

您需要将 href 添加到您的锚点，否则 :hover 不会被 IE 拾取：

并删除轮廓，您可以尝试

```
a {
   outline: 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T16:44:01.313

我相信这是由`outline`IE 中的属性引起的。

查看[http://css-tricks.com/removing-the-dotted-outline/](http://css-tricks.com/removing-the-dotted-outline/)了解有关如何删除它的一些提示。

```
a {
   outline: 0;
} 
```

或者将`outline`样式应用于其他元素。

# jquery - 如果检查 jQuery 插件是否已经绑定到 DOM 节点，你怎么知道？

> ID：13143745
> 
> 赞同：28
> 
> 时间：2012-10-30T16:41:26.687
> 
> 标签：jquery, jquery-plugins

大多数 jQuery 插件在您第一次初始化它们时都绑定/绑定到 DOM 节点。

```
$('#foo').bar({options: ...}); 
```

如何查看当前绑定到 DOM 节点的插件或对象`#foo`？

```
if($('#foo').bar)
if($.inArray('bar', $('#foo').eq(0)))
if($('#foo').eq(0).indexOf('bar'))
if($('#foo').hasOwnProperty('bar')) 
```

例如，可以将事件绑定到这样的对象

```
console.log($('#foo').data('events')); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-30T17:08:00.050

除非插件本身定义了某种方式来改变它正在处理的元素，否则这是不可能的。例如：

```
$.fn.extend({
  foo: function() { console.log("I am foo!"); }
});

$('#bar').foo(); 
```

在这里，我定义了一个完整的（嗯，more-o-less）jQuery 插件，它甚至不尝试与其调用元素进行交互。不过，您可以在任何 jQuery 包装的元素集合上随意使用它，因为任何 jQuery 包装的元素集合在其原型中*都有*`jquery.js`此方法，因为这行（来自）：

```
jQuery.fn = jQuery.prototype = { ... } 
```

...在`$.fn.extend`被调用插入该插件之后，没有双关语。

但即使我的插件需要以某种方式更改其调用元素，如下所示：

```
$.fn.extend({
  bar: function() { this.html('I am all bar now!'); }
});
$('#bar').bar(); 
```

...我仍然需要，基本上，用一些外部事件（DOM 突变事件）来处理这个，而不仅仅是依赖于一些内部 jQuery 日志记录。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-30T17:42:28.407

就我而言，我试图检测的插件恰好将一些数据添加到元素`$(element).data()`存储中。我还看到插件添加类或 ID 并带有它们的名称 - 或在其中更改它们的名称。

以下是我目前正在使用的解决此问题的代码。可能不适用于大多数插件。

```
$.fn.extend({
    isPluginBound: function(pluginName)
    {
        if(jQuery().pluginName)
        {
            var name = pluginName.toLowerCase();

            return this.data(pluginName) || this.data(name)
                || this.attr('class').toLowerCase().indexOf(name) !== -1 // vs hasClass()
                || this.attr('id').toLowerCase().indexOf(name) !== -1;
        }
    }
}); 
```

要使用它，只需调用`$('#foo').isPluginBound('bar');`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-30T17:57:51.830

据我所知，所有 jQuery 小部件都将它们的实例附加到它们的 DOM 节点。我在我的项目中使用以下扩展。在您不知道名称的小部件上调用方法也很有用（例如，调用扩展小部件的基本方法）

```
// returns first found widget instance of the first element or calls method on first widget instance of all elements
$.fn.widget = function ( method , option, value ) { 
  var wi;
  // iterate all elements 
  this.each( function() {
    var wii;
    // iterate all attached data elements, look for widget instances
    $.each( $(this).data(), function( key, data ){ 
      if ( "widgetName" in data ){ wii = data; return false } 
    })
    // if there is a widget instance but no method specified
    if ( wii && !method ) {
      wi = wii;
      return false
    }
    // if there is a widget and there is an object found with the method as the key
    else if ( wii && ( method in wii ) ) {
      // if it is truly a method of that instance, call that instance
      if ( $.isFunction( wii[method] ) ) {
        wi = wii[method].call( wii, option, value )
      } 
      // else, it is maybe a value stored in the instance you seek?
      else {
        wi = wii[method]
      }
    }
  })
  return ( wi === undefined ) ? this : wi ;
} 
```

# postgresql - 填充表格时出现多行错误

> ID：13143756
> 
> 赞同：1
> 
> 时间：2012-10-30T16:41:57.863
> 
> 标签：postgresql, postgis

我已经使用*create table*和这些列创建了一个表：

```
create table myschema.mytable(
    id serial PRIMARY KEY, 
    row_num integer, 
    col_num integer, 
    pix_centroid geometry, 
    pix_val double precision
) 
```

当我试图填充它时：

```
insert into pixelbased (id, row_num, col_num, pix_centroid, pix_val)
values (
    DEFAULT, 
    (select((ST_PixelAsPolygons(rast, 1)).x)  from mytable where rid=3),  
    (select((ST_PixelAsPolygons(rast, 1)).x)  from mytable where rid=3), 
    (select(ST_Centroid((ST_PixelAsPolygons(rast, 1)).geom)) from rwanda8 where rid=3),
    (select(ST_PixelAsPolygons(rast, 1)).val from mytable where rid=3)
) 
```

我遇到以下错误：

**错误：用作表达式的子查询返回多行。**

我知道，由于我的每一列都有不止一行，所以出现这样的错误是有道理的。但我真的需要按照上述计算所有列。有谁知道我该怎么办？事实上，我想在表中插入以下查询的结果：

```
select 
    (ST_PixelAsPolygons(rast, 1)).val as geomval1, 
    (ST_PixelAsPolygons(rast, 1)).x as X, 
    (ST_PixelAsPolygons(rast, 1)).y as Y, 
    (ST_Centroid((ST_PixelAsPolygons(rast, 1)).geom)) as geom 
from rwanda8 
where rid=3 
```

有谁知道我该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T16:46:07.723

您的子查询之一返回超过 1 行。所以使用`LIMIT 0,1`or 东西来获得每个子查询只有一个值。

如果每列需要超过 1 个值，则应检查插入算法并使用游标。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-30T16:49:52.817

只需使用`select`查询而不是`values`

```
insert into pixelbased (row_num, col_num, pix_centroid, pix_val)
select
    (ST_PixelAsPolygons(rast, 1)).val as geomval1,
    (ST_PixelAsPolygons(rast, 1)).x as X,
    (ST_PixelAsPolygons(rast, 1)).y as Y,
    (ST_Centroid((ST_PixelAsPolygons(rast, 1)).geom)) as geom
from rwanda8 where rid=3 
```

不要插入 id，因为它是序列号，会自行生成。

# c# - 当我有超过 2 列时，我怎样才能变得与众不同？

> ID：13143757
> 
> 赞同：0
> 
> 时间：2012-10-30T16:41:58.270
> 
> 标签：c#, linq

在我的实体中，如果我想要所有带有不同 D 的列，我有 4 列 A、B、C、D，我该怎么做`Linq`？例如：

```
Col A =1  Col B=2  Col C=3  Col D=4
Col A =1  Col B=2  Col C=9  Col D=4 
```

现在，当我在 Col D 上做不同时，我想显示其中一个记录而不是两者。有没有办法做到这一点，`Linq`我不想使用循环语句来做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T17:02:12.487

```
void Main()
{
    //Your provided sample data
    IEnumerable<Item> data = new Item[]
    {
        new Item{ A = 1, B = 2, C = 3, D = 4 },
        new Item{ A = 1, B = 2, C = 9, D = 4 },
    };

    //Create a custom comparer for distinct'ing
    CustomComparer comparer = new CustomComparer();

    //Use the overload for distinct
    IEnumerable<Item> distinctData = data.Distinct(comparer);

    //Now we have a distinct list according to your comparer
    foreach (var element in distinctData)
    {
        Console.WriteLine(element.C.ToString()); // => 3
    }
}

//sample class that holds your data
class Item
{
    public int A  { get; set; }
    public int B  { get; set; }
    public int C  { get; set; }
    public int D  { get; set; }
}

class CustomComparer : IEqualityComparer<Item>
{
   public bool Equals(Item x, Item y)
   {
       return x.D == y.D;
   }

   public int GetHashCode(Item obj)
   {
       return obj.D;
   }
} 
```

你确定你不想写那个简单的循环:-)

# c++ - 解决 C++“赋值目标不是真正的左值”错误

> ID：13143758
> 
> 赞同：4
> 
> 时间：2012-10-30T16:42:01.363
> 
> 标签：c++, compiler-construction, casting

鉴于此代码：

```
void FrMemCopy(void *to, const void *from, size_t sz)
{
    size_t sz8 = sz >> 3;
    size_t sz1 = sz - (sz8 << 3);

    while (sz8-- != 0) {
        *((double *)to)++ = *((double *)from)++;
    }

    while (sz1-- != 0) {
        *((char *)to)++ = *((char *)from)++;
    }
} 
```

我在循环`target of assignment not really an lvalue`内的 2 行收到警告。`while`

任何人都可以分解这些线吗？

一个演员然后一个增量？

有什么更简单的写法？

错误是什么意思？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T16:51:55.497

它不喜欢这种`*((char*)to)++`说法。

尝试这个：

```
void FrMemCopy(void *to, const void *from, size_t sz)
{
    size_t sz8 = sz >> 3;
    size_t sz1 = sz - (sz8 << 3);
    double * tod = (double *) to;
    double * fromd = (double *) from;
    while (sz8-- != 0) {
        *(tod++) = *(fromd++);
    }

    char * toc = (char *) tod;
    char * fromc = (char *) fromd;
    while (sz1-- != 0) {
        *(toc++) = *(fromc++);
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-30T16:55:37.530

您不能应用于强制`++`转换的结果，只能应用于左值（变量）。因此，您需要为增量创建具有适当类型的新变量：

```
void FrMemCopy(void *to, const void *from, size_t sz)
{
    size_t sz8 = sz >> 3;
    size_t sz1 = sz - (sz8 << 3);

    double *to1 = (double *)to;
    double *from1 = (double *)from
    while (sz8-- != 0) {
        *to1++ = *from1++;
    }

    char *to2 = (char *)to1;
    char *from2 = (char *)from1;
    while (sz1-- != 0) {
        *to2++ = *from2++;
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-30T16:57:33.197

在这种情况下，显式类型转换的结果是**右值**- 根据 C++11 标准的 5.4.1。您不能将[增量运算符](http://en.cppreference.com/w/cpp/language/operator_incdec)应用于右值，它应该是左值。有关详细信息，请参阅[C++ 值类别](http://en.cppreference.com/w/cpp/language/value_category)。

使用临时变量来获得所需的效果：

```
double* to_dbl = static_cast<double*>(to);
double* from_dbl = static_cast<double*>(from);

while(sz8-- != 0)
{
    *(to_dbl++) = *(from_dbl++);
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-30T16:53:37.340

我试图以不出现警告的方式重写它：

```
void FrMemCopy(void *to, const void *from, size_t sz)
{
    size_t sz8 = sz >> 3;
    size_t sz1 = sz - (sz8 << 3);

    double *xto = (double *)to;
    double *xfrom = (double *)from;
    while (sz8-- != 0) {
        *xto++ = *xfrom++;
    }

    char *cto = (char *)to;
    char *cfrom = (char *)from;
    while (sz1-- != 0) {
        *cto++ = *cfrom++;
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-30T16:49:15.313

您正在对 LValue（赋值运算符的左侧值）执行递增操作。从逻辑上和定义上讲，LValue 必须始终是一个变量。它不能是一个常数。当您执行增量操作时，它会在左侧留下一个常数值，这会给您带来错误。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-30T17:38:29.200

首先在回答之前让我说：不要尝试对编译器/库进行微优化。编译器编写者将在 100 次中赢得 99 次。使用`std::copy`或`memcpy`取决于您正在复制和需要的类型。

其他答案指出，您可以使用临时变量解决即时编译错误。

我不建议在任何情况下执行以下操作，但我相信您*也*可以通过转换为引用类型来完成此操作：

```
void FrMemCopy(void *to, const void *from, size_t sz)
{
    size_t sz8 = sz >> 3;
    size_t sz1 = sz - (sz8 << 3);

    while (sz8-- != 0) {
        *((double *&)to)++ = *((double *&)from)++;
    }

    while (sz1-- != 0) {
        *((char *&)to)++ = *((char *&)from)++;
    }
} 
```

# jquery - Greasemonkey (userscript) 防止链接点击 ajax 帖子

> ID：13143766
> 
> 赞同：0
> 
> 时间：2012-10-30T16:42:26.880
> 
> 标签：jquery, greasemonkey, userscripts

当用户单击链接时，我试图阻止 AJAX 发布。

到目前为止，我有这个，但 preventDefault() 不起作用：

```
$('.link-class').live('click', function (event) { 
    console.log("live----Stopped?!?!"); 
    event.preventDefault(); 
    return false; 
 }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T18:08:21.643

可能发生的事情太多，链接到目标页面。

一般来说，如果拦截`click`不起作用，请尝试拦截`mousedown`，`mouseup`因为某些页面会触发这些页面。

```
$('.link-class').live ('click mousedown mouseup', function (event) { 
    console.log ("live----Stopped?!?!"); 
    event.preventDefault (); 
    return false; 
 } ); 
```

# css - 试图将在 purecssmenu.com 上制作的 CSS 菜单居中

> ID：13143768
> 
> 赞同：-1
> 
> 时间：2012-10-30T16:42:43.537
> 
> 标签：css, menu, alignment, center

我有一个在 purecssmenu.com 上生成的菜单，但我无法将其放在我的页面中心，这是代码...

```
<!-- Start PureCSSMenu.com STYLE -->
        <style>
        #pcm{display:none;}
        ul.pureCssMenu ul{display:none}
        ul.pureCssMenu li:hover>ul{display:block}
        ul.pureCssMenu ul{position: absolute;left:-1px;top:98%;}
        ul.pureCssMenu ul ul{position: absolute;left:98%;top:-2px;}
        ul.pureCssMenu,ul.pureCssMenu ul {
            margin:0px;
            list-style:none;
            padding:0px 2px 2px 0px;
            background-color:#000000;
            background-repeat:repeat;
            border-color:#000000;
            border-width:1px;
            border-style:solid;
        }
        ul.pureCssMenu table {border-collapse:collapse}ul.pureCssMenu {
            display:block;
            zoom:1;
            float: left;
        }
        ul.pureCssMenu ul{
            width:80.85000000000001px;
        }
        ul.pureCssMenu li{
            display:block;
            margin:2px 0px 0px 2px;
            font-size:0px;
        }
        ul.pureCssMenu a:active, ul.pureCssMenu a:focus {
        outline-style:none;
        }
        ul.pureCssMenu a, ul.pureCssMenu li.dis a:hover, ul.pureCssMenu li.sep a:hover {
            display:block;
            vertical-align:middle;
            background-color:#000000;
            border-width:1px;
            border-color:#000000;
            border-style:solid;
            text-align:left;
            text-decoration:none;
            padding:2px 5px 2px 10px;
            _padding-left:0;
            font:11px Arial;
            color: #969696;
            text-decoration:none;
            cursor:default;
        }
        ul.pureCssMenu span{
            overflow:hidden;
        }
        ul.pureCssMenu li {
            float:left;
        }
        ul.pureCssMenu ul li {
            float:none;
        }
        ul.pureCssMenu ul a {
            text-align:left;
            white-space:nowrap;
        }
        ul.pureCssMenu li.sep{
            text-align:left;
            padding:0px;
            line-height:0;
            height:100%;
        }
        ul.pureCssMenu li.sep span{
            float:none; padding-right:0;
            width:3px;
            height:100%;
            display:inline-block;
            background-color:#cccccc #111111 #111111 #cccccc;   background-image:none;}
        ul.pureCssMenu ul li.sep span{
            width:100%;
            height:3px;
        }
        ul.pureCssMenu li:hover{
            position:relative;
        }
        ul.pureCssMenu li:hover>a{
            background-color:#000000;
            border-color:#000000;
            border-style:solid;
            font:11px Arial;
            color: #ffa500;
            text-decoration:none;
        }
        ul.pureCssMenu li a:hover{
            position:relative;
            background-color:#000000;
            border-color:#000000;
            border-style:solid;
            font:11px Arial;
            color: #ffa500;
            text-decoration:none;
        }
        ul.pureCssMenu li.dis a {
            color: #666 !important;
        }
        ul.pureCssMenu img {border: none;float:left;_float:none;margin-right:2px;width:16px;
        height:16px;
        }
        ul.pureCssMenu ul img {width:16px;
        height:16px;
        }
        ul.pureCssMenu img.over{display:none}
        ul.pureCssMenu li.dis a:hover img.over{display:none !important}
        ul.pureCssMenu li.dis a:hover img.def {display:inline !important}
        ul.pureCssMenu li:hover > a img.def  {display:none}
        ul.pureCssMenu li:hover > a img.over {display:inline}
        ul.pureCssMenu a:hover img.over,ul.pureCssMenu a:hover ul img.def,ul.pureCssMenu a:hover a:hover img.over{display:inline}
        ul.pureCssMenu a:hover img.def,ul.pureCssMenu a:hover ul img.over,ul.pureCssMenu a:hover a:hover img.def{display:none}
        ul.pureCssMenu a:hover ul{display:block}
        ul.pureCssMenu span{
            display:block;
            background-image:url(./images/arr_white.gif);
            background-position:right center;
            background-repeat: no-repeat;
           padding-right:12px;}
        ul.pureCssMenu li:hover>a>span{ background-image:url(./images/arrv_white.gif);
        }
        ul.pureCssMenu a:hover span{    _background-image:url(./images/arrv_white.gif)}
        ul.pureCssMenu ul span,ul.pureCssMenu a:hover table span{background-image:url(./images/arr_white.gif)}
        </style>
<!-- End PureCSSMenu.com STYLE --> 
```

这是 html，在这篇文章中可能甚至不需要女巫，但我想我会包括它.. 我只希望该菜单位于我的网站中心。

```
<!-- Start PureCSSMenu.com MENU -->
<ul class="pureCssMenu pureCssMenum">
    <li class="pureCssMenui"><a class="pureCssMenui" href="home.html" target="scare">home</a></li>
    <li class="pureCssMenui"><a class="pureCssMenui" href="#">about</a></li>
    <li class="pureCssMenui"><a class="pureCssMenui" href="#"><span>haunts</span><![if gt IE 6]></a><![endif]><!--[if lte IE 6]><table><tr><td><![endif]-->
    <ul class="pureCssMenum">
        <li class="pureCssMenui"><a class="pureCssMenui" href="#">2009</a></li>
        <li class="pureCssMenui"><a class="pureCssMenui" href="#">2010</a></li>
        <li class="pureCssMenui"><a class="pureCssMenui" href="#">2011</a></li>
        <li class="pureCssMenui"><a class="pureCssMenui" href="#">2012</a></li>
    </ul>
    <!--[if lte IE 6]></td></tr></table></a><![endif]--></li>
    <li class="pureCssMenui"><a class="pureCssMenui" href="#">studio</a></li>
    <li class="pureCssMenui"><a class="pureCssMenui" href="#"><span>products</span><![if gt IE 6]></a><![endif]><!--[if lte IE 6]><table><tr><td><![endif]-->
    <ul class="pureCssMenum">
        <li class="pureCssMenui"><a class="pureCssMenui" href="#">nightmares</a></li>
        <li class="pureCssMenui"><a class="pureCssMenui" href="#">hauntworks</a></li>
        <li class="pureCssMenui"><a class="pureCssMenui" href="#">atmosfears</a></li>
        <li class="pureCssMenui"><a class="pureCssMenui" href="#">frightwears</a></li>
    </ul>
    <!--[if lte IE 6]></td></tr></table></a><![endif]--></li>
    <li class="pureCssMenui"><a class="pureCssMenui" href="#"><span>links</span><![if gt IE 6]></a><![endif]><!--[if lte IE 6]><table><tr><td><![endif]-->
    <ul class="pureCssMenum">
        <li class="pureCssMenui"><a class="pureCssMenui" href="#">haunts</a></li>
        <li class="pureCssMenui"><a class="pureCssMenui" href="#">suppliers</a></li>
        <li class="pureCssMenui"><a class="pureCssMenui" href="#">resources</a></li>
    </ul>
    <!--[if lte IE 6]></td></tr></table></a><![endif]--></li>
    <li class="pureCssMenui"><a class="pureCssMenui" href="#">contact</a></li>
</ul>
<a id="pcm" href="http://www.purecssmenu.com/">CSS Drop Down Menu by PureCSSMenu.com</a>
<!-- End PureCSSMenu.com MENU --> 
```

在此先感谢您的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T16:56:22.730

用 div 包围它，然后将 div 居中。

```
<div class="table"> 
```

然后将以下内容添加到您的CSS

```
.table {
    display: table;   /* Allow the centering to work */
    margin: 0 auto;
} 
```

请参阅工作示例。 [http://jsfiddle.net/uh2Jt/3/](http://jsfiddle.net/uh2Jt/3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T16:58:38.330

只是设置：

```
ul.pureCssMenu,ul.pureCssMenu ul {
    margin:0 auto;
} 
```

不起作用，因为它看起来菜单的位置设置为`absolute`. 而不是弄乱菜单的代码，你可以把它放在一个包装器 div 中，如下所示：

```
<div class="menuWrapper">
    all the html for the menu
</div> 
```

然后使用这个 CSS，无论宽度适合你：

```
.menuWrapper{
    margin: 0 auto;
    width: 400px;
} 
```

在此处查看示例：http: [//jsfiddle.net/mCmfU/](http://jsfiddle.net/mCmfU/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T16:45:14.253

```
ul.pureCssMenu,ul.pureCssMenu ul {
    margin:0 auto;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-30T16:53:07.240

这是一个解决方案。我发现的问题`.pureCssMenu`是`floated left`. 我只是覆盖了它，所以你可以看到它发生在哪里。不过，正确编辑 css 可能是一个更好的主意，如果你不明白，请告诉我，我会解释更多。还把它包裹在一个`div (.centerme)`with`text-align: center;`

**[http://jsfiddle.net/nYbcW/](http://jsfiddle.net/nYbcW/)**

```
.centerme{
    text-align: center;
}
ul.pureCssMenu {
    float: none !important;
    display: inline-block !important;
    text-align:center
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-30T17:11:08.047

这是您可以获得的最简单的方法：

```
ul.pureCssMenu,ul.pureCssMenu ul {
    margin:0 auto;
    float: none;
    height: 25px;
    width: 25%;
} 
```

只需根据您的需要调整宽度和高度。

**注意：**您可以将这段代码添加到样式的底部，这样您就无需费心寻找它。

# ajax - 使用 Grails Controller 代理 AJAX 请求

> ID：13143773
> 
> 赞同：3
> 
> 时间：2012-10-30T16:42:55.327
> 
> 标签：ajax, grails, cross-domain

我有一个 Javascript 组件，当加载 DOM 时，它需要向我们的 CDN（*可能*位于不同的域）发送请求，以查看该组件是否有内容。如果有，该组件将自实例化（它是一个在模态中打开嵌入视频的链接），如果没有，它将自毁。我的问题主要是关于我用来代理 AJAX 请求的 Grails 控制器。

这是伪代码中的JS：

```
checkForVideoAssets: function(videoDataUrl){
    Ajax.get(videoDataUrl, function(data){
    if(data.responseText==='error'){
    //tear down the component
    }
    else{
    //if there is data for the video instantiate the component
    } 
```

这是 Grails 控制器：

```
def checkForModalVideoAsset = {
    def req = new URL("http://" + params.videoUrl + "/expense/videos/")
    def connection = req.openConnection()

    if(connection.responseCode != 200){
        render 'error'
    }

    if(connection.responseCode == 200){
        render req.getText()
    }
} 
```

因此，总而言之，JS 从 DOM 中获取包含 URL 一部分（我们按照约定定义）的属性，将该 URL 发送到控制器，控制器尝试连接到该 URL（在我们的 CDN 上），然后将该响应传递回 XHR 对象的 responseText 部分内的 AJAX 成功回调。这对我来说感觉不太理想，是否可以将实际响应传回 JS 函数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T01:06:00.747

httpbuilder可能对你[有用](http://groovy.codehaus.org/modules/http-builder/doc/get.html)

我从未尝试过，但类似的东西！？

```
def checkForModalVideoAsset = {

    def http = new HTTPBuilder("http://" + params.videoUrl )

    http.get( 
          path : "/expense/videos/",
          contentType : TEXT ) { resp, reader -> 
             response.properties=resp.properties //<-- to easy to work but why not try :)
             response << resp
             }
    } 
```

# assembly - 如何不等待就读取密钥，程序集 8086

> ID：13143774
> 
> 赞同：4
> 
> 时间：2012-10-30T16:42:59.080
> 
> 标签：assembly, keyboard, x86-16, keystroke

我正在Assembly 8086 中制作一个太空入侵者，用于测试我正在使用DOSBox。让我向您展示我的代码：

```
;--------------------
;Update hero
;--------------------
update:
call vsync
call update_hero ; method to read keyboard
call set_video
call clear_screen
call draw_hero
jmp update 
```

现在程序 update_hero 是：

```
update_hero proc
     mov ah, 01h
     int 16h
     cmp al, 97
     je left_pressed
     cmp al, 100
     jne none_pressed
     inc hero_x
     left_pressed:
          dec hero_x
     none_pressed:
     ret
update_hero endp 
```

如您所见，我正在尝试为运动读取“a”或“d”，但是，它不起作用，您能帮我找出原因吗？

我正在尝试做的是从键盘读取而不等待它，这就是我使用 subfunction 的原因`ah, 01h`。

干杯。

**编辑**

[我在这里](http://www.ctyme.com/intr/int-16.htm)检查了中断，修改了代码，现在它可以工作了：

```
update_hero proc
    mov ah, 01h ; checks if a key is pressed
    int 16h
    jz end_pressed ; zero = no pressed

    mov ah, 00h ; get the keystroke
    int 16h

    begin_pressed:
        cmp al, 65
        je left_pressed
        cmp al, 97
        je left_pressed
        cmp al, 68
        je right_pressed
        cmp al, 100
        je right_pressed
        cmp al, 81
        je quit_pressed
        cmp al, 113
        je quit_pressed
        jmp end_pressed
        left_pressed:
            sub hero_x, 2
            jmp end_pressed
        right_pressed:
            add hero_x, 2
            jmp end_pressed
        quit_pressed:
            jmp exit
    end_pressed:

    ret
update_hero endp 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T17:26:57.740

您只是在检查是否有可用的字符，但实际上并没有从缓冲区中读取字符。因此，下次您检查时，它仍然存在。

从这个关于 BIOS 功能的页面[http://webpages.charter.net/danrollins/techhelp/0230.HTM](http://webpages.charter.net/danrollins/techhelp/0230.HTM)

INT 16H，AH=1

```
Info: Checks to see if a key is available in the keyboard buffer, and
      if so, returns its keycode in AX.  It DOES NOT remove the
      keystroke from the buffer. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-12T12:04:41.110

check_key：

```
mov     ah, 1

int     16h

jz      .ret 

mov     cx, 0

xor     cl, ch

mov     ah, 0

int     16h

.new.key: 
```

"al" 是新的 key presh

```
.ret:

 ret 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-27T07:08:14.950

```
update_hero proc
 mov ah, 01h
 int 16h
 cmp al, 97
 je left_pressed
 cmp al, 100
 jne none_pressed
 inc hero_x

ret ; without the ret instruction "hero_x" will be decrease after increasing

 left_pressed:
      dec hero_x
 none_pressed:
 ret
update_hero endp 
```

# wso2 - wso2 身份服务器多因素身份验证错误

> ID：13143776
> 
> 赞同：1
> 
> 时间：2012-10-30T16:43:02.997
> 
> 标签：wso2, wso2carbon, wso2is

我无法实现 Multifactor Authentication 。

我得到的错误是

```
TID: [0] [WSO2 Identity Server] [2012-10-30 10:31:38,620] ERROR     {org.wso2.carbon.identity.provider.xmpp.MPAuthenticationProvider} -  login failed. Trying     again.. {org.wso2.carbon.identity.provider.xmpp.MPAuthenticationProvider}
SASL authentication failed: 
    at org.jivesoftware.smack.SASLAuthentication.authenticate    (SASLAuthentication.java:209)
    at org.jivesoftware.smack.XMPPConnection.login(XMPPConnection.java:341)
    at org.jivesoftware.smack.XMPPConnection.login(XMPPConnection.java:301) 
```

这适用于 wso2 Identity Server 3.2.3 。直接开箱即用。没有执行额外的配置来运行这个 Identity Server 实例。

似乎以 admin 身份登录，ldap 身份验证已完成，然后在发生错误时尝试使用 gtalk 进行身份验证。

我应该在设置 gtalk 的 identity.xml 中设置自己的配置吗？

```
<MultifactorAuthentication>

    <XMPPSettings>

        <XMPPConfig>

            <XMPPProvider>gtalk</XMPPProvider>

            <XMPPServer>talk.google.com</XMPPServer>

            <XMPPPort>5222</XMPPPort>

            <XMPPExt>gmail.com</XMPPExt>

            <XMPPUserName>multifactor1@gmail.com</XMPPUserName>

            <XMPPPassword>wso2carbon</XMPPPassword>

        </XMPPConfig>

    </XMPPSettings>

</MultifactorAuthentication> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T13:09:28.933

我发现我确实需要设置一个 Google Talk 帐户。

1.  我将新设置添加到 MultifactorAuthentication 配置中。

2.  我重新启动了服务器。

3.  我用另一个新的 Google Talk 帐户编辑​​了用户帐户。

4.  我退出了。

5.  使用 openid 通过依赖方 URL 重新登录，

6.  通过 gtalk 请求 pin 接收到通信。

7.  我输入了密码并登录。

如果 wso2 有我的文档需要为此配置设置设置以使多因素身份验证开箱即用，那就太好了。

# pointers - 如何将对指针的引用转换为指向指针的指针

> ID：13143778
> 
> 赞同：0
> 
> 时间：2012-10-30T16:43:07.320
> 
> 标签：pointers, reference, casting, double, memory-address

我有一个指向 X 对象的指针 void* p。如何制作指向 p 指针的 void** p2 指针？我想这样做的原因是 X 对象的位置在重新映射后可能会改变，所以我希望 *p2 始终访问新地址。我想通过将 &p 强制转换为 void** 来实现这一点，但这不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T16:45:36.657

从您的问题中不清楚您是否尝试过这个：

```
int x = 10;
void* p = &x;
void** p2 = &p; 
```

这将创建一个指向 的指针`p2`，该指针`p1`又指向`x`。

# c-preprocessor - C 预处理器：从 __VA_ARGS__ 中提取 [0...N] args

> ID：13143781
> 
> 赞同：3
> 
> 时间：2012-10-30T16:43:11.793
> 
> 标签：c-preprocessor

假设 N 将小于或等于参数的数量，我如何从**VA_ARGS中提取 [0...N] 参数。**

例子：

```
#define MY_SEQ r0, r1, r2,  r3,  r4,  r5,  r6,  r7, \
               r8, r9, r10, r11, r12, r13, r14, r15

#define EXTRACT_N(n, SEQ) {... magic ...}

...

EXTRACT_N(5, (MY_SEQ()));

should expand to:

{r0, r1, r2, r3, r4}; 
```

可以假设序列元素的形式为 WHATEVER##N，其中 N 是第 N 个元素。

我正在寻找一些不错的解决方案来解决这个问题，而不是使用 BOOST，例如，我想了解它是如何完成的。

我使用迭代方法做到了，但我想知道是否有其他方法可以做到这一点。这是我实现它的方式：

```
#define EXTRACT_1(t0)               t0
#define EXTRACT_2(t0, t1)           EXTRACT_1(t0),t1
#define EXTRACT_3(t0, t1, t2)       EXTRACT_2(t0, t1),t2
#define EXTRACT_4(t0, t1, t2, t3)   EXTRACT_3(t0, t1, t2),t3
... 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T16:47:35.027

在一般情况下你不能这样做。c 预处理器不是那么灵活。

你可能有类似的东西

```
#define EXTRACT_N(N,A) EXTRACTTHEM ## N(A) 
```

并且有

```
#define EXTRACTTHEM1(X, ...) X
#define EXTRACTTHEM2(X,Y, ...) X,Y 
```

ETC

（很容易生成任意大但有界的此类宏集）。

`cpp`有比例如`m4`或[gpp](http://en.nothingisreal.com/wiki/GPP)更强大的处理器

您可能会考虑生成您的 C 或 C++ 代码（使用您自己的脚本或一些生成器）并让您的构建系统（例如`Makefile`）负责从不同的东西生成 C 代码。

# asp.net - aspnet_regsql 工具创建了额外的表

> ID：13143782
> 
> 赞同：2
> 
> 时间：2012-10-30T16:43:19.770
> 
> 标签：asp.net, tsql

当我在我的 mdf 文件上使用 aspnet_regsql 工具时，它由一些表的两个副本创建。例如 UsersInRoles 和 aspnet_UsersInRoles、Users 和 aspnet_Users。这是什么意思？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T01:50:52.090

aspnet_regsql 工具用于创建应用程序服务数据库。在此数据库中，它将创建与您在问题中提到的成员表类似的成员表。它用于存储用户和用户角色等，可以与 asp.net memebership 功能一起使用。请参见：

[http://msdn.microsoft.com/en-us/library/yh26yfzy(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/yh26yfzy(v=vs.100).aspx)

Kleinkie 也提供了一个很好的链接。

你说它复制了一些表的两个副本，你的意思是在不同模式下具有相同名称的两个表？我不知道这可以通过 aspnet_regsql 实现。

最好将这些表与 asp.net 成员模块一起使用。

# java - 线程启动后的命令不执行

> ID：13143796
> 
> 赞同：-1
> 
> 时间：2012-10-30T16:44:23.887
> 
> 标签：java

我在 LinuxOS 上用 Java 编写了一个小的客户端服务器应用程序，服务器从客户端接收不同的命令并通过启动不同的线程来处理它们。每个命令都有一个特定的线程。

我的主程序启动了一个线程，该线程响应不同的命令并由一个无限循环组成。目前还没有退出循环。该线程打印到启动主程序的终端，但不执行“.start()”之后的命令。

```
ServerSend servSend = new ServerSend(arg);
System.out.println("1"); 
servSend.start();
System.out.println("2");` 
```

所以永远不会打印“2”，而线程内的一些“System.out.println()”可以工作。有人知道为什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T16:47:46.040

如果您尝试生成一个新线程，我假设`ServerSend`实现`java.lang.Runnable`或扩展`java.lang.Thread`，在这种情况下您应该覆盖`public void run()`方法，而**不是**`start()`方法。

IE：

```
public class ServerSend implements java.lang.Runnable {
    public Thread thread;
    public ServerSend(arg) {
        //constructor
        thread = new Thread(this);
    }
    public void run() {
        //the contents of this method are executed in their own thread
    }
} 
```

然后使用它；

```
ServerSend s = new ServerSend(arg);
s.thread.start(); 
```

公共访问`thread`允许您执行以下操作；

```
s.thread.interrupt(); 
```

这是我的首选方法（使用`Runnable`）其他人更喜欢扩展`Thread`。这个答案几乎总结了我的想法：[https ://stackoverflow.com/a/541506/980520](https://stackoverflow.com/a/541506/980520)

# r - 在 Rstudio 中的 for 循环期间更新绘图？

> ID：13143801
> 
> 赞同：3
> 
> 时间：2012-10-30T16:44:47.893
> 
> 标签：r, plot, rstudio

> **可能重复：**
> [在 RStudio 中循环期间绘图](https://stackoverflow.com/questions/8772630/plotting-during-a-loop-in-rstudio)

我正在尝试监视收敛循环的状态，但我似乎无法让它在每次迭代时更新图形。

这是一些示例代码：

```
print(plot(c(0,1)~c(0,100)))
for(i in seq(100)) {
  Sys.sleep(.1)
  print(points( runif(1)~i ))
} 
```

请注意，图表仅在绘制完所有内容*后*才会更新。我需要它来更新每个循环迭代。我以为`print`会这样做，但它不起作用。

**更新**

这是一个特定于 RStudio 的问题，因为它在基础 R 中正常工作。有没有办法在 RStudio 中强制每次循环迭代绘制图形？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-30T16:51:03.823

`X11()`使用（或在 Windows 上？）启动一个单独的图形设备`win()`并使用它。

尽管在我的 RStudio 设置中绘图似乎可以更新。我的测试很简单：

```
plot(1:10);for(i in 1:10){points(10-i,i);Sys.sleep(1)} 
```

我看到第一组 10 个点，然后在 RStudio 嵌入式图形窗口中每隔一秒出现下一组。

# asp.net-mvc - 在 Telerik DatePicker 中，如何将最小日期设置为今天？

> ID：13143802
> 
> 赞同：0
> 
> 时间：2012-10-30T16:44:49.907
> 
> 标签：asp.net-mvc, razor, telerik, datepicker

我尝试了下面的代码，但没有成功。我认为它涉及更多。

```
@Html.Telerik().DatePickerFor(o => o.StartDt).Min(new System.DateTime.Now()) 
```

根据弗朗索瓦的建议，我得到了这个错误： [![错误](../Images/35443a1da8c903c66ff2e634aa11e072.png)](https://i.stack.imgur.com/rBXSC.gif)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T16:55:59.877

获取 Today/Now 的正确方法是`DateTime.Today`或`DateTime.Now`。他们不是构造函数，所以`new System.DateTime.Today()`会给你你得到的错误。

利用：

`@Html.Telerik().DatePickerFor(o => o.StartDt).Min(System.DateTime.Today)`

`DateTime.Now`另外，关于和之间的区别的一个很好的答案`DateTime.Today`：[System.DateTime.Now 和 System.DateTime.Today 之间的区别](https://stackoverflow.com/questions/6545254/difference-between-system-datetime-now-and-system-datetime-today)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T16:46:51.280

使用`Today()`而不是`Now()`.

```
@Html.Telerik().DatePickerFor(o => o.StartDt).Min(System.DateTime.Today) 
```

编辑：当然，这里不需要 NEW :)

# hadoop - 定位 Cloudera Manager HDFS 配置文件

> ID：13143810
> 
> 赞同：3
> 
> 时间：2012-10-30T16:45:10.413
> 
> 标签：hadoop, cloudera, cloudera-manager

我已经通过 Cloudera Manager 安装了一个集群，现在我需要手动启动集群。

我一直在使用以下命令：

```
$ sudo -u hdfs hadoop namenode / datanode / jobtracker 
```

但随后`dfs.name.dir`设置`/tmp`。我似乎找不到 cloudera manager 的 HDFS 配置文件在哪里。里面的那些`/usr/lib/hadoop-02*/conf`似乎很少。他们错过了`dfs.name.dir`我特别要寻找的东西。顺便说一句，我使用的是 RHLE 6 系统。懒惰，虽然我可以复制 cloudera manager 的 HDFS 配置文件，所以我不必手动创建它们，将它们复制到 6 个节点:)

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-28T06:49:38.000

我面临同样的问题。我正在从 cloudera manager ui 更改配置参数，但对我的更改在本地文件系统上的更新位置一无所知。

我运行了 grep 命令，发现在我的情况下配置存储在 /var/run/cloudera-scm-agent/process/ *** -hdfs-NAMENODE 目录中。

所以大卫是对的，每当我们从 ui 更改配置并重新启动服务时，它都会创建新的配置。/var/run/cloudera-scm-agent/process/ 目录中的设置。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-30T18:22:00.787

每次启动集群时，Cloudera 管理器都会部署配置文件，每次都在不同的目录中。目录以进程 ID 或类似名称命名。
配置作为参数显式传递给每个守护程序。因此，如果您查看每个 hadoop 守护程序的命令行，您可以看到配置所在的位置（或者只是通过磁盘 grep 查找 hdfs-site.xml。配置文件的名称与往常相同。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-07-24T17:08:52.927

使用 CentOS 6.5，Cloudera Manager 特殊文件不会显示在 SEARCH FILES 结果中，因为它们的权限被设置为对除“hdfs”用户之外的所有人隐藏。此外，本地驱动器上有多个版本的 hdfs-site.xml，其中一些具有部分真实设置。实际设置文件在 DATANODE 文件夹中，而不是在 NAMENODE 文件夹中，后者中缺少 dfs.datanode.data.dir 值就证明了这一点。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-11-08T17:23:16.710

我在同一条船上，找到了这个答案：

> 为了允许 Hadoop 客户端用户使用您创建的 HDFS、MapReduce、YARN 和 HBase 服务，Cloudera Manager 生成客户端配置文件，其中包含相关配置文件以及您的服务中的设置。这些文件由 Cloudera Manager 根据您安装的服务、添加服务或在主机上添加网关角色时自动部署。
> 
> 如有必要，您可以手动下载这些客户端配置文件并将其分发给服务用户。
> 
> 集群操作菜单上的客户端配置 URL 命令会打开一个弹出窗口，其中显示指向为集群中安装的服务创建的客户端配置 zip 文件的链接。您可以通过单击链接下载这些 zip 文件。
> 
> 有关此主题的更多信息，请参阅部署客户端配置文件。

在我们的系统上，我通过`http://your_server:7180/cmf/services/status`并单击了 Add Cluster 按钮下的 Actions 弹出窗口。希望有帮助。

# c# - 基于 [Type] 对象转换和转换对象

> ID：13143818
> 
> 赞同：2
> 
> 时间：2012-10-30T16:45:45.907
> 
> 标签：c#, reflection, casting

希望是一个足够简单的问题，但我正在努力寻找答案。

如何将“对象”转换为“类型”对象中定义的类型。

例如，基本上我正在尝试通过反射执行以下操作，使其尽可能通用：

```
public class MyClass
{
    public string Prop1 { get; set; }
    public int Prop2 { get; set; }
}

public T FillMyClass<T>() where T : new()
{
    //The definitions here are suppled in code - each class we want to work with needs to be "mapped".
    string name1 = "Prop1";
    Type type1 = typeof(string);
    string name2 = "Prop2";
    Type type2 = typeof(int);

    //The values always start out as a string because of the way I'm receiving it.
    string val1 = "test";
    string val2 = "1";

    T t= new T();

    //Works fine, because val1 is already a string
    t.GetType().GetProperty(name1).SetValue(t, val1, null);

    //Having trouble with the below.
    object o = Convert.ChangeType(val2, type2);

    //Fails because o is not an int
    t.GetType().GetProperty(name2).SetValue(t, o, null);

} 
```

所以类型是由用户定义的（或者甚至可能只是通过查找属性的类型）。但我只是看不到如何将对象转换为 [Type]。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T16:50:46.760

我也遇到过这个问题几次。虽然我确信有一个更*优雅*的解决方案来解决这个问题，但我已经制作了以下扩展方法来帮助您完成 99% 的工作。

```
 public static object TryConvertToType(this object source, Type destinationType, object defaultValue = null)
    {
        try
        {
            if (source == null)
                return defaultValue;

            if (destinationType == typeof(bool))
            {
                bool returnValue = false;

                if (!bool.TryParse(source.ToString(), out returnValue))
                {
                    return Convert.ChangeType(source.ToString() == "1", destinationType);
                }
                else
                {
                    return Convert.ChangeType(returnValue, destinationType);
                }
            }
            else if (destinationType.IsSubclassOf(typeof(Enum)))
            {
                try
                {
                    return Enum.Parse(destinationType, source.ToString());
                }
                catch
                {
                    return Enum.ToObject(destinationType, source);
                }
            }
            else if (destinationType == typeof(Guid))
            {
                return Convert.ChangeType(new Guid(source.ToString().ToUpper()), destinationType);
            }
            else if (destinationType.IsGenericType && destinationType.GetGenericTypeDefinition() == typeof(Nullable<>))
            {
                Type genericType = destinationType.GetGenericArguments().First();

                return Convert.ChangeType(source, genericType);
            }
            else if (source.GetType().IsSubclassOf(destinationType))
            {
                return Convert.ChangeType(source, destinationType);
            }
            else if (!source.GetType().IsValueType
                && source.GetType() != typeof(string)
                && destinationType == typeof(string))
            {
                return Convert.ChangeType(source.GetType().Name, destinationType);
            }
            else
            {
                return Convert.ChangeType(source, destinationType);
            }
        }
        catch
        {
            return defaultValue;
        }
    } 
```

基本上，在使用中，它是这样工作的：

```
t.GetType().GetProperty(name).GetValue(t, null).TryConvertToType(type2, 0); 
```

# jquery - ajax-选择添加动态元素

> ID：13143820
> 
> 赞同：3
> 
> 时间：2012-10-30T16:45:52.373
> 
> 标签：jquery, jquery-plugins, jquery-chosen

我的代码需要帮助：

我正在动态添加元素，创建新元素需要这些函数有一个名为 CHOSEN 的插件，但是在创建后创建它们不起作用我尝试重新运行该函数以将选择的属性添加到新元素。

```
ajaxchosen = function () {
    $("select").each(function(index, element){
        $(element).ajaxChosen(
                   { method: "GET", 
                     url: $(element).attr("source"),
                     dataType: "json"
                   }, function(data){ 
                       var terms; 
                       terms = {};
                       $.each(data, function (i, val) {
                           return terms [i] = val;
                       });
                       return terms;
                   });
    });
};

$ (element).closest("form").find(".nested-field:visible:last").append(template.replace(regexp, new_id));
ajaxchosen(); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-30T16:55:43.090

如果你修改了一个已经使用 Chosen 转换的 select 的内容，你需要调用

```
$("#form_field").trigger("liszt:updated"); 
```

或（取决于您使用的版本）

```
$("#form_field").trigger("chosen:updated"); 
```

在如此选择的修改之后，在该选择上重新加载自身并更新值。因此，您直接在选择（而不是选择的 div）上使用一些 ajax 添加值，然后调用该方法。

检查文档：[http ://harvesthq.github.com/chosen/](http://harvesthq.github.com/chosen/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-10-21T08:49:41.803

`liszt:updated`已弃用。

采用

```
$("#form_field").trigger("chosen:updated"); 
```

# objective-c - doxygen 链接到类别中的objective-c方法

> ID：13143823
> 
> 赞同：1
> 
> 时间：2012-10-30T16:46:11.890
> 
> 标签：objective-c, documentation, doxygen, objective-c-category

我发现很难将类别中的方法与 doxygen 联系起来。

例如使用以下代码：

```
@interface A
-(void)method;
@end

@interface A(Category)
-(void)methodInCategory
@end 
```

我发现 doxygen 是这样工作的：

```
@ref A(Category)   => Success to link: A(Category)
@link A::method    => Success to link: A -method 
```

但使用以下代码：

```
@link A(Category)::methodInCategory  => Fail to link 
```

我总是得到错误：

```
warning: unable to resolve link to `A(Category)::methodInCategory' for \link command 
```

我正在使用 doxygen 1.8.1.2

如何在类别中建立方法的链接，或者它是 doxygen 的错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-08-01T12:17:59.460

我知道这是一个非常古老的帖子，但以防万一有人像我一样遇到这个问题，这实际上现在似乎有效。我正在使用 doxygen 1.8.9.1：

```
@ref A(Category)::methodInCategory 
```

为我工作，但产生的链接有点奇怪，因为它遗漏了类名并产生：'::methodInCategory'

# iphone - 如何以编程方式为原生应用程序获取 facebook 测试用户令牌

> ID：13143828
> 
> 赞同：0
> 
> 时间：2012-10-30T16:46:36.927
> 
> 标签：iphone, facebook, facebook-opengraph, facebook-test-users

我们正在开发一个由服务器支持的 iPhone 应用程序。服务器与 Facebook 对话以推送 Opengraph 事件。我正在尝试测试此代码。我在 Web 界面中创建了 Facebook 测试用户。如果我为它们手动生成令牌，它们会在 24 小时到期后生成，这会使它们对测试毫无用处。所以我需要在测试代码中按需生成令牌。Facebook 开发人员文档[https://developers.facebook.com/docs/test_users/](https://developers.facebook.com/docs/test_users/)说我可以让 accounts/test-users 列出测试用户及其令牌。但是，当我这样做时，我得到了这个：

```
{
    error: {
        message: "(#15) This method is not supported for native apps",
        type: "OAuthException",
        code: 15
    }
} 
```

我想这是因为我们正在开发一个 iPhone 应用程序（尽管在 Facebook 应用程序配置中我们配置了网站、Facebook 应用程序和 ios 应用程序部分）。

我需要更改一些设置才能使其正常工作吗？或者其他生成令牌的方式？还是一种手动生成可以硬编码到测试中的更长寿令牌的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T17:47:29.593

是的 - 将高级设置下的“应用程序模式”设置更改回“Web” - 如果应用程序密码嵌入在客户端二进制文件中，您应该只使用“本机/桌面”。

当此设置设置为“本机/桌面”时，应用程序密码不受信任，因为您的任何用户都可以从客户端代码中提取密码并代表应用程序进行调用

# objective-c - 块上下文中的 OCMock

> ID：13143830
> 
> 赞同：0
> 
> 时间：2012-10-30T16:46:43.527
> 
> 标签：objective-c, ios, objective-c-blocks, ocmock

所以我试图组合一个简单的测试来验证我是否正确地从我的音频控制器接收频率值。

在我看来，我正在拨打这样的电话来设置块回调：

```
- (void) registerVolumeCallback {
      NSNumberBlock frequencyCallback = ^(NSNumber *frequency) {
          self.currentFrequency = frequency;
      };
      self.audioController.frequencyCallback = frequencyCallback;
  } 
```

在我的音频控制器中，使用包含频率的 nsnumber 调用频率回调块。

在我的测试文件中，我有以下内容：

```
 - (void) testFrequencyAudioServiceCallbackActive {
          OCMockObject *mockEqualizer = [OCMockObject partialMockForObject:self.testEqualizer];
          [[[mockEqualizer stub] andCall:@selector(mockDidUpdateFrequency:)
                      onObject:self] setCurrentFrequency:[OCMArg any]];
          [self.testEqualizer startAnimating];
          [ mockEqualizer verify];
    } 
```

和：

```
 - (void) mockDidUpdateFrequency: (NSNumber *) frequency {
        GHAssertTrue((frequency!= nil), @"Audio Service is messing up");
  } 
```

其中测试均衡器是上述视图的一个实例。所以我想在这里做一些调酒。问题是，永远不会调用 mockDidUpdateFrequency。我试着把：

```
 self.currentFrequency = frequency; 
```

在块之外，确实发生了混乱，我确实接到了 mockDidUpdateFrequency 的电话。我也试过：

```
 - (void) registerVolumeCallback {
     __block UIEqualizer *blockSafeSelf = self;
     NSNumberBlock frequencyCallback = ^(NSNumber *frequency) {
       blockSafeSelf.currentFrequency = frequency;
     };
    self.audioController.frequency = frequencyCallback;
} 
```

没运气。在我不知道的块上下文中，这里发生了一些奇怪的实例。有谁知道发生了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T05:21:46.110

您需要提供更多详细信息以获得明确的答案。例如，如何`registerVolumeCallback`调用？是`frequencyCallback`您自己的代码，还是第三方 API？

根据您提供的内容，我怀疑这`frequencyCallback`是一个异步调用。因此，即使`startAnimating`可能会创建最终将被调用的条件，您仍会在回调有机会被调用之前立即验证模拟。为了让您的测试按照您所写的那样做，您需要了解该块在哪个队列上执行，并且您需要给它一个执行的机会。

如果在主队列上异步调用它，您可以在调用之前让主运行循环旋转`verify`：

```
[self.testEqualizer startAnimating];
[[NSRunLoop currentRunLoop] runUntilDate:[NSDate dateWithTimeIntervalSinceNow:.1]];
[mockEqualizer verify]; 
```

如果在不同的队列上调用它，您有一些不同的选择，但它有助于更​​清楚地了解您的代码首先是如何构造的。

# sql-server - 如果在哪里 SQL Server

> ID：13143832
> 
> 赞同：-1
> 
> 时间：2012-10-30T16:46:56.447
> 
> 标签：sql-server, if-statement, where-clause

我有一个存储过程，它接收 10 个参数类型 Date 但我可以在咨询为空时显示信息，因为必须显示此咨询上所有客户的信息流。有时客户有带有信用票据的订单，但有时只有订单但没有信用票据......我为 Where 子句这样做：

```
 WHERE 
                (Customer.cd_CustomerID = ISNULL(@customer, Customer.cd_CustomerID))
                AND (@orderID IS NULL OR Orders.cd_OrderID = @orderID)
                AND (@Location IS NULL OR CustomerSL.cd_LocID = @Location)      
                and (Convert(date,Orders.fh_Date,111) BETWEEN coalesce (@FechaPedido1,'1900-01-01') AND  coalesce (@FechaPedido2,'3000-12-31' ))
                and (Convert(date,Receipt.fh_Date,111) BETWEEN coalesce (@FechaRemision1,'1900-01-01') AND  coalesce (@FechaRemision2,'3000-12-31' )) 
                and (Convert(date,Invoice.fh_Date,111) BETWEEN coalesce (@FechaFactura1,'1900-01-01') AND  coalesce (@FechaFactura2,'3000-12-31' )) 
                and (Convert(date,CreditNote.fh_Date,111) BETWEEN coalesce (@FechaNotaCredito1,'1900-01-01') AND  coalesce (@FechaNotaCredito2,'3000-12-31' ))
                and (Convert(date,Dispersion.fc_CreatedDate,111) BETWEEN coalesce (@FechaDispersion1,'1900-01-01') AND  coalesce (@FechaDispersion2,'3000-12-31' )) 
```

但在这种情况下，只显示具有客户端所有流程的信息。咨询没有向我显示没有没有减免或分散的订单的信息流，无论如何...已经尝试在 Where 中使用 IF 但我的语法有一些问题是...

> if (@fechapedido1 is null) begin (Convert(date,Orders.fh_Date,111) BETWEEN @FechaPedido1 and @FechaPedido2)
> end

SQL 服务器向我显示此消息“关键字 'Convert' 附近的语法不正确。” 但那条线是正确的......：S请帮助我：D谢谢：D

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T16:48:49.213

子句中不能有`IF`语句`WHERE`，试试这个：

```
AND 
(
    (
        @fechapedido1 is null AND 
        Convert(date,Orders.fh_Date,111) BETWEEN @FechaPedido1 and @FechaPedido2
    ) OR
    @fechapedido1 is not null 
) 
```

# c# - 解析通用方法签名时是否考虑了约束？

> ID：13143834
> 
> 赞同：3
> 
> 时间：2012-10-30T16:47:05.017
> 
> 标签：c#, generics, methods, signature

假设：

```
public class GenericMethods
{
    public T Method<T>() where T : struct
    {
        // Do something specific to a struct
    }

    public T Method<T>() where T : class
    {
        // Do something specific to a class
    }
} 
```

在编译时不知何故无效，因为这两个方法采用相同的参数。但是，由于约束是互斥的，这两种方法是否真的会发生冲突？在解析 T 时，软件可能无法选择这两种方法之一吗？

如果泛型类型是结构或类，人们将如何创建两个具有相同名称和参数的泛型方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T16:48:48.743

不，不考虑约束。也不是返回类型。这不会编译，并且不是合法的 C#。

这记录在 C# 语言规范的 3.6 中：

> 方法的签名特别不包括返回类型、可以为最右边的参数指定的 params 修饰符，也不包括可选的类型参数约束。

虽然这两种方法在“逻辑上”是不同的，并且不能冲突，但由于约束*应该*清楚地表明正在调用哪个方法，但 C# 语言不支持这一点。语言设计者认为这是他们选择实现 C# 规则的方式。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-30T16:56:52.890

而且您可能还有一种方法，例如

```
 public MyClass Method<T>() 
    {
        // Do something specific to a myclass
    } 
```

所以编译器不会有明确的选择。

# c++ - 如何将结构添加到 STL 列表

> ID：13143836
> 
> 赞同：0
> 
> 时间：2012-10-30T16:47:11.237
> 
> 标签：c++, visual-studio-2010, list, data-structures, stl

我有一个这样的全局结构：-

```
struct MachineList
    {
    BSTR AccountId;
    BSTR MachineId;
    BSTR Make;
    char* Make1;
    BSTR Model;
    char* Model1;
    BSTR SerialNumber;
    BSTR IpAddress1;
    char* IpAddress;
    BSTR Port1;
    int Port;
    BSTR LocationCode;
    SOCKET Sock;
    BSTR Status;
} MACHINELIST,*PMACHINELIST;
int MachineCount=-1; 
```

我有一个 XML，我对其进行解析并将其存储在如下结构中：- 我想将通过解析填充的每个结构添加到 stl 列表中，因此我添加了以下代码

```
vector<struct  MACHINELIST > SS; 
```

现在我收到以下错误：-

> 错误 C2371：'MACHINELIST'：重新定义；不同的基本类型错误 C2512：'MACHINELIST'：没有适当的默认构造函数可用

```
int GetMachineList(char *Xmlpath)
{
    wLog->WriteDebugLog("Inside GetMachineList\n");
    try 
    {
        //Qualify namespase explicitly to avoid Compiler Error C2872 "ambiguous symbol" during linking.
        //Now Msxml2.dll use the "MSXML2" namespace
        //(see http://support.microsoft.com/default.aspx?scid=kb;en-us;316317):
        MSXML2::IXMLDOMDocumentPtr docPtr;//pointer to DOMDocument object
        MSXML2::IXMLDOMNodeListPtr NodeListPtr;//indexed access. and iteration through the collection of nodes
        MSXML2::IXMLDOMNodePtr DOMNodePtr;//pointer to the node

        MSXML2::IXMLDOMNode *pIDOMNode = NULL;//pointer to element's node
        MSXML2::IXMLDOMNode *pIParentNode = NULL;//pointer to parent node
        MSXML2::IXMLDOMNode *pIAttrNode = NULL;//pointer to attribute node
        MSXML2::IXMLDOMNamedNodeMapPtr DOMNamedNodeMapPtr;//iteration through the collection of attribute nodes
        MSXML2::IXMLDOMNodeList *childList=NULL;//node list containing the child nodes

        //Variable with the name of node to find: 
        BSTR strFindText  = L" ";//" " means to output every node

        //Variables to store item's name, parent, text and node type:
        BSTR bstrItemText,bstrItemNode, bstrItemParent,bstrNodeType;

        //Variables to store attribute's name,type and text:     
        BSTR bstrAttrName, bstrAttrType, bstrAttrText;

        HRESULT hResult;

        int i = 0;//loop-index variable
        int n = 0;//lines counter

        //Initialize COM Library:
        CoInitialize(NULL);

        //Create an instance of the DOMDocument object:
        docPtr.CreateInstance(__uuidof(DOMDocument30));

        // Load a document:
        _variant_t varXml(Xmlpath);//XML file to load//uncomment this
        _variant_t varResult((bool)TRUE);//result 

        varResult = docPtr->load(varXml);

        if ((bool)varResult == FALSE)
        {
            wLog->WriteErrorLog("failed to load XML file. Check the file name\n");
            printf("failed to load XML file. Check the file name\n");

            return 1;
        }

        //Collect all or selected nodes by tag name:
        NodeListPtr = docPtr->getElementsByTagName(strFindText);//original
        // NodeListPtr=   docPtr->documentElement->getElementsByTagName(strFindText) ;

        //Output the number of nodes:
        //printf("Number of nodes: %d\n", (NodeListPtr->length));

        //Output root node:
        docPtr->documentElement->get_nodeName(&bstrItemText);
        //%ls formatting is for wchar_t* parameter's type (%s for char* type):
        printf("\nRoot: %ls\n", bstrItemText);  

**PMACHINELIST MachineList;**

        for(i = 0; i < (NodeListPtr->length); i++)
        {

            if (pIDOMNode) pIDOMNode->Release();            
            NodeListPtr->get_item(i, &pIDOMNode);

            if(pIDOMNode )
            {               

                pIDOMNode->get_nodeTypeString(&bstrNodeType);

                //We process only elements (nodes of "element" type): 
                BSTR temp = L"element";

                if (lstrcmp((LPCTSTR)bstrNodeType, (LPCTSTR)temp)==0) 
                {
                    n++;//element node's number
                    printf("\n\n%d\n", n);//element node's number
                    printf("Type: %ls\n", bstrNodeType);

                    pIDOMNode->get_nodeName(&bstrItemNode);
                    if(0== wcscmp(bstrItemNode, L"ModuleSettings"))
                    {
                        isModuleSettings=TRUE;
                        //MS.account_id_name
                        printf("");
                    }

                    printf("Node: %ls\n", bstrItemNode);                
                    if(0== wcscmp(bstrItemNode, L"Machine"))
                    {
if(MachineCount++!=-1)
                        {
                            SS.push_back(MachineList);
                        }
                        //printf("value of count is %d\n",count);
                        count++;
                        //printf("value of count is %d\n",count);

                        isMachineList=TRUE;

                        **MachineList=new MACHINELIST;
                        MachineCount++;**
                        //MS.account_id_name

                    }
                    if(0== wcscmp(bstrItemNode, L"/Machine"))
                    {
                        printf("detected");
                    }
                    pIDOMNode->get_text(&bstrItemText);
                    printf("Text: %ls\n", bstrItemText);
                    if(isModuleSettings)//work here
                    {
                        if(0== wcscmp(bstrItemNode, L"capture_local_dir"))
                        {
                            CapturelocalDir=bstrItemText;
                            printf("CapturelocalDir is %ls\n",CapturelocalDir);
                        }
                        if(0== wcscmp(bstrItemNode, L"capture_log_dir"))
                        {
                            CapturelogDir=bstrItemText;
                            printf("CapturelogDir is %ls\n",CapturelogDir);
                        }
                        if(0== wcscmp(bstrItemNode, L"capture_log_level"))
                        {
                            CapturelogLevel=bstrItemText;
                            printf("CapturelogLevel is %ls\n",CapturelogLevel);
                        }
                        if(0== wcscmp(bstrItemNode, L"capture_request_interval"))
                        {
                            CapturerequestInterval=bstrItemText;
                            printf("CapturerequestInterval is %ls\n",CapturerequestInterval);
                        }
                        if(0== wcscmp(bstrItemNode, L"capture_connection_interval"))
                        {
                            CaptureConnectionInterval=bstrItemText;
                            printf("CaptureConnectionInterval is %ls\n",CaptureConnectionInterval);
                        }
                    }
                    if(isMachineList)
                    {
                    /*  PMACHINELIST MachineList;
                        MachineList=new MACHINELIST;*/

                        if(0== wcscmp(bstrItemNode, L"MachineId"))
                        {
                            m_LocalStorage.machinelist[count].MachineId=bstrItemText;
                            //MachineList.MachineId=bstrItemText;
                            MachineList->MachineId=bstrItemText;
                            //printf("Machine id is %ls\n",ML[count].MachineId);
                        }
                        if(0== wcscmp(bstrItemNode, L"IpAddress"))
                        {
                            m_LocalStorage.machinelist[count].IpAddress=bstrItemText;
                            m_LocalStorage.machinelist[count].IpAddress1=_com_util::ConvertBSTRToString(bstrItemText);
                            printf("ip address1 is %s\n",m_LocalStorage.machinelist[count].IpAddress1);
                            MachineList->IpAddress=_com_util::ConvertBSTRToString(bstrItemText);
                            //printf("Machine id is %ls\n",ML[count].MachineId);
                        }
                        if(0== wcscmp(bstrItemNode, L"Port"))
                        {
                            m_LocalStorage.machinelist[count].Port=bstrItemText;
                            m_LocalStorage.machinelist[count].Port1=_wtoi(bstrItemText);
                            MachineList->Port==_wtoi(bstrItemText);
                            //printf("Machine id is %ls\n",ML[count].MachineId);
                            printf("port1 is %d\n",m_LocalStorage.machinelist[count].Port1);
                        }
                        if(0== wcscmp(bstrItemNode, L"Model"))
                        {
                            m_LocalStorage.machinelist[count].Model=bstrItemText;
                            m_LocalStorage.machinelist[count].Model1=_com_util::ConvertBSTRToString(bstrItemText);
                            MachineList->Model1=_com_util::ConvertBSTRToString(bstrItemText);
                            //printf("Machine id is %ls\n",ML[count].MachineId);
                        }
                        if(0== wcscmp(bstrItemNode, L"Make"))
                        {
                            m_LocalStorage.machinelist[count].Make=bstrItemText;
                            m_LocalStorage.machinelist[count].Make1=_com_util::ConvertBSTRToString(bstrItemText);
                            MachineList->Make1=_com_util::ConvertBSTRToString(bstrItemText);
                            //printf("Machine id is %ls\n",ML[count].MachineId);
                        }
                        if(0== wcscmp(bstrItemNode, L"SerialNumber"))
                        {
                            m_LocalStorage.machinelist[count].SerialNumber=bstrItemText;
                            MachineList->SerialNumber=bstrItemText;
                            //printf("Machine id is %ls\n",ML[count].MachineId);
                        }
                        if(0== wcscmp(bstrItemNode, L"AccountId"))
                        {
                            m_LocalStorage.machinelist[count].AccountId=bstrItemText;
                            MachineList->AccountId=bstrItemText;
                            //printf("Machine id is %ls\n",ML[count].MachineId);
                        }
                        if(0== wcscmp(bstrItemNode, L"location_code"))
                        {
                            m_LocalStorage.machinelist[count].LocationCode=bstrItemText;
                            MachineList->LocationCode=bstrItemText;
                            //printf("Machine id is %ls\n",ML[count].MachineId);
                        }
                    }

                    //Get the attributes:
                    int j = 0;//loop-index variable
                    long length;// number of attributes in the collection

                    DOMNamedNodeMapPtr = pIDOMNode->attributes;

                    hResult = DOMNamedNodeMapPtr->get_length(&length);

                }
            }
        }

        //Do not forget to release interfaces:
        pIDOMNode->Release();
        pIDOMNode = NULL;
        //pIParentNode->Release();
        pIParentNode = NULL;

    } 

    catch(...)
    {
        wLog->WriteErrorLog("Exception occurred while parsing XML\n");

    }

    CoUninitialize();
        printf("value of machine count is %d",MachineCount);
    wLog->WriteDebugLog("Ends GetMachineList\n");
    return 0;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T16:49:28.710

要声明任何类型的向量，您需要将类型作为模板参数传递。在您的情况下，类型是`MachineList`：

```
vector<MachineList> SS; 
```

要添加实例，您可以使用例如`push_back()`：

```
SS.push_back(MACHINELIST); // add the MACHIHELIST instance
SS.push_back(MachineList()); // add a default constructed MachineList. 
```

在您的代码中，`MACHINELIST`是 type 的一个实例`MachineList`。

**根据评论进行编辑**：如果您想存储指针，则需要一个指针向量：

```
vector<MachineList*> SS; 
```

然后您可以添加条目：

```
MachineList* m = new MachineList;
SS.push_back(m); 
```

您有责任在适当的时候删除指针以释放动态分配的资源。我建议使用[智能指针](http://en.wikipedia.org/wiki/Smart_pointer)而不是原始指针，但是您的代码中存在更多基本问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T16:49:59.827

尝试：

```
vector< MachineList > SS; 
```

`MachineList`是你的结构的名称。`MACHINELIST`是结构的一个实例。`*PMACHINELIST`是指向这种结构的指针。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T16:52:18.073

使用`vector<MachineList>`. 当你用它声明时，`struct MachineList { ... };`它会创建一个`MachineList`已知为结构的类型，并且不需要前缀 with`struct`来使用它。

声明之后`MACHINELIST,*PMACHINELIST`是 C 风格的代码，并且是不必要的。

# reporting-services - 以编程方式将 LocalReport 呈现到 XPS

> ID：13143839
> 
> 赞同：2
> 
> 时间：2012-10-30T16:47:15.647
> 
> 标签：reporting-services, xps, xpsdocument, localreport

我正在尝试将[LocalReport](http://msdn.microsoft.com/en-us/library/ms255056%28v=vs.100%29.aspx)呈现为 XPS 文件，因此我可以使用 XPS Print API 从 Windows 服务打印它们，如[本文](http://www.aspose.com/docs/display/wordsnet/How+to++Print+a+Document+on+a+Server+via+the+XpsPrint+API)所示。

我发现的问题是我无法将本地报告直接呈现给 XPS。也许我可以将它渲染为图像流，然后将该图像嵌入到手动创建的 XPS 中，但我不太喜欢这种解决方案。

对于将 LocalReport 渲染到 XPS 的任何建议，我将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T17:15:54.113

不幸的是，这并不容易。除了它是。

首先，一切都必须在 STA 线程中发生。所以你从线程问题开始。

其次，XPS 文档与 WPF 深度交织。XPS 文档将其内容公开为[FixedDocumentSequences](http://msdn.microsoft.com/en-us/library/system.windows.documents.fixeddocumentsequence.aspx)，即[DependencyObjects](http://msdn.microsoft.com/en-us/library/system.windows.dependencyobject.aspx)。这就是WPF。您的 LocalReport*不是*WPF，它是基于表单的组件。

您唯一的选择是将报表呈现为某种格式，该格式可以通过您编写的某种解析和呈现过程转换为 WPF 表示形式。这可能就像从报告中创建图像一样简单，也可能像编写 XSLX 转换器一样困难。

但为什么一开始还要为此烦恼呢？ [LocalReport 的文档](https://docs.microsoft.com/en-us/previous-versions/visualstudio/visual-studio-2013/ms252091(v=vs.120))显示了如何在不处理 XPS 打印路径的情况下打印报告。

# mysql - 跨多行的 WHERE 条件

> ID：13143848
> 
> 赞同：2
> 
> 时间：2012-10-30T16:48:18.603
> 
> 标签：mysql, sql

我有这张桌子...

```
--------------------------------------
| user_id |  status   |  status_date |
--------------------------------------
|    1    |  Current  |  2012-08-01  |
|    1    |  Referral |  2012-03-14  |
|    2    |  Referral |  2012-04-23  |
|         |           |              |
-------------------------------------- 
```

我将如何查询以找到一个不同的 user_id，其推荐日期在 2012 年 6 月 30 日之前并且当前日期在 2012 年 6 月 30 日之后或根本没有当前状态记录？

数据库是 MySQL。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T16:58:01.233

您可以使用 LEFT JOIN 执行此操作：

```
SELECT  DISTINCT T.User_ID
FROM    T
        LEFT JOIN T T2
            ON t.User_ID = T2.User_ID
            AND t2.Status = 'Current'
WHERE   T.Status_Date < '20120630'
AND     T.Status = 'Referral'
AND     (t2.Status_Date > '20120630' OR t2.Status_date IS NULL) 
```

或者，使用`GROUP BY`with`HAVING`和`COUNT(CASE ...)`

```
SELECT  t.User_ID
FROM    T
GROUP BY t.user_ID
HAVING  COUNT(CASE WHEN t.Status = 'Referral' AND t.Status_Date < '20120630' THEN 1 END) > 0
AND (   COUNT(CASE WHEN t.Status = 'Current' AND t.Status_Date > '20120630' THEN 1 END) > 0
    OR  COUNT(CASE WHEN t.Status = 'Current' THEN 1 ELSE 0 END) = 0
    ) 
```

这将取决于您的索引和数据量，哪个表现更好，我想在大多数情况下它将是前者

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T16:53:18.100

这应该这样做：

```
SELECT DISTINCT user_id
FROM YourTable T
WHERE status = 'Referral' 
AND status_date < '2012-06-30'
AND NOT EXISTS (SELECT user_id FROM YourTable 
                WHERE user_id = T.user_id AND status = 'Current' 
                AND status_date < '2012-06-30') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T16:53:29.637

避免使用 MySQL 进行内部选择。5.5 及以下的所有版本都无法对其进行适当优化。使用 JOIN：

```
SELECT distinct t1.user_id 
  FROM tablename t1 
  LEFT JOIN tablename t2 on t1.user_id = t2.user_id AND t1.status != t2.status
  WHERE t1.status = 'Referral' 
        AND t1.status_date '2012-06-30' 
        AND ( (t2.status IS NULL) OR 
              (t2.status = 'Current' AND t2.status_date > '2012-06-30')); 
```

# ajax - Angular.js - 在 img src 标签中过滤

> ID：13143849
> 
> 赞同：21
> 
> 时间：2012-10-30T16:48:19.370
> 
> 标签：ajax, solr, angularjs

我们主要将 Angular 用于我们的搜索表单，这非常复杂。我们使用**Solr作为搜索框架，并通过****AJAX/JSONP**获得搜索结果，效果很好。

每个搜索结果中都应该有一张图片，但也有可能没有。当我的搜索结果中没有 img-URL 时，我使用过滤器来防止 Internet Explorer 中出现讨厌的“X”。

```
angular.module('solr.filter', []).
    filter('searchResultImg', function() {      
        return function(input) {
            if (typeof(input) == "undefined") {
                return "http://test.com/logo.png";
            } else { 
                return input;
            }
        };
}); 
```

我的链接图像在源代码中如下所示：

```
<a href="{{doc.url}}"><img src="{{doc.image_url | searchResultImg}}"/></a> 
```

就像我说的那样，信息传递正确，我遇到的“问题”是 Firebug 使用 Angular src 发送 GET 请求，例如：

```
http://test.com/foldername/%7B%7Bdoc.image_url%20|%20searchResultImg%7D%7D 
```

链接已编辑，因此无法使用。否则客户吓坏了；）

有没有人有这种行为的经验或知道为 src-tags 设置过滤器的更好方法？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-10-30T16:51:18.067

尝试替换`src`为`ng-src`更多信息，请参阅[文档](http://docs.angularjs.org/api/ng.directive:ngSrc)或[这篇文章](https://stackoverflow.com/a/12922538/1207991)。

```
<a href="{{doc.url}}"><img ng-src="{{doc.image_url | searchResultImg}}"/></a> 
```

> 在 src 属性中使用像 {{hash}} 这样的 Angular 标记不能正常工作：浏览器将从带有文本 {{hash}} 的 URL 获取，直到 Angular 替换 {{hash}} 中的表达式。ngSrc 指令解决了这个问题。

# sublimetext2 - Sublime Text 2：在一行中格式化 HTML 标签的内容

> ID：13143850
> 
> 赞同：4
> 
> 时间：2012-10-30T16:48:20.847
> 
> 标签：sublimetext2

好的，我的情况与此处有关格式化 HTML 的所有线程都有所不同。此外，我已经安装了几乎所有 HTML 格式插件，结果好坏参半，但没有一个能真正解决我的问题。

此外，配置这些插件可能很困难，因为我不是程序员，而且一些作者没有提供足够的信息来定制他们的插件。

目前，唯一可以格式化我的 HTML 的插件是**[HTMLTidy](https://github.com/welovewordpress/SublimeHtmlTidy)**，问题是每个标签占用了太多空间。请参阅下面的 HTML 示例。

我还尝试了他们在**[这个线程](https://stackoverflow.com/questions/8839753/formatting-html-code-using-sublime-text-2)**中提到的内容，它仅在缩进方面在某种程度上有效，但不适用于“真正的”标记格式。

我想做的就是打开这个标记：

```
<ul>
   <li>
     item here
   </li>
   <li>
     item here
   </li>
   <li>
     item here
   </li>
</ul> 
```

或者这个：

```
<p>
   Content...
</p> 
```

进入这个：

```
<ul>
   <li>item here</li>
   <li>item here</li>
   <li>item here</li>
</ul> 
```

还有这个：

```
 <p>Content...</p> 
```

将每个标签的内容与开始/结束标签放在单独的行中对我来说是浪费空间。

知道如何通过修改 TidyHTML 中的内容或手动或任何其他方式来完成此操作吗？

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T19:05:03.950

## 注意：此解决方案仅适用于 ST2，因为目前 (7/31/14) HTMLTidy 不适用于 ST3。

我想出了一个临时解决方案，无论如何都不理想，但是...

1.  前往：`Preferences -> Key Bindings - User`。您将编辑文件***Default (Windows).sublime-keypmap***。

2.  将这两个指令添加到该文件中（注意指令需要**在****[ ]**括号内）：

    ```
     [
       { "keys": ["ctrl+shift+r"], "command": "reindent" , "args": {"single_line": false}},
       //Indent code -- http://stackoverflow.com/questions/8839753/formatting-html-code-using-sublime-text-2

       { "keys": ["ctrl+alt+t"], "command": "html_tidy"}
       //HTMLTidy key binding
     ] 
    ```

3.  保存文件。

4.  确保您已安装**HTMLTidy**。打开 HTMLTidy 的设置文件***HtmlTidy.sublime-settings*** : `Preferences -> Package Settings -> HtmlTidy -> Settings - Default`.

5.  查找`"indent": true,`（包括双引号和逗号）并将其更改为`false`.

6.  保存文件。

7.  返回到您的 HTML 文件并在一行中选择要格式化的代码**部分。**是的，如果您选择整个标记 o_O，它将不起作用。它只会留下`<body>`标签内的内容，并且会删除其他所有内容（`<html>`,`<head>`等）。

8.  按`CTRL`+ `ALT`+`T`执行 TidyHTML。这将缩小您的标记并将标签放在一行中。

9.  最后按`CTRL`+ `SHIFT`+`R`执行缩进。

祝你好运。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T09:49:26.747

如果你的元素是统一的，一个更简单的解决方案是选择`<li>`你想要粉碎的所有 s 到一行，`alt+f3`或者，为了更多的控制，`ctrl+d`然后只需点击`ctrl+j`两次将这些行连接在一起。完毕！

如果做不到这一点，`ctrl+shift+j`在多选每个标签的一部分后，用于选择标签内的所有内容。用向左或向右箭头键将光标打到右边缘或左边缘，您可以从那里删除。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-21T16:04:24.883

您可以通过按 F12 键为一行设置快捷键

转到菜单首选项 -> 键绑定 - 用户

```
{ "keys": ["f12"], "command": "reindent"} 
```

详见 [http://how-to-sublime-text.blogspot.com/2014/11/reformat-code.html](http://how-to-sublime-text.blogspot.com/2014/11/reformat-code.html)

# vb.net - 如何在 VB.Net 中读取 Atom 提要

> ID：13143862
> 
> 赞同：2
> 
> 时间：2012-10-30T16:49:17.857
> 
> 标签：vb.net, atom-feed

我已经搜索了又搜索又搜索了足够多，直到我的头疼！我想做的是从这里获取一个 ATOM 提要：[国家气象服务警报](http://alerts.weather.gov/cap/wwaatmget.php?x=VAC089&y=1)并将其合并到我的程序中，但是，我什至不知道从哪里开始 :( 我最终想要做的是下载 Atom 提要和将它放在滚动标签中。我不想解析它拉出部分或任何东西。只想显示我所在地区的 NWS 警报。我不希望任何人只写出代码或任何东西，但有任何帮助非常感谢为中级 vb 程序员指出正确的方向来简单而轻松地编程它。请帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T17:43:40.640

这是一个适用于您的案例的代码示例。假设您已经下载了 Atom 提要并将其保存到您的磁盘中。如果没有，您可能需要稍作修改：

```
Imports System.Xml
Imports System.ServiceModel.Syndication

Public Class Form1
  Private Sub Form1_Load(sender As System.Object, e As System.EventArgs) Handles MyBase.Load
    Dim messageList As New Generic.List(Of String)
    Using feedReader = XmlReader.Create("X:\vi.php.webintents")
      Dim feedContent = SyndicationFeed.Load(feedReader)
      If feedContent Is Nothing Then Return
      For Each item As Object In feedContent.Items
        messageList.Add(Convert.ToString(item.Title.Text))
      Next
    End Using
    lbl_warnings.Text = String.Join(vbNewLine & vbNewLine, messageList)
  End Sub
End Class 
```

替换`"X:\vi.php.webintents"`为您的文件位置。

为了`System.ServiceModel.Syndication`可用，您需要添加`System.ServiceModel.dll`到您的参考资料 (.NET 4.0)。对于 .NET 3.5，您将使用`System.ServiceModel.Web.dll`

我[将此答案](https://stackoverflow.com/a/790808/897326)用作`SyndicationFeed`此示例中的使用基础。

# javascript - vml 使用 javascript 将行添加到 v:group

> ID：13143868
> 
> 赞同：2
> 
> 时间：2012-10-30T16:49:40.197
> 
> 标签：javascript, internet-explorer-7, element, vml

我需要一些帮助来使用 Javascript 将 vml 线元素绘制到在 HTML 代码中定义的 vml 组元素中。

我的 v:group 元素，它具有其他 vml 元素，例如 v:arc 或 v:rect ...：

```
 <div style="width: 940px; height: 490px; margin-bottom: 60px; position: relative; top: -440px; left: 20px;">
   <v:group ID="vmlgruppe" style="width:940px; height: 470px; clip:hidden;      position:relative;" coordsize="210, 105" xmlns:v="urn:schemas-microsoft-com:vml"> 
```

现在我必须使用 javascript 绘制一个 vml 线元素。

```
 document.namespaces.add("v","urn:schemas-microsoft-com:vml", "#default#VML");
            var container12 = document.getElementById("vmlgruppe");
            var line = document.createElement("v:line");

            line.strokecolor = "black";
            line.from = "105,10";
            line.to = "120, 74";
            line.style.position = "absolute";

            vmlgruppe.appendChild(line); 
```

如果我在不使用 Javascript 的情况下绘制线元素，它工作正常。但是，如果我使用 Javascript 绘制相同的线元素，则该元素的位置不同。错误在哪里？有人可以帮我吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T08:49:45.747

我解决了这个问题。

我在 v:group av:line 元素中使用了一个 ID

```
<v:line id="progression-0" from="-10, -10" to="-10, -10"></v:line> 
```

在 Javascript 中，我使用了以下代码：

```
var line = document.getElementById("progression-0");
line.from = x + "," + y ;
line.to = x2 + "," + y2;
line.strokeweight = 4+"px";
line.style.opacity = 0.3; 
```

# objective-c - 自动引用计数 (ARC)。ARC 可以处理释放一个普通的 ole c 数组吗？

> ID：13143869
> 
> 赞同：0
> 
> 时间：2012-10-30T16:49:41.643
> 
> 标签：objective-c, automatic-ref-counting, dealloc

我正在加快使用 ARC 进行 iOS 应用程序开发的速度。有时，我只需要一个普通的旧 c-struct 的普通 ole c-array 即可完成工作。在 ARC 之前，我只想添加`free()`到我的`dealloc`方法中。有了 ARC，就不再需要`dealloc`. 我可以添加一个 ARC 指令来告诉编译器处理释放我的 c 数组吗？

Per Tom 的回答是 dealloc 方法

```
// EIVertex
struct EIVertex {
    GLKVector3 p;
    GLKVector3 n;
    GLKVector3 barycentric;
    GLKVector2 st;
};

typedef struct EIVertex EIVertex;

// ivar declaration
EIVertex *_vertices;

// malloc an array of EIVertex
_vertices = (EIVertex *)malloc([_triangles count] * sizeof(EIVertex));

// Note lack of [super dealloc]
- (void)dealloc{

    // ARC will not handle mem. management for plain ole c arrays.
    free(_vertices);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T16:52:50.670

你仍然可以重载dealloc。唯一的事情是你不能明确地调用它。所以像以前一样写dealloc，但不要调用`[super dealloc]`它。

# c# - 获取页数的逻辑

> ID：13143871
> 
> 赞同：2
> 
> 时间：2012-10-30T16:49:42.540
> 
> 标签：c#, .net-1.1

如果一个页面上可以打印 27 个项目并且项目数可以是任何正数，那么如果我有项目数，我如何找到页数，我尝试了模数和除法，但没有帮助。

```
double TotalNumberOfPages = NumberOfItems/27;
int a = (int)TotalNumberOfPages; 
```

上面的代码有效，但逻辑上好像 double 是 3.00000000000001 我希望它四舍五入为 4 而不是 3，由于某种原因我不能使用“round”方法。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-30T16:51:46.397

当然你`TotalNumberOfPages`应该是一个整数。在这种情况下，请尝试：

```
int PageSize = 27;
int TotalNumberOfPages = (int)Math.Ceiling((double)NumberOfItems / (double)PageSize); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-30T16:53:05.593

```
(NumberOfItems + ItemsPerPage - 1) / ItemsPerPage; 
```

在你的情况下 ItemsPerPage = 27

# java - 套接字连接在独立的“main(..)”类中运行良好，但在 servlet 环境中超时

> ID：13143873
> 
> 赞同：1
> 
> 时间：2012-10-30T16:49:43.890
> 
> 标签：java, windows, networking, servlets, operating-system

让我通过一个场景来解释这个问题：

1）用户访问我的页面“www.proxy4html.com”，填写表格：

```
 web-address: |www.google.co.in | 
```

2) 点击提交。

3) 在浏览器地址栏中获取带有“www.proxy4html.com”的谷歌主页。

现在要从网络上获取内容，我正在使用**java.net.HttpURLConnection**（尽管为了解决这个问题，我也尝试了其他几个选项）。如果代码独立运行，它会按预期工作

（即*在通过**公共静态无效主（字符串..）..**线程运行时，它获取给定网址上的任何html*）。

但是在**Servlet**环境下运行时同样会抛出

**java.net.ConnectException：连接超时：连接**

这是代码：

```
public void write(String urlString, PrintWriter writer) {
    URL url;
    try {
        url = new URL(urlString);
        HttpURLConnection huc = (HttpURLConnection) url.openConnection();
        HttpURLConnection.setFollowRedirects(false);
        huc.setConnectTimeout(15 * 1000 * 60);
        huc.setReadTimeout(15 * 1000 * 60);
        huc.setRequestMethod("GET");

        huc.connect();
        InputStream input = url.openStream();
        logger.info("got input stream");//I never reach here in servlet env :(              
        int i = 0;
        while((i = input.read()) != -1) {
            writer.write(i);
            System.out.print((char)i);
        }

        input.close();
    } catch (ConnectException e) {
        logger.log(Level.SEVERE, "", e);
    } catch (MalformedURLException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }

} 
```

**给出的代码示例可能看起来不干净，但需要注意的是，当从传递正确URL**（以及任何输出流）的Servlet 调用上述方法时，永远不会建立连接。

我在我的本地机器上运行所有这些，它在某个公司网络中的本地机器上（你可能不想得到关于防火墙的任何结论，因为相同的代码在 psvmain 下运行）。

请帮忙....

提前致谢。

**编辑：**我在家里尝试了一些相同的东西，它按预期工作得很好。**我想这个问题更多地属于操作系统领域而不是java。**所以我想再次改写我的问题：

*   **操作系统（Window 7）是否以某种方式阻止tomcat发出Http请求？**
*   **他们在 Window 7 下是否有任何配置不允许应用程序发出浏览器以外的 Http 请求？**
*   **我曾多次看到Mozilla Firefox（我是从一个复制而不是安装的目录运行的，即可能没有管理员权限并且没有窗口注册表）永远无法对其自身进行定期更新。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T08:16:48.477

我知道您更愿意坚持这不是防火墙问题（因为相同的代码可以作为独立的 Java 程序运行良好），但我愿意在这里冒险。

如果您绝对确定在两种情况下（独立情况和 Tomcat 情况）都在运行相同的代码，那么仍然有可能是防火墙问题。

Windows 7 中的内置防火墙为每个进程的每个端口分配出站规则。是否有可能您的独立程序使用已允许出站访问的 JVM 运行，而您的 Tomcat 服务器使用不允许出站访问的 JVM 运行？

换句话说，您*绝对*确信您的独立程序和您的 Tomcat 服务器是由同一个 JVM 运行的吗？很像`java.exe`吗？在 Windows 下，您的独立程序可能实际上是由`javaw.exe`.

（您没有提到您是否尝试完全禁用防火墙。如果您可以完全禁用防火墙，我建议您这样做，以排除故障）

# c# - 代码优先元数据

> ID：13143874
> 
> 赞同：7
> 
> 时间：2012-10-30T16:49:46.790
> 
> 标签：c#, entity-framework

当我通过**EntityConnectionStringBuilder使用****代码优先**方法时，我应该使用什么作为元数据

 **```
EntityConnectionStringBuilder entityBuilder;
entityBuilder.MetaData = ??  // Metadata = @"res://*/;"; 
```

我收到了这个错误：

```
{"The specified metadata path is not valid. A valid path must be either an existing directory, an existing file with extension '.csdl', '.ssdl', or '.msl', or a URI that identifies an embedded resource."} 
```

*   我没有在这种方法上制作任何模型，因为我认为它不需要。

*   我想要的只是以编程方式完成所有事情。

*   在数据库优先方法中一切正常。

*   在这里，我创建了连接字符串并将其传递给上下文。

*   EF 版本是 5.0。

*   数据库已存在。

*   我应该使用其他任何东西来避免`MetaData`检查，例如初始化程序或 ??

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T18:19:07.980

对于 CodeFirst，您只使用“常规”连接字符串 - 即没有元数据。CodeFirst 将在幕后为您生成元数据工件，并将它们传递给 ObjectContext 实例，无需任何额外操作。您不应使用 EntityConnectionStringBuilder。

通常，您只需从 DbContext 派生上下文并创建一个无参数构造函数，该构造函数调用 base 并从配置中传递连接字符串的名称，例如：

```
public class MyContext : DbContext
{
    public MyContext() : base("Name=NorthwindConnectionString") {}
} 
```

您还可以将连接字符串传递给 DbContext。如果您想使用连接字符串构建器，您将为此使用 SqlConnectionStringBuilder 而不是 EntityConnectionStringBuilder。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T18:06:04.357

您应该使用生成的模型添加连接字符串详细信息以及文件的路径，下面是您应该放入其中的示例。

```
string efConnectionString= @"metadata=res://*/Blogging.csdl|res://*/Blogging.ssdl|res://*/Blogging.msl;provider=System.Data.SqlClient;provider connection string=""Data Source=.\SQLEXPRESS;Initial Catalog=Blogging;Integrated Security=True;MultipleActiveResultSets=True""";

EntityConnectionStringBuilder builder = new EntityConnectionStringBuilder(connectionString);

SqlConnectionStringBuilder sbuilder = new SqlConnectionStringBuilder(builder.ProviderConnectionString);

sbuilder.DataSource = "New Datasource";

builder.ProviderConnectionString = sbuilder.ConnectionString;
efConnectionString = builder.ConnectionString; 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-10-30T18:29:27.660

答案很简单：不是 MetaData，而是模型映射，应该在这里完成：

```
protected override void OnModelCreating(ModelBuilder modelBuilder)
{
  // The Mapping
} 
```**

# android - 在显示不同的选项卡和详细信息视图时交换 ActionBar 项目

> ID：13143875
> 
> 赞同：0
> 
> 时间：2012-10-30T16:49:48.727
> 
> 标签：android, android-layout, android-fragments, android-actionbar, android-ui

这不是一个技术问题，而是关于设计 Android 平板电脑 UI 的最佳实践的建议。

我已经确定了 Android 手机应用程序的概念。

启动的第一个活动（主视图）包含一个带有三个片段的选项卡栏，用户可以从中启动不同类型的详细视图活动。

主视图活动和详细视图活动在其操作栏中都有操作。不同的详细视图有不同的操作项。

我的问题是：我应该如何在平板电脑上组织和显示操作项，其中一项活动并排结合了两个视图？

问题是主视图片段和显示的任何类型的细节片段的统一操作栏。我认为在打开不同类型的详细视图时开始弄乱操作栏的内容不是一个好主意。

Android 设计指南在这方面并没有告诉你太多。“多窗格布局”部分中有一个联系人应用程序示例，但它实际上并没有解决问题。它通过将单个相关操作作为图标放在详细视图片段中来规避它。

任何关于最佳实践和参考的建议都值得赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T17:03:37.770

如果我正确理解了您的问题，我认为这基本上是一个问题，即多个`Fragment`s（即在平板电脑等多窗格布局上时）应该如何为单个 ActionBar 做出贡献，这非常简单，实际上在这里的[文档](http://developer.android.com/guide/components/fragments.html#ActionBar)。本质上，您可以`Fragment`通过一些简单的 API 调用让多个 s 都将自己的菜单项/操作项贡献给单个操作栏。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T17:16:21.397

我建议将您的主详细信息图标留在操作栏中，同时将您的详细信息视图图标放在详细信息片段中的另一个视图/区域中。

我的理由是操作栏中的图标影响/与整个应用程序/屏幕上的视图相关联。虽然您的详细信息图标仅影响详细信息视图，因此在显示多个片段时不应出现在操作菜单中。

我想你将不得不看看设计的外观。

我不喜欢在同一个活动中更改操作栏图标（即使它包含多个片段），但是当你加载一个新活动时（比如在你的手机设计中），我说是的，把它们扔到操作栏中.

# c# - 将字符串添加到列表框时数据丢失

> ID：13143878
> 
> 赞同：0
> 
> 时间：2012-10-30T16:49:55.123
> 
> 标签：c#

我正在循环浏览一个二维数组的内容，该数组包含基因交叉的 Punnett Square 计算结果。我需要总结结果，以便用户可以轻松查看唯一实例。我可以通过将结果放入文本框中来完成此操作，但是当我尝试使用 ListBox 显示数据时，部分信息会丢失，即将 AaBBCc 类型数据转换为与特征直接相关的内容用户最初选择的。

这是该操作的主要代码块：

```
 foreach (string strCombination in arrUniqueCombinations)
    {
        int intUniqueCount = 0;
        decimal decPercentage;
        foreach (string strCrossResult in arrPunnettSQ)
        {
            if (strCrossResult == strCombination)
            {
                intUniqueCount++;
            }
        }
        decPercentage = Convert.ToDecimal((intUniqueCount*100)) / Convert.ToDecimal(intPossibleCombinations);
        txtReport.AppendText(strCombination + " appears " + intUniqueCount.ToString() + " times or " + decPercentage.ToString() + "%."+ Environment.NewLine);

        lstCrossResult.Items.Add(DecodeGenome(strCombination) + " appears " + intUniqueCount.ToString() + " times or " + decPercentage.ToString() + "%.");
    } 
```

为了将数据附加到文本框，我使用了这段代码，它工作得很好：

```
txtReport.AppendText(DecodeGenome(strCombination) + " appears " + intUniqueCount.ToString() + " times or " + decPercentage.ToString() + "%."+ Environment.NewLine); 
```

给出结果： **Trait 1 Het.，Trait 3 出现 16 次或 25%。**

要将结果添加到列表框中，可以使用：

```
lstCrossResult.Items.Add(strCombination + " appears " + intUniqueCount.ToString() + " times or " + decPercentage.ToString() + "%."); 
```

给出结果： **AaBBCc 出现 16 次或 25%。**

但是 strCombination 的内容是 AaBBCc，我需要将它翻译成“Trait 1 Het.,Trait 3”，我用这段代码完成了：

```
private string DecodeGenome(string strGenome)
{
    string strTranslation = "";
    int intLength = strGenome.Length;
    int intCounter = intLength / 2;
    string[] arrPairs = new string[intLength / 2];

    //Break out trait pairs and load into array

    for (int i = 1; i <= intLength; i++)
    {
        arrPairs[i / 2] = strGenome.Substring((i-1),2);
        i++;
    }

    foreach (string strPair in arrPairs)
    {
        char chFirstLetter = strPair[0];
        char chSecondLetter = strPair[1];
        intCounter = intCounter - 1;

        if (Char.IsUpper(chFirstLetter))
        {
            if (!Char.IsUpper(chSecondLetter))
            {
                if (intCounter > 0)
                {
                    txtReport.AppendText(GetDescription(strPair.Substring(0, 1)) + " Het.,");
                }
                else
                {
                    txtReport.AppendText(GetDescription(strPair.Substring(0, 1)));
                }
            }
        }
        else
        {
            if (!Char.IsUpper(chSecondLetter))
            {
                if (intCounter > 0)
                {
                    txtReport.AppendText(GetDescription(strPair.Substring(0, 1)) + ",");
                }
                else
                {
                    txtReport.AppendText(GetDescription(strPair.Substring(0, 1)));
                }
            }

        }

    }

    return strTranslation;
} 
```

这在文本框中显示没有问题，但是当我尝试将其作为项目放入列表框中时，它会将其变为空。而不是： **“Trait 1 Het.,Trait 3 出现 16 次或 25%。”** 我得到： **“出现 16 次或 25%。”**

我尝试将结果添加到 ArrayList，然后在处理完所有内容后填充列表框，但结果是相同的。

任何关于为什么列表框不接受翻译的 AaBBCc 信息的线索将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T16:55:00.897

strTranslation 从未设置。一切都推送到 txtReport.AppendText

# php - 将 PHP 数组写入文件会生成二进制而不是纯文本

> ID：13143881
> 
> 赞同：3
> 
> 时间：2012-10-30T16:50:01.257
> 
> 标签：php

我正在尝试以纯文本（非二进制）将数组或对象写入文件，但是每当我遍历数组并查看文件时，我都会收到二进制文件。

`$this->user`并`$this->temp_files['in_file_name']`在之前传递给函数。

```
$user_array = (array)$this->user;
$data = "";

foreach ($user_array as $key => $value) {
    $data .= "$key $value\n";
}

file_put_contents($this->temp_files['in_file_name'], $data); 
```

如果我只是将一个字符串传递给`$data`它，它会以纯文本形式写入文件，但是当我遍历对象或数组时，我会收到二进制文件。有没有办法在文件中获取这个数组的纯文本版本？

`$this->user`是一个数据库行，作为一个对象，来自`Ion_Auth`：

```
$this->user =$this->ion_auth->user($this->user_id)->row(); 
```

这是文件输出的一部分

> 4461 7465 2054 7565 7364 6179 204f 6374 6f62 6572 2033 302c 2032 3031 3269 6420 320a 6970 5f61 6464 7265 7373 207f 0000 010a 7573 6572 6e61 6d65 2062 7261 6e64 6f6e 2062 6f73 7765 6c6c 0a70 6173 7377 6f72 6420 6539 3936 3630 6665 3039 3535 6663 3862 3431 6639 3838 3066 3639 6131 6664 6635

用户数组的 var_dump 是：（出于数据安全原因，我更改了一些值）

```
array (size=22)
  'id' => string '2' (length=1)
  'ip_address' => string '��' (length=4)
  'username' => string 'brandon' (length=15)
  'password' => string 'changed' (length=40)
  'salt' => null
  'email' => string 'brandon@changed.net' (length=27)
  'activation_code' => null
  'forgotten_password_code' => null
  'forgotten_password_time' => null
  'remember_code' => string 'changed' (length=40)
  'created_on' => string '1337702147' (length=10)
  'last_login' => string '1351607850' (length=10)
  'active' => string '1' (length=1)
  'first_name' => string 'Brandon' (length=7)
  'last_name' => string 'changed' (length=7)
  'company' => string 'changed' (length=17)
  'phone' => string '804-814-changed' (length=12)
  'store' => string 'mechanicsville' (length=14)
  'delivery' => string '1' (length=1)
  'receiveEmails' => string '1' (length=1)
  'customerType' => string 'business' (length=8)
  'user_id' => string '2' (length=1) 
```

如果我`file_get_contents`对文件执行操作，它可以正确回显，但我希望文件以纯文本形式存储。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T19:02:34.543

解码您发布的十六进制字节会显示正确的数据。所以我猜一下：PHP 正在完美地写入文件，但是 IP 地址 (127.0.0.1) 中的原始空字节使您用来打开文件的操作系统或编辑器感到困惑，认为这不是文本文件，因此它会在十六进制编辑器视图中为您显示它。尝试在其他编辑器中打开文件，或将`'ip_address'`字段保存为文本。

# sql - 查询的日期特定条件

> ID：13143883
> 
> 赞同：2
> 
> 时间：2012-10-30T16:50:09.880
> 
> 标签：sql, sql-server

我有一个查询正在收集从上个月 20 日到本月 19 日的数据，它似乎正在工作。

```
(DateTime >= 19+dateadd(mm,datediff(mm,0,getdate())-1,0)   
AND  DateTime <  18+dateadd(mm,datediff(mm,0,getdate()),0)) 
```

我现在需要以某种方式对其进行修改以满足以下要求...

无论何时运行，始终显示当前报告。

目前发生的情况是......如果在上个月 20 日和本月 19 日之间的任何时间运行，它会很好......但只要它在本月 20 日到本月 31 日运行。 ...它一直显示最后一个时期...。从技术上讲，我要求它这样做。

我需要的是......当它成为这个月的 20 日......它开始一个新的报告。

正如我所说的......问题期是在20日和月底之间。一旦新的一个月开始......一切都很好。

在运行报告时，它必须以某种方式考虑在内。

谢谢。

戴夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T17:00:13.427

戴夫，我认为这可能对你有用。

```
 (
         (Day(GetDate()) > 19 and create_date between dateadd(mm, datediff(mm, 0, getdate()), 0) + 19 and dateadd(mm, datediff(mm, 0, getdate()), 0) + 18)
         or (Day(GetDate()) < 20 and create_date between dateadd(mm, datediff(mm, 0, getdate())-1, 0) + 19 and dateadd(mm, datediff(mm, 0, getdate())-1, 0) + 18)
    ) 
```

它本质上检查当前日期是否大于 19 并应用您当前的逻辑而不减去一个月。我当天小于您当前逻辑应用的第 20 天。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T17:16:31.647

```
(
 DateTime >= CASE WHEN day(GETDATE()) >= 20 THEN 19 + dateadd(mm, datediff(mm, 0, getdate()), 0) ELSE 19 + dateadd(mm, datediff(mm, 0, getdate()) - 1, 0) END AND
 DateTime < CASE WHEN day(GETDATE()) >= 20 THEN 18 + dateadd(mm, datediff(mm, 0, getdate())+ 1, 0) ELSE 18 + dateadd(mm, datediff(mm, 0, getdate()), 0) END
) 
```

# java - 如何检测 jaxb 中的意外元素

> ID：13143886
> 
> 赞同：2
> 
> 时间：2012-10-30T16:50:19.350
> 
> 标签：java, xml, xsd, jaxb

我使用 JAXB 2.2.7 从我的 XML 文件中获取数据，问题是我需要检查我的 XML 文件中是否有一些意外元素，但 JAXB 不在乎并且可以完美地工作而没有任何错误。

例子 ：

```
 <classe> 
  <detail>
        <knowElementFromXSD>value</knowElementFromXSD>
        <unknowElementFromXSD>OtherValue</unknowElementFromXSD>
  </detail>
</classe> 
```

例如，我需要 JAXB 在此 XML 文件中引发错误，因为在我的 XSD 中没有定义。

如果有人有想法，我在互联网上找不到任何解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T17:05:16.723

有几种不同的方法可以完成您的用例：

**选项1 -`ValidationEventHandler`**

您可以`ValidationEventHandler`在 Unmarshaller 上设置 a 以收到意外元素等事件的通知。默认情况下，JAXB (JSR-222) 实现将忽略未映射的元素。

**选项 #2 - 模式验证**

如果您在 上设置一个实例，`javax.xml.validation.Schema`则`Unmarshaller`XML 输入将在未编组时进行验证。

*   [http://blog.bdoughan.com/2010/12/jaxb-and-marshalunmarshal-schema.html](http://blog.bdoughan.com/2010/12/jaxb-and-marshalunmarshal-schema.html)

# python - Python 模块 __builtin__ 没有属性 NoneType

> ID：13143887
> 
> 赞同：1
> 
> 时间：2012-10-30T16:50:24.577
> 
> 标签：python

由于超出此问题范围的原因，我正在构建一个序列化机制。我遇到了`None`我认为需要特殊情况的对象的问题。谁能解释为什么`NoneType`与其他内置类型的处理方式不同？还是我错过了什么？

```
>>> import sys
>>> builtin = sys.modules['__builtin__']
>>> getattr(builtin,'int')
<type 'int'>
>>> getattr(builtin,'list')
<type 'list'>
>>> getattr(builtin,'NoneType')
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
AttributeError: 'module' object has no attribute 'NoneType' 
```

Ubuntu 上的 python 2.6.5

### 澄清

当然

```
getattr(builtin,'None') 
```

工作并返回一个`None`对象，它是`NoneType`. 但是类对象存在于`__builtin__`模块中，用于其他所有内容。因此，此代码适用于所有内置类型，除了`None`：

```
klass = getattr(builtin, obj.__class__.__name__) 
```

这是有道理的

```
>>> type(0).__module__
'__builtin__'
>>> type("foo").__module__
'__builtin__'
>>> type(None).__module__
'__builtin__' 
```

`None`除非我遗漏了什么，否则这失败的事实似乎是 Python 中的一个疏忽。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T17:03:57.473

我想你所说`NoneType`的会被特殊对待，因为你几乎不需要访问它。你可以说

```
>>> NoneType = type(None) 
```

将此类型绑定到一个名称，但这没有共同的目的：`isinstance(x, NoneType)`将是一个人为的等价于`x is None`; 构造函数提出一个`TypeError`声明，表明您不应该构造实例；并且从它派生也是被禁止的。

但是，如果您出于某些高级目的需要它，您仍然可以通过 、 或 获取该`type(None)`类型`None.__class__`。`types.NoneType`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T18:38:11.373

这很奇怪。但是关于 python 2 中的类和对象的许多奇怪的事情也是如此。从简单的脚本演变为成熟的 OO 的一堆语言都是如此。Python 3 旨在解决这个问题。

NoneType 已经是一个特例，因为它是单例的类对象，所以它不能被称为构造函数。

```
TypeError: cannot create 'NoneType' instances 
```

因此，如果您正在编写通用序列化程序，那么无论如何您都需要特殊情况 None，无论您是否无法查找类对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T16:56:20.733

您是否尝试过查看：

```
>>> dir(builtin)
['ArithmeticError', 'AssertionError', 'AttributeError', 'BaseException', 'BufferError', 'BytesWarning', 'DeprecationWarning', 'EOFError', 'Ellipsis', 'EnvironmentError', 'Exception', 'False', 'FloatingPointError', 'FutureWarning', 'GeneratorExit', 'IOError', 'ImportError', 'ImportWarning', 'IndentationError', 'IndexError', 'KeyError', 'KeyboardInterrupt', 'LookupError', 'MemoryError', 'NameError', 'None', 'NotImplemented', 'NotImplementedError', 'OSError', 'OverflowError', 'PendingDeprecationWarning', 'ReferenceError', 'RuntimeError', 'RuntimeWarning', 'StandardError', 'StopIteration', 'SyntaxError', 'SyntaxWarning', 'SystemError', 'SystemExit', 'TabError', 'True', 'TypeError', 'UnboundLocalError', 'UnicodeDecodeError', 'UnicodeEncodeError', 'UnicodeError', 'UnicodeTranslateError', 'UnicodeWarning', 'UserWarning', 'ValueError', 'Warning', 'ZeroDivisionError', '_', '__debug__', '__doc__', '__import__', '__name__', '__package__', 'abs', 'all', 'any', 'apply', 'basestring', 'bin', 'bool', 'buffer', 'bytearray', 'bytes', 'callable', 'chr', 'classmethod', 'cmp', 'coerce', 'compile', 'complex', 'copyright', 'credits', 'delattr', 'dict', 'dir', 'divmod', 'enumerate', 'eval', 'execfile', 'exit', 'file', 'filter', 'float', 'format', 'frozenset', 'getattr', 'globals', 'hasattr', 'hash', 'help', 'hex', 'id', 'input', 'int', 'intern', 'isinstance', 'issubclass', 'iter', 'len', 'license', 'list', 'locals', 'long', 'map', 'max', 'memoryview', 'min', 'next', 'object', 'oct', 'open', 'ord', 'pow', 'print', 'property', 'quit', 'range', 'raw_input', 'reduce', 'reload', 'repr', 'reversed', 'round', 'set', 'setattr', 'slice', 'sorted', 'staticmethod', 'str', 'sum', 'super', 'tuple', 'type', 'unichr', 'unicode', 'vars', 'xrange', 'zip'] 
```

`NoneType`未列为内置类型（即使`None`是）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-30T16:57:01.657

你应该尝试： `getattr(builtin,"None")`不`getattr(builtin,"NoneType")`，因为`NoneType`是 的值`type(None)`，所以它不是 的属性`builtin`。

```
In [49]: type(None)

Out[49]: <type 'NoneType'> 
```

这不起作用，因为 Python 无法在`NoneType`任何地方找到。

```
In [50]: type(NoneType)
---------------------------------------------------------------------------
NameError                                 Traceback (most recent call last)

/home/monty/<ipython console> in <module>()
NameError: name 'NoneType' is not defined 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-30T17:14:00.550

NoneType 在类型模块中可用。

```
>>> import types
>>> types.NoneType
<type 'NoneType'> 
```

如果您对类型做任何事情，Infact types 模块是使用的正确位置，不要依赖内置函数中存在的**类型**

这可能是因为 None 不是真正的类型，它是[内置常量](http://docs.python.org/2/library/constants.html)。甚至文档都说 None 的类型是 types.NoneType，但你是对的，它是以特殊方式实现的，并且与所有其他类型不一致。

# java - JEE6 上的独立和域有什么区别？

> ID：13143890
> 
> 赞同：48
> 
> 时间：2012-10-30T16:50:30.157
> 
> 标签：java, jboss, java-ee-6, jboss7.x

我正在启动一个 JBoss 用于开发，并且我将它用作独立的。我在生产环境中读到 JBoss 应该是一个域。

我搜索了那个以了解比之间有什么区别。但我没有找到任何解释清楚的文件。

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2012-10-30T18:00:27.103

这并不正确。单机版适合生产。它通常用于生产，尤其是当您只需要一个服务器实例时。

当您运行多个 JBoss AS 实例并且您想要一个可以控制配置的单点时使用域。[您可以在文档](https://docs.wildfly.org/21/Admin_Guide.html#Operating_modes)中阅读有关它的更多信息。

**更新**

由于 JBoss AS 7 文档已存档，该链接已更改为 WildFly 的最新版本，但仍可在[https://docs.jboss.org/author/display/AS71/Admin%20Guide.html#8094211_AdminGuide-获得独立服务器](https://docs.jboss.org/author/display/AS71/Admin%20Guide.html#8094211_AdminGuide-StandaloneServer)

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-09-22T17:06:57.203

**独立模式**

*   每个 JBoss 服务器都有自己的配置
*   单个JVM进程

**域模式**

*   多台服务器的中央控制
*   多台服务器的集中配置

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2015-01-22T11:42:27.660

重要的是要了解**托管域和独立服务器之间的选择完全取决于您的服务器的管理方式，而不是它们为最终用户请求提供服务的能力**。当涉及到高可用性集群时，这种区别尤其重要。

因此，鉴于所有这些：

*   单个服务器安装在托管域中运行没有任何好处，因此运行独立服务器是更好的选择。
*   对于多服务器生产环境，选择运行托管域还是运行独立服务器取决于用户是否希望使用托管域提供的集中管理功能。
*   运行独立服务器更适合大多数开发场景。**任何可以在受管域中实现的单独服务器配置也可以在独立服务器中实现**，因此即使正在开发的应用程序最终将在受管域安装的生产环境中运行，很多（可能大多数）开发都可以使用独立服务器。

> 对于上述解释和更多请点击[此链接](https://docs.jboss.org/author/display/WFLY8/Operating+modes?_sscc=t)

# r - 如何在ggplot中独立定位两个图例

> ID：13143894
> 
> 赞同：28
> 
> 时间：2012-10-30T16:50:36.870
> 
> 标签：r, ggplot2, legend

标题很好地涵盖了它。

我有两个关于大小和颜色的图例，并希望有一个，比如说，在顶部，一个在图表中。

这是否可能，如果可以，如何

TIA

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-11-11T01:23:34.400

可以通过从图中提取单独的图例，然后将图例安排在相关图中来完成。这里的代码使用`gtable`包中的函数进行提取，然后使用`gridExtra`包中的函数进行排列。目的是要有一个包含颜色图例和尺寸图例的图。首先，从仅包含颜色图例的图中提取颜色图例。其次，从仅包含尺寸图例的图中提取尺寸图例。第三，绘制一个不包含图例的图。第四，将剧情和两个传说合并成一个新的剧情。

```
# Some data
df <- data.frame(
  x = 1:10,
  y = 1:10,
  colour = factor(sample(1:3, 10, replace = TRUE)),
  size = factor(sample(1:3, 10, replace = TRUE)))

library(ggplot2)
library(gridExtra)
library(gtable)
library(grid)

    ### Step 1
# Draw a plot with the colour legend
(p1 <- ggplot(data = df, aes(x=x, y=y)) +
   geom_point(aes(colour = colour)) +
   theme_bw() +
   theme(legend.position = "top"))

# Extract the colour legend - leg1
leg1 <- gtable_filter(ggplot_gtable(ggplot_build(p1)), "guide-box") 

    ### Step 2
# Draw a plot with the size legend
(p2 <- ggplot(data = df, aes(x=x, y=y)) +
   geom_point(aes(size = size)) +
   theme_bw())

# Extract the size legend - leg2
leg2 <- gtable_filter(ggplot_gtable(ggplot_build(p2)), "guide-box") 

    # Step 3
# Draw a plot with no legends - plot
(plot <- ggplot(data = df, aes(x=x, y=y)) +
   geom_point(aes(size = size, colour = colour)) +
   theme_bw() +
   theme(legend.position = "none"))

    ### Step 4
# Arrange the three components (plot, leg1, leg2)
# The two legends are positioned outside the plot: 
# one at the top and the other to the side.
plotNew <- arrangeGrob(leg1, plot, 
         heights = unit.c(leg1$height, unit(1, "npc") - leg1$height), ncol = 1)

plotNew <- arrangeGrob(plotNew, leg2,
          widths = unit.c(unit(1, "npc") - leg2$width, leg2$width), nrow = 1)

grid.newpage()
grid.draw(plotNew)

# OR, arrange one legend at the top and the other inside the plot.
plotNew <- plot + 
        annotation_custom(grob = leg2, xmin = 7, xmax = 10, ymin = 0, ymax = 4)

plotNew <- arrangeGrob(leg1, plotNew,
     heights = unit.c(leg1$height, unit(1, "npc") -  leg1$height), ncol = 1)

grid.newpage()
grid.draw(plotNew) 
```

![在此处输入图像描述](../Images/dd45d47555ba040686229d1b94e21dda.png)

![在此处输入图像描述](../Images/43f0bfdc5d4bebb8536bdef1986aa8de.png)

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2016-06-18T12:36:22.587

使用`ggplot2`和`cowplot`（= ggplot2 扩展）。

该方法类似于 Sandy 的方法，因为它将图例作为单独的对象取出，并让您独立进行放置。它主要是为多个图例设计的，这些图例属于图网格中的两个或多个图。

思路如下：

1.  **创建没有**图例的 Plot1、Plot2、...、PlotX
2.  **创建带有**图例的 Plot1、Plot2、...、PlotX
3.  将步骤 1 和 2 中的图例提取到单独的对象中
4.  设置图例网格并按照您想要的方式排列图例
5.  创建结合图和图例的网格

它看起来有点复杂且耗时/代码，但设置一次，您可以适应并使用它来进行各种情节/图例自定义。

```
library(ggplot2)
library(cowplot)

# Some data
df <- data.frame(
  Name = factor(rep(c("A", "B", "C"), 12)),
  Month = factor(rep(1:12, each = 3)),
  Temp = sample(0:40, 12),
  Precip = sample(50:400, 12)
)

# 1\. create plot1
plot1 <- ggplot(df, aes(Month, Temp, fill = Name)) +
  geom_point(
    show.legend = F, aes(group = Name, colour = Name),
    size = 3, shape = 17
  ) +
  geom_smooth(
    method = "loess", se = F,
    aes(group = Name, colour = Name),
    show.legend = F, size = 0.5, linetype = "dashed"
  )

# 2\. create plot2
plot2 <- ggplot(df, aes(Month, Precip, fill = Name)) +
  geom_bar(stat = "identity", position = "dodge", show.legend = F) +
  geom_smooth(
    method = "loess", se = F,
    aes(group = Name, colour = Name),
    show.legend = F, size = 1, linetype = "dashed"
  ) +
  scale_fill_grey()

# 3.1 create legend1
legend1 <- ggplot(df, aes(Month, Temp)) +
  geom_point(
    show.legend = T, aes(group = Name, colour = Name),
    size = 3, shape = 17
  ) +
  geom_smooth(
    method = "loess", se = F, aes(group = Name, colour = Name),
    show.legend = T, size = 0.5, linetype = "dashed"
  ) +
  labs(colour = "Station") +
  theme(
    legend.text = element_text(size = 8),
    legend.title = element_text(
      face = "italic",
      angle = -0, size = 10
    )
  )

# 3.2 create legend2
legend2 <- ggplot(df, aes(Month, Precip, fill = Name)) +
  geom_bar(stat = "identity", position = "dodge", show.legend = T) +
  scale_fill_grey() +
  guides(
    fill =
      guide_legend(
        title = "",
        title.theme = element_text(
          face = "italic",
          angle = -0, size = 10
        )
      )
  ) +
  theme(legend.text = element_text(size = 8))

# 3.3 extract "legends only" from ggplot object
legend1 <- get_legend(legend1)
legend2 <- get_legend(legend2)

# 4.1 setup legends grid
legend1_grid <- cowplot::plot_grid(legend1, align = "v", nrow = 2)

# 4.2 add second legend to grid, specifying its location
legends <- legend1_grid +
  ggplot2::annotation_custom(
    grob = legend2,
    xmin = 0.5, xmax = 0.5, ymin = 0.55, ymax = 0.55
  )

# 5\. plot "plots" + "legends" (with legends in between plots)
cowplot::plot_grid(plot1, legends, plot2,
  ncol = 3,
  rel_widths = c(0.45, 0.1, 0.45)
) 
```

![](../Images/d9b6dcf869db42b889603a6b69f945ec.png)

^(由[reprex 包](https://reprex.tidyverse.org)（v0.3.0）于 2019-10-05 创建)

* * *

更改最终`plot_grid()`调用的顺序将图例向右移动：

```
cowplot::plot_grid(plot1, plot2, legends, ncol = 3, 
                   rel_widths = c(0.45, 0.45, 0.1)) 
```

[![示例 2](../Images/e63d5d1c6cb7199a10a70332c667f06b.png)](https://i.stack.imgur.com/q2U6l.png)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-11-01T07:00:01.263

据我了解，基本上对`ggplot2`. 这是 Hadley 书中的一段（第 111 页）：

*ggplot2 尝试使用尽可能少的图例来准确传达情节中使用的美学。如果一个变量与一种以上的美学一起使用，它会通过组合图例来做到这一点。图 6.14 显示了点 geom 的一个例子：如果颜色和形状都映射到同一个变量，那么只需要一个图例。为了合并图例，它们必须具有相同的名称（相同的图例标题）。因此，如果您更改其中一个合并图例的名称，则需要为所有图例更改名称。*

# ruby-on-rails - ActiveAdmin 过滤 ActiveRecord 模型上的浮动字段

> ID：13143896
> 
> 赞同：2
> 
> 时间：2012-10-30T16:50:38.243
> 
> 标签：ruby-on-rails, activerecord, activeadmin

我发现[ActiveAdmin](http://activeadmin.info)对于为我们的 ActiveRecord 模型创建相当完整的棕色脚手架非常有用。但是，我们的模型有浮点（和一些小数）列，ActiveAdmin 无法为它们创建过滤器。

例如，

```
ActiveAdmin.register ForexRate do
  filter :rate, :as => :numeric
end 
```

给我NoMethodError，说

```
undefined method `rate_gt' for #<MetaSearch::Searches::ForexRate:0x007fa4427bb018> 
```

我在这里做错了什么？提前致谢！

PS我已经确认相同的过滤器适用于整数列。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T17:29:23.277

快速查看[源代码](https://github.com/gregbell/active_admin/blob/master/lib/active_admin/filters/forms.rb#L29)，看来您做得对。我自己做过，没有问题。默认情况下，ActiveAdmin 应该捕获浮点数并对其应用数字过滤器。您是否尝试过不指定`:as => :numeric`并查看它是否有效？您能否确认将您的字段存储在数据库中作为浮点数而不是字符串？最后，是否引用了确实存在且名称正确的列？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T09:07:32.073

看起来问题出在我的桌子上有`rate`as`REAL`而不是`FLOAT`or `DECIMAL(x,y)`。将其更改为 FLOAT 或 DECIMAL 解决了该问题。

有趣的是，当列是 REAL 或其他无法识别的类型时，ActiveRecord::Base#inspect 变为：

```
>> ForexRate
=> ForexRate(id: integer, created_at: timestamp, updated_at: timestamp, rate:  , from: string, to:string) 
```

（注意旁边的空白`rate:`）

# php - Magento：在后端为前端 CMS 页面添加内容管理字段？

> ID：13143897
> 
> 赞同：0
> 
> 时间：2012-10-30T16:50:41.657
> 
> 标签：php, magento

这可能很难解释，但我会尽力而为！

我在 Magento 中创建了相当基本的 CMS 页面，这些页面由标准 HTML 标记制成。我的一个页面包含带有不同图像的幻灯片。

问题是，每次设计师更改图像时，我都必须进入并更新图像`src`属性。我试图教设计人员和管理员如何编辑 HTML，但很多时候他们不小心遗漏了结束标签，添加了额外的单引号等。

所以我想要的是能够像往常一样编写我的标记，但插入“内容占位符”而不是实际内容，例如图像 URL、文本片段等。

然后，该 CMS 页面的 Magento 后端会有一些额外的字段——我在上面的标记中插入的每个内容占位符都有一个额外的字段。然后，非技术用户只需在这些框中编写纯文本或粘贴纯 URL，而不必担心摆弄 HTML 标记。

所以它就像 CMS 页面中的 CMS！

这可能吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T15:20:23.670

我被告知尝试一个小部件。我不知道小部件提供了此功能，但我会调查一下。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T20:41:59.120

您可以尝试 Magento Connect 网站上提供的一些免费滑块。 [http://www.magentocommerce.com/magento-connect/](http://www.magentocommerce.com/magento-connect/)

免责声明：我不是这些滑块的所有者/员工/附属机构。

# c# - 使用 ASP.Net UpdatePanel 时，来自弹出窗口的请求被阻止

> ID：13143898
> 
> 赞同：1
> 
> 时间：2012-10-30T16:50:41.367
> 
> 标签：c#, asp.net, asp.net-ajax, updatepanel

全部，

我有一个 UpdatePanel 正在发出几个长期运行的请求来收集大量数据。有时需要长达 90 秒才能返回。

第一个请求返回呈现为文档链接的数据。单击链接会打开一个新的浏览器窗口，并且 URL 有一个查询字符串，告诉系统要打开哪个文档。

这是为客户端呈现链接时的代码片段：

```
 HtmlAnchor alink = new HtmlAnchor();
 alink.HRef = "javascript:openDocument('"+ item.Url +"')";   //item.Url;

// here is the JS on the client page
function openDocument(path) {
    window.open(path);
 } 
```

因此，当用户单击链接时，弹出窗口会打开。问题是它会一直等到 UpdatePanel 完成其请求，然后弹出窗口才会发送其请求。

我可以从弹出窗口中复制 url，打开一个新浏览器，然后将 URL 粘贴到新浏览器中，它会按预期打开文档。

这让我相信 UpdatePanel 以某种方式阻止了弹出窗口的请求。我不想让用户等到 UpdatePanel 的 AJAX 请求完成后，用户才能从第一个结果中打开文档。

我该如何解决这个阻塞？我尝试在 UpdatePanel 的 ContentArea 之外创建按钮并模拟点击，但也没有类似的效果。

有人对此有任何想法吗？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T16:55:26.473

原因是页面正在使用会话状态，因此任何请求都会阻止所有其他共享相同会话密钥的请求。

如果您的页面没有写入会话，那么您可以将[IReadOnlySessionState](http://msdn.microsoft.com/en-us/library/system.web.sessionstate.ireadonlysessionstate.aspx)属性应用于它们，以便它们仅在存在非只读请求时才阻塞，而不是在所有并发请求都使用只读会话时阻塞。

```
public class YourPage: Page, IReadOnlySessionState { ... } 
```

# image-processing - 循环邻里运营

> ID：13143901
> 
> 赞同：1
> 
> 时间：2012-10-30T16:50:47.210
> 
> 标签：image-processing, computer-vision, matlab, pattern-recognition

假设我有一个灰度图像。考虑每个像素周围的圆形邻域窗口。我需要计算这些圆形邻域中像素值的方差。

如何在 MatLab 中有效地实现循环邻域运算？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T17:03:29.877

使用 matlab`stdfilt`获取局部方差。

```
 J = stdfilt(I, NHOOD) 
```

计算输入图像 I 的局部标准偏差，您可以在其中指定 NHOOD 中的邻域。NHOOD 是一个由零和非零元素指定邻居的多维数组。NHOOD 的大小在每个维度上都必须是奇数。因此，对于**圆形邻域**，您可以使用具有 >0 条件的磁盘过滤器，使其成为二进制：

```
 NHOOD = fspecial('disk',radius)>0; 
```

其中radius是某个数字，数字越大，过滤器越“圆形”，玩它看看......

最后，局部方差只是`J.^2`

# iphone - 在xcode中单击后退按钮时加载tabbarcontroller？

> ID：13143902
> 
> 赞同：0
> 
> 时间：2012-10-30T16:50:50.010
> 
> 标签：iphone, xcode4, uitabbarcontroller

当我单击后退按钮时，我正在加载一个特定的视图。但是对于那个特定的视图，我必须添加一个 tabbarController。我该怎么做..？当我尝试添加它时，它没有被添加..无法理解 y ？

```
 -(IBAction)switchtofirst {
AppViewController *first=[[AppViewController alloc] initWithNibName:@"AppViewController" bundle:nil];  
        Login *second=[[Login alloc]initWithNibName:@"Login" bundle:nil];
        second.title=@"Login";
        NSArray *viewArray=[[NSArray alloc] initWithObjects: first,second,nil];
        tabBarController=[[UITabBarController alloc] init];
        [tabBarController setViewControllers:viewArray animated:NO];
        AppViewController *gp=[AppViewController alloc];
         [gp.view addSubview:tabBarController.view]; 
      [self presentModalViewController:gp animated:NO];
        [gp release];
         } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T18:01:30.910

尝试这样的事情：

```
-(IBAction)switchtofirst {

    AppViewController *first = [[AppViewController alloc] initWithNibName:@"AppViewController" bundle:nil];
    Login *second=[[Login alloc]initWithNibName:@"Login" bundle:nil];
    second.title=@"Login";

    NSArray *viewArray= [NSArray arrayWithObjects:first, second, nil];

    tabBarController=[[UITabBarController alloc] init];
    [tabBarController setViewControllers:viewArray animated:NO];

    [self presentViewController:tabBarController animated:YES completion:nil];
} 
```

# forms - 提交表单（发送带有数据的电子邮件）并重定向到贝宝页面

> ID：13143904
> 
> 赞同：0
> 
> 时间：2012-10-30T16:50:54.167
> 
> 标签：forms, redirect, paypal, submit

我看到了一些类似的问题，但他们没有得到回答，或者他们不是我想要的。

我的网页上有一个简短的表格。当按下“提交”按钮时，表单上的内容将作为电子邮件发送。现在我想添加将用户重定向到贝宝页面的功能，他们可以支付管理费。

有没有办法在表单的“提交”按钮中添加一些代码，以便将客户重定向到贝宝结账（就像他们按下“立即购买”一样），或者，有没有一种方法可以自定义“但它现在'按钮也将具有提交表单的功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T17:08:11.057

```
<?php
session_start();
/* Set the variables below */

$contact_us = "contact-form";

$website_url = 'http://www.yourwebsite.com/';
$error_page_url = $website_url . 'error.html';
$paypal_page_url = $website_url . 'paypalpageurl.html';
$dummy_email = 'no-reply@yourwebsite.com';
$receiver_email_id = 'me@yourwebsite.com';

/** WARNING !! Dont make changes below ***/

if(!empty($_REQUEST['uri'])){
    $uri=$_REQUEST['uri'];
}else{
    $uri='';
}

switch($uri){
    case $contact_us:
        contact();
        break;
    default:
        ?><meta HTTP-EQUIV="REFRESH" content="0; url=<?php echo $website_url; ?>"><?php

}
function contact($request = "Contact Form"){

    global $error_page_url, $paypal_page_url, $dummy_email, $receiver_email_id,$website_url;

    $subject = "[yourwebsite.com] - Contact Form"; 
    $email = htmlentities($_REQUEST['email']);
    $name = htmlentities($_REQUEST['name']);
    $phone = htmlentities($_REQUEST['phone']);  
    $comment = htmlentities($_REQUEST['comment']);
    $filter = htmlentities($_REQUEST['filter']);
    $headers = "From:" . $dummy_email;
    $headers1 = "From:" . 'no-reply@yourwebsite.com'; 

    $formatted_message = "Request : " . $request . "\n" . "\n" .
                         "Sender Name : " . $name . "(" . $email . ")" . "\n" . "\n" .
                         "Email : " . $email . "\n" . "\n" .    
                         "Phone : " . $phone . "\n" . "\n" .                             
                         "Comment : " . "\n" . $comment . "\n" . "\n";
    $formatted_message_client = "Hi " . $name . ","."\n" . "\n" .
                                "Thanks for contacting us. We will get back to you soon." . "\n" . "\n" .
                                "Regards," . "\n" .
                                "yourwebsite.com Team";

        if($_POST['check'] != $_SESSION['check']) {
                session_destroy();
            ?><meta HTTP-EQUIV="REFRESH" content="0; url=<?php echo $error_page_url; ?>"><?php
        }
        else {
            session_destroy();
            if(!filter_var($email, FILTER_VALIDATE_EMAIL)) {
                ?><meta HTTP-EQUIV="REFRESH" content="0; url=<?php echo $error_page_url; ?>"><?php
            }
            else {
        if($name == '' or $email == '' or $phone == '' or $filter != ''){
        ?><meta HTTP-EQUIV="REFRESH" content="0; url=<?php echo $error_page_url; ?>"><?php 
    }else{
        if( mail($receiver_email_id, $subject, $formatted_message, $headers1) &&  
            mail($email, $subject, $formatted_message_client, $headers)){
                    //session_destroy();
            ?><meta HTTP-EQUIV="REFRESH" content="0; url=<?php echo $paypal_page_url; ?>"><?php
        }else{
            ?><meta HTTP-EQUIV="REFRESH" content="0; url=<?php echo $error_page_url; ?>"><?php
        }
    }
    }
}
}
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T16:54:15.100

不，表单提交是通过电子邮件或通过 HTTP。

您可以尝试使用 JavaScript 伪造某些东西，但这必然会以奇怪和有趣的方式破坏，因此正确的方法是处理来自 CGI 的表单提交并返回重定向状态代码。

# google-analytics - 一个拥有多个 Google Analytics 帐户的主站点

> ID：13143906
> 
> 赞同：-1
> 
> 时间：2012-10-30T16:50:58.057
> 
> 标签：google-analytics

我有 10 个站点，它们共享 1 个主站点来托管新更新。目前，这 10 个网站中的每一个都有其谷歌分析，并且自从主网站启动以来。他们的流量显着下降。我可以在一个主站点上托管 10 个谷歌分析 ID 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T10:43:27.170

查看关于类固醇“多个帐户”的 Google Analytics：[https ://github.com/CardinalPath/gas#multi-account-tracking](https://github.com/CardinalPath/gas#multi-account-tracking)

此外，谷歌提供了关于`_gaq`

[https://developers.google.com/analytics/resources/concepts/gaConceptsAccounts](https://developers.google.com/analytics/resources/concepts/gaConceptsAccounts)

[https://developers.google.com/analytics/devguides/collection/gajs/?hl=pl#MultipleCommands](https://developers.google.com/analytics/devguides/collection/gajs/?hl=pl#MultipleCommands)

[http://scottpatten.ca/2011/11/multiple-google-analytics-codes-on-one-page.html](http://scottpatten.ca/2011/11/multiple-google-analytics-codes-on-one-page.html)

```
var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-1234567-1']);
_gaq.push(['_trackPageview']);
_gaq.push(['account2._setAccount', 'UA-1234568-1']);
_gaq.push(['account2._trackPageview']);
_gaq.push(['account3._setAccount', 'UA-1234569-1']);
_gaq.push(['account3._trackPageview']);
_gaq.push(['account4._setAccount', 'UA-1234570-1']);
_gaq.push(['account4._trackPageview']); 
```

# javascript - Jquery Wizard Plugin Ajax 提交 - 检查结果

> ID：13143907
> 
> 赞同：1
> 
> 时间：2012-10-30T16:50:58.097
> 
> 标签：javascript, jquery, html, ajax

使用这个向导插件：[jQuery Formwizard Plugin](http://thecodemine.org)

问题是表单提交使用的是 Ajax。我需要将其提交到指定的 url（例如 test.php），然后向导需要检查返回（例如：error、success、error_2）..

如果响应是错误的，它应该给出一个带有（例如）错误消息的消息警报。

如果返回成功，它应该发出带有成功消息的警报。

如何提交到指定的网址，如何查看退货？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T16:57:20.573

您好，使用本教程可能对您的[AJAX需求有益](http://www.w3schools.com/ajax/ajax_xmlhttprequest_send.asp)

正如您将看到的，您需要使用 xmlhttp.status。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T17:23:42.890

找到进行 ajax 调用的行，然后您会找到 url，您可以将该 url 更改为您想要的那个。

当您在 ajax 调用中获得响应时，应该处理您想要的其他事情。

还要检查以前的答案链接，将对您有很大帮助。

# python - 使用 rootpy 和 matplotlib 绘制二维直方图

> ID：13143911
> 
> 赞同：4
> 
> 时间：2012-10-30T16:51:06.270
> 
> 标签：python, matplotlib, root-framework, rootpy

我正在尝试使用 rootpy 和 matplotlib 绘制一个 ROOT 2D 直方图。

我用于此的代码是：

```
from rootpy.io import File
from rootpy.plotting import Hist
import rootpy.plotting.root2matplotlib as rplt
import matplotlib.pyplot as plt
inputFile = File('mydata.root', 'read')
h_response = inputFile.myfolder.response

plt.figure(figsize=(16, 10), dpi=100)
rplt.hist(h_response, label='response matrix')
h_response.Draw()
plt.xlabel('reconstructed $E_{\mathrm{T}}^{miss}$')
plt.ylabel('Generated $E_{\mathrm{T}}^{miss}$')
plt.title('Response Matrix')
plt.savefig('ResponseMatrix.png') 
```

但是，这给我留下了错误消息：

```
Traceback (most recent call last):
  File "/storage/Dropbox/Workspace/Analysis/DailyPythonScripts/src/unfolding.py", line 66, in <module>
    rplt.hist(h_response, label='response matrix')
  File "/usr/local/lib/python2.7/dist-packages/rootpy-0.7.0_a0-py2.7-linux-x86_64.egg/rootpy/plotting/root2matplotlib.py", line 140, in hist
    snap_zero=snap_zero)
  File "/usr/local/lib/python2.7/dist-packages/rootpy-0.7.0_a0-py2.7-linux-x86_64.egg/rootpy/plotting/root2matplotlib.py", line 82, in _set_bounds
    ywidth = ymax - ymin
TypeError: unsupported operand type(s) for -: 'list' and 'list' 
```

显然我使用了错误的 rootpy2matplotlib 模块，所以我看了一下：该模块提供：hist、bar 和 errorbar 函数 - 没有特定于 >= 2D。

我错过了什么吗？有简单的解决方法吗？

PS：我想用'rootpy'标签标记这个问题，但这是不可能的。所以我道歉，因为这个问题非常具体。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-09-18T08:00:22.000

rootpy 的 root2matplotlib 接口现在提供了 hist2d、imshow 和轮廓函数，用于绘制 2D ROOT 直方图。请参阅此处的示例：

[https://github.com/rootpy/rootpy/blob/master/examples/plotting/plot_matplotlib_hist2d.py](https://github.com/rootpy/rootpy/blob/master/examples/plotting/plot_matplotlib_hist2d.py)

```
from matplotlib import pyplot as plt
from rootpy.plotting import root2matplotlib as rplt
from rootpy.plotting import Hist2D
import numpy as np

a = Hist2D(100, -3, 3, 100, 0, 6)
a.fill_array(np.random.multivariate_normal(
    mean=(0, 3),
    cov=np.arange(4).reshape(2, 2),
    size=(1E6,)))

fig, (ax1, ax2, ax3) = plt.subplots(nrows=1, ncols=3, figsize=(15, 5))

ax1.set_title('hist2d')
rplt.hist2d(a, axes=ax1)

ax2.set_title('imshow')
im = rplt.imshow(a, axes=ax2)

ax3.set_title('contour')
rplt.contour(a, axes=ax3)

fig.subplots_adjust(right=0.8)
cbar_ax = fig.add_axes([0.85, 0.15, 0.05, 0.7])
fig.colorbar(im, cax=cbar_ax)

plt.show() 
```

![在此处输入图像描述](../Images/4986127aefb3aa372254a57686c6a935.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-04T14:19:42.650

我刚刚在包含 TH2D 直方图的 ROOT 文件上尝试了您的脚本。一切正常。

/opt/rootpy # cat version.txt 给我：0.7.0

如果我检查我的

/usr/local/lib/python2.7/dist-packages/rootpy-dev-py2.7.egg/rootpy/plotting/root2matplotlib.py

并将其与您收到的错误消息进行比较，然后看起来我们正在使用不同版本的 rootpy。

尝试最新版本的 rootpy。

# android - 脸书安卓 SDK。验证访问令牌时出错

> ID：13143912
> 
> 赞同：0
> 
> 时间：2012-10-30T16:51:12.793
> 
> 标签：android, facebook

我正在尝试从 facebook sdk 访问用户信息。但我不断收到此错误。

```
{"error":{"message":"Error validating access token: The session has been invalidated because the user has changed the password.","type":"OAuthException","code":190,"error_subcode":460}} 
```

这是返回给我`response`oncomplete 函数参数中的错误的调用。

```
mAsyncRunner.request("me", new RequestListener() {
        @Override
        public void onComplete(String response, Object state) {
            Log.d("Profile", response);
            String json = response;    //<-- error in response
            try {

                JSONObject profile = new JSONObject(json);
                MainActivity.this.userid   = profile.getString("id");
                new GetUserProfilePic().execute();
                runOnUiThread(new Runnable() {

                    @Override
                    public void run() {
                        Toast.makeText(getApplicationContext(), "Name: " + MainActivity.this.userid, Toast.LENGTH_LONG).show();
                    }

                });

            } catch (JSONException e) {
                e.printStackTrace();
                Log.e("jsonexception",e.getMessage());
                facebook.extendAccessTokenIfNeeded(MainActivity.this, null);
                GetUserInfo();
            }
        }
        @Override
        public void onIOException(IOException e, Object state) {
        }

        @Override
        public void onFileNotFoundException(FileNotFoundException e,
                Object state) {
        }

        @Override
        public void onMalformedURLException(MalformedURLException e,
                Object state) {
        }

        @Override
        public void onFacebookError(FacebookError e, Object state) {
        }
}); 
```

有时我也会得到正确的响应。如果我是对的，我认为这是由于访问令牌过期。你们能告诉我如何扩展访问令牌，尽管我`facebook.extendAccessTokenIfNeeded(this, null);`在活动的`onResume`方法中使用了它。

如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T18:19:35.963

extendAccessTokenIfNeeded 和 extendAccessTokenIfNeeded 方法都需要在本地安装本机 Facebook 应用程序。

（我不知道您使用的是 SDK 的 v2 还是 v3b，但这里记录了[https://developers.facebook.com/docs/reference/android/3.0/Facebook#extendAccessToken(Context,%20ServiceListener](https://developers.facebook.com/docs/reference/android/3.0/Facebook#extendAccessToken(Context,%20ServiceListener) )）

您看到的行为......是在模拟器中还是在真实设备中？如果是前者，您可以从 SDK 的 v3b 将原生 Facebook 应用程序安装为 APK，可在此处获得：[https ://developers.facebook.com/android](https://developers.facebook.com/android)

# asp.net - 关于 ASPxUploadControl 的 Microsoft JScript 运行时错误

> ID：13143915
> 
> 赞同：1
> 
> 时间：2012-10-30T16:51:19.563
> 
> 标签：asp.net

我正在使用 ASPxUploadControl 添加文档。起初，它运行良好，但现在由于某种原因，我将其可见性设置为 false。它给了我这个错误： Microsoft JScript runtime error: 'myUploadControl' is undefined

# javascript - 如何从s提交数据：在struts 2中选择为ajax

> ID：13143917
> 
> 赞同：0
> 
> 时间：2012-10-30T16:51:21.107
> 
> 标签：javascript, jquery, json, struts2

我有一个选择标签。`s:select`表格内。我想向该操作发送一个发布请求。我有 struts 2 json 插件。我不是 javascript 或 jquery 中的任何人。

```
<s:form action="selectFileType" method="post"
                             id="selectFileTypeForm">

              <div>
                 <s:select id="select" headerKey=""
                 headerValue="%{getText('uploadAttachmentType.please.select')}"
                        name="uploadAttachmentType" list="attachmentTypeList"
                        required="true" 
                        onchange="this.form.submit();"></s:select>

                    <s:hidden id="declarationObj_ideclare"
                        name="declarationObj.ideclare" />
                    <s:hidden id="declarationObj_completingpersonname"
                        name="declarationObj.completingpersonname" />
                    <s:hidden id="declarationObj_completingpersonofficaltitle"
                        name="declarationObj.completingpersonofficaltitle" />
                    <s:hidden id="declarationObj_completingpersonphone"
                        name="declarationObj.completingpersonphone" />
                    <s:hidden id="declarationObj_completingpersonext"
                        name="declarationObj.completingpersonext" />

                </div>

                  </s:form> 
```

`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T18:03:30.577

Struts 2 没有很好的工具来执行 ajax，但您只能使用 jQuery 发送 post 请求。

首先你需要在渲染页面的源代码中找到一个目标元素并制作选择器。它应该看起来像`select[name='searchEngine'] option:selected`.

然后您可以编写将所选元素的值发送到的脚本`destination_url`。例如：

```
// get element value
var selectedItem = $("select[name='searchEngine'] option:selected").val();
// send post request
$.post("destination_url", {item: selectedItem}, function() {
    alert("ok");
}); 
```

[查看那里](http://jsfiddle.net/2vnsX/18/)的示例并阅读[那里](http://docs.jquery.com/Tutorials%3aGetting_Started_with_jQuery)的入门指南。

而已。

# php - 输出时没有最后一个逗号

> ID：13143920
> 
> 赞同：1
> 
> 时间：2012-10-30T16:51:28.720
> 
> 标签：php, csv

我有这个代码：

```
<?
$kate=mysql_query("select category_id from movies_cat where movie_id='$ids'");
   while($cat=mysql_fetch_array($kate)){
      $kate2=mysql_query("select name_cat from categories where id='$cat[category_id]'");
      $html = array();
        while($cat2=mysql_fetch_array($kate2)){
            $cat2['name_cat'].",";
    }
   }?> 
```

我想输出没有最后一个逗号的类别！谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T17:23:10.543

试试这个，在你的while循环之后，使用这样的php`trim`函数：

```
while($cat2=mysql_fetch_array($kate2)){
            $cat2['name_cat'].",";
}
$cat2['name_cat'] = trim($cat2['name_cat'],",") 
```

它将`,`从字符串的末尾删除

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T10:30:21.077

尝试这个：

```
$display = "";
while($cat2=mysql_fetch_array($kate2)) {
    if ($display == "") {
        $display = $cat2['name_cat'];
    } else {
        $display .= ", " . $cat2['name_cat'];
    }
}

echo $display; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T17:17:24.640

```
<?
$kate=mysql_query("select category_id from movies_cat where movie_id='$ids'");
while($cat=mysql_fetch_array($kate))
{
    $kate2=mysql_query("select name_cat from categories where id='$cat[category_id]'");
    $html = array();
    $first = true;
    while($cat2=mysql_fetch_array($kate2))
    {
        if ($first)
            $first = false;
        else
            print ",";

        print $cat2['name_cat'];
    }
}?> 
```

# java - Querydsl需要查询整数列小于值的位置

> ID：13143921
> 
> 赞同：3
> 
> 时间：2012-10-30T16:51:33.317
> 
> 标签：java, querydsl

我在编写将在整数列上执行简单的小于或等于比较的 JPAQuery 时遇到问题。我有 QCommand 生成的 querydsl 对象，我试图将其与 JPAquery 一起使用来执行这个非常简单的查询。我要执行的查询使用 SQL 如下所示：

```
select * from command where retry_count <= 10; 
```

生成的 QCommand 对象将 retryCount 参数定义为：

```
public final SimplePath<Integer> retryCount = createSimple("retryCount", Integer.class); 
```

我注意到因为它是一个 SimplePath，所以当我尝试编写 JPAQuery 时，retryCount 变量没有像 loe 或 goe 这样的比较运算符。该列/变量只允许我执行 isNull、isNotNull、eq 和其他非常简单的运算符，但不能执行比较运算符。这看起来像下面，但是，显然没有执行我想要的比较，但它可以正常工作：

```
JPAQuery query = new JPAQuery(entityManager);
query.from(command).where(command.retryCount.isNotNull()).list(command); 
```

在环顾四周时，我看到有一种方法可以创建 NumberPath，这似乎是我想要的，但是，当我尝试下面的代码时，我得到一个异常“java.lang.IllegalArgumentException：未声明的路径'retryCount'。添加这个路径作为查询的来源，以便能够引用它。”

```
JPAQuery query = new JPAQuery(entityManager);
NumberPath<Integer> retryCount = new NumberPath<Integer>(Integer.class, "retryCount");
return query.from(command).where(retryCount.loe(10)).list(command); 
```

那么，我怎样才能将这条路径“添加”到源中。我环顾四周，找不到这样做的示例，也找不到应该如何完成的解释。javadocs 在这种情况下不是很有帮助。我一直在很好地使用 querydsl，但这是第一个障碍，我很难编写一个最简单的查询。任何帮助或建议将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T07:11:06.410

手动路径查询的工作方式如下

```
JPAQuery query = new JPAQuery(entityManager);
NumberPath<Integer> retryCount = new NumberPath<Integer>(Integer.class, command, "retryCount");
return query.from(command).where(retryCount.loe(10)).list(command); 
```

不同之处在于您将 retryCount 路径创建为顶级路径，而应该将其创建为具有父级的属性路径。

Command 类的外观如何？代码生成中可能存在一些问题。

# c# - linq比较两个日期之间的列数据

> ID：13143922
> 
> 赞同：0
> 
> 时间：2012-10-30T16:51:41.053
> 
> 标签：c#, linq, linq-to-objects

我需要比较上周和两周前用户的分数。

我有一张这样的桌子

```
user   score  subject       date        
 2      10     math       21/10/2012
 2       5     science    23/10/2012
 2       5     math       16/10/2012
 2       9     science    15/12/2012 
```

我需要生成一个查询，显示上周的分数以及它是否比 2 周前的分数增加或减少

```
user   score    subject     date         increase/decrease
 2       10      math     21/10/2012       +5
 2       10      science  23/10/2012       -4 
```

日期列不需要包含在查询中我已经有代码来获取从上周到两周前的周范围。但是，我无法比较这两个日期。

```
DateTime date = DateTime.Now;
DateTime startOneWeekAgo = date.AddDays(-7).Date.AddDays(-(int)date.DayOfWeek),
         endOneWeekAgo = startOneWeekAgo.AddDays(7);

DateTime startTwoWeeksAgo = startOneWeekAgo.AddDays(-7),
         endTwoWeeksAgo = endOneWeekAgo.AddDays(-7); 
```

> from s in Scores where s.scoredate >= startOneWeekAgo && s.scoredate < endOneWeekAgo

这导致。这就是我到目前为止所拥有的。帮助将不胜感激。

```
user score subject
2     10    math
2     5     science 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T17:07:08.480

```
DateTime beginningOfWeek = DateTime.Now.BeginningOfWeek();
DateTime twoWeeksAgo = beginningOfWeek.AddDays(-14);
DateTime endOfLastWeek = beginningOfWeek.AddMilliseconds(-1);

var query = from s in scores
            where s.Date >= twoWeeksAgo && s.Date <= endOfLastWeek
            orderby s.Date
            group s by new { s.User, s.Subject } into g
            select new
                {
                    User = g.Key.User,
                    Subject = g.Key.Subject,
                    Date = g.Last().Date,
                    Diff = g.Last().Score - g.First().Score
                }; 
```

因此，您总是只选择最后两个分数（两周前和一周前），每组中只有两条记录。

如果数据库中只有一周的结果，那么差异将为零，因为组中的最后一个条目和第一个条目将是相同的。

您也可以使用一些`DateTime`扩展来获得一周的开始：

```
public static class DateExtensions
{
    public static DateTime BeginningOfWeek(this DateTime date, 
                           DayOfWeek firstDayOfWeek = DayOfWeek.Monday)
    {
        if (date.DayOfWeek == firstDayOfWeek)
            return date.Date;

        DateTime result = date.AddDays(-1);

        while (result.DayOfWeek != firstDayOfWeek)
            result = result.AddDays(-1);

        return result.Date;
    }
} 
```

还有一件事 - 尽量避免一次声明多个变量。

# typo3 - 如何在 TYPO3 的前端启用 dr_blob 扩展？

> ID：13143925
> 
> 赞同：0
> 
> 时间：2012-10-30T16:51:48.697
> 
> 标签：typo3, typoscript

我正在尝试使用[dr_blob](http://typo3.org/extension-manuals/dr_blob/2.3.2/view/1/2/)扩展名来列出上传到 TYPO3 站点的文件。问题是在遵循基本教程（这就是我所需要的）之后，我在前端没有得到任何输出。我没有创建模板文件（我使用 TemplaVoila 进行模板），因为它说扩展中包含一个基本文件（复制并尝试使用它）我不确定缺少的步骤。任何指针将不胜感激。

我使用带有 v2.3.2 扩展的 TYPO3 4.7.4。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T09:02:20.957

你是否包含了`static template`来自扩展的？

# objective-c - 内存警告和崩溃，但没有泄漏

> ID：13143928
> 
> 赞同：0
> 
> 时间：2012-10-30T16:51:57.883
> 
> 标签：objective-c, memory-management, instruments

我正在创建一个基于故事板的应用程序，其中每个视图都有很多大图像。该应用程序在显示一些内存警告后崩溃（不是很多，通常在密集使用 10-15 分钟后崩溃）。我检查了仪器，它没有报告任何单一的内存泄漏。此外，分配似乎是合理的（当我加载一些包含非常大图像的非常 xib 时，我在游戏中只有 1 或 2 个峰值 - iPad 视网膜版本大约 8 个月）。当我收到内存警告时，我真的没有任何可以释放的对象，因为之前视图中的所有内容都已被释放。

我见过类似的问题，但它似乎与特定的代码行有关，这不是我的情况：[iOS - 内存警告后应用程序崩溃 - 仪器显示没有泄漏](https://stackoverflow.com/questions/10698055/ios-app-crashing-after-memory-warning-instruments-showing-no-leaks)

有没有办法强制 xcode 清理缓存的图像？否则，我能做些什么来防止这些崩溃？

谢谢你的帮助 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T17:03:50.247

我也遇到过类似的问题，但最终我的解决方案很简单：你应该认为 Iphone 就像一辆汽车。汽车不能在一秒钟内加速到 100 英里/小时。Iphone 无法在一秒钟内加载大图像。所以你要做的是：你应该缩小图像的大小，如果一个视图上有两个以上的大图像，只需删除其中一个或将其放到其他视图中。

如果这不是您的解决方案，请查找代码中的错误并检查应用程序崩溃的位置。

# manifest - Puppet 2.7：调用 puppet apply init.pp 什么都不做 - 为什么？

> ID：13143929
> 
> 赞同：11
> 
> 时间：2012-10-30T16:52:08.303
> 
> 标签：manifest, apply, puppet

目录和文件布局如下：

```
app_test/
app_test/manifests
app_test/manifests/init.pp
app_test/manifests/test.pp 
```

内容`init.pp`：

```
class app_test {
    include app_test::test
} 
```

内容`test.pp`：

```
class app_test::test {
    exec { 'hello world':
        command => "/bin/echo Hello World >> /tmp/are-you-there.txt"
    }
} 
```

人偶`v2.7.11`已安装。

```
$ puppet apply init.pp 
notice: Finished catalog run in 0.01 seconds 
```

有人可以说明为什么这不会生成文件`/tmp/are-you-there-txt`吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-30T20:16:22.410

您只是定义类，而不是声明它们。

创建文件 modules/[module_name]/tests/init.pp：

内容：

```
include app_test 
```

然后使用以下方法测试您的课程：

```
puppet apply tests/init.pp 
```

这应该够了吧！

亲切的问候，

热阿珀尔多伦

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-10-31T12:59:30.250

你可以试试 ：

```
 puppet apply -e 'include app_test::test' 
```

或试运行

```
 puppet apply -e 'include app_test::test' --noop 
```

有关更多 puppet 应用，请参阅手册页：[http ://docs.puppetlabs.com/man/apply.html](http://docs.puppetlabs.com/man/apply.html)

# ruby-on-rails - 设计：能够将参数传递给 registrations#sign_up 操作

> ID：13143931
> 
> 赞同：4
> 
> 时间：2012-10-30T16:52:11.397
> 
> 标签：ruby-on-rails, devise

有时，我们会向我们的潜在客户发送定制的注册链接。该链接包含可用于预先填写注册表单的参数。

```
http://www.example.com/users/sign_up?user[company_name]=Foo&user[region]=NA 
```

我们的注册表有接受公司名称和地区的字段。可以根据注册链接预先填写。

这应该在实践中起作用，但这与`registrations#new`操作的实施方式无关。新操作使用空哈希调用该 [方法。](https://github.com/plataformatec/devise/blob/master/app/controllers/devise/registrations_controller.rb#L6)`build_resource`

```
def new
  resource = build_resource({})
  respond_with resource
end 
```

build_resource方法在输入非零时[忽略。](https://github.com/plataformatec/devise/blob/master/app/controllers/devise/registrations_controller.rb#L85)`resource_params`

```
def build_resource(hash=nil)
  hash ||= resource_params || {}
  self.resource = resource_class.new_with_session(hash, session)
end 
```

我不得不覆盖`new`注册控制器中的操作来克服这个问题。我不喜欢我的解决方案，因为它很脆弱。

```
def new
  resource = build_resource
  respond_with resource
end 
```

是否有理由`new`使用空哈希调用该操作？可以在没有空哈希的情况下调用它（就像在`create`操作中一样）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-06-12T21:34:55.597

我最终覆盖`build_resource`并确定了对`new`行动的改变。

```
def build_resource(hash=nil)
  # scope the change to new actions 
  return super unless action_name == "new"
  super.tap do |user|
    user.company_name = params[:user][:company_name]
    user.reg‭ion = params[:user][:reg‭ion]      
  end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-26T11:06:11.663

我相信这是该`build_resource`方法的预期行为。与您类似，`Model.new`您可以传递初始化属性的哈希值，也可以不传递任何内容，从而分别生成预填充模型和空模型。

如果你想让你的控制器动作更明确，你可以改为调用`build_resource(params[:user])`which 应该避免你担心的脆弱性。

# javascript - 提交 HTML 表单，执行 javascript 功能（警报然后重定向）

> ID：13143932
> 
> 赞同：21
> 
> 时间：2012-10-30T16:52:12.363
> 
> 标签：javascript, html, forms, submit

我有一个 JavaScript 函数，当我通过“onClick”方法调用它时效果很好。基本上它所做的是从 html 表单中提取数据，然后基于该数据重定向到另一个页面。

但是，当我按下“输入”按钮提交表单/调用 JavaScript 函数时，而不是使用 onClick 按钮来调用 JavaScript 函数，它不会像我希望的那样响应。

我希望当用户按下键盘上的回车按钮时，会发生同样的事情，就好像他们要按页面单击“继续按钮”（通过 onClick 调用该函数）

这是我的代码：

JS函数：

```
function completeAndRedirect(){
    alert('You\'re nearly there! To complete your entry, you simply need to tap \'continue\' on the next page. Good luck!');
    location.href='http://google.com/?SID='+'<? echo $CATEGORY; ?>'+','+'<? echo $PLATFORM; ?>'+','+'<? echo $DEVICE; ?>'+'&email='+document.forms[0].elements[0].value;
} 
```

这是表格：

```
<form action="" method="post" onsubmit="completeAndRedirect()">
    <input type="text" id="Edit1" style="width:280; height:50; font-family:'Lucida Sans Unicode', 'Lucida Grande', sans-serif; font-size:22px">
</form> 
```

非常感谢任何可以提供帮助的人！

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2012-10-30T17:29:51.077

```
<form action="javascript:completeAndRedirect();">
    <input type="text" id="Edit1" 
    style="width:280; height:50; font-family:'Lucida Sans Unicode', 'Lucida Grande', sans-serif; font-size:22px">
</form> 
```

将动作更改为指向您的功能将以不同的方式解决问题。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-10-30T17:21:58.430

您需要防止默认行为。您可以使用`e.preventDefault()`或`return false;`在这种情况下，最好的是，您可以`return false;`在此处使用：

```
<form onsubmit="completeAndRedirect(); return false;"> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-30T17:19:35.060

看起来您的表单正在提交，这是默认行为，您可以通过以下方式停止它：

```
<form action="" method="post" onsubmit="completeAndRedirect();return false;"> 
```

# javascript - 火狐点击记录器

> ID：13143934
> 
> 赞同：1
> 
> 时间：2012-10-30T16:52:20.660
> 
> 标签：javascript, python, firefox, record

我正在开发我的一个项目，该项目将允许用户启动浏览器并开始录制点击（xpath、css、点击引用、组合框等），以便用户能够在完成后回放录制. 我想做的是构建一些东西，通过 xpath、url 或其他任何东西记录这些点击。但是我已经在互联网上寻找一种创建此类程序的方法，但我找不到任何东西。我唯一发现的是 selenium IDE (http://seleniumhq.org/projects/ide/)，但我想创建自己的，如何访问浏览器并记录用户点击的点击或路径？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T17:12:47.250

也许你想研究[imacros for firefox](https://addons.mozilla.org/en-us/firefox/addon/imacros-for-firefox/)。

# c# - 将 SQL 数据库的行传递给 Javascript 的最佳方法？

> ID：13143936
> 
> 赞同：0
> 
> 时间：2012-10-30T16:52:33.077
> 
> 标签：c#, javascript, .net, sql-server, json

因此，最近我一直在研究由 Javascript 控制的 HTML5 Indexeddb 功能，以及如何将其与 SQL Server 数据库结合以共享和复制信息，以便可以离线使用数据库版本。

我遇到的难题是找到将一组对象从 SQL Server 数据库传递到浏览器的 javascript 的最佳方法，使用 C# 从数据库中获取值。

虽然有很多小“黑客”可以完成（例如，将数据放入标签，然后让 Javascript 将其拾取 document.getElementById("DataHere").value;）我想知道是否有更有效的传递方式跨数据库的内容？

目前，我有一个生成字符串数组的方法（全部采用 JSON 格式，使用 JSON.Net 包）作为从数据库返回的示例。

```
 public string[] GenerateEmployeeSample() {
    List<Employee> listEmps = new List<Employee>();
    string[] listJSON = new string[64];
    string[] FirstNames = {"Alonso", "Alfred", "Angus", "Alfresco" };
    string[] LastNames = {"Johnson","Williams", "Zelwegger", "Jones" };
    string[] Departments = {"Finance", "Cleaning", "Pusher", "Stairs" };
    string emailEnd = "@email.com";

    for (int i = 0; i < 4; i++) {
        for (int j = 0; j < 4; j++) {
            for (int k = 0; k < 4; k++) {
                Employee tempEmp = new Employee();
                tempEmp.FirstName = FirstNames[i];
                tempEmp.LastName = LastNames[j];
                tempEmp.Department = Departments[k];
                tempEmp.Email = FirstNames[i] + "." + LastNames[j] + emailEnd;
                listEmps.Add(tempEmp);
            }
        }
    }
    int count = 0;
    foreach(Employee emp in listEmps){
        string tempString = JsonConvert.SerializeObject(emp);
        listJSON[count] = tempString;
        count++;
    }

    return listJSON;
} 
```

所以现在我有一组数据，我怎么能把这个数组传递给 Javascript？如果这是一个微不足道的问题，我深表歉意，但 Javascript 对我来说仍然相当新，并且在阅读了很多没有做我想要的或者完全没有工作的例子之后，我有点不知所措。

非常感谢您的阅读！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T17:05:00.453

更具体地说，您将创建一个在请求时返回 JSON 字符串的资源（无论是 aspx 页面还是 json 文件等）。您已经完成了这一步，因为您已经获得了将对象序列化为 JSON 的代码。一种简单的方法是创建一个页面，使用该页面输出此函数的返回值`Response.Write(GenerateEmployeeSample());`

然后，您将使用 XMLHttpRequest 对象来请求此资源，并使用 javascript 解析返回的 JSON `JSON.parse`，这将返回一个本机 javascript 对象。然后你可以随心所欲地处理这个对象。

# java - Eclipse & Dark Juno - 有什么方法可以让控制台和其他功能变暗？

> ID：13143938
> 
> 赞同：0
> 
> 时间：2012-10-30T16:52:46.657
> 
> 标签：java, eclipse

Dark Juno 确实让 Eclipse 看起来不错，但我发现一些 UI 元素，例如最小化的透视图和控制台仍然是刺眼的白色，这真的很难看。是否也可以改变这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T17:34:06.717

其中一些颜色首选项来自您的操作系统。这是关于 Eclipse 颜色偏好的令人讨厌的事情之一 - Eclipse 中的内容，操作系统中的内容。我真的希望他们会忽略所有操作系统颜色以获得更一致的外观。

因此，一种解决方案是在您的操作系统中设置这些颜色。你如何做到这一点取决于你的操作系统。但这可能是有问题的，因为它可能会使其他应用程序看起来很奇怪/不可读。

您可以在 Eclipse 中覆盖控制台颜色： http://help.eclipse.org/juno/index.jsp?topic= [%2Forg.eclipse.jdt.doc.user%2Ftasks%2Ftasks-consoleAppearance.htm](http://help.eclipse.org/juno/index.jsp?topic=%2Forg.eclipse.jdt.doc.user%2Ftasks%2Ftasks-consoleAppearance.htm)

> Eclipse 中的字体和颜色
> 
> Eclipse 尽可能使用操作系统提供的字体和颜色。在 Windows 上，平台颜色和字体设置可在 Preferences > Colors and Fonts 页面上找到。Eclipse 中大多数小部件使用的字体是在属性的消息框设置中设置的字体。但是，操作系统没有提供足够的颜色来处理 Eclipse 中颜色和字体提供的所有额外信息。
> 
> 要在控制台视图中设置输出类型（及其颜色）：
> 
> 打开运行/调试 > 控制台首选项页面。选中 Show when program writes to standard out 复选框将在每次从程序的标准输出流向控制台写入新输出时显示控制台视图。如果当前透视图中没有控制台视图，则会创建一个。选中 Show when program writes to standard err 复选框将在每次从程序的标准错误流向控制台写入新输出时显示控制台视图。如果当前透视图中没有控制台视图，则会创建一个。单击任何颜色按钮以更改相应文本流的颜色。要设置控制台视图中使用的字体：
> 
> 打开常规 > 外观 > 颜色和字体首选项页面。从 Debug 类别中选择 Console font 并使用 Change... 按钮更改字体。（细节窗格文本字体可用于更改调试器的默认细节窗格的字体）。

# sql-server - 以编程方式确定 SQL Server Express 数据库的最大大小

> ID：13143942
> 
> 赞同：0
> 
> 时间：2012-10-30T16:53:04.543
> 
> 标签：sql-server, vb.net, sql-server-2008-r2, smo

有没有办法使用 SMO 确定 SQL Server Express 数据库的最大大小？

还是我必须添加代码才能说

```
if express then
  if sql2005 then 
    limit = 4gb 
  else 
    limit = 10gb
else
  limit = unlimited
end 
```

# javascript - 动态命名空间 Socket.IO

> ID：13143945
> 
> 赞同：29
> 
> 时间：2012-10-30T16:53:08.823
> 
> 标签：javascript, node.js, socket.io

如何在 socket.io 中使用动态命名空间。

我正在查看（糟糕的）[文档](http://socket.io/#how-to-use)，它说必须像这样使用命名空间：

`io.of('/news')`

`io.of('/akfda')`

要使用命名空间，请执行`io.of("/namespace")`.

我需要在服务器中注册每个命名空间吗？也许我想要一个动态内容的命名空间。

我该怎么做：

`io.of('/:somethign/:id')`

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2013-10-27T13:09:38.360

Socket.IO 支持“房间”（[https://github.com/LearnBoost/socket.io/wiki/Rooms](https://github.com/LearnBoost/socket.io/wiki/Rooms)），您可以使用它来代替命名空间。此外，当您需要动态路由时（并且您在应用程序中使用 express） - 最好的方法是使用 express box 中的路由引擎。

*   [使用 Express.js (node.js) 进行动态路由的最佳方式](https://stackoverflow.com/questions/15344628/best-way-to-do-dynamic-routing-with-express-js-node-js)
*   [在 Express-js 中使用路由](https://stackoverflow.com/questions/8864626/using-routes-in-express-js)
*   [http://expressjs.com/api.html#app.routes](http://expressjs.com/api.html#app.routes)
*   [http://shtylman.com/post/expressjs-re-routing/](http://shtylman.com/post/expressjs-re-routing/)
*   [http://jordanhoff.com/post/22602013678/dynamic-express-routing](http://jordanhoff.com/post/22602013678/dynamic-express-routing)

但是，如果您仍然认为在 socket.io 中的命名空间中需要动态，这里是如何实现它的小示例：

用户端：

```
var connect = function (ns) {
    return io.connect(ns, {
       query: 'ns='+ns,
       resource: "socket.io"
    });
}

var socket = connect('/user/12'); 
```

服务器端：

```
var url = require('url');
  , ev = new events.EventEmitter()

// <ns name>: <ns regexp>
var routes = {
  // /user/:id
  'user': '^\\/user\\/(\\d+)$',

  // /:something/:id
  'default': '^\\/(\\\w+)\\/(\\d+)$'
};

// global entry point for new connections
io.sockets.on('connection', function (socket) {
  // extract namespace from connected url query param 'ns'
  var ns = url.parse(socket.handshake.url, true).query.ns;
  console.log('connected ns: '+ns)

  //
  for (var k in routes) {
    var routeName = k;
    var routeRegexp = new RegExp(routes[k]);

    // if connected ns matched with route regexp
    if (ns.match(routeRegexp)) {
      console.log('matched: '+routeName)

      // create new namespace (or use previously created)
      io.of(ns).on('connection', function (socket) {
        // fire event when socket connecting
        ev.emit('socket.connection route.'+routeName, socket);

        // @todo: add more if needed
        // on('message') -> ev.emit(...)
      });

      break;
    }
  }

  // when nothing matched
  // ...
});

// event when socket connected in 'user' namespace
ev.on('socket.connection route.user', function () {
  console.log('route[user] connecting..');
});

// event when socket connected in 'default' namespace
ev.on('socket.connection route.default', function () {
  console.log('route[default] connecting..');
}); 
```

我希望这能帮到您！

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2015-04-17T00:21:20.403

我会使用“房间”来支持您的动态内容。

**服务器端**

```
var server = require('http').createServer(),
    io     = require('socket.io')(server);

io.on('connection', function(socket){

  var room = socket.handshake['query']['r_var'];

  socket.join(room);
  console.log('user joined room #'+room);

  socket.on('disconnect', function() {
    socket.leave(room)
    console.log('user disconnected');
  });

  socket.on('chat message', function(msg){
    io.to(room).emit('chat message', msg);
  });

});

server.listen(3000); 
```

**客户端**

```
var socket_connect = function (room) {
    return io('localhost:3000', {
        query: 'r_var='+room
    });
}

var random_room = Math.floor((Math.random() * 2) + 1);
var socket      = socket_connect(random_room);

socket.emit('chat message', 'hello room #'+random_room);
.... 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2018-11-30T11:20:56.797

从版本开始，`2.1.1`我能够使它与此一起使用：

```
wss.of((nsp, query, next) => {
  const { token } = query;

  // Do your authentication or whatever here...

  // If success
  next(null, true);

}).on('connect', (socket) => {
  // socket connected to your namespace
}); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-06-29T19:39:32.007

**服务器**

```
var MAX_CLIENTS = 5;
var namespace_queue = [];

function searchObjectOnArray(nameKey, myArray) {
    for (var i = 0; i < myArray.length; i++) {
        if (myArray[i].id === nameKey) {
            return myArray[i];
        }
    }
}

function createNamespace(data){
    var ns = {
                //id: require('node-uuid')(),
                id : data.name,
                clients: 0, 
            };

    namespace_queue.push(ns);

    return ns;
}

createNamespace({name: 'primer'});

io.of('').on('connection', function(socket){     

    console.log('-' + socket.id);

    /// Welcome to the new client
    socket.emit('Welcome', {SocketId : socket.id});

    socket.on('JoinToApp', function (data, callback) {
        var namespaceToConnect = searchObjectOnArray(data.namespace, namespace_queue)
        if(namespaceToConnect.clients <= MAX_CLIENTS){
            var dynamicNamespace = io.of('/' + namespaceToConnect.id);

            dynamicNamespace.on('connection', function(ns_socket){
                    console.log('user connected to ' + namespaceToConnect.id);
                    dynamicNamespace.emit('hi', 'everyone!');
                });

            namespaceToConnect.clients++;  
        }          

        callback({namespaces:namespace_queue});
    })

    socket.on('createNamespace',function(data,join_cb){

        createNamespace(data);

        join_cb({message:'Namespace created'});
    }); 
}); 
```

**客户**

```
<input id="namespaceInput" type="text" placeholder="New namespace name">
<input id="namespaceToConnect" type="text" placeholder="namespace to connect">

<button onclick="javascript: createNamespace()">Create Namespace</button>
<button onclick="javascript: joinToNamespace()">Connect to Namespace</button>

<script src="https://cdn.socket.io/socket.io-1.4.5.js"></script>
<script>
    var socket = null;
   (function(){
       socket = io.connect('http://localhost:3000/');        
   })()

   function createNamespace(){
       var namespaceName = document.getElementById("namespaceInput").value;
       socket.emit('createNamespace', {name : namespaceName}, function(data){
           alert(data.message);
       })
   }

   function joinToNamespace(){
       var name = document.getElementById("namespaceToConnect").value;
       socket.emit('JoinToApp', {namespace: name}, function(data){
            console.log('Namespaces created:');
            console.log(data)

            var ns_socket = io.connect('http://localhost:3000/' + name);
            ns_socket.on('connect',function(){
                console.log('joined namespace ' + name);
            });

            ns_socket.on('hi', function(data){
                console.log('hi ' + data)
            })
        });

   }
</script> 
```

更多详细信息：[https ://ingcamilorodriguez.wordpress.com/2016/06/21/como-hacer-namespaces-dinamicos-en-socket-io/](https://ingcamilorodriguez.wordpress.com/2016/06/21/como-hacer-namespaces-dinamicos-en-socket-io/)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-11-05T17:09:30.727

这是一种方法。这是我为解决问题而创建的 socket.io 子类：

[https://github.com/PencilCode/dynamic.io](https://github.com/PencilCode/dynamic.io)

该子类添加了动态名称空间以及虚拟主机名支持（如果您愿意，每个主机都可以进入自己的名称空间树）。该回购有一些例子。

这是一个通用的 socket.io 监听器，它监听每个请求的命名空间，并为每个连接的套接字记录一条消息。您可以收听不同的正则表达式来收听命名空间的任何子集。

它无需任何修改即可与标准 socket.io 客户端库一起使用。

```
var DynamicServer = require('dynamic.io');
io = 动态服务器（{
    host: true, // 启用虚拟主机处理
    publicStatus: true // 启用 /socket.io/status 页面。
});
// 可以设置任意数量的命名空间模式。
// 这是一个单一的包罗万象模式的例子。
io.setupNamespace(/.*/, function(nsp) {
    nsp.on('connect', function(socket) {
        console.log('一个连接的套接字', nsp.fullname());
    });
    nsp.expire（函数（）{
        console.log(nsp.fullname(), '即将到期');
    });
});
io.listen(8888);

```

# validation - 服务器端验证是否适合使用 ASP.NET WebAPI ApiController 操作

> ID：13143947
> 
> 赞同：0
> 
> 时间：2012-10-30T16:53:17.237
> 
> 标签：validation, asp.net-mvc-4, asp.net-web-api, remote-validation

在 WebAPI 之前，我使用常规 MVC 操作方法进行所有客户端远程验证调用。使用 WebAPI，我现在可以在 ApiController 上使用 POST、PUT、DELETE 和 GET 方法。但是，仍然需要进行验证。

我已经成功地将远程验证操作方法放在 ApiController 上并让它们工作。在为资源提​​交 POST、PUT 或 DELETE 之前，客户端可以 POST 到一个或多个验证 URL 以验证用户输入并接收适当的验证消息。

我的问题是，这些远程验证操作是否应该在 ApiController 上？还是常规的 MVC 控制器？在我看来，将它们全部放在 ApiController 中是最有意义的，因为该类可以封装与资源（和资源集合）突变有关的所有内容。

**更新：回复@tugberk**

我应该详细说明。首先，我们没有使用 DataAnnotations 验证。已经使用 FluentValidation.NET 在域层命令上配置了丰富的验证规则和消息。许多验证类使用依赖注入来调用数据库（例如验证唯一性）。FluentValidation 与 MVC ModelState 有很好的可插拔性，但[我还没有找到将其插入 WebAPI ModelState 的好方法](https://stackoverflow.com/a/13045097/304832)。

其次，我们在 POST、PUT 和 DELETE 端点进行验证。客户端无需知道验证端点即可发现问题所在。这是一个例子：

```
var command = Mapper.Map<CreateCarCommand>(carApiModel);
try
{
    _createHandler.Handle(command);
}
catch (ValidationException ex)
{
    return Request.CreateResponse(HttpStatusCode.BadRequest, ex.Message);
} 
```

客户将收到 400 响应以及指示出了什么问题的消息。当然，这不像您链接到的示例中的响应那么精细。因为我们只是返回一个字符串，所以没有简单的方法来解析每个验证消息属于哪些字段，这是我们自己的 API 的 HTML + javascript 客户端所需要的。这就是为什么我增加了更细粒度的验证端点（作为旁注，它们被我们的 javascript 客户端上特定于字段的敲除验证调用所消耗）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T11:49:55.997

*我假设您通过说remote validation*来指代类似于 ASP.NET MVC Remote Validation 的东西。在这种情况下，我认为您的 HTTP API 不需要远程验证。考虑一个场景，我需要将您的 HTTP API 与我的 .NET 应用程序一起使用，并假设您有一个远程验证。这里有两件事困扰我：

1.  除非您自己为 API 提供 .NET 客户端并将该逻辑放在该客户端中，否则无法发现该远程验证。
2.  假设 .NET 客户端存在远程验证，并且应用程序将在发送实际请求之前对服务器进行验证调用，这只是一种矫枉过正。

在我看来，用户向您的 API 发送请求，您应该在那里进行验证。您可以从以下 URL 找到示例：

[ASP.NET Web API 和处理 ModelState 验证](http://www.tugberkugurlu.com/archive/asp-net-web-api-and-handling-modelstate-validation)

# google-chrome - 如何在不确认的情况下将扩展安装到浏览器

> ID：13143950
> 
> 赞同：-2
> 
> 时间：2012-10-30T16:53:30.390
> 
> 标签：google-chrome, browser, google-chrome-extension, browser-extension

当用户进入网页时，有没有办法在没有确认的情况下安装扩展程序？

在什么浏览器中我可以做到这一点？或任何有关该文章的链接？

关键字是“未经确认”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T16:57:15.303

那是不可能的。更不用说，这在法律或道德上都不正确。（只是说）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T17:02:53.857

这是不可能的，也不应该是可能的——而且是有充分理由的。虽然您的意图可能真的很纯粹，但它会为那些想要获得一点“乐趣”的人打开很多安全漏洞。

这里有几个很好的网站解释了恶意扩展和工具栏可能造成的损害：

1.  [公牛卫队](http://www.bullguard.com/bullguard-security-center/internet-security/internet-threats/rogue-browser-extensions.aspx)
2.  [赛门铁克](http://www.symantec.com/connect/blogs/bho-and-xpcom-extensions-gone-wild)

# ruby - 尝试安装 pg gem 时：Brew bad interpreter error and not existing ruby version

> ID：13143957
> 
> 赞同：4
> 
> 时间：2012-10-30T16:53:57.590
> 
> 标签：ruby, ruby-on-rails-3, macos, installation, homebrew

在重新安装 ruby​​、rails、xcode 等时，我真的犯了一些错误（甚至可能我已经删除了我的系统 Ruby 安装：/）这是我现在所拥有的：

系统：OSX 10.8.2（64 位）

`which ruby`给我`/usr/local/bin/ruby`

我已经安装了`ruby 1.9.3p286`，`Rails 3.2.8`并且`rvm 1.16.17 (stable)`

我已经按照以下提示安装了 Ruby 和 Rails：http: *//hivelogic.com/articles/compiling-ruby-rubygems-and-rails-on-snow-leopard*

接下来我想运行`gem install pg`，但出现错误：`No such file or directory - brew --prefix`

我试过只点击`brew`命令，但我遇到了另一个错误：`/usr/local/bin/brew: bad interpreter: /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/bin: no such file or directory`

所以我的问题是（我之前已经安装了 brew） - 如果我没有安装这个版本的 Ruby，为什么它指向 1.8 Ruby 的这条路径？我可以用 ruby​​ 以某种方式将这条路径更改为我当前的路径（来自哪个 ruby​​ 命令？）？如何解决这个 brew 错误？请帮忙！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T18:45:14.907

好的，我明白了 - 我已经编辑了文件：`/usr/local/bin/brew`并编辑了（第一行）路径：从`/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/bin`到`/usr/local/bin/ruby/`现在它可以工作了..

任何人都知道如何将默认系统 Ruby 路径更改为这个？（以避免将来与其他程序出现问题）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T10:29:47.487

这对我不起作用，但它让我走上了正确的轨道......我必须这样做：

`sudo ln -s /usr/local/bin/ruby /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/bin/ruby`

（并事先制作 bin 目录）

# hadoop - HIVE 订单混乱数据

> ID：13143958
> 
> 赞同：0
> 
> 时间：2012-10-30T16:54:05.817
> 
> 标签：hadoop, sql-order-by, hive, hiveql

在带有 Hadoop 1.03 的 Hive 0.8 中，请考虑此表：

```
CREATE TABLE table (
  key int,
  date timestamp,
  name string,
  surname string,
  height int,
  weight int,
  age int) 
CLUSTERED BY(key) INTO 128 BUCKETS
ROW FORMAT DELIMITED
FIELDS TERMINATED BY ','; 
```

然后我尝试了：

```
select *
from table
where key=xxx
order by date; 
```

结果已排序，但列名之后的所有内容都是错误的。事实上，所有行在各自的字段中具有完全相同的值，并且缺少姓氏列。我还有一个关于姓名和姓氏的位图索引以及一个关于键的索引。

我的查询是否有问题，或者我应该查看有关 order by 的错误（我找不到任何具体的内容）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T10:41:48.513

似乎将数据加载到配置单元时出错。确保您的 CSV 文件中没有任何可能干扰插入的特殊字符。

并且您已按关键属性进行了聚类。这个密钥从 CSV 哪里来？或其他来源？你确定这是独一无二的吗？

# android - 如何使用ant关闭正在测试的Android应用程序？

> ID：13143960
> 
> 赞同：2
> 
> 时间：2012-10-30T16:54:05.690
> 
> 标签：android, ant, android-emulator, automation

要启动我正在做的应用程序：

```
<target name="run">
    <exec executable="adb">
        <arg value="shell"/>
        <arg value="am"/>
        <arg value="start"/>
        <arg value="-a"/>
        <arg value="android.intent.action.MAIN"/>
        <arg value="-n"/>
        <arg value="com.go.ring.demo1/.RootActivity"/>
    </exec>
  </target> 
```

但是，我想关闭此应用程序。这样做的蚂蚁代码是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T17:19:45.423

如何使用`kill`：

```
am kill: kill all processes associated with <PACKAGE> 
```

或`force-stop`：

```
am force-stop: force stop everything associated with <PACKAGE> 
```

一般来说，你应该这样做：

```
adb shell 
```

在 shell 中，不要`am`使用参数 - 这将显示所有 am 的选项和开关。

# multipartform-data - 当表单编码为 multipart/form-data 时向 NancyFX 发送多个复选框值

> ID：13143963
> 
> 赞同：1
> 
> 时间：2012-10-30T16:54:17.280
> 
> 标签：multipartform-data, nancy

我有一个`<form>`包含复选框列表的标签。当表单 enctype =多个选中的复选框值按预期`application/x-www-form-urlencoded`以逗号分隔的字符串呈现给我时。`Request.Form`

如果我将 enctype 更改为`multipart/form-data`（因为我想在提交中包含个人资料图像），那么`Request.Form`尽管请求有效负载中存在所有选定的复选框值（具有相同的名称），但只会显示最后一个选定的复选框值。

**示例有效载荷**

```
------WebKitFormBoundaryS2gp8PRUhbFngzPE
Content-Disposition: form-data; name="expertise-areas"

Academic career path
------WebKitFormBoundaryS2gp8PRUhbFngzPE
Content-Disposition: form-data; name="expertise-areas"

Promotion 
```

**路线代码**

```
var expertise = Request.Form.expertiseareas; 
```

**结果**

```
Expected : "Academic career path,Promotion"
Actual   : "Promotion" 
```

这是设计使然吗？如果是这样，发送带有小图像的复选框值列表的最佳方法是什么？我需要把它分成两种形式吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T16:38:24.273

这是我如何让它工作的：

1.  通过删除名称属性来防止复选框与表单一起发布
2.  添加隐藏输入以将所选值保存为逗号分隔的列表
3.  使用 javascript 将选中的复选框值加入逗号分隔的列表中
4.  将隐藏的输入值设置为逗号分隔的列表

我刚刚从我的项目中提取了这段代码，但你明白了。

**HTML（剃刀）**

```
<form id="form-profile-edit" enctype="multipart/form-data" method="POST" action="/user/profile/edit">
... more stuff
    <input id="organisational-hidden" name="organisationalareas" type="hidden"/>
    @foreach (string area in Model.OrganisationalAreas)
    {
        @Html.GetAreaCheckbox(area, 
                              user.HasOrgansiationalArea(area), 
                              @class:"organisational")
    }
...more stuff
</form> 
```

**Javascript**

```
$('#form-profile-edit').ajaxForm({
    beforeSerialize: function() {
        var organisational = toCommaDelimited($('.organisational:checked'));
        $('#organisational-hidden').val(organisational);
    }
});
function toCommaDelimited(checkboxes) {
    return $.map(checkboxes, function (checkbox) { return checkbox.value; }).join(',');
} 
```

# jquery - jQuery Like/Unlike 问题

> ID：13143964
> 
> 赞同：1
> 
> 时间：2012-10-30T16:54:19.467
> 
> 标签：jquery

我开发了一个简单的like/unlike 脚本。

**喜欢脚本**

```
function like(blog_id,object_id,object_type,user_id,default_count)
{
  if( user_id == 0 ) {
    jQuery("#show_login_box").fancybox({cyclic: true}).trigger('click');
  } else {
           if( default_count == 0 ) {
             var new_count = '1';
             var link = 'unlike(\'' + blog_id + '\',\'' + object_id + '\',\'' + object_type + '\',\'' + user_id + '\',\'' + new_count + '\')\;';
             jQuery('.likes').html('You like this.');
            } else {
             var new_count = parseInt(default_count) + 1;
               if ( jQuery('.like-user').length ) {
                   var name = jQuery('.like-user').html();
                   var link = 'unlike(\'' + blog_id + '\',\'' + object_id + '\',\'' + object_type + '\',\'' + user_id + '\',\'' + new_count + '\')\;';
                   jQuery('.likes').html('You and <span class="like-user">'  + name + '</span> likes this.');

               } else {
                   var link = 'unlike(\'' + blog_id + '\',\'' + object_id + '\',\'' + object_type + '\',\'' + user_id + '\',\'' + new_count + '\')\;';
                   jQuery('.likes').html('You and <span class="like-user"><a href="#">'  + default_count + ' others</a></span> like this.');

               }
            }
             jQuery('.like_click').attr('onclick',link);
             jQuery('.like_click span').html('<img src="/wp-content/plugins/assets/images/icons/unlike-icon.png"> Unlike');
    jQuery.ajax({
        url: '/wp-content/plugins/assets/like.php',
        type: 'POST',
        data: { object_id: object_id, user_id: user_id, type: 'like', blog_id: blog_id, object_type: object_type, count: default_count },
        dataType: 'json', 
        success: function(data)
        {
             // jQuery('#' + object_id + '_count').html(data.total);
        }
    });
  }
} 
```

**不同于脚本**

```
function unlike(blog_id,object_id,object_type,user_id,default_count)
{
            if( default_count == 1 ) {
             var not_like = '0';
             var link = 'like(\'' + blog_id + '\',\'' + object_id + '\',\'' + object_type + '\',\'' + user_id + '\',\'' + default_count + '\',\'' + not_like + '\')\;';
             jQuery('.likes').html('');
            } else {
             var new_count = parseInt(default_count) - 1;
               if ( jQuery('.like-user').length  && default_count > 1 ) {
                   var name = jQuery('.like-user').html();
                   var link = 'like(\'' + blog_id + '\',\'' + object_id + '\',\'' + object_type + '\',\'' + user_id + '\',\'' + new_count + '\')\;';
                   jQuery('.likes').html('<span class="like-user">'  + name + '</span> like this.');

               } else {
                   var link = 'like(\'' + blog_id + '\',\'' + object_id + '\',\'' + object_type + '\',\'' + user_id + '\',\'' + new_count + '\')\;';
                   jQuery('.likes').html('<span class="like-user"><a href="#">'  + new_count + ' people</a></span> like this.');

               }
            }
             jQuery('.like_click').attr('onclick',link);
             jQuery('.like_click span').html('<img src="/wp-content/plugins/assets/images/icons/like-icon.png"> Like');
    jQuery.ajax({
        url: '/wp-content/plugins/assets/like.php',
        type: 'POST',
        data: { object_id: object_id, user_id: user_id, type: 'unlike', blog_id: blog_id, object_type: object_type, count: default_count },
        dataType: 'json', 
        success: function(data)
        {
             // jQuery('#' + object_id + '_count').html(data.total);
        }
    });
} 
```

**HTML**

```
<a onclick="like('85','1','product','1','0');" class="button like_click">
<span><img src="wp-content/plugins/assets/images/icons/like-icon.png"> Like</span>
</a><div class="likes"></div> 
```

**场景：**我喜欢一个帖子，我是第一个，所以返回的消息是“你喜欢这个”。并且没有刷新我不喜欢它，它现在删除了“你喜欢这个”消息。这是正确的反应。

**问题：**没有刷新同一个帖子，我再次喜欢它，现在消息显示“你和其他 1 个人喜欢这个”而不是“你喜欢这个”。信息。

**JS 小提琴演示：http:** [//jsfiddle.net/z8mKX/2/](http://jsfiddle.net/z8mKX/2/)

我无法配置我的脚本出了什么问题。请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T17:29:12.450

你有一条线，

```
var link = 'like(\'' + blog_id + '\',\'' + object_id + '\',\'' + object_type + '\',\'' + user_id + '\',\'' + default_count + '\',\'' + not_like + '\')\;'; 
```

在您不同的功能中。这设置了当你在你不喜欢某物之后击中时应该执行的操作。您将错误数量的参数传递给“like”函数。旧代码的残余？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T17:30:49.703

在您的不同函数中，您定义`var not_like = '0';`this should be `var new_count = '0';`，并且，正如 Ditmar Wendt 提到的，您将错误数量的参数传递给 onclick 函数，更新的代码是[here](http://jsfiddle.net/z8mKX/3/)。

# php - PHP 导出日期范围

> ID：13143965
> 
> 赞同：0
> 
> 时间：2012-10-30T16:54:24.800
> 
> 标签：php, sql, database

我有一个工作数据库导出到 xls，但我需要它来导出基于“关闭”日期的特定日期范围。（见下面的代码）。

例如，我希望它导出上个月和/或本月的所有“关闭”日期（范围：2012 年 9 月 1 日至 2012 年 9 月 30 日或 2012 年 10 月 1 日至 2012 年 10 月 31 日）

```
<?PHP

//EDIT YOUR MySQL Connection Info:
$DB_Server = "localhost";        //your MySQL Server
$DB_Username = "root";                 //your MySQL User Name
$DB_Password = "";                //your MySQL Password
$DB_DBName = "ost_helpdesk";                //your MySQL Database Name
$DB_TBLName = "ost_ticket";                //your MySQL Table Name

//$DB_TBLName,  $DB_DBName, may also be commented out & passed to the browser
//as parameters in a query string, so that this code may be easily reused for
//any MySQL table or any MySQL database on your server

//DEFINE SQL QUERY:
//edit this to suit your needs
$sql = "Select ticketID, name, company, subject, closed from $DB_TBLName ORDER BY closed DESC";

//Optional: print out title to top of Excel or Word file with Timestamp
//for when file was generated:
//set $Use_Titel = 1 to generate title, 0 not to use title
$Use_Title = 1;
//define date for title: EDIT this to create the time-format you need
$now_date = DATE('m-d-Y');
//define title for .doc or .xls file: EDIT this if you want
$title = "MDT Database Dump For Table $DB_TBLName from Database $DB_DBName on $now_date";
/*

Leave the connection info below as it is:
just edit the above.

(Editing of code past this point recommended only for advanced users.)
*/
//create MySQL connection
$Connect = @MYSQL_CONNECT($DB_Server, $DB_Username, $DB_Password)
     or DIE("Couldn't connect to MySQL:<br>" . MYSQL_ERROR() . "<br>" . MYSQL_ERRNO());
//select database
$Db = @MYSQL_SELECT_DB($DB_DBName, $Connect)
     or DIE("Couldn't select database:<br>" . MYSQL_ERROR(). "<br>" . MYSQL_ERRNO());
//execute query
$result = @MYSQL_QUERY($sql,$Connect)
     or DIE("Couldn't execute query:<br>" . MYSQL_ERROR(). "<br>" . MYSQL_ERRNO());

//if this parameter is included ($w=1), file returned will be in word format ('.doc')
//if parameter is not included, file returned will be in excel format ('.xls')
IF (ISSET($w) && ($w==1))
{
     $file_type = "msword";
     $file_ending = "doc";
}ELSE {
     $file_type = "vnd.ms-excel";
     $file_ending = "xls";
}
//header info for browser: determines file type ('.doc' or '.xls')
HEADER("Content-Type: application/$file_type");
HEADER("Content-Disposition: attachment; filename=MDT_DB_$now_date.$file_ending");
HEADER("Pragma: no-cache");
HEADER("Expires: 0");

/*    Start of Formatting for Word or Excel    */

IF (ISSET($w) && ($w==1)) //check for $w again
{
     /*    FORMATTING FOR WORD DOCUMENTS ('.doc')   */
     //create title with timestamp:
     IF ($Use_Title == 1)
     {
         ECHO("$title\n\n");
     }
     //define separator (defines columns in excel & tabs in word)
     $sep = "\n"; //new line character

     WHILE($row = MYSQL_FETCH_ROW($result))
     {
         //set_time_limit(60); // HaRa
         $schema_insert = "";
         FOR($j=0; $j<mysql_num_fields($result);$j++)
         {
         //define field names
         $field_name = MYSQL_FIELD_NAME($result,$j);
         //will show name of fields
         $schema_insert .= "$field_name:\t";
             IF(!ISSET($row[$j])) {
                 $schema_insert .= "NULL".$sep;
                 }
             ELSEIF ($row[$j] != "") {
                 $schema_insert .= "$row[$j]".$sep;
                 }
             ELSE {
                 $schema_insert .= "".$sep;
                 }
         }
         $schema_insert = STR_REPLACE($sep."$", "", $schema_insert);
         $schema_insert .= "\t";
         PRINT(TRIM($schema_insert));
         //end of each mysql row
         //creates line to separate data from each MySQL table row
         PRINT "\n----------------------------------------------------\n";
     }
}ELSE{
     /*    FORMATTING FOR EXCEL DOCUMENTS ('.xls')   */
     //create title with timestamp:
     IF ($Use_Title == 1)
     {
         ECHO("$title\n");
     }
     //define separator (defines columns in excel & tabs in word)
     $sep = "\t"; //tabbed character

     //start of printing column names as names of MySQL fields
     FOR ($i = 0; $i < MYSQL_NUM_FIELDS($result); $i++)
     {
         ECHO MYSQL_FIELD_NAME($result,$i) . "\t";
     }
     PRINT("\n");
     //end of printing column names

     //start while loop to get data
     WHILE($row = MYSQL_FETCH_ROW($result))
     {
         //set_time_limit(60); // HaRa
         $schema_insert = "";
         FOR($j=0; $j<mysql_num_fields($result);$j++)
         {
             IF(!ISSET($row[$j]))
                 $schema_insert .= "NULL".$sep;
             ELSEIF ($row[$j] != "")
                 $schema_insert .= "$row[$j]".$sep;
             ELSE
                 $schema_insert .= "".$sep;
         }
         $schema_insert = STR_REPLACE($sep."$", "", $schema_insert);
         //this corrects output in excel when table fields contain \n or \r
         //these two characters are now replaced with a space
         $schema_insert = PREG_REPLACE("/\r\n|\n\r|\n|\r/", " ", $schema_insert);
         $schema_insert .= "\t";
         PRINT(TRIM($schema_insert));
         PRINT "\n";

     }
}

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T16:58:23.040

只需在 SQL 查询中添加 WHERE 子句。例如，假设`closed`是一个日期时间或时间戳字段：

```
Select ticketID, name, company, subject, closed from $DB_TBLName
WHERE closed BETWEEN '2012-09-01 00:00:00' AND '2012-09-30 23:59:59'
ORDER BY closed DESC 
```

您需要确保在`closed`字段上也有索引以获得最佳性能。

# java - 奇特的 Java 7 Web Start 失败

> ID：13143967
> 
> 赞同：0
> 
> 时间：2012-10-30T16:54:28.043
> 
> 标签：java

我维护一个使用 Java 6 JDK 编写的遗留应用程序。我们将其部署为作为 JNLP 从 Web 下载的独立应用程序。该应用程序与从数据库中提供数据的 servlet 进行通信，并且由于所涉及的数据可能会变得很长，因此 JNLP 应用程序提供了一个“进度表”来显示已传输的数据量以及剩余的数据量。它工作得很好——显然，直到最新的 Java 7 更新。现在，当 JNLP 应用程序运行时，在从 servlet 传输数据期间，进度表停止工作。它似乎挂起，但数据仍在继续传输（servlet 部分工作正常）。但对于我们的最终用户来说，该应用程序似乎失败了！我可以在没有 Webstart 的情况下在本地运行应用程序，并且运行良好。知道问题可能是什么，以及如何解决它吗？

# php - Imagick 像素迭代器 - 非常慢

> ID：13143968
> 
> 赞同：0
> 
> 时间：2012-10-30T16:54:33.520
> 
> 标签：php, performance, image-processing, imagemagick

我正在尝试使用 Imagick 实现[此代码片段](http://www.php.net/manual/en/function.imagefilter.php#109809)（“晕影”效果），但处理速度非常慢：

```
set_time_limit(90);
$iterator = $imagick->getPixelIterator();
$width = $imagick->getImageWidth();
$height = $imagick->getImageHeight();

foreach($iterator as $y => $pixels){
  foreach($pixels as $x => $pixel){

    $l = 1 - 0.7 * (1 - pow((sin(M_PI / $width * $x) * sin(M_PI / $height * $y)), 0.4));       

    extract($pixel->getColor());   

    $pixel->setColor(sprintf('rgb(%d,%d,%d)', $r * $l, $g * $l, $b * $l));
  }

  $iterator->syncIterator();
} 
```

原来的：

![在此处输入图像描述](../Images/fcf42ad26c9be4811825894edcc28c39.png)

结果：

![在此处输入图像描述](../Images/7712fbc93abd0d1ff50b401d83eedfa6.png)

对于 1600x1200 的图像，处理图像大约需要 35 秒。有一个更好的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T17:56:15.013

你正在做的是结束杀死 ImageMagic 已经有`-vignette`命令

```
convert input.jpg -background black -vignette 70x80 output.png 
```

**原来的**

![在此处输入图像描述](../Images/cd3bfe3d3dc831eef8c09aa502e954d2.png)

**最终输出**

![在此处输入图像描述](../Images/ad22b3fe035de4df4de5e930863d4252.png)

# bash - `if` 命令中的相等性测试返回错误消息“没有这样的文件或目录”

> ID：13143969
> 
> 赞同：1
> 
> 时间：2012-10-30T16:54:34.247
> 
> 标签：bash, shell, if-statement

我正在写一个 shell 脚本，我正在做

```
if ["$item0" == "$item1"]
then
echo match
fi 
```

但它在运行时给出错误消息“没有这样的文件或目录”。如果有帮助，上面的项目确实包含文件路径。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-30T16:57:39.103

您需要注意变量和括号之间的空格，它们很重要。此外，如果`then`与 位于同一行`if`，则需要一个`;`

更正的语法：

```
if [ "$item0" == "$item1" ]; then
    echo match
fi 
```

PS如果`match`应该是一个变量，请确保它是`echo "$match"`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-30T17:11:32.170

首先，在此处发布时，您可能应该始终提供完整的错误消息，可能会删除任何敏感数据。

让我们首先解释一下您的线路是如何出错的：

1.  在 bash 中，`[`基本上是 的同义词`test`，但有一些细微差别（最明显的是它希望最后一个参数是`]`）。运行`man test`以获取更多信息。`test`接受具有自己语法的东西，然后根据其输入评估为真或假返回适当的值。因此，由于`test`它是一个程序，而不是 bash 内置，它必须将其输入作为单独的参数（注意空格）：

    `[ "$item0" = "$item1" ]`

    The `=`instead of the`==`是一种风格偏好。它们做同样的事情，但`=`由于 bash 不是 C 语言，因此有些人更喜欢它们。

2.  其次，bash 需要知道外部命令的输入何时结束。这是用`;`. 为了更清楚，假设我这样做

    `if true then echo foo fi fi`

    现在我正在尝试打印`foo fi`if 语句的计算结果是否为真。看到我的问题了吗？Bash 不知道何时终止对 echo 命令的输入。

正确重写：

```
if [ "$item0" = "$item1" ]; then echo match; fi 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-30T19:31:53.173

对于它的价值，如果您使用的是 bash，它比（除非您真的需要可移植性，一段时间以来一直是首选的 bash 习惯用法）`[[`更容易使用和更可靠。一方面，不必用 引用参数扩展，也不必担心空字符串。它还具有模式匹配（with ）和正则表达式匹配（with ）。`[``[[``[[``==``=~`

# java - Eclipse（实际上是 RAD）在项目上抛出 WAR 验证错误（CHKJ3000E）

> ID：13143970
> 
> 赞同：18
> 
> 时间：2012-10-30T16:54:36.153
> 
> 标签：java, eclipse, war, rad

我有一个刚刚从 CVS 导入的项目。它在其他几十个开发人员 IDE 中工作，但就我而言，它报告了一个问题：

```
CHKJ3000E: WAR Validation Failed: com.ibm.etools.j2ee.commonarchivecore.exception.DeploymentDescriptorLoadException: WEB-INF/web.xml 
```

谷歌搜索表明它与 Eclipse 加载上下文的方式有关。对于某些用户来说，清理项目是有效的。它不适合我。

关于我接下来可以尝试解决的任何想法？

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2014-04-22T18:53:20.760

Eclipse > Project Explorer > 右键单击​​出现错误的**项目**> **Validate**

![在此处输入图像描述](../Images/205df6ce80a7ec5be8e09a575a016ba5.png)

这对我有用！

我对几个项目都有相同的错误消息，并且对每个项目都执行了相同的程序，现在它们都已修复。

相关链接：http: [//viralpatel.net/blogs/eclipse-this-project-needs-to-migrate-wtp-metadata/](http://viralpatel.net/blogs/eclipse-this-project-needs-to-migrate-wtp-metadata/)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-30T17:21:27.383

这是一个常见的问题，是由于`cache`eclipse 维护的。

尝试清除插件缓存并进行全面清理，您也可以删除现有服务器并创建一个新服务器。

有关更多详细信息，请参阅[此处](http://www.eclipsezone.com/eclipse/forums/t64709.html)，看到人们遇到了类似的问题，清理和删除缓存并重新启动这样的东西已经为他们解决了。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-12-02T18:38:04.117

我发现 >Validate 选项（见上文）仅在下一次构建之前有效。作为构建的一部分的验证很可能存在问题（对于 Web 项目），而验证自己的工作正常。

为了解决这个问题，这以一致的方式对我有用：

> 项目 > 属性 > 验证：Web (xxx) 验证器

在这里，禁用 Build，但保留 Manual 启用。

现在，当触发新构建时（例如，当我调用 >Gradle >Refresh Gradle Project 时），该项目不会收到验证错误。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-03-03T11:15:14.727

就像[其他人](https://stackoverflow.com/questions/13143970/eclipse-actually-rad-throwing-war-validation-error-chkj3000e-on-project#comment82180495_23227911)已经提到的那样，当 Gradle 或什至以其他方式刷新项目时，这个错误似乎在使用[WAR](https://docs.gradle.org/current/userguide/war_plugin.html)插件的 Gradle 项目中一遍又一遍地出现，仅仅是因为它已在 Eclipse 之外进行了更改。虽然在 Eclipse 中[验证项目是可行的](https://stackoverflow.com/a/23227911/2055163)，但这只是一个临时解决方法，直到下一次刷新项目。我已经清理了我能找到的所有缓存和东西，所以怀疑这与这些有什么关系。

查看 Eclipse 中的错误视图，有一个额外的堆栈跟踪可用，使事情更清晰：

```
org.eclipse.jst.j2ee.commonarchivecore.internal.exception.DeploymentDescriptorLoadException: WEB-INF/web.xml
Stack trace of nested exception:
org.eclipse.jst.j2ee.commonarchivecore.internal.exception.EmptyResourceException: platform:/resource/de.am_soft.sm_mtg.frontend/WEB-INF/web.xml
    at org.eclipse.jst.j2ee.commonarchivecore.internal.util.ArchiveUtil.getRoot(ArchiveUtil.java:442)
    at org.eclipse.jst.j2ee.commonarchivecore.internal.strategy.XmlBasedImportStrategyImpl.primLoadDeploymentDescriptor(XmlBasedImportStrategyImpl.java:42)
    at org.eclipse.jst.j2ee.commonarchivecore.internal.strategy.War22ImportStrategyImpl.loadDeploymentDescriptor(War22ImportStrategyImpl.java:90)
    at org.eclipse.jst.j2ee.commonarchivecore.internal.strategy.War22ImportStrategyImpl.importMetaData(War22ImportStrategyImpl.java:84)
    at org.eclipse.jst.j2ee.commonarchivecore.internal.impl.WARFileImpl.getDeploymentDescriptor(WARFileImpl.java:146)
    at org.eclipse.jst.j2ee.model.internal.validation.WarValidator.validateInJob(WarValidator.java:334)
    at org.eclipse.jst.j2ee.internal.web.validation.UIWarValidator.validateInJob(UIWarValidator.java:113)
    at org.eclipse.wst.validation.internal.operations.ValidatorJob.run(ValidatorJob.java:78)
    at org.eclipse.core.internal.jobs.Worker.run(Worker.java:63) 
```

`platform:/resource`[Eclipse记录](https://help.eclipse.org/2019-12/index.jsp?topic=%2Forg.eclipse.platform.doc.isv%2Freference%2Fmisc%2Fplatform-scheme-uri.html)如下：

> 它用于标识位于工作区中的资源。“资源”之后的下一个路径段应该是项目的名称，后面可以是我们要定位的文件夹和/或文件。

因此，出于某种原因，验证器希望`WEB-INF/web.xml`在 Eclipse 项目的根目录中可用，这对我来说没有多大意义：它过去从未存在过，将它放在那里也不能解决错误。相反，Eclipse 记录了 20 个新错误，没有任何额外的消息或堆栈跟踪，即使在删除之后我也无法摆脱这些错误`WEB-INF/web.xml`，因此恢复了以前的项目状态。

[Eclipse 项目的bugtracker](https://bugs.eclipse.org/bugs/show_bug.cgi?id=201603)中也报告了类似的错误。

```
!ENTRY org.eclipse.wst.validation 4 0 2007-08-28 12:00:39.515
!MESSAGE 
*** ERROR ***: Tue Aug 28 12:00:39 EDT 2007    org.eclipse.jst.j2ee.commonarchivecore.internal.exception.DeploymentDescriptorLoadException: WEB-INF/web.xml
    Stack trace of nested exception:
    org.eclipse.jst.j2ee.commonarchivecore.internal.exception.EmptyResourceException: platform:/resource/ARBankLogWeb/WebContent/WEB-INF/web.xml 
```

我的项目使用 WAR 插件从原生 Eclipse 迁移到 Gradle，后者允许手动定义`web.xml`. 所以我尝试了，但也没有改变任何事情：

```
war
{
    webXml = file('src/main/webapp/WEB-INF/web.xml')
} 
```

因此，无论验证器的问题是针对某些项目设置的，我目前能找到可靠工作的唯一解决方法是在每个项目中禁用它：

[![禁用网络验证器。](../Images/b673ca968000e0c754b182dc07713a47.png)](https://i.stack.imgur.com/y7QiB.png)

这使得 Eclipse 创建一个本地设置文件，将该设置存储在项目目录中，并且可以像项目的其他部分一样置于版本控制之下。这样，该设置将立即可供项目的所有用户使用。以下是我的情况的示例：

> $PROJECT_NAME.settings\org.eclipse.wst.validation.prefs

```
DELEGATES_PREFERENCE=delegateValidatorList
USER_BUILD_PREFERENCE=enabledBuildValidatorListorg.eclipse.jst.j2ee.internal.classpathdep.ClasspathDependencyValidator;
USER_MANUAL_PREFERENCE=enabledManualValidatorListorg.eclipse.jst.j2ee.internal.web.validation.UIWarValidator;org.eclipse.jst.j2ee.internal.classpathdep.ClasspathDependencyValidator;
USER_PREFERENCE=overrideGlobalPreferencestruedisableAllValidationfalseversion1.2.800.v201904082137 
```

虽然理论上另外存储这些设置与使用 Gradle 的原因相悖，因为它应该能够在为 Eclipse 创建项目时生成这些文件，这是使这些设置可用并且使用 SCM 记录它们的状态而无需实现太多的最简单方法在`build.gradle`.

[对Eclipse-bugtracker](https://bugs.eclipse.org/bugs/show_bug.cgi?id=201603)中的错误进行投票可能是一个好主意。

# testing - 我可以告诉 AutoFixture 为继承自它的类的所有实例调用一些基本方法吗？

> ID：13143977
> 
> 赞同：3
> 
> 时间：2012-10-30T16:54:57.050
> 
> 标签：testing, autofixture

我有一个`Entity`公开只读 Id 属性的类。此属性在保存后通过 ORM 设置（不再是瞬态的）。我想让 AutoFixture 调用一个方法，该方法在内部为从 Entity 继承的类的所有实例设置 Id 属性。

有几个自定义项应用于注册这些后代中的少数几个的创建，所以我想确保它们首先运行。我想理想的情况是允许我在从夹具返回之前对匿名值运行一些修改代码。

例如，当我调用 时`fixture.CreateAnonymous<Order>()`，会有一些其他自定义（或类似的）可以在该 Order 实例返回之前对其进行修改。

这种修改不仅会拦截`Order`，还会拦截任何`Entity`后代。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T20:19:53.797

在使用扩展 Fixture 的自定义类解决了这个问题后，我接受了 Ruben 和 Mark 的建议。我通过 ICustomization 创建了相同的基本解决方案，该解决方案通过我现有的自定义 CompositeCustomization 应用。这是在通过 CreateAnonymous 返回实例之前设置我的实体 ID 的新自定义。

```
public class SetEntityIdCustomization : ICustomization {
    public void Customize(IFixture fixture) {
        var engine = ((Fixture)fixture).Engine;
        fixture.Customizations.Add(new Postprocessor(
            engine, o => {
                var entity = o as BaseEntity;
                if (entity == null || !entity.IsTransient()) {
                    return;
                }

                entity.SetId(fixture.CreateAnonymous<Guid>());
            }));
    }
} 
```

# sql - 使用 excel 2007 访问外部 sql 数据库导入>编辑>导出表

> ID：13143979
> 
> 赞同：1
> 
> 时间：2012-10-30T16:55:00.850
> 
> 标签：sql, database, excel

有没有一种方法或指南可以连接到远程 sql 服务器，如果您可以在使用 excel 界面或类似接口的 excel 中导入>修改>导出表？无需直接登录服务器。（我不想让他们访问一台服务器上的多个域）

使用数据选项卡中的 sql 按钮可以导入和编辑文件，但只能导出到新表（图）
[http://i47.tinypic.com/e6qgdj.jpg](http://i47.tinypic.com/e6qgdj.jpg)

使用 mysql 工作台会让用户感到困惑
[http://i45.tinypic.com/2z4fh1f.jpg](http://i45.tinypic.com/2z4fh1f.jpg)

我只是希望用户：
1\. 将表格从外部数据库导入 excel。
2.用excel编辑数据库。
3\. 导出回数据库覆盖旧文件。
[http://i48.tinypic.com/2lm7zi1.jpg](http://i48.tinypic.com/2lm7zi1.jpg)

我无法工作的唯一方法是这个。我假设它也是我想要的。
[http://i49.tinypic.com/bdjw51.jpg](http://i49.tinypic.com/bdjw51.jpg)

# android - Gridview 不会触发 OnLongClickListener

> ID：13143981
> 
> 赞同：0
> 
> 时间：2012-10-30T16:55:08.987
> 
> 标签：android, android-layout, android-gridview

我有一个空的网格视图，它填充了表格布局中的一列，我想长按该网格视图并弹出一个快速操作弹出窗口。

空的 gridview 不会触发 longpress 事件。

```
gridTue.setOnLongClickListener(new OnLongClickListener() {

    @Override
    public boolean onLongClick(View v) {
        // TODO Auto-generated method stub
        return false; //I've breackpoint this line to test if it fires or not
    }
}); 
```

XML:

```
<GridView
            android:id="@+id/gridTue"
            android:numColumns="1"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:gravity="center"
            android:longClickable="true"
            android:background="@android:color/background_light" /> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-07-13T21:39:30.763

如果您希望长按 gridView 上的某个项目，您应该使用[setOnItemLongClickListener](http://developer.android.com/reference/android/widget/AdapterView.html#setOnItemLongClickListener%28android.widget.AdapterView.OnItemLongClickListener%29)。

如果您希望能够长按 gridView 本身，您的代码似乎没问题。也许您在其中添加了一些捕捉事件的视图？如果是这样，您可以使用 setOnTouchListener，或者将 gridView 放在将捕获此事件的布局中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-18T04:27:12.017

`setOnItemLongClickListener`为我工作，而不是`setOnLongClickListener`如上所述的帖子。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-13T21:08:11.353

也许您的 gridView 在 ListView 中，然后事件由 listview 处理而不是由 gridview 处理。

# php - ImageTTFtext 显示特殊字符的 html 值

> ID：13143982
> 
> 赞同：0
> 
> 时间：2012-10-30T16:55:09.933
> 
> 标签：php, imagemagick, gd, phpthumb

我到处寻找，但我不知道为什么我会遇到这个问题。

我正在使用 phpThumb 在一些照片上添加一些文本（水印）。问题是我需要使用来自挪威的特殊字符（æøå）。这些在 ImageTTFtext 中表现不佳。

![在此处输入图像描述](../Images/3b6c7c2422adb90d455e94a6889e1f8b.png)

上图包含æ 的代码并且应该（根据文档）是正确的。我还尝试了一些我在堆栈上找到的函数，但一切都返回相同。**为什么它打印代码而不是我要显示的实际字符？**

这是由于某些软件的旧版本还是什么？

版本：

```
PHP 5.3.2
ImageMagick 6.5.7
GD: 2.0 
```

编辑：为了清楚起见，我根据文档以“正确”的方式传递文本。作为参数传递`utf_encode('&#8364;')`应该有效。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T20:57:22.390

您关心 的[*text*参数`imagettftext`](http://php.net/imagettftext)。让我们回顾一下它的文档：

> UTF-8 编码的文本字符串。
> 
> 可能包括十进制数字字符引用（形式：`&#8364;`[€]）以访问位置 127 以外的字体中的字符。`&#xA9;`支持十六进制格式（如 [©]）。UTF-8 编码的字符串可以直接传递。

在您的问题中，您*既没有*发布您正在使用的代码，*也*没有指定使用的文字字符串。例如，如果您传递一个字符串`"&amp;#238;"`，您将看到 î。因此，您添加到问题中的显示本身可能会证明您遇到的问题，但显示本身可能与它的原因完全无关。原因将是字符串。

旁边的函数是 gd 扩展的一部分，而不是 ImageMagick。

PHP 版本 5.3.2 也已过时，但是如果出现与您描述的错误相符的错误，我还没有扫描它的更新日志（也没有扫描您使用的 GD 库版本）。但这似乎是可能的。

在任何情况下都应该`imagettftext`正确显示文本。即使没有找到一个字符，你也会看到不同的东西。

> 如果字符串中使用了字体不支持的字符，则空心矩形将替换该字符。从参数说明：

提供您传递给该函数[的字符串的十六进制转储](https://stackoverflow.com/questions/1057572/how-can-i-get-a-hex-dump-of-a-string-in-php)并将其添加到您的问题中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T20:58:09.037

回答这个问题，以便任何与我面临相同问题的人都可以找到解决方案。

原来 GD 的“内置”字体不支持我的特殊字符。上传您自己的字体并在函数中使用它们，它应该可以工作。

# java - 在同一类的方法定义中调用类方法

> ID：13143983
> 
> 赞同：1
> 
> 时间：2012-10-30T16:55:12.200
> 
> 标签：java

所以我正在编写一个介绍 Java 类的程序。我正在定义一种方法来在类 Fraction 中将两个分数相加。分数有 2 个变量，分子和分母。这些变量中的每一个都有一个 setter 和一个 getter。无论如何，我的添加方法有问题，如下所示。我只是尝试以一种有意义的方式实现它，但我确信我在调用方法/使用不起作用的对象方面做了一些事情。

```
public void add(Fraction fraction1, Fraction fraction2)
{
    Fraction fraction3 = new Fraction();

    int a = fraction1.getNumerator;
    int b = fraction1.getDenominator;
    int c = fraction2.getNumerator;
    int d = fraction2.getDenominator;

    fraction3.setNumerator((a * d) + (b * c));
    fraction3.setDenominator(b * d);
} 
```

我不知道问题是否出在方法定义中，是否可以那样使用对象类型，或者是否还有其他问题。任何帮助将不胜感激，如果我需要提供任何信息，我会尽快提供。

编辑：错误是编译器错误，找不到对象。函数调用后我忘记了括号，问题解决了。很抱歉忘记详细说明我的错误给您带来的不便。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T16:58:33.297

我猜你的`get`电话应该是方法。您是否有任何机会遇到编译错误。

```
int a = fraction1.getNumerator();
int b = fraction1.getDenominator();
int c = fraction2.getNumerator();
int d = fraction2.getDenominator(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T16:58:38.450

你`fraction3`是一个局部变量，一旦`add`方法完成，所有对它的引用都会丢失。你可以尝试返回`fraction3`而不是`void`为了坚持下去。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-30T16:59:16.453

您的方法是`void`，这意味着它没有返回答案。对您的代码进行一些细微的修改会产生一个有效的解决方案：

```
public static Fraction add(Fraction fraction1, Fraction fraction2)
{
    Fraction fraction3 = new Fraction();

    int a = fraction1.getNumerator();
    int b = fraction1.getDenominator();
    int c = fraction2.getNumerator();
    int d = fraction2.getDenominator();

    fraction3.setNumerator((a * d) + (b * c));
    fraction3.setDenominator(b * d);

    return fraction3;
} 
```

请注意，我将方法更改为，`static`因为它不修改`this`，将返回类型从更改`void`为`Fraction`，并添加了一条`return`语句。并不是说这是一个*非破坏性的*添加，因为它返回一个新的分数。如果您想使用这种风格，那么您可能应该摆脱*setter*方法，因为它们不会被使用，并将字段声明为*final*，而是通过构造函数设置分子/分母。

您的另一个选择是定义*破坏性*加法操作，这意味着*更新*接收器而不是像上面那样返回*新的分数对象*。

```
public void add(Fraction that)
{
    int a = this.getNumerator();
    int b = this.getDenominator();
    int c = that.getNumerator();
    int d = that.getDenominator();

    this.setNumerator((a * d) + (b * c));
    this.setDenominator(b * d);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-30T16:58:54.240

这只是我的观点，但如果您要`add`接受两个参数，请将方法设为静态。如果你要让它接受一个参数，它不会是静态的，因为第二个参数是隐式的`this`。

这样做的原因是，如果非静态版本采用 2 个参数，那么您使用实例 a 对实例 b 和实例 c 进行操作？恕我直言，这没有多大意义。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-30T16:59:54.557

您的方法中缺少括号...

```
int a = fraction1.getNumerator();
int b = fraction1.getDenominator();
int c = fraction2.getNumerator();
int d = fraction2.getDenominator(); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-30T16:59:58.630

只需添加并从方法`return type`返回，如下所示：`fraction3`

```
public Fraction add(Fraction fraction1, Fraction fraction2)
{
   Fraction fraction3 = new Fraction();

   int a = fraction1.getNumerator();
   int b = fraction1.getDenominator();
   int c = fraction2.getNumerator();
   int d = fraction2.getDenominator();

   fraction3.setNumerator((a * d) + (b * c));
   fraction3.setDenominator(b * d);
   return fraction3 ;
} 
```

现在您可以将此方法用作：

```
 Fraction resultFraction = add(fraction1, fraction2); 
```

如果你想在 fraction1 本身中添加 fraction2 即

```
 fraction1.add(fraction2); 
```

然后将您的方法更新为：

```
public void add(Fraction fraction2)
{
   int a = this.numerator;
   int b = this.denominator;
   int c = fraction2.getNumerator();
   int d = fraction2.getDenominator();

   this.numerator = (a * d) + (b * c);
   this.denominator = (b * d);
} 
```

# sql - 如何根据子查询中的计数（*）选择一个值

> ID：13143987
> 
> 赞同：0
> 
> 时间：2012-10-30T16:55:26.437
> 
> 标签：sql, sql-server-2008, aggregate-functions

我在下面运行一个查询，因为我不能将聚合放在 where 子句中，所以它不起作用，但鉴于它在子查询中，我不完全确定从这里开始的最佳方法是什么......！

不起作用的行是：

```
 (select gradeid from commissionconsultants where UserId = ic.primaryconsultantid) 
        and starters = COUNT(*) ) from InvoiceCommissions ic 
```

完整的查询如下：

```
select u.username + ' ' + u.surname as UserName, 
ic.primaryconsultantid, 
COUNT(ic.invoiceid) as starters, 
DATENAME(mm,ic.invoiceissueddate) AS [month], 
DATEPART(yy,ic.invoiceissueddate) as [year], 
cast(SUM((ic.value / ic.exchangerate) * (ic.primaryconsultantperc / 100)) as numeric(8,2)) AS totalvalue, 
(select threshold from commissiongrades where gradeid = 
    (select gradeid from commissionconsultants where UserId = ic.primaryconsultantid) ) AS Threshold, 
(select percentage from commissiongradevalues where gradeid = 
    (select gradeid from commissionconsultants where UserId = ic.primaryconsultantid) 
        and starters = COUNT(*) ) from InvoiceCommissions ic
inner join commissionconsultants cc on cc.userid = ic.primaryconsultantid
inner join Users u on u.UserId = ic.primaryconsultantid
group by primaryconsultantid, DATENAME(mm,invoiceissueddate), DATEPART(yy,invoiceissueddate), u.username + ' ' + u.surname 
```

本质上，我想做的是根据顾问的等级（在佣金顾问中找到）和给定月份的展示次数从表（commissiongradevalues）中查找佣金百分比。

例如，如果顾问在一个月内进行了一次展示，他们将获得 XX 百分比的佣金，如果他们在一个月内进行了两次展示，他们将获得 YY 百分比的佣金。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T03:06:16.777

这是我对您要做什么的最佳猜测。

```
WITH ic AS
(
SELECT ic.primaryconsultantid
     , COUNT(ic.invoiceid) as starters
     , DATENAME(mm,ic.invoiceissueddate) AS [month]
     , DATEPART(yy,ic.invoiceissueddate) as [year]
     , CAST(SUM((ic.value / ic.exchangerate) * (ic.primaryconsultantperc / 100)) as numeric(8,2)) AS totalvalue
  FROM InvoiceCommissions ic
 GROUP BY primaryconsultantid
     , DATENAME(mm,invoiceissueddate)
     , DATEPART(yy,invoiceissueddate)
)    
SELECT u.username + ' ' + u.surname AS UserName
     , ic.primaryconsultantid
     , ic.starters
     , ic.month
     , ic.year
     , ic.totalvalue
     , cg.threshold 
     , cgv.percentage 
  FROM ic
 INNER JOIN Users u 
    ON u.UserId = ic.primaryconsultantid
 INNER JOIN commissionconsultants cc
    ON cc.UserId = ic.primaryconsultantid
  LEFT OUTER commissiongrades cg
    ON cg.gradeid = cc.gradeid
  LEFT OUTER commissiongradevalues cgv
    ON cgv.gradeid = cc.gradeid
   AND cgv.starters = ic.starters 
```

但是，您的查询中有一些我不明白的地方。

1.  为什么将阈值和百分比放在 SELECT 中？您是否期望缺少年级 ID？如果没有，请将 更改`LEFT OUTER`为`INNER`。
2.  如果您已经有佣金，为什么还要获得佣金`ic.primaryconsultantperc`？这是一个**或有**佣金吗？如果是，为什么它没有添加到`totalvalue`?

总之，享受吧！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T16:57:01.150

替换`COUNT(*)`为：

```
(select count(*) from commissionconsultants) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T17:08:00.340

我建议在进行分组时只使用一个主子查询，然后进行所有连接。没有测试数据很难编写查询。
无论如何，据我所知-您正在使用两个子查询`commissionconsultants`，实际上您只需要在此表上进行一个联接。

```
select
    ic.UserName, 
    ic.primaryconsultantid, 
    ic.starters, 
    ic.[month],
    ic.[year],
    ic.totalvalue,
    cg.threshold as Threshold, 
    cgv.percentage as Percentage
from
(
    select
        u.username + ' ' + u.surname as UserName, 
        tt.primaryconsultantid, 
        count(tt.invoiceid) as starters,
        datename(mm, tt.invoiceissueddate) as [month], 
        datepartT(yy, tt.invoiceissueddate) as [year],
        cast(sum((tt.value / tt.exchangerate) * (tt.primaryconsultantperc / 100)) as numeric(8,2)) as totalvalue,
    from InvoiceCommissions as tt
        inner join Users as u on u.userid = tt.primaryconsultantid
    group by
        tt.primaryconsultantid, 
        datename(mm, tt.invoiceissueddate), datepart(yy, tt.invoiceissueddate),
        u.username + ' ' + u.surname
) as ic
    inner join commissionconsultants as cc on cc.userid = ic.primaryconsultantid
    inner join commissiongrades as cg on cg.gradeid = cc.gradeid
    inner join commissiongradevalues as cgv on cgv.gradeid = cc.gradeid and cgv.starters = ic.starters 
```

# c++ - 唯一员工 ID 生成 C++

> ID：13143988
> 
> 赞同：-6
> 
> 时间：2012-10-30T16:55:28.660
> 
> 标签：c++, unique-id

我正在用 C++ 编写一个员工数据库程序。我想为每个员工生成一个唯一的员工编号，但我没有成功，有人可以帮助我，哦，请发布与 Turbo C++ Borland 而不是 Visual C++ 相关的代码。希望尽快收到你们的来信。如果不是代码，请告诉我一个算法来完成这项工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T16:59:37.797

从 1 开始，每次增加。这是一个单线程版本：

```
unsigned long long int unique_id()
{
    static unsigned long long int n = 0;
    return ++n;
} 
```

对于线程安全版本，请改用 an`std::atomic<unsigned long long int>`或添加互斥锁。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-30T16:59:50.893

一个非常简单的唯一 ID 生成器

```
class UniqueIDGenerator{
   private:
      static unsigned long uniqueId = 1000ul;   //Starting the IDs with 1000

   public: 
      static unsigned long generateUniqueId(){
         return uniqueId++;
      }
}; 
```

像这样使用它

```
int empId = UniqueIDGenerator::generateUniqueId(); 
```

# jquery - 如何将html绑定到asp.net中的面板

> ID：13143989
> 
> 赞同：1
> 
> 时间：2012-10-30T16:55:31.317
> 
> 标签：jquery, asp.net, html, c#-4.0

我的数据库中有 html 内容，并希望将此 html 绑定到面板或 div 中。

我想将此 html 内容放入数据库并放入面板，而不是在我想找到对 html 的控制之后。

我的 html 内容有一些文本框、标签、按钮、一些图像控件，所以我想找到这个控件

如果可能的话，请给我解决方案。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T17:30:01.560

最简单的方法是使用 asp.net 文字并将 html 放在后面代码中的文字中。需要以某种方式从数据库中提取 html。如果您需要帮助，请告诉我。

**前端**

```
<asp:Literal ID="litTest" runat="server" Text=""/> 
```

**代码背后**

```
litTest.Text = "*Whatever your html content would be*"; 
```

*如果您使用 asp.net 文字，则可以使用以下模式属性：*

**直通**

*   控件的内容不会被修改。

**编码**

*   控件的内容被转换为 HTML 编码的字符串。

**转换**

*   不受支持的标记语言元素将从控件的内容中删除。如果 Literal 控件在支持 HTML 或 XHTML 的浏览器上呈现，则不会修改控件的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T16:58:08.360

使面板或 div 服务器可访问，但添加 id 和 runat

**html**

```
<div id="div1" runat="server></div> 
```

**背后的代码**

```
div1.InnerHTML = "yourhtmlstring"; 
```

**或者**

```
div1.InnerHTML = yourhtmlstringvariable; 
```

要在服务器控件中查找控件，假设在将 html 分配给 div1 之后，您可以使用**[FindControl](http://msdn.microsoft.com/en-us/library/486wc64h.aspx)**方法。我假设在 div1 html 中有控件，id 为 TextBox1。

```
 TextBox myControl1 = (TextBox) div1.FindControl("TextBox1"); 
```

# ruby-on-rails - `gsub` 用于句子

> ID：13143992
> 
> 赞同：-3
> 
> 时间：2012-10-30T16:55:37.260
> 
> 标签：ruby-on-rails, ruby

我有一个字符串：

```
Тормозные диски 
```

，`gsub`我必须得到：

```
+ТОРМОЗН* +ДИС* 
```

我需要：

*   转换为大写（可以用`upcase`）
*   在单词的开头，添加`+`
*   对于每个单词，切片最后两个符号
*   在最后一个位置，添加`*`

我很难对上面列出的所有内容进行编码。请帮帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T17:16:16.147

您不能使用`uppercase`，因为 Ruby 中没有这样的方法，但您可以使用`upcase`。

```
string.upcase.gsub(/\b(\w*?)\w{0,2}\b/, '+\1*') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T17:29:29.733

我将提示升级：

```
require "unicode_utils/upcase"
UnicodeUtils.upcase( 'Тормозные диски' ) 
```

# xml - JSONX 到 JSON 的转换

> ID：13143994
> 
> 赞同：2
> 
> 时间：2012-10-30T16:55:38.220
> 
> 标签：xml, json, arrays, jsonx

我从我的数据库中转储了一些 XML 数据，我需要将其重新格式化为 JSON。我使用的是 IBM DataPower 数据库，因此我实际上需要将该 XML 转换为[JSONx](http://publib.boulder.ibm.com/infocenter/wsdatap/v3r8m1/topic/xs40/convertingbetweenjsonandjsonx05.htm)，然后使用 IBM 的默认转换器，它会自动将 JSONx 转换为 JSON。

我在定义 JSONx 数组的元素时遇到了困难。这是我目前正在尝试的：

# XML

```
<sql result="success">
    <row>
        <column>
            <name>Prod</name>
            <value>Acura</value>
        </column>
        <column>
            <name>Color</name>
            <value>SILVER</value>
        </column>
        <column>
            <name>Prod</name>
            <value>Accord</value>
        </column>
        <column>
            <name>Color</name>
            <value>Gold</value>
        </column>
    </row>
</sql> 
```

# 所需的 JSON 输出

```
{"Category" : [
    {“prod”: “Acura”, "Color" : “Silver”},
    {“prod”: “Accord”, "Color" : “Gold”}
    ],
    "Status" : “Success”
    } 
```

我遇到的问题是我无法获得`prod`并`color`成为同一个 JSON 对象的一部分。相反，我得到这样的输出：

```
{"Category": [{
    "ID":    [
        ": Acura",
        ": Accord"
        ],
    "NAME":    [
        ": SILVER",
        ": Gold"
        ]
}]} 
```

这是我正在使用的生成有问题的 JSON 的 JSONx 代码：

```
<json:object
    xsi:schemaLocation="http://www.datapower.com/schemas/json jsonx.xsd"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:json="http://www.ibm.com/xmlns/prod/2009/jsonx">
    <json:array name="Category">
        <json:object>
            <xsl:for-each select="//column">
                <xsl:variable name="colName" select="name" />
                <xsl:if test="$colName = 'Prod'">
                    <json:string name="Prod">:
                        <xsl:value-of select="value" />
                    </json:string>
                </xsl:if>
                <xsl:if test="$colName = 'Color'">
                    <json:string name="Color">:
                        <xsl:value-of select="value" />
                    </json:string>
                </xsl:if>
            </xsl:for-each>
        </json:object>
    </json:array>
</json:object> 
```

我可以说`<xsl:for-each>`标签正在经历一个条件并在循环中创建一个 JSON 对象，但我不明白如何在它获取 和 的值后*创建*JSON 对象。如何确保正确解析这些值？`color``prod`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T23:40:31.030

嗨，我得到了答案，我尝试了多种可能性，这是其中一种可能性，我会得到我在那个问题中提到的输出

```
<json:object xsi:schemaLocation="http://www.datapower.com/schemas/json jsonx.xsd"
                 xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                 xmlns:json="http://www.ibm.com/xmlns/prod/2009/jsonx">
    <json:array name="Categories">

<xsl:for-each select="sql/row">
<json:object>
<xsl:for-each select="column">
<xsl:variable name="colName" select="name" />
<xsl:choose>
<xsl:when test="$colName = 'PROD ">
<json:string name="name">  <xsl:value-of select="value"/></json:string>
</xsl:when>
<xsl:when test="$colName = 'NAME'">
<json:string name="ID">  <xsl:value-of select="value"/></json:string>
</xsl:when>
</xsl:choose>
</xsl:for-each>
</json:object>
</xsl:for-each>
</json:array>
   </json:object> 
```

输出

```
{"Categories": [
      {
      "prod": "Acura",
      "color": "SILVER"
   },
      {
      "prod": "Accord",
      "color": "Gold"
   }
]} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T18:41:40.677

您必须在`database to xml`解析上做更多工作，才能获得这样的 xml：

```
<product-list>
    <product>
        <name>Acura</name>
        <color>SILVER</color>
    </product>
    <product>
        <name>Accord</name>
        <color>Gold</color>
    </product>
</product-list> 
```

这种方式将更容易根据需要进行解析。

你展示的xml，也许可以做到这一点，但它会让你变得不合理的复杂性......我认为

编辑：我的编程环境还没有为这样的事情做好准备......所以让我知道结果

```
<json:object xsi:schemaLocation="http://www.datapower.com/schemas/json jsonx.xsd"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:json="http://www.ibm.com/xmlns/prod/2009/jsonx">
    <json:array name="Category">
        <xsl:for-each select="product">
            <json:object>
                <json:string name="prod"><xsl:value-of select="name"/></json:string>
                <json:string name="Color"><xsl:value-of select="color"/></json:string>
            </json:object>
        <xsl:for-each>
    <json:array>
</json:object> 
```

或者这样

```
<json:object xsi:schemaLocation="http://www.datapower.com/schemas/json jsonx.xsd"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:json="http://www.ibm.com/xmlns/prod/2009/jsonx">
    <json:array name="Category">
        <xsl:for-each select="product">
            <xsl:text>{<xsl:text>
                <json:string name="prod"><xsl:value-of select="name"/></json:string>
                <json:string name="Color"><xsl:value-of select="color"/></json:string>
            <xsl:text>}<xsl:text>
        <xsl:for-each>
    <json:array>
</json:object> 
```

我认为第一个很好......如果对象需要名称，请选择最后一个。

# actionscript-3 - cacheAsBitmap 蒙版在动画覆盖下消失

> ID：13143998
> 
> 赞同：1
> 
> 时间：2012-10-30T16:55:43.200
> 
> 标签：actionscript-3, flash, apache-flex

我有一个应用程序在运行时加载一个掩码文件（.swf 文件，其中包含一个带有 alpha 区域的 .png 文件）并在加载后将其应用于显示对象。当然，为了正确应用遮罩，遮罩和被遮罩的对象都需要`cacheAsBitmap = true`设置。

在应用程序中，有时会在蒙版内容上方显示叠加层，该蒙版内容具有用于“模态”行为的半透明背景。背景在显示/隐藏时淡入淡出。

在某些机器（Mac 和 PC，Mac 上更多）上，覆盖的出现/消失会导致被遮罩的内容从舞台上消失，直到调整浏览器的大小。

有谁知道防止这种情况发生的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T12:33:33.370

这可能是因为 cacheAsBitmap 在某些情况下有点棘手和不可靠（可能是由于 Flash 计算渲染区域的方式）。做 alpha 蒙版的另一种方法是使用 BlendMode.ALPHA... 设置它的方法在这里解释： [Actionscript3 alpha masking?](https://stackoverflow.com/questions/1776187/actionscript3-alpha-masking/1776561#1776561)