# StackOverflow 问答 13446000-13446999

# java - 如何处理 http POST 正文

> ID：13446000
> 
> 赞同：0
> 
> 时间：2012-11-19T00:07:28.837
> 
> 标签：java, http, post

我有一个接受发布请求的服务器。该帖子是从 Apache 库发送的。

```
BufferedReader input = new BufferedReader(new InputStreamReader(socket.getInputStream()));
"some code here handles status line"
While (input.ready) {
     line = input.readLine()
     if (line.length() == 0)
    break;
     System.out.println(line);
} 
```

问题是我从来没有真正得到过身体？我只得到标题？

感谢您的任何帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T00:14:49.997

1.  读取标题`input.readLine();`
2.  跳过 2 个空行`"\r\n\r\n"`
3.  在 line.length() != 0 时读取正文。

所以格式可能如下所示：

```
Header1\r\n
Header2\r\n
Header3\r\n\r\n
BODY
BODY
BODY... 
```

另一种选择是使用[com.sun.net.httpserver.HttpServer](http://docs.oracle.com/javase/6/docs/jre/api/net/httpserver/spec/com/sun/net/httpserver/HttpServer.html)

# function - x86 汇编编程函数调用

> ID：13446001
> 
> 赞同：0
> 
> 时间：2012-11-19T00:07:46.077
> 
> 标签：function, assembly, x86, callstack

我正在处理 x86 程序集中的函数调用和返回。我似乎无法让它在不崩溃的情况下运行。我从 bit_operations 调用函数 MIRROR_BYTE。但是每次我运行代码时，它都会出现未知错误和崩溃。它仅在我 MIRROR_BYTE 完成后才发生 在这里真的迷路了，感谢您的帮助。完整代码的网址

[http://codepaste.net/av7ikf](http://codepaste.net/av7ikf)

```
 __declspec(naked) void
 bit_operations(unsigned long inputDWord, unsigned long *outputDWord)
 {
     __asm{
         // start code for part B here

         push eax
         push ebx

         mov ebx, [esp + 12] 
         push ebx                 //move inputDword into the stack
             call MIRROR_BYTE
         pop ebx                  //pop inputDword out of the stack

         pop ebx
         pop eax

         // end code for part B here
         ret
     }
 }

 /*
     This function takes 4 bytes as input and mirrors the value of Byte 4 (leftmost).
     For example, for a byte like 10110111, the mirrored byte value is 11101101.
 */

 __declspec(naked) unsigned long
 MIRROR_BYTE( unsigned long inputDWord )
 {
     __asm{

     // not sure what to do here just return dummy al from inputDword
     mov al, byte ptr[esp +4]

     }
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T00:41:09.090

你需要从 MIRROR_BYTE 返回！！！如果没有`ret`或 C 返回，CPU 将在 MIRROR_BYTE proc 之后继续执行代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T00:19:39.233

请注意，您`pop eax; pop ebx`应该反转以匹配`push eax; push ebx`前面的内容。不过，不能说这是否会导致您的问题。

# javascript - 如何在不重绘已经存在的数据点的情况下更新这些数据？

> ID：13446002
> 
> 赞同：1
> 
> 时间：2012-11-19T00:07:45.250
> 
> 标签：javascript, svg, d3.js

D3 的新手。[我正在尝试修改此处](http://bl.ocks.org/3885304)显示的简单条形图示例。我正在尝试更新数据，但缺少一些基本的东西。我试图跟随[这里](http://bost.ocks.org/mike/constancy/)，迈克谈论对象恒常性。具体来说，我试图在我的代码中实现以下目标：

```
Key functions can be useful for improving performance independent of transitions. For example, if you filter a large table, you can use a key function to reduce the number of DOM modifications: reorder DOM elements in the update selection rather than regenerating them. We used this technique at Square to improve the performance of merchant analytics, and it’s one of the reasons that D3 is faster than most template frameworks. 
```

（就我而言，我的关键功能只是“.data（data）”（没关系，根据[这篇文章](http://thecodingtutorials.blogspot.com/2012/09/using-multi-column-data-with-d3-part-2.html)）

我下面的代码有效，但我怀疑它不是对性能最友好的。例如，频率“70”在两组数据中，但通过“删除”数据，我有效地重新绘制了它。（如果我不先“删除”数据，则会绘制另一个图表，而不是旧图表只是获取更新的数据）。如何修改下面的代码以遵守关键功能，并且不会重绘两个数据集中存在的数据？

我的条形图代码：

```
<!DOCTYPE html>
<meta charset="utf-8">
<style>

body {
  font: 10px sans-serif;
}

.axis path,
.axis line {
  fill: none;
  stroke: #000;
  shape-rendering: crispEdges;
}

.bar {
  fill: steelblue;
}

.x.axis path {
  display: none;
}

</style>
<body>

<button id="change" name="change">Update</button>

<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.1/jquery.min.js" type="text/javascript"></script>
<script src="http://d3js.org/d3.v3.min.js"></script>

<script>
$(document).ready(function () { 
    var old_data = [{"letter": "A","frequency": "50"},
                {"letter": "B","frequency": "60"},
                {"letter": "C","frequency": "70"}, // this also appears in new_data
                {"letter": "D","frequency": "80"},
                ];

    draw_chart(old_data);

    $("#change").click(function(){

        var new_data = [{"letter": "A","frequency": "10"},
                        {"letter": "B","frequency": "20"},
                        {"letter": "C","frequency": "70"}, // this appears in old_data
                        {"letter": "D","frequency": "30"},
                        ];

        var bar = d3.select('body').selectAll('svg').remove();// delete this line and you'll get multiple charts rather than just updating the data in the original chart
        draw_chart(new_data);
    });
});

</script>

<script>
function draw_chart(data){

var margin = {top: 20, right: 20, bottom: 30, left: 40},
    width = 960 - margin.left - margin.right,
    height = 500 - margin.top - margin.bottom;

var x = d3.scale.ordinal()
    .rangeRoundBands([0, width], .1);

var y = d3.scale.linear()
    .range([height, 0]);

var xAxis = d3.svg.axis()
    .scale(x)
    .orient("bottom");

var yAxis = d3.svg.axis()
    .scale(y)
    .orient("left");

var svg = d3.select("body").append("svg")
    .attr("width", width + margin.left + margin.right)
    .attr("height", height + margin.top + margin.bottom)
  .append("g")
    .attr("transform", "translate(" + margin.left + "," + margin.top + ")");

  data.forEach(function(d) {
    d.frequency = +d.frequency;
  });

  x.domain(data.map(function(d) { return d.letter; }));
  y.domain([0, d3.max(data, function(d) { return d.frequency; })]);

  svg.append("g")
      .attr("class", "x axis")
      .attr("transform", "translate(0," + height + ")")
      .call(xAxis);

  svg.append("g")
      .attr("class", "y axis")
      .call(yAxis)
    .append("text")
      .attr("transform", "rotate(-90)")
      .attr("y", 6)
      .attr("dy", ".71em")
      .style("text-anchor", "end")
      .text("Frequency");

  svg.selectAll(".bar")
      .data(data)
      .enter().append("rect")
      .attr("class", "bar")
      .attr("x", function(d) { return x(d.letter); })
      .attr("width", x.rangeBand())
      .attr("y", height)
      .attr("height","0")
      .transition()
      .delay(function(d, i) { return i*300 })
      .duration(1000) 
      .attr("y", function(d) { return y(d.frequency); })
      .attr("height", function(d) { return height - y(d.frequency); });
  }

</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T00:32:09.887

一、你有线路的原因，

```
var bar d3.select('body')...remove() // delete this line and you'll get double... 
```

是因为您`draw_chart`在调用时总是附加到页面。你需要改变这一行，

```
var svg = d3.select("body").append("svg") 
```

对于不会不断附加新 svg 的东西

*如果我有更多时间，我会看看主要问题。*

# associations - 关联规则中的置信度计算

> ID：13446007
> 
> 赞同：-1
> 
> 时间：2012-11-19T00:08:44.903
> 
> 标签：associations, tuples

```
supportData = {('ELF'): 0.75, ('CAT'): 0.75, ('BAT', 'CAT', 'ELF'): 0.5, ('ARK', 'BAT'): 0.25, ('ARK', 'ELF'): 0.25, ('CAT', 'ELF'): 0.5, ('DOG'): 0.25, ('BAT', 'CAT'): 0.5, ('BAT', 'ELF'): 0.75, ('ARK'): 0.5, ('ARK', 'CAT'): 0.5, ('BAT'): 0.75}

L = [('ARK'), ('CAT'), ('CAT'), ('ELF'),('ARK', 'CAT'), ('BAT', 'ELF'), ('BAT', 'CAT'), ('CAT', 'ELF'),('BAT', 'CAT', 'ELF')]

for freqSet in L:
    H =  list(freqSet)

    if len(H) == 1:
        pass
    else:
        for conseq in H:
            freqsetlist = list(freqSet)
            freqsetlist.remove(conseq)
            if len(freqsetlist) == 1:
               conf = supportData[freqSet]/supportData[tuple(freqsetlist)[0]]
               if conf >= 0.1:
                  print freqsetlist,'-->',conseq,'conf:',conf
            else:
               conf = supportData[freqSet]/supportData[tuple(freqsetlist)[:]]
               if conf >= 0.1:
                  print freqsetlist,'-->',conseq,'conf:',conf

KeyError: ('R','K') 
```

有人能指出我为什么会收到这个错误吗？当 len(freqsetlist) > 1 时似乎会发生错误。那是在计算具有 3 个元素的元组时

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T00:14:34.077

当一个元组只有一个元素时，你应该在它后面加上一个逗号，这样它就会被解释为一个元组，而不是一个单独的（带括号的）元素：

```
'CAT' == ('CAT') != ('CAT',) == tuple(['CAT']) 
```

由于您`supportData`和`L`变量当前都在混合字符串和元组（我猜，当您只想拥有元组时），例如这行代码将永远不会运行：

```
if len(H) == 1:
    pass 
```

**更新：**至于您的错误消息，取第一个元素，`('ARK')`：您首先将其转换为列表（`['A', 'R', 'K']`），然后删除第一个元素（`'A'`），然后将结果转换回产生元组的`('R', 'K')`. 当您尝试在您的 dict 中查找它时`supportData`（在您提到的同一行代码中）它不存在，因此`KeyError`.

按照我的解释更正您的数据，这样可以避免这个特殊错误：

```
supportData = {('ELF',): 0.75, ('CAT',): 0.75, ('BAT', 'CAT', 'ELF'): 0.5, ('ARK', 'BAT'): 0.25, ('ARK', 'ELF'): 0.25, ('CAT', 'ELF'): 0.5, ('DOG',): 0.25, ('BAT', 'CAT'): 0.5, ('BAT', 'ELF'): 0.75, ('ARK',): 0.5, ('ARK', 'CAT'): 0.5, ('BAT',): 0.75}

L = [('ARK',), ('CAT',), ('CAT',), ('ELF',),('ARK', 'CAT'), ('BAT', 'ELF'), ('BAT', 'CAT'), ('CAT', 'ELF'),('BAT', 'CAT', 'ELF')] 
```

# java - 使用 Struts2 注释验证时，我可以将 i18n 消息放在哪里？

> ID：13446013
> 
> 赞同：1
> 
> 时间：2012-11-19T00:09:10.420
> 
> 标签：java, struts2, internationalization

我想在表单中使用 Struts2 提供的[注释验证器](http://struts.apache.org/2.x/xwork-core/apidocs/index.html?com/opensymphony/xwork2/validator/annotations/package-summary.html)

```
@RequiredStringValidator(key="required") 
```

我可以将要查找的属性文件放在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T02:43:26.910

I18N 消息/资源可以在不同的位置发送，具体取决于它们的使用位置。

资源是分层查找的，从特定于操作的属性文件、包文件开始，最终在另一个答案中使用资源属性定义的全局属性中。

但是，如果您决定显式命名资源，则 XML 配置是首选机制。

有关更多详细信息，请参阅[S2 本地化文档](http://struts.apache.org/2.x/docs/localization.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T00:41:10.477

在您的 Struts.properties 中插入以下内容；

```
struts.customs.i18n.resources=MyResources 
```

并创建一个名为 MyResources.properties 的文件，该文件与 Struts.properties 位于同一路径中，并在该文件中包含基于键/值的消息

# c++ - 如何设计下推自动机

> ID：13446020
> 
> 赞同：5
> 
> 时间：2012-11-19T00:10:27.277
> 
> 标签：c++, pushdown-automaton

我将如何设计一个接受平衡括号和括号的 PDA，例如 ([][])，我很难开始。我需要帮助为这个问题编写转换函数。任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-19T01:13:33.880

我通常不会为他们完成某人的全部作业，但现实情况是，即使我这样做，它也不会对你有太大帮助，除非你真的*了解*这些东西是如何工作的，可悲的事实是，大多数学校一开始就教不好。

让我们考虑一下这个 PDA 是如何工作的，暂时忘记状态和转换等等：当我们的 PDA 获得输入时，它应该像这样工作：

*   如果没有输入：
    *   如果栈顶是空的（这通常由一些特殊的值来表示`$`，比如这个例子），那么我们的 PDA 接受这个字符串：它是一个适当平衡的括号和括号字符串。
    *   否则我们进入错误状态。该字符串不是正确平衡的括号和括号字符串。
*   如果输入是 an`(`或 a `[`，则将输入压入堆栈并查看下一个输入字符。
*   如果输入是 a`)`那么：
    *   如果栈顶是`(`弹出栈顶，再看下一个输入。
    *   否则，进入错误状态。该字符串不是正确平衡的括号和括号字符串。
*   如果输入是 a`]`那么：
    *   如果栈顶是一个`[`弹出栈顶的状态，再看下一个输入。
    *   否则，进入错误状态。该字符串不是正确平衡的括号和括号字符串。

现在，知道了我们的 PDA 必须做什么，让我们尝试考虑如何更正式地描述我们的 PDA。我们将假设：

*   Τhe 组有效输入符号 Σ = { `(`, `)`, `[`and `]`}
*   初始堆栈符号 Z =`$`
*   Τhe 组有效堆栈符号 Γ = { `(`, `[`} ∪ Z
*   状态集 Q = { q0, ACCEPT, REJECT }
*   初始状态 q0。

使用类似于[http://en.wikipedia.org/wiki/Pushdown_automaton](http://en.wikipedia.org/wiki/Pushdown_automaton)上描述的符号来进行 PDA 状态转换，我们可以考虑状态以及事物如何流动：

*   **(q0, ε, top= `$`, ACCEPT, nil)**这告诉我们的 PDA：当您处于状态 q0 并且没有更多输入并且堆栈顶部`$`进入 ACCEPT 状态时，堆栈保持不变。

*   **(q0, ε, top= `(`, REJECT, nil)**这告诉我们的 PDA：当您处于状态 q0 并且没有更多输入并且堆栈顶部`(`进入 REJECT 状态时，堆栈保持不变。

*   **(q0, ε, top= `[`, REJECT, nil)**这告诉我们的 PDA：当您处于状态 q0 并且没有更多输入并且堆栈顶部`[`进入 REJECT 状态时，堆栈保持不变。

*   **(q0, `(`, top=top, q0, push `(`)**这告诉我们的 PDA：当您处于状态 q0 并且输入是 a`(`时，无论堆栈顶部是什么，进入状态 q0 并将 a 压`(`入堆栈。

*   **(q0, `[`, top=top, q0, push `[`)**这告诉我们的 PDA：当您处于状态 q0 并且输入是 a`[`时，无论堆栈顶部是什么，进入状态 q0 并将 a 压`[`入堆栈。

*   **(q0, `)`, top= `(`, q0, pop)**这告诉我们的 PDA：当你处于状态 q0 并且输入是 a`)`并且栈顶是 a`(`时，进入状态 q0，并弹出栈顶.

*   **(q0, `)`, top= `[`, REJECT, nil)**这告诉我们的 PDA：当你处于状态 q0 并且输入是 a`)`并且堆栈的顶部是 a 时，`[`然后转到 REJECT 堆栈，保持堆栈不变。

*   **(q0, `)`, top= `$`, REJECT, nil)**这告诉我们的 PDA：当你处于状态 q0 并且输入是 a`)`并且堆栈的顶部是 a 时，`$`然后转到 REJECT 堆栈，保持堆栈不变。

*   **(q0, `]`, top= `[`, q0, pop)**这告诉我们的 PDA：当你处于状态 q0 并且输入是 a`]`并且栈顶是 a`[`时，进入状态 q0，并弹出栈顶.

*   **(q0, `]`, top= `(`, REJECT, nil)**这告诉我们的 PDA：当你处于状态 q0 并且输入是 a`]`并且堆栈的顶部是 a 时，`(`然后转到 REJECT 堆栈，保持堆栈不变。

*   **(q0, `]`, top= `$`, REJECT, nil)**这告诉我们的 PDA：当你处于状态 q0 并且输入是 a`]`并且堆栈的顶部是 a 时，`$`然后转到 REJECT 堆栈，保持堆栈不变。

我们可以使用更多状态来实现这一点，但有趣的是，一个“处理”状态就足够了。

您可能还需要注意，根据您的讲师，您可能不需要明确添加 REJECT 状态，尽管这样做是一种很好的形式。

我希望这有帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-19T00:37:37.863

这可能会帮助您入门：

```
bool check_and_pop(char c) {
  if (top() == c) {
    pop();
    return true;
  }
  return false;
}

int check_input() {
 char c;
 while ((c = getc())) {
  switch (c) {
    case '(': case '{': case '[': push(c); break;
    case ')': 
      if (!check_and_pop('(')
       return REJECT;
      break;
    case '}':
      if (!check_and_pop('{')
       return REJECT;
      break;
    // ...
 }
 // end of input, check the stack to accept/reject
 if (stack_size() == 0)
    return ACCEPT;
 else
    return REJECT;
} 
```

# c - 通过我的 C 程序打开 GnuPlot

> ID：13446025
> 
> 赞同：2
> 
> 时间：2012-11-19T00:10:51.993
> 
> 标签：c, linux, export, gnuplot

我希望我的程序自动打开 GNUplot 并从给定文件中绘制图形。不幸的是，它不能正常工作：

```
system("gnuplot> plot '/home/user/Desktop/program/data.txt'"); 
```

该程序运行 gnuplot，但我不断从 gnuplot 收到错误：

```
ivalid command 
```

此外，我检查了命令行并在键入时：

```
gnuplot> plot '/home/user/Desktop/program/data.txt' 
```

我也遇到同样的错误，但是当第一次输入`gnuplot`然后

```
plot '/home/user/Desktop/program/data.txt' 
```

它工作正常。

因此结论是我应该在我的程序中使用第二种方法（但我不知道如何使用一些命令`system()`或修复第一种方法。谢谢你的帮助！！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T00:31:45.963

您必须像这样调用 gnuplot：

```
gnuplot -p -e "plot '/home/user/Desktop/program/data.txt'" 
```

在 C 中：

```
system("gnuplot -p -e \"plot '/home/user/Desktop/program/data.txt'\""); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-19T00:20:10.623

需要知道操作系统，但假设一个 linux 变体：`>`是输出重定向。正如您已经发现的那样，它不是一个有效的命令。

最好的输入方式是：

A) 检查 gnuplot 是否具有命令行参数，因此它可以从命令行获取命令。例如`gnuplot -command plot data.txt`（这是一个样本，我编的。不知道是否有类似'-command'的东西）

B）@anatolyg 在他的回答中写道：您可以将命令写入文件，然后告诉 gnuplot 读取该文件。这与方法A类似。（使用后不要忘记删除临时文件）

C) 将命令和管道回显到 gnuplot。例如`echo plot '/home/user/Desktop/program/data.txt' | gnuplot"`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-19T00:20:25.453

尝试将 gnuplot 命令`plot '/home/user/Desktop/program/data.txt'`放入文件 eg`myfile`中，并告诉 gnuplot 从中读取：

```
FILE* f = fopen("myfile", "wt");
fprintf(f, "plot '%s'\n", "/home/user/Desktop/program/data.txt");
fclose(f);
system("gnuplot < myfile"); 
```

# node.js - 使用 node.js 重写 url 路径

> ID：13446030
> 
> 赞同：18
> 
> 时间：2012-11-19T00:11:37.347
> 
> 标签：node.js, express

是否可以使用 node.js 重写 URL 路径？（我也在使用 Express 3.0）

我试过这样的事情：

```
req.url = 'foo'; 
```

但网址继续相同

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-11-19T00:26:02.840

当然，只需添加一个中间件功能即可对其进行修改。例如：

```
app.use(function(req, res, next) {
  if (req.url.slice(-1) === '/') {
    req.url = req.url.slice(0, -1);
  }
  next();
}); 
```

此函数从所有传入请求 URL 中删除尾部斜杠。请注意，为了使其正常工作，您需要将其放在调用`app.use(app.router)`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-08-08T17:56:37.487

一个好主意应该是更新`path`。我的方法建议：

```
app.use(function(req, res, next) {
    console.log("request", req.originalUrl);
    const removeOnRoutes = '/not-wanted-route-part';
    req.originalUrl = req.originalUrl.replace(removeOnRoutes,'');
    req.path = req.path.replace(removeOnRoutes,'');
    return next();
}); 
```

这样`/not-wanted-route-part/users`就会变成`/users`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-10-24T11:53:00.120

您需要覆盖 req 的一些属性（NodeJs 中的 IncomingMessage）：

*   网址
*   小路
*   搜索
*   询问

2

```
function changeUrl(req, url) {
    const parsedUrl = new URL(url);
    req.url = url;
    req.originalUrl = url;
    req.path = parsedUrl.pathname;
    req.search = parsedUrl.search;
    req._parsedUrl = parsedUrl;
    const query = {};
    for(const entry of parsedUrl.searchParams) {
        query[entry[0]] = entry[1];
    }
    req.query = query;
} 
```

# python - 重新启动龙卷风服务器时，html文件中的更改不生效

> ID：13446032
> 
> 赞同：3
> 
> 时间：2012-11-19T00:11:44.353
> 
> 标签：python, caching, tornado, eol

我开始学习 Tornado 并阅读[Tornado 简介](http://shop.oreilly.com/product/0636920021292.do)这本书。

在处理其中一个示例时，我在 HTML 文件中缺少引号并收到以下错误：

> 文件“modules/book_html.generated.py”，第 11 行
> if book["subtitle] != "": # modules/book.html:3
> SyntaxError: EOL while scanning string literal

这就是 book.html 的样子：

```
<div class="book">
  <h3 class="book_title">{{ book["title"] }}</h3>
  {% if book["subtitle"] != "" %}
        <h4 class="book_subtitle">{{ book["subtitle"] }}</h4>
    {% end %}
  <img src="{{ book["image"] }}" class="book_image"/>
    <div class="book_details">
      <div class="book_date_released">Released: {{ book["date_released"]}}</div>
      <div class="book_date_added">Added: {{ locale.format_date(book["date_added"], relative=False) }}</div>
      <h5>Description:</h5>
        <div class="book_body">{% raw book["description"] %}</div>
    </div>
</div> 
```

添加缺少的报价，重新启动服务器（在 localhost 上运行），但仍然出现相同的错误。[完全从书的 github](https://github.com/Introduction-to-Tornado/Introduction-to-Tornado/tree/master/extending_templates/bookstore)复制粘贴的代码，仍然是同样的错误。注释掉整个文件，同样的事情。用来自 github 的代码替换了整个代码（所有文件、main.py、模板文件夹中的所有内容、所有内容），同样的事情。看起来 Chrome 正在缓存文件或其他东西，但我什至将文件名更改为 book2.html，并且文件名更改后出现错误：

> 文件“modules/book2_html.generated.py”，第 11 行
> if book["subtitle] != "": # modules/book2.html:3

我尝试清除缓存，没有运气。我去了 Chrome 的开发人员工具并检查了禁用缓存复选框，同样。我还尝试在 Firefox 中运行 Web 应用程序和同样的事情。

有没有人遇到过类似的问题？任何帮助，将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T00:40:57.043

我很确定龙卷风也会缓存模板。取自他们的[文档](http://www.tornadoweb.org/documentation/template.html)

> Loader 是一个从根目录加载模板并缓存编译好的模板的类：

因此，如果您的调用加载程序可能是您的问题。

# javascript - 在 Web 存储中检索 JSON 数据不起作用

> ID：13446034
> 
> 赞同：2
> 
> 时间：2012-11-19T00:11:50.110
> 
> 标签：javascript, json, web-storage

> **可能重复：**
> [在 HTML5 localStorage 中存储对象](https://stackoverflow.com/questions/2010892/storing-objects-in-html5-localstorage)

我正在尝试将 JSON 数据、姓名和电话号码存储在两个文本字段中，然后稍后（在页面刷新后）使用以下代码检索并打印相同字段上的数据。

```
 function saveData() {
            var saveD = { 
                name: document.getElementById("name").value,
                phone: document.getElementById("phone").value
            }; 

            window.localStorage.setItem("info", saveD);
        } 
        var storedData = window.localStorage.getItem("info");

        document.getElementById("name").value = storedData.name;
        document.getElementById("phone").value = storedData.phone; 
```

怎么了？我在两个字段上都得到“未定义”。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-19T00:16:40.797

像这样保存：

```
window.localStorage.setItem("info", JSON.stringify(saveD)); 
```

并像这样加载：

```
var storedData = JSON.parse(window.localStorage.getItem("info")); 
```

您必须将对象作为 JSON 存储在本地存储中。

# c++ - C ++，与...错误中的'operator ='不匹配

> ID：13446035
> 
> 赞同：1
> 
> 时间：2012-11-19T00:12:01.517
> 
> 标签：c++, match, operator-keyword, candidate

我正在尝试重新定义`==`Regla 类中的运算符，并且在每次分配给迭代器时都会遇到此错误：

```
no match for 'operator=' in 'it2 = (((const std::list<Condicion, std::allocator<Condicion> >*)(+r)) + 4u)->std::list<_Tp, _Alloc>::begin [with _Tp = Condicion, _Alloc = std::allocator<Condicion>]()' 

bool Regla::operator ==(const Regla &r) const{    
  if(this->condiciones.size()!=r.condiciones.size())
    return false;
  if(this->acciones.size()!=r.acciones.size())
    return false;
  list<Condicion>::iterator it,it2;  
  it2 = r.condiciones.begin();
  for(it=condiciones.begin();it!=condiciones.end();it++){
    if((*it)!=(*it2)) return false;
    it2++;
  }
  list<Accion>::iterator it3,it4;
  it4 = r.acciones.begin();
  for(it3=acciones.begin();it3!=acciones.end();it3++){
    if((*it3)!=(*it4)) return false;
    it4++;
  }
  return true;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T00:14:25.623

怎么样：

```
list<Condicion>::const_iterator it,it2; 
```

参数`r`由 const 引用传递，隐式也是如此，`this`因为运算符本身被标记为`const`，因此两者的成员都不允许使用非 const 迭代器。

# java - 线程的运行没有看到它的数组大小增加

> ID：13446042
> 
> 赞同：4
> 
> 时间：2012-11-19T00:13:28.560
> 
> 标签：java, multithreading, arraylist

我目前正在做 Java 作业。我被要求创建一个基本的 DNS 服务器。有一个 UDPSender 类，它是一个侦听端口 53 的线程。还有另一个称为 UDPManager 的线程。

UDPManager 使用一个嵌套的可运行类启动一个线程，该类包含一个 DatagramPacket 的 ArrayList。UDPSender 聚合 UDPManager，每当它收到一个 UDP 数据包时，它就会将它发送给管理器，让他将它添加到 arrayList。

```
import java.net.DatagramPacket;
import java.util.ArrayList;
import java.util.HashMap;

public class UDPManager {
private UDPManagerRunnable manager;

public UDPManager(String hostsFile, String remoteDNS, boolean localResolution) {
    manager = new UDPManagerRunnable(hostsFile, remoteDNS, localResolution);
    new Thread(manager).start();
}

public void managePacket(DatagramPacket p) {
    manager.managePacket(p);
}

public void close() {
    manager.close();
}

private class UDPManagerRunnable implements Runnable {
    private ArrayList<DatagramPacket> packets;
    private HashMap<Integer, String> clients;
    private boolean localResolution;
    private boolean running;
    private String hostsFile;
    private String remoteDNS;

    public UDPManagerRunnable(String hostsFile, String remoteDNS, boolean localResolution) {
        packets = new ArrayList<DatagramPacket>();
        clients = new HashMap<Integer, String>();
        this.localResolution = localResolution;
        this.running = true;
        this.hostsFile = hostsFile;
        this.remoteDNS = remoteDNS;
    }

    public void managePacket(DatagramPacket p) {
        packets.add(p);
        System.out.println("Received packet. "+packets.size());
    }

    public void close() {
        running = false;
    }

    public void run() {
        DatagramPacket currentPacket = null;
        while(running) {
            if(!packets.isEmpty()) {
                currentPacket = packets.remove(0);
                byte[] data = currentPacket.getData();
                int anCountValue = data[Constant.ANCOUNT_BYTE_INDEX];
                if(anCountValue == Constant.ANCOUNT_REQUEST)
                    this.processRequest(currentPacket);
                else if(anCountValue == Constant.ANCOUNT_ONE_ANSWER)
                    this.processResponse(currentPacket);

            }
        }

    }

    private void processRequest(DatagramPacket packet) {
        System.out.println("it's a request!");
    }

    private void processResponse(DatagramPacket packet) {
        System.out.println("it's a response!");
    }

} 
```

}

这是UDPManager。由于 System.out.println 正确显示“已接收数据包”，因此数据包被正确传输到管理器。并且数组的大小确实增加了。我遇到的问题是在“run()”内部它永远不会看到大小增加。奇怪的是它在调试中工作得非常好。知道为什么它会这样吗？

非常感谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T15:53:05.857

问题是，您的第一个线程将新数据放入**数据包**变量中，但对于第二个线程，这是不可见的。您应该同步对阵列的访问。

当您启动第二个线程时，所有变量都会被复制。第二个线程只处理副本。您需要同步对此变量的访问，以便其他线程可以看到更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T01:18:18.100

您应该在访问或修改数据包时同步数据包

# objective-c - 在Objective C中填充第二个表

> ID：13446049
> 
> 赞同：0
> 
> 时间：2012-11-19T00:14:32.337
> 
> 标签：objective-c, ios, arrays, json

我有两个表（单元标识符：呼叫和单元标识符：Cell2）。我正在传递两个对象数组（每个表一个）但是当我在我的 tableView 中执行此操作时，我的第二个表会显示与我的第一个表相同的数据，而不是来自第二个数组的数据。我的数组在我的 .h 文件中全局设置为 NSMutableArray。这是我认为问题出在代码中的地方：

```
-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if(!cell)
    {
        cell = [[UITableViewCell alloc]initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }

   // NSString *currDate = [[array objectAtIndex:indexPath.row] objectForKey:@"Current Date"]; //added
   //  NSString *someOtherKey = [[array objectAtIndex:indexPath.row] objectForKey:@"Some other key"]; //added

    cell.textLabel.text = [array objectAtIndex:indexPath.row];
    label1.text = [arrayDate1 objectAtIndex:indexPath.row];
    label2.text = [arrayDate2 objectAtIndex:indexPath.row];

   // cell.textLabel.text = [NSString stringWithFormat:@"%@  %@", currDate, someOtherKey]; //added

    return cell;

    //This will Load the second table (myTableView2)
    static NSString *CellIdentifier2 = @"Cell2";

    UITableViewCell *cell2 = [tableView dequeueReusableCellWithIdentifier:CellIdentifier2];

    if(!cell2)
    {
        cell2 = [[UITableViewCell alloc]initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier2];
    }

    // NSString *currDate = [[array objectAtIndex:indexPath.row] objectForKey:@"Current Date"]; //added
    //  NSString *someOtherKey = [[array objectAtIndex:indexPath.row] objectForKey:@"Some other key"]; //added

    cell2.textLabel.text = [array2 objectAtIndex:indexPath.row];

    return cell2;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T00:30:28.993

这个函数确实有问题：

编写的代码将简单地运行直到它到达第一`return cell;`行，之后不再运行代码，因此总是返回一个`Cell`单元格的实例。

为了像这样使用两个表，您需要能够将它们区分开来。通常，您将它们都存储在声明的属性中。对于这个答案的其余部分，我将假设您正在这样做并且它们被称为`table1`and `table2`。

将您的代码更改为如下所示：

```
-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    if ([tableView isEqual:self.table1]) {
        static NSString *CellIdentifier = @"Cell";

        UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

        if(!cell)
        {
            cell = [[UITableViewCell alloc]initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
        }

       // NSString *currDate = [[array objectAtIndex:indexPath.row] objectForKey:@"Current Date"]; //added
       //  NSString *someOtherKey = [[array objectAtIndex:indexPath.row] objectForKey:@"Some other key"]; //added

        cell.textLabel.text = [array objectAtIndex:indexPath.row];
        label1.text = [arrayDate1 objectAtIndex:indexPath.row];
        label2.text = [arrayDate2 objectAtIndex:indexPath.row];

       // cell.textLabel.text = [NSString stringWithFormat:@"%@  %@", currDate, someOtherKey]; //added

        return cell;
    } else if ([tableView isEqual:self.table2]) {

        //This will Load the second table (myTableView2)
        static NSString *CellIdentifier2 = @"Cell2";

        UITableViewCell *cell2 = [tableView dequeueReusableCellWithIdentifier:CellIdentifier2];

        if(!cell2)
        {
            cell2 = [[UITableViewCell alloc]initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier2];
        }

        // NSString *currDate = [[array objectAtIndex:indexPath.row] objectForKey:@"Current Date"]; //added
        //  NSString *someOtherKey = [[array objectAtIndex:indexPath.row] objectForKey:@"Some other key"]; //added

        cell2.textLabel.text = [array2 objectAtIndex:indexPath.row];

        return cell2;
    }

}

// If you reach this point, we don't recognize the table and return `nil`, then the program will crash.  Handle this however you want.
return nil; 
```

# c# - 在窗口 8 应用程序的组合框中选择特定项目

> ID：13446052
> 
> 赞同：0
> 
> 时间：2012-11-19T00:14:49.367
> 
> 标签：c#, windows, xaml

我有一个变量，其中包含一个值，例如

-9

我在组合框中有 21 个项目，它们的内容设置为 -10 到 +10。

我想基于变量以编程方式选择组合框项...

我一直在寻找某种参考或解决方案，但找不到...

```
myVar = "-9";
myCB.selectedValue = myVar.ToString(); 
```

上面的代码没有给出任何错误，但组合框显示一个空白值......所有其他值都在那里（-10 到 +10），但没有一个被选中......

对不起，如果这个问题太愚蠢了......但我正在学习使用 C# 为 Windows 8 应用程序编写代码

请帮忙。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T00:18:15.220

组合框中的 21 个项目可以通过使用 0 到 20 的索引来选择。上面的代码显示您正在尝试将值设置为 -9 不存在并且您正在尝试使用 -9 字符串进行设置（将除非值为 -9 并且您使用 SelectedItem）。您确实应该使用 SelectedIndex 或 SelectedItem 而不是 SelectedValue。

在设置组合框之前在您的代码中添加一些技巧。例如 -9 将是 1。希望这会有所帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T00:22:16.343

您可能正在寻找 Combobox.SelectedItem 吗？

[http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.controls.primitives.selector.selecteditem.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.controls.primitives.selector.selecteditem.aspx)

（这是假设您已将 Combobox 直接绑定到字符串对象；所以给

```
myCB.SelectedItem = "-9"; 
```

去）

# java - Java 二叉搜索树前缀

> ID：13446055
> 
> 赞同：0
> 
> 时间：2012-11-19T00:14:56.797
> 
> 标签：java, dictionary, binary-search-tree

我正在用 Java 编写一个程序，它接受单词和定义，将单词和定义都放在节点对象中，并将该节点放在按单词字典顺序排序的二叉搜索树字典中。

我正在尝试为用户创建一个选项，以查找所有以某个字母前缀开头的树词。例如，给定输入“ap”，程序可能会返回单词“appease”、“apple”、“apply”、“apron”等。但是，我不知道如何实现它。我的二叉搜索树类有一个查找方法和一个遍历方法（使用迭代器），但我不知道如何使用它们来搜索节点对象，因为字典类（将节点存储在树中）无法处理任何类似的东西。有人对如何解决这个问题有任何想法吗？

# post - 删除/删除博主中的帖子标题（在所有博客中！）？

> ID：13446056
> 
> 赞同：1
> 
> 时间：2012-11-19T00:15:26.743
> 
> 标签：post, title, blogger

如何删除/删除博客中的帖子标题（在所有博客中！不仅仅是静态页面！）？我的意思是在常规职位上。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T01:31:44.117

放入 CSS [转到模板、自定义、高级、添加 CSS] 或`]]></b:skin>`在编辑模板 HTML 中的标记之前添加此内容，展开小部件模板：

```
.post-title.entry-title {
display: none;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-20T13:25:57.600

通常不建议使用 DISPLAY:NONE，因为 Google 可能会将其视为隐藏关键字优化的“可疑”方式。

更好的是，编辑 HTML（在模板下）并将这一行放在注释（）中：

```
 <!--  <h3 class='post-title ....</h3>  --> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-06-03T19:35:22.487

使用博客仪表板中可用的主题编辑器自定义主题。选择自定义主题。寻找高级选项。为“帖子标题”元素赋予透明颜色和 0px 字体。

[![在此处输入图像描述](../Images/b2e1f5b7ed26e8e5ea44e604058424e4.png)](https://i.stack.imgur.com/Y9WKc.png)

具体来说：

转到您的博客仪表板。从左侧窗格的列表中选择“主题”，然后在中心疼痛（窗格？疼痛？）中选择“自定义”。然后选择左侧的“高级”。从主窗格中显示的列表中选择“帖子标题”。单击文本颜色下拉菜单并选择“透明”。并将字体也更改为 0px。点击“申请博客”。

# ruby - Ruby Regex 捕获两个字符串之间的所有内容（包括）

> ID：13446059
> 
> 赞同：2
> 
> 时间：2012-11-19T00:15:55.337
> 
> 标签：ruby, regex, string, html-sanitizing

我正在尝试清理一些 HTML 并删除一个标签（我真的很想避免使用 nokogiri 等）。因此，我想摆脱以下字符串：

```
<div class="the_class>Some junk here that's different every time</div> 
```

这在我的字符串中只出现一次，我想找到一种方法来删除它。我试过想出一个正则表达式来捕获它，但我找不到一个有效的。

我已经尝试过`/<div class="the_class">(.*)<\/div>/m`并且有效，但它也会匹配并包含`</div>`文档中的任何其他标签，这是我不想要的。

关于如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-19T00:17:16.960

我相信您正在寻找一个非贪婪的正则表达式，如下所示：

```
/<div class="the_class">(.*?)<\/div>/m 
```

注意添加的`?`. 现在，捕获组将尽可能少地捕获（非贪婪），而不是尽可能多地捕获（贪婪）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T16:42:02.367

> 因为它增加了另一个依赖并减慢了我的工作。让事情变得更复杂。此外，此解决方案不仅适用于 HTML 标签。我的开始和结束字符串可以是任何东西。

在我找到一份编写蜘蛛和网站分析的工作之前，我以前也是这样想的，然后编写了一个大型的 RSS 聚合系统——解析器是摆脱这种疯狂的唯一方法。没有它，工作永远不会完成。

是的，正则表达式很好用，但是有龙等着你。例如，这个常见的字符串会导致问题：

```
'<div class="the_class"><div class="inner_div">foo</div></div>' 
```

正则表达式`/<div class="the_class">(.*?)<\/div>/m`将返回：

```
"<div class=\"the_class\"><div class=\"inner_div\">foo</div>" 
```

这是格式错误但可呈现的 HTML：

```
<div class="the_class"><div class="inner_div">foo 
```

更糟糕的是：

```
'<div class="the_class"><div class="inner_div">foo'[/<div class="the_class">(.*?)<\/div>/m]
=> nil 
```

然而，解析器可以同时处理这两种情况：

```
require 'nokogiri'
[
  '<div class="the_class"><div class="inner_div">foo</div></div>',
  '<div class="the_class"><div class="inner_div">foo'
].each do |html|
  doc = Nokogiri.HTML(html)
  puts doc.at('div.the_class').text
end 
```

输出：

```
foo
foo 
```

是的，你的开始和结束字符串可以是任何东西，但是有公认的解析 HTML/XML 的工具，随着你的任务的增长，使用正则表达式的弱点将变得更加明显。

而且，是的，解析器可能会失败。我不得不处理格式严重错误导致解析器崩溃的 RSS 提要，但是一些预处理解决了这个问题。

# vim - langmap 和 Vimroom 之间可能存在冲突

> ID：13446060
> 
> 赞同：1
> 
> 时间：2012-11-19T00:16:33.013
> 
> 标签：vim

最近对使用 Vim 变得“认真”（-ish），我真的很高兴遇到“VimRooom”脚本。

**问题**

问题是我还刚刚发现了用于重新配置 hjkl 键的 langmap 选项，并且似乎存在某种冲突，这会阻止移动键的新配置与打开的 Vimroom 一起工作。

**问题**

恐怕我对 langmap 命令的了解不够，无法知道为什么会发生这种冲突，我希望有人可以解释问题/建议修复？

我当前的.vimrc：

```
set nocompatible               " be iMproved

filetype off                   " required!
set rtp+=~/.vim/bundle/vundle/
call vundle#rc()

" let Vundle manage Vundle
Bundle 'gmarik/vundle'

" My Bundles here:
"Bundle 'flazz/vim-colorschemes'
"Bundle 'vim-scripts/CSApprox'
Bundle 'altercation/vim-colors-solarized'
Bundle 'dnebauer/AutomaticLaTeXPlugin'
Bundle 'mikewest/vimroom'

" vim-scripts repos
Bundle 'L9'
Bundle 'FuzzyFinder'
" non github repos
Bundle 'git://git.wincent.com/command-t.git'

" Colour scheme options
syntax on
set background=dark
set t_Co=16
let g:solarized_termcolors=16
colorscheme solarized

"Line formatting options
set linebreak
set tw=100
set fo+=t
"set foldcolumn=12
set tabstop=4

"Basic Keybindings
"Movement
set langmap=hk,mj,th,nl,kt,jm,ln

"Display options
set scrolloff=999

"Settings for Automatic LaTeX
filetype plugin on
filetype indent on
filetype on

"Search Settings
set smartcase

"Vimroom Settings
let g:vimroom_sidebar_height=0 
```

NB 所需的 hjkl 重新映射（因为缺少更好的短语）仅在使用 Dvorak 布局时才有意义。

# java - 如何拆分具有多个分隔符的文本？

> ID：13446063
> 
> 赞同：3
> 
> 时间：2012-11-19T00:16:57.437
> 
> 标签：java, string, split

```
public static void main(String[] args){
    String s=new String("f;sjdkfd:fdsfdf;df:FD::D:::F:RE:FRER:F:ER:FR:F:RF:GR:G:RG:  :P");
    String[] ss = s.split(":");

    for(String token : ss){
        System.out.println(token);
    }
} 
```

使用此代码，我可以获得“：”之间的令牌。但我想用“：”和“;”来分割文本 同时。那可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T00:26:54.133

您可以使用正则表达式：

```
String[] ss = s.split("[:;]") 
```

因此，代码将是：

```
public static void main(String[] args) {
    String s = new String("f;sjdkfd:fdsfdf;df:FD::D:::F:RE:FRER:F:ER:FR:F:RF:GR:G:RG:  :P");
    String[] ss = s.split("[:;]");

    for (String token : ss) {
        System.out.println(token);
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-19T00:21:41.307

您可以改用字符类：

```
String[] ss = s.split("[:;]"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-19T00:47:50.833

使用[Commons Lang](http://commons.apache.org/lang)，特别是 [this StrTokenizer constructor](http://commons.apache.org/lang/api-3.1/org/apache/commons/lang3/text/StrTokenizer.html#StrTokenizer(char[], char)) ：

```
StrTokenizer tokenizer = new StrTokenizer("f;sjdkfd:fdsfdf;df:FD::D:::F:RE:FRER:F:ER:FR:F:RF:GR:G:RG:  :P".toCharArray(), ":");
tokenizer.next(); // will give you "f;sjdkfd", followed by fdsfdf;df, etc. with every call to .next() 
```

# android - 来自 PreferenceActivity 的 ClassCastException

> ID：13446065
> 
> 赞同：1
> 
> 时间：2012-11-19T00:17:10.800
> 
> 标签：android, android-preferences

每次我尝试使用这个偏好类时，我都会得到一个 classCastException，我不知道为什么。任何帮助将非常感激。崩溃的那一行是`addPreferencesFromResources`命令。

```
import android.os.Bundle;
import android.preference.PreferenceActivity;

public class PreferenceManager extends PreferenceActivity {
    @SuppressWarnings("deprecation")
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        addPreferencesFromResource(R.xml.preferences); // This line crashes
    }
} 
```

偏好.xml

```
<?xml version="1.0" encoding="utf-8"?>
<Preference xmlns:android="http://schemas.android.com/apk/res/android" >
                <CheckBoxPreference
                        android:title="@string/startAnimation"
                        android:defaultValue="true"
                        android:summary="@string/startAnimationDescription"
                        android:key="startAnimation" />    

</Preference> 
```

堆栈跟踪

```
11-18 19:04:19.165: E/AndroidRuntime(1362): Uncaught handler: thread main exiting due to uncaught exception
11-18 19:04:19.175: E/AndroidRuntime(1362): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.pearsonartphoto.psychictester/com.pearsonartphoto.psychictester.PreferenceManager}: java.lang.ClassCastException: android.preference.Preference
11-18 19:04:19.175: E/AndroidRuntime(1362):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2496)
11-18 19:04:19.175: E/AndroidRuntime(1362):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2512)
11-18 19:04:19.175: E/AndroidRuntime(1362):     at android.app.ActivityThread.access$2200(ActivityThread.java:119)
11-18 19:04:19.175: E/AndroidRuntime(1362):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1863)
11-18 19:04:19.175: E/AndroidRuntime(1362):     at android.os.Handler.dispatchMessage(Handler.java:99)
11-18 19:04:19.175: E/AndroidRuntime(1362):     at android.os.Looper.loop(Looper.java:123)
11-18 19:04:19.175: E/AndroidRuntime(1362):     at android.app.ActivityThread.main(ActivityThread.java:4363)
11-18 19:04:19.175: E/AndroidRuntime(1362):     at java.lang.reflect.Method.invokeNative(Native Method)
11-18 19:04:19.175: E/AndroidRuntime(1362):     at java.lang.reflect.Method.invoke(Method.java:521)
11-18 19:04:19.175: E/AndroidRuntime(1362):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860)
11-18 19:04:19.175: E/AndroidRuntime(1362):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618)
11-18 19:04:19.175: E/AndroidRuntime(1362):     at dalvik.system.NativeStart.main(Native Method)
11-18 19:04:19.175: E/AndroidRuntime(1362): Caused by: java.lang.ClassCastException: android.preference.Preference
11-18 19:04:19.175: E/AndroidRuntime(1362):     at android.preference.GenericInflater.inflate(GenericInflater.java:320)
11-18 19:04:19.175: E/AndroidRuntime(1362):     at android.preference.GenericInflater.inflate(GenericInflater.java:263)
11-18 19:04:19.175: E/AndroidRuntime(1362):     at android.preference.PreferenceManager.inflateFromResource(PreferenceManager.java:254)
11-18 19:04:19.175: E/AndroidRuntime(1362):     at android.preference.PreferenceActivity.addPreferencesFromResource(PreferenceActivity.java:253)
11-18 19:04:19.175: E/AndroidRuntime(1362):     at com.pearsonartphoto.psychictester.PreferenceManager.onCreate(PreferenceManager.java:12)
11-18 19:04:19.175: E/AndroidRuntime(1362):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
11-18 19:04:19.175: E/AndroidRuntime(1362):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2459)
11-18 19:04:19.175: E/AndroidRuntime(1362):     ... 11 more 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T00:26:15.553

xml 文件的顶部元素应该是 PreferenceScreen 而不是 Preference

```
<?xml version="1.0" encoding="utf-8"?>
<PreferenceScreen xmlns:android="http://schemas.android.com/apk/res/android">
    <CheckBoxPreference
        android:key="pref_sync"
        android:title="@string/pref_sync"
        android:summary="@string/pref_sync_summ"
        android:defaultValue="true" />
    <ListPreference
        android:dependency="pref_sync"
        android:key="pref_syncConnectionType"
        android:title="@string/pref_syncConnectionType"
        android:dialogTitle="@string/pref_syncConnectionType"
        android:entries="@array/pref_syncConnectionTypes_entries"
        android:entryValues="@array/pref_syncConnectionTypes_values"
        android:defaultValue="@string/pref_syncConnectionTypes_default" />
</PreferenceScreen> 
```

[从设置文档](http://developer.android.com/guide/topics/ui/settings.html#DefiningPrefs)中提取

# unit-testing - 模拟 ASP.NET MVC 控制器属性

> ID：13446066
> 
> 赞同：1
> 
> 时间：2012-11-19T00:17:12.113
> 
> 标签：unit-testing, mocking, microsoft-fakes

我有一个 MVC 控制器，它加载资源文件并用于`Server.MapPath`获取文件的路径。我想使用[Microsoft Fakes](http://msdn.microsoft.com/en-us/library/hh549175.aspx)框架模拟控制器对象中的*Server*属性（我知道如何使用其他框架来做到这一点）。

这是代码：

```
 [HttpGet]
    public ActionResult GeneratePdf(string reportId)
    {
        var template = LoadTemplate(reportId);
        var document = pdfWriter.Write(GetReportModel(reportId), template);
        return File(document, MediaTypeNames.Application.Pdf);
    }

    private byte[] LoadTemplate(string reportId)
    {
        var templatePath = Server.MapPath(string.Format("~/ReportTemplates/{0}.docx", reportId));
        using(var templateContent = System.IO.File.OpenText(templatePath))
        {
            return Encoding.Default.GetBytes(templateContent.ReadToEnd());
        }
    } 
```

我试图模拟的部分是“Server.MapPath”方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T00:42:30.467

从 Visual Studio 2012 Update 1 开始，您可以使用存根绕过 Controller.Server 属性。

在您的测试项目中使用以下 .Fakes 文件：

```
<Fakes xmlns="http://schemas.microsoft.com/fakes/2011/" Diagnostic="true">
  <Assembly Name="System.Web" Version="4.0.0.0"/>
  <StubGeneration>
    <Clear/>
    <Add FullName="System.Web.HttpContextBase!"/>
    <Add FullName="System.Web.HttpServerUtilityBase!"/>
  </StubGeneration>
  <ShimGeneration>
    <Clear/>
  </ShimGeneration>
</Fakes> 
```

您可以像这样编写单元测试：

```
[TestMethod]
public void TestMethod1()
{
    var target = new TestController();

    var serverStub = new StubHttpServerUtilityBase();
    serverStub.MapPathString = (path) => path.Replace("~", string.Empty).Replace("/", @"\");

    var contextStub = new StubHttpContextBase();
    contextStub.ServerGet = () => serverStub;

    target.ControllerContext = new ControllerContext();
    target.ControllerContext.HttpContext = contextStub;

    var result = (FilePathResult) target.Index();
    Assert.AreEqual(@"\Content\Test.txt", result.FileName);
} 
```

在即将发布的 Update 2 中，您还可以直接使用 Shims 绕过 Controller.Server 属性。这是使用此方法所需的附加 .Fakes 文件。

```
<Fakes xmlns="http://schemas.microsoft.com/fakes/2011/" Diagnostic="true">
  <Assembly Name="System.Web.Mvc" Version="4.0.0.0"/>
  <StubGeneration>
    <Clear/>
  </StubGeneration>
  <ShimGeneration>
    <Clear/>
    <Add FullName="System.Web.Mvc.Controller!"/>
  </ShimGeneration>
</Fakes> 
```

这是测试：

```
[TestMethod]
public void TestMethod2()
{
    using (ShimsContext.Create())
    {
        var target = new TestController();

        var serverStub = new StubHttpServerUtilityBase();
        serverStub.MapPathString = (path) => path.Replace("~", string.Empty).Replace("/", @"\");

        var controllerShim = new ShimController(target);
        controllerShim.ServerGet = () => serverStub;

        var result = (FilePathResult)target.Index();
        Assert.AreEqual(@"\Content\Test.txt", result.FileName);
    }
} 
```

请注意，此方法在当前版本（更新 1）中不起作用，因为 Fakes 运行时与程序集相关的限制，例如允许部分受信任的调用方的 System.Web.Mvc。如果您今天尝试运行第二个测试，您将收到 VerificationException。

# vb.net - VB的With语句中有多个对象？

> ID：13446068
> 
> 赞同：5
> 
> 时间：2012-11-19T00:17:19.443
> 
> 标签：vb.net

我在 VB 中有很多标签，我在`With`语句中使用它们来设置它们的属性。

**问题** 有什么办法可以做如下的事情：

```
With lblA, lblB, lblC
    .fontColor = color.Red
End With 
```

这是可能的，还是我必须`With`为每个人手动做一个声明？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-19T03:16:36.010

您的解决方案有一个更短且更具可读性的版本：

```
For Each lbl As Label In {lblA, lblB, lblC}
  With lbl
    '...
  End With
Next 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-19T00:30:41.407

我会将这些类型的项目保留在一个列表中，然后对它们应用一个 for each 循环，假设它们都是相同的类型（或至少是基本类型）。假设您正在使用类型的控件，`label`这将是一个解决方案。请注意，我已修改`.fontColor`为`.ForeColor`使此示例适用于 Label 类：

```
Dim lblList as new List(of Label) ({lblA, lblB, lblC})
lblList.ForEach(sub(x) x.Fore Color = color.red) 
```

由于您已经发布了解决方案，您仍然可以执行以下操作以避免对您创建的数组进行迭代循环（这就是我将其作为列表执行的原因）而不必考虑数组大小或任何内容：

```
 lblList.ForEach(Sub(x)
                    With x
                       .BackColor = Color.Black
                       .Dock = DockStyle.Top
                       .TextAlign = ContentAlignment.MiddleCenter
                    End With
                 End Sub) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T01:07:55.297

这是我最终这样做的方式：

```
Dim arrayMe As Label() = {lblA, lblB, lblC}
For count = 0 To arrayMe.Length - 1 Step 1
    With arrayMe(count)
        .BackColor = Color.Black
        .Dock = DockStyle.Top
        .TextAlign = ContentAlignment.MiddleCenter
    End With
Next 
```

还有其他方法可以做到这一点，但我发现这很有用。

# php - 仅从 PHP 中当前日期的最后 7 天的 datetime 获取日期记录

> ID：13446070
> 
> 赞同：-2
> 
> 时间：2012-11-19T00:17:34.277
> 
> 标签：php, date, datetime

任何人都可以帮助我，我有一个将日期传递为 (YY-mm-dd) 的字符串，例如。2012 年 11 月 16 日。我想使用 PHP 从我的数据库中获取记录以获取过去 7 天的记录。我的数据库包含日期和时间格式的 unix 时间戳。如何使用 PHP 获取从当天起过去 7 天的记录。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T00:27:35.357

```
SELECT * FROM table WHERE DATE(yourdate) >= DATE_SUB(CURDATE(), INTERVAL 7 DAY) 
```

这是在“每天”的基础上工作的。在第二个基础上使用它来准确：

```
SELECT * FROM table WHERE yourdate >= DATE_SUB(NOW(), INTERVAL 7 DAY) 
```

# java - JMS 选择器如何随队列深度扩展？

> ID：13446072
> 
> 赞同：11
> 
> 时间：2012-11-19T00:17:52.140
> 
> 标签：java, jms, ibm-mq

相对于队列深度*n* ，在使用队列中的消息时应用 JMS 选择器的算法时间复杂度是多少？特别是，每次读取是否为线性 (O(n))？它是否依赖于实现（依赖于 JMS 提供者），是否依赖于请求的字段？

（如果依赖于实现，我对 Websphere MQ 和 Solace 的行为特别感兴趣，但我欢迎处理任何特定 JMS 提供者的答案，特别是如果您有指向描述复杂性的文档的链接！）。

**动机**：每条消息都有两个属性：an`invocationID`和 a `batchName`。一个批处理由多个调用组成。客户希望以两种方式之一消费消息；通过`invocationID`或 通过`batchName`。在产生消息的那一刻，我不知道它们将通过哪种方法被消耗。 

这可以通过选择器来实现：

```
invocationID=42 
```

或者

```
batchName="reconciliation" 
```

...我可以通过使用相关 ID 而不是自定义属性来加速其中一个，但我担心另一个会保持缓慢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T04:12:29.143

[根据文档](http://pic.dhe.ibm.com/infocenter/wmqv7/v7r5/topic/com.ibm.mq.doc/fg20170_.htm)，消息是按顺序搜索的。然而，WMQ 确实索引`MessageID`和`CorrelID`字段。信息中心描述了如下行为：

> 从队列中选择消息需要 WebSphere MQ 顺序检查队列中的每条消息。检查消息，直到找到与选择标准匹配的消息或没有更多消息要检查。因此，如果在深度队列上使用消息选择，消息传递性能会受到影响。
> 
> 为了在选择基于jmscorrelationId或jmsmessageid时优化深层队列的消息选择，请使用jmscorrelationId = ...或jmsmessageId = ...的选择字符串，仅引用一个属性。
> 
> 此方法显着提高了 JMSCorrelationID 上的选择性能，并为 JMSMessageID 提供了边际性能改进。

我很想了解更多关于多路复用队列的要求。一个复杂的选择器会影响任何人的实现性能，使用多个开放句柄和更简单的选择器的替代方案与应用程序代码相比使用多个队列没有什么不同。当然，对于 WMQ，动态队列或许多永久定义的队列完全没有问题。很多时候，当我看到这个要求时，它来自使用某些其他传输的商店，在这些传输中，由于定义了许多队列，性能会急剧下降，并且假设在 WMQ 上也是如此。在其他情况下，Pub/Sub 和持久订阅已满足要求。我并不是说这个要求没有有效的案例，只是想知道是什么驱动了它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-19T00:25:29.643

这一切都取决于实施。许多 JMS 提供程序将消息存储在 SQL 数据库中，因此它们可以使用 SQL 来实现选择器。在这种情况下，您必须查看您的特定情况如何映射到 SQL 中。

至于 WebSphereMQ - 选择器实现是 O(log n)`JMSMessageID = sth`和`JMSCorrelationID = sth`，对于其他我没有具体知识。根据经验，它看起来像 O(n)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-19T16:03:52.433

在 WebSphere MQ 版本 7 中，选择器的实现发生了变化。使用 v7 JMS 客户端和 v7 QueueManager，选择处理在 QueueManager 端完成。使用 v6 JMS 客户端（或者实际上是在其迁移中工作的 v7 客户端）模式，所有消息都流向客户端进行处理。如果匹配消息的命中率低，则会浪费大量精力。所以

在 v7 中，处理是在 QueueManager 端完成的，因此只有匹配的消息才会发送到客户端。

请记住，QueueManager 不会像数据库那样维护消息属性的复杂索引。所以选择器越简单越好。

# java - 比较两个单词（字符串）

> ID：13446075
> 
> 赞同：4
> 
> 时间：2012-11-19T00:18:15.723
> 
> 标签：java, string, string-comparison

这段代码是什么意思？

```
if( item.compareTo(root.element) < 0 ){

   } 
```

我读到：

> “按字典顺序比较两个字符串。返回一个整数，指示此字符串是大于（结果为 > 0）、等于（结果为 = 0）还是小于（结果为 < 0）参数。”

但我不明白。有人可以举个例子吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-19T00:22:10.243

看一下[`Comparable`](http://docs.oracle.com/javase/7/docs/api/java/lang/Comparable.html)接口的文档，它首先定义了[`compareTo()`](http://docs.oracle.com/javase/7/docs/api/java/lang/Comparable.html#compareTo%28T%29)方法。此接口的实现`String`遵循相同的约定：

> Compares this object with the specified object for order. Returns a negative integer, zero, or a positive integer as this object is less than, equal to, or greater than the specified object

This means: if the current string is *less than* the string received as parameter (under the [lexicographical order](http://en.wikipedia.org/wiki/Lexicographical_order)) return a negative integer value. If the current string is *greater than* the string received as parameter, return a positive integer value. Otherwise, the strings are equal and `0` is returned.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-19T00:25:11.263

**someObject**.*compareTo*(**anotherObject**) returns a negative number if *someObject* comes before *anotherObject*.

Here's an example that compares String objects:

```
if ("apple".compareTo("zebra") < 0) {
    System.out.println("I will be printed");
}
else {
    System.out.println("I will NOT be printed");
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-19T00:21:13.387

您将在对代码进行排序时使用它来查看`item`之前是否属于`root.element`。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-19T00:21:42.117

它检查两个字符串是否像这样相等。

```
a>A  would return a positive number as `a` is greater than `A`
A>a  would return a negetive number as `A` is less than `a`
a==a would return 0 as `a` is equal to `a`
a>Z  would return a positive number as 'a' is greater than 'A'
trend> zend would return a positive number as `t` is greater than 'z' 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-11-19T00:27:20.090

If the word1= item, and word2= root.element and both are in a dictionary, word1 should appear before word2.

# php - 为什么此 SQL 执行但不更新任何内容？

> ID：13446076
> 
> 赞同：-1
> 
> 时间：2012-11-19T00:18:24.637
> 
> 标签：php, sql

出于某种原因，此 sql 正在执行并输出：已成功将以下贝宝按钮添加到此产品...但它没有更新。我很感激这方面的任何帮助。

```
if(isset($_REQUEST['submitedform'])) {

    if ($_POST['paypal']) {

        $paypal=$_POST['paypal'];

        $id = $_GET['id'];

        $query = "UPDATE `video_info` SET paypal_button_html='".$paypal
        ."' WHERE id='".mysql_real_escape_string($id) ."'";

        mysql_query($query) or die(mysql_error());
        echo "successfully added the following paypal button to this product:
        <br /><br />
        {$paypal}";
    }
}

?>

<? 
if ($_GET['id']) { 
?>
<h1>Add PayPal Button In for this product:</h1>
<form action="add_paypal.php" method="POST"> 
    *Paypal button html: <br><textarea rows="2" cols="20" name="paypal"></textarea><br> 
    <input type="hidden" name="submitedform" value="true" /> 
    <input type="submit" value="Add paypal button in for this product"> 
</form>

<? 

} else {

    echo "You can not come to this page manually."; 
}

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T01:12:18.487

几个问题：

*   您在清理数据库输入方面不一致
*   您没有明确的验证规则
*   您的表单没有设置`$_GET['id']`字段（因此数据库提交总是失败）

修改后的代码：

```
<?php

// Init an Array to hold any error messages
$errors = array();

if( isset( $_REQUEST['submitedform'] ) ){

  // Validate the required fields
  if( !isset( $_POST['paypal'] ) || $_POST['paypal']=='' )
    $errors['paypal'] = 'No value for "paypal"';
  if( !isset( $_GET['id'] ) || !is_numeric( $_GET['id'] ) )
    $errors['id'] = 'No value for "id"';

  // If Validation was successful
  if( !$errors ){

    // Prepare the Variables for Database Usage
    $paypal = mysql_real_escape_string( $_POST['paypal'] );
    $id = (int) $_GET['id'];

    // Template and Complete the SQL Query
    $sqlTpl = 'UPDATE `video_info` SET paypal_button_html="%s" WHERE `id` = %s';
    $sqlStr = sprintf( $sqlTpl , $paypal , $id );

    // Submit the Query
    if( !mysql_query( $sqlStr ) ){

      // Something went wrong
      $errors[] = 'An error occured when submitting the data to the database';

    }else{

      // Submitted OK
      echo 'Successfully added the following paypal button to this product:'.$paypal;

    }

  }

}

// Check for any errors
if( $errors ){

  // Show errors to user
  echo 'The following errors occurred:';
  echo '<ul><li>'.implode( '</li><li>' , $errors ).'</li></ul>';

}

?>

<? 
if( isset( $_GET['id'] ) && is_int( $_GET['id'] ) ){
?>
<h1>Add PayPal Button In for this product:</h1>
<form action="add_paypal.php?id=<?php echo $_GET['id']; ?>" method="POST"> 
  *Paypal button html: <br><textarea rows="2" cols="20" name="paypal"></textarea><br> 
  <input type="hidden" name="submitedform" value="true" /> 
  <input type="submit" value="Add paypal button in for this product"> 
</form>

<? 

} else {

    echo "You can not come to this page manually."; 
}

?> 
```

这段代码...

1.  `id`在表单的操作 URL 中包含
2.  检查提交
3.  验证提交的值
4.  创建数据库查询
5.  提交查询
6.  检查查询是否正常

**修正：**替换`is_int()`为`is_numeric()`as，在 RTFMing 之后，我发现一个仅由数字组成的字符串，`false`如果使用`is_int()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T00:20:42.020

**更新**

请使用`$_REQUEST`OR `$_GET`OR`$_POST`但不要使用全部 3 个。

另外，你为什么不`mysql_real_escape_string`变量`$_POST['paypal']`？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T00:21:14.870

你混合`$_GET`和`$_POST`变量。您应该使用 GET 或 POST，但不能同时使用两者。如果这是一个发布请求，请更改`$_GET['id']`为`$_POST['id']`.

在这种情况下，更新不会因为`where id = ''`. 这不会更新任何内容，因为没有`id`空字符串。但它也不会失败，因为它是一个有效的更新语句。

# asp.net - 用文本和值填充列表框，ASP.Net

> ID：13446078
> 
> 赞同：1
> 
> 时间：2012-11-19T00:19:00.710
> 
> 标签：asp.net, listbox

我想知道是否有办法用文本和值填充列表框。文本位很简单，但我想要一个值，这样我就可以让用户在其中选择某些内容，然后按下一个按钮，该按钮获取所选值并使用 SQL 查询来完成其余的工作。

到目前为止，我用于填充文本的代码是：

```
listAllLessons.Items.Add(detail); 
```

它循环运行并从数据库中填充。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T03:13:26.743

您可以在 Web 表单中执行此操作：

HTML 方面：

```
 <asp:DropDownList ID="ddlList" 
                    runat="server" />
  <br />
  <asp:Button ID="btnSubmit" 
              runat="server" 
              OnClick="btnSubmit_Click" 
              Text="Click Me" /> 
```

代码背后：

```
protected void Page_Load(object sender, EventArgs e)
{
  if (!IsPostBack)
  {
    //Generate 20 items
    foreach(var count in Enumerable.Range(1, 20))
    {
      var newItem = new ListItem();

      newItem.Value = count.ToString();
      newItem.Text = "Item " + count.ToString();

      ddlList.Items.Add(newItem);
    }
  }
}

protected void btnSubmit_Click(object sender, EventArgs e)
{
  //Gets the selected value
  var selectedValue = ddlList.SelectedValue;

  System.Diagnostics.Debugger.Break();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T02:07:19.337

请试试这个：

```
while (reader.Read())
{
  ListItem li = new ListItem(Convert.ToString(reader["test"]), Convert.ToString(reader["value"]));
  ListBox1.Items.Add(li);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-19T00:43:31.030

您是否尝试过像这样连接项目：

```
 while (reader.Read())
            {
                ListBox1.Items.Add(reader[0].ToString() + "\t" + reader[1].ToString());
            } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-08-29T11:43:51.720

这对我有用。

```
dt = db.GetAllEmployeeForManagement();
                foreach (DataRow item in dt.Rows)
                {
                    ListItem li = new ListItem(Convert.ToString(item["Name"]), Convert.ToString(item["EmployeeID"]));

                    if (!ListBox1.Items.Equals(li.Text))
                    {
                        ListBox1.Items.Add(li);
                    }
                } 
```

其中 dt 实际上是 Datasource 的引用名称，所以.. 这很简单！

# jquery - 将html转换为xml

> ID：13446081
> 
> 赞同：1
> 
> 时间：2012-11-19T00:19:24.060
> 
> 标签：jquery, xml

我从局部视图返回了这个 XML。

```
<ActualizarItem>
   <NombreItem>GASEOSA 8.5 ONZAS</NombreItem>
   <OpcionesItem>&lt;div id="MenuItemEnPedido"data-role="navbar" data-iconpos="bottom" data-           theme="c"&gt;&lt;ul&gt;&lt;li&gt;&lt;a data-ajax="false" data-role="button"href="/Documentos/Docs/CondicionesMostrar?NumIdTransaccion=15199&amp;amp;NumIdConcepto=421"&gt;Condiciones&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a data-ajax="false" data-role="button" data-theme="a" href="/Documentos/Docs/DocsDetalle?StrIdDocumento=01500___00000000000000033" id="MostrarDetallePedido"&gt;Detalle&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a data-role="button" data-transition="sildedown" href="/Documentos/Docs/DocsEliminarItem?NumIdtransaccion=15199"&gt;Eliminar&lt;/a&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/div&gt;</OpcionesItem>
</ActualizarItem> 
```

我想使用 jquery 从该 XML 中检索 NombreItem

```
function agregarItemAPedido(tcLink) {
//  Se agrega el item al documento
$.post(tcLink,
    function (data) {
        var $this = $(data);
        $(data).find('ActualizarItem').each(function () {
            alert($(this).attr('NombreItem'));
        })
    }
    );
} 
```

但它从不显示警报消息。我正在阅读一些帖子，但没有一个对我有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T00:21:49.853

`NombreItem`标签不是属性，它是子元素。

```
$(data).find('NombreItem').each(function () {
    alert($(this).text());
}) 
```

# c++ - C++ 数值验证 - 正在使用循环

> ID：13446083
> 
> 赞同：0
> 
> 时间：2012-11-19T00:19:40.250
> 
> 标签：c++, for-loop, validation

我发布了一个较早的问题，寻求在我的代码中使用验证脚本的帮助。在一个非常有用的答案之后，我能够弄清楚我需要如何继续。好吧，我遇到了一个很大的障碍；

```
#include <iostream>
#include <sstream>
#include <string>
#include <ctype.h>

using namespace std;

int main()
{
        unsigned __int64 input = 0;
        int n, i;
        char str[]="c3po...";
        i=1;
        n=0;

        for (cout << "Input a number" << endl; cin >> input; cin.ignore(numeric_limits<int>::max(), '\n'))
    {
        cout << "We're parsing your input '" << input << "'\n";

     if (input % 2 == 0) 
        {
            cout << "Even!" << endl;
        }

    else if (input % 2 == 1)
        {
            cout << "Odd" << endl;
            cout << "Lets make it even shall we? " << "Your new number is... " << input + 1 << endl;
        }
    else (isalnum(str[i]));i++;
        { 
        cout << "We could not parse '" << input << "' as a number.\n";
        }    
    }
    system ("pause");
    return 0;
} 
```

从我的代码中可以看出，验证脚本运行良好。我有一些我想解决的错误。

1-当我输入一个数字时，它会按应有的方式运行代码，但它也会显示

```
Could not parse 'inputted number' as a number 
```

显然，当输入数字时，您不希望发生这种情况！

2- 对于错误消息，将输入的数字显示为 [0]。这与使用整数有关吗？如何解决这个问题？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T00:26:39.917

你的问题很简单，你在这条线上有小错误

```
else (isalnum(str[i])); 
```

你的 else 语句以分号结尾，实际上什么也不做。每次都会执行以下语句。

```
i++;
    { 
    cout << "We could not parse '" << input << "' as a number.\n";
    } 
```

# image-processing - 改善形态闭合

> ID：13446089
> 
> 赞同：5
> 
> 时间：2012-11-19T00:20:56.937
> 
> 标签：image-processing, opencv

我正在尝试使用形态关闭操作使图像均匀明亮，作为自适应阈值的前奏。我的方法是在关闭操作后将图像中的每个像素除以该像素的值，然后进行归一化：

```
Imgproc.GaussianBlur(sudokuImage, sudokuImage, new Size(5,5), 0);
Mat kernel = Imgproc.getStructuringElement(Imgproc.MORPH_ELLIPSE, new Size(11,11));
Imgproc.morphologyEx(image, closedImage, Imgproc.MORPH_CLOSE, kernel);
Core.divide(image, closedImage, image);
Core.normalize(image, image, 0, 255, Core.NORM_MINMAX); 
```

结果如下：

*   左上 - 原始图像
*   右上角 - 高斯模糊后
*   左下 - 关闭操作的结果
*   右下 - 最终结果

![在此处输入图像描述](../Images/0091c965d3a14aaec78263333956b927.png)

[我希望最终图像不那么褪色，更像下面的图像（使用本文](https://stackoverflow.com/questions/10196198/how-to-remove-convexity-defects-in-sudoku-square)中看起来相同的方法获得）。我怎样才能做到这一点？

![在此处输入图像描述](../Images/4d9e7dac49c777606d3ddff29dad5ea4.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T08:54:23.973

也许问题在于您似乎在整数上执行的划分步骤，而您链接到在浮点数上执行的帖子。

# ruby-on-rails-3 - Rails 用户有许多最喜欢的类别。使用HABTM还是不使用？

> ID：13446090
> 
> 赞同：0
> 
> 时间：2012-11-19T00:21:07.830
> 
> 标签：ruby-on-rails-3, forms, activerecord, has-and-belongs-to-many

我有三个模型：User、FavCategory 和 Category。显然 FavCategory DB 表只不过是一个关联表。

我目前没有将此设置作为 HABTM 关联，​​因为我只需要引用当前用户最喜欢的类别。

```
# User.rb
has_many :fav_categories

# FavCategory.rb
belongs_to :user
belongs_to :category 
```

现在我想让用户从复选框中进行选择并选择他们想要的这个类别作为他们的最爱，我目前有这个：

```
<div class="field">
  <%= f.label 'Fav Categories' %>
  <ul>
    <% Category.all.each do |c| %>
      <li>
        <%= check_box_tag 'user[fav_category_ids][]', c.id, @user.fav_categories.pluck(:category_id).include?(c.id) %>
        <%= c.title %>
      </li>
    <% end %>
  </ul>
  <% end %>
</div> 
```

所以我的问题是：

1.  我应该使用HABTM吗？还是没有必要？
2.  如果不需要HABTM，我将如何命名复选框以便它们在保存时更新用户的收藏夹？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T02:14:13.507

1）我不会在这里使用HABTM，只是因为我的第一个想法是“我打赌在某些时候用户会想要自定义订购他们最喜欢的类别。” 并且一旦他们要求您需要该中间表来添加排名/位置信息。

2）我认为您所掌握的内容是正确的，但是自从我手动创建字段名称以来已经有很长时间了……您为什么不使用`form_for @user`它，这很好？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T05:20:57.890

我认为你不应该使用HABTM。您永远不会知道何时需要为 FavCaterogy 添加一些列，如果需要，您无法添加。您应该使用`has_many :through`关联，它创建一个连接模型，因此您可以在需要时添加更多列。

另外，如果你想做一些统计，例如，如果你想找到：**一个喜欢的类别的用户数，**如果你有一个加入模型会很容易，只需使用`count`模型的方法。使用HABTM，您无法做到。

如何创建表格？您可以查看[表单助手](http://guides.rubyonrails.org/form_helpers.html)指南。

# java - Maven 构建战争在 Tomcat 7 上无法正常工作

> ID：13446101
> 
> 赞同：0
> 
> 时间：2012-11-19T00:22:11.010
> 
> 标签：java, maven, intellij-idea, tomcat7, maven-jetty-plugin

我一直在开发一个网络应用程序，这是我开始讲述我的故事之前的配置。

配置：IntelliJ IDEA 11 + Java 7 + (Maven + Jetty 8.0.1)。

当我在 IntelliJ 上清理和构建我的应用程序时，一切都按预期工作，没有任何问题；页面加载，渲染非常好。然后我使用 -mvn clean package 命令构建我的项目，以便在 Tomcat 7 上测试我的应用程序。但是，当我将应用程序部署到 Tomcat 时，某些页面与我在 maven 构建中看到的不同：渲染没有工作正常，样式有点过时等等......当我检查萤火虫时，即使有些页面也没有完全加载。

我希望有人遇到类似的问题；这件事让我发疯......如果你需要任何日志或任何东西，只需命名它。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T01:07:56.730

显然，您有时会遗漏一些细微差别，并且浏览器会保留您浏览的页面的大量数据。我刚刚清除了我所有的浏览器缓存，现在一切正常！..所以如果你遇到类似的事情，一定要清除你的浏览器缓存。

# c++ - 创建一个函数来替换字符串中的某些字母？

> ID：13446105
> 
> 赞同：-1
> 
> 时间：2012-11-19T00:22:26.103
> 
> 标签：c++, codeblocks

我需要创建一个接受两个字符和一个字符串并返回一个字符串的函数。
该函数应将第一个参数中的所有字母替换为第二个
参数。例如，如果传递的字符串是“How now cow”，并且函数将
所有 'o' 替换为 'e'，那么新字符串将是：“Hew new cew”。

我知道这是错误的，但我该如何修改这段代码才能工作？

```
#include <iostream>
using namespace std;

string replace(char a, char b, string Rstring){
string Restring;

Restring= Rstring.replace( 'o', 2, 'e')

return Restring;
}

int countspace(string  mystring){
int counter;
for (int i=0;i<mystring.length();i++){

if (mystring[i]== ' ')
counter++;
}
return counter;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T00:39:33.203

`std::string.replace`不会做你想做的事。相反，您应该编写自己的方法，执行此解析并不太难。

```
 replaceChars(string *str, char old, char replacement)
 {
      for(char& c : str) {
         if (c == old)
            c = replacement;
      }
 } 
```

该循环仅在 C++11 中有效，因此如果它不起作用，请使用这个 insead；

```
 while(char* it = str; *it; ++it) {
          if (*it == old) // dereference the pointer, we want the char not the address
            *it = replacement;
      } 
```

您将这个指针传递给字符串和要交换的字符。当您遇到将其设置为替换的旧字符时，它会逐个字符地遍历字符串。for 循环使用对的引用，`c`因此您将就地更改字符串，无需分配新字符串或任何东西。如果您不使用`std::string`它，则可以使用字符数组轻松完成。这个概念是完全一样的。

# javascript - 尝试在 JavaScript 中访问 iframe 时出错

> ID：13446106
> 
> 赞同：5
> 
> 时间：2012-11-19T00:22:35.307
> 
> 标签：javascript, soundcloud

我正在尝试从这个小 API 调用 SC.Widget 函数：http: [//developers.soundcloud.com/docs/api/html5-widget](http://developers.soundcloud.com/docs/api/html5-widget)，但我在 Chrome 检查器中收到此错误消息，我被困在那里。

> 不安全的 JavaScript 尝试从带有 URL 的框架访问带有 URL `file://localhost/Users/maxwell/Desktop/test/test.html`的框架
> 
> `http://w.soundcloud.com/player/?url=http%3A%2F%2Fapi.soundcloud.com%2Ftracks%2F67825032&auto_play=false&show_artwork=true&color=ff7700`.
> 
> 请求访问的帧具有“http”协议，被访问的帧具有“文件”协议。协议必须匹配。

```
<body>
    <iframe id="soundcloud" width="100%" height="166" scrolling="no" frameborder="no"
    src="http://w.soundcloud.com/player/?url=http%3A%2F%2Fapi.soundcloud.com%2Ftracks%2F67825032&amp;auto_play=false&amp;show_artwork=true&amp;color=ff7700"></iframe>
    <script>
        Soundcloud();
    </script>
</body>

function Soundcloud() {
    var widget1 = SC.Widget(iframeElement.soundcloud);
    alert("widget1");
} 
```

我知道这样做是出于安全原因，但是如果我无法访问框架，如何修改 SoundCloud 小部件？

谢谢你的帮忙！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-19T01:54:46.517

当使用 JavaScript 访问 iframe 或发出任何 JSON AJAX 请求时，您只能在它们位于同一域中时获得访问权或响应。否则，服务器必须显式设置：

访问控制允许来源：*

在标题中。您还可以提供以逗号分隔的允许域列表，而不是 *。

因此，您必须在网页和数据源位于同一域（例如 localhost）的开发环境中对此进行测试，否则您实际上无能为力，除非您使用 --disable-web- 启动 chrome安全

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T09:57:33.270

您可以将此添加到您的 iframe

```
sandbox="allow-same-origin allow-scripts" 
```

但在歌剧中不受支持 - w3schools 的新项目。它会处理错误，但会破坏播放器。

# php - Ajax Javascript PHP - 点击太快会破坏数字

> ID：13446109
> 
> 赞同：2
> 
> 时间：2012-11-19T00:22:45.083
> 
> 标签：php, javascript, ajax

我正在使用 Ajax、Javascript 和 PHP/MySQL 构建购物车。在主购物车页面上，用户可以单击图像链接以从他们的每个项目选择中添加 1 或删除 1。Ajax 使用 PHP 脚本向/从数据库中该项目的金额添加 1 或删除 1，并且 javascript 对购物车页面执行相同的操作。我遇到的问题是，当我在这些图像链接中的任何一个上单击太快时，我的数据库中存在的值与屏幕上存在的值不再匹配。我认为这将是一个相当容易解决的问题，但我似乎无法正确解决。我尝试在 PHP 脚本中使用 usleep()，在 javascript 中使用 setTimeout()，并且我尝试设置一个 cookie（更新过程开始时值 = 1，完成时值 = 0）并且只允许该过程如果值 != 1 则运行，但这都没有解决我的问题。代码如下。

购物车.php

```
<a onClick='itemAddOne($item[id])' class='item_add'><img src='images/cart-add.jpg' alt='' onClick=this.src='images/cart-add_click.jpg' onMouseOut=this.src='images/cart-add.jpg'></img></a> 
```

购物车.js

```
var xmlhttp;
var sub_v;
var sub_v2;
var add_tot;
var element
var item_add;
var resp;
var prov;
var taxrate;
var finish;

function itemAddOne(itemID) {
    if (window.finish != 1) {
        finish = 1;
        document.cookie = "finish=1; path=/";
        xmlhttp.open("POST","add.php",true);
        xmlhttp.setRequestHeader("Content-type","application/x-www-form-urlencoded");
        xmlhttp.onreadystatechange = function () {
            if (xmlhttp.readyState == 4) {
                if (xmlhttp.status == 200) {
                    resp = xmlhttp.responseText;
                    add_tot = resp.substr(3);
                    prov = resp.substr(0,2);
                    if (prov == 'BC') {
                        taxrate = .12;
                    } else if (prov == 'AB') {
                        taxrate = .05;
                    } else if (prov == 'SK') {
                        taxrate = .05;
                    } else if (prov == 'MB') {
                        taxrate = .05;
                    } else if (prov == 'ON') {
                        taxrate = .13;
                    } else if (prov == 'QC') {
                        taxrate = .05;
                    } else if (prov == 'NL') {
                        taxrate = .13;
                    } else if (prov == 'NS') {
                        taxrate = .15;
                    } else if (prov == 'NB') {
                        taxrate = .13;
                    } else if (prov == 'PE') {
                        taxrate = .05;
                    } else if (prov == 'NT') {
                        taxrate = .05;
                    } else if (prov == 'NU') {
                        taxrate = .05;
                    } else if (prov == 'YT') {
                        taxrate = .05;
                    }
                    element = "item_quantity" + itemID;
                    item_add = document.getElementById(element);
                    tax_v = document.getElementById('tax');
                    tot_v = document.getElementById('tot');
                    sub_v = document.getElementById('subt');
                    item_add.value = Number(item_add.value) + 1;
                    sub_v.value = (Number(sub_v.value) + Number(add_tot));
                    tax_v.value = Number(sub_v.value) * Number(taxrate);
                    tot_v.value = Number(tax_v.value) + Number(sub_v.value);
                    tax_v.value = Number(tax_v.value).toFixed(2);
                    sub_v.value = Number(sub_v.value).toFixed(2);
                    tot_v.value = Number(tot_v.value).toFixed(2);
                }
            }
        };
        xmlhttp.send("itemid=" + itemID + "&amount=1");
        finish = 0;
        document.cookie = "finish=0; path=/";
    }
} 
```

添加.php

```
 <?
if ($_REQUEST['itemid'] && $_REQUEST['amount'] && $_COOKIE['finish'] != 1) {

    require 'requires/connect.php';
    require 'requires/function.php';

    $_REQUEST['itemid'] = protect($_REQUEST['itemid'],'2');
    $_REQUEST['amount'] = protect($_REQUEST['amount'],'2');

    $sql = "SELECT id, ws_price FROM items WHERE id = '$_REQUEST[itemid]'";
    $sql2 = query($sql);
    $sql3 = mysql_numrows($sql2);
    $add_item = mysql_fetch_array($sql2);
    $add_item['ws_price'] = $add_item['ws_price'] * $_REQUEST['amount'];

    if ($sql3 > 0) {

            if (strlen($_COOKIE['ua_email']) > 0 && strlen($_COOKIE['ua_pass']) > 0) {

            $_COOKIE['ua_email'] = protect($_COOKIE['ua_email'],'1');
            $_COOKIE['ua_pass'] = protect($_COOKIE['ua_pass'],'1');

            $sql = "SELECT id, province FROM user_account WHERE email = '$_COOKIE[ua_email]' AND pass = '$_COOKIE[ua_pass]'";
            $sql2 = query($sql);
            $sql3 = mysql_numrows($sql2);

            if ($sql3 > 0) {

                $user = mysql_fetch_array($sql2);

                $sql = "SELECT orderid FROM orders WHERE userid = '$user[id]'";
                $sql2 = query($sql);
                $sql3 = mysql_numrows($sql2);

                if ($sql3 > 0) {
                    $sql4 = mysql_fetch_array($sql2);
                    $order_id = $sql4['orderid'];
                } else {
                    $sql = "SELECT orderid FROM orders ORDER BY orderid DESC";
                    $sql2 = query($sql);
                    $sql3 = mysql_fetch_array($sql2);
                    $order_id = $sql3['orderid'] + 1;
                }

                $sql = "SELECT id, amount FROM orders WHERE userid = '$user[id]' AND orderid = '$order_id' AND itemid = '$_REQUEST[itemid]'";
                $sql2 = query($sql);
                $sql3 = mysql_numrows($sql2);

                if ($sql3 > 0) {
                    $sql4 = mysql_fetch_array($sql2);

                    if (($sql4['amount'] + $_REQUEST['amount']) > 0) {
                        $sql = "UPDATE orders SET amount = amount + $_REQUEST[amount] WHERE id = '$sql4[id]'";
                        $sql2 = query($sql);
                        echo "$user[province]-$add_item[ws_price]";
                    }

                } else {

                $sql = "INSERT INTO orders (orderid, itemid, userid, amount) VALUES ('$order_id', '$_REQUEST[itemid]', '$user[id]', '$_REQUEST[amount]')";
                $sql2 = query($sql);

                }

            }
        }
    }
}
?> 
```

我已经搜索并且无法想出解决此问题的简单方法，任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T23:27:22.110

解决这个问题就像使请求同步而不是异步一样简单。由于请求现在是同步的，它会强制每个请求在允许另一个实例开始之前完成，因此脚本现在的运行速度不可能超过它们在屏幕上更新的速度。干杯!

# wordpress - 如何将旧的永久链接结构重定向到新的永久链接结构？

> ID：13446112
> 
> 赞同：0
> 
> 时间：2012-11-19T00:23:12.050
> 
> 标签：wordpress, .htaccess

直到最近，自定义 url 结构设置如下：

```
/%year%/%monthnum%/%postname% 
```

它们都位于 /blog/ 子文件夹中。

由于分页问题，​​我将永久链接更改为标准：

```
domain.com/sample-post/ 
```

我想知道的是，有什么方法可以使用 htaccess 从旧样式重定向到新样式？这样，任何指向旧帖子的链接都会转到正确的帖子？有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T09:04:57.467

如果您需要更新您的永久链接结构，您可能希望查看 Velvet Blues 更新 URL 的插件：[http ://wordpress.org/extend/plugins/velvet-blues-update-urls/](http://wordpress.org/extend/plugins/velvet-blues-update-urls/)

# node.js - 如何使用 Node.js + Express3 将变量注入 EJS 模板？

> ID：13446113
> 
> 赞同：3
> 
> 时间：2012-11-19T00:23:31.000
> 
> 标签：node.js, express

我希望能够在我的 EJS 模板中使用 Underscore.js，如下所示：

```
<% _.each(articles, function(article){ %>
    <section>
      <h2><%= title %></h2>
      <%= body %>
    </section>
    <hr/>
<% }) %> 
```

我可以像这样为每条路线注入它......

```
var _ = require('underscore');
exports.index = function(req, res){
    res.render('index', { _: _, articles: app.allArticles() });
}; 
```

但这很乏味并且容易出现人为错误。是否有一个通用的解决方案，始终为所有视图注入它？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-19T01:34:02.897

你可以[用 app.locals](http://expressjs.com/api.html#app.locals)做到这一点。

```
var _ = require('underscore');
var express = require('express');
var app = express();
app.locals._ = _;
// some code
app.listen(3000); 
```

# button - Pygame：如何射击？

> ID：13446116
> 
> 赞同：0
> 
> 时间：2012-11-19T00:23:53.750
> 
> 标签：button, mouse, pygame

这是一段代码：

```
fire_coord_x = 350.0
fire_coord_y = 350.0

while not done:

    fire_vel_x = 0.0
    fire_vel_y = 0.0
    fire_speed = 4.0

        if event.type == pygame.MOUSEBUTTONDOWN:
            if event.button == 1:
                screen.blit(fire1,[fire_coord_x,fire_coord_y]) 
```

如您所见，当我按下鼠标按钮时，我使用了条件“if”将 fire1 图像传送到屏幕上。问题是：火消失了。我什至尝试过这样做：

```
 if event.type == pygame.MOUSEBUTTONDOWN:
        if event.button == 1:
            screen.blit(fire1,[fire_coord_x,fire_coord_y])
    if event.type == pygame.MOUSEBUTTONUP:
        if event.button == 1:
            screen.blit(fire1,[fire_coord_x,fire_coord_y]) 
```

认为“MOUSEBUTTONUP”将图像永远保留在那里。但是，失败得很惨。所以，我想请教一些技术来解决这个问题。如何按鼠标按钮并创建图像，以使图像留在那里？将火图像朝武器方向移动是未来的问题。

出于记忆的原因，在某个时间点对在偏移位置创建的每个图像进行 drestroy 处理会很有趣。

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T04:31:53.663

## MOUSEBUTTONDOWN 事件

1.  从一个空的`sprite.Group`命名**项目符号开始**
2.  将`MOUSEBUTTONDOWN`项目符号附加`Sprite`到项目**符号时。**
3.  在你的主绘图循环中，调用**bullets.draw()**

> 出于记忆的原因，在某个时间点对在偏移位置创建的每个图像进行 drestroy 处理会很有趣。

实际上，内存中只有一个表面，所有子弹（Sprite）都使用它。只有当 100% 的子弹死在哪里时，它才会被释放。主要瓶颈可能是大量子弹的碰撞。您可以使用 QuadTree 改进这一点。

[四叉树演示](http://www.pygame.org/project-Quadtree+test-1691-.html)

## 鼠标按下状态

如果你想像 FPS 那样拿着**LMB**来开枪，那么你会

1.  使用[mouse.get_pressed()](http://www.pygame.org/docs/ref/mouse.html#pygame.mouse.get_pressed)检查鼠标按下状态。
2.  如果按下，并且自上一个项目符号 >= 300 毫秒以来经过的时间，则生成项目符号。（否则忽略此循环。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T00:58:34.140

```
background = 0,0,0

pressed = 0
fire1 = pygame.image.load("path/to/fire1")
fire_coord_x = 350
fire_coord_y = 350
while 1:
for event in pygame.event.get():
    if event.type == pygame.QUIT:
        sys.exit()
    if event.type == pygame.MOUSEBUTTONDOWN:
        pressed = 1
    if event.type == pygame.MOUSEBUTTONUP:
        pressed = 0

screen.fill(background) 
if pressed == 1:
    screen.blit(fire1,[fire_coord_x,fire_coord_y])

pygame.display.flip() 
```

这看起来有帮助吗？这是你想做的吗？

每当您按下按钮时，这将产生一个 fire1，如果您停止按下，它将消失。

# c++ - 类数组大小的未处理异常

> ID：13446119
> 
> 赞同：0
> 
> 时间：2012-11-19T00:24:30.810
> 
> 标签：c++, arrays, class

我正在尝试实现一个最近最少使用的算法程序。我正在提示用户输入帧大小。如果我提示并输入 6 下的任何内容，它会完美运行。如果我输入 6 及以上的任何内容，它会在读取输入流（文件）并将其添加到类时引发异常。

```
inputStream >> pid;
inputStream >> ref; 
```

文件有 7-8 行，我这里只显示 2 行。

```
1 45
1 46 
```

这是我的课程和 main() 的一部分

```
class pagetable
{

public:
int pid;
int ref;
int faults;
pagetable();
};

 pagetable::pagetable(){

pid = 0;
ref = 0;
faults = 0;
} 
```

主要的（）

```
while(!done){
 pagetable* page = new pagetable[frames];
ifstream inputStream;
getFileName(inputStream);//asks for input filename until it is valid

cout << "\nEnter in the number of frames:";
cin >> frames;
for ( i = 0; i < frames; i++ ) { //initializing
     page[i].pid = 0;
     page[i].ref = 0;

}
faults = runsimLFU2(inputStream, page, frames );

  void getFileName(ifstream &inputStream) //asks for input file until it is valid
{
char filename[MAXFILE];
while (inputStream.is_open() == false)
{
    inputStream.clear();
    cout << "\n";
    cout << "Input filename: ";
    cin >> filename;
    inputStream.open(filename);
}
} 
```

所以，现在我调用一个运行 LRU 算法的函数。当我将文件解析到类时，这就是我得到错误的地方。我评论了我收到错误的那一行。

```
int runsimLFU2(ifstream &inputStream, pagetable* page, int frames ){

int i =0;
int j=0;
int pid =0;
int ref = 0;
int index = 0;
int count = 0;
int pagefaults = 0;
int lowest=0;

int counter = 1;

int * LRU;
LRU = new int[frames];

while(1){

  inputStream >> pid;        //Error if frame is 6 or more
  inputStream >> ref;
  if( inputStream.eof() ) break;
    while(count < frames)
   {

       index  = searchForEmptySlotsLRU(page, frames); 
```

它在哪里引发错误 VS 调出 xlocale 文件，我评论了哪一行

```
_CRTIMP2_PURE void __CLR_OR_THIS_CALL _Incref()
        {   // safely increment the reference count
        _BEGIN_LOCK(_LOCK_LOCALE)
            if (_Refs < (size_t)(-1))   //error
                ++_Refs;
        _END_LOCK()
        } 
```

这可能是我初始化的方式吗？我需要将它们初始化为零，因为稍后我会检查空槽。

我真的不明白，因为那时我没有在课堂上添加任何东西。

谢谢你。

编辑：我注释掉了类中的初始化并且它不再抛出异常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T23:54:14.303

你以某种方式破坏了记忆。

这看起来很可疑：

```
while(!done){
    pagetable* page = new pagetable[frames];
    ifstream inputStream;
    getFileName(inputStream);//asks for input filename until it is valid

    cout << "\nEnter in the number of frames:";
    cin >> frames;
    for ( i = 0; i < frames; i++ ) { //initializing
        page[i].pid = 0;
        page[i].ref = 0;    
    } 
```

第一次帧的价值是多少？尝试将其移至`cin`.

```
while(!done){
    ifstream inputStream;
    getFileName(inputStream);//asks for input filename until it is valid

    cout << "\nEnter in the number of frames:";
    cin >> frames;
    pagetable* page = new pagetable[frames];
    for ( i = 0; i < frames; i++ ) { //initializing 
```

# jquery - jQuery 和复选框 - 获取上一个元素

> ID：13446123
> 
> 赞同：-1
> 
> 时间：2012-11-19T00:25:12.057
> 
> 标签：jquery, html, checkbox

我有一个相当简单的任务，但我无法解决它。我无法理解 jQuery 如何使用复选框。

我的页面上有几个复选框。

```
<input type="hidden" value="121"/>
<input type="checkbox" value="27" name="option_value[12][]" id="option_value_27" class="filtered option_value" cat="121"> 
```

我正在尝试使用该查询选择选中的那些：

```
var chboxes=$(".option_value:checked"); 
```

（他们都有`.option_value`风格）

我期望我会得到一个对象数组，但我会得到一个没有方法和属性的 HTML 片段数组。

我可以得到对象数组吗？

我需要使用`prev()`方法。

在这个论坛上，我找到了解决方案，`get(0)`但在我的情况下它不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T00:40:07.297

没有什么可做的，我只能猜测，但可能是这样的：

```
$("input").is(":checked").each(function(i) {
    $(this).prev() // this would be the element just before a checked checkbox
}); 
```

不太确定我是否理解您的评论，但是：

```
$("input").is(":checked").each(function(i) {
    $("#someButtonID").append($(this).prev());
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T00:44:41.377

这可能会有所帮助

```
<input type="checkbox" checked="checked" class="option_value" value="one" /> Checkbox 1
<input type="checkbox" checked="checked" class="option_value" value="two" /> Checkbox 2
<input type="checkbox" class="option_value" value="three" /> Checkbox 3

$('.option_value:checked').each(function () { // Loop through all checked checkboxes
    var prev = $(this).prev(); // Do something with previous jQuery object
}); 
```

​ 试试看：http: [//jsfiddle.net/viktorb/GugSM/1/](http://jsfiddle.net/viktorb/GugSM/1/)

# c# - 如何禁用表单上除按钮之外的所有控件？

> ID：13446129
> 
> 赞同：16
> 
> 时间：2012-11-19T00:26:06.723
> 
> 标签：c#, winforms, controls

我的表单有数百个控件：菜单、面板、拆分器、标签、文本框，应有尽有。

有没有办法禁用除单个按钮之外的所有控件？

按钮很重要的原因是因为我不能使用禁用窗口或其他东西的方法，因为一个控件仍然需要可用。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-11-19T00:41:13.067

您可以进行递归调用以禁用所有涉及的控件。然后你必须启用你的按钮和任何父容器。

```
 private void Form1_Load(object sender, EventArgs e) {
        DisableControls(this);
        EnableControls(Button1);
    }

    private void DisableControls(Control con) {
        foreach (Control c in con.Controls) {
            DisableControls(c);
        }
        con.Enabled = false;
    }

    private void EnableControls(Control con) {
        if (con != null) {
            con.Enabled = true;
            EnableControls(con.Parent);
        }
    } 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2014-05-14T10:27:35.597

基于@pinkfloydx33 的回答和我对它所做的编辑，我创建了一个扩展方法，使它更容易，只需创建一个`public static class`这样的：

```
public static class GuiExtensionMethods
{
        public static void Enable(this Control con, bool enable)
        {
            if (con != null)
            {
                foreach (Control c in con.Controls)
                {
                    c.Enable(enable);
                }

                try
                {
                    con.Invoke((MethodInvoker)(() => con.Enabled = enable));
                }
                catch
                {
                }
            }
        }
} 
```

现在，要启用或禁用控件、表单、菜单、子控件等。只需执行以下操作：

```
this.Enable(true); //Will enable all the controls and sub controls for this form
this.Enable(false);//Will disable all the controls and sub controls for this form

Button1.Enable(true); //Will enable only the Button1 
```

所以，我会做什么，类似于@pinkfloydx33 的回答：

```
private void Form1_Load(object sender, EventArgs e) 
{
        this.Enable(false);
        Button1.Enable(true);
} 
```

我喜欢扩展方法，因为它们是静态的，您可以在任何地方使用它而无需（手动）创建实例，而且至少对我来说更清晰。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-11-19T00:56:51.867

要获得更好、更优雅且易于维护的解决方案 - 您可能需要重新考虑您的设计，例如将您的按钮与其他控件分开。然后假设其他控件在面板或组框中，只需执行`Panel.Enabled = False`.

如果您真的想保留当前的设计，可以将[ControlCollection 树线性化为 Control 数组](http://www.neolisk.com/techblog/vbnet-get-all-controls-of-specified-type-from-controlcollection-tree)以避免递归，然后执行以下操作：

```
Array.ForEach(Me.Controls.GetAllControlsOfType(Of Control), Sub(x As Control) x.Enabled = False)
yourButton.Enabled = True 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-04-09T17:10:11.837

当您嵌套了许多面板或 tableLayoutPanel 时，情况会变得很棘手。尝试禁用面板中的所有控件禁用父面板然后启用子控件根本不会启用该控件，因为未启用父级（或父级的父级）。为了保持启用所需的子控件，我将表单布局视为一棵树，表单本身作为根，任何容器或面板作为分支，子控件（按钮、文本框、标签等）作为叶节点。因此，主要目标是禁用与所需控件同一级别内的所有节点，将控件树一直爬到表单级别，建立启用控件的路径，以便子控件可以工作：

```
public static void DeshabilitarControles(Control control)
{
    if (control.Parent != null)
    {
        Control padre = control.Parent;
        DeshabilitarControles(control, padre);
    }
}

private static void DeshabilitarControles(Control control, Control padre)
{
    foreach (Control c in padre.Controls)
    {
        c.Enabled = c == control;
    }
    if (padre.Parent != null)
    {
        control = control.Parent;
        padre = padre.Parent;
        DeshabilitarControles(control, padre);
    }
}

public static void HabilitarControles(Control control)
{
    if (control != null)
    {
        control.Enabled = true;
        foreach (Control c in control.Controls)
        {
            HabilitarControles(c);
        }
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-07-24T13:58:17.270

我已经更正了@coloboxp 的答案，首先您必须启用所有父母：

```
 public static void Enable(this Control con, bool enable)
    {
        if (con != null)
        {
            if (enable)
            {
                Control original = con;

                List<Control> parents = new List<Control>();
                do
                {
                    parents.Add(con);

                    if (con.Parent != null)
                        con = con.Parent;
                } while (con.Parent != null && con.Parent.Enabled == false);

                if (con.Enabled == false)
                    parents.Add(con); // added last control without parent

                for (int x = parents.Count - 1; x >= 0; x--)
                {
                    parents[x].Enabled = enable;
                }

                con = original;
                parents = null;
            }

            foreach (Control c in con.Controls)
            {
                c.Enable(enable);
            }

            try
            {
                con.Invoke((MethodInvoker)(() => con.Enabled = enable));
            }
            catch
            {
            }
        }
    } 
```

# python - Amazon EMR 上的 Python 映射器

> ID：13446130
> 
> 赞同：4
> 
> 时间：2012-11-19T00:26:08.890
> 
> 标签：python, amazon-ec2, amazon-web-services, amazon-emr

我正在尝试在 Amazon EMR 上运行 Python 脚本作为映射器。

我的脚本的初始部分类似于：

```
import sys
import decimal

def some_function(sensor_record):
    return 1 
```

这会导致以下错误输出：

```
[...]/mapper_script.py: line 1: import: command not found
[...]/mapper_script.py: line 2: import: command not found
[...]/mapper_script.py: line 5: syntax error near unexpected token `('
[...]/mapper_script.py: line 5: `def some_function(sensor_record):' 
```

对此有什么想法吗？我以前成功地使用过 EMR，但没有使用 Python。通过 Web 界面运行作业并使用 boto 库，我得到了相同的结果。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-07T19:19:40.247

你只需要添加

```
 #!/usr/bin/env python 
```

以确保 EMR 选择正确的语言。

# php - Wordpress：标记评论以进行审核

> ID：13446140
> 
> 赞同：0
> 
> 时间：2012-11-19T00:27:12.770
> 
> 标签：php, wordpress

我正在寻找一个允许我的用户标记或评价评论以进行审核的 Wordpress 插件。

本质上，如果有很多人标记了一条评论，它就会被添加到审核队列中。

我找到了一些插件，但似乎没有一个适用于任何最新版本的 WordPress。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T12:04:11.883

[http://wordpress.org/extend/plugins/safe-report-comments/](http://wordpress.org/extend/plugins/safe-report-comments/)

```
Requires: 3.3 or higher
Compatible up to: 3.4.2
Last Updated: 2012-11-8
Downloads: 2,365 
```

# vim - Vim 中缺少领导者

> ID：13446144
> 
> 赞同：6
> 
> 时间：2012-11-19T00:27:27.440
> 
> 标签：vim

我花了将近两年的时间编程，直到我决定将 Textmate 换成 Vim，到目前为止我很喜欢它。然而，在玩了几天之后，我遇到了第一个问题。

作为一个初学者，我和许多人一样接触到了 Janus，但最后我决定从头开始创建自己的配置以更好地了解这些东西。我备份了我的配置并开始编写我的新`.vimrc`文件。但后来（很早）我注意到领导键不起作用，当我按下它时它什么也没做，它只是发出哔哔声。我没有更改领导者的键，也没有任何键映射，所以我有点惊讶。

所以我再一次删除了我的`.vimrc`文件和`.vim`目录，以一个干净的状态开始。它没有帮助。所以我打开 Vim 并尝试将领导者重新配置为不同的键，看看是否有帮助。

```
:let mapleader
> E121: Undefined variable: mapleader
:let mapleader = ','
:let mapleader
> mapleader          , 
```

看起来不错，但实际上什么也没发生。即使我把它放在不同的键下，我的 Mac 也会发出哔哔声，仅此而已。我的主目录中没有 vim 配置，没有插件，什么都没有。在 '.vimrc' 而不是 vim 控制台中设置领导者也无济于事。

我在这里看到了一些关于按键超时的讨论，但它并没有让我到任何地方。

我有点卡在这里，即使我愿意，也无法在我的日常工作中使用 Vim。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-19T09:12:11.463

仔细按照这些步骤...</p>

1.  `.vimrc`在您的目录中创建一个空白文件`$HOME`：

    ```
    $ cd
    $ touch .vimrc 
    ```

    Vim 现在应该在我们都想要的“不兼容”模式下运行。

2.  打开你的空白`~/.vimrc`并添加这些行：

    ```
    let mapleader=","
    nnoremap <leader>a :echo("\<leader\> works! It is set to <leader>")<CR> 
    ```

3.  点击`,a`，您应该在命令行中获得以下消息。

    ```
    <leader> works! It is set to , 
    ```

`<leader>`可能从一开始就没有用，但是，还有其他事情需要担心。

无论如何，从那里开始，我建议您添加这些*非自以为是的*设置，这将使您的生活变得更加轻松：

```
filetype plugin indent on
syntax on
set autoindent
set hidden
set incsearch 
```

1.  `filetype plugin indent on`允许 Vim 识别您打开的文件的文件类型，并应用各种内置的文件类型特定设置（缩进规则、完成......）。
2.  `syntax on`打开语法高亮。
3.  `set autoindent``<CR>`如果关闭，当你做的生活很糟糕时，复制当前行的缩进。
4.  `set hidden`允许您打开一个新文件或切换到另一个缓冲区而不保存对当前文件的更改。
5.  `set incsearch`通过打开增量搜索，使基于搜索的导航 ( `/foo`, `?bar`) 立即变得*很棒。*

之后，您可以根据需要添加设置和映射。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-19T00:36:57.327

它正在工作，但更改之前的映射无法理解更改后的领导者角色。例如，如果我有一个 .vimrc 说

```
nnoremap <Leader>a :echo "test"<cr> 
```

然后我可以启动 vim 并点击`\a`进入`test`左下角。但是，如果您键入`:let mapleader = ','`then do`,a`它不起作用，因为您在映射后更改了领导者。如果您然后键入`:nnoremap <Leader>a :echo "test"<cr>`并重试`,a`，它将起作用。因此，`:let mapleader =`必须在使用`<Leader>`.

# mod-rewrite - 如何在 htaccess 中使用 URL 重写来重写这样的 url？

> ID：13446152
> 
> 赞同：0
> 
> 时间：2012-11-19T00:29:30.267
> 
> 标签：mod-rewrite, url-rewriting

那里可能有一个类似的问题，但是当我看到这个 reg 表达式时，试图让答案适应我的情况会伤害我的大脑。

为了在我的服务器上有很多页面，我需要重写 url，例如：

```
www.mysite.com/pages/this-page-here 
```

至

```
www.mysite.com/eng?sentence=this-page-here 
```

简单地删除页面并希望谷歌会发现索引已经造成了很大的混乱。

所以基本上“pages/”被替换为“eng?sentence=”没有变量或任何东西这是唯一的情况。

我的 htaccess 文件中已经有一些重写代码正在删除 .php，我不想在添加时搞砸。

这是 ataccess 现在的内容：

```
# Use PHP5.3 Single php.ini as default
AddHandler application/x-httpd-php53s .php
RewriteEngine on
AddType application/x-httpd-php .htm .html
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME}\.php -f
RewriteRule ^(.*)$ $1.php 
Options -Indexes
ErrorDocument 404 /404.php
ErrorDocument 500 /500.php 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T00:38:53.600

我想说，只需添加规则，就是这样：

```
# Use PHP5.3 Single php.ini as default
AddHandler application/x-httpd-php53s .php
RewriteEngine on
AddType application/x-httpd-php .htm .html
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME}\.php -f
RewriteRule ^(.*)$ $1.php 
RewriteRule ^pages/(.)$ eng?sentence=$1 [L]
Options -Indexes
ErrorDocument 404 /404.php
ErrorDocument 500 /500.php 
```

# java - 对 6 位非负数数组进行基数排序

> ID：13446162
> 
> 赞同：0
> 
> 时间：2012-11-19T00:31:26.693
> 
> 标签：java, arrays, radix-sort

我不知道如何从队列数组中删除值并使用基数排序将它们放入整数数组中。

这是我现在拥有的代码：

```
 public static void radixSort(int[] a) {
  //Create an array of 10 empty array queues
  Queue[] arr =  new Queue[a.length];

  for (int i = 0; i < arr.length; i++)
      arr[i] = new ArrayQueue();

  for (int place = 1; place <= 100000; place *= 10) {
      for (int i = 0; i < a.length; i++)
          arr[i].add(selectDigit(a[i],place));
      for (int j = 0; j < arr.length; j++)
         a[j] = (Integer) arr[j].iterator().next();     
  } 
 } 
```

place 是一个应该为 (1,10,100,1000,100000) 的 int，它指的是 6 位数字中的位置，例如 place = 1 in 684720 从 selectDigit 返回的数字将为 0（第 1 位）和等 selectDigit 采用参数（int digit，int place）。现在我有一个空数组 arr，其中每个索引都包含一个空数组队列。对于数组中的每个数字 a，我将正确的 1s、10s、100s 等值添加到 arr[i] 的正确索引中。在这部分中，我不确定是否应该将队列中的每个值移回数组中，但我不确定如何实现这一点。

编辑：上面的修改后的代码产生以下输出（仍然不正确），它基本上在 a 的每个索引中都有最后一位（排序前），但不是 10s、100s、1000s 等位置。

```
Array before sort: 602408, 183305, 695804, 934237, 285465, 860846, 196873, 139853, 444089, 594823, 436004, 812525, 302271, 104933, 811084, 350006, 115421, 582466, 192803, 163908, 380316, 734056, 595086, 314881, 784318, 959734, 834553, 982188, 272574, 98232
Array after  sort: 8, 5, 4, 7, 5, 6, 3, 3, 9, 3, 4, 5, 1, 3, 4, 6, 1, 6, 3, 8, 6, 6, 6, 1, 8, 4, 3, 8, 4, 2 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T01:53:59.397

不要重新发明轮子。你的方法应该被删除，你应该只调用它：

```
Arrays.sort(a); 
```

# c - C使用结构使用sscanf将fgets（）char数组解析为多个变量

> ID：13446163
> 
> 赞同：1
> 
> 时间：2012-11-19T00:31:29.903
> 
> 标签：c, pointers, segmentation-fault, structure, fgets

在这个程序中它编译但我得到分段错误，`sscanf(str, "%d %s %s %d %f", &pos, z[pos-1].city, z[pos-1].state, &z[pos-1].population, &z[pos-1].growth);`这是因为这一行`z[pos-1].city, z[pos-1].state`，没有 & 但是当我添加时我得到警告：`format â%sâ expects type âchar *â, but argument 4 has type âchar (*)[200]â`。

我确定还有另一种方法可以做到这一点，我需要使用结构，将文件存储信息读入结构数组，然后显示该数组。printf 仅将城市和州存储到 char 数组中。

我评论了我试图初始化为数组的区域，并且有一个与 char 数组值全部三个不兼容的类型：a、'a'、“a”。

```
#include <stdio.h>
#include <string.h>
#include <stdlib.h>

typedef struct{
    int rank;
    char city[200];
char state[50];
int population;
float growth;
}city_t;

void read_data(city_t *z)
{
    FILE *inp;
    inp = fopen("cities.dat", "r");
    char str[256];
    int pos = 0;
    if(inp==NULL)
    {
        printf("The input file does not exist\n");
    }
    else
    {
        /*reads and test until eof*/
        while(1)
        {
            /*if EOF break while loop*/
            if(feof(inp))
            {break;}
            else
            {
                /*read in a number into testNum*/
                //fscanf(inp, "%d", &testNum);
                fgets(str,sizeof(str),inp);
                sscanf(str, "%d %s %s %d %f", &pos, z[pos-1].city, z[pos-1].state, &z[pos-1].population, &z[pos-1].growth);
                z[pos-1].rank = pos;
            }
        }
    }
    fclose(inp);
}

void print_data(city_t *z, int size)
{
    int i;
    printf("rank\tcity\t\tstate\tpopulation\t\tgrowth\n");
    for(i=0;i<size;i++)
    {
        printf("%d\t%s\t\t%s\t\%d\t\t%f\n", z[i].rank, z[i].city, z[i].state, z[i].population, z[i].growth);
    }
}

int main()
{
    int i;
    city_t cities[10];
    /*for(i;i<10;i++)
    {
        cities[i].rank = 0;
        cities[i].city = "a";
        cities[i].state = "a";
        cities[i].population = 0;
        cities[i].growth = 0.00;
    }*/
    read_data(&cities[0]);
    print_data(&cities[0], 10);
    return(0);
}

{
dat file
1 New_York NY 8143197 9.4
2 Los_Angeles CA 3844829 6.0
3 Chicago IL 2842518 4.0
4 Houston TX 2016582 19.8
5 Philadelphia PA 1463281 -4.3
6 Phoenix AZ 1461575 34.3
7 San_Antonio TX 1256509 22.3
8 San_Diego CA 1255540 10.2
9 Dallas TX 1213825 18.0
10 San_Jose CA 912332 14.4
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T00:43:47.460

在 read_data 中，您扫描到`z[pos-1]....`pos 从 0 开始的位置。因此，您将写入超出（之前）数组的扩展。

`pos-1`只需对with`pos`和 increment进行全局替换`pos`；你也可以使用 fscanf，所以你的阅读可以是：

```
 for (int pos=0; !feof(inp); ++pos)
 {
     fscanf(inp, "%d %s %s %d %f",
            &z[pos].rank,
            z[pos].city,
            z[pos].state,
            &z[pos].population,
            &z[pos].growth);
 } 
```

# python - 为什么我对 Python 字符串的搜索不起作用？

> ID：13446166
> 
> 赞同：0
> 
> 时间：2012-11-19T00:32:16.997
> 
> 标签：python, shell

Python noobie 在这里。当我使用像“see spot run”这样的普通字符串时，我可以让“in”正常工作，但这并没有给我我对 html 页面的期望。它总是返回“未找到”。

```
import urllib2
response = urllib2.urlopen('http://www.cnn.com/')
searchTerm = "center"

if searchTerm in response:
    print("found")
else:
    print("not found") 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T00:33:51.937

阅读urlopen[的文档](http://docs.python.org/2/library/urllib2.html#urllib2.urlopen)。它不返回字符串，而是返回一个类似文件的对象。如果您想要页面的实际内容，请调用`response.read()`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T01:35:10.343

要获得更快、更多带宽和内存友好的解决方案：

```
if any(searchTerm in line for line in response):
    print("found")
else:
    print("not found") 
```

# c++ - 删除 C++ STL 多映射中特定键的条目

> ID：13446167
> 
> 赞同：2
> 
> 时间：2012-11-19T00:32:18.997
> 
> 标签：c++, stl

我有这个示例代码可以将条目插入多图。我正在尝试删除指定键的特定条目。但是这段代码进入了无限循环。有人可以帮我处理这段代码吗？

```
#include <iostream>
#include <map>
#include <string>
using namespace std;

int main()
{
    multimap<string, string> names;
    string n;

    names.insert(pair<string, string>("Z", "F"));
    names.insert(pair<string, string>("Z", "A"));

    names.insert(pair<string, string>("S", "T"));
    names.insert(pair<string, string>("S", "A"));
    names.insert(pair<string, string>("S", "J"));

    names.insert(pair<string, string>("D", "H"));
    names.insert(pair<string, string>("D", "W"));
    names.insert(pair<string, string>("D", "R"));

    multimap<string, string>::iterator p;

    p = names.find("Z");
    if(p != names.end()) { // found a name
        do {
            cout << n << ", " << p->second;
            cout << endl;
            if (p->second.compare("A") == 0) {
                names.erase(p);
                p++;
            } else {
                p++;
            }
        } while (p != names.upper_bound("Z"));
    }
    else{
        cout << "Name not found.\n";
    }

    p = names.find("Z");
    if(p != names.end()) { // found a name
        do {
            cout << n << ", " << p->second;
            cout << endl;
        } while (p != names.upper_bound("Z"));
    }
    else{
        cout << "Name not found.\n";
    }
    return 0;
} 
```

在上面我正在查找使用键值“Z”并想要删除“A”。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-19T00:39:32.973

`multimap::erase`使擦除元素的任何迭代器无效，因此这些行

```
names.erase(p);
p++; 
```

擦除 p，从而使其无效，然后尝试增加一个无效的迭代器。您可以通过复制`p`到一个临时的、递增的 p，然后擦除临时迭代器来解决此问题。

```
multimap<string, string>::iterator temp = p;
++p;
names.erase(temp); 
```

或者，如果您使用的是 C++11，则`multimap::erase`返回容器中的下一个迭代器

```
p = names.erase(p); 
```

* * *

编辑：上面实际上并不是无限循环的来源。在第二个循环中，你不会增加`p`，所以它会永远存在。但是，它仍然是您应该修复的问题，因为它可能会导致不可预测且难以追踪错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-19T01:04:29.447

正如其他人所说，推进指向刚刚被擦除的元素的迭代器并不能保证工作。相反，您可以做的是使用后缀运算符检索一个迭代器，该迭代器指向在擦除*之前*`++`跟随已擦除元素的元素：

 *```
names.erase(p++); 
```

在 C++11 中，您也可以检索 的返回值`erase`，它指向以下元素（`end()`如果没有更多元素，则为 is）：

```
p = names.erase(p); 
```

也有人说过，您的第二个循环根据定义是无限循环，因为它从不增加计数器。

但是，还有一件事要说：您检查是否已到达元素范围中的最后一个元素的方法不是很有效：您`upper_bound`在循环的每次迭代中调用，这将导致新的 O(log (n)) 每次树搜索，尽管返回的迭代器总是相同的。

`upper_bound`您可以通过在进入循环并存储结果之前运行来明显改善这一点。但更好的是，我建议您运行该`equal_range`函数一次，然后简单地遍历它返回的范围：

```
typedef multimap<string,string>::const_iterator mapit;
std::pair<mapit,mapit> range = names.equal_range("Z");
mapit it = range.first;
while (it != range.second)
  if (it->second == "A")
    names.erase(it++);
  else
    ++it; 
```

在 C++11 中，使用`auto`会使这看起来更好。*

# android - 添加静态editText视图作为expandableListView Android的最后一个孩子

> ID：13446170
> 
> 赞同：2
> 
> 时间：2012-11-19T00:33:33.383
> 
> 标签：android

我在动态添加静态 EditText 时遇到问题，总是在最后一个子位置。我的适配器使用 JSON 类型的对象。我第一次展开 ExpandableListView 组的子项时，可以为我的 EditText 找到正确的位置，但是当我向相反方向滚动子项时，我的 EditText 会不断改变位置。这是我的 Editext 布局：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
 android:layout_height="wrap_content" 
 android:layout_width="fill_parent" 
 android:orientation="vertical" 
 android:paddingLeft="10dip"
 android:paddingRight="10dip"
 android:background="@color/lgray">
<RelativeLayout android:id="@+id/feedcell_addcomment" android:paddingLeft="10dip" android:paddingRight="10dip" android:paddingTop="5dip" android:paddingBottom="5dip" android:layout_width="fill_parent" android:layout_height="wrap_content" android:layout_marginTop="1dip" android:background="@color/mlgray" >

    </RelativeLayout>
</LinearLayout> 
```

这是我的 childLayout.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android" android:id="@+id/layoutchildren" android:layout_height="wrap_content" android:layout_width="fill_parent" android:orientation="vertical" android:paddingLeft="10dip" android:paddingRight="10dip" android:background="@color/lgray">
    <RelativeLayout   android:paddingLeft="10dip" android:paddingRight="10dip" android:background="@color/white" android:layout_height="45dip" android:layout_width="fill_parent" android:layout_marginBottom="2dip">
        <ImageView android:id="@+id/feedcommentcell_profileimg" android:layout_width="32dip" android:layout_height="32dip" android:layout_centerVertical="true" android:scaleType="fitXY"/>
        <TextView android:id="@+id/feedcommentcell_username" android:textStyle="bold" android:layout_width="wrap_content" android:layout_height="wrap_content" android:textSize="13sp" android:textColor="@color/black" android:layout_toRightOf="@+id/feedcommentcell_profileimg" android:layout_marginLeft="10dip" android:layout_alignTop="@+id/feedcommentcell_profileimg"/>
        <TextView android:id="@+id/feedcommentcell_comment" android:layout_width="wrap_content" android:layout_height="wrap_content" android:textSize="11sp" android:textColor="@color/black" android:layout_toRightOf="@+id/feedcommentcell_profileimg" android:layout_marginLeft="10dip" android:layout_below="@+id/feedcommentcell_username"/>
        <TextView android:id="@+id/feedcommentcell_scanhour" android:layout_width="wrap_content" android:layout_height="wrap_content" android:textSize="10sp" android:textColor="@color/dgray" android:layout_alignParentRight="true" android:layout_alignBottom="@+id/feedcommentcell_username"/>
        </RelativeLayout>
</LinearLayout> 
```

这是我的适配器中的 getChildView

```
 @Override
        public View getChildView(int groupPosition, int childPosition, boolean isLastChild,View convertView, ViewGroup parent)
        {

            int type=getItemViewType(groupPosition,childPosition);
            View v = convertView;
            LayoutInflater vi = (LayoutInflater)getSystemService(Context.LAYOUT_INFLATER_SERVICE);

            if (v == null)
            {

                switch(type)
                {

                    case TYPE_CHILD:

                        v = vi.inflate(R.layout.feedcommentcell, null);

                        break;

                    case TYPE_EDIT:

                        v = vi.inflate(R.layout.edittextcommentlist, null);
                        break;
                }

            }

            try
            { 
                if(type == TYPE_CHILD)
                {
                    JSONObject o = getChild(groupPosition,childPosition);
                        //JSONObject o = itemsChildren.get(childPosition);
                    if(o!=null)
                    {
                        TextView commentUser=(TextView)v.findViewById(R.id.feedcommentcell_username);
                        commentUser.setText(o.getString("username"));

                        String shareMessageId= o.getString("ShareMessageId");
                        o.put("ShareMessageId", shareMessageId);

                        TextView commentText=(TextView)v.findViewById(R.id.feedcommentcell_comment);
                        commentText.setText(o.getString("Message"));

                        TextView commentScanHour=(TextView)v.findViewById(R.id.feedcommentcell_scanhour);
                        commentScanHour.setText(o.getString("timestamp"));

                        ImageView commentImg=(ImageView)v.findViewById(R.id.feedcommentcell_profileimg);
                        String imgurl=o.getString("userimage");
                        if(imgurl!=null && imgurl!="")
                        imageLoader.DisplayImage(imgurl, context, commentImg);

                    }

                }
                else if(type==TYPE_EDIT)
                {
                    //JSONObject o = getChild(groupPosition,childPosition);
                    JSONObject o = itemsChildren.get(childPosition);

                        o.put("edit", "false");
                        v = vi.inflate(R.layout.edittextcommentlist, null);

                    //EditText edit = (EditText) v.findViewById(R.id.feedcell_edittxt);

                }

            }
            catch(Exception e)
            {}

            return v;
        } 
```

这些是其他覆盖方法。我没有向您展示 getGroupView 和他的布局，因为可以正常工作..

```
 @Override
         public JSONObject getChild(int groupPosition, int childPosition) {
                return itemsChildren.get(childPosition);
            }

        @Override
        public long getChildId(int groupPosition, int childPosition) {
                return childPosition;
            }

        @Override
        public boolean areAllItemsEnabled()
        {
            return true;
        }
        @Override
        public int getChildrenCount(int groupPosition) {

            return itemsChildren.size();
        }

        @Override
        public JSONObject getGroup(int groupPosition) {
            return itemsGroup.get(groupPosition);
        }

        @Override
        public int getGroupCount() {
            return itemsGroup.size();
        }

        @Override
        public long getGroupId(int groupPosition) {
            return groupPosition;
        }
        @Override
        public boolean hasStableIds() {
            return true;
        }

        @Override
        public boolean isChildSelectable(int arg0, int arg1) {
            return true;
        }

        public boolean isTextView(int groupPosition,int childPosition)
        {
            JSONObject jo=new JSONObject();
            jo = getChild(groupPosition,childPosition);
            boolean result =false;
            try
            {
                String isEdit=jo.getString("edit");
                if(isEdit.equalsIgnoreCase("true"))
                    result=true;

            }
            catch(Exception e){}
            return result;

        }

        public int getItemViewType(int groupPosition,int childPosition) 
        {
            //JSONObject jo=getChild(groupPosition,childPosition);

            if(isTextView(groupPosition,childPosition))
                return TYPE_EDIT;
            else
                return TYPE_CHILD;
        } 
```

一切似乎都很好，但editText每次都会改变位置......有人有一些解决方案吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T23:36:34.050

由于`isLastChild`无法正常工作，您可以执行以下操作：

```
@Override
public View getChildView(int groupPosition, int childPosition, 
      boolean isLastChild, View convertView, ViewGroup parent)
{
      ...

      if (childPosition == itemsGroup.get(groupPosition).size() - 1) {
           // This gives you confirmation that is the last child in the group
      }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T01:16:16.767

I have the same problem with my `ExpandableList`... The main problem here is with `lastChild` property. You see, on creation, the last child of the group list is the one we think it is, but on scroll opposite, your list is refreshing so next last child is next which you can't see on opposite, or if you go back down, last one you can't see. This is pretty much stupid if you ask me but there is no right solution for this...

# c# - 我用 jquery 分配的新值在回发后消失（UpdatePanel）

> ID：13446171
> 
> 赞同：2
> 
> 时间：2012-11-19T00:33:40.213
> 
> 标签：c#, asp.net, user-controls, updatepanel, postback

我有一个显示游戏列表的页面 (videogames.aspx) 我在更新面板中有一个 DataGrid，它使用用户控件来显示每个视频游戏。(game.ascx) 在我的视频游戏页面中使用。

在这个用户控件中，我可以说游戏中的进展（完成，玩等......通过使用 asp 按钮）

现在我希望在显示列表时能够对游戏进行评分。为此，我使用[http://www.wbotelhos.com/raty/](http://www.wbotelhos.com/raty/)

我创建了另一个用户控件（用于速率）。我在我的 game.ascx 用户控件中使用这个用户控件。

第一次加载页面时我没有问题（我当前的费率是显示）我决定在第一次尝试的游戏中更改我的费率，我的费率使用 webmethods 很好地保存在数据库中，并通过 javascript 很好地显示在屏幕上.

现在我决定改变我在第二个电子游戏中的进度，此时（回发）我的第一个游戏的评分回到我原来的评分值......

我的印象是我的更新面板保留了 ViewState 中的旧值，不是吗？

我该如何摆脱这种情况？

视频游戏.aspx：

```
<asp:UpdatePanel ID="Update" runat="server" UpdateMode="Conditional">
<ContentTemplate>
<asp:DataGrid ID="dgJeux" runat="server" AutoGenerateColumns="false" OnItemDataBound="dgJeux_ItemDataBound" AllowPaging="true" PagerStyle-Position="TopAndBottom"
    PageSize="10" GridLines="None" CssClass="table" ShowHeader="false" OnPageIndexChanged="dgJeux_PageIndexChanged">
    <PagerStyle Mode="NumericPages" HorizontalAlign="Right" CssClass="paginationASP"/>
    <Columns>
        <asp:BoundColumn DataField="jeu_id" Visible="false"></asp:BoundColumn>
        <asp:TemplateColumn HeaderText="Jeu" ItemStyle-HorizontalAlign="Center" ItemStyle-VerticalAlign="Middle">
            <ItemTemplate>
                <UC:UCJeu ID="ucJeu" runat="server"></UC:UCJeu>
            </ItemTemplate>
        </asp:TemplateColumn>
    </Columns>
</asp:DataGrid>
</ContentTemplate>
</asp:UpdatePanel> 
```

我的游戏.ascx：

```
<table>
<tr>
    <td><UC:UCNote ID="ucNote" runat="server"></UC:UCNote></td>

    <td class="pull-right">
        <asp:Repeater ID="rptAvancementJeu" runat="server" Visible="false" OnItemDataBound="rptAvancementJeu_ItemDataBound">
            <HeaderTemplate>
                <div class="btn-group" data-toggle="buttons-checkbox">
            </HeaderTemplate>
            <ItemTemplate>
                <asp:Button ID="butAvancementJeu" CssClass="btn btn-success" runat="server" Text='<%# Eval("jeuavancement_libelle") %>' OnCommand="butAvancementJeu_OnCommand" CommandName="ChangerAvancement" Width="85"/>
            </ItemTemplate>
            <FooterTemplate>
                </div>
            </FooterTemplate>
        </asp:Repeater>
</tr>
</table> 
```

我的 GameRate.Ascx ：

```
<script type="text/javascript">

Sys.WebForms.PageRequestManager.getInstance().add_endRequest(EndRequestHandler);
function EndRequestHandler(sender, args) {
    if (args.get_error() == undefined) {
        $(document).ready(function() {
            $('#<%= noteMoyenne.ClientID %>').raty({
                score: function () {
                    return $('#<%= noteMoyenne.ClientID %>').attr('data-rating');
                },
                readOnly: true
            });
            $('#<%=noteUtilisateur.ClientID %>').raty({
                half: true,
                click: function (score, evt) {
                    var contexte = new Array('<%= noteUtilisateur.ClientID %>', '<%= noteMoyenne.ClientID %>');
                    PageMethods.AffecteNoteEtRetourneNoteMoyenne($('#<%= hfObjectID.ClientID %>').val(), score, AffecterNoteEtMoyenne, null, contexte)
                },
                score: function () {
                    return $('#<%= noteUtilisateur.ClientID %>').attr('data-rating');
                }
            });
        });
    } 
}

</script>
<table>
<asp:Panel ID="pnlNoteUtilisateur" runat="server" Visible="false">
    <tr>
        <td>
            Note : 
        </td>
        <td>
            <div id="noteUtilisateur" runat="server"></div>
            <asp:HiddenField ID="hfObjectID" runat="server" />
        </td>
    </tr>
</asp:Panel>
<tr>
    <td>
        Moyenne : 
    </td>
    <td>
        <div id="noteMoyenne" runat="server"></div>
    </td>
</tr>
<tr>
    <td></td>
    <td>
        <asp:Label ID="lblNombreNotes" runat="server" Text="(pas de note)"></asp:Label>
    </td>
</tr>
</table> 
```

由 raty 生成的 html 示例：

```
<div id="ctl00_content_dgJeux_ctl03_ucJeu_ucNote_noteUtilisateur" data-rating="0.5"     style="cursor: pointer; width: 100px;">
<img src="../img/stars/star-half.png" alt="1" title="Beurk">
<img src="../img/stars/star-off.png" alt="2" title="Mauvais">
<img src="../img/stars/star-off.png" alt="3" title="Pas mal">
<img src="../img/stars/star-off.png" alt="4" title="Bon">
<img src="../img/stars/star-off.png" alt="5" title="Addictif">
<input type="hidden" name="score" value="0.5">
</div> 
```

它使用数据评级属性来显示评级值。就我而言，在我的新汇率之后，该值将是 3.5。我的 webmethod 调用得很好，值保存在数据库中。新的数据评级在 html 中更改。当我想在另一场比赛中改变比赛进程时，问题就开始了。回传后第一场比赛的旧费率值...

非常感谢您的帮助...我迷路了

# c - 在像 a[0-15] 这样的数组中，如何检查是否有任何数组相同，如果是，则合并它们的总数？

> ID：13446174
> 
> 赞同：0
> 
> 时间：2012-11-19T00:34:02.923
> 
> 标签：c

所以我有一个数组：

```
accounts[MAX] 
```

它是一个具有 amount[MAX] 和 debitorcredit[MAX] 数组的并行数组，如果 debitorcredit 数组是 'c' 或 'd' 值并且 amount 持有 $$ 金额，则 debitorcredit 数组成立。如何搜索accounts[3] 是否与accounts[5] 具有相同的帐号（或任何数字组合），如果它们相同，则添加金额值并组合数组？因此，如果

```
accounts[3] = 1500 and accounts[5] = 1500 
```

有

```
amount[3] = 100, amount[5] = 130 
```

和

```
debitorcredit[3] = 'c'   , debitorcredit[5] = 'd' 
```

它会将 1500 的帐户 # 合并到 1 个数组中，金额值为 30 (130 - 100)？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T00:44:49.080

要测试所有帐号对以查看哪些是相等的，请使用

```
for (i = 0; i < MAX; i++) {
    for (j = i; j < MAX; j++) { // note: starts from i, not 0
        if(accounts[i] == accounts[j]) {
            ...
        }
    }
} 
```

但是，您不能将两个帐号合并到一个数组元素中而只删除另一个数组元素，因为您已经定义`accounts`了固定大小`MAX`并且以这种方式分配的数组不能动态重新分配。在您的示例中，您可能希望将所有数组的第 5 个索引设置为某个虚拟值，例如 -1。然后，当您从数组中读取数据时，您可以使用此虚拟值传递所有元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T01:01:30.847

我认为最简单的事情是按帐号对数组进行排序。这最好通过将数据重新排列成结构然后使用`qsort`.

```
struct account_entry {
    int account_num;
    int amount;        // assuming int
    char debit_credit;
}; 
```

然后你会有一个数组：

```
struct account_entry acc[MAX];
for( i = 0; i < MAX; i++ ) {
    acc[i].account_num = accounts[i];
    acc[i].amount = amount[i];
    acc[i].debit_credit = debit_or_credit[i];
} 
```

并对其进行排序：

```
int compare_entry( const void* a, const void* b )
{
    const struct account_entry *aa = (const account_entry*)a;
    const struct account_entry *bb = (const account_entry*)b;
    if( aa->account_num < bb->account_num ) return -1;
    if( aa->account_num > bb->account_num ) return 1;
    return 0;  // No need to do second-tier sorting if accounts are equal.
}

qsort( acc, MAX, sizeof(struct account_entry), compare_entry ); 
```

现在您只需遍历阵列并进行整合。最容易整合到新阵列中。

```
struct account_entry consolidated[MAX];
int c = 0, i;
consolidated[0] = acc[0];

for( i = 1; i < MAX; i++ ) {
    if( acc[i].account_num != consolidated[c].account_num ) {
        c++;
        consolidated[c] = acc[i];
    } else {
        // Add the amounts and work out whether it's debit or credit...  Do
        // not increment c.  Dunno why you don't drop this field altogether
        // and allow negative values, but nevermind.  As such, I won't put
        // code for it in here.
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T00:52:51.550

这是两个数组中的简单迭代，比较每个值：

```
int i, j;

for (i = 0; i < MAX; ++i)
{
    for (j = 0; j < MAX; ++j)
    {
         if (array_one[i] == array_two[j])
         {
              // do stuff ...
         }
     }
 } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-19T00:54:38.200

您可能应该阅读结构：

```
typedef struct record
{
    const char* name;
    double amount;    /* fixed point, 3 decimals? */
    char deb_cred;    /* 'd' or 'c' (prefer to use `signed char` for a direct sign? */
} record_t; 
```

所以而不是

```
#define MAX 15

const char* accounts [MAX] = { "John Mayor", "Paula Bean", "Gary S.", "John Mayor" }; 
double amount        [MAX] = { 100.00      , 200.00      , 300.00   , 400.00       }; 
char debitorcredit   [MAX] = { 'd'         , 'd'         , 'c'      , 'c'          }; 
```

简单的功能会变得相当复杂：

```
double get_balance_arrays(const char* name)
{
    double total = 0;
    int i;
    for(i=0; i<MAX && accounts[i]; ++i)
    {
        if(0 == strcmp(accounts[i], name))
            switch(debitorcredit[i])
            {
                case 'c': total += amount[i]; break;
                case 'd': total -= amount[i]; break;
                default:
                    puts("Invalid transaction");
                    exit(255);
            }
    }
    return total;
} 
```

你会写

```
record_t transactions[MAX] =
{
    { "John Mayor", 100.00, 'd' },
    { "Paula Bean", 200.00, 'd' },
    { "Gary S."   , 300.00, 'c' },
    { "John Mayor", 400.00, 'c' },
    { 0 } /* sentinel */
}; 
```

现在简单的函数可以更方便地实现：

```
double get_balance_struct(const char* name)
{
    double total = 0;
    record_t* tx;
    for (tx = transactions; tx->name; ++tx)
    {
        if (0 == strcmp(tx->name, name)) /* NOTE string comparison! */
        switch(tx->deb_cred)
        {
            case 'c': total += tx->amount; break;
            case 'd': total -= tx->amount; break;
                default:
                    puts("Invalid transaction");
                    exit(255);
        }
    }
    return total;
} 
```

测试：

```
int main(int argc, const char *argv[])
{
    printf("Balance: %0.02f\n", get_balance_struct("John Mayor"));
    printf("Balance: %0.02f\n", get_balance_arrays("John Mayor"));
    return 0;
} 
```

印刷：

```
Balance: 300.00
Balance: 300.00 
```

# c# - 如何托管公共 WCF 服务？

> ID：13446175
> 
> 赞同：3
> 
> 时间：2012-11-19T00:34:14.563
> 
> 标签：c#, wcf

我正在尝试创建一个 tcp wcf 服务，该服务将托管在没有 IIS 的服务器上，并且无需身份验证即可供公众访问。

这是我所做的：

```
ServiceHost svh = new ServiceHost(typeof(MyService));

var tcpbinding = new NetTcpBinding(SecurityMode.None);

var location = "net.tcp://localhost:11111";
svh.AddServiceEndpoint(typeof(IMyService), tcpbinding, location);

svh.Open();
.... 
```

该服务在 locashost 上运行良好，但是当我在服务器上设置它时（添加了防火墙异常），客户端崩溃并显示一条消息：

```
The socket connection was aborted. This could be caused by an error processing 
your message or a receive timeout being exceeded by the remote host, or an 
underlying network resource issue. Local socket timeout was '00:00:59.7344663'. 
```

这是客户端配置文件：

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
    <startup> 
        <supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.5" />
    </startup>
    <system.serviceModel>
        <bindings>
            <netTcpBinding>
                <binding name="NetTcpBinding_IMyService">
                    <security mode="None" />
                </binding>
            </netTcpBinding>
        </bindings>
        <client>
            <endpoint address="net.tcp://myserver:11111/"
                binding="netTcpBinding" bindingConfiguration="NetTcpBinding_IMyService"
                contract="MyServer.IMyService" name="NetTcpBinding_IMyService" />
        </client>
    </system.serviceModel>
</configuration> 
```

我应该改变什么才能使它起作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T05:05:35.287

我过去遇到过类似的问题，我通过不在`localhost`端点地址（`ServiceHost`.ctor）中使用，而是使用实际的机器名称来解决它。此外，您可以在服务主机本身中定义地址，如下所示。

```
ServiceHost svh = new ServiceHost(typeof(MyService), new Uri("net.tcp://myserver:11111"));
var tcpbinding = new NetTcpBinding(SecurityMode.None);
svh.AddServiceEndpoint(typeof(IMyService), tcpbinding, "");
svh.Open(); 
```

# c++ - 派生类构造函数调用

> ID：13446176
> 
> 赞同：6
> 
> 时间：2012-11-19T00:35:08.673
> 
> 标签：c++, inheritance, constructor, derived-class, base-class

如果我有一个基类：

```
class Base{
  ...
}; 
```

和一个派生类

```
class Derived : public Base{
  ...
} 
```

这个派生类总是调用基类的默认构造函数吗？即不带参数的构造函数？例如，如果我为基类定义了一个构造函数：

```
Base(int newValue); 
```

但我没有定义默认构造函数（无参数构造函数）：

```
Base(); 
```

（我知道这只是一个声明而不是定义）我得到一个错误，直到我定义了不带参数的默认构造函数。这是因为基类的默认构造函数是由派生类调用的构造函数吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-19T00:36:40.087

是的，默认情况下会调用默认构造函数。您可以通过显式调用非默认构造函数来解决此问题：

```
class Derived : public Base{
    Derived() : Base(5) {}
}; 
```

这将调用带有参数的基构造函数，您不再需要在基类中声明默认构造函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-22T07:40:50.930

默认情况下，编译器提供三个默认值：

1.  默认（无参数）Ctor

2.  复制

3.  赋值运算符

如果您自己提供参数化 Ctor 或复制 Ctor，则编译器不会提供默认 Ctor，因此您必须明确编写 Default Ctor。

当我们创建一个 Derived 类对象时，它默认搜索 Base 的默认 Ctor，如果我们没有提供它，那么编译器会抛出错误。但是我们可以让 Derived 类 Ctor 来调用我们指定的 Base Tor。

```
class Base {
public:
Base(int x){}
};

class Derived {
public:
Derived():Base(5){}             //this will call Parameterized Base Ctor
Derived(int x):Base(x){}        //this will call Parameterized Base Ctor
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-22T07:09:47.007

调用默认构造函数的原因是，如果您创建了任何对象并且在该实例中您没有传递参数（您可能希望稍后在程序中初始化它们）。这是最常见的情况，这就是为什么需要调用默认构造函数的原因。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-10-06T06:10:58.470

是的，默认情况下会调用默认构造函数。但是，如果您的基类具有参数化构造函数，那么您可以通过两种方式调用非默认构造函数。：

```
option 1: by explicitly calling a non-default constructor:

class Derived : public Base{
Derived() : Base(5) {}
}; 
```

选项 2：

```
in base class constructor set the parameter default value to 0, so it will 
 act as default as well as paramterized constructor both

for example:

class base
{ public:
base(int m_a =0){} 
};

 class Derived
 { public:
 Derived(){}
}; 
```

上述方法对于参数化构造函数调用和默认构造函数调用都可以正常工作。

# php - PHP 数组和 mySql 插入

> ID：13446182
> 
> 赞同：-1
> 
> 时间：2012-11-19T00:35:39.413
> 
> 标签：php, mysql, arrays, foreach, mysqli

我正在发布一个看起来像这样的数组`4, 6, 7`

不过，我无法将这些值中的每一个插入到 sql 表中。

这是我到目前为止所拥有的...

```
$a = array($_POST['newsletterArray']);
$mything = 32;

$values = array();
foreach($a as $key => $value) {
    $values[] = "('{$mything}', '{$value}')";
}
if(sizeof($values)) {
    $query = "INSERT INTO images (news_event_id, newsletter_id) VALUES ".implode(',', $values);
    $result = $mysqli->query($query);
} 
```

此代码插入数组中的第一条记录，但不插入任何后续记录。

如果我`$_POST['newsletterArray']`用它代替`4, 6, 7`它可以正常工作，所以这似乎就是问题所在。

`newsletterArray`是一个文本输入，如果这有帮助的话。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T01:16:33.513

您在这里没有关联数组。从您写的内容来看，您的 $a 只是这样的列表

```
a = array(4,6,7); 
```

所以你需要在前面这样对待它

```
foreach($a as $value) {
    $values[] = "('{$mything}', '{$value}')";
} 
```

这将完成工作

# php - 返回用户最佳分数附近的结果页面

> ID：13446183
> 
> 赞同：0
> 
> 时间：2012-11-19T00:35:52.103
> 
> 标签：php, mysql

我目前有一个 MySQL 表设置，它只保存用户的最佳分数。如果他们获得更好的分数，则更新之前的分数。我还想要一个 24 小时排行榜，它只显示最近... 24 小时内发布的分数。

想到两个选择：

1) 每个排行榜有 2 个单独的表格。一个“最佳分数”排行榜，每个用户只保存 1 个分数，一个“24 小时”排行榜，每个用户保存 1 个分数并带有时间戳。这意味着每次提交分数时都需要将其发送到 2 个表而不是 1 个，但与下一个选项相比，数据占用空间将是最小的。

2) 有 1 个表，允许为每个用户发布重复分数，为分数加上时间戳，然后简单地用我需要的数据（总体最佳分数、24 小时内的分数等）查询巨大的分数表。

有什么想法/建议吗？这是我第一次处理 PHP/MySQL，所以我不确定在设计/效率方面最好的方法是什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T00:42:27.183

对于规范化数据库，您应该只有 1 个表用于所有分数。您应该只插入，而不是更新或删除。

然后，例如，如果您想找到最高分，您可以`MAX`在查询中应用 a。

如果您想查找过去 24 小时内的分数，可以将其添加到您的`WHERE`子句中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T00:53:22.493

我建议只用一张表来保存最好的分数。

有两个表来解决您的问题的一些缺点是：

*   要呈现信息，您可能需要表之间的连接（性能不如规范化表）
*   代码的可读性和可维护性应该较差。
*   为了保持一定的一致性，您应该使用事务来更新两者。

仅使用一张表，您应该在将在查询中使用的字段上创建索引以显示 24 排行榜。即：候选索引将是用于 WHERE 子句的时间戳。

# networking - 贝宝 IPN 监听器。我给贝宝发布的网址是什么？

> ID：13446184
> 
> 赞同：0
> 
> 时间：2012-11-19T00:36:03.363
> 
> 标签：networking, paypal

嘿，我在 Windows 7 上运行 wamp 服务器，我通过 at&t 上网。根据谷歌的说法，问题是我几乎每天都有一个新的 IP 地址。有没有办法可以设置我的本地网络，为我的 wamp 服务器提供一个真正的永久 IP 地址并允许贝宝发布给我的听众？它是一个 2wire 网关路由器。任何帮助都会很棒，这是一个学校项目，所以我对这一切都很陌生。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T02:30:51.803

不可以。您需要向 ISP 支付静态 IP 费用。除此之外，您需要在其他地方托管您的网站（获得托管服务提供商，它们可能相当便宜）。或者，您可以使用 no-ip 或 dyndns 将动态 ip 转换为固定主机名。但是我不会这样做，因为通常会有一个小的更新延迟，这对金融交易是有害的。– 克里斯 11 月 19 日 0:38 谢谢克里斯，这至少给了我选择

# php - 等效于 javascript 中的特定 php preg_replace

> ID：13446185
> 
> 赞同：-2
> 
> 时间：2012-11-19T00:36:10.237
> 
> 标签：php, javascript, preg-replace

JS中这个特定的php preg替换是否有等价物？

```
preg_replace('/[\n]{2,}/', "\n", "Hi,\nHow are you?\n\n\nI am just testing"); 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T00:38:09.410

基本相同，但您必须提供`g`标志：

```
var theString = "Hi,\nHow are you?\n\n\nI am just testing";

theString = theString.replace(/\n{2,}/g, '\n'); 
```

# php - codeigniter 路由（简单的博客示例）

> ID：13446189
> 
> 赞同：0
> 
> 时间：2012-11-19T00:36:51.940
> 
> 标签：php, codeigniter

我试图弄清楚 codeginter 框架并遵循他们的简单博客教程。

目前我收到“找不到对象！...错误 403”消息，这就是我所做的：

*   在我的 httdocs 中，我放置了文件夹“blogCI/CodeIgniter [...]”
*   在控制器里面我有 blog.php 文件

blog.php 如下（用php标签包围）：

```
class Blog extends CI_Controller{
function Blog()
{ 
echo "Blog constructor";
}
} 
```

我启动了 localhost 服务器（XAMPP），可以看到 xampp 的页面，但是我似乎无法访问我自己的页面并使其打印“博客构造函数”

```
"http://localhost/blogCI/CodeIgniter/index.php/blog/index"
"http://localhost/blogCI/CodeIgniter/index.php/blog.php/index"
"http://localhost/blogCI/CodeIgniter/blog.php/index" 
```

...以及许多其他组合链接。

我可以让我的页面显示消息的唯一方法，如果在 config/router 我会让 blog.php 成为默认控制器，但这不是我想要的。

有没有人遇到过这个？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T03:17:44.387

我认为您需要检查 CI 项目的文件权限

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T00:44:22.013

您需要在博客控制器中创建索引功能。此外，如果您需要使用 __construct 的构造函数，则不应使用旧的构造函数方法。

```
class Blog extends CI_Controller
{
    function __construct()
    {
        //do constructor stuff
    }

    function index()
    { 
        echo "Blog index";
    }
} 
```

然后访问

```
http://localhost/blogCI/CodeIgniter/index.php/blog 
```

# jquery - 如何从 jQuery 下载 excel 获取 ajax 请求

> ID：13446190
> 
> 赞同：2
> 
> 时间：2012-11-19T00:36:55.727
> 
> 标签：jquery, ajax, spring, excel, spring-mvc

我有一个提供 excel 文件的 spring MVC 视图，但是，我现在修改了该过程，以便用户获得一个模式框，他们可以在下载 excel 之前在其中选择一些选项。这些选定的选项被发送到视图。

我的请求看起来像这样

```
$.get("downloadExcel", {  
    'foo': 'bar'
}); 
```

当提出该请求时，我希望文件被下载，但是，这并没有发生。即使来自上述请求的响应标头是：

```
Cache-Control:private, must-revalidate
Content-disposition:attachment; filename=filename.xls
Content-Language:en-US
Content-Type:application/vnd.ms-excel; charset=ISO-8859-1
Pragma:private
Server:Jetty(6.1.14)
Transfer-Encoding:chunked 
```

**注意**：当我删除对话框时一切正常，因此请求不再是 ajax 请求。

**问题**

有没有办法通过ajax请求获取excel文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T00:42:34.580

您不能使用 Ajax 响应来执行此操作。您需要重定向浏览器或在页面中呈现隐藏的 iFrame 以启动下载。

# javascript - 如何在 Javascript 中替换部分 URL 查询字符串？

> ID：13446196
> 
> 赞同：0
> 
> 时间：2012-11-19T00:37:38.853
> 
> 标签：javascript

当我提交表单时，它会将值附加到查询字符串，例如`page.html?q=value&z=value`等。我希望删除附加到查询字符串的值的一部分，例如`page.html?q=value+OR+text%3Avalue&z=value`。我想替换的值是`+OR+text%3A(value)`查询字符串看起来像`page.html?q=value&z=value`. 我的代码如下：

```
var testurl = document.URL;
var re = /[a-zA-Z\/:_\.]+\?q=[^&]+&[a-z]+\=[a-z]+/;
var decodeurl = unescape(testurl);
if(decodeurl.match(re)) {
  testurl = testurl.replace(/\+OR\+text:[a-zA-Z0-9]/,'');
  window.location.href = testurl; 
```

它似乎没有工作，因为它似乎在某种无限循环中发送执行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T00:46:43.037

尝试。

```
testurl = testurl.replace(\+OR\+.*\&,'\&'); 
```

# javascript - Date 构造函数中的奇怪行为

> ID：13446199
> 
> 赞同：-1
> 
> 时间：2012-11-19T00:38:18.883
> 
> 标签：javascript

这是我的 Javascript 控制台的一小段摘录：

```
> x
"Dec 16, 2012 03:40 PM"
> typeof(x)
"string"

> new Date(x)
Invalid Date

> new Date("Dec 16, 2012 03:40 PM")    
Sun Dec 16 2012 15:40:00 GMT-0800 (PST) 
```

我很困惑为什么`new Date(x)`不起作用，而如果我直接传递相同的字符串，它就可以正常工作。有人知道吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T00:51:49.713

我找到了答案。

看来我的变量有一些奇异的空格，每次我从控制台复制字符串时，这些空格都会被删除。

`new Date(x.replace(/\s+/, ' '))`工作。

# nginx - 清理 nginx default.conf 文件

> ID：13446202
> 
> 赞同：0
> 
> 时间：2012-11-19T00:38:37.930
> 
> 标签：nginx

这是我的配置的一部分：

```
location ~ \.php$ {
    fastcgi_split_path_info ^(.+\.php)(/.*)$;
    fastcgi_pass backend;

    fastcgi_index  index.php;
    fastcgi_param  SCRIPT_FILENAME  /home/s/public_html$fastcgi_script_name;
    include fastcgi_params;
    fastcgi_param  QUERY_STRING     $query_string;
    fastcgi_param  REQUEST_METHOD   $request_method;

    fastcgi_param  CONTENT_TYPE     $content_type;
    fastcgi_param  CONTENT_LENGTH   $content_length;
    fastcgi_intercept_errors        on;
    fastcgi_ignore_client_abort     off;
    fastcgi_connect_timeout 60;
    fastcgi_send_timeout 60;
    fastcgi_read_timeout 60;
    fastcgi_buffer_size 128k;
    fastcgi_buffers 4 256k;
    fastcgi_busy_buffers_size 256k;
    fastcgi_temp_file_write_size 256k;
} 
```

我有多个正在运行的子域，我创建的每个子域都必须复制/粘贴这一大块代码。有什么办法可以使这个可重复使用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T14:28:38.457

Fixed by putting everything except fastcgi_pass and SCRIPT_FILENAME in a separate configuration file.

# ruby-on-rails - 如何使用 ruby 的 find 方法通过名字和中间名的第一个字母来查找人

> ID：13446203
> 
> 赞同：2
> 
> 时间：2012-11-19T00:38:44.527
> 
> 标签：ruby-on-rails, ruby, activerecord

我有 Ruby on Rails 应用程序，它有一个映射到 People 表的 Person 模型。该表包括 first_name、middle_name 和 last_name，如下所示：

```
John Q. Doe
John H. Doe
Jane M. Doe
Jim R. Doe, Jr.
Jack Timothy Doe 
```

现在，当我的输入是特定名称派生的缩写时，我需要对表执行查找。缩写形式如下：

*   名字的第一个首字母后跟一个空格
*   中间名的首字母后跟一个空格（如果有中间名）
*   全名

例如：

```
find_by_abbreviated_name("J Q Doe") => would find the John Q. Doe record
find_by_abbreviated_name("J T Doe") => would find the Jack Timothy Doe record
find_by_abbreviated_name("J R Doe, Jr.") => Jim R Doe, Jr. 
```

Ruby 中是否有一种巧妙的方法可以使用名字和中间名的第一个字母以及完整的姓氏进行查找。我希望我能想出一种方法来做到这一点，这样我就不必在 Person 表中添加另一个字段。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T01:09:31.340

所以我认为你必须处理的问题是输入的格式会有所不同......除非你能保证输入元素。如果 middle 是可选的，并且 last 可能有多个标记，那么您有一个挑战，如果它作为单个字符串传递，您将无法可靠地解析：

```
John Doe Jr
John Doe, Jr.
John Quentin Doe
John Doe Worthington-Smythe 
```

（许多姓氏有多个部分等）

因此，您可以通过提供不同的输入字段、与用户确认模棱两可的情况或根据某些规则或常见情况尝试几种替代方案来处理此问题。所以让我们等待解析部分并假设您有不同的输入格式正确（例如大写的单个字符）：

```
def find_by_abbreviated_name(fist_init, middle_init, last_name)
  if middle_init.blank?
    People.where("first LIKE ? AND middle LIKE ? and LAST like ?", "#{first_init}%", "#{middle_init}%", "#{last_name}%")
  else
    People.where("first LIKE ? AND LAST LIKE ?", "#{first_init}%", "#{last_name}%")
  end
end 
```

这将导致 SQL 使用 LIKE 运算符，这是一个部分匹配 - 这`%`是一个 SQL 通配符，类似于`*`文件名匹配或正则`.*`表达式。

抱歉，我的前三个尝试有错误。我现在正在检查是否有办法更好地使用通配符......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T07:18:41.140

**这个问题是使用字符串排名算法**的理想选择！

看看[这个](http://static.railstips.org/orderedlist/demos/quicksilverjs/jquery.html)使用 Jquery / Prototype 实现的 Quicksilver 算法。

基本上，就像其他人已经提到的那样，这样做很痛苦，因为您不能总是考虑输入数据的格式。

我不相信有一个活跃的 gem 或 ruby​​ 端口，但它相当简单。

在 Rails 应用程序中实现这一点意味着

1.  获取所有人的 id 和串联名称
2.  在该数组上运行算法
3.  根据排序数组中的 id 获取前 1/3/n 行。

我个人避免过于频繁地“构建”查询，AR 作为 ORM 对我来说还不够强大。但是，如果您要走那条路，则绝对应该检查[Squeel gem](https://github.com/ernie/squeel)失败，其中 AREL 是必须的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-19T00:57:51.950

没有光滑的 Ruby 方式。您只需要构建一个查询。像这样的东西应该工作：

```
def self.find_by_abbreviated_name(name)
  if name[3].blank? && name.size >= 5 # Check if there's a middle initial
    where("first_name like ? and middle_name like ? and last_name = ?", "#{name[0]}%", "#{name[2]}%", name[4..-1])
  else # No middle initial
    where("first_name like ? and last_name = ?", "#{name[0]}%", name[2..-1])
  end
end 
```

解释：

仅当字符串的格式始终相同时，名称字符串的“技巧”才有效。`name[0]`给出字符串的第一个字符，`name[2]`给出第三个字符`name[4..-1]`并将第五个字符返回到字符串的末尾。

我认为该`where`条款本身非常简单。要仅根据第一个字符查找记录，您可以使用: `.where('field_name like ?', "#{query}%")`，其中问号确实是替换值的占位符。

编辑：

对于省略中间首字母的情况，我更新了我的答案。

# javascript - 使用会话 cookie 使表单的确认页面 URL 不可共享

> ID：13446206
> 
> 赞同：1
> 
> 时间：2012-11-19T00:39:04.760
> 
> 标签：javascript, session-cookies

我有一个名为 form.html 的表单，当用户提交它时，它会跟随到 comformation.html。

但是，我不希望用户能够获取 comfirmation.html 页面 URL 并共享它（例如，推特它）

这可以通过在 form.html 中设置一个会话然后在 comfirmation.html 页面上进行某种检查来查看它是否存在来实现吗？

因此，如果其他人直接单击指向 comfirmation.html 的链接，那么他/她将被重定向到表单。

我认为这是可能的，因为我在谷歌搜索时看到了一些例子。但是我还没有看到会话检查重定向到另一个页面的任何示例（或者如果会话匹配，则什么也不做）。

谢谢，

劳伦斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T00:51:09.877

如果在 Confirmation.html 中添加这样的代码怎么办？

```
var prevStage = "http://mysite.com/form.html";
if(prevStage != document.referrer) {
    window.location.href = prevStage;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T01:04:43.073

我认为你可以做到这一点...

```
<html>
<head>
<script>

/* getUrlVars function from http://papermashup.com/read-url-get-variables-withjavascript/
*/
function getUrlVars() 
{
    var vars = {};
    var parts = window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi, function(m,key,value) {
        vars[key] = value;
    });
    return vars;
}

/*
* getCookie and checkCookie function 
* credit http://www.w3schools.com/js/js_cookies.asp
*/

function getCookie(c_name)
{
    var i,x,y,ARRcookies=document.cookie.split(";");
    for (i=0;i<ARRcookies.length;i++)
    {
        x=ARRcookies[i].substr(0,ARRcookies[i].indexOf("="));
        y=ARRcookies[i].substr(ARRcookies[i].indexOf("=")+1);
        x=x.replace(/^\s+|\s+$/g,"");
        if (x==c_name)
            {
                return unescape(y);
            }
    }
}

function checkCookie()
{
    var getConfirmationID = getUrlVars('confirmationid'); 
    var confirmation =getCookie(getConfirmationID);
    if (confirmation!=null && confirmation!="")
    {
        alert("Page expired, redirecting....");
        window.location = "/originalForm.html";

    }
    else
    {
        /*
        * show the confirmation
        */
        document.getElementById('confirmationdata').innerHTML = '<p>'+confirmation+'</p>';

    }

  }
}
</script>
</head>
<body onload="checkCookie()">
    <div id='confirmationdata'></div>
</body>
</html> 
```

# zooming - Android浏览器 - 防止背景双击（点击）的缩放效果

> ID：13446208
> 
> 赞同：0
> 
> 时间：2012-11-19T00:39:32.717
> 
> 标签：zooming, double-click, android-browser

在我的移动网页中，我使用

```
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1, user-scalable=0" /> 
```

但是在 Android 浏览器中，当我双击背景时，屏幕仍会尝试缩放（触发某种气泡效果，会在很短的时间内放大，然后返回正常大小）。

有什么办法可以防止这种情况发生吗？由于网页是游戏，我只需要禁用所有缩放。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T02:13:55.653

尝试将 user-scalable 设置为*no*而不是*0*：

```
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" /> 
```

# ios - ios - 应该在 NSUrlConnection 的返回块中使用 UIAlertView 吗？

> ID：13446215
> 
> 赞同：1
> 
> 时间：2012-11-19T00:40:06.817
> 
> 标签：ios, ios5, nsurlconnection, uialertview

当我在 NSUrlConnection 的返回块中使用 UIAlertView 时，会发生一些罕见的崩溃。我是否不允许在这样的异步线程中使用 UIAlertView ？

大多数时候，它似乎工作正常。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T04:21:43.210

所有与 UI 相关的代码都需要在主线程上工作。

当我在另一个线程上显示 alertView 时，我遇到了类似的崩溃。

您需要使用`dispatch_async`或显示 alertView `performSelectorOnMainThread`。

```
 dispatch_async(dispatch_get_main_queue(), ^{

          UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Title" 
                    message:@"Message" 
                delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil];

          [alert show];
       }); 
```

**或者**

```
 UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Title" 
                    message:@"Message" 
                delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil];
         [alert performSelectorOnMainThread:@selector(show) withObject:nil waitUntillDone:NO]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T01:18:37.407

我认为您只能在主线程上使用 UIAlertView 。`performSelectorOnMainThread:<#(SEL)#> withObject:<#(id)#> waitUntilDone:<#(BOOL)#>`在您的返回块中使用。

# crystal-reports - 从 Crystal Reports 获取组值

> ID：13446217
> 
> 赞同：0
> 
> 时间：2012-11-19T00:40:41.073
> 
> 标签：crystal-reports, report

我有一个按类别分组的水晶报表。这些类别来自数据库，但为了论证，这些类别是“固定的”，并被标记为 AG。对于每个组，我有几个该组的 SUMS 和一个 COUNT 组内的项目。所有数据都按原样显示，总和和计数都很好。

因为我知道类别（AG），所以我想做的是找到每个类别的每个 SUM 和 COUNT 的字段，并将它们放在报表页眉或页脚的表格中，没关系，充当类别的摘要，如果你愿意的话。

因此，例如，如果类别 A 的计数为 5，总和为 100,000，我想访问这两项，在我的页眉/页脚中找到类别 A 标签所在的位置，并在那里填写这些值。

我怎样才能在水晶中做到这一点？我在想我可以使用组名称公式（例如“SumOfItemsInA”）按类别值命名组字段，并将某种类型的逻辑放在我的页眉/页脚中以查找 SumOfItemsInA 字段 - 只是不知道确切这是如何在水晶中完成的。有什么建议么？或者，还有更好的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T09:25:55.477

您可以使用交叉表来执行此操作。使用公式/运行总计会使您的报告变得不那么灵活并且可能会中断。

# python - 库或数据库连接

> ID：13446218
> 
> 赞同：0
> 
> 时间：2012-11-19T00:40:48.390
> 
> 标签：python, database, concatenation, python-3.2

我正在编写代码，首先将两个 .txt 文件读入一个程序，然后我必须合并这两个 .txt 文件并使用生成的文件执行多个任务。

到目前为止，我可以读取文件并将它们分配给变量，并且可以分别打印这两个库，但是我不知道如何组合这些文件。

到目前为止，我编写的代码如下所示：

```
def ReadAndMerge():
    library1=input("Enter 1st filename to read and merge:")
    library2=input("Enter 2nd filename to read and merge:")
    namelibrary1= open(library1, 'r')
    namelibrary2= open(library2, 'r')
    library1contents=namelibrary1.read()
    library2contents=namelibrary2.read()
    print(library1contents)
    print(library2contents)
    combinedlibraries=(library1, 'a')
    # ^ this didnt work, but it was what i have tried so far
    combinedlibraries.write(library2)
    print(combinedlibraries)
    return

ReadAndMerge() 
```

我尝试将库附加到另一个库，但 Python 似乎不喜欢我正在做的事情。

库 1 如下所示：

```
Bud Abbott 51 92.3
Mary Boyd 52 91.4
Hillary Clinton 50 82.1 
```

库 2 如下所示：

```
Don Adams 51 90.4
Jill Carney 53 76.4
Randy Newman 50 41.2 
```

有谁知道结合这两个库的方法？

这样当我打印组合库时，它看起来像

```
Bud Abbott 51 92.3
Mary Boyd 52 91.4
Hillary Clinton 50 82.1
Don Adams 51 90.4
Jill Carney 53 76.4
Randy Newman 50 41.2 
```

这些都是简单的库——如果有人能指出一种方法来测试可能超过 50 个名称的更大的库并将这两个库结合起来，那就太好了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T02:21:42.377

正如@PedroRomano 评论的那样，您的问题的一部分似乎是您在`open`您说不起作用的行中错过了一个呼叫。但是，后面的代码仍然不能正常工作。

我还认为覆盖您的一个起始数据文件可能是一个坏主意。它使您的代码不再具有幂等性，因此多次运行它会继续产生副作用。

这是我的建议：

```
def ReadAndMerge():
    library1filename = input("Enter 1st filename to read and merge:")
    with open(library1filename, 'r') as library1:
        library1contents = library1.read()

    library2filename = input("Enter 2nd filename to read and merge:")
    with open(library2, 'r') as library2:
        library2contents = namelibrary2.read()

    print(library1contents)
    print(library2contents)

    combined_contents = library1contents + library2contents  # concatenate text

    print(combined_contents)

    combined_filename = "combined.txt"    # ask user for name here?
    with open(combined_filename, "w") as combined_file:
        combined_file.write(combined_contents) 
```

这些`with`语句负责在您完成文件后关闭文件（这在您编写时尤其重要）。此外，它为合并的数据使用特定的文件名，而不是添加到源文件之一。

不过，您可能要考虑的一个问题是，您是否真的需要将组合数据集写入文件。如果您只是要重新打开该文件并再次读取数据，则可以跳过中间步骤并直接使用组合数据。`return combined_contents`如果这是您想要的，您可以替换上面代码的最后三行。

最后，与您的实际问题几乎无关的一点：将您的数据称为“库”是一个坏主意。该词在计算机编程中具有非常特定的含义（即：您从项目外部加载的软件），并且使用它来引用您的数据会令人困惑。

# java - 通过其实例变量之一对对象的 ArrayList 进行排序

> ID：13446228
> 
> 赞同：0
> 
> 时间：2012-11-19T00:41:53.677
> 
> 标签：java, arraylist

你好，

我有一个对象（团队）的 ArrayList。他们是足球队，我想通过他们的观点对他们进行分类。显然我完全知道 ArrayLists 是按照它们插入的顺序排序的。

但是我有一个 TEAM 类，其中包含 gamesWon、gamesLost、gamesTied 和基于比赛结果的积分。

我已经准备好了一切，但我认为通过它的点来整理一个 ArrayList 将是一个很酷的功能。

我已经在线阅读了 Collections.sort(myArrayList) ，但是这是基于一种类型的变量进行排序的，并且由于我在 ArrayList 中有对象，因此我想对其进行排序。

谢谢你。

马可

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T00:46:44.207

您应该[`Comparator`](http://docs.oracle.com/javase/6/docs/api/java/util/Comparator.html)为此定义一个。

```
public class PointsBasedTeamComparator implements Comparator<Team> {
    public int compare(Team t1, Team t2) {
        //return the result of points comparison of t1 and t2
    }
} 
```

并按如下方式使用

```
Collections.sort(teams, new PointsBasedTeamComparator()); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-19T00:44:47.047

1.  定义一个用您要检查的值`java.util.Comparator<Team>`实现的。`compareTo`

2.  使用接受`Comparator<Object>`. 它将使用`compareTo`您的方法`Comparator`，而不是`Team`（如果有的话）中定义的方法。

3.  享受！

# ruby - 在 Ruby 正则表达式中捕获可选单词

> ID：13446234
> 
> 赞同：0
> 
> 时间：2012-11-19T00:42:51.737
> 
> 标签：ruby, regex

可能会遇到以下两行文本：

> 约翰的新车
> 约翰的车

修饰符“new”是可选的。我认为这会起作用：

```
([a-zA-Z'\s]+)\s?(new)?\s?(car) 
```

根据 Rubular 的说法，对于第一种情况，这给出了`["John's new", "", "car"]`. 我正在寻找的是：

> 约翰的新车

```
["John's", "new", "car"] 
```

在这种情况下：

```
John's car

["John's", {}, "car"] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T00:47:19.857

```
([a-zA-Z'\s]+?)\s?(new)?\s?(car)
             ^ added 
```

您需要使第一个子组不贪心，它正在吃掉第二个子组的比赛。

```
>> /([a-zA-Z'\s]+?)\s?(new)?\s?(car)/.match "John's new car"
=> #<MatchData "John's new car" 1:"John's" 2:"new" 3:"car">

>> /([a-zA-Z'\s]+?)\s?(new)?\s?(car)/.match "John's car"
=> #<MatchData "John's car" 1:"John's" 2:nil 3:"car"> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-19T00:51:24.600

`\s`如果您希望单词*不*包含空格，则应从字符类中删除。

这有效：

```
([a-zA-Z']+)\s?(new)?\s?(car) 
```

[红色链接](http://rubular.com/r/kS9bYIYImp)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-19T07:27:35.863

> 是的，可能会遇到其他词。但我只会使用 ([a-zA-Z'\s]+)\s?(new|old|fast|slow)?\s?(car)

这不是一个好的计划，因为您可能有一个非常大的可选单词列表以及更新源代码的持续任务。

更好的解决方案是将可选单词放入 YAML 文件中，在运行时加载它，从中创建一个正则表达式，然后将其插入到正确位置的模式中。

为什么选择 YAML 格式？它对您来说很容易阅读，并且很容易被多种语言加载/解析。如果您愿意，可以使用文本平面文件。

为什么要创建一个正则表达式模式而不是循环遍历列表？因为如果操作正确，正则表达式会更快更准确。

以下是我的做法：

将其保存到名为“test.yaml”的 YAML 文件中：

```
---
- red
- blue
- green
- yellow
- fast
- slow
- old
- new 
```

将此保存到“test.rb”：

我是这样钓鱼的：

```
#!/usr/bin/env ruby

require 'pp'
require 'yaml'

adjectives = YAML.load_file('./test.yaml')
adjective_regex = /(?:\b#{ Regexp.union(adjectives).source }\b)/i
search_regex = /([a-z']+) \s+ (#{ adjective_regex }?) \s? (car)/ix

[
  "John's car",
  *adjectives.map{ |a| "John's #{ a } car" }
].each do |s|
  s[search_regex]

  pp [$1, $2.empty? ? {} : $2, $3]
end 
```

运行输出：

```
["John's", {}, "car"]
["John's", "red", "car"]
["John's", "blue", "car"]
["John's", "green", "car"]
["John's", "yellow", "car"]
["John's", "fast", "car"]
["John's", "slow", "car"]
["John's", "old", "car"]
["John's", "new", "car"] 
```

此时，维护应用程序不需要修改代码，而是修改数据。

现在，Perl 有一个名为[Regexp::Assemble](https://metacpan.org/module/Regexp%3a%3aAssemble)的模块，它对这种用途非常有用。它允许我们获取单词列表并生成一个非常有效的模式来处理搜索：

而不是一个看起来像的正则表达式`"red|blue|green|yellow|fast|slow|old|new"`，它看起来像：

```
(?-xism:(?:(?:(?:yel|s)lo|ne)w|(?:ol|re)d|green|blue|fast)) 
```

这是生成该模式的代码：

```
use Regexp::Assemble;

my $ra = Regexp::Assemble->new;
my @adjectives = qw[red blue green yellow fast slow old new];
foreach my $a (@adjectives) {
  $ra->add($a);
}

print $ra->re, "\n"; 
```

此示例不会创建更短的模式，但添加的单词越多，模式就越优化。它可以产生的东西非常惊人。重要的是，您可以轻松地使用代码生成列表，并使用它为 Ruby 解析器构建正则表达式。

# url - 请求删除 github 存储库

> ID：13446240
> 
> 赞同：0
> 
> 时间：2012-11-19T00:44:12.063
> 
> 标签：url, github, request, github-api

有没有我可以删除我的 github 存储库的 url？在删除页面中有一个带有我的令牌等的表单，但是我怎样才能创建一个 url 来删除它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T09:54:34.457

除了[手动删除过程](https://help.github.com/articles/deleting-a-repo)之外，似乎还有一个 API 可用。

正如“ [github v3 API - 删除/删除 repo](https://stackoverflow.com/q/8920696/6309) ”中提到的，这在 2012 年 1 月早些时候没有完全支持。现在可以支持它：
GitHub [API V3 提到](http://developer.github.com/v3/repos/#delete-a-repository)：

```
DELETE /repos/:owner/:repo 
```

# azure - 保护从多个远程站点访问 Azure 服务队列的建议

> ID：13446241
> 
> 赞同：0
> 
> 时间：2012-11-19T00:44:18.180
> 
> 标签：azure, queue, credentials, azureservicebus, accesscontrolservice

我正在使用 Azure 服务总线队列来存储消息并将消息转发到客户端应用程序的远程安装。

例如，我的方法是为每个远程站点设置一个队列，并为应用程序的每个实例配置它自己的队列名称；

```
mynamespace/London
mynamespace/Manchester 
```

我正在寻求有关如何保护客户端应用程序中的队列和凭据的建议。据我了解，每个命名空间都有一组凭据，因此客户端应用程序的每个实例都将具有相同的队列连接字符串。此外，似乎使用解密的连接字符串，调用有权创建/删除队列，而不仅仅是出列消息 - 我可以防止这种情况发生吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T06:36:14.020

您应该使用[SBAzTool](http://code.msdn.microsoft.com/windowsazure/Authorization-SBAzTool-6fd76d93)来保护您的服务总线队列。默认情况下，您可能使用“所有者”服务身份，但这在安全性方面并不是最佳的。使用 SBAzTool，您可以创建一个新的服务身份（假设每个远程站点 1 个）并授予对一个队列的**侦听**权限 + 对另一个队列的**发送**权限（这在存储和转发场景中是完美的）。

# php - 如何检查文档是否已在 MongoDB 中添加

> ID：13446246
> 
> 赞同：0
> 
> 时间：2012-11-19T00:44:43.447
> 
> 标签：php, mongodb

我有一组网址。

**添加新网址时，我想检查它们是否已添加，如果不是，则添加它。**（网址是唯一的）

```
 $db->url->find(array('url' => $linkurlcache));
 $db->url->insert(array('url' => $linkurlcache)); 
```

这是我尝试过的（非常糟糕）

```
$var = $db->url->find(array('url' => $linkurlcache))->limit(1);
foreach($var as $var1){if($var1['url'] == $linkurlcache){$j = 0;}else{$j = 1;}}
        if($j == 0){
            $db->url->insert(array('url' => $linkurlcache));
        }else{
                echo "exists";
        } 
```

* * *

我正在从 MySQL 迁移（使用 MySqlDb 类）：

```
$Db->where('url', $linkurlcache);
if($results = $Db->get('tbl_url')){echo "exists";}else{

        $insertData = array('url' => $linkurlcache);
        if ($Db->insert('tbl_url', $insertData)){echo "added";} 
        echo $linkurlcache;

}; 
```

* * *

我也在 stackoverflow 上查看了他们的文档（在 MongoDB.org 和 PHP.net 上），但我找不到解决方案。

所以你能帮我一个解决方案，或者一个聪明的解决方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T01:13:17.437

除了 JohnnyHK 关于使用`findOne()`来检查文档是否存在的建议之外，您还有其他一些选项，具体取决于您的文档结构：

1）如果`urls`每个文档存储一个，请使用[`upsert`](http://www.mongodb.org/display/DOCS/Updating#Updating-%7B%7Bupserts%7D%7D)，如果 url 不存在则插入，如果存在则更新现有文档。

2）如果您`urls`存储在文档中的数组中[`$addToSet`](http://docs.mongodb.org/manual/reference/operator/addToSet/)，则仅在数组中不存在该值时才使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T00:59:20.180

使用它会更清洁[`findOne`](http://php.net/manual/en/mongocollection.findone.php)：

```
$var = $db->url->findOne(array('url' => $linkurlcache));
if ($var == NULL) {
    $db->url->insert(array('url' => $linkurlcache));
}else{
    echo "exists";
} 
```

# terminal - 使用终端删除文件夹和文件

> ID：13446248
> 
> 赞同：1
> 
> 时间：2012-11-19T00:44:47.843
> 
> 标签：terminal, cygwin

我想通过powershell终端或命令提示符删除cygwin文件夹和其他一些文件夹，但我被拒绝访问我试图更改文件夹权限，但也被拒绝访问。

我已经尝试过

`Remove-Item C:\cygwin`
甚至
`Remove-Item -Recurse -Force C:\cygwin`

任何解决方案？有没有办法使用终端删除任何你不想找借口的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T00:51:25.710

尝试`del`*`(file/foldername)`*在命令提示符下输入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T17:48:26.743

“拒绝访问”类型错误通常是权限问题，因此请确保您运行终端的用户具有适当的权限（如果需要，以管理员身份运行）。

否则，要完全“不问任何问题”删除某些内容，您需要使用 CMD，因为使用 .NET 存在一些怪癖，这使得 PowerShell 在某些情况下无用。但是，我在 PowerShell 内部使用以下函数，该函数使用 CMD 删除*任何内容*。

```
function die ($arg1) {
    $isDir=(gi $arg1).psIscontainer
    $path="\\?\$((gi $arg1).fullname)"

    cmd.exe "/C del /f/s/q `"$path`""
    if($isDir){
        cmd.exe "/C rmdir /s/q `"$path`""
    } else{
        "Not a dir"
    }
} 
```

然后可以使用 调用它`die C:\MyEvilDir`。

# iphone - iOS 应用和 Windows 身份验证

> ID：13446254
> 
> 赞同：2
> 
> 时间：2012-11-19T00:45:11.950
> 
> 标签：iphone, ios, authentication, windows-authentication

我们有几个内部 iOS 应用程序将向使用 Windows 身份验证保护的 Web 服务发出数据请求。

查看一种被认为是验证来自应用程序的请求的最佳实践的方法。有没有办法可以从 iOS 使用 Windows 身份验证？

发现以下看起来像几个选项：

*   [http://developer.apple.com/library/ios/#featuredarticles/iPhoneConfigurationProfileRef/Introduction/Introduction.html](http://developer.apple.com/library/ios/#featuredarticles/iPhoneConfigurationProfileRef/Introduction/Introduction.html)

*   [https://www.centrify.com/mobile/free-mobile-device-security-management.asp](https://www.centrify.com/mobile/free-mobile-device-security-management.asp)

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T00:10:37.483

找到了一个用于编写 NTLM 身份验证请求的良好 Objective C 库：

[http://allseeing-i.com/ASIHTTPRequest/How-to-use#ntlm_authentication](http://allseeing-i.com/ASIHTTPRequest/How-to-use#ntlm_authentication)

能够成功地向经过 Windows 身份验证的 IIS 托管 Web 服务发出请求。

希望这对其他人有帮助:)

# perl - 如何使用 shell（awk、sed 等）删除文件中的前两列

> ID：13446255
> 
> 赞同：75
> 
> 时间：2012-11-19T00:45:52.697
> 
> 标签：perl, shell, awk, sed, cut

我有一个文件，每行有很多行有很多列（字段）用空白“”分隔每行中的列数不同我想删除前两列如何？

* * *

## 回答 #1

> 赞同：157
> 
> 时间：2012-11-19T00:48:21.497

你可以这样做`cut`：

```
cut -d " " -f 3- input_filename > output_filename 
```

**解释：**

*   `cut`: 调用 cut 命令
*   `-d " "`: 使用单个空格作为分隔符（`cut`默认使用 TAB）
*   `-f`: 指定要保留的字段
*   `3-`：以字段 3 开头的所有字段
*   `input_filename`: 使用这个文件作为输入
*   `> output_filename`：将输出写入此文件。

或者，您可以使用`awk`：

```
awk '{$1=""; $2=""; sub("  ", " "); print}' input_filename > output_filename 
```

**解释：**

*   `awk`: 调用 awk 命令
*   `$1=""; $2="";`: 将字段 1 和 2 设置为空字符串
*   `sub(...);`：清理输出字段，因为字段 1 和 2 仍将由“”分隔
*   `print`: 打印修改后的行
*   `input_filename > output_filename`: 同上。

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2013-02-05T19:18:29.030

这是使用 Awk 的一种相对容易理解的方法：

```
awk '{print substr($0, index($0, $3))}' 
```

这是一个没有模式的简单 awk 命令，因此`{}`对每个输入行都运行内部操作。

操作是简单地打印从第三个字段的位置开始的子字符串。

*   `$0`：整个输入行
*   `$3`: 第三场
*   `index(in, find)`: 返回`find`字符串中的位置`in`
*   `substr(string, start)`：返回从索引开始的子字符串`start`

如果您想使用不同的分隔符，例如逗号，您可以使用 -F 选项指定它：

```
awk -F"," '{print substr($0, index($0, $3))}' 
```

您还可以通过在中的操作之前指定模式来对输入行的子集进行操作`{}`。只有与模式匹配的行才会运行操作。

```
awk 'pattern{print substr($0, index($0, $3))}' 
```

其中模式可以是：

*   `/abcdef/`: 使用正则表达式，默认对 $0 进行操作。
*   `$1 ~ /abcdef/`: 对特定字段进行操作。
*   `$1 == blabla`: 使用字符串比较
*   `NR > 1`：使用记录/行号
*   `NF > 0`：使用字段/列号

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2014-07-07T01:13:19.633

感谢您发布问题。我还想添加对我有帮助的脚本。

```
awk '{ $1=""; print $0 }' file 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-11-19T01:34:41.713

您可以使用`sed`：

```
sed 's/^[^ ][^ ]* [^ ][^ ]* //' 
```

这会查找以一个或多个非空白、一个空白、另一组一个或多个非空白和另一个空白开头的行，并删除匹配的材料，即前两个字段。`[^ ][^ ]*`比等效但更明确的符号略短，`[^ ]\{1,\}`第二个可能会遇到 GNU 的问题`sed`（尽管如果您将`--posix`其用作选项，即使 GNU`sed`也无法搞砸）。OTOH，如果要重复的字符类更复杂，则编号符号会为简洁起见。很容易将其扩展为处理“空白或制表符”作为分隔符，或“多个空白”或“多个空白或制表符”。它也可以修改为在第一个字段之前处理可选的前导空格（或制表符）等。

对于`awk`和`cut`，请参阅[Sampson-Chen](https://stackoverflow.com/users/1741864/sampson-chen)的[回答](https://stackoverflow.com/a/13446273/15168)。还有其他方法可以编写`awk`脚本，但它们并不比给出的答案更好。请注意，如果您不希望将制表符视为分隔符，则可能需要显式设置字段分隔符 ( `-F" "`) ，或者字段之间可能有多个空格。`awk`POSIX 标准`cut`不支持字段之间的多个分隔符；GNU`cut`有一个有用但非标准的`-i`选项，允许在字段之间使用多个分隔符。

您也可以在纯 shell 中执行此操作：

```
while read junk1 junk2 residue
do echo "$residue"
done < in-file > out-file 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2014-07-07T02:09:52.167

只用外壳就可以了

```
while read A B C; do
echo "$C"
done < oldfile >newfile 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2014-12-10T09:17:46.497

perl:

```
perl -lane 'print join(' ',@F[2..$#F])' File 
```

awk:

```
awk '{$1=$2=""}1' File 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2017-12-20T19:13:03.160

使用 awk，并基于下面的一些选项，使用 for 循环会更灵活一些；有时我可能想删除前 9 列（例如，如果我执行“ls -lrt”），所以我将 2 更改为 9，就是这样：

`awk '{ for(i=0;i++<2;){$i=""}; print $0 }' your_file.txt`

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-11-19T07:14:05.560

这可能对您有用（GNU sed）：

```
sed -r 's/^([^ ]+ ){2}//' file 
```

或者对于由一个或多个空格分隔的列：

```
sed -r 's/^(\S+\s+){2}//' file 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-05-12T08:40:37.447

使用[脚本](https://github.com/holgerbrandl/kscript)

```
kscript 'lines.split().select(-1,-2).print()' file 
```

# r - ～的意思。（波浪号）参数？

> ID：13446256
> 
> 赞同：63
> 
> 时间：2012-11-19T00:45:59.697
> 
> 标签：r, syntax

R中参数的含义是什么`~.`？

例如`plot(~.,xyz..)`

我已经看到这个论点在各种情况下多次使用，并且由于很难在 google 上有意义地搜索符号，所以我几乎没有成功。

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2012-11-19T00:52:07.310

这是一个公式，用简写表示。尝试这个：

```
plot( mpg ~ cyl, data= mtcars ) 
```

左手是因变量，右手是自变量。很像 y = bx + c 意味着 y ~ x。

公式是 R 的基石之一，您需要了解它们才能有效地使用 R。最常见的是，公式用于各种建模，例如，您可以使用

```
lm( mpg ~ wt, data= mtcars ) 
```

...查看每加仑行驶里程如何取决于重量。看看`?formula`更多的解释。

点表示“数据中未使用的任何列”。谷歌“R 公式”以获取更多信息。

# javascript - 用于初始化私有变量的 Javascript 构造函数

> ID：13446258
> 
> 赞同：1
> 
> 时间：2012-11-19T00:46:07.140
> 
> 标签：javascript

好的，所以我使用下面的框架代码来创建一个 Javascript 库

```
var Device = (function(window, document, $) {
    function func_1(){
         return 1;
    }

    function func_2(){
        return 2;
    }

    var internalDevice = {
        func_1: func_1,
        func_2: func_2
    };
    return internalDevice; // expose functionality to the rest of the code
})(window, document, jQuery); 
```

本质上，我会这样称呼我的函数：`Device.func_1();`.

我希望添加一个构造函数，该构造函数将从一开始即初始化一些私有变量，即一旦创建对象，就不必进行任何额外的函数调用。

我该怎么做呢？！

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T01:15:18.930

可以试试这种方式吗？private_1 和 private_2 只能通过函数调用访问，而您可以使用 Device() 构造函数。

```
function Device(param1, param2) {
    var private_1= param1;
    var private_2= param2;

    this.func_1= function() {
        return private_1;                
    }

    this.func_2= function() {
        return private_2;            
    }
}

var myDevice = new Device(1, 2);
alert(myob.func_1()); 
```

或者可能是这样的：

```
var Device = (function(window, document) {
    var private_1;

    function init(param1) {
      private_1 = param1;
    }

    function func_1(){
         return private_1;
    }

    function func_2(){
        return 2;
    }

    var internalDevice = {
        func_1: func_1,
        func_2: func_2,
        init  : init
    };
    return internalDevice; // expose functionality to the rest of the code
})(window, document);

Device.init(10);
alert(Device.func_1()) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T12:38:43.947

我设法弄清楚了这一点，这就是我的做法：

```
var Device = (function(window, document, $) {
    var var_1 = 10,
    var_2 = 20,
    var_3;

    function init(){
         var_3 = 30;
    }

    function func_1(){
         return 1;
    }

    function func_2(){
         return 2;
    }

    var internalDevice = {
        init: init(),
        func_1: func_1,
        func_2: func_2
    };
    return internalDevice;
})(window, document, jQuery); 
```

因此，当您调用 时`Device.func_2();`，变量已经被初始化。你可以在这里看到一个活生生的例子：http: [//jsfiddle.net/CZjYH/11/](http://jsfiddle.net/CZjYH/11/)

我还将在函数内部实现 Amplify.JS 功能，`init`作为将变量保存到本地或会话存储的一种方式。

干杯。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T01:42:29.993

```
var Device = (function(window, document, $, undefined)
{
    return $.extend(function()
    {
        // constructor
    },
    {
        prototype:
        {
            func_1: function func_1()
            {
                return 1;
            },
            func_2: function func_1()
            {
                return 2;
            }
        }
    });
})
(window, window.document, jQuery); 
```

或者

```
var Device = (function(window, document, $, undefined)
{
    var DevicePrivate = function()
    {
        // constructor
    };

    DevicePrivate.prototype =
    {
        func_1: function()
        {
            return 1;
        },
        func_2: function()
        {
            return 2;
        }
    };

    return DevicePrivate;
})
(window, window.document, jQuery); 
```

# jquery - 使用 jQuery 使表格行可点击

> ID：13446263
> 
> 赞同：1
> 
> 时间：2012-11-19T00:47:00.010
> 
> 标签：jquery

在 ASP.NET 网页中，我有一个显示数据库查询结果的表。在同一页面中，我有一个向数据库添加一行并在表末尾显示该行的表单。我使用 jQuery ajax 将记录插入数据库，如果成功，则创建一个`<tr> <td> ... </td> </tr>`元素并使用 jQuery 将此元素附加到表中。这工作正常。现在我想让表格行可点击。我试过用 `$('#table-name tr').click(function () { alert ("hello"); });`

单击功能不适用于我使用表单添加的行。有什么解决方法吗？如何使所有行都可点击？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T00:49:56.167

`$('#table-name tr')`仅返回`<tr>`调用该选择器时存在的元素。如果您动态添加新行，则不会考虑它们。

jQuery 有特殊的语法来处理动态生成的元素：

```
$('#table-name').on('click', 'tr', function() {
    alert('Hello');
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T00:48:54.803

click 事件对这些元素不起作用的原因是事件处理程序只发出一次，在元素存在于 DOM 之前。

为了使将来添加的元素也存在单击事件，您应该使用[`on`](http://api.jquery.com/on/)，这将允许将处理程序分配给动态添加的元素。确保包含`'tr'`将创建一个委托函数来处理未来元素的事件。

```
$('#table-name tr').on('click', 'tr', function () { alert ("hello"); }); 
```

另一种选择是在将元素动态添加到页面之前将点击事件分配给元素。

```
success: function(results){
 var newRow = document.createElement("tr");
 //manipulate newRow with results
 $(newRow).click(function(){ alert("hello") });
 //append newRow
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-19T00:51:25.540

使用 jquery on 而不是单击。问题是单击事件仅在页面加载时附加。

```
$('#table-name').on('click', 'tr', function() {alert('hello');}); 
```

Jquery on 方法等待事件从子元素向上传播。

# vim - 用于 vim 的 HTML5 格式化程序/漂亮的打印机？

> ID：13446265
> 
> 赞同：3
> 
> 时间：2012-11-19T00:47:19.887
> 
> 标签：vim

在 Vim 中为 HTML5 获取文本格式/漂亮打印的最佳方法是什么？

我刚刚尝试了 HTML Tidy（来自 Ubuntu 12.04 repo），默认情况下它似乎无法识别 HTML5 标签，如 Header、Footer、Article、Section，并试图将它们丢弃。我没有看到明显的开关或配置设置来解决此问题。

有更好的选择吗？我很高兴能够批量修复压痕，除此之外的任何东西都是肉汁。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-22T21:11:41.207

您可能想看看为 Vim 安装面向 HTML5 的语法文件或插件。比如[othree 的这个](https://github.com/othree/html5.vim)。之后，您应该能够`gg=G`格式化您的 HTML。

当我们讨论这个主题时，您可能想要安装[emmet.vim](http://mattn.github.io/emmet-vim/)一个方便的花花公子 Zencoding 插件，用于 Vim，它可以更快地编写任何 HTML。

# php - 我将如何在 MySQL 中编写它？

> ID：13446269
> 
> 赞同：0
> 
> 时间：2012-11-19T00:47:45.903
> 
> 标签：php, mysql, arrays

我想搜索 MySQL 数据库，将列列表与数组进行比较。我将如何做到这一点，可能都在 MySQL 中？

这是我想在 PHP 中做的事情：

```
<?php
$array = array("a", "b", "c", "d");
// 'c' doesn't exist in the database
$result = $this->mysqli->query("Query");
// Result should be array("a", "b", "d")
?> 
```

我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T00:51:28.653

您可以使用[IN 子句](http://dev.mysql.com/doc/refman/5.0/en/comparison-operators.html#function_in)做到这一点。

```
SELECT * FROM <table> WHERE <col> IN <array> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T00:52:11.350

试试这个：

```
// The array
$array = array("a", "b", "c", "d");

// This takes the array and puts it into a string like "a,b,c,d"
$array_for_query = implode(',', $array);

$result = $this->mysqli->query("SELECT * FROM table WHERE the_letter IN ({$array_for_query})"); 
```

分别用您的表和列名替换`table`和。`the_letter`

# java - 如何在数组列表中索引数组？

> ID：13446271
> 
> 赞同：0
> 
> 时间：2012-11-19T00:48:12.000
> 
> 标签：java, arrays, arraylist, indexing

整件事是我有一个二维数组：

```
int[][] Key = {{1,0,1,0,1,0},{1,0,1,0,1,0},{1,0,1,0,1,0},{1,0,1,0,1,0},
                        {1,0,1,0,1,0},{1,0,1,0,1,0},{1,0,1,0,1,0},{1,0,1,0,1,0}}; 
```

将这个 2D 数组拆分为 8*1D 数组（每个块 1 个）需要什么。所以我定义了 8 个新的一维数组以及一个数组列表来放置所有这些数组：

```
 ArrayList<int[]> B_Blocks = new ArrayList<int[]>(); 

   int[] B0 = new int[Key[0].length];
   int[] B1 = new int[Key[0].length];
   int[] B2 = new int[Key[0].length];
   int[] B3 = new int[Key[0].length];
   int[] B4 = new int[Key[0].length];
   int[] B5 = new int[Key[0].length];
   int[] B6 = new int[Key[0].length];
   int[] B7 = new int[Key[0].length]; 
```

我需要的是某种方法来索引数组列表中的数组，例如我想将第一行值添加`Key`到第一个数组中`Arraylist`

PS arraylist 的全部意义在于稍后通过 forloops 获得更多操作的访问权限。任何帮助谢谢

我尝试使用以下嵌套的 for 循环来添加值：

```
for (int i =0;i<Key.length;i++) {
       for (int j =0;j<Key[0].length;j++) {
       B_Blocks.get(i)[j] = Key[i][j] ;
        } 
   } 
```

它运行但当我输出时值不一样：

```
for (int i =0;i<rightblock.length;i++) {
       for (int j =0;j<rightblockExp[0].length;j++) {
       System.out.print(B_Blocks.get(i)[j]);
        } System.out.print("\n");
   } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T01:04:03.463

如果要在指定索引处添加元素，可以使用[`add(index, elem)`](http://docs.oracle.com/javase/6/docs/api/java/util/List.html#add%28int,%20E%29)列表中的重载方法。

```
list.add(0, key[0][0]);
list.add(1, key[0][1]); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-01T12:23:41.243

或许我们应该回到最初的需求：

> 将这个 2D 数组拆分为 8*1D 数组需要什么（每个块 1 个）

和

> 我需要的是一种在数组列表中索引数组的方法

您可以像这样使用二维数组：

*   `Key[0]`会给你第一个子数组（='row'），`Key[1]`第二个，依此类推。
*   `Key[0][0]`将为您提供第一个子数组中的第一个元素，`Key[0][1]`第二个，依此类推。可以说，对元素的访问`Key[0][5]`也可以表述为

    ```
    int[] firstRow = Key[0];
    doSomethingWith(firstRow[5]); 
    ```

第一行让参考`firstRow`点指向`Key[0]`，即第一个子数组。`firstRow`并`Key[0]`指向同一个数组 - 当您声明时，您似乎认为该数组会被复制：

> 不..不如果我要把它们放回另一个数组中，为什么我要把它们放在一个列表中。

ArrayList 问题：

> PS arraylist 的全部意义在于稍后通过 forloops 获得更多操作的访问权限。任何帮助谢谢

如果您使用 ArrayLists 重新构建该结构，没有什么会变得更容易 - 除非您想分别向数组添加元素 ArrayLists。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T01:00:41.367

您可以使用 list.get(i) 访问 ArrayList 的元素。例如：

```
int[] array1 = B_Blocks.get(0); 
```

希望有帮助！

# ios - 尽管已初始化，应用程序委托变量仍返回 nil

> ID：13446274
> 
> 赞同：1
> 
> 时间：2012-11-19T00:48:44.250
> 
> 标签：ios

在`didFinishLaunchingWithOptions`App Delegate 中的方法中，一个字符串`myString`是用从`NSUserDefaults`（用 确认的`NSLog`）检索到的字符串初始化的。我在这个基于选项卡的项目中有多个视图控制器，除了一个之外，它们都可以正常访问应用程序委托变量。此视图控制器与其他视图控制器之间的唯一区别是它是 a`UIViewController`而不是 a `UITableViewController`（尽管后者继承了）。

在`UIViewController`我的初始化中：

```
- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        self.appDelegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];
        if (self.appDelegate.myString == nil)
            NSLog(@"nil");
        }
    return self;
} 
```

奇怪的部分：在`initWithNibName`方法中，`myString`（以及应用程序委托中的所有其他变量）是`nil`. 但是，当我在`viewDidAppear`方法中触发它时，它不是`nil`（并且我得到了正确的字符串）。此外，它`nil`也在`viewDidLoad`方法中返回。所以我尝试初始化然后检查字符串，但它仍然`self.appDelegate`返回。`viewDidLoad``nil`

我在某个地方出错了，但无法弄清楚。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T00:51:12.967

只是一个疏忽。我在从中检索变量之前初始化了视图控制器`NSUserDefaults`。

# mobile - 在 CLR/Mono 上分配一个经常调用的函数效率低吗？

> ID：13446275
> 
> 赞同：2
> 
> 时间：2012-11-19T00:48:48.913
> 
> 标签：mobile, memory-management, mono, clr, monogame

我现在正在玩 MonoGame，我正在研究 SpriteBatch.Draw() 方法。

在每秒可以调用数万次的方法内部，我看到以下内容：

```
public void Draw (Texture2D texture,
        Rectangle destinationRectangle,
        Rectangle? sourceRectangle,
        Color color,
        float rotation,
        Vector2 origin,
        SpriteEffects effect,
        float depth)
    {
        CheckValid(texture);

        DrawInternal(texture,
              new Vector4(destinationRectangle.X, //<-------------- Oh Noes! :O
                          destinationRectangle.Y,
                          destinationRectangle.Width,
                          destinationRectangle.Height),
              sourceRectangle,
              color,
              rotation,
              new Vector2(origin.X * ((float)destinationRectangle.Width (float)texture.Width), <-- Oh Noes!
                          origin.Y * ((float)destinationRectangle.Height / (float)texture.Height)),
              effect,
              depth);
    } 
```

似乎每 60 秒左右就会分配数千个新向量。

MonoGame 是一个用于（除其他外）移动开发的平台。我做了一些在 Dalvik 上运行的移动开发，以这种方式分配从来都不是一个好主意。在速度较慢的移动处理器上，需要收集的对象的堆积最终会导致 GC 运行并导致性能明显下降（在某些设备上高达 200 毫秒）。这引出了我的问题：

CLR/Mono GC 的运行方式或其他一些因素是否会阻止这种性能影响的发生，或者 MonoGame 是否在其最常调用的函数之一中做了不应该做的事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T00:57:18.930

[`Vector4`类型](http://msdn.microsoft.com/en-us/library/microsoft.xna.framework.vector4.aspx)不是一个类，它是一个结构。创建它的新实例不会在堆上创建一个对象，它会创建一个结构值。在这种情况下，值被压入堆栈以进行方法调用，因此它与将成员作为单独参数压入的工作基本相同。

# javascript - 在 javascript 中读/写 .ini

> ID：13446281
> 
> 赞同：-3
> 
> 时间：2012-11-19T00:50:34.433
> 
> 标签：javascript, html, ini

是否可以在 java-script 中读取/写入变量到 .ini 文件并将其保存到桌面等公共目录。请避免使用 php 的示例，因为我的 html 将在浏览器中本地运行，并且我希望能够访问创建的 .ini 文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T00:53:14.260

出于安全原因，您不能使用 Javascript 从浏览器写入桌面上的文件。

您可以将类似的状态保存到 .ini 文件中，保存到 cookie 或 HTML5 本地存储中，然后从未来的网页中检索该信息。

如果您描述了您实际尝试解决的问题，我们可以更好地建议可用的选项。

# java - 编写整数数组的递归排序算法

> ID：13446282
> 
> 赞同：3
> 
> 时间：2012-11-19T00:50:36.650
> 
> 标签：java, arrays, sorting, recursion

我正在尝试为整数数组编写递归排序算法。以下代码打印到控制台：3、5、2、1、1、2、6、7、8、10、20

应该对输出进行排序，但不知何故“它不起作用”。

```
public static void main(String[] args)
{
    int[] unsortedList = {20, 3, 1, 2, 1, 2, 6, 8, 10, 5, 7};
    duplexSelectionSort(unsortedList, 0, unsortedList.length-1);

    for (int i = 0; i < unsortedList.length; i++)
    {
        System.out.println(unsortedList[i]);
    }
}

public static void duplexSelectionSort(
    int[] unsortedNumbers,
    int startIndex,
    int stopIndex)
{
    int minimumIndex = 0;
    int maximumIndex = 0;

    if (startIndex < stopIndex)
    {
        int index = 0;
        while (index <= stopIndex)
        {
            if (unsortedNumbers[index] < unsortedNumbers[minimumIndex])
            {
                minimumIndex = index;
            }
            if (unsortedNumbers[index] > unsortedNumbers[maximumIndex])
            {
                maximumIndex = index;
            }
            index++;
        }
        swapEdges(unsortedNumbers, startIndex, stopIndex, minimumIndex, maximumIndex);
        duplexSelectionSort(unsortedNumbers, startIndex + 1, stopIndex - 1);
    }
}

public static void swapEdges(
    int[] listOfIntegers,
    int startIndex,
    int stopIndex,
    int minimumIndex,
    int maximumIndex)
{
    if ((minimumIndex == stopIndex) && (maximumIndex == startIndex))
    {
        swap(listOfIntegers, startIndex, stopIndex);
    }
    else
    {
        if (maximumIndex == startIndex)
        {
            swap(listOfIntegers, maximumIndex, stopIndex);
            swap(listOfIntegers, minimumIndex, startIndex);
        }
        else
        {
            swap(listOfIntegers, minimumIndex, startIndex);
            swap(listOfIntegers, maximumIndex, stopIndex);
        }
    }
}

public static void swap(int[] listOfIntegers,
    int index1,
    int index2)
{
    int savedElementAtIndex1 = listOfIntegers[index1];
    listOfIntegers[index1] = listOfIntegers[index2];
    listOfIntegers[index2] = savedElementAtIndex1;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T04:56:41.817

[归并排序](http://www.toves.org/books/java/ch20-sort/index.html)是一种众所周知的递归算法，您可以从中汲取灵感来实现自己的递归排序算法：

```
public void mergeSort(int[] data) {
    if(data.length <= 1) return;               // Base case: just 1 elt

    int[] a = new int[data.length / 2];        // Split array into two
    int[] b = new int[data.length - a.length]; //   halves, a and b
    for(int i = 0; i < data.length; i++) {
        if(i < a.length) a[i] = data[i];
        else             b[i - a.length] = data[i];
    }

    mergeSort(a);                              // Recursively sort first
    mergeSort(b);                              //   and second half.

    int ai = 0;                                // Merge halves: ai, bi
    int bi = 0;                                //   track position in
    while(ai + bi < data.length) {             //   in each half.
        if(bi >= b.length || (ai < a.length && a[ai] < b[bi])) {
            data[ai + bi] = a[ai]; // (copy element of first array over)
            ai++;
        } else {
            data[ai + bi] = b[bi]; // (copy element of second array over)
            bi++;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T01:07:43.517

在递归方法中初始化变量时，您需要记住，您正在通过数组的 stopIndex 切片处理 startIndex，而不是整个数组，并且您不应该触摸该切片之外的任何内容。

再看一下 duplexSelectionSort 方法中 index、minimumIndex 和 maximumIndex 的初始化。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-05T04:20:13.960

这是我尝试过的一种递归排序。希望这可以帮助。在与您的代码类似的行上，但我觉得不那么复杂。

```
public static void main(String[] args)
{
int [] array = {5,9,2,3,10,20,1,7};
int len = array.length-1;
sort(array, 0, len);
for(int i=0;i<=len;i++)
{
  System.out.println(array[i]);
}
}

public static void sort(int[] array, int start, int end)
{
if (start < end)
{
  sort(array, start+1, end);
  if(array[start]<=array[end])
  {
    sort(array, start, end-1);
  }
  else if(array[start]>array[end])
  {
    int temp = array[start];
    array[start] = array[end];
    array[end] = temp;
    sort(array, start, end-1);
  }
}
else if(start == end)
  return;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-06-12T05:42:33.073

您也可以使用选择排序方法。

应用递归样式是一个很好的算法。

```
public static int FindMinIndex(int[] data, int x, int y){

    int mini;

    if(x==y){
        mini=x;
    }

    else{
        int tempmini=FindMinIndex(data, x+1, y);
        if (data[tempmini]<data[x]){
            mini=tempmini;
        }
        else{
            mini=x;
        }
    }
    return mini;
}

//Do selection sort between data[x]~data[y]
public static void SelectionSort(int[] data, int x, int y){

    if (x==y){
        return;
    }

    else{
        int index=FindMinIndex(data, x, y);

        int temp=data[index];
        data[index]=data[x];
        data[x]=temp;

        SelectionSort(data,x+1,y);
    }

} 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-11-19T01:15:13.713

要从最小到最大对数组进行排序，请执行以下操作：

```
Arrays.sort(array); 
```

# jquery - 无效的必填字段和 Firefox 问题

> ID：13446286
> 
> 赞同：1
> 
> 时间：2012-11-19T00:51:12.180
> 
> 标签：jquery, forms, validation, firefox, show-hide

在下拉列表中使用 jQuery 来根据下拉选择显示/隐藏文本输入字段会导致 Firefox 出现奇怪的行为，在填充所有“必填”字段之前不允许提交表单，即使这些必填字段根据选择隐藏从下拉菜单中，或者可以说，它们实际上是不活动的。

Safari，只是忽略不可见的“必填”字段，只检查活动（可见）必填字段，如果填写了这些，则可以提交表单。

我试图搜索任何事件和可能的解决方案，但似乎没有找到。

例子：

```
<select id="theselect" name="something">
    <option value="1" selected>One</option>
    <option value="2">Two</option>
    <option value="3">Three</option>
</select>

<input type="text" name="one" required="required" class="show" />
<input type="text" name="two" required="" class="hide" />
<input type="text" name="three" required="required" class="hide" /> 
```

在上面的示例中，考虑到输入 2 和 3 是隐藏的，但是如果选择更改为 2 或 3，这将改变相应输入的状态/可见性，则 Firefox 会强制填充所有必需的。

有没有人经历过这个和/或知道如何使用 jQuery 有效地管理这个？提前感谢您对此的任何想法和帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T04:44:13.997

即使是“隐藏”的字段也会提交。因此，如果它们被标记为“必需”，它们将导致验证失败。规范对此非常清楚。

您可能希望将它们设置为不需要或在隐藏它们时将它们设置为禁用，这取决于您是否真的希望它们以未设置状态提交。

# c# - 将项目转变为面向对象

> ID：13446288
> 
> 赞同：0
> 
> 时间：2012-11-19T00:51:13.683
> 
> 标签：c#, oop

我在自己创建的二十一点游戏上工作，我希望它是面向对象的。

我第一次编码它时没有考虑到这一点，但我希望它被分成不同的类。我相信我需要将方法放在各种类中并适当地命名它们。问题是我该怎么做？

我认为这就像在每个方法前面都加上“public”一样简单，但它没有奏效。

我该怎么做呢？

如果你想要我的源代码，这里是：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace blackJack
{

/// <summary>
/// 'playerCards' will store the player's cards. The maximum of cards a player can hold is 11.
/// 'hitOrStand' asks the player if they want to hit or stand.
/// 
/// 'score' cardCounts the player's score for that round.
/// 'cardCount' increases so that the player can hold multiple cards in their hand.
/// 'scoreDealer' cardCounts the dealer's score for that round.
/// 
/// 'newCard' works to randomize the player's cards.
/// </summary>

class Program
{
    static Random newCard = new Random();
    static int score = 0, cardCount = 1, scoreDealer = 0;
    static string[] playerCards = new string[11];
    static string hitOrStand = "";

    /// <summary>
    /// MAIN METHOD
    /// 
    /// The Main method starts the game by executing 'Start()'
    /// </summary>

    static void Main(string[] args)
    {
        Start();
    }

    /// <summary>
    /// START METHOD
    /// 
    /// The Start method lets the player know that they are playing Blackjack.
    /// Then it deals the player two cards (because in Blackjack, you start with two cards).
    /// It tells the player what their score score is at that moment.
    /// Finally, it asks the player if they want to hit (continue and get a new card), or stand (stop) through the Game() method (which lies below this).
    /// </summary>

    static void Start()
    {
        scoreDealer = newCard.Next(15, 22);
        playerCards[0] = Deal();
        playerCards[1] = Deal();
        do
        {
            Console.WriteLine("Welcome! The dealer gives you " + playerCards[0] + " and " + playerCards[1] + ". \nScore: " + score + ".\nWould you like to hit or stand?");
            hitOrStand = Console.ReadLine().ToLower();
        } while (!hitOrStand.Equals("hit") && !hitOrStand.Equals("stand"));
        Game();
    }

    /// <summary>
    /// GAME METHOD
    /// 
    /// The Game method checks if the player did hit or if the player did stand.
    /// If the player did hit, that method (the Hit method) is executed.
    /// But if the player did stand, it checks if their score is larger than the dealer's AND if the score equals/less than 21.
    /// If the above statement is TRUE, it will congratulate, and reveal the dealer's score. Then it'll ask if the player wants to play again.
    /// 
    /// However, if the above is FALSE, it will tell the player that they lost, reveal the dealer's score, and ask if the player wants to play again.
    /// </summary>

    static void Game()
    {
        if (hitOrStand.Equals("hit"))
        {
            Hit();
        }
        else if (hitOrStand.Equals("stand"))
        {
            if (score > scoreDealer && score <= 21)
            {
                Console.WriteLine("\nCongratulations! You won! The dealer's score was " + scoreDealer + ".\nWould you like to play again? y/n");
                PlayAgain();
            }
            else if (score < scoreDealer)
            {
                Console.WriteLine("\nYou lost! The dealer's score was " + scoreDealer + ".\nWould you like to play again? y/n");
                PlayAgain();
            }

        }
        Console.ReadLine();
    }

    /// <summary>
    /// DEAL METHOD
    /// 
    /// The Deal method creates a random number between 1 and 14.
    /// Then that int switches and assigns a value to Card.
    /// Depending on its result, it will add to the amount on score.
    /// Lastly, it'll return the string Card.
    /// 
    /// Below, all the cards that are available can be viewed.
    /// </summary>

    static string Deal()
    {
        string Card = "";
        int cards = newCard.Next(1, 14);
        switch (cards)
        {
            case 1: Card = "2"; score += 2;
                break;
            case 2: Card = "3"; score += 3;
                break;
            case 3: Card = "4"; score += 4;
                break;
            case 4: Card = "5"; score += 5;
                break;
            case 5: Card = "6"; score += 6;
                break;
            case 6: Card = "7"; score += 7;
                break;
            case 7: Card = "8"; score += 8;
                break;
            case 8: Card = "9"; score += 9;
                break;
            case 9: Card = "10"; score += 10;
                break;
            case 10: Card = "Jack"; score += 10;
                break;
            case 11: Card = "Queen"; score += 10;
                break;
            case 12: Card = "King"; score += 10;
                break;
            case 13: Card = "Ace"; score += 11;
                break;
            default: Card = "2"; score += 2;
                break;
        }
        return Card;
    }

    /// <summary>
    /// HIT METHOD
    /// 
    /// The Hit method adds another card to the player's hand, as they demanded (when they decided to hit instead of stand).
    /// Then it checks if the player still holds an amount less than 21, got Blackjack (21), or Busted (received an amount over 21).
    /// 
    /// If the amount is less than 21, the player may continue, and they will be asked if they'd like to hit or stand.
    /// </summary>

    static void Hit()
    {
        cardCount += 1;
        playerCards[cardCount] = Deal();
        Console.WriteLine("\nYou were dealed a " + playerCards[cardCount] + ".\nYour new score is " + score + ".");
        if (score.Equals(21))
        {
            Console.WriteLine("\nBlackjack! Congratulations! The dealer's score was " + scoreDealer + ".\nWould you like to play again? y/n");
            PlayAgain();
        }
        else if (score > 21)
        {
            Console.WriteLine("\nYou busted, and lost. The dealer's score was " + scoreDealer + ".\nWould you like to play again? y/n");
            PlayAgain();
        }
        else if (score < 21)
        {
            do
            {
                Console.WriteLine("\nWould you like to hit or stand?");
                hitOrStand = Console.ReadLine().ToLower();
            } while (!hitOrStand.Equals("hit") && !hitOrStand.Equals("stand"));
            Game();
        }
    }

    /// <summary>
    /// PLAYAGAIN METHOD
    /// 
    /// This method simply asks the player if they want to play again, or not.
    /// If the player replies with a 'y', it will tell the player to press enter in order to restart the game.
    /// 
    /// If the player replies with an 'n', it will tell the player to press enter in order to close the game.
    /// </summary>

    static void PlayAgain()
    {
        string playAgain = "";
        do
        {
            playAgain = Console.ReadLine().ToLower();
        } while (!playAgain.Equals("y") && !playAgain.Equals("n"));
        if (playAgain.Equals("y"))
        {
            Console.WriteLine("\nPress Enter to play again.");
            Console.ReadLine();
            Console.Clear();
            scoreDealer = 0;
            cardCount = 1;
            score = 0;
            Start();
        }
        else if (playAgain.Equals("n"))
        {
            Console.WriteLine("\nThank you for playing. \nPress Enter to close the game.");
            Console.ReadLine();
            Environment.Exit(0);
        }

    }
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T01:08:38.663

从我的角度来看，“面向对象”一词的概念方法是用尽可能接近现实的观点来解决代码问题。

我的意思是，如果您必须创建汽车的行为，您将在一个类中封装与该“对象”相关的所有变量和函数，这样当您实例化它时，您实际上会创建计算机内部的`object`“汽车”，其反应方式与真实物体的反应方式相同。

类之间的层次结构来自相同的概念。我们知道汽车是交通工具，但你知道你不能创造交通工具，因为它是一个抽象的概念。所有车辆通用的变量和函数都应该在`abstract`该类中，其他所有汽车/自行车/卡车都从该类派生。

在纸牌游戏的情况下，每张纸牌都可以成为一个对象，其中包含对其视觉效果的引用。因此，您将获得一个`List<Card>`允许您轻松选择、删除或添加一个。桌子也可以是一个对象，它包含玩家的位置/id 以及卡片分发时的去向。

但是直接的“对象”方法并不总是可行的，因为在现实生活中，没有包含规则和概述游戏步骤的“游戏”对象之类的东西。但是，一旦您理解了 OO 编程的概念，您就会发现它基本上就是如何以及在何处放置变量和函数，以及多态性和干净的结构如何使代码更易于阅读和维护。

OO 编程不是一个容易理解的术语，当人们开始将哲学与它混在一起时，它就会无缘无故地变得更难。实际上，我给了一个 4 小时的课程作为对这个概念的介绍，所以不要指望在几分钟内掌握所有内容。一开始，试着把这些东西放在听起来最合乎逻辑的地方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T00:54:49.670

以下是基本步骤；

1) 右键单击​​项目/解决方案并选择 Add->Class 2)`Game`为游戏命名适当的类。3）将方法`Deal()`移到此类中并将它们声明为`Public Deal()`（或在适当时为私有，显然它不适用于Deal）。4）在你的主创建一个游戏实例`Game game = new Game();` 5）用点运算符调用方法，即`game.Deal();`处理游戏。

# r - 当 rbind-ing 一个 data.frame 本身不会创建精确的重复

> ID：13446289
> 
> 赞同：1
> 
> 时间：2012-11-19T00:51:13.603
> 
> 标签：r, dataframe

我有这个数据框结构

数据1：

```
 SNP   logp    Allele
rs2929  rs333003    4.46411719154375    T
rs3491  rs405831    4.46411719154375    G
rs1224  rs179639    4.44797917307381    A 
```

和 Data2 想象它是一样的（也只是为了测试 Data1）

当我做 ：

```
f1=read.table(data1, header=TRUE ,as.is=TRUE)
f3=rbind(f1,f1) 
```

我得到这个结果？？：

```
 SNP   logp    Allele
rs2929  rs333003    4.46411719154375    T
rs3491  rs405831    4.46411719154375    G
rs1224  rs179639    4.44797917307381    A
rs29291 rs333003    4.46411719154375    T
rs34911 rs405831    4.46411719154375    G
rs12241 rs179639    4.44797917307381    A 
```

如您所见，问题是 rs2929 应该被复制两次，而是 rs29291 注意字符串中的所有重复项都是 +"1"？那是错的！？我怎么能把它变成：

```
 SNP   logp    Allele
rs2929  rs333003    4.46411719154375    T
rs3491  rs405831    4.46411719154375    G
rs1224  rs179639    4.44797917307381    A
rs2929  rs333003    4.46411719154375    T
rs3491  rs405831    4.46411719154375    G
rs1224  rs179639    4.44797917307381    A 
```

因为那是真正的“合并”，我想加入 2 个文件。我知道这可能听起来很奇怪，因为我重复了值，但如果发生这种情况，这就是我想要的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T01:22:04.587

来自`?read.table`：

> 行名称 [...]

```
 If there is a header and the first row contains one fewer
      field than the number of columns, the first column in the
      input is used for the row names.  Otherwise if ‘row.names’ is
      missing, the rows are numbered. 
```

因此，在您的情况下，第一列用作行名，并且由于 R 要求行名始终是唯一的，因此`1`在您尝试创建重复项时会附加这些行名。

一种解决方案是让您在文件的左上角单元格中添加列名，或使用以下命令调用 read.table `row.names = NULL`：

```
f1 <- read.table(textConnection("

             SNP                logp    Allele
rs2929  rs333003    4.46411719154375         T
rs3491  rs405831    4.46411719154375         G
rs1224  rs179639    4.44797917307381         A   

"), header = TRUE, as.is = TRUE, row.names = NULL)

rbind(f1, f1)
#   row.names      SNP     logp Allele
# 1    rs2929 rs333003 4.464117      T
# 2    rs3491 rs405831 4.464117      G
# 3    rs1224 rs179639 4.447979      A
# 4    rs2929 rs333003 4.464117      T
# 5    rs3491 rs405831 4.464117      G
# 6    rs1224 rs179639 4.447979      A 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T01:23:22.233

您最左边的字符串（“rs2929”等）是行名。R 出于充分的理由希望对象中的名称是明确的，因此它正在重新分配一些名称。最简单的解决方案可能是不将此信息存储在行名中，而是存储在普通列中。

```
f1$rs <- rownames(f1)
rownames(f1) <- NULL
f1new <- rbind(f1,f1) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T01:24:28.047

您在第一列上缺少列标签意味着它们被解释为行标签，而不是数据。

看到这个：

```
 f1 <- structure(list(X = c("rs2929", "rs3491", "rs1224"), SNP = c("rs333003", 
   "rs405831", "rs179639"), logp = c(4.46411719154375, 4.46411719154375, 
   4.44797917307381), Allele = c("T", "G", "A")), .Names = c("X", 
   "SNP", "logp", "Allele"), class = "data.frame", row.names = c(NA, -3L))

 rbind(f1,f1) 
```

R 喜欢独特的行标签。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-19T22:44:34.343

所以我想出了我需要的这个功能：

```
merge_gwas("final.txt","file1.txt","file2.txt")

merge_gwas<-function (out,a1,a2){
f1=read.table(a1,header=T,as.is=TRUE)
f2=read.table(a2,header=T,as.is=TRUE)
f3<- rbind(f1,f2)
write.table(f3, out,quote = FALSE, sep="\t", row.names = FALSE)
} 
```

感谢大家

# php - 检查SELECT mysql php上的寄存器总和

> ID：13446296
> 
> 赞同：1
> 
> 时间：2012-11-19T00:51:35.237
> 
> 标签：php, mysql, sql

我有 2 张包含此信息的表格

制表符

```
SellId |      ItemId     
1      |        2      
2      |        3   
3      |        2     
4      |        3    
5      |        4 
```

tabitens（这个表有很多列，但我只放了 2 个作为示例）

```
ItenId |      ItemName     
2      |        Iten2      
3      |        Iten3   
4      |        Iten4     
5      |        Iten5 
```

我尝试做的是

仅当 tabsell 上的 ItenId 的 SUM < 2 时才选择 FROM tabitens

进行查询的正确方法是什么？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T00:55:01.007

您需要`LEFT JOIN`在此使用，因此tableSell 上`Items`没有记录（*未售出*）也将显示在列表中。

```
SELECT  a.ItemID, a.ItemName
FROM    tblItem a
        LEFT JOIN tblSell b
            ON a.ItemID = b.ItemID
GROUP BY a.ItemID, a.ItemName
HAVING COUNT(b.SellId) < 2 
```

`COUNT`推荐使用 than`SUM`因为`COUNT`增加行数的同时`SUM`增加行的*值*。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T00:55:32.170

尝试：

```
Select ItenId, ItenName
  From tabsell inner join tabitens
 Group b ItenId, ItenName
Having count(1) < 2 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T00:56:14.003

尝试以下查询：

```
SELECT itemid 
FROM tabsell 
GROUP BE itemid  
HAVING count(*) < 2 
```

# mysql-workbench - 在 Centos 5.8 上安装 MySQL WorkBench

> ID：13446299
> 
> 赞同：-1
> 
> 时间：2012-11-19T00:51:49.467
> 
> 标签：mysql-workbench

我试图在 Centos 5.8 上安装 MySQL WorkBench。它表明了这一点。

```
error: Failed dependencies:
    /bin/python is needed by mysql-workbench-gpl-5.2.44-1fc17.i686
    libantlr3c.so is needed by mysql-workbench-gpl-5.2.44-1fc17.i686
    libatkmm-1.6.so.1 is needed by mysql-workbench-gpl-5.2.44-1fc17.i686
    libc.so.6(GLIBC_2.15) is needed by mysql-workbench-gpl-5.2.44-1fc17.i686
    libcairomm-1.0.so.1 is needed by mysql-workbench-gpl-5.2.44-1fc17.i686
    libcrypto.so.10 is needed by mysql-workbench-gpl-5.2.44-1fc17.i686
    libctemplate.so.2 is needed by mysql-workbench-gpl-5.2.44-1fc17.i686
    libgdkmm-2.4.so.1 is needed by mysql-workbench-gpl-5.2.44-1fc17.i686
    libgio-2.0.so.0 is needed by mysql-workbench-gpl-5.2.44-1fc17.i686
    libgiomm-2.4.so.1 is needed by mysql-workbench-gpl-5.2.44-1fc17.i686
    libglibmm-2.4.so.1 is needed by mysql-workbench-gpl-5.2.44-1fc17.i686
    libgtkmm-2.4.so.1 is needed by mysql-workbench-gpl-5.2.44-1fc17.i686
    liblua-5.1.so is needed by mysql-workbench-gpl-5.2.44-1fc17.i686
    libmysqlclient.so.18 is needed by mysql-workbench-gpl-5.2.44-1fc17.i686
    libmysqlclient.so.18(libmysqlclient_16) is needed by mysql-workbench-gpl-5.2.44-1fc17.i686
    libpangomm-1.4.so.1 is needed by mysql-workbench-gpl-5.2.44-1fc17.i686
    libpython2.7.so.1.0 is needed by mysql-workbench-gpl-5.2.44-1fc17.i686
    libsigc-2.0.so.0 is needed by mysql-workbench-gpl-5.2.44-1fc17.i686
    libssl.so.10 is needed by mysql-workbench-gpl-5.2.44-1fc17.i686
    libstdc++.so.6(GLIBCXX_3.4.11) is needed by mysql-workbench-gpl-5.2.44-1fc17.i686
    libstdc++.so.6(GLIBCXX_3.4.15) is needed by mysql-workbench-gpl-5.2.44-1fc17.i686
    libstdc++.so.6(GLIBCXX_3.4.9) is needed by mysql-workbench-gpl-5.2.44-1fc17.i686
    libuuid.so.1(UUID_1.0) is needed by mysql-workbench-gpl-5.2.44-1fc17.i686
    libxml2.so.2(LIBXML2_2.4.30) is needed by mysql-workbench-gpl-5.2.44-1fc17.i686
    libxml2.so.2(LIBXML2_2.6.0) is needed by mysql-workbench-gpl-5.2.44-1fc17.i686
    libzip.so.2 is needed by mysql-workbench-gpl-5.2.44-1fc17.i686
    pexpect is needed by mysql-workbench-gpl-5.2.44-1fc17.i686
    python-paramiko is needed by mysql-workbench-gpl-5.2.44-1fc17.i686
    rpmlib(FileDigests) <= 4.6.0-1 is needed by mysql-workbench-gpl-5.2.44-1fc17.i686
    rpmlib(PayloadIsXz) <= 5.2-1 is needed by mysql-workbench-gpl-5.2.44-1fc17.i686 
```

我的命令行：

```
rpm -i mysql-workbench-gpl-5.2.44-1fc17.i686.rpm     Any idea or suggestion? Thank you in advance 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T00:40:19.690

尝试

```
yum install mysql-workbench-gpl-5.2.44-1fc17.i686.rpm 
```

因此它可以处理所需的依赖项。

# java - 黑杰克游戏错误

> ID：13446305
> 
> 赞同：-2
> 
> 时间：2012-11-19T00:52:20.617
> 
> 标签：java, class, exception

我的黑杰克程序有错误。我已经尝试了半个小时来找出答案。它说“类型卡已定义”。由于某种原因，我的 deal() 函数也无法正常工作。我再次发布此信息并提供更多信息。有人可以帮忙吗？我是初学者。所以我有一个名为 index 的类，其主要方法是：

```
public static void main(String[] args){
    runGame(2);                                 
} 
```

然后我有一些方法，然后我有 runGame：

```
public static void runGame(int n){
    Card[] newdeck=createCardArray();

    Card[] shuffleddeck = shuffle(newdeck); 
    Deck deck = new Deck(shuffleddeck);
    int[] players = createPlayers(n);
    int[] points = createPoints(n);

    for(int i = 0 ; i< players.length - 1; i++){
        Card a = deck.deal();
        Card b = deck.deal();
        updatePoints(players, points, i, a);
        updatePoints(players, points, i, b);
    }
    printPlayersPoints(players, points);
} 
```

在那个文件夹中，我还有一个 Card.class 和 Deck.class： 如果你想看我有下面的链接。当我运行它时，我收到一个错误，我不知道我做了什么，但它改变了：

```
Exception in thread "main" java.lang.Error: Unresolved compilation problems: 
The public type Deck must be defined in its own file
Syntax error on token "}", { expected
Syntax error on token(s), misplaced construct(s)
The public type Card must be defined in its own file
Syntax error on tokens, delete these tokens
The public type Blackjack must be defined in its own file
Syntax error on token "]", invalid (
Syntax error, insert "]" to complete ArrayAccess
Syntax error, insert ")" to complete MethodInvocation
Syntax error, insert ";" to complete Statement
GIO cannot be resolved
GIO cannot be resolved
GIO cannot be resolved
BlackjackWindow cannot be resolved to a type
BlackjackWindow cannot be resolved to a type
GIO cannot be resolved
BlackjackWindow cannot be resolved to a type
Syntax error on token "}", { expected
Syntax error on token(s), misplaced construct(s)
The public type Hand must be defined in its own file
Syntax error on tokens, delete these tokens
The public type Player must be defined in its own file
Syntax error, insert "}" to complete Block
BlackjackWindow cannot be resolved to a type
BlackjackWindow cannot be resolved to a type
GIO cannot be resolved
GIO cannot be resolved
BlackjackWindow cannot be resolved to a type
GIO cannot be resolved
GIO cannot be resolved
GIO cannot be resolved
GIO cannot be resolved
GIO cannot be resolved
Syntax error on token "}", { expected
Syntax error on tokens, delete these tokens
Syntax error, insert "}" to complete Block
Syntax error, insert "}" to complete ClassBody

at Card.<init>(fullblk.java:4)
at index.createCardArray(index.java:19)
at index.runGame(index.java:104)
at index.main(index.java:3) 
```

但由于某种原因，这次我收到了这个错误：

```
 Exception in thread "main" java.lang.Error: Unresolved compilation problems: 
    The constructor Deck(Card[]) is undefined
    The method deal() is undefined for the type Deck
    The method deal() is undefined for the type Deck

    at index.runGame(index.java:101)
    at index.main(index.java:3) 
```

谁能帮帮我吗。

> index.java：http://pastebin.com/8x344TN9 [Card.java：http://pastebin.com/NLbHBDSi](http://pastebin.com/8x344TN9) [Deck.java：http://pastebin.com/emD75yv0](http://pastebin.com/NLbHBDSi) _ _

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T22:59:43.553

甲板课结束时的支撑问题：

```
public class Deck
{
    // your constructors and methods.
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T00:58:08.997

在 Deck.java 的末尾有一个额外的右花括号 ('}')。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T00:57:56.630

`}`好吧，您在 Deck 类的末尾有一个额外的（右大括号），请在编译时删除该右大括号。你应该很好。

```
public class Deck
{
    // your constructors and methods.
  }
} 
```

# c# - 无法为下拉列表触发 SelectedIndexChanged 事件？

> ID：13446307
> 
> 赞同：0
> 
> 时间：2012-11-19T00:52:37.697
> 
> 标签：c#, asp.net, events, drop-down-menu

我是 C# 和 asp.net 的初学者，我有一个 DropDownList ，其中包含一个带有 text :`"No item selected."`和 index的项目`0`。

我有一个按钮`Delete`，它显然可以从 DDL 中删除项目。

但是当只有该`"No item selected."`项目时，我想禁用它。

我试过这段代码：

```
protected void Page_Load(object sender, EventArgs e)
{
    Button2.Enabled = false;
}

protected void DropDownList1_SelectedIndexChanged(object sender, EventArgs e)
{
    if (DropDownList1.SelectedIndex == 0)
    {
        Button2.Enabled = false;
    }
    else
    {
        Button2.Enabled = true;
    }
} 
```

但是当我添加新项目并选择它时没有任何反应。该`Delete`按钮仍处于禁用状态。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T04:57:58.113

您必须检查下拉列表 AutoPostBack 属性，它必须为 true 才能触发服务器端事件，并且在 page_load 事件时检查 IsPostBack 属性，然后尝试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T00:54:32.037

尝试这个

```
protected void Page_Load(object sender, EventArgs e)
{
  if(!Page.IsPosBack)
  {
    Button2.Enabled = false;
  }
} 
```

回发后它被重置为“禁用”

# objective-c - 如何访问 viewController 中的方法

> ID：13446308
> 
> 赞同：0
> 
> 时间：2012-11-19T00:52:37.657
> 
> 标签：objective-c, ios, uiviewcontroller, callback

我有以下情况。

在我的 ZoomViewController

```
- (void) animationPicker: (NSString*) type; 
```

我想使用以下代码在我的 IntroViewController 中访问它。

```
ZoomViewController *zoomvc = [[ZoomViewController alloc] init];
[zoomvc animationPicker: @"Fade-in"] 
```

但这不起作用..为什么？解决方案是什么？

![在此处输入图像描述](../Images/7eba87abe61e44b09943bfdd320086b6.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T01:04:16.803

您的代码的问题在于您创建了 的新实例，`ZoomViewController`一旦您完成它就会被丢弃。您正在`animationPicker:`与控制缩放屏幕的控制器断开连接的实例上调用该方法。

解决方案取决于您的通信控制器相互连接的方式。例如，如果您`ZoomViewController`使用*segue*启动，您可以在方法中访问目标控制器`prepareForSegue`。这是[一个解释如何做的答案](https://stackoverflow.com/a/11267780/335858)。

# php - 在php中将日期格式转换为文本字符串

> ID：13446316
> 
> 赞同：2
> 
> 时间：2012-11-19T00:53:58.607
> 
> 标签：php, string, date

```
$string = this is my message in 12-10-12, Orlando 
```

我想将其转换为`$new = this is my message in 12th October 2012, Orlando`.

请帮我用php代码

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T01:02:41.983

这应该让你开始：

```
function convert_date($hit)
{
    $date = DateTime::createFromFormat("y-m-d", $hit[0]);

    if (!$date) //invalid date supplied, return original string
        return $hit[0]; 

    return $date->format("jS F Y");
}

$string = "this is my message in 12-10-12, Orlando or maybe 13-11-21";
$string = preg_replace_callback("~(\d{2}-\d{2}-\d{2})~", "convert_date", $string);
echo $string; //this is my message in 12th October 2012, Orlando or maybe 21st November 2013 
```

查看[php 日期修饰符](http://www.php.net/manual/en/function.date.php)、[DateTime 扩展](http://www.php.net/manual/en/datetime.createfromformat.php)和[preg_replace_callback](http://www.php.net/manual/en/function.preg-replace-callback.php)以获取更多信息。

# java - JSplitPane - 将应用程序分成两部分？

> ID：13446324
> 
> 赞同：0
> 
> 时间：2012-11-19T00:55:18.353
> 
> 标签：java, swing, jpanel, jsplitpane

我制作了一个 Java swing 应用程序。我的主班做所有的`SwingUtilities.invokeLater(new Runnable()`事情。

我用过的第二堂课：

```
JPanel container = (JPanel) getContentPane(); 
```

然后通过调用添加所有位..

```
container.add([name of component] 
```

我现在想将整个“应用程序”放入`JSplitPane`. 因此，我希望我的应用程序在一侧，而其他东西在右侧。

我该怎么做呢？

```
 public class one{
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
            JFrame f = new App("main");
            f.setSize(1920,1080);
            f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
            f.setVisible(true);
}

public class App extends JFrame {
        SuppressWarnings("empty-statement")
        public App(String title) {
        super(title);
        JPanel container = (JPanel) getContentPane();

        container.setLayout(new GridBagLayout());
        GridBagConstraints c = new GridBagConstraints();
        JButton new button = new JButton("new");
        c.gridx = 0;
        c.gridy = 0;
        c.gridwidth = 2;
        //ENTER LOTS OF CONSTRAINTS
        container.add(new, c);

        JButton next to button = new JButton("next to");
        c.gridx = 1;
        c.gridy = 1;
        c.gridwidth = 2;
        //ENTER LOTS OF CONSTRAINTS
        container.add(new, c);

        //I HAVE LOTS OF SWING COMPONENTS AND BUTTONS about 30

} 
```

我希望所有这些都在拆分窗格的左侧？

我该怎么做呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-19T01:26:47.683

1.  不要从 扩展`JFrame`，您不会添加任何功能，而是将所有应用程序组件和逻辑移动到单独的`JPanel`
2.  创建一个实例`JSplitPane`，将“主”面板添加到它，将辅助窗格添加到它
3.  创建 a 的实例`JFrame`，将拆分窗格添加到其中...

**更新**

![在此处输入图像描述](../Images/fb58a49a7fe3faa5d5672ee4e0cab727.png)

```
public class TestSplitPane {

    public static void main(String[] args) {
        new TestSplitPane();
    }

    public TestSplitPane() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                JSplitPane pane = new JSplitPane(JSplitPane.HORIZONTAL_SPLIT);
                pane.setLeftComponent(new MainPane());
                pane.setRightComponent(new JLabel("On the right"));

                JFrame frame = new JFrame();
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(pane);
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

    public class MainPane extends JPanel {

        public MainPane() {
            setLayout(new GridBagLayout());
            GridBagConstraints c = new GridBagConstraints();
            JButton newButton = new JButton("new");
            c.gridx = 0;
            c.gridy = 0;
            c.gridwidth = 2;
            //ENTER LOTS OF CONSTRAINTS
            add(newButton, c);

            JButton next = new JButton("next to");
            c.gridx = 1;
            c.gridy = 1;
            c.gridwidth = 2;
            //ENTER LOTS OF CONSTRAINTS
            add(next, c);
        }
    }
} 
```

# python - Django：CSS 不工作

> ID：13446325
> 
> 赞同：25
> 
> 时间：2012-11-19T00:55:20.790
> 
> 标签：python, html, css, django, web

我还是 django 的新手，我的 CSS 工作有问题。
我遵循了链接中的指示：[Django Static Link tutorial](https://docs.djangoproject.com/en/dev/howto/static-files/)，关于处理静态文件。但它仍然无法正常工作。

## 设置

```
# Absolute path to the directory static files should be collected to.
# Don't put anything in this directory yourself; store your static files
# in apps' "static/" subdirectories and in STATICFILES_DIRS.
# Example: "/home/media/media.lawrence.com/static/"
STATIC_ROOT = '/Users/a9austin/Development/sites/AlphaSocks/src/static_root/'

# URL prefix for static files.
# Example: "http://media.lawrence.com/static/"
STATIC_URL = '/static/'

# Additional locations of static files
STATICFILES_DIRS = (
# Put strings here, like "/home/html/static" or "C:/www/django/static".
# Always use forward slashes, even on Windows.
# Don't forget to use absolute paths, not relative paths.
'/Users/a9austin/Development/sites/AlphaSocks/src/staticfiles'

) 
```

## 看法

```
#from django.http import HttpResponse
from django.shortcuts import render_to_response

def index(request):
return render_to_response('index.html') 
```

## 索引.html

```
<link rel="stylesheet" href="{{STATIC_URL}}css/style.css" type="text/css" media="screen" > 
```

和目录组织

> src->staticfiles->css->style.css

非常感谢您，非常感谢您的帮助和时间！

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-11-19T01:48:51.497

要让 Django 提供静态文件，您必须确保有几个设置。

**STATIC_URL**

此设置指定静态文件应映射到的 url。你已经完成了。

**STATICFILES_DIRS**

这指定了 Django 应该在其中查找静态文件的系统上的所有文件夹。这个想法是您的项目中可能有几个应用程序，每个应用程序可能需要一组不同的静态文件。因此，出于组织目的，每个应用程序可能包含一个`static`目录，它将仅存储它的静态文件。所以 Django 必须有办法知道这些目录在哪里。这就是此设置的用途。

**静态根**

此设置指定 Django 将所有静态文件复制到哪里，而不是静态文件已经在哪里。这个想法是，一旦你将开发投入生产，Django 就不能再提供静态文件了，因为我不会去这里（它在[文章中](https://docs.djangoproject.com/en/dev/howto/static-files/#serving-static-files-in-development)）。但是对于生产来说，所有静态文件都应该在一个目录中，而不是像在`STATICFILES_DIRS`. `STATICFILES_DIRS`因此，此设置指定一个目录，Django 将通过运行以下命令从其中的所有文件中复制所有静态文件到该目录：

```
$ python manage.py collectstatic 
```

请注意，这仅在您投入生产后才需要，并且此处指定的目录不能与`STATICFILES_DIRS`.

**网址.py**

在 Django 为您的静态文件提供服务的开发过程中，您必须在 urls.py 中包含静态 url：

```
from django.contrib.staticfiles.urls import staticfiles_urlpatterns

urlpatterns = ...

urlpatterns += staticfiles_urlpatterns() 
```

* * *

一旦你完成了上述所有的事情，你的静态文件应该只要你有`DEBUG = True`. 在上面的列表中，您似乎只完成了`STATIC_URL`. 另请注意，我上面描述的所有步骤都在您在问题中链接的文档（[链接](https://docs.djangoproject.com/en/dev/howto/static-files/#serving-static-files-in-development)）中。一开始可能会有点混乱，但如果你读了几次，它就会变得更加清晰。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2021-02-03T15:23:07.707

尝试清除缓存。如果您使用的是谷歌浏览器，请转到设置>清除浏览数据>选择清除缓存的图像和文件，然后单击清除数据

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-03-13T10:05:56.433

完成所有操作后，设置 DEBUG=True，python collectstatic，清除缓存，如果问题仍然存在，则以隐身模式打开，将您的 .css 文件复制到 static 文件夹中另一个新的 .css 文件中，然后运行 ​​collectstatic 命令。这对我有用。我希望这能帮到您。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-19T02:05:58.370

将 RequestContext 添加到响应应该将 STATIC_URL 变量加载到模板中。

尝试改变：

```
from django.shortcuts import render_to_response

def index(request):
    return render_to_response('index.html')
```

到：

```
from django.shortcuts import render_to_response
from django.template.context import RequestContext

def index(request):
    return render_to_response("index.html", context_instance=RequestContext(request)) 
```

有关更多信息，请参阅有关[在模板中引用静态文件](https://docs.djangoproject.com/en/dev/howto/static-files/#referring-to-static-files-in-templates)的 Django 文档 。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-03-26T18:20:59.883

如果编码没有问题并且没有显示错误。然后你可以这样做来尝试解决问题。

**清除缓存：**

如果您使用的是谷歌浏览器，请转到您的设置 --> 清除浏览数据 --> 选择清除缓存的图像和文件，然后单击清除数据

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-05-19T20:25:41.160

如果在开发模式下发生这种情况，请确保`DEBUG=True`在`settings.py`文件中进行设置。还要确保在您的文件中设置`MEDIA_URL`and ，如下所示：`MEDIA_ROOT``settings.py`

```
MEDIA_URL  = '/mymediafolder/'
MEDIA_ROOT = os.path.join(BASE_DIR, 'mymediafolder') 
```

然后在您的主 urls 文件中`myapp/urls.py`，您必须具有以下内容：

```
from django.conf.urls import url, include
from . import views
from django.contrib.staticfiles.urls import staticfiles_urlpatterns
from django.conf.urls.static import static
from django.conf import settings

urlpatterns = [
    #Your url patterns here
]

urlpatterns += staticfiles_urlpatterns()
urlpatterns += static(settings.MEDIA_URL, document_root=settings.MEDIA_ROOT) 
```

`staticfiles_urlpatterns()`用于在开发模式下提供静态文件。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-08-12T11:58:13.297

对我来说，它正在改变

`<link rel="stylesheet" href=" {% static '/css/style.css' %} ">`

到

`<link rel="stylesheet" type="text/css" href=" {% static '/css/style.css' %} ">`

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2021-11-09T11:19:55.640

有时只需要“Ctrl + F5”

完全刷新页面，就可以了。

或 Ctrl + Shift + R

* * *

## 回答 #9

> 赞同：-4
> 
> 时间：2019-06-28T09:10:38.340

```
There is an easy way if you feel that your CSS isn't working. 
```

如果您的项目不是太大，那么您可以将 CSS 文件与 HTML 放在同一个文件中。然后运行它。这样它将运行例如

`

```
<head>
  <meta charset="UTF-8">
  <title>Promantus Bot</title>
      <style type="text/css"> 
* {
    margin: 0;
    padding: 0;
}

body {
    background-color:#FF625F;
}

h1, p {
    font-family: sans-serif;
    text-align: center;
    color: #323330;
    font-size:  100px;
}

p {
    font-size: 30px;
}

#output, #container {
    display: flex;
    justify-content: center;
    margin-top: 100px;
}

input {
    background-color: #eee;
    border: none;
    font-family: sans-serif;
    color: #000;
    padding: 15px 32px;
    text-align: center;
    text-decoration: none;
    display: inline-block;
    font-size: 30px;
}

</style>

</head>

<body>

  <div id="output"></div>

<div id="container">
    <input type="text" id="input" value="">
</div>

</body>

</html>
`
It's going to run fine this way. 
```

# python - 在python2.7上运行用python2.6编译的pyd

> ID：13446329
> 
> 赞同：0
> 
> 时间：2012-11-19T00:56:07.103
> 
> 标签：python, pyd

我有一个用 python26.dll 编译的 python pyd 模块（它的'msparser' by matrixscience，一个与一些质谱数据格式接口的库）。可以在带有 activestate python 2.7 的 Windows 上使用这个 pyd 模块。但是，在通用安装中，它会抛出 ImportError: DLL load failed... 因为缺少 python26.dll。

那么，对于在更高版本的 python 上导入用早期版本的 python 编译的 pyd 有什么建议吗？Activestate 以某种方式实现了这一点，所以我想它必须是可能的。

# jquery - 使用 jQuery 以编程方式加载 url

> ID：13446332
> 
> 赞同：1
> 
> 时间：2012-11-19T00:56:14.930
> 
> 标签：jquery, ajax, jquery-ui, jquery-ui-dialog

这是我[上一个问题的附带条件](https://stackoverflow.com/questions/13446190/how-to-download-excel-from-jquery-get-ajax-request)

我试图在 AJAX 获取请求后下载 excel，但是，这是不可行的。

所以现在而不是

```
$.get("downloadExcel", {  
    'foo': 'bar'
}); 
```

我在页面上有一个隐藏的 url，当用户单击 modalbox 上的按钮时，我想使用 jQuery UI 单击它。我将以编程方式修改 URL 的参数，但我不知道如何使用 jQuery 加载单击 URL，就好像用户单击它一样：

```
<a href="downloadExcel?foo=bar" id="hiddenLink" src="display: none;"></a>
   $("#testexcel").dialog({
    autoOpen : false,
    draggable : false,
    resizable : false,
    modal : true,
    buttons: [{
         text: "Download File",
     click: function () {
            $("#hiddenLink").click();   //this doesn't work                       
            jQuery(this).dialog( "close" );
            return true;  
         }
     }]                        
 }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T00:59:33.397

你不需要这样做。

相反，您可以只写`location.href = someUrl;`. 只要该 URL 返回适当的标头，浏览器就会显示一个保存对话框，就像您手动导航到该 URL 一样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T01:00:07.527

尝试点击隐藏链接更像是“黑客”而不是解决方案，我建议避免它。

相反，您可能希望使用 jQuery 在页面上创建一个隐藏的 iframe，这将允许您让用户在停留在同一页面上的同时下载文件。

```
$('<iframe />', {
    src: 'downloadLink.html',
    style: 'display:none'
}).appendTo('body'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T01:04:11.737

由于您已将显示样式设置为隐藏，因此 jquery 可能无法在页面上找到该控件。

尝试将链接包装在显示样式设置为隐藏的 div 标记中。

# ajax - 将 AJAX 放入 Joomla 模块

> ID：13446333
> 
> 赞同：6
> 
> 时间：2012-11-19T00:56:27.270
> 
> 标签：ajax, joomla, joomla-module

我已经为我的网站制作了一个基本的 Joomla 模块作为一个喊话框。但我想将 AJAX 放入其中（我知道 JED 上已经存在一个类似的 AJAX 模块，但这更像是一个让我了解 AJAX 如何在 Joomla 模块中工作的项目）。

您重定向到新 php 文件的常用 AJAX 内容显然不起作用，因为该文件不会被定义为

```
 defined('_JEXEC') or die('Restricted access'); 
```

将在新页面中失败。就我在 Joomla Docs 上阅读的内容而言，将 _JEXEC 定义为等于一（正如我在 SO 上的几篇文章中阅读的那样）是一种安全风险，因为它提供了网站的入口点。

[我见过的另一个喊话框模块](http://extensions.joomla.org/extensions/communication/shoutbox/43)的方式是指向 helper.php 文件中的一个函数。这对我来说很有意义，因为这是所有功能通常应该存储的地方。但是，我不清楚该模块如何通过 onSubmit() （或相关）命令访问 helper.php 文件，并希望有人能对此有所了解。

我实际上并不需要任何特定于我的喊话框模块的东西——这更多是关于如何在 Joomla**模块**中获得 AJAX 功能以及如何安排它的问题

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-20T17:10:23.617

另外两个走上了正确的轨道，您需要记住，当您进行 AJAX 调用时，您不能直接访问 Joomla 中的 php 文件。因此，最好调用您的模块。在这种情况下，让模块检查您的 POST 或 URL 中的变量。

我是 JQuery 的 ajax 的忠实粉丝，它比构建那个喊话框的人使用的方法更加独立。

```
$( "#addShout" ).click( function(event, ui) {
                $.ajax({
                    type: 'GET',
                    url: "<?php echo JURI::base() . "index.php?option=mod_mymodule&task=getCustomerJson&selectedCustomer="?>"  + encodeURIComponent(value),
                    success:function(data){
                        $('#shouts').append(data);
                    },
                    error:function(){
                        $('#errors').html('<p class="error"><strong>Oops!</strong> Try that again in a few moments.</p>');
                    }
                });  
        }); 
```

然后正如我在对 Valentin 的评论中提到的那样：

```
$task = JRequest::getVar('task'); 
if($task == "getCustomerJson"){mySuperHelper::getCustomerJson();} 
```

只有在变量存在时才调用必要的函数。

为了解释部分过程，它有点像这样：

1.  如果 POST 或 URL 中没有变量，它将以 Joomla 期望的方式简单地显示模块。
2.  如果检测到变量，则调用该方法将其添加到数据库中，然后调用将其添加到显示器的 javascript 函数。也防止正常显示的发生。

您引用的模块非常有趣。主文件引用的辅助函数完成了模型通常在 MVC 中处理的工作，并且 Javascript 也有点过了。如果你真的想了解它是如何工作的，你真的需要深入研究 fatAjax.js 文件，因为它包含所有 AJAX 并设置 mod_shoutbox.php 监听的变量。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-04-14T08:09:09.963

如果您需要在 Joomla 中发出 AJAX 请求，请使用 Joomla 3.2！从自定义模块或插件，您可以构建如下 URL。

```
index.php?option=com_ajax&module=your_module_name&method=YourMethodName&format=json 
```

各参数说明

**1\. index.php?option=com_ajax**：所有请求都必须通过 com_ajax 路由。

**2\. module=your_module_name**：第一部分是您正在使用的扩展类型。这可以是“模块”或“插件”。第二部分是扩展名。请注意您没有包含前缀“mod_”或“plg_”，只是名称。

**3\. method=YourMethodName**：这是您尝试调用的方法名称。如果您在模块中使用它，则该方法必须附加“Ajax”。因此，这里表示的方法将是**YourMethodNameAjax**。如果您在插件上使用它，则该方法必须在前面加上“onAjax”。因此，这里表示的方法将是**onAjaxYourMethodName**。

[在Joomla 文档](https://docs.joomla.org/Using_Joomla_Ajax_Interface)中查看更多信息

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T07:36:43.107

据我所知，您不能从模块对模块本身（或类似）中的函数进行 AJAX 调用。

您可以构建一个组件并创建一个返回 RAW 或 JSON 作为响应的视图。因为Joomla！本身会调用你可以使用Joomla！API 和它的所有好处。这也是一个安全的事情，因为如果你需要获取敏感数据，你也可以做 ACL/用户检查。

当您可以从模块调用时：

`index.php?option=com_mycomponent&task=getJson`

[生成 JSON 输出](http://docs.joomla.org/Generating_JSON_output)一文是一个很好的起点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-19T08:44:23.483

```
jQuery(document).ready(function () { 
    jQuery(".btnshow").click(function () {
        var pagename, pid;
        pid=jQuery(this).attr('rel');
        pagename="<?php echo JURI::root();?>index.php?option=com_componentname&view=result&Id="+pid;    
        jQuery.get(pagename, function (data) {
            jQuery('.para1').html(data);
        });
    }); 
});

<a href="JavaScript:void(0);" rel="<?php echo $id; ?>" title="<?php echo $id; ?>"><img src="<?php echo $image; ?>" alt="" /></a> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-08-26T06:32:43.023

您可以通过以下方式达到预期的效果：

```
$( "#addShout" ).click( function(event, ui) {
    $.ajax({
        type: 'GET',
        url: "<?php echo JURI::base() . "index.php?option=com_ajax&module=module_name_withot_prefix&method=methodName&anyparams="?>"  + encodeURIComponent(anyparamsvalue) + "&format=json",,
        success:function(data){
            $('#shouts').append(data);
        },
        error:function(){
            $('#errors').html('<p class="error"><strong>Oops!</strong> Try that again in a few moments.</p>');
        }
    });  
}); 
```

在模块帮助文件中，您需要有一个名为“methodName”的方法。

# erlang - erlang 监视器和监视器

> ID：13446339
> 
> 赞同：0
> 
> 时间：2012-11-19T00:57:13.573
> 
> 标签：erlang, monitor

我的问题很简单。

如果一个进程调用`monitor`并且不调用`demonitor`并且死了。对系统有副作用吗？以后有什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T09:21:44.737

不，当一个进程死亡时，它的所有资源都将被释放。

# javascript - 是否可以做网站的 Javascript 轮播？

> ID：13446342
> 
> 赞同：-2
> 
> 时间：2012-11-19T00:57:40.680
> 
> 标签：javascript, html, carousel

我正在寻找如何在屏幕中心显示一个完全居中的网站的示例代码，以及它左右两侧的其他两个网站（可能只看到一半的侧网站），但能够使用导航iframe 之间的轮播。我已经包含了我要解释的基本模型......

TL;DR：寻找一个轮播，我可以在 iframe 中使用完整的网站![在此处输入图像描述](../Images/ad948c0e36064416598fe4be6b7155e7.png)而不是图像。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T01:01:57.327

没有什么比得上DIY。

一个基本的轮播可以简单地通过并排放置元素来制作：

```
--------  --------  --------
|Box 1 |  |Box 2 |  |Box 3 |
--------  --------  -------- 
```

使用一个仅足以容纳其中一个的容器，您可以在框之间水平滚动。

然后，用一点 CSS 魔法，你可以让它看起来像你的问题中的那个图像。尝试使用`transform`, 其中`scale`和 与`translate`到中心的距离成比例。还要在最中心的盒子上添加一个`z-index`以将其放在其他盒子的顶部。

当然，有一些方法可以制作更复杂或更好看的轮播，但一个简单的效果可以大有帮助。

# video - 来自 youtube 的舞台视频流

> ID：13446350
> 
> 赞同：1
> 
> 时间：2012-11-19T00:59:27.000
> 
> 标签：video, air, stage3d

是否可以将视频从 Youtube 流式传输到 stagevideo 实例，即不将其嵌入到 stageWebView 实例中。

# python - urllib2: https 到通过 http 代理的目标

> ID：13446355
> 
> 赞同：0
> 
> 时间：2012-11-19T00:59:40.683
> 
> 标签：python, https, proxy, urllib2

我正在使用代理服务器连接到多个目标服务器。一些目标服务器需要 http，而其他目标服务器需要 https。我的 http 请求运行顺畅，但 urllib2 忽略了 https 请求上的代理处理程序，并将请求直接发送到目标服务器。

我尝试了许多不同的方法，但这是一个相当简洁的尝试：

```
import urllib2
cookie_handler = urllib2.HTTPCookieProcessor (cookielib.LWPCookieJar())
proxies = {'http': 'http://123.456.78.9/',
           'https': 'http://123.45.78.9/'}
proxy_handler = urllib2.ProxyHandler (proxies)
url_opener = urllib2.build_opener (proxy_handler, cookie_handler)
request = urllib2.Request ('https://example.com')
response = url_opener.open (request) 
```

我知道自 Python 2.6.3 以来 urllib2 已经能够将 https 请求发送到代理服务器，但我似乎无法让它工作。我正在使用 2.7.3。

感谢您提供的任何建议。

更新：上面的代码确实有效。当我问这个问题时，我不确定为什么它不起作用。很可能，我在 https 代理 URL 中有错字。

# c++ - 双曲最终概率密度函数 Opencv

> ID：13446360
> 
> 赞同：0
> 
> 时间：2012-11-19T01:00:23.033
> 
> 标签：c++, image, image-processing, opencv

大家好，我有一个运行时错误，我不知道数字输入是否错误？我想我会寻求帮助

也许有些东西超出了范围`t[x]=gmin*pow(gmax/gmin, factor);`？？

```
void image::hhyper(const char* path)
{
    IplImage* img = cvLoadImage(path);
    IplImage* out = cvCreateImage( cvGetSize(img), IPL_DEPTH_8U, 3 );

    h = img->height;
    w = img->width;
    step = img->widthStep;
    channels = img->nChannels;
    data = (uchar *)img->imageData;
    newdata = (uchar *)out->imageData;

    int gmin=20;
    int gmax=200;

    double sum=0;
    double t[256];
    double factor;

    for(int a=0; a<h; a++){
        for(int b=0; b<w; b++){
            for(int k=0; k<3; k++){
                newdata[i*step+j*channels+k]=data[i*step+j*channels+k];
            }
        }
    }

    for(int x=0; x<256; x++){
       sum+=table[x];
       factor=sum/(h*w);
       t[x]=gmin*pow(gmax/gmin, factor);
    }

    for(int a=0; a<h; a++){
        for(int b=0; b<w; b++){
            for(int k=0; k<3; k++){
                newdata[i*step+j*channels+k]=t[(int)data[i*step+j*channels+k]];
       }
        }
    }

    cvNamedWindow("out");
    cvNamedWindow("in");
    cvShowImage("in",img);
    cvShowImage("out",out);
    system("pause");
} 
```

这是我的标题

```
 class image
 {
public:
image();
const char* path;
void hhyper(const char*);
void histo(const char*);
IplImage* DrawHistogram(CvHistogram *hist, float scaleX, float scaleY);
int h,w,step,channels,i,j,;
int table[256];
uchar *data, *newdata; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T05:07:16.050

也许这

```
newdata[i*step+j*channels+k] = t[(int)data[i*step+j*channels+k]]; 
```

应该

```
newdata[i*step+j*channels+k] = t[(uchar)data[i*step+j*channels+k]]; 
```

# mysql - mysql 更改表，其值基于其他字段

> ID：13446365
> 
> 赞同：0
> 
> 时间：2012-11-19T01:01:19.180
> 
> 标签：mysql, database-design, alter

我的表中有 dateOfbirth 字段，我需要添加新字段年龄，它基于 dateOfBirth 字段 w/c 我需要计算他们的年龄吗？
是否可以更改表格并根据其他字段设置字段的值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T01:42:44.543

您想要的是一个 COMPUTED 列，该列将在更新 dateOfBirth 时自动更新。不幸的是，[MySQL 不支持计算列](https://stackoverflow.com/questions/5422729/mysql-computed-column "MySQL 不支持计算列")，因此您的选择是：

*   如上所述创建视图
*   创建一个正常的年龄列并通过向原始表添加触发器来维护其值，当 dateOfBirth 列中的值发生变化时，该触发器将不断重新计算年龄列中的值
*   通过向查询添加附加列来计算查询数据时的年龄
*   （最好的情况，因为它减少了数据库的负载）应用程序中的计算年龄

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T01:05:53.587

您可以使用`ALTER`table 添加新列。然后用于`UPDATE`根据您的 dateOfBirth 字段更新该列。

# android - 如果列表视图可以自动更新，最好的方法是使用它

> ID：13446366
> 
> 赞同：1
> 
> 时间：2012-11-19T01:01:21.740
> 
> 标签：android

我正在开发一个应用程序，它可以讲述校园活动并按日期安排它们。我是一名初级开发人员，我想知道使用谷歌日历或列表视图是否更好。我宁愿使用列表视图，但我不确定如何自动更新信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T01:23:15.587

您可以使用处理程序和延迟后的可运行来刷新列表并调用该方法以将数据放入您的列表视图中，在您设置的时间再次进行，请查看此处的链接以供参考[http://developer.android.com/reference /android/os/Handler.html](http://developer.android.com/reference/android/os/Handler.html)

# android - android SharedPreferences putStringSet 顺序/排序

> ID：13446367
> 
> 赞同：24
> 
> 时间：2012-11-19T01:01:23.203
> 
> 标签：android, save, sharedpreferences

我尝试保存/恢复一组字符串，除了一件事外一切正常。当我创建我的字符串时，我输入：

```
Set<String> set = new HashSet<String>();
for(int i=0; i<toggles.size();i++){
   set.add(toggles.get(i).serialise());                 
} 
```

订单例如是“蓝牙”“应用程序”“数据”。当我回来时：

```
Set<String> set = prefs.getStringSet(key, new HashSet<String>());
for (String toggle : set){
    Toggle t = new Toggle();
    t.deserialize(toggle);
    toggles.add(t); 
} 
```

我得到“应用程序”“蓝牙”“数据”，它们按名称排序，我不想要这个。我想获得与我保存的相同的订单。任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-11-19T01:04:14.963

这是不可能的。集合是无序的集合。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-11-19T08:15:55.663

您可以在字符串前面加上数字前缀，例如`00application`, `01bluetooth`, `02data`, 按照您想要取出它们的顺序。将`Set<String>`返回的 from`getStringSet`放入`Array<Set>`并排序。

```
Set<String> set = prefs.getStringSet(key, new HashSet<String>());
Array<String> a = set.toArray();
java.util.Arrays.sort(a); 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2017-07-11T13:26:15.853

您可以将字符串列表保存为带有分隔符的单个字符串。例如，这是您的数组：

```
["Italy", "France", "Spain", "Japan", "United States"] 
```

您可以将其另存为：

```
"Italy;France;Spain;Japan;United States" 
```

在代码中：

```
SharedPreferences sharedPref = mContext.getSharedPreferences(PREF_KEY, Context.MODE_PRIVATE);
Editor editor = sharedPref.edit();

// countries is your List
String countriesString = TextUtils.join(";", countries);
editor.putString("countries", countriesString);
editor.apply(); 
```

要检索您的数据：

```
final String countriesString = sharedPref.getString("countries", "");
List<String> countries = new ArrayList<>();
if (!countriesString.isEmpty()){
    countries = new ArrayList<>(Arrays.asList(countriesString.split(";")));
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-04-29T10:15:18.123

```
fun SharedPreferences.putNewStringIntoList(newString:String){
    val previous =getString(YOUR_KEY,"")?:""
    val without =previous.replace("${newString}|","")//Remove if already inside
    edit().putString(YOUR_KEY,"${without}|${newString}").apply()
}

fun SharedPreferences.getSortedList():List<String>{
    val strings =getString(YOUR_KEY,"")?:""
    return devices.split("|")
} 
```

这适用于 Kotlin，替换 | 任何字符的字符都保证不在您的字符串中。

# android - 我在 Android 上的 Excel 文件保存在哪里？

> ID：13446370
> 
> 赞同：0
> 
> 时间：2012-11-19T01:01:56.950
> 
> 标签：android, excel, storage

我有这段代码可以制作新的 Excel 文件。该文件是空白的，它只创建一个工作表。代码是这样的

```
public void onClick(View v) {
    Workbook workbook = new HSSFWorkbook();
    Sheet sheet = workbook.createSheet("Havaji");
    Cell cell = sheet.createRow(0).createCell(0);
    cell.setCellValue("Hi there");
    try{
        FileOutputStream output = new FileOutputStream("Test2.xls");
        workbook.write(output);
        output.close();
    }
    ... 
```

该文件保存在哪里？如何设法将文件保存在我想要的移动设备上的位置？如何创建一个存放所有文件的目录？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T01:26:53.737

以下是一些您会发现对您的目的有用的方法：

沿提供的路径创建所有目录：

```
 public static boolean createPath(String path) {
    File pathFile = new File(path);
    if (!pathFile.exists()) {
        boolean result = pathFile.mkdirs();
        if (!result) {
             Log.e(TAG, "Unable to create directory path: " +
             path);
            return false;
        }
    }
    if (!pathFile.isDirectory()) {
        return false;
    }
    return true;
} 
```

返回外部存储目录的根：

```
public static String extDirectory() {
    File file = Environment.getExternalStorageDirectory();
    return file.getAbsolutePath();
} 
```

返回应用程序外部存储目录的根路径：

```
public static String externalMyAppDataRoot(Context context) {
    return externalAppDataRoot() + File.separatorChar
            + context.getPackageName() + File.separatorChar + "data";
} 
```

返回 Android 应用程序数据目录的根路径：

```
public static String externalAppDataRoot() {
    return extDirectory() + File.separatorChar + "Android/data";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T01:10:25.090

我猜它被存储在 /data/app//files/Test2.xls 中，虽然我不完全确定

我会尝试传入一个绝对文件路径。如果您希望文件在 sdcard 中，我会使用[Context.getExternalFilesDir](http://developer.android.com/reference/android/content/Context.html#getExternalFilesDir%28java.lang.String%29) 来获取 sdcard 的根路径。

# gcov - GCOV 的输出是否存储在任何地方？

> ID：13446373
> 
> 赞同：1
> 
> 时间：2012-11-19T01:02:16.747
> 
> 标签：gcov

是输出，如下图，

```
File 'printtokens.c'
Lines executed:47.18% of 195
Branches executed:65.14% of 109
Taken at least once:35.78% of 109
Calls executed:33.33% of 81
printtokens.c:creating 'printtokens.c.gcov' 
```

GCOV 生成的存储在某处？如果没有，我们如何存储它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T14:55:03.327

GCOV 根据 *.gcda 文件中的信息计算得出，但如果您想保留该摘要，最简单的做法是

```
gcov printtokens.c > printtokens.c.summary 
```

如果您想查看该信息以及线路覆盖率，您可以查看[lcov](http://ltp.sourceforge.net/coverage/lcov.php)，它使用 gcov 生成带有线路覆盖率和摘要覆盖率信息的 HTML 文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-26T11:38:05.680

我完全同意 Ankur。

您应该以这种方式使用它：

从 .gcno 和 .gcda 所在的目录中，编写命令：

**lcov -c -d 。-o 文件名.info**

然后，生成 HTML 报告：

**genhtml 文件名.info**

It is the proper way to view the results.

# java - Android OpenCV 查找轮廓

> ID：13446374
> 
> 赞同：11
> 
> 时间：2012-11-19T01:02:37.480
> 
> 标签：java, android, opencv, javacv

我需要提取图像的最大轮廓。这是我目前正在使用的代码。在网上收集了一些片段

```
List<MatOfPoint> contours = new ArrayList<MatOfPoint>();
Imgproc.findContours(outerBox, contours, new Mat(), Imgproc.RETR_LIST, Imgproc.CHAIN_APPROX_SIMPLE);
double maxArea = -1;
int maxAreaIdx = -1;
for (int idx = 0; idx < contours.size(); idx++) {
    Mat contour = contours.get(idx);
    double contourarea = Imgproc.contourArea(contour);
    if (contourarea > maxArea) {
        maxArea = contourarea;
        maxAreaIdx = idx;
    }
} 
```

它似乎工作。但是，我不太确定如何从这里开始。我尝试使用`Imgproc.floodFill`，但我不太确定如何使用。此功能需要与原始+2 水平和 +2 垂直`Mat`尺寸相同的桅杆。`Mat`当我在轮廓上运行它时`contours.get(maxAreaIdx)`，它给了我一个错误。编码：

```
Mat mask = Mat.zeros(contour.rows() + 2, contour.cols() + 2, CvType.CV_8UC1);
int area = Imgproc.floodFill(contour, mask, new Point(0,0), new Scalar(255, 255, 255)); 
```

错误：

```
11-18 19:07:49.406: E/cv::error()(3117): OpenCV Error: Unsupported format or combination of formats () in void cvFloodFill(CvArr*, CvPoint, CvScalar, CvScalar, CvScalar, CvConnectedComp*, int, CvArr*), file /home/oleg/sources/opencv/modules/imgproc/src/floodfill.cpp, line 621 
```

所以基本上我的问题是，在找到面积最大的轮廓后，如何“突出显示”它？我希望其他一切都是黑色的，轮廓是白色的

谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-23T12:09:14.270

您可以在 OpenCV 中使用 DrawContours 函数：[http ://docs.opencv.org/modules/imgproc/doc/structural_analysis_and_shape_descriptors.html?highlight=drawcontours#drawcontours](http://docs.opencv.org/modules/imgproc/doc/structural_analysis_and_shape_descriptors.html?highlight=drawcontours#drawcontours)

或者您可以在 C++ 中使用此实现（您可以在 OpenCV 文档中找到 Java 中的等价物，只需在 Google 上键入 OpenCV + 函数名称）

```
Mat src = imread("your image"); int row = src.rows; int col = src.cols;
    //Create contour
vector<vector<Point> > contours; 
vector<Vec4i> hierarchy;
Mat src_copy = src.clone();
    findContours( src_copy, contours, hierarchy, RETR_TREE, CHAIN_APPROX_SIMPLE);

// Create Mask
Mat_<uchar> mask(row,col);    
for (int j=0; j<row; j++)
    for (int i=0; i<col; i++)
        {
            if ( pointPolygonTest( contours[0], Point2f(i,j),false) =0)
            {mask(j,i)=255;}
            else
            {mask(j,i)=0;}
        }; 
```

尝试轮廓[1]，轮廓[2] ...找到最大的

这是为了显示你的轮廓：

```
namedWindow("Contour",CV_WINDOW_AUTOSIZE);
imshow("Contour", mask); 
```

# c# - UdpClient 无法从 DatagramSocket 接收

> ID：13446380
> 
> 赞同：0
> 
> 时间：2012-11-19T01:03:07.493
> 
> 标签：c#, datagram, udpclient

我正在申请。服务器端在桌面上工作，客户端在 Windows 8 上工作（Metro App-.Net for Windows Store）

这是我的服务器代码：

```
var udpServer = new UdpClient(7800);
udpServer.BeginRecieve(new AsyncCallback(OnUdpRecieve), null);
. . .
private void OnUdpRecieve(IAsyncResult result)
{
    byte[] data = udpServer.EndReceive(result, ref peerEndPoint);
    udpServer.BeginReceive(new AsyncCallback(OnUdpRecieve), null);
} 
```

这是我在 Win RT 上的客户端代码：

```
var udpClient = new DatagramSocket();
await udpClient.ConnectAsync(new HostName("localhost"), 7800);
var udpWriter = new DataWriter(udpClient.OutputStream);
udpWriter.WriteBytes(new byte[] {0, 3, 5});
await udpWriter.StoreAsync(); 
```

但在服务器端我什么也没得到。我想也许我做错了什么。

谢谢

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-20T05:57:58.663

好吧，我在 MSDN 论坛上阅读了一个问题。这不是我的答案，但有一点是“loclhost”与“127.0.0.1”不同。

当您使用“localhost”时，您强制数据报使用 IPv4，而当您使用“127.0.0.1”时，您强制数据报套接字使用 IPv6。

这才是重点 ;）

# android - Android SDK Emulator 不会在 Eclipse 中打开

> ID：13446381
> 
> 赞同：1
> 
> 时间：2012-11-19T01:03:21.157
> 
> 标签：android, eclipse, sdk, virtual-device-manager

我有整个 Eclipse Android sdk 工作。除了虚拟设备管理器之外的一切。我从 androids 网站下载到 Bundle，将 java JDK 安装到 eclipse 文件夹中，然后将整个包放在我桌面上的一个文件夹中。当我点击“Androd Virtual Device Manager”按钮时，什么也没有发生。什么都没有。它曾经可以工作（尽管我永远无法运行该程序，我只能打开窗口来制作新设备）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-15T22:35:40.333

确保您已正确安装/更新 sdk 到最新版本

[https://developer.android.com/sdk/installing/adding-packages.html](https://developer.android.com/sdk/installing/adding-packages.html)

尝试运行 C:\android-sdk-windows\AVD 管理器

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-13T05:58:54.330

我有同样的问题，我在笔记本电脑上运行 Windows 7 家庭版。

执行以下步骤：

1.  您需要首先将整个 java 文件夹（包含 java sdk 的文件夹）复制到不需要管理员权限的位置。
2.  通过转到“*我的电脑*”中的高级选项卡并添加新的环境变量来更改路径变量。
3.  完成此操作后，转到您拥有整个 android sdk 的文件夹，并在其父文件夹中搜索名为 android.bat 的文件。
4.  转到找到的文件的属性并复制整个地址
5.  转到 cmd 并键入-cd“您复制的路径”。
6.  您在工具文件夹中，现在键入 android.bat 并按 enter..
7.  它需要一些时间，比如 30-40 秒，然后打开我们心爱的 sdk 管理器，你就在那里。

# iphone - 为什么不调用警报视图委托方法？

> ID：13446385
> 
> 赞同：-1
> 
> 时间：2012-11-19T01:04:10.733
> 
> 标签：iphone, ios, uialertview

在我的界面文件中，我说我符合 UIAlertViewProtocol 并在我的实现文件中实现了 alertView:clickedButtonAtIndex: 方法，并且通常每当按下 alertview 按钮（使警报消失的按钮）时，都会调用该方法。好吧，它大部分时间都会被调用，但是对于我的一个警报视图，在我按下它的取消按钮后它没有被调用，这是什么原因？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T01:28:57.820

哦，这是因为在我的委托参数的一个警报视图中，我传入了 nil 而不是 self，这很尴尬。

# php - 当我使用直接链接时，PHP 包含给我错误

> ID：13446391
> 
> 赞同：0
> 
> 时间：2012-11-19T01:04:34.403
> 
> 标签：php, file, hyperlink, get, include

我正在尝试使用 php 包含一个 php 文件`include`，但问题是我需要在 URL 中使用变量...我知道我不能使用相对链接来执行此操作，因此我使用的是直接链接但收到此错误：![错误的图像](../Images/01eceb0fcc34927734ccb3dd9112acc2.png)

我想知道是否有人可以告诉我我做错了什么......

**这是`include`代码：**

```
<?php

include 'http://www.procapturemarketing.net/Scripts/PCMSSystemsOwned.php?ref=NMVT';

?> 
```

**这是 PCMSSYSTEMSOWNED.php：**

```
<?php

$systems = explode(', ',$row_rsUsers['Systems']);

if (in_array("Empower", $systems) and $_GET['ref'] != "Empower") { ?>

<li onclick="location.href='nmvt/Home.php';" class="nmvtli"><a href="nmvt/Home.php">Empower System</a></li>

<?php } if (in_array("MCA", $systems) and $_GET['ref'] != "MCA") { ?>

<li onclick="location.href='nmvt/Home.php';" class="nmvtli"><a href="nmvt/Home.php">MCA System</a></li>

<?php } if (in_array("Neucopia", $systems) and $_GET['ref'] != "Neucopia") { ?>

<li onclick="location.href='nmvt/Home.php';" class="nmvtli"><a href="nmvt/Home.php">Neucopia System</a></li>

<?php } if (in_array("NMVT", $systems) and $_GET['ref'] != "NMVT") { ?>

<li onclick="location.href='nmvt/Home.php';" class="nmvtli"><a href="nmvt/Home.php">NMVT System</a></li>

<?php } ?> 
```

**此外，如果您需要它，这里是记录集`rsUsers`：**

```
$colname_rsUsers = "-1";
if (isset($_GET['MM_Username'])) {
  $colname_rsUsers = $_GET['MM_Username'];
}
mysql_select_db($database_myBackOfficeConn, $myBackOfficeConn);
$query_rsUsers = sprintf("SELECT * FROM Users WHERE Username = %s", GetSQLValueString($colname_rsUsers, "text"));
$rsUsers = mysql_query($query_rsUsers, $myBackOfficeConn) or die(mysql_error());
$row_rsUsers = mysql_fetch_assoc($rsUsers); 
```

# c# - PLINQ AsParallel().ForAll() 访问资源

> ID：13446394
> 
> 赞同：3
> 
> 时间：2012-11-19T01:04:45.847
> 
> 标签：c#, multithreading, linq, plinq

假设我在 X,Y 空间中有许多`Particle`s，并且我想对它们进行归一化，使得 X 和 Y 的平均值为 0。

串行实现：

```
public void Normalise()
{
  double avgX = 0.0;
  double avgY = 0.0;

  foreach (Particle p in Particles)
  {
    avgX += p.X;
    avgY += p.Y;
  }

  avgX /= (double)Particles.Count;
  avgY /= (double)Particles.Count;

  foreach (Particle p in Particles)
  {
    p.X -= avgX;
    p.Y -= avgY;
  }
} 
```

这行得通，而且性能还不错，因为它是 O(n)，但它是“令人尴尬的并行”。看看我的 PLINQ 实现：

```
public void PNormalise()
{
  double avgX = 0.0;
  double avgY = 0.0;

  Particles.AsParallel().ForAll(p =>
  {
    avgX += p.X;
    avgY += p.Y;
  });

  avgX /= (double)Particles.Count;
  avgY /= (double)Particles.Count;

  Particles.AsParallel().ForAll(p =>
  {
    p.X -= avgX;
    p.Y -= avgY;
  });
} 
```

我不确定这里的表现，但我想它会更好。问题是，粒子都是随机跳跃的。我只能假设这些`+=`操作`avgX`相互`avgY`竞争，即使它们已经相当原子。

有什么我可以解决的吗？我不能`lock`，因为它们不是对象，但我不确定我是否想要，因为锁定不是很昂贵吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-19T01:13:21.937

您可以通过 Parallel LINQ 的正常机制绕过对锁（或原子操作）的需求：

```
var avgX = Particles.AsParallel().Average(p => p.X);
var avgY = Particles.AsParallel().Average(p => p.Y);

Particles.AsParallel().ForAll(p => { p.X -= avgX; p.Y -= avgY }); 
```

由于对数字求和是一个 O(N) 操作，如果这部分花费了任何大量时间，我会感到非常惊讶。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T01:09:11.780

采用

```
Particles.AsParallel().ForAll(p =>
{
    Interlocked.Add(avgX, p.X);
    Interlocked.Add(avgY, p.Y);
} 
```

做一个线程安全的原子加法。有关详细信息，请参阅[Interlocked Class](http://msdn.microsoft.com/en-us/library/5kczs5b5.aspx)的文档。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T01:18:50.407

实际上，并行化这个 O(n) 算法不会带来更好的性能，因为您的内存访问量与计算指令大致相同。

# database - 生成 Oracle 数据库对象

> ID：13446395
> 
> 赞同：-2
> 
> 时间：2012-11-19T01:04:51.077
> 
> 标签：database, oracle, object, scripting

在给定一组定义的数据库对象的情况下，Oracle 中是否有任何功能可以生成部署脚本。我正在考虑类似于 SQL Server 数据库发布向导的功能，当提供所需的对象时，它将消失并生成一个脚本（容纳依赖项）。我知道 SQL Developer 以及大多数其他（付费）工具都能够做到这一点，但我想知道是否有任何开箱即用的工具（Oracle 附带的）提供这种功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-29T22:02:26.917

您可以使用[Data Pump Export 导出](http://docs.oracle.com/cd/B28359_01/server.111/b28319/dp_export.htm#g1022624)数据库模式（有或没有任何表数据） 。缺点是，导出文件不是人类可读的脚本，但通常它可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T05:42:36.697

它实际上是使用上一个问题中描述的技术捕获所有对象的脚本组合：[如何以编程方式从 Oracle 数据库生成 DDL？](https://stackoverflow.com/questions/4160865/how-to-programmatically-generate-ddl-from-oracle-database)

基本上，您使用 dbms_metadata.get_ddl 来生成对象 ddl。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-09-28T20:52:55.300

我们可以使用 oracle 导出实用程序生成不带数据选项的 ddl 脚本，这在最新的 oracle 版本中作为向后兼容提供。

# jquery - Twitter Bootstrap plus Isotope 给了我奇怪的结果

> ID：13446396
> 
> 赞同：2
> 
> 时间：2012-11-19T01:04:57.173
> 
> 标签：jquery, twitter-bootstrap, jquery-isotope

我尝试将 Isotope 集成到 Bootstrap 项目中，但效果并不好。

这里有一些代码来解释：

```
<section id="last" class="row">
  <article class="post span3">
    ...
  </article>
  <article class="post span3">
    ...
  </article>
  <article class="post span3">
    ...
  </article>
</section>

$(function(){
  $('#last').isotope({
    itemSelector : '.post',
    layoutMode : 'fitRows'
  });
}); 
```

这是奇怪的结果

![在此处输入图像描述](../Images/520a200584b653fcd61000da6c1f8a41.png)

你知道它为什么给我这个吗？：/

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-25T17:32:45.657

您应该检查`imagesLoaded()`同位素中的功能。也许在 Isotope init 之前图像没有完全加载。

```
    $(函数(){
        $('#last').imagesLoaded(function(){
            $('#last').isotope({
                itemSelector : '.post',
                布局模式：'fitRows'
            });
        });
    });

```

[http://isotope.metafizzy.co/docs/help.html](http://isotope.metafizzy.co/docs/help.html)

# c++ - 用于物理仿真的 3D 图形的 C++ 或 MATLAB 库

> ID：13446397
> 
> 赞同：2
> 
> 时间：2012-11-19T01:05:02.337
> 
> 标签：c++, matlab, physics, simulation

我正在寻找一个可用于 C++ 或 MATLAB 的库，以便我可以进行一些刚体和粒子模拟，然后我可以渲染和查看。

我希望能够使用库来绘制粒子或刚体，然后以编程方式指定旋转、平移等。

此外，我希望图书馆有尽可能小的学习曲线。

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T01:09:02.380

在 C++ 中使用 Open Scene Graph：

[http://www.openscenegraph.org/projects/osg](http://www.openscenegraph.org/projects/osg)

该库包装了 openGL 并允许进行出色的渲染，并且有一些非常好的教程。

[http://www.openscenegraph.org/projects/osg/wiki/Support/Tutorials](http://www.openscenegraph.org/projects/osg/wiki/Support/Tutorials)

您将能够通过它们从 0,0,0 帧的变换来定义对象位置，从而允许以物理仿真样式轻松移动对象。

希望这可以帮助。

# c# - 为什么人脉应用不显示联系人/不允许我选择联系人？

> ID：13446399
> 
> 赞同：0
> 
> 时间：2012-11-19T01:05:29.120
> 
> 标签：c#, windows-8, windows-runtime, windows-store-apps

我正在尝试允许用户以这种方式从 People 应用程序中选择联系人：

```
private async Task<System.Collections.Generic.KeyValuePair<string, string>> SelectAContactForASlot()
{
    KeyValuePair<string, string> kvp; // = new KeyValuePair<string, string>();
    var contactPicker = new Windows.ApplicationModel.Contacts.ContactPicker();
    contactPicker.CommitButtonText = "Select";
    var contact = await contactPicker.PickSingleContactAsync();
    if (contact != null)
    {
        kvp = new KeyValuePair<string, string>(contact.Name, contact.Emails[0].ToString());
        return kvp;
    }
    return kvp = new KeyValuePair<string, string>("No Name found", "No email found");
} 
```

People 应用程序确实被调用，但它看起来像这样：

～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～ ~~~~~~~~~~~~ 人v

出了点问题，此应用目前无法选择联系人。

再次尝试选择应用程序。

```
 | Select |  | Cancel | 
```

～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～ ~~~~~~~~~~~~

我昨天添加了几个联系人，所以它确实包含联系人。我的代码有问题吗，或者我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T05:52:58.203

我尝试了您的代码，它按预期打开了联系人选择器。只是为了测试，尝试使用单个按钮创建一个新应用程序，该按钮从其`Click`事件处理程序调用您的方法，就像我一样。

此外，如果问题仍然存在，您可能需要重新登录/重新启动计算机。我知道我过去在共享功能上也遇到过类似的问题——在我的代码中处理错误之后，即使是正确的代码也无法正常工作，直到重新启动。

当我这样做时：您可能想要稍微更改您的代码 - 要实际获取电子邮件地址，请替换`contact.Emails[0].ToString()`为`contact.Emails[0].Value`：

```
private async Task<System.Collections.Generic.KeyValuePair<string, string>> SelectAContactForASlot()
{
    KeyValuePair<string, string> kvp; // = new KeyValuePair<string, string>();
    var contactPicker = new Windows.ApplicationModel.Contacts.ContactPicker();
    contactPicker.CommitButtonText = "Select";
    var contact = await contactPicker.PickSingleContactAsync();
    if (contact != null)
    {
        kvp = new KeyValuePair<string, string>(contact.Name, contact.Emails[0].Value);
        return kvp;
    }
    return kvp = new KeyValuePair<string, string>("No Name found", "No email found");
} 
```

当联系人也没有任何电子邮件地址时，不要忘记处理这种情况。

# sql - 将查询切割成更小的视图会加快速度吗？

> ID：13446400
> 
> 赞同：1
> 
> 时间：2012-11-19T01:05:36.817
> 
> 标签：sql, sql-server-2008, optimization, query-optimization

例如，如果我有

```
CREATE VIEW viewTest1 AS
SELECT col_a, col_b, col_c, COUNT(1)
FROM table_name
GROUP BY col_a, col_b, col_c

SELECT * FROM viewTest1 
```

另一个是

```
CREATE VIEW viewTest2 AS
SELECT col_a, col_b, col_c
FROM table_name

SELECT *, COUNT(1) FROM viewTest2
GROUP BY col_a, col_b, col_c 
```

第二个跑得更快吗？为什么？

我的测试结果是第二个是 FASTER，我不明白。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T09:16:43.887

这取决于您使用的数据库引擎的优化器。有些数据库引擎能够重组整个查询，有些则不能。据我所知，Oracle 有一个控制重组行为的参数。

所以理论上永远不会有一个单一的答案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-19T09:02:04.090

使用[SQL Sentry Plan Explorer](http://www.sqlsentry.net/plan-explorer/sql-server-query-view.asp)进行更详细的分析执行计划

例子：

**声明1**

```
SELECT * FROM viewTest1 
```

![在此处输入图像描述](../Images/9f54b77cb6dcb937305d364818446da3.png)

**声明2**

```
SELECT *, COUNT(1) FROM viewTest2
GROUP BY col_a, col_b, col_c 
```

![在此处输入图像描述](../Images/cd58b3d3a0b3c205b78bc15289a3a2e2.png)

两个查询的执行计划完全相同。因此成本两个查询等于

您必须阅读本书[SQL Server 执行计划](http://www.red-gate.com/community/books/sql-server-execution-plans)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-19T04:13:43.680

不可能有如此不同。但是，您可以查看执行计划以了解更多成本详情。

您可以将两个查询放在同一个 sql 窗口中，只需按`CTRL+L`执行计划的键即可。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-19T10:01:25.297

我在表中创建了一个包含超过 200k 行的样本数据集，并且执行计划是相同的。

![执行计划](../Images/2f97f46bfaff145d73c38d0dc5a81d1f.png)

# linux - 企业故障转移（例如 google.com）如何实际工作？

> ID：13446403
> 
> 赞同：4
> 
> 时间：2012-11-19T01:06:04.737
> 
> 标签：linux, cloud, failover, redundancy

我们有一些为 Web、FTP 和电子邮件服务配置的 Fedora 系统。我们希望镜像这些服务，以便我们可以为我们的用户提供接近 100% 的可靠性。我是一位相当有经验的 Linux 管理员，但对冗余系统没有太多经验。

做这个的最好方式是什么？谷歌和亚马逊是如何做到的？Google.com 解析为多个 IP 地址，但如果我的本地桌面缓存了其中一个无法访问的 IP，我将收到一条连接失败消息。他们如何防止这种情况发生？

如果他们的一台服务器出现故障，它如何自动重定向到另一个系统，而最终用户却不知道呢？

我知道有故障转移设备，但它们仅用于故障转移系统本身，而不是完整的网络。

假设我们有最坏的情况，比如我的主系统变得无法访问。Linux 系统上用于提供此功能的基本组件是什么？

我正在寻找概念或方法，而不是“查看 openstack”之类的答案。构成解决方案的实际部分是什么？必须做些什么来实现这种能力？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T03:13:26.970

Google 或 Amazon 发布的 IP 地址实际上并不是他们的服务器，而是负载均衡器。负载均衡器将传入的客户端连接动态转发到实际服务器，单个 IP 地址后面可能有成百上千的连接。

您可能会问，如果负载均衡器本身出现故障怎么办？好吧，它们通常以集群方式工作 - 至少 2 个，并且都共享相同的虚拟 IP 地址。如果其中一个出现故障，虚拟 IP 似乎仍在工作，因为此负载均衡器集群的另一个成员仍在为该请求提供服务。

如果集群负载均衡器仍然出现故障，它们会自动更改其 DNS，以便不再将这个虚拟 IP 通告给 DNS 客户端。为了加快速度，这些 IP 上的典型 TTL 设置得相当低，几分钟或更短（对于 google.com，它是 5 分钟）。

当然，现实比这复杂一点，但它应该给你一个粗略的想法。

# doctrine - 如何阻止 Doctrine 为每个查询返回主键

> ID：13446405
> 
> 赞同：1
> 
> 时间：2012-11-19T01:06:21.867
> 
> 标签：doctrine, doctrine-1.2

我对 Doctrine 在每个查询中返回主键有点恼火，即使我不希望它这样做。有没有办法阻止这个？因为我真的不想要那些该死的主键以及我的学说查询结果。

例如，我有一个查询是：

```
$getAllDatesForUserQuery = $this->createQuery('s')
    ->select('s.datename')
    ->where('s.userid = ?',3)
    ->setHydrationMode(Doctrine::HYDRATE_ARRAY) ; 
```

在这种情况下，它会按原样检索所有日期名称，但也会愉快地返回主键列值。我不想要它。

那是我吗？还是教义？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T19:06:58.583

在这种情况下，您需要一个简单的数组并且只选择一个字段，答案就是`Single Scalar Hydration`模式。像这样使用它：

```
$q = $this->createQuery('s')
->select('s.datename')
->where('s.userid = ?',3)
->setHydrationMode(Doctrine::HYDRATE_SINGLE_SCALAR); 
```

您应该会发现查询将返回一个简单的一维数组，其中仅包含您想要的值。

# php - 发布 OWL 文件

> ID：13446407
> 
> 赞同：0
> 
> 时间：2012-11-19T01:06:37.887
> 
> 标签：php, semantics, owl

我使用 Protege 制作了一个 OWL 本体，我需要通过 PHP 访问它以进行一些 SPARQL 查询。如何创建本地端点以便可以从 PHP 调用本体？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T12:39:26.057

[Fuseki](http://jena.apache.org/documentation/serving_data/index.html)可能适用于您的用例。

# ios - 在 UICollectionView 中将一个特定单元格放在其他单元格之上

> ID：13446408
> 
> 赞同：1
> 
> 时间：2012-11-19T01:06:49.747
> 
> 标签：ios, ios6

在我的 UICollectionView 中，其中一个包含动画的单元格将超出单元格的边界，现在它被附近的其他单元格覆盖。是否可以将这个特殊的单元格放在其他单元格之上，从而完美呈现动画？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T14:01:36.077

我也有同样的需要

具体来说，我想根据所选集合视图中的单元格呈现一个模式视图控制器。当您查看图书馆时，您可以在 iBooks 中看到这种行为。从收藏中选择一本“书”，它会“弹出”并打开书本。

简单地“按原样”缩放单元格可能会被其他单元格覆盖，这是不可取的。

要让它工作，您只需记住单元格的超级视图（它可能不是直接的 UICollectionView！）及其原始中心点。然后你把它从它的超级视图中移除，把它添加到你的主视图中（可以选择把它放在前面），执行你的动画。在完成块中，将您的转换重置为身份（无转换），将其从主视图中删除，并将其添加回其原始父级和中心点。

我有下面的示例代码，但有一些警告：

*   我将 IVARS 用于动画状态信息，因为我在实际实现中使用多种方法中的信息
*   由于我的代码所做的其他转换超出了此答案的范围，我还在使用 QuartzCore 3D 转换
*   我在我的单元格中添加了一个“动画”属性，让它在动画期间改变它的外观（所以它会更好地缩放）
*   最后，我在这个例子的最后切换了我的代码来做一个标准的模态演示，而不是调用我在我的实际应用程序中所做的非标准演示控制器来实际启动场景中的下一个 VC

您可能还需要进行其他调整，但我上面概述的基本技术肯定会起作用。

```
// Assume: UIView *cell  == cell we are animating
// Assume: UIViewController *vc == View controlelr we will launch
// Assume: IVAR CGPoint _animationCellOrigCenter
// Assume: IVAR UIView *_animationCellParent
// Assume: IVAR UIView *_animationCell;

// Save "before" state before animating:
_animationCellOrigCenter = cell.center;
_animationCellParent = cell.superview;
_animationCell = cell;

// Where is the cell currently in the main view?
CGPoint cellViewLoc = [self.view convertPoint:_animationCellOrigCenter fromView:_animationCellParent];

// OK. Hoist the cell into the main view:
[cell removeFromSuperview];
cell.center = cellViewLoc;
[self.view addSubview:cell];
[self.view bringSubviewToFront:cell];

CGSize cellSize = cell.bounds.size;
CGSize newSize = CGSizeMake(600,600); // YMMV

[cell.superview bringSubviewToFront:cell];

// Get ready to do some animating:
CGSize viewSize = collectionView.bounds.size;
CGPoint destination = CGPointMake(viewSize.width / 2, viewSize.height / 2);
CGFloat scaleX = newSize.width / cellSize.width;
CGFloat scaleY = newSize.height / cellSize.height;
cell.animating = YES;

[UIView animateWithDuration:.2
                      delay:0.0
                    options:UIViewAnimationOptionCurveEaseInOut | UIViewAnimationOptionAllowUserInteraction
                 animations:^{
                     cell.layer.transform = CATransform3DMakeScale(scaleX, scaleY, 1);
                     cell.center = destination;
                 }
                 completion:^(BOOL finished) {
                     [self presentViewController:vc
                                        animated:YES
                                      completion:^{
                                          // Put everything back the way we found it!
                                          [_animationCell removeFromSuperview];
                                          [_animationCellParent addSubview:_animationCell];
                                          _animationCell.center = _animationCellOrigCenter;
                                          _animationCell.layer.transform = CATransform3DIdentity;
                                          _animationCell.animating = NO;
                                      }
                    ];
                }
 ]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-02T20:05:01.500

这是相当简单的。只需将单元格添加到 collectionview 的滚动视图中，然后再将其展开到其他单元格之上，然后在您不再希望它位于顶部时将其删除。下面我已经完成了这个，然后在每个单元格本身上添加了一个动画，让它在其他单元格之上展开。为了简单起见，我把那个动画去掉了。

```
override func collectionView(collectionView: UICollectionView, shouldSelectItemAtIndexPath indexPath: NSIndexPath) -> Bool {
    let cell = collectionView.cellForItemAtIndexPath(indexPath)

    self.collectionView?.addSubview(cell!)

    return true
}

override func collectionView(collectionView: UICollectionView, shouldDeselectItemAtIndexPath indexPath: NSIndexPath) -> Bool {

    let cell = collectionView.cellForItemAtIndexPath(indexPath)
    if (cell?.superview != nil) {
        cell?.removeFromSuperview()
    }

    return true
} 
```

# nhibernate - Castle Active Record 初始化失败

> ID：13446409
> 
> 赞同：0
> 
> 时间：2012-11-19T01:07:05.813
> 
> 标签：nhibernate, castle-activerecord

我正在使用**Castle Active Record**和**NHibernate在****MySql**之上实现一个相对简单的用户管理模型，我遇到了一个问题。

比方说，我有两个表 _users*和*_passwords*由*以下 SQL create 语句描述

```
创建表 _users (
  id bigint(20) NOT NULL AUTO_INCREMENT,
  用户名 char(32) NOT NULL,
  主键（id），
  UNIQUE KEY username_UQ（用户名），
) 引擎=InnoDB 默认字符集=utf8；

创建表_密码（
  id bigint(20) NOT NULL AUTO_INCREMENT,
  creation_date datetime NOT NULL,
  user_id bigint(20) 非空，
  password_hash char(64) NOT NULL,
  valid_end_date datetime NOT NULL,
  主键（id），
  唯一键 user_id_password_UQ (user_id,password_hash),
  KEY user_passwords_FK (user_id),
  CONSTRAINT user_passwords_FK FOREIGN KEY (user_id) REFERENCES _users (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION
) 引擎=InnoDB 默认字符集=utf8；

```

*这个想法是保留原始密码历史记录，因此，密码*保存在单独的表 _passwords 中，该表与*_users*表具有多对一的关系。

现在，以下 C# 代码使用 Castle Active Records 对该结构进行建模

```
namespace DataEntities
{
    [ActiveRecord("_users")]
    public class User : ActiveRecordBase<User>
    {
        [PrimaryKey(PrimaryKeyType.Identity, "id", Access = PropertyAccess.NosetterLowercase)]
        public ulong Id
        {
            get;
            set;
        } // Id

        [Property("username", ColumnType = "String", NotNull = true, Unique = true)]
        [ValidateIsUnique]
        public string Username
        {
            get;
            set;
        } // Username

        [HasMany(typeof(Password))]
        public IList<Password> Passwords
        {
            get;
            set;
        } // Passwords

        public string ValidPasswordHash
        {
            get
            {
                DateTime l_dtNow = DateTime.Now;
                if (Passwords.Count != 1 || Passwords[0].ValidFrom >= l_dtNow || Passwords[0].ValidUntil <= l_dtNow)
                {
                    throw new Exception();
                }

                return Encoding.UTF8.GetString(Passwords[0].PasswordHash);
            }
        } // ValidPasswordHash

        public static User FindByCredentials(string i_sUsername, string i_sHashedPassword)
        {
            return FindOne(Restrictions.Eq("Username", i_sUsername), Restrictions.Eq("ValidPasswordHash", i_sHashedPassword));
        } // FindByCredentials
    } // User

    [ActiveRecord("_passwords")]
    public class Password : ActiveRecordBase<Password>
    {
        [PrimaryKey(PrimaryKeyType.Identity, "id", Access = PropertyAccess.NosetterLowercase)]
        public ulong Id
        {
            get;
            set;
        } // Id

        [BelongsTo("user_id", NotNull = true, UniqueKey = "_passwords_UQ1")]
        public ulong UserId
        {
            get;
            set;
        } // UserId

        [Property("password_hash", ColumnType = "UInt64", NotNull = true, UniqueKey = "_passwords_UQ1")]
        public byte[] PasswordHash
        {
            get;
            set;
        } // PasswordHash

        [Property("creation_date", ColumnType = "DateTime", NotNull = true)]
        public DateTime ValidFrom
        {
            get;
            set;
        } // ValidFrom

        [Property("valid_end_date", ColumnType = "DateTime", NotNull = true)]
        public DateTime ValidUntil
        {
            get;
            set;
        } // ValidUntil
    } // Password
} // DataEntities 
```

并在我的应用程序启动框架被初始化

```
try
{
    ActiveRecordStarter.Initialize(ActiveRecordSectionHandler.Instance, typeof(Password),
                                                                        typeof(User));
}
catch (Exception l_excpt)
{
    // handle exception
} 
```

最后，当这段代码运行时，它会生成以下异常：

```
Castle.ActiveRecord.Framework.ActiveRecordException：ActiveRecord 试图推断有关 User.Passwords 关系的详细信息，但在目标类型 DataEntities.Password 中找不到“BelongsTo”映射属性
   在 c:\daten\dev\External\Castle\AR2.0\ActiveRecord\Castle.ActiveRecord\Framework\Internal\Visitors\SemanticVerifierVisitor.cs:line 544 中的 Castle.ActiveRecord.Framework.Internal.SemanticVerifierVisitor.VisitHasMany（HasManyModel 模型）
   在 c:\daten\dev\External\Castle\AR2.0\ActiveRecord\Castle.ActiveRecord\Framework\Internal\Visitors\AbstractDepthFirstVisitor.cs:line 45 中的 Castle.ActiveRecord.Framework.Internal.AbstractDepthFirstVisitor.VisitNodes（IEnumerable 节点）
   在 c:\daten\dev\External\Castle\AR2.0\ActiveRecord\Castle.ActiveRecord\Framework\Internal\Visitors\AbstractDepthFirstVisitor.cs:line 59 中的 Castle.ActiveRecord.Framework.Internal.AbstractDepthFirstVisitor.VisitModel（ActiveRecordModel 模型）
   在 c:\daten\dev\External\Castle\AR2.0\ActiveRecord\Castle.ActiveRecord\Framework\Internal\Visitors\SemanticVerifierVisitor.cs:line 122 中的 Castle.ActiveRecord.Framework.Internal.SemanticVerifierVisitor.VisitModel（ActiveRecordModel 模型）
   在 c:\daten\dev\External\Castle\AR2.0\ActiveRecord\Castle.ActiveRecord\Framework\Internal\Visitors\AbstractDepthFirstVisitor.cs:line 45 中的 Castle.ActiveRecord.Framework.Internal.AbstractDepthFirstVisitor.VisitNodes（IEnumerable 节点）
   在 c:\daten\dev\External\Castle\AR2.0\ActiveRecord\Castle.ActiveRecord\Framework\ActiveRecordStarter.cs 中的 Castle.ActiveRecord.ActiveRecordStarter.RegisterTypes(ISessionFactoryHolder holder, IConfigurationSource source, IEnumerable`1 types, Boolean ignoreProblematicTypes) ：第 927 行
   在 c:\daten\dev\External\Castle\AR2.0\ActiveRecord\Castle.ActiveRecord\Framework\ActiveRecordStarter.cs:line 202 中的 Castle.ActiveRecord.ActiveRecordStarter.Initialize(IConfigurationSource source, Type[] types)
   在 C:\Projects Code\xyz\Global.asax.cs:line 22 中的 Global.Application_Start(Object sender, EventArgs e)

```

好吧，我无休止地盯着班级的`UserId`财产`Password`，我用谷歌搜索过，现在我很迷茫。所以社区是我最后的希望......任何人都可以帮助我了解导致此异常的原因以及如何解决它？

提前感谢大家的回复和评论。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T02:24:29.670

您应该有一个`User User { get; set; }`引用属性而不是外键。

[官方文档](http://docs.castleproject.org/Active%20Record.Relations%20Mapping.ashx#BelongsTo_2 "关系映射 - BelongsTo")是一个很好的起点。

# c# - 在 MVC 4 中操作模型绑定

> ID：13446410
> 
> 赞同：2
> 
> 时间：2012-11-19T01:07:10.737
> 
> 标签：c#, asp.net-mvc-4, model-binding

这更容易用一个例子来解释。假设我有一个人类

```
Public Person
{
string firstName;
string SocialSecurityNumber;
} 
```

当用户在网页中进行一些更改时，Person 对象将被发送回一个接受 Person 作为输入参数的控制器。社会安全号码已加密。我们有许多页面发回将社会安全加密作为参数的对象（不一定是 Person 类）。现在我想修改模型绑定，这样如果发布的对象具有 SocialSecurityNumber 作为属性，它应该会自动解密。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T01:23:26.633

您可以使用自定义模型绑定器。一些例子：

*   [http://www.dotnetcurry.com/ShowArticle.aspx?ID=584](http://www.dotnetcurry.com/ShowArticle.aspx?ID=584)
*   [http://odetocode.com/blogs/scott/archive/2009/04/27/6-tips-for-asp-net-mvc-model-binding.aspx](http://odetocode.com/blogs/scott/archive/2009/04/27/6-tips-for-asp-net-mvc-model-binding.aspx)
*   [http://www.markeverard.com/blog/2011/07/18/creating-a-custom-modelbinder-allowing-validation-of-injected-composite-models/](http://www.markeverard.com/blog/2011/07/18/creating-a-custom-modelbinder-allowing-validation-of-injected-composite-models/)

这是我之前使用过的一个简单示例，您可以根据需要进行修改：

```
public class FormatterModelBinder : DefaultModelBinder
{
    internal static string TrimValue([CanBeNull] string value, [CanBeNull] FormatAttribute formatter)
    {
        if (string.IsNullOrEmpty(value)) return value;
        return ((formatter == null) || formatter.Trim) ? value.Trim() : value;
    }

    protected override void SetProperty(ControllerContext controllerContext, ModelBindingContext bindingContext, PropertyDescriptor propertyDescriptor, object value)
    {
        if ((propertyDescriptor != null) && (propertyDescriptor.PropertyType == typeof(string)))
        {
            var stringValue = value as string;
            var formatter = propertyDescriptor.Attributes.OfType<FormatAttribute>().FirstOrDefault();
            stringValue = TrimValue(stringValue, formatter);
            value = stringValue;
        }

        base.SetProperty(controllerContext, bindingContext, propertyDescriptor, value);
    }
} 
```

然后，您可以根据需要创建一个属性来装饰该属性：

```
[AttributeUsage(AttributeTargets.Property, AllowMultiple = false)]
public sealed class FormatAttribute : Attribute
{
    public FormatAttribute()
    {
        Trim = true;
    }

    public bool Trim { get; set; }
} 
```

这是由 ViewModel 中属性的属性“激活”的

```
Public Person
{
    string firstName;
    [Format(Trim = true)]
    string SocialSecurityNumber;
} 
```

修改它以允许加密应该相当简单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T01:30:12.200

也许您应该将其存储在自己的类中

```
public class Person
{
 public string firstName { get; set; }
 public SocialSecurityNumber SSN { get; set; }
}

public class SocialSecurityNumber
{
 public string SSN { get; set; }
} 
```

也许这个类也可以有自己的解密方法。

```
public class SocialSecurityNumber
{
 public string SSN { get; set; }

 public string Decrypt()
 {
  //TODO: Decrypt SSN
  return decrypted ssn
 }
} 
```

现在在你的控制器中

```
[HttpPost]
public ActionResult PostedPerson (Person person)
{
 string PersonName = person.firstName;
 string SocialSecurityNumber = person.SSN.SSN;//or person.SSN.Decrypt();
 //TODO: decrypt SocialSecurity number
} 
```

如果您使用 FormCollection 进行模型绑定，则必须设置某种标志或使用抽象来标记该字段已加密

```
public class Person
{
 public string firstName { get; set; }
 public SocialSecurityNumber SSN { get; set; }
}

public class SocialSecurityNumber
{
 public string SSN { get; set; }
 public string Encrypted { get; set; }//set this to "EncryptedTrue" or something
                                      //similar in order to handle it in the post
} 
```

然后使用您的表单集合

```
[HttpPost]
public ActionResult PostedPerson (FormCollection fc)
{
 for( var val in fc )
 { 
  if( val is InnerList ){
  {
   if( val.Contains("EncryptedTrue") )
   {
    //then val.SSN would be an encryped social security number
   }
  }
 }
} 
```

# java - Java中有“旧线”字符吗？

> ID：13446412
> 
> 赞同：4
> 
> 时间：2012-11-19T01:07:40.693
> 
> 标签：java, terminal, newline

是否存在与`'\n'`Java 中的换行符相反的内容，它将移回控制台中的上一行？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-19T01:11:28.890

ASCII 没有标准化“line starve”或反向换行控制字符。一些基于字符的终端/终端仿真器识别将光标向上移动一行的控制代码序列；这些不是特定于 Java 的，并且取决于您的操作系统和配置。如果您使用的是 Linux，这是一个起点：http: [//www.kernel.org/doc/man-pages/online/pages/man4/console_codes.4.html](http://www.kernel.org/doc/man-pages/online/pages/man4/console_codes.4.html)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-19T01:20:22.180

Java 支持 Unicode，它具有字符["REVERSE LINE FEED" (U+008D)](http://www.fileformat.info/info/unicode/char/8d/index.htm)。在 Java 中，它将是`'\u008D'`(as a `char`) 或`"\u008D"`(as a `String`)。这是否会在控制台、打印输出或其他任何东西上执行您想要的操作，取决于设备。Java 没有为该字符定义任何行为。

# asp.net - 会话身份验证等同于 FormsAuthentication？

> ID：13446419
> 
> 赞同：-1
> 
> 时间：2012-11-19T01:08:38.557
> 
> 标签：asp.net, asp.net-mvc-4

我正在使用登录表单来验证用户身份。

`FormsAuthentication`是正确的，因为它将敏感的用户/角色成员身份存储在客户端的 cookie 或 URL 中。URL 中存在*巨大*的安全风险，因此我什至不会涉及。使用 `FormsAuthentication`cookie，这会产生以下问题： a) 客户端处于指定其自己角色的位置的安全性；b) Cookie 中存储的数据过多。由于我没有通过安全获得任何收益，并且在用户数据存储的大小上浪费了大量时间，我宁愿只使用 Sessions。

我想`FormsAuthentication`为所有基本的登录表单处理功能重用类似的东西。但我宁愿让它将用户数据服务器端存储在 Session 中，而不是将客户端全部塞进一个 cookie 中。我宁愿只针对某种会话令牌进行身份验证。

我*没有*数据库，并且禁止本地磁盘存储用户数据。我依赖 3rd 方身份验证服务提供商，并且要求我*必须*减少与此服务的聊天。因此，用于临时存储用户信息的会话。糟透了，但这不一定是我要问的问题。此外，一个要求是我必须设置/使用 HttpContext.user 和可能的 Thread.CurrentPrincipal 以便稍后在 AuthorizeAttribute 等事情中使用，以便在视图中显示用户信息等。

因此，`FormsAuthentication`将*所有*用户数据客户端存储在 cookie 中。而 Session 将所有数据存储在服务器端，并且仅依赖于简单的客户端令牌 cookie。但是，在 asp.net 启动和身份验证步骤期间，Session 在任何地方都不可用。是否有等效形式的“成员资格”提供程序将所有数据存储在会话服务器端而不是客户端？

如果没有 Session 等价物...

1.  我在哪里设置 HttpContext.user*和*Thread.CurrentPrincipal 以使这两个值在两个 MVC 应用程序的其余部分中都可用，而不会干扰或弄乱其他 MVC 组件？
2.  取决于＃1，该入口点是否可以使用 Session ？如果没有，我如何使它可用，以便我可以使用存储在 Session 中的数据创建 Principle/Identity 对象？
3.  这不可能是一个独特的要求。是否已经有库可以处理这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T01:19:19.463

会话也将信息存储在客户端 cookie 中！（如果没有 cookie，则在 URL 中）。

如果您想对客户端进行身份验证，他必须提供某种凭据——通常是他登录后 cookie 中的加密令牌。如果不是 cookie，那你有什么建议？

您应该使用 FormsAuthentication。存储在客户端 cookie 中的敏感信息使用只有 Web 服务器才知道的密钥进行加密。“加密方法是公共知识”并不意味着您可以在不访问适当的加密密钥的情况下解密数据。

您提到“角色”和“第三方身份验证提供者”。如果您的第三方也提供角色（即“授权提供者”和“身份验证提供者”），那么在服务器上缓存从提供者获得的角色是合理的。当请求被授权时，Session 是不可用的，所以最好的解决方案是使用缓存（System.Web.Caching.Cache）。

我个人会将其封装在[自定义 RoleProvider](http://msdn.microsoft.com/en-us/library/8fw7xh74(v=vs.100).aspx)中。自定义 RoleProvider 将`GetRolesForUser`通过在第一次调用时从第三方获取角色，然后将它们缓存在 Cache 中来实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T02:15:03.373

不确定我是否喜欢我将要提出的建议，但您可以执行以下操作：

*   利用应用程序状态或`System.Cache`作为用户凭据的全局存储。
*   使用也可以加密的 InMemory 数据库（如 RavenDb）（我相信在内存中）。

    使用应用程序状态作为存储相对常见/频繁的东西的地方，我认为这不是一个好地方，因为

    *   缩放/锁定问题？<--只是一种直觉。
    *   永久数据？所以你在网站的内存中有用户......然后网站崩溃或回收等......现在这些数据会发生什么？
    *   RavenDb 非常棒 - go.use.it.now。

我知道您没有在本地存储任何内容，因此每当用户访问您的系统时，您都需要刷新内存缓存等。很好。屁股疼，不过还好。（编辑：除非数据已缓存在内存中......也就是说）

总之，有两个建议。

**专家提示：**

哦！摆脱基于角色的 shiz 并开始使用[基于声明的身份](http://leastprivilege.com/2012/06/15/my-sessions-from-ndc-2012/)内容。是的，它仍然适用于 IPrincipal 和 HttpContext.User 等。所以之前的所有代码都没有被破坏。但现在它已融入 .NET 4.5

[给你、我、每个人的精彩视频](http://vimeo.com/43549130)！

**最后 - 奖金建议**

[![在此处输入图像描述](../Images/7f97093f4e620bbaa8aedf58efdd9cb5.png)](http://nuget.org/packages/World-Domination.Web.Authentication)

一个很好的包，可以通过 Facebook/Google/Twitter 进行身份验证。您说您将用户信誉保留在另一个站点上（好举措！）。如果您使用其他提供商，请坚持使用 DNOA 或 SS。

GL！

# python - Tweepy 和烧瓶：未能获取请求令牌

> ID：13446425
> 
> 赞同：4
> 
> 时间：2012-11-19T01:09:20.810
> 
> 标签：python, flask, tweepy

我尝试使用 Tweepy 和 Flask，但我似乎得到了请求令牌。

这是失败的代码。

```
CONSUMER_TOKEN='fill this out'
CONSUMER_SECRET='and this'
CALLBACK_URL = 'http://localhost:5000/verify'
session = dict()
db = dict() #you can save these values to a database

@app.route("/")
def send_token():
    auth = tweepy.OAuthHandler(CONSUMER_TOKEN, 
        CONSUMER_SECRET, 
        CALLBACK_URL)

    try: 
        #get the request tokens
        redirect_url= auth.get_authorization_url()
        session['request_token']= (auth.request_token.key,
            auth.request_token.secret)
    except tweepy.TweepError:
        print 'Error! Failed to get request token'

    #this is twitter's url for authentication
    return flask.redirect(redirect_url) 
```

它来自[这个](https://github.com/whichlight/flask-tweepy-oauth)github 项目。当然，我替换了消费者令牌/秘密。

为什么 auth.get_authorization_url() 失败？

谢谢你。

完整的日志是这个

```
 * Running on http://127.0.0.1:5000/
Error! Failed to get request token
127.0.0.1 - - [20/Nov/2012 22:54:28] "GET / HTTP/1.1" 500 -
127.0.0.1 - - [20/Nov/2012 22:54:29] "GET /favicon.ico HTTP/1.1" 404 - 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T19:21:19.207

看起来 Tweepy 默认使用`http://`oauth 端点的协议。您需要更改代码以强制它使用`https://`. 这可能会解决您的问题。

当你`OAuthHandler`像这样实例化类时，你会这样做：

```
auth = tweepy.OAuthHandler(CONSUMER_TOKEN, 
    CONSUMER_SECRET, 
    CALLBACK_URL, secure=True) 
```

# jquery - jQuery无法让if语句工作

> ID：13446427
> 
> 赞同：0
> 
> 时间：2012-11-19T01:09:41.473
> 
> 标签：jquery, if-statement

我正在寻求有关 If 语句的帮助。我正在尝试完成我拥有的水平滚动，最后一点是不仅要在到达终点时禁用滚动，还要在该点禁用（嗯，更改颜色）滚动按钮。并在它们再次可滚动时变回来。

[http://jsfiddle.net/stfzy/83/](http://jsfiddle.net/stfzy/83/)

编辑*我已经更新了 JQuery 并且除了一个 if 语句之外一切正常：

```
$('div#arrowL').click(function(){
    if(index < 0 ){ //can't scroll
        $('div#arrowL').addClass('active');
    }
}); 
```

当你不能再向左滚动时，我需要重新添加这个类。而且我认为问题出在“index < 0”部分，但我看不出我需要对其进行更改以使其正常工作。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T01:31:23.387

您的`if(index...`语句只会在页面加载时运行。它们需要在您的点击处理程序中才能检查当前状态。由于您已经进行了反向测试，因此只需添加一个`else`

```
$('div#arrowR').click(function() {
    if (index < endIndex) {
        index++;
        $item.animate({
            'left': '-=300px'
        });
        $('div#arrowR').removeClass('active');
    }else{       
        $('div#arrowR').addClass('active');
    }
}); 
```

演示：http: [//jsfiddle.net/stfzy/48/](http://jsfiddle.net/stfzy/48/)

# html - 为什么 CSS 动画不起作用

> ID：13446428
> 
> 赞同：0
> 
> 时间：2012-11-19T01:09:50.767
> 
> 标签：html, css, animation

动画应该来回摆动。但我不知道为什么不是。这是网站[http://codepen.io/anon/pen/tasJE](http://codepen.io/anon/pen/tasJE)的代码。那就是它应该看起来像

CSS

```
#menu {
  position: relative;
  right: 30px;
  float: right;
  padding: 0 20px;
  border-radius: 3px;
  box-shadow: inset 0 1px 1px rgba(255,255,255,.5), inset 0 -1px 0 rgba(0,0,0,.15), 0 1px 3px rgba(0,0,0,.15);
  background: #ccc; 
}
#menu, #menu ul {
  list-style: none;
}
#menu > li {
  float: left;
  position: relative;
  border-right: 1px solid rgba(0,0,0,.1);
  box-shadow: 1px 0 0 rgba(255,255,255,.25);
  perspective: 1000px;
}
#menu > li:first-child {
  border-left: 1px solid rgba(255,255,255,.25);
  box-shadow: -1px 0 0 rgba(0,0,0,.1), 1px 0 0 rgba(255,255,255,.25);
}
  #menu a {
  display: block;
  position: relative;
  z-index: 10;
  padding: 13px 20px 13px 20px;
  text-decoration: none;
  color: rgba(75,75,75,1);
  line-height: 1;
  font-weight: 600;
  font-size: 12px;
  letter-spacing: -.05em;
  background: transparent;      
  text-shadow: 0 1px 1px rgba(255,255,255,.9);
  transition: all .25s ease-in-out;
}
#menu > li:hover > a {
  background: #333;
  color: rgba(0,223,252,1);
  text-shadow: none;
}
#menu li ul  {
  position: absolute;
  left: 0;
  z-index: 1;
  width: 71px;
  padding: 0;
  opacity: 0;
  visibility: hidden;
  border-bottom-left-radius: 4px;
  border-bottom-right-radius: 4px;
  background: transparent;
  overflow: hidden;
  transform-origin: 50% 0%;
}
#menu li:hover ul {
  padding: 0px 0;
  background: #333;
  opacity: 1;
  visibility: visible;
  box-shadow: 1px 1px 7px rgba(0,0,0,.5);
  animation-name: swingdown;
  animation-duration: 1s;
  animation-timing-function: ease;
}
@keyframes swingdown {
    0% {
      opacity: .99999;
      transform: rotateX(90deg);
    }
    30% {           
      transform: rotateX(-20deg) rotateY(5deg);
      animation-timing-function: ease-in-out;
    }
    65% {
      transform: rotateX(20deg) rotateY(-3deg);
      animation-timing-function: ease-in-out;
    }
    100% {
      transform: rotateX(0);
      animation-timing-function: ease-in-out;
    }
}
#menu li li a {
  padding-left: 15px;
  font-weight: 200;
  color: #ddd;
  text-shadow: none;
  border-top: dotted 1px transparent;
  border-bottom: dotted 1px transparent;
  transition: all .15s linear;
}

#menu li li a:hover {
  color: rgba(0,223,252,1);
  border-top: dotted 1px rgba(255,255,255,.15);
  border-bottom: dotted 1px rgba(255,255,255,.15);
  background: rgba(0,223,252,.02);
} 
```

HTML

```
<ul id="menu">
  <li><a href="#">More</a>
        <ul>
            <li><a href="#">Home</a></li>
            <li><a href="#">Facts</a></li>
            <li><a href="#">Tour</a></li>
            <li><a href="#">Author</a></li>
        </ul>
</ul>​ 
```

这是 jfiddle [http://jsfiddle.net/jspence29/CVnf4/](http://jsfiddle.net/jspence29/CVnf4/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T01:30:18.600

^(这是对上述评论的扩展。)

JSFiddle 允许您通过左侧的面板加载外部 JavaScript 文件。
那是我加载的地方`-prefix-free`。

这是一个屏幕截图：

![](../Images/5b5cdbd7d41e78aa22789062bd1b175a.png)

# iphone - 在 iOS 上播放 MP3 或 AAC 文件有哪些音频播放选项？

> ID：13446430
> 
> 赞同：0
> 
> 时间：2012-11-19T01:10:00.050
> 
> 标签：iphone, ios, ipad, core-audio, avaudioplayer

我发现 AVAudioPlayer 可以播放 MP3 或 AAC。但它也有很大的延迟。它似乎首先将整个文件加载到内存中。

还有比 AVAudioPlayer 更有效的选择吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T10:25:35.670

您可以使用 OpenAL 库，这对于您正在谈论的目的非常非常有效

链接在这里

[https://github.com/kstenerud/ObjectAL-for-iPhone](https://github.com/kstenerud/ObjectAL-for-iPhone)

看看。它太容易集成和实现了。

干杯！！！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T01:53:05.143

是的，有[`AVPlayer`](https://developer.apple.com/library/ios/#documentation/AVFoundation/Reference/AVPlayer_Class/Reference/Reference.html)and [`MPMoviePlayerController`](http://developer.apple.com/library/ios/#documentation/mediaplayer/reference/MPMoviePlayerController_Class/Reference/Reference.html)（尽管它的名字，它也可以播放音频文件）。`MPMoviePlayerController`在我看来，往往更容易使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T03:23:12.337

您可以在 iOS 上获得的最低级别和最低延迟选项是 RemoteIO。

这个问题有一些更相关的信息：[Playback MP3 using RemoteIO and AudioUnits on iPhone... possible?](https://stackoverflow.com/questions/1857637/playback-mp3-using-remoteio-and-audiounits-on-iphone-possible)

# java - 选定项目的 Java JCombobox 着色在焦点丢失之前不会更新

> ID：13446433
> 
> 赞同：2
> 
> 时间：2012-11-19T01:10:51.640
> 
> 标签：java, swing, jcombobox, listcellrenderer

我对这段代码有一个难题：

```
public class StatusAndPersonPanel implements ActionListener {

    private JPanel myPanel;
    private String[] status = {"Good", "Bad", "Not so bad"};
    private Color[] backgrounds = {Color.GREEN, Color.RED, Color.ORANGE};
    private JComboBox<String> box;

    public ComboboxConstructor() {
        myPanel = new JPanel();
        box = new JComboBox<String>(status);
        ComboBoxRenderer myBackgrounds = new ComboBoxRenderer(box);
        myBackgrounds.setColors(backgrounds);
        myBackgrounds.setStrings(status);

        box.setRenderer(myBackgrounds);
        box.addActionListener(this);

        Color selectedColor = (Color) backgrounds[box.getSelectedIndex()];
        box.setBackground(selectedColor);
        myPanel.add(box); // putting it into my panel
    }

    @Override
    public void actionPerformed(ActionEvent event) {

        Color selectedColor = (Color) backgrounds[box.getSelectedIndex()];
        box.setBackground(selectedColor);
    }
} 
```

正如您在图像中看到的那样，在第 1 步中，所有颜色都按照我的意愿制作，但现在我点击“没那么糟糕”，然后`JComboBox`选择正确的折叠，但不会改变颜色（箭头会，我不知道为什么），直到我失去焦点（第 3 步，单击另一个 `JPanel 元素），颜色才正确给出。

现在，我知道这只是一个小小的美容问题，但它让我发疯了！我尝试使用`ActionListener`、`ItemListener`（更改后）和`FocusListener`（失去和获得焦点），但结果始终与步骤 2 中所示相同。

![图片](../Images/27b5f97ca0d571c6a50d4469c365e0b7.png)

非常感谢您提前提供的帮助和想法！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T02:06:06.547

A[`JComboBox`](http://docs.oracle.com/javase/tutorial/uiswing/components/combobox.html)使用单个[渲染器](http://docs.oracle.com/javase/tutorial/uiswing/components/combobox.html#renderer)显示所有单元格。你可以改变你的颜色`ListCellRenderer`，如图所示[`CustomComboBoxDemo`](http://docs.oracle.com/javase/tutorial/uiswing/components/combobox.html#eg)。

附录：相关示例可在此[问答](https://stackoverflow.com/q/7620579/230513)中找到。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T23:15:42.513

我找到了答案……我只需要写 box.transferFocusUpCycle(); 在 ActionPerformed 方法中

所以他失去了焦点，像第 2 步一样重新绘制选定的项目。无论如何，感谢您的建议！最好的安德里亚

# c++ - 用于并行化我的代码的 TBB 教程/文档？

> ID：13446434
> 
> 赞同：3
> 
> 时间：2012-11-19T01:10:58.670
> 
> 标签：c++, multithreading, loops, tbb

我发现英特尔的线程构建块库有点令人困惑。例如，我想使用 TBB 并行化以下计算：

```
int CountNegatives(std::vector<Trigraph> input)
{
    int count = 0;
    for(int i = 0; i< input.size(); i++)
    {
        if(input[i].VisibleFrom(viewPoint))
        {
            count++;
        }
    }
    return count;
} 
```

我知道您必须`operator()`在 TBB 中使用 with 类来执行此操作；真的吗？我本来想阅读一些关于 TBB 的“初学者教程”来帮助我弄清楚这一点，但似乎没有任何初学者教程。

你能帮我至少把 TBB 应用到这个计算中吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-19T04:23:44.327

TBB 有一个[帮助参考文档](http://software.intel.com/en-us/node/506130)，对入门非常有用。使用[doc](https://software.intel.com/en-us/node/506057) for `parallel_for`，将您的示例转换为使用 parallel_for 非常简单。下面是一些示例代码。这不是 100%，但你可以理解。上面的链接也包含一些更有趣功能的示例。

```
#include <tbb/parallel_for.h>
#include <tbb/atomic.h>
#include <iostream>
#include <vector>

/** 
 * To be used with tbb::parallel_for, this increments count
 * if the value at the supplied index is zero.
 */
class ZeroCounter
{
public:
    ZeroCounter(std::vector<int> * vec, tbb::atomic<int> * count) :
        vec(vec),
        count(count)
    { } 

    void operator()(int index) const
    {
        if((*vec)[index] == 0)
            ++(*count);
    }

    std::vector<int> * vec;
    tbb::atomic<int> * count;
};

int main()
{
    // Create a vector and fill it with sample values
    std::vector<int> a;
    a.push_back(0);
    a.push_back(3);
    a.push_back(0);

    // Counter to track the number of zeroes
    tbb::atomic<int> count;
    count = 0;

    // Create our function object and execute the parallel_for
    ZeroCounter counter(&a, &count);
    tbb::parallel_for(size_t(0), a.size(), counter);

    std::cout << count << std::endl;
} 
```

# .htaccess - GitHub Pages 是否有 .htaccess 的替代方案？

> ID：13446435
> 
> 赞同：50
> 
> 时间：2012-11-19T01:11:20.493
> 
> 标签：.htaccess, github, github-pages

我了解GitHub Pages`.htaccess` [不支持此功能。](http://rawsyntax.com/blog/blogging-on-jekyll-url-redirects/)对于 GitHub Pages 托管的网站，是否有其他方法可以对特定目录进行密码保护？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2014-10-20T21:48:23.737

虽然你不能使用`.htaccess`or `.conf`，但~~Github 上有关于如何使用~~Jekyll Redirect From 插件的说明。

~~https://help.github.com/articles/redirects-on-github-pages/~~

上面的页面不再提及该插件。jekyll-redirect-from 插件 GitHub 存储库的直接链接是[https://github.com/jekyll/jekyll-redirect-from](https://github.com/jekyll/jekyll-redirect-from)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-02-13T09:01:55.330

“不幸的是，GitHub pages 只支持静态页面。没有办法让它执行服务器端代码，因此不可能用任何类型的身份验证方案来保护你的页面。如果你进一步解释为什么需要密码保护你的页面，也许我可以帮助您找到解决方法。”

来源：[https ://webapps.stackexchange.com/questions/35692/is-there-an-alternative-to-using-htaccess-to-password-protect-subdirectories-in](https://webapps.stackexchange.com/questions/35692/is-there-an-alternative-to-using-htaccess-to-password-protect-subdirectories-in)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-05-03T18:12:40.990

我正在使用 a`404.html`将用户从旧 S9Y index.php 重定向到我在 Github Pages 上的新博客。检查此提交：[https ://github.com/lionello/lionello.github.io/commit/c175f6524a53e29aea1890c8a758afd0e8944852](https://github.com/lionello/lionello.github.io/commit/c175f6524a53e29aea1890c8a758afd0e8944852)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2020-04-17T14:08:49.887

`.htaccess`当您在 github 页面中查找重定向时，这篇文章会出现在网络搜索的顶部。我将在这个意义上回答这个问题。

一种选择是改用 DNS 重定向。您可以通过在项目的根目录中放置一个名为的文件来执行此操作`CNAME`（不确定它是否在子目录中工作）。只需将重定向 URL 放入文件中即可。但是，有一些限制，例如您只能重定向到网站的根目录。

# authentication - Apache Shiro：多领域的异常处理

> ID：13446436
> 
> 赞同：4
> 
> 时间：2012-11-19T01:11:20.137
> 
> 标签：authentication, shiro

我们正在使用两个领域（一个用于散列密码，另一个用于生成的明文密钥） - 这按预期工作。

对于单个领域，我们可以`DisabledAccountException`在我们的领域中抛出一个异常，`protected AuthenticationInfo doGetAuthenticationInfo(final AuthenticationToken authToken)`并在我们的应用程序中显式捕获这样的异常。

现在我们有了两个领域，所有异常都被 Shiro 内部捕获；所以如果一个境界失败了，也可以尝试第二个境界。但是，这种重定向只会`AuthenticationExceptions`对我们的应用程序抛出泛型。

是否有多个领域的解决方法，以便我们可以有更具体的例外（要知道一个帐户是否被锁定，凭据是否完全错误，......）？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-19T12:15:03.743

您需要在*ModularRealmAuthenticator*中指定自己的*AuthenticationStrategy*。ModularRealmAuthenticator*默认*使用*AtLeastOneSuccessfulStrategy*并且*AtLeastOneSuccessfulStrategy*忽略异常并继续尝试使用所有可用领域登录用户。

 ***我们在[tynamo](http://tynamo.org/)项目中有一个类似的场景，为了解决这个问题，我实现了我自己的*AuthenticationStrategy*，称为*FirstExceptionStrategy*，它适用于多个领域并抛出它得到的第一个异常。只要**每个*****Token*** **type只有****一个*Realm*** *，这种方法就可以正常工作。*

 *实现相当简单：

```
/**
 * {@link org.apache.shiro.authc.pam.AuthenticationStrategy} implementation that throws the first exception it gets
 * and ignores all subsequent realms. If there is no exceptions it works as the {@link FirstSuccessfulStrategy}
 *
 * WARN: This approach works fine as long as there is ONLY ONE Realm per Token type.
 *
 */
public class FirstExceptionStrategy extends FirstSuccessfulStrategy {

    @Override
    public AuthenticationInfo afterAttempt(Realm realm, AuthenticationToken token, AuthenticationInfo singleRealmInfo, AuthenticationInfo aggregateInfo, Throwable t) throws AuthenticationException {
        if ((t != null) && (t instanceof AuthenticationException)) throw (AuthenticationException) t;
        return super.afterAttempt(realm, token, singleRealmInfo, aggregateInfo, t);
    }

} 
```

我再说一遍，这**只有**在每个 Token 类型**只有一个**Realm 时才有效。

有关我的特定场景的更多信息，请参见此处：http: [//jira.codehaus.org/browse/TYNAMO-154](http://jira.codehaus.org/browse/TYNAMO-154)****

# php - 使用 if 和 while 获取数组不起作用

> ID：13446440
> 
> 赞同：-1
> 
> 时间：2012-11-19T01:12:02.580
> 
> 标签：php, fetch

基本上我在同一个类中有 2 个方法，getMovie 和 getGenres。它们非常相似，但 One 没有返回我所期望的。

这是 getMovie 方法：

```
public function getMovie($argType, $arg){
        $movieQuery =  "SELECT  id,
                                rt_id,
                                imdb_id,
                                url,
                                rt_url,
                                type,
                                adult,
                                DATE_FORMAT(release_date, '%Y') AS year,
                                date_added,
                                title,
                                runtime,
                                budget,
                                revenue,
                                homepage,
                                rating,
                                tagline,
                                overview,
                                popularity,
                                image,
                                backdrop,
                                trailer
                        FROM    movies
                        WHERE   " . $argType . " = " . $arg;

        $movieResult = $this->_query($movieQuery);
        $movies = array();

        if($movieResult->fetch_array(MYSQLI_ASSOC)){
            while($m = $movieResult->fetch_array(MYSQLI_ASSOC)){
                $movies[] = array(  'title' => $m['title'],
                                    'duplicate' => $m['duplicate'],
                                    'url' => $m['url'],
                                    'rt_url' => $m['rt_url'],
                                    'release_date' => $m['release_date'],
                                    'date_added' => $m['date_added'],
                                    'type' => 'movie',
                                    'adult' => $m['adult'],
                                    'id' => $id,
                                    'rt_id' => $m['rt_id'],
                                    'imdb_id' => $m['imdb_id'],
                                    'rating' => $m['rating'],
                                    'tagline' => $m['tagline'],
                                    'overview' => $m['overview'],
                                    'popularity' => $m['popularity'],
                                    'runtime' => $m['runtime'],
                                    'budget' => $m['budget'],
                                    'revenue' => $m['revenue'],
                                    'homepage' => $m['homepage'],
                                    'image' => $m['image'],
                                    'backdrop' => $m['backdrop'],
                                    'trailer' => $m['trailer'] );
            }
            return $movies;
        }
        else{
            return false;
        } 
```

这是 getGenres 方法：

```
public function getGenres($movieId = NULL){
        $genresQuery = "";
        if($movieId != NULL){
            $genresQuery = "SELECT  id,
                                    name
                            FROM    genres
                            WHERE   id = ANY (
                            SELECT  genre_id
                            FROM    movie_genres
                            WHERE   movie_id = " . $movieId . ")";
        }
        else{
            $genresQuery = "SELECT  id,
                                    name
                            FROM    genres";
        }
        $genresResult = $this->_query($genresQuery);
        $genres = array();

        if($genresResult->fetch_array(MYSQLI_ASSOC)){
            while($genre = $genresResult->fetch_array(MYSQLI_ASSOC)){
                $genres[] = array(  'id' => $genre['id'],
                                    'name' => $genre['name'] );
            }
            return $genres;
        }
        else{
            return false;
        }
    } 
```

我是这样称呼它们的：

$mov = $movie->getMovie(2207); print_r($mov); // 输出：数组（）

$gen = $movie->getGenres(2207); print_r($gen); // 输出：数组（里面的值）

这两个查询实际上都返回了预期值，但 getMovies 方法不适用于 if 语句。如果我只有 while 循环，它工作正常。

我正在使用 if 和 while，因为我听说即使没有值，while 循环有时也可以执行。有没有道理呢？如果确实有理由使用 if 语句以及 wile 循环，那么为什么它不能与 getMovies 方法一起使用？

编辑1：我尝试像这样存储数组，但这导致了与内存相关的错误：

```
$r = $genresResult->fetch_array(MYSQLI_ASSOC);
if($r){
            while($r){
                $genres[] = array(  'id' => $genre['id'],
                                    'name' => $genre['name'] );
            }
            return $genres;
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T01:34:18.180

> 我正在使用 if 和 while，因为我听说即使没有值，while 循环有时也可以执行。有没有道理呢？

不，根据[php 手册](http://www.php.net/manual/en/mysqli-result.fetch-array.php)mysqli_result::fetch_array 返回与获取的行相对应的字符串数组，如果结果集中没有更多行，则返回**NULL 。**

Null 是假的，因此不会进入 while 循环。

虽然如果你有一个 if 语句是不必要的，你可以使用它[`mysqli_result::$num_rows`](http://www.php.net/manual/en/mysqli-result.num-rows.php)来检查查询是否返回了任何行。

```
if($movieResult->num_rows > 0){
    while($m = $movieResult->fetch_array(MYSQLI_ASSOC)){
    ...
    }
} 
```

# python - Python多处理安全地写入文件

> ID：13446445
> 
> 赞同：97
> 
> 时间：2012-11-19T01:13:12.113
> 
> 标签：python, io, multiprocessing, mutex

我正在尝试解决一个涉及大量子问题的大数值问题，并且我正在使用 Python 的多处理模块（特别是 Pool.map）将不同的独立子问题拆分到不同的核心上。每个子问题都涉及计算大量子子问题，如果尚未由任何进程计算，我试图通过将它们存储到文件中来有效地记忆这些结果，否则跳过计算并从文件中读取结果。

我遇到了文件的并发问题：不同的进程有时会检查是否已经计算了子子问题（通过查找将存储结果的文件），看看它没有，运行计算，然后尝试将结果同时写入同一个文件。如何避免写这样的冲突？

* * *

## 回答 #1

> 赞同：158
> 
> 时间：2012-11-23T13:38:36.637

@GP89 ​​提到了一个很好的解决方案。使用队列将写入任务发送到对文件具有唯一写入权限的专用进程。所有其他工作人员都具有只读访问权限。这将消除碰撞。这是一个使用 apply_async 的示例，但它也适用于 map：

```
import multiprocessing as mp
import time

fn = 'c:/temp/temp.txt'

def worker(arg, q):
    '''stupidly simulates long running process'''
    start = time.clock()
    s = 'this is a test'
    txt = s
    for i in range(200000):
        txt += s 
    done = time.clock() - start
    with open(fn, 'rb') as f:
        size = len(f.read())
    res = 'Process' + str(arg), str(size), done
    q.put(res)
    return res

def listener(q):
    '''listens for messages on the q, writes to file. '''

    with open(fn, 'w') as f:
        while 1:
            m = q.get()
            if m == 'kill':
                f.write('killed')
                break
            f.write(str(m) + '\n')
            f.flush()

def main():
    #must use Manager queue here, or will not work
    manager = mp.Manager()
    q = manager.Queue()    
    pool = mp.Pool(mp.cpu_count() + 2)

    #put listener to work first
    watcher = pool.apply_async(listener, (q,))

    #fire off workers
    jobs = []
    for i in range(80):
        job = pool.apply_async(worker, (i, q))
        jobs.append(job)

    # collect results from the workers through the pool result queue
    for job in jobs: 
        job.get()

    #now we are done, kill the listener
    q.put('kill')
    pool.close()
    pool.join()

if __name__ == "__main__":
   main() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-12-21T17:02:35.040

在我看来，您需要使用`Manager`将结果临时保存到列表中，然后将列表中的结果写入文件。此外，用于`starmap`传递您要处理的对象和托管列表。第一步是构建要传递给的参数`starmap`，其中包括托管列表。

```
from multiprocessing import Manager
from multiprocessing import Pool  
import pandas as pd

def worker(row, param):
    # do something here and then append it to row
    x = param**2
    row.append(x)

if __name__ == '__main__':
    pool_parameter = [] # list of objects to process
    with Manager() as mgr:
        row = mgr.list([])

        # build list of parameters to send to starmap
        for param in pool_parameter:
            params.append([row,param])

        with Pool() as p:
            p.starmap(worker, params) 
```

从这一点开始，您需要决定如何处理列表。如果您有大量 RAM 和庞大的数据集，请随意使用 pandas 进行连接。然后，您可以非常轻松地将文件保存为 csv 或 pickle。

```
 df = pd.concat(row, ignore_index=True)

        df.to_pickle('data.pickle')
        df.to_csv('data.csv') 
```

# ruby-on-rails - Rails：Heroku 首次部署失败

> ID：13446449
> 
> 赞同：1
> 
> 时间：2012-11-19T01:14:13.733
> 
> 标签：ruby-on-rails, deployment, heroku

我认为问题在于我使用的是 SQLite3，所以我迁移到 PostgreSQL，但问题仍然存在。该应用程序在本地运行良好。我在打开 heroku 的情况下打开我的应用程序，它给了我以下错误：

```
Application Error. An error occurred in the application and your page could not be served. Please try again in a few moments. If you are the application owner, check your logs for details.. 
```

我试图通过查看日志找到解决方案但失败了，所以我需要有人的帮助。**这是我的日志，感谢您的帮助！**

```
2012-11-19T00:55:37+00:00 heroku[web.1]: Starting process with command `bundle exec thin start -R config.ru -e production -p 3545`
2012-11-19T00:55:39+00:00 app[web.1]: DEPRECATION WARNING: You have Rails 2.3-style plugins in vendor/plugins! Support for these plugins will be removed in Rails 4.0\. Move them out and bundle them in your
the release notes for more on this: http://weblog.rubyonrails.org/2012/01/04/rails-3-2-0-rc2-has-been-released. (called from <top (required)> at /app/config/environment.rb:5)
2012-11-19T00:55:39+00:00 app[web.1]: DEPRECATION WARNING: You have Rails 2.3-style plugins in vendor/plugins! Support for these plugins will be removed in Rails 4.0\. Move them out and bundle them in your
the release notes for more on this: http://weblog.rubyonrails.org/2012/01/04/rails-3-2-0-rc2-has-been-released. (called from <top (required)> at /app/config/environment.rb:5)
2012-11-19T00:55:41+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.1/lib/rails/application.rb:136:in `initialize!'
2012-11-19T00:55:41+00:00 app[web.1]: /app/config/initializers/formtastic.rb:2:in `<top (required)>': uninitialized constant Formtastic (NameError)
2012-11-19T00:55:41+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.1/lib/rails/engine.rb:588:in `block (2 levels) in <class:Engine>'
2012-11-19T00:55:41+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.1/lib/rails/initializable.rb:30:in `run'
2012-11-19T00:55:41+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.1/lib/rails/engine.rb:587:in `each'
2012-11-19T00:55:41+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.1/lib/rails/initializable.rb:55:in `block in run_initializers'
2012-11-19T00:55:41+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.1/lib/rails/initializable.rb:30:in `instance_exec'
2012-11-19T00:55:41+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.1/lib/rails/engine.rb:587:in `block in <class:Engine>'
2012-11-19T00:55:41+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.1/lib/rails/initializable.rb:54:in `each'
2012-11-19T00:55:41+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.1/lib/rails/initializable.rb:54:in `run_initializers'
2012-11-19T00:55:41+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.1/lib/rails/railtie/configurable.rb:30:in `method_missing'
2012-11-19T00:55:41+00:00 app[web.1]:   from /app/config/environment.rb:5:in `<top (required)>'

2012-11-19T00:55:41+00:00 app[web.1]:   from config.ru:3:in `require'
2012-11-19T00:55:41+00:00 app[web.1]:   from config.ru:3:in `block in <main>'
2012-11-19T00:55:41+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/builder.rb:51:in `instance_eval'
2012-11-19T00:55:41+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/builder.rb:51:in `initialize'
2012-11-19T00:55:41+00:00 app[web.1]:   from config.ru:1:in `new'
2012-11-19T00:55:41+00:00 app[web.1]:   from config.ru:1:in `<main>'
2012-11-19T00:55:41+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/thin-1.5.0/lib/rack/adapter/loader.rb:33:in `eval'
2012-11-19T00:55:41+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/thin-1.5.0/lib/rack/adapter/loader.rb:33:in `load'
2012-11-19T00:55:41+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/thin-1.5.0/lib/thin/controllers/controller.rb:181:in `load_rackup_config'
2012-11-19T00:55:41+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/thin-1.5.0/lib/thin/runner.rb:187:in `run_command'
2012-11-19T00:55:41+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/thin-1.5.0/lib/thin/runner.rb:152:in `run!'
2012-11-19T00:55:41+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/thin-1.5.0/bin/thin:6:in `<top (required)>'
2012-11-19T00:55:41+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/bin/thin:19:in `load'

2012-11-19T00:55:41+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/bin/thin:19:in `<main>'
2012-11-19T00:55:41+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/thin-1.5.0/lib/thin/controllers/controller.rb:71:in `start'
2012-11-19T00:55:42+00:00 heroku[web.1]: Process exited with status 1
2012-11-19T00:56:34+00:00 heroku[router]: at=error code=H10 desc="App crashed" method=GET path=/ host=fast-savannah-6843.herokuapp.com fwd= dyno= queue= wait= connect= service= status=503 bytes=
2012-11-19T00:56:34+00:00 heroku[router]: at=error code=H10 desc="App crashed" method=GET path=/favicon.ico host=fast-savannah-6843.herokuapp.com fwd= dyno= queue= wait= connect= service= status=503 bytes=
2012-11-19T00:57:44+00:00 heroku[router]: at=error code=H10 desc="App crashed" method=GET path=/ host=fast-savannah-6843.herokuapp.com fwd= dyno= queue= wait= connect= service= status=503 bytes=
2012-11-19T00:57:44+00:00 heroku[router]: at=error code=H10 desc="App crashed" method=GET path=/favicon.ico host=fast-savannah-6843.herokuapp.com fwd= dyno= queue= wait= connect= service= status=503 bytes= 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-19T06:03:01.020

**对于初次部署的人员，以下是我遇到的问题以及我如何解决它们：**

**1、RailsInstaller和Heroku Toolbelt不完全兼容**：如果你在安装Heroku toolbelt后遇到问题，建议你把railsinstaller和heroku toolbelt一起删除，重新安装railsinstaller。然后，在您的 gem 文件中，只需添加`gem 'heroku'`并运行 bundle install。我不需要任何额外的东西来成功部署我的应用程序。*Heroku Toolbelt 安装了 ruby​​ 1.9.2 v，并为您的偏好添加了错误的路径。您可以选择手动将此 PATH 修复到正确的位置，例如 C:RailsInstaller:Ruby1.9.3 但我发现重新安装所有内容更容易。*

**2\. 你必须从 SQLite3 迁移到 PostgreSQL**：如果你不确定如何做，请按照[这个。](https://stackoverflow.com/questions/13439276/rails-deploying-to-heroku-many-problems)

**3\. 按照 Heroku 教程最终部署您的应用程序**：按照[此](https://devcenter.heroku.com/articles/rails3)操作。如果您收到与“对象不存在”类似的错误，请尝试运行`heroku run rake db:migrate`.

祝部署顺利！

# objective-c - 带有clang和gnustep的Objective-C中的简单Hello World无法编译

> ID：13446450
> 
> 赞同：5
> 
> 时间：2012-11-19T01:14:34.230
> 
> 标签：objective-c, clang

系统：

```
64bit Ubuntu Lucid
GNUStep
clang/LLVM 
```

测试.m

```
#import <Foundation/Foundation.h>

int main(int argc, char * argv[]){
    NSLog(@"Hello world!\n");
    return 0;
} 
```

编译命令行：

```
clang -fobjc-gc -I /usr/lib/gcc/x86_64-linux-gnu/4.4.3/include -I /usr/include/GNUstep/ -I /usr/lib/gcc/x86_64-linux-gnu/4.4.3/include-fixed/ -L /usr/lib/GNUstep/ -L /usr/lib64/ -fconstant-string-class=NSConstantString -rpath /usr/lib64 -Xlinker -lgnustep-base  test.m -o Test 
```

错误：

```
/usr/bin/ld: /usr/lib64//libgnustep-base.so: undefined reference to symbol '__objc_exec_class'
/usr/bin/ld: note: '__objc_exec_class' is defined in DSO /usr/lib64/libobjc.so.2 so try adding it to the linker command line
/usr/lib64/libobjc.so.2: could not read symbols: Invalid operation
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

使用 GCC 时，它编译得很好，但 clang 没有。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-20T19:04:42.957

在全新安装的 Ubuntu 12.10 上，我安装了以下软件包：

```
$ sudo apt-get install build-essential
$ sudo apt-get install clang
$ sudo apt-get install gnustep
$ sudo apt-get install gnustep-make
$ sudo apt-get install gnustep-devel
$ sudo ln -s /usr/lib/gcc/i686-linux-gnu/4.7/include/objc /usr/local/include/objc 
```

（需要最终的符号链接才能正确定位 objc.h 标头）

然后我编译test.m文件如下：

```
$ clang -o test test.m -I `gnustep-config --variable=GNUSTEP_SYSTEM_HEADERS` \
                       -L `gnustep-config --variable=GNUSTEP_SYSTEM_LIBRARIES` \
                       -lgnustep-base -fconstant-string-class=NSConstantString \
                       -D_NATIVE_OBJC_EXCEPTIONS \
                       -lobjc

tux@ubuntu:~/Desktop$ ./test 
2012-11-20 11:02:08.184 test[11856] Hello world! 
```

*** 编辑**

在新的 10.04-64bit 上，这允许编译得很好：

```
$ sudo apt-get install build-essential
$ sudo apt-get install clang
$ sudo apt-get install gnustep-devel
$ sudo ln -s /usr/lib/gcc/x86_64-linux-gnu/4.4.3/include/objc/ /usr/local/include/objc 
```

# c++ - 使快速排序按多个标准排序？

> ID：13446454
> 
> 赞同：2
> 
> 时间：2012-11-19T01:15:21.983
> 
> 标签：c++, algorithm, sorting, quicksort

有没有办法通过多个条件进行快速排序？例如，我有一组边。每条边都有源、目的地和长度。我想首先将长度较小的边缘放在我的数组中。但如果长度相同，我想用较小的源顶点对其进行排序。如果这些源顶点相同，我想按两个目标顶点中较小的一个进行排序。

例如：

4（源） 2（目的地） 3（长度）

1（源） 5（目的地） 3（长度）

由于它们都具有相同的长度，因此我们查看源顶点。由于第二条边小于第一条边，我们交换它们，因为我们按源顶点进行比较。

下面是我的快速排序，老实说，我不确定为什么它不能正确排序。如果有一种方法可以降低快速排序的效率但更稳定，我很乐意接受建议！

```
void quickSort(edge *e, int left, int right)
{
  int i = left, j = right;
  int temp, temp1, temp2;
  int pivot = (left + right)/2;
  while(i <= j)
  {
    while(e[i] < e[pivot])
      i++;
    while(e[pivot] < e[j])
      j--;
    if(i <= j)
    {
      temp = e[i].getLength();
      temp1 = e[i].getEdgeSrc();
      temp2 = e[i].getEdgeDes();
      e[i].setLength(e[j].getLength());
      e[i].setEdgeSrc(e[j].getEdgeSrc());
      e[i].setEdgeDes(e[j].getEdgeDes());
      e[j].setLength(temp);
      e[j].setEdgeSrc(temp1);
      e[j].setEdgeDes(temp2);
      i++;
      j--;
    } //if statement
  }///while loop
  if(left < j)
    quickSort(e, left, j);
  if(i < right)
    quickSort(e, i, right);
} 
```

我的条件排序：

```
bool edge::operator<(const edge &other) const 
{
    if (length < other.length)
        return true;
     else if ((length == other.length) && (source < other.source))
        return true;
     else if((length == other.length) && (source == other.source) && (destination < other.destination))
        return true;
     return false;
} 
```

同样，如果有人知道如何通过降低时间复杂度但使其稳定来正确地进行快速排序，我很乐意接受任何建议！谢谢！有什么帮助吗？

编辑：这就是我调用快速排序的方式。我根据读取的边数调用它。

```
 quickSort(e, 0, edges-1); //-1 because if you put in edges, it'd go past the bounds of the array 
```

编辑：当我尝试在我的算法中加入这样的东西时：

0 1 1

0 3 1

1 3 1

2 5 1

4 10 1

4 8 1

10 8 1

11 6 2

11 7 2

6 7 1

9 6 1

9 7 1

这是输出：

0 1 1

0 3 1

1 3 1

2 5 1

4 8 1

4 10 1

6 7 1

6 9 1

8 10 1 <- 应低于 7 9 1

7 9 1 <- 应该高于 8 10 1

6 11 2

7 11 2

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T01:19:30.507

这样写更干净

```
if (length != other.length)
   return length<other.length;

if ( source != other.source)
   return source < other.source;

return destination < other.destination; 
```

因为成员都是整数，所以你也应该能够做`temp = e[i]`等等。

这（以及您提交的代码）应该完成您想要的任务。

如果您遇到稳定性问题，那是因为[快速排序不稳定](http://en.wikipedia.org/wiki/Quicksort)。您可以通过添加更多条件来解决它，这样就`lhs==rhs`不会发生这种情况。或者，您可以尝试[合并排序](http://en.wikipedia.org/wiki/Merge_sort)

坦率地说，我对快速排序没有太多经验，但是您的 impl 看起来确实与[Wikipedias In Place Algorithm](http://en.wikipedia.org/wiki/Quicksort#In-place_version)明显不同。例如，您的枢轴根本没有移动。你能检查一下是不是这个问题吗？

* * *

# 编辑

看了[你的链接后](http://www.algolist.net/Algorithms/Sorting/Quicksort)

看起来链接的算法也使用枢轴作为值而不是索引（就像你一样）。在您认为您的枢轴值可能会移动之前，它看起来与您的语法相同，之后您的枢轴索引将指向其他东西

```
int pivot = arr[(left + right) / 2]; 
```

这有帮助吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T01:24:46.130

编辑：这是就地快速排序的伪代码：[http ://en.wikipedia.org/wiki/Quicksort#In-place_version](http://en.wikipedia.org/wiki/Quicksort#In-place_version)

这与您的代码不同，因为枢轴是一个值（左右值的平均值）而不是索引。

如果您正在寻找一个简单的非最优解决方案，请按目标顶点对整个列表进行合并排序，然后按原点对整个列表进行合并排序，然后按边长对整个列表进行合并排序。这利用了合并排序是一种稳定的排序算法并且在边数上具有运行时间 O(E) 的事实。

# php - 选择 * 不同的地方

> ID：13446457
> 
> 赞同：1
> 
> 时间：2012-11-19T01:15:40.787
> 
> 标签：php, mysql, sql

我正在尝试做这样的事情：

`select * from receipt where branch=:branch AND distinct transactionid`

但是，这不起作用并会显示所有结果。我只需要获取与我需要的信息相匹配并且具有独特的`transaction`. 所以这可能包括名字姓氏和数据库中每个列表存储的所有信息，因为我稍后会使用所有这些信息。

可以说我有：

```
+--------+-----------+----------+-----------------+
| first  |  last     |  item    |  transactionid  |
+--------+-----------+----------+-----------------+
| jack   |  sparrow  |  water   |    1234         |
| jack   |  sparrow  |  food    |    1234         |
| jack   |  sparrow  |  wood    |    1234         |
+--------+-----------+----------+-----------------+ 
```

我希望所有名称为 jack 的列表（其中任何一个）都具有不同的 transactionid...

这甚至可以做到吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T01:24:26.617

试试这个，

```
SELECT  a.*
FROM    tableName a
        INNER JOIN
        (
            SELECT  transactionID, MIN(item) minItem
            FROM    tableName
            GROUP BY transactionID
        ) b ON a.transactionID = b.transactionID AND
                        a.item = b.minItem
// -- WHERE branch =: branch 
```

**感谢您的编辑 zerkms**

*那么子查询是做什么的呢？*

好吧，它只*得到一个项目`transactionID`*。你也可以`MAX`在上面使用。

# java - 为什么数组索引超出范围？

> ID：13446461
> 
> 赞同：-3
> 
> 时间：2012-11-19T01:16:49.737
> 
> 标签：java

我需要将 2D char 数组的内容转换为字符串，并用边框包围它。无论调用什么方法，每个框都会有所不同。每当我运行客户端时，我都会在第 107 行收到错误 java.lang.ArrayIndexOutOfBoundsException: 4 （在代码中标记），我不知道为什么。关于有什么问题的任何想法？

```
public class TwoDArrayFiller
{
        private char [][] array;

public TwoDArrayFiller(char[][] dataArray) 
{
    array = new char[dataArray.length][dataArray[0].length];
    for(int i = 0; i < dataArray.length ; i++ )
    {
        for( int j = 0; j < dataArray[0].length ; j++ )
        {
            array[i][j] = dataArray[i][j];
        }
    }
} //end constructor

public void fillRows()
{

    for ( int i = 0; i < array.length ; i+=2 ) 
    {
        for( int j = 0; j < array[i].length; j++ )
        {
            array[i][j] = 'X';
        }
    }
} // end fillRows
public void fillColumns()
{

for( int i = 0; i < array.length; i++ )
{
    for (int j = 0; j < array[0].length; j+=2 )
    {
        array[i][j] = 'X';
    }
}

} // end fillcolumns
public void border()
{

    for( int i = 0; i < array.length; i++ )
    {   
        for( int j = 0; j < array[0].length; j++ )
        {
            if ( i == 1 || i == 2 )
            {
                array[i][j] = 'X';
                j+=2;
            }
            else
            {

                array[i][j] = 'X';
            }
        }
    }
}// end border
public String toString()
{
    String output = new String();

    for( int i = 0; i < array.length + 2; i++ )
    {
        for( int j = 0; j < array[0].length + 2; j++ )
        {
            if( ( i == 0 && j == 0 ) || (i == 0 && j == ( array[0].length + 2 )) )
            {
                output = output + "+";
                if ( j == ( array[0].length + 2 ) )
                output = output + "\n";                                         
            }
            else if( i == ( array.length + 2 ) && j == 0 )
            {
                output = output + "+";
            }
            else if( ( i == 0 && j == ( array[0].length + 2 ) ) || ( i == 5 && j == ( array[0].length + 2 ) ))
            {
                output = output + "+\n";
            }
            else if ( i == 0 || i == ( array[0].length + 2 ) )
            {
                output = output + "-";
            }
            else if( j == 0 || j == ( array[0].length + 2 ) )
            {
                output = output + "|";
                if( j == ( array[0].length + 2 ) )
                {
                    output = output + "\n";
                }
                else{
                }
            }
            else
            {
                output = output + array[i - 1][j - 1]; // here is where the error occurs
            }
        }
    }
    return output;
}// end tostring
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T01:19:55.740

这是我要改变的：

```
for( int i = 0; i < array.length + 2; i++ ) 
```

array.length + 2 表示您要“指向”数组之外

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-19T01:20:43.347

在你的 else 声明中：

```
else
            {
                output = output + array[i - 1][j - 1];
            } 
```

你正在访问 array[i-1][j-1]，但是你说我可以上升到 array.length+2，这指向 array[array.length+1]，这将超出界限。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-19T01:23:41.143

在 toString 函数中，您的 i 可以上升到 array.length + 1，但随后 array[i-1] 将超出范围，但在 else 子句中您访问 array[i-1][j-1]。繁荣！

# python - 我可以将 mod_python 的会话与 mod_pywebsocket 一起使用吗？

> ID：13446465
> 
> 赞同：0
> 
> 时间：2012-11-19T01:17:34.853
> 
> 标签：python, websocket, session-state, mod-python, mod-pywebsocket

我正在创建一个简单的网络游戏，它使用网络套接字为其他所有内容（例如登录系统、用户配置文件等）流式传输更新 HTTP AJAX 请求。不幸的是，我对 mod_python 有点陌生，但似乎我想使用 Sessions 类来跟踪访问者。唯一的问题是 Session 出于某种原因需要 mod_python 请求。有没有办法可以在 mod_pywebsocket 处理程序中使用这些会话，还是我需要推出自己的会话机制？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T07:13:33.887

万一有人可以使用它，我发现 mod_python 的会话与 mod_pywebsocket 配合得很好。这里有两个注意事项：

**初始化**通常，您使用 mod_python 请求构造一个 mod_python 会话对象。幸运的是，mod_pywebsocket 的作者有先见之明，使 Web 套接字请求（您在 web_socket_transfer_data 参数中获得的请求）兼容。这意味着您可以像在 mod_python 中通常那样实例化您的 Session（请参阅[文档](http://www.modpython.org/live/current/doc-html/pyapi-sess.html)以获取示例）。这似乎很明显，但对我来说不是。如果您在执行此操作时遇到错误，则说明您做错了其他事情。

**会话锁**要记住的另一件事是，与给定 ID 关联的会话默认情况下是锁定的，并且锁定会在该会话对象的生命周期内持续存在。这意味着如果您有两个使用来自同一主机的会话的 Web 套接字，则其中一个有永远阻塞的危险。此外，文档指出这些互斥锁可能需要重要的系统资源。它们显然是为服务快速 HTTP 请求而设计的，而不是为面向持久连接的使用而设计的。

修复会话的一种方法是禁用锁定，但这可能不是明智之举。我还没有尝试过，但如果你尝试的话，祝你在这些比赛条件下好运。我所做的是创建仅在短时间内需要的 Sessions，然后在完成后为其分配 None。显然`with`子句不适用于这些会话。同样，这并不是非常晦涩难懂，但如果您没有意识到引擎盖下发生了什么，它可能会导致一些头痛。

# ios - 向 uiTableView 添加新行

> ID：13446466
> 
> 赞同：0
> 
> 时间：2012-11-19T01:17:51.417
> 
> 标签：ios

我正在尝试将新行添加到`UITableView`. `UITextField`用户在 a上输入数据，`UIViewController`然后控件返回到原来的`UITableView`. 添加新行时，什么方法写入表。我似乎已经尝试了一切。似乎没有任何效果。

下面评论中的代码是：

```
 tableItems = [NSMutableArray arrayWithObjects:@"Persian", @"Rag Doll", @"Siamese", @"Scottish Fold", @"British short hair", nil];
    [self.tableView reloadData];
}

-(void) prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if([segue.identifier isEqualToString:@"AddSegue"])
    {
        UINavigationController *nav = segue.destinationViewController;
        AddItemViewController *aivc = [nav.viewControllers objectAtIndex:0];
        aivc.TVC = self;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T01:22:35.543

如果您将新行数据存储在 UITableView 访问的数组（例如）中，则只需重新加载表，如下所示：

```
[self.tableview reloadData]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T19:40:35.807

我已经使用您在评论中提供的代码更新了您的问题，以获取另一个答案。

最重要的是，您没有告诉我们您的异常是在哪里生成的，也没有告诉我们异常是什么。如果您希望我们提供帮助，您需要缩小范围。另外，我不确定从您建议在`UITextField`输入之后导致异常并且您返回到以前的控制器这一事实得出什么结论，但是您没有向我们展示该代码，而是您展示了我们将代码用于 segueing 到`AddItemViewController`. 当您第一次进行 segue 时，或者当您尝试弹出/关闭以返回视图控制器时，您是否收到错误`UITableView`？

尽管有这些相当重要的问题，我还是建议两件事：

**首先，确保您添加了对结果的稳健检查，以防止发生异常。**例如，一个常见的问题是从属性或 a 中检索值`NSArray`，但出于某种原因，它不是代码假定它是（并且要求它是）的对象类型。在这种情况下，您假设 the`destinationViewController`是 a `UINavigationController`，此外，您假设其`viewControllers`数组中的第一个元素是 a `AddItemViewController`。你知道你的代码，也许你对这个事实很有信心，但是你得到一个异常的事实意味着你可能需要更健壮的错误检查。

因此，我建议您`NSAssert`加入能够验证这一事实的声明。以您`prepareForSegue`为例，我可能会建议对其进行更改：

```
-(void) prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if([segue.identifier isEqualToString:@"AddSegue"])
    {
        UINavigationController *nav = segue.destinationViewController;
        NSAssert([nav isKindOfClass:[UINavigationController class]], @"destinationViewController is not a UINavigationController");

        AddItemViewController *aivc = nav.viewControllers[0];
        NSAssert([aivc isKindOfClass:[AddItemViewController class]], @"destinationViewController.viewControllers[0] is not a AddItemViewController");

        aivc.TVC = self;
    }
} 
```

这些`NSAssert`语句是在测试期间测试值的好方法，以确保您返回的对象确实是`Class`您认为的对象。这些`NSAssert`子句仅用于您在开发期间测试的错误，但*绝不*应该在生产应用程序中发生。如果您的代码对从方法返回的内容做出隐含假设，您可以`NSAssert`在调试应用程序时使用这些假设来验证这些假设。

现在，我没有理由知道 或 的值是否`nav`是`aivc`您的问题，但这是检查您的代码应该做的一种示例。这只是一个很好的做法（尤其是在您努力寻找异常时），以确保您检索到的对象是正确的类型，其余代码都依赖于该类型。

我在这里别有用心。您的代码意味着您正在导航到一个视图控制器，该控制器本身嵌入在它自己的导航控制器中。你从来没有在你的叙述中说过这么多，所以这些`NSAssert`陈述只是验证了这个事实。

**其次，如果您对对象的所有稳健验证都没有发现问题，那么您必须自己确定异常的来源。**通常，您可以通过查看“调试导航器”中的堆栈跟踪或通过在 Xcode 中读取控制台中的错误来破译这一点。但是，另一个（未被充分认识的，恕我直言）工具是[异常断点](http://developer.apple.com/library/ios/#recipes/xcode_help-breakpoint_navigator/articles/adding_an_exception_breakpoint.html)它可以找到导致异常的确切代码行。如果遇到任何异常，我会定期在“所有”异常上添加异常断点。这样，如果我通过我的调试器运行程序，如果它遇到异常，它将在有问题的行停止代码，大大简化了识别问题根源的过程。它并不总是完美地工作，但它经常比其他技术更快地找到异常的来源。

![异常断点](../Images/4ecfaf8427ba5e95e701cb0490fa6486.png)

# javascript - JavaScript 简单倒计时

> ID：13446475
> 
> 赞同：-2
> 
> 时间：2012-11-19T01:19:09.017
> 
> 标签：javascript, jquery

我想要一个简单的 JavaScript 倒计时，计数到 5 然后停止。我想显示当前值 (1,2,3,4,5)

我试过：

```
function countdown() {
    jAlert('test', i);
    i++;
    if (i >= 5) {
        clearInterval(aktiv);
    }
};
var aktiv = setInterval('countdown()', 1000);
var i = 0; 
```

但是每次我将它插入它`i`时`jAlert`都不会再工作了。那里有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T01:37:59.593

```
var $i = 0;
var $interval = setInterval(function()
{
    if (++$i === 5)
        clearInterval($interval);

    jAlert('test', $i);
},
1000); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T01:20:13.007

```
function countdown () {
// try to see if passing a string, rather than a number works.
    jAlert('test', i + '');
    i++;
    if (i >= 5) {
         clearInterval(aktiv);
    }
};
var aktiv = setInterval(countdown, 1000);        
var i=0; 
```

**还要打开 firebug 控制台，告诉我们当您将 i 放入 jAlert 时遇到什么错误。或者如果可能的话制作一个 jsFiddle。**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T01:38:20.123

尝试修改这一行：

```
var aktiv = setInterval('countdown()', 1000); 
```

对此：

```
var aktiv = setInterval(countdown, 1000); 
```

因为当我第一次尝试 javascript 时，如果我在函数名称后面有引号和/或括号，这个间隔就不起作用。

# actionscript-3 - 如何使用外部 .swf 文件创建滚动窗格？

> ID：13446478
> 
> 赞同：0
> 
> 时间：2012-11-19T01:19:48.983
> 
> 标签：actionscript-3, flash, adobe, scrollpane

我正在尝试在链接到我的主页 (main.swf) 的外部 swf (main1.swf) 文件中创建一个简单的滚动窗格，但我遇到了它生成的一些错误的问题。首先在我的滚动窗格存在的外部 .swf 中，我添加了一个滚动窗格组件，并将源链接到我创建的 MovieClip，它在我的外部 swf (main1.swf) 文件上完美运行，但是当我转到我的主页（主.swf) 并单击链接到我的外部 swf 文件 (main1.swf) 的按钮，它会生成错误：

```
ReferenceError: Error #1069: Property fl.managers:IFocusManager::form not found on fl.managers.FocusManager and there is no default value.
    at fl.containers::ScrollPane/setScrollDrag()
    at fl.containers::ScrollPane/draw()
    at fl.core::UIComponent/callLaterDispatcher() 
```

你们有什么办法可以帮我解决这个错误吗？我一直在努力解决这个问题，我真的需要帮助，谢谢:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T01:45:03.297

```
var scrollContent_mc:Sprite = Sprite(scroller.content) 
```

# python - Python Pandas：根据出现次数删除条目

> ID：13446480
> 
> 赞同：25
> 
> 时间：2012-11-19T01:20:07.153
> 
> 标签：python, numpy, python-2.7, pandas

我正在尝试从出现次数少于 100 次的数据框中删除条目。数据框`data`如下所示：

```
pid   tag
1     23    
1     45
1     62
2     24
2     45
3     34
3     25
3     62 
```

现在我计算标签出现的次数，如下所示：

```
bytag = data.groupby('tag').aggregate(np.count_nonzero) 
```

但后来我不知道如何删除那些计数低的条目......

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-08-21T12:51:45.967

0.12 中的新功能，groupby 对象有一个[`filter`](http://pandas.pydata.org/pandas-docs/dev/groupby.html#filtration)方法，允许您执行以下类型的操作：

```
In [11]: g = data.groupby('tag')

In [12]: g.filter(lambda x: len(x) > 1)  # pandas 0.13.1
Out[12]:
   pid  tag
1    1   45
2    1   62
4    2   45
7    3   62 
```

*该函数（filter 的第一个参数）应用于每个组（子帧），结果包括原始 DataFrame 的元素属于评估为 True 的组。*

注意：[在 0.12 中的排序与原始 DataFrame 中的不同](https://github.com/pydata/pandas/issues/4621)，这在 0.13+ 中已修复：

```
In [21]: g.filter(lambda x: len(x) > 1)  # pandas 0.12
Out[21]: 
   pid  tag
1    1   45
4    2   45
2    1   62
7    3   62 
```

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2012-11-19T03:17:23.713

编辑：感谢@WesMcKinney 展示了这种更直接的方式：

```
data[data.groupby('tag').pid.transform(len) > 1] 
```

* * *

```
import pandas
import numpy as np
data = pandas.DataFrame(
    {'pid' : [1,1,1,2,2,3,3,3],
     'tag' : [23,45,62,24,45,34,25,62],
     })

bytag = data.groupby('tag').aggregate(np.count_nonzero)
tags = bytag[bytag.pid >= 2].index
print(data[data['tag'].isin(tags)]) 
```

产量

```
 pid  tag
1    1   45
2    1   62
4    2   45
7    3   62 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2017-05-03T01:36:16.687

以下是此处发布的几个解决方案的一些运行时间，以及一个未（使用`value_counts()`）比其他解决方案快得多的解决方案：

## 创建数据：

```
import pandas as pd
import numpy as np

# Generate some 'users'
np.random.seed(42)
df = pd.DataFrame({'uid': np.random.randint(0, 500, 500)})

# Prove that some entries are 1
print "{:,} users only occur once in dataset".format(sum(df.uid.value_counts() == 1)) 
```

### 输出：

`171 users only occur once in dataset`

### 用几种不同的方法来删除只有一个条目的用户。这些在 Jupyter Notebook 的不同单元格中运行：

```
%%timeit
df.groupby(by='uid').filter(lambda x: len(x) > 1)

%%timeit
df[df.groupby('uid').uid.transform(len) > 1]

%%timeit
vc = df.uid.value_counts()
df[df.uid.isin(vc.index[vc.values > 1])].uid.value_counts() 
```

### 这些给出了以下输出：

```
10 loops, best of 3: 46.2 ms per loop
10 loops, best of 3: 30.1 ms per loop
1000 loops, best of 3: 1.27 ms per loop 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-19T02:02:21.857

```
df = pd.DataFrame([(1, 2), (1, 3), (1, 4), (2, 1),(2,2,)], columns=['col1', 'col2'])

In [36]: df
Out[36]: 
   col1  col2
0     1     2
1     1     3
2     1     4
3     2     1
4     2     2

gp = df.groupby('col1').aggregate(np.count_nonzero)

In [38]: gp
Out[38]: 
      col2
col1      
1        3
2        2 
```

让我们得到计数> 2的位置

```
tf = gp[gp.col2 > 2].reset_index()
df[df.col1 == tf.col1]

Out[41]: 
   col1  col2
0     1     2
1     1     3
2     1     4 
```

# java - Tomcat - Servlet 响应阻塞 - 刷新问题

> ID：13446483
> 
> 赞同：3
> 
> 时间：2012-11-19T01:20:23.757
> 
> 标签：java, tomcat, response, blocking, flush

我正在使用 Tomcat 6.0.36 和 JRE 1.5.0，并且正在 Windows 7 上进行开发工作。

作为我正在做的一些工作的概念证明，我从 Java 代码通过 HTTP 将一些 XML 通过套接字发布到 servlet。然后 servlet 回显 xml。在我的第一个实现中，我将两端的输入流交给一个 XML 文档工厂，以提取通过网络发送的 xml。这在 servlet 中运行顺利，但在客户端失败了。事实证明，它在客户端失败了，因为读取响应被阻塞到文档工厂超时并在整个响应到达之前抛出异常的地步。（文档工厂的行为现在没有实际意义，因为正如我在下面描述的，在不使用文档工厂的情况下，我遇到了同样的阻塞问题。）

为了尝试解决这个阻塞问题，我想出了一个更简单的客户端代码和 servlet 版本。在这个更简单的版本中，我从等式中删除了文档生成器。双方的代码现在只是从各自的输入流中读取文本。

不幸的是，我仍然有这个响应阻塞问题，正如我在下面描述的，它并没有通过简单地调用 response.flushBuffer() 来解决。谷歌搜索只检索到一个我能找到的相关主题（[Tomcat 不刷新响应缓冲区](https://stackoverflow.com/questions/9921242/tomcat-does-not-flush-the-response-buffer)），但这不是完全相同的问题。

我已经包含了我的代码并解释了下面的确切问题。

这是我的 servlet 代码（请记住，这是简单的概念验证代码，而不是生产代码），

```
import java.io.InputStreamReader;
import java.io.LineNumberReader;

import javax.servlet.ServletConfig;
import javax.servlet.ServletException;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

public final class EchoXmlServlet extends HttpServlet {

    public void init(ServletConfig config) throws ServletException {
        System.out.println("EchoXmlServlet loaded.");
    }

    public void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException {
    }

    public void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException {

        try {
            processRequest(request, response);
        }
        catch(Exception e) {
            e.printStackTrace();
            throw new ServletException(e);
        }

        System.out.println("Response sent.");

        return;
    }

    private final void processRequest(HttpServletRequest request, final HttpServletResponse response) throws Exception {

        String line = null;

        StringBuilder sb = new StringBuilder();
        LineNumberReader lineReader = new LineNumberReader(new InputStreamReader(request.getInputStream(), "UTF-8"));

        while((line = lineReader.readLine()) != null) {

            System.out.println("line: " + line);

            sb.append(line);
            sb.append("\n");
        }

        sb.append("An additional line to see when it turns up on the client.");

        System.out.println(sb);

        response.setHeader("Content-Type", "text/xml;charset=UTF-8");
        response.getOutputStream().write(sb.toString().getBytes("UTF-8"));

        // Some things that were tried.
        //response.getOutputStream().print(sb.toString());
        //response.getOutputStream().print("\r\n");
        //response.getOutputStream().flush();
        //response.flushBuffer();
    }

    public void destroy() {
    }

} 
```

这是我的客户端代码，

```
import java.io.BufferedOutputStream;
import java.io.InputStreamReader;
import java.io.LineNumberReader;
import java.io.OutputStream;
import java.net.Socket;

public final class SimpleSender {

    private String host;
    private String path;
    private int port;

    public SimpleSender(String host, String path, int port) {

        this.host = host;
        this.path = path;
        this.port = port;

    }

    public void execute() {

        Socket connection = null;
        String line;

        try {
            byte[] xmlBytes = getXmlBytes();
            byte[] headerBytes = getHeaderBytes(xmlBytes.length);

            connection = new Socket(this.host, this.port);

            OutputStream outputStream = new BufferedOutputStream(connection.getOutputStream());
            outputStream.write(headerBytes);
            outputStream.write(xmlBytes);
            outputStream.flush();

            LineNumberReader lineReader
                = new LineNumberReader(new InputStreamReader(connection.getInputStream(), "UTF-8"));

            while((line = lineReader.readLine()) != null) {
                System.out.println("line: " + line);
            }

            System.out.println("The response is read.");
        }
        catch(Exception e) {
            e.printStackTrace();
        }
        finally {
            try {
                connection.close();
            }
            catch(Exception e) {}
        }
    }

    private byte[] getXmlBytes() throws Exception {

        StringBuffer sb = null;

        sb = new StringBuffer()
            .append("<my-xml>\n")
            .append("Hello to myself.\n")
            .append("</my-xml>\n");

        return sb.toString().getBytes("UTF-8");
    }

    private byte[] getHeaderBytes(int contentLength) throws Exception {

        StringBuffer sb = null;

        sb = new StringBuffer()
            .append("POST ")
            .append(this.path)
            .append(" HTTP/1.1\r\n")
            .append("Host: ")
            .append(this.host)
            .append("\r\n")
            .append("Content-Type: text/xml;charset=UTF-8\r\n")
            .append("Content-Length: ")
            .append(contentLength)
            .append("\r\n")
            .append("\r\n");

        return sb.toString().getBytes("UTF-8");
    }

} 
```

当通过调用 SimpleSender.execute() 将请求发送到 servlet 时，servlet 中接收请求的代码会顺利读取 xml。我的 servlet 代码也顺利退出了它的 processRequest() 和 doPost()。这是服务器上的即时（即任何输出行之间没有阻塞）输出：

```
line: <my-xml>
line: Hello to myself.
line: </my-xml>
<my-xml>
Hello to myself.
</my-xml>
An additional line to see when it turns up on the client.
Response sent. 
```

上面的输出完全符合预期。

然而，在客户端，代码输出以下 then 块：

```
HELLO FROM MAIN
line: HTTP/1.1 200 OK
line: Server: Apache-Coyote/1.1
line: Content-Type: text/xml;charset=UTF-8
line: Content-Length: 74
line: Date: Sun, 18 Nov 2012 23:58:43 GMT
line:
line: <my-xml>
line: Hello to myself.
line: </my-xml> 
```

阻塞了大约 20 秒后（我计时了），在客户端输出以下几行，

```
line: An additional line to see when it turns up on the client.
The response is read.
GOODBYE FROM MAIN 
```

请注意，当阻塞发生在客户端时，服务器端的整个输出是完全可见的。

从那里，我尝试在服务器端刷新以尝试解决此问题。我独立尝试了两种刷新方法：response.flushBuffer() 和 response.getOutputStream().flush()。使用这两种刷新方法，我仍然在客户端遇到阻塞（但在响应的不同部分），但我也遇到了其他问题。这是客户端阻止的地方，

```
HELLO FROM MAIN
line: HTTP/1.1 200 OK
line: Server: Apache-Coyote/1.1
line: Content-Type: text/xml;charset=UTF-8
line: Transfer-Encoding: chunked
line: Date: Mon, 19 Nov 2012 00:21:53 GMT
line:
line: 4a
line: <my-xml>
line: Hello to myself.
line: </my-xml>
line: An additional line to see when it turns up on the client.
line: 0
line: 
```

阻塞约20秒后，在客户端输出如下，

```
The response is read.
GOODBYE FROM MAIN 
```

此输出在客户端存在三个问题。首先，响应的读取仍然是阻塞的，它只是在响应的不同部分之后阻塞。其次，我返回了意想不到的字符（“4a”，“0”）。最后，标题已更改。我丢失了 Content-Length 标头，并且获得了“Transfer-encoding: chunked”标头。

因此，如果没有刷新，我的响应会在发送最后一行和终止响应之前阻塞。但是，在刷新时，响应仍然是阻塞的，但现在我得到了我不想要的字符以及对我不想要的标题的更改。

在 Tomcat 中，我的连接器具有默认定义，

```
<Connector port="8080" protocol="HTTP/1.1" connectionTimeout="20000" redirectPort="8443" /> 
```

connectionTimeout 设置为 20 秒。当我将其更改为 10 秒时，我的客户端代码阻塞了 10 秒而不是 20 秒。因此，由 Tomcat 管理的连接超时似乎导致我的响应被完全刷新并终止。

我应该在我的 servlet 代码中做些什么来表明我的响应已完成？

在发送最后一行和终止指示符之前，是否有人对为什么我的响应被阻止提出建议？

有没有人对为什么刷新发送不需要的字符以及为什么刷新后响应仍然阻塞提出建议？

如果有人有时间，如果您尝试运行本文中包含的代码，您能否告诉我是否遇到同样的问题？

**编辑 - 回应 Guido 的第一个回复**

圭多，

非常感谢您的回复。

> 您的客户端正在阻塞，因为您正在使用 readLine 来读取消息的正文。readLine 挂起，因为正文没有以换行符结尾

不，我不认为这是真的。首先，在我的原始代码版本中，我没有在客户端或服务器端使用行阅读器。在双方，我将流交给 xml 文档工厂并让它从流中读取。在服务器上，这工作正常。在客户端，它超时。（在客户端上，在将流传递到文档工厂之前，我正在阅读标题的末尾。）

其次，当我将客户端代码更改为不使用行阅读器时，仍然会发生阻塞。这是一个不使用行阅读器的 SimpleSender.execute() 版本，

```
public void execute() {

    Socket connection = null;
    int byteCount = 0;

    try {
        byte[] xmlBytes = getXmlBytes();
        byte[] headerBytes = getHeaderBytes(xmlBytes.length);

        connection = new Socket(this.host, this.port);

        OutputStream outputStream = new BufferedOutputStream(connection.getOutputStream());
        outputStream.write(headerBytes);
        outputStream.write(xmlBytes);
        outputStream.flush();

        while(connection.getInputStream().read(new byte[1]) >= 0) {
            ++byteCount;
        }

        System.out.println("The response is read: " + byteCount);
    }
    catch(Exception e) {
        e.printStackTrace();
    }
    finally {
        try {
            connection.close();
        }
        catch(Exception e) {}
    }

    return;
} 
```

上面的代码块在，

```
HELLO FROM MAIN 
```

然后 20 秒后，完成，

```
The response is read: 235
GOODBYE FROM MAIN 
```

我认为以上内容最终表明问题不在于在客户端使用行阅读器。

```
sb.append("An additional line to see when it turns up on the client.\n"); 
```

在上面的行中添加 return 只是将块推迟到后面的一行。我在我的 OP 之前测试过这个，我刚刚再次测试。

```
If you want to do your own HTTP parser, you have to read through the headers until you get two blank lines. 
```

是的，我确实知道，但在这个人为的简单示例中，这是一个有争议的问题。在客户端，我只是输出返回的 HTTP 消息、标头和所有内容。

```
Then you need to scan the headers to see if you had a Content-Length header. If there is no Content-Length then you are done. If there is a Content-Length you need to parse it for the length, then read exactly that number of additional bytes from the stream. This allows HTTP to transport both text data and also binary data which has no line feeds. 
```

是的，在这个人为的简单示例中，所有内容都是正确的，但不相关。

```
I recommend you replace the guts of your client code HTTP writer/parse with a pre-written client library that handles these details for you. 
```

我完全同意。我实际上希望将流的处理传递给 xml 文档工厂。作为处理我的阻塞问题的一种方式，我还研究了 Apache commons-httpclient。新版本（httpcomponents）仍然让开发人员处理返回后的流（据我所知），所以这没有用。如果你能推荐另一个图书馆，我肯定会感兴趣。

我不同意你的观点，但我感谢你的回复，我的意思不是冒犯或任何负面暗示。我显然做错了什么或没有做我应该做的事情，但我不认为线路阅读器是问题所在。此外，如果我冲洗，那些时髦的角色是从哪里来的？为什么在客户端不使用线路阅读器时会发生阻塞？

另外，我已经在 J​​etty 上复制了这个问题。因此，这绝对不是 Tomcat 问题，而是非常“我”的问题。我做错了什么，但我不知道它是什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T03:55:25.940

您的服务器代码看起来不错。问题出在您的客户端代码上。它不遵守 HTTP 协议，并将响应视为一堆行。

服务器上的快速修复。改成：

```
 sb.append("An additional line to see when it turns up on the client.\n"); 
```

您的客户端正在阻塞，因为您正在使用 readLine 来读取消息的正文。readLine 挂起，因为正文没有以换行符结尾。最后 Tomcat 超时，关闭连接，您的缓冲阅读器检测到这一点并返回剩余数据。

如果您进行上述更改（对服务器），这将使您的客户端看起来像您预期的那样工作。即使它仍然是错误的。

如果你想做你自己的 HTTP 解析器，你必须通读标题，直到你得到两个空行。然后您需要扫描标头以查看是否有 Content-Length 标头。如果没有 Content-Length，那么你就完成了。如果有 Content-Length ，您需要解析它的长度，然后从流中准确读取该数量的附加字节。这允许 HTTP 传输文本数据和没有换行符的二进制数据。

我建议你用一个为你处理这些细节的预先编写的客户端库替换你的客户端代码 HTTP writer/parse 的胆量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T06:51:27.703

大声笑好吧，我做错了什么（通过遗漏）。我的问题的解决方案？将以下标头添加到我的 http 请求中，

```
Connection: close 
```

就这么简单。没有它，这种联系仍然存在。我的代码依赖服务器表示它已完成，但是，服务器仍在侦听打开的连接而不是关闭它。

标头导致服务器在完成写入响应时关闭连接（我猜这在它对 doPost(...) 的调用返回时表示）。

**附录**

关于调用 flush() 时的时髦字符......

我的服务器代码，现在我正在使用 Connection: close，不会调用 flush()。但是，如果要发回的内容足够大（大于我怀疑的 Tomcat 连接器的缓冲区大小），我仍然会收到发回的时髦字符，并且标题“Transfer-Encoding: chunked”出现在响应中。

为了解决这个问题，我在服务器端明确调用 response.setContentLength(...)，然后再写我的响应。当我这样做时，Content-Length 标头在响应中，而不是 Transfer-Encoding: 分块，并且我没有得到时髦的字符。

由于我的代码现在正在运行，我不想再花时间在这上面，但我想知道这些时髦的字符是否是块分隔符，一旦我明确设置内容长度，块分隔符就不再需要了。

# java - 在输入验证期间使用 Scanner 类测试空白输入

> ID：13446485
> 
> 赞同：1
> 
> 时间：2012-11-19T01:21:24.913
> 
> 标签：java, java.util.scanner

我需要让用户从控制台输入一个非零正整数，我将在我的程序中将其用作产品编号。

如果我输入任何非整数值，程序会正确进入 while 循环。

如果我输入 0 或负整数，程序会正确抛出异常（我在其他地方捕获并处理）。

当我只是按下回车键（或行尾字符）时，程序似乎只是将控制台放到了另一行。我希望它进入 while 循环以显示错误消息。我认为原因是`hasNextInt()`会等到令牌是非行尾字符输入。

```
private static void validateProductNumber() throws InvalidProductNumberException { 
    Scanner keyboard = new Scanner(System.in);
    int number;
    while(!keyboard.hasNextInt()) { 
        System.out.println("Number must be an integer. Try again. ");
        System.out.println("Enter a new number: ");
        keyboard.next(); 
    }
    number = keyboard.nextInt();
    if (number <= 0)
        throw new InvalidProductNumberException();
    newNumber = number;
} 
```

是否有另一种方法可以使用 Scanner 类实现输入验证，以便它在所有情况下都能正常工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T01:34:08.583

您可以按如下方式更改循环：

```
while(true) {        
    try {
        System.out.println("Enter a new number: ");
        //read the line and parse it
        number = Integer.parseInt(keyboard.nextLine());
        break; //break the loop if the input is a valid integer
    } catch(Exception ex) {
        //print the error message if the input is incorrect
        System.out.println("Number must be an integer. Try again. ");
    }
}
if (number <= 0)
//... 
```

# clojure - 使用嵌套的 dosync 块有哪些好的编程原则？

> ID：13446487
> 
> 赞同：3
> 
> 时间：2012-11-19T01:21:40.163
> 
> 标签：clojure

我真的很喜欢 STM，但我希望得到一些关于如何正确使用事务的建议，尤其是当一个事务块依赖于另一个事务块时

例如我有一些代码：

```
(defn unschedule-task [tt task-id]
  （同步
   （剂量 [条目.....]
    (tk/kill-all! (:task entry)))
   (v/delete! tt [[:task :id] task-id])))

(defn schedule-task [tt 任务计划 & [启用？optt]]
  （同步
   （未计划任务 tt（：id 任务））
   (v/插入！tt {.....})))

```

基本上，`unschedule-task`有一个`dosync`块，并`schedule-task`调用`unschedule-task`自己的`dosync`块，因为它需要在一个事务中进行删除和插入。

一个人能把它推到多远，要避免哪些陷阱？（我认为循环依赖可能存在问题，但我想不出一个例子......）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T08:18:36.143

交易被扁平化；在事务期间开始新事务不会做任何事情。IOW，要么在外部事务期间所有 ref 修改成功，要么重新启动整个外部事务。这意味着不应该存在依赖问题。

# cassandra - Titan 和 Cassandra 调试和分析查询

> ID：13446488
> 
> 赞同：2
> 
> 时间：2012-11-19T01:21:51.407
> 
> 标签：cassandra, titan

使用 Cassandra 后端时，是否可以看到正在从[Titan](http://thinkaurelius.github.com/titan/)执行 Cassandra 查询，以及每个查询需要多长时间？理想情况下，它会输出到标准错误或日志文件。

如果我发现 Titan 与 Cassandra 交谈的方式有任何低效，这可能有助于优化我的查询结构。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T23:11:42.327

感谢 Titan 的一位作者，一种可接受的方法是[在 Cassandra 中启用调试](https://groups.google.com/forum/#!topic/aureliusgraphs/xvOFTKeuR78)。

您可以取消注释 cassandra log4j-server.properties 文件中的 DEBUG 行，然后重新启动 Cassandra：

```
log4j.logger.org.apache.cassandra=DEBUG
log4j.logger.org.apache.cassandra.db=DEBUG
log4j.logger.org.apache.cassandra.service.StorageProxy=DEBUG 
```

# php - PHP星号三角形对齐

> ID：13446489
> 
> 赞同：1
> 
> 时间：2012-11-19T01:21:57.800
> 
> 标签：php

我是网络编程新手，最近开始接触 PHP。我写了一个小代码来产生一个“直角三角形”。我认识到使用   是解决方案的一部分，但我已经把它放在了所有可能的地方，但没有运气，所以任何建议都将不胜感激。在下面你会找到编码/当前输出/所需输出：

```
$x = 10;
while ( $x >= 1 ) {
    $y=1;
    while ($y <= $x) {
        echo "*";
        ++$y;
    }
    echo "<br/>";
    --$x;
}

output:
**********
*********
********
*******
******
*****
****
***
**
*

desire output:
**********
 *********
  ********
   *******
    ******
     *****
      ****
       ***
        **
         * 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T02:35:45.537

这是我的建议；没有`while`s，但使用`for`循环（和`str_repeat()`s）。

```
echo '<pre>'; // just here for display formatting

// $x = current number of *
// $t = total number of positions
for( $x = $t = 10; $x > 0; $x-- )
{
    // repeat '&nbsp;' $t - $x times
    // repeat '*' $x times
    // append '<br>'
    echo str_repeat( '&nbsp;', $t - $x ) . str_repeat( '*', $x ) . '<br>';
} 
```

并*带有*一个`while`循环：

```
echo '<pre>'; // just here for display formatting

$x = $t = 10;
while( $x > 0 )
{
    echo str_repeat( '&nbsp;', $t - $x ) . str_repeat( '*', $x ) . '<br>';
    --$x;
} 
```

到`echo`你原来的三角形，只需切换`str_repeat()`s。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T01:24:42.620

您需要每行 10 个字符、`n`星号和`10 - n`空格。知道了这一点，你只需要在里面再添加一个循环来控制输出多少空格！

像这样简单的东西：

```
$x = 10;
while ( $x >= 1 ) {
    $spaces = 1;
    while($spaces <= 10 - $x)
    {
        echo "&nbsp";
        ++$spaces;
    }
    $y=1;
    while ($y <= $x) {
        echo "*";
        ++$y;
    }
    echo "<br/>";
    --$x;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T02:57:23.850

```
<?php

$num = 10;
$char = '*';
$string = str_repeat($char, $num);

for ($i = 1; $i <= $num; $i++)
{
    printf("%{$num}s\n", $string);
    $string = substr_replace($string, '', -1);
}

?> 
```

`<pre>`如果您想轻松格式化，请使用标签。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-06-09T19:19:13.037

## 我希望这段代码对你有帮助

> `call_user_func()`使用和创建星形三角形的新代码`for loop()`

***星三角***

```
*
**
***
****
***** 
```

***php代码***

```
<?php
/**
  | Code for display star triangle using for loop 
  | date : 2016-june-10
  | @uther : Aman kumar
  */

$sum = "*";
for($i=0;$i<=5;$i++)
{
    call_user_func(function($sum) { echo $sum, "<br/>"; }, str_repeat($sum,$i));
}
?> 
```

# php - 使用来自 PHP 网页的输入参数运行 .exe

> ID：13446492
> 
> 赞同：3
> 
> 时间：2012-11-19T01:22:19.037
> 
> 标签：php, parameters, exec, exe

我目前正在尝试从 PHP 网页（当前使用`exec()`）中运行可执行文件。该程序从命令行运行时有两个参数；我不确定用 PHP 运行它的最佳方法是什么。

特别是，可以使用以下语法从命令行运行 .exe：

`my_program.exe input_file_name.txt / output_file_name.txt`

程序对输入文件中的数据进行处理，并将处理后的数据放入输出文件中。这一切都可以从命令行（在 Windows 中）正常工作。.exe 是用 Visual Basic 编写的（不是我编写的）。

我知道我通常可以`exec()`通过执行以下操作来提供参数：

`exec('my_program.exe "example input parameter"');`

如果 .exe 被编写为从 .exe 获取输入`argv()`，我已经为测试做了这些。我尝试了一些方法，例如：

```
$argument = "C:\wamp\www\web_dev\test\input.txt / C:\wamp\www\web_dev\test\output.txt";
exec('C:\wamp\www\web_dev\test\my_program.exe $argument'); 
```

这没有成功。（我目前正试图让它在我的本地主机上工作，以防万一..）

我相信，由于 .exe 完成了打开、写入和关闭输入和输出文件的所有工作，我只需要弄清楚如何编写一个 PHP 命令，该命令将以适当的方式执行程序。

我已经看到了与这个类似的线程，所以我希望我不会再问任何东西；我找不到与这种情况完全相关的线程。

**编辑：**如果有帮助，我正在努力的总体范围是创建一个允许用户上传文件的 Web 界面，然后调用我得到的可执行文件（它是通过命令行指令提供给我的上面提到的），并为用户生成一个带有处理数据的输出文件。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-19T01:41:48.697

基本的 PHP 语法错误：您使用了错误的引号。请改用双引号。

```
exec("C:\wamp\www\web_dev\test\my_program.exe $argument");
     ^---                                              ^--- 
```

单引号 ( `'`) 不会将变量插入到字符串中。您正在尝试将文字`$`,`a`等...作为参数传递，而不是该变量的值。

# java - 在 JTable,Java 中显示最后一行

> ID：13446493
> 
> 赞同：0
> 
> 时间：2012-11-19T01:22:25.183
> 
> 标签：java, swing, user-interface, jtable, jframe

我有一个 JTable。最多只显示四行，而所有行数为八。我想当程序启动时表格会直接引到最后一行。

**这是程序启动的时间：**

![在此处输入图像描述](../Images/d3fcd189e3c402ef4e4a414dee9c6f7b.png)

**我想在程序启动时喜欢这个：**

![在此处输入图像描述](../Images/92f2580874d724d5d31a4dac6c17ede3.png)

*table 直接通向最后一行*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T01:40:57.230

您需要获取最后一行的单元格边界，[`JTable#getCellRect(int, int, boolean)`](http://docs.oracle.com/javase/7/docs/api/javax/swing/JTable.html#getCellRect%28int,%20int,%20boolean%29)将返回给定单元格的矩形边界，例如；

```
Rectangle cellBounds = table.getCellRect(table.getRowCount() - 1, 0, true); 
```

应该给你给定单元格的位置。

有了这些信息，您只需要调用[`JComponent#scrollRectToVisible(Rectangle)`](http://docs.oracle.com/javase/7/docs/api/javax/swing/JComponent.html#scrollRectToVisible%28java.awt.Rectangle%29)请求使给定的矩形可见。

```
table.scrollRectToVisible(cellBounds); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-19T02:32:25.593

您也可以使用以下代码执行此操作

```
 int lastRow=table.getRowCount-1;

  table.setCellSelectionEnabled(true);
  table.changeSelection(lastRow, 0, false, false);
  table.scrollRectToVisible(new Rectangle(tblDetailInfo.getCellRect(lastRow, 0, true))); 
```

# javascript - 引用页面上 ExtJS 组件的所有实例

> ID：13446494
> 
> 赞同：0
> 
> 时间：2012-11-19T01:22:30.397
> 
> 标签：javascript, extjs, extjs3

我创建了几个可重用的 ExtJS 组件，类似于以下内容：

```
MyCustomGridPanel = Ext.extend(Ext.form.GridPanel, {
    constructor: function(config) {
        config = Ext.apply({
            // some other default options
        }, config);

        MyCustomFormPanel.superclass.constructor.call(this, config);
    }
}); 
```

然后，我可以在需要它的页面中包含这个自定义网格面板。在某些情况下，我会在一个页面上多次使用相同的网格面板。

我要解决的问题是我有表单面板，我想自动更新包含与自动刷新的表单面板相关的数据的任何网格面板。

对于页面上的单个网格面板，在成功提交表单面板后，我可以调用`Ext.getCmp('the_id_of_the_grid_panel').getStore().reload()`. 但是对于这些网格面板的多个实例，我想做类似的事情，但不使用 ID，因为 ID 必须是唯一的。我想获取页面上所有网格面板的数组，其中包含某种标识符并调用`<item>.getStore().reload()`.

我的 Google 搜索和 Stack Overflow 搜索能力让我失望了，我似乎找不到任何东西来获得我想要的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T07:35:53.130

有两种方法可以做到这一点：

1) 在某种全局数组中维护您自己的这些对象的集合，然后在 initComponent 期间推送实例：

```
MyApp.myGrids.push(this); 
```

2）迭代〜所有〜组件然后提取出你想要的：

```
Ext.ComponentMgr.all.each(function(c){
    // xtype or some other check, instanceof
    if (c.isXType('mytype')) {
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T12:51:41.833

我们必须对我们的项目做类似的事情。我们需要网格来相互通信。当数据在一个中更新时，可能需要另一个网格来更新自身。我们通过在 extjs 应用程序中使用中介者模式来做到这一点。在这种情况下，我们将正在编辑的网格注册为某个事件的发送者，即编辑事件。然后，当添加新行时，中介发送消息，并且正在侦听该事件（编辑事件）的任何其他网格接收消息/事件并自行刷新。

您可以根据需要创建调解器。这是一个起点：

[http://www.fancybread.com/blog/post.cfm/mediator-pattern-applied-to-javascript](http://www.fancybread.com/blog/post.cfm/mediator-pattern-applied-to-javascript)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-19T06:54:48.210

也许将面板扩展为具有一组网格。表单提交成功后，“每个”遍历存储数组并重新加载。您可以决定是否要存储网格 id（并进行查找）或存储本身的 ref。

当然，您必须事先知道哪些网格与表单面板相关联。换句话说，您必须有一些方法来跟踪哪些网格最初属于哪个面板。也许您可以在网格的后渲染中填充这个网格数组。

最终，您需要设计一种方法来存储对所有这些 cmp 的引用。我认为库中没有任何东西可以为您做到这一点。在最基本的层面上.. 在每个 cmp 的 afterrender 中填充有引用的某种数组至少会给你一些循环的东西。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-20T06:48:34.323

你可以试试这个 ExtJS v3：

```
var gridPanels = [];
gridPanels.push(new MyCustomGridPanel(opts));    

...

Ext.each(gridPanels, function (gp) {
    gp.getStore().reload();
}); 
```

如果您计划为每个网格面板分配一个名称，您可以使用 ref 属性或将其分配给一个命名对象并遍历它。

```
MyMainPanel = Ext.extend(Ext.Panel, {
    gpNames: ['FirstName', 'Gender'],
    constructor: function(config) {
        config = Ext.apply({
            items: [{
                //make sure you create an xtype for your class
                xtype: 'MyCustomGridPanel',
                ref: 'gp'+gpNames[0]
            }, {
                xtype: 'MyCustomGridPanel',
                ref: 'gp'+gpNames[1]
            }]
        }, config);

        MyMainPanel.superclass.constructor.call(this, config);

        Ext.each(gpNames, function (gpName) {
            this['gp' + gpName].getStore().reload();
        }, this);
    }
}); 
```

这是一种非常粗略的做法，但我希望它有助于说明这个想法。

# c# - VideoBrush突然冻结，不知道为什么，wp7

> ID：13446502
> 
> 赞同：1
> 
> 时间：2012-11-19T01:23:26.643
> 
> 标签：c#, silverlight, windows-phone-7, xaml, windows-phone-7.1

**找出发生了什么——同时运行的加速度计和 VideoBrush 将冻结 VideoBrush。要解决此问题，请在启动 VideoBrush 之前停止加速度计**

使用最少的代码（如下所述），它会在 VideoBrush 在应用程序上启动后大约 2 分 15 秒后可靠地崩溃。这是在 Windows Phone 7.5 应用程序的 Windows 7 模拟器上，使用 c# 和 Xaml。如果 VideoBrush 拉伸也设置为填充等，就会发生这种情况（这有一个 Silverlight 1.0 错误）

*有关我如何得出此结论的故事，请查看下面的文字答案墙：)*

为什么会这样？我不知道。也许有内存泄漏或什么？值得注意的是——这实际上不会使应用程序本身崩溃。您不会弹出任何异常。

***重现问题的代码（创建一个名为 PhoneApp1 的新应用程序并自己尝试！）：***

**Xaml 代码：**

```
<phone:PhoneApplicationPage 
    x:Class="PhoneApp1.MainPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:phone="clr-namespace:Microsoft.Phone.Controls;assembly=Microsoft.Phone"
    xmlns:shell="clr-namespace:Microsoft.Phone.Shell;assembly=Microsoft.Phone"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d" d:DesignWidth="480" d:DesignHeight="800"
    FontFamily="{StaticResource PhoneFontFamilyNormal}"
    FontSize="{StaticResource PhoneFontSizeNormal}"
    Foreground="{StaticResource PhoneForegroundBrush}"
    SupportedOrientations="Portrait" Orientation="Portrait"
    shell:SystemTray.IsVisible="False">

    <!--LayoutRoot is the root grid where all page content is placed-->
    <Grid x:Name="LayoutRoot" Background="Transparent">

            <Rectangle x:Name="viewfinderCanvas" Width="480" Height="800" >
                <Rectangle.Fill>
                    <VideoBrush x:Name="viewfinderBrush"/>
                </Rectangle.Fill>
            </Rectangle>

    </Grid>
</phone:PhoneApplicationPage> 
```

**C#代码：**

```
using System;
using System.Windows;
using Microsoft.Phone.Controls;
using Microsoft.Devices;
using Microsoft.Devices.Sensors;

namespace PhoneApp1
{
    public partial class MainPage : PhoneApplicationPage
    {
        private Accelerometer AccelerometerSensor;

        // Constructor
        public MainPage()
        {
            InitializeComponent();
            AccelerometerSensor = new Accelerometer();
            AccelerometerStartup();

            if ((PhotoCamera.IsCameraTypeSupported(CameraType.Primary) == true))
            {
                viewfinderCanvas.Visibility = Visibility.Visible;
                var cam = new Microsoft.Devices.PhotoCamera(CameraType.Primary);

                viewfinderBrush.SetSource(cam);
            }
        }

        #region Accelerometer Startup Function
        private void AccelerometerStartup()
        {
            try
            {
                if (AccelerometerSensor != null)
                {
                    AccelerometerSensor.Start();

                }
            }
            catch (AccelerometerFailedException)
            {
            }
            catch (UnauthorizedAccessException)
            {
            }
        }
        #endregion
    }
} 
```

* * *

**下面的原始问题：（** *保留下面提到的代码，但由于没有连接加速度计，因此不会重现问题）*

这是一个有趣的，我保证。

我决定在我的 wp7.5 应用程序中放置一个矩形，其填充属性是 VideoBrush。我使用了从几个网站上找到的代码，并认为一切都很好。直到我注意到相机中的 VideoBrush 会冻结...运行 6 到 40 秒。

困惑，我以为我的调度计时器干扰了相机。将它们注释掉以使其无法运行并不能解决问题。然后我尝试在应用程序中禁用我的广告。也没有修好。我禁用了可能在整个应用程序中呈现更新的所有内容（计时器、调度计时器、广告轮换、任何循环），但它仍然冻结。

我做了同样的事情，甚至从计算机上拔下我的设备，因为我在连接到计算机的情况下使用设备进行调试时打开 zune 可能会破坏事情。还是没有骰子。

我创建了一个新项目并复制粘贴了 VideoBrush 代码，它可以正常工作而不会冻结。

XAML 代码：

```
<Rectangle x:Name="viewfinderCanvas" Width="480" Height="800" Visibility="Collapsed" DoubleTap="viewfinderCanvas_DoubleTap">
            <Rectangle.Fill>
                <VideoBrush x:Name="videoBrush">
                <VideoBrush.RelativeTransform>
                    <CompositeTransform x:Name="previewTransform"
                            CenterX=".5"
                            CenterY=".5" />
                </VideoBrush.RelativeTransform>
                </VideoBrush>
            </Rectangle.Fill>
        </Rectangle> 
```

C#代码：

```
if ((PhotoCamera.IsCameraTypeSupported(CameraType.Primary) == true))
    {
           viewfinderCanvas.Visibility = Visibility.Visible;
           var cam = new Microsoft.Devices.PhotoCamera(CameraType.Primary);

           if (Orientation == PageOrientation.PortraitUp || Orientation ==  
           PageOrientation.PortraitDown || Orientation == PageOrientation.Portrait)
             {
                videoBrush.RelativeTransform =
                new CompositeTransform() { CenterX = 0.5, CenterY = 0.5, Rotation = 90 };
             }

           videoBrush.SetSource(cam);
    } 
```

真的，我不知道是什么导致了 VideoBrush 显示冻结。我在每个函数上都设置了断点，但什么也没得到。不存在错误消息...视频只是冻结。

有没有人遇到过这个？它发生在我的设备和我编写代码的计算机上——模拟器的白盒刚刚停止。

为清楚起见——这样做的目的只是显示相机在应用程序中看到的内容——我不是在拍照或录制视频。我只是在做这个节目。要关闭窗口，用户将双击矩形以关闭原始视图。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T06:29:49.437

我发现了发生了什么，这确实与我的代码有关。

**TL:DR：带有活动 VideoBrush 的活动加速度计会导致 VideoBrush 最终冻结。**

我做了什么来测试这个：

拿起我的 2000 多行代码，我坐在那里开始注释 API、引用以及我通常认为会导致 VideoBrush 冻结的东西。每次我拿出相当大的代码块时，我都会测试该应用程序，看看它是否有所作为。我的测试依赖于 VideoBrush 从启动到冻结所需的秒数。

有趣的是，在移除任何东西之前，VideoBrush 冻结之前通常大约需要 45 秒左右。在剪掉我的代码后，当它突然跳到 2 分 45 秒时，我得到了我的第一个主要结果。这是在我删除了一些网格时实现的，这些网格包含几个在 Blend 中动画的堆栈面板、文本块和按钮。

在这一点上，我幽默地认为我的混合内容不会从 Visibility.Visible 变为 Visibility.Collapsed，因此随着时间的推移有些东西正在积累。情况并非如此，因为在调用 VideoBrush 之前折叠所有内容的功能在 2:45 的冻结时间没有任何变化。

我取出了所有资产，取出了所有计时器、调度计时器、秒表、日期时间实例，但它仍然没有做任何事情来改变 2:45。

然后我遇到了它：我的加速度计。

对于全貌，我在我的 wp7 应用程序中的两个不同页面上使用了加速度计。当用户第一次打开应用程序时，他将被带到一个教程页面，该页面有一个加速度计来模仿主页。完成该教程后，用户将被带到主页，该主页还有一个具有相同名称的加速度计和事件更改通知。

作为旁注，在查看我的代码时，我注意到我的一个编码错误，我实际上并没有在任一页面上停止/处置我的加速度计。这从未导致应用程序崩溃，因此它从未成为现实问题。

修复后，我注意到 VideoBrush 冻结之前的时间会上升到大约 5:00。进步了，但仍然是什么导致了这种冻结？

然后，我决定在启动 VideoBrush 之前停止加速度计，并且你瞧，VideoBrush 可以正常工作而不会冻结其图片。

很抱歉，因为这是一个不可能回答的问题，但不知道什么可以阻止 VideoBrush 在应用程序崩溃的情况下工作。至少现在有一种已知的方法！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T17:40:32.917

正如 KooKiz 的评论中所指出的，我能够用绝对最少的代码重现 VideoBrush 冻结。时间可能会有所不同，但使用以下代码，VideoBrush 会在 2 分 14 秒到 2 分 15 秒之间可靠地冻结。（我通过运行模拟器并打开我的系统时钟多次计时，注意 VideoBrush 何时启动以及何时冻结。）

Xaml 代码：

```
<phone:PhoneApplicationPage 
    x:Class="PhoneApp1.MainPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:phone="clr-namespace:Microsoft.Phone.Controls;assembly=Microsoft.Phone"
    xmlns:shell="clr-namespace:Microsoft.Phone.Shell;assembly=Microsoft.Phone"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d" d:DesignWidth="480" d:DesignHeight="800"
    FontFamily="{StaticResource PhoneFontFamilyNormal}"
    FontSize="{StaticResource PhoneFontSizeNormal}"
    Foreground="{StaticResource PhoneForegroundBrush}"
    SupportedOrientations="Portrait" Orientation="Portrait"
    shell:SystemTray.IsVisible="False">

    <!--LayoutRoot is the root grid where all page content is placed-->
    <Grid x:Name="LayoutRoot" Background="Transparent">

            <Rectangle x:Name="viewfinderCanvas" Width="480" Height="800" >
                <Rectangle.Fill>
                    <VideoBrush x:Name="viewfinderBrush"/>
                </Rectangle.Fill>
            </Rectangle>

    </Grid>
</phone:PhoneApplicationPage> 
```

C#代码：

```
using System;
using System.Windows;
using Microsoft.Phone.Controls;
using Microsoft.Devices;
using Microsoft.Devices.Sensors;

namespace PhoneApp1
{
    public partial class MainPage : PhoneApplicationPage
    {
        private Accelerometer AccelerometerSensor;

        // Constructor
        public MainPage()
        {
            InitializeComponent();
            AccelerometerSensor = new Accelerometer();
            AccelerometerStartup();

            if ((PhotoCamera.IsCameraTypeSupported(CameraType.Primary) == true))
            {
                viewfinderCanvas.Visibility = Visibility.Visible;
                var cam = new Microsoft.Devices.PhotoCamera(CameraType.Primary);

                viewfinderBrush.SetSource(cam);
            }
        }

        #region Accelerometer Startup Function
        private void AccelerometerStartup()
        {
            try
            {
                if (AccelerometerSensor != null)
                {
                    AccelerometerSensor.Start();

                }
            }
            catch (AccelerometerFailedException)
            {
            }
            catch (UnauthorizedAccessException)
            {
            }
        }
        #endregion
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T20:22:45.460

感谢您的代码，我能够重现该问题，并且找到了根本原因。

准备好，这将是一个“……就这样？” 片刻！

基本上，整个问题都在这条线上：

```
var cam = new Microsoft.Devices.PhotoCamera(CameraType.Primary); 
```

您创建了一个新的`PhotoCamera`，但您没有在任何地方保留参考。因此，当垃圾收集器启动时，它会释放您的孤立`PhotoCamera`实例，从而冻结视频。

很容易重现：只需在页面上添加一个按钮，然后放入点击处理程序：

```
GC.Collect(); 
```

只要按下按钮，视频就会冻结。

现在显而易见的问题是：为什么只有加速度计才会冻结？其实很简单。当分配的对象总数达到阈值时，会自动触发垃圾回收。当您只有视频时，分配的对象很少（可能没有），因此垃圾收集器不会在很长一段时间内被触发。打开加速度计时，它会快速更新其位置，在此过程中分配新对象，因此会在几分钟后触发垃圾收集。

如何解决问题？只需将您的`PhotoCamera`参考存储在一个属性中：

```
private PhotoCamera cam;

public MainPage()
{
    InitializeComponent();

    AccelerometerSensor = new Accelerometer();
    AccelerometerSensor.CurrentValueChanged += new EventHandler<SensorReadingEventArgs<AccelerometerReading>>(AccelerometerSensor_CurrentValueChanged);
    AccelerometerStartup();

    if (PhotoCamera.IsCameraTypeSupported(CameraType.Primary))
    {
        viewfinderCanvas.Visibility = Visibility.Visible;
        cam = new PhotoCamera(CameraType.Primary);

        viewfinderBrush.SetSource(cam);
    }
} 
```

# c++ - 替换特定字母的函数不会以 void 返回类型运行

> ID：13446504
> 
> 赞同：1
> 
> 时间：2012-11-19T01:24:00.747
> 
> 标签：c++, codeblocks

我必须创建一个程序，用第二个参数替换第一个参数中的所有字母。例如，如果传递的字符串是“How now cow”，并且该函数将所有 'o' 替换为 'e'，那么新字符串将是：“Hew new cew.”......我在第 9 行不断收到错误消息，返回无效部分。

```
#include <iostream>
using namespace std;

string replace(string mystring){
    replace(mystring.begin(), mystring.end(),  'e',  'o');
    return void;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-19T01:26:13.773

您只需要返回修改后的字符串，使用`return mystring;`而不是`return void;`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-19T01:26:45.890

```
string replace(string mystring){ 
```

这个函数叫做*replace*，接受一个*字符串*作为参数并**返回一个*字符串***，这由这个原型中函数名之前的类型表示。

如果它希望你返回一个*string*，你不能`return void;`因为*void*不是*string*类型。

因此，您需要`return mystring;`改为返回一个*string*。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-19T01:26:57.920

而不是返回无效，做

```
replace(mystring.begin(), mystring.end(),  'e',  'o');
return mystring; 
```

编辑：刚刚意识到我说的是错误的语言。对不起大家。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-19T01:48:57.597

不是很优雅，但它会完成工作。现在您可以用其他字符串替换字符串 - 或者只使用一个字符长的字符串（类似于您在示例中所做的）。

```
#include <iostream>
#include <cstdlib>
#include <string>

std::string string_replace_all( std::string & src, std::string const& target, std::string const& repl){

        if (target.length() == 0) {
                // searching for a match to the empty string will result in                                                                                                                                                                    
                //  an infinite loop                                                                                                                                                                                                           
                //  it might make sense to throw an exception for this case                                                                                                                                                                    
                return src;
        }

        if (src.length() == 0) {
                return src;  // nothing to match against                                                                                                                                                                                       
        }

        size_t idx = 0;

        for (;;) {
                idx = src.find( target, idx);
                if (idx == std::string::npos)  break;

                src.replace( idx, target.length(), repl);
                idx += repl.length();
        }

        return src;
}

int main(){

    std::string test{"loool lo l l l    l oooo l loo o"};
    std::cout << string_replace_all(test,"o","z") << std::endl;

    return EXIT_SUCCESS;
} 
```

> 输出： lzzzl lz llll zzzz l lzz z

* * *

如果您要使用自己的实现，请小心并检查您的边缘情况。确保程序不会在任何空字符串上崩溃。

# android - Google Analytics V2 未从 Android 应用记录统计信息

> ID：13446505
> 
> 赞同：16
> 
> 时间：2012-11-19T01:24:08.167
> 
> 标签：android, google-analytics, google-analytics-api

我正在使用 SDK for Android V2.0 beta 3 中的 EasyTracker。我已遵循[https://developers.google.com/analytics/devguides/collection/android/v2/](https://developers.google.com/analytics/devguides/collection/android/v2/)中描述的所有步骤，并确保我的 ga_trackingId 参数值中有连字符而不是破折号。

我已经在 Android 2.2 和 4.1.2 的模拟器以及真实设备上尝试了我的应用程序。这是来自 LogCat 的（部分编辑）输出：

```
11-17 20:13:50.587: W/GAV2(542): Thread[main,5,main]: Connection to service failed 1
11-17 20:13:50.616: W/GAV2(542): Thread[main,5,main]: Need to call initialize() and be in fallback mode to start dispatch.
11-17 20:13:50.616: I/GAV2(542): Thread[main,5,main]: ExceptionReporter created, original handler is com.android.internal.os.RuntimeInit$UncaughtHandler
11-17 20:13:52.617: I/GAV2(542): Thread[GAThread,5,main]: No campaign data found.
11-17 20:13:52.646: I/GAV2(542): Thread[GAThread,5,main]: putHit called
11-17 20:13:55.606: I/GAV2(542): Thread[Service Reconnect,5,main]: connecting to Analytics service
11-17 20:13:55.616: I/GAV2(542): Thread[Service Reconnect,5,main]: connect: bindService returned false for Intent { act=com.google.android.gms.analytics.service.START (has extras) }
11-17 20:13:55.616: W/GAV2(542): Thread[Service Reconnect,5,main]: Connection to service failed 1
11-17 20:13:55.616: I/GAV2(542): Thread[Service Reconnect,5,main]: falling back to local store
11-17 20:13:55.635: I/GAV2(542): Thread[GAThread,5,main]: Sending hit to store
11-17 20:13:55.666: I/GAV2(542): Thread[GAThread,5,main]: PowerSaveMode initiated.
11-17 20:13:55.696: I/GAV2(542): Thread[GAThread,5,main]: PowerSaveMode terminated.
11-17 20:13:55.696: V/GAV2(542): Thread[GAThread,5,main]: dispatch running...
11-17 20:13:55.746: I/GAV2(542): Thread[GAThread,5,main]: User-Agent: GoogleAnalytics/2.0 (Linux; U; Android 2.2; en-us; sdk Build/FRF91)
11-17 20:13:55.746: I/GAV2(542): Host: www.google-analytics.com
11-17 20:13:55.746: I/GAV2(542): GET /collect?ul=en-us&sr=480x800&a=935594353&sc=start&aid=com.xxx.android&cid=2b8c0c5de52ba05e&av=1.0&v=1&t=appview&an=xxx&tid=UA-xxx-55&_u=.nUWlMB&_v=ma1b3&cd=com.xxx.android.MainActivity&qt=5123&z=184 HTTP/1.1
11-17 20:13:56.116: V/GAV2(542): Thread[GAThread,5,main]: sent 1 of 1 hits
11-17 20:13:56.126: I/GAV2(542): Thread[GAThread,5,main]: PowerSaveMode initiated.
...
11-17 20:15:09.206: V/GAV2(542): Thread[GAThread,5,main]: dispatch running...
11-17 20:15:09.206: V/GAV2(542): Thread[GAThread,5,main]: ...nothing to dispatch
11-17 20:15:09.256: I/GAV2(542): Thread[GAThread,5,main]: putHit called
11-17 20:15:09.256: I/GAV2(542): Thread[GAThread,5,main]: Sending hit to store
11-17 20:15:09.316: I/GAV2(542): Thread[GAThread,5,main]: PowerSaveMode terminated.
11-17 20:15:11.706: V/GAV2(542): Thread[GAThread,5,main]: dispatch running...
11-17 20:15:11.716: I/GAV2(542): Thread[GAThread,5,main]: User-Agent: GoogleAnalytics/2.0 (Linux; U; Android 2.2; en-us; sdk Build/FRF91)
11-17 20:15:11.716: I/GAV2(542): Host: www.google-analytics.com
11-17 20:15:11.716: I/GAV2(542): GET /collect?v=1&ul=en-us&t=appview&sr=480x800&an=xxx&a=448166238&tid=UA-xxx-55&aid=com.xxx.android&cid=2b8c0c5de52ba05e&_u=.sB&av=1.0&_v=ma1b3&cd=com.xxx.android.ProductActivity&qt=2500&z=185 HTTP/1.1
11-17 20:15:11.986: V/GAV2(542): Thread[GAThread,5,main]: sent 1 of 1 hits
11-17 20:15:12.006: I/GAV2(542): Thread[GAThread,5,main]: PowerSaveMode initiated. 
```

我已经浏览了所有关于 SO 的相关帖子。

据此：[http](http://blog.blundell-apps.com/google-analytics-common-problems-and-fixes/) ://blog.blundell-apps.com/google-analytics-common-problems-and-fixes/ ，我看到“......没有发送”的事实表明数据已发送.

我不担心“连接到服务失败 1”警告，因为它没有停止为其他人记录分析数据（stackoverflow.com/questions/13222468/android-google-analytics-connection-to-service-失败的 ）。

这是我的analytics.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<resources xmlns:tools="https://schemas.android.com/tools" tools:ignore="TypographyDashes">
    <string name="ga_trackingId">UA-xxx-55</string>
    <bool name="ga_autoActivityTracking">true</bool>
    <bool name="ga_reportUncaughtExceptions">true</bool>
    <integer name="ga_dispatchPeriod">2</integer>
    <bool name="ga_debug">true</bool>
</resources> 
```

我的基础活动的一部分：

```
public class BaseActivity extends ActionBarActivity {
    @Override
    public void onStart() {
        super.onStart();
        EasyTracker.getInstance().activityStart(this);
    }

    @Override
    public void onStop() {
        super.onStop();
        EasyTracker.getInstance().activityStop(this);
    }
} 
```

问题是，为什么我的数据仍然没有显示在 Google Analytics 中？我已经等了必要的 24-48 小时，但它仍然是空的。

与故障排除相关的问题是：如果我直接从浏览器或 Fiddler 调用此 URL：http://www.google-analytics.com/collect?v=1&ul=en-us&t=appview&sr=480x800&an=xxx&a=1825278197&tid =UA-xxx-55&aid=com.xxx.android&cid=2b8c0c5de52ba05e&_u=.sB&av=1.0&_v=ma1b3&cd=com.xxx.android.ProductActivity&qt=2414&z=141，是否应该记录命中？（响应是 1x1 gif 图像。）如果是这样，那么这可能有助于以某种方式将问题隔离到分析帐户的设置。（我将此帐户用于许多其他网站，并且网络跟踪工作正常。）

编辑：此版本的 LogCat 是否应该显示“HTTP 响应代码：200”，因为这篇文章和上面链接的 Blundell 文章都提到了，尽管似乎是 EasyTracker 的早期版本：www.asgarddesigns.com.au/2012/05 /easytracker-google-analytics-integration-for-android/? 我的没有，但我怀疑可能是因为此日志消息已从最新版本中删除。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-19T09:05:53.183

使用适用于 Android 和 iOS 的 Google Analytics SDK 2.0 版，您需要使用**App 类型****在 GA 中创建一个新的配置文件，**以便能够查看正在收集和报告的数据。

 **这并没有真正突出显示，但您会在[迁移指南](https://developers.google.com/analytics/devguides/collection/android/v2/migration)中找到它的描述。

这意味着它将打破 1.x 版本的数据历史记录，但数据收集和报告差异太大，无法混合在一起，至少在它们处于 beta 阶段时是这样。**

# javascript - 用于显示弹出网格的 Javascript 方程

> ID：13446506
> 
> 赞同：4
> 
> 时间：2012-11-19T01:24:13.070
> 
> 标签：javascript, popup, grid, position, equation

我正在尝试打开队列中的所有弹出窗口，以便它们的大小和位置与我的队列数组中有多少项目有关。当弹出窗口启动时，无论是打开 2 个弹出窗口还是 200 个弹出窗口，它们都会完全填满用户屏幕（使用 screen.width 和 screen.height）。我已经计算出了每个弹出窗口的宽度等式，但是无法获得高度或顶部和左侧位置。我相信高度属性与屏幕宽高比（screen.width/screen.height）相关的宽度有关，但我可能错了。

这是代码，感谢您的帮助！

```
 var queue = [someUrl, someUrl, someUrl, someUrl];

 function popUp(){ //open popups

    var W=screen.width/Math.ceil(Math.sqrt(queue.length));

    for(i=0; i<queue.length; i++) {
        window.open(queue[i],i,'width='+W+',height='???',toolbar=0,
        menubar=0,location=0,status=0,scrollbars=0,resizable=0,left='???'
        ,top='???'');
    }
} 
```

`W*i`几乎可以工作，`left=`但是一旦弹出窗口到达屏幕右侧，它就无法重新分配弹出窗口。也许条件语句可以用于`if (W*i>screen.width)`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T03:37:56.980

looking at the related questions on the side I found the answer (more or less) written in another language. Trick is to first calculate the number of rows and columns your grid needs to have (based on the length of your array), then to do a loop inside a loop, where the first loop iterates your rows and the second your columns.

here's the javascript translation of that other answer

```
function popUp(){ 

    // calculate number of rows and columns 
    var cols = Math.ceil(Math.sqrt(queue.length));    
    var rows = Math.ceil(queue.length/cols);

    // calculate width and height based on number of cols && rows
    var W = screen.width / cols;
    var H = screen.height / rows;

    var item = 0; //item of the queue array

    for(i=0; i<rows; i++) {
        for(j=0; j<cols; j++) {

            window.open(queue[item],item,'width='+W+',height='+H+',toolbar=0,menubar=0,location=0,status=0,scrollbars=0,resizable=0,left='+W*j+',top='+H*i+'');

            item++; //add 1 to item
            if(item >= queue.length) { break } //break out of loop once item reaches length of queue

        }                                            
    }
} 
```

this loop would always create a perfect grid, which might not always be what you want, if you've got an odd number of items the last row should be missing a few cells, but this loop-ina-loop would create empty pop ups to finish off the grid, this is why we add that last line to break out of the loop once items >= queue.length (i.e. once you've reached the end of your queue)

**UPDATE**: here's looping in reverse (little easier to read up here than in the comment)

```
 for(i=rows-1; i>=0; i--) {
        for(j=cols-1; j>=0; j--) {
            //pop up code
        }                                            
    } 
```

# prolog - 卡在 Prolog 程序中

> ID：13446507
> 
> 赞同：0
> 
> 时间：2012-11-19T01:24:17.987
> 
> 标签：prolog

我精通 Java 和 C#，因此在 Prolog 中进行编码对我来说是一项相当艰巨的任务，因为它似乎是一种完全不同的思维方式。

我需要解决的问题很简单，用 Java 十分钟就能搞定。老实说，即使从这里开始，我也遇到了麻烦。我得到了代表选民“投票”的十个数字的列表。投票是 0、-1 或 1。然后我还会得到一个列表列表，每个列表都是候选人的列表。每个候选人的名单包括一个名字，后面跟着十个与选民名单类似的分数。

我的目标是然后将选民名单与每个候选人名单进行比较，并根据相同的选票返回最佳匹配名单。

这是给我的：

```
?- best_candidates(
    [           0,   0,   0,   1,   1,   1,  -1,  -1,  -1,   1],
    [[adams     1,   1,   1,   1,   1,   1,   1,   1,   1,   1],
     [grant    -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1],
     [polk      1,  -1,   1,  -1,   1,  -1,   1,  -1,   1,  -1],
     [jackson   1,   0,   1,   0,   1,   0,   1,   0,   1,   0],
     [taft      0,  -1,   0,  -1,   0,  -1,   0,  -1,   0,  -1],
     [ford      1,   1,   1,   1,   0,   0,   0,   0,   0,   0],
     [madison   0,   0,   0,   1,  -1,   0,   0,  -1,   1,   1]],
    BestMatches). 
```

这应该返回 BestMatches = [adams, Ford, madison]。

到目前为止，我没有太多。我只是想弄清楚我应该怎么做。我是否需要多种方法，或者我应该能够在 best_candidates 方法中完成这一切？

针对 Edmund 的建议，这是我目前所拥有的：

```
% match V1 and V2 and unify M with the match score
% match(V1, V2, M)
match([], [], 0).
match([H1|T1], [H2|T2], M) :-
    match_single_entry(H1, H2, M1),
    match(T1, T2, M2), 
    M is M1+M2.

% match_single_entry(I, J, M)
match_single_entry(X, Y, M) :-
    X =\= 0,
    Y =\= 0,
    I =:= J, 
    M is 1. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T02:03:39.060

似乎问题的症结在于一个函数，它接受两个 10 个数字的向量，并返回一个总匹配分数。

首先是 Prolog 没有功能；它有谓词。但是您可以通过提供可以绑定到“函数”输出的变量，轻松地将函数概念转换为谓词概念：

```
% Match V1 and V2, and unify M with the match score.
match(V1, V2, M) :- ... 
```

目前尚不清楚向量是如何匹配的（但我认为这是相同条目的数量？还是每对条目之间的绝对差异之和？）。但是这个谓词可能会用一个基本情况（对于长度为 0 的列表）和一个为每个列表的头部计算它的一般情况以及列表尾部的递归来定义。

```
match([], [], 0).  % I'm assuming the match score for empty lists is 0.
match([H1|T1], [H2|T2], M) :-
    match_single_entry(H1, H2, M1),  % Somehow compute the score for two single entries.
    match(T1, T2, M2),  % Recurse on the tails.
    M is M1+M2\.  % Combine the two scores and bind to the output variable M. 
```

我没有`match_single_entry`定义。一旦你定义了它，你应该练习`match`使用各种候选人的向量来对抗选民的向量：

```
% Let's try getting the match score for adams:
?- match([1,1,1,1,1,1,1,1,1,1], [0,0,0,1,1,1,-1,-1,-1,1], AdamsScore).

AdamsScore = 3 ;

No 
```

下一个挑战是编写另一个谓词`best_candidates`，该谓词采用选民的向量加上一组候选向量，对每个向量进行评分，然后返回 - 即绑定到对应于`BestMatches`得分最高的输出变量。同样，这个谓词可以通过定义一个基本案例（没有候选者，因此没有最佳案例）和一个一次处理一个候选者的递归案例来迭代候选向量集。

## 对每个候选向量进行评分

正如您所提到的，候选向量的名称后跟值。这意味着向量可以很容易地被 分割`[Name|Values] = V`，并且`Values`可以被传递以`match`与选民向量进行比较。

另一件事是将名称存储在`BestMatches`列表中。谓词必须对`best_candidates`每个候选向量进行评分，将这些分数保存在某个地方，然后它必须找到最佳分数，然后它必须遍历原始候选名称并添加与最佳分数一样好的那些。

建议添加一个谓词来完成第一部分：

```
% Score all vectors, returning a list of scores.
% score_vectors(VoterVector, AllVectors, AllScores)
score_vectors(V, [], []).
score_vectors(V, [H|T], [SH, ST]) :-
    ... score V against H, matching the result against SH.
    ... recurse on T and ST. 
```

（用 填写两行`...`）然后使用一个简单的谓词从中找到最大分数`AllScores`（或者可能有一个内置的谓词来做到这一点）。

然后制作另一个谓词，它遍历所有向量和分数，并选择满足最佳分数的那些：

```
% Pick best candidates.
% pick_best(AllVectors, AllScores, BestScore, BestNames).
pick_best([], [], BS, []).
pick_best([H|T], [SH|ST], BS, [Name|NT]) :-
    H = [Name|Values],
    SH >= BS.
pick_best([H|T], [SH|ST], BS, NT) :-
    H = [Name|Values],
    SH < BS. 
```

然后构建`best_candidates`出这三个步骤：

```
best_candidates(VoterVector, CandidateVectors, BestNames) :-
    score_vectors(VoterVector, CandidateVectors, Scores),
    maximum(Scores, BestScore),
    pick_best(CandidateVectors, Scores, BestScore, BestNames). 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T08:37:07.440

我将展示一个借助 SWI-Prolog 库（[聚合](http://www.swi-prolog.org/pldoc/doc_for?object=section%282,%27A.1%27,swi%28%27/doc/Manual/aggregate.html%27%29%29)）实现的解决方案。

```
:- [library(aggregate)].

best_candidates(Votes, Candidates, Best) :-
    maplist(count_matched(Votes), Candidates, NamesCounted),
    keysort(NamesCounted, BestDown),
    reverse(BestDown, Best).

count_matched(Votes, [Name|ThisVotes], MatchCount-Name) :-
    aggregate_all(sum(V * T),
        ( nth1(I, Votes, V),
          nth1(I, ThisVotes, T)
        ), MatchCount).

test(BestMatches) :-
    best_candidates(
         [           0,   0,   0,   1,   1,   1,  -1,  -1,  -1,   1],
        [[adams   ,  1,   1,   1,   1,   1,   1,   1,   1,   1,   1],
         [grant   , -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1],
         [polk    ,  1,  -1,   1,  -1,   1,  -1,   1,  -1,   1,  -1],
         [jackson ,  1,   0,   1,   0,   1,   0,   1,   0,   1,   0],
         [taft    ,  0,  -1,   0,  -1,   0,  -1,   0,  -1,   0,  -1],
         [ford    ,  1,   1,   1,   1,   0,   0,   0,   0,   0,   0],
         [madison ,  0,   0,   0,   1,  -1,   0,   0,  -1,   1,   1]],
        BestMatches),
    BestMatches = [_-A, _-B, _-C|_],
    writeln([A, B, C]). 
```

测试输出：

```
?- test(L).
[madison,ford,adams]
L = [1-madison, 1-ford, 1-adams, -1-jackson, -1-grant, -2-taft, -3-polk]. 
```

# tomcat - EC2 TOMCAT 7 上的 CORS

> ID：13446508
> 
> 赞同：2
> 
> 时间：2012-11-19T01:24:19.253
> 
> 标签：tomcat, amazon-ec2, cors

我正在尝试从广告客户端 (js) 到 Ec2 Tomcat7 进行 ajax 调用。

我按照此处的步骤在 tomcat7 上启用 CORS。

[http://software.dzhuvinov.com/cors-filter-installation.html](http://software.dzhuvinov.com/cors-filter-installation.html)

它给了我

XMLHttpRequest 无法加载[http://ec2-122-248-194-3.ap-southeast-1.compute.amazonaws.com:8080/Cocacard/FrontServlet](http://ec2-122-248-194-3.ap-southeast-1.compute.amazonaws.com:8080/Cocacard/FrontServlet)。Access-Control-Allow-Origin 不允许来源“http://192.168.2.3”。

我还尝试了我的服务器端 servlet 代码，

response.setHeader("Access-Control-Allow-Origin", "*");

没有运气。

有人遇到这个 b4 的 ec2 tomcat7 吗？

关于锤子

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T13:05:31.580

Try to configure your "CORS Filter" in web.xml, with following:

```
<filter>
    <filter-name>CORS</filter-name>
    <filter-class>com.thetransactioncompany.cors.CORSFilter</filter-class>

    <init-param>
        <param-name>cors.allowOrigin</param-name>
        <param-value>http://192.168.2.3</param-value>
    </init-param>
</filter> 
```

# node.js - 让 Backbone 和 Express 路由运行良好

> ID：13446517
> 
> 赞同：4
> 
> 时间：2012-11-19T01:26:04.207
> 
> 标签：node.js, backbone.js, express

我有一个提供以下路线的快递应用程序

```
/login
/signup
/
/app 
```

我希望我的主干应用程序管理以下路线

```
/app/overview/:company_id/:date
/app/rooms/:company_id/:date 
```

无论如何，express 在 /app 上提供了基本的 app.jade，然后应该将导航移交给主干，但不是拦截并给我一条找不到的路线。

我该怎么做呢？鉴于有人可能会复制并粘贴一个网址，例如

```
/app/overview/3/2012-12-12 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T01:51:16.907

您*可能*有两个相关的问题：您正在使用推送状态客户端（即使用“真实”URL，而不是 /app#overview 等哈希片段）但（可能）没有在 Backbone 中启用推送状态，并且您的快速配置确实不响应那些客户端路由。

使用推送状态 URL，您仍然必须在服务器端处理这些 URL，因为用户可能会使用这些直接的“客户端”URL 访问您的网站（哈希片段不会发生这种情况，因为哈希部分永远不会发送到服务器）。

因此，要修复服务器端处理，express 允许使用正则表达式作为路由，所以不是：

```
app.get('/app', function(req, res) {
  // Render the app...
}); 
```

你可以这样做（见[这里](http://expressjs.com/api.html#app.routes)）：

```
// The regexp could be a little more restrictive, obviously, but you get the point...
app.get(/^\/app(\/\w+)*$/, function(req, res) {
  // Render the app...
}); 
```

因此，无论哪个 /app/* URL 用作您的 Web 应用程序的入口点，它都会获得必要的内容。

然后在您的 Backbone 初始化客户端中，您应该使用`Backbone.history.start({pushState: true})`启用推送状态来启动历史管理。见[这里](http://backbonejs.org/#Router)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-19T01:30:28.847

您可以简单地为应用程序提供服务，而保持路线不变。

```
// given your app serves routes.index
app.get('/app/overview/:company_id/:date', routes.index);
app.get('/app/rooms/:company_id/:date', routes.index);
// ... and so on 
```

这样，应用程序将正常服务，允许骨干网处理路由。

# javascript - Schedule + OutputPanel + SelectOneRadio 问题

> ID：13446526
> 
> 赞同：1
> 
> 时间：2012-11-19T01:27:07.060
> 
> 标签：javascript, jsf-2, primefaces

我在这里遇到了一个奇怪的问题。在我的页面中，我有两个**outputPanel**。在第一个里面，有一个**时间表**，展示了我从数据库中查询的事件。在另一个内部，有一个数据**表**显示相同的事件，就像另一种可视化方式一样。此外，还有一个**selectOneRadio**在两个 outputPanel 之间交替。问题是：当页面加载时，默认的 outputPanel（包含计划的那个）（SCREEN 1）被完美加载。但是，当我将 selectOneRadio 交替到包含数据表的 outputPanel 然后返回（屏幕 2）时， outputPanel 不会加载。当我单击页面上的任意位置时，浏览器的控制台会显示以下消息：

```
Uncaught TypeError: Cannot read property 'top' of undefined primefaces.js.xhtml:1
Uncaught TypeError: Cannot read property 'left' of undefined primefaces.js.xhtml:16 
```

这是xhtml页面：

```
<!-- Painel de seleção do tipo de exibição -->
            <p:panelGrid columns="2"
                         styleClass="gridNoLine clearBelow">
                <p:selectOneRadio value="#{eventoBean.tipoExibicaoSelecionada}">
                    <p:ajax listener="#{eventoBean.onTipoExibicaoAlterada}"
                            update=":frmEventos:opCalendario :frmEventos:opTabela"/>
                    <f:selectItem itemValue="1" itemLabel="Exibir calendário"/>
                    <f:selectItem itemValue="2" itemLabel="Exibir tabela"/>
                </p:selectOneRadio>
            </p:panelGrid>

            <!-- Painel do Calendário -->
            <p:outputPanel id="opCalendario">
                <p:schedule id="sEventos"
                            value="#{eventoBean.customScheduleModel}"
                            widgetVar="schEventos"
                            locale="pt"
                            rendered="#{eventoBean.tipoExibicaoSelecionada == 1}">
                    <p:ajax event="eventSelect" 
                            listener="#{eventoBean.onEventSelect}" 
                            update=":frmDetalhesEvento"
                            immediate="true" 
                            oncomplete="dlgDetalhesEvento.show();"/>
                    <p:ajax event="dateSelect" 
                            listener="#{eventoBean.onDataSelecionada}"
                            update="@form :frmNovoEditarEvento"
                            oncomplete="dlgNovoEditarEvento.show();"/>
                </p:schedule>
            </p:outputPanel >

            <!-- Painel do DataTable -->
            <p:outputPanel id="opTabela">
                <p:dataTable
                    value="#{eventoBean.eventos}"
                    paginator="true" rows="5" 
                    rowsPerPageTemplate="5,10"
                    paginatorPosition="bottom"
                    paginatorTemplate="{FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                    var="evento"
                    rendered="#{eventoBean.tipoExibicaoSelecionada == 2}"
                    emptyMessage="Não há eventos para exibição">
                    <f:facet name="header">
                        Eventos
                    </f:facet>
                    <!-- Colunas de edição e exclusão -->
                    <p:column styleClass="commandColumn">
                        <f:facet name="header">
                            <h:outputLabel value="Editar"/>
                        </f:facet>
                        <p:commandButton image="ui-icon-pencil" 
                                         title="Editar"
                                         update=":frmNovoEditarEvento:pNovoEditarEvento"
                                         oncomplete="dlgNovoEditarEvento.show();">
                            <f:setPropertyActionListener value="#{evento}" 
                                                         target="#{eventoBean.eventoSelecionado}" />
                        </p:commandButton>
                    </p:column>
                    <p:column styleClass="commandColumn">
                        <f:facet name="header">
                            <h:outputLabel 
                                value="Excluir"/>
                        </f:facet>
                        <p:commandButton id="cbViewExcluir" 
                                         oncomplete="dlgExcluir.show();" 
                                         icon="ui-icon-close" 
                                         title="Excluir">
                            <f:setPropertyActionListener value="#{evento}"
                                                         target="#{eventoBean.eventoSelecionado}" />
                        </p:commandButton> 
                    </p:column>
                    <p:column sortBy="#{evento.nmeEvento}" 
                              styleClass="wrap tableTitleWidth">
                        <f:facet name="header">
                            Nome
                        </f:facet>
                        <p:panelGrid columns="1" 
                                     styleClass="gridNoLine">
                            <h:outputLabel id="olViewNomeEvento" 
                                           value="#{evento.nmeEvento}" 
                                           styleClass="t2"/>
                            <p:panelGrid columns="4" styleClass="gridNoLine wrap">
                                <h:outputLabel value="Início: " styleClass="t3"/>&nbsp;
                                <h:outputLabel value="#{evento.dtaInicioEvento}"/>&nbsp;&nbsp;
                                <h:outputLabel value="Término: " styleClass="t3"/>&nbsp;
                                <h:outputLabel value="#{evento.dtaTerminoEvento}"/>&nbsp;
                            </p:panelGrid>
                            <p:separator title="Descrição do evento"/>
                            <h:outputLabel value="#{evento.dscEvento}" 
                                           styleClass="wrap"/>
                            <p:panelGrid columns="4" 
                                         styleClass="gridNoLine">
                                <p:commandButton value="Atividades"
                                                 styleClass="commandButton"
                                                 title="Gerenciar as atividades do evento."
                                                 action="atividades"/>
                                <p:commandButton value="Recursos"
                                                 styleClass="commandButton"
                                                 title="Alocar recursos para o evento."/>
                                <p:commandButton value="Serviços"
                                                 styleClass="commandButton"
                                                 title="Alocar serviços para o evento."/>
                                <p:commandButton value="Participantes"
                                                 styleClass="commandButton"
                                                 title="Gerenciar participantes do evento."/>
                            </p:panelGrid>
                        </p:panelGrid>
                    </p:column>
                </p:dataTable>
            </p:outputPanel> 
```

这是我的豆：

```
...

private int tipoExibicaoSelecionada = 1;

...

public void onTipoExibicaoAlterada() {
    if (tipoExibicaoSelecionada == 1) { // Exibir como calendario

        // Realizando a lógica de painéis
        exibirComoCalendario = true;
        exibirComoTabela = !exibirComoCalendario;

    } else { // Exibir como DataTable

        // Realizando a lógica de painéis
        exibirComoCalendario = false;
        exibirComoTabela = !exibirComoCalendario;

        if (eventos == null) {
            try {
                // Consultar os eventos para exibir no DataTable
                eventos = eventoService.consultarTodos();
            } catch (Exception e) {
            }
        }
    }
}

public void onEventSelect(ScheduleEntrySelectEvent entrySelectEvent) {

    try {
        // Transformando o evento para Pojo
        eventoSelecionado = ScheduleEventConverter.convertToEventoPojo(eventoService, entrySelectEvent.getScheduleEvent());
    } catch (Exception e) {
    }

}

public void onDataInicioAlterada(DateSelectEvent e) {
}

public void onDataTerminoAlterada(DateSelectEvent e) {
}

public void onDataSelecionada(DateSelectEvent e) {
    // Gerando um novo evento para ser preenchido
    eventoSelecionado = new TbEvento();

}

public void loadModel() {

    try {

        // Carregando o custom schedule model
        customScheduleModel = new CustomScheduleModel();

        // Carregando a lista de publicos
        publicos = publicoService.consultarTodos();

        // Carregando os tipos de eventos
        tiposEventos = tipoEventoService.consultarTodos();

    } catch (Exception e) {
    }
} 
```

我正在使用以下 Maven 依赖项：

```
<dependency>
    <groupId>org.primefaces</groupId>
    <artifactId>primefaces</artifactId>
    <version>3.4.2</version>
</dependency> 
```

屏幕 1：

![在此处输入图像描述](../Images/7c271ad37c41e700a69683302d82e62f.png)

屏幕 2：

![在此处输入图像描述](../Images/d93e8e6ff2931ff8b1262068196d4f53.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T06:29:11.310

尝试用`<p:selectOneRadio`&`p:ajax`替换`<h:selectOneRadio`&`f:ajax`

我不是 maven 用户，请仔细检查您是否真的只使用 3.4.2 并查看此线程... [[PF 3.1 快照] Dialog + OverlayPanel + SelectOneMenu JS E](http://forum.primefaces.org/viewtopic.php?f=3&t=17954)

# scala - 如何使用 Scala 宏对方法调用中的命名参数进行建模？

> ID：13446528
> 
> 赞同：23
> 
> 时间：2012-11-19T01:27:17.637
> 
> 标签：scala, scala-macros

在某些用例中，创建一个对象的副本很有用，该对象是一组案例类的一个案例类的实例，它们具有共同的特定值。

例如，让我们考虑以下案例类：

```
case class Foo(id: Option[Int])
case class Bar(arg0: String, id: Option[Int])
case class Baz(arg0: Int, id: Option[Int], arg2: String) 
```

然后`copy`可以在每个案例类实例上调用：

```
val newId = Some(1)

Foo(None).copy(id = newId)
Bar("bar", None).copy(id = newId)
Baz(42, None, "baz").copy(id = newId) 
```

如[here](http://www.scala-lang.org/node/4620)和[here](https://stackoverflow.com/questions/12370244/case-class-copy-method-with-superclass)所述，没有简单的方法可以像这样抽象它：

```
type Copyable[T] = { def copy(id: Option[Int]): T }

// THIS DOES *NOT* WORK FOR CASE CLASSES
def withId[T <: Copyable[T]](obj: T, newId: Option[Int]): T =
  obj.copy(id = newId) 
```

所以我创建了一个 scala 宏，它（几乎）完成了这项工作：

```
import scala.reflect.macros.Context

object Entity {

  import scala.language.experimental.macros
  import scala.reflect.macros.Context

  def withId[T](entity: T, id: Option[Int]): T = macro withIdImpl[T]

  def withIdImpl[T: c.WeakTypeTag](c: Context)(entity: c.Expr[T], id: c.Expr[Option[Int]]): c.Expr[T] = {

    import c.universe._

    val currentType = entity.actualType

    // reflection helpers
    def equals(that: Name, name: String) = that.encoded == name || that.decoded == name
    def hasName(name: String)(implicit method: MethodSymbol) = equals(method.name, name)
    def hasReturnType(`type`: Type)(implicit method: MethodSymbol) = method.typeSignature match {
      case MethodType(_, returnType) => `type` == returnType
    }
    def hasParameter(name: String, `type`: Type)(implicit method: MethodSymbol) = method.typeSignature match {
      case MethodType(params, _) => params.exists { param =>
        equals(param.name, name) && param.typeSignature == `type`
      }
    }

    // finding method entity.copy(id: Option[Int])
    currentType.members.find { symbol =>
      symbol.isMethod && {
        implicit val method = symbol.asMethod
        hasName("copy") && hasReturnType(currentType) && hasParameter("id", typeOf[Option[Int]])
      }
    } match {
      case Some(symbol) => {
        val method = symbol.asMethod
        val param = reify((
          c.Expr[String](Literal(Constant("id"))).splice,
          id.splice)).tree
        c.Expr(
          Apply(
            Select(
              reify(entity.splice).tree,
              newTermName("copy")),
            List( /*id.tree*/ )))
      }
      case None => c.abort(c.enclosingPosition, currentType + " needs method 'copy(..., id: Option[Int], ...): " + currentType + "'")
    }

  }

} 
```

`Apply`（见上面代码块的底部）的最后一个参数是参数列表（这里：方法'copy'的参数）。如何在新的宏 API 的帮助下将给定`id`的类型`c.Expr[Option[Int]]`作为命名参数传递给复制方法？

特别是以下宏表达式

```
c.Expr(
  Apply(
    Select(
      reify(entity.splice).tree,
      newTermName("copy")),
    List(/*?id?*/))) 
```

应该导致

```
entity.copy(id = id) 
```

使得以下成立

```
case class Test(s: String, id: Option[Int] = None)

// has to be compiled by its own
object Test extends App {

  assert( Entity.withId(Test("scala rulz"), Some(1)) == Test("scala rulz", Some(1)))

} 
```

缺少的部分由占位符表示`/*?id?*/`。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-11-19T03:52:14.840

这是一个更通用的实现：

```
import scala.language.experimental.macros

object WithIdExample {
  import scala.reflect.macros.Context

  def withId[T, I](entity: T, id: I): T = macro withIdImpl[T, I]

  def withIdImpl[T: c.WeakTypeTag, I: c.WeakTypeTag](c: Context)(
    entity: c.Expr[T], id: c.Expr[I]
  ): c.Expr[T] = {
    import c.universe._

    val tree = reify(entity.splice).tree
    val copy = entity.actualType.member(newTermName("copy"))

    val params = copy match {
      case s: MethodSymbol if (s.paramss.nonEmpty) => s.paramss.head
      case _ => c.abort(c.enclosingPosition, "No eligible copy method!")
    }

    c.Expr[T](Apply(
      Select(tree, copy),
      params.map {
        case p if p.name.decoded == "id" => reify(id.splice).tree
        case p => Select(tree, p.name)
      }
    ))
  }
} 
```

它适用于任何具有名为 的成员的案例类`id`，无论其类型是什么：

```
scala> case class Bar(arg0: String, id: Option[Int])
defined class Bar

scala> case class Foo(x: Double, y: String, id: Int)
defined class Foo

scala> WithIdExample.withId(Bar("bar", None), Some(2))
res0: Bar = Bar(bar,Some(2))

scala> WithIdExample.withId(Foo(0.0, "foo", 1), 2)
res1: Foo = Foo(0.0,foo,2) 
```

如果 case 类没有`id`成员，`withId`将编译——它不会做任何事情。如果你想在这种情况下出现编译错误，你可以在匹配上添加一个额外的条件`copy`。

* * *

[编辑：正如 Eugene Burmako 刚刚在 Twitter 上](https://twitter.com/xeno_by/status/270495257152593920)指出的那样，你可以在最后使用更自然地写这个`AssignOrNamedArg`：

```
c.Expr[T](Apply(
  Select(tree, copy),
  AssignOrNamedArg(Ident("id"), reify(id.splice).tree) :: Nil
)) 
```

如果案例类没有`id`成员，则此版本将无法编译，但无论如何这更有可能是所需的行为。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-19T20:21:35.547

这是 Travis 的解决方案，将所有部分放在一起：

```
import scala.language.experimental.macros

object WithIdExample {

  import scala.reflect.macros.Context

  def withId[T, I](entity: T, id: I): T = macro withIdImpl[T, I]

  def withIdImpl[T: c.WeakTypeTag, I: c.WeakTypeTag](c: Context)(
    entity: c.Expr[T], id: c.Expr[I]
  ): c.Expr[T] = {

    import c.universe._

    val tree = reify(entity.splice).tree
    val copy = entity.actualType.member(newTermName("copy"))

    copy match {
      case s: MethodSymbol if (s.paramss.flatten.map(_.name).contains(
        newTermName("id")
      )) => c.Expr[T](
        Apply(
          Select(tree, copy),
          AssignOrNamedArg(Ident("id"), reify(id.splice).tree) :: Nil))
      case _ => c.abort(c.enclosingPosition, "No eligible copy method!")
    }

  }

} 
```

# erlang - Erlang中的register_name和register函数有什么区别

> ID：13446531
> 
> 赞同：2
> 
> 时间：2012-11-19T01:27:40.753
> 
> 标签：erlang

Erlang 中的 register_name 和 register 函数有什么区别？两者都将 PID 注册为名称！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-19T01:40:07.983

挖掘文档，我发现它`register()`是`erlang`模块的一部分，而`register_name()`它是模块的一部分`global`。因此，这两个函数之间的主要区别似乎是`register_name()`将为 Erlang 节点网络全局注册一个名称。

> **全局注册名称的能力是分布式 Erlang 系统编程的核心概念。在这个模块中，实现了 register/2 和 whereis/1 BIF（用于本地名称注册）的等效项，但针对的是 Erlang 节点网络。**注册名称是进程标识符 (pid) 的别名。全局名称服务器监视全局注册的 pid。如果一个进程终止，该名称也将被全局注销。

[来源](http://www.erlang.org/doc/man/global.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-19T01:37:50.033

register_name 是 Global 模块的一部分，它处理在一个包含许多节点的系统中全局注册 Pid。register/2 是 Erlang 模块的一部分，并将名称与本地节点的 Pid 相关联。

# twitter-bootstrap - Bootstrap v2.2.1 中的 typeahead 在 Firefox 中向上或向下键跳过所有其他值

> ID：13446534
> 
> 赞同：1
> 
> 时间：2012-11-19T01:28:25.053
> 
> 标签：twitter-bootstrap, bootstrap-typeahead

我不确定这是 TB 引入的新错误还是我，但它在 Chrome 和 IE 中有效，但在 Firefox 中无效。

显示建议时，typeahead 会跳过 key up 或 down 上的所有其他值。

```
<input type="text" class="manufacturer typeahead" placeholder="manufacturer">
<script type="text/javascript">
$('.manufacturer.typeahead').typeahead({
            "source":['manufacturer 1','manufacturer 2','manufacturer 3', 'manufacturer 4','manufacturer 5','manufacturer 6','manufacturer 7','manufacturer 8'],
            "items":8
        })
<script> 
```

推特引导 2.2.1
jQuery 1.8.3
火狐 16.0.2

无论如何打开了错误：[https ://github.com/twbs/bootstrap/issues/5943](https://github.com/twbs/bootstrap/issues/5943)

[DEMO2](http://jsfiddle.net/gpfK8/3/)（开始输入“m”）或 [TB 网站上的官方预输入演示](http://twitter.github.com/bootstrap/javascript.html#typeahead)（开始输入“a”）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T12:51:39.883

那真的是一个错误。这是修复：

```
 , move: function (e) {
    if (!this.shown) return

    switch(e.keyCode) {
        case 9: // tab
        case 13: // enter
        case 27: // escape
            e.preventDefault()
            break

        case 38: // up arrow
            e.preventDefault()
            if (e.type=='keydown') this.prev()
            break

        case 40: // down arrow
            e.preventDefault()
            if (e.type=='keydown') this.next()
            break
    } 
```

# sql - SQL 帮助？ROUND 和 AVG 功能？

> ID：13446536
> 
> 赞同：-4
> 
> 时间：2012-11-19T01:28:51.770
> 
> 标签：sql, rounding, average

```
SELECT ROUND(AVG(ANNUAL_SALARY),0) 
```

我知道我说的是不正确的。有人可以为我纠正吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T01:34:51.767

我假设表名是 SalaryHistory

所以查询将是

```
SELECT ROUND(AVG([ANNUAL_SALARY]), 0)
FROM SalaryHistory 
```

这将为您提供所有员工的平均工资，但如果您想获得每个员工的平均工资，您需要写下类似这样的查询。

```
SELECT ROUND(AVG([ANNUAL_SALARY]), 0), EmployeeID
FROM SalaryHistory
GROUP BY EmployeeID 
```

您可以将此 EmployeeID 与 Employee Table 连接，以获取结果集中的 Employee Name，而不是仅获取 EmployeeID。

无论如何，如果您只是将表结构与您的要求放在一起，我也许可以给您一个准确的查询。

# javascript - 从变量获取json响应？

> ID：13446540
> 
> 赞同：0
> 
> 时间：2012-11-19T01:29:19.843
> 
> 标签：javascript, jquery, ajax, json, string

如果从在谷歌浏览器开发者工具中`console.log(data)`传递 AJAX 请求输出结果的函数内部进行
![](../Images/f0fdc6e890ee58518afd20a0d598aff9.png)
操作，我想知道如何获得结果的值？我认为整个响应被解释为字符串？通常我只会使用`dataType`参数，但我无法控制这个 AJAX 请求。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T01:31:29.190

`data.response`property 包含一个序列化为 JSON 的对象，因此您必须以这种方式对其进行反序列化：

```
var response = JSON.parse(data.response),
    result = response.result; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T01:30:47.097

您正在尝试解析 JSON：

```
 var data = JSON.parse(obj.response); 
```

# c++ - 区分变量值的多个实例？

> ID：13446541
> 
> 赞同：2
> 
> 时间：2012-11-19T01:29:32.657
> 
> 标签：c++

```
class foo{

public:
    double v1, v2, v3;
    double x, y;

    foo(const double &a){
        set_var();

        x = a;

        if(a == v1)
            y = 1;
        else if(a == v2)
            y = 0;
        else if(a == v3)
            y = 2;
    }

    void set_var(){
        // v1, v2 and v3 will always be the same values as the corresponding double values
        // that foo a,b and c are being set to in main()
        v1 = 1.4;
        v2 = 1.4;
        v3 = 1.4;
    }

}; 
```

在主要功能中：

```
main(){
    foo a = 1.2, b = 1.2, c = 1.2;
} 
```

本质上，当我们尝试将 'foo a, b, c' 设置为相同的 double 值（因此 'v1, v2, v3' 也是相同的值）时，我希望这段代码执行的操作是 foo a=1.4给出 ay=1，foo b=1.4 给出 by=0，而 foo c=1.4 给出 cy=2

简而言之伪代码。基本上，'foo a' 应该总是使用第一个 if 子句，'foo b' 应该总是使用第二个，而 'foo c' 应该总是使用第三个。

作为这个任务的一部分，我必须以这种方式实现 main 函数。它不能改变。

我的第一个想法是，即使我试图将 foo a,b,c 设置为相同的双精度，该双精度总是在内存中占据不同的位置，不是吗？所以也许我可以在构造函数中以某种方式传递 double &x 的地址？然后将该地址设置为代表 v1、v2 和 v3，而不是首先使用这些变量？

即使双值相等，我只需要获取代码来执行我在上面概述的几段内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T01:34:45.833

由于您的问题似乎与家庭作业有关，因此我将向您指出[静态成员变量](http://www.learncpp.com/cpp-tutorial/811-static-member-variables)的方向，简而言之，这些变量是在给定类的所有实例之间共享的类变量。您可以使用这些变量中的一个或多个来跟踪实例实例化的进度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T01:52:08.713

不幸的是，如果以下两个都是真的：

> 简而言之伪代码。基本上，'foo a' 应该总是使用第一个 if 子句，'foo b' 应该总是使用第二个，而 'foo c' 应该总是使用第三个。

和

> 作为这个任务的一部分，我必须以这种方式实现 main 函数。它不能改变。

……那你就不走运了。除了它们的名称外，您的 main 函数`a`中 ,`b`和之间没有任何区别。`c`

也许我误解了你的措辞 - 如果是这样，你能澄清一下吗？

# ios - 将现有项目导入 iOS 中的另一个项目

> ID：13446542
> 
> 赞同：0
> 
> 时间：2012-11-19T01:29:35.350
> 
> 标签：ios, sdk, storyboard

我在我的一个项目中有一个将效果应用于图片的功能。现在，我想在另一个项目中使用相同的功能。我只是想问一下在 iOS 中导入是如何工作的。另外，除了后端功能，我想使用类似的视图。我使用情节提要实现了它。

任何见解将不胜感激。

谢谢！

# build - 配置 Gradle 以将主类和测试类包含到我的 .jar 存档中

> ID：13446545
> 
> 赞同：5
> 
> 时间：2012-11-19T01:30:23.370
> 
> 标签：build, gradle

如何配置 Gradle 以将主类和测试类包含到我的 .jar 存档中。**目前，在build/libs**目录中构建的 .jar 缺少我的测试类。 在 Gradle 将它们编译到**project-root/bin/com/package/**之后，它仅包含来自.jar 中的**project-root/src/main/java/com/package**的类。

 **```
jar {
    manifest {
        attributes 'Implementation-Title': title, 'Implementation-Version': version, 'Main-Class': mainTestClass
    }
} 
```

奇怪的是，虽然 Gradle 将已编译的测试类与主类一起放入**project-root/bin/com/package/**中，但奇怪的是决定不将它们放入 .jar 存档中。那么，如何让 .jar 也包含最初源自 **project-root/src/test/java/com/package/** 目录的测试类？

这是我需要帮助的[build.gradle 文件。](https://gist.github.com/4108725)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-19T03:08:58.180

从[文档](http://www.gradle.org/docs/current/userguide/java_plugin.html#N11E2A)：

> Java 插件定义了两个标准源集，称为 main 和 test。主源集包含您的生产源代码，这些源代码被编译并组装成一个 JAR 文件。测试源集包含您使用 JUnit 或 TestNG 编译和执行的单元测试源代码。

高度怀疑您是否希望将测试放在 jar 中，但将它们添加到主源集可能是最简单的解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-03-04T19:12:09.270

我这样用

```
task jarr(type: Jar) {
    from sourceSets.main.output + sourceSets.toSet().output
    manifest {
        attributes(
                'Main-Class': 'main.Mainn',
                "Manifest-Version": "1.0",
                "Class-Path": configurations.compile.collect { it.getName() }.join(' ') + ' ' +
                        configurations.testRuntime.collect { it.getName() }.join(' ') + ' ' +
                        configurations.implementation.collect { it.getName() }.join(' ')
        )
    }

} 
```**

# android - 根据方向更改背景图像。

> ID：13446549
> 
> 赞同：3
> 
> 时间：2012-11-19T01:31:04.720
> 
> 标签：android, android-layout, orientation

我有一个简单的问题，似乎有两个简单的解决方案，这两种方法都不适合我，我似乎无法理解为什么。

我想为我的布局设置一个纵向视图背景和一个备用横向背景。我将不同的图像分别放在单独的文件夹布局和布局土地中。

纵向=应该是什么横向=黑屏

然后我尝试制作一个名为 drawable-land 的文件夹并将宽视图背景放在那里。同样的结果。

去肖像时黑色。

我有什么遗漏吗？这看起来很简单，我无法理解我可能做错了什么。

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-19T01:49:55.630

根据屏幕方向以编程方式更改背景：

```
 @Override
     public void onCreate(Bundle savedInstanceState){
     super.onCreate(savedInstanceState);
     setContentView(R.layout.main);

     LinearLayout linearLayout = (LinearLayout)findViewById(R.id.layout);
     Resources res = getResources();
     Drawable portrait = res.getDrawable(R.drawable.portrait);
     Drawable landscape = res.getDrawable(R.drawable.landscape);

     WindowManager window = (WindowManager)getSystemService(WINDOW_SERVICE);
     Display display = window.getDefaultDisplay();
     int num = display.getRotation();
     if (num == 0){
         linearLayout.setBackgroundDrawable(portrait);
     }else if (num == 1 || num == 3){
         linearLayout.setBackgroundDrawable(landscape);
     }else{
        linearLayout.setBackgroundDrawable(portrait);
     }
    } 
```

试试看，希望对你有帮助！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-03-17T09:50:57.360

基于方向的可绘制图像处理很容易，无需任何额外的代码。只是我们需要遵循一些可绘制的目录命名结构并相应地放置图像。我认为，这个链接会有很大帮助：http: [//developer.android.com/guide/topics/resources/providing-resources.html](http://developer.android.com/guide/topics/resources/providing-resources.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-04-16T05:26:48.727

**感谢 chRyNan 提供的已接受答案**，它确实对我有用，没有任何障碍。由于 Constraint Layout 现在是默认布局，而 setBackGroundDrawable 已弃用。这是 2018 年的另一个版本。

```
super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_organization_key_enter);

    ConstraintLayout constraintLayout = (ConstraintLayout) findViewById(R.id.layout);
    Resources res = getResources();
    Drawable portrait = res.getDrawable(R.drawable.portrait);
    Drawable landscape = res.getDrawable(R.drawable.landscape);

    WindowManager window = (WindowManager)getSystemService(WINDOW_SERVICE);
    Display display = window.getDefaultDisplay();
    int num = display.getRotation();
    if (num == 0){
        constraintLayout.setBackground(portrait);
    }else if (num == 1 || num == 3){
        constraintLayout.setBackground(landscape);
    }else{
        constraintLayout.setBackground(portrait);
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-17T15:23:00.250

确保两个图像文件具有相同的名称，即使文件包含不同的图像。例如，如果您在 drawable-land 和 drawable-port 文件夹中都有一个名为“background01.png”的图像，则以下内容将起作用：

```
 <ImageView
            android:id="@+id/imageView1"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:scaleType="fitXY"
            android:src="@drawable/background01" /> 
```

# c# - 修改基础列表时的 PLINQ O(n^2)

> ID：13446555
> 
> 赞同：3
> 
> 时间：2012-11-19T01:31:44.977
> 
> 标签：c#, multithreading, linq, plinq

假设我有这个顺序函数：

```
private void Process()
{
  for (int i = 0; i < Particles.Count; i++)
    for (int j = 0; j < Particles.Count; j++)
      if (check(Particles[i], Particles[j])
      {
        Particle newParticle = Particle.Merge(Particles[i], Particles[j]);
        Particle p1 = Particles[i];
        Particle p2 = Particles[j];

        Particles.Remove(p1);
        Particles.Remove(p2);
        Particles.Add(newParticle);

        i = j = 0;
      }
} 
```

那么这有什么作用呢？它检查是否应该合并两个粒子。如果应该，则创建一个新粒子，从列表中删除原始粒子，并将新粒子添加到列表中。

然后我通过将 i 和 j 设置为零来做了一些懒惰的事情。在一个`for`循环中，我可以，`Particles.RemoveAt(i--)`并且循环将在它停止的地方继续，但是因为这里我们有 i 和 j，所以它要复杂得多。

反正。这是另一个应该很容易并行化的代码块。唯一的问题是我需要修改我正在迭代的集合，无论它是并行的还是顺序的。

如果我使用`foreach`而不是`for`，我会得到一个异常，说集合的大小已经改变。如果我使用 PLINQ：

```
private void Process()
{
  Particles.AsParallel.ForAll(p1 =>
  {
    Particles.ForEach(p2 =>
    {
      if (check(p1, p2)
      {
        Particle newParticle = Particle.Merge(p1, p2);

        Particles.Remove(p1);
        Particles.Remove(p2);
        Particles.Add(newParticle);
      }
    });
  });
} 
```

我得到一个 LINQ 异常。

有什么方法可以并行化这个 n^2 操作并能够更改列表的内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T01:45:31.320

尝试这样做：

```
from p1 in Particles.AsParallel()
    let collisions = from p2 in Particles
                     where p1 != p2
                     where check(p1, p2)
                     select p2
    select Particle.Merge(p1, collisions) 
```

第二个`Particle.Merge`作用于碰撞列表以生成新粒子。你会想要一些比这更多的逻辑，但这应该会给你一个想法。

基本思想是您要非破坏性地创建列表的新副本。然后进行任何修改并替换旧列表。

你想做的一些事情是：

*   修改`Particle.Merge`为对列表进行操作：`Particle.Merge(Particle p, IEnumerable<Particle> collisions)`.
*   添加一些逻辑以防止重复出现在该列表中两次。

# xcode - Xcode 无法编译“线程 1：信号 SIGABRT”

> ID：13446558
> 
> 赞同：1
> 
> 时间：2012-11-19T01:32:04.630
> 
> 标签：xcode, macos, osx-lion, osx-snow-leopard, sigabrt

第一次编译后，Xcode 从 Thread 1 发出关于 SIGABRT 的错误。错误日志显示了这个，

```
2012-11-18 20:26:37.866 Test app[26222:8a03] Unknown class 'AppDelegate', using 'NSObject' instead. Encountered in Interface Builder file at path /Users/tommiller/Library/Developer/Xcode/DerivedData/Test_app-gvobsrwxsylgvkamecrxetkkkorf/Build/Products/Debug/Test app.app/Contents/Resources/en.lproj/MainMenu.nib.
2012-11-18 20:26:37.908 Test app[26222:8a03] -[_NSControllerObjectProxy copyWithZone:]: unrecognized selector sent to instance 0x7fcfb8659660
2012-11-18 20:26:37.909 Test app[26222:8a03] An uncaught exception was raised
2012-11-18 20:26:37.909 Test app[26222:8a03] -[_NSControllerObjectProxy copyWithZone:]: unrecognized selector sent to instance 0x7fcfb8659660
2012-11-18 20:26:37.913 Test app[26222:8a03] (
    0   CoreFoundation                      0x000000010e42dfc6 __exceptionPreprocess + 198
    1   libobjc.A.dylib                     0x000000010e29bd5e objc_exception_throw + 43
    2   CoreFoundation                      0x000000010e4ba2ae -[NSObject doesNotRecognizeSelector:] + 190
    3   CoreFoundation                      0x000000010e41ae73 ___forwarding___ + 371
    4   CoreFoundation                      0x000000010e41ac88 _CF_forwarding_prep_0 + 232
    5   AppKit                              0x000000010eef3178 -[NSCell _setContents:] + 73
    6   AppKit                              0x000000010eef3055 -[NSCell setObjectValue:] + 160
    7   AppKit                              0x000000010f115adc -[_NSPlaceholderTextFieldPlugin showValue:inObject:] + 388
    8   AppKit                              0x000000010f0fdf31 -[NSValueBinder _adjustObject:mode:observedController:observedKeyPath:context:editableState:adjustState:] + 809
    9   AppKit                              0x000000010f0fdb74 -[NSValueBinder _observeValueForKeyPath:ofObject:context:] + 303
    10  AppKit                              0x000000010f1158cf -[NSTextValueBinder _observeValueForKeyPath:ofObject:context:] + 43
    11  AppKit                              0x000000010eeec777 -[NSObject(NSKeyValueBindingCreation) bind:toObject:withKeyPath:options:] + 591
    12  AppKit                              0x000000010eee5a89 -[NSIBObjectData nibInstantiateWithOwner:topLevelObjects:] + 1079
    13  AppKit                              0x000000010eedc09f loadNib + 322
    14  AppKit                              0x000000010eedb59c +[NSBundle(NSNibLoading) _loadNibFile:nameTable:withZone:ownerBundle:] + 217
    15  AppKit                              0x000000010eedb4b7 +[NSBundle(NSNibLoading) loadNibFile:externalNameTable:withZone:] + 141
    16  AppKit                              0x000000010eedb3fa +[NSBundle(NSNibLoading) loadNibNamed:owner:] + 364
    17  AppKit                              0x000000010f14e9b3 NSApplicationMain + 398
    18  Test app                            0x000000010e22de12 main + 34
    19  Test app                            0x000000010e22dde4 start + 52
)
2012-11-18 20:26:37.972 Test app[26222:8a03] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[_NSControllerObjectProxy copyWithZone:]: unrecognized selector sent to instance 0x7fcfb8659660'
*** First throw call stack:
(
    0   CoreFoundation                      0x000000010e42dfc6 __exceptionPreprocess + 198
    1   libobjc.A.dylib                     0x000000010e29bd5e objc_exception_throw + 43
    2   CoreFoundation                      0x000000010e4ba2ae -[NSObject doesNotRecognizeSelector:] + 190
    3   CoreFoundation                      0x000000010e41ae73 ___forwarding___ + 371
    4   CoreFoundation                      0x000000010e41ac88 _CF_forwarding_prep_0 + 232
    5   AppKit                              0x000000010eef3178 -[NSCell _setContents:] + 73
    6   AppKit                              0x000000010eef3055 -[NSCell setObjectValue:] + 160
    7   AppKit                              0x000000010f115adc -[_NSPlaceholderTextFieldPlugin showValue:inObject:] + 388
    8   AppKit                              0x000000010f0fdf31 -[NSValueBinder _adjustObject:mode:observedController:observedKeyPath:context:editableState:adjustState:] + 809
    9   AppKit                              0x000000010f0fdb74 -[NSValueBinder _observeValueForKeyPath:ofObject:context:] + 303
    10  AppKit                              0x000000010f1158cf -[NSTextValueBinder _observeValueForKeyPath:ofObject:context:] + 43
    11  AppKit                              0x000000010eeec777 -[NSObject(NSKeyValueBindingCreation) bind:toObject:withKeyPath:options:] + 591
    12  AppKit                              0x000000010eee5a89 -[NSIBObjectData nibInstantiateWithOwner:topLevelObjects:] + 1079
    13  AppKit                              0x000000010eedc09f loadNib + 322
    14  AppKit                              0x000000010eedb59c +[NSBundle(NSNibLoading) _loadNibFile:nameTable:withZone:ownerBundle:] + 217
    15  AppKit                              0x000000010eedb4b7 +[NSBundle(NSNibLoading) loadNibFile:externalNameTable:withZone:] + 141
    16  AppKit                              0x000000010eedb3fa +[NSBundle(NSNibLoading) loadNibNamed:owner:] + 364
    17  AppKit                              0x000000010f14e9b3 NSApplicationMain + 398
    18  Test app                            0x000000010e22de12 main + 34
    19  Test app                            0x000000010e22dde4 start + 52
)
terminate called throwing an exception(lldb) 
```

信号来自**main.m**`return NSApplicationMain(argc, (const char **)argv);`内部，

 **```
#import <Cocoa/Cocoa.h>

int main(int argc, char *argv[])
{
    return NSApplicationMain(argc, (const char **)argv);
} 
```

我很少收到这些记录的错误，所以我不知道错误指向什么。我最好的猜测是`14 AppKit 0x000000010eedb59c +[NSBundle(NSNibLoading)_loadNibFile:nameTable:withZone:ownerBundle:] + 217`没有加载 XIB？...**我该如何解决这个问题？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T02:06:45.107

如果您查看最初的错误：

```
Unknown class 'AppDelegate', using 'NSObject' instead. Encountered in Interface Builder file 
```

它告诉您，在您的代码中的某处，您尝试在假定为 AppDelegate 的对象上调用消息选择器，但事实并非如此。该错误是在加载 MainMenu.nib 时发生的。

所以它可能不是你的代码，而是你的 MainMenu 视图是如何连接到项目中的。你想打开你的 MainMenu XIB 文件并检查它是否连接到应用程序的委托。**

# java - 构造函数 Vehicle(String[], int) 未定义

> ID：13446559
> 
> 赞同：0
> 
> 时间：2012-11-19T01:32:17.650
> 
> 标签：java, class, constructor

我对java很陌生，无法弄清楚！这就是它的样子，但它给了我一个错误，我不确定我是否必须转换它！或者我做错了什么！！！

这是我的要求：使用提供的车辆数据为变量赋值。有关访问这些车辆数据值的信息，请参阅数据文件布局信息。1.速度

```
public class Bicycle extends Vehicle implements IOutput {

private static int speeds;

public Bicycle(String[] vehicleData) {
    super(vehicleData,speeds);   // get error: The constructor Vehicle(String[], int) is undefined

            // or i should this one :
    speeds = Convert.toInteger(vehicleData[0]);
} 
```

这是车辆类别

```
public Vehicle(String[] vehicleData) {
    count++;
    owner= new Owner(vehicleData);

    setVehicleType(Convert.toInteger(vehicleData[0]));
    make = vehicleData[1];
    model = vehicleData[2];
    color = vehicleData[3];
    purchaseDate = vehicleData[4];
    cost = Convert.toDouble(vehicleData[5]);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T01:33:57.357

您的 Vehicle 类中的构造函数仅接受 string[] 并且您正在传递一个 string[] 和一个 int。

改变

```
super(vehicleData,speeds);   // get error: The constructor Vehicle(String[], int) is undefined 
```

至

```
super(vehicleData);   // your error'd now disappear 
```

或在您的超类**Vehicle**中声明速度。

```
int speed;
public Vehicle(String[] vehicleData, int speed) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-19T01:34:32.557

`super`正在调用`Vehicle`构造函数，它只接受一个字符串，而不是一个字符串和一个 int。

改成这个。

```
// remove static
int speed;
public Bicycle(String[] vehicleData) {
    super(vehicleData);
    speeds = Integer.valueOf(vehicleData[0]);
} 
```

# android - ListView onClick 在模拟器中有效，但在触摸手机上无效

> ID：13446560
> 
> 赞同：0
> 
> 时间：2012-11-19T01:32:33.363
> 
> 标签：android

谁能告诉我为什么这在我的 LG400f 触摸手机上不起作用，但在模拟器中单击鼠标却可以正常工作？

**代码**

```
ListView listView = (ListView) findViewById(R.id.listContactsList);
ArrayAdapter<String> adapter = new ArrayAdapter<String>(this, R.layout.list_contacts,  R.id.listContactsView, values);
listView.setAdapter(adapter);
listView.setClickable(true);
listView.setFocusable(true);
listView.setFocusableInTouchMode(true);
listView.setOnItemClickListener(new AdapterView.OnItemClickListener() {

@Override
    public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
    Object selection = (Object) parent.getItemAtPosition(position);
    Toast.makeText(getApplicationContext(), selection.toString(), Toast.LENGTH_LONG).show();
    // Toast is triggered with mouse click in emulator but not touch in phone 
```

**XML**

```
<ListView
    android:id="@+id/listContactsList"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    tools:context=".ListContacts" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-04-20T04:45:09.447

在 xml 中的 Listview 检查 touchscreenBlocksFocus = true

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T06:48:32.173

感谢回答这个问题的人。

我没有直接完全解决这个问题，但编写了一个有效的变体。

首先，我之前的课程是这样定义的：**ListContacts extends Activity**并且代码就像我在原始问题中显示的那样。

我现在已经定义了我的类**ListContacts 扩展 ListActivity**并更改了代码（有效），如下所示：

首先从 onCreate() 和 XML 文件中的 textview 中删除 setContentView(R.layout.xxxx)。

**代码：**

```
this.setListAdapter(new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, android.R.id.text1, values));
ListView listView = getListView();
listView.setOnItemClickListener(new OnItemClickListener() {

    @Override
    public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
        Object selection = (Object) parent.getItemAtPosition(position);
        Toast.makeText(getApplicationContext(), selection.toString(), Toast.LENGTH_LONG).show(); 
```

# sql-server - 如何根据sql中的选定数据集获取重复行

> ID：13446566
> 
> 赞同：3
> 
> 时间：2012-11-19T01:33:47.010
> 
> 标签：sql-server, sql-server-2008, common-table-expression

我有一个 CTE 查询，但我对此一无所知。我是编程新手。实际上我的查询中有 Qty 列，我想重复行直到 qty。表示如果 qty 等于 50，则数据集返回 50 条时间记录。如果数量等于 100 万，则查询返回 1000 万条记录。以下查询对我来说很好，直到 <99 rcords 我怎样才能成长为 1000 rocords。

提前谢谢。

```
SELECT * INTO #TableA
FROM
(

SELECT MIS_Request_Detail.vno, MIS_Request_Detail.IID
       , MIS_Request_Detail.Qty-MIS_Request_Detail.BalQty qty, 
       1 RcvdQty, pk,
       ItmMstr.IName, ItmMstr.UName, '' SrNo,
       MIS_Request_Detail.Qty As ReqQty, MIS_Request_Detail.BalQty
       , MIS_Request_Detail.Qty-MIS_Request_Detail.BalQty RemainQty
FROM MIS_Request_Detail INNER JOIN
view_MIS_Item_Master ItmMstr ON ItmMstr.IID=MIS_Request_Detail.IID
WHERE ReqType=1 AND MIS_Request_Detail.vno=@vno 

) T
;WITH Nbrs ( Number ) AS (
SELECT 1 UNION ALL
SELECT 1 + Number FROM Nbrs WHERE Number < 99 
)

SELECT A.vno,A.IID, A.IName, A.UName, CAST(SrNo AS VARCHAR(50)) SrNo
   , CAST(N.Number AS varchar(50)) QTY, pk ReqDetpk, RcvdQty,
   A.ReqQty, A.BalQty, A.RemainQty, 0 Color,  0 chked, 0 Pk, 0 AS isupdate
   , '' AS isdeleted
FROM #TableA A
JOIN Nbrs N ON N.Number <= A.qty
ORDER BY IID, N.Number, pk 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T06:13:31.673

如果您的临时表不包含标识符和超过 1 的行数，我会在 #TableA 中添加 Id

```
SELECT * INTO #TableA
FROM
(
 SELECT ROW_NUMBER() OVER (ORDER BY (SELECT 1)) AS Id,
        MIS_Request_Detail.vno, MIS_Request_Detail.IID
        , MIS_Request_Detail.Qty-MIS_Request_Detail.BalQty qty, 
        1 RcvdQty, pk,
        ItmMstr.IName, ItmMstr.UName, '' SrNo,
        MIS_Request_Detail.Qty As ReqQty, MIS_Request_Detail.BalQty
        , MIS_Request_Detail.Qty-MIS_Request_Detail.BalQty RemainQty
FROM MIS_Request_Detail INNER JOIN
  view_MIS_Item_Master ItmMstr ON ItmMstr.IID=MIS_Request_Detail.IID
WHERE ReqType=1 AND MIS_Request_Detail.vno=@vno 
) T

;WITH Nbrs(Id, vno, IID, IName, UName, SrNo, QTY, ReqDetpk, RcvdQty, ReqQty, 
           BalQty, RemainQty, Color, chked, Pk, isupdate, isdeleted, [Level]) AS (
SELECT A.Id, A.vno,A.IID, A.IName, A.UName, CAST(SrNo AS VARCHAR(50)) SrNo
       , CAST(N.Number AS varchar(50)) QTY, pk ReqDetpk, RcvdQty,
       A.ReqQty, A.BalQty, A.RemainQty, 0 Color,  0 chked, 0 Pk, 0 AS isupdate
       , '' AS isdeleted, 1 AS [Level]
FROM #TableA A
UNION ALL
SELECT A.Id, A.vno,A.IID, A.IName, A.UName, CAST(SrNo AS VARCHAR(50)) SrNo
       , CAST(N.Number AS varchar(50)) QTY, pk ReqDetpk, RcvdQty,
       A.ReqQty, A.BalQty, A.RemainQty, 0 Color,  0 chked, 0 Pk, 0 AS isupdate
       , '' AS isdeleted, n.[Level] + 1
FROM #TableA A JOIN Nbrs n ON A.Id = n.Id
WHERE A.Number > n.[Level]
)
SELECT *
FROM Nbrs
ORDER BY IID, N.Number, pk 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T03:18:58.790

正如您可能发现的那样，递归 CTE 的递归限制为 99。要解决这个问题，您必须使用一系列 CROSS JOIN，如[Itzik Ben-Gan 的 SQL Magazine 文章](http://www.sqlmag.com/article/sql-server/virtual-auxiliary-table-of-numbers)中所述。

```
WITH
L0   AS(SELECT 1 AS c UNION ALL SELECT 1),
L1   AS(SELECT 1 AS c FROM L0 AS A CROSS JOIN L0 AS B),
L2   AS(SELECT 1 AS c FROM L1 AS A CROSS JOIN L1 AS B),
L3   AS(SELECT 1 AS c FROM L2 AS A CROSS JOIN L2 AS B),
L4   AS(SELECT 1 AS c FROM L3 AS A CROSS JOIN L3 AS B),
L5   AS(SELECT 1 AS c FROM L4 AS A CROSS JOIN L4 AS B),
Nums AS(SELECT ROW_NUMBER() OVER(ORDER BY (SELECT NULL)) AS n FROM L5)
SELECT n FROM Nums 
```

这为您提供了高达 40 亿的数字。

# c# - 基于 SQL 表创建对象的免费工具

> ID：13446567
> 
> 赞同：0
> 
> 时间：2012-11-19T01:33:51.740
> 
> 标签：c#, asp.net, sql-server-2008, entity-framework

我正在从头开始创建一个 Web 应用程序，想知道是否有一个免费工具可以让我将表转换为对象，这些对象将具有创建、更新和删除方法之类的内容，并允许我自定义或创建其他方法，如果我想上课。我在看**netTiers** [http://www.nettiers.com/](http://www.nettiers.com/)，但那个问题是我需要**CodeSmith** [http://www.codesmithtools.com/product/generator](http://www.codesmithtools.com/product/generator)我没有那种钱在这一刻度过。有没有其他我可以使用的工具，而且是免费的？

我创建的所有其他应用程序，我必须自己创建所有层，但如果有一些免费的东西我可以用来帮助我节省时间并且你可以建议我，我会非常感谢这样的建议。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T01:39:57.017

你知道很久我也想过用这样的工具，直到我遇到了实体框架，很简单！

*   创建到 sql server 的连接
*   找到您要建模的表格
*   创建一个模型文件并打开它（右键单击解决方案资源管理器，添加，新项目，选择数据，单击 ado.net 实体数据模型）

然后，您将通过一个向导来选择要从中生成类的表。

之后应该很容易！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T01:48:41.313

有 2 个选择需要考虑，`Entity framework`和`LINQ to SQL`。LINQ 是查询从关系中创建的对象的便捷方式。有一个[OR 设计](http://msdn.microsoft.com/en-us/library/bb384429%28v=vs.100%29.aspx)器，其服务器类似的目的是将表转换为对象。此外，如果您要处理大量表，您可能希望使用[`SQLMetal`](http://msdn.microsoft.com/en-us/library/bb386987.aspx)它`LINQ`为基础关系表提供包装器。`SQlMetal`自动创建添加、更新和删除的方法。您可以自定义生成的代码，也可以连接到它提供的事件。

# javascript - 如何更改 jqGrid 中的过滤器选择

> ID：13446569
> 
> 赞同：0
> 
> 时间：2012-11-19T01:33:52.300
> 
> 标签：javascript, jquery, jquery-ui, jqgrid

我正在使用 jsbin 上的以下示例（从@oleg 的示例修改的代码）

[http://jsbin.com/owitod/18/edit](http://jsbin.com/owitod/18/edit)

我有一个 jquery-ui 对话框，它显示了一个下拉框，它模仿其中一列的过滤器下拉框和一个按钮。单击按钮时，警报对话框会显示当前的 jqGrid 过滤器。但是，当我在对话框内的下拉列表中更改下拉选择时，我希望 jqGrid 过滤器也可以更改。

上述演示的示例：

1.  选择类别运动
2.  单击显示对话框
3.  注意运动是预选的
4.  单击显示过滤器并注意：

    {"groupOp":"AND","rules":[{"field":"Category","op":"eq","data":"sport"}]}

5.  将对话框中的下拉菜单更改为科学

6.  此时，当我单击显示过滤器时，我希望收到以下警报

    {"groupOp":"AND","rules":[{"field":"Category","op":"eq","data":"science"}]}

我在代码中尝试了以下内容，但它不起作用：

```
$("#gs_Category").val($("#mycat").val());  //this doesn't work...

alert(jQuery("#list").jqGrid('getGridParam', 'postData').filters); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T01:54:54.487

我认为您遇到的错误是尝试设置所选选项。 `gs_Category`是一个选择下拉菜单。要更改所选选项，请尝试：

```
$('#gs_Category').find('option[value="' + $('#mycat').val() + '"]').attr('selected', true); 
```

**更新**

在设置选定值后添加以下行将导致触发网格的过滤器事件（因为您使用的是本地数据类型）。

```
$('#gs_Category').trigger('change'); 
```

# thread-safety - 如何在 Java 中线程安全地操作文件？

> ID：13446570
> 
> 赞同：1
> 
> 时间：2012-11-19T01:33:53.100
> 
> 标签：thread-safety, file-access

每次在我的网站上请求一个页面时，我都会通过如下服务调用记录一些详细信息：

```
logService.logPageRequest(session, request, contentId); 
```

此服务调用使用静态 FileUtils（我自己的）方法对文件进行实际更新。

```
public static void appendToTextFile(String string, String fileRootDirectory, String subdirectory, String filename, boolean startOnNewLine) throws Exception {
    // code irrelevant to the question removed

    String filePath=fileDirectory+"/"+filename;
    File file=new File(filePath);
    if(file.exists()) {
        FileWriter out = new FileWriter(filePath, true);
        if(startOnNewLine) {
            out.write("\r\n");
        }
        out.write(string);
        out.close();
     } else {
         FileWriter out = new FileWriter(filePath);
         out.write(string);
         out.close();
} 
```

每隔一段时间（假设每 15 分钟安排一次），我执行另一个服务，该服务重命名此文件并开始处理它。

我想了解如何确保两个并发写入都是安全的，并且在写入过程中不执行重命名。我想答案将是某种形式的同步。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T09:44:25.447

这两个服务需要共享一个*同步对象*：它可以是任何东西（甚至`new byte[1]`），但它必须是同一个实例，传递到您的“服务”中。每当有一个*临界区*，这意味着代码的一部分想要对*共享资源*进行操作时，就需要将它包装起来。

```
synchronized(theInstanceOfSynchronizationObject) {
  // ... your code for critical section
} 
```

良好锁定的规则是确定性地知道您要锁定什么，共享资源到底是什么。什么会杀死你（并引入死锁）是随机添加同步块以希望“解决”。在您的特定示例中，很可能是对`file`:的*操作*，而不是对文件名字符串的操作，也不是对`File`: 的实例化，您可以有许多`File`对象指向*磁盘上的同一个文件*，这不是关键操作，只要它还没有接触到磁盘。所以我会说

```
File file=new File(filePath);
synchronized(theInstanceOfSynchronizationObject) {
  if(file.exists()) {
  } else {
  }
} 
```

同样，保护您的其他服务中的`File` *操作*。请记住，`File`您要保护的不是对象，而是*文件本身*。

# jquery - 使用jquery根据选择状态设置表单标签的样式？

> ID：13446571
> 
> 赞同：0
> 
> 时间：2012-11-19T01:33:54.503
> 
> 标签：jquery, html, forms, radio-button

我有一个带有单选按钮的表单，如

```
<label for="challenge" class="fat">Challenge 
    <input type="radio" name="create-what" value="challenge" id="challenge">
</label>
<label for="team" class="fat">Team 
    <input type="radio" name="create-what" value="team" id="team">
</label> 
```

显然，单击标签会选择收音机。我还需要做的是根据单选按钮的选定状态更改标签的类。因此，将“活动”类添加到所选收音机的标签，如果未选择收音机，则将其删除。

我有很多这样的鞋，所以我一直在寻找最便携的方式。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T01:37:18.303

`change`在 jQuery 中通过监视事件并根据`checked`状态切换类非常简单

```
$('input:radio').change(function(){

     $(this).parent().toggleClass('active', this.checked).siblings().removeClass('active');
}); 
```

`toggleClass`允许布尔值作为第二个参数来确定是添加还是删除。`this.checked`要么是真，要么是假；

如果您还需要在页面加载时运行它，只需触发`change`页面加载时：

```
$('input:radio').change(function(){

     $(this).parent().toggleClass('active', this.checked).siblings().removeClass('active');
}).change(); 
```

# vmware - 如何在 vijava 中查找 NAS 数据存储信息

> ID：13446573
> 
> 赞同：0
> 
> 时间：2012-11-19T01:33:57.393
> 
> 标签：vmware, vsphere

我正在编写一个与 VMWare vSphere 客户端交互的应用程序。它使用 vijava 库来做到这一点。我需要使用 NFS 服务器的 IP 地址和导出目录的名称在主机上查找 NAS 数据存储。

我可以使用 HostFileSystemVolume.type 查找该主机上的数据存储并找出 NFS 类型的数据存储，但我现在如何找到此数据存储的 NASDatastoreInfo 对象。文档很庞大，我没有时间阅读所有内容。我知道我需要为我找到的相应 Datastore 对象获取 NASDatastoreInfo 对象，但无法找出任何可能返回 NASDatastoreInfo 对象的方法。您所拥有的只是来自 Datastore 对象的 DatastoreInfo 对象。

任何帮助，将不胜感激。

谢谢...自由

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T01:41:03.723

除非挂载，否则您将无法获得有关 NAS 的*任何*卷信息。

我怀疑您的主机上安装了那么多驱动器。

建议：

1.  只需抓取所有已安装的卷

2.  检查它们每个的 NASDataStoreInfo 属性

3.  只需忽略没有它的卷。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T19:14:30.943

这就是我设法做到的方式。代码可能看起来有点复杂，但要点如下：

查找该主机的所有卷，并找到在其上构建了 NFS 文件系统的卷。对于这些卷中的每一个，使用卷名 = 数据存储名称条件迭代数据存储列表。找到匹配项后，从 DatastoreInfo 对象获取 NASDatastoreInfo 对象并检查远程 NFS 服务器 IP 和导出目录。

我为此主机上的所有卷检查了 HostFileSystemVolume.type=='NFS'，然后检查了该卷的远程 NFS 服务器 IP 和导出目录。

代码已经有一个指向 vCenter 的服务实例“si”和一个名为“host”的 HostSystem 对象

```
 HostDatastoreSystem hds = host.getHostDatastoreSystem();
     HostDatastoreBrowser hdb = host.getDatastoreBrowser();
     Datastore[] allDS = hdb.getDatastores();
     HostConfigInfo hostConfigInfo = host.getConfig();
     HostFileSystemVolumeInfo hostFSVolumeInfo = hostConfigInfo.getFileSystemVolume();
     HostFileSystemMountInfo[] hostFSMountInfo= hostFSVolumeInfo.getMountInfo();
     for (HostFileSystemMountInfo hfsmi : hostFSMountInfo) {
         HostFileSystemVolume hfsv = hfsmi.getVolume();
         if (hfsv.getType().equalsIgnoreCase("nfs")){
             String dsName = hfsv.getName();
             for(Datastore ds: allDS) {
                 DatastoreInfo di = ds.getInfo();
                 if (di.getName().equals(dsName)){
                     HostNasVolume nas = ((NasDatastoreInfo)di).getNas();
                     if (nas.getRemoteHost().equals(nfsServer) & nas.getRemotePath().equals(datastorePathOnNfsServer)) {
                         try {
                        } catch (HostConfigFault e) {
                             logger.error("ERROR : unmountNfsDatastore : Could not remove Datastore named: " + ds.getName() + " on " +  "host: " + hostname , e);
                             ret = 1;
                             return ret;
                        } catch (ResourceInUse e) {
                             logger.error("ERROR : unmountNfsDatastore : Could not remove Datastore named: " + ds.getName() + " on " +  "host: " + hostname , e);
                             ret = 1;
                             return ret;
                        } catch (NotFound e) {
                             logger.error("ERROR : unmountNfsDatastore : Could not remove Datastore named: " + ds.getName() + " on " +  "host: " + hostname , e);
                             ret = 1;
                             return ret;
                        } catch (RuntimeFault e) {
                             logger.error("ERROR : unmountNfsDatastore : Could not remove Datastore named: " + ds.getName() + " on " +  "host: " + hostname , e);
                             ret = 1;
                             return ret;
                        } catch (RemoteException e) {
                             logger.error("ERROR : unmountNfsDatastore : Could not remove Datastore named: " + ds.getName() + " on " +  "host: " + hostname , e);
                             ret = 1;
                             return ret;
                        }
                         return 0;
                     }
                 }
             }
         }
     }
     logger.error("ERROR : unmountNfsDatastore : Could not find Datastore exported by " + nfsServer + " on " +  "host: " + hostname);
     ret = 0;
     return ret;
                            hds.removeDatastore(ds); 
```

# vhdl - VHDL中是否定义了整数溢出？

> ID：13446580
> 
> 赞同：8
> 
> 时间：2012-11-19T01:34:31.870
> 
> 标签：vhdl

我想知道是否在 VHDL 中定义了整数溢出。我无法在 2002 规范中找到任何内容。

作为一个例子*（注意，这可能无法编译，它只是一个通用的例子......）*：

```
entity foo is port (
    clk : std_logic
);
end entity;

architecture rtl of foo is
    signal x : integer range 0 to 2 := 0;
begin
    process (clk)
    begin
        if rising_edge(clk) then
            x <= x + 1;
        end if;
    end process;
end architecture; 
```

很明显，`x`它将从 0 变为 1，然后变为 2。它是否定义了下一个增量会发生什么？那是未定义的行为吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-20T23:06:51.523

对于 ghdl 中 foo 的 rtl 的测试台：

> ghdl -r foo_tb --wave=foo_tb.ghw
> ./foo_tb:error: foo_tb.vhdl:15 的边界检查失败
> ./foo_tb:error: 模拟失败

我在 Bill 的 foo 实体和架构中添加了一个上下文子句：

```
library ieee;
use ieee.std_logic_1164.all;

entity foo is port ( 
```

第 15 行是对 x 的信号分配：

```
 x <= x + 1; 
```

这是一个模拟错误（发生在运行时）。

来自 IEEE 1076-1993：

7.2.4 添加运算符

> 加法运算符 + 和 - 是为任何数字类型预定义的，并具有其传统的数学含义。

这意味着“+”运算符的结果可以在 x 的子类型约束之外。请注意，声明为“+”提供重载的函数不允许指定结果子类型。（返回值可以是声明了子类型指示的对象，可以定义取值范围或数组长度）。

和 12.6.2 信号值的传播

> 为了在给定的仿真周期内更新信号，内核进程首先确定该信号的驱动值和有效值。然后内核进程用新确定的有效值更新包含信号当前值的变量，如下所示：
> 
> > a) 如果 S 是某种非数组类型的信号，则 S 的有效值用于更新 S 的当前值。检查 S 的有效值是否属于 S 的子类型。如果此子类型检查失败，则会发生错误。最后，将 S 的有效值赋给代表信号当前值的变量。

如果添加的结果与目标 x 的子类型约束不匹配，则会产生错误。该子类型约束由 object x 声明提供，该声明为整数（范围）提供子类型指示。

对于符合 LRM 的实现，运行时错误会导致仿真终止。

如果没有用于错误报告的标准化格式，ghdl 不提供当前模拟时间。可以通过检查生成的波形找到：

[![foo_tb.png](../Images/095b3bbd32e3fd272bfe6cf367b958de.png)](https://i.stack.imgur.com/DxeRX.png)

波形在 20 ns 后完全更新。下一个预定活动：

```
library ieee;
use ieee.std_logic_1164.all;

entity foo_tb is
end entity;

architecture foo of foo_tb is
    signal clk: std_logic := '0';
begin
DUT:
    entity work.foo
        port map (
            clk => clk
        );

CLOCK:
    process
    begin
        wait for 5 ns;
        clk <= not clk;
        if now > 30 ns then
            wait;
        end if;
    end process;

end architecture; 
```

将是 25 ns 处 clk 的上升沿。

所以这告诉我们一个受约束的整数是如何产生溢出错误的。

没有子类型约束的整数怎么样：

```
architecture fum of foo is
    signal x : integer := INTEGER'HIGH - 2;
begin
    process (clk)
    begin
        if rising_edge(clk) then
            x <= x + 1;
        end if;
    end process;
end architecture; 
```

我们将 x 定义为一个不受约束的整数集，它是我们期望 x 溢出的默认值。

包标准明确声明 INTEGER "+"：

```
--  function "+"      (anonymous, anonymous: INTEGER) return INTEGER; 
```

如果我们看到“+”具有普通的数学含义，则预期结果超出 INTEGER 的范围。

但是，从包标准中的实现依赖声明：

```
type integer is range -2147483648 to 2147483647; 
```

和模拟：

[![foo_tb_wrap_around.png](../Images/89745e608219e024195b126f25990397.png)](https://i.stack.imgur.com/xJ3V2.png)

我们看到 x 的值环绕。

“+”运算符结果的赋值没有违反约束：

3 种类型：

> 给定类型的对象的可能值集合可以受到称为约束的条件（也包括约束不施加限制的情况）；如果一个值满足相应的条件，则称该值满足约束。子类型是带有约束的类型。如果一个值属于该类型并满足约束，则称该值属于给定类型的子类型；给定类型称为子类型的基本类型。类型是其自身的子类型；这样的子类型被称为不受约束的（它对应于不施加限制的条件）。类型的基类型是类型本身。

在我们的第二个架构中，没有任何约束，但在声明的 INTEGER 类型范围之外没有可能的值。相反，该值会翻转。

VHDL 的语义已构建为不需要在此处检测，这与表示二进制位（硬件）的元素的一维数组上的数学运算相匹配。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-19T08:53:33.910

任何体面的模拟器都会停在那里，并显示一条错误消息，该错误消息正好指向溢出的加法。（如果您记得打开检查，Xilinx Isim 只是一个不错的模拟器，我上次查看时）

如果这些年来你做了太多的 C 编程，那就太可怕了！

合成将做任何节省硬件的事情，（在这种情况下，没有输出，优化 X 和过程完全消失！）所以最好在模拟中捕获这种错误。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-19T04:51:29.100

整数上溢（和下溢）是 VHDL 中实现定义的行为。我目前无法引用规范，但如果您仔细阅读，您会发现几乎所有关于整数范围的内容都是实现定义的，超出了最小支持范围（`-2**31`to `2**31`）。

32 位机器上的大多数 VHDL 实现*实际上*表现得好像它们是 32 位 2 的补全整数（例如机器整数在这些平台上的行为），而 64 位实现通常具有 64 位整数，但你不能指望这个.

对于您的具体示例，如果您使用具有范围的整数子类型，如果您尝试分配该范围之外的值，则会出现错误，并将在运行时生成断言。（另一方面，合成器会做他们想做的任何奇怪的事情——通常它们会溢出，就好像它是一个 2 的补码整数一样）。

# javascript - 每行显示的字符数

> ID：13446585
> 
> 赞同：0
> 
> 时间：2012-11-19T01:35:00.507
> 
> 标签：javascript, jquery, google-closure-library

有没有办法计算出浏览器在已知大小的容器内每行显示的字符数？所以我有一个已知尺寸的矩形，`recX`以及`recY`一个预定义`FONT_SIZE`的`13`.

我正在尝试计算这样的段落的高度：

1.  除以`rectX`获取`FONT_SIZE`每行显示的字符数。
2.  将段落的长度（字符数）除以宽度得到它的行数，然后将它乘以`FONT_SIZE`得到它的显示高度。

问题是对于我的 650px in width 容器（测试用例），650 / 13 的结果是 50，但是浏览器每行显示大约 100 个字符，它不坚持任何默认值。我正在使用`font-family:Lucida Console Monospace 13px, line-height:1em`.

**编码**

```
var width = Math.floor(this.articleSize.width / this.FONT_SIZE);
    // this.article.paragraphs is an array of paragraphs without <p> or </p>.
    for (var i = 0, ii = this.article.paragraphs.length; i < ii; i++) {

    // based on the above compute the height/number of rows for each paragraph.
    // This is a basic matrix approach.
    // For those of you not familiar with the Closure Library, the goog.math.Size obj
    // is a (width, height) object.
    this.article.sizes[i] = new goog.math.Size(width, Math.ceil(this.article.paragraphs[i].length / width * this.FONT_SIZE));
};

var i = 0, currentPage = 0, pg = [], height = this.articleSize.height - 20, ii = this.article.paragraphs.length;

while (i < ii) {
    // So here based on the height I am trying to see how many paragraphs
    // Can fit into one 'page'. The navigation is horizontal, with a book like
    // animation.
    if((height - this.article.sizes[i].height) > 0) {    
        pg.push('<p>' + this.article.paragraphs[i] + '</p>');
        height -= this.article.sizes[i].height;
        i++;

    } else {

        this.article.pages[currentPage] = pg;
        currentPage++;
        pg = [];
        height = this.articleSize.height - 20;

    };

}; 
```

这必须适用于任何分辨率/视口大小，这意味着页面是在运行时计算的，并且在每次调整大小时都会再次完成整个过程，这与当前大小不同且以任何方式超过 50 个像素。

**这是解决方法**

```
project.MainArticle.loader.prototype.divideText = function(articleText) {
    articleText = goog.string.collapseWhitespace(articleText);
    articleText = articleText.replace(/<p><\/p>|• Comments will be turned on later/g, '').replace(/<p>\.<\/p>/g, '');
    var trick = articleText.replace(/<p>/g, '<p class = \'trick-p\'>');
    this.articleTextContainer.innerHTML = trick;
    this.preAppendedParagraphs = goog.dom.getElementsByClass('trick-p');
    for(var i = 0, ii = this.preAppendedParagraphs.length; i < ii; i++) {
        this.article.sizes.push(+(this.preAppendedParagraphs[i]['offsetHeight'] + 10));  
    };
    this.articleTextContainer.innerHTML = '';
    this.article.paragraphs = articleText.replace(/<p>/g, '').split('</p>');
};

/**
 * Divide the text into pages
 * @private
 */
project.loader.prototype.createPages_ = function() {

    var i = 0, currentPage = 0, pg = [], height = this.articleSize.height, ii = this.article.paragraphs.length - 1;

    while(i < ii) {

        if((height - this.article.sizes[i]) >= 0) {    
            pg.push('<p class=\'nz-ma-txt-p\'>' + this.article.paragraphs[i] + '</p>');
            height -= this.article.sizes[i];
            i++;

        } else {
            this.article.pages[currentPage] = pg;
            currentPage++;
            pg = [];
            height = this.articleSize.height;
        };

    };
    console.log(this.article);

}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T02:48:21.560

我认为您的问题可能`font-size=13px`并不意味着它使用 13px 来显示。它在我的浏览器中使用大约 8px（win7 上的最新 chrome）。因此，我创建了一个脚本来检测跨度的实际字体大小，然后计算它以适应段落。

请参阅此处的示例：http: [//jsfiddle.net/LNrgc/3/](http://jsfiddle.net/LNrgc/3/) ![在此处输入图像描述](../Images/cbd27fee1c8194f1747f56c8ee03ec02.png)

# java - 它是覆盖还是子类

> ID：13446586
> 
> 赞同：-3
> 
> 时间：2012-11-19T01:35:07.800
> 
> 标签：java, overriding, subclass

我在 Xxx 类中有这个方法，method1

在这个类 Yyy 中存在相同的方法，它扩展了 Xxx 但唯一的区别是方法内部发生的事情不一样，除了一切都很好。

那么这是否称为覆盖？还是子类？

tks。ps如果需要我有但不想让事情复杂的代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T01:37:14.803

`Yyy`是 的子类`Xxx`。“子类”基本上与“扩展”的含义相同。通过定义`method1`on `Yyy`，您将覆盖由 提供的定义`Xxx`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T01:37:40.223

这称为方法的覆盖。Yyy 类是 Xxx 的子类，并且在子类中重新定义的方法将覆盖超类中的方法。要验证这是真的，请使用 注释子类中的方法`@Override`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-19T01:39:06.720

您正在覆盖子类中的方法。子类是使用**extends**关键字从超类扩展而来的类。并且仅当您存在继承关系时才会出现覆盖，即一个类扩展另一个类。

但是，覆盖方法必须满足以下规则：

1.  方法名称应该相同
2.  返回类型应该相同/子类型（在协变返回的情况下）
3.  方法签名应该相同（即参数的数量和类型必须匹配）
4.  不能有最严格的访问修饰符
5.  可能有最少限制的访问修饰符
6.  不得抛出新的或更广泛的异常

# android - 以编程方式应用的九个补丁挂起应用程序

> ID：13446589
> 
> 赞同：1
> 
> 时间：2012-11-19T01:35:52.030
> 
> 标签：android, android-layout

我以前问过这个问题，但没有任何痕迹或答案。对不起，如果我错过了什么。

我以编程方式对 EditText 的二维数组进行表格布局。如果我设置背景颜色，订单就会消失。我知道解决方案是九个补丁。我已经制作了几个在 XML 布局中运行良好但在以编程方式应用时挂起应用程序的方法，如下所示：

```
TableLayout tl = new TableLayout(this);
//  tl.setBackgroundColor(0xff498263);
  TableRow tr[] = new TableRow[9];

NinePatchDrawable ninenine = (NinePatchDrawable) 
             getResources().getDrawable(R.drawable.ninenine) ;
//      Toast.makeText(this, "getResources is not null",
//              Toast.LENGTH_LONG).show();  

  int x, y; 

  for (x = 0; x < 9; x++) {
    tr[x] = new TableRow(this); 
        for (y = 0; y < 9; y++) {
            entry[x][y] = new EditText(this);
            entry[x][y].setText("");
            entry[x][y].setWidth(52);
            entry[x][y].setEnabled(true);
            entry[x][y].setClickable(false);
            entry[x][y].setInputType(2);
        //  entry[x][y].setBackground(ninenine);
            entry[x][y].setBackgroundColor(0x880000ff); 
```

程序编译但挂起。注释掉ninenine 它可以工作，但没有边界。

我不明白的 log.txt：

```
11-13 10:33:29.730: I/dalvikvm(2155): Could not find method android.widget.EditText.setBackground, referenced from method com.example.test_layout.MainActivity.onCreate
11-13 10:33:29.730: W/dalvikvm(2155): VFY: unable to resolve virtual method 2897: Landroid/widget/EditText;.setBackground (Landroid/graphics/drawable/Drawable;)V
11-13 10:33:29.730: D/dalvikvm(2155): VFY: replacing opcode 0x6e at 0x00b4
11-13 10:33:29.730: D/dalvikvm(2155): VFY: dead code 0x00b7-0113 in Lcom/example/test_layout/MainActivity;.onCreate (Landroid/os/Bundle;)V
11-13 10:33:29.790: D/dalvikvm(2155): GC_EXTERNAL_ALLOC freed 42K, 45% free 2995K/5379K, external 0K/0K, paused 48ms
11-13 10:33:29.810: D/AndroidRuntime(2155): Shutting down VM
11-13 10:33:29.810: W/dalvikvm(2155): threadid=1: thread exiting with uncaught exception (group=0x40139578)
11-13 10:33:29.810: E/AndroidRuntime(2155): FATAL EXCEPTION: main
11-13 10:33:29.810: E/AndroidRuntime(2155): java.lang.NoSuchMethodError: android.widget.EditText.setBackground
11-13 10:33:29.810: E/AndroidRuntime(2155):     at com.example.test_layout.MainActivity.onCreate(MainActivity.java:73)
11-13 10:33:29.810: E/AndroidRuntime(2155):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
11-13 10:33:29.810: E/AndroidRuntime(2155):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1615)
11-13 10:33:29.810: E/AndroidRuntime(2155):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1667)
11-13 10:33:29.810: E/AndroidRuntime(2155):     at android.app.ActivityThread.access$1500(ActivityThread.java:117)
11-13 10:33:29.810: E/AndroidRuntime(2155):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:935)
11-13 10:33:29.810: E/AndroidRuntime(2155):     at android.os.Handler.dispatchMessage(Handler.java:99)
11-13 10:33:29.810: E/AndroidRuntime(2155):     at android.os.Looper.loop(Looper.java:130)
11-13 10:33:29.810: E/AndroidRuntime(2155):     at android.app.ActivityThread.main(ActivityThread.java:3691)
11-13 10:33:29.810: E/AndroidRuntime(2155):     at java.lang.reflect.Method.invokeNative(Native Method)
11-13 10:33:29.810: E/AndroidRuntime(2155):     at java.lang.reflect.Method.invoke(Method.java:507)
11-13 10:33:29.810: E/AndroidRuntime(2155):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:907)
11-13 10:33:29.810: E/AndroidRuntime(2155):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:665)
11-13 10:33:29.810: E/AndroidRuntime(2155):     at dalvik.system.NativeStart.main(Native Method)
11-13 10:33:31.810: I/dalvikvm(2155): threadid=4: reacting to signal 3
11-13 10:33:31.830: I/dalvikvm(2155): Wrote stack traces to '/data/anr/traces.txt' 
```

是源码和编译的九个补丁之间的问题吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-19T01:46:08.623

当您收到该错误时，您用于测试的 Android 版本是什么？

`setBackground(Drawable background)`仅从 API 16 开始可用。如果`minSdkVersion`低于该值但`targetSdkVersion`为 16，它将可以编译，但在运行时在较低的 Android 版本上会失败。

在这种情况下，请`setBackgroundDrawable(Drawable background)`改用。

# c++ - 如何判断工作站当前是否使用 C++ 连接到域控制器

> ID：13446590
> 
> 赞同：2
> 
> 时间：2012-11-19T01:35:55.953
> 
> 标签：c++, winapi, networking, active-directory, network-programming

我编写了一个 C++ 程序，该程序旨在在连接到 Active Directory 设置中的域控制器的工作站上运行。它工作得很好，除了以下情况。

例如，用户将其安装在连接到 DC 的笔记本电脑上，但随后将该笔记本电脑从 Active Directory 环境中移开（例如，带着它回家，在 DC 无法访问的地方。）

有没有办法从我的软件中检测到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T02:01:30.533

我会尝试绑定或搜索 AD 中的已知对象。如果绑定成功，我们应该在域中。假设用户使用离线 AD 配置文件登录，您可以尝试绑定到当前用户：

```
IADs *pObject;
HRESULT hr;

CoInitialize(NULL);
hr = ADsGetObject(L"LDAP://CN=user,DC=domain,DC=com", IID_IADs, (void**) &pObject);

if(SUCCEEDED(hr))
{
    // AD is available
    pObject->Release()
}
else
{
    // AD is NOT available
}
CoUninitialize(); 
```

查看 MSDN 中的[ADSI](http://msdn.microsoft.com/en-us/library/windows/desktop/aa772218%28v=vs.85%29.aspx)文档，其中大部分仅在您有权访问 AD 时才有效。

# c - 如何声明指向 unsigned char 数组的全局指针并修改值？

> ID：13446591
> 
> 赞同：1
> 
> 时间：2012-11-19T01:35:57.933
> 
> 标签：c, pointers

我的主要要求是声明一个数组和一个指向它的指针，可以在整个程序中从函数中读取和写入。到目前为止，我已经做了类似的事情，（注意，我什至尝试过使用指针到指针。

```
unsigned char *array_ptr;
unsigned char **array_ptr_ptr;
unsigned char array[20];

array_ptr = array;
array_ptr_ptr = &array_ptr;    

void main()
{
} 
```

然后在另一个源文件中，我有一个函数

```
function(unsigned char *array_ptr)
{
    *array_ptr = value;
    array_ptr++;
    *array_ptr = value2;
} 
```

我什至尝试使用指向指针的指针。

```
function(unsigned char **array_ptr_ptr)
{
    **array_ptr_ptr = value;
    array_ptr_ptr++;
    **array_ptr_ptr = value2;
} 
```

我似乎无法成功写入值，甚至打印值也会给我带来问题。我也遇到分段错误。

另外，在我的情况下，我是使用 malloc 将内存分配给数组还是指针？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T01:40:50.467

不需要使用双指针。这很可能不起作用，因为另一个源文件没有声明`include`文件的文件`array_ptr`。我认为最佳做法是创建一个 globals.h 文件并在整个程序中引用它。

# jquery - 使用 jQuery 从字符串中检索值

> ID：13446592
> 
> 赞同：0
> 
> 时间：2012-11-19T01:35:57.973
> 
> 标签：jquery

> **可能重复：**
> [从文本 JavaScript 中剥离 HTML](https://stackoverflow.com/questions/822452/strip-html-from-text-javascript)

我已将格式中的字符串存储`<td> value1 </td> <td> value2 </td> <td> value3 </td>`到 JavaScript 变量中。如何使用 jQuery 获取值`value1`、`value2`和 `value3`并将它们存储到数组中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T01:38:29.483

大致是这样的：

```
var values = [];
jQuery('<td>value1</td><td>value2</td><td>value3</td>').each(function(){
    values.push(jQuery(this).text());
}); 
```

详细信息：

*   通过`jQuery(some_html_string)`转换`some_html_string`为 DOM 元素（包含在`jQuery`对象中），然后可用于在 jQuery 中进行处理，
*   `some_elements.each(callback)``callback`对 的每个元素执行`some_elements`，
*   `some_element.text()`从元素 ( `some_element`) 中获取文本，
*   `some_array.push(some_value)`推`some_value`入`some_array`数组，
*   最后，`values`应包含字符串中包含的元素的文本值，

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T01:54:48.093

受 Tadeck 解决方案的启发，我决定采用更实用的风格：

```
var values = $('<td>value1</td><td>value2</td><td>value3</td>')
  .filter("td") // optional
  .map(function(){return $(this).text()}) 
```

# c++ - C++ ifstream 错误检查

> ID：13446593
> 
> 赞同：27
> 
> 时间：2012-11-19T01:36:12.010
> 
> 标签：c++, error-handling, ifstream

我是 C++ 新手，想在我的代码中添加错误检查，而且我想确保我使用了良好的编码实践。我使用以下命令将 ASCII 文件中的一行读入字符串：

```
ifstream paramFile;
string tmp;

//open input file

tmp.clear();

paramFile >> tmp;

//parse tmp 
```

1.  如何进行错误检查以确保输入文件读取成功？

2.  我看到了从那里读取 ASCII 文件的更复杂的方法。我这样做的方式是“安全/稳健”吗？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-11-19T01:58:04.970

`paramFile >> tmp;`如果该行包含空格，则不会读取整行。如果您想要`std::getline(paramFile, tmp);`读取到换行符的使用。基本错误检查是通过检查返回值来完成的。例如：

```
if(paramFile>>tmp) // or if(std::getline(paramFile, tmp))
{
    std::cout << "Successful!";
}
else
{
    std::cout << "fail";
} 
```

`operator>>`并且`std::getline`都返回对流的引用。流计算为一个布尔值，您可以在读取操作后检查该值。如果读取成功，上面的示例只会评估为 true。

这是我如何制作代码的示例：

```
ifstream paramFile("somefile.txt"); // Use the constructor rather than `open`
if (paramFile) // Verify that the file was open successfully
{
    string tmp; // Construct a string to hold the line
    while(std::getline(paramFile, tmp)) // Read file line by line
    {
         // Read was successful so do something with the line
    }
}
else
{
     cerr << "File could not be opened!\n"; // Report error
     cerr << "Error code: " << strerror(errno); // Get some info as to why
} 
```

# java - play框架中的通用缓冲区

> ID：13446594
> 
> 赞同：0
> 
> 时间：2012-11-19T01:37:01.630
> 
> 标签：java, synchronization, playframework-2.0, classloader

我需要创建一个在 Controller 和 Model 类之间共享的缓冲区（LinkedList）。我在模型类中创建了这个缓冲区

```
public class ServerController {

    private LinkedList<JsonNode> data; /* buffer */
    private static ServerController controller;

    public static ServerController getServerController(){
        return controller;
    }

    private ServerController() {
    } 
```

我使用另一个模型类中的方法写入此缓冲区，并尝试从为 GET 请求提供服务的控制器方法中读取值，以便将数据返回给请求它的客户端。

```
 @BodyParser.Of(Json.class)
    public static Result getData() {
        ObjectNode result = play.libs.Json.newObject();
        LinkedList<JsonNode> data = ServerController.getController().getData();
        result.put("value", data.toString());
        return ok(result);
    } 
```

问题是正在写入的缓冲区不是控制器正在读取的缓冲区。似乎 Play 正在实例化该类的另一个实例`ServletController`（即使我已将其设为单例）。如何使两个进程之间共享缓冲区？

在这种情况下，类加载器是否加载了 2 个不同的实例？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T06:03:44.527

The play framework is a stateless framework, you should not have a memory between requests in the controller layer.

But a common approach is to use the cache API:

[http://www.playframework.org/documentation/2.0.4/JavaCache](http://www.playframework.org/documentation/2.0.4/JavaCache)

```
Using this simple API you can store data in the cache:

Cache.set("item.key", frontPageNews);
You can retrieve the data later:

News news = Cache.get("item.key"); 
```

# backbone.js - 使用 Backbone.ModelBinder 将类添加到元素的属性值

> ID：13446596
> 
> 赞同：1
> 
> 时间：2012-11-19T01:37:08.643
> 
> 标签：backbone.js, model-binding, marionette, model-binders

我在 Backbone.js Marionette 项目中使用 Backbone.ModelBinder。我有一个场景，我无法弄清楚如何使用 ModelBinder 自动更新我的模型/UI。

我的模型有一个“状态”字符串属性，有多个状态。在这个例子中，我将展示两个的代码：'soon'，'someday'

在我的 UI 中，我有一个列表，我使用点击事件来设置模型状态，并更新类以突出显示 UI 中的相关链接。

```
<dd id="status-soon"><a>Soon</a></dd>
<dd id="status-someday" class="active"><a>Someday</a></dd>

events: {
    'click #status-soon': 'setStatusSoon',
    'click #status-someday': 'setStatusSomeday'
},
setStatusSoon: function () {
    this.model.set('status', 'soon');
    this.$el.find('.status dd').removeClass('active');
    this.$el.find('#status-soon').addClass('active');
},
... etc 
```

感觉就像我这样做是一种冗长而笨拙的方式！代码膨胀会随着我需要支持的状态数量的增加而增加。使用 ModelBinder 实现相同结果的最佳方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-19T02:46:14.000

您可能可以使用数据属性简化事情，如下所示：

```
<dd data-status="soon" class="set-status"><a>Soon</a></dd>
<dd data-status="someday" class="set-status active"><a>Someday</a></dd> 
```

进而：

```
events: {
    'click .set-status': 'setStatus'
},
setStatus: function(ev) {
    var $target = $(ev.target);
    var status  = $target.data('status');
    this.model.set('status', status);
    this.$el.find('.status dd.set-status').removeClass('active');
    $target.addClass('active');
} 
```

您可能不需要该`set-status`课程，只需在 s 上键入内容就`<dd>`足够了；不过，我更喜欢将我的事件处理与细节的元素细节分开。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T03:51:36.183

不幸的是，要完全按照您的意愿使用`ModelBinder`. 主要原因是`ModelBinder`希望为属于单个选择器的所有元素提供相同的值。因此`ModelBinder`，尽管有可能，但这样做也将非常冗长。

mu 提供的清理可能比尝试使用更好`ModelBinder`。1）因为你需要一个点击处理程序来做`this.model.set`任何事情和 2）你需要单独`ModelBinder`的绑定，因为转换器函数为单个选择器调用一次，然后在所有匹配的元素上设置值（而不是循环遍历每个一）。

但是，如果您确实想尝试用它做点什么，`ModelBinder`它看起来像这样：

```
 onRender : function () {
    var converter = function (direction, value) { 
      return (value == "soon" ? "active" : "");
    };
    var bindings = {
      status : {selector : "#status-soon", elAttribute : "class", converter : converter}
    };
    this.modelBinder.bind(this.model, this.el, bindings);
  } 
```

这会做你想要的。当然，正如我上面所说的那样，你需要多个选择器绑定。您可以使用转换器来概括转换器，`this.boundEls[0]`但您仍然需要单独的绑定才能使其工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-08T09:52:45.607

如果您想访问绑定的元素，可以将 'html' 声明为 elAttrbute，修改元素并使用转换器函数返回其 html：

```
onRender : function () {
  var converter = function (direction, value, attribute, model, els) {
    return $(els[0]).toggleClass('active', value === 'soon').html();
  };
  var bindings = {
    status : {
      selector : "#status-soon", 
      elAttribute : "html", 
      converter : converter
    }
  };
  this.modelBinder.bind(this.model, this.el, bindings);
} 
```

# c# - 在映射时向 Automapper 提供构造函数参数

> ID：13446599
> 
> 赞同：3
> 
> 时间：2012-11-19T01:37:28.597
> 
> 标签：c#, dependency-injection, automapper

我有一组我想用 Automapper 映射到的类。但是，每个类都有一个构造函数参数。此参数对于所有成员都是相同的类型，但在我想要进行映射之前我不知道要提供的值。

我找到了`ConstructUsing`方法，但这需要我在配置时指定参数值。我宁愿在映射时这样做，以避免需要为`MappingEngine`参数的每个实例创建一个单独的实例。我发现`Map`映射到已经创建的目标对象的重载。这很有帮助，但不适用于列表或对象图。

本质上，我正在从 Autofac 中寻找类似这种解决方法的东西，仅适用于 Automapper 的`Map`方法。

```
Resolve<IFoo>( new TypedParameter( typeof( IService ), m_service) ); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-19T15:32:19.610

通过阅读 Automapper 源代码，我找到了一个可行的解决方案，如下所述。

首先，您需要指定要使用服务定位器进行构建。

```
IConfiguration configuration = ...;
configuration.CreateMap<Data.Entity.Address, Address>().ConstructUsingServiceLocator(); 
```

然后在调用 map 时，使用`opts`参数指定特定的服务定位器

```
// Use DI container or manually construct function
// that provides construction using the parameter value specified in question.
// 
// This implementation is somewhat Primitive, 
// but will work if parameter specified is always the only parameter
Func<Type, object> constructingFunction =
    type => return Activator.CreateInstance( type, new object[] { s_service } );

mappingEngine.Map<Data.Entity.Address, Address>(
    source, opts: options => options.ConstructServicesUsing( constructingFunction ); 
```

上面指示的“ServiceLocator”`constructingFunction`优先于提供给`IConfiguration.ConstructServicesUsing(...)`

# matlab - MATLAB：在时间序列中对 NaN 进行插值

> ID：13446606
> 
> 赞同：7
> 
> 时间：2012-11-19T01:38:37.033
> 
> 标签：matlab, time-series, interpolation, nan

问题：如何在小长度的 NaN 上进行局部插值？

我有一个包含 NaN 块的时间序列（“x”数据在“t”时间均匀采样）。例如：

```
x = [ 1   2   4    2 3 15 10 NaN NaN NaN NaN 2 4 NaN 19 25]
t = [0.1 0.2 0.3 ...etc..] 
```

我想对 NaN 执行插值。

最基本的方法是从最左边的数据点线性插值到最右边的数据点。例如。从 x = 10 到 x = 2 的线和 4 NaN 值将从该线分配值。

时间序列的长度约为 150 万和 10000 NaN，因此我不想合并远离 NaN 位置的数据（在插值中）。一些 NaN 的长度为 1000-2000。

```
X(isnan(X)) = interp1(find(~isnan(X)), X(~isnan(X)), find(isnan(X)), 'linear'); 
```

将使用整个时间序列对 NaN 进行线性插值。

我将如何在本地进行插值？线性应该足够了。也许线性插值在 NaN 块的左侧和右侧合并了几个点（可能是 100-200 点）。自然邻居或样条（？）算法可能更合适；我必须小心不要向时间序列添加异常行为（例如，将虚构的“功率”添加到频率的插值）。

更新：时间序列是在一年内的分钟采样温度记录。线性插值就足够了；我只需要填写大约 6-7 小时的 NaN 间隔（在 NaN 间隔之前和 NaN 间隔之后向我提供了数据）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-19T06:56:33.553

我认为这是（至少部分）你所寻求的：

```
% example data
x = [ 1   2   4    2 3 15 10 NaN NaN NaN NaN 2 4 NaN 19 25];
t = linspace(0.1, 10, numel(x));

% indices to NaN values in x 
% (assumes there are no NaNs in t)
nans = isnan(x);

% replace all NaNs in x with linearly interpolated values
x(nans) = interp1(t(~nans), x(~nans), t(nans)); 
```

请注意，您可以在此处轻松切换插值方法：

```
% cubic splines
x(nans) = interp1(t(~nans), x(~nans), t(nans), 'spline');

% nearest neighbor
x(nans) = interp1(t(~nans), x(~nans), t(nans), 'nearest'); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-19T03:45:15.187

考虑使用[inpaint_nans](http://www.mathworks.com/matlabcentral/fileexchange/4551)，这是一个非常好的工具，旨在使用非 NaN 元素在 1-d 或 2-d 数组中插入 NaN 元素。它也可以推断，因为它不使用数据的三角剖分。它还允许不同的插值方法。

# c# - 使用 Directory 类，检查某些文件类型的目录

> ID：13446615
> 
> 赞同：4
> 
> 时间：2012-11-19T01:40:03.193
> 
> 标签：c#, directory

我一直在使用以下几行来搜索特定文件类型的文件夹结构，然后复制这些文件类型并保持其原始文件夹结构。它工作得很好。我可以对我的方法进行任何修改以仅复制包含过滤文件类型的目录吗？

*edit：我可以让用户使用名为 txtFilter 的文本框，只选择一组文件（例如 *.dwg 或 *.pdf）。

```
private void button1_Click(object sender, EventArgs e)
{
    string sourceFolder = txtSource.Text;
    string destinationFolder = txtDestination.Text;
    CopyFolderContents(sourceFolder, destinationFolder);
}

// Copies the contents of a folder, including subfolders to an other folder, overwriting existing files
public void CopyFolderContents(string sourceFolder, string destinationFolder)
        {
            string filter = txtFilter.Text;

            if (Directory.Exists(sourceFolder))
            {
                // Copy folder structure
                foreach (string sourceSubFolder in Directory.GetDirectories(sourceFolder, "*", SearchOption.AllDirectories))
                {
                    Directory.CreateDirectory(sourceSubFolder.Replace(sourceFolder, destinationFolder));
                }

                // Copy files
                foreach (string sourceFile in Directory.GetFiles(sourceFolder, filter, SearchOption.AllDirectories))
                {
                    string destinationFile = sourceFile.Replace(sourceFolder, destinationFolder);
                    File.Copy(sourceFile, destinationFile, true);
                }
            }
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T01:53:02.210

在你的主循环中有这样的东西吗？

```
if (Directory.EnumerateFiles(sourceSubFolder, "*.pdf").Any())
       Directory.CreateDirectory(sourceSubFolder.Replace(sourceFolder, destinationFolder)); 
```

或对于多种文件类型：

```
if (Directory.EnumerateFiles(sourceSubFolder).Where(x => x.ToLower.EndsWith(".pdf") || x.ToLower.EndsWith(".dwg")).Any())
       Directory.CreateDirectory(sourceSubFolder.Replace(sourceFolder, destinationFolder)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T02:33:00.583

您可以简单地将两个操作连接到一个循环中并在 O(n) 中完成算法。

```
foreach(string sourceFile in Directory.GetFiles(sourceFolder, filter, SearchOption.AllDirectories))
{
    Directory.CreateDirectory(Path.GetDirectoryName(sourceFile.Replace(sourceFolder,destinationFolder)));
    File.Copy(sourceFile,sourceFile.Replace(sourceFolder,destinationFolder),true);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T02:50:47.170

您可以从找到的文件中获取不同的目录，然后遍历它们并在复制文件之前创建目录。

```
 if (Directory.Exists(sourceFolder))
        {
            var files = Directory.GetFiles(sourceFolder, filter, SearchOption.AllDirectories);

            foreach(string directory in files.Select(f => Path.GetDirectoryName(f)).Distinct())
            {
                string destinationDirectory = directory.Replace(sourceFolder, destinationFolder);

                if (!Directory.Exists(destinationDirectory))
                {
                    Directory.CreateDirectory(destinationDirectory);                        
                }
            }

            foreach (string sourceFile in files)
            {
                string destinationFile = sourceFile.Replace(sourceFolder, destinationFolder);
                File.Copy(sourceFile, destinationFile, true);
            }
        } 
```

# .htaccess - 将所有子域重定向到一页

> ID：13446618
> 
> 赞同：4
> 
> 时间：2012-11-19T01:40:30.213
> 
> 标签：.htaccess, redirect, subdomain

我正在尝试将所有子域重定向`(http://*.domain.com)`到特定的 html 文件`(http://domain.com/index.html)`。但我也希望可见的子域名不会改变。

我用 .htaccess 试过这个：

```
Options -MultiViews
Options +FollowSymLinks
RewriteEngine On
RewriteBase /

#RewriteCond %{REQUEST_URI} !^/parent/ 
RewriteCond %{HTTP_HOST} ^([^\.]+)\.domain\.com$
RewriteRule (.*) /index.html [L] 
```

但它根本不起作用。

谁能帮我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T01:43:05.447

子域与目录有点不同。您需要有一个[通配符 DNS 记录](http://en.wikipedia.org/wiki/Wildcard_DNS_record)才能捕获所有子域：

```
*.example.com. 3600 IN  A host1.example.com. 
```

最好的办法是联系您的托管服务提供商。其中一些具有实现这一目标的设置。

# android - Wi-Fi 直连失败 - Nexus 7

> ID：13446629
> 
> 赞同：1
> 
> 时间：2012-11-19T01:42:10.913
> 
> 标签：android, wifi-direct, nexus-7

在我的 Nexus 7 上，每当我尝试连接到我的 Galaxy Nexus 时，它会立即失败并返回原因为 0（这是非常无信息的，因为 0 是错误）。但是，尝试在我的 Galaxy Nexus 上连接没有这样的问题。有任何想法吗？简单地使用 manager.connect 方法，没有什么特别的事情发生。find peers 方法似乎也没有任何问题。非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T02:41:52.480

Nexus 7 是 Android 4.1 还是 4.2？4.2 有这样的问题。

# iphone - 如果多个单元格，UITableView 不会动画删除

> ID：13446630
> 
> 赞同：1
> 
> 时间：2012-11-19T01:42:15.970
> 
> 标签：iphone, objective-c, ios, cocoa-touch, uitableview

我`UITableView`以标准方式设置了我的（滑动）删除方法。

```
- (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath
{
    if (editingStyle == UITableViewCellEditingStyleDelete) {

        [self.tableView beginUpdates];

        /*
        code…
        */

        [self.tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationFade];
        [self.tableView endUpdates];
        }   
} 
```

如果表格视图中只有一个单元格或者我正在删除最后一个单元格`UITableViewRowAnimationFade`，则动画效果很好，但是如果我尝试删除最后一个单元格上方的一行，当我点击删除时它将不再使用动画。我怎样才能解决这个问题？

另外，如果有任何区别，我正在使用自定义单元格（只是一个标签和一个图像视图）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-30T09:20:29.780

这有点晚了，但对于任何有这个问题的人，我已经创建了一个测试项目，它复制了所需的功能，动画对所有单元格都完美地工作。

它在这里可用：[https ://github.com/sdods3782/TVTTableViewTest](https://github.com/sdods3782/TVTTableViewTest)

但是，我无法重现该问题。我不知道是什么导致了原始海报的问题，但以 TVTTableViewTest 为例，它应该有望防止其他人遇到同样的问题。

# asp.net - 用户发帖时隐藏表单中的某些字段

> ID：13446631
> 
> 赞同：0
> 
> 时间：2012-11-19T01:42:28.957
> 
> 标签：asp.net, razor, webmatrix

我的应用程序中有一个表单，在某些类别中包含“价格”字段，我不希望该字段出现在用户表单中。怎么可能呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T09:09:42.923

您可以使用隐藏的输入字段来执行此操作。

```
<input type="hidden" name="price" value="The value you want"> 
```

这仍然会在提交时将其值发送到数据库，但用户看不到它。

# iphone - 某些视图的 Xcode iphone 方向支持

> ID：13446633
> 
> 赞同：0
> 
> 时间：2012-11-19T01:42:39.480
> 
> 标签：iphone, ios, xcode, ipad

我想支持除主视图控制器之外的所有视图的所有方向。我似乎找不到办法做到这一点。

我可以支持所有视图的方向，也可以在整个应用程序中不支持视图。您如何支持整个应用程序中某些视图的方向？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T10:21:53.093

子类化最顶层的控制器。例如，您有一个导航控制器作为最顶层的控制器，那么您只需要子类`UINavigationController`化并在子类的 .m 文件中编写以下代码行

```
- (BOOL)shouldAutorotate
{
    return [[self.viewControllers lastObject] shouldAutorotate];
}

- (NSUInteger)supportedInterfaceOrientations
{
    return [[self.viewControllers lastObject] supportedInterfaceOrientations];
}

- (UIInterfaceOrientation)preferredInterfaceOrientationForPresentation
{
    return [[self.viewControllers lastObject] preferredInterfaceOrientationForPresentation];
} 
```

现在覆盖`- (BOOL)shouldAutorotate`项目中每个控制器的方法。Return`TRUE`为您需要进行旋转`FALSE`的那些控制器和 Return 为您不需要进行旋转的那些控制器。

干杯！！！！！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T02:14:23.343

我还没有使用需要按照您描述的方式操作的应用程序，但是当您需要控制方向支持时，Apple 文档建议您这样做：

> 动态控制是否发生旋转
> 
> 有时您可能希望动态禁用自动旋转。例如，当您想在短时间内完全抑制旋转时，您可能会这样做。您必须暂时禁用想要手动控制状态栏位置的方向更改（例如当您调用 setStatusBarOrientation:animated: 方法时）。
> 
> **> 如果您想暂时禁用自动旋转，请避免操作方向蒙版来执行此操作。相反，覆盖最顶层视图控制器上的 shouldAutorotate 方法。在执行任何自转之前调用此方法。如果它返回 NO，则旋转被抑制。**

来源：http: [//developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/RespondingtoDeviceOrientationChanges/RespondingtoDeviceOrientationChanges.html#//apple_ref/doc/uid/TP40007457-CH7-SW1](http://developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/RespondingtoDeviceOrientationChanges/RespondingtoDeviceOrientationChanges.html#//apple_ref/doc/uid/TP40007457-CH7-SW1)

# sql - 创建新数据库后“数据库中已经有一个名为 XXXX 的对象”

> ID：13446638
> 
> 赞同：3
> 
> 时间：2012-11-19T01:43:20.297
> 
> 标签：sql, sql-server

我有一个在 SQL Server 实例上执行的 SQL 文件，其中包含数据库的架构。该文件创建一个全新的数据库（例如，此服务器上不存在具有此名称的数据库）：

```
CREATE DATABASE PROJECT; 
```

并开始创建关系：

```
CREATE TABLE Courses (
  CourseID INT NOT NULL PRIMARY KEY,
  Name VARCHAR(64) NOT NULL UNIQUE,
  Code CHAR(4) NOT NULL UNIQUE
);

... 
```

这是 SQL Server 立即告诉我的：

```
Msg 2714, Level 16, State 6, Line 3
There is already an object named 'Courses' in the database. 
```

知道为什么 SQL Server 会告诉我已经存在一个名为`Courses`何时显然不存在的关系吗？

感谢您的时间。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-19T01:47:19.917

如果您正在使用，请检查数据库`PROJECT`

```
CREATE DATABASE PROJECT
GO

USE PROJECT
GO

CREATE TABLE Courses 
(
  CourseID INT NOT NULL PRIMARY KEY,
  Name VARCHAR(64) NOT NULL UNIQUE,
  Code CHAR(4) NOT NULL UNIQUE
)
GO 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-19T01:46:26.653

您可能缺少`USE PROJECT`语句，因此尝试在**master**数据库中创建 Courses 表，而不是在 PROJECT 数据库中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T01:49:31.257

远射，但尝试使用：

```
Use project;
CREATE TABLE Courses.... 
```

# actionscript-3 - 如何定义类变量不使用它导入包？

> ID：13446639
> 
> 赞同：0
> 
> 时间：2012-11-19T01:43:38.987
> 
> 标签：actionscript-3

例如有可能做类似的事情`public var socket:flash.net.Socket = new flash.net.Socket();`吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T03:04:59.227

不，如果你不导入，你仍然会得到一个类未定义的编译器错误`flash.net.Socket`

# android - Android SQlite，如何检查数据库中的值是否已经存在？

> ID：13446641
> 
> 赞同：3
> 
> 时间：2012-11-19T01:44:24.557
> 
> 标签：android, sqlite, unique

```
public void onCreate(SQLiteDatabase db) {
        // TODO Auto-generated method stub
        db.execSQL("CREATE TABLE " + DATABASE_TABLE_COURSES + " ("
                + KEY_ROWID + " INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "
                + KEY_COURSE_ID + " TEXT NOT NULL, "
                + KEY_COURSE_TITLE + " TEXT NOT NULL, "
                + KEY_COURSE_CNUMBER + " TEXT NOT NULL, "
                + KEY_COURSE_SUBJECT + " TEXT NOT NULL, " 
                + KEY_COURSE_DAYS + " TEXT NOT NULL, "
                + KEY_COURSE_START_TIME + " TEXT NOT NULL, "
                + KEY_COURSE_END_TIME + " TEXT NOT NULL, "
                + KEY_COURSE_PROFESSOR + " TEXT NOT NULL, "
                + KEY_COURSE_BUILDING + " TEXT NOT NULL, " 
                + KEY_COURSE_ROOM_NUMBER + " TEXT NOT NULL);"); 
```

我想检查 course_id 是否已经存在于表中，然后不要再输入。谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T01:54:42.150

要检查一个字段是否存在一般：

```
 Cursor cur1=db.query("database_table_courses", "course_id=id_u_wanttocheck", null, null, null, null, null);
      cur1.moveToLast();
      int count1=cur1.getCount();
      if(count1==0)
      {
          //course id not present

      }
      else
      {
        //course id present
      } 
```

或者，如果您希望**course_id**在表中不再重复，您可以将其设置为主键并从`row_no`. 这样您就可以简单地插入一个新行。如果 course_id 已经存在，它不会插入并抛出异常 - `SQLException`，您可以捕获它并做任何您想做的事情。

# directx - 使用 DirectX (Direct3D11) 播放视频

> ID：13446644
> 
> 赞同：3
> 
> 时间：2012-11-19T01:45:16.957
> 
> 标签：directx, direct3d, direct3d11

我一直在互联网上查看如何在我的 Direct3D11 游戏中显示视频。在 Direct3D9 中我们可以使用 DirectShow，但在新版本的 Direct3D11 中我找不到任何可比的东西。

我们如何在 Direct3D11 的应用程序中有效地显示视频？

我的目标是Windows 7。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T01:59:13.863

不确定您是否使用 Windows 8，有一个使用 Media Foundation API 和 DirectX 11 显示视频的示例，您可以看一下。

[http://code.msdn.microsoft.com/windowsdesktop/DirectX-11-Video-Renderer-0e749100](http://code.msdn.microsoft.com/windowsdesktop/DirectX-11-Video-Renderer-0e749100)

# c# - WCF服务启动时在内存中加载数据？

> ID：13446646
> 
> 赞同：0
> 
> 时间：2012-11-19T01:45:36.807
> 
> 标签：c#, wcf

服务启动时如何加载数据？到目前为止，我在控制台应用程序中托管我的服务，在我的服务启动之前，我首先将数据库中的所有信息加载到内存中（其他对象在我的服务之前保存所有信息）。我正在使用静态变量来访问我的服务中的数据。我知道这种方法是错误的，我怎样才能使它正确。我正在使用 nettcp 绑定，它是自托管的。先感谢您！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T01:55:11.150

为什么你认为这种方法是错误的？如果您的数据根本没有改变，静态变量就可以正常工作。如果您的数据更改但不是非常频繁，并且您的应用程序可以在有些“陈旧”的数据下生存，您可以使用[System.Web.Caching.Cache](http://msdn.microsoft.com/en-us/library/system.web.caching.cache.aspx)并根据时间或其他依赖关系自动使缓存中的数据过期。如果您不想让服务用户*在*应用程序从数据库中检索数据时等待，您要么必须有一个单独的线程来监视您的数据库并更新缓存的值，要么使用[SqlCacheDependency](http://msdn.microsoft.com/en-us/library/system.web.caching.sqlcachedependency.aspx)机制来使您的应用程序无效并刷新您的当数据库中的基础数据更改时缓存值。

# android - 在android opencv中显示Mat的奇怪情况

> ID：13446647
> 
> 赞同：0
> 
> 时间：2012-11-19T01:46:05.547
> 
> 标签：android, opencv

我正在做一个简单的测试来显示 opencv4android 中 Mat 对象的内容。我发现 dump() 方法有效，它为我提供了矩阵的所有条目，而 get() 方法失败了，我打算从矩阵中获取单个条目。这两种方式在mainactivity中的onTouchEvent中实现，一种执行良好，另一种使程序崩溃。我不知道为什么。任何想法 ？

```
public class puzzle15Activity extends Activity
{
      Mat showMat;
private static final String TAG = "Sample::Activity";
public double[] a;
      double b;
      private SampleCvViewBase mView=null;
      private BaseLoaderCallback  mOpenCVCallBack = new BaseLoaderCallback(this) 
{
    @Override
    public void onManagerConnected(int status) {
        switch (status) {
            case LoaderCallbackInterface.SUCCESS:
            {
                Log.i(TAG, "OpenCV loaded successfully");
                //mView = new puzzle15View(mAppContext);
                mView=new SampleCvViewBase(mAppContext);
                setContentView(mView);
                mView.openCamera();

            } break;
            default:
            {
                super.onManagerConnected(status);
            } break;
        }

    }
};

@Override
public void onCreate(Bundle savedInstanceState)
{
    Log.i(TAG, "onCreate");
    super.onCreate(savedInstanceState); 
OpenCVLoader.initAsync(OpenCVLoader.OPENCV_VERSION_2_4_2,this,mOpenCVCallBack);

}

@Override
public boolean onTouchEvent(MotionEvent m)
{
    Toast.makeText(this,mView.mrgba.dump(),Toast.LENGTH_SHORT).show();
    a= mView.mrgba.get(1,1);
              //b=a[1];//here b can't be assigned this way.......
    //Toast.makeText(this,Double.toString(b),Toast.LENGTH_SHORT).show();
    return false;
}
}

class SampleCvViewBase extends SurfaceView implements SurfaceHolder.Callback, Runnable {
private static final String TAG = "Sample::SurfaceView";

private SurfaceHolder       mHolder;
private VideoCapture        mCamera;
Mat mrgba;
public int[] list={1,2,3};

public SampleCvViewBase(Context context) {
    super(context);
    mrgba=new Mat(4,4,CvType.CV_16S);
    mHolder = getHolder();
    mHolder.addCallback(this);
}

public boolean openCamera() {
    synchronized (this) {
        releaseCamera();
        mCamera = new VideoCapture(Highgui.CV_CAP_ANDROID);
        if (!mCamera.isOpened()) {
            mCamera.release();
            mCamera = null;
            return false;
        }
    }
    return true;
}

public void releaseCamera() {
    Log.i(TAG, "releaseCamera");
    synchronized (this) {
        if (mCamera != null) {
                mCamera.release();
                mCamera = null;
        }
    }
}

public void setupCamera(int width, int height) {
    Log.i(TAG, "setupCamera("+width+", "+height+")");
    synchronized (this) {
        if (mCamera != null && mCamera.isOpened()) {
            List<Size> sizes = mCamera.getSupportedPreviewSizes();
            int mFrameWidth = width;
            int mFrameHeight = height;
            {
                double minDiff = Double.MAX_VALUE;
                for (Size size : sizes) {
                    if (Math.abs(size.height - height) < minDiff) {
                        mFrameWidth = (int) size.width;
                        mFrameHeight = (int) size.height;
                        minDiff = Math.abs(size.height - height);
                    }
                }
            }

            mCamera.set(Highgui.CV_CAP_PROP_FRAME_WIDTH, mFrameWidth);
            mCamera.set(Highgui.CV_CAP_PROP_FRAME_HEIGHT, mFrameHeight);
        }
    }

}

public void surfaceChanged(SurfaceHolder _holder, int format, int width, int height) {
    Log.i(TAG, "surfaceChanged");
    setupCamera(width, height);
}

public void surfaceCreated(SurfaceHolder holder) {
    Log.i(TAG, "surfaceCreated");
    (new Thread(this)).start();
}

public void surfaceDestroyed(SurfaceHolder holder) {
    Log.i(TAG, "surfaceDestroyed");
    releaseCamera();
}

public void run() {
    Log.i(TAG, "Starting processing thread");
    while (true) {
        Bitmap bmp = null;

        synchronized (this) {
            if (mCamera == null)
                break;

            if (!mCamera.grab()) {
                Log.e(TAG, "mCamera.grab() failed");
                break;
            }

        }

            }

    Log.i(TAG, "Finishing processing thread");
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T01:16:50.323

糟糕，我错误地调用了从不存在的矩阵组件。最初，矩阵只有一个通道。这就解释了麻烦。谢谢。

# .net - 手动设置文本框宽度，但让锚定管理 WinForms 中的高度

> ID：13446651
> 
> 赞同：1
> 
> 时间：2012-11-19T01:47:03.563
> 
> 标签：.net, winforms, anchor

我有一个 .NET 4 WinForms 应用程序，它有两个并排的多行文本框。我希望每个文本框占用可用水平空间的一半，因此我重写 OnLayout 以手动计算和设置宽度。但是，我还希望它们在调整父控件大小时垂直调整大小。我将每个锚定设置为顶部和底部，这通常足够了，但我发现如果我设置 Width 属性它会弄乱高度 - 它们比它们应该的高一点。一旦我注释掉设置宽度的行，垂直调整大小就会再次正常工作。

我也通过手动设置高度来解决这个问题，但理想情况下我想让 WinForms 锚定来处理这个问题。有什么办法可以做到这一点？我在 OnResize 和 OnLayout 事件中都尝试过，在调用基本方法之前和之后，它似乎没有任何区别。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T18:26:57.193

使用`SplitContainer`and 并将 and 设置`Panel1MinSize`为`Panel2MinSize`的一半`SplitContainer` `Width`。

此外，您必须同时使用`Dock` `Fill`两个`TextBox`es，以便每个都消耗一半的可用空间。

![在此处输入图像描述](../Images/1da687424d63b15cf5d1b4eb1f351d2e.png)

# javascript - 为什么自定义数组反向实现比 V8 中的 .reverse() 快两倍

> ID：13446654
> 
> 赞同：2
> 
> 时间：2012-11-19T01:47:57.337
> 
> 标签：javascript, performance, v8

在 Chrome 中进行测试时，与 Javascript 中的内置函数相比，反转数组的简单实现速度是其两倍。V8在做什么？这是测试：

```
var newArr = [];
var newArrDefault = [];
for(var i = 0; i < 10000000; i++){
    newArr[i] = i;
    newArrDefault[i] = i;
}

var startDefault = new Date();
newArrDefault.reverse();
console.log("Built in method took " + (new Date().getTime() - startDefault.getTime()));

var start = new Date();
for(var i = 0; i < newArr.length / 2; i++){
    var tmp = newArr[i];
    newArr[i] = newArr[newArr.length-i-1];
    newArr[newArr.length-i-1] = tmp;
}
console.log("Custom method took " + (new Date().getTime() - start.getTime())); 
```

版本 20.0.1132.47 Ubuntu 12.04 (144678) 上的结果：

```
Built in method took 149
Custom method took 71 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T03:11:00.490

为了好玩，我像这样实现了规范：

```
var upper, upperExists, lowerExists, lowerValue, upperValue;

for(var lower = 0, len = newArr.length >>> 0, middle = Math.floor(len / 2); lower != middle; ++lower) {
    upper = len - lower - 1;
    lowerValue = newArr[lower];
    upperValue = newArr[upper];
    lowerExists = newArr.hasOwnProperty(lower);
    upperExists = newArr.hasOwnProperty(upper);

    if (lowerExists && upperExists) {
        newArr[lower] = upperValue;
        newArr[upper] = lowerValue;
    } else if (upperExists) {
        newArr[lower] = upperValue;
        delete newArr[upper];
    } else if (lowerExists) {
        newArr[upper] = lowerValue;
        delete newArr[lower];
    }
} 
```

jsperf 可以在[这里](http://jsperf.com/arrayreversecomparison/2)找到。

它包含一大堆代码来处理丢失的条目，这就是为什么它比本机代码和您的代码都慢得多的原因（一些优化可能是可能的，但它不会对性能产生足够的影响）。不过，您的代码和本机实现之间的性能差异并不是很确定。

在大多数情况下，数组是一个连续的值块，它们之间没有间隙，所以你应该对这种代码安全；只要你知道区别:)

# c - 斐波那契数列中的完美正方形？

> ID：13446655
> 
> 赞同：0
> 
> 时间：2012-11-19T01:47:59.580
> 
> 标签：c, fibonacci, perfect-square

创建一个程序，找出斐波那契数列中出现的第一个大于 1 的完全平方并将其显示到控制台。

输入输入时没有输出。

```
#include <stdio.h>
#include <math.h>

int PerfectSquare(int n);
int Fibonacci(int n);

main()
{
    int i;
    int number=0;

    int fibNumber=0;
    int psNumber=0;

    printf("Enter fibonacci number:");
    scanf("%i",&number);

    fibNumber = Fibonacci(number);

    psNumber = PerfectSquare(fibNumber);

    if(psNumber != 0){
        printf("%i\n",psNumber);
    }
}

int PerfectSquare(int n)
{

    float root = sqrt(n);
    if (n == ((int) root)*((int) root))
        return root;
    else
        return 0;
}

int Fibonacci(int n){
    if (n==0) return 0;
    if (n==1) return 1;
    return( Fibonacci(n-1)+Fibonacci(n-2) );
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T13:56:37.063

第一个建议是摆脱递归以创建 fib 数字。您可以使用 2 个变量并持续跟踪最后 2 个 fib 数字。他们会添加如下内容：

```
fib1=0;fib2=1;
for(i=3;i<MAXTOCHECK;i++)
{
    if(fib1<fib2)
        fib1+=fib2;
    else
        fib2+=fib1;
} 
```

这种方法的好处在于，首先您可以将种子更改为您想要的任何内容。很高兴找到类似 fib 的序列。例如，卢卡斯数字以 2 和 1 为种子。其次，您可以将检查平方内联，而不是每次都完全重新计算序列。

注意：如前所述，您的索引可能已关闭。从最初的播种方式索引 fib 数字存在一些任意性。如果您使用 1 和 1 重新播种，则可以看到这一点。您会得到相同的序列移动了 1 个索引。因此，请确保您使用一致的定义来索引序列。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T01:55:18.863

现在你只计算一个斐波那契数，然后测试它是否是一个完美的正方形。要正确执行此操作，您必须使用循环。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T02:57:50.917

卢克是对的。如果您的输入是 n，则 Fibonacci(n) 返回第 (n+1) 个 Fibonacci 数。您的程序实际上检查 (number +1)th 是否是完全平方。

如果输入 12，则有输出。因为第 13 个斐波那契数是 144。它是完美的正方形。PS：打印 fibNumber 而不是 psNumber。

```
 printf("%i\n", fibNumber); 
```

# python - Google App Engine 模板循环遍历两个变量

> ID：13446656
> 
> 赞同：2
> 
> 时间：2012-11-19T01:47:59.497
> 
> 标签：python, google-app-engine, templates

在 Google 应用引擎上，我想在循环模板中使用两个变量：我需要输入 10 个项目。如果数据存储中已经有一些项目，则显示它们，否则，将该字段留空。我该怎么做？谢谢。

顺便说一句，我注意到 Django 中有“multifor”，但我不知道如何在 GAE 上安装它。

主要.py：

```
def mainPage(webapp2.RequestHandler):
    query = db.Query(Item)
    items = query.fetch(limit=10)
    template_values = {'range': range(10), 'items': items}
    common.render(handler, 'main.html', template_values) 
```

主.html：

```
<form action=... method="post">
      {% for i in range; for item in items %}
        <input type="text" name="name" value="item.name">
      {% endfor %}
      <input type="submit">
</form> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-19T02:09:25.430

不确定您使用的是哪个模板引擎，但是如何创建一个包含 10 个元素的列表并用查询结果填充它呢？就像是：

```
my_list = [None for _ in range(10)] 
```

然后，一旦您获得查询结果，将它们添加到列表中（对象将作为对象列表返回，因此这只是一个概念示例）：

```
>>> new_list = ['one', 'two', 'three']
>>> my_list[:len(new_list)] = new_list
>>> my_list
['one', 'two', 'three', None, None, None, None, None, None, None] 
```

现在，当您传入`my_list`模板时：

```
<form action=... method="post">
      {% for item in my_list %}
        {% if item %}
           <input type="text" name="name" value="item.name">
        {% else %}
           <input type="text" name="<your_blank_value>" value="<your_blank>">
        {% endif %}
      {% endfor %}
      <input type="submit">
</form> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T13:50:44.557

您可能会发现这些想法也很有帮助

(1) 如果模板中的循环是

```
{% for item in items %} 
```

然后您可以使用变量`{{forloop.counter0}}`或`{{forloop.counter1}}`获取循环的索引。

(2) 您可以将一个 Python 元组列表传递给您的模板，并以这种方式编写 for 循环：

```
{% for index, name in names %} 
```

# mod-rewrite - .htaccess RewriteRule 用于在路径中出现单词时更改路径

> ID：13446657
> 
> 赞同：0
> 
> 时间：2012-11-19T01:48:10.003
> 
> 标签：mod-rewrite

:-)

我需要一个 .htaccess RewriteRule 可以做到这一点：

如果浏览器加载这个 url 路径：

```
http://www.domain.com/example/word_to_change/ 
```

改成

```
http://www.domain.com/example/new_word/ 
```

看看“word_to_change”和“new_word”出现在路径的第三层

我试过这个：

```
RewriteRule ^(word_to_change/)?$ /new_word/ [R,L] 
```

但仅当“word_to_change”出现在第二级而不是第三级时才有效。

感谢您的帮助！:)

* * *

添加：

三个例子：需要改变

```
http://www.domain.com/second_level_with_any_word/specific_word_1 or
http://www.domain.com/example_1/specific_word_1 or
http://www.domain.com/example_2/specific_word_1 
```

至

```
http://www.domain.com/second_level_anything/specific_word_2 or
http://www.domain.com/example_1/specific_word_2 or
http://www.domain.com/example_2/specific_word_2 
```

用这个其他例子来解释也许更简单：

```
http://*/*/specific_word1
for
http://*/*/specific_word2 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T02:03:24.477

这取决于要完成的内容，如果您想使用特定单词更改示例之后出现的任何单词，那么您需要的是：

```
RewriteRule ^example/(.*) /new_path/ [R,L] 
```

如果您想将该词作为参数传递，您可以使用

```
RewriteRule ^example/(.*) /new_path/process.php?word=$1 [R,L] 
```

如果你想发送任何以特定单词结尾的 URL，试试这个

```
RewriteRule ^(.*)/old_word/$ /$1/new_word/ [R,L] 
```

# jquery - 在jqueryui中隐藏后显示一个div

> ID：13446665
> 
> 赞同：0
> 
> 时间：2012-11-19T01:49:21.577
> 
> 标签：jquery, jquery-ui

我正在尝试使用 jQuery + UI 隐藏 DIV，然后在单击特定元素时再次显示它。

```
$(".leftnav").click(function () {
  $(".rightnav").hide("slide", { direction: "down" }, 1000);
}); 
```

到目前为止我有这个：http: [//jsfiddle.net/452Yx/22/](http://jsfiddle.net/452Yx/22/)

我不知道如何通过单击相同的元素来让 DIV 再次显示。

有任何想法吗？

谢谢

麦克风

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T01:51:51.710

“我不知道如何通过单击相同的元素让 DIV 再次显示。”

[http://api.jquery.com/toggle/](http://api.jquery.com/toggle/)

```
$(document).ready(function(){

    $(".leftnav").toggle(function () {

        $(".rightnav").hide("slide", { direction: "down" }, 1000);

    }, function(){

        $(".rightnav").show();

    });

}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T01:54:12.800

你可以简单地做：

```
$(".leftnav").click(function () {
  $(".rightnav").toggle("slide", { direction: "down" }, 1000);
}); 
```

另请注意，jquery 切换与 jqueryui 切换并不完全相同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T01:53:48.690

你可以使用切换。这是您可以使用代码执行的操作。您可以检查对象是否可见。如果是隐藏或显示。

```
$(".leftnav").click(function () {
    if($(".rightnav").is(":visible"))
      $(".rightnav").hide("slide", { direction: "down" }, 1000);
    else $(".rightnav").show();
}); 
```

但是切换更好。

# git - 为什么 Git 提交到错误的存储库？

> ID：13446667
> 
> 赞同：1
> 
> 时间：2012-11-19T01:49:43.293
> 
> 标签：git, github

我在 Michael Hartl 的 Ruby on Rails 教程的第 2 章中，我在命令行中输入了以下内容：

```
$ git init 
$ git add .
$ git commit -m "Initial commit"
$  git remote add github https://github.com/themaktravels/demo_app.git

fatal: remote github already exists.

$ git push -u github master

Username: 
Password: 

To https://github.com/themaktravels/first_app.git
 ! [rejected]        master -> master (non-fast-forward)
error: failed to push some refs to 'https://github.com/themaktravels/first_app.git'
To prevent you from losing history, non-fast-forward updates were rejected
Merge the remote changes (e.g. 'git pull') before pushing again.  See the 
'Note about fast-forwards' section of 'git push --help' for details. 
```

我看到在指出 Github 存在之前我遇到了一个致命错误，但我认为这没关系，因为我之前在不同的存储库中提交了 Git。我注意到，当我 时`$ git push -u Github master`，结果是 git 试图在错误的存储库（first_app.git）而不是新创建的存储库（demo_app.git）中提交。为什么会这样？

在尝试提交之前，我输入了以下内容：

```
$ cd ~/rails_projects
$ rails new demo_app
$ cd demo_app 
```

然后编辑了我的 gem 文件，一切似乎都很好。直到我遇到这个 git 问题。有什么建议么？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T02:14:22.173

问题就在这里：

```
$  git remote add github https://github.com/themaktravels/demo_app.git

fatal: remote github already exists. 
```

如果您已经有一个名为 的遥控器`github`，则该`git remote add`命令不会更改现有设置。用于`git remote -v`查看您当前的遥控器及其指向的位置。我怀疑您已经有一个`github`指向`https://github.com/themaktravels/first_app.git`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T02:17:15.023

您已经有一个名为“github”的遥控器，它指向 first_app，因此当您尝试添加指向 demo_app 的新遥控器时，它会失败。

看起来您正试图在已经存在且已经有远程的存储库中初始化 Git。确保在新目录中执行此操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T01:57:59.030

> 为防止您丢失历史记录，拒绝非快进更新 在再次推送之前合并远程更改（例如“git pull”）。

就像它试图告诉你的那样，推送试图导致非快进更新。

# performance - 制作更高效的蒙特卡罗模拟

> ID：13446670
> 
> 赞同：5
> 
> 时间：2012-11-19T01:50:04.817
> 
> 标签：performance, r, statistics, simulation

因此，我编写了这段代码，它应该有效地估计定义为 h(x) 的函数曲线下的面积。我的问题是我需要能够将面积估计在小数点后 6 位以内，但是我在 estimateN 中定义的算法似乎对我的机器来说太重了。本质上问题是我怎样才能使下面的代码更有效率？有没有办法摆脱那个循环？

```
h = function(x) {
    return(1+(x^9)+(x^3))
}
estimateN = function(n) {
    count = 0
    k = 1
    xpoints = runif(n, 0, 1)
    ypoints = runif(n, 0, 3)
    while(k <= n){
    if(ypoints[k]<=h(xpoints[k]))
        count = count+1
    k = k+1
    }
    #because of the range that im using for y
    return(3*(count/n))
}
#uses the fact that err<=1/sqrt(n) to determine size of dataset
estimate_to = function(i) {
    n = (10^i)^2
    print(paste(n, " repetitions: ", estimateN(n)))
}

estimate_to(6) 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-19T02:01:44.337

替换此代码：

```
count = 0
k = 1
while(k <= n){
if(ypoints[k]<=h(xpoints[k]))
    count = count+1
k = k+1
} 
```

有了这条线：

```
count <- sum(ypoints <= h(xpoints)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-13T23:51:29.183

如果它是您真正追求的效率，那么`integrate`这个问题的速度要快几个数量级（更不用说内存效率更高了）。

```
integrate(h, 0, 1)

# 1.35 with absolute error < 1.5e-14

microbenchmark(integrate(h, 0, 1), estimate_to(3), times=10)

# Unit: microseconds
#                expr        min         lq     median         uq        max neval
#  integrate(h, 0, 1)     14.456     17.769     42.918     54.514     83.125    10
#      estimate_to(3) 151980.781 159830.956 162290.668 167197.742 174881.066    10 
```

# github - 如何将我的 Visual Studio 项目发布到 Github

> ID：13446679
> 
> 赞同：4
> 
> 时间：2012-11-19T01:52:19.537
> 
> 标签：github

我在 Visual Studio 中做了一个项目，我想在 Github 上与人们分享。

搜索谷歌和这里，我似乎找不到一个简单的指南来说明如何将这个项目上传到 Github。

我安装了 Git 扩展，我也安装了一些来自 Github 的应用程序。我根本不知道我需要做什么才能在 Github 上分享我的项目。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T08:50:38.673

使用这个简单的工具： [https ://code.google.com/p/gitextensions/](https://code.google.com/p/gitextensions/)

不需要 Cygwin

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T02:32:03.197

我一直觉得[**这个指南**](http://help.github.com/articles/set-up-git) 很有帮助。

我正在使用安装了 Git 包的 Cygwin。完成后，您需要 [**设置**](http://help.github.com/articles/generating-ssh-keys)SSH 密钥。这本质上是存储在计算机文件中的密钥。您在 GitHub 上的“SSH 密钥”页面中输入相同的密钥，只要找到带有该密钥的文件，您就可以从 GitHub 推送和拉取。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-27T09:01:12.740

我刚刚找到了这个VS15 的[扩展：](https://visualstudio.github.com/)

# python - 在python中获取启用cookie的页面

> ID：13446680
> 
> 赞同：3
> 
> 时间：2012-11-19T01:52:20.260
> 
> 标签：python, cookies, web-scraping, python-requests

我想使用 python 下载一个网页来完成一些网页抓取任务。问题是该网站需要启用 cookie，否则它会提供不同版本的页面。**我确实实施了解决问题的解决方案，但我认为它效率低下。需要您的帮助来改进它！**

这就是我现在的方式：

```
import requests
import cookielib

cj = cookielib.CookieJar()
user_agent = {'User-agent': 'Mozilla/5.0 (compatible; Googlebot/2.1; +http://www.google.com/bot.html)'}
#first request to get the cookies
requests.get('https://ccirecruit.cox.com/psc/RECRUIT/EMPLOYEE/HRMS/c/HRS_HRAM.HRS_CE.GBL?JobOpeningId=42845&SiteId=1&Page=HRS_CE_JOB_DTL&PostingSeq=1&',headers=user_agent, timeout=2, cookies = cj)
# second request reusing cookies served first time
r = requests.get('https://ccirecruit.cox.com/psc/RECRUIT/EMPLOYEE/HRMS/c/HRS_HRAM.HRS_CE.GBL?JobOpeningId=42845&SiteId=1&Page=HRS_CE_JOB_DTL&PostingSeq=1&',headers=user_agent, timeout=2, cookies = cj)
html_text = r.text 
```

基本上，我创建了一个`CookieJar`对象，然后针对同一个 URL 发送两个连续的请求。**第一次它为我提供了糟糕的页面，但作为补偿给了 cookie。第二个请求重用了这个 cookie，我得到了正确的页面。**

问题是：**是否有可能只使用一个请求并仍然获得正确的启用 cookie 的页面版本？**

我尝试`HEAD`第一次发送请求而不是`GET`尽量减少流量，在这种情况下不提供 cookie。谷歌搜索也没有给我答案。因此，了解如何有效地制作它很有趣！有任何想法吗？！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T02:05:01.993

您需要发出请求以获取 cookie，所以不，如果不发出两个单独的请求，您将无法获取 cookie 并重用它。如果“启用 cookie”是指将脚本识别为具有 cookie 的版本，那么这一切都取决于服务器，您可以尝试：

*   在发出第一个请求之前对 cookie 进行硬编码，
*   请求一些可能的最小页面（具有最小可能的响应但包含 cookie）来获取第一个 cookie，
*   试图找到一些 walkaroung（也许添加一些 GET 参数会使网站误以为您有 cookie - 但您需要为这个特定网站找到它），

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-19T02:57:24.327

我认为这里的赢家可能是使用`requests`'s`session`框架，它会为您处理 cookie。

看起来像这样：

```
import requests
import cookielib

user_agent = {'User-agent': 'Mozilla/5.0 (compatible; Googlebot/2.1; +http://www.google.com/bot.html)'}
s = requests.session(headers=user_agent, timeout=2)

r = s.get('https://ccirecruit.cox.com/psc/RECRUIT/EMPLOYEE/HRMS/c/HRS_HRAM.HRS_CE.GBL?JobOpeningId=42845&SiteId=1&Page=HRS_CE_JOB_DTL&PostingSeq=1&')
html_text = r.text 
```

试试看，看看是否有效？

# objective-c - 以可编程方式设置 Info.plist 是或否

> ID：13446681
> 
> 赞同：-3
> 
> 时间：2012-11-19T01:52:49.653
> 
> 标签：objective-c, ios, xcode, plist

嗨 StackOverflow 开发人员，我有一个问题，我如何设置我的`Info.plist`可编程是或否。所以我的应用程序支持背景位置更新。但正如所有 iOS 开发人员都知道的那样，它会像坚果一样杀死电池。所以我想检测是否插入了 iphone，然后只支持后台处理，如果没有插入，我们可以使用 [locationmanger startMonitoringSignificantLocationChanges];。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-19T06:50:17.303

## 回答原始问题

OP询问如何停止更新位置，答案是

`CLLocationManager`有`stopUpdatingLocation:`方法。

## 回答新问题

据我了解，属性列表用作您打算在后台使用位置服务的声明，并且就其在运行时的可访问性而言是只读的。因此，似乎正确的方法是`CLLocationManager`通过其方法来控制`stopUpdatingLocation:`和 `startMonitoringSignificantLocationChanges:`。

您可以`CLLocationManager`通过使用电池通知注册电池通知来根据电池状态进行控制

```
[ [ UIDevice currentDevice ] setBatteryMonitoringEnabled:YES ];
[ [ NSNotificationCenter defaultCenter ] addObserver:self selector:@selector(
      reactToBatteryStatus) name:UIDeviceBatteryLevelDidChangeNotification object:nil ]; 
```

有了这个，您可以确定电话是否已插入。但是，根据 Apple 指南，您应该只在需要时注册电池通知。所以要注销你使用

```
[ [ UIDevice currentDevice ] setBatteryMonitoringEnabled:NO ];
[ [ NSNotificationCenter defaultCenter ] removeObserver:self name:
  UIDeviceBatteryLevelDidChangeNotification object:nil ]; 
```

然后根据电池状态，你可以做你需要的。

```
+ (void) reactToBatteryStatus {
    UIDeviceBatteryState batteryState = [ UIDevice currentDevice ].batteryState;
    if ( batteryState == UIDeviceBatteryStateCharging || batteryState == UIDeviceBatteryStateFull )
    {
        // Device is plugged in.
    }
} 
```

# binary - Prolog 二进制加法没有削减（！）

> ID：13446698
> 
> 赞同：0
> 
> 时间：2012-11-19T01:56:01.017
> 
> 标签：binary, prolog, addition

我试图弄清楚如何将两个表示为列表的二进制数相加。例如：addNumbers([1,0,1], [1,1,0,0], X)。应该返回 X = [1,0,0,0,1]。

我们不大声使用cuts(!) 来解决这个问题。所以我知道我必须实现一个加法器。现在我已经添加了用它需要的谓词实现的数字：

```
addDigits(A,B,X,Y) :- myXor(A,B,X), myAnd(A,B,Y).

myAnd(A,B,R) :- A == 1, B == 1, R is 1.
myAnd(A,B,R) :- A == 0, B == 0, R is 0.
myAnd(A,B,R) :- A == 1, B == 0, R is 0.
myAnd(A,B,R) :- A == 0, B == 1, R is 0.
myOr(A,B,R) :- A == 0, B == 0, R is 0.
myOr(A,B,R) :- A == 0, B == 1, R is 1.
myOr(A,B,R) :- A == 1, B == 0, R is 1.
myor(A,B,R) :- A == 1, B == 1, R is 1. 
```

这将正确地返回 X 作为 2 个二进制数字的总和，并将 Y 作为进位。现在我知道我的加法器需要这个。现在实际实现 addDigits 是我卡住的地方。这是我目前拥有但不起作用的。注意：提示是 LSB 的开始，但我目前不这样做。

```
addNumbers([HA|TA],[HB|TB],X) :- adder(HA,HB,Cin,Sum,Cout,X),
    append(Sum, X, X),
    addNumbers(TA,TB,X).

adder(X,Y,Cin,Sum,Cout) :- addDigits(X,Y,Sum1,Carry1),
    addDigits(Sum1, Cin, Sum, Carry2),
    myOr(Carry1, Carry2, Cout). 
```

任何帮助/建议将不胜感激。

干杯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T07:35:12.247

你在一个很好的轨道上。您的主要问题是了解典型的 Prolog 递归。

但首先，您的二进制函数：它们是正确的，但是像这样更容易且更具可读性（无论如何您都错过了这个）：

```
myXor(1,0,1).
myXor(0,1,1).
myXor(1,1,0).
myXor(0,0,0). 
```

在`myOr`第四种情况下，您的拼写错误：您用小写“o”拼写了它。有了这个定义，你`adder`确实可以正常工作！

现在，关于递归：你真的需要从 LSB 开始，否则你甚至不知道要添加哪些位，因为数字不一定是相同的长度。幸运的是，您可以通过将调用包装在`reverse`s 中轻松做到这一点：

```
addNumbers(N1, N2, Sum) :- 
    reverse(N1, N12), 
    reverse(N2, N22),
    addNumbers(N12, N22, 0, [], Sum0),
    reverse(Sum0, Sum). 
```

这是 Prolog 中相当常见的模式： addNumbers/3 调用 addNumbers/5 并带有更多递归所需的参数。“0”是初始进位，[] 是结果的累加器。这是 addNumbers/5，与您的版本相比有一些更改：

```
addNumbers([HA|TA],[HB|TB],Cin,X0,X) :- 
    adder(HA,HB,Cin,Sum,Cout),
    append(X0, [Sum], X1),
    addNumbers(TA,TB,Cout,X1,X). 
```

首先，注意这里需要接收Cin作为输入参数！此外，我们将 X0 作为“累加器”变量，也就是说，它随着每次递归调用而增长。最终的调用会有结果，所以它可以把它变成输出变量。为此，您还需要基本案例：

```
addNumbers([],B,Cin,X0,X) :- % TODO: Respect Cin
    append(X0,B,X).
addNumbers(A,[],Cin,X0,X) :- % TODO: Respect Cin
    append(X0,A,X). 
```

看看append的结果怎么不是上面的X1（另一个中间变量），而是X？这是因为它是最终的结果，它会在调用栈中一直与同一个 X 统一，这样它就变成了整个 addNumbers/5 调用的输出！

不过，我没有完成它，因此您还剩下一些（少量）工作：此外，基本情况还需要考虑 Cin ......

# java - Android 游戏上的自动保存和自动加载游戏概念以及内部 Vs 上的保存。外部（又名 SD 卡）

> ID：13446699
> 
> 赞同：1
> 
> 时间：2012-11-19T01:56:10.517
> 
> 标签：java, save, preferences, libgdx, autosave

我有一个关于如何自动保存和加载游戏的问题。在这个例子中，就像*Temple Run*一样，它会自动保存游戏的所有内容（记录、获得的金钱和解锁的好东西），就像看起来一样简单。与 PlayStation 1 游戏相比，例如*Abe's Exodus*，它没有自动保存/加载功能，但它可以将游戏保存在游戏关卡中 Abe 离开的区域的确切位置以及您何时离开加载游戏，它会自动在此关卡中的最后一个位置开始游戏。

现在，我正在尝试通过我制作的这个简单的应用程序测试自动加载和保存游戏的这个功能，这是我期望成功的顺序如下：

1.  首次打开应用，如果是新应用，可移动精灵默认从中心开始。
2.  接下来，我尝试通过倾斜设备来移动精灵，并将其放置在顶部。
3.  然后，当我使用*BACK*键而不是*HOME*键关闭应用程序时，通过处置关闭应用程序。
4.  最后，当我重新打开应用程序时，只要我把它放在精灵上的那个坐标就会成为新的起点。

我的程序有一些错误。而不是顶部的精灵和这个位置应该保存这个坐标，一旦我重新打开精灵就会回到中心！我在代码工作区直接尝试了**render()**方法中的关键字**Preferences**以测试保存游戏的功能，但令人困惑，因为它似乎只读取值。

 **这是我关于上述主题的几个问题：

1.  在 LibGDX 中使用*SQL Lite* for Java 来保存游戏是个好主意吗？
2.  *三星 Galaxy SIII*等 Android 智能手机有 SD 卡插槽，但在*Google Nexus 平板电脑*中没有，主要问题是：Android 平板电脑中真的有外置驱动器吗？我可以通过编码将游戏保存在内部吗？
3.  使用首选项是自动保存所有内容（即角色、记录、项目、设置、关卡等）并仅在关闭应用程序并重新打开后自动加载所有内容的唯一方法吗？

希望您能够帮助我。

这是我的代码：

**Save_Load_Test.java**

```
package com.test.save_and_load_test;

import com.badlogic.gdx.Gdx;
import com.badlogic.gdx.Preferences;
import com.badlogic.gdx.Screen;
import com.badlogic.gdx.Input.Keys;
import com.badlogic.gdx.graphics.GL10;
import com.badlogic.gdx.graphics.OrthographicCamera;
import com.badlogic.gdx.graphics.Texture;
import com.badlogic.gdx.graphics.Texture.TextureFilter;
import com.badlogic.gdx.graphics.g2d.SpriteBatch;
import com.badlogic.gdx.math.Rectangle;
import com.badlogic.gdx.utils.GdxRuntimeException;

public class Save_and_Load_Test implements Screen 
{

private OrthographicCamera camera;
private Texture texture;
private Texture background;
private SpriteBatch batch;
private Rectangle pos;
private Rectangle BG_pos;
private float w = 720;
private float h = 1280;

Start game;

public Save_and_Load_Test(Start game)
{
    this.game = game;
}

@Override
public void render(float delta) 
{
    // TODO render()
    Gdx.gl.glClearColor(0, 0, 0, 1);
    Gdx.gl.glClear(GL10.GL_COLOR_BUFFER_BIT);

    batch.setProjectionMatrix(camera.combined);
    batch.begin();

        batch.draw(background, BG_pos.x, BG_pos.y);
        batch.draw(texture, pos.x, pos.y);

    batch.end();

    if(Gdx.input.getAccelerometerX() >= 1 && pos.x >= 0)
    {
        pos.x -= 20;
    }

    if(Gdx.input.getAccelerometerX() <= -1 && pos.x <= (720 - pos.width))
    {
        pos.x += 20;
    }

    if(Gdx.input.getAccelerometerY() >= 1 && pos.y >=0)
    {
        pos.y -= 20;
    }

    if(Gdx.input.getAccelerometerY() <= -1 && pos.y <= (1280 - pos.height))
    {
        pos.y += 20;
    }

    if(Gdx.input.isKeyPressed(Keys.RIGHT) && pos.x <= (720 - pos.width - 35))
    {
        pos.x += 20;
    }

    if(Gdx.input.isKeyPressed(Keys.LEFT) && pos.x >=0)
    {
        pos.x -= 20;
    }

    if(Gdx.input.isKeyPressed(Keys.UP) && pos.y <= (1280 - pos.height - 35))
    {
        pos.y += 20;
    }

    if(Gdx.input.isKeyPressed(Keys.DOWN) && pos.y >= 0)
    {
        pos.y -= 20;
    }

    Preferences prefs = Gdx.app.getPreferences("my-preferences");

    prefs.putFloat("X", pos.x);
    prefs.putFloat("Y", pos.y);
    prefs.flush();
}

@Override
public void resize(int width, int height) {
    // TODO Auto-generated method stub

}

@Override
public void show() 
{
    // TODO show()
    camera = new OrthographicCamera();
    camera.setToOrtho(false, w, h);

    texture = new Texture(Gdx.files.internal("Jeff_the_Happy_Clown.png"));
    background = new Texture(Gdx.files.internal("babe_BG.png"));

    texture.setFilter(TextureFilter.Linear, TextureFilter.Linear);
    background.setFilter(TextureFilter.Linear, TextureFilter.Linear);

    batch = new SpriteBatch();

    pos = new Rectangle();
    pos.width = 100;
    pos.height = 100;
    pos.x = (w/2) - (pos.width/2);
    pos.y = (h/2) - (pos.height/2);

    BG_pos = new Rectangle();
    BG_pos.width = background.getWidth();
    BG_pos.height = background.getHeight();
    BG_pos.x = (w/2) - (BG_pos.width/2);
    BG_pos.y = (h/2) - (BG_pos.height/2);
}

@Override
public void hide() {
    // TODO Auto-generated method stub

}

@Override
public void pause() {
    // TODO Auto-generated method stub

}

@Override
public void resume() {
    // TODO Auto-generated method stub

}

@Override
public void dispose() 
{
    // TODO dispose
    batch.dispose();
    texture.dispose();
}

} 
```

**启动.java**

```
package com.test.save_and_load_test;

import com.badlogic.gdx.Game;

public class Start extends Game
{

@Override
public void create() 
{
    setScreen(new Save_and_Load_Test(this));
}

@Override
public void resume()
{
    // Is this method involved for loading the last file game saved?
}

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T04:20:20.117

您应该在保存的首选项文件`pos`中的`resume`和方法中进行初始化。`show`就像是：

```
Preferences prefs = Gdx.app.getPreferences("my-preferences");
pos.x = prefs.getFloat("X", 99.0f); // XXX use a better default
pos.y = prefs.getFloat("Y", 99.0f); // XXX use a better default 
```

如果您计算合理的默认值，则不必担心初始情况。

从技术上讲，您可以在顶部执行此操作`render`（在通常情况下，您只需重新读取刚刚保存在上一次渲染中的值，但在这是第一次`render`调用的情况下，它应该会有所帮助）。但这似乎有点浪费（并且在渲染线程上做不必要的事情，尤其是 IO，是个坏主意）。

每次渲染都有点过分`flush`，并且当 IO 停止渲染线程时会导致偶尔的打嗝。由于您的应用程序即将退出，您应该能够只`flush`将首选项对象放入。（当然，您必须在实例上`pause`保留对对象的引用。）`Preferences`

您在此问题末尾的其他问题应作为单独的问题发布。在您这样做之前，请务必阅读[http://developer.android.com/guide/topics/data/data-storage.html](http://developer.android.com/guide/topics/data/data-storage.html)**

# google-apps-script - scriptDB 中的非关系型数据存储设计

> ID：13446703
> 
> 赞同：0
> 
> 时间：2012-11-19T01:56:56.893
> 
> 标签：google-apps-script

我是使用非关系数据存储（如 scriptDB）的新手。将数据嵌套在要存储的对象中会有什么好处？形成 scriptDB 教程......为什么，

```
{type: "employee",
  employee_id: 1,
  name: {first: "Fatima", initial: "S", last: "Pauli"}, 
```

而不是这个，

```
{type: "employee",
  employee_id: 1,
  first: "Fatima", 
  initial: "S", 
  last: "Pauli", 
```

似乎非嵌套结构会更简单、更小且更易于访问。我错过了什么？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T12:39:21.987

您没有遗漏任何东西——它只是一个示例，它说明了对象存储模式设计中的功能而不是最佳实践。

有几件事要记住。

1.  在上面的例子中——因为我们只是通过employee_id 进行查询，所以name 是一个复杂对象这一事实根本不会影响查询。所以我们还不如在那里嵌套一个对象，我们可以在以后添加更多属性并让它自包含。

2.  大小在这里应该无关紧要（可能是一个对象的几个字节）。考虑一个对象中有多少数据，而不是它的结构或属性名称的微小差异。

3.  您最终将存储对象 - 因此您希望确保您检索的对象易于使用点表示法。

因此，您必须根据查询对象的方式及其自然形状的外观来了解代码中的意义。

使用文档/对象存储确实需要稍微改变思维 - 规范化原则并不真正适用。如果您仍然喜欢使用 SQL - Apps 脚本确实具有[JDBC 连接器](https://developers.google.com/apps-script/jdbc)，并且最近[添加了](http://googledevelopers.blogspot.com/2012/11/get-started-at-no-cost-with-faster.html)对[Cloud SQL的支持](https://developers.google.com/apps-script/jdbc#accessing_google_cloud_sql_databases)

# django - express.js 像 Django 中的 url

> ID：13446712
> 
> 赞同：1
> 
> 时间：2012-11-19T01:59:14.987
> 
> 标签：django, url, configuration, express

我们可以在 django 中使用 express.js 之类的 url 配置吗？有时使用正则表达式会很痛苦！

express.js 网址：

```
app.get('/users/:id/feed',function(){}) 
```

django 网址：

```
url(r'^users/(?P<id>.*)/feed$', 'users.views.feed') 
```

我认为 express 的 url conf 比 django 的简单。像这样在 django 中使用 url 会很好，看起来不错：

```
url('/users/:id/feed', 'users.views.feed') 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T02:45:23.457

在核心 Django 中，您只能使用正则表达式指定 url。

我不熟悉 express.js 但是通过使用正则表达式，你可以做一些很酷的事情，比如：

*   位置参数和命名参数

    ```
    # named
    url(r'^(?P<foo>.*)/(?P<foo2>.*)/$', 'view', name='view')

    # corresponds to
    # something does not have to be supplied
    def view(request, something=None, foo=None, foo2=None)
        ... 
    ```

    和

    ```
    # positional
    url(r'^(.*)/(.*)/$', 'view', name='view')

    # corresponds to
    # all groups in regex are supplied in the same order (positions)
    def view(request, foo, foo2)
        ... 
    ```

*   计算反向网址

    ```
    # with
    url(r'^some/path/(?P<foo>.*)/(?P<foo2>.*)/$', 'view', name='view')

    >>> reverse('view', kwargs={'foo':'hello', 'foo2':'world'})
    u'some/path/hello/world/' 
    ```

*   限制网址

    ```
    url(r'^some/path/(?P<id>\d+)/$', 'view', name='view')
    # will only allow urls like
    # some/path/5/
    # some/path/10/

    # and will reject
    # some/path/hello/
    # some/path/world/ 
    ```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-19T11:27:28.553

为了在 Django 中使用更简单的 url 结构，您需要编写一个实用函数，将您的 url 格式转换为正则表达式格式。

这是基于您的示例的简单函数：

```
def easy_url(url_str):
    patt = re.compile(r':\w+/?')
    matches = patt.findall(url_str)
    for match in matches:
        var = match[1:-1]
        # generate re equivalent 
        var_re = r'(?P<%s>\w+)/'%var
        url_str = url_str.replace(match, var_re) 
    url_str += '$'
    return url_str

# in your url file
url(easy_url('/users/:id/feed/'), 'users.views.feed') 
```

您可以更新此函数以指定 url 变量的类型，例如仅数字等。

然而，正则表达式非常强大，你可以用它们做很多事情。因此，您应该仅将此类包装器用于具有简单规则的 url，以使其轻量级。

# python - python 字节数组

> ID：13446715
> 
> 赞同：1
> 
> 时间：2012-11-19T01:59:52.733
> 
> 标签：python, bytearray, bit-shift

我试图将几个变量组合成一个字节数组的 1 个元素。

我有变量：版本、填充、扩展、cc 大小：2b、1b、1b、4b

我如何按顺序将它们组合为一个字节？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T02:05:55.250

如果变量是整数，您可以只使用位移位和按位或运算来形成一个由 8 位组成的值，然后将其存储在字节数组中您想要的位置。

```
ba[i] = version << 6 | padding << 5 | extension << 4 | cc 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-19T02:11:07.530

您可以使用移位和位掩码将它们打包成一个字节。

```
version, padding, extension, cc = 2, 0, 1, 3
byte = ((version & 3) << 6) | ((padding & 1) << 5) | ((extension & 1) << 4) | (cc & 7)
byte
# OUT: 147 
```

请注意，您必须先屏蔽它们，否则如果值超出范围，它将破坏其他字段。

# jquery - 从其他函数获取 JQuery 值

> ID：13446716
> 
> 赞同：0
> 
> 时间：2012-11-19T02:00:06.297
> 
> 标签：jquery

我对 JQuery 真的很陌生。我有以下代码：

```
$(document).ready(function() {
    $('#pics').bind('change', function() {
        filesize = this.files[0].size; //Value of this one
        alert(filesize);
    });

    $('#Frm001').ajaxForm(function() {
        $('span.save-notice').text('Save Changed Successfully'+filesize); //to this one
            $('span.save-notice').show(); 
        }); 
}); 
```

由于我在文件大小上遇到错误，我如何实际将值文件大小从上述函数获取到 ajaxFormFunction...？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T02:05:47.683

我认为您想要做的是：在更改时执行 ajaxForm。

```
$(document).ready(function() {
    $('#pics').bind('change', function() {
        filesize = this.files[0].size; //Value of this one
        alert(filesize);

        $('#Frm001').ajaxForm(function() {
           $('span.save-notice').text('Save Changed Successfully'+filesize); //to this one
              $('span.save-notice').show(); 
        });
    }); 
}); 
```

# c++ - 最优页面替换算法

> ID：13446721
> 
> 赞同：0
> 
> 时间：2012-11-19T02:00:46.527
> 
> 标签：c++, arrays, class

我正在编写一个执行 3 页替换算法的程序。FIFO、LRU 和 OPT 我在这里假设“需求”分页。

我有FIFO，LRU完成了。但我不知道如何处理 OPT。我提示输入一个我正在读取的文件，并逐行解析为 pid 和一个类中的引用号。我也在提示帧大小。

文件结构如下：

```
1 45  // 1= pid,  45 = ref
1 46
1 45 
```

对于 LRU，我使用了第二个数组来使用计数器跟踪最近最少使用的插槽。

我只是不知道该怎么做选择。我需要在我正在解析的文件中向前看吗？我需要第二个数组吗？

我正在逐行解析文件并将其添加到类中，如下所示。这是我为其他 2 种算法所做的，需要逐行解析文件并提示帧大小。我可以将文件存储在一个数组中并处理我猜想的数组。

```
class pagetable
{

public:
int pid;
int ref;
int faults;
pagetable();
}; 
```

并在 main()

```
ifstream inputStream;
cout << "\n\n\t*********** Virtual Memory Management Simulator ***********\n";
cout << "\n";

while(!done){
 pagetable* page = new pagetable[frames];

getFileName(inputStream);//asks for input filename until it is valid
   cout << "\nEnter in the number of frames:";
cin >> frames;
   faults = runsimLFU2(inputStream, page, frames );

int runsimLFU2(ifstream &inputStream, pagetable* page, int frames ){

int i =0;
int j=0;
int pid =0;
int ref = 0;
int index = 0;
int count = 0;
int pagefaults = 0;
int lowest=0;

int counter = 1;

int * LRU;
LRU = new int[frames];

while(1){

  inputStream >> pid;  //parse the file line by line
  inputStream >> ref;
      page[index].pid = pid;   //lets add it... when needed
  page[index].ref = ref; 
```

我只是不确定当我解析文件并且缓存已满并且文件中的数字不在缓存中时该怎么办我怎么知道把它放在哪里？你能用编码术语解释一下吗？

用数组对其进行编码的方法是什么？我是否在第二个数组中保留一个计数器？有人可以解释一下最简单的方法吗？

请记住，该文件可能长达数百行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T02:31:46.813

不清楚您所说的“最佳”是什么意思。最优化的替换算法将是无所不知的，并且会提前知道未来页面将被引用的顺序。

如果您假设“需求”分页，您将选择替换下一个将在未来被引用的最远距离的页面。

如果您还假设无所不知的预测分页，它可能会变得更加复杂——我不知道是否有一个简单的规则。

如果您不假设无所不知，那么“最佳”可能是由分页统计驱动的，并且您会选择将来在统计上最不可能被引用的页面进行替换。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-01-08T03:49:41.733

```
**Optimal Page Replacement Full Program in C Language**

#include<stdio.h>
int main()
{
    int frame_size, no_of_pages, flag1, flag2, flag3, i, j, k, pos, max, page_faults = 0, hit = 0;
    int pri[20][30], frames[10], pages[30], temp[10];
    char x[20];

    printf("Enter number of pages: ");
    scanf("%d", &no_of_pages);

        printf("Enter the pages: ");
        for(i = 0; i < no_of_pages; ++i)
        {
                scanf("%d", &pages[i]);
        }

        printf("Enter number of frames: ");
    scanf("%d", &frame_size);

        for(i=0; i< no_of_pages; i++)
        {
                x[i]='X';
        }
    for(i = 0; i < frame_size; ++i)
        {
                frames[i] = -1;
    }

    for(i = 0; i < no_of_pages; ++i)
        {
                flag1 = flag2 = 0;

                for(j = 0; j < frame_size; ++j)
                {
                    if(frames[j] == pages[i])
                        {
                           flag1 = flag2 = 1;
                           x[i]='*';
                           break;
                    }
                }

                if(flag1 == 0)
                {
                    for(j = 0; j < frame_size; ++j)
                        {
                                if(frames[j] == -1)
                                {
                                        page_faults++;
                                        //x[j]='*';
                                frames[j] = pages[i];
                                flag2 = 1;
                                    break;
                                }
                }
                }

                if(flag2 == 0)
                {
                    flag3 =0;

                    for(j = 0; j < frame_size; ++j)
                        {
                                temp[j] = -1;

                                for(k = i + 1; k < no_of_pages; ++k)
                                {
                                    if(frames[j] == pages[k])
                                        {
                                        temp[j] = k;
                                                break;
                                   }
                                }
                    }

                    for(j = 0; j < frame_size; ++j)
                        {
                                if(temp[j] == -1)
                                {
                                        pos = j;
                                flag3 = 1;
                                break;
                                }
                    }

                    if(flag3 ==0)
                        {
                                max = temp[0];
                                pos = 0;

                                for(j = 1; j < frame_size; ++j)
                                {
                                    if(temp[j] > max)
                                        {
                                                max = temp[j];
                                                pos = j;
                                    }
                                }
                }

                        frames[pos] = pages[i];
                page_faults++;
                }

                for(j = 0; j < frame_size; j++)
                {
                    pri[j][i]=frames[j];
                }
    }

    for(i = 0 ; i < no_of_pages*5+2*frame_size+1; i ++)
                {
                        printf("-");
                }
//              printf("\n|Frames |");
                        printf("\n|       |");
                for(i=0; i<= 2* no_of_pages + 6; i++)
                {
                        printf(" ");
                }
                printf("Pages");
                for(i=0; i<= 2*no_of_pages + 6; i++)
                {
                        printf(" ");
                }
                printf("|");
printf("\n|Frames |");

                        for(i = 0 ; i < no_of_pages*5+2*frame_size - 8; i ++)
                {
                        printf("-");
                }
                printf("\n|\t|");

        for(i=0 ; i < no_of_pages ; i++)
                {
                        printf(" %2d |",pages[i]);
                }
                printf("\n|");
                for(i = 0 ; i < no_of_pages*5+2*frame_size + 0; i ++)
                {
                        printf("-");
                }
                printf("\n");

    for(i=0;i<frame_size;i++)
    {
        printf("| %2d",i);
        printf("\t|");

                for(j = 0; j < no_of_pages; j++)
                {
                        if(pri[i][j]== -1)
                        {
                                printf("  - |");
                        }
                        else
                    printf(" %2d |",pri[i][j]);
                }
                printf("\n");
        }
        for(i = 0 ; i < no_of_pages*5+2*frame_size+1; i ++)
        {
                printf("-");
        }

        printf("\n|       |");
                                                                                  for(i = 0; i< no_of_pages; i++)
        {
                if(x[i]=='X')
                {
                        printf("\033[0;31m");
                        printf(" %2c ",x[i]);
                        printf("\033[0m");
                        printf("|");
                }
                else
                {
                        printf("\033[0;32m");
                        printf(" %2c ",x[i]);
                        printf("\033[0m");
                        printf("|");
                }
        }
        //printf("\033[0m")
        printf("\n");
        for(i = 0 ; i < no_of_pages*5+2*frame_size+1; i ++)
        {
                printf("-");
        }

        hit = no_of_pages-page_faults;

        printf("\n\n Total Page Faults =  Total No of pages - Total Pages hits  \n");
    printf("                   =        %d      -       %d      \n",no_of_pages,hit);
    printf("                   =        %d      \n",page_faults);

        printf("\n Total Page Hits = Total No of pages - Total Pages Miss \n ");
        printf("                =       %d      -       %d      \n",no_of_pages,page_faults);
        printf("                 =      %d      \n",hit);

    printf("\nTotal Page Fault ratio = Total Page faults / Total pages \n");
        printf("                       =        %d      /       %d      \n",page_faults,no_of_pages);
        printf("                       =        %5.2f   \n",((float)page_faults/no_of_pages));

    printf("\nTotal Page Hit ratio = Total Page hits / Total pages \n");
    printf("                     =      %d      /       %d      \n",(no_of_pages-page_faults),no_of_pages);
    printf("                     =      %5.2f   \n",((float)no_of_pages-page_faults)/no_of_pages);
printf("\n");
return 0;
}

**OUTPUT**

[enter image description here][1]

  [1]: https://i.stack.imgur.com/qYG6x.png 
```

# c++ - 声明一个由 N 个指向函数的指针组成的数组，返回指向函数的指针，返回指向字符的指针

> ID：13446724
> 
> 赞同：1
> 
> 时间：2012-11-19T02:01:10.663
> 
> 标签：c++, function-pointers

丑陋的面试问题：你会如何声明一个包含 N 个函数的指针数组？在有和没有 typedef 的情况下显示它。

假设这些函数没有参数。

我的 typedef 正确吗？

```
typedef char* (*f1)();
typedef f1 (*f2)();

f2 a[N]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T02:12:04.543

`typedef char *(*(*foo[])())();`

但我在这里绝对同意@Xploit。永远不要写这个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T02:26:47.997

返回字符指针的函数：

```
typedef char * (*fpc)(void); 
```

函数返回指向函数的指针，返回指向字符的指针：

```
typedef fpc (*fpa)(void); 
```

指向函数的函数指针数组，返回指向函数的指针，返回指向字符的指针：

```
fpa my_array[N]; 
```

我将把非 typedef 版本留给 OP。没有理由禁止 typedef。

# asp.net-mvc - 从会员 Asp Net MVC 获取所有 id 和用户名

> ID：13446725
> 
> 赞同：0
> 
> 时间：2012-11-19T02:01:13.407
> 
> 标签：asp.net-mvc, asp.net-membership, membershipuser

我毫不怀疑如何从 1 个单一用户那里检索会员 ID：

```
currentUser = Membership.GetUser(); 
Guid currentUserId = (Guid)currentUser.ProviderUserKey; 
```

但我找不到检索所有用户 ID 和用户名的方法。

我试过这样：

```
MembershipUserCollection AllUsers;
AllUsers = GetAllUsers(); 
```

从那时起，我找不到从 AllUsers 检索 Id 和用户名的方法。我能从这里得到一些帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T02:06:58.087

我认为您正在寻找 Membership.GetAllUsers()

```
var users = Membership.GetAllUsers();
foreach (MembershipUser membershipUser in users)
{
    // membershipUser.UserName;
} 
```

[http://msdn.microsoft.com/en-us/library/system.web.security.membershipprovider.getallusers.aspx](http://msdn.microsoft.com/en-us/library/system.web.security.membershipprovider.getallusers.aspx)

# php - 我有一个字符串 datetime 我想插入到我的数据库中，但我似乎遇到了语法错误

> ID：13446726
> 
> 赞同：0
> 
> 时间：2012-11-19T02:01:14.187
> 
> 标签：php, mysql

我有一串日期

```
$date = '2012-11-18 23:15:12'; 
```

我想将它插入我的数据库。

```
create table A (
    t_date datetime
); 
```

但是当我说它似乎不起作用

```
$q = "insert into A (t_date) values ('".$date."')";
mysql_query($q) or die("Error: ".mysql_error()); 
```

但是当我这样做时，它会返回与 $date 和查询相关的错误。

我应该使用时间戳而不是日期时间吗？我将如何使它正确插入？

错误：

```
Error: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ''2012-11-18 23:15:12')' at line 1[roo 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T02:24:40.900

不要将当前日期存储到字符串中，而是使用 CURDATE 在 MySQL 中为您完成这项工作。

```
$q = "INSERT INTO A (col_name, col_date) VALUE ('DATETIME: Auto CURDATE()', CURDATE() )";
mysql_query($q) or die("Error: ".mysql_error()); 
```

查看此链接以获取 MySQL 中的 DATE TIME 功能列表。 [http://dev.mysql.com/doc/refman/5.1/en/date-and-time-functions.html#function_curdate](http://dev.mysql.com/doc/refman/5.1/en/date-and-time-functions.html#function_curdate)

# sql - 查找每个客户的帐户类型数量

> ID：13446734
> 
> 赞同：0
> 
> 时间：2012-11-19T02:02:24.933
> 
> 标签：sql, oracle, sqlplus

我在尝试构建一个查询时遇到了很多麻烦，该查询将为我提供每个客户的姓名以及每个客户拥有的不同类型帐户的数量。这三种类型是支票、储蓄和CD。

```
customers:
+--------+--------+
| cid    | name   |
+--------+--------+
| 1      | a      | 
| 2      | b      |
| 3      | c      |
+--------+--------+

accounts:
+-----------+-----------+
| aid       | type      |
+-----------+-----------+
| 1         | Checkings |
| 2         | Savings   |
| 3         | Checkings |
| 4         | CD        |
| 5         | CD        |
| 6         | Checkings |
+-----------+-----------+

transactions:
+--------+--------+--------+
| tid    | cid    | aid    |
+--------+--------+--------+
| 1      | 1      | 1      |
| 2      | 1      | 2      |
| 3      | 2      | 3      |
| 4      | 3      | 4      |
| 5      | 1      | 5      |
| 6      | 3      | 4      |
| 7      | 1      | 6      |
+--------+--------+--------+ 
```

预期的答案是：

一、3

乙，1

三、1

获取名称很简单，但我如何计算每个人的帐户以及比较帐户以确保它不是同一类型？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T02:06:02.397

只需在`DISTINCT`里面添加`COUNT`

```
SELECT  a.cid, a.name, COUNT(DISTINCT c.type) totalCount
FROM    customers a
        INNER JOIN transactions b
            ON a.cis = b.cid
        INNER JOIN accounts c
            ON b,aid = c.aid
GROUP BY a.cid, a.name 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T09:32:47.107

询问：

**[SQLFiddle示例](http://sqlfiddle.com/#!4/bd269/28)**

```
SELECT 
a."name", 
COUNT(DISTINCT c."type") totalCount
FROM    customers a
        INNER JOIN transactions b
            ON a."cid" = b."cid"
        INNER JOIN accounts c
            ON b."aid" = c."aid"
GROUP BY a."cid", a."name"
ORDER BY totalCount DESC 
```

结果：

```
| NAME | TOTALCOUNT |
---------------------
|    a |          3 |
|    b |          1 |
|    c |          1 | 
```

# box-api - 音乐文件的 box api 直接链接

> ID：13446737
> 
> 赞同：1
> 
> 时间：2012-11-19T02:02:36.147
> 
> 标签：box-api

dropbox 有 /media api，它提供了一个直接链接，用于带有 html5 音频标签的音频流。我没有看到与盒子类似的东西。

真正的问题是我不能将“GET /files/{file id}/content”用于音乐流媒体，因为它需要在标题中使用 BoxAuth。

我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-07-13T05:27:22.733

直接下载链接仅适用于付费盒用户，不适用于免费用户。因此，如果您是免费用户，则必须将您的帐户升级为付费用户，然后才能获得直接下载链接。[在此处](https://support.box.com/hc/en-us/articles/200519908-Direct-Linking-to-a-File)查看盒子支持答案

否则，您可以使用下载 api。请参阅[文档](https://box-content.readme.io/#download-a-file)

此链接仅在 15 分钟内有效，因此 15 分钟后您必须再次调用下载 api，您将获得在接下来的 15 分钟内有效的新直接下载链接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T23:45:00.177

当您为文件[创建共享链接](http://developers.box.com/docs/#files-create-a-shared-link-for-a-file)时，还会返回直接下载链接，即`download_url`以下 JSON 中的字段：

```
{
    "type":"file",
    "id":"2192049121",
    "sequence_id":"1",
    "name":"brand_new_name.psd",
    "description":"",
    "size":1266400,
    "path":"\/brand_new_name.psd",
    "path_id":"\/0\/2192049121",
    "created_at":"2012-06-04T21:32:20-07:00",
    "modified_at":"2012-06-04T21:32:21-07:00",
    "shared_link": {
       "url": "https://www.box.com/s/0bb6907e48920c98d484",
       "download_url": "https://dl.boxcloud.com/shared/static/0bb6907e48920c98d484.webdoc",
       "password_enabled": false,
       "unshared_at": null,
       "download_count": 0,
       "preview_count": 0,
       "access": "Open",
       "permissions": {
           "download": true,
           "preview": true
       }
   }
    "etag":"72e96dad26aa67a5f7435548c86b7a8a331f0ae9",
    "created_by":
    {
        "type":"user",
        "id":"13344957",
        "name":"Sean Rose",
        "login":"sean+test@box.com"
    },
    "modified_by":
    {
        "type":"user",
        "id":"13344957",
        "name":"Sean Rose",
        "login":"seanrose@stanford.edu"
    },
    "owned_by":
    {
        "type":"user",
        "id":"13344957",
        "name":"Sean Rose",
        "login":"seanrose@stanford.edu"
    },
    "parent":
    {
        "type":"folder",
        "id":"0",
        "sequence_id":null,
        "name":"All Files"
    }
} 
```

# entity-framework - 动态组装模型的代码优先迁移

> ID：13446739
> 
> 赞同：2
> 
> 时间：2012-11-19T02:02:59.610
> 
> 标签：entity-framework, ef-code-first, entity-framework-migrations

我的数据库模型（有时称为“*上下文*”）在启动时根据安装的服务和/或插件动态组装。插件和服务通过我的 IoC 容器导出它们的模型定义片段，应用程序核心在调用方法时将它们拾取并运行它们`DbContext.OnModelCreating`。

问题是：**我可以（以及如何）在此设置中使用 Code First 迁移**吗？
（以下是有关我尝试过的方法以及具体问题的更多信息）

在我之前的项目中，数据库是从一些旧代码继承而来的，所以无论如何我们都不能使用任何 Code First 数据库生成的东西。我们只是保留了一长串 delta 脚本并在部署时手动执行它们（这是一种单主机项目）。

现在我开始了一个新项目，这一次，数据库是全新的，可以使用 Code First。最初，我对 Code First 迁移感到非常兴奋，这似乎是要走的路。直到我真正尝试过。很明显，最初的尝试失败了，因为`DbContext`我的项目中没有明确定义。

到目前为止，似乎唯一可行的选择是手动编码迁移，我对此非常满意。然而，事实证明这并不像仅仅创建几个继承自`DbMigration`.

在对一个小型测试项目进行了一些实验之后，我发现迁移自动生成器添加了 的实现`IMigrationMetadata`，其中包含我的模型的哈希值作为`Source`和`Target`属性的值。据推测，此哈希随后用于识别从数据库的“当前”状态（如`__MigrationHistory`表中记录）到代码中模型定义的最新状态的迁移路径。这完全有道理，但是...

自然，我不知道从哪里获取模型的哈希值，这使我无法`IMigrationMetadata`在迁移中实现。

另一方面，我看到元数据接口不包含在`DbMigration`类本身中，这让我认为它可能是可选的。然后，迁移实际上可以在没有哈希值的情况下工作，但问题是 - 如何？

我在互联网上能找到的所有信息都只是简单的、非常基础的教程。没有关于如何手动创建迁移的信息（以及它是否受支持）。没有关于它如何实际工作以及如何扩展它的文档。而且从外面看也不是很明显。
此时我已准备好求助于 ILSpy，但整个 EF 非常复杂，我担心我可能无法在合理的时间内找到我需要的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T19:08:53.133

这里有一些想法，您可以将它们结合起来找到适合您的解决方案。我意识到我在我们的另一个线程中提到了其中的一些，但我将它们包括在此处以供其他阅读此问题的人使用。

*   [自动迁移](http://msdn.microsoft.com/en-us/data/jj554735)允许 Code First 自动计算并将更改应用到数据库。
*   您可以编写自己的代码来生成和应用迁移。我写了一篇[关于](http://romiller.com/2012/02/09/running-scripting-migrations-from-code/)应用迁移的文章， [MigrationsScaffolder](http://msdn.microsoft.com/en-us/library/system.data.entity.migrations.design.migrationscaffolder%28v=vs.103%29.aspx)类将帮助您创建迁移。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T19:22:18.820

运行项目时，会在数据库中创建一个额外的表。

```
 EdmMetadata table 
```

哈希始终是在 EdmMetadata 实体和当前代码优先模型的帮助下创建的。它是存储在数据库的 EdmMetadata 表中的 SHA-256 哈希。你可以从那张桌子上得到它。

要遵循的方法将是：

1.  使用获取当前模型的哈希

    ```
     var hash=GetModelHash(OldContext); 
    ```

2.  检查代码中的模型（新模型）是否与数据库中的模型（旧模型）兼容

    ```
     CompatibleWithModel(hash,CurrentContext,ObjectContext) 
    ```

此方法返回**bool**。

1.  如果不兼容，则删除数据库中现有的表。

2.  创建新表

3.  将当前哈希保存到数据库

4.  播种数据。

代码可能如下所示：

```
 {
                        var objectContext = ((IObjectContextAdapter)context).ObjectContext;
                        var modelHash = GetModelHash(objectContext);
                        if (CompatibleWithModel(modelHash, context, objectContext))
                            return;
                        DeleteExistingTables(objectContext);
                        CreateTables(objectContext);
                        SaveModelHashToDatabase(context, modelHash, objectContext);
                        SeedData(context);
                } 
```

一定要让类继承自

```
 IDatabaseInitializer<T> where T:DbContext 
```

# oop - 游戏编程中的二传手/二传手？

> ID：13446740
> 
> 赞同：0
> 
> 时间：2012-11-19T02:03:19.407
> 
> 标签：oop

我正在阅读 LibGDX 的源代码，我看到类中有太多的公共字段。所以我想知道，为什么？为该字段设置典型的设置器/获取器是否有任何优势？

我知道我应该避免直接访问类的字段，但是如果像 LibGDX 的作者这样的人这样做，我开始怀疑“什么是最佳实践”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T02:05:48.293

您不必知道此类的实现，因此它们使您的代码更简单。此外，您确定某些您不希望更改的变量符合规则。所以他们确保你不会弄乱你的代码。

# jquery - 按比例调整jquery

> ID：13446745
> 
> 赞同：1
> 
> 时间：2012-11-19T02:03:37.130
> 
> 标签：jquery, resize

我在调整图像大小时遇到​​问题。这是代码：

```
 function resize() {
var winHeight = $(window).height();
var winWidth = $(window).width();
var divHeight = winHeight * .9;
var divWidth = winWidth * .7;
var marginT = -1 * (divHeight / 2);
var marginL = -1 * (divWidth / 2);

if (winHeight > 300) {
  $('#picture-box').height(divHeight);
  $('#picture-box').css("margin-top", marginT);
}
if (winWidth > 300) {
  $('#picture-box').width(divWidth);
  $('#picture-box').css("margin-left", marginL);
}

var divPos = $('#picture-box').offset();
$('#close').css('top','50%');
$('#close').css('margin-top',marginT);
$('#close').css('left',((divPos.left + divWidth) - 20)+'px');

var w = $('#main-image').width();
var h = $('#main-image').height();
var p = (divWidth-w<divHeight-h)?(divWidth/w):(divHeight/h);
var nw = Math.round(w * p) * .9;
var nh =  Math.round(h * p) * .9;
$('#main-image').width((nw>1)? nw : 1);
$('#main-image').height((nw>1)? nh : 1);
var imgMarginT = (divHeight - nh) / 2;
var imgMarginL = (divWidth - nw) / 2;
$('#main-image').css("margin-left", imgMarginL);
$('#main-image').css("margin-top", imgMarginT);
$('#close').css('position','fixed');
$('#close').css('z-index','101');

$('#tshirt-button').css('left',divPos.left);

$('#memory-button').css('left',(divPos.left + divWidth) - 130);

$('#left-arrow').css('left',divPos.left + 25);
$('#right-arrow').css('left',(divPos.left + divWidth) - 75); }

function triggerRightArrow() {
if (quiltType == 'tshirt') {
  tshirtIndex++;
  if (tshirtIndex > MAX_TSHIRT_INDEX)
    tshirtIndex = 1;

  $('#picture-box').html('<img id = "main-image" src = "images/quilts/tshirt_'+tshirtIndex+'.jpg" />').then(resize(), resize());
}
else {
  memoryIndex++;
  if (memoryIndex > MAX_MEMORY_INDEX)
    memoryIndex = 1;

  $('#picture-box').html('<img id = "main-image" src = "images/quilts/memory_'+memoryIndex+'.jpg" />').then(resize(), resize());
} }

function triggerLeftArrow() {
if (quiltType == 'tshirt') {
  tshirtIndex--;
  if (tshirtIndex < 1)
    tshirtIndex = MAX_TSHIRT_INDEX;

  $('#picture-box').html('<img id = "main-image" src = "images/quilts/tshirt_'+tshirtIndex+'.jpg" />').then(resize(), resize());
  //resize();
}
else {
  memoryIndex--;
  if (memoryIndex < 1)
    memoryIndex = MAX_MEMORY_INDEX;

  $('#picture-box').html('<img id = "main-image" src = "images/quilts/memory_'+memoryIndex+'.jpg" />').then(resize(), resize());
  //resize();
} } 
```

我的问题是，当调用 triggerRightArrow 函数时，图片加载正确，但大小调整错误。当我再次调用 triggerRightArrow，然后调用 triggerLeftArrow 时，图像的大小已正确调整。这个解释可能会让人困惑，所以这里是演示的页面[http://creationsbyanna.x10.mx/quilts.html](http://creationsbyanna.x10.mx/quilts.html)

如果有人能告诉我如何让图片在第一次加载时正确调整大小，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T21:06:34.797

好的，我通过在页面加载时将图片加载到缓存中来使其工作。我仍然不确定为什么图片只有在加载到缓存中时才会正确调整大小，但这是我迄今为止找到的唯一解决方案。这是我在 $(init) 方法中的内容：

```
for (var i = 1; i <= MAX_TSHIRT_INDEX; i++) {
  heavyImage = new Image(); 
  heavyImage.src = 'images/quilts/tshirt_' + i + '.jpg';
}

for (var i = 1; i <= MAX_MEMORY_INDEX; i++) {
  heavyImage = new Image(); 
  heavyImage.src = 'images/quilts/memory_' + i + '.jpg';
} 
```

# php - jquery删除所有附加元素

> ID：13446750
> 
> 赞同：0
> 
> 时间：2012-11-19T02:05:40.883
> 
> 标签：php, jquery

我正在尝试编写待办事项列表表单。此表单可以包含无限行。每行都包含一个文本输入字段，旁边有 2 个按钮。第一个按钮在下面添加一个新行，第二个按钮删除该行。

问题是，当我多次单击添加按钮时，当我单击该行的删除图标时，它会删除在其下方添加的所有元素。

我希望我有道理，也许代码会解释发生了什么。

下面是 todo-list 表单页面的 PHP 代码：

```
<div class="table table-todo">

    <?php include 'projects-add-task.php'; ?>

</div> 
```

以下是 的内容`projects-add-task.php`：

```
<div class="field">
<input type="text" name="task[]" />
<a href="#" title="Add Task Below" class="todo-add"><img src="images/icon-todo-add.png" alt="" onmouseover="this.src='images/icon-todo-add-h.png'" onmouseout="this.src='images/icon-todo-add.png'" /></a>
<?php if ($_GET['show_delete'] == 'yes') { ?>
<a href="#" title="Delete This Task" class="todo-delete"><img src="images/icon-todo-delete.png" alt="" onmouseover="this.src='images/icon-todo-delete-h.png'" onmouseout="this.src='images/icon-todo-delete.png'" /></a>
<?php } ?>
<div style="clear: both;"></div>
</div> 
```

这是不能 100% 正确工作的 jquery：

```
$('.todo-add').live('click', function (e) { 
    e.preventDefault();
    $parent = $(this).parent('.field');     
    $.get('projects-add-task.php?show_delete=yes', function (data) { $parent.append(data); }, 'html');
});

$('.todo-delete').live('click', function (e) {  
    e.preventDefault();
    $(this).parent('.field').remove();
}); 
```

我不得不使用`live`图标`.todo-add`，因为它显然不适用于新附加的行。但是我不确定这是否对`.todo-delete`图标是必要的，但我这样做只是为了确定。

对此问题的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T02:11:53.787

我认为你需要`after`而不是`append`：

```
function (data) { $parent.append(data); } 
```

应该

```
function (data) { $parent.after(data); } 
```

此外，`live`现在实际上已弃用。你应该使用`on`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T02:13:51.783

您正在添加许多带有“字段”类的 div，然后要求 jquery 在删除按钮上删除它们。

您需要为每一行拥有唯一的 ID，然后删除该 ID 元素 os 只需与删除按钮的父级一起使用，无需在 parent() 中指定“.field”

```
$('.todo-delete').live('click', function (e) {  
    e.preventDefault();
    $(this).parent().remove();
}); 
```

# c++ - CMake 没有正确链接？

> ID：13446762
> 
> 赞同：0
> 
> 时间：2012-11-19T02:07:04.313
> 
> 标签：c++, linker, cmake

我目前正在尝试调试一个程序，该程序相当确定不运行。我想这个错误很简单，我对 c++ 和使用 cmake 真的很陌生。

这是错误消息：

```
Scanning dependencies of target viewer

[ 25%] Building CXX object CMakeFiles/viewer.dir/Main.cpp.o
[ 50%] Building CXX object CMakeFiles/viewer.dir/TriangleMesh.cpp.o
[ 75%] Building CXX object CMakeFiles/viewer.dir/Camera.cpp.o
[100%] Building CXX object CMakeFiles/viewer.dir/MainWindow.cpp.o
Linking CXX executable viewer
CMakeFiles/viewer.dir/MainWindow.cpp.o:MainWindow.cpp:function
MainWindow::mousePressed(int, int, int, int): error: undefined reference
to 'MainWindow::mouse_button'
CMakeFiles/viewer.dir/MainWindow.cpp.o:MainWindow.cpp:function
MainWindow::mousePressed(int, int, int, int): error: undefined reference
to 'MainWindow::mouse_state'
CMakeFiles/viewer.dir/MainWindow.cpp.o:MainWindow.cpp:function
MainWindow::render(): error: undefined reference to 'MainWindow::cam'
CMakeFiles/viewer.dir/MainWindow.cpp.o:MainWindow.cpp:function
MainWindow::render(): error: undefined reference to 'MainWindow::mesh'
CMakeFiles/viewer.dir/MainWindow.cpp.o:MainWindow.cpp:function
MainWindow::mouseMove(int, int): error: undefined reference to
'MainWindow::mouse_button'
CMakeFiles/viewer.dir/MainWindow.cpp.o:MainWindow.cpp:function
MainWindow::mouseMove(int, int): error: undefined reference to
'MainWindow::old_y'
CMakeFiles/viewer.dir/MainWindow.cpp.o:MainWindow.cpp:function
MainWindow::mouseMove(int, int): error: undefined reference to
'MainWindow::old_x'
CMakeFiles/viewer.dir/MainWindow.cpp.o:MainWindow.cpp:function
MainWindow::mouseMove(int, int): error: undefined reference to
'MainWindow::cam'
CMakeFiles/viewer.dir/MainWindow.cpp.o:MainWindow.cpp:function
MainWindow::mouseMove(int, int): error: undefined reference to
'MainWindow::cam'
CMakeFiles/viewer.dir/MainWindow.cpp.o:MainWindow.cpp:function
MainWindow::mouseMove(int, int): error: undefined reference to
'MainWindow::mouse_button'
CMakeFiles/viewer.dir/MainWindow.cpp.o:MainWindow.cpp:function
MainWindow::mouseMove(int, int): error: undefined reference to
'MainWindow::old_x'
CMakeFiles/viewer.dir/MainWindow.cpp.o:MainWindow.cpp:function
MainWindow::mouseMove(int, int): error: undefined reference to
'MainWindow::old_y'
CMakeFiles/viewer.dir/MainWindow.cpp.o:MainWindow.cpp:function
MainWindow::mouseMove(int, int): error: undefined reference to
'MainWindow::mouse_button'
CMakeFiles/viewer.dir/MainWindow.cpp.o:MainWindow.cpp:function
MainWindow::mouseMove(int, int): error: undefined reference to
'MainWindow::cam'
CMakeFiles/viewer.dir/MainWindow.cpp.o:MainWindow.cpp:function
MainWindow::MainWindow(Camera*, int, char**): error: undefined reference
to 'MainWindow::old_x'
CMakeFiles/viewer.dir/MainWindow.cpp.o:MainWindow.cpp:function
MainWindow::MainWindow(Camera*, int, char**): error: undefined reference
to 'MainWindow::old_y'
CMakeFiles/viewer.dir/MainWindow.cpp.o:MainWindow.cpp:function
MainWindow::MainWindow(Camera*, int, char**): error: undefined reference
to 'MainWindow::mesh'
CMakeFiles/viewer.dir/MainWindow.cpp.o:MainWindow.cpp:function
MainWindow::MainWindow(Camera*, int, char**): error: undefined reference
to 'MainWindow::mesh'
CMakeFiles/viewer.dir/MainWindow.cpp.o:MainWindow.cpp:function
MainWindow::MainWindow(Camera*, int, char**): error: undefined reference
to 'MainWindow::mesh'
CMakeFiles/viewer.dir/MainWindow.cpp.o:MainWindow.cpp:function
MainWindow::getInstance(Camera*, int, char**): error: undefined reference
to 'MainWindow::instance'
CMakeFiles/viewer.dir/MainWindow.cpp.o:MainWindow.cpp:function
MainWindow::getInstance(Camera*, int, char**): error: undefined reference
to 'MainWindow::instance'
collect2: ld returned 1 exit status
make[2]: *** [viewer] Error 1
make[1]: *** [CMakeFiles/viewer.dir/all] Error 2
make: *** [all] Error 2 
```

所以，代码编译得很好，它只是不能真正链接 4 个源文件之一。

### 编辑：

这是 MainWindow.hpp 的要点

```
class MainWindow
{
        private:
                MainWindow() {}
                MainWindow(const MainWindow&) {}
                MainWindow(Camera *cam, int argc, char* argv[]);
                static MainWindow *instance;
                static Camera *cam;
                static TriangleMesh mesh;
                static int old_x;
                static int old_y;
                static int mouse_button;
                static int mouse_state;
                static void mousePressed(int button, int state, int x, int y);
                static void initGlut(int argc, char* argv[]);
                static void initCallbacks();
                static void render();
                static void reshape(int w, int h);
                static void keyPressed(unsigned char key, int x, int y);
                static void mouseMove(int x, int y);

        public:
                static MainWindow* getInstance(Camera *cam, int argc, char* argv[]);
                static void setCamera(Camera* cam);
                static void setMesh(TriangleMesh* mesh);
                static void destroy();
}; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T02:16:08.370

如果你有静态成员变量，它们也需要被*定义*，而不仅仅是*声明*：

在头文件中：

```
class Foo
{
    ...

    // This declares a static member variable
    static int static_member_variable;

    ...
}; 
```

在源文件中：

```
// This defines the variable
int Foo::static_member_variable; 
```

# iphone - Nstimer 计数错误

> ID：13446766
> 
> 赞同：0
> 
> 时间：2012-11-19T02:07:50.660
> 
> 标签：iphone, ios, nstimer, counter

我对 NSTimer 有疑问。我每 100 毫秒开始并重复一次，我有一个计数器来检查我是否运行了 10 秒。问题是它在近 1 分钟内停止，而不是在 10 秒内停止。这是我的代码

```
timer = [NSTimer scheduledTimerWithTimeInterval:0.1 target:self selector:@selector(checkTimer) userInfo:nil repeats:YES];

-(void)checkTimer
{

    timerCount += 1;

        if(timerCount == 1)
        {
                NSLog(@"start");
        }

        if(timerCount == 103)
        {
            NSLog(@"i got it");
        }
} 
```

这是日志：

```
2012-11-19 08:57:42.063 Karagram[11708:540b] start
[Switching to process 8707 thread 0x2203]
2012-11-19 08:58:39.514 Karagram[11708:540b] i got it 
```

我不明白为什么它错了。有人可以告诉我为什么吗？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T02:57:06.517

NSTimers 不能保证在超过 100 毫秒左右的范围内准确。 [NSTimer 文档](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSTimer_Class/Reference/NSTimer.html)说：

> 定时器不是实时机制；它仅在已添加计时器的运行循环模式之一正在运行并且能够检查计时器的触发时间是否已过时触发。由于典型的运行循环管理的各种输入源，计时器的时间间隔的有效分辨率被限制在 50-100 毫秒的数量级。如果在长时间调用期间或运行循环处于不监视计时器的模式下发生计时器的触发时间，则计时器不会触发，直到下一次运行循环检查计时器。因此，定时器触发的实际时间可能是计划触发时间之后的一个重要时间段。

通过让它每 100 毫秒触发一次，您正在加剧错误，因为如果它每 100 毫秒关闭 50 毫秒，那么到 10 秒过去时，它可能与您的预期相差甚远。

如果您想在 10 秒后采取一些行动，为什么不将计时器设置为在 10 秒后触发呢？

```
NSLog( @"start" );
timer = [NSTimer scheduledTimerWithTimeInterval:10.0 target:self selector:@selector(checkTimer) userInfo:nil repeats:YES];

-(void)checkTimer
{
    NSLog(@"i got it");
} 
```

另外，您是否在主线程上进行流式传输？NSTimers 在主运行循环上工作，所以如果你阻塞了主线程，定时器在它被解除阻塞之前不会触发。

# iphone - 顶部和底部的标签栏

> ID：13446769
> 
> 赞同：1
> 
> 时间：2012-11-19T02:07:59.490
> 
> 标签：iphone, ios, ipad, uitabbarcontroller

我想开发一个 ipad 应用程序，它在屏幕顶部和底部都有一个菜单。

屏幕顶部有四个按钮，底部标签栏有10+个按钮，可以横向滚动。

如何将根视图控制器编写为此操作的框架？

我应该自定义 UIViewController 类还是 UITabBarViewController？

谢谢

**编辑：**

很抱歉不清楚。让我重申我的问题。

实际上我的应用程序将具有以下层次结构。

![在此处输入图像描述](../Images/1c8108f779bc368e11d61771fa3e9dd7.png)

“首页”只是供用户选择语言的页面（视图控制器）。选择语言后，将显示“菜单页面”视图控制器。

从下面的菜单页面和所有视图控制器（VC）开始，页面布局是这样的。

![在此处输入图像描述](../Images/c37a13f84235f945da27a16c421f15af.png)

如您所见，有顶部菜单和底部菜单。单击按钮，应用程序将快速跳转到相应的视图控制器（树中的第 3 级，VC1、VC2、VC3 等）。对于每个视图，每个页面上都有一个 BACK 按钮，单击该按钮将返回到父视图控制器。

我正在考虑通过使用标签栏视图控制器和导航视图控制器来实现这一点，但我仍然不清楚如何实现这一点。

或者也许我应该只使用导航视图控制器并隐藏除后退按钮之外的顶部工具栏，并显示一个覆盖 UIView 作为菜单，它位于所有其他 UIView 之上。

有人可以帮助我吗？谢谢。

由于这是我的应用程序的最外层容器，我希望在开始时正确执行它..

对不起我的长问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T03:50:52.190

如果你真的想为这个逻辑开发一个框架。你需要根据你的需要创建Manager、ViewController、View、DAO、Model等类。

我假设您想将按钮动态添加到标签栏（如果它是可滚动的，则它必须是滚动视图）。您可以将工具栏用于上视图，但它不会与底视图同步（视觉上）。在这种情况下，您将不得不创建自己的自定义视图，使其看起来像一个标签栏。

管理器基本上会跟踪视图上的所有按钮以及事件和操作的不同状态，并且可以通过视图控制器的静态方法访问相同的信息。

好吧，您没有详细说明您的需求，因此很难预测整个架构。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-20T21:52:53.117

您需要一个容器视图控制器来管理 VC 1-4 的选择。

> 单击哪个将返回父视图控制器

父视图控制器用于表示容器视图控制器方案中的容器 vc - 我不确定这就是您在此评论中的意思。后退按钮到底在哪里？

有关容器 VC 的更多信息，请参阅此链接。

[https://developer.apple.com/library/ios/featuredarticles/ViewControllerPGforiPhoneOS/CreatingCustomContainerViewControllers/CreatingCustomContainerViewControllers.html](https://developer.apple.com/library/ios/featuredarticles/ViewControllerPGforiPhoneOS/CreatingCustomContainerViewControllers/CreatingCustomContainerViewControllers.html)

您应该能够在容器 VC 的内容视图中嵌入标签栏控制器。*应该可以，*但如果子 vc 之间有很多通信，它可能真的有问题。

困难的部分是后退按钮。基本上，它必须是一个返回到 VC 1-4 的按钮，具体取决于您所在的部分。最简单的方法是确保在循环视图控制器时，传递有关哪个 VC 是当前子项，以便在您按下它时知道要导航到哪个 VC。

# django - 使用多个数据库时出现南方错误：django.db.utils.ConnectionDoesNotExist：连接 foo 不存在

> ID：13446770
> 
> 赞同：4
> 
> 时间：2012-11-19T02:08:51.047
> 
> 标签：django, django-south

我有 2 个具有以下数据库设置的 Django 项目：

```
DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.postgresql_psycopg2',
        'NAME': 'db1', # 'db2' for second db
        ...
    }
} 
```

尝试使用命令同步第二个数据库时

> python manage.py syncdb --database=db2

我收到错误

> django.db.utils.ConnectionDoesNotExist：连接 db2 不存在

当我使用其他一些命令时，South 使用第一个项目的迁移并用错误的表填充 db2。如何正确同步/迁移单个 Django + South 实例服务的多个项目？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-10-26T16:53:11.303

数据库同步方法不采用**--database**选项中的**NAME**键。如前所述，您的**db1的****默认值**仅适用。所以你需要为你的**db2**设置一个额外的数据库字典。

# c - Valgrind 给了我大小为 4 的无效写入地址 0x4037268 未堆栈、malloc 或（最近）释放

> ID：13446772
> 
> 赞同：0
> 
> 时间：2012-11-19T02:09:18.800
> 
> 标签：c

```
void merge(int left, int mid, int right)
{
  // sublist sizes
  int left_size = mid - left + 1;
  int right_size = right - mid;

  // counts
  int i, j, k;

  // create left and right arrays
  B left_list = malloc(left_size*sizeof(B));
  B right_list = malloc(right_size*sizeof(B));

  for (i = 0; i < left_size; i++)
    left_list[i] = list[left + i];

  for (j = 0; j < right_size; j++)
    right_list[j] = list[mid + j + 1];

  // reset counts
  i = 0; j = 0;

  for (k = left; k <= right; k++)
  {
    if (j == right_size)
      list[k] = left_list[i++];
    else if (i == left_size)
      list[k] = right_list[j++];
    // here we call the given comparision function
    else if (compar(&left_list[i], &right_list[j]) < 0)
      list[k] = left_list[i++];
    else
      list[k] = right_list[j++];
  }
}

void sort(int left, int right)
{
  if (left < right)
  {
    // find the pivot point
    int mid = (left + right) / 2;

    // recursive step
    sort(left, mid, compar);
    sort(mid + 1, right, compar);

    // merge resulting sublists
    merge(left, mid, right, compar);
  }
} 
```

我只是尝试用 valgrind 测试我的程序，并在下面得到了这个。

```
==8679== Invalid write of size 4
==8679==    at 0x8048A30: merge (program.c:96)
==8679==    by 0x8048BF5: sort (program.c:116)
==8679==    by 0x8048C21: user_interface (program.c:124)
==8679==    by 0x8048E99: main (program.c:175)
==8679==  Address 0x4037268 is not stack'd, malloc'd or (recently) free'd 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T02:24:06.270

您的两个函数（`sort`和`merge`，即）都隐含假设正在排序/合并的区间的右端包含在正在排序的范围内。这是不寻常的：更典型的方法是包括区间的左侧，但排除右侧。例如， 的调用`sort`可能如下所示：

```
#define MAX 100
...
int list[MAX];
...
void sort(0, MAX, myComparator); 
```

这不适用于您的实现：它需要一个如下所示的调用：

```
void sort(0, MAX-1 /* <<== Here */, myComparator); 
```

请检查您的呼叫方式`sort`；通过包含右区间应该可以解决问题。

# session - ASP.NET 中 HttpApplication 的 Java (Tomcat) 等效项

> ID：13446774
> 
> 赞同：0
> 
> 时间：2012-11-19T02:09:56.490
> 
> 标签：session, tomcat, memcached, replication, cluster-computing

我正在为 ASP.NET 中的 HttpApplication 寻找 Java (Tomcat) 等效项。我的业务需要在运行时全局存储一些临时数据。如果我使用 ASP.NET，我想在 HttpApplication 中执行此操作。Tomcat 的 Java 方法是什么？

此外，我在后端使用具有非会话粘性的 Tomcat 集群 + memcached 会话管理器。会话和应用程序数据都有望实时复制。

任何意见？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T23:57:49.497

等效的是 ServletContext，您可以在 servlet 中使用 getServletContext 访问它。在 JSP 中，您可以使用应用程序变量访问它。

您可以将数据存储在上下文属性 Map 中。

Tomcat 集群复制会话和 servlet 上下文属性

# wpf - 如何在鼠标悬停时更改多个属性

> ID：13446776
> 
> 赞同：1
> 
> 时间：2012-11-19T02:10:25.617
> 
> 标签：wpf, xaml

我刚刚开始使用 WPF（如果问题太明显，我很抱歉），我设法将这种鼠标悬停样式放在一起。**背景颜色动画为较暗的颜色。我现在还想将文本设置为白色动画**，这样更容易阅读。

这就是我尝试添加它的方式，但是当我将鼠标悬停在它上面时，它给了我错误“无法解析属性路径'TextBlock.Foreground'中的所有属性引用。验证适用的对象是否支持这些属性”。

```
<Border Background="#e6ebf3" CornerRadius="0,10,0,10" >
    <Border.Style>
        <Style TargetType="Border">
            <Setter Property="Background" Value="#e6ebf3" />
            <Setter Property="TextBlock.Foreground" Value="Black"/>
            <Style.Triggers>
                <EventTrigger RoutedEvent="UIElement.MouseEnter">
                    <BeginStoryboard>
                        <Storyboard>
                            <ColorAnimation Duration="0:0:0.1" Storyboard.TargetProperty="Background.Color" To="#6d809b" />
                            <ColorAnimation Duration="0:0:0.1" Storyboard.TargetProperty="TextBlock.Foreground" To="white" />
                        </Storyboard>
                    </BeginStoryboard>
                </EventTrigger>
                <EventTrigger RoutedEvent="UIElement.MouseLeave">
                     <BeginStoryboard>
                         <Storyboard>
                             <ColorAnimation Duration="0:0:0.1" Storyboard.TargetProperty="Background.Color" To="#e6ebf3" />
                            <ColorAnimation Duration="0:0:0.1" Storyboard.TargetProperty="TextBlock.Foreground" To="Black" />
                         </Storyboard>
                     </BeginStoryboard>
                </EventTrigger>
            </Style.Triggers>
         </Style>
     </Border.Style>........ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T02:35:50.827

我找到了一种不使用故事板或动画的替代方法，所以我会发布它以防万一。不过，仍然想知道原来的那个。

```
<Border CornerRadius="0,10,0,10" >
<Border.Style>
     <Style TargetType="Border">
          <Setter Property="Background" Value="#e6ebf3" />
          <Setter Property="TextBlock.Foreground" Value="Black"/>

          <Style.Triggers>
               <Trigger Property ="IsMouseOver" Value="True">
                    <Setter Property= "Background" Value="#6d809b"/>
                    <Setter Property= "TextBlock.Foreground" Value="White"/>
               </Trigger>
          </Style.Triggers>
     </Style>
 </Border.Style>
 ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T04:23:01.040

间接属性定位，即 TextBlock.Foreground 在此处描述[http://msdn.microsoft.com/en-us/library/ms742451.aspx](http://msdn.microsoft.com/en-us/library/ms742451.aspx)。它基本上是在说，“嘿，我在类型按钮上找不到名为 TextBlock 的属性。” 它与 Background.Color 一起工作，因为背景属性确实存在于 Button 上，并且它是 ColorBrush 类型，它本身具有 Color 类型的属性。

# amazon-ec2 - 如何通过 php 使用 iam 配置文件创建亚马逊 ec2 实例？

> ID：13446777
> 
> 赞同：1
> 
> 时间：2012-11-19T02:10:47.143
> 
> 标签：amazon-ec2, amazon-web-services, amazon-iam

我想知道如何使用 php sdk 创建一个新的 amazon ec2 实例，并在启动时为其提供给定角色的 IAM 配置文件。

这显然是一个新功能，因此此时现实世界的示例很少。任何帮助将不胜感激，下面来自亚马逊的链接很诱人，但跳过了使用从 SDK 分配的 IAM 配置文件实际创建实例的部分，而是使用管理控制台（这违背了整个目的，对吗？）。

[http://docs.amazonwebservices.com/AWSSdkDocsPHP/latest/DeveloperGuide/php-dg-roles.html](http://docs.amazonwebservices.com/AWSSdkDocsPHP/latest/DeveloperGuide/php-dg-roles.html)

我假设它是 run_instances 的一个选项，但我想它可以通过 IAM 对象代替？

谢谢，

R

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T23:05:33.290

好的，这是基于最终为我工作的 SDK 答案：

```
$options = array(
            'InstanceType'=>$this->instance_size,
            'KeyName'=>'my key',
            'SecurityGroup'=>'mysecgroup',
            'UserData' => base64_encode($user_data_contents),
                'Placement' => array(
            'AvailabilityZone' => $this->availability_zone
            ),

      'IamInstanceProfile' => array(
                'Arn' => 'arn:aws:iam::9999999999999:instance-profile/yourIAMNameHere'
                )

        ); 
```

回想起来，这并不是一个特别难的答案——我在这里包括帮助使 SDK 文档更加丰富，因为这是 EC2 的一个新功能

# bash - 阻止 bash 在字符串中转义字符串

> ID：13446781
> 
> 赞同：1
> 
> 时间：2012-11-19T02:11:31.457
> 
> 标签：bash, ps1

我一直在搞乱`.bashrc`，试图获得一种新的颜色`PS1`，如果我使用的是 Python virtualenv，它可以自动告诉我。我对 Bash 非常非常陌生，所以经过一些研究后，我创建了这样的东西（为了清楚起见进行了简化）：

```
function virtualenv {
    if [ -n "$VIRTUAL_ENV" ]; then
        VIRTUAL=" $BLACK($GREEN`basename $VIRTUAL_ENV`$BLACK)"
    else
        VIRTUAL=""
    fi
}

PS1="$BLUE\u@\h\$VIRTUAL $YELLOW\\$ $RESET" 
```

希望`$BLACK`and`$GREEN`变量将被解释为`PS1`，但我得到了这样的东西：

```
gabe@notebook \e[30m(\e[32mmyproject\e[30m) $ 
```

好像 Bash`VIRTUAL`自己在逃避我的整个变量...我已经尝试了斜线、引号和命令的所有组合，我的有限技能允许...有帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T13:28:58.647

当您将字符串括在单引号中时，您可以防止 bash 替换字符串中的变量

```
VIRTUAL=' $BLACK($GREEN`basename $VIRTUAL_ENV`$BLACK)' 
```

这会将字符串按原样存储在变量中`VIRTUAL`。如果你想替换它的一部分，你必须关闭单引号并将替换部分嵌入到双引号中

```
A=x
B=y
C=z

V='$A$B$C'
W='$A'"$B"'$C' 
```

将离开`V`as`$A$B$C`和`W`as `$Ay$C`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T13:34:43.913

首先—— virtualenv 函数不会像你那样被调用。以下实际上在评估`virtualenv`期间调用您的函数（最好不要命名） ：`PS1`

```
function virtualenv_prompt {
    [[ -n $VIRTUAL_ENV ]] && \
      printf %s " $BLACK($GREEN"'$(basename "$VIRTUAL_ENV"'"$BLACK)"
}

PS1="$BLUE\u@\h"'$(virtualenv_prompt)'" $YELLOW\\$ $RESET" 
```

也就是说，这仍然无法按照您想要的方式工作，因为`\[`和`\]`转义（有必要防止外壳将颜色代码计算为用于换行的打印字符）需要直接包含在 中`PS1`，并且不能替换为.

为了使它正确，您不仅需要添加这样的转义符（如果它们不在代码定义中），还需要将颜色代码移出`virtualenv`函数并无条件地存在（即使颜色正在切换回来并且第四，没有可见的内容）。另见[http://mywiki.wooledge.org/BashFAQ/053](http://mywiki.wooledge.org/BashFAQ/053)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T13:35:27.640

您在这里转义了美元符号: `\$VIRTUAL`，因此`$VIRTUAL`在分配给时不要扩展`PS1`（因为它变成了文字`$`，你看）。

因此，`$VIRTUAL`只有在生成提示时才会展开，这就是为什么您看到的不是*格式化，而是**定义格式化的字符串*。

`\`基本上你只需要在`\$VIRTUAL`分配给时摆脱`PS1`

# javascript - jQuery 如何应用于每个块

> ID：13446783
> 
> 赞同：0
> 
> 时间：2012-11-19T02:11:34.530
> 
> 标签：javascript, jquery

我从 PHP/MYSQL 得到文本输出，并使用以下 jQuery 来限制文本并做一些显示/隐藏效果。它适用于第一个块，但如果我通过 php 循环项目，所有块都会更改为相同的内容，有没有办法让 jQuery 适用于每个块？

```
function excerpt(str, nwords) {
    var words = str.split(' ');
    words.splice(nwords, words.length - 1);
    return words.join(' ') + '&hellip;';
}

var $div = $('.container');
var excerpt = excerpt($div.text(), 30);

$div.data('html', $div.html()).html( excerpt );

$('button').click(function() {
    var isHidden = $(this).text() == 'Show';
    $div.html( isHidden ? $div.data('html') : excerpt);
    $(this).text( isHidden ? 'Hide' : 'Show' );
});​ 
```

HTML：

```
<div class="container">
    Donec vitae mollis leo. Quisque ut metus ac velit porttitor sollicitudin quis mattis purus. Quisque id risus id sem porta gravida eu nec neque. Praesent non odio nibh, vitae tincidunt sapien. Maecenas rutrum mollis mauris, eu condimentum nunc viverra nec. Donec fringilla imperdiet volutpat. Morbi in sem ante. Phasellus libero purus, viverra a aliquam ac, eleifend eu nisl. Etiam quis odio nec quam rhoncus iaculis ac quis velit. Sed ut lacus quis enim tempor ullamcorper. Donec odio ligula, porta et bibendum aliquam, blandit vitae lacus.
        Donec vitae mollis leo. Quisque ut metus ac velit porttitor sollicitudin quis mattis purus. Quisque id risus id sem porta gravida eu nec neque. Praesent non odio nibh, vitae tincidunt sapien. Maecenas rutrum mollis mauris, eu condimentum nunc viverra nec. Donec fringilla imperdiet volutpat. Morbi in sem ante. Phasellus libero purus, viverra a aliquam ac, eleifend eu nisl. Etiam quis odio nec quam rhoncus iaculis ac quis velit. Sed ut lacus quis enim tempor ullamcorper. Donec odio ligula, porta et bibendum aliquam, blandit vitae lacus.
    <div class="myimage">picture</div>
    <div class="myimage">picture</div>
    <div class="myimage">picture</div>
</div>
<button>Show</button>

<div class="container">
  Curabitur sed mauris at eros viverra fringilla in a ipsum. Aliquam erat volutpat. Integer quis arcu mauris. Cras diam dui, porta non egestas in, auctor ornare nunc. Donec quam ligula, vulputate quis sodales ultricies, gravida vitae augue. Ut ut nibh nisi. Phasellus placerat odio sed mauris accumsan tincidunt. Nunc orci eros, posuere sollicitudin posuere eget, condimentum imperdiet mi. Sed ornare felis sit amet lectus viverra at blandit erat aliquam. Sed laoreet ante consequat elit vestibulum commodo. In sed rutrum lorem. Integer sagittis placerat mi, at tristique nunc consectetur sit amet. Quisque nec nulla eget lacus condimentum iaculis eget id neque. Praesent sagittis, elit non porttitor cursus, justo elit lobortis magna, vitae interdum magna arcu et sem.
    <div class="myimage">picture 3</div>
    <div class="myimage">picture 5</div>
    <div class="myimage">picture 6</div>
</div>
<button>Show</button>
​ 
```

示例：http: [//jsfiddle.net/BqesP/](http://jsfiddle.net/BqesP/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T02:16:21.857

问题是您在单击事件处理程序中引用了整个容器元素集。因此，任何时候单击任何按钮，您都会将该功能应用于所有`.container`元素。这是修复它的快速更改：

```
function excerpt(str, nwords) {
    var words = str.split(' ');
    words.splice(nwords, words.length - 1);
    return words.join(' ') + '&hellip;';
}

var $div = $('.container');

$div.each(function() {
    var theExcerpt = excerpt($(this).text(), 30);
    $(this).data('html', $(this).html()).html( theExcerpt );
});

$('button').click(function() {
    var isHidden = $(this).text() == 'Show';
    var $div = $(this).prev();
    var theExcerpt = excerpt($div.text(), 30);
    $div.html( isHidden ? $div.data('html') : theExcerpt);
    $(this).text( isHidden ? 'Hide' : 'Show' );
});​ 
```

*通过在*函数中获取目标容器，您可以确保只影响您想要影响的元素。

# java - 预览回调不起作用

> ID：13446784
> 
> 赞同：0
> 
> 时间：2012-11-19T02:11:45.223
> 
> 标签：java, android

我正在开发一个需要在 previewcallback() 函数中处理预览的每一帧的android应用程序，我的代码是这样的：

```
Camera c = null;

        try {
            c = Camera.open(1); // attempt to get a Camera instance

        }
        catch (Exception e){
            // Camera is not available (in use or does not exist)
        }
        Camera.Size csize = c.getParameters().getPreviewSize();
        int mPreviewHeight = csize.height; //
        int mPreviewWidth = csize.width;
        Camera.Parameters parameters = c.getParameters();
        parameters.setPictureSize(800, 800);
       // parameters.setPreviewSize(700, 700);
        parameters.set("orientation", "portrait");
        c.setDisplayOrientation(90);
        c.setParameters(parameters);
        mPreview = new CameraPreview(this, c);
        FrameLayout preview = (FrameLayout) findViewById(R.id.camera_preview);

        preview.addView(mPreview);
        final PreviewCallback mPicture = new PreviewCallback() {

            public void onPreviewFrame(byte[] data, Camera camera)  
            { 
                    try 
                    { 
                            BitmapFactory.Options opts = new BitmapFactory.Options(); 
                            Bitmap bitmap = BitmapFactory.decodeByteArray(data, 0, data.length);//,opts); 
                            Log.i("file","Bitmap captured");
                    } 
                    catch(Exception e) 
                    {

                    } 
            } 

        };

        c.setPreviewCallback(mPicture); 
```

但看起来日志“位图捕获”从未显示，这意味着 previewcallback 功能无法正常运行，有人可以帮我解决这个问题吗？先感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T03:31:32.927

您的 CameraPreview 课程中有什么？

我猜你在哪里打电话`c.startPreview()`？

# matlab - 每当 m 文件执行停止时在 MATLAB 中运行默认脚本

> ID：13446785
> 
> 赞同：5
> 
> 时间：2012-11-19T02:11:51.023
> 
> 标签：matlab

每当 m 文件的执行停止时，是否可以让 matlab 运行默认脚本？而且我不是指退出matlab时运行的finish.m，即使我通过按ctrl+C中断正在运行的脚本的执行，我也希望能够运行脚本。那可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T06:17:37.813

你可以使用`onCleanup`. 当您提到 Ctrl+C 操作时，这突然出现在我的脑海中。

这是文档： http: [//www.mathworks.com/help/matlab/ref/oncleanup.html](http://www.mathworks.com/help/matlab/ref/oncleanup.html)

Loren 在这里有一些例子：http: [//blogs.mathworks.com/loren/2008/03/10/keeping-things-tidy/](http://blogs.mathworks.com/loren/2008/03/10/keeping-things-tidy/)

# php - 根据数组中的值从数据库中获取值

> ID：13446787
> 
> 赞同：0
> 
> 时间：2012-11-19T02:11:55.263
> 
> 标签：php, arrays, codeigniter, populate

我需要根据数组中的值填充下拉列表。这是我的代码。

假设用户的 id 为 1,2,3。然后必须选择与这些 id 对应的 table_group 并在下拉列表中显示。也不应该有任何重复值，就像在这种情况下 id 2 和 3 值 23 重复一样，在这种情况下，只会采用一个值。这里的 $table_id 是从 USERS TABLE 中获取的。

```
 $mod = explode(',',$table_id);
     $mod = array('1','2','3')
     $res = array();

     function addItems($items, $arr) {
        foreach ($items as $value) {
            if (!in_array($value, $arr)) {
                $arr[] = $value;
            }
        }

        return $arr;
     }

     $res = array();
     for ($i = $mod[0]; $i <= end($mod); $i++) {
        $query = $this->db->query("SELECT table_group FROM group where table_id = '$i'");
        $row = $query->row();
        $grp = $row->table_group;
        $group = explode(',', $grp);
        $res = addItems($group, $res);
     }
     return $res; 
```

它实际上工作，但这里发生的错误是假设用户选择 1,2,4。在此仅必须选择 table_group 值 1,2 和 4。但是使用我的代码，选择了 1,2,3,4 的值。如果它的 3、4、5 或 2、3、4 等，那么代码就可以正常工作。我该如何解决这个错误？只需要纠正代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T09:29:02.270

改变，

```
for ($i = $mod[0]; $i <= end($mod); $i++) {
$query = $this->db->query("SELECT table_group FROM group where table_id = '$i'"); 
```

到

```
for ($i = 0; $i < count($mod); $i++) {
$query = $this->db->query("SELECT module_group FROM module_group where module_id = '$mod[$i]'"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T05:24:23.247

不顾别人写的；

您有 2 个查询，您可以将它们放入关联的 ID 与 GROUP 数组中：

```
idVsgroups array
[1] = array(value11, value12, value 13)
[2] = array(value21, value 22, value 23)
[3] = array(value31, value 23)
[4] = array(value 41, value 13)
[5] = array(value 51) 
```

之后，如果选择了 1、2 和 3，请执行以下操作：

```
foreach ($selected as $key) { $result[] = $selected[$key] } 
```

哪个会将所有内容放入 $selected - 真的很容易吗？之后尝试使用 array_unique 或[执行这些人已经为您编写的操作](http://www.php.net/manual/en/function.array-unique.php#103195)。

# javascript - setTimeout 和 setInterval 一起——重复一个暂停

> ID：13446788
> 
> 赞同：1
> 
> 时间：2012-11-19T02:12:02.817
> 
> 标签：javascript

在 javascript 中，我需要执行以下操作，用伪代码编写：

```
REPEAT EVERY 5 SECONDS
    print 'One'
    wait 2.5 seconds
    print 'Two'
    wait 2.5 seconds 
```

我怎样才能做到这一点？我的（笨拙？）尝试如下：

```
a = setInterval(function() { 
     setTimeout(function(){print 'one'},0);
     setTimeout(function(){print 'two'},2500);
    },5000); 
```

改进？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T02:27:24.407

```
var counter = 0;

setInterval(function() { 
     console.log( counter++ % 2 ? 'one' : 'two' );
}, 2500); 
```

这是小提琴：http: [//jsfiddle.net/RvVD7/](http://jsfiddle.net/RvVD7/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-19T02:53:03.167

为什么要为此组合 setTimeout 和 setInterval 仍然是个谜，但无论如何：

```
setInterval(function() {
  console.log('one');
  setTimeout(function() {
    console.log('two');
  },2500);
}, 5000); 
```

# qt - Qt - GLUT - 顶点着色器程序链接

> ID：13446790
> 
> 赞同：2
> 
> 时间：2012-11-19T02:12:07.267
> 
> 标签：qt, opengl, glut, vertex-shader

我用 OpenCL 和 GLUT 函数编写了一个 N-Body/GPU 程序，它运行良好。我现在尝试将其转换，以便将主 GLUT 窗口转换为具有 Qt 图形界面的 QGLWidget 子类（“此处为 GLWidget”）。

我的问题是“程序顶点着色器”链接失败。这是源文件“GLWidget.cpp”的这一部分，我在“`_compileProgram`错误”中得到`Failed to link program`：

```
extern const char *vertexShader;

void GLWidget::GLInit()
{
    LoadGLTextures();  // load the textures.
    glClearColor(0.0 ,0.0, 0.0, 0.0);
    glMatrixMode(GL_PROJECTION);    
    glLoadIdentity();

    m_program = _compileProgram(vertexShader);

    glClampColor(GL_CLAMP_VERTEX_COLOR, GL_FALSE);
    glClampColor(GL_CLAMP_FRAGMENT_COLOR, GL_FALSE);

    // memsize of GPU data 
    unsigned int memSize = sizeof(cl_double4) * 4 * Galaxy->getNumParticles();

    createVBO(memSize);
}

void GLWidget::createVBO(uint size)
{
    GLuint vbo;
    glGenBuffers(1, &vbo);
    glBindBuffer(GL_ARRAY_BUFFER, vbo);
    glBufferData(GL_ARRAY_BUFFER, size, Galaxy->pos, GL_DYNAMIC_DRAW);
}

GLuint GLWidget::_compileProgram(const char *vsource)
{
    GLuint vertexShader = glCreateShader(GL_VERTEX_SHADER);
    glShaderSource(vertexShader, 1, &vsource, 0);
    glCompileShader(vertexShader);
    GLuint program = glCreateProgram();
    glAttachShader(program, vertexShader);
    glLinkProgram(program);

    // check if program linked
    GLint success = 0;
    glGetProgramiv(program, GL_LINK_STATUS, &success);

    if (!success) {
        char temp[256];
        glGetProgramInfoLog(program, 256, 0, temp);
        printf("Failed to link program:\n%s\n", temp);
        glDeleteProgram(program);
        program = 0;
}
    return program;
} 
```

我在 shader.cpp 中使用以下顶点着色器程序：

```
#define STRINGIFY(A) #A

// vertex shader
const char *vertexShader = STRINGIFY(
uniform float pointRadius;  // point size in world space
uniform float pointScale;   // scale to calculate size in pixels
void main()
{
    // calculate window-space point size
    vec3 posEye = vec3(gl_ModelViewMatrix * vec4(gl_Vertex.xyz, 1.0));
    float dist = length(posEye);
    gl_PointSize = pointRadius * (pointScale / dist);

    gl_TexCoord[0] = gl_MultiTexCoord0;
    gl_Position = gl_ModelViewProjectionMatrix * vec4(gl_Vertex.xyz, 1.0);

    gl_FrontColor = gl_Color;
}
); 
```

我让你注意到“GLuint m_program”是子类 GLWidget 的数据成员。

任何人都可以看到有什么问题吗？

更一般地说，我可以像使用我的代码的第一个版本（即没有 Qt 用户界面）那样在 GLWidget 对象上直接使用相同的 GLUT 函数“ `glAttachShader`”、“ ”吗？`glLinkProgram`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T13:25:19.107

根据您所针对的 OpenGL / GLSL 版本，您是否需要一个简单的片段着色器才能成功链接？您提到了 OpenGL 4.1，但您的顶点着色器代码使用的是 GLSL 3.3 中已弃用的 GLSL 变量名称（例如，gl_TexCoord）

# python - 根据出现的最高值对 Pandas 数据框进行分组

> ID：13446791
> 
> 赞同：4
> 
> 时间：2012-11-19T02:12:10.040
> 
> 标签：python, pandas

我有一个带有 2 列的 pandas 数据框（下面的代码段）。我正在尝试使用 City 列来推断自治市镇（您会注意到一些需要替换的未指定值）。为此，我试图为每个城市显示出现次数最多的自治市镇并输出到字典，其中键是城市，值是该城市出现次数最多的自治市镇。

```
City        Borough

Brooklyn    Brooklyn
Astoria     Queens
Astoria     Unspecified
Ridgewood   Unspecified
Ridgewood   Queens 
```

因此，如果发现 Ridgewood 与皇后区配对 100 次、布鲁克林区 4 次和曼哈顿区 1 次，则该配对将是 Ridgewood : Queens。

到目前为止，我已经尝试过这段代码：

```
specified = data[['Borough','City']][data['Borough']!= 'Unspecified']
paired = specified.Borough.groupby(specified.City).max() 
```

乍一看，这似乎是正确的输出，但仔细检查后，输出根本不正确。有任何想法吗？

编辑：

尝试了以下建议：paired = specified.groupby('City').agg(lambda x: stats.mode(x['Borough'])[0])

我注意到一些自治市镇被截断，如下所示：

```
paired.Borough.value_counts()

#[Out]# QUEENS           58
#[Out]# MANHATTAN         7
#[Out]# STATEN ISLAND     4
#[Out]# BRONX             4
#[Out]# BROOKLYN          3
#[Out]# MANHATTA          2
#[Out]# STATE             1
#[Out]# QUEEN             1
#[Out]# MANHA             1
#[Out]# BROOK             1 
```

当然我可以手动替换截断的单词，但我很想知道原因是什么？

PS - 这是 DF 指定 FYI 的输出：

```
specified
#[Out]# <class 'pandas.core.frame.DataFrame'>
#[Out]# Int64Index: 719644 entries, 1 to 396225
#[Out]# Data columns:
#[Out]# Borough    719644  non-null values
#[Out]# City       651617  non-null values
#[Out]# dtypes: object(2)

specified.Borough.value_counts()
#[Out]# QUEENS           215382
#[Out]# BROOKLYN         208565
#[Out]# MANHATTAN        150016
#[Out]# BRONX             94648
#[Out]# STATEN ISLAND     51033 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-19T02:25:26.653

我相信这会做到：

```
from scipy import stats
d.groupby('City').agg(lambda x: stats.mode(x['Borough'])[0]) 
```

这为您提供了一个 DataFrame，其中 City 为索引，并且 Borough 列中最常见的自治市镇：

```
>>> d
         City      Borough
0    Brooklyn     Brooklyn
1     Astoria       Queens
2     Astoria       Queens
3     Astoria     Brooklyn
4     Astoria  Unspecified
5   Ridgewood  Unspecified
6   Ridgewood       Queens
7   Ridgewood       Queens
8   Ridgewood     Brooklyn
9   Ridgewood     Brooklyn
10  Ridgewood     Brooklyn
>>> d.groupby('City').agg(lambda x: stats.mode(x['Borough'])[0])
             Borough
City               
Astoria      Queens
Brooklyn   Brooklyn
Ridgewood  Brooklyn 
```

（如果您没有安装 scipy，则必须创建自己的“模式”功能，我想您可以使用`collections.Counter`. 但如果您使用的是 pandas，那么您也可以使用 Scipy。）

# html - HTML 图片编码

> ID：13446792
> 
> 赞同：0
> 
> 时间：2012-11-19T02:12:21.890
> 
> 标签：html, css, image

我在想。我在浏览器的网站选项卡上看到了网站图标，并且想知道如何为我的网站执行此操作。如果您不知道我在说什么，请看图片。![在此处输入图像描述](../Images/6187c06e1b071b8b2df288f47f63aeb1.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T02:17:23.463

```
<!DOCTYPE html 
      PUBLIC "-//W3C//DTD HTML 4.01//EN"
      "http://www.w3.org/TR/html4/strict.dtd">
<html lang="en-US">
<head profile="http://www.w3.org/2005/10/profile">
<link rel="icon" 
      type="image/png" 
      href="http://example.com/myicon.png">
[…]
</head>
[…]
</html> 
```

`<link>`标签是您配置图标的位置。

[此链接应该可以帮助您找到所需的内容。](http://www.w3.org/2005/10/howto-favicon)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-19T02:17:54.373

简单地说，只需添加：

```
<link rel="shortcut icon" type="image/x-icon" href="/favicon.ico"> 
```

在你的 html 头元素中。

# mysql - 在MYSQL中添加子和

> ID：13446794
> 
> 赞同：1
> 
> 时间：2012-11-19T02:12:53.517
> 
> 标签：mysql

我正在处理一个 mySQL 查询，希望能将每个表的小计加起来。

我为会员准备了一张桌子。这有他们的名字、唯一的 ID 和其他几个不相关的项目。另一个表旨在跟踪他们记录的社区服务。每个成员可以在其中多次。这些字段是 uniqueID（成员的外键）、auto_increment（因为它是主要的）、期限、小时数和位置。

我想要这个查询做的是添加给定术语的每个成员的小时数的总和。我所拥有的如下，但不幸的是，它只给了我第一个成员，每个成员的总数。有任何想法吗？

```
SELECT fName, lName, SUM(hours)
FROM members M, communityService S
WHERE S.term = 'f2012' && M.onid = S.member 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T02:15:59.720

您只是缺少一个`GROUP BY`汇总每个总和的子句`fName,lName`：

```
SELECT fName, lName, SUM(hours)
FROM members M, communityService S
WHERE S.term = 'f2012' && M.onid = S.member
GROUP BY lName, fName 
```

除 MySQL 之外的大多数 RDBMS 都会在您的查询中报告语法错误，但 MySQL 有一个独特的默认行为，即非确定性地选择匹配行来填充聚合中未出现在`GROUP BY`条款。这就是为什么你得到第一行的`lName, fName`.

查看[有关聚合函数和`GROUP BY`子句](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html)的文档。

建议使用显式`INNER JOIN`而不是隐式（逗号分隔`FROM`）。

```
SELECT
  fName,
  lName,
  SUM(hours) AS total_hours
FROM 
  members M, 
  INNER JOIN communityService S M.onid = S.member
WHERE 
  S.term = 'f2012' 
GROUP BY lName, fName 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T02:16:06.740

你需要一个`group by`子句，例如

```
SELECT fName, lName, SUM(hours)
FROM members
INNER JOIN communityService ON communityService.member = members.onid
WHERE communityService.term = 'f2012'
GROUP BY fName, lName   <--- modify as desired for your requirements. 
```

请注意，我已经使用现代连接语法重写了它。您的服务器没有“错误”，但最好将“惰性”连接语法留在垃圾头中。

# wpf - wpf datagrid - 从 ObservableCollection 中删除项目时数据网格不会刷新

> ID：13446795
> 
> 赞同：0
> 
> 时间：2012-11-19T02:13:46.443
> 
> 标签：wpf, wpf-4.0

我有一个 ObservableCollection 定义如下

```
private ObservableCollection<RelayConfig> _relayConfigs;
public ObservableCollection<RelayConfig> RelayConfigs { 
    get {return  _relayConfigs;}
    set { _relayConfigs = value; }
} 
```

这使用 ItemsSource 属性绑定到 wpf Datagrid 并如下所示填充

```
RelayConfigs = new ObservableCollection<RelayConfig>(unitOfWork.RelayConfigRepository.GetQueryable().Include(rc => rc.StandardContacts)); 
```

我正在从 ObservableCollection 中删除与这样的特定条件匹配的项目。

```
RelayConfigs.RemoveWhere(r => r.IsMarked); 
```

RemoveWhere 是 ObservableCollection 的 Extension 方法，定义如下

```
public static void RemoveWhere<T>(this ICollection<T> collection, Func<T, bool> predicate) {
    var i = collection.Count;
    while (i-- > 0) {
        var element = collection.ElementAt(i);
        if (predicate(element)) {
            collection.Remove(element);
        }
    }
} 
```

问题是当我使用上述设置从 ObservableCollection 中删除一些行时，我没有看到 DataGrid 得到刷新。这些行仍然在 DataGrid 中徘徊，而实际上它在 ObservableCollection 中并不存在。为什么 Datagrid 不刷新的任何想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T02:38:36.133

即使对行值应用更改，我也遇到了完全相同的事情。我找到的解决方案非常简单，否则......

YourDataGrid.Items.Refresh();

它告诉您的数据网格返回到显示项目的任何源，并使用最新值刷新它们。这样，不会丢失任何“绑定”，只是按照您的预期进行刷新。

# c - 如何在结构中引用结构的值？

> ID：13446797
> 
> 赞同：-3
> 
> 时间：2012-11-19T02:13:52.200
> 
> 标签：c

我正在尝试在结构中打印一些值。但是存在一些问题，因为该值用于结构的结构中。如何引用结构中结构的值？谢谢您的帮助 ;）

```
struct a {
  int a1;   <=====???
  int a2;
};
struct b {
  int a *b1;
  int b2;
};

struct b *data;
printf ("The value of a1 is %d\n", ???? ); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T02:27:51.843

`;`您在`a`结构中忘记了 a 。

`a`在结构内声明类型变量时`b`，您做错了。它应该是：

```
struct b {
    struct a b1;
    int b2;
}; 
```

我只是将其声明为结构类型，而不是指向结构的指针，因此您不必分配内存。

如果你真的想编译这段代码，你肯定需要一个入口点：

```
int main(void)
{
    struct b data;
    printf("The value of a1 is %d\n", data.b1.a1);
    return 0;
} 
```

正如你所看到的，我`b`在里面声明了一个结构体`main`，命名为`data`. 现在，您只需使用 . 即可访问其成员及其成员的成员`.`。如果它是一个指针（并且它被正确分配），那么你可以使用`->`而不是`.`.

我注意到的另一件事是您`%d`在[`printf`](http://www.cplusplus.com/reference/clibrary/cstdio/printf/)通话中拼写错误。

您还需要包含标准 I/O 标头才能使用`printf`：

```
#include <stdio.h> 
```

我真的希望这段代码只是一段糟糕而快速的代码，因为如果不进行*重大*修改，它就无法编译。

# javascript - 试图理解 JS 原型继承，为什么这不会触发？

> ID：13446806
> 
> 赞同：1
> 
> 时间：2012-11-19T02:15:07.413
> 
> 标签：javascript

我今天正在阅读主干的源代码，以尝试了解它是如何工作的。我尝试创建自己的初始化方法，该方法在实例化 myModel 时触发，但它似乎不起作用。（警报“默认你好”）

我在想，当 myModel 创建时，它会将“this.initialize.apply”复制到 myModel 中，并从 Model 的原型中继承初始化方法。如果 myMethod 没有初始化方法，它会查找链，但如果 myMethod 有它，它会使用它。根据我（错误地）的想法，myModel 将应用程序读取为“myModel.initialize.appy（this，arguments）”，但它似乎改为调用模型。

关于我要去哪里错的任何想法？[http://jsfiddle.net/LvjpK/](http://jsfiddle.net/LvjpK/)

```
function Model () {
    this.initialize.apply(this, arguments);
}

Model.prototype.initialize = function () {
    alert("Default Hello");
};

myModel = {
    initialize: function() {
        alert("Hello from myModel");
    }
};

var myModel = new Model(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T02:19:05.453

使用您的`new Model()`行，您正在创建一个全新的对象并将对它的引用放入`myModel`变量中。

`initialize`您之前定义的函数`myModel`绝对没有相关性。它永远不会发挥作用。只要你失去对它的引用，它就会被垃圾收集器拾取，`myModel`用它的新值覆盖变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T02:21:07.017

这可能更符合您的目标：

```
function Model () {
    this.initialize.apply(this, arguments);
}

Model.prototype.initialize = function () {
    alert("Default Hello");
};

function MyModel() {
    // Call the Model constructor function.
    Model.apply(this, arguments);
}

// Make MyModel inherit from Model
MyModel.prototype = Object.create(Model.prototype);

// Override the initialize method on MyModel
MyModel.prototype.initialize = function() {
    alert("Hello from myModel");
};

var myModel = new MyModel(); 
```

JSFiddle：http: [//jsfiddle.net/uh2ev/](http://jsfiddle.net/uh2ev/)

# vim - 寻找一种简单的方法来复制上面的单词并将其粘贴到 Vim 中的当前光标位置

> ID：13446807
> 
> 赞同：8
> 
> 时间：2012-11-19T02:15:12.720
> 
> 标签：vim

我想知道是否有命令可以直接复制光标上方的字符或单词并将其粘贴到当前位置？

例子：

```
sig1   : in   std_logic;
sig2   : in   std_logic;
sig3   : ^ 
```

考虑上面的情况，我的光标在那个`^`位置，我想复制`in std_logic;`并粘贴到当前位置。我知道的一种可行的方法是：

```
1\. Move cursor up
2\. Go into visual mode and highlight
3\. Yank
4\. Move cursor down
5\. Paste 
```

有没有更简单的方法可以做到这一点？或者我只能选择在 vimrc 中编写一个为我执行整个序列的映射？

编辑：我在互联网上找到了一个映射：

```
imap <F1> @<Esc>kyWjPA<BS>
nmap <F1> @<Esc>kyWjPA<BS>
imap <F2> @<Esc>kvyjPA<BS>
nmap <F2> @<Esc>kvyjPA<BS> 
```

但似乎格雷格的解决方案更容易！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-19T02:19:18.290

在插入模式下，您可以使用`Ctrl+Y`从上一行的相应字符位置复制字符。只需按住该键并等待键盘重复以使您到达该行的末尾。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-19T03:46:04.497

尽管 Greg 的答案很明确，但我已经修改了`ctrl`+`y`以逐字复制，因为我发现它对我的工作流程更有帮助。我的`~/.vimrc`文件中有以下内容：

```
inoremap <expr> <c-y> pumvisible() ? "\<c-y>" : matchstr(getline(line('.')-1), '\%' . virtcol('.') . 'v\%(\k\+\\|.\)') 
```

基本上，如果插入完成菜单（请参阅`:h ins-completion-menu`）不可见，则此表达式映射会从上面的行中复制一个单词。检查这种情况允许接受当前完成并离开完成模式（请参阅`:h complete_CTRL-Y`）。

如果插入完成菜单不可见，则会发生以下情况：

*   `getline(line('.')-1)`返回上一行
*   `virtual('.')`当前位置列位置
*   `'\%' . virtcol('.') . 'v\%(\k\+\\|.\)'`匹配光标位置的单词或任何字符
*   `matchstr()`返回与模式匹配的前一行的匹配部分。

如需更多帮助，请参阅：

```
:h :map-<expr>
:h pumvisible(
:h matchstr(
:h getline(
:h line(
:h virtcol(
:h /\%v
:h /\k 
```

# javascript - 检查开关是否有外壳

> ID：13446809
> 
> 赞同：3
> 
> 时间：2012-11-19T02:15:36.973
> 
> 标签：javascript, switch-statement

这在我正在处理的项目中出现过几次，我如何“测试”一个开关以确定它是否有一个案例而不实际执行它？

如果必须运行该案例，是否有有效的检查方法？

先感谢您。

IE

```
if (runSwitch(switch.hasCase("casename2"))) {
    alert("I've got it!");
}
else {
    alert("nope");
}

function runSwitch(case) {
    switch (case) { // Any way to skip the function?
        case "casename0" : alert("case"); break;
        case "casename1" : alert("case"); break;
        case "casename2" : alert("case"); break;
        case "casename3" : alert("case"); break;
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-19T02:23:16.943

无论您要检查每个案例，因此通过交换机运行它是最佳选择。如果您只想在运行之前检查案例是否存在，请将它们添加到数组并检查索引是否存在。

```
var cases = ['case1', 'case2'];
if (cases.IndexOf('case1') >= 0) {
    // the case is there
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T02:20:49.907

我知道确定 switch 是否有你的情况的唯一方法是实际运行 case 语句。如果您想知道 case 块是否实际运行，您可以返回一个布尔值。

```
function runSwitch(_case) {
    var hasCase = false;
    switch(_case) {
        case 'casename0': hasCase = true; alert('case'); break;
        case 'casename1': hasCase = true; alert('case'); break;
        case 'casename2': hasCase = true; alert('case'); break;
        case 'casename3': hasCase = true; alert('case'); break;
        default: break;
    }
    return hasCase;
} 
```

然后，您可以使用以下命令运行该语句：

```
if(runSwitch('casename4')) {
    //The case statement ran
}
else {
    //The case statement did not run
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T21:16:51.823

由于大卫施瓦茨没有发布答案，我将发布我的解决方案（这几乎不是解决方案）以及我理解的他的解决方案的演示和解释。

## 我的解决方案：

我只是停止使用开关并切换到 JSON（数组），因为我的开关的唯一目的是根据输入设置变量。

使用数组时，检查“case”是否存在很容易（只需 run `arrayVar["casename"]`，如果不存在则返回 undefined ）并且您不需要用额外的变量堵塞命名空间，运行代码稍微多一点困难，因为它需要作为字符串和`eval`ed 提供，但总的来说这对我来说效果更好。

无需发布演示或代码，因为它确实不是解决此问题的方法。

## 大卫施瓦茨的解决方案：

演示：http: [//jsfiddle.net/SO_AMK/s9MhD/](http://jsfiddle.net/SO_AMK/s9MhD/)

代码：

```
function hasCase(caseName) { return switchName(caseName, true); } // A function to check for a case, this passes the case name to switchName, sets "just checking" to true and passes the response along
function runSwitch(caseName) { switchName(caseName); } // This is actually a mostly useless function but it helps clarify things

function switchName(caseName, c) { // And the actual function, c is the "just checking" variable, I shortened it's name to save code
    switch(caseName) { // The switch
        case "casename0" : if (c) return true; alert("case"); break; // If c is true return true otherwise continue with the case, returning from inside a case is the same as calling break;
        case "casename1" : if (c) return true; alert("case"); break;
        case "casename2" : if (c) return true; alert("case"); break;
        case "casename3" : if (c) return true; alert("case"); break;
        default: if (c) return false; break; // If nothing else ran then the case doesn't exist, return false
    }
    return c; // Even I (:D) don't understand where this gets changed, but it works
} 
```

说明：根据需要对上面的代码进行注释。​</p>

# php - 如何获取 fetch_array 的“while else”类型逻辑？

> ID：13446814
> 
> 赞同：0
> 
> 时间：2012-11-19T02:16:25.340
> 
> 标签：php, sql, while-loop, fetch

我有这个代码：

```
while($m = $movieResult->fetch_array(MYSQLI_ASSOC)){
       // stuff happens here
}
return $stuff; 
```

它有效，但我真正需要的是检测 while 循环何时不像此示例那样运行，而是通过 while 循环的多次迭代：

```
if($m = $movieResult->fetch_array(MYSQLI_ASSOC)){
      // stuff happens here
      return $stuff;
}
else{
     return false;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T02:24:05.850

我不确定您使用的是哪个扩展（pdo/msqli/...），但我认为您可以在开始循环之前先查看是否有任何结果

**例子：**

```
if ($movieResult->num_rows > 0){
    ... your while loop here
}else{
   return false;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T02:20:03.247

```
$loopCount = 0
while(condition) {
    // stuff
    $loopCount++;
}
if ($loopCount > 0) {
    return $stuff;
}
return false; 
```

# spring - grails executor plugin - executorService 注入

> ID：13446816
> 
> 赞同：0
> 
> 时间：2012-11-19T02:16:48.397
> 
> 标签：spring, grails, code-injection, executor

尝试在我的服务中使用 executorService 注入，但失败了。当我阅读插件的文档时，它提到 executorService 是通过 conf/spring/resources.groovy 文件注入的。但是我的 resources.groovy 文件是空的（实际上是一个空的 bean 定义）并且不确定我是否需要在其中放一些东西。

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T02:41:51.377

你的服务是什么样的？您是否在服务的顶部有这个：

```
def executorService 
```

??

如果是这样，我还会确认您已安装该插件。它实际上不应该直接与您的 resources.groovy 文件混淆，它会在插件本身中进行弹簧注入。

您可以做的另一件事是吐出系统中所有已配置的 bean（在控制台中，如果您已安装控制台插件，或者将其放入您的 BootStrap.groovy 文件并记录答案：

```
grailsApplication.mainContext.beanDefinitionNames.sort().each {
 println it
} 
```

如果将它放在 BootStrap.groovy 中，还需要将其放在`def grailsApplication`BootStrap 类的顶部，以便注入 grailsApplication 对象。

# jquery - 用jquery替换文本属性

> ID：13446817
> 
> 赞同：0
> 
> 时间：2012-11-19T02:16:57.743
> 
> 标签：jquery

我有一个 jquerymobile 应用程序，它有这个标头代码

```
@section header
{
@Html.ActionLink("Cancelar", "DocsCancelar", "Docs", new { area = "Documentos" }, new { StrIdDocumento = "", data_icon="delete" })
<h1 id="NombreItem">Ubicacion 50 </h1>
@Html.ActionLink("Grabar", "DocsGuardar", "Docs", new { area = "Documentos",StrIdDocumento = SessionBag.Current.StrIdDocumento }, new { data_icon="check" })
} 
```

我想将文本更改为

```
<h1>****</h1> tag. 
```

我有这个 jquery 函数

```
$(data).find('NombreItem').each(function () {
    $('#NombreItem').replaceWith($(this).text());
}) 
```

但这替换了整个标签，我唯一需要更改的是**Ubicacion 50**为**Ubicacion 70**或类似的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T02:18:33.273

做就是了：`$('#NombreItem').text(newText);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T02:19:42.783

为什么不用 将**Ubicacion**文本包装在`span`标签中`id="replaceText"`，然后替换整个标签？

# c# - 使用另一种方法作为参数

> ID：13446818
> 
> 赞同：3
> 
> 时间：2012-11-19T02:17:10.857
> 
> 标签：c#, .net, methods, parameters

有没有办法将一个方法用作另一个方法的参数。例如，对于给定函数 f 返回 2f(3) 的方法。我明白，我的代码是不正确的：我试图传达我想要的想法。

```
static double twofof3(double f(double x))
{
    return 2*f(3);
}

static double f(double x)
{
   return x * x;
} 
```

twofof3 方法目前没有意义，因为它可以仅使用 f 方法来实现，但它更多是我感兴趣的概念。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-19T02:19:38.667

是的，您可以使用[`Func`](http://msdn.microsoft.com/en-us/library/bb549151.aspx)委托：

```
static double twofof3(Func<double,double> f)
{
    return 2*f(3);
}

static double function1(double x)
{
   return x * x;
}

// ...

Console.WriteLine(twofof3(function1)); 
```

# sql - PL/SQL - 数字或数值错误

> ID：13446819
> 
> 赞同：1
> 
> 时间：2012-11-19T02:17:13.197
> 
> 标签：sql, oracle, plsql

Oracle 给我错误“ORA-06502: PL/SQL: numeric or value error: character to number conversion error ORA-06512: at line 15 06502\. 00000 - “PL/SQL: numeric or value error%s”

```
DECLARE
idnumber NUMBER(10);
initials VARCHAR2(100);
userid VARCHAR2(100);
old_initials VARCHAR2(100);
CURSOR cursor1 IS
SELECT  s_first, s_last FROM tst_student ORDER BY s_first;
student cursor1%ROWTYPE;
BEGIN
FOR student IN cursor1 LOOP
idnumber :=1;
old_initials := SUBSTR(student.s_first,1,1) || SUBSTR(student.s_last,1,1);
initials := SUBSTR(student.s_first,1,1) || SUBSTR(student.s_last,1,1);
IF initials = old_initials THEN
userid := old_initials || '00' || idnumber + 1;
ELSE idnumber := 1;
END IF;
DBMS_OUTPUT.PUT_LINE(userid);
END LOOP;
END; 
```

它抱怨的那一行是 userid := old_initials || '00' || 身份证号码 + 1;

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T02:21:22.327

将该行更改为：

```
userid := old_initials || '00' || (idnumber + 1); -- use brackets around the calculation 
```

问题是 Oracle 正在尝试将连接文本添加到数字`1`中，即 Oracle 将您的原始行解析为`userid := (old_initials || '00' || idnumber) + 1`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T02:24:59.453

假设`user_id`是数字字段，用于`to_number`将字符串转换为数字：

```
 userid := to_number(old_initials || '00' || (idnumber + 1)); 
```

如果是`varchar`类型，

```
 userid := old_initials || '00' || (idnumber + 1); 
```

**编辑**：要增加，对于 NUMBER：

```
 idnumber := idnumber +1;
  userid := to_number(old_initials || '00' ||idnumber ); 
```

对于 VARCHAR：

```
 idnumber := idnumber +1;
 userid := old_initials || '00' || idnumber + 1; 
```

**EDIT1**：更正段：

```
 idnumber :=1;
  old_initials := '';
  FOR student IN cursor1 LOOP
    initials := SUBSTR(student.s_first,1,1) || SUBSTR(student.s_last,1,1);
    IF initials = old_initials THEN
      idnumber := idnumber +1;
      userid := old_initials || '00' || idnumber;
     ELSE 
      idnumber := 1; 
      old_initials := initials;
    END IF;
    DBMS_OUTPUT.PUT_LINE(userid);
   END LOOP;
  END; 
```

# php - 使用 jQuery 和 PHP 提交表单

> ID：13446827
> 
> 赞同：0
> 
> 时间：2012-11-19T02:18:59.167
> 
> 标签：php, javascript, jquery, ajax, forms

当按下另一个表单上的按钮时，我正在尝试提交表单。表单将简单地更新，我正在尝试捕获已输入的任何信息。

这就是信息流动的方式。形式实际上并不相同，这只是为了简化概念。

```
<?

function form(){
    ?>
    <form method="post" id="form1">
    <input type="text" name="textinput"/>
    <input type="submit" name="submit_form1"/>
    </form>

    <?
    $form2 = new forms();  //assume form 2 is setup similarly to form1 and its <form> tags are in that form like they are for form 1
    $forms->get_form2();
    ?>
}

<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
<script type="text/javascript">

$('#form2').click(function() {
  $('#form1').submit();
});

</script>
<? 
```

我尝试做这样的事情，但它不起作用。假设表单 1 输入了一些内容（但未提交），我想在按下表单 2 上的按钮时捕获这些值。

我也试过这个（我觉得它可以充分发挥作用），但我也没有成功。

```
$('#form1').submit(function() {
  alert('Handler for .submit() called.');
  return false;
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T02:29:12.993

```
$(document).ready(function(){
    $('#form2').submit(function(){
        $('#form1').submit();
        return false;
    });
}); 
```

如果这是你想要的，你需要用 document.ready() 包装它。虽然这样，你只会提交form1，而不是form2。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T02:25:46.403

提交表单后，服务器将向客户端返回结果，但是您在这里尝试做的是同时提交 2 个表单（如果我理解正确的话），这根本无法完成。

如果您想在提交另一个表单之前保存一个表单的信息，您将需要发送请求并更新服务器上的会话，或者使用 localstorage 或 cookie 将信息保存在本地，并在加载的新页面上从会话中获取数据或饼干。

# c++ - OpenMP 任务中的数据属性

> ID：13446830
> 
> 赞同：3
> 
> 时间：2012-11-19T02:19:15.580
> 
> 标签：c++, task, openmp

我用 OpenMP 编写了与快速排序相关的代码，如下所示：

```
#include <iostream>
#include <ctime>
#include <algorithm>
#include <functional>
#include <cmath>
using namespace std;
#include <omp.h>

void ParallelQuickSort(int *begin, int *end)
{
    if (begin+1 < end) 
    {
        --end;
        int *middle = partition(begin, end, bind2nd(less<int>(), *end));
        swap(*end, *middle);
        #pragma omp task shared(begin) firstprivate(middle)
            ParallelQuickSort(begin, middle);
        #pragma omp task shared(end) firstprivate(middle)
            ParallelQuickSort(++middle, ++end); 
    }
}

int main()
{
    int n = 200000000;

    int* a = new int[n];

    for (int i=0; i<n; ++i)
    {
        a[i] = i;
    }

    random_shuffle(a, a+n);
    cout<<"Sorting "<<n<<" integers."<<endl;

    double startTime = omp_get_wtime();
    #pragma omp parallel
    {
        #pragma omp single
            ParallelQuickSort(a, a+n);
    }
    cout<<omp_get_wtime() - startTime<<" seconds."<<endl;

    for (int i=0; i<n; ++i)
    {
        if (a[i] != i) 
        {
            cout<<"Sort failed at location i="<<i<<endl;
        }
    }

    delete[] a;
    return 0;
} 
```

我在代码中遇到的问题是函数内任务构造中的数据属性`ParallelQuickSort`。变量 middle 应该`firstprivate`代替，`shared`因为它可能会被执行这两个任务的线程更改。但是，如果我按照代码所示设置变量 begin 和 end `shared`，程序将失败。我想知道为什么他们 ( `begin`and `end`) 应该`firstprivate`代替`shared`. 在我看来，由于执行这两个任务的线程分别保持变量`begin`和`end`，它们不会相互影响。另一方面，`ParallelQuickSort`函数是递归的，因此变量`begin`或`end`（例如，在父函数和子函数中）。我不确定这个嫌疑人，因为变量在不同的函数（父函数和子函数）中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T08:44:51.130

首先，确定`private`在给定区域中的变量会自动`firstprivate`在显式任务中，因此您无需将它们显式声明为`firstprivate`. 其次，您的代码包含`++end;`并`--end;`修改 的值，如果是`end`，则会影响其他任务。在这里是正确的数据共享类 - 每个任务只保留 的值，以及它们在创建任务时曾经拥有的值。`end``shared``firstprivate``begin``end``middle`

你`ParallelQuickSort`应该像这样简单：

```
void ParallelQuickSort(int *begin, int *end)
{
    if (begin+1 < end) 
    {
        --end;
        int *middle = partition(begin, end, bind2nd(less<int>(), *end));
        swap(*end, *middle);
        #pragma omp task
            ParallelQuickSort(begin, middle);
        #pragma omp task
            ParallelQuickSort(++middle, ++end); 
    }
} 
```

请注意，虽然此代码有效，但它比单线程版本慢得多：在大型 Xeon X7350 (Tigerton) 机器上使用 2 个线程需要 88.2 秒，而使用单线程需要 50.1 秒。原因是任务创建一直持续到交换两个数组元素的非常简单的任务。使用任务的开销是巨大的，您应该设置一个合理的上限阈值，低于该阈值应该禁用任务，假设子数组大小达到 1024 个元素时。确切的数字取决于 OpenMP 运行时实现、您的 CPU 类型和内存速度，因此 1024 的值或多或少是随机选择的。最佳值仍然不应该创建两个任务来处理将落在同一缓存行中的元素，因此元素的数量应该是 16 的倍数（每个缓存行 64 字节/每个整数 4 字节）：

```
void ParallelQuickSort(int *begin, int *end)
{
    if (begin+1 < end) 
    {
        --end;
        int *middle = partition(begin, end, bind2nd(less<int>(), *end));
        swap(*end, *middle);
        #pragma omp task if((end - begin) > 1024)
            ParallelQuickSort(begin, middle);
        #pragma omp task if((end - begin) > 1024)
            ParallelQuickSort(++middle, ++end); 
    }
} 
```

通过这个修改，代码在同一个盒子上运行了 34.2 秒，两个线程。

# nhibernate - ORM (NHibernate)、DDD 和保存复杂实体

> ID：13446833
> 
> 赞同：1
> 
> 时间：2012-11-19T02:19:18.577
> 
> 标签：nhibernate, domain-driven-design

我是 NHibernate 的新手（坦率地说是 DDD 概念），所以我的问题可能很简单或无关紧要，但如果有人帮助我解决我的困惑，我将非常感激。

在我的应用程序中，我使用 DDD 和 NHibernate 作为 ORM。

使用简单的实体它可以正常工作，但现在我处于我的实体变得非常复杂的阶段（所以实体 A 包含实体 B 和实体 C 的数组；并且每个实体 C 包含 D 和一些其他参数等等...... )

我的客户端应用程序正在通过 Internet 与 WCF 服务（与 db 通信）通信，因此速度（有效负载大小很重要）。在少数情况下，我必须将这些复杂 DTO 的数组从服务发送到客户端，然后客户端更新 A 中的少量值并将其发送回服务器以进行保存/更新。

为了减少有效负载，我试图通过在我的映射器（我没有使用自动映射器等）中将未使用的属性值从我的 DTO 中的 B 和 C 实体中删除，同时将数据从服务发送到客户端。

现在将实体保存回数据库时，我该怎么办？如果我在 B 和 C 的几个变量中传回具有空值的实体 A（我已在映射器中手动取消），NHibernate 将在我保存 A 时尝试保存 B 和 C。我只想保存 A，并且要求 NHibernate 不要从 B 或 C 中保存任何内容。

任何帮助，将是对我的祝福。

先谢谢了

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T05:27:24.860

这种情况下的解决方案可以在预测中找到。简而言之：

*   保持您的映射正确和复杂。
*   但是在选择数据时，只将需要的列放入`select`子句中。

这可以通过`Projections`. 可以在这里找到很好的详细解释：

[http://shareyour-experience.blogspot.cz/2011/07/exploring-nhibernate-projections-and.html](http://shareyour-experience.blogspot.cz/2011/07/exploring-nhibernate-projections-and.html)

文档：

[http://nhibernate.info/doc/nh/en/index.html#querycriteria-projection](http://nhibernate.info/doc/nh/en/index.html#querycriteria-projection)

当数据返回服务器时，您的完全映射的实体将能够保留所有属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T18:32:34.473

一旦实体变得复杂，最好将调用实体行为的命令概念与实体本身的结构分离。（在这种情况下，命令是指表示执行操作的请求的 DTO）。您可以使用如下所示的命令：

```
class DoSomethingToAnEntityCommand
{
  public string EntityId { get; set; }
  public int SomeValue { get; set; }
} 
```

当应用程序服务处理此命令时，它将加载所需的实体并调用该实体上的适用行为并提交事务。

下一步是将查询与命令分离。当您从数据库中检索要作为 DTO 返回的实体时，您不必使用与加载要对其执行操作的实体相同的检索机制。正如您所指出的，即使对于单个实体，查询要求也会有所不同。有些查询只需要实体的一部分，加载整个实体的成本可能太高。有多种方法可以仅加载实体的一部分。正如 Radim Köhler 所述，您可以使用 NHibernate 投影。另一种选择是在 NHibernate 之外直接使用 SQL 查询。使用任一选项，返回的对象都不会被持久化 - 它们仅用于满足查询要求。

当您需要在实体上调用行为时，您不需要传递表示该实体的整个对象图。您只需要传递相应实体的 ID 以及执行代码示例中所示的给定操作所需的任何参数。这就是 NHibernate 的用武之地——它可以通过 ID 加载实体并跟踪在操作期间所做的任何更改以持久化回数据库。

# file - findstr 找到后打开文件

> ID：13446840
> 
> 赞同：2
> 
> 时间：2012-11-19T02:20:14.813
> 
> 标签：file, file-io, findstr

我正在为我的命令行类编写批处理。在这一点上很简单。所以它在大多数情况下运行良好，直到它结束。我不知道我是否正确使用它。在`findstr`命令之后，我有一个`if exist`打开[文件](https://docs.google.com/open?id=0B20XP78d0o8Cb1JOellMOVN6eE0)，但即使`findstr`找到一个文件它仍然不会打开它。

```
@echo off 
rem this file is a simple batch file with 4 options.
rem option 1 will display the date.
rem option 2 display the current directory you are in
rem open a file in notedpad.

:main
echo 1) display the current date.
echo 2) display the curent directory you are in.
echo 3) open a file in notepad.
echo 4) exit
echo Please enter a option; 1, 2, 3, 4.

set option=
set /p option=

if %option%//==//  GOTO main
if %option%==1 GOTO First
if %option%==2 GOTO Second
if %option%==3 GOTO Third
if %option%==4 GOTO END
if %option%==GEQ 5 
echo You have entered an invalid option.
GOTO main
:First
echo Today is %date%
echo Do you want to go to the main menu or, exit? Enter start, or end.
set /p option2= "Please Enter start, or end."
if %option2%==start GOTO main
if %option2%==end GOTO end
:Second
echo The current directory you are in is %CD%
:Third
echo Please Enter a file with extension; (ie. hello.txt)

set /p filename1=

echo Enter (y/n)
set /p option4=" You typed %filename1%. Is this correct? "

if exist %homedrive%%homepath%\%filename1% (
echo %homedrive%%homepath%\%filename1% FOUND.
start %homedrive%%homepath%\%filename1% 
) else (
if exist %CD%\%filename1% (
echo %CD%\%filename1% FOUND
start %CD%\%filename1%
GOTO restart
) else (
echo %filename1% COULD NOT BE FOUND.
GOTO drive
)
)
:restart
echo Would you like to return to the menu?
echo enter menu, or close.

set /p restart=

if %restart%==menu GOTO main
if %restart%==close (
exit
) else (
echo you have entered an invalid option.
GOTO restart
) 
:drive
echo Enter the drive the file is located on?

set /p drive1=

if exist %drive1% (
echo %drive1% FOUND.
GOTO location
) else (
echo %drive1% NOT FOUND
GOTO drive
) 

:location
%drive1%
cd \
dir /s /b | findstr /i /s "%filename1%"

if exist %filename1% (
start %filename1%
) else (
echo %filename1% NOT FOUND
)
)
:END
pause 
```

# git - 如何使用 JGit 进行 git push？

> ID：13446842
> 
> 赞同：25
> 
> 时间：2012-11-19T02:20:22.783
> 
> 标签：git, jgit

我正在尝试构建一个允许用户使用基于 Git 的存储库的 Java 应用程序。我可以使用以下命令从命令行执行此操作：

```
git init
<create some files>
git add .
git commit
git remote add <remote repository name> <remote repository URI>
git push -u <remote repository name> master 
```

这使我可以创建、添加内容并将其提交到本地存储库，并将内容推送到远程存储库。我现在正在尝试使用 JGit 在我的 Java 代码中做同样的事情。我能够使用 JGit API 轻松地进行 git init、添加和提交。

```
Repository localRepo = new FileRepository(localPath);
this.git = new Git(localRepo);        
localRepo.create();  
git.add().addFilePattern(".").call();
git.commit().setMessage("test message").call(); 
```

同样，所有这些工作正常。我找不到`git remote add`and的任何示例或等效代码`git push`。我确实看过这个[SO question](https://stackoverflow.com/questions/6861881/jgit-cannot-find-a-tutorial-or-simple-example)。

`testPush()`失败并显示错误消息`TransportException: origin not found`。**在其他示例中，我以前**见过[https://gist.github.com/2487157](https://gist.github.com/2487157)这样做，但我不明白为什么这是必要的。`git clone` **`git push`**

 **任何关于我如何做到这一点的指针将不胜感激。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2017-11-23T15:15:32.180

最简单的方法是使用 JGit Porcelain API：

```
 Git git = Git.open(localPath); 

    // add remote repo:
    RemoteAddCommand remoteAddCommand = git.remoteAdd();
    remoteAddCommand.setName("origin");
    remoteAddCommand.setUri(new URIish(httpUrl));
    // you can add more settings here if needed
    remoteAddCommand.call();

    // push to remote:
    PushCommand pushCommand = git.push();
    pushCommand.setCredentialsProvider(new UsernamePasswordCredentialsProvider("username", "password"));
    // you can add more settings here if needed
    pushCommand.call(); 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-11-19T09:48:15.140

您将在[`org.eclipse.jgit.test`](https://github.com/eclipse/jgit/tree/master/org.eclipse.jgit.test)所需的所有示例中找到：

*   [`RemoteconfigTest.java`](https://github.com/eclipse/jgit/blob/master/org.eclipse.jgit.test/tst/org/eclipse/jgit/transport/RemoteConfigTest.java)用途[`Config`](https://github.com/eclipse/jgit/blob/master/org.eclipse.jgit/src/org/eclipse/jgit/lib/Config.java)：

    ```
    config.setString("remote", "origin", "pushurl", "short:project.git");
    config.setString("url", "https://server/repos/", "name", "short:");
    RemoteConfig rc = new RemoteConfig(config, "origin");
    assertFalse(rc.getPushURIs().isEmpty());
    assertEquals("short:project.git", rc.getPushURIs().get(0).toASCIIString()); 
    ```

*   [PushCommandTest.java](https://github.com/eclipse/jgit/blob/master/org.eclipse.jgit.test/tst/org/eclipse/jgit/api/PushCommandTest.java)说明了各种推送场景，[使用`RemoteConfig`](https://github.com/eclipse/jgit/blob/master/org.eclipse.jgit.test/tst/org/eclipse/jgit/api/PushCommandTest.java#L162).
    有关推送跟踪远程分支[`testTrackingUpdate()`](https://github.com/eclipse/jgit/blob/9c67f680c890f2d33b50e43f10bd992d4c72f1a3/org.eclipse.jgit.test/tst/org/eclipse/jgit/api/PushCommandTest.java#L132)的完整示例，*请参阅。*
    提取物：

    ```
    String trackingBranch = "refs/remotes/" + remote + "/master";
    RefUpdate trackingBranchRefUpdate = db.updateRef(trackingBranch);
    trackingBranchRefUpdate.setNewObjectId(commit1.getId());
    trackingBranchRefUpdate.update();

    URIish uri = new URIish(db2.getDirectory().toURI().toURL());
    remoteConfig.addURI(uri);
    remoteConfig.addFetchRefSpec(new RefSpec("+refs/heads/*:refs/remotes/"
        + remote + "/*"));
    remoteConfig.update(config);
    config.save();

    RevCommit commit2 = git.commit().setMessage("Commit to push").call();

    RefSpec spec = new RefSpec(branch + ":" + branch);
    Iterable<PushResult> resultIterable = git.push().setRemote(remote)
        .setRefSpecs(spec).call(); 
    ```**

# javascript - Phonegap - 可以隐藏 div，但不显示

> ID：13446843
> 
> 赞同：0
> 
> 时间：2012-11-19T02:20:41.390
> 
> 标签：javascript, jquery, html, css, cordova

我有一个非常简单的 PhoneGap 项目，其中包含一些可以根据需要打开和关闭的消息传递元素。我在这个项目中使用了 jQuery，尽管无论我是否使用 jQuery 来显示/隐藏 div，都会出现我看到的问题。

无论如何，相关标记如下：

```
 <div class="event listening blink" id="waiting" >
            Waiting for Game
        </div>
        <div class="event listening blink" id="error" >
            Something bad happened...
        </div>
        <div id="running">
            <h1>Shake Me!</h1>
            <div id="deviceready">
                <p class="event listening" id="accelerometer">Waiting for accelerometer...</p>
            </div>
        </div>
        <div id="complete">
            <h1 id="finalStatus">Game Over</h1>
            <div id="myRanking">
                <p class="event listening">You came in 100th place.</p>
            </div>
        </div> 
```

...当页面加载时，我隐藏了所有这些 div，例如：

```
$("#waiting").hide();
$("#running").hide();
$("#error").hide();
$("#complete").hide(); 
```

随着应用程序中发生各种事件，我会显示适当的 div，例如：

```
$("#waiting").show(); 
```

看起来很简单，除了 div 没有重新出现。一旦一个 div 被隐藏，它就会永远隐藏起来。没有抛出 JavaScript 错误，即使我使用`document.getElementById("waiting").style.display = 'block';`. 我有`console.log()`声明证实这`show()`肯定是被调用的。

所以我不知道这是如何/为什么会发生的。过去有没有人遇到过类似的问题？解决方案是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T11:13:28.703

我发现了这个问题（有点）。显然 jQuery 与页面上使用的其他一些脚本发生冲突。我不确定是哪一个，或者冲突是什么，或者冲突如何严重到导致`element.style.display = 'block';`停止工作，但是更改`<script>`HTML 中标签的顺序可以解决问题。

# javascript - Modernizr 何时加载脚本？

> ID：13446850
> 
> 赞同：1
> 
> 时间：2012-11-19T02:21:16.603
> 
> 标签：javascript, jquery, modernizr

我已经实现了这段代码：

```
<script>
       var mod_PPfix = false;

        Modernizr.load({
            test: Modernizr.csstransitions && Modernizr.input.required,
            nope: ['script1.js', 'script2.js'],
            complete: function () {

                mod_PPfix = true;
                console.log('ppfix');
            }
        });
</script> 
```

几行之后，我放置了另一个脚本

```
<script>               
   if (!mod_PPfix) {
       $(document).ready(function() { 

           console.log('this should be seen only if modernizr's tests are true');
       });
   }
</script> 
```

现在我真的是一个 javascript 的菜鸟，但我希望从上面的代码中显示第二个，`console.log()`只有当 modernizr 测试结果为真时。即使测试结果为阴性，仍然会记录第二个日志。

据我所知，在控制台中，第二`console.log()`条消息出现在第一条消息“ppfix”之前，所以我想这应该是一种加载时间问题，但我真的不知道为什么。我究竟做错了什么？

如果它可以帮助我使用 Jquery 作为库。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T03:07:21.173

如果您想在测试为真时查看第二条日志消息，您不是说`if (mod_PPfix)`吗？如果测试失败，您的版本将记录输出第二条消息（请参阅this [fiddle](http://jsfiddle.net/CaXRm/)）

当您使用 Modernizr.load 时，事情会异步发生，因此第二个`<script>`可能会在 script1.js 和 script2.js 完成加载之前运行，因此在`complete`回调触发之前运行。无论您想在一秒钟内做什么，`<script>`都应该在`complete`回调中调用。例如

```
 Modernizr.load({
        test: Modernizr.csstransitions && Modernizr.input.required,
        nope: ['script1.js', 'script2.js'],
        complete: function () {
            initialize_me();
        }
    }); 
```

该`initialize_me()`函数将在其他地方定义并且可能具有看起来像的代码

```
if (Modernizr.csstransitions && Modernizr.input.required) {
    // Use CSS3
} else {
    // Do things that depended on script1.js and script2.js being loaded
} 
```

# java - 创建和验证签名数据时出错

> ID：13446852
> 
> 赞同：3
> 
> 时间：2012-11-19T02:21:36.887
> 
> 标签：java, cryptography, bouncycastle

我正在使用来自*Wrox Starting Cryptography with Java*的一些示例代码。代码的第 24 行（如下）显示了 Eclipse 中的一个错误。

```
X509CertSelector signerConstraints = signer.getSID(); 
```

日食错误：

> *类型不匹配：无法从 SignerId 转换为 X509CertSelector*

这是完整的示例：

```
package chapter9;

import java.security.cert.*;
import java.util.Iterator;

import org.bouncycastle.cms.CMSSignedData;
import org.bouncycastle.cms.SignerInformation;
import org.bouncycastle.cms.SignerInformationStore;

/**
 * Base class for signed examples.
 */
public class SignedDataProcessor {
    /**
     * Return a boolean array representing keyUsage with digitalSignature set.
     */
    static boolean[] getKeyUsageForSignature() {
        boolean[] val = new boolean[9];
        val[0] = true;

        return val;
    }

    /**
     * Take a CMS SignedData message and a trust anchor and determine if
     * the message is signed with a valid signature from a end entity
     * entity certificate recognized by the trust anchor rootCert.
     */
     public static boolean isValid(
         CMSSignedData   signedData,
         X509Certificate rootCert) throws Exception {
        CertStore certsAndCRLs = signedData.getCertificatesAndCRLs("Collection", "BC");
        SignerInformationStore  signers = signedData.getSignerInfos();
        Iterator it = signers.getSigners().iterator();

        if (it.hasNext()) {
            SignerInformation signer = (SignerInformation)it.next();
            X509CertSelector signerConstraints = signer.getSID();

            signerConstraints.setKeyUsage(getKeyUsageForSignature());

            PKIXCertPathBuilderResult result = 
                Utils.buildPath(rootCert, signer.getSID(), certsAndCRLs);

            return signer.verify(result.getPublicKey(), "BC");
        }

        return false;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T13:32:49.197

我找到了答案：只需升级到 bcprov-jdk16-145.jar、bcmail-jdk16-145.jar..

# ios - iOS - 更新变量值的 UI 已更改

> ID：13446855
> 
> 赞同：1
> 
> 时间：2012-11-19T02:21:47.897
> 
> 标签：ios, variables, listener

我有一个名为recordingStatus 的int 变量。我想“收听”这个记录状态并根据这个变量的状态更新我的标签。

```
int recordingStatus;

@property (strong, nonatomic) IBOutlet UILabel *recordingStatusText; 
```

我必须这样做的原因是我的 C 代码（也在同一个文件中）中正在更改recordingStatus，并且 C 代码无法访问 UI 元素（据我所知）。

在 iOS 中最优雅的方法是什么？

C 代码核心音频回调

```
static OSStatus rioRecordingCallback(void *inRefCon,
                              AudioUnitRenderActionFlags *ioActionFlags,
                              const AudioTimeStamp *inTimeStamp,
                              UInt32 inBusNumber,
                              UInt32 inNumberFrames,
                              AudioBufferList *ioData) {

// want to access recordingStatus in here, am I able to do it without passsing it in via inRefCon?
} 
```

谢谢。

码头。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T02:24:20.857

`recordingStatus`为您的对象创建一个属性。然后您可以覆盖 setter 方法并在该方法中执行您需要的任何 UI 更新。这样，C 代码就无需担心 UI，Objective-C 代码可以处理 Objective-C UI 更新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T02:37:41.507

有多种方法可以解决这个问题。正如 Rickay 所指出的，您可以将其设为一个属性，然后重写设置器来设置标签的值。

另一种方法是使用 KVO 进行监控`recordingStatus`（它仍然需要有一个属性）。如果你正在寻找一种超级棒的方式来使用 KVO，请查看[ReactiveCocoa](https://github.com/github/ReactiveCocoa)。这种类型的观察反应模式被称为*反应式编程*。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-19T14:07:02.387

参考[iOS上Audio Unit Render Proc的另一个线程Triggering UI code](https://stackoverflow.com/questions/7151772/triggering-ui-code-from-audio-unit-render-proc-on-ios)

我将 recordingStatus 放入传递给音频回调的结构中，主循环以 60hz 的平均刷新率轮询该值，因此（1/60 == 0.02 秒）。

```
- (void) initTimer
{
self.UIUpdateTimer =
[NSTimer scheduledTimerWithTimeInterval:0.02
                                 target:self selector:@selector(pollValues:)
                               userInfo:nil
                                repeats:YES];
}

- (void) pollValues:(NSTimer *)paramTimer
{
if (rio.recordingStatus==1)
    recordingStatusLabel.text = @"test!";
} 
```

# python - 如何使用 Python 匹配文件并将其移动到相应的文件夹中

> ID：13446857
> 
> 赞同：2
> 
> 时间：2012-11-19T02:21:59.767
> 
> 标签：python, shutil

我对编程很陌生，这是我第一次尝试使用 Python 创建复杂的脚本

我正在创建的程序的目的是：

*   浏览文件列表（单个文件夹中共有 360 个文件）
*   提取文件名中的 3 个唯一字符并根据 3 个字符创建一个文件夹（共 60 个唯一文件夹）
*   创建一个 for 循环，该循环遍历源文件夹中的文件列表并将其移动到相应的目标文件夹。

例子：

文件名：**KPHI_SDUS81_N3KDIX_201205261956**

基于字符创建的文件夹：**N3K**

```
import os

#Creates a list based on file names in the folder
srcfile=os.listdir("E:\\Learning Python\\Testing out\\thunderstorm stuff")

#Directiory of where the source files are located
srcpath= "E:\\Learning Python\\Testing out\\thunderstorm stuff"

#Creates a list based on the location of where folders will be lcoated.
#List will be empty since for loop has not ran yet
targetsrc=os.listdir("E:\\Learning Python\\Testing out\\test folder")

#path of where the new folders created will be located
targetpath = "E:\\Learning Python\\Testing out\\test folder"

#empty list created to hold a string of 3 characters (see for loop below)
list=[]

#A list to hold the unique string values. (see 2nd for loop below)
Target=[]

#the for loop below looks at a file and gooes to the character place holder index of   12 and looks at the characters UP TO 15.
#It then assigns the three characters to a variable x which then passes the the string (the 3 characters) to an empty list called list. 
for num in srcfile:
  x=num[12:15]
  list.append(x)

#a test to see if the for loop above was able to exact the three characters from the list
print list
print srcfile

#created to see how big the list is which should match the amount of files in folder
print len(srcfile)
print len (list)

#a function created to make a folder based on a list
def create(s):
  targetpath = "E:\\Learning Python\\Testing out\\test folder"
  test=os.mkdir(os.path.join(targetpath,s))

#a dummy variable holder for the for loop below
valhold = "null"

#a nested if statement inside a for loop.
#The for loop goes through all the string values in a list called "list" (assigned to folder in for loop) 
#and checks it against a list called valhold.  If folder and valhold are not equal,
#the values in folder are appened to a list called Target.append which holds unique values.
#The next step is to create a folder a folder based off the list value "valhold"
for folder in list:
  if folder != valhold:
      Target.append(folder)
      valhold=folder
      create(valhold)
  else:
      valhold=folder

#a nested for loop which goes through all the files in the folder for the list "sourcefile"
#and finds a matching filename
for dst in Target:
  wheretonumber=0
  whereto = targetsrc(wheretonumber)  #Name of folder for a given index value "targetsrc"
  for file in list:
      filenumber=0
      filename=srcfile(filenumber) #Name of file for a given index value "sourcefile"
      if file == dst:
          ##os.rename(filename(filenumber),whereto(wheretonumber))
          ##shutil.move(filename,whereto)
      filenumber= filenumber+1
wheretonumber=wheretonumber+1 
```

我能够完成上面的要点列表中的前 2 件事，但很难让第 3 件事发挥作用。我研究了 shutil.move、os.path.walk 和 os.rename 函数，但没有让它们正常工作。我不断收到错误：

whereto = targetsrc(wheretonumber) TypeError: 'list' object is not callable

我有 os.rename 和 shutil.move 注释掉，因为我正在尝试不同的功能。我的逻辑在方法中是正确的还是我错过了什么？关于尝试其他功能的任何建议或更改我的代码以使其将文件移动到文件夹中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T03:25:00.177

要从`list`变量中删除重复项，只需使用`set()`内置。并且不要`list`用作变量名，这会隐藏内置的`list()`.

列表用括号`[]`而不是括号索引。

除了空列表（您自己编写：）之外，我看不到您将任何内容分配`#List will be empty since for loop has not ran yet`给targetsrc的位置。空列表没有元素，所以即使 L[0] 也会超出范围。

尝试这样的事情：

```
import os
import shutil

srcpath = "E:\\Learning Python\\Testing out\\thunderstorm stuff"
srcfiles = os.listdir(srcpath)

destpath = "E:\\Learning Python\\Testing out\\test folder"

# extract the three letters from filenames and filter out duplicates
destdirs = list(set([filename[12:15] for filename in srcfiles]))

def create(dirname, destpath):
    full_path = os.path.join(destpath, dirname)
    os.mkdir(full_path)
    return full_path

def move(filename, dirpath):
    shutil.move(os.path.join(srcpath, filename)
                ,dirpath)

# create destination directories and store their names along with full paths
targets = [
    (folder, create(folder, destpath)) for folder in destdirs
]

for dirname, full_path in targets:
    for filename in srcfile:
        if dirname == filename[12:15]:
            move(filename, full_path) 
```

# ios - 使用 AFNetworking 下载整个 S3 存储桶

> ID：13446858
> 
> 赞同：0
> 
> 时间：2012-11-19T02:22:24.710
> 
> 标签：ios, xcode, amazon-s3, afnetworking

我开始考虑将我的应用程序从 ASIHTTPRequest 切换到其他东西，可能是 AFNetworking，但我无法确定从哪里开始。我需要该应用程序将整个存储桶的内容（包括目录中的文件）下载到应用程序的包中（相同的目录从存储桶复制到包中）。桶中可能有几千个小文件。

关于从哪里开始的任何想法？AFNetworking S3 客户端可以做到这一点吗？还是我应该使用 Amazon SDK？或者是其他东西？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T11:03:40.170

AFNetworking S3 Client 仍处于早期开发阶段。您可能应该考虑使用 Amazon SDK ...

# python - 反编译器 python 等

> ID：13446860
> 
> 赞同：1
> 
> 时间：2012-11-19T02:22:37.053
> 
> 标签：python, language-agnostic, decompiler

对于 python3 到目前为止还没有一个稳定的工作反编译器。最接近的是 unpyc3，它充其量是错误的。我想创建一个适用于 python 的反编译器，但我该怎么做呢？虽然我想在 python 中创建它，是否有可能拥有一个适用于所有语言的全局反编译器？如果一个程序可以访问给定语言的所有库并获得一个编译文件，是否有可能将其分解为任何语言，计算机可以做到这一点吗？它正在使用机器语言，所以这应该在反编译中起作用吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-10-21T12:24:39.983

[uncompyle6](https://pypi.python.org/pypi/uncompyle6)非常好，适用于 Python 3。

至于您一般如何编写来执行此操作的问题，请参阅描述[其工作原理](https://github.com/rocky/python-uncompyle6/wiki/How-does-this-code-work%3F)的 wiki 。

但是，我将概述以下步骤。

您首先需要了解如何读取可能包含特定 CPU 类型的机器代码或虚拟机的字节码的“可执行文件”。*Uncompyle6*使用语法来重构程序。反汇编的机器指令在解析术语中称为“令牌”。例如，您将使用“值为 5 的`LOAD_CONST`指令”而不是“token: number with value 5”。

在此之后，您可能想了解控制流。并为此确定了典型的基本块或直线代码。您现在可以执行此操作，因为您知道哪些标记是跳转指令。

uncompyle6 使用的基本思想是在语法中添加标记以允许语法检测控制流。所以大致它可能会看到：

```
SETUP_LOOP
JUMP_IF FALSE X
... 
X: 
```

并在 X 处添加一些内容以表示结束：

```
SETUP_LOOP
JUMP_IF_FALSE X
...
COME_FROM_LOOP # this is added 
```

然后，您可以在每个基本块内为基本块内的表达式和语句构建抽象语法树 (AST)。*uncompyle6*中使用的方法是使用上下文无关文法。其他 Python3 程序，如*pycdc*或您引用的程序*unpyc3*不会这样做。然后使用堆栈和指令的线性扫描来构建树。给出一些想法

```
 LOAD a    # tree/stack: | a
 LOAD b    # tree/stack: | b, a
 LOAD c    # tree/stack: | c, b, a 
 ADD       # tree/stack: (c + b) |  a
 MULTIPLY  # tree/stack: (c + b) * a
 STORE d   # tree/stack: d = (c + b) * a | 
```

也许您可以看到语法如何做同样的事情。

说了这么多并建议*uncompyle6*，我要说的是，现在它在很大程度上是临时的控制流分析部分相当薄弱。

既然您表达了对创建反编译器的兴趣，那么不如为现有的编译器做出贡献以使其变得更好呢？

# excel - 将 CSV 文件中的数据提取到单个 excel 文件中

> ID：13446864
> 
> 赞同：0
> 
> 时间：2012-11-19T02:23:53.243
> 
> 标签：excel, vba, csv

这是我的问题的详细信息。

*   我有数千个 csv 文件需要合并到一个 excel 文件中。
*   只需要提取每个csv文件的某些数据，A2，G2和H单元格的最高值。
*   提取的每个 csv 文件都将按提取顺序排列在新的工作簿中。（csv A2->A 细胞，csv G2->B 细胞，csv H->细胞）

因为我有数千个 csv 文件，是否可以通过选择不同文件夹中的所有 csv 文件来组合所有数据？

非常感谢您的关注。

```
Option Explicit

Function ImportData()

Dim wkbCrntWorkBook As Workbook
Dim wkbSourceBook   As Workbook
Dim rngSourceRange1  As Range
Dim rngSourceRange2 As Range
Dim rngSourceRange3 As Range
Dim rngDestination1  As Range
Dim rngDestination2  As Range
Dim rngDestination3 As Range
Dim intColumnCount  As Integer

Dim YesOrNoAnswerToMessageBox As String
Dim QuestionToMessageBox As String

Set wkbCrntWorkBook = ActiveWorkbook

Dim SelectedItemNumber As Integer

Dim HighestValueRng As Range
Dim Highest As Double

Do

SelectedItemNumber = SelectedItemNumber + 1

With Application.FileDialog(msoFileDialogOpen)
    .Filters.Clear
    .Filters.Add "Excel 2007", "*.xlsx; *.xlsm; *.xlsa", 1
    .Filters.Add "Excel 2002-03", "*.xls", 2
    .Filters.Add "Command Separated Values", "*.csv", 3
    .AllowMultiSelect = True
    .Show

For SelectedItemNumber = 1 To .SelectedItems.Count

    If .SelectedItems.Count > 0 Then
        Workbooks.Open .SelectedItems(SelectedItemNumber)
        Set wkbSourceBook = ActiveWorkbook
        Set rngSourceRange1 = ActiveCell.Offset(1, 0)
        Set rngSourceRange2 = ActiveCell.Offset(1, 6)

        wkbCrntWorkBook.Activate

        Set rngDestination1 = ActiveCell.Offset(1, 0)
        Set rngDestination2 = ActiveCell.Offset(1, 1)

        ActiveCell.Offset(1, 2).Value = Application.WorksheetFunction.Max(Columns("H"))

        For intColumnCount = 1 To rngSourceRange1.Columns.Count

            If intColumnCount = 1 Then
                rngSourceRange1.Columns(intColumnCount).Copy rngDestination1
            Else
                rngSourceRange1.Columns(intColumnCount).Copy rngDestination1.End(xlDown).End(xlDown).End(xlUp).Offset(1)
            End If
        Next

        For intColumnCount = 1 To rngSourceRange2.Columns.Count

            If intColumnCount = 1 Then
                rngSourceRange2.Columns(intColumnCount).Copy rngDestination2
            Else
                rngSourceRange2.Columns(intColumnCount).Copy rngDestination2.End(xlDown).End(xlDown).End(xlUp).Offset(1)
            End If
        Next

        ActiveCell.Offset(1, 0).Select

        wkbSourceBook.Close False
    End If

Next SelectedItemNumber

End With

YesOrNoAnswerToMessageBox = MsgBox("Continue?", vbYesNo)

Loop While YesOrNoAnswerToMessageBox = vbYes

Set wkbCrntWorkBook = Nothing
Set wkbSourceBook = Nothing
Set rngSourceRange1 = Nothing
Set rngSourceRange2 = Nothing
Set rngDestination1 = Nothing
Set rngDestination2 = Nothing
intColumnCount = Empty

End Function 
```

最大值的结果总是返回零。为什么？任何人都可以纠正我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T04:19:30.097

如果我完全理解您的要求，则不是肯定的，但请看看这是否对您有帮助。

将此代码粘贴到新工作簿中的模块中，并将 CSV 文件放入名为“CSV”的子文件夹中。结果应出现在新工作簿的 Sheet1 中。请注意，它只会检查具有 CSV 文件扩展名的文件。如果您需要更改它，请查看该行`If Right(file.Name, 3) = "csv"`

```
Sub ParseCSVs()
    Dim CSVPath
    Dim FS
    Dim file
    Dim wkb As Excel.Workbook
    Dim ResultsSheet As Worksheet
    Dim RowPtr As Range
    Dim CSVUsed As Range

    Set ResultsSheet = Sheet1

    'Clear the results sheet
    ResultsSheet.Cells.Delete

    Set FS = CreateObject("Scripting.FileSystemObject")

    'The CSV files are stored in a "CSV" subfolder of the folder where
    'this workbook is stored.
    CSVPath = ThisWorkbook.Path & "\CSV"

    If Not FS.FolderExists(CSVPath) Then
        MsgBox "CSV folder does not exist."
        Exit Sub
    End If

    ResultsSheet.Range("A1:D1").Value = Array("CSV A2", "CSV G2", "CSV Max of H", "File")
    ResultsSheet.Range("A1").EntireRow.Font.Bold = True
    Set RowPtr = ResultsSheet.Range("A2")
    For Each file In FS.GetFolder(CSVPath).Files
        If Right(file.Name, 3) = "csv" Then 'Only look at files with .csv extension
            Set wkb = Application.Workbooks.Open(file.Path)
            Set CSVUsed = wkb.Sheets(1).UsedRange

            RowPtr.Range("A1") = CSVUsed.Range("A2")
            RowPtr.Range("B1") = CSVUsed.Range("G2")
            RowPtr.Range("C1") = Application.WorksheetFunction.Max(CSVUsed.Range("H:H"))
            RowPtr.Range("D1") = file.Name

            wkb.Close False

            Set RowPtr = RowPtr.Offset(1)
        End If
    Next

    ResultsSheet.Range("A:D").EntireColumn.AutoFit
End Sub 
```

# excel - Excel 2010 VBA 查找功能问题

> ID：13446867
> 
> 赞同：0
> 
> 时间：2012-11-19T02:24:10.107
> 
> 标签：excel, vba

```
Function ProtectiveDiscount(PDD As Range)
'‘Find discount in table
TotalDiscount = 0
For i = 0 To ListBox1.ListCount - 1

If ListBox1.Selected(i).Value = "Dead bolt, Local Fire Alarm, Fire extinguisher" Then
Msg = Msg & ListBox1.List(i) & vbNewLine
TotalDiscount = TotalDiscount + WorksheetFunction.VLookup(ListBox1.Selected(i).Value, Worksheets("Sheet4").Range("PDD"), 2, False)
' TotalDiscount = TotalDiscount +  WorksheetFunction.VLookup(ListBox1.Selected(i).Value, Range("R50:S55"), 2, False)
End If

If ListBox1.Selected(i).Value = "Burglar Alarm with Reporting" Then
Msg = Msg & ListBox1.List(i) & vbNewLine
TotalDiscount = TotalDiscount + WorksheetFunction.VLookup(ListBox1.Selected(i).Value, PDD, 2, False)
' TotalDiscount = TotalDiscount + WorksheetFunction.VLookup(ListBox1.Selected(i).Value, Range("R50:S55"), 2, False)
End If

If ListBox1.Selected(i).Value = "Fire Alarm with Reporting" Then
Msg = Msg & ListBox1.List(i) & vbNewLine
TotalDiscount = TotalDiscount + WorksheetFunction.VLookup(ListBox1.Selected(i).Value, Worksheets("Sheet4").Range("PDD"), 2, False)
 'TotalDiscount = TotalDiscount + WorksheetFunction.VLookup(ListBox1.Selected(i).Value, Range("R50:S55"), 2, False)
End If

If ListBox1.Selected(i).Value = "Automatic Sprinkler in all areas" Then
Msg = Msg & ListBox1.List(i) & vbNewLine
TotalDiscount = TotalDiscount + WorksheetFunction.VLookup(ListBox1.Selected(i).Value, Worksheets("Sheet4").Range("PDD"), 2, False)
' TotalDiscount = TotalDiscount + WorksheetFunction.VLookup(ListBox1.Selected(i).Value, Range("R50:S55"), 2, False)
End If
End Function 
```

由于某种原因，我的 vlookup 功能不起作用。我尝试了几种方法，但我被卡住了。任何人都可以提供任何帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T09:03:51.433

我真的不明白使用 if ... end if x4 而不使用 If ...elseif ... elseif ... end if 的意义。但即使这样也可能不需要，因为 Ifs 中的操作是相同的......也许你应该考虑 if (a=a1) or (a=a2) or ... Then ... elseif ... else ...如果形式结束。无论如何，由于您可能只发布了您的代码的一部分，因此我对此不再多说。关于Vlookup部分，我相信这种形式：

```
If ListBox1.Selected(i).Value="Dead bolt, Local Fire Alarm, Fire extinguisher" Then
    Msg = Msg & ListBox1.List(i) & vbNewLine
    TotalDiscount = TotalDiscount + application.WorksheetFunction.VLookup(ListBox1.Selected(i).Value, PDD, 2, False) 
elseif ListBox1.Selected(i).Value = "Burglar Alarm with Reporting" Then 
```

应该可以正常工作。

也是一个小评论。尽管使用工作表函数编写起来更容易/更快，但使用 Cells() 从 VBA 中搜索并使用 for-next 循环在指定范围内查找可能会更快，特别是因为您不使用快速 Vlookup（使用排序大批）。

干杯

# javascript - Express basicAuth：异步与同步

> ID：13446868
> 
> 赞同：1
> 
> 时间：2012-11-19T02:24:18.670
> 
> 标签：javascript, node.js, connect

我想知道 connect.js middelware 中 basicAuth 的异步和同步回调模式之间有什么区别。

我知道nodejs在一个单线程事件循环上，但是同步“回调”是一个回调函数，因此是异步的。所以我不明白有什么区别。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T03:27:26.740

在这两种情况下，您的回调实际上是由 同步调用的`basicAuth`，但在异步情况下，您将`fn`参数调用到回调以将结果传递回，`basicAuth`而不是从回调函数返回结果。

如此处的规范示例代码[所示](http://www.senchalabs.org/connect/middleware-basicAuth.html)。

```
// Sync case, where the callback function returns true/false
connect(
  connect.basicAuth(function(user, pass){
    return 'tj' == user & 'wahoo' == pass;
  })
);

// Async case, where User.authenticate uses an asynchronous call to determine the validity
// of the user, and fn is called by that function to deliver the true/false result back to
// basicAuth once the async call completes.
connect(
  connect.basicAuth(function(user, pass, fn){
    User.authenticate({ user: user, pass: pass }, fn);
  })
); 
```

# excel - Access VBA如何确定文件是否为Excel格式？

> ID：13446873
> 
> 赞同：4
> 
> 时间：2012-11-19T02:24:43.677
> 
> 标签：excel, ms-access, vba

使用 MS Access VBA 如何检查文件以了解它是否为 Excel 格式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T03:44:06.577

我从来没有遇到过无法通过扩展名直接确定 Excel 文件的问题，但如果我必须这样做，首先想到的是 UNIX 实用程序`file`，它通过查看文件类型的内容来识别文件类型. 它可以识别大量的文件类型。

我使用[Cygwin](http://www.cygwin.com/) for Windows，它本质上是 Windows 上的 UNIX 环境。

当我`file`在 Excel 2010 (xlsx) 文件上使用 Cygwin 中的命令时，我已重命名为“.csv”，我得到：

```
$ file afile.csv
afile.csv: Microsoft Excel 2007+ 
```

这是一个有点尴尬的解决方案，但在您的 VBA 中，您可以使用[Windows Script Host](https://stackoverflow.com/questions/2075886/capturing-output-from-wshshell-exec-using-windows-script-host)`C:\cygwin\bin\file.exe`分叉一个进程，并捕获每个文件的输出。

如果您在 Excel 文件的路径周围加上单个刻度（即“C:\path\to\file”），Cygwin 应该正确解释它（Cygwin 实用程序希望看到类似 unix 的路径：/path/to/文件）。我刚刚在普通的 Windows 命令提示符下验证了这一点，它工作正常：

```
c:\>c:\cygwin\bin\file.exe 'C:\path\to\afile.csv'
C:\path\to\afile.csv: Microsoft Excel 2007+ 
```

在[GnuWin32 SourceForge 项目](http://gnuwin32.sourceforge.net/packages.html)中也有一个[原生的 Windows 二进制文件](http://gnuwin32.sourceforge.net/packages/file.htm)，但它似乎有点过时了；我没有尝试过，但它仍然可以识别现代 Excel 版本。`file`

如果您需要本机 Excel 解决方案——我不完全确定我的想法；希望其他人以前做过。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-06-03T19:42:11.233

这不是用于 Access，而是用于 Excel，我使用它。这不是最好的，也不是任何人都喜欢的解决方案，但要振作起来。

```
Public Function IsExcelFormat(ByVal filePath As String) As Boolean

    On Error GoTo Nope
    Application.ScreenUpdating = False

    Dim wb As Workbook
    Set wb = Workbooks.Open(filePath )
    IsExcelFormat = (wb.FileFormat > 50)

CleanExit:
    Application.ScreenUpdating = True
Exit Function

Nope: ' Clearly not Excel format
    Err.clear
    IsExcelFormat = False
    Resume CleanExit:

End Function 
```

是的，它使用 Excel 的自动魔法。我知道。太可怕了 而且 ScreenUpdating 并不完全有效。当您打开和关闭文件时，您的任务栏将更新。但是，它仍然有效。

您可能需要在 Access VBA 脚本中创建一个 Excel 实例，并可选择将其传递给类似这样的功能。*注意我没有测试过这个。*

```
Public Function IsExcelFormat(ByVal file_path As String, _
        Optional byRef excel_instance as Excel.Application = Nothing) As Boolean
    On Error GoTo Nope

    Dim local_excel as boolean
    If excel_instance Is Nothing Then 
       Set excel_instance = New Excel.Application
       local_excel = True
    End If

    Dim wb As Excel.Workbook

    excel_instance.ScreenUpdating = False

    Set wb = excel_instance.Workbooks.Open(file_path)
    IsExcelFormat = (wb.FileFormat > 50)
    wb.Close savechanges:=False

CleanExit:
    If local_excel Then 
        excel_instance.Quit
    Else
        excel_instance.ScreenUpdating = True    
    End If
Exit Function
Nope: ' Clearly not Excel format
    Err.clear
    IsExcelFormat = False
    Resume CleanExit:
End Function 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-19T14:17:00.203

关于使用 ADOX 的可能方法的一些说明

```
Sub SortFiles()
''Library reference: Windows Script Host Object Model
Dim fs As New FileSystemObject
Dim ts As TextStream
Dim sType As String
Dim sFile As File

For Each sFile In fs.GetFolder("Z:\Docs\").Files
    sType = sFile.Type

    If InStr(sType, "Microsoft") = 0 Then
        sList = ListTables(sFile.Name)
        If sList = "Error: Not Excel" Then
            ''Move to suitable folder
        Else
            Debug.Print sList
            Stop
            ''This can be read as Excel, most likely
        End If

    ElseIf sType Like "*Excel*" Then
       ''Includes CSV
        sFile.Move "z:\docs\Excelfiles\"
    Else
        sFile.Move "z:\docs\OtherMS\"
    End If
Next

End Sub

Function ListTables(sFile As String) As String
''Library reference: Microsoft ADO Ext. x.x for DDL and Security
Dim cat As New ADOX.Catalog
Dim scn As String
Dim t As ADOX.Table
Dim cn As New ADODB.Connection
Dim sList As String

On Error GoTo Handle_Err:

    scn = "Provider=Microsoft.ACE.OLEDB.12.0;" _
    & "Data Source=" & sFile & ";Extended Properties=""Excel 8.0;HDR=No"""

    cn.Open scn

    cat.ActiveConnection = cn

    For Each t In cat.Tables
        sList = sList & vbCrLf & t.Name
    Next t

    ListTables = sList

Exit_Proc:
Set cn = Nothing
Set cat = Nothing
Exit Function

Handle_Err:
    If Err.Number = -2147467259 Then
        ''External table is not in the expected format.
        ListTables = "Error: Not Excel"
        Err.Clear
        Resume Exit_Proc
    Else
        Debug.Print Err.Number, Err.Description
    End If

End Function 
```

# stm32 - ARM (STM32) 上的 RTC 警报与系统警报

> ID：13446875
> 
> 赞同：3
> 
> 时间：2012-11-19T02:24:56.763
> 
> 标签：stm32, alarm, real-time-clock

我正在学习[stm32F4](https://www.st.com/en/microcontrollers-microprocessors/stm32f4-series.html)。有一些我无法真正理解的困惑。

RTC报警和原系统报警有什么区别。我只知道RTC可以节省更多电量，但没有别的。任何人都可以向我解释或举例说明差异。非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2019-05-14T12:35:54.603

请查看此[应用说明](https://www.st.com/content/ccc/resource/technical/document/application_note/7a/9c/de/da/84/e7/47/8a/DM00025071.pdf/files/DM00025071.pdf/jcr:content/translations/en.DM00025071.pdf)。这应该详细说明 RTC 的功能及其提供的功能。

简而言之：嵌入在 STM32 微控制器中的实时时钟 (RTC) 充当独立的 BCD 定时器/计数器。RTC 可用于提供功能齐全的日历、警报、定期唤醒单元、数字校准、同步、时间戳和高级篡改检测。

RTC 也可以比内部 SysClk 更精确。

# c# - 检查是否仅在枚举中设置了这些标志

> ID：13446882
> 
> 赞同：5
> 
> 时间：2012-11-19T02:25:49.040
> 
> 标签：c#, bitwise-operators, flags

我已经创建了一个这样的扩展方法..

```
public static bool AllFlagsSet<T>(this T input, params T[] values) where T : struct, IConvertible
{
    bool allSet = true;
    int enumVal = input.ToInt32(null);

    foreach (T itm in values)
    {
        int val = itm.ToInt32(null);
        if (!((enumVal & val) == val)) 
        {
            allSet = false;
            break;
        }
    }

    return allSet;
} 
```

这非常适合我需要的目的，但是我现在需要创建一个具有相同签名的方法，该方法检查是否仅设置了这些值。

基本上是这样的。

```
public static bool OnlyTheseFlagsSet<T>(this T input, params T[] values) where T : struct, IConvertible
{
} 
```

我能想到的唯一方法是让所有可用的枚举值检查已设置并确认只有提供的两个已设置。

有没有另一种方法可以使用某种按位运算来解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-19T02:30:31.407

在所有必需的标志上执行“或”并与输入进行比较 - 应该相等。与以下类似，使用正确的循环来计算左侧的值：

```
var onlyTheseFlagsSet = (value[0] | value[1]) == input; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-19T02:39:17.390

排他性要求意味着

`input = values[0] | values[1] | ... | values[values.Length - 1]`

所以，这是你的实现：

```
return input.ToInt32(null) == values.Aggregate(0, 
       (total, next) => total | next.ToInt32(null)); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-19T02:34:28.410

这会翻转每个输入值的位。如果只设置了这些，则结果值将为零。否则，如果未设置该值，它会将位翻转为 1，`input`这将使该值保持非零。

```
public static bool OnlyTheseFlagsSet<T>(this T input, params T[] values) where T : struct, IConvertible
{
    int enumVal = input.ToInt32(null);

    foreach (T itm in values)
    {
        int val = itm.ToInt32(null);
        enumVal = enumVal ^ val;                
    }

    return (enumVal == 0);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-19T02:30:59.660

我是否遗漏了什么，或者您是否可以不只是对参数 T[] 值求和并检查输入是否等于结果？
如果您只需要这些标志而不需要其他标志，则输入应等于这些标志的总和。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-19T02:38:19.043

假设您可以将输入转换为枚举：

```
foreach(MyFlags flag in values)
    if (!input.HasFlag(flag))
        return false;

return true; 
```

是的，我就是这么懒。

# java - 用于 Java 的 Telnet 库

> ID：13446887
> 
> 赞同：0
> 
> 时间：2012-11-19T02:27:37.137
> 
> 标签：java, user-interface, telnet

是否有允许程序使用 Telnet 协议的 Java 库？

我想使用 Telnet 协议连接到一个网站，我想在滚动文本字段中显示从该网站获得的输出，并允许用户向服务器发送文本。是否有任何简单的方法可以使用 Swing GUI 完成此操作？

**注意：**已经有一个问题的标题与这个问题（Java Telnet 库）非常相似——但是，这个问题和那个问题问的是两个完全不同的问题。

编辑：我正在尝试连接到服务器，而不是网站 - 特别是 telehack.com。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T02:29:37.470

尝试从这里开始：http: [//javatelnet.org/space/start](http://javatelnet.org/space/start)。

至于 Swing GUI，您应该能够轻松地将文本从 Telnet 服务器通过管道传输到其中（尽管出于安全目的，您确实应该使用 SSH）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T02:39:41.163

我会避免使用 Apache。我以前使用过它，但在重负载下我收到了乱序消息到达主机。由于主机是控制我们的服务器的，这该死的没用，因为命令需要精确。

# jquery - 用一个提交按钮 jQuery 提交两个表单

> ID：13446889
> 
> 赞同：6
> 
> 时间：2012-11-19T02:28:29.673
> 
> 标签：jquery, forms

通过在stackoverflow上搜索答案，我尝试了多种方法。

我有两种形式

表格 1 基本设置：

```
<form action="/post" class="frm-form"  method="post" name="post" 
onsubmit="return vB_Editior['text_editor'].prepare_submit(0,0)" id="quick_reply">
   <textarea></textarea>
      <input type="submit" name="post" value="Send">
</form> 
```

表 2 基本设置：

```
<form enctype="multipart/form-data" id="tagnotif" style="display:none;" 
onsubmit="return vB_Editor['text_editor'].prepare_submit(0,0)" name="post2" 
method="post" action="/privmsg">
   <input id="username" class="post" type="text" tabindex="1" size="25" 
       name="username[]"style="margin:1px 0"><br />
   <input id="acpro_inp10" class="post" type="text" 
     onkeypress="if (event.keyCode==13){return false}" title="" tabindex="2" 
    maxlength="64" size="45" value="You have been tagged" name="subject"><br />
  <textarea id="textingnotification" rows="15" cols="9"
   name="message" tabindex="3"></textarea>
   <input type="hidden" value="" name="lt">
     <input type="hidden" value="inbox" name="folder">
       <input type="hidden" value="post" name="mode">
</form> 
```

我只需要在第一个表单的 SEND press 上提交这两个表单

尝试将此代码变量与主脚本一起使用：虽然它不会同时通过，也不会刷新页面......

```
$(document).ready(function() { 
    $('#quick_reply').ajaxForm(function() { 
            alert("Thank you for your submitting form 1"); 
    });
    $('#tagnotif').ajaxForm(function() { 
            alert("Thank you for your submitting form 2"); 
    });

}); 

function mySubmitFunction() {
    $("#quick_reply").submit();
    $("#tagnotif").submit();
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T02:34:34.927

我不认为您可以从单个 html 页面执行两个常规发布请求，因为发布帖子涉及离开页面并遵循重定向响应。

如果您通过[ajax](http://api.jquery.com/jQuery.ajax/)提交表单，为什么不只制作一个 ajax 按钮并获取所需的参数以粘贴在请求中？IE：

```
$.ajax({
  type: 'POST',
  dataType: 'JSON',
  data: {param1: $('input#param1').val(), param2: $('input#param2').val()},
  url: 'url to post to',
  success: (your success callback function goes here)
}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-04-16T16:53:08.900

首先，您需要从这两个表单中删除每个提交按钮如果表单有提交按钮，这将不起作用。

第一种形式

```
<form action="/post" id="frm-form" class="frm-form"  method="post" name="post" 
onsubmit="return vB_Editior['text_editor'].prepare_submit(0,0)" id="quick_reply">
   <textarea></textarea>
      <input id="frm-submit" type="button" name="post" value="Send">
</form> 
```

第二种形式

```
<form enctype="multipart/form-data" id="tagnotif" style="display:none;" 
onsubmit="return vB_Editor['text_editor'].prepare_submit(0,0)" name="post2" 
method="post" action="/privmsg">
   <input id="username" class="post" type="text" tabindex="1" size="25" 
       name="username[]"style="margin:1px 0"><br />
   <input id="acpro_inp10" class="post" type="text" 
     onkeypress="if (event.keyCode==13){return false}" title="" tabindex="2" 
    maxlength="64" size="45" value="You have been tagged" name="subject"><br />
  <textarea id="textingnotification" rows="15" cols="9"
   name="message" tabindex="3"></textarea>
   <input type="hidden" value="" name="lt">
     <input type="hidden" value="inbox" name="folder">
       <input type="hidden" value="post" name="mode">
</form> 
```

jQuery

```
$("#frm-submit").change(function(){
    $("#frm-form").submit();
    $("#tagnotif").submit();
}); 
```

这将刷新页面并提交两个表单

# scala - 验收风格测试有利于使用 Specs2 进行单元风格测试？

> ID：13446891
> 
> 赞同：3
> 
> 时间：2012-11-19T02:28:57.957
> 
> 标签：scala, specs2

在 Specs2 的上下文中，纯粹主义者可能会争辩说应该使用*单元测试风格*来进行单元测试。Specs2*验收测试风格*用于进行验收测试。这听起来有点明显;-)

但是，我甚至喜欢编写单元测试的验收测试风格（主要是为了一致性）。有什么技术原因我不应该这样做吗？

我只是喜欢以相同的风格编写所有测试的一致性，并且单元测试风格对于我的项目所有者（不是技术人员）来说有点难以驾驭。虽然验收测试风格允许他们在偶然发现缺失的功能时添加新的测试，例如：

```
"Cool new feature" ! todo ^ 
```

正如您从下面的示例（改编自[Specs2 站点](http://etorreborre.github.com/specs2/)）中看到的那样，验收测试风格对于非极客来说更具可读性，并且允许更好地分离关注点，尤其是当规范变得更大时。此外，它可能会导致更多的作文风格或写作测试。

单元测试风格：

```
 import org.specs2.mutable._

  class HelloWorldSpec extends Specification {

    "The 'Hello world' string" should {
      "contain 11 characters" in {
        "Hello world" must have size(11)
      }
      "start with 'Hello'" in {
        "Hello world" must startWith("Hello")
      }
      "end with 'world'" in {
        "Hello world" must endWith("world")
      }
    }
  } 
```

验收测试风格：

```
 import org.specs2._

  class HelloWorldSpec extends Specification { def is =

    "This is a specification to check the 'Hello world' string"       ^
                                                                      p^
    "The 'Hello world' string should"                                 ^
      "contain 11 characters"                                         ! e1^
      "start with 'Hello'"                                            ! e2^
      "end with 'world'"                                              ! e3^
      "do something cool"                                             ! todo^
      "do something cooler"                                           ! todo^
                                                                      end

    def e1 = "Hello world" must have size(11)
    def e2 = "Hello world" must startWith("Hello")
    def e3 = "Hello world" must endWith("world")
  } 
```

谁知道，有一天，甚至可能以使用字符串插值（或其他东西）和附加解析例程的更具可读性的 DSL 的多个文件结束：

HelloTest.specs2

```
 s"
  This is a specification to check the 'Hello world' string
  =========================================================

  The 'Hello world' string should
  -------------------------------
  - $e1 contain 11 characters
  - $e2 && $e3 start with 'Hello' and end with 'world'
  - $todo do something cool
  - $todo do something cooler
  " 
```

MyAppSpec2.scala

```
 import org.specs2._

  class HelloWorldSpec extends Specification { def is = HelloTest.specs2

    def e1 = "Hello world" must have size(11)
    def e2 = "Hello world" must startWith("Hello")
    def e3 = "Hello world" must endWith("world")
  } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T03:25:40.317

没有技术原因为什么不能使用“验收”样式来编写单元测试，而相反地使用“单元”样式来编写验收测试（因为您可以使用带有代码折叠功能的编辑器来仅显示文本，或者您可以使用`plan`参数执行规范并获得规范的全文而不执行示例）。

您需要注意的两个“技术”事项：

*   “单元”规范使用变量来注册示例，因此如果您尝试使用不同的线程构建这样的规范，它会受到并发问题的影响

*   “接受”规范使用示例的最后一个值作为结果。因此，默认情况下，当您想在示例中每行编写一个期望时，它不太方便。要解决这个问题，您需要混合`ThrownExpectation`特征或`and`在期望之间使用运算符

最后，我一定会研究在 Scala 2.10 发布时使用字符串插值作为验收规范的可能性。

# c# - 从列表中向 xml 添加元素

> ID：13446894
> 
> 赞同：0
> 
> 时间：2012-11-19T02:29:42.257
> 
> 标签：c#, xml, linq-to-xml

我有一个问题，我无法弄清楚这是怎么回事。我想将元素从列表框中插入到我的 XML 文件中。在列表框中有 Menuelem 元素，它有一个字符串和一个 int 变量。

```
 dt = DateTime.Now;
    XDocument doc = XDocument.Load(path);

    XElement user = new XElement("user", new XAttribute("id", id),
                        new XElement("order", new XAttribute("id", key),
                            new XElement("date", dt.ToString()))
                    );
    doc.Element("orders").Add(user);
    doc.Save(path);
    foreach (Menuelem item in listBox6.Items)
    {
        int j=0;
        var menuelem = new XElement("menuelem", new XAttribute("db", j),
                       new XElement("name", item.Nev),
                       new XElement("price", item.Ar));
        doc.Element("order").Add(menuelem); //throws nullreferenceexception
        doc.Save(path);
        j++;
    }

    listBox6.Items.Clear();
    label3.Text = "";
    key++;

} 
```

我想看看我的 XML 是这样的：

```
<?xml version="1.0" encoding="utf-8" ?> 
<orders>
 <user id="0">
  <order id="0">
   <date>2012.11.19\. 2:16:12</date>
   <menuelem db = "0">
    <name>asdasdas</name>
    <price>1000</price>
   <menuelem db = "1">
    <name>asds</name>
    <price>2000</price>
  </order>
 <user id="0">
  <order id="1">
    <date>2012.11.19\. 2:16:15</date>
    <menuelem db = "0">
      <name>asdasdas</name>
      <price>1000</price>
    <menuelem db = "1">
      <name>asds</name>
      <price>2000</price>
   </order>
 </user>
</orders> 
```

任何人都可以使用 linq 解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T06:14:48.783

你有空引用，因为你没有“订单”作为根元素，所以你需要这样做

```
 XElement element =  doc.Element("orders").Element("user").Element("order");
 element.Add(menuelem); 
```

如果您在“用户”中有多个元素，那么您可以使用方法“元素”而不是“元素”。“Element”方法将返回第一个元素，“Elements”方法将返回 XElement 的 IEnumerable。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-19T02:40:03.437

它会抛出一个`NullReferenceException`，因为显然您的文档中没有“订单”元素，因此`doc.Element("order")`返回 null。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-19T02:44:04.223

您的代码尝试查找“订单”元素作为仅包含根元素（“订单”）的文档的直接子元素，并作为结果获取`null`. 有关[`Element`](http://msdn.microsoft.com/en-us/library/system.xml.linq.xcontainer.element.aspx)它搜索元素的内容和返回时间的详细信息，请参阅`null`。

您需要正确选择新插入的元素。简单的选项是[`Descendants`](http://msdn.microsoft.com/en-us/library/bb353813.aspx)按名称使用并选择最后一个（即添加刚刚添加的用户）

```
 doc.Descendants("order").Last().Add(menuelem); 
```

更简单的选择是完全构建“用户”元素并将其添加到树中。比你不需要搜索刚刚添加到它的节点的文档。

# php - PHP：删除另一个给定ID的会话

> ID：13446899
> 
> 赞同：4
> 
> 时间：2012-11-19T02:31:02.877
> 
> 标签：php, security, session, login, sessionid

我有以下问题：

1.  用户 X 登录 PC1，session_id 为 1000。离开但忘记注销。
2.  用户 X 登录 PC2，session_id 为 1001。
3.  在会话 1000 超时之前，用户 Y 以用户 X 的身份访问 PC1，session_id 为 1000。

通过这种方式，两个用户可以作为同一用户在不同的 PC 和不同的会话 ID 中访问。我想做的是每次用户登录（完成）时存储新的 session_id，并删除以前存储的 session_id。但**我不知道如何删除或修改给定 id 的会话文件，而不更改当前会话。**

我的意思是，我想做以下事情：

1.  用户 X 登录 PC1，session_id 为 1000。脚本将 1000 存储为 last_session_id。离开但忘记注销。
2.  同一用户登录 PC2，session_id 为 10001。脚本获取 last_session_id (1000) 并删除该会话信息；然后将 1001 存储为新的 last_session_id。
3.  用户 Y 使用 session_id 1000 转到 PC1，但由于信息已删除，因此无法以 X 身份访问。

*session_id(old_session)* 可以正常工作吗？或者该函数只是重命名当前会话 ID，但保留这些值？

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-11-17T21:14:42.950

我找到了这个

```
$session_id_to_destroy = $sessionid;
// 1\. commit session if it's started.
if (session_id()) {
    session_commit();
}

// 2\. store current session id
session_start();
$current_session_id = session_id();
session_commit();

// 3\. hijack then destroy session specified.
session_id($session_id_to_destroy);
session_start();
session_destroy();
session_commit();

// 4\. restore current session id. If don't restore it, your current session will refer to the session you just destroyed!
session_id($current_session_id);
session_start();
session_commit(); 
```

它对我来说非常有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T02:46:40.393

根据我的经验，我使用一张表来存储与会话相关的数据。该表包含两个或多个 userID 字段，lastSessionID。在您的系统上只需要获取 sessionId 和 userID 然后将其与存储在 db 中的最后一个 sessionID 进行比较是指相同的 userID。如果 U 获得相同的 sessionID 而不是继续但如果不同的重定向页面要注销。但是，要使用这种方法，您应该在每次用户登录时将 userID 和 sessionId 保存到数据库中。

# json - Json混合字母数字键排序顺序

> ID：13446900
> 
> 赞同：0
> 
> 时间：2012-11-19T02:31:05.940
> 
> 标签：json, google-chrome, sorting

我使用json来存储在线选择和输入的结果。我有一个特殊的程序来对 json 对象进行字符串化（用于过滤、以单行显示的数组等）。我给了所有集合元素的名称——例如“Tracks”——以及它们的链接元素给定的数字标签——例如“231”——以促进无限唯一链接的生成。当写入文件时，尤其是在开发过程中，可以很容易地检查底部的集合和它们正上方的最新添加。

Chrome 会自动实现这一点，而其他浏览器则不会（IE 未测试）。

由于我在动画和最新的 Chrome 更新方面遇到问题，我想实现 Chrome 对字符串所做的操作，这样我就可以使用 Firefox 获得同样的便利。有谁知道怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T23:31:04.420

这是我插入的内容以防万一

```
//set alphanumeric order
        strArr = [];
        numArr = [];
        for(n in nset){
            if(parseInt(n)){
                numArr.push([parseInt(n),nset[n]]);
            }
            else{
                strArr.push([n,nset[n]]);
            }
        }
        numArr.sort(function(a,b){return a-b});
        nset = {};
        arr = numArr.concat(strArr);
        for(a=0; a<arr.length; a+=1){
            nset[arr[a][0].toString()] = arr[a][1];
        } 
```

# php - YouTube API：无法使用相同的access_token进行第二次请求

> ID：13446901
> 
> 赞同：0
> 
> 时间：2012-11-19T02:31:07.833
> 
> 标签：php, python, youtube-api

我正在尝试使用 youtube 分析 api 获取数据。获得 access_token 后，我可以使用它发出请求并获取用户信息，这是 python 请求：

```
newurl='https://gdata.youtube.com/feeds/api/users/default?'
token={'v':'2.1', 'access_token':access_token}
urll = newurl + urllib.urlencode(token)
result = urllib.urlopen(newurl + urllib.urlencode(token)).read() 
```

然后，我尝试使用相同的 access_token 发出第二个请求，如下所示：

```
newurl2='https://www.googleapis.com/youtube/analytics/v1/reports'
newtoken={'v':'2.1', 
      'start-date':'2010-10-10',
      'end-date': ###current time###,
      'metrics':'views,comments,likes,dislikes,shares',
      'ids':'channel==' ###user_id###,
      'access_token':access_token}
result = urllib.urlopen(newurl2 + urllib.urlencode(newtoken)).read() 
```

但在这里我得到了一个错误：

```
"code": 401,
"message": "Invalid Credentials" 
```

当我使用 PHP 时，我可以成功发出第二个请求，但我无法弄清楚为什么使用 python 会出错，有人可以帮我吗？谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T18:26:49.893

我强烈建议为此使用 python gapi 客户端库，因为它将为您处理所有 oauth 流程。

我对 v=2.1 参数感到困惑 - 分析 API 刚刚达到 V1，并且没有 v API。我没有尝试将 V2 数据 API 与新的分析 API 一起使用，V3 数据 API 和 V1 分析 API 非常相似，我个人会坚持一起使用它们。

最后，我会检查您获得了哪些 oauth2 范围的访问令牌 - 数据和分析 API 将需要不同的范围（您需要“https://www.googleapis.com/auth/yt-analytics.readonly”分析）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T02:44:09.763

我不能代表 API 调用，但看起来你缺少一个“？” 在 newurl2 的末尾。

# php - excel文件的PHP标头不起作用

> ID：13446903
> 
> 赞同：1
> 
> 时间：2012-11-19T02:31:24.147
> 
> 标签：php, excel, mime-types

我在一个目录中有一组 .xls 文件，其 .htaccess 会阻止所有访问。然后在一个目录上，我有一个 PHP 文件，它类似于以下内容来恢复 .xls 文件并下载它。这是 PHP 文件的大部分内容：

```
<?php
require_once( '../wp-blog-header.php');

if (is_user_logged_in()) {

    $file = "{$_SERVER['DOCUMENT_ROOT']}/files/downloads/{$_GET['name']}";
    if( file_exists( $file ) ) {
        header( "Content-Disposition: attachment; filename={$file}");
        header( 'Content-Type: application/vnd.ms-excel');
        readfile( $file );
        exit;
    }

} else {
    die();
} ?> 
```

然后链接的工作方式如下：[http://domain.com/files/file.php?name=excel.xls](http://domain.com/files/file.php?name=excel.xls)

如果我删除所有标题并只放置类似 echo "download link here" 的内容，那么它工作正常但是当我有标题信息显示错误 6 (net::ERR_FILE_NOT_FOUND)：

该脚本适用于内容类型为 text/html 的 html 文件，因此下载目录的路径运行良好。我缺少某些特定于 excel 文件的内容吗？

有任何想法吗？

# java - Java：将文件读入字符串的异常

> ID：13446904
> 
> 赞同：-3
> 
> 时间：2012-11-19T02:31:29.777
> 
> 标签：java, readline

```
static void parse(String fileName) throws IOException{
    FileReader fileReader=new FileReader((fileName));
    BufferedReader bufferedReader = new BufferedReader(fileReader);
    StringBuilder stringBuilder=new StringBuilder();
    String string;
    do{
        string=bufferedReader.readLine();
        stringBuilder.append(string);
        }while(!string.equals(null));
    System.out.println(stringBuilder.toString());

} 
```

我尝试使用 StringBuilder 将整个文件读取为字符串。但是我在while循环中出错。为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T02:39:02.277

以下是您的循环应该是什么样子

```
while((string = bufferedReader.readLine()) != null) {                
    stringBuilder.append(string);
} 
```

您的版本的问题是`string.equals(null)`最终会出现在 NPE 中。另外，请注意，参数`String.equals()`将始终返回 false `null`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T02:40:06.187

问题在于

```
string.equals(null) 
```

如果 string 为 null，则不能对其调用 equals 方法。

# algorithm - 算法 - 可以运输的最大谷物数量

> ID：13446908
> 
> 赞同：6
> 
> 时间：2012-11-19T02:32:12.973
> 
> 标签：algorithm

我在谷歌遇到了一个我无法解决的面试问题：

> `N`在距离城镇一公里的绿洲上有一堆公斤的谷物`D`。谷物需要由骆驼车运输，骆驼车的初始位置在绿洲。推车一次可以运载`C`公斤的谷物。骆驼在运输谷物时使用谷物作为燃料。它消耗`F`公斤/公里。
> 
> `X`编写一个函数，计算可以运送到城镇的最大谷物量 ( kg)。

* * *

我尝试使用递归，但如果不让自己感到困惑，我就无法走得更远。

这是我到目前为止所拥有的：

```
number of transports = N / C

fuel amount for distance D = D * F

X = N - ((number of transports) * 2 * (fuel amount for distance D)) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T18:49:51.873

假设 N、D、C 和 F 是输入，-

```
float computeMaxGrains(float N, float D, float C, float F)
{
    //Case when the cart can carry all grains at once
    if(N <= C)
    {
        float remainingGrains = N - D*F;
        if(remainingGrains >= 0)
        {
            return remainingGrains;
        }
        else
        {
            //out of fuel
            return 0;
        }
    }

    // Grains consumed per Km = (Total Number of Trips) * F
    // Total Number of Trips = 2*(N/C) + 1
    float grainsConsumedPerKm = (float) (2*(Math.floor(N/C)) + 1);

    // Remaining grains after Camels fuel = C*(N/C - 1)
    float remainingGrains = (float) (C*(Math.floor(N/C)));

    // Distance that the Camel is able to travel before the camel is 
    // 1 less round trip = 
    // (N - Remaining Grains) / grainsConsumedPerKm
    // From equation N - (grainsConsumedPerKm * distanceTravelled) = 
    // Remaining Grains
    float distanceTravelled = (N - remainingGrains) / grainsConsumedPerKm;

    if(distanceTravelled >= D)
    {
        return N - (D * grainsConsumedPerKm);
    }

    //Use recursion for every 1 less round trip
    return computeMaxGrains(remainingGrains, D-distanceTravelled, C, F);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-19T09:27:38.747

我认为这个问题最好迭代地工作，向前。我将拆分决策点。如果我正在编写一个公式，我会使用？：所有结​​果都以 Kg 为单位。

```
The first question is whether there is enough grain, and cart capacity, to 
justify an initial trip from oasis to town. The camel would eat FD, so 
if FD >= min(N,C) the answer is 0

If FD < min(N,C), the net amount transferred on the initial oasis to town 
trip is min(N,C)-FD. 

The camel is now in town, the remaining grain pile is N-min(N,C), and we 
have to decide whether to send it back again. If C <= 2FD, no round trip
can be profitable.

Otherwise consider a round trip with at least C remaining at the oasis. That 
gains net C-2FD (FD put in the cart in town to keep the camel fed getting 
to the oasis, C-FD remaining in the cart when it gets back to town).

If N>C, we can do floor((N-C)/C) of those round trips, net gain 
floor((N-C)/C)*(C-2FD).

After doing the initial run and any full cart round trips, the remaining 
grain pile is N%C, the remainder on dividing N by C.

If N%C > 2FD it is worth doing a final trip to empty the grain pile, with 
an additional net gain of N%C-2FD. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T03:09:58.057

作为一个想法，虽然绿洲中有超过 D*F 的谷物，但骆驼会带着 C 公斤旅行，或者绿洲中还剩下多少。骆驼在那里的旅途中消耗了 D*F 公斤，卸下了他的负载 - 2*D*F 公斤的谷物，如果剩下足够的谷物来保证回程，它就会返回。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-19T08:56:42.923

这只是一个猜测。我不确定。

令 G(x) 表示从源头运输到距离 x 处的最大谷物量。然后

```
G(x+1)= (G(x)/C)*(C-2F) + max(F,G(x)%C - F) 
```

现在，G(0)=N，我们需要使用上述公式找到 G(D)。

第二项 max(F,G(x)%CF) 表示

1.  F = 当他上次访问没有回来收集剩余的谷物时
2.  G(x)%C - F =上次访问的剩余grain然后消耗F返回目的地

# windows-8 - 如何将 Windows 8 现代 UI 与桌面应用程序连接起来？

> ID：13446909
> 
> 赞同：0
> 
> 时间：2012-11-19T02:32:15.577
> 
> 标签：windows-8, windows-runtime

我正在为 Windows 8 开发我的第一个应用程序，我在创建桌面应用程序或“现代 UI”应用程序（又名 Metro 应用程序）之间做出决定。

我的应用程序没有使用现代 UI 的触摸友好界面，但我在想什么对我的用户最有用。

如果他一直在使用现代 UI，那么创建一个带有通知的现代 UI 应用程序将是最好的选择。但是，如果用户是重度桌面用户，那就没关系了。

我注意到现代 UI 应用程序和桌面应用程序生活在完全不同的世界中。例如，我登录 Windows 8 Skype 客户端并转到桌面。Skype 客户端正在向我发送我没有看到的通知。桌面应用程序也会发生同样的情况，当我使用“开始”屏幕或现代 UI 应用程序时，我没有看到任何桌面应用程序与我交互。

我的问题是：我应该选择吗？连接这两个世界的最佳方式是什么？

我的应用程序可以在现代 UI 或桌面上很好地使用。我无法指出任何将其与一个或另一个联系起来的具体内容。即使那样，我也无法清楚地决定。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T05:51:32.147

You could create two apps: a desktop one and a Windows Store one, and let the user decide which one he wants to use.

With the proper approach you could share a lot of code between the two apps and only implement separately the parts that are platform (i.e. desktop or Windows Store) specific, such as UI, notifications etc. Take a look at [portable class libraries](http://msdn.microsoft.com/en-us/library/gg597391.aspx).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T02:52:33.417

您被明确禁止桥接它们。不允许 Metro 应用程序依赖于桌面应用程序。

> **3.1 您必须仅使用 Windows 运行时 API 来实现您的 Windows 应用商店应用程序的功能**
> 
> 我们在 Windows 应用商店应用 API 参考中描述了这些 API。您的应用程序可能仅依赖于 Windows 应用商店中列出的软件。

[http://msdn.microsoft.com/en-us/library/windows/apps/hh694083.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh694083.aspx)

# postgresql - PostgreSQL 中的查询成本

> ID：13446910
> 
> 赞同：3
> 
> 时间：2012-11-19T02:32:24.547
> 
> 标签：postgresql

当 'Explain' 与 PostgreSQL 中的 select 语句一起使用时，它会给出如下所示的查询计划

```
Seq Scan on employee  (cost=0.00..12.13 rows=1 width=438)
  Filter: ((lastname)::text = 'John'::text) 
```

我不明白“0.00..12.13”是什么意思？谁能解释一下？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-19T02:55:37.137

第一个数字是启动成本。其次是估计的总成本。

根据[文档](http://www.postgresql.org/docs/9.1/static/using-explain.html)，成本以计划者的成本参数确定的任意单位计量。传统做法是以磁盘页面获取为单位来衡量成本；也就是说，seq_page_cost 通常设置为 1.0，而其他成本参数是相对于该值设置的。

# gcc - gcc 内存编译

> ID：13446912
> 
> 赞同：3
> 
> 时间：2012-11-19T02:32:27.737
> 
> 标签：gcc

需要一个程序（用 c 编写）来执行以下操作。

1.  接受几行用户输入
2.  根据输入生成 C 程序
3.  编译生成的 c 程序并创建一个 .so 文件并动态链接到 main 并执行它。

一个关键要求是：生成的 C 程序不应在文件系统上，因为生成的 C 程序具有商业机密。是的，这种机制远非万无一失，但总比没有好。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T11:40:22.833

您可以使用内存文件系统作为 .so 的目的地，就像这样`sudo mount -osize=10M tmpfs /home/chill/tmp/supersikrit -t tmpfs`

# sql - SQL Server ON DELETE CASCADE 错误

> ID：13446914
> 
> 赞同：3
> 
> 时间：2012-11-19T02:32:41.763
> 
> 标签：sql, sql-server, database, database-design, schema

我正在设计一个数据库模式，但我被困在一个部分。下面是我的架构的简化版本。有人可以解释为什么下面的SQL：

```
CREATE TABLE Users (
  UserID INT NOT NULL PRIMARY KEY,
  FName VARCHAR(64) NOT NULL,
  LName VARCHAR(64) NOT NULL,
  UName VARCHAR(64) NOT NULL UNIQUE,
  PWord CHAR(32) NOT NULL,
  Role VARCHAR(13) NOT NULL
);

...

CREATE TABLE Sale (
  SaleID INT NOT NULL PRIMARY KEY,
  Book INT NOT NULL REFERENCES Books(BookID) ON DELETE NO ACTION,
  Merchant INT NOT NULL REFERENCES Users(UserID) ON DELETE CASCADE,
  Upload DATETIME NOT NULL,
  Sold BIT NOT NULL,
  Price DECIMAL(10, 2) NOT NULL,
  Condition VARCHAR(9) NOT NULL,
  Written BIT NOT NULL,
  Comments VARCHAR(8000) NULL
);

...

CREATE TABLE Purchases (
  PurchaseID INT NOT NULL PRIMARY KEY,
  Buyer INT NOT NULL REFERENCES Users(UserID) ON DELETE CASCADE,
  Merchant INT NOT NULL REFERENCES Users(UserID) ON DELETE NO ACTION,
  Sale INT NOT NULL REFERENCES Sale(SaleID) ON DELETE CASCADE UNIQUE,
  Time DATETIME NOT NULL
); 
```

...导致此错误，以及如何克服它：

```
Msg 1785, Level 16, State 0, Line 38
Introducing FOREIGN KEY constraint 'FK__Purchases__Sale__25869641' on table
'Purchases' may cause cycles or multiple cascade paths. Specify ON DELETE
NO ACTION or ON UPDATE NO ACTION, or modify other FOREIGN KEY constraints. 
```

`ON DELETE CASCADE`如果可能的话，我想保留`Purchases.Sale`属性。

感谢您的时间。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T02:42:35.477

很可能是因为您从两个不同的表中引用“用户” - 购买中的买家和销售中的商家。数据库可能没有意识到这两个记录永远不会相同 - 但它知道它是同一个表，因此抱怨级联的潜在问题。

# nginx - nginx默认错误页面存储在哪里

> ID：13446916
> 
> 赞同：8
> 
> 时间：2012-11-19T02:33:27.403
> 
> 标签：nginx

`nginx`它在磁盘上输出的默认错误页面存储在哪里？IE标准`404`看起来像：

404 未找到

# 404 未找到

* * *

nginx

希望这些**不会**硬编码到 nginx 源代码中。谢谢。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-11-19T03:08:38.903

查看 nginx 目录中的 html 文件夹 - 应该有 50x 个页面。

默认情况下，我相信所有“特殊页面”，包括 404 页面都是*硬编码的*

```
static char ngx_http_error_404_page[] =
"<html>" CRLF
"<head><title>404 Not Found</title></head>" CRLF
"<body>" CRLF
"<center><h1>404 Not Found</h1></center>" CRLF
; 
```

来源：[https ://github.com/nginx/nginx/blob/release-1.15.8/src/http/ngx_http_special_response.c#L132](https://github.com/nginx/nginx/blob/release-1.15.8/src/http/ngx_http_special_response.c#L132)

但可以定制：

```
server {
    ...
    error_page 404 /404.html;
    ...
} 
```

# c++ - long long 可能不存储整数？

> ID：13446917
> 
> 赞同：4
> 
> 时间：2012-11-19T02:33:44.163
> 
> 标签：c++

在我的作业中，它说“不要添加 long int 或 long long 私有成员来完成此操作，因为不能保证两者都可以实际存储比 int 更大的数字。” 我知道 int 的最大值为 2^31-1，long long 的最大值为 2^63-1。那么有人可以给我一个例子，为什么给定的句子是真的？

提前致谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-19T02:35:08.917

它的意思正是它所说的。不能保证 a`long long`可以存储比 a 更多的数字`int`。它*至少一样大*，但它可以是一样的。

> 我知道 int 的最大值为 2^31-1 而 long long 的最大值为 2^63-1

对于某些平台，使用某些编译器，这可能是正确的，但并不总是相同的。C++ 也不保证。

### 3.9.1 基本类型[basic.fundamental]

> 2) 有五种标准有符号整数类型：“<code>signed char”、“<code>short int”、“<code>int”、“<code>long int”和“<code>long long int” . 在此列表中， **每种类型提供的存储空间至少与**列表中它前面的类型一样多。[...]（强调我的）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-19T03:01:28.120

C 标准规定了两个相关标准：

*   `sizeof(char) ≤ sizeof(short) ≤ sizeof(int) ≤ sizeof(long) ≤ sizeof(long long) ≤ sizeof(uintmax_t)`

    这在 ISU/IEC 9899:2011，§6.2.5 类型，¶8 中间接指定：*对于具有相同符号和不同整数转换等级的任何两个整数类型（参见 6.3.1.1），类型的值范围为较小的整数转换等级是其他类型值的子范围。*

*   类型最大值的最小允许值（ISO/IEC 9899:2011, §5.2.4.2.1 Sizes of integer types `<limits.h>`）：

    *   `SCHAR_MAX`≥ 127 // 2 ⁷ -1
    *   `SHRT_MAX`≥ 32,767 // 2 ^(15) -1
    *   `INT_MAX`≥ 32,767 // 2 ^(15) -1
    *   `LONG_MAX`≥ 2,147,483,647 // 2 ^(31) -1
    *   `LLONG_MAX`≥ 9,223,372,036,854,775,807 // 2 ^(63) -1

报价在形式上是正确的；可以设计`long`存储范围不大于的系统`int`——事实上，大多数 32 位系统（我所知道的所有系统）都是这种情况，在 Windows 64 上也是如此。它不太可能是准确的写`long long`; 我知道没有系统在哪里`sizeof(int) == sizeof(long long)`（并且，由于引用的不等式，`sizeof(int) == sizeof(long)`）。在大多数 Unix 64 位系统上，`sizeof(int) == 4`、`sizeof(long) == 8`和`sizeof(long long) == 8`; 在 Windows 64 上，`sizeof(long) == 4`只有`long long`(或`__int64`) 是 64 位类型。

# wordpress - 显示评论的回复者（wordpress）

> ID：13446919
> 
> 赞同：1
> 
> 时间：2012-11-19T02:34:18.030
> 
> 标签：wordpress

wordpress 中的线程评论很棒，它们为您提供了一种简单的可视化讨论树，以查看谁对谁说了什么。

我想知道是否可以显示对以下评论的回复：-'此评论是回复（回复的人的姓名以及该评论的永久链接#，因为所有评论都被赋予了他们的编号的 id在页面上，它可以很容易地让你回到它的确切评论）？

# ios - 使用自动布局约束时如何获取视图的当前宽度和高度？

> ID：13446920
> 
> 赞同：112
> 
> 时间：2012-11-19T02:34:22.970
> 
> 标签：ios, autolayout

我不是在谈论 frame 属性，因为从中您只能在 xib 中获取视图的大小。我说的是视图何时因约束而调整大小（可能在旋转之后，或响应事件）。有没有办法得到它当前的宽度和高度？

我尝试遍历其约束以寻找宽度和高度约束，但这不是很干净，并且在存在内在约束时会失败（因为我无法区分两者）。此外，这仅在它们实际上具有宽度和高度约束时才有效，如果它们依赖于其他约束来调整大小，则它们不会。

为什么这对我来说如此困难。啊！

* * *

## 回答 #1

> 赞同：251
> 
> 时间：2012-11-24T15:23:13.040

答案是`[view layoutIfNeeded]`。

原因如下：

`view.bounds.size.width`您仍然可以通过检查and `view.bounds.size.height`（或框架，除非您正在使用）来获得视图的当前宽度和高度`view.transform`。

如果您想要的是现有约束所隐含的宽度和高度，则答案不是手动检查约束，因为这需要您重新实现自动布局系统的整个约束解决逻辑才能解释那些约束。相反，您应该做的只是*要求自动布局更新该布局*，以便它解决约束并使用正确的解决方案更新 view.bounds 的值，然后检查 view.bounds。

你如何要求自动布局更新布局？`[view setNeedsLayout]`如果您希望自动布局在运行循环的下一轮更新布局，请调用。

但是，如果您希望它立即更新布局，以便稍后在当前函数中或在运行循环之前的另一点**立即访问新的边界值**`[view setNeedsLayout]`，那么您需要调用and `[view layoutIfNeeded]`。

您问了第二个问题：“如果我没有直接引用它，我该如何更改高度/宽度约束？”。

如果您在 IB 中创建约束，最好的解决方案是在您的视图控制器或视图中创建一个 IBOutlet，以便您可以直接引用它。如果您在代码中创建了约束，那么您应该在创建它时保留内部弱属性中的引用。如果其他人创建了约束，那么您需要通过检查视图上的 view.constraints 属性，可能还有整个视图层次结构，并实现找到关键 NSLayoutConstraint 的逻辑来找到它。这可能是错误的方法，因为它还有效地要求您确定哪个特定约束确定了边界大小，而不能保证对该问题有一个简单的答案。最终的边界值可能是一个非常复杂的多重约束系统的解决方案，

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-01-16T12:02:58.043

我有一个类似的问题，我需要`UITableView`根据`UIStoryboard`. 我能够使用`- (void)viewDidLayoutSubviews`. 这很有用，因此您不需要子类化视图并覆​​盖其布局方法。

```
/*** SET TOP AND BOTTOM BORDERS ON TABLE VIEW ***/
- (void)addBorders
{
    CALayer *topBorder           = [CALayer layer];
    topBorder.frame              = CGRectMake(0.0f, self.tableView.frame.origin.y, 320.0f, 0.5f);
    topBorder.backgroundColor    = [UIColor redColor].CGColor;

    CALayer *bottomBorder        = [CALayer layer];
    bottomBorder.frame           = CGRectMake(0.0f, (self.tableView.frame.origin.y + self.tableView.frame.size.height), 320.0f, 0.5f);
    bottomBorder.backgroundColor = [UIColor redColor].CGColor;

    [self.view.layer addSublayer:topBorder];
    [self.view.layer addSublayer:bottomBorder];
}

/*** GET AUTORESIZED FRAME DIMENSIONS ***/
- (void)viewDidLayoutSubviews{
    [self addBorders];
} 
```

如果不从该方法调用该方法`viewDidLayoutSubview`，则仅正确绘制顶部边框，因为底部边框位于屏幕外的某个位置。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-03-30T10:14:56.580

对于那些可能仍然面临此类问题的人，尤其是 TableviewCell。

只需覆盖该方法：

```
-(void)layoutSubviews
{
//your code here like drawing a shadow
} 
```

如果是 UITableViewCell 或 UICollectionViewCell 创建单元格的子类并覆盖相同的方法：

```
-(void)layoutSubviews
{
//your code here like drawing a shadow
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-03-03T18:04:03.447

使用`-(void)viewWillAppear:(BOOL)animated`和调用 `[self.view layoutIfNeeded];`- 我试过了。

因为如果您使用`-(void)viewDidLayoutSubviews`它肯定会工作，但是每次您的 UI 需要更新/更改时都会调用此方法。这将很难管理。软键是您使用布尔变量来避免这种调用循环。更好用`viewWillAppear`。`viewWillAppear`如果再次加载视图（不重新分配），也会调用记住。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-11-19T02:43:42.913

框架仍然有效。最后，视图使用它的 frame 属性来布置自己。它根据所有约束计算该帧。约束仅用于初始布局（并且任何时候 layoutSubviews 在视图上调用，例如在旋转之后）。之后，位置信息在 frame 属性中。或者你有其他看法？

# r - 数据框中两列的箱线图

> ID：13446925
> 
> 赞同：0
> 
> 时间：2012-11-19T02:35:10.747
> 
> 标签：r, plot, boxplot

我有一个包含 3 列的数据框（df）：

```
test1   test2    res
500    23        30.75
200    23        31.36
110    26        30.38
105    23        31.57
55     21        33.56
35     21        31.39
27     18        36.89
23     23        35.44 
```

我想要一个图表包含两个结果的箱线图。我已经根据“ `res`”融化了数据并调用了新的（`df_melt`），我得到了以下信息：

```
res      variable  value
30.75     test1   500    
31.36     test1   200
30.38     test1   110
31.57     test1   105
33.56     test1    55
31.39     test1    35
36.89     test1    27
35.44     test1    23
30.75     test2    23
31.36     test2    23
30.38     test2    26
31.57     test2    23
33.56     test2    21
31.39     test2    21
36.89     test2    18
35.44     test2    23 
```

现在，我想根据变量列对数据进行箱线图，x 轴 = res，y 轴 = 值。因此，我希望每个“ `res`”值有两个箱线图，因为我在变量中有两种类型的数据（ietest1 和 test2）。

我试过这个：

```
boxplot(df_melt$value~df_melt$res) 
```

我只有 8 个箱线图，不清楚是哪个测试？？？我如何将第二个测试添加到图表中以便我可以比较它们。

我想将它们放在一起以便比较它们的全部原因....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T08:02:24.040

我想您正在寻找条形图，因为您无法基于单个值生成箱线图。

```
library(ggplot2)

ggplot(df_melt, aes(x = factor(res), y = value, fill = variable)) +
  geom_bar(stat="identity", position="dodge") 
```

![在此处输入图像描述](../Images/41af855c2f92eada22d06f472629af44.png)

* * *

*更新*：基于 OP 评论的箱线图解决方案：

可以使用以下方法生成具有多个不同颜色的箱线图的类比图：

```
ggplot(df_melt, aes(x = factor(res), y = value, fill = variable)) +
  geom_boxplot() +
  scale_fill_manual(values = c("white", "darkgray")) 
```

请注意，仅当和`values`的每个组合都有多个值时，此图才有意义。`res``variable`

箱线图的颜色将是白色和深灰色。`scale_fill_manual`您可以使用该功能修改颜色。

# svn - XSS注入工具的使用：XSSer

> ID：13446927
> 
> 赞同：1
> 
> 时间：2012-11-19T02:35:35.087
> 
> 标签：svn, xss

我从以下位置签出了一份 XSSer 副本：

```
svn co https://xsser.svn.sourceforge.net/svnroot/xsser xsser 
```

到我的 Mac OS X 10.7 并尝试运行它的示例：

```
python XSSer.py -u 'http://testasp.vulnweb.com' -g 'Search.asp?tfSearch=' -proxy 'http://127.0.0.1:8118? -referer '666.666.666.666? -user-agent 'correct audit' -Fuzz -s 
```

但在控制台中它说，`XSSer.py: No such file or directory`

下载`tar.gz`版本时也是如此。我错过了什么？

# drupal - 需要帮助使用 Drive SDK 从 Drive 下载电子表格

> ID：13446934
> 
> 赞同：2
> 
> 时间：2012-11-19T02:37:10.650
> 
> 标签：drupal, google-drive-api

我正在尝试在我的 Drupal 应用程序中使用 Google Drive。

我需要在此应用程序中打开一个电子表格（已在 Drive 帐户中）。

以下是我的设置方式：

1.）我通过调用 buildService 函数来构建服务（提供的代码）

```
function buildService(){
  $key=
 file_get_contents(TRUE_PATH.'9e01fd1414aa082fadeec316161eb7028558fbdeprivatekey.p12');
  $auth = new Google_AssertionCredentials(
    SERVICE_ACCOUNT_EMAIL,
    //array(DRIVE_SCOPE),
  $key);
  $client = new Google_Client();
  $client->setUseObjects(true);
  $client->setAssertionCredentials($auth);
  return new Google_DriveService($client);
} 
```

2.）在另一边，我抓住了回报： $service = buildService();

构建服务后，如何从云端硬盘获取电子表格？我知道电子表格的 url，但我不知道 fileId（不知道在哪里可以找到它）。

如果这是一个愚蠢的问题，我深表歉意。任何帮助是极大的赞赏。

谢谢，亚历克斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T04:14:28.370

您的电子表格的网址应如下所示：

```
https://docs.google.com/a/google.com/spreadsheet/ccc?key=<DOCUMENT_ID>#gid=0 
```

本质上，`key`查询参数的值是可以与 Drive API 一起使用的文件 ID。

# android - FragmentTransaction.replace() 不工作

> ID：13446935
> 
> 赞同：21
> 
> 时间：2012-11-19T02:37:17.623
> 
> 标签：android, android-fragments

我有一个`ListFragment`显示用户创建的项目列表。我有一个`ListView`它的 id 设置为“@android:id/list”和一个`TextView`id 为“@android:id/empty”。

我有一个操作栏按钮来显示一个片段，以允许用户为列表创建更多条目。这是`onOptionsItemSelected()`方法：

```
@Override
public boolean onOptionsItemSelected(MenuItem item) {
    Fragment frag = null;

    // Right now I only have code for the addCourse() fragment, will add more soon
    switch (item.getItemId()) {
    case R.id.addCourse:
        frag = new AddCourseFragment();
        break;
    default:
        return super.onOptionsItemSelected(item);
    }

    // The support library is being dumb and replace isn't actually 
    getFragmentManager().beginTransaction()
        .remove(this).add(getId(), frag).addToBackStack(null).commit();
    return true;

} 
```

AddCourseFragment 代码如下：

```
public class AddCourseFragment extends Fragment {

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
        View view = inflater.inflate(R.layout.fragment_addcourse, container, false);
//      if (view.findViewById(R.id.timesFrame)!=null) {
        Fragment timesFrag = new TimesFragment();
        getChildFragmentManager().beginTransaction()
            .add(R.id.timesFrame, timesFrag).commit();
//      }
    return view;
    }
} 
```

正如预期的那样，当列表未填充时，android 会在`TextView`. 然后我点击添加课程按钮，这会发生：![在此处输入图像描述](../Images/eea31ac9453fabe62e5eda5b46c500a8.png)
它显示空文本以及新片段。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-11-26T19:57:21.307

我有一个类似的问题。

根据[这一点](http://developer.android.com/guide/components/fragments.html)，当您需要以`Fragments`编程方式添加时，您应该将它们添加到现有的`ViewGroup`.

因此，我`Fragment`从 xml 中删除了该方法并在该方法中使用`FrameLayout`了组件。`replace()`

你也可以看看[这里](https://stackoverflow.com/questions/5293850/fragment-duplication-on-fragment-transaction)。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-04-15T18:50:15.770

在我的案例中解决问题的另一个问题是不同的 API 导入。

确保您使用“support.v4”或 API 11 中的“原始”实现，并且不要混合使用它们。（这可能发生，在我的情况下：TransactionManager 是 v4 并且 Activity 是旧版本，或者相反）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-04-25T16:02:40.500

为 childFragment 的主布局赋予背景颜色。

像 android:background="#FFFFFF"

这对我有用！！！！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-02-16T20:58:59.570

另一种解决方案是使用 LinearLayout 而不是片段

```
 <Fragment
        android:name="path/to.package.MyClass"
        android:id="@+id/fragmentContainer"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_marginBottom="100dp"
         /> 
```

像这样使用它

```
 <LinearLayout
        android:name="path/to.package.MyClass"
        android:id="@+id/fragmentContainer"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_marginBottom="100dp"
         /> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-07-18T20:26:43.733

我解决了将 RelativeLayout 更改为 LinearLayout 的问题...希望对您有所帮助！

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical" android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@color/windowBackground">

    <FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/fragment_container"
        android:layout_width="match_parent"
        android:layout_height="match_parent" />

</LinearLayout> 
```

# html - 如何在两个按钮内插入元素？

> ID：13446937
> 
> 赞同：-1
> 
> 时间：2012-11-19T02:38:13.603
> 
> 标签：html, css

目前我有这个：

```
<a href="" class="left">Get your prize</a>
<a href="" class="right">Live preview it</a>​ 
```

还有这个：

```
a { display: block; float:left; padding:10px 30px; font-size:12px; color: white; text-decoration:none;}

.left { border-radius: 20px 0 0 20px;  background:lightgreen; }
.right { border-radius: 0 20px 20px 0; background:darkgreen; }

a:hover { background:red;} 
```

这是 jsFiddle：http: [//jsfiddle.net/uKTFk/](http://jsfiddle.net/uKTFk/)

这是我的目标： http: [//i.imgur.com/AwLfn.png](http://i.imgur.com/AwLfn.png) << 将带有“或”文本的圆圈放在两者的中间。

当然，jsFiddle 的样式还没有正确设置，稍后当我用两个“按钮”之间的“或”圆圈解决问题时，我会继续讨论。

帮助？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T02:46:26.403

```
<a href="" class="left">Get your prize</a>
<span style="position:absolute;top:8px;left:126px;">or</span>
<a href="" class="right">Live preview it</a>​ 
```

更改其位置，然后使用顶部和左侧将其移动到中心。偏移量基于其父元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T02:50:25.550

这样的事情应该会有所帮助：

HTML：

```
<a href="" class="left">Get your prize</a>
<a href="" class="right">Live preview it</a>
<a href="" class="center">or</a> 
```

​CSS：

```
a { display: block; float:left; padding:10px 30px; font-size:12px; color: white; text-decoration:none;}

.left { border-radius: 20px 0 0 20px;  background:lightgreen; }
.right { border-radius: 0 20px 20px 0; background:darkgreen; }
.center { border-radius: 20px; background:red; height: 15px; width: 15px; 
position: absolute; left: 120px; padding:2px; margin-top: 7px}
a:hover { background:red;} 
```

[编辑小提琴](http://jsfiddle.net/uKTFk/21/) </p>

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T02:53:03.320

根据您的说明，这将起作用：

HTML

```
<a href="" class="left">Get your prize</a>
<img src="" alt="" class="middle"/>
<a href="" class="right">Live preview it</a> 
```

CSS

```
a { display: block; float:left; padding:10px 30px; font-size:12px; color: white; text-decoration:none;}

.left { border-radius: 20px 0 0 20px;  background:lightgreen; }
.middle {position: relative; float: left; margin: 5px -10px 0 -10px; z-index: 20;}
.right { border-radius: 0 20px 20px 0; background:darkgreen; }

a:hover { background:red;} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-19T03:03:37.093

这是实现目标的另一种方法（添加`div`）：

[http://jsfiddle.net/XU7Yq/](http://jsfiddle.net/XU7Yq/)

# cocoa - 在一个子窗口上操作时可可应用程序崩溃

> ID：13446938
> 
> 赞同：0
> 
> 时间：2012-11-19T02:38:17.200
> 
> 标签：cocoa, debugging, crash-reports

我正在研究标题描述的问题。崩溃后，我只收到下面发布的崩溃日志。由于我的代码没有列在堆栈列表中，我不知道如何找到崩溃的原因，有没有办法设置一些日志来查看发生了什么？

谢谢！

```
Thread 0 Crashed:: Dispatch queue: com.apple.main-thread
0 libobjc.A.dylib 0x934eed4b objc_msgSend + 27
1 com.apple.AppKit 0x95aecc93 __-NSWindow release_block_invoke_1 + 42
2 libdispatch.dylib 0x939fee85 _dispatch_call_block_and_release + 15
3 libdispatch.dylib 0x93a00e15 _dispatch_main_queue_callback_4CF + 260
4 com.apple.CoreFoundation 0x9b408d53 __CFRunLoopRun + 2003
5 com.apple.CoreFoundation 0x9b4081ec CFRunLoopRunSpecific + 332
6 com.apple.CoreFoundation 0x9b408098 CFRunLoopRunInMode + 120
7 com.apple.HIToolbox 0x9ab32487 RunCurrentEventLoopInMode + 318
8 com.apple.HIToolbox 0x9ab39dc3 ReceiveNextEventCommon + 381
9 com.apple.HIToolbox 0x9ab39c32 BlockUntilNextEventMatchingListInMode + 88
10 com.apple.AppKit 0x953d08ec _DPSNextEvent + 678
11 com.apple.AppKit 0x953d0159 -NSApplication nextEventMatchingMask:untilDate:inMode:dequeue: + 113
12 com.apple.AppKit 0x953cc4cb -NSApplication run + 904
13 com.apple.AppKit 0x9565fb54 NSApplicationMain + 1054 
```

# c++ - c ++ sprintf的格式如何传输var

> ID：13446941
> 
> 赞同：-1
> 
> 时间：2012-11-19T02:38:40.727
> 
> 标签：c++

我想将 var 转换为 sprintf 的格式，但是怎么做！

```
char s[100];
int d = 4;
sprintf(s, "%4s", "abc"); // i want the var 'd' replace '4', but how.
cout << s; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T02:41:23.717

使用星号作为精度，并将所需的表达式放在格式参数之前：

```
sprintf(s, "%*s", d, "abc"); 
```

# android - glsurfaceview 忽略 admob 高度

> ID：13446942
> 
> 赞同：1
> 
> 时间：2012-11-19T02:38:42.667
> 
> 标签：android, layout, opengl-es, admob, glsurfaceview

我有一个覆盖整个屏幕的 GLSurfaceView 并添加了一个 admob 广告。问题是表面视图的一部分现在被广告覆盖，这是不好的，因为用户将无法使用某些控件。我想要的是当广告处于活动状态时，要初始化的表面视图小于屏幕的整个高度，即减去 admob 广告高度。

无论我尝试的是相对布局还是另一个线性布局中的线性布局，我得到的是广告将我的表面视图移出视图，而表面视图仍然具有屏幕高度。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T03:46:10.177

您可以尝试为 glsurfaceview 使用 layout_weight，就​​像`layout_height="0dp" and layout_weight="1".` Android 会自动计算您的 glsurfaceview 的高度。

# java - Java FtpClient Storefile() 不适用于大文件

> ID：13446945
> 
> 赞同：0
> 
> 时间：2012-11-19T02:38:56.660
> 
> 标签：java, upload, ftp

我无法使用 Apache FtpClient storeFile() 方法上传超过 3mb 的文件..，但它非常适合大小 <1mb 的小文件。

对于 <1mb storeFile() 给出 true 但是 >1mb 它给出 false ..？请帮我。

```
client.connect(prop.getProperty("mf.target"));        
client.login(prop.getProperty("mf.userid"),prop.getProperty("mf.password"));    
client.setFileType(Integer.parseInt(prop.getProperty("mf.filetype"))); 
client.setBufferSize(91024000);
//client.setDefaultTimeout(900);
client.setDataTimeout(2900);

boolean flag = client.storeFile(prop.getProperty("mf.dataset.src"), in); 
```

我们还需要补充什么吗，请指教。

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-11-19T02:42:54.443

**第一个问题：您的 ftp服务器**上是否有任何上传限制政策，阻止上传大于 3Mb 的文件？

# ruby - 将固定数字与字符串进行比较

> ID：13446949
> 
> 赞同：1
> 
> 时间：2012-11-19T02:39:42.893
> 
> 标签：ruby

我正在尝试从为 RubyQuiz 创建的一些代码中学习，但它似乎是使用旧版本的 Ruby 构建的，当我尝试使用 1.9.2 时，它现在会引发错误。运行测试时出现此错误

```
 in `>=': comparison of Fixnum with String failed (ArgumentError) 
```

运行'if c >= ?A and c <= ?Z'这一行。由于相当缺乏经验，我不确定这是否可以在函数本身内进行调整，或者我是否需要发布整个代码，这可能不值得。请指教

```
def process(s, &combiner)
    s = sanitize(s)
    out = ""
    s.each_byte { |c|
      if c >= ?A and c <= ?Z            #error
        key = @keystream.get
        res = combiner.call(c, key[0])
        out << res.chr
      else
        out << c.chr
      end
    }
    return out
  end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T02:42:46.523

`?A`用于返回字符 in 的 ascii 码`Ruby 1.8`，但现在返回字符本身 in `Ruby 1.9`。您应该替换`?A`为`'A'.ord`.

在`Ruby 1.8.x`

```
?A
#=> 65 
```

在`Ruby 1.9.x`

```
?A
#=> "A" 
```

在两者`Ruby 1.8.x`和`1.9.x`

```
'A'.ord
#=> 65 
```

# c# - 随机密码生成器

> ID：13446950
> 
> 赞同：4
> 
> 时间：2012-11-19T02:39:49.540
> 
> 标签：c#, winforms, random, passwords, ascii

我正在尝试编写一个随机密码生成器。我处于早期阶段，遇到了一些问题。通过下面的代码和屏幕截图，您可以看到我得到了一个非常可预测的字符串（2 的字符串）。每次我收到一个只填充一种数字的字符串。我应该如何编辑我的代码以生成更好的密码字符串？（除了包括数字以外）

![在此处输入图像描述](../Images/4b7996edb8b93d0d4066c74b17e83e42.png)

```
private void button1_Click(object sender, EventArgs e)
{
    int characters = Convert.ToInt32(comboBox1.SelectedIndex);
    string password = "";

    for(int i = 0; i <= characters; i++)
    {
       password = password +charGen();
    }

    label2.Text = password;
}

private char charGen()
{
    Random random = new Random();
    char randomNumber = Convert.ToChar( random.Next(48, 57));
    return randomNumber;
} 
```

}

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-19T02:43:03.133

只需保持`random`在类范围内：

```
Random random = new Random();

private void button1_Click(object sender, EventArgs e)
{
    int characters = Convert.ToInt32(comboBox1.SelectedIndex);
    string password = "";

    for(int i = 0; i <= characters; i++)
    {
       password = password +charGen();
    }

    label2.Text = password;
}

private char charGen()
{
    char randomNumber = Convert.ToChar( random.Next(48, 57));
    return randomNumber;
} 
```

目前，每次调用时它的种子值几乎相同`charGen`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-19T02:43:14.117

问题是每次`charGen`调用时，您都会创建一个 new `Random`，并使用当前时钟为种子初始化。由于它们的创建速度如此之快，因此它们都获得了相同的种子。

您应该在类级别创建一个`Random`对象（或将其传递给`charGen`）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-19T02:56:54.747

为什么不使用`Rnd()`代替`Random`？

```
Private Function charGen() As Char
  Return Chr(Asc("0"c) + Rnd() * 10)
End Function 
```

`Randomize()`然后在循环之前调用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-01-03T06:01:22.727

您可以使用 Membership.GeneratePassword 方法

[http://msdn.microsoft.com/en-us/library/system.web.security.membership.generatepassword(v=vs.110).aspx](http://msdn.microsoft.com/en-us/library/system.web.security.membership.generatepassword(v=vs.110).aspx)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-02-27T15:16:24.087

使用 System.Web.Security.Membership.GeneratePassword(int length, int numberOfNonAlphanumericCharacters)

# php - laravel 中的用户认证

> ID：13446956
> 
> 赞同：3
> 
> 时间：2012-11-19T02:40:49.333
> 
> 标签：php, laravel

我对 laravel 中内置的用户身份验证功能有疑问。我让身份验证部分工作，但似乎用户没有存储在会话中。

```
Route::get('login', function(){
    $username = 'stardriver'; 
    $password = '1234'; 

    $creds = array('username' => $username, 'password' => $password);
    if(Auth::attempt($creds)){ //I assume that its already logged in when it goes here

        return Auth::guest(); //but why does this return 1?
    }else{
        return 'nope wrong creds'; //if I change the username or password declared above, it goes here
    }

}); 
```

这是我的管理页面。用户成功通过身份验证后，当我重定向到此页面时，我得到一个无限循环。

```
Route::get('admin', array('before' => 'auth', 'do' => function(){

    return "you are logged in! " . HTML::link('logout', 'logout dude');
})); 
```

你觉得这里有什么问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-19T03:00:40.143

正如 Dayle Rees 在其博客上所说：

> 请记住不要将 auth 过滤器应用于您的登录 URI，您将遇到一个可怕的循环！

按照这个教程，一切都应该是甜蜜的:) [http://daylerees.com/2012/04/07/laravel-authentication/](http://daylerees.com/2012/04/07/laravel-authentication/)

# java - 在我的程序的第 331 行的更新数据库语句中查找错误的位置

> ID：13446959
> 
> 赞同：0
> 
> 时间：2012-11-19T02:41:30.500
> 
> 标签：java, mysql, sql

我有两个问题，但我目前只在纠正一个问题。在第 331 行的程序中，当我执行它时，我收到错误（*catch 语句*），表明 SQL 语句有错误。它与其他（我看到的）相同，我没有看到错误。这是给出错误的部分的片段。我应该能够更新 mysql 数据库，就像其他部分一样，这个错误。我应该去哪里看？有些东西没有正确发布，我也在看，对不起。

```
 //String st = "DELETE FROM student WHERE Description = 'Michael'";
    // String st = “UPDATE student SET Description = + ‘Michael’ WHERE studentID = ‘123’”;
    String studentID;
    String firstName;
    String lastName;
    double gpa;
    String status;
    String mentor;
    String level;
    String thesisTitle;
    String thesisAdvisor;
    String company;

    Scanner in = new Scanner(System.in);

    // print statements to match the database input 

    System.out.println("Now let's update a record");
    System.out.println("Please enter the student ID of the record you want to update >");
    studentID = in.next();
    System.out.println("Please enter the new First Name >");
    firstName = in.next();
    System.out.println("Please enter the new Last Name >");
    lastName = in.next();
    System.out.println("Please enter the new GPA[X.XX] >");
    gpa = in.nextDouble();
    System.out.println("Please enter the new Status [Active or Inactive] >");
    status = in.next();
    System.out.println("Please enter the new mentor >");
    mentor = in.next();
    System.out.println("Please enter the new level >");
    level = in.next();
    System.out.println("Please enter the new thesis Title >");
    thesisTitle = in.next();
    System.out.println("Please enter the new thesis Advisor's name >");
    thesisAdvisor = in.next();
    System.out.println("Please enter the new Company Name >");
    company = in.next();

//      stmt.executeUpdate("Update student Set studentID='" + studentID + "', firstName='" + firstName + "', lastName='" + lastName + "', gpa=" + gpa + "', status='" + status + "', mentor='" + mentor  + "', level='" + level + "', theseisTitle='" + thesisTitle + "', thesisAdvisor='" + thesisAdvisor + "', company='" + company + "WHERE studentID = '" + studentID + " '");

    stmt.executeUpdate("Update student Set studentID='" + studentID + "',firstName'" + firstName + "', lastName='" + lastName + "', gpa=" + gpa + "', status='" + status + "', mentor='" + mentor  + "', level='" + level + "', theseisTitle='" + thesisTitle + "', thesisAdvisor='" + thesisAdvisor + "', company='" + company + "WHERE studentID = '" + studentID + " '");

    // Close the statement and the connection

    stmt.close();
    conn.close();

} catch (Exception e) {
    System.err.println("ERROR: Either cannot connect to the DB " + " or error with the SQL statement");
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T02:44:37.117

我看到的一个问题是您缺少`=`at `firstName'" + firstName +`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T02:46:40.520

您的查询的一个问题是它在`firstname`

```
stmt.executeUpdate("Update student 
                    Set studentID='" + studentID + "',
                        firstName'" + firstName + "',                                          
                                 ^ here 
```

另一个是，它很容易受到`SQL injection`. 请参数化您的查询，使用`PreparedStatement`，示例

```
String updateQuery = ""
        + "UPDATE student "
        + "SET    firstname = ?, "
        + "       lastname = ?, "
        + "       gpa = ?, "
        + "       status = ?, "
        + "       mentor = ?, "
        + "       level = ?, "
        + "       theseistitle = ?, "
        + "       thesisadvisor = ?, "
        + "       company = ? "
        + "WHERE  studentid = ? ";

PreparedStatement pstmt = con.prepareStatement(updateQuery);
pstmt.setString(1,firstName)
pstmt.setString(2,lastName)
pstmt.setInt(3,gpa)
pstmt.setString(4,status)
pstmt.setString(5,mentor)
pstmt.setString(6,level)
pstmt.setString(7,thesisTitle)
pstmt.setString(8,thesisAdvisor)
pstmt.setString(9,company)
pstmt.setString(10,studentID) 
```

我们为什么要使用`PreparedStatement`？

*   防止`SQL Injection`
*   防止`SQL Injection`
*   使代码更具可读性，尤其是当您有大量查询时

资源

*   [准备好的语句](http://docs.oracle.com/javase/1.4.2/docs/api/java/sql/PreparedStatement.html)
*   [准备好的语句](http://docs.oracle.com/javase/tutorial/jdbc/basics/prepared.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T02:44:53.360

就在 WHERE 子句之前，您在附加公司之后省略了结束引号。

# c# - 如何使用 DPI 使当前的 wpf 缩放？

> ID：13446960
> 
> 赞同：0
> 
> 时间：2012-11-19T02:41:35.790
> 
> 标签：c#, wpf

> **可能重复：**
> [如何启用 dpiAware？](https://stackoverflow.com/questions/13448180/how-do-i-enable-dpiaware)

我有一个禁用 Dpi 感知的 WPF 应用程序：

```
[assembly: System.Windows.Media.DisableDpiAwareness] 
```

但是当用户将其更改为 125% 或 150% 时，他们无法看到应用程序 GUI 的下半部分。删除上面的行没有效果。

当用户更改 DPI 时，如何让 GUI 变小？

# sql-server - 更改 Sql Server 数据库后更新 Asp Net MVC 模型

> ID：13446961
> 
> 赞同：0
> 
> 时间：2012-11-19T02:41:37.053
> 
> 标签：sql-server, asp.net-mvc, ssms

我已经从现有的 Sql Server 数据库创建了一个模型，我很好奇如果我对我的 sql 数据库结构进行更改，是否有办法更新现有模型？

我的意思是，如果我使用 Sql Server Management Studio 创建一个表，我可以在 VS 中更新我的模型吗？

非常感谢;

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T20:42:17.863

真的有助于了解您的“模型”是什么。如果您使用的是 EntityFramework，则必须通过 EDMX 从数据库中更新模型（选择要添加的表）。

# z3 - Z3 python 对待 x**2 与 x*x 不同？

> ID：13446967
> 
> 赞同：4
> 
> 时间：2012-11-19T02:42:36.440
> 
> 标签：z3, z3py

Z3 Python 接口似乎不喜欢 ** 运算符，它可以处理 x*x 但不能处理 x**2 如下例所示

```
>>> x,y = x,y=Reals('x y')
>>> z3.prove(Implies(x -6 == 0,x**2 -36 == 0))
failed to prove
[x = 6]
>>> z3.prove(Implies(x -6 == 0,x*x -36 == 0))
proved 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T03:29:38.530

您可能在 Linux 或 OSX 上使用 4.3.0 版。4.3.0 版在这些平台上存在配置问题。如果是这样的话，我建议你下载[4.3.1](http://z3.codeplex.com/SourceControl/changeset/view/89c1785b7322)版本。4.3.1 版将在 Linux 和 OSX 上证明这两个查询。在 4.3.0 版中，Linux 和 OSX 默认不启用自动配置。因此，Z3 将始终使用对非线性算术不完整的通用求解器，也不支持幂运算符。启用自动配置后，Z3 检测到这两个问题在非线性实数算术片段中，并切换到[nlsat 求解器](http://research.microsoft.com/en-us/um/people/leonardo/files/IJCAR2012.pdf)。

顺便说一句，要在 4.3.0 版本上手动启用自动配置，您可以使用命令`z3.set_option(auto_config=True)`.

# python - 自动记录我的 REST API

> ID：13446969
> 
> 赞同：9
> 
> 时间：2012-11-19T02:42:48.220
> 
> 标签：python, django

我正在尝试从我的应用程序支持的所有 URL 的代码中自动创建文档。我们完全使用客户端 MVC，因此支持的每个 URL 本质上都是 UI 的 REST API。有没有一种简单的方法可以从这些 URL 生成文档？

到目前为止，我编写了这个小模块，但我正在寻找更好的方法。如果已经存在类似的东西，我不想重新发明轮子。

**更新**：请注意，其目的是为网站的消费者提供公共文档，而不是供内部使用。在这方面，对于每个 URL，我们需要记录： - 响应是什么， - 接受哪些参数， - URL 是否响应 GET/POST 或两者，等等。

某些 URL（如 (^$) 仅重定向到主页不应记录在案，因此我还需要一些排除机制。

```
from django.core.management.base import BaseCommand
from django.conf import settings

class Command(BaseCommand):
''' Generates documentation for the URLs.  For each URL includes the documentation from
the callback implementing the URL and prints the default arguments along with the URL pattern and name'''

    def handle(self, *args, **options):
        url_module = None
        exec 'import '+settings.ROOT_URLCONF+'; url_module='+settings.ROOT_URLCONF
        doc = file('doc.html','w')
        doc.write("<table border=1 cellspacing=0 cellpadding=5>")
        doc.write("<tr><th>URL Pattern<th>Name<th>Documentation<th>Parameters")
        for x in url_module.urlpatterns:
            doc.write("<tr>")
            doc.write("<td>")
            doc.write(x._regex)
            doc.write("<td>")
            doc.write(str(x.name))
            try:
                documentation = str(x.callback.__doc__)
                doc.write("<td><pre>")
                doc.write(documentation)
                doc.write("</pre>")
            except:
                doc.write("<td> Unable to find module")
            doc.write("<td>")
            doc.write(str(x.default_args))
        doc.write("</table>")
        doc.close() 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T18:51:48.293

您可以从根模块遍历 URL 模式并内省视图函数对象以像您一样获取文档数据，但我宁愿[通过模板呈现它](https://docs.djangoproject.com/en/dev/ref/templates/api/#the-render-to-string-shortcut)以编译文档。

不过，我建议您使用[Sphinx](http://sphinx-doc.org/)。您可能需要记录的不仅仅是您的端点（使用条款、隐私政策、身份验证、yadda yadda），并且您可以编写自己的扩展程序，该[扩展](http://sphinx-doc.org/ext/tutorial.html)程序将公开一个指令，您可以在一个文档中调用该指令来完成您所做的事情一直在这里。

或者你可以完全避免设计这个：手动管理你的 Sphinx 文档，创建一个 Github 存储库并在[https://readthedocs.org/](https://readthedocs.org/)上托管文档！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T22:11:23.740

只是一个最终更新，以防万一有人感兴趣。

我们最终将我拥有的代码片段用于内部目的。我们决定冒险进入 Sphinx 并使用它，当我们在项目结束时创建开发者指南时，当我们准备好公开测试版时，因为它需要一些时间和投资来学习、后勤等。

# css - CSS 的 TranslateZ 变换不会将最高 Z 值放在首位

> ID：13446976
> 
> 赞同：2
> 
> 时间：2012-11-19T02:43:27.220
> 
> 标签：css, css-transforms

在这个[JSFiddle](http://jsfiddle.net/VMbKk/3/)中，为什么在 Chrome 和 Firefox 上 Back div 呈现在 Front div 前面？在 Mobile Safari 中，Front 呈现在 Back 的前面。

* * *

的HTML

```
 <div id='view'>
        <div id='front' class='transformed'>Front</div>
        <div id='back' class='transformed'>Back</div>
    </div> 
```

* * *

和 CSS

```
 div#view {
        -webkit-perspective: 100px;
        -moz-perspective: -100px;
    }

    div.transformed {
        position:absolute;
        width: 100px;
        height: 100px;
        left: 100px;
        top: 100px;
    }

    div#front {
        background-color: red;
        -webkit-transform: translateZ(20px);
        -moz-transform: translateZ(20px);
    }

    div#back {
        background-color: rgba(0, 0, 255, 0.5);
        -webkit-transform: translateZ(0px);
        -moz-transform: translateZ(0px);
    } 
```

* * *

我的期望是，由于 Front 已在正 Z 方向平移 20px，Back 已平移 0px，因此 Front 应该在前面渲染。

这是一个错误，还是我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T03:59:28.183

这可以说是一个错误。虽然您不需要，但您可以添加：

```
 -webkit-transform-style: preserve-3d; 
```

到视图 div 踢其他浏览器做正确的事情。可能是使用没有保留 3d 的透视图会使它们混淆，并使它们按文档顺序而不是 z 顺序呈现。

见jsfiddle：http: [//jsfiddle.net/VMbKk/4/](http://jsfiddle.net/VMbKk/4/)

（请注意，您可以通过颠倒 html 中前后 div 的顺序来获得相同的效果，因此前面呈现在后面之后）

# bash - 使用字符串和日期在 BASH 中创建一个文件夹

> ID：13446981
> 
> 赞同：0
> 
> 时间：2012-11-19T02:44:27.843
> 
> 标签：bash

我想根据 BASH 中的系统日期创建一个文件夹。这就是我所做的：

`mkdir $(date +"%d-%m-%Y")`

它工作正常，输出是`18-11-2012`但我需要将此日期与字符串**backup_连接起来**

这是我想要的输出`backup_18-11-2012`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T02:49:33.863

试试这个： `mkdir "backup_$(date +'%d-%m-%Y')"`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T08:46:01.150

或者你可以这样做：`mkdir $(date +'backup_%d-%m-%Y')`

# javascript - jQuery UI，使可排序手风琴不自动扩展

> ID：13446983
> 
> 赞同：0
> 
> 时间：2012-11-19T02:44:46.983
> 
> 标签：javascript, html, css, jquery-ui, jquery-ui-accordion

在这个可排序手风琴的 jQuery UI 演示中 [http://jqueryui.com/accordion/#sortable](http://jqueryui.com/accordion/#sortable) 如果您移动某些东西并且它已折叠，它会自动展开。是否可以添加一个设置，使其在移动时不会扩展？它只会在您单击它时展开。

谢谢。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-19T03:00:59.787

根据文档：[http ://api.jqueryui.com/accordion/#option-active](http://api.jqueryui.com/accordion/#option-active)

您想将活动元素设置为 false，但还需要允许手风琴可折叠。

```
$( ".selector" ).accordion({ active: false, collapsible: true }); 
```

JSFiddle 示例：http: [//jsfiddle.net/uKTFk/27/](http://jsfiddle.net/uKTFk/27/)

# service - 存在 RIA 服务迁移问题的 Lightswitch

> ID：13446985
> 
> 赞同：1
> 
> 时间：2012-11-19T02:45:07.107
> 
> 标签：service, wcf-ria-services, ria, visual-studio-lightswitch

我们已将使用 VS2010 开发的 LS 解决方案迁移到 VS2012。迁移后，在 VS2010 上运行良好的 WCF RIA 服务出现了奇怪的问题。WCF RIA 服务连接到数据库并使用存储过程获取数据。这在 LS 屏幕上运行良好，我的意思是数据显示为已接受。我可以更新记录，但是单击“保存”按钮后，出现冲突对话框，显示“结果需要单个资源，但发现多个资源”在 lightswitch 2012 WCF RIA 服务中出现错误，有时我们收到另一个错误为“无法保存数据 - DataService '用户信息'（RIA 服务名称）有更改将不会被保存。要修改可以保存的数据服务的集合。实现'Initializeddataworkspace' 方法”。

请帮我解决这个...

# python - 无法在 Mac OS Mountain lion 上构建和安装 pyopencv

> ID：13446989
> 
> 赞同：0
> 
> 时间：2012-11-19T02:45:25.853
> 
> 标签：python, opencv

我已经下载了 pyopencv 并安装了 opencv 和 boost。当我尝试构建和安装 pyopencv 时，出现如下错误。真的很困扰我！！：

我在我的平台上为 pyopencv 准备好了所有先决条件。我成功使用了 cmake 命令。然后我 cd 到我刚刚创建的构建文件夹，尝试运行 make 和 make install 命令，我收到下面的错误消息。似乎之间的冲突pyopencv、opencv 和 Boost.Python。这是我使用的平台以及 pyopencv、opencv 和 Boost.Python 的版本。

**PyOpenCV 2.1.0.wr.1.2.0 和 Opencv 2.4.3
我的操作系统是 Mac OSX 10.8 山狮**

**这是整个错误消息：**

在 /Users/shuxuan/Engineering/ProjectsofPyOpenCV/pyopencv/package/extras/core/opencv_headers.hpp:9 包含的文件中：/Users/shuxuan/Engineering/ProjectsofPyOpenCV/pyopencv/package/extras/sdopencv/sdcxmat.hpp:180： 13: 错误: 'cv::Mat' 的构造函数必须显式初始化没有默认构造函数的成员 'size' 内联 Mat::Mat(const Mat& m, const Rect& roi) ^ /usr/local/include/opencv2 /core/core.hpp:1976:11：注意：这里声明了成员 MSize 大小；^ /usr/local/include/opencv2/core/core.hpp:1948:23：注意：此处声明的 'cv::Mat::MSize' struct CV_EXPORTS MSize ^ 致命错误：发出的错误太多，现在停止 [-ferror -limit=] 生成 20 个错误。制作[2]：[CMakeFiles/pyopencv_extras.dir/package/extras/core/ndarray.

所有的错误都像上面的......我不知道为什么。

# c - 将 posix 信号量数组分配给共享内存

> ID：13446991
> 
> 赞同：1
> 
> 时间：2012-11-19T02:46:09.863
> 
> 标签：c, posix, shared-memory, semaphore

我想将一组未命名的信号量写入共享内存，这样我就可以在分叉的进程中访问它们。这是我到目前为止所拥有的：

```
int main(int argc, char *argv[]){

int num_process = atoi(argv[1]);
int i = 0;

int ppid = getpid();
void *addr;

int numsems = 512;
int object_size = numsems * sizeof(sem_t);

printf("declaring semaphores\n");
sem_t *sem[numsems];

//create shared memory and check that it worked
printf("opening shared memory\n");
int shmem_fd = shm_open("/my_shmem", O_CREAT | O_RDWR, S_IRUSR | S_IWUSR);

if(shmem_fd == -1){
    perror("Can't open shmem object");
    exit(-1);
}

//truncate memory object
if(ftruncate(shmem_fd, object_size) == -1){
    perror("failed to resize shmem object");
    exit(-1);
}

addr = mmap(NULL, object_size, PROT_READ | PROT_WRITE, MAP_SHARED, shmem_fd, 0);

if(MAP_FAILED == addr){
    perror("Map failed");
    exit(-1);
}

//store the semaphores at the start
printf("initializing semaphores\n");

for(i = 0; i<numsems; i++){
    sem[i] = addr + i*sizeof(sem_t);
    if(sem_init(sem[i], 1, 0) == -1){
            perror("sem_init failed");
            exit(-1);
    }
}

//create children
while((getpid() == ppid) && (i < num_process)){

    switch(fork()){
    case -1:
    printf("fork %d failed\n", i);
    break;

    case 0:
    //child process
    printf("child created\n");
    child_program( sem, numsems);
    printf("child done\n");
    break;

    default: //parent continues on to create next child
    break;

    }
i++;
}
} 
```

哪个编译得很好，但是当我尝试运行它时，当它到达`sem_t *sem[numsems]`零件时会出现分段错误。我在别处读到你不应该创建一个指向信号量的指针，但是当我没有创建并尝试时，`&sem = addr`我得到了一个关于需要左值的错误。任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T02:56:31.347

首先，为什么不在父进程中创建（和映射）共享内存段，然后在子进程中打开呢？

而且，与其拥有一个指针数组，不如简单地映射整个数组，而不使用指针：

家长：

```
sem_t *sem;

shm_open("/my_shmem", O_CREAT | O_RDWR ...);

sem = mmap(NULL, object_size, ...); 
```

孩子：

```
semt_t *sem;

shm_open("/my_shmem", O_RDWR, 0);

sem = mmap(NULL, object_size, ...); 
```

# c - 传递 struct* 并在其他函数中加载结构

> ID：13446992
> 
> 赞同：0
> 
> 时间：2012-11-19T02:46:10.363
> 
> 标签：c, pointers, structure

它无法编译，我不知道我在做什么错。当我尝试这样做时：

```
(ultimo->siguiente)=nnodo; 
```

编译器不让我。两者都不起作用：

```
scanf("%d", &(nnodo->dni)); 
```

PD：baja 和 modif 函数还没有完成，但它们不应该与主程序产生任何冲突。

* * *

编译器输出（Visual Studio 2010）：

错误 2 错误 C2037: 'siguiente' 左侧指定未定义的结构/联合'stru' c:\documents and settings\emiliano\desktop\asdc.c 52 1 abm

错误 3 错误 C2037: 'dni' 左侧指定未定义的结构/联合 'stru' c:\documents and settings\emiliano\desktop\asdc.c 55 1 abm

4 IntelliSense：不允许指向不完整类类型的指针 c:\documents and settings\emiliano\desktop\asdc.c 52 3 abm

5 IntelliSense：不允许指向不完整类类型的指针 c:\documents and settings\emiliano\desktop\asdc.c 55 15 abm

* * *

我想我正确地做了 typedef，但我真的不知道。

```
#include <stdio.h>
#include <stdlib.h>

typedef struct stru* pstru;

typedef struct{
    int dni;
    pstru siguiente;
}stru;

pstru alta(pstru ultimo);
pstru baja(pstru ultimo);
pstru modif(pstru ultimo);
int menu(pstru ultimo);

int main(){
    pstru ultimo;
    ultimo=(pstru)malloc(sizeof(stru));

    menu(ultimo);
    return 0;
}

int menu(pstru ultimo){

    int opc;
    printf("Para alta (1), para baja (2), para modif (3), para salir (4)\n");
    scanf("%d", &opc);

    switch(opc){
        case 1:
            ultimo=alta(ultimo);
            break;
        case 2:
            ultimo=baja(ultimo);
            break;
        case 3:
            ultimo=modif(ultimo);
            break;
        case 4:
            return 0;
    }
    menu(ultimo);
    return 0;
}

pstru alta(pstru* ultimo){
    pstru nnodo;
    nnodo=(pstru)malloc(sizeof(stru));
    (ultimo->siguiente)=&nnodo;

    printf("Ingrese DNI\n");
    scanf("%d", &(nnodo->dni));

    ultimo=nnodo;

    return ultimo;
}

pstru baja(pstru ultimo){
    return ultimo;
}

pstru modif(pstru ultimo){
    return ultimo;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T02:52:22.887

您正在做的事情会导致您的`alta`函数出现未定义的行为。

首先，您尝试将 a 分配`stru **`给 a `stru *`。由于类型不同，编译器不允许这样做。

导致未定义行为的部分是您正在使用`&nnodo`，即获取*局部变量*的地址并尝试存储它。这将不起作用，因为局部变量在堆栈上，并且当函数返回时，编译器会回收它的堆栈以供其他变量和函数使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T06:06:30.887

在 C 中，你不能这样做：

```
typedef struct stru* pstru;

typedef struct
{
    int dni;
    pstru siguiente;
} stru; 
```

您已经定义了一个未标记的结构类型并将其命名为`stru`，但是`typedef struct stru *pstru;`引用了一个不同的标记结构类型`struct stru`，它是不完整的。

你可能需要：

```
typedef struct stru *pstru;

typedef struct stru
{
    int dni;
    pstru siguiente;
} stru; 
```

这应该可以毫无问题地编译。

* * *

在 C++ 中，您不需要第二个`typedef`; 你可以简单地写：

```
typedef struct stru *pstru;

struct stru
{
    int dni;
    pstru siguiente;
}; 
```

并且类型`stru`将被定义。

# canvas - cpu使用率低的画布动画的最佳方法是什么？

> ID：13446995
> 
> 赞同：-1
> 
> 时间：2012-11-19T02:46:27.890
> 
> 标签：canvas, jquery-animate, cpu

使用低 cpu 为画布设置动画的最佳方法是什么？
现在我使用 setInterval(Something,100);

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T02:51:55.280

查看`requestAnimationFrame`

[http://paulirish.com/2011/requestanimationframe-for-smart-animating/](http://paulirish.com/2011/requestanimationframe-for-smart-animating/)

# html - 如何在未知/动态高度的浮动 div 中将未知/动态高度的图像居中？

> ID：13446998
> 
> 赞同：2
> 
> 时间：2012-11-19T02:46:44.623
> 
> 标签：html, css, image, vertical-alignment, centering

我到处都看到过类似的东西，并且在过去几天里尝试了很多，但似乎无处可去。我的目标是一个纯 CSS 解决方案。

所以我有一个容器/父 div，里面有一个左右 div。容器垂直拉伸以适应较大的左右 div（两者的高度都未知）。左侧 div 向左浮动，其中包含未知尺寸的图像，右侧 div 将包含文本（关于图像）。从概念上讲，我希望在其父 div 的左侧有一个垂直居中的图像，并在图像的右侧显示文本。如果除了浮动之外还有其他结构可以做到这一点（例如），我很开放。

我在 jsfiddle 上制作了一个模板：http: [//jsfiddle.net/hoopadoop/GEkaW/](http://jsfiddle.net/hoopadoop/9PkxA/1/)

我试过 display: tables; 垂直对齐：中间；背景：url（图像）不重复中心中心；和有边距的东西。到目前为止唯一有效的是实际上使用 html `<tables>`，但我宁愿坚持使用 CSS。

也许我只是不断地出现语法错误或一些愚蠢的事情，但我似乎无法得到任何工作。任何帮助深表感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T03:04:50.447

为标签添加`margin-top: 50%`规则`img`应该使图像大致垂直居中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T03:33:47.397

在这里检查

[http://jsfiddle.net/9PkxA/2/](http://jsfiddle.net/9PkxA/2/)

我向左 div“中间”添加了新类并定义

```
.middle
{
    margin-top:50%;
} 
```

希望这会有所帮助