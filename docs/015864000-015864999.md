# StackOverflow 问答 15864000-15864999

# c# - 将 Eval 的值从 int 转换为 string

> ID：15864001
> 
> 赞同：7
> 
> 时间：2013-04-07T15:18:38.253
> 
> 标签：c#, asp.net, eval

我有一个整数存储在我的数据库中，我需要转换字符串。

这是我对 Eval 的尝试：

```
<%# ChangeSalaryType(Eval("SalaryType")) %> 
```

这是我对该功能的尝试：

```
public static string ChangeSalaryType(int salaryType)
{
    string salaryTime = string.Empty;

    if (salaryType == 1)
    {
        salaryTime = "per hour";
    }
    else if (salaryType == 2)
    {
        salaryTime = "per week";
    }
    else if (salaryType == 3)
    {
        salaryTime = "per annum";
    }
    return salaryTime;
} 
```

但我收到这些错误：

```
Argument 1: cannot convert from 'object' to 'int'   
Error   2   The best overloaded method match for 'controls_allPlacements.ChangeSalaryType(int)' has some invalid arguments   
Error   4   The best overloaded method match for 'controls_allPlacements.ChangeSalaryType(int)' has some invalid arguments 
```

我在 Eval 中使用了“SalaryType”，因为它是包含来自数据库的信息的参数。我不完全确定我做错了什么..

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-07T15:21:12.697

即使您知道该`SalaryType`字段将是`int`您的 aspx 中的一个字段，它也会`object`在 Eval() 之后被强制转换。像这样进行显式转换：

```
<%# ChangeSalaryType(Convert.ToInt32(Eval("SalaryType"))) %> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T15:22:07.007

尝试`int`在您的*Eval*部分转换为；

```
Convert.ToInt32(Eval("SalaryType")) 
```

`Eval`可能`object`作为返回类型返回。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T15:35:17.620

我更喜欢在后面的代码上发送 DataItem，然后将数据获取为：

```
<%#RenderSalaryType(Container.DataItem)%> 
```

和后面的代码

```
protected string RenderSalaryType(object oItem)
{
    int salaryType = (int)DataBinder.Eval(oItem, "SalaryType");

    // rest of your code
} 
```

# iphone - Facebook SDK 3.2 的最低 iOS 部署目标？

> ID：15864002
> 
> 赞同：1
> 
> 时间：2013-04-07T15:18:48.013
> 
> 标签：iphone, ios, objective-c, facebook-ios-sdk

我希望在我的 iOS 应用程序中使用 Facebook sdk 3.2 版，但我找不到它将支持的最低目标 iOS。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T19:31:50.170

从[SDK 页面](http://developers.facebook.com/ios/concepts/ios-build-distribute-promote/)：

> ## iOS 6 集成
> 
> 适用于 iOS 的 Facebook SDK 提供与 iOS 6 的完整原生集成。对于登录和动态发布，这意味着您可以弹出原生对话框，而不是快速切换到 Facebook iOS 应用或移动 Safari。这种体验对用户的破坏性较小，并显着提高了转化率。**只需启用使用 Facebook 登录，SDK 即可确保您的应用程序在所有 iOS 4.0 及更高版本上无缝运行。**

# python - python循环，2人游戏

> ID：15864005
> 
> 赞同：0
> 
> 时间：2013-04-07T15:19:00.257
> 
> 标签：python, loops

我正在努力完成我在 python 中的第一个简单程序，一个 2 人（用户与计算机 AI）单词/字母猜谜游戏。

我已经完成了大部分代码，但我正在尝试整理我的循环，以便游戏能够在用户和 AI 之间正确切换。我想让游戏在用户回合和 AI 回合之间来回交替，直到世界完全展现。在这一点上，猜对最多字母的玩家赢得一分。电脑版主又选了一个词，重新开始。第一个获得五分的玩家赢得比赛。

我不知道从哪里开始。一般来说，我对 python/编码还是很陌生，我很难理解事件发生的顺序。我知道我需要某种主循环，只要这个词还没有完全揭示，它就保持真实，但仅此而已。

此外，关于如何优化下面的代码或以任何方式清理它的任何其他建议将不胜感激！

```
import random

#set initial values
player1points= 0
ai= 0
userCorrectLetters= ''
aiCorrectLetters=''
wrongLetters=''
wrongPlace= ''
correctLetters = ''
notInWord = ''
endGame = False
allLetters = set(list('abcdefghijklmnopqrstuvwxyz'))
alreadyGuessed = set() 
userGuessPosition = 0
availLetters = allLetters.difference(alreadyGuessed)

#import wordlist, create mask
with open('wordlist.txt') as wordList:
    secretWord = random.choice(wordList.readlines()).strip()
print (secretWord)
secretWordLength = len(secretWord)

def displayGame():
    mask = '_'  * len(secretWord)
    for i in range (len(secretWord)):
        if secretWord[i] in correctLetters:
            mask = mask[:i] + secretWord[i] + mask [i+1:]
    for letter in mask:
        print (letter, end='')
    print (' ')
    print ('letters in word but not in correct location:', wrongPlace)
    print ('letters not in word:', wrongLetters)

    ##asks the user for a guess, assigns input to variable

def getUserGuess(alreadyGuessed):

    while True:
        print ('enter your letter')
        userGuess = input ()
        userGuess= userGuess.lower()
        if len(userGuess) != 1:
            print ('please enter only one letter')
        elif userGuess in alreadyGuessed:
            print ('that letter has already been guessed. try again')
        elif userGuess not in 'abcdefjhijklmnopqrstuvwxyz':
            print ('only letters are acceptable guesses. try again.')
        else:
            return userGuess

def newGame():
    print ('yay. that was great. do you want to play again? answer yes or no.')
    return input().lower().startswith('y')

userTurn=True     
while userTurn == True:
    displayGame ()
    print ('which character place would you like to guess. Enter number?')
    userGuessPosition = int(input())

    slice1 = userGuessPosition - 1  

    ##player types in letter
    guess = getUserGuess(wrongLetters + correctLetters)
    if guess== (secretWord[slice1:userGuessPosition]):
        correctLetters = correctLetters + guess
        print ('you got it right! ')
        displayGame()
        break
    elif guess in secretWord:
            wrongPlace = wrongPlace + guess 
            print ('that letter is in the word, but not in that position')
            displayGame()
            break
    else:
            wrongLetters = wrongLetters + guess
            print ('nope. that letter is not in the word')
            displayGame()
            break

print ("it's the computers turn")

aiTurn=True

while aiTurn == True:
    aiGuessPosition = random.randint(1, secretWordLength)
    print (aiGuessPosition)

    aiGuess=random.sample(availLetters, 1)
    print ('the computer has guessed', aiGuess, "in position", + aiGuessPosition)
    if str(aiGuess) == (secretWord[slice1:userGuessPosition]):
            correctLetters = correctLetters + guess
            print ('this letter is correct ')
            break
    elif str(aiGuess) in secretWord:
            aiCorrectLetters = aiCorrectLetters + guess 
            correctLetters = correctLetters + guess
            print ('that letter is in the word, but not in that position')
            break
    else:
            wrongLetters = wrongLetters + guess
            print ('that letter is not in the word')
            break   

    displayGame() 
    break 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T15:35:59.527

看起来它只会转两圈然后退出？

正在发生的事情是它到达您的第一个`while`循环，并开始评估里面的代码。它做了一些事情，然后在`break`你的第一个循环结束后击中你的循环和执行恢复。然后它对第二个循环执行相同的操作，到达程序的末尾并退出。

我建议进行以下重构：

1.  将`while`循环下的所有内容放入两个函数中`user_play`，然后`computer_play`
2.  写一个类似的循环

这

```
usr_pts = 0
cmp_pts = 0

while (usr_pts < 5 and cmp_pts < 5):
    solved_word = False
    # set up word
    user_turn = False
    user_correct_guess = 0
    ai_correct_guess = 0
    while not solved_word:
        user_turn = not user_turn
        if user_turn:
            guess = play_user(...)
        else:
            guess = computer_play(...)
        # what ever accounting you need to do
        is_guess_in_word = test_guess_in_word(guess, ...)
        if is_guess_in_word:
            if user_turn:
                user_correct_guess += 1
            else:
                ai_correct_guess += 1
        solved_word = sort_out_if_word_solved(...)

    if user_correct_guess > ai_correct_guess:
        usr_pts += 1
    elif user_correct_guess < ai_correct_guess:
        cmp_pts +=1
    else:
        # a tie
        pass 
```

# java - 文本文件缓冲阅读器

> ID：15864012
> 
> 赞同：0
> 
> 时间：2013-04-07T15:19:31.617
> 
> 标签：java, text, bufferedreader

我如何将代码中的 befferedreader 更改为 Scanner，因为我不允许使用 BufferedReader？还是有可能？

```
public static void Option3Method() throws IOException
{ 
   FileReader fr = new FileReader("wordlist.txt");
   BufferedReader br = new BufferedReader(fr); 
   String s;
   String words[]=new String[500];
   String word = JOptionPane.showInputDialog("Enter a word to search for");
   while ((s=br.readLine())!=null)
   { 
     int indexfound=s.indexOf(word);
     if (indexfound>-1)
     { 
        JOptionPane.showMessageDialog(null, "Word was found");
     }
     else if (indexfound<-1)
     {
        JOptionPane.showMessageDialog(null, "Word was not found");}
     }
     fr.close();
   }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T15:25:49.187

代替

`FileReader fr = new FileReader("wordlist.txt"); BufferedReader br = new BufferedReader(fr);`

和

`Scanner scan = new Scanner(new File("wordlist.txt"));`

并更换

`while ((s=br.readLine())!=null) {`

和

```
while (scan.hasNext()) {

            s=scan.nextLine();
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T15:27:09.853

您可以使用[获取文件的扫描仪构造函数，然后使用](http://docs.oracle.com/javase/6/docs/api/java/util/Scanner.html#Scanner%28java.io.File%29)[nextLine()](http://docs.oracle.com/javase/6/docs/api/java/util/Scanner.html#nextLine%28%29)使用该扫描仪读取行。要检查是否还有更多行要读取，请使用[hasNextLine()](http://docs.oracle.com/javase/6/docs/api/java/util/Scanner.html#hasNextLine%28%29)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T15:30:10.253

没有测试它，但它应该工作。

```
public static void Option3Method() throws IOException
{ 
   Scanner scan = new Scanner(new File("wordlist.txt"));
   String s;
   String words[]=new String[500];
   String word = JOptionPane.showInputDialog("Enter a word to search for");
   while (scan.hasNextLine())
   { 
     s = scan.nextLine();
     int indexfound=s.indexOf(word);
     if (indexfound>-1)
     { 
        JOptionPane.showMessageDialog(null, "Word was found");
     }
     else if (indexfound<-1)
     {
        JOptionPane.showMessageDialog(null, "Word was not found");}
     }
   }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-07T15:26:25.330

如果您查看 Scanner 类，您会发现它有一个构造函数，该构造函数接受一个 File，而后者又可以使用 String 路径进行实例化。Scanner 类有一个类似于 readLine() 的方法，即 nextLine()。

# php - OSTicket - 未知或无效的架构签名

> ID：15864013
> 
> 赞同：1
> 
> 时间：2013-04-07T15:19:39.970
> 
> 标签：php, mysql

我已将此问题提交给 OS-Ticket 社区论坛，但尚未收到回复。我正在尝试安装最新版本（1.7.0）并收到错误消息：

未知或无效的架构签名 (d959a00e55c75e0c903b9e37324fd25d .. 9e85d0c8f8532e3b0be38e99aba07aa1)

我查看了源代码，但仍然不确定为什么会生成此错误。有谁知道我可以如何解决这个问题或可能导致它的原因？我以前在我的本地机器上安装了系统没有问题，我要安装的服务器是 Windows，所以我想知道在 Windows 上处理这个系统/MySQL 时是否有任何已知的事情需要注意。

如果我找不到解决方案，是否有任何推荐的票务支持系统可供我使用？

提前谢谢了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2020-10-28T08:12:55.153

只需更改文件中签名的第二部分-

包括\升级者\流\核心.sig

[参考](https://github.com/osTicket/osTicket/issues/511#issuecomment-320251480)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-13T18:48:06.673

他们的论坛中有一个解决方法的帖子。

帖子#5： http://osticket.com/forums/showthread.php?t= [13703](http://osticket.com/forums/showthread.php?t=13703)

大约一个月前，我就解决方法联系了开发团队，他们建议不要这样做，告诉我他们正在努力修复它；并给他们 2-3 周的时间。到目前为止，我再次与他们联系，但没有任何回应，也没有找到解决办法。

我没有听说有人使用修复报告问题。尽管如此，我会说“使用风险自负”免责声明。

# c++ - 简单的 HTTPS 服务器和 Keep-Alive 连接

> ID：15864019
> 
> 赞同：3
> 
> 时间：2013-04-07T15:20:11.723
> 
> 标签：c++, https, openssl, boost-asio

我正在尝试通过修改[Boost ASIO 示例](http://www.boost.org/doc/libs/1_53_0/doc/html/boost_asio/example/ssl/server.cpp)来编写一个简单的 HTTPS 服务器。它可以工作，但问题是它为来自客户端的每个请求建立了一个安全连接，这极大地减慢了通信速度。

我知道 HTTPS 服务器应该使用 Keep-Alive 连接。但我不知道如何扩展上述示例来做到这一点。就我而言，情况非常简单，因为我总是有 1:1 连接，所以不需要会话管理，总是只有一个有效会话。

我使用两种 HTTP 响应：

```
std::string HTTPS::createResponse(status_type status)
{
    std::stringstream response;
    response<<statusCodeToString(status);
    response<<"Content-Length: "<<statusToContentString(status).size()<<"\r\n";
    response<<"Content-Type: text/html\r\n\r\n";
    response<<statusToContentString(status);

    return response.str();
}

std::string HTTPS::createResponse(status_type status, const std::string &data)
{
    std::stringstream response;
    response<<"HTTP/1.1 200 OK\r\n";
    response<<"Content-Length: "<<data.size()<<"\r\n";
    response<<"Content-Type: text/plain\r\n\r\n";
    response<<data;

    return response.str();
}

std::string HLSProxyServerSSL::statusCodeToString(status_type status)
{
    static const char ok_s[] =
        "HTTP/1.1 200 OK\r\n";
    static const char created_s[] =
        "HTTP/1.1 201 Created\r\n";
    static const char accepted_s[] =
        "HTTP/1.1 202 Accepted\r\n";
    static const char no_content_s[] =
        "HTTP/1.1 204 No Content\r\n";
    static const char multiple_choices_s[] =
        "HTTP/1.1 300 Multiple Choices\r\n";
    static const char moved_permanently_s[] =
        "HTTP/1.1 301 Moved Permanently\r\n";
    static const char moved_temporarily_s[] =
        "HTTP/1.1 302 Moved Temporarily\r\n";
    static const char not_modified_s[] =
        "HTTP/1.1 304 Not Modified\r\n";
    static const char bad_request_s[] =
        "HTTP/1.1 400 Bad Request\r\n";
    static const char unauthorized_s[] =
        "HTTP/1.1 401 Unauthorized\r\n";
    static const char forbidden_s[] =
        "HTTP/1.1 403 Forbidden\r\n";
    static const char not_found_s[] =
        "HTTP/1.1 404 Not Found\r\n";
    static const char not_supported_s[] =
        "HTTP/1.1 405 Method Not Supported\r\n";
    static const char not_acceptable_s[] =
        "HTTP/1.1 406 Method Not Acceptable\r\n";
    static const char internal_server_error_s[] =
        "HTTP/1.1 500 Internal Server Error\r\n";
    static const char not_implemented_s[] =
        "HTTP/1.1 501 Not Implemented\r\n";
    static const char bad_gateway_s[] =
        "HTTP/1.1 502 Bad Gateway\r\n";
    static const char service_unavailable_s[] =
        "HTTP/1.1 503 Service Unavailable\r\n";

    switch (status)
    {
        case ok:
            return ok_s;
        case created:
            return created_s;
        case accepted:
            return accepted_s;
        case no_content:
            return no_content_s;
        case multiple_choices:
            return multiple_choices_s;
        case moved_permanently:
            return moved_permanently_s;
        case moved_temporarily:
            return moved_temporarily_s;
        case not_modified:
            return not_modified_s;
        case bad_request:
            return bad_request_s;
        case unauthorized:
            return unauthorized_s;
        case forbidden:
            return forbidden_s;
        case not_found:
            return not_found_s;
        case not_supported:
            return not_supported_s;
        case not_acceptable:
            return not_acceptable_s;
        case internal_server_error:
            return internal_server_error_s;
        case not_implemented:
            return not_implemented_s;
        case bad_gateway:
            return bad_gateway_s;
        case service_unavailable:
            return service_unavailable_s;
        default:
            return internal_server_error_s;
    }
}

std::string HLSProxyServerSSL::statusToContentString(status_type status)
{
    static const char ok_s[] = "";
    static const char created_s[] =
        "<html>"
        "<head><title>Created</title></head>"
        "<body><h1>201 Created</h1></body>"
        "</html>";
    static const char accepted_s[] =
        "<html>"
        "<head><title>Accepted</title></head>"
        "<body><h1>202 Accepted</h1></body>"
        "</html>";
    static const char no_content_s[] =
        "<html>"
        "<head><title>No Content</title></head>"
        "<body><h1>204 Content</h1></body>"
        "</html>";
    static const char multiple_choices_s[] =
        "<html>"
        "<head><title>Multiple Choices</title></head>"
        "<body><h1>300 Multiple Choices</h1></body>"
        "</html>";
    static const char moved_permanently_s[] =
        "<html>"
        "<head><title>Moved Permanently</title></head>"
        "<body><h1>301 Moved Permanently</h1></body>"
        "</html>";
    static const char moved_temporarily_s[] =
        "<html>"
        "<head><title>Moved Temporarily</title></head>"
        "<body><h1>302 Moved Temporarily</h1></body>"
        "</html>";
    static const char not_modified_s[] =
        "<html>"
        "<head><title>Not Modified</title></head>"
        "<body><h1>304 Not Modified</h1></body>"
        "</html>";
    static const char bad_request_s[] =
        "<html>"
        "<head><title>Bad Request</title></head>"
        "<body><h1>400 Bad Request</h1></body>"
        "</html>";
    static const char unauthorized_s[] =
        "<html>"
        "<head><title>Unauthorized</title></head>"
        "<body><h1>401 Unauthorized</h1></body>"
        "</html>";
    static const char forbidden_s[] =
        "<html>"
        "<head><title>Forbidden</title></head>"
        "<body><h1>403 Forbidden</h1></body>"
        "</html>";
    static const char not_found_s[] =
        "<html>"
        "<head><title>Not Found</title></head>"
        "<body><h1>404 Not Found</h1></body>"
        "</html>";
    static const char not_supported_s[] =
        "<html>"
        "<head><title>Method Not Supported</title></head>"
        "<body><h1>Method Not Supported</h1></body>"
        "</html>";
    static const char not_acceptable_s[] =
        "<html>"
        "<head><title>Request Not Acceptable</title></head>"
        "<body><h1>Request Not Acceptable</h1></body>"
        "</html>";
    static const char internal_server_error_s[] =
        "<html>"
        "<head><title>Internal Server Error</title></head>"
        "<body><h1>500 Internal Server Error</h1></body>"
        "</html>";
    static const char not_implemented_s[] =
        "<html>"
        "<head><title>Not Implemented</title></head>"
        "<body><h1>501 Not Implemented</h1></body>"
        "</html>";
    static const char bad_gateway_s[] =
        "<html>"
        "<head><title>Bad Gateway</title></head>"
        "<body><h1>502 Bad Gateway</h1></body>"
        "</html>";
    static const char service_unavailable_s[] =
        "<html>"
        "<head><title>Service Unavailable</title></head>"
        "<body><h1>503 Service Unavailable</h1></body>"
        "</html>";

    switch (status)
    {
        case ok:
            return ok_s;
        case created:
            return created_s;
        case accepted:
            return accepted_s;
        case no_content:
            return no_content_s;
        case multiple_choices:
            return multiple_choices_s;
        case moved_permanently:
            return moved_permanently_s;
        case moved_temporarily:
            return moved_temporarily_s;
        case not_modified:
            return not_modified_s;
        case bad_request:
            return bad_request_s;
        case unauthorized:
            return unauthorized_s;
        case forbidden:
            return forbidden_s;
        case not_found:
            return not_found_s;
        case not_supported:
            return not_supported_s;
        case not_acceptable:
            return not_acceptable_s;
        case internal_server_error:
            return internal_server_error_s;
        case not_implemented:
            return not_implemented_s;
        case bad_gateway:
            return bad_gateway_s;
        case service_unavailable:
            return service_unavailable_s;
        default:
            return internal_server_error_s;
        }
} 
```

我相信回复是可以的，但请检查一下——这不是我的专业领域。

现在的通信流程如下：

1、服务器开始接受一个新的连接——创建一个会话，绑定等待传入握手请求的异步接受器。

2，如果发生传入握手，则服务器在第 1 点创建的会话上开始握手。

3、一旦握手完成，就处理传入的消息

会话握手句柄如下。它读取一个 HTTP 命令并对其进行处理。我故意不关心标头的其余部分，因为从服务器端来看，只有 GET 命令是有效的——服务器就像一个简单的重新发送者一样工作。

```
void SSLSession::handleHandshake(const boost::system::error_code& error)
{
    __log_print(LOG_INFO, "SSLSession", "handleHandshake");

    if (!error)
    {
        boost::asio::async_read_until(_socket, _data, "\r\n", boost::bind(&SSLSession::handleHttpRequestLine, this, _1));
    }
    else
    {
        delete this;
    }
}

void SSLSession::handleHttpRequestLine(boost::system::error_code ec)
{
    std::string method, uri, version;

    if (!ec)
    {
        char sp1, sp2, cr, lf;
        std::istream is(&_data);
        is.unsetf(std::ios_base::skipws);
        is >> method >> sp1 >> uri >> sp2 >> version >> cr >> lf;
    }

    handleHttpRequest(method, uri);
} 
```

**所以我的问题是**，我该如何修改方法：

```
void SSLSession::handleHandshake(const boost::system::error_code& error) 
```

不仅要开始收听一个命令，还要继续收听对该会话有效的 GET 命令？我尝试添加另一个

```
boost::asio::async_read_until(_socket, _data, "\r\n", boost::bind(&SSLSession::handleHttpRequestLine, this, _1)); 
```

调用`handleHttpRequest(method, uri);`方法结束，但我遇到了死锁......我相信它一定是微不足道的，但我迷失在所有这些异步接受器和处理程序中......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T02:01:06.330

要持续监听传入`GET`的命令，最简单的解决方案是`async_read_until`从处理`async_read_until`. 在示例代码中，将其放入`handleHttpRequest`听起来像是一个可行的选择。

如果您迷失在异步调用链中，请考虑说明它们：

```
void SSLSession::handleHandshake(...)
{
  if (!error)
  {
    boost::asio::async_read_until(...);  ----.
  }                                          |
}              .-----------------------------'
               |  .--------------------------.                     
               v  v                          |
void SSLSession::handleHttpRequestLine(...)  |
{                                            |
  handleHttpRequest(...); --.                |
}                           |                |
               .------------'                |
               v                             |
void SSLSession::handleHttpRequest(...)      |
{                                            |
  boost::asio::async_read_until(...);  ------'
} 
```

对于 Boost.Asio 1.47+，调试链的另一个不错的选择是启用[句柄跟踪](http://www.boost.org/doc/libs/1_53_0/doc/html/boost_asio/overview/core/handler_tracking.html)。只需定义`BOOST_ASIO_ENABLE_HANDLER_TRACKING`，Boost.Asio 就会将调试输出（包括时间戳）写入标准错误流。 [这个](https://stackoverflow.com/a/15418025/1053968)答案更详细地介绍了调试处理程序。

如果您遇到死锁，则很可能在应用程序代码中。对于大多数 Boost.Asio 类型，在一个对象上挂起多个异步操作是安全的；它只是指定对对象的并发调用是不安全的。尽管如此，它通常不会在某些类型上出现问题，例如`ip::tcp::socket`. 但是，`ssl::stream`强调：

> 应用程序还必须确保所有异步操作都在相同的隐式或显式链中执行。

可能会发生未定义的行为，这可能会导致死锁，如[本](https://stackoverflow.com/questions/15352472/15367222)问题所述。如果多个线程正在处理`io_service`事件循环，则考虑在[`boost::asio::strand`](http://www.boost.org/doc/libs/1_47_0/doc/html/boost_asio/overview/core/strands.html).

# jquery - 鼠标悬停时jQuery交换div

> ID：15864024
> 
> 赞同：1
> 
> 时间：2013-04-07T15:20:48.580
> 
> 标签：jquery

有人知道在悬停时交换/更改 div 的简单 jquery 脚本吗？

例如

我有 3 个 li 元素：

```
<ul>
   <li><a href="#" id="link1">Link1</a></li>
   <li><a href="#" id="link2">Link2</a></li>
   <li><a href="#" id="link3">Link3</a></li>
</ul> 
```

并且有 3 个 DIV 容器：

```
<div id="container1">content 1</div>
<div id="container2">content 2</div>
<div id="container3">content 3</div> 
```

所以，我希望当页面打开 DIV #container1 时可见，而 #container2、#container3 可以隐藏。然后，如果用户“悬停”link2 或 link3 #container1 被隐藏，#container2 或 #container3 将变得可见。我希望你能理解我的观点。

如果有人愿意提供帮助，我创建了一个[小提琴。](http://jsfiddle.net/nVx7a/1/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T15:27:34.977

```
$('#container2, #container3').hide();
$('li a').mouseover(function(){
    var idx= $(this).attr('id').substr(-1);
    $('#container1, #container2, #container3').hide();
    $('#container'+idx).show();
}); 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/nVx7a/8/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T15:34:17.617

在 CSS 中将 .container 设置为 display:none

小提琴：http: [//jsfiddle.net/calder12/nVx7a/14/](http://jsfiddle.net/calder12/nVx7a/14/)

jQuery：

```
$(".link").hover(function(){
   var whichOne = $(this).attr("id").substring(4);
    $(".container").each(function(){
   if($(this).attr("id")=="container"+whichOne)
   {   
       $(this).show();
   } else {
       $(this).hide();
   }
    });
}); 
```

HTML：

```
<ul>
       <li><a href="#" id="link1" class="link">Link1</a></li>
       <li><a href="#" id="link2" class="link">Link2</a></li>
       <li><a href="#" id="link3" class="link">Link3</a></li>
</ul>

<div id="container1" class="container">content 1</div>
<div id="container2" class="container">content 2</div>
<div id="container3" class="container">content 3</div> 
```

# c - 带有 fork() 和 pipe() 的 C 并行服务器

> ID：15864026
> 
> 赞同：1
> 
> 时间：2013-04-07T15:20:51.460
> 
> 标签：c, fork, pipe

我正在尝试创建并行服务器。它应该能够同时与多个客户端（通过 telnet）一起工作。我使用 fork() 创建子进程和 pipe() 在父进程和子进程之间共享变量。我的问题是它同时只允许一个连接，第二个必须等到第一个连接完成。我是新手，所以找不到为什么我得到顺序服务器而不是并行。

```
/* 
 * File:   3LD_parduotuve.c    
 * Author: zuykas
 *
 * Created on April 6, 2013, 4:33 PM
 */

#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>
#include <errno.h>
#include <string.h>
#include <string.h>
#include <sys/socket.h>
#include <netinet/in.h>
#include <netdb.h>
#include <arpa/inet.h>
#include <sys/wait.h>
#include <signal.h>
#include <string.h>

#define PORT "1234"
#define BACKLOG 10

void sigchld_handler(int s) {
    while (waitpid(-1, NULL, WNOHANG) > 0);
}

void *get_in_addr(struct sockaddr *sa) {
    if (sa->sa_family == AF_INET) {
        return &(((struct sockaddr_in*) sa)->sin_addr);
    }
    return &(((struct sockaddr_in6*) sa)->sin6_addr);
}

int main(void) {
    int sockfd, new_fd;
    struct addrinfo hints, *servinfo, *p;
    struct sockaddr_storage their_addr;
    socklen_t sin_size;
    struct sigaction sa;
    int yes = 1;
    char s[INET6_ADDRSTRLEN];
    int rv;
    memset(&hints, 0, sizeof hints);
    hints.ai_family = AF_UNSPEC;
    hints.ai_socktype = SOCK_STREAM;
    hints.ai_flags = AI_PASSIVE;
    if ((rv = getaddrinfo(NULL, PORT, &hints, &servinfo)) != 0) {
    fprintf(stderr, "getaddrinfo: %s\n", gai_strerror(rv));
    return 1;
    }
    for (p = servinfo; p != NULL; p = p->ai_next) {
        if ((sockfd = socket(p->ai_family, p->ai_socktype, p->ai_protocol)) == -1) {
            perror("server: socket");
            continue;
        }
        if (setsockopt(sockfd, SOL_SOCKET, SO_REUSEADDR, &yes, sizeof (int)) == -1) {
            perror("setsockopt");
            exit(1);
        }
        if (bind(sockfd, p->ai_addr, p->ai_addrlen) == -1) {
            close(sockfd);
            perror("server: bind");
            continue;
        }
        break;
    }
    if (p == NULL) {
        fprintf(stderr, "Serveris: failed to bind\n");
        return 2;
    }
    freeaddrinfo(servinfo);
    if (listen(sockfd, BACKLOG) == -1) {
        perror("listen");
        exit(1);
    }
    sa.sa_handler = sigchld_handler;
    sigemptyset(&sa.sa_mask);
    sa.sa_flags = SA_RESTART;
    if (sigaction(SIGCHLD, &sa, NULL) == -1) {
            perror("sigaction");
        exit(1);
    }
    printf("Serveris: laukiama prisijungimo\n");
    //prekiu_sk is variable to be changed in child processes and saved in parent
    int prekiu_sk = 100, tekstas, kl_zinute;
    int kliento_sk;
    char buffer[80];

    int fd1[2];
    pipe(fd1);
    write(fd1[1],&prekiu_sk,sizeof(prekiu_sk));

    while (1) {

    sin_size = sizeof their_addr;
    new_fd = accept(sockfd, (struct sockaddr *) &their_addr, &sin_size);
    if (new_fd == -1) {
        perror("accept");
        continue;
    }
    inet_ntop(their_addr.ss_family,
            get_in_addr((struct sockaddr *) &their_addr), s, sizeof s);
    printf("Serveris: prisijungiama adresu %s\n", s);

    if (!fork()) {
        int skaicius;
        read(fd1[0],&skaicius,sizeof(prekiu_sk));
        close(sockfd);
        if (skaicius<1)
        {
            tekstas = sprintf(buffer, "Sandelyje nebera prekiu.\nRysys nutraukiamas\n");
            send(new_fd, buffer, tekstas, 0);
            write(fd1[1],&skaicius, sizeof(skaicius));
            //close(fd1[0]);
            //close(fd1[1]);
            close(new_fd);
            exit(0);                

        }
        tekstas = sprintf(buffer, "Siuo metu sandalyje uzregistruota %d prekiu.\n", skaicius);
        send(new_fd, buffer, tekstas, 0);
        tekstas = sprintf(buffer, "Iveskite isimamu prekiu skaiciu.\n");
        send(new_fd, buffer, tekstas, 0);
        kl_zinute = recv(new_fd, buffer, sizeof (buffer), 0);
        kliento_sk = atoi(buffer);
        if ((kliento_sk<1) || (kliento_sk>skaicius))
        {
            tekstas = sprintf(buffer, "Neteisingai ivestas isimamu prekiu skaicius.\nRysys nutraukiamas\n");
            send(new_fd, buffer, tekstas, 0);
            write(fd1[1],&skaicius, sizeof(skaicius));
            //close(fd1[0]);
            //close(fd1[1]);
            close(new_fd);
            exit(0); 
        }
        printf("%d \n  %d \n %d", *fd1, kl_zinute, kliento_sk);
        //read(fd1[0],&skaicius,sizeof(prekiu_sk));
        if (skaicius<kliento_sk)
        {
            tekstas = sprintf(buffer, "Likutis sandelyje nepakankamas.\n "
                    "Kazkas pries jus sumazino prekiu kieki.\n"
                    "Rysys nutraukiamas\n");
            send(new_fd, buffer, tekstas, 0);
            write(fd1[1],&skaicius, sizeof(skaicius));
            //close(fd1[0]);
            //close(fd1[1]);
            close(new_fd);
            exit(0); 
        }
        skaicius = skaicius - kliento_sk;
        printf("%d",atoi(buffer));
        tekstas = sprintf(buffer, "Liko %d prekiu \n", skaicius);
        send(new_fd, buffer, tekstas, 0);
        write(fd1[1],&skaicius, sizeof(skaicius));
        printf("%d child %d",*fd1, skaicius);
        //close(fd1[0]);
        //close(fd1[1]);
        close(new_fd);
        exit(0);
    }
    //wait(NULL);
    read(fd1[0],&prekiu_sk,sizeof(prekiu_sk));
    write(fd1[1],&prekiu_sk,sizeof(prekiu_sk));
    //prekiu_sk=prekiu_sk-*fd1;
    printf("\n parent prekiu_sk: %d parent fd: %d \n", prekiu_sk, *fd1);
    close(new_fd);
    }
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T16:06:07.813

我怀疑您正在通过使用管道的方式进行序列化。即使我错了，看到父母和孩子都在管道上进行读取和写入表明存在问题。在你调用 fork 之后，父子双方都争相从管道中读取数据，这可能不是你想要的。

如果您真的想双向传递信息，请创建两个管道（一个用于父-> 子流量，另一个用于子-> 父流量）。在 fork() 之后，两个进程都应该立即关闭它们不使用的管道的末端，这将帮助您保持正确的管道做什么。

如果您将其编写为学习练习，则可以考虑其他几种方法：

*   为每个连接创建线程而不是进程（使用 MT 编程而不是管道来共享数据）
*   使用共享内存而不是管道在进程之间进行通信
*   使用信号量，因为您的通信需求很少
*   使用像 inetd 这样的服务来为你分叉你的个人服务器

只是一些想法让你继续......

# php - PHP相交两个数组并替换一项

> ID：15864031
> 
> 赞同：0
> 
> 时间：2013-04-07T15:21:29.880
> 
> 标签：php, multidimensional-array, array-intersect

我有两个多维数组，我想使用 PHP array_intersect 函数相交，但在为此执行输出之前，它还必须只替换数组的一个元素。

例子：

```
$array1 = Array(
Array(37768201, 273, Array(602, 603, 604, 605, 606), 0),
Array(37483503, 473, Array(604, 605, 606), 0),
Array(37500944, 332, Array(602, 603), 0)
);

$array2 = Array(
Array(37768201, 273, Array(602, 603, 604, 605, 606), 13852),
Array(37483503, 473, Array(603, 604, 605, 606), 13853),
Array(37500944, 332, Array(602, 603, 604, 605), 13854),
Array(37483903, 152, Array(602, 603, 604, 605, 606), 13855),
Array(37483703, 175, Array(602, 603, 604, 605, 606), 13856)
); 
```

array_intersect 结果：

```
$array1 = Array(
Array(37768201, 273, Array(602, 603, 604, 605, 606), 0),
Array(37483503, 473, Array(604, 605, 606), 0),
Array(37500944, 332, Array(602, 603), 0)
); 
```

预期结果：

```
$array1 = Array(
Array(37768201, 273, Array(602, 603, 604, 605, 606), 13852),
Array(37483503, 473, Array(604, 605, 606), 13853),
Array(37500944, 332, Array(602, 603), 13854)
); 
```

这可以使用 array_uintersect 来完成吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T15:33:03.810

调用后可以添加一小段代码`array_intersect()`

对于您的示例：

```
foreach ($array1 as $key => $values)
  $array1[$key][3] = 13852; 
```

尽管如果您说哪些数据是可变的，那会容易得多。例如，数字`13852`似乎在每次执行和（可能）在每个子数组（$array2[0][3] != $array2[1][3]）中都是可变的。那么该代码将无效，您应该改用它：

```
foreach ($array1 as $key => $values)
  $array1[$key][3] = $array2[$key][3]; 
```

还有更多可能的情况。

# php - 在使用 ajax 发送消息期间从 mysql 数据库检查用户名

> ID：15864033
> 
> 赞同：0
> 
> 时间：2013-04-07T15:21:35.853
> 
> 标签：php, ajax, jquery

我有一个简单的 php 代码来向 mysql 数据库中的注册成员发送邮件。在处理操作表单之前，我需要检查接收者字段是否包含来自用户表的有效用户名。如果不是，那么它将在页面上显示“不是有效用户”的 ajax 警报，撰写消息表单是 -

```
<?php
session_start();
include("header.php");
include("includes/usermenu.php");
include("includes/connection.php");
if(isset($_SESSION['id']))
{
$username=$_SESSION['username'];
    $ret_user = mysql_query("SELECT * FROM users WHERE id = '$id'") or die(mysql_error());
        while($fetch_user = mysql_fetch_array($ret_user)){
            $username = $fetch_user['username'];
            }
            $ret_count = mysql_query ("SELECT * FROM inbox WHERE receiver = '$username' and readstatus = '0'  ORDER BY timesend") or die(mysql_error());
        $msgcount = 0;
            while($countmsg = mysql_fetch_array($ret_count))
            { $msgcount++;
            }
?>  
    <script type="text/javascript" src="js/jquery.js"></script>
    <script type="text/javascript" src="js/check_user.js"></script>
    <script type="text/javascript" src="js/jquery.autocomplete.js"></script>
    <link rel="stylesheet" type="text/css" href="styles/jquery.autocomplete.css" />

<script type="text/javascript">
$().ready(function() {
    $("#username").autocomplete("includes/source.php", {
        width: 260,
        matchContains: true,
        selectFirst: false
    });
});
</script>

<div id='slidemenu'>

<ul>
   <li><a href='compose.php'><span>Compose</span></a></li>
   <li><a href='mailbox.php'><span>Inbox</span></a></li>
   <li><a href='unread.php'><span>Unread <strong>(<?php echo $msgcount; ?>)</strong></span></a></li>
   <li><a href='outbox.php'><span>Outbox</span></a></li>
</ul>
</div>
<div id="msgbox" align="right">
            <div style="height:25px; text-align:center; margin-top: 20px;" >   <font style="color:yellow;font-size:18px;font-family:'Orienta', sans-serif; font-size: 12px;" id="W"></font> 
                                  <div  id="HIDDEN" style="display: none;"> </div>
            </div>
    <table>
    <form action="includes/savemsg.php" method="post">
                <tr><td><label for="rec">Recievers ID</label></td>
                <td><input type="text" name="username" id="username" tabindex="1"/><br /><br /></td></tr>
                <tr><td><label for="subject">Subject</label></td>
                <td><input type="text" name="subject" tabindex="2"/><br /><br /></td></tr>
                <tr><td><label for="msg">Message</label></td>
                <td><textarea name="message" cols="50" rows="3" tabindex="3"></textarea></td></tr>
                <tr><td></td><td><input type="submit" onClick="check_user();"/></td></tr>

    </form>
    </table>

</div>

<?php
}
else    header("location: login.php");
include("includes/footer.php");
?> 
```

和行动 php 文件是 -

```
<?php
session_start();
include("connection.php");
$id = $_SESSION['id'];
    $rec_id = $_POST['username'];
    $subject = $_POST['subject'];
    $message = $_POST['message'];

    $ret_user = mysql_query("SELECT * FROM users WHERE id = '$id'") or die(mysql_error());
        while($fetch_user = mysql_fetch_array($ret_user)){
            $username = $fetch_user['username'];
            }

    $send_msg = mysql_query ("INSERT INTO inbox VALUES(DEFAULT,'$username','$rec_id','$subject','$message',now(),now(),'0')") or die(mysql_error());
    ?>
    <script>
        alert("Message send");
    </script>   
    <?php
 header ("location: ../mailbox.php")    

?> 
```

检查它的ajax代码将是什么。

# ios - 按下特殊的表格视图单元格时如何更改多个标签中的文本？

> ID：15864042
> 
> 赞同：3
> 
> 时间：2013-04-07T15:22:18.860
> 
> 标签：ios, xcode, label, tableview, tableviewcell

这里又是 ViewControllers。

这是我的 ViewController.h：

```
#import <UIKit/UIKit.h>

@interface ViewController : UIViewController<UITableViewDataSource, UITableViewDelegate>

@property (copy, nonatomic) NSDictionary *firstTableView;
@property (copy, nonatomic) NSArray *firstTableViewKey;

@property (weak, nonatomic) IBOutlet UILabel *norskLabel;
@property (weak, nonatomic) IBOutlet UILabel *infinitivLabel;
@property (weak, nonatomic) IBOutlet UILabel *presensLabel;
@property (weak, nonatomic) IBOutlet UILabel *preteritumLabel;
@property (weak, nonatomic) IBOutlet UILabel *perfektumLabel;

@end 
```

这是我的 ViewController.m：

```
#import "ViewController.h"

static NSString *SectionsTableIdentifier = @"SectionsTableIdentifier";

@interface ViewController ()

@end

@implementation ViewController

- (void)viewDidLoad
{
    [super viewDidLoad];

    UITableView *tableView = (id)[self.view viewWithTag:1];
    [tableView registerClass:[UITableViewCell class] forCellReuseIdentifier:SectionsTableIdentifier];

    NSString *path = [[NSBundle mainBundle] pathForResource:@"SterkeVerb" ofType:@"plist"];

    self.firstTableView = [NSDictionary dictionaryWithContentsOfFile:path];

    self.firstTableViewKey = [[self.firstTableView allKeys] sortedArrayUsingSelector:@selector(compare:)];

    tableView.backgroundColor = [UIColor clearColor];
    tableView.opaque = NO;
    tableView.backgroundView = nil;

        // Do any additional setup after loading the view, typically from a nib.
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}
#pragma mark -
#pragma mark Table View Data Source Methods
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView{
    return [self.firstTableViewKey count];

}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section{
    NSString *key = self.firstTableViewKey[section];
    NSArray *nameSection = self.firstTableView[key];
    return [nameSection count];

}

- (NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section{
    return self.firstTableViewKey[section];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:SectionsTableIdentifier];

    NSString *key = self.firstTableViewKey[indexPath.section];
    NSArray *nameSection = self.firstTableView[key];

    cell.textLabel.text = nameSection[indexPath.row];
    return cell;

}

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {

    if (indexPath.row == 0){

        _norskLabel.text = @"å bake";
        _infinitivLabel.text = @"zu backen";
        _presensLabel.text = @"bäckt/backt";
        _preteritumLabel.text = @"backte";
        _perfektumLabel.text = @"hat gebacken";

}

    else if (indexPath.row == 1){

        _norskLabel.text = @"å motta";
        _infinitivLabel.text = @"zu empfangen";
        _presensLabel.text = @"empfängt";
        _preteritumLabel.text = @"empfing";
        _perfektumLabel.text = @"hat empfangen";
    } 
```

}

好的，所以我将我的表格视图划分为部分（AZ），当我填写代码时，它对于第一部分非常有效。但是，当我按下下一节中的一个单元格时，它显示的信息与第一节中的第一个单元格相同。为什么？

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {

if (indexPath.row == 0){

    _norskLabel.text = @"å bake";
    _infinitivLabel.text = @"zu backen";
    _presensLabel.text = @"bäckt";
    _preteritumLabel.text = @"backte";
    _perfektumLabel.text = @"hat gebacken";

    else if (indexPath.row == 1){

        _norskLabel.text = @"å begynne";
        _infinitivLabel.text = @"zu beginnen";
        _presensLabel.text = @"beginnt";
        _preteritumLabel.text = @"begann";
        _perfektumLabel.text = @"hat begonnen";
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T01:35:42.373

如果您在其中设置文本，则在调用`tableview:didSelectRowAtIndexPath:`时将被覆盖`tableview:cellForRowAtIndexPath:`

在内部`tableview:didSelectRowAtIndexPath:`，您需要访问驱动表的数据并从源头更改它。

```
NSString *key = self.firstTableViewKey[indexPath.section];
NSArray *nameSection = self.firstTableView[key];

nameSection[indexPath.row] = @"New Value"; 
```

# java - 执行 SELECT 查询时发生 ClassCastException

> ID：15864044
> 
> 赞同：0
> 
> 时间：2013-04-07T15:22:21.247
> 
> 标签：java, google-app-engine, jpa, jpql

目前，我将包含以下列的 CSV 文件上传到 Google App Engine 数据存储区：

```
id, roleName, eggName, highestAllTimePrice, lowestAllTimePrice, averagePrice 
```

而我去localhost:8888/_ah/admin/datastore时的表结果如下：

```
Key, Write Ops, ID/Name, averagePrice, eggName, eggNumber, highestAllTimePrice, lowestAllTimePrice, roleName 
```

我从表中获取所有数据，如下所示：

```
public String GetData(final ModelMap model)
{
    EntityManager em = EMF.get().createEntityManager();
    Query q = em.createQuery("SELECT s FROM Egg s");
    List<Egg> eggs = new ArrayList<Egg>(q.getResultList());

    model.addAttribute("eggs", eggs);
    return "index";
} 
```

实体

```
@Entity
public class Egg {
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Key key;

    private int eggNumber;
    private String roleName;
    private String eggName;
    private double highestPrice;
    private double lowestPrice;
    private double averagePrice;

    // getters setters
} 
```

但是当我运行那个查询时，我得到了这个错误：

```
java.lang.ClassCastException: java.lang.String cannot be cast to java.lang.Double
    at com.google.appengine.datanucleus.FetchFieldManager.fetchDoubleField(FetchFieldManager.java:140)
    at org.datanucleus.state.AbstractStateManager.replacingDoubleField(AbstractStateManager.java:2256)
    at Entity.Egg.jdoReplaceField(Egg.java)
    at Entity.Egg.jdoReplaceFields(Egg.java) 
```

问题是我不知道它为什么要转换类型？我是否错误地映射了我的实体类？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T16:35:14.433

也许您的双字段（highestPrice 等）被认为是数据存储中的字符串，因此无法映射到您的实体。

# css - 如何在 HTML 中移动优化我的滑块的大小？

> ID：15864047
> 
> 赞同：2
> 
> 时间：2013-04-07T15:22:33.977
> 
> 标签：css, wordpress, plugins, slider

我有一个名为 www.ellaror.se 的 wordpress 网站在第一页上，您可以看到一个正在工作并覆盖“内容”div 的整个宽度的滑块。

但是当我在手机上浏览网站时，它变小**了，但不是滑块**，它仍然是 1000px 宽度。

这是我自己添加的 CSS，因为我希望滑块更宽一点，这样它会覆盖整个页面并稍微向左和向上：

```
#soliloquy-container-268 {
margin-top: -100px;
width: 1000px;
margin-left: -76px; 
```

我们的 HTML ( `#soliloquy-container-268`) 中也有这个 CSS 代码片段：

```
style="max-width: 1000px; max-height: 300px;" 
```

我知道滑块不会变小，因为我已经给出了它，`width:1000px;`但是有什么聪明的方法可以使滑块覆盖整个内容页面并在您在手机上浏览它的同时变小？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T15:48:28.557

给滑块这个 CSS 值 -

```
#soliloquy-container-268 {
    max-width: 1000px;
    width:100%;
} 
```

# javascript - Javascript 关闭：内存泄漏

> ID：15864049
> 
> 赞同：6
> 
> 时间：2013-04-07T15:22:49.137
> 
> 标签：javascript, google-chrome, memory-leaks, closures

我有一个我不明白的内存泄漏。我编写了一种机制来处理具有半自动解除绑定的事件，这应该可以让我轻松清理内存。但在一种情况下，清理不会发生（我使用 chrome 的“配置文件（内存堆）”来检查剩下的“EventHandler”实例）。我真的不明白为什么会这样。关闭有一些奇怪的东西......

[使用 chrome 查看它的实际效果](http://serge.snakeman.be/Demo/test.html)

```
function Bind(obj, f) {
    return function() {
        return f.apply(obj, arguments);
    }
}

function EventHandler() {
    this.listeners = new Object();

    var _listenerID = 0;
    this.addListener = function(e, obj, listener, specialDisplay) {
        if (typeof(listener) === "function") {
            var listenerID = ++_listenerID;
            console.log("Events (" + (++EventHandler.All) + ", " + listenerID + ") ++" + e);

            if (!this.listeners.hasOwnProperty(e)) {
                this.listeners[e] = new Object();
            }
            this.listeners[e][listenerID] = listener;

            if (obj != null && typeof(obj.removeListener) == "function") {
                var deleteListenerID = obj.addListener("Delete", null, Bind(this, function() {
                    this.removeListener(e, listenerID);
                    obj.removeListener("Delete", deleteListenerID);
                }));
            }

            return listenerID;
        }

        return null;
    }
    this.fire = function(e, obj) {
        if (this.listeners.hasOwnProperty(e)) {
            for(var i in this.listeners[e]) {
                this.listeners[e][i](obj);
            }
        }
    }
    this.removeListener = function(e, listenerID) {
        if (this.listeners.hasOwnProperty(e) && this.listeners[e].hasOwnProperty(listenerID)) {
            delete this.listeners[e][listenerID];

            console.log("Events (" + (--EventHandler.All) + ", " + listenerID + ") --" + e);
        }
    }
}

EventHandler.All = 0;

function Loader() {
}

Loader.files = new Object();

Loader.LoadImage = function(src, f) {
    if (!Loader.files.hasOwnProperty(src)) {
        var handler = new EventHandler();

        console.log("Loading.... (" + src + ")");

        Loader.files[src] = function(fnct) {
            handler.addListener("ImageLoaded", handler, function(img) {
                fnct(img);
            });
        }

        handler.addListener("ImageLoaded", handler, function() {
            Loader.files[src] = function(fnct) {
                fnct(img);
            }
        });     

        var img = new Image();
        $(img).load(function() {
            console.log("Loaded.... (" + src + ")");
            handler.fire("ImageLoaded", img);
            handler.fire("Delete");
            $(img).unbind('load');
        });
        img.src = src;
    }

    Loader.files[src](f);
}

Loader.LoadImage("http://serge.snakeman.be/Demo/house.jpg", function() { alert("ok"); }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T16:27:31.087

您创建通过变量保存对`EventHandler`实例的引用的闭包。`handler`加载图像后，其中一个闭包仍然存在：

```
 handler.addListener("ImageLoaded", handler, function() {
        Loader.files[src] = function(fnct) {
            fnct(img);
        }
    }); 
```

这是内部函数`function(fnct) {...`。`EventHandler`只要闭包存在，就不能释放的实例。您唯一的解决方案是摆脱这种关闭。或者，如果可能，您手动释放实例。以下可能对您有用：

```
handler.fire("Delete");
handler = undefined; 
```

Chrome 的内存分析器会向您显示对象的保留树，这只是说“谁持有该对象的引用”的另一种方式。在您的示例中，它是**EventHandler** <- **handler**（由闭包合并的 LoadImage 方法的变量） <- **house.jpg**，它实际上是`Loader.files[src]`并且具有 value `function(fnct) { fnct(img); }`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T06:58:58.350

在添加“侦听器”时，如果您长时间使用查询，请确保将其删除。

```
this.listeners = new Object(); 
```

或者

```
this.listeners[e] = new Object(); 
```

这会将对象作为数组添加到侦听器，但不会在任何时候删除它们。

这可能是内存消耗的原因。它可能不会泄漏，它的对象分配。使用浏览器消耗您的 RAM。:)

# html - CSS：内部 div 的固定位置

> ID：15864052
> 
> 赞同：0
> 
> 时间：2013-04-07T15:23:03.803
> 
> 标签：html, css

我正在尝试在 div 中导入用户的 facebook 朋友。`Friend Divs`没有正确定位。他们根据名字的长度乱七八糟。

```
Note:I was not able to show full name of friends because it was hard to fit in a small Friend Div. 
```

**CSS**

```
#jfmfs-friend-container {
    overflow:scroll;
    overflow-x: hidden;
    -ms-overflow-x: hidden;
    width:100%;
    height:7.6em;  
    color: #333;
    background-color: #F7F7F7;
    padding-top: 10px;
}
.jfmfs-friend {                
    cursor:pointer;
    float:left;
    height:3em;
    width:12em;
    font-size:11px;
    overflow:hidden;
    display:inline-block;
    margin-bottom: 0.40em;
}
.friend-name  {
    padding-left: 5px;
    width: 60px;
    font-weight: bold;
    color: #000;
    font-size: 12px;
}

.friend-checkbox {
    position: relative;
    vertical-align:middle;
    margin: 0px 0px 0px;
}

.friend-img {
    padding-left: 5px;
    width: 28px;
    height: 28px;
} 
```

**HTML**

```
<div id="jfmfs-friend-container">
<div class="jfmfs-friend  " id="00000000000"><input class="friend-checkbox" type="checkbox"><img src="//graph.facebook.com/000000000/picture" class="friend-img"><span class="friend-name">hhhhhHy uuuu</span></div>
<div class="jfmfs-friend  " id="00000000012"><input class="friend-checkbox" type="checkbox"><img src="//graph.facebook.com/00000000012/picture" class="friend-img"><span class="friend-name">hhhhhHy uuuu</span></div>
<div class="jfmfs-friend  " id="00000000330"><input class="friend-checkbox" type="checkbox"><img src="//graph.facebook.com/00000000330/picture" class="friend-img"><span class="friend-name">hhhhhHy uuuu</span></div>
<div class="jfmfs-friend  " id="00000000044"><input class="friend-checkbox" type="checkbox"><img src="//graph.facebook.com/00000000044/picture" class="friend-img"><span class="friend-name">hhhhhHy uuuu</span></div>
<div class="jfmfs-friend  " id="00000000880"><input class="friend-checkbox" type="checkbox"><img src="//graph.facebook.com/00000000880/picture" class="friend-img"><span class="friend-name">hhhhhHy uuuu</span></div>
<div class="jfmfs-friend  " id="00000000770"><input class="friend-checkbox" type="checkbox"><img src="//graph.facebook.com/00000000770/picture" class="friend-img"><span class="friend-name">hhhhhHy uuuu</span></div>
</div> 
```

**实际结果：** ![在此处输入图像描述](https://i.stack.imgur.com/5ZuMk.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T15:42:24.017

尝试添加`display:inline-block;`到`.friend-name`

像这样[-jsFiddle](http://jsfiddle.net/apaul34208/Yyjxe/)

```
.friend-name  {
    display:inline-block; 
    padding-left: 5px;
    width: 70px;
    font-weight: bold;
    color: #000;
    font-size: 12px;
} 
```

# java - 我正在尝试使用 JOptionPane 首先选择一个人或一个公司，然后继续输入

> ID：15864053
> 
> 赞同：0
> 
> 时间：2013-04-07T15:23:12.467
> 
> 标签：java, joptionpane

我想将人/公司添加到一种车辆。关键是在个人或公司之间做出选择，然后继续输入有关他们的详细信息。然后继续选择它是哪种类型的车辆，然后选择更多细节。我不知道我必须做什么才能让程序正常运行，我希望有人能帮助我。

```
private void addVehicle() {
    System.out.println("Add Vehicle");
    String[] options = {"Private person", "Firm"};
    String[] vehicle = {"Car", "Truck", "MC"};
    String[] personDetails = {"Firstname: ","Lastname: ","Date of Birth: ",
                              "Address: ","Phone Number: "};

    int chooseOwnerType = JOptionPane.showOptionDialog(this, "Private person/firm",
        "Choose an option", JOptionPane.YES_NO_OPTION, JOptionPane.QUESTION_MESSAGE, null, options, "");
    int chooseVehicleType = JOptionPane.showOptionDialog(this, "What kind of vehicle is it?",
        "Choose an option", JOptionPane.YES_NO_OPTION, JOptionPane.QUESTION_MESSAGE, null, vehicle, "");
    int numPairs = personDetails.length; 

    if(chooseOwnerType == 0) {
        JPanel p = new JPanel(new SpringLayout());
        for (int i = 0; i < numPairs; i++) {
            JLabel l = new JLabel(personDetails[i], JLabel.TRAILING);
            p.add(l);
            JTextField textField = new JTextField(10);
            l.setLabelFor(textField);
            p.add(textField);
        }
    }

    if(chooseOwnerType == 1) {
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T16:06:32.373

对于特定示例，您需要使用一些东西。首先，我建议您阅读如何使用 SpringLayout，因为您需要指定“Springs”才能正确显示文本框（请参阅：[http ://docs.oracle.com/javase/tutorial/uiswing/layout /spring.html](http://docs.oracle.com/javase/tutorial/uiswing/layout/spring.html) )

“显然，我们遇到了一些问题。不仅框架太小，而且即使调整大小，组件也都位于 (0,0)。发生这种情况是因为我们没有设置任何弹簧来指定组件的位置和容器的宽度。一个小小的安慰是，至少组件具有它们的首选尺寸——我们从 SpringLayout 为每个组件创建的默认弹簧中免费获得。

就个人而言，我会使用两列的网格布局。因此，根据您最初的帖子，我进行了更改并提出了以下代码。我强烈建议您阅读一些 swing 和 java 教程。

```
import java.awt.GridLayout;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JOptionPane;
import javax.swing.JPanel;
import javax.swing.JTextField;
import javax.swing.SpringLayout;

public class Test1 {

    public static void main(String args[]) {
        new Test1().addVehicle();
    }

    private void addVehicle() {
        System.out.println("Add Vehicle");
        String[] options = { "Private person", "Firm" };
        String[] vehicle = { "Car", "Truck", "MC" };
        String[] personDetails = { "Firstname: ", "Lastname: ",
                "Date of Birth: ", "Address: ", "Phone Number: " };

        int chooseOwnerType = JOptionPane.showOptionDialog(null,
                "Private person/firm", "Choose an option",
                JOptionPane.YES_NO_OPTION, JOptionPane.QUESTION_MESSAGE, null,
                options, "");
        int chooseVehicleType = JOptionPane.showOptionDialog(null,
                "What kind of vehicle is it?", "Choose and option",
                JOptionPane.YES_NO_OPTION, JOptionPane.QUESTION_MESSAGE, null,
                vehicle, "");
        int numPairs = personDetails.length;

        System.out.println("Owner Type:" + chooseOwnerType);
        System.out.println("Vehicle Type:" + chooseVehicleType);
        JPanel p = null;

        GridLayout gridLayout = new GridLayout(0,2);

            //Private Person
        if (chooseOwnerType == 0) {
            p = new JPanel(gridLayout);
            for (int i = 0; i < numPairs; i++) {
                JLabel l = new JLabel(personDetails[i], JLabel.TRAILING);
                p.add(l);
                JTextField textField = new JTextField(10);
                l.setLabelFor(textField);
                p.add(textField);
            }
        }

        if (chooseOwnerType == 1) {
        }

        if (p != null) {
            JFrame window = new JFrame("GUI Test");
            window.setContentPane(p);
            window.setSize(250, 100);
            window.setLocation(100, 100);
            window.setVisible(true);
            window.pack();
        }

    }

} 
```

当用户为所有者选择第一个按钮时，在自定义生成的 JFrame 下方。 ![在此处输入图像描述](https://i.stack.imgur.com/AoHxN.png)

# java - 我正在使用 MVC 和三层架构设计一个 Web 应用程序。我遇到了三层架构的设计问题

> ID：15864059
> 
> 赞同：0
> 
> 时间：2013-04-07T15:23:51.610
> 
> 标签：java, design-patterns, web-applications

目前在 DAO 层中，我正在为每种类型的数据库查询创建方法，例如 addDevice、deleteDevice、searchDevice、ifAlreadyRegistered .....等等，这使我的 DAO 层对象非常沉重。

是不是没有办法在DAO里面有通用的insert方法，delete方法，update方法，这样DAO层就不会那么重了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T15:29:06.937

您是否使用像[Hibernate](http://www.hibernate.org/)这样的 ORM来与数据库交互？如果没有，您可能想尝试一下 ORM。它可以使使用数据库变得更加容易，因为您使用“本机”编程语言（如您的案例中的 Java）而不是 SQL 来表达您的逻辑，并且 ORM 会为您计算出 SQL。例如，在 Hibernate 中，对象更新看起来像这样（来自[这篇文章](http://www.dzone.com/tutorials/java/hibernate/hibernate-example/hibernate-tools-1.html)）：

```
transaction = session.beginTransaction();
Course course = (Course) session.get(Course.class, courseId);
course.setCourseName(courseName);
transaction.commit(); 
```

...而不是原始 SQL。在使用 ORM 有意义的情况下（并非所有情况），它可以使您的代码更简洁明了。

概括地说，ORM*确实*有意义的程序的一个很好的例子是类似于 CRM，您只是在其中推动对象并做简单的报告；一个 ORM 可能*没有*意义的程序的一个很好的例子是像一个分析工具，你将使用高度定制和精心优化的 SQL 查询，在这种情况下，你可能会花更多的时间来处理 ORM，而不是实际使用它.

# visual-studio-2010 - VS2010调试时无法加载msdia100.dll

> ID：15864062
> 
> 赞同：1
> 
> 时间：2013-04-07T15:24:03.493
> 
> 标签：visual-studio-2010

当我尝试在 VS2010 中调试程序时，我收到以下消息：

![msdia100.dll 无法加载](https://i.stack.imgur.com/AmIuw.png)

我试图：

*   重新启动计算机
*   将所有文件移动到新的位置
*   调试不同的程序
*   在另一台计算机上调试此程序

前两个无关紧要，丢失的两个起作用了。
我的电脑出了什么问题，我该如何解决？

我使用的是 VS2010 pro，在 win7 上运行。
我将我尝试调试的项目上传到[谷歌驱动器](https://docs.google.com/file/d/0B3DAJEXg_yQhczRqWnNVUEpETGs/edit?usp=sharing)，如果有人想看的话。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-07T16:00:13.917

我今天开始收到此错误。我检查了多个应用程序，但都失败了。Visual Studio 本身正在崩溃。该应用程序在 2 天前工作。我必须从我的笔记本电脑复制 msdia100.dll 并运行 regsvr32，如上所述。当我比较这些文件时，它们具有相同的时间戳和相同的大小，但内容完全不同。不知道变化是如何发生的。更换 DLL 后，一切似乎都在工作。

# database - 谷歌应用引擎：在注册期间检查用户是否存在

> ID：15864063
> 
> 赞同：0
> 
> 时间：2013-04-07T15:24:05.580
> 
> 标签：database, google-app-engine

我有一个小注册页面，我正在尝试开始工作。基本上你提供你的用户名、密码和电子邮件，然后如果你输入的用户名不存在，那么它会将你重定向到一个欢迎页面，上面写着“欢迎（这里的用户名）！”。如果用户确实存在，那么它会重新呈现注册页面。问题是，即使用户不存在，它也会不断重新呈现注册页面。我没有错误。检查用户是否存在的函数“getByName”不断返回true。任何人都可以看到这个问题吗？

这是调用“getByName”函数的代码。

```
 if(username and password and verify and email):
        if UserInfo.getByName(username) == True:
            self.renderSignup()
        else:
            UserInfo.register(username, password, email)
            cookieVal = str(encrypt.makeCookieHash(username))
            self.response.headers.add_header("Set-Cookie", "username=%s; Path=/" % (cookieVal))
            self.redirect("/welcome")
    else:
        self.renderSignup(username, email, usernameError, passwordError, verifyError, emailError) 
```

这是包含“getByName”函数以及其他函数的“UserInfo”数据模型。

```
class UserInfo(db.Model):
    passwordHash = db.StringProperty(required = True)
    email = db.StringProperty(required = True)
    username = db.StringProperty(required = True)

@classmethod 
def register(cls, name, password, email):
    encrypt = Encrypt()
    pwHash = encrypt.hashUserInfo(name, password)
    UserInfo(passwordHash = pwHash, email = email, username = name).put()

@classmethod
def getByName(cls,name):
    usersWithName = UserInfo.gql("where username = :1", name)
    if usersWithName != None:
        return True
    return False 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T15:35:34.363

线条

```
usersWithName = UserInfo.gql("where username = :1", name)
if usersWithName != None: 
```

你做比较的地方就是你出错的地方。`userWithName`是一个查询对象，您的比较总是正确的。您需要使用 get、fetch 等执行查询。然后查看结果集是否有内容。

你应该做类似的事情

```
usersWithName = UserInfo.gql("where username = :1", name).get()
if usersWithName != None: 
```

或者您可以执行 fetch(10)，并检查非空列表。当然，如果您发现超过 1 个项目匹配，那么这将表明您的系统中存在更广泛的错误。

# opengl - LWJGL - 简单的照明

> ID：15864066
> 
> 赞同：0
> 
> 时间：2013-04-07T15:24:14.800
> 
> 标签：opengl, lwjgl, lighting

我想编写一个小我的世界克隆。现在我尝试插入一些简单的照明，但我的结果非常糟糕。我阅读了很多关于它的内容，并尝试了不同的解决方案，但没有任何结果。

这就是我得到的。

初始化：

```
 GL11.glViewport(0, 0, Config.GAME_WIDTH, Config.GAME_HEIGHT);
    GL11.glMatrixMode(GL11.GL_PROJECTION); // Select The Projection Matrix
    GL11.glLoadIdentity(); // Reset The Projection Matrix

    GL11.glMatrixMode(GL11.GL_MODELVIEW); // Select The Modelview Matrix
    GL11.glLoadIdentity(); // Reset The Modelview Matrix

    GL11.glEnable(GL11.GL_DEPTH_TEST);
    GL11.glEnable(GL11.GL_CULL_FACE);
    GL11.glFrontFace(GL11.GL_CCW);

    GL11.glLightModeli(GL11.GL_LIGHT_MODEL_LOCAL_VIEWER, GL11.GL_TRUE);
    GL11.glEnable(GL11.GL_LIGHTING);
    GL11.glEnable(GL11.GL_LIGHT0);

    FloatBuffer qaAmbientLight  = floatBuffer(0.0f, 0.0f, 0.0f, 1.0f);
    FloatBuffer qaDiffuseLight  = floatBuffer(1.0f, 1.0f, 1.0f, 1.0f);
    FloatBuffer qaSpecularLight = floatBuffer(1.0f, 1.0f, 1.0f, 1.0f);

    GL11.glLight(GL11.GL_LIGHT0, GL11.GL_AMBIENT, qaAmbientLight);
    GL11.glLight(GL11.GL_LIGHT0, GL11.GL_DIFFUSE, qaDiffuseLight);
    GL11.glLight(GL11.GL_LIGHT0, GL11.GL_SPECULAR, qaSpecularLight);

    FloatBuffer qaLightPosition = floatBuffer(lightPosition.x, lightPosition.y, lightPosition.z, 1.0f);
    GL11.glLight(GL11.GL_LIGHT0, GL11.GL_POSITION, qaLightPosition); 
```

所以现在在每次渲染之前我都试过这个：

```
 GL11.glClear(GL11.GL_COLOR_BUFFER_BIT | GL11.GL_DEPTH_BUFFER_BIT | GL11.GL_STENCIL_BUFFER_BIT);
    GL11.glEnable(GL11.GL_DEPTH_TEST);
    GL11.glClearColor(0.0f, 100.0f, 100.0f, 1.0f);
    GL11.glShadeModel(GL11.GL_FLAT);
    GL11.glLoadIdentity();
    FloatBuffer qaLightPosition = floatBuffer(lightPosition.x, lightPosition.y, lightPosition.z, 1.0f);
    GL11.glLight(GL11.GL_LIGHT0, GL11.GL_POSITION, qaLightPosition);

    FloatBuffer ambientMaterial = floatBuffer(0.2f, 0.2f, 0.2f, 1.0f);
    FloatBuffer diffuseMaterial = floatBuffer(0.8f, 0.8f, 0.8f, 1.0f);
    FloatBuffer specularMaterial = floatBuffer(0.0f, 0.0f, 0.0f, 1.0f);

    GL11.glMaterial(GL11.GL_FRONT, GL11.GL_AMBIENT, ambientMaterial);
    GL11.glMaterial(GL11.GL_FRONT, GL11.GL_DIFFUSE, diffuseMaterial);
    GL11.glMaterial(GL11.GL_FRONT, GL11.GL_SPECULAR, specularMaterial);
    GL11.glMaterialf(GL11.GL_FRONT, GL11.GL_SHININESS, 50.0f); 
```

当然，这不是很多代码，但这都是关于照明的。我做错了吗？我读到 OpenGL 在光照和阴影方面不如 DirectX。

这就是它的样子：

[http://img199.imageshack.us/img199/7014/testrender.png](http://img199.imageshack.us/img199/7014/testrender.png)

有人可以给我一些建议让它看起来更好吗？

我发现了一篇带有很棒的街区景观的帖子。 [http://i.imgur.com/zIocp.jpg](http://i.imgur.com/zIocp.jpg) 这就是它的样子:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-07T16:42:53.887

> 有人可以给我一些建议让它看起来更好吗？

如果您使用可编程管道，OpenGL 和 DirectX 都与光照和阴影无关。法线只是另一个顶点属性，可用于光照计算。固定功能已过时且已弃用，因此如果您不被迫使用它，则不推荐使用它。

改用着色器其实并没有那么难，而且你不会再被固定的管线所限制；然后，您可以完全控制光照的计算方式，您可以轻松输出更多调试信息（例如根据其法线着色表面）。

> 这就是它的样子:)

您发布的屏幕也有可见的[环境光遮蔽](http://en.wikipedia.org/wiki/Ambient_occlusion)。在没有着色器的情况下实现这种效果将非常困难，而且根本不值得付出努力。

我碰巧自己也在做一个类似的项目；如果它不是开源和公开可用的，我不会提及它。这是示例结果：

![Minicraft Screenie](https://i.stack.imgur.com/Gs3uk.jpg)

[您可以在此处](https://github.com/bananu7/MiniCraft/blob/master/Data/shaders/main_cubes.vert)找到光照着色器代码。

我将发布一段摘录以防止链接腐烂：

```
float CalcDirectionalLightFactor(vec3 lightDirection, vec3 normal) {
    float DiffuseFactor = dot(normalize(normal), -lightDirection);

    if (DiffuseFactor > 0) {
        return DiffuseFactor;
    }
    else {
        return 0.0;
    }
}

vec3 DiffuseColor = Light0.Color * Light0.DiffuseIntensity * CalcDirectionalLightFactor(Light0.Direction, normal); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T17:07:24.237

Bartek 的回答很好。您将希望沿着编写自己的着色器的道路前进，了解 OpenGL 为阴影和照明提供了什么，而不是依赖于旧的、已弃用的照明模型。glEnable(LIGHTING_AND_SHADOWING) 要复杂得多。

但是，如果您只是想使用您的代码来查看颜色从二进制黑/白的变化，一个潜在的想法是关闭 qaSpecularLight（它会创建“有光泽的”全白高光，但不能帮助您获得“ matte" 外观）并调整 glShadeModel 设置以实现平滑着色。

这应该会有所帮助，但不会让您一路实现目标。按照 Bartek 的建议路径（或谷歌搜索类似的想法）。

# ruby-on-rails - Rails 3中的字符串连接

> ID：15864068
> 
> 赞同：7
> 
> 时间：2013-04-07T15:24:21.597
> 
> 标签：ruby-on-rails, ruby, string, concatenation

我想知道为什么会这样：如果加号和下一个字符串之间有空格，Ruby 会连接两个字符串。但是如果没有空格，它会应用一些一元运算符吗？

```
params['controller'].to_s + '/'
# => "posts/"

params['controller'].to_s +'/'
# => NoMethodError: undefined method `+@' for "/":String 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-07T15:30:10.067

解析器将其解释`+'/'`为`to_s`方法调用的第一个参数。它将这两个语句视为等效：

```
> params['controller'].to_s +'/'
# NoMethodError: undefined method `+@' for "/":String

> params['controller'].to_s(+'/')
# NoMethodError: undefined method `+@' for "/":String 
```

如果您在方法调用的末尾明确包含括号，`to_s`问题就会消失：

```
> params['controller'].to_s() +'/'
=> "posts/" 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-07T15:29:40.897

如果要连接一个字符串，最安全的方法是写`"#{params[:controller].to_s} /"`ruby的字符串转义在很多情况下更安全更好

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-07T15:34:41.620

仔细看错误：

```
p "hi".to_s +'/'
p "hi".to_s -'2'

#=> in `<main>': undefined method `+@' for "/":String (NoMethodError) 
```

这是因为`unary operator` `+`, `-`etc 仅定义`Numeric`类对象。看看下面的代码就清楚了：

```
p "hi".to_s +2
#=>in `to_s': wrong number of arguments (1 for 0) (ArgumentError) 
```

现在上面的错误是完全正确的`to_s`。As`to_s`调用时不带任何参数。

正确的版本是：

```
p "hi".to_s + '2' #=> "hi2" 
```

# java - 一种布局在另一种之上？

> ID：15864069
> 
> 赞同：0
> 
> 时间：2013-04-07T15:24:22.773
> 
> 标签：java, android, xml

我需要一个大图像来获取所有宽度和大约 80% 的高度，并且我需要一堆小图像而不是那个大图像。两者都需要从左上角开始。大图像将不可见，因为小图像当然会覆盖它。这是小图像的外观，没关系：

![在此处输入图像描述](https://i.stack.imgur.com/BOdJi.jpg)

在它们下面，我需要一张大图。我尝试了两种线性布局，但没有奏效。这 36 个小图像被放置在 6 个水平线性布局中。这是我的xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    android:background="@drawable/background" >

   <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal" >

        <ImageButton
            android:id="@+id/ib1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@android:drawable/btn_star" />

        <ImageButton
            android:id="@+id/ib2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@android:drawable/btn_star" />

        <ImageButton
            android:id="@+id/ib3"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@android:drawable/btn_star" />

        <ImageButton
            android:id="@+id/ib4"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@android:drawable/btn_star" />

        <ImageButton
            android:id="@+id/ib5"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@android:drawable/btn_star" />

        <ImageButton
            android:id="@+id/ib6"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@android:drawable/btn_star" />

    </LinearLayout>
    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal" >

        <ImageButton
            android:id="@+id/ib7"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@android:drawable/btn_star" />

        <ImageButton
            android:id="@+id/ib8"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@android:drawable/btn_star" />

        <ImageButton
            android:id="@+id/ib9"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@android:drawable/btn_star" />

        <ImageButton
            android:id="@+id/ib10"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@android:drawable/btn_star" />

        <ImageButton
            android:id="@+id/ib11"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@android:drawable/btn_star" />

        <ImageButton
            android:id="@+id/ib12"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@android:drawable/btn_star" />

    </LinearLayout>
    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal" >

        <ImageButton
            android:id="@+id/ib13"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@android:drawable/btn_star" />

        <ImageButton
            android:id="@+id/ib14"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@android:drawable/btn_star" />

        <ImageButton
            android:id="@+id/ib15"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@android:drawable/btn_star" />

        <ImageButton
            android:id="@+id/ib16"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@android:drawable/btn_star" />

        <ImageButton
            android:id="@+id/ib17"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@android:drawable/btn_star" />

        <ImageButton
            android:id="@+id/ib18"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@android:drawable/btn_star" />

    </LinearLayout>
    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal" >

        <ImageButton
            android:id="@+id/ib19"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@android:drawable/btn_star" />

        <ImageButton
            android:id="@+id/ib20"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@android:drawable/btn_star" />

        <ImageButton
            android:id="@+id/ib21"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@android:drawable/btn_star" />

        <ImageButton
            android:id="@+id/ib22"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@android:drawable/btn_star" />

        <ImageButton
            android:id="@+id/ib23"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@android:drawable/btn_star" />

        <ImageButton
            android:id="@+id/ib24"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@android:drawable/btn_star" />

    </LinearLayout>
    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal" >

        <ImageButton
            android:id="@+id/ib25"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@android:drawable/btn_star" />

        <ImageButton
            android:id="@+id/ib26"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@android:drawable/btn_star" />

        <ImageButton
            android:id="@+id/ib27"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@android:drawable/btn_star" />

        <ImageButton
            android:id="@+id/ib28"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@android:drawable/btn_star" />

        <ImageButton
            android:id="@+id/ib29"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@android:drawable/btn_star" />

        <ImageButton
            android:id="@+id/ib30"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@android:drawable/btn_star" />

    </LinearLayout>
    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal" >

        <ImageButton
            android:id="@+id/ib31"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@android:drawable/btn_star" />

        <ImageButton
            android:id="@+id/ib32"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@android:drawable/btn_star" />

        <ImageButton
            android:id="@+id/ib33"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@android:drawable/btn_star" />

        <ImageButton
            android:id="@+id/ib34"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@android:drawable/btn_star" />

        <ImageButton
            android:id="@+id/ib35"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@android:drawable/btn_star" />

        <ImageButton
            android:id="@+id/ib36"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@android:drawable/btn_star" />

    </LinearLayout>
    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal" >

    <Button
        android:id="@+id/bIzlazCigle"
        android:layout_width="60dp"
        android:layout_height="40dp"
        android:layout_marginLeft="10dp"
        android:background="@drawable/buttons_final"
        android:text="Izlaz"
        android:textSize="19sp"
        android:padding="0dp"
        android:textColor="#ffffff" />

    <Button
        android:id="@+id/bKonacnoCigle"
        android:layout_width="180dp"
        android:layout_height="40dp"
        android:layout_marginLeft="15dp"
        android:background="@drawable/buttons_final"
        android:text="Konačno rešenje!"
        android:padding="0dp"
        android:textSize="19sp"
        android:textColor="#ffffff" />

    </LinearLayout>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T15:35:24.543

尝试使用`RelativeLayout`.

```
<RelativeLayout>
    <ImageView (or whatever, for background image) />

    <LinearLayout>  <-- this here is the XML you posted
        <LinearLayout>
            <ImageButton/>
            ...
        ...
     </LinearLayout>

</RelativeLayout> 
```

如果背景（作为 a `ImageView`）和 a 的`LinearLayout`深度相同，并且都是 a 的子级`RelativeLayout`，则它们将相互堆叠。

您可以替换`RelativeLayout`为`FrameLayout`，但不要替换，因为这`View`有更多的构造开销，而且您没有绘制 a`Fragment`所以您不需要它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T16:04:41.460

OK, here's the solution, if anyone needs it:

```
<?xml version="1.0" encoding="utf-8"?>
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    android:background="@drawable/background" >

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent" >
        <ImageView
            android:id="@+id/ivSlika"
            android:layout_width="fill_parent"
            android:layout_height="398dp"
            android:background="@drawable/tesla" />
    </LinearLayout>

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical" >

        <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal" >

        <ImageButton
            android:id="@+id/ib1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@android:drawable/btn_star" />

        <ImageButton
            android:id="@+id/ib2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@android:drawable/btn_star" />

        <ImageButton
            android:id="@+id/ib3"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@android:drawable/btn_star" />

        <ImageButton
            android:id="@+id/ib4"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@android:drawable/btn_star" />

        <ImageButton
            android:id="@+id/ib5"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@android:drawable/btn_star" />

        <ImageButton
            android:id="@+id/ib6"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@android:drawable/btn_star" />
    </LinearLayout>

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal" >

        <ImageButton
            android:id="@+id/ib7"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@android:drawable/btn_star" />

        <ImageButton
            android:id="@+id/ib8"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@android:drawable/btn_star" />

        <ImageButton
            android:id="@+id/ib9"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@android:drawable/btn_star" />

        <ImageButton
            android:id="@+id/ib10"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@android:drawable/btn_star" />

        <ImageButton
            android:id="@+id/ib11"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@android:drawable/btn_star" />

        <ImageButton
            android:id="@+id/ib12"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@android:drawable/btn_star" />
    </LinearLayout>

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal" >

        <ImageButton
            android:id="@+id/ib13"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@android:drawable/btn_star" />

        <ImageButton
            android:id="@+id/ib14"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@android:drawable/btn_star" />

        <ImageButton
            android:id="@+id/ib15"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@android:drawable/btn_star" />

        <ImageButton
            android:id="@+id/ib16"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@android:drawable/btn_star" />

        <ImageButton
            android:id="@+id/ib17"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@android:drawable/btn_star" />

        <ImageButton
            android:id="@+id/ib18"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@android:drawable/btn_star" />
    </LinearLayout>

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal" >

        <ImageButton
            android:id="@+id/ib19"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@android:drawable/btn_star" />

        <ImageButton
            android:id="@+id/ib20"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@android:drawable/btn_star" />

        <ImageButton
            android:id="@+id/ib21"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@android:drawable/btn_star" />

        <ImageButton
            android:id="@+id/ib22"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@android:drawable/btn_star" />

        <ImageButton
            android:id="@+id/ib23"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@android:drawable/btn_star" />

        <ImageButton
            android:id="@+id/ib24"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@android:drawable/btn_star" />
    </LinearLayout>

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal" >

        <ImageButton
            android:id="@+id/ib25"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@android:drawable/btn_star" />

        <ImageButton
            android:id="@+id/ib26"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@android:drawable/btn_star" />

        <ImageButton
            android:id="@+id/ib27"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@android:drawable/btn_star" />

        <ImageButton
            android:id="@+id/ib28"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@android:drawable/btn_star" />

        <ImageButton
            android:id="@+id/ib29"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@android:drawable/btn_star" />

        <ImageButton
            android:id="@+id/ib30"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@android:drawable/btn_star" />
    </LinearLayout>

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal" >

        <ImageButton
            android:id="@+id/ib31"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@android:drawable/btn_star" />

        <ImageButton
            android:id="@+id/ib32"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@android:drawable/btn_star" />

        <ImageButton
            android:id="@+id/ib33"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@android:drawable/btn_star" />

        <ImageButton
            android:id="@+id/ib34"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@android:drawable/btn_star" />

        <ImageButton
            android:id="@+id/ib35"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@android:drawable/btn_star" />

        <ImageButton
            android:id="@+id/ib36"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@android:drawable/btn_star" />
    </LinearLayout>

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal" >

        <Button
            android:id="@+id/bIzlazCigle"
            android:layout_width="60dp"
            android:layout_height="40dp"
            android:layout_marginLeft="10dp"
            android:background="@drawable/buttons_final"
            android:padding="0dp"
            android:text="Izlaz"
            android:textColor="#ffffff"
            android:textSize="19sp" />

        <Button
            android:id="@+id/bKonacnoCigle"
            android:layout_width="180dp"
            android:layout_height="40dp"
            android:layout_marginLeft="15dp"
            android:background="@drawable/buttons_final"
            android:padding="0dp"
            android:text="Konačno rešenje!"
            android:textColor="#ffffff"
            android:textSize="19sp" />
    </LinearLayout>

    </LinearLayout>

</FrameLayout> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T15:33:42.253

试试[FrameLayout](http://developer.android.com/reference/android/widget/FrameLayout.html)，用它替换外部的 LinearLayout 。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-07T15:33:42.953

您应该尝试使用框架布局-> [http://developer.android.com/reference/android/widget/FrameLayout.html](http://developer.android.com/reference/android/widget/FrameLayout.html)

创建所需视图的方法是创建一个包含大图像的布局（例如线性布局），然后将其添加到框架布局中，然后创建另一个包含所有小图像的布局（例如线性布局），然后再次将其添加到框架布局，因此带有小图像的布局将放置在带有大图像的布局的前面

我希望这可以回答您的问题，但是如果您对我的回答有其他问题，请随时在评论中提问：)

# matlab - 如何在某些位置在 Matlab 中绘制单个点？

> ID：15864073
> 
> 赞同：0
> 
> 时间：2013-04-07T15:24:46.200
> 
> 标签：matlab, plot, appearance

我有以下图表：

![在此处输入图像描述](https://i.stack.imgur.com/0zrX1.png)

每条线根据 3 个值变化：`1 2 3`.. 但是，绘制小于 5000 的任何内容都不会显示在图表上（轴最小尺寸为 5000），因此我无法直接绘制它们。我怎样才能证明这些线根据这三个值中的任何一个而变化？有什么方法可以实现吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T16:53:39.340

plotyy函数提供[了](http://www.mathworks.co.uk/help/matlab/ref/plotyy.html)两个 y 轴，使您能够在一个图表上显示两组数据，即使数据的相对值不同。

要获得更多控制，您可以叠加两个轴对象。请参阅[使用多个 X 轴和 Y 轴](http://www.mathworks.co.uk/help/matlab/creating_plots/using-multiple-x-and-y-axes.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T15:57:04.710

您可以为无法正常显示的数据添加偏移值，以便观察线之间的关系

# css - 如何使表格等距并换行

> ID：15864074
> 
> 赞同：1
> 
> 时间：2013-04-07T15:24:46.763
> 
> 标签：css, twitter-bootstrap, pug

我正在使用 twitter bootstrap，但我认为它与解决方案无关，所以这里是代码：

```
div.span12
   table.table.table-hover
      thead
        tr
            th Device Name
            th Device ID
            th Device Description
      tbody
        each dev in devices
            tr
                td #{dev.dname}
                td #{dev.did}
                td #{dev.ddesc} 
```

如果其中一个属性变得太大，表格将移到一侧，为大项目留出空间。如何保持原来的均匀间距并允许在表格的行上自动换行？

```
 <div class="span12">
   <table class="table table-hover">
       <thead>
         <tr>
            <th>Device Name</th>
             <th>Device ID</th>
             <th>Device Description</th>
         </tr></thead>
         <tbody>
            <tr>
                <td>nn</td>
                <td>ii</td>
                <td>dd</td>
            </tr>
        </tbody></table></div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T18:11:52.827

只需覆盖属性`td`

```
td {
   width: 33.33%;
} 
```

**[演示](http://jsfiddle.net/TTjrg/)**

# android - 如何将 (location.getLatitude()) 的值赋给变量“x”，以便我可以用它进行算术运算

> ID：15864076
> 
> 赞同：0
> 
> 时间：2013-04-07T15:25:19.247
> 
> 标签：android, latitude-longitude

我可以显示坐标，`(TextView)findViewById(R.id.Display)).setText(String.valueOf(location.getLatitude()));` 但我想知道如何将 (location.getLatitude()) 的值赋给变量“x”

```
double x;

x = ???????? valueOf(location.getLatitude()) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T16:41:29.633

```
getLatitude() already return double type. So you do not have to convert them. 
```

尝试这个

```
double longitude = location.getLongitude();
double latitude = location.getLatitude(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-22T08:28:40.400

> getLatitude() 和 getLongitude() 以度为单位返回纬度和经度。

首先，您检查 location.getLatitude() 或 location.getLongtitude() 是否为空。

例子：`if(location!= null){ double latitude = location.getLatitude(); double longitude = location.getLongitude(); }`

# javascript - 如何使输入字段不区分大小写？

> ID：15864077
> 
> 赞同：-2
> 
> 时间：2013-04-07T15:25:19.810
> 
> 标签：javascript, css, html

我已经创建了一个数组，我要找出记录，当我要查找大写单词的记录时，它是可以的，但是当我要查找带有小写字母的记录时，它没有找到记录。folloying 是我制作的脚本。

```
if (document.getElementById('drop_down_list_1').value == "Genetic") {
    if (document.getElementById('search_input').value == "") {
        alert("Please Enter a charactor / word..");

    } else {
        var con = document.getElementById('first_div');
        var con2 = document.getElementById('first_div2');
        var char = document.getElementById('search_input').value;

        var str = '';
        var j = 0;
        var ad = ['GLARIFIDE Deadlines 2012 - 2013 Nov', 'REPRODUCTIVE VACCINES — REPRODUCTIVE CLAIMS', 'M', 'M', 'R'];
        var len = ad.length;
        //char.toLowerCase().indexOf(ad) != -1;
        var break_line = '<br>';
        for (j = 0; j < len; j++) {
            var str = ad[j];
            var n = str.indexOf(char);
            if (n == 0)
                con.innerHTML += '<table id="results" style="margin-top: -3px;"><tr><td>' + str + '</td><td id="td1"><a href="javascript:presenter.command(\'viewPdf\',{\'path\': \'/images/pdf/Dairy/' + j + '.pdf\'});"><img src="images/view.png" style="margin-left:250px;"></a><img src="images/email.png"></td></tr></table>' + break_line;
            break_line = '<br>';

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T15:50:25.153

您不能使输入字段不区分大小写。但是，在 javascript 中，您可以以不区分大小写的方式测试字符串是否相等。

```
'HelloWorld'.toLowerCase() == 'HELLOworld'.toLowerCase() // TRUE 
```

# python - Python 等效于 MATLAB 的“ismember”函数

> ID：15864082
> 
> 赞同：20
> 
> 时间：2013-04-07T15:25:54.350
> 
> 标签：python, matlab, optimization, numpy

在多次尝试优化代码之后，似乎最后一个资源是尝试使用多个内核运行下面的代码。我不确切知道如何转换/重新构造我的代码，以便它可以使用多个内核运行得更快。如果我能得到指导以实现最终目标，我将不胜感激。最终目标是能够尽可能快地为数组 A 和 B 运行此代码，其中每个数组包含大约 700,000 个元素。这是使用小数组的代码。700k 元素数组被注释掉。

```
import numpy as np

def ismember(a,b):
    for i in a:
        index = np.where(b==i)[0]
        if index.size == 0:
            yield 0
        else:
            yield index

def f(A, gen_obj):
    my_array = np.arange(len(A))
    for i in my_array:
        my_array[i] = gen_obj.next()
    return my_array

#A = np.arange(700000)
#B = np.arange(700000)
A = np.array([3,4,4,3,6])
B = np.array([2,5,2,6,3])

gen_obj = ismember(A,B)

f(A, gen_obj)

print 'done'
# if we print f(A, gen_obj) the output will be: [4 0 0 4 3]
# notice that the output array needs to be kept the same size as array A. 
```

我想要做的是模仿一个名为[ismember](http://www.mathworks.de/de/help/matlab/ref/ismember.html) [2] 的 MATLAB 函数（格式为： 的那个`[Lia,Locb] = ismember(A,B)`。我只是想得到这个`Locb`部分。

> 来自 Matlab：Locb，对于 A 中属于 B 的每个值，包含 B 中的最低索引。输出数组 Locb 包含 0，只要 A 不是 B 的成员

主要问题之一是我需要能够尽可能高效地执行此操作。为了测试，我有两个 700k 元素的数组。创建一个生成器并检查生成器的值似乎并不能快速完成工作。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-07T15:59:41.203

在担心多核之前，我会通过使用字典来消除您的 ismember 函数中的线性扫描：

```
def ismember(a, b):
    bind = {}
    for i, elt in enumerate(b):
        if elt not in bind:
            bind[elt] = i
    return [bind.get(itm, None) for itm in a]  # None can be replaced by any other "not in b" value 
```

您的原始实现需要针对 A 中的每个元素对 B 中的元素进行全面扫描，使其成为`O(len(A)*len(B))`. 上面的代码需要对 B 进行一次完整扫描才能生成 dict Bset。通过使用 dict，您可以有效地为 A 的每个元素查找 B 中的每个元素，从而使操作`O(len(A)+len(B))`. 如果这仍然太慢，那么请担心使上述功能在多个内核上运行。

编辑：我还稍微修改了您的索引。Matlab 使用 0，因为它的所有数组都从索引 1 开始。Python/numpy 从 0 开始数组，所以如果你的数据集看起来像这样

```
A = [2378, 2378, 2378, 2378]
B = [2378, 2379] 
```

如果没有元素返回 0，那么您的结果将排除 A 的所有元素。上述例程返回`None`无索引而不是 0。返回 -1 是一个选项，但 Python 会将其解释为数组中的最后一个元素。 `None`如果将其用作数组的索引，则会引发异常。如果您想要不同的行为，请将`Bind.get(item,None)`表达式中的第二个参数更改为您想要返回的值。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-04-07T19:30:59.050

sfstewman 的出色回答很可能为您解决了这个问题。

我只想补充一下如何在 numpy 中实现相同的功能。

我利用了 numpy[独特](http://docs.scipy.org/doc/numpy/reference/generated/numpy.unique.html#numpy.unique)的 an [in1d](http://docs.scipy.org/doc/numpy/reference/generated/numpy.in1d.html#numpy.in1d)函数。

```
B_unique_sorted, B_idx = np.unique(B, return_index=True)
B_in_A_bool = np.in1d(B_unique_sorted, A, assume_unique=True) 
```

*   `B_unique_sorted``B`包含已排序的唯一值。
*   `B_idx`为这些值保留原始索引的索引`B`。
*   `B_in_A_bool`是一个布尔数组，它的大小`B_unique_sorted`存储一个值`B_unique_sorted`是否在`A`。
    **注意：**我需要*在 A 中查找（来自 B 的唯一 val），*因为我需要返回关于`B_idx`
    **注意的输出：**我假设这`A`已经是唯一的。

现在您可以使用`B_in_A_bool`来获取常见的 val

```
B_unique_sorted[B_in_A_bool] 
```

以及它们各自在原文中的索引`B`

```
B_idx[B_in_A_bool] 
```

最后，我假设这比纯 Python for 循环要快得多，尽管我没有对其进行测试。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-06-21T22:07:50.077

试试`ismember`图书馆。

```
pip install ismember 
```

简单的例子：

```
# Import library
from ismember import ismember
import numpy as np

# data
A = np.array([3,4,4,3,6])
B = np.array([2,5,2,6,3])

# Lookup
Iloc,idx = ismember(A, B)

# Iloc is boolean defining existence of d in d_unique
print(Iloc)
# [ True False False  True  True]

# indexes of d_unique that exists in d
print(idx)
# [4 4 3]

print(B[idx])
# [3 3 6]

print(A[Iloc])
# [3 3 6]

# These vectors will match
A[Iloc]==B[idx] 
```

速度检查：

```
from ismember import ismember
from datetime import datetime

t1=[]
t2=[]
# Create some random vectors
ns = np.random.randint(10,10000,1000)

for n in ns:
    a_vec = np.random.randint(0,100,n)
    b_vec = np.random.randint(0,100,n)

    # Run stack version
    start = datetime.now()
    out1=ismember_stack(a_vec, b_vec)
    end = datetime.now()
    t1.append(end - start)

    # Run ismember
    start = datetime.now()
    out2=ismember(a_vec, b_vec)
    end = datetime.now()
    t2.append(end - start)

print(np.sum(t1))
# 0:00:07.778331

print(np.sum(t2))
# 0:00:04.609801

# %%
def ismember_stack(a, b):
    bind = {}
    for i, elt in enumerate(b):
        if elt not in bind:
            bind[elt] = i
    return [bind.get(itm, None) for itm in a]  # None can be replaced by any other "not in b" value 
```

pypi的`ismember`函数几乎快 2 倍。

大向量，例如 700000 个元素：

```
from ismember import ismember
from datetime import datetime

A = np.random.randint(0,100,700000)
B = np.random.randint(0,100,700000)

# Lookup
start = datetime.now()
Iloc,idx = ismember(A, B)
end = datetime.now()

# Print time
print(end-start)
# 0:00:01.194801 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-07T15:57:50.150

尝试使用列表理解；

```
In [1]: import numpy as np

In [2]: A = np.array([3,4,4,3,6])

In [3]: B = np.array([2,5,2,6,3])

In [4]: [x for x in A if not x in B]
Out[4]: [4, 4] 
```

通常，列表推导比 for 循环快得多。

得到一个等长的列表；

```
In [19]: map(lambda x: x if x not in B else False, A)
Out[19]: [False, 4, 4, False, False] 
```

这对于小型数据集来说非常快：

```
In [20]: C = np.arange(10000)

In [21]: D = np.arange(15000, 25000)

In [22]: %timeit map(lambda x: x if x not in D else False, C)
1 loops, best of 3: 756 ms per loop 
```

对于大型数据集，您可以尝试使用 a`multiprocessing.Pool.map()`来加速操作。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-09-17T20:23:27.163

这是返回与 MATLAB 匹配的输出参数 [Lia, Locb] 的确切 MATLAB 等效项，但 Python 0 也是有效索引。因此，此函数不返回 0。它本质上返回 Locb(Locb>0)。性能也与 MATLAB 相当。

```
def ismember(a_vec, b_vec):
    """ MATLAB equivalent ismember function """

    bool_ind = np.isin(a_vec,b_vec)
    common = a[bool_ind]
    common_unique, common_inv  = np.unique(common, return_inverse=True)     # common = common_unique[common_inv]
    b_unique, b_ind = np.unique(b_vec, return_index=True)  # b_unique = b_vec[b_ind]
    common_ind = b_ind[np.isin(b_unique, common_unique, assume_unique=True)]
    return bool_ind, common_ind[common_inv] 
```

一个稍微慢一点（~5x）但不使用独特功能的替代实现在这里：

```
def ismember(a_vec, b_vec):
    ''' MATLAB equivalent ismember function. Slower than above implementation'''
    b_dict = {b_vec[i]: i for i in range(0, len(b_vec))}
    indices = [b_dict.get(x) for x in a_vec if b_dict.get(x) is not None]
    booleans = np.in1d(a_vec, b_vec)
    return booleans, np.array(indices, dtype=int) 
```

# html - 将文件视为 .HTML

> ID：15864083
> 
> 赞同：-1
> 
> 时间：2013-04-07T15:25:58.140
> 
> 标签：html, file, .htaccess

似乎有很多关于如何配置浏览器以将自定义文件扩展名视为 PHP 文件（使用 .htaccess）的文档，但是我知道 HTML 也是可能的。

我将如何配置 .htaccess 以在浏览器访问时将具有任何扩展名的文件（即“file.fi”）视为 HTML 文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T15:28:22.730

使用[`AddType`指令](http://httpd.apache.org/docs/2.2/mod/mod_mime.html#addtype)。

```
AddType text/html .fi 
```

（我建议根据“不要可爱”原则反对它，URL 上的非标准文件扩展名可能至少会混淆某些人）

# android - 如何让Android风格的windowBackground适应action bar

> ID：15864086
> 
> 赞同：2
> 
> 时间：2013-04-07T15:26:04.767
> 
> 标签：android, android-theme

我正在尝试在屏幕右上角设置带有背景图像的样式。我有这个工作

my_theme_background.xml

```
 <?xml version="1.0" encoding="utf-8"?>
 <layer-list xmlns:android="http://schemas.android.com/apk/res/android">
     <item>
         <shape android:shape="rectangle">
        <solid android:color="@color/myThemeBackgroundColor" />
         </shape>
</item>
    <item android:top="70dp">
       <bitmap android:src="@drawable/bg_my_theme"
           android:gravity="top|right" />
    </item>
 </layer-list> 
```

风格

```
 <style name="MyTheme" parent="AppBaseTheme">
      <item name="android:windowBackground">@drawable/my_theme_background</item>
 </style> 
```

我必须使用该 android:top="70dp" 将图像保留在操作栏下方。但是操作栏在旋转时会改变高度。如何在不明确设置最高值的情况下将图像保留在 xml 中的操作栏下方？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T15:32:15.403

我相信你可以通过属性检索它的高度`android.R.attr.actionBarSize`。例如 Honeycomb 及更高版本：

```
android:top="?android:attr/actionBarSize" 
```

或者，[根据 Jake Wharton](https://stackoverflow.com/a/11673753/154306)的说法，对于 ActionBarSherlock 的兼容性：

```
android:top="?attr/actionBarSize" 
```

# ember.js - 没有方法“readOnly”，也没有方法“attr”

> ID：15864090
> 
> 赞同：1
> 
> 时间：2013-04-07T15:26:20.657
> 
> 标签：ember.js, ember-data

我正在尝试跟随[Tom Dale 的 youtube 视频](http://www.youtube.com/watch?v=Ga99hMi7wfY)来构建一个简单的博客。我已经从 GH 克隆了 ember-data master 并构建了它，但是我收到了两个错误：

```
Uncaught TypeError: Object [object Object] has no method 'readOnly' 
```

那是来自 ember-data 和

```
Uncaught TypeError: Object [object Object] has no method 'attr' 
```

来自我在模型中第一次使用 DS.attr。我的代码可以在[GitHub](https://github.com/RyanHirsch/ember-showdown-blog/blob/master/app/scripts/app.js)以及下面找到

```
/* Ember and Ember-Data are shimmed in as deps */
define([], function () {
  'use strict';
  var App = Ember.Application.create();

  App.Store = DS.Store.extend({
    revision: 12,
    adapter: 'DS.FixtureAdapter'
  });

  App.Router.map(function () {
    this.resource('about');
  });

  App.Post = DS.Model.extend({
    title: DS.attr('string'),
    author: DS.attr('string'),
    intro: DS.attr('string'),
    extended: DS.attr('string'),
    publishedAt: DS.attr('date')
  });

  App.Post.FIXTURES = [{
    id: 1,
    title: "Rails is Omakase",
    author: "d2h",
    publishedAt: new Date('12-27-2012'),
    intro: "There are lots of a la carte software",
    extended: "I want this for my ORM"
  }];

  return App;
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T15:50:49.213

`.readonly()`是最新版本数据库内部使用的 Ember 方法，仅在 Ember.JS RC1 和 RC2 之间添加。如果要使用主 Ember-Data，则需要使用主 Ember。

# iphone - 由于未捕获的异常“CALayerInvalidGeometry”而终止应用程序，原因：“CALayer bounds contains NaN: [0 nan; 280 524]'

> ID：15864096
> 
> 赞同：13
> 
> 时间：2013-04-07T15:26:49.230
> 
> 标签：iphone, ios, crash, calayer

我正在开发一个图书应用程序，用户可以在其中更改 TextView 上的字体大小。

当用户更改字体大小时，应用程序会保存当前文本位置，而不是在用户更改字体大小后更改该位置。

在大多数情况下它工作正常，但有时，当用户更改字体大小时，应用程序会出现这种错误，我仍然不知道如何解决这个问题。

> 由于未捕获的异常“CALayerInvalidGeometry”而终止应用程序，原因：“CALayer bounds contains NaN: [0 nan; 280 524]' *** First throw call stack: (0x3231e3e7 0x3a019963 0x3231e307 0x33edb4d7 0x33edb30d 0x3419141f 0x3419b82f 0x342d1cf1 0x3414f80d 0xe7bf1 0xe607d 0xfad35 0x34218087 0x34218111 0x34218087 0x3421803b 0x34218015 0x342178cb 0x34217db9 0x341405f9 0x3412d8e1 0x3412d1ef 0x35e455f7 0x35e45227 0x322f33e7 0x322f338b 0x322f220f 0x3226523d 0x322650c9 0x35e4433b 0x341812b9 0xdf9f1 0xdf978) libc++abi. dylib：终止调用抛出异常

我也无法 100% 重现此问题，因为此问题偶尔会发生。

这是代码。有没有人有解决这个问题的想法？提前致谢。

```
- (UITextRange *)getCurrentTextRange:(UITextView *)textView {

    CGRect bounds               = textView.bounds;
    UITextPosition *start       = [textView characterRangeAtPoint:bounds.origin].start;
    UITextPosition *end         = [textView positionFromPosition:start offset:1];
    UITextRange *textRange      = [textView textRangeFromPosition:start toPosition:end];

    return textRange;
}

- (void)changeFontSize:(UIButton*)button {

    UITextRange *textRange  = [self getCurrentTextRange:_textView];
    int fontSize            = [[NSUserDefaults standardUserDefaults] integerForKey:@"fontSize"];

    //button.tag == 1 => decreaseFontSize
    if (button.tag == 1) {

        //set a minimum size
        if (fontSize <= [LSUniversalManager getFontSizeForMinimum]) {
            return;
        }

        fontSize--;

    //button.tag == 2 => increaseFontSize
    } else if (button.tag == 2) {        
        fontSize++;
    }

    _textView.font      = [UIFont systemFontOfSize:fontSize];
    [[NSUserDefaults standardUserDefaults] setInteger:fontSize forKey:@"fontSize"];

    //avoid shifting the scroll position after changing font size
    CGRect rect = [_textView firstRectForRange:textRange];
    [_textView setContentOffset:CGPointMake(0, rect.origin.y)];
} 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-04-07T15:41:01.760

沿着这条线的某个地方，您会得到一个无效的输出，导致`rect`具有该值`NaN`（一个特殊的浮点值，意思是“不是一个有效的浮点数”，最常见的是由零除引起）。您是否可能传递了无效或荒谬`UITextRange`的 to `-firstRectForRange`？如果`UITextPosition *start`引用文本中的最后一个字符，然后创建另一个文本位置，该位置比末尾一个字符，会发生什么情况？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-07-09T14:58:41.200

就我而言，代码执行 0.0 / 0.0 结果 -nan （无穷大）并进一步用于转换为双精度。

我添加了一个保护条件以确保值 > 0.0

# php - 需要带有类的模板文件

> ID：15864100
> 
> 赞同：0
> 
> 时间：2013-04-07T15:27:03.793
> 
> 标签：php, class, function, templates, require

嗨，我正在尝试制作自己的简单模板系统，而​​我只是在学习类，所以我试图用类和对象来做。

如果我把它放在每个文档的顶部，它就会起作用：

```
$template = new Includes('name', 'path');
$include = new Includes('name', 'path'); 
```

但感觉它不应该是必要的，而且它不是那么漂亮。

这就是我的代码现在的排列方式**：**

**索引.php：**

```
<?php
require_once 'class_include.php';
$template->loadTemplate('body'); 
```

**正文.php：**

```
 <?php require_once 'class_include.php'; ?>
    <head>

    <?php $template->loadTemplate('head'); ?>

</head>
<body>

<?php
    $template->loadTemplate('sidepanel');
    $template->loadTemplate('content');
?>
</body> 
```

**class_include.php：**

```
class Includes {

public function loadTemplate($name, $path = 'template'){
    require_once "$path/$name.php";
}
public function loadInc($name, $path = 'inc'){
    require_once '$path/$name' . '.php';
}
}
$template = new Includes('name', 'path');
$include = new Includes('name', 'path'); 
```

错误信息：

***( ! ) 致命错误：在 C:\wamp\www\project\template\body.php 中的非对象上调用成员函数 loadTemplate()***

***( ! ) 注意：未定义变量：C:\wamp\www\project\template\body.php 中的模板***

感谢您的任何帮助，您可以提供！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T15:49:18.893

认为在您的代码中，您应该使用静态方法而不是对象。
**索引.php**

```
<?php
require_once 'class_include.php';
Includes::loadTemplate('body'); 
```

**正文.php**

```
<head>
    <?php Includes::loadTemplate('head'); ?>
</head>
<body>
    <?php
        Includes::loadTemplate('sidepanel');
        Includes::loadTemplate('content');
    ?>
</body> 
```

**class_includes.php**

```
class Includes {

    public static function loadTemplate($name, $path = 'template'){
        require_once "$path/$name.php";
    }

    public static function loadInc($name, $path = 'inc'){
        require_once '$path/$name' . '.php';
    }
} 
```

# java - 绕过“不能引用定义的内部类中的非最终变量”

> ID：15864109
> 
> 赞同：1
> 
> 时间：2013-04-07T15:28:06.110
> 
> 标签：java, closures, processbuilder

我有以下代码，但是当我在新的 Thread 类之外声明 String 行时，我得到了一个异常。我来自 C# 背景，所以我现在明白 Java 不支持真正的闭包。所以我的问题是：

如何在新线程之外声明一个字符串并在新线程中使用它？

> 无法引用以不同方法定义的内部类中的非最终变量行

```
ProcessBuilder builder =
    new ProcessBuilder("/Users/Joe/Desktop/file", "-i", src);
builder.redirectErrorStream(true);
Process process = builder.start();
final InputStream is = process.getInputStream();
String line;
new Thread(new Runnable() {
    @Override public void run() {
        try {
            BufferedReader br = new BufferedReader(new InputStreamReader(is));
            while ((br.readLine()) != null) {
                line += br.readLine() + "\n";
            }
        } catch (IOException e) {
            e.printStackTrace();
        }
    }               
}).start(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T15:34:17.237

更改`line`为 a`StringBuilder`并将其声明为`final`. 然后将`run()`方法更改为追加到`StringBuilder`.

如果您`join()`在尝试读取`line`主线程之​​前是子线程，则不需要使用`StringBuffer`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T15:51:22.247

你必须：

1.  创建一个专门用于读取 Process 输出的新类（实现[Future](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Future.html)）
2.  在将其结果与[ExecutorService](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ExecutorService.html)方法一起使用之前，等待其类的实例（*作业）。*

这是一个代码示例：

```
import java.io.BufferedReader;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.util.concurrent.Callable;
import java.util.concurrent.ExecutorService;
import java.util.concurrent.Executors;
import java.util.concurrent.Future;

public class FutureJob {

   static class StreamToString implements Callable< String > {

      BufferedReader br;

      public StreamToString( InputStream in ) {
         br = new BufferedReader( new InputStreamReader( in ));
      }

      @Override public String call() throws Exception {
         StringBuilder buffer = new StringBuilder( 1024 );
         String line;
         while(( line = br.readLine()) != null ) {
            buffer.append( line );
            buffer.append( '\n' );
         }
         br.close();
         return buffer.toString();
      }
   }

   public static void main( String[] args ) throws Exception {
      ProcessBuilder   builder  = new ProcessBuilder( "cmd", "/C", "dir", "c:\\" );
      Process          process  = builder.start();
      ExecutorService  executor = Executors.newSingleThreadExecutor();
      StreamToString   toString = new StreamToString( process.getInputStream());
      Future< String > result   = executor.submit( toString );
      System.out.println( result.get());
      executor.shutdownNow();
   }
} 
```

`result.get()`如有必要，调用者的阻塞等待由 内部进行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T15:31:11.603

您应该创建另一个对象来保存和更改`String`. 将此对象设为最终对象并使用此对象方法更改字符串。

您可以尝试使用`StringBuilder`作为最终对象并使用其`append`功能来修改字符串。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-07T18:05:21.213

或者，`line`在内部类中声明为实例变量，因为无论如何您都没有在类外部使用它：

```
new Thread(new Runnable() {
    String line;
    @Override public void run() {
        try {
            BufferedReader br = new BufferedReader(new InputStreamReader(is));
            while ((br.readLine()) != null) {
                line += br.readLine() + "\n";
            }
        } catch (IOException e) {
            e.printStackTrace();
        }
    }               
}).start(); 
```

# python - Google 应用引擎实体键的正则表达式

> ID：15864116
> 
> 赞同：0
> 
> 时间：2013-04-07T15:29:16.970
> 
> 标签：python, regex, google-app-engine

我找到了这篇文章，现在我也想使用该正则表达式 [Google App Engine Key 中允许哪些字符？](https://stackoverflow.com/questions/1940128/what-characters-are-allowed-in-a-google-app-engine-key)

但是，在我的处理程序中，我写了类似的东西

```
('/xxx/[a-zA-Z0-9-_]', MyHandler) 
```

但它不起作用...当我尝试访问它说未找到的链接时...我尝试了很多变体，但似乎无法实现...帮助？！

编辑：谢谢你们的帮助……真是个愚蠢的错误：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T15:34:32.487

您的处理程序当前只允许一个字符。此外，为了安全起见，破折号应始终位于字符类的末尾，以免它指定一个范围：

```
('/xxx/[a-zA-Z0-9_-]*', MyHandler) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-07T15:34:48.100

您的正则表达式仅匹配该部分之后的*一个*字符`/xxx/`。您需要通过添加乘数来指定您想要 1**或更多：**`+`

```
('/xxx/[a-zA-Z0-9-_]+', MyHandler) 
```

现在，您的表达式匹配*至少有*1 个字符的任何内容，而不仅仅是 1，仅此而已。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-20T13:36:33.617

密钥也只能是[500](https://stackoverflow.com/a/4813780)字节长，所以我使用以下

```
pattern = re.compile('^[0-9A-Za-z._-]{1,500}$')
valid = bool(pattern.match('key-name-to-test')) 
```

老问题，但我想我会添加这个以供将来查看。

# javascript - 从 Places API 下拉菜单中移除“Powered by Google”徽标

> ID：15864126
> 
> 赞同：1
> 
> 时间：2013-04-07T15:30:11.080
> 
> 标签：javascript, css, google-maps

我想从 Google Places API 下拉菜单中删除此徽标。我想把它放在页面的其他位置，因为我认为它有损下拉菜单的美感，尤其是当我连续有多个下拉菜单时，所有下拉菜单都具有相同的徽标。

![Google 地方信息下拉菜单](https://i.stack.imgur.com/bx63i.png)

我遇到的问题是我无法弄清楚如何检查元素以查看它的标记（我使用的是 Chrome，每次尝试检查它时，下拉菜单都会消失）。

开发者政策说：

> 如果您的应用程序在地图上显示 Places API 数据，则该地图必须由 Google 提供。
> 
> 如果您的应用程序在不显示 Google 地图的页面或视图上显示 Places API 数据，则您必须显示带有该数据的“Powered by Google”徽标。例如，如果您的应用程序在一个选项卡上显示地点列表，并在另一个选项卡上显示包含这些地点的 Google 地图，则第一个选项卡必须显示“由 Google 提供支持”徽标。

它没有说明它必须包含在下拉列表中，只是说徽标必须包含在数据中。我有一个包含多个输入字段的容器，所有这些都向 Places API 发出请求，那么我当然可以在该容器中包含所有输入字段的徽标吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T16:10:36.077

我从另一个我最初找不到的问题中找到了答案......

[如何删除 Google 地图自动完成下拉列表中的“Powered by Google”标志？](https://stackoverflow.com/questions/12327651/how-to-remove-the-powered-by-google-logo-in-the-google-map-autocomplete-dropdo)

# multithreading - 如何在 c++/qt 中获取线程的工作时间？

> ID：15864130
> 
> 赞同：0
> 
> 时间：2013-04-07T15:30:51.557
> 
> 标签：multithreading, qt, time, qthread

我是 C++ 和 QT 编程的新手，我想以毫秒为单位获取 QThread 执行一项任务所需的时间。有什么选择吗？

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T15:37:13.880

您需要创建两个信号 - 一个用于开始工作，一个用于完成工作。连接到开始信号的插槽将存储开始时间，如下所示：

```
mStartTime = QDateTime::currentDateTime(); 
```

连接到完成信号的插槽将像这样计算差异：

```
qint64 msecs = mStartTime.msecsTo(QDateTime::currentDateTime()); 
```

# c - sqlite3 总线错误

> ID：15864137
> 
> 赞同：1
> 
> 时间：2013-04-07T15:31:13.083
> 
> 标签：c, macos, cocoa, sqlite, bus-error

我正在编写一个使用 sqlite3 的应用程序。由于一些非常奇怪的原因，它只在某些机器上崩溃。我无法重现该错误，但有几个 beta 测试人员正在报告它。当应用程序打开时，它会自动退出。它说它由于总线错误而崩溃。我尝试了一切，但我无法解决问题。该应用程序在我的 3 台 Mac 上运行良好（一台运行 Tiger，另一台运行 Snow Leopard，另一台运行 Mountain Lion）。考虑到崩溃日志，问题发生在这个方法上：

```
+(BOOL)hasAnyBlog{
    int rc;

    sqlite3 *database = NULL;

    rc = sqlite3_open([[NSString stringWithFormat:@"%@/Library/Application Support/metropolis/database.db", NSHomeDirectory()] UTF8String], &database);

    sqlite3_stmt *statement;

    NSMutableString *str = [NSMutableString stringWithString:@"SELECT URL, username, password, token, type, name, id FROM blogs ORDER BY name ASC"];

    sqlite3_prepare(database, [str UTF8String], -1, &statement, NULL);

    NSMutableArray *array = [[[NSMutableArray alloc] init] autorelease];

    if(sqlite3_step(statement) == SQLITE_ROW){
        sqlite3_finalize(statement);
        sqlite3_close(database);
        return NO;
    }
    sqlite3_finalize(statement);
    sqlite3_close(database);
    return YES;
} 
```

有谁知道可能是什么原因造成的？这是崩溃日志：

```
Process:         Metropolis [17035]
Path:            /Applications/Metropolis.app/Contents/MacOS/Metropolis
Identifier:      com.chiaro.metropolis
Version:         ??? (1.6)
Code Type:       X86 (Native)
Parent Process:  launchd [79]

Date/Time:       2013-04-07 15:00:08.566 +0200
OS Version:      Mac OS X 10.6.8 (10K549)
Report Version:  6

Interval Since Last Report:          164186 sec
Crashes Since Last Report:           2
Per-App Interval Since Last Report:  6 sec
Per-App Crashes Since Last Report:   1
Anonymous UUID:                      161026F3-C64B-4813-90DC-64A94B9E4770

Exception Type:  EXC_BAD_ACCESS (SIGBUS)
Exception Codes: KERN_PROTECTION_FAILURE at 0x0000000000000001
Crashed Thread:  0  Dispatch queue: com.apple.main-thread

Thread 0 Crashed:  Dispatch queue: com.apple.main-thread
0   libsqlite3.dylib                  0x98091225 sqlite3_step + 37
1   com.chiaro.metropolis             0x00012bc7 0x1000 + 72647
2   com.chiaro.metropolis             0x00031c0d 0x1000 + 199693
3   com.apple.AppKit                  0x93c9fd59 -[NSTableView numberOfRows] + 142
4   com.apple.AppKit                  0x93be92c0 -[NSTableView _totalHeightOfTableView] + 42
5   com.apple.AppKit                  0x93be9275 -[NSTableView _minimumFrameSize] + 72
6   com.apple.AppKit                  0x93be8c0b -[NSScrollView tile] + 1295
7   com.apple.AppKit                  0x93be86ed -[NSScrollView _tileWithoutRecursing] + 46
8   com.apple.AppKit                  0x93b82b79 -[NSScrollView reflectScrolledClipView:] + 285
9   com.apple.AppKit                  0x93bf4615 -[NSClipView _reflectDocumentViewFrameChange] + 122
10  com.apple.AppKit                  0x93b3f713 -[NSView _postFrameChangeNotification] + 135
11  com.apple.AppKit                  0x93b398e6 -[NSView setFrameSize:] + 809
12  com.apple.AppKit                  0x93b63e5a -[NSControl setFrameSize:] + 128
13  com.apple.AppKit                  0x93bf41b0 -[NSTableView setFrameSize:] + 230
14  com.apple.AppKit                  0x93bf05d6 -[NSTableView _tileAndRedisplayAll] + 177
15  com.apple.AppKit                  0x93ca0f0e -[NSTableView setDataSource:] + 279
16  com.apple.AppKit                  0x93b1e903 -[NSNibOutletConnector establishConnection] + 406
17  com.apple.AppKit                  0x93b1d08f -[NSIBObjectData nibInstantiateWithOwner:topLevelObjects:] + 1249
18  com.apple.AppKit                  0x93b1b1a4 loadNib + 257
19  com.apple.AppKit                  0x93b1a7f7 +[NSBundle(NSNibLoading) _loadNibFile:nameTable:withZone:ownerBundle:] + 831
20  com.apple.AppKit                  0x93b1a4ad +[NSBundle(NSNibLoading) loadNibFile:externalNameTable:withZone:] + 158
21  com.apple.AppKit                  0x93b1a3f8 +[NSBundle(NSNibLoading) loadNibNamed:owner:] + 383
22  com.apple.AppKit                  0x93b171fd NSApplicationMain + 434
23  com.chiaro.metropolis             0x00002bbe 0x1000 + 7102
24  com.chiaro.metropolis             0x00002ae5 0x1000 + 6885

Thread 1:  Dispatch queue: com.apple.libdispatch-manager
0   libSystem.B.dylib                 0x9049f382 kevent + 10
1   libSystem.B.dylib                 0x9049fa9c _dispatch_mgr_invoke + 215
2   libSystem.B.dylib                 0x9049ef59 _dispatch_queue_invoke + 163
3   libSystem.B.dylib                 0x9049ecfe _dispatch_worker_thread2 + 240
4   libSystem.B.dylib                 0x9049e781 _pthread_wqthread + 390
5   libSystem.B.dylib                 0x9049e5c6 start_wqthread + 30

Thread 2:  Dispatch queue: com.apple.CFURLCACHE_work_queue
0   libSystem.B.dylib                 0x904adb26 fsync$UNIX2003 + 10
1   libsqlite3.dylib                  0x98000f3c unixSync + 76
2   libsqlite3.dylib                  0x9800404c syncJournal + 396
3   libsqlite3.dylib                  0x98019019 sqlite3PagerCommitPhaseOne + 1337
4   libsqlite3.dylib                  0x980198af sqlite3BtreeCommitPhaseOne + 607
5   libsqlite3.dylib                  0x9804e962 sqlite3VdbeHalt + 3394
6   libsqlite3.dylib                  0x98087de8 sqlite3VdbeExec + 12184
7   libsqlite3.dylib                  0x98091867 sqlite3_step + 1639
8   libsqlite3.dylib                  0x98092378 sqlite3_exec + 312
9   com.apple.CFNetwork               0x9362c2e2 __CFURLCache::PostDatabaseOpenPragmaExecute() + 80
10  com.apple.CFNetwork               0x9362bfd5 __CFURLCache::OpenDatabase() + 173
11  com.apple.CFNetwork               0x9362b9fb ProcessCacheTasks(__CFURLCache*) + 629
12  com.apple.CFNetwork               0x9362b226 _CFURLCacheTimerCallback(void*) + 403
13  libSystem.B.dylib                 0x904aca24 _dispatch_call_block_and_release + 16
14  libSystem.B.dylib                 0x9049f48c _dispatch_queue_drain + 249
15  libSystem.B.dylib                 0x9049eee8 _dispatch_queue_invoke + 50
16  libSystem.B.dylib                 0x9049ecfe _dispatch_worker_thread2 + 240
17  libSystem.B.dylib                 0x9049e781 _pthread_wqthread + 390
18  libSystem.B.dylib                 0x9049e5c6 start_wqthread + 30

Thread 3:
0   libSystem.B.dylib                 0x9049e412 __workq_kernreturn + 10
1   libSystem.B.dylib                 0x9049e9a8 _pthread_wqthread + 941
2   libSystem.B.dylib                 0x9049e5c6 start_wqthread + 30

Thread 4:  WebCore: LocalStorage
0   libSystem.B.dylib                 0x904a6aa2 __semwait_signal + 10
1   libSystem.B.dylib                 0x904a675e _pthread_cond_wait + 1191
2   libSystem.B.dylib                 0x904a83f8 pthread_cond_wait$UNIX2003 + 73
3   com.apple.JavaScriptCore          0x90b96fd1 WTF::ThreadCondition::timedWait(WTF::Mutex&, double) + 81
4   libSystem.B.dylib                 0x904a6259 _pthread_start + 345
5   libSystem.B.dylib                 0x904a60de thread_start + 34

Thread 5:
0   libSystem.B.dylib                 0x90478afa mach_msg_trap + 10
1   libSystem.B.dylib                 0x90479267 mach_msg + 68
2   com.apple.CoreFoundation          0x909492df __CFRunLoopRun + 2079
3   com.apple.CoreFoundation          0x909483c4 CFRunLoopRunSpecific + 452
4   com.apple.CoreFoundation          0x909481f1 CFRunLoopRunInMode + 97
5   com.apple.Foundation              0x95238224 +[NSURLConnection(NSURLConnectionReallyInternal) _resourceLoadLoop:] + 329
6   com.apple.Foundation              0x951ff4c4 -[NSThread main] + 45
7   com.apple.Foundation              0x951ff474 __NSThread__main__ + 1499
8   libSystem.B.dylib                 0x904a6259 _pthread_start + 345
9   libSystem.B.dylib                 0x904a60de thread_start + 34

Thread 0 crashed with X86 Thread State (32-bit):
 eax: 0x00000001  ebx: 0x98091211  ecx: 0x94b8f7e2  edx: 0x01037800
 edi: 0x00000001  esi: 0x00000015  ebp: 0xbffff2c8  esp: 0xbffff150
  ss: 0x0000001f  efl: 0x00010202  eip: 0x98091225   cs: 0x00000017
  ds: 0x0000001f   es: 0x0000001f   fs: 0x00000000   gs: 0x00000037
 cr2: 0x00000001

Binary Images:
   0x1000 -    0x64fff +com.chiaro.metropolis ??? (1.6) <BCA38D82-D970-49AE-BD18-3773687C584F> /Applications/Metropolis.app/Contents/MacOS/Metropolis
  0x7f000 -    0x8706f +net.liquidx.EyeTunes ??? (1.2) /Applications/Metropolis.app/Contents/Frameworks/EyeTunes.framework/Versions/A/EyeTunes
  0x90000 -    0xb6fff  libssl.0.9.7.dylib 0.9.7 (compatibility 0.9.7) <9203FADE-F4F2-2245-A32E-BD88819D314D> /usr/lib/libssl.0.9.7.dylib
  0xc5000 -   0x17afe7  libcrypto.0.9.7.dylib 0.9.7 (compatibility 0.9.7) <AACC86C0-86B4-B1A7-003F-2A0AF68973A2> /usr/lib/libcrypto.0.9.7.dylib
 0x1c0000 -   0x1d3ff7 +org.andymatuschak.Sparkle 1.5 Beta (bzr) (1.5) <B71AAB2E-CF96-C369-8F24-05DA34F5B92D> /Applications/Metropolis.app/Contents/Frameworks/Sparkle.framework/Versions/A/Sparkle
0x8fe00000 - 0x8fe4163b  dyld 132.1 (???) <4CDE4F04-0DD6-224E-ACE5-3C06E169A801> /usr/lib/dyld
0x90003000 - 0x90017ffb  com.apple.speech.synthesis.framework 3.10.35 (3.10.35) <57DD5458-4F24-DA7D-0927-C3321A65D743> /System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/SpeechSynthesis.framework/Versions/A/SpeechSynthesis
0x90018000 - 0x90068ff7  com.apple.framework.familycontrols 2.0.2 (2020) <596ADD85-79F5-A613-537B-F83B6E19013C> /System/Library/PrivateFrameworks/FamilyControls.framework/Versions/A/FamilyControls
0x90122000 - 0x901a2feb  com.apple.SearchKit 1.3.0 (1.3.0) <9E18AEA5-F4B4-8BE5-EEA9-818FC4F46FD9> /System/Library/Frameworks/CoreServices.framework/Versions/A/Frameworks/SearchKit.framework/Versions/A/SearchKit
0x901a3000 - 0x902a3fe7  libxml2.2.dylib 10.3.0 (compatibility 10.0.0) <BE7FCD73-03B5-25A4-FCA4-D4980F1488D6> /usr/lib/libxml2.2.dylib
0x902a4000 - 0x902a9ff7  com.apple.OpenDirectory 10.6 (10.6) <0603680A-A002-D294-DE83-0D028C6BE884> /System/Library/Frameworks/OpenDirectory.framework/Versions/A/OpenDirectory
0x902ac000 - 0x902bafe7  libz.1.dylib 1.2.3 (compatibility 1.0.0) <33C1B260-ED05-945D-FC33-EF56EC791E2E> /usr/lib/libz.1.dylib
0x902c0000 - 0x902d1ff7  com.apple.LangAnalysis 1.6.6 (1.6.6) <3036AD83-4F1D-1028-54EE-54165E562650> /System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/LangAnalysis.framework/Versions/A/LangAnalysis
0x90449000 - 0x9046fffb  com.apple.DictionaryServices 1.1.2 (1.1.2) <43E1D565-6E01-3681-F2E5-72AE4C3A097A> /System/Library/Frameworks/CoreServices.framework/Versions/A/Frameworks/DictionaryServices.framework/Versions/A/DictionaryServices
0x90478000 - 0x9061fff7  libSystem.B.dylib 125.2.11 (compatibility 1.0.0) <2DCD13E3-1BD1-6F25-119A-3863A3848B90> /usr/lib/libSystem.B.dylib
0x90620000 - 0x90673ff7  com.apple.HIServices 1.8.3 (???) <1D3C4587-6318-C339-BD0F-1988F246BE2E> /System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/HIServices.framework/Versions/A/HIServices
0x906ef000 - 0x908b2feb  com.apple.ImageIO.framework 3.0.6 (3.0.6) <AE641FAD-DF38-AE31-B45B-85AEE7AF3A45> /System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/ImageIO.framework/Versions/A/ImageIO
0x9090c000 - 0x90a87fe7  com.apple.CoreFoundation 6.6.6 (550.44) <F88C95CD-1264-782D-A1F5-204739847E93> /System/Library/Frameworks/CoreFoundation.framework/Versions/A/CoreFoundation
0x90a88000 - 0x90b1afe7  com.apple.print.framework.PrintCore 6.3 (312.7) <7410D1B2-655D-68DA-D4B9-2C65747B6817> /System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/PrintCore.framework/Versions/A/PrintCore
0x90b63000 - 0x90b69fe7  com.apple.CommerceCore 1.0 (9.1) <521D067B-3BDA-D04E-E1FA-CFA526C87EB5> /System/Library/PrivateFrameworks/CommerceKit.framework/Versions/A/Frameworks/CommerceCore.framework/Versions/A/CommerceCore
0x90b8c000 - 0x90e3afe7  com.apple.JavaScriptCore 6534.58 (6534.58.1) <8A25C759-F46B-D303-23D3-22BBFBDEEBDE> /System/Library/Frameworks/JavaScriptCore.framework/Versions/A/JavaScriptCore
0x90e54000 - 0x90ecefff  com.apple.audio.CoreAudio 3.2.6 (3.2.6) <156A532C-0B60-55B0-EE27-D02B82AA6217> /System/Library/Frameworks/CoreAudio.framework/Versions/A/CoreAudio
0x90f4d000 - 0x90f6cff7  com.apple.CoreVideo 1.6.2 (45.6) <EB53CAA4-5EE2-C356-A954-5775F7DDD493> /System/Library/Frameworks/CoreVideo.framework/Versions/A/CoreVideo
0x90f6d000 - 0x90fa0fff  libTrueTypeScaler.dylib ??? (???) <8ADB7D19-413E-4499-C874-13C383F97685> /System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/ATS.framework/Versions/A/Resources/libTrueTypeScaler.dylib
0x90fa6000 - 0x91054ff3  com.apple.ink.framework 1.3.3 (107) <233A981E-A2F9-56FB-8BDE-C2DEC3F20784> /System/Library/Frameworks/Carbon.framework/Versions/A/Frameworks/Ink.framework/Versions/A/Ink
0x9105e000 - 0x9108fff7  libGLImage.dylib ??? (???) <D18E2E76-DBF4-6930-039A-F66CA0D120B3> /System/Library/Frameworks/OpenGL.framework/Versions/A/Libraries/libGLImage.dylib
0x9112f000 - 0x91545ff7  libBLAS.dylib 219.0.0 (compatibility 1.0.0) <C4FB303A-DB4D-F9E8-181C-129585E59603> /System/Library/Frameworks/Accelerate.framework/Versions/A/Frameworks/vecLib.framework/Versions/A/libBLAS.dylib
0x91546000 - 0x9155bfff  com.apple.ImageCapture 6.1 (6.1) <B909459A-EAC9-A7C8-F2A9-CD757CDB59E8> /System/Library/Frameworks/Carbon.framework/Versions/A/Frameworks/ImageCapture.framework/Versions/A/ImageCapture
0x9155c000 - 0x91560ff7  IOSurface ??? (???) <89D859B7-A26A-A5AB-8401-FC1E01AC7A60> /System/Library/Frameworks/IOSurface.framework/Versions/A/IOSurface
0x91be5000 - 0x91c06fe7  com.apple.opencl 12.3.6 (12.3.6) <B4104B80-1CB3-191C-AFD3-697843C6BCFF> /System/Library/Frameworks/OpenCL.framework/Versions/A/OpenCL
0x91d2a000 - 0x92519557  com.apple.CoreGraphics 1.545.0 (???) <1D9DC7A5-228B-42CB-7018-66F42C3A9BB3> /System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/CoreGraphics.framework/Versions/A/CoreGraphics
0x92582000 - 0x92584ff7  libRadiance.dylib ??? (???) <090420B3-CB65-9F7B-5349-D42F2F9693B6> /System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/ImageIO.framework/Versions/A/Resources/libRadiance.dylib
0x92585000 - 0x92620fe7  com.apple.ApplicationServices.ATS 275.19 (???) <2E83B3E9-AF39-36FC-5D05-CC1E952098AB> /System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/ATS.framework/Versions/A/ATS
0x92621000 - 0x92624ffb  com.apple.help 1.3.2 (41.1) <8AC20B01-4A3B-94BA-D8AF-E39034B97D8C> /System/Library/Frameworks/Carbon.framework/Versions/A/Frameworks/Help.framework/Versions/A/Help
0x92625000 - 0x92694ff7  libvMisc.dylib 268.0.1 (compatibility 1.0.0) <595A5539-9F54-63E6-7AAC-C04E1574B050> /System/Library/Frameworks/Accelerate.framework/Versions/A/Frameworks/vecLib.framework/Versions/A/libvMisc.dylib
0x92695000 - 0x926a0ff7  libGL.dylib ??? (???) <3E34468F-E9A7-8EFB-FF66-5204BD5B4E21> /System/Library/Frameworks/OpenGL.framework/Versions/A/Libraries/libGL.dylib
0x9271b000 - 0x92a3ffef  com.apple.HIToolbox 1.6.5 (???) <21164164-41CE-61DE-C567-32E89755CB34> /System/Library/Frameworks/Carbon.framework/Versions/A/Frameworks/HIToolbox.framework/Versions/A/HIToolbox
0x92a40000 - 0x92a43fe7  libmathCommon.A.dylib 315.0.0 (compatibility 1.0.0) <1622A54F-1A98-2CBE-B6A4-2122981A500E> /usr/lib/system/libmathCommon.A.dylib
0x92a44000 - 0x92a54ff7  libsasl2.2.dylib 3.15.0 (compatibility 3.0.0) <C8744EA3-0AB7-CD03-E639-C4F2B910BE5D> /usr/lib/libsasl2.2.dylib
0x92a55000 - 0x92cbbff7  com.apple.security 6.1.2 (55002) <3FA54D69-5476-78DD-0AFC-D6697263890E> /System/Library/Frameworks/Security.framework/Versions/A/Security
0x92d92000 - 0x931c7ff7  libLAPACK.dylib 219.0.0 (compatibility 1.0.0) <5E2D2283-57DE-9A49-1DB0-CD027FEFA6C2> /System/Library/Frameworks/Accelerate.framework/Versions/A/Frameworks/vecLib.framework/Versions/A/libLAPACK.dylib
0x93626000 - 0x93626ff7  com.apple.CoreServices 44 (44) <51CFA89A-33DB-90ED-26A8-67D461718A4A> /System/Library/Frameworks/CoreServices.framework/Versions/A/CoreServices
0x93627000 - 0x936d3fe7  com.apple.CFNetwork 454.12.4 (454.12.4) <DEDCD006-389F-967F-3405-EDF541F406D7> /System/Library/Frameworks/CoreServices.framework/Versions/A/Frameworks/CFNetwork.framework/Versions/A/CFNetwork
0x936d4000 - 0x936d4ff7  com.apple.Carbon 150 (152) <8F767518-AD3C-5CA0-7613-674CD2B509C4> /System/Library/Frameworks/Carbon.framework/Versions/A/Carbon
0x93893000 - 0x938e0feb  com.apple.DirectoryService.PasswordServerFramework 6.1 (6.1) <00A1A83B-0E7D-D0F4-A643-8C5675C2BB21> /System/Library/PrivateFrameworks/PasswordServer.framework/Versions/A/PasswordServer
0x938eb000 - 0x938ebff7  com.apple.Accelerate 1.6 (Accelerate 1.6) <3891A689-4F38-FACD-38B2-4BF937DE30CF> /System/Library/Frameworks/Accelerate.framework/Versions/A/Accelerate
0x93b15000 - 0x943f8ff7  com.apple.AppKit 6.6.8 (1038.36) <A353465E-CFC9-CB75-949D-786F6F7732F6> /System/Library/Frameworks/AppKit.framework/Versions/C/AppKit
0x94458000 - 0x9445efff  com.apple.CommonPanels 1.2.4 (91) <2438AF5D-067B-B9FD-1248-2C9987F360BA> /System/Library/Frameworks/Carbon.framework/Versions/A/Frameworks/CommonPanels.framework/Versions/A/CommonPanels
0x9458d000 - 0x94590ff7  libCoreVMClient.dylib ??? (???) <37F56237-4ABA-E5B5-968D-70FFE357E8E0> /System/Library/Frameworks/OpenGL.framework/Versions/A/Libraries/libCoreVMClient.dylib
0x94591000 - 0x945cbff7  libcups.2.dylib 2.8.0 (compatibility 2.0.0) <A6C207E3-7B42-926D-9C93-BE3F50B92496> /usr/lib/libcups.2.dylib
0x945cc000 - 0x9461cfe7  libTIFF.dylib ??? (???) <AB182CEC-188A-F2BC-21E1-0059FD3B2598> /System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/ImageIO.framework/Versions/A/Resources/libTIFF.dylib
0x9461d000 - 0x9467aff7  com.apple.framework.IOKit 2.0 (???) <3DABAB9C-4949-F441-B077-0498F8E47A35> /System/Library/Frameworks/IOKit.framework/Versions/A/IOKit
0x9467b000 - 0x94686ff7  libCSync.A.dylib 545.0.0 (compatibility 64.0.0) <287DECA3-7821-32B6-724D-AE03A9A350F9> /System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/CoreGraphics.framework/Versions/A/Resources/libCSync.A.dylib
0x946d9000 - 0x946e3fe7  com.apple.audio.SoundManager 3.9.3 (3.9.3) <5F494955-7290-2D91-DA94-44B590191771> /System/Library/Frameworks/Carbon.framework/Versions/A/Frameworks/CarbonSound.framework/Versions/A/CarbonSound
0x94765000 - 0x947a8ff7  com.apple.NavigationServices 3.5.4 (182) <8DC6FD4A-6C74-9C23-A4C3-715B44A8D28C> /System/Library/Frameworks/Carbon.framework/Versions/A/Frameworks/NavigationServices.framework/Versions/A/NavigationServices
0x947c7000 - 0x948a1fff  com.apple.DesktopServices 1.5.11 (1.5.11) <800F2040-9211-81A7-B438-7712BF51DEE3> /System/Library/PrivateFrameworks/DesktopServicesPriv.framework/Versions/A/DesktopServicesPriv
0x948b2000 - 0x948f5ff7  libGLU.dylib ??? (???) <6CC3CE6A-7024-C685-EADA-7F9DC27128E2> /System/Library/Frameworks/OpenGL.framework/Versions/A/Libraries/libGLU.dylib
0x948fe000 - 0x9499bfe3  com.apple.LaunchServices 362.3 (362.3) <15B47388-16C8-97DA-EEBB-1709E136169E> /System/Library/Frameworks/CoreServices.framework/Versions/A/Frameworks/LaunchServices.framework/Versions/A/LaunchServices
0x94a3d000 - 0x94a3dff7  com.apple.vecLib 3.6 (vecLib 3.6) <FF4DC8B6-0AB0-DEE8-ADA8-7B57645A1F36> /System/Library/Frameworks/vecLib.framework/Versions/A/vecLib
0x94b84000 - 0x94c31fe7  libobjc.A.dylib 227.0.0 (compatibility 1.0.0) <9F8413A6-736D-37D9-8EB3-7986D4699957> /usr/lib/libobjc.A.dylib
0x951e9000 - 0x9545afef  com.apple.Foundation 6.6.8 (751.63) <69B3441C-B196-F2AD-07F8-D8DD24E4CD8C> /System/Library/Frameworks/Foundation.framework/Versions/C/Foundation
0x9545b000 - 0x9545bff7  com.apple.Cocoa 6.6 (???) <EA27B428-5904-B00B-397A-185588698BCC> /System/Library/Frameworks/Cocoa.framework/Versions/A/Cocoa
0x9554f000 - 0x959a0fef  com.apple.RawCamera.bundle 3.7.1 (570) <AF94D180-5E0F-10DF-0CB2-FD8EDB110FA2> /System/Library/CoreServices/RawCamera.bundle/Contents/MacOS/RawCamera
0x959a1000 - 0x959a3ff7  com.apple.securityhi 4.0 (36638) <6118C361-61E7-B34E-93DB-1B88108F8F18> /System/Library/Frameworks/Carbon.framework/Versions/A/Frameworks/SecurityHI.framework/Versions/A/SecurityHI
0x95a20000 - 0x95b4efe7  com.apple.CoreData 102.1 (251) <87FE6861-F2D6-773D-ED45-345272E56463> /System/Library/Frameworks/CoreData.framework/Versions/A/CoreData
0x96aa3000 - 0x96aadffb  com.apple.speech.recognition.framework 3.11.1 (3.11.1) <7486003F-8FDB-BD6C-CB34-DE45315BD82C> /System/Library/Frameworks/Carbon.framework/Versions/A/Frameworks/SpeechRecognition.framework/Versions/A/SpeechRecognition
0x96aae000 - 0x96aafff7  com.apple.TrustEvaluationAgent 1.1 (1) <2D970A9B-77E8-EDC0-BEC6-7580D78B2843> /System/Library/PrivateFrameworks/TrustEvaluationAgent.framework/Versions/A/TrustEvaluationAgent
0x96ab0000 - 0x96abcff7  libkxld.dylib ??? (???) <9A441C48-2D18-E716-5F38-CBEAE6A0BB3E> /usr/lib/system/libkxld.dylib
0x96abd000 - 0x96adbfe7  libPng.dylib ??? (???) <6C0B95D7-9634-E044-0B79-F1DD56961C33> /System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/ImageIO.framework/Versions/A/Resources/libPng.dylib
0x96ae7000 - 0x96b2dff7  libauto.dylib ??? (???) <29422A70-87CF-10E2-CE59-FEE1234CFAAE> /usr/lib/libauto.dylib
0x96d5a000 - 0x96d67ff7  com.apple.NetFS 3.2.2 (3.2.2) <DDC9C397-C35F-8D7A-BB24-3D1B42FA5FAB> /System/Library/Frameworks/NetFS.framework/Versions/A/NetFS
0x96daa000 - 0x96daeff7  libGFXShared.dylib ??? (???) <09540618-2ED1-72C4-61CB-938B35927568> /System/Library/Frameworks/OpenGL.framework/Versions/A/Libraries/libGFXShared.dylib
0x96daf000 - 0x96dc7ff7  com.apple.CFOpenDirectory 10.6 (10.6) <D1CF5881-0AF7-D164-4156-9E9067B7FA37> /System/Library/Frameworks/OpenDirectory.framework/Versions/A/Frameworks/CFOpenDirectory.framework/Versions/A/CFOpenDirectory
0x97031000 - 0x97053fef  com.apple.DirectoryService.Framework 3.6 (621.15) <F38894EA-2C13-7FC5-C084-94DA0B5B6B68> /System/Library/Frameworks/DirectoryService.framework/Versions/A/DirectoryService
0x97054000 - 0x97066ff7  com.apple.MultitouchSupport.framework 207.11 (207.11) <6FF4F2D6-B8CD-AE13-56CB-17437EE5B741> /System/Library/PrivateFrameworks/MultitouchSupport.framework/Versions/A/MultitouchSupport
0x97067000 - 0x9711ffeb  libFontParser.dylib ??? (???) <D2D0C922-5ED1-3AE9-6F99-707C74DF3E62> /System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/ATS.framework/Versions/A/Resources/libFontParser.dylib
0x971ba000 - 0x9733cfe7  libicucore.A.dylib 40.0.0 (compatibility 1.0.0) <60FF302E-5FAE-749B-BC70-0496DC2FBF2D> /usr/lib/libicucore.A.dylib
0x9733d000 - 0x97341ff7  libGIF.dylib ??? (???) <2251F789-B187-0837-6E38-A0E5C7C4FA3C> /System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/ImageIO.framework/Versions/A/Resources/libGIF.dylib
0x973f3000 - 0x97426ff7  com.apple.AE 496.5 (496.5) <BF9673D5-2419-7120-26A3-83D264C75222> /System/Library/Frameworks/CoreServices.framework/Versions/A/Frameworks/AE.framework/Versions/A/AE
0x9752f000 - 0x97538ff7  com.apple.DiskArbitration 2.3 (2.3) <E9C40767-DA6A-6CCB-8B00-2D5706753000> /System/Library/Frameworks/DiskArbitration.framework/Versions/A/DiskArbitration
0x975a9000 - 0x975edff3  com.apple.coreui 2 (114) <2234855E-3BED-717F-0BFA-D1A289ECDBDA> /System/Library/PrivateFrameworks/CoreUI.framework/Versions/A/CoreUI
0x975ee000 - 0x97652ffb  com.apple.htmlrendering 72 (1.1.4) <4D451A35-FAB6-1288-71F6-F24A4B6E2371> /System/Library/Frameworks/Carbon.framework/Versions/A/Frameworks/HTMLRendering.framework/Versions/A/HTMLRendering
0x97667000 - 0x97769fe7  libcrypto.0.9.8.dylib 0.9.8 (compatibility 0.9.8) <015563C4-81E2-8C8A-82AC-31B38D904A42> /usr/lib/libcrypto.0.9.8.dylib
0x9779b000 - 0x977d8ff7  com.apple.SystemConfiguration 1.10.8 (1.10.2) <50E4D49B-4F61-446F-1C21-1B2BA814713D> /System/Library/Frameworks/SystemConfiguration.framework/Versions/A/SystemConfiguration
0x977d9000 - 0x977d9ff7  com.apple.ApplicationServices 38 (38) <8012B504-3D83-BFBB-DA65-065E061CFE03> /System/Library/Frameworks/ApplicationServices.framework/Versions/A/ApplicationServices
0x977da000 - 0x97882ffb  com.apple.QD 3.36 (???) <FA2785A4-BB69-DCB4-3BA3-7C89A82CAB41> /System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/QD.framework/Versions/A/QD
0x97883000 - 0x9791bfe7  edu.mit.Kerberos 6.5.11 (6.5.11) <F36DB665-A88B-7F5B-6244-6A2E7FFFF668> /System/Library/Frameworks/Kerberos.framework/Versions/A/Kerberos
0x9791c000 - 0x97923ff3  com.apple.print.framework.Print 6.1 (237.1) <F5AAE53D-5530-9004-A9E3-2C1690C5328E> /System/Library/Frameworks/Carbon.framework/Versions/A/Frameworks/Print.framework/Versions/A/Print
0x9792b000 - 0x979f6fef  com.apple.CoreServices.OSServices 359.2 (359.2) <7C16D9C8-6F41-5754-17F7-2659D9DD9579> /System/Library/Frameworks/CoreServices.framework/Versions/A/Frameworks/OSServices.framework/Versions/A/OSServices
0x97a3d000 - 0x97a40ff7  libCGXType.A.dylib 545.0.0 (compatibility 64.0.0) <4D766435-EB76-C384-0127-1D20ACD74076> /System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/CoreGraphics.framework/Versions/A/Resources/libCGXType.A.dylib
0x97a41000 - 0x97a69ff7  libxslt.1.dylib 3.24.0 (compatibility 3.0.0) <E761F29A-328B-29D9-3DF0-023F2C21E500> /usr/lib/libxslt.1.dylib
0x97bc6000 - 0x97bdafe7  libbsm.0.dylib ??? (???) <14CB053A-7C47-96DA-E415-0906BA1B78C9> /usr/lib/libbsm.0.dylib
0x97d32000 - 0x97e6ffe7  com.apple.audio.toolbox.AudioToolbox 1.6.7 (1.6.7) <423BDE4D-5082-B6CA-BB2C-E22A037235A4> /System/Library/Frameworks/AudioToolbox.framework/Versions/A/AudioToolbox
0x97e70000 - 0x97ed1fe7  com.apple.CoreText 151.13 (???) <23F359DA-D845-5C50-4DF3-19E858CF2B2C> /System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/CoreText.framework/Versions/A/CoreText
0x97ed2000 - 0x97ffbfe7  com.apple.WebKit 6534.58 (6534.58.2) <D156AE52-5235-2C51-B522-FD3D90E474DA> /System/Library/Frameworks/WebKit.framework/Versions/A/WebKit
0x97ffc000 - 0x980b5fe7  libsqlite3.dylib 9.6.0 (compatibility 9.0.0) <52438E77-55D1-C231-1936-76F1369518E4> /usr/lib/libsqlite3.dylib
0x9842f000 - 0x98473fe7  com.apple.Metadata 10.6.3 (507.15) <74F05E64-2A68-BA10-CCD4-128D164E5A0F> /System/Library/Frameworks/CoreServices.framework/Versions/A/Frameworks/Metadata.framework/Versions/A/Metadata
0x98474000 - 0x991ecfe7  com.apple.WebCore 6534.58 (6534.58.2) <E39A8EB5-2D9F-0459-54E1-E172689616F5> /System/Library/Frameworks/WebKit.framework/Versions/A/Frameworks/WebCore.framework/Versions/A/WebCore
0x991ed000 - 0x9920dfe7  libresolv.9.dylib 41.1.0 (compatibility 1.0.0) <8C2B5FA8-2469-21C7-D297-F95A0FFE5F19> /usr/lib/libresolv.9.dylib
0x9920e000 - 0x99249ffb  libFontRegistry.dylib ??? (???) <19ED5DE0-D3AF-B229-9193-35D58FE377E5> /System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/ATS.framework/Versions/A/Resources/libFontRegistry.dylib
0x9924a000 - 0x9926eff7  libJPEG.dylib ??? (???) <50E17B4D-63D6-24D3-702F-6A6E912A55EA> /System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/ImageIO.framework/Versions/A/Resources/libJPEG.dylib
0x9926f000 - 0x992f1ffb  SecurityFoundation ??? (???) <C4506287-1AE2-5380-675D-95B0291AA425> /System/Library/Frameworks/SecurityFoundation.framework/Versions/A/SecurityFoundation
0x99327000 - 0x99407fe7  com.apple.vImage 4.1 (4.1) <D029C515-08E1-93A6-3705-DD062A3A672C> /System/Library/Frameworks/Accelerate.framework/Versions/A/Frameworks/vImage.framework/Versions/A/vImage
0x9943f000 - 0x99440ff7  com.apple.audio.units.AudioUnit 1.6.7 (1.6.7) <93EC71F1-4D4E-F456-8EFE-32E7EFD7A064> /System/Library/Frameworks/AudioUnit.framework/Versions/A/AudioUnit
0x99441000 - 0x994abfe7  libstdc++.6.dylib 7.9.0 (compatibility 7.0.0) <411D87F4-B7E1-44EB-F201-F8B4F9227213> /usr/lib/libstdc++.6.dylib
0x994ee000 - 0x994fcff7  com.apple.opengl 1.6.14 (1.6.14) <82622F67-E032-0BF6-A78D-50B346E8D0FD> /System/Library/Frameworks/OpenGL.framework/Versions/A/OpenGL
 0xffff0000 - 0xffff1fff  libSystem.B.dylib ??? (???) <2DCD13E3-1BD1-6F25-119A-3863A3848B90> /usr/lib/libSystem.B.dylib 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T01:05:39.543

内置的 SQLite 库似乎有问题。解决方案是将 SQLite 文件添加到项目中并将 SQLite 编译为项目的一部分。

# .net - 在 Windows 8 中检索用户的角色或声明

> ID：15864138
> 
> 赞同：4
> 
> 时间：2013-04-07T15:31:24.160
> 
> 标签：.net, windows-8, windows-runtime

70-484 考试（Windows 8 应用程序）的要求之一是检索用户的角色或声明 - 鉴于 .NET Metro 配置文件中没有`WindowsIdentity`和`WindowsPrincipal`类，正确的方法是什么（只有`IIdentity`和`IPrincipal`接口可用对于 Windows 8 应用程序，但没有实现它们的类）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T16:45:25.673

对于声明/角色：http: [//msdn.microsoft.com/en-us/library/microsoft.identitymodel.claims.claimsidentity.claims.aspx](http://msdn.microsoft.com/en-us/library/microsoft.identitymodel.claims.claimsidentity.claims.aspx)

凭据：http: [//msdn.microsoft.com/en-us/library/windows/apps/xaml/windows.security.credentials.passwordvault.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/windows.security.credentials.passwordvault.aspx)

如果您需要对用户进行身份验证：http: [//msdn.microsoft.com/en-us/library/windows/apps/windows.security.credentials.ui.credentialpicker.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/windows.security.credentials.ui.credentialpicker.aspx)

# git - 更聪明的 git filter-branch --subdirectory-filter

> ID：15864140
> 
> 赞同：2
> 
> 时间：2013-04-07T15:31:34.823
> 
> 标签：git, git-filter-branch

我有一个相当大的项目，其背后有着悠久的历史，我试图将某些文件放入他们自己的存储库中，同时保留他们的整个更改历史。
在此之前，我移动了所有需要保留的文件`project/subdirectory`，因此我可以克隆我的存储库，使用，`git filter-branch --subdirectory-filter`但这会丢弃文件的整个历史，因为它`subdirectory`是非常新的。

我正在寻找的是一种说“保留导致这些文件的所有提交”的方式，所以我会获取该子目录中的所有文件并将提交向后走，说“那个文件在这个提交中吗？是的，保留提交以及该提交中的文件”。

有没有办法相对轻松地做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T15:48:02.133

也许您需要先修改原始存储库，以便这些文件的历史看起来像它们总是在那个子目录中。
然后你可以应用过滤器。

请参阅“[如何重写历史记录以使所有文件都在子目录中？](https://stackoverflow.com/a/4042965/6309) ”：

> 重写提交，以便任何地方`project/subdirectory`都不存在，它被创建并将所有文件移动到它：

```
git filter-branch --prune-empty --tree-filter '
if [[ ! -e project/subdirectory ]]; then
    mkdir -p project/subdirectory
    git ls-tree --name-only $GIT_COMMIT | xargs -I files mv files project/subdirectory
fi' 
```

> 现在将记录历史记录，就好像所有文件始终位于`project/subdirectory`.

# android - 为什么显示警告和错误日志消息而没有其他消息？

> ID：15864141
> 
> 赞同：0
> 
> 时间：2013-04-07T15:31:38.370
> 
> 标签：android

背景：我试图通过调用`log.d`. Logcat 显示许多消息，但没有来自我的应用程序。最后我尝试了这个：

```
// test logging
Log.e("taptimer debug", "debug message:program init:error");
Log.w("taptimer debug", "debug message:program init:warning");
Log.i("taptimer debug", "debug message:program init:info");
Log.d("taptimer debug", "debug message:program init:debug");
Log.v("taptimer debug", "debug message:program init:verbose");
Log.wtf("taptimer debug", "debug message:program init:what a terrible failure!");
System.out.println("Println debug:program init"); 
```

令我惊讶的是，Logcat 显示了警告和错误级别的消息。为什么那些显示而其他的都不显示？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T15:37:29.933

在菜单中选择`verbose`作为最低日志级别：

![在此处输入图像描述](https://i.stack.imgur.com/31eAJ.png)

另外，请确保您没有（左侧菜单）上的消息过滤器。

* * *

如果它不起作用，请检查[`Log.isLoggable()`](https://developer.android.com/reference/android/util/Log.html#isLoggable%28java.lang.String,%20int%29). 如果它返回 false，您必须使用以下命令手动激活它`adb`：

```
adb shell
setprop log.tag.taptimer VERBOSE 
```

# windows-phone-7 - 如何为 Windows Phone 7 创建应用程序即服务？

> ID：15864147
> 
> 赞同：0
> 
> 时间：2013-04-07T15:32:29.840
> 
> 标签：windows-phone-7, windows-phone-8

我想用 windows phone 开发一个应用程序，它像服务一样在后台工作。我需要一个紧急 SMS 发送器，它可以由接收器电话中的同一应用程序接收。因为它必须在收到消息时接收消息，所以它应该是一个服务而不是一个正在运行的应用程序，它是否适用于 windows phone？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T17:00:59.447

1.  您不能在 Windows Phone 上安装将充当标准 Windows 机器上的服务的应用程序。
2.  您可以使用[推送通知](http://msdn.microsoft.com/en-us/library/hh221549.aspx)在应用程序之间传递消息。后台代理不适用于您的场景，在这种场景中，消息应该几乎立即传递。但是，请记住，即使使用推送，也可能存在一定的交付延迟。
3.  未经用户同意，您无法在沙盒化的 Windows Phone 应用程序中发送 SMS 消息。
4.  您可以使用[Twilio](http://www.twilio.com/)等服务通过商业后端发送 SMS 消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T15:43:05.143

Not exactly like that. You can run a Scheduled background agent but it is very limited (also has an expiry date) and can not launch the application. To receive a message you can use notification but again the user has to click somewhere to open the app. You can not send sms automatically without the user pressing send.

I'd suggest re-thinking how you want to build this app. You'll certainly need a back-end service somewhere to which the agent from a phone might send a request to send sms.

# mysql - sql 语法错误 - 不知道为什么会这样？

> ID：15864148
> 
> 赞同：0
> 
> 时间：2013-04-07T15:32:32.373
> 
> 标签：mysql

我无法弄清楚，由于某种原因，我收到此错误消息：

```
Database query failed: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'AND ptb_block_user.blocked=1' at line 5 
```

这是我的mysql查询，不知道是什么问题，请有人帮帮我吗？

```
function blocked_users() {
            global $connection;
            global $_SESSION;
            global $profile_id;
            $query = "SELECT * 
                        FROM ptb_block_user
                        WHERE ptb_block_user.blocked_id = \"$profile_id\"
                        AND ptb_block_user.user_id = ".$_SESSION['user_id']."
                        AND ptb_block_user.blocked='1' ";
                        $blocked_users = mysql_query($query, $connection);
            confirm_query($blocked_users);
            return $blocked_users;

        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T15:36:31.603

您也可以随时`print $query`查看您的 SQL 查询的外观。更容易发现错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T15:37:13.657

```
function blocked_users() {
            global $connection;
            global $_SESSION;
            global $profile_id;
            $query = "SELECT * 
                        FROM ptb_block_user
                        WHERE ptb_block_user.blocked_id = ".mysql_real_escape_string($profile_id)."
                        AND ptb_block_user.user_id = ".mysql_real_escape_string($_SESSION['user_id'])."
                        AND ptb_block_user.blocked=1;";
            $blocked_users = mysql_query($query, $connection);
            confirm_query($blocked_users);
            return $blocked_users;
        } 
```

**使用 MySqli lib 而不是 MySql：[http ://www.php.net/manual/en/book.mysqli.php](http://www.php.net/manual/en/book.mysqli.php)**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T15:37:31.487

```
SELECT * 
  FROM ptb_block_user b
 WHERE b.blocked_id = '$profile_id' 
   AND b.user_id = '{$_SESSION['user_id']}' 
   AND b.blocked=1 
```

?

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-07T15:41:48.967

如果您使用纯 php 且没有框架，则应始终使用准备好的语句进行 mysql 通信。这更加安全，并且可以保护您免受 mysql 注入。

尝试这个。

```
db = new mysqli("your_ip_or_host","username","password","name_of_database");
$st = $db->prepare("SELECT * 
                    FROM ptb_block_user
                    WHERE ptb_block_user.blocked_id = ?
                    AND ptb_block_user.user_id = ?
                    AND ptb_block_user.blocked=?");

$st->bind_param('iii', intval($profile_id), intval($_SESSION['user_id']),1);

$st->execute();

$st->store_result();
$st->bind_result($col1, $col2, ... , $colx);

while($st->fetch())
{
    echo "col1=$col, col2=$col2, ...., colX=$colx \n";
}

$st->close(); 
```

# image - 按一定量给图像添加噪点

> ID：15864149
> 
> 赞同：0
> 
> 时间：2013-04-07T15:32:54.187
> 
> 标签：image, matlab, noise

嗨，我是一名 Matlab 初学者，我想通过添加一定数量的随机噪声数据来寻求有关降级图像文件的帮助。

噪声的百分比将在 0-100 的范围内，表示输出将如何：

0 表示不修改，25 表示图像的 75% 内容和 25% 的噪声，75 表示图像的 25% 的内容和 75% 的噪声，100 表示输出应该与内容的大小相同图像，但包含所有随机噪声并且不包含原始图像数据。

以下是我的代码：

```
function out_image = image_plus_noise( in_image, percent_noise )
in_image = imread('sample_image.png');
image_proportion = 0.25;
percent_noise = rand(0:100);
my_percent_noise = uint8(percent_noise);
out_image = in_image{in_image}*image_proportion + percent_noise{my_percent_noise}*(1-image_proportion);
imshow(out_image) 
```

但是我无法正确运行它，第 6 行有一个错误。谁能告诉我我有什么样的错误？我在正确的轨道上吗？*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T20:25:29.367

一些评论：

*   您正在覆盖您的输入参数`percent_noise`和`in_image`
*   `rand(0:100)`在 0 到 1 的范围内为您提供 100 个随机值。您可能不需要所有这些。
*   您正在尝试使用`{}`而不是`()`第 6 行来索引矩阵。那是行不通的。
*   您需要定义“图像内容的百分比”是什么意思。在每个像素？在最大值方面？

这是向图像添加一些随机噪声的一种方法：

```
scaledImage = in_image * (1-percent_noise / 100); %scale image so
                                              %its maximum
                                              %value is some
                                              %percentage of
                                              %the original 
maxOfImage = max(in_image(:));
noiseImage = (percent_noise/100) * maxOfImage * rand(size(in_image)); %create noise
                                                      %image
                                                      %relative to
                                                      %the maximum
                                                      %of the
                                                      %original image
out_image = scaledImage + noiseImage; %add noise to original image. 
```

如果您有权访问通信工具箱，则可以改用该`awgn`功能。

# php - 如何检查会话数组中是否存在特定值

> ID：15864151
> 
> 赞同：0
> 
> 时间：2013-04-07T15:33:23.003
> 
> 标签：php, session, session-variables

嗨，我有一个 id 值列表，即 1、2、3、4、5、6。当我将任何这些值存储到会话变量数组中时。例如，假设我们将 4 和 2 存储在数组中

```
$_SESSION['value'] = array();
$_SESSION['value'][] = 4;
$_SESSION['value'][] = 2;
$_SESSION['value'][] = 6; 
```

如何检查 2 是否在数组中，如果它不在数组中，则返回 true 或 false？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T15:35:33.637

可以使用[in_array](http://php.net/manual/en/function.in-array.php)检查任何数组的值：

```
if ( in_array(4, $_SESSION['value']) ) {
    //do something
} 
```

> in_array（针，干草堆阵列）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T15:37:22.523

很容易检查：

```
in_array($valueToCheck, $_SESION["value"]) 
```

如果数组是在会话中设置的，也许检查一下也是个好主意：

```
function check($valueToCheck){
return ((isset($_SESSION["value"]) && is_array($_SESSION["value"]) && in_array($valueToCheck, $_SESION["value"]));
} 
```

# python - Python中的简单感知器

> ID：15864156
> 
> 赞同：0
> 
> 时间：2013-04-07T15:33:42.720
> 
> 标签：python, perceptron

我正在编写一个没有阈值的 Python 中非常简单的感知器，并且我正在使用 sigmoid 函数，但我需要一个明确的指导方针来遵循，我对如何构造输出感到困惑。

```
Input = [(1,1,0), (0,1,0),(1,1,1),(0,0,1)]
weights = [0,0,0]
output = sigmoid(input)
sigmoid = 1.0/(1.0 + exp(- Input)
sigmoid_derative = sigmoid * (1.0 - sigmoid) 
```

我没有在 python 中测试代码，但这只是我从讲座中学到的头脑风暴。但我不确定何时使用 sigmoid_derative？我了解激活功能将包含 2 个部分：

1.  加法器： `newInput= w1x1 + w2x2 + w3x3`
2.  `sigmoid = 1.0/(1.0 + exp(- newInput)`

然后我们将使用误差函数来了解权重是否准确。

```
Error = 0.5 * (Target - Output)* (Target- Output)
if Error == 0 then Break;
else
Update weights. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T22:46:12.940

1.  那根本不是 Python 代码。据我了解，它是一种伪代码。
2.  您的问题更多是一个概念性的问题，与 Python 或编码无关。因此，为了让您对此有一个清晰的认识，您需要首先按照您的方式计算 newInput 。用作激活函数的 sigmoid 函数为您提供最终输出（实际输出）。将此输出与目标输出进行比较，以获得用于更新权重的错误值。对所有输入一个时期一个时期地重复这个迭代，直到误差值低于一个合适的标记。终止算法的另一种可能方法是设置允许的最大时期数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-28T07:31:26.417

我希望我关于 Perceptron 的一篇文章可以帮助您了解清楚。我的文章是“人工神经网络（感知器）检测自动驾驶汽车中的汽车/行人的直观示例”。——所以，基本上，这篇文章是为新手写的，只是为了获得更好的直觉。链接在这里：

[https://www.spicelogic.com/Journal/Perceptron-Artificial-Neural-Networks-10](https://www.spicelogic.com/Journal/Perceptron-Artificial-Neural-Networks-10)

[[ ![在此处输入图像描述](https://i.stack.imgur.com/ZI3fT.jpg)]](https://www.spicelogic.com/Journal/Perceptron-Artificial-Neural-Networks-10) [2](https://i.stack.imgur.com/ZI3fT.jpg)

# mysql - mysql根据字段值计算不同的字段

> ID：15864162
> 
> 赞同：0
> 
> 时间：2013-04-07T15:34:20.743
> 
> 标签：mysql, sql

我有一个看起来像这样的表：

```
from_user    to_user      type
    43          85          1
    32          43          2
    64          79          1
    77          43          4
    54          43          5
    13          96          4
    78          43          6 
```

我有一个变量`$user`，我需要一个查询，它返回`from_user`它等于的总和（即有多少 from_users）`$user`，但前提是`type=1`。如果 type=4 或 5，我需要`to_user`它等于的总和`$user`。是否可以在一个查询中执行此操作？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T15:38:49.470

```
SELECT  SUM(Type = 1 AND From_User = 'user_ID_HERE') From_User,
        SUM(Type IN (4,5) AND to_user = 'user_ID_HERE') To_User
FROM    TableName 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/ec48c/4)

# vim - 检查是否在 vim 插件中设置了全局插件变量的优雅方法

> ID：15864164
> 
> 赞同：36
> 
> 时间：2013-04-07T15:34:36.907
> 
> 标签：vim, plugins, global-variables, settings, macvim

在过去的几年里，我曾经使用 vim 来编辑远程服务器上的配置和脚本。几周前，我决定采取下一步行动，尝试使用 (Mac)vim 作为除了 Sublime Text 2 之外的常规编辑器。现在我想创建我的第一个插件。

我的插件将定义约 16 个全局变量，用户可以分配这些变量来调整插件的某些属性。我问自己检查用户是否已经将自己的值分配给某个变量的最优雅的方式（可能是主观的）是什么。我检查了各种其他插件，到目前为止我看到的“模式”似乎总是：

```
if !exists("g:pluginname_setting")
    let g:pluginname_setting="default"
endif 
```

这似乎很容易和直接。但我总是会一遍又一遍地重复同一段代码。由于 vi(m) 存在了很长时间，我很确定人们已经尝试了很多方法来编写插件，并且已经开发了某种“最佳实践”，我认为这是我上面给出的“模式”举个例子。然而，调用一个函数来填充包含所有插件设置的字典，然后遍历字典以检查键以查看用户是否已经定义了他的个人偏好，这不是更优雅吗？这是一个好主意还是我应该放弃这个想法并坚持这种`ìf !exists()`方法？

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2015-11-18T08:34:32.383

有一个优雅的方法：

```
let g:pluginname_setting = get(g:, 'pluginname_setting', "default") 
```

我很惊讶这在插件设置中没有广泛使用。

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2013-04-07T15:43:40.427

这`if exists(...)`确实是规范的配置习语和要走的路。当然，你可以做一些元编程来减少重复（类似`function! s:SetDefault( varname, default )`）；一些插件可以做到这一点。

另一方面，您打算允许大量自定义是好的，除非您的插件处理非常复杂的问题（在文本编辑器中？！），16 个配置变量确实处于高端。您必须考虑记录所有这些并测试各种组合的工作；也许最好先从更简单的简化方法开始，然后根据用户反馈进行改进。

# c++ - 传递整数文字的更快方法？

> ID：15864170
> 
> 赞同：0
> 
> 时间：2013-04-07T15:35:05.773
> 
> 标签：c++

我想知道这段代码是否可以压缩，因为除了一行之外我不需要 UINT。

```
UINT vps = 1;
D3D11_VIEWPORT viewport;
md3dImmediateContext->RSGetViewports(&vps, &viewport); 
```

我是否必须声明一个新变量才能传入第一个参数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T15:44:23.010

The function `RSGetViewports` uses the pointer to modify the value of the `int` so that is visible outside the function. In this way, you can think of that argument as being both an input and output argument. Of course, there must be an object available for it to modify. If you were to pass an integer literal, there would be no such object.

# android - 在运行时将 Action_Down 和 _up 的 onTouch 事件添加到按钮，以便在按下按钮时播放声音

> ID：15864173
> 
> 赞同：0
> 
> 时间：2013-04-07T15:35:07.400
> 
> 标签：android, button, media-player, ontouchlistener

我想在运行时创建一个按钮。按钮应在按下时开始播放声音，并在用户停止按下按钮时停止播放。

浏览网页和 Stack Overflow 我想出了以下代码：

```
 // Create a new button and place it into a table row
    LinearLayout lnr = (LinearLayout) findViewById(R.id.tableRow3);
    Button b1 = new Button(this);
    lnr.addView(b1);

    // Associate the event
    b1.setOnTouchListener(new OnTouchListener() {
        MediaPlayer mp = new MediaPlayer();
        @Override
        public boolean onTouch(View v, MotionEvent event) {
            switch(event.getAction() & MotionEvent.ACTION_MASK) {
            case MotionEvent.ACTION_DOWN:
                // Finger started pressing --> play sound in loop mode
                try {
                    FileInputStream fileInputStream = new FileInputStream( PATH );
                    mp.setDataSource(fileInputStream.getFD());
                    mp.prepare();
                    mp.setLooping(true);
                    mp.start();
                } catch (Exception e) {}
            case MotionEvent.ACTION_UP:
                // Finger released --> stop playback
                try {
                    mp.stop();
                } catch (Exception e) {} 
          }
          return true;
        }
      }); 
```

问题是我根本听不到声音。在我看来，`case MotionEvent.ACTION_UP:`是直接触发的。因此，直接停止播放。

为了验证这个假设，我移除`mp.stop();`并听到了无限循环的声音。很明显，一定是 ACTION_UP 事件搞砸了一切。但是如果我不松开手指/鼠标，如何触发 ACTION_UP 事件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T18:34:00.547

您应该在“case MotionEvent.ACTION_DOWN”的底部插入“ **break ”。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T18:56:58.890

正确的代码是：

```
 // Create a new button and place it into a table row
    LinearLayout lnr = (LinearLayout) findViewById(R.id.tableRow3);
    Button b1 = new Button(this);
    lnr.addView(b1);

    // Associate the event
    b1.setOnTouchListener(new OnTouchListener() {
        MediaPlayer mp = new MediaPlayer();
        @Override
        public boolean onTouch(View v, MotionEvent event) {
            switch(event.getAction() & MotionEvent.ACTION_MASK) {
            case MotionEvent.ACTION_DOWN:
                // Finger started pressing --> play sound in loop mode
                try {
                    FileInputStream fileInputStream = new FileInputStream( PATH );
                    mp.setDataSource(fileInputStream.getFD());
                    mp.prepare();
                    mp.setLooping(true);
                    mp.start();
                } catch (Exception e) {}
            break;
            case MotionEvent.ACTION_UP:
                // Finger released --> stop playback
                try {
                    mp.stop();
                    mp.reset();
                } catch (Exception e) {}
            break;
          }
          return true;
        }
      }); 
```

# c++ - 找不到文件：mainwindow.obj

> ID：15864177
> 
> 赞同：5
> 
> 时间：2013-04-07T15:35:26.247
> 
> 标签：c++, qt

1.  我创建了一个 GUI 应用程序 -> QMainWindow
2.  我在菜单 + 插槽中添加了 1 项。
3.  我创建了一个新项目-> QDialog
4.  我使用插槽方法尝试显示创建的对话框，但出现此错误：

    mainwindow.obj:-1: 错误: LNK2019: 无法解析的外部符号“public: __cdecl EditStudentDialog::EditStudentDialog(class QWidget *)” (??0EditStudentDialog@@QEAA@PEAVQWidget@@@Z) 在函数“private: void __cdecl”中引用MainWindow::on_actionNew_triggered(void)" (?on_actionNew_triggered@MainWindow@@AEAAXXZ)

    mainwindow.obj:-1：错误：LNK2019：无法解析的外部符号“public：virtual __cdecl EditStudentDialog::~EditStudentDialog(void)”（??1EditStudentDialog@@UEAA@XZ）在函数“private:void __cdecl MainWindow::on_actionNew_triggered”中引用(void)" (?on_actionNew_triggered@MainWindow@@AEAAXXZ)

这是主窗口：

```
#ifndef MAINWINDOW_H
#define MAINWINDOW_H

#include <QMainWindow>

namespace Ui {
class MainWindow;
}

class MainWindow : public QMainWindow
{
    Q_OBJECT

public:
    explicit MainWindow(QWidget *parent = 0);
    ~MainWindow();

private slots:
    void on_actionNew_triggered();

private:
    Ui::MainWindow *ui;
};

#endif // MAINWINDOW_H

#include "mainwindow.h"
#include "ui_mainwindow.h"
#include "editstudentdialog.h"

MainWindow::MainWindow(QWidget *parent) :
    QMainWindow(parent),
    ui(new Ui::MainWindow)
{
    ui->setupUi(this);
}

MainWindow::~MainWindow()
{
    delete ui;
}

void MainWindow::on_actionNew_triggered()
{
    EditStudentDialog editDialog;
    editDialog.setModal(true);
    editDialog.exec();
} 
```

这是对话框（只是一个空的，上面没有控件）：

```
#ifndef EDITSTUDENTDIALOG_H
#define EDITSTUDENTDIALOG_H

#include <QDialog>

namespace Ui {
class EditStudentDialog;
}

class EditStudentDialog : public QDialog
{
    Q_OBJECT

public:
    explicit EditStudentDialog(QWidget *parent = 0);
    ~EditStudentDialog();

private:
    Ui::EditStudentDialog *ui;
};

#endif // EDITSTUDENTDIALOG_H

#include "editstudentdialog.h"
#include "ui_editstudentdialog.h"

EditStudentDialog::EditStudentDialog(QWidget *parent) :
    QDialog(parent),
    ui(new Ui::EditStudentDialog)
{
    ui->setupUi(this);
}

EditStudentDialog::~EditStudentDialog()
{
    delete ui;
} 
```

我究竟做错了什么？

编辑：这是 .pro 文件

```
QT       += core gui

greaterThan(QT_MAJOR_VERSION, 4): QT += widgets

TARGET = GUI1
TEMPLATE = app

SOURCES += main.cpp\
        mainwindow.cpp \
    editstudentdialog.cpp

HEADERS  += mainwindow.h \
    editstudentdialog.h

FORMS    += mainwindow.ui \
    editstudentdialog.ui 
```

PS：我试图清理项目然后构建它，但仍然是同样的问题。

编辑 2：我将 Qt Creator 2.7 与 Qt 5.0.2 一起使用

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-05-09T15:03:19.847

### 解决方案

1.  右键单击项目>清理

2.  右键单击项目 > 运行 qmake

3.  右键单击项目>构建

4.  运行 - 第一次工作

### 为什么有效

这样做的原因是因为 Run qmake 会更新您的 Makefile。由于某种原因，当您对项目进行更改（例如添加或删除文件）时，qt 不会自动更新路径。运行 qmake 会强制 qt 更新项目的路径，使其能够找到 mainwindow.obj 文件。您可能只需运行 qmake 即可解决您的问题。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-07T17:00:33.123

似乎没有正确创建 editstudentdialog.obj 文件。尝试清理项目（Build->Clean all）并再次构建它。如果没有帮助，请检查是否将 editstudentdialog.cpp 添加到 .pro 文件中的 SOURCES 变量中。如果仍然没有任何反应，请提供 .pro 文件。

编辑：如下所述，您也可以尝试删除整个应用程序并重新创建它。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-04-16T22:01:29.133

我刚刚遇到了同样的问题。“全部构建”、“全部重建”、“全部清除”并没有帮助我解决“未解决的外部符号”问题。

但是，在我完全删除了构建目录（在我的情况下为 C:\dev\projects\qt\build-qt-gui-test-Desktop_Qt_5_0_2_MSVC2010_32bit-Debug）之后，重建就像一个魅力。

希望这对你有帮助，弗拉基米尔

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-07-10T19:56:38.797

我只是想为必须创建一个全新项目来解决问题的其他任何人（主要是菜鸟）添加这个答案：

我的头文件中有一个额外的插槽定义，它阻止了整个应用程序运行，并给了我指向一个不是问题的函数的错误。供参考。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-11-18T15:40:06.420

发生这种情况的另一个原因是 .pro 文件引用了不存在的内容。它发生在我身上，一旦我删除了这些引用，错误就消失了。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-03-17T14:34:05.597

在我的情况下，修复是在错误消息中提到的 QObject 派生类的开头添加一个 Q_OBJECT 宏。我不知道为什么我没有收到更具体地指出我丢失的宏的消息。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-03-13T00:35:38.843

发生这种情况的另一个原因是，如果它引用的函数在标头中声明为内联函数

# python - 从 MySQL 中获取价值并使用 if 循环它

> ID：15864181
> 
> 赞同：0
> 
> 时间：2013-04-07T15:35:34.620
> 
> 标签：python, mysql, python-2.7, constraints, unique-constraint

我有以下代码：

```
### Write the new userid to the sql database
# Open database connection
db = MySQLdb.connect("sql01.domain1.lan","webuserid","test","webuserid" )
# prepare a cursor object using cursor() method
cursor = db.cursor()

dub_userid = int(userid)
# Check for dublicate of current userid value
sql = "SELECT * FROM webuserid WHERE userid = '"+str(dub_userid)+"'"
try:
        # Execute the SQL command
        cursor.execute(sql)
        # Fetch all the rows in a list of lists.
        results = cursor.fetchone()
        data = cursor.fetchone()
except:
        print "SQL Error: Unable to fetch data"
if data == None:
        print "User doesn't exist - Creating"
else:
        sys.exit("User exists")

# Prepare SQL query to INSERT a record into the database.
sql = """INSERT INTO webuserid(userid)
         VALUES ('"""+userid+"""')"""
try:
        # Execute the SQL command
        cursor.execute(sql)
        # Commit your changes in the database
        db.commit()
except:
        #Rollback in case there is any error
        db.rollback()
# disconnect from server
db.close() 
```

变量 userid 的字符串值为 00001

我想要代码做的是连接到数据库（工作），将 userid 转换为 dub_userid 中的整数，并使用结果值查找重复项。

问题是，当我运行代码时，用户 ID 值为 00001 时会发生以下情况：

1.  用户 ID 1 已提交到数据库（应该如此，因为没有其他名为 1 的用户 ID
2.  下一次运行，用户 ID 1 再次提交到数据库（不应该，因为用户 ID 1 已经存在）
3.  第三次运行，脚本与“用户存在”消息一样存在。

我已经尝试过数据和数据 [1]，但似乎无法弄清楚出了什么问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T15:40:15.290

您真的*不想*使用字符串插值，而是使用 SQL 参数。接下来，您将获取*两*行；您真正需要做的就是测试是否有任何行：

```
sql = "SELECT * FROM webuserid WHERE userid = %s"

try:
    # Execute the SQL command
    cursor.execute(sql, (dub_userid,))
    found = cursor.rowcount
except:
    print "SQL Error: Unable to fetch data"
if not found:
    print "User doesn't exist - Creating"
else:
    sys.exit("User exists")

sql = """INSERT INTO webuserid(userid)
         VALUES (%s)"""
try:
    # Execute the SQL command
    cursor.execute(sql, (userid,))
    # Commit your changes in the database
    db.commit()
except:
    #Rollback in case there is any error
    db.rollback()
# disconnect from server
db.close() 
```

这可以进一步简化；您可以`db`用作上下文管理器来自动提交或在失败时回滚：

```
with db:
    cursor.execute(sql, (userid,))

db.close() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T15:40:02.683

这个问题可以而且应该通过向表中添加一个 UNIQUE 约束来解决，而不是通过编写 Python 代码。如果您尝试通过编写 Python 代码来强制执行约束，仍然有可能有人通过其他方法插入数据。如果添加约束，则约束由数据库本身强制执行。

```
ALTER TABLE tablename ADD UNIQUE indexname (userid) 
```

添加此约束后，`INSERT`如果违反约束，语句将引发异常。您可以将其包装`cursor.execute`在 a`try...except`中以处理违规行为。

如果您的表已经有违反约束的行，那么

```
ALTER IGNORE TABLE tablename ADD UNIQUE indexname (userid) 
```

将添加约束**并**删除所有违反约束的行（为每个唯一的 useid 保留一行）。

# django - Openshift：如何获取我的新数据集？

> ID：15864182
> 
> 赞同：0
> 
> 时间：2013-04-07T15:35:36.793
> 
> 标签：django, openshift

我正在尝试用 OpenShift 做点什么。

我添加了models.py

```
from django.db import models

class Person(models.Model):
    name = models.CharField(max_length=50)
    email = models.CharField(max_length=50) 
```

和 admin.py

```
from django.contrib import admin
from models import Person

class PersonAdmin(admin.ModelAdmin):
    pass

admin.site.register(Person, PersonAdmin) 
```

现在，由于 django 文档，我应该将我的应用程序添加到 INSTALLED_APPS 并运行`syncdb`. 但是我没有任何类型的 django 应用程序可以写在那里:) （OpenShift 文件夹结构与默认的 django 有点不同。）

我在里面有 settings.py、manage.py 和所有其他 .py 文件`..openshift/app/wsgi/openshift`。我应该怎么办？:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T19:04:38.727

我们在这里发布了一个 Django 示例应用程序： [https](https://github.com/openshift/django-example)
://github.com/openshift/django-example 你能看一下它是否有帮助？此处概述了具体步骤： [https ://github.com/openshift/django-example/blob/master/.openshift/action_hooks/deploy](https://github.com/openshift/django-example/blob/master/.openshift/action_hooks/deploy)

# ios - 如何使单行 TextView 仅水平滚动

> ID：15864188
> 
> 赞同：1
> 
> 时间：2013-04-07T15:36:25.643
> 
> 标签：ios, objective-c, uitextview

我有一个单行的小 TextView。当该行充满文本时，我希望此 TextView 开始水平滚动而不是垂直滚动。

要对此进行拍照，就像在 Apple 的邮件应用程序中填写“收件人：”字段一样。

我尝试了不同的方式，但没有人工作：/

```
CGSize size = textView.contentSize;
size.height = CGRectGetHeight(textView.frame);
size.width = 300;
textView.contentSize = size;
textView.alwaysBounceVertical = NO; 
```

任何帮助将不胜感激，干杯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-07T16:23:56.987

看来您正在寻找[`UITextField`](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITextField_Class/Reference/UITextField.html)与您描述的完全一样的行为。

# mysql - PDO foreach 从错误的列中打印出单个条目

> ID：15864190
> 
> 赞同：0
> 
> 时间：2013-04-07T15:36:29.013
> 
> 标签：mysql, pdo, foreach, fetchall

抱歉标题尴尬，我有一个查询应该返回所有`1`在`blog`列中具有值的评论。

该表由三列组成：

`CommentID` `Comments` `Blog`

目前，查询返回所有`blog`值为的评论，`1`但它也打印出`CommentID`最近输入的评论以及值`1`（`1`即使`WHERE`值从 更改为`1`，该值仍会被打印`2`）。

这是我的查询：

```
 public function getComments($blog) {
    $conn = $this->dbConnection->Connection();
    $sth = $conn->prepare("SELECT `Comment` FROM comments WHERE Blog = ?");
    $sth->bindValue (1, $blog);
    $sth->execute();
    $result = $sth->fetchAll();
    foreach ($result as $row) {
        print $row['Comment'] . "\n";
    }
    $conn = $this->dbConnection->closeConnection();
  } 
```

我正在寻找它只是为了打印出 的内容`Comment WHERE Blog = 1`，是什么导致了我的问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T15:44:27.273

您的 PHP 文件中还有一些其他代码会打印额外的数字。看看这个。您在此处发布的代码仅用于打印 Comment 字段（尽管它也可能包含一些额外的数字）

# oop - 从外部系统清理数据的逻辑放置在哪里

> ID：15864195
> 
> 赞同：0
> 
> 时间：2013-04-07T15:36:50.207
> 
> 标签：oop, domain-driven-design

**系统描述：** 系统基本上处理来自外部系统的消息。

**我对系统建模的方式是：** 1\. 我创建了一个反腐败层，用于接收来自外部系统的消息（快速消息）。ACL 还负责清理数据，最后，ACL 将消息发送到域服务进行处理。2\. 我有实际的域，可以处理这些消息，进行一些计算等。

我在弄清楚将“清理”快速消息中的数据的逻辑放在哪里时遇到问题。

**Swift 消息：** 每个 Swift 消息只是一个包含各种字段及其各自值的文本 BLOB

```
{
    :field1://value 1 ***
    :field2://value2!!
    :unwantedField3://value3
} 
```

同样，我有一个名为 Message 的实体，其中包含一个字段列表。我面临的问题是将文本的 BLOB 转换为消息实体。这是因为每个字段的提取方式都需要与下一个不同。所以在上面的例子中，

1.  field1 的值必须是值 1，没有***，
2.  field2 的值必须是值 2，没有 !!
3.  字段 3 必须被忽略

总共有 4 种不同的 fieldType。***所以我的问题是，我应该把清理字段的逻辑放在哪里***，

1.  我是否将其放在具有 if 语句以不同方式清理每个字段的外部“服务”中？（贫血模型）
2.  我是否将清理逻辑放在字段值对象本身中，所以每个字段都知道如何清理自己（问题是字段对象驻留在域中，我认为我不应该保留逻辑来清理域中的数据，域只处理干净的数据）
3.  我是否在 ACL 中创建特殊类来进行清理（从文本 BLOB 中提取字段）

并且所有这些逻辑都位于 ACL 中还是移动到域中。我感觉清理外部数据的逻辑不能放在域中，因为它没有业务。

```
public class Message: Entity<long>
{
    public IList<Field> Fields{get; set;}
}

public class Field: ValueObject
{
    string Tag {get; set;} // this is what it looks for in the swift message BLOB of text from the external system
    string Value {get;set;}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T15:42:08.670

ACL 的目的是使数据完全适应域。它应该翻译/清理数据，因此域不需要知道其他系统的详细信息。因此，ACL 是清理的正确位置。但是，如果字段非常复杂，则可以在 ACL 中使用多个适配器类来处理字段特定的逻辑。只需确保数据在传递到您的域之前已完全翻译。

# forms - GWT DataGrid 选择处理程序

> ID：15864204
> 
> 赞同：1
> 
> 时间：2013-04-07T15:37:24.700
> 
> 标签：forms, gwt, datagrid, selection, handler

我有一个 DataGrid，我想在单击它时获取选定的行：我想获取它的内容和它的索引。I have some sort of a form under the DataGrid, and when one row is selected, the form will be filled with the data in the selected row above! 然后，当我单击一个按钮时，应显示一个对话框，其中包含所选行中的数据！

我已经搜索过，但没有关于如何做到这一点的明确解释。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T16:35:42.567

在[Gwt DataGrid 的 API 中](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/user/cellview/client/DataGrid.html)，有一个关于如何使用 GWT DataGrid 和`selection model`.

在那个例子中：

```
// Add a selection model to handle user selection. 

final SingleSelectionModel<Contact> selectionModel =
                                           new SingleSelectionModel<Contact();
table.setSelectionModel(selectionModel); 
selectionModel. addSelectionChangeHandler(new SelectionChangeEvent.Handler() {
 public void onSelectionChange( SelectionChangeEvent event) { 
 Contact selected = selectionModel. getSelectedObject();
 if (selected != null) {
 Window.alert("You selected: " + selected.name); }
 } }); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-07T16:54:34.180

```
DataGrid table = new DataGrid();

final SingleSelectionModel<Contact> selectionModel =
                                           new SingleSelectionModel<Contact>();
table.setSelectionModel(selectionModel); 

Button clickBtn = new Button("Click Button");
clickBtn.addClickHandler(new ClickHandler(){
Contact selectedContact = ((SingleSelectionModel)table.getSelectionModel()).getSelectedRecord();
setDataInForm(selectedContact);
}); 
```

# mysql - 每天获得最多赞的行

> ID：15864205
> 
> 赞同：0
> 
> 时间：2013-04-07T15:37:27.067
> 
> 标签：mysql, sql, join, greatest-n-per-group

我遇到了我还不能解决的问题。看看下表。

```
+---+------------+-------------------------------------+
|id |   likes    |   fb_likes    |     created_time    |
+---+------------+-------------------------------------+
|10 |    0       |      0        | 2013-04-07 13:53:36 |
| 9 |    3       |      2        | 2013-04-07 13:17:18 |
| 8 |    2       |      1        | 2013-04-06 21:49:30 |
| 7 |    2       |      0        | 2013-04-06 20:25:24 |
| 6 |    6       |      5        | 2013-04-06 18:52:27 |
| 5 |    3       |      0        | 2013-04-05 21:19:34 |
| 4 |    5       |      2        | 2013-04-05 19:09:13 |
| 3 |    9       |     10        | 2013-04-03 14:18:56 |
| 2 |    0       |      1        | 2013-04-02 14:28:36 |
| 1 |    0       |      0        | 2013-04-02 08:39:32 |
+---+------------+-------------------------------------+ 
```

我想选择每天获得最多赞的 ID。我看过很多想要做类似事情的帖子，但还没有找到解决方案。

我失败的尝试（这选择了正确的喜欢，但错误的 id）：

```
SELECT id, MAX(likes+fb_likes) as Tlikes, created_time FROM table GROUP BY DAY(created_time); 
```

我也尝试过这样的事情：http: [//dev.mysql.com/doc/refman/5.0/en/example-maximum-column-group-row.html](http://dev.mysql.com/doc/refman/5.0/en/example-maximum-column-group-row.html)

任何帮助，将不胜感激

**更新** 我忘了添加 fb_likes 列。我多么愚蠢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-07T15:46:59.393

```
SELECT  a.*
FROM    TableName a
        INNER JOIN
        (
            SELECT  DATE(created_time) date, MAX(likes) max_likes
            FROM    TableName
            GROUP   BY DATE(created_time)
        ) b ON  DATE(a.Created_Time) = b.date AND
                a.likes = b.max_Likes 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/b75e9/1)

如果您只想显示至少 1 票的记录，则需要`WHERE`在外部选择中添加子句，例如

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/b75e9/2)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T15:46:05.407

```
SELECT id, likes, day(created_time)
FROM Likes
WHERE likes =
(SELECT MAX(maxLikes.likes) 
 FROM Likes maxLikes 
 WHERE day(maxLikes.created_time) = day(Likes.created_time)
); 
```

[http://sqlfiddle.com/#!2/3e35f/8](http://sqlfiddle.com/#!2/3e35f/8)

# macros - Common Lisp 宏参数不匹配尽管 &rest / &body

> ID：15864208
> 
> 赞同：2
> 
> 时间：2013-04-07T15:37:35.247
> 
> 标签：macros, lisp, common-lisp, sbcl, practical-common-lisp

我一直在阅读 Peter Seibel 的书[Practical Common Lisp](http://www.gigamonkeys.com/book/)，按照书中出现的顺序从网上提供的书中代码拼凑项目，到目前为止，我有一个文件可以依次编译和加载每一章的代码，并且这是我遇到问题的地方：到目前为止，当我为项目加载 FASL 时，我在 ID3v2 部分收到如下警告。

我不明白参数编号冲突出现在哪里。 `UNSIGNED-INTEGER`似乎得到了它的两个关键字参数。此外，在我看来，`DEFINE-BINARY-TYPE`宏将使用`&rest`/接受任意数量的参数`&body`。我想知道您是否有任何提示或建议。一些相关的输出和代码如下。任何和所有的帮助表示赞赏。

提前致谢，

```
; file: .../cl-playlist/id3v2.lisp
; in: DEFINE-BINARY-TYPE U1
;     (BINARY-DATA:DEFINE-BINARY-TYPE ID3V2::U1
;         NIL
;       (ID3V2::UNSIGNED-INTEGER :BYTES 1 :BITS-PER-BYTE 8))
; ...
; ==>
;   (BINARY-DATA:READ-VALUE 'ID3V2::UNSIGNED-INTEGER #:STREAM :BYTES 1
;                           :BITS-PER-BYTE 8)
; 
; caught STYLE-WARNING:
;   The function was called with six arguments, but wants exactly two. 
```

“id3v2.lisp”中的违规函数如下所示，

```
(define-binary-type u1 () (unsigned-integer :bytes 1 :bits-per-byte 8)) 
```

使用

```
(define-binary-type unsigned-integer (bytes bits-per-byte)
  (:reader (in)
       (loop with value = 0
          for low-bit 
          downfrom (* bits-per-byte (1- bytes)) to 0 by bits-per-byte do
        (setf (ldb (byte bits-per-byte low-bit) value) (read-byte in))
          finally (return value)))
  (:writer (out value)
       (loop for low-bit 
          downfrom (* bits-per-byte (1- bytes)) to 0 by bits-per-byte
          do (write-byte (ldb (byte bits-per-byte low-bit) value) out)))) 
```

来自“binary-data.lisp”中的以下内容

```
(defmacro define-binary-type (name (&rest args) &body spec)
; (defmacro define-binary-type (name &rest args &body spec)
  (with-gensyms (type stream value)
  `(progn
    (defmethod read-value ((,type (eql ',name)) ,stream &key ,@args)
      (declare (ignorable ,@args))
      ,(type-reader-body spec stream))
    (defmethod write-value ((,type (eql ',name)) ,stream ,value &key ,@args)
      (declare (ignorable ,@args))
      ,(type-writer-body spec stream value))))) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T16:53:23.390

您的代码存在的问题是您使用错误数量的参数调用函数。该函数已使用较少元素的参数列表创建。

看到这个：

```
CL-USER> (defmethod foo ((a string) (b string) &key) (list a b))
STYLE-WARNING:
   Implicitly creating new generic function COMMON-LISP-USER::FOO.
#<STANDARD-METHOD FOO (STRING STRING) {1005603C53}> 
```

上面说`DEFMETHOD`也创建了相应的泛型函数，因为没有。没关系。我们也可以`DEFGENERIC`用来声明泛型函数及其参数。这里 SBCL 从它看到的方法中推断出来。

该方法正好有两个参数。没有关键字参数。让我们从另一个函数中调用它，并带有一些据说是关键字参数。

```
CL-USER> (defun bar (baz) (foo baz baz :k1 10))
; in: DEFUN BAR
;     (FOO BAZ BAZ :K1 10)
;
; caught STYLE-WARNING:
;   The function was called with four arguments, but wants exactly two.
;
; compilation unit finished
;   caught 1 STYLE-WARNING condition
BAR
CL-USER> 
```

现在 SBCL 告诉我们，我们用四个参数调用泛型函数，即使泛型函数只有两个参数。

在您的情况下，声明`U1`描述了一个带有两个参数的函数。没有关键字参数`READ-DATA-VALUE`。

现在有几种可能的方法来处理这个问题：

1.  使用 a`DEFGENERIC`来定义具有您真正想要使用的参数列表的通用函数`READ-DATA-VALUE`，并确保您的所有方法都遵循它。

2.  将所有参数放在所有方法中。在不使用它们的方法中，将它们声明为可忽略。

3.  允许其他关键字参数[&allow-other-keys](http://www.lispworks.com/documentation/HyperSpec/Body/03_db.htm)允许不同的方法具有不同的关键字参数集。最好也以`DEFGENERIC`表格形式进行。

然后：

```
CL-USER> (defmethod foo1 ((a string) (b string) &key &allow-other-keys)
           (list a b))
STYLE-WARNING:                                                                                                                                                                                   
   Implicitly creating new generic function COMMON-LISP-USER::FOO1\.                                                                                                                              
#<STANDARD-METHOD FOO1 (STRING STRING) {10058AC193}>                                                                                                                                             
CL-USER> (defun bar1 (baz) (foo1 baz baz :k1 10))
BAR1 
```

您可以看到 SBCL 不再抱怨并假定参数是关键字参数。

缺点是 Lisp 编译器现在假定您可以为这个泛型函数使用任意关键字参数，并且如果您传递了错误的参数，则无法告诉您（也不是在编译时）。

# image - 通过 SIP 发送消息

> ID：15864211
> 
> 赞同：0
> 
> 时间：2013-04-07T15:37:40.913
> 
> 标签：image, message, sip, voip

我可以以纯文本格式发送 SIP 消息，并且我的 SIP 服务器（voipswitch）正在接受它。当我将 SIP 消息作为图像发送到同一台服务器时。我在这里不可接受。我的服务器是否需要支持 MSRTP 才能通过 SIP 接受图像？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T08:51:22.270

SIP 使用[提议/应答模型](https://www.rfc-editor.org/rfc/rfc3264)，其中提议和应答寻求建立一组公共媒体功能。A`488 Not Acceptable Here`表示没有一组通用媒体功能。

所以是的，如果您希望在会话中使用 MSRP ，您的 SIP 服务器必须支持[MSRP 。](https://www.rfc-editor.org/rfc/rfc4975)

# ruby-on-rails - Rails：无法在控制器创建操作中访问父 ID

> ID：15864219
> 
> 赞同：1
> 
> 时间：2013-04-07T15:38:49.920
> 
> 标签：ruby-on-rails

我有一个我一直在开发的 Rails 应用程序。我已经设置了用户、目录和产品。

用户有很多目录。目录有许多产品。

在 Products 控制器中，我正在尝试创建一个产品。这是我目前拥有的功能：

```
def create
  @product = @catalogue.products.build(params[:product])

  if @product.save
    flash[:success] = "Product created!"
    redirect_to @catalogue
  else
    flash[:error] = "Save error: Product not created."
    render 'static_pages/home'
  end
end 
```

我有一个使用 before_filter 设置@catalogue 的函数：

```
 def get_catalogue 
    @catalogue = Catalogue.find_by_id(:catalogue_id)
  end 
```

此功能似乎无法正常工作，因为我得到的错误是：

ProductsController#create 中的 NoMethodError

nil:NilClass 的未定义方法“产品”

我假设产品 catalogue_id 将在执行新操作后设置。

感谢您提前提供任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T15:43:24.353

I think the problem is in the `before_filter`. I think it should use `params[:catalogue_id]` and not a symbol.

```
def get_catalogue 
  @catalogue = Catalogue.find_by_id(params[:catalogue_id])
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T12:38:20.947

为什么不使用嵌套路由？

> 资源：目录做
> 
> > 资源：产品
> 
> 结尾

然后你可以使用

> 目录产品路径（@catalogue）

这将允许您在控制器中访问 params[:catalogue_id]。

# asp.net - 给我的 ASP 问题，错误：过程或函数 uspPatientUpdate 指定了太多参数

> ID：15864220
> 
> 赞同：-1
> 
> 时间：2013-04-07T15:38:51.293
> 
> 标签：asp.net, sql-server, stored-procedures

发生了什么：我正在尝试使用存储过程更新 gridview 表中的患者表。

错误：

> “DropDownList2”有一个无效的 SelectedValue，因为它不存在于项目列表中。参数名称：值

这是我的程序：

```
ALTER PROCEDURE dbo.uspPatientUpdate
    @ID int,
    @OHIP char(10),
    @FirstName nvarchar(20),
    @LastName nvarchar(40),
    @DOB date,
    @VisitsPerYear int,
    @DoctorID int
AS
BEGIN
    SET NOCOUNT OFF
    UPDATE Patient
    SET OHIP = @OHIP,
      FirstName = @FirstName, 
      LastName = @LastName,
      DOB = @DOB,
      VisitsPerYear = @VisitsPerYear,
      DoctorID = @DoctorID
    WHERE ID = @ID 
END 
```

这是我的asp：

```
<%@ Page Language="C#" AutoEventWireup="true" CodeFile="MedicalOffice.aspx.cs" Inherits="MedicalOffice" %>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>

    <link href="StyleSheet.css" rel="stylesheet" />
</head>
<body>
    <form id="form1" runat="server">
    <div>
    <h1>Maintain Patients</h1>
        <p>Select Patient By Doctor:<asp:DropDownList ID="DropDownList1" runat="server" AutoPostBack="True" DataSourceID="sdDoctorList" DataTextField="Doctor" DataValueField="ID">
            <asp:ListItem>1</asp:ListItem>
            <asp:ListItem>2</asp:ListItem>
            <asp:ListItem>3</asp:ListItem>
            </asp:DropDownList>
&nbsp;<asp:GridView ID="GridView1" runat="server" AllowSorting="True" AutoGenerateColumns="False" BackColor="White" BorderColor="#336666" BorderStyle="Double" BorderWidth="3px" CellPadding="4" DataSourceID="sdPatient" GridLines="Horizontal">
                <Columns>
                    <asp:CommandField ShowDeleteButton="True" ShowEditButton="True" />
                    <asp:TemplateField HeaderText="OHIP" SortExpression="OHIP">
                        <EditItemTemplate>
                            <asp:TextBox ID="TextBox1" runat="server" Text='<%# Bind("OHIP") %>'></asp:TextBox>
                        </EditItemTemplate>
                        <ItemTemplate>
                            <asp:Label ID="Label1" runat="server" Text='<%# Bind("OHIP") %>'></asp:Label>
                        </ItemTemplate>
                    </asp:TemplateField>
                    <asp:TemplateField HeaderText="First Name" SortExpression="FirstName">
                        <EditItemTemplate>
                            <asp:TextBox ID="TextBox2" runat="server" Text='<%# Bind("FirstName") %>'></asp:TextBox>
                        </EditItemTemplate>
                        <ItemTemplate>
                            <asp:Label ID="Label2" runat="server" Text='<%# Bind("FirstName") %>'></asp:Label>
                        </ItemTemplate>
                    </asp:TemplateField>
                    <asp:TemplateField HeaderText="Last Name" SortExpression="LastName">
                        <EditItemTemplate>
                            <asp:TextBox ID="TextBox3" runat="server" Text='<%# Bind("LastName") %>'></asp:TextBox>
                        </EditItemTemplate>
                        <ItemTemplate>
                            <asp:Label ID="Label3" runat="server" Text='<%# Bind("LastName") %>'></asp:Label>
                        </ItemTemplate>
                    </asp:TemplateField>
                    <asp:TemplateField HeaderText="DOB" SortExpression="DOB">
                        <EditItemTemplate>
                            <asp:TextBox ID="TextBox4" runat="server" Text='<%# Bind("DOB") %>'></asp:TextBox>
                        </EditItemTemplate>
                        <ItemTemplate>
                            <asp:Label ID="Label4" runat="server" Text='<%# Bind("DOB") %>'></asp:Label>
                        </ItemTemplate>
                    </asp:TemplateField>
                    <asp:TemplateField HeaderText="Visits Per Year" SortExpression="VisitsPerYear">
                        <EditItemTemplate>
                            <asp:TextBox ID="TextBox5" runat="server" Text='<%# Bind("VisitsPerYear") %>'></asp:TextBox>
                        </EditItemTemplate>
                        <ItemTemplate>
                            <asp:Label ID="Label5" runat="server" Text='<%# Bind("VisitsPerYear") %>'></asp:Label>
                        </ItemTemplate>
                    </asp:TemplateField>
                    <asp:TemplateField HeaderText="Doctor" SortExpression="Doctor">
                        <EditItemTemplate>
                            #<asp:DropDownList ID="DropDownList2" runat="server" DataSourceID="sdDoctorList" DataTextField="Doctor" DataValueField="ID">#
                            </asp:DropDownList>
                        </EditItemTemplate>
                        <ItemTemplate>
                            <asp:Label ID="Label6" runat="server" Text='<%# Bind("Doctor") %>'></asp:Label>
                        </ItemTemplate>
                    </asp:TemplateField>
                </Columns>
                <FooterStyle BackColor="White" ForeColor="#333333" />
                <HeaderStyle BackColor="#336666" Font-Bold="True" ForeColor="White" />
                <PagerStyle BackColor="#336666" ForeColor="White" HorizontalAlign="Center" />
                <RowStyle BackColor="White" ForeColor="#333333" />
                <SelectedRowStyle BackColor="#339966" Font-Bold="True" ForeColor="White" />
                <SortedAscendingCellStyle BackColor="#F7F7F7" />
                <SortedAscendingHeaderStyle BackColor="#487575" />
                <SortedDescendingCellStyle BackColor="#E5E5E5" />
                <SortedDescendingHeaderStyle BackColor="#275353" />
            </asp:GridView>
            <asp:DetailsView ID="DetailsView1" runat="server" AutoGenerateRows="False" BackColor="White" BorderColor="#336666" BorderStyle="Double" BorderWidth="3px" CellPadding="4" GridLines="Horizontal" HeaderText="Insert Patient" Height="50px" Width="125px">
                <EditRowStyle BackColor="#339966" Font-Bold="True" ForeColor="White" />
                <Fields>
                    <asp:TemplateField HeaderText="OHIP" SortExpression="OHIP">
                        <EditItemTemplate>
                            <asp:TextBox ID="TextBox1" runat="server" Text='<%# Bind("OHIP") %>'></asp:TextBox>
                        </EditItemTemplate>
                        <InsertItemTemplate>
                            <asp:TextBox ID="TextBox1" runat="server" Text='<%# Bind("OHIP") %>'></asp:TextBox>
                        </InsertItemTemplate>
                        <ItemTemplate>
                            <asp:Label ID="Label1" runat="server" Text='<%# Bind("OHIP") %>'></asp:Label>
                        </ItemTemplate>
                    </asp:TemplateField>
                    <asp:TemplateField HeaderText="FirstName" SortExpression="FirstName">
                        <EditItemTemplate>
                            <asp:TextBox ID="TextBox2" runat="server" Text='<%# Bind("FirstName") %>'></asp:TextBox>
                        </EditItemTemplate>
                        <InsertItemTemplate>
                            <asp:TextBox ID="TextBox2" runat="server" Text='<%# Bind("FirstName") %>'></asp:TextBox>
                        </InsertItemTemplate>
                        <ItemTemplate>
                            <asp:Label ID="Label2" runat="server" Text='<%# Bind("FirstName") %>'></asp:Label>
                        </ItemTemplate>
                    </asp:TemplateField>
                    <asp:TemplateField HeaderText="LastName" SortExpression="LastName">
                        <EditItemTemplate>
                            <asp:TextBox ID="TextBox3" runat="server" Text='<%# Bind("LastName") %>'></asp:TextBox>
                        </EditItemTemplate>
                        <InsertItemTemplate>
                            <asp:TextBox ID="TextBox3" runat="server" Text='<%# Bind("LastName") %>'></asp:TextBox>
                        </InsertItemTemplate>
                        <ItemTemplate>
                            <asp:Label ID="Label3" runat="server" Text='<%# Bind("LastName") %>'></asp:Label>
                        </ItemTemplate>
                    </asp:TemplateField>
                    <asp:TemplateField HeaderText="DOB" SortExpression="DOB">
                        <EditItemTemplate>
                            <asp:TextBox ID="TextBox4" runat="server" Text='<%# Bind("DOB") %>'></asp:TextBox>
                        </EditItemTemplate>
                        <InsertItemTemplate>
                            <asp:TextBox ID="TextBox4" runat="server" Text='<%# Bind("DOB") %>'></asp:TextBox>
                        </InsertItemTemplate>
                        <ItemTemplate>
                            <asp:Label ID="Label4" runat="server" Text='<%# Bind("DOB") %>'></asp:Label>
                        </ItemTemplate>
                    </asp:TemplateField>
                    <asp:TemplateField HeaderText="VisitsPerYear" SortExpression="VisitsPerYear">
                        <EditItemTemplate>
                            <asp:TextBox ID="TextBox5" runat="server" Text='<%# Bind("VisitsPerYear") %>'></asp:TextBox>
                        </EditItemTemplate>
                        <InsertItemTemplate>
                            <asp:TextBox ID="TextBox5" runat="server" Text='<%# Bind("VisitsPerYear") %>'></asp:TextBox>
                        </InsertItemTemplate>
                        <ItemTemplate>
                            <asp:Label ID="Label5" runat="server" Text='<%# Bind("VisitsPerYear") %>'></asp:Label>
                        </ItemTemplate>
                    </asp:TemplateField>
                    <asp:TemplateField HeaderText="Doctor" SortExpression="Doctor">
                        <EditItemTemplate>
                            <asp:Label ID="Label1" runat="server" Text='<%# Eval("Doctor") %>'></asp:Label>
                        </EditItemTemplate>
                        <InsertItemTemplate>
                            <asp:DropDownList ID="DropDownList3" runat="server" DataSourceID="sdDoctorList" DataTextField="Doctor" DataValueField="ID" SelectedValue='<%# Bind("Doctor") %>'>
                            </asp:DropDownList>
                        </InsertItemTemplate>
                        <ItemTemplate>
                            <asp:Label ID="Label6" runat="server" Text='<%# Bind("Doctor") %>'></asp:Label>
                        </ItemTemplate>
                    </asp:TemplateField>
                    <asp:CommandField ShowInsertButton="True" />
                </Fields>
                <FooterStyle BackColor="White" ForeColor="#333333" />
                <HeaderStyle BackColor="#336666" Font-Bold="True" ForeColor="White" />
                <PagerStyle BackColor="#336666" ForeColor="White" HorizontalAlign="Center" />
                <RowStyle BackColor="White" ForeColor="#333333" />
            </asp:DetailsView>
            <asp:SqlDataSource ID="sdDoctorList" runat="server" ConnectionString="<%$ ConnectionStrings:MedicalOfficeConnectionString %>" SelectCommand="uspDoctorList" SelectCommandType="StoredProcedure"></asp:SqlDataSource>
        </p>

    </div>
        <asp:SqlDataSource ID="sdPatient" runat="server" ConnectionString="<%$ ConnectionStrings:MedicalOfficeConnectionString %>" DeleteCommand="usp_PatientDelete" InsertCommand="uspPatientInsert" SelectCommand="uspPatientSelectByIDOrSelectAll" UpdateCommand="uspPatientUpdate" SelectCommandType="StoredProcedure" DeleteCommandType="StoredProcedure" InsertCommandType="StoredProcedure" UpdateCommandType="StoredProcedure">
            <DeleteParameters>
                <asp:Parameter Name="ID" Type="Int32" />
            </DeleteParameters>
            <InsertParameters>
                <asp:Parameter Name="OHIP" Type="String" />
                <asp:Parameter Name="FirstName" Type="String" />
                <asp:Parameter Name="LastName" Type="String" />
                <asp:Parameter DbType="Date" Name="DOB" />
                <asp:Parameter Name="VisitsPerYear" Type="Int32" />
                <asp:Parameter Name="DoctorID" Type="Int32" />
            </InsertParameters>
            <SelectParameters>
                <asp:ControlParameter ControlID="DropDownList1" Name="doctorID" PropertyName="SelectedValue" Type="Int32" />
            </SelectParameters>
            <UpdateParameters>
                <asp:Parameter Name="ID" Type="Int32" />
                <asp:Parameter Name="OHIP" Type="String" />
                <asp:Parameter Name="FirstName" Type="String" />
                <asp:Parameter Name="LastName" Type="String" />
                <asp:Parameter DbType="Date" Name="DOB" />
                <asp:Parameter Name="VisitsPerYear" Type="Int32" />
                <asp:Parameter Name="DoctorID" Type="Int32" />
<asp:Parameter Name="Timestamp" Type="Object"></asp:Parameter>
            </UpdateParameters>
        </asp:SqlDataSource>
        <asp:ValidationSummary ID="ValidationSummary1" runat="server" HeaderText="Please fix the following:" />
    </form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T15:48:58.860

`uspPatientUpdate`缺少`TimeStamp`参数：

```
<UpdateParameters>
  ...
  <asp:Parameter Name="Timestamp" Type="Object"></asp:Parameter>
</UpdateParameters> 
```

或者，也许它没有丢失它，您根本不应该在标记中指定它。

# android - 如何以稳定准确的方式读取 Android 加速度计值？

> ID：15864223
> 
> 赞同：4
> 
> 时间：2013-04-07T15:39:05.023
> 
> 标签：android, accelerometer, android-sensors, tilt-sensor

在我的项目中，我试图使用通过 Android 设备的加速度计获得的数据来控制汽车。（左，右，前进，后退）。即使我设法从加速度计读取值，即使设备处于稳定位置，读数也会经常变化。有人可以为我提供更好的方法吗？

以下是我使用过的代码

```
import android.content.Context;
import android.hardware.Sensor;
import android.hardware.SensorEvent;
import android.hardware.SensorEventListener;
import android.hardware.SensorManager;

public class AccelerometerService {
    private static SensorManager sensorManager;
    private static SensorEventListener sensorEventListener;
    private static boolean started = false;

    private static float[] accelerometer = new float[3];
    private static float[] magneticField = new float[3];

    private static float[] rotationMatrix = new float[9];
    private static float[] inclinationMatrix = new float[9];
    private static float[] attitude = new float[3];

    private final static double RAD2DEG = 180/Math.PI;

    private static int initialAzimuth = 0;
    private static int initialPitch = 0;
    private static int initialRoll = 0;

    private static int[] attitudeInDegrees = new int[3];

    public static void start(final Context applicationContext) {
        if(started) {
            return;
        }

        sensorManager = (SensorManager) applicationContext
                .getSystemService(Context.SENSOR_SERVICE);

        sensorEventListener = new SensorEventListener() {

            @Override
            public void onSensorChanged(SensorEvent event) {

                int type = event.sensor.getType();
                if(type == Sensor.TYPE_MAGNETIC_FIELD) {
                    magneticField = event.values.clone();
                } 
                if(type == Sensor.TYPE_ACCELEROMETER) {
                    accelerometer = event.values.clone();
                }

                SensorManager.getRotationMatrix(rotationMatrix, inclinationMatrix, accelerometer, magneticField);
                SensorManager.getOrientation(rotationMatrix, attitude);

                attitudeInDegrees[0] =  (int) Math.round(attitude[0] * RAD2DEG);    //azimuth
                attitudeInDegrees[1] = (int) Math.round(attitude[1] * RAD2DEG);     //pitch
                attitudeInDegrees[2] = (int) Math.round(attitude[2] * RAD2DEG);     //roll
            }

            @Override
            public void onAccuracyChanged(Sensor sensor, int accuracy) {

            }
        };
        sensorManager.registerListener(sensorEventListener,
                sensorManager.getDefaultSensor(Sensor.TYPE_ACCELEROMETER),
                SensorManager.SENSOR_DELAY_UI);
        sensorManager.registerListener(sensorEventListener,
                sensorManager.getDefaultSensor(Sensor.TYPE_MAGNETIC_FIELD),
                SensorManager.SENSOR_DELAY_UI);

        started = true;
    }

    public static boolean getStarted() {
        return started;
    }

    public static void stop() {
        if(started) {
        sensorManager.unregisterListener(sensorEventListener);
        started = false;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2014-07-06T21:38:03.717

老问题，但我在这里回答是为了其他找到这个问题的人。

首先，遵循@andrew-morton 链接正是我所需要的，但它是伪代码，所以这里是适用于 Android 的 Java！

第二：如果可以（您的最低 API Lvl 为 9 或更高），只需使用 Sensor.TYPE_GRAVITY。因为它已经被平滑了。如果您需要支持较旧的 API Lvls（就像我必须做的那样），这段代码应该可以解决问题！

最后：这个代码片段在我使用它的基础上做了一些修改，如果你想自己使用它，你需要为 Vector3 重力创建一个吸气剂。

注意：我发现 5 (MAX_SAMPLE_SIZE) 的滚动平均值非常平滑。10 更加流畅，但您开始注意到滞后。

```
import android.hardware.Sensor;
import android.hardware.SensorEvent;
import android.hardware.SensorEventListener;
import android.hardware.SensorManager;  
import java.util.ArrayList;
import java.util.List;

/**
 * Created by andy on 6/14/14.
 */
public class AndroidGravityUpdate implements SensorEventListener {
    private SensorManager sensorManager;
    Vector3 gravity;
    List<Float>[] rollingAverage = new List[3];

    private static final int MAX_SAMPLE_SIZE = 5;

    AndroidGravityUpdate( SensorManager sensorManager ) {
        this.gravity = new Vector3();
        this.sensorManager = sensorManager;

        if(sensorManager.getSensorList(Sensor.TYPE_GRAVITY).size() > 0){
            sensorManager.registerListener(
                    this,
                    sensorManager.getDefaultSensor(Sensor.TYPE_GRAVITY),
                    SensorManager.SENSOR_DELAY_GAME
            );
        } else if( sensorManager.getSensorList(Sensor.TYPE_ACCELEROMETER).size() > 0) {
            rollingAverage[0] = new ArrayList<Float>();
            rollingAverage[1] = new ArrayList<Float>();
            rollingAverage[2] = new ArrayList<Float>();

            sensorManager.registerListener(
                    this,
                    sensorManager.getDefaultSensor(Sensor.TYPE_ACCELEROMETER),
                    SensorManager.SENSOR_DELAY_GAME
                );
        }

    }

    @Override
    public void onSensorChanged(SensorEvent event) {
        if (event.sensor.getType()==Sensor.TYPE_GRAVITY){
            gravity.z = event.values[0];
            gravity.x = event.values[1];
            gravity.y = - event.values[2];
        }
        else if ( event.sensor.getType()==Sensor.TYPE_ACCELEROMETER) {
            //For whatever reason, my Samsung only has "Accelerometer"
            // But it is incredibly rough, so attempting to smooth
            // it out with rolling averages.
            rollingAverage[0] = roll(rollingAverage[0], event.values[0]);
            rollingAverage[1] = roll(rollingAverage[1], event.values[1]);
            rollingAverage[2] = roll(rollingAverage[2], -event.values[2]);

            gravity.z = averageList(rollingAverage[0]);
            gravity.x = averageList(rollingAverage[1]);
            gravity.y = averageList(rollingAverage[2]);
        }
    }

    public List<Float> roll(List<Float> list, float newMember){
        if(list.size() == MAX_SAMPLE_SIZE){
            list.remove(0);
        }
        list.add(newMember);
        return list;
    }

    public float averageList(List<Float> tallyUp){

        float total=0;
        for(float item : tallyUp ){
            total+=item;
        }
        total = total/tallyUp.size();

        return total;
    }

    @Override
    public void onAccuracyChanged(Sensor sensor, int accuracy) {

    }
}

class Vector3 {
    float x;
    float y;
    float z;
} 
```

# prolog - 在 Prolog 中保存断言的事实

> ID：15864224
> 
> 赞同：2
> 
> 时间：2013-04-07T15:39:07.770
> 
> 标签：prolog, prolog-assert

在序言中，如果我断言一些事实，例如：

```
assert(boy(john4)).
assert(boy(john3)).
assert(boy(john2)).
assert(boy(john1)). 
```

我怎样才能将这个事实保存在文件中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-30T19:41:01.190

如果您使用的是 SWI-Prolog，那么另一种选择是`persistency.pl`库。您需要声明持久谓词及其参数类型。然后你可以使用`assert_mypred`and `retract_mypred`。更多信息：[http ://www.swi-prolog.org/pldoc/doc/swi/library/persistency.pl](http://www.swi-prolog.org/pldoc/doc/swi/library/persistency.pl)

# azure - Azure 服务总线 - 自有托管

> ID：15864225
> 
> 赞同：0
> 
> 时间：2013-04-07T15:39:11.227
> 
> 标签：azure, servicebus, azureservicebus

我可以使用 Azure 使用的相同服务总线并将其托管在我自己的环境中吗？如果不是，哪些服务总线简单有效，并且在低延迟/带宽下运行良好？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T16:49:34.400

Microsoft 也有 Windows Server 的服务总线[http://msdn.microsoft.com/en-us/library/windowsazure/jj193022(v=azure.10).aspx](http://msdn.microsoft.com/en-us/library/windowsazure/jj193022(v=azure.10).aspx)。

很明显，Azure 的架构与普通的 Windows Server 安装略有不同；至于它们是否“相同”，我不知道。

就 API 而言，据我所知，它们似乎具有奇偶性（相同）。[http://msdn.microsoft.com/en-us/library/windowsazure/jj542433(v=azure.10).aspx](http://msdn.microsoft.com/en-us/library/windowsazure/jj542433(v=azure.10).aspx) 我在尝试让客户端在 Windows 8 上运行时遇到问题，所以我没有接受它远远超过一个简单的测试。

根据您的需要，替代方案可能是 NServiceBus、MassTransit、消息队列（如 RabbitMQ、ZeroMQ 等）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T09:36:42.693

只是为了补充彼得的答案，Windows Server 的服务总线目前只关注 Azure 服务总线的消息传递部分（队列和主题），而不是云中的实际中继服务

# android - spinner 值的动态变化

> ID：15864243
> 
> 赞同：0
> 
> 时间：2013-04-07T15:41:01.963
> 
> 标签：android, spinner, visible

我有 2 个 Spinnery，它具有一定的价值（两个微调器相同）。1 Spinner 的值如何在 2 Spinner 中不可见？如果您选择 1 spinnerze 的值，她将在第 2 次出现。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T16:00:09.603

### java activity class StackActivity.java

```
package com.stack.question;

import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemSelectedListener;
import android.widget.ArrayAdapter;
import android.widget.Spinner;

public class StackActivity extends Activity {

    Spinner spinner1, spinner2;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        spinner1 = (Spinner) findViewById(R.id.spinner1);
        spinner2 = (Spinner) findViewById(R.id.spinner2);
        ArrayAdapter<String> adapterType = new ArrayAdapter<String>(this,
                android.R.layout.simple_spinner_item, new String[] { "data1",
                        "data2" });
        adapterType
                .setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
        spinner1.setAdapter(adapterType);
        spinner2.setAdapter(adapterType);
        spinner1.setOnItemSelectedListener(new OnItemSelectedListener() {

            @Override
            public void onItemSelected(AdapterView<?> arg0, View arg1,
                    int arg2, long arg3) {
                // TODO Auto-generated method stub
                ArrayAdapter<String> adapter2 = new ArrayAdapter<String>(
                        StackActivity.this,
                        android.R.layout.simple_spinner_item, new String[] {
                                "roma", "milan" });
                adapter2.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
                spinner2.setAdapter(adapter2);
            }

            @Override
            public void onNothingSelected(AdapterView<?> arg0) {
                // TODO Auto-generated method stub

            }
        });
    }
} 
```

### main.xml

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <Spinner
        android:id="@+id/spinner1"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" />

    <Spinner
        android:id="@+id/spinner2"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" />

</LinearLayout> 
```

# snmp - 通过 SNMP 更改端口速度（交换机 D-link/Cisco）

> ID：15864246
> 
> 赞同：0
> 
> 时间：2013-04-07T15:41:57.823
> 
> 标签：snmp, cisco

如何通过 SNMP 更改带宽端口限制？
有用于检查带宽端口流量的 OID，但我找不到任何 MIB 来更改端口限制。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T02:25:58.683

不能直接通过 SNMP 更改端口属性。您需要有一个系统来创建一个包含您要应用的所有配置更改的文件，然后使用 SNMP 将该文件复制到设备并应用它。

# html - height: 100% - not 100%?

> ID：15864248
> 
> 赞同：-1
> 
> 时间：2013-04-07T15:42:04.170
> 
> 标签：html, css, footer

There's a ton of questions about 100% height elements. There's also a ton of questions about how to keep footers down. Well, this is yet another one...

I've been building a site and I have problems with positioning my footer and having 100% height elements on the page. [My page looks currently like this.](http://mikko.peltoset.fi/rwd/)

I've tried almost everything I could possibly have found but nothing seems to work. If you look at the CSS code, do you find something that breaks the footer positioning and the height settings?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T15:43:38.537

Check out [The css sticky footer](http://www.cssstickyfooter.com/)

You want your HTML To resemble this:

```
<div id="wrap">

    <div id="main">

    </div>

</div>

<div id="footer">

</div> 
```

So, in your example (your website) you would want the `footer` to be outside of the `container`. From here you can simply check the `CSS` on the link provided above and your footer will stick to the bottom of the page while your DIV expands full height.

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-07T15:59:24.217

```
#contentWrapper{
 padding: 0;
 margin-left: 230px;
 height: 100%;
 background-color: #FFFFFF;
 overflow: auto; /*I added this*/
}

#grass {
 background: url("../images/layout/grass.png") repeat-x;
 width: 100%;
 bottom: 59px;
 height: 248px;
 position: fixed; /*Change absolute to fiexed*/
} 
```

# c# - 通过 Eval 将多个参数传递给函数

> ID：15864251
> 
> 赞同：1
> 
> 时间：2013-04-07T15:42:09.453
> 
> 标签：c#, asp.net, eval

我很想通过 Eval 将两个值传递给函数。

我的功能：

```
public static string ValidateSalary(int salaryFrom, int salaryTo)
{
    string salary = string.Empty;

    if (salaryFrom == salaryTo)
    {
        salary = "£" + salaryFrom.ToString();
    }
    else 
    {
        salary = "£" + salaryFrom.ToString() + " - £" + salaryTo.ToString();
    }
    return salary;
} 
```

我的评估尝试：

```
<%# ValidateSalary(Eval("SalaryFrom", "SalaryTo")) %> 
```

我的错误：

```
Error   5   No overload for method 'ValidateSalary' takes 1 arguments 
```

我已经尝试了多种格式化它的方法，但我无法弄清楚！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T16:09:41.730

通过在后面的代码上发送 DataItem，您可以获得任何参数：

```
<%#RenderSalaryType(Container.DataItem)%> 
```

和后面的代码

```
protected string RenderSalaryType(object oItem)
{
    int salaryType = (int)DataBinder.Eval(oItem, "SalaryType");
    string salaryFrom = (int)DataBinder.Eval(oItem, "SalaryFrom").ToString();
    string salaryTo = (int)DataBinder.Eval(oItem, "SalaryTo").ToString();

    // rest of your code
} 
```

类似于[https://stackoverflow.com/a/15864175/159270](https://stackoverflow.com/a/15864175/159270)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T15:44:58.980

使用两次[Eval](http://msdn.microsoft.com/en-us/library/system.web.ui.databinder.eval%28v=vs.71%29.aspx)

```
<%# ValidateSalary(Convert.ToInt32(Eval("SalaryFrom")), Convert.ToInt32(Eval("SalaryTo")) %> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T15:45:16.167

你可以这样通过...

```
<%# ValidateSalary(Convert.ToInt32(Eval("SalaryFrom")),Convert.ToInt32(Eval("SalaryTo"))) %> 
```

# php - 单个更新语句更新多行mysql

> ID：15864254
> 
> 赞同：0
> 
> 时间：2013-04-07T15:42:25.220
> 
> 标签：php, mysql, phpmyadmin, mysqli

我正在为在线大学管理系统生成定制报告并严重卡在这里，

我有一个名为 say 的主表`report`，它有 10 行，即卷号为 1 到 10 的学生。属性是`roll`，`name`并且`cs101`[这是主题代码，使用默认值 0 创建]。

我有另一个表说`each_subject_cs101`字段`roll`和。但它可能不是所有 10 名学生都在这里注册，比如 8 名学生在那里（用卷 1 到 8 .. 使其更简单）。`name``marks`

现在我想要更新`report`set `cs101`= `marks`from`each_subject_cs101`那些在`each_subject_cs101`. 这一切都在一个单一的更新声明中。

注意：roll no 字段是两个表的主键

MySQL 中的查询将是什么？

[PS：实际上所有上述结构都更复杂并且是动态创建的。我在这里使用别名使其更简单]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T15:48:52.840

```
UPDATE report r, each_subject_cs101 escs 
SET r.cs101 = escs.marks
WHERE r.roll = escs.roll 
```

* * *

```
UPDATE report r
JOIN each_subject_cs101 escs
    ON escs.roll = r.roll
    SET r.cs101 = escs.marks; 
```

# r - ess-toggle-underscore doesn't work

> ID：15864259
> 
> 赞同：1
> 
> 时间：2013-04-07T15:43:07.847
> 
> 标签：r, emacs, ess

Normally, when using ESS, adding the `(ess-toggle-underscore nil)` line to the .emacs file stops the automatic conversion of underscores to `<-`. Recently this has stopped working and underscores are converted to arrows even when the option above is present in the .emacs file.

Does anybody know why this is?

My emacs version is: `23.4.1`

My R version is: `2.15.1`

My ess version is: `12.04-4-1`

# mongodb - 在 MongoDB 的聚合框架中排序

> ID：15864260
> 
> 赞同：5
> 
> 时间：2013-04-07T15:43:12.410
> 
> 标签：mongodb, pymongo, aggregation-framework

[MongoDB的文档](http://docs.mongodb.org/manual/reference/aggregation/sort/)似乎建议，为了对`aggregate`调用结果进行排序，您应该指定一个字典/对象，如下所示：

```
db.users.aggregate(
    { $sort : { age : -1, posts: 1 } }
); 
```

这应该按`age`然后按排序`posts`。

如果我想按`posts`然后按排序怎么办`age`？更改键的顺序似乎没有效果，可能是因为这是 JS 对象的属性。换句话说，排序似乎总是根据键的词法顺序，作为一种设计选择，这似乎很奇怪......

我错过了什么吗？有没有办法指定**排序**的键列表？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-07T16:17:56.710

从[文档](http://api.mongodb.org/python/current/examples/aggregation.html?highlight=aggregate#aggregation-framework)：

> 由于python字典不维护您应该使用的顺序`SON`或 `collections.OrderedDict`需要显式排序的地方，例如“$sort”

```
from bson.son import SON
db.users.aggregate([
    {"$sort": SON([("posts", 1), ("age", -1)])}
]) 
```

# php - 过滤数据以使用 php 中的下拉选项显示

> ID：15864262
> 
> 赞同：2
> 
> 时间：2013-04-07T15:43:22.503
> 
> 标签：php, mysql, drop-down-menu, filter

我尝试通过 mySQL 的下拉选项显示一些数据

当用户选择美国选项并单击提交时，页面将转到下一页并仅显示美国的数据

这是我的 test.html 代码

```
<body>
    <table border="0">
    <tr>
    <th>test
    </th>
    </tr>
      <tr>
        <td>Select Foreign Agent Country</td>
        <td></td>
        <td>
        <select>
        <option value="US">United States</option>
        <option value="AUD">Australia</option>
    </select> 
        </td>
      </tr>
        <td>
        <button type="submit"><a href="showDB.php">submit</a></button>
        </td>

    </table>

</body> 
```

这是我的第二页 showDB.php

```
<?php
//connect to server
$connect = mysql_connect("localhost", "root", "");

//connect to database
mysql_select_db("asdasd");

//query the database
//$query = mysql_query("SELECT * FROM auip_wipo_sample");
if($_POST['value'] == 'US') {  
    // query to get all US records  
    $query = mysql_query("SELECT * FROM auip_wipo_sample WHERE app_country='US'");  
}  
elseif($_POST['value'] == 'AUD') {  
    // query to get all AUD records  
    $query = mysql_query("SELECT * FROM auip_wipo_sample WHERE app_country='AUD'");  
} else {  
    // query to get all records  
    $query = mysql_query("SELECT * FROM auip_wipo_sample");  
}  
//fetch the result
Print "<table border cellpadding=3>"; 
while($row = mysql_fetch_array($query))
{
    Print "<tr>"; 
    Print "<th>Name:</th> <td>".$row['invention_title'] . "</td> "; 
    Print "<th>Pet:</th> <td>".$row['invention-title'] . " </td></tr>"; 
}
Print "</table>"; 
?> 
```

我尝试了上面的代码，但我得到了 2 个错误，它们是

```
Undefined index: value in C:\xampp\htdocs\folder\showDB.php on line 10
Undefined index: value in C:\xampp\htdocs\folder\showDB.php on line 14 
```

第 10 行是 if($_POST['value'] == 'US') {

第 14 行是 elseif($_POST['value'] == 'AUD') {

任何人都可以给出解决方案

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T15:45:27.187

您的表单中没有带有名称的元素`value`，因此您也没有`$_POST['value']` ！实际上，**您甚至根本没有**要提交的表单，您只是在提交按钮内放置了指向另一个页面的链接？

```
<body>
    <form action="showDB.php">
        <table border="0">
            <tr>
                <th>test</th>
            </tr>
            <tr>
                <td>Select Foreign Agent Country</td>
                <td></td>
                <td>
                    <select name="value">
                        <option value="US">United States</option>
                        <option value="AUD">Australia</option>
                    </select>
                </td>
            </tr>
            <td>
                <button type="submit">submit</button>
            </td>
        </table>
    </form>
</body> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T15:52:13.620

您需要向`name`test.html 添加一个参数 - 将其设置`name="value"`为使 showDB.php 无需任何更改即可工作，或者设置第 10 行和第 14 行以匹配`name`您设置的参数。下面的例子：

**编辑：** @adeneo 是对的，您还需要添加一个表单和一个有效的提交按钮

```
<body>
    <form action="showDB.php" method="post">
    <table border="0">
        <tr>
            <th>test</th>
        </tr>
        <tr>
            <td>Select Foreign Agent Country</td>
            <td></td>
            <td>
                <select name="value">
                    <option name="country" value="US">United States</option>
                    <option name="country" value="AUD">Australia</option>
                </select>
            </td>
        </tr>
        <td>
            <input type="submit" name="btn_submit" /> 
        </td>
    </table>
    </form>
</body> 
```

**和PHP：**

```
if($_POST['country'] == 'US') {  
    // query to get all US records  
    $query = mysql_query("SELECT * FROM auip_wipo_sample WHERE app_country='US'");  
}  
elseif($_POST['country'] == 'AUD') { 
```

# java - Datatype for milliseconds

> ID：15864268
> 
> 赞同：2
> 
> 时间：2013-04-07T15:43:42.863
> 
> 标签：java, android, time

I´ve a time measure system in my app and where I have my milliseconds in a `LONG` datatype.

Now, I want them to convert into seconds, that´s easy by dividing through 1000\.

What I need is decimal place for the milliseconds. How do I get it?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-07T15:45:03.060

```
long seconds = timeInMillis/1000;
long milliseconds = timeInMillis%1000;

double timeInSeconds = ((double)seconds) + (((double)milliseconds)/1000.0); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T15:49:58.013

您也可以使用[TimeUnit](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/TimeUnit.html)。它具有处理此类转换的简洁方法。就像从毫秒到秒的转换一样，反之亦然。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T15:46:09.530

好吧，我太傻了。

刚刚取了数据类型`Double`。

# c++ - 在具有统一初始化语法的 C++11 移动构造函数中使用 std::move

> ID：15864269
> 
> 赞同：3
> 
> 时间：2013-04-07T15:43:53.147
> 
> 标签：c++, c++11, move, move-constructor

我有这个简单的课程：

```
struct Worker
{
        Worker() : done{false} {}
        Worker(const Worker& rhs) : done{rhs.done}, qworker{} {}
        Worker(Worker &&rhs) : done{rhs.done}
        {
            qworker = std::move(rhs.qworker);
        }
...
} 
```

这可以用 gcc-4.7.2 编译，但是如果我尝试使用这个版本，我会得到一个错误

```
struct Worker
{
        Worker() : done{false} {}
        Worker(const Worker& rhs) : done{rhs.done}, qworker{} {}
        Worker(Worker &&rhs) : done{rhs.done}
                             , qworker{std::move(rhs.qworker)} // <- ERROR
        {
        }
...
} 
```

为什么？

```
In file included from tlog.cpp:8:0:
log11.hpp: In member function ‘void Log11::Worker::run()’:
log11.hpp:34:29: error: ‘class std::vector<std::function<void()> >’ has no member named ‘pop_front’
In file included from /usr/include/c++/4.7/thread:39:0,
                 from tlog.cpp:3:
/usr/include/c++/4.7/functional: In instantiation of ‘static void std::_Function_handler<void(_ArgTypes ...), _Functor>::_M_invoke(const std::_Any_data&, _ArgTypes ...) [with _Functor = std::vector<std::function<void()> >; _ArgTypes = {}]’:
/usr/include/c++/4.7/functional:2298:6:   required from ‘std::function<_Res(_ArgTypes ...)>::function(_Functor, typename std::enable_if<(! std::is_integral<_Functor>::value), std::function<_Res(_ArgTypes ...)>::_Useless>::type) [with _Functor = std::vector<std::function<void()> >; _Res = void; _ArgTypes = {}; typename std::enable_if<(! std::is_integral<_Functor>::value), std::function<_Res(_ArgTypes ...)>::_Useless>::type = std::function<void()>::_Useless]’
log11.hpp:20:78:   required from here
/usr/include/c++/4.7/functional:1926:2: error: no match for call to ‘(std::vector<std::function<void()> >) ()’ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T17:13:31.613

根据 C++11 标准`std::function`，有一个不受约束的构造函数模板，可以接受任何参数类型：

```
template<class F> function(F f); 
```

当你说`qworker{std::move(rhs.qworker)}`这首先尝试调用构造函数时`std::initializer_list<std::function<void()>>`。由于上面显示的不受约束的构造函数模板，a`std::function<void()>`可以从*任何*类型构造，因此您会得到一个`initializer_list`带有一个成员的 a，如下所示：

```
{ std::function<void()>{std::move(rhs.qworker)} } 
```

这是无效的，因为`rhs.qworker`它不是可调用对象，但仅当您尝试调用函数对象时才会发生错误。

如果您说`qworker(std::move(rhs.qworker))`，那么初始化列表构造函数不是候选者，而是调用移动构造函数。

有一个针对标准 ( [LWG 2132](http://cplusplus.github.io/LWG/lwg-active.html#2132) ) 的缺陷报告，该标准通过防止`function(F)`调用构造函数模板来解决此问题，除非参数是可调用对象。这可以防止`initializer_list<function<void()>>`创建，而是`qworker{std::move(rhs.qworker)}`按预期调用移动构造函数。GCC 4.7 没有实现 LWG 2132 的解决方案，但 GCC 4.8 可以。

# java - 打印我的对象数组时遇到问题

> ID：15864271
> 
> 赞同：0
> 
> 时间：2013-04-07T15:44:03.607
> 
> 标签：java, arrays, object, printing

我正在尝试编写一个应用程序，该应用程序接受用户指定的数字，然后使许多对象（我称它们为学生）为它们分配一个随机名称和数字，然后对它们的数字进行排序。我已经解决了各种问题，但是在打印数组时遇到了问题。我的代码如下。我得到的输出是“新对象”我输入的次数，然后是我每个 toString 调用的“0：null”。任何帮助将不胜感激。谢谢你。

```
import java.util.Random;
import java.util.Scanner;

public class application {

public static void main(String[] args) {

    int studentSerialNumber;
    String studentName;

    System.out.println("Enter the number of students you would like to sort: ");
    Scanner scanner = new Scanner(System.in);
    int numOfStudents = scanner.nextInt();

    Student[] anArrayToSort = new Student[numOfStudents];

    for (int i = 0; i < anArrayToSort.length; i++) {

        studentSerialNumber = ((int)(Math.random() * 8888)) + 1000;
        studentName = getStudentName();

        anArrayToSort[i] = new Student(studentSerialNumber, studentName);

    }

    for (int i = 0; i < anArrayToSort.length; i++) {
        System.out.println(anArrayToSort[i].toString());

    }
}

private static String getStudentName() {

    String studentName = "";
    int i = 7;
    Random r = new Random();

    while (i > 0) {
        char c = (char) (r.nextInt(26) + 'a');
        studentName = studentName + c;
        i--;
    }

    return studentName;
}
}

public class Student {

int studentSerialNumber;
String studentName;

Student(int studentSerialNumber, String studentName) {

    studentSerialNumber = studentSerialNumber;
    studentName = studentName;
    System.out.println("New Object");

}

public String toString() {
      return studentSerialNumber + ": " + studentName;
   }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T15:49:09.670

构造函数中的赋值不好：

```
Student(int studentSerialNumber, String studentName) {
    studentSerialNumber = studentSerialNumber;
    studentName = studentName;
    System.out.println("New Object");
} 
```

这应该是：

```
Student(int studentSerialNumber, String studentName) {
    this.studentSerialNumber = studentSerialNumber;
    this.studentName = studentName;
    System.out.println("New Object");
} 
```

* * *

目前，您正在为自己而不是`Student`实例字段分配值。

# android - How to make some item unselectable in Dialog?

> ID：15864274
> 
> 赞同：1
> 
> 时间：2013-04-07T15:44:20.943
> 
> 标签：android, dialog, unselect

I have this Dialog with 4 items in it. And I need to make for example first item unselectable (unclickable), how can I do that?

```
String[] presets = { getString(R.string.string1), getString(R.string.string2), getString(R.string.string3), getString(R.string.string4) };
            AlertDialog dialog;
            AlertDialog.Builder builder = new AlertDialog.Builder(ListFragment.this.getActivity());
            builder.setTitle(name);
            builder.setItems(presets, new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog, int position1) {
                    switch(position1) {
                    case 0:
                        //some code
                        break;
                    case 1:
                        //some code
                        break;
                    case 2:
                        //some code
                        break;
                    case 3:
                        //some code
                        break;
                    }
                    dialog.dismiss();
                }
            });
            dialog = builder.create();
            dialog.show(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T16:02:09.660

in your xml make this for the widget you don't want it to be clickable

```
android:clickable="false" 
```

# perl - Web-crawler optimization

> ID：15864277
> 
> 赞同：2
> 
> 时间：2013-04-07T15:44:35.357
> 
> 标签：perl, optimization, search-engine, web-crawler

I am building a basic search engine using vector-space model and this is the crawler for returning 500 URLs and removes the SGML tags from the content. However, it is very slow (takes more than 30mins for retrieving the URLs only). How can I optimize the code? I have inserted wikipedia.org as an example starting URL.

```
use warnings;

use LWP::Simple;
use LWP::UserAgent;
use HTTP::Request;
use HTTP::Response;
use HTML::LinkExtor;

my $starting_url = 'http://en.wikipedia.org/wiki/Main_Page';
my @urls = $starting_url;
my %alreadyvisited;
my $browser = LWP::UserAgent->new();
$browser->timeout(5);
my $url_count = 0;

while (@urls) 
{ 
     my $url = shift @urls;
     next if $alreadyvisited{$url}; ## check if already visited

     my $request = HTTP::Request->new(GET => $url);
     my $response = $browser->request($request);

     if ($response->is_error())
     {
         print $response->status_line, "\n"; ## check for bad URL
     }
     my $contents = $response->content(); ## get contents from URL
     push @c, $contents;
     my @text = &RemoveSGMLtags(\@c);
     #print "@text\n";

     $alreadyvisited{$url} = 1; ## store URL in hash for future reference
     $url_count++;
     print "$url\n";

     if ($url_count == 500) ## exit if number of crawled pages exceed limit
     {
         exit 0; 
     } 

     my ($page_parser) = HTML::LinkExtor->new(undef, $url); 
     $page_parser->parse($contents)->eof; ## parse page contents
     my @links = $page_parser->links; 

     foreach my $link (@links) 
     {
             $test = $$link[2];
             $test =~ s!^https?://(?:www\.)?!!i;
             $test =~ s!/.*!!;
             $test =~ s/[\?\#\:].*//;
             if ($test eq "en.wikipedia.org")  ## check if URL belongs to unt domain
             {
                 next if ($$link[2] =~ m/^mailto/); 
                 next if ($$link[2] =~ m/s?html?|xml|asp|pl|css|jpg|gif|pdf|png|jpeg/);
                 push @urls, $$link[2];
             }
     }
     sleep 1;
}

sub RemoveSGMLtags 
{
    my ($input) = @_;
    my @INPUTFILEcontent = @$input;
    my $j;my @raw_text;
    for ($j=0; $j<$#INPUTFILEcontent; $j++)
    {
        my $INPUTFILEvalue = $INPUTFILEcontent[$j];
        use HTML::Parse;
        use HTML::FormatText;
        my $plain_text = HTML::FormatText->new->format(parse_html($INPUTFILEvalue));
        push @raw_text, ($plain_text);
    }
    return @raw_text;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-07T16:37:56.310

*   *总是* `use strict`

*   *永远不要*`&`在子程序调用中使用 &号

*   用于[`URI`](https://metacpan.org/module/URI)操作 URL

您`sleep 1`在那里有一个，我认为这是为了避免过多地敲击该站点，这很好。但是几乎所有基于 Web 的应用程序的瓶颈都是互联网本身，如果不从站点请求更多，您将无法使您的程序更快。这意味着`sleep`使用例如[`LWP::Parallel::RobotUA`](https://metacpan.org/module/LWP::Parallel::RobotUA). 这是你应该走的路吗？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-07T16:54:51.133

使用 WWW::Mechanize 为您处理所有 URL 解析和提取。比您正在处理的所有链接解析要容易得多。它是专门为您正在做的事情而创建的，它是 LWP::UserAgent 的子类，因此您应该能够将所有 LWP::UserAgent 更改为 WWW::Mechanize 而无需更改任何代码，除了对于所有的链接提取，所以你可以这样做：

```
my $mech = WWW::Mechanize->new();
$mech->get( 'someurl.com' );
my @links = $mech->links; 
```

然后`@links`是 WWW::Mechanize::Link 对象的数组。

# java - JTextField无法在if语句java中使用输入

> ID：15864280
> 
> 赞同：0
> 
> 时间：2013-04-07T15:44:57.200
> 
> 标签：java, swing, actionlistener, jtextfield, gettext

我目前正在处理需要我创建自定义缺失字段异常的任务。我必须从 GUI 中获取数据并确保所有字段都接收到输入。我遇到的问题是，每当我使用 .getText() 将输入放入字符串中时，我都无法在任何类型的 if 语句中使用它。我的意思是，如果我完全使用我所知道的将在 JTextField 中的内容编写 if 语句，则它不起作用。我对java有点陌生，所以我可能会很容易错过一些东西。

```
import java.awt.GridLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.io.FileWriter;
import java.io.IOException;
import java.io.PrintWriter;
import java.util.LinkedList;

import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JTextField;

public class PersonFrame extends JFrame {

/**
 * 
 */
private static final long serialVersionUID = 1L;
static LinkedList<Person> listOfObjects = new LinkedList<Person>(); 
JTextField fName;
JTextField lName;
JTextField Height;

public PersonFrame()
{
    setTitle("Person");
    setSize(200, 130);
    setLocationRelativeTo(null);
    setLayout(new GridLayout(4,2));
    add(new JLabel("First Name"));
    fName = new JTextField();
    add(fName);
    add(new JLabel("Last Name"));
    lName = new JTextField();
    add(lName);
    add(new JLabel("Height"));
    Height = new JTextField();
    add(Height);
    JButton jbtSubmit = new JButton("Submit");
    JButton jbtCancel = new JButton("Cancel");
    add(jbtSubmit);
    add(jbtCancel);
    SubmitListenerClass listener1 = new SubmitListenerClass();
    CancelListenerClass listener2 = new CancelListenerClass();
    jbtSubmit.addActionListener(listener1);
    jbtCancel.addActionListener(listener2);
    setVisible(true);

}

public void CloseWindow()
{
    this.setVisible(false);
}
public Person SubmitData()
{
    String fn = fName.getText();
    String ln = lName.getText();
    int h = Integer.parseInt(Height.getText());

    Person p = new Person(fn, ln, h);
    int i = OneMissingFieldException(p);
    int j = MultipleMissingFieldException(p);
    if(i == 1 && j == 1)
    System.out.println(p);
    return p;
    }

public void OutputList() throws IOException
{
    if(listOfObjects.peekFirst()!=null)
    {
        PrintWriter pw = new PrintWriter( new FileWriter("outputp.txt") );
        Object[] pa = listOfObjects.toArray();
        pw.println("Person");
        for(int x = 0; x<pa.length; x++)
        {
            pw.println(pa[x]);
            pw.println("");
        }
        pw.close();
    }
 }

class CancelListenerClass implements ActionListener {
  public void actionPerformed(ActionEvent e) {
    CloseWindow();
  }
}
class SubmitListenerClass implements ActionListener {
  public void actionPerformed(ActionEvent e) {

      listOfObjects.add(SubmitData());
    CloseWindow();

  }
  public int OneMissingFieldException(Person p) 
 {

    String fName = ((Person) p).getFName();

    try 
    {
    if(fName == "" || fName == null || fName == " ")

        throw new MissingFieldException();

    }
    catch(MissingFieldException mfe){
        System.out.println("You did not enter a first name." + mfe);
        return 0;
    }

String lName = ((Person) p).getFName(); 
try 
    {
    if(lName == "" || lName == null || lName == " ")

        throw new MissingFieldException();          
    }
    catch(MissingFieldException mfe){
        System.out.println("You did not enter a last name." + mfe);
        return 0;
    }
int height = ((Person) p).getHeight();  
try 
    {

    if(!(height >= 0) )

        throw new MissingFieldException();
    }
    catch(MissingFieldException mfe){
        System.out.println("You did not enter a height." + mfe);
    return 0;
    }

return 1;

 }

public int MultipleMissingFieldException(Person p) 
{
if (p instanceof Person)
{
    String fName = ((Person) p).getFName();
    String lName = ((Person) p).getFName();
    try 
    {
    if((fName == "" || fName == null || fName == " ")&&(lName == "" || lName == null || lName == " "))

        throw new MissingFieldException();

    }
    catch(MissingFieldException mfe){
        System.out.println("You did not enter a first name or last name." + mfe);
        return 0;
    }

    }
String fName = ((Person) p).getFName();
int height = ((Person) p).getHeight();
try 
{
if((fName == "" || fName == null || fName == " ")&&(!(height >=0)))

    throw new MissingFieldException();

}
catch(MissingFieldException mfe){
    System.out.println("You did not enter a first name or height." + mfe);
    return 0;
}

String lName = ((Person) p).getFName();

    try 
    {
    if((lName == "" || lName == null || lName == " ")&&(!(height >=0)))

        throw new MissingFieldException();          
    }
    catch(MissingFieldException mfe){
        System.out.println("You did not enter a last name and height." +        mfe);
        return 0;
    }

 return 1;
}

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T15:50:30.837

使用 String 你必须使用`string.equals(otherString)`，而不是`string == otherString`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-07T16:05:51.173

我认为你犯了一个相当容易的错误，我已经犯了很多次了。因为“字符串”变量不是数据类型（例如 int、long 和 double），但实际上是 String 类的对象（由大写首字母表示），您必须检查字符串类中的值是否等于要检查的值，在要检查的字符串末尾使用 .equals("String value to be checked") 函数。所以一个例子是，我想知道 myString 是否等于（具有相同的单词/值）作为 yourString。我会写：

```
myString.equals(yourString); //which would return a boolean 
```

而不是你写它的方式

```
myString == yourString; //which does not work 
```

# java - 避免 App Engine 身份验证

> ID：15864284
> 
> 赞同：0
> 
> 时间：2013-04-07T15:45:19.167
> 
> 标签：java, google-app-engine

如何配置我的 Java 应用程序引擎应用程序，以便不要求登录以向服务器发出请求

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T15:50:40.317

那是正常的操作模式。你不应该做任何事情。

查看 WEB-INF 文件夹下的 web.xml 文件。确保没有为您的 servlet 指定安全约束。

# eclipse - How can I simply run "forminput" application in wicket example page using eclipse and tomcat

> ID：15864287
> 
> 赞同：0
> 
> 时间：2013-04-07T15:45:52.763
> 
> 标签：eclipse, wicket, tomcat7

I am new to wicket and dont know how to use mvn, i want to run; [http://www.wicket-library.com/wicket-examples/forminput/?2](http://www.wicket-library.com/wicket-examples/forminput/?2) application. In the link there source codes, so how can i create project and call the jars, libraries and get work the project. Which steps should i follow. Thanks for your helps. Soso

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T18:00:08.190

我真的认为你需要从学习 Maven 开始。学习基础知识真的很简单，它将帮助您完成未来项目的很大一部分。您花在学习 Maven 上的时间将让您了解您未来的框架并以正确的方式为您的项目建模。我认为理解 Maven 所需的时间比这里解释如何在 Eclipse 中正确运行它的整个讨论要少。

基本上，您需要做的就是`mvn jetty:run`在您的 wicket-examples 克隆文件夹中运行以开始使用。一旦你到达那里，获取一两个解释 Maven 基础的教程，以便真正开始。

# import - Country_of_manufacture Importing Problems

> ID：15864288
> 
> 赞同：1
> 
> 时间：2013-04-07T15:45:53.063
> 
> 标签：import, attributes, country, magmi

We have recently started using Magmi to import products...needless to say, this is a great tool. We did, however, notice that country_of_manufacture attribute is not importing. Does anyone know what could cause this and how to solve this issue?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-07-21T10:23:27.507

你必须使用代码示例：FR for France

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-11-06T02:22:58.547

尽量不要使用国家名称，而是使用`country_of_manufacture`属性的值。

示例：对于美国，使用 US，而不是 United States。

[制造国列](http://i.stack.imgur.com/JCrqv.jpg)

以下是`country_of_manufacture`excel 格式的完整值列表： [制造国列表](https://app.box.com/s/1vn184a3mm0yg27ur7934grkfo0tvinm)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-22T09:28:05.773

问题是，该`country_of_manufacture`属性使用自己的源模型。我已将`source_model`in 表更改`eav_attribute`为`eav/entity_attribute_source_table`. 然后将使用属性管理中的选项，并且您的导入模块将具有正确的选项值...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-06T09:22:28.420

除非您提供更多信息，否则很难回答您的问题。示例 CSV 将是一个好的开始。

我唯一想到的为什么 magmi 不导入 country_of_manufacture 是您使用的是完整的国家代码值，或者您的产品根本没有该属性。

1.  仔细检查您的产品是否具有此属性。
2.  对 country_of_manufacture 使用短国家代码。

希望有帮助。

# ios - 定义具有角度和直径的 CGPoint

> ID：15864289
> 
> 赞同：4
> 
> 时间：2013-04-07T15:45:53.623
> 
> 标签：ios, iphone, core-graphics

我相信对于某些人来说，回答和帮助我可能非常简单。

我在 drawRect 中定义了一个圆，并编写了一个代码来定义圆弧。

```
CGFloat         width           = rect.size.width-rect.origin.x;
CGFloat         height          = rect.size.height-rect.origin.y;
CGFloat         xPos            = rect.origin.x;
CGFloat         yPos            = rect.origin.y;
CGFloat         arcStake        = (width * 2) * 0.25;
CGFloat         radius          = height/2;
CGPoint         centre          = CGPointMake(xPos+width/2, yPos+height/2);
CGFloat         angle           = acos(arcStake/(2*radius));
CGFloat         startAng        = radians(180) + angle;
CGFloat         endAng          = radians(360) - angle;

// Define 2 CGPoints of arc

CGMutablePathRef path = CGPathCreateMutable();
CGPathAddArc(path, NULL, centre.x, centre.y, radius, startAng, endAng, 0);
CGPathAddLineToPoint(path, NULL, xPos+width/2, yPos+height/2);
CGPathCloseSubpath(path); 
```

我想要的是定义 2 个 CGPoints of arc。这是使图像更清晰的图像。

![在此处输入图像描述](https://i.stack.imgur.com/CDnYj.jpg)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-07T15:51:44.150

圆上的一个点，半径`r`为角度`a`（`a`从圆的最右边开始测量），其坐标如下：

```
x = r*cos(a) + center.x
y = r*sin(a) + center.y 
```

# java - 如果未执行 JAXB 模型中的设置器，则不显示 XML 元素

> ID：15864293
> 
> 赞同：1
> 
> 时间：2013-04-07T15:46:11.663
> 
> 标签：java, xml, rest, jaxb, boolean

给出了以下 JAXB 模型：

```
@XmlRootElement(name = "Customer")
@XmlAccessorType(XmlAccessType.FIELD)
public Customer {

   @XmlElement(name = "Name")
   private String name;

   @XmlElement(name = "IsVerified")
   private boolean isVerified;

   // Setter and getter for both attributes

} 
```

我使用此模型以 XML 格式显示 REST 资源（GET 请求返回应用程序/xml）。当未使用适当的设置器设置时，XML 元素`name`将不会显示在资源中，但会出现并具有值。如果未执行其设置器，是否也可以不显示该元素？`isVerified``Name``IsVerified``false``IsVerified`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T15:47:22.723

使用 Boolean 代替 boolean 并添加 nillable

```
@XmlElement(name = "IsVerified", nillable='true') 
```

# c++ - 如何使用 lacewing 项目

> ID：15864298
> 
> 赞同：0
> 
> 时间：2013-04-07T15:47:00.927
> 
> 标签：c++, visual-c++, dll, shared-libraries, liblacewing

我是 C++ 的新手。我想在我的 C++ 项目中使用 lacewing-project.org。我阅读了有关如何构建它的文档，并使用`DLL - Release`和`Static Library - Release`配置成功地完成了它。

现在我不知道如何在我的项目中使用它以及如何设置和配置我的项目？我正在关注[本教程](http://www.codeproject.com/Articles/87554/Embedding-a-Webserver-in-your-Win32-C-Application)，但由于最新 Visual Studio 中缺少选项而被卡在中间。我在 Windows 8 上使用 Visual C++ Expression Ed., 2012

我用谷歌搜索并做了以下事情：

*   在我的项目中添加了 lib 文件和 lacewing.h 文件。
*   在 Visual C++ 项目属性下，在链接器文件夹 -> 输入中，我将 lib 文件添加为附加依赖项。

我将 dll 放在 Windows\System32 文件夹中。除了将它放在 win32 文件夹中之外，我还需要对 dll 做任何事情吗？

我的代码来自文档中给出的[hello world 示例。](https://github.com/udp/lacewing/blob/master/examples/hello_world/hello_world.cc)

当我尝试编译时，我得到：

```
1>------ Build started: Project: test, Configuration: Debug Win32 ------
1>  Source.cpp
1>Source.obj : error LNK2019: unresolved external symbol __imp__lw_version referenced in function "void __cdecl on_get(struct lacewing::_webserver *,struct lacewing::_webserver_request *)" (?on_get@@YAXPAU_webserver@lacewing@@PAU_webserver_request@2@@Z)
1>Source.obj : error LNK2019: unresolved external symbol "__declspec(dllimport) void __cdecl lacewing::pump_delete(struct lacewing::_pump *)" (__imp_?pump_delete@lacewing@@YAXPAU_pump@1@@Z) referenced in function _main
1>Source.obj : error LNK2019: unresolved external symbol "__declspec(dllimport) public: struct lacewing::_error * __thiscall lacewing::_eventpump::start_eventloop(void)" (__imp_?start_eventloop@_eventpump@lacewing@@QAEPAU_error@2@XZ) referenced in function _main
1>Source.obj : error LNK2019: unresolved external symbol "__declspec(dllimport) struct lacewing::_eventpump * __cdecl lacewing::eventpump_new(void)" (__imp_?eventpump_new@lacewing@@YAPAU_eventpump@1@XZ) referenced in function _main
1>Source.obj : error LNK2019: unresolved external symbol "__declspec(dllimport) public: void __cdecl lacewing::_stream::writef(char const *,...)" (__imp_?writef@_stream@lacewing@@QAAXPBDZZ) referenced in function "void __cdecl on_get(struct lacewing::_webserver *,struct lacewing::_webserver_request *)" (?on_get@@YAXPAU_webserver@lacewing@@PAU_webserver_request@2@@Z)
1>Source.obj : error LNK2019: unresolved external symbol "__declspec(dllimport) public: void __thiscall lacewing::_webserver::host(long)" (__imp_?host@_webserver@lacewing@@QAEXJ@Z) referenced in function _main
1>Source.obj : error LNK2019: unresolved external symbol "__declspec(dllimport) public: void __thiscall lacewing::_webserver::on_get(void (__cdecl*)(struct lacewing::_webserver *,struct lacewing::_webserver_request *))" (__imp_?on_get@_webserver@lacewing@@QAEXP6AXPAU12@PAU_webserver_request@2@@Z@Z) referenced in function _main
1>Source.obj : error LNK2019: unresolved external symbol "__declspec(dllimport) struct lacewing::_webserver * __cdecl lacewing::webserver_new(struct lacewing::_pump *)" (__imp_?webserver_new@lacewing@@YAPAU_webserver@1@PAU_pump@1@@Z) referenced in function _main
1>Source.obj : error LNK2019: unresolved external symbol "__declspec(dllimport) void __cdecl lacewing::webserver_delete(struct lacewing::_webserver *)" (__imp_?webserver_delete@lacewing@@YAXPAU_webserver@1@@Z) referenced in function _main
1>C:\Users\Jayarathina\Desktop\New folder (3)\test\Debug\test.exe : fatal error LNK1120: 9 unresolved externals
========== Build: 0 succeeded, 1 failed, 0 up-to-date, 0 skipped ========== 
```

请帮忙...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T17:14:42.540

要与库静态链接，必须定义`lw_import`. 如果您不这样做，它将默认为`__declspec(dllimport)`：

```
#ifndef lw_import
   #define lw_import __declspec (dllimport)
#endif 
```

这会导致链接器尝试从 DLL 中提取函数（静态链接时这是错误的）。为此，您可以`lw_import=`在项目属性中添加预处理器定义，也可以在 include`#define`之前添加`lacewing.h`，如下所示：

```
#define lw_import
#include <lacewing.h> 
```

当您静态链接库时，您还需要将任何库依赖项链接到您自己的项目中。您可以在其自身的项目属性中找到该列表`liblacewing.vcproj`，但从 0.5.1 开始，它们是`ws2_32.lib`、`mswsock.lib`、和。`mpr.lib``secur32.lib``crypt32.lib`

# javascript - 在 ruby on rails 中自定义订购

> ID：15864302
> 
> 赞同：0
> 
> 时间：2013-04-07T15:47:39.023
> 
> 标签：javascript, ruby-on-rails, ruby

我有一个教师模型，它在视图中显示教师列表，但我希望学校的负责人总是在视图中的顶部，其次是他们的助手，最后是教师。

如何通过表单添加自定义排序？也许有任何 javascript 插件可以在列表中移动或向下移动教师？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T18:25:57.177

通常，您可以通过执行以下两个步骤来定义 Ruby 类的实例之间的排序：

1.  `include Comparable`在类定义中。
2.  定义一个`<=>`采用单个参数的方法，该参数是该类的另一个实例。如果应该认为接收者 ( `self`) 大于另一个对象，则此方法应该返回 1，如果应该认为它更小，则返回 -1，如果它们相等，则返回 0。

这不是 ActiveRecord 特定的，但我看不出它为什么不适用于 ActiveRecord 类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T18:31:13.707

最简单的方法是创建一个“组”属性。所以：

你的校长是小组 => 1
你的助手是小组 => 2
你的老师是小组 => 3

然后，类似的东西`Employee.order(:group).order(:last_name)`会按您的组排序，然后按姓氏排序。

要拥有自定义订单，请将其添加为您的次要排序。

# debugging - 那里有任何 flex（“快速词法分析器”）调试器吗？

> ID：15864305
> 
> 赞同：3
> 
> 时间：2013-04-07T15:48:10.840
> 
> 标签：debugging, gcc, lex, flex-lexer

我正在学习“编译器”，我们使用 Flex 进行编程。我创建 *.lex 文件（使用任何编辑器），通过 flex 将它们转换为 lex.yy.c，然后使用 gcc 编译为 a.exe。

在 Notepad/Codeblocks/... 这样的编辑器中编写 lex 代码不仅很难，因为一切都是黑色的，而且没有调试系统。gcc 编译器确实告诉了错误，但我正在寻找的是我可以逐行使用代码（在运行时）并查看变量发生了什么。就像 Visual Studio 中的命令 F10。

有人知道适合这个的程序吗？非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T16:42:28.500

关于突出显示，使用`gedit`（Ubuntu 和其他一些 Linux 变体上的默认 GUI 编辑器）甚至`vim`会为您提供，您不必使用普通的记事本。

至于调试，是的，有所谓的 GNU 调试器（又名 GDB），它允许您在编译代码后执行典型的调试工作，您可以逐行检查某些变量值。

`gcc`在此之前，首先使用标志编译您的程序`-g`以将调试符号添加到编译结果中，然后运行`gdb yourProgramName`，这将运行 GDB，您将能够使用某些命令执行您想要的任何调试任务。

我曾经写过[一个小指南来帮助人们开始使用 GDB](http://mpcadel.blogspot.com/2012/12/gdb-in-few-minutes.html)，它可能很有用。

# usb - 通过 USB 输入模拟数据

> ID：15864306
> 
> 赞同：0
> 
> 时间：2013-04-07T15:48:11.667
> 
> 标签：usb, android-input-method

我正在尝试构建这个设备，它从地球获取模拟输入，将它们转换为我希望输入到安卓智能手机中进行数据分析的电脉冲。我最初考虑使用 android 设备的 3.5mm 插孔。显然 Android 不支持通过 3.5 毫米插孔输入。所以我决定使用USB线作为输入。现在我的问题是我的 android 手机或平板电脑能否直接读取 USB 数据，还是必须通过一些微控制器来提供数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T06:56:22.503

我不确定我是否正确理解了您的问题，正在尝试测量土壤电导率并了解您的植物是否需要水？这很容易。或者你想建立一个心脏监测器？这有点复杂。

无论如何，如果您对使用 Android 进行电导率测量感兴趣，您可能想看看这款设备，它无需驱动程序，可在 Android 上运行。

[http://www.yoctopuce.com/EN/products/usb-sensors/yocto-knob](http://www.yoctopuce.com/EN/products/usb-sensors/yocto-knob)

我相信 V-Alarm 也在使用它们

[http://www.valarm.net/blog/use-valarm-sensor-for-flood-warning-and-water-detection](http://www.valarm.net/blog/use-valarm-sensor-for-flood-warning-and-water-detection)

# jquery - 多个元素上的一个 jQuery 更改事件

> ID：15864307
> 
> 赞同：15
> 
> 时间：2013-04-07T15:48:14.530
> 
> 标签：jquery, html, asp-classic

我有 3 个文本框，它们都具有相同的 id，我通过将其带入控制器数组来处理 ASP

我有一个链接，可以在前 3 个下方添加无限数量的文本框。

我目前的变更声明：

```
 $('input.#invent').change(function () { 
```

对于第一个文本框上的更改事件可以正常工作，但是具有相同信息的其他事件在更改时不会触发它

当 3 个以上的文本框发生更改时，触发更改事件的最佳策略是什么？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2018-08-10T23:56:15.253

**最佳策略（95% 的时间）**：使用一个类为多个元素添加监听器。ID 应该是唯一的。课程是为此而设计的，将来会为您提供最大的可扩展性。

HTML：

```
<input type="text" name="input1" class="invent" />
<input type="text" name="input2" class="invent" /> 
```

jQuery：

```
$('.invent').change(function () {
   // Do magical things
}); 
```

**对于另外 5%：**

如果您希望使用唯一 ID 或唯一字段名称而不是所选答案中描述的单个类，*则可*以为多个唯一命名的元素添加侦听器，如下所示：

HTML：

```
<input type="text" name="something1" id="invent1" />
<input type="text" name="something2" id="invent2" />
<input type="text" name="something3" id="invent3" /> 
```

您可以使用 jQuery***[多个选择器](https://api.jquery.com/multiple-selector/)***：

```
$('#invent1, #invent2, #invent3').change(function () {
   // Do magical things
}); 
```

***或者***你可以使用 jQuery***[以](https://api.jquery.com/attribute-starts-with-selector/)***属性选择器开头：

```
//target based on what input id starts with
$('[id^="invent"]').change(function () {
   // Do magical things
});

// OR target based on input name attribute starts with
$('input[name^="something"]').change(function () {
   // Do magical things
}); 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-04-07T15:49:16.953

将具有 ID 的所有三个元素更改`#invent`为一个类（ID**[必须是唯一的](http://webdesign.about.com/od/css/f/blfaqmultiIDs.htm)**），或者它仅适用于第一个元素，就像您的案例中当前发生的情况一样。

然后，您可以定位所有具有`.invent`该类的元素：

```
$('input.invent').change(function () {
   // Here, $(this) refers to the specific element of the .invent class which 'changed'
}): 
```

[在此处](http://css-tricks.com/the-difference-between-id-and-class/)阅读有关 ID 和 Class 选择器之间区别的更多信息。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-04-07T15:51:26.613

由于 id 是唯一的，因此您应该改用 class。然后您可以使用 each 遍历您的类并应用于`$(this)`目标当前`change`输入：

```
$('input.invent').each(function () {
    $(this).change(function () {

    });
}); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-04-07T16:23:36.787

假设您的 HTML 是这样的：

```
<input type="text" id="invent" />
<input type="text" id="invent" />
<input type="text" id="invent" />
<input type="text" id="invent1" />
<input type="text" id="invent2" />
<input type="text" id="invent3" /> 
```

现在 Id 必须是唯一的。因此，为所有输入添加一个类，例如`invent`HTML 将是：

```
<input type="text" class="invent" />
<input type="text" class="invent" />
<input type="text" class="invent" />
<input type="text" class="invent" />
<input type="text" class="invent" />
<input type="text" class="invent" /> 
```

并调用 on change 事件，如：

```
// This would be called now for all the text-boxes
$('input.invent').change(function () {
   // Your code here
}): 
```

以防万一，您不能为所有文本框添加类。您只需执行以下操作：

```
$("input:text").change(function () {
   // Your code here
}): 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-10-28T10:36:35.317

@Eli 为您回答完全匹配的问题。如果您想阅读所有文本框，则可以使用以下方法。

```
 $('input[type=text]').each(function () {
                    $(this).change(function () {
                        alert($(this).val());
                        $(this).focus();
                    });
                }); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-07T15:49:57.063

您不能使用 ID 来引用多个元素。ID 在任何 HTML 页面上都必须是唯一的！

改用一个类:-)。

# c++ - 为什么我的函数开始返回 nan？

> ID：15864309
> 
> 赞同：0
> 
> 时间：2013-04-07T15:48:21.197
> 
> 标签：c++

该程序应该运行该函数，直到它满足条件（答案 < 0.01），然后报告该条件所需的服务器数量（c）。我的程序从来没有达到这一点，因为它在程序中途开始返回 nans。有人可以告诉我我做错了什么吗？

```
#include <iostream>
#include <cmath>
#include <math.h>

using namespace std;

float product (float p);
float answer;

int main()
{
    cout << "Searching for minimum number of servers..." << endl;

    float c;
    float answer;

    do
    {for (c=1; c<220; c++)
      {
        answer = product(c);
        cout << "when c is " << c << " answer is " << answer << endl;
      }
    }while (answer >= 0.01);

    cout << "when c is " << c << " answer is " << product(c) << endl;
    cout << "Minimum number of servers required is " << c << endl;

    return 0;
}

float product (float p)
{
    float temp;
    float result;
    if (p==0)
        answer = 1;
    else
        temp=200*product(p-1);
        result=temp/(temp+p);
    return result;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T15:53:10.900

在`product`函数中，您不设置`temp`if `p`equals `0`。这会导致`temp`未初始化并在您稍后计算时包含看似随机的值`result`。

如果您忘记了 之后的缩进代码周围的大括号，则`else`改为`result`保持未初始化，它仍将包含一个看似随机的值。

这些随机值当然包括`NaN`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T15:54:25.840

从您的缩进来看，我希望您打算这样写：

```
float product (float p)
{
    float temp;
    float result;
    if (p==0)
        answer = 1;
    else
    {
        temp=200*product(p-1);
        result=temp/(temp+p);
    }
    return result;
} 
```

请注意，我添加了`{`和`}`周围的`else`条件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T16:17:17.763

1.  在 else 之后在两个语句周围添加大括号

    `else { temp=200*product(p-1); result=temp/(temp+p); }`

2.  `if(p == 0) result = 1` 分配 answer = 1 然后返回结果，在这种情况下未初始化的结果将在 p = 0 时为您提供 NaN 值。尽管在当前情况下 p 永远不会为零，因为`c`传递的参数`product`范围在 1 到 220 之间。

3.  删除全局变量的声明`answer`。很可能，您不需要它。

# ios - Facebook SDK 使 iOS 应用程序崩溃

> ID：15864313
> 
> 赞同：0
> 
> 时间：2013-04-07T15:48:57.213
> 
> 标签：ios, facebook-ios-sdk

在添加 Facebook SDK 之前，我的应用程序按预期工作并且完全正常，但我添加了它，因为它是新用例的要求。

我的故事是这样的：

[我从这里](https://developers.facebook.com/resources/facebook-ios-sdk-3.2.pkg)下载了 SDK ，将框架包拖到我的 XCode 项目的 frameworks 文件夹中，然后将包文件从 Facebook 框架拖到我的 XCode 项目的 Frameworks 文件夹中。之后，我将 AdSupport、Accounts 和 Social 框架以及 libsqlite3.dylib 和 libsqlite3.0.dylib 文件添加到链接列表的库中。

现在的问题是，当我尝试在 iOS 模拟器上打开我的应用程序时，应用程序打开动画（将抽屉缩放到应用程序中的动画）开始并被匆忙取消回到抽屉中。而且我在 XCode 上没有日志。

有任何想法吗？

# dom - 简单的 HTML dom，获取找到元素的 xpath

> ID：15864332
> 
> 赞同：0
> 
> 时间：2013-04-07T15:50:12.587
> 
> 标签：dom, selenium

我想知道是否有办法获取使用简单 HTML DOM 找到的元素的 xpath？或者类似CSS路径的东西？

我正在使用 Selenium 和 Simple HTML DOM 来扫描页面的表单并提交它，但是有时提交按钮没有名称、类或 ID，所以 xpath 或 CSS 选择器确实是我唯一的选择，有人可以提出解决方案吗？

# class - 如何创建包含预定义类型的 Haskell 类实例？

> ID：15864333
> 
> 赞同：1
> 
> 时间：2013-04-07T15:50:15.970
> 
> 标签：class, haskell, types

我正在尝试创建一个包含预定义类型的 Haskell 类实例，但我不断收到此错误：“ `Graph (AdjListGraph a)' (All instance types must be of the form (T t1 ... tn) where T is not a synonym. Use -XTypeSynonymInstances if you want to disable this.) In the instance declaration for`Graph (AdjListGraph a) 的非法实例声明”

有人可以帮我解决这个问题吗？这是代码：

```
type Node = Int

type Arc = (Node, Node) 

containsArc :: Node -> Node -> [Arc] ->Bool
containsArc a b [] = False
containsArc a b (x:xs)
    | (fst x == a && snd x == b) = True
    | otherwise = containsArc a b xs

fstNode :: [Arc] -> Node -> [Node]
fstNode arcs n
    | (n == (fst (head arcs))) = (snd (head arcs)) : (fstNode (tail arcs) n)
    | otherwise = fstNode (tail arcs) n

sndNode :: [Arc] -> Node -> [Node]
sndNode arcs n
    | (n == (snd(head arcs))) = (fst (head arcs)) : (sndNode (tail arcs) n)
    | otherwise = sndNode (tail arcs) n 

class Graph g where

    build :: [Node] -> [Arc] -> g

    nodes :: g -> [Node] -- lista nodurilor din graf

    arcs :: g -> [Arc] -- lista muchiilor din graf

    nodeOut :: g -> Node -> [Node]

    nodeIn :: g -> Node -> [Node]

    arcExists :: g -> Node -> Node -> Bool

    arcExists g a b
        | (arcs g) == [] = False
        | otherwise = if (fst (head (arcs g)) == a && snd (head (arcs g)) == b) then True else containsArc a b (tail (arcs g))

    nodeIn g n = sndNode (arcs g) n
    nodeOut g n = fstNode (arcs g) n

type AdjListGraph a = [(a, [a])]

makePairs :: Node -> [Node] -> [(Node, Node)]
makePairs a [] = []
makePairs a (x:xs) = (a, x) : makePairs a xs

instance Graph a => Graph (AdjListGraph a) --this is where i get the error-- where
    arcs a 
        | a == [] = []
        | otherwise = (makePairs (fst (head a)) (snd (head a))) ++ (arcs (tail a))

    nodes a
        | a == [] = []
        | otherwise = (fst (head a)) : (nodes (tail a)) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-07T16:46:05.483

使用`newtype`for`AdjListGraph`代替`type`同义词。您可以按照`TypeSynonymInstances`它的要求使用扩展，但这会导致类型推断出现问题，因为类型同义词不会“粘住”，并且当它们扩展时，它们不一定具有选择正确类型类实例所需的正确形式。使用 a`newtype`将帮助您避免很多麻烦，即使它确实需要包装和展开。

原因是`ghc`通过匹配某物的主体类型来解析哪个类型的类实例。您`AdjacencyListGraph`的主体类型实际上是 a `[(a, [a])]`，`type`同义词只是为其创建一个别名，但不会更改其主体类型。A`newtype`实际上改变了主要类型，这就是它与类型类很好地配合的原因。但是，它要求您专门包装和解包值，以便`ghc`始终知道要匹配哪个主体类型。

# ios - 如何让 UITableView 自动调整大小？

> ID：15864334
> 
> 赞同：1
> 
> 时间：2013-04-07T15:50:16.450
> 
> 标签：ios, uitableview, autoresize, autosize

我在 UIView 中有几个并排的 UITableView，我想让整个东西自动调整大小。我有一个 UIView 在我的 init() 方法中：

```
// I don't know how big frontBack should be, so I'd like it to autosize
UIView *frontBack = [[UIView alloc] initWithFrame:CGRectZero];
frontBack.autoresizingMask = UIViewAutoresizingFlexibleHeight | UIViewAutoresizingFlexibleWidth;
UITableView *table = [[UITableView alloc]
                      initWithFrame:CGRectMake(0, 0, r.size.width / 2, height) style:UITableViewStyleGrouped];
table.autoresizingMask = UIViewAutoresizingFlexibleHeight;
table.dataSource = model1;
[table reloadData];
[frontBack addSubview:table];

... (add second table similarly, except with model2)
...
controller.view = frontBack; 
```

这不起作用。表格是“高度”像素高（比他们需要的要小；文本被截断）。

我尝试了几种让 UITableViews 调整大小的方法，但没有成功

```
// contentSize is correct, but frame size does not change
[table reloadData];
table.frame.size.height = table.contentSize.height;

// contentSize is correct, but bounds does not change
[table reloadData];
table.bounds.size.height = table.contentSize.height;

// Nothing appears to change
[table setNeedsLayout];
[table layoutIfNeeded];

// Again, no change
[table sizeToFit]; 
```

我想我在这里遗漏了一些基本的东西，但如果有人能指出它是什么，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T01:29:52.487

> table.bounds.size.height = table.contentSize.height;

这是一个只读属性，您需要重新设置框架。

另外，你确定你包含的 UIView 没有切断表格内容吗？你也应该调整它的大小。

# php - PHP 性能/字节码缓存

> ID：15864343
> 
> 赞同：2
> 
> 时间：2013-04-07T15:50:53.453
> 
> 标签：php

我目前正在学习参加 Zend 考试，有些事情我不清楚。Zend 要求我们知道“**性能/字节码缓存**”。阅读 php.net 上的文档，我在任何地方都找不到。

[http://www.zend.com/en/services/certification/php-5-certification/](http://www.zend.com/en/services/certification/php-5-certification/)

谁能解释一下什么是**性能/字节码缓存**以及我可以在哪里阅读更多相关信息...

他还想知道“配置”...我不确定 zend 到底是什么意思？

谢谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T16:06:43.410

我认为这与APC有关。你可以[在这里阅读](http://php.net/manual/en/book.apc.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-13T17:59:00.087

我认为是在谈论OPcache，您可以在php官网文档中找到它

[OPcache](http://us2.php.net/opcache "OPcache")

# vim - Racket / Scheme 的命令行语法检查器

> ID：15864344
> 
> 赞同：3
> 
> 时间：2013-04-07T15:50:58.227
> 
> 标签：vim, scheme, racket, syntax-checking, syntastic

我正在寻找一个命令行工具来检查我的 Racket / PLT-Scheme 代码的语法。这样做的目的是为[Syntastic Vim 插件](https://github.com/scrooloose/syntastic)构建一个语法检查器。

有人听说过方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T21:11:39.757

如果您正在寻找代码样式检查器，请查看 Eli Barzilay 的[“code ayatollah”](http://tmp.barzilay.org/code-ayatollah.rkt)。您可以在命令行上运行它。

# java - AIDE 应用程序的问题

> ID：15864346
> 
> 赞同：1
> 
> 时间：2013-04-07T15:51:15.773
> 
> 标签：java, android, mobile, ide

我正在手机上的应用程序[AIDE](https://play.google.com/store/apps/details?id=com.aide.ui&feature=search_result#?t=W251bGwsMSwxLDEsImNvbS5haWRlLnVpIl0.)上开发 Android 应用程序。它是一个非常有用的工具。但是当 AIDE 说没有错误并且我安装并运行我的应用程序时，我得到一个提示：“不幸的是，（此处的应用程序名称）已停止。”

我不知道原因，但是当应用程序使用陀螺仪或具有显示变量或类似的东西时，它会发生。有时它只是无缘无故地到来。

AIDE 说这段代码很好，但它不起作用。

```
package com.test.gyro;

import android.app.*;
import android.hardware.Sensor;
import android.hardware.SensorEvent;
import android.hardware.SensorEventListener;
import android.hardware.SensorManager;
import android.os.*;
import android.widget.*;

public class MainActivity extends Activity implements SensorEventListener
{
    private SensorManager SM;
    private Sensor gyro;
    private TextView text;

    @Override
    public void onCreate(Bundle SIS)
    {
        super.onCreate(SIS);
        SM = (SensorManager) this.getSystemService(SENSOR_SERVICE);
        gyro = SM.getDefaultSensor(Sensor.TYPE_GYROSCOPE);
        text.setText("null");
        setContentView(text);
    }

    public void onSensorChanged(SensorEvent e)
    {
        String m=e.values[0] + ", " + e.values[1] + ", " + e.values[2];
        text.setText(m);
        text.invalidate();
    }

    public void onAccuracyChanged(Sensor S, int a)
    {
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-07T15:56:23.880

你没有初始化你的`textView`变量。所以当你在做的时候`text.setText("null")`，它会抛出一个`NullPointerException`并停止你的应用程序。

初始化`textView`并重试启动它。

# php - 自定义“选择文件”按钮未按预期工作

> ID：15864348
> 
> 赞同：0
> 
> 时间：2013-04-07T15:51:16.847
> 
> 标签：php, fine-uploader

我正在实施良好的上传器。这是我所做的：

1) 我添加了以下 html 和 js 类：

```
 <link rel="stylesheet" href="Content/fineuploader-3.4.1.css" /> 
<script type="text/javascript" src="Scripts/jquery.fineuploader-3.4.1.min.js"></script> 
```

**HTML**

```
<input type="text" class="input-medium" placeholder="Document Type" data-bind="value: type"/>
                                   <div id="fine-uploader-basic" class="btn btn-success" data-bind="click:$root.uploadFile">
                                        <i class="icon-upload icon-white"></i> Click to upload
                                    </div>
                                    <div id="messages"></div> 
```

**JS文件**

```
uploadFile: function(data) { 
       var uploader = new qq.FineUploader({
        element: $('#fine-uploader')[0],
        debug: true,
        request: {
            endpoint: "php/fileupload.php"
        }
    });
    } 
```

**精细上传.php 文件：**

```
<?php
$file = $_FILES['qqfile'];
$uploadDirectory = 'uploads';
$target = $uploadDirectory.DIRECTORY_SEPARATOR.$file['files.php'];
$result = null;
if (move_uploaded_file($file['tmp_name'], $target)){
    $result = array('success'=> true);
    $result['uploadName'] = $file['name'];
} else {
    $result = array('error'=> 'Upload failed');
}
header("Content-Type: text/plain");
echo json_encode($result);

?> 
```

**files.php（存储文件的位置）**

```
<?php 

// Include the uploader class
require_once 'php/fileupload.php';

$uploader = new qqFileUploader();

// Specify the list of valid extensions, ex. array("jpeg", "xml", "bmp")
$uploader->allowedExtensions = array();

// Specify max file size in bytes.
$uploader->sizeLimit = 10 * 1024 * 1024;

// Specify the input name set in the javascript.
$uploader->inputName = 'qqfile';

// If you want to use resume feature for uploader, specify the folder to save parts.
$uploader->chunksFolder = 'chunks';

// Call handleUpload() with the name of the folder, relative to PHP's getcwd()
$result = $uploader->handleUpload('uploads');

// To save the upload with a specified name, set the second parameter.
// $result = $uploader->handleUpload('uploads/', md5(mt_rand()).'_'.$uploader->getName());

// To return a name used for uploaded file you can use the following line.
$result['uploadName'] = $uploader->getUploadName();

header("Content-Type: text/plain");
echo json_encode($result);
?> 
```

**问题：**

当我单击该按钮时，它会更改为以下内容： ![在此处输入图像描述](https://i.stack.imgur.com/rQcw6.jpg)

绿色按钮内的那个红色按钮应该与绿色按钮分开。

而且，选择文件的弹出窗口也不会出现。两个 PHP 文件都有 777 权限。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T17:01:04.423

就这个特定问题而言，您的 PHP 文件是无关紧要的。如果您不想使用 Fine Uploader 的默认样式“选择文件”按钮，则必须将 Fine Uploader 指向您的自定义“按钮”元素。

在您的情况下，您需要添加`button`如下选项：
`button: document.getElementById('#fine-uploader-basic')`

# python - Tkinter：在网格布局中的按钮上方获取图像

> ID：15864353
> 
> 赞同：2
> 
> 时间：2013-04-07T15:51:44.330
> 
> 标签：python, layout, user-interface, tkinter

我是 tkinter 的新手，我正在尝试制作一个 GUI，顶部有一个图像，该图像下方有 4 个按钮区域，这将是一种选择答案的方法。但是，到目前为止，我创建的代码似乎只停留在左上角，根本不会在图像下方移动，请问有人知道解决方案吗？

```
import Tkinter as tk
from Tkinter import *
from Tkinter import PhotoImage

root = Tk()

class Class1(Frame):

    def __init__(self, master):
        Frame.__init__(self, master)
        self.grid()

        self.master = master        
        self.question1_UI()

    def question1_UI(self):

        self.master.title("GUI")        

        gif1 = PhotoImage(file = 'Image.gif')

        label1 = Label(image=gif1)
        label1.image = gif1 
        label1.grid(row=1, column = 0, columnspan = 2, sticky=NW)

        questionAButton = Button(self, text='Submit',font=('MS', 8,'bold'))
        questionAButton.grid(row = 2, column = 1, sticky = S)
        questionBButton = Button(self, text='Submit',font=('MS', 8,'bold'))
        questionBButton.grid(row = 2, column = 2, sticky = S)
        questionCButton = Button(self, text='Submit',font=('MS', 8,'bold'))
        questionCButton.grid(row = 3, column = 3, sticky = S)
        questionDButton = Button(self, text='Submit',font=('MS', 8,'bold'))
        questionDButton.grid(row = 3, column = 4, sticky = S)

def main():

    ex = Class1(root)
    root.geometry("{0}x{1}+0+0".format(root.winfo_screenwidth(),
    root.winfo_screenheight()))         
    root.mainloop()  

if __name__ == '__main__':
    main() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T16:05:44.793

您没有`self`用作`label1`. 此外，网格管理器从第 0 行开始：

```
def question1_UI(self):
    # ...
    label1 = Label(self, image=gif1)
    label1.image = gif1 
    label1.grid(row = 0, column = 0, columnspan = 2, sticky=NW)

    questionAButton = Button(self, text='Submit',font=('MS', 8,'bold'))
    questionAButton.grid(row = 1, column = 0, sticky = S)
    questionBButton = Button(self, text='Submit',font=('MS', 8,'bold'))
    questionBButton.grid(row = 1, column = 1, sticky = S)
    questionCButton = Button(self, text='Submit',font=('MS', 8,'bold'))
    questionCButton.grid(row = 2, column = 0, sticky = S)
    questionDButton = Button(self, text='Submit',font=('MS', 8,'bold'))
    questionDButton.grid(row = 2, column = 1, sticky = S) 
```

# android - LogCat 中的 libGdx 和钝化 SensorManager 错误

> ID：15864355
> 
> 赞同：0
> 
> 时间：2013-04-07T15:51:56.753
> 
> 标签：android, libgdx, android-sensors

我将 libGDX 用于 2D 应用程序。该应用程序运行良好，除了 LogCat 中有两个错误：

```
04-07 15:19:59.579: E/SensorManager(5326): ***[disableSensorLocked]name = ADXL346 Acceleration Sensor
04-07 15:19:59.579: E/SensorManager(5326): res = true
04-07 15:19:59.579: E/SensorManager(5326): ***[disableSensorLocked]name = MS-3C (YAS529) Magnetic Sensor
04-07 15:19:59.579: E/SensorManager(5326): res = true 
```

我不`SensorManager`直接实例化，也不在我的 libGDX 项目中使用它。怎么了？

我在模拟器上看不到此类错误消息，仅在真实设备（Acer Liquid）上。他们的意思是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T20:47:01.507

默认情况下，Libgdx 将启用许多传感器。您可以通过在[`AndroidApplicationConfiguration`](http://libgdx.badlogicgames.com/nightlies/docs/api/com/badlogic/gdx/backends/android/AndroidApplicationConfiguration.html)传递给[`AndroidApplication.initialize()`](http://libgdx.badlogicgames.com/nightlies/docs/api/com/badlogic/gdx/backends/android/AndroidApplication.html#initialize%28com.badlogic.gdx.ApplicationListener,%20com.badlogic.gdx.backends.android.AndroidApplicationConfiguration%29).

像这样：

```
appListener = ...
// Configure libGDX app options:
AndroidApplicationConfiguration appCfg = new AndroidApplicationConfiguration();
appCfg.useAccelerometer = false;
appCfg.useCompass = false;
... other appCfg options ...

initialize(appListener, appCfg); 
```

# javascript - 确定 DST 何时生效

> ID：15864359
> 
> 赞同：0
> 
> 时间：2013-04-07T15:52:04.843
> 
> 标签：javascript, time, timezone, dst

我最近遇到一个问题...

假设我有一些这样的 Javascript，例如：

```
var timezone = -(new Date()).getTimezoneOffset() / 60; // Get the TZ offset

var local = [];
var gmt   = [];

for(var i = 0; i <= 23; i++) // Loop through each hour
{
    local.push(i);

    var time = (i + timezone);

    if(time == 24)
        time = 0;

    gmt.push(time);
} 
```

这在不在 DST 时完美地工作，但是当 DST 到来时，我有意想不到的结果，例如：（本地用户在 GMT/DST）

```
> console.log(local);
[0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23]

> console.log(gmt);
[1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 0] 
```

两个数组应该相同的地方。

**我如何检测夏令时何时生效？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T19:59:19.883

这就是我最终得到的结果，检测到 3 月的最后一个星期日，然后是 10 月的最后一个星期日，并检查我们目前是否在那些日子之内。谢谢大家的评论和回答。

随意编辑并给我建议/改进。我觉得这不是最好的方法。

```
function is_bst()
{
    var date    = new Date();
    var march   = null;
    var october = null;

    for(var i = 7; i != 0; i--)
    {
        var day = new Date(date.getFullYear(), 2, i);

        if(day.getDay() == 0)
        {
            march = day;
            break;
        }
    }

    for(var i = 7; i != 0; i--)
    {
        var day = new Date(date.getFullYear(), 9, i);

        if(day.getDay() == 0)
        {
            october = day;
            break;
        }
    }

    return !(date < march || date > october);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T19:30:15.850

此功能将帮助您使用 DST 进行计算。

```
function dstOffset() {
    var dailyOffsets = [];
    for (var i = 0; i <= 366; i++) { // sample timezone offset over at least a year since daylight saving changes are repeated each year.
        var sampleDay = new Date(); // today at whatever time
        sampleDay.setDate(i); // i days from the begining of this month (at the same time)
        dailyOffsets.push(sampleDay.getTimezoneOffset());
    }
    return Math.min.apply(null, dailyOffsets);
}
alert(dstOffset() + " minutes"); 
```

# php - 运行后从 php 文件运行 Javascript

> ID：15864361
> 
> 赞同：2
> 
> 时间：2013-04-07T15:52:09.097
> 
> 标签：php, javascript, jquery, ajax, variables

好的，所以我的想法是，一旦满足 php 中的 if 语句，我需要一段 javascript 来运行，但这需要与 dom 交互，因此假设按下按钮并且在按下按钮时将变量传递给 php . （这不是那个 senario 但相当相似）：

```
if ($button == 1){
    echo '<script type="text/javascript"> document.getElementById("myForm").submit(); </script>';
} 
```

我希望一旦满足此条件，此代码就可以运行。它需要在 php if 语句中，我无法将其移至 js。但是我确实考虑过尝试将代码添加到变量中并通过 ajax 将该变量传递给 js，但没有奏效。

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T16:00:30.973

do you mean just wanting to run a piece of javascript, after a php condition is met? If so:

*myScript.php*

```
<?php
    $button = 1;
    if ($button == 1){
      echo "submit form";
    }
?> 
```

*myScript.js*

```
$.ajax({
  type:"POST"
  url:"myScript.php"
  success: function(data){
    if(data == "submit form"){
      //submits "myForm"
      $("#myForm").submit();
    }
  }
}); 
```

as said by *SLaks*, its not possible to execute javascript in php, because php runs on the server, and javascript runs on the client. to make it easier to understand: they are basically 2 seperate "worlds" which can only run certain code.

# ios - IOS第二个应用程序-+按钮消失了

> ID：15864363
> 
> 赞同：2
> 
> 时间：2013-04-07T15:52:23.287
> 
> 标签：ios, xcode

我是 IOS 应用程序编程的新手——我学习了[iOS 第二个应用程序教程](http://developer.apple.com/library/ios/#documentation/iPhone/Conceptual/SecondiOSAppTutorial/)（观鸟教程），当我到最后时遇到了 2 个问题，任何指针都将不胜感激。

1.  主视图上的 + 按钮消失了，我不明白为什么？代码的哪一部分控制这个？

2.  在主视图中选择鸽子鸟时，会出现详细视图，但所有项目中仍然有详细信息，因此鸟名仍然是详细信息，位置仍然是详细信息等。

任何帮助将不胜感激。

谢谢

编辑 - 为 masterviewcontroller 添加了 .h 和 .m 代码

。H

```
#import <UIKit/UIKit.h>
@class BirdSightingDataController;
@interface BirdsMasterViewController : UITableViewController
@property (strong, nonatomic) BirdSightingDataController *dataController;
- (IBAction)done:(UIStoryboardSegue *)segue;
- (IBAction)cancel:(UIStoryboardSegue *)segue;
@end 
```

.m

```
#import "BirdsMasterViewController.h"

#import "BirdsDetailViewController.h"
#import "BirdSightingDataController.h"
#import "BirdSighting.h"
#import "AddSightingViewController.h"

@implementation BirdsMasterViewController

- (void)awakeFromNib
{
    [super awakeFromNib];
    self.dataController = [[BirdSightingDataController alloc] init];
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    self.navigationItem.rightBarButtonItem.accessibilityHint = @"Adds a new bird sighting event";
    // Do any additional setup after loading the view, typically from a nib.
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

#pragma mark - Table View

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
    return [self.dataController countOfList];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    static NSString *CellIdentifier = @"BirdSightingCell";

    static NSDateFormatter *formatter = nil;
    if (formatter == nil) {
        formatter = [[NSDateFormatter alloc] init];
        [formatter setDateStyle:NSDateFormatterMediumStyle];
    }
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    BirdSighting *sightingAtIndex = [self.dataController objectInListAtIndex:indexPath.row];
    [[cell textLabel] setText:sightingAtIndex.name];
    [[cell detailTextLabel] setText:[formatter stringFromDate:(NSDate *)sightingAtIndex.date]];
    return cell;
}

- (BOOL)tableView:(UITableView *)tableView canEditRowAtIndexPath:(NSIndexPath *)indexPath
{
    // Return NO if you do not want the specified item to be editable.
    return NO;
}

- (IBAction)done:(UIStoryboardSegue *)segue
{
    if ([[segue identifier] isEqualToString:@"ReturnInput"]) {

        AddSightingViewController *addController = [segue sourceViewController];
        if (addController.birdSighting) {
            [self.dataController addBirdSightingWithSighting:addController.birdSighting];
            [[self tableView] reloadData];
        }
        [self dismissViewControllerAnimated:YES completion:NULL];
    }
}
- (IBAction)cancel:(UIStoryboardSegue *)segue
{
    if ([[segue identifier] isEqualToString:@"CancelInput"]) {
        [self dismissViewControllerAnimated:YES completion:NULL];
    }
}

- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {
    if ([[segue identifier] isEqualToString:@"ShowSightingDetails"]) {
        BirdsDetailViewController *detailViewController = [segue destinationViewController];

        detailViewController.sighting = [self.dataController objectInListAtIndex:[self.tableView indexPathForSelectedRow].row];
    }
}

@end 
```

# ios - 从后台打开应用程序时不调用 ViewDidAppear

> ID：15864364
> 
> 赞同：179
> 
> 时间：2013-04-07T15:52:36.457
> 
> 标签：ios, objective-c, iphone, xcode, swift

我有一个视图控制器，其中我的值为 0（标签），当我从另一个视图控制器打开该视图控制器时，`ViewController`我已将`viewDidAppear`标签上的值设置为 20。它工作正常，但是当我关闭我的应用程序并再次打开我的应用程序但值没有改变，因为`viewDidLoad`，`viewDidAppear`并且`viewWillAppear`没有被调用。打开我的应用程序时如何拨打电话。我必须做任何事情`applicationDidBecomeActive`吗？

* * *

## 回答 #1

> 赞同：316
> 
> 时间：2013-04-07T16:32:49.537

对事件的确切顺序感到好奇，我按如下方式检测了一个应用程序：（@Zohaib，您可以使用下面的 NSNotificationCenter 代码来回答您的问题）。

```
// AppDelegate.m

- (void)applicationWillEnterForeground:(UIApplication *)application
{
    NSLog(@"app will enter foreground");
}

- (void)applicationDidBecomeActive:(UIApplication *)application
{
    NSLog(@"app did become active");
}

// ViewController.m

- (void)viewDidLoad
{
    [super viewDidLoad];
    NSLog(@"view did load");

    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(appDidBecomeActive:) name:UIApplicationDidBecomeActiveNotification object:nil];
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(appWillEnterForeground:) name:UIApplicationWillEnterForegroundNotification object:nil];
}

- (void)appDidBecomeActive:(NSNotification *)notification {
    NSLog(@"did become active notification");
}

- (void)appWillEnterForeground:(NSNotification *)notification {
    NSLog(@"will enter foreground notification");
}

- (void)viewWillAppear:(BOOL)animated {
    [super viewWillAppear:animated];
    NSLog(@"view will appear");
}

- (void)viewDidAppear:(BOOL)animated {
    [super viewDidAppear:animated];
    NSLog(@"view did appear");
} 
```

启动时，输出如下所示：

```
2013-04-07 09:31:06.505 myapp[15459:11303] view did load
2013-04-07 09:31:06.507 myapp[15459:11303] view will appear
2013-04-07 09:31:06.511 myapp[15459:11303] app did become active
2013-04-07 09:31:06.512 myapp[15459:11303] did become active notification
2013-04-07 09:31:06.517 myapp[15459:11303] view did appear 
```

进入后台，然后重新进入前台：

```
2013-04-07 09:32:05.923 myapp[15459:11303] app will enter foreground
2013-04-07 09:32:05.924 myapp[15459:11303] will enter foreground notification
2013-04-07 09:32:05.925 myapp[15459:11303] app did become active
2013-04-07 09:32:05.926 myapp[15459:11303] did become active notification 
```

* * *

## 回答 #2

> 赞同：136
> 
> 时间：2013-04-07T16:28:45.583

**使用 Objective-C**

`UIApplicationWillEnterForegroundNotification`您应该在您`ViewController`的方法中注册 a ，`viewDidLoad`并且每当应用程序从后台返回时，您都可以在注册通知的方法中执行您想做的任何事情。`ViewController`的**viewWillAppear**或**viewDidAppear**当应用程序从后台返回到前台时不会被调用。

```
-(void)viewDidLoad{

[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(doYourStuff)

  name:UIApplicationWillEnterForegroundNotification object:nil];
}

-(void)doYourStuff{

   // do whatever you want to do when app comes back from background.
} 
```

不要忘记取消注册您注册的通知。

```
-(void)dealloc {
    [[NSNotificationCenter defaultCenter] removeObserver:self];
} 
```

**请注意**，如果您注册您`viewController`的，`UIApplicationDidBecomeActiveNotification`那么每次您的应用程序激活时都会调用您的方法，不建议注册`viewController`此通知。

**使用斯威夫特**

要添加观察者，您可以使用以下代码

```
 override func viewDidLoad() {
    super.viewDidLoad()

     NotificationCenter.default.addObserver(self, selector: "doYourStuff", name: UIApplication.willEnterForegroundNotification, object: nil)
 }

 func doYourStuff(){
     // your code
 } 
```

要删除观察者，您可以使用 swift 的 deinit 函数。

```
deinit {
    NotificationCenter.default.removeObserver(self)
} 
```

* * *

## 回答 #3

> 赞同：43
> 
> 时间：2017-07-12T19:54:14.823

# 斯威夫特 3.0++ 版本

在您的`viewDidLoad`，在通知中心注册以收听从后台打开的操作

```
NotificationCenter.default.addObserver(self, selector:#selector(doSomething), name: NSNotification.Name.UIApplicationWillEnterForeground, object: nil) 
```

然后添加此功能并执行所需的操作

```
func doSomething(){
    //...
} 
```

最后添加这个函数来在你的视图控制器被销毁时清理通知观察者。

```
deinit {
    NotificationCenter.default.removeObserver(self)
} 
```

* * *

## 回答 #4

> 赞同：17
> 
> 时间：2018-11-26T14:36:54.620

## 斯威夫特 4.2。版本

注册 NotificationCenter`viewDidLoad`以在应用从后台返回时收到通知

```
NotificationCenter.default.addObserver(self, selector: #selector(doSomething), name: UIApplication.willEnterForegroundNotification, object: nil) 
```

实现应该调用的方法。

```
@objc private func doSomething() {
    // Do whatever you want, for example update your view.
} 
```

`ViewController`一旦被销毁，您可以删除观察者。仅在 iOS9 和 macOS 10.11 以下需要

```
deinit {
    NotificationCenter.default.removeObserver(self)
} 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-04-07T16:05:12.320

只需让您的视图控制器注册`UIApplicationWillEnterForegroundNotification`通知并做出相应的反应。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2014-10-31T09:20:03.073

我认为注册 UIApplicationWillEnterForegroundNotification 是有风险的，因为您最终可能会有多个控制器对该通知做出反应。没有任何保证这些控制器在收到通知时仍然可见。

这是我要做的：我直接从应用程序的委托 didBecomeActive 方法强制在活动控制器上调用 viewDidAppear：

将以下代码添加到`- (void)applicationDidBecomeActive:(UIApplication *)application`

```
UIViewController *activeController = window.rootViewController;
if ([activeController isKindOfClass:[UINavigationController class]]) {
    activeController = [(UINavigationController*)window.rootViewController topViewController];
}
[activeController viewDidAppear:NO]; 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2017-03-03T18:16:16.180

尝试在 AppDelegate applicationWillEnterForeground 中添加它。

```
func applicationWillEnterForeground(_ application: UIApplication) {        
    // makes viewWillAppear run
    self.window?.rootViewController?.beginAppearanceTransition(true, animated: false)
    self.window?.rootViewController?.endAppearanceTransition()
} 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2017-06-28T21:06:17.640

根据 Apple 的文档：

```
(void)beginAppearanceTransition:(BOOL)isAppearing animated:(BOOL)animated; 
```

**描述：**
告诉子控制器它的外观即将改变。如果您正在实现自定义容器控制器，请使用此方法告诉孩子它的视图即将**出现或消失**。**不要直接调用`viewWillAppear:`, `viewWillDisappear:`, `viewDidAppear:`, 或`viewDidDisappear:`**。

```
(void)endAppearanceTransition; 
```

**描述：**

告诉子控制器其外观已更改。如果您正在实现自定义容器控制器，请使用此方法告诉孩子视图转换已完成。

**示例代码：**

```
(void)applicationDidEnterBackground:(UIApplication *)application
{

    [self.window.rootViewController beginAppearanceTransition: NO animated: NO];  // I commented this line

    [self.window.rootViewController endAppearanceTransition]; // I commented this line

} 
```

问题：**我是如何解决的？**

**Ans** : 我在应用程序中发现了这条线。这些行使我的应用程序没有收到任何 ViewWillAppear 通知。**当我评论这些行时，它工作正常**。

# cakephp - cakePHP v2.x - 显示数据库字段外的内容

> ID：15864366
> 
> 赞同：2
> 
> 时间：2013-04-07T15:52:43.857
> 
> 标签：cakephp

初学者问题：cakePHP为什么在使用时不显示回车/换行等字符；

```
<?php echo h($property['Property']['fullDesc']); ?> 
```

我尝试使用

```
<?php echo $property['Property']['fullDesc']; ?> 
```

但两者都将文本输出显示为一个文本块而不是段落。

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-07T16:24:51.447

h 函数只是 php htmlspecialchars() 函数的包装器。它不会将回车转换为`<br />`标签。您将需要执行以下操作：

```
echo nl2br(h($property['Property']['fullDesc'])); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T16:21:03.020

基本的PHP...

```
<?php echo nl2br(h($property['Property']['fullDesc'])); ?> 
```

nl2br() 将这些换行符形成`<br>`

提示：您可以让您的烘焙模板自动包含所有文本区域字段。见[http://www.dereuromark.de/2012/04/24/cake-bake-custom-templates-deluxe/](http://www.dereuromark.de/2012/04/24/cake-bake-custom-templates-deluxe/)

# javascript - 客户端的 Node.js javascript 模块

> ID：15864367
> 
> 赞同：-3
> 
> 时间：2013-04-07T15:52:52.900
> 
> 标签：javascript, node.js

我正在使用 node.js+express+socket.io 编写游戏。我花了很长时间才到达我现在的位置，但我觉得它终于找到了我。我有以这种方式提供 html 和 js 文件的服务器：

```
app.post('/game', function(req, res) {
     handleGame(req, res); //it opens file using fs and forwards with res.end(readFile);
});

app.get('/scripts/*', function(req, res) {
     handleStatic(req, res); //same schema
}); 
```

现在，我已经登录并访问了网站[game.html](http://pastebin.com/uXwgbRwc)（从第一个 app.post 收到）。它加载正常，initRight 更改为“bbbb”，如果我在 Firefox 中打开“源代码”，我可以单击并查看[player.js](http://pastebin.com/QmNhYPUC)和[game.js](http://pastebin.com/x71UyeJd)源代码。但是，在 game.js 模块的 init() 函数内部，应该将 initRight 字段再次更改为“AAAAA”，但正如我所见，玩家模块中的 Player 函数在游戏模块中是不可见的（我已经检测到当我在将 socket.io 处理程序移动到不同的模块）。我这样做是因为我在不同的项目中看到过它，我真的不希望下一次通过放置一些 require.js 来获得 require() 函数等而不知所措。我的问题是它应该工作吗？如果是，为什么它可能不在这里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T16:14:18.207

虽然您的问题令人困惑，并且我没有看到您的问题与 NodeJS 的联系，但问题是您的 JavaScript 存在多个问题。

我将您的代码复制到 JSBin：

[http://jsbin.com/iqudic/4/edit](http://jsbin.com/iqudic/4/edit) （直播： http: [//jsbin.com/iqudic/4](http://jsbin.com/iqudic/4)）

然后，我稍微清理了一下。

您可能希望将关联的属性放在 Player 对象的实例上，而不是像以前那样将它们作为新对象返回。

```
var Player = function(playerNick, playerId, playerSocket) {
  this.nick = playerNick;
  this.id = playerId;
  this.socket = playerSocket;
}; 
```

其次，这导致`AAAAAA`不出现：

```
function init() {
    // socket and socket.id should be defined before creating the Player
    localPlayer = new Player('AAAAAA', socket.id, socket);
    document.getElementById('initRight').innerHTML = localPlayer.nick;
} 
```

您的代码假定函数中有一个`socket.id`和`socket`对象可用`init`。它在那条线上崩溃了。您应该始终查看您最喜欢的 Web 浏览器的控制台窗口。

![未定义套接字](https://i.stack.imgur.com/0uczb.png)

# ios - 在 iOS 中使用 RestKit 解析 JSON 失败

> ID：15864374
> 
> 赞同：1
> 
> 时间：2013-04-07T15:53:42.417
> 
> 标签：ios, xml, json, mapping, restkit

我正在构建一个 iOS 应用程序，并且正在使用 RestKit v0.20 来映射 JSON 文件。JSON文件结构如下：

```
{
 "artists":{
  "@total":"100",
  "@page":"1",
  "@itemsPerPage":"30",
  "artist":[
   {
    "@sortName":"Ai Phoenix",
    "@name":"Ai Phoenix",
    "@mbid":"ffb0ac71-a438-4fce-91a5-58041aba0135",
    "url":"http:\/\/www.setlist.fm\/setlists\/ai-phoenix-13d78159.html"
   },
   {
    "@sortName":"Phoenix",
    "@name":"Phoenix",
    "@mbid":"02f4c1ff-65e0-4412-8e8b-6239b0faecb5",
    "url":"http:\/\/www.setlist.fm\/setlists\/phoenix-53d653f9.html"
   }
  ]
} 
```

我不知道如何映射这些具有前缀“@”（@sortname、@name、@mbid）的属性。我试图映射为普通字段（@“@name”，@“@mbid”，...），但它失败了。另一方面，@"url" 对于 "url" 字段效果很好。我已经搜索过，我得到的只是这个符号是来自一个名为[Badgerfish](http://badgerfish.ning.com/)的 XML 文件的翻译。

我这可能会有所帮助，已获得此 JSON 文件的对应 XML：

```
<artists total="100" page="1" itemsPerPage="30">
    <artist sortName="Ai Phoenix" name="Ai Phoenix" mbid="ffb0ac71-a438-4fce-91a5-    58041aba0135">
    <url>
        http://www.setlist.fm/setlists/ai-phoenix-13d78159.html
    </url>
</artist> 
```

如果有人可以帮助我，我将不胜感激。谢谢大家！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T16:52:40.240

这是 RestKit 的一个[已知限制](https://github.com/RestKit/RestKit/issues/1204)。

引用框架作者本人的话：

> 这是一个已知的限制，也是 RestKit 依赖 Cocoa 的键值编码系统进行属性访问的结果。'@' 前缀是为命名键值集合运算符保留的。
> 
> 您将需要更改 JSON 格式以有效地使用 RestKit

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T16:44:06.323

据我所知，RESTKit 使用 KVC，而 @ 由 KVC 使用，因此不能在 JSON 键名中使用它。尝试检查是否可以将 @ 前缀更改为其他内容，例如“m_”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-05T09:14:12.203

如果您不使用键路径进行映射，另一种选择可能是创建一个私有 RestKit 分支并使用 objectForKey: 和 relatives 而不是 valueForKey:。在 iOS 应用程序中，无论如何您都必须发布自己的 RestKit 副本。（为我的简单应用程序做了这个，到目前为止它有效）

# sql-server-2008-r2 - sql server 将镜像数据库拆分到多个设备上

> ID：15864377
> 
> 赞同：0
> 
> 时间：2013-04-07T15:53:48.233
> 
> 标签：sql-server-2008-r2, mirroring, database-management, filegroup

假设我有一个大型生产镜像 1TB 数据库，它驻留在单个 MDF 设备上，我想将其拆分为 5 200 Gig 设备。我想在不中断生产的情况下做到这一点。

我认为我可以打破镜像并使用 RESTORE 过程创建镜像以快速实现拆分到多个设备，而不会中断生产。这样做两次可以让我在几个小时内完成这项工作。

有人做过吗？它是我们在镜像时看到的首选方法吗？

我的其他选择，优点和缺点是什么？和陷阱？

此外，我还记得另一个更有机的过程，即创建 5 个新的新设备，不知何故，随着时间的推移，将对象转移到新设备上。不确定这个过程，但我似乎记得它正在讨论。听起来这可能需要很长时间，并且有时可能会导致一些时钟？

谢谢

...射线

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T14:02:09.587

这并不像最初看起来那么简单，原因是仅仅将文件添加到 SQL Server 是不够的，因为即使您要添加 4 个新文件，它们都将是空白空间，您会有一个包含 1Tb 数据的文件和 4 个空文件，由于 SQL Server 对文件使用比例填充方法，这些文件最终会被填满，但您的大多数查询仍然会命中单个文件。

我认为您这样做是为了提高性能？如果是这样，您将需要将数据移动到不同的文件中，以便实际拆分数据。您是否可以在线执行此操作取决于您是否正在运行 Enterprise Edition（因为这允许您在线重建索引）。

移动表（或更准确地说是聚集索引，在所有意图和目的上与表几乎相同）的一种简单方法是使用新数据文件添加新文件组，然后重建聚集索引，指定新文件组，您可以使用以下方法执行此操作：

```
CREATE CLUSTERED INDEX Existing_Index_Name ON schema_name.table_name(column_name) 
WITH(DROP_EXISTING=ON,Online=ON) on [new_filegroup_name]
GO 
```

此代码将在新文件组上创建新索引，摆脱旧索引，如果您正在运行企业版，它将在不阻止用户的情况下完成所有操作。

有关在文件组之间移动数据的更多方法，请参见以下链接：

[在 SQL Server 数据库文件组之间移动数据](http://www.mssqltips.com/sqlservertip/2442/move-data-between-sql-server-database-filegroups/)

您还应该考虑对表进行分区以帮助提高性能：

[分区表和索引](http://msdn.microsoft.com/en-gb/library/ms190787.aspx)

关于您的镜像设置，您应该打破镜像，然后在主服务器上添加所有文件/文件组，然后在文件组之间移动数据，然后在主服务器上备份修改后的数据库，在镜像上恢复（所以所有文件在镜像上设置相同），然后重新设置镜像。

# c++ - C++ - 使用从构造函数推断出的模板参数作为模板参数贯穿整个类

> ID：15864378
> 
> 赞同：4
> 
> 时间：2013-04-07T15:53:50.240
> 
> 标签：c++, templates, constructor

我想在我的类的其余部分使用构造函数参数的推断类型作为模板参数。这可能吗？

像这样的东西：

```
 class AnyClass 
    {
    public:
      template<Class C>
      AnyClass(C *c) {
      //class C is inferred by constructor argument
      }
      // constructor argument is used as argument in other template types
      nestclass<C> myNestedClass;
      void randomfunction(C *randonarg) {
      }
    } 
```

细节：

事情就是这样。我正在尝试根据继承类的类型初始化我的基类型。在下面的情况下，DerivedA 继承自 Base，但 DerivedB 继承自 DerivedA，因此据我了解`this`，Base 的构造函数中的值（在 DerivedA 中找到）实际上是指向 DerivedB 的指针，因此推断`Base`的类型将是 DerivedB 类型. 但是，我想在我的 Base 类的其余部分中使用这种类型，而不仅仅是将其限制在构造函数中。

```
class Base {

// type T derived from inheriting class
template<T>
Base(T *) {};
//like to use other places
void randomfunction(T *arg1) {
//does something with type T
};
}

class DerivedA : publicBase {

DerivedA() : Base(this) { //this should be a pointer to DerivedB, since it is inherited 
                          //from DerivedB.
}

}

class DerivedB : class DerivedA {
//anything
} 
```

**我的主要目标是在我的基类中使用继承类类型。我意识到这是一种不同的 qst，但我认为我的解决方案会以某种方式在我原来的问题中找到。

我正在考虑使用一种中间方法（类似于下面提出的功能），但不确定它是否会起作用。

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-07T15:57:00.380

不。

但是您可以使您的整个类成为模板类，并创建一个工厂函数来进行类型推导以生成您的模板类。

```
template<typename C>
class AnyClass {
public:
  AnyClass( C* c );
  std::vector<C> vec;
};
AnyClass<C> make_any_class( C* c ) {
  return AnyClass<C>(c);
}; 
```

# php - 循环遍历数据库记录时启动和暂停

> ID：15864379
> 
> 赞同：0
> 
> 时间：2013-04-07T15:53:53.527
> 
> 标签：php, sql, for-loop, record

我有一个页面，其中包含一些有关账单的信息。我通过一个简单的 while 循环获得此信息并在屏幕上回显它。我希望如果用户单击“下一个账单”，那么接下来的两个账单将从数据库行中显示。因此，页面的特定部分需要在“下划线之间”刷新，while 循环需要在前两行暂停，如果用户激活按钮，while 循环应该继续并显示接下来的两行或两行较早的行。

我不知道我该怎么做，从哪里开始以及寻找什么。有没有办法做到这一点？

起始预算：1040 欧元
当前预算：1000 欧元
_
|公司名称：2012 年 12 月 12 日的 20 欧元 <-- db 的第一行
|公司名称：2013 年 1 月 16 日的 20 欧元 <-- db 的第二行
_

<< 上一个账单 下一个账单 >>

```
<?php
$sqBill= mysql_query("SELECT * FROM bill WHERE idUser = '$_SESSION[idSelected]'",  $con);

while($row = mysql_fetch_array($sqBill))
{       
    $company = $row['company'];
    $bill = $row['bill'];
    $date = $row['date'];
    echo '<div><label><b>' . $company . '</b></label><input type="text" value="' . htmlspecialchars($bill) . ' op ' . htmlspecialchars($date) . '" disabled></div>';    

}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T16:35:33.310

```
 <?php
    $limit = $_GET['limit'];
    if(isset($_GET['limit'])){
        $limit = $limit + 2;
    }
    else {
        $limit = 0;
    }
    ?>

    <a href="yourPage.php?limit=<?= $limit; ?>">Next bill</a>
    <?php

    $sqBill= mysql_query("SELECT * FROM bill WHERE idUser = '$_SESSION[idSelected]' LIMIT $limit, 2;"); 
```

非常简单的例子。但是它应该只有 2 条记录 LIMITed 从前 2 条开始并增加 +2

还添加了简单的条件，可以操作前一页。所有的安全性（通过另一种方式发送限制，使其仅为整数等）和进一步的结构化（将所有条件设置为方法等）当然取决于您：

```
<?php

    if($limit > 0) {
        $previous = $limit - 4;

        ?>
        <a href="yourPage.php?limit=<?= $previous; ?>">Previous bill</a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T09:28:39.927

我一直在研究分页，我找到[了这个](http://www.9lessons.info/2010/10/pagination-with-jquery-php-ajax-and.html)例子。我一直在尝试以我的网站风格来实现它，它似乎正在奏效。谢谢你们 ：）

# objective-c - tableView:didSelectRowAtIndexPath - 发送到已释放实例的消息

> ID：15864381
> 
> 赞同：1
> 
> 时间：2013-04-07T15:54:07.367
> 
> 标签：objective-c, xcode, uitableview, didselectrowatindexpath

我已经阅读了很多主题，但我没有任何工作。我有一个代码，但是当我单击一个单元格时出现此错误： `*** -[ModeViewController tableView:didSelectRowAtIndexPath:]: message sent to deallocated instance 0x764df40`
代码：
ModeViewController.h

```
@interface ModeViewController : UIViewController <UITableViewDelegate, UITableViewDataSource>
@property (nonatomic, strong) UITableView *tableViewModeSelection;

@end 
```

模式视图控制器.m

```
@implementation ModeViewController
@synthesize tableViewModeSelection;

- (void)viewDidLoad
{
tableViewModeSelection = [[UITableView alloc] initWithFrame:CGRectMake(10, 80, screenRect.size.width - 20, screenRect.size.height - 90) style:UITableViewStyleGrouped];
tableViewModeSelection.dataSource = self;
tableViewModeSelection.delegate = self;

[self.view addSubview:tableViewModeSelection];

}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {    
static NSString *CellIdentifier = @"Cell";

UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

if (cell == nil) {
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    cell.selectionStyle = UITableViewCellSelectionStyleNone;
}

cell.textLabel.text = [modes objectAtIndex:indexPath.row];
cell.backgroundView = [[UIView alloc] initWithFrame:CGRectZero];

return cell;
}

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
NSLog(@"Selected at row: %i", indexPath.row);
} 
```

可能是什么问题呢？
提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T16:58:37.983

> -[ModeViewController tableView:didSelectRowAtIndexPath:]: 消息发送到释放实例 0x764df40

此消息并不是说“didSelectRowAtIndexPath:”存在问题，而是说“ModeViewController”实例存在问题，当方法“didSelectRowAtIndexPath:”为被调用。

**所以问题在于您的 ModeViewController 实例的生命周期。**

你能展示你的控制器是在哪里以及如何创建和存储的吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T19:12:46.547

也许您在滚动视图上添加了 ModeViewController 的视图，但释放了 ModeViewController 实例本身，它实际上是 tableview 的委托。所以异常来了。解决方案可能是在其视图存在之前不释放 ModeViewController 的实例。

# javascript - 局部变量和参数之间的区别

> ID：15864382
> 
> 赞同：-2
> 
> 时间：2013-04-07T15:54:20.237
> 
> 标签：javascript

```
function addLinks () {
   for (var i=0, link; i<5; i++) {
         link = document.createElement("a");
         link.innerHTML = "Link " + i;
         link.onclick = function (num) {
             return function () {
                 alert(num);
             };
         }(i);
}} 
```

为每个链接创建一个闭包；每个闭包都引用了它创建的范围。由于`num`每个循环都更新了参数，因此`click`在第一个链接上它应该 alert `4`。不是吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T16:04:16.473

一点也不，每个函数调用都会获得一个新的`num`变量副本，因此第一个链接应该警告 0。

如果你真的想让所有的回调共享同一个变量......然后让他们共享同一个变量（包装“num”的东西正是为了避免这个问题，让回调是独立的）：

```
//now all the inner closures use the same "i" variable
//since the variable gets mutated by the for loop
//all links are going to print "5" after the loop ends.
for (var i=0, link; i<5; i++) {
     link = document.createElement("a");
     link.innerHTML = "Link " + i;
     link.onclick = function () {
         alert(i);
     };
} 
```

顺便说一句，这只是因为与其他语言不同，JS 没有循环索引的块范围。for 循环的行为就像你已经完成了

```
var i;
while(i < 5){
   //...
   i++
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T16:14:16.173

不。

而且因为您混淆了几件事：

1.  函数参数是函数的本地参数（带有一个大的“除非”，为数字 2 保存）
    它们旨在将对象（包括数组/函数）或值别名到函数的范围，无论您选择什么名称。
    目标是允许您将参数重命名为您想要的任何内容，以使内部代码有意义，无论您从外部代码作为参数传入什么。
    这与范围无关。

2.  JS 中的变量如果是对象则通过引用传递，如果是标量则通过值传递。
    传递`i`到新闭包的全部意义在于将 的值***作为***`i`参数传递，而不是对 的***引用***，`i`如果***不***包含闭包，就会发生这种情况。

如果你要传递一个对象，而该对象就是`i`上面有 （.`obj.i += 1``i`

*对象*通过***引用***传递，*标量*通过***值***传递。
即使在*技术上*存在字符串和数字对象，只要您不直接对它们进行任何面向对象的操作，它们就会被转换为标量值。

```
var i = 3,
    say_i = function () { console.log(i); }; 
```

相对

```
var i = 3,
    say_i = (function (val) { return function () { console.log(val); }(i)); 
```

第一个给出了***参考***`i`。
运行时`say_i`，它会`i`实时查看 的值，并将其输出到控制台中。

第二个将一个***值***传递给返回函数的外部作用域，别名为 name `val`。
因为数字是通过值而不是通过引用传递的，所以`val`总是等于同一件事，除非从内部更改。

如果你在循环之外创建一个函数，你也可以达到同样的结果：

```
var add_log = function (el, val) { el.onclick = function () { console.log(val); }; },
    i = 0,
    el;

for (; i < ........) {
    el = ....
    add_log(el, i);
} 
```

`i`是按值传递的，因此所有元素`val`在其范围表中都有不同的值，因此，每个元素都会记录不同的数字。

# java - Java - 如何检查用户名是否已经存在于 MySQL 表中

> ID：15864387
> 
> 赞同：1
> 
> 时间：2013-04-07T15:54:50.697
> 
> 标签：java, mysql, database

我想检查一个表`username`中是否已经存在。`database`

**Java 代码：**

```
if (e.getSource() == jButton2)
{
  U = jTextField1.getText();
  if (jTextField1.getText().trim().equals(""))
  {
    JOptionPane.showMessageDialog(this, "Please Write Username !");
  } 
  else if (jPasswordField1.getText().equals(""))
  {
    JOptionPane.showMessageDialog(this, "Please Write Password !");
  } 
  else
  {
    try {
      String Driver = "com.mysql.jdbc.Driver"; 
      String URL = "jdbc:mysql://localhost:3306/LoginForm"; 
      Class.forName(Driver); 
      Connection Conn = DriverManager.getConnection(URL, "root", "12345");
      Statement S = Conn.createStatement();
      ResultSet RS = S.executeQuery(
          "SELECT * FROM login where username ='" + U + 
          "' and Password ='" + jPasswordField1.getText() + "'");

      while (RS.next()) {
        String Username = RS.getString("Username");
        String Password = RS.getString("Password");
        String Admin = RS.getString("Admin");

        if (Username.equals(U) & Password.equals(jPasswordField1.getText()) &
          Admin.equals("0")) 
        {

          JOptionPane.showMessageDialog(this, "Logged In Successfully !");
          this.dispose();
          NormalUsers NU = new NormalUsers();
          break;

        } 
        else if (Username.equals(U) & 
          Password.equals(jPasswordField1.getText()) & Admin.equals("1"))
        {

          JOptionPane.showMessageDialog(this, 
            "Logged In Successfully , Opening Administration Panel !");

          this.dispose();
          AdminPanel AP = new AdminPanel();
          break;
        }
        else 
        {
          JOptionPane.showMessageDialog(this, "Invalid Username Or Password!");
        }
      }
    } 
    catch (SQLException | ClassNotFoundException ex)
    {
    }
  }
} 
```

**问题是：**

*   如果 中没有行`database`，则没有错误消息：`Invalid Username or Password`。
*   `SQL`当我手动执行查询时：`SELECT * From Login`我看到那里存在该行，但由于我过滤`password`，它没有进入`while loop`.

**我应该如何使用 java 检查用户名是否存在于 MySQL 表中？**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-07T16:07:32.657

特别是对于这种查询类型，您不需要遍历 ResultSet。

你正试图找到一个确定的记录。您不会有两条具有相同用户名/密码的记录（我假设登录表的主键是用户名），所以就`if(rs.next())`足够了。如果存在，请验证以检查它是否为管理员。

此外，在查询中，您已经暗示该记录必须具有指定的用户名和密码，一旦返回结果集就无需对其进行测试。

只需测试用户类型，如果是管理员，则显示相应的消息，否则，执行正确的操作。

如果`rs.next()`不满足，则用户不存在，因此在`else`块中，您可以显示有关用户未找到或无效的错误消息。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-07T16:01:31.353

您需要处理的是 MySQL 查询。我认为带有该`WHERE`子句的查询就是您要查找的内容。

此外，您可能希望将该代码放在一个单独的类中，以防止烹饪一些[意大利面条代码](http://aniketsweblog.blogspot.in/2013/04/spaghetti-is-tempting-but-its-better-to.html)。

下面的链接是一个与php语言相关的答案，但你需要看的是`MYSQL query`逻辑： [检查用户名是否存在](https://stackoverflow.com/questions/926989/check-if-username-exists)

**尝试这样的事情：**

```
public String login(String uname, String password) throws Exception{

    String status=null;
    ConnectionHandler handler=new ConnectionHandler(); //class for connection
    Connection con=handler.createConnection();
    Statement stmt=con.createStatement();
    String query="select * from loginTable where username=" +
      "\""+uname+"\""+";";  //get username

    ResultSet rs=stmt.executeQuery(query); 
    String checkUser=rs.getString(1);
    String checkPass=rs.getString(2);
    if(checkUser.equals(uname) && checkPass.equals(password)){
        status="True";
    }
    else{
        status="False";
    }
    con.close();
    return status;
} 
```

使用此`status`字符串，我确定用户名是否有效。让 SQL 完成繁重的工作（就像它设计的那样），而不是自己用 java.lang. 编写代码。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-07T16:03:18.240

你可以做一个`SELECT COUNT(*) AS total FROM login where username`......然后`resultSet.getInt("total")`。如果总数大于 0，则该用户已经存在。我也会使用 PreparedStatement，因为它不太容易受到 sql 注入攻击。看看这个[https://www.owasp.org/index.php/Preventing_SQL_Injection_in_Java](https://www.owasp.org/index.php/Preventing_SQL_Injection_in_Java)。sql计数示例...

```
ResultSet RS = S.executeQuery("SELECT COUNT(*) AS total FROM login where username ='" + U + "' and Password ='" + jPasswordField1.getText() + "'");
        while (RS.next()) {
            if( RS.getInt("total") > 0 ) {
                // user already exists
            } else {
                // user does not exist
            }
        } 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-07T16:23:42.833

假设只返回一行，您可以用 if 语句替换 while 循环。您也不需要在执行查询后检查用户名和密码，因为这是由 where 子句处理的。因此，您的查询可以修改为：

```
PreparedStatement prest = Conn.prepareStatement("SELECT Admin FROM login WHERE username = ? and Password = ?");
prest.setString(1, U);
prest.setString(2, jPasswordField1.getText()); 
```

然后使用 if 语句处理它：

```
if (rs.next()) {
  //Process user level (Normal or admin)
} else {
  //Incorrect login details
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-06-15T16:46:41.287

我是 Java 新手，但我认为你应该检查你的`jPasswordField`，如果`JTextBox`没有问题，但如果是，`JPasswordField`则`getText()`返回一个`byte[]`非字符串，你需要先转换`byte[]`为`string`。

# php - 正则表达式替换标签之间未包含的单词（非html）

> ID：15864391
> 
> 赞同：3
> 
> 时间：2013-04-07T15:55:13.907
> 
> 标签：php, xml, regex

有限的正则表达式经验，我正在使用 preg_replace 使用 PHP。

我想替换不在 [no-glossary] ... [/no-glossary] 标签之间的指定“单词”。如果它们不是“单词”和标签之间的空格，或者如果它们是“单词”之后的空格，我的表达就有效，但是如果我在单词之前放置一个空格（预期）它会失败！

这些工作：

```
$html = '<p>Do not replace [no-glossary]this[/no-glossary] replace this.</p>';
$html = '<p>Do not replace [no-glossary]this [/no-glossary] replace this.</p>'; 
```

这不会：

```
$html = '<p>Do not replace [no-glossary] this [/no-glossary] replace this.</p>'; 
```

使用的模式逐部分解释

```
/                      - find
(?<!\[no-glossary\])   - Not after the [no-glossary] tag
[ ]*                   - Followed by 0 or more spaces (I think this is the problem)
\b(this)\b             - The word "this" between word boundaries
[ ]*                   - Followed by 0 or more spaces
(?!\[\/no-glossary\])  - Not before the [/no-glossary] tag
/ 
```

这是代码：

```
$pattern = "/(?<!\[no-glossary\])[ ]*\b(this)\b[ ]*(?!\[\/no-glossary\])/"; 
$html = '<p>Do not replace [no-glossary] this [/no-glossary] replace this.</p>';
$html = preg_replace($pattern, "that", $html);

print $html; 
```

输出：

```
<p>Do not change [no-glossary] that [/no-glossary] changethat.</p> 
```

问题：

1.  标签之间的单词已更改。
2.  在正确替换的第二个单词前面删除了空格。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T17:31:10.450

只需捕获空格：

```
$subject = <<<LOD
<p>Do not replace [no-glossary]this[/no-glossary] replace this.</p>
<p>Do not replace [no-glossary]this [/no-glossary] replace this.</p>
<p>Do not replace [no-glossary] this[/no-glossary] replace this.</p>
<p>Do not replace [no-glossary] this [/no-glossary] replace this.</p>
LOD;
$pattern = '`(?<!\[no-glossary])( *+)\bthis\b( *+)(?!\[/no-glossary])`';
echo $subject.'<br/>';
echo preg_replace($pattern,"$1rabbit$2",$subject); ?> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-07T17:54:39.017

玩了一点RegEx模式后，发现Regex PCRE引擎有一定的局限性，于是从另一个角度来看待这个问题：

1.  匹配所有`[no-glossary] this [/no-glossary]`和`this`。
2.  过滤结果。

这可以通过以下方式完成`preg_replace_callback()`：

**需要 PHP 5.3+**：

```
$pattern = "/\[no-glossary\][ ]*\bthis\b[ ]*\[\/no-glossary\]|this/"; 
$html = '<p>Do not replace [no-glossary] this [/no-glossary] replace this.</p>';

$html = preg_replace_callback($pattern, function($match){
    if($match[0] == 'this'){
        return('that');
    }else{
        return($match[0]);
    }
}, $html);

print $html; 
```

**如果您没有运行 PHP 5.3+：**

```
$pattern = "/\[no-glossary\][ ]*\bthis\b[ ]*\[\/no-glossary\]|this/"; 
$html = '<p>Do not replace [no-glossary] this [/no-glossary] replace this.</p>';

$html = preg_replace_callback($pattern, 'replace_function', $html);

function replace_function($match){
    if($match[0] == 'this'){
        return('that');
    }else{
        return($match[0]);
    }
}
print $html; 
```

* * *

**动态的：**

```
$tag = 'no-glossary';
$find = 'this';
$replace = 'that';

$pattern = "/\[$tag\][ ]*\b$find\b[ ]*\[\/$tag\]|$find/"; 
$html = '<p>Do not replace [no-glossary] this [/no-glossary] replace this.</p>';

$html = preg_replace_callback($pattern, function($match) use($find, $replace){
    if($match[0] == $find){
        return($replace);
    }else{
        return($match[0]);
    }
}, $html);

print $html; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-07T16:12:32.950

尝试这个：`([^\[\]])this([^\[\]])`

当然，您需要在“这个”词上应用您真正需要的内容。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-07T16:38:47.573

试试这个它只替换`this`单词

```
$pattern = '%([^\da-zA-Z]+)this([^\da-zA-Z]+)%si';
$html = '<p>Do not replace [no-glossary]this sdf[/no-glossary] thisreplace<p> replacethis.</p>replace this.</p>';
function Replace1($M){
//print_r($M);
    return $M[1]."that".$M[2];
}
$html = preg_replace_callback($pattern,"Replace1",$html);
print $html; 
```

输出：

```
<p>Do not replace [no-glossary]that sdf[/no-glossary] thisreplace<p> replacethis.</p>replace that.</p> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-07T16:35:20.360

尝试这个：

```
\b(this)\b(?!(?:(?!\[no-glossary\]).)*?\[/no-glossary\]) 
```

这将排除替换`this`，如果它后面跟着，`[/no-glossary]`除非它`[no-glossary]`首先遇到。

# python - 如何找到 python 内置函数实现？

> ID：15864397
> 
> 赞同：0
> 
> 时间：2013-04-07T15:56:02.200
> 
> 标签：python, python-3.x

为了做出明智的决定，我特别需要看看`range`Python 3 是如何实现的。我如何找到这个实现？我知道我可以使用`module.__file__`模块，但是内置函数属于哪些模块，我在哪里可以找到实现？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-07T15:58:00.570

您可以随时阅读[源代码](http://hg.python.org/cpython/file/3.3/Objects/rangeobject.c#l73)

# c#-4.0 - 比较aspx（html）页面中的日期？

> ID：15864403
> 
> 赞同：0
> 
> 时间：2013-04-07T15:56:46.167
> 
> 标签：c#-4.0, datetime, asp.net-4.0

我正在尝试将当前日期与日期进行比较。我写在下面的部分，但我得到了错误

正如）预期的那样，我是否可以按以下格式进行比较？

```
<asp:Label ID="Label4" runat="server" Text='<%#Convert.ToDateTime(Eval("PDate")) > DateTime.Now ? Eval("PDate","{0:dd-MMM-yy}"):Publish Soon %>'></asp:Label> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T16:18:43.283

关于括号，看起来您需要关闭`)`第二个`Eval`。

您没有`Label4.Text`在代码隐藏中设置的原因是什么？它会让你的生活更轻松。

# c# - 使用掩码在 C# 中搜索文件

> ID：15864405
> 
> 赞同：0
> 
> 时间：2013-04-07T15:56:50.080
> 
> 标签：c#, regex, search, mask

在我的 ASP.NET MVC 应用程序中，我需要为将使用搜索掩码（如***、 ? 等符号）的表组织过滤器。例如，在 Windows 中，如果我们输入 '*.txt' 进行搜索，它将返回所有带有 txt 扩展名的文件。

据我记得面具与'？符号表示任何 1 符号。如果我在正则表达式中使用它，则意味着不是贪婪搜索。

你知道 C# 中有一些标准转换器从这个掩码到正则表达式吗？还是我需要自己创造一切？

一些示例：“test1”和“test2”在列表中。

*   如果我们使用掩码“*st1”，这意味着任何计数中的任何符号都可以在“st1”之前，所以结果我们将有“test1”
*   面具“测试？” 意味着在“测试”之后我们可以有任何符号，但只有一个。所以结果我们将同时拥有“test1”和“test2”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T22:34:13.903

您的标题是“搜索文件...” - 所以也许您可以使用接受通配符的 Directory API？

[http://msdn.microsoft.com/en-us/library/dd413233.aspx](http://msdn.microsoft.com/en-us/library/dd413233.aspx)

顺便说一句，我意识到这是一个很长的镜头，你可能正在做其他事情。

# c++ - Directx 相机向左 90 度

> ID：15864409
> 
> 赞同：0
> 
> 时间：2013-04-07T15:57:21.667
> 
> 标签：c++, directx, directx-11

我需要将相机位置更改为向左 90 度，我使用方法：

```
m_Transform->SetCameraUPV(D3DXVECTOR3(0.0, 1.0f, 0.0f)); 
```

如何设置左90度？

# c++ - 压倒一切？上扬？

> ID：15864410
> 
> 赞同：3
> 
> 时间：2013-04-07T15:57:38.327
> 
> 标签：c++, virtual, overriding

以下代码有bug：最后一行应该是
`bp->g();`
问题是，如果我注释掉那行，`bp->f()`实际上调用了Derived版本，所以我假设编译器将bp视为类Derived，那么为什么在调用g时，编译器将`bp`其视为*Base指针。*

谢谢！

```
#include <iostream>
using namespace std;

class Base {
public:
    virtual void f() const { cout << "Base::f()\n"<< endl; }
    virtual void g() const { cout << "Base::g()\n"<< endl; }
};

class Derived : public Base {
public:
    void f() const {cout << "Derived::f()" << endl; }
    void g(int) const {cout << "Derived::g()" << endl; }
};

int main() {
    Base* bp = new Derived;
    bp->f();
    bp->g(1);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-07T16:00:43.387

You can't override a virtual member function by changing its arguments. That is, `Derived::g(int)` is *not* overriding `Base::g()`.

Imagine you are the compiler. You see the function call `bp->g(1)` and you know that `bp` is a `Base*`. So you look up `Base` for a function called `g` that takes an argument that is an `int`. What do you find? Nothing! There isn't one.

It's only when a function is found in the base class to be virtual that it will then consider the dynamic type of the object. So let's consider the call `bp->f()`. It knows that `bp` is a `Base*`, so it looks up a member function of `Base` called `f` that takes no arguments. It finds `Base::f()` of course, and sees that it is virtual. Because it is virtual, it then looks up the same function in the dynamic type of the object, which is `Derived`. It finds `Derived::f()` and calls that one instead.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T16:00:44.347

This happens because `Derived::g` does not override `Base::g`. It is a completely independent method that happens to have the same name. The two methods are unrelated because they take different arguments.

Thus when you call `bp->g(1)`, the fact that `Base` also happens to have a method called `g` is completely irrelevant.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T16:05:43.217

your Derived class now doesn't override the `Base::g()`:

```
class Derived : public Base {
public:
//...
    void f() const {cout << "Derived::f()" << endl; }
    void g() const {cout << "Derived::g()" << endl; } // <- add this, it is overriding Base::g() const
//...
}; 
```

the method: `void g(int) const {cout << "Derived::g()" << endl; }` is autonomic method of your Derived class, it doesn't override `Base::g` because none of `Base::g` takes `int` argument.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-07T16:09:56.530

实际上，您的示例应该在 bp->g(1); 行中给出编译时错误；在这两种情况下，编译器都将 bp 视为具有 2 个虚函数 void f() 和 void g() 的 Base*，其中 f() 在 Derived 中被覆盖，因此当您调用 bp->f() 时，将通过 vtable 调用 Derived 版本。但是 Base 中没有 void g(int)，因此 bp->g(1) 会导致编译时错误。

# c++ - 重新审视 makefile 和头文件依赖项

> ID：15864412
> 
> 赞同：1
> 
> 时间：2013-04-07T15:57:43.430
> 
> 标签：c++, makefile

*这个问题是从理想主义的角度出发的。// 前向声明*

我一直在学习 makefile 的基础知识，我发现自己想知道[这里](https://stackoverflow.com/questions/297514/how-can-i-have-a-makefile-automatically-rebuild-source-files-that-include-a-modi)问的关于头依赖的同样的事情。从实际的角度来看，我很高兴有解决标头依赖问题的解决方案。然而，再考虑一下这个问题，我发现自己在问为什么头文件依赖会***完全***影响编译单元。在假设下（见前*向声明*) 定义包含在头文件中，实现是在源单元中定义的，是否有任何理由在不修改相应源文件的情况下修改头文件？如果不是，为什么重新编译依赖的源单元也很重要，因为单独的定义修改不会影响程序的执行？是否只是尽早而不是稍后识别接口定义更改中的错误的问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T16:25:32.163

（准确地说，*声明*包含在头文件中，*定义*（即实现）位于源文件中，但这只是术语。）

> *“有什么理由可以修改头文件而不修改相应的源文件？”*

是的。例如，将成员从 更改`public`为`private`。此外，多个源文件可以#include 给定的头文件，因此对头文件的更改可能需要更改其中一个而不是另一个。例如，在类中添加/删除/重命名数据成员可能不需要对类实现进行任何更改，但仍需要更改使用该类的其他源代码。

即使源文件根本没有改变，如果头文件改变了，逻辑上仍然需要重新编译它。例如，添加/删除数据成员会更改类的大小，这意味着任何使用该类实例的代码都必须调整为它们分配的内存量。

# visual-studio - 没有可启动的项目可用于分析

> ID：15864414
> 
> 赞同：5
> 
> 时间：2013-04-07T15:57:49.967
> 
> 标签：visual-studio, windows-phone-7, visual-studio-2012, windows-phone-8

我有一个使用 VS 2012 的项目，当我尝试运行“开始性能分析”Visual Studio 时弹出一条消息：没有可启动的项目可用于分析。

我之前能够运行分析器，但不记得我是否更改了任何设置。

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-07T16:34:24.950

您可能正在尝试使用现有的 Visual Studio 分析工具。对于 Windows Phone 应用程序，您必须使用 SDK 附带的分析器。

您可以通过`Debug`>访问它`Start Windows Phone Application Analysis`。

# sharepoint-2010 - 将当前列表视图过滤器转换为 CAML 查询

> ID：15864420
> 
> 赞同：1
> 
> 时间：2013-04-07T15:58:34.917
> 
> 标签：sharepoint-2010

我在sharepoint2010工作，

我有一个自定义列表。`Employees`.

> http://lists/employees/allitems.aspx

我在列表中做了一些过滤，所以URL会自动变成这样

> http:///lists/employees/allitems.aspx?View={guid}&filterField1=fieldname&FilterValue1=123……

我想将此 URL 转换为 CAML 查询，或者以任何其他方式将过滤后的数据作为 DataTable 获取。

SharePoint SDK 中是否有任何可用功能或对此有何建议？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-28T10:49:06.940

是的。有可能的。！从 CodePlex下载[**SharePoint CAML 查询帮助程序。**](http://spcamlqueryhelper.codeplex.com/)这是构建 CAML 查询的非常有用的工具。

现在按照以下步骤操作：

1.  使用所需的过滤器为您的列表创建一个视图。
2.  打开 SharePoint CAML 查询帮助程序。
3.  输入您的凭据，打开所需的站点。
4.  它会在右侧加载所有列表，双击所需的列表。
5.  单击**打开列表视图**。
6.  双击您之前创建的视图。
7.  现在它将显示完整的查询，从“”中选择并在您的代码中使用它（用您的代码值替换值）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T03:07:22.683

你的caml查询是这样的：

```
 <Query> <Where> 
    <Eq> <FieldRef Name='Title' /> <Value Type='Text'>123</Value> </Eq> 
    </Where> </Query> 
```

和你的 C# 代码：

```
 SPQuery query = new SPQuery();
        query.Query = caml;
        SPContext.Current.List.GetItems(query).GetDataTable(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T06:34:17.070

经过一番搜索，我知道无法自动转换为 CAML，所以我决定自己解析。

# dynamic - 动态规划方法

> ID：15864424
> 
> 赞同：0
> 
> 时间：2013-04-07T15:59:21.140
> 
> 标签：dynamic, time, complexity-theory, knapsack-problem

我想知道您是否对我们考虑优化问题的问题有一些见解：

从 j=1 到 fj(xj) 的 n 的最大 ∑ 使得 ∑ j=1 到 xj <=B 的 n

xj>=0，整数

其中 B 是正整数，fj 是实数到实数

我正在尝试使用动态编程来制定解决方案并计算出这种方法的时间复杂度。

我对动态编程方法有点困惑，如果 n=5 和 B=10，你将如何为 f1(x)=sqrt(x) 等函数实现它

亲切的问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T17:43:22.047

你的问题是解决

```
max(g(n,s) for s=0 to B) 
```

`s`在哪里`sum(x[i] for i = 1 to j)`

其中 g 可以递归表示为

```
g(0,s) = 0
g(j,s) = max(g(j-1,s-x[j])) + f[j](x[j]) for x[j]=0 to s) 
```

这可以通过计算`g`为表格来有效地解决：

```
g(0,s) = 0
g(1,s) = max(g(0,s-x1) + f1(x1) for x1=0 to s)
g(2,s) = max(g(1,s-x2) + f2(x2) for x2=0 to s)
etc. 
```

# c++ - 在 C++ 中设置实现？

> ID：15864428
> 
> 赞同：3
> 
> 时间：2013-04-07T15:59:40.797
> 
> 标签：c++, algorithm, data-structures, stl

根据以下链接 - [http://www.cplusplus.com/reference/set/set/](http://www.cplusplus.com/reference/set/set/) C++ 的 STL 中的集合通常实现为二叉搜索树，我能够在集合等情况下衡量数据类型的行为整数或字符或浮点数或字符串，因为在这些情况下，很容易看到 BST 排序被强加于集合元素，但考虑到集合的二叉搜索树数据结构实现，我无法想象以下内容使用二叉搜索树实现的数据类型：

1.  `set<vector<int>>`或`set<vector<string>>`或`set<vector<double>>`或`set<list<int>>`
2.  `set<map<int, int>>`
3.  `set<stack<int>>`

或者对于许多其他数据类型，如何为这些类型分配内存以及如何维护顺序。

此外，我无法弄清楚以下内容，每当将新向量添加到集合中时，集合数据类型是否会在内部检查集合中的所有向量的相似性或所有映射的相似性，这些是我无法做到的弄清楚。如果有人可以帮助我想象这些概念，那就太好了。

提前致谢 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T16:04:42.190

The set uses a strict weak ordering to determine the position of each element. This is done using [`std::less<T>`](http://en.cppreference.com/w/cpp/utility/functional/less) by default. This will result in a call to `operator<(const T&, const T&)`. Now, containers such as `std::vector` [have such operators](http://en.cppreference.com/w/cpp/container/vector/operator_cmp), which just perform a [lexicographical comparison](http://en.wikipedia.org/wiki/Lexicographical_order) of all the elements. That is how an `std::set<std::vector<int>>` can work out of the box.

When a new element is inserted, the set *does not* have to check all the elements. Insertion is a logarithmic complexity operation, which is why the implementation tends to be a self-balancing binary tree (I phrase it with this rather odd causality because the C++ standard does not specify what the implementation should be like, just how it should behave.)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T16:04:30.150

A `set<T>` always works the same, regardless of what concrete type `T` is. On an insertion, it figures out where in the tree^* to place the new element by comparing it with various existing elements using `std::less<T>` (which by default calls `operator<`). If `operator<` isn't overloaded for `T`, then it won't compile.

Therefore, the details of how to order instances of `T` are abstracted from the details of how to maintain a set.

* * *

[* Note that `std::set` doesn't have to use a tree; that's just a typical implementation.]

# django - PyCharm 中更好的 Django Admin 支持？

> ID：15864431
> 
> 赞同：1
> 
> 时间：2013-04-07T15:59:42.703
> 
> 标签：django, pycharm

`admin.modelAdmin`在更改 Django 中的默认类时，似乎没有对 Django 的自动完成支持。我的意思如下所示：

```
fieldsets = [
    ('Story', {
        'fields': ('title', 'url', 'points'),
    }),
    ('Moderator', {
        # Un-Comment the line below to make set collapsible
        'classes': (),
        'fields': ('moderator',),
    }),
    ('Change History', {
        # Un-Comment the line below to make set collapsible
        'classes': ('collapse',),
        'fields': ('created_at', 'updated_at'),
    }),
] 
```

问题是没有任何弹出，当您尝试配置类似的东西时`'classes': ('...',),`，有没有办法添加自动完成或我现在缺少的任何功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T05:54:52.110

首先检查您是否为当前项目启用了 Django 支持：

> 文件 > 设置 > Django 支持 > 启用 Django 支持

如果您正在寻找的功能仍然不存在，请在[http://youtrack.jetbrains.com/issues/PY提交功能请求票](http://youtrack.jetbrains.com/issues/PY)

# jquery - ujquery高度排列

> ID：15864432
> 
> 赞同：0
> 
> 时间：2013-04-07T15:59:45.743
> 
> 标签：jquery, html, css

我在我的 html 代码中使用 Ujquery 的自动菜单手风琴。网站在[这里](http://jqueryui.com/accordion/#default)

我在我的 css 文件中管理以使用以下代码调整它的宽度：

```
.menu{

    position: absolute;
    top: 5%;
    left: 10%;
    width: 80%;
    background-color: blue;
 } 
```

为什么宽度参数效果很好，而高度却不行？我想将所有这些菜单设置为可用空间的 50%。提前感谢您的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T16:09:02.573

```
.ui-accordion-content{height:50%;position:relative;} 
```

根本不初始化 heightStyle。

```
 $(function() {
    $( "#accordion" ).accordion({
    });
  }); 
```

小提琴：http: [//jsfiddle.net/calder12/h8KhV/2/](http://jsfiddle.net/calder12/h8KhV/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T16:53:53.717

如果您只是想让手风琴填充页面上给定的空间。尝试这个-

[http://jsfiddle.net/apaul34208/GxVYN/1/](http://jsfiddle.net/apaul34208/GxVYN/1/)

js

```
 $(function () {
     $("#accordion").accordion({
         heightStyle: "fill"
     });
 }); 
```

css

```
body {
    height:500px;
}
.container {
    height:50%;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T16:51:25.250

感谢您的时间。

[我按照这里](http://jqueryui.com/accordion/#fillspace)的代码解决它：

我的错误是没有查看所有的 javascript 文档！再次感谢您的时间！

# matlab - 空间和频域图像锐化的效率、性能和效果

> ID：15864433
> 
> 赞同：0
> 
> 时间：2013-04-07T15:59:48.940
> 
> 标签：matlab, image-processing, spatial, frequency-domain

我的问题有两部分，

第一部分，是否有一个 MATLAB 函数可以生成一个可以锐化图像边缘的频域掩码？还是我必须使用在空间域中创建掩码，`fspecial()`然后使用将其映射到频域`fft2(spatail_domain_mask)`？

第二部分，考虑一种锐化图像边缘的图像增强技术。如果我们在空间域和频域比较这个操作，哪个更有效？哪个效率更高？哪一个具有更好的整体性能？

# python - 是最小堆函数

> ID：15864434
> 
> 赞同：3
> 
> 时间：2013-04-07T15:59:51.477
> 
> 标签：python, heap, min-heap

我想编写一个函数来告诉我给定列表是否是最小堆。

到目前为止我所写的：

```
def is_min_heap(L):
    return _is_min_heap(L, 0)

def _is_min_heap(L, i):
    if 
         #base case
    else:
        return (L[i] < L[2*i+1] and _is_min_heap(L, 2*i+1)) and (L[i] < L[2*i+2] and _is_min_heap(L, 2*1+2)) 
```

我不确定基本情况应该是什么，我的递归调用是否正确？

另外，您如何控制索引最终不会超出范围？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T17:13:22.330

对于给定的，您有三种不同的情况`i`：您有两个孩子，在这种情况下，您需要检查两个孩子的堆属性并递归检查两个子树；或者你只有一个左孩子，在这种情况下你只需要检查那个；或者你没有孩子，即`i`是一片叶子，它本身总是一个有效的堆。

您可以通过检查子项的索引是否仍在列表范围内来检查子项的存在。

```
def _is_min_heap(L, i):
    l, r = 2 * i + 1, 2 * i + 2

    if r < len(L): # has left and right children
        if L[l] < L[i] or L[r] < L[i]: # heap property is violated
            return False

        # check both children trees
        return _is_min_heap(L, l) and _is_min_heap(L, r)
    elif l < len(L): # only has left children
        if L[l] < L[i]: # heap property is violated
            return False

        # check left children tree
        return _is_min_heap(L, l)
    else: # has no children
        return True 
```

# ios - 应用程序需要等待互联网连接

> ID：15864438
> 
> 赞同：0
> 
> 时间：2013-04-07T16:00:41.380
> 
> 标签：ios, objective-c

场景很简单，我的应用程序会在它激活时查找信息。大多数情况下，它只会使用缓存，但在某些情况下，它需要 Internet 连接来询问所需的信息。

我使用了 Reachability ( [https://github.com/tonymillion/Reachability](https://github.com/tonymillion/Reachability) ) 来确定是否有可用的活动连接。问题是 iPhone 在一段时间处于非活动状态后需要几秒钟才能激活连接。这意味着应用程序看到没有可用的连接并将显示错误消息。

我想要发生的是应用程序将首先检查是否有可用的连接：

```
Reachability *reachability = [Reachability reachabilityWithHostname:URL_LOTTOTALL_WEB];
NetworkStatus internetStatus = [reachability currentReachabilityStatus];
if (internetStatus == NotReachable) {
} else {
} 
```

如果没有可用的连接，我想在几秒钟后重试（可能是 2 或 3）。如果仍然没有可用的连接，则显示错误消息。对实现这一目标的简单实现有什么建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T16:10:23.467

[尝试使用此答案](https://stackoverflow.com/a/3597085/384916)`Reachability`中描述 的回调块。

```
internetReachableFoo = [Reachability reachabilityWithHostname:@"www.google.com"];
// Internet is reachable
internetReachableFoo.reachableBlock = ^(Reachability*reach)
{
    // Update the UI on the main thread
    dispatch_async(dispatch_get_main_queue(), ^{
        NSLog(@"Yayyy, we have the interwebs!");
    });
};

// Internet is not reachable
internetReachableFoo.unreachableBlock = ^(Reachability*reach)
{
    // Update the UI on the main thread
    dispatch_async(dispatch_get_main_queue(), ^{
        NSLog(@"Someone broke the internet :(");
    });
};

[internetReachableFoo startNotifier]; 
```

# java - 如何通过点制作直线曲线

> ID：15864441
> 
> 赞同：11
> 
> 时间：2013-04-07T16:00:44.677
> 
> 标签：java, awt, curves, splines

我正在寻找一种通过多个点制作直线曲线的方法。最好使用 3 个点，尽管我认为为了给进入点的线的角度提供上下文，可以说，可能需要更多的点来给曲线提供上下文。

一般来说，一个起点P1，一个控制点P2和一个终点P3，线应该从P1弯到P2，然后从P2弯到P3。

实际上，这是我想要达到的效果的完美示例：

![欧文霍尔样条](https://i.stack.imgur.com/oofgB.png)

如果我能做到这一点，我真的会永远感激不尽！

到目前为止，在 Java 中，我尝试过使用[QuadCurve2D.Double](http://docs.oracle.com/javase/6/docs/api/java/awt/geom/QuadCurve2D.Double.html)、[Cub icCurve2D.Double](http://docs.oracle.com/javase/6/docs/api/java/awt/geom/CubicCurve2D.Double.html)和[Path2D.Double](http://docs.oracle.com/javase/6/docs/api/java/awt/geom/Path2D.Double.html)（将 curveTo 与 Path2D.Double 一起使用）之类的东西，但无济于事 - 绘制的曲线甚至没有接近通过指定的控制点。

这是迄今为止我尝试过的方法的图像：

![在此处输入图像描述](https://i.stack.imgur.com/Qfgs6.png)

这是我用来生成图像中的点和曲线的代码：

```
 Graphics2D g = (Graphics2D) window.getGraphics();
    g.setColor(Color.blue);
    int d = 4;

    // P0
    int x0 = window.getWidth()/8;
    int y0 = 250;
    g.drawString("P0", x0, y0 + 4*d);
    g.fillRect(x0, y0, d, d);

    // P1
    int x1 = (window.getWidth()/7)*2;
    int y1 = 235;
    g.drawString("P1", x1, y1 + 4*d);
    g.fillRect(x1, y1, d, d);

    // P2
    int x2 = (window.getWidth()/2);
    int y2 = 200;
    g.drawString("P2", x2, y2 - 2*d);
    g.fillRect(x2, y2, d, d);

    // P3
    int x3 = (window.getWidth()/7)*5;
    int y3 = 235;
    g.drawString("P3", x3, y3 + 4*d);
    g.fillRect(x3, y3, d, d);

            // P4
    int x4 = (window.getWidth()/8)*7;
    int y4 = 250;
    g.drawString("P4", x4, y4 + 4*d);
    g.fillRect(x4, y4, d, d);

    g.setColor(Color.cyan);
    QuadCurve2D quadCurve = new QuadCurve2D.Double(x0, y0, x2, y2, x4, y4);
    g.draw(quadCurve);

    g.setColor(Color.YELLOW);
    CubicCurve2D.Double cubicCurve = new CubicCurve2D.Double((double)x0, (double)y0, 
                                                             (double)x1, (double)y1, 
                                                             (double)x2, (double)y2, 
                                                             (double)x4, (double)y4);
    g.draw(cubicCurve);

    g.setColor(Color.red);      
    Path2D.Double path1 = new Path2D.Double();
    path1.moveTo(x1, y1);
    path1.curveTo(x0, y0, x2, y2, x4, y4);
    g.draw(path1); 
```

我希望曲线通过点的原因是我想“平滑”我写的折线图上顶点之间的过渡。在任何人提到它之前，**JFree Chart 不是一个选项**。我知道使用了不同类型的曲线和样条曲线，但我没有太多运气来准确理解它们的工作原理或如何实现适合我需要的东西。

我将非常感谢提供的任何帮助 - 提前致谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-07T17:20:34.623

我认为您错过了*控制点*的概念。控制点通常不在路径本身上。相反，它们控制路径曲线在点之间的形状。有关完整详细信息，请参阅[样条教程](http://www.html5canvastutorials.com/tutorials/html5-canvas-bezier-curves/)。

现在到了手头的问题，曲线上有点，但没有实际的控制点。有一些技术，如 Cardinal Spline，用于派生控制点，然后传递给您提到的曲线绘制 API 之一。您可能需要该`Path2D.Double`选项，以便可以将各个曲线平滑地串在一起。

所以对于从 P1 到 P2 到 P3 的绘图，而不是

```
Path2D.Double path1 = new Path2D.Double();
path1.moveTo(x1, y1);
path1.curveTo(x0, y0, x2, y2, x4, y4);
g.draw(path1); 
```

你要

```
Path2D.Double path1 = new Path2D.Double();
path1.moveTo(x1, y1);
path1.curveTo(cx1a, cy1a, cx1b, cy1b, x2, y2);
path1.curveTo(cx2a, cy2a, cx2b, cy2b, x3, y3);
g.draw(path1); 
```

其中`cx`和`cy`坐标是您的派生控制点，每个三次样条线段有两个控制点。可能，

```
cx1a = x1 + (x2 - x1) / 3;
cy1a = y1 + (y2 - y1) / 3;
cx1b = x2 - (x3 - x1) / 3;
cy1b = y2 - (y3 - y1) / 3;
cx2a = x2 + (x3 - x1) / 3;
cy2a = y2 + (y3 - y1) / 3;
cx2b = x3 - (x3 - x2) / 3;
cy2b = y3 - (y3 - y2) / 3; 
```

这里的模式是，对于内部点（在这种情况下只有 P2），它之前和之后的控制点（c1b 和 c2a）被它之前和之后的点（P1 和 P3）之间的线的斜率偏移。对于边缘点，控制点基于该点与下一个最近点之间的斜率。

如果您有特定领域的信息，您可能会选择不同的控制点。例如，您可能希望将端点处的斜率强制为 0。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-07T16:41:36.150

好吧，也许这会有所帮助：P

通过Catmull-Rom曲线示例相同原理不同语言... [http://schepers.cc/svg/path/dotty.svg](http://schepers.cc/svg/path/dotty.svg)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-07T17:11:17.007

基本上你要的是*三次样条插值*，我可以在网上找到这个程序[`Interp2.java`](http://www2.math.umd.edu/~petersd/Interp2_code.java)。它实际上包括多项式样条和三次样条。

不幸的是，它是一个小程序，而不是一个实际的类，但您仍然可以查看代码以了解他们是如何做到的。这总是一件好事。

# ruby - 如何创建一个带有文本的PNG文件？

> ID：15864443
> 
> 赞同：2
> 
> 时间：2013-04-07T16:01:18.523
> 
> 标签：ruby

从 Ruby 应用程序，我需要*在内存*中动态创建一个图像文件。我更喜欢 PNG 文件，所以我首先查看了[chunky_png](https://github.com/wvanbergen/chunky_png)。它可以让我操作 PNG 图像并在画布上画一点。但是，它不允许我将文本呈现为像素。

最好的方法是什么？

非常感谢任何提示。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-07T16:21:58.883

您可以使用[RMagick](http://rmagick.rubyforge.org/) ( [doc](http://studio.imagemagick.org/RMagick/doc/) )。请注意，它可能难以安装，因为它需要 ImageMagick 库（与`chunky_png`纯 Ruby 不同）。

安装后，您可以使用[`annotate`](http://www.imagemagick.org/RMagick/doc/draw.html#annotate)方法或矢量绘图模块 RVG（使用[教程中使用的](http://studio.imagemagick.org/RMagick/doc/rvgtut.html)[文本方法](http://studio.imagemagick.org/RMagick/doc/rvg.html#RVG_text)）。

# wordpress - 在 $wpdb 中使用 ORDER BY

> ID：15864449
> 
> 赞同：2
> 
> 时间：2013-04-07T16:02:00.803
> 
> 标签：wordpress

如果我使用此代码查询数据库，我会按预期得到一个包含 4 个对象的数组。

```
global $wpdb;
$rows = $wpdb->get_results("SELECT * FROM ppm_playlists");
var_dump($rows); die(); 
```

但是如果我使用它进行查询，我会得到一个空数组。

```
global $wpdb;
$rows = $wpdb->get_results("SELECT * FROM ppm_playlists ORDER BY sort-order ASC");
var_dump($rows); die(); 
```

在文档中缺少的数据库类中使用“ORDER BY”是否有“技巧”？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T16:49:55.307

查询失败的原因是因为`sort-order`被解释为`sort - order`（从名为的列中减去名为`order`的列`sort`）。如果您希望在列名中保留连字符，则必须将列包装在反引号中：

```
SELECT * FROM ppm_playlists ORDER BY `sort-order` ASC; 
```

[但是请注意](http://www.hockinson.com/programmer-web-designer-denver-co-usa.php?s=46)，不建议在列名中使用连字符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T16:48:31.533

替换`sort-order ASC`为`sort_order ASC`

当遇到此类问题时，将有问题的查询放入 phpMyAdmin 以定位问题会有所帮助。

# regex - 从 MDX 查询中提取元素的正则表达式

> ID：15864454
> 
> 赞同：6
> 
> 时间：2013-04-07T16:02:43.763
> 
> 标签：regex, mdx

我想从给定的 MDX 查询中提取信息或查询轴元素。假设我有这个查询：

```
SELECT NON EMPTY {
    Hierarchize({[Product].[Product Family].Members})
} ON COLUMNS, 
NON EMPTY Hierarchize ( 
    Union ( 
        CrossJoin ( {[Time].[1997].[Q1]}, 
            CrossJoin ([Store].[Store Name].Members, 
                [Store Type].[Store Type].Members
            )
        ), 
        CrossJoin({[Time].[1997].[Q2]}, 
            CrossJoin([Store].[Store Name].Members, 
                [Store Type].[Store Type].Members
            )
        )
    )
) ON ROWS FROM [Sales] 
WHERE {
    Hierarchize({[Measures].[Unit Sales]})
} 
```

我想提取的子字符串具有这样的模式： [...](.[...]) 或 [...].[...].Members

请注意，... 表示任何字母数字，括号内的含义可以重复出现。因此，我期望的结果是：

> [产品].[产品系列].成员；[时间].[1997].[Q1]；[时间].[1997].[Q2]；[商店].[商店名称].会员；[店铺类型].[店铺类型].会员；[测量].[单位销售额]

我尽了最大努力，终于想出了这个正则表达式：

```
\[.*?[A-Za-z\s]\](.*?(\.\[.*?[A-Za-z\s]\])|(\.Members)) 
```

但结果是：

> [产品].[产品系列]；[时间].[1997].[Q1]}, CrossJoin ([Store]; [Store Name].Members, [Store Type].[Store Type]; [Time].[1997].[Q2]}, CrossJoin ([Store]; [Store Name].Members, [Store Type].[Store Type]; [Sales] WHERE {Hierarchize({[Measures].[Unit Sales]

有人可以对我的正则表达式进行任何更正吗？任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-07T17:00:33.103

嗯，你可以试试这个：

```
(\[[\w ]+\]\.\[[\w ]+\](?:\.(?:Members|\[Q\d\]))?) 
```

这似乎对我有用。我在[Rubular](http://rubular.com/r/UToQ4mX94E)上试过了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T17:43:11.650

有趣的任务...

那么请尝试以下
`(?<result>\[[^\]]+\]\.\[[^\]]+\]\.Members)|(?<result>(\[[^\]]+\]\.){2}\[[^\]]+\])`

如果你`result`在每场比赛中阅读小组，你会得到你想要的。我使用[Expresso](http://www.ultrapico.com/Expresso.htm)构建`RegEx`.

# javascript - Have a function execute on the click of an 'input' button in Javascript

> ID：15864456
> 
> 赞同：0
> 
> 时间：2013-04-07T16:02:53.297
> 
> 标签：javascript

I am trying to make a Javascript function document.write on the click of a button. Here's my code:

```
 function answer {
    var answer = eval(Calc.Input.value);

    if (BUTTON IS PRESSED);
    document.write(answer)
    } 
```

The code for the button that is pressed is:

> ```
>  <INPUT TYPE="button" NAME="DoIt"  VALUE="  =  " OnClick="Calc.Input.value = eval(Calc.Input.value)"> 
> ```

So to sum up, on the click of that button, I need the answer of the value returned to become a variable, so that I can document.write it.

# java - Breakdown of map time in hadoop

> ID：15864457
> 
> 赞同：1
> 
> 时间：2013-04-07T16:02:54.937
> 
> 标签：java, hadoop, mapreduce

I wanted to know how the mapper time is calculated in hadoop. I noted the time in map setup() method and map cleanup() method for each map task and the difference would have been the mapper time. But when I go to my job tracker page and analyze the job the time shown for the mapper is different and is higher than the difference value which I got previously. Can someone explain me this anomaly

# mysql - MySQL 相关子查询按日期和时间排序

> ID：15864458
> 
> 赞同：1
> 
> 时间：2013-04-07T16:03:04.453
> 
> 标签：mysql, sql, greatest-n-per-group, correlated-subquery

下午所有，我是一个stackoverflow处女，所以请放轻松。我很难从数据库中检索我需要的信息，并相信相关的子查询可能是答案，但我不确定。

我需要的所有信息都来自一张桌子：

```
╔══════╦══════════════╦══════════════╦════════════╦══════╦═════════════════════╦═════════════╗
║ COL1 ║     COL2     ║   FILENAME   ║    COL4    ║ COL5 ║      DATETIME       ║    COL7     ║
╠══════╬══════════════╬══════════════╬════════════╬══════╬═════════════════════╬═════════════╣
║    2 ║ generaluser1 ║ shared2.txt  ║ Shared     ║ XP1  ║ 2013-04-04 19:23:09 ║ Checked In  ║
║    3 ║ generaluser1 ║ shared2.txt  ║ Shared     ║ XP1  ║ 2013-04-04 19:24:06 ║ Checked Out ║
║    4 ║ generaluser1 ║ shared2.txt  ║ Shared     ║ XP1  ║ 2013-04-04 19:24:20 ║ Checked In  ║
║    5 ║ generaluser1 ║ restdoc3.txt ║ Restricted ║ XP1  ║ 2013-04-04 19:25:04 ║ Checked In  ║
║    6 ║ generaluser1 ║ restdoc3.txt ║ Restricted ║ XP1  ║ 2013-04-04 19:26:08 ║ Checked Out ║
║    7 ║ generaluser1 ║ restdoc3.txt ║ Restricted ║ XP1  ║ 2013-04-04 19:26:21 ║ Checked In  ║
║    8 ║ generaluser1 ║ shared2.txt  ║ Shared     ║ XP1  ║ 2013-04-04 19:26:51 ║ Checked Out ║
║    9 ║ generaluser1 ║ restdoc3.txt ║ Restricted ║ XP1  ║ 2013-04-04 19:28:41 ║ Checked Out ║
║   10 ║ generaluser1 ║ restdoc3.txt ║ Restricted ║ XP1  ║ 2013-04-04 19:31:01 ║ Checked In  ║
║   11 ║ generaluser2 ║ restdoc3.txt ║ Restricted ║ XP2  ║ 2013-04-04 19:31:13 ║ Checked Out ║
║   12 ║ generaluser1 ║ shared2.txt  ║ Shared     ║ XP1  ║ 2013-04-04 19:33:03 ║ Checked In  ║
║   13 ║ generaluser2 ║ restdoc3.txt ║ Restricted ║ XP2  ║ 2013-04-04 19:33:28 ║ Checked In  ║
║   14 ║ generaluser2 ║ restdoc4.txt ║ Restricted ║ XP2  ║ 2013-04-04 19:33:36 ║ Checked In  ║
╚══════╩══════════════╩══════════════╩════════════╩══════╩═════════════════════╩═════════════╝ 
```

我要做的是为日期时间最新的每个文档名称（col2）检索一行。

因此，我想为上述行检索/输出的结果将只是：

```
╔══════╦══════════════╦══════════════╦════════════╦══════╦═════════════════════╦════════════╗
║ COL1 ║     COL2     ║   FILENAME   ║    COL4    ║ COL5 ║      DATETIME       ║    COL7    ║
╠══════╬══════════════╬══════════════╬════════════╬══════╬═════════════════════╬════════════╣
║   12 ║ generaluser1 ║ shared2.txt  ║ Shared     ║ XP1  ║ 2013-04-04 19:33:03 ║ Checked In ║
║   13 ║ generaluser2 ║ restdoc3.txt ║ Restricted ║ XP2  ║ 2013-04-04 19:33:28 ║ Checked In ║
║   14 ║ generaluser2 ║ restdoc4.txt ║ Restricted ║ XP2  ║ 2013-04-04 19:33:36 ║ Checked In ║
╚══════╩══════════════╩══════════════╩════════════╩══════╩═════════════════════╩════════════╝ 
```

我可以设法获取我选择的文档或所有文档的最新行，但不能获取每个唯一文档的最新行。

提前感谢任何帮助我的人。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T16:06:19.403

假设包含文件名`FileName`的列名是，包含日期和时间的列是`DateTime`。

```
SELECT  a.*
FROM    TableName a
        INNER JOIN
        (
            SELECT  FileName, MAX(DateTime) max_date
            FROM    TableName
            GROUP   BY FileName
        ) b ON a.FileName = b.FileName AND
                a.DateTime = b.max_Date 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/3bf3c/1)

输出

```
╔══════╦══════════════╦══════════════╦════════════╦══════╦═════════════════════╦════════════╗
║ COL1 ║     COL2     ║   FILENAME   ║    COL4    ║ COL5 ║      DATETIME       ║    COL7    ║
╠══════╬══════════════╬══════════════╬════════════╬══════╬═════════════════════╬════════════╣
║   12 ║ generaluser1 ║ shared2.txt  ║ Shared     ║ XP1  ║ 2013-04-04 19:33:03 ║ Checked In ║
║   13 ║ generaluser2 ║ restdoc3.txt ║ Restricted ║ XP2  ║ 2013-04-04 19:33:28 ║ Checked In ║
║   14 ║ generaluser2 ║ restdoc4.txt ║ Restricted ║ XP2  ║ 2013-04-04 19:33:36 ║ Checked In ║
╚══════╩══════════════╩══════════════╩════════════╩══════╩═════════════════════╩════════════╝ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T20:41:30.870

询问：

**[SQLFIDDLE示例](http://www.sqlfiddle.com/#!2/3bf3c/7)**

```
SELECT a.*
FROM TableName a
WHERE a.DateTime = (SELECT MAX(b.DateTime)
                    FROM TableName b
                    WHERE b.FileName = a.FileName) 
```

结果：

```
| COL1 |         COL2 |     FILENAME |       COL4 | COL5 |                     DATETIME |       COL7 |
------------------------------------------------------------------------------------------------------
|   12 | generaluser1 |  shared2.txt |     Shared |  XP1 | April, 04 2013 19:33:03+0000 | Checked In |
|   13 | generaluser2 | restdoc3.txt | Restricted |  XP2 | April, 04 2013 19:33:28+0000 | Checked In |
|   14 | generaluser2 | restdoc4.txt | Restricted |  XP2 | April, 04 2013 19:33:36+0000 | Checked In | 
```

# c++ - 抑制 -Wtautological-compare 警告

> ID：15864461
> 
> 赞同：6
> 
> 时间：2013-04-07T16:03:20.520
> 
> 标签：c++, clang

我有一些代码

```
Q_ASSERT(value_which_is_always_smaller_than_4 < 4) 
```

其中 Q_ASSERT 是 Qts 断言宏。现在当当，当看到这个警告我时，因为比较总是正确的。很高兴它可以检测到这一点，但这就是 assert 语句的重点。我可以以某种方式抑制警告，但只能在断言语句中？我仍然希望在其他地方受到警告。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-07T16:27:28.607

您可以使用以下方法定义一个新宏来包装`Q_ASSERT`并自动使警告静音`#pragma clang diagnostic ignored`：

```
#define STR(x) #x
#define PRAGMA(x) _Pragma(STR(x))
#define MY_ASSERT(x) PRAGMA(clang diagnostic push) \
PRAGMA(clang diagnostic ignored "-Wtautological-compare") \
Q_ASSERT(x) \
PRAGMA(clang diagnostic pop) 
```

现在只是做

```
MY_ASSERT(3<4) 
```

不应产生警告。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-07T16:21:42.650

您可以通过添加到 Clang 命令行来为整个文件禁用它`-Wno-tautological-compare`（在诸如`-Wall`打开警告之类的标志之后）。这种方法的缺点是警告现在在该翻译单元的任何地方都被禁用，而不仅仅是`Q_ASSERT(...)`宏实例。

另一种更繁琐但细粒度的方法是使用以下内容包装生成此警告的宏的每个实例：

```
#pragma clang diagnostic push
#pragma clang diagnostic ignored "-Wtautological-compare"

Q_ASSERT(value_which_is_always_smaller_than_4 < 4)

#pragma clang diagnostic pop 
```

# .net - set a textbox at the bottom part of .rdlc report

> ID：15864462
> 
> 赞同：4
> 
> 时间：2013-04-07T16:03:37.173
> 
> 标签：.net, visual-studio-2010, c#-4.0, rdlc

I am using a tablix in my .rdlc report. There is a textbox with text "Signature". I want to place this textbox at the bottom side (just before the page footer) on the last page of the report.

I have googled for this solution. but no satisfactory result found.

My enviroment is VS2010,framework 4.0.

Any suggesstion?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-09-09T14:24:35.177

没有简单的方法可以将某些内容与 RDLC 报告页面的底部对齐。但是，有一个很好的解决方法可以复制它，尽管它非常复杂。按着这些次序：

1.  创建一个生成空换行符的方法*（“CarriageReturn LineFeed”）*：

    ```
    public string GenerateCrLf(int Count)
    {
        string Value = "";
        for (int i = 0; i <= Count; i ++) {
            Value = Value + " " + Environment.NewLine;
         }
        return Value;
    } 
    ```

2.  在 Tablix 的末尾添加一个新行，其中包含一个包含以下表达式的 TextBox：`=Code.GenerateCrLf(`**x**`- cint(CountRows("Table1")))` 将***x***替换为表示行数的数字。这个数字的值是通过反复试验获得的，如果表的大小经常变化，您可以编写另一个函数，根据您的 tablix 拥有的行数和可以在里面显示的行数来计算这个数字单页。同样，您必须通过大量试验和错误来找到幻数，但它可以通过这种方式动态生成。

3.  在 Tablix 下方添加 TextBox（或表格/签名/...），它将自动显示在下方。

* * *

此答案取自[本教程和演示](http://thinkaboutit.be/2012/05/placeinbottom-in-rdlc-layout/)。所有功劳归功于作家史蒂文·伦德斯。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-03-29T10:18:21.720

在页脚部分添加文本框。然后将文本框的可见性设置为仅当当前 pageNumber 与总页码相同时才显示文本框。（如果 Globals!PageNumber <> Globals!TotalPages 则隐藏）

因此，您的文本框只会出现在报告的最后一页。

# spring-integration - request-reply spring 集成 jms inbound 和 http outbound

> ID：15864465
> 
> 赞同：0
> 
> 时间：2013-04-07T16:03:43.143
> 
> 标签：spring-integration

```
<int-jms:channel id="inputChannel"  queue-name="WorkRequest"/>
<int-jms:inbound-gateway request-channel="inputChannel" request-destination-name="WorkRequest" extract-request-payload="true" reply-timeout="12000000"/>
<int:chain input-channel="inputChannel">

    <int-http:outbound-gateway
          url="http://localhost:8080/Validate.php?fileid={foo}"
          mapped-request-headers="jms*,reply*,HTTP_REQUEST_HEADERS"
          http-method="GET"
          reply-timeout="12000000" extract-request-payload="true">
         <int-http:uri-variable name="foo" expression="headers.fileid"/>
    </int-http:outbound-gateway>
</int:chain> 
```

来自 http 出站的响应不会路由到临时 JMS 队列。我想知道我应该如何重定向到正确的队列。我将 header-enricher 与 replyTo 一起使用，但它不起作用。请帮忙。消费的 ActiveMQTextMessage 具有需要发布响应的临时队列。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T16:16:35.497

您能解释一下为什么在 JMS 入站网关和 HTTP 出站网关之间有一个 JMS 支持的通道吗？如果您删除它（依赖于直接通道），标头应该传递，因为 HTTP 响应用于创建 JMS 回复。

# android - ListView 行中 ImageView 上的圆角

> ID：15864467
> 
> 赞同：4
> 
> 时间：2013-04-07T16:03:56.487
> 
> 标签：android, imageview, shape

我在电梯视图的每一行都有一个用户图标。我想要一个圆角。这是我所拥有的，它什么也没做：

```
 <ImageView
        android:background="@drawable/profile_widget_selector"
        android:id="@+id/ivTopUserPP"
        android:layout_width="65dp"
        android:layout_height="65dp"
        android:baselineAlignBottom="@drawable/profile_pic_shape"
        android:src="@drawable/usericon" /> 
```

**profile_pic_shape.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android"
    android:shape="rectangle" >

    <solid android:color="#bbbbbb" />

    <stroke
        android:width="1dp"
        android:color="#bbb" />

    <padding
        android:bottom="1dp"
        android:left="1dp"
        android:right="1dp"
        android:top="1dp" />

    <corners android:topLeftRadius="40dp" />

</shape> 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-07T16:12:33.823

您可以使用通用图像加载器。

[https://github.com/nostra13/Android-Universal-Image-Loader](https://github.com/nostra13/Android-Universal-Image-Loader)。

可用于显示圆角位图。检查上面的链接。

在您的自定义适配器构造函数中

```
 File cacheDir = StorageUtils.getOwnCacheDirectory(a, "your folder");

 // Get singletone instance of ImageLoader
 imageLoader = ImageLoader.getInstance();
 // Create configuration for ImageLoader (all options are optional)
 ImageLoaderConfiguration config = new ImageLoaderConfiguration.Builder(a)
      // You can pass your own memory cache implementation
     .discCache(new UnlimitedDiscCache(cacheDir)) // You can pass your own disc cache implementation
     .discCacheFileNameGenerator(new HashCodeFileNameGenerator())
     .enableLogging()
     .build();
  // Initialize ImageLoader with created configuration. Do it once.
  imageLoader.init(config);
  options = new DisplayImageOptions.Builder()
 .showStubImage(R.drawable.stub_id)//display stub image
 .cacheInMemory()
 .cacheOnDisc()
 .displayer(new RoundedBitmapDisplayer(20)) //rounded corner bitmap
 .build(); 
```

在你的 getView()

```
 ImageView image=(ImageView)vi.findViewById(R.id.imageview); 
 imageLoader.displayImage(imageurl, image,options);//provide imageurl, imageview and options 
```

您可以配置其他选项以满足您的需求。

带圆角的罗曼人形象 @ [http://www.curious-creature.org/2012/12/11/android-recipe-1-image-with-rounded-corners/](http://www.curious-creature.org/2012/12/11/android-recipe-1-image-with-rounded-corners/)

找到以下@[如何制作带圆角的 ImageView？](https://stackoverflow.com/questions/2459916/how-to-make-an-imageview-to-have-rounded-corners)

[http://ruibm.com/?p=184](http://ruibm.com/?p=184)。

```
public class ImageHelper {
public static Bitmap getRoundedCornerBitmap(Bitmap bitmap, int pixels) {
    Bitmap output = Bitmap.createBitmap(bitmap.getWidth(), bitmap
            .getHeight(), Config.ARGB_8888);
    Canvas canvas = new Canvas(output);

    final int color = 0xff424242;
    final Paint paint = new Paint();
    final Rect rect = new Rect(0, 0, bitmap.getWidth(), bitmap.getHeight());
    final RectF rectF = new RectF(rect);
    final float roundPx = pixels;

    paint.setAntiAlias(true);
    canvas.drawARGB(0, 0, 0, 0);
    paint.setColor(color);
    canvas.drawRoundRect(rectF, roundPx, roundPx, paint);

    paint.setXfermode(new PorterDuffXfermode(Mode.SRC_IN));
    canvas.drawBitmap(bitmap, rect, rect, paint);

    return output;
}
} 
```

# c# - 如何在用户键入时捕获所有输入到文本框中的字符？

> ID：15864469
> 
> 赞同：1
> 
> 时间：2013-04-07T16:04:12.750
> 
> 标签：c#, winforms, keyboard

在 C# 中，如何在用户输入时捕获所有`char`输入到 a`textbox`中的内容？

因此，如果用户键入`Hello World`该函数，则该函数将捕获每个人`char`并对其进行处理。

我需要对所有输入的文本进行超级精确的控制。我将从`textbox`所有无效字符中删除，并允许用户堆叠某些字符，然后在使用其他字符时会触发函数。

例子：

用户将以下内容键入`textbox`

`Blarg Blarg 600*50-90blarg`

这就是我想要操作这个烂摊子的方式：

在读取每个 Char 时，所有字母字符都会从内存和文本框中丢弃，因此用户甚至看不到它们已输入。

所以第一部分甚至没有显示出来，然后当用户键入`6`时坚持到文本框，`0`然后`0`最终显示给用户的是`600`. 然后用户键入`*`，这会从屏幕上丢弃，但它会导致触发一个函数，该函数会在文本框中获取数字并等待下一个数字。

我可以处理大部分问题，但在 C# 中验证来自键盘的用户输入并不容易

所以问题是：我可以在每个字符上操作代码，因为它们来自键的右侧吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-07T16:07:42.117

很简单，您可以像这样使用 KeyPress 事件：

```
private void textBox1_KeyPress(object sender, KeyPressEventArgs e)
{
    char c = e.KeyChar;
    // your code here
} 
```

然后，您可以像这样解析 char 信息：

```
private void textBox1_KeyPress(object sender, KeyPressEventArgs e)
{
    char c = e.KeyChar;

    if (c >= 48 && c <= 57)
    {
        // numeric value
        // do something
    }
    else if (c == 42)
    {
        // multiply (*)
        // do something
    }
    else if (c == 47)
    {
        // divide (/)
        // do something
    }
    else if (c == 13)
    {
        // enter key
        // do something
    }
    else
    {
        // discard
        e.Handled = true;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T16:13:30.173

如果您只使用您的文本框只允许特定字符作为输入，您可以尝试使用[`MaskedTextBox`](http://msdn.microsoft.com/en-us/library/bb763018.aspx).

# android - 当用户通过任务管理器关闭应用程序时，会发生哪个活动的事件？

> ID：15864472
> 
> 赞同：0
> 
> 时间：2013-04-07T16:04:25.490
> 
> 标签：android

...通过从 RAM 中删除应用程序。

如何捕捉这个事件？我需要这个，因为我使用 AlarmManager 跟踪午夜，并且在午夜应用程序会执行一些操作。在主要活动的onDestroy()方法中，我停止跟踪午夜。但是，如果用户通过 TaskManager 关闭应用程序，那么我将无法停止跟踪，并且用户会在下一个午夜收到错误消息。

对不起我的英语不好。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T16:09:42.047

> 当用户通过任务管理器关闭应用程序时，会发生哪个活动的事件？...通过从 RAM 中删除应用程序。

没有事件。您的进程刚刚终止。

> 如何捕捉这个事件？

您无法捕获此事件。

> 我需要这个，因为我使用 AlarmManager 跟踪午夜，并且在午夜应用程序会执行一些操作。在主要活动的onDestroy()方法中，我停止跟踪午夜。但是，如果用户通过 TaskManager 关闭应用程序，那么我将无法停止跟踪，并且用户会在下一个午夜收到错误消息。

我建议提出更好的方法。依靠用户按下 BACK 并不是一个好的计划，因为有几种方法可以终止您的进程，而无需用户从您的活动中按下 BACK（或以其他方式导致它被破坏）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T16:11:00.833

如果用户使用诸​​如[Advanced Task Killer](https://play.google.com/store/apps/details?id=com.rechild.advancedtaskkiller&feature=search_result)之类的东西来结束任务，除了教育用户 Android 自动处理任务管理并且他们不应该使用这样的应用程序，因为它们是有害的，你无能为力。

如果用户正在使用 4.0 任务切换器并刷掉任务，则调用的只是`finish()`.

# c++ - 使用 Visual Studio 2012 构建 Eclipse C++ Docfrac 项目

> ID：15864484
> 
> 赞同：1
> 
> 时间：2013-04-07T16:05:46.340
> 
> 标签：c++, eclipse, visual-studio, compiler-construction

有人可以帮我了解如何使用 Visual Studio 2012 构建开源 Docfrac C++ Eclipse 项目吗？

[Docfrac](http://docfrac.net/wordpress/)

**更新 1：**

在 VS 2012 中构建项目时，我得到：

*查找预编译头文件时出现意外的文件结尾。您是否忘记将 '#include "pch.h"' 添加到您的源代码中？*

**更新 2：**感谢 Rowland，解决了上述问题。

*现在我明白了，无法打开 #include **vcl.h**。没有相应的文件和目录。*

**结束语：**

不幸的是，我想要实现的目标并不是直接可能的。感谢罗兰为我指明了正确的方向。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T16:27:05.317

对于与预编译头相关的错误，请选择您在解决方案资源管理器中添加到项目的源代码文件（.cpp 或 .c）。然后右键单击，选择属性。然后在 Precompiled Headers 下的 C/C++ 部分中，选择“Not using precompiled headers”选项。重建和宾果游戏。

![截屏](https://i.stack.imgur.com/FKtLU.png)

或者，您可以右键单击项目本身并将其设置为所有文件。

# sql - 当B偏向A时，Postgres如何连接表A，B

> ID：15864486
> 
> 赞同：0
> 
> 时间：2013-04-07T16:05:54.147
> 
> 标签：sql, postgresql, postgresql-9.2

我有两张桌子：

表 A - 大表

```
key,value1 
```

表 B - 较小的表并非所有键都存在于该表上

```
keyint, value2 
```

我想合并到第三张表 - 表 C

```
key,value1,value2 
```

（其中 value2 将出现，如果存在并且如果不为空或 0 或 NULL）

我如何在 postgres 中做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T23:56:57.177

（添加为作者对问题的编辑，因此在此处作为 CW 发布）：

我找到了解决方案：

```
SELECT key,value1,value2
          FROM A as A1
          left outer join B on A1.key =B.keyint limit 10000; 
```

左外连接将从 中获取所有记录`A`并放置值（如果它们存在于 上）`B`。

# c# - 将 Gdk.Pixbuf 转换为 System.Drawing.Bitmap？

> ID：15864488
> 
> 赞同：1
> 
> 时间：2013-04-07T16:06:05.483
> 
> 标签：c#, gtk, bitmapimage, gdk, pixmap

如何将`Gdk.Pixbuf`(_pixbuf 下面) 转换为 Windows 窗体 ( `System.Drawing`) 位图？下面是使用的代码`Gtk.DotNet.Graphics`，但它只给出了一个白色的图像。有没有更好、更直接的方法有效？我在 Mono 上使用 C#，但如果你有另一种语言的答案，我可以转换。

```
public System.Drawing.Bitmap toBitmap () {
    Gdk.Pixmap pixmap, mask;
    _pixbuf.RenderPixmapAndMask(out pixmap, out mask, 255);
    System.Drawing.Graphics graphics = Gtk.DotNet.Graphics.FromDrawable(pixmap);
    return new System.Drawing.Bitmap(width, height, graphics);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T03:31:13.943

您可以使用此扩展方法：

```
using System.ComponentModel;
using System.Drawing;

public static class MyExtensions
{
    public static System.Drawing.Bitmap ToBitmap(this Pixbuf pix)
    {
        TypeConverter tc = TypeDescriptor.GetConverter(typeof(Bitmap));

        //// Possible file formats are: "jpeg", "png", "ico" and "bmp"
        return (Bitmap)tc.ConvertFrom(pix.SaveToBuffer("jpeg")); 
    }
} 
```

用法：

```
{
    Pixbuf pxb = new Pixbuf(pixSource);
    Bitmap bmp = pxb.ToBitmap();
} 
```

# algorithm - matlab中的权重优化

> ID：15864489
> 
> 赞同：0
> 
> 时间：2013-04-07T16:06:06.427
> 
> 标签：algorithm, matlab, optimization, linear-programming

我必须在监督学习中进行优化以获得我的权重。

我必须学习这些值`(w1,w2,w3,w4)`，以便每当我的向量`A = [a1 a2 a3 a4]`为 1 时，总和`w1*a1 + w2*a2 + w3*a3 + w4*a4`变得大于 0.5，而当它的 -1（标签）时，它变得小于 0.5。

有人可以告诉我如何在 Matlab 中解决这个问题吗？我知道的一种方法是使用进化算法来做到这一点，采用随机值向量，然后改变以选择最佳的 n 值。

有没有其他方法可以解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T18:40:07.013

您可以使用[`linprog`](http://www.mathworks.com/help/optim/ug/linprog.html).
设`A`一个大小`n`为 4 的矩阵，由您拥有的所有`n`训练 4-vecotrs 组成。您还应该有一个`y`带有`n`元素（每个加或减 1）的向量，表示每个训练 4-vecvtor 的标签。

使用`A`并且`y`我们可以编写一个线性程序（查看[文档](http://www.mathworks.com/help/optim/ug/linprog.html)以获取我正在使用的参数的名称）。现在，您没有目标函数，因此您可以简单地设置`f`为`f = zeros(4,1);`。
您唯一拥有的是不等式约束`(< a_i , w > - .5) * y_i >= 0`（其中是 4-vector和 weight vector`<.,.>`之间的点积）。 如果我的计算是正确的，这个约束可以写成`a_i``w`

```
cmat = bsxfun( @times, A, y ); 
```

总的来说，你得到

```
w = linprog( zeros(4,1), -cmat, .5*y ); 
```

# c++ - debug assertion failed: dbgheap.cpp and dbgdell.cpp

> ID：15864490
> 
> 赞同：-1
> 
> 时间：2013-04-07T16:06:07.037
> 
> 标签：c++, memory-management, heap-memory, destructor

I have a some kind of memory leak problem. I had it in earlier lines, but i corrected it by writing a copy assignment constructor. But the problem is on the `delete newB` line. When i comment out that line, there is another error popping out. Where do you think i have some memory leaks because i know it is somehow related with the memory allocation.

```
void BankingSystem::addBranch(const int id, const string name){
    if(isBranchExisting(id)){
        cout << "\n\tBranch " << id << " already exists. Please try it with another id number.";
    }
    else if(!isBranchExisting(id)){
        Branch* tempArray = new Branch[cntBranches];
        if(cntBranches != 0){
            for(int i = 0; i<cntBranches; i++){
                tempArray[i] = allBranches[i];
                }

            delete[] allBranches;

            allBranches = new Branch[cntBranches+1];
            for(int i = 0; i<cntBranches; i++){
                allBranches[i] = tempArray[i];
            }

            allBranches[cntBranches] = Branch(id, name);
            delete[] tempArray;
        }
        Branch* newB = new Branch(id,name);
        allBranches[cntBranches] = *newB;
        cout << "\n\tBranch " << id << " is added successfully.";
        delete newB;
        cntBranches++;
    }
} 
```

I can show you the Branch class too if you need it because it may be related with constructors or destructor too, but i was not successful at correcting those as this error continues to pop out.

Edit: Sorry, i thought i stated it.

![enter image description here](https://i.stack.imgur.com/h9sHc.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T16:33:26.827

它失败了，因为最初 cntBranches==0 并且 allBranches 未初始化，正如我所假设的那样。
因此，当第一次调用 addBranch
allBranches[cntBranches] = *newB;
将写入 allBranches 中垃圾指向的一些随机内存位置。
通过其余的指针操作是不正确的，也会导致错误。例如
delete[] tempArray;
将删除之前分配的所有内容，使 allBranches 指向已删除的对象。所以我建议要么阅读更多关于指针是什么以及内存分配如何工作的信息，或者如果可能的话使用 std::vector 。

# algorithm - Determinate the existence of a triangle given a sorted list

> ID：15864494
> 
> 赞同：-1
> 
> 时间：2013-04-07T16:06:20.233
> 
> 标签：algorithm, computational-geometry

I have come across a problem about the determination of triangle, it says:

> Given a sorted integer array(length n), determinate whether you could build a triangle by choosing three integers from the array, the answer is "yes" or "no".

A naive solution is by scanning all the possibilities but it turn out to be O(n^3), seems it will be C(n, 3) possibilities.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T16:17:34.977

假设整数代表边长并且array(0) > 0，

```
bool IsTriangle(int[] aray, int start) {
  if(array.length - start <= 2) return false;

  return  (array(start+2) < array(start+1) + array(start+0)) 
      || IsTriangle(array,start+1);
} 
```

这是有效的，因为整数列表是排序的；因此，使用数组的任何后续元素，RHS 将始终较大，而使用数组的任何先前元素，LHS 将始终较小，因此只有选择的三个连续元素满足三角不等式才能满足三角不等式。这当然是 O(n) 并且可以很容易地转换为（不太优雅但性能更高的）迭代解决方案。

# jakarta-ee - FacesServlet 如何知道根据 URL 渲染哪个 facelet？

> ID：15864497
> 
> 赞同：3
> 
> 时间：2013-04-07T16:06:37.057
> 
> 标签：jakarta-ee, servlets, jsf-2, url-routing, facesservlet

我一直在检查，无法找到有关 FacesServlet 如何将 URL 解析为 Web 应用程序文件结构中的真实文件的解释。在 servlet 的上下文中，我的理解是 URL 只是您希望客户端使用的虚构名称。然后，在 web.xml 中，您将特定的 servlet 映射到 URL 模式，但是 servlet 的真实名称/位置对外界是隐藏的……这通常适用于 servlet。

特别是对于 JSF 2，我们处理 FacesServlet，这引出了我的第一个问题：**FacesServlet 是我需要在我的应用程序中提供映射详细信息的唯一 servlet（也是我唯一需要的 servlet，期间）？**答案似乎是“是”，但如果在某些情况下并非如此，请举个例子。

通过阅读关于 SO 的其他问题，我了解到并非所有请求都需要通过 FacesServlet，因此基本上请求分为 A）对不应该由 FacesServlet 处理的静态内容的请求，和 B）对动态内容的请求需要由 FacesServlet 处理。**那么，静态内容是如何获得的呢？只是通过传入的请求，其中的 URL 与 FacesServlet 的 URL 模式不匹配，但匹配应用程序文件结构中的真实文件位置？**

最后，我的主要问题是：**当一个请求与 FacesServlet 的 URL 模式匹配时，FacesServlet 如何知道要呈现哪个视图文件 (.xhtml)？**在使用 JSF 2 时是否有一个约定，我需要遵循它才能使其工作？如果不是，那么我不明白，因为就像我在上面提到的“通用”servlet 的情况下，URL 可以包含一个与真实文件名无关的名称，只要它映射到web.xml 文件中的正确 servlet。我觉得我在这里遗漏了一些明显（和重要）的东西。我唯一能想到的是 URL 应该匹配一个真实的文件位置，或者有另一个映射表或将 URL 与视图文件相关联的东西。

顺便说一句，我看了[这个问题](https://stackoverflow.com/questions/13284275/why-doesnt-facesservlet-find-xhtml-facelet)，它是相关的，但没有任何答案。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T17:04:58.430

[servlet 规范](http://download.oracle.com/otndocs/jcp/servlet-3.0-fr-eval-oth-JSpec/)第 10.5 节概述了提供静态内容的最简单方法：

> Web 应用程序作为目录的结构化层次结构存在。此层次结构的根用作作为应用程序一部分的文件的文档根。例如，对于在 Web 容器中具有上下文路径 /catalog 的 Web 应用程序，index.html 文件位于 Web 应用程序层次结构的基础或 WEB-INF/lib 内的 JAR 文件中，其中包含 META 下的 index.html -INF/resources 目录可以满足来自 /catalog/index.html 的请求。如果 index.html 存在于根上下文和应用程序 WEB-INF/lib 目录中 JAR 文件的 META-INF/resources 目录中，则必须使用根上下文中可用的文件. 第 12 章“将请求映射到 Servlet”中列出了将 URL 与上下文路径匹配的规则。

和

> 应用程序层次结构中存在一个名为“WEB-INF”的特殊目录。此目录包含与应用程序相关但不在应用程序文档根目录中的所有内容。大多数 WEB-INF 节点不是应用程序的公共文档树的一部分。除了静态资源和封装在 WEB-INF/lib 目录下的 JAR 文件的 META-INF/resources 中的 JSP 之外，WEB-INF 目录中包含的其他文件不能由容器直接提供给客户端。

也就是说，要提供静态内容，将内容保存在 Web 应用程序的适当目录中就足够了。

Servlet 映射是对这个“隐式”servlet 的补充。因此，大多数 JSF 应用程序只声明 FacesServlet。IIRC，在最近的 JSF 实现中，如果省略了它的声明，servlet 甚至会声明自己，因此您甚至不必显式声明它。

FacesServlet 如何定位要使用的视图的定义在[JSF 规范](http://www.jcp.org/en/jsr/detail?id=344)中定义，特别是第 7.6.2 节：

> 术语视图标识符和 viewId 在下面可互换使用，表示生成视图的 Web 应用程序资源的上下文相对路径，例如 JSP 页面或 Facelets 页面。在 JSP 情况下，这是表示视图的 jsp 页面的上下文相对路径，例如 /foo.jsp。在 Facelets 案例中，这是表示视图的 XHTML 页面的上下文相对路径，例如 /foo.xhtml。
> 
> JSF 实现必须提供默认 ViewHandler 实现，以及提供 ViewDeclarationLanguage 实现的默认 ViewDeclarationLanguageFactory 实现，这些实现旨在支持呈现包含 JSF 组件的 JSP 页面和包含 JSF 组件的 Facelets 页面。

默认实现在以下 7.6.2.1 节中指定。我饶了你的完整报价。要点是，如果 Faces Servlet 使用前缀映射（例如`/faces/**`）进行映射，则 viewId 是 URL 中前缀之后的部分，如果 Faces Servlet 使用后缀映射（例如`*.jsf`）进行映射，则 viewId 是部分上下文路径后面的 URL 的名称，并带有替换的文件扩展名。例如，如果 servlet 映射到`*.jsf`，则对 URL 的请求将从Web 应用程序目录中`http://host/context/admin/userlist.jsf`的文件中读取视图定义。`admin/userlist.xhtml`

# android - Google Drive RealTime API 是否适用于 Android？

> ID：15864500
> 
> 赞同：4
> 
> 时间：2013-04-07T16:07:03.673
> 
> 标签：android, google-drive-api, google-drive-realtime-api

Google Drive RealTime API 是否仍然不支持 Android？我使用 JavaScript 完成了它，但想在 Android 中使用它。我不认为它确实存在，因为没有官方博客这么说，它甚至没有出现在[开发者网站上](https://developers.google.com/drive/realtime/)。有没有其他方法可以用于这些目的？或者我需要自己做这一切，直到谷歌宣布任何事情？如果是这样，您能否建议我将所有内容都放在我的服务器上并使用[GCM](http://developer.android.com/google/gcm/index.html)将其发送到设备；或者我应该使用[Google App Engine](https://developers.google.com/appengine/)吗？

这里有一个非常相似的问题：[StackOverflow Question](http://goo.gl/tD4Uk)。但我什至发现这些链接说它是[Link 1](http://www.intellectsoft.co.uk/blog/google-drive-realtime-api/)，[Link 2](http://androidheadlines.com/2013/03/latest-google-drive-api-allows-third-party-apps-to-make-use-of-the-realtime-synch-features.html)。那么有什么更新吗？

请帮忙谢谢:)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-07T16:40:47.993

目前 Realtime API 不支持 Android，抱歉。

但！谷歌正在为此努力，应该很快就会推出。谷歌对用户在网络和移动应用程序之间同时进行实时协作的可能性感到兴奋。那会摇滚！

# php - CI 模型中的 where_not_in 代码

> ID：15864501
> 
> 赞同：0
> 
> 时间：2013-04-07T16:07:04.830
> 
> 标签：php, mysql, codeigniter

你好编码员我正在尝试在 CODE IGNITER 模型中编写这个 mysql 脚本但没有得到正确的脚本如何将它编码到活动记录中你能帮我吗

```
SELECT bus_reg_number
FROM t_bus_detail
WHERE bus_reg_number NOT
IN (

SELECT bus_reg_number
FROM t_bus_alot
) 
```

我的模特

```
 public function get_bus_reg_number()
    {

    $this->db->select('bus_reg_number')->from('t_bus_detail');
 $result=$this->db->where_not_in('bus_reg_number' NOT IN (SELECT 'bus_reg_number' FROM 't_bus_alot')');

    $dropdown_bus_number = array();
    foreach($result as $r) 
    {
    $dropdown_bus_number[$r['bus_reg_number']] = $r['bus_reg_number'];

    }
    return $dropdown_bus_number;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T16:16:44.610

```
$this->db->select('bus_reg_number');
$this->db->from('t_bus_detail');
$this->db->where('`bus_reg_number` NOT IN (SELECT `bus_reg_number` FROM `t_bus_alot`)', NULL, FALSE); 
```

试试这个.. null 和 false 会告诉 CI 不要逃避你的 where 查询..

编辑：这是简单的查询：

```
$query = $this->db->query("SELECT bus_reg_number FROM t_bus_detail WHERE bus_reg_number NOT IN (SELECT bus_reg_number FROM t_bus_alot)");
$dropdown_bus_number = array();
foreach ($query->result_array() as $row){
   $dropdown_bus_number[$row['bus_reg_number']] = $row['bus_reg_number'];
} 
```

# ruby-on-rails - 触发 ActiveRecord::RecordNotFound 而不是返回 nil

> ID：15864503
> 
> 赞同：0
> 
> 时间：2013-04-07T16:07:20.600
> 
> 标签：ruby-on-rails

使用 Rails 3.2。我正在为用户 URL 实现虚 url：

```
# routes.rb
resources :users
match 'u/:login' => 'users#show', :as => :main_user

# users_controller.rb
class UsersController < ApplicationController
  def show
    @user = User.where(:login => params[:login]).first
  end
end 
```

通常，如果我们使用`@user = User.find(params[:id])`，它会返回`ActiveRecord::RecordNotFound`，然后重定向到`500`or `404`（不确定会重定向到哪一个，但这并不重要）。

但在上述情况下，它只会返回`@user = nil`并继续渲染`show`动作。如何以与搜索相同的方式对其进行编码`id`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T16:10:46.767

如果找不到记录，您可以使用`.first!` [(Docs)](http://api.rubyonrails.org/classes/ActiveRecord/FinderMethods.html#method-i-first-21)引发错误。`ActiveRecord::RecordNotFound`

```
@user = User.where(:login => params[:login]).first! 
```

# c# - 如何从 Web API XML 序列化程序中删除 xmlns:xsi 和 xmlns:xsd

> ID：15864505
> 
> 赞同：1
> 
> 时间：2013-04-07T16:07:22.593
> 
> 标签：c#, asp.net-web-api, xmlserializer

几个小时以来，我一直在努力从 ASP.NET Web Api 中序列化我的独立对象（不是 MVC 模型）返回的 XML 中删除默认命名空间。该应用程序的示例代码是：

类定义：

```
public class PaymentNotificationResponse
{

    [XmlArray("Payments")]
    [XmlArrayItem("Payment", typeof(PaymentResponse))]
    public PaymentResponse[] Payments { get; set; }
} 
```

然后我创建了一个 Web Api 控制器，它根据一些输入创建一个对象`PaymentNotificationResponse`，然后将该对象序列化给请求方。控制器列表如下：

```
public class PaymentController : ApiController
{

    public PaymentNotificationResponse Post()
    {
        //Read request content (only available async), run the task to completion and pick the stream.
        var strmTask = Request.Content.ReadAsStreamAsync();
        while (strmTask.Status != TaskStatus.RanToCompletion) { }
        Stream strm = strmTask.Result;

        //Go back to the beginning of the stream, so that the data can be retrieved. Web Api reads it to the end.
        if (strm.CanSeek)
            strm.Seek(0, SeekOrigin.Begin);

        //Read stream content and convert to string.
        byte[] arr = new byte[strm.Length];
        strm.Read(arr, 0, arr.Length);
        String str = Encoding.UTF8.GetString(arr);

        //Change the default serializer to XmlSerializer from DataContractSerializer, so that I don't get funny namespaces in properties.
        //Then set a new XmlSerializer for the object
        Configuration.Formatters.XmlFormatter.UseXmlSerializer = true;
        Configuration.Formatters.XmlFormatter.SetSerializer<PaymentNotificationResponse>(new XmlSerializer(typeof(PaymentNotificationResponse)));

        //Now call a function that would convert the string to the required object, which would then be serialized when the Web Api is invoked.
        return CreatePaymentNotificationFromString(str);
    }
} 
```

问题是，当我使用有效的字符串参数调用 Api 时，它会返回这种格式的 XML（有效的 XML，但不需要 xmlns）：

```
<PaymentNotificationResponse xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
    <Payments>
        <Payment>
            <PaymentLogId>8325</PaymentLogId>
            <Status>0</Status>
        </Payment>
    </Payments>
</PaymentNotificationResponse> 
```

我将其发送到的系统不需要`xmlns:xsi`和`xmlns:xsd`. 事实上，当它看到命名空间时，它会返回一个异常。

我尝试返回一个带有 XML 标记的字符串，它只是将响应包装在 a 中`<string></string>`并对所有 < 和 > 进行编码。所以这不是一个选择。

我看到了[这个帖子](https://stackoverflow.com/questions/760262/xmlserializer-remove-unnecessary-xsi-and-xsd-namespaces/)和[这个](https://stackoverflow.com/questions/12590801/remove-namespace-in-xml-from-asp-net-web-api)。虽然前者非常详细，但它并没有解决我的问题。它只是`xmlns`为生成的 XML 引入了一个额外的内容。我认为这是因为我没有`.Serialize()`在`XmlSerializer`.

我想出了一个解决方案，我想我应该分享一下。所以我会在答案中说明它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T13:31:18.653

为了解决这个问题，我添加了一个方法来序列化`PaymentNotificationResponse`并返回一个 XML 字符串，因此（我将其包含在 的定义中`PaymentNotificationResponse`）：

```
//I added this method after I tried serialize directly to no avail
    public String SerializeToXml()
    {
        MemoryStream ms = new MemoryStream();

        XmlSerializerNamespaces ns = new XmlSerializerNamespaces();
        ns.Add("", "");

        new XmlSerializer(typeof(PaymentNotificationResponse)).Serialize(ms, this, ns);
        XmlTextWriter textWriter = new XmlTextWriter(ms, Encoding.UTF8);

        ms = (System.IO.MemoryStream)textWriter.BaseStream;

        return new UTF8Encoding().GetString(ms.ToArray());
    } 
```

我解析了字符串以创建一个`XDocument`，然后返回根元素。这使我将`Post()`方法的返回类型更改为`XElement`. 那么列表将`Post()`是：

```
public XElement Post()
    {
        //...Same as it was in the question, just the last line that changed.

        var pnr = CreatePaymentNotificationFromString(str);
        return XDocument.Parse(pnr.SerializeToXml()).Root;
    } 
```

这将使我的响应 XML 变成这样：

```
<PaymentNotificationResponse>
    <Payments>
        <Payment>
            <PaymentLogId>8325</PaymentLogId>
            <Status>0</Status>
        </Payment>
    </Payments>
</PaymentNotificationResponse> 
```

我希望这可以帮助别人。

# python - python：我的函数无缘无故改变了参数

> ID：15864507
> 
> 赞同：0
> 
> 时间：2013-04-07T16:07:30.080
> 
> 标签：python, arrays, function, global

我有这个功能：

```
def change_position(old_particles):
    inc_r=0.5
    inc_angle=0.5
    N=len(old_particles)
    particlesx=old_particles
    a=random.randint(0,N-1)
    b=random.randint(0,1)
    max_angle=np.pi*2
    c=random.randint(0,1)
    print 'old_particles before change', old_particles
    print 'new before change', particlesx
    if b==1:
        if c==1:
            particlesx[a][b]=particlesx[a][b]+inc_angle
            if particlesx[a][b]>max_angle:
                particlesx[a][b]=particlesx[a][b]-max_angle
            print 'cambiamos particula',a, particlesx[a][b]
    if b==1:
        if c==0:
            particlesx[a][b]=particlesx[a][b]-inc_angle
            if particlesx[a][b]<0:
                particlesx[a][b]=particlesx[a][b]+max_angle
            print 'cambiamos',a, particlesx[a][b]
    if b==0:
        if c==0:
            particlesx[a][b]=particlesx[a][b]+inc_r
            if particlesx[a][b]>1:
                particlesx[a][b]=particlesx[a][b]-inc_r
            print 'cambiamos',a, particlesx[a][b]
    if b==0:
        if c==1:
            particlesx[a][b]=particlesx[a][b]-inc_r
            if particlesx[a][b]<0:
                particlesx[a][b]=particlesx[a][b]+inc_r
            print 'cambiamos',a, particlesx[a][b]
    print'after change', particlesx
    print'old_particles after change', old_particles
    return particlesx, a 
```

问题是由于我不明白的原因，该函数不仅改变了“particlesx”的值，还改变了 old_particles 的值，因此脚本末尾的两个数组的值不仅在函数中而且在函数之外。谁能帮我这个？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T16:10:13.923

以下：

```
particlesx=old_particles 
```

不制作列表的副本。相反，它同时生成`particlesx`并`old_particles`引用同一个列表。当你改变一个时，它们都会改变。

要使两者相互独立，您需要制作一份副本：

```
import copy
...
particlesx = copy.deepcopy(old_particles) 
```

# ios - 制作基于网站的原生应用程序

> ID：15864511
> 
> 赞同：-2
> 
> 时间：2013-04-07T16:07:39.223
> 
> 标签：ios, native

我正在寻找一些关于从现有网站创建原生 iOS 应用程序的资源（博客文章、教程等）。似乎最简单的方法是使用 a`UIWebView`并在那里加载网站，但我有兴趣制作原生应用程序。

不幸的是，我尝试过的所有谷歌搜索都只是为网络应用程序提供了结果:(

（对不起，如果这个问题含糊不清）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T16:48:39.850

我的 TidBITS News 应用程序的作用是使用 RSS，向用户展示 tidbits.com 网站上发生的事情。出现在网站上的内容也被推送到 RSS 提要上。该应用程序会咨询该提要。现在它有了数据，所以它可以在原生应用程序中表达相同的信息。它确实使用了 UIWebView，但那是为了显示一些 RSS 数据（以 HTML 开头），而不是查看网站本身。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T16:42:00.563

我想我会编写一个 Web 服务来提供要显示的信息。然后，网站和应用程序将发送适当的请求并显示接收到的数据。两者都可以实现自己的绘图/显示代码。这还可以在以后添加可能的 Android 或 Windows Phone 应用程序，而无需为每个应用程序管理单独的数据集。

如果您想使用网站上现有的数据，我认为`UIWebView`是您唯一的选择（除非您想编写自己的浏览器）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T17:57:10.363

嘿，你可以使用 web 视图，添加所需的框架，然后查找解析器。

还有一件事 JSON Parsing 将帮助你解决这个问题......

它的所有关于 UIWebView 与 JSON 解析的 XML 连接。

# python - 在索引上求和二维数组的值

> ID：15864522
> 
> 赞同：7
> 
> 时间：2013-04-07T16:08:20.483
> 
> 标签：python, numpy, indexing, rowsum

我需要扩展[这个问题](https://stackoverflow.com/questions/11310766/summing-values-of-numpy-array-based-on-indices-in-other-array?rq=1)，它根据第二个数组的索引对数组的值求和。设`A`结果数组、`B`索引数组和要求和`C`的数组。然后就这么`A[i] = sum`过去了。`C``index(B) == i`

相反，我的设置是

```
N = 5
M = 2

A = np.zeros((M,N))
B = np.random.randint(M, size=N) # contains indices for A
C = np.random.rand(N,N) 
```

我需要 `A[i,j] = sum_{k in 0...N} C[j,k]`这样`C[k] == i`，即以匹配 i 的 B 的索引为条件的行和。有没有一种有效的方法来做到这一点？对于我的应用程序，N 约为 10,000，M 约为 20。在最小化问题中的每次迭代都会调用此操作……我当前的循环方法非常慢。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-07T17:55:33.340

在@DSM 的评论之后，我假设你`C[k] == i`应该是`B[k] == i`. 如果是这样的话，你的循环版本看起来像这样吗？

## 嵌套循环版本

```
import numpy as np

N = 5
M = 2

A = np.zeros((M,N))
B = np.random.randint(M, size=N) # contains indices for A
C = np.random.rand(N,N)

for i in range(M):
    for j in range(N):
        for k in range(N):
            if B[k] == i:
                A[i,j] += C[j,k] 
```

* * *

有不止一种方法可以矢量化这个问题。我将在下面展示我的思考过程，但是有更有效的方法可以做到这一点（例如，@DSM 的版本可以识别问题中固有的矩阵乘法）。

为了解释起见，这里是一种方法的演练。

* * *

## 向量化内循环

让我们从重写内部`k`循环开始：

```
for i in range(M):
    for j in range(N):
        A[i,j] = C[j, B == i].sum() 
```

将其视为 可能更容易`C[j][B == i].sum()`。我们只是选择的`j`^第行`C`，仅选择该行中`B`等于的元素`i`，然后对它们求和。

* * *

## 向量化最外层循环

接下来让我们分解外`i`循环。现在我们要达到可读性开始受到影响的地步，不幸的是......

```
i = np.arange(M)[:,np.newaxis]
mask = (B == i).astype(int)
for j in range(N):
    A[:,j] = (C[j] * mask).sum(axis=-1) 
```

这里有几个不同的技巧。在这种情况下，我们正在遍历`A`. 的每一列`A`是 的相应行的子集的总和`C`。行的子集`C`由 where`B`等于行索引确定`i`。

为了绕过迭代`i`，我们正在制作一个二维数组，其中`B == i`通过向 i 添加一个新轴。（如果您对此感到困惑，请查看[numpy 广播](http://docs.scipy.org/doc/numpy/user/basics.broadcasting.html)的文档。）换句话说：

```
B:
    array([1, 1, 1, 1, 0])

i: 
    array([[0],
           [1]])

B == i:
    array([[False, False, False, False,  True],
           [ True,  True,  True,  True, False]], dtype=bool) 
```

我们想要的是取两个 ( `M`) 过滤的总和`C[j]`，一个用于`B == i`. `j`^(这将为我们提供与 中的第)列对应的二元素向量`A`。

我们不能通过`C`直接索引来做到这一点，因为结果不会保持它的形状，因为每一行可能有不同数量的元素。我们将通过将`B == i`掩码乘以 的当前行来解决这个问题，结果是`C`零，而当前行中的值为真。 `B == i``False``C`

为此，我们需要将布尔数组`B == i`转换为整数：

```
mask = (B == i).astype(int):
    array([[0, 0, 0, 0, 1],
           [1, 1, 1, 1, 0]]) 
```

因此，当我们将它乘以当前行时`C`：

```
C[j]:
    array([ 0.19844887,  0.44858679,  0.35370919,  0.84074259,  0.74513377])

C[j] * mask:
    array([[ 0\.        ,  0\.        ,  0\.        ,  0\.        ,  0.74513377],
           [ 0.19844887,  0.44858679,  0.35370919,  0.84074259,  0\.        ]]) 
```

然后我们可以对每一行求和以获得当前列`A`（这将在分配给时广播到一列`A[:,j]`）：

```
(C[j] * mask).sum(axis=-1):
    array([ 0.74513377,  1.84148744]) 
```

* * *

## 全矢量化版本

最后，分解最后一个循环，我们可以应用完全相同的原理为循环添加第三个维度 over `j`：

```
i = np.arange(M)[:,np.newaxis,np.newaxis]
mask = (B == i).astype(int)
A = (C * mask).sum(axis=-1) 
```

* * *

## @DSM 的矢量化版本

正如@DSM 建议的那样，您也可以这样做：

```
A = (B == np.arange(M)[:,np.newaxis]).dot(C.T) 
```

`M`对于大多数大小的and来说，这是迄今为止最快的解决方案`N`，并且可以说是最优雅的（无论如何，比我的解决方案优雅得多）。

让我们分解一下。

这与上面的“矢量化最外层循环”部分 `B == np.arange(M)[:,np.newaxis]`完全相同。`B == i`

关键是要认识到所有的`j`and`k`循环都等价于矩阵乘法。 `dot`会将布尔`B == i`数组转换为与幕后相同的 dtype `C`，因此我们无需担心将其显式转换为不同的类型。

之后，我们只是对`C`（一个 5x5 数组）的转置和上面的“掩码”0 和 1 数组执行矩阵乘法，得到一个 2x5 数组。

`dot`将利用您已安装的任何优化的 BLAS 库（例如`ATLAS`，`MKL`），因此速度*非常*快。

* * *

## 计时

对于 small `M`'s 和`N`'s，差异不太明显（循环和 DSM 版本之间的约 6 倍）：

```
M, N = 2, 5

%timeit loops(B,C,M)
10000 loops, best of 3: 83 us per loop

%timeit k_vectorized(B,C,M)
10000 loops, best of 3: 106 us per loop

%timeit vectorized(B,C,M)
10000 loops, best of 3: 23.7 us per loop

%timeit askewchan(B,C,M)
10000 loops, best of 3: 42.7 us per loop

%timeit einsum(B,C,M)
100000 loops, best of 3: 15.2 us per loop

%timeit dsm(B,C,M)
100000 loops, best of 3: 13.9 us per loop 
```

`M`但是，一旦`N`开始增长，差异就会变得非常显着（~600x）（注意单位！）：

```
M, N = 50, 20

%timeit loops(B,C,M)
10 loops, best of 3: 50.3 ms per loop

%timeit k_vectorized(B,C,M)
100 loops, best of 3: 10.5 ms per loop

%timeit ik_vectorized(B,C,M)
1000 loops, best of 3: 963 us per loop

%timeit vectorized(B,C,M)
1000 loops, best of 3: 247 us per loop

%timeit askewchan(B,C,M)
1000 loops, best of 3: 493 us per loop

%timeit einsum(B,C,M)
10000 loops, best of 3: 134 us per loop

%timeit dsm(B,C,M)
10000 loops, best of 3: 80.2 us per loop 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-07T17:57:13.410

我假设@DSM 找到了您的错字，并且您想要：

```
A[i,j] = sum_{k in 0...N} C[j,k] where B[k] == i 
```

然后你可以循环，`i in range(M)`因为`M`它相对较小。

```
A = np.array([C[:,B == i].sum(axis=1) for i in range(M)]) 
```

# jquery - 如何在 jQuery Layout 插件中拆分窗格？

> ID：15864525
> 
> 赞同：1
> 
> 时间：2013-04-07T16:08:46.283
> 
> 标签：jquery, layout

我正在使用 jQuery Layout 插件创建一个带有北、南、西、东和中心窗格的页面。例如，我想在布局启动后将西窗格拆分为两个窗格（西-北和西-南）。

但我没有在 API 中找到任何拆分窗格的函数！任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-07-11T03:37:40.593

您可以使用嵌套窗格。该插件通过 childOptions 支持无限嵌套。[http://layout.jquery-dev.com/demos/nested_simple.html](http://layout.jquery-dev.com/demos/nested_simple.html)

我建议唯一命名子窗格。

```
 <div id="mainContainer">
        <iframe class="ui-layout-center" id="someiframecontent-right">Center Right content</iframe>
        <div class="ui-layout-west">
            <div class="ui-layout-childsouth">North West content </div>
            <div class="ui-layout-childcenter">South west content </div>
        </div>
    </div>
    <script type="text/javascript">
        $('#mainContainer').layout({
            west__minSize: 100,
            west__size: 0.5,
            west__maxSize: 0.9,
            center__minSize: 100,
            center__size: 0.5,
            center__maxSize: 0.9,
            livePaneResizing: true,
            west__childOptions: {
                center__paneSelector: '.ui-layout-childcenter',
                center__minSize: 100,
                center__size: 0.5,
                center__maxSize: 0.9,
                south__paneSelector: '.ui-layout-childsouth',
                south__minSize: 100,
                south__size: 0.5,
                south__maxSize: 0.9,
                livePaneResizing: true
            }
        });
    </script> 
```

请记住，中心窗格始终是必需的（包括在子窗格中），因为它需要填充其他窗格留下的剩余空间。

# c++ - 哪些功能需要很长时间才能执行？

> ID：15864527
> 
> 赞同：-3
> 
> 时间：2013-04-07T16:09:00.647
> 
> 标签：c++, visual-studio

我为我的作业编写了一个 c++ 程序，它计算运行一个函数所需的时间，我需要一些耗时的函数来执行，至少需要几秒钟让计算机运行它，最好是矩阵。我尝试运行的所有功能都在一秒钟或更短的时间内运行，这令人沮丧。

并且它不能在屏幕上留下一个巨大的混乱字符，比如一个 1000 x 2000 矩阵

有人告诉我，对矩阵求平方需要一些时间让计算机完成，但我不知道它是否正确或如何完成。

这是我当前的矩阵，它在不到一秒的时间内加载完毕:(

```
#include <iostream>
#define HEIGHT 10
#define WIDTH 20
using namespace std;

void func()
{
    char world[HEIGHT][WIDTH];
    int i, j;
    for ( i = 0; i < HEIGHT; i++ ) {
        for ( j = 0; j < WIDTH; j++ ) {
            world[i][j] = '.';
            cout << world[i][j];
        }
        cout << endl;
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-07T16:24:04.877

给定任何`f`没有副作用的功能，您可以通过`f2`以下方式降低 100 万倍的效率

```
void f2() { for( long i = 1;  i <= 1000000; ++i ) { f(); } } 
```

现在，如果这还不够慢，哇哦！，来了`f3`，

```
void f3() { for( long i = 1;  i <= 1000000; ++i ) { f2(); } } 
```

等等。

但是，如果您*真的*想要非常低效，请查找 Ackermann 函数。

* * *

也就是说，请注意，上述方法基本上相当于执行您想要测量的任何内容，足够多次。

这就是标准方法。

# php - 带有可变通配符的 MySQL 查询

> ID：15864529
> 
> 赞同：4
> 
> 时间：2013-04-07T16:09:15.810
> 
> 标签：php, mysql, wildcard

如果我执行我的 PHP 代码：

```
$serName = $_GET['username'];
// Code for sanitation here
// [...]
$sql = "SELECT NAME FROM PLAYERS WHERE NAME LIKE '%$serName%'"; 
```

我得到除法错误，如何在两边都带有通配符的查询中使用变量？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T16:11:06.333

正确查询

```
SELECT NAME FROM PLAYERS WHERE NAME LIKE '%{$serName}%' 
```

你应该使用[准备好的语句](http://php.net/manual/en/mysqli.prepare.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T16:15:16.807

```
$sql = "SELECT NAME FROM PLAYERS WHERE NAME LIKE '%" .$serName. "%'"; 
```

# java - Filewriter 在一个文件中打印两次

> ID：15864532
> 
> 赞同：0
> 
> 时间：2013-04-07T16:09:27.517
> 
> 标签：java, file, filewriter

```
public listaRegistros almacenesAceptados(listaRegistros lr) {

    int i, j, l;
    registro r = new registro();
    listaRegistros aAceptados = new listaRegistros();
    totales = lr.getSize();

    for (i = 0; i < totales; i++) {
        r = lr.get(i);
        l = r.getSize();
        if ((r.get(1).getContenido().contains("null")) || (r.get(2).getContenido().contains("null")) || (r.get(3).getContenido().contains("null"))) {
            aAceptados.quitar(r);
            cancelados++;

        } else {
            aAceptados.addRegistro(r);
        }
    }

    ArchivoLogXX();
    return aAceptados;
}

public void ArchivoLogXX() {

    int b = (int) cancelados;
    File ArchivoLogXX = new File("ArchivoLogXX.txt");
    boolean append=true;
    try {
        FileWriter fw = new FileWriter(ArchivoLogXX, append);
        BufferedWriter bw = new BufferedWriter(fw);
        bw.write("\n:::::Almacenes:::::");
        bw.write("\nHay " + b + " almacenes erroneos, revise el codigo postal, la direccion y el numero.");
        bw.close();
    } catch (FileNotFoundException fnf) {

        fnf.printStackTrace();

    } catch (IOException io) {

        io.printStackTrace();
    }

}

} 
```

我有这个类，我想在文件 ArchivoLogXX 中打印一次，但我不知道为什么，它打印了两次。

我认为问题出在附录中，但我真的需要它，因为如果文件不为空，我想继续在上面写。

# html - 就网络标准而言，使用或 css 类加粗文本更好吗

> ID：15864534
> 
> 赞同：2
> 
> 时间：2013-04-07T16:09:33.477
> 
> 标签：html, css

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-07T16:21:17.747

您不应该依赖标签来应用任何特定样式。将样式应用于标签没有标准，这可以通过 CSS 进行更改。标签具有语义价值而不是表现价值。

您对“什么是更好的做法”的具体问题的答案是“视情况而定”。

1.  如果您希望文本在 GUI 浏览器中显示为粗体，请使用 CSS
2.  如果某些文本相对于周围的文本很重要，请[使用`<strong>`](http://www.w3.org/community/webed/wiki/HTML/Elements/strong)

这些不是相互排斥的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T16:33:56.120

如您所见，这里没有人真正同意“标准”。

但这取决于内容的意图。

如果你想改变文本的外观，为了改变它的外观，CSS 是要走的路。如果您想更改包含文本的语义，请使用标签。

在这种情况下，答案可能是“两者”。

两者的答案绝对没有错。

事实上，为了你们俩都是正确的，这样说并没有错：

```
<strong class="heavy-text">if you break it, you bought it</strong>

strong.heavy-text { font-weight: bold; } 
```

多余的？
好吧，如果这是您对其进行的唯一更改，那么是的...

但是现在你有文本以你认为应该的方式强调语义和可访问性，同时它也使用适当的钩子设置样式，以供将来修改。

如果决定不应将任何音频/文本权重应用于该特定片段，高于任何其他片段，则只需使用`<span class="heavy-text">`，或whathaveyou。

* * *

## 回答 #3

> 赞同：-4
> 
> 时间：2013-04-07T16:11:07.910

严格来说，你应该使用 CSS。话虽这么说，`<strong>`“基本上”是`<span>`浏览`font-weight:bold`器默认样式表中的一个。

就个人而言，我喜欢只使用`<b>`. 对于屏幕阅读器来说，它比一些晦涩的类名更简单、更清晰、更有意义。

# delphi - 如何在delphi 7中对dbgrid上的数据进行排序

> ID：15864536
> 
> 赞同：0
> 
> 时间：2013-04-07T16:09:36.207
> 
> 标签：delphi, firebird, zeos

您好，我是 zeos 数据集的新手，我希望我的数据库网格以升序或降序模式对数据进行排序。我正在使用 zeos 数据集和 firebird 数据库。我试着搜索，这就是我所得到的

```
procedure TForm1.DBGrid1TitleClick(Column: TColumn);
{$J+}
 const PreviousColumnIndex : integer = -1;
{$J-}
begin
  if DBGrid1.DataSource.DataSet is TCustomADODataSet then
  with TCustomADODataSet(DBGrid1.DataSource.DataSet) do
  begin
    try
      DBGrid1.Columns[PreviousColumnIndex].title.Font.Style :=
      DBGrid1.Columns[PreviousColumnIndex].title.Font.Style - [fsBold];
    except
    end;

Column.title.Font.Style := 
Column.title.Font.Style + [fsBold];
PreviousColumnIndex := Column.Index;

if (Pos(Column.Field.FieldName, Sort) = 1)
and (Pos(' DESC', Sort)= 0) then
  Sort := Column.Field.FieldName + ' DESC'
else
  Sort := Column.Field.FieldName + ' ASC';
  end;
end; 
```

这是来自另一个站点，但问题是我无法弄清楚如何将它用于 zeos 数据集。这是迄今为止我得到的

```
procedure Tdc.DBGrid1TitleClick(Column: TColumn);
begin
      with TZtable (DBGrid1.DataSource.DataSet) do
  Sort := Column.Field.FieldName; + ' ASC'
end; 
```

但坦率地说，我不知道从哪里开始

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T16:57:47.590

```
procedure TForm1.DBGrid1TitleClick(Column: TColumn);
var
  st:ZAbstractRODataset.TSortType;
begin
  st:=ZReadOnlyQuery1.SortType;
  ZReadOnlyQuery1.SortedFields:=Column.FieldName;
  If st = stAscending then ZReadOnlyQuery1.SortType:=stDescending else ZReadOnlyQuery1.SortType:=stAscending;
  DataSource1.DataSet.First;
end; 
```

@bummi 谢谢

# xml - 那是什么：内容类型：应用程序/x-bxml？

> ID：15864537
> 
> 赞同：0
> 
> 时间：2013-04-07T16:09:39.513
> 
> 标签：xml, http, xml-parsing, content-type

我最近发现了一个我想使用的公共无证 Web 服务。问题出在 Web 服务使用的内容类型中。内容类型：application/x-bxml

那是什么？乍一看，它看起来像二进制 XML，我能够识别 xml 标记和属性名称，但我找不到该格式的任何描述。

数据的标题以“BXMLe”开头。

任何帮助，将不胜感激！

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T16:13:29.233

BXML 是一种基于 XML 的标记语言，用于简化 Java 对象层次结构的构建。虽然它最常用于定义 Apache Pivot 应用程序的用户界面，但它并不限于用户界面构造，实际上可以用于创建任何对象类型的层次结构。

[http://pivot.apache.org/tutorials/bxml-primer.html](http://pivot.apache.org/tutorials/bxml-primer.html)

# python - 尝试 Vyatta 的非标准命令时，Paramiko“命令无效”

> ID：15864552
> 
> 赞同：2
> 
> 时间：2013-04-07T16:11:16.337
> 
> 标签：python, ssh, paramiko

我刚刚尝试使用 Paramiko 进行 SSH 连接我的 Python/Django 应用程序与 Vyatta 服务器。不幸的是，当我尝试运行`show interfaces`它时会抛出“无效命令”。但是，如果尝试从该服务器手动 SSH，它工作正常。我也试过`'/vbash -c "show interfaces"'`- 结果相同。

```
ssh = paramiko.SSHClient()
ssh.connect('10.0.0.1','vyatta','vyatta')
stdin, stdout, stderr = ssh.exec_command('show interfaces')
# or stdin, stdout, stderr = ssh.exec_command('vbash -c "show interfaces"')
print '-'.join(stdout)
print '-'.join(stderr) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-10-09T08:31:38.270

如前所述，您可以使用**vyatta-cfg-cmd-wrapper**并设置任何配置节点：

```
<import stuff>

command = """
    /opt/vyatta/sbin/vyatta-cfg-cmd-wrapper begin
    /opt/vyatta/sbin/vyatta-cfg-cmd-wrapper set system host-name newhostname
    /opt/vyatta/sbin/vyatta-cfg-cmd-wrapper commit
    /opt/vyatta/sbin/vyatta-cfg-cmd-wrapper save
    """

sshobj = paramiko.SSHClient()
sshobj.set_missing_host_key_policy(paramiko.AutoAddPolicy())
sshobj.connect(IP,username=login,password=sshpass)
stdin,stdout,stderr=sshobj.exec_command(command)
print ''.join(stdout)
sshobj.close() 
```

结果如下：

```
user@hostname$ python vyatta.py

Saving configuration to '/config/config.boot'... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T22:53:36.573

Vyatta 命令由 vbash 中的模板完成。为了使模板工作，需要设置大量环境变量。您必须使用来源 .profilerc 的远程环境，或者使用未记录的脚本 vyatta-cfg-command 包装器来设置提交更改所需的更复杂的状态。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-09-30T07:25:34.807

就我而言，我使用以下命令解决了这个问题：

```
vbash -c -i "restart vpn" 
```

# ruby-on-rails - 在允许用户使用设计（rails）登录之前检查用户是否处于活动状态

> ID：15864554
> 
> 赞同：37
> 
> 时间：2013-04-07T16:11:48.463
> 
> 标签：ruby-on-rails, ruby, devise

我正在使用设计并创建了一个名为 :active 的用户字段，该字段为真或假。在允许用户登录之前，我必须手动使用户处于活动状态（true）。至少这是意图。我试过这个...

```
class SessionsController < Devise::SessionsController
  # POST /resource/sign_in
  def create
    "resource/signin CREATE"
    self.resource = warden.authenticate!(auth_options)
    unless resource.active?
      sign_out
      redirect_to :sorry_not_active_url
      return
    end
    set_flash_message(:notice, :signed_in) if is_navigational_format?
    sign_in(resource_name, resource)
    respond_with resource, :location => after_sign_in_path_for(resource)
  end  
end 
```

但是，这并不能捕获用户可以登录的所有地方，例如，当用户更改密码时，网站会在之后自动将其自动登录。但是，如果用户不活跃，我不希望他们被允许登录，而是被重定向到 sorry_not_active_url。

如果用户不活跃，防止用户登录的最佳方法是什么？

谢谢你。

* * *

## 回答 #1

> 赞同：96
> 
> 时间：2013-04-07T18:55:39.323

将这两种方法添加到您的用户模型中，设计应该自动选择它们 - 您不需要扩展`Devise::SessionsController`

```
def active_for_authentication?
  super && self.your_method_for_checking_active # i.e. super && self.is_active
end

def inactive_message
  "Sorry, this account has been deactivated."
end 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2016-10-09T15:41:01.163

设计（如果你有设计 3.2+）现在支持[`block`](https://github.com/plataformatec/devise/blob/v3.2/app/controllers/devise/sessions_controller.rb#L18)（会话）创建参数

```
# assuming this is your session controller

class SessionsController < Devise::SessionsController

def create
  super do |resource|
     unless resource.active?
      sign_out
      # you can set flash message as well.
      redirect_to :sorry_not_active_url
      return
    end
  end
end 
```

# node.js - 使用 Mongoose 的动态子文档

> ID：15864559
> 
> 赞同：3
> 
> 时间：2013-04-07T16:12:19.510
> 
> 标签：node.js, mongodb, mongoose

我有一个动态数据模型，有几个静态字段，其余的是动态的。例如

```
var item1 = {
    title:'Door',
    price: 30,
    color:{selected:'blue', options:['blue', 'red']}, // dynamic
    material:{selected:'wood', options:['iron', 'wood', 'plastic']}
}

var item2 = {
    title:'T-Shirt',
    price: 5,
    color:{selected:'green', options:['blue', 'green']}, // dynamic 
    size:{selected:'XL', options:['XL', 'L']} // dynamic
} 
```

标记为动态的字段在架构定义上是不知道的，并且新的一次可以动态出现。我创建的架构如下所示：

```
var itemSchema = mongoose.Schema({
    title: String,
    price: Number
}); 
```

似乎 Mongoose 存储了动态字段，但在“查找”时，这些字段以 blob 形式返回，toJSON()/toObject() 删除它们。有没有办法将它们转换回子文档？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T18:26:15.363

根据我的经验，Mongoose 不会保存架构中未定义的内容。根据您的`itemSchema`，除`title`或`price`不会保存的任何内容。

根据您提供的代码，我假设颜色、大小和材料可能存在也可能不存在，但如果存在，它们都遵循相同的格式：带有`selected`和`options`键的对象。所以你可能想试试[Mongoose Subdocuments](http://mongoosejs.com/docs/subdocs.html)

```
var selectionSchema = new Schema({
  selected:String,
  options:Array
});

var itemSchema = mongoose.Schema({
  title: {type:String, required:true},
  price: {type:Number, required:true},
  color: selectionSchema,
  material: selectionSchema,
  size: selectionSchema
}); 
```

请注意`color`，`material`、 和`size`键不是必需的，这仍然允许它们是动态的。如果存在数据，则将保存密钥+数据。如果没有数据，它们的密钥也不会被保存。

**更新：**

正如您在评论中提到的，您事先并不知道所有动态属性。在这种情况下，如果您将架构上的属性指定为“空白”对象，Mongoose 将允许该空白对象上的任何和所有属性，如下所示：

```
var itemSchema = mongoose.Schema({
  title: {type:String, required:true},
  price: {type:Number, required:true},
  selection:{}
}); 
```

在这里，`selection`作为“空白”对象的键可以包含`size`、`color`、`material`或任何其他键。他们不需要事先知道。您仍然可以使用 selectionSchema 来强制执行该子对象的键和值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-30T09:56:13.343

我认为您应该在架构声明中使用设置为 false 的严格选项，以便添加到您的文档中的其他属性也得到保存：

在这里，更多信息： http: [//mongoosejs.com/docs/guide.html#strict](http://mongoosejs.com/docs/guide.html#strict)

问候！

# c# - MVC 4 OAuth：如何获取电子邮件地址

> ID：15864560
> 
> 赞同：5
> 
> 时间：2013-04-07T16:12:23.383
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-4, oauth

我正在开发一个 MVC 4 应用程序并使用 MS 提供的 OAuth 提供程序，但我想为每个用户获取一个电子邮件地址。对于 Google（默认）和 Facebook（使用 FacebookClient），我已经获得了用户地址，但是如何处理以下内容：

*   Twitter（我已经读过这是不可能的 - 仍然是真的？）
*   *微软 - 解决（见评论）*
*   *雅虎 - 作品（见评论）*
*   *LinkedIn - 通过自己的提供商解决，例如 MS*

那么，如果无法像 Twitter 那样通过 OAuth 实现呢？
我已经在不同的线程中阅读过，仅仅向用户询问它是不好的/不安全的。如果我还需要通过电子邮件进行验证以实际使用地址（但不是一般的帐户），就像我（将）在更改地址时所做的那样，它是否“足够安全”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-06T07:56:31.173

OAuth 的目的不是提供电子邮件地址，而是以标准化的方式提供身份验证。仅仅因为许多实现也恰好为您提供了电子邮件地址的选项，并不意味着所有实现都必须遵守。Twitter 就是一个很好的例子。

为什么向用户询问他们的电子邮件地址不是“安全的”？我会质疑，我的意思是，如果您不能信任用户输入的有关其电子邮件地址的信息，那么您可以信任他们什么呢？如果您使用某种确认邮件系统，那肯定没问题？

# scala - Play Framework 2.0 使用 Anorm 在查询中表示集合的正确方法

> ID：15864564
> 
> 赞同：2
> 
> 时间：2013-04-07T16:12:34.660
> 
> 标签：scala, playframework-2.0, anorm

我正在尝试使用 Anorm 使用返回一组 id 的匹配行的查询来返回结果列表。例如。

```
select *
from example
where id in (1,2,3,4,5) 
```

如果我尝试

```
SQL(
    """
      select *
      from example 
      where id in ({ids})
    """
  ).on('ids -> ids).as(int("id") ~ str("name") *) 
```

其中 ids 是字符串 "1,2,3,4,5" 它只会返回第一行。注入一组 id 的正确方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-08T08:42:52.070

AFAIK 没有简单的方法。

这就是我解决它的方法：

```
def findSomething(ids: String) = {
  // Split up the comma separated values
  val sids = ids split ","
  // Create a list of keys (id0, id1, id2, ...)
  val keys = for ( i <- 0 until sids.size ) yield ("id" + i)
  // Create a seq of parameterized values
  val values = sids map (toParameterValue(_))

  // Now zip together the keys and values into list of tuples
  val params = keys zip values

  DB.withConnection { implicit connection =>
    SQL(
      """
        select *
        from example 
        where id in ({%s})
      """.format(keys.mkString("},{"))
    ).on(
      params: _*
    ).as(
      int("id") ~ str("name") *
    )
  }
} 
```

**注意**
这里的关键部分是 SQL 语句中的字符串格式。如果您无法完全控制输入参数，那么它很容易受到 SQL 注入的攻击。

# ruby - 用 rr 模拟单元测试 Ruby 块（以前是 flexmock）

> ID：15864565
> 
> 赞同：0
> 
> 时间：2013-04-07T16:12:35.387
> 
> 标签：ruby, unit-testing, mocking, block, rr

如何对以下内容进行单元测试：

```
 def update_config
    store = YAML::Store.new('config.yaml')
    store.transaction do
      store['A'] = 'a'
    end
  end 
```

这是我的开始：

```
 def test_yaml_store
    mock_store = flexmock('store')
    mock_store
      .should_receive(:transaction)
      .once
    flexmock(YAML::Store).should_receive(:new).returns(mock_store)
    update_config()
  end 
```

如何测试块内的内容？

**更新**

我已将测试转换为规范并切换到 rr 模拟框架：

```
describe 'update_config' do
  it 'calls transaction' do
    stub(YAML::Store).new do |store|
      mock(store).transaction
    end
    update_config
  end
end 
```

这将测试调用的事务。如何在块内测试：`store['A'] = 'a'`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-06T01:32:01.720

首先，您可以将其编写得更简单一些——您使用 RR 的测试并不是您使用 FlexMock 测试的直接端口。其次，您根本没有测试块内发生的事情，因此您的测试是不完整的。试试这个：

```
describe '#update_config' do
  it 'makes a YAML::Store and stores A in it within a transaction' do
    mock_store = {}
    mock(mock_store).transaction.yields
    mock(YAML::Store).new { mock_store }
    update_config
    expect(mock_store['A']).to eq 'a'
  end
end 
```

请注意，由于您提供了#transaction 的实现，而不仅仅是返回值，您也可以这样说：

```
describe '#update_config' do
  it 'makes a YAML::Store and stores A in it within a transaction' do
    mock_store = {}
    mock(mock_store).transaction { |&block| block.call }
    mock(YAML::Store).new { mock_store }
    update_config
    expect(mock_store['A']).to eq 'a'
  end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-05T18:41:44.523

你想调用**yield**：

```
describe 'update_config' do
  it 'calls transaction which stores A = a' do
    stub(YAML::Store).new do |store|
      mock(store).transaction.yields
      mock(store).[]=('A', 'a')
    end
    update_config
  end
end 
```

查看[此答案](https://stackoverflow.com/a/15031110/449531)以了解相关问题的不同方法。希望[rr api 文档](https://github.com/rr/rr/blob/master/doc/03_api_overview.md)会有所改进。

# rewrite - 如何使 g-wan 使用 (mybb,wordpress,...) 重写规则

> ID：15864569
> 
> 赞同：-2
> 
> 时间：2013-04-07T16:13:00.060
> 
> 标签：rewrite, g-wan

**我是g-wan的**新手，我很困惑

我想知道如何使 mybb 和 wordpress 以及任何 php 脚本与 g-wan 一起工作

如果有任何工具可以将 apache htaccess 转换为 g-wan

谢谢你

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T18:48:47.170

G-WAN 目前还没有广泛传播，目前没有社区可以共享代码、交换信息和帮助。我曾尝试使用 MyBB、SMF、XenForo 和其他一些 PHP 框架和应用程序，但它们总是遇到一些问题。您必须记住，即使这些应用程序似乎在 Apache/nginx 或其他应用程序上普遍运行，但它们已经在这些平台上编写，在这些平台上进行了测试，并进行了兼容性检查以确保它们在这些主要平台上运行。PHP 不是一种开箱即用的语言，无论运行的是什么。

为了更直接地回答您的问题，没有现有的工具可以完成您的要求，这取决于您或其他开发人员来完成并希望与他人分享，以便 G-WAN 社区能够发展。

但是，您可能会发现有趣的是，G-WAN 是可用的最灵活的 Web 和应用程序服务器，您可以混合和匹配所有受支持的语言，而不仅仅局限于一种语言或框架。我发现此功能是最有价值的功能之一，因为它使您可以与来自不同背景和语言知识的各种程序员一起从头开始开发新网站和 Web 应用程序，并使其与 HTML/Javascript/CSS 一起工作前端。

这里的乐趣在于修改这些主要脚本以使用 G-WAN 并观察它们在 G-WAN 上飞行的速度有多快。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T17:24:13.663

> 如何使 mybb 和 wordpress 以及任何 php 脚本与 g-wan 一起工作

支持 PHP 的 Web 服务器通过 fastCGI 运行 PHP，并且需要类似 Apache 的配置文件。

G-WAN 的设计考虑了其他限制（零配置、低延迟等），这就是为什么它的设计不同 - 以满足其他需求。

> 任何将 apache htaccess 转换为 g-wan 的工具

G-WAN 处理程序可以轻松实施 htaccess 策略，具有更高级别的控制，因为它将以编程方式完成（因此能够将动态参数考虑在内，如服务器负载、复杂的客户端 IP 地址过滤器等）。

这个问题说明了 G-WAN（像 GlassFish、Tuxedo 或 Tomcat 这样的应用程序服务器）是如何被设计为程序员的工具，而像 Apache 这样的 Web 服务器主要是为满足网站管理员的需求而设计的。

# matlab - Matlab 错误：“double”类型的输入参数的未定义函数“dmod”。为什么没有 dmod 函数，因为它应该与 Matlab 一起使用？

> ID：15864571
> 
> 赞同：0
> 
> 时间：2013-04-07T16:13:20.757
> 
> 标签：matlab

我一直在做一些考试，需要做一个涉及一些频移键控的练习。这就是我使用 Matlab 中的 dmod 函数的原因——它是 Matlab 自带的。但正如我在控制台中写的

`yfsk=dmod([1 0], 3, 0.5, 100,'fsk', 2, 1);`

它给了我这个

**'double'类型的输入参数的'未定义函数'dmod'。**

我也尝试过`doc dmod`，它在 matlab 帮助窗口中显示“找不到页面”。

你知道这是因为我没有安装所有的 matlab 软件包还是 matlab 2012a 不支持这个功能？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T16:44:57.360

这会很有帮助：

```
function [y, t] = dmod(x, Fc, Fd, Fs, method, M, opt2, opt3)
%DMOD 
%
%WARNING: This is an obsolete function and may be removed in the future.
%         Please use MODEM.PAMMOD, MODEM.QAMMOD, MODEM.GENQAMMOD, FSKMOD,
%         MODEM.PSKMOD, or MODEM.MSKMOD instead.

%   Y = DMOD(X, Fc, Fd, Fs, METHOD...) modulates the message signal X
%   with carrier frequency Fc (Hz) and symbol frequency Fd (Hz).  The
%   sample frequency of Y is Fs (Hz), where Fs > Fc and where Fs/Fd is
%   a positive integer. For information about METHOD and subsequent
%   parameters, and about using a specific modulation technique,
%   type one of these commands at the MATLAB prompt:
%
%   FOR DETAILS, TYPE     MODULATION TECHNIQUE
%     dmod ask            % M-ary amplitude shift keying modulation
%     dmod psk            % M-ary phase shift keying modulation
%     dmod qask           % M-ary quadrature amplitude shift keying
%                         % modulation
%     dmod fsk            % M-ary frequency shift keying modulation
%     dmod msk            % Minimum shift keying modulation
%   
%   For baseband simulation, use DMODCE.  To plot signal constellations,
%   use MODMAP.
%
%   See also DDEMOD, DMODCE, DDEMODCE, MODMAP, AMOD, ADEMOD.

%   Copyright 1996-2007 The MathWorks, Inc.
%   $Revision: 1.1.6.5 $  $Date: 2007/06/08 15:53:47 $

warnobsolete(mfilename, 'Please use MODEM.PAMMOD, MODEM.QAMMOD, MODEM.GENQAMMOD, FSKMOD, MODEM.PSKMOD, or MODEM.MSKMOD instead.');

swqaskenco = warning('off', 'comm:obsolete:qaskenco');
swapkconst = warning('off', 'comm:obsolete:apkconst');
swmodmap = warning('off', 'comm:obsolete:modmap');
swamod = warning('off', 'comm:obsolete:amod');

opt_pos = 6;        % position of 1st optional parameter

if nargout > 0
   y = []; t = [];
end
if nargin < 1
    feval('help','dmod')
    return;
elseif isstr(x)
    method = lower(deblank(x));
    if length(method) < 3
        error('Invalid method option for DMOD.')
    end
    if nargin == 1
        % help lines for individual modulation method.
        addition = 'See also DDEMOD, DMODCE, DDEMODCE, MODMAP, AMOD, ADEMOD.';
        if method(1:3) == 'qas'
          callhelp('dmod.hlp', method(1:4), addition);
        else
          callhelp('dmod.hlp', method(1:3), addition);
        end
    else
        % plot constellation, make a shift.
        opt_pos = opt_pos - 3;
        M = Fc;
        if nargin >= opt_pos
            opt2 = Fd;
        else
            modmap(method, M);
            return;
        end
        if nargin >= opt_pos+1
            opt3 = Fs;
        else
            modmap(method, M, opt2);
            return;
        end
        modmap(method, M, opt2, opt3);  % plot constellation
    end
    return;
end

if (nargin < 4)
    error('Usage: Y = DMOD(X, Fc, Fd, Fs, METHOD, OPT1, OPT2, OPT3) for passband modulation');
elseif nargin < opt_pos-1
    method = 'samp';
else
    method = lower(method);
end

len_x = length(x);
if length(Fs) > 1
    ini_phase = Fs(2);
    Fs = Fs(1);
else
    ini_phase = 0;      % default initial phase
end

if ~isfinite(Fs) | ~isreal(Fs) | Fs<=0
    error('Fs must be a positive number.');
elseif length(Fd)~=1 | ~isfinite(Fd) | ~isreal(Fd) | Fd<=0
    error('Fd must be a positive number.');
else
    FsDFd = Fs/Fd;      % oversampling rate
    if ceil(FsDFd) ~= FsDFd
        error('Fs/Fd must be a positive integer.');
    end
end
if length(Fc) ~= 1 | ~isfinite(Fc) | ~isreal(Fc) | Fc <= 0
    error('Fc must be a positive number. For baseband modulation, use DMODCE.');
elseif Fs/Fc < 2
    warning('Fs/Fc must be much larger than 2 for accurate simulation.');
end

% determine M
if isempty(findstr(method, '/arb')) & isempty(findstr(method, '/cir'))
    if nargin < opt_pos
        M = max(max(x)) + 1;
        M = 2^(ceil(log(M)/log(2)));
        M = max(2, M);
    elseif length(M) ~= 1 | ~isfinite(M) | ~isreal(M) | M <= 0 | ceil(M) ~= M
        error('Alphabet size M must be a positive integer.');
    end
end

if isempty(x)
    y = [];
    return;
end
[r, c] = size(x);
if r == 1
    x = x(:);
    len_x = c;
else
    len_x = r;
end

% expand x from Fd to Fs.
if isempty(findstr(method, '/nomap'))
    if ~isreal(x) | all(ceil(x)~=x)
        error('Elements of input X must be integers in [0, M-1].');
    end
    yy = [];
    for i = 1 : size(x, 2)
        tmp = x(:, ones(1, FsDFd)*i)';
        yy = [yy tmp(:)];
    end
    x = yy;
    clear yy tmp;
end

if strncmpi(method, 'ask', 3)
    if isempty(findstr(method, '/nomap'))
        % --- Check that the data does not exceed the limits defined by M
        if (min(min(x)) < 0)  | (max(max(x)) > (M-1))
           error('An element in input X is outside the permitted range.');
        end
        y = (x - (M - 1) / 2 ) * 2 / (M - 1);
    else
        y = x;
    end
    [y, t] = amod(y, Fc, [Fs, ini_phase], 'amdsb-sc');
elseif strncmpi(method, 'fsk', 3)
    if nargin < opt_pos + 1
        Tone = Fd;
    else
        Tone = opt2;
    end

    if (min(min(x)) < 0)  | (max(max(x)) > (M-1))
       error('An element in input X is outside the permitted range.');
    end

    [len_y, wid_y] = size(x);
    t = (0:1/Fs:((len_y-1)/Fs))';   % column vector with all the time samples
    t = t(:, ones(1, wid_y));       % replicate time vector for multi-channel operation

    osc_freqs = pi*[-(M-1):2:(M-1)]*Tone;
    osc_output = (0:1/Fs:((len_y-1)/Fs))'*osc_freqs;  

    mod_phase = zeros(size(x))+ini_phase;
    for index = 1:M
        mod_phase = mod_phase + (osc_output(:,index)*ones(1,wid_y)).*(x==index-1);
    end
    y = cos(2*pi*Fc*t+mod_phase);
elseif strncmpi(method, 'psk', 3)
    % PSK is a special case of QASK.
    [len_y, wid_y] = size(x);
    t = (0:1/Fs:((len_y-1)/Fs))';
    if findstr(method, '/nomap')
        y = dmod(x, Fc, Fs, [Fs, ini_phase], 'qask/cir/nomap', M);
    else
        y = dmod(x, Fc, Fs, [Fs, ini_phase], 'qask/cir', M);
    end
elseif strncmpi(method, 'msk', 3)
    M = 2;
    Tone = Fd/2;
    if isempty(findstr(method, '/nomap'))
        % Check that the data is binary
        if (min(min(x)) < 0)  | (max(max(x)) > (1))
           error('An element in input X is outside the permitted range.');
        end
        x = (x-1/2) * Tone;
    end
    [len_y, wid_y] = size(x);
    t = (0:1/Fs:((len_y-1)/Fs))';     % column vector with all the time samples
    t = t(:, ones(1, wid_y));       % replicate time vector for multi-channel operation
    x = 2 * pi * x / Fs;            % scale the input frequency vector by the sampling frequency to find the incremental phase
    x = [0; x(1:end-1)];
    y = cos(2*pi*Fc*t+cumsum(x)+ini_phase);
elseif (strncmpi(method, 'qask', 4) | strncmpi(method, 'qam', 3) |...
         strncmpi(method, 'qsk', 3) )
    if findstr(method,'nomap')
        [y, t] = amod(x, Fc, [Fs, ini_phase], 'qam');
    else
        if findstr(method, '/ar')       % arbitrary constellation
            if nargin < opt_pos + 1
                error('Incorrect format for METHOD=''qask/arbitrary''.');
            end
            I = M;
            Q = opt2;
            M = length(I);
            % leave to the end for processing
            CMPLEX = I + j*Q;
        elseif findstr(method, '/ci')   % circular constellation
            if nargin < opt_pos
                error('Incorrect format for METHOD=''qask/circle''.');
            end
            NIC = M;
            M = length(NIC);
            if nargin < opt_pos+1
                AIC = [1 : M];
            else
                AIC = opt2;
            end
            if nargin < opt_pos + 2
                PIC = NIC * 0;
            else
                PIC = opt3;
            end
            CMPLEX = apkconst(NIC, AIC, PIC);
            M = sum(NIC);
        else    % square constellation
            [I, Q] = qaskenco(M);
            CMPLEX = I + j * Q;
        end
        y = [];
        x = x + 1;
        % --- Check that the data does not exceed the limits defined by M
        if (min(min(x)) < 1) | (max(max(x)) > M)
            error('An element in input X is outside the permitted range.');
        end
        for i = 1 : size(x, 2)
            tmp = CMPLEX(x(:, i));
            y = [y tmp(:)];
        end
        ind_y = [1: size(y, 2)]';
        ind_y = [ind_y, ind_y+size(y, 2)]';
        ind_y = ind_y(:);
        y = [real(y) imag(y)];
        y = y(:, ind_y);
        [y, t] = amod(y, Fc, [Fs, ini_phase], 'qam');
    end
elseif strncmpi(method, 'samp', 4)
    % This is for converting an input signal from sampling frequency Fd
    % to sampling frequency Fs.
    [len_y, wid_y] = size(x);
    t = (0:1/Fs:((len_y-1)/Fs))';
    y = x;
else    % invalid method
    error(sprintf(['You have used an invalid method.\n',...
        'The method should be one of the following strings:\n',...
        '\t''ask'' Amplitude shift keying modulation;\n',...
        '\t''psk'' Phase shift keying modulation;\n',...
        '\t''qask'' Quadrature amplitude shift-keying modulation, square constellation;\n',...
        '\t''qask/cir'' Quadrature amplitude shift-keying modulation, circle constellation;\n',...
        '\t''qask/arb'' Quadrature amplitude shift-keying modulation, user defined constellation;\n',...
        '\t''fsk'' Frequency shift keying modulation;\n',...
        '\t''msk'' Minimum shift keying modulation.']));
end

if r==1 & ~isempty(y)
    y = y.';
end

warning(swqaskenco);
warning(swapkconst);
warning(swmodmap);
warning(swamod);

% [EOF] 
```

我确实相信`dmod`最新的 MATLAB 版本中已经放弃了该功能（通信工具箱）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-07T16:49:29.613

看起来 dmod 已经不复存在了 :-) 这是显示它已被删除的链接：

```
http://www.mathworks.com/help/comm/release-notes.html?searchHighlight=dmod 
```

它应该被替换为 comm.FSKModulator System object

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-07T16:20:32.790

我想您可能正在寻找信号处理工具箱中的解调功能（**demod**）。

[http://www.mathworks.com.au/help/signal/ref/demod.html](http://www.mathworks.com.au/help/signal/ref/demod.html)

# html - Sessionstorage - 存储所有内容

> ID：15864576
> 
> 赞同：0
> 
> 时间：2013-04-07T16:14:05.313
> 
> 标签：html, local-storage, session-storage

我已经阅读了很多关于新 Sessionstorage 可能性的信息，但我从未听说过为单个会话保存图像（base64）、html、css aso 等所有内容的想法。有理由不这样做吗？如果用户返回页面，所有内容都将在几毫秒内加载。我可以理解为什么不使用 Localstorage，但作为一个单独的会话，它不应该是有害的，并且只会在用户浏览大型网站时稍微提高速度。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T16:19:01.753

SessionStorage 应该用于存储会话数据。图像不是会话数据。对于图像、样式、脚本等的存储，使用 HTTP 缓存。

**如果您更改样式表或图像怎么办？**sessionStorage 不会知道它们已更改。访问者被旧数据困住了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T16:39:49.980

如果要保存图像，请使用 Manifest 而不是 SessionStorage。在清单文件中，您可以缓存您想要的内容，这可能是您的解决方案。

看完这篇文章你可能会感兴趣

[http://diveintohtml5.info/offline.html](http://diveintohtml5.info/offline.html)

# css - CSS3 onclick 激活另一个 DIV 的动画

> ID：15864577
> 
> 赞同：4
> 
> 时间：2013-04-07T16:14:08.023
> 
> 标签：css, click

我有一个链接到我页面上的锚点的菜单栏。目前，页面内的内容在初始页面加载时使用 CSS3 动画淡入，但我希望它们在单击菜单栏中的某个锚链接后淡入。我怎么做？

例如。About 被按下然后 .aboutinfo CSS 动画被激活。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-07T16:20:47.683

这是一个演示，即使仅使用 CSS（无 javascript）也可以进行 onclick [http://jsfiddle.net/kevinPHPkevin/K8Hax/](http://jsfiddle.net/kevinPHPkevin/K8Hax/)

CSS

```
#box1 {
    display:none;
}
#box1:target {
    display:block;
} 
```

HTML

```
<a href="#box1">Click Me</a>
<div id="box1">test test</div> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-07-15T06:17:37.770

要做到这一点您可以使用“+”符号

例如。

如果我希望当我将鼠标悬停在一个框上时改变一个圆圈的颜色然后

查看：

[http://jsfiddle.net/utkarshd/Hh38R/](http://jsfiddle.net/utkarshd/Hh38R/)

HTML

`<div class="box"></div>
<div class="circle"></div>`

CSS

```
.box{width:100px; height:100px; background-color:yellow;} 

.circle{
width:100px;
height:100px;
border-radius:100px 100px;
background-color:orange;
-webkit-transition:all 0.7s;//for safari and chrome
-moz-transition:all 0.7s;//for mozilla
-o-transition:all 0.7s;//for opera
-ms-transition:all 0.7s;//for IE
}

.box:hover+.circle
{
background-color:blue;
} 
```

# visual-studio - TypeScript 项目构建配置选项有哪些？

> ID：15864584
> 
> 赞同：2
> 
> 时间：2013-04-07T16:15:20.383
> 
> 标签：visual-studio, typescript

当我创建一个新的“HTMLWeb App”项目时，我得到了一个 .csproj，其中包含用于 Typescript 的项目 XML 中的一些默认选项。在哪里可以找到所有可能的 TypeScript 构建选项的列表？

在我的项目中搜索当前 3 个选项的名称，例如“TypeScriptIncludeComments”，在 Google 上没有返回任何结果。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-07T16:19:17.007

`.targets`我在 TypeScript 安装附带的文件中找到了选项列表。这是实际发送到“tsc.exe”（TypeScript 编译器）的命令行参数的完整选项列表

*   打字稿包含评论..... `--comments`
*   TypeScriptGeneratesDeclarations ..... `--declaration`
*   TypeScriptModuleKind .....`--module $(TypeScriptModuleKind)`
*   TypeScriptIncludeDefaultLib ..... `--nolib`
*   打字稿输出文件..... `--out $(TypeScriptOutFile)`
*   TypeScriptSourceMap ..... `--sourcemap`
*   打字稿目标...... `--target $(TypeScriptTarget)`
*   TypeScriptAdditionalFlags ..... `$(TypeScriptAdditionalFlags)`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-05-15T11:31:25.663

更新 Guptas 对 Visual Studio 2015 RC 的回答。Microsoft.TypeScript.targets 文件现在位于 c:\Program Files (x86)\MSBuild\Microsoft\VisualStudio\v14.0\TypeScript 中。

*   打字稿删除评论......`--removeComments`
*   TypeScriptNoImplicitAny .....`--noImplicitAny`
*   TypeScriptGeneratesDeclarations .....`--declaration`
*   TypeScriptModuleKind .....`--module "$(TypeScriptModuleKind)"`
*   打字稿输出文件.....`--out "$(TypeScriptOutFile)"`
*   TypeScriptOutDir .....`--outDir "$(TypeScriptOutDir)"`
*   TypeScriptSourceMap .....`--sourcemap`
*   打字稿目标......`--target $(TypeScriptTarget)`
*   TypeScriptNoResolve .....`--noResolve`
*   TypeScriptAdditionalFlags .....`$(TypeScriptAdditionalFlags)`
*   TypeScriptMapRoot .....`--mapRoot "$(TypeScriptMapRoot)"`
*   TypeScriptSourceRoot .....`--sourceRoot "$(TypeScriptSourceRoot)"`
*   打字稿代码页.....`--codepage $(TypeScriptCodePage)`
*   打字稿字符集.....`--charset $(TypeScriptCharset)`
*   TypeScriptEmitBOM .....`--emitBOM`
*   TypeScriptNoLib .....`--noLib`
*   TypeScriptPreserveConstEnums .....`--preserveConstEnums`
*   TypeScriptSuppressImplicitAnyIndexErrors .....`--suppressImplicitAnyIndexErrors`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T16:19:16.730

更改任何 Typescript 构建选项的最简单方法是使用[Web Extensions](http://visualstudiogallery.msdn.microsoft.com/07d54d12-7133-4e15-becb-6f451ea3bea6)。如果您使用 Visual Studio 进行任何类型的 Web 工作，我强烈推荐它。

# php - MySQL Query 未在 setInterval 上返回最新结果

> ID：15864585
> 
> 赞同：0
> 
> 时间：2013-04-07T16:15:21.150
> 
> 标签：php, javascript, mysql

我在**$(document).ready(function(){}中遇到了****setInterval的问题**

 **我正在做的是设置要执行的时间间隔是调用一个 PHP 脚本，该脚本运行一些 MySQL 查询以检查 4 个开关的条件，然后使用数据库中的值更新屏幕，如下所示：

```
$(document).ready(function(){

setInterval(function(){

<?php require('fetchSwitchStatuses.php'); ?>

$("#switch1").css('background', 'rgb(<?php echo $switchColor1 ?>)');
$("#switch1").html('<?php echo $switchState1 ?>');
$("#switch2").css('background', 'rgb(<?php echo $switchColor2 ?>)');
$("#switch2").html('<?php echo $switchState2 ?>');
$("#switch3").css('background', 'rgb(<?php echo $switchColor3 ?>)');
$("#switch3").html('<?php echo $switchState3 ?>');
$("#switch4").css('background', 'rgb(<?php echo $switchColor4 ?>)');
$("#switch4").html('<?php echo $switchState4 ?>');
  },1000);

}); 
```

**这是 fetchSwitchStatuses.php 的代码：**

```
$connect = mysqli_connect("localhost", "root", "root");
mysqli_select_db($connect, "db_name");

$fetch1 = mysqli_query($connect,
"SELECT SwitchStatus FROM Switches WHERE PinNumber = '3'"
);
$fetch2 = mysqli_query($connect,
"SELECT SwitchStatus FROM Switches WHERE PinNumber = '5'"
);
$fetch3 = mysqli_query($connect,
"SELECT SwitchStatus FROM Switches WHERE PinNumber = '6'"
);
$fetch4 = mysqli_query($connect,
"SELECT SwitchStatus FROM Switches WHERE PinNumber = '9'"
);

$i = 1;

while($row = mysqli_fetch_array(${'fetch'.$i}))
{

    if($row['SwitchStatus'] == 0)
    {
        ${'switchColor'.$i} = "255, 0, 0";
        ${'switchState'.$i} = "OFF";

    }
    else if ($row['SwitchStatus'] == 1){
        ${'switchColor'.$i} = "0, 255, 0";
        ${'switchState'.$i} = "ON";
    }
    else {
        ${'switchColor'.$i} = "100, 100, 100";
        ${'switchState'.$i} = "ERROR";
    }
$i++;
}

mysqli_close($connect); 
```

加载页面时，信息是正确的，数据库中的内容就是屏幕上颜色所反映的内容。

当我单击对象以更改值时，会进行所有必要的更改并更新数据库。然而，当间隔重复时，问题就出现了。这些值将切换回加载页面时的原始值。因此，尽管数据库中的信息已正确更改，但出于某种原因，按钮的颜色总是重置为查询读取的第一个值。

如何解决此问题，以使屏幕上反映的信息准确无误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T18:24:49.973

使用 AJAX 技术，您可以： 发送请求并通过请求页面（.txt .js .html 甚至 php）从服务器获取结果。
因此，使用 AJAX，您可以获得页面的结果，将某些内容保存到数据库，从数据库中获取某些内容，您可以使用会话以及您可以使用 php 文件执行的任何操作。当您发送 AJAX 请求到查看页面（即 /userData.php?userId=5）时，页面 /userData.php?userId=5 将被执行并返回其输出。（HTML 或只是一个词'是'或'否'或'您无法访问此用户的信息'）。
您可以使用 POST 或 GET 将数据发送到文件。但问题是如何从页面获取数据。因为 AJAX 将给你的结果是请求的页面回显到这样的页面

```
<html>
….
</html> 
```

或者

```
‘Yes’ 
```

或者

```
<?php echo ‘something’; ?> 
```

那么如何获取一行 Date 或大量数据呢？因为你得到的唯一的东西是一个文本或者可能是一个长文本。
为此，您可以使用类似于嵌套数组的 JSON。

```
[ 
{ 
"term": "BACCHUS", 
"part": "n.", 
"definition": "A convenient deity invented by the...", 
"quote": [ 
"Is public worship, then, a sin,", 
"That for devotions paid to Bacchus", 
"The lictors dare to run us in,", 
"And resolutely thump and whack us?" 
], 
"author": "Jorace" 
},
… 
```

这也是一个字符串。但是您可以使用 jQuery 中的 $.getJSON 获取其中的数据，并且您可以像这样在服务器端生成 JSON 数据。

```
<?php
$arr=array(
‘data’=>’ffff’,
‘anotherData’=>array(‘rrrrr’,’sssss’);
);
Echo json_encode($arr);
?> 
```

PHP 中的 Json_encode() 获取一个数组并返回它的 json 字符串。我们回应它。现在我们可以使用 jQuery 来获取将从服务器检索的数据。
本节来自
**Learning jQuery 1.3
Better Interaction Design and Web Development with Simple
JavaScript Techniques
Jonathan Chaffer
Karl Swedberg** 
全局 jQuery 函数
至此，我们使用的所有 jQuery 方法都已附加到我们使用 $() 工厂函数构建的 jQuery 对象上。选择器允许我们指定一组要使用的 DOM 节点，并且方法以某种方式对它们进行操作。然而，这个 $.getJSON() 函数是不同的。没有可以应用的逻辑 DOM 元素；结果对象必须提供给脚本，而不是注入页面。出于这个原因，getJSON() 被定义为全局 jQuery 对象（由 jQuery 库定义一次称为 jQuery 或 $ 的单个对象）的方法，而不是单个 jQuery 对象实例（我们使用 $( ） 功能）。
如果 JavaScript 有像其他面向对象语言一样的类，我们会调用 $.getJSON() 一个类方法。出于我们的目的，我们将这种类型的方法称为全局函数；实际上，它们是使用 jQuery 命名空间的函数，以免与其他函数名冲突。
要使用这个函数，我们像以前一样将文件名传递给它：

```
$(document).ready(function() { 
$('#letter-b a').click(function() { 
$.getJSON('b.json'); 
return false; 
});
}); 
```

当我们点击链接时，这段代码没有明显的效果。函数调用加载文件，但我们没有告诉 JavaScript 如何处理结果数据。为此，我们需要使用回调函数。
$.getJSON() 函数接受第二个参数，这是加载完成时要调用的函数。如前所述，AJAX 调用是异步的，回调提供了一种等待数据传输的方法，而不是立即执行代码。回调函数还接​​受一个参数，该参数填充了结果数据。所以，我们可以写：

```
$(document).ready(function() { 
$('#letter-b a').click(function() { 
$.getJSON('b.json', function(data) { 
}); 
return false; 
});
}); 
```

在这里，我们使用匿名函数作为回调，为简洁起见，这在我们的 jQuery 代码中很常见。命名函数同样可以作为回调提供。
在这个函数内部，我们可以根据需要使用数据变量来遍历数据结构。我们需要遍历顶层数组，为每个项目构建 HTML。我们可以使用标准的 for 循环来做到这一点，但我们将介绍另一个 jQuery 有用的全局函数 $.each()。我们在第 5 章看到了它的对应方法，.each() 方法。这个函数不是对一个 jQuery 对象进行操作，而是将一个数组或映射作为它的第一个参数，并将一个回调函数作为它的第二个参数。每次通过循环，当前迭代索引和数组或映射中的当前项作为两个参数传递给回调函数。

```
$(document).ready(function() { 
$('#letter-b a').click(function() { 
$.getJSON('b.json', function(data) { 
$('#dictionary').empty(); 
$.each(data, function(entryIndex, entry) { 
var html = '<div class="entry">'; 
html += '<h3 class="term">' + entry['term'] + '</h3>'; 
html += '<div class="part">' + entry['part'] + '</div>'; 
html += '<div class="definition">'; 
html += entry['definition']; 
html += '</div>'; 
html += '</div>'; 
$('#dictionary').append(html); 
}); 
}); 
return false; 
});
}); 
```

在循环之前，我们清空，以便我们可以用我们新构建的 HTML 填充它。然后我们使用 $.each() 依次检查每个项目，使用入口映射的内容构建一个 HTML 结构。最后，我们通过将这个 HTML 附加到 .

这种方法假定数据对于 HTML 消费是安全的；例如，它不应包含任何杂散的 < 字符。**

# php - 每次调用都进行 Restful Web 服务 API 用户身份验证

> ID：15864586
> 
> 赞同：2
> 
> 时间：2013-04-07T16:15:27.820
> 
> 标签：php, android

我需要创建一个 REST api 来首次对用户进行身份验证，并根据该用户检索其他信息以供后续调用。如果我没记错的话，Restful 服务是无状态的，因此不需要在服务器端存储用户信息。我的问题是如何保证在没有会话的情况下对所有后续调用进行用户身份验证？

需要此服务来创建可以在移动设备上显示信息的 android 应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T17:33:21.727

您可以使用广泛使用的标准[OAuth 。](http://en.wikipedia.org/wiki/OAuth)

另一种选择是通过 SSL 使用 BASIC 身份验证。任何体面的 HTTP 库都将支持 BASIC 身份验证。客户端将在第一次发出请求时受到质询。后续请求需要通过安全线路发送 BASIC auth 标头。

有一种方法是您将秘密传递给您的客户端并使用 HMAC-SHA256 将 URL 参数的哈希发送到服务器。亚马逊就是这样做的，并且有[一篇文章介绍](http://www.thebuzzmedia.com/designing-a-secure-rest-api-without-oauth-authentication/)了如何做到这一点。它不像 OAuth 那样复杂。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T23:22:24.713

有很多方法可用，但 IMO 最好的方法是生成 AuthToken 服务器端并在成功登录后将其返回给客户端。然后，客户端在向服务器发送的每个请求中都包含此内容。

我通常做的是创建一个密钥的 MD5 散列和用户的 id-用户的用户名-用户的密码-和当前日期时间。然后我将令牌和当前日期时间存储在数据库中。在查找之后，我解码令牌并将数据点与 db 值进行比较，如果它们匹配，用户就很好。这种方式是无状态的并且易于扩展。

# apache - 添加 VirtualHost 会破坏所有其他服务器文件夹

> ID：15864591
> 
> 赞同：1
> 
> 时间：2013-04-07T16:16:06.527
> 
> 标签：apache, hosting, virtualhost

我正在尝试在我的服务器上运行 Designer-school.com。我已经添加了这个 VirtualHost

```
<VirtualHost *:80>
DocumentRoot /var/www/html/backendtwo
ServerName www.designer-school.com
<Directory /var/www/html/backendtwo>
Allow from all
Options +Indexes
</Directory>
</VirtualHost> 
```

现在这意味着我可以访问域 Designer-school.com 但是如果我尝试访问此服务器上的其他文件夹，我会收到 404 错误，例如 [http://joshhornby.co.uk/typewriter](http://joshhornby.co.uk/typewriter)

如果我尝试访问根网站 [http://joshhornby.co.uk/post/web-course上的博客文章](http://joshhornby.co.uk/post/web-course)

有没有办法在服务器上运行域设计学校，但不会影响服务器上运行的其他站点？

我已经查看了当我重新启动服务器时必须运行多个 VirtualHosts 我收到此消息

```
[warn] _default_ VirtualHost overlap on port 80, the first has precedence 
```

我的 .haccess 文件中有什么需要更改的吗？

# git - 如何允许 Git 提交消息（如“修复 #3”）更新 Trac 票证？

> ID：15864592
> 
> 赞同：2
> 
> 时间：2013-04-07T16:16:18.873
> 
> 标签：git, trac

我刚刚在还拥有 Git 存储库的服务器上安装了 Trac 1.0.1。我希望能够通过在 Git 提交消息中包含诸如“修复 #3”之类的内容来关闭 Trac 票证。这应该很容易——通过在我的存储库中包含一个[`post-receive`钩子](http://git-scm.com/book/ch7-3.html)`git push`，我可以在每个到服务器之后执行一些代码（例如 Python 脚本） 。但是要使用什么代码呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-07T16:16:18.873

在跑了一段时间后，遇到了几个死胡同（包括[Trac Git 页面](http://trac.edgewall.org/wiki/TracGit)，在这个主题上含糊不清，以及[Git 插件，在](http://trac-hacks.org/wiki/GitPlugin)[错误 #7301](http://trac-hacks.org/ticket/7301)修复之前实际上不会工作（？！）），我找到了解决方案。

1.  [通过“设置 Trac 环境”</a> 中](http://trac.edgewall.org/wiki/TracGit)的步骤将您的 Git 存储库连接到 Trac 。

[](http://trac.edgewall.org/wiki/TracGit)
3.  [启用](http://trac.edgewall.org/wiki/TracGit)[Commit Ticket Updater](http://trac.edgewall.org/wiki/CommitTicketUpdater)插件，通过 Trac 的“Admin”部分或编辑`trac.ini`.

4.  在Git 存储库`post-receive`的目录中创建一个名为的文件，其内容如下：`hooks`

    ```
    #!/usr/bin/ruby

    ARGF.lines do |line|
      fields = line.split
      oldrev = fields[0]
      newrev = fields[1]
      refname = fields[2].chomp

      if oldrev =~ /^0+$/
        revspec = newrev
      else
        revspec = oldrev + '..' + newrev
      end

      other_branches = `git for-each-ref --format='%(refname)' refs/heads/ | grep -F -v "#{refname}"`
      other_branches = other_branches.chomp.gsub /[\r\n]+/, ' '

      commits = `git rev-parse --not #{other_branches} | git rev-list --stdin #{revspec}`

      commits.each_line do |commit|
        system "trac-admin .../trac changeset added '(default)' #{commit.chomp}"
      end
    end 
    ```

    当然，将“.../trac”替换为 Trac 安装的绝对路径。

    我实际上是通过[Virtualenv](http://www.virtualenv.org/en/latest/)使用 Trac 。如果您也是，请将其添加到文件顶部：

    ```
    require 'tempfile'

    def virtualenv_system(cmd)
      script = Tempfile.new('post_receive')
      script.write 'source .../virtualenvs/trac/bin/activate'
      script.write "\n"
      script.write cmd
      script.close
      system "bash #{script.path}"
      script.unlink
    end 
    ```

    并将`system`呼叫替换为`virtualenv_system`.

5.  使该`post-receive`文件可执行。

这是受到[存储库管理页面](http://trac.edgewall.org/wiki/TracRepositoryAdmin#ExplicitSync)上给出的方法的启发，并结合了这个关于在接收后脚本中获取所有新提交的[SO 答案。](https://stackoverflow.com/a/10425622/371228)我相信这个脚本虽然很长，但当您推送多个提交和/或将提交推送到当前签出的分支以外的分支时，它的行为是正确的。（Repository Administration 页面上给出的脚本在这些情况下的行为*不*正确——它只查看来自 HEAD 的最新提交消息。）

在此设置过程之后，任何包含“fixes #7”之类的字符串的 Git 提交都将关闭 Trac 中的相应票证。[您可以使用Commit Ticket Updater 页面](http://trac.edgewall.org/wiki/CommitTicketUpdater)上列出的选项进行一些配置。具体来说，您可能想要更改`commit_ticket_update_envelope`; 这并不完全清楚，但我*认为*默认设置是为了让您必须将命令包含在方括号中，例如“重构的 MyAwesomeClass [修复 #42]”。

# oop - 如何设计类层次结构

> ID：15864594
> 
> 赞同：0
> 
> 时间：2013-04-07T16:16:20.917
> 
> 标签：oop, class, class-hierarchy

我正在为 Java 项目设计一个类层次结构。它涉及创建一个类层次结构来表示多个银行帐户。现在，所有银行账户都有一些共同的属性。这些可以移动到抽象类。然而，有一个属性是几个银行账户共有的，但不是所有的。我应该如何在类层次结构中实现这个属性？我可能不应该在所有相关类中一遍又一遍地实现该属性，但我想不出另一种方法来做到这一点..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T17:05:49.230

让我尽可能地帮助你。

您可以有一个接口 IBankAccount，它定义了银行账户的常见行为。将只有方法定义。例如，银行帐户应该允许 credit()、debit()、getBalance() 等方法。它可以有一些对所有银行账户都不常见的附加方法。

接下来，您可以拥有一个抽象的 BaseBankAccount 类并实现这些常用方法。之所以如此，是因为 credit()、debit() 和 getBalance() 将在银行账户之间具有共同的行为。

然后你可以定义一个 BankDecorator 接口来定义 BankAccount 行为。特殊装饰器将实现此接口以向银行帐户添加额外功能。例如 CurrentBankAccountDecorator 将添加当前帐户功能等。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T16:21:37.897

您可以使用[mixins](https://en.wikipedia.org/wiki/Mixin)的编程概念。

另见：D. Ancona、G. Lagorio 和 E. Zucca。Jam - 使用 mixins 设计 Java 扩展。ACM 翻译。程序。朗。系统，25（5）：641-712，2003。

# ios - 以编程方式向“提醒”应用程序添加提醒

> ID：15864595
> 
> 赞同：7
> 
> 时间：2013-04-07T16:16:22.650
> 
> 标签：ios, eventkit, reminders

我正在创建一个简单的笔记应用程序，我想实现提醒。用户将输入一个注释，点击一个按钮，它会使用文本在提醒应用程序中设置一个提醒。这可能吗，如果可以，我该怎么做？我已经看过 Apple 关于 EventKit 和 EKReminders 的文档，但它根本没有帮助。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-07T20:08:50.090

来自[“日历和提醒编程指南”](http://developer.apple.com/library/ios/#documentation/DataManagement/Conceptual/EventKitProgGuide/Introduction/Introduction.html)？特别是[“阅读和写作提醒”](http://developer.apple.com/library/ios/#documentation/DataManagement/Conceptual/EventKitProgGuide/ReadingAndWritingReminders/ReadingAndWritingReminders.html#//apple_ref/doc/uid/TP40009765-CH5-SW1)

> `reminderWithEventStore:`您可以使用类方法创建提醒。`title`和`calendar`属性是必需的。提醒的日历是与其分组的列表。

在创建提醒之前，请求许可：

在`.h`：

```
@interface RemindMeViewController : UIViewController
{
    EKEventStore *store;
} 
```

和`.m`，当您需要访问提醒时：

```
store = [[EKEventStore alloc] init];
[store requestAccessToEntityType:EKEntityTypeReminder
                      completion:^(BOOL granted, NSError *error) {
                          // Handle not being granted permission
                      }]; 
```

实际添加提醒。这是异步发生的，因此如果您尝试在此之后立即添加提醒，它将失败（根据我的经验使应用程序崩溃）。

```
- (IBAction)addReminder:(id)sender
{
    EKReminder *reminder = [EKReminder reminderWithEventStore:store];
    [reminder setTitle:@"Buy Bread"];
    EKCalendar *defaultReminderList = [store defaultCalendarForNewReminders];

    [reminder setCalendar:defaultReminderList];

    NSError *error = nil;
    BOOL success = [store saveReminder:reminder
                                     commit:YES
                                      error:&error];
    if (!success) {
        NSLog(@"Error saving reminder: %@", [error localizedDescription]);
    }
} 
```

# android - FSK 解调码 (Android)

> ID：15864600
> 
> 赞同：3
> 
> 时间：2013-04-07T16:16:51.067
> 
> 标签：android

我打算执行 FSK 解调并遇到了 Androino 项目（[https://code.google.com/p/androino/source/browse/wiki/AndroinoTerminal.wiki](https://code.google.com/p/androino/source/browse/wiki/AndroinoTerminal.wiki)），它将 Adruino 中的数据读入手机的音频杰克，这真是太酷了。

我正在尝试浏览代码，但我无法理解一些 impt 值。:((

为什么位高 = 22 个峰值，位低 = 6 个峰值，私有静态 int HIGH_BIT_N_PEAKS = 12 和私有静态 int LOW_BIT_N_PEAKS = 7？为什么每个编码位有 136 个样本？

我是否也正确地说 Adruino 的 FSK 速率设置为 315Hz？

我也附上了硬件（softTerm）代码：[https://code.google.com/p/androino/source/browse/trunk/arduino/SoftTerm/SoftModem/SoftModem.h](https://code.google.com/p/androino/source/browse/trunk/arduino/SoftTerm/SoftModem/SoftModem.h)并且 cpp 文件也在那里. 邓恩有足够的声望点来发布这两个链接。

```
 /** Copyright (C) 2011 Androino authors                       
    Licensed under the Apache License, Version 2.0 (the "License");               
    * you may not use this file except in compliance with the License.              
    * You may obtain a copy of the License at               
    *               
    *      http://www.apache.org/licenses/LICENSE-2.0               
    *               
    * Unless required by applicable law or agreed to in writing, software           
    * distributed under the License is distributed on an "AS IS" BASIS,             
    * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.              
    * See the License for the specific language governing permissions and           
    * limitations under the License.                
    */
     package org.androino.ttt;

     import android.util.Log;

     public class FSKModule {
    // Experimental results
    // Arduino sends "a" character (97) 1100001 
    // The generated message is 0110.0001
    // 136 samples per encoded bit
    // total message = 166 bits: 155(high)+1(low)+8bit+stop(high)+end(high)

    private static int SAMPLING_FREQUENCY = 44100; //Hz
    private static double SAMPLING_TIME = 1.0/SAMPLING_FREQUENCY; //ms

    // reading zero+155(high)+1(low)+8bit+stop+end+zero
    private static int FREQUENCY_HIGH = 3150;
    private static int FREQUENCY_LOW = 1575;

    //high: 7 samples/peak
    //low : 14 samples/peak
    // 1492 samples/message low+8bits+stop+end 
    // 136 samples/bit  (=1492/11)
    private static int SAMPLES_PER_BIT = 136;

    private static int ENCODING_SAMPLES_PER_BIT = SAMPLES_PER_BIT/2; // 68

    // bit-high = 22 peaks
    // bit-low = 6 peaks
    private static int HIGH_BIT_N_PEAKS = 12;
    private static int LOW_BIT_N_PEAKS = 7;

    private static int SLOTS_PER_BIT = 4; // 4 parts: determines the size of the part analyzed to count peaks
    private static int N_POINTS = SAMPLES_PER_BIT/SLOTS_PER_BIT;  // 34=136/4

    private static double PEAK_AMPLITUDE_TRESHOLD = 60; // significant sample (not noise)
    private static int NUMBER_SAMPLES_PEAK = 4;                     // minimum number of significant samples to be considered a peak

    private static int MINUMUM_NPEAKS = 100; // if lower it means that there is no signal/message

    private static final int BIT_HIGH_SYMBOL=2;
    private static final int BIT_LOW_SYMBOL=1;
    private static final int BIT_NONE_SYMBOL=0;

    private static final int CARRIER_MIN_HIGH_BITS=12;

    private static final int SOUND_AMPLITUDE = 31000;

    private static final String TAG = "FSKModule";

    private FSKModule(){
    }

    private static void debugInfo(String message){
            //System.out.println(">>" + message);
            Log.w(TAG, "FSKDEC:"+ message);
    }

       //-----------------------------------------
       // DECODING FUNCTIONS
       //-----------------------------------------     

    public static boolean signalAvailable(double[] sound){
            FSKModule m = new FSKModule();

            int nPoints = N_POINTS;
            int nParts = sound.length / nPoints;
            int nPeaks = 0;  
            int startIndex = 0;
            int i = 0;
            do {
                    int endIndex = startIndex + nPoints;
                    int n = m.countPeaks(sound, startIndex, endIndex);
                    nPeaks += n;
                    i++;
                    startIndex = endIndex;
                    if (nPeaks > MINUMUM_NPEAKS) return true;
            } while (i<nParts);
            if (nPeaks >3)
                    debugInfo("signalAvailable() nPeaks=" + nPeaks);
            return false;
    }

    public static int decodeSound(double[] sound){
            FSKModule m = new FSKModule();
            // processing sound in parts and
            //Log.w(TAG, "ENTRO EN processSound");
            int[] nPeaks = m.processSound(sound);
            if (nPeaks.length == 0) // exit: no signal detected 
                    return -1;

            //debugInfo("decodeSound nPeaks=" + nPeaks.length);
            // transform number of peaks into bits 
            //Log.w(TAG, "ENTRO EN parseBits");
            int[] bits = m.parseBits(nPeaks);//-------------------------> OK!!
            //debugInfo("decodeSound nBits=" + bits.length);
            // extract message from the bit array
            int message = m.decodeUniqueMessage(bits, sound, nPeaks);
            debugInfo("decodeSound(): message="+message + ":" + Integer.toBinaryString(message));
            return message;
    }

    private int decodeUniqueMessageCorrected(int[] nPeaks, int startBit){
            int message = 0;

            // process nPeaks starting from the end  
            int index = (startBit+12)*SLOTS_PER_BIT;

            // find zero -> non zero transition
            for (int i = 0; i < index; i++) {
                    int i2 = nPeaks[index-i];
                    int i1 = nPeaks[index-i-1];
                    debugInfo("zero->nonzero index=" + (index-i) + ": i2=" + i2 + ":i1=" + i1);
                    if ( (i1-i2)>2) {
                            index = index-i-1;
                            break;
                    }
            }
            debugInfo("zero->nonzero index=" + index);
            int[] bits = new int[2+8+1+2];
            for (int i = 0; i < bits.length; i++) {
                    int peakCounter = 0;
                    for (int j = 0; j < 4; j++) {
                            peakCounter += nPeaks[index-j]; 
                    }
                    debugInfo("decode corrected: peakCounter="+i + ":" + peakCounter);
                    if (peakCounter > 7)  { //LOW_BIT_N_PEAKS)
                            bits[i] = BIT_LOW_SYMBOL;
                    }
                    if (peakCounter > 12)  { //LOW_BIT_N_PEAKS)
                            bits[i] = BIT_HIGH_SYMBOL;
                            message += Math.pow(2, i);
                    }
                    debugInfo("bit=" + bits[i] + ":" + message);
                    index = index -4;
            }
            debugInfo("decode corrected: message="+message + ":" + Integer.toBinaryString(message));
            message = 0;
            for (int i = 2; i < 10; i++) {
                    if ( bits[i] == BIT_HIGH_SYMBOL) {
                            message+= Math.pow(2, 7-(i-2));
                    }
            }
            return message;
    }

    private int decodeUniqueMessage(int[] bits, double[] sound, int[] nPeaks){
            // start bit
            int index = findStartBit(bits, 0);
            debugInfo("decodeUniqueMessage():start bit=" + index);
            if (index == -1) return -1; // no start-bit detected
            if (index + 8 + 2 > bits.length)
                    throw new AndroinoException("Message cutted, start bit at " + index, AndroinoException.TYPE_FSK_DECODING_ERROR);

            // debugging information
            int number = 16; // n bits to debug
            for (int i = index-5; i < index-5+number; i++) {
                    debugInfo("decodeUniqueMessage(): bits=" + i +":" + bits[i] );
            }
            for (int i = 0; i < number*SLOTS_PER_BIT; i++) {
                    int position = i + (index-5)*SLOTS_PER_BIT ;
                    debugInfo("decodeUniqueMessage(): npeaks=" + position+ ":" + nPeaks[position] );
            }

            // 8bits message
            int value = 0;
            for (int i = 0; i < 8; i++) {
                    int bit = bits[index+i];
                    if (bit==BIT_HIGH_SYMBOL) value+=Math.pow(2, i);
            }
            // stop bit: do nothing
            // end bit: do nothing
            debugInfo("MESSAGE          =" + Integer.toBinaryString(value) + ":" + value);

    */
            int correctedMessage = decodeUniqueMessageCorrected(nPeaks,index);
            debugInfo("MESSAGE corrected=" + Integer.toBinaryString(correctedMessage) + ":" + correctedMessage);
            return correctedMessage;

    }

    private int findStartBit(int[] bits, int startIndex){
            // find carrier and start bit
            int index = startIndex;
            int highCounter = 0;            
            boolean startBitDetected = false;
            do {
                    int bit = bits[index];
                    switch (bit) {
                    case BIT_HIGH_SYMBOL:
                            highCounter++; // carrier high bit

                            break;
                    case BIT_LOW_SYMBOL:
                            if (highCounter>CARRIER_MIN_HIGH_BITS) { // start-bit detected
                                    startBitDetected = true;
                            }
                            else highCounter = 0; // reset carrier counter
                            break;
                    case BIT_NONE_SYMBOL:
                            highCounter = 0;// reset carrier counter
                            break;
                    }
                    index++;
                    if (index>=bits.length) return -1; 
            } while (!startBitDetected);
            return index;
    }

    private int[] parseBits(int[] peaks){
            // from the number of peaks array decode into an array of bits (2=bit-1, 1=bit-0, 0=no bit)
            // 
            int i =0;
            int lowCounter = 0;
            int highCounter = 0;
            int nBits = peaks.length /SLOTS_PER_BIT;
            int[] bits = new int[nBits];
            //i = findNextZero(peaks,i); // do not search for silence
            i = findNextNonZero(peaks,i);
            int nonZeroIndex = i;
            if (i+ SLOTS_PER_BIT >= peaks.length) //non-zero not found
                    return bits;
            do {
                    //int nPeaks = peaks[i]+peaks[i+1]+peaks[i+2]+peaks[i+3];
                    int nPeaks = 0;
                    for (int j = 0; j < SLOTS_PER_BIT; j++) {
                            nPeaks+= peaks[i+j];
                    }
                    int position = i/SLOTS_PER_BIT;
                    bits[position] = BIT_NONE_SYMBOL;

                    debugInfo("npeaks:i=" + i + ":pos=" + position+ ": nPeaks=" + nPeaks);
                    if (nPeaks>= LOW_BIT_N_PEAKS) {
                            //Log.w(TAG, "parseBits NPEAK=" + nPeaks);
                            bits[position] = BIT_LOW_SYMBOL;
                            lowCounter++;
                    }
                    if (nPeaks>=HIGH_BIT_N_PEAKS ) {
                            bits[position] = BIT_HIGH_SYMBOL;
                            highCounter++;
                    }

                    //if (nPeaks>5) bits[position] = 1;
                    //if (nPeaks>12) bits[position] = 2;
                    i=i+SLOTS_PER_BIT;

            } while (SLOTS_PER_BIT+i<peaks.length);
            lowCounter = lowCounter - highCounter;
            debugInfo("parseBits nonZeroIndex=" + nonZeroIndex);
            debugInfo("parseBits lows=" + lowCounter);
            debugInfo("parseBits highs=" + highCounter);
            return bits;
    }

    private int findNextNonZero(int[] peaks, int startIndex){
            // returns the position of the next value != 0 starting form startIndex
            int index = startIndex;
            int value = 1;
            do {
                    value = peaks[index];
                    index++;
            } while (value==0 && index<peaks.length-1);
            return index-1;
    }

    private int[] processSound(double[] sound){
            // split the sound array into slots of N_POINTS and calculate the number of peaks

            int nPoints = N_POINTS;
            int nParts = sound.length / nPoints;
            int[] nPeaks = new int[nParts]; 
            int startIndex = 0;
            int i = 0;
            int peakCounter = 0;
            do {
                    int endIndex = startIndex + nPoints;
                    int n = this.countPeaks(sound, startIndex, endIndex);
                    nPeaks[i] = n;
                    peakCounter += n;
                    i++;
                    startIndex = endIndex;
            } while (i<nParts);
            //} while (startIndex+nPoints<sound.length);
            debugInfo("processSound() peaksCounter=" + peakCounter);
            if (peakCounter < MINUMUM_NPEAKS) {
                    nPeaks = new int[0];
            }
            return nPeaks;
    }

    private int countPeaks(double[] sound, int startIndex, int endIndex){
            // count the number of peaks in the selected interval
            // peak identification criteria: sign changed and several significant samples (>PEAK_AMPLITUDE_TRESHOLD) 

            int index = startIndex;
            int signChangeCounter = 0;
            int numberSamplesGreaterThresdhold = 0;
            int sign = 0; // initialized at the first significant value
            do {
                    double value = sound[index];
                    if (Math.abs(value)>PEAK_AMPLITUDE_TRESHOLD) 
                            numberSamplesGreaterThresdhold++; //significant value
                    // sign initialization: take the sign of the first significant value
                    if (sign==0 & numberSamplesGreaterThresdhold>0) sign = (int) (value / Math.abs(value));
                    boolean signChanged = false;
                    if (sign <0 & value >0) signChanged = true;
                    if (sign >0 & value <0) signChanged = true;

                    if (signChanged & numberSamplesGreaterThresdhold>NUMBER_SAMPLES_PEAK){
                            signChangeCounter++; // count peak
                            sign=-1*sign; //change sign
                    }
                    index++;
                    //debugInfo(">>>>>>>index=" + index + " sign=" + sign + " signChangeCounter=" + signChangeCounter + " value=" + value + " numberSamplesGreaterThresdhold=" + numberSamplesGreaterThresdhold);
            } while (index<endIndex);
            return signChangeCounter;
    } 
```

}

# mercurial - MercurialEclipse 插件安装后 Mercurial 未检测到更改

> ID：15864605
> 
> 赞同：0
> 
> 时间：2013-04-07T16:17:26.257
> 
> 标签：mercurial, mercurialeclipse

在安装[MercurialEclipse](http://javaforge.com/project/HGE) Eclipse 插件后，`hg`.

当我跑

```
hg status 
```

在工作目录中，它什么也不返回。

有什么过错？

# javascript - 表单和 getElementById

> ID：15864606
> 
> 赞同：3
> 
> 时间：2013-04-07T16:17:32.263
> 
> 标签：javascript, forms

我在表单中使用 getElementById 时遇到问题。我尝试了几种方法都没有运气。我基本上需要表单来验证名字和姓氏字段是否都已填写，并显示一个显示名称的弹出框。

下面是我尝试过的代码。我在我的 javascript 中尝试了 2 种不同的方法，但我不确定我错过了什么。

```
<form name="form" id="form" method="post" action="">  

    <p class="FirstName">  
        <label for="FirstName">First Name:</label>
    </p>
    <p>
        <input name="FirstName" type="text" id="FirstName" />  
    </p>  

    <p class="LastName">  
        <label for="LastName">Last Name:</label></p>
        <p>
        <input name="LastName" type="text" id="LastName" />  
    </p>

    <p class="submit">  
        <input name="getName" type="button" id="getName" value="Get Name" onClick=”getName();" />  
    </p>  
</form> 
```

```
var getName = function () {
    if (document.getElementById("FirstName").value == "" || document.getElementById("LastName").value == "") {
        return ("Please enter a first name and a last name.");
    } else {
        var FullName = document.getElementById("FirstName").value + ' ' + document.getElementById("LastName").value;
        return FullName;
    }
} 
```

```
function getName() {
    var FullName = document.getElementById('FirstName');
    document.getElementById('LastName');
    if (FullName.value != "") 
        alert(FullName.value)
    else 
        alert("Please enter first and last name")
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-07T16:28:09.337

您尝试的第一种方法是正确的。

问题是，您没有将`onclick`事件绑定到函数。

您在标签中声明`getName`函数，在`head`标签之前解释`body`。

`getName`但是你在声明按钮时覆盖`input`它`id`并`name`设置为`getName`.

例如，您可以将其 id 和名称更改`submitButton`为。您还可以将函数声明移动到`body`标记的末尾，或将其包装在`onLoad`方法中。

我将呼叫包装`getName`在警报中以查看结果（`alert(getName())`）

查看 jsFiddle：http: [//jsfiddle.net/zpNSv/1/](http://jsfiddle.net/zpNSv/1/)

```
<form name="form" id="form" method="post" action="">  
    <p class="FirstName">  
        <label for="FirstName">First Name:</label>
    </p>
    <p>
        <input name="FirstName" type="text" id="FirstName" />  
    </p>  
    <p class="LastName">  
        <label for="LastName">Last Name:</label>
    </p>
    <p>
        <input name="LastName" type="text" id="LastName" />  
    </p>
    <p class="submit">  
        <input name="submitButton" type="button" id="submitButton" value="Get Name" onClick="alert(getName())" />
    </p>  
 </form> 
```

和 JS

```
function getName() {
    var FirstName = document.getElementById("FirstName"),
        LastName = document.getElementById("FirstName");
    if (FirstName.value == "" ||   document.getElementById("LastName").value == "")
    {
        return ("Please enter a first name and a last name.");
    }
    else
    {
        var FullName = FirstName.value + ' ' + LastName.value;
        return FullName;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T16:23:22.203

仔细看看这一行，你对最后一条语句没有做任何事情

```
var FullName = document.getElementById('FirstName');  document.getElementById('LastName'); 
```

你有 2 个 getName。只有一个人能活。

```
function getName(){
 var firstName = document.getElementById("firstName").value;
 var lastName= document.getElementById("lastName").value;

  if(firstName === "" || lastName === ""){
    alert("You need to fullfield both First Name and Last Name");
  }
}else{alert("This work.");} 
```

# java - 从 ArrayList 中删除“节点”

> ID：15864610
> 
> 赞同：0
> 
> 时间：2013-04-07T16:17:43.273
> 
> 标签：java, arraylist

我有这两种方法来寻找客户。如何从列表中删除我刚刚找到的客户？我正在使用 arrayList 继承我的两种方法：

```
public User findById(int id) 
{
    for (User u : list) 
    {
        if (u.getCustomerID() == id) 
        {
            return u;
        }
    }
    return null; // or empty User
} 
```

和

```
public void findByID()
{
    int customer = Integer.parseInt(findCustomerField.getText());

    if(customer != 0)
    {
        User user = list.findById(customer);
        outputText.setText(user.toString());
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T16:21:36.413

> 如何从列表中删除我刚刚找到的客户？

就像调用`remove`方法一样简单：

```
list.remove(user); 
```

但是，这将需要再次通过列表才能找到条目。

如果你想要一个按 ID 删除的方法，你可以用迭代器来做到这一点：

```
public bool removeById(int userId) {
    for (Iterator<User> iterator = list.iterator(); iterator.hasNext(); ) {
        if (iterator.next().getCustomerID() == id) {
            iterator.remove();
            return true; // Found and removed
        } 
    }
    return false; // Not found
} 
```

# java - 简单的Java程序

> ID：15864611
> 
> 赞同：0
> 
> 时间：2013-04-07T16:17:47.613
> 
> 标签：java, runtime-error

我正在开发一个程序，但遇到了运行时问题。该程序有效，但是，在我选择电影并对其进行评分后，它应该只给出平均评分并返回开始并让用户选择另一部电影。相反，它转到默认值（else 语句）。之后，它让用户选择另一部电影。我已经尝试多次重写它，但它仍然显示这个问题，我做错了什么？我该如何解决？

```
import java.text.DecimalFormat;
import java.util.Scanner;

public class movie {
    Scanner s1=new Scanner(System.in);
    private String movielist, movie;
    private double userR;
    public String pg="rated PG-13", r="rated R";
    public String rate="Rate this movie 1-5, 1 being terrible and 5 great";
    public String crm1="Score       1   2   3   4   5\n# of Raters 1   3   1   3   12",crm2="Score       1   2   3   4   5\n# of Raters 4   2   4   6   4", crm3="Score       1   2   3   4   5\n# of Raters 3   0   5   5   7";
    DecimalFormat userR1=new DecimalFormat("#.#");

    public String m1(){
        System.out.println("\nChoose one of the following movies\nJurassic Park, Identity Theft, The Dark Night");
        movielist=s1.nextLine();
        if(movielist.equalsIgnoreCase("Jurassic Park"))
        {
            System.out.println("Jurassic Park is "+pg+"\nCritics rated this movie: \n"+crm1+"\n"+rate);
            userR=s1.nextDouble();System.out.println("With your rating, the average rating for this movie is: "+(userR1.format((82+userR)/21)));
        }
        else if(movielist.equalsIgnoreCase("Identity Theft"))
        {
            System.out.printf("Identity Theft is "+r+"\nCritics rated this movie: \n"+crm2+"\n"+rate);
            userR=s1.nextDouble();
            System.out.println("With your rating, the average rating for this movie is: "+(userR1.format((68+userR)/21)));
        }
        else if(movielist.equalsIgnoreCase("The Dark Night"))
        {
            System.out.printf("The Dark Night is "+pg+"\nCritics rated this movie: \n"+crm3+"\n"+rate);
            userR=s1.nextDouble();
            System.out.println("With your rating, the average rating for this movie is: "+(userR1.format((73+userR)/21)));
        }
        else 
        {
            System.out.println("No movie with that name found, make sure your spelling is correct.");
        }
        return m1();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T16:29:06.963

问题是，它`nextDouble()`会读取一个数字，而不是后面的换行符。`nextLine()`例如，在您阅读评分后添加呼叫或`nextDouble()`替换`Double.parseDouble(s1.nextLine())`为 。

另一方面，除了源代码中不存在的格式之外，它还有其他一些问题，最重要的是，您的程序永远不会终止，直到由于堆栈空间不足而最终崩溃。如果这是一项学校作业，您可能也应该尝试解决它。

# ruby-on-rails - Rails 输入嵌套内容

> ID：15864612
> 
> 赞同：1
> 
> 时间：2013-04-07T16:17:47.770
> 
> 标签：ruby-on-rails, ruby-on-rails-3, haml

我有一个 submit_tag 或输入按钮，但是你想调用它，但我无法让 Text + Font-Awesome 图标一起工作。

我试过这样

```
%input{type: "submit", name: "A", "data-theme" => "b"}
  %i.icon-time
  = "Finish" 
```

但是图标和文本在输入标签之外（...）

我试着用

```
= content_tag :input, type: "submit", name: "A", "data-theme" => "b" do
   %i.icon-time
   = "Finish" 
```

但同样的问题，%i 被留在了外面。

使用 button_tag 看起来不错，但内容没有提交给控制器。（可能是因为 html 标签是按钮而不是输入）

我怎样才能得到这个工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T17:48:23.080

检查您的控制台是否有任何错误。我觉得你可能只是有一个CSS问题。如果按钮标签适合您，您可以轻松添加 jquery 修复程序。

```
$('button').click(function() {
    $('form').submit();
}); 
```

据我所知，这是在表单提交中嵌套内容的唯一解决方法。

PS你不必写`= "Finish"`，你可以写`Finish!`，HAML会以纯文本的方式插入它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-13T09:46:43.790

在 application.html.haml 我有以下

```
= javascript_include_tag "application"
= javascript_include_tag "disable_ajax" 
```

在 application.js

```
//= require jquery.mobile-1.3.0 
```

在 disable_ajax.js

```
$( document ).bind( 'mobileinit', function(){
  $.mobile.ajaxEnabled = false; // Here is where I fix the problem
}); 
```

关键是首先包含jquery mobile

# c# - 如何在 Bing 地图控件中显示卫星图像？

> ID：15864614
> 
> 赞同：1
> 
> 时间：2013-04-07T16:17:49.773
> 
> 标签：c#, windows-phone-7, map

我想将 Microsoft.Phone.Controls.Maps.Map 从默认道路和标签模式设置为卫星模式。这将如何实现？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T16:54:34.080

在 Windows Phone 7 应用程序中，您可以将`Mode`属性设置为`Aerial`或`AerialWithLabels`获取卫星视图。

在 Windows Phone 8 应用程序中，您拥有该`CartographicMode`属性（[MSDN 上](http://msdn.microsoft.com/en-us/library/windowsphone/develop/microsoft.phone.maps.controls.map%28v=vs.105%29.aspx)的详细信息）。您可以将其设置为`MapCartographicMode`枚举值之一（[MSDN 上](http://msdn.microsoft.com/en-us/library/windowsphone/develop/microsoft.phone.maps.controls.mapcartographicmode%28v=vs.105%29.aspx)的详细信息） ，可以是：`Road`、、或。`Aerial``Hybrid``Terrain`

# jquery - 无法循环通过骨干集合

> ID：15864615
> 
> 赞同：0
> 
> 时间：2013-04-07T16:17:56.087
> 
> 标签：jquery, backbone.js, layout-manager

我正在使用带骨干的布局管理器，但无法从集合中获取模型。下面是代码。即使元素存在，我也无法从 this.collection.models 中获取元素，它的显示为空。

集合快照 ![在此处输入图像描述](https://i.stack.imgur.com/g49AL.png)

```
//Models
App.Models.StoreModel = Backbone.Model.extend({});

//Featured Products Collections
App.Collections.StoreFeaturedProducts = Backbone.Collection.extend({  

    model : App.Models.StoreModel,
    url:"../JSON/products.json",
    parse : function(response){
        return response.products;  
    }

});

//In Router 
this.featureList = new App.Collections.StoreFeaturedProducts();     /* initialize featureList */
this.featureView = new App.Views.DisplayView2({collection : this.featureList}); /* create featureSlider View object */
App.Layouts.AppLayout.insertViews({     /* insert view to layout */
            "wrapper2" : this.featureView
});

this.featureList.fetch();   /* fetch json */

//Render Layout
App.Layouts.AppLayout.render();

//View![enter image description here][2]
App.Views.DisplayView2 = Backbone.View.extend({

    template : '#view1',

    initialize : function(options) {
        this.collection.bind('reset', this.render, this);
        //this.model.bind('reset', this.render, this);
    },

    beforeRender : function() {
            console.log(this.collection) - shows the elements
        this.collection.each(function(m) {
        //does not go through
    }, this);
    }

    serialize : function() {}

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T17:59:27.427

如果你真的看到你写的那一行的元素：

```
console.log(this.collection) - shows the elements 
```

应该通过集合的`models`属性访问该特定数组：

```
_.each(this.collection.models, function(m) {
    // ...
}); 
```

希望这可以帮助。

# html - CSS中的悬停图像不起作用

> ID：15864617
> 
> 赞同：0
> 
> 时间：2013-04-07T16:17:59.280
> 
> 标签：html, css

在导航栏上的[http://www.elitedeafpoker.com/dev/index.html](http://www.elitedeafpoker.com/dev/index.html)上，当我将鼠标悬停在（类）子菜单区域时，“PLAYERS”下方有一个灰色的小指示器图标，它不会显示白色指示器图标. [http://www.elitedeafpoker.com/dev/img/indicator-hover.png](http://www.elitedeafpoker.com/dev/img/indicator-hover.png)是一张图片，在一张图片中显示了两个图标（您看不到那里的白色图标）。

CSS

```
.nav-collapse_ .nav > li.sub-menu:after {
  position: absolute;
  top: 100px;
  left: 50%;
  display: block;
  margin-left: -4px;
  width: 8px;
  height: 3px;
  background: url(../img/indicator-hover.png) 0 0;
  content: '';
}
.nav-collapse_ .nav > li.sub-menu:hover {
  background: url(../img/indicator-hover.png) 0 -10px;
  } 
```

HTML

```
<div class="nav-collapse nav-collapse_ collapse">
    <ul class="nav sf-menu clearfix">
        <li class="sub-menu"><a href="poker-players.html">PLAYERS</a>
            <ul>
                <li><a href="poker-players.html">EDPS PLAYERS</a></li>
                <li><a href="poker-players.html#">PLAYERS OF THE MONTH</a></li>
                <li><a href="poker-players.html#">PLAYERS OF THE YEAR</a></li>
            </ul>
    </li>
        <li><a href="shop.html">SHOP</a></li>
        <li><a href="news-events.html">NEWS &amp; EVENTS</a></li>
    <li><a href="founders.html">FOUNDERS</a></li>
    <li><a href="contactus.html">CONTACT US</a></li>
    </ul>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T16:23:30.993

我相信你的

```
.nav-collapse_ .nav > li.sub-menu:hover 
```

应改为

```
.nav-collapse_ .nav > li.sub-menu:hover:after 
```

解决这个问题

# php - 将 txt 文件从 Dropbox 包含到 html 文件中

> ID：15864618
> 
> 赞同：1
> 
> 时间：2013-04-07T16:18:07.783
> 
> 标签：php, input, dropbox

`txt`我的Dropbox 帐户上有一个文件。

我的网页托管在服务器上，我无法从家里上传文件。

但是我想在我的网页上插入一些信息，所以我决定把这些笔记写在一个`txt`文件上，然后上传到我的 Dropbox。

现在，问题是：

*   如何将`txt`文件内容插入到我的`html`文件中，以便当我`txt`仅使用 Dropbox 更新文件时，网页也会更新？**

我有文件`index.html`，我试图在上面插入标签

```
<?php file_get_contents("<address to my Dropbox file>"); ?> 
```

我在这里的其他帖子上找到的。但什么也没有发生。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T16:24:50.200

您需要共享文件并获取它的公共 URL，然后在`get`使用 jquery 的调用中使用此 url。看看[Jquery.get](http://api.jquery.com/jQuery.get/)文档中的这个例子：

```
<div id="result"></div>
...

$.get('https://dl.dropbox.com/u/8032011/share/greetings.txt', function(data) {
  $('#result').html(data);
  alert('Load was performed.');
}); 
```

此链接解释了在 dropbox 上使用公用文件夹：[https ://www.dropbox.com/help/16/en](https://www.dropbox.com/help/16/en)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T16:41:08.883

您不能在 HTML 文件中运行 PHP 脚本，如果您的服务器支持 PHP，则将文件的扩展名更改为“.php”，该代码将起作用。
否则（如果您绝对不能使用 PHP），您仍然可以使用嵌入的 javascript/jquery 代码来完成这项工作，该代码会将保管箱文件加载到您的 HTML 页面。

# php - Smarty 不显示模板

> ID：15864638
> 
> 赞同：0
> 
> 时间：2013-04-07T16:19:40.617
> 
> 标签：php, jquery, html, smarty

我正在尝试为我的网站构建一个菜单并使用 Smarty 来显示页面。当用户单击 Logout 选项时，JQuery 会向 index.php 脚本发送 Ajax 调用，其中包含 Smarty 显示页面但不显示页面的代码。在我添加菜单之前它工作正常。萤火虫也没有错误。有人可以让我朝着正确的方向前进。

这是PHP代码

```
 if (isset($_POST['menu_index']))
    {
        if ($_POST['menu_index'] == 'Logout')
        {
            $smarty->display("login.tpl");  
            exit;            
        }
    } 
```

这是JQuery代码

```
 $('ul li a').on('click', function() {
            var menuItemIndex = $(this).data('val');
            console.log(menuItemIndex);
            $.ajax({
                url: 'index.php', 
                type: 'POST', 
                data: {
                'menu_index': menuItemIndex
                }, 
                dataType: 'json',
                success: function(response) {
                    alert('success');
                },
                error: function(errorMsg) {
                    alert('failed');
                }
                });
            }); 
```

这是HTML代码

```
<form name="mainmenu" id="mainmenu">
    <div id='content'>
       <div id='jqxMenu'>
            <ul>
                <li>Maintanence
                    <ul style='width: 180px;'>
                        <li><a href="#" data-val="addCategory">Add Category</a></li>
                        <li><a href="#" data-val="addSubCategory">Add Sub-category</a></li>
                    </ul>
                </li>
                <li>Process Order
                    <ul style='width: 180px;'>
                        <li><a href="#" data-val="addShipOrder">Ship Order</a></li>
                        <li><a href="#" data-val="addChangeOrder">Change Order Status</a></li>
                    </ul>
                </li>
                <li>Reports
                    <ul style='width: 180x;'>
                        <li><a href="#" data-val="addOrderStation">Orders by station</a></li>
                        <li><a href="#" data-val="addOrderDate">Orders by date</a></li>
                        <li><a href="#" data-val="addPendingOrder">Pending Orders</a></li>
                    </ul>
                </li>
                <li><a href="#" data-val="Logout">Logout</a></li>
            </ul>
        </div>
   </div>
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T08:15:47.680

嗨，我认为您不了解**Smarty**的工作原理，但我可以告诉您，您在 html 代码中没有任何模板，这对于此类编程**非常重要。**

您需要为菜单制作模板并将其命名为 menu.tpl -> 然后将其包含在 index.tpl ...

欲了解更多信息，请查看 www.smarty.net

# java - 在我的 pojo 字段中使用“public”修饰符而不是“private”是否有任何风险？

> ID：15864639
> 
> 赞同：1
> 
> 时间：2013-04-07T16:19:42.580
> 
> 标签：java, coding-style, pojo

在我的所有`JSF`项目中，我使用`Pojo`
As a的标准定义`Plain Old Java Object`来定义`private`字段的修饰符

例如

```
public class Pojo {

    // My private fields
    private String field1;
    private String field2;

    // setters AND getters
    // ----------------------------
    public String getField1() {
        return field1;
    }
    public void setField1(String field1) {
        this.field1 = field1;
    }
    public String getField2() {
        return field2;
    }
    public void setField2(String field2) {
        this.field2 = field2;
    }
    // ---------------------------- 
} 
```

`public`使用修饰符而不是`private`我的`Pojo`字段是否有任何风险
例如

```
public class Pojo {

    // My private fields
    public String field1;
    public String field2;

    // setters AND getters
    // ----------------------------
    public String getField1() {
        return field1;
    }
    public void setField1(String field1) {
        this.field1 = field1;
    }
    public String getField2() {
        return field2;
    }
    public void setField2(String field2) {
        this.field2 = field2;
    }
    // ---------------------------- 
} 
```

注意
我真的需要这样做（更改修饰符）不仅仅是为了实验

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-07T16:25:01.053

“风险”是您基本上不再可以控制这些值。您永远不能强制执行任何类型的验证，因为任何代码都可以随时更改值。

此外，您永远无法更改数据存储方式的*实现细节*，因为您将其公开。仅使用 getter 和 setter，您就将 API（类可以做什么）与实现细节分开。

现在您*可能会*认为这一切都很好（尽管我不会）。如果您*确实*采用公共字段路线，我建议您删除 getter/setter 方法 - 否则看到这些方法的任何人可能*看起来*像您有一个“适当的”类，而实际上您只有一个数据桶。

# python - python difflib比较文件

> ID：15864641
> 
> 赞同：22
> 
> 时间：2013-04-07T16:19:46.903
> 
> 标签：python, text, difflib

我正在尝试使用 difflib 为包含推文的两个文本文件生成差异。这是代码：

```
#!/usr/bin/env python

# difflib_test

import difflib

file1 = open('/home/saad/Code/test/new_tweets', 'r')
file2 = open('/home/saad/PTITVProgs', 'r')

diff = difflib.context_diff(file1.readlines(), file2.readlines())
delta = ''.join(diff)
print delta 
```

这是`PTITVProgs`文本文件：

```
Watch PTI on April 6th (7) Dr Israr Shah at 10PM on Business Plus in "Talking Policy". Rgds #PTI
CORRECTION!! Watch PTI on April 6th (5) @Asad_Umar  at 8PM on ARY News. Rgds #PTI
Watch PTI on April 6th (5) @Asad_Umar  at 8PM on AAJ News (6) PTI vs PMLN at 8PM on NewsOne. Rgds #PTI
Watch PTI on April 6th (5) Asad Umar at 8PM on AAJ News (6) PTI vs PMLN at 8PM on NewsOne. Rgds #PTI
Watch PTI on April 6th (5) Waleed Iqbal at 8PM on Channel 5\. Rgds #PTI
Watch PTI on April 6th (3) Dr Israr Shah at 10PM on PTV News. Rgds #PTI
Watch PTI on April 6th (4) Javed hashmi at 1PM on PTV News. Rgds #PTI
Watch PTI on April 6th (3) Imran Alvi at 1PM on AAJ News. Rgds #PTI
Watch PTI on April 6th (1) Dr @ArifAlvi, Andleeb Abbas and Ehtisham Ameer at 11PM on ARY News (2) Hamid Khan at 10PM on ATV. Rgds #PTI
Watch PTI on April 5th (1) Farooq Amjad Meer at 10:45PM on Dunya News. Rgds #PTI
Watch PTI on April 4th (4) Faisal Khan at 8PM on PTV News. Rgds #PTI
@FaisalJavedKhan
Watch PTI on April 4th (3) Faisal Khan at 11PM on ATV. Rgds #PTI
@FaisalJavedKhan
Watch PTI on April 4th (1) Dr Israr Shah at 8PM on Waqt News (2) Dr Arif Alvi at 9PM on PTV World. Rgds #PTI
@ArifAlvi
Watch PTI on April 3rd (12) Abrar ul Haq on 10PM on Dawn News (13) Shabbir Sial at 10PM on Channel5\. Rgds #PTI
Watch PTI on April 3rd (11) Sadaqat Abbasi on 8PM on RohiTV. Rgds #PTI
Watch PTI on April 3rd (10) Dr Zarqa and Andleeb Abbas on 8PM on Waqt News. Rgds #PTI
Watch PTI on April 3rd (9) Fauzia Kasuri at 8PM on Din News. Rgds #PTI
Watch PTI on April 3rd (8) Mehmood Rasheed at 8PM on ARY News. Rgds #PTI
Watch PTI on April 3rd (7) Israr Abbasi (Repeat on Arp 4th) at 1:20AM and 1PM on Vibe TV. Rgds #PTI
Watch PTI on April 3rd (5) Rao Fahad at 9PM on Express News (6) Dr Seems Zia at 10:30PM on Health TV. Rgds #PTI 
```

这是`new_tweets`文本文件：

```
Watch PTI on April 7th (3) Malaika Reza at 8PM on AAJ News (4) Shah Mehmood Qureshi at 8PM on Geo News. Rgds #PTI
Watch PTI on April 7th (2) Chairman IMRAN KHAN at 10PM on PTV News in News Night with Sadia Afzal, Rpt: 2AM, 2PM. Rgds #PTI
@ImranKhanPTI
Watch PTI on April 7th (1) Dr Waseem Shahzad NOW at 6PM on PTV News. Rgds #PTI
Watch PTI on April 6th (7) Dr Israr Shah at 10PM on Business Plus in "Talking Policy". Rgds #PTI
CORRECTION!! Watch PTI on April 6th (5) @Asad_Umar  at 8PM on ARY News. Rgds #PTI
Watch PTI on April 6th (5) @Asad_Umar  at 8PM on AAJ News (6) PTI vs PMLN at 8PM on NewsOne. Rgds #PTI
Watch PTI on April 6th (5) Asad Umar at 8PM on AAJ News (6) PTI vs PMLN at 8PM on NewsOne. Rgds #PTI
Watch PTI on April 6th (5) Waleed Iqbal at 8PM on Channel 5\. Rgds #PTI
Watch PTI on April 6th (3) Dr Israr Shah at 10PM on PTV News. Rgds #PTI
Watch PTI on April 6th (4) Javed hashmi at 1PM on PTV News. Rgds #PTI
Watch PTI on April 6th (3) Imran Alvi at 1PM on AAJ News. Rgds #PTI
Watch PTI on April 6th (1) Dr @ArifAlvi, Andleeb Abbas and Ehtisham Ameer at 11PM on ARY News (2) Hamid Khan at 10PM on ATV. Rgds #PTI
Watch PTI on April 5th (1) Farooq Amjad Meer at 10:45PM on Dunya News. Rgds #PTI
Watch PTI on April 4th (4) Faisal Khan at 8PM on PTV News. Rgds #PTI
@FaisalJavedKhan
Watch PTI on April 4th (3) Faisal Khan at 11PM on ATV. Rgds #PTI
@FaisalJavedKhan
Watch PTI on April 4th (1) Dr Israr Shah at 8PM on Waqt News (2) Dr Arif Alvi at 9PM on PTV World. Rgds #PTI
@ArifAlvi
Watch PTI on April 3rd (12) Abrar ul Haq on 10PM on Dawn News (13) Shabbir Sial at 10PM on Channel5\. Rgds #PTI
Watch PTI on April 3rd (11) Sadaqat Abbasi on 8PM on RohiTV. Rgds #PTI
Watch PTI on April 3rd (10) Dr Zarqa and Andleeb Abbas on 8PM on Waqt News. Rgds #PTI
Watch PTI on April 3rd (9) Fauzia Kasuri at 8PM on Din News. Rgds #PTI 
```

这是我从程序中得到的差异：

```
*** 
--- 
***************
*** 1,7 ****
- Watch PTI on April 7th (3) Malaika Reza at 8PM on AAJ News (4) Shah Mehmood Qureshi at 8PM on Geo News. Rgds #PTI
- Watch PTI on April 7th (2) Chairman IMRAN KHAN at 10PM on PTV News in News Night with Sadia Afzal, Rpt: 2AM, 2PM. Rgds #PTI
- @ImranKhanPTI
- Watch PTI on April 7th (1) Dr Waseem Shahzad NOW at 6PM on PTV News. Rgds #PTI
  Watch PTI on April 6th (7) Dr Israr Shah at 10PM on Business Plus in "Talking Policy". Rgds #PTI
  CORRECTION!! Watch PTI on April 6th (5) @Asad_Umar  at 8PM on ARY News. Rgds #PTI
  Watch PTI on April 6th (5) @Asad_Umar  at 8PM on AAJ News (6) PTI vs PMLN at 8PM on NewsOne. Rgds #PTI
--- 1,3 ----
***************
*** 21,24 ****
  Watch PTI on April 3rd (12) Abrar ul Haq on 10PM on Dawn News (13) Shabbir Sial at 10PM on Channel5\. Rgds #PTI
  Watch PTI on April 3rd (11) Sadaqat Abbasi on 8PM on RohiTV. Rgds #PTI
  Watch PTI on April 3rd (10) Dr Zarqa and Andleeb Abbas on 8PM on Waqt News. Rgds #PTI
! Watch PTI on April 3rd (9) Fauzia Kasuri at 8PM on Din News. Rgds #PTI--- 17,23 ----
  Watch PTI on April 3rd (12) Abrar ul Haq on 10PM on Dawn News (13) Shabbir Sial at 10PM on Channel5\. Rgds #PTI
  Watch PTI on April 3rd (11) Sadaqat Abbasi on 8PM on RohiTV. Rgds #PTI
  Watch PTI on April 3rd (10) Dr Zarqa and Andleeb Abbas on 8PM on Waqt News. Rgds #PTI
! Watch PTI on April 3rd (9) Fauzia Kasuri at 8PM on Din News. Rgds #PTI
! Watch PTI on April 3rd (8) Mehmood Rasheed at 8PM on ARY News. Rgds #PTI
! Watch PTI on April 3rd (7) Israr Abbasi (Repeat on Arp 4th) at 1:20AM and 1PM on Vibe TV. Rgds #PTI
! Watch PTI on April 3rd (5) Rao Fahad at 9PM on Express News (6) Dr Seems Zia at 10:30PM on Health TV. Rgds #PTI 
```

通过快速比较两个源文件（PTITVProgs 和 new_tweets）可以看出，它们之间的区别在于**4 月 7 日的**3**条推文和 4 月 3 日**的 3 条推文。

我只希望`new_tweets`那些不在差异中的行`PTITVProgs`出现在差异中。

但它会抛出一堆我不想看到的文本。我不知道差异输出代表什么`*** 1,7***`和...？**仅**获取更改的行`*** 1,3***`的正确方法是什么？

 *** * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-04-07T16:47:50.930

只需像这样解析 diff 的输出（如果需要，将 '- ' 更改为 '+ '）：

```
#!/usr/bin/env python

# difflib_test

import difflib

file1 = open('/home/saad/Code/test/new_tweets', 'r')
file2 = open('/home/saad/PTITVProgs', 'r')

diff = difflib.ndiff(file1.readlines(), file2.readlines())
delta = ''.join(x[2:] for x in diff if x.startswith('- '))
print delta 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2013-04-07T16:44:43.197

库中有多种不同的样式和不同的功能`difflib`。`unified_diff`,`ndiff`和`context_diff`.

如果您不想要行号摘要，`ndiff`函数会给出一个不同样式的增量：

```
import difflib

f1 = '''1
2
3
4
5'''
f2 = '''1
3
4
5
6'''

diff = difflib.ndiff(f1,f2)

for l in diff:
    print(l) 
```

输出：

```
 1
- 2          
  3          
  4          
  5   
+ 6 
```

**编辑：**

如果这是您想要的，您还可以解析差异以仅提取更改：

```
>>>changes = [l for l in diff if l.startswith('+ ') or l.startswith('- ')]

>>>for c in changes:
       print(c)
>>>
- 2
+ 6 
```**

# java - 如何使用 MVC 和 3 层架构分层传输数据？

> ID：15864646
> 
> 赞同：0
> 
> 时间：2013-04-07T16:20:42.957
> 
> 标签：java, design-patterns, web-applications

作为设计模式，如果我是正确的，我们使用字符串（通常称为业务逻辑状态）在层之间传达消息。但我的问题是，如果一个方法返回字符串，那么如何传输其他数据对象。对于这种情况，我目前正在使用 http 请求对象（它是全局的）来传输数据，这使得所有 3 层都依赖于表示层，所以它并不好。

有没有其他方法可以在层之间传输数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T18:42:38.450

Passing messages around using strings is considered a bad idea (google "Stringly typed") and definitely not a design pattern. You should create proper objects and pass them between the layers.

# jquery-ui - 在咖啡脚本中创建的引导模式不起作用

> ID：15864650
> 
> 赞同：0
> 
> 时间：2013-04-07T16:20:47.893
> 
> 标签：jquery-ui, twitter-bootstrap, coffeescript, bootstrap-modal

简而言之，我的问题是在咖啡脚本实现的 jQuery-UI 处理程序中，我无法创建和显示引导模式。如果我尝试使用引导文档中的标准按钮方法显示模式，它就可以正常工作。编辑 3：这是在使用资产管道的 Ruby on Rails 3.2 应用程序中。

```
<a href="#my-modal" role="button" class="btn" data-toggle="modal">Launch demo modal</a> 
```

但是，当我从 jQuery-UI 事件处理程序中执行此操作时：

```
$("#my-modal").modal('show') 
```

或者

```
$("#my-modal").modal({}) 
```

我收到此错误：

```
Uncaught TypeError: Object [object Object] has no method 'modal' 
```

我的 html 非常标准——我只是使用了 bootstrap 文档中的示例 html。我有这个用于 jQuery-UI 事件处理程序的咖啡脚本：

```
$ ->
  $("#selectable").selectable(
    selected: (event, ui) ->
      $("#my-modal").modal({})
  ) 
```

编辑：由于这是一个范围问题的味道，我尝试使用 -> 和 => 来查看是否改变了事情，但没有任何改变有任何区别。

编辑 2：我已经验证了 javascript 库的包含顺序正确：jquery、jquery-ui、jquery_ujs，然后是 bootstrap.js。是否有可能我需要引入另一个库？

我已经验证 $("#my-modal") 通过执行正确找到模态 DOM 对象

```
console.log $("#my_modal").html() 
```

我不明白这一点。代码对我来说看起来非常简单明了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T15:58:00.393

我终于想通了，并认为我会发布答案以防其他人遇到此问题。

我们团队中的其他人使用 jQuery 引入了 Google Analytics，并且在 bootstrap 将自身注入 jQuery 之后重新引入了 jQuery，从而将 bootstrap 从世界中移除。

由于我们正处于项目的第一阶段，我们的座右铭是今天不要试图解决明年的问题，所以我解雇了他，当他离开时我们等着他回来。当然，他是我的老板，所以这一切都没有发生。

# wordpress - 使用 Mod_Rewrite 的临时维护页面对我的 Google 信誉和/或 SEO 有害吗？

> ID：15864660
> 
> 赞同：-1
> 
> 时间：2013-04-07T16:21:42.250
> 
> 标签：wordpress, .htaccess, mod-rewrite, maintenance

我计划使用我在此处找到的技术（[http://css-tricks.com/snippets/htaccess/temporary-maintenance-using-mod_rewrite/](http://css-tricks.com/snippets/htaccess/temporary-maintenance-using-mod_rewrite/)）建立一个临时维护页面约 6 小时。代码如下所示：

```
# Don't forget to turn on the rewrite engine
RewriteEngine on

# Maintenance Redirection
# Replace 555\.555\.555\.555 with your own IP address
# Uncomment first conditional to turn off the redirection
# RewriteCond %{REQUEST_URI} ^$a
RewriteCond %{REQUEST_URI} !maintenance.html
RewriteCond %{REQUEST_FILENAME} !(styles|images).+$
RewriteCond %{REMOTE_ADDR} !^555\.555\.555\.555$
RewriteCond %{REMOTE_ADDR} !^127\.0\.0\.1$
RewriteRule (.*) /maintenance.html [R,L] 
```

使用这种方法时有什么我应该注意的吗？如果我这样做，我会招致任何长期的 SEO/Google 搜索排名问题吗？请指教。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T17:38:16.797

除了上面的 mod_rewrite 东西（确保你使用 R=302 或 R=307），建议在你的`/maintenance.html`:

```
<META NAME="ROBOTS" CONTENT="NOINDEX, NOFOLLOW"> 
```

这将确保`/maintenance.html`不会被搜索机器人索引，并且您不会失去任何搜索引擎排名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T16:40:30.437

要添加的一件重要事情如下。

```
RewriteRule (.*) /maintenance.html [R=307,L] 
```

**307**代码将告诉搜索引擎重定向是临时的。它不应该影响你的排名。

> 服务器当前正在使用来自不同位置的页面响应请求，但请求者应继续使用原始位置来处理未来的请求。此代码类似于 301，因为对于 GET 或 HEAD 请求，它会自动将请求者转发到不同的位置，但您不应使用它来告诉 Googlebot 页面或站点已移动，因为 Googlebot 将继续抓取并索引原始位置。

引自[http://support.google.com/webmasters/bin/answer.py?hl=en&answer=40132](http://support.google.com/webmasters/bin/answer.py?hl=en&answer=40132)

* * *

**更新：** *如果未指定，则默认使用 302 状态代码。因此，这将使您的规则也有效。谷歌似乎以同样的方式对待他们。*

但是明确告诉规则使用哪个状态码仍然是一种好习惯。只是为了清楚起见。

# actionscript-3 - 使用类来处理多个嵌套的影片剪辑及其特定事件

> ID：15864666
> 
> 赞同：0
> 
> 时间：2013-04-07T16:21:59.430
> 
> 标签：actionscript-3

我有一个带有五个按钮的菜单。菜单始终可见。每个菜单项都有点击事件。从左到右滑动相应的影片剪辑。每个影片剪辑都有不同的自然事件和各自的动画和活动。例如选项卡 1 带来视频页面。在该电影剪辑中，我有视频事件，例如播放暂停音量和完成等事件和代码。选项卡 2 具有时间按钮组和另一个按钮组功能。根据用户选择代码将计算并在动画计数器上显示值。选项卡 3 具有 Time 按钮组和 Source 按钮组。根据用户选择，它将计算值并将其显示为动画图。等等。

现在我有所有单独的选项卡影片剪辑都有自己的时间线代码用于自己的事件。以及一些交叉变量和与其他选项卡的引用。一切都按预期工作。没问题。我知道时间线代码不是完成任何复杂项目的最佳方式。

因此，如果这是正确的方法，我希望将整个编码作为一个类或多个类。就课堂逻辑而言，我是初学者。我已经将 Main 创建为文档类，并且可以控制选项卡的一般导航及其初始外观。但卡在特定选项卡的特定按钮事件和其他此类独特事件中。

任何帮助是极大的赞赏。提前致谢。任何类似的例子或建议。

首先，非常感谢您的及时回复。看来我什至不是初学者。我需要大量阅读并可能彻底掌握所有基本概念。我已经浏览了您评论中建议的两个链接。我试着慢慢消化这些东西。我没有任何关于 OOP 或任何类型编程的正式非正式教育。老实说，我很难理解您建议的代码。不是因为你的代码，而是因为我的水平。我将不得不花一些时间让自己更清楚地了解事件和序列等。不同的选项卡内容作为主时间线的电影剪辑并且已经放在舞台上。它来来去去其相应的选项卡按钮单击事件。我没有将您的答案标记为是，因为根据您的建议，我仍然需要自己做作业。再次非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T18:10:39.790

这就是我的设计方式：

我有一个菜单类，*它只*包含按钮并将它们的点击“转换”为更具体的事件。这可能看起来像这样：

```
公共类菜单扩展 Sprite {
     受保护的 var 按钮：矢量。= 新向量.();
     公共功能菜单（）{
         极好的（）;
         var loops:int = numChildren;
         for (var i:int=0; i<loops; i++) {
            var button:SimpleButton = getChildAt(i) as SimpleButton;
            如果（按钮）{
                按钮[buttons.length] = 按钮；
                button.addEventListener(MouseEvent.CLICK, broadcastMenuEvent);
            }
         }
     }
     公共功能广播菜单事件（e：事件）：无效{
         var button:DisplayObject = e.currentTarget as DisplayObject;
         dispatchEvent(new Event(button.name, true));//冒泡，可以在任何级别捕获
     }
}
```

这种构建方式，您可以通过更改您在舞台上为按钮实例提供的名称来更改正在调度的事件。请注意，如果您未选中“自动声明实例”，则需要将 Menu 作为基类而不是 Class 才能工作，因为这样做允许编译器以您的基类的方式为您生成这些实例名称不必知道。

此时，您可以在另一个地方处理这些事件——无论是您的主文档类还是您有单独的控制器。

我也会将您描述的每个视图定义为一个单独的类。如果您有物体在舞台上来来去去，您可以使用[此处描述](http://www.developria.com/2010/04/combining-the-timeline-with-oo.html)的一种技术来处理它。否则，从基类而不是时间线代码处理时间线实例相当简单。同样，您可以在主文档类或专用控制器中侦听这些事件——重点是确保您的视图没有做出任何重要的决定，并且通常它们不应该编辑数据。

您可以选择让您的主文档编排如何添加和删除选项卡（我非常喜欢将时间线与 goToAndStop 一起使用，但不是每个人都共享此偏好），或者，您可以再次将此逻辑分离为专用控制器。我建议，如果可以概括您的 Views 如何让它们实现单个[Interface](http://www.developria.com/2009/10/interfaces-and-dynamic-class-i.html)。这样，您可以给它们一个实例名称并使用相同的 getter/setter 对来管理它们（假设您走的是时间线路线）。

请注意，Flash 编译器在这方面并不是非常复杂，因此如果您这样做并且您的视图扩展了不同的父类，您将收到编译器警告。忽略这些——它们没有任何意义。

您应该尝试完全根除代码的是视图相互引用的部分。唯一可以让一个 View 了解另一个 View 的情况是它的父母知道它的孩子。即便如此，尽量少掌握具体知识。请注意，在我作为示例编写的菜单视图中，父级只知道*可能*有一些 SimpleButtons，但它不知道它们在舞台上的位置，具体是什么，甚至是实例名称是什么。

与其让您的视图相互了解，不如让第三方（同样，您可以选择使用或不使用主文档类）将状态更改请求（以事件的形式）从一个转移到另一个。

# ajax - MVC，C# 应用程序尝试使用 AJAX 导入文件

> ID：15864668
> 
> 赞同：1
> 
> 时间：2013-04-07T16:22:01.370
> 
> 标签：ajax, asp.net-mvc

我正在尝试使用以下插件使用 AJAX 导入文件 -

[http://malsup.github.com/jquery.form.js](http://malsup.github.com/jquery.form.js)

基于以下示例 -

[http://malsup.com/jquery/form/progress.html](http://malsup.com/jquery/form/progress.html)

我的视图看起来像这样 -

```
<form action="/MyController/MyAction" enctype="multipart/form-data" id="myFormId" method="post">        
    <input type="file" name="file" id="file">
    <input type="submit" value="Import File"> </div>
</form>
<script type="text/javascript">
    window.onload = function () {
        (function () {
            $('#myFormId').ajaxForm({
                beforeSend: function () {
                    alert('before send');

                },
                success: function () {
                    alert('success');
                },
                complete: function (xhr) {

                    alert('xhr.responseText=' + xhr.responseText);
                }
            });

        })();
    }
</script> 
```

`window.onload = function (){}`永远不会调用其中的 javacsript 。`MyAction`被调用，然后浏览器只显示`MyAction`.

谁能告诉我我做错了什么或建议一种不同的方法？非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T16:29:39.097

由于您编写的脚本放置在表单之后，因此您无需将其放入`window.onload`处理程序中。以下应该可以正常工作：

```
@using (Html.BeginForm("MyAction", "MyController", FormMethod.Post, new { enctype = "multipart/form-data", id = "myFormId" }))
{
    <input type="file" name="file" id="file">
    <input type="submit" value="Import File"> </div>
}

<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7/jquery.js"></script>
<script src="http://malsup.github.com/jquery.form.js"></script>
<script type="text/javascript">
    (function ($) {
        $('#myFormId').ajaxForm({
            beforeSend: function () {
                alert('before send');
            },
            success: function () {
                alert('success');
            },
            complete: function (xhr) {
                alert('xhr.responseText=' + xhr.responseText);
            }
        });
    })(jQuery);
</script> 
```

另请注意，确保 jquery.js 包含在 jquery.form.js 插件之前很重要，该插件需要在使用它的脚本之前包含。在我展示的示例中，我还将 jQuery 作为参数传递给正在使用的匿名函数，以确保与您可能正在使用的其他插件没有冲突，并且可能劫持了该`$`函数。

此外，我建议您使用 javascript 调试工具，例如 FireBug 或 Chrome 开发人员工具栏，以确保正确包含所有脚本（无 404）并且您没有任何重复的脚本或 javascript 错误。

# php - 如何让我的 PHP 控制的下载器停止重复下载 IP 地址？

> ID：15864669
> 
> 赞同：2
> 
> 时间：2013-04-07T16:22:05.883
> 
> 标签：php, html

我有一个简单的下载页面，它接收文件 URL、下载计数器 .TXT 文件 url 以及下载后的重定向链接。这都是通过 PHP 参数发送的。问题是，有人一直在向下载者发送垃圾邮件并弄乱计数。我想在下载计数器上设置一个上限，以便每个可下载项目的每个地址仅计算 3 次点击。

我需要能够仅使用 PHP 而不使用 MySQL 数据库来执行此操作。我确实有这个理由，我的数据库服务器是垃圾且不可靠，我不能让计数器停机。

这是我当前的下载器 PHP 文件。进一步的信息，这个 PHP 文件位于它自己的文件夹中，每个下载计数 TXT 文件都有`/counter`一个`/counter/data`目录。这些文件只存储一个整数值。

```
<?
    //Retrieve downloadable file URL
    $c_url = urldecode($_GET['url']);

    //retrieve redirect page URL
    $c_page = urldecode($_GET['page']);

    //Retrieve download counter TXT URL
    $c_file = "../" . $_GET['file'];
?>

<!-- Set up simple styles -->
<head>
    <style type="text/css">
        body{
            background: url("../images/background.png");
            color: #ffffff;
        }
    </style>
</head>

<!-- Creates download file URL in hidden iFrame -->
<iframe src="<?echo $c_url;?>" id="hiddenFrm" style="display:none;" frameborder="0"></iframe>

<body>
<center>
    <h1>Your download is starting</h1><br>
    <p>You should be redirected momentarily...<br>

    <?
    <br><br>

    if (file_exists($c_file))
    {
        //Add one value to the counter file
        file_put_contents($c_file, ((int) file_get_contents($c_file)) + 1);

        //Set an automatic redirect for the page (Return home)
        ?>
        <meta http-equiv="refresh" content="0;url=<?echo $c_page;?>" />
        <?

        //Display information about the download, and alternate exits to the page
        if ($c_url != "") 
        {?>
            <b><a href="<?echo $c_url?>">Click here</a> if the download did not start.<br><br>
            <a href="<?echo $c_page?>">Click here</a> if this page does not close after your download.</b></p>
        <?} 
        else 
        {
        ?>
            <b><a href="<?echo $c_page?>">Click here</a> if you are not redirected automatically</b></p>
        <?
        }
    }
    else
    {
        //In case our counter file is improperly specified
        echo "<br><br><br>Error, the counter file was not found!";
    }
    ?>
    </center>
</body> 
```

我的问题简化了：如何存储下载每个产品的人的 IP 地址，并防止下载计数器仅使用 PHP 而没有数据库从该地址计算超过 3 次下载？

非常感谢您的帮助。

**编辑：** 正如我上面所说，我不能使用数据库。另外，我对两种解决方案感兴趣，但不确定如何使它们工作（我正在寻找代码示例），一种是 cookie，另一种是充当数据库的文本文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T16:31:38.860

根本不使用任何数据库将非常困难。如果您根本不能使用 MySQL，我会感到惊讶，但也许像 SQLite 这样更简单的东西可能会起作用。除此之外，我还能想到两种解决方案：文件系统和 cookie。

cookie 的问题在于它们是暂时的，如果您有机器人向您发送垃圾邮件，它们可能无论如何都会拒绝 cookie 设置。

你可以做的是维护一个文件

```
IP    download-count    last-download-time 
```

如果文件足够小，您可以将其加载到内存中`file`并搜索 IP 地址`preg_grep`并以这种方式更新计数。

请注意，IP 地址可能不是最好的选择，因为一些有效和无效的用户可能共享移动路由器，并且 IP 地址可能会通过使用代理等方式进行欺骗。最好的选择是某种用户身份验证系统，但是没有数据库会非常困难

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T16:45:09.127

我会使用内存缓存。你可以在这里查看 PHP 的文档：http: [//php.net/manual/en/book.memcache.php](http://php.net/manual/en/book.memcache.php)

您可以使用 IP 地址字符串作为密钥，然后在每个下载请求中，您将尝试执行 $memcache->get($key)。如果那不存在，您将执行 $memcache->set($key, $downloadCount)。如果密钥确实存在，您将增加 downloadCount。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T16:28:43.973

数据必须存储在某个地方，因为 PHP 总是“从头开始”。代表数据库的文本文件怎么样？

# c# - 生成尾调用操作码

> ID：15864670
> 
> 赞同：42
> 
> 时间：2013-04-07T16:22:09.010
> 
> 标签：c#, recursion, f#, tail-recursion, cil

出于好奇，我试图使用 C# 生成尾调用操作码。Fibinacci 是一个简单的方法，所以我的 c# 示例如下所示：

```
 private static void Main(string[] args)
    {
        Console.WriteLine(Fib(int.MaxValue, 0));
    }

    public static int Fib(int i, int acc)
    {
        if (i == 0)
        {
            return acc;
        }

        return Fib(i - 1, acc + i);
    } 
```

如果我在发行版中构建它并在没有调试的情况下运行它，我不会得到堆栈溢出。在没有优化的情况下调试或运行它，我确实得到了堆栈溢出，这意味着在发布优化时尾调用正在工作（这是我所期望的）。

用于此的 MSIL 如下所示：

```
.method public hidebysig static int32 Fib(int32 i, int32 acc) cil managed
{
    // Method Start RVA 0x205e
    // Code Size 17 (0x11)
    .maxstack 8
    L_0000: ldarg.0 
    L_0001: brtrue.s L_0005
    L_0003: ldarg.1 
    L_0004: ret 
    L_0005: ldarg.0 
    L_0006: ldc.i4.1 
    L_0007: sub 
    L_0008: ldarg.1 
    L_0009: ldarg.0 
    L_000a: add 
    L_000b: call int32 [ConsoleApplication2]ConsoleApplication2.Program::Fib(int32,int32)
    L_0010: ret 
} 
```

我本来希望看到一个尾部操作码，每个[msdn](http://msdn.microsoft.com/en-us/library/system.reflection.emit.opcodes.tailcall%28v=vs.100%29.aspx)，但它不存在。这让我想知道 JIT 编译器是否负责将它放在那里？我尝试对程序集进行生成（使用`ngen install <exe>`，导航到 Windows 程序集列表以获取它）并将其加载到 ILSpy 中，但对我来说它看起来相同：

```
.method public hidebysig static int32 Fib(int32 i, int32 acc) cil managed
{
    // Method Start RVA 0x3bfe
    // Code Size 17 (0x11)
    .maxstack 8
    L_0000: ldarg.0 
    L_0001: brtrue.s L_0005
    L_0003: ldarg.1 
    L_0004: ret 
    L_0005: ldarg.0 
    L_0006: ldc.i4.1 
    L_0007: sub 
    L_0008: ldarg.1 
    L_0009: ldarg.0 
    L_000a: add 
    L_000b: call int32 [ConsoleApplication2]ConsoleApplication2.Program::Fib(int32,int32)
    L_0010: ret 
} 
```

我还是没看到。

我知道 F# 可以很好地处理尾调用，所以我想比较 F# 所做的与 C# 所做的。我的 F# 示例如下所示：

```
let rec fibb i acc =  
    if i = 0 then
        acc
    else 
        fibb (i-1) (acc + i)

Console.WriteLine (fibb 3 0) 
```

为 fib 方法生成的 IL 如下所示：

```
.method public static int32 fibb(int32 i, int32 acc) cil managed
{
    // Method Start RVA 0x2068
    // Code Size 18 (0x12)
    .custom instance void [FSharp.Core]Microsoft.FSharp.Core.CompilationArgumentCountsAttribute::.ctor(int32[]) = { int32[](Mono.Cecil.CustomAttributeArgument[]) }
    .maxstack 5
    L_0000: nop 
    L_0001: ldarg.0 
    L_0002: brtrue.s L_0006
    L_0004: ldarg.1 
    L_0005: ret 
    L_0006: ldarg.0 
    L_0007: ldc.i4.1 
    L_0008: sub 
    L_0009: ldarg.1 
    L_000a: ldarg.0 
    L_000b: add 
    L_000c: starg.s acc
    L_000e: starg.s i
    L_0010: br.s L_0000
} 
```

根据 ILSpy，这相当于：

```
[Microsoft.FSharp.Core.CompilationArgumentCounts(Mono.Cecil.CustomAttributeArgument[])]
public static int32 fibb(int32 i, int32 acc)
{
    label1:
    if !(((i != 0))) 
    {
        return acc;
    }
    (i - 1);
    i = acc = (acc + i);;
    goto label1;
} 
```

那么 F# 使用 goto 语句生成尾调用？这不是我所期待的。

我不想在任何地方依赖尾调用，但我只是好奇该操作码到底是在哪里设置的？C# 是如何做到这一点的？

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2013-04-07T17:01:35.510

**C# 编译器**不对尾调用优化提供任何保证，因为 C# 程序通常使用循环，因此它们不依赖尾调用优化。因此，在 C# 中，这只是一种可能会发生也可能不会发生的 JIT 优化（您不能依赖它）。

**F# 编译器**旨在处理使用递归的函数式代码，因此它确实为您提供了有关尾调用的某些保证。这是通过两种方式完成的：

*   如果您编写一个调用自身的递归函数（如您的`fib`），编译器会将其转换为在主体中使用循环的函数（这是一个简单的优化，生成的代码比使用尾调用更快）

*   如果您在更复杂的位置使用递归调用（当使用函数作为参数传递的连续传递样式时），则编译器会生成一条尾调用指令，告诉 JIT 它*必须*使用尾调用。

以第二种情况为例，编译如下简单的 F# 函数（F# 在 Debug 模式下不这样做，以简化调试，因此您可能需要 Release 模式或添加`--tailcalls+`）：

```
let foo a cont = cont (a + 1) 
```

该函数只是调用函数`cont`，第一个参数加一。在延续传递风格中，您有很长的此类调用序列，因此优化至关重要（如果不处理尾调用，您根本无法使用这种风格）。生成的 IL 代码如下所示：

```
IL_0000: ldarg.1
IL_0001: ldarg.0
IL_0002: ldc.i4.1
IL_0003: add
IL_0004: tail.                          // Here is the 'tail' opcode!
IL_0006: callvirt instance !1 
  class [FSharp.Core] Microsoft.FSharp.Core.FSharpFunc`2<int32, !!a>::Invoke(!0)
IL_000b: ret 
```

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2013-04-07T17:15:23.520

.Net 中尾调用优化的情况相当复杂。据我所知，是这样的：

*   C# 编译器永远不会发出`tail.`操作码，它也永远不会自己进行尾调用优化。
*   F# 编译器有时会发出`tail.`操作码，有时会通过发出非递归的 IL 来自行进行尾调用优化。
*   如果操作码存在， CLR 将遵守`tail.`操作码，即使操作码不存在，64 位 CLR 有时也会进行尾调用优化。

因此，在您的情况下，您没有看到`tail.`C# 编译器生成的 IL 中的操作码，因为它没有这样做。但是该方法是尾调用优化的，因为即使没有操作码，CLR 有时也会这样做。

在 F# 案例中，您观察到 f# 编译器自己进行了优化。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-04-07T16:56:06.083

与 .NET（Roslyn 语言）中执行的所有优化一样，尾调用优化是由抖动而不是编译器执行的工作。其理念是，将工作放在抖动上是有用的，因为任何语言都会从中受益，而编写和调试代码优化器通常很困难的工作只能在每个架构中完成一次。

您必须查看生成的机器代码才能看到它正在完成，Debug + Windows + Disassembly。进一步要求您通过查看使用工具 + 选项、调试、常规、抑制 JIT 优化生成的发布构建代码来执行此操作。

x64 代码如下所示：

```
 public static int Fib(int i, int acc) {
            if (i == 0) {
00000000  test        ecx,ecx 
00000002  jne         0000000000000008 
                return acc;
00000004  mov         eax,edx 
00000006  jmp         0000000000000011 
            }

            return Fib(i - 1, acc + i);
00000008  lea         eax,[rcx-1] 
0000000b  add         edx,ecx 
0000000d  mov         ecx,eax 
0000000f  jmp         0000000000000000              // <== here!!!
00000011  rep ret 
```

注意标记的指令，跳转而不是调用。这就是工作中的尾调用优化。.NET 中的一个怪癖是 32 位 x86 抖动不*执行*此优化。只是他们可能永远无法解决的待办事项。这确实要求 F# 编译器编写者不要忽略该问题并发出 Opcodes.Tailcall。您会发现[此答案](https://stackoverflow.com/questions/4043821/performance-differences-between-debug-and-release-builds/4045073#4045073)中记录的抖动执行的其他优化。

# javascript - 在小部件上运行内容脚本单击 Firefox 扩展

> ID：15864676
> 
> 赞同：0
> 
> 时间：2013-04-07T16:22:53.893
> 
> 标签：javascript, firefox-addon

我刚刚完成了一个 chrome 扩展，它在单击浏览器按钮时添加了一个内容脚本。我正在寻找一种与 Firefox 相同的方法来完成它，我找到[了 PageMod](https://addons.mozilla.org/en-US/developers/docs/sdk/latest/modules/sdk/page-mod.html)，但它似乎在我的小部件的 onclick 事件中不起作用。

有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T03:39:27.973

我猜你所说的“浏览器按钮”就是Mozilla所说的[小部件](https://addons.mozilla.org/en-US/developers/docs/sdk/latest/modules/sdk/widget.html)。激活[page-mod](https://addons.mozilla.org/en-US/developers/docs/sdk/latest/modules/sdk/page-mod.html)不需要你点击任何东西，只需要“附加”（打开）一个匹配的网页。

要在单击小部件后与页面内容（页面的 DOM）交互，小部件`onClick`属性的值应该是无参数的匿名函数，其中将变量设置为活动选项卡的`attach`事件：

```
var self=require("self");
var data = self.data;
var widget = require("widget");
var tabs = require("tabs");

var erase = widget.Widget({
 id: "magated",
 label: "click this widget",
 content: "<div>?</div>",
 contentScriptWhen: "start",
 contentScriptUrl: data.url("cs.js"),
 onClick:function () {
  worker = tabs.activeTab.attach({
    contentScriptWhen: "start",
    contentScriptFile: [data.url("cs.js")],
  });
  worker.port.emit("dothing", tabs.activeTab.url);
 },
}); 
```

在 cs.js 中可能会发现以下内容：

```
self.port.on("dothing", function (url) {
  var bigUrl = document.createElement("h1");
  bigUrl.textContent = url;
  document.body.insertBefore(bigUrl, document.body.firstElementChild);
}); 
```

# c - 当写为 main||integer 时，main 函数的实际行为如何

> ID：15864677
> 
> 赞同：-5
> 
> 时间：2013-04-07T16:23:06.627
> 
> 标签：c

# 我已经在 gcc 上测试过这个程序，它的答案是 1。我怎么找不到原因？

```
main()
{
int c = 5;
printf("%d", main||c);
} 
```

答：它显示在 gcc 编译器（Dev C++）上

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T16:25:40.417

当它在没有括号的情况下单独出现时，`main`是一个[指向函数](http://c-faq.com/decl/ptrfuncinit.html)的指针（实际上是 的地址`main()`）。

因此

```
main || c 
```

相当于

```
(main != NULL) || (c != 0) 
```

它总是评估为真（即`1`）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-07T16:25:16.180

这是一个合乎逻辑的`OR`操作。如果其中至少一个`main`不是`NULL`指针或`c`非零，则它的计算结果为 1；否则，它产生 0。由于`main()`是现有函数，指向它的指针不是`NULL`，`5`也不为零，所以这段代码将打印`1`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T16:26:17.470

`main||c`是一个逻辑`OR`函数，它将测试函数指针`main`是否为非 NULL 并且`c`具有一些非零值。由于它们都不是`zero`or `NULL`，因此它将始终打印`1`，因为这是 logical 的输出`OR`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-07T16:27:44.947

您应该使用`-Wall`gcc 选项对其进行编译（以获取几乎所有警告，`-Wextra`您将获得更多警告）。随着`gcc-4.8`我越来越

```
% gcc-4.8 -Wall atiq.c -o atiq
atiq.c:1:1: warning: return type defaults to 'int' [-Wreturn-type]
 main()
 ^
atiq.c: In function 'main':
atiq.c:4:1: warning: implicit declaration of function 'printf' [-Wimplicit-function-declaration]
 printf("%d", main||c);
 ^
atiq.c:4:1: warning: incompatible implicit declaration of built-in function 'printf' [enabled by default]
atiq.c:4:14: warning: the address of 'main' will always evaluate as 'true' [-Waddress]
 printf("%d", main||c);
              ^
atiq.c:5:1: warning: control reaches end of non-void function [-Wreturn-type]
 }
 ^ 
```

我认为警告很清楚。你看到它`main`总是有一个非空地址，所以`main||c`总是正确的。

而且您的代码缺少`#include <stdio.h>`

# java - BigDecimal 舍入

> ID：15864681
> 
> 赞同：0
> 
> 时间：2013-04-07T16:23:33.897
> 
> 标签：java, bigdecimal

所以 BigDecimal 似乎无法存储像 1/3 的答案那样无限连续的数字。当我尝试这样做时，我得到以下信息：

```
Exception in thread "main" java.lang.ArithmeticException: Non-terminating decimal expansion; no exact representable decimal result. 
```

所以我决定使用[`RoundingMode`](http://docs.oracle.com/javase/1.5.0/docs/api/java/math/RoundingMode.html). 当我这样做时`(1/3)*3`，我希望它以 1 的形式返回，而不是像 0.9 或 0.99 或 0.999 或任何类似的形式。但是，如果我要做 (1/3)*2，我不希望它四舍五入到 1。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T16:44:06.330

如果您的除数始终为 3，您可以使用放大 3 的整数进行数学运算以获得准确的结果，例如使用 2 表示 2/3，使用 1 表示 1/3。添加它们会得到 3，代表 3/3 = 1。

如果您需要各种除数，但仍然只能处理可以用分数表示的数字，您可能想看看这个问题：[在 Java 中表示分数的最佳方法？](https://stackoverflow.com/questions/474535/best-way-to-represent-a-fraction-in-java)

如果您还需要精确表示（并计算）无理数（例如 Pi 或 sqrt(2)），那么您可能不走运。请参阅此处：[任何编程语言中的无理数表示？](https://stackoverflow.com/questions/5407286/irrational-number-representation-in-any-programming-language)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T16:36:35.883

如果您将数字四舍五入，您将丢失信息。使用 BigDecimal，除非再次对最终结果进行四舍五入，否则 (1/3)*3 永远不会得到 1。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T16:33:43.460

看起来你需要四舍五入到小数点后 1 位，试试这个：

```
BigDecimal base = new BigDecimal("1.0");
BigDecimal result = base.divide(new BigDecimal("3"), 1, RoundingMode.HALF_UP); 
```

并[在这里阅读文档](http://docs.oracle.com/javase/6/docs/api/java/math/BigDecimal.html)

# qt - 任何编译之前的 qmake 预构建步骤

> ID：15864689
> 
> 赞同：28
> 
> 时间：2013-04-07T16:24:09.663
> 
> 标签：qt, qmake

SO上有几个关于如何创建预构建步骤的问题`qmake`，我可以在我的`.pro`文件中这样做：

```
versionTarget.target = ../VersionData/versioning.h
versionTarget.depends = FORCE
win32: versionTarget.commands = cd $$PWD; python.exe ./version_getter.py -p $$TARGET
else:  versionTarget.commands = cd $$PWD; python ./version_getter.py -p $$TARGET

PRE_TARGETDEPS += ../VersionData/versioning.h
QMAKE_EXTRA_TARGETS += versionTarget 
```

现在，问题是这种方法本身不是构建步骤，而只是另一个构建目标，所以如果我为它`-j`配置了标志，我的脚本会与其他构建作业*并行运行。*这非常糟糕，因为我的脚本创建/更新了一个头文件——在编译过程中让它改变是不可接受的。`make`

 *那么，无论如何我可以在运行*任何*编译之前执行这个脚本吗？我知道我可以创建另一个脚本并从中按顺序调用`version_getter.py`and `qmake`，但这是不可取的，因为我必须从命令行而不是从 Qt Creator 中编译。

* * *

## 更新

`.pri`我的每个子项目都包含的完整文件如下：

```
CONFIG += thread
QT += core \
      gui

versionTarget.target = ../VersionData/versioning.h
versionTarget.depends = FORCE
win32: versionTarget.commands = cd $$PWD; python.exe ./version_getter.py -p $$TARGET
else:  versionTarget.commands = cd $$PWD; python ./version_getter.py -p $$TARGET

PRE_TARGETDEPS += ../VersionData/versioning.h
QMAKE_EXTRA_TARGETS += versionTarget

DEPENDPATH += ../VersionData
INCLUDEPATH += ../VersionData
HEADERS += ../VersionData/versioning.h

UI_HEADERS_DIR = $${_PRO_FILE_PWD_}/include/Qui
DESTDIR = $(SYREN_PATH)

!win32-msvc {
    QMAKE_CXXFLAGS += -std=c++0x
} 
```

但这仍然会导致相同的并行行为。我认为这可能是由于我使用了`ccache`，但将其关闭并没有什么不同（当然除了要慢得多）。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-08T14:02:06.020

另一种选择是从原始问题中的项目文件片段开始，并确保 qmake 知道这`versioning.h`是项目文件中其他构建目标的依赖项-</p>

*   将完整路径添加`versioning.h`到您的`HEADERS`变量。
*   将所在的文件夹添加`versioning.h`到您的`DEPENDPATH`变量中。

（警告：如果您在`versioning.h`不存在时运行 qmake，它将发出“警告：无法找到：versioning.h” -[该警告的唯一解决方法是使用`system()`command](https://stackoverflow.com/a/14111649/64860)，正如我在其他答案中所述。）

## 例子

创建`test.pro`包含以下内容：

```
versionTarget.target = ../versioning.h
versionTarget.depends = FORCE
versionTarget.commands = sleep 5s ; touch ../versioning.h
PRE_TARGETDEPS += ../versioning.h
QMAKE_EXTRA_TARGETS += versionTarget

SOURCES = test.c
HEADERS = ../versioning.h
DEPENDPATH = .. 
```

创建`test.c`包含以下内容：

```
#include "../versioning.h" 
```

运行`qmake`。它将输出`WARNING: Failure to find: ../versioning.h`.

运行`make -j9`。它将运行`versionTarget.commands`（它会休眠 5 秒以夸大任何多处理问题），然后运行命令来编译`test.c`.

（如果您检查生成的`Makefile`，您会发现这`test.o`取决于两者`test.c`和`../versioning.h`，因此 Make 应该正确地确定它无法在`test.c`创建/更新命令之前运行命令进行编译`../versioning.h`。）

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-08T00:03:40.823

使用[`system()`](http://qt-project.org/doc/qt-4.8/qmake-function-reference.html#system-command)qmake 命令——它在你运行时运行`qmake`，它发生在`make`运行任何构建命令之前。

```
win32: PYTHON=python.exe
else:  PYTHON=python
system(cd $$PWD; $$PYTHON ./version_getter.py -p ../VersionData/versioning.h) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-09-09T12:25:26.693

我注意到，如果您检查 qmake 生成的 Makefile，总会有第一个名为“first”的 Makefile 规则，它依赖于包含构建指令的另一个规则调试（或发布）。Id est，像这样：

```
...
MAKEFILE      = Makefile
first: debug
... 
```

为了创建一个预构建步骤，我们应该破解该规则以依赖于另一个具有更高优先级的规则。

就像是

```
...
MAKEFILE      = Makefile
first: prebuild debug
prebuild:
    do_your_instructions
... 
```

这实际上等于这样的东西：

```
...
MAKEFILE      = Makefile
first: debug
...
first: prebuild 
prebuild:
    do_your_instructions
... 
```

通过执行以下操作可以很容易地在 qmake 项目中破解：

```
# $$PWD/test_prebuild is a batch with the instructions to execute before every build
!build_pass:prebuild.commands = $$PWD/test_prebuild
!build_pass:first.depends = prebuild
QMAKE_EXTRA_TARGETS += prebuild first 
```

请注意，“！build_pass：”确保您仅在 Makefile（而不是 Makefile.Debug 或 Makefile.Release）中编写此预构建规则，以防止多次执行 test_prebuild。请注意，这是 hack 是可能的，因为“first”不是保留的（尽管它是一个[qmake 原语](https://doc.qt.io/qt-5/qmake-function-reference.html#first-variablename)。

就我而言，它运行良好：我希望这个技巧也可以帮助其他人。*

# c# - 如何从浏览器调用我的 WCF 服务？

> ID：15864692
> 
> 赞同：5
> 
> 时间：2013-04-07T16:24:28.647
> 
> 标签：c#, web-services, asp.net-mvc-4

我正在编写一个网络服务，假设将 json 两个 json 字符串保存到 DB。我可以使用 sope UI 和 WCF 测试客户端调用它，但我不能从我的浏览器调用它。有没有办法做到这一点？

该服务最初将由 android 应用程序使用，我尝试从它调用但没有任何运气。

这是我的服务的界面：

```
 [ServiceContract]
public interface IRService
{
    [OperationContract]
    [WebInvoke(Method = "GET", ResponseFormat = WebMessageFormat.Json,
       BodyStyle = WebMessageBodyStyle.Wrapped,
       UriTemplate = "SaveCallResults?callInfo={callInfo}&testInfo={testInfo}")]
    string SaveCallResults(string callInfo, string testInfo);
} 
```

这是我的 web.config

```
<system.serviceModel>
<bindings>
  <basicHttpBinding>
    <binding name="BasicHttpBinding_RService" closeTimeout="00:01:00"
      openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00"
      allowCookies="false" bypassProxyOnLocal="false"            hostNameComparisonMode="StrongWildcard"
      maxBufferPoolSize="524288" maxBufferSize="65536" maxReceivedMessageSize="65536"
      textEncoding="utf-8" transferMode="Buffered" useDefaultWebProxy="true"
      messageEncoding="Text">
      <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384"
        maxBytesPerRead="4096" maxNameTableCharCount="16384" />
      <security mode="None">
        <transport clientCredentialType="None" proxyCredentialType="None"
          realm="" />
        <message clientCredentialType="UserName" algorithmSuite="Default" />
      </security>
    </binding>
  </basicHttpBinding>
</bindings>
<behaviors>
  <serviceBehaviors>
    <behavior name="">
      <serviceMetadata httpGetEnabled="true" />
      <serviceDebug includeExceptionDetailInFaults="false" />
    </behavior>
  </serviceBehaviors>
</behaviors>
<serviceHostingEnvironment aspNetCompatibilityEnabled="false"
  multipleSiteBindingsEnabled="true" />
<services>
  <!-- causing error -->
  <!--<service name="NovaRoadRunnerWS.RService" behaviorConfiguration="ServiceBehaviour" >
    <endpoint address="" binding="webHttpBinding" contract="NovaRoadRunnerWS.IRService" behaviorConfiguration="web" >
    </endpoint>
  </service>-->
</services> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-07T17:13:10.500

web.config中有几个错误：

1.  没有名为 ServiceBehaviour 的服务行为`behaviorConfiguration="ServiceBehaviour"`

2.  没有名为 web 的端点行为：`behaviorConfiguration="web"`

3.  serviceBehaviors 部分没有命名： `<behavior name="">`

我进行了以下更改以修复错误：

```
<behaviors>
  <serviceBehaviors>
    <behavior name="web">
      <serviceMetadata httpGetEnabled="true" />
      <serviceDebug includeExceptionDetailInFaults="false" />
    </behavior>
  </serviceBehaviors>
</behaviors> 
```

和

```
<services>
  <service name="NovaRoadRunnerWS.RService" behaviorConfiguration="web" >
    <endpoint address="" binding="webHttpBinding" contract="NovaRoadRunnerWS.IRService"  >
    </endpoint>
  </service>
</services> 
```

# android - 选择多个联系人的示例项目

> ID：15864693
> 
> 赞同：6
> 
> 时间：2013-04-07T16:24:37.833
> 
> 标签：android, checkbox, android-listview

我希望我的应用程序运行，以便活动 A 以结果意图启动活动 B，其中活动 B 是用户选择多个联系人的列表视图。然后在活动 A 中，我希望能够提取 ArrayList 中的电话号码。Stack Overflow 上有很多关于这个问题的问题和答案。列出两个：

*   [使用复选框过滤联系人并获取电话号码](https://stackoverflow.com/questions/9450058/using-checkbox-to-filter-contacts-and-get-phone-number/10105655#10105655)

*   [列表视图中用于多选联系人的复选框](https://stackoverflow.com/questions/9834723/checkbox-in-listview-for-multiple-selection-of-contacts)

作为 Android 开发的新手，我发现分散的代码很难组装。所以我的问题是：有没有人有一个简单的项目可以完成我所寻求的完整，他们不介意在 zip 文件中共享？在[使用复选框过滤联系人并获取电话号码](https://stackoverflow.com/questions/9450058/using-checkbox-to-filter-contacts-and-get-phone-number/10105655#10105655)的最后一个响应中，该人声称拥有这样一个 zip 项目，但是当我点击该链接时，应该导致该项目的辅助链接已损坏。

如果有人确实同意提供链接，请不要让它成为部分答案。我认为这个任务对于以前做过的人来说很简单：它有两个活动，一个是允许用户选择联系人的 ListView，另一个是显示所选联系人的视图。事实上，其他甚至不必在视图中显示联系人，对 LogCat 进行简单的 println 就足够了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T12:58:55.417

[这](https://github.com/iamporus/AndroWorks/tree/master/ContactSelector)可能会帮助你。这不是您正在寻找的东西，但它会给您一个开始工作的想法。我曾经`Loaders`从电话目录中获取联系人并对其执行搜索操作。您可以使用它`Loader`来填充`ListView`包含`TextView`（名称/编号）并`CheckBox`作为列表项配对。您可以维护一个`HashMap`位置与联系号码，以跟踪选定的联系人。希望这可以帮助。

**编辑**

更新的链接在[这里。](https://github.com/iamporus/AndroWorks/archive/master.zip)

# android - 在 android 库项目中使用 AspectJ

> ID：15864700
> 
> 赞同：2
> 
> 时间：2013-04-07T16:25:07.083
> 
> 标签：android, aspectj

我想尝试使用 AspectJ 作为 android 库项目的一部分。我尝试创建一个 android 库项目并使用基于注释的样式来创建切入点。

问题是库项目的各个方面没有被编织到添加了我的库项目的 android 应用程序中。

我的 Android 库项目中定义了几个方面。就像是

```
@AfterReturning(pointcut = "execution(* *.*(..)) && !this(com.xyz.aspects.xyz)")
public void abc(JoinPoint jp) 
{ 
    dosomething;
} 
```

我已将此库项目添加到我的 android 应用程序中。然而，'dosomething' 没有被执行。有什么建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T06:57:08.367

终于解决了这个问题。我将库项目添加到我的方面路径中，事情开始起作用了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T13:11:14.680

怎么样

```
execution(* *(..)) && !within(com.xyz.aspects.xyz..*) 
```

我没有测试过它，只是用我的 iPad 快速编写了它，但也许它有帮助。如果没有，请让我更新。

# node.js - 使用 Mongoose 将嵌套集合插入到 Mongodb

> ID：15864703
> 
> 赞同：0
> 
> 时间：2013-04-07T16:25:14.567
> 
> 标签：node.js, mongodb, mongoose

我有一个数组，我试图用 Node.JS 和 Mongoose 插入一个集合类型。DB Schema 定义如下：

```
//LIBRARY
var LibrarySchema = new mongoose.Schema({
    name: {type:String, required: true},
    keyw: {type:String, required: true},
    data: {type:String, required: true},
    ref: {url: String}
},
 {collection: 'library'}
) 
```

我已经能够成功插入数组（显示为逗号分隔的列表），但似乎无法掌握我认为简单的东西。我已经阅读了各种文档，这应该有效：

```
// Dummy Data
var b.topic = "This is my name"
var b.keywords = "keyword1,keyword2,keyword3"
var data = "This is some data, just another string"
var arrRef = []
arrRef[0] = "http://www.website1.com"
arrRef[1] = "http://www.website2.com"
//Create Schema & Save
var lib = new db.Library({
    name: b.topic,
    keyw: b.keywords,
    data: b.data,
    ref: {$addToSet: {url: arrRef}}
})
lib.save(function(err,docs) {
    console.log("Error:" + err)
} 
```

我试图在数据中拥有的是：

```
name: "This is my name"
keyw: "keyword1,keyword2,keyword3"
data: "This is some data, just another string"
ref:
      url: "http://www.website1.com"
      url: "http://www.website2.com" 
```

关于我做错了什么的任何想法？上面的代码不会填充“ref”字段。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T18:08:02.440

正如@WiredPrairie 上面的评论所示，`ref`应该是一个数组，而不是像您在架构中定义的对象。但是，由于`ref`是 url（字符串）的简单集合，因此每个都不需要`url`属性，因此不需要是对象。

此外，您可能会发现创建数组对您更有效，因为使用[$in 运算符](http://docs.mongodb.org/manual/reference/operator/in/)`keyw`根据关键字查找文档会更容易。

试试这个架构：

```
{
    name: {type:String, required: true},
    keyw: {type:Array, required: true},
    data: {type:String, required: true},
    ref: []
} 
```

而这段代码

```
var lib = new db.Library({
    name: b.topic,
    keyw: b.keywords.split(','),
    data: b.data,
    ref: arrRef
}) 
```

由于这是一个**新**文档，因此您不需要`$addToSet`. **更新**时使用该运算符。

# magento - Magento Admin 后端不保存

> ID：15864707
> 
> 赞同：0
> 
> 时间：2013-04-07T16:25:33.217
> 
> 标签：magento

有 2 个属性，可见性和税收等级，无论如何都不会保存。

我已禁用缓存，清除缓存，刷新缓存。删除了 var/cache 中的内容，但无济于事。

以前有没有人遇到过这个问题，或者任何人都可以指出我调试的正确方向吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T20:16:02.260

这听起来像是您试图保存产品。我将采取的步骤是：

1）检查您是否使用平面表结构。

2) 检查您的索引，看看它们是否需要重建。系统 -> 索引管理

3）将magento置于开发者模式。SetEnv MAGE_IS_DEVELOPER_MODE 在您的 apache 配置中。

4) 在 php.ini 中启用更多 PHP 错误报告（将错误报告设置为 ALL。）

您是否安装了任何可能影响这些设置的模块？

# pandas - 如何检查系列中的值是否包含在定义 DataFrame 行的任何间隔中？

> ID：15864710
> 
> 赞同：1
> 
> 时间：2013-04-07T16:25:52.560
> 
> 标签：pandas, vectorization

我意识到我的标题有点混乱，但我想如果我们继续举例，我可以更清楚地说明。我想要做的是一个矢量化测试，以检查给定系列中的任何值是否包含在由具有`start`和`stop`列的 DataFrame 对象定义的任何间隔中。

考虑系列，`valid`，它是名为 的 DataFrame 的列`trials`。这是`trials`看起来的样子：

```
<class 'pandas.core.frame.DataFrame'>
Int64Index: 156 entries, 0 to 155
Data columns (total 3 columns):
start    156  non-null values
stop     156  non-null values
valid    156  non-null values
dtypes: bool(1), float64(2) 
```

我有一个名为“blink”的单独数据框。它有三列：

```
<class 'pandas.core.frame.DataFrame'>
Int64Index: 41 entries, 0 to 40
Data columns (total 3 columns):
tstart    41  non-null values
tstop     41  non-null values
dur       41  non-null values
dtypes: bool(1), float64(2) 
```

`tstop`最后一列没有直接关系：它是眼球的持续时间，即和之间的差异`tstart`。

如果每行之间的间隔对应于与**任何**`trials['valid']`to间隔重叠，我想设置每一行。`False``trials['start']``trials['stop']`**`blink['tstart']``blink['tstop']`**

 **我*可以*遍历行并`np.arange`与`in`运算符一起在嵌套循环中执行此操作，但实际上需要数小时（我的实际数据集比这个虚拟示例大得多）。我可以使用矢量化方法吗？如果没有，是否有更快的基于迭代的方法？

如果有任何不清楚的地方，我当然很乐意提供更多细节。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T17:39:23.080

你的眨眼数据

```
In [27]: blink = pd.DataFrame(dict(tstart = [0,10], tstop = [5,15]))

In [28]: blink_s = blink.stack()

In [29]: blink_s.index = [ "%s_%s" % (v,i) for i, v in blink_s.index ] 
```

构建一系列眨眼（有点像旋转），但我们需要新的名字

```
In [37]: blink_s
Out[37]: 
tstart_0     0
tstop_0      5
tstart_1    10
tstop_1     15 
```

试验数据

```
In [30]: trial = pd.DataFrame(dict(start = [3,7,12],stop=[4,10,16])) 
```

将 blink_s 平铺在试验的各行中

```
In [32]: blink_df = pd.DataFrame([ blink_s for i in trial.index ]) 
```

加入他们

```
In [33]: x = trial.join(blink_df)

In [34]: x
Out[34]: 
   start  stop  tstart_0  tstop_0  tstart_1  tstop_1
0      3     4         0        5        10       15
1      7    10         0        5        10       15
2     12    16         0        5        10       15 
```

你的答案就是一个向量化的布尔表达式（这可能是一个很长的表达式，所以你应该以编程方式生成它，但这样做并不复杂）

```
In [35]: x['valid'] = ((x.start>x.tstart_0) & (x.stop<=x.tstop_0)) | ((x.start>x.tstart_1)&(x.stop<=x.tstop_1))

In [36]: x
Out[36]: 
   start  stop  tstart_0  tstop_0  tstart_1  tstop_1  valid
0      3     4         0        5        10       15   True
1      7    10         0        5        10       15  False
2     12    16         0        5        10       15  False 
```

如果您想将浮点数据作为您的 tstart/tstop 标准，这将起作用。如果您将间隔限制为仅 int 数据，那么解决方案会更简单一些，因为您可以只创建一系列包含的值（如 blink_s），然后执行`isin`.

从本质上讲，您是将闪烁框架展平为一系列，然后您可以将其应用于每个试验

使用 Isin（和 OP 数据）：

转换为 int64 数据

```
trial = pd.load('trials.pickle').reindex(columns=['start','stop']).astype('int64')
blink = pd.load('blink.pickle').astype('int64') 
```

添加一行，我们知道是 ni 范围

```
trial = trial.append(pd.Series(dict(start=1000,stop=1200)),ignore_index=True) 
```

构造我们要测试的值的范围

```
selections = []
for r in blink.iterrows():
    e = r[1]
    selections.extend(list(np.arange(e['tstart'],e['tstop'])))
selections = pd.Series(selections) 
```

如果传递的开始/停止在选择范围内，则返回 true

```
def f(s):
    return s.isin(selections).all()
trial['valid'] = trial.apply(f,axis=1)

trial[trial.valid] 
```

我插入了我知道会通过的 1 行，没有其他行通过

```
 start  stop valid
156   1000  1200  True 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T18:41:49.943

假设 is 的大小和is`trials`的`m`大小。`blink``n`

`blink`首先，在你检查每一行`tstart`之前排序`trials`，合并重叠的，它需要`O(n log n)`，看看[这个](https://stackoverflow.com/questions/4542892/possible-interview-question-how-to-find-all-overlapping-intervals)

在检查启动/停止对是否有效时，请遵循以下算法。

1.  使用二分查找在排序后插入开始`tstarts`
2.  使用二分查找在排序后插入停止`tstarts`
3.  如果`tstart`start 和 stop 之间有任何，则返回 True
4.  找到开始之前的那个，找到它`tstop`，如果它们与开始/停止对重叠，则返回 True
5.  返回假

上述算法可能会帮助您降低时间复杂度，以检查一对是否`start/stop`与任何对重叠`blink`或不重叠`O(n)`，`O(log n)`其中 n 是`blink`

时间复杂度将从 降低`O(mn)`到`O(m log n) + O(n log n)`。如果`m >> log n`和`n`很大，那可能对您有很大帮助。**

# jquery - 检查对象是否在 jquery 中定义以避免错误

> ID：15864715
> 
> 赞同：0
> 
> 时间：2013-04-07T16:26:33.807
> 
> 标签：jquery

如果有一个名为（id）“ABC123”的对象，我想自动向下滚动到该对象。如果此对象存在，则效果很好。但如果不是，我会收到一个错误： **“TypeError: $(...).offset(...) is undefined”**

我的代码应该避免这个错误，但不起作用：

```
if(typeof($('#ABC123')) != 'undefined') {
        $('html, body').animate({ scrollTop: ($("#ABC123").offset().top-100) }, 0).scroll();
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-07T16:27:06.233

jQuery 集合永远不会`undefined`.

只需测试它不是空的：

```
if ($('#ABC123').length) { 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T16:32:34.417

一个 jQuery 对象永远不会是`null`or `undefined`，即使你没有传递任何参数`$()`，在这种情况下它只是空的并且什么也不做。

似乎您想检查它是否为空：

```
if ($('#ABC123').length) {
    $('html, body').animate({ scrollTop: ($("#ABC123").offset().top-100) }, 0).scroll();
}); 
```

# c#-4.0 - 按收获周对行进行分组并在 C# 中获得总和

> ID：15864716
> 
> 赞同：0
> 
> 时间：2013-04-07T16:26:52.450
> 
> 标签：c#-4.0

我在 C# 中有一个包含以下数据的列表，

列表的结构是，

```
HarvestWeekDate   HarvestDate    Quantity
1/2/2012          1/2/2012       100
1/2/2012          1/2/2012       100
1/2/2012          1/3/2012       100
1/2/2012          1/4/2012       100
1/2/2012          1/5/2012       100
1/2/2012          1/6/2012       100
1/2/2012          1/6/2012       100

1/9/2012          1/9/2012       100
1/9/2012          1/10/2012       100
1/9/2012          1/10/2012       100
1/9/2012          1/11/2012       100
1/9/2012          1/12/2012       100
1/9/2012          1/13/2012       100
1/9/2012          1/13/2012       100 
```

我想按收获周日期分组，然后从收获周组中获取不同的收获日期，然后按不同的收获日期将收获周的数量相加。

谢谢和问候，费萨尔·纳西尔

* * *

有什么方法可以使用 Lambda Expression 来实现吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T17:40:06.433

假设您的列表被命名为 HarvestData，这里是一个 LINQ 查询，它将为您提供您正在寻找的结果：

```
var groupedData = (from d in harvestData
                   group d by new { 
                        HarvestWeekDate = d.HarvestWeekDate, 
                        HarvestDate = d.HarvestDate } into g
                   select new { 
                      HarvestWeekDate = g.Key.HarvestWeekDate, 
                      HarvestDate = g.Key.HarvestDate, 
                      TotalQuantity = g.Sum (w => w.Quantity) }
                  ); 
```

我建议查看[101 LINQ Samples](http://code.msdn.microsoft.com/101-LINQ-Samples-3fb9811b)以了解更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T17:22:54.480

如果通过“Lambda 表达式”，您的意思是 Linq 扩展方法：

```
var groupedData = harvestData.GroupBy (d => new { d.HarvestDate, d.HarvestWeekDate })
                             .Select  (g => new { HarvestWeekDate = g.Key.HarvestWeekDate, 
                                                  HarvestDate = g.Key.HarvestDate, 
                                                  TotalQuantity = g.Sum (w => w.Quantity) }); 
```

# java - 等待和通知的顺序

> ID：15864726
> 
> 赞同：0
> 
> 时间：2013-04-07T16:27:45.397
> 
> 标签：java, wait, notify

我希望快速提问。如果我在 Java 中的一个对象中调用 notify，是否保证在我调用 notify 后不会唤醒任何等待（严格）的线程。或者换句话说，只通知唤醒已经在等待的线程。据推测，`notifyAll`将以相同的方式表现。

例如，如果保证不成立，则可能按以下顺序：

1.  线程N获取锁，调用notify，释放锁。
2.  线程 W 获得锁，调用 wait 并释放锁。
3.  线程 W 被线程 N 的通知唤醒并继续......

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T16:38:25.667

当您调用通知时，正在等待的线程之一（如果有）将被唤醒。当前未等待该对象的线程无法被唤醒，并且尚未等待的线程（但稍后将等待）也无法唤醒（显然）。

如果您调用 notifyAll 那么您将唤醒当前等待的所有线程。

[我建议您在这里](http://docs.oracle.com/javase/tutorial/essential/concurrency/guardmeth.html)阅读有关命中的信息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T16:38:26.693

好吧，`notify()`方法的javadocs清楚地指出它：

> 唤醒正在此对象的监视器上等待**的单个线程。**

同样的事情`notifyAll()`：

> 唤醒正在此对象的监视器上等待的**所有线程。**

为了被放入等待线程队列中，线程必须首先获得对象的锁，然后释放它，只有这样其他线程才能获得锁并调用`notify()`。

所以我想你不必担心。

# ios - iCloud 和配置文件中缺少 ubiquity-kvstore-identifier

> ID：15864727
> 
> 赞同：0
> 
> 时间：2013-04-07T16:27:45.800
> 
> 标签：ios, icloud

我试图在我的应用程序上测试 iCloud 以进行调试。

我无法让它在我的 iPad 上运行，据我了解，问题是我的权利文件中没有 ubiquity-kvstore-identifier。但是 .entitlements 文件中的权利字典必须与配置文件中的权利字典完全匹配（您使用“ **security cms -D -i** ”命令看到的那个）。

当我尝试使用该服务时，出现错误：

**NSUbiquitousKeyValueStore 错误：[bundle-id] 没有有效的 com.apple.developer.ubiquity-kvstore-identifier 权利**

我在配置文件管理器中为我的调试配置文件和生产启用了 iCloud（选中了 iCloud 框）。

我已经删除了 xcode 中的配置文件并重新下载了它们（使用刷新功能）。

如果我手动将标识符添加到 .entitlements 文件中，它会抱怨权利与配置文件中的权利不匹配。

我使用模拟器没有收到错误，但我想这是因为模拟器没有进行与使用实际设备相同的证书检查？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-07T16:51:56.160

您无法在模拟器上测试 iCloud。你已经测试了它的实际设备。

# applescript - Applescript：打开位置，多个单词不起作用

> ID：15864728
> 
> 赞同：0
> 
> 时间：2013-04-07T16:27:53.863
> 
> 标签：applescript

我正在尝试制作一个可以为您进行谷歌搜索的脚本，但如果我进行多个单词搜索，它就不起作用。有人知道怎么修这个东西吗？

```
set keyword to text returned of (display dialog "Enter Search Query" default answer "")
display dialog "Enter Search Query" buttons {"Cancel", "Ok"} default button 2
if the button returned of the result is "Ok" then
    open location "http://search.yahoo.com/search?p=" & keyword
end if 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T05:50:32.393

您还必须转义特殊字符，如 % 和 &。并且`open location`不适用于包含一些非 ASCII 字符的 URL：

```
open location "http://ja.wikipedia.org/wiki/漢字" 
```

您可以[使用 shell 进行 url 编码](https://stackoverflow.com/questions/296536/urlencode-from-a-bash-script)：

`do shell script "open http://ja.wikipedia.org/wiki/$(ruby -rcgi -e 'print CGI.escape(ARGV[0])' " & quoted form of "字%'\\&" & ")"`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T16:55:14.580

您只需要考虑空间并将其/它们转换为“%20”

```
set aSpace to "%20"
    display dialog "Enter Search Query" default answer "" buttons {"Cancel", "Ok"} default button 2
    copy the result as list to {text_returned, button_pressed}
    set t to words of text_returned

    if the button_pressed is "Ok" then

        open location "http://search.yahoo.com/search?p=" & encode(text_returned, space, aSpace)
    end if

    on encode(x, y, z)
        tid(y)
        set x to text items of x
        tid(z)
        return x as string
    end encode

    on tid(x)
        set AppleScript's text item delimiters to x
    end tid 
```

编码代码来自[这里](http://www.mentby.com/Group/applescript-users/how-to-convert-space-to-20.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T11:44:01.147

当您只能打开一个对话框时，您会打开两个对话框：

```
set myDialog to display dialog "Enter Search Query" default answer "" buttons {"Cancel", "Ok"} default button 2
set keyword to text returned of myDialog
if the button returned of myDialog is "Ok" then open location "http://search.yahoo.com/search?p=" & keyword 
```

我不明白你对多次搜索不起作用的意思。对我来说，如果您在对话框中输入以空格分隔的多个单词，它就可以正常工作。

# c# - 使用套接字从 C# 应用程序向 Lua 应用程序发送数据

> ID：15864735
> 
> 赞同：1
> 
> 时间：2013-04-07T16:28:28.103
> 
> 标签：c#, wpf, sockets, lua

我的 C# 应用程序中的这个函数会将字母 U 发送到另一台 PC 上的 lua 应用程序：

```
private void drive_Click(object sender, RoutedEventArgs e)
{
    Socket soc = new Socket(AddressFamily.InterNetwork, SocketType.Stream, ProtocolType.Tcp);
    System.Net.IPAddress ipAddress = System.Net.IPAddress.Parse("192.168.1.180");
    IPEndPoint remote = new IPEndPoint(ipAddress, 1337);
    soc.Connect(remote);

    byte[] commands = System.Text.Encoding.ASCII.GetBytes("U");
    soc.Send(commands);
} 
```

这是 lua 中的小脚本，它将接收来自 C# 应用程序的命令并将它们写入串行（它工作正常，我通过使用 netcat 发送字符进行了尝试，一切正常。）

```
local socket = require("socket")
local server = assert(socket.bind("*", 1337))

wserial=io.open("/dev/ttyATH0","w")

while 1 do
  local client = server:accept()
  client:settimeout(10)

  local line, err = client:receive()

  if not err then client:
    wserial:write(line)
  end

  wserial:flush()
  client:close()
end 
```

我究竟做错了什么？我没有收到任何数据...

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T19:27:12.647

好的，答案是将我在 C# 中的代码更改为以下内容：

```
TcpClient tcp = new TcpClient("192.168.1.4", 1337);
string cmd = "U\n";
byte[] buf = System.Text.ASCIIEncoding.ASCII.GetBytes(cmd.Replace("\0xFF", "\0xFF\0xFF"));            
tcp.GetStream().Write(buf, 0, buf.Length); 
```

谨防

```
string cmd = "U\n"; 
```

您必须添加换行符，否则它将不起作用。

# vim - vim如何快速显示同一目录下的文件

> ID：15864741
> 
> 赞同：0
> 
> 时间：2013-04-07T16:28:50.947
> 
> 标签：vim

我在目录 A 中打开了一个文件并完成了编辑。接下来我需要在同一目录（A）中打开另一个文件并显示在缓冲区中。目前我必须输入 :e 目录 A，这真的很乏味。有没有办法快速导航到当前目录的文件？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T16:33:48.943

如果您不想安装任何插件，您可以：

```
:cd %:p:h 
```

如果你有`set autochdir`，`.vimrc`你可以保存上面的行。

然后

```
:Sex 
```

要打开（netrw）当前目录下的文件列表，您可以在该拆分窗口中打开文件。

这个命令可能很容易记住。:)

如果您不想有任何拆分窗口，您可以键入：

`:Ex`

详情请查看：

```
:h :Explore 
```

这将在当前窗口中打开目录/文件列表。

如果安装插件也适合您。

您可以查看一些插件，例如：

```
NERDTree 
```

或者

```
CtrlP 
```

# sql-server-2008 - SQL Server 群集 VIP 流量

> ID：15864742
> 
> 赞同：0
> 
> 时间：2013-04-07T16:28:55.350
> 
> 标签：sql-server-2008

我在 SO 和 Google 上搜索过答案，但我找不到。我不知道我的查询是否正确。SO 上最接近的一个是这个[How to Monitor SQL Server Network Traffic](https://stackoverflow.com/questions/5840436/how-to-monitor-sql-server-network-traffic)。

这是场景，我有一个 SQL Server 2008 集群以及 SQL Server 实例的虚拟 IP 和名称。客户端使用 VIP 连接到集群中的 SQL 实例。

一切正常，除了偶尔一些客户端在尝试连接到 SQL Server 实例时看到超时（每天 3-4 次）。那时我认为我将监控此类客户端节点之一与集群之间的流量。当我看到集群和客户端之间的网络流量时，我看到数据包在客户端 IP 和 SQL Server 当前运行的节点的 IP（不是 VIP）之间传输。我的理解是，如果我在客户端监控流量，我应该看到客户端 IP 和 VIP 之间的流量，而不是客户端 IP 和运行 SQL Server 的集群中实际节点的 IP。我错过了什么吗？谢谢。

# java - 何时创建以编程方式添加的片段视图？

> ID：15864743
> 
> 赞同：0
> 
> 时间：2013-04-07T16:28:59.687
> 
> 标签：java, android, android-fragments

我有一个`FragmentActivity`我添加一个`ListFragment`到 using的`FragmentTrasaction`. 一切都很好，但是我在尝试设置 中的 时遇到了“未创建内容视图”错误 ，`onItemClickListener`如下所示：`ListView``ListFragment`

```
public class ContactList extends FragmentActivity implements
    LoaderManager.LoaderCallbacks<Cursor>, OnItemClickListener {

static private final String TAG = ContactList.class.getSimpleName();

private SimpleCursorAdapter mListAdapter;
ListFragment mListFrag;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

     mListFrag = new ListFragment();

    if (savedInstanceState == null) {
        // add list view fragment
        FragmentTransaction ft = getSupportFragmentManager()
                .beginTransaction();
        ft.add(android.R.id.content, mListFrag);
        ft.commit();
    }

    // set up list view adapter:
    mListAdapter = new SimpleCursorAdapter(this,
            android.R.layout.simple_list_item_1, null,
            new String[] { ContactsContract.Contacts.DISPLAY_NAME },
            new int[] { android.R.id.text1 },
            SimpleCursorAdapter.NO_SELECTION);

    // (we will switch in the cursor later)
    mListFrag.setListAdapter(mListAdapter);

    // set list view click listener:
    // (THIS LINE, I KNOW NOW, CAUSES PROBLEMS - SO I MOVED IT
    //  TO onCreateView):
    //mListFrag.getListView().setOnItemClickListener(this);

    // initial cursor loader:
    getSupportLoaderManager().initLoader(0, null, this);
} 
```

我很快意识到我正在尝试调用`getListView`该`onCreate`方法，因此`ListView`尚未显示。所以，我把`setOnItemClickListener`线移到`onCreateView`：

```
@Override
public View onCreateView(String name, Context context, AttributeSet attrs) {
    View v = super.onCreateView(name, context, attrs);

    // set list view click listener:
    mListFrag.getListView().setOnItemClickListener(this); // this still crashes

    return v;
} 
```

不幸的是，这仍然会因“尚未创建内容视图”错误而崩溃。我不明白这一点 - 在调用`super.onCreateView`所有视图之后肯定现在应该已经创建了吗？

我终于`inItemClickListener`通过将它放在“onResume()”上来工作，但我不知道为什么它在`onCreateView`.

任何人都可以启发我吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T17:51:11.053

`Fragment`s 有自己的生命周期，我记得你不能`Fragment`在包含`FragmentActivity`（或任何其他`Activity`）内的默认生命周期事件上设置侦听器。因此，如果您使用默认的`ListFragment`.

> 我终于通过将 inItemClickListener 放在“onResume()”上来工作，但我不知道为什么它在 onCreateView 中不起作用。

这可能对您有用，但也不安全，因为它不知道 Fragment 的生命周期状态。

这里的默认/最佳实践如下：编写你自己的 Fragment 类，让它扩展`ListFragment`并将 onClick 逻辑放在你的 Fragment 的[`onListItemClick()`](http://developer.android.com/reference/android/app/ListFragment.html#onListItemClick%28android.widget.ListView,%20android.view.View,%20int,%20long%29)方法中。

**背景：**
在 Fragment 的 UI 事件上设置任何侦听器都应该发生在 Fragment 本身内部，而不是在包含的 Activity 中。这就是引入 Fragment 的原因之一：提供可以组合和重用的大部分独立组件（具有自己的生命周期）。否则，您可以只使用`ListActivity`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T16:34:50.010

[OnCreateView](http://developer.android.com/reference/android/support/v4/app/FragmentActivity.html#onCreateView%28java.lang.String,%20android.content.Context,%20android.util.AttributeSet%29)创建一个视图，使其在返回后可用，但在执行之前或执行期间不可用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T17:45:32.867

[只需](http://developer.android.com/reference/android/app/FragmentManager.html#executePendingTransactions%28%29)`ft.commit`调用`getSupportFragmentManager().executePendingTransactions();`（executePendingTransactions ）。

这会强制系统立即执行`ft.commit`默认情况下仅计划执行的操作。

之后，您的 ListView 应该可以被访问以定义`OnClickListener`（在您的内部`FragmentActivity`）

# c# - 在WPF中设置网格中元素的行/列位置时的滑动效果

> ID：15864745
> 
> 赞同：0
> 
> 时间：2013-04-07T16:29:04.960
> 
> 标签：c#, wpf, animation, grid, slide

我正在以编程方式更改`row/column`应用程序中某些元素的位置。我想知道`slide`在做这个改变的事情时是否可以添加任何效果，等等。如果是，那么如何？切换看起来不太好，因此需要某种`slider`效果。

谢谢你。

# java - Java中抽象类的问题

> ID：15864748
> 
> 赞同：0
> 
> 时间：2013-04-07T16:29:16.913
> 
> 标签：java, abstract-class

我正在为一堂课编写程序。当我运行程序时，alphabet 的值永远不会保持不变，并且当我在我的子类中使用 toString() 时，alphabet 始终为空。我知道在第二个构造函数中 this.alphabet 等于我希望它等于但之后它失去了它的价值。奇怪的是 machineName 保持它的价值。我对 java 和 stackoverflow 还是很陌生，所以如果我做了一些愚蠢的事情，我很抱歉。我也不能改变我只能实现它的方法或变量。

```
public abstract class AbstractDFA{

private String machineName;
private String alphabet;   

public AbstractDFA(String nameofmachine)
{      
  StringBuilder b = new StringBuilder();
  for (int i = 0; nameofmachine.charAt(i) != '.'; i++)
  {
    b.append(nameofmachine.charAt(i));
  }
  machineName = b.toString();

}

public AbstractDFA(String nameofmachine, String alphabet)
{
  this.alphabet = alphabet;
  this.machineName = nameofmachine;
  setAlphabet(this.alphabet);
}

public String toString()
{
  return "Machine Name: " + machineName + "\nAlphabet: " + getAlphabet();;  
}

public void setAlphabet(String alpha)
{
  StringBuilder beta = new StringBuilder();
  beta.append("{");
  for (int i = 0; i < alpha.length(); i++)
  {
    beta.append(alpha.charAt(i));
    if (i != (alpha.length() - 1))
    {
      beta.append(", ");
    }
  }
  beta.append("}");
  alphabet = beta.toString();
}

public String getAlphabet()
{
  return alphabet;
}
} 
```

公共类 DFA 扩展 AbstractDFA{

```
public DFA(String fileName){
  super(fileName);
  readDFA(fileName);
}

public DFA(String name, String alpha, int numStates, int start, int[][] delta, boolean[] finalstates){
  super(name,alpha);
  this.numberOfStates = numStates;
  this.start = start;
  this.delta = delta;
  this.finalStates = finalstates;
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T16:32:59.273

```
this.alphabet = alphabet;
setAlphabet(this.alphabet); 
```

`this.alphabet`如果您无论如何都要覆盖该字段，那么第一次分配的目的是什么`setAlphabet`？只是这个：

```
public AbstractDFA(String nameofmachine, String alphabet)
{
  this.machineName = nameofmachine;
  setAlphabet(alphabet);
} 
```

会清楚得多。

如果您`this.alphabet`在第一行之后但在调用 之前检查 的值`setAlphabet`，那么很可能`setAlphabet`根本无法按您希望的方式工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T16:35:38.263

您的抽象类有两个构造函数，第一个不调用 setAlphabet() 方法。

# asp.net-mvc - 需要唯一的电子邮件和用户名

> ID：15864749
> 
> 赞同：0
> 
> 时间：2013-04-07T16:29:17.670
> 
> 标签：asp.net-mvc, asp.net-mvc-4, simplemembership

在 ASP.net MVC 4 中使用 SimpleMembership 很容易要求用户输入唯一的用户名 - 或将其换成唯一的电子邮件。

但是 - 注册时要求唯一用户名和电子邮件的最简单方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T19:48:50.480

向您的数据库添加唯一约束将是最简单的方法。您可以在数据库初始化中调用 SQL 脚本。

* * *

还有一件事。在注册之前，您可以通过电子邮件和用户名获取用户，并自己检查此逻辑。但是为此您必须自己查询数据库，因为 SimpleMembership 没有这样的功能。

**更新** 如果您使用.NET 4.5，您可以使用：http: [//msdn.microsoft.com/pl-pl/library/system.web.security.membershipprovider.requiresuniqueemail.aspx](http://msdn.microsoft.com/pl-pl/library/system.web.security.membershipprovider.requiresuniqueemail.aspx)

所以你的 web.config 看起来像

```
<membership>
  <providers>
    <add name="SimpleMembershipProvider" 
         type="whatever your assembly name is"
         ... 
         requiresUniqueEmail="true"/> 
```

# jquery - 选择选项时 jQuery 显示文本框

> ID：15864750
> 
> 赞同：0
> 
> 时间：2013-04-07T16:29:26.077
> 
> 标签：jquery, html

我希望能够在选择某个值时显示适当的文本框。我将不胜感激任何帮助。

```
JQUERY 
$('#enterdatabox').change(function() {
var selected = $(this).val();
  $('#' + selected).css('display', selected ? 'block' : 'none');
});

HTML
<select name="enterdatabox" id="enterdatabox">
      <option value="">Please Choose...</option>
      <option value="option1">Option 1</option>
      <option value="option2">Option 2</option>
      <option value="option3">Option 3</option>
      <option value="option4">Option 4</option>
      <option value="option5">Option 5</option>
      <option value="option6">Option 6</option>
      <option value="option7">Option 7</option>
      <option value="option8">Option 8</option>
</select>

<input type="text" id="option1" style="display: none;" />
<input type="text" id="option2" style="display: none;" />
<input type="text" id="option3" style="display: none;" />
<input type="text" id="option4" style="display: none;" />
<input type="text" id="option5" style="display: none;" />
<input type="text" id="option6" style="display: none;" />
<input type="text" id="option7" style="display: none;" />
<input type="text" id="option8" style="display: none;" /> 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-07T16:34:41.870

您的代码很好，但问题可能是您在元素存在`.change`之前绑定。`#enterdatabox`有三个简单的解决方案：

1.  将 JavaScript 代码移到 HTML*之后*
2.  将 JavaScript 代码包装在`$(document).ready(function () {}`
3.  使用事件委托，例如`$(document).on('change, '#enterdatabox', function () {`

第一个可能是最简单的。

* * *

顺便说一句，您可以通过删除所有 id 并将其包装`<input>`在 div 中并使用比较来使此代码更简单`.index()`

# python - google app engine python：如何在没有代理服务器的情况下验证电子邮件地址？

> ID：15864755
> 
> 赞同：0
> 
> 时间：2013-04-07T16:29:47.107
> 
> 标签：python, google-app-engine, smtplib

尝试创建电子邮件验证而不使用此链接中的 stmplib 发送电子邮件

[http://www.webdigi.co.uk/blog/2009/how-to-check-if-an-email-address-exists-without-sending-an-email/](http://www.webdigi.co.uk/blog/2009/how-to-check-if-an-email-address-exists-without-sending-an-email/)

由于我还没有编写任何代码并试图了解发生了什么。

看来您必须使用其中一种付费代理服务器，例如 mailgun。（如我错了请纠正我）

还有其他方法可以验证电子邮件地址吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T15:02:23.877

GAE 尚不支持此方法。所描述的方法要求您连接到 SMTP 服务器并询问服务器电子邮件地址是否存在。这需要 GAE 上的出站套接字支持，[目前尚不可用](https://developers.google.com/appengine/docs/features)（除非您通过他们的[受信任的测试程序](https://docs.google.com/a/google.com/spreadsheet/viewform?formkey=dF9QR3pnQ2pNa0dqalViSTZoenVkcHc6MQ#gid=0)接受）。您需要出站套接字支持才能在域上执行 DNS 查找查询以连接到 SMTP 服务器，以及实际连接到 SMTP 服务器。

您还应该意识到此方法不适用于所有 SMTP 服务器实现。某些服务器可能不会响应这些类型的请求。

我认为现在您必须推出自己的实现以通过 HTTP 工作，或者为可以为您执行此操作的服务付费。

**更新：**

从 1.7.7 SDK 开始，[Sockets API](https://developers.google.com/appengine/docs/python/sockets/overview)已经发布为实验状态。尽管他们明确禁止连接到传出套接字上的端口 25 (smtp)。这将极大地禁止您可以连接到多少个 SMTP 服务器（通过端口 587）来验证给定的电子邮件地址。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T14:10:09.680

使用的方法可以使用此 python 代码实现，您需要安装 dnspython 并调用 verify_mail(mail)

```
import re
import smtplib
import dns.resolver # from http://www.dnspython.org/

def get_mx(domain):
    for x in dns.resolver.query(domain, 'MX'):
        return x.to_text().split()[1].strip('.')

def verify_mail(mail):
    domain=re.findall('@(.*)', mail)[0]
    mx=get_mx(domain)
    smtp=smtplib.SMTP(mx)
    i,m=smtp.connect(mx)
    i,m=smtp.helo()
    i,m=smtp.verify(target)
    if i==250: return True
    else:
        i,m=smtp.mail('myemail@gmail.com')
        i,m=smtp.rcpt(target)
        if i==250: return True
        else: return False

if __name__=='__main__':
    print verify_mail('banana@yahoo.com') 
```

# node.js - 关闭node.js？

> ID：15864756
> 
> 赞同：-1
> 
> 时间：2013-04-07T16:29:47.347
> 
> 标签：node.js

我在我的**在线**（非本地）服务器上创建了一个 app.js，然后在终端中进行了 ssh：

```
$ node app.js 
```

这使我的应用程序上线。现在我想通过上传新版本的 app.js 来更新我的代码，但我不能再修改替换它，因为它正在被节点使用（550 /public_html/foo/app.js：权限被拒绝）......怎么办我停止节点？pkill 节点不起作用，如另一个线程中所示。基本上我在安装**express**后启动了我的应用程序，然后当它运行时我安装了**socket.io**我不确定现在发生了什么。

- - -更新

```
[root@vps ~]# ps r
  PID TTY      STAT   TIME COMMAND
19350 pts/0    R+     0:00 ps r
[root@vps ~]# kill 19350 PID
-bash: kill: (19350) - No such process
-bash: kill: PID: arguments must be process or job IDs
[root@vps ~]# ps
  PID TTY          TIME CMD
 8987 pts/0    00:00:00 bash
19505 pts/0    00:00:00 ps
[root@vps ~]# ps aux | grep node
root     19551  0.0  0.0   7216   812 pts/0    S+   15:38   0:00 grep node
[root@vps ~]# kill -2 PID
-bash: kill: PID: arguments must be process or job IDs
[root@vps ~]# kill -0 PID
-bash: kill: PID: arguments must be process or job IDs
[root@vps ~]# kill 0 PID
-bash: kill: PID: arguments must be process or job IDs
[root@vps ~]# kill 19551 PID
-bash: kill: (19551) - No such process
-bash: kill: PID: arguments must be process or job IDs
[root@vps ~]# kill PID
-bash: kill: PID: arguments must be process or job IDs
[root@vps ~]# ps node
ERROR: Unknown user-defined format specifier "de".
********* simple selection *********  ********* selection by list *********
-A all processes                      -C by command name
-N negate selection                   -G by real group ID (supports names)
-a all w/ tty except session leaders  -U by real user ID (supports names)
-d all except session leaders         -g by session OR by effective group name
-e all processes                      -p by process ID
T  all processes on this terminal     -s processes in the sessions given
a  all w/ tty, including other users  -t by tty
g  OBSOLETE -- DO NOT USE             -u by effective user ID (supports names)
r  only running processes             U  processes for specified users
x  processes w/o controlling ttys     t  by tty
*********** output format **********  *********** long options ***********
-o,o user-defined  -f full            --Group --User --pid --cols --ppid
-j,j job control   s  signal          --group --user --sid --rows --info
-O,O preloaded -o  v  virtual memory  --cumulative --format --deselect
-l,l long          u  user-oriented   --sort --tty --forest --version
-F   extra full    X  registers       --heading --no-heading --context
                    ********* misc options *********
-V,V  show version      L  list format codes  f  ASCII art forest
-m,m,-L,-T,H  threads   S  children in sum    -y change -l format
-M,Z  security data     c  true command name  -c scheduling class
-w,w  wide output       n  numeric WCHAN,UID  -H process hierarchy
[root@vps ~]# ps -A
  PID TTY          TIME CMD
    1 ?        00:00:01 init
    2 ?        00:00:00 kthreadd/141
    3 ?        00:00:00 khelper/141
  100 ?        00:00:00 udevd
  477 ?        00:01:13 syslogd
  488 ?        00:00:00 sshd
  496 ?        00:00:00 xinetd
  542 ?        00:00:00 crond
  550 ?        00:00:00 saslauthd
  552 ?        00:00:00 saslauthd
 2348 ?        00:00:00 master
 2351 ?        00:00:00 qmgr
 3170 ?        00:00:00 mailmanctl
 3172 ?        00:00:22 python
 3173 ?        00:00:23 python
 3174 ?        00:00:22 python
 3175 ?        00:00:22 python
 3176 ?        00:00:22 python
 3177 ?        00:00:23 python
 3178 ?        00:00:22 python
 3179 ?        00:00:00 python
 3934 ?        00:00:58 clamd.virtualmi
 4209 ?        00:00:00 mysqld_safe
 4291 ?        00:00:40 mysqld
 4556 ?        00:00:07 perl
 4618 ?        00:00:00 lookup-domain-d
 5017 ?        00:00:02 proftpd
 5309 ?        00:03:48 named
 8985 ?        00:00:00 sshd
 8987 pts/0    00:00:00 bash
12463 ?        00:00:00 httpd
12464 ?        00:00:00 httpd
12909 ?        00:00:00 httpd
14474 ?        00:00:00 httpd
15616 ?        00:00:00 pickup
16609 ?        00:00:00 crond
16612 ?        00:00:00 freshclam-sleep
16615 ?        00:00:00 sleep
19668 ?        00:00:00 proftpd
20226 ?        00:00:00 sshd
20227 ?        00:00:00 sshd
20228 pts/0    00:00:00 ps
31970 ?        00:00:04 httpd
[root@vps ~]# ps r
  PID TTY      STAT   TIME COMMAND
20359 pts/0    R+     0:00 ps r
[root@vps ~]# ps r -C
ERROR: List of command names must follow -C.
[root@vps ~]# ps -H
  PID TTY          TIME CMD
 8987 pts/0    00:00:00 bash
20475 pts/0    00:00:00   ps
[root@vps ~]# kill -20475
-bash: kill: 20475: invalid signal specification
[root@vps ~]# kill 20475
-bash: kill: (20475) - No such process
[root@vps ~]# ps
  PID TTY          TIME CMD
 8987 pts/0    00:00:00 bash
20725 pts/0    00:00:00 ps
[root@vps ~]# ps ~/
ERROR: Garbage option.
    [root@vps ~]# ps
  PID TTY          TIME CMD
 8987 pts/0    00:00:00 bash
20745 pts/0    00:00:00 ps
[root@vps ~]# kill 20745
-bash: kill: (20745) - No such process
[root@vps ~]# ps node
ERROR: Unknown user-defined format specifier "de".
[root@vps ~]# ps aux | grep node
root     20909  0.0  0.0   7216   812 pts/0    S+   15:56   0:00 grep node
[root@vps ~]# kill poo
-bash: kill: poo: arguments must be process or job IDs
[root@vps ~]# kill -2  PID
-bash: kill: PID: arguments must be process or job IDs
[root@vps ~]# ps grep
ERROR: List of process IDs must follow p.
[root@vps ~]# kill grep node
-bash: kill: grep: arguments must be process or job IDs
-bash: kill: node: arguments must be process or job IDs
[root@vps ~]# ps grep node
ERROR: Process ID list syntax error.
[root@vps ~]# ps aux
USER       PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
root         1  0.0  0.0  10372   640 ?        Ss   Apr04   0:01 init [3]      
root         2  0.0  0.0      0     0 ?        S    Apr04   0:00 [kthreadd/141]
root         3  0.0  0.0      0     0 ?        S    Apr04   0:00 [khelper/141]
root       100  0.0  0.0  12640   384 ?        S<s  Apr04   0:00 /sbin/udevd -d
root       477  0.0  0.0   5932   612 ?        Ds   Apr04   1:13 syslogd -m 0
root       488  0.0  0.0  62688   740 ?        Ss   Apr04   0:00 /usr/sbin/sshd
root       496  0.0  0.0  21664   596 ?        Ss   Apr04   0:00 xinetd -stayali
root       542  0.0  0.0  19728  1168 ?        Ss   Apr04   0:00 crond
root       550  0.0  0.0  48860  1276 ?        Ss   Apr04   0:00 /usr/sbin/sasla
root       552  0.0  0.0  48860  1264 ?        S    Apr04   0:00 /usr/sbin/sasla
root      2348  0.0  0.1  60300  2592 ?        Ss   Apr04   0:00 /usr/libexec/po
postfix   2351  0.0  0.1  60432  2512 ?        S    Apr04   0:00 qmgr -l -t fifo
mailman   3170  0.0  0.3  94488  7948 ?        Ss   Apr04   0:00 /usr/bin/python
mailman   3172  0.0  0.5  96664 10544 ?        S    Apr04   0:22 /usr/bin/python
mailman   3173  0.0  0.5  96648 10588 ?        S    Apr04   0:23 /usr/bin/python
mailman   3174  0.0  0.5  96672 10564 ?        S    Apr04   0:22 /usr/bin/python
mailman   3175  0.0  0.5  96668 10540 ?        S    Apr04   0:22 /usr/bin/python
mailman   3176  0.0  0.5  96620 10600 ?        S    Apr04   0:22 /usr/bin/python
mailman   3177  0.0  0.5  96820 10804 ?        S    Apr04   0:24 /usr/bin/python
mailman   3178  0.0  0.5  96668 10692 ?        S    Apr04   0:22 /usr/bin/python
mailman   3179  0.0  0.5  96668 10552 ?        S    Apr04   0:00 /usr/bin/python
nobody    3934  0.0  9.2 251908 194992 ?       Ssl  Apr04   0:58 clamd.virtualmi
root      4209  0.0  0.0  10784  1304 ?        S    Apr04   0:00 /bin/sh /usr/bi
mysql     4291  0.0  4.4 610420 93176 ?        Sl   Apr04   0:40 /usr/libexec/my
root      4556  0.0  2.9 132268 61100 ?        Ss   Apr04   0:07 /usr/bin/perl /
root      4618  0.0  2.4  83428 51644 ?        Ss   Apr04   0:00 /usr/libexec/we
nobody    5017  0.0  0.1  51936  2412 ?        Ss   Apr04   0:02 proftpd: (accep
named     5309  0.0  0.2 154864  4780 ?        Ssl  Apr04   3:48 /usr/sbin/named
root      8985  0.0  0.1  86084  3396 ?        Ss   09:24   0:00 sshd: root@pts/
root      8987  0.0  0.0  12088  1704 pts/0    Ss   09:24   0:00 -bash
apache   12463  0.0  0.5 254352 11248 ?        S    01:29   0:00 /usr/sbin/httpd
apache   12464  0.0  0.7 337608 15328 ?        S    01:29   0:00 /usr/sbin/httpd
apache   12909  0.0  0.7 337596 15652 ?        S    01:47   0:00 /usr/sbin/httpd
apache   14474  0.0  0.7 337592 15344 ?        S    02:57   0:00 /usr/sbin/httpd
postfix  15616  0.0  0.1  60372  2540 ?        S    14:19   0:00 pickup -l -t fi
root     16609  0.0  0.0  44856  1476 ?        S    15:00   0:00 crond
root     16612  0.0  0.0   8688  1172 ?        Ss   15:00   0:00 /bin/bash /usr/
root     16615  0.0  0.0   3812   484 ?        S    15:00   0:00 sleep 9732
root     21104  0.0  0.1  84768  3220 ?        Ss   15:58   0:00 sshd: unknown [
sshd     21105  0.0  0.0  64032  1564 ?        S    15:58   0:00 sshd: unknown [
root     21106  0.0  0.0  10744  1008 pts/0    R+   15:58   0:00 ps aux
root     31970  0.0  1.1 337448 23804 ?        Ss   Apr04   0:04 /usr/sbin/httpd
[root@vps ~]# ps aux node
ERROR: Unknown user-defined format specifier "de".
[root@vps ~]# ps aux | node
[stdin]:1
USER       PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND        ^^^
SyntaxError: Unexpected identifier
    at Object.<anonymous> ([stdin]-wrapper:6:22)
    at Module._compile (module.js:456:26)
    at evalScript (node.js:532:25)
    at Socket.<anonymous> (node.js:154:11)
    at Socket.EventEmitter.emit (events.js:117:20)
    at _stream_readable.js:883:14
    at process._tickCallback (node.js:415:13)
[root@vps ~]# ps aux | g
-bash: g: command not found
[root@vps ~]# ps aux | r
-bash: r: command not found
[root@vps ~]# ps aux | r node
-bash: r: command not found
[root@vps ~]# ps auxr
USER       PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
root       477  0.0  0.0   5932   612 ?        Ds   Apr04   1:13 syslogd -m 0
root     21529  0.0  0.0  10744  1008 pts/0    R+   16:03   0:00 ps auxr
[root@vps ~]# ps aur
USER       PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
root     21755  0.0  0.0  10740   944 pts/0    R+   16:06   0:00 ps aur
[root@vps ~]# ps G
ERROR: Unsupported option (BSD syntax)
[root@vps ~]# ps -G
ERROR: List of real groups must follow -G.
[root@vps ~]# ps -G node
ERROR: Group name does not exist.
[root@vps ~]# kill app
-bash: kill: app: arguments must be process or job IDs
[root@vps ~]# kill app.js
-bash: kill: app.js: arguments must be process or job IDs
[root@vps ~]# ps grep node
ERROR: Process ID list syntax error.
[root@vps ~]# ps | grep node
[root@vps ~]# ps a | grep node
22021 pts/0    S+     0:00 grep node
[root@vps ~]# ps -p | grep node
ERROR: List of process IDs must follow -p.
[root@vps ~]# ps r | grep node
[root@vps ~]# ps t
  PID TTY      STAT   TIME COMMAND
 8987 pts/0    Ss     0:00 -bash
22241 pts/0    R+     0:00 ps t
[root@vps ~]# ps t | grep node
22265 pts/0    S+     0:00 grep node
[root@vps ~]# kill 22265
-bash: kill: (22265) - No such process
[root@vps ~]# kill ps | grep node
-bash: kill: ps: arguments must be process or job IDs
[root@vps ~]# ps l
F   UID   PID  PPID PRI  NI    VSZ   RSS WCHAN  STAT TTY        TIME COMMAND
4     0  8987  8985  20   0  12088  1708 wait   Ss   pts/0      0:00 -bash
4     0 22545  8987  20   0   8652   896 -      R+   pts/0      0:00 ps l
[root@vps ~]# ps l | grep node
0     0 22589  8987  20   0   7216   808 pipe_w S+   pts/0      0:00 grep node
[root@vps ~]# kill -22545 PID
-bash: kill: 22545: invalid signal specification
[root@vps ~]# ps r | grep node
[root@vps ~]# ps -r | grep node
Warning: bad syntax, perhaps a bogus '-'? See /usr/share/doc/procps-3.2.7/FAQ
[root@vps ~]# ps l
F   UID   PID  PPID PRI  NI    VSZ   RSS WCHAN  STAT TTY        TIME COMMAND
4     0  8987  8985  20   0  12088  1708 wait   Ss   pts/0      0:00 -bash
4     0 22718  8987  20   0   8652   900 -      R+   pts/0      0:00 ps l
[root@vps ~]# ps l
F   UID   PID  PPID PRI  NI    VSZ   RSS WCHAN  STAT TTY        TIME COMMAND
4     0  8987  8985  20   0  12088  1708 wait   Ss   pts/0      0:00 -bash
4     0 22743  8987  20   0   8652   900 -      R+   pts/0      0:00 ps l
[root@vps ~]# kill 8987 PPID
-bash: kill: PPID: arguments must be process or job IDs
[root@vps ~]# ps pl
ERROR: Process ID list syntax error.
[root@vps ~]# ps p
ERROR: List of process IDs must follow p.
[root@vps ~]# ps f
  PID TTY      STAT   TIME COMMAND
 8987 pts/0    Ss     0:00 -bash
22935 pts/0    R+     0:00  \_ ps f
[root@vps ~]# ps j
 PPID   PID  PGID   SID TTY      TPGID STAT   UID   TIME COMMAND
 8985  8987  8987  8987 pts/0    23076 Ss       0   0:00 -bash
 8987 23076 23076  8987 pts/0    23076 R+       0   0:00 ps j
[root@vps ~]# 
```

我不明白 PID 似乎每次都在变化

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T16:48:00.413

我建议您[`Upstart`](http://upstart.ubuntu.com)为您的节点应用程序创建一个脚本。如果这样做，您可以通过发出`start`,`stop`和`restart`命令来控制应用程序的生命周期。这样，您还可以将应用程序设置为在服务器启动时启动，如果应用程序意外终止，您还可以重新启动应用程序。有很多 nodejs 的 upstart 脚本示例，因此只需调整示例以适应您的环境即可。

# shell - 为什么 netcat 不转储响应？

> ID：15864757
> 
> 赞同：4
> 
> 时间：2013-04-07T16:29:58.347
> 
> 标签：shell, unix, redis, command-line-interface, netcat

```
$ cat mass_insert.txt 
*3
$3
SET
$4
key1
$6
value1
*3
$3
SET
$4
key2
$6
value2
$ cat mass_insert.txt | nc localhost 6379 
```

如果您看到，我有用于在文件中批量插入的 redis 命令`mass_insert.text`，我`cat`将它发送到 netcat，并且这些命令可以很好地发送到 redis，但不会转储响应。问题是为什么？

一个简单的`google.com`HEAD 请求`netcat`就可以正常工作，即转储响应 -

```
$ printf "HEAD / HTTP/1.0\r\n\r\n" | nc google.com 80
HTTP/1.0 302 Found
Location: http://www.google.co.in/
Cache-Control: private
Content-Type: text/html; charset=UTF-8
Set-Cookie: PREF=ID=cac6fac8de9b5d0c:FF=0:TM=1365352115:LM=1365352115:S=CVuSzOK8mrsfFczI; expires=Tue, 07-Apr-2015 16:28:35 GMT; path=/; domain=.google.com
Set-Cookie: NID=67=K5KjAFxuDP5epZKDdvSf4oCe4FRP1AL8LG_9MEdsArn4Oz_UBG69H0KOMUiKLuVN-hH4NIUvHOLgmfh_82P5v6Nh-sGFrGXyCnQz0zD-Sj_QbzxQ6NIK0rahsxjvyTn7; expires=Mon, 07-Oct-2013 16:28:35 GMT; path=/; domain=.google.com; HttpOnly
P3P: CP="This is not a P3P policy! See http://www.google.com/support/accounts/bin/answer.py?hl=en&answer=151657 for more info."
Date: Sun, 07 Apr 2013 16:28:35 GMT
Server: gws
Content-Length: 221
X-XSS-Protection: 1; mode=block
X-Frame-Options: SAMEORIGIN 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-09T15:04:01.643

您可能需要检查以下几点。

首先，Redis 协议中的行分隔符是 \r\n（而不仅仅是 \n）。因此，您需要确保您的输入文件包含这些字符。

然后，netcat 在输入文件末尾关闭连接（因此它可能不会等待 Redis 回复）。不过，这可能取决于 netcat 的版本。在我的系统上：

```
$ od -c toto.txt
0000000   *   3  \n   $   3  \n   S   E   T  \n   $   4  \n   k   e   y
0000020   1  \n   $   6  \n   v   a   l   u   e   1  \n   *   3  \n   $
0000040   3  \n   S   E   T  \n   $   4  \n   k   e   y   2  \n   $   6
0000060  \n   v   a   l   u   e   2  \n

$ ( sed 's/$/\r/' < toto.txt ; sleep 1 ) | netcat localhost 6379
+OK
+OK 
```

额外的一秒让 netcat 有机会阅读 Redis 回复。

请注意， --pipe 模式下的 redis-cli 比 netcat 更适合通过 Redis 协议执行大量注入。

# java - 如何按2个约束排序？

> ID：15864758
> 
> 赞同：0
> 
> 时间：2013-04-07T16:29:59.620
> 
> 标签：java

所以我试图弄清楚这一点。我创建了一个包含年龄的名称数组列表，必须按年​​龄排序，然后按名称排序（如果年龄相等）我确信有一种简单的方法可以做到这一点，但我们的课程要求我们使用接口。所以到目前为止，我所拥有的是一个包含人员姓名和年龄的数组列表，然后是一个人员类，其中包含我可以从中检索信息的方法。如何对要传递回我的主类的列表进行排序？人员分类器：

```
import java.util.ArrayList;
import java.util.Collections;

public class PersonSorter
{
    public static void main(String[] args)
    {
        ArrayList<Person> people = new ArrayList<Person>();

        people.add(new Person("Linda", 63));
        people.add(new Person("Jacob", 5));
        people.add(new Person("Emily", 13));
        people.add(new Person("Jessica", 21));
        people.add(new Person("Emma", 5));
        people.add(new Person("Robert", 80));
        people.add(new Person("Jennifer", 43));

        // PRINT THE LIST OF PEOPLE BEFORE SORTING
        for (Person person : people)
        {
            System.out.println(person);
        }

        System.out.println();//space between the lists

        Collections.sort(people);

        // PRINT THE LIST OF PEOPLE AFTER SORTING
        for (Person person : people)
        {
            System.out.println(person);
        }
    }
} 
```

人：

```
public class Person implements Comparable<Person>
{
    /** The person's name */
    private int age;

    /** The person's age */
    private String name;

    /**
     * Constructs a new Person object with the given name and age
     * 
     * @param age of the person
     * @param name of the person
     */
    public Person(String name, int age)
    {
        this.age = age;
        this.name = name;
    }

    /**
     * 
     * Returns the age of the person 
     *
     * @return age
     */
    public int getAge()
    {
        return age;
    }

    /**
     * 
     * Sets the age of the person 
     *
     * @param age
     */
    public void setAge(int age)
    {
        this.age = age;
    }

    /**
     * Returns the name of the person
     * 
     * @return name
     */
    public String getName()
    {
        return name;
    }

    /**
     * 
     * Sets the name of the person
     *
     * @param name
     */
    public void setName(String name)
    {
        this.name = name;
    }

    @Override
    /**
     * Returns a string representation of the person in the form:
     * Person[name = [name], age = [age]]
     */
    public String toString()
    {
        return "Person [name=" + name + ", age=" + age + "]";
    }

    /* (non-Javadoc)
     * @see java.lang.Comparable#compareTo(java.lang.Object)
     */
    @Override
    public int compareTo(Person o)
    {

        return 0;
    }

} 
```

人们：

这是我将拉出数组列表并按年龄排序的类，如果需要，则按名称排序。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-07T16:32:57.893

你已经完成了大部分工作。只需在您的*Person*类中实现*compareTo ：*

 *```
@Override
public int compareTo(Person o) {
   if (this.age != o.age) {
      return this.age < o.age ? -1 : 1;
   }
   return this.name.compareTo(o.name);
} 
```

方法*Collections.sort*根据*compareTo*方法提供的顺序对项目进行排序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T16:58:33.897

```
public int compareTo(Person p) {

        return this.age - p.age;

    }

    public static Comparator<Person> PersonComparator = new Comparator<Person>() {

        public int compare(Person p1, Person p2) {

            String firstPerson = p1.name;
            String secondPerson = p2.name;

            return firstPerson.compareTo(secondPerson);

        }

    }; 
```

将此代码添加到您的 Person 类：

如果您想按年龄排序，请尝试：

```
 Arrays.sort(people); 
```

如果要按名称排序，请尝试：

```
Arrays.sort(people, Person.PersonComparator); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T17:11:29.607

如果您不想继续创建多个组合 Comparator ，那么您可以使用[Group Comparator](http://tips4java.wordpress.com/2008/10/17/group-comparator/)之类的东西。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-07T17:16:06.083

Google 的 Guava 有一个非常整洁的[`ComparatorChain`](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/collect/ComparisonChain.html).*

# c++ - 复制省略和右值

> ID：15864759
> 
> 赞同：1
> 
> 时间：2013-04-07T16:30:03.307
> 
> 标签：c++, c++11

```
#include <string> 
#include <iostream>

struct A 
{
   A (){}

    A(const A&)
    {
        std::cout << "copy" << "\n";
    }

    A& operator =(A)
    {
        return *this;
    }
}; 

int main()
{ 
    A  a;
    A a2;

    a=std::move(a2);

    std::cin.ignore();

    return 1;
} 
```

似乎复制省略的规则是参数必须是prvalue而不是xvalue，但为什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-07T16:32:23.873

> 似乎复制省略的规则是参数必须是prvalue而不是xvalue，但为什么呢？

您的程序不包含可以执行复制/移动省略的情况。C++11 标准在第 12.8/31 段中明确规定了这些情况：

> 当满足某些条件时，允许实现省略类对象的复制/移动构造，即使为复制/移动操作选择的构造函数和/或对象的析构函数具有副作用。[...] **这种复制/移动操作的省略，称为复制省略，在以下情况下是允许的**（可以结合起来消除多个副本）：
> 
> — 在具有类返回类型的函数的 return 语句中，**当表达式是具有与函数返回类型相同的 cv 非限定类型的非易失性自动对象**（函数或 catch 子句参数除外）的名称时，可以通过将自动对象直接构造到函数的返回值中来省略复制/移动操作

这不是您的情况，因为您的表达式`return`是`operator =`，`*this`它不是具有自动存储持续时间的对象的名称。`operator =`此外，无论如何，您都不会存储结果。

> — 在 throw 表达式中，当操作数是非易失性自动对象（函数或 catch 子句参数除外）的名称时，其范围不超出最里面的封闭 try 块的末尾（如果有一）、从操作数到异常对象（15.1）的复制/移动操作可以通过将自动对象直接构造到异常对象中来省略

这不适用，因为你没有`throw`表情。

> — 当尚未绑定到引用 (12.2)的**临时**类对象将被复制/移动到具有相同 cv-unqualified 类型的类对象时，可以通过将临时对象直接构造到省略复制/移动的目标

这也不适用，因为您没有临时变量（*xvalue*不是临时变量）。

> — 当异常处理程序的异常声明（第 15 条）声明与异常对象（15.1）具有相同类型的对象（cv 限定除外）时，可以通过处理异常声明来省略复制/移动操作作为异常对象的别名，如果程序的含义将保持不变，除了为异常声明声明的对象执行构造函数和析构函数。

您的代码中没有异常处理程序，因此这种情况也不适用。

* * *

如果您的预期问题是“*为什么事情会这样？* ”，那么我无法提供客观、详尽的答案（尽管其他人可能）。但我会尝试提出一些似是而非的论点。

正如上面引用的标准段落所指定的，在`return`语句的情况下复制省略意味着允许函数将要返回的对象直接构造到分配的对象中。

具体来说，这意味着编译器可能会为该函数生成代码，该代码直接在要分配返回值的对象上工作，并且位于被调用函数的堆栈框架*之外*，而不是在具有自动存储功能的本地对象上在函数的堆栈框架*内*分配的持续时间。这意味着您可以将本地对象视为已分配对象的别名。

但是，这里有*两个*非常不同的对象，它们都是物质构造的，它们都需要内存并且位于两个不同的地址。没有办法应用类似于前面概述的技巧，因为这种别名需要在程序执行期间更改对象的地址——这是非法的。

# python - PYQT4 - 如何编译 qrc 文件并将其导入我的程序？

> ID：15864762
> 
> 赞同：15
> 
> 时间：2013-04-07T16:30:16.057
> 
> 标签：python, pyqt, pyqt4, resource-files

我在导入资源文件时遇到问题。我正在将 pyqt4 与猴子工作室一起使用，并且我正在尝试导入 png 图像。当我运行程序时，我收到一个导入错误，例如

> ImportError：没有名为 icon_rc 的模块

我知道我必须使用 pyrcc4 编译它，但我不明白如何做到这一点，任何人都可以帮忙。有一个完全解释如何编译资源文件以便我可以导入它的答案将非常有帮助。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-04-08T16:20:08.350

打开 cmd（或 *nix 上的终端）并运行

```
pyrcc4 -py3 F:\computing\Payrollv22\icon.qrc -o icon_rc.py 
```

它成功编译了文件，我能够将 py 文件导入我的项目并毫无问题地运行它。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2013-04-07T19:56:55.530

这里真的没什么好解释的，你有一个资源文件（例如`icon.qrc`），然后你调用`pyrcc4 -o icon_rc.py icon.qrc`它会创建一个模块`icon_rc.py`，然后你可以将它导入到你的项目中。

这一切都记录[在这里](http://pyqt.sourceforge.net/Docs/PyQt4/resources.html)。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2017-06-16T15:06:17.920

在 Pyqt5 中可以使用这个命令`Pyrcc5 input_file.qrc -o Out_file.py`

我们需要将该 qrc 文件转换为 python 文件，然后可以将其导入到您的代码中

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-12-08T23:26:52.967

这是因为当您还使用 pyuic5 将您的 UI 转换为 py 时，UI 中的资源文件名仍然存在。

然后使用

```
Pyrcc5 input_file.qrc -o icons.py 
```

从 main_script.py 中删除

```
import icon_rc 
```

并使用

```
import icons 
```

从图标模块调用实际图标时，您必须查看您的 qrc 文件前缀。

```
< RCC >
    < qresource
    prefix = "ico5" >
    < file > plugin.png < / file >
    < / qresource >
< / RCC > 
```

如果前缀是 ico5 那么你加载图标

```
 QtGui.QIcon(":/ico5/plugin.png") 
```

如果前缀是 ，可以说，

```
<RCC>
    <qresource prefix="icons"> 
```

然后是：

```
 QtGui.QIcon(":/icons/plugin.png") 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-12-08T04:34:48.370

您也可以尝试使用 pyside，例如：

---`pyside-rcc -o input.qrc output.py`

# python - Python中的多级列表

> ID：15864764
> 
> 赞同：0
> 
> 时间：2013-04-07T16:30:48.857
> 
> 标签：python, python-2.7

我正在为一个在 PHP 中非常微不足道的漂亮菜鸟而苦苦挣扎，但我对 Python 还是很陌生。我有一种方法可以查询数据库以获取用户测试数据，然后使用一些键构建一个字符串：值将传递给模板。

```
def getTests(self, id):
    results = []
    count = 0
    tests = TestAttempts.objects.all().filter(user_id=id)

    for test in tests:
        title = self.getCourseName(test.test_id)
        results[count].append([{'title': title, 'finished': test.grade_date_time, 'grade': test.test_grade}])
        count += 1
    return results 
```

我正在寻找一个多级列表，我可以在模板中循环显示测试标题、完成日期和成绩。

我收到以下错误：

```
list index out of range
Request Method: GET
Request URL:    http://127.0.0.1:8000/dash/history/
Django Version: 1.4.3
Exception Type: IndexError
Exception Value:    
list index out of range 
```

任何有关最佳方法的帮助将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-07T16:33:24.230

您不需要计数变量。

```
results.append([{'title': title, 'finished': test.grade_date_time, 'grade': test.test_grade}]) 
```

[list.append(x)](http://docs.python.org/2/tutorial/datastructures.html#more-on-lists)操作无论如何都会将一个项目添加到列表的末尾。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T16:35:39.117

而不是索引`count`

```
results[count].append([{'title': title, 'finished': test.grade_date_time, 'grade': test.test_grade}]) 
```

您应该直接调用该`append`方法：

```
results[count].append([{'title': title, 'finished': test.grade_date_time, 'grade': test.test_grade}]) 
```

此外，您正在附加一个包含单个字典的列表。除非您想要做的是`extend`将每个字典添加到列表中的结果（示例中没有发生），否则可能没有必要：

```
results[count].append({'title': title, 'finished': test.grade_date_time, 'grade': test.test_grade}) 
```

# database - 此 SQL Server Express 2008 R2 安装（用于客户端）的大小可以进一步减小吗？

> ID：15864766
> 
> 赞同：2
> 
> 时间：2013-04-07T16:30:59.763
> 
> 标签：database, deployment, sql-server-2008r2-express

我想用 SQL Server Express 2008 R2 的实例部署我的应用程序，安装文件约为 100 MB，但在目标计算机上安装后，其最终大小约为**500 MB**，对于客户端机器来说太大了。我使用命令行安装了它，并将功能限制为只有“ **SQLEngine** ”（不是完全安装），但它仍然增长到**500 MB**，我不认为运行最基本的任务，包括 SELECT、CREATE、DELETE、INSERT、 UPDATE 和其他一些它必须这么大？

您能否帮助我了解如何部署 SQL Server Express 2008 R2 实例（我喜欢它的 10 GB 大小限制），安装后的大小尽可能小，但仍运行最基本的服务来帮助我部署申请工作。请注意，我已尝试仅安装功能“ **SQLEngine** ”，我想知道它是否是最佳选择？？？

先感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T16:39:17.677

从[此处的文档](http://msdn.microsoft.com/en-gb/library/ms143506%28v=sql.105%29.aspx)来看，您似乎不太可能节省很多钱。在某些情况下，它也可能与对 .NET Framework 3.5 SP1 的需求有关。

![文档截图](https://i.stack.imgur.com/46knb.png)

# c# - IValueConverter 删除 enum(int) 的基础值

> ID：15864767
> 
> 赞同：4
> 
> 时间：2013-04-07T16:31:08.153
> 
> 标签：c#, .net, wpf, enums, ivalueconverter

我将一个`Enum`具有基础值 ( `int`) 作为参数从一个传递`XAML`到一个`IValueConverter`。这个想法是使用该`Enum`值对列表进行迭代以检查该值是否存在并返回 a `Visibility` `enum`。该列表的类型为`int`。但是当将 传递`Enum`给 时`converter`，我不能将`Enum`后面传递给`int`。通过“快速观察”查看参数，我根本看不到基础价值或任何价值。

枚举例如

```
public class Operations
{
    public enum Reporting
    {
        ReportAccounts    = 101,
        ReportEngineering = 102,
        ReportSoftware    = 103,
        ReportPR          = 104,
        ReportCRM         = 105
     }
     public enum Editing
     {
        EditUser   = 201,
        EditAccess = 202,
        EditView   = 203
     }
 } 
```

XAML 例如

```
Visibility={Binding Converter={StaticResource VisibilityConverter}, 
        ConverterParameter={x:Static Operations:Reporting.ReportAccounts}} 
```

`IValueConverter`例如

```
public object Convert(object value, Type targetType, object parameter, 
                      System.Globalization.CultureInfo culture)
{
     bool visibility = OperationList.Exists(list => list.Id == (int)parameter);
     if (visibility == true)
     {
         return Visibility.Visible;
     }
     else
     {
         return Visibility.Collapsed;
     }
 } 
```

我想知道当枚举传递给`IValueConverter`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T16:39:56.647

您可能必须`Reporting`先将参数转换为枚举类型：

```
int val = System.Convert.ToInt32((Reporting)parameter);
bool visibility = OperationList.Exists(list => list.Id == val); 
```

# android - 适用于 x86 的 Galaxy 模拟器

> ID：15864769
> 
> 赞同：1
> 
> 时间：2013-04-07T16:31:19.473
> 
> 标签：android

我已经编写了几个应用程序，并在我的 xperia Z 和 android 模拟器上成功地测试了它们。

但我有很多来自 Galaxy 系列所有者（S3、S2、Note 1 和 2）的投诉，称该应用程序存在问题。

我想知道有没有办法在模拟器上运行galaxy rom？我读过它是可能的，但我不知道在哪里下载 rom 和所需的文件以及如何设置它？我想要整个系统映像，而不仅仅是皮肤！

或者也许我买了其中一个，在这种情况下，我更喜欢购买 note 2。他们的 rom 是否兼容，所以如果我的应用程序在 note 2 上运行，然后在 S3 上运行？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-07T16:37:14.407

特定于 ROM 的崩溃通常是设备及其硬件本地的，在模拟器上运行 ROM 也无济于事。无论如何，您不能在模拟器上运行设备 ROM。模拟器可以复制设备的最接近方法是复制屏幕尺寸和密度以及一些硬件功能，如 RAM 等。

您不能在模拟器上运行设备 ROM，因为设备 ROM 仅包含一组非常特定的硬件的驱动程序，而模拟器不支持这些驱动程序。

无法保证如果您的应用在 Note 2 上运行，它将在 S3 上运行。如果您的应用程序由于 ROM 错误而崩溃，那么这两个设备很可能不会共享它，因为它们的 ROM 是单独开发的。

您可以购买崩溃的设备，也可以尝试在此处发布您从崩溃中获得的 LogCat 跟踪以及新问题中的相关代码。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-07T16:43:36.997

您可以尝试[Samsung Remote Test Lab](http://developer.samsung.com/remotetestlab/rtlDeviceList.action#)，它允许在真实设备上进行远程测试（但服务可用性取决于您的位置）。

此外，虽然购买像 Note 2 这样的真实设备进行测试很有用，但它不会让您在其他设备上仍然不会遇到问题。

# url-rewriting - 使用 NginX 和 Laravel：URL 重写

> ID：15864771
> 
> 赞同：3
> 
> 时间：2013-04-07T16:31:23.050
> 
> 标签：url-rewriting, nginx, laravel

我正在尝试在运行 CentOS 6.4 和 NginX 1.8 的 VPS 上设置 Laravel 框架。我可以让其他一切都完美地工作，除了我不能让更干净的 URL 工作，比如使用“website.com/home”而不是“website.com/index.php/home”。任何人都可以帮忙吗？这是我目前的虚拟主机配置文件的内容。

```
server {

    listen 80;
    server_name swati.havok.semicolony.com;
    access_log /usr/share/nginx/semicolony.com/_subdomains/swati/storage/logs/access.log;
    error_log /usr/share/nginx/semicolony.com/_subdomains/swati/storage/logs/errors.log;

    root /usr/share/nginx/semicolony.com/_subdomains/swati/public;
    index index.php;

    #browse folders if no index file
    autoindex on;

    # enforce NO www
    if ($host ~* ^www\.(.*))
    {
        set $host_without_www $1;
        rewrite ^/(.*)$ $scheme://$host_without_www/$1 permanent;
    }

    # serve static files directly
    location ~* \.(jpg|jpeg|gif|css|png|js|ico|html)$ {
        access_log off;
        #expires max;
    }

    # removes trailing slashes (prevents SEO duplicate content issues)
    if (!-d $request_filename)
    {
        rewrite ^/(.+)/$ /$1 permanent;
    }

    # removes trailing "index" from all controllers
    if ($request_uri ~* index/?$)
    {
        rewrite ^/(.*)/index/?$ /$1 permanent;
    }

    # unless the request is for a valid file (image, js, css, etc.), send to bootstrap
    if (!-e $request_filename)
    {
        rewrite ^/(.*)$ /index.php?/$1 last;
        break;
    }

    error_page   500 502 503 504  /50x.html;
    location = /50x.html {
        root   html;
    }

    location ~ \.php$ {
    root                    /usr/share/nginx/semicolony.com/_subdomains/swati/public;
    fastcgi_pass            127.0.0.1:9000;
    fastcgi_index           index.php;
    fastcgi_param SCRIPT_FILENAME   $document_root$fastcgi_script_name;
    include             fastcgi_params;
    }

    location ~ /\.ht {
        deny  all;
    }
} 
```

编辑：我使用 Laravel 4 可能很重要。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-07T22:02:21.047

我对 Nginx 不是很熟悉，但我确实认为您用于重写的正则表达式不正确。

尝试改变

`rewrite ^/(.*)$ /index.php?/$1 last;`

到：

`rewrite ^/(.*)$ /index.php/$1 last;`

或者：

`rewrite ^.*$ /index.php last;`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-17T07:19:39.853

这是我的 nginx / Laravel 配置（Linode 中的 Debian）：

```
# Laravel 4 nginx configuration
server {

        server_name www.yourdomain.com;

        access_log /var/www/yourdomain.com/log/access.log;
        error_log /var/www/yourdomain.com/log/error.log;

        root /var/www/yourdomain.com/public;
        index index.php index.html index.htm;

        location / {
                 try_files $uri $uri/ /index.php?$args;
        }

        location ~ \.php$ {

                # With php5-fpm:
                include /opt/nginx/conf/fastcgi_params; #Here you need to point your nginx instalation directory
                fastcgi_pass unix:/var/run/php5-fpm.sock; #Use this config if you are using sock or use fastcgi_pass 127.0.0.1:9000;
                fastcgi_index index.php;
                fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;

        }

} 
```

# android - Android - 递增全局变量

> ID：15864774
> 
> 赞同：-2
> 
> 时间：2013-04-07T16:31:42.347
> 
> 标签：android, global

我正在尝试使用接近手势制作应用程序。我在主要活动中设置了一个接近传感器：

```
import android.hardware.Sensor;
import android.hardware.SensorEvent;
import android.hardware.SensorEventListener;
import android.hardware.SensorManager;
import android.os.Bundle;
import android.app.Activity;

public class MainActivity extends Activity implements SensorEventListener {
    SensorManager sm;
    Sensor proxSensor;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        list();
        Global g = Global.getInstance();
        g.setData(0);
        int data=g.getData();

    }
    public void list() {
        sm=(SensorManager)getSystemService(SENSOR_SERVICE);
        proxSensor=sm.getDefaultSensor(Sensor.TYPE_PROXIMITY);

        sm.registerListener(this, proxSensor, SensorManager.SENSOR_DELAY_NORMAL);
    }

    @Override
    public void onAccuracyChanged(Sensor arg0, int arg1) {
        // TODO Auto-generated method stub

    }
    @Override
    public void onSensorChanged(SensorEvent arg0) {
        // TODO Auto-generated method stub

    } 
```

另外，我在单例类中设置了一个全局变量，并在主要活动中引用了它：

```
public class Global {
    private static Global instance;
    private int data;

    private Global() {}

    public void setData(int d){
        this.data=d;
    }
    public int getData(){
        return this.data;
    }

    public static synchronized Global getInstance(){
        if(instance==null){
            instance=new Global();
        }
        return instance;
    }

} 
```

我正在尝试使用全局变量来计算传感器更新。谁能告诉我如何：

1.  每次触发传感器时，将全局变量的值加 1
2.  一旦全局变量达到某个值，就触发一个活动。

代码将不胜感激，因为我对这个主题完全一无所知。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T16:54:28.837

我同意埃里克的评论。请参阅下面的示例，您也可以根据您的要求以其他方式进行操作。

```
public void updateData(Context context){
    this.data++;
    if (this.data==LIMIT){
        Intent intent=new Intent(CurrentClass.this, ClassToStart.class);
        context.startActivity(intent)
    }
} 
```

# android-ndk - 同时构建 ARMv7a 常规和霓虹灯

> ID：15864777
> 
> 赞同：3
> 
> 时间：2013-04-07T16:31:54.190
> 
> 标签：android-ndk, makefile, neon

由于我有一个处理密集型应用程序，我想构建一个支持*NEON* / *Advanced SIMD*的变体。另外我有多个带有算法的源文件，所以我不想分别为每个文件启用霓虹灯。以下是重要部分`Android.mk`：

```
ifeq ($(TARGET_ARCH_ABI),armeabi-v7a)

include $(CLEAR_VARS)
# Build Advanced SIMD variant
LOCAL_MODULE            := mymod-neon
LOCAL_ARM_NEON          := true
LOCAL_ARM_MODE          := $(MY_ARM_MODE)
LOCAL_SRC_FILES         := $(MY_SRC_FILES)
LOCAL_C_INCLUDES        := $(MY_C_INCLUDES)
LOCAL_EXPORT_C_INCLUDES := $(LOCAL_C_INCLUDES)
LOCAL_SHARED_LIBRARIES  := $(MY_SHARED_LIBRARIES)
include $(BUILD_SHARED_LIBRARY)

endif

include $(CLEAR_VARS)
# Build regular variant
LOCAL_MODULE            := mymod
LOCAL_ARM_MODE          := $(MY_ARM_MODE)
LOCAL_SRC_FILES         := $(MY_SRC_FILES)
LOCAL_C_INCLUDES        := $(MY_C_INCLUDES)
LOCAL_EXPORT_C_INCLUDES := $(LOCAL_C_INCLUDES)
LOCAL_SHARED_LIBRARIES  := $(MY_SHARED_LIBRARIES)
include $(BUILD_SHARED_LIBRARY) 
```

我尝试为*ARMv7a*构建 2 个库，但遗憾的是，由于使用了“高级”Makefile 工具，我无法编译 2 个不同的库。

它覆盖了`.o`目标：

```
/android-ndk/build/core/build-binary.mk:272: warning: overriding commands for target `obj/local/armeabi-v7a/objs/myalg.o' 
```

可悲的是，我还没有找到一种方法来强制构建霓虹灯对象`objs-neon`而不是`obj`.

有什么办法可以优雅地解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T06:04:57.300

我最终做的是将我们的符号链接`src`到`src-neon`目录并通过以下方式访问所有霓虹灯源`src-neon`：

```
ifeq ($(TARGET_ARCH_ABI),armeabi-v7a)

include $(CLEAR_VARS)
# Build Advanced SIMD variant
LOCAL_MODULE            := mymod-neon
LOCAL_ARM_NEON          := true
LOCAL_ARM_MODE          := $(MY_ARM_MODE)
LOCAL_SRC_FILES         := $(call get_sources,`src-neon`)
LOCAL_C_INCLUDES        := $(MY_C_INCLUDES)
LOCAL_EXPORT_C_INCLUDES := $(LOCAL_C_INCLUDES)
LOCAL_SHARED_LIBRARIES  := $(MY_SHARED_LIBRARIES)
include $(BUILD_SHARED_LIBRARY)

endif

include $(CLEAR_VARS)
# Build regular variant
LOCAL_MODULE            := mymod
LOCAL_ARM_MODE          := $(MY_ARM_MODE)
LOCAL_SRC_FILES         := $(call get_sources,`src`)
LOCAL_C_INCLUDES        := $(MY_C_INCLUDES)
LOCAL_EXPORT_C_INCLUDES := $(LOCAL_C_INCLUDES)
LOCAL_SHARED_LIBRARIES  := $(MY_SHARED_LIBRARIES)
include $(BUILD_SHARED_LIBRARY) 
```

幸运的是，我们很早就决定只在 Unix 机器上工作，所以这对我们来说是一个可行的选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-09T19:39:50.987

是的，ndk-build 应该通过调试和非调试以及 ISA 分隔中间对象，所以实际上我认为，正如其他人指出的那样，您可能在其他地方有错误。请注意，ndk-build 将按 ISA 和调试/非调试分隔中间对象，而*不是*模块名称。因此，如果多个模块尝试构建同一个文件，您可能会遇到问题。

话虽如此，我要指出您可能会以稍微错误的方式处理此问题，因为`armeabi-v7a`这并不意味着支持 NEON。虽然 ARM 确实在 v7a 中引入了 NEON，但它是供供应商添加的可选协处理器，因此 v7a 处理器可能没有 NEON 协处理器。所以不幸的是，有了这些信息，你又回到了原点……

这个问题确实有一点重复，在这里：

[Android 构建系统、NEON 和非 NEON 构建](https://stackoverflow.com/questions/7679363/android-build-system-neon-and-non-neon-builds)

此外，NDK 构建文档确实为此专门写了一页。查看您的 android-ndk-r8e/documentation.html，左侧有一个指向“CPU ARM Neon”的链接

他们指出的一件事是，最好的方法是通过 CPU 调度，但他们还向您展示了如何使用 .neon 额外文件扩展名将源文件标记为霓虹灯和非霓虹灯。恕我直言，将不同的 CPU 代码放在不同的源文件中总是好的，不管构建系统是什么，因为你可以删除很多丑陋的预处理器的东西。我猜这是一种最佳实践，这就是 NDK 所支持的。

毕竟，我看到你最终得到了 LCID Fire 的解决方案。您使用略有不同的源文件构建不同的库。您实际上应该有 3 个不同的库，一个用于非 v7a，一个用于带有 neon 的 v7a，一个用于不带 neon 的 v7a。

# ruby-on-rails - Ruby on Rails：根据几个条件过滤模型上的关联

> ID：15864781
> 
> 赞同：1
> 
> 时间：2013-04-07T16:32:39.797
> 
> 标签：ruby-on-rails, ruby, model, associations

在我的 ROR 应用程序中，我有模型 Category、Item、Property 和 PropertyValuation。这个想法是一个类别包含项目，一个项目有几个属性。PropertyValuation 的目的是存储特定项目的属性值。模型定义如上：

```
class Category < ActiveRecord::Base
  attr_accessible :name, :description, :parent, :children, :items, :parent_id

  has_many :children, :class_name => "Category", :foreign_key => "parent_id", :dependent => :nullify
  belongs_to :parent, :class_name => "Category"

  has_many :categorizations
  has_many :items, :through => :categorizations
end

class Item < ActiveRecord::Base
  attr_accessible :name, :description, :property_valuations, :barcode

  has_many :property_valuations, :dependent => :destroy  
  has_many :properties, :through => :property_valuations 

  has_many :categorizations
  has_many :categories, :through => :categorizations

end

class Property < ActiveRecord::Base
  attr_accessible :name, :description, :value_type, :unit, :unit_id

  has_many :property_valuations, :dependent => :destroy  
  has_many :items, :through => :property_valuations
  has_many :property_ranges, :dependent => :destroy

  belongs_to :unit
end

class PropertyValuation < ActiveRecord::Base     
  attr_accessible :property, :item, :value, :categorization

  belongs_to :property
  belongs_to :item
end 
```

现在我的问题是，我已经成功地通过这样做来按名称过滤类别项目：

```
@category.items.where("lower(items.name) like ?", "%#{params[:keywords].downcase}%") 
```

但现在我还想根据关联的属性值过滤这些项目。示例：我想要名称包含“foo”的类别项目，其中属性“A”的值为 1，属性 B 的值为 2，依此类推。如何实现这样的查询？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T14:25:17.120

您应该将表格连接在一起，然后根据您的标准进行限制。

```
# Category items by name
Category.joins(:items).where(:items => { :name => keywords }) 
```

您可能会发现[http://guides.rubyonrails.org/active_record_querying.html#joining-tables](http://guides.rubyonrails.org/active_record_querying.html#joining-tables)并致电`.to_sql`很有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T16:41:25.113

您可以链接 ActiveRecord 范围，包括`where`. 因此，您可以先限制名称，然后链接附加`where`以限制结果。如您的问题中所述，下面的此示例将限制属性“A”值为 1 的结果：

```
keywords = params[:keywords].downcase
@category.items.where("lower(items.name) like ?", "%#{keywords}%").where(:A => 1) 
```

您还可以将范围存储在变量中。例如，如果您想分别通过属性 A 和 B 限制相同的数据集，您可以执行以下操作：

```
keywords = params[:keywords].downcase
matched_by_name = @category.items.where("lower(items.name) like ?", "%#{keywords}%")
foo = matches_by_name.where(:A => 1)
bar = matches_by_name.where(:B => 1) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-02-25T13:22:53.653

可以做到这一点的宝石：[activerecord_where_assoc](https://github.com/MaxLap/activerecord_where_assoc)（我是作者）

有了它，你可以用这种方式做你想做的事：
我想要名称包含“foo”的类别项目，其中属性“A”的值为 1，属性 B 的值为 2，依此类推。

```
@category.items.where(name: "foo").where_assoc_exists(:property_valuations) { |pv|
  pv.where(value: 1).where_assoc_exists(:property, name: 'A')
}.where_assoc_exists(:property_valuations) { |pv|
  pv.where(value: 2).where_assoc_exists(:property, name: 'B')
} 
```

这显示了宝石的最大力量，它只是可以重复使用而不会发生冲突。用连接来做这件事会很痛苦。但是，当需求复杂时，结果也很密集......这可以通过范围轻松解决。

```
# In items:
scope :with_property, lambda {|name, value| 
  where_assoc_exists(:property_valuations) { |pv|
    pv.where(value: value).where_assoc_exists(:property, name: name)
}}

@category.items.where(name: "foo").with_property('A', 1).with_property('B', 2) 
```

如果您想制作一个可以接收操作员的更强大的示波器，您可以通过更改`where(value: value)`部件来满足您的需要。

下面是[介绍](https://github.com/MaxLap/activerecord_where_assoc/blob/master/INTRODUCTION.md)和[例子](https://github.com/MaxLap/activerecord_where_assoc/blob/master/EXAMPLES.md)。阅读[文档](https://maxlap.github.io/activerecord_where_assoc/ActiveRecordWhereAssoc/RelationReturningMethods.html)中的更多详细信息。

# json - 如何实现平台无关的序列化？

> ID：15864782
> 
> 赞同：2
> 
> 时间：2013-04-07T16:32:43.147
> 
> 标签：json, cross-platform

如何实现平台无关的序列化？我的意思是，如果我使用 json（c++ 库）序列化一个 c++ 对象，它可以被 json（java 库）反序列化为 java 对象吗？还是有任何其他平台独立序列化的最佳方法？

# c# - 为什么我可以将索引器应用于 VB.Net 中的 ICollection，但不能在 C# 中

> ID：15864783
> 
> 赞同：14
> 
> 时间：2013-04-07T16:32:48.480
> 
> 标签：c#, vb.net, icollection

正在将一些代码从 VB.Net 转换为 C#，当我遇到这个时，在一些使用 Ionic Zip 库的代码中：

```
Dim zipEntry1 As ZipEntry = zipFile1.Entries(0) 
```

很简单：

```
ZipEntry zipEntry1 = zipFile1.Entries[0]; 
```

我在 C# 上收到此错误：

> *无法使用 [] 将索引应用于“System.Collections.Generic.ICollection”类型的表达式*

两者都使用相同版本的 DLL，两者`zipFile1.Entries`都是通用的`ICollection`.

我已经在 VB.Net 上测试了以下内容，并且成功构建：

```
Option Strict On
Option Explicit On

Imports Ionic.Zip

Module Module1

    Sub Main()

        Dim zipFile1 = ZipFile.Read("C:\test")
        Dim zipEntry = zipFile1.Entries(0)

    End Sub

End Module 
```

这不会建立：

```
using Ionic.Zip;

namespace ConsoleApplication2
{
    class Program
    {
        static void Main(string[] args)
        {
            var zipFile1 = ZipFile.Read(@"C:\test");
            var zipEntry = zipFile1.Entries[0];
        }
    }
} 
```

为什么会发生这种情况，有没有办法解决它？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-04-07T16:55:17.190

奇怪的是，看起来 VB 有特殊的支持`IEnumerable<T>`并隐式提供了一个索引器，它*实际上*调用[`Enumerable.ElementAtOrDefault`](http://msdn.microsoft.com/en-gb/library/bb494386.aspx). `ICollection<T>`extends `IEnumerable<T>`，因此那里存在相同的设施。`ICollection<T>`不提供“真正的”索引器，因此当您尝试从 C# 使用它时会出现问题。

示例程序：

```
Option Strict On

Public Class Test
    Public Shared Sub Main(args As String())
      Dim x as System.Collections.Generic.ICollection(Of String) = args
      Console.WriteLine(x(0))
    End Sub
End Class 
```

为 Main 生成的 IL：

```
.method public static void  Main(string[] args) cil managed
{
  .entrypoint
  .custom instance void [mscorlib]System.STAThreadAttribute::.ctor() = ( 01 00 00 00 ) 
  // Code size       15 (0xf)
  .maxstack  2
  .locals init 
      (class [mscorlib]System.Collections.Generic.IEnumerable`1<string> V_0)
  IL_0000:  ldarg.0
  IL_0001:  stloc.0
  IL_0002:  ldloc.0
  IL_0003:  ldc.i4.0
  IL_0004:  call       !!0
     [System.Core]System.Linq.Enumerable::ElementAtOrDefault<string>(
        class [mscorlib]System.Collections.Generic.IEnumerable`1<!!0>,
        int32)
  IL_0009:  call       void [mscorlib]System.Console::WriteLine(string)
  IL_000e:  ret
} // end of method Test::Main 
```

我发现 VB 隐含地提供了这一点*很*奇怪 - 让它*看起来*可以索引到不一定提供有效索引操作的集合中是很危险的。

当然，你可以打电话给`ElementAtOrDefault`自己，如果你对这样做感到满意的话。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-07T16:38:44.923

严格来说，它是*无序*`ICollection<T>`元素集合的接口（更准确地说，是一个元素不能通过索引单独访问的集合）。这只是*根据定义*。

 **但是你仍然可以使用 LINQ 的`ElementAt(int index)`扩展方法。`index`每次调用它时，它都会遍历所有元素（所以它通常比较慢）。

注意：`ICollection<T>`不要与`Collection<T>`. 后者实现`IList<T>`（除其他外），根据定义*确实*指定每个元素都可以通过其索引访问。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T20:48:58.687

VB 长期以来一直有为其类*设置默认成员*的想法，对于集合而言，默认成员始终是成员*Item* ()。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-03-25T10:27:27.077

`zipFile1.Entries(0)`调用所谓的*Default Query Indexer ，这是*[VB 语言规范](https://github.com/dotnet/vblang/blob/189d2c15703b91a9241ce9ade46e6bc24b193cd9/spec/expressions.md)中定义的鲜为人知的功能：

> **默认查询索引器**
> 
> 每个元素类型为 T 并且还没有默认属性的可查询集合类型都被认为具有以下一般形式的默认属性：
> 
> ```
> Public ReadOnly Default Property Item(index As Integer) As T
>     Get
>         Return Me.ElementAtOrDefault(index)
>     End Get
> End Property 
> ```**

# delphi - 确定重复枚举在更大范围内的位置

> ID：15864797
> 
> 赞同：0
> 
> 时间：2013-04-07T16:33:30.743
> 
> 标签：delphi, math, enums

我有一个枚举类型，例如

```
type
  TMyEnum = (meOne, meTwo, meThree); 
```

现在我需要创建一个函数来确定哪个枚举落在更大的范围内，假设枚举值无限重复......

```
function EnumOf(const Value: Integer): TMyEnum;
begin

end; 
```

可以将其想象为枚举集不断重复的工作日。如果我传入数字`5`（例如天数）它应该返回`meTwo`，因为......

```
1) meOne
2) meTwo
3) meThree
4) meOne
5) meTwo <--
6) meThree 
```

并且数字`7`会返回`meOne`，依此类推。

我应该如何编写这个函数？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-07T16:44:02.907

使用 mod 运算符：

```
function EnumOf(const Value: Integer): TMyEnum; 
begin
  Assert(Value>0);
  Result := TMyEnum((Value-1) mod (1+ord(high(Result))));
end; 
```

Value-1 将 Value 的基于 1 的索引调整为枚举类型的基于 0 的索引。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T16:43:56.433

使用`mod`运算符：

```
132 mod 5 = 2 
```

因为

```
132 = 26*5 + 2 
```

# ruby-on-rails - 单击按钮发送电子邮件通知

> ID：15864798
> 
> 赞同：0
> 
> 时间：2013-04-07T16:33:36.443
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2

我想在我的任何可用于贷款/出售的 pin 显示页面上创建一个按钮，单击该按钮时，会向 pin 的所有者发送一封电子邮件，让他们知道 current_user 对该项目感兴趣，然后给出一个通知让 current_user 知道电子邮件已发送...

我已经设置了整个电子邮件部分，并且能够让它在加载页面时发送电子邮件，但我希望它仅在单击按钮时发送。看起来我必须让按钮加载一个既发送电子邮件又显示确认的页面。我遇到的问题是将@pin 和 current_user 变量传递到页面中。

我是以正确的方式解决这个问题，还是我走错了路？任何帮助是极大的赞赏！

这是我打开发送/确认页面的方式：

```
<%= button_tag(:type => 'button', class: "btn btn-primary", onclick: "window.location.href='/sendrequest'") do %>
<%= content_tag(:strong, 'Request Contact') %>
<% end %> 
```

这是我需要在该页面上执行的内容：

```
<% if user_signed_in? %>
<% UserMailer.request_pin(@users, @pin).deliver %>
<p>
Your request has been sent!
</p>
<% else %>
...
<% end %> 
```

UserMailer.request_pin 中的所有代码都运行良好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T02:24:57.177

其他人在另一个网站上为我回答了这个问题，我以错误的方式处理它。这是代码：

# /app/controllers/pins_controller.rb：

```
...  
def sendrequest  
  @user = current_user  
  @pin = Pin.find(params[:id])  #The culprit!  
  if user_signed_in?  
    UserMailer.request_pin(current_user, @pin).deliver  
    redirect_to @pin, notice: 'Request for contact sent.'  
  else  
  end  
end  
... 
```

# /app/mailer/user_mailer.rb：

```
class UserMailer < ActionMailer::Base  
  default :from => "ian@ctrl-r.com"  

  def request_pin(user, pin)  
    @user = user  
    @pin = pin  
    mail(:to => "#{@pin.user.name} <#{@pin.user.email}>", :replyto => @user.email, :subject => "#{@user.name} has requested #{@pin.description}")  
  end  
end 
```

# /app/pins/show.html.erb：

```
...  
<%= link_to "Request Contact", sendrequest_pin_path(current_user, @pin), class: "btn btn-primary" %>  
... 
```

# /config/routes.rb：

```
...  
resources :pins do  
  resources :loans  
  member do  
    match 'sendrequest' => 'pins#sendrequest'  
  end  
end  
... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T22:52:52.263

您可以进行单独的控制器操作来通知 pin 所有者，并让链接使用 jquery 提交请求，然后不需要页面加载，并且您也可以让 jquery 处理它已发送的通知。

我根本不知道你的代码库所以这是一个粗略的例子

```
# Routs file
get "/pins/:id/post" => "pins#notify", as: notify_pin_owner

# Controller
def notify
@pin = Pin.find(params[:id])
<% if user_signed_in? %>
<% UserMailer.request_pin(@users, @pin).deliver %>
<p>
Your request has been sent!
</p>
<% else %>
...
<% end %>
end

# View
<%= link_to "notify", "#", data-link: notify_pin_owner_path( @pin ), class: 'pin-notification' %>

# In javascript
$(document).ready( function() {
  $('.pin-notification').click( function() {
    $.ajax({
      type: "GET",
      url: $(this).data('link'),
      success: 
    })
  })
}) 
```

希望有帮助

# python - 使用 Python 正则表达式搜索最外层的括号

> ID：15864800
> 
> 赞同：4
> 
> 时间：2013-04-07T16:33:48.117
> 
> 标签：python, regex, string

为模棱两可的标题道歉，但我不知道如何用一句话来表达我的问题。

所以我有一些简单的正则表达式代码来提取括号之间的代码。

```
^.*\((.*)\).* 
```

使用以下代码在 Python 中成功运行。

```
m = re.search( "^.*\((.*)\).*" ,input)
if m:
    print(m.groups()[0]) 
```

当右括号`)`可能位于最外面的括号内时，就会出现我的问题。例如，给出我当前的代码

```
nsfnje (19(33)22) sfssf 
```

作为输入将返回

```
19(33 
```

但我希望它回来。

```
19(33)22 
```

我不知道如何解决这个问题，所以任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-07T16:36:10.527

```
>>> input = "nsfnje (19(33)22) sfssf"
>>> re.search( "\((.*)\)" ,input).group(1)
'19(33)22' 
```

请注意，这会搜索最外层的括号，即使它们是不平衡的（例如`"(1(2)))))"`）。无法使用单个标准正则表达式搜索平衡括号。有关更多信息，请参阅[此答案](https://stackoverflow.com/a/15597782/367273)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T16:57:50.017

你的代码不给`19(33`，它给`33)22`。

问题是，`^.*`您的正则表达式开头的 一直匹配到字符串中的*最后一个* `(`，而您实际上希望*从*字符串中的*第一个* `(`开始匹配。

如果您只想要最外面的括号内的内容，则删除`.*`正则表达式开头的 ，您也可以删除结尾`.*`，因为它同样没有任何作用。

```
"\((.*)\)" 
```

如果您想要整个行/字符串的匹配以及括号内的内容，那么`*`通过添加一个懒惰地进行第一个匹配`?`

```
"^.*?\((.*)\).*" 
```

或者更好，使用

```
"^[^(]*\((.*)\).*" 
```

# multithreading - System V 消息队列

> ID：15864804
> 
> 赞同：1
> 
> 时间：2013-04-07T16:33:58.023
> 
> 标签：multithreading, message-queue

我正在编写一个应用程序，它有一个消息队列和两个进程正在监听它。如何防止一个人先阅读它？

场景是：有一个服务器应用程序读取队列并将消息发送到其他队列。（一个服务器和多个具有不同消息队列的客户端）

但是客户端和服务器之间的消息因此来自同一个队列；我不能保证服务器在客户端线程（读取传入）之前接收消息。

你能帮我实现吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T16:56:49.233

我想我找到了解决方案。我的错误是没有正确阅读手册。

```
ssize_t msgrcv(int msqid, struct msgbuf *msgp, size_t msgsz, long msgtyp, int msgflg); 
```

参数 4 用于此目的。如果我为客户端设置消息标志就足够处理了！

# php - 简单的 SQL 搜索调整

> ID：15864806
> 
> 赞同：0
> 
> 时间：2013-04-07T16:34:20.370
> 
> 标签：php, mysql, search

我正在玩 PHPFreaks“简单 SQL 搜索”脚本。我想知道在提交查询后如何优化搜索方法。

假设我提交了一个像“音乐”这样的搜索词，搜索查询会给我数据库中包含“音乐”这个词的所有数据的结果，但是假设我想搜索“音乐”这个词，一旦结果已显示我想优化搜索并查找音乐下属于“摇滚”或“说唱”类别的所有结果。我想使用选定选项列表来执行此操作。

这是来自 PHPFreaks 的工作脚本，我将其包含在内，因此这里的用户也可以在需要时使用此脚本：

```
$error = array();
$results = array();

if (isset($_GET['search'])) {
   $searchTerms = trim($_GET['search']);
   $searchTerms = strip_tags($searchTerms); // remove any html/javascript.

   if (strlen($searchTerms) < 3) {
      $error[] = "Search terms must be longer than 3 characters.";
   }else {
      $searchTermDB = mysql_real_escape_string($searchTerms); // prevent sql injection.
   }

   // If there are no errors, lets get the search going.
   if (count($error) < 1) {
      $searchSQL = "SELECT sid, sbody, stitle, sdescription FROM simple_search WHERE ";

      // grab the search types.
      $types = array();
      $types[] = isset($_GET['body'])?"`sbody` LIKE '%{$searchTermDB}%'":'';
      $types[] = isset($_GET['title'])?"`stitle` LIKE '%{$searchTermDB}%'":'';
      $types[] = isset($_GET['desc'])?"`sdescription` LIKE '%{$searchTermDB}%'":'';

      $types = array_filter($types, "removeEmpty"); // removes any item that was empty (not checked)

      if (count($types) < 1)
         $types[] = "`sbody` LIKE '%{$searchTermDB}%'"; // use the body as a default search if none are checked

          $andOr = isset($_GET['matchall'])?'AND':'OR';
      $searchSQL .= implode(" {$andOr} ", $types) . " ORDER BY `stitle`"; // order by title.

      $searchResult = mysql_query($searchSQL) or trigger_error("There was an error.<br/>" . mysql_error() . "<br />SQL Was: {$searchSQL}");

      if (mysql_num_rows($searchResult) < 1) {
         $error[] = "The search term provided {$searchTerms} yielded no results.";
      }else {
         $results = array(); // the result array
         $i = 1;
         while ($row = mysql_fetch_assoc($searchResult)) {
            $results[] = "{$i}: {$row['stitle']}<br />{$row['sdescription']}<br />{$row['sbody']}<br /><br />";
            $i++;
         }
      }
   }
}

function removeEmpty($var) {
   return (!empty($var)); 
}
?> 
```

结果：

```
 <?php echo (count($error) > 0)?"The following had errors:<br /><span id=\"error\">" . implode("<br />", $error) . "</span><br /><br />":""; ?>
      <form method="GET" action="<?php echo $_SERVER['PHP_SELF'];?>" name="searchForm">
         Search For: <input type="text" name="search" value="<?php echo isset($searchTerms)?htmlspecialchars($searchTerms):''; ?>" /><br />
         Search In:<br />
         Body: <input type="checkbox" name="body" value="on" <?php echo isset($_GET['body'])?"checked":''; ?> /> | 
         Title: <input type="checkbox" name="title" value="on" <?php echo isset($_GET['title'])?"checked":''; ?> /> | 
         Description: <input type="checkbox" name="desc" value="on" <?php echo isset($_GET['desc'])?"checked":''; ?> /><br />
                 Match All Selected Fields? <input type="checkbox" name="matchall" value="on" <?php echo isset($_GET['matchall'])?"checked":''; ?><br /><br />
         <input type="submit" name="submit" value="Search!" />
      </form>
      <?php echo (count($results) > 0)?"Your search term: {$searchTerms} returned:<br /><br />" . implode("", $results):""; ?> 
```

我希望有人能在这里引导我朝着正确的方向前进。我对 PHP/MySQL 有点熟悉，并且到处都在网上查看，但无法找到使用此脚本优化搜索结果的方法。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T13:57:15.860

您有两个选项来优化搜索结果。

1.  将搜索（生成的行集）保存/序列化到磁盘/会话，以便在用户向搜索参数添加任何内容时进行搜索。在这种情况下，您需要确保用户没有更改“基本”搜索参数。如果他这样做了，您可能会先运行另一个基础搜索，然后从结果中提取您的精炼结果（特定类型的条目）。

2.  将新的搜索参数添加到一些基本查询字符串，并让数据库进行精确搜索。

在这两种情况下，您最终都会得到一个精炼的结果。我会选择第二个选项，您不需要关心以前的搜索参数。您只需将“流派”添加到查询中，您就应该完成了。

# javascript - 如何将参数传递给变量以访问对象

> ID：15864809
> 
> 赞同：0
> 
> 时间：2013-04-07T16:34:36.620
> 
> 标签：javascript

我在下面有这个简单的代码。我正在尝试查询输入框中输入的任何形状的名称。我可以正确地在函数中传递参数，但是当我尝试使用参数查询它时，它会导致我出错。

```
console.log(shape); //I'm getting the right input as parameter
console.log(shapes.shape.name); //not successful using passed parameter. 
```

//下面的代码

```
<div id="page">
   <input type="text" id="getShape"/>
   <input type="button" onClick="getShapeDetails()" />
</div>

<script>
   shapes = {
      "circle"   : {"name":"circle", "sides":"0", "color":"yellow"},        
      "triangle" : {"name":"triangle", "sides":"3", "color":"red"},         
      "square"   : {"name":"square", "sides":"4", "color":"blue"},  
   };

   function getShapeDetails(){
      var getShape = document.getElementById("getShape").value;

      function getShapesDetail(shape){
         console.log(shape);
     console.log(shapes.shape.name);
      }

      getShapesDetail(getShape);
   }
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T16:37:02.320

试试这个：

```
console.log(shapes[shape].name); 
```

您想将形状用作形状结构的索引。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T16:40:23.050

这对我有用：

```
<html>
    <body>
        <script>
               var shapes = {
                    "circle"   : {"name":"circle", "sides":"0", "color":"yellow"},        
                    "triangle" : {"name":"triangle", "sides":"3", "color":"red"},         
                    "square"   : {"name":"square", "sides":"4", "color":"blue"},  
              };
                console.log("name: ", shapes.circle.color);
        </script>
    </body>

</html> 
```

# mysql - 在 PHP 中加密解密来自 CKeditor 的 html 内容

> ID：15864811
> 
> 赞同：0
> 
> 时间：2013-04-07T16:34:46.590
> 
> 标签：mysql, codeigniter, encryption

使用 CodeIgniter 和 MySQL

我的用户正在 CKEditor 中创建个人内容。

我想加密此内容并将其加密存储在 MySQL 中。

用户在登录时将手动输入解密密钥或所需的任何内容，并在其会话期间有效。

我应该如何在 PHP 中开发这样的机制？(PHP 版本 >= 5.4)

附加信息：

- 内容是 HTML 中的中/klarge 帖子 - 必须在 MySQL 中加密，以确保用户的安全

# c# - Quartz.Net JobStore 使用 RavenDb

> ID：15864812
> 
> 赞同：6
> 
> 时间：2013-04-07T16:34:48.090
> 
> 标签：c#, ravendb, quartz.net

我正在做一个大型项目，我允许用户安排操作。

我一直在使用 Quartz.net 库，它使用（默认）RAMStore 运行良好。但是，随着我的进步，我需要为计划的作业使用更持久的存储。

由于我已经在整个项目中使用 RavenDb，我希望将它用作 Quartz.net 的 IJobStore 实现。然而，实现它比预期的要复杂得多：

*   RavenDb 无法轻松序列化各种密钥以保存/加载它们
*   预计 IJobStore 实现不仅仅是对作业和触发器的 CRUD 操作——它似乎包含一些“真实”的业务逻辑

我还尝试将 Quartz.net 代码“实习”到我的项目中，但这引发了大量其他问题，而且对我来说似乎适得其反。

有没有人有使用 RavenDb 的 IJobStore 的解决方案/实现？

# visual-studio-2010 - 在构建后事件 Visual Studio 2012 上更新主机文件

> ID：15864830
> 
> 赞同：1
> 
> 时间：2013-04-07T16:35:58.150
> 
> 标签：visual-studio-2010, visual-studio-2012, hosts-file, post-build-event, build-events

我有一个 VS2012 项目。为了让它运行，我需要一个主机文件条目，例如。127.0.0.1 local.mywebsite.com

问题是我想让新开发人员尽可能轻松地从 TFS 获取项目并运行它，而无需任何额外步骤。

如果该条目不存在，我是否可以执行一个构建后事件，该事件可以将该条目添加到我的主机文件中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T21:30:41.067

您可以通过使用 MSBuild 扩展构建过程来实现这一点。调用包含在目标中[**`WriteLinesToFile`**](http://msdn.microsoft.com/en-us/library/ms164305.aspx)的任务。[**`AfterBuild`**](http://msdn.microsoft.com/en-us/library/ms164305.aspx)或者，您可以[编写自己的自定义 MSBuild Task](http://msdn.microsoft.com/en-us/library/t9883dzc.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T21:13:13.963

回答我自己的问题：

1.  Visual Studio-->打开 Nuget 控制台并运行以下命令：Install-Package MSBuild.Extension.Pack
2.  Visual Studio-->右键单击-->卸载你的项目（.csproj）
3.  卸载后您现在可以右键单击->编辑 .csproj
4.  一直向下滚动并将这些行粘贴到结尾的“项目”标记之前 --> [http://pastebin.com/eEJXDrmi](http://pastebin.com/eEJXDrmi)
5.  保存 .csproj 并右键单击 --> 重新加载项目

你已准备好出发 ！！！！现在，当您构建项目时，如果该条目存在，它将更新您的主机文件，如果该条目不存在，它将创建该条目。很酷的东西！

# php - 尝试下载服务器生成的 .zip 文件时出现“Bad Gateway Error 502”

> ID：15864832
> 
> 赞同：2
> 
> 时间：2013-04-07T16:36:02.727
> 
> 标签：php, http-headers, ziparchive

尝试下载服务器生成的 .zip 文件时收到“错误网关错误 502”

我已经隔离了导致错误的线路；它的：

```
$zip->addFile($thumb->loadVersion($version['id']), $rank . "_" . $thumb->filename); 
```

这是我的代码。我的脚本遍历用户上传的所有 .jpg 文件，将它们捆绑到一个大的 .zip 文件中，然后发送 .zip 文件的下载标头。

```
function downloadGalleryZip() {

    $tmpfile = tempnam("tmp", "zip");
    $zip = new ZipArchive();
    $res = $zip->open($tmpfile, ZipArchive::OVERWRITE);

    if ($res === TRUE) {

    // loop through gallery

    $sql = "SELECT * FROM files_versions WHERE file_id = ". $this->fileId . " AND deleted_on IS NULL ORDER BY rank ASC"; 
    $result = db_query($sql);
    $rank = 0;

        while ($version = mysql_fetch_array($result)) :
            $rank ++;
            $rank = str_pad($rank, 3, '0', STR_PAD_LEFT);
            $thumb = new fancyFile();
            $zip->addFile($thumb->loadVersion($version['id']), $rank . "_" . $thumb->filename);

        endwhile;  

        // $zip->addFromString('000_info.txt', 'Dieser Ordner wurde am ' . date("d.m.Y", time()) . ' heruntergeladen.');
        $zip->close();
    }

    $filename = getCaptionFromFile($this->fileId) . ".zip";

    header("Connection: Keep-Alive");
    header("Content-Description: File Transfer");
    header("Content-Disposition: attachment; filename=" . $filename);
    header("Content-Type: application/zip" );
    header('Content-Transfer-Encoding: binary');
    header('Expires: 0');
    header( 'Cache-Control: must-revalidate, post-check=0, pre-check=0');
    header('Pragma: public');
    header('Content-Length:' . filesize($tmpfile));
    ob_clean();
    flush(); 
```

}

我绝对没有“错误网关错误”的经验，非常感谢您的帮助！

谢谢，马特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-06T13:54:31.093

我已经解决了这个问题。

原因是生成 zip 文件的时间超过 5 秒，而我的网关服务器的 Timeout 和 KeepAliveTimeout 设置为 5 秒。（您可以在 httpd.conf 中进行编辑）

我将超时时间增加到 60 秒 - 问题解决了。

# javascript - 概念 - 为什么 match() 看似去掉括号？

> ID：15864836
> 
> 赞同：0
> 
> 时间：2013-04-07T16:36:56.647
> 
> 标签：javascript

我做了

```
temp = '(test)';
temp.match(temp); 
```

然后回来了

```
0:'test'
1:'test' 
```

括号去哪儿了？

**更新：**

在 regexpal.com 中测试并发现类似。

但是，切换到 {} 并没有同样的问题。

**澄清**

temp 是“打算”成为一个字符串。不知道为什么它会被认为是别的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T16:38:47.507

括号是正则表达式中的元字符（特别是[捕获括号](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Regular_Expressions)）（请注意，如果将字符串传递给`match`方法，它将隐式转换为正则表达式）。如果您希望它们按字面意思理解，则必须对其进行转义（因为您正在处理一个字符串，所以您还必须转义转义字符，以便在转换为正则表达式时它仍然存在......到那时正则表达式不会匹配原始字符串）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T16:39:17.480

to 的参数`.match()`被视为正则表达式。括号是在该上下文中表示某些东西的元字符。具体来说，它们对匹配字符串的部分进行分组。因此，您的正则表达式`(test)`匹配子字符串“test”。返回值将整个匹配项作为数组的第一个元素，将第一个组作为第二个元素。在这种情况下，因为您的组覆盖了整个匹配的子字符串，所以它们是相同的。

[这是MDN 文档](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/match)可以快速澄清的事情：

> ## 参数
> 
> **regexp**
> 一个正则表达式对象。如果传递了一个非正则表达式对象 obj，它会通过使用 new RegExp(obj) 隐式转换为正则表达式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T16:38:36.267

你必须这样做：

```
temp = '\(test\)';
temp.match(temp); 
```

由于 () 在正则表达式中定义组。在这里查看更多信息：[http ://www.regular-expressions.info/brackets.html](http://www.regular-expressions.info/brackets.html)

() 是正则表达式使用的字符。就像 .*[] 等。这就是它不返回 () 的原因。我在上面的例子中所做的就是逃避它们。因此，正则表达式不会将其视为一个分组。

**更新：**

它确实以这种方式工作：

```
"(test)".match(/\(test\)/); 
```

当您创建一个字符串并拥有一个不同的正则表达式对象时。

# php - 使用 JSON 对动态生成的输入字段进行分组

> ID：15864841
> 
> 赞同：0
> 
> 时间：2013-04-07T16:37:24.303
> 
> 标签：php, jquery, json

好的，我需要帮助才能正确编写 jquery 代码和 php

**这个想法**

我希望用户在单击“添加表”按钮后生成多个表，在每个表中，用户可以在单击“添加属性”按钮后生成属性

我想使用 Json 和 jquery.post() 将此表单作为多维数组或嵌套对象发送，然后 php 代码可以访问每个字段

**图片：** [http ://s11.postimg.org/4haqtm8tf/image.jpg](http://s11.postimg.org/4haqtm8tf/image.jpg)

**HTML**

```
<form id="step_2"> <b>Type name of the table:</b> 
  <input type="button" value="Add table" class="add" id="add_t" class="space" />
  <br/>
  <input type="hidden" id="db" name='db_name' value="<?php echo $db; ?>" />
  <!----------------->
  <div id="table_wrap">
    <fieldset id="table1">
      <legend>Table:</legend>
      <input type="text" class="tablename" id="table_name" name="table_name" />
      <input type="button" value="Add attribute" class="add space" id="add" />
      <br/>
      <div class="fieldwrapper" id="field1">
        <b>Attribute</b>
        <input type="text" class="fieldname" id="att" name="att" />
        <select class="fieldtype" id="type" name="type">
          <option value="num">Number</option>
          <option value="text">Text</option>
          <option value="dt">Date/Time</option>
        </select>
      </div>
    </fieldset>
  </div>
  <!--------------------->
  <input type="button" id="back_2" value="Back" />
  <input type="button" id="save_2" value="Save" />
  <input type="button" id="next_2" value="Next" />
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T04:22:02.780

我认为 JSON 数据可以是这样的：

```
 [
     {
        "table_name":"table1",
        "attributes":[
           {
              "attr_name":"id",
              "type":"integer"
           },
           {
              "attr_name":"name",
              "type":"string"
           }
        ]
     },
     {
        "table_name":"table2",
        "attributes":[
           {
              "attr_name":"id",
              "type":"integer"
           },
           {
              "attr_name":"category_id",
              "type":"integer"
           }
        ]
     }
  ] 
```

使用 jQuery，您可以轻松生成此数据结构。这是我的建议代码，我没有测试过，但想法就是这样；）

```
function saveTableData() {
  var tables = [];

  $("#table_wrap fieldset").each(function(index, fieldset){
    // Contains the whole table data
    var table_data = {};
    table_data['table_name'] = $(fieldset).find("#table_name").val();

    // Contains the attributes data
    var attributes = [];

    // To loop all attributes fields
    $(fieldset).find(".fieldwrapper").each(function(idx, attr){
      var attr = {};
      attr['attr_name'] = $(attr).find("#att").val();
      attr['type'] = $(attr).find("#type").val();

      // Add to the attributes collection.
      attributes.push(attr);
    });

    // Then attach attributes to the table data object.
    table_data['attributes'] = attributes;

    // Finally add the table data to final result collection.
    tables.push(table_data);
  });

  // Do something more with result ...
  $.post("/save", {"tables": tables}, function(response) {
    // ...
  })
} 
```

然后在您的服务器端代码中，您只需要处理参数“tables”（其中 value 是一个数组），然后遍历它以执行更多操作。

希望它有帮助:)

# java - 搜索文本文件

> ID：15864842
> 
> 赞同：0
> 
> 时间：2013-04-07T16:37:33.663
> 
> 标签：java, file, search, text

我正在编写一种方法来搜索列表形式的单词文本文件，对于用户输入的单词，但如果找到一个字母，程序将返回肯定结果，例如，如果我搜索“f”当字典中没有单词“F”时，它会返回

```
public static void Option3Method(String dictionary) throws IOException {
    Scanner scan = new Scanner(new File("wordlist.txt"));
    String s;
    String words[] = new String[500];
    String word = JOptionPane.showInputDialog("Enter a word to search for");
    while (scan.hasNextLine()) {
        s = scan.nextLine();
        int indexfound = s.indexOf(word);
        if (indexfound > -1) {
            JOptionPane.showMessageDialog(null, "Word was found");
        } else if (indexfound < -1) {
            JOptionPane.showMessageDialog(null, "Word was not found");
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T16:44:03.020

```
if (indexfound>-1)
{ 
    JOptionPane.showMessageDialog(null, "Word was found");
}
 else if (indexfound<-1)
 {
    JOptionPane.showMessageDialog(null, "Word was not found");}
 } 
```

这段代码的问题是它`indexFound`可以等于`-1`，但不能小于`-1`。`<`将运算符更改为运算`==`符。

**替代**

这是检查 a 是否`String`存在于 another 中的一种相当晦涩的方法`String`。`matches`在 String 对象中使用该方法更为合适。这是[文档](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html)。

**例子**

就像是：

```
String phrase = "Chris";
String str = "Chris is the best";
// Load some test values.
if(str.matches(".*" + phrase + ".*")) { 
    // If str is [something] then the value inside phrase, then [something],true.
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T16:42:44.167

你说字母，你说单词，你到底搜索什么？

如果您搜索单词，则必须在单词边界内搜索单词： regex [java.util.regex.Pattern](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html) \b 如[anubhava](https://stackoverflow.com/users/548225/anubhava)所示。

您可以替换`} else if (indexfound < -1) {`为，`} else {`因为[java.lang.indexOf()](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#indexOf%28int%29)在未找到时返回 -1 >-1 否则，永远不会出现 < -1。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T16:45:02.120

您的“else if”语句应为

```
} else if (indexfound == -1){ 
```

因为如果 indexOf 方法没有找到子字符串，它会准确返回 -1。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-07T16:41:00.097

而不是这样的`String#indexOf`使用[`String#matches`](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#matches%28java.lang.String%29)方法：

```
boolean matched = s.matches("\\b" + word + "\\b"); 
```

这将确保在带有单词边界的行中找到用户输入的单词。

顺便说一句，不清楚你为什么要声明`words`一个包含 500 个元素的字符串数组，你没有在任何地方使用它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-07T17:05:16.127

我发现您的代码中有一些令人困惑的地方。

*   看起来您每个单词输出一次结果，而不是整个文件一次。
*   当你有一本字典时，你通常每行只有一个单词，所以它要么匹配要么不匹配。看起来您（和大多数其他答案）试图在更长的字符串中找到这个词，这可能不是您想要的。如果您搜索“ee”，您不想在“啤酒”中找到它，对吧？

所以，假设字典是每行一个有效的单词，并且你不想在整个字典中的任何地方找到这个单词，这个简单的代码就可以解决问题。

```
import java.io.File;
import java.io.FileNotFoundException;
import java.util.Scanner;

public class Main {

    public static void main(String[] args) throws FileNotFoundException {
        Scanner scanner = new Scanner(new File("wordlist.txt"));
        String word = "Me";
        try {
            while (scanner.hasNextLine()) {
                if (scanner.nextLine().equalsIgnoreCase(word)) {
                    System.out.println("word found");
                    // word is found, no need to search the rest of the dictionary
                    return;
                }
            }
            System.out.println("word not found");
        }
        finally {
            scanner.close();
        }
    }
} 
```

# python - 尝试安装 libgreader 时出错

> ID：15864846
> 
> 赞同：2
> 
> 时间：2013-04-07T16:38:23.843
> 
> 标签：python

```
Daniels-MacBook-Pro:~ daniruhman$ pip install libgreader
Downloading/unpacking libgreader
  Running setup.py egg_info for package libgreader
    Traceback (most recent call last):
      File "<string>", line 16, in <module>
      File "/private/var/folders/47/1m2qc2sx65gf7zqyzzmdtvc80000gn/T/pip-build-daniruhman/libgreader/setup.py", line 3, in <module>
        import libgreader
      File "libgreader/__init__.py", line 11, in <module>
        from .googlereader import GoogleReader
      File "libgreader/googlereader.py", line 11, in <module>
        from .items import SpecialFeed, Item, Category, Feed
      File "libgreader/items.py", line 3, in <module>
        from requests.compat import quote
    ImportError: No module named requests.compat
    Complete output from command python setup.py egg_info:
    Traceback (most recent call last):

  File "<string>", line 16, in <module>

  File "/private/var/folders/47/1m2qc2sx65gf7zqyzzmdtvc80000gn/T/pip-build-daniruhman/libgreader/setup.py", line 3, in <module>

    import libgreader

  File "libgreader/__init__.py", line 11, in <module>

    from .googlereader import GoogleReader

  File "libgreader/googlereader.py", line 11, in <module>

    from .items import SpecialFeed, Item, Category, Feed

  File "libgreader/items.py", line 3, in <module>

    from requests.compat import quote

ImportError: No module named requests.compat

----------------------------------------
Command python setup.py egg_info failed with error code 1 in /private/var/folders/47/1m2qc2sx65gf7zqyzzmdtvc80000gn/T/pip-build-daniruhman/libgreader
Storing complete log in /Users/daniruhman/Library/Logs/pip.log
Daniels-MacBook-Pro:~ daniruhman$ sudo pip install libgreader
Password:
Downloading/unpacking libgreader
  Running setup.py egg_info for package libgreader
    Traceback (most recent call last):
      File "<string>", line 16, in <module>
      File "/private/tmp/pip-build-root/libgreader/setup.py", line 3, in <module>
        import libgreader
      File "libgreader/__init__.py", line 11, in <module>
        from .googlereader import GoogleReader
      File "libgreader/googlereader.py", line 11, in <module>
        from .items import SpecialFeed, Item, Category, Feed
      File "libgreader/items.py", line 3, in <module>
        from requests.compat import quote
    ImportError: No module named requests.compat
    Complete output from command python setup.py egg_info:
    Traceback (most recent call last):

  File "<string>", line 16, in <module>

  File "/private/tmp/pip-build-root/libgreader/setup.py", line 3, in <module>

    import libgreader

  File "libgreader/__init__.py", line 11, in <module>

    from .googlereader import GoogleReader

  File "libgreader/googlereader.py", line 11, in <module>

    from .items import SpecialFeed, Item, Category, Feed

  File "libgreader/items.py", line 3, in <module>

    from requests.compat import quote

ImportError: No module named requests.compat

----------------------------------------
Command python setup.py egg_info failed with error code 1 in /private/tmp/pip-build-root/libgreader
Storing complete log in /Users/daniruhman/Library/Logs/pip.log
Daniels-MacBook-Pro:~ daniruhman$ 
```

有任何想法吗？

尝试过 pip 安装请求：

> Daniels-MacBook-Pro:~ daniruhman$ pip install requests 下载/解包请求 下载 requests-1.2.0.tar.gz (341kB): 341kB 下载 运行 setup.py egg_info 获取包请求

安装收集的包： requests 运行 setup.py install for requests

```
error: could not create '/Library/Python/2.7/site-packages/requests': Permission denied
Complete output from command /usr/bin/python -c "import setuptools;__file__='/private/var/folders/47/1m2qc2sx65gf7zqyzzmdtvc80000gn/T/pip-build-daniruhman/requests/setup.py';exec(compile(open(__file__).read().replace('\r\n', '\n'), __file__, 'exec'))" install --record /var/folders/47/1m2qc2sx65gf7zqyzzmdtvc80000gn/T/pip-OPYIXn-record/install-record.txt --single-version-externally-managed:
running install 
```

运行构建

运行 build_py

创建构建

创建构建/库

创建构建/库/请求

复制 requests/ **init** .py -> build/lib/requests

复制 requests/adapters.py -> build/lib/requests

复制 requests/api.py -> build/lib/requests

复制 requests/auth.py -> build/lib/requests

复制 requests/certs.py -> build/lib/requests

复制 requests/compat.py -> build/lib/requests

复制 requests/cookies.py -> build/lib/requests

复制 requests/exceptions.py -> build/lib/requests

复制 requests/hooks.py -> build/lib/requests

复制 requests/models.py -> build/lib/requests

复制 requests/sessions.py -> build/lib/requests

复制 requests/status_codes.py -> build/lib/requests

复制 requests/structures.py -> build/lib/requests

复制 requests/utils.py -> build/lib/requests

创建 build/lib/requests/packages

复制 requests/packages/ **init** .py -> build/lib/requests/packages

创建 build/lib/requests/packages/charade

复制 requests/packages/charade/ **init** .py -> build/lib/requests/packages/charade

复制 requests/packages/charade/big5freq.py -> build/lib/requests/packages/charade

复制 requests/packages/charade/big5prober.py -> build/lib/requests/packages/charade

复制 requests/packages/charade/chardistribution.py -> build/lib/requests/packages/charade

复制 requests/packages/charade/charsetgroupprober.py -> build/lib/requests/packages/charade

复制 requests/packages/charade/charsetprober.py -> build/lib/requests/packages/charade

复制 requests/packages/charade/codingstatemachine.py -> build/lib/requests/packages/charade

复制 requests/packages/charade/compat.py -> build/lib/requests/packages/charade

复制 requests/packages/charade/constants.py -> build/lib/requests/packages/charade

复制 requests/packages/charade/cp949prober.py -> build/lib/requests/packages/charade

复制 requests/packages/charade/escprober.py -> build/lib/requests/packages/charade

复制 requests/packages/charade/escsm.py -> build/lib/requests/packages/charade

复制 requests/packages/charade/eucjpprober.py -> build/lib/requests/packages/charade

复制 requests/packages/charade/euckrfreq.py -> build/lib/requests/packages/charade

复制 requests/packages/charade/euckrprober.py -> build/lib/requests/packages/charade

复制 requests/packages/charade/euctwfreq.py -> build/lib/requests/packages/charade

复制 requests/packages/charade/euctwprober.py -> build/lib/requests/packages/charade

复制 requests/packages/charade/gb2312freq.py -> build/lib/requests/packages/charade

复制 requests/packages/charade/gb2312prober.py -> build/lib/requests/packages/charade

复制 requests/packages/charade/hebrewprober.py -> build/lib/requests/packages/charade

复制 requests/packages/charade/jisfreq.py -> build/lib/requests/packages/charade

复制 requests/packages/charade/jpcntx.py -> build/lib/requests/packages/charade

复制 requests/packages/charade/langbulgarianmodel.py -> build/lib/requests/packages/charade

复制 requests/packages/charade/langcyrillicmodel.py -> build/lib/requests/packages/charade

复制 requests/packages/charade/langgreekmodel.py -> build/lib/requests/packages/charade

复制 requests/packages/charade/langhebrewmodel.py -> build/lib/requests/packages/charade

复制 requests/packages/charade/langhungarianmodel.py -> build/lib/requests/packages/charade

复制 requests/packages/charade/langthaimodel.py -> build/lib/requests/packages/charade

复制 requests/packages/charade/latin1prober.py -> build/lib/requests/packages/charade

复制 requests/packages/charade/mbcharsetprober.py -> build/lib/requests/packages/charade

复制 requests/packages/charade/mbcsgroupprober.py -> build/lib/requests/packages/charade

复制 requests/packages/charade/mbcssm.py -> build/lib/requests/packages/charade

复制 requests/packages/charade/sbcharsetprober.py -> build/lib/requests/packages/charade

复制 requests/packages/charade/sbcsgroupprober.py -> build/lib/requests/packages/charade

复制 requests/packages/charade/sjisprober.py -> build/lib/requests/packages/charade

复制 requests/packages/charade/universaldetector.py -> build/lib/requests/packages/charade

复制 requests/packages/charade/utf8prober.py -> build/lib/requests/packages/charade

创建 build/lib/requests/packages/urllib3

复制 requests/packages/urllib3/ **init** .py -> build/lib/requests/packages/urllib3

复制 requests/packages/urllib3/_collections.py -> build/lib/requests/packages/urllib3

复制 requests/packages/urllib3/connectionpool.py -> build/lib/requests/packages/urllib3

复制 requests/packages/urllib3/exceptions.py -> build/lib/requests/packages/urllib3

复制 requests/packages/urllib3/filepost.py -> build/lib/requests/packages/urllib3

复制 requests/packages/urllib3/poolmanager.py -> build/lib/requests/packages/urllib3

复制 requests/packages/urllib3/request.py -> build/lib/requests/packages/urllib3

复制 requests/packages/urllib3/response.py -> build/lib/requests/packages/urllib3

复制 requests/packages/urllib3/util.py -> build/lib/requests/packages/urllib3

创建 build/lib/requests/packages/urllib3/packages

复制 requests/packages/urllib3/packages/ **init** .py -> build/lib/requests/packages/urllib3/packages

复制 requests/packages/urllib3/packages/ordered_dict.py -> build/lib/requests/packages/urllib3/packages

复制 requests/packages/urllib3/packages/six.py -> build/lib/requests/packages/urllib3/packages

创建 build/lib/requests/packages/urllib3/packages/ssl_match_hostname

复制 requests/packages/urllib3/packages/ssl_match_hostname/ **init** .py -> build/lib/requests/packages/urllib3/packages/ssl_match_hostname

运行 egg_info

写 requests.egg-info/PKG-INFO

将顶级名称写入 requests.egg-info/top_level.txt

将dependency_links写入requests.egg-info/dependency_links.txt

警告：manifest_maker：未找到标准文件“-c”

读取清单文件'requests.egg-info/SOURCES.txt'

阅读清单模板'MANIFEST.in'

编写清单文件'requests.egg-info/SOURCES.txt'

复制 requests/cacert.pem -> build/lib/requests

运行 install_lib

创建 /Library/Python/2.7/site-packages/requests

错误：无法创建“/Library/Python/2.7/site-packages/requests”：权限被拒绝

* * *

命令 /usr/bin/python -c "import setuptools; **file** ='/private/var/folders/47/1m2qc2sx65gf7zqyzzmdtvc80000gn/T/pip-build-daniruhman/requests/setup.py';exec(compile(open( **file** ) .read().replace('\r\n', '\n'), **file** , 'exec'))" install --record /var/folders/47/1m2qc2sx65gf7zqyzzmdtvc80000gn/T/pip-OPYIXn-record/install -record.txt --single-version-externally-managed failed with error code 1 in /private/var/folders/47/1m2qc2sx65gf7zqyzzmdtvc80000gn/T/pip-build-daniruhman/requests 存储完整的登录 /Users/daniruhman/Library/日志/pip.log Daniels-MacBook-Pro:~ daniruhman$

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T17:38:45.473

好的，我刚刚通过查看`setup.py`. [https://github.com/askedrelic/libgreader/blob/master/setup.py](https://github.com/askedrelic/libgreader/blob/master/setup.py)

它需要`requests`图书馆。

做吧`pip install requests`。

大多数时候，错误会告诉你很多。

# javascript - 带有dragBounds的kineticjs可拖动限制-未运行

> ID：15864850
> 
> 赞同：1
> 
> 时间：2013-04-07T16:38:35.720
> 
> 标签：javascript, canvas, html5-canvas, kineticjs

我想用 DragBounds 拖动我的舞台，限制顶部、左侧、右侧、底部，但它不起作用

```
var stage = new Kinetic.Stage({
    container: 'container',
    width: 578,
    height: 363,
    draggable: true,
    dragBoundFunc: function(pos) {
        var newY = pos.y < 50 ? 50 : pos.y;
        return {
          x: pos.x,
          y: newY
        };
    },
    dragBounds: { // it's not running
        top: 10,
        bottom: 300,
        left: 0,
        right: 500   
    }
}); 
```

这是我的代码[http://jsfiddle.net/kien16/aUWY2/](http://jsfiddle.net/kien16/aUWY2/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-07T17:50:23.183

`dragBounds`不在 KineticJS 的当前版本中...使用`dragBoundFunc`

在此处查看示例：[Kineticjs dragBoundFunc for a rect in a rect](https://stackoverflow.com/questions/15854001/kineticjs-dragboundfunc-for-a-rect-in-a-rect/15865422#15865422)

这是来自 kineticJS 网站的教程：[http ://www.html5canvastutorials.com/kineticjs/html5-canvas-drag-and-drop-shapes-horizo​​ntally-or-vertically-tutorial/](http://www.html5canvastutorials.com/kineticjs/html5-canvas-drag-and-drop-shapes-horizontally-or-vertically-tutorial/)

# php - pdo连接类？

> ID：15864856
> 
> 赞同：0
> 
> 时间：2013-04-07T16:39:04.207
> 
> 标签：php, oop

我想了解 PDO，人们说它很简单，也是与数据库交互的最佳方式，但我发现它并不容易。有什么帮助吗？

连接.php

```
<?php

class Connection {
    public function dbConnect() {
        return new PDO("mysql:host=localhost; dbname=lr", "root", "");
    }
}

?> 
```

索引.php

```
<?php
require_once('pdo.php');
$obj = new Connection();

$obj->dbConnect();
echo 'hello';
?> 
```

这行得通，但它太简单了。什么是最好的方法？

我应该在自己的类中建立连接并将其扩展到我的其他类还是应该使用全局变量来连接？还是有其他更好的方法？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T16:57:28.840

在某种程度上，这确实很容易。
使用全局变量会更容易。当然，您需要使用正确的文件名来包含。

直接来自[PDO 标签维基：](https://stackoverflow.com/tags/pdo/info)

pdo.php

```
<?php
$dsn = "mysql:host=localhost;dbname=lr;charset=utf8";
$opt = array(
    PDO::ATTR_ERRMODE            => PDO::ERRMODE_EXCEPTION,
    PDO::ATTR_DEFAULT_FETCH_MODE => PDO::FETCH_ASSOC
);
$pdo = new PDO($dsn,'root','', $opt); 
```

索引.php

```
<?php
ini_set('display_errors',1);
error_reporting(E_ALL);

require_once('pdo.php');

$stm = $pdo->prepare("SELECT name FROM table WHERE id=?");
$stm->execute(array($_GET['id']));
$name = $stm->fetchColumn();
echo "Hello $name"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T17:07:01.680

您只是在建立联系，而不是告诉我们您要达到的目标。您想发布、更新、删除数据库中的某些内容还是什么？

既然您什么都不问，我能做的最好的事情就是将您链接到一个网站，该网站将尝试教您基础知识。我希望你以前用过数据库。

[http://net.tutsplus.com/tutorials/php/php-database-access-are-you-doing-it-correctly/](http://net.tutsplus.com/tutorials/php/php-database-access-are-you-doing-it-correctly/)

* * *

## 回答 #3

> 赞同：-5
> 
> 时间：2013-04-07T16:47:43.040

看看这个（[https://gist.github.com/dirte/5331258](https://gist.github.com/dirte/5331258)）：

```
<?php
/*
 * PDO Database class
 *
 * Usage:
 * $db = Database::getInstance();
 * Return array of query results, normal statement: $results = $db->query("SELECT * FROM test WHERE name = 'Bob'");
 * Return array of query results, prepared statement (named params): $results = $db->query("SELECT * FROM test WHERE name = :name", array(":name" => "matthew"));
 * Return int of last insert result row id: $db->lastInsertId()
 * Return int of last query result row count: $db->lastQueryRowCount()
 */
class Database {

    /*
     * Instance of the database class
     *
     * @static Database $instance
     */
    private static $instance;

    /*
     * Database connection
     *
     * @access private
     * @var PDO $connection
     */
    private $connection;

    /*
     * Constructor
     *
     * @param $dsn The Data Source Name. eg, "mysql:dbname=testdb;host=127.0.0.1;port=3306"
     * @param $username
     * @param $password
     */
    private function __construct() {
        $this->connection = new PDO("mysql:dbname=".DBNAME.";host=".HOST.";port=".PORT, USER, PASS, array(
                                    PDO::ATTR_PERSISTENT => true,
                                    PDO::ATTR_TIMEOUT => DBTIMEOUT));
        if (empty($this->connection)) {
            trigger_error("Error #D001:", E_USER_ERROR);
            return false;
        }
        $this->connection->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
    }

    /*
     * Gets an instance of the Database class
     *
     * @static $instance
     * @return Database An instance of the database singleton class
     */
    public static function getInstance() {
        if (empty(self::$instance)) {
            try {
                self::$instance = new Database();
            } catch (\PDOException $e) {
                trigger_error("Error #D002: ".$e->getMessage(), E_USER_ERROR);
            }
        }
        return self::$instance;
    }

    /*
     * Runs a query using the current connection to the database
     *
     * @param string query
     * @param array $args An array of arguments for the sanitization such as array(":name" => "foo")
     * @return array Containing all the remaining rows in the result set.
     */
    public function query($query, $args = false) {
        $tokens = array_map('trim',explode(" ",trim($query)));
        $query = str_replace(array("\r\n", "\r", "\t"), " ", $query);
        $query = str_replace('    ', ' ', $query);
        try {
            // Prepare results
            $results=false;

            // Allow for rollback if query fails
            $this->connection->beginTransaction();

            // Prepared statements
            $sth = $this->connection->prepare($query);

            // Execute prepared statement, with or without arguments
            if (empty($args)) {
                $sth->execute();
            } else {
                $multiple = false;
                foreach ($args as $arg) {
                    if (!is_array($arg)) { continue; }
                    $multiple = true;
                    break;
                }
                if ($multiple) {
                    $i=0;$j=count($args);
                    foreach ($args as $arg) {
                        foreach ($arg as $k=>$v) {
                            if ($v === "NULL") { $arg[$k] = NULL; }
                        }
                        $sth->execute($arg);
                        $i++;
                    }
                } else {
                    $i=0;$j=count($args);
                    foreach ($args as $a=>$arg) {
                        if ($arg === "NULL") {$args[$a] = NULL;}
                        $i++;
                    }
                    $sth->execute($args);
                }
            }
            // SELECT: Return array of data or false if 0 rows
            if ($tokens[0] == "SELECT") {
                $sth->setFetchMode(PDO::FETCH_ASSOC);
                $results = $sth->fetchAll();
            }
            // INSERT/UPDATE/REPLACE: Return number of affected rows / array of affected ids ?
            // Note: lastInsertId only works if ID col on table is auto_incremented
            elseif ($tokens[0] == "INSERT"
                    || $tokens[0] == "UPDATE"
                    || $tokens[0] == "REPLACE") {

                // If sessions table, assume key = return id
                $results = $this->connection->lastInsertId();
            }
            // Else: Return number of affected rows
            else {
                $results = $sth->rowCount();
            }
            // Attempt to commit changes, triggers exception if fails
            $this->connection->commit();

        // Rollback changes on failure
        } catch (\PDOException $e) {
            $msg = 'query(): ***** Caught Exception! Rolling back changes *****'.PHP_EOL.'<hr />Query:<pre>'.$query.'</pre>'.PHP_EOL.'<hr />Exception Message:<pre>'.$e->getMessage().'</pre><hr />'.PHP_EOL;
            $this->connection->rollBack();
            trigger_error($msg, E_USER_ERROR);
            return false;
        }

        return $results;
    }

    /*
     * Returns the last insert result row id
     *
     * @return int of last insert result row id
     */
    public function lastInsertId() {
        return $this->connection->lastInsertId();
    }

    /*
     * Returns the last query result row count
     *
     * @return int of last query result row count
     */
    public function lastQueryRowCount() {
        return $this->connection->lastQueryRowCount();
    }

}
?> 
```

# api - 可能还有另一个 ExpressCheckout API 错误代码 10401，其中包含项目总数

> ID：15864861
> 
> 赞同：1
> 
> 时间：2013-04-07T16:39:23.077
> 
> 标签：api, paypal, express-checkout

客户抱怨他得到：

[ACK] => 失败 [VERSION] => 89.0 [BUILD] => 5551055 [L_ERRORCODE0] => 10401 [L_ERRORCODE1] => 10426 [L_ERRORCODE2] => 10413 [L_ERRORCODE3] => 10431 [L_SHORTMESSAGE0] => 交易被拒绝，因为一个无效的论点。有关详细信息，请参阅其他错误消息。[L_SHORTMESSAGE1] => 由于参数无效，交易被拒绝。有关详细信息，请参阅其他错误消息。[L_SHORTMESSAGE2] => 由于参数无效，交易被拒绝。有关详细信息，请参阅其他错误消息。[L_SHORTMESSAGE3] => 由于参数无效，交易被拒绝。有关详细信息，请参阅其他错误消息。[L_LONGMESSAGE0] => 订单总额无效。[L_LONGMESSAGE1] => 项目总数无效。[L_LONGMESSAGE2] => 购物车商品总金额与订单金额不符。[L_LONGMESSAGE3] => 项目金额无效。[L_SEVERITYCODE0] => 错误 [L_SEVERITYCODE1] => 错误 [L_SEVERITYCODE2] => 错误 [L_SEVERITYCODE3] => 错误

但是当我拆分发送到 ExpressCheckout API 的字符串时，一切看起来都井井有条：

```
&L_NAME0=Socks OC11-002
&L_AMT0=10
&L_QTY0=1
&L_NAME1=Socks TC-001 X2
&L_AMT1=10
&L_QTY1=1
&L_NAME2=Tuxedo
&L_AMT2=650
&L_QTY2=1
&L_NAME3=Paypal Fee
&L_AMT3=26.13
&L_QTY3=1
&AMT=786.63
&TAXAMT=90.50
&ITEMAMT=696.13 
```

税额为 13%。尽管有错误，但一切看起来都与我很相配。神秘。非常感谢任何见解！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T20:11:02.517

不确定，但这些是不推荐使用的变量。以下作品：

```
VERSION=97.0
L_PAYMENTREQUEST_0_NAME0=Socks OC11-002
L_PAYMENTREQUEST_0_AMT0=10
L_PAYMENTREQUEST_0_QTY0=1
L_PAYMENTREQUEST_0_NAME1=Socks TC-001 X2
L_PAYMENTREQUEST_0_AMT1=10
L_PAYMENTREQUEST_0_QTY1=1
L_PAYMENTREQUEST_0_NAME2=Tuxedo
L_PAYMENTREQUEST_0_AMT2=650
L_PAYMENTREQUEST_0_QTY2=1
L_PAYMENTREQUEST_0_NAME3=Paypal Fee
L_PAYMENTREQUEST_0_AMT3=26.13
L_PAYMENTREQUEST_0_QTY3=1
PAYMENTREQUEST_0_TAXAMT=90.50
PAYMENTREQUEST_0_ITEMAMT=696.13
PAYMENTREQUEST_0_AMT=786.63
PAYMENTREQUEST_0_CURRENCYCODE=USD
PAYMENTREQUEST_0_PAYMENTACTION=Sale 
```

另外，请参阅 PayPal 用户协议部分：“4.6 无附加费”

# android - 240*320 android设备特定的dim文件

> ID：15864869
> 
> 赞同：0
> 
> 时间：2013-04-07T16:40:27.820
> 
> 标签：android

我有一个适用于许多设备的应用程序，并且我已经定义了基于低、中、高和 xhigh 分辨率的维度文件

但是只有一个尺寸为 240*320 的设备，每件东西都非常小，它应该从低尺寸读取，但它显示的东西太小了，所以我该怎么做才能让这个设备工作而不影响其他分辨率

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T16:45:26.597

240x320 尺寸的屏幕被视为“小”屏幕。您可以将特定于该尺寸屏幕的任何资源放入`-small`目录中（即`layout-small`）。

# vim - 是否可以区分窗口拆分？

> ID：15864871
> 
> 赞同：2
> 
> 时间：2013-04-07T16:40:40.050
> 
> 标签：vim, split, window

vim 是否提供函数或以某种方式返回指示符来区分拆分窗口的类型？我希望能够跟踪拆分是水平的还是垂直的。我想使用脚本中的信息来运行某些操作，具体取决于拆分是 H 还是 V。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T18:37:00.060

例如，要检查窗口是否处于水平拆分状态，您可以获取其高度并将其与屏幕总高度进行比较。

```
if winheight(0) + &cmdheight + 1 != &lines
  " current window is part of a horizontal split
endif 
```

（命令行和状态行高度的条件因素也是如此）。

对于垂直拆分检查，您只需要：

```
if winwidth(0) != &columns
   " current window is in a vertical split
endif 
```

# git - 在其他笔记本电脑/计算机上克隆 Octopress 博客时遇到问题。（git pull origin master 时的冲突问题）

> ID：15864872
> 
> 赞同：0
> 
> 时间：2013-04-07T16:40:41.327
> 
> 标签：git, github, clone, blogs, octopress

我是 Git 的初学者，我在克隆 Octopress 博客时遇到了麻烦。（我的主要笔记本电脑意外崩溃了......所以我试图通过从 GitHub 拉出我的 Octopress 来从其他笔记本电脑上恢复我的博客）所以我尝试按照这个
[http://blog.zerosharp.com/clone-your-octopress-to -blog-from-two-places/](http://blog.zerosharp.com/clone-your-octopress-to-blog-from-two-places/)
但是当我尝试最后一步时，我在终端上收到错误消息，如下所示：

```
$ cd ./_deploy
$ git pull origin master  # update the local master branch 
```

我收到了这个错误：

```
warning: no common commits
remote: Counting objects: 518, done.
remote: Compressing objects: 100% (386/386), done.
remote: Total 518 (delta 221), reused 350 (delta 59)
Receiving objects: 100% (518/518), 256.54 KiB, done.
Resolving deltas: 100% (221/221), done.
From github.com:yhagio/yhagio.github.com
 * branch            master     -> FETCH_HEAD
Auto-merging index.html
CONFLICT (add/add): Merge conflict in index.html
Automatic merge failed; fix conflicts and then commit the result. 
```

如果有人知道如何解决这个问题，请教我如何解决这个问题。我是初学者，所以我真的不知道。

而且，当我“git status”时，我得到了这个：

```
# On branch master
# Changes to be committed:
#
#   new file:   README.md
#   new file:   about/index.html
#   new file:   assets/jwplayer/glow/controlbar/background.png
#   new file:   assets/jwplayer/glow/controlbar/blankButton.png
#   new file:   assets/jwplayer/glow/controlbar/divider.png
#   new file:   assets/jwplayer/glow/controlbar/fullscreenButton.png
#   new file:   assets/jwplayer/glow/controlbar/fullscreenButtonOver.png
#   new file:   assets/jwplayer/glow/controlbar/muteButton.png
#   new file:   assets/jwplayer/glow/controlbar/muteButtonOver.png
#   new file:   assets/jwplayer/glow/controlbar/normalscreenButton.png
#   new file:   assets/jwplayer/glow/controlbar/normalscreenButtonOver.png
#   new file:   assets/jwplayer/glow/controlbar/pauseButton.png
#   new file:   assets/jwplayer/glow/controlbar/pauseButtonOver.png
#   new file:   assets/jwplayer/glow/controlbar/playButton.png
#   new file:   assets/jwplayer/glow/controlbar/playButtonOver.png
#   new file:   assets/jwplayer/glow/controlbar/timeSliderBuffer.png
#   new file:   assets/jwplayer/glow/controlbar/timeSliderCapLeft.png
#   new file:   assets/jwplayer/glow/controlbar/timeSliderCapRight.png
#   new file:   assets/jwplayer/glow/controlbar/timeSliderProgress.png
#   new file:   assets/jwplayer/glow/controlbar/timeSliderRail.png
#   new file:   assets/jwplayer/glow/controlbar/unmuteButton.png
#   new file:   assets/jwplayer/glow/controlbar/unmuteButtonOver.png
#   new file:   assets/jwplayer/glow/display/background.png
#   new file:   assets/jwplayer/glow/display/bufferIcon.png
#   new file:   assets/jwplayer/glow/display/muteIcon.png
#   new file:   assets/jwplayer/glow/display/playIcon.png
#   new file:   assets/jwplayer/glow/dock/button.png
#   new file:   assets/jwplayer/glow/glow.xml
#   new file:   assets/jwplayer/glow/playlist/item.png
#   new file:   assets/jwplayer/glow/playlist/itemOver.png
#   new file:   assets/jwplayer/glow/playlist/sliderCapBottom.png
#   new file:   assets/jwplayer/glow/playlist/sliderCapTop.png
#   new file:   assets/jwplayer/glow/playlist/sliderRail.png
#   new file:   assets/jwplayer/glow/playlist/sliderThumb.png
#   new file:   assets/jwplayer/glow/sharing/embedIcon.png
#   new file:   assets/jwplayer/glow/sharing/embedScreen.png
#   new file:   assets/jwplayer/glow/sharing/shareIcon.png
#   new file:   assets/jwplayer/glow/sharing/shareScreen.png
#   new file:   assets/jwplayer/player.swf
#   new file:   atom.xml
#   new file:   blog/2013/04/05/hello/index.html
#   new file:   blog/2013/04/05/how-to-install-rails-on-ubuntu-12-dot-10/index.html
#   new file:   blog/2013/04/05/web-development-related-books/index.html
#   new file:   blog/2013/04/06/news-letters-for-web-developers/index.html
#   new file:   blog/2013/04/06/notes-deployment-options-and-tech-overview/index.html
#   new file:   blog/2013/04/06/ruby-and-rails-learning-resources/index.html
#   new file:   blog/2013/04/06/stuffs-for-sublime-text/index.html
#   new file:   blog/archives/index.html
#   new file:   blog/categories/learn/atom.xml
#   new file:   blog/categories/learn/index.html
#   new file:   blog/categories/notes/atom.xml
#   new file:   blog/categories/notes/index.html
#   new file:   blog/categories/rails/atom.xml
#   new file:   blog/categories/rails/index.html
#   new file:   blog/categories/ruby/atom.xml
#   new file:   blog/categories/ruby/index.html
#   new file:   blog/categories/test/atom.xml
#   new file:   blog/categories/test/index.html
#   new file:   blog/categories/ubuntu/atom.xml
#   new file:   blog/categories/ubuntu/index.html
#   new file:   favicon.png
#   new file:   images/bird_32_gray.png
#   new file:   images/bird_32_gray_fail.png
#   new file:   images/code_bg.png
#   new file:   images/dotted-border.png
#   new file:   images/email.png
#   new file:   images/line-tile.png
#   new file:   images/noise.png
#   new file:   images/rss.png
#   new file:   images/search.png
#   new file:   javascripts/github.js
#   new file:   javascripts/libs/jXHR.js
#   new file:   javascripts/libs/jquery.min.js
#   new file:   javascripts/libs/swfobject-dynamic.js
#   new file:   javascripts/modernizr-2.0.js
#   new file:   javascripts/octopress.js
#   new file:   javascripts/pinboard.js
#   new file:   javascripts/twitter.js
#   new file:   robots.txt
#   new file:   sitemap.xml
#   new file:   stylesheets/screen.css
#
# Unmerged paths:
#   (use "git add/rm <file>..." as appropriate to mark resolution)
#
#   both added:         index.html
#
# Untracked files:
#   (use "git add <file>..." to include in what will be committed)
#
#   index.html.BACKUP.10518.html
#   index.html.BACKUP.10568.html
#   index.html.BACKUP.10632.html
#   index.html.BACKUP.9048.html
#   index.html.BACKUP.9560.html
#   index.html.BACKUP.9753.html
#   index.html.BASE.10518.html
#   index.html.BASE.10568.html
#   index.html.BASE.10632.html
#   index.html.BASE.9048.html
#   index.html.BASE.9560.html
#   index.html.BASE.9753.html
#   index.html.LOCAL.10518.html
#   index.html.LOCAL.10568.html
#   index.html.LOCAL.10632.html
#   index.html.LOCAL.9048.html
#   index.html.LOCAL.9560.html
#   index.html.LOCAL.9753.html
#   index.html.REMOTE.10518.html
#   index.html.REMOTE.10568.html
#   index.html.REMOTE.10632.html
#   index.html.REMOTE.9048.html
#   index.html.REMOTE.9560.html
#   index.html.REMOTE.9753.html 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T16:55:20.933

这不是错误，它是 Git 告诉您它试图从远程存储库中提取的文件存在冲突。

所以敞开心扉`index.html`，[化解矛盾](https://stackoverflow.com/questions/1435754/how-do-i-resolve-a-conflict-after-git-pull)，`git add`就这样吧`commit`。

# php - 简单的 JQuery POST 甚至不起作用

> ID：15864877
> 
> 赞同：0
> 
> 时间：2013-04-07T16:41:09.460
> 
> 标签：php, jquery, post

好的，所以我是 JQuery 的新手，但无论如何，这似乎是一件很简单的事情。

我正在开发一种“购物车”，其中项目存储在本地，然后通过 jquery.post 发送到邮件脚本。

现在，由于某种原因，我的代码没有做任何事情，我不知道为什么，因为它的代码简单明了。我已将我的购物车变量替换为简单的文本来测试它，因为我认为我的数据可能是真正的罪魁祸首。

```
$(".order-cart").click(function() {
    $current_cart = "test";
    $.post('../thank-you.php', {cart_items:$current_cart}, function (response) {
        alert(response);
    });
    return false;
}); 
```

我已经测试了按钮，工作正常。但它仍然没有做任何事情......为什么这不起作用？我错过了什么？我还在 WAMP 和在线服务器上对其进行了测试。

PHP 就是这样：

```
<?php
$cart_items = $_POST["cart_items"];
echo $cart_items;
?> 
```

非常感谢！

```
Edit:
After playing around with it a bit, I noticed the following error in the console (using Chrome)
XMLHttpRequest cannot load file:///C:/Design/Assault%20Ou%20Studios/Clients/Client%20Work/2Dive4%20Scuba/Website/thank-you.php. Origin null is not allowed by Access-Control-Allow-Origin. 
```

有谁知道这是什么意思？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T16:45:45.700

尝试像这样初始化您的变量：

```
$(".order-cart").click(function() {
    var current_cart = "test";
    $.post('../thank-you.php', {cart_items: current_cart}, function (response) {
        alert(response);
    });
    return false;
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T17:14:18.357

你的脚本是正确的！！！！
您的**“thank-you.php”**文件位置不正确！！！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T16:47:24.647

这个对我有用！
把它放在新文件中并测试它

```
<script src="http://code.jquery.com/jquery-latest.min.js" type="text/javascript"></script>
<input type='button' class='order-cart' value='click me'>
<script>
$(".order-cart").click(function() {
    $current_cart = "test";
    $.post('../thank-you.php', {cart_items:$current_cart}, function (response) {
        alert(response);
    });
    return false;
});
</script> 
```

您还确定您的“thank-you.php”文件位置正确吗？

# vba - VBA：从子调用函数

> ID：15864879
> 
> 赞同：0
> 
> 时间：2013-04-07T16:41:17.233
> 
> 标签：vba, ms-access

```
Private Function DisplayReport()
    DoCmd.OpenReport List0, acViewNormal
End Function

Private Sub Command3_Click()

End Sub 
```

我试图弄清楚单击 Command3 时如何调用 DisplayReport()（这是在 Access 2010 中）。

我希望这将打开当前在 List0（列表框）中选择的报告。这是正确的做法吗？

编辑：我想我从其他地方的阅读中了解到这是一个“受信任的位置”问题？这是什么意思，我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T17:03:21.430

您`Sub Command3_Click`的不包含可执行语句。尝试

```
Private Sub Command3_Click()
    DisplayReport
End Sub 
```

此外，验证`On Click`按钮的事件属性是否与处理程序相关联。如果该行为空，请单击省略号按钮 [...] 并选择“代码生成器”。

![命令](https://i.stack.imgur.com/K7rlq.png)

## 编辑

如果您进行了这些更改并且事件仍然没有触发，则关闭并重新打开数据库。如果您在“访问”窗口顶部附近看到一条警告，上面写着...

> **安全警告**某些活动内容已被禁用。点击了解更多详情。

...然后请务必单击“启用内容”按钮。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T16:51:38.120

你试过这个吗？

```
Call DisplayReport 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T17:08:13.530

1.  你假装 DisplayReport 是一个函数，但它实际上什么也不返回
2.  因此，将其更改为 Sub：

```
  私人子展示报告
      DoCmd.OpenReport List0, acViewNormal
  结束子

```

因此从点击处理程序调用它：

```
    私有子 Command3_Click()
        调用显示报告
    结束子

```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-07T17:33:39.387

好的，这是我在使用 Access 2010 时遇到的问题。问题是我的数据库不受信任。我设法更改了此设置，现在代码运行良好。

# java - 以货币格式格式化 Double，使其小数点后有两个零，而不是 1

> ID：15864885
> 
> 赞同：-1
> 
> 时间：2013-04-07T16:42:00.070
> 
> 标签：java, double, currency, zero, decimal-point

我目前有一个`Double`应该显示货币的。然而，当 Double 实际显示时，它只显示这样的数据：“32.0”。我希望它采用“32.00”的格式。有没有办法修复 Double 的格式以及小数点后显示多少个数字？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T16:43:51.857

首先，不要使用双打来存储金额。请改用 BigDecimal。在处理金钱时，您不希望浮点运算固有的舍入错误。

其次，使用 java.text.DecimalFormat 格式化您的数字。

# ruby - 带有Haml的Sinatra导航栏

> ID：15864890
> 
> 赞同：0
> 
> 时间：2013-04-07T16:42:17.553
> 
> 标签：ruby, sinatra, haml

我有一个使用 haml 的小型 Sinatra 应用程序。我想在每个页面上都有一个导航栏，其中包含菜单、搜索和方向滚动箭头。由于这将在每个页面上，我认为布局将是正确的位置。我找不到一个很好的例子来说明如何在任何地方实现这一点。

这会是一个有很多条件的布局吗？类名和链接将根据当前页面的内容而变化。

实现这一目标的最佳实践是什么，有什么例子吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-03T00:58:38.003

我相信part​​ials是我应该一直在寻找的。它们似乎插入到我需要它们的地方。

> Sinatra 是一个超轻量级的框架。因此，它没有内置的部分概念。但是，最简单形式的部分只是调用将模板呈现为字符串，然后将该字符串嵌入到您的页面中。

```
= haml(:mypartial, :layout => false) 
```

见[http://steve.dynedge.co.uk/2010/04/14/render-rails-style-partials-in-sinatra/](http://steve.dynedge.co.uk/2010/04/14/render-rails-style-partials-in-sinatra/)

# android - 每次打开时更新 MainActivity 中的值

> ID：15864894
> 
> 赞同：1
> 
> 时间：2013-04-07T16:42:27.470
> 
> 标签：android, eclipse, android-activity, oncreate

每次打开 MainActivity 时如何调用它的 onCreate ？

我想这样做：我打开我的应用程序，这是我的 MainActivity，然后我打开 ActivityB 并保存一些数据。当我关闭我的 ActivityB 时，我将返回 MainActivity，但我在 MainActivity 中的数据没有更新，因为没有调用 onCreate。

像这样解决它是否正确（这是有效的，但我知道这不是一个好方法）：

前往 ActivityB 的按钮：

```
 public void ActivityB(View view){
    Intent intent = new Intent(this, ActivityB.class);
    startActivity(intent);
    finish();
} 
```

返回 MainActivity 的按钮：

```
public void Back(View view){
    finish();
    Intent intent = new Intent(this, MainActivity.class);
    startActivity(intent);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T16:49:50.110

你应该看看这个：http: [//developer.android.com/training/basics/activity-lifecycle/pausing.html](http://developer.android.com/training/basics/activity-lifecycle/pausing.html)

基本上，每个活动都有除“onCreate”之外的更多事件，例如“onResume”，在这种情况下，应该在 MainActivity 回到前台时调用它，并且您应该将代码放在那里。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T16:50:11.600

采用`startActivityForResult`

```
public void ActivityB(View view){
Intent intent = new Intent(this, ActivityB.class);
startActivityForResult(intent, 1); 
```

}

然后上`onActivityResult`

```
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent intent)
{
    super.onActivityResult(requestCode, resultCode, intent);

    String sp = intent.getStringExtra("sp");
} 
```

在活动 B

```
@Override
public void onBackPressed()
{
    Intent i = new Intent();
    i.putExtra("sp", value); // the change value of sp
    setResult(RESULT_OK);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T17:20:05.540

假设您在主 Activity A 中有一个 Textview，并且您正在使用

```
Textview myTextview =(Textview)findViewbyId(R.id.textview1);
myTextView.setText("Android"); 
```

您正在从活动 A 导航到活动 B。当活动 B 完成时，将调用活动 A 的 onResume() 方法。所以在 onResume() 中更新 textview 如下

```
onResume(){
myTextview.setText("Jelly Bean")}; 
```

因此，当您返回屏幕时要更新的任何视图都可以在该活动的 onResume() 方法上执行。希望清楚

# node.js - 如何创建 nodejs ssl 服务器？

> ID：15864897
> 
> 赞同：7
> 
> 时间：2013-04-07T16:42:35.923
> 
> 标签：node.js, ssl

nodejs 版本：0.8.6
我使用 openssl 和以下命令创建了一个 ssl csr 文件： openssl req -nodes -newkey rsa:2048 -keyout myserver.key -out myserver.csr

*   csr 内容已发送到我的 SSL 提供商，证书已发回。

现在我想创建一个 SSL 安全服务器：

```
var fs = require("fs");
var https = require('https');
var credentials = {
            key: fs.readFileSync(options.base_project_folder + 'privatekey.pem'),
            cert: fs.readFileSync(options.base_project_folder + 'certificate.pem')
};
var server = https.createServer(credentials, app);
server.listen(port, address, function() {
    var addr = this.address();
    console.log('listening on %s:%d', addr.address, addr.port);
}); 
```

服务器正在运行，但我得到：“SSL 连接错误”

试图检查我所做的问题：openssl s_client -connect my_dns:443 // my_dns 指向我的 nodejs 服务器当然

结果：CONNECTED（00000003）139813382997664：错误：140790E5：SSL例程：SSL23_WRITE：ssl握手失败：s23_lib.c：177：
没有可用的对等证书
没有发送客户端证书CA名称
SSL握手已读取0字节并写入226字节
新，（ NONE)，密码为 (NONE)
不支持安全重新协商
压缩：NONE
扩展：NONE

谁能帮我 ？我在 SSL 的黑暗中迷路了 :(

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-07T17:54:26.697

尝试像这样添加 CA：

```
var credentials = {
  key: fs.readFileSync(options.base_project_folder + 'privatekey.pem'),
  cert: fs.readFileSync(options.base_project_folder + 'certificate.pem'),
  ca: fs.readFileSync(/path/to/CA/cert)
}; 
```

[文档说](http://nodejs.org/api/https.html#https_https_createserver_options_requestlistener)options 参数类似于[tls.createServer](http://nodejs.org/api/tls.html#tls_tls_createserver_options_secureconnectionlistener)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T17:18:00.057

我相信您还需要为签名者指定 CA 证书。由于这不是自签名证书，因此您应该从获得证书的任何地方收到捆绑包。

一些应该有帮助的链接：http: [//qugstart.com/blog/node-js/install-comodo-positivessl-certificate-with-node-js/](http://qugstart.com/blog/node-js/install-comodo-positivessl-certificate-with-node-js/) [http://www.gettingcirrius.com/2012/06/securing -nodejs-and-express-with-ssl.html](http://www.gettingcirrius.com/2012/06/securing-nodejs-and-express-with-ssl.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-04-21T07:48:21.647

**如何通过 cloudflare 做到这一点？**

使用明显的 ssl 凭据创建您的 websocket.js

```
var https = require('https');
var credentials = {
            key: fs.readFileSync('/location/to/privatekey.pem'),
            cert: fs.readFileSync(/location/to/certificate.pem')
};
var server = https.createServer(credentials, app); 
```

1) 注册[云耀斑](https://www.cloudflare.com/)

2) 将您的域 dns 服务器指向 cloudflare ns 服务器

3) 生成原始证书并将私钥和证书保存到您的服务器 privatekey.pem & certificate.pem

4) 确保您在 websocket 中使用 SSL 端口，并且您的路由器防火墙允许该端口。

# java - 将 EditText 转换为浮点数 - android eclipse

> ID：15864910
> 
> 赞同：1
> 
> 时间：2013-04-07T16:43:59.323
> 
> 标签：java, android

我想转换`EditText`为浮动。我这样做：

```
EditText edt = (EditText) findViewById(R.id.price);
float number = Float.valueOf(edt.getText().toString()); 
```

该应用程序也没有加载到我的设备和模拟器中。在他们两个写：

```
"the application has stopped unexpectedly. please try again." 
```

如果我删除这一行：

```
float number = Float.valueOf(edt.getText().toString()); 
```

该应用程序可以加载。

我能做什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T16:49:42.200

我的猜测`edt.getText().toString()`是不会返回一个可以变成浮点数的值。尝试将以下内容放在您的代码周围

`

```
float number = 0;
try{
   number = Float.valueOf(edt.getText().toString());
} catch (NumberFormatException e) {
   e.printStackTrace();
} 
```

` 这应该给你一个线索，为什么它会死。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T16:46:22.087

如果 中没有 a `Number`，`EditText`则无法将其转换为浮点数，您将得到`NumberFormatException`.

`Float.valueOf`因此，在该方法周围添加一个 try-catch 。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T16:46:32.900

您的应用程序很可能会崩溃，因为您在应用程序刚刚启动时尝试将 EditText 的内容转换为浮点数。此时，EditText 可能是空的，或者填充了您在布局文件中设置的一些默认文本，这可能会导致 a`NullPointerException`或`NumberFormatException`.

尝试在 TextWatcher 中获取浮点值：

```
edt.addTextChangedListener(new TextWatcher() {

    @Override
    public void afterTextChanged(Editable s) {
        // TODO Auto-generated method stub
        float number = Float.valueOf(edt.getText().toString());
    }

    @Override
    public void beforeTextChanged(CharSequence s, int start, int count, int after) {
        // TODO Auto-generated method stub

    }

    @Override
    public void onTextChanged(CharSequence s, int start, int before, int count) {

    } 

}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-07T16:46:45.433

您试图`EditText`在应用程序打开后获取 right 的值，这意味着没有输入任何内容，应用程序会抛出`NumberFormatException`.

只有当您确定输入了某些内容时，您才应该获取在 中输入的值`EditText`，例如`OnClick`在`Button`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-07T16:47:57.907

`edt`必须包含文本，并且文本中的每个字符必须是数字或小数点。特别注意空字符串“”不代表0。它不能被解释为浮点值，所以会导致异常。只有“0”、“0.0”等可以解释为零。

您应该`edt`在获得值之前测试 的值，`catch`并且`Exception`正确。您还应该将 of 设置`inputType`为`edt`十进制。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-09T09:01:42.527

```
EditText edt = (EditText) findViewById(R.id.price);
float number=   Float.parseFloat(edt.getText().toString()); 
```

# html - 我应该使用 , 和标签吗？

> ID：15864911
> 
> 赞同：2
> 
> 时间：2013-04-07T16:44:00.353
> 
> 标签：html

我试过 CodeAvengers.com，它真的很棒。他们这样说：

> 大多数 HTML 代码包含 3 个我们尚未使用的标签`html`：`head`和`body`. 这些标签是可选的；由于 Google 建议不要使用可选标签，因此我们不使用它们。

为什么 Google 建议不要使用它们？我认为那个`html`标签没用，但`head`看起来`body`并不无用。我认为这两个标签是有道理的。

有人可以向我解释为什么 Google 不推荐它们吗？另一件事是谷歌不推荐它们，但谷歌使用它们。所以？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T16:55:25.363

我能找到的唯一参考资料是关于[减少 HTML 文档文件大小](https://developers.google.com/speed/articles/optimizing-html)的。除此之外，谷歌似乎并不*推荐*它们，只是说排除它们是有效的，您可以减少文件大小并加快您的网站速度。但是，我怀疑它会对您个人产生任何影响。

我认为这取决于个人喜好。例如，假设的重复答案表明省略标签会使测试用例更加集中/清晰。

我个人习惯于将这些标签用于生产，因为它消除了您想要的所有歧义。您可能还希望将属性添加到`<html>`（例如`lang`）`<head>`、 和`<body>`标签，否则这些属性不会自动添加。

如果您真的希望您的 HTML 在提供服务时尽可能小，同时为开发人员保持代码清晰，我相信您可以找到一个预处理器，它可以为您删除不必要的 HTML 标记等等。

# javascript - CoffeeScript 从 JSON 获取键/值错误

> ID：15864917
> 
> 赞同：0
> 
> 时间：2013-04-07T16:44:29.527
> 
> 标签：javascript, json, coffeescript

这是我的json字符串：

```
{
    "long-url":"http://a.longlongurl.com";
} 
```

解析json字符串：

```
var jsonObj = JSON.parse json_str
alert(jsonObj.long-url); 
```

错误：`ReferenceError: url is not defined`。看起来像`-`在关键使这个错误。如果键中有a，如何获得价值`minus`？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-07T16:45:35.363

你的减法`url`。 那不是你想做的。`jsonObj.long`

相反，使用索引器表示法：

```
jsonObj["long-url"] 
```

# mysql - JPQL 内连接

> ID：15864918
> 
> 赞同：1
> 
> 时间：2013-04-07T16:44:41.553
> 
> 标签：mysql, database, hql, jpql

我正在尝试将 mysql 代码转换为 JPQL。我有两张桌子。第一个表名为 Product。它有以下字段：id 和 code。第二个表称为描述符，它有 3 个字段：id（来自产品表）、代码（来自产品表）和描述，它是描述符表的特定字段。我想加入表格，因此对于产品 ID 和产品代码的每个唯一组合，我都希望添加描述。

```
 The Sql is as follows ( this is correct): 
    Select Product.id, Product.code, Descriptor.DESCRIPTION
    from Product Inner join Descriptor where 
    Product.id = Descriptor.id and 
    Product.code = Descriptor.code

(The error is in here)
The JPQL I am trying is as follows which results in a "path" error
select p from Product p INNER JOIN Descriptor d where 
p.id = d.id and p.code = d.code; 
```

非常欢迎所有建议谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T16:49:42.000

阅读[有关 HQL 的文档](http://docs.jboss.org/hibernate/core/3.6/reference/en-US/html_single/#queryhql-joins)。在 HQL 中，连接是使用实体之间的关联完成的：

```
select p from Product p 
inner join p.descriptor d 
where p.code = d.code; 
```

（假设 Product 和 Descriptor 之间存在 OneToOne 关联，使用它们各自的 ID）。

# sml - 如何检查列表是否为空

> ID：15864922
> 
> 赞同：2
> 
> 时间：2013-04-07T16:44:58.933
> 
> 标签：sml, smlnj

刚开始学习 sml，请原谅我可能造成的任何不适。

好的，这是我的功能：

```
fun swapPairsInList [(x,y)]
swapPairsInList: (’x * ’y) list --> (’y * ’x) list 
```

我知道如何（递归地）交换列表中的对，但我遇到的问题是列表为空（null）时的基本情况。我如何检查这个列表是否为空？我试过

```
null [(x,y)] 
```

但这只是抛出一个异常。我应该使用模式匹配来解决这个问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T12:06:24.853

备查：

```
fun swapPairsInList []            = []
  | swapPairsInList ((x,y)::tail) = (y,x) :: swapPairsInList tail 
```

该模式`[]`与空列表匹配。

当然，使用像 map 和 foldl 这样的高阶函数要好得多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T20:04:00.857

好的，所以我想通了，一旦我查看位于[ListPair 结构中的 map 函数，我就从错误的角度解决了这个问题](http://www.standardml.org/Basis/list-pair.html#SIG%3aLIST_PAIR.map%3aVAL)

新代码：

```
fun swap (x,y) = (y,x);
fun pairSwap l = map swap l; 
```

# c++ - C++ 模板返回值

> ID：15864928
> 
> 赞同：-1
> 
> 时间：2013-04-07T16:45:19.583
> 
> 标签：c++, function, templates, types, return

我需要使用模板实现一个为任何数据类型 T 服务的队列，我需要实现的一个函数称为 T getFirst() ，它返回第一个节点的值，我原来的方法是：

```
T getFirst(){
    T returnValue = _first->_data;
    return returnValue;
} 
```

我发现这不起作用，如果我打电话

```
Queue<int> q;
q.add(2);
cout << Q.getFirst() << endl; 
```

输出是一些垃圾。令人惊讶的是，如果我将代码简化为：

```
T getFirst(){
    return _first->_data;
} 
```

它有效！！，为什么？？？有人可以解释一下。我需要第一种方法的原因是稍后我需要实现 removeFirst()，我可能需要临时保存数据。非常感谢各位！！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T16:46:34.297

看起来你真的想要：

```
return returnValue; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T16:46:37.323

在这里你有错误：

```
T getFirst(){
   T returnValue = _first->_data;
   return getFirst;  //^^^You return function name? 
} 
```

应该

```
T getFirst(){
   T returnValue = _first->_data;
   return returnValue ;
} 
```

# php - 如何使用 Laravel Auth 方法来验证对控制器的访问权限？

> ID：15864933
> 
> 赞同：0
> 
> 时间：2013-04-07T16:45:35.910
> 
> 标签：php, authentication, laravel, routes

我一直在阅读[http://codehappy.daylerees.com](http://codehappy.daylerees.com)并逐渐进入 Laravel，但在尝试使身份验证正常工作后，我偶然发现了一些困惑。

该站点上的示例大多数使用闭包，并且基本上做了很多我个人在`routes.php`文件内的控制器中做的事情。没问题，Laravel 让我使用控制器和路由，但是假设我希望在路由中限制对我的管理面板的访问。所以不要让用户在`http://example.com/admin`没有先认证的情况下去。解释涵盖了这一点，但使用了闭包/匿名函数。所以使用闭包它看起来像这样：

```
Route::get('admin', array('before' => 'auth', 'do' => function() {
  // return admin view
})); 
```

所以我尝试以同样的方式使用它，但是使用这样的控制器：

```
Route::get('admin', array('before' => 'auth', 'do' => 'admin_controller@index')); 
```

这会产生一个白页。

所以我的问题是如何将“get”转发给控制器，而不是在仍然进行身份验证的同时用闭包处理它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T17:09:27.087

使用`uses`代替`do`

```
Route::get('admin', array('before' => 'auth', 'uses' => 'admin_controller@index')); 
```

# java - 从类分配布尔值后程序卡住

> ID：15864937
> 
> 赞同：-3
> 
> 时间：2013-04-07T16:45:45.703
> 
> 标签：java, class

我有一个程序，它从实现 a（布尔类型）的类中分配一个布尔值。但是当我运行程序时，它在我从类中分配布尔值后卡住了。

这是我的代码：

班上：

```
public static class TCP_Ping implements Callable<Boolean> {

        private final BufferedReader in;
        private final PrintWriter out;
        private final String ip;
        private final int port;
        private final int time;

        public TCP_Ping(BufferedReader _in, PrintWriter _out, String _ip,
                int _port, int _time) {

            this.in = _in;
            this.out = _out;
            this.ip = _ip;
            this.port = _port;
            this.time = _time;

        }

        @Override
        public Boolean call() {

            boolean returnValue = false;
            String address = ip + ":" + port;
            long before = System.nanoTime();
            out.println(new byte[64]);
            System.out.println("(" + time + ") Sent 64 bytes of data to "
                    + address + "...");

            try {

                if ((in.readLine()) != null) {

                    int size = in.readLine().toString().getBytes().length;
                    long after = System.nanoTime();
                    long s = ((after - before) / 1000000L) / 1000;
                    System.out.println("(" + time + ") Recieved reply from "
                            + address + " (" + size + " bytes), time = " + s
                            + " seconds...");
                    returnValue = true;

                } else if ((in.readLine()) == null) {

                    long after = System.nanoTime();
                    long s = ((after - before) / 1000000L) / 1000;
                    System.out.println("(" + time
                            + ") Failed to recieve reply from " + address
                            + ", time = " + s + " seconds...");
                    returnValue = false;

                }

            } catch (IOException exc) {

                long after = System.nanoTime();
                long s = ((after - before) / 1000000L) / 1000;
                System.err.println("(" + time
                        + ") Failed to recieve reply from " + address
                        + ", time = " + s + " seconds...");
                returnValue = false;

            }

            return returnValue;

        }

    } 
```

布尔值被分配的位置：

```
System.out.println("Starting ping...");
            System.out.println("Will ping " + address
                    + " with 64 bytes of data...");

            long start = System.currentTimeMillis();
            final FutureTask<Boolean> ft1 = new FutureTask<Boolean>(
                    new TCP_Ping(in, out, ip, port, 1));
            Thread t1 = new Thread(ft1);
            t1.start();

            try {

                while (t1.isAlive()) {

                    t1.join(20000);

                    if (((System.currentTimeMillis() - start) >= 20000)
                            && t1.isAlive()) {
                        t1.interrupt();
                        System.out
                                .println("(1) - Failed to receive reply from "
                                        + address
                                        + ", since the ping timed out, time = 20 seconds...");
                        result = false;
                        break;

                    }

                    break;

                }

            } catch (InterruptedException exc) {

                System.err
                        .println("(1) - An interuption occurred during a ping to "
                                + address + "...");

            }

            try {

                result = ft1.get();

            } catch (Exception exc) {

                System.err.println("Uh, oh! An internal error occurred!");

            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T16:48:59.490

你的问题不清楚，但我怀疑这是问题所在：

```
if ((in.readLine()) != null) {
    int size = in.readLine().toString().getBytes().length; 
```

从输入中读取*两*行。你几乎肯定不是那个意思。我怀疑你想要类似的东西：

```
String line = in.readLine();
if (line != null) {
    int size = line.getBytes().length; 
```

...虽然我*强烈*建议不要在`String.getBytes`不指定编码的情况下使用。

同样，您正在阅读*另一*行：

```
} else if ((in.readLine()) == null) { 
```

`else`...尽管如果您阅读了最后一行，您只会进入该条件，但尚不清楚您为什么会在这里遇到一个条件。我认为你的意思只是一个简单的`else`条款。

# download - 使用 AFHTTPRequestOperation 下载文件时 AFNetworking+Strange

> ID：15864938
> 
> 赞同：0
> 
> 时间：2013-04-07T16:45:48.673
> 
> 标签：download, afnetworking

伙计们。我的文件中有这段代码。

```
AFHTTPClient *_client = [[AFHTTPClient alloc] initWithBaseURL:[NSURL URLWithString:@"http://192.168.1.1/file/download/"]];
[_client registerHTTPOperationClass:[AFHTTPRequestOperation class]];
[_client setDefaultHeader:@"Content-Type" value:@"application/json;charset=utf-8"];
[_client setDefaultHeader:@"Accept" value:@"*/*"];
[_client setDefaultHeader:@"Content-Length" value:@"858663"];

NSURLRequest *request = [_client requestWithMethod:@"GET" path:@"a.png" parameters:nil];
AFHTTPRequestOperation *operation = [[AFHTTPRequestOperation alloc] initWithRequest:request];
[operation setDownloadProgressBlock:^(NSUInteger bytesWritten, long long totalBytesWritten, long long totalBytesExpectedToWrite) {
    NSLog(@"download %lld/%lld bytes", totalBytesWritten, _task.fileTotalBytes);
}];

[operation setCompletionBlockWithSuccess:^(AFHTTPRequestOperation *operation, id responseObject) {
    //some code       
} failure:^(AFHTTPRequestOperation *operation, NSError *error) {
    //some code
}];

[_client enqueueHTTPRequestOperation:operation]; 
```

下面是控制台上的下载文件日志输出。

23:55:13.731 MyP 下载 1258/858663 字节 23:55:14.566 MyP 下载 815538/858663 字节 23:55:14.567 MyP 下载 844994/858663 字节 23:55:34.352 MyP 下载 847874/858663 字节 MyP 23:5.下载 849314/858663 字节 23:55:34.362 MyP 下载 850754/858663 字节 23:55:34.364 MyP 下载 852186/858663 字节 23:55:34.366 MyP 下载 853626/858663 字节 23:55:25366/85863 字节 6688 字节:55:34.374 MyP 下载 856506/858663 字节 23:55:34.375 MyP 下载 857946/858663 字节 23:55:34.375 MyP 下载 858663/858663 字节

为什么最后几个块文件花费 20 秒？

特别是 23:55:14.567 MyP 下载 844994/858663 字节
到 23:55:34.352 MyP 下载 847874/858663 字节

似乎线程休眠了 20 秒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T08:03:28.543

我修复了。只需删除行 [_client setDefaultHeader:@"Content-Length" value:@"858663"];

# c++ - 需要读取文本文件 C++ 中某些字符之间的文本

> ID：15864941
> 
> 赞同：1
> 
> 时间：2013-04-07T16:46:00.317
> 
> 标签：c++, line, symbols

所以我有一个名为 Names.txt 的文本文件，它有 20 000 行。行示例如下所示

```
"niineve","1 Mo.","VT","1 Mo. 10:12"
"nimrod","1 Mo.","VT","1 Mo. 10:8"
"nimrod","1 Mo.","VT","1 Mo. 10:9"
"noa","1 Mo.","VT","1 Mo. 5:29" 
```

仅供参考目前我有一个代码，我可以在其中输入名称并查找它在文件中出现的次数。

现在我需要以某种方式输出 Mo 部分，我在文件中有大量音节，例如“Ilm.”、“Mo.”、“Sj.”、“Sk”。我需要得到一个必要的输出，但我现在不会太具体。

我的问题：有没有办法从第一个大写字母（包括）开始并以第一个句点（不包括）结束的行中获取字符。

因此，如果我在文本文件中的行是

```
"hiskija","2 Ku.","VT","2 Ku. 20:8" 
```

那么输出将是 Ku，因为 K 是第一个大写字母，并且 Ku 之后是一个句点。如果不能，您能否建议另一种方法，如何从该位置获得一个音节（2-3 个字符），我想也许我可以从符号 "," 和 . 所以如果线条是

```
"niineve","1 Mo.","VT","1 Mo. 10:12" 
```

我会得到 1 Mo 的输出，但我没有使用任何可以做到这一点的命令的经验。

编辑：这就是我目前所拥有的

```
ifstream file ("Names.txt");

int i;
for (i = 0; i < book.length(); ++i) {
    if ('A' <= book[i] && book[i] <= 'Z') break;
}

string start = book.substr(i);
getline(file, start, '.');
cout << start; 
```

这样它就成功地从行首读取到第一个句点“。” 但我没有设法将起点放在第一个大写字母上。我想我没有声明 i 和 string 正确启动。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T16:55:22.723

您可以使用 getline 函数读取最多特定字符的数据

```
getline(file,str,delimiter); 
```

这会将所有内容写入字符串“str”，直到找到分隔符（在您的情况下为“.”）。

那么你只需要遍历字符串并找到第一个大写字母，比如

```
int i;
for (i = 0; i < str.length(); ++i) {
    if ('A' <= str[i] && str[i] <= 'Z') break;
} 
```

变量“i”现在保存起始索引，您现在要做的就是提取适当的替换

```
str.substr(i) // from 'i' all the way to the end 
```

# java - JAXB：当我们有很多类型的 xmlMessage 时，如何在 xmlMessage 与其 Java 类之间进行映射以进行解组

> ID：15864945
> 
> 赞同：1
> 
> 时间：2013-04-07T16:46:15.803
> 
> 标签：java, xsd, jaxb, unmarshalling, xjc

我有使用 XJC 处理的 XSD 文件以生成 Java 类。

```
<?xml version="1.0" encoding="UTF-8"?>
<schema xmlns="http://www.w3.org/2001/XMLSchema" targetNamespace="http://www.example.org/Integratipn_Zip" xmlns:tns="http://www.example.org/Integratipn_Zip" elementFormDefault="qualified">

<element name="saveArchiveRequest">
    <complexType>
        <attribute name="identifiant" type="string"></attribute>
        <attribute name="idArchive" type="string"></attribute>
        <attribute name="emplacement" type="anyURI"></attribute>
    </complexType>
</element>

<element name="getArchiveRequest">
    <complexType>
        <attribute name="identifiant" type="string"></attribute>
        <attribute name="idArchive" type="string"></attribute>
    </complexType>
</element>
</schema> 
```

我想阅读 XML 消息，并将其转换为生成的 Java 类之一。但不使用这种方法：

```
if (xmlMessage.contains("saveArchiveRequest")){
            JAXBContext jaxbContext = JAXBContext.newInstance(SaveArchiveRequest.class);
            Unmarshaller jaxbUnmarshaller = jaxbContext.createUnmarshaller();
            SaveArchiveRequest object = (SaveArchiveRequest) jaxbUnmarshaller.unmarshal(reader);
            return object;
        } else if (xml.contains("getArchiveRequest")) {
            JAXBContext jaxbContext = JAXBContext.newInstance(GetArchiveRequest.class);
            Unmarshaller jaxbUnmarshaller = jaxbContext.createUnmarshaller();
            GetArchiveRequest object = (GetArchiveRequest) jaxbUnmarshaller.unmarshal(reader);
            return object;
        } 
```

我知道存在方法可以在不检查 XML 消息的内容的情况下执行此操作，并让 JAXB 框架直接从 xml 消息映射到正确的对象，或者类似的东西，可能使用外部映射文件。

有人能帮助我吗 ？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T19:54:43.790

如果您`JAXBContext`在从 XML 模式生成的包名称上创建您的包名，那么您可以拥有一个`JAXBContext`能够解组与 XML 模式中的全局 XML 对应的任何 XML 文档的单个文件。

# c# - 用 C# 编写的带有点击移动的 WPF 游戏

> ID：15864948
> 
> 赞同：2
> 
> 时间：2013-04-07T16:46:25.717
> 
> 标签：c#, wpf, oop, graphics

我正在尝试将标签网格移动到鼠标的位置，就像冒险游戏中的移动一样。理想情况下，我会在途中删除并重绘它们。但是，现在我只想弄清楚如何将 int 转换为厚度或点到屏幕。

到目前为止，我有：

```
player.XMove =  (int)Mouse.GetPosition(Application.Current.MainWindow).X;
player.YMove = (int)Mouse.GetPosition(Application.Current.MainWindow).Y; 
```

我尝试将 player.XMove 和 player.YMove 转换为厚度并将其存储为带有标签的网格的边距。我在转换时遇到了一些麻烦。那么，有没有人能够提供转换方面的帮助？此外，是否有更好的标签/网格属性将点转换为

编辑：添加了图片链接。

[http://i1118.photobucket.com/albums/k608/sealclubberr/clickToMove_zps51f2359f.jpg](http://i1118.photobucket.com/albums/k608/sealclubberr/clickToMove_zps51f2359f.jpg)

**编辑：添加了当前代码和 XAML。我还没有机会摆弄它。**

这是我当前的代码的样子：

```
public class User
    {
        private int fed;
        public int Fed
        {
            get
            {
                return fed;
            }
            set
            {
                fed = 5;
            }
        }

        private bool visible;
        public bool Visible
        {
            get
            {
                return visible;
            }
            set
            {
                visible = value;
            }
        }

        private int xMove;
        public int XMove
        {
            get
            {
                return xMove;
            }
            set
            {
                xMove = value;
            }
        }

        private int yMove;
        public int YMove
        {
            get
            {
                return yMove;
            }
            set
            {
                yMove = value;
            }
        }

    } 
```

我最终会在用户类和位置类之间添加`Has A`或。（未发布。）`Uses A`

我在主窗口中的代码：

```
public partial class MainWindow : Window
    {
        User player = new User();
        ThicknessConverter perimeter = new ThicknessConverter();
        public MainWindow()
        {
            InitializeComponent();

        }

        private void Hansel_IsVisibleChanged(object sender, DependencyPropertyChangedEventArgs e)
        {
             Hansel.Visibility = Visibility.Visible;
        }

        private void Hansel_MouseLeftButtonDown(object sender, MouseButtonEventArgs e)
        {
            player.XMove =  (int)Mouse.GetPosition(Application.Current.MainWindow).X;
            player.YMove = (int)Mouse.GetPosition(Application.Current.MainWindow).Y;

        }

        private void southRectangle_IsHitTestVisibleChanged(object sender, DependencyPropertyChangedEventArgs e)
        {

        }

    } 
```

我也在努力将布尔值转换为可见性，但遇到了 XAML 无法找到转换器命名空间的错误，该命名空间就在那里。

XAML 看起来像：

```
<Window x:Class="HanselAndGretalDisplay.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:local="clr-namespace:HanselAndGretalDisplay"
        Title="MainWindow" HorizontalAlignment="Stretch" VerticalAlignment="Stretch">
    <Grid>
        <Grid.Resources>
            <local:BoolToVisibleOrHidden x:Key="BoolToVisConverter"/>
        </Grid.Resources>
        <Label Content="Label" HorizontalAlignment="Left" Margin="129,69,0,0" VerticalAlignment="Top" Foreground="#FF1B4015" Width="25" Background="#FF1B4015" BorderBrush="Black" BorderThickness="3" Height="25"/>
        <Label Content="Label" HorizontalAlignment="Left" Margin="154,94,0,0" VerticalAlignment="Top" Foreground="#FF1B4015" Width="25" Background="#FF1B4015" BorderBrush="Black" BorderThickness="3" Height="25"/>
        <Label Content="Label" HorizontalAlignment="Left" Margin="154,69,0,0" VerticalAlignment="Top" Foreground="#FF1B4015" Width="25" Background="#FF1B4015" BorderBrush="Black" BorderThickness="3" Height="25"/>
        <Label Content="Label" HorizontalAlignment="Left" Margin="129,94,0,0" VerticalAlignment="Top" Foreground="#FF1B4015" Width="25" Background="#FF1B4015" BorderBrush="Black" BorderThickness="3" Height="25"/>
        <Label Content="Label" HorizontalAlignment="Left" Margin="104,69,0,0" VerticalAlignment="Top" Foreground="#FF1B4015" Width="25" Background="#FF1B4015" BorderBrush="Black" BorderThickness="3" Height="25"/>
        <Label Content="Label" HorizontalAlignment="Left" Margin="104,94,0,0" VerticalAlignment="Top" Foreground="#FF1B4015" Width="25" Background="#FF1B4015" BorderBrush="Black" BorderThickness="3" Height="25"/>
        <Label Content="Label" HorizontalAlignment="Left" Margin="104,44,0,0" VerticalAlignment="Top" Foreground="#FF1B4015" Width="25" Background="#FF1B4015" BorderBrush="Black" BorderThickness="3" Height="25"/>
        <Label Content="Label" HorizontalAlignment="Left" Margin="129,44,0,0" VerticalAlignment="Top" Foreground="#FF1B4015" Width="25" Background="#FF1B4015" BorderBrush="Black" BorderThickness="3" Height="25"/>
        <Label Content="Label" HorizontalAlignment="Left" Margin="154,44,0,0" VerticalAlignment="Top" Foreground="#FF1B4015" Width="25" Background="#FF1B4015" BorderBrush="Black" BorderThickness="3" Height="25"/>
        <Label Content="Label" HorizontalAlignment="Left" Margin="179,69,0,0" VerticalAlignment="Top" Foreground="#FF1B4015" Width="25" Background="#FF1B4015" BorderBrush="Black" BorderThickness="3" Height="25"/>
        <Label Content="Label" HorizontalAlignment="Left" Margin="79,69,0,0" VerticalAlignment="Top" Foreground="#FF1B4015" Width="25" Background="#FF1B4015" BorderBrush="Black" BorderThickness="3" Height="25"/>
        <Label Content="Label" HorizontalAlignment="Left" Margin="129,119,0,0" VerticalAlignment="Top" Foreground="#FF1B4015" Width="25" Background="#FF1B4015" BorderBrush="Black" BorderThickness="3" Height="25"/>
        <Label Content="Label" HorizontalAlignment="Left" Margin="129,19,0,0" VerticalAlignment="Top" Foreground="#FF1B4015" Width="25" Background="#FF1B4015" BorderBrush="Black" BorderThickness="3" Height="25"/>
        <Label Content="Label" HorizontalAlignment="Left" Margin="673,69,0,0" VerticalAlignment="Top" Foreground="#FF1B4015" Width="25" Background="#FF1B4015" BorderBrush="Black" BorderThickness="3" Height="25"/>
        <Label Content="Label" HorizontalAlignment="Left" Margin="698,94,0,0" VerticalAlignment="Top" Foreground="#FF1B4015" Width="25" Background="#FF1B4015" BorderBrush="Black" BorderThickness="3" Height="25"/>
        <Label Content="Label" HorizontalAlignment="Left" Margin="698,69,0,0" VerticalAlignment="Top" Foreground="#FF1B4015" Width="25" Background="#FF1B4015" BorderBrush="Black" BorderThickness="3" Height="25"/>
        <Label Content="Label" HorizontalAlignment="Left" Margin="673,94,0,0" VerticalAlignment="Top" Foreground="#FF1B4015" Width="25" Background="#FF1B4015" BorderBrush="Black" BorderThickness="3" Height="25"/>
        <Label Content="Label" HorizontalAlignment="Left" Margin="648,69,0,0" VerticalAlignment="Top" Foreground="#FF1B4015" Width="25" Background="#FF1B4015" BorderBrush="Black" BorderThickness="3" Height="25"/>
        <Label Content="Label" HorizontalAlignment="Left" Margin="648,94,0,0" VerticalAlignment="Top" Foreground="#FF1B4015" Width="25" Background="#FF1B4015" BorderBrush="Black" BorderThickness="3" Height="25"/>
        <Label Content="Label" HorizontalAlignment="Left" Margin="648,44,0,0" VerticalAlignment="Top" Foreground="#FF1B4015" Width="25" Background="#FF1B4015" BorderBrush="Black" BorderThickness="3" Height="25"/>
        <Label Content="Label" HorizontalAlignment="Left" Margin="673,44,0,0" VerticalAlignment="Top" Foreground="#FF1B4015" Width="25" Background="#FF1B4015" BorderBrush="Black" BorderThickness="3" Height="25"/>
        <Label Content="Label" HorizontalAlignment="Left" Margin="698,44,0,0" VerticalAlignment="Top" Foreground="#FF1B4015" Width="25" Background="#FF1B4015" BorderBrush="Black" BorderThickness="3" Height="25"/>
        <Label Content="Label" HorizontalAlignment="Left" Margin="723,69,0,0" VerticalAlignment="Top" Foreground="#FF1B4015" Width="25" Background="#FF1B4015" BorderBrush="Black" BorderThickness="3" Height="25"/>
        <Label Content="Label" HorizontalAlignment="Left" Margin="623,69,0,0" VerticalAlignment="Top" Foreground="#FF1B4015" Width="25" Background="#FF1B4015" BorderBrush="Black" BorderThickness="3" Height="25"/>
        <Label Content="Label" HorizontalAlignment="Left" Margin="673,119,0,0" VerticalAlignment="Top" Foreground="#FF1B4015" Width="25" Background="#FF1B4015" BorderBrush="Black" BorderThickness="3" Height="25"/>
        <Label Content="Label" HorizontalAlignment="Left" Margin="673,19,0,0" VerticalAlignment="Top" Foreground="#FF1B4015" Width="25" Background="#FF1B4015" BorderBrush="Black" BorderThickness="3" Height="25"/>
        <Label Content="Label" HorizontalAlignment="Left" Margin="129,400,0,0" VerticalAlignment="Top" Foreground="#FF1B4015" Width="25" Background="#FF1B4015" BorderBrush="Black" BorderThickness="3" Height="25"/>
        <Label Content="Label" HorizontalAlignment="Left" Margin="154,425,0,0" VerticalAlignment="Top" Foreground="#FF1B4015" Width="25" Background="#FF1B4015" BorderBrush="Black" BorderThickness="3" Height="25"/>
        <Label Content="Label" HorizontalAlignment="Left" Margin="154,400,0,0" VerticalAlignment="Top" Foreground="#FF1B4015" Width="25" Background="#FF1B4015" BorderBrush="Black" BorderThickness="3" Height="25"/>
        <Label Content="Label" HorizontalAlignment="Left" Margin="129,425,0,0" VerticalAlignment="Top" Foreground="#FF1B4015" Width="25" Background="#FF1B4015" BorderBrush="Black" BorderThickness="3" Height="25"/>
        <Label Content="Label" HorizontalAlignment="Left" Margin="104,400,0,0" VerticalAlignment="Top" Foreground="#FF1B4015" Width="25" Background="#FF1B4015" BorderBrush="Black" BorderThickness="3" Height="25"/>
        <Label Content="Label" HorizontalAlignment="Left" Margin="104,425,0,0" VerticalAlignment="Top" Foreground="#FF1B4015" Width="25" Background="#FF1B4015" BorderBrush="Black" BorderThickness="3" Height="25"/>
        <Label Content="Label" HorizontalAlignment="Left" Margin="104,375,0,0" VerticalAlignment="Top" Foreground="#FF1B4015" Width="25" Background="#FF1B4015" BorderBrush="Black" BorderThickness="3" Height="25"/>
        <Label Content="Label" HorizontalAlignment="Left" Margin="129,375,0,0" VerticalAlignment="Top" Foreground="#FF1B4015" Width="25" Background="#FF1B4015" BorderBrush="Black" BorderThickness="3" Height="25"/>
        <Label Content="Label" HorizontalAlignment="Left" Margin="154,375,0,0" VerticalAlignment="Top" Foreground="#FF1B4015" Width="25" Background="#FF1B4015" BorderBrush="Black" BorderThickness="3" Height="25"/>
        <Label Content="Label" HorizontalAlignment="Left" Margin="179,400,0,0" VerticalAlignment="Top" Foreground="#FF1B4015" Width="25" Background="#FF1B4015" BorderBrush="Black" BorderThickness="3" Height="25"/>
        <Label Content="Label" HorizontalAlignment="Left" Margin="79,400,0,0" VerticalAlignment="Top" Foreground="#FF1B4015" Width="25" Background="#FF1B4015" BorderBrush="Black" BorderThickness="3" Height="25"/>
        <Label Content="Label" HorizontalAlignment="Left" Margin="129,450,0,0" VerticalAlignment="Top" Foreground="#FF1B4015" Width="25" Background="#FF1B4015" BorderBrush="Black" BorderThickness="3" Height="25"/>
        <Label Content="Label" HorizontalAlignment="Left" Margin="129,350,0,0" VerticalAlignment="Top" Foreground="#FF1B4015" Width="25" Background="#FF1B4015" BorderBrush="Black" BorderThickness="3" Height="25"/>
        <Label Content="Label" HorizontalAlignment="Left" Margin="648,400,0,0" VerticalAlignment="Top" Foreground="#FF1B4015" Width="25" Background="#FF1B4015" BorderBrush="Black" BorderThickness="3" Height="25"/>
        <Label Content="Label" HorizontalAlignment="Left" Margin="673,425,0,0" VerticalAlignment="Top" Foreground="#FF1B4015" Width="25" Background="#FF1B4015" BorderBrush="Black" BorderThickness="3" Height="25"/>
        <Label Content="Label" HorizontalAlignment="Left" Margin="673,400,0,0" VerticalAlignment="Top" Foreground="#FF1B4015" Width="25" Background="#FF1B4015" BorderBrush="Black" BorderThickness="3" Height="25"/>
        <Label Content="Label" HorizontalAlignment="Left" Margin="648,425,0,0" VerticalAlignment="Top" Foreground="#FF1B4015" Width="25" Background="#FF1B4015" BorderBrush="Black" BorderThickness="3" Height="25"/>
        <Label Content="Label" HorizontalAlignment="Left" Margin="623,400,0,0" VerticalAlignment="Top" Foreground="#FF1B4015" Width="25" Background="#FF1B4015" BorderBrush="Black" BorderThickness="3" Height="25"/>
        <Label Content="Label" HorizontalAlignment="Left" Margin="623,425,0,0" VerticalAlignment="Top" Foreground="#FF1B4015" Width="25" Background="#FF1B4015" BorderBrush="Black" BorderThickness="3" Height="25"/>
        <Label Content="Label" HorizontalAlignment="Left" Margin="623,375,0,0" VerticalAlignment="Top" Foreground="#FF1B4015" Width="25" Background="#FF1B4015" BorderBrush="Black" BorderThickness="3" Height="25"/>
        <Label Content="Label" HorizontalAlignment="Left" Margin="648,375,0,0" VerticalAlignment="Top" Foreground="#FF1B4015" Width="25" Background="#FF1B4015" BorderBrush="Black" BorderThickness="3" Height="25"/>
        <Label Content="Label" HorizontalAlignment="Left" Margin="673,375,0,0" VerticalAlignment="Top" Foreground="#FF1B4015" Width="25" Background="#FF1B4015" BorderBrush="Black" BorderThickness="3" Height="25"/>
        <Label Content="Label" HorizontalAlignment="Left" Margin="698,400,0,0" VerticalAlignment="Top" Foreground="#FF1B4015" Width="25" Background="#FF1B4015" BorderBrush="Black" BorderThickness="3" Height="25"/>
        <Label Content="Label" HorizontalAlignment="Left" Margin="598,400,0,0" VerticalAlignment="Top" Foreground="#FF1B4015" Width="25" Background="#FF1B4015" BorderBrush="Black" BorderThickness="3" Height="25"/>
        <Label Content="Label" HorizontalAlignment="Left" Margin="648,450,0,0" VerticalAlignment="Top" Foreground="#FF1B4015" Width="25" Background="#FF1B4015" BorderBrush="Black" BorderThickness="3" Height="25"/>
        <Label Content="Label" HorizontalAlignment="Left" Margin="648,350,0,0" VerticalAlignment="Top" Foreground="#FF1B4015" Width="25" Background="#FF1B4015" BorderBrush="Black" BorderThickness="3" Height="25"/>
        <Grid x:Name="Hansel" IsVisibleChanged="Hansel_IsVisibleChanged" MouseLeftButtonDown="Hansel_MouseLeftButtonDown">
            <Label Content="Label" HorizontalAlignment="Left" Margin="398,218,0,0" VerticalAlignment="Top" Foreground="#FFFFE2C5" Width="25" Background="#FFFFE2C5" BorderBrush="Black" BorderThickness="3" Height="25"/>
            <Label Content="Label" HorizontalAlignment="Left" Margin="398,243,0,0" VerticalAlignment="Top" Foreground="#FFFFE2C5" Width="25" Background="#FFFFE2C5" BorderBrush="Black" BorderThickness="3" Height="25"/>
            <Label Content="Label" HorizontalAlignment="Left" Margin="398,268,0,0" VerticalAlignment="Top" Foreground="#FFFFE2C5" Width="25" Background="#FFFFE2C5" BorderBrush="Black" BorderThickness="3" Height="25"/>
            <Label Content="Label" HorizontalAlignment="Left" Margin="373,243,0,0" VerticalAlignment="Top" Foreground="#FFFFE2C5" Width="25" Background="#FFFFE2C5" BorderBrush="Black" BorderThickness="3" Height="25"/>
            <Label Content="Label" HorizontalAlignment="Left" Margin="423,243,0,0" VerticalAlignment="Top" Foreground="#FFFFE2C5" Width="25" Background="#FFFFE2C5" BorderBrush="Black" BorderThickness="3" Height="25"/>
            <Label Content="Label" HorizontalAlignment="Left" Margin="413,293,0,0" VerticalAlignment="Top" Foreground="#FFFFE2C5" Width="25" Background="#FFFFE2C5" BorderBrush="Black" BorderThickness="3" Height="25"/>
            <Label Content="Label" HorizontalAlignment="Left" Margin="383,293,0,0" VerticalAlignment="Top" Foreground="#FFFFE2C5" Width="25" Background="#FFFFE2C5" BorderBrush="Black" BorderThickness="3" Height="25"/>
            <Label Content="Label" HorizontalAlignment="Left" Margin="439,268,0,0" VerticalAlignment="Top" Foreground="#FFFFE2C5" Width="25" Background="#FFFFE2C5" BorderBrush="Black" BorderThickness="3" Height="25"/>
            <Label Content="Label" HorizontalAlignment="Left" Margin="353,268,0,0" VerticalAlignment="Top" Foreground="#FFFFE2C5" Width="25" Background="#FFFFE2C5" BorderBrush="Black" BorderThickness="3" Height="25"/>
            <Rectangle x:Name="southRectangle" HorizontalAlignment="Left" Height="79" Margin="209,425,0,0" VerticalAlignment="Top" Width="383" IsHitTestVisibleChanged="southRectangle_IsHitTestVisibleChanged"/>
            <Rectangle x:Name="northRectangle" HorizontalAlignment="Left" Height="79" Margin="209,0,0,0" VerticalAlignment="Top" Width="412"/>
            <Rectangle x:Name="westRectangle" HorizontalAlignment="Left" Height="202" Margin="0,145,0,0" VerticalAlignment="Top" Width="133"/>
            <Rectangle x:Name="eastRectangle" HorizontalAlignment="Left" Height="202" Margin="627,145,0,0" VerticalAlignment="Top" Width="133"/>
        </Grid>
    </Grid>
</Window> 
```

如果有一种简单的方法可以以编程方式生成 XAML 对象并将它们分配到理想的初始位置，那么从长远来看，这个项目是理想的，但现在我不太担心这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T19:27:08.110

```
<Window x:Class="MiscSamples.ClickToMove"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="ClickToMove" Height="300" Width="300">
    <ItemsControl ItemsSource="{Binding}" PreviewMouseDown="ItemsControl_PreviewMouseDown"
                  Background="#05FFFFFF">
        <ItemsControl.ItemsPanel>
            <ItemsPanelTemplate>
                <Canvas IsItemsHost="True"/>
            </ItemsPanelTemplate>
        </ItemsControl.ItemsPanel>
        <ItemsControl.ItemContainerStyle>
            <Style TargetType="ContentPresenter">
                <Setter Property="Canvas.Left" Value="{Binding X}"/>
                <Setter Property="Canvas.Top" Value="{Binding Y}"/>
            </Style>
        </ItemsControl.ItemContainerStyle>
        <ItemsControl.ItemTemplate>
            <DataTemplate>
                <Rectangle Stroke="Black" StrokeThickness="2" Fill="Blue"
                           Height="20" Width="20"/>
            </DataTemplate>
        </ItemsControl.ItemTemplate>
    </ItemsControl>
</Window> 
```

代码背后：

```
 public partial class ClickToMove : Window
    {
        public List<MovableObject> Objects { get; set; } 

        public ClickToMove()
        {
            InitializeComponent();

            Objects = new List<MovableObject>
                {
                    new MovableObject() {X = 100, Y = 100}
                };

            DataContext = Objects;
        }

        private void ItemsControl_PreviewMouseDown(object sender, MouseButtonEventArgs e)
        {
            var position = e.GetPosition(this);
            Objects.First().MoveToPosition(position.X, position.Y);
        }
    } 
```

物品类别：

```
 public class MovableObject: INotifyPropertyChanged
    {
        private double _x;
        public double X
        {
            get { return _x; }
            set
            {
                _x = value;
                OnPropertyChanged("X");
            }
        }

        private double _y;
        public double Y
        {
            get { return _y; }
            set
            {
                _y = value;
                OnPropertyChanged("Y");
            }
        }

        private System.Threading.Timer MoveTimer;

        private double DestinationX;
        private double DestinationY;

        public void MoveToPosition(double x, double y)
        {
            DestinationX = x;
            DestinationY = y;

            if (MoveTimer != null)
                MoveTimer.Dispose();

            MoveTimer = new Timer(o => MoveStep(), null, 0, 10);
        }

        private void MoveStep()
        {
            if (Math.Abs(X - DestinationX) > 5)
            {
                if (X < DestinationX)
                    X = X+5;
                else if (X > DestinationX)
                    X = X-5;    
            }

            if (Math.Abs(Y - DestinationY) > 5)
            {
                if (Y < DestinationY)
                    Y = Y + 5;
                else if (Y > DestinationY)
                    Y = Y - 5;    
            }
        }

        public event PropertyChangedEventHandler PropertyChanged;

        protected virtual void OnPropertyChanged(string propertyName)
        {
            Application.Current.Dispatcher.BeginInvoke((Action)(() =>
                {
                    PropertyChangedEventHandler handler = PropertyChanged;
                    if (handler != null) handler(this, new PropertyChangedEventArgs(propertyName));        
                }));

        }
    } 
```

# html - Streamtheworld.com 流的 HTML5 解决方案

> ID：15864954
> 
> 赞同：1
> 
> 时间：2013-04-07T16:46:50.307
> 
> 标签：html, audio

如果这完全可行，似乎有几个不确定的线索。

归根结底，我需要一个适合移动设备的、非闪存（与 iPhone 兼容）的 streamtheworld 流播放器。

在 pls 文件中，我有以下内容。我只需要一个来工作。有人成功了吗？

```
File1=http://3393.live.streamtheworld.com:80/WBAPAMAAC_SC
File2=http://3393.live.streamtheworld.com:3690/WBAPAMAAC_SC
File3=http://3393.live.streamtheworld.com:443/WBAPAMAAC_SC
File4=http://5843.live.streamtheworld.com:80/WBAPAMAAC_SC
File5=http://5843.live.streamtheworld.com:3690/WBAPAMAAC_SC
File6=http://5843.live.streamtheworld.com:443/WBAPAMAAC_SC 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-10T06:22:17.897

我发现安装 Quicktime 后，这些 URL 在 OSX 的 Safari 上通过 Soundmanager2 HTML5 模式播放。但 Flash、Firefox 和 Chrome 不喜欢它们。

# javascript - 来自图像的html5画布自定义形状

> ID：15864955
> 
> 赞同：0
> 
> 时间：2013-04-07T16:47:02.283
> 
> 标签：javascript, jquery, html, canvas

我在用 html 制作类似 RISK 的游戏时遇到问题。我现在使用的解决方案是给每个国家“位置：绝对；” 然后将其放置在它所属的位置，但是当用户想要将鼠标悬停或单击所需的国家/地区时会出现问题。国家被表示为块，并且具有国家形状的背景图像，所以当你看它时，你看不到它实际上是一个块。

你能给我任何例子或一个好的资源网站，我可以实现以下目标：

这就是它当前的样子：[http ://s24.postimg.org/402tvyovp/image.png](http://s24.postimg.org/402tvyovp/image.png)

这就是我希望它的外观和行为方式：[http ://s24.postimg.org/5cpkuysmt/image.png](http://s24.postimg.org/5cpkuysmt/image.png)

所以元素有一个国家的形状，而不是一个块，这意味着当用户将鼠标放在那个形状（而不是它周围的块）时，脚本会执行一些功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T22:46:55.130

**以下是如何识别在您的画布上单击了哪个自定义国家/地区形状**

首先，使用 Photoshop 将地图上的每个国家/地区更改为不同的唯一颜色（颜色编码的地图）

（不用担心，用户不需要看到这个颜色编码的地图）。

然后当用户点击画布时，获取点击点的颜色并与您的国家颜色进行比较，如下所示：

```
 function handleMouseDown(e){
      mouseX=parseInt(e.clientX-offsetX);
      mouseY=parseInt(e.clientY-offsetY);

      var color=getPixelRGB(mouseX,mouseY);
      if(isColorMatch(color,255,0,0)){ alert("You clicked on the red country"); }          
      if(isColorMatch(color,0,255,0)){ alert("You clicked on the green country"); }          
      if(isColorMatch(color,0,0,255)){ alert("You clicked on the blue country"); }          
    }

    function isColorMatch(color,red,green,blue){
        return(color.red==red && color.green==green && color.blue==blue);
    }

    function getPixelRGB(x, y) {
        var pxData = ctx.getImageData(x,y,1,1);
        var R = pxData.data[0];
        var G = pxData.data[1];
        var B = pxData.data[2];
        return({red:R, green:G, blue:B});    
    } 
```

您可能不想为您的用户显示彩色编码的地图。如果没有，您可以在与您的屏幕画布相同的屏幕外画布上创建颜色编码的地图 - 除了颜色编码。当用户点击您的屏幕画布时，您只需检查颜色编码地图上的像素位置。您将获得屏幕美感 + 屏幕外功能。

这是代码和小提琴：http: [//jsfiddle.net/m1erickson/rmn5D/](http://jsfiddle.net/m1erickson/rmn5D/)

请注意，由于跨站点浏览器安全警告，此小提琴不会使用您的确切地图 - 您将需要替换您自己的颜色编码地图。

```
<!doctype html>
<html>
<head>
<link rel="stylesheet" type="text/css" media="all" href="css/reset.css" /> <!-- reset css -->
<script type="text/javascript" src="http://code.jquery.com/jquery.min.js"></script>

<style>
    body{ background-color: ivory; }
    canvas{border:1px solid red;}
</style>

<script>
$(function(){

    var canvas=document.getElementById("canvas");
    var ctx=canvas.getContext("2d");

    var img=new Image();
    img.onload=function(){
        canvas.width=img.width;
        canvas.height=img.height;
        ctx.drawImage(img,0,0);
    }
    img.src="yourColorCodedMap.png";

    var canvasOffset=$("#canvas").offset();
    var offsetX=canvasOffset.left;
    var offsetY=canvasOffset.top;

    function handleMouseDown(e){
      mouseX=parseInt(e.clientX-offsetX);
      mouseY=parseInt(e.clientY-offsetY);

      var color=getPixelRGB(mouseX,mouseY);
      if(isColorMatch(color,255,0,0)){ alert("You clicked on the red country"); }          
      if(isColorMatch(color,0,255,0)){ alert("You clicked on the green country"); }          
      if(isColorMatch(color,0,0,255)){ alert("You clicked on the blue country"); }          
    }

    function isColorMatch(color,red,green,blue){
        return(color.red==red && color.green==green && color.blue==blue);
    }

    function getPixelRGB(x, y) {
        var pxData = ctx.getImageData(x,y,1,1);
        var R = pxData.data[0];
        var G = pxData.data[1];
        var B = pxData.data[2];
        return({red:R, green:G, blue:B});    
    }

    $("#canvas").mousedown(function(e){handleMouseDown(e);});

}); // end $(function(){});
</script>

</head>

<body>
    <p>Click on a map location to get country</p>
    <canvas id="canvas" width=300 height=300></canvas>
</body>
</html> 
```

# playframework - Play Framework 2.1 模板上的动态路由

> ID：15864957
> 
> 赞同：4
> 
> 时间：2013-04-07T16:47:13.537
> 
> 标签：playframework, routes, playframework-2.0, scala-template

以 Java 计算机数据库示例作为 Play！2.1 我正在为大约 20 个模型开发一个 CRUD 管理后端。我面临的问题是在模板级别一遍又一遍地重复相同的功能。

我试图将链接功能重构为：

```
@****************************************
* Helper generating navigation links    *
****************************************@
@link(newPage:Int, newSortBy:String) = @{
    // Generate the link
    controllers.admin.routes.Model.index(newPage, "id", newSortBy)
} 
```

像这样的东西

```
@(controller: Any, newPage: Int, newSortBy: String)
any.index(newPage, "id", newSortBy) 
```

由于反向路由器不继承任何特定的类，我不能以通用的方式来做。并且前面的代码不起作用，因为我不进行类型转换（我猜是因为编译器错误是“值索引不是 Any 的成员”）

有什么方法可以在运行时获取已定义路由的列表？不管它是在 Scala 模板还是 Java 端，这样我都可以传递控制器名称并获取正确的反向路由器来创建 URL。

如果不可能，那么重构所有在模板上重复的代码的正确方法是什么，特别是那些依赖于 ReverseRouters 的代码。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T22:20:13.810

我还没有找到动态获取路由器和反向路由器列表的方法，但是我找到了一种方法来限制样板代码的数量并能够将模板函数重构为自己的文件，从而使代码更易于管理.

我发现 Scala 并不是 Java 的另一种说法！！！具体来说，您可以将函数作为参数传递给函数（[http://oldfashionedsoftware.com/2008/08/23/fun-with-scala-functions/](http://oldfashionedsoftware.com/2008/08/23/fun-with-scala-functions/)），因此您可以传递一段代码以在子模板上执行来自主模板（DI 类型）。

在我发布的示例中，问题是将反向控制器从主模板传递给子模板，但“反向控制器”不扩展任何特定对象。示例中的代码是：

## 模板.scala.html

```
...
...
@****************************************
* Helper generating navigation links    *
****************************************@
@link(newPage:Int, newSortBy:String) = @{
    // Generate the link
    controllers.admin.routes.MyController.index(newPage, "id", "asc")
}
...
...
@**********************************
* Helper generating table headers *
***********************************@
@header(key:String, title:String) = {
    <th class="">
        <a href="@link(0, key)">@title</a>
    </th>
}
...
... 
```

要将`header`函数重构为自己的模板，我必须能够调用该`link`函数。使用重构文件中的包含将不起作用，因为反向控制器在`link`函数中是硬编码的。解决方案是将`header`函数提取到子模板中，并将模板的参数定义为函数：

## 意见/实用程序/header.scala.html

```
@(key: String, title:String, link: (Int) => Html)
    <th class="@key">
        <a href="@link(0)">@title</a>
    </th> 
```

现在在模板中：

## 意见/管理/模板.scala.html

```
...
@import utils._
...
@link(newPage:Int) = {
    @controllers.admin.routes.MyController.index(newPage, "id", "asc")
}
...
@header("key", "title", link _)
... 
```

现在，我只需`link`为每个主模板定义函数，并将其作为参数传递给任何需要它的子模板。不完全干净，但减少了很多样板并简化了模板更改。

希望它可以帮助别人。更好的解决方案有人吗？

# php - 通过 URL 发送 json 数据还是使用 $.post()？

> ID：15864962
> 
> 赞同：1
> 
> 时间：2013-04-07T16:47:49.477
> 
> 标签：php, jquery, ajax

不确定哪个更有效。我想在另一个页面上获取产品的所有数据。我对ajax比较陌生。这是显示产品网格的功能，当单击产品时，它会转到具有更多详细信息的新页面：

```
function ajaxfunction(json_data){
    var path = "images/products/shirts/smallthumbs/";
    var url = "Shirtbuy.php";
    var table = $("<table></table>");

 //array iterates through json array

    for (var i = 0; i < json_data.length ; i++){
     if (i %4==0)
     var tr = $("<tr></tr>").appendTo(table);         
     $(tr).append('<td width="500">' + json_data[i].prod_name + '<br/>' +

 //See below, sending all the data through the url seems really messy. Does ajax.post achieve the same thing ?

        '<a href="' + url +"?id="+ json_data[i].product_id + "&price=" +json_data[i].price+ '"><img src="' + path + json_data[i].pic + '"/></a>' + '<br/>' + 
        '\u00A3' + json_data[i].price + '</td>');
    }       

$("#maindisplay").append(table);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T17:39:27.237

如果操作是幂等的，则使用 get 否则如果它具有持久的结果，则使用 post 刷新可能会导致操作两次。还存在其他问题需要考虑，例如，如果您希望缓存结果页面。[Teamtreehouse](http://blog.teamtreehouse.com/the-definitive-guide-to-get-vs-post)有一篇不错的博文，您应该考虑一下。

# php - 使用特定方案拆分字符串，这是一种不好的做法吗？

> ID：15864964
> 
> 赞同：2
> 
> 时间：2013-04-07T16:47:52.257
> 
> 标签：php, arrays, string

我有一个看起来像这样的字符串

```
[{ "title":"","comment":"","size":"18.298","name":"logo.png",
"filename":"fu_mucqjrfifpadsw8","ext":"png" }] 
```

我想从中获取 filename.ext 。对我来说，看起来我可以比以下更容易做到这一点（这确实有效，但似乎是不好的做法 - 或者是吗？）

我目前如何提取它：

```
$logo = explode(':',$string);
$ext = str_replace('"', "", $logo[6]);
$ext = str_replace(' }]', "", $ext);
$logo = explode(',',$logo[5]);
$logo=str_replace('"', "", $logo[0]); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-07T16:49:46.273

它看起来像 JSON 数据。您可以使用 php[`json_decode`](http://php.net/manual/en/function.json-decode.php)获取一个数组，然后对该数组进行索引。

```
$string = '[{ "title":"","comment":"","size":"18.298","name":"logo.png","filename":"fu_mucqjrfifpadsw8","ext":"png" }]';
$data = json_decode($string, true);
// Access filename field
$data[0]['filename']; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-07T16:50:07.597

这是*可怕*的做法。您的数据是 JSON 格式，因此您应该[`json_decode`](http://www.php.net/manual/en/function.json-decode.php)将其转换为 PHP 变量，然后导航到您需要的信息。

例如，要获取文件名 + 扩展名：

```
$data = json_decode($string, true);
$filename = $data[0]['filename'];
$ext = $data[0]['ext'];

$allTogether = $filename.'.'.$ext; 
```

# java - java设计问题中带有MVC的Ajax？

> ID：15864965
> 
> 赞同：0
> 
> 时间：2013-04-07T16:47:53.783
> 
> 标签：java, design-patterns, web-applications

我在使用 AJAX 设计简单的 MVC（从头开始）时遇到问题。我正在使用 Servlet、HTML 和 JQuery。

根据架构和标准，我们应该使用 request.forward() 在处理后转移到另一个页面以显示输出/错误，而且我们不应该在 Servlet 中使用 System.out.println()。

**我的问题：**

1.  我必须使用 AJAX，所以我不能更改页面，这意味着 request.forward() 不能使用。
2.  我必须在 Servlet 中使用 System.out.println() 将数据从 Servlet 传输到 AJAX 调用，然后对其进行解析。

**问题：**

1.  如何在我的方法中将数据从 Servlet 获取到 Javascript？
2.  我没有关注 MVC，因为 Servlet 没有使用 request.forward()。在我的情况下如何使用它？

**笔记 ：**

我知道 JSP 和 Struts 等的其他方法，但你能帮我解决我的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T18:10:48.610

如果目标是将数据（例如 JSON 或 XML）从 servlet 发送到 JavaScript，那么您不需要任何 JSP。在这种情况下，视图完全在客户端处理。通常的方法是使用 Java bean 存储要发送的数据，将此 bean 编组为 JSON 或 XML，然后将 JSON 或 XML 发送给响应编写器。

如果目标是将 HTML 发送到 JavaScript（例如发送页面的一部分进行刷新），那么您可以将请求转发到将仅生成此 HTML 部分而不是整个新页面的 JSP。

最后，由 AJAX 回调函数从响应中获取数据或 HTML 并更新 HTML 页面。

# python - 用 Python 将 .txt 文件中的字符串替换为通配符

> ID：15864968
> 
> 赞同：1
> 
> 时间：2013-04-07T16:48:18.203
> 
> 标签：python, windows-7, python-2.7

我对脚本仍然很陌生，并且不确定完成我想做的事情的最佳方法。这将是我尝试编写的第一个 python 脚本。请注意，我为此使用**Python2.7 。**

我想为给定参数的用户编写一个批处理文件。这个论点将是一条路径。这条路径每天都会改变，并用于执行作业测试。我想调用它`Nightly.bat "build path"`

这是我想要完成的事情：

**1.批处理文件通过健康检查确保路径存在。
2\. 批处理文件使用给定的变量执行 python 文件。
3\. Python 文件在 testrun 脚本中找到一个带有构建路径的字符串，并将该路径替换为给定的变量。
4.批处理文件执行testrun selenium 脚本。**

这是代码Python代码：

test1.txt 内容：

```
blah
This is a first string 
```

nightly.py 内容：

```
import sys
import shutil
import os
import re

tf = open('tmp', 'a+')
string = "This is "

with open('test1.txt') as f:
    for line in f.readlines():
            string = re.sub ('This is .*', 'This is a second string', string)

shutil.copy('test1.txt', 'tmp')
tf.write(string)
f.close()
tf.close() 
```

执行 nightly.py 文件后，这是 tmp 文件内容：

```
blah
This is a first stringThis is a second String 
```

我需要做到，所以`This is a first string`被替换为`This is a second string`

最后，tmp文件应该有以下内容：

```
blah
This is a second string 
```

感谢您继续尝试。

```
*****************************
* Updated for Kirbyfan64sos *
***************************** 
```

nightly.py 内容：

```
import sys
import shutil
import os

tf = open('tmp', 'a+')
with open('test1.txt') as f:
    for line in f.readlines():
        if line == 'This is*':
            line = 'This is a second string' 
        tf.write(line)
f.close()
tf.close()
shutil.copy('tmp', 'test1.txt')
os.remove('tmp') 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T19:48:01.727

代码应如下所示：

```
import sys
tf = open('tmp', 'a+')
with open('WP8974_AudioDecode.html') as f:
    for line in f.readlines() do:
        if line == '<td>\\frosty\*</td>':
            line = '<td>\\frosty\' + sys.argv[1] + '</td>' 
        tf.write(line)
f.close()
shutil.copy('tmp', 'WP8974_AudioDecode.html')
os.remove('tmp') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T05:50:10.890

我终于找到了答案...

在 Nightly.py 执行之前的 test1.txt：

```
blah
blah
This is a first string
blah
blah 
```

顺便说一句，标签在 notepad++ 的代码中有所不同

```
import sys
import os
import re
import shutil

tf = open('tmp', 'a+')

with open('test1.txt') as f:
    for line in f.readlines():
        build = re.sub ('This is.*','This is a second string',line)
        tf.write(build)
tf.close()
f.close()
shutil.copy('tmp', 'test1.txt')
os.remove('tmp') 
```

Nightly.py 执行后的 test1.txt：

```
blah
blah
This is a second string
blah
blah 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-01-18T17:18:47.560

我的方法如下，它对有问题的文件进行操作，而无需复制/复制文件：

```
import re

with open('target_file.txt', 'r') as file: 
    filedata = file.read()

filedata = re.sub('This is.*', 'This is the second string', filedata)

with open('target_file.txt', 'w') as file:
    file.write(filedata) 
```

# php - 从 json_encode 读取数据

> ID：15864972
> 
> 赞同：0
> 
> 时间：2013-04-07T16:48:28.160
> 
> 标签：php, jquery, ajax, json

我无法从 json_encode 读取数据。

我想阅读我的用户信息（用户名、x_c0rd、y_cord）

我的阿贾克斯：

```
$.ajax({
  url: 'inc/odczyt_multi.php',
  data: "",
  dataType: 'json',
  success: function (data) {
    if (data == 0) {
      //There r no users
    }
    else {
      for (var id in data) {
        var name = data[id][2];
        var multi_x = data[id][8];
        var multi_y = data[id][9];
        alert(name + multi_x + multi_y);
      } 
```

这是我的 odczyt_multi.php

```
$result = mysql_query('SELECT * FROM `users` ORDER BY `id`') or die(mysql_error());
$rows = array();
while ($row = mysql_fetch_assoc($result)) {
  $rows[] = $row;
}
echo json_encode($rows); 
```

这是 odczyt_multi.php 的结果

```
[ { "cords" : "",
    "data" : "07.04.13",
    "email" : "ziaja@asdad.pl",
    "id" : "2",
    "kod" : "941140747",
    "pass" : "098f6bcd4621d373cade4e832627b4f6",
    "pozycja_x" : "9",
    "pozycja_y" : "6",
    "punkty_ruchu" : "1720",
    "skin" : "",
    "user" : "Ziaja"
  } ] 
```

所以数据库中有1个用户。

我如何解析这些数据？为什么我的警报喊南而不是这个用户的数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T17:14:17.740

您应该查看[JSON 网站](http://json.org)以获取有关读取数据的更多信息。

如果您打算以 json 格式返回一堆信息。你可以遍历它们。

```
for(var i=0;i<data.length;i++){

  Do stuff with data....

  data[i]['user'] //would return Ziaja
  data[i]['pass'] //would return 098f6bcd4621d373cade4e832627b4f6

} 
```

我希望这就是你所说的

# java - 实现 java.util.Collection 的问题 和覆盖方法

> ID：15864976
> 
> 赞同：1
> 
> 时间：2013-04-07T16:48:41.053
> 
> 标签：java, collections

我有一个java作业，我应该在其中构造一个像Multiset一样工作的类。该类必须实现接口集合。我试图这样做并声明集合中的所有方法（在[此处](http://docs.oracle.com/javase/6/docs/api/java/util/Collection.html)找到）。但是当我编译这段代码时，我得到以下错误：

```
error: TreeMultisetNy is not abstract and does not override abstract method retainAll(Collection<?>) in Collection 
```

为什么会这样？

这是我的代码：

```
import java.util.*;

public class TreeMultisetNy<E extends Comparable<E>> implements Collection<E> {
private Map<E, Integer> data = new TreeMap<E, Integer > ();

public boolean add(E ny) { 
    return true;
}
public boolean addAll(Collection<? extends E> c){
    return false;
}
public void clear() {

}
public boolean contains(E what) {
    return false;
}
public boolean containsAll(Collection<?> c) {
    return false;
}
public boolean equals(E what) {
    return false;
}
public int hashCode() {
    return 0;
}
public boolean isEmpty() {
    return false;
}
public Iterator<E> iterator() {
    return null;
}
public boolean remove(E what) {
    return false;
}
public boolean removeAll(Collection<?> c) {
    return false;
}
public boolean retainAll(Collection<?> c) {
    return false;
}
public int size() {
    return 0;
}
public Object[] toArray() {
    return null;
}
public Object[] toArray(Object[] a){
    return null; 
}
} 
```

我发现了这个问题： [How to create a class that implements java.util.collections](https://stackoverflow.com/questions/4301163/how-to-create-a-class-that-implements-java-util-collections) 但我不相信我犯了和那个人一样的错误，还是我错了？

请给我一些提示，我已经编码 php 多年，但面向对象对我来说是新的！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T17:11:31.330

" " 方法的正确签名`All`如下：

```
boolean addAll(Collection<? extends E> c)
boolean containsAll(Collection<?> c)
boolean removeAll(Collection<?> c)
boolean retainAll(Collection<?> c) 
```

您需要相应地更改您的课程。

此外，单参数版本的签名`toArray()`是错误的。它应该是

```
public <T> T[] toArray(T[] a) 
```

同一行还有其他错误。您需要仔细检查您的课程，确保每个方法都具有完全正确的签名。

有关详细信息，请参阅[Javadoc](http://docs.oracle.com/javase/7/docs/api/java/util/Collection.html)。

# python - Python：如何编辑数组中元素的顺序？

> ID：15864978
> 
> 赞同：1
> 
> 时间：2013-04-07T16:48:48.957
> 
> 标签：python, arrays, python-3.x, element

在我的 Rummy 程序中，我必须对输出进行排序，以便卡片以从高到低的值打印（K 是最高的，A 是最低的），例如：

输入：1\. 8H、8C、8S、2C、7S、9H、KD

输出：1\. 8S、8H、8C、KD、9C、7H、2C

```
run4 = []
set4 = []
run3 = []
set3 = []
other = []
cards = input('1\. ')
cards = cards.split(', ')
card_numbers_count = {'A':0, '2':0, '3':0, '4':0, '5':0, '6':0, '7':0, '8':0, '9':0, 'T':0, 'J':0, 'Q':0, 'K':0}
card_suit_count = {'H':0, 'D':0, 'S':0, 'C':0}

def card_suit_key(card):
    suit_vals = {'S': 1, 'H': 2, 'C': 3, 'D': 4}
    return suit_vals[card[1]]
def numerical_order(card):
    num_vals = {'K': 1, 'Q': 2, 'J': 3, 'T': 4, '9': 5, '8': 6, '7': 7, '6': 8, '5': 9, '4': 10, '3': 11, '2': 12, 'A': 13}
    return num_vals[card[1]]

# card value
for card in cards:
    card_number = card[:-1]
    card_numbers_count[card_number] += 1
for card in cards:
    card_number = card[:-1]
    if card_numbers_count[card_number] == 3:
        run3.append(card)
        run3.sort(key=card_suit_key)
    elif card_numbers_count[card_number] == 4:
        run4.append(card)
        run4.sort(key=card_suit_key)
    elif card_numbers_count[card_number] > 3 or card_numbers_count[card_number] < 3:
        other.append(card)
        print (other)
        #other.sort(key=numerical_order)
print (run4, run3, other)

# card suit
for card in cards:
    card_suit  = card[1:]
    card_suit_count[card_suit] += 1
for card in cards:
    card_suit  = card[1:] 
```

我已经编辑了这个问题，因为我能够做到从最高到最低订购西装，但我不能对卡值做同样的事情。任何帮助，将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T18:46:29.347

通过一个简单的查找表进行排序将相当快，如果您创建该表的数据驱动，如下所示，整个事情将很容易在必要时更改 - 只需重新排序`RANKS`和/或中的值`SUITS`根据需要列出。

```
from itertools import product

RANKS = 'A 2 3 4 5 6 7 8 9 10 J Q K'.split()  # low to high value
SUITS = 'S H C D'.split()  # high to low suit
DECK = list(''.join(it) for it in product(RANKS, SUITS))
LUT = dict((card, index) for index,card in enumerate(DECK))

hand = ['8H', '8C', '8S', '9C', '7S', '9H', 'KD']
print sorted(hand, key=LUT.get) 
```

输出：

```
['7S', '8S', '8H', '8C', '9H', '9C', 'KD'] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-07T17:50:42.813

我不太确定您是如何对示例进行排序的，但是如果您想按花色（黑桃、红心、梅花、方块）对卡片进行排序，您可以创建自定义键功能。您可以像这样在字典中保存每件西装的“重量”：

**编辑**：这是一个简化版本，通过在键函数中返回一个元组，可以同时进行两种排序：

```
>>> cards = ['8H', '8C', '8S', '2C', '7S', '9H', 'KD']
>>>
>>> def card_suit_key(card):
...     suits = 'S H C D'.split()
...     ranks = 'K Q J 10 9 8 7 6 5 4 3 2 A'.split()
...     return (suits.index(card[-1]), ranks.index(card[:-1]))
...
>>> cards.sort(key=card_suit_key)
>>> cards
['8S', '7S', '9H', '8H', '8C', '2C', 'KD'] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-07T17:57:59.560

以正确的顺序将其存储在临时数组/列表中，然后将其复制回原始数组/列表。

# javascript - 如何检查 Google 发布商标签广告位是否为空？

> ID：15864980
> 
> 赞同：17
> 
> 时间：2013-04-07T16:49:15.913
> 
> 标签：javascript, jquery, adsense, google-dfp

我正在使用 Google 发布商标签来获取广告。

如何检查我是否收到特定广告位的广告或任何空广告。我正在使用下面的代码。

```
googletag.defineSlot("/1234/travel", [[300,250],[300x600]], "div-gpt-ad-123456789-0"))

 <div id="div-gpt-ad-123456789-0" style="width: 728px; height: 90px">
  <script type="text/javascript">
      googletag.cmd.push(function() {
      googletag.display("div-gpt-ad-123456789-0");
      });
    </script>
  </div> 
```

如何检查这个 div("div-gpt-ad-123456789-0") 是否包含广告？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2015-06-19T10:29:14.817

你可以这样做：

```
googletag.pubads().addEventListener('slotRenderEnded', function(event) {
    if (event.slot.getSlotElementId() == "div-gpt-ad-123456789-0") {
        var containsAd = !event.isEmpty;     
    }
}); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-10-01T18:15:08.050

GPT API 提供了一个“SlotRenderEndedEvent”，它在广告呈现时触发（或者如果没有返回任何内容）

[https://developers.google.com/doubleclick-gpt/reference](https://developers.google.com/doubleclick-gpt/reference)

您添加处理程序并检查 isEmpty 以确定是否已投放广告。

此外，如果您为广告位启用了 CollapsEmptyDivs，则广告 div 将被 GPT 设置为 display:none，因此这也是没有返回任何内容的线索。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2016-06-21T06:11:31.940

您可以使用名为 Google Publisher Console 的屏幕调试工具来解决交付问题。使用“?googfc”作为查询字符串。参考：[https ://support.google.com/dfp_premium/answer/2462712?hl=en](https://support.google.com/dfp_premium/answer/2462712?hl=en)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-04-12T08:50:34.843

```
googletag.cmd.push(function () {
		googletag.pubads().addEventListener('slotRenderEnded', function (event) {
			if (event.isEmpty) {
				var id = event.slot.getSlotElementId();
				var x = document.getElementById(id);
				if (x.parentElement.classList.contains("ad-slot")) {
					x.parentElement.style.display = "none";
				}				
			}
		});
	});
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-08T11:04:14.997

您是否尝试过使用 firebug 或 chrome web 检查器检查 div？如果加载正确，则 div 内部应该有一个 iframe，并且 iframe 内部会有一些带有广告创意的 html。

[您可以使用DFP 控制台](http://support.google.com/dfp_sb/bin/answer.py?hl=en-GB&answer=181070)非常轻松地调试 DFP，以测试您的网页是否正确标记以及广告是否正在投放。

# csv - 在 Google Refine 的列中添加每隔一对单元格

> ID：15864983
> 
> 赞同：1
> 
> 时间：2013-04-07T16:49:33.067
> 
> 标签：csv, openrefine

我有一个数据集，其中包含世界上每个国家/地区的男性和女性人数。

```
"country","sex","amount"
"Afghanistan","men","number"
"Afghanistan","women","number"
"Albania","men","number"
"Albania","women","number"... 
```

我想添加每对国家行的合并，并删除性别列，这样我最终会得到：

```
"country","amount"
"Afghanistan","number"
"Albania","number" 
```

如何在 Google/Open Refine 中以这种方式添加行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T17:24:50.967

*   如果列表未排序，请按 Country 对其进行排序并将源设为永久
*   在“国家/地区”列上空白
*   删除性别列
*   在“金额”列上连接多值单元格
*   使用沿线的表达式转换金额列`forEach(value.split(','),a,a.toNumber()).sum()`

# c++ - 记住创建空白 win32 窗口的所有内容重要吗

> ID：15864984
> 
> 赞同：3
> 
> 时间：2013-04-07T16:49:33.977
> 
> 标签：c++, winapi, directx, game-engine, game-physics

目前我对空白 win32 程序中的每一行代码有一个大致的了解，但是，如果你让我坐在一个没有电脑、鼠标、键盘和打开记事本的房间里，我将无法编写一个 win32 空白窗户。另外补充一点，我可能不记得每个 WNDCLASSEX 成员变量。

所以你认为我应该记住每一点语法吗？或者每一行代码的总体思路是否足够好？

当我的书要求我将代码从空白窗口复制并粘贴到新项目时，这个问题对我产生了启发。我心想，“我想知道成功的游戏程序员是否会为他们项目的每个部分编写代码”。

我目前正在阅读使用 DirectX 进行 3D 游戏编程的入门，并且我正在准备入门。

感谢您的见解。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T16:56:17.790

取决于你想要做什么。一般的答案是否定的，但有一些警告。如果您正在制作一个通用的 Windows 程序，而不是像您描述的那样的游戏，那么大约有十几种其他方法可以制作一个更轻松的窗口。

许多游戏开发者只是简单地保留一个带有这些东西的样板项目文件。知道这意味着什么并没有什么坏处。我有一些用于游戏/视觉效果的 Visual Studio 项目文件，因此我不必记住所有这些。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T17:16:26.050

你需要记住它吗？不。

您是否要为每个程序再次编写该代码？不。

您甚至会将其复制并粘贴到每个程序中吗？可能不是。

但是了解它是如何完成的对于有效使用为您执行这些平凡任务的库至关重要。您将了解可能的扩展点在哪里以及可用的选项。

# javascript - 缩放页面时，ul 下拉菜单会轻微移动

> ID：15864995
> 
> 赞同：0
> 
> 时间：2013-04-07T16:50:25.503
> 
> 标签：javascript, jquery, html, css

我有一个带有自动建议下拉菜单的输入。我遇到的问题是当页面被缩放时，ul 从输入字段略微移动，因此它不再与输入字段平行或齐平。有没有更好的方法可以做到这一点？我在这里有代码，还做了一个[jsfiddle](http://jsfiddle.net/sSXje/)来演示。

```
.suggestionsBox
{
  position:absolute; 
  top:24px;
  left:37px;
  width:200px;
  padding:0px;
  background-color:fff;
}
.suggestionList
{
  margin:0px;
  padding:0px;
}
.suggestionList ul li 
{
  list-style:none;
  margin: 0px;
  padding:6px;
}
.suggestionList ul li:hover 
{
 background-color: #DAD6D6;
 color:#000;
}
ul
{
 font-size:12px;
 padding:0;
 margin:0;
 border:1px solid grey;
 border-top:none; 
}
.load
{
  background-position:right;
  background-repeat:no-repeat;
}
table
{
  border-collapse:collapse; 
}
#suggest 
{
  position:relative;
}
#email
{
  outline: none; 
  width:200;color:grey;
  border:1px solid grey;
  padding:2;
} 

<div id = "suggest">
<div>
  <table>
    <td>email:</td>
    <td><input type = "text" id = "email" autocomplete = "off" placeholder = "type something then zoom" /></td>
  </table>

<div class="suggestionsBox" id = "suggestions" style = "display: none;">
<div class="suggestionList" id = "suggestionsList">
</div></div></div></div> 
```

和javascript：

```
$('#email').bind('keyup',function() {

            if($('#email').val().length >0) {

                $('#suggestions').show();
                $('#suggestionsList').html("<ul><li>now zoom in or out</li><ul>");
          }else $('#suggestions').hide();

     }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T17:18:39.550

是的，所以问题在于每个浏览器处理放大文本的方式。请注意，大多数浏览器可以很好地处理放大和缩小 div 和其他固定大小的元素，但是由于文本、更具体的字体会极大地改变字符宽度，因此会出现与您所拥有的一样的不一致。

这个问题很容易通过插入一个容器 div 集来解决，该容器`position: relative`将输入和自动完成 div 紧密地保存在一起。依偎？是的，依偎。

[这是一个JSFiddle](http://jsfiddle.net/X2NTV/20/)，它应该非常清楚地解释一切。